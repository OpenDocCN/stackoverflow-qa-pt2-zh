# StackOverflow 问答 15887000-15887999

# javascript - 从 JavaScript 调用按钮

> ID：15887002
> 
> 赞同：1
> 
> 时间：2013-04-08T19:10:17.053
> 
> 标签：javascript

我是 JavaScript 新手。我需要帮助来修改这个脚本。当我单击表格行时，我希望使用按钮的唯一 ID 调用下面的按钮。

```
$(document).ready(function(){
        $(selector).click(); //selector = h:commandLink
});

$(selector).find('tr').each(function(){ //selector = h:dataTable
        $(this).click(function(){
                $(selector).trigger('click'); //selector = h:commandLink       
        });
});

<h:commandLink id="lnkHidden" action="#{bean.pageRedirect}" style="text-decoration:none; color:white; display:none">

</h:commandLink> 
```

你能帮我解决这个问题吗？

PS这是表格的代码：

```
<h:form id="form" >
<!-- The sortable data table -->
<h:dataTable id="dataTable" headerClass="columnHeader" value="#{bean.dataList}" binding="#{table}" var="item">
    <!-- Check box -->
    <h:column>
        <f:facet name="header">
            <h:selectBooleanCheckbox style="margin-left: 0px;" value="#{bean.value}" class="checkall" >
                <f:ajax listener="#{bean.value}" render="@form" />
            </h:selectBooleanCheckbox>
        </f:facet>
        <h:selectBooleanCheckbox  onclick="highlight(this);" value="#{bean.value" >
            <!-- if the user deselects one row deselect the main checkbox -->
            <f:ajax listener="#{bean.deselectMain}" render="@form" />
        </h:selectBooleanCheckbox>
        <!-- Click on table code -->
        <h:commandLink id="lnkHidden" action="#{bean.pageRedirect}" style="text-decoration:none; color:white; display:none">

        </h:commandLink>
    </h:column>
    <!-- Row number -->
    <h:column>
        <f:facet name="header">
            <h:outputText value="№" />
        </f:facet>
        <h:outputText value="#{bean.value}" />
    </h:column>
..........

</h:dataTable> 
```

这是生成到 Web 浏览器中的代码的一部分：

```
<tr class="">
<td>
<input id="form:dataTable:1:j_idt17" type="checkbox" onclick="jsf.util.chain(this,event,'highlight(this);','mojarra.ab(this,event,\'valueChange\',0,\'@form\')')" name="form:dataTable:1:j_idt17">
<a id="form:dataTable:1:lnkHidden" onclick="mojarra.jsfcljs(document.getElementById('form'),{'form:dataTable:1:lnkHidden':'form:dataTable:1:lnkHidden'},'');return false" style="text-decoration:none; color:white; display:none" href="#"></a>
</td>
<td>2</td>
<td>35435</td> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T19:15:06.327

使用 JSP（或任何语言）时，`id`属性就是您想要用于定位元素的属性，但这有点棘手，因为它以复杂的方式生成它们。

由于您需要处理点击表格行，您可以绑定事件并触发`click`事件，如下所示：

```
$('table[id$="dataTable"]').find("tbody").on("click", "tr", function () {
    $(this).find('a[id$="lnkHidden"]').trigger("click");
}); 
```

这也需要在`$(document).ready`处理程序内部。

这会将一个事件处理程序绑定`click`到`<table>`. 单击a 时`<tr>`，此处理程序运行，并`this`引用特定行。有了这个，我找到了`<a>`包含在该行中的 (linkBut​​ton)，以及`id`您要定位的特定对象，并触发它的`click`事件。

我找到链接按钮的方式是使用“属性”（`[name]`）和“结束于”（`$=`）选择器。所有生成的元素都有一个`id`以原始`id`集合结尾（更多信息，在内部使用，在开头`id`）......这就是引擎生成它们的方式。

我不确定您在`document.ready`处理程序中尝试做什么，但如果需要为`click`我们所针对的所有 commandLinks 触发事件，您可以使用：

```
$('a[id$="lnkHidden"]').trigger("click"); 
```

所以我要使用的最终代码是：

```
$(document).ready(function () {
    $('table[id$="dataTable"]').find("tbody").on("click", "tr", function () {
        $(this).find('a[id$="lnkHidden"]').trigger("click");
    }).on("click", 'a[id$="lnkHidden"]', function (e) {
        e.stopPropagation();
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T19:24:23.073

由于事件会在 DOM 树中冒泡，如果您`<tr>`在您的内部，`<h:commandLink>`那么点击事件将冒泡并触发。

如果你`<h:commandLink>`在你的里面`<tr>`，那么你的选择语法是错误的。当你这样做时：

```
$(selector).find('tr') 
```

这是试图`<tr>`在`<h:commandLink>`.

**一件大事**是您的代码按原样在表中的每一行上附加事件侦听器。这是不好的做法，因为 JavaScript 事件会冒泡。您应该做的是这样的事情，假设您要单击的 ( `selector`) 实际上在您的行内：

```
$('table').on('click', 'tr', function() {
    $(this).find(selector).click();
}); 
```

这会将事件处理程序绑定到 all`<table>`以侦听`<tr>`元素的点击。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T19:26:34.183

你说`when I click on a table row`这意味着你需要为每一行注册一个点击事件，在这种情况下你不需要使用`each`，而是你可以使用

```
$('table#dataTable').on('click', 'tr', function(){
    // here your code goes to click the button with ID lnkHidden
    $('#lnkHidden').trigger('click');

    // after the update of your question
    $(this).find('td:first a').trigger('click');
}); 
```

# c# - Sitecore：为什么我的管道查询只为我的 droptree 返回一组结果？

> ID：15887003
> 
> 赞同：4
> 
> 时间：2013-04-08T19:10:18.087
> 
> 标签：c#, .net, sitecore, sitecore6

在 Sitecore 中，我试图将该`source`字段设置为一个查询，该查询将提取多个文件夹以从`droptree`.

例子：

```
query:/sitecore/content/Sites/Global/Data/TabPanels|./ancestor-or-self::*[@@templatename='Site']/Data/TabPanels 
```

我希望这个查询返回：

1.  的孩子们`sitecore/content/Sites/Global/Data/TabPanels`
2.  当前站点`Data/TabPanels`文件夹的子项

但是，当我运行查询时，我只得到`/sitecore/content/Sites/Global/Data/TabPanels`. 同样，当我颠倒管道查询的顺序并`./ancestor-or-self...`首先列出时，只有当前站点`Data/TabPanels`文件夹的子项显示在`droptree`.

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T20:16:36.180

不幸的是， **Sitecore中的****Droptree**控件不支持多个根，因此您不能使用查询 2 个文件夹将它们设置为树的根。

 **如果要选择`sitecore/content/Sites/Global/Data/TabPanels`当前站点`Data/TabPanels`文件夹的子项之一或子项之一，可以使用**Droplink**字段类型而不是**Droptree**并添加`/*`到两个查询部分：

```
query:/sitecore/content/Sites/Global/Data/TabPanels/*|./ancestor-or-self::*[@@templatename='Site']/Data/TabPanels/* 
```**

# java - java.io.UnsupportedEncodingException

> ID：15887005
> 
> 赞同：0
> 
> 时间：2013-04-08T19:10:18.787
> 
> 标签：java, exception, encoding

嗨，我正在为一个扫描邮件以确定它们是否是垃圾邮件的应用程序开发一个电子邮件过滤器，这是我的课程：

```
import java.io.BufferedReader;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.List;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

import javax.mail.MessagingException;
import javax.mail.internet.MimeMessage;

import ca.etsmtl.logti.log619.lab05.utilities.EmailSplicer;

public class MotsClesFilter implements EmailFilter {

    final String NAME = "Filtrage par mots cles";
    private Pattern chaineSpam;
    private Matcher chaineCourriel;
    private int nbOccMotSpam =0;
    private byte confidenceLevel;
    @Override
    public String getFilterName() {
        return this.NAME;

    }

    @Override
    public byte checkSpam(MimeMessage message) {
        analyze(message);
        switch(this.nbOccMotSpam){
        case 0:
            this.confidenceLevel = 1;
            break;
        case 1:
            this.confidenceLevel = CANT_SAY;
            break;
        case 2:
            this.confidenceLevel= 50;
            break;
        case 3:
            this.confidenceLevel = 70;
            break;
        case 4 :
            this.confidenceLevel = 80;
            break;

        } return (getConfidenceLevel());
    }

    public void analyze(MimeMessage message){
        try {
            List<String> listeChaines = new ArrayList<String>(); 
            BufferedReader bis = new BufferedReader(new InputStreamReader(new FileInputStream(new File("SpamWords.txt"))));
            while(bis.ready()){
                String ligne = bis.readLine();
                listeChaines.add(ligne);
            }
            String[] tabMots = EmailSplicer.getMessageContent(message);
            for (int i =0;i<tabMots.length;i++){
                /*System.out.print("*************************************");
                System.out.print(tabMots[0]);
                System.out.print("**************************************");*/
                for (int j =0; j<listeChaines.size();j++){
                    this.chaineSpam = Pattern.compile(listeChaines.get(j));
                    this.chaineCourriel = this.chaineSpam.matcher(tabMots[i]);
                    if (this.chaineCourriel.matches())
                        this.nbOccMotSpam++;

                }
            }
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (MessagingException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
    @Override
    public byte getConfidenceLevel() {
        // TODO Auto-generated method stub
        return this.confidenceLevel;
    }

    @Override
    public boolean enabled() {
        // TODO Auto-generated method stub
        return true;
    }
} 
```

这是我正在使用的 EmailSplicer 实用程序类：

```
import java.io.IOException;
import java.util.ArrayList;

import javax.mail.MessagingException;
import javax.mail.Multipart;
import javax.mail.internet.MimeMessage;

/**
 * Utility class to return all the content of a MimeMessage
 * @author Maxime Caumartin <maxime.caumartin.1@ens.etsmtl.ca>
 */
public class EmailSplicer {

    /**
     * Contains the types of email parts that can be analyzed by this class.
     * @author Maxime Caumartin <maxime.caumartin.1@ens.etsmtl.ca>
     */
    private enum ContentTypes
    {
        Plain("text/plain"), HTML("text/html"), Multipart("multipart"), Unknown(
                "?");

        private String  type;

        ContentTypes(String type)
        {
            this.type = type;
        }

        public static ContentTypes getType(String type)
        {
            if (type.contains(Plain.type))
                return Plain;
            if (type.contains(HTML.type))
                return HTML;
            if (type.contains(Multipart.type))
                return Multipart;
            return Unknown;
        }

    }

    /**
     * Recursive method that passes through all the parts of the Mutlipart message and returns an ArrayList<String> of the content of these parts.
     * @param multiPartMsg The Multipart that needs to be dissected.
     * @return The ArrayList<String> containing all the content of the Mutlipart message.
     * @throws MessagingException Exception thrown if the analyzer cannot read the message.
     * @throws IOException Exception thrown if the encoding type isn't valid.
     */
    private static ArrayList<String> getMutlipartContent(Multipart multiPartMsg)
            throws MessagingException, IOException
    {
        ArrayList<String> returnTable = new ArrayList<String>(
                multiPartMsg.getCount());

        for (int i = 0; i < multiPartMsg.getCount(); i++)
        {
            switch (ContentTypes.getType(multiPartMsg.getBodyPart(i)
                    .getContentType()))
            {
                case Plain:
                    returnTable.add((String) multiPartMsg.getBodyPart(i)
                            .getContent());
                    break;
                case HTML:
                    String s = org.clapper.util.html.HTMLUtil.textFromHTML((String) multiPartMsg.getBodyPart(i)
                            .getContent()).trim();
                    if (s.length() != 0)
                        returnTable.add(s);
                    break;
                case Multipart:
                    returnTable
                            .addAll(getMutlipartContent((Multipart) multiPartMsg
                                    .getBodyPart(i).getContent()));
                    break;
                default:
            }
        }
        return returnTable;
    }

    /**
     * Returns all the content of the MimeMessage passed as a parameter. The whole content will be parsed.
     * @param message The MimeMessage containing textual information.
     * @return The array of string containing all the strings from the content of the message.
     * @throws MessagingException Exception thrown if the analyzer cannot read the message.
     * @throws IOException Exception thrown if the encoding type isn't valid.
     */
    public static String[] getMessageContent(MimeMessage message)
            throws MessagingException, IOException
    {
        String contentType = message.getContentType();

        switch (ContentTypes.getType(contentType))
        {
            case Plain:
                return new String[] { (String) message.getContent() };
            case Multipart:
                return getMutlipartContent(
                        (Multipart) message.getContent()).toArray(new String[0]);
            case HTML:
                String s = org.clapper.util.html.HTMLUtil.textFromHTML((String) message
                        .getContent()).trim();
                if (s.length() != 0)
                    return new String[] {s};
            default:
                return new String[0];
        }

    }

} 
```

现在，当我执行整个应用程序的主要方法时，这是我得到的异常：

```
java.io.UnsupportedEncodingException: iso-0621-9
at sun.nio.cs.StreamDecoder.forInputStreamReader(Unknown Source)
at java.io.InputStreamReader.<init>(Unknown Source)
at com.sun.mail.handlers.text_plain.getContent(text_plain.java:82)
at javax.activation.DataSourceDataContentHandler.getContent(Unknown Source)
at javax.activation.DataHandler.getContent(Unknown Source)
at javax.mail.internet.MimeBodyPart.getContent(MimeBodyPart.java:629)
at ca.etsmtl.logti.log619.lab05.utilities.EmailSplicer.getMutlipartContent(EmailSplicer.java:69)
at ca.etsmtl.logti.log619.lab05.utilities.EmailSplicer.getMessageContent(EmailSplicer.java:101)
at ca.etsmtl.logti.log619.lab05.filter.MotsClesFilter.analyze(MotsClesFilter.java:66)
at ca.etsmtl.logti.log619.lab05.filter.MotsClesFilter.checkSpam(MotsClesFilter.java:34)
at ca.etsmtl.logti.log619.lab05.Application.main(Application.java:107) 
```

有人可以告诉我如何解决它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T19:20:43.827

ISO-0621-9 不是一种编码，如果是，它也不是[Java 支持](http://docs.oracle.com/javase/7/docs/technotes/guides/intl/encoding.doc.html)的编码。我猜这甚至可能是垃圾邮件的一个很好的指标：没有有效的编码 => 垃圾邮件。

稍微搜索一下*ISO 621*，发现[ISO-621](http://www.iso.org/iso/home/store/catalogue_tc/catalogue_detail.htm?csnumber=4741)是*“锰矿石——金属铁含量的测定（金属铁含量不超过 2%）——磺基水杨酸光度法”的国际标准*

我想说这与计算机无关，与编码无关；）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T19:14:34.947

[本文档](https://docs.oracle.com/javase/6/docs/technotes/guides/intl/encoding.doc.html)列出了 Java 支持的编码。

iso-0621-9 不在列表中。

# javascript - Javascript：隐藏/显示 div

> ID：15887006
> 
> 赞同：0
> 
> 时间：2013-04-08T19:10:28.540
> 
> 标签：javascript

作为 Javascript 的新手，我有点卡在这里。我要做的就是：当任何内容出现在 div2 中时，div1 就会消失。

```
<html>
<head>
<title>Untitled Document</title>

<script src="jquery-1.9.1.min.js"></script>
<script type=”text/javascript”&gt;
$(document).ready(function(){
   if ($("#div2").html().length > 0) {
     $('#div1').hide();
   }                                           
 });
</script>
</head>

<body>
    <div id="div1">Bonus Bet</div>
    <div id="div2">Random Text</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T19:14:34.727

没有内置的处理程序。您需要做的是挂钩您的函数，该函数将更改 div2 中的内容，然后隐藏 div1。如果 div2 内部有硬编码数据，那么您的方法就可以正常工作。

# objective-c - 块和 GCD：异步数据收集

> ID：15887007
> 
> 赞同：0
> 
> 时间：2013-04-08T19:10:29.633
> 
> 标签：objective-c, objective-c-blocks, grand-central-dispatch

我从 JSON（对 Web 服务完全陌生）开始，这样做是为了从 Wunderground API 收集数据。这个同步代码对我有用：

```
NSDictionary *weatherData;

NSString *urlString;
if (self.apiKey) {
    urlString = [@"http://api.wunderground.com/api/" stringByAppendingString:self.apiKey];
}
urlString = [urlString stringByAppendingString:@"/conditions/q/CA/San_Francisco.json"];;
NSURL *url = [NSURL URLWithString:urlString];
NSData *jasonData = [NSData dataWithContentsOfURL:url];

NSError *error;
weatherData = [NSJSONSerialization JSONObjectWithData:jasonData options:0 error:&error];

if (error) {
    NSLog(@"Error creating JSON Object, error description  = %@", [error localizedDescription]);
}

return weatherData;
// returns a dictionary 
```

但这不会：

```
__block NSDictionary *weatherData;
dispatch_queue_t weatherDataQueue = dispatch_queue_create("weatherDataQueue", NULL);
dispatch_async(weatherDataQueue, ^{
    NSString *urlString;
    if (self.apiKey) {
        urlString = [@"http://api.wunderground.com/api/" stringByAppendingString:self.apiKey];
    }
    urlString = [urlString stringByAppendingString:@"/conditions/q/CA/San_Francisco.json"];;
    NSURL *url = [NSURL URLWithString:urlString];
    NSData *jasonData = [NSData dataWithContentsOfURL:url];

    NSError *error;
    weatherData = [NSJSONSerialization JSONObjectWithData:jasonData options:0 error:&error];

    if (error) {
        NSLog(@"Error with creating JSON Object, error description %@", [error localizedDescription]);
    }
});

NSLog(@"weatherData = %@", weatherData);

return weatherData;
// returns NULL 
```

现在，我意识到这可能与当我返回时`weatherData`，分派块中的代码尚未运行这一事实有关。如果有人能帮我弄清楚如何解决这个问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T19:12:29.550

异步做某事时，需要触发“嘿，我已经下载数据了！” 从异步执行的代码。

也就是说，加载数据的块的末尾会执行以下操作：

```
 dispatch_async(dispatch_get_main_queue(), ^{
      ... do whatever is necessary to load/display the data in the UI here ...
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T19:13:43.617

我可以给一个可以大大简化您的生活的建议 - 使用[AFNetworking](https://github.com/AFNetworking/AFNetworking)进行这样的网络操作。

或者，您需要将回调块传递给您的函数，然后该函数可以使用该`weatherData`值执行。您对`weatherData`错误的假设是正确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T19:13:52.810

我建议发布一个**NSNotification**，然后为该通知设置一个侦听器，并在那时在 weatherData 上执行必要的代码。

虽然我最喜欢@bbum 的建议。

# ios - 同时滚动两个 UITableView

> ID：15887011
> 
> 赞同：0
> 
> 时间：2013-04-08T19:10:50.593
> 
> 标签：ios, uitableview, scroll

我有一个带有 mainTable 和 menuTable 声明的父级“ListViewController”。我还有两个实现“ListViewController”的控制器“MenuController”和“MainController”。每个都有自己的故事板，但感谢 ECSlidingViewController（facebook 菜单效果），我可以在一个屏幕上看到两者。MenuController 有 menuTable，MainController 有 mainTable。我希望 mainTable 与 menuTable 一起滚动。问题是`(void)scrollViewDidScroll:(UIScrollView *)scrollView`在“ListViewController”中，我只能设置当前滚动的表的 contentOffset。

**ListViewController.h**

```
@interface ListViewController : UIViewController {
IBOutlet UITableView *mainTable;
IBOutlet UITableView *menuTable;
} 
```

**列表视图控制器.m**

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView {
self.mainTable.contentOffset = scrollView.contentOffset;;
// works only when I am scrolling mainTable, 
// but I need it when I am scrolling menuTable

} 
```

**菜单控制器.m**

```
@interface MenuController :  ListViewController <UITableViewDelegate, UITableViewDataSource>
{
...
} 
```

**主控制器.m**

```
@interface MainController :  ListViewController <UITableViewDelegate, UITableViewDataSource>
{
...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T19:47:51.977

正如我所见`ListViewController`，它是一个表的委托，因此`scrollViewDidScroll:`仅针对此 UITableView 调用。您应该在它的委托中跟踪第二个表滚动，您可以在表和它的真实委托之间建立一个代理委托......

```
@interface ProxyTableViewDelegate <UITableViewDelegate>

@property (nonatomic, strong) id<UITableViewDelegate> realDelegate;
- (instancetype)initWithRealDelegate:(id<UITableViewDelegate>)realDelegate;
- (void)scrollViewDidScroll:(UIScrollView *)scrollView;

@end

@implementation ProxyTableViewDelegate

- (instancetype)initWithRealDelegate:(id<UITableViewDelegate>)realDelegate
{
    if (self = [super init]) {
        self.realDelegate = realDelegate;
    }
    return self;
}

- (void)scrollViewDidScroll:(UIScrollView *)scrollView
{
    // Custom actions ...

    if ([self.realDelegate respondsToSelector:@selector(scrollViewDidScroll:)])
        [self.realDelegate scrollViewDidScroll:scrollView];
}

- (void)forwardInvocation:(NSInvocation *)invocation
{
    [invocation invokeWithTarget:self.realDelegate];
}

@end 
```

用法：

```
// tableView.delegate != nil
tableView.delegate = [[ProxyTableViewDelegate alloc] initWithRealDelegate:tableView.delegate]; 
```

# neo4j - 构建基于 NEO4J 的网站

> ID：15887020
> 
> 赞同：1
> 
> 时间：2013-04-08T19:11:33.187
> 
> 标签：neo4j

我可以使用嵌入在 servlet 和 jsp 中的 NEO4J 来开发一个网站，用户将在其中输入节点之间的关系和关系属性，以便每个用户都可以看到所有数据，或者我必须使用 NEO4J rest api。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T19:16:44.037

当然可以。在服务器启动时，您可能可以设置数据库。然后可能使用依赖注入（在 Spring 等中）或使用静态引用等，参考 db 并执行函数。终止时，db 可以关闭。

事实上，我更喜欢它而不是其他 api（它具有更好的性能和更好的抓地力）。

# spring-mvc - Spring MVC 3.2——NotReadablePropertyException

> ID：15887021
> 
> 赞同：0
> 
> 时间：2013-04-08T19:11:49.843
> 
> 标签：spring-mvc, readable

我的 Spring 3.2 应用程序中出现以下异常：

```
org.springframework.beans.NotReadablePropertyException: Invalid property 'name' of bean class [java.util.ArrayList]: Bean property 'name' is not readable or has an invalid getter method: Does the return type of the getter match the parameter type of the setter?
    at org.springframework.beans.BeanWrapperImpl.getPropertyValue(BeanWrapperImpl.java:729)
    at org.springframework.beans.BeanWrapperImpl.getPropertyValue(BeanWrapperImpl.java:721)
    at org.springframework.web.servlet.support.BindStatus.<init>(BindStatus.java:147)
    at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getBindStatus(AbstractDataBoundFormElementTag.java:178)
    at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getPropertyPath(AbstractDataBoundFormElementTag.java:198)
    at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getName(AbstractDataBoundFormElementTag.java:164)
    at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.autogenerateId(AbstractDataBoundFormElementTag.java:151)
    at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.resolveId(AbstractDataBoundFormElementTag.java:142)
    at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.writeDefaultAttributes(AbstractDataBoundFormElementTag.java:126)
    at org.springframework.web.servlet.tags.form.AbstractHtmlElementTag.writeDefaultAttributes(AbstractHtmlElementTag.java:421)
    at org.springframework.web.servlet.tags.form.InputTag.writeTagContent(InputTag.java:142)
    at org.springframework.web.servlet.tags.form.AbstractFormTag.doStartTagInternal(AbstractFormTag.java:102)
    at org.springframework.web.servlet.tags.RequestContextAwareTag.doStartTag(RequestContextAwareTag.java:79)
    at org.apache.jsp.WEB_002dINF.jsp.EnterBulletin_jsp._jspx_meth_form_005finput_005f0(EnterBulletin_jsp.java:403)
    at org.apache.jsp.WEB_002dINF.jsp.EnterBulletin_jsp._jspx_meth_form_005fform_005f0(EnterBulletin_jsp.java:347)
    at org.apache.jsp.WEB_002dINF.jsp.EnterBulletin_jsp._jspService(EnterBulletin_jsp.java:108)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:419)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:391)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:684)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:471)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:402)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:329)
    at org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:238)
    at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:262)
    at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1265)
    at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1016)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:965)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:859)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:883)
    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:792)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:395)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:250)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:188)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:166)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

这是我的控制器中的方法。我将 ArrayList 放入命令对象中，因此稍后将 Bulletin 对象从命令对象中取出似乎会出现问题。

```
@RequestMapping(value = "/getApprovedBulletins", method = RequestMethod.POST)
public ModelAndView getApprovedBulletins(
        @ModelAttribute("bulletin") Bulletin bulletin, BindingResult result) {
    ModelAndView mav = new ModelAndView();

    try {
        List<Bulletin> bulletins = bulletinDAO.getApprovedBulletins();
        mav.setViewName("EnterBulletin");
        if (bulletins != null) {
            mav.addObject("command", bulletins);
        }
    } catch (Exception e) {
        System.out.println(e.getMessage());
        mav.setViewName("FailurePage");
    }

    return mav;
} 
```

出于某种原因，问题被标记在页面顶部表单的行中，而我正在尝试做的是在顶部列出公告。这是JSP。有任何想法吗？

```
<body>
    <h1>Job Connections Bulletin Board</h1>
    <h2>Bulletin Entry</h2>
    <b><font color="red"><c:out value='${confirmation}' /></font></b>
    <c:remove var="confirmation" scope="session" />
    <p>Here you can post comments, announce jobs, etc. All comments are
        subject to approval.</p>
    <p>
        To search bulletins, click <a href="SearchPage.jsp">here</a>.
    </p>
    <c:forEach var="bulletin" items="${bulletins}">
        <c:if test="${bulletin.approved}">
            <c:url value="/getSingleBulletin"
                var="{bulletin.name} -- {bulletin.subject}">
                <c:param name="id">${bulletin.id}</c:param>
            </c:url>
            <br />
            <br />
        </c:if>
    </c:forEach>
    <form:form command="bulletin" method="post" action="/processBulletin">
        <table>
            <tr>
                <td>Name:</td>
                <td><form:input path="name" maxlength="30" /></td>
            </tr>
            <tr>
                <td>Subject:</td>
                <td><form:input path="subject" maxlength="50" /></td>
            </tr>
            <tr>
                <td>Message:</td>
                <td><form:textarea path="note" cols="50" rows="50" /></td>
            </tr>
            <tr>
                <td><input type="button" value="Submit bulletin" name="submit" /></td>
                <td>&nbsp;</td>
            </tr>
        </table>
    </form:form>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T03:58:05.823

问题解决了。我将 List 放入会话对象中，然后将 Bulletin 的实例放入命令对象中。我的代码现在看起来像这样。

```
List<Bulletin> bulletins = bulletinDAO.getApprovedBulletins();
mav.setViewName("EnterBulletin");
if (bulletins != null) {
    ServletRequestAttributes attributes = 
        (ServletRequestAttributes) RequestContextHolder.currentRequestAttributes();
    HttpSession session = attributes.getRequest().getSession(true);
    session.setAttribute("bulletins", bulletins);
    mav.addObject("command", new Bulletin());
} 
```

# string - 复制一些文本字符串并连续粘贴的软件

> ID：15887023
> 
> 赞同：0
> 
> 时间：2013-04-08T19:12:08.487
> 
> 标签：string, copy, paste, shortcuts

我想知道是否有这样的软件（在windows或linux上）允许复制几个文本字符串，然后一个接一个地粘贴它们。

示例：我复制字符串 A，即“000”，然后复制字符串 B，即“BBB”，然后复制字符串 C，即“111”。然后我想连续按 Ctrl+V 组合键 3 次，第一次粘贴字符串 A，然后粘贴第二次字符串 B，依此类推。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T19:19:42.417

我不知道是否有任何程序可以在所有 Windows 或 Linux 中启用此功能，但个别程序已启用此功能。

例如，如果您使用 Visual Studio 进行开发，您可以通过按 Ctrl+Shift+V 进行粘贴，它会在您复制的最新内容中旋转。VS 是我所知道的唯一可以做到这一点的软件，但可能还有其他软件。

# c++ - 将堆栈对象存储在优先级队列中

> ID：15887025
> 
> 赞同：0
> 
> 时间：2013-04-08T19:12:11.930
> 
> 标签：c++, stl

我有一个对象

```
priority_queue<SState,vector<SState>,greater<SState> > m_queue; 
```

这是一个类的成员，其中 SState 是一个内部结构，它定义了

```
struct SState
{
    SState(int p, int b):priority(p),bbb(b){}
    ~SState(){}
    int priority;
    int bbb;
}; 
```

和一个比较器

```
inline bool operator > (const MyClass::SState& left, const MyClass::SState& right)
{
   return left.priority > right.priority;
} 
```

我有一个创建 SState 对象的方法。

```
m_queue.push(SState(p,b)); 
```

和**其他**方法

```
if (!m_queue.empty())
{

      const SState& state = m_queue.top();
      ...
      m_queue.pop();

} 
```

我有一个堆损坏。怎么做才对？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T19:17:20.100

您的问题可能是您在`state`调用后使用`m_queue.pop();`的，导致访问对不再存在的项目的引用。您需要`pop`稍后将调用移动到函数中，或者在从堆栈中获得对该项目的引用后制作该项目的副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T19:18:00.493

```
const SState& state = m_queue.top(); 
```

在那里你得到了对堆栈对象的堆副本的引用。但是这个引用不会延长对象的生命周期。

所以那里

```
 m_queue.pop(); 
```

对象正在破坏，您不能再使用对它的引用。

# java - Xmlpullparser 解析嵌套项

> ID：15887026
> 
> 赞同：1
> 
> 时间：2013-04-08T19:12:15.063
> 
> 标签：java, android, xml-parsing, xsd, xmlpullparser

我正在制作一个应用程序，它将通过 xml 访问 ebay api 来搜索项目。我已按照指南 [Android 开发人员指南 XMLPullParser](http://developer.android.com/training/basics/network-ops/xml.html)使用 Pull 解析器，并且能够很好地解析基本的 xml。但是对于我的需要，pullparser 上没有足够的信息，因为我正在尝试以链接和 pullparser 站点中均未提及的格式访问项目。

产品项目在项目数组中。在返回第一个项目后尝试运行解析器时，解析器将返回到 Item 数组级别，而不是为每个项目循环。这导致解析器运行整个 xml 并且只返回一项。尝试了几天后，我尝试的任何方法都无法阻止解析器返回到 Item Array 级别。

这是XML的结构

```
 <FindPopularItemsResponse>
     <Timestamp>2013-04-08T18:30:44.139Z</Timestamp>
    <Ack>Success</Ack>
    <Build>E817_CORE_APILW2_15902151_R1</Build>
    <Version>817</Version>
    <ItemArray>
     <ItemID>330624952975</ItemID><EndTime>2013-05-03T13:31:06.000Z</EndTime> 
      <ViewItemURLForNaturalSearch></ViewItemURLForNaturalSearch>
       <ListingType>FixedPriceItem</ListingType><GalleryURL></GalleryURL>
        <PrimaryCategoryID>73522</PrimaryCategoryID><PrimaryCategoryName>  
        </PrimaryCategoryName><BidCount>706</BidCount><ConvertedCurrentPrice 
         currencyID="USD">14.95</ConvertedCurrentPrice>
        <ListingStatus>Active</ListingStatus><TimeLeft>P24DT19H22S</TimeLeft>
        <Title>    </Title>
    </ItemArray>
    </FindPopularItemsResponse> 
```

谢谢

卢克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T19:46:52.117

没有任何代码，这实际上是一个很难回答的问题。

您的循环结构应该如下所示：

```
while (eventType != XmlPullParser.END_DOCUMENT) {
    switch (eventType) {
    case XmlPullParser.START_TAG:
        if (xpp.getName().compareTo("ItemID") == 0) { // new item found
            // handle the whole item here if the format is static
        }
        // other stuff
        break;
    case XmlPullParser.END_TAG:
        // TODO
        break;
    case XmlPullParser.TEXT:
        // TODO
        break;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-30T17:54:30.733

您提供的 xml 中只有一项。如果您的示例中没有多个项目，则很难正确回答。但我会尝试只使用 ItemID。创建一个 ItemID 列表，当您点击该节点的文本时，将一个新 ItemID 添加到列表中。

创建对象列表并跟踪当前节点

```
List<ItemID> bdxr = new ArrayList<ItemID>();

...

String N = "";  // I know it's upper case but its one character and important

...

if (eventType == XmlPullParser.START_TAG) {
    N = xpp.getName(); // current node

...

} else if (eventType == XmlPullParser.TEXT) {
if (N.equals("ItemID")) {
        // create an ItemID Object and add the text to it
        bdxr.add(new ItemID(xpp.getText()); 

...

} else if (eventType == XmlPullParser.END_TAG) {
    N = ""; // no current node. 
```

祝你好运，将项目添加到列表中，一个简单的 xpp 循环

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-30T21:33:21.143

你还没有完全指定你试图从 xml 中提取什么数据，所以....假设你想要来自每个标签的数据，我会这样做

```
int eventType = parser.getEventType();
while (eventType != XmlPullParser.END_DOCUMENT) {
        String name;

        String itemID, endTime, viewItemURLForNaturalSearch, listingType;

        switch (eventType) {
            case XmlPullParser.START_DOCUMENT:
                Log.d("Ebay  ", " Start of Document");
                break;

            //look for the starting tag "item array" in the xml
            case XmlPullParser.START_TAG:

                name = parser.getName();
                if(name.equalsIgnoreCase("ItemArray")) {

           /*to handle nested tags. 
           "parser.nextTag()" goes to the next starting tag  immediately following "ItemArray",
           and "itemID = parser.nextText()" assigns the text within that tag 
            to the string itemID*/

                    parser.nextTag();
                    itemID = parser.nextText();
                    Log.d("Listing ", itemID);

                    parser.nextTag();
                    endTime = parser.nextText();
                    Log.d("Listing ", endTime);

                    parser.nextTag();
                    viewItemURLForNaturalSearch = parser.nextText();
                    Log.d("Listing ", viewItemURLForNaturalSearch);

                    parser.nextTag();
                    listingType = parser.nextText();
                    Log.d("Listing ", listingType);

                }

                break;

        }

        eventType = parser.next();
    } 
```

希望这可以帮助。

# networking - IPX/SPX 的详细信息

> ID：15887029
> 
> 赞同：-1
> 
> 时间：2013-04-08T19:12:21.317
> 
> 标签：networking

这些天来，我一直在寻找有关 IPX/SPX 协议栈的一些好的信息，但信息非常有限。我的意思是，维基百科的文章只包含一段关于信息的内容，其余的都是关于实施的。

任何人都知道是否有任何来源可以获取有关 IPX/SPX 的详细信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T00:25:24.403

IPX 出自 Xerox，并在 Netware 中以主要方式使用，直到他们看到了曙光。您应该可以在[Novell](http://novell.com)的某个地方找到这一切。如果没有，我想我还有一大堆二十年前的 IPX/SPX 书籍，你可以以邮费的价格买到。

[SPX](http://en.wikipedia.org/wiki/IPX/SPX)从来没有任何用处，因为它缺乏有序的关闭，在 SPX II 之前使用更少，因为它缺乏适当的窗口。我在 SPX 的各种平台实现中发现了足够多的错误来说服自己它很少被使用。而且您必须使用 System V TLI 编程接口，这是乏味的拟人化。

# python - 在 Python 中获取异常详细信息

> ID：15887038
> 
> 赞同：29
> 
> 时间：2013-04-08T19:12:52.900
> 
> 标签：python, exception, error-handling, python-3.3

我必须在同一个循环中打开并写入大约 10 个不同的文件。例如：

```
for i in range(0,10):
    try:
        a=5
        file1 = open("file1.txt",'w+')
        file2 = open("file2.txt",'w+')
        #... etc

        print(str(a),file=file1)
        print(str(a)+"hi",file=file2)
        # ... etc
    except: 
        #error handling 
```

现在我想做的是能够获取特定的异常信息，例如在一般异常中打开/写入的文件。根据我目前的理解，我必须做这样的事情来实现我想要的：

```
for i in range(0,5):
    a=5
    try:
        file1 = open("file1.txt",'w+')
        print(str(a),file=file1)
    except: 
        #error handling for file1
    try:
        file2 = open("file2.txt",'w+')
        print(str(a)+"hi",file=file2)
    except: 
        #error handling for file2 
```

...当我必须为大约 10 个不同的文件执行此操作时，这将变得非常笨重且没有吸引力。有没有办法从我的第一个示例中的一般异常中获取（例如）文件名信息？基本上，因此异常可以报告诸如“写入file1时出错”之类的内容，而无需尝试/专门针对file1操作。

编辑：这是对写入文件的数据的过度简化。str(a) 和 str(a)+"hi" 并不能很好地表示实际写入的数据；file1 可能需要一个硬编码的整数，而 file2 可能需要一个用多个变量格式化的字符串。将打开/写入过程概括为一个循环不会很好地工作。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-04-08T23:44:20.467

您可以使用[`sys.exc_info`](http://docs.python.org/3/library/sys.html#sys.exc_info)来获取有关当前正在处理的异常的信息，包括异常对象本身。异常`IOError`包含您需要的所有信息，包括文件名、errno 和描述错误的字符串：

```
import sys

try:
    f1 = open('example1')
    f2 = open('example2')
except IOError:
    type, value, traceback = sys.exc_info()
    print('Error opening %s: %s' % (value.filename, value.strerror)) 
```

在第一个异常之后，块中的执行`try`显然仍会停止。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2015-03-05T21:31:10.320

使用[回溯](https://docs.python.org/2/library/traceback.html "追溯")模块：

```
traceback.print_exc() 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-08T19:21:57.820

您提到使用循环，但实际上并没有使用循环。使用循环。这样您就可以在一个`try`块内一次写入每个文件。除了为每个文件写入一个值外，您似乎没有对文件做任何事情，因此您不需要将它们全部打开。

```
for filename in ['file1.txt', 'file2.txt', ...]:
    try:
        with open(filename, 'w+') as f:
            f.write(str(a)+"whatever")
    except IOError:
        print("Error occurred with", filename) 
```

编辑：如果您要写入不同文件的内容大相径庭，请提前创建字典或其他数据结构，以存储文件和数据之间的映射，然后在循环中使用它。

```
data = {'file1.txt': str(a), 'file2.txt': 'something else', 'file3.txt': str(a)+str(b)}

for filename, output in data.items():
    try:
        with open(filename, 'w+') as f:
            f.write(output)
    except IOError:
        print("Error occurred with", filename) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-04-30T23:19:29.760

使用`exc_type, value, exc_traceback = sys.exc_info()`时注意，产生异常的文件名可以通过以下方式获取：

```
exc_traceback.tb_frame.f_locals.get('filename') 
```

# c# - 使用 Math.net Numerics 和 C# 构建项目

> ID：15887041
> 
> 赞同：0
> 
> 时间：2013-04-08T19:13:00.777
> 
> 标签：c#, .net, math.net

我对 C# 没有经验，也不知道如何使用我在那里下载的那些二进制文件：http: [//mathnetnumerics.codeplex.com/releases/view/101319](http://mathnetnumerics.codeplex.com/releases/view/101319)

我如何在我的项目中包含和构建它们，以便在项目完成后我可以独立运行？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T19:16:22.433

通过 Visual Studio 中的 Nuget 包控制台安装所需的库和包。

单击文件 -> 库包管理器 -> 包管理器控制台。然后键入以下命令。

PM> 安装包 MathNet.Numerics

这将安装软件包并为您提供 dll。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T19:16:30.690

添加对二进制文件的引用，并在文件中包含您正在使用的该二进制文件的任何部分的命名空间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T19:19:55.203

如果您正在使用，`Visual Studio`那么您可以从项目中的“添加引用”选项中添加这些库。 ![在此处输入图像描述](https://i.stack.imgur.com/QLbUE.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T19:15:40.280

要使用外部二进制文件，您需要对其进行引用。这可能会指导你

[http://msdn.microsoft.com/en-us/library/7314433t%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/7314433t%28v=vs.80%29.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-08T19:23:32.520

在我看来，最简单的方法是将所有文件放在“bin”文件夹中。然后，右键单击项目中的“references”文件夹，单击 Add --> Add Reference。接下来，单击“浏览”选项卡，导航到“bin”文件夹，然后选择文件。现在可以通过您的源代码访问这些库。

您可以通过在类顶部插入“使用”语句来访问方法等，例如“使用 MathNet.Numerics”

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-12-17T06:12:20.043

在 Visual Studio 2019 中，安装 MathNet.Numerics 包要容易得多：

1.  转到项目选项卡
2.  找到并单击 NuGet 包管理
3.  转到搜索并输入要安装的软件包的名称
4.  选择包并安装

# android - 从我的应用程序中在 android native clander 中添加事件并同步

> ID：15887042
> 
> 赞同：0
> 
> 时间：2013-04-08T19:13:00.863
> 
> 标签：android, android-calendar

我想为我的日历事件创建一个应用程序我想要做的是当我将在我的服务器上创建一个事件时，应该使用我的应用程序在 android 本机日历中自动添加相同的事件，因此可以在 android 默认日历中添加事件如果是的话，使用第三方应用程序如何实现？

我打算使用 Google 推送通知来推送事件详细信息，或者是否有任何 API，以便日历自动同步 Gmail 日历和 Facebook 日历。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T19:24:18.830

> 是否可以使用第三方应用程序在 android 默认日历中添加事件，如果可以，如何实现？

=> 是的，可以通过`Calendar`内容提供者（适用于 Android 4.0）或`CalendarContract`（适用于 Android >4.0）内容提供者。

检查[此](http://www.vogella.com/articles/AndroidCalendar/article.html)日历合同示例并检查[此](https://stackoverflow.com/a/4336183/379693)日历内容提供程序

# asp.net-mvc - 管理 Ajax 会话超时

> ID：15887051
> 
> 赞同：4
> 
> 时间：2013-04-08T19:13:29.737
> 
> 标签：asp.net-mvc

我有一个 ASP.Net MVC4 应用程序，其页面包含许多 Ajax 操作。我正在尝试处理会话到期后发生的事情。

目前，如果上下文报告当前请求已通过身份验证，我的代码会强制在 Session_Start() 上运行“FormsAuthentication.SignOut()”。

```
protected void Session_Start(object sender, EventArgs e) {
    if (HttpContext.Current.Request.IsAuthenticated) {
        FormsAuthentication.SignOut();         // Drop all the information held in the session
        // now continue with request....
    }
} 
```

下一部分是“HandleUnauthorizedRequest”的覆盖，它应该捕获未经授权的请求，测试它是否是 ajax 请求，如果不是则继续，否则返回特定的 JSON 以指示失败。

```
protected override void HandleUnauthorizedRequest(AuthorizationContext filterContext) {
    if (filterContext.HttpContext.Request.IsAjaxRequest()) {
        filterContext.Result = new JsonResult { Data = new { ajaxUnauthorizedMessage = "sorry, but your session has expired..." }, JsonRequestBehavior = JsonRequestBehavior.AllowGet};
    } else {
        base.HandleUnauthorizedRequest(filterContext);
    }
} 
```

最后，我有一个全局 jquery ajaxSuccess 处理程序，它测试我上面的消息，并提醒用户注意问题，然后强制重新加载（这应该导致 MVC 重定向到登录页面），

```
$(document).ajaxSuccess(function (result) {
    if (result.ajaxUnauthorizedMessage) {
        alert(result.ajaxUnauthorizedMessage);
        location.reload();
    }
}); 
```

不幸的是，它似乎不是那样工作的。取而代之的是会话开始“注销”，然后执行 [Authorize] 修饰的操作方法（然后由于对丢失会话的依赖而失败）。

令人费解的是，如果我随后对同一个 Ajax 操作进行第二次调用（不等待新会话的超时），第二次调用会被“HandleUnauthorizedRequest”方法拦截，然后一切都按我预期的那样工作（好吧，不是所有的，ajaxSuccess 全局处理程序都无法接收第二个调用，即使在捕获第一个调用之后也是如此，但在我解决了主要问题之后，这是需要担心的）。

此外，即使没有 ajax，也会看到相同的行为。注销会触发，但我是“预先授权的”，所以无论如何都会触发动作。

如何成功取消授权，以便“HandleUnauthorizedRequest”在我期望的时候触发？

## 编辑 1

一时兴起，我编辑了 Session_Start()，并让它删除了所有的请求和响应 Cookie。我惊讶地发现需要 auth 的 Action 方法仍然触发，更惊讶的是 Cookies 都回来了！他们在删除后仍然存在！我猜 Session_Start 不是在处理真正的 Request 对象？好吧，无论如何，值得一试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T16:13:58.440

我的处理方式与您有所不同。这是我的解决方案的工作原理：

我在我的设备上创建了一个返回“true”或“false”的 JSON 响应的`Auth`方法`AccountController`

```
[AllowAnonymous]
[DoNotResetAuthCookie]
[OutputCache(NoStore=true, Duration=0)]
public JsonResult Auth()
{
    return Json(Request.IsAuthenticated, JsonRequestBehavior.AllowGet);
} 
```

我实现了与`Session_Start()`您实现的相同。

最后，在我的 javascript 中，我会定期检查我是否仍然通过身份验证，如果没有，那么我将页面重定向如下：

```
function redirectOnNotAuthorized(authUrl, redirectUrl) {
    $.get(authUrl)
         .done(function (data) {
             var isStillAuthorized = data || false;
             if (!isStillAuthorized) {
                 window.location.href = redirectUrl;
             }
         })
        .fail(function () {
            window.location.href = redirectUrl;
        });
}

$(function() {
    var timer, duration;
    duration = 20000;
    window.stillAuthorized = function stillAuthorized() {
        if (timer) {
            clearTimeout(timer);
        }
        timer = setTimeout(stillAuthorized, duration);
        redirectOnNotAuthorized("Account/Auth", "Account/LogOn");
    };
    timer = setTimeout(stillAuthorized, duration);
}); 
```

**编辑1**：

我学到了一些东西......在`redirectOnNotAuthorized`函数中它也可以设置

```
windows.location.reload() 
```

代替

```
windows.location.href = redirectUrl; 
```

从而简化代码并减少对应用程序的依赖。

# web-services - CXF Web 服务和 Spring

> ID：15887059
> 
> 赞同：0
> 
> 时间：2013-04-08T19:13:54.657
> 
> 标签：web-services, spring, cxf

我是 CXF 世界的新手，但多年来一直在编写 WCF Web 服务。我买了一本关于 CXF 的书，似乎有一个隐含的假设，即 CXF 和 Spring 可以一起工作。虽然我可以看到这在服务器上很好，但我无法相信这对客户端来说是正确的。最终，我想将 CXF 服务与 Oracle OSB 或 Biztalk 编排挂钩，我正在努力了解在每个客户端必须创建一个 client-beans.xml 文件的假设下这将如何工作。我希望回复会说明我在错误的假设下操作，并且您可以在客户端不了解 Spring 的情况下拥有 Spring ware 服务器实现，而只依赖端点上可用的服务合同。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T20:00:11.903

曾经是真的。在 CXF 2.4 之前，CXF 在内部使用 Spring 将自身连接在一起。因此，需要 Spring。最新版本的 CXF 现在使用不同的机制，因此在大多数用例中不需要使用 Spring。（像 JMS 传输这样的东西仍然需要它）

# mercurial - mercurial abort：输入/输出错误，事务中止！回滚完成

> ID：15887060
> 
> 赞同：5
> 
> 时间：2013-04-08T19:13:55.030
> 
> 标签：mercurial, transactions, rollback, abort

我正在尝试从 bitbucket 中的存储库中提取。

我给

```
bash-4.1$ hg pull https://sat801@bitbucket.org/golmschenk/i4330-notification 
```

但它是这样显示的

```
pulling from https://sat801@bitbucket.org/golmschenk/i4330-notification
searching for changes
adding changesets
adding manifests
adding file changes
transaction abort!
rollback completed
abort: Input/output error
bash-4.1$ 
```

请让我知道如何解决这个问题。提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T22:18:00.430

它对我有用（即使`sat801@`在 URL 中）所以我所能做的就是猜测。最可能的原因是写入本地磁盘上的存储库时出现问题。检查以下任何一项是否属实：

1.  您正在尝试写入只读文件系统；

2.  您无权写入存储库所在的位置；

3.  您的磁盘已满；

4.  您有文件系统损坏；

5.  你有一个失败的驱动器。

# iphone - mobileNetworkCode 返回“VZW”而不是数字移动网络代码

> ID：15887061
> 
> 赞同：9
> 
> 时间：2013-04-08T19:14:06.610
> 
> 标签：iphone, ios

我试过这段代码：

```
CTTelephonyNetworkInfo *netinfo = [[CTTelephonyNetworkInfo alloc] init];
CTCarrier *carrier = [netinfo subscriberCellularProvider];
if(carrier != nil)
{
    NSString *mnc = [carrier mobileNetworkCode];
    NSLog(@" mnc is %@ ", mnc);
} 
```

当运营商是 AT&T 时，它按我的预期工作。我的mnc是410。

但是，当运营商是Verizon。我得到“mnc 是 VZW”。 **这是 API 的正确行为吗？我可以获得数字移动网络代码的任何其他方式吗？**

注意：Apple 的[文档](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Reference/CTCarrier/Reference/Reference.html)说该方法应该返回......

> 一个只读 NSString 对象，表示用户的蜂窝服务提供商的数字移动网络代码。

我不确定我做错了什么或者我的手机出了什么问题:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T00:02:07.297

不知道你用的是什么型号。在使用 iPhone 4 (iOS 6) 进行测试时，我也得到了 VZW。AFAIK，这是获得跨国公司的唯一途径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-12T23:47:40.320

我已经看到 480 和 VZW 在 Verizon 设备上返回。其他一些网络有时也会返回 3 个字母代码，例如 SPR 代表 sprint。

# android - 将变量保存到 onsavedinstance 并确定它们是否不为空

> ID：15887065
> 
> 赞同：0
> 
> 时间：2013-04-08T19:14:21.703
> 
> 标签：android, android-layout

**根据布局文件，仅从现有 ImageViews/TextBoxes 中保存字符串/图像的最佳方法是什么？我应该只检查我当前正在使用的布局（使用 contentView 变量）并基于从那些现有 TextBoxes 中保存的内容吗？**

所以我有 4 种横向和纵向布局：

1.  main.xml（从 SD 或应用程序本身选择图像）
2.  imagefromsd.xml（SD的对应布局）
3.  imagefromapplication（应用程序的对应布局）
4.  finishandupload.xml（我在其中显示结果并提供保存/上传图像的选项）

所以问题是在我使用`protected void onSaveInstanceState(Bundle outState)`和`protected void onRestoreInstanceState(Bundle savedInstanceState)`.

发生这种情况是因为我保存了来自文本框的字符串和来自 ImageViews 的图像，但并非每个布局文件都有所有文本框，所以当我尝试从不存在的文本框保存字符串时，我得到空指针异常。

现在，当我更改 setContentView 时，我将当前的 contentView 保存在一个变量中。

```
 public void ShowLoadAPP(View v){ //Leave menu and show view for images from application
    setContentView(R.layout.imagefromapplication);
    contentView = R.layout.imagefromapplication;
    LoadDrawables(); //Load list with images and show the first image
}

public void ShowLoadSD(View v){ //Leave menu and show view for images from sd
    setContentView(R.layout.imagefromsd);
    contentView = R.layout.imagefromsd;
}

@Override
protected void onRestoreInstanceState(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onRestoreInstanceState(savedInstanceState);

    setContentView(savedInstanceState.getInt("MyView"));
    //Lines where application crashes because of nullpointer where the retrieved string doesn't exist.

    ((ImageView)findViewById(R.id.imgMeme)).setImageResource(savedInstanceState.getInt("MyImage"));
    ((EditText)findViewById(R.id.txtImageTop)).setText(savedInstanceState.getString("MyTopString"));
    ((EditText)findViewById(R.id.txtImageButtom)).setText(savedInstanceState.getString("MyButtomString"));
    ((ImageView)findViewById(R.id.imgMemeFinished)).setImageBitmap((Bitmap) savedInstanceState.getParcelable("MyBitmap"));
}

@Override
protected void onSaveInstanceState(Bundle outState) {
    // TODO Auto-generated method stub
    contentView = contentView == null ? R.layout.menu : contentView;
    selectedImage = selectedImage == null ? R.drawable.are_you_fucking_kidding : selectedImage;
    stringTop = ((EditText)findViewById(R.id.txtImageTop)).getText().toString() == null ? "" : ((EditText)findViewById(R.id.txtImageTop)).getText().toString();
    stringButtom = ((EditText)findViewById(R.id.txtImageButtom)).getText().toString() == null ? "" : ((EditText)findViewById(R.id.txtImageButtom)).getText().toString();
    combinedImage = combinedImage;
    outState.putInt("MyView", contentView);
    outState.putInt("MyImage", selectedImage);
    outState.putString("MyTopString", stringTop);
    outState.putString("MyButtomString", stringButtom);
    outState.putParcelable("MyBitmap", combinedImage);

    super.onSaveInstanceState(outState);
} 
```

```
<ImageView
    android:id="@+id/imgMemeFinished"
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="50"
    android:contentDescription="@string/imgMemeFinishedDescription" />
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

<Button
    android:id="@+id/btnSave"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="0.25"
    android:onClick="SaveImage"
    android:text="@string/btnSave" />

<Button
    android:id="@+id/btnUpload"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="0.25"
    android:onClick="UploadImage"
    android:text="@string/btnUpload" />
</LinearLayout> 
```

```
<ImageView
    android:id="@+id/imgMeme"
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="50"
    android:contentDescription="@string/imgMemeDescription" />

 <LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

<EditText
    android:id="@+id/txtImageTop"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="0.25"
    android:ems="10"
    android:inputType="text"
    android:text="@string/txtImageTop" />

<EditText
    android:id="@+id/txtImageButtom"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="0.25"
    android:ems="10"
    android:inputType="text"
    android:text="@string/txtImageButtom" />
</LinearLayout>

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

<Button
    android:id="@+id/btnPreviousImage"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="0.25"
    android:onClick="PreviousImage"
    android:text="@string/btnPreviousImage" />

<Button
    android:id="@+id/btnNextImage"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="0.25"
    android:onClick="NextImage"
    android:text="@string/btnNextImage" />

<Button
    android:id="@+id/btnFinish"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="0.25"
    android:onClick="ShowFinish"
    android:text="@string/btnFinish" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T19:20:04.850

我建议您对不同的屏幕使用不同的活动。如果您打算将所有布局包含在同一个活动中，请将它们放在同一个 xml 文件中，否则使用不同的活动并在每个活动上使用一个布局。要跨活动通信和发送数据，您可以将信息放入 Intent 中，或者如果您需要更复杂的信息，请使用持久内存（DB、sharedpreferences 等）。

# php - PHP：触发致命错误？

> ID：15887070
> 
> 赞同：33
> 
> 时间：2013-04-08T19:14:45.677
> 
> 标签：php, fatal-error

我希望能够在我的 php 类中抛出一个致命的、无法捕获的错误，因为我的类的用户因为我不想要的东西而滥用它。我不希望他/她能够通过 catch 子句恢复。我知道`trigger_error`，但我只能让它发出警告或通知。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-04-08T19:15:07.670

E_USER_ERROR 是合适的常数。

```
trigger_error("Fatal error", E_USER_ERROR); 
```

另请参阅[手册页](http://php.net/manual/en/function.trigger-error.php)的第一个示例和[PHP 错误列表](http://php.net/manual/en/errorfunc.constants.php)（只有以 E_USER* 开头的错误可能从 trigger_error 发出）。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-12-09T17:48:45.823

注意：如果您使用自定义错误处理程序（请参阅[set_error_handler](http://php.net/manual/en/function.set-error-handler.php)） `E_USER_ERROR`将不会停止/退出/死亡，除非错误处理程序返回 false

简而言之：您的自定义错误处理程序有效地确定是否`E_USER_ERROR`被视为致命错误

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-11-05T08:51:25.287

```
debug_print_backtrace();
trigger_error("As much information as you can provide, please", E_USER_ERROR);
exit(); 
```

exit() 完全终止 PHP 脚本。您可以向用户或开发人员提供有关错误的信息越多越好。错误代码已过时。

编辑：使用 E_USER_ERROR 无论如何都应该终止脚本，因此将 debug_print_backtrace() 移到 trigger_error() 之前。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-05-23T11:23:20.590

如果您使用的是 PHP 7 或更高版本，[Error](http://www.php.net/manual/en/class.error.php)类也可以：

```
$flag = false;

try {
    if ($flag == false) {
        throw new Error('An error occured');
    }
} catch (Error $e) {
    echo $e->getMessage();
} 
```

如果你把它放在`throw new Error('An error occured');`外面`Try Catch`，你会得到一个致命错误。

# ruby-on-rails - 设置模型在对应表中具有唯一的 id 属性值

> ID：15887071
> 
> 赞同：0
> 
> 时间：2013-04-08T19:14:48.027
> 
> 标签：ruby-on-rails, composition, delegation

我是 Rails 新手，我遇到了如何设置模型的问题。

1.  我有一组模型：气球、油漆、刷子等。
2.  它们具有共同的属性（如“名称”）
3.  我希望他们有一个唯一的 id。那就是我希望如果有一个 id=NNN 的 Balloon 实例，那么**Paint.find(NNN)**和**Brush.find(NNN)**返回 nil。

一个明显的解决方案是创建一个模型，比如**Item**，它继承了 Balloon、Paint 和 Brush 。但是这种方法有点味道，因为子类 Balloon、Paint 和 Brush 确实有很大不同。我唯一需要他们的是**id**属性在这些子类中是唯一的。

我听说过 Rails 中的组合和委托，但我不熟悉它们，所以我不知道解决问题的合理方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T00:47:24.127

我认为您应该采用创建 Item 模型的解决方案。您希望 Balloon、Paint 和 Brush 具有相同的行为，因此它们应该继承它们的共同行为。你是对的，它们是不同的，这就是为什么你首先会有气球、油漆和画笔，而不是只使用你的物品模型。我认为这应该通过继承来解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T09:39:45.680

我以这种方式解决了这个问题：

1.  我确实介绍了模型项目。
2.  我通过添加 :after_save 过滤器更新了模型 Paints 和 Brushes，该过滤器实际上将相应的信息保存到数据库 Item 中。

我不知道它是否是“我自己的自行车”，但它似乎可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T19:41:05.510

为什么要与 Rails 斗争以使（任意）记录 id 在表中是唯一的？如果您想要跨多个模型的唯一标记，请创建一个虚拟属性（例如 vid），将“B”添加到气球记录的记录 id、“P”用于绘制、“R”用于刷子或其他任何内容。为每个接受这样一个 vid 的模型编写一个`find()`，如果该模型的 vid 错误，则返回 nil，否则发出`find()`带有记录 id 的 a。

# list - 从excel中的列表创建从头到尾的数字组

> ID：15887073
> 
> 赞同：-5
> 
> 时间：2013-04-08T19:14:50.217
> 
> 标签：list, excel, grouping, vba

总结一下，我需要做的是与这篇文章相反：

[如何从开始编号和结束编号创建列表](https://stackoverflow.com/questions/635800/how-to-create-a-list-from-beginning-number-and-end-number)

换句话说，我在 A 列中有一个数字列表，我希望将它们分组在从 B 和 C 列的开始到结束数字的范围内，即

```
column A
1
2
3
6
7
8
25
28
29
30 
```

（执行 VBA 代码后）

```
Column B  Column C
   1         3
   6         8
   25        25
   28        30 
```

如果值无法分组，它将是相同的开始和结束编号（如上例中的 N° 25 所示）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-03T21:43:09.500

Tarmo Elfving 的想法是正确的，但只能处理高达 32k 的数字。如果您改为将 Integer 更改为 Long，则脚本可以处理更大的数字，同时消除许多人看到的“溢出”错误。

```
Sub Ranges()
With ActiveWorkbook.Worksheets("Sheet1")
    Dim r As Long
    Dim beg As Long
    Dim en As Long
    i = 1
    r = 1
    beg = .Cells(1, 1).Value
    en = beg
    While .Cells(i, 1).Value
        If .Cells(i, 1).Value > en + 1 Then
            .Cells(r, 2).Value = beg
            .Cells(r, 3).Value = en

            beg = .Cells(i, 1).Value
            en = beg
            r = r + 1
        Else
            en = .Cells(i, 1).Value
        End If
        i = i + 1
    Wend
    .Cells(r, 2).Value = beg
    .Cells(r, 3).Value = en
End With
End Sub 
```

结果

```
A       B       C
10001   10001   10003
10002   10006   10009
10003   100012  100012
10006   100033  100038
10007   100044  100045
10008   100055  100056
10009   100066  100067
100012      
100033      
100034      
100035      
100036      
100037      
100038      
100044      
100045      
100055      
100056      
100066      
100067 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T20:14:22.630

我的快速试用

```
Sub Ranges()
With ActiveWorkbook.Worksheets("Sheet1")
    Dim r As Integer
    Dim beg As Integer
    Dim en As Integer
    i = 1
    r = 1
    beg = .Cells(1, 1).Value
    en = beg
    While .Cells(i, 1).Value
        If .Cells(i, 1).Value > en + 1 Then
            .Cells(r, 2).Value = beg
            .Cells(r, 3).Value = en

            beg = .Cells(i, 1).Value
            en = beg
            r = r + 1
        Else
            en = .Cells(i, 1).Value
        End If
        i = i + 1
    Wend
    .Cells(r, 2).Value = beg
    .Cells(r, 3).Value = en
End With
End Sub 
```

结果

```
A   B   C
1   1   3
2   6   9
3   12  12
6   33  38
7   44  45
8   55  56
9   66  67
12      
33      
34      
35      
36      
37      
38      
44      
45      
55      
56      
66      
67 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T20:19:11.667

尝试：

```
s as range
Set s = range("A1:A10")
r as long
r = 1
p as long
p = s.cells(1,1).value

for each c in s 

    'add start of range
    if c-1 <> p then

        'end last range
        If r>1 then

            cell(r, 3) = p
            r=r+1

        end if

        'start new range
        Cells(r, 2)=c

    End if
    p = c

Loop
Cells(r, 3)=s.cells(s.count, 1) 
```

# emacs - 键绑定在 emacs 中被覆盖

> ID：15887080
> 
> 赞同：1
> 
> 时间：2013-04-08T19:15:21.107
> 
> 标签：emacs, elisp

我有自己的用户定义键绑定，如下所述： [Globally override key binding in Emacs](https://stackoverflow.com/questions/683425/globally-override-key-binding-in-emacs)

每当我加载一个新的主要模式时，比如 OrgMode，我都会重写一些绑定以满足我在该特定模式下的需要。但是当我加载另一个具有自己覆盖的主要模式时，即使我不再处于该主要模式的缓冲区中，它们也会保持不变。

例如

```
(define-key custom-keys-mode-map (kbd "C-p") 'some-cool-function)
(add-hook 'org-mode-hook
    (lambda ()
    (define-key custom-keys-mode-map (kbd "C-p") 'org-cool-function )))
(add-hook 'sunrise-mode-hook
    (lambda ()
    (define-key custom-keys-mode-map (kbd "C-p") 'sunrise-cool-function ))) 
```

起初我使用 Cp 来执行我很酷的默认功能。加载 Org-Mode 后，我使用 Cp 执行“org-cool-function”，当我加载 Sunrise-Commander 时，Cp 执行“sunrise-cool-function”。

但是当我回到 Org-Mode 文件时，Cp 仍然尝试执行“sunrise-cool-function”而不是“org-cool-function”。

希望我很清楚:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T19:20:28.390

您看到的行为是代码所期望的。它是这样的：

*   你启动 emacs`some-cool-function`并被分配
*   然后每当您**打开一个新的**org 文件（而不仅仅是将缓冲区切换到它）`org-cool-function`都会被分配
*   每当您启动时`sunrise-commander` `sunrise-cool-function`都会被分配

您的问题来自尝试从**本地**事件设置**全局**属性。

 **您应该使用`org-mode-map`而不是`custom-keys-mode-map`放置您的`C-p`键绑定。这将为每个具有 org 内容的缓冲区一劳永逸地设置它：

```
(define-key custom-keys-mode-map (kbd "C-p") 'some-cool-function)
(eval-after-load "org"
  '(define-key org-mode-map (kbd "C-p") 'org-cool-function)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T21:13:39.910

次要模式地图取代了取代全局地图的主要模式地图。

所以有几个选择：

1.  根本不要在您的自定义次要模式映射中包含这些绑定。使您的首选绑定成为普通的全局绑定，并让主要模式根据需要覆盖它。

2.  创建其他次要模式以优先于现有的次要模式，并在相应的主要模式中启用它们。`minor-mode-map-alist`在查找键绑定时，每个次要模式的位置决定了优先级，因此您需要在定义当前模式*之后*定义这些附加模式（这意味着它们将出现在 alist 中的较早位置），当然，如果[更新，请保持它们的顺序该列表动态](https://stackoverflow.com/a/5340797/324105)。

3.  保持一切原样，但将这些键绑定到检查主要模式并采取相应措施的自定义功能。如果您采用这种方法，您可能需要也可能不需要注意传递前缀参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T20:43:51.870

我已经阅读了更多线程，这让我相信还有另一种方法，我目前正在使用：。

*   [https://stackoverflow.com/a/3991947/865268](https://stackoverflow.com/a/3991947/865268)允许轻松配置哪些设置在哪些模式下处于活动状态。
*   [https://stackoverflow.com/a/2494384/865268](https://stackoverflow.com/a/2494384/865268)描述了如何暂时禁用任何次要模式以使用默认键。
*   [https://stackoverflow.com/a/6849467/865268](https://stackoverflow.com/a/6849467/865268)描述了如何禁用特定主要模式的次要模式。

目前我正在使用这个：

```
;;; Disable Custom keys for specific major modes.
(define-global-minor-mode my-custom-keys-mode custom-keys-mode
  (lambda ()
    (when (not (memq major-mode (list 'sr-mode)))
      (custom-keys-mode))))
(my-custom-keys-mode 1) 
```

这非常适合我目前的需求。**

# python - 如何从 Python Celery 中的另一个任务触发任务？

> ID：15887081
> 
> 赞同：4
> 
> 时间：2013-04-08T19:15:27.323
> 
> 标签：python, celery

```
# get a list of stuff
@celery.task
def getList():
    listOfStuff = getStuff()
    for thing in listOfStuff:
        processThing.apply_async(args=(thing))

# another attempt at list of stuff
@celery.task
def getList():
    listOfStuff = getStuff()
    for thing in listOfStuff:
        processThing.s((thing))

@celery.task
def processThing(thing):
    pass 
```

所以 getList() 实现都不会触发 processThing 任务。我不知道为什么。我猜有更好的方法来完成我想要完成的事情，但我不知道那是什么。

如何从另一个任务中启动任务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T22:48:23.720

```
celery.execute.send_task("task.fqn", args=[], kwargs={}) 
```

这是用于产生我的任务的命令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T19:58:11.117

这种情况在[http://docs.celeryproject.org/en/latest/userguide/tasks.html#avoid-launching-synchronous-subtasks下的文档中进行了解释](http://docs.celeryproject.org/en/latest/userguide/tasks.html#avoid-launching-synchronous-subtasks)

这是以前的线程，显示了类似情况下的一些代码：[如何将返回列表的 Celery 任务链接到组中？](https://stackoverflow.com/questions/13271056/how-to-chain-a-celery-task-that-returns-a-list-into-a-group)

# html - 页脚不粘在页面底部

> ID：15887084
> 
> 赞同：0
> 
> 时间：2013-04-08T19:15:35.187
> 
> 标签：html, css

我有这个 CSS

```
#footer {
    width:100%;
    padding:14px 0; 
    color:#eef1f6;
    border-top:4px solid #F36F25;
    bottom:0;
}
#footer-inner {
    width:80%;
    margin:0 auto 0 auto;
}
#footer span {
    color:#000000;
} 
```

和 HTML：

```
<div id="footer">
    <div id="footer-inner">
        <span>&copy; <?php echo date("Y"); ?> Integra Digital</span><br><br>
        <span>Dragon Enterprise Centre, 28 Stephenson Road, Leigh-on-Sea, Essex, SS9 5LY</span><br>
        <span>sales@integradigital.co.uk | tel: 01702 66 77 27 or Freephone: 08000 66 22 01</span>
    </div>
</div> 
```

我需要页脚留在页面底部 - 滚动时不要粘住，所以它固定在底部，所以它不在内容的正下方。

例如，

```
CONTENT

GOES 

HERE

FOOTER 
```

不是那个，我需要这个：

```
CONTENT

GOES

HERE

FOOTER 
```

希望我说得通？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-02-13T10:03:55.280

尝试改变

```
#footer {
   position:absolute;
   bottom:0;
   ...
} 
```

至

```
#footer {
   position:fixed;
   bottom:0;
   ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T19:18:44.583

```
#footer {
   position:absolute;
   bottom:0;
   ...
} 
```

[http://www.w3schools.com/cssref/pr_class_position.asp](http://www.w3schools.com/cssref/pr_class_position.asp)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T19:32:44.203

尝试使用我在[这个 gist](https://gist.github.com/derek-duncan-snippets/4228927)中创建的这个方法。即使没有足够的内容将页脚推到底部，它也会将页脚推到页面底部。

```
body, html { /*body and html have to be 100% to push header down */
    height:100%;
    width: 100%;
}
body > #wrapper { /* all content must be wrapped... #wrapper is my id.  Position relative IMPORTANT */
    position: relative;
    height: auto;
    min-height: 100%;
}
#header {
    height: 100px;
    background: rgba(255,255,255,0.2);
}
#content-wrap { /*#content-wrap is the wrapper for the content without header or footer | padding-bottom = footer height */
    padding-bottom: 100px;
}
#footer { /* position must be absolute and bottom must be 0 */
    height: 100px;
    width: 100%;
    background: rgba(255,255,255,0.2);
    position: absolute;
    bottom: 0;
} 
```

**编辑**

要在页脚上方添加空格，请使用以下代码：

```
#YourFooterID {
  ....
  margin-top: 5%; //or whatever value you would prefer
  ....
} 
```

**编辑 2**

这是一个工作 jsfiddle [http://jsfiddle.net/CwKGD/](http://jsfiddle.net/CwKGD/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T20:35:25.500

这可能是您正在寻找的 [http://ryanfait.com/sticky-footer/](http://ryanfait.com/sticky-footer/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-13T10:06:22.123

这是更新的小提琴：

```
#footer {
  width: 100%;
  padding: 14px 0;
  color: #eef1f6;
  border-top: 4px solid #F36F25;
  bottom: 0;
  position: fixed;
}

#footer-inner {
  width: 80%;
  margin: 0 auto 0 auto;
}

#footer span {
  color: #000000;
}
```

```
<div id="footer">
  <div id="footer-inner">
    <span>&copy; <?php echo date("Y"); ?> Integra Digital</span><br><br>
    <span>Dragon Enterprise Centre, 28 Stephenson Road, Leigh-on-Sea, Essex, SS9 5LY</span><br>
    <span>sales@integradigital.co.uk | tel: 01702 66 77 27 or Freephone: 08000 66 22 01</span>
  </div>
</div>
```

# gsm - 提供商如何检测到重复的 SIM 卡？

> ID：15887092
> 
> 赞同：6
> 
> 时间：2013-04-08T19:16:03.283
> 
> 标签：gsm

为什么不能同时使用原始和克隆的sim卡？提供商如何检测到两者都在尝试连接到网络？我一直在阅读有关身份验证过程的信息，但我仍然有点困惑，我需要更具体的原因来解释为什么会发生这种情况。

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-08T20:06:26.823

移动网络运营商运行用户数据库[HLR](http://en.wikipedia.org/wiki/Home_Location_Register#Home_location_register_.28HLR.29)。

每张 SIM 卡都有一个唯一的身份，即[IMSI](http://en.wikipedia.org/wiki/International_mobile_subscriber_identity)。HLR 通过将 IMSI 和订户数据存储在一起来将 IMSI 与订户相关联。

打开手机后，手机会定期向网络注册其 SIM 卡（电信语音中的“位置更新”）。在注册过程中，移动网络对 HLR 进行认证和授权，并将 IMSI 标记为活动的。如果 IMSI 已被标记为活动，则授权将失败。如果授权失败，网络将不允许手机访问其服务。

这是特意构建到网络架构中的：

*   因为网络只能将呼叫传递给一个设备。没有默认功能可以使多个设备振铃以呼叫单个号码。（这是可能的，但需要额外的系统。）

*   防止恶意接管号码（向不打算接听电话的一方发送电话）。

*   防止欺诈，例如根本不是付费用户，或者在您的情况下，在一份合同上使用两台设备。

一些网络运营商提供特殊产品来克服这种故意限制。例如，您可能会得到一个额外的 SIM 卡，编码到您的电话号码，这会在打开时禁用您的第一个 SIM 卡。如果您在车上安装了需要单独 SIM 卡的电话，这将非常有用。在这种情况下，HLR 中有支持切换 SIM 的逻辑。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-18T23:36:54.940

HLR 不用于检测克隆。它所做的只是将实际的电话号码映射到 SIM 卡独有的 IMSI。

提供商使用无线电指纹识别（他们可以区分各个电台的无线电传输信道锁定的某些特征），当他们检测到两个电台使用相同的 IMEI/IMSI/MIN 组合但具有不同的射频指纹时，他们知道某些东西已经被克隆。

[http://en.wikipedia.org/wiki/Radio_fingerprinting](http://en.wikipedia.org/wiki/Radio_fingerprinting)

# java - 指定 line.separator 作为编译器设置？

> ID：15887094
> 
> 赞同：0
> 
> 时间：2013-04-08T19:16:19.153
> 
> 标签：java, line-endings

正如[这个答案](https://stackoverflow.com/a/6128248/334862)所建议的：

> 你可以打电话
> 
> ```
> System.setProperty("line.separator", "\r\n"); 
> ```
> 
> 为了在代码中设置系统属性。

使 Java 程序输出所需的行尾非常容易。但是，我认为没有理由不能更改该环境变量，例如作为编译器设置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T19:18:09.270

因为根据定义，这根本不是[环境变量](http://docs.oracle.com/javase/tutorial/essential/environment/env.html)的工作方式。环境变量由**运行时环境决定，**而不是由编译器或任何编译时设置决定。

> 许多操作系统使用*环境变量*将配置信息传递给应用程序。与 Java 平台中的属性一样，环境变量是键/值对，其中键和值都是字符串。设置和使用环境变量的约定因操作系统而异，也因命令行解释器而异。

# vb.net - VB.NET 中的关键字“共享”是什么意思？

> ID：15887098
> 
> 赞同：2
> 
> 时间：2013-04-08T19:16:39.110
> 
> 标签：vb.net, types, shared

VB.NET 中是`Shared`范围类型还是数据类型？什么时候需要`Shared`在 VB.NET 中的类、函数或子类之前使用这个词？例如，为什么要放在方法`Shared`前面`Main`，像这样：

```
Public Shared Sub Main()
    ' ...
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T19:22:22.220

VB.NET 中的修饰符与 C#中的修饰符`Shared`相同。`static`它既不是范围（因为它可以是`Private`or `Public`）也不是数据类型。根据[MSDN](http://msdn.microsoft.com/en-us/library/zc2b427x.aspx)：

> 指定一个或多个声明的编程元素与整个类或结构相关联，而不是与类或结构的特定实例相关联。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T20:41:32.783

Shared Main 没有意义（如果您构建控制台应用程序）

这是共享的示例：

```
Class WithShared
  Shared Sub A_Method()
  End Sub
End Class

Class WithoutShared
  Sub A_Method()
  End Sub
End Class 
```

现在您的 Main 中可能的代码：

```
Dim WithSharedInstance as New WithShared()
WithSharedInstance.A_Method() 'does not work
WithShared.A_Method() 'works

Dim WithoutSharedInstance as New WithShared()
WithoutSharedInstance.A_Method() 'works
WithoutShared.A_Method() 'does not work 
```

因此，如果调用不依赖于特定实例，则使用 Shared。由于您通过类定义调用共享方法，因此您无法访问变量和方法，这些变量和方法仅在类被实例化时才存在。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T19:51:28.307

对于函数和子类，意味着函数或子类属于类本身，而不是类的实例。例如，`String.IsNullOrEmpty`指的是共享方法，而`myString.TrimEnd()`指的是实例（非共享）方法。

在 C# 中，您可以将类设为静态，这意味着所有成员都是静态的。这在 VB 中不受支持（至少根据[本文档](http://msdn.microsoft.com/en-us/library/zc2b427x%28v=vs.110%29.aspx)不支持）。VB 中的模块的用途与 C# 中的静态类非常相似。

我唯一能想到的方法*需要*静态（共享）时是另一个静态成员引用它时。否则，它们对于某些场景非常有用，例如当特定方法或属性不需要保留或访问任何特定于实例的状态时，但它们通常不是必需的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-09T01:54:06.740

看这个的一个好方法是通过示例：

```
Dim firstName as String = "Bob"
Dim lastName as String = "Jones"
Dim fullName as String = String.Format("{0} {1}", firstName, lastName.ToUpper()) 
```

如果您正在创建 String.ToUpper() 和 String.Format() 函数，则需要区分作用于类实例的函数和不作用于实例的函数。

如果你正在写一个像这样的类`String`：

`.Format()`将被声明为 Shared，因为它不需要对象。
`.ToUpper()`不会，因为它需要一个对象实例。它返回的值与对象有关。

# jquery - CSS：如何在锚内定位 span 或 div

> ID：15887101
> 
> 赞同：0
> 
> 时间：2013-04-08T19:16:41.317
> 
> 标签：jquery, asp.net

我有这种情况：

```
<li id="liMessagesPanel" >
    <span id="unreadMessagesCount" class="messagesCount" ></span>
    <a ID="lnkMessages" class="messages">
        <small>Notifications</small>
    </a>
</li> 
```

这会产生以下结果： ![在此处输入图像描述](https://i.stack.imgur.com/rUM0X.png)

```
a.messages{ background: url(../img/Footer/iconMail.png) no-repeat center center; border-right: 1px solid #bbb;}

.messagesCount {
    background-color: red;
    border: 1px solid white;
    border-radius: 16% 16% 16% 16%;
    color: White;
    font-family: Verdana;
    font-size: 8px;
    font-weight: bold;
    height: 20px;
    margin-left: -20px;
    position: relative;
    width: 198px;
    z-index: 2147483647;
    padding: 0 1px;
} 
```

问题是因为跨度不在锚元素内，所以它不可点击，如果我把它放在锚元素内，它就无法识别。

白色的邮件信封是图像，信封图像右上角的红色框是跨度。

注意：我无法更改结构 li -> a -> small，因为它由 jquery 插件使用，span 是我的补充。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T19:32:25.483

如果你使用`position: absolute;`on `.messageCount`，你可以把它放在你的`<a>`标签里面。

注意：我只添加`href="#"`了`<a>`标签，以便它显示所有内容都是可点击的链接。

[jsfiddle 示例](http://jsfiddle.net/wk3yU/3/)

html:

```
<li id="liMessagesPanel" >
    <a ID="lnkMessages" class="messages" href="#">
        <small>Notifications</small>            
        <span id="unreadMessagesCount" class="messagesCount" ></span>
    </a>
</li> 
```

CSS：

```
a.messages{ a.messages{ background: url(../img/Footer/iconMail.png) no-repeat center center; border-right: 1px solid #bbb;}

#lnkMessages {
    position: relative;
    height: 40px;
    width: 40px;
}

.messages {
    position: relative;
    width: 40px;
}

.messagesCount {
    background-color: red;
    border: 1px solid white;
    border-radius: 16% 16% 16% 16%;
    color: White;
    font-family: Verdana;
    font-size: 8px;
    font-weight: bold;
    height: 20px;
    width: 18px;
    padding: 0 1px;
    /* new: */
    left: 20px;
    position: absolute;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T19:19:44.107

使用 jquery 处理跨度上的单击事件。然后您可以在单击跨度时做任何您想做的事情

```
 $("#unreadMessagesCount").click(function(){
       //do what ever

 }); 
```

您可以使用 css 更改鼠标悬停在跨度上的光标，以便用户知道它是可点击的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T19:20:09.623

为什么不让跨度可点击？

```
$('liMessagesPanel>span').click(function(e) {
    e.preventDefault();
    $(this).next().click();
}); 
```

假设使用jquery。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-08T19:24:15.570

添加 css 以使光标指针出现在您的`<span>`：

```
.messagesCount { 
   cursor: pointer;
   ...
   ... 
```

然后让`<span>`点击处理程序触发`<a>`点击处理程序：

```
$('.messagesCount').click(function() {
   $(this).next('a').triggerHandler('click');
}); 
```

# php - php 文件被下载而不是通过 ssl 在浏览器中呈现

> ID：15887104
> 
> 赞同：0
> 
> 时间：2013-04-08T19:16:49.233
> 
> 标签：php, apache, https

我的 php/apache 配置有问题。文件将通过 http 呈现良好。但是，通过 https 会提示下载/保存文件。奇怪的是图像是通过 https 渲染的。

SSL 配置经过测试，已在多个站点上正确安装。另外，应该注意的是，这是在 plesk 环境中，但我是通过 shell 访问安装的。

虚拟主机部分如下：

```
 AddType text/html .php 
 AddType application/x-httpd-php .php

   ErrorLog /etc/httpd/logs/smartsites_error_log

   CustomLog /etc/httpd/logs/smartsites_access_log common

ServerName secure.cognitionsmartsites.com

     <Directory "/var/www/vhosts/default/htdocs">
    Allow from all
            Options +Indexes
</Directory>

    IndexOptions
ServerAlias  secure.cognitionsmartsites.com

#UseCanonicalName Off
DocumentRoot /var/www/vhosts/default/htdocs

#ScriptAlias /cgi-bin/ "/var/www/vhosts/default/cgi-bin/"

SSLEngine On

#SSLVerifyClient none
#SSLCertificateFile /usr/local/psa/var/certificates/cert-L6E8a0

    SSLCertificateFile /usr/local/psa/var/certificates/cert.crt
    SSLCertificateKeyFile /usr/local/psa/var/certificates/private.key
    SSLCertificateChainFile /usr/local/psa/var/certificates/intermediate.crt 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T20:14:29.740

`AddType`将第 2 行更改为`AddHandler`. 这将告诉 php 处理您的 .php 文件，而不是像`AddType`这样设置 mimetype。

`<?php`另外，请确保您的 php 代码以`<?`.

# php - Zend_Action_Helper_Redirector 和 preDispatch() 插件

> ID：15887109
> 
> 赞同：0
> 
> 时间：2013-04-08T19:17:04.953
> 
> 标签：php, zend-framework

如果我调用 $this->_helper->redirector('index'); 不会调用 preDispatch 是否有解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T19:28:38.913

重定向器默认会退出代码；通过用`$this->_helper->redirector->setExit(false);`它覆盖它将正常执行您的代码（使用 preDispatch 等）。

# cocos2d-iphone - 游戏在我的手机上调整大小，但在模拟器上看起来不错

> ID：15887112
> 
> 赞同：1
> 
> 时间：2013-04-08T19:17:12.147
> 
> 标签：cocos2d-iphone

当我在 xcode 中的模拟器上启动游戏时，游戏会按预期显示，但是当我通过手机启动游戏时，它会在初始启动画面后缩小。我该如何阻止这种情况发生？这是什么原因？

# php - 魔术方法 __get 和 __set - 来自 ZCE 的示例

> ID：15887116
> 
> 赞同：1
> 
> 时间：2013-04-08T19:17:25.233
> 
> 标签：php, magic-methods

```
类魔法{
    公共 $a = "A";
    受保护的 $b = array("a" => "A", "b" => "B", "c" => "C");
    受保护的 $c = 数组（1,2,3）；
    公共函数 __get($v) {
        回声“$v,”；
        返回 $this->b[$v];
    }
    公共函数 __set($var, $val) {
        echo "$var: $val,";
        $this->$var = $val;
    }
}

$m = 新魔法（）；
echo $m->a.", ".$m->b.", ".$m->c.",";
$m->c = "抄送";
echo $m->a.", ".$m->b.", ".$m->c.",";

```

这是 ZCE 的示例问题（不是来自实际考试）。有人可以向我解释......这里发生了什么，为什么答案是......完全不是我所期望的？

```
b, c, A, B, C,c: CC,b, c, A, B, C, 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T19:19:54.013

那么……你期待什么？

它调用`__get`/`__set`如果您在实际范围内没有访问该属性的权限/该属性不存在。

所以`$m->a`直接得到“A”；`$m->b`并`$m->c`先调用`__get("b")`and `__get("c")`（在回显“b，c，”后返回“B”和“C”）

对于`$m->c = "CC";`: 它调用`__set("c", "CC")`as`$c`是一个受保护的（不可访问的）属性也是如此。（在回显“c:CC”后将 $m->c 设置为“CC”）

# objective-c - NSFileHandleDataAvailableNotification 文件重复没有新数据（导致非常高的 CPU 使用率）

> ID：15887121
> 
> 赞同：8
> 
> 时间：2013-04-08T19:17:59.393
> 
> 标签：objective-c, cocoa, asynchronous, nstask, nsfilehandle

我正在尝试`NSTask`使用`waitForDataInBackgroundAndNotify`. 以下代码确实读取了流，因此它已经部分工作了。

我遇到的问题是，有时`NSFileHandleDataAvailableNotification`开始重复触发（每秒数千次）而根本没有新数据（`[data length]`返回`0`）。然后我的进程开始使用大量 CPU，使机器停止运行。你们有没有人在过去遇到过这样的事情？提前致谢。

```
/**
 * Start reading from STDERR
 *
 * @private
 */

- (void)startReadingStandardError {
    NSFileHandle *fileHandle = [_task.standardError fileHandleForReading];
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(errorData:)
                                                 name:NSFileHandleDataAvailableNotification
                                               object:fileHandle];
    [fileHandle waitForDataInBackgroundAndNotify];
}

/**
 * Fired whenever new data becomes available on STDERR
 *
 * @private
 */

-(void) errorData: (NSNotification *) notification
{
    NSFileHandle *fileHandle = (NSFileHandle*) [notification object];
    NSData *data = [fileHandle availableData];

    if ([data length]) {
       // consume data
    }

   [fileHandle waitForDataInBackgroundAndNotify];
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-08T20:05:24.740

所以，最终还是自己解决了。根据[NSFileHandle Class Reference](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSFileHandle_Class/Reference/Reference.html#//apple_ref/occ/instm/NSFileHandle/availableData)，如果`NSData`返回的对象`availableData`的长度为`0`，则表示已到达文件末尾。我没有正确处理这个案子。这为我修复了它：

```
/**
 * Fired whenever new data becomes available on STDERR
 *
 * @private
 */

-(void) errorData: (NSNotification *) notification
{
    NSFileHandle *fileHandle = (NSFileHandle*) [notification object];
    NSData *data = [fileHandle availableData];

    if ([data length]) {
        // consume data
        // ...

        [fileHandle waitForDataInBackgroundAndNotify];
    } else {
        // EOF was hit, remove observer
        [[NSNotificationCenter defaultCenter] removeObserver:self name:NSFileHandleDataAvailableNotification object:fileHandle];
    }
} 
```

# python - 搜索特定字符串，仅将部分字符串复制到另一个文本文件中

> ID：15887137
> 
> 赞同：1
> 
> 时间：2013-04-08T19:18:54.773
> 
> 标签：python, string, file, search

我希望我的 python 程序在文本文件中搜索字符串的特定部分。例如，我的文本文件如下所示：

```
VERSION_1_0001
VERSION_2_0012
VERSION_3_0391 
```

这些只是例子。我希望我的 python 程序查找“VERSION_2_”，但让它在另一个文本文件中打印出 0012。那可能吗？

到目前为止，我只有这个：

```
with open('versions.txt', 'r') as verFile:
    for line in verFile:
        if 'VERSION_2_' in line:
            ??? (I don't know what would go here so I can get the portion attached to the string I'm finding) 
```

我在这里先向您的帮助表示感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T19:21:05.283

如果您的问题是关于如何提取最后一个下划线之后的行部分：

```
 with open('versions.txt', 'r') as verFile:
    for line in verFile:
        if 'VERSION_2_' in line:
            # Split the line from the right on underscores and
            # take the last part of the resulting list.
            print line.rpartition('_')[-1] 
```

如果您的问题是关于写入文件：

```
with open('resultfile', 'w') as wFile:
    wFile.write(line.rpartition('_')[-1]) 
```

如果要将所有结果写入同一个文件，请在循环外打开要写入的文件：

```
# It doesn't matter which `with` block is the outermost.
with open('resultfile', 'w') as wFile:
    with open('versions.txt', 'r') as verFile:
        for line in verFile:
            if 'VERSION_2_' in line:
                # Split the line from the right on underscores and
                # take the last part of the resulting list.
                wFile.write(line.rpartition('_')[-1]) 
```

# r - 在以下代码中，为什么 R 对 lm.predict 函数的行为异常？

> ID：15887139
> 
> 赞同：3
> 
> 时间：2013-04-08T19:18:59.840
> 
> 标签：r, linear-regression

我对下面的代码有疑问，我试图理解：

```
x = rnorm(50)
y  = 3 * x +rnorm(50)

df_eq  <- data.frame(x, y)

model1  <- lm(y ~ x - 1)
model2  <- lm(df_eq[,2] ~ df_eq[,1] - 1)

xpred <- data.frame(x = seq(from = -2, to = 2, length = 5))

ypred <- predict(object = model1, newdata = xpred)
ypred2 <- predict(object = model2, newdata = xpred) 
```

在上面的代码中，我期望 ypred 和 ypred2 产生相同的结果。我在 ypred（5 个预测的“yhat”值）中得到了我期望的答案，但是 ypred2 有一个错误，并且没有产生预期的结果。

谁能解释一下为什么在下面的代码中 ypred2 会产生错误（至少在 R 2.15.2 中）？

我认为，代码中唯一的关键区别在于“model1”和“model2”的生成方式。

我的理解是，在 predict 函数中，newdata 根据存储在 model1 和 model2 对象中的模型生成我们想要预测“yhat”值的新观察集。

有什么根本不同

模型1 <- lm(y ~ x - 1)

和

模型2 <- lm(df_eq[,2] ~ df_eq[,1] - 1) ？

更重要的是，如果答案是直截了当的，有人可以解释他们是如何找出与 R 的“幕后”不同的吗？很高兴知道我将来如何理解这种问题。我试过查看上面代码中对象的结构，但离答案还很近。

先感谢您。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T19:26:40.753

从 R 的角度来看，您`predict.lm`将对象递给`model2`。它说：“好的，我`lm`这里有一个对象。变量名是什么？”

```
> formula(model2)
df_eq[, 2] ~ df_eq[, 1] - 1 
```

行。*调用*响应变量，*调用* `df_eq[, 2]`预测变量。现在，R 认为：“我应该在”中找到那些变量（或至少是预测变量）。 *`df_eq[, 1]``xpred`*

 *嗯。里面没有那个名字。

我相信，实际警告是`model.frame.default`在尝试构建适当的模型框架时引发的，并在此过程中回退到用于拟合模型的原始数据值。

通常（或以其他方式）拟合模型的正确习惯用法`lm`如下：

```
lm(y ~ x, data = df_eq) 
```

不要依赖 R 获取全局环境中对象的名称。指定具有相关列的数据框并在公式中*使用这些列名*！*

# java - 在 Java 的数组中 Long 被视为 int

> ID：15887142
> 
> 赞同：1
> 
> 时间：2013-04-08T19:19:13.040
> 
> 标签：java, arrays, int, long-integer

我已将一个变量定义为 long，当我尝试将其用作数组中的一个时，它不断抛出一个错误，指出我的值超出了 int 范围。好吧，不开玩笑，它很长，我把它定义为一个。

下面是我的代码。在第二个类 LoanOfficer 中，您会发现第二个申请人比尔·盖茨（Bill Gates），其年收入为 3,710,000,000，正在抛出错误。

```
public class Applicant {
    private String name;
    private int creditScore;
    private long annualIncome;
    private int downPayment;
    private boolean status;

    public Applicant(String name, int creditScore, long annualIncome,
            int downPayment) {
        this.name = name;
        this.creditScore = creditScore;
        this.annualIncome = annualIncome;
        this.downPayment = downPayment;
        this.status = false;
    }

    public String getName() {
        return name;
    }

    public int getCreditScore() {
        return creditScore;
    }

    public long getAnnualIncome() {
        return annualIncome;
    }

    public int getDownPayment() {
        return downPayment;
    }

    public void setStatus(boolean status) {
        this.status = status;
    }

    public boolean isStatus() {
        return status;
    }
}

public class LoanOfficer {
    public static void main(String[] args) {
        Applicant[] applicants = {
                new Applicant("MC Hammer", 400, 25000, 5000),
                new Applicant("Bill Gates", 850, 3710000000, 500000),
                new Applicant("MC Hammer", 400, 25000, 5000),
                new Applicant("MC Hammer", 400, 25000, 5000), };
    }
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-08T19:20:37.173

您需要`L`被视为 long 的数字的后缀：

```
new Applicant("Bill Gates", 850, 3710000000L, 500000) 
```

如果`L`缺少后缀，编译器会将文字视为`int`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-08T19:20:36.530

您需要通过附加以下内容将 3710000000 指定为长文字`L`：

```
new Applicant("Bill Gates", 850, 3710000000L, 500000), 
```

来自[JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.10.1)

> 如果整数文字以 ASCII 字母 L 或 l (ell) 为后缀，则它是 long 类型；否则它是 int 类型

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-08T19:21:51.320

将 3710000000 更改为 3710000000L。问题是，如果没有`L`，Java 会将其视为`int`.

# jquery - 带有fadeToggle（）的元素的时间延迟？

> ID：15887143
> 
> 赞同：0
> 
> 时间：2013-04-08T19:19:13.323
> 
> 标签：jquery, fadein, fade, fadeout, timedelay

在元素上设置时间延迟以使其显示一段时间的最佳方法是什么，但在出现和消失时具有淡入和淡出效果？这可以用 jQuery 中的 fadeToggle() 函数来完成吗？

我当前应用的例子：http: [//loremipsum.li](http://loremipsum.li)

...当您单击“复制”按钮时，它会将文本复制到剪贴板并显示“已复制！” 标题，但没有任何过渡效果，这是我想要实现的。

有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T19:22:11.657

您可以使用 jQuery 的`delay()`：

`$(this).fadeToggle().delay(500).fadeToggle()`

时间以毫秒为单位。

`delay`：[http ://api.jquery.com/delay/](http://api.jquery.com/delay/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T19:22:39.133

给你。

[http://jsfiddle.net/astynax777/wxRRS/](http://jsfiddle.net/astynax777/wxRRS/)

```
$('#foo').delay(3000).fadeIn('slow').delay(3000).fadeOut('slow'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T19:29:36.627

你也可以试试这样的 -

小提琴 - [http://jsfiddle.net/swapnesh/wkhPS/](http://jsfiddle.net/swapnesh/wkhPS/)

检查`.fadeToggle( [duration ] [, easing ] [, complete ] )`方法[http://api.jquery.com/fadeToggle/中的参数](http://api.jquery.com/fadeToggle/)

```
<!DOCTYPE html>
<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js">
</script>
<script>
$(document).ready(function(){
  $("button").click(function(){
    $(".copy").show().fadeToggle(3000);
  });
});
</script>
</head>
<body>

<div class="copy" style="display:none;">copied!!</div>
<button>Copy</button>

</body>
</html> 
```

# c++ - 带有 const 引用的 std::remove_const

> ID：15887144
> 
> 赞同：25
> 
> 时间：2013-04-08T19:19:21.113
> 
> 标签：c++, templates, c++11, std

为什么不`std::remove_const`转换`const T&`为`T&`? 这个公认的相当做作的例子证明了我的问题：

```
#include <type_traits>

int main()
{
    int a = 42;
    std::remove_const<const int&>::type b(a);

    // This assertion fails
    static_assert(
        !std::is_same<decltype(b), const int&>::value,
        "Why did remove_const not remove const?"
    );

    return 0;
} 
```

上面的情况很容易解决，所以对于上下文，想象一下：

```
#include <iostream>

template <typename T>
struct Selector
{
    constexpr static const char* value = "default";
};

template <typename T>
struct Selector<T&>
{
    constexpr static const char* value = "reference";
};

template <typename T>
struct Selector<const T&>
{
    constexpr static const char* value = "constref";
};

int main()
{
    std::cout
        << Selector<typename std::remove_const<const int&>::type>::value
        << std::endl;

    return 0;
} 
```

在上面的示例中，我希望`reference`显示，而不是`constref`.

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-08T19:26:05.093

`std::remove_const`删除*顶级* `const`资格。在`const T&`等价于`T const&`的 中，限定条件不是顶级的：实际上，它不适用于引用本身（这将毫无意义，因为引用在定义上是不可变的），而是适用于被引用的类型。

C++11 标准第 20.9.7.1 段中的表 52 规定`std::remove_const`：

> 成员 typedef type 应命名为相同的类型，`T`除了任何**顶级**const 限定符已被删除。[*示例*：`remove_const<const volatile int>::type`计算结果为 `volatile int`，而`remove_const<const int*>::type`计算结果为`const int*`。—*结束示例*]

为了剥离`const`，您首先必须 apply `std::remove_reference`，*然后*apply `std::remove_const`，然后（如果需要） apply `std::add_lvalue_reference`（或任何适合您的情况）。

**注意：**正如[Xeo](https://stackoverflow.com/users/500104/xeo)在评论中提到的，您可以考虑[使用别名模板，例如`Unqualified`](http://flamingdangerzone.com/cxx11/2013/02/25/even-more-traits.html)执行前两个步骤，即去掉引用，然后去掉`const`- （和`volatile-`）限定符。

# c# - SQLite 的实体框架迁移SqlGenerator

> ID：15887145
> 
> 赞同：11
> 
> 时间：2013-04-08T19:19:25.143
> 
> 标签：c#, .net, entity-framework, sqlite, migration

是否有用于 SQLite 的 MigrationSqlGenerator 与实体框架一起使用？我只从 devart 找到了一个是商业的。

> 找不到提供程序“System.Data.SQLite”的 MigrationSqlGenerator。使用目标迁移配置类中的 SetSqlGenerator 方法来注册其他 SQL 生成器。

这就是我所做的：http: [//msdn.microsoft.com/en-gb/data/jj591621](http://msdn.microsoft.com/en-gb/data/jj591621)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2018-01-05T08:32:15.790

对于正在寻找处理迁移的生成器的任何人，我在[https://sqliteef6migrations.codeplex.com](https://sqliteef6migrations.codeplex.com)找到了一个名为“System.Data.SQLite.EF6.Migrations”的 nuget 包。

安装软件包后，您需要对迁移配置方法进行以下更改。

```
 public Configuration()
 {
    AutomaticMigrationsEnabled = false;
    SetSqlGenerator("System.Data.SQLite", new SQLiteMigrationSqlGenerator());
 } 
```

完整的类应该是这样的。

```
namespace YourNamespace
{
    using System.Data.Entity.Migrations;
    using System.Data.SQLite.EF6.Migrations;

    internal sealed class Configuration : DbMigrationsConfiguration<YourContext>
    {
        public Configuration()
        {
            AutomaticMigrationsEnabled = false;
            SetSqlGenerator("System.Data.SQLite", new SQLiteMigrationSqlGenerator());
        }

        protected override void Seed(YourContext context)
        {
            //  This method will be called after migrating to the latest version.
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-08T19:49:13.593

据我所知，我认为没有免费的。

如果您不关心 Devart 商业广告`dotConnect for SQLite`- 您可以尝试自己实现一个 - 它可能不那么简单，但您可以使用 EF 源代码（对于 EF6，但我会说这些部分非常相似）。
[http://entityframework.codeplex.com/](http://entityframework.codeplex.com/)

如果你看一下[SqlCeMigrationSqlGenerator](https://github.com/mrward/entityframework-sharpdevelop/blob/master/src/EntityFramework/Migrations/Sql/SqlCeMigrationSqlGenerator.cs)源代码（另一个源，我在官方网站上找不到，但你可以下载并查看）

...您会看到生成器相对简单。当然，这适用于使用标准 Sql 客户端作为底层生成器的 Ce。

**SQLite 将需要更多的工作，但可能不会那么难。**

此外，类似的事情来自 EF 的知名来源 -[我们可以将 EF 迁移与 MySql 一起使用吗](https://stackoverflow.com/a/9044289/417747)

* * *

并且不要“对我大喊大叫”:) 我知道这不是你要找的——但我认为这是唯一的选择。

* * *

[http://entityframework.codeplex.com/](http://entityframework.codeplex.com/)
[SqlCeMigrationSqlGenerator](https://github.com/mrward/entityframework-sharpdevelop/blob/master/src/EntityFramework/Migrations/Sql/SqlCeMigrationSqlGenerator.cs)
[我们可以在 MySql 中使用 EF 迁移吗](https://stackoverflow.com/questions/9040352/can-we-use-ef-migrations-with-mysql/9044289#9044289)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-08-02T16:43:24.083

尽管该帖子已打开很长时间，但我将根据我们的朋友 NSGaga 出现的内容发布我要做的事情。

我设法基于为 SQLCE 开发的内容创建了一个类“MigrationSqLiteGenerator”。类的代码太大，更多可以到我的博客下载。

在 Google 云端硬盘上： [https ://drive.google.com/file/d/0B-NCqWnMQpBrQjkxMkxnVlRzb00/view?usp=sharing](https://drive.google.com/file/d/0B-NCqWnMQpBrQjkxMkxnVlRzb00/view?usp=sharing)

这门课只有基础，加上是改进的起点。

**22.Mar.2017 @shiva 编辑[：](https://stackoverflow.com/users/325521/shiva)**这是内联代码，因此如果 Google Drive 链接再次断开，您仍然可以访问代码。刚刚发现SO`30,000`在回答帖子中有字符限制，所以我不得不删除代码中的评论。评论过分了`32,000`：）

```
//           *-----------------------------------------------------------------*
//           *                                                                 *
//           *    CRIADO POR...: Julio C. Borges.                              *
//           *    DATA.........: 19/07/2013\.                                   *
//           *    MOTIVO.......:                                               *
//           *                                                                 *
//           *-----------------------------------------------------------------*

using System;
using System.CodeDom.Compiler;
using System.Collections.Generic;
using System.Data.Common;
using System.Data.Entity.Migrations.Model;
using System.Data.Entity.Migrations.Sql;
using System.Data.Metadata.Edm;
using System.Data.SQLite;
using System.Globalization;
using System.IO;
using System.Linq;
using System.Text;

namespace ICM_Conexao.SqLite.Classes
{
    /// <sumary>
    /// MigrationSqLiteGenerator 
    /// </sumary>
    public class MigrationSqLiteGenerator : MigrationSqlGenerator
    {
        #region Constantes

        private const string pstrDefaultDateTime = "yyyy-MM-dd hh:mm:ss";
        private const int pintDefaultStringMaxLength = 255;
        private const int pintDefaultPrecisaoNumerica = 10;
        private const byte pbytDefaultPrecisaoTempo = 7;
        private const byte pintDefaultEscala = 0;
        //private const string pstrNomeTabelaMigration = "__MigrationHistory"; 

        #endregion

        #region Instancias

        private DbProviderManifest pprovProviderManifest;
        private List<MigrationStatement> plstComandos;
        private bool pblnGerouPrimaryKey;

        #endregion

        #region Método de Geração sobrescrito de MigratioSqlGenerator

        public override IEnumerable<MigrationStatement> Generate(
            IEnumerable<MigrationOperation> lstOperacoesMigrations, string strManifestoProvider)
        {
            plstComandos = new List<MigrationStatement>();

            InicializaServicosProvider(strManifestoProvider);
            GeraComandos(lstOperacoesMigrations);

            return plstComandos;
        }

        #endregion

        #region Métodos de geração dos comandos

        protected virtual void Generate(CreateTableOperation opeCriacaoTabela)
        {
            // Preferencialmente não iremos gerar a tabela de dados do Migration
            if (opeCriacaoTabela.Name.Contains("MigrationHistory"))
                return;

            using (var ltextWriter = TextWriter())
            {
                GeraComandoCriacaoTabela(opeCriacaoTabela, ltextWriter);

                ComandoSQL(ltextWriter);
            }
        }

        protected virtual void Generate(AddForeignKeyOperation opeChaveEstrangeira)
        {
            // Inicialmente não havera a criação de chave estrangeira
        }

         protected virtual void Generate(DropForeignKeyOperation dropForeignKeyOperation)
        {
            // Inicalmente não haverá a criação de chave estrangeira
        }

        protected virtual void Generate(CreateIndexOperation opeCriacaoIndex)
        {
            using (var ltextWriter = TextWriter())
            {
                ltextWriter.Write("CREATE ");

                if (opeCriacaoIndex.IsUnique)
                    ltextWriter.Write(" UNIQUE ");

                ltextWriter.Write("INDEX ");
                ltextWriter.Write(opeCriacaoIndex.Name);
                ltextWriter.Write(" ON ");
                ltextWriter.Write(RemoveDBO(opeCriacaoIndex.Table));
                ltextWriter.Write("(");

                for (int lintCount = 0; lintCount < opeCriacaoIndex.Columns.Count; lintCount++)
                {
                    var lstrDadosColuna = opeCriacaoIndex.Columns[lintCount];

                    ltextWriter.Write(lstrDadosColuna);

                    if (lintCount < opeCriacaoIndex.Columns.Count - 1)
                        ltextWriter.WriteLine(",");
                }

                ltextWriter.Write(")");

                ComandoSQL(ltextWriter);
            }
        }

         protected virtual void Generate(DropIndexOperation opeDropIndex)
        {
            using (var ltextWriter = TextWriter())
            {
                ltextWriter.Write("DROP INDEX ");
                ltextWriter.Write(opeDropIndex.Name);

                ComandoSQL(ltextWriter);
            }
        }

         protected virtual void Generate(AddPrimaryKeyOperation opeAdicionaPrimaryKey)
        {
            using (var ltextWriter = TextWriter())
            {
                ltextWriter.Write("ALTER TABLE ");
                ltextWriter.Write(RemoveDBO(opeAdicionaPrimaryKey.Table));
                ltextWriter.Write(" ADD CONSTRAINT ");
                ltextWriter.Write(opeAdicionaPrimaryKey.Name);
                ltextWriter.Write(" PRIMARY KEY ");
                ltextWriter.Write("(");

                for (int li = 0; li < opeAdicionaPrimaryKey.Columns.Count; li++)
                {
                    var lstrDadosColuna = opeAdicionaPrimaryKey.Columns[li];

                    ltextWriter.Write(lstrDadosColuna);

                    if (li < opeAdicionaPrimaryKey.Columns.Count - 1)
                        ltextWriter.WriteLine(",");
                }

                ltextWriter.Write(")");

                ComandoSQL(ltextWriter);
            }
        }

        protected virtual void Generate(DropPrimaryKeyOperation opeDropPrimaryKey)
        {
            using (var ltextWriter = TextWriter())
            {
                ltextWriter.Write("ALTER TABLE ");
                ltextWriter.Write(RemoveDBO(opeDropPrimaryKey.Table));
                ltextWriter.Write(" DROP CONSTRAINT ");
                ltextWriter.Write(opeDropPrimaryKey.Name);

                ComandoSQL(ltextWriter);
            }
        }

        protected virtual void Generate(AddColumnOperation opeAdicionaColuna)
        {
            using (var ltextWriter = TextWriter())
            {
                ltextWriter.Write("ALTER TABLE ");
                ltextWriter.Write(RemoveDBO(opeAdicionaColuna.Table));
                ltextWriter.Write(" ADD ");

                var lcmColuna = opeAdicionaColuna.Column;

                Generate(lcmColuna, ltextWriter, null);

                if ((lcmColuna.IsNullable != null)
                    && !lcmColuna.IsNullable.Value
                    && (lcmColuna.DefaultValue == null)
                    && (string.IsNullOrWhiteSpace(lcmColuna.DefaultValueSql))
                    && !lcmColuna.IsIdentity
                    && !lcmColuna.IsTimestamp
                    && !lcmColuna.StoreType.Equals("rowversion", StringComparison.InvariantCultureIgnoreCase)
                    && !lcmColuna.StoreType.Equals("timestamp", StringComparison.InvariantCultureIgnoreCase))
                {
                    ltextWriter.Write(" DEFAULT ");

                    if (lcmColuna.Type == PrimitiveTypeKind.DateTime)
                    {
                        ltextWriter.Write(Generate(DateTime.Parse("1900-01-01 00:00:00", CultureInfo.InvariantCulture)));
                    }
                    else
                    {
                        ltextWriter.Write(Generate((dynamic)lcmColuna.ClrDefaultValue));
                    }
                }

                ComandoSQL(ltextWriter);
            }
        }

         protected virtual void Generate(DropColumnOperation opeRemoveColuna)
        {
            using (var ltextWriter = TextWriter())
            {
                ltextWriter.Write("ALTER TABLE ");
                ltextWriter.Write(RemoveDBO(opeRemoveColuna.Table));
                ltextWriter.Write(" DROP COLUMN ");
                ltextWriter.Write(opeRemoveColuna.Name);

                ComandoSQL(ltextWriter);
            }
        }

        protected virtual void Generate(AlterColumnOperation opeAlteraColuna)
        {
            var lcmColuna = opeAlteraColuna.Column;

            using (var ltextWriter = TextWriter())
            {
                ltextWriter.Write("ALTER TABLE ");
                ltextWriter.Write(RemoveDBO(opeAlteraColuna.Table));
                ltextWriter.Write(" ALTER COLUMN ");
                ltextWriter.Write(lcmColuna.Name);
                ltextWriter.Write(" ");
                ltextWriter.Write(ConstruirTipoColuna(lcmColuna));

                if ((lcmColuna.IsNullable != null)
                    && !lcmColuna.IsNullable.Value)
                {
                    ltextWriter.Write(" NOT NULL");
                }

                ComandoSQL(ltextWriter);
            }

            if ((lcmColuna.DefaultValue == null) && string.IsNullOrWhiteSpace(lcmColuna.DefaultValueSql))
                return;

            using (var ltextWriter = TextWriter())
            {
                ltextWriter.Write("ALTER TABLE ");
                ltextWriter.Write(RemoveDBO(opeAlteraColuna.Table));
                ltextWriter.Write(" ALTER COLUMN ");
                ltextWriter.Write(lcmColuna.Name);
                ltextWriter.Write(" DROP DEFAULT");

                ComandoSQL(ltextWriter);
            }

            using (var ltextWriter = TextWriter())
            {
                ltextWriter.Write("ALTER TABLE ");
                ltextWriter.Write(RemoveDBO(opeAlteraColuna.Table));
                ltextWriter.Write(" ALTER COLUMN ");
                ltextWriter.Write(lcmColuna.Name);
                ltextWriter.Write(" SET DEFAULT ");
                ltextWriter.Write(
                    (lcmColuna.DefaultValue != null)
                        ? Generate((dynamic)lcmColuna.DefaultValue)
                        : lcmColuna.DefaultValueSql
                    );

                ComandoSQL(ltextWriter);
            }
        }

        protected virtual void Generate(DropTableOperation opeDropTable)
        {
            using (var ltextWriter = TextWriter())
            {
                ltextWriter.Write("DROP TABLE ");
                ltextWriter.Write(RemoveDBO(opeDropTable.Name));

                ComandoSQL(ltextWriter);
            }
        }

        protected virtual void Generate(SqlOperation opeSQL)
        {
            ComandoSQL(opeSQL.Sql, opeSQL.SuppressTransaction);
        }

         protected virtual void Generate(RenameColumnOperation opeRenomearColuna)
        {
            // Inicialmente não suportada
        }

        protected virtual void Generate(RenameTableOperation opeRenameTable)
        {
        }

        protected virtual void Generate(MoveTableOperation opeMoveTable)
        {
        }

        private void Generate(ColumnModel cmDadosColuna, IndentedTextWriter textWriter, PrimaryKeyOperation opePrimaryKey)
        {
            textWriter.Write(cmDadosColuna.Name);
            textWriter.Write(" ");
            bool lblnEhPrimaryKey = false;

            if (opePrimaryKey != null)
                lblnEhPrimaryKey = opePrimaryKey.Columns.Contains(cmDadosColuna.Name);

            if (lblnEhPrimaryKey)
            {
                if ((cmDadosColuna.Type == PrimitiveTypeKind.Int16) ||
                    (cmDadosColuna.Type == PrimitiveTypeKind.Int32))
                    textWriter.Write(" INTEGER ");
                else
                    textWriter.Write(ConstruirTipoColuna(cmDadosColuna));

                if (cmDadosColuna.IsIdentity)
                {
                    textWriter.Write(" PRIMARY KEY AUTOINCREMENT ");
                    pblnGerouPrimaryKey = true;
                }
            }
            else
            {
                textWriter.Write(ConstruirTipoColuna(cmDadosColuna));

                if ((cmDadosColuna.IsNullable != null)
                    && !cmDadosColuna.IsNullable.Value)
                {
                    textWriter.Write(" NOT NULL");
                }

                if (cmDadosColuna.DefaultValue != null)
                {
                    textWriter.Write(" DEFAULT ");
                    textWriter.Write(Generate((dynamic)cmDadosColuna.DefaultValue));
                }
                else if (!string.IsNullOrWhiteSpace(cmDadosColuna.DefaultValueSql))
                {
                    textWriter.Write(" DEFAULT ");
                    textWriter.Write(cmDadosColuna.DefaultValueSql);
                }
            }
        }

        protected virtual void Generate(HistoryOperation opeHistorico)
        {
            // Foi removido, pois atualmente não usaremos o Migration
            //using (var ltextWriter = TextWriter())
            //{
            //    if (opeHistorico is InsertHistoryOperation)
            //    {
            //        InsertHistoryOperation lhisOperacaoInsert = opeHistorico as InsertHistoryOperation;
            //        ltextWriter.Write(" INSERT INTO ");
            //        ltextWriter.Write(pstrNomeTabelaMigration);
            //        ltextWriter.Write(" ( MigrationId, Model, ProductVersion) VALUES ");
            //        ltextWriter.Write(string.Format(" ('{0}', {1}, '{2}')",
            //            lhisOperacaoInsert.MigrationId,
            //            Generate(lhisOperacaoInsert.Model), lhisOperacaoInsert.ProductVersion));
            //    }
            //    else if (opeHistorico is DeleteHistoryOperation)
            //    {
            //        DeleteHistoryOperation lhisOperacaoInsert = opeHistorico as DeleteHistoryOperation;
            //        ltextWriter.Write(" DELETE FROM ");
            //        ltextWriter.Write(pstrNomeTabelaMigration);
            //        ltextWriter.Write(string.Format(" WHERE MigrationId = '{0}'",
            //            lhisOperacaoInsert.MigrationId));
            //    }

            //    ComandoSQL(ltextWriter);
            //}
        }

        protected virtual string Generate(byte[] bytDefaultValue)
        {
            var lstrbHexString = new StringBuilder();

            foreach (var lbtByte in bytDefaultValue)
                lstrbHexString.Append(lbtByte.ToString("X2", CultureInfo.InvariantCulture));

            return "x'" + lstrbHexString + "'";
        }

        protected virtual string Generate(bool blnDefaultValue)
        {
            return blnDefaultValue ? "1" : "0";
        }

        protected virtual string Generate(DateTime dtmDefaultValue)
        {
            return "'" + dtmDefaultValue.ToString(pstrDefaultDateTime, CultureInfo.InvariantCulture) + "'";
        }

        protected virtual string Generate(DateTimeOffset dtfDefaultValue)
        {
            return "'" + dtfDefaultValue.ToString(pstrDefaultDateTime, CultureInfo.InvariantCulture) + "'";
        }

        protected virtual string Generate(Guid guidDefaultValue)
        {
            return "'" + guidDefaultValue + "'";
        }

        protected virtual string Generate(string strDefaultValue)
        {
            return "'" + strDefaultValue + "'";
        }

        protected virtual string Generate(TimeSpan tsDefaultValue)
        {
            return "'" + tsDefaultValue + "'";
        }

        protected virtual string Generate(object objDefaultValue)
        {
            return string.Format(CultureInfo.InvariantCulture, "{0}", objDefaultValue);
        }

        #endregion

        #region Métodos auxiliares

        protected virtual string ConstruirTipoColuna(ColumnModel cmModeloColuna)
        {
            return cmModeloColuna.IsTimestamp ? "rowversion" : ConstruirTipoPropriedade(cmModeloColuna);
        }

        private string ConstruirTipoPropriedade(ColumnModel propModeloPropriedade)
        {
            var lstrOriginalStoreTypeName = propModeloPropriedade.StoreType;

            if (string.IsNullOrWhiteSpace(lstrOriginalStoreTypeName))
            {
                var ltypeUsage = pprovProviderManifest.GetStoreType(propModeloPropriedade.TypeUsage).EdmType;
                lstrOriginalStoreTypeName = ltypeUsage.Name;
            }

            var lstrStoreTypeName = lstrOriginalStoreTypeName;

            const string lstrSufixoMax = "(max)";

            if (lstrStoreTypeName.EndsWith(lstrSufixoMax, StringComparison.Ordinal))
                lstrStoreTypeName = lstrStoreTypeName.Substring(0, lstrStoreTypeName.Length - lstrSufixoMax.Length) + lstrSufixoMax;

            switch (lstrOriginalStoreTypeName.ToLowerInvariant())
            {
                case "decimal":
                case "numeric":
                    lstrStoreTypeName += "(" + (propModeloPropriedade.Precision ?? pintDefaultPrecisaoNumerica)
                                     + ", " + (propModeloPropriedade.Scale ?? pintDefaultEscala) + ")";
                    break;
                case "datetime":
                case "time":
                    lstrStoreTypeName += "(" + (propModeloPropriedade.Precision ?? pbytDefaultPrecisaoTempo) + ")";
                    break;
                case "blob":
                case "varchar2":
                case "varchar":
                case "char":
                case "nvarchar":
                case "nvarchar2":
                    lstrStoreTypeName += "(" + (propModeloPropriedade.MaxLength ?? pintDefaultStringMaxLength) + ")";
                    break;
            }

            return lstrStoreTypeName;
        }

        protected void ComandoSQL(string strInstrucaoSQL, bool blnSuprimeTransacao = false)
        {
            plstComandos.Add(new MigrationStatement
            {
                Sql = strInstrucaoSQL,
                SuppressTransaction = blnSuprimeTransacao
            });
        }

        protected void ComandoSQL(IndentedTextWriter writer)
        {
            ComandoSQL(writer.InnerWriter.ToString());
        }

        protected static IndentedTextWriter TextWriter()
        {
            return new IndentedTextWriter(new StringWriter(CultureInfo.InvariantCulture));
        }

        private static string RemoveDBO(string strTexto)
        {
            return strTexto.Replace("dbo.", string.Empty);
        }

        private void GeraComandos(IEnumerable<MigrationOperation> lstOperacoesMigrations)
        {
            foreach (dynamic ldynOperacao in lstOperacoesMigrations)
                Generate(ldynOperacao);
        }

        private void InicializaServicosProvider(string strManifestoProvider)
        {
            using (var lconConexao = CreateConnection())
            {
                pprovProviderManifest = DbProviderServices
                    .GetProviderServices(lconConexao)
                    .GetProviderManifest(strManifestoProvider);
            }
        }

        protected virtual DbConnection CreateConnection()
        {
            return new SQLiteConnection();
        }

        private void GeraComandoCriacaoTabela(CreateTableOperation opeCriacaoTabela, IndentedTextWriter textWriter)
        {

            textWriter.WriteLine("CREATE TABLE " + RemoveDBO(opeCriacaoTabela.Name) + " (");
            textWriter.Indent++;

            for (int i = 0; i < opeCriacaoTabela.Columns.Count; i++)
            {
                ColumnModel lcmDadosColuna = opeCriacaoTabela.Columns.ToList()[i];
                Generate(lcmDadosColuna, textWriter, opeCriacaoTabela.PrimaryKey);

                if (i < opeCriacaoTabela.Columns.Count - 1)
                    textWriter.WriteLine(",");
            }

            if ((opeCriacaoTabela.PrimaryKey != null) && !pblnGerouPrimaryKey)
            {
                textWriter.WriteLine(",");
                textWriter.Write("CONSTRAINT ");
                textWriter.Write(RemoveDBO(opeCriacaoTabela.PrimaryKey.Name));
                textWriter.Write(" PRIMARY KEY ");
                textWriter.Write("(");

                for (int li = 0; li < opeCriacaoTabela.PrimaryKey.Columns.Count; li++)
                {
                    var lstrNomeColuna = opeCriacaoTabela.PrimaryKey.Columns[li];

                    textWriter.Write(lstrNomeColuna);

                    if (li < opeCriacaoTabela.PrimaryKey.Columns.Count - 1)
                        textWriter.WriteLine(",");
                }

                textWriter.WriteLine(")");
            }
            else
            {
                textWriter.WriteLine();
            }

            textWriter.Indent--;
            textWriter.Write(")");
        }

        #endregion

    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-17T03:18:34.673

我不知道 SQLite 有什么，但如果你想按照其他人的建议创建一个，你可以从这个开源项目开始。或者您可能会发现这本身就足够了？

[http://www.codeproject.com/Articles/32977/Upgrade-framework-for-SQLite-databases](http://www.codeproject.com/Articles/32977/Upgrade-framework-for-SQLite-databases)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-10T20:41:51.210

我认为我们可以使用与 Android 相同的概念为 SQLite 制作简单的迁移引擎。这篇[文章](http://hintdesk.com/sqlite-with-entity-framework-code-first-and-migration/)展示了这个概念。当然，我们没有任何有效的 MigrationSqlGenerator，但这个概念是可靠且有用的。

# php - PHP Unzip 函数创建隐藏的系统文件

> ID：15887152
> 
> 赞同：0
> 
> 时间：2013-04-08T19:19:44.107
> 
> 标签：php, wordpress, zip, unzip

我有在我的 wordpress 网站上运行的以下代码（函数的一部分）。它工作正常，但它也会为每个文件创建一个系统文件（以'.'开头）。这通常不是问题，但我的 HTML5 音频播放器会拾取这些文件，并且显然无法播放它们，所以看起来播放器坏了。

有没有办法从它的 Zip 端停止创建这些文件？还是我必须从玩家方面阻止它？

我宁愿完全停止创建它们，因为它们占用空间。

代码是：

```
 // Unzip files to temp unzip folder, ignoring anything that is not a .mp3 extension
   $zip = new ZipArchive();
   $filename = $zip_file_path;

   if ($zip->open($filename)!==TRUE) {
      exit("cannot open <$filename>\n");
   }

   for ($i=0; $i<$zip->numFiles;$i++) {
      $info = $zip->statIndex($i);
      $file = pathinfo($info['name']);
      if(strtolower($file['extension']) == "mp3") {
           file_put_contents($temp_unzip_path.'/'.basename($info['name']), $zip->getFromIndex($i));
      } else {
      $zip->deleteIndex($i);
      }
   }
   $zip->close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T19:23:47.163

为什么不通过检查文件名的第一个字符不是句点来添加到您的 mp3 条件？

```
 if(strtolower($file['extension']) == "mp3" && $info['name'][0] != '.') { 
```

# express - 另一个/socket.io/socket.io.js 404

> ID：15887153
> 
> 赞同：0
> 
> 时间：2013-04-08T19:19:47.013
> 
> 标签：express, socket.io

我的客户端app.html：

```
<script src="/socket.io/socket.io.js"></script>
<script>
  var socket = io.connect('http://mywebsite.com/');
  socket.on('news', function (data) {
    console.log(data);
    socket.emit('my other event', { my: 'data' });
  });
</script> 
```

我的服务器端 app.js：

```
var express = require('express')
  , http = require('http');
var app = express();
var server = http.createServer(app);
var io = require('socket.io').listen(server);

server.listen(process.env.PORT || 8888);

app.get('/', function (req, res) {
  res.sendfile(__dirname + '/app.html');
});

io.sockets.on('connection', function (socket) {
  socket.emit('news', { hello: 'world' });
  socket.on('my other event', function (data) {
    console.log(data);
  });
}); 
```

如果我访问[http://mywebsite.com:8888](http://mywebsite.com:8888)，控制台会显示：

```
Object {hello: "world"} 
```

但如果我访问[http://mywebsite.com/app.html](http://mywebsite.com/app.html)，控制台会显示：

```
GET http://mywebsite.com/socket.io/socket.io.js 404 (Not Found)
Uncaught ReferenceError: io is not defined 
```

重发到这里[https://stackoverflow.com/a/10192084/990434](https://stackoverflow.com/a/10192084/990434)我有 express v3.1.1，我也试过这个答案[https://stackoverflow.com/a/14167488/990434](https://stackoverflow.com/a/14167488/990434)无济于事。我从一个谷歌小组中尝试了一些其他随机的东西，我似乎在我漫长的混乱历史中找不到这些东西。知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:47:01.413

您混淆了存储在服务器上的文件和服务器提供的路由。虽然`app.html`是您服务器上的一个文件，但您的服务器不响应对`/app.html`. 相反，当请求到达时`/`，您的服务器会发送文件`app.html`。事实上，客户端/接收者永远不会知道它收到的文件是`app.html`在您的服务器上调用的。因此，当客户端（浏览器）访问时，他们会获得包含标签`http://mywebsite.com:8888`的 html 文件。`script`这些`script`标签具有使您的浏览器连接到 socket.io 的代码，该代码被编程为 on`'connection'`向客户端发送消息：

```
socket.emit('news', { hello: 'world' }); 
```

然后在浏览器中运行的客户端代码会收到消息

```
socket.on('news', function (data) {
    console.log(data); 
```

然后将消息发送回服务器

```
socket.emit('my other event', { my: 'data' }); 
```

一切都按程序运行。但是，您的服务器上没有“路由器”来监听请求`/app.html`

# dos - 一次更改多个 Windows 文件夹名称

> ID：15887157
> 
> 赞同：0
> 
> 时间：2013-04-08T19:19:59.467
> 
> 标签：dos, rename

我必须重命名几个文件夹。旧文件夹是随机命名的，新名称允许一致的命名协议。我已经将现有文件夹与新名称列表进行了核对，但是有数百个文件夹要重命名，手动操作将花费很长时间。

旧名和新名一般有很大的不同。例如：

旧：john l,smth 新：smith_john_04082013

所以我想做的是在程序的一部分中放置一个旧名称列表，在另一部分中放置新名称列表，然后循环重命名它们的文件夹列表，直到最后一个完成。

例如

```
john l,smth (to) smith_john_04082013
mary-jones 42nd street (to) jones_mary_03122013
wil-h-davis (to) davis_william_02122012 
```

ETC

我知道如何在 dos 中使用重命名命令，但“似乎”所做的只是更改一个目录的名称，即重命名“john l,smth”“smith_john_04082013”

我尝试做类似的事情：

```
rename "john l,smth" "smith_john_04082013"; "mary-jones 42nd street" "jones_mary_03122013"; "wil-h-davis" "davis_william_02122012" 
```

可能使用分隔符的概念是多重重命名的技巧，但这也不起作用。

如果有人知道如何做到这一点，那将非常有帮助。

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T19:31:25.197

只需创建一个批处理文件（带有`.bat`扩展名的纯文本文件，如`rename_folders.bat`），并将每个操作列为单行：

```
ren "john l,smth" "smith_john_04082013"
ren "mary-jones 42nd street" "jones_mary_03122013"
ren "wil-h-davis" "davis_william_02122012" 
```

（`ren`是 的简称`rename`，可以节省一点打字时间。）

一旦你拥有了文件中的所有行，将它保存在你希望它运行的文件夹中，在该文件夹中打开一个命令提示符，然后运行批处理文件（`.bat`运行它时扩展名是可选的，因为它是其中之一已知的可执行文件扩展名）：

```
C:\YourBaseFolder>rename_folders 
```

或者

```
C:\YourBaseFolder>rename_folders.bat 
```

# c# - c#数字序列

> ID：15887159
> 
> 赞同：0
> 
> 时间：2013-04-08T19:20:04.283
> 
> 标签：c#, string, sequence

我已经制作了从 2a3b 到 aabbb 的代码。当没有给出数字时，这也必须适用。就像 aa2b => aabb。该程序正在完全运行，但我的问题是，它占用了大量空间。我认为这是我的拆分，但如果输入是 2a2b，我的数组将是这样的：

2 空 空 a 2 空 空 b

有人知道我在做什么错吗？是我的分裂吗？

```
static void Main(string[] args)
        {
            string test = "";
            int intNumber = 1;

            string value = "2a2b";
            string[] array = new string[20];
            int count = 1;

            array = Regex.Split(value, "(\\d{0,2})");

            while (count < array.Length)
            {
                int num;
                if (array[count] != "")
                {
                    bool isNumeric = int.TryParse(array[count], out num);
                    if (!isNumeric)
                    {

                        test = test + string.fill(array[count], intNumber);
                        test = test + array[count];

                        Console.WriteLine(test);

                        intNumber = 1;
                    }
                    else
                    {
                        intNumber = num;

                    }  
                }
                count++;
            }
            Console.WriteLine("woord:" + test);

            Console.ReadLine(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T19:31:38.333

用一个简单的`Regex.Replace`怎么样？

```
string input = "2a3bcccc";
string output = Regex.Replace(
         input, 
         @"(\d+)(\w)", 
         m => new String(m.Groups[2].Value[0],int.Parse(m.Groups[1].Value))); 
```

结果：**aabbbcccc**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T19:27:13.593

解决您的问题的一种更简单的方法是摆脱正则表达式，数组创建将如下所示：

```
 char[] array = value.ToArray(); 
```

`array`代码，由于char 数组（而不是字符串数组）和一些改进而进行了较小的更正：

```
static void Main(string[] args)
{
    string test = "";
    int intNumber = 1;

    string value = "2a2b";

    foreach (char c in value.ToArray())
    {
        int num;
        bool isNumeric = int.TryParse(c.ToString(), out num);

        if (!isNumeric)
        {
            test = test + new string(c, intNumber);

            Console.WriteLine(test);

            intNumber = 1;
        }
        else
        {
            intNumber = num;
        }
    }

    Console.WriteLine("woord:" + test);
    Console.ReadLine();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T19:39:30.410

不使用正则表达式的快速测试程序就像一个魅力。

```
const string value = "aa2b";
var result = "";

for (var i = 0; i < value.Length; i++)
{
     int num;
     if (Int32.TryParse(value.Substring(i, 1), out num))
     {
         for (var j = 0; j < num; j++)
         {
            result += value.Substring(i + 1, 1);
         }
            i++;
     }
     else
     {
         result += value.Substring(i, 1);
     }
}

textBox1.AppendText("woord:" + result); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T19:35:47.027

我通常会尽量避免使用正则表达式，除非我需要验证一个复杂的模式。

这是我对您的问题的解决方案：

```
string k = Console.ReadLine();

string t = "";
int count = 0, next;

for (int i = 0; i < k.Length; i++)
{
    while (int.TryParse(k[i].ToString(), out next)) // Find the count of the next letter
    {
        count = count * 10 + next; // If count had a 2, and the next character is 3 (means we need to calculate 23), simply multiply the previous count by 10, and add the new digit
        i++; // Move to the next character
    }

    t += new String(k[i], count > 0 ? count : 1); // Add the new sequence of letters to our string
    count = 0; // Clear the current count
}

Console.WriteLine(t); 
```

您可以通过使用类来优化上述`StringBuilder`内容，但我认为首先了解通用解决方案就足够了，而不是试图找到优化。

# c++ - 使用字符串进行 C++ 递归扫描

> ID：15887161
> 
> 赞同：0
> 
> 时间：2013-04-08T19:20:07.973
> 
> 标签：c++, recursion

我有一个使用递归的任务。我仍然无法理解递归，或者至少理解它是如何工作的，但我想我已经开始掌握它，即使我不太确定为什么会有任何工作。

我的作业分为两部分，但目前我只需要第一部分的帮助。这是我必须做的：

> 编写一个递归函数，该函数将返回 C 字符串中第一次出现 > 字符的位置

这是我目前所拥有的......

```
#include <stdio.h>
#include <string>
#include <iostream>
using namespace std;
int test(string s, char x);

int main ()
{
  test("lets test for the letter s", "s" );
}

int test(string s, char x)
{
if(s.length() == 0)
    return 0;
else if (s[0] == x)
    return 1 + test(s.substr(1, s.length()), x);
else
    return test(s.substr(1, s.length()), x);
} 
```

所以我认为这应该可行，但我对如何让函数来测试任何东西有点困惑。我很确定我在 main 的函数调用中正确完成了字符串部分，但我无法让 char 接受一个值。按照我的理解，我应该输入要扫描的文本，然后输入要查找的字符。谁能告诉我我做错了什么，或者我什至接近递归函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T19:24:34.410

您应该执行以下操作：

```
int main ()
{
   test("lets test for the letter s", 's'); 
                                   //should pass char constant 
                                 //not string literal for second parameter
}

int test(string s, char x)
{
   if(s.length() == 0)
      return 0;
   else if (s[0] == x)
      return 1 + test(s.substr(1, s.length()-1), x); 
                                //^^^second parameter of substring is length
   else
      return test(s.substr(1, s.length()), x);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T19:22:20.000

字符常量放在单引号中。要测试您的功能，请编写如下内容：

```
cout << test("lets test for the letter s", 's') << endl; 
```

至于你的递归函数，你很接近。语句具有正确的`if`测试，您只需要`return`稍微调整语句。

```
if (s.length() == 0)
    return -1; 
```

如果字符串为空，则找不到字符。我建议返回 -1 而不是 0，因为返回值 0 表明（对我而言）该字符是在位置 0 找到的。-1 是当找不到字符时这些函数的传统返回码。

```
else if (s[0] == x)
    return 0; 
```

你明白这是为什么`return 0`吗？您在索引 0 处找到了该字符`x`，所以这就是您应该返回的内容：`0`！

```
else
    return 1 + test(s.substr(1, s.length() - 1), x); 
```

最后一个测试是唯一需要递归的测试。这是您放置`1 +`. 你还需要减少`length()`1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T19:24:49.880

"s" 将被视为 char 数组或字符串。要表示单个字符，您应该使用 's'

```
int main ()
{
  cout << "location  = " << test("lets test for the letter s", 's' );
                                                               ^^^^
} 
```

# symfony - symfony2 控制器在视图中工作正常，但在加载期间不能：fixtures

> ID：15887168
> 
> 赞同：0
> 
> 时间：2013-04-08T19:20:52.940
> 
> 标签：symfony, controller, doctrine, entity, fixtures

我在 Symfony2 中为控制器、EntityRepository 和我的 Doctrine Fixtures 的组合而苦苦挣扎。

我的 ImageParts 实体是图像片段。我想使用随机片段随机生成图像。

因此，我有一个名为 ImagePart 的实体和一个名为“ImagePartRepository”的 EntityRepository。

在该 EntityRepository 中，我创建了一个名为“getRandomImagePart()”的函数，它在使用路由测试时工作正常。

但我不知道如何在我的灯具中使用这个功能。我想我必须声明一项服务，但即便如此我也无法让它工作。我收到的错误消息类型告诉我，我显然在做一些结构错误的事情。

此外，我想知道我是否以正确的方式使用 Symfony2 框架，功能。例如：我应该能够在我的装置中使用 EntityRepository 吗？

控制器：

```
 <?php

    namespace AMM\AMMBundle\Controller;

    use Symfony\Bundle\FrameworkBundle\Controller\Controller;
    use Sensio\Bundle\FrameworkExtraBundle\Configuration\Route;
    use Sensio\Bundle\FrameworkExtraBundle\Configuration\Template;

    use Symfony\Component\DependencyInjection\ContainerInterface;
    use Symfony\Component\DependencyInjection\ContainerAwareInterface;
    use Symfony\Component\Finder\Finder;

    use AMM\AMMBundle\Entity\ImagePart;
    use Doctrine\ORM\Mapping as ORM;

    class ImagePartController extends Controller implements ContainerAwareInterface
    {
        /**
         * @var ContainerInterface
         */
        protected $container;

        /**
         * {@inheritDoc}
         */
        public function setContainer(ContainerInterface $container = null)
        {
            $this->container = $container;
        }

        public function getRandomImagePartAction($type)
        {
            /*
            $sql = " 
                SELECT a.imagePartBase64 FROM imageparts a
                WHERE a.imagePartCategory = '".$type."'
                ORDER BY RAND()
                LIMIT 1
            ";
            */

            $em = $this->getDoctrine()
                       ->getManager();

            $imagePart = $em->createQueryBuilder()
                        ->select('g')
                        ->from('AMMBundle:ImagePart',  'i')
                        ->addOrderBy('i.id', 'ASC')
                        ->getQuery()
                        ->getSingleResult();

          // $conn = $this->get('database_connection');
            //$randomimagepart = $conn->fetchAll($sql);

           // return $randomimagepart[0]['imagePartBase64'];

            return $imagePart;
        }

// ..

public function generateRandomImage()
    {
      $object->getRandomImagePartAction('BACKGROUND');
    } 
```

夹具文件 ImageFixtures.php

```
<?php
namespace AMM\AMMBundle\DataFixtures\ORM;

use Doctrine\Common\DataFixtures\FixtureInterface;
use Doctrine\Common\DataFixtures\OrderedFixtureInterface;
use Doctrine\Common\Persistence\ObjectManager;
use Symfony\Component\DependencyInjection\ContainerAwareInterface;
use Symfony\Component\DependencyInjection\ContainerInterface;

use AMM\AMMBundle\Entity\ImagePart;

class GenerateImages implements FixtureInterface, ContainerAwareInterface, OrderedFixtureInterface
{
    private $container;

    public function load(Objectmanager $manager)
    {
        $image= new Image();

        $imageGenerator = $this->container
                               ->get('imageGenerator')
                                ->GenerateRandomImage();

        $manager->persist($image);      
        $manager->flush();

} 
```

我的服务.yml：

```
services:
    imageGenerator:
        class:        AMM\AMMBundle\Controller\ImagePartController 
```

所以，基本上我所做的就是从同一个控制器中的一个函数中调用一个函数。这在测试它时工作正常，例如在视图中。

但是在尝试加载学说夹具时，会出现以下错误：

致命错误：在 C:\wamp\www\amm\vendor\symfony\symfony\src\Symfony\Bundle\FrameworkBundle\Controller\Controller.php 中的非对象上调用成员函数 has() 第 198 行

堆栈跟踪的结尾：

```
5.7077   41983128  15\. AMM\AMMBundle\Controller\ImagePartController->getRandomImagePartAction() C:\wamp\www\amm\src\AMM\AMMBundle\Controller\ImagePartController.php:119
5.7077   41983128  16\. Symfony\Bundle\FrameworkBundle\Controller\Controller->getDoctrine() C:\wamp\www\amm\src\AMM\AMMBundle\Controller\ImagePartController.php:44 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:20:39.050

好的，我发现了问题。

我必须将此添加到我的 services.yml 中：

```
calls: - [setContainer, [@service_container]] – 
```

# flash - 使用位置属性和移动事件在 Flash 中制作滚动条

> ID：15887169
> 
> 赞同：0
> 
> 时间：2013-04-08T19:20:53.977
> 
> 标签：flash, events, position, scrollbar

我想在 Flash 中实现一个水平滚动条来控制我的页面对象。我需要能够获取/设置滚动位置并在滚动条移动时捕捉事件。据我了解， UIScrollBar 对象必须附加到 Textfield 并且无法访问 position 属性和 move 事件。

是否有一个简单而免费的脚本可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T05:58:39.943

You can use ScrollPane native component, which can do everything you've mentioned. You can also use [Kirupa Scrollbar](http://www.kirupa.com/forum/showthread.php?275991-Kirupa-Scrollbar-AS3-0).

# android - 检测屏幕上的坐标

> ID：15887178
> 
> 赞同：0
> 
> 时间：2013-04-08T19:21:21.753
> 
> 标签：android

我想用手指在屏幕上检测地图的坐标。问题是当我用手指触摸屏幕时，坐标不会显示为吐司。我正在使用谷歌地图 v2。我的代码：

```
@Override
public boolean onTouchEvent(MotionEvent event) 
{
    if (event.getAction() == MotionEvent.ACTION_POINTER_DOWN) 
    {
        CrearLugar();
    }

    return super.onTouchEvent(event);
}

public void CrearLugar()
{
    final GoogleMap mMap=null;

    mMap.setOnMapClickListener(new OnMapClickListener() {
        public void onMapClick(LatLng point) {
            Projection proj=mMap.getProjection();
            Point coord = proj.toScreenLocation(point);

            Toast.makeText(
                MapaLugaresActivity.this,
                "Click\n" +
                "Lat: " + point.latitude + "\n" +
                "Lng: " + point.longitude + "\n" +
                "X: " + coord.x + " - Y: " + coord.y,
                Toast.LENGTH_SHORT).show();
        }
    });
} 
```

一切都是正确的，除非我用手指触摸屏幕。当我这样做时，我想显示触摸的地方的坐标，但我什么都看不到，只能看地图。

怎么了？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T20:59:25.240

必须在活动的任何创建者（onCreate、onResume、onPause 等）中设置点击监听器。请注意，您将侦听器设置为（侦听）以进行更改。您仍然可以使用 onTouch 覆盖方法。这将有助于获取用户在屏幕中单击的绝对坐标，但它完全独立于地图。（顺便说一句，你需要绝对坐标做什么？）。

试试看：

```
@Override
public boolean onTouchEvent(MotionEvent event) 
{
    Toast.makeText(
            MapaLugaresActivity.this,
            "Click\n" +
            "X: " + event.getX() + " - Y: " + event.getY(),
            Toast.LENGTH_SHORT).show();

    return super.onTouchEvent(event);
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // Inflate view
    // Inflate map view

    mMap.setOnMapClickListener(new OnMapClickListener() {
        public void onMapClick(LatLng point) {
            Projection proj=mMap.getProjection();
            Point coord = proj.toScreenLocation(point);

            Toast.makeText(
            MapaLugaresActivity.this,
            "Click\n" +
            "Lat: " + point.latitude + "\n" +
            "Lng: " + point.longitude + "\n",
            Toast.LENGTH_SHORT).show();
        }
    });
} 
```

# visual-studio-2010 - Visual Basic 删除未修改的文件

> ID：15887185
> 
> 赞同：0
> 
> 时间：2013-04-08T19:21:59.693
> 
> 标签：visual-studio-2010

如您所见，以下代码将从一个文件夹中提取文件并将它们放置在另一个文件夹中。但是我正在尝试删除过去3个月内没有修改过的文件，它根本不会删除任何文件。

代码：

```
Imports System.IO

Public Class frmExtractionator

    Dim txtFiles1 As Control

    Private Sub btnStart_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnStart.Click

        Dim sourceDirectory As String = "E:\CopierFolderforTestDriveCapstone"
        Dim archiveDirectory As String = "E:\FilesExtracted"

        Try
            Dim txtFiles = Directory.EnumerateFiles(sourceDirectory)

            If (Not System.IO.Directory.Exists(archiveDirectory)) Then
                System.IO.Directory.CreateDirectory(archiveDirectory)
            End If

            For Each currentFileLoc As String In txtFiles
                Dim fileName = currentFileLoc.Substring(sourceDirectory.Length + 1)
                File.Move(currentFileLoc, Path.Combine(archiveDirectory, fileName))

                Try
                    Dim di As DirectoryInfo = New DirectoryInfo(sourceDirectory)
                    Dim fi As FileInfo() = di.GetFiles()

                    For Each currentFile As FileInfo In fi
                        File.Move(currentFile.FullName, Path.Combine(archiveDirectory, currentFile.Name))

                        Dim dt As DateTime = currentFile.LastWriteTime
                        ' Add 3 months to the last write and check if it is less than today '
                        If dt.AddMonths(3) < DateTime.Today Then
                            File.Delete(currentFile.FullName)

                        End If
                    Next
                Catch eT As Exception
                    Console.WriteLine(eT.Message)
                End Try

            Next
        Catch eT As Exception
            Console.WriteLine(eT.Message)
        End Try
    End Sub
End Class 
```

# gmail - IMAP Fetch 命令 - 将所有邮件返回为已查看，即使未查看

> ID：15887186
> 
> 赞同：0
> 
> 时间：2013-04-08T19:22:03.713
> 
> 标签：gmail, imap, fetch, flags

我正在使用以下 IMAP 命令从 Gmail 下载邮件：

```
UID FETCH 8590 (FLAGS UID RFC822.SIZE INTERNALDATE BODY.PEEK[HEADER] BODY) 
```

效果很好，除了一个问题：

*   消息**`FLAGS`**总是返回，**`Seen`**即使它们是**`Unseen`**。

上面的命令中是否缺少一些东西来为消息返回正确的标志？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T15:17:28.667

我刚刚检查了完全相同的命令（UID 除外），但我无法在我的 gmail 帐户上重现该命令。你确定你没有在没有修饰符的情况下访问其他`BODY`地方的其他项目吗？`.PEEK`

# php - 无法访问数组键

> ID：15887187
> 
> 赞同：0
> 
> 时间：2013-04-08T19:22:04.490
> 
> 标签：php, arrays, key

我对数组的键有一点问题。数组如下所示：

```
Array
(
    [1] => Array
        (
            ["question"] => test question 1
            ["open_response"] => 1
        )

    [2] => Array
        (
            ["question"] => test question 2
            ["yes_no"] => 1
        )

) 
```

但是由于某种原因，每当我尝试访问`$data['1']['question']`它时，它都会告诉我问题不是索引。我对此有点困惑，因为它应该是一个关键，但不是，我该如何解决这个问题？或者我怎样才能访问它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T19:23:51.017

你要：

```
$data[1]['question'] 
```

不是：

```
$data['1']['question'] 
```

# 编辑：

我的回答并没有解决他的问题，而是帮助他找到了实际问题。上面的两个片段**完全相同**，因为如果字符串是有效整数，PHP 会将字符串键转换为整数。IMO，它令人困惑。如果我用一个字符串键入我的数组，dag`nammit 它应该用一个字符串键入，即使该字符串也可以解析为一个 int！

相关文档可以在[这里](http://php.net/manual/en/language.types.array.php)找到：

> 键可以是整数或字符串。该值可以是任何类型。
> 
> 此外，还会发生以下关键转换：
> 
> 1.  **包含有效整数的字符串将被转换为整数类型。例如，键“8”实际上将存储在 8 下。另一方面，“08”不会被强制转换，因为它不是有效的十进制整数。**
> 2.  浮点数也被转换为整数，这意味着小数部分将被截断。例如，密钥 8.7 实际上将存储在 8 下。
> 3.  布尔值也被转换为整数，即键 true 将实际存储在 1 下，而键 false 将存储在 0 下。
> 4.  Null 将被强制转换为空字符串，即键 null 将实际存储在 "" 下。
> 5.  数组和对象不能用作键。这样做会导致警告：非法偏移类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T19:39:40.590

您的阵列从哪里提供？数组索引可能具有不可见的（通过您的编辑器、浏览器等）字符，如退格或空 (\0) 字符。您在 var_dump 上看不到这些字符。

看这个例子：代码：

```
<pre>

<?php
$a = array(
    "\0question\0" => "test question 1",
    "question\0" => "test question 2",
    "\0question" => "test question 3",
    "question" => "test question 4"
   );

var_dump($a);
?> 
```

输出 ：

```
array(4) {
  ["question"]=>
  string(15) "test question 1"
  ["question"]=>
  string(15) "test question 2"
  ["question"]=>
  string(15) "test question 3"
  ["question"]=>
  string(15) "test question 4"
} 
```

您可以使用一些数组函数，例如：array_values、array_map 来重建和验证您的数组。

# c++ - 警告：链接器路径没有库 -lpthread 的真实文件

> ID：15887188
> 
> 赞同：2
> 
> 时间：2013-04-08T19:22:08.077
> 
> 标签：c++, sqlite, linker

我收到以下消息，试图在 MingW64 上编译 sqlite3

```
*** Warning: linker path does not have real file for library -lpthread.
*** I have the capability to make that library automatically link in when
*** you link to this library.  But I can only do this if you have a
*** shared version of the library, which you do not appear to have
*** because I did check the linker path looking for a file starting
*** with libpthread and none of the candidates passed a file format test
*** using a file magic. Last file checked: d:/mingw/bin/../lib/gcc/x86_64-w64-mingw32/4.7.1/../../../../x86_64-w64-mingw32/lib//libpthread.dll.a
*** The inter-library dependencies that have been dropped here will be
*** automatically added whenever a program is linked with this library
*** or is declared to -dlopen it. 
```

这是什么意思？我需要 libpthread.dll 吗？我在哪里可以得到它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T19:25:54.597

它不一定意味着您没有`libpthread.dll`，但链接器正在搜索的路径不包含此库。你必须要么

*   找到文件及其链接选项的路径或
*   如果它不存在，请收集库并安装它。

在您的计算机上搜索该文件，如果它不存在，您将需要获取它。

[这篇](http://mingw-users.1079350.n2.nabble.com/missing-pthreadGC2-dll-td5533063.html)文章可能会被证明是有用的。

# ios - 使用简单案例获取错误域 = NSCocoaErrorDomain 代码 = 261

> ID：15887189
> 
> 赞同：3
> 
> 时间：2013-04-08T19:22:09.537
> 
> 标签：ios, nsstring, plist, runtime-error, initwithcontentsoffile

我有以下代码。 `path`是我的包中文件的包路径。

```
 _dictionary = [[NSMutableDictionary alloc] initWithContentsOfFile:path];
    NSError *error;
    NSString *string = [[NSString alloc] initWithContentsOfFile:path encoding:NSUTF8StringEncoding error:&error]; 
```

我不明白的是`_dictionary`变量看起来不错。它能够获取内容并将其转换为字典。但是，将文件转换为字符串的简单情况给了我一个错误：

```
$2 = 0x12eb3d50 Error Domain=NSCocoaErrorDomain Code=261 "The operation couldn’t be completed. (Cocoa error 261.)" UserInfo=0x12eb3550 {NSFilePath=/Users/ben/Library/Application Support/iPhone Simulator/6.1/Applications/82CBC7A6-2C4C-4330-9B29-7940C961B5B7/FMA.app/Licenses.plist, NSStringEncoding=4} 
```

如何将 PLIST 文件作为简单的 XML 字符串读取？我检查了编码并且文件是 UTF-8 编码的（也由 XML 内容标题指示）。如果我将编码更改为其他内容，我不会收到错误消息，但字符串是乱码！有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T19:54:26.547

如果 Xcode 将 plist 文件复制到您的应用程序包中，那么您应该确保它被复制为 XML 文件而不是二进制文件（这似乎是现在的默认设置）。

在 Xcode 中，转到您的项目，选择目标，转到构建设置，搜索“属性”，将“属性列表输出编码”的下拉设置更改为 XML。

# python - Python伪逆和向量的行列式

> ID：15887191
> 
> 赞同：2
> 
> 时间：2013-04-08T19:22:14.207
> 
> 标签：python, vector, numpy, pandas, linear-algebra

如何计算向量的伪逆以及行列式？（最好使用 numpy 或更好的 pandas）

我试过这个但它不起作用：

```
import numpy
vect = [1, 2, 3, 4]
numpy.linalg.pinv(vect) 
```

但我得到这个错误：

```
---------------------------------------------------------------------------
LinAlgError                               Traceback (most recent call last)
<ipython-input-106-e362654e383f> in <module>()
     19 vect = [1, 2, 3, 4]
---> 20 print(np.linalg.pinv(vect))

C:\Python27\lib\site-packages\numpy\linalg\linalg.pyc in pinv(a, rcond)
   1544     _assertNonEmpty(a)
   1545     a = a.conjugate()
-> 1546     u, s, vt = svd(a, 0)
   1547     m = u.shape[0]
   1548     n = vt.shape[1]

C:\Python27\lib\site-packages\numpy\linalg\linalg.pyc in svd(a, full_matrices, compute_uv)
   1269     """
   1270     a, wrap = _makearray(a)
-> 1271     _assertRank2(a)
   1272     _assertNonEmpty(a)
   1273     m, n = a.shape

C:\Python27\lib\site-packages\numpy\linalg\linalg.pyc in _assertRank2(*arrays)
    153         if len(a.shape) != 2:
    154             raise LinAlgError, '%d-dimensional array given. Array must be \
--> 155             two-dimensional' % len(a.shape)
    156 
    157 def _assertSquareness(*arrays):

LinAlgError: 1-dimensional array given. Array must be             two-dimensional 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T19:27:50.667

也许你想要这个？

```
>>> np.linalg.pinv([[1, 2, 3, 4]])
array([[ 0.03333333],
       [ 0.06666667],
       [ 0.1       ],
       [ 0.13333333]]) 
```

注意额外的一组括号。正如错误消息所暗示的，您只能采用矩阵的伪逆。如果你只有一个向量，你需要把它变成一个 1 行矩阵。

# android - 语音语音识别android删除谷歌屏幕和麦克风按钮

> ID：15887192
> 
> 赞同：1
> 
> 时间：2013-04-08T19:22:19.680
> 
> 标签：android, speech-recognition

我正在使用来自 Android API 的语音识别。

我成功地遵循了本教程： [http ://code4reference.com/2012/07/tutorial-android-voice-recognition/#comment-335](http://code4reference.com/2012/07/tutorial-android-voice-recognition/#comment-335)

但我有一个未解决的问题。

如何删除调用 RecognizerIntent 时出现的屏幕？

我正在谈论删除我正在使用语音识别的建议的谷歌和麦克风按钮。

我需要移除这个小屏幕，因为在识别我的声音时我需要在屏幕上做其他事情。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T21:55:14.663

您需要编写一个调用`createSpeechRecognizer`. [您可以在我在Android Speech Recognition as a service on Android 4.1 & 4.2 上的](https://stackoverflow.com/questions/14940657/android-speech-recognition-as-a-service-on-android-4-1-4-2/14950616#14950616)回答中了解如何做到这一点

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T19:27:38.823

您需要在比此示例更低的级别上工作。此示例所做的是启动一个应用程序，为您进行语音识别并将结果发送给您。该应用程序正在绘制 UI，您无法停止它。您需要做的是针对实际执行语音识别的服务编写一个应用程序（基本上，正是该意图在做什么）。您可能可以在 Android 键盘代码中找到这样的示例，因为它们提供了针对 Google 语音的自定义 UI。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T19:25:28.540

你不能做这个。屏幕不是由你的应用显示，而是由语音识别接口显示，你无法控制。

无论如何，该屏幕是设备上语音识别的标准，用户对此很熟悉。删除它并进行语音识别将是一种反模式。有了屏幕，用户就会知道语音识别处于活动状态，并且麦克风在提供反馈时正在拾取声音。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T19:47:50.560

使用`SpeechRecognizer`. Intent 机制类似。

为方便起见，请使用`recognizeDirectly`此[帮助程序类中的方法](https://github.com/gast-lib/gast-lib/blob/master/library/src/root/gast/speech/SpeechRecognizingActivity.java)

# redis - 为什么 NuGet 上没有 SignalR.Redis？

> ID：15887195
> 
> 赞同：1
> 
> 时间：2013-04-08T19:22:22.567
> 
> 标签：redis, nuget, signalr

首先这是我的第一个问题，我想遵守规则，但如果我犯了错误，我很抱歉:) 我的问题是我想扩展我的网站，它使用 SignalR，我想下载 SignalR.Redis来自 NuGet。但它说没有这样的东西，但我发现一些教程女巫以 NuGet 上提到的包的形式谈论对 Redis 的支持。由于缺少包裹的原因，我在互联网上寻找，但我没有找到任何相关信息。还是我做错了什么？你能帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T19:30:37.593

SignalR Redis 当前不可用。1.1 的测试版即将发布，其中包含 Redis 扩展包。

# php - 如何将 JQuery 值传递到下一个 PHP 页面？

> ID：15887205
> 
> 赞同：0
> 
> 时间：2013-04-08T19:22:56.107
> 
> 标签：php, jquery, variables

背景信息：我正在使用 Spectrum.js [http://bgrins.github.io/spectrum/](http://bgrins.github.io/spectrum/)作为颜色选择器。为了在表单中使用它，它被设置为输入类型文本。这在表单中用于将颜色传递给 php 解析器，然后将值与 .pov povray 文件组合，然后在 unix 框上呈现。

我正在尝试将此颜色选择器中的值传递到下一个 php 页面。我花了几个小时试图找到解决方案，但一无所获。

奇怪的是我将值“警告”到我的 tester_done.php 页面，我可以在警告中看到正确的值。当我将按钮仅用作按钮时，此方法有效。当我将按钮类型更改为提交时，它不再起作用。单击提交时，我想查看颜色选择器的值。非常感谢任何帮助，因为我正在拔头发！我只想将 tester.php 中的值发布到 tester_done.php 并且我不知道为什么当我提醒我得到正确的值时它不起作用，但是当我尝试更改按钮以提交以便值发布所有我得到的是 rgb<0,0,0>。

tester.php 的代码：

```
 <form action="tester_done.php" method="post">
<input type='text' class = "basic" name ="field1" id = "field1"/>
<input type='text' class = "basic2" name ="field2" id = "field2"/>
<input type="button" value="Submit" id="send">
</form>

 <script type="text/javascript">
$(".basic").spectrum({
    preferredFormat: "rgb",
    color: "#ffcccc"
}); 

$(".basic2").spectrum({
    preferredFormat: "rgb",
    color: "#ff0"
}); 

jQuery(function(){
    var field1 = $('#field1');
    var field2 = $('#field2');
    $('#send').click(function(){

        jQuery.ajax({
            type: "POST",
            url: "tester_done.php",
            data: {field1value: field1.val(), field2value: field2.val()},
            dataType: "html",
            success: function(data){
                alert(data);
            }
        });
    });
});

</script> 
```

tester_done.php 的代码：

```
 <?php
$base_value=255;
$characters = array("(", "r", "g", "b", ")");

$field1value = isset($_POST['field1value'])? $_POST['field1value'] : ''; 
$nfield1value = str_replace($characters, "", $field1value);
$nsfield1value = $nfield1value;
$nsf1arr = array_map("intval", explode(", ", $nsfield1value));
$c_body_r = $nsf1arr[0] / $base_value; 
$c_body_r_round = round ($c_body_r, 6);
$c_body_g = $nsf1arr[1] / $base_value; 
$c_body_g_round = round ($c_body_g, 6);
$c_body_b = $nsf1arr[2] / $base_value; 
$c_body_b_round = round ($c_body_b, 6);
$c_body = "rgb<".$c_body_r_round.", ".$c_body_g_round.", ".$c_body_b_round.">";
echo $c_body;

$field2value = isset($_POST['field2value'])? $_POST['field2value'] : ''; 
$nfield2value = str_replace($characters, "", $field2value);
$nsfield2value = $nfield2value;
$nsf2arr = array_map("intval", explode(", ", $nsfield2value));
$c_top_r = $nsf2arr[0] / $base_value; 
$c_top_r_round = round ($c_top_r, 6);
$c_top_g = $nsf2arr[1] / $base_value; 
$c_top_g_round = round ($c_top_g, 6);
$c_top_b = $nsf2arr[2] / $base_value; 
$c_top_b_round = round ($c_top_b, 6);
$c_top = "rgb<".$c_top_r_round.", ".$c_top_g_round.", ".$c_top_b_round.">";
echo $c_top;
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T19:26:18.987

您也可以使用`submit`：

```
$('form').submit(function(){
    jQuery.ajax({
        type: "POST",
        url: "tester_done.php",
        data: {field1value: field1.val(), field2value: field2.val()},
        dataType: "html",
        success: function(data){
            alert(data);
        }
    });
}); 
```

您还可以像以前一样将按钮设为简单按钮（不是提交），然后使用 JavaScript 提交表单：

```
$('#send').click(function(){
    jQuery.ajax({
        type: "POST",
        url: "tester_done.php",
        data: {field1value: field1.val(), field2value: field2.val()},
        dataType: "html",
        success: function(data){
            alert(data);
        }
    });
    $('form').submit();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T19:43:18.223

你不需要 JQuery！"<form action="tester_done.php" method="post">" 负责发布*表单***输入**标签中包含的数据。

 *但是，如果您想要一个 ajax 响应，我建议您去掉***action***属性，并在 $.ajax 调用的数据字段中使用***.serializeArray()***以将*表单*中的数据作为 url 参数传递。

**可能的用法：**给定表单 id="NewForm", $.ajax({type: "POST", url: "tester_done.php", ***data: $('#NewForm').serializeArray()*** ,dataType: 'html' ,成功：函数（数据）{警报（数据）；}}）；

***注意：***使用此方法时，传递的参数名称与您的html表单中的输入标签名称相同，即对于field1输入，tester_done.php中的$_POST['field1']。*

# python-3.x - 在 windows 机器上的 python 3.3 中使用 celery

> ID：15887206
> 
> 赞同：0
> 
> 时间：2013-04-08T19:23:01.010
> 
> 标签：python-3.x, subprocess, celery

目前我正在做一个需要使用 Python 3.3 和 celery 的项目。我一直在学习第一步教程，但由于 _subprocess 等库的问题，我不断收到错误消息。是否有人对此有更多信息。我还尝试用 _winapi 替换 _subprocess，结果出现更多错误。我愿意接受任何建议。对mather的任何帮助将不胜感激。

ps：我正在使用Windows机器。我使用 RabbitMq 作为经纪人

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T12:47:56.647

celery 似乎还不能在 windows 上与 python3.3 完美配合。我在 linux fedora 上运行了完全相同的设置并让它工作。这个问题应该在包的未来开发中修复，所以请耐心等待。

# php - 为 XMLReader 安装 php-xml 时，php54 common 与 php53 common 冲突

> ID：15887208
> 
> 赞同：1
> 
> 时间：2013-04-08T19:23:24.293
> 
> 标签：php, linux, amazon-web-services, centos, redhat

具体来说，在 Amazon Linux 上，错误：php54-common 在发出时与 php-common-5.3.23-1.33.amzn1.x86_64 冲突

sudo yum 安装 php-xml

我卸载了 php54-common 并很好地安装了 php-xml，但它安装了与 php 5.4 不兼容的 php53-common。

如果我想继续使用 PHP 5.4，Amazon Linux 似乎不支持 php-xml

--skip-conflicts 不能解决问题。

我想知道是否有人有建议或同意我的理论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T19:30:34.550

我找到了一个可以工作的包 php54-xml。我以为我已经检查过了，但猜不到。

# javascript - 在Javascript中增加一个变量

> ID：15887210
> 
> 赞同：-2
> 
> 时间：2013-04-08T19:23:29.710
> 
> 标签：javascript, increment

我正在尝试使用 Javascript 增加一个变量，但我不太明白我做错了什么。我需要改变什么？

```
function init(){
    var a = 0;
}

function repeat(){
    a = a+1;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T19:24:36.760

你想要这个吗 ？

```
var a;
function init(){
    a = 0;
}
function repeat(){
    a = a+1;
} 
```

如果`a`在函数中声明，则在该函数之外不可用。

请参阅[var 上的 MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/var)：

> 用 var 声明的变量的范围是封闭函数，或者，对于在函数外部声明的变量，全局范围（绑定到全局对象）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T19:26:41.053

```
function init(){
  var a=0;

  a = repeat(a);
}
function repeat(a){
 return a+1;
} 
```

# r - 相关矩阵的热图或绘图

> ID：15887212
> 
> 赞同：8
> 
> 时间：2013-04-08T19:23:35.653
> 
> 标签：r, lattice

我试图从相关矩阵中绘制一个图，并使用三种颜色来表示使用库格的相关系数。

```
library(lattice)

levelplot(cor) 
```

我得到以下情节：

![相关矩阵图](https://i.stack.imgur.com/NkevY.png)

该图仅适用于我拥有的数据的一个子集。当我使用整个数据集（400X400）时，它变得不清楚并且颜色没有正确显示并且显示为点。对于大型矩阵，是否有可能以平铺形式获得相同的结果？

我尝试使用 pheatmap 函数，但我不希望我的值被聚类，只想以平铺形式清楚地表示高值和低值。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-08T19:59:56.260

如果要绘制相关图，请使用 corrplot 库，因为它具有很大的灵活性，可以为相关性创建类似热图的图形

```
library(corrplot)
#create data with some correlation structure
jnk=runif(1000)
jnk=(jnk*100)+c(1:500, 500:1)
jnk=matrix(jnk,nrow=100,ncol=10)
jnk=as.data.frame(jnk)
names(jnk)=c("var1", "var2","var3","var4","var5","var6","var7","var8","var9","var10")

#create correlation matrix
cor_jnk=cor(jnk, use="complete.obs")
#plot cor matrix
corrplot(cor_jnk, order="AOE", method="circle", tl.pos="lt", type="upper",        
tl.col="black", tl.cex=0.6, tl.srt=45, 
         addCoef.col="black", addCoefasPercent = TRUE,
         p.mat = 1-abs(cor_jnk), sig.level=0.50, insig = "blank") 
```

![在此处输入图像描述](https://i.stack.imgur.com/LEqur.png) 上面的代码只为具有 > abs(0.5) 相关性的相关性添加颜色，但您可以轻松更改它。最后，您还可以通过多种方式配置绘图的外观（更改颜色渐变、显示相关性、显示全矩阵与仅半矩阵等）。order 参数特别有用，因为它允许您根据 PCA 对相关矩阵中的变量进行排序，因此它们是根据相关性的相似性进行排序的。

例如，对于正方形（类似于您的原始图） - 只需将方法更改为正方形： ![在此处输入图像描述](https://i.stack.imgur.com/uEkmc.png)

编辑：@卡森。您仍然可以将此方法用于合理的大相关矩阵：例如下面的 100 个变量矩阵。除此之外，我看不出在没有子集的情况下对具有这么多变量的相关矩阵进行图形表示有什么用，因为这将很难解释。 ![在此处输入图像描述](https://i.stack.imgur.com/ZbWkv.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T20:16:31.483

@Lucas 在这里提供了很好的建议，因为 corrplot 对于可视化相关矩阵非常有用。但是，它没有解决绘制大型相关矩阵的原始问题。事实上，当试图可视化这么大的相关矩阵时，corrplot 也会失败。对于一个简单的解决方案，您可能需要考虑减少变量的数量。也就是说，我建议查看您知道对您的问题很重要的变量子集之间的相关性。试图理解这么多变量的相关结构将是一项艰巨的任务（即使您可以将其可视化）！

# windows - 禁用 HtmlHelp 中的打印按钮

> ID：15887213
> 
> 赞同：5
> 
> 时间：2013-04-08T19:23:41.060
> 
> 标签：windows, winapi, mfc, chm, html-help

我正在对旧版 MFC 应用程序执行维护。我们需要禁用帮助对话框中的打印按钮。如果用户按下帮助窗口中的“打印”按钮，则没有打印机连接到系统并且应用程序崩溃。

该代码只是使用标准`HtmlHelpA`方法来调出 Windows 帮助对话框：

```
void CNiftyView::OnHelp() 
{
   CString csHelpFile;
   csHelpFile.Format( "%s/NiftyHelp.chm", NiftyDoc::GetHelpPath() );
   ::HtmlHelpA( m_hWnd, csHelpFile, HH_HELP_CONTEXT, IDH_NIFTY_SECTION );
} 
```

我发现我们可以在帮助 HTML 样式表 ( [http://www.sagehill.net/docbookxsl/HtmlHelp.html](http://www.sagehill.net/docbookxsl/HtmlHelp.html) ) 中使用一些代码来抑制打印按钮。但这需要重新编译帮助文件，我不想这样做。我还发现一些信息说您可以通过操作每个窗格的 HH_WINTYPE 结构来自定义 HTML 帮助查看器，但没有关于您如何实际执行此操作的信息（[http://msdn.microsoft.com/en-us/library/ms524435%28v =vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms524435%28v=vs.85%29.aspx)）。

有没有办法以编程方式禁用 HTML 帮助查看器中的打印按钮？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T12:28:35.397

您可以在没有打印按钮的情况下显示 CHM 帮助文件，如下所示：

*   `HtmlHelp`使用命令调用[`HH_GET_WIN_TYPE`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms670087(v=vs.85).aspx)以获取指向[`HH_WINTYPE`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms670087(v=vs.85).aspx)包含在 CHM 文件中定义的 HTML 帮助查看器参数的结构的指针。
*   复制返回的结构。（直接修改返回的结构是行不通的。）
*   修改[`fsToolBarFlags`](http://msdn.microsoft.com/en-us/library/ms524365(v=vs.85).aspx)结构的成员以排除该`HHWIN_BUTTON_PRINT`值。
*   使用命令将修改后的`HH_WINTYPE`结构传回`HtmlHelp`函数[`HH_SET_WIN_TYPE`](http://msdn.microsoft.com/en-us/library/ms670093(v=vs.85).aspx)。

示例 C++ 代码*：

```
HH_WINTYPE *pwt = NULL;
LPCWSTR pszFile = L"MyFile.chm";
LPCWSTR pszWin = L"MyFile.chm>Main"; // "Main" is the window type defined in the CHM file

// Get the window type definition
HWND hWndHelp = HtmlHelp(NULL, pszWin, HH_GET_WIN_TYPE, (DWORD) &pwt);

if (pwt) {
    // Copy the contents of the returned structure
    HH_WINTYPE wt = *pwt;

    // Remove the "Print" toolbar button from the window definition
    wt.fsToolBarFlags &= ~HHWIN_BUTTON_PRINT;
    wt.cbStruct = sizeof(wt); // force the correct size

    // Set the new window type
    hWndHelp = HtmlHelp(NULL, pszFile, HH_SET_WIN_TYPE, (DWORD) &wt);

    // Display help
    hWndHelp = HtmlHelp(NULL, pszFile, HH_DISPLAY_TOPIC, NULL);
} 
```

^(我几乎不懂 C++，所以这是非常业余的代码。请自由编辑和改进它。)

`HH_WINTYPE`更多使用和`HH_GET_WIN_TYPE`的示例`HH_SET_WIN_TYPE`：
[如何以编程方式创建三窗格 HTML 帮助窗口](http://esupport.lenovo.com/mss/mss.pl?doctype=kb&docid=MTgzMTkx)
[如何使用托管 Visual C# 应用程序中的非托管 HTML 帮助 API](http://support.microsoft.com/kb/317406)

# regex - 每个文字上的 Regex.Split 字符串（包含在结果中）

> ID：15887214
> 
> 赞同：1
> 
> 时间：2013-04-08T19:23:46.543
> 
> 标签：regex, c#-4.0

```
string s = "123wWdf4d556e"; 
```

拆分后的结果应该是：

```
"123", "w", "W", "d", "f", "4", "d", "556", "e" 
```

逻辑是：拆分为每个整数和单个字符。

我已经尝试过这样的事情，但它不起作用。一个解释会很好，所以我可以理解为什么它不起作用。:)

```
string[] result = Regex.Split(s, "\w+(?=[a-zA-Z]"); 
```

**编辑：**编辑上述结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T19:29:53.830

使用*后*视：

```
string[] result = Regex.Split(s, "(?<=[a-zA-Z])"); 
```

你的不起作用，因为你试图拆分单词字符，并且在拆分过程中，这些字符将从结果中删除。可以这样想：当您在逗号上拆分 CSV 字符串时，逗号是否保留在结果中？同样的事情也在你的尝试中发生。

使用断言，就像你正在尝试和我正在展示的那样，因为它类似于在你正在寻找的角色旁边的空白处分裂。这是因为断言是“零宽度”——它们不消耗任何东西。所以上面的模式基本上是说，“在字母字符之后的空白处分割。”

根据您的编辑，您可以使用相同的概念，但稍微扩展一下：

```
string[] result = Regex.Split(s, @"(?<=\d)(?=[a-zA-Z])|(?<=[a-zA-Z])(?=\d)|(?<=[a-zA-Z])(?=[a-zA-Z])"); 
```

您使用交替 ( `|`) 来设置要拆分的变体：整数后跟字母 ( `(?<=\d)(?=[a-zA-Z])`)；字母后跟一个整数 ( `(?<=[a-zA-Z])(?=\d)`)；任意两个连续的字母 ( `(?<=[a-zA-Z])(?=[a-zA-Z])`)。每个变体都使用断言来分割目标字符之间的空隙。使用lookbehind 和lookahead 的组合可以让您在这个确切的空白处进行拆分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T19:32:33.250

更新：这适用于*match*，而不是*split*。

如果您使用“忽略大小写”标志 (i)，则以下正则表达式将起作用。

```
\d*[a-z] 
```

**解释**

您的正则表达式贪婪地捕获了所有单词，直到它后面跟着一个字母。由于您使用了前瞻，它没有捕获该字母。

我的正则表达式捕获所有数字（如果有）和数字后面的第一个字母。您可以在[www.debuggex.com](http://www.debuggex.com/?re=%5Cd%2a%5Ba-z%5D&flags=i&str=123wWdf4d556e)上看到它的运行情况。请注意，`f`已捕获，您从预期结果中省略了它。我认为这是一个错误。

# c# - 具有多个 OR 条件的 Linq to Entity Join 表

> ID：15887223
> 
> 赞同：13
> 
> 时间：2013-04-08T19:24:24.797
> 
> 标签：c#, linq, entity-framework, linq-to-entities

我需要编写一个可以获取以下 SQL 查询的 Linq-Entity 状态

```
SELECT  RR.OrderId
FROM    dbo.TableOne RR
        JOIN dbo.TableTwo  M ON RR.OrderedProductId = M.ProductID OR RR.SoldProductId= M.ProductID
WHERE   RR.StatusID IN ( 1, 4, 5, 6, 7 ) 
```

我坚持以下语法

```
 int[] statusIds = new int[] { 1, 4, 5, 6, 7 };
            using (Entities context = new Entities())
            {
                var query = (from RR in context.TableOne
                             join M in context.TableTwo on new { RR.OrderedProductId, RR.SoldProductId} equals new { M.ProductID }
                             where RR.CustomerID == CustomerID 
                             && statusIds.Any(x => x.Equals(RR.StatusID.Value))
                             select RR.OrderId).ToArray();
            } 
```

这给了我以下错误

**错误 50 连接子句中的表达式之一的类型不正确。对“加入”的调用中的类型推断失败。**

如何为表执行多条件联接。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-08T19:37:42.310

您不必使用连接语法。在子句中添加谓词`where`具有相同的效果，您可以添加更多条件：

```
var query = (from RR in context.TableOne
             from M in context.TableTwo 
             where RR.OrderedProductId == M.ProductID
                   || RR.SoldProductId == M.ProductID // Your join
             where RR.CustomerID == CustomerID 
                   && statusIds.Any(x => x.Equals(RR.StatusID.Value))
             select RR.OrderId).ToArray(); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-08T19:38:00.837

将查询语法从使用更改`join`为使用附加`from`子句

```
 var query = (from RR in context.TableOne
               from M in context.TableTwo.Where(x => x.ProductID == RR.OrderedProductId || x.ProductID == RR.SoldProductId)
               where statusIds.Any(x => x.Equals(RR.StatusID.Value))
               select RR.OrderId).ToArray(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-11T04:40:20.930

多个连接：

```
var query = (from RR in context.TableOne
             join M in context.TableTwo on new { oId = RR.OrderedProductId,  sId = RR.SoldProductId} equals new { oId = M.ProductID, sId = M.ProductID }
             where RR.CustomerID == CustomerID 
             && statusIds.Any(x => x.Equals(RR.StatusID.Value))
             select RR.OrderId).ToArray(); 
```

# php - 如何知道 imagick 是否抛出错误 - PHP

> ID：15887228
> 
> 赞同：6
> 
> 时间：2013-04-08T19:24:39.670
> 
> 标签：php, imagick

我目前正在`imagick`我的网站上使用图像处理。我已经正确安装并且运行良好。这是我的起始代码-：

```
$image = new imagick($filename); $geo=$image->getImageGeometry();  
$image->setImageInterlaceScheme(2);  $image->setImageCompressionQuality(85);
$image->setImageBackgroundColor('white'); $image = $image->flattenImages(); 
$image->setImageFormat('jpg');   $image->stripImage(); 
```

在此之后，我做剩下的部分。现在假设它抛出一个错误，我该如何编码。我尝试添加`if(!$image){ echo 'error' exit(); }`后`$image = new imagick($filename)`但徒劳无功。

请帮助...谢谢大家:)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-08T19:26:23.067

如果发生错误，Imagick 会抛出一个`ImagickException`你可以捕获的：

```
 try {
        $image = new Imagick($filename);
        $geo = $image->getImageGeometry();  
        $image->setImageInterlaceScheme(2);  
        $image->setImageCompressionQuality(85);
        $image->setImageBackgroundColor('white'); 
        $image = $image->flattenImages(); 
        $image->setImageFormat('jpg');   
        $image->stripImage();
    } catch (ImagickException $e) 
{
        var_dump($e);
    } 
```

如需进一步参考，请参见[此处](http://php.net/manual/en/class.imagick.php)。

# php - 在 CakePHP 中创建 HABTM 记录时出现问题

> ID：15887233
> 
> 赞同：1
> 
> 时间：2013-04-08T19:24:56.123
> 
> 标签：php, cakephp, cakephp-2.0

在我的 CakePHP 应用程序中创建 HABTM 记录时遇到问题。基本上，我有用户喜欢的对象，就像 Facebook 一样。这三个表是：

*   `users`
*   `objects`
*   `objects_users`

我正在尝试使用以下代码创建 HABTM 记录：

```
$data = array(
    'Object' => array(
        'id' => $object_id
    ),
    'User' => array(
        'id' => $this->Auth->user('id')
    )
);
$this->Object->User->save($data); 
```

但我不断收到以下错误消息：

> 错误：SQLSTATE [23000]：完整性约束违规：1452 无法添加或更新子行：外键约束失败（`dbprefix`. `objects_users`, CONSTRAINT `objects_users_ibfk_2`FOREIGN KEY ( `user_id`) REFERENCES `users`( `id`) ON DELETE CASCADE ON UPDATE CASCADE）

当我知道两个相关 ID 时，如何以编程方式在控制器中创建 HABTM 记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T19:52:16.463

如果您有表'objects_users'，那么对象和用户之间的HABTM 模型将被称为ObjectsUser。

您可以使用以下代码在 objects_users 表中创建记录：

```
$data = array();
$data['ObjectsUser']['user_id'] = $user_id;
$data['ObjectsUser']['object_id'] = $object_id;

// From Users Controller use following code to insert the document
$this->User->ObjectsUser->save($data);

// From Objects Controller use
$this->Object->ObjectsUser->save($data); 
```

要使上述两个插入工作，您必须在两个模型之一中定义关系，如下所示：

```
// In User.php Model
public $hasAndBelongsToMany = 'Object';

// In Object.php Model
public $hasAndBelongsToMany = 'User'; 
```

让我知道这是否适合您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T19:52:43.577

`users`错误信息表明您提供的 User-id 在表中不存在。

检查您尝试通过以下方式保存的数据：

```
debug($data); 
```

并从调试面板检查您的 SQL 语句

# c++ - 如何从指针访问数组？

> ID：15887234
> 
> 赞同：1
> 
> 时间：2013-04-08T19:25:00.563
> 
> 标签：c++, pointers

我试图了解指针是如何工作的，但我不知道如何使用仅指向第一个元素的指针来访问所有数组

```
int myArray[10];
for(int i=0; i<10; i++)
{
    myArray[i] = 11*i;
}

int *p;
p = myArray;

//Now how do I access the complete array using the variable p

cout<<*p; //This only prints the first value, how to print all the values 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T19:26:33.593

您必须使用 while 或 for。

```
int i = 0;
while (i < 10)
  {
    cout << p[i];
    i += 1;
  } 
```

指针和数组的工作方式相同。数组只不过是指向您分配的第一个元素的指针。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T19:30:41.313

除了 thr 声明，数组和指针使用相同的语法（它们在内存中不同，这意味着它们仍然需要区别对待）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-08T19:31:19.570

像这样使用，

```
int *p;
p = myArray;
for(int i=0;i<10;i++)
{
    cout<<*(p+i);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-08T19:32:50.110

例如，如果你想访问 pos 5，你可以写：

```
...
int *p;
p = myArray;

cout << p[5]; 
```

由于编译器知道 p 是一个指向 int 的指针，因此它将为每一步添加一个 int 的大小（在这种情况下为 4 个字节）。只要您不使用指向 void 的指针，编译器就会为您执行此操作。您仍然必须跟踪数组的长度，以免超过它，因为指针不会这样做。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-08T19:31:00.470

第一个元素指向数组中元素的第一个内存位置。所以这：

```
myArray[0]; 
```

和

```
myArray; 
```

指向同一个位置。您可以在指针上使用索引，就像填充数组一样。所以这：

```
int *p = myArray;
cout << p[0];
cout << p[1]; 
```

将访问您的其他元素。您可以使用`for`循环来访问数组中的所有元素，就像您首先填充它一样。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-08T19:33:30.753

您可以将数组的名称视为指向其第一个元素的指针。因此，该行`p = myArray;`只是将数组第一个元素的地址复制`myArray`到`p`.

现在该行`cout<<*p;`显然显示了 所指向的值`p`，它是数组的第一个元素。

`for`要显示所有元素，您可以像以前一样简单地使用循环。

# sql - SQL 查询返回名称

> ID：15887237
> 
> 赞同：-3
> 
> 时间：2013-04-08T19:25:13.897
> 
> 标签：sql

我有以下查询可以正常返回，但是`id`我可以让它显示而不是显示`default_ps_products_manufacturers.name`

```
SELECT  `manufacturer_id` 
FROM  `default_ps_products` 
INNER JOIN  `default_ps_products_manufacturers` ON default_ps_products.manufacturer_id = default_ps_products_manufacturers.id 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T19:27:10.837

所以只需像这样添加您要选择的列

```
SELECT  default_ps_products_manufacturers.name  
FROM  default_ps_products 
INNER JOIN  default_ps_products_manufacturers 
ON default_ps_products.manufacturer_id = default_ps_products_manufacturers.id 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T19:27:32.413

您是否尝试在 ? 中包含该列`SELECT`：

```
SELECT m.name
FROM  `default_ps_products` p
INNER JOIN  `default_ps_products_manufacturers` m
    ON p.manufacturer_id = m.id 
```

# asp-classic - 使用 FirstData GGe4 进行 ASP 经典编程

> ID：15887238
> 
> 赞同：0
> 
> 时间：2013-04-08T19:25:17.357
> 
> 标签：asp-classic, vbscript, firstdata

有没有人开发了一个使用 ASP Classic/VBScript/JavaScript 与 FirstData GGe4 交互的 UI？我已经工作了好几天，一直在转动我的轮子。

任何帮助将不胜感激！谢谢你，克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T23:47:58.433

我已将 FirstData 用于卡片处理的 API 集成到我的 ASP CMS 中。以下是三个相关的 ASP 文件： [http](http://www.oceanmedia.net/files/HK-FirstData.zip) ://www.oceanmedia.net/files/HK-FirstData.zip 。请注意名为“i_firstdata_proc.asp”的那个。这是我从 FirstData 获得的文件，但我可能对其进行了一些更改，所以请注意这一点。希望这可以帮助！斯科特

# java - 在java中更改类的数组的值

> ID：15887241
> 
> 赞同：0
> 
> 时间：2013-04-08T19:25:23.200
> 
> 标签：java, arrays, class, initialization

我正在编写一个在整个地图中执行星搜索的程序。我创建了一个包含地图所有节点的类。

```
public Node {
   Node up_node, right_node, down_node, left_node;
}

public class Star {
    public static void main(String args[]) {
        Node a=new Node();
        Node b=new Node();
        Node h=new Node();
        Node here=new Node();

        Node[] NextNode;
        NextNode = new Node[10];
        for(int i=0;i<10;i++) {
            NextNode[i]=new Node();
        }
        int j=0;
        a.up_node=h;
        a.right_node=b;

        b.left_node=a;

        h.down_node=a;

        //if certain conditions are met
        NextNode[j].here_node=a.up_node;
        //what i was hoping to do is copy the node a.up which is h
    }
} 
```

在这种情况下进入 NextNode[0]。但是它不断返回某种内存地址：test.Node@10b28f30: test 是包的名称，请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T19:30:09.287

@override toString() 方法来显示你的类的内部属性。

默认情况下，java 显示完整的类名@hashCode 值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T19:37:57.717

Java 中的变量是对象*引用*而不是实际*对象*。`NextNode[j].here_node = a.up_node;`将生成`NextNode[j].here_node`并`a.up_node`指向同一个对象。这不是你想要的吗？

如果你想制作一个全新的对象副本，那么你可以在`Node`类中实现它：

```
public class Node {
  Node up_node, right_node, down_node, left_node;

  public Node clone() {
    Node ret = new Node();

    // copy the properties
    ret.up_node = this.up_node;
    ...

    return ret;
  }
} 
```

现在

```
NextNode[j].here_node = a.up_node.clone(); 
```

将制作一个副本（尽管它只是一个浅层副本——该副本将通过其字段指向相同的对象，而不是它们的副本）。

我假设您对返回“地址”的代码感到困惑是因为您试图打印一个节点，例如

```
System.out.println(a.up_node); 
```

你会得到类似的东西`test.Node@10b28f30`，但试试

```
System.out.println(NextNode[j].here_node); 
```

你应该得到完全相同的字符串，表明它们指向同一个对象。

为了得到更好`Node`的东西，你必须重写`toString()`. 这是一个示例，它将给每个人`Node`一个唯一的数字：

```
public class Node {
  Node up_node, right_node, down_node, left_node; 

  // how many nodes were created
  private static int count = 0;

  // the number of this node
  private int number;

  public Node() {
    // increment the number of nodes created
    ++Node.count;
    // assign that number to this node
    this.number = Node.count;
  }

  public String toString() {
    return "Node #" + this.number;
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T19:33:30.890

我们知道，我们编写的每个班级都是`Object`班级的孩子。当我们打印 an 的孩子时，`Object`它会打印它的`toString()`方法。默认情况下，它是内存位置的哈希值。所以它打印出一些奇怪的东西。如果我们`@overriding` `toString`方法返回对我们更有意义的东西，那么我们可以解决这个问题。如果我们可以以某种方式命名我们的节点类，我认为我们可以轻松地跟踪它们

```
class Node(){
      String nameOfNode;    
      //contractor to keep track of where it goes. 
      public Node(String a){
             nameOfNode=a;

      }
      //when we will print a Node it is going to print its name
      public String toString(){
              return nameOfNode;
      }
} 
```

然后它将打印节点的名称。它会停止显示那个奇怪的内存地址。

`new Node()`并用不同的名字替换你`new Node("a name")`

# jquery - 扩展引导选项卡

> ID：15887247
> 
> 赞同：0
> 
> 时间：2013-04-08T19:25:40.117
> 
> 标签：jquery, twitter-bootstrap

使用最新版本的 Bootstrap，我正在寻找有关选项卡的帮助。这就是我想要做的......

我的网站标题中有一个链接。单击后，查看器将被带到位于内容区域底部的“规则”选项卡。应该选择“规则”选项卡并准备就绪。

HTML：

```
<div id="header">
    <a href="" title="Rules">Click to read the rules</a>
</div> <!-- end header -->

<div id="content">
<ul class="nav nav-tabs" id="myTab">
    <li class="active"><a href="#home">Home</a></li>
    <li><a href="#profile">Profile</a></li>
    <li><a href="#rules">Rules</a></li>
    <li><a href="#settings">Settings</a></li>
</ul>

<div class="tab-content">
    <div class="tab-pane active" id="home">...</div>
    <div class="tab-pane" id="profile">...</div>
    <div class="tab-pane" id="rules">...</div>
    <div class="tab-pane" id="settings">...</div>
</div>
</div> <!-- end content --> 
```

JS：

```
$('#myTab a').click(function (e) {
    e.preventDefault();
    $(this).tab('show');
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T19:31:35.853

试试这个：

```
$('#header a').click(function(e) {
  e.preventDefault();
   $('#rules').tab('show');  // or $('#rules').click();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T19:42:15.263

**HTML**

```
<div id="header">
    <a href="#" title="Rules">Click to read the rules</a>
</div> <!-- end header -->

<div id="content">
<ul class="nav nav-tabs" id="myTab">
    <li class="active"><a data-toggle="tab" href="#home">Home</a></li>
    <li><a data-toggle="tab" href="#profile">Profile</a></li>
    <li><a data-toggle="tab" href="#rules">Rules</a></li>
    <li><a data-toggle="tab" href="#settings">Settings</a></li>
</ul>

<div class="tab-content">
    <div class="tab-pane active" id="home">1...</div>
    <div class="tab-pane" id="profile">2...</div>
    <div class="tab-pane" id="rules">3...</div>
    <div class="tab-pane" id="settings">4...</div>
</div>
</div> <!-- end content --> 
```

**JS**

```
$('#header a').click(function(e) {
    e.preventDefault();
    $('#myTab a[href="#rules"]').tab('show'); 
}); 
```

**小提琴**

[http://jsfiddle.net/fWV7Z/](http://jsfiddle.net/fWV7Z/)

# macros - 删除单元格 A2 到 A1000 中的特定值的宏

> ID：15887248
> 
> 赞同：0
> 
> 时间：2013-04-08T19:25:52.407
> 
> 标签：macros, xls

帮助！！！

需要一个宏，该宏将根据单元格 A2:A1000 中的值删除行。值为 East、West 或 Central。

我使用了在此网站和其他网站上找到的大量代码，并且不断收到未找到的值（运行时错误 13），或者当它看起来正在运行时，它将保持运行 20 分钟而没有明显的变化。这需要快速删除行，否则不值得自动化。

我有一个电子表格，3 个不同的计划者使用它来对订单进行排序。我已经有一个宏可以为它们进行自定义排序和粘贴值。但是，他们仍在手动删除与不属于他们的区域相关的行。

我还需要它来删除最多 A1000 的剩余空白行。这些行中有许多 vlookup 和 hlookup 公式，目前正在手动删除。

如果需要，我可以提供电子表格的副本。

# vba - 如何在excel中计算不同字体颜色的文本

> ID：15887257
> 
> 赞同：8
> 
> 时间：2013-04-08T19:26:25.177
> 
> 标签：vba, excel, worksheet-function

我有一个已从另一个数据库导出到 excel 的名称列表。列表中感兴趣的名称以红色字体突出显示。我想要一种计算方法，即约翰史密斯在一列中总共出现 5 次，但 5 次中有 3 次，他的名字以红色字体突出显示。所以我想看看有多少他的名字出现红色。

我知道如何搜索他名字的所有实例，例如 =COUNTIF(A1:A100,"John Smith")

我还帮助创建了一个 VB 函数，该函数使用以下方法计算工作表中所有红色 (=SumRed) 值（一旦指定颜色索引）：

```
Function SumRed(MyRange As Range)
    SumRed = 0
For Each cell In MyRange
    If cell.Font.Color = 255 Then
        SumRed = SumRed + cell.Value
    End If
Next cell
End Function 
```

我只是找不到结合这两个计数条件的方法。任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-08T20:41:20.840

您不需要 VBA，但如果您需要 VBA 解决方案，那么您可以选择其他两个答案中的任何一个。:)

我们可以使用 Excel 公式来查找单元格的字体颜色。请参阅此示例。

我们将使用 XL4 宏。

1.  打开名称管理器
2.  给个名字。说`FontColor`
3.  在“引用到”中键入此公式，`=GET.CELL(24,OFFSET(INDIRECT("RC",FALSE),0,-1))`然后单击“确定”

![在此处输入图像描述](https://i.stack.imgur.com/mCrhM.png)

**公式说明**

语法是

```
GET.CELL(type_num, reference)

Type_num is a number that specifies what type of cell information you want.
reference is the cell reference 
```

在上面的公式中，数字`24`为您提供单元格中第一个字符的字体颜色，作为 1 到 56 范围内的数字。如果字体颜色是自动的，则返回 0。*因此是缺点。确保整个字体颜色为红色。我们本可以使用 64，但它不能正常工作。*

`OFFSET(INDIRECT("RC",FALSE),0,-1)`指的是左边的直接单元格。

现在在单元格中输入此公式`=IF(AND(Fontcolor=3,B1="John Smith"),1,0)`并将其复制下来。

**注意**：必须在包含文本的单元格的右侧输入公式。

**截图**

![在此处输入图像描述](https://i.stack.imgur.com/ON26u.png)

**编辑（2013 年 10 月 12 日）**

要计算具有特定背景颜色的单元格，请参阅[此](https://stackoverflow.com/questions/20489472/how-to-count-cells-in-a-range-with-a-value-less-than-another-cell-in-excel/20491479#20491479)链接

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T19:44:26.133

我想你快到了，但这值得@user 打赌我的妙语:(

```
Function CoundRedAndText(MyRange As Range, Mytext as string) as long
    CoundRedAndText = 0
    For Each cell In MyRange
        If cell.Font.Color = 255 and cell.value like MyText Then
            CoundRedAndText = CoundRedAndText + 1 'you had cell.value but dont know why?
        End If
    Next cell
End Function 
```

用法，`=CountRedAndText(A1:A25, "John Smith")`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T19:39:26.287

```
For Each cell In Range("A1:A100")
    If cell.Font.Color = 255 And cell.Value = "John Smith" Then
        myCount = myCount + 1
    End If
Next 
```

# objective-c - 添加框架时出现 Xcode 错误

> ID：15887258
> 
> 赞同：2
> 
> 时间：2013-04-08T19:26:29.050
> 
> 标签：objective-c, xcode, kinvey

当我通过将 .framework 从 Project Navigator 拖到选项卡中将其添加到“Link Binary With Libraries”列表中时，出现错误。

我的错误...

```
Undefined symbols for architecture i386:
  "_OBJC_CLASS_$_UAPush", referenced from:
      objc-class-ref in KinveyKit(KCSPush.o)
  "_OBJC_CLASS_$_UAirship", referenced from:
      objc-class-ref in KinveyKit(KCSPush.o)
  "_UAirshipTakeOffOptionsAirshipConfigKey", referenced from:
      -[KCSPush initializeUrbanAirshipWithOptions:error:] in KinveyKit(KCSPush.o)
  "_logging", referenced from:
      -[KCSPush application:didReceiveRemoteNotification:] in KinveyKit(KCSPush.o)
     (maybe you meant: _OBJC_IVAR_$_KCSLogManager._loggingState, _OBJC_IVAR_$_FBLogger._loggingBehavior )
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

当我删除 .framework 时，应用程序运行没有错误。

此外，当我查看 Kinvey.framework 中的 Headers 文件夹时，我看到带有红色名称的头文件。这可能与问题有关吗？

为什么会这样？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T19:34:41.943

UAPush = 城市飞艇推送。

将 libUAirship.a 添加到您的项目中。

[在这里你可以下载 lib](http://com.urbanairship.filereleases.s3.amazonaws.com/libUAirship-latest.zip)。

[关于城市飞艇推送的完整文档](http://urbanairship.com/resources/developer-resources)

[还要检查这个城市飞艇常见错误](https://stackoverflow.com/questions/15827119/ios-project-shows-linker-error-for-i386)

# c# - 使用与 Simple.Data 键相同的字段更新字段

> ID：15887260
> 
> 赞同：1
> 
> 时间：2013-04-08T19:26:33.400
> 
> 标签：c#, database, simple.data

我想实现这一点：

UPDATE MyTable SET Field1=Field1 + 1 WHERE Field2 = 1 AND Field1 = 5000

只是为了解释为什么即时验证没有其他人触及记录，Field1 是一个序列号。

如何实现这一点，我在想类似的东西。MyDb.MySchema.Table.UpdateByField1AndField2（字段 1：5000，字段 2：1，字段 1：5001）。显然这是行不通的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T19:38:39.887

关于什么 ...

```
MyDb.MySchema.Table.UpdateAll(Field1: 5001, Condition: MyDb.MySchema.Table.Field1==5000 && MyDb.MySchema.Table.Field2==1) 
```

?

# ios - iPad 和双 150 GPS 蓝牙

> ID：15887263
> 
> 赞同：2
> 
> 时间：2013-04-08T19:26:34.270
> 
> 标签：ios, bluetooth, gps

像双150这样的外置蓝牙gps如何与CLLLocationManager集成？它是自动集成还是有一个特殊的 API 用于与外部 GPS 而不是内部 GPS 一起工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:37:56.317

事实证明，它确实使用 App Store 中的 Dual App 与定位服务“自动”集成。

1.  确保设备处于“Apple”模式（开关靠近电源插座）
2.  确保设备与*您*的IOS 设备配对（IOS 蓝牙设置）
3.  确保双蓝光常亮（蓝牙配对）
4.  如果关闭，请确保 Dual 绿灯闪烁（GPS 同步）或常亮（GPS 同步）
    重新运行 Dual App
5.  如果仍然无法正常工作，请重启 Dual，转到 1。
6.  如果仍然无法正常工作，请重启 IOS 设备，转到 1。

# ios - UILabel 在不同的位置，适用于 2 种不同的屏幕尺寸

> ID：15887264
> 
> 赞同：0
> 
> 时间：2013-04-08T19:26:36.913
> 
> 标签：ios, uilabel

我有一个 UILabel 放在故事板屏幕的左上角。我禁用了“自动布局”，它在 iPhone 5 屏幕上运行良好。当我在 iPhone 4 等任何较小的屏幕上试用它们时，问题就出现了。然后标签被放置在右下角。在这个问题之后，我尝试以编程方式“修复”视图控制器的“viewDidLoad”方法中的位置，但它仍然移动位置并且问题继续存在。

一段时间以来，我一直在为此挠头！

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T19:59:20.450

我建议您重新打开自动布局。如果你得到正确的约束，这种情况（两种不同的屏幕尺寸）*正是*自动布局真正适合的那种情况。在 iPhone 5 屏幕出现的那一刻，Apple 将自动布局从 OS X 迁移到 iOS 是有充分理由的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T19:30:02.500

尝试在[viewWillAppear修复它](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIViewController_Class/Reference/Reference.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T19:56:23.710

转到实用程序面板，单击“显示大小检查器”选项卡，然后更改自动调整大小。然后将您的组件拖到情节提要的视图中，使其保持在“边框”之一中。如果您不需要支持较旧的 iOS 版本，我建议您使用自动布局找出正确的方法。

# sql-server-2008 - 如何对 int 列使用字符串值的 SQL IN 语句？

> ID：15887269
> 
> 赞同：1
> 
> 时间：2013-04-08T19:26:49.160
> 
> 标签：sql-server-2008

对于我无法控制的情况，我有一系列值：

```
@param1 = "1,2,3,4"; 
```

如何执行 IN 语句以检查 ID 是否在我的字符串 @param1 中？

所以，它看起来像这样：

```
select * from table1 where ID IN (@param1); 
```

通常，我想我应该有这个：

```
select * from table1 where ID IN (1,2,3,4); 
```

但不幸的是，在我的情况下，我根本没有那个，相反，我只有一个字符串类型的参数，我的所有 ID 连接在一起，我如何从中选择行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T19:29:46.957

您可以使用动态生成的 SQL 语句 ( [**DEMO**](http://www.sqlfiddle.com/#!3/4f7a3/4) )：

```
declare @sql varchar(max)

set @sql = 'select * from table1 where ID IN (' + @param1 + ')'
exec(@sql) 
```

这个想法是通过将 ID 列表连接到 SQL 语句中来在字符串变量中构建 SQL 语句。最后的语句看起来像您预期的查询：

```
select * from table1 where ID IN (1,2,3,4) 
```

然后，您可以使用[`exec`](http://msdn.microsoft.com/en-us/library/ms188332.aspx).

# jquery - jQuery mobile 和 Handlebars

> ID：15887275
> 
> 赞同：4
> 
> 时间：2013-04-08T19:27:15.507
> 
> 标签：jquery, jquery-mobile, handlebars.js, markup, jquery-mobile-listview

所以，标题是不言自明的。我正在尝试使用 jQuery mobile 和 Handlebars，但我遇到了表格的 CSS 或由把手生成的列表视图的问题。似乎CSS被忽略了。

**编辑：这是一个实际的例子：http: [//jsbin.com/adurar/1/edit](http://jsbin.com/adurar/1/edit)**

在该`<head>`部分中，我有以下代码：

```
<script id="articles-template" type="text/x-handlebars-template">
<ul data-role="listview" data-autodividers="true"  data-filter="true" data-inset="true">
  {{#entries}} 
    <li><a href="#" onClick="">{{msg}}</a></li>
  {{/entries}}
</ul>
</script> 
```

HTML 的主体是非常直接的 jquery mobile：

```
<div data-role="page" data-theme="b">

    <div data-role="header">
        <h1>Page Title</h1>
    </div><!-- /header -->

    <div data-role="content">   
        <p>
          <div id="articleHandlebars" data-demo-html="true"></div>
        </p>        
    </div><!-- /content -->

    <div data-role="footer">
        <h4>Page Footer</h4>
    </div><!-- /footer -->
</div><!-- /page --> 
```

在 .js 文件中，我有以下代码：

```
function showData(data)
{
  var source   = $("#articles-template").html();
  var template = Handlebars.compile(source);
  var html = template(data);
  $("#articleHandlebars").html(html);   
 } 
```

我也尝试添加这个无济于事：

```
$("#articleHandlebars").trigger('create');
$("#articleHandlebars").listview('refresh'); 
```

非常感谢任何形式的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T20:02:17.413

您的代码中几乎没有错误，我将用解决方案解释所有内容。

## 代码更改：

让我们稍微改变一下你的页面：

```
<div data-role="page" data-theme="b" id="listview-page">

    <div data-role="header">
        <h1>Page Title</h1>
    </div><!-- /header -->

    <div data-role="content"  id="listview-content">   
        <p>
          <div id="articleHandlebars" data-demo-html="true"></div>
        </p>        
    </div><!-- /content -->

    <div data-role="footer">
        <h4>Page Footer</h4>
    </div><!-- /footer -->
</div><!-- /page --> 
```

我已将 id **listview-page**添加到页面容器，并将 id **listview-content**添加到内容容器。我们将在我们的解决方案中使用它。

## 解决方案：

首先，这一行：

```
$("#articleHandlebars").listview('refresh'); 
```

不起作用，您只能在列表视图小部件或具有属性 data-role="listview" 的 ul elemenet 上触发列表视图刷新。如果 ul 元素直接附加到 div #articleHandlebars 试试这个：

```
$("#articleHandlebars ul").listview('refresh'); 
```

或者深入直到达到 ul 标签。但是根据我的经验，它不会起作用，因为您的列表视图是动态生成的，因此您需要先初始化列表视图，然后才能刷新它。因此，如果顶级解决方案不起作用，请尝试以下解决方案：

```
$("#articleHandlebars ul").listview().listview('refresh'); 
```

第一个 listview() 调用将初始化小部件，第二个 listview('refresh') 将设置它的样式。

第二件事，您正在使用：

```
$("#articleHandlebars").trigger('create'); 
```

它通常应该在内容 div 上触发，因此如果 listview('refresh') 不起作用，请尝试以下操作：

```
$("#listview-content").trigger('create'); 
```

仅当您像我在此答案开始时建议的那样更改了页面时，这才有效。或者最坏的情况试试这个：

```
$("#listview-page").trigger('pagecreate'); 
```

## 编辑 ：

我已经修复了您的示例：http: [//jsbin.com/ivezat/1/edit](http://jsbin.com/ivezat/1/edit)

**HTML：**

```
<!DOCTYPE html>
<html>
<head>
<link href="http://code.jquery.com/mobile/latest/jquery.mobile.css" rel="stylesheet" type="text/css" />
<script src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script src="http://code.jquery.com/mobile/latest/jquery.mobile.js"></script>

        <script type="text/javascript" src="http://cloud.github.com/downloads/wycats/handlebars.js/handlebars-1.0.rc.1.js"></script>

<script id="articles-template" type="text/x-handlebars-template">
<ul id="listv" data-role="listview" data-autodividers="true"  data-filter="true" data-inset="true">
  {{#entries}} 
    <li><a href="#" onClick="alert('{{title}}')">{{title}}</a></li>
  {{/entries}}
</ul>
</script>   

<meta charset=utf-8 />
<title>JS Bin</title>
</head>
<body>
<div data-role="page" data-theme="b" id="listview-page">

    <div data-role="header">
        <h1>Page Title</h1>
    </div><!-- /header -->

    <div data-role="content" id="listview-content"> 
        <p>
          <div id="articleHandlebars" data-demo-html="true"></div>
        </p>        
    </div><!-- /content -->

    <div data-role="footer">
        <h4>Page Footer</h4>
    </div><!-- /footer -->
</div><!-- /page -->

</body>
</html> 
```

**Javascript：**

```
$(document).on('pagebeforeshow', '#listview-page', function(){
    parseRSS(); 
});

function parseRSS() {
      var articles = { entries: []};
      for (var i = 0; i <=4; i++)
      {
        var obj = {
          title: "test" + i
        };
        articles.entries.push(obj);
      }
      showData(articles);

}

function showData(data)
{
 var source   = $("#articles-template").html();
  var template = Handlebars.compile(source);
  var html = template(data);
  $("#articleHandlebars").html(html);   
  $("#articleHandlebars ul").listview().listview('refresh');
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-25T02:23:31.033

附加 JSON 响应后使用此语法

`$("your_list_view_id").listview('refresh');`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-24T13:25:46.463

根据我们在实际项目中使用把手（1.3.0）和jQuery Mobile（1.4.1）后的经验，请注意：

从技术上讲，它按预期工作，您可以使用 jQuery Mobile 提供的任何组件实现您需要的任何 UI。

但是我们遇到了一些性能问题，这是由于客户端需要双重渲染而发生的。

1.  我们使用车把模板来生成标记，就像 jQuery Mobile 文档中建议的那样。
2.  在这个渲染过程之后，我们`.trigger("create");`用来启动 jQuery Mobile 的“增强”过程。

使用这种方法在浏览器中的性能并不好，即使后端的 REST 服务响应非常快（在我们的例子中为 20-35 毫秒）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-22T17:04:33.907

工作示例刷新了两次。页面，然后是列表视图。一个更好的（对我来说）解决方案是将标签放在模板之外。所以你有id，刷新listview就可以了。

```
<!DOCTYPE html> 
<html>

<head>
<meta charset="utf-8">
<link href="http://code.jquery.com/mobile/latest/jquery.mobile.css" rel="stylesheet" type="text/css" />
<script src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script src="http://code.jquery.com/mobile/latest/jquery.mobile.js"></script>
<script type="text/javascript" src="http://cloud.github.com/downloads/wycats/handlebars.js/handlebars-1.0.rc.1.js"></script>
<script>
$(document).bind('pageinit', function () {
    $.mobile.defaultPageTransition = 'none';
});
</script>
</head>     
<body> 

<div data-role="page" data-theme="d"> 
<div role="main" class="ui-content" id="Content">

<button onclick="foo()">render listview</button>

<ul data-role="listview" data-inset="true" id="listviewMenu">
</ul>

<script id="templateLV" type="text/x-handlebars-template">
    {{#.}}<li><a href="#" id="{{cat}}" class="nodeLevel1">{{label}}</a></li>{{/.}}      
</script>

</div><!-- .ui-content -->
</div><!-- Page body -->

<script>
function foo()
{
    var source   = $("#templateLV").html();
    var template = Handlebars.compile(source);
    var context = [{cat: "sample1", label: "Label One"}, {cat: "sample2", label: "Label Two"}]
    var html    = template(context);
    $("#listviewMenu").html(html);
    $('#listviewMenu').listview('refresh');
}
</script>
</body>
</html> 
```

所以那里，你只刷新一次，刷新整个页面时没有那种屏幕闪烁的效果

# c# - ElasticSearch NEST 客户端不返回结果

> ID：15887276
> 
> 赞同：9
> 
> 时间：2013-04-08T19:27:31.190
> 
> 标签：c#, elasticsearch, nest

我正在通过 ElasticSearch NEST C# 客户端运行一个简单的查询。当我通过 http 运行相同的查询时，我收到了结果，但是我从客户端返回了零个文档。

这就是我填充数据集的方式：

`curl -X POST "http://localhost:9200/blog/posts" -d @blog.json`

此 POST 请求返回 JSON 结果：

`http://localhost:9200/_search?q=adipiscing`

这是我没有返回任何东西的代码。

```
public class Connector
{
    private readonly ConnectionSettings _settings;
    private readonly ElasticClient _client;

    public Connector()
    {
        _settings = new ConnectionSettings("localhost", 9200);
        _settings.SetDefaultIndex("blog");
        _client = new ElasticClient(_settings);
    }

    public IEnumerable<BlogEntry> Search(string q)
    {
        var result =
            _client.Search<BlogEntry>(s => s.QueryString(q));

        return result.Documents.ToList();
    }
} 
```

我错过了什么？提前致谢 ..

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-25T13:46:16.173

NEST 尝试猜测类型和索引名称，在您的情况下，它将使用 /blog/blogentries

`blog`因为你告诉默认索引是`blogentries`因为它会小写和复数你传递给的类型名称`Search<T>`。

您可以像这样控制类型和索引：

```
 .Search<BlogEntry>(s=>s.AllIndices().Query(...)); 
```

这将使 NEST 知道您实际上想要搜索所有索引，因此 nest 会将其转换`/_search`为根目录，等于您在 curl 上发出的命令。

你最可能想要的是：

```
 .Search<BlogEntry>(s=>s.Type("posts").Query(...)); 
```

这样 NEST 在`/blog/posts/_search`

# javascript - 将用户带到 div 淡入的页面上的某个点？

> ID：15887280
> 
> 赞同：1
> 
> 时间：2013-04-08T19:27:44.580
> 
> 标签：javascript, jquery

有人可以帮忙吗，我`div`在一个页面上淡入了几个，每次用户关闭`div`另一个时都会淡入，我想尝试实现的是一种将用户向上/向下带到焦点的方法在哪里`div`？

这可能吗？如果可以，我该如何实现，谢谢

```
<script>
        $(".dashboard_intro_arrow3").hide();
        $(".dashboard_intro3").hide();
         $(".dashboard_intro_text3").hide();
        $(".exit_intro3").hide();
        $(".dashboard_intro_fav").hide();

        $('.exit_intro2').click(function () {
            if ($('.dashboard_intro2').is(":visible")) {
                 $(".dashboard_intro2").fadeOut(500);
                 $(".dashboard_intro_arrow2").fadeOut(500);
                 $(".exit_intro2").fadeOut(500);
                 $(".dashboard_intro_text2").fadeOut(500);
                 $('.dashboard_intro_arrow3').delay(500).fadeIn(500);
                  $('.dashboard_intro3').delay(500).fadeIn(500);
                  $('.dashboard_intro_text3').delay(500).fadeIn(500);
                  $('.exit_intro3').delay(500).fadeIn(500);

            }
        });
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-04T19:57:15.560

我不知道这是否是您想要的，但您可以使用页面上的锚点来滚动。当您导航到锚点时，页面会滚动以使锚点元素位于窗口的最顶部。

首先，做一个锚。

```
<a name="anchor"></a> 
```

接下来，创建指向该锚点的链接。

```
<a href="#anchor">Click me!</a> 
```

或者在您的情况下，使用 JS 进行导航。

```
location.hash = "#anchor" 
```

例如：

```
<html>
<head></head>
<body>

<div id="myDiv">
<a name="scrollToDiv"></a>
...
</div>

<script>
location.hash = "#scrollToDiv";
</script>

</body>
</html> 
```

# installation - 使用自定义图标打包 TideSDK 应用程序

> ID：15887281
> 
> 赞同：1
> 
> 时间：2013-04-08T19:27:50.423
> 
> 标签：installation, icons, tidesdk

我能够在我的 Windows 机器上打包我的桌面应用程序并且应用程序运行。这一切都很棒。但是在我从生成的 MSI 文件运行安装后分配给该文件的图标是默认的 Titanium 图标。

我已经完成了这个线程上的建议

[Windows 包装图标](https://stackoverflow.com/questions/12662279/windows-packaging-icon)

对于 Tide-SDK 1.3.1 beta 但没有运气，有没有其他方法可以将安装程序分配给应用程序的默认 Tide SDK 更改为我的自定义图标？我有 tiapp.xml 工作只是希望安装程序也将相同的图标分配给我的应用程序

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T12:51:24.523

我最近这样做了，对我来说效果很好。我在我的目录中放了一个 512x512 png`Resources/`并将其设置在我的 tiapp.xml 中：

```
<icon>app_icon_512.png</icon> 
```

安装完成后，我就有了一个品牌精美的应用程序图标。

# javascript - __flash__removeCallback 是 IE9 中的未定义错误，同时删除 dom 元素

> ID：15887284
> 
> 赞同：4
> 
> 时间：2013-04-08T19:28:22.887
> 
> 标签：javascript, jquery, html, youtube, internet-explorer-9

[使用 Youtube iframe 删除 DOM 元素时，可能未定义“__flash__removeCallback”](https://stackoverflow.com/questions/11543888/flash-removecallback-is-undefined-when-deleting-dom-element-with-youtube-if)的副本

我浏览了一些网站，但找不到确切的解决方案，为什么 youtube 在使用 youtube iframe 删除 dom 元素时抛出此异常，解决方案是什么？

我得到的一些解决方案是：

1.  `ytplayer.getIframe().src='';`-> 我不知道这如何解决我的问题？

2\. `$('#youtube iframe').attr('src', ''); $('#youtube').remove()`-> 我试过这个，但没有用。

3.在删除父元素之前隐藏 iframe -> 不起作用。

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T17:31:28.757

这似乎是一个仅限 IE9 的错误。

当 Flash 对象使用 JavaScript（Flash/ActionScript 端的外部接口）与 HTML 文档交互时，会发生这种情况，并且当包含带有 Flash 对象的 HTML 文档的 IFRAME 发挥作用时，它会抬起丑陋的脑袋。

看到您如何指定您正在使用 YouTube API，遗憾的是，您无法确保 Flash 取消注册自身并且不会调用 JavaScript 函数（反之亦然），因为您依赖第三方来删除它在您的应用程序域之外运行的软件。

如果您不需要 YouTube API，而只是在应用程序中获取视频的快速方法，那么最安全的选择是使用为 IE9 嵌入的旧样式对象和用于其他理智世界的 API / IFRAME 嵌入。

```
<object width="{WIDTH}" height="{HEIGHT}">
  <embed src="https://www.youtube.com/v/{VIDEO_ID}?version=3&autoplay=1"
         type="application/x-shockwave-flash"
         allowscriptaccess="always"
         width="{WIDTH}" height="{HEIGHT}"></embed>
</object> 
```

删除上面的对象（您可以使用 SWFObject 的“embedSWF”和“removeSWF”就可以了）将使视频播放器离开您的页面，而不会引发任何_flash *_remove* .. 警告。

如果您需要 YouTube API / 控制视频播放器状态：

您是否尝试过在 ytplayer 上调用“销毁”方法？取消销毁，虽然我不愿意使用超时发布“答案”，但在将 iframe 的源设置为空字符串（以便文档卸载）之前，给 Flash 对象一些时间来取消注册，然后清除 iframe 或者它是父容器。

虽然我记得在之前的一个项目中，这让我们发疯了（上下文是一个动态添加和删除视频的单页界面），我们求助于使用 AS3 YT 代码编写自己的 Flash 播放器后备。这就是它有多烦人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-05T16:28:04.247

下面的代码应该适用于所有浏览器（并且不会产生您上面描述的 IE9/IE10 错误）。

```
function playVideo() {
    $('#video iframe').attr('src', 'http://www.youtube.com/embed/VIDEO_ID_HERE');
    $('#video iframe').fadeIn();
}

function stopVideo() {
    $('#video iframe').attr('src', '');
    $('#video').fadeOut();
} 
```

最终结果是单击按钮时将加载的视频，并且将安全地删除视频而不会导致 IE9/IE10 中的内存泄漏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-26T21:43:54.800

这在 IE9 中对我有用。

```
 $(window).unload(function() {
        jwplayer('video1').stop();
        jwplayer('video1').remove();
        $(window).remove();
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-24T17:36:29.030

您还可以通过自己的覆盖来修复 Flash 的回调删除功能。此问题与视频应用程序无关。在下面的示例中，我在页面卸载之前覆盖它，但它可以在 swf 加载后的任何时间发生。

`window.onbeforeunload = function () { this.__flash__removeCallback = function (instance, name) { if (instance == null) return; // <-- this line prevents the error instance[name] = null; } }`

# html - 标记/标记视频部分

> ID：15887285
> 
> 赞同：0
> 
> 时间：2013-04-08T19:28:23.770
> 
> 标签：html, video-streaming, html5-video

有没有一种方法或脚本可以让您加载视频并让观看视频的用户将视频的某些部分标记为“有趣”，然后直接链接到这些部分（不是开始时间，而是一种开始+结束时间的组合）？

# android - 在设备上运行的 Phonegap 页面比通过服务器打开相同页面更快或更慢

> ID：15887289
> 
> 赞同：0
> 
> 时间：2013-04-08T19:28:41.913
> 
> 标签：android, ios, performance, cordova

我正在开发一个跨平台的 Phonegap 应用程序。我想知道的是，直接在设备上创建Phonegap项目是否会比通过服务器运行相同的Phonegap项目更快（通过服务器运行意味着该项目将位于远程计算机上，而应用程序位于设备上只会重定向到远程计算机上的 Phonegap 网页）？

# java - Actionscript 游戏/程序与他人联系

> ID：15887291
> 
> 赞同：0
> 
> 时间：2013-04-08T19:28:55.327
> 
> 标签：java, actionscript-3, actionscript, connection, serversocket

我想知道，在谷歌搜索了很多，即使没有结果，如何使动作脚本程序与另一台电脑连接。这是我在[第一张图片](http://i47.tinypic.com/2s7yxdz.png)中制作的架构，我们有两台计算机，我正在搜索另一台，然后按连接

在[第二张图片](http://i50.tinypic.com/5pg1j.png)中，既然我们连接了，我们分享了 3 张图片……这只是一个例子 ;D

知道如何在用户之间建立联系吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T19:46:13.787

我通过套接字完成用户之间的多人连接。但是对于初学者来说，使用一些现成的库或平台来简化事情通常是个好主意。

对于 Flash，现有的多人游戏框架是

*   SmartFox 服务器
*   AmfPHP
*   播放器.IO
*   红5

还有很多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T00:16:01.397

使用[Socket.io的](http://socket.io/)[Node.js](http://nodejs.org/)将非常适合您的需求。然后使用ActionScript 端的[socket.io-flash 库与服务器通信。](https://github.com/AdamHarte/socket.io-flash)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T19:41:58.797

看看套接字编程。这些是一些有用的链接：

```
http://docs.oracle.com/javase/tutorial/networking/overview/networking.html
http://docs.oracle.com/javase/tutorial/networking/sockets/
http://www.tutorialspoint.com/java/java_networking.htm 
```

# java - 为什么 Java 不允许在变量声明中使用泛型类型声明？

> ID：15887296
> 
> 赞同：8
> 
> 时间：2013-04-08T19:29:16.640
> 
> 标签：java, generics, language-design

假设我们有一个这样的类：

```
public class xx {

    public interface Foo<T> {
        T getValue();
        void setValue(T value);
    }

    public void resetFoos(Iterable<Foo<?>> foos) {
        for (Foo<?> foo : foos)
            foo.setValue(foo.getValue());
    }
} 
```

即使从直觉上看它似乎“应该”，它也将无法编译：

```
xx.java:10: setValue(capture#496 of ?) in xx.Foo<capture#496 of ?> cannot be applied to (java.lang.Object)
        foo.setValue(foo.getValue()); 
```

原因是它`foo`没有绑定的泛型类型，因此编译器不“知道” 的输出`foo.getValue()`与 . 的输入兼容`foo.setValue()`。

因此，要解决此问题，您必须创建一个新方法，仅用于在`for()`循环中绑定泛型类型参数：

```
public class xx {

    public interface Foo<T> {
        T getValue();
        void setValue(T value);
    }

    public void resetFoos(Iterable<Foo<?>> foos) {
        for (Foo<?> foo : foos)
            this.resetFoo(foo);
    }

    // stupid extra method here just to bind <T>
    private <T> void resetFoo(Foo<T> foo) {
        foo.setValue(foo.getValue());
    }
} 
```

这一直困扰着我。另外，似乎可以有一个简单的解决方案。

我的问题：**有什么“好的”理由不应该扩展 java 语言以允许对变量声明进行泛型类型声明？**例如：

```
public class xx {

    public interface Foo<T> {
        T getValue();
        void setValue(T value);
    }

    public void resetFoos(Iterable<Foo<?>> foos) {
        for (Foo<?> foo : foos) {
            final <T> Foo<T> typedFoo = foo;
            foo.setValue(foo.getValue());
        }
    }
} 
```

`for()`或者，在这种循环的情况下更简洁：

```
public class xx {

    public interface Foo<T> {
        T getValue();
        void setValue(T value);
    }

    public void resetFoos(Iterable<Foo<?>> foos) {
        for (<T> Foo<?> foo : foos)
            foo.setValue(foo.getValue());
    }
} 
```

我想知道是否某些编译器向导可以解释为什么这太难了，或者可以（并且应该）完成。

**编辑：**

针对这个建议的解决方案：

```
public <T> void resetFoos(Iterable<Foo<T>> foos) {
    for (Foo<T> foo : foos) {
        foo.setValue(foo.getValue());
    }
} 
```

此方法签名不允许将`Foo`具有各种泛型类型的 s 一起重置。换句话说，尝试传入 an`Iterable<Foo<?>>`会导致编译错误。

[这个例子](http://ideone.com/uUfDub)演示了这个问题：

```
public static class FooImpl<T> implements Foo<T> {

    private T value;

    public FooImpl(T value) { this.value = value; }

    @Override public T getValue() { return value; }

    @Override public void setValue(T value) { this.value = value; }
}

public static <T> void resetFoos(Iterable<Foo<T>> foos) {
    for (Foo<T> foo : foos) {
        foo.setValue(foo.getValue());
    }
}

public static void main(String[] args) {

    final Foo<Object> objFoo = new FooImpl<>(new Object());
    final Foo<Integer> numFoo = new FooImpl<>(new Integer(42));
    final Foo<String> strFoo = new FooImpl<>("asdf");

    List<Foo<?>> foos = new ArrayList<>(3);
    foos.add(objFoo);
    foos.add(numFoo);
    foos.add(strFoo);

    resetFoos(foos); // compile error

    System.out.println("done");
} 
```

编译错误显示：

> 方法`resetFoos`不能应用于给定类型；
> 
> 必需的：`Iterable<Foo<T>>`
> 
> 成立：`List<Foo<?>>`
> 
> 原因：不`T`存在类型变量的实例，因此参数类型`List<Foo<?>>`符合形参类型`Iterable<Foo<T>>` where `T`is a type-variable: `T extends Object`在方法中声明`<T>resetFoos(Iterable<Foo<T>>)`

（通过 ideone.com 使用 sun-jdk-1.7.0_10）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T19:31:23.600

您可以使`resetFoos`方法本身通用：

```
public <T> void resetFoos(Iterable<Foo<T>> foos) {
    for ( Foo<T> foo : foos)
        foo.setValue(foo.getValue());
} 
```

这样编译器就知道`T`from`foo.getValue()`对`T`.`foo.setValue()`

这只是解决方法。我不知道为什么编译器不允许您在变量级别声明泛型，例如`final <T> Foo<T> typedFoo = foo;`；我只知道你不能在变量级别声明它。但是，在这里，方法级别就足够了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T19:37:49.033

它可能可以完成，可能有一些边缘情况。但实际上，没有这样做的原因仅仅是 JLS 的人没有这样做。

类型系统将无法推断有关您的程序的*所有内容。*它会做很多事情，但总会有一些地方编译器/类型检查器不知道你人类可以证明的东西。所以，设计编译器和类型检查器的人必须决定在推理和聪明方面能走多远——而且无论他们停在哪里，总有人能够提出这样一个问题：“为什么没有”他们不会多走这一步吗？”

我的猜测——这只是一个猜测——是这个推论没有成功，因为（a）它很容易解决（如 rgettman 所示），（b）它使语言复杂化，（b。 1) 它引入了棘手的边缘情况，其中一些甚至可能与语言的其他特性不兼容，(c) JLS 的设计者觉得他们没有时间研究它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-08T21:04:19.520

对 java 语言的每次更改都将非常困难。

您的示例并不是真正需要类型变量。编译器已经通过通配符捕获创建了类型变量，只是类型变量对程序员不可用。可能有几种补救措施

1.  让程序员访问类型变量。这不是一件容易的事。我们需要发明一些奇怪的语法和语义。怪异和复杂性可能无法证明这种好处是合理的。

2.  共享捕获转换。现在，每个表达式都分别进行捕获转换。规范不承认这`foo`一点`foo`，因此两个表达式应该共享相同的捕获转换。它在一些简单的情况下是可行的，例如，一个有效的最终局部变量应该只捕获转换一次，而不是每次访问。

3.  推断变量类型 -`var foo2 = foo;`的类型`foo2`是从右侧推断的，它实际上首先进行捕获转换，因此`foo2`的类型将是`Foo<x> for some x`，具有新的类型变量 x （仍然无法表示）。或者`var`直接在`foo`-上使用`for(var foo: foos)`。推断变量类型是一种成熟/经过测试的技术，它的好处远比解决这个问题要广泛。所以我会投票给这个。如果我们能活那么久，它可能会出现在 java 9 中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-09T18:23:31.423

基本上，类型变量目前在 Java 中只能有两个作用域：1）类作用域，或 2）方法作用域。您在问，为什么不允许另一个范围——本地代码块的范围（在这种情况下，是 for 循环的内部。

是的，在某些情况下，这会有所帮助。将它添加到语言中并不难。然而，这些都是非常罕见的情况，并且更有可能使人们感到困惑而不是帮助。此外，正如您已经发现的那样，存在一个相对简单且有效的解决方法 - 将该本地块范围移动到私有帮助函数，然后可以使用方法范围类型变量：

```
public void resetFoos(Iterable<Foo<?>> foos) {
    for (Foo<?> foo : foos) {
        resetFoo(foo);
    }
}

private <T> void resetFoo(Foo<T> foo) {
    foo.setValue(foo.getValue());
} 
```

是的，这可能会通过进行额外的方法调用而降低代码效率，但这是一个小问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-08T19:38:15.390

问题是在有问题的陈述中：

```
foo.setValue(foo.getValue()); 
```

can的两次出现`?`（据编译器所知）绑定到不同的类型。编译器无法确定一个`?`（由返回的`getValue()`）`?`与`setValue`. 但在其他情况下，结果并不那么明确。该语言要求类型参数命名相同，如果它们应该是相同的。

[rgettman 的回答](https://stackoverflow.com/a/15887335/535871)中提供了一个很好的解决方法。

# upload - .swf 文件上传脚本文件不会上传

> ID：15887298
> 
> 赞同：1
> 
> 时间：2013-04-08T19:29:30.457
> 
> 标签：upload, flash

我试图让这个非常基本的脚本将 .swf 文件上传到我的服务器，但没有成功。尝试上传时出现无效文件错误。.jpg,gifs,pngs 都可以上传。

我尝试改变一些东西，将 swf 放在 jpg 所在的位置等，但没有任何乐趣。

这种方式不能上传swf文件吗？

和帮助表示赞赏，非常感谢。

` 文件名：

```
<?php
 $allowedExts = array("gif", "jpeg", "jpg","swf","png");
 $extension = end(explode(".", $_FILES["file"]["name"]));
 if ((($_FILES["file"]["type"] == "image/gif")
 || ($_FILES["file"]["type"] == "image/jpeg")
 || ($_FILES["file"]["type"] == "image/jpg")
 || ($_FILES["file"]["type"] == "application/x-shockwave-flash/swf")
 || ($_FILES["file"]["type"] == "image/png"))
 && ($_FILES["file"]["size"] < 8388608)
 && in_array($extension, $allowedExts))
   {
   if ($_FILES["file"]["error"] > 0)
      {
     echo "Return Code: " . $_FILES["file"]["error"] . "<br>";
     }
   else
     {
     echo "Upload: " . $_FILES["file"]["name"] . "<br>";
     echo "Type: " . $_FILES["file"]["type"] . "<br>";
     echo "Size: " . ($_FILES["file"]["size"] / 1024) . " kB<br>";
     echo "Temp file: " . $_FILES["file"]["tmp_name"] . "<br>";

    if (file_exists("upload/" . $_FILES["file"]["name"]))
       {
       echo $_FILES["file"]["name"] . " already exists. ";
       }
     else
       {
       move_uploaded_file($_FILES["file"]["tmp_name"],
       "upload/" . $_FILES["file"]["name"]);
       echo "Stored in: " . "upload/" . $_FILES["file"]["name"];
       }
     }
   }
 else
   {
   echo "Invalid file";
   }
 ?> ` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-13T07:18:05.383

```
function addAdFields($post,$files){

    //print_r( $files);

    $allowedExts = array("gif", "jpeg", "jpg", "png" ,"tiff","tif","swf");
    $fileType=$files["bannerType"]["type"];
    $tmpName=$files["bannerType"]["tmp_name"];
    $fileName=$files["bannerType"]["name"];

    $imageName = mysql_real_escape_string($files["bannerType"]["name"]);
    $imageData = mysql_real_escape_string(file_get_contents($files["bannerType"]["tmp_name"]));
    $imageType = mysql_real_escape_string($files["bannerType"]["type"]);
    list($width, $height, $type, $attr) = getimagesize($tmpName);
    $dimArr= array($width, $height);
    $temp = explode(".", $fileName);
    $files["bannerType"]["name"];
    $extension = end($temp);
    $fileTmpName= mysql_real_escape_string($tmpName);
    $curDate = "";
    $ipadd = $_SERVER['REMOTE_ADDR'];
    $camDetail=explode('_',$post['campaignType']);
    $this -> tableName                                      =   "_ads";
    $this -> fieldValues['campaignID']                      =   $camDetail[0];
    $this -> fieldValues['campaignName']                    =$camDetail[1];
    $this -> fieldValues['adTitle']                         =   $post['adTitle'];
    $this -> fieldValues['bannerID']                        =   $post['bannerType'];
    if($_SESSION['bannerTyp']=='Placement')
    {
        $this -> fieldValues['uploadFileName']                  =   $post['placementText'];

    }
    else{
    $this -> fieldValues['uploadFileName']                  =   $imageName;
    $this -> fieldValues['uploadedFile']                    =   $imageData;
    }
    $this -> fieldValues['dimantation']                     =   json_encode($dimArr);
    $this -> fieldValues['addDateTime']                     =   $curDate;
    $this -> fieldValues['addIpAddress']                    =   $ipadd; 
    $this->insert();
    //echo $this->query;
    header('Location: main.html?action=add-ads&menuid=155');
} 
```

# php - PHP变量未传递给url

> ID：15887299
> 
> 赞同：3
> 
> 时间：2013-04-08T19:29:32.753
> 
> 标签：php, header

我正在尝试将变量传递`$userhash`给 url，但由于某种原因它不起作用。这是我的代码：

```
header("Location: home.php?userhash=$userhash"); 
```

我知道`userhash`有一个值，因为如果我注释掉标题，我可以回显它并查看它。

我试着做这样的事情：

```
header("Location: home.php?userhash=test"); 
```

并且

```
header("Location: home.php?userhash='test'"); 
```

但每次我将我重定向到下一页时，网址总是看起来像这样`home.php?userhash=`。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T19:32:57.580

在标题后放置一个出口

```
header('Location: /home.php?username='.$username);
exit; 
```

[http://php.net/manual/en/function.header.php](http://php.net/manual/en/function.header.php)查看有关位置的部分：

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T19:53:52.643

试试这个代码

```
header("Location: home.php?userhash=".$userhash);
exit; 
```

# python - 从许多文本文件中复制选择的行并粘贴到新文件中

> ID：15887304
> 
> 赞同：1
> 
> 时间：2013-04-08T19:29:59.720
> 
> 标签：python

我是 Python 新手，并试图用它来做我认为应该是一个非常简单的任务。我有一个包含许多 .log 文件的文件夹，每个文件都有很多行数据。我想复制仅包含某个关键字的行，并将每个文件中的每一行粘贴到一个可以在 excel 中打开的主文件中。我一直在寻找答案，但我似乎无法得到任何工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T19:44:21.313

这应该做你需要的。将包含此代码的文件放在您拥有`.log`文件的目录中，替换`KEYWORD`为您实际查找的内容，然后运行它。

```
import os
theKeyword = 'KEYWORD'
directory = '.' 
with open('output.csv', 'w') as out:
    for file in os.listdir(directory):
        if file.endswith(".log"):
            with open(file, 'r') as f:
                for line in f:
                    if theKeyword in line:
                        out.write(line) 
```

如建议的那样，您可以使用[`glob`](http://docs.python.org/2/library/glob.html)代替[`os.listdir`](http://docs.python.org/2/library/os.html#os.listdir)：

```
from glob import glob
with open('output.csv', 'w') as out:
    for file in glob('*.log'):
        with open(file, 'r') as f:
            for line in f:
                if 'KEYWORD' in line:
                    out.write(line) 
```

[`fileinput`](http://docs.python.org/2/library/fileinput.html)如果您使用模块，代码甚至可以更简单一些：

```
from glob import glob
import fileinput
with open('output.csv', 'w') as out:
    for line in fileinput.input(glob('*.log')):
        if 'KEYWORD' in line:
            out.write(line) 
```

“Python 中的 grep”的另一种变体：

```
from glob import glob
import fileinput
with open('output.csv', 'w') as out:
    out.writelines(line for line in fileinput.input(glob('*.log')) if 'KEYWORD' in line) 
```

在上面的代码片段中，如果您删除`fileinput.input`的参数，那么它将处理`sys.argv[1:]`，因此您可以使用文件名作为参数运行您的脚本。

如果您想在目录的子目录中递归搜索文件，您应该查看[`os.walk`](http://docs.python.org/2/library/os.html#os.walk)函数。

如果您有 Linux/Unix/Mac 机器，或者如果您在 Windows 机器上安装了[Cygwin](http://www.cygwin.com/)，则使用 shell 工具可以更轻松地实现相同的目标：

```
$ cat *.log| grep KEYWORD >output.csv 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T19:48:10.683

```
import os

outfile = open("outfile.txt", "w")
temp_list = []
for cur_file in os.listdir("."):
    if cur_file.endswith(".log"):
        for line in open(cur_file, "r").readlines():
            if "KEYWORD" in line:
                outfile.write(line)
outfile.close() 
```

# ruby-on-rails - rails 单选按钮自动提交

> ID：15887305
> 
> 赞同：1
> 
> 时间：2013-04-08T19:30:01.473
> 
> 标签：ruby-on-rails, ruby, ajax, jquery, ruby-on-rails-3.2

我希望能够将`:albumcover`图像对象的设置为 TRUE 或 FALSE。如何使用 ajax 完成此操作，以便在选中单选按钮时提交？非常感谢！

**看法**

```
<% @images.each do |image| %>
...
  <%= label(:albumcover, 'Set as Album Cover ', :style => "float: left;") %>
  <%= radio_button_tag(:albumcover, "cover", false, :id => :albumcover_tag) %>
...
<% end %> 
```

**路线**

```
Admin::Application.routes.draw do
  get "albums/index"

  get "dashboard/index"

  namespace :admin do
    root :to => "dashboard#index"
    resources :dashboard
    resources :albums do
      resources :images do
        member do
          get :ajax_update
          put :update_form
        end
      end
     end
    get "admin/album"
    end
    get "logout" => "sessions#destroy", :as => "logout"
  get "login" => "sessions#new", :as => "login"
  get "signup" => "users#new", :as => "signup"
    # resources :users
  resources :basic
    root :to => "basic#index" 
```

**尝试阿贾克斯**

```
$(function(){
$('#albumcover_tag').bind('click', function(){
    $.ajax({
        url: "<%= update_form_admin_album_images_path %>",
        data: $('#albumcover_tag').val(),
    }).success(function(){
        alert("success");
    });
});
}); 
```

**模式表**

```
create_table "images", :force => true do |t|
    t.string   "title"
    t.string   "description"
    t.datetime "date"
    t.integer  "album_id"
    t.integer  "image_id"
    t.binary   "picture"
    t.boolean  "albumcover"
  end 
```

# c++ - 我是否需要同步 std::condition_variable/condition_variable_any::notify_one

> ID：15887306
> 
> 赞同：15
> 
> 时间：2013-04-08T19:30:01.950
> 
> 标签：c++, multithreading, c++11, thread-safety, condition-variable

我需要同步`std::condition_variable/condition_variable_any::notify_one`吗？

据我所知，如果丢失通知是可以接受的 - 可以调用`notify_one`不受保护（例如通过互斥锁）。

例如，我看到了以下使用模式（抱歉，不记得在哪里）：

```
{
    {
        lock_guard<mutex> l(m);
        // do work
    }
    c.notify_one();
} 
```

* * *

但是，我检查了 libstdc++ 源代码，我看到：

[condition_variable::notify_one](https://github.com/ooPo/gcc-4.7.0-PS3/blob/5d9addb08be92a040b8a8675c9e5a231ce37d705/libstdc%2B%2B-v3/src/c%2B%2B11/condition_variable.cc)

```
void condition_variable::notify_one() noexcept
{
    int __e = __gthread_cond_signal(&_M_cond);
    // XXX not in spec
    // EINVAL
    if (__e)
        __throw_system_error(__e);
} 
```

和[condition_variable_any::notify_one](https://github.com/ooPo/gcc-4.7.0-PS3/blob/5d9addb08be92a040b8a8675c9e5a231ce37d705/libstdc%2B%2B-v3/include/std/condition_variable)：

```
void condition_variable_any::notify_one() noexcept
{
    lock_guard<mutex> __lock(_M_mutex);
    _M_cond.notify_one();
} 
```

这是condition_variable_any的布局：

```
class condition_variable_any
{
    condition_variable _M_cond;
    mutex _M_mutex;
    // data end 
```

即它只是condition_variable+mutex 的薄包装。

所以，问题：

1.  `notify_one`不使用互斥锁保护`condition_variable_any`或是否是线程安全的`condition_variable`？
2.  为什么 condition_variable_any 的实现使用额外的互斥锁？
3.  为什么执行`condition_variable_any::notify_one`和`condition_variable::notify_one`不同？也许`condition_variable::notify_one`需要手动保护，但`condition_variable_any::notify_one`不需要？它是 libstdc++ 错误吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-09T16:29:28.590

> 即它只是condition_variable+mutex 的薄包装。

呃没有。仅仅因为它具有这些类型的成员并不能使它成为一个薄包装器。尝试了解它实际上做了什么，而不仅仅是它的私有成员的类型。那里有一些非常微妙的代码。

> 1.  对于 condition_variable_any 或 condition_variable，不通过互斥锁保护 notify_one 是否是线程安全的？

是的。

实际上，`notify_one()`在互斥锁锁定的情况下调用会导致等待线程唤醒，尝试锁定互斥锁，发现它仍然被通知线程锁定，然后重新进入休眠状态，直到互斥锁被释放。

如果您在`notify_one()`没有锁定互斥锁的情况下调用，那么唤醒线程可以立即运行。

> 2 为什么condition_variable_any 的实现使用额外的互斥锁？

`condition_variable_any`可以与任何*Lockable*类型一起使用，不仅是`std:mutex`，而且在 libstdc++ 中的内部使用 a `condition_variable`，它只能与 一起使用`std::mutex`，因此它也有一个内部`std::mutex`对象。

因此，该`condition_variable_any`工作与两个互斥锁一起工作，一个由用户提供的外部互斥锁和一个由实现使用的内部互斥锁。

> 3 为什么 condition_variable_any::notify_one 和 condition_variable::notify_one 的实现不同？也许 condition_variable::notify_one 需要手动保护，但 condition_variable_any::notify_one 不需要？它是 libstdc++ 错误吗？

不，这不是错误。

该标准要求调用`wait(mx)`必须以原子方式解锁`mx`和休眠。libstdc++ 使用内部互斥体来提供原子性保证。如果其他线程即将在`condition_variable_any`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T20:26:30.637

(1) 从数据竞争的角度来看，我看不出有任何理由表明条件变量必须由互斥锁保护。显然，您有可能收到冗余通知或丢失通知，但如果这是您的程序可接受或可恢复的错误条件，我不相信标准中有任何内容会使其非法。当然，标准不会保护您免受竞争条件的影响。确保竞争条件是良性的是程序员的责任。（当然，程序员不要放置任何“数据竞争”，这些竞争在标准中非常具体地定义但不直接应用于同步原语，否则会引发未定义的行为，这一点很重要。）

(2) 我无法回答关于标准库设施的内部实现这样的问题。当然，供应商有责任提供正常工作并符合规范的库设施。这个库的实现可能有一些内部状态需要互斥以避免损坏，或者它可能执行锁定以避免丢失或冗余通知。（仅仅因为您的程序可以容忍它们，并不意味着该库的任意用户可以，而且总的来说我希望他们不能。）这只是我的猜测，他们用这个互斥锁保护了什么。

(3)`condition_variable_any`可用于任何类似锁的对象，而`condition_variable`专门设计用于与`unique_lock<mutex>`. 后者可能比前者更容易实现和/或性能更高，因为它明确知道它正在操作哪些类型以及它们需要什么（它们是否微不足道，它们是否适合缓存行，它们是否直接映射到特定平台的系统调用集、栅栏或缓存一致性保证它们所暗示的内容等），而前者提供了一种通用工具，用于对锁定对象进行操作，而不会受到`std::mutex`or的约束`std::unique_lock<>`。

# ruby-on-rails - Rspec - 查看测试和 html_safe

> ID：15887307
> 
> 赞同：2
> 
> 时间：2013-04-08T19:30:02.017
> 
> 标签：ruby-on-rails, rspec, capybara

有人可以解释我为什么不能通过这个测试吗？我只是用 html 内容测试文章视图。在视图中我通过 html_safe 显示内容

```
.article_content
  = @article.content.html_safe 
```

在我的测试中，我有如下内容：

```
 context 'shows actual article' do
        before(:all) { @article = FactoryGirl.build(:article, id: 1, 
        content: '<h2>aaaaa ddd bbb</h2>') }

        before(:each) { render }

    it 'show content' do
      render.should have_selector('div.article_content',text: @article.content.html_safe)
    end 
```

之后我的测试失败了：

```
Failure/Error: render.should have_selector('div.article_content',text: @article.content.html_safe)
     Capybara::ExpectationNotMet:
       expected to find css "div.article_content" with text "<h2>aaaaa ddd bbb</h2>"
but there were no matches. Also found "\naaaaa ddd bbb\n", which matched the selector but not all filters. 
```

但是当我从工厂对象的内容测试通过中删除 html 标签时。我不知道为什么 html 标签是 '\n'。在浏览器中一切看起来都不错。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T00:13:11.660

has_selector/have_selector 匹配器匹配实际可见的文本 - 页面上显示的文本`aaaaa ddd bbb`不是`<h2>aaaaa ddd bbb</h2>'`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-04-17T16:45:26.887

在为同样的问题苦苦挣扎之后，我找到了以下解决方案：

将其包含在`spec`文件的底部：

```
def strip_tags(string)
    ActionController::Base.helpers.strip_tags(string)
end 
```

现在你可以测试这样的事情：

```
expect(page).to have_content(strip_tags(I18n.t('my_text.applicant_html'))) 
```

现在，即使您的翻译包含一些 html 标签，它也会正确检查。

# pivotviewer - Silvetlight 5：PivotViewer：如何在 S 后面的代码中更改 PivotViewer 过滤器

> ID：15887313
> 
> 赞同：2
> 
> 时间：2013-04-08T19:30:22.303
> 
> 标签：pivotviewer

我扩展了 PivotViewer 控件并隐藏了过滤器面板。我有一个带有类别的 TreeView。每个类别下都有子项。当在 treeView 上选择/单击类别时，我想为 PivotViewer 设置过滤器。在 TreeView_MouseLeftButtonUp 中，我正在执行以下操作

```
 private void myTreeView_MouseLeftButtonUp_1(object sender, MouseButtonEventArgs e)
 {
 var grouping = (IGrouping<string, Web.SDKSampleCode>)myTreeView.SelectedItem;
 pViewer.Filter = string.Format("Category = EQ.{0}", grouping.Key.ToString());
} 
```

我确实看到 FilterChanged 被触发了，但是有两个问题：a）FilterChanged 被触发了两次，b）Filter 也没有被应用。

这一切都适用于 FilterPanel ，但我必须在我的应用程序中隐藏 FilterPanel ，而是使用 TreeView ，以便它可以充当 TOC 以及过滤类别。

任何帮助深表感谢。旁注，我正在使用 SL5 + Ria 服务来获取数据并在 PivotViewer 中显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T22:35:33.923

找到了！我需要调用 SetViewerState(filterstring)

```
pViewer.Filter = string.Format("facet=Category&Category=EQ.{0}", grouping.Key.ToString());
                pViewer.SetViewerState(pViewer.Filter); 
```

# pentaho - 如何编辑数据源中的值（Pentaho 中的 SampleData）

> ID：15887316
> 
> 赞同：1
> 
> 时间：2013-04-08T19:30:24.770
> 
> 标签：pentaho, saiku

谁能给我一个建议，我如何编辑 SampleData 中的值（链接中图片中表格中的数字，值）。我应该查看哪个文件？

谢谢你

[样本数据](https://dl.dropbox.com/u/16645268/Capture.JPG)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T07:25:25.727

您不能直接编辑 sampleData，您可以创建自己的 JNDI 连接并在 saiku 中可视化您自己的模式（Cube）。

# php - wordpress 插件函数，将返回正在保存的帖子的字符数

> ID：15887317
> 
> 赞同：1
> 
> 时间：2013-04-08T19:30:29.733
> 
> 标签：php, wordpress, plugins, count, character

我需要一个函数来获取保存的帖子内容，计算包括标点符号和空格在内的字符并返回一个数字。

我可以使用`$text = mb_strlen($text, "UTF-8");` ，但我不知道如何调用当前正在保存或更新的帖子的内容。

我将通过 using 运行该函数，`add_action('save_post', 'char_count');`但我不知道如何在我的函数中获取正在保存的帖子的帖子内容，以便我可以运行计数脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T19:35:46.450

`get_post()`通过传入帖子 ID 获取您想要的帖子。这将返回内容所在的对象`post_content`，然后您要做的就是检查长度：

```
$post    = get_post('post_id'); 

$content = $post->post_content;

$length  = strlen($content); 
```

如果您在保存时这样做，通常是：

```
add_action( 'save_post', 'post_save' );

function post_save( $post_id ) {
    $post    = get_post( $post_id ); 
    $content = $post->post_content;
    $content = apply_filters('the_content', $content);

    return strlen($content);
} 
```

# applescript - Applescript 从另一个数据库文件加载 FileMaker Pro 脚本

> ID：15887318
> 
> 赞同：1
> 
> 时间：2013-04-08T19:30:29.990
> 
> 标签：applescript, filemaker

我需要从 FMP 文件中导出一些数据。据我所知，Applescript 无法导出数据，但内置的 FMP Scripting 可以。所以我需要告诉 AppleScript 运行一个 FMP 脚本，这很好用。但是，我的问题是我需要的 FMP 脚本不存在于我需要处理的 FMP 数据库中。所以我会创建一个新的数据库，将我的 FMP 脚本保存到其中，然后通过 AppleScript 从这个“容器”数据库中“获取”FMP 脚本，并在另一个 FMP 数据库文件上执行它。

这可能吗？

提前感谢您的任何提示

# java - 通过java中的蓝牙获取Windows计算机的文件夹列表？

> ID：15887319
> 
> 赞同：0
> 
> 时间：2013-04-08T19:30:33.973
> 
> 标签：java, windows, bluetooth

我需要构建一个java程序，通过蓝牙从远程windows pc放置/获取文件；代码还必须浏览远程文件系统。我已经阅读了有关 OBEX 的一些内容，但实际上没有找到任何适用于 Windows 的示例。它如何在程序中实现？

# excel - 调用我的函数

> ID：15887331
> 
> 赞同：1
> 
> 时间：2013-04-08T19:31:11.457
> 
> 标签：excel, vba

我在 VBA 中编写了一个函数，但我不知道如何调用它。

```
Public Function FindTwoStrings(rng As Range, s1 As String, _
  s2 As String) As Integer
    'Application.Volatile
    If TypeName(rng) <> "Range" Then Exit Function
    Dim cell As Range
    Dim accumulator As Integer
    For Each cell In rng.Cells
        If (InStr(1, UCase(cell.Value), UCase(s1), _
          vbTextCompare) > 0) Or (InStr(1, UCase(cell.Value), _
          UCase(s2), vbTextCompare) > 0) Then _
          accumulator = Me.Cells(cell.Row, 5) + accumulator
    Next cell
End Function 
```

如何在我的单元格中调用此函数？我试过做，`=Find....`但它找不到我的功能。有没有我缺少的设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T19:43:45.820

您需要将用户定义的函数放入`Modules`. 不在`Classes`表单、工作表或`Thisworkbook`.

并且您需要在函数退出之前为其设置返回值，否则它将始终具有默认值`0`.

你可能需要重新考虑你的路线

```
accumulator = Me.Cells(cell.Row, 5) + accumulator 
```

~~因为除了传入 UDF 的内容之外，您无法访问任何内容。`Me`因此不允许引用。~~

**编辑：** 您不能使用`Me`模块中的关键字访问对象（需要驻留 UDF），因为`Me`它指的是代码所在的非静态对象，但模块是静态的，这`Me`是不合逻辑的。正如克里斯在评论中指出的那样，您可以*访问*未传入的对象，而不是通过`Me`关键字这样做，您需要明确引用它们，例如`ThisWoorkBook.Sheets("sheetname").Cells(cell.row,5)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T19:47:25.383

一些东西...

1.  Excel 自定义函数（您尝试创建的那种在单元格公式中显示为可用关键字的函数）只能更改一个单元格的值。您会注意到所有内置 Excel 函数（例如，=LEFT）仅影响使用它们的单元格的值。

2.  Excel 正在寻找的方法签名是一个范围......我不知道它是否会像您的示例一样接受多个参数。

3.  您似乎没有在任何地方设置 FindTwoStrings 的值。这就是方法知道要返回什么值的方式。

以下是我编写的一个小函数示例，用于将范围连接成由逗号分隔的单个字符串。你用 =cvsRange( [ some range ]) 调用它

```
Function csvRange(myRange As Range)
    Dim csvRangeOutput As String
    For Each entry In myRange
      If Len(entry) > 0 Then
        csvRangeOutput = csvRangeOutput & entry.Value & ","
      End If
    Next
    If Len(csvRangeOutput) > 2 Then
         csvRange = Mid(csvRangeOutput, 1, Len(csvRangeOutput) - 1)
     Else
         csvRange = ""

      End If

End Function 
```

HTH...

# cmake - add_custom_target SOURCES 选项将依赖项添加到 MAIN_DEPENDENCY 自定义命令

> ID：15887334
> 
> 赞同：1
> 
> 时间：2013-04-08T19:31:22.573
> 
> 标签：cmake

给定以下 CMakeLists.txt 和一些任意的 hello.c：

```
cmake_minimum_required(VERSION 2.6)

get_filename_component(debug_rpath ${CMAKE_CURRENT_BINARY_DIR}/hello-debug.exe REALPATH)
message(STATUS "debug exe: ${debug_rpath}")
get_filename_component(release_rpath ${CMAKE_CURRENT_BINARY_DIR}/hello-release.exe REALPATH)
message(STATUS "release exe: ${release_rpath}")

add_custom_command(
  OUTPUT hello-release.exe
  COMMAND clang ${CMAKE_SOURCE_DIR}/hello.c -O3 -o ${release_rpath}
  MAIN_DEPENDENCY hello.c
#  DEPENDS hello.c
  IMPLICIT_DEPENDS hello.c
  COMMENT "Compiling release..."
  VERBATIM)

add_custom_command(
  OUTPUT ${debug_rpath}
  COMMAND clang ${CMAKE_SOURCE_DIR}/hello.c -g -DNDEBUG -o ${debug_rpath}
  MAIN_DEPENDENCY hello.c
#  DEPENDS hello.c
  IMPLICIT_DEPENDS hello.c
  COMMENT "Compiling debug..."
  VERBATIM)

add_custom_target(hello-release ALL
  DEPENDS ${release_rpath}
  SOURCES hello.c
  VERBATIM)

add_custom_target(hello-debug ALL
  DEPENDS ${debug_rpath}
  SOURCES hello.c
  VERBATIM) 
```

（debug/release 和 clang 作为编译器就是例子，我知道 cmake 有它自己的机制。重要的细节是我有两个使用相同主输入文件的自定义命令）

执行`hello-debug`目标输出：

```
> mingw32-make hello-debug
[ 50%] Compiling release...
[100%] Compiling debug...
[100%] Built target hello-debug 
```

为什么它还要构建发布？

取消注释`SOURCES`or`MAIN_DEPENDENCY`选项只会构建选定的目标。我了解这两个选项仅影响 Visual Studio 项目生成的文档。我同时使用“MinGW Makefiles”和“Visual Studio”生成器，因此保留 SOURCES 选项实际上会很好。错误还是我在监督什么？

# three.js - three.js 鼠标事件处理程序

> ID：15887337
> 
> 赞同：3
> 
> 时间：2013-04-08T19:31:27.320
> 
> 标签：three.js, webgl

我是使用three.js 的新手。我创建了一个网格立方体，并希望通过鼠标单击使其消失。我怎样才能做到这一点？任何帮助或好的教程

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T19:49:41.243

根据您的需要，您可以做几件事。

1.  您可以将其从场景中移除（scene.remove()）。
2.  你可以让它透明（material.transparent = true; material.opacity = 0.0;）
3.  您可以将其移出视图。

# asp.net-mvc - 显示视图时更改 _layout.cshtml 中的一些值

> ID：15887343
> 
> 赞同：1
> 
> 时间：2013-04-08T19:31:40.307
> 
> 标签：asp.net-mvc, asp.net-mvc-4

当我返回 View 或 PartialView 时，有没有办法更改 _layout.cshml 中的某些部分（某些值）？我想显示视图或部分视图并更改 _layout.cshtml 中的一些值

在`_layout.cshtml`：

```
<div id="#mydiv"></div> 
```

在控制器中：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        var model = new MyModel();
        return View(model);
    }
} 
```

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T20:58:05.883

部分是您的占位符`_Layout`，可以由您的视图填充：

例子：

```
<div id="navBar">
  @RenderSection("navBar", required: false)
</div> 
```

将在您的视图中有相应的部分

```
@section navBar 
  {

    @if (Model.needsNavBar==true)
    {

        //navBar code
    }

  } 
```

如果不是很明显，则视图部分定义中的任何标记都会呈现在您的`_Layout`. 的重要性`required: false`是，如果您的部分定义不在您的视图中，您的页面将正常运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T21:54:14.353

好的，因为你不会具体让我们考虑一个场景

您在每个页面上都有一些您想要的数据让我们定义它

```
// pretend it comes from your database or where ever
var somedata = Guid.NewGuid(); 
```

我们如何在布局的导航栏中获得它

好吧，在每个控制器操作方法中，您都可以这样做

```
 public ActionResult Index(AssessorSearchRecordSearchViewModel model)
 {
  ViewBag.SomeData = Guid.NewGuid(); 
  return View();
 } 
```

然后在您的视图中以标题显示它

```
 <h1>@ViewBag.SomeData</h1> 
```

但这会很烦人，而且改变起来很脆弱

你可以为你的控制器创建一个基类

```
public abstract class AppBaseController : Controller
{
    protected override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        base.OnActionExecuting(filterContext);            
        ViewBag.SomeData = Guid.NewGuid(); 
    }

} 
```

这将使它在所有操作方法中都可用

这是一个例子，但实际上有几十种方法可以使数据可用。

# python - 使用 Python (urllib,urllib2,cookielib) 登录网站：如何找到提交所需的信息？

> ID：15887345
> 
> 赞同：2
> 
> 时间：2013-04-08T19:32:03.837
> 
> 标签：python, urllib2, urllib, cookielib

前言：我知道有很多类似问题的回答，例如堆栈溢出。但是，我还没有找到任何与 aspx 登录相关的信息，也没有找到像这样的确切案例。

问题：我需要确定登录[https://cableone.net/login.aspx](https://cableone.net/login.aspx)所需的信息，以便从那里抓取信息。

进展： 到目前为止，我已经在 login.aspx 的源代码中找到了输入字段，并在 python 中用 urllib、urllib2 和 cookielib 拼凑了一个脚本。我忽略了脚本中包含空白值的任何内容。

```
<input type="hidden" name="__EVENTTARGET" id="__EVENTTARGET" value="" />
<input type="hidden" name="__EVENTARGUMENT" id="__EVENTARGUMENT" value="" />
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE"value="/wEPDwUIMzc1NzEwOTZkZFAEfkjXC+VNsqYoayGxa5/q4srT" />
<input type="hidden" name="__EVENTVALIDATION" id="__EVENTVALIDATION" value="/wEWBAK6lKDUCwLVx7ufCQL/+N3OBwLFgNGYD6KeUd6uNDBwc5zcR0u4hqrwv1fM" />
<input name="ctl00$plhMain$txtUserName" type="text" id="ctl00_plhMain_txtUserName" />
<input name="ctl00$plhMain$txtPassword" type="password" id="ctl00_plhMain_txtPassword" />
<input type="submit" name="ctl00$plhMain$btnLogin" value="Login" id="ctl00_plhMain_btnLogin" /> 
```

然后，我在下面将上述输入值与 python 和 urllib 一起使用。

```
import urllib, urllib2, cookielib
from cookielib import CookieJar

url = 'https://myaccount.cableone.net/Login.aspx'

cj = CookieJar()
opener = urllib2.build_opener(urllib2.HTTPCookieProcessor(cj))
cookies = cookielib.CookieJar()

#determine what I need to change with these values 
formValues = {
    "__VIEWSTATE":"/wEPDwUIMzc1NzEwOTZkZFAEfkjXC+VNsqYoayGxa5/q4srT",
    "__EVENTVALIDATION":"/wEWBAK6lKDUCwLVx7ufCQL/+N3OBwLFgNGYD6KeUd6uNDBwc5zcR0u4hqrwv1fM",
    "ctl00$plhMain$txtUserName":"myAccount",
    "ctl00$plhMain$txtPassword":"myPassword"
    }

data = urllib.urlencode(formValues)

response = opener.open("https://myaccount.cableone.net/Login.aspx",data)
thePage = response.read()
httpheaders = response.info()
print thePage 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-14T17:52:00.050

如果表单以任何方式是动态的，那么您概述的方法将很困难。更通用的方法是安装具有良好开发工具的[Google Chrome Canary](https://www.google.com/chrome/browser/canary.html)，单击“检查页面”，然后转到“网络”选项卡，并标记“保留日志”。（您可能需要 Canary 版本，因为如果我没记错的话，普通版本不会捕获一些数据）

打开所有这些，单击“登录”，您将看到所有请求和标头以及 POST 数据。这将为您提供发送到服务器的所有 POST 数据。

现在，您可以测试脚本中的数据，并将其一一删除。顺便说一句，测试请求的另一个选项是使用[Advanced REST Client](https://chrome.google.com/webstore/detail/advanced-rest-client/hgmloofddffdnphfgcellkdfbfbjeloo?hl=en-US)。

# java - GradientPaint / GradientPaint 的 Java 替代品很慢

> ID：15887346
> 
> 赞同：0
> 
> 时间：2013-04-08T19:32:17.710
> 
> 标签：java

有没有在 Java 中使用 GradientPaint 的替代方法？

基本上此时，当我用纯色填充应用程序中的所有矩形时，我的代码速度可以接受。

但是，一旦我开始使用 GradientPaint，一个动作的性能就会下降 1 秒。

举个例子，一个动作是：点击一个图片，然后图片就弹出来很大。

我喜欢保持 GradientPaint 的外观，因为普通填充看起来很糟糕......但我不想失去性能。GradientPaint 有什么替代品吗？

我希望我的问题不是太含糊，但 GradientPaint 似乎太慢了。我尝试手动实现 GradientPaint 并且性能接近 Java 实现，因此可能表明 GradientPaint 根本无法更有效地完成。

使用 GradientPaint 的代码：

```
private void drawRectangle(final Graphics2D g2d, int width, int height, int x, int y, final int borderSize, final Color color) {        
    g2d.setColor(color);
    g2d.fillRect(x, y, width, height);

    //account for border distance
    x += borderSize;
    y += borderSize;
    width -= 2 * borderSize;
    height -= 2 * borderSize;

    int mx = (int)Math.round(x + (width / 2));
    int my = (int)Math.round(y + (height / 2));   

    Color colorEdge = alphaColor(color, 192);
    Color colorInside = alphaColor(color, 128);

    Composite oldComposite = g2d.getComposite();

    g2d.setComposite(AlphaComposite.SrcIn);
    g2d.setColor(color);
    GradientPaint paintQ1 = new GradientPaint(x, y, colorEdge, mx, my, colorInside);
    g2d.setPaint(paintQ1);
    g2d.fillRect(x, y, mx - x, my - y);

    GradientPaint paintQ2 = new GradientPaint(x + width - 1, y, colorEdge, mx, my, colorInside);
    g2d.setPaint(paintQ2);
    g2d.fillRect(mx, y, mx - x, my - y);

    GradientPaint paintQ3 = new GradientPaint(x, y + height - 1, colorEdge, mx, my, colorInside);
    g2d.setPaint(paintQ3);
    g2d.fillRect(x, my, mx - x, my - y);

    GradientPaint paintQ4 = new GradientPaint(x + width - 1, y + height - 1, colorEdge, mx, my, colorInside);
    g2d.setPaint(paintQ4);
    g2d.fillRect(mx, my, mx - x, my - y);
    g2d.setComposite(oldComposite);
}

private Color alphaColor(final Color c1, final int alpha) {
    return new Color(c1.getRed(), c1.getGreen(), c1.getBlue(), alpha);
} 
```

每个图像仅调用 3 次，总面积约为 500 x 700 像素的两倍。

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-02-20T09:09:31.600

回答晚了 6 年，但对于任何找到它的人：

一般来说，Java Paint 实例的工作方式是它们在后台分配非常大的栅格（int 或 byte 数组），然后这些栅格会很快被丢弃，并在下次绘制时重新创建。Java2D 以推动像素为导向，这在一定程度上使情况更加复杂，而现代图形管道的工作方式并非如此。

*您可以在一些限制内*解决此问题：*如果*您只是在进行水平或垂直渐变，将渐变绘制到与屏幕兼容的 BufferedImage 中会更高效（您可以制作一个相当小的图像并将其垂直或水平平铺); 根据我的需要，性能提高了大约 20 倍。这是一个使用这种方法的项目，可用作库： [https ://github.com/timboudreau/visual-library-tabcontrol/tree/master/colors/src/main/java/com/mastfrog/colors](https://github.com/timboudreau/visual-library-tabcontrol/tree/master/colors/src/main/java/com/mastfrog/colors)

当然，如果你正在做复杂的 RadialGradientPaints，那将不会是 tilable。可能*可以*处理任意角度的平铺，但这并不重要 - 在图形上设置一个变换，以便平铺以所需的角度，并变换所有形状，使它们看起来正常定向。

# jquery - 将 JSON 数据附加到 ListView

> ID：15887347
> 
> 赞同：4
> 
> 时间：2013-04-08T19:32:20.137
> 
> 标签：jquery, json

我正在尝试附加以下 JSON 数据：

```
[
  {
    "idfruits": "1",
    "fruit": "Apple"
  },
  {
    "idfruits": "2",
    "fruit": "Orange"
  },
  {
    "idfruits": "3",
    "fruit": "Banana"
  },
  {
    "idfruits": "4",
    "fruit": "Raspberry"
  },
  {
    "idfruits": "5",
    "fruit": "Coconut"
  }
] 
```

使用以下代码：

```
<script type="text/javascript">
    $(function () {
        jQuery.ajax({
            url: "index.php",
            type: "POST",
            dataype: "json",
            async: false,
            success: function (data) {
                console.log(data);
                var items = [];
                $.each(data, function (key, fruit_info) {
                    items.push('<li id="fruit_' + fruit_info.idfruits + '">' + fruit_info.fruit + '</li>');
                });

                $(items.join('')).appendTo('#listy');
            }
        });
    });
</script> 
```

不幸的是，代码给出了以下错误：

```
TypeError: invalid 'in' operand obj
typeof length === "number" && length > 0 && ( length - 1 ) in obj ); 
```

我的目标是创建一个*通用*方法，它总是将第一个 JSON 值解析`key`为`val`.
这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T20:01:06.060

不。ECMAScript 指定哈希行为如下：[http ://bclary.com/2004/11/07/#a-8.6](http://bclary.com/2004/11/07/#a-8.6)

> 对象是属性的**无序集合**。每个属性由一个名称、一个值和一组属性组成。

你不能假设给定一个哈希`{"idfruits":"1","fruit":"Apple"}`，id 将是第一个，而fruit 将是第二个。您将需要直呼他们的名字。

顺便说一句，非常好的问题。

做你想做的事：

```
<script type="text/javascript">
$(function () {
    jQuery.ajax({
        url: "index.php",
        type: "POST",
        dataype: "json",
        async: false,
        success: function (data) {
            console.log(data);
            var items = [];
            $.each(data, function (key, fruit_info) {
                items.push('<li id="fruit_' + fruit_info.idfruits + '">' + fruit_info.fruit + '</li>');
            });

            $(items.join('')).appendTo('#listy');
        }
    });
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T19:36:57.557

我相信你想要使用`fruit`而不是`value`

试试这个

```
 $.each(data, function(key, val) {
        items.push('<li id="' + this.fruit+ '">' + this.fruit + '</li>');
  }); 
```

# jquery - ASP.Net MVC 和 jQuery DataTables 插件麻烦

> ID：15887351
> 
> 赞同：2
> 
> 时间：2013-04-08T19:32:32.683
> 
> 标签：jquery, asp.net, asp.net-mvc

我正在尝试将 jQuery DataTables 插件集成到 ASP.Net MVC 项目中。我在[这里](http://www.codeproject.com/Articles/155422/jQuery-DataTables-and-ASP-NET-MVC-Integration-Part#BackgroundSSP)按照示例进行操作。当我在测试项目中仅运行示例代码时，一切正常。但是当我尝试在我的真实应用程序中调试它时，它`AjaxHandler`甚至没有被执行。我错过了什么吗？

这是调用 jQuery 代码：

```
 $(document).ready(function () {

        $('#myDataTable').dataTable({
            "bServerSide": true,
            "sAjaxSource": "/UX/AjaxHandler",
            "bProcessing": true,
            "aoColumns": [

                {
                    "sName": "ID",
                    "bSearchable": false,
                    "bSortable": false,
                    "fnRender": function (oObj) {

                        return '<a href=\"Details/' + oObj.aData[0] + '\">View</a>';
                    }
                },
                { "sName": "NAME" },
                { "sName": "ADDRESS" },
                { "sName": "TOWN" },

            ]

        });
    });

</script> 
```

然后是我的处理程序；

```
 public ActionResult AjaxHandler(jQueryDataTableParamModel param)
    {

        return Json(new
        {
            sEcho = param.sEcho,
            iTotalRecords = 97,
            iTotalDisplayRecords = 3,
            aaData = new List<string[]>() {
                new string[] {"1", "Microsoft", "Redmond", "USA"},
                new string[] {"2", "Google", "Mountain View", "USA"},
                new string[] {"3", "Gowi", "Pancevo", "Serbia"}
                }

        },
         JsonRequestBehavior.AllowGet);

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T19:36:45.427

如果从 ux 以外的其他控制器调用此视图：

```
"sAjaxSource": "ux/AjaxHandler", 
```

如果从 ux 调用此视图，那么您只需要：

```
"sAjaxSource": "AjaxHandler", 
```

您在 ux 前面的多余斜线正在引起您的悲伤

另外，根据我们的讨论，我在您的桌子上的 ID 与您的 JS 引用的 ID 不同。

# c++ - Visual Studio Designer 在 VS2012 中不适用于 C++/CLI 文件，而在 VS2005 中却可以。知道为什么？

> ID：15887353
> 
> 赞同：2
> 
> 时间：2013-04-08T19:32:34.280
> 
> 标签：c++, visual-studio, visual-studio-2012, c++-cli, visual-studio-designer

我知道，我知道，这个问题已经讨论过很多次了。“只需在任何其他前向声明之前前向声明您的班级，它就会起作用。”

我重新打开这个问题，因为对我来说它根本不起作用。我有 Visual Studio 2012 更新 1。我在 Win 7/x64 上使用 x64 中的 C++/CLI 进行开发。这是我的头文件的样子：

```
#pragma once

namespace MyNameSpace
{
    ref class MyForwardDeclaredClass;

    public ref class MyClass : public System::Windows::Forms::UserControl
    {
    public:
        // My declaration here

        MyForwardDeclaredClass^ mObjectPtr;
    }
} 
```

当我启动设计时，我收到消息**The class MyClass can be designed, but is not the first class in the file。Visual Studio 要求设计人员使用文件中的第一个类。**

因此，根据许多人的建议（这些建议似乎对许多人有用），我添加了以下内容：

```
ref class MyClass; // <-- ADDED FORWARD DECLARATION HERE!
ref class MyForwardDeclaredClass;

public ref class MyClass : public System::Windows::Forms::UserControl
{
    // ... 
```

我仍然收到相同的错误消息。请注意，*我还重新启动了 Visual Studio*，*清理了项目*，并*重新构建了它*。

注意：我尝试删除前向声明并添加 #include "MyForwardDeclaredClass.h" 代替。我得到了同样的错误。

我们最近从 VS2005 迁移到 VS2012。有了VS2005，设计师的使用就马马虎虎了。但它大部分时间都有效。现在，大多数时候我无法让它工作，也找不到任何解决方法。

任何的想法？

**编辑**

好的，按照我得到的建议，我删除了 .suo 和 .sdf 文件，然后重新加载了解决方案，然后重新构建了它。没什么好的。我使用相同的代码文件重新创建了一个新项目：没什么好处。是的，*我的项目中有 .cpp 文件*；-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T13:08:08.000

解决方案非常简单：我必须在**Tools-Options-Text Editor-C/C++/Advanced的****Browsing/Navigation**部分重置默认选项。

如果有一天您遇到同样的问题，请尝试恢复这些选项的默认值。

# java - Java Spring applicationcontext to registerBeanDefinition

> ID：15887356
> 
> 赞同：3
> 
> 时间：2013-04-08T19:32:38.230
> 
> 标签：java, spring

Java Spring 2.5.x

我有`ApplicationContext`并且我想用参数注册 bean

“beanName”，bean 定义

```
GenericBeanDefinition myBeanDef = new GenericBeanDefinition(); 
```

要注册 bean，我需要`BeanDefinitionReader`但不知道如何获得任何帮助

```
getRegistry().registerBeanDefinition 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T21:06:31.770

你确定你需要一个bean定义吗？如果你有一个 ConfigurableApplicationContext 你可以使用暴露的bean工厂：

```
ConfigurableApplicationContext context = ...;
ConfigurableListableBeanFactory beans = context.getBeanFactory();
Object bean = new ...; // create and initialize bean 
beans.registerSingleton(beanName, bean); 
```

而不是`Object`使用适当的 bean 类型并在注册之前填写所需的属性。如果你想使用自动装配，你可以使用

```
Object bean = beans.createBean(Object.class); 
beans.registerSingleton(beanName, bean); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T20:01:40.553

以下解决方案对我有用。

```
GenericApplicationContext context = new GenericApplicationContext();
        context.setParent(applicationContext);

context.registerBeanDefinition("beandefName", beanDefinitionObject); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T19:42:03.920

你可以试试

```
BeanDefinitionReader reader = new XmlBeanDefinitionReader(context); 
```

# websocket - SockJs - 尝试从安全页面创建不安全的 websocket 连接时出错

> ID：15887364
> 
> 赞同：3
> 
> 时间：2013-04-08T19:33:00.393
> 
> 标签：websocket, sockjs

试图连接到[SockJs 服务器](https://github.com/sockjs/sockjs-node/blob/master/examples/echo/server.js)。我正在从安全的**https**页面运行以下代码`https://localhost/index.php`

```
 var sockjs_url = 'http://localhost:9999/echo';
    var sockjs = new SockJS(sockjs_url);

    sockjs.onopen    = function()  {console.log('[*] open' + sockjs.protocol);};
    sockjs.onmessage = function(e) {console.log('[.] message' + e.data);};
    sockjs.onclose   = function()  {console.log('[*] close');}; 
```

我明白`SecurityError: The operation is insecure.`了，它回落到`openxhr-polling`

如果我从**http** `http://localhost/index.php` websocket 运行它，则建立连接。

是否无法从安全页面创建不安全的 websocket？

**更新**这发生在 Firefox 中，但在 Chrome 中我可以打开 websocket

**更新 2**最终我通过使用 https 服务器解决了它。[看这里。](https://gist.github.com/dev-e-loper/5348625)

**更新 3**相关[的 Firefox Websocket 安全问题](https://stackoverflow.com/questions/11768221/firefox-websocket-security-issue)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-08-29T15:16:47.147

一些浏览器禁止从安全页面运行不安全的 WebSocket 连接，[包括 FireFox。](https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API/Writing_WebSocket_client_applications#Security_considerations)

# android - 创建 xml 布局的对象

> ID：15887365
> 
> 赞同：0
> 
> 时间：2013-04-08T19:33:07.093
> 
> 标签：android, xml, object, view

我想通过创建视图对象的实例来为我的活动添加一个视图所以假设这是我的活动

```
public class ConverTo extends FragmentActivity

private LinearLayout l1;
private LengthFragment test;

private static final int RESULT_SETTINGS = 1;

@Override
public void onCreate(Bundle savedInstanceState) { //methods to call on app launch 
    super.onCreate(savedInstanceState);

    setContentView(R.layout.converto_home);  

    pagerAdapter = new MainPagerAdapter();
    pager = (ViewPager) findViewById (R.id.pager);
    pager.setAdapter (pagerAdapter);
    test = new LengthFragment(ConverTo.this);

     l1 = (LinearLayout) getLayoutInflater().inflate(R.layout.view_temperature, null);
    addView(l1); 
```

当我这样做^^时，它会正确显示视图。而不是这样做^^我想这样做

```
 LengthFragment l1= new LengthFragment(context,getLayoutInflater());
 addView(l1); 
```

并且我的 lengthfragment 类将自身关联到一个 xml 文件。

```
public class LengthFragment extends View implements OnClickListener,     OnItemSelectedListener{

public LengthFragment(Context context, LayoutInflater inflater){
    super(context);
    rContext = context;
inflater.inflate(R.layout.view_length, null, false); 
```

我试过这样做^^，它给我的只是一个空洞的观点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T20:50:20.123

对于这条线，

```
 inflater.inflate(R.layout.view_length, container, false); 
```

什么是容器？它应该是您的新视图所需的父级。尝试将最后一个参数设置为 true (attachToRoot)。

# ruby - 在 ruby 中获取 OAuth 令牌（用于 Mendeley API）

> ID：15887366
> 
> 赞同：3
> 
> 时间：2013-04-08T19:33:13.893
> 
> 标签：ruby, api, oauth, mendeley

我似乎无法弄清楚对 Mendeley 的经过[身份验证的 API](http://apidocs.mendeley.com/home/user-specific-methods)的调用的 OAuth 身份验证（请注意，这里有一个未维护的公共方法的宝石[）](https://github.com/rweald/mendeley)。

我在他们的门户网站上创建了一个应用程序，它返回一个应用程序使用者密钥和使用者密码。我将它们弹出到一个 YAML 文件中，然后我可以在我的 Ruby 脚本中读取该文件。

```
 cred = YAML.load_file("/home/cboettig/.mendeley_auth.yaml")
  key = cred[:consumer_key] 
  secret = cred[:consumer_secret] 
```

## 尝试方法一

似乎有一个[使用 Faraday gem 进行身份验证的 Mendeley API 的身份验证调用示例](http://blog.shazino.com/articles/dev/mendeley-api-in-ruby/)。不幸的是，它似乎没有记录如何在最后的实际调用中获取令牌（或者它是哪个令牌？）。（它指向一个 github gist，将令牌生成为密钥的 SHA1 哈希，但我找不到使该工作正常的库依赖项，而且鉴于已经可用于处理 OAuth 的工具数量，它似乎过于复杂...... .) 这是我对方法1的了解：

```
 ## Method 1 -- how do I get the token?
  key = cred[:key] 
  secret = cred[:secret] 
  token = ???? # How to get the token? 
  mendeley = Mendeley.new(token, secret) # Needs a token
  profile = mendeley.get('/oapi/profiles/info/me') # example API call 
```

## 尝试方法二

关于这个主题有一个现有的 SO 问题[Mendeley Custom OAuth Strategy](https://stackoverflow.com/questions/5972048/mendeley-custom-oauth-strategy)，我也未能成功遵循。它表明这可以使用 来处理`Omniauth`，并且看起来这已经在`omniauth-mendeley`gem 中实现了。不幸的是，我无法[对有限的文档](https://github.com/fractaloop/omniauth-mendeley)做出正面或反面，这暗示了这样的事情：

```
 ## Method 2 -- 
 require 'omniauth-mendeley'
  use OmniAuth::Builder do
    provider :mendeley, ENV[key], ENV[secret]
  end 
```

好的，我可以得到密钥和秘密，但是我的 ruby​​-fu 非常有限，我不明白上面的语法。如何执行此操作，然后对 API 进行函数调用（例如`profile/me`方法 1 尝试中显示的调用？尝试运行它只会让我出错

```
 undefined method `use' for main:Object 
```

使这些方法中的任何一种起作用的任何提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:37:46.850

感谢您在 shazino 博客中提及我的文章。

OAuth 主要用于网络。
它需要在两个网站之间进行身份验证。
这就是为什么您在网络之外找不到任何示例来获取令牌的原因。

在我目前的使用中，我们有一个 iOS 应用程序来检索令牌（我们为此开发了[MendeleySDK](https://github.com/shazino/MendeleySDK)）。
它将它提供给我们的服务器，因此我们可以代表用户进行一些 API 调用。
这就是为什么我不需要做 OAuth 舞蹈。

你的方法2是要走的路。`OmniAuth::Builder`是一个[机架中间件](http://railscasts.com/episodes/151-rack-middleware)。它的语法是为了在`config.ru`文件中使用。

尝试创建此文件并将您在示例 2 中演示的代码放在那里。
然后，在您的终端中转到文件的文件夹并键入`rackup`.
您需要先安装 rack gem。
这应该使用您需要的中间件在端口 9292 上启动一个 Web 服务器。
有关使用 OmniAuth 中间件的更多信息，请查看[他们的 wiki](https://github.com/intridea/omniauth/wiki)。

# python - Heroku 端点

> ID：15887367
> 
> 赞同：1
> 
> 时间：2013-04-08T19:33:16.017
> 
> 标签：python, heroku

我编写了一个简单的 HTTP 侦听器并将其部署在 Heroku 应用程序中。我确保将端口绑定在`$PORT`.

现在，我尝试使用`name-of-my-app.herokuapp.com:PORT`带有和不带有端口的 url 连接到应用程序，但我似乎没有通过。

我需要使用什么地址来连接？

谢谢，

塞尔吉奥

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T20:56:44.320

只需连接到端口 80 或 443

```
name-of-my-app.herokuapp.com 
```

Heroku 将负责将 http 和 https 流量路由到分配给您的应用程序的端口。

# macos - 除第一列之外的所有列的每两行的平均值

> ID：15887368
> 
> 赞同：1
> 
> 时间：2013-04-08T19:33:16.347
> 
> 标签：macos, awk

我有一个如下所示的数据集：

> 项目 1 20 30 12项目
> 1 10 50 17
> 项目 2 -9 112 15
> 项目 2 -9 100 10

实际数据集有 101 列。我想打印每列中连续值的平均值（包含名称的第一列除外）。

所以预期的输出是

> 项目1 15 40 14.5
> 项目 2 -9 106 12.5

我从这个[链接](https://stackoverflow.com/questions/8551349/how-to-sum-up-every-10-lines-and-calculate-average-using-awk)中发现，我可以使用以下代码对单个列执行此操作

```
awk '{sum+=$2}(NR%2)==0{print sum/2; sum=0;}' 
```

但我无法弄清楚如何对其余列执行此操作并为平均值行打印唯一的行名（例如：item1）。我试过这样的事情：

```
awk '{for(i=2;i<=NF;i++) sum[i]+=$i} NR%2==0 {print sum[i]/2;sum[i]=0}' 
```

但代码显然不正确，如果有人能指出我做错了什么以及如何改进它以获得预期的结果，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T19:56:57.203

用你的 101 列文件试试这个 awk 解决方案：

```
 awk 'n<2{for(i=2;i<=NF;i++)a[i]+=$i;n++;}
     n==2{for(i=2;i<=NF;i++)s=s sprintf("%s ",a[i]/2)
         print $1,s;s="";delete a;n=0}' file 
```

如果你喜欢检查`NR%2`，这也可以：

```
awk '{for(i=2;i<=NF;i++)a[i]+=$i}
        !(NR%2){for(i=2;i<=NF;i++)s=s sprintf("%s ",a[i]/2) 
        print $1,s;s="";delete a}' file 
```

两条 awk 行的输出与您的示例相同：

```
item1 15 40 14.5 
item2 -9 106 12.5 
```

**笔记**

*   适用于动态列数
*   每行末尾都有一个空格，我对此有点懒惰，如果它很重要，也可以将其删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T19:43:40.143

对从第 2 行开始的连续行对求和，以获得动态数量的字段：

```
$ awk 'NR>1{for(i=2;i<=NF;i++)a[i]+=$i;if(NR%2){printf "%s ",n$1;n="\n";for(i=2;i<=NF;i++)printf "%s ",a[i]/2;delete a}}' file
item1 15 40 14.5 
item2 -9 106 12.5 
```

# python - 在scrapy框架python中解析JSON响应的最佳方法

> ID：15887369
> 
> 赞同：1
> 
> 时间：2013-04-08T19:33:17.047
> 
> 标签：python, json, parsing, request, scrapy

我需要废弃 2 个返回巨大 JSON (1.2MB) 并使用 JSON + JavaScript 构建 HTML 的网站。我想知道最好的方法是什么？

1.  使用 selenium 渲染 JS 并抓取 HTML

    |-> 不是我最喜欢的。性能问题。

2.  在蜘蛛本身中解析 JSON 并创建项目。

    |-> 在这种情况下，你们推荐哪个库？

    |-> 这是可扩展的吗？因为它将仅限于域请求。

3.  将 JSON 本身保存到项目并构建管道以创建项目。

4.  将 JSON 保存到 NoSQL 或队列并使用其他脚本创建项目。

谢谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T19:44:27.550

与大多数事情一样，这取决于您的目标。如果您想要最忠实的 html 渲染，那么您几乎只能在 selenium 或其他可以执行 javascript 的程序化 Web 客户端中执行此操作。

如果您只是对 JSON 对象感兴趣，您可能想研究使用 scrapy 或定制请求来获取 JSON，然后使用 python 的标准[json 模块](http://docs.python.org/2/library/json.html)之类的东西来解释它。

该模块可以非常方便地将 JSON 转换为 dicts，并且可以很容易地使用回调函数将这些 dicts 自动转换为其他 python 对象。

不幸的是，我不确定这种方法的可扩展性。这是你必须进一步调查的事情。

# csv - 删除多列

> ID：15887372
> 
> 赞同：3
> 
> 时间：2013-04-08T19:33:27.000
> 
> 标签：csv, multiple-columns

我试图一次删除多个列而不使用它们的字段信息。我每个月都会从县里收到一个 CSV 文件，其中有多个字段我不想与公众分享。到目前为止，每个月我都会手动删除每个字段。由于我正在尝试学习 python，我想学习如何创建一个脚本来做到这一点。我要删除 58 个字段，因此我不想为每个字段编写脚本，但希望创建一个范围来删除它们。我已经在这里搜索了几个小时的论坛，并尝试了很多不同的方法，以至于我不知道从哪里开始或停止。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T22:08:42.123

我很懒，所以我喜欢尽可能使用现有的库，并且已经成为[pandas](http://pandas.pydata.org)库的传道者。使用@Tim Pietzcker 的例子：

```
Name,Sex,Address,Age
John,M,New York,40
Mary,F,Los Angeles,30 
```

我们可以只保留我们想要使用的列：

```
import pandas as pd
df = pd.read_csv("to_remove.csv")
keep_cols = ["Name", "Address"]
new_df = df[keep_cols]
new_df.to_csv("removed.csv", index=False) 
```

（我们也可以单行，但我认为这样更清楚。）

* * *

解释如下。首先，我们可以将文件读入一个名为 a 的存储对象`DataFrame`：

```
>>> import pandas as pd
>>> df = pd.read_csv("to_remove.csv")
>>> df
   Name Sex      Address  Age
0  John   M     New York   40
1  Mary   F  Los Angeles   30 
```

我们可以从此对象中选择一列或多列：

```
>>> df[["Name", "Sex"]]
   Name Sex
0  John   M
1  Mary   F 
```

然后写出来：

```
>>> new_df = df[["Name", "Sex"]]
>>> new_df.to_csv("removed.csv", index=False) 
```

（该`index=False`位只是告诉它不要添加计算行数的列，上面的数字 0、1），产生

```
Name,Sex
John,M
Mary,F 
```

我们还可以决定只保留以字母“A”开头的列：

```
>>> [col for col in df.columns if col.startswith("A")]
['Address', 'Age']
>>> df[[col for col in df.columns if col.startswith("A")]]
       Address  Age
0     New York   40
1  Los Angeles   30 
```

或使用该`.ix`方法仅保留从 #1 到倒数第二个的列：

```
>>> df.ix[:,1:-1]
  Sex      Address
0   M     New York
1   F  Los Angeles 
```

等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T21:38:49.967

假设您有一个这样的 CSV 文件：

```
Name,Sex,Address,Age
John,M,New York,40
Mary,F,Los Angeles,30 
```

并且您只想*保留*列`Name`和`Address`.

然后你可以做这样的事情（Python 3），利用类的`extrasignore`参数`DictWriter`：

```
import csv
fields = ["Name", "Address"]

with open("test.csv") as infile, open("out.csv", "w", newline="") as outfile:
    #           in Python 2, use open("out.csv", "wb") as outfile:
    r = csv.DictReader(infile)
    w = csv.DictWriter(outfile, fields, extrasaction="ignore")
    w.writeheader()
    for row in r:
        w.writerow(row) 
```

结果：

```
Name,Address
John,New York
Mary,Los Angeles 
```

如果你想反过来做，即指定从文件中*删除*哪些列 ，那么它有点复杂：

```
import csv
delete = ["Sex", "Age"]

with open("test.csv") as infile, open("out.csv", "w", newline="") as outfile:
    #           in Python 2, use open("out.csv", "wb") as outfile:
    r = csv.DictReader(infile)
    firstrow = next(r)  # Need to read the first row so we know the fieldnames
    fields = r.fieldnames
    w = csv.DictWriter(outfile, 
                       [field for field in fields if not field in delete], 
                       extrasaction="ignore")
    w.writeheader()
    w.writerow(firstrow)
    for row in r:
        w.writerow(row) 
```

# ios - 为什么在调用 dealloc 之前 retainCount 不为零？

> ID：15887380
> 
> 赞同：-1
> 
> 时间：2013-04-08T19:33:39.767
> 
> 标签：ios, objective-c

我试图更深入地了解保留释放。这是我的代码，然后我将发布代码运行的输出。我不确定为什么当为'self'调用dealloc时保留计数永远不会为零。

其次，当我为其分配内存时，为什么 self.testNumber 的保留计数为 2，我应该使用“弱”属性来代替测试编号吗？

代码：

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    _testNumber = [[NSNumber alloc] initWithInt:10];
    testNumber = [[NSNumber alloc] initWithInt:102];
    _testInt = 105;
    self.testNumber = [[NSNumber alloc] initWithInt:101];
    NSLog(@"self.testNumber retain count = %d",[self.testNumber retainCount]);
    NSLog(@"self.label retain count = %d",[self.label retainCount]);

    self.label.text = [NSString stringWithFormat:@"%d %d %d",_testNumber.integerValue,self.testNumber.integerValue,testNumber.integerValue ];
    NSLog(@"self before release retain count = %d",[self retainCount]);

    [self release];
    NSLog(@"self after release retain count = %d",[self retainCount]);
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (void)dealloc {
    NSLog(@"_label after before retain count = %d",[_label retainCount]);

    [_label release];
    NSLog(@"_label after release retain count = %d",[_label retainCount]);

    [super dealloc];
} 
```

输出：

```
2013-04-08 15:31:28.503 propertiesTest[5561:907] self.testNumber retain count = 2
2013-04-08 15:31:28.507 propertiesTest[5561:907] self.label retain count = 3
2013-04-08 15:31:28.509 propertiesTest[5561:907] self before release retain count = 3
2013-04-08 15:31:28.510 propertiesTest[5561:907] self after release retain count = 2
2013-04-08 15:31:28.532 propertiesTest[5561:907] _label after before retain count = 3
2013-04-08 15:31:28.534 propertiesTest[5561:907] _label after release retain count = 2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T19:50:17.253

系统的任何其他部分都可能保留了您的号码和标签。某些东西可能已经保留并发送了它`autorelease`，并且自动释放池可能尚未耗尽。您通常不应该对对象的保留计数做出假设，除非它至少与您的代码负责的保留数量一样大。

特别是，一个视图保留了它的所有子视图。这至少占标签保留计数的 +1。

您的数字的保留计数为 2，因为`alloc`返回一个保留计数为 1 的对象，并且您（我假设）将其存储在`strong`or`retain`属性中，这会增加其保留计数。您正在泄漏此对象，因为您负责释放它（以平衡由 执行的保留`alloc`）并且您没有这样做。你应该像这样重写它：

```
self.testNumber = [[[NSNumber alloc] initWithInt:101] autorelease]; 
```

或像这样：

```
self.testNumber = [[NSNumber alloc] initWithInt:101];
[self.testNumber release]; 
```

或像这样：

```
self.testNumber = [NSNumber numberWithInt:101]; 
```

或者，**最重要的是**，打开 ARC 并让编译器负责释放它。

请注意，**您无需查看保留计数即可诊断此问题！** 只需运行静态分析器（从 Xcode 的产品菜单中选择分析）就会显示泄漏。或者，您可以通过学习和理解 Cocoa 内存管理约定（这就是我所做的）来诊断它。阅读[*高级内存管理编程指南*](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/MemoryMgmt.html)。真的没有那么先进。

如果您想了解您的号码或标签在哪里保留和发布，最好的方法是使用分配工具。有关详细信息，请参阅[此答案](https://stackoverflow.com/a/14891837/77567)。还有[这个答案](https://stackoverflow.com/a/13091475/77567)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T19:53:23.343

从 obj-c 编码的角度来看，我不会挂断保留计数。我会考虑使用 ARC（强烈推荐恕我直言，它将帮助您编写可维护、清晰的代码并消除常见的内存管理错误）。

根据您的具体问题，`_label`由多个对象保留。

1.  您的控制器将其保留在`_label`ivar 中。
2.  它的superview正在保留它
3.  根据您的代码，它可以保留在其他地方

**编辑 - 如果您对 ARC 持怀疑态度，请阅读此内容**

不可否认，我是一个 ARC 转换者。我确实了解手动引用计数（旧方法）。一旦我切换到 ARC，我就没有回头。我不打算在这里写长篇大论，但如果你是怀疑论者，这个链接值得一看。最后，如果您还没有准备好或者有自己的理由想要使用 MRC，那就去做吧。这是我的看法，希望有用。

[http://www.learn-cocos2d.com/2012/06/mythbusting-8-reasons-arc/](http://www.learn-cocos2d.com/2012/06/mythbusting-8-reasons-arc/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T19:59:48.433

递减`retainCount`然后立即转身并释放对象有什么意义？

请记住，`retainCount` *永远不能返回零*。

顺便说一句：http: [//www.whentouseretaincount.com/](http://www.whentouseretaincount.com/)

# php - 如何在 cookie 中创建计时器？

> ID：15887383
> 
> 赞同：0
> 
> 时间：2013-04-08T19:34:21.393
> 
> 标签：php, jquery, cookies, timer, stopwatch

我有一页有 5 个子页面（每个子页面都有不同的页面链接）我想要做的是创建一个计时器来计算用户在电话上花费的秒数。

例如

```
main.php  << the landing page
tab1.php  << additional tab
tab2.php  << additional tab
tab3.php  << additional tab
tab4.php  << additional tab 
```

第一次使用点击登陆页面“main.php”在这里我需要启动一个计数器，如果用户点击标签 1、标签 2、标签 3 或标签 4，我希望计时器仍然计算用户的秒数在那些页面上花费。

我使用了一个名为“runner”的 jQuery 插件[http://plugins.jquery.com/runner/](http://plugins.jquery.com/runner/)在我的页面上有一个计数器，但是当用户切换到不同的选项卡时，计数器会被重置。我唯一的问题是如何创建一个计数器，将值传送到其他选项卡而不会丢失计数器。

**问题总结** 我的问题的核心是如何在 cookie 中建立一个实时计数器？这样cookie值将每秒增加1。在我清除不同页面中的 cookie 之前，它不会停止。

我正在使用 PHP 来完成其余的代码

我感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T21:34:12.220

您可能正在寻找一种使用 Javascript 设置 cookie 的方法。如果你真的想，你可以每秒调用`createCookie()`一次。您还必须跟踪开始时间以获取在页面上花费的实际时间。但这只是为了帮助您走上正轨。无论如何，肯定有更好的方法。只听其他评论。

```
var unixTimestamp = Math.round(new Date().getTime() / 1000);
window.setInterval("createCookie('myCookie', unixTimestamp)", 1000);    

function createCookie(c_name, value) {
    var expires = "";
    document.cookie = c_name + "=" + value + expires + "; path=/";
}

function getCookie(c_name) {
    if (document.cookie.length > 0) {
        c_start = document.cookie.indexOf(c_name + "=");
        if (c_start != -1) {
            c_start = c_start + c_name.length + 1;
            c_end = document.cookie.indexOf(";", c_start);
            if (c_end == -1) {
                c_end = document.cookie.length;
            }
            return unescape(document.cookie.substring(c_start, c_end));
        }
    }
    return "";
} 
```

正如已经讨论并发布在[https://stackoverflow.com/a/4825695/407697](https://stackoverflow.com/a/4825695/407697)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T20:15:33.663

您可以在 cookie 中存储开始时间并在清除之前读取结束时间。或者使用会话来做到这一点？

```
 if(!isset($_SESSION['start'] ))$_SESSION['start'] = time(); //on your landing page 

    $time_spent = time()-$_SESSION['start']; //on your tabs 
```

# javascript - 这个标签JS有什么问题？

> ID：15887385
> 
> 赞同：0
> 
> 时间：2013-04-08T19:34:24.560
> 
> 标签：javascript, jquery, css

我正在使用来自这里的标签脚本[http://www.sunsean.com/idTabs/#advanced](http://www.sunsean.com/idTabs/#advanced)。它位于“通常”选项卡下。下面的 jsfiddle 也调用了 jquery.idTabs.min.js。您将在“外部资源”下看到它。谁能看到我做错了什么 - 为什么选项卡没有呈现？

[http://jsfiddle.net/PM3zG/](http://jsfiddle.net/PM3zG/)

```
 <div id="usual1" class="usual"> 
  <ul> 
    <li><a href="#tab1" class="selected">Tab 1</a></li> 
    <li><a href="#tab2">Tab 2</a></li> 
    <li><a href="#tab3">Tab 3</a></li> 
  </ul> 
  <div id="tab1" style="display: block; ">This is tab 1.</div> 
  <div id="tab2" style="display: none; ">More content in tab 2.</div> 
  <div id="tab3" style="display: none; ">Tab 3 is always last!</div> 
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T19:38:48.497

你没有包括 jQuery；idTabs 要求它运行。

`<script src="jquery.min.js"></script>`

[http://jsfiddle.net/PM3zG/4/](http://jsfiddle.net/PM3zG/4/)

要显示“标签”，您需要 CSS 样式：http: [//jsfiddle.net/PM3zG/5/](http://jsfiddle.net/PM3zG/5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T19:40:43.743

你需要扭曲 $("#usual1 ul").idTabs(); 内部文档就绪事件尝试：

```
$(document).ready(function(){
    $("#usual1 ul").idTabs(); 
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T19:54:00.743

您的代码没有错误，您只需要添加正确的资源。请为标签添加最新的 jquery.min.js 和 css。

这是jsfiddle

```
`http://jsfiddle.net/PM3zG/7/` 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T19:51:54.400

# [*jsFiddle 演示*](http://jsfiddle.net/PM3zG/6/)

你需要`css styles`为你的标签。

我刚刚在您的小提琴中包含了这个 css [http://www.sunsean.com/idTabs/main.css](http://www.sunsean.com/idTabs/main.css)，现在它似乎可以按要求工作了。

正如其他人已经指出的那样 - jquery 不包含在您的小提琴中。

# vb.net - MS Access中使用VB.NET获取宏

> ID：15887387
> 
> 赞同：2
> 
> 时间：2013-04-08T19:34:35.757
> 
> 标签：vb.net, ms-access

我正在尝试创建一个 VB.NET 按钮，该按钮将连接到 MS Access 数据库并获取存储在 access 数据库中的所有宏的列表。

获得列表后，我想在组合框中显示值。我在网上找到了一些类似于我正在尝试做的事情，但我找不到任何可以给我一个宏列表的东西。

```
Dim userTables As DataTable = Nothing
Dim connection As System.Data.OleDb.OleDbConnection = New System.Data.OleDb.OleDbConnection()
Dim source As String
source = TextDBPath.Text
connection.ConnectionString = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + source
    Dim restrictions() As String = New String(3) {}
restrictions(3) = "Table"
connection.Open()
' Get list of user tables
userTables = connection.GetSchema("Tables", restrictions)
connection.Close()
' Add list of table names to listBox
Dim i As Integer
For i = 0 To userTables.Rows.Count - 1 Step i + 1
    cbox.items.add(userTables.Rows(i)(2).ToString())
Next 
```

在我正在处理的程序中，这是在 VB6 中通过使用 .Containers("Scripts") 和 DAO.Database 获得的。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T20:31:01.750

起初我认为这将是执行查询的简单问题

```
SELECT [Name] FROM MSysObjects WHERE Type = -32766 
```

但由于“对 MSysObjects 没有读取权限”而失败。OLEDB 似乎可以访问被锁得很紧的系统表。我什至尝试做 a`CREATE VIEW listMacros AS SELECT [Name] FROM MSysObjects...`后跟 a `SELECT * FROM listMacros`。VIEW（查询）已成功创建，但 OLEDB 仍然告诉我不允许我阅读 [MSysObjects]。

真可惜。

但是，我在 Excel 中对 VBA 代码做了一些鬼混，我得到了这个工作......

```
Sub listAccessMacros()
Dim objAccess As Object  '' Access.Application
Dim i As Long
Set objAccess = CreateObject("Access.Application")
objAccess.OpenCurrentDatabase "C:\Documents and Settings\Administrator\Desktop\Database1.accdb"
For i = 0 To objAccess.CurrentProject.AllMacros.Count - 1
    Debug.Print objAccess.CurrentProject.AllMacros(i).Name
Next
objAccess.CloseCurrentDatabase
objAccess.Quit
Set objAccess = Nothing
End Sub 
```

...所以也许你可以想出一种方法来调整它，让它在 VB.NET 中工作。（抱歉，我自己还没有准备好访问 VB.NET....）

# c# - 使用逻辑 OR 将 List 转换为 Int

> ID：15887388
> 
> 赞同：0
> 
> 时间：2013-04-08T19:34:35.923
> 
> 标签：c#, asp.net

在 C# 中，我有一个函数，它以 int 为参数，如下所示：

```
searchValue = (int)(svcMembership.Request.Active | svcMembership.Request.Inactive);

userClient.DelegateAccounts_Retrieve(searchValue); 
```

我有一个 CheckBoxList 为这个列表提供选择，我已经从中捕获了选定的项目作为`List<svcMembership.Request>`（`svcMembership.Request`是一个枚举）。

有没有办法将该列表转换为具有逻辑 OR 的整数，如第一个示例所示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T19:39:24.813

```
using System.Linq;

int searchValue = mySelectedEnumValues.Cast<int>().Aggregate(0, (a, b) => a | b); 
```

确保它`svcMembership.Request`的值是 2 的幂。

另外，查看[Flags](http://msdn.microsoft.com/en-us/library/vstudio/system.flagsattribute%28v=vs.110%29.aspx)属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T19:43:39.177

您是否考虑过每次迭代迭代`checkbox_list.Items`、 加`Selected`和乘以 2？

```
int checkbox_list_bits = 0;
for (int x = 0; x < checkbox_list.Items.Count; x++) {
    checkbox_list_bits *= 2;
    if (checkbox_list.Items[x].Selected) { checkbox_list_bits++; }
} 
```

# sql-server - SQL Server 使用联接更新缓慢

> ID：15887389
> 
> 赞同：4
> 
> 时间：2013-04-08T19:34:38.977
> 
> 标签：sql-server, join, sql-update

我有一个这样的sql更新语句

```
UPDATE t1 SET t1.Field = t2.Field
FROM Table1 as t1
INNER JOIN Table2 as t2 on t1.Key = t2.Key
WHERE t2.FilterField = 'abc' 
```

where 子句使得没有行被更新，该语句运行 30 分钟。（该表有 5000 万行）

如果我将语句更改为有什么奇怪的

```
SELECT t1.Field, t2.Field
FROM Table1 as t1
INNER JOIN Table2 as t2 on t1.Key = t2.Key
WHERE t2.FilterField = 'abc' 
```

几乎立即返回一个空的结果集

如果我将声明更改为

```
UPDATE t1 SET t1.Field = 1
FROM Table1 as t1 
```

它会在大约 3 秒内更新表格。

我真的很困惑 SQL Server 在没有更新任何记录的更新语句上阻塞了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-11-21T22:17:14.757

我们最近有类似的事情，我们的解决方案是：

```
UPDATE t1 SET t1.Field = t2.Field
FROM (SELECT DISTINCT Table1 as t1
INNER JOIN Table2 as t2 on t1.Key = t2.Key
WHERE t2.FilterField = 'abc') t3
WHERE t1.key = t3.key 
```

其中 key 是某种形式的唯一性。对我们来说，导致问题的是订购。所以另一种选择是索引。这使我们的 6 小时查询缩短到大约一分钟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T00:06:43.513

如果时间不是问题，您可以创建单独的更新语句来运行，就像这样，看看会发生什么：

```
SELECT 'UPDATE Table1 SET Field = ' + CAST(t2.Field as varchar(max)) + ' WHERE Key = ' + CAST(t1.[Key] as varchar(max))
FROM Table1 as t1
INNER JOIN Table2 as t2 on t1.[Key] = t2.[Key]
WHERE t2.FilterField = 'abc' 
```

# python - 导入自定义模块时暴露导入的模块

> ID：15887392
> 
> 赞同：0
> 
> 时间：2013-04-08T19:34:50.480
> 
> 标签：python, import, namespaces

如果我创建一个导入单独模块 Bar 的自定义模块 Foo，我希望导入 Foo 的文件也能够直接引用 Bar，就好像它被导入到其本地命名空间中一样。这样，文件可以访问 Foo 和 Bar，而不必将 Bar 引用为 Foo 的成员，例如 Foo.Bar。

我尝试将以下内容添加到 Foo 中的 __init__.py 函数中，但没有奏效：

```
globals()['Bar'] = Bar 
```

# ruby-on-rails - 安装 gem 需要一个小时或更长时间吗？

> ID：15887397
> 
> 赞同：0
> 
> 时间：2013-04-08T19:35:06.457
> 
> 标签：ruby-on-rails, spree

我正在尝试安装 spree_social 扩展程序及其所有依赖项，当我运行 bundler 时，它只是说解决依赖项......很长一段时间。它们有很多，但这似乎太长了。

这是依赖项列表： [https ://gemnasium.com/spree/spree_social](https://gemnasium.com/spree/spree_social)

我只是将 gem "spree_social" 放在 gemfile 中并捆绑在一起。当我尝试在 github 上运行指令时：

```
gem "spree_social", :git => "git://github.com/spree/spree_social.git" 
```

我得到：

```
Resolving dependencies...
Could not find gem 'spree_core (~> 2.0.0.beta) ruby', which is required by gem 'spree_social (>= 0) ruby', in any of the sources. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T20:05:12.890

另一个项目有类似的（不确定是否相同）问题，所以添加了[这个文件](https://github.com/NUBIC/surveyor/blob/master/Gemfile.rails_version)来解决它。

基本上，通过不检查 Rails 版本，对于这个 gem，在这种情况下，依赖解决将需要很长时间，可能需要数小时/数天/数年（我认为任何受影响的用户都不会在一夜之间等待它） ，尽管它最终应该完成。

我没有编写那个文件，但我认为问题的症结在于它帮助捆绑程序缩小了所有可能安装的版本，在这种情况下加快了进程。我认为这种永远存在的依赖关系解决问题往往是特定于项目的。

这不是一个完整的答案，可以让您清楚地回答“为什么”会发生这种情况，但它可能会为您指明正确的方向，或者至少可以帮助您发现正在发生的事情。

# python - Python 文件 write() 未正确写入/格式化

> ID：15887399
> 
> 赞同：1
> 
> 时间：2013-04-08T19:35:15.543
> 
> 标签：python

我正在尝试计算每个数字在文件中出现的次数，然后将原始数字及其计数打印到另一个文件中。原始数字按升序排列。计数足够接近，但问题是结束格式。它以某种方式颠倒了我打印它们的顺序！

这是我的代码：

```
with open(filename) as f:
    prevLine=f.readline()
    out = open(outfile,'w')
    for line in f:
        if line == prevLine:
            curCount = curCount+1
        else:
            out.write("%s \t\t %d\n" % (prevLine , curCount))
            curCount =1
        prevLine=line
    out.close() 
```

前几行应该如下所示：

```
1     7935
2     4455
3     2956 
```

有 7,935 个 1、4,455 个 2 和 2,956 个 3。但是当我查看我创建的新文件（outfile）时，我得到了这个：

```
1
     7935
2
     4455 
```

换行符应该在末尾，而不是在数字之间。为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T19:45:26.800

末尾仍有换行符`prevLine`，请将写入行更改为以下内容：

```
out.write("%s \t\t %d\n" % (prevLine.rstrip() , curCount)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T19:37:35.790

`\n`你忘记了换行符`out.write("%s \t\t %d\n" % (prevLine , curCount))`

此外，不建议在 python 中使用旧的 printf 格式。我个人更喜欢这个：`str_output="""{prev_line}\t\t {current_count}\n""".format(prev_line=prevLine,current_count=curCount)`

就像@mtadd 的答案所说，用于`rstrip()`从`prevLine`字符串中删除换行符。

给予：

```
str_output="{prev}\t\t {cur_cnt}\n".format(prev=prevLine.rstrip(),cur_cnt=curCount) 
out.write(str_output) 
```

# php - Jquery Ajax 将 tinyMCE html 发送到 php 页面

> ID：15887404
> 
> 赞同：1
> 
> 时间：2013-04-08T19:35:43.233
> 
> 标签：php, mysql, ajax, jquery

嘿，当发送到我的 PHP 页面以保存到数据库时，我似乎在从 tinyMCE 框中获取完整的 HTML 代码时遇到问题。

我的 Ajax 代码是这样的：

```
console.log('type=' + theType + '&rID=' + theReplyID + '&email=' + $('#email').val() + '&name=' + $('#name').val() + '&fb=' + FB + '&com=' + tinyMCE.activeEditor.getContent());
    $.ajax({
        type: "post",
        url: "post.php",
        cache: false,
        data: 'type=' + theType + '&rID=' + theReplyID + '&email=' + $('#email').val() + '&name=' + $('#name').val() + '&fb=' + FB + '&com=' + tinyMCE.activeEditor.getContent(),
        success: function(data,status){         
            showMsgBox('Your comment has been posted!','OK','blue');
        },
        error: function(xhr, desc, err){
            showMsgBox('Error while saving comment data','OK','red');
        }
    }); 
```

**console.log**输出正确的测试数据：

```
type=C&rID=&email=test@here.com&name=david dev&fb=na&com=<p>this is just a test&nbsp;    </p>
<p>here&nbsp;</p>
<p>and here</p> 
```

但是当它保存到我的数据库时，它只有：

```
<p>this is just a test 
```

我的 PHP 页面如下所示：

```
<?PHP
   $type = $_POST['type']; //R(reply) or C(comment)
   $email = $_POST['email'];
   $name = $_POST['name'];
   $fb = $_POST['fb'];
   $comment = $_POST['com'];

    $dbhandle = mysql_connect("xx.xxx.xxx.xxx", "xxxxx", "xxxxx") or die(mysql_error());
mysql_select_db("Gvth") or die(mysql_error());

$result = mysql_query("SELECT * FROM UserInfo WHERE Email = '" . $email . "'");  
$count = 0;

while($row = mysql_fetch_assoc($result)) {
    $count++;       
    $id = $row["id"];
}

mysql_close($dbhandle);

   $dbhandle = mysql_connect("xx.xxx.xxx.xxx", "xxxxx", "xxxxx") or die(mysql_error());
    mysql_select_db("Gvth") or die(mysql_error());

    $result = mysql_query("INSERT INTO UserComments (UserInfoID,Comment,ImageUploaded,commentID,accepted,dt) 
    VALUES (" . $id . ",'" . $comment . "','na'," . $id . random_numbers(4) . ",1,'" . date('Y-m-d g:i:s',time()) . "');");
    mysql_close($dbhandle); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T19:42:53.390

如果你想手动创建你的查询字符串（我不推荐），你必须确保像 & 这样的特殊字符是 url 编码的。您可以使用`encodeURIComponent`.

所以请改变

```
data: 'type=' + theType + '&rID=' + theReplyID + '&email=' + $('#email').val() + '&name=' + $('#name').val() + '&fb=' + FB + '&com=' + tinyMCE.activeEditor.getContent(), 
```

到

```
 data: 'type=' + theType + '&rID=' + theReplyID + '&email=' + $('#email').val() + '&name=' + $('#name').val() + '&fb=' + FB + '&com=' + encodeURIComponent(tinyMCE.activeEditor.getContent()), 
```

使用 jQuery post 传递数据的更好方法是将对象传递给数据而不是查询字符串。像这样：

```
data: {type: theType, rID: theReplyID, email: $('#email').val(), name: $('#name').val(), com: tinyMCE.activeEditor.getContent() }, 
```

这样，您就不需要转义任何特殊字符。

此外，在服务器端（在您的 PHP 脚本中），您应该始终在将用户发布的数据插入数据库之前对其进行转义，`mysql_real_escape_string()`就像 Miguelo 提到的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-16T03:03:51.210

您可以为所有要使用的表单数据添加一个类。.formdata 之类的东西

然后，您可以代替写出的对象执行此操作：

```
$('.formdata').serialize(); 
```

这将为您创建对象。

至于使用 tinyMCE，我在尝试保存数据之前曾经使用过它。

```
tinyMCE.triggerSave(); 
```

# java - 如何使mysql备份系统与在线数据库一起使用

> ID：15887408
> 
> 赞同：0
> 
> 时间：2013-04-08T19:35:51.607
> 
> 标签：java, mysql, database, restore

我在网上找到了这段代码，想知道我将如何让它与我的在线数据库一起使用，而不是在本地主机上使用

```
public boolean restoreDB(String dbUserName, String dbPassword, String source) {

        String[] executeCmd = new String[]{"mysql", "--user=" + dbUserName, "--password=" + dbPassword, "-e", "source "+source};

        Process runtimeProcess;
        try {

            runtimeProcess = Runtime.getRuntime().exec(executeCmd);
            int processComplete = runtimeProcess.waitFor();

            if (processComplete == 0) {
                System.out.println("Backup restored successfully");
                return true;
            } else {
                System.out.println("Could not restore the backup");
            }
        } catch (Exception ex) {
            ex.printStackTrace();
        }

        return false;
    } 
```

例如

```
 try{
            Class.forName("java.sql.Driver");
            Connection conn=(Connection)DriverManager.getConnection("jdbc:mysql://localhost:3306/in1010gp33?user=login&password=password");
            Statement st=conn.createStatement();
            String query="UPDATE jobs SET JobStatus = " + cmbStatus.getSelectedItem() + " where JobID='" + txtJobID.getText() + "';";
            ResultSet rs=st.executeQuery(query);

    rs.close();
    st.close();
    conn.close();
        } 
```

# iphone - PBXCP：在最近的 xcode 中没有这样的文件或目录

> ID：15887410
> 
> 赞同：7
> 
> 时间：2013-04-08T19:36:00.677
> 
> 标签：iphone, objective-c, xcode, shell

我一直在用 Xcode 3.0 修改这个开源代码，但是一旦我将我的 Xcode 更新到 4.0+ 并尝试运行它，它就不再工作了。我遇到的第一个错误是这个

```
/Users/newperson/Library/Developer/Xcode/DerivedData/Hellcraft-etesgjzdmfzimlgvakidckjecgij/Build    
/Intermediates/Hellcraft.build/Debug-iphonesimulator/Doom.build/Script-
435F41A90F532CA300887552.sh: line 3: /Applications/Xcode.app/Contents/Developer/Libra/PrivateFrameworks    
/DevToolsCore.framework/Resources/pbxcp: No such file or directory 
```

我认为它与构建阶段下的运行脚本有关，设置如下：

```
/bin/sh -x

PBXCP=${DEVELOPER_DIR}/Library/PrivateFrameworks/DevToolsCore.framework/Resources/pbxcp
${PBXCP} -exclude .svn "${PROJECT_DIR}/../../base" 
"${BUILT_PRODUCTS_DIR}/${UNLOCALIZED_RESOURCES_FOLDER_PATH}/" 
```

但是在网上查看并修改了无数次shell脚本后，我一直无法找到解决方案。我在某处发现 pbxcp 在较新版本的 Xcode 中已被删除，但我无法找到合适的替代品，并且无法将该 DevToolsCore 合并到新版本的 Xcode 中。

在找到一个论坛说我应该运行一个替代脚本以弥补丢失的 pbxcp 文件后，我尝试运行这个：

```
/usr/bin/tar -c -C "${PROJECT_DIR}/myframeworks" --exclude .DS_Store --exclude CVS --exclude 
.svn --exclude .git -H `cd "${PROJECT_DIR}/myframeworks" && find DevToolsCore.framework` | 
/usr/bin/tar -x -C ${BUILT_PRODUCTS_DIR}/${FRAMEWORKS_FOLDER_PATH} 
```

我在项目目录中创建了一个名为 myframeworks 的文件并将 DevToolsCore.framework 添加到其中，尽管这修复了丢失的 pbxcp 问题，但它产生了另一个错误：

```
tar: could not chdir to '/Users/newperson/Library/Developer/Xcode/DerivedData/Hellcraft-
etesgjzdmfzimlgvakidckjecgij/Build/Products/Debug-iphonesimulator/Doom.app/Frameworks'

tar: Write error
Command /bin/sh failed with exit code 1 
```

如果有人有任何建议，那就太好了，我正在拔头发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-06T07:01:21.897

你可能会从你的 Xcode 中删除一些项目。我也有这个 PBXc 错误，我所做的只是我再次添加了相同的文件并摆脱了那个错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T21:27:51.207

请参阅[副本](https://stackoverflow.com/questions/11820995/ios-devtools-core-framework-pbxcp-missing-in-xcode)和[此处](http://www.cocoabuilder.com/archive/xcode/319936-pbxcp-vanished-in-xcode-4-4.html)。该线程状态`pbxcp`已在 Xcode 4.4 中删除，并且由于它是 Xcode 内部工具，因此没有官方替换，但如果您使用`tar`and向下滚动，该线程确实提供了替换`find`。

# jsf - 是否可以在“Action”方法完成之前“更新”Ui 组件？

> ID：15887412
> 
> 赞同：2
> 
> 时间：2013-04-08T19:36:13.877
> 
> 标签：jsf, primefaces

我有一个命令按钮，它调用一个 Action 方法并更新其他相关的 UI 组件：

```
<p:commandButton  value="Commit" action="#{controller.persist}" process="@this" update=":form:buttons :dateCommittedText" /> 
```

在 Action 方法中，值被持久化到数据库中：

```
public void persist() {
    databaseService.save(some item);
    status = "Committed";
} 
```

是否可以`update=":form:buttons :dateCommittedText"`在项目完成持久化到数据库之前进行更新？

目前数据库事务需要几秒钟，这种暂停让我的应用程序感觉非常迟钝。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T20:06:00.883

你可以使用`p:remoteCommand`它，

```
<p:commandButton  value="Commit" action="#{controller.onlyMinorChanges}" 
    process="@this" update=":form:buttons :dateCommittedText" 
    onsuccess="doAfter()"/>

<p:remoteCommand name="doAfter" action="#{controller.persist}"/> 
```

在你的 bean 中：

```
public void onlyMinorChanges() {
    status = "Committed";
}

public void persist() {
    databaseService.save(some item);
} 
```

* * *

无关：

关于无响应，看看这个[AJAX 状态](http://www.primefaces.org/showcase/ui/ajaxStatusHome.jsf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T20:05:49.277

不确定我是否理解，但这是您可以从 bean 更新组件的方式。

```
FacesContext.getCurrentInstance().getPartialViewContext().getRenderIds().add(":componentId"); 
```

# python - python 列表中的 pop() 方法无法正常工作

> ID：15887413
> 
> 赞同：0
> 
> 时间：2013-04-08T19:36:16.460
> 
> 标签：python, list, built-in

当我在 Python 2.7.3 中执行以下代码时：

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-

class A(object):
    def __init__(self):
        self.s = []

class B(object):
    def __init__(self):
        self.a = A()

class C(object):
    def __init__(self):
        self.b = B()

c = C()

print c.b.a.s

c.b.a.s.append(1)
c.b.a.s.append(2)
c.b.a.s.append(3)
c.b.a.s.append(4)
c.b.a.s.append(5)

print c.b.a.s

for element in c.b.a.s:
    print c.b.a.s.pop()

print c.b.a.s 
```

我得到输出：

```
[]
[1, 2, 3, 4, 5]
5
4
3
[1, 2] 
```

但我希望 for 语句会弹出列表中的所有元素并将 cbas 保留为 []。

**问题：** 我在代码中省略了某些内容，还是 pop() 方法有问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T19:39:30.347

您不应该在迭代列表时修改它！

尝试

```
for _ in range(len(c.b.a.s)):
    c.b.a.s.pop() 
```

反而

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T19:50:13.067

正如您所知，问题与您的班级结构无关。发生的事情是你如何使用流行音乐。由于您正在积极修改您正在迭代的列表，因此当前迭代的内部索引最终将超过列表的实际大小，从而导致 for 循环退出。

如果你想使用 pop 清空一个列表，你应该找出运行 pop 的次数（即列表的大小）并运行它多次：

```
for el in xrange(len(c.b.a.s)):
   c.b.a.s.pop() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T19:40:53.543

除非您真正了解其底层实现，否则在使用 for 循环对其进行迭代时修改可迭代对象通常是一个坏主意。相反，请使用如下循环构造：

```
while len(c.b.a.s):
    element = c.b.a.s.pop()
    print element, c.b.a.s 
```

# c++ - 多产 PL2303 Ubuntu vs Arduino Mega

> ID：15887418
> 
> 赞同：1
> 
> 时间：2013-04-08T19:36:33.810
> 
> 标签：c++, linux, serial-port, usb, arduino

我正在测试使用 Prolific PL2303 芯片的 Digitus USB -> RS232 转换器。目的是连接到 GSP 模块 U-blox LEA 6H。我正在开发 Ubuntu 12.10。为了检查我是否可以正确运行转换器，我将它连接到 Arduino Mega Serial Port 1。

我连接了两个设备：

```
Bus 005 Device 002: ID 0403:6001 Future Technology Devices International, Ltd FT232 USB-Serial (UART) IC
Bus 007 Device 003: ID 067b:2303 Prolific Technology, Inc. PL2303 Serial Port 
```

第一个是 /dev/ttyUSB0 上的 Arduino，/dev/ttyUSB1 上的转换器。当我将下面的代码与 /dev/ttyUSB0 一起使用时，它工作得很好，我得到了串行端口监视器号 0...118。但是，当我将其更改为 ttyUSB1 时，结果有些不同。我很抱歉代码中的混乱，它是从 3 个不同的教程编译而来的。

PC端代码：

```
#include <stdio.h>    /* Standard input/output definitions */
#include <stdlib.h>
#include <stdint.h>   /* Standard types */
#include <string.h>   /* String function definitions */
#include <unistd.h>   /* UNIX standard function definitions */
#include <fcntl.h>    /* File control definitions */
#include <errno.h>    /* Error number definitions */
#include <termios.h>  /* POSIX terminal control definitions */
#include <sys/ioctl.h>
#include <getopt.h>
#include <iostream>

/* File descriptor for the port */
int fd;
int n;
uint8_t buffer[255];  /* Input buffer */
const char port_name[] = "/dev/ttyUSB0";

int serialport_init(const char* serialport, int baud)
{
    struct termios toptions;
    int fd;

    //fprintf(stderr,"init_serialport: opening port %s @ %d bps\n",
    //        serialport,baud);

    fd = open(serialport, O_RDWR | O_NOCTTY | O_NDELAY);
    if (fd == -1)  {
        perror("init_serialport: Unable to open port ");
        return -1;
    }

    if (tcgetattr(fd, &toptions) < 0) {
        perror("init_serialport: Couldn't get term attributes");
        return -1;
    }
    speed_t brate = baud; // let you override switch below if needed
    switch(baud) {
    case 4800:   brate=B4800;   break;
    case 9600:   brate=B9600;   break;
#ifdef B14400
    case 14400:  brate=B14400;  break;
#endif
    case 19200:  brate=B19200;  break;
#ifdef B28800
    case 28800:  brate=B28800;  break;
#endif
    case 38400:  brate=B38400;  break;
    case 57600:  brate=B57600;  break;
    case 115200: brate=B115200; break;
    }
    cfsetispeed(&toptions, brate);
    cfsetospeed(&toptions, brate);

    // 8N1
    toptions.c_cflag &= ~PARENB;
    toptions.c_cflag &= ~CSTOPB;
    toptions.c_cflag &= ~CSIZE;
    toptions.c_cflag |= CS8;
    // no flow control
    toptions.c_cflag &= ~CRTSCTS;

    toptions.c_cflag |= CREAD | CLOCAL;  // turn on READ & ignore ctrl lines
    toptions.c_iflag &= ~(IXON | IXOFF | IXANY); // turn off s/w flow ctrl

    toptions.c_lflag &= ~(ICANON | ECHO | ECHOE | ISIG); // make raw
    toptions.c_oflag &= ~OPOST; // make raw

    // see: http://unixwiz.net/techtips/termios-vmin-vtime.html
    toptions.c_cc[VMIN]  = 0;
    toptions.c_cc[VTIME] = 20;

    if( tcsetattr(fd, TCSANOW, &toptions) < 0) {
        perror("init_serialport: Couldn't set term attributes");
        return -1;
    }

    return fd;
}

int main(void){
    fd = serialport_init(port_name, 19200);
    n=-1;
    for(uint8_t i=0; i<255; i++){
        buffer[i]=i;
    }
    n = write(fd, buffer, 120);
    if(n<0){
        fputs("write() failed!\n", stderr);
        printf("ERROR");
        return -1;
    }
    close(fd);
    std::cout << "Port closed";
    return 0;
} 
```

Arduino奇怪的输出：

253 251 249 247 245 243 241 239 237 235 233 231 229 227 225 223 221 219 217 215 213 211 209 207 205 203 201 199 197 195 193 191 189 187 185 183 181 179 177 175 173 171 169 167 165 163 161 159 157 155 153 151 149 147 145 143 141 139 137 135 133 131 129 127 125 123 121 119 117 115 113 111 109 107 105 103 101 99 97 378 93 931 538 38 58

结果似乎是输入乘以二加一。

# javascript - AngularJS - 我的部分控制器

> ID：15887419
> 
> 赞同：7
> 
> 时间：2013-04-08T19:36:35.623
> 
> 标签：javascript, templates, model-view-controller, controller, angularjs

我有一个在我的 DOM 中多次附加的模板。

```
<div ng-controller="theController">
    content does not matter
</div> 
```

所以控制器被实例化了很多次。这是一个问题，因为如果我在控制器中放置一个观察者

```
theController = function($scope) {
    $scope.$on('myVar', function() {
        // run one time for each time the template is repeated
    })
} 
```

关于如何避免这种情况的任何想法？提前致谢。

**更新**

好的，我会尽量清楚。

也许我有一个表单，它是基于异步请求的响应动态构建的。

```
<form ng-controller="formController">
    <div ng-repeat="f in fields">
        <ng-inclide src="f.fields"></ng-include>
    </div>
</form> 
```

控制器类似于：

```
function formController($scope) {
    $scope.fields = [{ template:'', ... }];
    // data come from an ajax request... 
    // here are static for the sake of simplicity.
} 
```

所以我不知道表单中会附加哪些字段。

表单字段结构存储在 html 部分中......类似于：

```
<div ng-controller="inputController">
    <label> .... </label>
    <input type="text" .... />
</div> 
```

或者

```
<div ng-controller="selectController">
    <label> .... </label>
    <select>
        ....
    </select>
</div>

function selectController($scope){
    $scope.$on("myCustomEvent", function(event) {
        cionsole.info("Options were updated");
    });
} 
```

当表单有多个`input type=text`, 或 a`select`时, `inputController`, 或`selectController`被多次实例化。

**为什么您不希望每个实例都发生 $watch？**

我想在发生特定事件时更新页面中选择之一的选项。

相反，我得到的是更新页面中的所有选择。

*从评论中，我了解到在同一页面中拥有更多具有相同控制器的元素是错误的。* **所以目前在我看来唯一可用的解决方案是避免为表单的每个元素定义一个控制器，对吧？**

**更新 2**

`$emit`在**inputController**中使用：

```
function inputController() {
    $scope.fireclick = function(p) {
        if (p == 'specificInput') {
            /* this is a temporary work around 
            I used to bind the event only with a specific field */

            $scope.$emit("myCustomEvent");      
        }
    }
} 
```

这是 html 部分中使用的输入字段的完整代码：

```
<input type="text" ng-click="fireclick(f.name);" name="{{f.name}}" /> 
```

@任何人：

**至少可以确认（并最终说明原因）在同一页面上使用相同控制器的更多元素是错误的**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T19:06:21.820

我认为这样做的 Angular 方法是使用指令。我会在您的主视图的 ng-repeat 中执行类似 ng-switch 的操作，并让 ng-switch 仅包含适当的指令...假设存在“input-text”指令和“input-dropdown”指令：

```
<div ng-swtich on="field.type" ng-repeat="field in fields">
    <div ng-switch-when="text"><input-text ...></div>
    <div ng-switch-when="dropdown"><input-dropdown ...></div>
</div> 
```

我*相信*这样你就不会遇到现在遇到的同样问题。我实际上并没有设置你想要做什么，但我 99% 确定你应该使用指令！它们非常适合您正在做的事情类型，并且可重用性更高。

我使用[http://angularlist.com](http://angularlist.com)上的指令来处理收视率，我可以自信地说，当我在页面上有多个收视率时，它们不会交叉 - 也就是说，我没有在那里看任何东西，只是响应事件...实际上，让我测试一些东西（测试......）是的！我在我的评级指令正在编辑的模型值中添加了一个手表，当点击一个评级时，只有一个观察者被触发 - 有问题的控制器的那个。这不在实时站点上，只是我在家里的开发服务器，但如果它对您有帮助，这里是指令：

```
app.directive("angularStars", function() {
  return {
    restrict: 'E',
    scope: {
      model: '=ngModel',
      notifyId: '=notifyId'
    },
    replace: true,
    transclude: true,
    template: '<div><ol class="angular-stars">' + '<li ng-class="{active:model>0,over:over>0}">1</li>' + '<li ng-class="{active:model>1,over:over>1}">2</li>' + '<li ng-class="{active:model>2,over:over>2}">3</li>' + '<li ng-class="{active:model>3,over:over>3}">4</li>' + '<li ng-class="{active:model>4,over:over>4}">5</li>' + '</ol></div>',
    controller: function($scope, $attrs, $http) {
      $scope.over = 0;

      // TEST WATCH
      $scope.$watch('model', function() {
        console.log('modelChange', $scope.model);
      });

      $scope.setRating = function(rating) {
        $scope.model = rating;
        $scope.$apply();
        if ($attrs.notifyUrl !== void 0 && $scope.notifyId) {
          return $http.post($attrs.notifyUrl, {
            id: $scope.notifyId,
            rating: rating
          }).error(function(data) {
            if (typeof data === 'string') {
              alert(data);
            }
            return $scope.model = 0;
          });
        }
      };
      return $scope.setOver = function(n) {
        $scope.over = n;
        return $scope.$apply();
      };
    },
    link: function(scope, iElem, iAttrs) {
      if (iAttrs.notifyUrl !== void 0) {
        return angular.forEach(iElem.children(), function(ol) {
          return angular.forEach(ol.children, function(li) {
            li.addEventListener('mouseover', function() {
              return scope.setOver(parseInt(li.innerHTML));
            });
            li.addEventListener('mouseout', function() {
              return scope.setOver(0);
            });
            return li.addEventListener('click', function() {
              return scope.setRating(parseInt(li.innerHTML));
            });
          });
        });
      }
    }
  };
}); 
```

指令很难让你理解——我仍然主要是在黑暗中与它们一起拍摄，尝试看看它们是如何工作的——但毫无疑问——你需要的力量就在指令中。我强烈建议阅读[有关编写指令的 AngularJS 文档](http://docs.angularjs.org/guide/directive)，然后花时间查看其他人的指令 - GitHub 上有很多可供学习的东西！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-11T17:34:07.847

这是我设法使用递归字段制作表单的方法（基于此 SO 答案：[https](https://stackoverflow.com/a/15663410/1036025) ://stackoverflow.com/a/15663410/1036025 ）

结果[[图片链接](https://i.imgur.com/pzRvltt.png)]：

![在此处输入图像描述](https://i.stack.imgur.com/t2lty.png)

使用 ng-view 加载 Home.html 部分的**视图控制器：**

```
app.controller('HomeController', ['$scope', '$http', function ($scope, $http) {
    $scope.msg = 'Home Page Message';
}]); 
```

Home.html 中的**表单控制器：**

```
app.controller('NestedFormCtrl', ['$scope', function ($scope) {
    $scope.formData = [
        {label:'First Name', type:'text', required:'true'},
        {label:'Last Name', type:'text', required:'true'},
        {label:'Coffee Preference', type:'dropdown', options: ["HiTest", "Dunkin", "Decaf"]},
        {label: 'Address', type:'group', Fields:[
            {label:'Street1', type:'text', required:'true'},
            {label:'City', type:'text', required:'true'},
            {label:'State', type:'dropdown',  options: ["California", "New York", "Florida"]}
        ]}
    ];

    $scope.$watch('formData[3].Fields[1].label', function(newval, oldval) {
        if (oldval !== newval) {
            console.log('watch', oldval, newval);
        }
    });

    // this was added after and is not shown in the image
    $scope.$watch('formData', function(newval, oldval) {
        if (oldval !== newval) {
            console.log('watch', oldval, newval);
        }
    }, true);

    $scope.changefield = function() {
        $scope.formData[3].Fields[1].label = 'Postal Code';
    }

    $scope.customevent = function(field) {
        var type = field.type;
        // do something for this type
        console.log('customevent', field);
    };
}]); 
```

**Home 部分视图**（这里 ng-include 中的模板路径可以是您的字段的属性，或者您可以使用 switch case 并显示您选择的输入/选择：

```
<h1>{{msg}}</h1>
<ul ng-controller="NestedFormCtrl">
    <li><button ng-click="changefield()">Change</button></li>
    <li ng-repeat="field in formData" ng-include="'views/field.html'"></li>
</ul> 
```

field.html**模板**（每种类型的字段都有一个模板，或者一个主模板在 field.type 属性上带有一个 switch case）

```
<button ng-click="customevent(field)">{{field.label}}</button>
<ul>
    <li ng-repeat="field in field.Fields" ng-include="'views/field.html'"></li>
</ul> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T14:31:12.810

这是一个可以帮助您解决这种情况的方法...

[http://plnkr.co/edit/RvFrmPd4rlAM8aeFSwg7?p=preview](http://plnkr.co/edit/RvFrmPd4rlAM8aeFSwg7?p=preview)

这只是说明如何实现这一点。在不知道您对表单配置数据有多少控制权的情况下，实际上不可能提供更全面的答案。如果你想知道的话，最好在任何你想做 $broadcast 的地方注入 $rootScope （$emit 上升到 DOM 树，而 $broadcast 下降.. 所以 $rootScope 中的 $broadcasting 将到达整个应用程序。）

让我知道这是否对您有帮助。

# django - Django 跨表查询集

> ID：15887422
> 
> 赞同：1
> 
> 时间：2013-04-08T19:36:45.687
> 
> 标签：django, django-queryset

我的模型定义为：

```
class Inventory(models.Model):
    items = models.ManyToManyField(Item, blank=True)
    scanned_items = models.ManyToManyField(Item, related_name='scanned_inventory_set', blank=True) 
```

在一个视图中，我试图获取所有尚未扫描的项目的列表。基本上，它必须是（项目而不是扫描项目）。但是，我不知道如何去做这两者之间的关系。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T20:02:14.507

你可以这样做：

```
items_to_exclude = Inventory.objects.values_list('items', flat=True)
items = Items.objects.exclude(id__in=items_to_exclude) 
```

# java - 如何创建一个区域，将文件拖入其中，将 URI 添加到列表中？

> ID：15887427
> 
> 赞同：0
> 
> 时间：2013-04-08T19:37:04.683
> 
> 标签：java, file, arraylist, drag-and-drop, absolute-path

我正在尝试创建一个程序，即用户将文件拖到一个区域（当前是 JTextArea，但可以是另一个容器），并将文件的绝对路径添加到 ArrayList。我无法弄清楚如何实现文件的拖放。

到目前为止，我已经尝试阅读一些类似的问题，但它们并没有真正帮助我。（这也是针对 Windows，但 linux/mac 支持也是一个选项）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T19:46:33.343

这是一个完整的[例子](http://blog.christoffer.me/2011/01/drag-and-dropping-files-to-java-desktop.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T19:47:51.317

[查看有关DnD](http://docs.oracle.com/javase/tutorial/uiswing/dnd/intro.html)的 oracles 页面。基本上，您可以将所有内容拖放到您的程序中，无论它是直接来自本机浏览器的文件还是`JFileChooser`. 您拖动的只是文件的路径。因此，您只需将您的设置`JTextArea`为接受丢弃并定义它必须如何“解释”被丢弃的对象。

# json - restful json资源关系模型

> ID：15887428
> 
> 赞同：1
> 
> 时间：2013-04-08T19:37:16.560
> 
> 标签：json, api, rest

我希望标题有意义，无论如何...

如果我的 RESTful api 具有以下资源：

```
GET /hands
GET /hands/1
GET /hands/1/fingers 
```

当客户端 GET 的 /hand 或 /hand/1 响应 Json 是否应包含子资源“手指”的数组、手指 ID 的数组或没有手指数组并且客户端必须对 /hands/ 执行第二次 GET 请求时1/手指消耗该资源？

最普遍接受的做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T19:48:42.677

第三个选项不是 RESTful，因为它不允许客户端导航到`fingers`子资源。您不得强迫客户知道您的资源的 URL 是如何构成的。

所以这给你留下了

1.  包括子资源内联，或
2.  链接到他们。

请注意，第二个选项表示链接中的链接：每个手指都必须存在完整的链接（绝对或相对）。ID 是*不够*的，因为它迫使客户知道如何处理它。

什么选择更好？这取决于您的情况。你想自己用手指工作吗？资源和子资源的表示有多大？

除非我有特定的理由不这样做，否则我会选择选项 1。

# c++ - 为什么 C++ 函数可以创建可变长度的数组？

> ID：15887430
> 
> 赞同：5
> 
> 时间：2013-04-08T19:37:23.200
> 
> 标签：c++, arrays, function, memory, integer

根据[这个答案](https://stackoverflow.com/a/15806010/924313)，其中指出：

> 编译器知道 int 类型的大小，因此可以生成正确的汇编指令，该指令将在堆栈上保留足够的空间，以便让 foo 存在。

编译器需要知道函数在堆栈上占用的大小才能实现它。

那么，为什么这段代码会编译呢？

```
int f(int n)
{
    int x[n];
}

int main()
{
    f(3);
    f(5);
    //etc
} 
```

`x`是一个整数数组，但它的大小不是恒定的，它可以在函数被调用的任何时候改变。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-08T19:38:18.027

这不是标准 C++ 中的合法代码。它的编译得益于特定于您的编译器的扩展，该扩展支持[**可变长度数组**](https://stackoverflow.com/questions/3082126/c99-faq-and-variable-length-arrays)，这是 C99 的一项功能。

但同样，这**不是**可移植的 C++。如果您需要动态调整大小，您可以这样重写您的函数：

```
#include <vector>

int f(int n)
{
    std::vector<int> v(n);
} 
```

否则，将其设为模板并以这种方式编写：

```
#include <array>

template<std::size_t N>
int f()
{
    std::array<int, N> a;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-08T19:38:12.260

它编译是因为您使用的是非标准扩展。从严格意义上讲，它不是有效的 C++，但一些编译器确实支持这一点。

在您的情况下（已知 3 和 5），您可以改用模板，这将是有效的，或者直接使用`std::vector`.

```
template<int n>
int f()
{
    int x[n];
}

//...
f<3>(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T20:21:29.577

在这种情况下，编译器的工作确实更难。它现在需要发出代码，这些代码将在运行时确定需要多少内存（`n*sizeof(int)`）以及从哪里获取内存。该内存仍然在与释放位置相同的位置`int y[5];`释放，因此在这方面没有任何变化。

编译器的一种简单解决方案是将幕后代码更改为`int * __x = malloc(n*sizeof(int)`... `free(__x)`。它可能还需要为 重写一些代码`sizeof(x)`，但编译器也可以将 VLA 代码重写为“普通”代码。不需要魔法；VLA 可以仅作为语法糖来实现。

# macos - 定位命令在 Mac 上的 Documents 文件夹中找不到任何内容

> ID：15887431
> 
> 赞同：7
> 
> 时间：2013-04-08T19:37:23.380
> 
> 标签：macos, bash, documents, locate

正如描述中所说。我首先检查我们的数据库是最新的

```
mh547:bin crashandburn4$ sudo /usr/libexec/locate.updatedb
Password:       #password entered and function executed without errors 
```

然后我尝试在我的 Documents 文件夹中搜索一些东西

```
mh547:bin crashandburn4$ cd ~/Documents/
mh547:Documents crashandburn4$ ls
    Mamp_workspace/                         Scenarios.docx                          gc01/
mh547:Documents crashandburn4$ locate Scenarios.docx    #nothing returned 
```

然后我尝试另一个随机文件夹：

```
mh547:Documents crashandburn4$ cd ..
mh547:~ crashandburn4$ ls
    Applications/                Movies/                      drawable/                    untitled-2.pdf
    Desktop/                     Music/                       drawable-xhdpi/              untitled-2.synctex.gz
    Documents/                   Pictures/                    dwhelper/                    untitled-2.tex
    Downloads/                   Public/                      linux_ssh*                   website-terminal-copy-paste
    Dropbox/                     Samsung/                     scripts/                     workspace/
    Google Drive/                Sites/                       untitled-2.aux               workspace_copy_to_linux*
    Library/                     android-sdks/                untitled-2.log
mh547:~ crashandburn4$ locate website-terminal-copy-paste 
/Users/crashandburn4/website-terminal-copy-paste #correct result returned 
```

谁能帮我？我已经坚持了半个小时左右。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-08T20:13:01.653

正如 plundra 所指出的，这是因为`locate`OSX 附带的旧且残缺不全`nobody`，即使以 root 身份运行，也不会索引和/或报告无法读取的文件。但是，您可以做的是安装[homebrew](http://mxcl.github.io/homebrew/)然后`GNU locate`，或者按照[此处](http://www.rubycoloredglasses.com/2012/03/locate-and-updatedb-with-homebrew/#comment-337)的建议使用`mdfind -name`（我手头没有 OSX 盒子来测试它）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-08T20:01:59.833

这是因为您的 Documents-folder 不是世界可读的，这是一件好事，特别是在共享系统上。

[locate(1)](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/locate.1.html)手册页的 BUGS 部分对此进行了解释：

> 定位数据库通常由用户 ''nobody'' 构建，并且 locate.updatedb(8) 实用程序会跳过对用户 ''nobody''、组 ''nobody'' 或 world 不可读的目录。例如，如果您的 HOME 目录不是世界可读的，那么您的任何文件都不在数据库中。

尝试运行`ls -ld ~/Documents`，您将看到权限。如果你不熟悉这些，维基百科有一篇关于[Unix 权限的文章。](http://en.wikipedia.org/wiki/Filesystem_permissions#Notation_of_traditional_Unix_permissions)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-09T14:44:34.387

您可以执行 sudo ln -s /usr/libexec/locate.updatedb /usr/local/bin/updatedb 以使 updatedb 命令可用

# c# - 为什么当我禁用水平滚动时 GridView 选择停止工作？

> ID：15887432
> 
> 赞同：0
> 
> 时间：2013-04-08T19:37:24.013
> 
> 标签：c#, windows-store-apps

**更新 1**：[https ://bitbucket.org/vmrocha/gridview-issue/src](https://bitbucket.org/vmrocha/gridview-issue/src)

**更新2**：使用鼠标的选择有效，无效的选择是使用触摸的选择。

我编写了以下代码，但是当我将水平滚动设置为“禁用”时，GridView 选择停止工作。

XAML：

```
<Page
x:Class="App1.MainPage"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:local="using:App1"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d">

<Page.Resources>

    <ItemsPanelTemplate x:Key="itemsPanelTemplate">
        <StackPanel />
    </ItemsPanelTemplate>

    <DataTemplate x:Key="dataTemplate">
        <Grid Width="100" Height="100">
            <TextBlock Text="{Binding}" />
        </Grid>
    </DataTemplate>

    <Style TargetType="GridView">
        <Setter Property="SelectionMode" Value="Multiple" />
        <Setter Property="IsItemClickEnabled" Value="True" />
    </Style>

</Page.Resources>

<Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
    <ScrollViewer HorizontalScrollMode="Auto"
                  VerticalScrollMode="Disabled">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition />
            </Grid.ColumnDefinitions>
            <!--The selection here does not work-->
            <GridView x:Name="gridView1" ItemsSource="{Binding Items1}"
                      ItemsPanel="{StaticResource itemsPanelTemplate}"
                      ItemTemplate="{StaticResource dataTemplate}"
                      ScrollViewer.HorizontalScrollMode="Disabled">
            </GridView>
            <GridView x:Name="gridView2" ItemsSource="{Binding Items2}" Grid.Column="1"
                      ItemsPanel="{StaticResource itemsPanelTemplate}"
                      ItemTemplate="{StaticResource dataTemplate}">
            </GridView>
        </Grid>
    </ScrollViewer>
</Grid> 
```

C#代码：

```
 public MainPage()
    {
        this.InitializeComponent();

        this.Items1 = new ObservableCollection<string>();
        this.Items2 = new ObservableCollection<string>();

        this.PopulateItems();

        this.DataContext = this;
    }

    private void PopulateItems()
    {
        this.Items1.Add("String 1");
        this.Items1.Add("String 1");
        this.Items1.Add("String 1");
        this.Items1.Add("String 1");
        this.Items1.Add("String 1");
        this.Items1.Add("String 1");
        this.Items1.Add("String 1");

        this.Items2.Add("String 2");
        this.Items2.Add("String 2");
        this.Items2.Add("String 2");
        this.Items2.Add("String 2");
        this.Items2.Add("String 2");
        this.Items2.Add("String 2");
        this.Items2.Add("String 2");
    } 
```

如果我删除 ScrollViewer.Horizo​​ntalScrollMode="Disabled" 行，选择会再次开始工作。

有任何想法吗？

# java - 如何设置 servlet 让它支持特殊字符？

> ID：15887448
> 
> 赞同：2
> 
> 时间：2013-04-08T19:38:17.787
> 
> 标签：java, servlets, special-characters, urlconnection

在我的程序中，当我的 servlet 获取参数时，它应该与 php 建立一个 urlConnection，并取回创建的 xml。一切都很好，但似乎我的程序不支持特殊字符。我相信关键是servlet。但是我应该怎么做才能让 servlet 支持特殊字符呢？例如：

```
String urlString = "XXXXXXX";   
URL url= new URL(urlString);    
URLConnection connection = url.openConnection(); 
```

我希望将连接到 .php 的 url 可以是这样的：

```
http://XXX.php?name=José&type=artist 
```

但结果显示我的网址似乎更改为：

```
http://XXX.php?name=Jos&type=artist 
```

它忽略了特殊字符 é。我该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T20:04:58.457

URL 中只允许使用[这些字符：](http://en.wikipedia.org/wiki/Percent-encoding#Types_of_URI_characters)

```
RFC 3986 section 2.2 Reserved Characters (January 2005)
!   *   '   (   )   ;   :   @   &   =   +   $   ,   /   ?   #   [   ]
RFC 3986 section 2.3 Unreserved Characters (January 2005)
A   B   C   D   E   F   G   H   I   J   K   L   M   N   O   P   Q   R   S   T   U   V   W   X   Y   Z
a   b   c   d   e   f   g   h   i   j   k   l   m   n   o   p   q   r   s   t   u   v   w   x   y   z
0   1   2   3   4   5   6   7   8   9   -   _   .   ~ 
```

其他字符必须是[URL 编码的](https://stackoverflow.com/questions/10786042/java-url-encoding/10786112#10786112)。

基本上，您必须对每个请求参数值进行 URL 编码（实际上还有参数名称，但由于它们在您的特定情况下显然是硬编码的并且已经是 URL 安全的，因此没有必要）。

```
String name = "José";
String type = "artist";
// ...
String url = String.format("http://XXX.php?name=%s&type=%s", 
    URLEncoder.encode(name, "UTF-8"), 
    URLEncoder.encode(type, "UTF-8")); 
```

请注意，所涉及的字符集取决于目标服务器支持的任何内容。许多旧服务器仍然配置为使用 ISO-8859-1。然后，您应该将`"UTF-8"`整个上述示例替换为`"ISO-8859-1"`. 不确定时联系服务器管理员。的 URL 编码形式为`é`UTF-8`%C3%A9`和 ISO-8859-1 `%E9`。

### 也可以看看：

*   [使用 java.net.URLConnection 触发和处理 HTTP 请求](https://stackoverflow.com/questions/2793150/how-to-use-java-net-urlconnection-to-fire-and-handle-http-requests/2793153#2793153)

# r - 从具有多个方面的 ggplot2 中的聚集条形图中删除空因子

> ID：15887461
> 
> 赞同：7
> 
> 时间：2013-04-08T19:38:49.270
> 
> 标签：r, ggplot2

我正在尝试使用 ggplot2 制作更好的 R 基础图版本。不仅有一个共同的传说，还因为我喜欢 ggplot2 的样式和自定义。我的数据由 3 个单独的数据集组成，这些数据集包含针对几种（但不同）治疗的相同两组观察结果。因此，我想在 1 个图形中生成 3 个单独的图，它们有一个共同的图例，但具有不同的因子水平。为了说明我的观点，这里的第一张图片是我到目前为止用 R 基础生成的： ![r 基图最近的图实现](https://i.stack.imgur.com/euu9O.png)

我尝试使用与我的数据具有完全相同结构的虚拟数据生成 ggplot2 图：

```
foo<-data.frame(c(letters,letters),c(rep('T1',26),rep('T2',26)),
runif(52),rep(c(rep('Ori1',12),rep('Ori2',8),rep('ori3',6)),2))
names(foo)<-c('Treatment','Type','Count','Origin')

a<-ggplot(foo,aes(x = factor(Treatment),y = Count))
a+ facet_grid(Origin~., scales="free_y", space="free") + 
geom_bar(stat="identity",aes(fill=factor(foo$Type)),position="dodge")
+theme_bw()+theme(axis.text.x=element_text(angle=60,hjust=1))+coord_flip() 
```

这给了我以下不良结果。 ![ggplot2 图像失败](https://i.stack.imgur.com/spHrh.png)

我知道堆栈溢出主题[Removing Unused Factors from a Facet in ggplot2](https://stackoverflow.com/questions/7031821/removing-unused-factors-from-a-facet-in-ggplot2)和[How can I remove empty factors from a ggplot2 facets？](https://stackoverflow.com/questions/10183292/how-can-i-remove-empty-factors-from-ggplot2-facets)但是，它们不处理我在这里尝试实现的聚集条形图，我觉得它们是问题所在，但是现在不知道如何解决它。欢迎所有指针。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-08T20:11:59.647

为了说明我的评论：

```
a<-ggplot(foo,aes(x = factor(Treatment),y = Count))
a+ facet_wrap(~Origin, scales="free_x") + 
    geom_bar(stat="identity",aes(fill=factor(Type)),position="dodge") + 
    theme_bw() + 
    theme(axis.text.x=element_text(angle=60,hjust=1)) 
```

![在此处输入图像描述](https://i.stack.imgur.com/VKCoR.png)

请注意，如果您添加`coord_flip`并切换到`free_y`您会收到关于不使用某些类型的自由秤的特定错误`coord_flip`，这是您问题的根源。

# java - Netbeans中的Javadoc，结合 并且 {@code} 给出了比想要的字体更大的字体

> ID：15887465
> 
> 赞同：2
> 
> 时间：2013-04-08T19:39:02.333
> 
> 标签：java, netbeans, javadoc

在我的 Javadoc 中，我举例说明了如何使用我的类。由于这是一个多行示例，因此在 stackOverflow 上建议使用 <pre> 和 {@code } 的组合。

它在 netbeans 中看起来不错，但是当我将 javadoc 生成为 HTML 时，它的字体大小会增大，并且不再是等宽字体。像这样：

[截屏](https://dl.dropbox.com/u/2328482/Screen%20Shot%202013-04-08%20at%2021.32.04.JPG)

所以我的问题是：我该怎么做才能让它出现在生成的 html 中的原始等宽字体中？

我在这里粘贴代码有点麻烦，但这就是它的样子。我也用 {@code} 替换了代码标签，但结果是一样的。

这是代码： ![代码示例](https://i.stack.imgur.com/1GNt8.jpg)

# jquery - 如果选择了选项，使用 jQuery 从多个字段中添加/删除多个属性？

> ID：15887466
> 
> 赞同：0
> 
> 时间：2013-04-08T19:39:07.797
> 
> 标签：jquery, forms, attributes, field

我在表单顶部有一个选择框，它基本上隐藏或显示表单的另一部分，具体取决于所选内容。默认情况下选择“否”，并且我的表单验证适用于显示的表单部分。

我正在尝试验证在选择“是”时未隐藏的表单的这一部分，因此需要根据选项选择添加或删除该部分字段的属性（无论哪种方式效果最好）。这是因为可以在没有隐藏部分的情况下提交表单，但是如果该部分未隐藏，那么我想验证字段。

我的选择字段：

```
<select name="Joint" class="input-select" onChange="javascript:fieldsApp2(this);">
        <option value="No" selected="selected" >No</option>
        <option value="Yes">Yes</option>
    </select> 
```

没有验证属性的字段示例（选择“否”时）：

```
<label class='fieldlabel'>First name:</label>
<div class='field'>
<input type="text" name="Forename" class="input-text">
</div>

<label class='fieldlabel'>Last name:</label>    
<div class='field'>
<input type="text" name="Surname" class="input-text">
</div> 
```

相同的字段，但在选择“是”时需要验证属性：

```
<label class='fieldlabel'>First name:</label>
<div class='field'>
<input type="text" name="Forename" class="input-text" data-required="true" data-error-message="Valid First Name recquired.>
</div>

<label class='fieldlabel'>Last name:</label>    
<div class='field'>
<input type="text" name="Surname" class="input-text" data-required="true" data-error-message="Valid Last Name recquired.>
</div> 
```

所以我想我正在寻找一种使用 jQuery 在这两者之间切换的方法！不幸的是，我真的不精通jQuery。任何帮助将不胜感激，干杯！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T19:47:50.967

```
$(function() {
    $('[name="Joint"]').on('change', function() {
        var state     = this.value == 'Yes',
            data_obj1 = {'data-required'      : ( state ? 'true':'' ), 
                         'data-error-message' : ( state ? 'Valid First Name required.' : '') },
            data_obj2 = {'data-required'      : ( state ? 'true':'' ), 
                         'data-error-message' : ( state ? 'Valid Last Name required.' : '') };

        $('[name="Forename"]').attr(data_obj1);
        $('[name="Surname"]').attr(data_obj2);
    });
}); 
```

[**小提琴**](http://jsfiddle.net/fwKyx/)

这应该根据选择值切换数据属性。

使用`data()`通常是要走的路，但这并没有真正改变属性值，所以不确定这是否可行？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T19:46:51.237

像这样的东西应该可以工作，虽然我还没有测试过。

```
//Fires each time the dropdown is changed
$(".input-select[name='Joint']").change(function() {
    if (this.value == "Yes") {
        $(".input-text").attr({
           data-required: true,
           data-error-message: "Valid name required." //You may have to set both fields individually if you want 2 different messages.
        });
    }
    else {
        $(".input-text").removeAttr("data-required data-error-message");
    } 

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T19:51:54.143

如果您的问题是关于获取所需的参数，您可以通过数据属性选择元素，如下所示：

```
$("input[data-required='true']") 
```

这样您就可以获得需要验证的元素列表。jQuery [data() 方法](http://api.jquery.com/data/)将帮助您动态添加这些必需的属性。

# c# - 如何在多个子类上返回不同的类型？

> ID：15887468
> 
> 赞同：4
> 
> 时间：2013-04-08T19:39:21.117
> 
> 标签：c#

我已经阅读了一些与我的问题相关的问题，但我发现它们非常特定于某些程序设计，所以我希望就我自己的具体案例得到一些建议......

我正在开发一个程序，该程序允许您基于节点图进行逻辑操作，例如，您有不同类型的节点；CostantNode 和 Addition 节点，您可以绘制两个常量并将它们链接到 Addition 节点，这样最后一个将处理输入并抛出结果。到目前为止Node类有一个Virtual方法进行处理：

```
//Node Logic
    public virtual float Process(Dictionary<Guid, Node> allNodes)
    {
        //Override logic on child nodes.
        return Value;
    } 
```

此方法在每个派生的 nodeType 上都被覆盖，例如：

```
 /// <summary>
    /// We pass Allnodes in so the Node doesnt need any static reference to all the nodes.
    /// </summary>
    /// <param name="allNodes"></param>
    /// <returns>Addition result (float)</returns>
    public override float Process(Dictionary<Guid, Node> allNodes)
    {
        //We concatenate the different input values in here:
        float Result = 0;

        if (Input.Count >= 2)
        {
            for (int i = 0; i < Input.Count; i++)
            {
                var _floatValue = allNodes[Input[i].TailNodeGuid].Value;
                Result += _floatValue;
            }
            Console.WriteLine("Log: " + this.Name + "|| Processed an operation with " + Input.Count + " input elements the result was " + Result);

            this.Value = Result;
            // Return the result, so DrawableNode which called this Process(), can update its display label
            return Result;
        }
        return 0f;
    } 
```

到目前为止，一切都很好，直到我尝试实现一个 Hysteris 节点，它基本上应该评估输入并返回 TRUE 或 FALSE，这是我卡住了，因为我需要返回一个布尔值而不是浮点值，我让它工作了在程序的视图端解析返回到 Bool 但我希望能够在特定的子节点中自定义 Process() 返回类型，此外，节点将处理的结果存储在一个名为 Value 的浮点变量中，我也会在 Hysteris 中需要节点的值为 True 或 False...

希望你们能给我一些关于如何解决这个问题的指导，我没有深入研究 POO。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T19:42:30.750

C# 没有多态返回值的概念。您必须返回包含两个值的结构：

```
struct ProcessResult
{
    public float Value;
    public bool Hysteresis;
}

ProcessResult Process(Dictionary<Guid, Node> allNodes)
{
    var result = new ProcessResult();
    // Assign value to result.Value
    // Assign hysteresis to result.Hysteresis
    // return result
} 
```

或者我们使用类似于框架的 TryParse 模式的模式：

```
bool TryProcess(Dictionary<Guid, Node> allNodes, out float result)
{
    // Assign value to result
    // Return hysteresis
} 
```

# c# - 检查字符串是否属于字符串模式

> ID：15887480
> 
> 赞同：-2
> 
> 时间：2013-04-08T19:40:09.327
> 
> 标签：c#

我有以下字符串模式：

```
const string STRING_PATTERN = "Hello {0}"; 
```

如何检查字符串是否属于上述字符串模式？

例如：

字符串“Hello World”是上述字符串模式

字符串“abc”不属于上述字符串模式。

最好的

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-08T19:43:49.323

使用正则表达式。

```
Regex.IsMatch(myString, "^Hello .+$") 
```

或如@usr 建议的那样：

```
myString.StartsWith("Hello ") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T19:45:18.610

```
using System;
using System.Text.RegularExpressions;

namespace ConsoleApplication1
{
  class Program
  {
    static void Main(string[] args)
    {
      string txt="Hello World";

      string re1="(Hello)"; // Word 1
      string re2=".*?"; // Non-greedy match on filler
      string re3="((?:[a-z][a-z]+))";   // Word 2

      Regex r = new Regex(re1+re2+re3,RegexOptions.IgnoreCase|RegexOptions.Singleline);
      Match m = r.Match(txt);
      if (m.Success)
      {
            String word1=m.Groups[1].ToString();
            String word2=m.Groups[2].ToString();
            Console.Write("("+word1.ToString()+")"+"("+word2.ToString()+")"+"\n");
      }
      Console.ReadLine();
    }
  }
} 
```

# wpf - ViewModel 到 ViewModel 的通信

> ID：15887484
> 
> 赞同：1
> 
> 时间：2013-04-08T19:40:20.193
> 
> 标签：wpf, data-binding, mvvm

我正在研究由以下部分组成的应用程序区域：

*   Explorer - 包含一个 TreeView
*   PropertyInspector - 包含一个 PropertyGrid
*   Editor - 包含一个 Explorer 和一个 PropertyInspector

如您所见，这些部分以分层方式组织。我的问题是：如何使资源管理器使用的树视图中的选定项目成为属性检查器使用的属性网格的选定对象？

当树视图引发 SelectedItemChanged 事件时，会向 ExplorerViewModel 发送一条命令。PropertyGrids SelectedObject 绑定到 PropertyInspectorViewModel 上的属性。如何连接两个视图模型？一种方法可能是让 EditorViewModel 将 PropertyInspectorViewModel 上的方法附加到 ExplorerViewModel 在收到命令时引发的事件，但这是要走的路还是可以通过数据绑定以某种方式解决？

编辑器不直接使用树视图和属性网格的原因是因为资源管理器和属性检查器，连同所有撤消/重做功能、验证代码等，旨在在其他领域重用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T19:48:23.347

我强烈推荐使用 MVVM 框架。我有类似的要求并决定采用[Tony Sneed 的 Simple MVVM Toolkit](http://simplemvvmtoolkit.codeplex.com/)。它非常轻量级，文档齐全且易于理解，提供了非常有用的功能，并且基本上为您完成了 MVVM 管道的必备功能。

在这种情况下，您需要使用消息总线功能：

"**消息总线**

*有时您需要在应用程序的视图模型之间传递消息。一个很好的例子是当您想要基于某些业务逻辑导航到特定视图时。直接从另一个视图模型引用主视图模型不是一个好主意。这样做会在难以维护的视图模型之间产生相互依赖关系（这种现象称为意大利面条代码）。这就是消息总线（也称为事件调解器或聚合器）派上用场的地方。例如，CustomerViewModel 然后可以使用特定令牌将消息发送到消息总线，并且 MainPageViewModel 可以订阅以接收消息，只要有人将具有相同令牌的消息发送到消息总线。消息标记只是可以定义为类中的常量的字符串。*"[从编程参考页面](http://simplemvvmtoolkit.codeplex.com/wikipage?title=Programming%20Reference)

除此之外，我还使用[Josh Smith's`RelayCommand`](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)来简化`ICommand`通知，正如@eran otzap 所建议的那样

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T16:02:23.920

编辑器 VM 应协调两个子 VM。

将选定的项目属性添加到资源管理器 VM（如果它不存在）并确保它触发属性更改通知。

属性检查器 VM 应该具有类似的属性，即要显示其属性的项目。

然后，编辑器观察资源管理器 VM 的选定项属性的更改，并在更改时将新项传递给属性检查器 VM。

这里不需要涉及消息总线。消息总线适用于松散耦合的 ViewModel 以相互传递消息。例如，文件已打开的应用程序范围通知。

如果您在此处使用消息总线，那么任何对 VM 的重用也会触发消息，这不是您想要的。

# python - scikit-learn 如何绘制 kmean 文档簇？

> ID：15887488
> 
> 赞同：4
> 
> 时间：2013-04-08T19:40:47.713
> 
> 标签：python, plot, machine-learning, scikit-learn, scatter-plot

我想在散点图中绘制这个例子：

[http://scikit-learn.org/dev/auto_examples/document_clustering.html#example-document-clustering-py](http://scikit-learn.org/dev/auto_examples/document_clustering.html#example-document-clustering-py)

我是 sklearn 和 numpy 新手，我想获取向量坐标的数据，这样我就可以绘图了。

编辑：

这是我到目前为止得到的：

```
'''
Created on Apr 4, 2013

@author: v3ss
'''

from classify import recursive_load_files
from time import time
import numpy as np
import pylab as pl

from sklearn import metrics
from sklearn.cluster import KMeans
from sklearn.decomposition import PCA
from sklearn.preprocessing import scale
from sklearn.cluster import KMeans, MiniBatchKMeans
from os.path import isdir
from os import listdir
from os.path import join

from sklearn.feature_extraction.text import TfidfVectorizer
from sklearn.feature_selection import SelectKBest, chi2
from sklearn.linear_model import Perceptron, RidgeClassifier, SGDClassifier
from sklearn.naive_bayes import BernoulliNB, MultinomialNB
from sklearn.svm import LinearSVC
from sklearn.decomposition import RandomizedPCA
from sklearn.utils.validation import check_random_state
from time import time

import numpy as np
import os

import traceback

def clustering_from_files(trainer_path = "./dataset/dataset/training_data/"):
    classifier = "NB"
    load_files = recursive_load_files
    trainer_path = os.path.realpath(trainer_path)
    data_train = load_files(trainer_path, load_content = True, shuffle = False)

    print "Extracting features from the training dataset using a sparse vectorizer"
    t0 = time()
    vectorizer = TfidfVectorizer(sublinear_tf=True, max_df=0.7,
                                 stop_words='english',charset_error="ignore")

    X_train = vectorizer.fit_transform(data_train.data)

    print "done in %fs" % (time() - t0)

    print "Targets:",data_train.target
    km = MiniBatchKMeans(n_clusters=15, init='k-means++', n_init=1,
                         init_size=1000,
                         batch_size=1000, verbose=1)

#     kmeans = KMeans(init='k-means++', n_clusters=5, n_init=1)
    print "Clustering sparse data with %s" % km
    t0 = time()

    return  (km,X_train)

def reduce_dems(X_train):
    rpca=RandomizedPCA(n_components=2)
    return rpca.fit_transform(X_train)

def plot(kmeans,reduced_data):
    kmeans.fit(reduced_data)
    h = 0.1
    x_min, x_max = reduced_data[:, 0].min() + 1, reduced_data[:, 0].max() - 1
    y_min, y_max = reduced_data[:, 1].min() + 1, reduced_data[:, 1].max() - 1
    xx, yy = np.meshgrid(np.arange(x_min, x_max, h), np.arange(y_min, y_max, h))
    Z = kmeans.predict(np.c_[xx.ravel(), yy.ravel()])

    # Put the result into a color plot
    Z = Z.reshape(xx.shape)
    pl.figure(1)
    pl.clf()

    pl.plot(reduced_data[:, 0], reduced_data[:, 1], 'k.', markersize=2)
    # Plot the centroids as a white X
    centroids = kmeans.cluster_centers_
    pl.scatter(centroids[:, 0], centroids[:, 1],
               marker='x', s=20, linewidths=3,
               color='r', zorder=10)
    pl.title('K-means clustering on selected 20_newsgroup (religion group and technology) ')
    pl.xlim(x_min, x_max)
    pl.ylim(y_min, y_max)
    pl.xticks(())
    pl.yticks(())
    pl.show()

def main():
    k_means,X_train = clustering_from_files()
    reduced = reduce_dems(X_train)
    plot(k_means,reduced)

if __name__ == "__main__":
    main() 
```

![结果](https://i.stack.imgur.com/WzDSx.png)

编辑：

这现在效果更好，可以增加集群大小。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T20:03:28.073

问题是您的集群本身是非常高维的。例如，如果您不使用特征散列，您将拥有语料库中每个不同单词的坐标。如果您的语料库相对较大，这通常意味着您将拥有比标准词典中的单词更多的坐标。[您可以使用诸如多维缩放之](http://scikit-learn.org/dev/modules/manifold.html#multi-dimensional-scaling-mds)类的嵌入技术来获得您学习的 kmeans 向量的二维嵌入，并且您可以绘制它。

# c - 使用数组将 C 代码转换为 MIPS 汇编语言

> ID：15887493
> 
> 赞同：2
> 
> 时间：2013-04-08T19:41:11.747
> 
> 标签：c, arrays, assembly, mips

好的，所以我必须将以下 C 代码段转换为 MIPS 程序集。

f = k + A[5]

问题告诉我 f 存储在寄存器 $s3 中，k 在 $s2 中，数组 A 的基地址是 $s4。这就是我的回答：

添加 $s3、$s2、$s4

这个对吗？我必须对数组中的 5 做任何特别的事情吗？我对 MIPS 很陌生，所以如果非常感谢，任何和所有的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T19:46:30.833

你在做这个家庭作业吗？如果是这样，您实际上是在编写一个可执行程序还是只是在回答一系列问题？

无论哪种方式是的，您都需要考虑数组中的 5。问题是告诉您`$s4`指向数组的**基地址**，而不是第 5 个索引。

*提示：A[0] 将与数组的基地址位于同一地址。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T19:52:37.387

试试这个。（在我的头顶上）。记住每个索引是 * 4。

```
li $t2, 6            # init 6 to $t2
addi $t2, $t2, $t2   # $t2 * 2
addi $t2, $t2, $t2   # $t2 * 2
addi $t1, $t2, $s4   # A[6 * 4] 
lw $t4, 0($t1)       # load A[6] int $t4
addi $s3, $s2, $t4   # obtain f 
```

# php - PHP，在对database.table进行INSERT时获取空白站点

> ID：15887496
> 
> 赞同：0
> 
> 时间：2013-04-08T19:41:30.217
> 
> 标签：php, insert

我只想说，这里很可能会变得相当简单。

我正在一个网站上工作，用户基本上填写一个表单，其中包含一些数据，这些数据在提交时被发送（GET）到另一个 php 页面，该页面在标题下方包含我的 db-connection 脚本，然后继续执行INSERT 形式的 SQL 查询。此页面仅显示为空白。如果没有 mysql_error()，我有一些应该显示的 html 元素。

这是页面的样子，我在这里做错了什么？

```
 <?php                                                                          
          include '/partials/header.php';                                              
          include '/functions/db_connection.php';                                      

           if(isset($_POST['value0'])) {                                                

            $value0 = mysql_real_escape_string($_POST["value0"]);                        
            $value1 = mysql_real_escape_string($_POST["value1"]);                  
            $value2 = mysql_real_escape_string($_POST["value2"]);                
            $value3 = mysql_real_escape_string($_POST["value3"]);                  
            $value4 = mysql_real_escape_string($_POST["value4"]);                        
            $value5 = date("d-m-Y");                                                     

            $query = "INSERT INTO db.my_table(value0, value1, value2, value3, value4, value5, value6, value7) 
                      VALUES ('. $value0 .',                                        
                                '. $value1 .',                                       
                                '. $value2 .',                                       
                                '. $value3 .', 
                                '. $value4 .',                                          
                                '. $value5 .',                                          
                                'enum-value', 
                                '. $value7 .');";                                        

              $result = mysql_query($query);                                           

              if(!$result)                                                             
              {
                //something went wrong, display the error                              
                echo 'Congratulations, something went wrong. You are officially retarded.<br /><br />' . mysql_error();
                $sql = "ROLLBACK;";
                $result = mysql_query($sql);                                           
              } 
              else
              {                                                                        
                $sql = "COMMIT;";                                                      
                $result = mysql_query($sql);                                           
        ?>      

          <div class="box">                                                            
            <h1 class="green">That's it!</h1>                                       
            <p>Let's do some more novice php scripting.</p>

          </div>

        <?php
      }
    }
?> 
```

这是我的连接文件：

```
 <?php
    $server = "servername";
    $userName = "username";
    $password = "password";
    $db = "db";       

    $con = mysql_connect($server,$userName,$password,$db);  

    if (mysqli_connect_errno($con)) 
    {
      echo "Failed to connect to MySQL: " . mysqli_connect_error();
    }

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T19:45:02.713

您的字符串引用错误或至少连接错误...

```
$query = "INSERT INTO yada yada
          VALUES ('. $value0 .', 
                  ^--- 
```

您已经开始使用双引号字符串，因此变量不需要“连接”到字符串中。例如`$x = "hello $there how are you"`会正常工作。所以要么在整个过程中切换到双引号：

```
 VALUES ('" . $value0 . "' ...
           ^--           ^-- 
```

或简单地消除连接的尝试：

```
 VALUES('$value0', .... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T19:45:28.160

更改此代码块

```
$query = "INSERT INTO db.my_table(value0, value1, value2, value3, value4, value5, value6, value7) 
          VALUES ('. $value0 .',                                        
                    '. $value1 .',                                       
                    '. $value2 .',                                       
                    '. $value3 .', 
                    '. $value4 .',                                          
                    '. $value5 .',                                          
                    'enum-value', 
                    '. $value7 .');"; 
```

对这个

```
$query = "INSERT INTO db.my_table(value0, value1, value2, value3, value4, value5, value6, value7) 
          VALUES ('. $value0 .',                                        
                    '. $value1 .',                                       
                    '. $value2 .',                                       
                    '. $value3 .', 
                    '. $value4 .',                                          
                    '. $value5 .',                                          
                    'enum-value', 
                    '. $value7 .')"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T19:45:45.853

```
$query = "INSERT INTO db.my_table(value0, value1, value2, value3, value4, value5, value6, value7) 
              VALUES ('". $value0 ."',                                        
                        '". $value1 ."',                                       
                        '". $value2 ."',                                       
                        '". $value3 ."', 
                        '". $value4 ."',                                          
                        '". $value5 ."',                                          
                        'enum-value', 
                        '". $value7 ."')"; 
```

查询中的报价错误。看上面。您应该使用“..”来进入可变领域，而不是 '. - 因为您的字符串是使用 ".

# javascript - 使用 Javascript 在 onload 之外访问图像宽度

> ID：15887501
> 
> 赞同：0
> 
> 时间：2013-04-08T19:41:55.833
> 
> 标签：javascript, image, callback, onload

我正在尝试使用回调来确定图像宽度是否正确。似乎在使用 onload 时，不可能返回 true 或 false。

这个回调是否可以缓解这个问题？似乎 onload 事件永远不会触发。

```
validateImageSize(function(imageWidth){
     alert(imageWidth);
});

function validateImageSize(callback) {

    imageFile = document.getElementById("filePath").files[0];
    imageFileUrl = window.URL.createObjectURL(imageFile);
    uploadedImage = new Image();

    uploadedImage.onload = function(){
        var imageWidth = uploadedImage.width;
        callback(imageWidth); 
    };

    uploadedImage.src = imageFileUrl;

}; 
```

# wordpress - 元数据机器人在哪里没有索引，我的 wordpress 网站中没有关注来自哪里？

> ID：15887505
> 
> 赞同：0
> 
> 时间：2013-04-08T19:42:05.687
> 
> 标签：wordpress, seo

这是我的 wordpress 网站：linearedge.com

如果你检查源代码，你会发现：

```
<meta content="noindex,nofollow" name="robots"> 
```

我没有使用任何 SEO 插件，那么，这是从哪里来的？我还检查了我的 header.php 并且该行不存在。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T19:47:14.917

通过调用主题文件`wp_head()`将其放入那里。`header.php`检查您的搜索引擎可见性设置（设置 > 阅读）。确保未选中该框。

# ember.js - 给定数据模板名称的匹配模板名称是什么

> ID：15887506
> 
> 赞同：3
> 
> 时间：2013-04-08T19:42:06.437
> 
> 标签：ember.js, gruntjs, grunt-ember-templates

我正在使用[grunt-ember-templates](https://github.com/dgeb/grunt-ember-templates)预编译我的模板。正如预期的那样，该工具将我的模板放入`Ember.TEMPLATES`数组中。我正在微调`grunt-ember-templates`. 为此，我想知道`Ember.TEMPLATES`数组中的预期键是什么。假设我有这个模板：

```
<script type="text/x-handlebars" data-template-name="phones/index">
    ....
</script> 
```

目前我在一个名为 的文件中有这个模板`app/templates/phones_index.hbs`，`grunt-ember-templates`并将预编译的模板放入`Ember.TEMPLATES["app/templates/phones_index"]`，但这是错误的。

预期的密钥是`data-template-name="phones/index"`什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T20:09:40.530

在您的示例中，键`Ember.TEMPLATES`应该是“电话/索引”。

您可以配置 grunt-ember-templates 以删除路径的第一部分并保留之后的所有内容`app/templates/`，假设您将模板放置在 file 中，这将为您提供正确的密钥`app/templates/phones/index.hbs`。使用此设置，`app/templates/phones/index.hbs`文件的键将是`Ember.TEMPLATES['phones/index']`，这与具有未编译`<script>`标记的. 相同`data-template-name="phones/index"`。

Gruntfile.js（与[本](https://github.com/trek/ember-todos-with-build-tools-tests-and-other-modern-conveniences)项目中的 Gruntfile.js 相同）：

```
ember_templates: {
  options: {
    templateName: function(sourceFile) {
      return sourceFile.replace(/app\/templates\//, '');
    }
  },
  'dependencies/compiled/templates.js': ["app/templates/**/*.hbs"]
}, 
```

# android - 如何为 Nexus 7 和 UG007 MiniPC 创建可运行的 Android 虚拟设备？

> ID：15887508
> 
> 赞同：1
> 
> 时间：2013-04-08T19:42:13.673
> 
> 标签：android, visual-studio, xamarin.android, xamarin, avd

Xamarin Studio 商业版具有 Nexus 7 的设备定义，但我从该设备创建的 AVD`internal error`在尝试使用 Xamarin Studio 部署时抛出错误，并`Waiting for Device...`在 Visual Studio 2012 中挂起。

我对 UG007 MiniPC 也有同样的问题。

有关我如何创建 AVD 和设置最低 Android 版本的更多详细信息，请参阅[Setting Up Xamarin Studio Business Edition v4.0.3 for Google Nexus 7 和 UG007 MiniPC Development](http://oakleafblog.blogspot.com/2013/04/setting-up-xamarin-studio-business.html)。

有关 UG007 Android MiniPC 的更多详细信息，请参阅[CozySwan UG007 和其他 Android 4.1+ MiniPC 设备的初步了解](http://oakleafblog.blogspot.com/2013/01/first-look-at-cozyswan-ug007-android-41.html)。

提前感谢您对我做错了什么的任何启发。

# android - 如何在视图中绘制截面？

> ID：15887510
> 
> 赞同：0
> 
> 时间：2013-04-08T19:42:16.420
> 
> 标签：android, android-layout

请在下面帮助我。如何按图片[http://developer.android.com/design/media/metrics_forms.png](http://developer.android.com/design/media/metrics_forms.png)上的部分划分垂直布局？它不是 ListView，我只是用文本集和编辑视图进行布局。我只需要把它分开，这样看起来会更好。热画吗？

还有如何使 EditText 看起来像图片上的输入？）

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T20:20:07.903

您正在寻找 Android Holo 主题，请查看**[有用的链接以生成 Holo 主题的九个补丁图像和 res drawables 和样式](http://android-holo-colors.com/)**

您可以使用具有垂直方向的 LinearLayout，以便组件之间的间距创建一个通用 xml，并将其包含在布局中需要的任何位置。

# angularjs - 在标记中将数据传递给控制器

> ID：15887522
> 
> 赞同：1
> 
> 时间：2013-04-08T19:43:05.800
> 
> 标签：angularjs

如何将数据传递到标记上的控制器范围？类似的东西：

```
<div>
   {{$scope.name = 'Andrew'}} // but I don't want this line to be shown on the browser 
   <input ng-model='name' />
</div> 
```

假设我在 asp.net 应用程序中使用 angular.js 并且一些助手返回 json 字符串，我需要将其作为对象传递给`$scope`. 我当然可以创建一个自定义指令并将 json 字符串放入属性中，

```
public static string SomeHelper(this HtmlHelper){
    return new JavaScriptSerializer().Serialize( new { Foo = 'blabla'}).ToString();
} 

<div my-data='@Html.SomeHelper()' >
</div> 
```

然后读取属性并解析字符串，并将对象附加到范围：

```
.directive('myData', function(){
    return function(scope, element, attrs){
        $scope.data = JSON.parse(attrs.myData);
    }
 }) 
```

但也许有更简单的方法

# python - 安装具有不同名称的现有购买模块 - OpenErp

> ID：15887523
> 
> 赞同：0
> 
> 时间：2013-04-08T19:43:08.480
> 
> 标签：python, xml, openerp

我正在尝试使用不同的文件夹名称从 OpenErp 安装购买应用程序模块，以便将代码视图编辑为不同的应用程序而不修改现有的应用程序。

```
Client Traceback (most recent call last): 
File "C:\Program Files\OpenERP 7.0-20130321-002353\Server\server\openerp\addons\web\http.py", line 203, in dispatch
File "C:\Program Files\OpenERP 7.0-20130321-002353\Server\server\openerp\addons\web\controllers\main.py", line 1133, in call_button
File "C:\Program Files\OpenERP 7.0-20130321-002353\Server\server\openerp\addons\web\controllers\main.py", line 1121, in _call_kw
File "C:\Program Files\OpenERP 7.0-20130321-002353\Server\server\openerp\addons\web\session.py", line 43, in proxy
File "C:\Program Files\OpenERP 7.0-20130321-002353\Server\server\openerp\addons\web\session.py", line 31, in proxy_method
File "C:\Program Files\OpenERP 7.0-20130321-002353\Server\server\openerp\addons\web\session.py", line 104, in send

Server Traceback (most recent call last):
File "C:\Program Files\OpenERP 7.0-20130321-002353\Server\server\openerp\addons\web\session.py", line 90, in send
File "C:\Program Files\OpenERP 7.0-20130321-002353\Server\server\.\openerp\netsvc.py", line 293, in dispatch_rpc
File "C:\Program Files\OpenERP 7.0-20130321-002353\Server\server\.\openerp\service\web_services.py", line 626, in dispatch
File "C:\Program Files\OpenERP 7.0-20130321-002353\Server\server\.\openerp\osv\osv.py", line 188, in execute_kw
File "C:\Program Files\OpenERP 7.0-20130321-002353\Server\server\.\openerp\osv\osv.py", line 131, in wrapper
File "C:\Program Files\OpenERP 7.0-20130321-002353\Server\server\.\openerp\osv\osv.py", line 197, in execute
File "C:\Program Files\OpenERP 7.0-20130321-002353\Server\server\.\openerp\osv\osv.py", line 185, in execute_cr
File "C:\Program Files\OpenERP 7.0-20130321-002353\Server\server\openerp\addons\base\module\module.py", line 424, in button_immediate_install
File "C:\Program Files\OpenERP 7.0-20130321-002353\Server\server\openerp\addons\base\module\module.py", line 475, in _button_immediate_function
File "C:\Program Files\OpenERP 7.0-20130321-002353\Server\server\.\openerp\pooler.py", line 39, in restart_pool
File "C:\Program Files\OpenERP 7.0-20130321-002353\Server\server\.\openerp\modules\registry.py", line 218, in new
File "C:\Program Files\OpenERP 7.0-20130321-002353\Server\server\.\openerp\modules\loading.py", line 348, in load_modules
File "C:\Program Files\OpenERP 7.0-20130321-002353\Server\server\.\openerp\modules\loading.py", line 259, in load_marked_modules
File "C:\Program Files\OpenERP 7.0-20130321-002353\Server\server\.\openerp\modules\loading.py", line 162, in load_module_graph
File "C:\Program Files\OpenERP 7.0-20130321-002353\Server\server\.\openerp\modules\module.py", line 405, in load_openerp_module
File "C:\Program Files\OpenERP 7.0-20130321-002353\Server\server\.\openerp\modules\module.py", line 133, in load_module
File "C:\Program Files\OpenERP 7.0-20130321-002353\Server\server\openerp\addons\compra\__init__.py", line 26, in <module>
File "C:\Program Files\OpenERP 7.0-20130321-002353\Server\server\openerp\addons\compra\report\__init__.py", line 22, in <module>
File "C:\Program Files\OpenERP 7.0-20130321-002353\Server\server\openerp\addons\compra\report\order.py", line 32, in <module>
File "C:\Program Files\OpenERP 7.0-20130321-002353\Server\server\.\openerp\report\report_sxw.py", line 392, in __init__
File "C:\Program Files\OpenERP 7.0-20130321-002353\Server\server\.\openerp\report\interface.py", line 65, in __init__
File "C:\Program Files\OpenERP 7.0-20130321-002353\Server\server\.\openerp\report\interface.py", line 45, in __init__
AssertionError: The report "report.purchase.order" already exists! 
```

它向我抛出了这个错误，如果没有安装现有的购买应用程序将其安装为另一个，就不可能只更改文件夹名称并创建新数据库吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T03:44:55.760

这不是定制的好方法。如果你这样做 OpenERP 会给你关于报告已经存在的错误。您应该制作自己的模块以进行自定义。

如果您真的不想制作自己的模块，那么您应该删除删除所有报告，或者您也应该更改 py 和 xml 中的报告名称。

这将解决您的错误。

谢谢你。

# java - favicon 未缓存在 tomcat 中

> ID：15887526
> 
> 赞同：2
> 
> 时间：2013-04-08T19:43:19.627
> 
> 标签：java, tomcat

我如何缓存网站图标。我在 web.xml 中使用图像的 ExpiresFilter 和 ExpiresByType 但它不起作用

```
<filter-name>ExpiresFilter</filter-name>
<filter-class>org.apache.catalina.filters.Expiresfilter</filter-class>
<init-param>ExpiresByType image<param-name> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T19:50:40.323

有几件事...

您的过滤器类中有 Expiresfilter。它应该是 ExpiresFilter （注意大写的 F——我希望这只是一个错字。

其次，您的参数名称似乎没有参数值，除非您在发布时将其关闭，但实际上在代码中确实有它。

最后，您的 tomcat 可能不知道您的 favicon 图像的扩展名。大多数网站图标都是 .ico 扩展名。所以你的 tomcat 实例需要知道 .ico 是一个图像 mimetype。所以在 web.xml 中添加这个

```
<mime-mapping>
<extension>ico</extension>
<mime-type>image/x-icon</mime-type>
<mime-mapping> 
```

如果您的图像不是 .ico，那么我不确定。让我们知道。

# android - 无法在 Android 应用上更改纬度/经度

> ID：15887528
> 
> 赞同：0
> 
> 时间：2013-04-08T19:43:28.383
> 
> 标签：android

在我正在制作的 gps 应用程序上更改经度和纬度似乎有一些问题。我是 Android 新手，不能 100% 确定我做对了。我还想指出，我不想仅在位置更改时才使用侦听器。我特别希望它每 5 秒更新一次，因为我在线程中有它。我似乎也没有从我在下面使用的东西中检索任何卫星数据。我只是一直在我的日志文件中写入一个空列表。我错过了许可还是代码错了？下面提供了所有需要的信息。谢谢。

```
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>

@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        // Initialize various GPS things
        location = new Location("now");
        lm = (LocationManager) this.getSystemService(Context.LOCATION_SERVICE);
        gps = lm.getGpsStatus(null);

        // Create Entry List for later use
        entries = new ArrayList<Entry>();
        rows = new ArrayList<TableRow>();

        // Turn off Stop by default
        Button button = (Button)findViewById(R.id.stopButton);
        button.setEnabled(false);

        // GPS enabled?
        final LocationManager manager = (LocationManager) getSystemService( Context.LOCATION_SERVICE );

        if ( !manager.isProviderEnabled( LocationManager.GPS_PROVIDER ) ) {
            buildAlertMessageNoGps();
        }

        criteria = new Criteria();
        criteria.setBearingAccuracy(Criteria.ACCURACY_HIGH);
        criteria.setAltitudeRequired(true);
        criteria.setHorizontalAccuracy(Criteria.ACCURACY_HIGH);
        criteria.setAccuracy(Criteria.ACCURACY_FINE);

        backgroundThread.start();
    }

Thread thread = new Thread()
    {
        @Override
        public void run() {
            while (keepGoing) {
                // timestamp
                long ts = System.currentTimeMillis() / 1000L;

                // set location
                location = lm.getLastKnownLocation(lm.getBestProvider(criteria, true));

                // location stuff
                float ac = location.getAccuracy();
                double al = location.getAltitude();
                double lat = location.getLatitude();
                double lon = location.getLongitude();
                DataEntry d = new DataEntry(ac, al, lat, lon);

                // satellite stuff
                List<GPSSatelliteEntry> GPSentries = new ArrayList<GPSSatelliteEntry>();
                Iterable<GpsSatellite> sats = gps.getSatellites();
                Iterator<GpsSatellite> satI = sats.iterator();
                while (satI.hasNext()) {
                    GpsSatellite item = (GpsSatellite) satI.next();
                    float az = item.getAzimuth();
                    float el = item.getElevation();
                    int p = item.getPrn();
                    float s = item.getSnr();

                    GPSSatelliteEntry temp = new GPSSatelliteEntry(az, el, p, s);
                    GPSentries.add(temp);
                }

                Entry en = new Entry(ts, d, GPSentries);
                entries.add(en);
                try {
                    Thread.sleep(5000); // 5000 ms
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } 
            }
            writeData();
        }
    }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T20:05:11.810

getLastKnownLocation 仅在设备上的某些内容正在生成位置更新时才有效。如果您的手机上没有调用 requestLocationUpdates，那么您将永远不会在 getLastKnownLocation 中更新。解决方法是调用 requestLocationUpdates 并将您的逻辑移动到这些函数中，或者甚至忽略对这些函数的调用，但无论如何都要让它们关闭。当您不再需要更新时，请记住取消注册，例如在 onStop 中。

# iphone - 如何使我的网站适合 iPhone 的屏幕？

> ID：15887531
> 
> 赞同：0
> 
> 时间：2013-04-08T19:43:39.273
> 
> 标签：iphone, web, screen-resolution

我的网站 (linearedge.com) 不适合 iphone 的屏幕。我尝试了很多不同的视口元属性组合，但没有任何效果。

有什么建议么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T20:32:14.740

尝试使用 CSS [@media 查询](http://mobile.smashingmagazine.com/2010/07/19/how-to-use-css3-media-queries-to-create-a-mobile-version-of-your-website/)来设计您的网站以使其具有响应性。比如下面这个，基本上就是说如果你的屏幕小于739px，那么将#container的宽度设置为200px。如果您相应地调整网站中容器的大小，它应该适合。

```
 @media only screen and (max-width:739px) {
      #container { width:200px; }
          ...
 } 
```

# underscore.js - 将 mixin() 函数与 lodash 和 JSONSelect 一起使用

> ID：15887533
> 
> 赞同：2
> 
> 时间：2013-04-08T19:43:45.237
> 
> 标签：underscore.js, lodash

我知道 lodash（和下划线）有一个[mixin()](http://lodash.com/docs#mixin)函数，可以让你用自己的属性扩展 lodash。

对于我的用例，它可以工作。. . 有点儿。

我想将 JSONSelect.match 添加到 lodash，以便我可以在链中使用它。它仅在您调用时有效`_.match(selector, object)`，但在链中无效。

换句话说，我可以这样做：

> _.match('.name', 汽车);

和

> _.match('.name', _(cars).chain().value());

但不是

> _(cars).chain().match('.name').value();

这是一个小提琴 - 前 3 个按钮有效，最后一个按钮无效。我该如何解决？

[http://jsfiddle.net/marclar/sBGR6/](http://jsfiddle.net/marclar/sBGR6/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T02:56:40.013

你的用法不正确。通常 Underscore/Lo-Dash 方法遵循以下模式：

```
_.foo(value, arg1, arg2); 
```

当链接它转移到

```
_(value).chain().foo(arg1, arg2); 
```

并供应`value`给`_.foo(value, ...)`内部。

所以在你的例子中`_.match('.name', cars)`应该改为`_.match(cars, '.name')`. 这将允许`_(cars).chain().match('.name').value()`工作。

请记住，当使用 Lo-Dash 链接是自动的 w/o`.chain()`时，尽管`.chain()`在`lodash underscore`兼容版本中受支持。

# python - 如何让 Python 程序识别第一次使用

> ID：15887537
> 
> 赞同：-1
> 
> 时间：2013-04-08T19:43:50.383
> 
> 标签：python, python-3.x

每个人！我试图让 Python 3.3 程序认识到这是用户第一次使用该程序。我不确定如何进行或是否可能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T19:45:35.203

你需要

在某处写点东西

a> 在某处创建文件

b> 写一个注册表项

c> 在某些网站上注册使用

或者可能有任何其他数量的方法来做到这一点

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-11T15:46:32.440

我只是在程序目录下创建了一个文件，并使用os.path.exists 让Python 识别用户的第一次使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T19:45:40.780

您可以保留一个文本文件，其中包含所有使用过该程序的用户的列表，然后在程序执行期间与它进行比较。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T19:48:45.343

您可以在运行目录中创建一个包含 firststartup 标志的文件，我将它用于 java 程序，没有使用 python 太多。

伪代码：也许这会帮助你找到答案。

1.  检查文件是否存在
2.  如果文件确实存在假设它不是第一次，否则，如果文件不存在创建文件并假设它确实是第一次启动。
3.  程序的其余部分。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-08T19:50:19.893

听起来很糟糕，您可能应该使用文件，就像其他人所说的那样。这听起来很糟糕，因为我猜你不想写你不需要的文件，但老实说，它会很好地工作。

您可以这样做的一种方法是，当用户启动它时，在目录中有一个“firstuse.txt”，当它运行时，它会删除该文件。这样你就可以让事情变得更干净一些。

# python - 什么是`scipy.i`？

> ID：15887538
> 
> 赞同：7
> 
> 时间：2013-04-08T19:43:50.720
> 
> 标签：python, scipy

出于随机的键盘攻击，我最终注意到被`SciPy`调用的变量中有一个变量`i`，它被分配给了字符串`'6'`。（在其他机器上可能会有所不同？）

我尝试使用内置的帮助函数，但没有分配任何内容，`scipy.i`因为它只指一个字符串。

我还搜索了文档和谷歌，但没有任何结果。

它可能与版本控制或类似的东西有关吗？顺便说一句，我在 Windows 7 上使用 Enthought Python（均为 64 位）。

这远不是一个关键问题，我只是对此感到好奇！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-08T19:55:45.787

哦，这很可爱。从 scipy `__init__.py`：

```
# Emit a warning if numpy is too old
majver, minver = [float(i) for i in _num.version.version.split('.')[:2]] 
```

在 Python 2 中，列表推导将它们的循环变量“泄漏”到封闭范围内。因此：

```
>>> import numpy as _num
>>> _num.version.version
'1.6.2'
>>> _num.version.version.split('.')[:2]
['1', '6']
>>> majver, minver = [float(i) for i in _num.version.version.split('.')[:2]]
>>> i
'6' 
```

# java - 安装带有依赖项的 maven artefact

> ID：15887542
> 
> 赞同：0
> 
> 时间：2013-04-08T19:44:09.743
> 
> 标签：java, maven, jar, dependencies

我想从现有的 jar 中创建一个 Maven 工件。到目前为止，一切都很好。问题是在所说的罐子类路径中引用了其他几个罐子。

有没有办法从父 jars 类路径中的 jars 创建工件或将它们包含在工件中？

其次，源代码和 javadocs 不包含在 jar 本身中。那么如何将它们与工件捆绑在一起呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T19:54:30.070

> 有没有办法从父 jars 类路径中的 jars 创建工件或将它们包含在工件中？

您可能会将依赖 jar 作为依赖项添加到您正在打包的 maven 工件中。如果您完全熟悉 maven，那么这就是任何工件的工作方式。

> 其次，源代码和 javadocs 不包含在 jar 本身中。那么如何将它们与工件捆绑在一起呢？

有一个[插件](http://maven.apache.org/plugin-developers/cookbook/attach-source-javadoc-artifacts.html)。

# mysql - 从 SQL 查询中消除重复项

> ID：15887543
> 
> 赞同：2
> 
> 时间：2013-04-08T19:44:10.330
> 
> 标签：mysql, sql

`id`从每个项目而不是表中的所有其他项目返回一个项目的最佳方法是什么。目前以下查询返回所有厂家

```
SELECT m.name
FROM  `default_ps_products` p
INNER JOIN  `default_ps_products_manufacturers` m ON p.manufacturer_id = m.id 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T20:13:46.217

我通过使用`DISTINCT`查询中的值解决了我的问题：

```
SELECT DISTINCT m.name, m.id
FROM  `default_ps_products` p
INNER JOIN  `default_ps_products_manufacturers` m ON p.manufacturer_id = m.id
ORDER BY m.name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T20:00:40.343

我可以想到 4 种主要方法来删除重复行方法 1 删除所有大于最小或小于最大 rowid 值的行。例子

```
delete from tableName a where rowid> (select min(rowid) from tableName b where a.key=b.key and a.key2=b.key2) 
```

方法 2 通常更快，但您必须在之后重新创建所有索引、约束和触发器..
将所有内容都拉到新表中，然后删除第一个表并将新表重命名为旧表名示例。

```
create table t1 as select distinct * from t2; drop table t1; rename t2 to t1; 
```

方法 3 根据 rowid 删除 where 存在的地方。例子

```
delete from tableName a where exists(select 'x' from tableName b where a.key1=b.key1 and a.key2=b.key2 and b.rowid >a.rowid)  Note if nulls are on column use nvl on column name. 
```

方法 4 为每个键值收集第一行并删除不在此集中的行。例子

```
delete from tableName a where rowid not in(select min(rowid) from tableName b group by key1, key2) 
```

请注意，您不必为方法 4 使用 nvl

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T20:34:39.227

经常使用 DISTINCT 是一种不好的做法。可能是因为您的 SELECT 语句有问题，或者您的数据结构未规范化。

在您的情况下，我会使用它（假设 default_ps_products_manufacturers 具有唯一记录）。

```
SELECT m.id, m.name
FROM  default_ps_products_manufacturers m
WHERE EXISTS (SELECT 1 FROM default_ps_products p WHERE p.manufacturer_id = m.id) 
```

或带有 IN 的等效查询：

```
SELECT m.id, m.name
FROM  default_ps_products_manufacturers m
WHERE m.id IN (SELECT p.manufacturer_id FROM default_ps_products p) 
```

唯一的一件事 - 在所有可能的查询之间，最好选择具有更好执行计划的查询。这可能取决于您的供应商和/或数据库的物理结构、统计数据等。

我认为在大多数情况下 EXISTS 会更好。

# jquery - 在提交时验证多个输入

> ID：15887545
> 
> 赞同：0
> 
> 时间：2013-04-08T19:44:20.960
> 
> 标签：jquery

任何人都可以帮助我尝试验证多个输入以确保它们在我提交时不为空。然后在#error 中添加一些文本。

我的表格如下所示：

```
<div class="span12">
        <form method="post" name="bdayInputFormMain" action="/bdayremind_maininput/" class="form-inline">
        {% csrf_token %}
                <input name="name" type="text" class="input-medium" placeholder="Name">
                <input name="dob" type="text" class="input-small datepicker" placeholder="Date of Birth">
                <input name="addr" type="text" class="input-xlarge" placeholder="Address">
                <button type="submit" class="btn">Update</button>
        </form>
</div> 
```

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T20:10:25.593

查看[.submit()](http://api.jquery.com/submit/)的文档。编写自己的验证方法相当容易，或者您可以使用其他人建议的库。

[http://jsfiddle.net/rwFDT/](http://jsfiddle.net/rwFDT/)

```
$('form').submit(function(){
   var $emptyFields = $();
   $('form').find('input').each(
       function(){
              if($(this).val() == ""){
                   $emptyFields.push(this)
             }
        });
  if($emptyFields.length != 0){
    $('form').find('input').css("border","");
    $emptyFields.css("border", "1px solid red");
    $("#error").html("<b><i>This is my error message</i></b>");
    return false;
  }else{
    return true;
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T19:56:35.047

这个验证库[Parsley.js](http://parsleyjs.org/)看起来不错，可以满足您的需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T20:41:31.880

是的！jquery 验证是客户端的最佳验证器之一。您应该对那些需要的字段使用必需的类。

请参阅文档[http://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)

您的表单将如下所示：

[http://jsbin.com/elemad/3/edit](http://jsbin.com/elemad/3/edit)

我希望它有帮助！

# c# - 将程序分配给按钮 GUI 界面

> ID：15887549
> 
> 赞同：0
> 
> 时间：2013-04-08T19:44:27.930
> 
> 标签：c#, user-interface, gtk

我想使用我构建的程序并在单击 GUI 界面中的 onrunapplication 按钮时将其分配为运行：

```
using System;
using Gtk;

public partial class MainWindow: Gtk.Window
{   
public MainWindow (): base (Gtk.WindowType.Toplevel)
{
    Build ();
}

protected void OnDeleteEvent (object sender, DeleteEventArgs a)
{
    Application.Quit ();
    a.RetVal = true;
}

protected void OnExitbuttonClicked (object sender, EventArgs e)
{
    Application.Quit();
}

protected void OnRunapplicationClicked (object sender, EventArgs e)
{
    ???
}
} 
```

这是我要运行的程序的开头：

```
using System;
using Gtk;
using System.IO;
using System.Net;

namespace namelookup
{
    class MainClass
    {
    public static void Main(string[] args)
    { 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T19:49:30.530

您可以使用`Process`该类来运行另一个可执行文件。在简单的情况下，它可以只是通过返回对象的各种属性以及您可能想要查看的类`Process.Start("MyProgram.exe");` 的各种属性来配置过程的方式有很多选项。`Process``ProcessStartInfo`

另一种选择是根本不将您的其他程序编译为可执行文件；您可以将其编译为类库，然后让您的 UI 添加对该库的引用，以便它可以直接调用代码。

# macos - Netbeans NullpointerException 在启动时

> ID：15887552
> 
> 赞同：0
> 
> 时间：2013-04-08T19:44:34.977
> 
> 标签：macos, netbeans, nullpointerexception

当我启动 Netbeans 6.0.1 时，我收到以下错误消息：

```
java.lang.NullPointerException
    at javax.xml.validation.SchemaFactory.newSchema(SchemaFactory.java:521)
    at com.sun.servicetag.RegistrationDocument.initializeDocument(RegistrationDocument.java:121)
    at com.sun.servicetag.RegistrationDocument.load(RegistrationDocument.java:81)
    at com.sun.servicetag.RegistrationData.loadFromXML(RegistrationData.java:392)
    at org.netbeans.modules.reglib.NbServiceTagSupport.getRegistrationData(NbServiceTagSupport.java:373)
    at org.netbeans.modules.reglib.NbServiceTagSupport.getNbServiceTag(NbServiceTagSupport.java:453)
    at org.netbeans.modules.reglib.NbServiceTagSupport.createNbServiceTag(NbServiceTagSupport.java:171)
    at org.netbeans.modules.registration.NbInstaller.restored(NbInstaller.java:98)
    at org.netbeans.core.startup.NbInstaller.loadCode(NbInstaller.java:378)
    at org.netbeans.core.startup.NbInstaller.load(NbInstaller.java:297)
    at org.netbeans.ModuleManager.enable(ModuleManager.java:933)
    at org.netbeans.core.startup.ModuleList.installNew(ModuleList.java:405)
    at org.netbeans.core.startup.ModuleList.trigger(ModuleList.java:341)
    at org.netbeans.core.startup.ModuleSystem.restore(ModuleSystem.java:275)
    at org.netbeans.core.startup.Main.getModuleSystem(Main.java:171)
    at org.netbeans.core.startup.Main.start(Main.java:322)
    at org.netbeans.core.startup.TopThreadGroup.run(TopThreadGroup.java:110)
[catch] at java.lang.Thread.run(Thread.java:655) 
```

我认为它不会阻止 Netbeans 运行，但它是什么意思，我应该如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T19:55:10.217

首先，我会尝试更新版本的 netbeans。6.0.1 已经超过 5 年了。

另外，尝试清除 netbeans 缓存。在 linux 上，它存储在 $HOME/.netbeans/
不确定它在 OSX 上的存储位置。

至于它的含义 - 阅读这个问题/答案：[什么是空指针异常？](https://stackoverflow.com/questions/218384/what-is-a-null-pointer-exception)

# android - 实现 Maps V2 android

> ID：15887554
> 
> 赞同：0
> 
> 时间：2013-04-08T19:44:38.913
> 
> 标签：android, maps

伙计们，我正在尝试实施新版本的谷歌地图，并且我已经完成了用谷歌编写的步骤，但是在尝试从手机运行地图时仍然出现错误。

这是我的java代码：

```
package com.example.e_order;

import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.view.Menu;

public class Order_map extends FragmentActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_order_map);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_order_map, menu);
        return true;
    }

} 
```

这是我的 xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <fragment xmlns:android="http://schemas.android.com/apk/res/android"
          android:id="@+id/map"
          android:layout_width="match_parent"
          android:layout_height="match_parent"
    />
</RelativeLayout> 
```

和我的清单：

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
        package="com.example.e_order"
        android:versionCode="1"
        android:versionName="1.0" >

        <permission
    android:name="com.example.e_order.permission.MAPS_RECEIVE"
    android:protectionLevel="signature" />

        <uses-permission android:name="com.example.e_order.permission.MAPS_RECEIVE" />

        <uses-sdk
            android:minSdkVersion="8"
            android:targetSdkVersion="15" />

  <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true" />
 <meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="mykey" /> 
```

这就是在我看来的logcat：

```
04-08 21:08:40.355: E/AndroidRuntime(14147): FATAL EXCEPTION: main
04-08 21:08:40.355: E/AndroidRuntime(14147): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.e_order/com.example.e_order.Order_map}: android.view.InflateException: Binary XML file line #7: Error inflating class fragment
04-08 21:08:40.355: E/AndroidRuntime(14147):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1968)
04-08 21:08:40.355: E/AndroidRuntime(14147):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1993)
04-08 21:08:40.355: E/AndroidRuntime(14147):    at android.app.ActivityThread.access$600(ActivityThread.java:127)
04-08 21:08:40.355: E/AndroidRuntime(14147):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1159)
04-08 21:08:40.355: E/AndroidRuntime(14147):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-08 21:08:40.355: E/AndroidRuntime(14147):    at android.os.Looper.loop(Looper.java:137)
04-08 21:08:40.355: E/AndroidRuntime(14147):    at android.app.ActivityThread.main(ActivityThread.java:4507)
04-08 21:08:40.355: E/AndroidRuntime(14147):    at java.lang.reflect.Method.invokeNative(Native Method)
04-08 21:08:40.355: E/AndroidRuntime(14147):    at java.lang.reflect.Method.invoke(Method.java:511)
04-08 21:08:40.355: E/AndroidRuntime(14147):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
04-08 21:08:40.355: E/AndroidRuntime(14147):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
04-08 21:08:40.355: E/AndroidRuntime(14147):    at dalvik.system.NativeStart.main(Native Method)
04-08 21:08:40.355: E/AndroidRuntime(14147): Caused by: android.view.InflateException: Binary XML file line #7: Error inflating class fragment
04-08 21:08:40.355: E/AndroidRuntime(14147):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:697)
04-08 21:08:40.355: E/AndroidRuntime(14147):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
04-08 21:08:40.355: E/AndroidRuntime(14147):    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
04-08 21:08:40.355: E/AndroidRuntime(14147):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
04-08 21:08:40.355: E/AndroidRuntime(14147):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
04-08 21:08:40.355: E/AndroidRuntime(14147):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:271)
04-08 21:08:40.355: E/AndroidRuntime(14147):    at android.app.Activity.setContentView(Activity.java:1835)
04-08 21:08:40.355: E/AndroidRuntime(14147):    at com.example.e_order.Order_map.onCreate(Order_map.java:12)
04-08 21:08:40.355: E/AndroidRuntime(14147):    at android.app.Activity.performCreate(Activity.java:4465)
04-08 21:08:40.355: E/AndroidRuntime(14147):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1052)
04-08 21:08:40.355: E/AndroidRuntime(14147):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1932)
04-08 21:08:40.355: E/AndroidRuntime(14147):    ... 11 more
04-08 21:08:40.355: E/AndroidRuntime(14147): Caused by: java.lang.NullPointerException: name == null
04-08 21:08:40.355: E/AndroidRuntime(14147):    at java.lang.VMClassLoader.findLoadedClass(Native Method)
04-08 21:08:40.355: E/AndroidRuntime(14147):    at java.lang.ClassLoader.findLoadedClass(ClassLoader.java:354)
04-08 21:08:40.355: E/AndroidRuntime(14147):    at java.lang.ClassLoader.loadClass(ClassLoader.java:491)
04-08 21:08:40.355: E/AndroidRuntime(14147):    at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
04-08 21:08:40.355: E/AndroidRuntime(14147):    at android.support.v4.app.Fragment.instantiate(Fragment.java:391)
04-08 21:08:40.355: E/AndroidRuntime(14147):    at android.support.v4.app.Fragment.instantiate(Fragment.java:369)
04-08 21:08:40.355: E/AndroidRuntime(14147):    at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:272)
04-08 21:08:40.355: E/AndroidRuntime(14147):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:669)
04-08 21:08:40.355: E/AndroidRuntime(14147):    ... 21 more 
```

sry 4 漫长的任务。:)

新错误：

```
04-08 22:25:47.108: E/AndroidRuntime(19754): FATAL EXCEPTION: main 04-08 22:25:47.108: E/AndroidRuntime(19754): java.lang.NoClassDefFoundError: com.google.android.gms.R$styleable 04-08 22:25:47.108: E/AndroidRuntime(19754): at com.google.android.gms.maps.GoogleMapOptions.createFromAttributes(Unknown Source) 04-08 22:25:47.108: E/AndroidRuntime(19754): at com.google.android.gms.maps.SupportMapFragment.onInflate(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T19:51:10.233

您没有指定片段的类名

你应该有这样的：

```
<fragment android:name="com.google.android.gms.maps.MapFragment"
          android:id="@+id/map_fragment"
          android:layout_width="math_parent"
          android:layout_height="match_parent" /> 
```

顺便说一句，类名不应包含下划线

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T20:00:46.630

您应该指定您的`name`属性，`Framgnet`并且由于您正在开发您的应用程序以支持，`SDK < 11`那么您应该使用该`SupportMapFragment`对象：

```
android:name="com.google.android.gms.maps.SupportMapFragment" 
```

# php - 类循环创建mysql太多连接

> ID：15887556
> 
> 赞同：0
> 
> 时间：2013-04-08T19:44:50.067
> 
> 标签：php, mysql, oop, class, mysqli

所以我正在处理很多类......在我将会话类（验证和创建/销毁会话）包含到我的用户类（用户操作、登录、注册等）中之前，一切都运行良好。

基本上，我得到一个“mysqli Too many connections！” 错误...我认为这是因为我的会话类包含在用户类中，反之亦然：

__用户类的构造：

```
$this->db = new DB($db);
$this->password = new Password();
$this->session = new Session($db); 
```

$db 只是一个数据库信息数组...

__construct 类会话：

```
 $this->error = new Error();
 $this->users = new User($db);
 $this->db = new DB($db); 
```

因此，您会看到它们是如何相互包含的，我认为这就是导致我的连接错误的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T19:53:14.813

创建数据库连接不是用户的工作。（当你想到它时，它没有多大意义，不是吗？）

相反，在构造函数中**请求**数据库连接。

```
class User {
    public function __construct(DB $db) { 
```

这样，您可以在整个应用程序中重用连接对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T19:52:31.967

您必须先创建一个，然后将其传递给另一个的构造函数。

喜欢：

会议：

```
__construct($db){
  $this->db = $db; //Don't reconstruct
  $this->users = new User($db,$this);
  ...
} 
```

用户：

```
__construct($db,$session){
...
  $this->db = $db; //Don't re-construct
  $this->session = $session;
...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T19:49:37.750

在会话类

做

```
$this->db = $db; 
```

在您的用户类中

```
$this->session = new Session($this->db); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T19:55:27.487

如果您创建一个包含两个类的第三个类并在第三个类上运行循环？然后在 UserSession 上运行所有数据库实例？我不知道？

__用户类的构造：

```
 $this->password = new Password(); 
```

__construct 类会话：

```
$this->error = new Error(); 
```

__UserSession 类的构造：

```
$this->db = new DB($db);
$this->users = new User($db);
$this->users = new Session($db); 
```

# c# - 将 WinForms 表单转换为 WPF

> ID：15887557
> 
> 赞同：0
> 
> 时间：2013-04-08T19:44:52.463
> 
> 标签：c#, wpf, winforms

我用 C# 编写了一个媒体播放器应用程序，我想知道是否有任何方法可以使用 WPF 来更改表单的边框，而无需将整个项目转换为 WPF。我问这个是因为我只有 2 天半的时间来更改边界，而且我认为在这段时间内不可能转换整个项目（我不认为 2 天会很长）足以了解移植到 WPF 所需的数量）。尝试更改 C# 中的边框会更简单吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T19:47:03.737

首先，删除表单的边框。

```
form.FormBorderStyle = FormBorderStyle.None; 
```

然后，将表单的背景更改为您创建的图像中具有自定义边框的图像。

```
form.BackgroundImage = image; 
```

这将使您在短期内到达您需要的地方。从长远来看，如果这是一个您将要维护和添加功能的项目，您最好还是硬着头皮切换到 WPF。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T21:07:53.617

使用[WindowsFormsHost](http://msdn.microsoft.com/en-us/library/system.windows.forms.integration.windowsformshost.aspx)在 WPF 窗口/应用程序中托管您的 WinForms 表单。然后，您可以为 WindowsFormsHost 控件设置 WPF 边框。

您只需要在 hello-world 级别了解 WPF，并且所有应用程序逻辑都可以保留在 WinForms 表单中。

# android - 阅读 gcm 消息

> ID：15887558
> 
> 赞同：0
> 
> 时间：2013-04-08T19:44:54.977
> 
> 标签：android, google-cloud-messaging

我有一个 gcm 类来使用 gcm 服务：

```
public class GCMIntentService extends GCMBaseIntentService {

private static final String TAG = "GCMIntentService";

public GCMIntentService() {
    super("726233487705");
}

@Override
protected void onRegistered(Context context, String registrationId) {
    Log.i(TAG, "Device registered: regId = " + registrationId);
}

@Override
protected void onUnregistered(Context context, String registrationId) {
    Log.i(TAG, "Device unregistered");
}

@Override
protected void onDeletedMessages(Context context, int total) {
    Log.i(TAG, "Received deleted messages notification");
}

@Override
public void onError(Context context, String errorId) {
    Log.i(TAG, "Received error: " + errorId);
}

@Override
protected boolean onRecoverableError(Context context, String errorId) {
    // log message
    Log.i(TAG, "Received recoverable error: " + errorId);
    return super.onRecoverableError(context, errorId);
}

/**
 * Issues a notification to inform the user that server has sent a message.
 */
private static void generateNotification(Context context, String message) {
    System.out.println(message);
}

@Override
protected void onMessage(Context context, Intent intent) {
    String msg = intent.getExtras().getString("id");
    System.out.println(msg);
}

} 
```

但我不明白如何运行我的课程以在任何活动中获取通知

因为在我的情况下，当我使用我的服务器发送消息时 OnMessage 什么都不做

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T19:58:05.850

您是在主要活动中还是在应用程序 onCreate 中编写了以下代码？：

```
GCMRegistrar.checkDevice(this);
GCMRegistrar.checkManifest(this);
final String regId = GCMRegistrar.getRegistrationId(this);
if (regId.equals("")) {
  GCMRegistrar.register(this, SENDER_ID);
} else {
  Log.v(TAG, "Already registered");
} 
```

来源：http: [//developer.android.com/google/gcm/gs.html](http://developer.android.com/google/gcm/gs.html)

不要忘记检查权限。

# python - python后台并行文件读写器

> ID：15887559
> 
> 赞同：0
> 
> 时间：2013-04-08T19:44:55.037
> 
> 标签：python, file, background, parallel-processing, loading

我有一个我认为是相当简单的问题，但我似乎无法让它像我希望的那样工作。我有 ~200 ~200 MB 文件，足以让我无法一次将它们全部加载到内存中。每个文件需要与其他文件一起处理一次（因此处理函数的操作约为 20000 次）。我需要多次循环文件，例如：

```
for i in xrange(len(file_list)-1): #go through each file
    if i==0: 
        f = read(file_list[i])   #load in the first file
    else:
        f = g0  #we've already loaded in the next file once, don't re-load it
    for j in xrange(i+1,len(file_list)): #go through each other file to get all unique pairs
        g = read(file_list[i+j+1])  # takes 5 s
        answer.append(processing_function(f,g)) # takes 10s
        if j==0:
           g = g0 # this will be "f" for the next iteration of the outer loop 
```

外循环只需要加载文件 1，然后它可以从内循环的第一次迭代中获取一个已经加载的文件作为它的下一个值。内部循环需要加载 (len(file_list)-i) 文件并处理它们。由于我无法在内存中保留约 200 个文件，并且没有简单的方法来分解文件列表（因为每个文件都需要彼此配对一次）

是否有一种明显的方法可以并行化 read() 函数，使其至少读取下一个文件，即在 processing_function(f_i,g_j) 执行期间 g_j+1？我已经尝试过线程和多处理，并且我已经能够将读取卸载到不同的线程/进程中，但它永远不会并行运行（即 processing_function() 的执行在我得到 ag 后立即开始，而未来的 g_j 正在后台加载）。我要么设法挂起程序（使用多处理），要么只是在 processing_function() 在第一个文件上运行之前将一堆文件加载到队列中（使用线程）。

我希望这很容易执行，我只是弄乱了一个细节。

这是我迄今为止尝试过的（来自有人在其他地方建议的代码） -*看起来*这应该做我想要的，但就像我说的那样，QueuedFileReader() 中的 file_worker 方法似乎通过并达到 QUEUE_SIZE在将控制权交还给 QueuedFileReader 作为生成器的循环之前，将文件放入队列中。如果 file_worker 仅自行运行并且使用 QueuedFileReader() 的循环可以在队列中准备好用于 next() 调用的单个文件时继续，那将是完美的...

```
class QueuedFileReader():
    def __init__(self,file_list,tmp_dir,QUEUE_SIZE):
        self.queue =Queue.Queue(QUEUE_SIZE)                                                                           
        self.worker = threading.Thread(target=QueuedFileReader.file_worker,args=(self.queue,file_list,tmp_dir))                             
        #self.queue = multiprocessing.Queue(QUEUE_SIZE)
        #self.worker = multiprocessing.Process(target=QueuedFileReader.file_worker,args=(self.queue,file_list,tmp_dir))
        self.worker.daemon=True
        self.worker.start()

    @staticmethod
    def file_worker(queue,file_list,tmp_dir):
        for i,f in enumerate(file_list):
            done = False
            while True and not done:
                try:
                    print "attempting to read %s"%f_in
                    queue.put((i,f_in,files.read(f)))
                    print "successfully read in %s"%f
                    done = True
                except Queue.Full:
                    pass
        queue.put('done')

    def __iter__(self):
        return self

    def next(self):
        N = 0
        while True:
            try:  
                x = self.queue.get()
                break
            except Queue.Empty:
                pass
        if x == 'done': raise StopIteration
        return x

    def __del__(self):
        self.worker.join() 
```

这被称为：

```
for j,fnm,g in QueuedFileReader(flz[i+1:],tmp_dir,QUEUE_SIZE):
    #the code that runs on object "f" from the outer loop and "g" that should be supplied off the top of the queue on each next() call to QueuedFileReader() 
```

# scala - 关于如何将 scala 映射到 jvm 字节码的良好参考

> ID：15887564
> 
> 赞同：5
> 
> 时间：2013-04-08T19:45:15.873
> 
> 标签：scala, jvm, bytecode

关于 Scala 编译器如何将各种 Scala 功能映射到字节码有什么好的文章吗？

一个快速的谷歌找到了大卫波拉克 2009 年演讲的支持材料

[https://github.com/dpp/jvm_summit_2009/blob/master/scala_fancy_pants.pdf](https://github.com/dpp/jvm_summit_2009/blob/master/scala_fancy_pants.pdf)

但我怀疑这可能既过时又不完整。

我可以尝试通过~~scalap~~ javap 自己收集这些数据，但如果能从别人的努力和洞察力中受益，那就太好了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T22:56:02.030

在 Scala REPL 上，用于`:javap -c`查看生成的字节码。

例如：

```
scala> class Bytes { def a = println("hello") }
defined class Bytes

scala> :javap -c Bytes
Compiled from "<console>"
public class Bytes extends java.lang.Object{
public void a();
  Code:
   0:   getstatic   #13; //Field scala/Predef$.MODULE$:Lscala/Predef$;
   3:   ldc #15; //String hello
   5:   invokevirtual   #19; //Method scala/Predef$.println:(Ljava/lang/Object;)V
   8:   return

public Bytes();
  Code:
   0:   aload_0
   1:   invokespecial   #24; //Method java/lang/Object."<init>":()V
   4:   return

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T20:31:20.940

没有我知道的。考虑使用字节码检查工具来检查编译器生成的代码。在编写性能关键代码以验证是否正确应用了专门化、消除了闭包、通过字节码指令直接访问数组、正确扩展了宏等时，它通常很有用。

如果您使用的是 Sublime，则有一个[用于查看字节码的插件](https://github.com/axel22/sublime-javap)。

# ms-access - 如何根据特定字段对日期范围内的记录进行分组

> ID：15887569
> 
> 赞同：0
> 
> 时间：2013-04-08T19:45:27.000
> 
> 标签：ms-access

我目前正在使用连续表格来显示一组数据，这些数据导致以下格式（每行是一个记录）：

```
1/04/13     Person1
31/03/13    Person1
30/03/13    Person1
29/03/13    Person2
28/03/13    Person1 
```

这些记录有 100 条，我想将其浓缩为以下内容：

```
30/03/13 - 1/04/13     Person1
29/03/13               Person2
28/03/13               Person1 
```

数据来自查询，因此可以在进入表单阶段之前在 SQL 级别进行操作。我也很乐意使用宏或 VBA 来操作表单。但是，我仍然无法找到合适的方法来做到这一点。

我意识到这是报表的典型行为，但是由于我最终希望将其作为子表单嵌入到另一个表单中，因此我不能使用报表（除非我遗漏了某些内容，否则无法在表单中创建子报表）。

非常感谢任何帮助或建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T19:56:47.483

很好地描述了问题。尝试像这样构建您的源查询（假设字段被调用`MyDate`并且`MyPerson`源表是`MyTable`）：

```
Select Person, min(MyDate) as StartDate, max(MyDate) as EndDate
from MyTable
group by Person 
```

这为您提供了 3 个可以放入表单的字段。

### 编辑

现在我们有了更完整的画面，任务变得更加复杂，但是您仍然可以选择假设人们之间的“事件”不重叠（如果它们重叠，那么我想不出之后如何创建 eventID） . 在没有 EventID 的情况下，您必须创建一个：

1.  首先，您需要将数据移动到一个新表中，以便重新排序并为您将在步骤 2 中添加的事件 ID 添加一个空白字段。
    1a。将 MyTable 复制到新表中。添加一个名为 EventID 的额外字段。
    1b。要填充此表，首先是`Delete * from TmpTbl`
    1c。然后是这样的：
    `Insert into TmpTbl.* from MyTable order by MyDate,MyPerson`

2.  此代码将查看您的临时表（我称之为 TmpTbl）并添加一个事件 ID。

    ```
    Sub AddEventIDs()
    Dim rst As Recordset
    Set rst = CurrentDb.OpenRecordset("TmpTbl")
    Dim LastPerson As String
    Dim EventID As Integer
    docmd.setwarnings false
    While rst.EOF = False
        If LastPerson <> rst.Fields("MyPerson") Then EventID = EventID + 1
        LastPerson = rst.Fields("MyPerson")
        rst.Edit
        rst.Fields("EventID") = EventID
        rst.Update
        rst.MoveNext
    Wend
    docmd.setwarnings true
    End Sub 
    ```

3.  在表单的 On Load 事件中，添加 2 个查询和来自 #1 和 #2 的子例程。

4.  您的最终查询将是：

    ```
    Select MyPerson, EventID, min(MyDate) as StartDate, max(MyDate) as EndDate
    from MyTable
    group by MyPerson,EventID 
    ```

# ocaml - OCAML - 列表中有元素吗？

> ID：15887572
> 
> 赞同：0
> 
> 时间：2013-04-08T19:45:40.533
> 
> 标签：ocaml

假设我们有一个元素列表：

```
[(a,b); (c,d); (e,f)] 
```

什么函数会检查元素（比如说 A，其中 A=(x,y)）是否在列表中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T20:28:44.640

用于`List.mem`搜索匹配项。

```
let a = (3,4)
List.mem a [(1,2); (3,4); (5,6)] 
```

`List.memq`如果要检查这两个项目是否都引用内存中的同一实体，也可以使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:38:55.990

这是有关如何自己编写此内容的提示。处理列表的自然方法是首先查看第一个元素，然后递归检查列表的其余部分，直到您有一个空列表。对于这个问题，你可以用英文陈述算法如下：

> 如果列表为空，则该项目不在列表中，否则如果第一个列表元素等于该项目，则它在其中，否则它是（该项目在列表的其余部分中吗？）的答案

现在您只需将其转换为 OCaml 代码（使用递归函数）。

一般来说，如果你可以用问题的更小或更简单的部分来描述你想要做什么，那么编写[递归](http://en.wikipedia.org/wiki/Divide_and_conquer_algorithm)代码就很简单了（尽管你必须小心基本情况是正确的）。当使用列表或树结构数据时，分解问题的方法通常很明显。

# php - 使用 .htaccess 上的一些 pramaters 将 php 重写为 png

> ID：15887575
> 
> 赞同：3
> 
> 时间：2013-04-08T19:45:47.313
> 
> 标签：php, .htaccess, png, rewrite

我想重写我的链接

```
/svlist/sv_image.php?ip=109.73.77.38&port=35115&game=cs2d 
```

到

```
/svlist/cs2d/109.73.77.38:35115.png 
```

我对那东西真的很陌生。

```
RewriteRule ^(svlist)/([^.]*)\/([0-9]+):([^.]*)\.png$ $1/sv_image.php?ip=$3&port=$4&game=$2 [L,NC] 
```

我试过这个，失败了。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T19:49:22.680

尝试：

```
RewriteRule ^svlist/([^/]+)/([0-9.]+):([0-9]+)\.png$ /svlist/sv_image?ip=$2&port=$3&game=$1 [L,QSA] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T20:16:21.087

如果你想重写*/svlist/$var1/$var2:$var3.png*成*/svlist/sv_image.php?ip=$var2&port=$var3&game=$var1*你可以检查这个：

```
# once per .htaccess file
Options +FollowSymlinks
RewriteEngine on

RewriteRule ^svlist/([a-z0-9-_]+)/([0-9\.]*):([0-9]*).png /svlist/sv_image.php?ip=$2&port=$3&game=$1 [L,NC] 
```

但是，如果您要重写的 URL 是*/svlist/sv_image.php?ip=$var1&port=$var2&game=$var3*到*/svlist/$var3/$var1:$var2.png*然后尝试检查这些重写条件和规则：

```
RewriteCond %{QUERY_STRING} ip=([0-9\.]*)&port=([0-9]*)&game=([a-z0-9-_]+)
RewriteRule ^svlist/sv_image.php /svlist/%3/%1:%2.png [L,NC] 
```

# perl - 通过 Perl 的客户端-服务器脚本之间的 2 路通信

> ID：15887577
> 
> 赞同：0
> 
> 时间：2013-04-08T19:45:50.283
> 
> 标签：perl, sockets, network-programming, client-server

**要求：**

1.  服务器等待连接。
2.  一旦客户端运行，通过套接字的连接就开发成功了。
3.  服务器读取一个文本文件并将消息发送给客户端。
4.  客户收听并打印它。
5.  客户端读取文本文件将消息（确认）发送到服务器。
6.  服务器监听它并打印它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T19:45:50.283

以下是上述问题的解决方案：

**服务器脚本：**

```
#!/usr/bin/perl

use strict;
use warnings;
use IO::Socket::INET;

my $socket;
my  $clientsocket;
my $serverdata;
my $clientdata;

$socket = new IO::Socket::INET (
    LocalHost => '127.0.0.1',
    LocalPort => '0155',
    Proto => 'tcp',
    Listen => 1,
    Reuse => 1
) or die "Oops: $! \n";
print "Waiting for the Client.\n";

$clientsocket = $socket->accept();

print   "Connected from : ", $clientsocket->peerhost();     # Display messages
print   ", Port : ", $clientsocket->peerport(), "\n";

# Write some data to the client  
$serverdata = "This is the Server speaking :)\n";
print $clientsocket "$serverdata \n";

# read the data from the client
$clientdata = <$clientsocket>;
print "Message received from Client : $clientdata\n";

$socket->close(); 
```

**客户端脚本：**

```
#!/usr/bin/perl

use strict;
use warnings;
use IO::Socket::INET;

my $socket;
my $serverdata;
my $clientdata;

$socket = new IO::Socket::INET (
  PeerHost => '127.0.0.1',
  PeerPort => '0155',
  Proto => 'tcp',
) or die "$!\n";

print "Connected to the Server.\n";

# read the message sent by server.
$serverdata = <$socket>;
print "Message from Server : $serverdata \n";

# Send some message to server.
$clientdata = "This is the Client speaking :)";
print $socket "$clientdata \n";

$socket->close(); 
```

# url - 您如何打开指向 iTunes 店面的链接以浏览商店

> ID：15887579
> 
> 赞同：0
> 
> 时间：2013-04-08T19:45:51.280
> 
> 标签：url, itunes, affiliate

我想打开一个指向 iTunes Storefront 的链接，以便用户可以浏览该商店。在 iPhone 音乐应用程序中，您可以单击“商店”按钮并重定向到音乐商店前面。从那里，用户可以浏览商店。我希望能够做同样的事情，但我不知道网址。

我已经使用以下代码尝试了明显的链接：

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"http://itunes.apple.com/"]]; 
```

但这给出了一个错误，指出地址无效。使用 phobos.apple.com 不会出错，但不会在浏览器中显示任何内容。

如果这是可能的，那么我最好使用 iTunes 附属链接，以便我获得购买歌曲的信用。那可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T22:33:37.250

试试[https://itunes.apple.com/us/store](https://itunes.apple.com/us/store)

但是，如果您想使用附属链接，您需要更进一步并在幕后解决与它们关联的重定向，然后再发送用户（或者您会在发送用户的位置获得“口吃步骤”首先进入 Safari 应用程序）。这就是您想要尝试类似我们网站上的内容的地方：

[http://www.georiot.com/using-georiot/resources/itunes/linking-tools#linking-inside-ios](http://www.georiot.com/using-georiot/resources/itunes/linking-tools#linking-inside-ios)

# r - 获取 R 脚本中的警告指示

> ID：15887580
> 
> 赞同：2
> 
> 时间：2013-04-08T19:45:53.747
> 
> 标签：r

我正在运行嵌套在 for() 函数中的 glm() 函数。glm 的输出被输入到一个矩阵中。对于某些周期有一个警告，但我只在所有周期结束时才收到所有警告，所以我不知道哪个周期是坏的。我想知道每次 glm 计算后是否有警告，这样我就可以告诉脚本不要将此循环结果输入到矩阵中。任何想法如何做到这一点？例子：

```
 m<-matrix(nc=1,nr=100)
   for(i in 1:100){      
   fit<-glm(y~x+v1+v2+v3,data=data)
   if("there is a warning???"){
   m[i,1]<-NA
   }
   else{
   m[i,1]<-fit$coefficients[2,1]
   }
    "reset warning???"
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T20:53:54.323

这是一个有时会发出警告但总是返回值的函数

```
f <- function() {
    r <- runif(1)
    if (r > 1) warning("high")
    Sys.sleep(.1)  # 'expensive' calculation after warning
    r
} 
```

以下循环旨在`x[i]`使用返回的值进行更新`f()`。捕获的警告被替换为 NA；`f`警告之后的部分不被评估。我们对处理警告消息不感兴趣，因此我们忽略提供给警告处理程序的参数。

```
x <- numeric(10)
for (i in seq_along(x)) {
    x[i] <- tryCatch(f(), warning=function(...) NA)
} 
```

所以例如

```
> set.seed(123)
> system.time(x <- replicate(100, tryCatch(f(), warning=function(...) NA)))
   user  system elapsed 
  0.052   0.000   8.364 
> table(is.na(x))

FALSE  TRUE 
   83    17 
```

很难重现您的特定问题，因为`data`未提供。我想你想做

```
m <- matrix(ncol=1, nrow=100)
for(i in 1:100) {
    m[i,1] <- tryCatch({
        fit <- glm(y~x+v1+v2+v3, data=data)
        fit$coefficients[2, 1]
    }, warning=function(...) NA)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T20:37:22.823

除了 eddi 在上面的评论中给出的精彩链接之外，您还可以尝试结合对错误发出警告并在出现错误时跳转到函数：

```
options(warn = 2) # will turn warnings into errors
options(error = recover) # will allow you to browser() at the error. 
```

根据您问题的大小，上面链接中给出的选项可能会更好。但是我的解决方案很容易实现。

# objective-c - 从 Cocoa 中的 NSColor 获取十六进制值？

> ID：15887582
> 
> 赞同：4
> 
> 时间：2013-04-08T19:46:03.423
> 
> 标签：objective-c, macos, cocoa, nscolor

有谁知道是否可以从 Cocoa 中的 NSColor 获取颜色的十六进制值？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-08T19:55:11.523

使用蓝色 NSColor 的示例：

```
NSColor* color = [NSColor blueColor];

NSString* hexString = [NSString stringWithFormat:@"%02X%02X%02X", 
(int) (color.redComponent * 0xFF), (int) (color.greenComponent * 0xFF), 
(int) (color.blueComponent * 0xFF)]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-09-02T05:09:15.540

我喜欢 DAH 的解决方案，我将其设为计算属性而不是函数：

```
import Cocoa

extension NSColor {

    var hexString: String {
        let red = Int(round(self.redComponent * 0xFF))
        let green = Int(round(self.greenComponent * 0xFF))
        let blue = Int(round(self.blueComponent * 0xFF))
        let hexString = NSString(format: "#%02X%02X%02X", red, green, blue)
        return hexString as String
    }

} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-09-11T00:04:45.040

不会因色彩空间问题而崩溃的解决方案：

```
import Cocoa

extension NSColor {

    var hexString: String {
        guard let rgbColor = usingColorSpaceName(NSColorSpaceName.calibratedRGB) else {
            return "#FFFFFF"
        }
        let red = Int(round(rgbColor.redComponent * 0xFF))
        let green = Int(round(rgbColor.greenComponent * 0xFF))
        let blue = Int(round(rgbColor.blueComponent * 0xFF))
        let hexString = NSString(format: "#%02X%02X%02X", red, green, blue)
        return hexString as String
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-12-10T11:23:24.540

一个选项是创建 NSColor 的扩展

```
public extension NSColor {
    func getHexString() -> String {
        let red = Int(round(self.redComponent * 0xFF))
        let grn = Int(round(self.greenComponent * 0xFF))
        let blu = Int(round(self.blueComponent * 0xFF))
        let hexString = NSString(format: "#%02X%02X%02X", red, grn, blu)
        return hexString
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-14T11:00:11.877

为 Swift 4 更新

```
extension NSColor {

    var hexString: String {
        guard let rgbColor = usingColorSpaceName(NSColorSpaceName.calibratedRGB) else {
            return "FFFFFF"
        }
        let red = Int(round(rgbColor.redComponent * 0xFF))
        let green = Int(round(rgbColor.greenComponent * 0xFF))
        let blue = Int(round(rgbColor.blueComponent * 0xFF))
        let hexString = NSString(format: "#%02X%02X%02X", red, green, blue)
        return hexString as String
    }

} 
```

# c# - 从网络获取图像

> ID：15887583
> 
> 赞同：-1
> 
> 时间：2013-04-08T19:46:03.910
> 
> 标签：c#, visual-studio-2010

我将解释我想要做什么：让我们以这张[照片](http://i.stack.imgur.com/glbMA.jpg)为例。我想下载这张图片并在我的应用程序中使用图片框打开它。我想我需要使用
`Bitmap bitmap = new Bitmap(xxxx);` ，我应该在“xxxx”的地方放什么？我看到的脚本是用 Delphi 编写的，看起来像这样：

```
Value := copys (searchPage, '<link rel="image_src" href="', '">');
GetPicture (Value); 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T19:52:49.983

```
Image i = new Image();
BitmapImage src = new BitmapImage();
src.BeginInit();
src.UriSource = new Uri("http://i.stack.imgur.com/glbMA.jpg");
src.EndInit();
i.Source = src; 
```

# json - 杰克逊解析器处理具有相同名称的多个字段名称

> ID：15887584
> 
> 赞同：6
> 
> 时间：2013-04-08T19:46:05.207
> 
> 标签：json, jackson

我认为 Jackson JSON 解析器的一个特性是我案例的固有问题。我要解析一个可能不符合 json 格式的未知文件，从而最终拥有多个相同的键名。在这种情况下，如果我在其上调用 getFieldNames() 之类的函数，它最终只会在多个相同的简单元素中给出一个条目。因此，如果我对其进行 get(String) 操作，我最终将只获得其中一个具有相同键值的 Json 节点，而我应该获得所有其他节点对此有何评论或解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T20:41:45.440

大多数 JSON 解析器会立即拒绝您的输入文件，因为不允许在同一嵌套级别重复键（这是事实上的标准）。但是，某些解析器将允许您以多种方式处理重复项。

在 Jackson 中处理此问题的一种方法是将常规属性映射到实体类，然后通过[`@JsonAnySetter`](http://jackson.codehaus.org/1.9.4/javadoc/).

```
public class Bag {
    final transient Multimap<String, Object> multimap = LinkedListMultimap
            .create();

    // regular properties, constructors etc

    @JsonAnySetter
    public void add(final String key, final String value) {
        multimap.put(key, value);
    }
} 
```

注意 multimap 的使用：常规哈希映射不能包含重复的键，因此 multimap 是有效解决方案的要求。反序列化输入文件后，所有“常规”JSON 属性都将映射到其相应的实体属性，而所有重复项将存储在映射中，并可用于手动处理。

```
final List<Object> duplicatedValues = multimap.get(someKey); 
```

或者，您可以创建一个自定义反序列化器，*它将*接收所有令牌（无论它们是否重复）。

# debugging - 在不添加中间代码行的情况下调试方法调用的结果

> ID：15887585
> 
> 赞同：0
> 
> 时间：2013-04-08T19:46:06.197
> 
> 标签：debugging, visual-c++

我正在尝试提高调试会话的效率。**有没有办法将表达式的结果视为隐式局部变量？**

在这个人为的示例中，我想知道 cs.method2() 的评估结果，而无需编写一行代码或单步执行该方法。

```
bool myObject::isEmpty(double d)
{
     bool res;
     custString cs(d);

     // bool dresult = cs.method2();
     res = !cs.method1().empty() && cs.method2();

     return res; //set break here.
} 
```

我不想进入method2，因为它是一个深链，我只对结果感兴趣，但这总是传递给像这样的返回

```
return _mycs_string(_dat); 
```

因此，我必须一直步入可能具有相同模式的调用。

而且我不想编写代码拆分行，因为这是一个我无意修改的库。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T20:11:36.257

~~我的建议是按照您在此处编写的代码，在上一行中明确设置 cs.method2() 的结果。~~

这个建议的原因是我非常相信编译器开发人员能够在从函数返回之前优化掉“不必要的”局部变量。

（您可以查看编译器的结果代码以了解您在此处拥有的代码，看看它对您的 `res' 变量做了什么）

~~另一种可能性是 w~~在从 cs.method2() 调用返回时观察堆栈（在调试器中），因为这是存储返回值的地方。

# c++ - unique_ptr 的临时只读副本

> ID：15887587
> 
> 赞同：12
> 
> 时间：2013-04-08T19:46:07.383
> 
> 标签：c++, c++11, shared-ptr, stdvector, unique-ptr

我对 C++11 的智能指针很陌生，我正在尝试在项目中有效地使用它们。在我的项目中，我有很多函数接受对 a `vector`of的 const 引用`unique_ptr`，对其进行一些计算，并将一些结果放在返回参数中，如下所示：

```
void computeCoefficients(const vector<unique_ptr<Scalar>>& roots, 
    vector<unique_ptr<Scalar>>& coeffs) {
    ...
} 
```

我正在使用`unique_ptr`，因为调用所有这些函数的过程是 中对象的唯一所有者`vector`，并且这些函数只是“借用”对象以便将它们作为输入读取。

现在我正在尝试编写一个`vector`对它接收的不同子集进行计算的函数，为了做到这一点，它需要具有`vector`包含这些子集的不同“版本”，以便传递给另一个需要`vector<unique_ptr<Scalar>>`作为输入。但是获得向量子集的唯一方法是复制它——这是一个问题，因为`unique_ptr`s 不能被复制。我希望代码看起来像这样：

```
void computeOnSet(const vector<unique_ptr<Scalar>>& set, unique_ptr<Scalar>& output) {  
    ...
}

void computeOnAllSubsets(const vector<unique_ptr<Scalar>>& set, vector<unique_ptr<Scalar>>& outputs) {
    for(int i = 0; i < input.size(); i++) {
        auto subset = vector<unique_ptr<Scalar>>(set.begin(), set.begin()+i);
        subset.insert(subset.end(), set.begin()+i+1, set.end();
        computeOnSubset(subset, outputs.at(i));
    }
} 
```

当然，这是行不通的。`unique_ptr`如果我用s替换 s，我可以让它工作`shared_ptr`，但这有两个问题：

*   从哲学上讲，这意味着我与`computeOnSubsets`函数共享集合的所有权，而我不是；调用者仍然是唯一的所有者。（我读到这`shared_ptr`意味着您与所有拥有它的副本的东西共享所有权）。
*   即使在我不需要它的地方，它也会引入引用计数的开销，因为它会迫使我将所有方法的输入参数更改为`vector<shared_ptr<Scalar>>`.

我要做的就是制作一个*临时的、只读*的指针副本，其唯一目的是制作*临时的、只读的*子向量。有没有办法做到这一点？`weak_ptr`听起来像我需要的（非拥有临时指针），但它只能与`shared_ptr`.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-08T19:56:41.487

> 我使用 unique_ptr 因为调用所有这些函数的过程是向量中对象的唯一所有者，并且这些函数只是“借用”对象以便将它们作为输入读取。

由于计算函数不拥有指向的对象，只是观察它们的状态并进行计算，因此您应该将*观察指针*的向量（在本例中为常规**原始指针**）传递给它们，而不是 s 的向量`unique_ptr`。

因为`computeOnAllSubsets()`并且`computeOnSet()`不对对象的生命周期负责`Scalar`，所以它们甚至不应该获得它们的所有权——换句话说，它们不应该获得所有权`unique_ptr`。

毕竟，程序的逻辑可以保证这些函数不会接收悬空引用，因为拥有函数在执行所有必要的计算之前不会破坏它的向量。您正在编写的内容直接支持这一点：

> 我要做的就是制作一个临时的、只读的指针副本，其唯一目的是制作临时的、只读的子向量。有没有办法做到这一点？

**只需将原始指针向量传递给您的计算函数**。给定 a `unique_ptr`，您可以通过调用成员函数来访问封装的原始指针`get()`：

```
std::unique_ptr<Scalar> pS // ... initialized somehow
Scalar* pScalar = pS.get(); 
```

作为原始指针的替代方案，您可以[`std::reference_wrapper`](http://en.cppreference.com/w/cpp/utility/functional/reference_wrapper)用于调度观察引用。特别是在重构遗留代码库的过程中，原始指针用于手动内存管理，这将清楚地表明引用对象的所有权属于其他地方。

但是请注意，在现代 C++ 中，原始指针通常是观察指针的*同义词*，因此上述区别在广义上下文中没有真正意义。最基本的用例`std::reference_wrapper`是当您希望通过引用某个函数模板来传递对象时，该模板按值接受其参数（[`std::bind()`](http://en.cppreference.com/w/cpp/utility/functional/bind)这是一个典型示例）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T09:09:29.167

使用迭代器可能会使您的代码更加通用。只需声明您的计算函数，如：

```
template <typename InputIt, typename OutputIt>
void compute(InputIt first_it, InputIt last_it, OutputIt d_first, Output d_last); 
```

此计算函数模板处理范围内的数据`[first_it, last_it)`，然后将结果放入`[d_first, d_last)`. 它不关心输入或输出容器的类型。迭代器充当容器中元素的指针，这是 STL 的思想。

此外，在某些情况下，您甚至不需要手动检查范围。只需在 中使用函数模板`<algorithm>`，例如`std::for_each`和`std::transform`。

我不太了解 中的代码片段`computeOnAllSubsets`，但本能地我认为这`std::transform`可能会有所帮助。

# clojure - 在 Eclipse 中加载 Clojure Leiningen 项目

> ID：15887590
> 
> 赞同：2
> 
> 时间：2013-04-08T19:46:10.313
> 
> 标签：clojure, leiningen

Clojure/Leiningen/Eclipse（和 Java）newby。我试图让 Eclipse 加载一个 Clojure/Leiningen 项目，我看到搜索 Lein 插件解决方案的结果令人困惑/矛盾。

适用于 Java 开发人员的 Eclipse IDE 版本：Juno Service Release 2 Build id：20130225-0426 (Windows 8)

我在 .lein\profiles.clj 中有以下用户配置文件

```
{:user {:plugins [ [lein-eclipse "1.0.0"]
]}} 
```

以及以下 Leiningen 项目文件：

```
(defproject firstclojureproj "0.1.0-SNAPSHOT"
  :description "FIXME: write description"
  :url "http://example.com/FIXME"
  :license {:name "Eclipse Public License"
            :url "http://www.eclipse.org/legal/epl-v10.html"}
  :dependencies [
                [org.clojure/clojure "1.5.1"]
                [lein-eclipse "1.0.0"]
                ]
) 
```

做一个 lein 帮助我得到以下信息（我认为这是我问题的根源）

```
leiningen.eclipse  Problem loading: Could not locate clojure/contrib/duck_streams__init.class or clojure/contrib/duck_streams.clj on classpath: 
```

此外，当我尝试将/现有项目导入工作区/并选择包含我的 Leiningen 项目的文件夹时，该文件夹显示为灰色并带有一个复选框，我无法选择它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-23T13:11:43.073

不需要特殊的插件。

创建一个 Maven pom 文件：

```
→ lein pom
Wrote /home/jhoetzel/clojure/hellop/pom.xml 
```

使用 Maven eclipse:eclipse 目标生成 Eclipse 配置文件：

```
→ mvn eclipse:eclipse
[INFO] Wrote Eclipse project for "hellop" to /home/juergen/clojure/hellop. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-25T09:03:35.377

添加`[no-man-is-an-island/lein-eclipse "2.0.0"]`到您`project.clj`的`:plugins`. 然后运行：

```
>lein deps
>lein eclipse 
```

输出应该是：

```
Created .classpath
Created .project 
```

您现在可以在 Eclipse（逆时针）中将您的项目文件夹作为“现有项目到工作区”导入。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T20:07:37.353

lein-eclipse 插件是 leiningen 的插件，用于生成 eclipse 项目文件。它位于 project.clj 文件的 :plugins 部分。

```
:plugins [[lein-eclipse "x.y.z"]] 
```

（假设您使用的是 lein 2.1.x+）

lein-eclipse "1.0.0" 已经过时了（3 年），不能与现代版本的 leiningen 一起使用。[clojars](https://clojars.org/repo/lein2-eclipse/lein2-eclipse/)上有一个“2.0.0”版本，尽管我还没有深入研究它是否能更好地工作。

# sass - 导入可以指向变量吗

> ID：15887593
> 
> 赞同：1
> 
> 时间：2013-04-08T19:46:19.763
> 
> 标签：sass

有没有办法将导入参数指向变量？

```
@import $variable_name 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T20:11:26.130

这就是[文档](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#import)所说的：

> 导入可能包含 #{} 插值，但只有某些限制。**无法基于变量动态导入 Sass**文件；插值仅适用于 CSS 导入。因此，它仅适用于 url() 导入。例如：

```
$family: unquote("Droid+Sans");
@import url("http://fonts.googleapis.com/css?family=#{$family}"); 
```

> 将编译为

```
@import url("http://fonts.googleapis.com/css?family=Droid+Sans"); 
```

因此，您的问题的答案可能是您正在尝试做的事情，这是不可能的。

# configuration - 我的域名没有 www 但没有 www。为什么？

> ID：15887594
> 
> 赞同：1
> 
> 时间：2013-04-08T19:46:21.703
> 
> 标签：configuration, dns, vps

我最近将我的虚拟专用服务器 (VPS) 与我的域名相关联（按照我找到的一些教程），它似乎工作得很好，但是......

如果我访问[http://necarium.com](http://necarium.com)而不是[http://www.necarium.com](http://www.necarium.com)

为什么会这样？我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T19:48:17.597

域本身是否`A`在您的 DNS 设置中有记录？您是否告诉您的网络服务器这`necarium.com`是该站点的有效备用名称？例如在阿帕奇

```
ServerName www.necarium.com
ServerAlias necarium.com 
```

# jquery - jQuery 的 ajax 数据参数在回调函数中返回什么？

> ID：15887595
> 
> 赞同：-1
> 
> 时间：2013-04-08T19:46:26.677
> 
> 标签：jquery, ajax, callback, return

我使用 jQuery 的 ajax 函数来调用一个 url 异步，如下所示：

```
jQuery.ajax({
    url: url,
    type: "GET",
    data: {key : value},
    success: function(data) {
        console.log(data);
    }
} 
```

在服务器端，我不知道要返回什么才能在变量中获得有意义的东西`data`。控制台的日志只是空字符串。

我已经试过了`return 0`,,,,`return 1``return array('status' => 1)``return true`

背景：我想知道是否在服务器端抛出了任何异常来传递类似 false 或 true 的内容，如果它成功且没有异常。

编辑：服务器端语言是 PHP

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T19:52:50.450

假设您使用的是 PHP，您只需回显一个字符串返回值。

```
echo "true";
exit; 
```

或者

```
echo "false";
exit; 
```

然后你可以用 jQuery 解析它：

```
if ( $.trim(data) == "true" ) {
    console.log("success!")
}
else {
    console.log(data);
} 
```

您也可以回显 0 或 1，但请记住，当它到达 jQuery 时，它仍然是一个字符串，而不是一个数字。对于更复杂的数据，比如数组，可以json_encode。

```
echo json_encode( $myarray );
exit; 
```

并在 jQuery 的方法中设置`dataType`为。`"json"``$.ajax`

# sql-server - 获取列中的前 6 个项目以在 SQL 中旋转到一行

> ID：15887600
> 
> 赞同：0
> 
> 时间：2013-04-08T19:46:39.643
> 
> 标签：sql-server, tsql, pivot

我无法让列在 SQL 中进行透视。我想将前 6 个结果从一列转换为一行。我正在旋转的列可以从少于或多于 6 个结果开始，但我想忽略前 6 名之外的任何内容。

我的 Table1 看起来像这样：

```
ID | GroupID | CodeNum
----------------------
1  | 1       | 111
2  | 1       | 222
3  | 1       | 333
4  | 1       | 444
5  | 1       | 555
6  | 1       | 666
7  | 1       | 777
8  | 2       | 111
9  | 2       | 888
10 | 3       | 999 
```

我希望我的输出看起来像这样：

```
GroupID | Code1 | Code2 | Code3 | Code4 | Code5 | Code6
-------------------------------------------------------
1       | 111   | 222   | 333   | 444   | 555   | 666
2       | 111   | 888   |       |       |       |
3       | 999   |       |       |       |       | 
```

我试过这段代码：

```
SELECT  GroupID
        , [Code1] = CASE WHEN rn = 1 THEN CodeNum END
        , [Code2] = CASE WHEN rn = 2 THEN CodeNum END
        , [Code3] = CASE WHEN rn = 3 THEN CodeNum END
        , [Code4] = CASE WHEN rn = 4 THEN CodeNum END
        , [Code5] = CASE WHEN rn = 5 THEN CodeNum END
        , [Code6] = CASE WHEN rn = 6 THEN CodeNum END
FROM    (
            SELECT  TOP 6 GroupID
                    , rn = ROW_NUMBER() OVER (ORDER BY ID)
                    , CodeNum
            FROM    Table1      
        ) q
GROUP BY
        GroupID 
```

但我收到一个错误，上面写着`Column 'q.rn' is invalid in the select list because it is not contained in either an aggregate function or the GROUP BY clause.`

当 CodeNum 每个 GroupID 可以有 1 到 12 个值时，有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T19:59:23.903

由于您使用的是`GROUP BY`，因此您需要按 中的所有项目分组`SELECT`或使用聚合函数。

您将需要使用以下内容来获取结果，然后*将*行转换为列：

```
SELECT  GroupID
        , [Code1] = max(CASE WHEN rn = 1 THEN CodeNum END)
        , [Code2] = max(CASE WHEN rn = 2 THEN CodeNum END)
        , [Code3] = max(CASE WHEN rn = 3 THEN CodeNum END)
        , [Code4] = max(CASE WHEN rn = 4 THEN CodeNum END)
        , [Code5] = max(CASE WHEN rn = 5 THEN CodeNum END)
        , [Code6] = max(CASE WHEN rn = 6 THEN CodeNum END)
FROM    
(
  SELECT  GroupID
   , rn = ROW_NUMBER() OVER (PARTITION BY GroupID ORDER BY ID)
   , CodeNum
  FROM    Table1      
) q
GROUP BY GroupID 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/ba45d/6)

您会注意到我删除了`TOP 6`并添加了`partition by GroupId`. 如果您使用`TOP`，那么您将只返回第一个 ID 的值。分区将返回每个 ID 的行，但外部选择仅返回前 6 行。

这给出了结果：

```
| GROUPID | CODE1 |  CODE2 |  CODE3 |  CODE4 |  CODE5 |  CODE6 |
----------------------------------------------------------------
|       1 |   111 |    222 |    333 |    444 |    555 |    666 |
|       2 |   111 |    888 | (null) | (null) | (null) | (null) |
|       3 |   999 | (null) | (null) | (null) | (null) | (null) | 
```

请注意，根据您的 SQL Server 版本，这也可以使用以下`PIVOT`函数编写：

```
select GroupID,
  [1] as Code1, 
  [2] as Code2, 
  [3] as Code3, 
  [4] as Code4, 
  [5] as Code5, 
  [6] as Code6
from
(
  SELECT  GroupID
   , rn = ROW_NUMBER() OVER (PARTITION BY GroupID ORDER BY ID)
   , CodeNum
  FROM Table1    
) d
pivot
(
  max(codenum)
  for rn in ([1], [2], [3], [4], [5], [6])
) piv; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/ba45d/11)

# iphone - 使用 NSCoder 保存自定义 MKOverlay

> ID：15887601
> 
> 赞同：1
> 
> 时间：2013-04-08T19:46:39.690
> 
> 标签：iphone, objective-c, nscoding, mkoverlay, nscoder

我有一个要保存到 plist 的自定义 NSObject 类 Trails。我现在可以正确保存和加载它，除了一部分。我在那个类中有一个自定义的 MKOverlay 类对象 Crumbs，我也想保存它。由于 crumbs 符合 NSCoding，因此不会引发错误，但是在保存并重新打开应用程序后，叠加层不会显示在地图上。crumb 对象不是 nil，但仍然不显示。

轨迹.h

```
@interface Trails : NSObject <NSCoding>
{
    @public
    int topSpeed;
    float avgSpeed;
}
@property (nonatomic, strong) NSString *miles;
@property (nonatomic, strong) NSDate *date;
@property (nonatomic, strong) NSString *time;
@property (nonatomic, strong) CrumbPath *crumbs;
- (NSString *)displayDate;
- (NSString *)displayStartTime;
- (void)addTopSpeed: (int)top withAvgSpeed:(float)avg;
@end 
```

轨迹.m

```
- (void)encodeWithCoder:(NSCoder *)coder {
    [coder encodeObject:miles forKey:@"miles"];
    [coder encodeObject:date forKey:@"date"];
    [coder encodeObject:time forKey:@"time"];
    [coder encodeObject:crumbs forKey:@"crumbs"];
    [coder encodeFloat:avgSpeed forKey:@"avgSpeed"];
    [coder encodeInt:topSpeed forKey:@"topSpeed"];

}

- (id)initWithCoder:(NSCoder *)coder {
    self = [super init];
    if( self != nil )
    {
        miles = [coder decodeObjectForKey:@"miles"];
        date = [coder decodeObjectForKey:@"date"];
        time = [coder decodeObjectForKey:@"time"];
        crumbs = [coder decodeObjectForKey:@"crumbs"];
        avgSpeed = [coder decodeFloatForKey:@"avgSpeed"];
        topSpeed = [coder decodeIntForKey:@"topSpeed"];
    }
    return self;
} 
```

面包屑.h

```
@interface CrumbPath : NSObject <MKOverlay, NSCoding> 
```

面包屑.m

```
#import "CrumbPath.h"

#define INITIAL_POINT_SPACE 1000
#define MINIMUM_DELTA_METERS 10.0

@implementation CrumbPath

@synthesize points, pointCount;

- (id)initWithCenterCoordinate:(CLLocationCoordinate2D)coord
{
    self = [super init];
    if (self)
    {
        // initialize point storage and place this first coordinate in it
        pointSpace = INITIAL_POINT_SPACE;
        points = malloc(sizeof(MKMapPoint) * pointSpace);
        points[0] = MKMapPointForCoordinate(coord);
        pointCount = 1;

        // bite off up to 1/4 of the world to draw into.
        MKMapPoint origin = points[0];
        origin.x -= MKMapSizeWorld.width / 8.0;
        origin.y -= MKMapSizeWorld.height / 8.0;
        MKMapSize size = MKMapSizeWorld;
        size.width /= 4.0;
        size.height /= 4.0;
        boundingMapRect = (MKMapRect) { origin, size };
        MKMapRect worldRect = MKMapRectMake(0, 0, MKMapSizeWorld.width, MKMapSizeWorld.height);
        boundingMapRect = MKMapRectIntersection(boundingMapRect, worldRect);

        // initialize read-write lock for drawing and updates
        pthread_rwlock_init(&rwLock, NULL);
    }
    return self;
}

- (void)dealloc
{
    free(points);
    pthread_rwlock_destroy(&rwLock);
}

- (CLLocationCoordinate2D)coordinate
{
    return MKCoordinateForMapPoint(points[0]);
}

- (MKMapRect)boundingMapRect
{
    return boundingMapRect;
}

- (void)lockForReading
{
    pthread_rwlock_rdlock(&rwLock);
}

- (void)unlockForReading
{
    pthread_rwlock_unlock(&rwLock);
}

- (MKMapRect)addCoordinate:(CLLocationCoordinate2D)coord
{
    // Acquire the write lock because we are going to be changing the list of points
    pthread_rwlock_wrlock(&rwLock);

    // Convert a CLLocationCoordinate2D to an MKMapPoint
    MKMapPoint newPoint = MKMapPointForCoordinate(coord);
    MKMapPoint prevPoint = points[pointCount - 1];

    // Get the distance between this new point and the previous point.
    CLLocationDistance metersApart = MKMetersBetweenMapPoints(newPoint, prevPoint);
    MKMapRect updateRect = MKMapRectNull;

    if (metersApart > MINIMUM_DELTA_METERS)
    {
        // Grow the points array if necessary
        if (pointSpace == pointCount)
        {
            pointSpace *= 2;
            points = realloc(points, sizeof(MKMapPoint) * pointSpace);
        }    

        // Add the new point to the points array
        points[pointCount] = newPoint;
        pointCount++;

        // Compute MKMapRect bounding prevPoint and newPoint
        double minX = MIN(newPoint.x, prevPoint.x);
        double minY = MIN(newPoint.y, prevPoint.y);
        double maxX = MAX(newPoint.x, prevPoint.x);
        double maxY = MAX(newPoint.y, prevPoint.y);

        updateRect = MKMapRectMake(minX, minY, maxX - minX, maxY - minY);
    }

    pthread_rwlock_unlock(&rwLock);

    return updateRect;
}

//Conform to NSCoding
- (void)encodeWithCoder:(NSCoder *)coder {
    //I think I need to do something here?
}

- (id)initWithCoder:(NSCoder *)coder {
    self = [super init];
    if( self != nil )
    {
        //I think I need to do something here?
    }
    return self;
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T21:09:30.660

你的类`encodeWithCoder`和类的实现是空的。您需要保存所有属性/变量，就像您为对象所做的一样。所有对象都负责保存自己的关于 NSCoding 的属性/变量。`initWithCoder``CrumbPath``Trails`

只是补充一下-您不能直接将 CLLocationCoordinate2D 和 CGRect 写入磁盘。您必须将它们分解并重组。例如，使用 CGRect，您必须进行如下编码：

```
 [aCoder encodeFloat:rect.origin.x forKey:@"x"];
 [aCoder encodeFloat:rect.origin.y forKey:@"y"];
 [aCoder encodeFloat:rect.size.width forKey:@"width"];
 [aCoder encodeFloat:rect.size.height forKey:@"height"]; 
```

然后在解码/初始化时，你必须重构它：

```
 CGFloat x = [aDecoder decodeFloatForKey:@"x"];
 CGFloat y = [aDecoder decodeFloatForKey:@"y"];
 CGFloat width = [aDecoder decodeFloatForKey:@"width"];
 CGFloat height = [aDecoder decodeFloatForKey:@"height"];

 self.rect = CGRectMake(x,y,width,height); 
```

# ios - CAShapeLayer 的动画：为什么 -insertSublayer:atIndex: 会破坏动画？

> ID：15887602
> 
> 赞同：0
> 
> 时间：2013-04-08T19:46:40.733
> 
> 标签：ios, objective-c, cocoa, core-animation

我有许多 CAShapeLayers 已经是视图层 (UIView) 的子层。我可以毫无困难地为他们的路径设置动画。但是，我需要稍后添加一些额外的形状图层，然后为所有形状图层的所有路径设置动画。当我尝试插入新的子层时，动画不再出现。视图以最终状态的所有形状图层进行渲染。

这是我正在处理的代码块。当我将其注释掉时，现有图层的路径动画效果很好。有人可以告诉我发生了什么事吗？

```
for (int i = oldPoints.count; i < newPoints.count; i++)
    [self.layer insertSublayer: [CAShapeLayer layer] atIndex: ++layerIndex]; 
```

另外，我尝试调用 -addSublayer: 并且得到相同的结果。

我的超级视图中的动画代码如下所示：

```
[UIView animationWithDuration: 0.2
                   animations: ^{

                       for (ComponentView *view in _componentViews)
                           [view reloadDataWithAnimation: YES];

                       [self layoutComponentViews];
                   }
                   completion: ^(BOOL finished) {

                   }]; 
```

在 -reloadDataWithAnimation: 在我的 ComponentView 中，我有以下代码：

```
- (void) reloadDataWithAnimation: (BOOL) animate {

    for (int rowIndex = 0; rowIndex < oldData.count; rowIndex++) {

        NSArray     *oldPoints  = [oldData objectAtIndex: rowIndex];
        NSArray     *newPoints  = nil;

        if (rowIndex < newData.count)
            newPoints = [newData objectAtIndex: rowIndex];

        if (newPoints.count > oldPoints.count) {

            layerIndex += oldPoints.count;

            for (int i = oldPoints.count; i < newPoints.count; i++)
                [self.layer insertSublayer: [CAShapeLayer layer] atIndex: ++layerIndex];

        }
        else if (newPoints.count < oldPoints.count) {

            layerIndex += newPoints.count;

            for (int i = newPoints.count; i < oldPoints.count; i++)
                [disposableLayers addObject: [self.layer.sublayers objectAtIndex: ++layerIndex]];

        }
        else {

            if (newPoints.count > 0)
                layerIndex += newPoints.count;

        }
    }

    if (newData.count > oldData.count) {

        for (int rowIndex = oldData.count; rowIndex < newData.count; rowIndex++) {

            NSArray *newPoints = [newData objectAtIndex: rowIndex];

            for (int i = 1; i < newPoints.count; i++)
                [self.layer insertSublayer: [CAShapeLayer layer] atIndex: ++layerIndex];

        }
    }

    /*  code that iterates through old and new data structures  */

        CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath: @"path"];
        [animation setFromValue: (__bridge id) oldPath];
        [animation setToValue: (__bridge id) newPath];
        [animation setFillMode: kCAFillModeForwards];
        [animation setDuration: _defaultAnimationDuration];

        CAShapeLayer *shapeLayer = (CAShapeLayer *) [self.layer.sublayers objectAtIndex: layerIndex];
        [shapeLayer setPath: newPath];
        [shapeLayer setStrokeColor: [self strokeColorForItemAtIndexPath: indexPath].CGColor];
        [shapeLayer setLineWidth: self.lineWidth];
        [shapeLayer addAnimation: animation forKey: @"path"];

} 
```

谢谢！

# c++ - 如何连接字符串和整数以创建文件名？

> ID：15887603
> 
> 赞同：2
> 
> 时间：2013-04-08T19:46:40.813
> 
> 标签：c++, sdl

我有一系列文件（New1.BMP、New2.BMP、...、New10.BMP）。

我需要创建一个变量来存储上述文件的名称，然后在另一个代码中使用它。

我当前的代码：

```
int LengthFiles =10;
char FilePrefix[100]="New";//This is actually passed to the function. Am changing it here for simplicity
char str[200],StrNumber[1];//str holds the file name in the end. StrNumber is used to convert number value to character
 SDL_Surface *DDBImage[9]; // This is a SDL (Simple DIrectMedia Library) declaration.
 for (int l=0;l<LengthFiles ;l++)
     {      
    itoa(l, StrNumber, 1);
    strcat(str,FilePrefix);strcat(str,StrNumber);strcat(str,".BMP");
    DDBImage[l]= SDL_DisplayFormat(SDL_LoadBMP(str));

     } 
```

如您所见，我不知道如何用 C++ 编写代码，我试图通过在线代码片段来完成这项工作。这就是它应该如何在 C/C++ 中工作，即动态创建变量。

我如何最好地接近它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T19:51:30.947

你原来的问题标题有点误导，因为你真正想做的就是连接一个字符串和一个整数。

在 C++ 中，您可能会这样做`stringstream`：

```
stringstream ss;
ss << "New" << l << ".bmp"; 
```

然后得到一个`string`变量：

```
string filename = ss.str(); 
```

最后将 C 字符串传递给 SDL 函数，使用`c_str()`：

```
SDL_LoadBMP(filename.c_str()) 
```

* * *

的声明`DDBImage`是错误的。您需要一个长度为 10 的数组，但您声明它的长度为 9。如果您将其`LengthFiles`设为常量，则可以编写`SDL_Surface *DDBImage[LengthFiles]`，因此请确保该数组的长度正确。

代码可能如下所示：

```
const int FileCount = 10;
SDL_Surface *DDBImage[FileCount];
for (int index=0; index<FileCount; index++)
{      
    stringstream ss;
    ss << "New" << index << ".bmp";
    string filename = ss.str();
    DDBImage[index] = SDL_DisplayFormat(SDL_LoadBMP(filename.c_str()));
} 
```

如果您的文件名确实以开头，`New1.bmp`那么您需要调整索引：

```
ss << "New" << index+1 << ".bmp"; 
```

最后，如果您需要扩展它以处理在运行时确定的可变数量的文件，那么您应该使用`vector<*DDBImage>`而不是原始数组。Using`vector<>`允许您让 C++ 标准库为您处理低级内存管理。事实上，任何时候当你发现自己在用 C++ 编程时分配内存时，你应该问自己是否已经有标准库的某些部分可以为你做这件事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T19:52:01.537

您可以使用格式化字符串 printf... 大致沿线

```
sprintf( str, "%s%d.BMP", prefix, fileNumber ); 
```

看看[http://www.cplusplus.com/reference/cstdio/sprintf/](http://www.cplusplus.com/reference/cstdio/sprintf/)

# java - 如何在Java中单击下一个和上一个按钮时显示下一个和上一个记录？

> ID：15887604
> 
> 赞同：-1
> 
> 时间：2013-04-08T19:46:41.637
> 
> 标签：java, swing, jdbc, jbutton

```
private void cmd_nextActionPerformed(java.awt.event.ActionEvent evt) {     

  pst=conn.prepareStatement("select * from questions where subject= ?");
            pst.setString(1, "websites");
            rs=pst.executeQuery();
   while(rs.next())
            {

                 qs=rs.getString("question");
                 option1=rs.getString("option1");
                 option2=rs.getString("option2");
                 option3=rs.getString("option3");
                 txt_quest.setText(qs);
                jcb_opt1.setText(option1);
                jcb_opt2.setText(option2);
                jcb_opt3.setText(option3);

       }
    catch(Exception ex)
    {
        JOptionPane.showMessageDialog(null, ex);
    }
            } 
```

我想在单击按钮时从表中获取下一行，在单击`next`按钮时获取上一行`previous`。有什么简单的方法可以做到这一点...？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:09:55.390

您不应该在只想获取 rs.next() 的方法中“**从问题中选择 * ”。**如果你想得到 rs.previous() 你会再次“选择 *”吗？将您的选择放在程序的开头。

**设计良好的cmd_nextActionPerformed**需要考虑三种情况：

1.  您的数据库表是空的，或者只有一个条目。在这种情况下，应该禁用下一个按钮，因为没有下一个条目。

2.  你有一个下一个条目。获取数据并刷新 JTextFields。应该启用下一步按钮。

3.  你在最后。在 rs.next() 检查之后，如果 rs.isAfterLast() 返回 true，那么您需要转到 rs.last() 并留在那里。下一步按钮应该被禁用。

好消息是**cmd_previousActionPerformed**是对称的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T17:06:39.210

接下来，

```
rs.next() 
```

对于以前，

```
rs.previous(); 
```

# html - 将锚点和段落都与图像内联

> ID：15887606
> 
> 赞同：0
> 
> 时间：2013-04-08T19:46:51.860
> 
> 标签：html, css

这是我到目前为止所拥有的：http: [//jsfiddle.net/hLbyy/4/](http://jsfiddle.net/hLbyy/4/)使用`margin`属性。

我查看了各种页面来源（例如[Wordpress](http://wordpress.org/support/topic/floating-inline-images-with-multiple-paragraphswhere)，其中用户的头像与他们的详细信息内联，但这似乎在一个段落中而不是列表项中。）但我无法找到实现这一点的 CSS 行。

非常感谢任何有助于实现这一目标的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T19:50:43.850

这是你要找的：

```
p {
    display: inline-block;
}
img {
    vertical-align: top;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T19:53:17.813

对 img 标签使用 " `float: left;`" 样式。

不知何故像[这样](http://jsfiddle.net/hLbyy/11/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T20:03:22.767

您想要做的最好的方法是将带有图像的链接包装在一个 div 中，然后将此 div 设置为：

```
display: block; 
```

并将您的链接和文本包装在另一个 div 中，该 div 应该在您的图像右侧自动对齐，如果您想变得更漂亮，您可以将两个 div 包装在一个 div 中。

# java - Java 简单日期格式

> ID：15887612
> 
> 赞同：-2
> 
> 时间：2013-04-08T19:47:11.860
> 
> 标签：java, string, date, date-format, simpledateformat

我正在尝试将文本格式化为日期。这是我所拥有的：

```
String pattern = "yyyy.MM.dd";
SimpleDateFormat sdf = new SimpleDateFormat(pattern);
Date d=sdf.parse("12.1.5"); 
```

我得到：

> java.lang.IllegalArgumentException：非法模式字符'Y'

在此刻。

我也尝试过使用 ParsePosition 以及“2012.01.05”。同样的错误。

如何将此字符串解析为日期？有什么可选的方式吗？我错过了什么？

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T19:50:22.237

您提供的代码工作正常 - 尽管您*声称*您将有一个 4 位数的年份、2 位数的月份和 2 位数的日期，然后提供 2-1-1 的事实是相当不可靠的。

鉴于您遇到的异常，我怀疑您的模式*实际上是* `"YYYY.MM.dd"`相反的。这在[Java 7](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)中有效，`Y`意思是“周年”，但在*不*支持格式说明符的[Java 6](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)中无效- only 。`Y``y`

即使它是有效的，你也真的不想`Y`在这里 - 当你还指定周年和周中的星期时，你只会指定周年，而你在这里没有这样做。

坚持你在你发布的代码中实际得到的模式——但要确保你的数据真正匹配它......

# asp.net - 将枚举存储到实体中的数据库

> ID：15887615
> 
> 赞同：0
> 
> 时间：2013-04-08T19:47:15.800
> 
> 标签：asp.net, asp.net-mvc, entity-framework, c#-4.0

我正在尝试将下拉选择的值传递给数据库我的数据合同具有以下代码

```
 public EnumTypes.RegardingObjectType RegardingObjectType { get; set; }
    public Guid RegardingObjectId { get; set; } 
```

enumtypes.cs 有以下内容

```
 public class EnumTypes
{

    public enum RegardingObjectType
    {
        UnknownOrNone = 0,
        Account = 1,
        Cellsite = 2, 
```

eventdal.cs 有以下内容

```
 private t_Event MapEventToEntity(Event newevent, t_Event eventToBeChanged)
    {
   eventToBeChanged.RegardingObjectType = int.Parse(newevent.RegardingObjectType.ToString()); 
```

它构建良好，但在运行时出现异常

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T20:07:35.720

Entity Framework 4 不支持使用枚举作为列类型。如果您想获得对枚举的本机支持，则需要升级到 Entity Framework 5。

如果您绝对必须使用 EF 4（因为已经在其中实施了一个项目），那么我建议您这样绕过它：

```
public int RegardingObjectTypeAsInt { get; set; }

[NotMapped]
public EnumTypes.RegardingObjectType RegardingObjectType
{
  get { return (EnumTypes.RegardingObjectType) this.RegardingObjectTypeAsInt; }
  set { this.RegardingObjectTypeAsInt = (int)value; }
} 
```

这不是一个很好的解决方案，但它是解决问题的可靠解决方案，您仍然可以在页面上绑定它并将其视为其他代码中的枚举本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T22:01:27.960

这行得通

```
eventToBeChanged.RegardingObjectType = (int)newevent.RegardingObjectType; 
```

代替

```
 eventToBeChanged.RegardingObjectType = int.Parse(newevent.RegardingObjectType.ToString()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T22:47:28.580

如果要将字符串值映射到数据库，请查看以下答案：

[如何在实体框架 4 中映射枚举属性](https://stackoverflow.com/questions/15818622/how-to-map-an-enum-property-in-entity-framework-4/15823242#15823242)

正如@IronMan84 指出的那样，我不确定这是否适用于多字枚举 - 但它很有用并且它仍然有效。

# c++ - 使用没有重复键的链表进行顺序搜索

> ID：15887620
> 
> 赞同：-1
> 
> 时间：2013-04-08T19:47:49.490
> 
> 标签：c++, linked-list

我正在尝试进行 seq 搜索，检查重复键，如果存在，我只需要更新值。但是当我尝试使用链表来做这件事时，我遇到了内存问题。

无需检查重复键（在代码中注释掉）即可放置值的普通代码可以正常工作。

```
class seqSearch
{
public:
    int N;

    //helper class node
    class node
    {
    public:
        char key;
        int val;
        node *next;

        node(){ key = NULL; val = NULL; next = NULL;}
        node(char k,int v, node *nxt)
        {
            this->key = k;
            this->val = v;
            this->next = nxt;
        }

    };

    node *first;
    seqSearch(){N=0;}
    bool isEmpty(){return first == NULL;}
    int size(){return N;}
    void put(char,int);
    int get(char);
};

void seqSearch::put(char k, int v)
{
    /*
    node *oldfirst = first;
    //first = new node(k,v,oldfirst);
    first = new node;
    first->key = k;
    first->val = v;
    first->next = oldfirst;
    N++;
    */

    for (node *x = first; x!= NULL; x=x->next)
    {
        //node *oldfirst = first;
        //first = new node(k, v, oldfirst);
        if(x->key == k)
        {
            x->val = v; 
            return;
        }
    }
    first = new node(k, v, first); N++;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T20:30:40.860

你有几个问题。

1.  `first`当你创建一个新节点时，你总是会重置。
2.  您将`first`节点设置`next`为等于自身，以确保您无法遍历您的列表。

尝试更多类似的东西：

```
void seqSearch::put(char k, int v)
{
    node* last = NULL;
    node* current = NULL;

    for (node *x = first; x!= NULL; x=x->next)
    {
        if(x->key == k)
        {
            x->val = v; 
            return;
        }
        last = x;
    }
    current = new node(k, v, NULL); N++;
    if( last == NULL )
        first = current;
    else
        last->next = current;
} 
```

这：

1.  将新创建的节点跟踪为当前节点。
2.  跟踪遍历的最后一个节点，因此可以将其`next`设置为新创建的节点。
3.  `first`如果没有最后一个节点（即我们没有遍历任何节点），则设置为当前节点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T20:30:51.800

`first`应该`NULL`在构造函数中初始化

# windows - Windows批处理列出任何名为Y的子目录中的任何文件类型X（到文本文件）

> ID：15887624
> 
> 赞同：0
> 
> 时间：2013-04-08T19:47:58.847
> 
> 标签：windows, batch-file

我知道我可以在目录树中按类型获取任何文件

```
dir /s /b *.ext > list.txt 
```

或按名称命名的任何子目录

```
dir /s/b *directoryName* >list.txt 
```

但是我如何结合它来按类型和子目录名称获取文件列表？

```
 dir /s /b *directoryname\*.ext
>>The filename, directory name, or volume label syntax is incorrect. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T20:01:42.790

`HELP FOR`在命令行中阅读并尝试

~~for /D %a in (dirname*) do @dir /s /b %a*.ext~~

```
for /R /D %a in (dirname*) do @dir /s /b %a\*.ext 1>>list.txt 2>nul 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T20:04:25.613

我可能已经理解，但你不能这样做：

`dir /s /b "SubfolderName\*.ext"`

?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T20:07:39.927

如果您想要完全递归，您可以使用`findstr`完整的`dir /b /s`.

```
dir /s /b | findstr /i "directoryname.*\.ext$" >list.txt 
```

... 将匹配包含（包括或）`.ext`的任何目录中的文件，其中该目录可能比当前目录深一层以上。`directoryname``directoryname01``01 - directoryname`

在`findstr`搜索正则表达式中，`.*`after`directoryname`表示任何字符的 0 个或多个。在 glob 语法中，它就像`*directoryname*.ext`. 有关语法`help findstr`的更多信息，请参阅。`findstr`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T01:04:53.120

```
dir /s /b /a-d *.ext|findstr /i /r ".*\\.*dirname.*\\.*" 
```

`/a-d`抑制与`.ext`掩码匹配的目录名 - 仅文件名。可能是多余的
，因为正则表达式是默认 的强制大小写不敏感 字符串匹配是 `/r``findstr`
`/i`

```
[any number of any characters]\[any number of any characters][directoryname][any number of any characters]\[any number of any characters] 
```

因为`\`逃跑了`\`

# asp.net - 需要帮助设计数据库 - 用户和项目

> ID：15887625
> 
> 赞同：-1
> 
> 时间：2013-04-08T19:48:05.237
> 
> 标签：asp.net, vb.net, database-design, sql-server-2012

我在**master_db**中有两个表**users**和**project** ，分别存储用户详细信息和项目详细信息。

 **我想解决一个问题：

***我有一个 .aspx 页面，它允许我“管理”一个项目、添加用户并为他们分配角色。我想知道如何创建一个允许我将“用户”添加/删除到“项目”的表。***

我正在考虑创建一个存储**user_id**和**project_id的****user_project**表

 ****您对这个问题有任何想法或其他解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T19:53:12.470

好吧，你需要做的比我想的多一点。例如，您可以有用户#33，在项目#88 中具有角色#4，而在项目#74 中，他具有角色#2。这听起来像用户想要的吗？

如果用户将始终具有相同的角色，那么您的解决方案是正确的。

如果没有，您将必须将 role_id 添加到 user_project。

所以我会有一个 user_project，它是一个 user_id、project_id 和 role_id。此表的 PK 将是 (user_id, project_id)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T19:54:30.067

是的，您将有一个用户表，其中包含仅与用户相关的信息（姓名、电子邮件等），一个仅与项目相关的项目表，然后是第三个表“项目用户”，它将保存两个用户的外键和项目表（userID、projectID），以及任何其他必要的列，如“角色”、“访问级别”等......仅与用户和项目之间的关系有关。“项目用户”表中的主键是两个外键的组合。

您可以有一个安全级别表、一个角色表等...您可以将这些表中的 PK 粘贴到“项目用户”表的“角色”或“安全级别”列中...

希望有帮助...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T19:55:42.327

你在正确的轨道上。这称为“联结”（或“链接”）表，并且具有一个键，该键是从涉及多对多关系的两个表迁移而来的键的组合。例如：

```
CREATE TABLE user_project (
    user_id int REFERENCES users (user_id),
    project_id int REFERENCES project (project_id),
    PRIMARY KEY (user_id, project_id)
) 
```

*（请注意，默认情况下，表在 MS SQL Server 下[聚集](http://use-the-index-luke.com/sql/clustering/index-organized-clustered-index)，除非您在 PRIMARY KEY 中显式使用 NONCLUSTERED 关键字，在这种情况下可能没问题。）*

这确实是表示这种关系的“标​​准”方式。告诉我更多关于“角色”的角色；）我可能也有一些如何处理它的建议......******

# mysql - 使用 XML::libXML 解析 xml--获取第 n 个子节点

> ID：15887626
> 
> 赞同：0
> 
> 时间：2013-04-08T19:48:07.640
> 
> 标签：mysql, xml, perl

我有一个 xml 文档，其中包含我想要放入数据库的信息。例子：

```
<pc>
    <name>John</name>
    <last>Smith</last>
    <address>
        <business>
            <street>987 Broad Way</street>
            <city>New York</city>
            <state>New York</state>
        </business>
        <home>
            <street>123 Main St.</street>
            <city>Jersey City</city>
            <state>Nebraska</state>
        </home>
    </address>
    <phone>123-456-7890</phone>
</pc> 
```

我打算使用 perl 来解析这些数据来构建 mysql 语句。我在获取如下格式时遇到问题：

```
name="John"
last="Smith"
... 
```

到目前为止我使用的代码是：

```
use strict;
use warnings;
use XML::LibXML;

my $filename = "sample.xml";
my $parser = XML::LibXML->new();
my $xmldoc = $parser->parse_file($filename);

for my $contact ($xmldoc->findnodes('/server')){
    print $contact->nodeName(),"\n";
    foreach my $child ($contact->findnodes('*')){
        print "\t", $child->nodeName(), ":\n";
        foreach my $grandchild ($child->findnodes('*')){
            print"\t\t", $grandchild->nodeName(), ":", $grandchild->textContent(), "\n";
        }
    }
} 
```

我不怎么使用 perl，而且我对 XML::libXML 库（[http://metacpan.org/pod/XML::LibXML](http://metacpan.org/pod/XML%3a%3aLibXML)）也不是很熟悉。我想我需要找到最后一个孩子并以我的方式备份节点？我有点迷茫我应该如何为mysql构建我的“插入”和“更新”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:46:31.323

修改[此代码](https://stackoverflow.com/questions/10790057/with-perl-libxml-how-to-detect-nodes-with-or-without-child)以通过所有孩子。这是我完成的代码：

```
my $nodes = $xml->findnodes('//*');
foreach my $node ($nodes->get_nodelist) {
  my $children;
  my $nodeSide = ($node->findnodes('*')->size);
if ($nodeSize > 0){
printf "%n%s :\n", $node->localname;
}
else {
printf "%s: %s\n", $node->localname, $node->textContent();
}
} 
```

有了输出，我可以做类似的事情，

插入数据库 ($node->textContent());

同样，这不是一个好的 sql 语句，但我稍后会处理。重要的部分是节点分离和迭代。

# jquery - 使用jQuery插入html？

> ID：15887630
> 
> 赞同：0
> 
> 时间：2013-04-08T19:48:14.177
> 
> 标签：jquery

如何插入`<thead>`和`<\thead>`使用 jQuery？

```
 <table class="Grid">
<!-- insert <thead> -->
                <tr class="GridHeader">
                    <th>BU</th><th>Function</th>
                </tr>
                <tr class="GridHeader">
                    <th>&nbsp;</th><th>&nbsp;</th>
                </tr>
    <!-- insert </thead> --> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T19:50:04.620

```
var thead = $("<thead>");
$('.GridHeader').wrapAll(thead); 
```

[http://api.jquery.com/wrapAll](http://api.jquery.com/wrapAll)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T20:17:38.910

这可能有点棘手，因为如果您自己不包含元素，某些浏览器会默认将您的`<tr>`元素包装在 a 中。`<tbody>`Firefox 19 和 Chrome 26 做到了这一点。IE 10 没有。仅执行 a`wrapAll`将导致以下无效 HTML：

```
<table class="Grid">
    <tbody>
        <thead>
            <tr class="GridHeader">
                <th>BU</th><th>Function</th>
            </tr>
            <tr class="GridHeader">
                <th>&nbsp;</th><th>&nbsp;</th>
            </tr>
        </thead>
    </tbody>
</table> 
```

如果您比较原始标记、单击 Wrap 后的标记和单击Prepend 后的标记，您可以使用[此 jsFiddle](http://jsfiddle.net/aA6WE/)自己查看此行为。

为了克服这个问题，正如[jsfiddle](http://jsfiddle.net/aA6WE/)所示，您还需要删除新添加的`<thead>`并将其添加回`<table>`：

```
$('.GridHeader').wrapAll('<thead>');
$('.Grid thead').remove().prependTo('.Grid'); 
```

# c# - 在 MSI 安装程序期间注册 DLL 和 COM 组件的问题

> ID：15887633
> 
> 赞同：1
> 
> 时间：2013-04-08T19:48:22.477
> 
> 标签：c#, visual-studio-2010, windows-installer, ocx

我已经开发了一个巨大的 Windows 桌面应用程序。其中一部分包括用于管理捕获视频和图片的 DLL，以及我没有编写的另一个自定义 COM 组件互操作。

当我在全新安装的 XP 上安装程序时，在尝试访问程序的那些部分时出现错误，提示相应的类未注册。

解决方案中的每个项目都设置为 x86，因此尝试从 64 位环境注册/访问 32 位 COM 库不是问题。

用于视频捕获的两个 DLL 在安装程序的检测到的依赖项列表中。两者都设置为“注册：vsdraCOM”。

另一组 COM 组件根本没有出现在我的 Detected Dependencies 列表中。我已经为他们创建了一个互操作 DLL，那么它可以集成到该项目的 DLL 中吗？

我是否缺少一些基本的东西，或者我是否需要编写自己的自定义操作来在安装期间注册这些（并在卸载期间取消注册）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T16:43:51.277

我确实编写了自己的自定义操作，但它并没有我预期的那么糟糕。

我必须注册几个不同的组件，所以我为它创建了一个私有方法。我会在这里分享我的代码，以防其他人需要帮助。

像自定义操作的所有其他示例一样，这应该作为类库放入它自己的项目中。该类应该是一个组件类类型。然后只需将项目输出复制到安装程序的自定义操作视图中的安装、回滚和卸载文件夹中。（诚​​然，因此在下面的代码中使用 Commit 方法是不必要的，但为了完成主义者的缘故，我将它留在那里）。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Diagnostics;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.IO;

namespace BKForensics.Workbench.InstallerPermissions {
    [RunInstaller(true)]
    public partial class ServiceInstaller : System.Configuration.Install.Installer {
        // This will be the path that all of the DLLs will be located in under Program Files.
        // In the File System of the Installer Project, this is the "Application Folder"
        // The Properties have the Default Location set to [ProgramFilesFolder][Manufacturer]\[ProductName]
        private const string InstallationPath = @"C:\Program Files\Installation";

        // This is the list I had of all the DLLs and OCX files I needed to install for easy reference.
        private const string OCX = "something.ocx";
        private const string Excel = "Interop.Excel.dll";
        private const string Word = "Interop.Word.dll";
        private const string Office = "Interop.Microsoft.Office.Core.dll";

        public override void Install(System.Collections.IDictionary stateSaver) {
            base.Install(stateSaver);

            // OCX needs to run with regsvr, so false for the 2nd param.
            RunRegistration(OCX, false, true);
            // The Interops need regasm.
            RunRegistration(Office, true, true);
            RunRegistration(Word, true, true);
            RunRegistration(Excel, true, true);
        }

        public override void Uninstall(System.Collections.IDictionary savedState) {
            base.Uninstall(savedState);

            RunRegistration(OCX, false, false);
            RunRegistration(Office, true, false);
            RunRegistration(Word, true, false);
            RunRegistration(Excel, true, false);
        }

        public override void Rollback(System.Collections.IDictionary savedState) {
            base.Rollback(savedState);

            // Uninstall during the Rollback, just in case something happens in the installation.
            RunRegistration(OCX, false, false);
            RunRegistration(Office, true, false);
            RunRegistration(Word, true, false);
            RunRegistration(Excel, true, false);
        }

        public override void Commit(System.Collections.IDictionary savedState) {
            base.Commit(savedState);

            // Nothing needs to be done during Commit.
        }

        static void Main() { }

        /// <summary>
        /// A method to run either regasm or regsvr32 to register a given DLL or OCX.
        /// </summary>
        /// <param name="fileName">The name of the file to register.</param>
        /// <param name="regasm">True to run regasm, false to run regsvr32.exe.</param>
        /// <param name="install">True to install, false to uninstall.</param>
    private static void RunRegistration(string fileName, bool regasm, bool install)     {
            try {
                Process reg = new Process();

                string args = string.Empty;

                if (!install) {
                    // If we're not installing, set it to uninstall.
                    args += " -u ";
                }

                if (regasm) {
                    // Use System.Runtime... to get the latest operating directory where regasm would be located.
                    reg.StartInfo.FileName = Path.Combine(System.Runtime.InteropServices.RuntimeEnvironment.GetRuntimeDirectory(), "regasm.exe");
                }
                else {
                    reg.StartInfo.FileName = "regsvr32.exe";
                    // Run regsvr32 silently or else it displays a dialog that the OCX was registered successfully.
                    args += " /s ";
                }

                args += " \"" + Path.Combine(InstallationPath, fileName) + "\"";

                reg.StartInfo.Arguments = args;
                reg.StartInfo.UseShellExecute = false;
                reg.StartInfo.CreateNoWindow = true;
                reg.StartInfo.RedirectStandardOutput = true;

                reg.Start();
                reg.WaitForExit();
                reg.Close();
            }
            catch (Exception ex) {
                MessageBox.Show(ex.Message);
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T20:50:37.450

我想你回答了你自己的问题。您应该编写自定义操作来安装 COM 组件。

请参阅：[什么是互操作 dll？](https://stackoverflow.com/questions/1670940/what-is-the-interop-dll)

# ruby - Opsworks 定制厨师食谱

> ID：15887636
> 
> 赞同：0
> 
> 时间：2013-04-08T19:48:28.357
> 
> 标签：ruby, ruby-on-rails-3, amazon-web-services, chef-infra

我已经使用 AWS OpsWorks 成功部署了我的应用程序，现在我正在尝试实现一个自定义 Chef Cookbook，它允许我设置 bash 环境变量。我已经设置了 Git 存储库，食谱正在使用 OpsWorks 进行更新。我在我的开发盒上使用刀命令生成了食谱，它实际上只是一个`recipes/default.rb`包含几行代码的文件的目录结构。

当我尝试执行以下操作时，我似乎不断收到错误

```
node[:deploy].each do |application, deploy|
    deploy = node[:deploy][application]
    command "ls -la"
end 
```

（注意： ls -la 仅用于测试我知道这不会设置环境变量）

我收到以下错误：`ERROR: Caught exception during execution of custom recipe: xyz-enviroment: NoMethodError - undefined method command' for #<Chef::Recipe:0x7feb59200c00> - /opt/aws/opsworks/releases/20130328224322_109/vendor/bundle/ruby/1.8/gems/chef-0.9.15.5/bin/../lib/chef/mixin/recipe_definition_dsl_core.rb:56:in method_missing`

另外，如果我尝试类似

```
execute "setting up the enviroment" do
    # TODO: Add code that does something here
end 
```

我收到以下错误：

```
execute[setting up the enviroment] (/opt/aws/opsworks/current/site-cookbooks/xyz-enviroment/recipes/default.rb:18:in `from_file') had an error:
No such file or directory - setting up the enviroment 
```

我是厨师的新手，所以我确定我做错了一些简单的事情，我只是无法弄清楚。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T14:25:35.880

在看到下面的回复之前，我已经解决了我的问题，他们可能已经解决了这个问题，但我现在没有时间回去尝试。

我的解决方案是使用 Chef 模板创建一个初始化文件，以便在 rails 启动应用程序时设置变量。

```
# deafult.rb

node[:deploy].each do |application, deploy|
    deploy = node[:deploy][application]

    execute "restart Rails app #{application}" do
        cwd deploy[:current_path]
        command node[:opsworks][:rails_stack][:restart_command]
        action :nothing
    end

    template "#{deploy[:deploy_to]}/current/config/initializers/dev_enviroment.rb" do
        source "dev_enviroment.erb"
        cookbook 'dev-enviroment'
        group deploy[:group]
        owner deploy[:user]
        variables(:dev_env => deploy[:dev_env])

        notifies :run, resources(:execute => "restart Rails app #{application}")

        only_if do
            File.exists?("#{deploy[:deploy_to]}") && File.exists?("#{deploy[:deploy_to]}/current/config/")
        end
    end
end 
```

开发环境.erb

```
ENV['VAR1'] = "<%= @dev_env[:VAR1] %>"
ENV['VAR2'] = "<%= @dev_env[:VAR2] %>" 
```

Opsworks 堆栈层中使用的自定义 Chef JSON：

```
{
    "deploy": {
        "myapp": {
            "dev_env": {
                "VAR1": "INFO1",
                "VAR2": "INFO2",
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T01:10:25.213

您没有指定要运行的命令，因此它实际上是在尝试运行`setting up the environment`，这不是有效的命令。

尝试指定`command`块内的属性：

```
execute "setting up the enviroment" do
  command "/path/to/command --flags"
end 
```

或者，将资源名称设置为命令本身：

```
execute "/path/to/command --flags" do
  # TODO: Add code that does something here
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T01:42:13.110

clb 正确回答了您的第二个问题。至于你的第一个，“命令”不是一个有效的厨师资源，你想要这样的东西：

```
node[:deploy].each do |application, deploy|
  deploy = node[:deploy][application]
  execute "running a command for #{application}" do
    command "ls -la"
  end
end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-06T18:26:11.693

OpsWorks 有一个新功能，您可以在其中在应用程序上添加环境变量

您可以通过以下方式访问它们

```
node[:deploy]['appshortname'][:environment_variables][:variable_name] 
```

（见[http://docs.aws.amazon.com/opsworks/latest/userguide/attributes-json-deploy.html#attributes-json-deploy-app-environment](http://docs.aws.amazon.com/opsworks/latest/userguide/attributes-json-deploy.html#attributes-json-deploy-app-environment)）

因此，您可以像这样直接为您的厨师环境设置它们：

```
node[:deploy]['magento']['environment_variables'].each {|key, value| ENV[key]=value } 
```

您可以将其“转储”到 shell 脚本中，例如：

```
file "#{release_path}/environment.sh" do
  content ENV.reduce("#!/bin/bash\n") { |a, e| a + "export #{e[0]}=\"#{e[1]}\"\n" }
  mode '0775'
end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-19T17:53:17.777

我们做了类似的事情，并通过将我们的环境变量添加到 Opsworks 仪表板中的 json 配置文件来解决它。在 chef 中，我们使用这个模板编写部署文件：[https](https://github.com/octocall/opsworks-cookbooks/blob/34e60267a4d3b5b9cf84e91829cc80c98c26f8ed/deploy/definitions/opsworks_rails.rb#L26) ://github.com/octocall/opsworks-cookbooks/blob/34e60267a4d3b5b9cf84e91829cc80c98c26f8ed/deploy/definitions/opsworks_rails.rb#L26 ，然后我们使用“symlink_before_migrate " json 文件的属性，如下所示：

```
{
  "deploy": {
    "APPNAME": {
      "symlink_before_migrate": {
        "config/.env": ".env"
      }
    }
  }
} 
```

# ios - 在未越狱的 iOS 设备上启用/禁用 Wifi

> ID：15887637
> 
> 赞同：3
> 
> 时间：2013-04-08T19:48:36.027
> 
> 标签：ios, wifi, setting

这是我的内部应用程序所需要的。我想在 ios 设备上切换 wifi。任何框架都可用。我尝试了以下代码，但它没有提供任何帮助。这不会改变我的 wifi 设置。

```
{       
    Class BluetoothManager = objc_getClass("BluetoothManager");
    id btCont = [BluetoothManager sharedInstance];
    [self performSelector:@selector(toggle:) withObject:btCont afterDelay:0.1f] ;
}
- (void)toggle:(id)btCont
{
    BOOL currentState = [btCont enabled] ;
    [btCont setEnabled:!currentState] ;
    [btCont setPowered:!currentState] ;
    exit( EXIT_SUCCESS ) ;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-23T11:43:18.647

## 从应用程序

```
notify_post("com.yourcompany.yourapp.yournotification"); 
```

## 来自 Dylib

```
#import <objc/runtime.h>
#import <SpringBoard/SBWiFiManager.h>

HOOK(SpringBoard, applicationDidFinishLaunching$, void, id app) {
    //Listen for events via DARWIN NOTIFICATION CENTER
    CFNotificationCenterAddObserver(CFNotificationCenterGetDarwinNotifyCenter(), NULL,
     &NotificationReceivedCallback, CFSTR("com.yourcompany.yourapp.yournotification"), NULL, 
      CFNotificationSuspensionBehaviorCoalesce);
}

//THIS IS WHERE THE MAGIC HAPPENS
static void NotificationReceivedCallback(CFNotificationCenterRef center, 
                                            void *observer, CFStringRef name, 
                                            const void *object, CFDictionaryRef 
                                            userInfo) 
{ 
    [[objc_getClass("SBWiFiManager") sharedInstance] setWiFiEnabled:NO];
} 
```

## 笔记：

如果您在使用 Hook 方法时遇到任何错误，您可以参考此[链接](http://brandontreb.com/beginning-jailbroken-ios-development-your-first-tweak)，它演示了如何挂钩 SpringBoard 中的 init 方法以在启动手机时显示警报消息。

## 警告：

由于使用了私有 api，因此您不能将其用于 appstore 应用程序。

[参考](https://stackoverflow.com/a/2152933/730807)

[归因](https://stackoverflow.com/users/171206/wrightscs)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T19:52:43.437

你将无法做到。iOS 限制了第三方应用程序可以与底层硬件交互的数量。使用公共 SDK 编写的所有应用程序都经过沙盒处理。

正如 7KV7 在[这里的回答](https://stackoverflow.com/questions/5963880/turn-wifi-on-off-for-iphone-from-an-application/5963935#5963935)中所说：

> 他们只能访问 Apple 认为可以在该沙箱中使用的属性和数据。恐怕 Wi-Fi 不在列表中。

# bash - 如何混合 HEREDOC 和反引号``？

> ID：15887644
> 
> 赞同：2
> 
> 时间：2013-04-08T19:49:05.793
> 
> 标签：bash, shell

我有这个脚本...

```
#!/bin/sh

list=`/usr/bin/yasql user/xxxx@dev --batch` <<EOT
select h.hostname from host h, server s where s.id = h.id and s.server_type = 'DNS';
EOT

for i in $list
do
    echo $i
done 
```

但是当然它不起作用，因为我不明白如何将 HEREDOC 与反引号混合在一起 ``

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T19:50:35.177

```
list=`/usr/bin/yasql user/xxxx@dev --batch <<EOT
select h.hostname from host h, server s where s.id = h.id and s.server_type = 'DNS';
EOT` 
```

# javascript - JS + 数学：计算子串的排列或组合

> ID：15887645
> 
> 赞同：0
> 
> 时间：2013-04-08T19:49:09.583
> 
> 标签：javascript, math

我不确定“组合”是否是正确的词，但我想扫描一个字符串以获得所有可能的子字符串，例如 ex。

```
var str = "abcd";

// do something here, a for loop i guess...

WANTED OUTPUT:
a
ab
abc
abcd
b
bc
bcd
c
cd
d 
```

我对像 dcba 这样的结果不感兴趣，因此我不是在寻找排列......这样做的功能是什么？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T20:17:19.543

它很容易你也可以自己做：

```
var str = "abcd";
var substrings = [];
for (var i = 0; i < str.length; i++){ 
     for (var j = i + 1; j <= str.length; j++)
     substrings.push(str.substring(i, j));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T20:06:34.553

要获取所有可能的子字符串（你是对的，它不是“排列”），你可以只使用两个嵌套循环作为开始和结束索引：

```
var str = "abcd";
var substrings = [],
    len = str.length;
for (var i=0; i<len; i++)
    for (var j=i+1; j<=len; j++)
        substrings.push(str.slice(i, j));

substrings;
// ["a", "ab", "abc", "abcd", "b", "bc", "bcd", "c", "cd", "d"] 
```

如果要获取空子字符串，只需将其添加到`substrings`.

# javascript - Onmouseover 从其他元素更改 CSS 类

> ID：15887648
> 
> 赞同：5
> 
> 时间：2013-04-08T19:49:16.257
> 
> 标签：javascript

我正在尝试制作一个 JS，但由于我不是这方面的专家，也许有人可以帮助我。我在 Google 和 Stack Overflow 中搜索，但没有找到我需要的。我刚刚发现`onmouseover`改变元素本身的类。但我想要一些不同的东西：

我想制作一个`onmouseover`on`a`标签以将类更改为`closed`其他`open`元素。例子：

`<a href="#" onmouseover="<active event>">Link</a>`

`<ul class="dropdown closed"><li>Item</li></ul>`

问候，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T19:55:39.607

您可以使用`<a href="#" onmouseover="changeClass">Link</a>`

和 JS：

```
function changeClass() {
    document.getElementById("other-element").className = "open";
} 
```

更高级的 JSFiddle：http: [//jsfiddle.net/eRdHJ/1/](http://jsfiddle.net/eRdHJ/1/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T19:57:05.663

如果包含 jQuery：

为您的元素添加 id：

```
<a href="#" id="a1">Link</a>
<ul class="dropdown closed" id="ul1"><li>Item</li></ul> 
```

Javascript：

```
$("#a1").mouseover(function(){
  $("#ul1").addClass("open").removeClass("closed")
}) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-08T20:04:33.983

```
<a href="#" onmouseover=$("ul.dropdown").addClass("open").removeClass("closed")>Link</a>

<ul class="dropdown closed"><li>Item</li></ul> 
```

这是jsfiddle：http: [//jsfiddle.net/eRdHJ/2/](http://jsfiddle.net/eRdHJ/2/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-08T19:52:25.903

这将访问`<ul>`页面上的第一个。要缩小范围，您需要`getElementById`首先从该点获取基于标签名称的元素。然后它将仅从该标签中选择具有该特定 ID 名称的子代；

```
<script>
    function changeUl() {
        // Get the first found UL, anywhere in the body
        document.getElementsByTagName('ul')[0].className = 'otherName';
    }
</script>

<a href="#" onmouseover="changeUl();">Link</a> 
```

***有身份证***

```
<script>
    function changeUl() {
        var wrapper = document.getElementById('wrapper');
        wrapper.getElementsByTagName('ul')[0].className = 'otherName';
    }
</script>

<div id="wrapper">
    <a href="#" onmouseover="changeUl();">Link</a>
</div> 
```

您可能想检查是否有任何发现。`[0]`如果没有`<ul>`找到，可能会触发未定义/错误。

# javascript - 将下拉菜单添加到 jqGrid

> ID：15887649
> 
> 赞同：2
> 
> 时间：2013-04-08T19:49:19.000
> 
> 标签：javascript, jquery, jquery-ui, jqgrid, jquery-ui-menu

我正在将 WinForm 应用程序移植到浏览器，并希望保留在 jqGrid 顶部（在工具栏内）拥有一组下拉菜单的能力。

我可以为网格顶部创建一个[自定义工具栏，而无需克隆底部，因此具有操作按钮。](http://blog.anupamgupta.me/2010/01/adding-buttons-in-jqgrid-toolbar/)我还可以[克隆现有的 navigator](https://stackoverflow.com/questions/2678904/adding-button-to-jqgrid-top-toolbar)。

我缺少的是如何让这两个选项中的任何一个合并一个菜单系统，例如[jQuery UI Menu](http://api.jqueryui.com/menu/)。下面的代码会将菜单添加到工具栏，但菜单会隐藏在网格后面。我试过调整 z-index 和位置，但似乎都没有解决它。

```
toolbar: [true,'top'];
...
$("#toolbarId").append('<ul id="myMenu"><li><a href="#">File</a><ul><li>'+
'<a href="#">New</a></li><li><a href="#">Delete</a></li></ul></li></ul>');
$("#myMenu").menu(); 
```

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:04:49.450

我建议您使用[jQuery UI Menu Widget的](http://api.jqueryui.com/menu/)[位置](http://api.jqueryui.com/menu/#option-position)选项。您可以使用回调（参见[jQuery UI Position](http://api.jqueryui.com/position/)的文档）来更改子菜单的属性。`using`

试一试

```
$("#myMenu").menu({position: {
    of: "#gview_" + $grid[0].id,
    my: "left top",
    at: "left top",
    using: function (props, feedback) {
        $(this).css({top: (props.top + 25), left: (props.left + 50), zIndex: 1005});
    }
}}).css("width", "50px"); 
```

在哪里`var $grid = $("#grid");`- 你的网格。你会看到你拥有的可能性。

# java - java程序中的错误

> ID：15887652
> 
> 赞同：0
> 
> 时间：2013-04-08T19:49:28.297
> 
> 标签：java

我正在使用文本文件处理文件阅读器和编写器。基本上实现了一个帕斯卡语法的 dfa，它将处理程序中的注释。为此，我使用了 3 个文本文件，1 个文件从中读取数据，1 个在其中写入令牌，1 个在其中写入错误令牌。pascal 编译器不会将此 {{ 视为注释，因为注释语法是 "{this is a comment}" 。为此，我使用了 [5][4] 数组，并使用文件阅读器从包含此文本“{a}”的文本文件名“code.txt”中读取。但问题是，当我将其写入一个新的文本文件名“token.txt”（最初将其写入 token.txt 但它应该在 error.tx 中）时，它会打印这个 {{a} 意味着它打印第一个字符两次像 {{ 。我想输出和我在 code.txt 文件中写的一样的输出。

```
public class Lex {

    public static char dfa1[][] = new char[5][4];

        /*
         * for(int i=0; i<5; i++) { for(int j=0; j<4; j++) {
         * System.out.println("arr["+i+"]["+j+"]"+dfa1[i][j]); } }
         */
        //FileReader fr = new FileReader(filename);
        //BufferedReader br = new BufferedReader(fr);

        File file = new File("code.txt");
        BufferedReader reader = null;
        int StartState = 1;
        char CurrentState = '1';
        int acp =0;
        String temptok = new String();
        try {
            reader = new BufferedReader(new FileReader(file));
            int i;

            // repeat until EOF
            while ((i = reader.read()) != -1) {
                char c = (char) i;
                if (c == '{') {
                    if (CurrentState == dfa1[1][0]) {
                        CurrentState = '2';
                        acp =0;
                        temptok = temptok.concat(String.valueOf(c));
                    } else if (CurrentState == dfa1[2][0]) {
                        temptok = temptok.concat(String.valueOf(c));
                        acp =0;
                        CurrentState = '4';
                    } else if (CurrentState == dfa1[3][0]) {
                        temptok = temptok.concat(String.valueOf(c));
                        CurrentState = '4';
                        acp =0;
                    } else if (CurrentState == dfa1[4][0]) {
                        temptok = temptok.concat(String.valueOf(c));
                        acp =0;
                        break;
                    }
                }
                if (c == '}') {
                    if (CurrentState == dfa1[1][0]) {
                        acp =0;
                        temptok = temptok.concat(String.valueOf(c));
                        break;
                    } else if (CurrentState == dfa1[2][0]) {
                        temptok = temptok.concat(String.valueOf(c));
                        CurrentState = '3';
                        acp = 1;
                    } else if (CurrentState == dfa1[3][0]) {
                        temptok = temptok.concat(String.valueOf(c));
                        CurrentState = '3';
                        acp = 1;
                    } else if (CurrentState == dfa1[4][0]) {
                        temptok = temptok.concat(String.valueOf(c));
                        acp = 0;
                        break;
                    }
                }
                if (c != '}') {
                    if (CurrentState == dfa1[1][0]) {
                        temptok = temptok.concat(String.valueOf(c));
                        acp =0;
                        break;
                    } else if (CurrentState == dfa1[2][0]) {
                        temptok = temptok.concat(String.valueOf(c));
                        CurrentState = '2';
                        acp =0;
                    } else if (CurrentState == dfa1[3][0]) {
                        temptok = temptok.concat(String.valueOf(c));
                        acp =0;
                        break;
                    } else if (CurrentState == dfa1[4][0]) {
                        temptok = temptok.concat(String.valueOf(c));
                        acp =0;
                        break;
                    }
                }

                //System.out.println(temptok);

                PrintWriter writer = new PrintWriter("token.txt", "UTF-8");
                PrintWriter ewriter = new PrintWriter("error.txt", "UTF-8");
                if(acp == 1){
                writer.println(temptok);
                writer.close();
                }
                else if(acp == 0)
                {
                    ewriter.println(temptok);
                ewriter.close();
                } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T20:01:20.580

你有一个`if`块链，而不是一个`if`, `else if`,`else if`块链。因此，当`{`被读取时，这两个条件为真，并且 char 被写入两次：

```
if (c == '{') {
    ...
}
...
if (c != '}') {
    ...
} 
```

此外，您不应该使用`String.concat()`，而应该使用 a `StringBuilder`。并且您应该尊重 Java 命名约定：变量以小写字母开头。还要考虑改进您的命名：`dfa1`并且`acp`不是描述性的名称。`temptok`并且`ewriter`应该命名为`temporaryToken`and `errorWriter`。

最后一点：当您使用调试器单步执行代码时，会立即诊断出这类问题。学习使用调试器：它将为您节省数小时的调试时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T20:03:37.890

你的第三个如果：

```
if (c != '}') 
```

似乎应该是：

```
if (c != '}' && c != '{') 
```

此外，这似乎不是处理文件的最佳方式。

# listview - ListActivity 标头中按钮的 OnClickListner() 不起作用

> ID：15887655
> 
> 赞同：1
> 
> 时间：2013-04-08T19:49:37.057
> 
> 标签：listview, button, listactivity

在我的应用程序中，我有一个布局，它在 ListActivity 的标题中显示公交车站详细信息，同时将所有可用的到达预测显示为列表。列表标题包含两个按钮，第一个用于将公交车站保存到数据库，第二个用于刷新活动。但是 OnClickListner() 不起作用。我已经在没有 onClickListner() 的情况下测试了我的代码，它工作正常。
记住！在我的代码中，按钮是固定列表标题的一部分我已经尝试过这里已经讨论过的建议，但这些对我不起作用。请帮帮我...我的代码如下：

```
public class MainBusStopByIdActivity extends ListActivity implements OnClickListener{

private final String TAG = getClass().getSimpleName();
ReadingBusStopByIdData readingData = new ReadingBusStopByIdData();
LinkedList<BusStop> stopList = new LinkedList<BusStop>();
LinkedList<Predictions> predictionsList = new LinkedList<Predictions>();
private AdapterForBusStopById mAdapter;
String userInput;
Button saveButton;
Button refreshButton;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // Initialising buttons
    saveButton = (Button) findViewById(R.id.save_button);
    refreshButton = (Button) findViewById(R.id.refresh_button);

    // Creating new adapter instance
    mAdapter = new AdapterForBusStopById();

    // Retrieving data (user Input) sent from previous page
    Intent newIntent = getIntent();
    userInput = newIntent.getStringExtra("input");

    // Retrieving data on background thread
    new loadBusStopDetails().execute(userInput);
    new loadBusPredictions().execute(userInput);

    // Setting up onClickListner() for both buttons
    refreshButton.setOnClickListener(this);
    saveButton.setOnClickListener(this);

}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    switch (v.getId()) {

    case R.id.save_button:
        boolean didItWork = true;
        try {
            if (stopList.size() != 0) {
                String stopId = null;
                String stopName = null;
                for (BusStop stop : stopList) {
                    stopId = stop.getStopId();
                    stopName = stop.getStopName().toString();
                }
                Toast.makeText(MainBusStopByIdActivity.this,
                        stopId + "\n" + stopName, Toast.LENGTH_LONG).show();

                DatabaseAccess entry = new DatabaseAccess(
                        MainBusStopByIdActivity.this);
                entry.open();
                entry.createEntry(stopId, stopName);
                entry.close();

            } else {
                Toast.makeText(MainBusStopByIdActivity.this,
                        "No Bus-stop Information Found!!!",
                        Toast.LENGTH_LONG).show();
            }

        } catch (Exception e) {
            didItWork = false;
            String error = e.toString();
            Dialog d = new Dialog(this);
            d.setTitle("Error!!!");
            TextView tv = new TextView(this);
            tv.setText(error);
            d.setContentView(tv);
            d.show();

        } finally {
            if (didItWork) {
                Dialog d = new Dialog(this);
                d.setTitle("Entry to Favourites");
                TextView tv = new TextView(this);
                tv.setText("Scuccessfully Added Bus-Stop to Favourites...");
                d.setContentView(tv);
                d.show();
            }
        }
        break;

    case R.id.refresh_button:

        break;
    }

}

// Adapter Class
private class AdapterForBusStopById extends BaseAdapter {
    private static final int TYPE_PREDICTION = 0;
    private static final int TYPE_BUSSTOP_HEADER = 1;

    private ArrayList<String> mData = new ArrayList<String>();
    private LayoutInflater mInflater;

    private TreeSet<Integer> mSeparatorsSet = new TreeSet<Integer>();

    public AdapterForBusStopById() {
        mInflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }

    public void addItem(final String item) {

        mData.add(item);
        notifyDataSetChanged();
    }

    public void addSeparatorItem(final String item) {
        mData.add(item);
        // save separator position
        mSeparatorsSet.add(mData.size() - 1);
        notifyDataSetChanged();
    }

    @Override
    public int getItemViewType(int position) {
        return mSeparatorsSet.contains(position) ? TYPE_BUSSTOP_HEADER
                : TYPE_PREDICTION;
    }

    public int getCount() {
        return mData.size();
    }

    public String getItem(int position) {
        return mData.get(position);
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder = null;
        int type = getItemViewType(position);
        System.out.println("getView " + position + " " + convertView
                + " type = " + type);
        if (convertView == null) {
            holder = new ViewHolder();
            switch (type) {
            case TYPE_PREDICTION:
                convertView = mInflater.inflate(R.layout.predictions, null);
                holder.textView = (TextView) convertView
                        .findViewById(R.id.predictionText);
                break;
            case TYPE_BUSSTOP_HEADER:
                convertView = mInflater.inflate(R.layout.bus_stop_header,
                        null);
                holder.textView = (TextView) convertView
                        .findViewById(R.id.textSeparator);
                break;
            }
            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }
        holder.textView.setText(mData.get(position));
        return convertView;
    }

}

public static class ViewHolder {
    public TextView textView;
}

// Downloading Bus-stop Information
// AsyncTask Class for downloading Bus-Stop data in Background
public class loadBusStopDetails extends
        AsyncTask<String, Integer, LinkedList<BusStop>> {

    @Override
    protected LinkedList<BusStop> doInBackground(String... params) {
        // TODO Auto-generated method stub

        stopList = readingData.readStopDetailsByBusStopId(userInput);
        // Retrieving & Showing bus-stop data
        for (BusStop stop : stopList) {
            String stopData = "  NAME:                  "
                    + stop.getStopName().toString() + " ("
                    + stop.getStopPointer().toString()
                    + ")\n  STOP ID:              "
                    + stop.getStopId().toString() + "\n  STOP STATUS:   "
                    + stop.getStopStatus().toString()
                    + "\n  TOWARDS:           "
                    + stop.getTowards().toString();

            Log.d(TAG, "::::::::::::::::::::DATA:::::::::::::::::::\n"
                    + "<<<<<<" + stopData + ">>>>>>\n");
            mAdapter.addSeparatorItem(stopData);
        }
        Log.d(TAG, "::::::::::::::::::::DATA:::::::::::::::::::\n"
                + "<<<<<<" + stopList.size() + ">>>>>>\n");
        return stopList;
    }

    protected void onPostExecute(LinkedList<BusStop> result) {
        stopList = result;
    }
}

// Downloading Bus-predictions Information
// AsyncTask Class for downloading Bus-Predictions data in Background
public class loadBusPredictions extends
        AsyncTask<String, Integer, LinkedList<Predictions>> {

    ProgressDialog dialog;

    protected void onPreExecute() {
        dialog = new ProgressDialog(MainBusStopByIdActivity.this);
        dialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
        dialog.setMax(100);
        dialog.show();
    }

    @Override
    protected LinkedList<Predictions> doInBackground(String... params) {
        // TODO Auto-generated method stub

        for (int i = 0; i < 20; i++) {
            publishProgress(4);
            try {
                Thread.sleep(200);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
        dialog.dismiss();

        // Retrieving & Showing bus-prediction data
        predictionsList = readingData
                .readStopPredictionsByBusStopId(userInput);

        for (Predictions prediction : predictionsList) {
            int time = prediction.getTime();
            String stringTime;
            if (time == 0) {
                stringTime = "DUE";
            } else {
                stringTime = String.valueOf(time);
            }
            String predictionData = "       "
                    + prediction.getRoute().toString() + "             "
                    + stringTime + "             "
                    + prediction.getDestination().toString() + " \n ";

            mAdapter.addItem(predictionData);
        }
        return predictionsList;
    }

    protected void onProgressUpdate(Integer... progress) {
        dialog.incrementProgressBy(progress[0]);
    }

    protected void onPostExecute(LinkedList<Predictions> result) {
        predictionsList = result;
        setListAdapter(mAdapter);

        // Displaying related messages if there's something wrong
        if (stopList.size() != 0) {
            if (predictionsList.size() != 0) {
            } else {
                Toast.makeText(
                        MainBusStopByIdActivity.this,
                        "There are no Buses to this Bus Stop in Next 30 Minutes.",
                        Toast.LENGTH_LONG).show();
            }
        } else {
            Toast.makeText(
                    MainBusStopByIdActivity.this,
                    "There is 'NO' Bus Stop Exist with " + userInput
                            + " Bus-Stop ID.", Toast.LENGTH_LONG).show();
        }

    }
}

} 
```

我的 XML 代码如下：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:orientation="vertical"
android:descendantFocusability="blocksDescendants" >

<View
    android:layout_width="match_parent"
    android:layout_height="1dp"
    android:background="@android:color/holo_blue_light" />

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <ImageView
        android:id="@+id/tflImage"
        android:layout_width="50dp"
        android:layout_height="60dp"
        android:layout_gravity="center_vertical"
        android:layout_margin="2.5dp"
        android:background="@drawable/redtrain128"
        android:contentDescription="@string/hello_world" />

    <TextView
        android:id="@+id/textSeparator"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="#000"
        android:gravity="left"
        android:text="text"
        android:textColor="#FFFFFFFF"
        android:visibility="visible" />
</LinearLayout>

<View
    android:layout_width="match_parent"
    android:layout_height="1dp"
    android:background="@android:color/holo_blue_light" />

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/save_button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Add to Favourites"
        android:focusable="false"
        android:focusableInTouchMode="false"
        android:onClick="onClick" />

    <Button
        android:id="@+id/refresh_button"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Refresh"
        android:focusable="false"
        android:focusableInTouchMode="false"
        android:onClick="onClick" />
</LinearLayout>

<View
    android:layout_width="match_parent"
    android:layout_height="1dp"
    android:background="@android:color/holo_blue_light" />

<TextView
    android:id="@+id/textSeparator"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="#FF0000"
    android:gravity="left"
    android:text="  ROUTE     TIME        DESTINATION"
    android:textColor="#FFFFFFFF"
    android:textSize="8pt"
    android:textStyle="bold"
    android:typeface="normal"
    android:visibility="visible" />

<View
    android:layout_width="match_parent"
    android:layout_height="1dp"
    android:background="@android:color/holo_blue_light" />

</LinearLayout> 
```

我还找到了有关此问题的以下链接，但我不知道如何在我的情况下实施。请看一下，可能你有什么想法，链接在这里： [链接点击这里](https://code.google.com/p/android/issues/detail?id=3414)

谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T12:00:10.770

将包含 ListView 的父布局的*android:descendantFocusability属性设置为值**blocksDescendants*，例如：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:orientation="vertical" 
android:descendantFocusability="blocksDescendants"> ...</LinearLayout> 
```

**编辑**

我采取的另一种方法更方便恕我直言，支持复杂的内容并在 API 10 及更高版本上进行了测试：

```
<LinearLayout
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:orientation="vertical"
android:clickable="true"
android:onClick="YOUR_CLICK_HANDLE"
android:background="@android:drawable/btn_default"
android:id="@+id/complexButtonLayout"
>
..
complex contents
...
</LinearLayout> 
```

您可以通过句柄使用（托管视图的活动实现 public void YOUR_CLICK_HANDLE(View view); 方法）或以编程方式注册 onclick 处理程序。

但是，我使用 Fragments 中的视图。

# ruby - 在 ruby 中迭代数组的哈希

> ID：15887658
> 
> 赞同：0
> 
> 时间：2013-04-08T19:49:45.813
> 
> 标签：ruby, ruby-on-rails-3

我有这个散列，其中有一个数组：

```
{
  "id": "0001001",
  "name": "Bob Fisher",
  "work": [
    {
      "employer": {
        "id": "6883542487",
        "name": "Marvel"
      },
      "location": {
        "id": "108081209214649",
        "name": "Las Vegas, Nevada"
      },
      "position": {
        "id": "148835345140954",
        "name": "Cirkusdirektör"
      },
      "description": "API testing",
      "start_date": "2012-01",
      "end_date": "2013-01"
    },
    {
      "employer": {
        "id": "11648563484",
        "name": "DC Comics"
      },
      "location": {
        "id": "108424279189115",
        "name": "New York, New York"
      },
      "position": {
        "id": "178387758878908",
        "name": "Dykare"
      },
      "description": "Api testing",
      "start_date": "2010-02",
      "end_date": "2011-01"
    }
  ]
} 
```

如何在 ruby​​ 中迭代每个雇主的价值观？所以我得到这样的输出：

```
Employer name: Marvel
Location name: Las Vegas, Nevada
Position: Cirkusdirektör
Description: Api testing
Start-date: 2012-01
End-date: 2013-01

Employer name: DC Comics
Location name: New York, New 
Position: Cirkusdirektör
Description: Api testing
Start-date: 2012-01
End-date: 2011-01 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T19:59:05.277

它是如此简单：

```
data['work'].each do |entry|
  puts entry['employer']['name']
  puts entry['location']['name']
  puts entry['position']['name']
  puts entry['description']
  puts entry['start_date']
  puts entry['end_date']
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T20:04:11.013

```
h = {
  "id"=> "0001001",
  "name"=> "Bob Fisher",
  "work"=> [
    {
      "employer"=> {
        "id"=> "6883542487",
        "name"=> "Marvel"
      },
      "location"=> {
        "id"=> "108081209214649",
        "name"=> "Las Vegas, Nevada"
      },
      "position"=> {
        "id"=> "148835345140954",
        "name"=> "Cirkusdirektör"
      },
      "description"=> "API testing",
      "start_date"=> "2012-01",
      "end_date"=> "2013-01"
    },
    {
      "employer"=> {
        "id"=> "11648563484",
        "name"=> "DC Comics"
      },
      "location"=> {
        "id"=> "108424279189115",
        "name"=> "New York, New York"
      },
      "position"=> {
        "id"=> "178387758878908",
        "name"=> "Dykare"
      },
      "description"=> "Api testing",
      "start_date"=> "2010-02",
      "end_date"=> "2011-01"
    }
  ]
}

h.values.last.each do |x| 

  puts "---------------------------------------"
  puts "Employer name:- #{x['employer']['name']}"
  puts "Location name:- #{x['location']['name']}"
  puts "Position:- #{x['position']['name']}"
  puts "Description:- #{x['description']}"
  puts "Start-date:- #{x['start_date']}"
  puts "End-date: #{x['end_date']}"
  puts "---------------------------------------"

end 
```

*输出：*

```
---------------------------------------
Employer name:- Marvel
Location name:- Las Vegas, Nevada
Position:- Cirkusdirektör
Description:- API testing
Start-date:- 2012-01
End-date: 2013-01
---------------------------------------
---------------------------------------
Employer name:- DC Comics
Location name:- New York, New York
Position:- Dykare
Description:- Api testing
Start-date:- 2010-02
End-date: 2011-01
--------------------------------------- 
```

*代码破解：*

```
h.values.last.each do |x|
 p x
end 
```

*输出：*

```
{"employer"=>{"id"=>"6883542487", "name"=>"Marvel"}, "location"=>{"id"=>"108081209214649", "name"=>"Las Vegas, Nevada"}, "position"=>{"id"=>"148835345140954", "name"=>"Cirkusdirekt\u00F6r"}, "description"=>"API testing", "start_date"=>"2012-01", "end_date"=>"2013-01"}

{"employer"=>{"id"=>"11648563484", "name"=>"DC Comics"}, "location"=>{"id"=>"108424279189115", "name"=>"New York, New York"}, "position"=>{"id"=>"178387758878908", "name"=>"Dykare"}, "description"=>"Api testing", "start_date"=>"2010-02", "end_date"=>"2011-01"} 
```

# css - 部分内容的问题

> ID：15887662
> 
> 赞同：1
> 
> 时间：2013-04-08T19:50:04.803
> 
> 标签：css, html, article

我对其内容中的某个部分有疑问。

如果您看到我在该部分中写的所有内容都超出了它，并且该部分似乎是空的！

HTML：

```
<section id="scopri">
<article id="scopridettagli">
    <div id="scoprisx">
        <ul class="scopriul">
            <li>
                <p class="scopri">problemone</p>
            </li>
            <br />
            <li>
                <p class="scopri">problemtwo</p>
            </li>
            <br />
            <li>
                <p class="scopri">problemthree</p>
            </li>
            <br />
            <li>
                <p class="scopri">problemfour</p>
            </li>
        </ul>
    </div>
    <div id="scopridx">
        <ul class="scopriul">
            <li>
                <p class="scopri">stillproblemfive</p>
            </li>
            <br />
            <li>

                <p class="scopri">problemsix</p>
            </li>
            <br />
            <li>
                <p class="scopri">problemseven</p>
            </li>
        </ul>
    </div>
</article> 
```

CSS：

[http://jsfiddle.net/giovapanasiti/yLtEy/3/](http://jsfiddle.net/giovapanasiti/yLtEy/3/)

谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T19:52:32.447

添加`overflow: hidden;`到`#scopridettagli`.. 它的高度由于其[浮动后代而折叠](http://colinaarts.com/articles/the-magic-of-overflow-hidden/)

[**jsFiddle**](http://jsfiddle.net/yLtEy/4/)

# css - 我可以创建自己的函数来分配具有 LESS 的变量吗？

> ID：15887665
> 
> 赞同：2
> 
> 时间：2013-04-08T19:50:10.183
> 
> 标签：css, responsive-design, less

我在我的 LESS 文件中创建 2 个变量

```
@navSpritePath: '/i/data-board/navigation/navigation-sprite.gif';
@navSpritePath2x: ~`@{navSpritePath}.replace(/\.[\w\?=]+$/, function(match) { return "@2x" + match; })`; 
```

有没有办法抽象**@navSpritePath2x**的分配，以便我只传递路径来执行函数并返回字符串？

LESS 有自己的数学和颜色辅助函数。我想创建自己的，所以它看起来像：

```
@navSpritePath: '/i/data-board/navigation/navigation-sprite.gif';
@navSpritePath2x: createPath2x(@navSpritePath);

///sudo code - does not work
.createPath2x (@path){
    ~`@{path}.replace(/\.[\w\?=]+$/, function(match) { return "@2x" + match; })`;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T21:53:47.890

如果您希望能够*更改*将接收分配的变量名称`navSpritePath2x`，那么我认为 LESS 不可能。

但是，如果您只是想*将该*变量名称抽象为 mixin，那么它是可能的。这样，它可以像这样使用（例如）：

**较少的**

```
@navSpritePathOne: '/i/data-board/navigation/navigation-sprite1.gif';
@navSpritePathTwo: '/i/data-board/navigation/navigation-sprite2.gif';

.createPath2x(@path){
  @navSpritePath2x: `@{path}.replace(/\.[\w\?=]+$/, function(match) { return "@2x" + match; })`;
}

.test {
  background-image: url(@navSpritePathOne);
  .high-density & {
      .createPath2x(@navSpritePathOne);
      background-image: url(@navSpritePath2x);
  } 
}

.test2 {
  background-image: url(@navSpritePathTwo);
  .high-density & {
      .createPath2x(@navSpritePathTwo);
      background-image: url(@navSpritePath2x);
  } 
} 
```

**CSS 输出**

```
.test {
  background-image: url('/i/data-board/navigation/navigation-sprite1.gif');
}
.high-density .test {
  background-image: url("/i/data-board/navigation/navigation-sprite1@2x.gif");
}
.test2 {
  background-image: url('/i/data-board/navigation/navigation-sprite2.gif');
}
.high-density .test2 {
  background-image: url("/i/data-board/navigation/navigation-sprite2@2x.gif");
} 
```

`background-image`当然，如果你总是要用它来设置一组类似的属性（比如，与

***少少*****_**

```
@navSpritePathOne: '/i/data-board/navigation/navigation-sprite1.gif';
@navSpritePathTwo: '/i/data-board/navigation/navigation-sprite2.gif';

.createPath2x(@path){
  background-image: url(@path);
  .high-density & {
     background-image:  `@{path}.replace(/\.[\w\?=]+$/, function(match) { return "@2x" + match; })`;
  }
}

.test {
   .createPath2x(@navSpritePathOne);
}

.test2 {
   .createPath2x(@navSpritePathTwo);
} 
```

**CSS 输出**与上面显示的完全相同，但 LESS 代码较长。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T20:58:26.203

我知道这并不能直接回答您的问题，但我想分享一下我是如何完成您在自己的项目中尝试做的事情的。我将所有高密度图像存储在同名的 /2x 文件夹中。确保更改背景尺寸以匹配您的图像。

我希望这有帮助。

```
//Variables
@highdensity:       ~"only screen and (-webkit-min-device-pixel-ratio: 1.5)",
                    ~"only screen and (min--moz-device-pixel-ratio: 1.5)",
                    ~"only screen and (-o-min-device-pixel-ratio: 3/2)",
                    ~"only screen and (min-device-pixel-ratio: 1.5)";

@CDNURL:                "cdn.mydomain.com/assets/";
@CDNURL-Retina:         "@{CDNURL}2x/";

//Background image URL Function
.BGImage-HD(@image) {
    background-image: url('http://@{CDNURL}@{image}'); 

  @media @highdensity {
        background-image: url('http://@{CDNURL-Retina}@{image}');
    }
}

//Usage
.navSprite {
    .BGImage-HD("navigation-sprite.gif");

    @media @highdensity {
        .background-size(360px, 240px);
    }
} 
```

# css - 为什么 Safari 会忽略我的 CSS 位置？

> ID：15887666
> 
> 赞同：0
> 
> 时间：2013-04-08T19:50:10.670
> 
> 标签：css, safari

问题出在此页面上：http: [//www.matternow.com/portfolio/](http://www.matternow.com/portfolio/)

如果单击任何缩略图，您会看到叠加层左下角的图像标题太靠近其上方的边框。这在 Chrome 中看起来不错（以及所有其他浏览器，就此而言）。似乎它忽略了我的元素 CSS，它设置为底部：0;

顺便说一句，这是一个浏览器黑客攻击。看起来像这样：

```
#portfolio-overlay #cboxTitle{
        font: bold 21px 'Crimson Text', serif !important;
        position:absolute;
        bottom: 8px;
        top: auto;
        left: 10px;
        color:#000;
    }

@media screen and(-webkit-min-device-pixel-ratio:0) {
    #portfolio-overlay #cboxTitle {
        bottom: 0;
    }
} 
```

有谁知道为什么会这样？我的意思是，既然它在 Chrome 中看起来不错，它应该在 Safari 中看起来不错，对吧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T20:11:36.460

我不明白你为什么需要黑客。为什么不能将原始值设置为 0？

无论如何，您在媒体查询中缺少“和”后的空格。请参阅[http://www.w3.org/TR/css3-mediaqueries/#syntax](http://www.w3.org/TR/css3-mediaqueries/#syntax)示例 #20

# qt - 启用自动换行时 qlabel 的 sizeHint() 错误

> ID：15887672
> 
> 赞同：4
> 
> 时间：2013-04-08T19:50:18.433
> 
> 标签：qt, qlabel

我有一个启用了自动换行的自定义 QLabel。调整*MyWidget*的大小时，它会换行，但 sizeHint() 仍会返回原始高度。我尝试了这篇文章的修复：[QLabel 在调整大小时切断文本，](https://stackoverflow.com/questions/14104871/qlabel-cutting-off-text-on-resize)但标签的 sizeHint() 仍然返回初始高度并导致截断文本。

为了让 TestLabel 返回正确的 sizeHint()，我必须做什么？

```
 MyWidget::MyWidget(QWidget *parent)
    : QFrame(parent)
    {
        label = new TestLabel(this);
        label ->setWordWrap(true);
        label ->setSizePolicy(QSizePolicy::Preferred, QSizePolicy::Preferred);
        mLayout->addWidget(label);
    }

    void MyWidget::resizeEvent( QResizeEvent * event )
    {
       int height = label->heightForWidth(label->width());
       label->setMaximumHeight(height);
       //label->setMinimumHeight(height); // gets called all the time
       label->updateGeometry();
       QFrame::resizeEvent(event);
    } 
```

TestLabel 类的 sizeHint() ：

```
 QSize TestLabel::sizeHint() const
    {
       QSize s = QLabel::sizeHint();
       qDebug() << "sizeHint(): " << text() << ": " << s;
       return s;
    }

    QSize TestLabel::minimumSizeHint() const
    {
       QSize s = QLabel::sizeHint();
       qDebug() << "minimumSizeHint(): " << text() << ": " << s;
       return s;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-21T14:22:46.193

一旦我遇到了 QLabel 大小提示的问题 - 在 QLabel 文本更改后它没有更新，我在文本更改后立即需要它（使用字体度量获取文本宽度不会给出未来标签的像素精确大小）。有一个技巧帮助了我——我为包含该标签的布局层次结构中的所有布局调用了 invalidate() 和 activate()——从最里面到最外面（完全按照这个顺序）。之后调用标签的 sizeHint() 将返回新的和正确的。我记得这两个功能中的一个就足够了，不过我不记得是哪一个了。如果您曾经看过它们的代码，那么布局在 Qt 中是一个相当混乱的部分。

# event-handling - 使用 .on() 附加到文档时无法删除特定的事件处理程序

> ID：15887675
> 
> 赞同：4
> 
> 时间：2013-04-08T19:50:22.370
> 
> 标签：event-handling, jquery, jquery-on

这是一个简单的小提琴来演示我的情况......

[http://jsfiddle.net/UnsungHero97/EM6mR/17/](http://jsfiddle.net/UnsungHero97/EM6mR/17/)

我正在做的是为当前和未来的元素添加一个事件处理程序，使用`.on()`. 我希望能够在发生某些事情时为特定元素删除这些事件处理程序；in the case of the fiddle, when the radio button is selected, the event handler for the blue elements should be removed and clicking those elements should not do anything anymore.

它似乎不起作用:(

如何删除附加到`document`我`.on()`为这些特定蓝色元素创建的事件处理程序？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T19:59:40.120

`.on()`您的签名`.off()`必须匹配。

这两个不匹配，因此`.off()`调用不会找到匹配的事件处理程序来删除：

```
$(document).on('click', '.btn', function() {
    update();
});

$(document).off('click', '.blue'); 
```

注意，传递给`.on()`and的选择器`.off()`是不同的。

* * *

当使用动态形式时`.on()`（您将选择器作为参数传递给 .on()），您不能只删除部分项目。那是因为根元素上只安装了一个事件处理程序，而 jQuery 只能删除整个事件，或者根本不删除。所以，你不能只是`.off()`一些动态项目。

您的选择是删除所有事件处理程序：

```
$(document).off('click', '.btn'); 
```

然后安装一个新的事件处理程序，排除您不想要的项目，例如：

```
$(document).off('click', '.btn:not(.blue)'); 
```

或者，教事件处理程序本身如何忽略`.blue`项目：

```
$(document).on('click', '.btn', function() {
    if (!$(this).hasClass('blue')) {
        update();
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T19:57:02.643

注意你如何附加你的事件；这对我来说很好：

```
$('.btn').on('click', function() {
    update();
});

$('#disable').on('change', function() {
        $('.btn').off('click');
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T20:03:09.383

唯一的方法似乎是：

```
$('#disable').on('change', function() {

        $(document)
           .off('click', '.btn')
           .on('click', '.btn:not(.blue)', update);
    }); 
```

# .net - 为具有属性的方法添加消息检查器

> ID：15887683
> 
> 赞同：0
> 
> 时间：2013-04-08T19:50:56.177
> 
> 标签：.net, wcf, idispatchmessageinspector

是否可以仅对某些应用了自定义属性的服务方法设置消息检查器？我在网上看到的所有示例都添加了一个消息检查器作为行为扩展，它应用于服务上的每个方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T09:43:35.893

我不确定是否可以将检查器仅应用于一组有限的方法，但是您可以尝试创建一个常规消息检查器，该检查器将检查目标方法是否应用了自定义属性：

```
public object AfterReceiveRequest(ref System.ServiceModel.Channels.Message request, System.ServiceModel.IClientChannel channel, System.ServiceModel.InstanceContext instanceContext)
{
        string actionName = request.Headers.Action.Substring(request.Headers.Action.LastIndexOf('/') + 1);
        if (!string.IsNullOrEmpty(actionName))
        {
            var methodInfo = instanceContext.Host.Description.ServiceType.GetMethod(actionName);
            if (methodInfo != null)
            {
                var customAttributes = methodInfo.GetCustomAttributes(false);
                if (customAttributes.Any(ca => ca.GetType().Equals(typeof(MyCustomAttribute))))
                { 

                }
            }
        }
        ... 
```

这只是一个快速而肮脏的实现，您可能需要稍微重构一下。您可能还想在检查器本身之外抽象出过滤过程，也许有某种责任链来处理它。希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-15T11:46:57.243

是的，你可以这样做。您需要一个继承自soapextension 的类和另一个继承自soapexstension 属性的类。然后，您可以使用 soapextensionattribute 类来设置 Web 服务方法的属性。

例如

' 为应用 SOAP 扩展的 XML Web 服务方法定义跟踪 SOAP 请求和 SOAP 响应的 SOAP 扩展。' //blog.encoresystems.net/articles/how-to-capture-soap-envelopes-when-sumption-a-web-service.aspx ' 和 //bytes.com/topic/net/answers/426481-how- log-soap-messages-client-side ' 和 //www.codeproject.com/KB/cpp/SerializationFun.aspx 朋友类 SoapdbTraceExtension 继承 SoapExtension

```
 Private _originalStream As Stream
    Private _newStream As Stream

    Private _methodname As String

    Sub New()
    End Sub

    ' Save the Stream representing the SOAP request (or SOAP response) into
    ' a local memory buffer.
    ' basically due to the nature of streams, this creates a copy so that 
    ' we have something that we can work on. This function is called automatically
    ' when this soapextension is invoked.
    ' see //msdn.microsoft.com/en-us/magazine/cc164007.aspx
    ' the goal here is to save the stream containing the SOAP message
    ' We also create a NewStream for holding a working copy of the message
    ' The stream passed into Chainstream creates a memory stream and passes it back to the caller
    ' the stream returned from chainstream contains the serialised SOAP message
    Public Overrides Function ChainStream(ByVal stream As Stream) As Stream

        ' this is called prior to BeforeDeserialize and BeforeSerialize 
        ' see http://hyperthink.net/blog/inside-of-chainstream/
        ' In the former case (i.e. the one we are interested in here
        ' oldstream contains the contents of the soap request and newstream will be empty

        _originalStream = stream
        _newStream = New MemoryStream()
        Return _newStream
    End Function

    ' When the SOAP extension is accessed for the first time, the XML Web
    ' service method it is applied to is accessed to store the parameter values
    ' passed in, using the corresponding SoapExtensionAttribute.  So in the case 
    ' of the database trace this might be the method name (as shown below)
    Public Overloads Overrides Function GetInitializer(ByVal methodInfo As  _
                                                          LogicalMethodInfo,
                                                       ByVal attribute As SoapExtensionAttribute) As Object
        ' We use this to establish
        ' the method name (though it could be any attribute from the
        ' SOAPDatabaseTrace class) i.e. any attribute that can be 
        ' passed from the use of the attribute on the web service method declaration

        ' here we store the name of the method in the property we have setup

            ' name of the calling method

            Me._methodname = CType(attribute, SOAPDatabaseTrace).Method

            Return _methodname

    End Function

    Public Overloads Overrides Function GetInitializer(ByVal webServiceType As  _
                                                          Type) As Object

        Return _methodname
    End Function

    ' Receive the method name stored by GetInitializer and store it in a
    ' member variable for this specific instance.
    Public Overrides Sub Initialize(ByVal initializer As Object)

        ' this is called once per soap request and is therefore the ideal place to add appropriate data

            _methodname = CStr(initializer)

    End Sub

    ' This is automatically called after the chainstream function.
    ' this is called multiple times
    Public Overrides Sub ProcessMessage(ByVal message As SoapMessage)
            Select Case message.Stage
                Case SoapMessageStage.BeforeSerialize
                    ' chainstream is called prior to BeforeSerialize
                Case SoapMessageStage.AfterSerialize
                    WriteOutput(message)

                Case SoapMessageStage.BeforeDeserialize
                    ' chainstream is called prior to BeforeDeserialize 
                    WriteInput(message)
                Case SoapMessageStage.AfterDeserialize
            End Select
    End Sub

    ' Write the SOAP response to the database
    Public Sub WriteOutput(ByVal message As SoapMessage)

            CopyAndKeepXMLStream(_newStream, _originalStream)
    End Sub

    ' Write the SOAP request message to the database

    Public Sub WriteInput(ByVal message As SoapMessage)

            CopyAndKeepXMLStream(oldStream:=_originalStream, cleanedUpStream:=_newStream)

    End Sub

    Private Sub CopyAndKeepXMLStream(ByVal oldStream As Stream, ByVal cleanedUpStream As Stream)

            ' from //google-api-adwords-dotnet.googlecode.com/svn-history/r50/trunk/src/lib/TraceExtension.cs
            Dim oldposition As Long
            If oldStream.CanSeek Then
                oldposition = oldStream.Position
                oldStream.Position = 0
            End If
            ' load the XML writer
            Dim xmlwriter As XmlTextWriter = New XmlTextWriter(cleanedUpStream, Encoding.UTF8)
            ' pretty it all up
            xmlwriter.Indentation = 2
            xmlwriter.IndentChar = Char.Parse(" ")
            xmlwriter.Formatting = Formatting.Indented

            ' load from old stream and write to the new cleaned up stream
            Dim xmlreader As XmlReader = New XmlTextReader(oldStream)
            Dim xml As XmlDocument = New XmlDocument
            xml.Load(xmlreader)
            xml.WriteTo(xmlwriter)
            xmlwriter.Flush()
            cleanedUpStream.Flush()

            If cleanedUpStream.CanSeek Then
                cleanedUpStream.Position = 0
            End If

            If oldStream.CanSeek Then
                oldStream.Position = oldposition
            End If
            'Dim result As String
            'result = xml.OuterXml

            ' now we have the string we can write to the database
            StoreSOAP(xml)
    End Sub

    ''' <summary>
    ''' Parse and store the soap message 
    ''' </summary>
    ''' <param name="xml">The SOAP message</param>
    ''' <remarks>Stores the SOAP message in a database</remarks>
    Private Sub StoreSOAP(ByVal xml As XmlDocument) 
```

... 标准 DB 插入代码

```
 End Sub

    Private Sub Copy(ByVal fromStream As Stream, ByVal toStream As Stream)
        Dim reader As New StreamReader(fromStream)
        Dim writer As New StreamWriter(toStream)
        writer.WriteLine(reader.ReadToEnd())
        writer.Flush()
    End Sub
End Class

' Create a SoapExtensionAttribute for our SOAP Extension that can be
' applied to an XML Web service method.
' these are the attributes we have available
' they are available in the web service of interest
' and can be used here for logging etc.
<AttributeUsage(AttributeTargets.Method)>
Friend Class SOAPDatabaseTrace
    Inherits SoapExtensionAttribute

    Private _mPriority As Integer
    Private _mMethod As String = "Unknown"

    Public Overrides ReadOnly Property ExtensionType() As Type
        Get
            Return GetType(SoapdbTraceExtension)
        End Get
    End Property

    ''' <summary>
    '''     Priority
    ''' </summary>
    ''' <value>Integer</value>
    ''' <returns>
    '''     Indicates the priority in which the extension will be executed relative to other soapextensions.
    '''     1 is the highest priority
    ''' </returns>
    ''' <remarks>Required by the inheritance</remarks>
    Public Overrides Property Priority() As Integer
        Get
            Return _mPriority
        End Get
        Set(ByVal value As Integer)
            _mPriority = value
        End Set
    End Property

    Public Property Method() As String
        Get
            Return _mMethod
        End Get
        Set(ByVal value As String)
            _mMethod = value
        End Set
    End Property

End Class 
```

然后在您的网络服务中，该方法看起来像这样

```
 <WebMethod(Description:="Some web method"), _
    SOAPDatabaseTrace(method:="MyFunction")> _
    Public Function MyFunction(ByVal Param1 As String) as object 
```

...

您将 SOAPDatabaseTrace 属性放在要跟踪的任何方法上

# javascript - 单击图像的不同部分时触发事件 - javascript

> ID：15887685
> 
> 赞同：1
> 
> 时间：2013-04-08T19:51:08.477
> 
> 标签：javascript, jquery, web-applications

当打开当前图像的某些部分/部分时，我想打开另一个图像。

例如：

图像 1：人脸 - 图像上会有点，例如一个用于眼睛，一个用于耳朵，一个用于嘴巴。

当用户点击眼睛时，应该会打开一个新图像（这将是放大的眼睛，将显示更多细节）。

有人可以给我一些有关如何继续此应用程序的提示吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T19:59:08.317

您可以使用地图标签 - 这是简单的示例[http://www.w3schools.com/tags/tag_map.asp](http://www.w3schools.com/tags/tag_map.asp)

您也可以使用 javascript 来处理它。

当您通过 jquery position 获取图像位置时，jQuery 添加 event.pageX，event.pageY 很容易计算触发位置。

# matlab - 如何检查单元阵列是否满足任意数量的 matlab.unittest.constraints？

> ID：15887690
> 
> 赞同：1
> 
> 时间：2013-04-08T19:51:15.867
> 
> 标签：matlab

我有一个 matlab.unittest.constraints 元胞数组和一个值元胞数组。我想看看这些值是否与约束匹配（分别）。当然，我可以只使用 for 循环，类似于以下代码：

```
satisfied = zeros(1,argLength);
for i=1:argLength
    satisfied(i) = satisfiedBy(cons{i}, val{i});
end;
answer = all(satisfied); 
```

但是知道 MATLAB，一定有办法将所有这些压缩成一行，我只是不知道。我事先比较了数组的长度，如果它们不相等则返回 false。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T20:13:55.187

这是一个可能的 CELLFUN 声明：

```
satisfied = cellfun(@satisfiedBy, cons, val); 
```

确保`satisfiedBy`只返回单个数字/逻辑值。

# php - 使用 PDO 有效地获取带有 WHERE 子句的 SELECT 查询返回的行数

> ID：15887692
> 
> 赞同：3
> 
> 时间：2013-04-08T19:51:22.243
> 
> 标签：php, mysql, pdo, count, rowcount

关于如何在使用 PDO 运行查询时获取返回的行数，有[很多关于 SO的讨论。](https://stackoverflow.com/search?q=pdo%20select%20number%20of%20rows%20%5Bmysql%5D)`SELECT`虽然大多数（包括[PHP 手册](http://php.net/manual/en/pdostatement.rowcount.php)）建议使用两个查询，第一个运行`COUNT()`，我还没有看到一个建议如何使用带有`WHERE`子句的准备好的语句轻松地做到这一点。

我如何最有效地（在处理和代码行数方面）`COUNT()`使用相同的`WHERE`子句运行？准备好的查询已经指定了列。`fetchAll()`不会在这里工作，因为那不会扩展；如果我必须返回数百万行，使用 fetchAll 处理它会非常慢。

**例如，没有计数：**

```
$sql = "SELECT
            FirstName,
            LastName
        FROM
            People
        WHERE
            LastName = :lastName";
$query = $pdoLink->prepare($sql);
$query->bindValue(":lastName", '%Smith%');
$query->execute();      
while($row = $query->fetch(PDO::FETCH_ASSOC)) {
    echo $row['FirstName'] . " " . $row['LastName'];
} 
```

我看着只是添加`COUNT(ID)`到`SELECT`子句，并让它只是一个查询，但看起来没有真正好的方法（或不是特定于数据库的方法）来回退`fetch()`一旦我从中得到一行。

另一种解决方案可能是使该`WHERE`子句成为自己构建的变量。但是，这似乎效率不高。它正在准备两个查询，重新绑定值并执行它。

**所以像：**

```
$whereClause = " WHERE
                   LastName = :lastName";

$rowsSql = "SELECT
            COUNT(ID) As NumOfRows
        FROM
            People " . $whereClause;
$rowsQuery = $pdoLink->prepare($sql);
$rowsQuery->bindValue(":lastName", '%Smith%');
$rowsQuery->execute();
if ($rowsQuery->fetchColumn() >= 1)
    //Prepare the original query, bind it, and execute it.
    $sql = "SELECT
                FirstName,
                LastName
            FROM
                People " . $whereClause;
    $query = $pdoLink->prepare($sql);
    $query->bindValue(":lastName", '%Smith%');
    $query->execute();      
    while($row = $query->fetch(PDO::FETCH_ASSOC)) {
        echo $row['FirstName'] . " " . $row['LastName'];
    }
}
else
{
    //No rows found, display message
    echo "No people found with that name.";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T20:34:34.267

使用 MySQL 时，[`PDOStatement::rowCount()`](http://php.net/pdostatement.rowcount)返回结果集中的行数。它实际上[调用](http://lxr.php.net/xref/PHP_5_5/ext/pdo_mysql/mysql_statement.c#149)底层`mysql_num_rows()`C 函数来填充值。无需多次查询或任何其他混乱。

MySQL 也是如此，但其他驱动程序不能依赖这种行为（其他驱动程序可能支持它，但不能保证，我对其他驱动程序的熟悉程度不足以确定任何一种方式）。但是由于您的问题专门针对 MySQL，它应该符合您的目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-14T12:40:37.600

试试这个内置的 PDO 功能；$query->rowCount();

# html - css li 重叠 ul 菜单

> ID：15887694
> 
> 赞同：2
> 
> 时间：2013-04-08T19:51:27.613
> 
> 标签：html, css

我试图在顶部制作菜单，该菜单会下拉另一个菜单，但它与顶部的菜单重叠我尝试了绝对值，但它消失的子菜单我认为绝对不起作用，我尝试了相对它也不起作用。

解决此问题的最佳方法是什么？

[http://jsfiddle.net/TBEnf/](http://jsfiddle.net/TBEnf/)这里是 Jfiddle 演示

![在此处输入图像描述](https://i.stack.imgur.com/TUTLV.png)

![在此处输入图像描述](https://i.stack.imgur.com/CbNOq.png)

这是我的代码

```
<style>
.midbox {
    margin:0px auto;
    width:900px;
    height:1000px;
    background:#c0d8d8;
    border-radius:10px;
    box-shadow: 10px 10px 10px #969696;
}
.headerprofile {
    width:900px;
    height:30px;
    background-color:skyblue;
    border-top-left-radius:10px;
    border-top-right-radius:10px;
    box-shadow:0 1px -2px #70badb
}

    .headerprofile .ULlist ul li:hover > ul{
     display:block;
    }
    .headerprofile .ULlist ul ul li a {
        padding:     15px;     
        position:relative;
    }
    .headerprofile .ULlist ul ul li {
       float: none; 
    border-top: 1px solid #6b727c;
    border-bottom: 1px solid #575f6a;
    position: relative;

    }
    .headerprofile .ULlist ul ul {
        display: none;

    background: #5f6975; border-radius: 0px; padding: 0;
position: absolute; top: 100%;

    }
    .headerprofile .ULlist ul {
        position:relative;
        list-style:none;
        padding:0 10px;
    }

        .headerprofile .ULlist ul li {
            float:left;
        }

    .headerprofile .ULlist ul li a{

    display: block; padding: 6px 10px;
    color: #757575; text-decoration: none;

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T20:09:16.810

只需`position:relative`在 parent`li`而不是external 上设置`ul`。`ul`没有实际高度，因为所有s`li`都是浮动的。

```
.headerprofile .ULlist ul {
    list-style:none;
    padding:0 10px;
}

    .headerprofile .ULlist ul li {
        float:left;
        position:relative;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T20:09:21.437

我认为这条线会解决你的问题

```
headerprofile .ULlist ul li:hover > ul
{
    display:block;
    margin-top:30px;  /* add this line to your css*/
} 
```

[演示](http://jsfiddle.net/cDkYm/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T20:09:20.353

如果您将：添加`top: 30px;`到您的子菜单，则可以解决此问题。

[**演示**](http://jsfiddle.net/darkajax/HC5w3/)

# vbscript - VBScript 中的 UTC 时间分配

> ID：15887700
> 
> 赞同：11
> 
> 时间：2013-04-08T19:51:32.900
> 
> 标签：vbscript, date-format, utc

有没有人在 VBScript 中有一种简单的方法来获取 UTC 的当前时间？

谢谢，克里斯

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-04-03T15:23:57.913

我使用一个简单的技术

```
Set dateTime = CreateObject("WbemScripting.SWbemDateTime")    
dateTime.SetVarDate (now())
wscript.echo  "Local Time:  " & dateTime
wscript.echo  "UTC Time: " & dateTime.GetVarDate (false) 
```

[有关 SWbemDateTime 的更多信息](http://msdn.microsoft.com/en-us/library/aa393687%28v=vs.85%29.aspx)

如果您想将 UTC 转换回本地时间，请执行以下操作：

```
Set dateTime = CreateObject("WbemScripting.SWbemDateTime")
        dateTime.SetVarDate now(),false  REM Where now is the UTC date
        wscript.echo cdate(dateTime.GetVarDate (true)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T20:08:13.507

那里有很多例子。如果您可以访问注册表，则此注册表对您有用：

```
od = now() 
set oShell = CreateObject("WScript.Shell") 
atb = "HKEY_LOCAL_MACHINE\System\CurrentControlSet\" &_ 
    "Control\TimeZoneInformation\ActiveTimeBias" 
offsetMin = oShell.RegRead(atb) 
nd = dateadd("n", offsetMin, od) 
Response.Write("Current = " & od & "<br>UTC = " & nd) 
```

来自[http://classicasp.aspfaq.com/date-time-routines-manipulation/how-do-i-convert-local-time-to-utc-gmt-time.html](http://classicasp.aspfaq.com/date-time-routines-manipulation/how-do-i-convert-local-time-to-utc-gmt-time.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T20:44:52.933

[您可以从Win32_TimeZone](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394498%28v=vs.85%29.aspx) `WMI`类中获得时间偏差。

```
myDate = "9/4/2013 17:23:08"
For Each objItem In GetObject(_
    "winmgmts:\\.\root\cimv2").ExecQuery(_
    "Select * from Win32_TimeZone")
    bias = objItem.Bias
Next
myDate = DateAdd("n", bias, myDate)
WScript.Echo myDate 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-12T18:14:42.847

这是一个将日期格式化为 UTC 的示例。请注意，您不能使用它格式化到毫秒级别。

```
Dim formattedDate 
Dim utcDate

Set objShell = WScript.CreateObject("WScript.Shell")

Set dateTime = CreateObject("WbemScripting.SWbemDateTime")

dateTime.SetVarDate(now())
utcDate = dateTime.GetVarDate(false) 

wscript.echo  "Local Time:  " & dateTime
wscript.echo  "UTC Time: " & utcDate

formattedDate = DatePart("yyyy",utcDate) & "-" & Right("0" & DatePart("m",utcDate), 2) & "-" & Right("0" & DatePart("d",utcDate), 2) 
    & "T" & Right("0" & DatePart("h",utcDate), 2) & ":" & Right("0" & DatePart("n",utcDate), 2) 
    & ":" & Right("0" & DatePart("s",utcDate), 2) & ".000+0000"

wscript.echo formattedDate

'results in a format that looks like this: 1970-01-01T00:00:00.000+0000

set dateTime=Nothing
set objShell=Nothing 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-03T05:13:06.507

基于上述函数 - 返回要添加到当前时间以返回 UTC 的增量值。

或者使用 DATE+TIME 调用它以返回 UTC。

调用一次并存储在全局变量中以将任何日期/时间偏移到 UTC。相反，从任何 UTC 中减去它以获取当前时区的时间。

底部的额外 ROUND 是为了补偿转换到最接近秒的浮点错误。

```
Function Time_add_To_get_UTC(Optional DateTime = 0) ''as double
    '' Returns value to add to current time to get to UTC
    ''Based on above functions : )
    ''return offset from current time to UTC
    ''https://stackoverflow.com/questions/15887700/utc-time-assignment-in-vbscript/22842128
    Dim SWDT    ''As SWbemDateTime
    Dim dt          ''As Date

    Set SWDT = CreateObject("WbemScripting.SWbemDateTime")

    dt = Date + Time()

    SWDT.SetVarDate (dt)

    Time_add_To_get_UTC = CDbl(SWDT.GetVarDate(False)) - CDbl(SWDT.GetVarDate(True))
    Time_add_To_get_UTC = CDbl(Round(Time_add_To_get_UTC * 24 * 60 * 60, 0) / 24 / 60 / 60)
    Time_add_To_get_UTC = DateTime + Time_add_To_get_UTC
End Function 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-04-03T16:08:43.987

使用 SetVarDate 时，由于过渡到夏令时（从 +060 到 +120）而导致的偏移量变化发生得太快了一小时。RegRead(HKLM\..\ActiveTimeBias) 方法很准确。如果需要复制，只需将电脑时钟置于预期转换时间之前和之后的时间并检查结果。

# event-handling - 事件是 portlet 间通信的唯一方式

> ID：15887701
> 
> 赞同：0
> 
> 时间：2013-04-08T19:51:41.173
> 
> 标签：event-handling, portlet, jsr286

阅读有关 jsr286 eventing 的文章后，我得到的印象是，如果 portlet 属于不同的 .war 文件，则 eventing 功能使它们能够相互通信。

我只是想确认即使 2 个 portlet 属于同一个 war 文件，它们可以通信的唯一方法是通过事件。

因为 servlet 的整个请求转发特性不适用于 portlet。它是否正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T04:59:17.883

Portlet 事件可以在相同战争或不同战争中的 Portlet 之间使用。但是，portlet 事件的限制之一是 2 个 portlet 必须在同一页面上。

还有其他方法可以在 2 个 portlet 之间进行通信。您可以使用公共渲染参数。这个想法是第一个 portlet 设置一个参数，第二个 portlet 可以读取它以检索值。您还可以使用 PortletSession 的 Application 范围来通信和共享数据。PortletSession 的应用程序范围 (APPLICATION_SCOPE) 在同一战争的所有 portlet 之间共享。

# java - 如果字符串包含“xyz”且前面没有句点，则返回 true？

> ID：15887703
> 
> 赞同：3
> 
> 时间：2013-04-08T19:51:46.627
> 
> 标签：java, string

我正在尝试解决这个 CodingBat 问题：

> 如果给定字符串包含“xyz”的外观，其中 xyz 没有直接以句点 (.) 开头，则返回 true。所以“xxyz”很重要，但“x.xyz”没有。

```
xyzThere("abcxyz") → true
xyzThere("abc.xyz") → false
xyzThere("xyz.abc") → true 
```

我的尝试：

```
public boolean xyzThere(String str) {
  boolean res = false;

  if(str.contains(".xyz") == false && str.contains("xyz")){
    res = true;
  }

  return res;

} 
```

问题是它通过了除以下测试之外的所有测试，因为它包含两个 xyz 实例：

```
xyzThere("abc.xyzxyz") 
```

我怎样才能让它通过所有测试？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T19:55:47.980

```
public static boolean xyzThere(String str) {
    int i = -1;
    while ((i = str.indexOf("xyz", i + 1 )) != -1) {
        if (i == 0 || (str.charAt(i-1) != '.')) {
            return true;
        }
    }
    return false;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-07-28T21:10:42.567

或者，您可以将字符串中所有出现的“.xyz”替换为“”，然后使用 .contains 方法验证修改后的字符串是否仍包含“xyz”。像这样：

```
return str.replace(".xyz", "").contains("xyz"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-08T19:56:05.797

```
public boolean xyzThere(String str) {
    return(!str.contains(".xyz") && str.contains("xyz"));
} 
```

编辑：鉴于“.xyzxyz”应该返回true，解决方案应该是：

```
public boolean xyzThere(String str) {
    int index = str.indexOf(".xyz");
    if(index >= 0) {
        return xyzThere(str.substring(0, index)) || xyzThere(str.substring(index + 4));
    } else return (str.contains("xyz"));
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-08T20:24:00.010

好的，我知道每个人都渴望分享他们的专业知识，但直接给孩子答案并没有什么好处。

@EnTHuSiAsTx94

我能够通过三个语句通过所有测试。这里有一个提示：尝试使用字符串`replace`方法。这是方法签名：

```
String replace(CharSequence target, CharSequence replacement) 
```

稍微注意一下，if 语句中的第一个条件可以简化为：

```
str.contains(".xyz") == false 
```

到：

```
!str.contains(".xyz") 
```

该`contains`方法已经返回 true 或 false，因此不需要显式的 equals 比较。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-12-20T03:48:02.407

```
public boolean xyzThere(String str) {
return str.startsWith("xyz") || str.matches(".*[^.]xyz.*");
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-10-29T10:50:03.400

您可以将等效的 java 代码用于以下解决方案：

```
def xyz_there(str):
  pres = str.count('xyz')
  abs = str.count('.xyz')
  if pres>abs:
    return True
  else:
    return False 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-08-29T15:44:00.053

下面的代码对我来说很好：

```
if '.xyz' in str:
  return xyz_there(str.replace('.xyz',''))
elif 'xyz' in str:
  return True

return False 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-08T20:20:05.290

好的，让我们将您的问题转换为正则表达式：

`^`从字符串的开头开始，
`(|.*[^\.])`后跟任何字符或任何数量的任何字符和任何字符，除了`.`
`xyz`然后 xyz

Java代码：

```
public static boolean xyzThere(String str) {
    return str.matches("^(|.*[^\\.])xyz");
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-09-11T06:37:07.057

```
boolean flag = false;
if(str.length()<=3){
   flag = str.contains("xyz"); 
}

for (int i = 0; i < str.length()-3; i++) {
    if (!str.substring(i, i+3).equals("xyz") && 
            str.substring(i, i+4).equals(".xyz")) {
        flag=false;
    }else{
        if(str.contains("xyz")) flag=true;
    }
}
return flag; 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-12-29T01:01:26.883

```
public boolean xyzThere(String str) {
  boolean res=false;
  if(str.length()<3)res=false;
  if(str.length()==3){
    if(str.equals("xyz"))res=true;
    else res=false;
  }
  if(str.length()>3){
   for(int i=0;i<str.length()-2;i++){
     if(str.charAt(i)=='x' && str.charAt(i+1)=='y' && str.charAt(i+2)=='z'){
       if(i==0 || str.charAt(i-1)!='.')res=true;
     }
   }
  }
  return res;
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-02-06T12:17:18.887

```
public class XyzThereDemo {
    public static void main(String[] args) {
        System.out.println(xyzThere("abcxyz"));
        System.out.println(xyzThere("abc.xyz"));
        System.out.println(xyzThere("xyz.abc"));
    }

    public static boolean xyzThere(String str) {
        int xyz = 0;
        for (int i = 0; i < str.length() - 2; i++) {

            if (str.charAt(i) == '.') {
                i++;
                continue;

            }

            String sub = str.substring(i, i + 3);

            if (sub.equals("xyz")) {
                xyz++;
            }

        }

        return xyz != 0;
    }
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-06-21T09:58:36.440

在 python 中，以下代码有效：

```
def xyz_there(str):
 if len(str) < 3:
  return False
 for i in range(len(str)):
  if str[i-1]!= '.':
   if str[i:i+3]=='xyz' :
    return True
 else:
  return False 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-08-17T12:02:03.590

另一种方法

```
public boolean xyzThere(String str) {
 if(str.startsWith("xyz")) return true;
for(int i=0;i<str.length()-3;i++) {
   if(str.substring(i+1,i+4).equals("xyz") && str.charAt(i)!='.') return true;
}
  return false;
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-05-17T15:14:00.207

```
public boolean xyzThere(String str) {

    if (str.startsWith("xyz")){
      return true;
    }

    for (int i = 0; i < str.length()-2; i++) {

        if (str.subSequence(i, i + 3).equals("xyz") && !(str.charAt(i-1) == '.')) {
            return true;
        }
    }
    return false;
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-08-02T13:02:24.583

这是用非常简单的逻辑解决这个问题的最好和最简单的方法：

```
def xyz_there(str):
  for i in range(len(str)):
    if str[i-1]!= '.' and str[i:i+3]=='xyz' :
      return True
  return False 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-09-28T09:59:06.700

```
 public boolean xyzThere(String str) {

    boolean flag = false;

    if (str.startsWith("xyz"))
    {
        return true;
    }

    for (int i = 0; i < str.length() - 3; i++)
    {

        if (str.charAt(i) != '.' && str.charAt(i + 1) == 'x'
            && str.charAt(i + 2) == 'y' && str.charAt(i + 3) == 'z')
        {
          flag = true;
          break;
        }
    }
    return  flag;
} 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-05-01T04:02:50.337

```
def xyz_there(str1):

  for i in range(len(str1)):
    if str1[i-1] != '.' and str1[i:i+3] == 'xyz':
      return True
  else:
    return False 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2021-07-08T13:44:05.197

def xyz_there(str):

如果 str 中的“.xxyz”：

```
return'.xxyz' in str 
```

如果 '。' 在字符串中：

```
a=str.replace(".xyz","")

return 'xyz' in a 
```

如果 '。' 不在str中：

```
return 'xyz' in str 
```

* * *

## 回答 #19

> 赞同：-1
> 
> 时间：2019-06-15T17:13:56.830

简单的解决方案，只需替换并检查“xyz”就可以了

```
def xyz_there(str):
   a=str.replace('.xyz','')
   return 'xyz' in a 
```

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2020-01-08T17:50:08.317

'''Python

```
def xyz_there(str):

    dot=str.find('.')    # if period is present in str if not dot==-1
    if dot==-1:            # if yes dot will show position of period  
        return 'xyz' in str
    elif dot!=-1:                 #if period is present at position dot
        if 'xyz' in str[:dot]:    
            return True                    
        while str[dot+1:].find('.')!=-1:   #while another period is present 
            if  '.xyz' in str[dot+1:]==False:  # .xyz will not be counted  
                return True
        else:
            dot=dot+str[dot+1:].find('.')+2 #now dot=previous dot+new dot+2
    else:
        return 'xyz' in str[dot+2:] 
```

'''

* * *

## 回答 #21

> 赞同：-1
> 
> 时间：2020-04-13T14:55:57.110

```
def xyz_there(str):
  list = [i for i in range(len(str)) if str.startswith('xyz', i)]
  if list == []:
    return False
  else:
    found = 0
    for l in list:
      if str[l-1:l+3] != ".xyz":
        found += 1
    if found >=1:
      return True
    else:
      return False 
```

![](https://i.stack.imgur.com/Q6Xq8.png)

# c++ - std::min 无法将枚举常量解释为有效的整数类型 (g++ 4.6.3)

> ID：15887707
> 
> 赞同：0
> 
> 时间：2013-04-08T19:51:55.970
> 
> 标签：c++, templates, g++

我今天遇到了这个奇怪的错误，我使用 std::min 来获取变量值和枚举常量的最小值，到目前为止，很好，但是当我去编译它时，g++ 给了我一个编译错误指示它找不到与 min 函数匹配的模板：

```
no matching function for call to ‘min(int&, main()::<anonymous enum>)’ 
```

这是一个重现错误的最小示例：

```
#include <algorithm>
int main()
{
    int actualRange=10;
    enum { DesiredRange=8 };
    int workingRange = std::min(actualRange, DesiredRange);
    return 0;
} 
```

修复很简单，我简单地将`int(DesiredRange)`其用作 min 函数的第二个参数，但令我惊讶的是，这是必要的，因为枚举类型只是一个整数常量。我的系统信息如下：“g++ (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3”

我的代码中有什么不正确的地方导致了这个错误吗？这是一个有效的编译错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T19:54:26.367

你的代码没问题。模板参数推导不进行转换~~（除了派生到基地）~~，因此您使用简单定义的函数（例如`std::min`. andrei alexandrescu 曾经写过[一篇长篇论文](http://www.drdobbs.com/generic-min-and-max-redivivus/184403774)，讲述了在 C++03 中需要什么来使基于模板的`min`函数像宏一样类型宽松。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T20:06:30.047

您忘记的是`std::min`仅在一种类型上进行模板化，并且当您将两种不同的类型（您的枚举和 int）传递给它时，编译器无法确定要使用两种类型中的哪一种以及模板类型，因此类型推断失败并出现错误。

您可以指定`std::min<int>(actualRange, DesiredRange);`您是否发现它比您的 int 强制转换机制更清晰。

# c++ - Xcode 不会进入类构造函数

> ID：15887714
> 
> 赞同：1
> 
> 时间：2013-04-08T19:52:09.730
> 
> 标签：c++, xcode

我们正在尝试调试 C++ 中的问题。不幸的是，问题似乎发生在类的构造函数中。当我们尝试进入构造函数时，Xcode 会跳过它。有谁知道为什么 Xcode 有这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T19:57:31.397

如果您在该构造函数中放置一个断点，那应该会处理它。除非构造函数实际上没有被调用。

# windows-server-2008 - 断开连接后 RDP 会话的 GUI 能否保持活动状态

> ID：15887729
> 
> 赞同：15
> 
> 时间：2013-04-08T19:52:54.450
> 
> 标签：windows-server-2008, vps, rdp

我正在运行 24/7 模拟击键和鼠标点击的自动化测试程序。

尽管它在本地运行良好，但在 RDP 会话中，一旦最小化或断开连接，它就会停止运行。显然，如果您无法在屏幕上实际看到它，则 GUI 不存在。

有一个注册表解决方法可以保持 GUI 处于活动状态以最小化窗口，但我不知道在断开连接后没有办法让它保持活动状态。

理想情况下，我会在服务器 Windows 控制台会话上运行它，它不会关心断开连接，但在托管环境中（我尝试过 Amazon 和 Go Daddy），无法访问控制台会话。

有谁知道我该如何解决这个问题？基本上任何允许我在 VPS 上运行我的应用程序的解决方案。我需要主机的可靠性，但也需要像坐在前面一样灵活地运行它。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2018-07-14T08:27:36.057

是的你可以。

Windows 中有两种类型的会话：始终处于活动状态的**“控制台”**会话，最多只能有一个会话，以及**“终端”**会话，例如 RDP。在 Github 上使用“rdpwrap”，您可以拥有无​​限数量的终端会话。

当没有与它们的连接时，RDP 会话将变为“停用”。程序仍然可以运行，但是任何依赖于 GUI 交互的东西都会严重损坏。

幸运的是，我们可以通过在终端会话中运行以下命令，将终端会话“转换”为控制台会话，而不是正常断开与远程桌面的连接：

```
for /f "skip=1 tokens=3" %%s in ('query user %USERNAME%') do (tscon.exe %%s /dest:console) 
```

这将使您与会话断开连接，但它仍将在完整的图形上下文中运行。这回答了你的问题。你可以重新连接它，它会再次成为一个终端会话，你可以无限地这样做。而且，当然，自动热键可以完美运行。

**但是，如果您需要多个持久的、支持图形的会话怎么办？**

要获得无限数量的图形持久会话，您可以运行远程桌面并从上述“主”会话中启动终端会话。通常远程桌面会阻止这种“回送”行为，但如果您为目标指定**“127.0.0.2”**，您将能够与远程计算机上的任意数量的用户启动终端会话。

除非您在以下注册表位置创建**RemoteDesktop_SuppressWhenMinimized**并将其设置为**2**，否则图形持久性仅在终端服务器未最小化时才会出现：

```
HKEY_LOCAL_MACHINE\Software\Microsoft\Terminal Server Client 
```

有了这个，您可以从一台机器上获得无限数量的完全独立的图形持久远程会话。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-11T17:12:24.513

这可能是一种解决方法，尽管我自己没有尝试过，而且它涉及拥有另一台机器

假设您正在创建一个到 myserver.com 的会话

> 本地客户端----> myserver.com

您可以尝试使用单独的服务器（我们称之为 myslave.com）并使用它来建立会话，而不是这样做

> 本地客户端----> myslave.com ----> myserver.com

然后，如果您断开`Local Client ---> myslave.com`会话，则会话之间的 GUI`myslave.com ----> myserver.com`应保持活动状态。

只有当您连接到 myslave.com 的控制台会话时，它才会起作用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-07-03T10:20:04.390

我找到了类似的方法。我有同样的问题，我下载了[rdp 包装器](https://github.com/stascorp/rdpwrap/releases)，它允许您配置多个会话 rpd 服务器，其中包含的一个工具（rdpchecker.exe）允许您连接到本地主机，这样您就可以从服务器连接到您的服务器，而您不需要那个中间客户端.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-11-25T12:19:54.477

> 这可能是一种解决方法，尽管我自己没有尝试过，而且它涉及拥有>另一台机器
> 
> 假设您正在创建一个到 myserver.com 的会话
> 
> 本地客户端----> myserver.com
> 
> 您可以尝试使用单独的服务器（我们称之为 myslave.com）并使用它来建立会话，而不是这样做
> 
> 本地客户端----> myslave.com ----> myserver.com
> 
> 然后，如果您断开本地客户端 ---> myslave.com 会话，myslave.com ----> myserver.com 之间会话的 GUI
> 应该保持活动状态

如果您使用的是 Windows 服务器，您甚至不需要另一台机器。

```
1) Connect to the server with the remote desktop connection (#con1).

2) Create a new alias for your server system like "127.0.0.2" in Windows\System32\drivers\etc\hosts .

3) Now establish a new remote desktop connection from your windows server (in #con1) to itself (#con2).

4) Finally start your GUI needing application e.g. UI-Path in #con2 and then close #con1. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-03T10:49:23.257

我遇到了同样的问题，并注意到使用 VNC (TightVNC) 接管远程机器似乎可以解决问题。我猜VNC使用控制台屏幕。一旦激活并登录，它就会保持登录状态，即使在 VNC 断开连接后也是如此。确保屏幕永远不会在电源选项中关闭。请注意，通常不建议在 VPS 上保持控制台登录状态。

# solr - 在solr中总结一个领域

> ID：15887731
> 
> 赞同：3
> 
> 时间：2013-04-08T19:52:58.067
> 
> 标签：solr, sum, aggregate-functions

我有一个带有字段的 Solr 索引：

```
STR(k_id)
STR(k_pid)
INT(k_count) >= 1 
```

我想要一个实现这一点的查询：

```
SELECT k_pid, SUM(k_count) FROM index GROUP BY k_pid 
```

如何对 k_count 字段进行求和运算？感谢任何帮助。

```
http://<myhost>:<port>/solr/collection2/select?q=*:*&debugQuery=true&fl=mk_pid,mk_id,mk_count&group=true&group.field=mk_pid 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-02T14:38:35.510

You can't execute sum operations with the field collapsing (group) feature.
Use the stats component for this purpose : [http://wiki.apache.org/solr/StatsComponent](http://wiki.apache.org/solr/StatsComponent)

# ruby-on-rails - 如何从控制器 A 的一个动作重定向到控制器 B 的一个动作并返回 Rails？

> ID：15887732
> 
> 赞同：1
> 
> 时间：2013-04-08T19:53:07.470
> 
> 标签：ruby-on-rails, redirect, controller, action, back

我有两个相关的模型，`Employee`并且`Company`：

```
class Employee < ActiveRecord::Base
  attr_accessible :name

  belongs_to :company
  attr_accessible :company_id
end

class Company < ActiveRecord::Base
  attr_accessible :name, :industry, :owner

  has_many :employees
end 
```

我想要实现的是，当用户在新员工表单中键入不存在的公司名称时，他/她应该被重定向到新公司表单，名称字段已经填充了以前的值表格，填写要创建的公司，然后重定向到“员工成功创建”页面（但当且仅当公司首先创建时）。

我设法在创建员工的同时创建了一家公司，代码如下：

```
def create
  @employee = Employee.new(params[:employee])

  @company = Customer.find_or_create_by_name(params[:company][:name])
  @company.employees << @employee
  @company.save

  @employee.save
end 
```

但是，这并没有让我选择填写公司信息的其余部分。

尝试使用`redirect_to`，我还设法将用户发送到编辑公司表单。

```
# one way to tell if the company has all its attributes filled
if @company.industry.blank?
  redirect_to edit_company_path(@company), notice: "Please edit the company details" and return
end 
```

*该`and return`语句是必要的，否则我会收到“多次调用redirect_to”错误*

然而，这不是我们想要的行为——有两个原因：

*   即使公司没有创建员工。
*   不会通知用户有关员工创建的信息。

所以，我的想法是，我正在以正确的方式重定向到公司控制器和创建操作，并且我应该以某种方式重定向回我`@employee.save`在员工控制器中的位置（就在 之前）。但是怎么做？另外，这是最好的和“最常见的”方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T22:13:45.540

我看到的一种选择是将员工数据保存在会话 ( `session[:temp_employee] = params[:employee]`) 中，然后重定向到创建公司。在公司控制器中，保存公司后，您可以检查会话中是否存在员工，然后将客户端重定向回以创建员工控制器的操作。

这还需要您：

*   启用通过路径创建操作的访问权限（例如`get 'create', to: 'employees#create'`：）
*   如果存在，则在员工中为会话变量中的属性创建操作，否则回退到参数哈希。

# python - 如何将对象转换为 json 文件以用于 three.js 模型加载器

> ID：15887736
> 
> 赞同：16
> 
> 时间：2013-04-08T19:53:18.233
> 
> 标签：python, json, three.js, maya

我正在构建一个浏览器游戏，`three.js`并且我想将 Maya 2013 中的模型加载到我的场景中。我已将模型导出为 obj 文件。

现在我需要知道如何将其转换为`three.js`-loader 的JS 文件。

到目前为止，这是我的装载机：

```
 var jsonLoader = new THREE.JSONLoader();
 jsonLoader.load( "models/model.js", addModelToScene ); 
```

提前致谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-06-06T14:33:25.107

如果你不想使用搅拌机，mrdoob(madethreejs) 有一个简单的 python 脚本可以将 obj 转换为 json。只需在终端中运行[--this script--](https://github.com/mrdoob/three.js/blob/master/utils/converters/obj/convert_obj_three.py)，如下所示：

```
python convert_obj_three.py -i infile.obj -o outfile.js 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-18T10:11:39.743

使用搅拌机。

[搅拌机 3D](http://www.blender.org/)

然后安装这个插件：

[三.js 导出器](https://github.com/mrdoob/three.js/tree/master/utils/exporters/blender)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-10-02T03:05:49.497

那是一个相当晚的回复。我编写了一个转换器来读取 obj 文件并转换为 ThreeJS 支持的 JSON 格式： [https ://github.com/theMaxscriptGuy/Windows_Programs/tree/master/Obj_To_ThreeJS](https://github.com/theMaxscriptGuy/Windows_Programs/tree/master/Obj_To_ThreeJS)

将所有文件下载为 zip 并运行 converter.exe ...

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-06-28T14:37:14.767

注意：python 转换器脚本已更新为基于 js 的工具[https://github.com/mrdoob/three.js/tree/dev/utils/converters](https://github.com/mrdoob/three.js/tree/dev/utils/converters)

用法：

`node obj2three.js model.obj`

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-11-25T19:28:10.220

使用`[convert_obj_three.py][1]`脚本将 3ds max 模型导出到 three.js 时，可以在 cmd promt 中使用以下命令实现一定程度的自动化：

```
cd C:\Python27 &
python convert_obj_three.py -i _obj\chromeBand.obj -o _json\chromeBand.js &
python convert_obj_three.py -i _obj\controlPanelCover.obj -o _json\controlPanelCover.js 
```

我编写了一个 3ds max 脚本，它将打印多个模型的 phyton 脚本命令，以及一个带有模型相对 URL 和坐标的 json。json 对于将多个模型放置在场景中的正确位置很有用。

```
(
local inputPath = "D:\Archive\Work\_Dev\_Convert\Obj\\"
local outputPath = "C:\Server\htdocs\viewer\assets\models\my-project\\"
local jsonPath = "assets/models/my-project/"
local myListEntry = "\n"

for o in selection do
    (
        myListEntry +=
        "\"" + o.name + "\": {\n" +
            "\t\"url\": \"" + jsonPath + o.name + ".js\",\n" +
            "\t\"position\": {\n" +
                "\t\t\"x\": \"" + o.position.x as string + "\",\n" +
                "\t\t\"y\": \"" + o.position.z as string + "\",\n" +
                "\t\t\"z\": \"" + (o.position.y * -1) as string + "\"\n" +
            "\t}\n" +
        "},\n"
    )

myListEntry += "\n\n\n=== Run this using cmd promt: ===\n"
myListEntry += "cd C:\Python27 &\n"

for o in selection do
    (
        myListEntry += "python D:\Archive\Work\_Dev\_Convert\convert_obj_three.py -i " + 
            inputPath + o.name + ".obj -o " + 
            outputPath + o.name + ".js & \n"
    )

myListEntry += "exit \n"
print myListEntry
actionMan.executeAction 0 "40472"
) 
```

*   创建一个新的 txt 文件，将其重命名为`coordinates.mcr`并将文件拖放到 3ds max 窗口中。它将自动打开 MaxScript Listener 窗口并打印结果。将python命令复制粘贴到cmd中。使用打印的 json 在项目中批量加载模型。
*   此外，可以将脚本分配给 3dsMax 工具栏中的按钮，以便快速访问。
*   上面的脚本可以使用进一步的调整。不是最好的解决方案，但至少它可以加快速度，希望如此。
*   使用 Jos Balcaen 的脚本[批量导出 obj 文件](http://josbalcaen.com/scripts/max/batch-exportimport/)(3ds Max)

**编辑：**

在对脚本进行了一些试验后，我做了一个设置，允许我在 1 分钟内从 3ds max 导出我的模型（超过 20 个）以打开浏览器选项卡。当然，您可能需要根据自己的喜好调整 json 输出。希望你会发现这很有用。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-07-24T16:23:54.957

创建一个命名`conversion.py`为以下内​​容的 Python 文件：[单击此处查看](https://github.com/timoxley/threejs/blob/master/utils/exporters/obj/convert_obj_three.py)。

然后在您的终端中运行此命令：

```
python conversion.py -i file.obj -o file.js 
```

# ios - Urban Airship 收不到富推

> ID：15887740
> 
> 赞同：4
> 
> 时间：2013-04-08T19:53:43.603
> 
> 标签：ios, urbanairship.com

我在使用 Urban Airship 时遇到问题，特别是为 Rich Push 注册用户。我有以下代码`AppDelegate`

```
//Create Airship options dictionary and add the required UIApplication launchOptions
NSMutableDictionary *takeOffOptions = [NSMutableDictionary dictionary];
[takeOffOptions setValue:launchOptions forKey:UAirshipTakeOffOptionsLaunchOptionsKey];

[UAirship takeOff:takeOffOptions];
[[UAPush shared] resetBadge];

// Register for remote notfications with the UA Library. This call is required.
[[UAPush shared] registerForRemoteNotificationTypes:(UIRemoteNotificationTypeBadge |
                                                     UIRemoteNotificationTypeSound |
                                                     UIRemoteNotificationTypeAlert)];

- (void)application:(UIApplication *)application  didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)deviceToken {
// Updates the device token and registers the token with UA.
NSString *myAlias = @"Your Alias";
[UAPush shared].alias = myAlias;    
[[UAPush shared] registerDeviceToken:deviceToken];
} 
```

这允许我的代码在 Device Tokens 下注册设备，并为 Rich Push 自动生成用户。但是，别名和设备令牌没有传递给 Rich Push 用户，我怀疑这不允许 UA 向我的设备发送丰富的推送。

我错过了什么？我浏览了 iOS 推送的文档并拥有所有相同的代码。任何帮助，将不胜感激！

更新：

所以我创建了一个用户点击`/api/user API`端点并暴力破解别名/device_token。但是，我的设备仍然没有得到丰富的推送。我去`/api/user/user_id`验证了徽章 > 0，所以 Urban Airship 正在尝试发送这些丰富的推送。有人知道它为什么会丢失吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T09:59:29.340

在我看来，丰富的推送记录很差。我自己对此感到困惑，并联系了 UA 支持。他们在这里向我推荐了收件箱示例：[https ://github.com/urbanairship/ios-library](https://github.com/urbanairship/ios-library)

研究这个示例是了解如何在 iOS 端实现 Rich Push 的良好开端。

我还在这里找到了 UA 类的参考文档：http: [//docs.urbanairship.com/ios-lib/](http://docs.urbanairship.com/ios-lib/)

浏览每个 UAInbox* 类。文档还可以（不是很好）。

我希望他们有一个关于如何实现 Rich Push 的概述文档，就像他们解释如何实现推送通知一样。我敢肯定，这将为许多开发人员节省大量时间...

贾德

# mysql - 重置数据库无法删除或更新父行：外键约束失败

> ID：15887745
> 
> 赞同：0
> 
> 时间：2013-04-08T19:54:05.180
> 
> 标签：mysql, reference, foreign-keys

我有一个由包含列表（物种）的表形成的 sql 文件，然后是一个引用该表的主表（动物），例如：

```
DROP    TABLE IF EXISTS `tbl_species`; 
CREATE  TABLE `tbl_species` (
    specie                  VARCHAR(10) PRIMARY KEY
) ENGINE=InnoDB             DEFAULT CHARSET=utf8;
INSERT INTO `tbl_species`   VALUES ('dog');
INSERT INTO `tbl_species`   VALUES ('cat');
INSERT INTO `tbl_species`   VALUES ('bird');

DROP    TABLE IF EXISTS `tbl_animal`; 
CREATE TABLE `tbl_animal` (
    id_animal   INTEGER     NOT NULL PRIMARY KEY AUTO_INCREMENT,
    name        VARCHAR(25) NOT NULL DEFAULT "no nombre",
    specie      VARCHAR(10) NOT NULL DEFAULT "dog",
    FOREIGN KEY (specie)        REFERENCES `tbl_species`     (specie),
    CONSTRAINT `uc_Info_Animal` UNIQUE (`id_animal`)           
) ENGINE=InnoDB                 DEFAULT CHARSET=utf8 AUTO_INCREMENT=1; 
```

这适用于[sqlfiddle](http://sqlfiddle.com/#!2/6597c)没有问题，但是当我在服务器上执行 sql 文件时，出现以下错误：

```
Cannot delete or update a parent row: a foreign key constraint fails
Statement:
DROP TABLE IF EXISTS `tbl_species` 
```

你能告诉如何解决这个问题，目前我必须删除数据库并重新创建它......所以drop语句导致问题......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T20:03:04.217

您收到`Cannot delete or update`错误的原因是该`tbl_animal`表已经存在。需要以相反的创建顺序删除表：

```
DROP    TABLE IF EXISTS `tbl_animal`; 
DROP    TABLE IF EXISTS `tbl_species`; 

CREATE  TABLE `tbl_species` (
    specie                  VARCHAR(10) PRIMARY KEY
) ENGINE=InnoDB             DEFAULT CHARSET=utf8;
INSERT INTO `tbl_species`   VALUES ('dog');
INSERT INTO `tbl_species`   VALUES ('cat');
INSERT INTO `tbl_species`   VALUES ('bird');

CREATE TABLE `tbl_animal` (
    id_animal   INTEGER     NOT NULL PRIMARY KEY AUTO_INCREMENT,
    name        VARCHAR(25) NOT NULL DEFAULT "no nombre",
    specie      VARCHAR(10) NOT NULL DEFAULT "dog",
    FOREIGN KEY (specie)        REFERENCES `tbl_species`     (specie),
    CONSTRAINT `uc_Info_Animal` UNIQUE (`id_animal`)           
) ENGINE=InnoDB                 DEFAULT CHARSET=utf8 AUTO_INCREMENT=1; 
```

或者，您可以在命令前加上：

```
SET FOREIGN_KEY_CHECKS=0; 
```

这将禁用当前会话的外键检查。

要重新启用外键检查，请在之后添加以下命令：

```
SET FOREIGN_KEY_CHECKS=1; 
```

[请参阅http://sqlfiddle.com/#!2/b6727](http://sqlfiddle.com/#!2/b6727)上的工作示例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T20:22:46.640

您要么必须在删除依赖表之前删除外键表，要么在每次删除表时删除并重新创建外键。

试试这个，它每次都会删除并重新创建表：（我的 SQL Server 版本是 2012）

```
IF OBJECT_ID('dbo.tbl_animal', 'U') IS NOT NULL
  DROP TABLE dbo.tbl_animal
IF OBJECT_ID('dbo.tbl_species', 'U') IS NOT NULL
  DROP TABLE dbo.tbl_species

CREATE TABLE [dbo].[tbl_species](
    [specie] [varchar](10) NOT NULL,
 CONSTRAINT [PK_tbl_species] PRIMARY KEY CLUSTERED 
(
    [specie] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]

GO

INSERT INTO tbl_species   VALUES ('dog');
INSERT INTO tbl_species   VALUES ('cat');
INSERT INTO tbl_species   VALUES ('bird');

CREATE TABLE [dbo].[tbl_animal](
    [id_animal] [int] IDENTITY(1,1) NOT NULL,
    [name] [varchar](25) NOT NULL,
    [specie] [varchar](10) NOT NULL,
 CONSTRAINT [PK_tbl_animal] PRIMARY KEY CLUSTERED 
(
    [id_animal] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]

GO
ALTER TABLE [dbo].[tbl_animal] ADD  CONSTRAINT [DF_tbl_animal_name]  DEFAULT ('no nombre') FOR [name]
GO
ALTER TABLE [dbo].[tbl_animal] ADD  CONSTRAINT [DF_tbl_animal_specie]  DEFAULT ('dog') FOR [specie]
GO
ALTER TABLE [dbo].[tbl_animal]  WITH CHECK ADD  CONSTRAINT [FK_tbl_animal_tbl_species] FOREIGN KEY([specie])
REFERENCES [dbo].[tbl_species] ([specie])
GO
ALTER TABLE [dbo].[tbl_animal] CHECK CONSTRAINT [FK_tbl_animal_tbl_species]
GO 
```

如果你想试一试，这里有你可以使用的脚本（当表已经存在时）：删除约束，然后是表：

```
ALTER TABLE [dbo].[tbl_animal]  drop CONSTRAINT [FK_tbl_animal_tbl_species] 
GO
IF OBJECT_ID('dbo.tbl_species', 'U') IS NOT NULL
  DROP TABLE dbo.tbl_species
go 
```

删除约束，然后重新创建它：

```
ALTER TABLE [dbo].[tbl_animal]  drop CONSTRAINT [FK_tbl_animal_tbl_species] 
GO
ALTER TABLE [dbo].[tbl_animal]  WITH CHECK ADD  CONSTRAINT [FK_tbl_animal_tbl_species] FOREIGN KEY([specie])
REFERENCES [dbo].[tbl_species] ([specie])
GO 
```

有了这些，您可以修改脚本，这样您就不必每次都删除动物表。

# spring-mvc - @ActionMapping、@RequestMapping、@Rendermapping 的区别

> ID：15887753
> 
> 赞同：6
> 
> 时间：2013-04-08T19:54:32.650
> 
> 标签：spring-mvc, annotations, spring-portlet-mvc

和之间的区别对我`@RequestMapping`来说不是很清楚。似乎以上所有最终都将请求 url 映射到控制器中的实际方法。那么区别是什么呢？什么能做不能做？`@ActionMapping``@RenderMapping``@Rendermapping``@Requestmapping`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-13T20:07:01.570

`@RequestMapping`允许您指定模式（编辑、视图等）和许多其他选项（尽管不是窗口状态）。`@RenderMapping`允许您仅指定请求参数和窗口状态（MAXIMISED、NORMAL 等），并且是指示 Render 请求映射的便捷方式。您可以在同一个类上使用这两个注释。例如，您可以在类级别使用 RequestMapping 进行注释以表明它为 VIEW 模式的请求提供服务，然后在方法级别使用`@RenderMapping`（或`@ActionMapping`或`@ResourceMapping`）注释特定请求的处理程序。

现在谈谈不同类型的请求可能会有所帮助。

呈现请求用于呈现 HTML，因此通常您会显示 JSP 或其他类型的视图。

动作请求用于执行诸如修改数据、上传文件等动作。需要注意的是，每个动作请求后面都有一个渲染请求。因此，如果您的页面上有两个 portlet，并且您向 portlet 发出一个操作请求，它将收到一个操作请求，然后是一个呈现请求。Portlet 2 将只接收一个呈现请求。

还有另一种类型的请求，你没有提到它也很有趣

资源请求可用于呈现其他内容类型。AJAX 是资源请求的常见用例，因为它们适用于返回 JSON 或 XML。

事件请求也存在并可用于portlet 间通信。

我可以推荐[Spring portlet 文档](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/portlet.html)。尽管它们没有很好地涵盖注释，但它们确实解释了不同的请求类型，您应该能够使用该信息来计算注释。

**注意。**如果您愿意，可以使用它`@RequestMapping`来定义渲染、操作和资源请求，但是`@RenderMapping`，`@ActionMapping`或者`@ResourceMapping`提供更方便的方式来执行此操作。

# php - 如何在 MySQL 数据库中保留 HTML 格式？

> ID：15887754
> 
> 赞同：4
> 
> 时间：2013-04-08T19:54:34.917
> 
> 标签：php, html, mysql, html-lists

我想在我的数据库中存储一些文本，其中包含几个段落和几个超链接。

例如，代码将如下所示：

```
<p>Welcome to the show. </p>

<p>Here you will find these things: </p>

<ol>
   <li>Thing one</li>
   <li>Thing Two</li>
</ol>

<p>Visit us at <a href="www.google.com">Google.com</a> if you have any questions. 
```

基本上我想将此代码块存储在一个表中，然后当我检索它时能够回显它并保留格式。我该怎么做呢？我的表设置为 TEXT 字段条目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T20:11:04.503

TEXT 是文本 - 在 MySQL 中，内容不会以任何方式进行编辑或操作。你放在那里的东西将是你得到的东西，没有任何变化。

所以你很好 - 使用 TEXT。

# .net - 托盘图标应用程序标题可以在运行时更改吗？

> ID：15887756
> 
> 赞同：1
> 
> 时间：2013-04-08T19:54:44.797
> 
> 标签：.net, winforms, trayicon, assemblyinfo

在用于自定义托盘图标的控制面板小程序中，显示了应用程序的名称。在 WinForms 应用程序中，此名称可能会`AssemblyTitle`在编译时随值更改，如镜像所显示。

![在此处输入图像描述](https://i.stack.imgur.com/4bonc.png)

是否可以在运行时更改此值，可能使用表单属性或其他方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:55:57.090

正如您所说，此对话框中显示的名称是可执行文件给出的程序名称。在 .NET 的世界中，它作为`AssemblyTitle`属性公开。

但这在运行时是只读的，因为它直接编译到您的可执行文件中，既作为托管元数据，也作为非托管 Win32 资源数据。不重新编译就无法更改它。

所以你的问题的简单答案是否定的。

但我真的无法弄清楚你在这里想要完成什么，更不用说为什么了。你在回答罗伯特哈维的问题时这么说：

> 我正在尝试品牌化和本地化该价值。我宁愿将其定义为配置选项，也不愿要求我更改构建过程。

本地化资源和运行时配置选项之间存在很大差异。您仍然可以在编译时本地化该值，但这需要对您的构建过程进行一些更改。如果你真的需要这个，我不知道为什么这很重要。一次更改构建过程比编写和维护在运行时动态修改可执行文件的代码要容易得多。

有关如何着手完成此任务的详细信息，请参阅这些问题：

*   [本地化 AssemblyInfo.cs](https://stackoverflow.com/questions/13752144/localize-assemblyinfo-cs)
*   [在构造函数c#中设置程序集标题](https://stackoverflow.com/questions/14246023/set-assembly-title-in-constructor-c-sharp)

当然，如果我没有指出本地化应用程序的*名称*是一件非常奇怪的事情，那我就失职了。如果我有一个英文名为“Text Editor”的应用程序，我不希望在瑞典语版本中名称为“Textredigerare”。缺乏一致性*会破坏*我的品牌，而不是改善它。除非您正在使用一堆实用程序创建操作系统，否则用户会通过其名称知道您的程序。选择一个名字——任何语言——并坚持下去。

# networking - 使用名称而不是 IP 地址连接到服务器

> ID：15887757
> 
> 赞同：-4
> 
> 时间：2013-04-08T19:54:47.630
> 
> 标签：networking, ip, wamp

我的计算机上运行着一个 wamp 服务器。

我可以通过运行 ip 地址 192.168.1.108（这是无线网络连接的 ip）在 Safari 上使用我的 iPad 连接到服务器。

平板电脑和计算机都连接到 Cisco 路由器。

我想知道如何使用名称而不是 IP 地址 192.168.1.108 将平板电脑连接到服务器。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T19:58:40.160

您必须使用名称解析器；选项是：

*   操作系统上的[主机文件（所有设备）](http://en.wikipedia.org/wiki/Hosts_%28file%29)
*   [域名系统](http://en.wikipedia.org/wiki/Domain_Name_System)
*   其他解析器（例如 WINS）

对于这样一个小环境，最可行的方法是配置 Hosts 文件。

# linux - 包括 OpenCV 和 CMake Linux

> ID：15887759
> 
> 赞同：1
> 
> 时间：2013-04-08T19:54:54.227
> 
> 标签：linux, opencv, makefile, cmake

昨天我制作了一个“CMakeLists.txt”文件，其中包含以下内容。

```
cmake_minimum_required(VERSION 2.8)
project( HMirror )
find_package( OpenCV REQUIRED )
add_executable( HMirror HMirror.cpp )
target_link_libraries( HMirror ${OpenCV_LIBS} ) 
```

它工作得很好，我没有改变任何东西......（真的！！！！）

今天我想在我的代码中添加一些额外的功能，我在我的 Linux Shell 上得到了以下输出。

```
HMirror.cpp:(.text+0x56): undefined reference to `cv::imread(std::string const&, int)'
HMirror.cpp:(.text+0x191): undefined reference to `cv::namedWindow(std::string const&, int)'
HMirror.cpp:(.text+0x1f1): undefined reference to `cv::namedWindow(std::string const&, int)'
HMirror.cpp:(.text+0x268): undefined reference to `cv::imshow(std::string const&, cv::_InputArray const&)'
HMirror.cpp:(.text+0x2df): undefined reference to `cv::imshow(std::string const&, cv::_InputArray const&)' 
```

自昨天以来，我没有更改图书馆的目的地，也没有更改代码。所以我想知道为什么它似乎不再起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T09:06:40.910

尝试明确编写要链接的库。在 Linux 上，这将是`opencv_core`, `opencv_highgui`, `opencv_imgproc`, 等等...

`/usr/local/lib`如果您从源代码编译库，则在从名称中减去 lib 前缀后，将在 中找到库名称。

# java - 无法加载给定的 url 和链接 css 文件

> ID：15887760
> 
> 赞同：1
> 
> 时间：2013-04-08T19:55:02.857
> 
> 标签：java, jsp

```
CMS    
-webcontent
--css
---style.css
--images
---frontpage.jpg
-index.jsp 
```

索引.jsp

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<link rel="stylesheet" type="text/css" href="WebContent/images/frontpage.jpg" media="screen" />

</head>
<body>
<div id="wrap">
<center>

</center>
<img alt="" src="WebContent/images/frontpage.jpg" />

</div>

</body>
</html> 
```

样式.css

```
@CHARSET "ISO-8859-1";

#wrap{ 
width: 1100px; 
background:#FFFFE8;
margin-top: auto;
margin-right: auto;
margin-bottom: 0px;
margin-left: auto;
} 
```

请帮助我，我坚持这个

无法显示图像并将 css 链接到索引页面

不知道怎么了

我尝试了许多不同的方法，但无法解决这个问题

# ruby - 如何在机架会话（Sinatra）中设置会话 [：过期]

> ID：15887763
> 
> 赞同：2
> 
> 时间：2013-04-08T19:55:11.523
> 
> 标签：ruby, session, rack

您可以在设置会话引擎时为 Sinatra 应用程序设置会话到期时间：

```
 use Rack::Session::Cookie, :expire_after => 60*60*3, :secret => 'xxxx' 
```

但我想为某些用户启用更长的会话。说两周。

```
 session[:expires] = ?? #how and where do I put this.? 
```

我是否需要在每次通话之前进行设置（之前？）还是一次就足够了？session[:expires] 设置正确吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-20T00:01:54.567

首先确保您没有`expire_after`使用命令设置值`use Rack::Session::Cookie`，然后放入`use Rack::Session::Cookie`您的`configure`块中。接下来创建一个“到期时间”变量（`expiry_time`例如本例）或设置`config`. 现在对于每个用户，当他们登录时，检索他们的`expiry_time`设置并发出以下命令：

```
env['rack.session.options'].merge! expire_after: expiry_time 
```

那应该做你所要求的。

如果这对您不起作用，请尝试将`env...merge!`命令放在一个`before`块中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T15:52:23.010

我试图通过`after`Sinatra 中的过滤器来做到这一点，但它没有用，我猜它会在`after`过滤器运行后设置会话，所以我敲开了一个快速的 Rack 过滤器，它似乎可以工作。

```
require 'sinatra'

class SessionExpiryModifier
  def initialize(app,options={})
    @app,@options = app,options
  end
  def call(env)
    warn env["rack.session.options"].inspect
    t = Time.now.to_i.even? ? 10 : 60
    env["rack.session.options"].merge! :expire_after => 60 * 60 * t
    @app.call env
  end
end

configure do
  use Rack::Session::Cookie,
  :expire_after => 60*60*3, 
  :secret => 'xxxx' * 10
  use SessionExpiryModifier
end

get "/" do
  session[:usr] = Time.now
  env["rack.session.options"].inspect
end 
```

但是，这使得从 Sinatra 应用程序中获取条件到 Rack 过滤器来决定采用哪个分支变得更加困难，但这取决于您的条件。也许将某些内容注入到过滤器可以读取的标题中以做出决定。

希望有帮助。

# javascript - 如何为分区固定垂直位置和绝对水平位置

> ID：15887765
> 
> 赞同：0
> 
> 时间：2013-04-08T19:55:15.103
> 
> 标签：javascript, css, html

我正在尝试垂直和绝对水平地修复标题。我正在使用以下代码。

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link href="style.css" rel="stylesheet" type="text/css">
<script src="header_position.js" type="text/javascript"></script>
</head> 
```

身体标签

```
$(window).scroll(function(event) {
$("#headerpos").css("margin-left", 0-$(document).scrollLeft());
});

#headerpos{
position:fixed;
border-top:8px solid #8DC540;
background:#1E415B;
width:956px;
padding-bottom:7px;
margin:auto;
z-index:100;
 } 
```

我尝试使用 class attrb in`div`以及 id attrb

```
.header{
position:fixed;
border-top:8px solid #8DC540;
background:#1E415B;
width:956px;
padding-bottom:7px;
margin:auto;
z-index:100;
 } 
```

也尝试通过删除`margin:auto`;

我从链接[Position a Div "Fixed" Vertically and "Absolute" Horizo​​ntally inside a "Position:Relative" Container Div](https://stackoverflow.com/questions/8327093/position-a-div-fixed-vertically-and-absolute-horizontally-within-a-position)

但它不起作用，如果我去检查元素，在 Chrome 中我会看到一个错误：

> 未捕获的引用错误：$ 未定义（在第 1 行）

请帮忙。这很重要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T20:26:28.160

如果您在 css 中使用固定定位，则不需要 js 将 div 水平居中对齐。尝试这个。

```
.header{
   position:fixed;
   border-top:8px solid #8DC540;
   background:#1E415B;
   width:956px;
   padding-bottom:7px;
   margin-left:-478px;
   left:50%;
   z-index:100;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T19:57:08.143

您需要在页面头部包含 jQuery，如下所示：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="header_position.js" type="text/javascript"></script> 
```

此外，请务必将您的 jQuery 包装在一个文档就绪调用中：

```
$(document).ready(function () {
    $(window).scroll(function (event) {
        $("#headerpos").css("margin-left", 0 - $(document).scrollLeft());
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T19:57:39.663

如果`$`未定义，则需要 jQuery。只包括

`<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>`在另一个脚本之前。

我还建议将两个`script`标签都放在页面底部，以使其加载更快。

# php - 无法在 Facebook 上获取我的好友列表的在线状态

> ID：15887770
> 
> 赞同：5
> 
> 时间：2013-04-08T19:55:30.367
> 
> 标签：php, facebook-graph-api

这是我的fql：

```
$fql = "SELECT uid, name, online_presence, status 
         FROM user 
        WHERE uid IN ( SELECT uid2 FROM friend WHERE uid1 = '".$user_id."') "; 
```

该`online_presence`值始终返回`null`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T20:10:19.140

您的查询中有错误...

只需更换

```
WHERE uid IN 
```

到

```
WHERE 2 IN 
```

**询问**

```
$fql = "SELECT uid, name, online_presence, status 
         FROM user 
        WHERE 2 IN ( SELECT uid2 FROM friend WHERE uid1 = '".$user_id."') "; 
```

[SQLFiddle 演示](http://www.sqlfiddle.com/#!2/ea178/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-27T16:54:09.400

如果您尝试在没有 Facebook 访问令牌的情况下查询 Facebook，您将无法检索`online_presence`键值。例如：

```
SELECT uid, name, online_presence, status FROM user WHERE uid IN (4,5,6) 
```

如果没有设置访问令牌，则返回：

```
{
  "data": [
    {
      "uid": 4, 
      "name": "Mark Zuckerberg", 
      "online_presence": "", 
      "status": null
    }, 
    {
      "uid": 5, 
      "name": "Chris Hughes", 
      "online_presence": "", 
      "status": null
    }, 
    {
      "uid": 6, 
      "name": "Dustin Moskovitz", 
      "online_presence": "", 
      "status": null
    }
  ]
} 
```

然而，使用访问令牌集，返回：

```
{
  "data": [
    {
      "uid": 4, 
      "name": "Mark Zuckerberg", 
      "online_presence": "offline", 
      "status": null
    }, 
    {
      "uid": 5, 
      "name": "Chris Hughes", 
      "online_presence": "offline", 
      "status": null
    }, 
    {
      "uid": 6, 
      "name": "Dustin Moskovitz", 
      "online_presence": "offline", 
      "status": null
    }
  ]
} 
```

确保您设置了有效的 Facebook 访问令牌（在 PHP 中使用官方 Facebook SDK，如下所示：）`$facebook->setAccessToken($your_access_token);`并具有访问数据的适当权限。

权限可能是`null`两个响应中返回“状态”的原因。我和扎克伯格先生不是朋友。

# xml - 在没有 XmlInclude 的情况下序列化数据

> ID：15887772
> 
> 赞同：0
> 
> 时间：2013-04-08T19:55:38.027
> 
> 标签：xml, serialization, xml-serialization

我试图在我创建的存储库类中引用我的派生类。

这是代码：

```
[XmlInclude(typeof(Case1))]
[XmlInclude(typeof(Case2))]
[XmlInclude(typeof(Case3))]
public class FileRepo: IFileRepo
{
    public string Name { set; get; }
    public DateTime Time { get; set; }
    public bool Correct{ get; set; }

    public void SerializetoXml(IFileRepo repo)
    {

        var filename = string.Format("{0}__{1}", DateTime.Now.ToString("yyMMddhhss"), "Log.xml");
        var path =
            @"C:\Temp;
        if (!Directory.Exists(path))
            Directory.CreateDirectory(path);
        var fullpath = Path.Combine(path, filename);

        var serializer = new XmlSerializer((typeof(FileRepo))); 
        var textwriter = new StreamWriter(fullpath);

        serializer.Serialize(textwriter, repo);
        textwriter.Close();  
    }
} 
```

基本上，我试图“引用”所有这些类，而不必为每个类添加 XmlInclude。请列出解决此问题的任何示例或参考。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T20:13:50.310

您可以将要“包含”的类型传递给`XmlSerializer`构造函数，如下所示。

```
public class StackOverflow_15887772
{
    //[XmlInclude(typeof(Case1))]
    //[XmlInclude(typeof(Case2))]
    //[XmlInclude(typeof(Case3))]
    public class FileRepo
    {
        public string Name { set; get; }
        public DateTime Time { get; set; }
        public bool Correct { get; set; }
    }

    public class Case1 : FileRepo { public string Data { get; set; } }
    public class Case2 : FileRepo { public string Data { get; set; } }
    public class Case3 : FileRepo { public string Data { get; set; } }

    public static void SerializetoXml(FileRepo repo)
    {
        MemoryStream ms = new MemoryStream();
        var serializer = new XmlSerializer(typeof(FileRepo), new Type[] { typeof(Case1), typeof(Case2) });
        serializer.Serialize(ms, repo);
        Console.WriteLine("Serialized type {0}:", repo.GetType().Name);
        Console.WriteLine(Encoding.UTF8.GetString(ms.ToArray()));
    }

    public static void Test()
    {
        SerializetoXml(new Case1 { Data = "case 1", Correct = true, Name = "goo", Time = DateTime.UtcNow });
        SerializetoXml(new Case2 { Data = "case 2", Correct = true, Name = "goo", Time = DateTime.UtcNow });
        try
        {
            // this will fail, Case3 isn't passed to the XmlSerializer .ctor
            SerializetoXml(new Case3 { Data = "case 3", Correct = true, Name = "goo", Time = DateTime.UtcNow });
        }
        catch (Exception ex)
        {
            Console.WriteLine("{0}: {1}", ex.GetType().FullName, ex.Message);
            Exception inner = ex.InnerException;
            while (inner != null)
            {
                Console.WriteLine("    {0}: {1}", inner.GetType().FullName, inner.Message);
                inner = inner.InnerException;
            }
        }
    }
} 
```

我知道这很旧，但我使用此处的信息创建了一个适用于我的通用方法，如下所示：

```
 public static string toXML<T>(this T obj)
    {
        using (StringWriter writer = new StringWriter())
        {
            XmlSerializer serializer = new XmlSerializer(typeof(T), new Type[] { obj.GetType() });
            serializer.Serialize(writer, obj);
            return writer.ToString();
        }
    } 
```

# javascript - Javascript 选择表格中的单元格套索样式

> ID：15887782
> 
> 赞同：1
> 
> 时间：2013-04-08T19:55:59.027
> 
> 标签：javascript, jquery

我真的是 Javascript 的新手，并且在创建 Lasso 样式的表格选择工具时遇到了麻烦。

基本上，我希望能够将鼠标拖到表格上并突出显示该区域中的所有单元格，以便稍后对选定的单元格执行某些操作。

这是我要实现的目标的一个非常错误的小提琴。 [http://jsfiddle.net/kooldave98/ad5Z9/](http://jsfiddle.net/kooldave98/ad5Z9/)

```
var element = $("#rectangle");
// on mousedown
$(window).mousedown(function (e1) {
    // first move element on mouse location
    element.show().css({ top: e1.pageY, left: e1.pageX });
    // resize that div so it will be resizing while moouse is still pressed
    var resize = function (e2) {
        // you should check for direction in here and moves with top or left
        element.width(e2.pageX - e1.pageX);
        element.height(e2.pageY - e1.pageY);
    };
    $(window).mousemove(resize);
    // and finally unbind those functions when mouse click is released
    var unbind = function () {
        $(window).unbind(resize);
        $(window).unbind(unbind);
    };
    $(window).mouseup(unbind);
}); 
```

我需要能够在表格中向任何方向移动选择工具，然后使用“ctrl”键选择其他单元格。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T20:21:43.667

您可以使用 jQuery UI [Selectable](http://api.jqueryui.com/selectable/)小部件来执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-22T16:56:56.017

具体来说，一旦你包含了 jQuery UI Selectable 小部件，你就可以做到

```
$('table').selectable(
    filter: 'td',      // Ensure elements are selected by table cell
); 
```

然后在你的 CSS 中，你有类`.ui-selecting`，`.ui-selected`你可以设置你想要的高亮颜色。例如

```
.ui-selecting {
    background: red;
}
.ui-selected {
    background: blue;
} 
```

您还将有一些您可能不想要的默认选择行为。这是我摆脱它们的方法：

```
$(document).ready(function() {
    $('table').mousedown(function(event) {
        return false;
    });
}); 
```

尽管希望您有更具体的选择，而不仅仅是`table`. :)

# sql-server - 调用 CLR 函数时出现 SecurityException 错误

> ID：15887783
> 
> 赞同：5
> 
> 时间：2013-04-08T19:56:03.073
> 
> 标签：sql-server, c#-4.0

我在 C# 中编写了一个简单的用户定义函数，它获取 IP 地址并针对它返回主机名，代码如下：

```
public partial class UserDefinedFunctions
{
    [Microsoft.SqlServer.Server.SqlFunction]
    public static SqlString getname(String ipAddress)
    {
        System.Data.SqlClient.SqlClientPermission pSql = new SqlClientPermission(System.Security.Permissions.PermissionState.Unrestricted);
        pSql.Assert();

        System.Security.PermissionSet psql1 = new PermissionSet(System.Security.Permissions.PermissionState.Unrestricted);
        psql1.Assert();

        System.Net.DnsPermission psql = new DnsPermission(System.Security.Permissions.PermissionState.Unrestricted);
        psql.Assert();

        System.Security.Permissions.SecurityPermission psql2 = new SecurityPermission(System.Security.Permissions.PermissionState.Unrestricted);
        psql2.Assert();

        IPHostEntry host = Dns.GetHostEntry(ipAddress);
        return new SqlString(host.HostName.ToString());
    }
} 
```

现在我已经部署了它，但是当我尝试在 sql 中调用这个函数时：select dbo.getname('10.10.10.10')

它返回此错误：

```
Msg 6522, Level 16, State 2, Line 7
A .NET Framework error occurred during execution of user-defined routine or aggregate "getname": 
System.Security.SecurityException: Request for the permission of type 'System.Security.Permissions.SecurityPermission, mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' failed.
System.Security.SecurityException: 
   at System.Security.CodeAccessSecurityEngine.CheckNReturnSO(PermissionToken permToken, CodeAccessPermission demand, StackCrawlMark& stackMark, Int32 unrestrictedOverride, Int32 create)
   at System.Security.CodeAccessSecurityEngine.Assert(CodeAccessPermission cap, StackCrawlMark& stackMark)
   at System.Security.CodeAccessPermission.Assert()
   at UserDefinedFunctions.getname(String ipAddress) 
```

我已经爬过互联网，但什么也没找到。请建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-04-18T17:05:49.107

您必须创建具有外部访问权限集的程序集。程序集还必须经过签名或将数据库设置为可信任，并且数据库所有者授予外部访问程序集权限。不需要上面的权限和断言代码。

例如

```
using Microsoft.SqlServer.Server;
using System;
using System.Data.SqlTypes;
using System.Net;

public partial class UserDefinedFunctions
{
    [Microsoft.SqlServer.Server.SqlFunction(DataAccess=DataAccessKind.None)]
    public static SqlString getname(String ipAddress)
    {
        IPHostEntry host = Dns.GetHostEntry(ipAddress);
        return new SqlString(host.HostName);
    }
} 
```

将代码保存到 C:\resolve\resolve.cs 并编译...

```
C:\Windows\Microsoft.NET\Framework64\v4.0.30319\csc.exe /t:library /out:C:\resolve\resolve.dll C:\resolve\resolve.cs 
```

如果不是本地实例，请将 .dll 复制到服务器。然后创建对象...

```
USE [master]
GO
CREATE DATABASE [clr]; 
GO
ALTER AUTHORIZATION ON DATABASE::[clr] TO [sa]; 
GO
ALTER DATABASE [clr] SET TRUSTWORTHY ON; 
GO
USE [clr]; 
GO
CREATE ASSEMBLY [assResolve] FROM 'C:\resolve\resolve.dll' 
WITH PERMISSION_SET=EXTERNAL_ACCESS; 
GO
CREATE FUNCTION [fnGetHostName](@ipAddress nvarchar(255)) RETURNS nvarchar(255) 
AS EXTERNAL NAME [assResolve].[UserDefinedFunctions].[getname]; 
GO
SELECT [dbo].[fnGetHostName](N'8.8.8.8') as [host]; 
GO
USE [master] 
```

# c++ - 计数排序中的循环解释

> ID：15887784
> 
> 赞同：0
> 
> 时间：2013-04-08T19:56:04.947
> 
> 标签：c++, algorithm, sorting, loops

有人可以向我解释这个计数排序实现中第二个循环的目的吗？：

```
short c[RADIX_MAX] = {0};
int i;

for (i = 0; i < LEN_MAX; i++) {
    if (i == len)
        break;
    int ind = a.getElem(i); 
    c[ind]++;
}

for (i = 1; i < RADIX_MAX; i++) {
    if (i == radix)
        break;
    c[i] += c[i - 1];
}

for (i = LEN_MAX - 1; i >= 0; i--) {
    int j = i - LEN_MAX + len;      
    if (j < 0)
        break;
    int ind = a.getElem(j);
    short t = ind;
    ind = --c[ind];
    b.setElem(ind, t);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T20:06:02.793

计数排序的工作原理是根据元素本身的值计算要排序的每个元素的目标索引。涉及三种通行证：

*   在第一个循环中，计算每个元素：例如，我们的数组有六个“A”和两个“B”，五个“C”等等。

*   在第二个循环中，计算每个元素所在的索引。如果有六个“A”，那么第一个“B”需要进入索引 6（在基于 0 的索引中）。为了使代码更简单和排序稳定，计数排序所做的有点复杂。在第三个循环中，它将以*相反*的顺序遍历原始数组，因此在第二个循环中，它计算的不是给定值的*第一个*实例的索引，而是*最后一个*. 在我们上面的示例中，最后一个“A”需要出现在索引 5，但最后一个“B”需要出现在索引 6 (“A”s) + 2 (“B”s) - 1 (从零开始) =索引 7。因此，对于每个值，它都会计算该值的结束索引。它向前遍历计数数组，将先前计算的计数添加到当前计数。所以在我们的计数数组中，“A”的值保持在 6（没有前一个元素），“B”的值是 6+2=8（六个“A”+两个“B”），C 的值现在是 6+2+5=13（六个“A”+两个“B”+五个“C”），以此类推

*   在最后一个循环中，值被插入到它们的位置，随着我们的进行递减索引。所以最后一个“B”插入到索引 7 处，之前的那个插入到索引 6 处，依此类推。这保留了相等元素的原始顺序，使排序*稳定*，这对于基数排序至关重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T20:54:55.190

对于每个数字，我们计算它在排序数组中开始的索引。示例：
`array: 0 0 0 0 2 2 3 3 3 9 9`
`index: 0 1 2 3 4 5 6 7 8 9 10`
然后 c[0] = 0, c[1] = 4, c[2] = 4, c[3] = 6, c[4] = 9, ... c[9] = 9
。数字出现的排序数组取决于前一个数字的索引和前一个数字的数量。第二个循环计算这个。

# json - Jackson scala模块：序列化枚举失败

> ID：15887785
> 
> 赞同：1
> 
> 时间：2013-04-08T19:56:05.167
> 
> 标签：json, scala, playframework-2.0, jackson

有人可以解释一下为什么这不起作用吗？我将 Scala 模块与 Jackson 一起使用。

我的依赖是`"com.fasterxml.jackson.module" %% "jackson-module-scala" % "2.1.3"`

我的序列化器是：

```
import org.bson.types.ObjectId
import com.fasterxml.jackson.databind.module.SimpleModule
import com.fasterxml.jackson.databind.ObjectMapper
import com.fasterxml.jackson.module.scala.DefaultScalaModule

object CustomSerializer {

  val objectMapper = new ObjectMapper()

  val module = new SimpleModule("CustomSerializer")
  module.addSerializer(classOf[Throwable], new ThrowableSerializer)
  module.addSerializer(classOf[ObjectId], new ObjectIdSerializer)
  module.addDeserializer(classOf[ObjectId], new ObjectIdDeserializer)
  val scalaModule = DefaultScalaModule

  objectMapper.registerModule(scalaModule)
  objectMapper.registerModule(module)

  def serialize(obj: AnyRef): String = {
    objectMapper.writeValueAsString(obj)
  }

} 
```

没什么特别的，我只是将 Scala 模块添加到默认序列化程序 + MongoDB ObjectId 类的一些序列化程序。

* * *

这是我的简单测试代码：

```
@JsonIgnoreProperties(ignoreUnknown = true)
case class Relationship(
                         @Key("_id") id: ObjectId = new ObjectId,
                         fromUserId: ObjectId,
                         fromUserConfiguration: RelationshipConfiguration = new RelationshipConfiguration,
                         toUserId: ObjectId,
                         toUserConfiguration: RelationshipConfiguration = new RelationshipConfiguration,
                        status: RelationshipStatus.Value,
                         ) extends IdentifiableModel[Relationship] {

  ... some methods here
}

    case class SimpleCaseClass(string: String)
    case class SimpleCaseClassWithEnum(string: String,status: RelationshipStatus.Value)

    println(
      CustomSerializer.serialize( SimpleCaseClass("someString") )
    )
    println(
      CustomSerializer.serialize( SimpleCaseClassWithEnum("someString",RelationshipStatus.ACCEPTED) )
    )

    println(
      CustomSerializer.serialize(
        Relationship(
          fromUserId = new ObjectId("510f9398ed5080cb1265c8c2"),
          toUserId = new ObjectId("510f9398ed5080cb1265c8c2"),
          status = RelationshipStatus.ACCEPTED
        )
      )
    ) 
```

这将产生输出：

```
{"string":"someString"}
{"string":"someString","status":{"enumClass":"models.RelationshipStatus","value":"ACCEPTED"}}
[21:35:58] ERROR application - 

! @6e03dp6pp - Internal server error, for (GET) [/me] ->

play.api.UnexpectedException: Unexpected exception[RuntimeException: Cannot resolve type alias Value in models.RelationshipStatus]
    at play.core.ReloadableApplication$$anonfun$get$1$$anonfun$1.apply(ApplicationProvider.scala:142) ~[play_2.10.jar:2.1.0]
    at play.core.ReloadableApplication$$anonfun$get$1$$anonfun$1.apply(ApplicationProvider.scala:106) ~[play_2.10.jar:2.1.0]
    at scala.Option.map(Option.scala:145) ~[scala-library.jar:na]
    at play.core.ReloadableApplication$$anonfun$get$1.apply(ApplicationProvider.scala:106) ~[play_2.10.jar:2.1.0]
    at play.core.ReloadableApplication$$anonfun$get$1.apply(ApplicationProvider.scala:104) ~[play_2.10.jar:2.1.0]
    at scala.util.Either$RightProjection.flatMap(Either.scala:523) [scala-library.jar:na]
    at play.core.ReloadableApplication.get(ApplicationProvider.scala:104) ~[play_2.10.jar:2.1.0]
    at play.core.server.Server$class.sendHandler$1(Server.scala:56) [play_2.10.jar:2.1.0]
    at play.core.server.Server$$anonfun$getHandlerFor$4.apply(Server.scala:88) [play_2.10.jar:2.1.0]
    at play.core.server.Server$$anonfun$getHandlerFor$4.apply(Server.scala:87) [play_2.10.jar:2.1.0]
    at scala.util.Either$RightProjection.flatMap(Either.scala:523) [scala-library.jar:na]
    at play.core.server.Server$class.getHandlerFor(Server.scala:87) [play_2.10.jar:2.1.0]
    at play.core.server.NettyServer.getHandlerFor(NettyServer.scala:34) [play_2.10.jar:2.1.0]
    at play.core.server.netty.PlayDefaultUpstreamHandler.messageReceived(PlayDefaultUpstreamHandler.scala:103) [play_2.10.jar:2.1.0]
    at org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:75) [netty.jar:na]
    at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:565) [netty.jar:na]
    at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:793) [netty.jar:na]
    at org.jboss.netty.handler.codec.http.HttpContentDecoder.messageReceived(HttpContentDecoder.java:104) [netty.jar:na]
    at org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:75) [netty.jar:na]
    at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:565) [netty.jar:na]
    at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:793) [netty.jar:na]
    at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:296) [netty.jar:na]
    at org.jboss.netty.handler.codec.frame.FrameDecoder.unfoldAndFireMessageReceived(FrameDecoder.java:455) [netty.jar:na]
    at org.jboss.netty.handler.codec.replay.ReplayingDecoder.callDecode(ReplayingDecoder.java:538) [netty.jar:na]
    at org.jboss.netty.handler.codec.replay.ReplayingDecoder.messageReceived(ReplayingDecoder.java:437) [netty.jar:na]
    at org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:75) [netty.jar:na]
    at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:565) [netty.jar:na]
    at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:560) [netty.jar:na]
    at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:268) [netty.jar:na]
    at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:255) [netty.jar:na]
    at org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:84) [netty.jar:na]
    at org.jboss.netty.channel.socket.nio.AbstractNioWorker.processSelectedKeys(AbstractNioWorker.java:472) [netty.jar:na]
    at org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:333) [netty.jar:na]
    at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:35) [netty.jar:na]
    at org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:102) [netty.jar:na]
    at org.jboss.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:42) [netty.jar:na]
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) [na:1.7.0_01]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) [na:1.7.0_01]
    at java.lang.Thread.run(Thread.java:722) [na:1.7.0_01]
Caused by: java.lang.RuntimeException: Cannot resolve type alias Value in models.RelationshipStatus
    at org.scalastuff.scalabeans.sig.ScalaTypeCompiler.resolveTypeAlias(ScalaTypeCompiler.scala:202) ~[jackson-module-scala_2.10-2.1.3.jar:na]
    at org.scalastuff.scalabeans.sig.ScalaTypeCompiler.getTypeDecl$1(ScalaTypeCompiler.scala:159) ~[jackson-module-scala_2.10-2.1.3.jar:na]
    at org.scalastuff.scalabeans.sig.ScalaTypeCompiler.resolveScalaType(ScalaTypeCompiler.scala:167) ~[jackson-module-scala_2.10-2.1.3.jar:na]
    at org.scalastuff.scalabeans.sig.ScalaTypeCompiler$$anonfun$3.apply(ScalaTypeCompiler.scala:146) ~[jackson-module-scala_2.10-2.1.3.jar:na]
    at org.scalastuff.scalabeans.sig.ScalaTypeCompiler$$anonfun$3.apply(ScalaTypeCompiler.scala:145) ~[jackson-module-scala_2.10-2.1.3.jar:na]
    at scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:244) ~[scala-library.jar:na]
    at scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:244) ~[scala-library.jar:na]
    at scala.collection.mutable.ResizableArray$class.foreach(ResizableArray.scala:59) ~[scala-library.jar:na]
    at scala.collection.mutable.ArrayBuffer.foreach(ArrayBuffer.scala:47) ~[scala-library.jar:na]
    at scala.collection.TraversableLike$class.map(TraversableLike.scala:244) ~[scala-library.jar:na]
    at scala.collection.AbstractTraversable.map(Traversable.scala:105) ~[scala-library.jar:na]
    at org.scalastuff.scalabeans.sig.ScalaTypeCompiler.compile(ScalaTypeCompiler.scala:145) ~[jackson-module-scala_2.10-2.1.3.jar:na]
    at org.scalastuff.scalabeans.sig.ScalaTypeCompiler$$anonfun$1$$anonfun$apply$2.apply(ScalaTypeCompiler.scala:51) ~[jackson-module-scala_2.10-2.1.3.jar:na]
    at org.scalastuff.scalabeans.sig.ScalaTypeCompiler$$anonfun$1$$anonfun$apply$2.apply(ScalaTypeCompiler.scala:48) ~[jackson-module-scala_2.10-2.1.3.jar:na]
    at scala.Option$WithFilter.map(Option.scala:206) ~[scala-library.jar:na]
    at org.scalastuff.scalabeans.sig.ScalaTypeCompiler$$anonfun$1.apply(ScalaTypeCompiler.scala:48) ~[jackson-module-scala_2.10-2.1.3.jar:na]
    at org.scalastuff.scalabeans.sig.ScalaTypeCompiler$$anonfun$1.apply(ScalaTypeCompiler.scala:47) ~[jackson-module-scala_2.10-2.1.3.jar:na]
    at scala.Option.flatMap(Option.scala:170) ~[scala-library.jar:na]
    at org.scalastuff.scalabeans.sig.ScalaTypeCompiler$.classInfoOf(ScalaTypeCompiler.scala:47) ~[jackson-module-scala_2.10-2.1.3.jar:na]
    at org.scalastuff.scalabeans.PropertyDescriptor$$anonfun$4.apply(PropertyDescriptor.scala:225) ~[jackson-module-scala_2.10-2.1.3.jar:na]
    at org.scalastuff.scalabeans.PropertyDescriptor$$anonfun$4.apply(PropertyDescriptor.scala:224) ~[jackson-module-scala_2.10-2.1.3.jar:na]
    at scala.Option.flatMap(Option.scala:170) ~[scala-library.jar:na]
    at org.scalastuff.scalabeans.PropertyDescriptor$.apply(PropertyDescriptor.scala:224) ~[jackson-module-scala_2.10-2.1.3.jar:na]
    at com.fasterxml.jackson.module.scala.util.SmarterBeanIntrospector$.com$fasterxml$jackson$module$scala$util$SmarterBeanIntrospector$$createPropertyDescriptor$1(ScalaBeansUtil.scala:68) ~[jackson-module-scala_2.10-2.1.3.jar:na]
    at com.fasterxml.jackson.module.scala.util.SmarterBeanIntrospector$$anonfun$5$$anonfun$apply$5.apply(ScalaBeansUtil.scala:103) ~[jackson-module-scala_2.10-2.1.3.jar:na]
    at com.fasterxml.jackson.module.scala.util.SmarterBeanIntrospector$$anonfun$5$$anonfun$apply$5.apply(ScalaBeansUtil.scala:94) ~[jackson-module-scala_2.10-2.1.3.jar:na]
    at scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:244) ~[scala-library.jar:na]
    at scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:244) ~[scala-library.jar:na]
    at scala.collection.IndexedSeqOptimized$class.foreach(IndexedSeqOptimized.scala:33) ~[scala-library.jar:na]
    at scala.collection.mutable.ArrayOps$ofRef.foreach(ArrayOps.scala:105) ~[scala-library.jar:na]
    at scala.collection.TraversableLike$class.map(TraversableLike.scala:244) ~[scala-library.jar:na]
    at scala.collection.mutable.ArrayOps$ofRef.map(ArrayOps.scala:105) ~[scala-library.jar:na]
    at com.fasterxml.jackson.module.scala.util.SmarterBeanIntrospector$$anonfun$5.apply(ScalaBeansUtil.scala:94) ~[jackson-module-scala_2.10-2.1.3.jar:na]
    at com.fasterxml.jackson.module.scala.util.SmarterBeanIntrospector$$anonfun$5.apply(ScalaBeansUtil.scala:93) ~[jackson-module-scala_2.10-2.1.3.jar:na]
    at scala.collection.TraversableLike$$anonfun$flatMap$1.apply(TraversableLike.scala:251) ~[scala-library.jar:na]
    at scala.collection.TraversableLike$$anonfun$flatMap$1.apply(TraversableLike.scala:251) ~[scala-library.jar:na]
    at scala.collection.immutable.List.foreach(List.scala:309) ~[scala-library.jar:na]
    at scala.collection.TraversableLike$class.flatMap(TraversableLike.scala:251) ~[scala-library.jar:na]
    at scala.collection.AbstractTraversable.flatMap(Traversable.scala:105) ~[scala-library.jar:na]
    at com.fasterxml.jackson.module.scala.util.SmarterBeanIntrospector$.apply(ScalaBeansUtil.scala:93) ~[jackson-module-scala_2.10-2.1.3.jar:na]
    at com.fasterxml.jackson.module.scala.util.ScalaBeansUtil$.propertiesOf(ScalaBeansUtil.scala:166) ~[jackson-module-scala_2.10-2.1.3.jar:na]
    at com.fasterxml.jackson.module.scala.deser.CaseClassAnnotationIntrospector$.findConstructorParamName(CaseClassDeserializerModule.scala:51) ~[jackson-module-scala_2.10-2.1.3.jar:na]
    at com.fasterxml.jackson.module.scala.deser.CaseClassAnnotationIntrospector$.findDeserializationName(CaseClassDeserializerModule.scala:41) ~[jackson-module-scala_2.10-2.1.3.jar:na]
    at com.fasterxml.jackson.databind.AnnotationIntrospector.findNameForDeserialization(AnnotationIntrospector.java:915) ~[jackson-databind-2.1.2.jar:2.1.2]
    at com.fasterxml.jackson.databind.introspect.AnnotationIntrospectorPair.findNameForDeserialization(AnnotationIntrospectorPair.java:606) ~[jackson-databind-2.1.2.jar:2.1.2]
    at com.fasterxml.jackson.databind.introspect.POJOPropertiesCollector._addCreators(POJOPropertiesCollector.java:405) ~[jackson-databind-2.1.2.jar:2.1.2]
    at com.fasterxml.jackson.databind.introspect.POJOPropertiesCollector.collect(POJOPropertiesCollector.java:233) ~[jackson-databind-2.1.2.jar:2.1.2]
    at com.fasterxml.jackson.databind.introspect.BasicClassIntrospector.collectProperties(BasicClassIntrospector.java:142) ~[jackson-databind-2.1.2.jar:2.1.2]
    at com.fasterxml.jackson.databind.introspect.BasicClassIntrospector.forSerialization(BasicClassIntrospector.java:68) ~[jackson-databind-2.1.2.jar:2.1.2]
    at com.fasterxml.jackson.databind.introspect.BasicClassIntrospector.forSerialization(BasicClassIntrospector.java:11) ~[jackson-databind-2.1.2.jar:2.1.2]
    at com.fasterxml.jackson.databind.SerializationConfig.introspect(SerializationConfig.java:490) ~[jackson-databind-2.1.2.jar:2.1.2]
    at com.fasterxml.jackson.databind.ser.BeanSerializerFactory.createSerializer(BeanSerializerFactory.java:131) ~[jackson-databind-2.1.2.jar:2.1.2]
    at com.fasterxml.jackson.databind.ser.SerializerFactory.createSerializer(SerializerFactory.java:53) ~[jackson-databind-2.1.2.jar:2.1.2]
    at com.fasterxml.jackson.databind.SerializerProvider._createUntypedSerializer(SerializerProvider.java:935) ~[jackson-databind-2.1.2.jar:2.1.2]
    at com.fasterxml.jackson.databind.SerializerProvider._createAndCacheUntypedSerializer(SerializerProvider.java:892) ~[jackson-databind-2.1.2.jar:2.1.2]
    at com.fasterxml.jackson.databind.SerializerProvider.findValueSerializer(SerializerProvider.java:429) ~[jackson-databind-2.1.2.jar:2.1.2]
    at com.fasterxml.jackson.databind.SerializerProvider.findTypedValueSerializer(SerializerProvider.java:520) ~[jackson-databind-2.1.2.jar:2.1.2]
    at com.fasterxml.jackson.databind.ser.DefaultSerializerProvider.serializeValue(DefaultSerializerProvider.java:99) ~[jackson-databind-2.1.2.jar:2.1.2]
    at com.fasterxml.jackson.databind.ObjectMapper._configAndWriteValue(ObjectMapper.java:2627) ~[jackson-databind-2.1.2.jar:2.1.2]
    at com.fasterxml.jackson.databind.ObjectMapper.writeValueAsString(ObjectMapper.java:2119) ~[jackson-databind-2.1.2.jar:2.1.2]
    at utils.CustomSerializer$.serialize(CustomSerializer.scala:24) ~[na:na]
    at Global$.onStart(Global.scala:36) ~[na:na]
    at play.api.GlobalPlugin.onStart(GlobalSettings.scala:175) ~[play_2.10.jar:2.1.0]
    at play.api.Play$$anonfun$start$1$$anonfun$apply$mcV$sp$1.apply(Play.scala:63) ~[play_2.10.jar:2.1.0]
    at play.api.Play$$anonfun$start$1$$anonfun$apply$mcV$sp$1.apply(Play.scala:63) ~[play_2.10.jar:2.1.0]
    at scala.collection.immutable.List.foreach(List.scala:309) ~[scala-library.jar:na]
    at play.api.Play$$anonfun$start$1.apply$mcV$sp(Play.scala:63) ~[play_2.10.jar:2.1.0]
    at play.api.Play$$anonfun$start$1.apply(Play.scala:63) ~[play_2.10.jar:2.1.0]
    at play.api.Play$$anonfun$start$1.apply(Play.scala:63) ~[play_2.10.jar:2.1.0]
    at play.utils.Threads$.withContextClassLoader(Threads.scala:18) ~[play_2.10.jar:2.1.0]
    at play.api.Play$.start(Play.scala:62) ~[play_2.10.jar:2.1.0]
    at play.core.ReloadableApplication$$anonfun$get$1$$anonfun$1.apply(ApplicationProvider.scala:133) ~[play_2.10.jar:2.1.0]
    ... 38 common frames omitted 
```

所以只有第三次序列化失败。

我的枚举是基本的：

```
object RelationshipStatus extends Enumeration {
  val PENDING = Value("PENDING")
  val ACCEPTED = Value("ACCEPTED")
  val REJECTED = Value("REJECTED")
  val IGNORED = Value("IGNORED")
} 
```

任何的想法？？？我没有在枚举中定义任何类型别名，为什么会出现这个错误？为什么在第 3 次尝试而不是在第 2 次尝试相同的枚举？

顺便说一句，是否有可能：

```
{"string":"someString","status":"ACCEPTED"} 
```

代替：

```
{"string":"someString","status":{"enumClass":"models.RelationshipStatus","value":"ACCEPTED"}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T22:20:46.097

你有两个不同的问题：

1.  为什么这段代码会抛出异常？

    我不知道，除了说，`scalabeans`Jackson Scala 模块的 2.1 系列所依赖的库，看起来它在枚举方面遇到了问题，可能特别是在 Scala 2.10 下。我将在[相关的 github 问题](https://github.com/FasterXML/jackson-module-scala/issues/66)中跟踪此缺陷。

2.  枚举可以在序列化时不必传达它们的类型吗？

    还没有。详细说明为什么在[相关的 github 问题](https://github.com/FasterXML/jackson-module-scala/issues/20)中；要点是，由于枚举的值类型只是类型别名而不是类型，因此每个枚举派生类的每个值在 Java 擦除下都具有相同的运行时类型。

# c++ - 增加程序运行的堆栈大小

> ID：15887787
> 
> 赞同：1
> 
> 时间：2013-04-08T19:56:15.860
> 
> 标签：c++

我正在寻找一种增加堆栈大小的方法，以便我的程序运行，原因是我有一个导致堆栈溢出的递归调用。无论如何我可以更改默认堆栈大小吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T19:59:23.273

如果它是 *NIX，请使用

```
ulimit -s <number_in_kb> 
```

在运行程序之前，您应该在您的环境中设置它。[您也可以按照此答案](https://stackoverflow.com/a/2284691/417980)中的描述以编程方式设置它。

您可以通过运行查看当前值`ulimit -a`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T19:58:15.250

使用 editbin 更改程序的堆栈大小：

EDITBIN.EXE /STACK: yourprogram.exe

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T20:01:51.537

它的编译器依赖。在 Visual Studio 中，stacksize 固定为 1 MB。您可以使用 /STACK 链接器选项增加它。

# c# - 读取尝试无效 - 是否可以使用操作？

> ID：15887789
> 
> 赞同：1
> 
> 时间：2013-04-08T19:56:24.027
> 
> 标签：c#, mysql, mysql-connector

```
public void ExecuteAction(MySqlCommand query, Action<MySqlDataReader> action)
    {
        _connection.Open();
        query.Connection = _connection;
        using(var reader = query.ExecuteReader())
        {
            while (reader.Read())
            {
                action(reader);
            }
            reader.Close();
        }
        _connection.Close();
    } 
```

有可能做这样的事情吗？我总是收到错误“阅读器关闭时读取尝试无效”。

这是我正在使用的一段代码：

```
private void UpdateRecords()
    {
        var query = String.Format("SELECT * FROM {0}", _table);
        var cmd = new MySqlCommand(query);
        _db.ExecuteAction(cmd, reader =>
                                   {
                                       var rows = new List<object>();
                                       for (var i = 0; i < reader.FieldCount; i++)
                                       {
                                           if (reader.IsDBNull(i)) continue;
                                           var name = reader.GetName(i);
                                           if (!_fields.Contains(name)) _fields.Add(name);
                                           rows.Add(reader.GetValue(i));
                                       }
                                       _records.Add(new Record(_fields, rows));
                                   });
    } 
```

我正在尝试将数据库表的所有记录存储到程序内的动态类中。当我尝试将动态 mysql 数据添加到这些类中时，出现此错误。

另一个相关的问题：有没有图书馆可以为我做这个？很多代码我不必写下来，但这是我第一次接触 MySQL 和 C#，所以我没有任何类型的知识。谢谢你的帮助。

更新：现在我得到连接已经打开的错误，MySQL 让我诅咒（我习惯了 MongoDB ......）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:40:11.623

我解决了这个问题。我不知道我不能多次使用同一个连接来调用不同的读者，所以我每次需要查询数据库时都必须创建一个新的。

[MySQL - 多个结果集](https://stackoverflow.com/questions/3321879/mysql-multiple-result-sets/3324656#3324656)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T23:30:24.600

`ExecuteAction`行得通吗？你甚至在使用那个代码吗？`UpdateRecords`有明显的问题。如果您查看`ExecuteAction`它会打开连接，然后在`using`语句中声明阅读器。之后，它关闭连接。在`UpdateRecords`您没有代码来处理打开/关闭连接时，您也缺少处理阅读器的代码。因此，您的代码有时可能会工作（例如，如果连接已经在其他地方打开）并且有时会失败（如果尚未建立连接）。

# php - MYSQL 内部连接

> ID：15887793
> 
> 赞同：0
> 
> 时间：2013-04-08T19:56:41.920
> 
> 标签：php, mysql

我的数据库中有 2 个表。一个用于从选择的可用日期和时间进行预订，另一个用于从选择的可用日期和时间返回。我需要在一个页面上将这两个链接在一起。![在此处输入图像描述](https://i.stack.imgur.com/haIcN.jpg)

```
<?php
{
    mysql_connect("localhost" , "" , "") or die (mysql_error());
    mysql_select_db("") or die(mysql_error());

    $pid=intval($_SESSION["User_id"]);
    $query = "SELECT t1.*, t2.return_time, t2.return_date FROM Returnout AS t1 INNER JOIN Return AS t2 ON t1.book_time=t2.book_time";

    //executes query on the database
    $result = mysql_query ($query) or die ("didn't query");

    //this selects the results as rows
    $num = mysql_num_rows ($result);    

    $dates_and_times = array();
    while($row=mysql_fetch_assoc($result))
    {
        $dates_and_times[] = $row['book_date'].' '.$row['book_time'];
        $dates_and_times[] = $row['return_date'].' '.$row['retun_time'];
    }
}
?>      
        <form method="post" action="booked.php">
    <strong>Dates available</strong>            
    <select id="Date" name="Date">                      
    <option value="0">--Select date--</option>
    <?php  foreach ($dates_and_times as $app_date) { ?>
        <option value="<?php echo $app_date; ?>"><?php echo $app_date; ?></option>
    <?php } ?>
    </select> 
```

所以我需要两张表格，一张显示预订的日期和时间，另一张显示返回的日期和时间。我在 INNER JOINS 的某个地方出错了。有任何想法吗？

谢谢！

# c# - 表达式树序列化器

> ID：15887797
> 
> 赞同：5
> 
> 时间：2013-04-08T19:56:54.400
> 
> 标签：c#, wcf, linq, serialization

我想在客户端使用 Linq 表达式，对它们进行序列化并在服务器端执行它们。

为此我想使用：[http ://expressiontree.codeplex.com/](http://expressiontree.codeplex.com/)

但我想再次执行他们自己的 WCF 调用。

这意味着我在 WCf 方面有一个电话：

```
ImageDTO[] GetImages(XElement exp); 
```

我现在想在客户端有一个 IQueryable（我可以在其上执行 Linq 表达式），并且我在服务器端有一个 IQueryable（从我的数据访问层，我想执行序列化的表达式）。

但我不知道如何做到这一点，我没有找到任何例子......

在客户端，我认为我应该在一个类中实现 Query，我在构造函数中告诉这个类使用我的 QueryProvider 实现（我从那里调用 WCF 服务）。但我不确定这是否正确......

也许有人可以帮忙举个例子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T20:09:32.623

`IQueryable<T>`框架中有一个实现-[`MSDN: EnumerableQuery<T>`](http://msdn.microsoft.com/en-us/library/cc190116.aspx)

`IQueryable<T>.Expression`如果您可以在客户端上使用它来构建查询，则可以从属性中获取整个表达式树。

您必须对此进行测试以查看它是否适用于该表达式树序列化器。

```
var iQueryable = new EnumerableQuery<Model>( Enumerable.Empty<Model>() );

var query = iQueryable.Include( ... ).Where( ... ).OrderBy( ... );

var expressionTree = query.Expression; 
```

然后，您可以序列化表达式，将其穿过电线然后反序列化。

* * *

那么问题是表达式树是基于一个`EnumerableQuery<T>`.

所以你需要用`IQueryable<T>`你真实的来源替换它`DbContext`

这*有点*混乱，但我已经使用`ExpressionVisitor:`

```
IQueryable FixupExpressionTree( ObjectContext ctx, Type entityType, Expression expression )
{
    var tObjectContext = ctx.GetType();
    var mCreateObjectSetOpen = tObjectContext.GetMethod( "CreateObjectSet", new Type[ 0 ] );
    var mCreateObjectSetClosed = mCreateObjectSetOpen.MakeGenericMethod( entityType );

    var objectQuery = ( ObjectQuery ) mCreateObjectSetClosed.Invoke( ctx, null );

    var eFixed = new Visitor( objectQuery, entityType ).Visit( expression );

    var qFixed = ( ( IQueryable ) objectQuery ).Provider.CreateQuery( eFixed );

    return qFixed;
} 
```

和它`ExpressionVisitor`本身：

```
public class Visitor : ExpressionVisitor
{
    ObjectQuery _Source = null;
    Type _EntityType = null;

    public Visitor( ObjectQuery source, Type entityType ) { _Source = source; _EntityType = entityType; }

    protected override Expression VisitConstant( ConstantExpression node )
    {
        if ( !node.Type.Name.Contains( "EnumerableQuery" ) ) return base.VisitConstant( node );

        var eConstantInstance = Expression.Constant( _Source );
        var eConstantArgument = Expression.Constant( MergeOption.AppendOnly );

        var tObjectQueryOpen = typeof( ObjectQuery<> );
        var tObjectQueryClosed = tObjectQueryOpen.MakeGenericType( _EntityType );
        var eMergeAsMethod = tObjectQueryClosed.GetMethod( "MergeAs", BindingFlags.Instance | BindingFlags.NonPublic );

        return Expression.Call( eConstantInstance, eMergeAsMethod, eConstantArgument );
    }
} 
```

调用它是直截了当的：

```
Type entityType = ...
Expression expression = ...
DbContext db = ...

ObjectContext ctx = ( ( IObjectContextAdapter ) db ).ObjectContext;

IQueryable query = FixupExpressionTree( ctx, entityType, expression ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-22T07:51:38.463

为了解决我的问题，我使用了 Interlinq，但我使用了一个版本，因此它也适用于 Silverlight。

[https://github.com/jogibear9988/Interlinq-2](https://github.com/jogibear9988/Interlinq-2)

# javascript - 使用 jQuery 填充 ValidatorHookupControl

> ID：15887800
> 
> 赞同：0
> 
> 时间：2013-04-08T19:57:00.283
> 
> 标签：javascript, jquery, asp.net

我有以下表单项：

```
Medications:    
<asp:RadioButtonList ID="meds" runat="server" RepeatDirection="Horizontal">
     <asp:ListItem Value="1">Yes (list below)</asp:ListItem>
     <asp:ListItem Value="0">No</asp:ListItem>
</asp:RadioButtonList>

Medication List:
<asp:CustomValidator ID="val_medsList" runat="server" ClientValidationFunction="check_medsList" 
   OnServerValidate="val_medsList_ServerValidate" ValidationGroup="GroupSave" ValidateEmptyText="true"
   ErrorMessage="required" ControlToValidate="medsList" EnableClientScript="true">
</asp:CustomValidator><br />
<asp:TextBox ID="medsList" CssClass="jQueryMedsListTarget" TextMode="MultiLine" runat="server" 
    Width="500" MaxLength="500" Wrap="true" Rows="3" /> 
```

这个想法是，如果选择“是”，则需要填写文本框，如果选择“否”，则相反。为了让“是”/“否”选项触发自定义验证器，我使用 'ValidatorHookupControl' 如下：

```
ValidatorHookupControl(document.getElementById('meds_0'), document.getElementById('val_medsList'));
ValidatorHookupControl(document.getElementById('meds_1'), document.getElementById('val_medsList')); 
```

这对我有用，但是当我有两个以上的选择时，这会变得很烦人。我创建了以下内容来遍历所有选项，但它似乎不起作用（“是”和“否”不会触发自定义验证器）：

```
$(document).ready(function () {
    hookupRadioButtonListToVal($('input[id^=meds_]'), $('#val_medsList'));
}); 
function hookupRadioButtonListToVal(rbl, validator) {
    $(rbl).each(function () {
        ValidatorHookupControl($(this), $(validator));
    });
} 
```

我假设我没有返回正确类型的元素，`$(this)`但`$(validator)`不确定从那里去哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T12:49:13.897

最终的解决方案是

```
function hookupRadioButtonListToVal(rbl, validator) {
    $(rbl).each(function () {
        ValidatorHookupControl(this, $(validator)[0]);
    });
} 
```

这使用了 jbabey 共享的想法，并对验证器部分进行了调整。不幸的是，如果我只是打电话`ValidatorHookupControl(this, validator);`，我会得到`TypeError: val.style is undefined`

# css - 为什么开发人员在浮动项目时使用负边距？

> ID：15887809
> 
> 赞同：0
> 
> 时间：2013-04-08T19:57:23.690
> 
> 标签：css, wordpress, margin

如果我浮动项目，为什么要使用负边距？

```
ul {
{negative margin}
}

ul li {
float:left;
margin-right:10px;
} 
```

我在哪里看到过，但我不记得了。你能解释一下为什么他们使用负边距属性吗？我在 wordpress 的 211 主题中看到了同样奇怪的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T12:45:29.187

边距中的负值与正值具有相同的目标。这只是介绍。

当@better_use_mkstemp 链接到您时，W3C 允许负值；那么你不能认为它是“奇怪的”。

cf：[http ://coding.smashingmagazine.com/2009/07/27/the-definitive-guide-to-using-negative-margins/](http://coding.smashingmagazine.com/2009/07/27/the-definitive-guide-to-using-negative-margins/)

# asp.net-mvc - ASP.NET MVC TASK MANAGER 一对多关系

> ID：15887810
> 
> 赞同：1
> 
> 时间：2013-04-08T19:57:24.327
> 
> 标签：asp.net-mvc, one-to-many, relationship

我正在尝试学习 ASP.NET MVC，所以我开始构建小型应用程序 - 基于互联网教程（MVC 音乐商店、Nerd Dinner 等）的任务管理器。我在我的控制器中尝试定义 ActionResult 方法时遇到了困难。

我有模型，我在其中定义活动。每个活动可以有几个任务。

活动 1（每个 Activiy 有几个任务（任务 1、任务 2 等）） 活动 2 活动 3 活动 n

问题：

我想就 ActionResult 方法的定义向您寻求帮助，该方法将返回包含与所选活动相关的所有任务列表的视图。

图片在这里：[http ://sdrv.ms/Z46NZE](http://sdrv.ms/Z46NZE)

问题是，我无法将此方法定义为一对多关系。

整个项目在我的 skydrive 文件夹中：[http ://sdrv.ms/ZiCbQi](http://sdrv.ms/ZiCbQi)

请帮忙。

在我的模型中，我有以下由 Mvcscaffolding 生成的类和 Context 类：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.ComponentModel.DataAnnotations;
using System.ComponentModel.DataAnnotations.Schema;

namespace TASK3.Models
{
public class Task
{
    public int TaskID { get; set; }
    public string Name { get; set; }
    public int ActivityID { get; set; }
    public DateTime? CreatedOn { get; set; }
    public DateTime? ModifiedOn { get; set; }
    public string PN { get; set; }
    public string Result { get; set; }
    public string ToDo { get; set; }
    public string ResponsiblePerson { get; set; }
    public DateTime? DueDate { get; set; }
    public int? TaskPriority { get; set; }
    public string TaskStatus { get; set; }

    public virtual Activity Activity { get; set; }
}

public class Activity
{
    public int ActivityId { get; set; }
    [Required] public string Name { get; set; }
    public string ActivityType { get; set; }
    public int? ActivityPriority { get; set; }
    public string ActivityStatus { get; set; }

    public virtual ICollection<Task> Tasks { get; set; }
}

} 
```

非常感谢！

此致

雅罗斯拉夫·普拉韦茨

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T21:08:04.143

改变

```
public virtual ICollection<Task> Tasks { get; set; } 
```

至

```
public List<Task> Tasks { get; set; } 
```

请记住，一切都必须是可序列化的，ICollection 不是，List 是。

# python - Pylab 没有安装在我的 macbook 上

> ID：15887815
> 
> 赞同：0
> 
> 时间：2013-04-08T19:57:36.210
> 
> 标签：python, macos, numpy, osx-mountain-lion

MITX 6.00 pylab 没有安装在我的运行山狮运行 python 2.7.3 的 macbook 上。我已经尝试多次安装它，但我无法让它工作。我在下面发布了错误消息，但不确定它告诉我该怎么做。如果你能解释这个错误以及我如何修复它，那就太好了。

```
>>> ================================ RESTART ================================
>>> import pylab

Traceback (most recent call last):
  File "<pyshell#5>", line 1, in <module>
    import pylab
  File "/Library/Python/2.7/site-packages/matplotlib-1.3.x-py2.7-macosx-10.8-intel.egg/pylab.py", line 1, in <module>
    from matplotlib.pylab import *
  File "/Library/Python/2.7/site-packages/matplotlib-1.3.x-py2.7-macosx-10.8-intel.egg/matplotlib/__init__.py", line 133, in <module>
    from matplotlib.cbook import MatplotlibDeprecationWarning
  File "/Library/Python/2.7/site-packages/matplotlib-1.3.x-py2.7-macosx-10.8-intel.egg/matplotlib/cbook.py", line 29, in <module>
    import numpy as np
  File "/Library/Python/2.7/site-packages/numpy-1.8.0.dev_bbcfcf6_20130307-py2.7-macosx-10.8-intel.egg/numpy/__init__.py", line 138, in <module>
    import add_newdocs
  File "/Library/Python/2.7/site-packages/numpy-1.8.0.dev_bbcfcf6_20130307-py2.7-macosx-10.8-intel.egg/numpy/add_newdocs.py", line 13, in <module>
    from numpy.lib import add_newdoc
  File "/Library/Python/2.7/site-packages/numpy-1.8.0.dev_bbcfcf6_20130307-py2.7-macosx-10.8-intel.egg/numpy/lib/__init__.py", line 6, in <module>
    from type_check import *
  File "/Library/Python/2.7/site-packages/numpy-1.8.0.dev_bbcfcf6_20130307-py2.7-macosx-10.8-intel.egg/numpy/lib/type_check.py", line 11, in <module>
    import numpy.core.numeric as _nx
  File "/Library/Python/2.7/site-packages/numpy-1.8.0.dev_bbcfcf6_20130307-py2.7-macosx-10.8-intel.egg/numpy/core/__init__.py", line 6, in <module>
    import multiarray
ImportError: dlopen(/Library/Python/2.7/site-packages/numpy-1.8.0.dev_bbcfcf6_20130307-py2.7-macosx-10.8-intel.egg/numpy/core/multiarray.so, 2): no suitable image found.  Did find:
    /Library/Python/2.7/site-packages/numpy-1.8.0.dev_bbcfcf6_20130307-py2.7-macosx-10.8-intel.egg/numpy/core/multiarray.so: mach-o, but wrong architecture
>>> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T05:26:21.570

你应该试试这个 Enthought 的 64 位版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T20:05:05.413

好吧，该消息中的重要部分如下

```
ImportError: dlopen( [long path to] multiarray.so, 2): no suitable image found.
Did find: [same path to] multiarray.so: mach-o, but wrong architecture 
```

所以基本上，你安装正确了吗？意思是，正确的架构（x86、x64 取决于您的 Python 版本）。

# c# - ASP.Net MVC 4 脚手架复杂类型

> ID：15887818
> 
> 赞同：1
> 
> 时间：2013-04-08T19:57:47.017
> 
> 标签：c#, asp.net, .net, asp.net-mvc-4, scaffolding

我有一个非常复杂的模型。我想为它创建创建、编辑、列出等表单。该类包含来自其他类的许多对象。例如，在“创建”表单中，我想要一个能够获取所有类的数据并填写必要表格的表单。我怎样才能做到这一点？我的班级样本是这样的：

```
public class BuildingPermit
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int ID { get; set; }

    public Permit PermitInfo { get; set; }

    public DateTime RegisteredDate { get; set; }

    public int RealStateID { get; set; }

    public virtual Person Owner{ get; set; }
} 
```

当我使用“脚手架”时，类似`Person`或`Permit`以上的类被忽略，我只获得系统类型的字段。

# python - 使用 matplotlib + errorbar 制作动画

> ID：15887820
> 
> 赞同：2
> 
> 时间：2013-04-08T19:57:57.733
> 
> 标签：python, matplotlib

我正在尝试根据此示例制作动画。我的主要问题是我不知道如何将动画与错误栏连接起来。也许有人已经解决了类似的问题..

```
import numpy as np
import matplotlib.pyplot as plt
import matplotlib.animation as animation

line, = ax.plot(x, np.sin(x))

def animate(i):
    ax.errorbar(x, np.array(x), yerr=1, color='green')
    line.set_ydata(np.sin(x+i/10.0))  # update the data
    return line,

#Init only required for blitting to give a clean slate.
def init():
    ax.errorbar(x, np.array(x), yerr=1, color='green')
    line.set_ydata(np.ma.array(x, mask=True))
    return line,

ani = animation.FuncAnimation(fig, animate, np.arange(1, 200), init_func=init,
    interval=25, blit=True)
plt.show() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T22:12:06.227

```
import numpy as np
import matplotlib.pyplot as plt
import matplotlib.animation as animation

fig = gcf()
ax = gca()
x = np.linspace(0, 2*np.pi, 256)
line, ( bottoms, tops), verts =  ax.errorbar(x, np.sin(x), yerr=1)

verts[0].remove() # remove the vertical lines

yerr = 1
def animate(i=0):
    #    ax.errorbar(x, np.array(x), yerr=1, color='green')
    y = np.sin(x+i/10.0)
    line.set_ydata(y)  # update the data
    bottoms.set_ydata(y - yerr)
    tops.set_ydata(y + yerr)
    return line, bottoms, tops

def init():
    # make an empty frame
    line.set_ydata(np.nan * np.ones(len(line.get_xdata())))
    bottoms.set_ydata(np.nan * np.ones(len(line.get_xdata())))
    tops.set_ydata(np.nan * np.ones(len(line.get_xdata())))
    return line, bottoms, tops

ani = animation.FuncAnimation(fig, animate, np.arange(1, 200), init_func=init,
    interval=25, blit=True)
plt.show() 
```

这将使您大部分时间到达那里。查看如何`axes.errorbar`工作的代码以了解它返回的内容。

你误解了什么`init`。

如果您需要垂直线，请查看它们是如何生成的，`axes.errorbar`然后每帧删除并重新创建它们。基于对象的`collection`更新效果不佳。

# java - 错误：无法访问 zad_II_1 类型的封闭实例

> ID：15887821
> 
> 赞同：-1
> 
> 时间：2013-04-08T19:57:59.920
> 
> 标签：java

我正在学习 Java 中的抽象类，但我对这个错误有一点问题：没有可访问类型 zad_II_1 的封闭实例。必须使用 zad_II_1 类型的封闭实例来限定分配（例如 xnew A()，其中 x 是 zad_II_1 的实例）。我做错了什么？这是代码：

```
public class zad_II_1 {

    abstract class Pacjent{
            String imie;

            Pacjent(String imie){
            this.imie=imie;
            }

            abstract String nazwiskoo();
            abstract String PodajChorobe();
            abstract String PodajLek();

            String nazwisko(){
                return imie;
            }
            String choroba(){
                return PodajChorobe();
            }
            String leczenie(){
                return PodajLek();
            }
            }

     class ChoryNaGlowe extends Pacjent{
         ChoryNaGlowe(String imie){
             super(imie);}
             String nazwiskoo(){
                 return imie;
             }
             String PodajChorobe(){return "glowa";}
             String PodajLek(){return "aspiryna";}
     }
    class ChoryNaNoge extends Pacjent{
         ChoryNaNoge(String imie){
             super(imie);}
             String nazwiskoo(){
                 return imie;
             }  
             String PodajChorobe(){return "noga";}
             String PodajLek(){return "gips";}
    }
    class ChoryNaDyspepsje extends Pacjent{
         ChoryNaDyspepsje(String imie){
             super(imie);}
             String nazwiskoo(){
                 return imie;
             }   
             String PodajChorobe(){return "dyspepsja";}
             String PodajLek(){return "wegiel";}
        }

        public static void main(String[] args) {

            Pacjent[] pacjenci = { new ChoryNaGlowe("Janek"),
                                   new ChoryNaNoge("Edzio"),
                                   new ChoryNaDyspepsje("Marian")
                                 };

            for (Pacjent p : pacjenci) {
              System.out.println("Pacjent:      " + p.nazwisko() + '\n' + 
                                "Chory na:    " + p.choroba() + '\n' +
                                "Zastosowano: " + p.leczenie() +"\n\n" 
                                 );
            }

          }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T20:01:10.740

你所有的内部类都需要是静态的。

```
static abstract class Pacjent 
```

和

```
static class ChoryNaGlowe extends Pacjen 
```

ETC...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T20:03:18.350

当然，您可以创建内部类`static`。

或者，您需要有一个实例`zad_II_1`来创建内部类：

```
zad_II_1 z = new zad_II_1();
z.new ChoryNaGlowe("Janek") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T21:51:12.167

或者您可以将所有内容移出 main 方法，因为使用“新内部类实例”调用非常混乱。

```
public main(String... args) {
    zad_II_1 z = new zad_II_1();
    z.doExercise();
}
private void doExercise() {
    // copied from the old main().
    // Just use new CherryNaGlowe(...), etc.
} 
```

一般来说，尽量使用静态内部类。有时人们将内部类长时间存储在其他对象中。如果系统可以访问内部类，则外部类也会自动访问，这是泄漏内存的一种方式。

# android - java.lang.NoSuchMethodError: android.app.DownloadManager$Request.setNotificationVisibility

> ID：15887830
> 
> 赞同：1
> 
> 时间：2013-04-08T19:58:20.720
> 
> 标签：android, download-manager

尝试像这样使用[DownloadManager](http://developer.android.com/reference/android/app/DownloadManager.html)

```
DownloadManager.Request request = new DownloadManager.Request(uri)
            .setAllowedNetworkTypes(DownloadManager.Request.NETWORK_MOBILE)
            .setAllowedNetworkTypes(DownloadManager.Request.NETWORK_WIFI)
            .setAllowedOverRoaming(true)
            .setDestinationInExternalFilesDir(this, null,String.valueOf(mPathAndFolder))
            .setVisibleInDownloadsUi(false)
            .setNotificationVisibility(DownloadManager.Request.VISIBILITY_HIDDEN);

long downloadID = downloadManager.enqueue(request); 
```

在 Android Manifest 中添加了以下权限

```
<uses-permission android:name="android.permission.DOWNLOAD_WITHOUT_NOTIFICATION"/> 
```

在运行时出现以下错误

> java.lang.NoSuchMethodError: android.app.DownloadManager$Request.setNotificationVisibility

为什么会出现这个错误？如何使下载管理器工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T20:20:07.670

> 我是否需要使用两个单独的 DownloadManager.Request 一个用于 API 9，另一个用于 API 11？

不，但您确实需要使用 Java 保护块：

```
DownloadManager.Request request = new DownloadManager.Request(uri)
        .setAllowedNetworkTypes(DownloadManager.Request.NETWORK_MOBILE)
        .setAllowedNetworkTypes(DownloadManager.Request.NETWORK_WIFI)
        .setAllowedOverRoaming(true)
        .setDestinationInExternalFilesDir(this, null,String.valueOf(mPathAndFolder))
        .setVisibleInDownloadsUi(false);

if (Build.VERSION.SDK_INT>=Build.VERSION_CODES.HONEYCOMB) {
        request.setNotificationVisibility(DownloadManager.Request.VISIBILITY_HIDDEN);
} 
```

而且，您将不得不接受这样一个事实，即您的下载将在 API 级别 9 和 10 的设备上可见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T20:22:41.253

当您使用该设备 API 中不可用的方法时，会发生 NoSuchMethodError。您可以通过在运行最新版本 Android 的模拟器上运行代码来测试是否是这种情况。您仍然可以保留较新的方法（并且您可能应该），但将其放在 try 语句中。如果您收到 NoSuchMethodError，那么您的代码正在旧设备上运行，您需要让您的 catch 语句使用变通方法。

# javascript - Ajax 简单示例不起作用

> ID：15887831
> 
> 赞同：1
> 
> 时间：2013-04-08T19:58:23.837
> 
> 标签：javascript, jquery, ajax

我有一段时间没有使用 ajax，现在我什至无法让这个简单的程序工作，我做错了什么吗？

```
 <script type = "text/javascript" src = "jquery-1.9.1.min.js"></script>
    <script type = "text/javascript">
        alert("");
        var count = 0;
        $.ajax({
               url: 'get.php',
               dataType: 'json',
               success: function () 
               {       
                alert("");
               } 
        });
        alert("");
    </script>

<?php
echo "yay";
?> 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T20:00:11.423

设置`dataType`为“json”意味着来自的响应`get.php`被解析为 JSON。如果它不是有效的 JSON 或响应为空，则请求将失败。

如果 URL 不正确（找不到...HTTP 404 错误），则请求将失败。

请求默认`type`是“GET”，所以如果`get.php`不允许“GET”（由于某种原因），它会返回一个HTTP错误，请求会失败。

如果服务器出现错误，它可能会返回 HTTP 500 错误，并且请求将失败。

有助于调试的方法是将`error`选项添加到`$.ajax`调用中并查看是否调用了该选项。相反，我使用该`.fail()`方法......它做同样的事情。

当然，更直接的调试方式是打开浏览器的控制台并查看 AJAX 请求。它应该显示有关它的多个详细信息，可以帮助您确定任何问题。

看起来好像从未执行/发送 AJAX 请求，因为您看不到`alert`中间的 。好吧，仅仅因为请求不成功，并不意味着它被跳过了。请求可能失败的原因有很多（我在上面提到了几个）。该`.fail()`方法将帮助您确定原因。

此外，在 jQuery 中处理延迟对象的通用约定是使用`done`and`fail`方法，因此这是一种选择。当然，`$.ajax`您可以指定特定选项（`success`、`error`和`complete`- 用于其他内容），因此这也是一个选项。您还可以使用作为从返回的对象的一部分的特殊方法 ( `.success()`, `.error()`, ) ，但从 1.8 版开始不推荐使用这些方法 - 请查看底部的文档 - [http://api.jquery.com/jQuery。阿贾克斯/](http://api.jquery.com/jQuery.ajax/) . 但这是我设置它的方式，它应该与你的没有什么不同，但确实会捕获错误：`.complete()``$.ajax``.ajax`

```
$.ajax({
    url: 'get.php',
    dataType: 'json'
}).done(data) {
    console.log("successful response");
}).fail(jqXHR, textStatus, errorThrown) {
    console.log("error: " + textStatus + ", " + errorThrown);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T20:12:36.463

你确定 jQuery 在你的 ajax 调用被命中时已经加载了吗？

尝试将其包装在准备好的文档中，以确保您确实已加载

```
$(document).ready(function () {
    alert("");
    var count = 0;
    $.ajax({
        url: 'get.php',
        dataType: 'json',
        }).alwaysfunction () {
           alert("call was hit");
        });
    });

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T20:25:15.413

如果 get.php 有问题，你的代码不会显示任何问题，jquery.ajax() 只是吞下错误。

甚至在将 .failure 回调例程添加到您的 ajax 调用之前，您应该能够检查执行 get.php 的 Web 服务器上的错误日志，任何与执行 get.php 相关的错误都会被记录下来。

# ios - 带有自定义 selectedBackgroundView 的 UITableViewCell，它比 UISplitViewController 上的主视图控制器更宽

> ID：15887836
> 
> 赞同：2
> 
> 时间：2013-04-08T19:58:44.910
> 
> 标签：ios, ipad, uisplitviewcontroller

我有一个 iPad 应用程序，其 UISplitViewController 始终显示在风景中。它的主控制器是一个 UITableViewController。

我想让这个 UITableViewController 上的单元格的 selectedBackgroundView 溢出到细节 ViewController 中。像这样的东西：

![图片](https://i.stack.imgur.com/gDfPi.jpg)

我怎样才能做到这一点？
如果我尝试设置红色箭头图像（即 342 像素宽），它会被调整为 320 像素。
我还尝试继承 UIImageView 并覆盖 setFrame 以忽略任何尝试调整图像大小的调用，但仍然没有运气。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T02:58:35.890

（于 2013 年 10 月 1 日更新，使其适用于 iOS7）

感谢用户 Erway Software 帮助我。

以下是我如何让代码工作：

在 UITableViewController 上：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    // ...
    UITableViewCell *cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"someId"];
    UIImage *image = [UIImage imageNamed:@"image_name"];
    SelectionImageView *imageView = [[SelectionImageView alloc] initWithImage:image];
    [cell setSelectedBackgroundView:imageView];

    [tableView setClipsToBounds:NO];
    [[[cell contentView] superview] setClipsToBounds:NO];
    // ...
} 
```

这是 SelectionImageView 的代码：

```
@interface SelectionImageView : UIImageView

@end

@implementation SelectionImageView

- (void)setFrame:(CGRect)frame
{
    // 342 is the width of image_name
    if (frame.size.width == 342.f) {
        [super setFrame:frame];
    }
}

@end 
```

# android - 安卓标签库

> ID：15887838
> 
> 赞同：21
> 
> 时间：2013-04-08T19:58:55.870
> 
> 标签：android, c, android-ndk, taglib

我正在尝试`Taglib`为 Android 编译。我已经 `Taglib`从[这里](http://taglib.github.io/)下载了最新版本。在为构建编译它之后，`arm-linux`我已经成功地将它导入到我的应用程序中，但是当我尝试从中调用任何函数时，`tag_c.h`我收到以下错误：

```
SharedLibrary  : taglibwav.so
/home/test/workspacenew/Androidtaglibexample/obj/local/armeabi/
objs/squared/taglibwav.o: In function 
`Java_com_android_androidtag_WavFileDetails_taglibwav':
/home/test/workspacenew/Androidtaglibexample/jni/taglibwav.c:30: 
undefined reference to `taglib_set_strings_unicode'
collect2: ld returned 1 exit status
make: *** [/home/test/workspacenew/Androidtaglibexample/obj/
local/armeabi/taglibwav.so] Error 1 
```

应用配置信息为：

**标签库 ./configure :-**

```
./configure CC="/home/hcl/taglib/taglib/toolchain/bin/arm-linux-androideabi-gcc"\
--host="arm-linux" \
--build="arm" \
--enable-static="no" \
--enable-shared="yes" \
--prefix="/home/test/workspacenew/Androidtaglibexample/jni/testtaglib/"\ 
```

**安卓.mk：-**

```
LOCAL_PATH := $(call my-dir)

#declare the prebuilt library
include $(CLEAR_VARS)
LOCAL_MODULE := taglibtest
LOCAL_SRC_FILES := testtaglib/lib/libtag.a
LOCAL_EXPORT_C_INCLUDES := testtaglib/include/taglib/
LOCAL_PRELINK_MODULE := true
include $(PREBUILT_STATIC_LIBRARY)

include $(CLEAR_VARS) 
include $(call all-subdir-makefiles)
LOCAL_MODULE := taglibwav
LOCAL_SRC_FILES := taglibwav.c
LOCAL_C_INCLUDES := $(LOCAL_PATH)/testtaglib/include/taglib/
LOCAL_SHARED_LIBRARY := taglibtest
LOCAL_LDLIBS    := -llog -ljnigraphics -lz -lm -L$(SYSROOT)/usr/lib -llog 
include $(BUILD_SHARED_LIBRARY) 
```

* * *

**应用程序.mk：-**

```
APP_ABI :=armeabi
APP_STL:=stlport_static 
```

* * *

**taglibwav.c :-**

```
#include <jni.h>
#include <tag_c.h>
#include <android/log.h>
#ifndef FALSE
#define FALSE 0
#endif
.......
.......
JNIEXPORT void JNICALL Java_com_android_androidtag_WavFileDetails_taglibwav
  (JNIEnv * ev, jclass jc){
      int i;
      int seconds;
      int minutes;
      TagLib_File *file;  //<< accessed form tag_c.h : OK
      TagLib_Tag *tag;    //<< accessed form tag_c.h : OK
      const TagLib_AudioProperties *properties; //<<accessed form tag_c.h : OK
      taglib_set_strings_unicode(FALSE);//<<accessed form tag_c.h : GETTING ERROR
}
....
.... 
```

**Android NDK 版本：-** Android-Ndk-r7c

请指导我正确的方向来解决我做错的事情

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-08T21:05:14.880

我想你可能需要`-ltag_c`在某个地方

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T01:13:36.163

```
 TagLib_File *file;  //<< accessed form tag_c.h : OK
  TagLib_Tag *tag;    //<< accessed form tag_c.h : OK
  const TagLib_AudioProperties *properties; //<<accessed form tag_c.h : OK
  taglib_set_strings_unicode(FALSE);//<<accessed form tag_c.h : GETTING ERROR 
```

您无法访问的原因`taglib_set_strings_unicode`是因为`TAGLIB_C_EXPORT`tag_c.h 中定义的方式。

```
#if defined(_WIN32) || defined(_WIN64)
#ifdef MAKE_TAGLIB_C_LIB
#define TAGLIB_C_EXPORT __declspec(dllexport)
#else
#define TAGLIB_C_EXPORT __declspec(dllimport)
#endif
#elif defined(__GNUC__) && (__GNUC__ > 4 || __GNUC__ == 4 && __GNUC_MINOR__ >= 1)
#define TAGLIB_C_EXPORT __attribute__ ((visibility("default")))
#else
#define TAGLIB_C_EXPORT
#endif
...
typedef struct { int dummy; } TagLib_File;
typedef struct { int dummy; } TagLib_Tag;
typedef struct { int dummy; } TagLib_AudioProperties;
...
TAGLIB_C_EXPORT void taglib_set_strings_unicode(BOOL unicode);
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T10:56:15.267

为了完成这项工作，我将[在第 43 行修改 tag_c.h](https://github.com/taglib/taglib/blob/master/bindings/c/tag_c.h#L43)以定义正确的[可见性](http://gcc.gnu.org/wiki/Visibility#How_to_use_the_new_C.2B-.2B-_visibility_support)规则：

```
#define TAGLIB_C_EXPORT __attribute__ ((visibility("default"))) 
```

如果这可行，您可能会[在 taglib 上打开一个错误](https://github.com/taglib/taglib/issues)并链接回这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T21:50:59.200

```
LOCAL_STATIC_LIBRARY := taglibtest 
```

您正在使用静态库，而不是共享的。使用 shared one 的指令会混淆构建环境。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T10:51:40.723

您需要链接`tag_c.h`.o 和`taglibwav.o` :

```
gcc -o program tag_c.h taglibwav.c 
```

# objective-c - 如何将返回的 NSMutableArray 从方法传递到 NSMutableArray

> ID：15887841
> 
> 赞同：-1
> 
> 时间：2013-04-08T19:59:02.103
> 
> 标签：objective-c, nsmutablearray, nsobject

我想知道如何从返回 NSMutableArray 的 NSObjectClass 调用方法，并将返回的 MutableArray 保存到调用类中的 NSMutableArray 中。

实际上这就是它的外观

NSObject 类有带返回值的方法

```
- (NSMutableArray *)myMethod {
  // do some stuff

  return myMutableArray
} 
```

调用此方法的类执行所有初始化，因此我可以使用 myMethod 方法，但我不确定如何将返回的 myMutableArray 转换为此类中的 MutableArray ...

是不是像

```
TheNameOfTheNSObjectClass *myObjClass = [[TheNameOfTheObjectClass alloc] init];
anotherMutableArray = [myObjClass myMethod]; 
```

因为这就是我目前正在尝试的，我收到了警告

从“TheNameOfTheNSObjectClass *”分配给“NSMutableArray *__strong”的不兼容指针类型

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T21:27:56.850

如果您在名为 的类上有如下方法`Baginator`：

```
- (NSMutableArray *) mutableDoggyBags; 
```

然后你想调用那个方法：

```
Baginator *b = [Baginator new];
NSMutableArray *bags;

bags = [b mutableDoggyBags]; 
```

解析这个问题，听起来相当于`mutableDoggyBags`声明了返回可变数组以外的东西。

具体来说，如果此行在分配中产生错误：

```
anotherMutableArray = [myObjClass myMethod]; 
```

那么，以下必须为真：

```
• `myMethod` is not returning the same type as the type of `anotherMutableArray`. 
```

在您的情况下，听起来好像`myMethod`被声明为返回`TheNameOfTheNSObjectClass`. IE：

```
- (TheNameOfTheNSObjectClass*) myMethod; 
```

# c# - 如何以编程方式为 Metro 应用程序控件设置 control x:Uid 属性？

> ID：15887843
> 
> 赞同：3
> 
> 时间：2013-04-08T19:59:05.743
> 
> 标签：c#, xaml, windows-8, microsoft-metro, windows-store-apps

我需要以编程方式设置某些控件的 x:Uid 属性吗？此属性用于本地化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T20:24:19.893

我在这个问题上不是很强大，但如果我们谈论的是同一件事，你可以在这里看到：[BamlLocalizableResourceKey.Uid 属性](http://msdn.microsoft.com/en-us/library/system.windows.markup.localizer.bamllocalizableresourcekey.uid.aspx)

公共属性只有一个 get，因此您无法从 C# 代码轻松更改它。

```
public string Uid { get; } 
```

查看更多[x:Uid 指令](http://msdn.microsoft.com/en-us/library/bb613571.aspx)以发现此属性设置为指令，而不像 XAML 中的其他属性。

# java - 具有泛型返回的方法中的类型不匹配错误（为什么我必须在此方法中对泛型类型进行强制转换，而不是在类似的方法中？）

> ID：15887844
> 
> 赞同：3
> 
> 时间：2013-04-08T19:59:05.900
> 
> 标签：java, generics, selenium-webdriver, nosuchelementexception

我从需要通用返回类型的方法中收到以下错误：

```
Description Resource    Path    Location    Type
Type mismatch: cannot convert from PageTypeOne to P SecuredPage.java 
```

我可以通过将对象转换为泛型类型参数来消除错误，但我不明白为什么我需要在这个特定的方法中执行此操作，而不是在我在其他类的其他地方编写的其他类似方法中。

项目的基本结构是这样的：

用于不安全网页的基类 Page
用于所有安全网页的基类 SecuredPage

今天早些时候我有一个类似的问题，在 Stack Overflow 社区的帮助下得到了解决：[Bound mismatch error and java generic method](https://stackoverflow.com/questions/15883896/bound-mismatch-error-and-java-generic-method)。

我现在用类似的方法遇到了另一个问题。

带有构建页面的辅助方法的基本页面类是这样的：

```
public abstract class Page<T extends Page<T>> extends SlowLoadableComponent<T> {

    protected static final <T extends Page<T>> T constructPage(WebDriver driver, 
    int timeoutInSeconds, java.lang.Class<T> pageClass) 
    {
        Page<T> p = null;

        try {
            Constructor<T> pageConstructor = pageClass.getConstructor(
                WebDriver.class, String.class, Integer.TYPE);
            p = pageConstructor.newInstance(driver, driver.getCurrentUrl(), 
                timeoutInSeconds);
            p.get();

        } catch(Exception e) {

        }

        return pageClass.cast(p);       
    }
} 
```

SecuredPage 类如下：

```
public class SecuredPage<T extends SecuredPage<T>> extends Page<T> {

    .....
} 
```

这是我试图从 SecuredPage 中实现的方法——我希望能够有一个方法，该方法将返回两种类型的页面，这些页面是在我的 Web 应用程序中打开方法中的链接所产生的：

```
public final <P extends SecuredPage<P>> P loadContext(final String context) throws
NoSuchElementException {
    Menu m = pageHeader.getMenu();
    WebElement link = m.clickLink(context);
    String linkHref = link.getAttribute("href");

    if (linkHref.contains("somematchtext")) {
            return Page.constructPage(getDriver(), getTimeoutInSeconds(),   
                PageTypeOne.class); <==== This is where I get the error
    } else if (linkHref.contains("someothermatchtext")) {
            return Page.constructPage(getDriver(), getTimeoutInSeconds(), 
                PageTypeTwo.class); <==== This is wheere I get the error
    }
 } 
```

PageTypeOne 和 PageTypeTwo 都扩展 SecuredPage：

```
public final class PageTypeOne extends SecuredPage<PageTypeOne> {
    .....
}

public final class PageTypeTwo extends SecuredPage<PageTypeTwo> {
    .....
} 
```

我的 LoginPage 类中有一个类似的方法，如果有人尝试使用无效凭据登录，则返回 LoginPage；如果他们使用有效凭据登录，则返回 HomePage（扩展 SecuredPage）。我没有用那种方法得到这个错误。我的 Page 类中的constructPage 方法也没有出现错误，所以我真的不明白为什么我在 SecuredPage 中的 loadContext 方法出现此错误：

```
public final class LoginPage extends Page<LoginPage>  {

    public final HomePage loginWithGoodCredentials(final User user) {
        return login(user, HomePage.class);
    }

    public final LoginPage loginWithBadCredentials(final User user) {
        return login(user, LoginPage.class);
    }

    public final <T extends Page<T>> T login(final User user, final Class<T>     
        expectedPage) {
        enterUsername(user.getUsername());
        enterPassword(user.getPassword());
        loginButton.click();

        return Page.constructPage(getDriver(), getTimeoutInSeconds(), 
            expectedPage);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T21:31:05.310

`P`通常，编译器从方法签名（在您的情况下）推断出方法泛型类型（在您的情况`loadContext`下）。但是`loadContext`方法并没有`P`在参数上使用来帮助编译器推断`P`。

相反，您正在强制编译器`P`从方法中推断类型。你想让它相信是`PageTypeOne`。不是这样工作的。

假设有人在方法调用中指定了泛型参数：

```
securedpageInstance.<SomeCompliantClassWithPBounds>loadContext(...) 
```

`SomeCompliantClassWithPBounds`可能不同于`PageTypeOne`.

您的第二个示例有效，因为您有`Class<T>`方法`login`签名。编译器知道谁是`T`并且确定返回类型是相同的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T22:19:36.163

我同意 dcernahoschi 的回答。

要继续，您可以定义`loadContext`并使用从这里开始`public final SecuredPage<? extends SecuredPage<?>> loadContext(...)`的“未知”子类。 您还可以将代码更改为稍后，“欺骗”编译器以允许类似`SecuredPage`
`loadContext``return (P) Page.constructPage(...);``PageTypeOne page = loadContext(...);`

我强烈建议使用第一种方法，因为调用代码不应该知道`loadContext()`. 另一方面，如果调用代码期望加载某个页面，它应该传递页面的类（并且你去掉`if/else`in `loadContext`），就像你的登录示例一样。

# c++ - 不同对象的数组

> ID：15887849
> 
> 赞同：0
> 
> 时间：2013-04-08T19:59:20.493
> 
> 标签：c++, arrays

好吧，我想做的基本上就是这个。

我有一个 Account 类，然后我有一个从 Account 类继承的 CheckingAccount 和 SavingsAccount 类。

在我的程序中，我有一个名为 accounts 的数组。它将保存两种类型的帐户的对象。

```
Account** accounts;
accounts = new Account*[numAccounts];

accountFile >> tempAccountNum >> tempBalance >> tempTransFee;
CheckingAccount tempAccount(tempBalance, tempAccountNum, tempTransFee);
accounts[i] = tempAccount; 
```

尝试将 tempAccount 分配给 accounts 数组时出现错误。

不存在从“CheckingAccount”到“Account”的合适转换函数。

如何使帐户数组包含两种对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T20:00:37.950

中的每个元素`accounts`都是一个`Account*`. 也就是说，一个“指向”的指针`Account`。您正在尝试`Account`直接分配一个。相反，您应该使用该帐户的地址：

```
accounts[i] = &tempAccount; 
```

`tempAccount`请记住，一旦超出范围，此指针将指向无效对象。

考虑避免使用数组和指针。除非你有充分的理由不这样做，否则我会使用 a `std::vector`of `Account`s（不是`Account*`s）：

```
std::vector<Account> accounts;

accountFile >> tempAccountNum >> tempBalance >> tempTransFee;
accounts.emplace_back(tempBalance, tempAccountNum, tempTransFee); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T20:03:51.463

我相信您需要将 tempAccount 的地址分配到 accounts 数组中。

帐户[i] = &tempAccount;

因为，在处理 C++ 中的多态性时，您使用的是对象的地址而不是对象本身。

# c++ - 使用 blitz++ 声明 3d 数组

> ID：15887852
> 
> 赞同：0
> 
> 时间：2013-04-08T19:59:24.570
> 
> 标签：c++, multidimensional-array, blitz++

如何使用 blitz++ 声明 3d 数组（例如嵌套在数组中的数组，而数组又嵌套在数组中）？假设尺寸是 3,4,5。另外我将如何访问所述数组元素？你能告诉我如何获得这个多维数组的每个维度的大小吗？就像 c++ 向量一样，有 oneDvec.size()、twoDvec.size() 或 twoDvec[di].size() 等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T20:16:46.623

```
// declare
blitz::Array<double, 3> blitzArray( 3, 4, 5 );
// access
blitzArray(0,0,0) = 1.0001; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T07:18:45.313

是的，1D、2D 和 3D 数组大小分别是 blitzArray.extent(0)、blitzArray.extent(1) 和 blitzArray.extent(2)。

# wordpress - 管理员中的内存列表自定义帖子类型不足？

> ID：15887853
> 
> 赞同：1
> 
> 时间：2013-04-08T19:59:35.167
> 
> 标签：wordpress, memory, crash, custom-post-type

这是一个非常奇怪和严重的问题。转到我的**管理区域中的“****所有图像**” （相当于所有帖子）显示**内存耗尽**错误和白屏。这是在将内存增加到非常高的数量之后。

 ****我想我想知道为什么需要这么多内存来构建一个简单的列表？

我认为这一定是我的错误，编码。也许我在声明帖子类型时做错了什么？这个领域有哪些常见的“陷阱”？我不想只说“增加内存”，因为对于一个严重的问题来说，这似乎是一个弱小的工作。

```
add_filter( 'manage_edit-image_columns', 'symbiostock_image_manager_edit_columns' );
function symbiostock_image_manager_edit_columns( $columns )
{
    $columns = array(
         'cb' => '<input type="checkbox" />',
        'image_preview' => 'Preview',
        'date' => 'Uploaded',
        'title' => 'Image Name',
        'description' => 'Description',
        'exclusive' => 'Exclusive',
        'price_bloggee' => 'Bloggee',
        'price_small' => 'Small',
        'price_medium' => 'Medium',
        'price_large' => 'Large',
        'price_vector' => 'Vector',
        'cat' => 'Category',
        'tag' => 'Keywords' 
    );

    return $columns;
}

add_action( 'manage_image_posts_custom_column', 'symbiostock_image_manager_custom_columns' );
function symbiostock_image_manager_custom_columns( $column )
{
    global $post;

    $custom = get_post_custom();

    switch ( $column ) {

         case 'date':            

            break;      

        case 'image_preview':

            echo '<img class="admin_preview_pic" alt="Image Preview" src="' . $custom['symbiostock_minipic'][0] . '" />';

            break;

        case 'description':

            the_excerpt();

            break;

        case 'exclusive':

            echo $exclusive = ucwords(str_replace('_', ' ', $custom[ "exclusive" ][ 0 ]));

            break;

        case 'discount_percent':

            echo $discount_percent = $custom[ "discount_percent" ][ 0 ];

            break;

        case 'price_bloggee':

            echo $price_bloggee = $custom[ "price_bloggee" ][ 0 ];

            break;

        case 'price_small':

            echo $custom[ "price_small" ][ 0 ];

            break;

        case 'price_medium':

            echo $custom[ "price_medium" ][ 0 ];

            break;

        case 'price_large':

            echo $custom[ "price_large" ][ 0 ];

            break;

        case 'price_vector':

            echo $custom[ "price_vector" ][ 0 ];

            break;

        case 'cat':

            echo get_the_term_list( $post->ID, 'image-type', '', ', ', '' );

            break;

        case 'tag':

            echo get_the_term_list( $post->ID, 'image-tags', '', ', ', '' );

            break;

    } //$column    
} 
```

也许我如何声明自定义帖子类型存在问题。这是代码以防万一：

```
register_taxonomy( 'image-tags', array(
     'image' 
), array(
     'hierarchical' => false,
     'rewrite' => true,
     'query_var' => true,
    'singular_label' => 'Image Keyword',
    'exclude_from_search' =>false,
    'hierarchical'            => false,
    'labels'                  => $labels,
    'show_ui'                 => true,
    'show_admin_column'       => true,

    'slug' => 'image-tag',               
    'labels' => array(
        'name' => _x( 'Image Keywords', 'taxonomy general name' ),
        'singular_name' => _x( 'Keywords', 'taxonomy singular name' ),
        'search_items' =>  __( 'Search Images' ),
        'all_items' => __( 'All Image Keywords' ),
        'edit_item' => __( 'Edit Image Keyword' ),
        'update_item' => __( 'Update Image Keyword' ),
        'add_new_item' => __( 'Add New Image Keyword' ),
        'new_item_name' => __( 'New Keyword Name' ),
        'menu_name' => __( 'Image Keywords' ),
        ),
    'rewrite' => array(
        'slug' => 'search-images', // This controls the base slug that will display before each term
        'with_front' => false, 
    ),
) ); 
```****

# python - 从 python 脚本中运行 python 脚本

> ID：15887857
> 
> 赞同：1
> 
> 时间：2013-04-08T19:59:49.750
> 
> 标签：python, command

我是 Python 新手（流利的 C++），并且正在按需学习。我编写了一个脚本，它接受多个参数并创建和保存一个 matplotlib 图。它没有函数、方法、类等。它只是一系列产生图形的指令。我想编写另一个脚本，以尽可能简单地执行该脚本及其参数。

这在 Python 中可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T20:03:25.233

看看stdlib的子进程模块：[http ://docs.python.org/2/library/subprocess.html](http://docs.python.org/2/library/subprocess.html)

```
from subprocess import call
call([sys.executable, 'script.py', arg1, arg2]) 
```

有关您的选项的完整列表，请查看类似的问题：[Calling an external command in Python](https://stackoverflow.com/questions/89228/calling-an-external-command-in-python)

**阅读我上面提供的链接上的文档**，特别是如果您需要此调用是安全的（确保您*信任*或*验证*这些参数）。

**更新**：

作为替代（和更好）的选择是通过仅导入它来运行此代码。

如果您清理它并将其放入一个函数中，然后从您的主程序中导入并调用它，您不需要将该模块作为脚本执行，如果您需要，您仍然可以轻松地将它作为独立脚本运行：

```
# script.py
def func(param1, param2, param3)
    #...

if __name__=="__main__":
    # get params...
    func(param1, param2, param3)
    # handle output etc...

# main.py
# ...
from script import func
# ...
func(param1, param2, param3)
# ... 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-08T20:31:38.743

您可以使用子流程模块。

```
import subprocess

subprocess.Popen([sys.executable, "save_graph.py", parameter1, parameter2]) 
```

执行后，此代码片段将等待“save_graph.py”完全执行，然后再继续。

如果您想生成一个与其父进程分离的子进程，则必须执行以下操作：

```
DETACHED_PROCESS = 0x00000008
subprocess.Popen([sys.executable, "smtp_email.py", email, vcode], creationflags = DETACHED_PROCESS).pid 
```

# sbt - sbt 版本因项目目录而异，在同一操作系统上

> ID：15887862
> 
> 赞同：0
> 
> 时间：2013-04-08T20:00:13.153
> 
> 标签：sbt

当我`sbt`在一个项目目录上运行`Detected sbt version 0.12.1`时，启动时会出现问题。

打字`about`，它会重复那个版本。

但是，`sbt`在不同的项目目录中运行会将其版本标识为`0.11.3`.

即使在同一个终端会话中，这也会重现。版本只是因项目目录而异。在 build.sbt 文件中找不到任何会导致此问题的显式部分。

这有什么可以解释的？

就我而言，我想在这两种情况下都使用 sbt 0.12.1，如何强制该版本也用于以后的项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-02T21:08:17.183

该项目是一个 SBT 多项目，由于每个子项目都是一个单独的项目，您可以使用它 `project/build.properties`来设置不同版本的 SBT。该命令只是特定于项目的。

```
jacek:~/sandbox/stackoverflow
$ mkdir sbt-sample-project

jacek:~/sandbox/stackoverflow
$ cd sbt-sample-project

jacek:~/sandbox/stackoverflow/sbt-sample-project
$ tree
.

0 directories, 0 files

jacek:~/sandbox/stackoverflow/sbt-sample-project
$ sbt about
[info] Loading global plugins from /Users/jacek/.sbt/0.13/plugins
[info] Set current project to sbt-sample-project (in build file:/Users/jacek/sandbox/stackoverflow/sbt-sample-project/)
[info] This is sbt 0.13.0
[info] The current project is {file:/Users/jacek/sandbox/stackoverflow/sbt-sample-project/}sbt-sample-project 0.1-SNAPSHOT
[info] The current project is built against Scala 2.10.2
[info] Available Plugins: com.typesafe.sbt.SbtGit, com.typesafe.sbt.SbtProguard, growl.GrowlingTests, org.sbtidea.SbtIdeaPlugin, com.timushev.sbt.updates.UpdatesPlugin
[info] sbt, sbt plugins, and build definitions are using Scala 2.10.2

jacek:~/sandbox/stackoverflow/sbt-sample-project
$ mkdir project

jacek:~/sandbox/stackoverflow/sbt-sample-project
$ echo "sbt.version=0.13.1-RC5" > project/build.properties

jacek:~/sandbox/stackoverflow/sbt-sample-project
$ sbt about
[info] Loading global plugins from /Users/jacek/.sbt/0.13/plugins
[info] Updating {file:/Users/jacek/.sbt/0.13/plugins/}global-plugins...
[info] Resolving org.fusesource.jansi#jansi;1.4 ...
[info] Done updating.
[info] Loading project definition from /Users/jacek/sandbox/stackoverflow/sbt-sample-project/project
[info] Updating {file:/Users/jacek/sandbox/stackoverflow/sbt-sample-project/project/}sbt-sample-project-build...
[info] Resolving org.fusesource.jansi#jansi;1.4 ...
[info] Done updating.
[info] Set current project to sbt-sample-project (in build file:/Users/jacek/sandbox/stackoverflow/sbt-sample-project/)
[info] This is sbt 0.13.1-RC5
[info] The current project is {file:/Users/jacek/sandbox/stackoverflow/sbt-sample-project/}sbt-sample-project 0.1-SNAPSHOT
[info] The current project is built against Scala 2.10.3
[info] Available Plugins: com.typesafe.sbt.SbtGit, com.typesafe.sbt.SbtProguard, growl.GrowlingTests, org.sbtidea.SbtIdeaPlugin, com.timushev.sbt.updates.UpdatesPlugin
[info] sbt, sbt plugins, and build definitions are using Scala 2.10.3 
```

# ruby - rake db:schema:migrate 错误

> ID：15887867
> 
> 赞同：1
> 
> 时间：2013-04-08T20:00:33.373
> 
> 标签：ruby

我正在尝试设置此[https://github.com/jamesu/tubehub](https://github.com/jamesu/tubehub)项目并收到此错误。我也尝试了所有的东西并用谷歌搜索，但这没有帮助。

```
root@srv:/var/www/synch# bundle exec rake db:schema:load --trace
The source :rubygems is deprecated because HTTP requests are insecure.
Please change your source to 'https://rubygems.org' if possible, or 'http://rubygems.org' if not.
** Invoke db:schema:load (first_time)
** Invoke environment (first_time)
** Execute environment
rake aborted!
/var/www/synch/util.rb:8: undefined (?...) sequence: /^(.*?)((?<!&)#|\#)(.*)$/
/var/www/synch/util.rb:9: undefined (?...) sequence: /(?:\#)(?<!&#)(?:\#)*(.*)$/
/usr/lib/ruby/gems/1.8/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `require'
/usr/lib/ruby/gems/1.8/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `require'
/usr/lib/ruby/gems/1.8/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:236:in `load_dependency'
/usr/lib/ruby/gems/1.8/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `require'
/var/www/synch/core.rb:37
/var/www/synch/core.rb:36:in `each'
/var/www/synch/core.rb:36
/var/www/synch/Rakefile:2:in `require'
/var/www/synch/Rakefile:2
/usr/lib/ruby/gems/1.8/gems/rake-10.0.3/lib/rake/task.rb:228:in `call'
/usr/lib/ruby/gems/1.8/gems/rake-10.0.3/lib/rake/task.rb:228:in `execute'
/usr/lib/ruby/gems/1.8/gems/rake-10.0.3/lib/rake/task.rb:223:in `each'
/usr/lib/ruby/gems/1.8/gems/rake-10.0.3/lib/rake/task.rb:223:in `execute'
/usr/lib/ruby/gems/1.8/gems/rake-10.0.3/lib/rake/task.rb:166:in `invoke_with_call_chain'
/usr/lib/ruby/1.8/monitor.rb:242:in `synchronize'
/usr/lib/ruby/gems/1.8/gems/rake-10.0.3/lib/rake/task.rb:159:in `invoke_with_call_chain'
/usr/lib/ruby/gems/1.8/gems/rake-10.0.3/lib/rake/task.rb:187:in `invoke_prerequisites'
/usr/lib/ruby/gems/1.8/gems/rake-10.0.3/lib/rake/task.rb:185:in `each'
/usr/lib/ruby/gems/1.8/gems/rake-10.0.3/lib/rake/task.rb:185:in `invoke_prerequisites'
/usr/lib/ruby/gems/1.8/gems/rake-10.0.3/lib/rake/task.rb:165:in `invoke_with_call_chain'
/usr/lib/ruby/1.8/monitor.rb:242:in `synchronize'
/usr/lib/ruby/gems/1.8/gems/rake-10.0.3/lib/rake/task.rb:159:in `invoke_with_call_chain'
/usr/lib/ruby/gems/1.8/gems/rake-10.0.3/lib/rake/task.rb:152:in `invoke'
/usr/lib/ruby/gems/1.8/gems/rake-10.0.3/lib/rake/application.rb:143:in `invoke_task'
/usr/lib/ruby/gems/1.8/gems/rake-10.0.3/lib/rake/application.rb:101:in `top_level'
/usr/lib/ruby/gems/1.8/gems/rake-10.0.3/lib/rake/application.rb:101:in `each'
/usr/lib/ruby/gems/1.8/gems/rake-10.0.3/lib/rake/application.rb:101:in `top_level'
/usr/lib/ruby/gems/1.8/gems/rake-10.0.3/lib/rake/application.rb:110:in `run_with_threads'
/usr/lib/ruby/gems/1.8/gems/rake-10.0.3/lib/rake/application.rb:95:in `top_level'
/usr/lib/ruby/gems/1.8/gems/rake-10.0.3/lib/rake/application.rb:73:in `run'
/usr/lib/ruby/gems/1.8/gems/rake-10.0.3/lib/rake/application.rb:160:in `standard_exception_handling'
/usr/lib/ruby/gems/1.8/gems/rake-10.0.3/lib/rake/application.rb:70:in `run'
/usr/lib/ruby/gems/1.8/gems/rake-10.0.3/bin/rake:33
/usr/bin/rake:23:in `load'
/usr/bin/rake:23
Tasks: TOP => db:schema:load => environment 
```

我对红宝石完全是菜鸟；对不起愚蠢的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-08T23:34:30.370

I just replicated your issue and can confirm it is a ruby version problem. Using 1.8.7-p375 your issue arises. Using Ruby version 1.9.3-p545 the command runs just fine. The project maintainer should specify a ruby version in their project, I will file a github issue for them to clarify this. Other answers have alluded to this; use your favorite method to upgrade your ruby, I suggest [rbenv](https://github.com/sstephenson/rbenv).

# opencv - 大小几乎等于图像的大内核的 OPENCV 卷积

> ID：15887868
> 
> 赞同：2
> 
> 时间：2013-04-08T20:00:35.817
> 
> 标签：opencv, image-processing, signal-processing, fft, ifft

我的图像尺寸为 107x149。我的过滤器内核大小为 75x75。将图像与内核卷积的最佳方法是什么（就速度而言）？注意：过滤器是不可分离的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T20:12:14.227

通用`cv::filter2D`对于这种情况已经足够了。它使用基于 DFT 的算法来获得足够大的内核。

# reference - libldap.so：未定义的引用

> ID：15887870
> 
> 赞同：2
> 
> 时间：2013-04-08T20:00:38.293
> 
> 标签：reference, hyperlink, uwsgi

pip 在 vi​​rtualenv 中安装 uWSGI 时出现以下链接问题，我是否缺少一些包？

*** uWSGI 链接 ***

```
gcc -pthread -o /srv/www/ldap/bin/uwsgi  core/utils.o core/protocol.o core/socket.o core/logging.o core/master.o core/master_utils.o core/emperor.o core/notify.o core/mule.o core/subscription.o core/stats.o core/sendfile.o core/async.o core/master_checks.o core/offload.o core/io.o core/static.o core/websockets.o core/spooler.o core/snmp.o core/exceptions.o core/config.o core/setup_utils.o core/clock.o core/init.o core/buffer.o core/reader.o core/writer.o core/alarm.o core/plugins.o core/lock.o core/cache.o core/daemons.o core/errors.o core/hash.o core/master_events.o core/queue.o core/event.o core/signal.o core/strings.o core/progress.o core/timebomb.o core/ini.o core/rpc.o core/gateway.o core/loop.o core/cookie.o core/querystring.o core/rb_timers.o core/uwsgi.o proto/base.o proto/uwsgi.o proto/http.o proto/fastcgi.o proto/scgi.o lib/linux_ns.o core/zlib.o core/yaml.o core/ldap.o core/ssl.o core/legion.o proto/zeromq.o core/xmlconf.o core/sqlite3.o plugins/python/python_plugin.o plugins/python/pyutils.o plugins/python/pyloader.o plugins/python/wsgi_handlers.o plugins/pyth/usr/lib/x86_64-linux-gnu/libldap.so: undefined reference to `ber_write@OPENLDAP_2.4_2'

/usr/lib/x86_64-linux-gnu/libldap.so: undefined reference to `ber_memvfree_x@OPENLDAP_2.4_2'

/usr/lib/x86_64-linux-gnu/libldap.so: undefined reference to `ber_pvt_sb_copy_out@OPENLDAP_2.4_2'

/usr/lib/x86_64-linux-gnu/libldap.so: undefined reference to `ber_memfree_x@OPENLDAP_2.4_2'

/usr/lib/x86_64-linux-gnu/libldap.so: undefined reference to `ber_free@OPENLDAP_2.4_2'

/usr/lib/x86_64-linux-gnu/libldap.so: undefined reference to `ber_log_dump@OPENLDAP_2.4_2'

/usr/lib/x86_64-linux-gnu/libldap.so: undefined reference to `ber_pvt_sb_buf_init@OPENLDAP_2.4_2'

/usr/lib/x86_64-linux-gnu/libldap.so: undefined reference to `ber_pvt_socket_set_nonblock@OPENLDAP_2.4_2'

/usr/lib/x86_64-linux-gnu/libldap.so: undefined reference to `ber_bvreplace@OPENLDAP_2.4_2'

/usr/lib/x86_64-linux-gnu/libldap.so: undefined reference to `ber_bvfree@OPENLDAP_2.4_2'

/usr/lib/x86_64-linux-gnu/libldap.so: undefined reference to `ber_next_element@OPENLDAP_2.4_2'

/usr/lib/x86_64-linux-gnu/libldap.so: undefined reference to `ber_sockbuf_add_io@OPENLDAP_2.4_2'

/usr/lib/x86_64-linux-gnu/libldap.so: undefined reference to `ber_sockbuf_ctrl@OPENLDAP_2.4_2'

/usr/lib/x86_64-linux-gnu/libldap.so: undefined reference to `ber_bvarray_free@OPENLDAP_2.4_2'

/usr/lib/x86_64-linux-gnu/libldap.so: undefined reference to `ber_skip_data@OPENLDAP_2.4_2'

/usr/lib/x86_64-linux-gnu/libldap.so: undefined reference to `ber_skip_tag@OPENLDAP_2.4_2'

/usr/lib/x86_64-linux-gnu/libldap.so: undefined reference to `ber_first_element@OPENLDAP_2.4_2'

/usr/lib/x86_64-linux-gnu/libldap.so: undefined reference to `ber_bvecfree@OPENLDAP_2.4_2'

/usr/lib/x86_64-linux-gnu/libldap.so: undefined reference to `ber_strdup_x@OPENLDAP_2.4_2'

/usr/lib/x86_64-linux-gnu/libldap.so: undefined reference to `ber_get_stringbv@OPENLDAP_2.4_2'

/usr/lib/x86_64-linux-gnu/libldap.so: undefined reference to `ber_alloc_t@OPENLDAP_2.4_2'

/usr/lib/x86_64-linux-gnu/libldap.so: undefined reference to `ber_sockbuf_io_debug@OPENLDAP_2.4_2'

/usr/lib/x86_64-linux-gnu/libldap.so: undefined reference to `ber_dup@OPENLDAP_2.4_2'

/usr/lib/x86_64-linux-gnu/libldap.so: undefined reference to `ber_sockbuf_io_udp@OPENLDAP_2.4_2'

/usr/lib/x86_64-linux-gnu/libldap.so: undefined reference to `ber_init@OPENLDAP_2.4_2'

/usr/lib/x86_64-linux-gnu/libldap.so: undefined reference to `ber_set_option@OPENLDAP_2.4_2'

/usr/lib/x86_64-linux-gnu/libldap.so: undefined reference to `ber_pvt_sb_do_write@OPENLDAP_2.4_2'

/usr/lib/x86_64-linux-gnu/libldap.so: undefined reference to `ber_pvt_log_print@OPENLDAP_2.4_2'

/usr/lib/x86_64-linux-gnu/libldap.so: undefined reference to `ber_flatten2@OPENLDAP_2.4_2'

/usr/lib/x86_64-linux-gnu/libldap.so: undefined reference to `ber_pvt_sb_grow_buffer@OPENLDAP_2.4_2'

/usr/lib/x86_64-linux-gnu/libldap.so: undefined reference to `ber_read@OPENLDAP_2.4_2'

/usr/lib/x86_64-linux-gnu/libldap.so: undefined reference to `ber_pvt_log_printf@OPENLDAP_2.4_2'

/usr/lib/x86_64-linux-gnu/libldap.so: undefined reference to `ber_get_int@OPENLDAP_2.4_2'

/usr/lib/x86_64-linux-gnu/libldap.so: undefined reference to `ber_sockbuf_free@OPENLDAP_2.4_2'

/usr/lib/x86_64-linux-gnu/libldap.so: undefined reference to `ber_pvt_sb_buf_destroy@OPENLDAP_2.4_2'

/usr/lib/x86_64-linux-gnu/libldap.so: undefined reference to `ber_str2bv@OPENLDAP_2.4_2'

/usr/lib/x86_64-linux-gnu/libldap.so: undefined reference to `ber_int_sb_close@OPENLDAP_2.4_2'

/usr/lib/x86_64-linux-gnu/libldap.so: undefined reference to `ber_get_next@OPENLDAP_2.4_2'

/usr/lib/x86_64-linux-gnu/libldap.so: undefined reference to `ber_get_option@OPENLDAP_2.4_2'

/usr/lib/x86_64-linux-gnu/libldap.so: undefined reference to `ber_scanf@OPENLDAP_2.4_2'

/usr/lib/x86_64-linux-gnu/libldap.so: undefined reference to `ber_rewind@OPENLDAP_2.4_2'

/usr/lib/x86_64-linux-gnu/libldap.so: undefined reference to `ber_sockbuf_io_tcp@OPENLDAP_2.4_2'

/usr/lib/x86_64-linux-gnu/libldap.so: undefined reference to `ber_ptrlen@OPENLDAP_2.4_2'

/usr/lib/x86_64-linux-gnu/libldap.so: undefined reference to `ber_dupbv@OPENLDAP_2.4_2'

/usr/lib/x86_64-linux-gnu/libldap.so: undefined reference to `ber_flatten@OPENLDAP_2.4_2'

/usr/lib/x86_64-linux-gnu/libldap.so: undefined reference to `ber_printf@OPENLDAP_2.4_2'

/usr/lib/x86_64-linux-gnu/libldap.so: undefined reference to `ber_strndup_x@OPENLDAP_2.4_2'

/usr/lib/x86_64-linux-gnu/libldap.so: undefined reference to `ber_strdup@OPENLDAP_2.4_2'

/usr/lib/x86_64-linux-gnu/libldap.so: undefined reference to `ber_memcalloc@OPENLDAP_2.4_2'

/usr/lib/x86_64-linux-gnu/libldap.so: undefined reference to `ber_reset@OPENLDAP_2.4_2'

/usr/lib/x86_64-linux-gnu/libldap.so: undefined reference to `ber_sockbuf_remove_io@OPENLDAP_2.4_2'

/usr/lib/x86_64-linux-gnu/libldap.so: undefined reference to `ber_sockbuf_io_fd@OPENLDAP_2.4_2'

/usr/lib/x86_64-linux-gnu/libldap.so: undefined reference to `ber_memcalloc_x@OPENLDAP_2.4_2'

/usr/lib/x86_64-linux-gnu/libldap.so: undefined reference to `ber_memrealloc@OPENLDAP_2.4_2'

/usr/lib/x86_64-linux-gnu/libldap.so: undefined reference to `ber_init2@OPENLDAP_2.4_2'

/usr/lib/x86_64-linux-gnu/libldap.so: undefined reference to `ber_int_sb_read@OPENLDAP_2.4_2'

/usr/lib/x86_64-linux-gnu/libldap.so: undefined reference to `ber_memfree@OPENLDAP_2.4_2'

/usr/lib/x86_64-linux-gnu/libldap.so: undefined reference to `ber_memrealloc_x@OPENLDAP_2.4_2'

/usr/lib/x86_64-linux-gnu/libldap.so: undefined reference to `ber_memvfree@OPENLDAP_2.4_2'

/usr/lib/x86_64-linux-gnu/libldap.so: undefined reference to `ber_memalloc@OPENLDAP_2.4_2'

/usr/lib/x86_64-linux-gnu/libldap.so: undefined reference to `ber_decode_oid@OPENLDAP_2.4_2'

/usr/lib/x86_64-linux-gnu/libldap.so: undefined reference to `ber_memalloc_x@OPENLDAP_2.4_2'

/usr/lib/x86_64-linux-gnu/libldap.so: undefined reference to `ber_flush2@OPENLDAP_2.4_2'

/usr/lib/x86_64-linux-gnu/libldap.so: undefined reference to `ber_peek_tag@OPENLDAP_2.4_2'

/usr/lib/x86_64-linux-gnu/libldap.so: undefined reference to `ber_sockbuf_io_readahead@OPENLDAP_2.4_2'

/usr/lib/x86_64-linux-gnu/libldap.so: undefined reference to `ber_sockbuf_alloc@OPENLDAP_2.4_2'

/usr/lib/x86_64-linux-gnu/libldap.so: undefined reference to `ber_get_enum@OPENLDAP_2.4_2'

collect2: ld returned 1 exit status 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:06:07.640

该问题是由 liblidap2-dev 为了编译 openldap 服务器而安装的 libldap.so 引起的。

一旦我删除了那个包 uwsgi 就开始重新编译。

# c++ - C++ 中仍然使用 PThreads 库吗？

> ID：15887874
> 
> 赞同：-2
> 
> 时间：2013-04-08T20:00:46.783
> 
> 标签：c++, multithreading, pthreads

我想知道这个 2003 年的代码是否仍然是最先进的？它是 C++ 中使用 PThreads 的消费者和生产者示例。

[http://www.mario-konrad.ch/wiki/doku.php?id=programming:multithreading:tutorial-06](http://www.mario-konrad.ch/wiki/doku.php?id=programming:multithreading:tutorial-06)

如果不是，那么在 C++ 中使用线程的现代方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T20:07:41.723

是的，pthreads 库仍然用于线程。有一些更高级别的库（boost，或者如果你有一个兼容 c++ 11 的编译器，标准库）也会为你提供线程功能，尽管对于某些事情你仍然需要回退到普通的 pthread 调用。boost::thread 和 std::thread 库使用 pthread 库在支持 pthread 的操作系统上实现它们，因此即使使用这些库，您也是在间接使用 pthread。

所以我想简短的回答是肯定的，代码仍然有效，但现在还有其他选项可用。

另外作为旁注，我知道英特尔有他们的线程构建块可用，但我没有使用它。

# android - SimpleCursorAdapter 错误

> ID：15887878
> 
> 赞同：-1
> 
> 时间：2013-04-08T20:01:10.563
> 
> 标签：android, android-cursoradapter

当我使用 SimpleCursorAdapter 的构造函数时，它告诉我构造函数未定义。

我应该怎么办？

```
public class ReminderListFragment extends ListFragment implements LoaderCallbacks<Cursor> {
private SimpleCursorAdapter mAdapter;

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    String[] from = new String[] {ReminderProvider.COLUMN_TITLE};
    int[] to = new int[] {R.id.text1};
    mAdapter = new SimpleCursorAdapter(getActivity(), R.layout.reminder_row, null, from, 2, 0);
    setListAdapter(mAdapter);
    getLoaderManager().initLoader(0, null, this);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T20:03:32.837

将这一行改为这一行：

```
mAdapter = new SimpleCursorAdapter(getActivity(), 
                    R.layout.reminder_row, null, from, to, 0); 
```

你有一个“2”而不是“to”

SimpleCursorAdapter 的构造函数：

```
SimpleCursorAdapter(Context context, int layout, Cursor c, 
                                String[] from, int[] to, int flags) 
```

来自：http: [//developer.android.com/reference/android/widget/SimpleCursorAdapter.html](http://developer.android.com/reference/android/widget/SimpleCursorAdapter.html)

# python - 将单项列表转换为整数

> ID：15887885
> 
> 赞同：15
> 
> 时间：2013-04-08T20:01:45.957
> 
> 标签：python

我被要求接受一个整数列表 (x)，将列表中的第一个值和最后一个值相加，然后返回一个整数和总和。我已经使用以下代码来做到这一点，但我遇到的问题是，当我尝试评估总和时，它实际上是一个单项列表而不是整数。我试图将它转换为 int 但我似乎无法让它工作。

```
def addFirstAndLast(x):  
    lengthOfList = len(x)  
    firstDigit = x[0:1]  
    lastDigit = x[lengthOfList:lengthOfList-1]  
    sum = firstDigit + lastDigit  
    return sum 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-08T20:03:13.010

# 使用索引

您正在对列表进行切片，返回列表。在这里，您应该改用索引：

```
firstDigit = x[0]
lastDigit = x[-1] 
```

* * *

# 为什么切片对你来说是错误的：

当您这样做时`x[0:1]`，您会将**项目列表**从列表的开头带到第一个间隔。

```
 item0, item1, item2, item3
^ interval 0
        ^ interval 1
              ^ interval 2 
                     ^ interval 3 
```

`x[0:2]`例如，这样做会返回项目 0 和 1。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-08T20:03:35.653

这一切都归结为：

```
def addFirstAndLast(x): 
    return x[0] + x[-1] 
```

在 Python 中，负列表索引的意思是：从列表的右侧开始向左方向索引，其中从右到左的第一个位置是`-1`，第二个位置是`-2`，最后一个位置是`-len(lst)`。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-08T20:04:06.880

使用[切片表示法](https://stackoverflow.com/a/930398/2157793)：

```
def addFirstAndLast(x):  
    return x[0] + x[-1] 
```

**x[0]** = 将为您提供列表的第 0^个索引，**第一个值**。

**x[-1]** = 将为您提供列表的**最后一个**元素。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-11-05T23:06:04.643

我只是在这里为任何像我一样在列表推导中苦苦挣扎的人添加一个特殊情况，它返回一个列表。@Thomas Orozco 的回答救了我。这是一个非常简单的例子：

```
mylist=[1,5,6]
[el for el in mylist if el==5]
>> [5] #returns a *list* containing the element -- not what I wanted 
```

添加下标会从列表中提取元素。

```
[el for el in mylist if el==5][0]
>> 5 #returns the element itself 
```

如果您希望将多个元素作为元组（而不是列表）返回，您可以将整个语句括起来：
`tuple([el for el in l if (el==5 or el==6)])`

# javascript - Windows 8 javascript html5 应用程序不解析 xml

> ID：15887890
> 
> 赞同：0
> 
> 时间：2013-04-08T20:02:05.067
> 
> 标签：javascript, xml, html, windows-8, xml-parsing

当我使用本地 HTML 和 XML 文件在 Firefox 中加载它时，我的 javascript XML 解析代码工作正常，但是当我使用相同的代码在 Visual Studio 2012（HTML5 javascript 应用程序）中构建我的应用程序时，它无法解析 XML 文件。

```
<script type="text/javascript">
if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
    xmlhttp = new XMLHttpRequest();
}
else {// code for IE6, IE5
    xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
}
xmlhttp.open("GET", "pages/home/example.xml", false);
xmlhttp.send();
xmlDoc = xmlhttp.responseXML;

//Content
txt = xmlDoc.getElementsByTagName("Symbol")[0].childNodes[0].nodeValue;
document.write(txt + "  "); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T20:06:38.873

您只能在加载后获取 responseXML。

```
var xmlDoc
xmlhttp.open("GET", "pages/home/example.xml", false);
xmlhttp.onload = function(){
  xmlDoc = xmlhttp.responseXML
}
xmlhttp.send(); 
```

# html - Chrome/Firefox：禁用网站上的键盘快捷键

> ID：15887894
> 
> 赞同：3
> 
> 时间：2013-04-08T20:02:18.787
> 
> 标签：html, google-chrome, firefox

我在 Chrome 和 Firefox 中使用 Outlook Web Access。在 OS X 上，网页使用键盘快捷键 Option+S 发送电子邮件。不幸的是，在 OS X 上，通常使用相同的快捷方式来键入德语变音符号“ß”。因此，每当我现在尝试输入带有该字符的单词时，网站都会发送我的电子邮件。您是否知道在某些网站上禁用此类快捷方式的任何插件或其他方法？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-10-06T02:34:53.503

您可以告诉 Firefox 禁用网站的所有键盘快捷键（以及其他几个选项）。**在about:config**页面上查看此首选项。

`permissions.default.shortcuts (default = 0)`

这些值可以设置如下：

```
UNKNOWN: Services.perms.UNKNOWN_ACTION [0]
ALLOW: Services.perms.ALLOW_ACTION [1]
BLOCK: Services.perms.DENY_ACTION [2]
PROMPT: Services.perms.PROMPT_ACTION [3] 
```

请注意，可能会有一些不良副作用，例如我的`fn+delete`macOS 系统功能不再适用于删除光标后的*下一个*字符......也许有解决方法？

我在这里找到了这个解决方案：

*   [https://support.mozilla.org/gl/questions/1241294](https://support.mozilla.org/gl/questions/1241294)

* * *

更多上下文：

我在 Macbook (OSX) 上的 Firefox 中的 Outlook Web App (OWA) 遇到了类似的问题，我想在其中刷新页面，`cmd+r`但 OWA 会将快捷方式解释为“回复”并弹出一个新窗口来回复选择的消息，而不是简单地刷新页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-28T01:58:04.123

使用操作系统级别的工具，例如 Automator，根据浏览器 URL 切换键绑定：

*   [使用 OS X 的 Automator 创建您自己的软件的指南](http://www.itproportal.com/2013/07/19/a-guide-to-using-os-xs-automator-to-create-your-own-software/)
*   [Webkit/Safari/Firefox/API：我可以以编程方式读取/提取多个标签的 URL 吗？](https://stackoverflow.com/questions/299200/)
*   [有没有办法通过 Shell 脚本、AppleScript 或 Automator 工作流程触发热键/键盘快捷键？](https://stackoverflow.com/questions/7810703/)
*   [MacOS，如何删除键盘快捷键中未使用的服务项目](https://stackoverflow.com/questions/17257715/)

# mysql - mySQL 编码不正确

> ID：15887895
> 
> 赞同：2
> 
> 时间：2013-04-08T20:02:39.753
> 
> 标签：mysql, encoding, loading

o 前几天晚上我发了一篇关于从文本文件中删除重复项的帖子。我得到了一些很大的帮助，我刚刚发现我的 java 解析器正在正确删除重复项。我尝试将文件加载到 mysql 数据库中，但它仍然说有重复。（连同错误消息，它会打印出出现两次的第一个文本字段。）所以我在输出文件中查看了这个文本，看看那里是否确实存在重复。然而，同一个名字并没有出现两次，唯一不同的是：

阿吉拉尔，埃尔南

阿吉拉尔，埃尔南

a 上面有一个破折号。这是错误消息：

错误 1062 (23000)：重复条目 'Aguilar, Hernán' 用于键 'PRIMARY'

我认为即使名称不同，当我使用在 linux 上运行的 mysql 加载表时，它也会将其读取为重复项。这看起来像是编码问题。我在 Windows 上运行的 java 解析器，因为我们在 linux 上运行程序时遇到了类似的问题，并且它打印的所有文本都不正确。（它弄乱了字符。）在 Windows 上它运行良好并且名称打印正确。我正在解析的这个文件有外国电影，所以里面有很多奇怪的字符。我不知道如何解决这样的问题。文本文件 100% 正确，我只需要知道如何将其加载到 mysql 表中，而不会在此过程中弄乱编码。我使用的当前命令：

```
LOAD DATA INFILE 'filename' INTO TABLE tableName FIELDS TERMINATED BY '\t'; 
```

我使用此命令创建了许多其他表，但这些表一开始不包含重复项或名称。我已经阅读了一些建议如何解决此问题的帖子，但我对 mysql 很陌生。我不知道何时何地输入他们提到的内容或如何检查当前的编码方案。

这是我读到的帖子：

> 它不起作用，因为您在数据获取过程中遇到了这个问题并且您正在设置显示编码 - 已经太晚了。只需使用正确的方法（如 mysqli_set_charset() 或在连接到数据库后立即查询 SET NAMES UTF8 ）在连接期间确保正确编码。

该人不是在谈论加载表，而是在运行查询。我不确定这样的事情是否可行。这是一个学校项目，所以我们得到了一个可以使用的数据库。我什至不确定我是否有权更改编码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T22:32:30.143

我想到了。

ALTER DATABASE llo 默认字符集 utf8 整理 utf8_general_CI;

此命令有效，但不区分大小写。这会导致错误，因为它读取 ABBA=abba。看起来我需要一个区分大小写并且不会像 latin1 那样弄乱文本文件的编码。有什么建议吗？我也尝试过 COLLATE utf8_bin，但没有运气。

# c# - IDictionary 自己的实现 IEnumerator

> ID：15887897
> 
> 赞同：2
> 
> 时间：2013-04-08T20:02:56.573
> 
> 标签：c#, .net, dictionary

嗨，我尝试实现 2 键字典，当我编译此代码时给我消息：并非所有代码路径都返回 System.Collections.IEnumerable.GetEnumerator() 中的值。我尝试在很多地方添加 return 语句，但没有效果。有什么想法有什么问题吗？

```
public IEnumerator<MultiKeyStruct<PK,SK,V>> GetEnumerator()
    {
        foreach (var primaryKey in primarykeys)
        {
            foreach (var secondaryKey in primarykeys[primaryKey.Key])
            {
                var returnItem = new MultiKeyStruct<PK,SK,V>(primaryKey.Key, secondaryKey.Key, secondaryKey.Value);
                yield return returnItem;
            }
            yield return default(MultiKeyStruct<PK, SK, V>);
        }
        yield return default(MultiKeyStruct<PK,SK,V>);
    }

    System.Collections.IEnumerator System.Collections.IEnumerable.GetEnumerator()
    {
        GetEnumerator();
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T20:03:57.440

第二种`GetEnumerator`方法的主体应该是：

```
return GetEnumerator(); 
```

`return`很重要。

# php - Pear Excel Writer：如何为列分配前导零？

> ID：15887898
> 
> 赞同：0
> 
> 时间：2013-04-08T20:03:03.670
> 
> 标签：php, excel, pear, export-to-excel

我的网站中有一个部分允许通过单击按钮导出 Excel 文件。Excel 文件中显示的数据是使用 SQL 从我的数据库中获取的。

以下是在我的数据库的列中找到的示例：

```
12
34
456
2
7654
43
1234
7 
```

目前它在 Excel 工作表中的显示与上面相同，但我希望所有行都有 4 位数字。因此，少于 4 位的数据将添加前导零。

使用相同的示例，这是我希望它在导出的 Excel 表中显示的方式：

```
0012
0034
0456
0002
7654
0043
1234
0007 
```

这似乎是一个相对简单的任务，但我似乎无法通过我的研究找到如何实现这一点。我希望这里有人能提供帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T20:10:10.187

```
$number = str_pad($value, 4, '0', STR_PAD_LEFT); 
```

# javascript - 在javascript中按属性分组对象

> ID：15887900
> 
> 赞同：32
> 
> 时间：2013-04-08T20:03:06.713
> 
> 标签：javascript, underscore.js

如何转换这个：

```
[
    {food: 'apple', type: 'fruit'},
    {food: 'potato', type: 'vegetable'},
    {food: 'banana', type: 'fruit'},
] 
```

进入这个：

```
[
    {type: 'fruit', foods: ['apple', 'banana']},
    {type: 'vegetable', foods: ['potato']}
] 
```

使用 javascript 或下划线

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2013-04-08T21:02:15.797

假设原始列表包含在名为 的变量中`list`：

```
_
.chain(list)
.groupBy('type')
.map(function(value, key) {
    return {
        type: key,
        foods: _.pluck(value, 'food')
    }
})
.value(); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-04-08T20:16:35.453

不使用下划线：

```
var origArr = [
    {food: 'apple', type: 'fruit'},
    {food: 'potato', type: 'vegetable'},
    {food: 'banana', type: 'fruit'}
];

/*[
    {type: 'fruit', foods: ['apple', 'banana']},
    {type: 'vegetable', foods: ['potato']}
]*/

function transformArr(orig) {
    var newArr = [],
        types = {},
        i, j, cur;
    for (i = 0, j = orig.length; i < j; i++) {
        cur = orig[i];
        if (!(cur.type in types)) {
            types[cur.type] = {type: cur.type, foods: []};
            newArr.push(types[cur.type]);
        }
        types[cur.type].foods.push(cur.food);
    }
    return newArr;
}

console.log(transformArr(origArr)); 
```

**演示：http:** [//jsfiddle.net/ErikE/nSLua/3/](http://jsfiddle.net/ErikE/nSLua/3/)

**感谢@ErikE**改进/减少我的原始代码以帮助我解决冗余:)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-11-23T17:08:59.033

这是@Ian 答案的稍微不同但更通用的版本

**警告**：结果与 OP 要求略有不同，但像我这样偶然发现这个问题的其他人可能会受益于更通用的答案恕我直言

```
var origArr = [
   {food: 'apple', type: 'fruit'},
   {food: 'potato', type: 'vegetable'},
   {food: 'banana', type: 'fruit'}
];

function groupBy(arr, key) {
        var newArr = [],
            types = {},
            newItem, i, j, cur;
        for (i = 0, j = arr.length; i < j; i++) {
            cur = arr[i];
            if (!(cur[key] in types)) {
                types[cur[key]] = { type: cur[key], data: [] };
                newArr.push(types[cur[key]]);
            }
            types[cur[key]].data.push(cur);
        }
        return newArr;
}

console.log(groupBy(origArr, 'type')); 
```

你可以在[这里找到一个 jsfiddle](https://jsfiddle.net/ObiOne86/nSLua/46/)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-12-11T15:04:51.517

这个老问题的 ES6 解决方案：

迭代 using [`Array#reduce`](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce)，并按组将项目收集到[`Map`](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Map). 使用 spread 将[`Map#values`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map/values)后面转换为数组：

```
const data = [
    {food: 'apple', type: 'fruit'},
    {food: 'potato', type: 'vegetable'},
    {food: 'banana', type: 'fruit'},
];

const result = [...data.reduce((hash, { food, type }) => {
  const current = hash.get(type) || { type, foods: [] };

  current.foods.push({ food });

  return hash.set(type, current);
}, new Map).values()];

console.log(result);
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-08T20:19:02.887

```
var foods = [
    {food: 'apple', type: 'fruit'},
    {food: 'potato', type: 'vegetable'},
    {food: 'banana', type: 'fruit'}
];

var newFoods = _.chain( foods ).reduce(function( memo, food ) {
  memo[ food.type ] = memo[ food.type ] || [];
  memo[ food.type ].push( food.food );
  return memo;
}, {}).map(function( foods, type ) {
    return {
        type: type,
        foods: foods
    };
}).value(); 
```

[http://jsbin.com/etaxih/2/edit](http://jsbin.com/etaxih/2/edit)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-12-22T02:07:13.530

您可以使用 Alasql 库按字段之一对对象数组进行分组。此示例紧凑数组与您的示例完全相同：

```
var res = alasql('SELECT type, ARRAY(food) AS foods FROM ? GROUP BY type',[food]); 
```

[在 jsFiddle](http://jsfiddle.net/agershun/yo0nbbvc/1/)试试这个例子。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-01-27T07:39:19.843

您还可以使用其他 ES6 功能，例如：

```
function groupArray(arr, groupBy, keepProperty) {
        let rArr = [], i;
        arr.forEach(item => {
            if((i = rArr.findIndex(obj => obj[groupBy] === item[groupBy])) !== -1)
                rArr[i][`${keepProperty}s`].push(item[keepProperty]);
            else rArr.push({
                [groupBy]: item[groupBy],
                [`${keepProperty}s`]: [item[keepProperty]]
            });
        });
        return rArr;
    }

    groupArray(yourArray, 'type', 'food'); 
```

# javascript - 如何用jquery刷新div，而不重复

> ID：15887904
> 
> 赞同：0
> 
> 时间：2013-04-08T20:03:13.537
> 
> 标签：javascript, jquery

我正在使用此代码每 10 秒刷新一次 div：

```
<script type="text/javascript">
setInterval(function(){
        $('#feed').load('forum.php #feed').fadeIn("slow");
}, 10000);
</script> 
```

效果很好，除了第一次加载（10 秒后）会复制这个 div，所以它是一个坐在另一个上面。之后，div 每 10 秒正确刷新一次，不再重复。

任何想法我的代码有什么问题？div是：

```
<div id="feed">... stuff ... </div> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T20:36:53.163

这是 vBulletin 侧边栏代码的问题 - 我扩大了刷新 div 以包含整个侧边栏，而不仅仅是“最近的帖子”块。只是想在不太可能有人遇到完全相同的问题的情况下在这里发帖。

谢谢你们每一个人的帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T20:12:03.933

来自[jQuery 文档](http://api.jquery.com/load/)：

> 当这个方法执行时，它会检索 ajax/test.html 的内容，然后 jQuery 会解析返回的文档以找到 ID 为 container 的元素。**此元素及其内容被插入到 ID 为 result 的元素中**，其余检索到的文档将被丢弃。

因此，您多次将相同的元素插入到页面中。

尝试将您的选择器更改为

```
$('#feed').load('forum.php #feed>*').fadeIn("slow"); 
```

# r - 以多个嵌套行组织的Excel数据，R可以读取吗？

> ID：15887905
> 
> 赞同：2
> 
> 时间：2013-04-08T20:03:16.197
> 
> 标签：r, xlsx

请看图片。我已经开始使用 R，并且知道它如何/它可以从 Excel 读取文件，但是它可以读取像这样格式化的东西吗？

[http://www.flickr.com/photos/68814612@N05/8632809494/](http://www.flickr.com/photos/68814612@N05/8632809494/)

（我很抱歉，上传对我不起作用）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T21:59:24.647

详细说明评论中的一些内容：

如果将文件加载到 Excel 中，则可以将其保存为固定宽度或逗号分隔的文本文件。两者都应该很容易读入 R。

以下内容对您来说可能已经很明显了。

（首先，一个问题：您确定不能以每行一组数据的格式获取数据吗？您获取的文件是否有可能是从更有利的不同文件格式生成的将数据加载到 R 中？）

您是应该开始重新排列 R 中的数据还是处理原始文本，取决于您（或您身边可以提供帮助的人）自然而然的事情。就我个人而言，在将文本文件加载到 R 之前，我会在 R 之外重新排列文本文件。这对我来说是最简单的。Perl 是用于此目的的出色语言，但如果您可以使用 Unix shell 脚本，或者使用功能强大的编辑器（如 Vim 或 Emacs），也可以使用它。如果您没有偏好，我建议您使用 Perl。如果您有任何重要的编程经验，您将能够了解您需要的内容。另一方面，您已经将其加载到 R 中，因此在那里处理数据可能会更好。

例如，您可以执行一个循环，逐行遍历文本文件并执行以下操作：

```
while (still have lines to read) {
  read first header line into an vector if this is the first time through the loop
   otherwise, read it and throw it away
  read data line 1 into an vector
  read second header line into vector if this is the first time
   otherwise, read it and throw it away
  read data line 2 into an vector
  read third header line into vector if this is the first time
   otherwise, read it and throw it away
  read data line 3 into an vector
  if this is first time through, concatenate the header vectors; store as next row
    in something (a file, a matrix, a dataframe, etc.)
  concatenate the data vectors you've been saving, and store as next row in same thing
}

write out the whole 2D data structure 
```

或者，如果标题永远不会改变，那么您可以在循环之前将它们逐字嵌入脚本中，无论如何都将它们丢弃。这将使代码更干净。或者单独读取文件的前几行以获取标题，然后有一个单独的脚本来读取数据并将其添加到包含标题的文件中。（标题可能在 R 中很有用，所以我建议将它们保留在文本文件的顶部。）

# python - 客户端脚本语言

> ID：15887916
> 
> 赞同：0
> 
> 时间：2013-04-08T20:03:41.343
> 
> 标签：python, browser, scripting, client-side

Javascript 是唯一可以利用 DOM API 的语言吗？是否有 Python 的 DOM 包装器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T20:06:38.427

Internet Explorer 支持客户端 VBScript，但没有人真正使用它。Javascript 是由 Netscape 的 Brendan Eich 实现的 ECMAScript。它成为事实上的标准。

但是，大多数语言都编写了可以在服务器端遍历 html 文档的库。在 Python 中，一个常见的称为 Beautiful Soup。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T20:08:28.507

从技术上讲，您还可以使用[Java Applet](http://docs.oracle.com/javase/tutorial/deployment/applet/manipulatingDOMFromApplet.html)来操作 DOM。为什么你会是一个可能导致不可避免地缺乏人气的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T20:10:36.690

有 Python 的浏览器内实现：[http ://www.skulpt.org/](http://www.skulpt.org/)

# wordpress - 不同类别的WordPress自定义菜单

> ID：15887918
> 
> 赞同：2
> 
> 时间：2013-04-08T20:03:50.760
> 
> 标签：wordpress, categories

如何获得不同类别的不同菜单？当我们通过管理员添加新类别时，我们希望动态生成自定义菜单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T09:55:20.917

取决于你的意思简单，是的，这是可能的，恕我直言，简单。

但是，AFAIK 不能在核心 WP UI 中执行此操作。

您基本上需要做的是创建一些菜单，然后使用条件，特别是[is_category()](http://codex.wordpress.org/Function_Reference/is_category)；为了像这样显示它们：

```
if( is_category( array( 9, 'food', 'bones' ) ){ // you can use either ID or slug...
        wp_nav_menu( 'a')
    } else if( is_category( array( 99, 'fur', 'flees' ) ) {
        wp_nav_menu('b')
    } else if( is_category( array( 'whatever' ) ) {
        wp_nav_menu('c')
    } else {
        wp_nav_menu('x')
    } 
```

另请查看[wp_nav_menu()](http://codex.wordpress.org/Function_Reference/wp_nav_menu)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T18:57:14.800

我做到了。我的概念是与类别打交道——例如，类别与菜单的名称有关，因此我们可以制作许多类别和许多菜单。他是一些让我想到这个想法的链接：

[http://wordpress.org/support/topic/custom-menus-on-different-pages](http://wordpress.org/support/topic/custom-menus-on-different-pages)

[http://wordpress.org/support/topic/custom-menusheaders-for-different-categories](http://wordpress.org/support/topic/custom-menusheaders-for-different-categories)

# ios - 按下Ctrl键时如何在XCode中滚动故事板

> ID：15887920
> 
> 赞同：2
> 
> 时间：2013-04-08T20:03:52.923
> 
> 标签：ios, xcode, storyboard

我正在使用 Storyboard 中的许多视图控制器在 Macbook Pro 上开发应用程序。屏幕分辨率不是很大，有时我需要滚动编辑器，同时拖动segues（按住Ctrl键）。

用苹果鼠标是不可能的。

我该怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T20:08:44.680

当我在小型 Macbook 上开发时，我这样做的方式是使用左侧的窗口，它显示您的视图层次结构。这样您就不必使用实际的故事板，并且您通常可以控制任何组件之间的拖动...... ![在此处输入图像描述](https://i.stack.imgur.com/c2qlh.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T20:14:30.407

我知道这很烦人。拖动 segue 时，将光标移到情节提要的边缘，朝您想要滚动的方向。（比我附加的图像更靠近边缘）将光标停在那里，屏幕将开始朝那个方向滚动。

![在此处输入图像描述](https://i.stack.imgur.com/Gr8GA.png)

# css - HTML、CSS：为什么我的布局在不同的分辨率上会搞砸？

> ID：15887921
> 
> 赞同：0
> 
> 时间：2013-04-08T20:03:53.403
> 
> 标签：css, html, screen-resolution

我正在尝试用 HTML 和 CSS 做一个投资组合，我的布局在我的 1920 * 1080 分辨率上看起来非常好，但是当我改变分辨率时，一切都在移动，一切看起来都很糟糕。

任何人都可以向我指出我的代码哪里出错并为我提供解决问题的方法吗？

--- 编辑新代码

它在 1920 * 1080 上的样子：http: [//screencast.com/t/mq8H3baBxIi](http://screencast.com/t/mq8H3baBxIi)

所以我已经改变了建议的东西，但我仍然得到了这个，例如，当我从我的屏幕分辨率 1920 * 1080 更改为 1280 * 1024 以测试它的外观时，评论区域拉到灰色的顶部“联系我” ' 框，以便它最终像我在此链接上的图片：http: [//screencast.com/t/xZEwSgwdqP](http://screencast.com/t/xZEwSgwdqP)

```
<html>
    <head>
        <link rel="stylesheet" type="text/css" href="portfolioStyles.css" />
    </head>
        <body>
             <div id="pageTitleContact"> CONTACT ME</div>
             <div id="sideBar">             </div>
             <div id="commentSideBar"> </div>
    <div id="logos">
    <ul>
      <div id="home"><li><a href="portfolioHome.html"><img src="home.png" alt="list item 1" /></a></li></div>
      <div id="aboutMe"><li><a href="portfolioAboutMe.html"><img src="aboutMe.png" alt="list item 2" /></a></li></div>
      <div id="achievements"><li><a href="portfolioAchievement.html"><img src="achievement.png" alt="list item 3" /></a></li></div>
      <div id="hobbies"><li><a href="portfolioHobbies.html"><img src="Hobbies.png" alt="list item 4" /></a></li></div>
      <div id="contactMe"><li><a href="portfolioContactMe.html"><img src="contactMeHighlighted.png" alt="list item 4" /></a></li></div>
    </ul>
    </div>
            <textarea id="contactMeTextarea">

            </textarea>

    <div id="Commentsection">
            <form action="postcommentandreturn.php" method="post">

            <div id="nameAreaTitle">
            Name:</div><input type="text" id="nameArea" name="name" />
            <br>

            <textarea placeholder="Insert Comment Here..." type="text" id="commentArea"  name="comment"></textarea>
            <div id="submitLocation"><input type="submit" id="submitComment"  value="Submit"/></div>

            </form>
    </div>
<!--comment section-->

<div id="postedComments">

  <tr>

  <td><div id="postersName"> </div>
  </td>
   </tr>

  <tr>

  <td><div id="commentDate"></div></td>

  </tr>

  <tr>

  <td>
  <textarea id="postersComment"></textarea></td>

  </tr>

</table>
</div>

        </body>
</html> 
```

CSS：

```
html,body
{
  height: 100%;
  padding: 0px;
  margin: 0px;
}

#sideBar {
    background-color: #111111;
    width:100px;
    height:100%;
    position:fixed;
    z-index:-1;

}

#commentSideBar {
    background-color: #111111;
    width:300px;
    height:100%;
    position:fixed;
    z-index:-1;
    right:0;

}
#logos {
    position:absolute;
    margin-left:-20px;
}

#home {
    margin-top:50px;
}

#homeInfo {
    resize: none;    
    position:fixed;
    display: block;
    height:400px;
    width:800px;
    overflow:hidden;
    outline:none;
    background-color:#3f3f3f;
    color:white;
    font-family:Arial;
    font-size:30px;
    border-radius:10px;
    font-weight:700;
    text-align:left;
    padding-right:20px;
    padding-left:40px;

    top: 50%;
    left: 50%;
    max-width:800px;
    margin-left:-350px;
    margin-top:-200px;
    -moz-box-shadow:    3px 3px 5px 6px #ccc;
    -webkit-box-shadow: 3px 3px 5px 6px #ccc;
    box-shadow:         3px 3px 5px 6px #ccc;
}

#pageTitleContact {
    position:fixed;
    top: 50%;
    left: 50%;
    margin-top:-400px;
    margin-left:-400px;
    color:limegreen;
    font-size:100px;
    font-family:Arial;
    -moz-box-shadow:    3px 3px 5px 6px #ccc;
    -webkit-box-shadow: 3px 3px 5px 6px #ccc;
    box-shadow:         3px 3px 5px 6px #ccc;
    padding-left:20px;
    padding-right:20px;
}

#aboutMe {
    margin-top:100px;

}

#achievements {
    margin-top:100px;
    margin-left:-7px;
}

#hobbies {
    margin-top:100px;
}

#contactMe {
    margin-top:100px;
    margin-bottom:50px;
}

#contactMeTextarea {
    -moz-box-shadow:    3px 3px 5px 6px #ccc;
    -webkit-box-shadow: 3px 3px 5px 6px #ccc;
    box-shadow:         3px 3px 5px 6px #ccc;
    resize: none;    
    position:fixed;
    display: block;
    height:600px;
    width:1000px;
    max-width:1000px;
    outline:none;
    background-color:#3f3f3f;
    color:whitesmoke;
    font-family:Arial;
    font-size:30px;
    border-radius:10px;
    text-align:left;
    padding-right:20px;
    padding-left:40px;
    top: 50%;
    left: 50%;
    margin-left:-500px;
    margin-top:-300px;
    padding-top: 50px;
}

#Commentsection {
    position:fixed;
    top:50%;
    margin-left:140px;
    margin-top:-300px;

}

#nameAreaTitle {
    font-family:Arial;
    color:black;
    font-weight:bold;
}
#nameArea {
    font-family:Arial;
    color:black;
    width:300px;
    height:40px;
    font-size:30px;
}

#commentArea {
    font-family:Arial;
    color:black;
    width:300px;
    height:300px;
    resize: none; 
    margin-top:10px;
    font-size:20px;  
}

#submitComment {
    width:100px;
    font-size:20px;

}

#postedComments{
    position:absolute;
    right:0px;
    margin-top:10px; 
    margin-right:10px;
    width:280px;
    background-color:grey;

}
#postersName {

    width:260px;
    height:25px;
    font-size:20px;
    font-family:Arial;
    background-color:white;
    color:black;
    border-color:black;
    border-width:1px;
    border-style:solid;
    padding-left:10px;
    font-weight:bold;
    margin-top:10px;
}

#commentDate {
    width:260px;
    height:25px;
    font-size:20px;
    font-family:Arial;
    background-color:white;
    color:black;
    border-color:black;
    border-width:1px;
    border-style:solid;
    padding-left:10px;
}
#postersComment {
    width:275px;
    height:200px;
    font-size:20px;
    font-family:Arial;
    background-color:white;
    color:black;
    border-color:black;
    border-width:1px;
    border-style:solid;
    padding-left:10px;
    resize:none;
}

li {
    list-style-type:none;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T20:12:37.497

如果不仔细看，您可能可以添加一个容器 div 或包装所有代码的东西，然后分配一个`min-width`属性以确保它永远不会小于给定大小。
您的布局似乎依赖于您的宽度，`body`并且随着窗口大小的变化，您的身体宽度也会发生变化。使用带有`min-width`or 声明的包装器`width`将使其在用户的窗口小于容器宽度时出现水平滚动条。

就像其他人所说的那样，你有一些嵌套问题。一般页面布局将如下所示：

```
<html>
  <head>
    <!-- Head Content -->
  </head>

  <body>
    <!-- Page Content -->
    <ul>
      <li><!-- List Item --></li>
      <li><!-- List Item --></li>
    </ul>
  </body>
</html> 
```

# c# - 将 WebImage() 与 .gif 图像一起使用

> ID：15887923
> 
> 赞同：1
> 
> 时间：2013-04-08T20:04:03.610
> 
> 标签：c#, asp.net

我正在尝试将 WebImage 与上传的 .gif 图像一起使用。

```
WebImage file = new WebImage(fullFilePath + ".gif");
file.Save(newImage); 
```

我收到一条错误消息：

```
System.Exception: A Graphics object cannot be created from an image that has an indexed pixel format. 
```

如何将 .gif 与 WebImage 类一起使用？

# c# - HtmlHelper 扩展改变传入的属性值

> ID：15887928
> 
> 赞同：3
> 
> 时间：2013-04-08T20:04:08.997
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

我有一个 html 助手以友好的方式显示文本框的电话号码。用法：

```
Html.PhoneNumberFor(m => m.PhoneNumber) 
```

我希望它采用像“1111111111”这样的数字并输出“(111)111-1111”。我尝试通过从 html 帮助器扩展方法中的表达式中获取属性来更新 html 帮助器的视图数据，但这似乎不起作用。那么，有人知道如何更新表达式对象中的属性值吗？这是不起作用的代码：

```
public static MvcHtmlString PhoneNumberFor<TModel>(this HtmlHelper<TModel> helper, Expression<Func<TModel, string>> expression, object htmlAttributes)
    {
        var value = ModelMetadata.FromLambdaExpression(expression, helper.ViewData).Model as string;

        if (!string.IsNullOrEmpty(value) && value.Length == 10)
        {
            value = string.Format("({0}){1}-{2}", value.Substring(0, 3), value.Substring(3, 3), value.Substring(6));                

            var fieldName = helper.ViewContext.ViewData.TemplateInfo.GetFullHtmlFieldName(ExpressionHelper.GetExpressionText(expression));
            helper.ViewData[fieldName] = value;

        }

        return helper.TextBoxFor(expression, htmlAttributes);           
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T20:32:52.907

如果不是，这对你有用吗？请解释你需要什么才能让它工作..

如果您想坚持使用字符串值作为输入，这应该可以工作

```
var formattedPhone = 
    String.Format("{0:(###)###-####}", Convert.ToInt64("1111111111")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T20:20:03.467

我会为此创建一个自定义 DisplayFormatAttribute，然后您只需将其应用于 PhoneNumber 属性。

# ssrs-2008 - SSRS 创建树视图

> ID：15887935
> 
> 赞同：1
> 
> 时间：2013-04-08T20:04:29.650
> 
> 标签：ssrs-2008, reporting-services, ssrs-grouping

所以我在尝试从组中创建树视图时遇到问题。我的数据库中有一个文件夹结构，它为我提供了每个节点应该具有的路径。问题是递归父级似乎只查看直接父子关系，而不是树的完整结构。我遇到的问题是，如果我仍然需要树，但没有代表该特定文件夹的数据，该怎么办。我正在拆分文件夹结构以使用数组中倒数第二个条目。

```
Public Shared Function Parent(ByVal Value As String, ByVal Delimiter As String) As String

 Dim ListArray() As String
 ListArray = Split(Value, Delimiter)

 Dim LastNonEmpty As Integer = -1
 For i As Integer = 0 To ListArray.Length - 1
     If ListArray(i) <> "" Then
  LastNonEmpty += 1
  ListArray(LastNonEmpty) = ListArray(i)
     End If
 Next
 ReDim Preserve ListArray(LastNonEmpty)

Dim RetValue As String = ""

IF ListArray.Length - 2 > -1 Then
RetValue = ListArray(ListArray.Length - 2)
Else
RetValue = ListArray(ListArray.Length - 1)
End If

Return RetValue
End Function 
```

假设我在 Root\ 中有数据，但除了文件 Root\Certificates\Some Company 之外，我在 Root\Certificates 中没有数据。文件夹结构变得混乱，因为它没有注册根证书的父子节点，因为我当前没有在该结构下定义数据。

文件夹路径 Root\ Root\Blacklist\ Root\Certificates\Some Company\ Root\Reports\ Root\Something Else\Some Company\

有没有办法我可以单独输入树视图节点，或者有人可以想办法解析其中的一些并保持结构？任何帮助将不胜感激。:)

# enums - 在帕斯卡中“读取”枚举类型的任何更简单的方法？

> ID：15887939
> 
> 赞同：3
> 
> 时间：2013-04-08T20:04:31.810
> 
> 标签：enums, pascal

用户输入一个整数，该整数对应于定义的枚举类型的值。我需要将该值分配给变量**t**。这是我想到的：

```
type test = (red,green,blue,fish);
var t:test;
    n,i:integer;
begin
  readln(n);
  t:=red;
  for i:=1 to n do
    t:=succ(t);
end. 
```

我是否使任务过于复杂？是否可以编写一个更简单的算法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T20:14:25.677

您应该能够将整数转换为枚举类型，例如：

```
t := test(n); 
```

如果您想另辟蹊径，请使用`ord`：

```
n := ord(t); 
```

这应该让您以数字方式移动到列表中的任何项目。您可以通过以下方式检查界限：

```
Ord(Low(test))) 
```

和

```
Ord(High(test)) 
```

..`test`你的类型在哪里。

# javascript - 切换菜单激活

> ID：15887942
> 
> 赞同：4
> 
> 时间：2013-04-08T20:04:35.800
> 
> 标签：javascript, jquery, html, css, toggle

嘿，我正在做一个菜单，我希望当我单击该项目时进入活动位置，然后当单击另一个项目时，它会更改为最近单击的活动并从最后一个项目中删除状态，这就是我正在做的但是不工作...如果有人可以帮助我，我将不胜感激。

HTML

```
<div id="nav-pPal">
  <ul class="nav-Ppal">
    <li><a class="btns-nav" id="0" href="#block-intro">01</a></li>
    <li><a class="btns-nav" id="1" href="#block-pq-zolfunza">02</a></li>
    <li><a class="btns-nav" id="2" href="#block-modulos-zolfunza">03</a></li>
    <li><a class="btns-nav" id="3" href="#block-seguridad">04</a></li>
    <li><a class="btns-nav" id="4" href="#block-desarrollo">05</a></li>
    <li><a class="btns-nav" id="5" href="#block-nuestra-ubic">06</a></li>
    <li><a class="btns-nav" id="6" href="#block-noticias">07</a></li>
    <li><a class="btns-nav" id="7" href="#block-preguntas">08</a></li>
    <li><a class="btns-nav" id="8" href="#block-contacto">09</a></li>
  </ul>
</div> 
```

CSS

```
.nav-Ppal li a {
width: 30px;
height: 22px;
padding-top:8px;
text-align:center;
display:block;
text-decoration:none;
color:#FFF;
cursor:pointer;
background-color: #000;
color: #FFF;
opacity: 1;
-moz-opacity: 0.70;
-ms-filter:"progid:DXImageTransform.Microsoft.Alpha"(Opacity=70);
cursor:pointer;
font-family: 'lucida_sans_unicoderegular', Helvetica, Arial, sans-serif;
font-size:11px;
}
.nav-Ppal li a:hover {
background-color: #f7941e;
color: #FFF;
display:block;
text-decoration:none;
cursor:pointer;
}

.nav-Ppal-active{
background: white;
color: black;
} 
```

jQuery

```
$(".nav-Ppal li a").on("click", checkTarget);
function checkTarget(){
    /*$(".nav-Ppal li a").not(this).removeClass(".nav-Ppal_active");*/
    $(".nav-Ppal li a").addClass("nav-Ppal-active");
    console.log("click");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T20:08:41.043

```
$(function() {
 $(".nav-Ppal li a").on("click", function() {
    $(".nav-Ppal li a").removeClass('nav-Ppal-active');
    $(this).addClass("nav-Ppal-active");
  });
}); 
```

这就是你想要做的

更改您的 CSS：

```
.nav-Ppal-active{
  background: white;
  color: black;
} 
```

您的特殊性被您的默认类所覆盖。

工作链接：http: [//jsfiddle.net/barrychapman/epaE3/3/](http://jsfiddle.net/barrychapman/epaE3/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T20:11:18.770

这类似于[我最近提出的](https://stackoverflow.com/questions/15623126/jquery-event-handler-changes-css-class-with-a-shift-of-one-click/15623324#15623324)使用“hashchange”浏览器事件来设置活动元素的解决方案。

这是您可以使用的[jsfiddle 示例。](http://jsfiddle.net/h4fEE/1/)

Javascript：

```
$(".nav-Ppal li a").on('click', function(e) {
    // Hide all content, display the one related to hash-tag    
    $(".document_view").toggle(false);    
    $('.nav-Ppal li').removeClass("nav-Ppal-active", false);
});

$(window).on('hashchange', function() {
    $("a[href='" + window.location.hash + "']").parent().addClass("nav-Ppal-active", true);
}); 
```

此外，将“活动”类放在您的第一个元素上，以便在首次加载时看起来是活动的：

```
<li class="nav-Ppal-active"> 
```

# c++ - 在 Eclipse 中创建自定义键盘快捷键

> ID：15887943
> 
> 赞同：0
> 
> 时间：2013-04-08T20:04:38.927
> 
> 标签：c++, eclipse

我正在使用 eclipse c++ IDE，我想创建一个键盘快捷方式，它基本上执行两个步骤：1.保存所有文件 2.构建项目

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T20:18:09.587

1.  要保存所有文件，快捷方式是`CTRL+SHIFT+S`. 你可以修改它 `Window->preference->General->Editors->Keys`

2.  您可以`build automaticaly`在文件菜单中选择`Project`。

现在，当您保存文件时，项目将自动构建。

# grails - 用于 FieldErrors 的 Grails JSON 编组器

> ID：15887944
> 
> 赞同：3
> 
> 时间：2013-04-08T20:04:47.950
> 
> 标签：grails, marshalling

我正在尝试为[org.springframework.validation.FieldError](http://static.springsource.org/spring/docs/2.0.x/api/org/springframework/validation/FieldError.html)创建一个自定义编组器，这样我就可以避免在我的 JSON 响应中放入无关的和可能敏感的数据，其中包括`MyCommandObject.errors`.

但是我的 FieldError 编组器根本不起作用，这就是我在 BootStrap.groovy 中 init 方法下的内容。

```
 def fieldErrorMarshaller = {
        log.info("field error marshaller $it")
        def returnArray = [:]

        returnArray['field'] = it.field
        returnArray['message'] = it.message

        return returnArray
    }

    JSON.registerObjectMarshaller(FieldError, fieldErrorMarshaller) 
```

我没有看到任何明确的错误或编组器日志记录。知道这里可能出了什么问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T20:31:54.867

Grails 注册了一个`ValidationErrorsMarshaller`处理所有错误的实例，因此您的 FieldError 编组器将永远不会被调用。

```
//convertAnother is not called for each error. That's the reason of your custom marshalled not been called.
for (Object o : errors.getAllErrors()) {
    if (o instanceof FieldError) {
        FieldError fe = (FieldError) o;
        writer.object();
        json.property("object", fe.getObjectName());
        json.property("field", fe.getField());
        json.property("rejected-value", fe.getRejectedValue());
        Locale locale = LocaleContextHolder.getLocale();
        if (applicationContext != null) {
            json.property("message", applicationContext.getMessage(fe, locale));
        }
        else {
        ... 
```

查看`ConvertersGrailsPlugin`（插件的描述符）这是注册为 Spring Bean，因此您可以创建另一个 bean 并使用相同的名称注册，覆盖`marshalObject()`以满足您的需求（未测试，可能需要更多代码）。

```
class MyErrorsMarshaller implements ObjectMarshaller<JSON>, ApplicationContextAware {
    ApplicationContext applicationContext;

    public boolean supports(Object object) {
        return object instanceof Errors;
    }

    public void marshalObject(Object object, JSON json) throws ConverterException {
    ...
    }

} 
```

**资源.groovy**

```
jsonErrorsMarshaller(MyErrorsMarshaller)

errorsJsonMarshallerRegisterer(ObjectMarshallerRegisterer) {
    marshaller = { MyErrorsMarshaller om -> }
    converterClass = grails.converters.JSON
} 
```

[ValidationErrorsMarshaller](https://github.com/grails/grails-core/blob/master/grails-plugin-converters/src/main/groovy/org/codehaus/groovy/grails/web/converters/marshaller/json/ValidationErrorsMarshaller.java)的参考。

[ConvertersGrailsPlugin](https://github.com/grails/grails-core/blob/master/grails-plugin-converters/src/main/groovy/org/codehaus/groovy/grails/plugins/converters/ConvertersGrailsPlugin.groovy)的参考。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T23:21:06.040

对于任何好奇的人，这是我最终根据 Sérgio Michels 的回答在 Bootstrap.groovy 中编写的验证器

```
def validationErrorsMarshaller = {
    return it.getAllErrors().collect {
        if (it instanceof FieldError) {
            Locale locale = LocaleContextHolder.getLocale();
            def msg = messageSource.getMessage(it, locale)

            return [ field: it.getField(), message: msg ]
        }
    }
}

JSON.registerObjectMarshaller(ValidationErrors, validationErrorsMarshaller) 
```

通过使用 messageSource，我能够从原始 Java 编组器中简化这一点，该消息源是通过添加`def messageSource`到 BootStrap 类中注入的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-18T10:08:42.990

```
//usage in grails controller
render domainObject.errors as JSON

//resources.groovy
jsonErrorsMarshaller(MyErrorsMarshaller)
errorsJsonMarshallerRegisterer(ObjectMarshallerRegisterer) {
    marshaller = { MyErrorsMarshaller om -> }
    converterClass = grails.converters.JSON
}

//grails.converters.JSON marshaller class
import grails.converters.JSON
import grails.validation.ValidationErrors
import org.codehaus.groovy.grails.web.converters.exceptions.ConverterException
import org.codehaus.groovy.grails.web.converters.marshaller.ObjectMarshaller
import org.codehaus.groovy.grails.web.json.JSONWriter
import org.springframework.context.ApplicationContext
import org.springframework.context.ApplicationContextAware
import org.springframework.context.i18n.LocaleContextHolder
import org.springframework.validation.Errors
import org.springframework.validation.FieldError
import org.springframework.validation.ObjectError

class MyErrorsMarshaller implements ObjectMarshaller<JSON>, ApplicationContextAware {
    ApplicationContext applicationContext;

    public boolean supports(Object object) {
        return object instanceof Errors;
    }

    public void marshalObject(Object object, JSON json) throws ConverterException {
        JSONWriter writer = json.getWriter();
        try {
            List<ObjectError> errors = ((ValidationErrors)object).getAllErrors()
            writer.object();
            writer.key("errors").array();
            Locale locale = LocaleContextHolder.getLocale();
            for(FieldError error : errors){
                FieldError fe = (FieldError) error;
                writer.object();
                writer.key("field").value(fe.getField()).key("message").value(applicationContext.getMessage(fe, locale));
                writer.endObject();
            }
            writer.endArray();
            writer.endObject();
        } catch (ConverterException ce) {
            throw ce;
        } catch (Exception e) {
            e.printStackTrace()
            throw new ConverterException( "Error converting Bean with class " + object.getClass().getName(), e);
        }
    }
} 
```

# html - Swig 模板和 Node.js

> ID：15887948
> 
> 赞同：3
> 
> 时间：2013-04-08T20:05:11.147
> 
> 标签：html, node.js, http, swig-template

我对 swig 模板和 node.js 有疑问。

我的代码：

nodejs_swig.js 文件的路径：/node

nodejs_swig.js: // __dirname 是 /node

```
var http = require('http'),
    swig = require(__dirname + '/node_modules/swig');

swig.init({
    root: '/web/public/',
    allowErrors: true
});
console.log(swig);
http.createServer(function (req, res) {
    var tmpl = swig.compileFile('page.html'),
        renderedHtml = tmpl.render({
            people: [
            { name: 'Paul', age: 28 },
            { name: 'Jane', age: 26 },
            { name: 'Jimmy', age: 45 }
            ],
            title: 'Basic Example'
        });

    res.writeHead(200, { 'Content-Type': 'text/html' });
    res.end(renderedHtml);
}).listen(1337);

console.log('Application Started on http://localhost:1337/'); 
```

html 文件在这里：/web/public

page.html 文件：

```
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>{{ title }}</title>  
    </head>
    <body>    
        <h1>{{ title }}</h1>    
        <ul>
            {% for person in people %}
                <li>{{ person.name }} age {{ person.age }}</li>
            {% endfor %}
        </ul>    
    </body>
</html> 
```

当我想在链接 ip/page.html 上查看结果时，我得到：

```
{{ pagename|title }}

{% for author in authors %} {{ author }} {% else %}
There are no authors.
{% endfor %} 
```

这是我在屏幕上看到的输出。

有谁知道出了什么问题？

提前致谢，

对不起我的英语不好

# php - cakephp文件下载链接

> ID：15887953
> 
> 赞同：5
> 
> 时间：2013-04-08T20:05:40.697
> 
> 标签：php, cakephp

我遇到了一个我试图解决两天多的问题：我已经使用 cakephp 建立了一个网站，并且一切正常，但是当我尝试实现存储在`APP_DIR/someFolder/someFile.zip`.

如何设置内部文件的下载链接`someFolder`？我经常偶然发现我尝试实施它们的“媒体视图”，但到目前为止我一直没有成功。

此外，没有更简单的方法可以使文件可下载吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-08T20:56:13.957

自 2.3 版起，媒体视图已被弃用。您应该改用[发送文件](http://book.cakephp.org/2.0/en/controllers/request-response.html#cake-response-file)。

在你的控制器中查看这个最小的例子：

```
public function download($id) {
    $path = $this->YourModel->aMagicFunctionThatReturnsThePathToYourFile($id);
    $this->response->file($path, array(
        'download' => true,
        'name' => 'the name of the file as it should appear on the client\'s computer',
    ));
    return $this->response;
} 
```

的第一个参数`$this->response->file`是相对于您的`APP`目录的。所以调用`$this->response->file('someFolder' . DS . 'someFile.zip')`将下载文件`APP/someFolder/someFile.zip`。

“发送文件”至少需要 CakePHP 2.0 版。还请考虑查看上面的食谱链接。

* * *

如果您运行的是旧版本的 CakePHP，您应该使用您在问题中已经提到的**媒体视图。**使用此代码并参考[媒体视图（食谱）](http://book.cakephp.org/2.0/en/views/media-view.html)。

以下是旧版本的相同方法：

```
public function download($id) {
    $this->viewClass = 'Media';
    $path = $this->YourModel->aMagicFunctionThatReturnsThePathToYourFile($id);
    // in this example $path should hold the filename but a trailing slash
    $params = array(
        'id' => 'someFile.zip',
        'name' => 'the name of the file as it should appear on the client\'s computer',
        'download' => true,
        'extension' => 'zip',
        'path' => $path
    );
    $this->set($params);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-25T12:16:53.553

**在CakePHP 3**中生成下载链接的正确方法

 **将此函数放在 AppController 中或编写一个组件，然后从其他控制器调用。

> 确保根据下载文件更改内容类型

```
public function downloadResponse() {
    return $this->response
        ->withHeader('Content-Type', 'application/pdf')
        ->withHeader('Content-Disposition', 'attachment;')
        ->withHeader('Cache-Control', 'max-age=0')
        ->withHeader('Cache-Control', 'max-age=1')
        ->withHeader('Expires', 'Mon, 26 Jul 1997 05:00:00 GMT')
        ->withHeader('Last-Modified', gmdate('D, d M Y H:i:s') . ' PDT')
        ->withHeader('Cache-Control', 'cache, must-revalidate')
        ->withHeader('Pragma', 'public')
        ->withFile($filePath, ['download' => true]);
} 
```**

# intuit - Intuit SDK 支付合并

> ID：15887954
> 
> 赞同：1
> 
> 时间：2013-04-08T20:05:48.533
> 
> 标签：intuit

我们目前正在使用 Intuit SDK 版本 10 同步到我们的应用程序，我们使用 /n 软件 QuickBooks Integrator，并且正在查询 QB 以按 QB 修改日期付款。我们在返回付款时遇到 QB 的随机结果，在我们的日期触发后输入，即 QB 付款的最后修改日期。我们想知道 QB 中的某些操作可能导致付款修改日期设置为交易的当前日期以外的其他日期，这会导致查询忽略它们。在这个例子中使用 QB 2012 Ent,SDK 10,QBFC_10

谢谢，马克

# http - 在 Prolog 中处理 PWP HTML 页面内的 http 查询字符串

> ID：15887958
> 
> 赞同：2
> 
> 时间：2013-04-08T20:06:04.580
> 
> 标签：http, prolog, swi-prolog

我目前正在做一个需要一些用 Prolog 编写的 Web 应用程序的项目，我选择使用著名的 SWI-Prolog PWP 库。它解析一个`script with prolog queries inside an HTML file`.

我有一个页面响应以下请求示例：

```
/user?id=N 
```

其中`N`是一个整数值。

但我无法读取`ID`HTML 文件中请求的查询字符串。

我有 .pl 文件：

```
showUser(UserId, Request) :- 
    reply_pwp_file(mydir('user_page.html'), [mime_type('text/html')], Request). 
```

我不知道如何读取`UserId`或`Request`再次检索查询字符串中的 UserId。

我在 HTML 标记中尝试了这种方式：

```
<span pwp:ask="http_parameters(Request, [id(UserId, [optional(true)])])." pwp:use="UserId" /> 
```

以前有人遇到过这种麻烦吗？

非常感谢。

这里有一些有趣的链接可以帮助我们：

*   [PWP/SGML 页面](http://bit.ly/17nn53c)
*   [SWI-Prolog HTTP 库](http://www.swi-prolog.org/pldoc/package/http.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:44:53.490

我花了一些时间，但至少我已经能够运行我在 ~/pl-devel/packages/http/examples 中找到的 demo_pwp.pl。现在，之后

```
?- server(1234). 
```

我打开网址

```
http://localhost:1234/user_id.pwp?user_id=1&user_name=carlo 
```

我在`~/pl-devel/packages/http/examples/pwp/user_id.pwp`文件中写的地方

```
<?xml version="1.0"?>
<!DOCTYPE html>

<html xmlns:pwp="http://www.cs.otago.ac.nz/staffpriv/ok/pwp.pl">

<head>
  <title>Context variables for PWP scripts</title>
</head>
<body>
  <p>This PWP demo lists the context-parameters that are passed into
     the script.
  </p>
  <ul>
    <li pwp:ask="member(Name=Value, CONTEXT)">
      <span class=name pwp:use="Name"/>
      =
      <span class=value pwp:use="writeq(Value)"/>
    </li>
  </ul>
  <!-- here is the specific part for my answer -->
  <p pwp:ask="memberchk('QUERY'=Q, CONTEXT),memberchk(user_id=UID,Q),memberchk(user_name=NAME,Q)">
     UID : <span pwp:use="UID"/> / NAME : <span pwp:use="NAME"/>
  </p>
  <!-- nested access is well thought -->
  <p pwp:ask="member('QUERY'=Q,CONTEXT)">
     UID : <span pwp:use="UID" pwp:ask="member(user_id=UID,Q)"/>
   / NAME : <span pwp:use="NAME" pwp:ask="member(user_name=NAME,Q)"/>
  </p>
</body>

</html> 
```

（这是 context.pwp 的副本，在底部添加了我的信息）我得到了

```
This PWP demo lists the context-parameters that are passed into the script.
...    
-   QUERY = [user_id='1',user_name=carlo]
...    
UID : 1 / NAME : carlo 
UID : 1 / NAME : carlo 
```

然后我可以确认 Giulio 建议的指导方针是可以的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T00:00:34.233

这真是出乎意料，因为我已经很长时间没有搅动 Prolog，但我对用 Prolog 编写 Web 应用程序的努力感到有点好笑，而且因为我很同情（长话短说：我在几年前就试过了，但它不是纯粹的 Prolog）我想我可以借此机会通过阅读文档向您指出我注意到的内容。顺便说一句，它的清晰性和可扩展性*并不是*PWP “著名”的原因，我想。

但是，在您链接的 PWP 页面的某个地方隐藏了一个关于属性的简介`pwp:use`，据说`Term`它的值是 a。

> `Term`是 Prolog 术语；中的变量`Term`受上下文约束。空`Term`被视为该属性的缺失值。Prolog 变量`CONTEXT`指的是整个上下文，一个列表`Name = Value`，其中`Name`是一个 Prolog 原子，它包含上下文变量的名称，并且`Value`是一个任意的 Prolog 术语。

埋在其他*地方*，即[文档页面](http://www.swi-prolog.org/pldoc/man?predicate=reply_pwp_page%2f3)（`reply_pwp_page/3`哦，`reply_pwp_file/3`你链接的页面中没有，真的，即使你使用它）还有另一个有趣的片段列出了所谓的初始上下文的内容，特别是：

> `QUERY`[是一个]`Var=Value`表示查询参数的列表

由于没有关于使用查询参数列表的提示或建议甚至示例——但这对于被迫在 Prolog 中编写 Web 应用程序的人来说几乎不是最糟糕的问题——我个人的看法是查询参数的名称`id`只是`id`(希望这`Var`只是一个错误的名称`Param`，而不是一个真正的 Prolog 变量）并且该值只是该值，但是我们对转换或在解析查询字符串期间可能自动发生的任何事情一无所知，因为在查询字符串一切都是字符串，但您可能需要一个数字`id`，并且您可能需要自行将该字符串转换为数字。我想在某个地方确实有一些神奇的谓词在做这件事。Prolog 不是很棒吗？

因此，在没有任何其他线索的情况下，非常感谢那些编写此文件的人......我的疯狂猜测是您需要以下元素，`span`尽管如此，这是一个空的，这在任何合理有效的 HTML 文档中都是非法的：

```
<span pwp:ask="..."/> 
```

在哪里，作为`ask`值，您应该提供一个遍历`CONTEXT`列表的查询（通过`member/2`，也许？），直到它找到一个形式的术语`'QUERY'=QueryParameters`；那么在`QueryParameters`你应该有实际的查询参数列表，所以你需要以与之前列表相同的方式遍历它`CONTEXT`，当你在这里找到表单的一个术语时，`id=N`你最终`N`应该包含你几乎没有获得的用户ID的值.

现在，我真的希望它比我所概述的更简单。请记住，通过查看您指向的文档，这只是一个疯狂的猜测。但是，虽然其他人很可能会因为多种原因忙于否决这个答案（希望因为它完全错误，而且解决方案更简单），但我的最后一个建议是让您讨论项目的限制再次与负责它们的人一起，因为当有*很多*框架时，在 Prolog 中编写 Web 应用程序确实是一件不合理的事情（我说的是*框架*，而不仅仅是为了“更大的利益”而扔进标准库的一些模块）用其他语言编写的，文档*非常*好，更易于理解，当然也更易于使用。

# html - 如何将 h1 中的“sup”与大字体对齐

> ID：15887959
> 
> 赞同：3
> 
> 时间：2013-04-08T20:06:05.527
> 
> 标签：html, css, superscript

我正在制作一个网站，其中有一个大字体的 h1。我要做的是制作一个与文本顶部对齐的上标，但无论我做什么都没有正确对齐。

这是我正在做的事情！ [http://plunker.co/edit/gnS915O9PVAe9VKktqFh?p=preview](http://plunker.co/edit/gnS915O9PVAe9VKktqFh?p=preview)

所以在这个笨拙中，我试图让“TM”成为 ACME 的上标。然而，它

标记是这样的：

```
 <h1>
    acme
    <sup>TM</sup>
  </h1> 
```

风格是这样的：

```
 body {
    padding: 60px;
    font-size: 10px;
  }
  h1 {
    font-size: 12em;
    text-transform: uppercase;
    line-height: 1em;
  }

  h1 sup {
    font-size: .1em;
    vertical-align: super;
  } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T20:13:20.140

设置垂直对齐和行高：

```
 h1 sup {
    font-size: .1em;
    vertical-align: top;
    line-height: 35px;
    margin-left: -30px;  
  } 
```

我更新了答案，以负边距将 sup 向左推。

Plunker：[http ://plnkr.co/T45y7ob43mdNY3fvC73S?p=preview](http://plnkr.co/T45y7ob43mdNY3fvC73S?p=preview)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T20:22:12.897

我可以在 Chromium 24/Ubuntu 12.10 中（完全）完成这项工作的唯一方法是使用：

```
h1 sup {
    position: relative;
    display: inline-block;
    font-size: .1em;
    top: -2em; 
```

}

[（我认为是分叉的）Plunker 演示](http://plunker.co/edit/MGRTFA7pegnlhkRBSuGz?p=preview)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T20:14:27.223

你在 acme 之后额外的换行符使它换行到下一行......看看你的分叉[PLUNKER](http://plunker.co/edit/ncPRcSe95UNblunZiyq4?p=preview)

```
 <h1>
    acme<sup>TM</sup>
  </h1> 
```

# visual-studio-2012 - 为什么 Visual Studio 调试模式只能识别 https 地址？

> ID：15887960
> 
> 赞同：0
> 
> 时间：2013-04-08T20:06:20.783
> 
> 标签：visual-studio-2012

我正在尝试重建一个大型解决方案的三个版本（调试/测试/生产），其中包含 120 个不同的项目，包括一个网站。版本之间的差异很小。

我已经成功地重建和构建了所有三个版本。当我使用 F5 本地调试启动每个程序时，它会在开发人员版本的 IIS 上搜索网站。在其中两个版本中，它成功并正常拉起网站。在第三个中，它说它找不到该网站，即使浏览器中的地址准确地读取了它应该读取的内容，包括端口号（它与 Visual Studio 中网站的信息页面上给出的端口号匹配）。

关键是：当我为第三个版本启用 SSL 时，通过 F5 启动解决方案后，它仍然找不到网站 - 直到我用 SSL 端口号替换端口号，并将“http”替换为“https”。然后它加载网站。

有谁知道什么可以使 Visual Studio 2012 表现得像这样，以及如何使第三个解决方案的行为与其他两个相匹配？

# c++ - 通过指向 Derived 而不是 Base 的指针删除

> ID：15887965
> 
> 赞同：-1
> 
> 时间：2013-04-08T20:06:33.047
> 
> 标签：c++, templates, pointers, c++11, smart-pointers

我实现了一个基本的智能指针类。它适用于以下类型的代码。（考虑 Base1 有一个公共构造函数）

```
Sptr<Base1> b(new Base1);
b->myFunc();
{
    Sptr<Base1> c = b;
    Sptr<Base1> d(b);
    Sptr<Base1> e;
    e = b;
} 
```

但是在测试代码中它有一个受保护的构造函数（我需要它是这样的）。和代码

```
Sptr<Base1> sp(new Derived); 
```

产生以下错误（注意派生）：

```
Sptr.cpp: In instantiation of ‘my::Sptr<T>::~Sptr() [with T = Base1]’:
Sptr.cpp:254:39:   required from here
Sptr.cpp:205:9: error: ‘Base1::~Base1()’ is protected
Sptr.cpp:97:17: error: within this context 
```

问题是我必须确保通过指向 Derived 的指针而不是 Base1 进行删除。我怎样才能做到这一点？

这是类代码（剪辑以显示构造函数和析构函数以及类成员）

```
template <class T>
class Sptr {
private:
   T* obj; // The actual object pointed by
       RC* ref;// A reference object to keep track of count
public:
  //declarations

template <typename T>
Sptr<T>::Sptr():obj(NULL),ref(NULL) {
    //do something
    std::cout<<"()\n";
    ref = new RC();
    ref->AddRef();
}

template <typename T>
Sptr<T>::Sptr(const Sptr &a) : obj(a.obj),ref(a.ref) {
    //do something
    std::cout<<"const Sptr\n";
    ref->AddRef();
}

template <typename T>
Sptr<T>::~Sptr() {
    //do something
    if(ref->Release() == 0) {
        if(obj)
            delete obj;

        delete ref;
    }
}

template <typename T>
template <typename U>
Sptr<T>::Sptr(U* u) : obj(u),ref(NULL) {
    //do something
    ref = new RC();
    ref->AddRef();
}

template <typename T>
template <typename U> 
Sptr<T>::Sptr(const Sptr<U> &u) : obj(u.obj),ref(u.ref) {
    std::cout<<"const Sptr<U>\n";
    ref->AddRef();
} 
```

**编辑**

析构函数不是虚拟的。这就是我必须解决的情况。下面是`Base1`和`Derived`类

```
class Base1 {
    protected:
        Base1() : derived_destructor_called(false) {
            printf("Base1::Base1()\n");
        }
    private:
        Base1(const Base1 &); // Disallow.
        Base1 &operator=(const Base1 &); // Disallow.
    protected:
        ~Base1() {
            printf("Base1::~Base1()\n");
            assert(derived_destructor_called);
        }
    protected:
        bool derived_destructor_called;
};

class Derived : public Base1 {
        friend void basic_tests_1();
    private:
        Derived() {}
        Derived(const Derived &); // Disallow.
        Derived &operator=(const Derived &); // Disallow.
    public:
        ~Derived() {
            printf("Derived::~Derived()\n");
            derived_destructor_called = true;
        }
        int value;
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T20:33:41.543

如果将构造函数设为模板，则可以检测在构造时传入的指针类型并将该信息保存在智能指针中（例如，在多态删除器对象中）。这是（我相信）`shared_ptr<>`它是如何做到的。如果传入的指针类型没有可访问的析构函数，您可能还可以使用 SFINAE 产生编译器错误。

# user-interface - 是否有成熟的 D2 GUI 库不依赖任何 DLL（仅适用于 Windows）

> ID：15887970
> 
> 赞同：0
> 
> 时间：2013-04-08T20:06:45.333
> 
> 标签：user-interface, d

我有一个用 D 编写的小型固件更新程序，它在命令行中运行良好，但我想给它一个 GUI。真正需要的只是一个进度条、几个对话框和一个状态栏。它只会部署在 Windows 上（从 XP 到当前），我希望它具有尽可能少的依赖项。是否有一个 GUI 库被认为可以用于生产代码，可以静态链接到一个小 exe 中？还是我应该只使用裸 Windows API？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T22:02:12.157

是的，有几个，但 DFL 最符合您的描述。有关 DFL 的更多信息：[http](http://www.dprogramming.com/dfl.php) ://www.dprogramming.com/dfl.php 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T13:40:05.920

你总是可以选择[DWT](http://github.com/d-widget-toolkit/dwt)，它是 eclipse 的 SWT 到 D 的一个端口。它是跨平台的，但由于你只需要支持 Windows，你还不如使用原生的 C API。不过，我更喜欢使用 DWT。

# jquery - 如何在 jquery-ui 手风琴渲染中制作多个 jwplayer 音频播放器并正常工作？

> ID：15887972
> 
> 赞同：1
> 
> 时间：2013-04-08T20:06:51.413
> 
> 标签：jquery, jquery-ui, jwplayer, jquery-ui-accordion

我正在尝试改进和更新具有多个 jwplayer（仅限音频）的页面的外观。“原始”页面工作正常 - 所有音频播放器都正确呈现并且可用（请参阅[http://www.pera.state.nm.us/meetingaudio.html](http://www.pera.state.nm.us/meetingaudio.html)）。

但我试图将音频播放器放在 jquery-ui 手风琴中，但一切都不对；手风琴 div 中的第一个玩家被渲染并正常工作，但同一手风琴 div 中的所有后续玩家都被错误地渲染并且不会播放。播放按钮似乎呈现在进度条下方。这是一些说明问题的示例代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
  <script type="text/javascript" src="/resources/jquery-1.9.1.min.js"></script>
  <script type="text/javascript" src="/resources/jquery-ui-1.10.2.min.js"></script>
  <script type="text/javascript" src="/resources/jwplayer6/jwplayer.js"></script>
  <link rel="stylesheet" type="text/css" href="/resources/pera-custom/jquery-ui-1.10.2.custom.min.css" />

  <script type="text/javascript">
    $(function() {
      $(".accordion").accordion({
        heightStyle: "content"
      });
    });
  </script>
</head>
<body>
  <div class="accordion">
    <span class="accHead">February 28, 2013</span>
    <div class="accContent">
      <div id="Board20130228" class="audioPlayer" style="float: left;"></div>
      <div style="float: right;"><span class="smallNote">Length:<br />1:29:55</span></div>
    </div>

    <span class="accHead">January 31, 2013</span>
    <div class="accContent">
      <div class="audioPlayer" id="Board20130131" style="float: left;"></div>
      <div style="float: right;"><span class="smallNote">Length:<br />1:49:53</span></div>
    </div>
  </div>

  <script type="text/javascript">
    jwplayer('Board20130228').setup({
      'file': 'http://www.pera.state.nm.us/audio/BoardMeetingFeb28_2013.mp3',
      'controlbar': 'bottom',
      'width': '420',
      'height': '40',
      'provider': 'audio',
      'primary': 'html5'
    });

    jwplayer('Board20130131').setup({
      'file': 'http://www.pera.state.nm.us/audio/BoardMeetingJan31_2013.mp3',
      'controlbar': 'bottom',
      'width': '420',
      'height': '40',
      'provider': 'audio',
      'primary': 'html5'
    });
  </script>
</body>
</html> 
```

所以你可以很容易地在（in）action 中看到这一点，我整理了一个 jsFiddle：http: [//jsfiddle.net/timbck2/y4RSS/](http://jsfiddle.net/timbck2/y4RSS/)。

我正在使用 jwplayer 的最新版本（截至今天，2013 年 4 月 8 日）：6.3242。

谁能帮我？

更新：正如 Ethan 指出的，播放器在 Firefox v.20 中都可以正常工作。但是它们在 Chrome (v.26)、IE (v.10) 和 Safari (Mac) 中被破坏了。这是一张图片，显示了在手风琴中的第一个之后，我在所有非 Firefox 浏览器中为所有玩家看到的内容：

![破碎的jwplayer](https://dl.dropbox.com/u/2206746/broken_jwplayer.png) 播放按钮似乎隐藏在进度条后面，不可点击。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T19:27:43.003

问题似乎最终是 jQuery/jQuery-ui 库和 jwplayer 库之间的冲突。解决方法是让播放器首先呈现为 flash 并回退到 html5（而不是相反，因为我已经对其进行了编码）。

# c - 进入结构数组分段错误

> ID：15887977
> 
> 赞同：1
> 
> 时间：2013-04-08T20:07:08.343
> 
> 标签：c, file, struct, fread, calloc

我已经在这段代码上工作了一段时间，但我遇到了一个似乎无法调试的段错误。以下是相关代码：

```
typedef struct Halo* Halo;  
struct Halo  
{  
    float x, y, z;  
    float vx, vy, vz;  
    int n200a;  
    float m200a;  
    float r200a;  
    int n200c;  
    float m200c;  
    float r200c;  
    int n500a;  
    float m500a;  
    float r500a;  
    int n500c;  
    float m500c;  
    float r500c;  
}; 
```

全局变量：

光环 *halo_catalog;

失败的功能：

```
int loadHaloCatalog(char *filename)  
{  
    FILE *catalog_file;  
    long long halo_num;

    catalog_file = fopen(filename, "rb");
    if (catalog_file == NULL) {
        printf("Could not open halo catalog: %s\n", filename);
        return -1;
    }
    if (fread(&halo_num, sizeof(long long), 1, catalog_file) < 0) {  
        printf("Could not read number of halos\n");  
        return -1;  
    }  
    halo_catalog = (Halo *)calloc(halo_num, sizeof(struct Halo));  
    if (fread(halo_catalog, sizeof(struct Halo), halo_num, catalog_file) < 0) {  
        printf("Could not read that number of halos\n");  
        return -1;  
    }  
    printf("%f\n", halo_catalog[10000]->x);  
    printf("done\n");  
    fclose(catalog_file);  
    return (int)halo_num;  
} 
```

它在 "printf("%f\n", halo_catalog[10000]->x);" 上失败 行，或对 fread 调用后分配的内存的任何其他访问。我知道我传入了一个有效文件，因为它可以正确读取 halo_num。它还从 fread 调用中收集有关 Halo 对象的正确信息，就像我调用 fread 并检查返回时它返回 halo_num 一样。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T20:22:36.290

```
typedef struct Halo* Halo; 
```

这是一个可怕的想法，可能是你的问题的原因。

你有一个全局变量

```
Halo *halo_catalog; 
```

所以一个`struct Halo**`。但在

```
halo_catalog = (Halo *)calloc(halo_num, sizeof(struct Halo));  
if (fread(halo_catalog, sizeof(struct Halo), halo_num, catalog_file) < 0) { 
```

你使用它就好像它是一个`struct Halo*`.

然后你索引

```
printf("%f\n", halo_catalog[10000]->x); 
```

在距`10000 * sizeof(struct Halo*)`where`halo_catalog`点的字节距离处，并解释该位置的字节 - 这是某些`float`s 或`int`s 读入的值的一部分，而不是指针 - 并尝试访问`x`任何任意位置的组件是该误解的结果.

你应该

```
typedef struct Halo Halo; 
```

并用于`halo_catalog[10000].x`解决该问题。

另一个问题是`fread`返回它已成功读取的项目数，如果小于请求的数字，它仍然可以是正数。

捕获 的返回值`fread`，并使用它来确定读取是否完全成功。此外，在尝试打印之前，请确保 10000 是有效索引`halo_catalog[10000].x`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T20:09:58.653

这真的可以编译吗？

问题是 halo_catalog 是指向数组的指针，而不是指针数组。你应该使用`printf("%f\n", halo_catalog[10000].x);`

我假设 10000 仅用于测试目的？因为我没有看到可以保证 halo_catalog 中有 10000 条记录。

# html - 如何将此 html 按钮链接到输入类型“文本”，以便当我从输入类型按 enter 时，按钮被激活？

> ID：15887979
> 
> 赞同：0
> 
> 时间：2013-04-08T20:07:23.987
> 
> 标签：html, button

这是表单的html代码：

```
<form>
 Input Twitter ID: <input type="text" name="userid" id="userid">  

<button type="button" onClick="getStatuses();">Get recent tweets</button>  

</form> 
```

目前该按钮激活 getStatuses()。我想要这样当用户在输入文本后按下回车键时，它也会激活按钮。输入在 getStatuses() 中使用，并由输入的 id 引用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T20:11:55.960

您可以使用 onkeyup 属性并调用函数：

JS：

```
function checkKey(e){
    var enterKey = 13;
    if (e.which == enterKey){
        getStatuses();
    }
} 
```

HTML：

```
<input type="text" name="userid" id="userid" onkeyup="checkKey(event)"> 
```

# jquery - 电子商务缩略图库查看器

> ID：15887981
> 
> 赞同：0
> 
> 时间：2013-04-08T20:07:34.970
> 
> 标签：jquery

通常在电子商务网站上找到，我有一个主图像和大约 5 个缩略图。当您单击较小的缩略图（不同的视图）时，我希望主图像发生变化。这是我[在这个网站上寻找的一个例子。](http://www.williams-sonoma.com/products/kitchenaid-pro-line-dicing-food-processor/?pkey=cnew-electrics)我正在寻找某种可以让我实现这一目标的插件。

HTML：

```
<div class="product">
    <img src="pro.jpg">
</div>

<ul class="product-thumb">
    <li><img src="1.jpg"></li>
    <li><img src="1.jpg"></li>
    <li><img src="1.jpg"></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T21:55:16.537

这看起来很简单。

您应该检查不同的浏览器。尤其是 IE

[http://jquerytools.org/demos/scrollable/gallery.html](http://jquerytools.org/demos/scrollable/gallery.html)

[http://papermashup.com/simple-jquery-gallery/](http://papermashup.com/simple-jquery-gallery/)

# coldfusion - ColdFusion 9 cffile 错误访问被拒绝

> ID：15887985
> 
> 赞同：2
> 
> 时间：2013-04-08T20:07:38.893
> 
> 标签：coldfusion, coldfusion-9, access-denied, cffile

我收到以下错误：

```
The cause of this exception was: 
    java.io.FileNotFoundException:
    //server/c$/folder1/folder2/folder3/folder4/folder5/login.cfm
    (Access is denied). 
```

这样做时：

```
<cffile action="copy" 
    destination="#copyto#\#apfold#\#applic#\#files#"
    source="#path#\#apfold#\#applic#\#files#"> 
```

如果我尝试写信`C:\folder1\folder2\folder3\folder4\folder5\login.cfm`，它工作正常。这样做的问题在于，这是一个让开发人员能够手动将文件同步到他们的应用程序文件夹的脚本。对于每个实例，我们有多个服务器，由 BigIP 随机选择。因此，仅写入 C:\ 驱动器只会将文件复制到开发人员当前正在访问的服务器。因此，如果开发人员要关闭浏览器并立即返回以确保他们的更改有效，如果他们碰巧被发送到不同的服务器，他们将看不到他们的更改。

由于它适用于写入 C:\，因此我知道权限是正确的。我还从错误消息中复制了路径并将其放在服务器的地址栏中，它可以很好地到达文件夹/文件。还有什么可以阻止它访问该服务器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T20:23:11.173

似乎您想通过 UNC 表示法访问网络文件夹上的文件（即使它偶然引用了本地 c:\ 驱动器上的目录）。为此，您必须更改运行 ColdFusion 9 应用程序服务器服务的用户。默认情况下，此服务使用用户“本地系统帐户”运行，您需要将其更改为实际用户。查看以下链接以了解如何执行此操作：http: [//mlowell.hubpages.com/hub/Coldfusion-Programming-Accessing-a-shared-network-drive](http://mlowell.hubpages.com/hub/Coldfusion-Programming-Accessing-a-shared-network-drive)

请注意，您可能必须将与用于 CF 9 服务的用户同名的用户添加到所有文件服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T13:10:58.483

如果您不想在服务器上启用 ftp，另一种选择是使用 RoboCopy 来保持服务器同步。使用这个工具我很幸运。您需要访问`cfexecute`ColdFusion 标签，并且需要在您的服务器上创建共享。

RoboCopy 是 Windows 附带的可执行文件。[您可以在此处](http://technet.microsoft.com/en-us/library/cc733145%28v=ws.10%29.aspx)和[此处](http://ss64.com/nt/robocopy.html)阅读一些文档。它有一些非常强大的功能，可以设置为将目录内容从一台服务器“镜像”到另一台服务器。在此模式下，它将保持文件夹相同（添加新文件、删除删除文件、复制更新文件等）。这就是我使用它的方式。

基本上，您将在目标服务器上创建一个共享并授予特定用户（可以是本地用户或域用户）的访问权限。在您的源服务器上，您将运行一些 ColdFusion 代码：

1.  将驱动器逻辑映射到目标服务器
2.  运行 RoboCopy 实用程序将文件复制到目标服务器
3.  然后断开映射的驱动器

源服务器上的 ColdFusion 服务将需要访问`C:\WINDOWS\system32\net.exe`和`C:\WINDOWS\system32\robocopy.exe`. 如果您使用 ColdFusion 沙箱安全性，您将需要为这些可执行文件添加条目（仅在源服务器上）。下面是一些基本的代码示例。

首先，映射到目标服务器：

```
<cfexecute name="C:\WINDOWS\system32\net.exe"
    arguments="use {share_name} {password} /user:{username}"
    variable="shareLog"
    timeout="30">
</cfexecute> 
```

这里的 {share_name} 类似于`\\server\c$`. {username} 和 {password} 应该很​​明显。您可以将用户名指定为`\\server\username`. **注意** *我建议使用您创建的共享而不是管理共享`c$`，但这就是您在示例中所拥有的。*

接下来，将文件从源服务器复制到目标服务器：

```
<cfexecute name="C:\WINDOWS\system32\robocopy.exe"
    arguments="{source_folder} {destination_folder} [files_to_copy] [options]"
    variable="robocopyLog"
    timeout="60">
</cfexecute> 
```

这里的 {source_folder} 类似于`C:\folder1\folder2\folder3\folder4\folder5\`{destination_folder} 将是`\\server\c$\folder1\folder2\folder3\folder4\folder5\`. 您必须以上述步骤中的 {share_name} 开头此参数，后跟所需的目录路径。[files_to_copy] 是文件列表或通配符 ( `*.*`)，[options] 是 RoboCopy 的选项。请参阅我包含的链接以获取完整的选项列表。它是广泛的。要镜像文件夹结构，请参见`/E`和`/PURGE`选项。我通常还包括`/NDL`和`/NP`选项来限制生成的输出。并`/XA:SH`排除系统和隐藏文件。并且`/XO`不打扰复制旧文件。您可以专门或使用通配符排除其他文件/目录。

然后，断开映射的驱动器：

```
<cfexecute name="C:\WINDOWS\system32\net.exe"
    arguments="use {share_name} /d"
    variable="shareLog"
    timeout="30">
</cfexecute> 
```

奇迹般有效。如果您走这条路并且之前没有使用过 RoboCopy，我强烈建议您先使用命令行来玩弄选项/功能。然后，一旦你让它按照你的喜好工作，只需将这些选项粘贴到上面的代码中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-11T00:45:43.157

我遇到了类似的问题，这也让我摸不着头脑。我们使用 Active Directory 以及 SERVERSHARE/webroot 的 UNC 路径。除了使用 CFFILE 创建目录外，该应用程序运行良好。我们将 CFService 作为域帐户运行，并且授予了 webroot 文件夹（位于 UNC 服务器上）的权限。同样的域帐户也被用于连接到 IIS 中的 UNC 路径。我什至甚至授予对 webroot 文件夹的完全控制权，但仍然没有运气。

最终，我发现导致问题的原因是 Inetpub 文件夹（我们的 webroot 的父文件夹）已打开共享，但该共享不包括我们的 CFService 域帐户的“读/写”共享。

因此，虽然我们在 Inetpub 上共享并为 Inetpub/webroot 文件夹启用了更强大的用户权限，但共享权限（或缺少共享权限）优先于更精细的 webroot 用户安全权限。

希望这对其他人有帮助。

# sql-server - sqlsrv 驱动程序在 codeigniter 中运行缓慢？

> ID：15887986
> 
> 赞同：4
> 
> 时间：2013-04-08T20:07:39.330
> 
> 标签：sql-server, codeigniter, sqlsrv

我已经安装了最新版本的 CI 2.1.3

现在运行查询后，对于一些非常简单的事情，我的响应时间很慢，例如：

```
function Bash(){

    $sql = “SELECT * FROM Contacts”;
$stmt = sqlsrv_query( $conn, $sql );
if( $stmt === false) {
  die( print_r( sqlsrv_errors(), true) );
} 
```

查询远程数据库后。（SQL 服务器 2008）

当我在一个简单的 PHP 脚本中针对同一个远程数据库运行相同的查询时。我立即得到结果。

a) 是否有其他人在使用 codeigniter 中的 sqlsrv 驱动程序时遇到过这个问题？

如果是这样，您是如何解决的？

这是我的连接字符串：

```
$db['default']['hostname'] = "xxxxx,1433";
$db['default']['username'] = "xx";
$db['default']['password'] = "xxxxxx-xx";
$db['default']['database'] = "xxxxxxxxx";
$db['default']['dbdriver'] = "sqlsrv";
$db['default']['dbprefix'] = '';
$db['default']['pconnect'] = TRUE;
$db['default']['db_debug'] = TRUE;
$db['default']['cache_on'] = TRUE;
$db['default']['cachedir'] = '';
$db['default']['char_set'] = 'utf8';
$db['default']['dbcollat'] = 'utf8_general_ci';
$db['default']['swap_pre'] = '';
$db['default']['autoinit'] = TRUE;
$db['default']['stricton'] = FALSE; 
```

更新：

我通过运行探查器发现了以下内容。

数据库：数据库查询：1（隐藏）0.0659 从联系人中选择 *

加载时间：基类 0.0428 控制器执行时间（欢迎 / AzureBash）58.2173 总执行时间 58.2602

似乎查询在 0.06 秒内执行，但控制器需要一分钟才能加载。

不知道为什么会这样。

**解决方案**

最新 SQLSRV 驱动程序的活动记录界面有问题。

因此，下载并用这些覆盖现有接口（覆盖 CI 中数据库文件夹中的 sqlsrv 文件夹）：

[http://www.kaweb.co.uk/blog/mssql-server-2005-and-codeigniter/](http://www.kaweb.co.uk/blog/mssql-server-2005-and-codeigniter/)

注意：这些已经使用 SQL Azure 进行了测试并且可以正常工作。

$query->num_rows(); 不适用于这些驱动程序，因此我建议您改用 count。或者创建自己的包装器。

此外，日期现在是结果集中的日期对象类型。

我希望这有帮助。

**解决方案 2**

如果由于某种原因您发现了一个使此程序完全无法使用的错误。恢复到最初提供的 sqlsrv 接口。您会发现导致问题的原因是原始接口执行查询的方式，因此，创建了一个数据库帮助器类；使用 $sql = $this->db->last_query(); 获取您将要执行的查询，然后在 database_helper 类中自己执行它：

```
function MakeDbCall ($sql)
{
$serverName = "xxxxx-xxxx-xxx,1433"; //serverName\instanceName
$connectionInfo = array( "Database"=>"xxx", "UID"=>"xx", "PWD"=>"xxxxx","ConnectionPooling" => "1");

 $conn = sqlsrv_connect($serverName,$connectionInfo);
 $stmt = sqlsrv_query($conn, $sql);

 while( $row = sqlsrv_fetch_array( $stmt, SQLSRV_FETCH_ASSOC) ) {
      $result_array[] = $row;
}

return $result_array;

} 
```

为 row_array 创建一个。

您应该能够从应用程序的任何位置直接调用此函数。同时利用 active_records 构造查询的方式。

这不是一个理想的解决方案，但在 codeigniter 对他们的 SQLSRV 类进行排序之前，我们无能为力。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T13:57:18.117

**解决方案**

最新 SQLSRV 驱动程序的活动记录界面有问题。

因此，下载并用这些覆盖现有接口（覆盖 CI 中数据库文件夹中的 sqlsrv 文件夹）：

[http://www.kaweb.co.uk/blog/mssql-server-2005-and-codeigniter/](http://www.kaweb.co.uk/blog/mssql-server-2005-and-codeigniter/)

注意：这些已经使用 SQL Azure 进行了测试并且可以正常工作。

$query->num_rows(); 不适用于这些驱动程序，因此我建议您改用 count。或者创建自己的包装器。

此外，日期现在是结果集中的日期对象类型。

**解决方案 2**

如果由于某种原因您发现了一个使此程序完全无法使用的错误。恢复到最初提供的 sqlsrv 接口。您会发现导致问题的原因是原始接口执行查询的方式，因此，创建了一个数据库帮助器类；使用 $sql = $this->db->last_query(); 获取您将要执行的查询，然后在 database_helper 类中自己执行它：

```
function MakeDbCall ($sql)
{
$serverName = "xxxxx-xxxx-xxx,1433"; //serverName\instanceName
$connectionInfo = array( "Database"=>"xxx", "UID"=>"xx", "PWD"=>"xxxxx","ConnectionPooling" => "1");

 $conn = sqlsrv_connect($serverName,$connectionInfo);
 $stmt = sqlsrv_query($conn, $sql);

 while( $row = sqlsrv_fetch_array( $stmt, SQLSRV_FETCH_ASSOC) ) {
      $result_array[] = $row;
}

return $result_array;

} 
```

为 row_array 创建一个。

您应该能够从应用程序的任何位置直接调用此函数。同时利用 active_records 构造查询的方式。

这不是一个理想的解决方案，但在 codeigniter 对他们的 SQLSRV 类进行排序之前，我们无能为力。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-28T15:54:58.360

在答案已被接受后添加答案，因为我找到了不同的解决方案。我遇到了同样的问题......遍历结果集非常非常慢。我打开 system/database/drivers/sqlsrv/sqlsrv_driver.php 并找到了连接函数。我注意到这是使用 SQLSRV_CURSOR_STATIC 选项。我将其更改为 SQLSRV_CURSOR_CLIENT_BUFFERED 并且我的缓慢问题消失了。请参阅此处的文档：

[http://msdn.microsoft.com/en-us/library/hh487160(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/hh487160(v=sql.105).aspx)

老实说，我不知道 php 的 sql server 驱动程序在做什么，但是，鉴于速度加快等，我可以猜测驱动程序可能默认使用光标。这似乎是一个糟糕的主意。我还假设通过选择 client_buffered 查询的数据将在没有游标的情况下读取并在客户端的内存中访问，就好像它是游标一样。如果是这种情况，如果您尝试执行一个有很多行要读取的查询，则可能会发生不好的事情。也许另一个选项（SQLSRV_CURSOR_FORWARD？）可用于在没有游标的情况下读取数据 - 但我确信用于访问查询的方法将受到更多限制（例如，不使用 result_array()）

-大学教师

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T21:20:43.597

你的连接字符串是什么？您可以明确指定“网络协议”，这有时会影响速度。

[http://www.connectionstrings.com/articles/show/define-sql-server-network-protocol](http://www.connectionstrings.com/articles/show/define-sql-server-network-protocol)

"提供者=sqloledb；数据源=190.190.200.100,1433；网络库=DBMSSOCN；初始目录=pubs；用户ID=myUsername；Password=myPassword；"

通过指定 IP 地址、端口号 (1433) 和网络库，您可以提供非常精细的连接字符串。当然，您的详细信息可能会有所不同。

很多时候，你不需要这个。但我参加过几次客户旅行，这就是神奇的尘埃。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-09T17:18:48.680

您可能希望将 db_debug 设置为 FALSE，这样可以节省调试数据库的时间。

此外，建议将 cache_on 设置为 FALSE 并指定 cachedir 并`$this->db->cache_on();`用于不太动态的查询，即不经常更改。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-19T21:04:46.753

为了将获取速度提高 3 倍，请在 sqlsrv_connect 连接选项中使用“MultipleActiveResultSets”=>'0'。

前任：

```
$db = sqlsrv_connect('127.0.0.1', array('Database'=>'dbname','UID'=> 'sa','PWD'=> 'pass',"CharacterSet" =>"UTF-8","ConnectionPooling" => "1"
                    ,"MultipleActiveResultSets"=>'0'

            )); 
```

# verilog - 我怎样才能减少多路复用器的大小

> ID：15887993
> 
> 赞同：0
> 
> 时间：2013-04-08T20:07:57.177
> 
> 标签：verilog, memory-model

```
module memory_module (input clk,input[0:6] address,input [0:7]data_input,
    input read_write,output [0:7]  data_output,input enable,output ready);
    reg ready;
    reg [0:7] data_output;
    reg [0:7] memory [127:0];

    initial
    begin
        ready=0;
    end
    always @(posedge clk)
    begin
        if(enable)
        begin
            ready=0;
            if(read_write)
            begin
                    data_output[0:3]= memory[address][0:3];
                    data_output[4:7]= memory[address][4:7];
            end
            else
            begin
                                        memory[address][4:7]=data_input[4:7];
                                        memory[address][0:3]=data_input[0:3];
            end
            ready=1;
        end
        else
            ready=0;
    end
endmodule 
```

这是我用于内存模块设计的简单verilog代码（我想让我的代码更高效）

另外当我写**data_output[0:7]= memory[address][0:7];** 它创建了一个 8X1 多路复用器

通过写作

```
data_output[0:3]= memory[address][0:3];
data_output[4:7]= memory[address][4:7]; 
```

我是否减少了多路复用器的大小？？？

;

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:06:39.870

不，像这样分解它的大小将相同。

我想你在这里混合地址的值，所以我不明白你为什么认为你有一个 8x1 多路复用器。你有 128 个可能的地址，所以如果你将它们复用到输出，你应该有一个 8 位的 128 对 1 复用器。

如果将其拆分，那么您将拥有两个 4 位 128 对 1 多路复用器，这在综合中完全相同。

# python - 多进程守护程序未在父退出时终止

> ID：15887994
> 
> 赞同：12
> 
> 时间：2013-04-08T20:08:00.510
> 
> 标签：python, multiprocessing

我有一个 Python 2.7 多处理进程，它不会在父进程退出时退出。我已经设置了守护进程标志，它应该强制它在父母死亡时退出。文档指出：

“当一个进程退出时，它会尝试终止其所有守护进程。”

```
p = Process(target=_serverLaunchHelper, args=args)
p.daemon = True
print p.daemon # prints True
p.start() 
```

当我通过 kill 命令终止父进程时，守护进程保持活动状态并正在运行（这会在下次运行时阻塞端口）。子进程正在启动一个 SimpleHttpServer 并调用`serve_forever`而不做任何其他事情。我的猜测是文档的“尝试”部分意味着阻塞服务器进程正在停止进程死亡，并且它让进程成为孤立的结果。我可以让孩子将服务推送到另一个线程，并让主线程检查父进程 ID 的更改，但这似乎需要大量代码来复制守护程序功能。

有人了解为什么守护程序标志没有按描述工作吗？这在 windows8 64 位和 ubuntu12 32 位 vm 上是可重复的。

流程函数的简化版本如下：

```
def _serverLaunchHelper(port)
    httpd = SocketServer.TCPServer(("", port), Handler)
    httpd.serve_forever() 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-08T20:21:32.203

> 当一个进程退出时，它会尝试终止其所有的守护子进程。

这里的关键词是“尝试”。还有，“退出”。

根据您的平台和实现，终止守护进程子进程的唯一方法可能是明确地这样做。如果父进程正常退出，它就有机会显式退出，所以一切都很好。但是如果父进程突然终止，它不会。

特别是对于 CPython，如果您查看[源代码](http://hg.python.org/cpython/file/2.7/Lib/multiprocessing/util.py#l288)，终止守护进程的处理方式与加入非守护进程的方式相同：通过`active_children()`进入[`atexit`](http://docs.python.org/2/library/atexit.html)函数。因此，当且仅当您的`atexit`处理程序开始运行时，您的守护程序才会被杀死。而且，正如该模块的文档所说：

> 注意：当程序被 Python 未处理的信号杀死时、检测到 Python 致命内部错误时或被调用时，不会调用通过此模块注册的函数`os._exit()`。

根据您杀死父母的方式，您可以通过添加信号处理程序来拦截突然终止来解决此问题。但您可能不会——例如，在 POSIX 上，`SIGKILL`无法拦截，所以如果您`kill -9 $PARENTPID`是，这不是一个选项。

另一种选择是杀死进程组，而不仅仅是父进程。例如，如果你的父母有 PID 12345，`kill -- -12345`在 linux 上会杀死它和它的所有孩子（假设你没有做任何花哨的事情）。