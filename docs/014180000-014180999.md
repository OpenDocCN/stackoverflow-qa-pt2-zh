# StackOverflow 问答 14180000-14180999

# ruby-on-rails - 文件和目录结构的 RSpec 命名约定

> ID：14180003
> 
> 赞同：12
> 
> 时间：2013-01-06T06:44:09.847
> 
> 标签：ruby-on-rails, rspec

我正在编写 RSpec 测试，但我已经到了在不同网站上阅读不同意见的地步。当我们处理 spec/controllers 和 spec/models 目录时，RSpec 的目录结构很清楚，但是我得到的冲突信息处理的是测试视图。

我想把这些测试放在 spec/integration/ 目录中，但我读过它应该在 spec/integration 下，但另一本书说 spec/requests。这有关系吗？

为了使情况更加复杂，我已经阅读了有关命名测试的实际文件名的冲突信息！例如，如果我有一个名为“people”的控制器/模型/视图目录（我使用 haml），我应该像这样命名文件：

> 规范/集成/people.html.haml_spec.rb

然而，另一本书提出了这一点：

> 规范/请求/people_spec.rb

我想稍微解释一下 RSpec 中的命名约定以及为什么我应该命名视图测试特定名称，以及将它们放在规范/集成或规范/请求下是否重要。我觉得我在这里随风而去。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-08T04:08:52.357

检查书籍的日期和编写它们的 RSpec 版本。随着时间的推移，命名结构略有变化。

根据[rspec-rails](https://github.com/rspec/rspec-rails)的文档，请求规范可以进入 spec/requests、spec/api 或 spec/integration。我更喜欢将请求规范放在规范/请求中。

为了让事情变得更有趣，如果您将[Capybara](http://rubydoc.info/gems/rspec-rails/file/Capybara.md)与 rspec-rails 一起使用，它将与 Capybara 1.x 的规范/请求和 Capybara 2 的规范/功能一起使用。

至于个别的规范文件名，当有一个特定的类被测试时，比如 Rails 模型，你应该使用类似的规范文件名：

`app/models/user.rb`->`spec/models/user_spec.rb`

查看规范应使用模板名称：

`app/views/users/index.html.erb`->`spec/views/users/index.html.erb_spec.rb`

命名空间模型应在规范文件路径中包含命名空间：

`app/models/admin/user.rb`->`spec/models/admin/user_spec.rb`

RSpec 脚手架生成器是显示这些规范所属位置的一个很好的指南。

当没有特定的测试类时，就像请求规范一样，恕我直言，您应该随意使用描述被测试事物的名称。例如`spec/requests/place_an_order_spec.rb`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-05T00:27:32.350

rspec gem 读取的文件只是那些以文件夹`_spec.rb`以下的层次结构中的任何位置结尾的`spec`文件，只要层次结构的顶部是一个字母数字单词（即，`spec/##/`不会考虑名为的文件夹下的文件在生成规范。）这是实现这一点的相关代码行，在`/gems/rspec-rails-2.14.1/lib/rspec/rails/tasks/rspec.rake`：

```
namespace :spec do
  types = begin
    dirs = Dir['./spec/**/*_spec.rb'].
           map { |f| g=f.sub(/^\.\/(spec\/\w+)\/.*/, '\\1') ; puts ">>> Found #{g}."; g }.
           uniq.
           select { |f| File.directory?(f) }
    Hash[dirs.map { |d| [d.split('/').last, d] }]
  end 
```

所以之前文件名中的所有文本`_spec.rb`都是一个约定——它不会改变 Rails 处理文件的方式。

我必须更多地阅读代码才能弄清楚每个文件夹名称的重要性，在`spec`, 是 - 它被传递到创建的 Rake 规范任务，所以它被用于*某些事情*，但我不知道什么。

# node.js - 在 child_process.fork 上的 Node.js 调用函数

> ID：14180004
> 
> 赞同：1
> 
> 时间：2013-01-06T06:44:12.860
> 
> 标签：node.js

我有一个 server.js 模块，它导出一个 start() 函数来启动我的服务器。我需要这个模块并从 index.js 启动服务器。

我正在尝试通过在 child_process.fork 调用中启动服务器来单独（使用 Mocha）对 server.js 模块进行单元测试，但我看不到如何调用导出的启动函数。

它目前通过将 'index.js' 传递给 fork 调用来工作，但是我看不到如何将选项传递给 server.js 模块（例如发送端口号）。

这是我的[server.js](https://gist.github.com/4465656)和使用 index.js 的[单元测试](https://gist.github.com/4465655)（只需要并调用 server.start()）。

我想直接测试 server.js 以便我可以将环境变量传递给它。

**====编辑====**

我不确定我认为通过在单独的进程中启动服务器会获得什么。
我已将测试更改为仅在 before 块中启动服务器。
欢迎提出建议。

```
var assert = require("assert");
var request = require("request");

describe("Server", function(){
  var server;
  var port = 4008;

  before(function(done){
    server = require("../server");
    server.start(port);
    done();
  });

  it('listens on specified port (' + port + ')', function(done){
    request('http://localhost:' + port, function(err, res, body){
      assert(res.statusCode == 200);
      done();
    });
  });

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T15:13:28.480

您可能希望为此使用该`cluster`模块，这使得处理过程更简单一些。以下内容可能符合您的需要。

```
var cluster = require('cluster');

// Runs only on the master process.
if (cluster.isMaster) {
    var environmentVariables = { PORT: 2020 };

    var worker = cluster.fork(environmentVariables);

    // Catch a message from the worker, and then destroy it.
    worker.on('message', function(message) {
        if (message.hasOwnProperty('testResult')) {
            // Kill the worker.
            worker.destroy();

            // Then do something with the result.
        }
    });
}

// Runs only on a worker process.
if (cluster.isWorker) {
    var server = require('./server');

    server.start();

    // Do some stuff for tests.

    // Send the test result.
    process.send({ testResults: 'pass', failReason: null });
} 
```

我没有对此进行测试，但希望要点很清楚。您可以在生成工作进程时传入自定义环境变量，然后让工作进程向主进程发送结果消息。您可能需要处理退出事件和工作人员崩溃或挂断时的超时。

`process.env.PORT`顺便说一句，您可能应该将`parseInt`.

# php - 重置密码：什么是优雅的解决方案？

> ID：14180008
> 
> 赞同：0
> 
> 时间：2013-01-06T06:44:30.730
> 
> 标签：php, email, forgot-password

**问题：**

如何在不需要安全问题、DOB 或任何其他参数的情况下验证谁在重置密码？

**上下文**

在许多网站上，当请求重置密码时，随机散列会附加到数据库中的用户名。此哈希作为 URL 的一部分在电子邮件中发送给用户。当用户点击电子邮件链接时，他们会被发送到一个页面，他们可以在其中选择新密码。这里的问题是，用户可以在此“设置新密码”页面上输入任何电子邮件地址，并为该帐户设置新密码。那么如何验证用户是否真正拥有他们设置新密码的帐户？

我认为包含随机哈希的 URL 应该与新密码一起作为参数发送，因为只有在哈希匹配时才能设置密码。但是，这不起作用，因为 $_GET['hash'] 变量仅存在于从电子邮件链接的设置密码页面上。一旦用户单击“提交”，$_GET['hash'] 变量就消失了。

简单的解决方案是通过提交时的 URL 再次传递 $_GET['hash'] 变量，但这为开发人员创建了一个额外的步骤，并且可能会使他们感到困惑。（我正在创建一个库，所以我的代码必须足够简单，以便开发人员理解和集成）。

人们以前是如何解决这个问题的？有人建议使重置链接有时间限制。这将有所帮助，如果说链接仅在 30 分钟内有效，那么这意味着恶意用户只有在该人在过去 30 分钟内请求重置时才能更改其他人的密码。但是，那里仍然存在漏洞窗口，因此并不完美。

如果需要，请要求澄清。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T06:52:01.567

只有正确的用户才会点击电子邮件中的链接。
您可以以用户输入新密码的形式传递哈希：

```
$hash = $_GET["hash"];

...

<form name="newpasswordform">
...
<input type="hidden" name="thehash" value="<?php echo $hash?>"
...
</form> 
```

这样，您可以在提交表单时重新验证哈希。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T06:52:47.897

我看到一些网站为了实现额外的安全级别所做的就是让你指定一个安全问题和答案。因此，除了哈希之外，您还可以匹配安全问题（“您最喜欢的宠物是什么？”），现在您可以确认它是用户。
如果没有像 bankofamerica.com 那样实施其他安全措施，它可能与您将获得的一样安全，他们让您选择图片以及问题等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T06:51:28.597

我已经完成了（不是说这是最优雅的解决方案，但它确实有效：P）：

[使用http://mysite.com/resetpwd.php?code=1234&email=hello@hi.com](http://mysite.com/resetpwd.php?code=1234&email=hello@hi.com)之类的 URL 发送电子邮件，其中代码是用户当前电子邮件的哈希值和哈希密码。

用户点击链接，代码验证“1234”是“hello@hi.com”的哈希和哈希密码，然后显示密码重置页面，确保添加“1234”和“hello@hi.com”作为参数在传递到下一页的表格中。当他们点击进入时，它会发送到[http://mysite.com/resetpwd.php?code=1234&email=hello@hi.com&newpass=hellothere123](http://mysite.com/resetpwd.php?code=1234&email=hello@hi.com&newpass=hellothere123)

Resetpwd.php 检查 $_GET['newpass']，如果找到，则再次验证 1234 是用户的哈希密码和 hello@hi.com 的哈希，然后重置密码。

编辑：哦，我明白了，你不想再次通过验证码......然后忽略这个，除非我想出更好的解决方案:)

# debugging - 无法调试 .Net 代码。无法附加到进程。SQL CLR 远程调试

> ID：14180009
> 
> 赞同：0
> 
> 时间：2013-01-06T06:44:44.297
> 
> 标签：debugging, stored-procedures, remote-debugging, sqlclr

我正在尝试在 Visual Studio 2012 RTM 中调试基于 CLR 的 StoredProcedure。我有一个 Sql 数据库项目。当我尝试使用 RightClick -> Execute with debugger 调试我的脚本文件时，它会弹出一个关于附加进程有害的警告，当我接受它时，只需说：

> 无法调试 .Net 代码。无法附加到“Devserver”上的 SQL Server 进程。

我做了很多不同的事情：

*   我已将我的域用户添加到 sysadmin SQL Server 角色。

*   我已经在远程服务器上运行了 MSVSMON.EXE 并设置了它的权限。

*   我已经在属性窗格中配置了 Visual Studio 项目的 ConnectionString。

*   我已将当前域用户添加到远程服务器的本地管理员。

*   在 Visual Studio 的 Sql Server 对象资源管理器中，我选择了当前连接并勾选了“允许 SQL\CLR 调试”

*   ...

但它仍然说它无法附加该进程并且没有可以调试的源代码。

你有什么主意吗 ？我忘记了什么？

提前致谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-07T09:05:59.410

嗨，在互联网上搜索了很长时间后，您的问题给了我我们问题的答案。请仔细理解以下内容，

1.  以管理员的提升权限启动 Visual Studio 2012
2.  创建 SQL Server 项目
3.  在项目设置/调试窗格中，为数据库连接提供连接字符串
4.  从查看菜单，打开 SQL Server 对象资源管理器，如果您在项目中提供的连接字符串没有创建服务器实例，则在此处重新创建连接...
5.  右键单击实例并选择允许 SQL CLR 调试，它会显示一些警告，接受所有内容，但仔细阅读警告。
6.  保存项目并执行重建，并通过生成的发布脚本测试项目的发布。
7.  现在在项目中创建一个非部署脚本，放一个断点按ALT + F5执行带有Debug选项的脚本，当clr-procedure会发生并尝试进入它时，它会要求进程与windows连接，请允许附上

上面的步骤对我有用，这里是它的屏幕截图；“ [http://i.stack.imgur.com/GQwlt.png](https://i.stack.imgur.com/GQwlt.png) ”

如需更多信息，您也可以通过以下方式与我联系；维诺德 WB@vinodwb@live.com

# unix - 预回答命令行输出

> ID：14180010
> 
> 赞同：0
> 
> 时间：2013-01-06T06:44:44.507
> 
> 标签：unix, continuous-integration, command-line-interface

我的 CI 服务器有问题。当它进行构建时，我需要回答一个命令行答案。它会停止构建。我不记得如何预先回答这些问题？

我在跑`npm install yeoman -g`

![在此处输入图像描述](../Images/1bb058e61b417022aba90c8088dc97e9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T14:55:55.583

如果答案是“是”，您可以尝试：

```
yes | npm install yeoman -g 
```

`yes`如果您需要不同的响应，则接受参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T06:48:47.307

我不知道它是否特定于应用程序，但我以前见过`-y`用于确认提示。

# c# - 我的用户控件没有出现在工具箱中

> ID：14180011
> 
> 赞同：0
> 
> 时间：2013-01-06T06:44:45.153
> 
> 标签：c#, controls

我有一些用户控件的程序，但是当我构建解决方案时，用户控件没有出现在工具箱上，为了测试，我制作了另一个用户控件，重新构建后它出现在工具箱上！这是我的用户控件之一：

```
 using System.Drawing;
using System.Windows.Forms;

namespace AMIgo
{
  /// <summary>A UserControl used to display and interact with the active calls.</summary>
  /// <remarks>This display reflect the content of the <see cref="AMI_Client.AstCallsList"/> which contains the current active calls.
  /// The ListViewCalls display allows to show the items in differents layouts, in a similar way than the windows file explorer.
  /// <para>A menu allows to select to display Inbound( show in Red (default), Outbound (shown in blue) and internal (shown in gray) calls.</para>
  /// <para>Properties allows to set the font and colors of the ListView and ListItems</para>
  /// <para>Drag / Drop: You can drag an active call and drop it onto an extension in the <see cref="ListViewLines"/> display to Transfer a 
  /// caller to an extension. You can drag and drop an active call to the display toolbar drop target to Transfer the active channel to the 
  /// selected destination, to park the call or to hang it up. You can also drag an active channel to the <see cref="AMIgoDropTarget"/> form to Transfer a call to the selected destination. 
  /// (Extension, queue, conference, etc)</para>
  /// <para> Context Menu: Right click on an item to open a Context menu.</para>
  /// <seealso cref="AstCall"/><seealso cref="AMI_Client.NewCallEvent"/></remarks>
  [ToolboxBitmap(typeof(AMIgo.ListViewCalls), "Resources.Control_ListView.bmp")]
  public partial class ListViewCalls : AMIgoControl
  {
    /// <summary>Gets or sets a value indicating whether the intermediary agents channels are displayed.</summary>
    /// <value><c>true</c> to show Agents channels otherwise, <c>false</c>.</value>
    public bool ShowAgentsChannels { get; set; }
    private bool _show_outbound_calls;
    /// <summary>Gets or sets a value indicating whether the outbound calls are displayed.</summary>
    /// <value><c>true</c> to show outbound calls, otherwise, <c>false</c>.</value>
    public bool ShowOutboundCalls 
    {
      get { return (_show_outbound_calls); } 
      set 
      {
        _show_outbound_calls = value;
        outboundToolStripMenuItem.Checked = _show_outbound_calls;
      }
    }
    private bool _show_internal_calls;
.
.
.
.
. 
```

这是 AMIgoControl 文件...

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Windows.Forms;

namespace AMIgo
{
  /// <summary>
  /// This is the base control from which inherit most of the AMIgo controls
  /// </summary>
  [DesignTimeVisible(false)]
  [System.ComponentModel.ToolboxItem(false)]
  public class AMIgoControl : UserControl
  {
    /// <summary>true after this control has been initialized. </summary>
    public bool _InitDone;
    /// <summary>Gets or sets the AMI_Client instance. The AMI_Client component will set this on startup if left blank.</summary>
    public virtual AMIgo.AMI_Client AMI_ClientInstance { get; set; }
    /// <summary>Initializes a new instance of the <see cref="AMIgoControl"/> class.</summary>
    public AMIgoControl() { }
    /// <summary>Initializes a new instance of the <see cref="AMIgoControl"/> class. </summary>
    /// <param name="AMI_ClientInstance">The AMI_Client instance.</param>
    public AMIgoControl(AMIgo.AMI_Client AMI_ClientInstance)
    {
      this.AMI_ClientInstance = AMI_ClientInstance;
    }
    /// <summary>Finds a Control recursively. Note finds the first match and exits</summary>
    /// <param name="Container">The container to search for the given control type.
    /// Remember all controls (Panel, GroupBox, Form, etc are all containers for controls
    /// </param>
    /// <param name="TypeName">Name of the type of control to look for</param>
    /// <returns>The control object if found or null</returns>
    /// 
    public Control FindControlRecursive(Control Container, string TypeName)
    {
      if (Container.GetType().Name == TypeName)
        return Container;

      foreach (Control ctrl in Container.Controls)
      {
        Control foundCtrl = FindControlRecursive(ctrl, TypeName);
        if (foundCtrl != null)
          return foundCtrl;
      }
      return null;
    }

  } //UserControl 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T06:51:58.843

仅适用于初学者：VS 中的工具箱应用上下文过滤器，因此，除非您在文档中打开并激活了设计器，否则您将看不到用户控件。如果您尝试过此操作但仍然看不到控件 - 您能否发布屏幕截图以便更好地理解？另外，请提及您正在使用的 VS 版本 - 我刚刚尝试在 VS12 上创建一个示例 UC，它可以按预期工作。也许，您可能也想进行该测试并发布带有结果的更新。

更新：顺便说一句，您可能想要删除 AMIgo 类上的 ToolboxItem(false) 属性。

# node.js - 某些软件包（sqlite3、socket.io）的 npm install 在 Windows 7 上失败并出现错误 MSB8020

> ID：14180012
> 
> 赞同：45
> 
> 时间：2013-01-06T06:44:57.560
> 
> 标签：node.js, sqlite, visual-studio-2012, socket.io, npm

当尝试`npm install socket.io`在我的 Windows 7 机器上使用 Visual Studio 2012（而不是 2010）安装一些 node.js 包（特别是 sqlite3 和 socket.io）时，我遇到了一些看起来像这样的故障：

> C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V110\Microsoft.Cpp.Platform.targets(35,5)：错误 MSB8020：Visual Studio 2010 的构建工具（Platform Toolset = 'v100 ') 找不到。要使用 v100 构建工具进行构建，请单击“项目”菜单或右键单击解决方案，然后选择“更新 VC++ 项目...”。安装 Visual Studio 2010 以使用 Visual Studio 2010 构建工具进行构建。

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2013-01-06T06:44:57.560

为了在我的机器上解决这个问题，我执行了这个命令来安装包：

`npm install socket.io --msvs_version=2012`

我在安装 sqlite3 时遇到问题时在[这里](https://github.com/TooTallNate/node-gyp/issues/172)找到了答案，它也适用于 socket.io。

这些可能是解决问题的更永久的解决方案：

1.  安装 Visual Studio 2010
2.  将 npm 内部副本更新为更新版本的 node-gyp，如此[处](https://github.com/TooTallNate/node-gyp/wiki/Updating-npm%27s-bundled-node-gyp)和[此处](https://github.com/TooTallNate/node-gyp/issues/168)所述（可能是更好的选择，尽管我没有让它工作但没有尝试太久）

* * *

## 回答 #2

> 赞同：75
> 
> 时间：2014-03-01T22:03:38.580

另一种选择是更改配置，而不是每次都指定 msvs_version：

```
npm config set msvs_version 2012 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-10-16T21:15:32.227

我安装了 Visual Studio Express 2013 和 Visual Studio Community 2015。

我得到 `C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V120\Microsoft.Cpp.Platform.targets(64,5): error MSB8020: The build tools for v140 (Platform Toolset = 'v140') cannot be found. To build using the v140 build tools, please install v140 build tools. Alternatively, you may upgrade to the current Visual Studio tools by selecting the Project menu or right-click the solution, and then selecting "Upgrade Solution...". [G:\work\cinema\node_modules\engine.io\node_modules\bufferutil\build\bufferutil.vcxproj]`

原因是从[https://nodejs.org](https://nodejs.org)下载的适用于 Windows 的最新 Node.js包含旧的`npm`v2（并且`node-gyp`在该`npm`v2 中是旧的）。

我不得不更新 Node.js 的内部`npm`（也更新了`node-gyp`）：

```
(open console as an administrator)
cd "C:\Program Files\nodejs"
npm install npm@latest

npm config set msvs_version 2013 
```

现在它可以工作了（似乎它暂时使用的是VS 2013）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-29T18:02:19.690

# TL;博士

如果您不想依赖已安装的 Visual Studio 版本（或未安装 VS），请安装**（**见下文）。这将消除错误，并且在升级已安装的 Visual Studio 版本时应避免将来出现问题。`node-gyp``windows-build-tools`

如果您**确实**想`node-gyp`依赖于已安装的 Visual Studio 版本，则`npm config set msvs_version 2015`用您的版本标记替换`2015`. 有效的版本标签是：`2015`, `2014`, `2013`, `110`,`100`

* * *

# 修复使用`windows-build-tools`

根据[node-gyp 安装说明](https://github.com/nodejs/node-gyp#installation)，您也可以这样做

`npm install --global --production windows-build-tools`从**ELEVATED**命令外壳

这将**严格**安装所需的 Microsoft Visual C++ 构建工具（这将用于代替 Visual Studio 进行编译）`node-gyp`，并适当地设置`msvs_version`为刚刚安装的版本。

安装后，您应该检查`msvs_version`set by`windows-build-tools`是否未被覆盖。执行时`npm config list`，`msvs_version`应出现在`; globalconfig C:\Users\Username\AppData\Roaming\npm\etc\npmrc`; 如果不是，则设置的值`windows-build-tools`已被覆盖，应删除覆盖的值。`npm config delete msvs_version`应该删除覆盖的值，构建工具设置的值应该出现在全局配置部分下。

# jquery - DOM更改后jQuery插件功能不可用？

> ID：14180015
> 
> 赞同：1
> 
> 时间：2013-01-06T06:45:17.910
> 
> 标签：jquery, jquery-plugins

我有一个奇怪的问题，不知道如何解决它。
我的页面在 $(function() 事件中加载了一个插件。页面上有一个按钮隐藏第一个 DIV（包含呈现的插件）并将另一个 html 页面中的内容加载到第二个 DIV 中。第二个中的新内容DIV 有一个“取消”按钮，可以隐藏第 2 个 DIV 并显示原始第 1 个 DIV。

一切正常 - 但 DOM 丢失了插件功能，因此插件不再正常工作。该插件正在尝试在插件中加载函数（即：$.fn.myplugin = function()...）。

这是一些伪代码

第一页.....

```
$function() { 
    //Load plugin
    $("div1").theplugin();

    $("button1").click(function() {
        $("div1").hide();
        $.get("2ndpage.html", function (data) { $("div2").html(data);  });
    }); 
}; 
```

第二页……

```
$function() { 
    $("button2").click(function() {
        $("div2").hide();
        $("div1").show();
    }); 
}; 
```

....此时，如果我单击 button2，它会隐藏 DIV2 并显示 DIV1 - DIV1 仍处于单击 button1 之前的最后状态，但插件的功能均不在 DOM 中。

有谁知道如何解决这个问题？提前致谢！

***更多信息*** 我将手表放在插件的功能（有问题的功能）上，当代码到达这一点时，它从定义变为“未定义”：

```
$.get("2ndpage.html", function (data) { 
    $("div2").html(data);  //HERE
}); 
```

这几乎就像 DOM 被 .get() 调用的页面所取代 - 但这似乎不对 - 或者是吗？也许有一种特殊的方法可以杀死第 2 页的内容，以便 DOM 回到调用 .get() 之前的状态？我不知道，thos 问题很奇怪而且令人沮丧 :) 谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T10:27:56.177

也许您可以尝试以下一种按钮的**点击事件**。

在这里，我只申请了 1 个按钮。您应该将它应用于两个按钮并检查出来。

```
$("button2").unbind('click').bind('click', function () {
   $("div2").hide();
   $("div1").show();
   return false; //to prevent the browser actually following the links!
}); 
```

我希望这对你有帮助。

# jquery - jQuery UI 自动完成 - that._renderItemData 不是函数

> ID：14180016
> 
> 赞同：1
> 
> 时间：2013-01-06T06:45:24.453
> 
> 标签：jquery, jquery-ui, jquery-ui-autocomplete

我采用了 jQuery UI Autocomplete 的简单[类别示例](http://jqueryui.com/autocomplete/#categories)并将其集成到我的应用程序中。当我开始在搜索栏中输入时，我在 Firebug 中收到错误**“TypeError：that._renderItemData 不是函数” 。**

我也有一个 jQuery 没有冲突。

```
jQuery(document).ready(function($) {

$.widget( "custom.catcomplete", $.ui.autocomplete, {
    _renderMenu: function( ul, items ) {
        var that = this,
            currentCategory = "";
        $.each( items, function( index, item ) {
            if ( item.category != currentCategory ) {
                ul.append( "<li class='ui-autocomplete-category'>" + item.category + "</li>" );
                currentCategory = item.category;
            }
            that._renderItemData( ul, item );
        });
    }
});     

$(function() {
    var data = [
        { label: "anders", category: "" },
        { label: "andreas", category: "" },
        { label: "antal", category: "" },
        { label: "annhhx10", category: "Products" },
        { label: "annk K12", category: "Products" },
        { label: "annttop C13", category: "Products" },
        { label: "anders andersson", category: "People" },
        { label: "andreas andersson", category: "People" },
        { label: "andreas johnson", category: "People" }
    ];

    $( "#search" ).catcomplete({
        delay: 0,
        source: data
    });

}); 
```

我认为这是因为冲突。所以我尝试将 var that = this 替换为

```
 var that = $(this) 
```

和

```
var that = jQuery(this) 
```

但是这两个选项都抛出了同样的错误。如何解决这个冲突？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-06T07:01:59.553

类别是 jQuery UI 1.9 的新功能。我有1.8.3。

使用最新的 1.9.2 jQuery JS 解决了这个问题。

# android - Android 模拟器：应用程序出错

> ID：14180022
> 
> 赞同：0
> 
> 时间：2013-01-06T06:46:22.163
> 
> 标签：android, emulation

如果模拟器说**应用程序 NameDB（进程 com.example.namedb）意外停止**，这个问题是什么意思？

谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T07:03:51.970

每当您收到类似 的消息`the application NameDB (process com.example.namedb) has stopped unexpectedly`时，意味着您的应用程序由于代码中的某些异常而崩溃。为了防止这种情况，请找出您的应用程序抛出异常的点。您可以通过在代码中插入断点并对其进行调试来做到这一点。

检查[此](http://developer.android.com/tools/debugging/debugging-projects.html)链接以了解如何调试。

# java - 从 Jar 内部使用 JLayer 加载 mp3 文件

> ID：14180023
> 
> 赞同：1
> 
> 时间：2013-01-06T06:46:22.413
> 
> 标签：java, jlayer

我想从 jar 文件本身加载一个 mp3 文件，然后用 JLayer 播放它。当我尝试这样做时，我会得到 NullPointerException 或 FileNotFoundException。关于如何解决这个问题的任何想法？

```
//MP3Player.java

package Music;

import java.io.BufferedInputStream;
import java.io.FileInputStream;

import javazoom.jl.player.Player;

public class MP3Player extends Thread
{
   private String filename;
   private Player player; 
   private Thread mp3Thread;
   private boolean playing;
   private boolean locked;

   // constructor that takes the name of an MP3 file
   public MP3Player() 
   {
      this.filename = "";
      mp3Thread = null;
      playing = true;
      locked = true;
   }

   public void run()
   {
      while (playing)
         play();
   }

   public void play() 
   {
      if (!locked)
      {
         if (filename != null && filename != "")
         {
            try
            {
               FileInputStream fis     = new FileInputStream(filename);
               BufferedInputStream bis = new BufferedInputStream(fis);
               player = new Player(bis);

               mp3Thread = new Thread() 
               {
                  public void run() 
                  { try { player.play(); } catch (Exception e) { System.out.println(e); } }
               };

               mp3Thread.start();
            //   mp3Thread.join();
            } catch (Exception e) { System.out.println(e); }
         }
      }
   }

   public void changeMusic(String newGuy)
   {
      locked = true;
      filename = "";
      try
      {
         if (player != null)
            player.close();
         mp3Thread = null;

         filename = newGuy;

         locked = false;
      }
      catch (Exception e) {}
   }

   public void close() 
   {
      locked = true;
      playing = false; 

      try 
      { 
         if (player != null) 
            player.close(); 

         if (mp3Thread != null)
            mp3Thread = null;
      } catch (Exception e) {}
   }

// MusicHandler.java 
package Music;

import java.io.File;
import javax.swing.*;
public final class MusicHandler {

    public MusicHandler() {

    }
    public void PlayBoundlessMusic() {
        try {
            String myFile = (getClass().getResource("/Boundless/Twilight.mp3").getPath());
        MP3Player player = new MP3Player();
        player.changeMusic(myFile);
        player.play();

        } catch (Exception e) {
            // TODO Auto-generated catch block
            JOptionPane.showMessageDialog(null, e);
        }
    }
    private void PlayMusic(File f) {

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T07:17:14.460

您的 MP3 是所谓的嵌入式资源，它不像文件（实际上它甚至不能被视为文件）。我们有时将它们视为虚拟文件。

而不是尝试使用 a 读取文件，`FileInputStream`您需要获取`InputStream`嵌入式资源的 a 。

您应该使用`getClass().getClassLoader().getResourceAsStream(fileName)`which 将返回一个`InputStream`...

请记住，如果您打开一个流，您有责任关闭它...

```
InputStream fis = null;
BufferedInputStream bis = null;
try
{
    fis = getClass().getClassLoader().getResourceAsStream(fileName);
    bis = new BufferedInputStream(fis);
    player = new Player(bis);

    mp3Thread = new Thread() 
    {
        public void run() 
        { try { player.play(); } catch (Exception e) { System.out.println(e); } }
    };

    mp3Thread.start();
    //   mp3Thread.join();
} catch (Exception e) { System.out.println(e); }
} finally {
    try {
        fis.close();
    } catch (Exception e) {}
    try {
        bis.close();
    } catch (Exception e) {}
} 
```

当然，您可以利用 Java 7 的[自动关闭（或 try-with-resources）功能](http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)

# bash - 使用 bash 脚本将变量插入 URL

> ID：14180027
> 
> 赞同：0
> 
> 时间：2013-01-06T06:46:54.623
> 
> 标签：bash, shell, variables, curl

假设我想编写一个接受用户输入的 bash 脚本，将其插入到 URL 中，然后下载它。像这样的东西： `#!/bin/bash`

 `cd /path/to/folder

echo Which version?

read version` 

`curl -O [http://assets.company.tld/](http://assets.company.tld/)$version/foo.bar`

这行得通吗？如果没有，我该怎么做我想做的事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T06:49:24.077

```
#!/bin/bash
version=$1
cd /path/to/folder
echo $version
curl -o $version-foo.bar http://assets.company.tld/$version/foo.bar 
```

`$1`第一个位置参数在哪里

因此，假设您使用名称 assets.sh 保存脚本。然后你可以使用相同的如下：

```
./assests.sh ver1 
```

`ver1`版本在哪里

[编辑]如果你想要一个交互式会话：

```
#!/bin/bash
version=$1
cd /path/to/folder
echo -n "Which version you want? "
read version
curl -o $version-foo.bar http://assets.company.tld/$version/foo.bar 
```

# windows - windows 2003 在 windows 8 上关闭防火墙后无法远程访问 windows 8

> ID：14180032
> 
> 赞同：-1
> 
> 时间：2013-01-06T06:48:11.973
> 
> 标签：windows, connection, windows-server-2003, rdp

我在笔记本电脑上安装了 Windows 8 并关闭了 Windows 8 防火墙。我在 Windows 8 中启用了“允许远程协助连接到这台计算机”和“允许远程控制这台计算机”。

但是当我使用“mstsc”（从另一台安装了 Windows 2003 的 PC）远程到 Windows 8 时，它给了我一个错误“客户端无法连接到远程机器”。

Windows 8 是否支持来自 OS Windows 2003 或更早版本的 RDP 连接？

如果我从 Windows 8 远程控制 2003，一切正常。是否有任何其他配置阻止 Windows 8 从 Windows 2003 连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T07:19:06.557

Windows 8 支持来自 Windows 2003 或更早版本的 RDP 连接。为此，您需要允许来自运行任何版本的 RDP 客户端的计算机的连接。您的 Windows 8 机器的系统设置中有相应的设置（桌面控制面板，在打开远程访问的位置）。如果没有该设置，则仅允许连接具有网络级别身份验证 (NLA) 的计算机，并且仅 Vista 及更高版本支持 NLA。

# android - 表未在数据库中创建

> ID：14180038
> 
> 赞同：0
> 
> 时间：2013-01-06T06:49:43.077
> 
> 标签：android, database, sqlite

我正在将数据插入数据库，但由于表不会在我的数据库中创建，我可以插入它。我可以创建数据库但无法创建表

```
sqlite returned: error code = 1, msg = no such table: contactTable
Error inserting phone=123-456-789 Id=1 email=xyz@GMAIL.COM key=0r1-2C4E4A3C524A2C523442 name=XYZ ABC 
```

我的代码如下

```
private static final int DATABASE_VERSION = 1;
private static final String DATABASE_NAME = "contactbackup.sqlite";
private static final String TABLE_NAME = "contactTable";
private static final String CONTACT_ID = "Id";
private static final String CONTACT_NAME = "name";
private static final String CONTACT_PHONE = "phone";
private static final String CONTACT_EMAIL = "email";
private static final String CONTACT_KEY = "key";

public DBmanagaer(Context con) {
    super(con, DATABASE_NAME, null, DATABASE_VERSION);
    // TODO Auto-generated constructor stub

}

@Override
public void onCreate(SQLiteDatabase db) {
    // TODO Auto-generated method stub
    String CONTACT_TABLE_CREATE = "CREATE TABLE "
        + TABLE_NAME.trim() + "(" + CONTACT_ID.trim()
        + " INTEGER PRIMARY KEY , " + CONTACT_NAME.trim() + " TEXT , "
        + CONTACT_PHONE.trim() + " TEXT , " + CONTACT_EMAIL.trim()
        + " TEXT , " + CONTACT_KEY.trim() + " TEXT " + ");";
    if (checkDataBase()) {
    } else {
        try {
            db.execSQL(CONTACT_TABLE_CREATE);
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }
}

private boolean checkDataBase() {
    // TODO Auto-generated method stub
    File dbFile = new File(DB_PATH + DATABASE_NAME);
    return dbFile.exists();
}

public void adddata(contactDto con) {
    SQLiteDatabase db = this.getWritableDatabase();
    ContentValues values = new ContentValues();
    values.put(CONTACT_ID, Integer.parseInt(con.ID));
    values.put(CONTACT_NAME, con.name);
    values.put(CONTACT_PHONE, con.contactphone);
    values.put(CONTACT_EMAIL, con.email);
    values.put(CONTACT_KEY, con.key);
    db.insert(TABLE_NAME, null, values);
    db.close(); // Closing database connection
}

public ArrayList<contactDto> getAlldata() {
    String selectQuery = "SELECT  * FROM " + TABLE_NAME;

    SQLiteDatabase db = this.getWritableDatabase();
    Cursor cursor = db.rawQuery(selectQuery, null);
    if (cursor.moveToFirst()) {
        do {
            contactDto con = new contactDto();
            con.ID = cursor.getString(0);
            con.name = cursor.getString(1);
            con.contactphone = cursor.getString(2);
            con.email = cursor.getString(3);
            con.key = cursor.getString(4);
            conList.add(con);
        } while (cursor.moveToNext());
    }
    cursor.close();
    db.close();
    // return contact list
    return conList;
} 
```

我在以下行中收到错误：

```
db.insert(TABLE_NAME, null, values); 
```

我已经浏览了一些教程，这些都是一样的。我不知道我哪里出错了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T06:56:14.183

使用此字符串创建您的表，在此字符串中，我刚刚删除了查询末尾的分号。

```
@Override
public void onCreate(SQLiteDatabase db) {
    // TODO Auto-generated method stub
    String CONTACT_TABLE_CREATE = "CREATE TABLE "
        + TABLE_NAME.trim() + "(" + CONTACT_ID.trim()
        + " INTEGER PRIMARY KEY , " + CONTACT_NAME.trim() + " TEXT , "
        + CONTACT_PHONE.trim() + " TEXT , " + CONTACT_EMAIL.trim()
        + " TEXT , " + CONTACT_KEY.trim() + " TEXT " + ")";

        try {
            db.execSQL(CONTACT_TABLE_CREATE);
        } catch (SQLException e) {
            e.printStackTrace();
        }

} 
```

# c++ - 在 C++ 中插入类型映射

> ID：14180039
> 
> 赞同：0
> 
> 时间：2013-01-06T06:50:14.550
> 
> 标签：c++, map, iterator

我不明白那段代码是做什么的

```
static TwoWayHostPair hostpair;
map <TwoWayHostPair, Traffic> mymap;
//here some map element inserted to mymap and hostpair initialized

map <TwoWayHostPair, Traffic>::iterator iter = mymap.begin();
iter = mymap.find(hostpair);
if (iter == mymap.end()) { 
    iter = mymap.insert(make_pair(hostPair, Traffic())).first; //line8
} 
```

我的问题是第 8 行会发生什么？我没明白。它不应该是类型`map<...>:iterator`，并且在插入之后它是否保持相同的类型？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T07:01:22.593

std::map::insert return **std::pair< iterator,bool >**，下面的语句是正确的。第二个 bool 返回值指示插入是否发生

```
iter = mymap.insert(make_pair(hostPair, Traffic())).first; //line8 
```

[在此处](http://en.cppreference.com/w/cpp/container/map/insert)查看参考

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T07:01:31.317

如此处所用，

```
iter = mymap.insert(make_pair(hostPair, Traffic())).first; //line8 
```

`mymap.insert` [返回](http://www.cplusplus.com/reference/map/map/insert/)一个`pair<iterator,bool>`。 `first`，然后，[访问](http://www.cplusplus.com/reference/utility/pair/).`iterator`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T07:02:04.000

```
insert(make_pair...... 
```

`make_pair`用于将对值插入地图。您已经迭代了地图中具有主机对的所有元素。

**编辑** 参考[cplusplus 地图](http://www.cplusplus.com/reference/map/map/)了解更多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T07:05:06.073

```
iter = mymap.find(hostpair);
if (iter == mymap.end()) { 
    iter = mymap.insert(make_pair(hostPair, Traffic())).first; //line8
} 
```

第一行在map 中*查找*key `hostPair`，如果找不到，则进入`if`插入 key 及其值的块，并将`.first`迭代器返回到插入的项。

* * *

**改进**

但是您可以对此进行改进。你可以这样写：

```
iter = mymap.insert(make_pair(hostPair, Traffic())).first; 
```

这完全**等同**于您的代码。无需使用`find`then `insert`。结果是*性能提升*。

如果键已经存在，该`insert`函数将不会向映射中插入任何项目，`.first`并将迭代器返回到*找到*的项目。如果键不存在，那么它只会插入并将`.first`迭代器返回给*新插入*的项目。

如果你想知道密钥是否已经存在，那么你可以这样做：

```
auto pair = mymap.insert(make_pair(hostPair, Traffic())); //NO .first!
if (pair.second)
{
     //a newly created item is inserted 
     auto iter = pair.first; //iterator to the newly inserted item
}
else
{
    //an item with key `hostPair` already exists in the map
     auto iter = pair.first; //iterator to the found item
} 
```

希望有帮助。

# algorithm - 优先处理必须在 Timer 上运行的方法

> ID：14180040
> 
> 赞同：2
> 
> 时间：2013-01-06T06:50:22.860
> 
> 标签：algorithm

这个问题不是关于任何特定的语言，而是解决一个问题。

我有一个计时器，它向机器人发送一个方法并询问传感器数据。

一些传感器非常关键，几乎总是应该被请求，而其他一些传感器不是那么关键，但应该不时读取。

所以想象我有我的计时器，在计时器中它要求一个方法，该方法将由下面的代码返回：

```
Timer_Tick()
{
   AskForData(SensorRequestList())
}

private int _tCliffState = 0;
private int _tCliffSignal = 0;
private int _tLight = 0;
//and 7 other 

private byte[] SensorRequestList()
{
    if (_tCliffState <= 5)
    {
        _tCliffState++;
        return RequestCliffStates();
    }
    if(_tCliffSignal < 1)
    {
        _tCliffSignal++;
        return RequestCliffSignals();
    }
    if(_tLight < 1)
    {
        _tLight++;
        RequestLightSignals();
    }
    //and more ifs!

    //reset all
    _tCliffState = 0;
    _tCliffSignal = 0;
    _tLight = 0;
    //...
} 
```

如果我有 10 种方法，那么最好的方法是什么，比如命名为 1、2、3、...10，优先级为 1、2、3...10。

我怎样才能获得一个很好的模式，我可以确定具有更高优先级的方法会请求更多？像这样的模式：

`1,1,1,2,1,3,1,1,4,1,1,1,2,1,1,1,3,1,1,1,4 and so on`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T08:16:31.577

如果数据有规律地进入，那么分析一段时间内收集的数据会更容易——例如，每毫秒一次、每秒一次、每天一次、每周一次等等。

如果您最终需要保证性能 - 如果机器人至少每秒没有从某个传感器或其他什么情况下听到某个传感器的声音，那么它可能会犯错误 - 如果您的程序按某种规则运行会更容易。

出于这些原因，我建议您通过重复发出一些固定数量的请求来收集数据，每个固定数量的请求之间有固定的间隔。我通常会将这样一个固定数量的请求称为一个帧。

在帧中为非常重要的传感器读数提供自己的插槽，以便每帧都收集它们。让不太重要的传感器读数在它们之间共享一个插槽，例如，您可以让 8 个传感器读数共享一个插槽，每个读数每 8 帧收集一次。如果你想让生活更复杂，你可以共享子槽，所以 8 个真正不重要的传感器读数可以共享一个子槽，每 64 帧收集一次。

为数据和原始值保留某种时间戳通常是一个好主意。事实上，有些系统会安排每帧拍摄一张快照，并记录这个快照的时间，然后在快照时间之后将值读出。那么所有的值都是在同一时刻取得的读数，并且这一时刻是已知的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T19:18:48.510

像您正在使用的计数器技术的问题是，在给定的时间，您可能有不止一种*方法*可以执行。缓解问题的解决方案是停止计数器，将所有合格的*方法*排队，并为下一个计时器事件选择每个排队的方法，直到队列为空。清空后，您可以重新开始计数过程以选择一组新*方法*。

这是一个可能的实现（未经测试的代码），使用`int`存储*方法*队列：

```
Timer_Tick() {
   AskForData(SensorRequestList());
}

private int _state[NUM_METHODS]; // initialized to 0
private int _priority[NUM_METHODS]; 
private int _flags; // initialized to 0
private (byte [])(*_methods)[NUM_METHODS]; // array of pointer to functions, 
                                                                            // runnables, etc.

private byte[] SensorRequestList() {
     do {
        for (int i = 0; i < NUM_METHODS; ++i)
            if ((1 << i) & _flags){
                _flags &= ~(1 << i);
                _state[i] = 0;
                return _method[i]();
           }

         for (i = 0; i < NUM_METHODS; ++i){
            _state[i]++;
            _flags |= (_state[i] >= _priority[i]) << i;
        }
    } while (!_flags);
} 
```

此实现要求*方法*的数量小于`sizeof(int) * 8`平台的数量（假设每字节 8 位）。它可以很容易地切换到使用更大数量的真实队列。

除了重置`_state`to之外`0`，还可以使用以下命令：

```
 _state[i] -= _priority[i]; 
```

并保持计数器滚动，但这肯定需要更加注意所选元素的排队方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T23:32:59.137

这是启发式伪代码的描述，它应该给你一些合理的东西。

1.  将所有优先级加在一起，称为总和。
2.  按优先级对列表进行降序排序。
3.  初始化一个大小为 sum 的空数组。
4.  从第一个（最高优先级）元素开始，将与其优先级一样多的实例添加到列表中。选择间距时，请考虑环绕。
5.  继续使用较低优先级的元素，仅考虑数组中的空闲空间。
6.  在 t 滴答之后，请求与数组中位置 t % sum 相对应的传感器数据。

使用具有 10 个唯一元素 A..J 且优先级为 1..10 的示例，我们得到 sum = 55，我们的数组是 [A, B, C, D, E, A, C, B, F, G, A , D, C, B, E, A, H, F, C, B, A, D, E, G, C, A, B, I, D, E, A, C, B, F, H, A , D, C, B, E, A, G_, F, C, B, A, D, E, I, G, B, D, F, H, J]，根据你的情况，它们似乎分布合理需要。

# asp.net-mvc-4 - 如何在运行时使用 C# 在当前类中添加一个属性

> ID：14180041
> 
> 赞同：0
> 
> 时间：2013-01-06T06:50:27.837
> 
> 标签：asp.net-mvc-4

我的视图模型中有一些属性。在运行时，我需要在该视图模型中再添加一个属性。

例如：

```
var avm= new AnalysisViewModel();

foreach (var grades in gradeList)
{
  avm = new AnalysisViewModel
  {
     InfractionAverage = searchResult.Where(x=>x.GradeId == grades),
     //Here i want to add one move property and  want to assign value for my list.  
  };
} 
```

请指导我如何达到这个要求

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T10:01:41.777

Hmm try with PropertyBuilder. [http://msdn.microsoft.com/en-us/library/system.reflection.emit.propertybuilder.aspx](http://msdn.microsoft.com/en-us/library/system.reflection.emit.propertybuilder.aspx)

# php - 执行服务器端脚本的短信

> ID：14180042
> 
> 赞同：2
> 
> 时间：2013-01-06T06:50:55.170
> 
> 标签：php, sms

似乎有一些关于从服务器向手机发送短信的信息，但我找不到太多关于使用手机短信执行服务器脚本（如 PHP）的信息。这可能吗（假设手机未连接到互联网）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T06:52:53.057

为此，您需要一个网关，例如[Twilio](http://www.twilio.com)。我会检查它们，它们易于使用且成本不高（不，无论如何我都不隶属于它们）。您可以免费试用它们，它们的文档非常好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T15:39:01.897

*免责声明，我在 Nexmo 兼职做开发人员宣传。*

以下是您可以使用的一些 API：

*   [Nexmo](http://nexmo.com)
*   [特维利奥](http://twilio.com)
*   [特罗波](http://tropo.com)

在大多数情况下，它们对您的用例的操作相同 - 当收到 SMS 时，它们会对预定义的 URL（PHP 脚本的 URL）进行 HTTP 调用。

由于您只处理入站短信，因此值得注意的是，Nexmo 允许使用虚拟号码进行无限制的传入消息（虚拟号码费用约为 1 美元/月）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T07:02:13.033

我相信大多数电话运营商都允许通过短信发送电子邮件。无需输入电话号码，您只需输入电子邮件地址即可。我会从这条路开始，而不是使用网关。

# android-layout - Android-将元素+边距与相对于父元素对齐

> ID：14180046
> 
> 赞同：2
> 
> 时间：2013-01-06T06:51:38.320
> 
> 标签：android-layout

使用我可以使用的将一个元素与另一个元素对齐。

`android:layout_alignLeft`ETC..

但是如何添加边距或填充：

```
<RelativeLayout 
    android:layout_width="match_parent"
    android:layout_height="wrap_content" 
    android:layout_marginBottom="5dp" >
    <TextView 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" 
        android:layout_alignParentLeft="true"
        android:text="@string/students"
        android:textSize="30sp"
        android:typeface="normal"
        android:layout_marginTop="10dp"
        android:paddingTop="5dp"
        android:paddingBottom="5dp"
        android:id="@+id/student" />    

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@id/student"
        android:paddingLeft="20dp"
        android:paddingTop="30dp"
        android:text="@string/stud_describe"
        android:textSize="10sp"
        android:textStyle="italic"
        android:typeface="sans" />
</RelativeLayout> 
```

在第二个中填充顶部`TextView`没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T07:26:10.317

看起来你正在混淆填充和边距。将第二个更改`TextView`为：

```
layout_marginTop="30dp" 
```

代替

```
paddingTop="30dp". 
```

填充垫`View`本身，使其更大。边距改变`TextView`其容器 ( `RelativeLayout`) 内的位置，并且不改变其大小。

# image - 如何在收到的 gmail 邮件中插入图像

> ID：14180061
> 
> 赞同：2
> 
> 时间：2013-01-06T06:52:51.690
> 
> 标签：image, google-apps-script, gmail

我想在收到的 Gmail 邮件中获取插入的图片（不是图片附件）。这是如何使用 Google Apps 脚本完成的？

我曾尝试使用`urlfetchapp`从图片链接地址获取图片数据：

> https//mail.google.com/mail/u/0/?ui=2&ik=c348ccba97&view=att&th=13bb892c352c45dc&attid=0.2&disp=emb&realattid=ii_13bb88f3e56aae8c&zw&atsh=1

在电子邮件html正文中，但无法绕过google登录页面。响应内容数据始终是登录页面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T05:25:56.583

**编辑**：虽然下面的代码适用于电子邮件草稿和预设回复，但它不允许您访问***收到***的电子邮件中的内联图像。

此代码片段来自我拥有的一个工作邮件合并，它支持内联图像（嵌入的 blob 和外部引用）和附件。它从草稿/预设回复中获取内联图像和附件，将它们添加到新电子邮件中并发送：

```
...
//selectedTemplate is a Gmail Message (draft/canned response) 
var emailTemplate = selectedTemplate.getBody(); 
var attachments = selectedTemplate.getAttachments();

if(emailTemplate.search(/<\img/ != -1)){  
    var inlineImages = {};
    var imgVars = emailTemplate.match(/<img[^>]+>/g);
    for(i in imgVars){
      var title = imgVars[i].match(/title="([^\"]+\")/);
      if (title) {
        title = title[1].substr(0, title[1].length-1);
        var titleEncoded = title.replace(/ /g,"-");
        for(j in attachments){
          if(attachments[j].getName() == title){
            inlineImages[titleEncoded] = attachments[j].copyBlob().setName(titleEncoded);
            attachments.splice(j,1);
          }
        }
        var newImg = imgVars[i].replace(/src="[^\"]+\"/,"src=\"cid:"+titleEncoded+"\"");
        emailTemplate = emailTemplate.replace(imgVars[i],newImg);
      }
    }
  }
...
GmailApp.sendEmail("test@example.com", "my subject", "my body",
                  {attachments: attachments,
                   inlineImages: inlineImages}); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T09:03:36.707

我不知道您是如何访问您的电子邮件的，但您似乎没有使用 Gmail 服务中的[GmailApp](https://developers.google.com/apps-script/class_gmailapp)。找到您感兴趣的电子邮件后，请检查 html 正文以找到`<img>`. 要么`src`是引用附件的 url（链接图像）或 cid（嵌入图像）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-03T02:55:24.903

解决此问题的最新方法。

问题

例如，这是使用 .getBody() 检索到的电子邮件正文

```
<div dir="ltr"><div><img src="?view=att&amp;th=1401f70d4881e07f&amp;attid=0.3&amp;disp=emb&amp;realattid=ii_1401f6fc7824ebe1&amp;zw&amp;atsh=1" alt="Inline image 4" width="200" height="180"><br></div><div><br></div><img src="?view=att&amp;th=1401f70d4881e07f&amp;attid=0.2&amp;disp=emb&amp;realattid=ii_1401f6e6c1d46c4b&amp;zw&amp;atsh=1" alt="Inline image 2" width="200" height="65"><div><br></div><div>
jtykuykyu</div><div><br></div><div><img src="?view=att&amp;th=1401f70d4881e07f&amp;attid=0.1&amp;disp=emb&amp;realattid=ii_1401f6e9df3a4b1c&amp;zw&amp;atsh=1" alt="Inline image 3" width="200" height="82"><br><div><br></div><div><br></div></div></div> 
```

这是电子邮件的附件列表（其中是我们的内联图像）：

[13-07-30 08:28:08:378 CEST] 屏幕截图 2013-07-12 下午 1.54.31.png

[13-07-30 08:28:08:379 CEST] 屏幕截图 2013-07-23 下午 5.38.51.png

[13-07-30 08:28:08:380 CEST] 屏幕截图 2013-07-25 上午 9.05.15.png

[13-07-30 08:28:08:381 CEST] test2.png

如您所见，这些图像的名称与 img 标签中可用的信息之间没有任何联系，因此没有安全的方法可以仅使用这些信息来重建正确的电子邮件。

解决方案

如何解决？我们可以使用 .getRawContent() 方法来获取实际的电子邮件并对其进行解析以获取我们需要的信息。具体来说，此方法为我们提供了附件名称和电子邮件正文中可用的“realattid”之间的关系：

内容类型：图片/png；name="2013-07-25 上午 9.05.15 截屏.png"

内容传输编码：base64

内容 ID：

X 附件 ID：ii_1401f6e9df3a4b1c

代码片段

这是一个代码片段：

- 检索电子邮件的正文和附件

- 获取正文中的所有 img 标签，并查看哪些标签链接到电子邮件中的附件

- 获取每个图像的“realattid”并使用 .getRawContent() 将此“realattid”链接到正确的附件

- 替换 img 标签以正确链接到正确的附件

- 表示这个附件不再是简单的附件而是内嵌图片

- 完成所有操作后，您就拥有了发送此电子邮件副本所需的所有数据，并显示正确的内嵌图像。

```
 //////////////////////////////////////////////////////////////////////////////
  // Get inline images and make sure they stay as inline images
  //////////////////////////////////////////////////////////////////////////////
  var emailTemplate = selectedTemplate.getBody();
  var rawContent = selectedTemplate.getRawContent();
  var attachments = selectedTemplate.getAttachments();

  var regMessageId = new RegExp(selectedTemplate.getId(), "g");
  if (emailTemplate.match(regMessageId) != null) {
    var inlineImages = {};
    var nbrOfImg = emailTemplate.match(regMessageId).length;
    var imgVars = emailTemplate.match(/<img[^>]+>/g);
    var imgToReplace = [];
    if(imgVars != null){
      for (var i = 0; i < imgVars.length; i++) {
        if (imgVars[i].search(regMessageId) != -1) {
          var id = imgVars[i].match(/realattid=([^&]+)&/);
          if (id != null) {
            var temp = rawContent.split(id[1])[1];
            temp = temp.substr(temp.lastIndexOf('Content-Type'));
            var imgTitle = temp.match(/name="([^"]+)"/);
            if (imgTitle != null) imgToReplace.push([imgTitle[1], imgVars[i], id[1]]);
          }
        }
      }
    }
    for (var i = 0; i < imgToReplace.length; i++) {
      for (var j = 0; j < attachments.length; j++) {
        if(attachments[j].getName() == imgToReplace[i][0]) {
          inlineImages[imgToReplace[i][2]] = attachments[j].copyBlob();
          attachments.splice(j, 1);
          var newImg = imgToReplace[i][1].replace(/src="[^\"]+\"/, "src=\"cid:" + imgToReplace[i][2] + "\"");
          emailTemplate = emailTemplate.replace(imgToReplace[i][1], newImg);
        }
      }
    }
  }
  //////////////////////////////////////////////////////////////////////////////
  var message = {
    htmlBody: emailTemplate,
    subject: selectedTemplate.getSubject(),
    attachments: attachments,
    inlineImages: inlineImages
  } 
```

# ios - 在 Restkit 0.2 中为给定类添加两个请求描述符

> ID：14180074
> 
> 赞同：11
> 
> 时间：2013-01-06T06:54:37.920
> 
> 标签：ios, restkit

我需要制作来自 User 类的两种不同类型的 POST。

```
//JSON Type A
{
    "password":"12345",
    "email":"test@gmail.com"
}

//JSON Type B
{
   "user":{
      "Password":"12345",
      "Email":"sample@gmail.com"
   }
} 
```

我试图创建两个请求描述符并将它们添加到我的对象管理器但是我得到了错误

> “无法为与现有请求描述符相同的对象类添加请求描述符。”

我的代码

```
@interface User : NSObject

@property (nonatomic, retain) NSString * userID;
@property (nonatomic, retain) NSString * email;
@property (nonatomic, retain) NSString * password;
@property (nonatomic, retain) NSString * firstName;
@property (nonatomic, retain) NSString * lastName;

@end

- (void)setupUserMapping:(RKObjectManager *)objectManager {

    // Setup user response mappings
    RKObjectMapping *userMapping = [RKObjectMapping mappingForClass:[User class]];
    [userMapping addAttributeMappingsFromDictionary:@{
     @"ID" :@"userID",
     @"Email" : @"email",
     @"Password" : @"password",
     @"FirstName" : @"firstName",
     @"LastName" : @"lastName",
     }];

    RKResponseDescriptor *responseDescriptorAuthenticate = [RKResponseDescriptor responseDescriptorWithMapping:userMapping
                                                                                       pathPattern:@"/Authenticate"
                                                                                           keyPath:nil
                                                                                       statusCodes:[NSIndexSet indexSetWithIndex:200]];

    RKResponseDescriptor *responseDescriptorRegister = [RKResponseDescriptor responseDescriptorWithMapping:userMapping
                                                                                                   pathPattern:@"/Register"
                                                                                                       keyPath:nil
                                                                                                   statusCodes:[NSIndexSet indexSetWithIndex:200]];
    [objectManager addResponseDescriptor:responseDescriptorRegister];
    [objectManager addResponseDescriptor:responseDescriptorAuthenticate];

    // Setup user request mappings
    RKObjectMapping* userRequestMappingForRegister = [RKObjectMapping requestMapping];
    [userRequestMappingForRegister addAttributeMappingsFromDictionary:@{
     @"email" : @"Email",
     @"password" : @"Password",
     @"firstName" : @"FirstName",
     @"lastName" : @"LastName",
     }];
    RKRequestDescriptor *requestDescriptorForRegister = [RKRequestDescriptor requestDescriptorWithMapping:userRequestMappingForRegister objectClass:[User class] rootKeyPath:@"user"];

    RKObjectMapping* userRequestMappingForAuthenticate = [RKObjectMapping requestMapping];
    [userRequestMappingForAuthenticate addAttributeMappingsFromDictionary:@{
     @"userID" :@"ID",
     @"email" : @"email",
     @"password": @"password"
     }];
    RKRequestDescriptor *requestDescriptorForAuthenticate = [RKRequestDescriptor requestDescriptorWithMapping:userRequestMappingForAuthenticate objectClass:[User class] rootKeyPath:nil];

    [objectManager addRequestDescriptor:requestDescriptorForRegister];
    [objectManager addRequestDescriptor:requestDescriptorForAuthenticate];
} 
```

有谁知道如何在不为这些请求创建单独的类的情况下解决这个问题？

任何帮助表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T21:26:41.137

您可以使用动态映射来切换序列化行为。如果这是一个足够普遍的问题，我们可以想象将路径匹配添加到请求描述符。我只是没有对这样的功能提出很多要求。

有一个如何在单元测试中将动态映射与请求一起使用的示例：[https ://github.com/RestKit/RestKit/blob/master/Tests/Logic/ObjectMapping/RKObjectParameterizationTest.m#L495-L534](https://github.com/RestKit/RestKit/blob/master/Tests/Logic/ObjectMapping/RKObjectParameterizationTest.m#L495-L534)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-30T13:04:21.360

对于多个请求描述符，我声明了一个新模型类，其数据成员与前一个相同，然后在添加请求描述符时引用它而不是前一个，如下所示。

```
 RKObjectMapping *mapping = [RKObjectMapping mappingForClass:[CMAGoogleUserDataModel class]]; 
```

这里新创建的类是“CMAGoogleUserDataModel”

注意：我不确定它是否是优化的，但它确实解决了我的用例。

# jquery - Internet Explorer 8 - JS 图表

> ID：14180077
> 
> 赞同：-3
> 
> 时间：2013-01-06T06:55:35.637
> 
> 标签：jquery, internet-explorer-8, charts, jscharts

公司政策限制为 IE8，但 jscharts 在 IE8 中似乎不起作用，有什么办法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T07:12:56.973

**您的jscharts 网页**的替代方法是将其[**配置**](http://www.chromium.org/developers/how-tos/chrome-frame-getting-started/chrome-frame-faq#TOC-How-can-I-enable-Google-Chrome-Frame-for-my-site-)为使用[**IE8 的 Chrome Frame 插件**](http://www.google.com/chromeframe?quickenable=true)。

```
<meta http-equiv="X-UA-Compatible" content="chrome=1"> 
```

这将允许您的 IE8 运行接近 Google Chrome 的浏览器，减少像 CSS3 这样的 IE8 限制。

然而，正如[Ahmad Alfy 在评论中提到的那样](https://stackoverflow.com/questions/14180077/internet-explorer-8-js-charts/14180175#comment19651719_14180077)，它应该在 IE8 中工作。

# node.js - .net 的 Node.js 扩展

> ID：14180081
> 
> 赞同：0
> 
> 时间：2013-01-06T06:56:14.313
> 
> 标签：node.js

尝试使用 node-sharp - [https://github.com/anodejs/node-sharp](https://github.com/anodejs/node-sharp)来加载我拥有的一些现有的 .net 程序集。到目前为止还不能让它工作 - 似乎只得到一个“找不到指定的程序”。

因此，我尝试从一个更简单的示例开始并遵循本指南 - [http://coderesearchlabs.com/articles/BNWCA.pdf](http://coderesearchlabs.com/articles/BNWCA.pdf)。结果相同。

我在 Windows 64 中运行，安装了 32 位版本的 Node.js 版本 0.8.16。

错误堆栈跟踪 -

```
> require("./Sharp").hello
Error: The specified procedure could not be found.
C:\Program Files (x86)\nodejs\Sharp.node
    at Object.Module._extensions..node (module.js:485:11)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.require (module.js:362:17)
    at require (module.js:378:17)
    at repl:1:2
    at REPLServer.self.eval (repl.js:109:21)
    at Interface.<anonymous> (repl.js:248:12)
    at Interface.EventEmitter.emit (events.js:96:17)
    at Interface._onLine (readline.js:200:10)
> console.log('Version: ' + process.version);
Version: v0.8.16
undefined
> 
```

来源是

```
#pragma comment(lib, "node")

#include <node.h>
#include <v8.h>

using namespace node;
using namespace v8;

extern "C" void NODE_EXTERN init (Handle<Object> target)

{

HandleScope scope;

target->Set(String::New("hello"), String::New("world"));

}

NODE_MODULE(test, init) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T08:30:17.290

确保模块名称与传递给的内容匹配`NODE_MODULE`：

```
NODE_MODULE(test, init)  // => `test.node`
NODE_MODULE(Sharp, init) // => `Sharp.node` 
```

此外，由于该指南似乎适用于 Node 0.6.x，之后[发布](http://blog.nodejs.org/2012/06/25/node-v0-8-0/)了 0.8.0 ，您可能会发现[Addons](http://nodejs.org/api/addons.html)和[node-gyp](https://github.com/TooTallNate/node-gyp)文档对 Node 0.8 开发很有用。

# android - 彩信和短信的日期栏长度不同

> ID：14180082
> 
> 赞同：2
> 
> 时间：2013-01-06T06:56:25.913
> 
> 标签：android, date, sms, android-contentprovider, mms

在查询 Android 的 MMS-SMS`Content Provider`时，日期列对于 MMS 和 SMS 有不同的纪元时间值。

```
ContentResolver contentResolver = getContentResolver();
final String[] projection = new String[] { "body", "person", "sub",
            "subject", "retr_st", "type", "date" + " as " + "d", "ct_cls", "sub_cs",
            "_id", "read", "ct_l", "st", "msg_box", "reply_path_present",
            "m_cls", "read_status", "ct_t", "status", "retr_txt_cs",
            "d_rpt", "error_code", "m_id", "date_sent", "m_type", "v",
            "exp", "pri", "service_center", "address", "rr", "rpt_a",
            "resp_txt", "locked", "resp_st", "m_size" };
String sortOrder = "date";
Uri uri = Uri.parse("content://mms-sms/conversations/");
Cursor c = contentResolver.query(uri, projection, null, null, sortOrder);

String messageDate = c.getString(c.getColumnIndex("date")); 
```

在 的情况下`MMS`，保存在 messageDate 变量中的纪元时间为 10 位长。但是，在 的情况下，`SMS`保存在 messageDate 变量中的纪元时间是 13 位长。

当尝试按日期排序时，这会成为一个问题，因为当按日期排序时，`MMS`消息显示在消息之前。`SMS`

有什么方法可以查询`Content Provider`并获取所有消息（`MMS`或`SMS`）按日期正确排序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T07:12:06.130

看起来按日期对消息进行排序的方法，无论消息是彩信还是短信，都是将排序顺序更改`normalized_date`为如下：

```
String sortOrder = "normalized_date"; 
```

# asp.net - 避免在 ASP.NET 按钮上使用 Base href 标记

> ID：14180084
> 
> 赞同：0
> 
> 时间：2013-01-06T06:56:49.660
> 
> 标签：asp.net, html

我有一个使用基本 href 标记的网站，但我目前正在处理本地主机上的网页，当我单击 asp 按钮时，它会尝试解析为 basehref/mynewpage。出于测试目的，我如何避免仅在按钮的情况下使用基本 href，以便当我单击按钮时，它会重新加载 localhost base 而不是实际的 url？

# html - JSTL 日期格式模式适用于文本字段？

> ID：14180087
> 
> 赞同：1
> 
> 时间：2013-01-06T06:57:32.520
> 
> 标签：html, date, jstl

我已经浏览了所有格式并且能够使用它们。
显示的所有示例仅用于显示。但是如果它是文本字段，那么如何更改应用日期模式。
例如：

```
<input type="text" value="parsedDate"/> 
```

在这种情况下如何格式化日期？？？

所有示例仅显示例如：

```
<fmt:formatDate value="${date}" type="both" timeStyle="long" 
dateStyle="long" /> 
```

我想为文本字段应用日期格式...

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T09:42:30.647

```
<input type="text" value="<fmt:formatDate value='${date}' type='both' timeStyle='long' dateStyle='long' />"/> 
```

或者

```
<fmt:formatDate var='formattedDate' value='${date}' type='both' timeStyle='long' dateStyle='long' />
<input type="text" value="${formattedDate}"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T07:34:45.440

我从以下链接中得到了答案。 [我的解决方案](https://stackoverflow.com/questions/6231288/jstl-format-tag) 它仅适用于 html 元素。但不适用于 struts、stripes 等框架提供的标签库...

# c# - 将 SQL 数据库中的经纬度加载到谷歌地图中

> ID：14180090
> 
> 赞同：2
> 
> 时间：2013-01-06T06:57:43.450
> 
> 标签：c#, asp.net, sql, google-maps, informix

我想修改我的 asp.net 应用程序以从超链接打开谷歌地图位置 (https://maps.google.com/maps/ms?msid=217765347979644002223.00048600fdc1ccf2d2d55&msa=0)。我需要从我已经拥有的数据库表中检索纬度和经度，并将它们动态输入到上面的链接中。我的目标基本上是让用户点击它的链接，它从表中检索经纬度，并通过网络浏览器返回或打开谷歌地图链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T10:06:58.133

也许不完全是您正在寻找的，但这是一篇关于如何使用谷歌地图为空间数据库类型创建 mvc 显示模板的好文章[http://www.hanselman.com/blog/ASPNETMVCDisplayTemplateAndEditorTemplatesForEntityFrameworkDbGeographySpatialTypes.aspx](http://www.hanselman.com/blog/ASPNETMVCDisplayTemplateAndEditorTemplatesForEntityFrameworkDbGeographySpatialTypes.aspx)

# dart - Dart VM - 外国浏览器（非谷歌）

> ID：14180092
> 
> 赞同：5
> 
> 时间：2013-01-06T06:58:18.287
> 
> 标签：dart

我玩过一些 Dart，我认为它很棒。我知道它可以输出本机 JS，并且谷歌可能会在他们的浏览器中支持虚拟机。由于其他浏览器供应商可能不支持 Dart VM，是否有可能在客户端计算机上安装 Dart VM 以在外国浏览器中使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T08:11:42.853

> 是否可以在客户端机器上安装 Dart VM 以在外国浏览器中使用？

但是，自己提供 Dart VM 会更容易。

* * *

Javascript 完全能够：

*   找到`script`一个特定的`type`
*   将脚本转换为 Javascript
*   执行编译好的脚本

虽然这在技术上不是 Dart 虚拟机，但它会让你的 Dart 代码全速执行。但是，您必须等待编译完成。通常的方法是在服务器上进行编译（一次），并且只将编译后的 javascript 发送给客户端。

另一种选择是解释代码。Dart 指令不是编译成 javascript，而是一个接一个地执行。Dart 不是机器级语言，所以需要解析，但接下来是解释。缺点是性能下降。这将使您尽可能接近拥有一个成熟的虚拟机（与 Javascript 分开）。

通常，你并不关心你得到的是哪个（也许你甚至会得到一个即时编译器），但它确实会在存在 Dart*虚拟机*方面有所不同（而不仅仅是让你的代码执行）。

* * *

Dart 编译器需要以某种方式出现在页面上（除非您进行预编译）。

最简单的方法是直接写入`<script src="path/to/your/dart-compiler.js"></script>`头部。

Dartium 浏览器本身就支持 Dart，但它不是为常用而设计的。[维基百科说：](http://en.wikipedia.org/wiki/Dart_%28programming_language%29#Usage)

> 在 Dartium 浏览器中：Dart SDK 附带了一个经过修改以包含 Dart 虚拟机的 Chromium Web 浏览器版本。该浏览器可以直接运行 Dart 代码，无需编译为 Javascript。它目前不打算用于通用用途，而是作为 Dart 应用程序的开发工具。 [7] **将 Dart 代码嵌入 Web 应用程序时，当前推荐的过程是加载一个引导 JavaScript 文件“dart.js”，该文件将检测 Dart VM 的存在与否，并**分别加载相应的 Dart 或编译后的 Javascript 代码，[ 8] 因此保证浏览器与或不使用自定义 Dart VM 的兼容性。

如果您希望运行 Dart 的能力依赖于客户端机器而不是页面，也有几种方法。

一种方法是将编译器包含为用户脚本。这将适用于~~全部~~两种现代桌面浏览器。但是，我不确定是否存在向 Internet Explorer 添加用户脚本支持的现有方法。

一种方法是添加浏览器扩展。所有现代桌面浏览器都支持扩展，[Internet Explorer 有 Browser Helper Objects](http://colonelpanic.net/2010/08/browser-plugins-vs-extensions-the-difference)。

所有这些都需要额外的 Javascript 步骤。如果你想要绕过 Javascript 的原生解释，你需要一个插件。插件需要特定的 mime 类型才能运行（不确定脚本类型是否重要），但您可以安装会触发插件使用的扩展。但是，DOM 操作*仍然*需要额外的 Javascript 步骤。没有其他办法了。

桌面安装程序绝对可以将插件安装到浏览器中。实际上，这是插件通常的安装方式。从桌面安装程序安装扩展程序也是可能的，但我现在不能确认或否认最后一个说法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T22:03:00.490

据我所知，没有办法简单地为 Dart 安装一个插件（如 Flash）。对于 Internet Explorer，可以安装 Chrome 框架，但我还没有看到 Firefox 和 Safari 有类似的东西。

# c# - 转发器分页视图状态

> ID：14180096
> 
> 赞同：0
> 
> 时间：2013-01-06T07:00:21.047
> 
> 标签：c#, repeater

所以最后......我让我的转发器工作，因为我希望它充满按钮、单选按钮、图像按钮、更新面板、AJAX 模式弹出窗口和每个事件背后的繁重代码。

发现当项目超过 20 时，我的转发器变得非常慢，所以我使用分页作为解决方案。问题是当我进行更改并转到下一页时，返回上一页时所有更改都消失了。（检查收音机、标签等都恢复正常状态）。

请帮忙，我的系统现在正在生产中。

* * *

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            loadTasks();
        } 
```

* * *

```
 void loadTasks()
    {

        string evalidxxx = Request.QueryString["eval_id"].Trim().Replace(" ", "");

        SqlConnection conn = new System.Data.SqlClient.SqlConnection(ConfigurationManager.ConnectionStrings["GappConnectionString2"].ConnectionString);

        try
        {
            conn.Open();

            SqlDataAdapter sqlAdapter = new SqlDataAdapter("SELECT Prog_Task_link.pt_seq, Tasks.task_name, Tasks.task_id FROM Tasks INNER JOIN Prog_Task_link ON Tasks.task_id = Prog_Task_link.task_id INNER JOIN Programs ON Prog_Task_link.prog_id = programs.prog_id INNER JOIN Data_Tracker_prepare ON Programs.prog_id = Data_Tracker_prepare.dtpre_prog_id WHERE Data_Tracker_prepare.eval_id =" + evalidxxx, conn);
            System.Data.DataTable dt = new System.Data.DataTable();

            sqlAdapter.Fill(dt);

            PagedDataSource objPds = new PagedDataSource();
            objPds.DataSource = dt.DefaultView;
            objPds.AllowPaging = true;
            objPds.PageSize = 10;

            objPds.CurrentPageIndex = CurrentPage;

            lblCurrentPage.Text = "Page: " + (CurrentPage + 1).ToString() + " of "
                + objPds.PageCount.ToString();

            //Disable Prev or Next buttons if necessary
            LinkPrevPage.Enabled = !objPds.IsFirstPage;
            LinkNextPage.Enabled = !objPds.IsLastPage;

            rptr1.DataSource = objPds;
            rptr1.DataBind();
        }
        catch (SqlException ex)
        {
            Response.Write(ex.Message);
        }
        finally { conn.Close(); }

    }

    public int CurrentPage
    {
        get
        {
            // look for current page in ViewState
            object o = this.ViewState["_CurrentPage"];
            if (o == null)
                return 0;      // default to showing the first page
            else
                return (int)o;
        }

        set
        {
            this.ViewState["_CurrentPage"] = value;
        }
    }

    protected void LinkPrevPage_Click(object sender, EventArgs e)
    {
        CurrentPage -= 1;
        loadTasks();

    }

    protected void LinkNextPage_Click(object sender, EventArgs e)
    {
        CurrentPage += 1;
        loadTasks();

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T08:24:44.073

如果您使用的是 .net 4.0，则可以使用 EnablePersistedSelection="True"

很抱歉，但这无法做到。当您在第一页时，其余页面实际上并不存在于转发器中。

分页到下一页后将加载下一个数据，因此将重置以前的数据

我的意思是说，当您要求选择所有收音机时，按钮、复选框就是您所看到的。更改页面后，其他控件设置为默认值（可能未选中或重置）

所以重新设计你想要做的用户界面。根据我的建议，使用另一个按钮来保存页面的当前状态..然后转到下一页..

还有什么我可以帮忙的吗？？

# go - 向一组主机发送带有确认的消息

> ID：14180097
> 
> 赞同：2
> 
> 时间：2013-01-06T07:00:42.547
> 
> 标签：go, rpc

功能如下：

```
func Message(worker_ID int, message string, args *Args , reply *int) chan bool {
} 
```

这个函数驻留在主机上，客户端在向主机发送消息时调用它，主机位于不同的地方，所以发送消息需要IP和端口吗？哪种机制会有所帮助`net.dial()`或`gob`或`rpc`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T11:25:38.493

如果您想要一些简单的东西，请查看[net/rpc](http://golang.org/pkg/net/rpc/)，它将 gob 和网络包装到一个远程过程调用框架中，该框架应该可以满足您的需求。

**服务器**

从文档中运行通过 HTTP 的服务器

```
type Args struct {
        A, B int
}

type Arith int

func (t *Arith) Multiply(args *Args, reply *int) error {
        *reply = args.A * args.B
        return nil
}

arith := new(Arith)
rpc.Register(arith)
rpc.HandleHTTP()
l, e := net.Listen("tcp", ":1234")
if e != nil {
        log.Fatal("listen error:", e)
}
go http.Serve(l, nil) 
```

**客户**

此时，客户端可以看到使用方法“Arith.Multiply”的服务“Arith”。要调用一个，拨打服务器然后拨打电话。您还可以进行异步调用，结果在通道中返回。

```
client, err := rpc.DialHTTP("tcp", serverAddress + ":1234")
if err != nil {
        log.Fatal("dialing:", err)
}

args := &server.Args{7,8}
var reply int
err = client.Call("Arith.Multiply", args, &reply)
if err != nil {
        log.Fatal("arith error:", err)
}
fmt.Printf("Arith: %d*%d=%d", args.A, args.B, reply) 
```

该框架有点奇怪的是，每个远程调用只能有一个输入参数和一个输出参数，这意味着您需要将所有参数包装在一个`struct`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T04:07:52.707

//server.go 将提供用于通信和处理主机的接口

// workerDead(message string)，发送消息并等待ack，如果没有ack意味着worker死了

```
package
main
import(

"fmt"
"io"
"net"
"net/http"
"net/rpc"
"path"
"os"
)

type Flag int
type Args struct{
message string
}
func main() {

flag := new(Flag)
rpc.Register(flag)
rpc.HandleHTTP()
err := http.ListenAndServe(":1234", nil) //ListenAndServe starts an HTTP server with a given address and handler.
//The handler is usually nil, which means to use DefaultServeMux.
if err != nil {
fmt.Println(err.Error())
}
}

//Worker counts the number of hosts
func workerCount() int
{
return db.runCommand( { count: 'id' } ) //mongodb command to count the id
}

// Returns an array of the distinct values of field id from all documents in the workers collection
//In mongodb document is analogous to rdbms table and collection is record

func Worker(worker int) []string{
return db.runCommand ({ distinct: 'workers', key: 'id' } ) //mongodb command to get the array of list of
//workers for column id
}

func Message(worker int, message string, args *Args , reply *int) chan bool {

server, err :=rpc.Dial("tcp","192.168.23.12") //Serve Dials here to send message to host, IP address here is of host
if(err!=nil){
log.Fatal("Dialing", err)
}
var reply bool
args:=Args{message};
err = server.Call(args,&reply);
if(err!=nil){
log.Fatal("Dialing", err)
replaceWorker(); // No reply from worker then call to replace worker
}
fmt.Println("Reply from host", reply);

}
return nil
}
//Replace dead worker of particular project with fresh worker
func replaceWorker(worker_id int,project_id int)
{
db.workers.update( //this query updates workers collection with id=worker_id(id of dead worker)
   { _id: worker_id, _project_id: project_id },
   {
     //$set: { ' ': 'Warner' },
   }

)

} 
```

# php - 在不同窗口中打开 javascript 警报的 PHP 表单结果

> ID：14180098
> 
> 赞同：-2
> 
> 时间：2013-01-06T07:00:42.970
> 
> 标签：php, javascript

我最近为联系表单制作了自己的 PHP 设置，我想要发生的是在用户提交表单后，PHP 文件发送一个 JavaScript 回显以弹出警报，说谢谢！，但由于某种原因，它打开一个新窗口以及一个 JavaScript 警报。

这是我的 PHP 文件中的代码：

```
<?php
$firstname = $_POST['firstName'];
$lastname = $_POST['lastName'];
$email = $_POST['email'];
$tel1 = $_POST['tel1'];
$tel2 = $_POST['tel2'];
$tel3 = $_POST['tel3'];
$reason = $_POST['reason'];
$message = $_POST['text'];
$formcontent="From: $firstname $lastname \n Email address: $email \n Telephone Number: $tel1 $tel2 $tel3 \n Reason: $reason \n Message: $message";
$recipient = "ilanbiala@ilanshomekitchen.x10.mx";
$subject = "Contact Form";
$mailheader = "From: $email \r\n";
mail($recipient, $subject, $formcontent, $mailheader) or die("Error!");
echo "<script>alert('Thank you!');</script>";
?> 
```

echo 命令的最后一行是我插入脚本的地方，以便在成功提交后通过弹出窗口提醒用户。如果您有更好的主意，那就太好了，但我仍然想知道我的 php 导致一个带有警报打开的新窗口的原因。

可以在[此站点](http://ilanshomekitchen.x10.mx/contact.html)上查看当前的实施和我遇到的问题。

您只需提交表单数据即可处理表单，因此请确保至少在每个框中放置一些真实的东西。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T07:26:10.820

```
$( function() { // $(document).ready( function() { }); this function prepares itself to be attentive to listen an event when the DOM is ready
$("#form").on("submit", function(e) { // As the form is submitted, the function is executed
e.preventDefault(); // this prevents the form to be submitted as default behaviour!
var s = $(this).serialize();  // makes a string which has all form's data in this form e.g. ?id=1&name=Heart
$.ajax({ // create an jQuery ajax call
     url : 'mail.php'+s, // this will transfer data to the mail.php. In mail.php, use $_GET with all variables
     cache : false, // changing browser cache
     success : function(data) { // success means when the ajax completed transfer of variables and that function with data as an argument is callback variable which stores all the information echoed in php file
          alert(data); // now you can manipulate that variable, i use alert function
     },
     error : function() { // this function checks if error occurs in the ajax transfer, if yes, then execute a certain function!
          alert("Form Not Submitted"); // I have just alerted not submitted!
     };
 });
 }); 
```

[您还必须包括可以在此处](http://www.jquery.com)找到的 jQuery 最新版本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T08:16:06.520

您可以使用以下代码：在 Mail.php 中

```
$_SESSION['mail_msg']="Thank You";
header("Location: contact.php"); 
```

将contact.html另存为contact.php并添加以下代码

```
if(isset($_SESSION['mail_msg'])){
echo "<script type='text/javascript'>alert("{$_SESSION['mail_msg']}")</script>";
} 
```

不要忘记在两个文件上启动会话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T07:08:52.127

您正在向 mail.php 提交表单，因此 mail.php 将处理 html 请求并打印页面。您提交的页面是`<script>alert('Thank you!');</script>`

似乎您不想打开新页面，因此您可以对 mail.php 页面进行 ajax 调用，并且一旦表单提交成功就可以调用警报。

jQuery有[ajax函数](http://api.jquery.com/jQuery.ajax/)或者[post函数](http://api.jquery.com/jQuery.post/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T07:10:41.183

您的 HTML***是***问题所在。

```
<form id="form" action="mail.php" method="post"> 
```

那是在“contact.html”上，所以当您提交表单时，它会加载“mail.php”。

您需要一个 AJAX 表单，或者至少在同一页面上加载该表单。使用 jQuery，您可以执行以下操作：

```
$('.submitButton').click(function(){
    $.get('mail.php',$("#form").serialize(), function(data){
        alert(data);
    });
}); 
```

至少，您可以将 mail.php 代码放在联系页面的顶部并添加一个检查以查看表单是否已提交（`if($_SERVER['REQUEST_METHOD']=='POST'){}`）您需要将contact.html 更新为contact.php，然后重定向形成“contact.php”而不是“mail.php”。然后邮件将加载到同一页面上，警报会出现，内容也会出现，可能需要一些调整，但你可以做对。

祝你好运。

# python - Python奇怪的代码错误

> ID：14180101
> 
> 赞同：0
> 
> 时间：2013-01-06T07:00:54.553
> 
> 标签：python

我有一个 IRC 机器人，我正在尝试获取游戏服务器（GTA SA 多人游戏）的信息。我有现成的查询，但我无法在我的机器人中实现它。如果我尝试加载相同的脚本，但没有将其放入机器人的结构中，它会起作用。它给我的错误是

> NameError：名称'ip'未定义

我尝试在 中添加 ip 地址作为参数`def(inp,say=None)`，但它仍然不起作用。那是代码：

```
from util import Query
from util import hook
import sys

@hook.command
def serverinfo(inp,ip="",port="",say=None):
    ip = "78.129.221.58"
    port = 7777 
if len(sys.argv) >= 3:
    ip = str(sys.argv[1])
    port = int(sys.argv[2])

query = Query(ip,port)
info = query.GetInformation()
say(info)
if info['players'] <= 100:
    say(query.GetPlayers())
    say(query.GetDetailedPlayers())
else: say('can\' get players because players is above 100')
say(query.Ping())
query.Close() 
```

那是我导入的**查询**：

```
import socket, struct, random, datetime
from cStringIO import StringIO

class Query:
    def __init__(self, ip, port):
        self.ip, self.port = socket.gethostbyname(ip), port
        self.data = StringIO("")
        self.sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
        self.sock.connect((ip, port))
        self.sock.settimeout(1)

    def CreatePacket(self, opcode):
        ips = self.ip.split('.');
        packet = "SAMP{0}{1}{2}{3}{4}{5}{6}".format(chr(int(ips[0])), chr(int(ips[1])), chr(int(ips[2])), chr(int(ips[3])), chr(self.port & 0xFF), chr(self.port >> 8 & 0xFF), opcode)
        if opcode == 'p':
            packet += struct.pack("BBBB", random.randint(0, 255), random.randint(0, 255), random.randint(0, 255), random.randint(0, 255))
        return packet

    def GetInformation(self):
        try:
            self.sock.send(self.CreatePacket('i'))
            info = {}
            self.data = StringIO(self.sock.recv(2048))
            self.data.read(11)
            info['passworded'] = struct.unpack('?', self.data.read(1))[0]
            info['players'] = struct.unpack('h', self.data.read(2))[0]
            info['maxplayers'] = struct.unpack('h', self.data.read(2))[0]

            info['hostname'] = self.data.read(struct.unpack('i', self.data.read(4))[0])
            info['gamemode'] = self.data.read(struct.unpack('i', self.data.read(4))[0])
            info['mapname'] = self.data.read(struct.unpack('i', self.data.read(4))[0])
        except socket.timeout:
            info['error'] = 1
        return info

    def GetRules(self):
        try:
            self.sock.send(self.CreatePacket('r'))
            rules = {}
            self.data = StringIO(self.sock.recv(2048))
            self.data.read(11)
            rulecount = struct.unpack('h', self.data.read(2))[0]
            for i in range(rulecount):
                name = self.data.read(struct.unpack('b', self.data.read(1))[0])
                rules[name] = self.data.read(struct.unpack('b', self.data.read(1))[0])
        except socket.timeout:
            rules['error'] = 1
        return rules

    def GetPlayers(self):
        try:
            self.sock.send(self.CreatePacket('c'))
            players = []
            self.data = StringIO(self.sock.recv(2048))
            self.data.read(11)
            playercount = struct.unpack('h', self.data.read(2))[0]
            for i in range(playercount):
                name = self.data.read(struct.unpack('b', self.data.read(1))[0])
                players.append([name, struct.unpack('i', self.data.read(4))[0]])
        except socket.timeout:
            players = {'error': 1}
        return players

    def GetDetailedPlayers(self):
        try:
            self.sock.send(self.CreatePacket('d'))
            players = []
            self.data = StringIO(self.sock.recv(2048))
            self.data.read(11)
            playercount = struct.unpack('h', self.data.read(2))[0]
            for i in range(playercount):
                playerid = struct.unpack('b', self.data.read(1))[0]
                name = self.data.read(struct.unpack('b', self.data.read(1))[0])
                score = struct.unpack('i', self.data.read(4))[0]
                ping = struct.unpack('i', self.data.read(4))[0]
                players.append([playerid, name, score, ping])
        except socket.timeout:
            players = {'error': 1}
        return players

    def Close(self):
        self.sock.close()   

    def Ping(self):
        packet = self.CreatePacket('p')
        a = datetime.datetime.now()
        self.sock.send(packet)
        self.sock.recv(2048)
        b = datetime.datetime.now()
        c = b - a
        return int((c.days * 24 * 60 * 60 + c.seconds) * 1000 + c.microseconds / 1000.0)

class Rcon:
    def __init__(self, ip, port, password):
        self.ip, self.port, self.password = socket.gethostbyname(ip), port, password
        self.data = StringIO("")
        self.sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
        self.sock.connect((ip, port))
        self.sock.settimeout(0.5)

    def CreatePacket(self, opcode, password, command):
        ips = self.ip.split('.');
        packet = "SAMP{0}{1}{2}{3}{4}{5}{6}{7}{8}{9}{10}{11}{12}".format(chr(int(ips[0])), chr(int(ips[1])), chr(int(ips[2])), chr(int(ips[3])), chr(self.port & 0xFF), chr(self.port >> 8 & 0xFF), opcode, chr(len(password) & 0xFF), chr(len(password) >> 8 & 0xFF), password, chr(len(command) & 0xFF), chr(len(command) >> 8 & 0xFF), command)
        return packet

    def Send(self, command):
        self.sock.send(self.CreatePacket('x', self.password, command))
        output = []
        while 1:
            try:
                self.data = StringIO(self.sock.recv(2048))
                self.data.read(11)
                strlen = struct.unpack('h', self.data.read(2))[0]
                if strlen == 0: break
                output += [self.data.read(strlen)]
            except: break;
        return output

    def Close(self):
        self.sock.close() 
```

有任何想法吗？

编辑：我做了一些更改后，给了我以下错误：

> ```
> query = Query(ip,port) 
> ```
> 
> TypeError：“模块”对象不可调用

我基本上已经更改了 ip 和端口的位置，将其移出 serverinfo 命令。

```
 from util import Query
from util import hook

ip = "78.129.221.58"
port = 7777
query = Query(ip,port)
info = query.GetInformation()

@hook.command
def serverinfo(inp,ip="",port="",say=None):
    say(info)
if info['players'] <= 100:
    say(query.GetPlayers())
    say(query.GetDetailedPlayers())
else: say('can\' get players because players are above 100')
say(query.Ping())
query.Close() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T07:05:51.563

有问题的行是这一行：

```
query = Query(ip,port) 
```

如果使用命令行参数初始化失败或传入的参数不足，`ip`将不会初始化导致上述错误。

此外，测试脚本的更好方法是这样的：

```
def main():
    if len(sys.argv) >= 3:
        ip = str(sys.argv[1])
        port = int(sys.argv[2])
        query = Query(ip,port)
        # start using query
    else:
        raise Exception("Insufficient args passed in")
if __name__ == '__main__':
    main() 
```

引发异常/错误或打印出某些内容可以保证您知道传入的参数不足。另外，也许将所有代码移出到某个函数的开放位置？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T07:11:50.100

尝试将此添加到 python 代码的开头：

```
ip = "78.129.221.58"
port = 7777 
```

尝试

```
query = Query.Query(ip, port) 
```

# php - Zend Framework 2 和源代码存储库

> ID：14180102
> 
> 赞同：1
> 
> 时间：2013-01-06T07:00:56.880
> 
> 标签：php, build, repository, zend-framework2

我们使用骨架应用程序创建了一个 ZF2 项目，它适用于简单的测试应用程序。现在我们正在做一个真正的项目。我的问题是我们应该在存储库（SVN）中存储什么，整个项目结构还是只是新的源代码？ZF2 带有一个大小接近 31MB 的供应商目录（其中包含 ZF 库）。我们应该将整个供应商文件夹存储在 SVN 中吗？

这是我们第一次使用 PHP 和 ZF，因此不清楚我们将如何将完整的项目从 SVN 交付到生产环境。如果存在的话，构建过程是什么。任何指向“ZF2 项目打包”的线索/链接表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T07:04:19.990

**不**，不要在存储库中包含依赖项！将您的依赖项置于版本控制之下并没有任何好处，它只会无缘无故地炸毁您的存储库。

您想将骨架添加到您的存储库和您自己的库中，但绝对不是框架或任何其他依赖项。

可行的方法是使用[composer](http://getcomposer.org/)进行依赖项安装和某种构建工具（如[Phing](http://www.phing.info/)）来自动安装项目。

[有关如何构建应用程序](http://www.phptherightway.com/#building_your_application)的更多信息，请参阅 phptherightway 的相关章节。

最简单的构建过程甚至不需要构建工具

*   从 SVN/git 签出你的项目
*   运行`php composer.phar install`以安装所需的依赖项（在您的 composer.json 中定义）

但很可能你想做更多的事情，比如设置环境、删除一些文件等。

关于 ZF 封装的一句话。packagist 不提供它们，但无论如何您都可以使用 composer 安装它们。您只需将专用存储库添加到您的 composer.json，如下所述：http: [//framework.zend.com/downloads/composer](http://framework.zend.com/downloads/composer)

# blackberry-playbook - android默认tts可以在黑莓上运行吗

> ID：14180103
> 
> 赞同：0
> 
> 时间：2013-01-06T07:01:13.997
> 
> 标签：blackberry-playbook, blackberry-android

我试图将使用 android tts 服务的 android 应用程序转换为黑莓。使用 blackberry 命令行工具，我创建了 bar 文件并将其安装在 blackberry playbook 模拟器中。但是当我尝试使用文本到语音功能时，它在黑莓版本中不起作用。我正在使用 androids 默认 tts 服务来实现此功能。它可以在黑莓上运行吗？是不是导致这个问题。请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-22T02:47:41.353

BlackBerry PlayBook 上的 BlackBerry Runtime for Android 应用程序[不支持 TTS、VoIP 和 SIP 服务。](http://developer.blackberry.com/playbook/android/apisupport/unsupportedapi_playbook_software_features.html)

# haskell - 在数据类型中链接 Haskell 函数

> ID：14180111
> 
> 赞同：5
> 
> 时间：2013-01-06T07:02:23.677
> 
> 标签：haskell, ghc

可以说我有以下内容：

```
data FuncAndValue v res = FuncAndValue (v -> res) v

chain :: (res -> new_res) -> FuncAndValue v res -> FuncAndValue v new_res
chain new_f (FuncAndValue old_f v) = FuncAndValue (new_f . old_f) v 
```

GHC 是否有可能通过内联将函数组合`new_f`成`old_f`一个函数？

基本上，无论如何以数据类型存储函数会抑制优化。

我希望 GHC 能够轻松地将函数链组合成一个（即，我的结构上的“总和”不涉及重复调用代表的 thunk，`(+)`而只是内联，`(+)`所以它像 for 循环一样运行。我希望将函数存储在数据类型中，然后稍后访问它们不会阻止这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T14:54:50.297

> Is GHC likely to be able to combine functions `new_f` and `old_f` into a single function through inlining?

Yes, if it could do the same without the intervening `FuncAndValue`. Of course the unfoldings of the functions need to be available, or there wouldn't be any chance of inlining anyway. But if there is a chance, wrapping the function(s) in a `FuncAndValue` makes little difference if any.

But let's ask GHC itself. First the type and a very simple `chain`ing:

```
module FuncAndValue where

data FuncAndValue v res = FuncAndValue (v -> res) v

infixr 7 `chain`

chain :: (res -> new_res) -> FuncAndValue v res -> FuncAndValue v new_res
chain new_f (FuncAndValue old_f v) = FuncAndValue (new_f . old_f) v

apply :: FuncAndValue v res -> res
apply (FuncAndValue f x) = f x

trivia :: FuncAndValue Int (Int,Int)
trivia = FuncAndValue (\x -> (2*x - 1, 3*x + 2)) 1

composed :: FuncAndValue Int Int
composed = chain (uncurry (+)) trivia 
```

and (the interesting part of) the core we get for `trivia` and `composed`:

```
FuncAndValue.trivia1 =
  \ (x_af2 :: GHC.Types.Int) ->
    (case x_af2 of _ { GHC.Types.I# y_agp ->
     GHC.Types.I# (GHC.Prim.-# (GHC.Prim.*# 2 y_agp) 1)
     },
     case x_af2 of _ { GHC.Types.I# y_agp ->
     GHC.Types.I# (GHC.Prim.+# (GHC.Prim.*# 3 y_agp) 2)
     })

FuncAndValue.composed2 =
  \ (x_agg :: GHC.Types.Int) ->
    case x_agg of _ { GHC.Types.I# y_agp ->
    GHC.Types.I#
      (GHC.Prim.+#
         (GHC.Prim.-# (GHC.Prim.*# 2 y_agp) 1)
         (GHC.Prim.+# (GHC.Prim.*# 3 y_agp) 2))
    } 
```

Inlined fair enough, no `(.)` to be seen. The two `case`s from `trivia` have been joined so that we have only one in `composed`. Unless somebody teaches GHC enough algebra to simplify `\x -> (2*x-1) + (3*x+2)` to `\x -> 5*x + 1`, that's as good as you can hope. `apply composed` is reduced to `6` at compile time, even in a separate module.

But that was *very* simple, let's give it a somewhat harder nut to crack.

An inlinable version of `until` (the current definition of `until` is recursive, so GHC doesn't inline it),

```
module WWUntil where

wwUntil :: (a -> Bool) -> (a -> a) -> a -> a
wwUntil p f = recur
  where
    recur x
        | p x       = x
        | otherwise = recur (f x) 
```

Another simple function it its own module,

```
collatzStep :: Int -> Int
collatzStep n
    | n .&. 1 == 0  = n `unsafeShiftR` 1
    | otherwise     = 3*n + 1 
```

and finally, the nut

```
module Hailstone (collatzLength, hailstone) where

import FuncAndValue
import CollatzStep
import WWUntil

data P = P {-# UNPACK #-} !Int {-# UNPACK #-} !Int

fstP :: P -> Int
fstP (P x _) = x

sndP :: P -> Int
sndP (P _ y) = y

hailstone :: Int -> FuncAndValue Int Int
hailstone n = sndP `chain` wwUntil ((== 1) . fstP) (\(P n k) -> P (collatzStep n) (k+1))
                   `chain` FuncAndValue (\x -> P x 0) n

collatzLength :: Int -> Int
collatzLength = apply . hailstone 
```

I have helped the strictness analyser a bit by using a strict pair. With the vanilla `(,)` the second component would be unboxed and reboxed after adding 1 in each step, and I just can't bear such waste ;) But otherwise there's no relevant difference.

And (the interesting part of) the core GHC generates:

```
Rec {
Hailstone.$wrecur [Occ=LoopBreaker]
  :: GHC.Prim.Int#
     -> GHC.Prim.Int# -> (# GHC.Prim.Int#, GHC.Prim.Int# #)
[GblId, Arity=2, Caf=NoCafRefs, Str=DmdType LL]
Hailstone.$wrecur =
  \ (ww_sqq :: GHC.Prim.Int#) (ww1_sqr :: GHC.Prim.Int#) ->
    case ww_sqq of wild_Xm {
      __DEFAULT ->
        case GHC.Prim.word2Int#
               (GHC.Prim.and# (GHC.Prim.int2Word# wild_Xm) (__word 1))
        of _ {
          __DEFAULT ->
            Hailstone.$wrecur
              (GHC.Prim.+# (GHC.Prim.*# 3 wild_Xm) 1) (GHC.Prim.+# ww1_sqr 1);
          0 ->
            Hailstone.$wrecur
              (GHC.Prim.uncheckedIShiftRA# wild_Xm 1) (GHC.Prim.+# ww1_sqr 1)
        };
      1 -> (# 1, ww1_sqr #)
    }
end Rec }

lvl_rsz :: GHC.Types.Int -> GHC.Types.Int
[GblId, Arity=1, Caf=NoCafRefs]
lvl_rsz =
  \ (x_iog :: GHC.Types.Int) ->
    case x_iog of _ { GHC.Types.I# tpl1_B4 ->
    case Hailstone.$wrecur tpl1_B4 0 of _ { (# _, ww2_sqH #) ->
    GHC.Types.I# ww2_sqH
    }
    } 
```

and that's exactly what you get without `FuncAndValue`. Everything inlined nicely, a beautiful tight loop.

> Basically, does storing functions in data types in anyway inhibit optimizations.

If you wrap the function under enough layers, yes. But it's the same with other values.

# ruby - 如何在 ruby 中使用一个主进程管理多个工作进程？

> ID：14180112
> 
> 赞同：0
> 
> 时间：2013-01-06T07:02:48.523
> 
> 标签：ruby, parallel-processing, fork, pipe, worker

我需要在 Ruby 中开发多进程应用程序：一个主进程管理多个工作进程。大师创建（分叉！我不想要多线程，但多处理）工作人员的拉动，然后要求数据库定期处理新记录，如果有的话 - 通过管道将记录发送给工作人员。当worker完成它的工作时，它必须通知master，所以master可以向这个worker发送另一个记录来处理。我找不到工作人员可以发送给主服务器的通知的解决方案，似乎应该以异步方式完成，但 IO 管道在同步模式下工作。请给我一个方向？也欢迎评论中的任何分叉最佳实践！谢谢你。

PS。我不想使用 EventMachine 或 Parallel 之类的外部解决方案，只能使用分叉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T07:07:51.980

好吧，我确实认为 MQ 系统更合适。主发布作业，作品查询和处理作业。

rails 也有发布/订阅功能见

[http://api.rubyonrails.org/classes/ActiveSupport/Notifications.html](http://api.rubyonrails.org/classes/ActiveSupport/Notifications.html)

[Rails pub/sub 与 faye](https://stackoverflow.com/questions/7029025/rails-pub-sub-with-faye)

# mysql - 外键的效率如何？

> ID：14180122
> 
> 赞同：4
> 
> 时间：2013-01-06T07:04:30.550
> 
> 标签：mysql, foreign-keys

非常简单的问题：哪个更有效？

1.  `DELETE`对父表的查询，然后是对子`DELETE`表的查询
2.  对父表的`DELETE`查询导致外键从子表中删除行

为了进一步解释，我正在处理非常大的表（包含几百万行），我只是想知道外键提供的完整性是否值得 MySQL 必须做的额外工作，而不仅仅是记住更新/删除子表。在我真正继续更新以使用外键之前，我想知道；）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T07:08:04.347

无论您认为自己可以编写什么代码，数据库至少也可以做到这一点，而无需使用网络来完成。

使用外键。

# objective-c - 调用从 AppDelegate 导入 AppDelegate 的 UIViewController 方法

> ID：14180140
> 
> 赞同：0
> 
> 时间：2013-01-06T07:06:52.213
> 
> 标签：objective-c, uiviewcontroller, appdelegate

我有一个我所有 UiViewController 扩展的 BaseViewController。

这个 BaseViewController 也使用 AppDelegate，因此我像这样导入它：

```
@interface BaseViewController : UIViewController{
    AppDelegate *appDelegate;  
} 
```

在`AppDelegate`，我需要使用一个方法`applicationDidBecomeActive`。在方法中我想使用 BaseViewController 的方法。

所以我导入了 BaseViewController：

`#import "BaseViewController.h"`但后来我得到一个编译错误`BaseViewController`：

```
Unkown type AppDelegate 
```

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T07:15:16.753

在您的 .h 文件中，添加以下行：

```
@class AppDelegate

```

在顶部 然后重试

# java - 克隆 JavaFX 节点？

> ID：14180141
> 
> 赞同：13
> 
> 时间：2013-01-06T07:06:54.673
> 
> 标签：java, duplicates, clone, javafx, scenebuilder

我在 JavaFX 场景构建器中创建了一个`Node`( `AnchorPane`) 并且想知道如何克隆它。

[我在 JavaFX 2.0 中](https://stackoverflow.com/questions/12912386/duplicate-clone-node-in-javafx-2-0)看到了重复/克隆节点，但我需要克隆`Node`而不重新加载 fxml。

有没有办法在 JavaFX 2 中实现这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-10-22T05:14:53.570

您可以将需要复制的组件放在单独的`.fxml`文件中。

然后，您可以根据需要多次加载单独的文件，将节点添加到主场景中的相应根目录。

此外，您可以将`<fx:include source="..."/>`元素编辑到主`.fxml`文件并包含单独的`.fxml`文件。然后，您仍然可以在 JavaFX Builder 中使用它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-06T22:25:46.403

JavaFX 平台中没有这样的节点复制功能，您需要自己编写它来检查您有兴趣克隆的节点的属性并创建具有所需属性的新节点。

对节点定义使用 fxml 模板可能是对具有静态初始化属性的节点执行此操作的最简单方法 - 但是，正如您在问题中所述，您不想为此使用 fxml，因此您必须用 Java 编写克隆逻辑。

# ruby-on-rails - rake db:seed 和 mongoid 的未初始化常量错误

> ID：14180143
> 
> 赞同：0
> 
> 时间：2013-01-06T07:07:48.523
> 
> 标签：ruby-on-rails, mongoid

当我尝试将数据收集到我的应用程序中时，我收到了这个错误。

我有一个 JSON 文件，看起来像……</p>

```
[{"code": "OCH", "name": "blah", "location": "Texas, United States"},… 
```

我的 db:seeds 看起来像：

```
Airport.delete_all
airport_codes = JSON.parse(File.read(Rails.root.join('db/airport_codes.json')))
airport_codes.each do |code|
  Airport.create!(code)
end 
```

还有我的堆栈跟踪：

```
/Users/nicholasshook/.rvm/gems/ruby-1.9.3-p194@swlv/gems/mongoid-3.0.16/lib/mongoid/railties/database.rake:13:in `block (2 levels) in <top (required)>'
/Users/nicholasshook/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-10.0.3/lib/rake/task.rb:228:in `call'
/Users/nicholasshook/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-10.0.3/lib/rake/task.rb:228:in `block in execute'
/Users/nicholasshook/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-10.0.3/lib/rake/task.rb:223:in `each'
/Users/nicholasshook/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-10.0.3/lib/rake/task.rb:223:in `execute'
/Users/nicholasshook/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-10.0.3/lib/rake/task.rb:166:in `block in invoke_with_call_chain'
/Users/nicholasshook/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/Users/nicholasshook/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-10.0.3/lib/rake/task.rb:159:in `invoke_with_call_chain'
/Users/nicholasshook/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-10.0.3/lib/rake/task.rb:152:in `invoke'
/Users/nicholasshook/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-10.0.3/lib/rake/application.rb:143:in `invoke_task'
/Users/nicholasshook/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-10.0.3/lib/rake/application.rb:101:in `block (2 levels) in top_level'
/Users/nicholasshook/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-10.0.3/lib/rake/application.rb:101:in `each'
/Users/nicholasshook/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-10.0.3/lib/rake/application.rb:101:in `block in top_level'
/Users/nicholasshook/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-10.0.3/lib/rake/application.rb:110:in `run_with_threads'
/Users/nicholasshook/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-10.0.3/lib/rake/application.rb:95:in `top_level'
/Users/nicholasshook/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-10.0.3/lib/rake/application.rb:73:in `block in run'
/Users/nicholasshook/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-10.0.3/lib/rake/application.rb:160:in `standard_exception_handling'
/Users/nicholasshook/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-10.0.3/lib/rake/application.rb:70:in `run'
/Users/nicholasshook/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-10.0.3/bin/rake:33:in `<top (required)>'
/Users/nicholasshook/.rvm/gems/ruby-1.9.3-p194@global/bin/rake:19:in `load'
/Users/nicholasshook/.rvm/gems/ruby-1.9.3-p194@global/bin/rake:19:in `<main>'
/Users/nicholasshook/.rvm/gems/ruby-1.9.3-p194@swlv/bin/ruby_noexec_wrapper:14:in `eval'
/Users/nicholasshook/.rvm/gems/ruby-1.9.3-p194@swlv/bin/ruby_noexec_wrapper:14:in `<main>' 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T19:26:27.650

希望你已经像这样创建了你的 rake 任务

```
task :<rake task name> => :environment do
   Airport.delete_all
   airport_codes = JSON.parse(File.read(Rails.root.join('db/airport_codes.json')))
   airport_codes.each do |code|
     Airport.create!(code)
   end
end 
```

如果这也是正确的，那么尝试将您的 airport.rb 包含到您的 rake 文件中

```
require 'airport.rb' 
```

，但据我所知，上面的 rake 任务格式应该适合你

高温高压

# asterisk - 通过点击网络中的号码拨打电话

> ID：14180146
> 
> 赞同：0
> 
> 时间：2013-01-06T07:08:09.310
> 
> 标签：asterisk, pbx, elastix

我是来自星号的新手，但在 PHP 编程方面很专业！所以我想在我的网络用户面板中拨打手机号码。当用户点击一个号码时，连接到星号并通过指定的内部分机拨打选定的手机号码。有什么解决办法吗？我不知道是否使用任何软件电话。如果可能的话，我不想使用任何客户端软件电话。

编辑：

我在 AMI 和 shift8 中使用了一些 php 代码，但我的问题是当用户打电话时，用户如何在没有软件电话的情况下与另一个人交谈？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T12:55:29.273

您可以使用各种 API 拨打电话。正如您已经了解了 AMI，您可能会发现[http://code.google.com/p/asterisk-php-api/](http://code.google.com/p/asterisk-php-api/)很有帮助。

关于您的电话问题：使用[AMI 发起操作](http://www.voip-info.org/wiki/view/Asterisk+Manager+API+Action+Originate)拨打电话将首先振铃分机的关联电话，当您挂机时，星号将拨打目标号码。因此，您使用哪种电话（硬电话或软电话、品牌……）并不重要。只要电话在星号中注册并绑定到某个分机，它就可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-29T08:48:58.697

如果我理解正确， doddle[网络电话](http://www.doddlephone.com/)或[webrtc](http://www.webrtc.org/)可能是您正在寻找的示例。

# java - 关于捕获后抛出异常

> ID：14180147
> 
> 赞同：-3
> 
> 时间：2013-01-06T07:08:20.933
> 
> 标签：java, exception

我创建了一个自定义异常类，它包含许多重载方法

```
public class abcException extends Exception
{} 
```

我还有另一个类，在其中我也导入了上面的 abcException 类

```
import com.system.error.abcException;
class fgh
{

void dhj() throws abcException //method that might throw Exception
{
try

{
}
catch(Exception bse) {
      log.logError(bse.getMessage(), bse);
      throw new abcException(bse.getMessage(), bse);
}
} 
```

现在我的查询是，如上面的类所示，它包含一个名为 dhj() 的方法，它可能会抛出一个自定义异常，但是为什么在 catch 块中我们在记录后再次抛出异常是正确的做法吗？请告知。请告知是否可以拥有这样的东西

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T07:24:46.780

这种做法是可以接受的。当您创建一个可以与 SQLite 和/或 MySQL 一起使用的数据库驱动程序时，请考虑一个示例。你的类的公共 API 有一个方法`connect()`。假设您要处理由于连接参数错误而无法建立连接的情况。在这里，您对 SQLite 和 MySQL 的工作方式有根本的区别。SQLite 是基于文件的，你可能会发现例如`FileNotFoundException`，而 MySQL 是通过网络访问的，你可以得到`ConnectException`. 公共 API 用户不想知道驱动程序深处发生了什么，因此您只需将这些异常包装起来，让我们说`MyDbDriverConnectException`哪个更方便处理。

UPD：对于异常记录，记录和重新抛出是不好的做法，因为您会在多次记录一个异常时造成情况。阅读[这篇精彩的文章](http://codemonkeyism.com/7-good-rules-to-log-exceptions/)以获取更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T07:11:59.093

如果您正在使用 throws 子句，则无需在同一方法中再次捕获它，使用该方法的客户端应显式处理该异常或再次将其放入 throws 子句中，有时应该有人处理该异常否则代码不会编译。在这种情况下，我认为 catch 和 throw 是多余的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T07:36:45.027

如有异常

1.  抓住它并记录下来。或者
2.  丢它

永远不要记录并重新抛出相同的异常。

例如：在 Java servlet 中，servlet 方法只允许抛出 ServletException 或 IOException

因此，如果在您的逻辑中发生了其他异常，则将该异常包装在 ServletException 中并重新抛出它。但是缓存它`Exception`是不好的，并且表明您对在该方法中所做的事情没有太多了解。这甚至会捕获在大多数情况下不应该捕获的 RuntimeExceptions。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T07:48:23.473

log and throw 通常被认为是一种反模式，参见[http://today.java.net/article/2006/04/04/exception-handling-antipatterns#logAndThrow](http://today.java.net/article/2006/04/04/exception-handling-antipatterns#logAndThrow)

`catch (Exception e)`通常是不好的，因为这样你可以捕捉到不应该被捕捉的 RuntimeExceptions。通常我们只捕获已检查的异常。请注意，Java 7 具有 multicatch 功能`catch(FirstException | SecondException e)`

至于catch and rethrow就可以了，是异常翻译，见[http://www.javapractices.com/topic/TopicAction.do?Id=120](http://www.javapractices.com/topic/TopicAction.do?Id=120)

# jquery-ui - 切换后如何使用 jQuery 更改可见性

> ID：14180149
> 
> 赞同：0
> 
> 时间：2013-01-06T07:08:35.033
> 
> 标签：jquery-ui, toggle

我在 div“pastmeet”上有一个 jQuery 切换，我需要在切换后以编程方式（无需单击）设置可见性。我将 div 的样式设置为 display:block; 并添加了一个（显示），然后是一个 CSS 更改到 jQuery。无论我做什么，div 都不会显示，并且源代码显示 div 被分配了 display:none。切换关闭后如何显示 div？这是我现有的代码：

```
 (function ($) {
       $(document).ready(function() {
            $(".div_toggle").slideUp();
            $(".toggle_action").click(function(){
            $(this).next(".div_toggle").slideToggle("slow");
      });
        $('.pastmeet').css('display', 'block');  // force visibility to on          
      return false;
    });         
  })(jQuery); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T07:13:54.933

如果您只想在显示和隐藏之间切换，您可以使用：

```
 $(".toggle_action").click(function(){
        $(this).next(".div_toggle").toggle();
  }); 
```

但如果你必须做一些更定制的事情，这就是我过去所做的：

```
var showHide = 0;
  $(".toggle_action").click(function(){
        if (showHide == 0) {
              showHide = 1;
              $(this).next(".div_toggle").hide();
             //do something
        } else {
              showHide = 0;
              $(this).next(".div_toggle").show();
             //do something
  }); 
```

# jquery - 将项目添加到 jQuery Masonry

> ID：14180154
> 
> 赞同：1
> 
> 时间：2013-01-06T07:09:09.107
> 
> 标签：jquery, jquery-masonry

我已经能够非常高兴地将项目附加到 jQuery masonry 以创建“无限滚动”效果。

我天真地认为类似的策略可以在共济会内容之前添加内容。

我这样设置砌体：

```
$(document).ready(function(){

   var $container = $('#pics');
        $container.imagesLoaded( 
        function(){
            $container.masonry({ 
            itemSelector : '.item',
            isFitWidth: true,
            isAnimated: true });
        });
}); 
```

原始图像出现在此循环中（使用带有 Java 的 Playframework 1.2.4）

```
<div id="pics" class="pics">
            #{list items:pics, as:'pic'}
                <div class="item">
                    <a href="https://s3.amazonaws.com/bucket/${pic.url}"/>
                    <img src="https://s3.amazonaws.com/bucket/${pic.url}" class="pic" style="height:${pic.height}">
                    </a>
                </div>
            #{/list}
</div> 
```

这就是我将新图片添加到 Masonified “newpics” div 中的地方：

```
 $.each(data.files, function (index, file) {

var filename_leaf = milliTime+"-"+file.name;
var filename_stem = "https://s3.amazonaws.com/bucket/";
var filename = filename_stem+filename_leaf;

var newpic = "<div class='item'>"+
   "<a href='"+filename+"'>"+
   "<img src='"+filename+"'"+
   " class='pic' style='height:"+file.height+"'>"+
   "</a></div>";

$('#pics').prepend(newpic).masonry('reload');

 }); 
```

发生的情况是图片是预先添加的，但是它们落后于现有图片。

如果在不刷新整个页面的情况下刷新/重新加载#pics div，这几乎可以解决问题。我会继续寻找，但我怀疑其他人可能知道更好的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T07:53:21.247

你的问题不在于砌体。您的错误是，一旦上传了新照片，高度值就未定义。这意味着您的图片标记如下所示：

```
<img style="height:undefined" class="pic" src="/photo.jpg"> 
```

这会导致问题，因为在获取图像之前，大多数浏览器会将图片呈现为`height: 0`. 这就是使`reload`砌体马赛克*“*马赛克”的原因（考虑到第一个新图像`0px`在高度上，它重新排列了马赛克）。

因此，您应该确保您获得了图像的有效值`height`。或者等到图像完全加载后触发该`reload`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-28T06:39:52.520

以防有人发现这个。`reload`如果您预先添加新元素，则不适用于当前版本。你必须使用`prepended`. 似乎每个站点都引用了`reload`。必须适用于以前的版本。

```
msnry.prepended( elements )
// or with jQuery
$container.masonry( 'prepended', elements ) 
```

[http://masonry.desandro.com/methods.html](http://masonry.desandro.com/methods.html)

# ruby - 类变量的用例

> ID：14180155
> 
> 赞同：1
> 
> 时间：2013-01-06T07:09:13.753
> 
> 标签：ruby, class-variables

您可以创建类的实例变量并将其访问器定义为该类的单例方法。但是类变量的`@@var`行为很奇怪，尤其是在继承时。它有什么用例吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T07:52:13.667

我将您所说的奇怪解释为类变量在每个类之间没有不同但在类的继承层次结构之间共享这一事实。

[正如您在 Jörg W Mittag 对这个问题](https://stackoverflow.com/questions/1251352)的回答中所指出的那样，如果您希望一个变量与一个类一致但在类之外有所不同，那么您可以在该类上使用一个类实例变量。这意味着，如果有任何理由存在，类变量的行为应该与它不同。并且类变量确实在继承层次结构中的类之间共享。

```
class A
  @@foo = 3
end
class B < A
  puts @@foo
end
# => 3 
```

当您想要共享层次结构中的类共有的东西时，它可能很有用。例如，假设您在一个类中有一些特性将在继承该类的类中使用。假设该特性依赖于一个参数，并且您希望该参数更改在继承该特性的类之间保持一致。然后，类变量将很有用。

例如，假设你有这个方法：

```
class Array
  def join_with_delimiter
    join(@@delimiter)
  end
end
class A < Array; end 
```

通过设置`@@delimiter`一次，您可以期望在`Array`和之间保持一致的行为`A`。

```
class Array; @@delimiter = "*" end
Array.new([:a, :b, :c]).join_with_delimiter # => "a*b*c"
A.new([:a, :b, :c]).join_with_delimiter # => "a*b*c"

class A; @@delimiter = "#" end
Array.new([:a, :b, :c]).join_with_delimiter # => "a#b#c"
A.new([:a, :b, :c]).join_with_delimiter # => "a#b#c" 
```

如果您使用类实例变量执行此操作，您将不会获得一致的行为：

```
class Array
  def self.delimiter; @delimiter end
  def join_with_delimiter
    join(self.class.delimiter)
  end
end
class A < Array; end

class Array; @delimiter = "*" end
Array.new([:a, :b, :c]).join_with_delimiter # => "a*b*c"
A.new([:a, :b, :c]).join_with_delimiter # => "abc"

class A; @delimiter = "#" end
Array.new([:a, :b, :c]).join_with_delimiter # => "a*b*c"
A.new([:a, :b, :c]).join_with_delimiter # => "a#b#c" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T07:15:21.850

类变量用于将值传递给类中的不同方法。

# java - 玩！带有 JAVA 和 RabbitMQ 集成的 Framework 2.0.4

> ID：14180161
> 
> 赞同：1
> 
> 时间：2013-01-06T07:10:18.340
> 
> 标签：java, playframework, playframework-2.0, rabbitmq

我刚刚开始使用 Play 进行开发！框架 2 和我遇到了与 RabbitMQ 集成相关的问题。首先，我在 Build.scala 配置文件中添加了适当的行：

```
 val appDependencies = Seq(
       "com.rabbitmq" % "amqp-client" % "3.0.1"
    ) 
```

但是现在我仍然无法从包 com.rabbitmq.* 中导入任何文件；尝试刷新页面时，它说：

> 编译错误
> 
> 错误：com.rabbitmq 包不存在

我究竟做错了什么？我使用 IntellJ IDE。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-01T10:37:39.710

您还可以使用“play eclipse”下载依赖项并刷新您的 eclipse 项目。

# c++ - 可变参数列表与单个模板参数：标准怎么说？

> ID：14180170
> 
> 赞同：5
> 
> 时间：2013-01-06T07:12:19.173
> 
> 标签：c++, c++11, variadic-templates, standards-compliance, overload-resolution

考虑以下代码：

```
#include <iostream>
#include <type_traits>

// Variadic version
template<class... Variadic>
void f(const Variadic&... variadic)
{
    std::cout<<"variadic"<<std::endl;
}

// Single version
template<class Single, class = typename std::enable_if<std::is_fundamental<Single>::value>::type>
void f(const Single& single)
{
    std::cout<<"single"<<std::endl;
}

// Main
int main()
{
    f();              // variadic
    f(42);            // single : why?
    f(std::string()); // variadic 
    f(42, 42);        // variadic
    return 0;
} 
```

我不明白为什么标记为“single”的行编译得很好（在 g++ 4.6.3 下）并且不会产生重载解决问题。c++11 标准是否说具有固定数量参数的模板函数优于具有相同签名的可变参数函数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-09-11T14:17:51.063

[这真的](http://coliru.stacked-crooked.com/a/6e798a12713c2770) [很简单](http://ideone.com/TKDvd7)（两个活生生的例子，gcc 和 clang）

```
template<class...T> void foo(T&&...) {std::cout << "...T\n";}
template<class T> void foo(T&&) {std::cout << "T\n";}
int main() {
  foo(3);
} 
```

Overloads not taking `...`seem to be preferred when the choice is an explicit template parameter.

`class=std::enable_if_t`不会改变这一点。

所以你的两个函数`f`都是候选函数，那么编译器更喜欢没有变量的函数。

# 14.8.2.4 在部分排序期间推导模板参数 [temp.deduct.partial]

/8：

> 如果`A`是从函数参数包转换而来的并且`P`不是参数包，则类型推导失败。否则，使用结果类型`P`和`A`，然后按 中所述进行推导`14.8.2.5`。如果`P`是函数形参包，则将实`A`参模板的每个剩余形参类型的类型与函数形参包的 declarator-id 的类型 P 进行比较。每个比较推导出模板参数包中由函数参数包扩展的后续位置的模板参数。如果给定类型的推导成功，则参数模板中的类型被认为至少与参数模板中的类型一样特化。[ 例子：

```
template<class... Args> void f(Args... args); // #1
template<class T1, class... Args> void f(T1 a1, Args... args); // #2
template<class T1, class T2> void f(T1 a1, T2 a2); // #3
f(); // calls #1
f(1, 2, 3); // calls #2
f(1, 2); // calls #3; non-variadic template #3 is more
// specialized than the variadic templates #1 and # 
```

特别是`f(1,2)`例子。

当您传递 a as时，该`enable_if_t`子句所做的只是从考虑中删除单参数版本。`std::string``T`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T09:07:17.497

由于在“单一”版本中使用了第二个模板参数 enable_if，编译器认为该版本是一个更专业的模板，可与启用它的类型一起使用。
它被认为更专业，因为有些类型可以实例化可变参数模板，但“单个”不能。

一般规则是更专业的模板在重载决议中胜过不那么专业的模板。

# javascript - getElementsByTagName 查找标签然后读取字符串并替换文本

> ID：14180171
> 
> 赞同：-1
> 
> 时间：2013-01-06T07:12:29.407
> 
> 标签：javascript, google-chrome

我花了很长时间尝试和解决这个问题，但没有看到你看到的运气，因为我对 javascript 还很陌生。我正在制作一个 google chrome 扩展程序，我希望阻止用户定义的页面上的某些单词，但我希望在没有 getelementbyid 的情况下执行此操作，因为他们不会有我想要的 id 的网页。例如，让用户输入他或她希望阻止的词，然后这些词将在他们访问的任何网页上被替换。帮助很大。到目前为止，我所拥有的只是通过 id 而不是标签获取元素

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T07:15:49.863

文本可以在任何元素中，所以`getElementsByTagName`不会有太大用处。

相反，请考虑遍历所有节点。查找类型 3 的节点（文本节点），并替换它们的内容。

从 开始`document.body`，获取它的`.children[]`，然后递归循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T08:19:14.583

这是一个工作示例：http: [//jsfiddle.net/cmontgomery/V45LS/](http://jsfiddle.net/cmontgomery/V45LS/)

秘制酱料：

```
soapInTheMouth = function(node) {
  var allNodes = node.childNodes;
  $.each(allNodes, function(i,n) {
    if(n.nodeType === 3) {
      n.nodeValue = n.textContent.replace(/shit/g,'crap');
    } else {
      soapInTheMouth(n);
    }
  });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-20T07:43:41.713

谢谢你们，但我代表我修复了它只是一个语法错误

# jquery - JQuery masonry.js 问题与 Json 数据 .append()

> ID：14180172
> 
> 赞同：2
> 
> 时间：2013-01-06T07:12:35.747
> 
> 标签：jquery, codeigniter, twitter-bootstrap, jquery-masonry

我已经成功测试了包含多个列的 masonry.js，但是对于我的应用程序，我需要使用`.ajax()`JSON 数据动态添加砌体项目。目前，我选择使用`.append()`来布局初始砌体 .items - 问题是所有砌体项目都在单个列中输出。容器大小更改没有帮助，即使将容器宽度增加到足够多，它也不会设置为 3 列的样式。即使使用 containerWidth 函数并使用`return containerWidth / 3`

**这是代码：**

```
jQuery(document).ready(function()
 {     
      $.ajax(
      {
          url: 'http://localhost/project/index.php/controller/function',
          dataType:'json',
          success: function(data) 
          { 
        // limit - used to limit the json data ouput, as the json data contains an array of 50 objects.
            var limit = 11;
            $.each(data.results, function(index,item)
            {
                if (index > limit) return false; 

                // A bunch of var assignments mainly for data_*
            $("#content").append('<div class="item ' + index + '"><a href="' 
                    + data_link + '">'
                    + data_title + '</a><p>'
                    + data_desc + '</p><img style="height:100; width:100;" src="'
                    + data_img + '"><p>'
                    + data_date + 'Source: '
                    + data_source + '</p></div>');
            }); 
          }
      });
        $('#content').masonry({
            itemSelector: '.item',
            isAnimated: !Modernizr.csstransitions,
            columnWidth: 350
         }).imagesLoaded(function() {
            $('#content').masonry('reload');
        });
 }); 
```

**这是视图中的 HTML：**

```
<header> // FYI I am using CodeIgniter & Twitter Bootstrap
</header>
<div class="container" style="padding-top:145px; width:1300px; margin-left:auto; margin-right:auto;">
<div id="content" class="container-mason clearfix">

    </div>
</div>
</div> 
```

**以下是我来自 masonry.js 的样式**-*更改`container`为`container-mason`styl.css 以避免与引导程序发生任何可能的冲突*

```
#container-mason {
   background: #FFF;
   padding: 5px;
   margin-bottom: 20px;
   border-radius: 5px;
   clear: both;
   -webkit-border-radius: 5px;
   -moz-border-radius: 5px;
   border-radius: 5px;
}
<style >

#content 
{
    margin: 0 auto;
    width: auto;
}

.item {
    height: 300px;
    width: 300px;
    border: 2px #0099cc solid;
     margin-bottom:10px;
    left: 10px;
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
     border-radius: 5px;
    -webkit-transition: left .4s ease-in-out, top .4s ease-in-out .4s;
    -moz-transition: left .4s ease-in-out, top .4s ease-in-out .4s;
    -ms-transition: left .4s ease-in-out, top .4s ease-in-out .4s;
    -o-transition: left .4s ease-in-out, top .4s ease-in-out .4s;
    transition: left .4s ease-in-out, top .4s ease-in-out .4s;
}    
</style> 
```

**谢谢您的帮助！！**

**更新**

**这是 JsFiddle** [http://jsfiddle.net/8CjT6/5/](http://jsfiddle.net/8CjT6/5/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T03:46:56.263

我认为您错过了`float: left`items 类的样式。

检查这个[小提琴](http://jsfiddle.net/arunpjohny/8CjT6/10/)。

# php - Apache：如何重写没有文件扩展名的 URL 并忽略大小写？

> ID：14180176
> 
> 赞同：3
> 
> 时间：2013-01-06T07:13:30.410
> 
> 标签：php, apache, mod-rewrite, file-extension, ignore-case

我正在运行带有 Apache 2.2.22 和 PHP 5.3.10 的 Ubuntu 12.04。我希望用户能够在我的网站上请求页面，而不必键入“.php”扩展名，也不必担心区分大小写。例如，像这样的 URL...

```
http://www.site.com/test/phpinfo
http://www.site.com/test/PhPiNfO 
```

...都应该导致：

```
http://www.site.com/test/phpinfo.php 
```

[我按照这个问题](https://stackoverflow.com/questions/2923658/convert-to-lowercase-in-a-mod-rewrite-rule)中接受的答案开始不区分大小写。这是我的“/etc/apache2/sites-available/default”文件的样子……

```
<VirtualHost *:80>
        ServerAdmin webmaster@localhost

        DocumentRoot /var/www

        RewriteMap lc int:tolower

        <Directory />
                Options FollowSymLinks
                AllowOverride All
        </Directory>
        <Directory /var/www/>
                Options Indexes FollowSymLinks MultiViews
                AllowOverride All
                Order allow,deny
                allow from all
        </Directory>

        <Directory /var/www/test>
                Options Indexes FollowSymLinks MultiViews
                AllowOverride All
                Order allow,deny
                allow from all
        </Directory>

        ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
        <Directory "/usr/lib/cgi-bin">
                AllowOverride None
                Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
                Order allow,deny
                Allow from all
        </Directory>

        ErrorLog ${APACHE_LOG_DIR}/error.log

        # Possible values include: debug, info, notice, warn, error, crit,
        # alert, emerg.
        LogLevel warn

        CustomLog ${APACHE_LOG_DIR}/access.log combined

    Alias /doc/ "/usr/share/doc/"
    <Directory "/usr/share/doc/">
        Options Indexes MultiViews FollowSymLinks
        AllowOverride None
        Order deny,allow
        Deny from all
        Allow from 127.0.0.0/255.0.0.0 ::1/128
    </Directory>
</VirtualHost> 
```

...这是我的 .htaccess 文件：

```
RewriteEngine On
RewriteRule ^([a-z]+)/([a-z\-]+)$ /${lc:$1}/${lc:$2}.php [L,NC] 
```

文件扩展名部分正在工作，但由于某种原因，仍在强制执行区分大小写。我的 Apache 错误日志充满了这样的行：

```
[Sat Jan 05 23:10:41 2013] [error] [client 192.168.1.9] File does not exist: /var/www/test/phpinfO 
```

有什么想法我在这里做错了吗？

**编辑：**经过几个小时的实验，我看到了最奇怪的行为！我想也许我的 .htaccess 文件只是被忽略了，所以我用胡言乱语填充了它。这如预期的那样产生了内部服务器错误。然后我在我的 .htaccess 文件中尝试了这两行......

```
RewriteEngine On
RewriteRule ^/(.*)$ /${lc:$1} 
```

...并尝试访问 test/phpinfo.php 失败。然后我删除了 .htaccess 文件并将这两行直接放入我的“/etc/apache2/sites-available/default”文件中并重新启动了 Apache。由于某种莫名其妙的原因，我想要的行为现在正在起作用！我无法理解如何，因为我唯一的规则不会将“.php”附加到 URL *！*

这听起来可能很奇怪，但几乎感觉我的更改正在以某种延迟的方式生效。我尝试了一些其他的测试，这些测试没有立即起作用，但后来似乎在他们不应该起作用的时候起作用。我一直在测试并期望我当前的设置会在不更改任何内容的情况下中断。无论如何，我绝对感到困惑。

希望在我挖出我的大脑并用大锤砸碎它之前，有人能对此有所了解。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T15:15:27.867

我终于想通了这一点。好吧，至少是其中的一部分。事实证明，“MultiViews”选项负责解析没有“.php”扩展名的文件。结合我的“/etc/apache2/sites-available/default”文件中的这两行，我得到了我想要的行为：

```
RewriteEngine On
RewriteRule ^/(.*)$ /${lc:$1} 
```

不幸的是，我无法确定为什么我的 .htaccess 文件在具有上述规则时会被忽略，但在出现乱码时却不会被忽略。

**编辑：**好的，我知道为什么 .htaccess 文件不起作用。它正在被读取，但第二条规则没有被匹配。根据[Apache 文档](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule)，这就是为什么：

> 删除的前缀始终以斜杠结尾，这意味着匹配发生在从不具有前导斜杠的字符串上。因此，带有 ^/ 的模式永远不会在每个目录的上下文中匹配。

结果，我将 .htaccess 文件更改为具有此...

```
RewriteEngine On
RewriteRule ^(.*)$ ${lc:$1} 
```

......它终于工作了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T07:22:53.850

```
CheckSpelling on 
```

匹配文件和目录。有关详细信息，请参阅[文档](http://httpd.apache.org/docs/2.0/mod/mod_speling.html)。

复制自 =[带有 mod_rewrite 的不区分大小写的 URL](https://stackoverflow.com/questions/1998156/case-insensitive-urls-with-mod-rewrite)

# python - `eventlet.spawn` 没有按预期工作

> ID：14180179
> 
> 赞同：3
> 
> 时间：2013-01-06T07:14:05.323
> 
> 标签：python, asynchronous, eventlet, green-threads

我正在为数据分析任务编写一个 Web UI。

这是它应该工作的方式：

在用户指定和 等参数后`dataset`，`learning rate`我创建一个新的`task record`，然后异步启动此任务的执行程序（执行程序可能需要很长时间才能运行。），并将用户重定向到其他页面。

搜索后`async library for python`，我从 开始`eventlet`，这是我在`flask`视图函数中写的：

```
db.save(task)
eventlet.spawn(executor, task)
return redirect("/show_tasks") 
```

使用上面的代码，执行程序根本没有执行。

我的代码可能有什么问题？或者也许我应该尝试别的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T02:12:18.143

当您获得直接解决方案时，我将尝试回答您的第一个问题并解释为什么您的代码无法按预期工作。

披露：我目前维护 Eventlet。此评论将包含一些简化以适应合理的大小。

### 协作多线程简介

有两种方法可以做[多线程](http://en.wikipedia.org/wiki/Multithreading_%28software%29#Multithreading "多线程")和 Eventlet 利用协作方法。核心是[Greenlet](http://greenlet.readthedocs.org/en/latest/)库，它基本上允许您创建独立的“执行上下文”。*可以将这样的上下文视为所有局部*变量的冻结状态和指向下一条指令的指针。基本上，*多线程 = 上下文 + 调度程序*。Greenlet 提供了上下文，所以我们需要一个调度器，它可以决定哪个上下文现在应该占用 CPU。反过来，为了做出决定，我们还应该运行一些代码。这意味着一个单独的上下文（绿色线程）。这个特殊的绿色线程在 Eventlet 代码库中称为*Hub 。*调度器维护一个有序[集](http://en.wikipedia.org/wiki/Set_%28mathematics%29)需要尽快运行的上下文 -*运行队列*和一组正在等待某事（例如网络 IO 或限时睡眠）完成的上下文。

但是由于我们在进行协作式多任务处理，一个上下文将无限期地执行，除非它明确地让步给另一个上下文。这将是一种非常可悲的编程风格，并且根据定义与现有库不兼容（指向他们知道谁）；所以 Eventlet 所做的是它提供了通用模块的*绿色*版本，改变了它们切换到 Hub 而不是阻塞一切的方式。然后，可能会在其他绿色线程或 Hub 的*等待外部事件*实现中花费一些时间，在这种情况下，Hub 将切换回发起该事件的绿色线程 - 并且它将继续执行。

*结尾。现在回到你的问题。*

* * *

`eventlet.spawn`实际作用：它创建了一个新的执行上下文。基本上，在内存中分配一个对象。它还告诉调度程序将此上下文放入*运行队列*，因此*在第一时间*，Hub 将切换到新生成的函数。您的代码没有提供这样的时刻。没有地方可以明确放弃对其他绿色线程的执行，对于 Eventlet，这通常是通过`eventlet.sleep()`. 而且由于您不使用绿色版本的通用模块，因此在其他代码等待时没有机会隐式让步。最合适的（如果不是唯一的）地方是你的 WSGI 服务器的接受循环：它应该让其他绿色线程有机会在等待下一个请求时运行。在第一个答案中提到`eventlet.monkey_patch()`只是用相应的绿色版本替换所有（或部分）通用模块的便捷方式。

* * *

**对整体设计的不受欢迎的意见** 在单独的部分中，可以轻松跳过。*如果*您正在构建防错软件，您通常希望限制衍生线程（包括但不限于“绿色”）和进程的执行时间，并至少报告（日志）或对其未处理的错误作出反应。在提供的代码中，从技术上讲，您生成的绿色线程可能会在下一刻或五分钟后运行（同样，因为没有人产生 CPU）或因未处理的异常而失败。幸运的是，Eventlet 为这两个问题提供了两种解决方案：[Timeout](http://eventlet.net/doc/basic_usage.html#eventlet.Timeout) [with_timeout()](http://eventlet.net/doc/modules/timeout.html#eventlet.timeout.with_timeout)允许限制等待时间（请记住，如果它不产生，你不可能限制它）和[GreenThread.link()](http://eventlet.net/doc/modules/greenthread.html#eventlet.greenthread.GreenThread.link)捕获所有异常。在“主”代码中重新引发异常可能很诱人（对我来说是这样），并且`link()`很容易做到这一点，但考虑到异常会从睡眠和 IO 调用中引发——在你屈服于 Hub 的地方。这可能会提供一些非常反直觉的回溯。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-06T07:24:19.910

您需要[修补](http://eventlet.net/doc/basic_usage.html#patching-functions)一些系统库才能使 eventlet 工作。这是一个最小的工作示例（也作为[gist](https://gist.github.com/4465839)）：

```
#!/usr/bin/env python 

from flask import Flask 
import time 
import eventlet 

eventlet.monkey_patch() 

app = Flask(__name__) 
app.debug = True 

def background(): 
    """ do something in the background """ 
    print('[background] working in the background...') 
    time.sleep(2) 
    print('[background] done.') 
    return 42 

def callback(gt, *args, **kwargs): 
    """ this function is called when results are available """ 
    result = gt.wait() 
    print("[cb] %s" % result) 

@app.route('/') 
def index(): 
    greenth = eventlet.spawn(background) 
    greenth.link(callback) 
    return "Hello World" 

if __name__ == '__main__': 
    app.run() 
```

更多关于：

*   [http://eventlet.net/doc/patching.html#monkey-patch](http://eventlet.net/doc/patching.html#monkey-patch)

> 编写像 Eventlet 这样的库的挑战之一是内置的网络库本身并不支持我们需要的那种合作产出。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-06T07:18:00.613

Eventlet 可能确实适合您的目的，但它不仅适用于任何旧应用程序；Eventlet 要求它控制您应用程序的所有 I/O。

你也许可以逃脱

1.  在另一个线程中启动 Eventlet 的主循环，甚至

2.  不使用 Eventlet 而只是在另一个线程中生成您的任务。

[芹菜](http://celeryproject.org/)可能是另一种选择。

# android - 从 url 保存 JSON 用于本地开发

> ID：14180181
> 
> 赞同：0
> 
> 时间：2013-01-06T07:14:10.150
> 
> 标签：android, json

我有一个 android 应用程序，它从 url 下载 json 数据，解析然后显示它。不幸的是，我将离开互联网一段时间，但想继续在应用程序上工作。

有没有办法可以保存这些数据以供离线使用？

本质上，有没有一种方法可以硬编码 a`JSONObject`以使用在[链接中找到的数据](http://utdeats.com/wp-content/themes/utdeats/assets/layout/includes/android_connect/sports/get_all_baseball.php)

这样我就可以在本地拥有它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-16T07:30:48.360

您有以下选择：

1.  使用[RoboSpice](https://github.com/stephanenicolas/robospice)库

2.  使用 android volley 库

以上两个库都具有缓存功能。有条件地，您可以使缓存无效以检索更新的数据。

使用共享首选项来存储 JSON 字符串并在需要时对其进行更新。

存储数据：

```
SharedPreferences settings = getApplicationContext().getSharedPreferences("PREF_NAME", MODE_PRIVATE);
SharedPreferences.Editor editor = settings.edit();
editor.putString("strJSON", "" + strJSONfromServer);
editor.commit(); 
```

要检索数据：

```
SharedPreferences settings = getApplicationContext().getSharedPreferences("PREF_NAME", MODE_PRIVATE);
String strData = settings.getString("strJSON", ""); 
```

清除数据：

```
SharedPreferences settings = getApplicationContext().getSharedPreferences("strJSON",MODE_PRIVATE);
SharedPreferences.Editor editor = settings.edit();
editor.remove("strJSON");
editor.commit(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T07:40:41.580

如果您的机器中安装了 http 服务器，您可以将该 json 数据保存为文本文件，并使用 url 从设备访问它：“ [http://10.0.2.2:PORT_NUMBER](http://10.0.2.2:PORT_NUMBER) ”

另一种解决方案，不需要http服务器，您可以将数据保存为文本文件并从您的设备访问它，如此答案中所述： [Reading a simple text file](https://stackoverflow.com/questions/5771366/reading-a-simple-text-file#answer-5771369)

编辑：更简单的方法是将数据保存在字符串中：

```
String stringJson = "{\"Baseball\":[{\"Opponent\": ... " 
```

（请注意，您必须使用 \" 转义字符）

要解析 json 数据，您需要做的就是

JSONObject jsonObject = new JSONObject(stringJson);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T12:37:45.257

将您的 json 存储在资产目录下的文件中的另一种选择。然后，您将能够像访问应用程序中的任何其他文件一样访问它：

[http://developer.android.com/reference/android/content/res/AssetManager.html](http://developer.android.com/reference/android/content/res/AssetManager.html)

# ios - SIGTRAP NSFetchedResultsController

> ID：14180184
> 
> 赞同：0
> 
> 时间：2013-01-06T07:14:56.893
> 
> 标签：ios, xcode, core-data, nsfetchedresultscontroller

我正在使用此功能获得 SIGTRAP

```
- (void)initFetchRequest
{    
    NSManagedObjectContext *context = document.managedObjectContext;
    NSFetchRequest *request = [[NSFetchRequest alloc] init];
    request.entity = [NSEntityDescription entityForName:@"Shindy" inManagedObjectContext:self.managedObjectContext];
    // Configure the request's entity, and optionally its predicate.
    NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"details" ascending:YES];
    NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:sortDescriptor, nil];
    [request setSortDescriptors:sortDescriptors];

    fetchedResultsController = [[NSFetchedResultsController alloc]
                                              initWithFetchRequest:request
                                              managedObjectContext:context
                                              sectionNameKeyPath:nil
                                              cacheName:nil];

    // SIGTRAP here

    NSError *error = nil;
    [fetchedResultsController performFetch:&error];

    if (![self.fetchedResultsController performFetch:&error]) {
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
    }
} 
```

就在我评论的地方。我不确定为什么会收到此错误。控制台没有给我任何东西。崩溃的细节只是一个 0__kill。

我想补充一点，当第一次加载带有这个函数的视图时，没有崩溃。但是当我转到另一个视图时，将一些对象添加到 Core Data，然后关闭该视图。我原来的观点（有问题的观点）突然抛出 SIGTRAP 错误。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T13:08:43.450

在您的代码中，您使用了对 的两个引用`NSManagedObjectContext`，

*   `context`（对于获取的结果控制器）和
*   `self.managedObjectContext`（对于获取请求的实体）。

您应该验证这些是否确实相同。无论如何，对 FRC 及其初始化获取请求使用相同的变量要好得多。

错误的另一个来源可能是您的排序描述符。检查它是否按预期在其他地方工作。

# linux - 找不到 gcc-arm-linux-gnueabi 命令

> ID：14180185
> 
> 赞同：32
> 
> 时间：2013-01-06T07:14:56.160
> 
> 标签：linux, ubuntu, gcc, arm, gnu

我正在尝试为 ubuntu 安装 gnu arm 工具链。我首先从 CodeSourcery 下载了 tar。但是，当我进入 bin 文件夹时，我无法运行任何二进制文件。我尝试过使用 ./ 和不使用并将其放入 PATH 中，它一直告诉我“找不到命令”，但文件就在我面前的文件夹中。然后我尝试了 sudo apt-get install gcc-arm-linux-gnueabi ，除非它说它已成功安装，但我无法使用 whereis gcc-arm-linux-gnueabi 找到它。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2015-11-02T09:02:08.620

固定，使用：

```
sudo apt-get install gcc-arm* 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-09-14T11:06:28.013

您是否在 64 位操作系统上编译？尝试：

```
sudo apt-get install ia32-libs 
```

尝试编译 Raspberry Pi 内核时，我遇到了同样的问题。我在 Ubuntu 12.04 64 位上进行交叉编译，工具链需要 ia32-libs 才能在 64 位系统上运行。

请参阅[http://hertaville.com/2012/09/28/development-environment-raspberry-pi-cross-compiler/](http://hertaville.com/2012/09/28/development-environment-raspberry-pi-cross-compiler/)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-01-06T08:37:13.987

`arm-none-linux-gnueabi-`CodeSourcery 约定是对所有可执行文件使用前缀，而不是`gcc-arm-linux-gnueabi`你提到的。因此，CodeSourcery gcc 的标准名称将是**`arm-none-linux-gnueabi-gcc`**.

安装 CodeSourcery G++ 后，需要将 CodeSourcery 目录添加到`PATH`.

通常，我更喜欢将 CodeSourcery 安装到类似`/opt/arm-2010q1`或类似的目录中。如果您不知道安装位置，您可以使用 找到它`locate arm-none-linux-gnueabi-gcc`，但是您可能需要强制更新您的定位数据库，`sudo updatedb`然后`locate`才能正常工作。

确定 CodeSourcery 的安装位置后，通过如下编辑将其添加到 PATH `~/.bashrc`：

```
PATH=/opt/arm-2010q1/bin:$PATH 
```

此外，定义是习惯性的，非常方便

```
CROSS_COMPILE=arm-none-linux-gnueabi- 
```

在您的 中`.bashrc`，因为`CROSS_COMPILE`已定义，大多数工具将自动使用适当的编译器进行 ARM 编译，而无需您做任何事情。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-01-06T09:13:15.940

如果您使用的是 64 位操作系统，那么您需要安装这些附加库。

```
sudo apt-get install lib32z1 lib32ncurses5 lib32bz2-1.0 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-08-17T18:17:00.450

尝试在 VM 下的 ubunto 14.04.03 **64bit上交叉编译树莓派内核时遇到相同的错误。**解决方案在[这里](http://ozzmaker.com/2012/11/26/how-to-cross-compile-the-kernel-for-the-raspberry-pi/)找到：

-在 Ubuntu 机器上安装用于交叉编译的软件包。

```
sudo apt-get install gcc-arm-linux-gnueabi make git-core ncurses-dev 
```

- 下载工具链

```
cd ~
git clone https://github.com/raspberrypi/tools 
```

- 将工具链添加到您的路径

```
PATH=$PATH:~/tools/arm-bcm2708/gcc-linaro-arm-linux-gnueabihf-raspbian:~/tools/arm-bcm2708/gcc-linaro-arm-linux-gnueabihf-raspbian-x64/bin 
```

注意路径命令中的 x64 版本

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2016-03-15T19:16:10.917

我也遇到了同样的问题并在安装以下依赖项后解决了它：

```
sudo apt-get install lib32z1-dev 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-02-28T12:51:08.323

如果您使用的是 ubuntu 或 debian 的 64 位版本（参见例如“cat /proc/version”），如果您克隆了，您应该简单地使用 64 位交叉编译器

```
git clone https://github.com/raspberrypi/tools 
```

然后64位工具在

```
tools/arm-bcm2708/gcc-linaro-arm-linux-gnueabihf-raspbian-x64 
```

将该目录用于 gcc-toolchain。此处提供了我遵循的有用的编译教程[构建和编译 Raspberry PI Kernel](http://sysprogs.com/VisualKernel/tutorials/raspberry/buildkernel/)（使用上面的 -x64 路径作为 ${CCPREFIX}）

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-09-05T17:34:44.870

它有点违反直觉。该工具链称为 gcc-arm-linux-gnueabi。要调用这些工具，请执行以下命令：**arm-linux-gnueabi-xxx**

其中 xxx 是**gcc**或**ar**或**ld**等

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-09-13T04:43:08.487

您已经在运行 x86_64 用户空间的机器上安装了为 i686 编译的工具链。

使用 i686 虚拟机。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-01-06T08:15:54.307

尝试以下命令：

```
which gcc-arm-linux-gnueabi 
```

该命令很可能安装在`/usr/bin`.

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-03-04T15:58:24.180

我不得不在 Ubuntu 中为 ARM 交叉编译 C 代码。这对我有用：

`$ sudo apt install gcc-arm-none-eabi`

后来在qemu模拟器上测试了一下

```
#Install qemu
sudo apt-get install qemu qemu-user-static qemu-system-arm

#Cross compile "helloworld.c"
$ arm-none-eabi-gcc --specs=rdimon.specs   -Wl,--start-group -lgcc -lc -lm -lrdimon -Wl,--end-group helloworld.c -o helloworld

#Run
qemu-arm-static helloworld 
```

# z-index - CSS - z-index:-1 闯入谷歌浏览器

> ID：14180192
> 
> 赞同：0
> 
> 时间：2013-01-06T07:16:52.913
> 
> 标签：z-index

基本上创建一个带有下拉菜单的网页，我按照教程编写。我的页面布局由 3 个单独的表格组成，其中 1 个用于标题/横幅，1 个用于下拉菜单，1 个用于正文/内容。

我首先遇到的问题是，当我滚动下拉菜单时，它会落在我的正文/内容表后面。我找到了一个解决方法，它包括 z-index:-1。这在 IE 中运行良好，但在 chrome 中对其进行测试后，它阻止了链接和 iframe 在内容/正文表上进行交互。

```
#bodytable {width:1100px;
        height:100%;
        margin:auto;
        position:relative;
        top:10px;
        z-index:-1;
        } 
```

完整的 .css 代码可以在这里找到：

[http://pastebin.com/T97JAjQ8](http://pastebin.com/T97JAjQ8)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T07:22:37.547

尝试给它们每个正的 z-index 值。显然，较高的数字将“在”另一个价值较小的数字之上。不是给表格“-1”，而是给它一些积极的东西，比如 10，并使下拉菜单“20”。您甚至可以将主体的 z-index 设置为 0 作为基线。

我还没有证实这一点，但可能是 chrome 不喜欢负 z-index 值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T07:39:27.593

提供负 z-index 会使您的元素位于 body 或 wrapper div 下，因此，当您单击事件发生在 body 标签而不是 table 标签上时，body 元素位于该表的顶部，因此阻止它们进行交互。您必须给出正的 z-index 值。元素的默认堆叠顺序由定义元素的位置确定。例如，如果在菜单 div 之后定义表，则表的 z-index 值将更大。您可以通过仅更改当前堆栈顺序来解决您的问题。只需将负值更改为正值即可。

```
element {
z-index:1;
} 
```

上面的代码会将目标元素设置在当前堆栈顺序之外的其他元素之上。

# wordpress - 为什么在我的 WordPress 网站上安装新主题后出现此错误？

> ID：14180208
> 
> 赞同：-1
> 
> 时间：2013-01-06T07:19:14.717
> 
> 标签：wordpress, wordpress-theming

我将此主题安装到一个新的 Wordpress 站点，现在我的主页上出现此错误：

> 警告：wpdb::prepare() 缺少参数 2，在第 21 行的 /home/content/63/10275663/html/wp-content/themes/welcome_inn/library/tfuse_framework/functions/core.php 中调用并在 / home/content/63/10275663/html/wp-includes/wp-db.php 在第 990 行

这是我安装的主题：http: [//themefuse.com/wp-themes-shop/welcome-inn/](http://themefuse.com/wp-themes-shop/welcome-inn/)

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T07:34:34.483

让我们剖析警告信息。需要注意的三件事；首先，生成警告的函数 (wpdb::prepare)，其次，错误发生的位置 ( `core.php`) 和行引用。让我们看一下 wpdb 类的文档。

这是[codex 上的 WPDB 类](http://codex.wordpress.org/Class_Reference/wpdb)。在这里搜索，您会看到该`prepare()`方法正是这样做的——准备查询。浏览文档，您会看到非常重要的一行。

> 请注意：从 3.5 开始，wpdb::prepare() 强制执行至少 2 个参数。

好的，这是你的错误。[这是一个包含更多信息的链接。](http://make.wordpress.org/core/2012/12/12/php-warning-missing-argument-2-for-wpdb-prepare/)

不用多说，我几乎可以保证这个主题没有更新到 3.5。我对您的建议是创建一个子主题并在警告消息中提到的行对文件进行调整。通过链接，您会看到它的`prepare()`工作原理是`sprintf`这样的，因此更改应该是微不足道的。这是一个例子：

`$wpdb->prepare( "SELECT * FROM table WHERE id = $id" );`

会变成：

`$wpdb->prepare( "SELECT * FROM table WHERE id = %d", $id );`

那应该让你理清头绪。提醒一下，不要直接编辑插件文件。这可能会破坏您将来升级主题的能力。

# javascript - Pagedown 转换之间的一切 tags

> ID：14180211
> 
> 赞同：1
> 
> 时间：2013-01-06T07:19:36.353
> 
> 标签：javascript, jquery, grails, markdown, pagedown

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T07:25:27.950

Here is the working code:

```
var converter = new Markdown.getSanitizingConverter();

$.each($('.myclass'),function(key,value){
    p = converter.makeHtml($(value).text());

    $(value).html("");
    $(value).append(p);
}); 
```

# node.js - 监听旧端口的 http 服务器

> ID：14180218
> 
> 赞同：0
> 
> 时间：2013-01-06T07:22:35.510
> 
> 标签：node.js, express, webmatrix

首先，我使用 webmatrix 安装了节点 js，并运行了一个示例节点 js 应用程序。该应用程序被分配了一个随机端口。`http://localhost:62369/`. 之后我安装了 express 模块。正如他们的文档中所说。我写，

```
var app = express();
app.get('/',function (req, res) {
    res.send('hello world!!');
})

app.listen(3000); 
```

然后我重新启动了服务器。启动的浏览器仍然指向`http://localhost:62369/`而不是端口 3000。而且`http://localhost:3000/`无法正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T07:37:55.850

确保您已将代码保存在文件中（用另一个编辑器打开它，也许您的编辑器有问题），关闭命令行窗口并再次打开它。尝试运行服务器。我确定问题不是因为节点或快递。尝试再次检查所有内容。

并且还使用命令行运行您的服务器：
`cd path/folder`
`node myFile`
我不知道您使用什么来运行服务器，但如果它是带有 UI 的东西（在您提到的评论中单击），它可以缓存您的代码或类似的东西。因此使用推荐行运行更安全。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T07:43:54.960

我建议您运行此代码，以便查看在使用 IDE 保存代码时是否有任何问题：

```
var app = express(),
    port = 4555;
app.get('/',function (req, res) {
    res.send('hello world!!');
})
console.log("Server is running on " + port);
app.listen(port); 
```

之后，您只需要更改`port`变量。如果您在控制台上运行此代码后评论您所看到的内容，这将很有帮助。

# scala - 使用 Netty 和 Scala 演员的异步 http 请求

> ID：14180232
> 
> 赞同：6
> 
> 时间：2013-01-06T07:25:11.223
> 
> 标签：scala, asynchronous, httprequest, netty, actor

# 使用 Netty 和 Scala 演员的异步 http 请求

嘿希望有人可以帮我解决这个问题。

我正在尝试使用 Scala Actors 和 Netty.io 库来获取异步 http 请求。（是的，我知道 Scala 演员正在被弃用，但这对我来说是一个学习练习）

我编写了一个`HttpRequestActor`以案例类 RequestPage(uri:URI) 形式接受消息的参与者。

当它接收到消息时，它会创建发出 http 请求所需的 Netty 对象，我基于 [ `HttpSnoopClient`] 中的大部分代码（http://static.netty.io/3.5/xref/org/jboss/netty/示例/http/snoop/HttpSnoopClient.html) 示例。

我创建了一个客户端并将当前的actor实例传递给我的实现，`ChannelPipelineFactory`它也将actor传递给我的实现`SimpleChannelUpstreamHandler`，在那里我覆盖了`messageReceived`函数。

Actor 实例作为侦听器传递，我使用`DefaultHttpRequest`该类创建一个请求并写入通道以发出请求。

`ChannelFuture`使用从写入通道返回的对象对参与者对象进行阻塞调用。当`messageRecieved`我的处理程序类的函数被调用时，我将 netty http 请求的响应解析为字符串，将带有响应内容的消息发送回 actor 并关闭通道。

未来完成后，我的代码尝试使用收到的 http 内容响应向调用参与者发送回复。

该代码有效，我能够得到回复，将其发送到我的演员实例，打印出内容并向正在使用的演员实例释放资源发送消息。

问题是当我测试它时，对actor的原始调用没有得到回复，线程只是保持打开状态。

## 代码示例 - HttpRequestActor

我的`HttpRequestActor`班级代码

```
 import scala.actors.Actor
import java.net.{InetSocketAddress,URI}
import org.jboss.netty.handler.codec.http._
import org.jboss.netty.bootstrap.ClientBootstrap
import org.jboss.netty.channel.Channel
import org.jboss.netty.channel._
import org.jboss.netty.channel.socket.nio.NioClientSocketChannelFactory
import org.jboss.netty.channel.group.DefaultChannelGroup
import java.util.concurrent.{Executors,CancellationException}
import org.jboss.netty.util.CharsetUtil
import scala.concurrent.{ Promise, Future }
import scala.concurrent.ExecutionContext.Implicits.global

/**
 * @author mebinum
 *
 */
class HttpRequestActor extends Actor {
    //initialize response with default uninitialized value
    private var resp:Response = _
    private val executor = Executors.newCachedThreadPool
    private val executor2 = Executors.newCachedThreadPool
    private val factory = new NioClientSocketChannelFactory(
                          executor,
                          executor2);

    private val allChannels = new DefaultChannelGroup("httpRequester")

    def act = loop {
        react {
            case RequestPage(uri) => requestUri(uri)
            case Reply(msg) => setResponse(Reply(msg))
            case NoReply => println("didnt get a reply");setResponse(NoReply)
            case NotReadable => println("got a reply but its not readable");setResponse(NotReadable)
            case ShutDown => shutDown()
        }
    }

    private def requestUri(uri:URI) = {

      makeChannel(uri) map {
          channel => {
              allChannels.add(channel)
              val request = new DefaultHttpRequest(HttpVersion.HTTP_1_1, HttpMethod.GET, uri.toString)
              request.setHeader(HttpHeaders.Names.HOST, uri.getHost())
              request.setHeader(HttpHeaders.Names.CONNECTION, HttpHeaders.Values.CLOSE)
              request.setHeader(HttpHeaders.Names.ACCEPT_ENCODING, HttpHeaders.Values.GZIP)

              val writeFuture = channel.write(request).awaitUninterruptibly()

              FutureReactor !? writeFuture match {
                  case future : ChannelFuture => {
                      future.addListener(new ChannelFutureListener() {
                          def operationComplete(future:ChannelFuture) {
                              // Perform post-closure operation
                              println("current response is " + resp)
                              sendResponse("look ma I finished")
                          }
                      })
                      future.getChannel().close()
                  }
              }

              this ! ShutDown
          }
      }
      //thread ends only if you send a reply from here
      //println("this is final sender " + sender)
      //reply("I am the true end")
    }

    private def makeChannel(uri:URI) = {
      val scheme = Some(uri.getScheme()).getOrElse("http")
      val host = Some(uri.getHost()).getOrElse("localhost")

      val port = Utils.getPort(uri.getPort, uri.getScheme)

      // Set up the event pipeline factory.
      val client = new ClientBootstrap(factory)
      client.setPipelineFactory(new PipelineFactory(this))

      //get the promised channel
      val channel = NettyFutureBridge(client.connect(new InetSocketAddress(host, port)))
      channel  
    }

    private def setResponse(aResponse:Response) = resp = aResponse

    private def sendResponse(msg:String) = {
      println("Sending the response " + msg)
      reply(resp)
    }

    private def shutDown() = {
        println("got a shutdown message")
        val groupFuture = allChannels.close().awaitUninterruptibly()
        factory.releaseExternalResources()
    }

    override def exceptionHandler = {
      case e : CancellationException => println("The request was cancelled"); throw e
      case tr: Throwable => println("An unknown exception happened " + tr.getCause()); throw tr
    }
}

trait Response
case class RequestPage(url:URI)

case class Reply(content:String) extends Response
case object NoReply extends Response
case object NotReadable extends Response
case object ShutDown

object FutureReactor extends Actor{
  def act = //loop {
      react {
        case future: ChannelFuture => {
            if (future.isCancelled) {
                throw new CancellationException()
            }
            if (!future.isSuccess()) {
                future.getCause().printStackTrace()
                throw future.getCause()
            }
            if(future.isSuccess() && future.isDone()){
                future.getChannel().getCloseFuture().awaitUninterruptibly()
                reply(future)
            }
        }
      }
    //}
  this.start
}

class ClientHandler(listener:Actor) extends SimpleChannelUpstreamHandler {

  override def exceptionCaught( ctx:ChannelHandlerContext, e:ExceptionEvent){
    e.getCause().printStackTrace()
    e.getChannel().close();
    throw e.getCause()
  }

  override def messageReceived(ctx:ChannelHandlerContext,  e:MessageEvent) = {
        var contentString = ""
        var httpResponse:Response =  null.asInstanceOf[Response]

        e.getMessage match {
          case (response: HttpResponse) if !response.isChunked => {
              println("STATUS: " + response.getStatus);
              println("VERSION: " + response.getProtocolVersion);
              println

              val content = response.getContent();
              if (content.readable()) {
                  contentString = content.toString(CharsetUtil.UTF_8)
                  httpResponse = Reply(contentString)
                  //notify actor

              }else{
                 httpResponse = NotReadable
              }
          }
          case chunk: HttpChunk if !chunk.isLast => {
            //get chunked content
            contentString = chunk.getContent().toString(CharsetUtil.UTF_8)
            httpResponse = Reply(contentString)
          }
          case _ => httpResponse = NoReply
        }
         println("sending actor my response")
         listener ! httpResponse
         println("closing the channel")
         e.getChannel().close()
         //send the close event

    }

}

class PipelineFactory(listener:Actor) extends ChannelPipelineFactory {

    def  getPipeline(): ChannelPipeline = {
            // Create a default pipeline implementation.
            val pipeline = org.jboss.netty.channel.Channels.pipeline()

            pipeline.addLast("codec", new HttpClientCodec())

            // Remove the following line if you don't want automatic content decompression.
            pipeline.addLast("inflater", new HttpContentDecompressor())

            // Uncomment the following line if you don't want to handle HttpChunks.
            //pipeline.addLast("aggregator", new HttpChunkAggregator(1048576))

            pipeline.addLast("decoder", new HttpRequestDecoder())
            //assign the handler
            pipeline.addLast("handler", new ClientHandler(listener))

            pipeline;
    }
}

object NettyFutureBridge { 
  import scala.concurrent.{ Promise, Future }
  import scala.util.Try
  import java.util.concurrent.CancellationException 
  import org.jboss.netty.channel.{ Channel, ChannelFuture, ChannelFutureListener }

  def apply(nettyFuture: ChannelFuture): Future[Channel] = { 
    val p = Promise[Channel]() 
    nettyFuture.addListener(new ChannelFutureListener { 
      def operationComplete(future: ChannelFuture): Unit = p complete Try( 
        if (future.isSuccess) {
          println("Success")
          future.getChannel
        }
        else if (future.isCancelled) {
          println("Was cancelled")
          throw new CancellationException 
        }

        else {
          future.getCause.printStackTrace()
          throw future.getCause
        })
    }) 
    p.future 
  }
} 
```

测试它的代码

```
val url = "http://hiverides.com"

test("Http Request Actor can recieve and react to message"){
    val actor = new HttpRequestActor()
    actor.start

    val response = actor !? new RequestPage(new URI(url)) 
    match {
      case Reply(msg) => {
          println("this is the reply response in test")
          assert(msg != "")
          println(msg)
        }
      case NoReply => println("Got No Reply")
      case NotReadable => println("Got a not Reachable")
      case None => println("Got a timeout")
      case s:Response => println("response string \n" + s)
      case x => {println("Got a value not sure what it is"); println(x);}

    }
  } 
```

使用的库： - Scala 2.9.2 - Netty.io 3.6.1.Final - Junit 4.7 - scalatest 1.8 - 我还使用[@viktorklang](https://twitter.com/viktorklang) NettyFutureBridge 对象[gist](https://gist.github.com/viktorklang%5d)为返回的 Channel 对象创建 Scala 未来

如何使用来自 Netty 的响应内容向参与者对象发送回复并结束线程？

任何帮助都感激不尽

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T00:14:34.953

我不知道 Scala，但我遇到了类似的问题。尝试指定响应的内容长度标头。

在普通的java中：

```
HttpRequest r = new DefaultHttpRequest(HttpVersion.HTTP_1_1, HttpMethod.POST, uri);
            ChannelBuffer buffer = ChannelBuffers.copiedBuffer(input);
            r.setHeader(HttpHeaders.Names.HOST, "host");
            r.setHeader(HttpHeaders.Names.CONTENT_TYPE, "application/octet-stream");
            r.setHeader(HttpHeaders.Names.CONTENT_LENGTH, buffer.readableBytes());
            r.setHeader(HttpHeaders.Names.CONNECTION, HttpHeaders.Values.CLOSE);
            r.setContent(buffer); 
```

否则服务器不知道何时从客户端完成内容，除非客户端关闭连接。

您也可以使用分块编码，但您必须自己实现分块编码（至少我不知道 Netty 中有一个库可以做到这一点）。

# php - 如何确保 PHP 生成的 JSON 中的所有键名都是字符串？

> ID：14180233
> 
> 赞同：1
> 
> 时间：2013-01-06T07:25:12.197
> 
> 标签：php, json

我有一个 PHP 脚本，它输出 JSON 数据，这些数据由浏览器中的 Javascript 以及 iPhone 和 Android 应用程序解析。

之前我发现PHP在将数组数据转换成JSON的时候，会把所有的数字值变成字符串，用双引号表示。因此，例如，`"id" : 1`将变为`"id" : "1"`. 这似乎混淆了一些接收 JSON 数据的 Javascript 函数，所以我在 PHP 中的 JSON 上运行了这个正则表达式，以确保数字不会变成字符串：

```
$JSONOutput = preg_replace('/"(-?\d+\.?\d*)"/', '$1', json_encode($JSONOutput)); 
```

但是，这也具有从键和值中删除双引号的效果，因此`1 : "first value"`变为`"1" : "first value"`. 事实证明这是一个问题，因为如果 JSON 键不是字符串，那么接收数据的 iPhone 应用程序就会抱怨。

所以，我想要做的是确保 JSON 中的所有值都保留为整数，但所有键都被制成字符串。有没有一种方法可以只在值上运行我上面的正则表达式？或者任何其他可以给我类似结果的过程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T07:33:31.663

> 有没有一种方法可以只在值上运行我上面的正则表达式？

你最好避免对字符串进行后处理*。*

> 之前我发现PHP在将数组数据转换成JSON的时候，会把所有的数字值变成字符串，用双引号表示。因此，例如，“id”：1 将变为“id”：“1”。

这里的答案是确保数字值确实是数字。如果您在期望数字的地方看到带有数字的字符串，那是因为 PHP 对象/数组中的值不是数字。这就是你需要解决的问题。

例如，这段代码：

```
<?php
    header('Content-Type: application/json');
    $x = array(
        "number" => 1,
        "string" => "2"
        );
    echo json_encode($x);
?> 
```

...完全正确地产生了这个输出：

```
{"number":1,"string":"2"} 
```

请注意 PHP 代码中真正是数字的值是如何在 JSON 中以数字形式出现的。

因此，与其对字符串进行后处理，不如更正您输入的数据`json_encode`。

* * *

在下面回复您的评论：

> 我知道我可以专门为键分配字符串名称，但是有问题的数组是通过一个不断附加数字的 while 循环自动生成的，并且这些数字用于计数操作，所以我认为这不适用于我的情况.

它没有丝毫区别。例如，这段代码：

```
<?php
    header('Content-Type: application/json');
    $x = array();
    for ($n = 1; $n < 5; ++$n) {
       $x["entry" . $n] = $n;
    }
    echo json_encode($x);
?> 
```

产生这个输出：

```
{"entry1":1,"entry2":2,"entry3":3,"entry4":4} 
```

再次注意，数字是*输入*中的数字，因此是输出中的数字。

另请注意，如果对象的*键*是数字，PHP 会正确处理它：

```
<?php
    header('Content-Type: application/json');
    $x = array();
    $x["foo"] = "bar";
    for ($n = 1; $n < 5; ++$n) {
       $x[$n] = $n * 2;
    }
    echo json_encode($x);
?> 
```

生产

```
{"foo":"bar","1":2,"2":4,"3":6,"4":8} 
```

# c# - MEF 目录为空

> ID：14180234
> 
> 赞同：1
> 
> 时间：2013-01-06T07:25:24.740
> 
> 标签：c#, wpf, mef

我正在使用 MEF 的 WPF 应用程序。但即使我运行下面的代码（作为代码中某个位置的测试代码片段），目录也总是空的。所有示例代码都做了同样的事情，它们工作正常。但我的不工作。我错过了一些我自己无法弄清楚的重要事情。所以，我需要一些帮助。

```
var catalog = new AggregateCatalog();        
var x = Assembly.GetExecutingAssembly().Location;

catalog.Catalogs.Add(
new DirectoryCatalog(
          Path.GetDirectoryName(
          Assembly.GetExecutingAssembly().Location)));
CompositionContainer container = new CompositionContainer(catalog); 
```

这是实际的场景代码。同一个解决方案中有 3 个项目。

1.  W PF 项目。
2.  扩展项目。
3.  合同项目。

扩展项目包含导出。而contract项目包含了W PF项目和Extension项目共享的接口。

```
[Export("LoginManager", typeof(IEmployeeLoginManager))]
public class LoginManager : IEmployeeLoginManager
{
    public EmployeeLoginModel LoginEmployee(String userName, string password) 
    {
        DEmployeeLoginManager employeeLoginManager = new DEmployeeLoginManager();
        return employeeLoginManager.LoginEmployee(userName, password);
    }
} 
```

此导出在 WPF 项目中使用如下，

```
public partial class LoginWindow
{
    public EmployeeLoginModel LoggedInEmployee;
    [Import("LoginManager",AllowDefault = true)]
    private IEmployeeLoginManager LoginManager;

    public LoginWindow()
    {
        InitializeComponent();

    }

    private void RadWindow_Closed_1(object sender, Telerik.Windows.Controls.WindowClosedEventArgs e)
    {
        Application.Current.Shutdown();
        Environment.Exit(0);
        return;
    }

    private void RadButton_Click_1(object sender, RoutedEventArgs e)
    {
        string passWord = PasswordText.Password;
        LoggedInEmployee.Password = passWord;

        var container = MEFLoader.GetMEFContainer();
        container.ComposeParts(this);
        EmployeeLoginModel employee= LoginManager.LoginEmployee(LoggedInEmployee.UserName, passWord);

        if (employee.LoginStatus == true) 
        {
            this.Close();
        }

    } 
```

PS：这是 MEFLoader 类：

```
public static class MEFLoader
{
    public static CompositionContainer GetMEFContainer() 
    {
        var catalog = new AggregateCatalog(new DirectoryCatalog("."), new AssemblyCatalog(Assembly.GetExecutingAssembly()));
        var container = new CompositionContainer(catalog);
        return container as CompositionContainer;
    }
} 
```

我是 MEF 的新手，我也很欣赏我的代码中的任何改进点。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T09:00:43.683

首先，我认为其他项目中位于相同解决方案中的部分由下面显示的代码片段自动识别。

```
 var catalog = new AggregateCatalog();         
catalog.Catalogs.Add(
new DirectoryCatalog(
          Path.GetDirectoryName(
          Assembly.GetExecutingAssembly().Location)));
CompositionContainer container = new CompositionContainer(catalog); 
```

但事实并非如此，我们必须手动将 dll 放入正在执行的项目 bin/debug 中（因为这是在调试模式下运行的）

或者你需要做的是，你必须将项目属性 => 构建事件 => 构建事件命令行更改为

```
copy $(TargetPath) $(SolutionDir)\[Your running application folder]\bin\Debug 
```

这将自动将必要的 dll 复制到正在执行的 bin。

或者您可以在项目属性=>构建=>输出路径中更改它，您可以将输出路径设置为执行项目的Debug文件夹。

# javascript - 带有远程脚本的 Django-Compressor (Google Maps API)

> ID：14180239
> 
> 赞同：2
> 
> 时间：2013-01-06T07:26:12.153
> 
> 标签：javascript, django, django-compressor

出于性能原因，我正在尝试将 django-compressor 集成到现有的 django 项目中。

我在根模板中的块周围添加了`{% compress css %}`标签`{% compress js %}`，其中所有 JS 和 CSS 脚本都包含在子模板中（即站点上的所有其他页面都在根模板中扩展这些块以放置其特定于页面的文件）。这在大多数情况下都可以正常工作，但是一个页面有一个带有 JS 标头的嵌入式 Google 地图：

```
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?libraries=weather&key={% include "google_maps_api_key" %}&sensor=false"> 
```

这会在渲染页面时触发异常：

```
Caught UncompressableFileError while rendering: 'http://maps.googleapis.com/maps/api/js?libraries=weather&key=MYAPIKEY&sensor=false' isn't accessible via COMPRESS_URL ('/media/') and can't be compressed 
```

有没有办法告诉 django-compressor 跳过这个脚本？有没有办法让它访问和压缩远程脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T19:13:01.273

No, AFAIK this is not possible (without modifying django-compressor quite heavily). The best solution, based on your description, would be to have separate blocks for local, compressable scripts and remote scripts, and have your child templates use those appropriately.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-04T18:28:36.633

技术上可行吗？是的...您可以将地图下载到您的资产文件夹，然后从那里压缩。

但是，这违反了 Google 的使用条款，并且可能会产生一些奇怪的边缘情况。更好的选择是将地图的标签移到 {% compress %} 调用之外。由于谷歌地图已经预压缩，并且托管在谷歌的快速 CDN 上，因此您的网页加载速度无论如何都会比您尝试自己提供服务的速度更快。

# twisted - Twisted：从另一个应用程序守护进程生成一个应用程序守护进程

> ID：14180241
> 
> 赞同：1
> 
> 时间：2013-01-06T07:26:25.503
> 
> 标签：twisted, twisted.application

我有一个由 twistd 启动的 Twisted 应用程序守护进程。该守护进程充当守护进程管理器来管理许多其他 Twisted 应用程序守护进程。我可以通过 TCP 向管理器发送一个“新”命令，并且管理器应该生成（分叉）另一个 Twisted 应用程序守护程序。我的问题是我该怎么做？在 fork 之后，我想我应该停止管理器的反应器循环，关闭打开的文件描述符（日志文件），然后运行新的 Twisted 应用程序守护程序。我想知道如何正确地做这些事情的细节。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T08:38:31.547

您应该使用反应器的`spawnProcess`方法。有关其使用的详细信息，请参阅[http://twistedmatrix.com/documents/current/core/howto/process.html](http://twistedmatrix.com/documents/current/core/howto/process.html)。

您不应该自己分叉或执行任何其他步骤。它们很难正确完成，并且`spawnProcess`已经为您完成了。

如果您对这些事情是如何完成的感到好奇，您可以浏览[各种](http://twistedmatrix.com/trac/browser/trunk/twisted/internet/posixbase.py) [实现](http://twistedmatrix.com/trac/browser/trunk/twisted/internet/_dumbwin32proc.py)。

# c++ - 这个初始化列表是如何使用虚拟类实现的？

> ID：14180243
> 
> 赞同：3
> 
> 时间：2013-01-06T07:28:18.843
> 
> 标签：c++, virtual

```
#include<iostream.h>  
class A{  
  public:  
        int i;  
            A(int j=3):i(j){}  
};  
class B:virtual public A{  
  public:  
        B(int j=2):A(j){}  
};  
class C:virtual public A{  
  public:  
        C(int j=1):A(j){}  
};  
class D:public B, public C {    
  public:  
        D(int j=0):A(j), B(j+1), C(j+2){}  
};

int main()  
{  
    D d;   
    cout<<d.i;  
    return 0;
} 
```

我无法理解最终输出如何为零。每次 j 以默认方式初始化为某个固定值时，如何将 D 类的构造函数中初始化的值传递给 A 类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T07:44:51.047

虚拟基继承的规则是：

**“层次结构中最派生的类必须构造一个虚拟基”**

在您的情况下，从最派生的类您 通过传递参数`D`显式调用构造函数，因此它将设置为。如规则中所述，虚拟基类仅通过大多数派生类构造，而通过中间层次结构的其他构造函数调用无效，因为它只构造一次。`A``0``i``0`

调用顺序为：

```
A(int)
B(int)
C(int) 
```

**好读：**
[为什么首先调用虚拟基类构造函数？](https://stackoverflow.com/questions/10536091/why-virtual-base-class-constructors-called-first)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T08:06:16.667

由于A是一个虚拟基类，它应该只被构造一次，所以不可能用不同的构造函数参数来创建它，C++编译器不得不选择一种创建基类的方式。

显而易见的问题是：使用哪一个？

规则是：在直接继承 A 的最派生类中指定的那个。

初始化顺序很简单：首先是 A（使用 D 构造函数初始化列表中的参数值），然后是 B（它是 D 的第一个祖先；它使用之前创建的 A 的实例），然后是 C（它共享同一个 A 实例)，最后是 D（它还与 B 和 C 共享相同的 A 对象）。

# ios - iOS中两个UITextView之间的填充

> ID：14180244
> 
> 赞同：0
> 
> 时间：2013-01-06T07:28:36.600
> 
> 标签：ios, uitextview, constraints

我正在处理 iOS6 的新约束。我有两个 UITextViews，它们之间有一个垂直间距。两个 UITextView 都是动态填充的，因此可以根据填充的内容量来更改高度。

发生的情况是，当在第一个 UITextView 中加载了太多数据时，它会超过第二个 UITextView 的顶部，该第二个 UITextView 位于其正下方。我确实在两者之间设置了一个约束，但它似乎忽略了它。我没有代码可以显示，因为它在故事板上。

不管填充了多少内容，是否有限制 to 视图之间的垂直空间？或者以前有没有人遇到过这种行为？

提前致谢！

杰里米

# python - Python，将列表传递给方法以进行迭代会产生实例类型的参数不可迭代？

> ID：14180246
> 
> 赞同：0
> 
> 时间：2013-01-06T07:29:03.530
> 
> 标签：python

**检查 pkg 名称是否已经在另一个填充有结构的列表中的方法：**

**例如**： test_pkg_list[] 将包含以下内容：

```
test_pkg_list[0]: 

name = git
version = 1.0
description = git package

test_pkg_list[1]:

name = opengl
version = 1.25
description = graphics

So on... 
```

所以我的目标是检查列表中是否有重复的名称。

```
def _pkg_exists_in_list(self, list, pkg_name):
        if len(list) >= 1:
            if any(pkg_name in item for item in list):
                return True 
            else:
                return False
        else:
            return False 
```

**我传入两个参数：**

```
test_pkg_list = [] #Note that this list does populate over time, at first its empty.
pkg_name = 'git'

#Call the method an pass the paramters
if self._pkg_exists_in_list(test_pkg_list, pkg_name) is False:
  #No duplicates found continue
else:
  #We found duplicate, stop. 
```

**我继续收到以下异常错误：**

```
argument of type 'instance' is not iterable 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T07:35:18.967

您的代码比它需要的复杂得多。

```
def _pkg_exists_in_list(self, the_list, pkg_name):
    return pkg_name in the_list 
```

原因如下：

```
def _pkg_exists_in_list(self, list, pkg_name):  # don't call it list; don't overwrite built-ins
        if len(list) >= 1:   # Unnecessary; [] resolves Boolean to False
            if any(pkg_name in item for item in list): # can just check if an item is in a list using the `in` statement; no need to match every string to every string
                return True # Can just return the evaluation of an expression; poor form to explicitly return True/False after if statement
            else:
                return False
    else:
        return False 
```

### 更新：

我想我应该指出，正如评论中所说的那样，`item in mylist`它与您的代码不完全相同`any(mystring in item for item in mylist)`，而是等同于，更详细地说，`any(mystring == item for item in mylist)`。但是，我猜您实际上的意思是`==`与`in`.

### 第二次更新：

虽然我喜欢**Alex**使用字典的想法，但可能没有必要。

```
import re
def _pkg_exists_in_list(self, the_list, pkg_name):
    return any(re.search(r'name = ' + pkg_name, item) for item in the_list) 
```

我想这只是一个更有效的问题。

### 更新 2.1：

我赢了。

```
C:\Users\JJ>python -m timeit -s "p = ['''name = git\nversion = 1.0\nd
escription = git package''', '''name = opengl\nversion = 1.25\ndescription = gra
phics''']; import re" "dictlist = []" "for item in p:" " d = {}" " for line in i
tem.splitlines():" "  k, v = line.split('=')" "  d[k.strip()] = v.strip()" " dic
tlist.append(d)" "any('git' == x['name'] for x in dictlist)"
100000 loops, best of 3: 5.38 usec per loop

C:\Users\JJ>python -m timeit -s "p = ['''name = git\nversion = 1.0\nd
escription = git package''', '''name = opengl\nversion = 1.25\ndescription = gra
phics''']; import re" "any(re.search(r'name = ' + 'git', item) for item in p)"
1000000 loops, best of 3: 1.36 usec per loop 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-06T08:13:04.307

我会将您的字符串列表转换为`dict`s 列表，然后使用以下内容进行搜索：

```
test_pkg_list = [
"""name = git
version = 1.0
description = git package""",

"""name = opengl
version = 1.25
description = graphics"""]

dictlist = []

# Turn into a list of dictionaries
for item in test_pkg_list:
    d = {}
    for line in item.splitlines():
        k, v = line.split('=')
        d[k.strip()] = v.strip()
    dictlist.append(d)

print dictlist
# [
#    {'version': '1.0', 'name': 'git', 'description': 'git package'}, 
#    {'version': '1.25', 'name': 'opengl', 'description': 'graphics'}
# ]

searchname = 'git'

# Now search by name
print any(searchname == x['name'] for x in dictlist) 
```

* * *

如果你不想转换成 dict 的麻烦，你可以做一些简单的事情：

```
>>> searchname = 'git'
>>> print any(searchname in line for line in test_pkg_list)
True
>>> searchname = 'empty'
>>> print any(searchname in line for line in test_pkg_list)
False
>>> searchname = 'version' # This is a problem
>>> print any(searchname in line for line in test_pkg_list)
True

# Or to ensure it only matches the name:
>>> print any('name = ' + searchname in line for line in test_pkg_list)
False
>>> searchname = 'git'
>>> print any('name = ' + searchname in line for line in test_pkg_list)
True
>>> searchname = 'version'
>>> print any('name = ' + searchname in line for line in test_pkg_list)
False 
```

* * *

或者您可以只提取名称：

```
for line in test_pkg_list:
    firstline = line.splitlines()[0]
    name = firstline.split('=')[1].strip()
    print name 
```

一条线：

```
>>> names = [line.splitlines()[0].split('=')[1].strip() for line in test_pkg_list]
['git', 'opengl'] 
```

然后比较：

```
>>> 'git' in names
True
>>> 'test' in names
False 
```

性能与使用`re`: (65% 的速度)相当

```
>>> timeit.timeit("any(re.search(r'name = ' + 'git', item) for item in p)", "p = ['''name = git\nversion = 1.0\ndescription = git package''', '''name = opengl\nversion = 1.25\ndescription = graphics''']; import re")
2.338025673656987

>>> timeit.timeit("'git' in [line.splitlines()[0].split('=')[1].strip() for line in p]", "p = ['''name = git\nversion = 1.0\ndescription = git package''', '''name = opengl\nversion = 1.25\ndescription = graphics''']")
3.5689878827767245 
```

# sql - 我有一张表，我需要在其中选择一列的最大值

> ID：14180250
> 
> 赞同：2
> 
> 时间：2013-01-06T07:29:42.783
> 
> 标签：sql

我找到了一些[特别](https://stackoverflow.com/questions/612231/how-can-i-select-rows-with-maxcolumn-value-distinct-by-another-column-in-sql)有帮助的解决方案，几乎让我到达那里，但我坚持最后一点。我现在需要做的就是能够指定要显示的 CarNumbers 的范围。

SQL可能更有意义......

```
SELECT sr.*  FROM StatusReport sr 
INNER JOIN (  SELECT CarNumber, MAX(StatusReportTime)  AS MaxDateTime
FROM StatusReport  GROUP BY CarNumber )  groupedsr ON sr.CarNumber =
groupedsr.CarNumber  AND sr.StatusReportTime = groupedsr.MaxDateTime 
```

我基本上希望能够添加以下行。

```
WHERE CarNumber BETWEEN '0' AND '3999' 
```

谁能帮帮我？

提前致谢，

麦克风

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T07:31:53.353

您可以在外部查询的末尾添加它，或者在子查询的末尾添加它，`GROUP BY`如下所示：

```
SELECT sr.*  
FROM StatusReport sr 
INNER JOIN 
(  
  SELECT CarNumber, MAX(StatusReportTime)  AS MaxDateTime
  FROM StatusReport  
  WHERE CarNumber BETWEEN '0' AND '3999'
  GROUP BY CarNumber 
)  groupedsr  ON sr.CarNumber        = groupedsr.CarNumber  
             AND sr.StatusReportTime = groupedsr.MaxDateTime; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T07:32:15.003

```
SELECT sr.*
FROM StatusReport sr
INNER JOIN
  (SELECT CarNumber,
          MAX(StatusReportTime) AS MaxDateTime
   FROM StatusReport
   WHERE CarNumber >0
   GROUP BY CarNumber) groupedsr ON sr.CarNumber = groupedsr.CarNumber
AND sr.StatusReportTime = groupedsr.MaxDateTime 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T07:54:28.190

你可以这样做..这将很容易理解并且会简化你的查询

```
 with tbl2 as
    (
    select tbl1.*,
    row_number() over (order by CarNumber) rtn 
    from 
    (select CarNumber, max(StatusReportTime) as MaxDateTime from [StatusReport] group by         
    CarNumber) as  tbl1
    )
    select  * from tbl2 where rtn between 0 and 3999 
```

# c# - 在列表中拖放，Windows 8 应用程序？

> ID：14180251
> 
> 赞同：0
> 
> 时间：2013-01-06T07:30:03.730
> 
> 标签：c#, list, xaml, windows-8, drag-and-drop

有没有关于如何在窗口 8 C# 列表（listview、listbox ...）中实现拖放的好的示例/教程？

我想要的是一种可编辑的“Iphone-list”体验，我可以轻松地重新排列列表中的项目。但我主要是找到 WinJS 的例子，我想有 ac# 的 win 8 例子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T23:30:15.073

如果您需要拖放到 ListView 或 GridView，请在 DataTemplate 上为实际项目触发 Drop 事件，而不是整个列表。然后你就可以知道它落在了哪个项目上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T09:09:21.017

首先，您必须启用**AllowDragDrop**属性。

然后写3个事件：

```
 private void myList_ItemDrag(object sender, ItemDragEventArgs e)
    {
        DoDragDrop(e.Item, DragDropEffects.Link);
    }

    private void myList_DragEnter(object sender, DragEventArgs e)
    {
        e.Effect = DragDropEffects.Link;
    }

    private void myList_DragDrop(object sender, DragEventArgs e)
    {
        // do whatever you need to reorder the list.
    } 
```

要获取已删除项目的索引：

```
Point cp = myList.PointToClient(new Point(e.X, e.Y));
ListViewItem dragToItem = myList.GetItemAt(cp.X, cp.Y);
int dropIndex = dragToItem.Index; 
```

# android - 应该如何解析这个 JSON 字符串以获取不同的字段

> ID：14180252
> 
> 赞同：0
> 
> 时间：2013-01-06T07:30:10.140
> 
> 标签：android, json, parsing

我从 Playstore 购买商品后收到了这个 JSON 字符串，当我尝试解析它时，我的代码中显然遗漏了一些东西。

```
PurchaseInfo:{"orderId":"12999763165555505758.1317333586444405",
    "packageName":"com.mypkgname.myapp",
    "productId":"monthly_purchase_01",
    "purchaseTime":1357456489000,
    "purchaseState":0,
    "purchaseToken":"yrynypfkdncvhlxdbypysvwz.AO-J1OxFkndfqkClAqbbYAOApkMgTG4VX9Ef0uNP0FIs9-xGrXivkbx3FNMA2yNU12K_sbvRGFcknVBTfisI-uZawCXLGlMX4v4Zw8GFOmS0Q6PIbiITTGqn5h1QbEB4Rv84sXdUJHP3B_UQfujZN7ADi9bm_N4_iA"} 
```

这是我用来尝试解析的代码片段

```
 try {

            JSONObject j1 = new JSONObject(tester1);             
                JSONArray mPurchInfo = j1.getJSONArray("PurchaseInfo");          

                int count = mPurchInfo.length();

                final String[] purchInfo = new String[count];
            JSONObject q1 = mPurchInfo.getJSONObject(0);

            purchInfo[0] = q1.getString("orderId");
                    purchInfo[1] = q1.getString("packageName");
                purchInfo[2] = q1.getString("productId");
                purchInfo[3] = q1.getString("purchaseTime");
                purchInfo[4] = q1.getString("purchaseState");
            purchInfo[5] = q1.getString("purchaseToken");
                orderID=purchInfo[0];

          } catch (JSONException e) {
                Log.e("Error","Yes");
          } 
```

当我在日志中看到最后一条日志语句时，我发现了一个错误，但我仍在尝试学习解析 JSON 字符串

我希望我至少很接近理想情况下我希望将字符串设置为 JSON 字符串中的所有值

订单ID = ?? 包名 = ?? 等等

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T07:41:43.283

> 从 Playstore 购买后，我收到了这个 JSON 字符串

如果这*真的*是你得到的，你需要联系他们并告诉他们修复他们的 API；该字符串不是有效的 JSON。它有两个问题：

1.  JSON 文档**必须**有一个对象或数组作为顶级项。引用的字符串`{`开头缺少 a 结尾缺少 a `}`。

2.  JSON 中的所有键都**必须**用双引号引起来。第一个，`PurchaseInfo`不是。

此外，您的代码正在执行此操作：

```
JSONArray mPurchInfo = j1.getJSONArray("PurchaseInfo"); 
```

...但如果它*是*有效的 JSON，`PurchaseInfo`它就不是一个数组，而是一个对象。

看了一下，如果你去掉`PurchaseInfo:`开头的那个，它是有效的。删除后，此行：

```
JSONObject j1 = new JSONObject(tester1); 
```

...将为您提供一个对象，您可以从中查询信息：

```
String orderId = j1.getString("orderId"); 
```

# java - Android：单击列表项后如何使用不同的参数调用 onCreate()？

> ID：14180254
> 
> 赞同：0
> 
> 时间：2013-01-06T07:30:18.990
> 
> 标签：java, android

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    String path = "/";
    ...

    list.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {

        }
    });

} 
```

我想在 OnItemClickListener 函数内再次调用 onCreate() ，但“路径”变量设置不同（基于点击的内容）。

我看了“Intent”课程，但对我没有多大帮助。我不确定要寻找什么。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T07:34:05.577

在 OnItemClick 你必须有这样的东西：

```
对象 curlistItem = list.getItemAtPosition(position);

```

要查看正在单击的项目，然后采取必要的措施。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T07:35:38.317

我认为您最好不要自己再次调用 onCreate 。您可以使用自己的方法进行初始化，例如 init(...)。

在 onCreate 中，您可以调用 init(...)，在单击侦听器中，您可以根据需要调用自己的 init(...) 方法。

# java - 为 JSON 数据建议初始化数组

> ID：14180255
> 
> 赞同：0
> 
> 时间：2013-01-06T07:30:32.957
> 
> 标签：java, android, arrays, json

我正在尝试将 JSON 中的数据 gotton 存储到普通的字符串数组中。问题是我似乎无法根据 JSON 数据的数量初始化数组大小。

现在我声明我自己的数组大小：

```
String[] path= new String[5]; 
```

这是 JSON 部分：

类加载路径扩展 AsyncTask {

```
 protected String doInBackground(String... args) {
        // Building Parameters
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        // getting JSON string from URL
        JSONObject json = jParser.makeHttpRequest(url_all_imageDB, "GET",params);

        try {
                JSONArray productObj = json.getJSONArray(TAG_IMAGEDB); // JSON Array

                // looping through All path
                for (int i = 0; i < productObj.length(); i++) {
                    JSONObject image = productObj.getJSONObject(i);
                                            path[i] = image.getString(TAG_PATH);
                }

            } else {
                displayPath.setText("No path");
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }

        return null;
    } 
```

所以我的目标是从 JSON.length() 获取数组大小。知道如何实现这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T07:38:25.630

根据 JSONArray 长度初始化 mStrings[ ] 数组大小为：

```
 String[] mStrings;  //<< Declare array as
        mStrings = new String[productObj.length()];  //<<initialize here

        for (int i = 0; i < productObj.length(); i++) {
            JSONObject image = productObj.getJSONObject(i);
            mStrings[i] = image.getString(TAG_PATH);
         } 
```

如果您使用`ArrayList`String Array 而不是从 Jsonobject 获取值，那很好：

```
 ArrayList<String> mStrings=new ArrayList<String>(;
        for (int i = 0; i < productObj.length(); i++) {
            JSONObject image = productObj.getJSONObject(i);

            mStrings.add(image.getString(TAG_PATH));
         } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-06T07:41:31.100

也许你可以使用 List 而不是 String 数组

# php - 使用 redbeanphp 对 yii 表单进行简单编码

> ID：14180257
> 
> 赞同：0
> 
> 时间：2013-01-06T07:31:03.337
> 
> 标签：php, mysql, yii

我是 yii 框架和 redbeanphp 的新手。我想使用 yii 框架和 redbeanphp 启动一个新的网站应用程序。

如何使用 yii 框架对用户输入表单进行采样，并使用 redbeanphp 编码进行更新、插入、删除？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T09:33:10.727

Redbeanphp 是一个很好的数据库结构和初始化工具，非常适合与不管理数据库的框架或您自己的简单框架一起使用。

考虑到 Yii 和 php Redbeanphp 一起使用，yii 已经很好地管理了 db，事实上如果你使用 redbeanphp，你将有以下缺点

*   您将无法使用 Yii 迁移（[在此处阅读更多信息](http://www.yiiframework.com/doc/guide/1.1/en/database.migration)）
*   如果您使用 yii 而不是基于 redbeanphp 的模式操作进行开发，那么使用 Yii 活动记录会更好。
*   Yii 内置的关系映射和数据访问有更多的功能（虽然一开始有点难以理解）

你会为了一个额外的优势而放弃这一切，我认为这不是 Yii 的一部分：无需设置任何配置。当您开始制作应用程序时，它确实节省了 5 分钟，但对我来说肯定不值得。

对你来说，我建议你也更多地探索 yii 迁移，并发现 redbeanphp 提供的东西已经以某种方式成为 yii 的一部分。

你不需要转储redbeanphp，你仍然可以将它用于你不想使用yii的应用程序，或者不能很好地管理数据库的框架，或者如果你通过集成其他框架来制作自己的框架。

# java - 布局方法在第一次执行后中断

> ID：14180259
> 
> 赞同：1
> 
> 时间：2013-01-06T07:32:02.770
> 
> 标签：java, swing, layout-manager, gridbaglayout

当该`addComponents()`方法运行一次时，我得到了所需的 JPanel 布局。但是，当里面的代码`addComponents()`被多次执行时，JPanel 的布局就完全错误了。有什么我似乎做错了吗？

```
public class DeleteStudent extends JPanel {

        public SearchPanel search = new SearchPanel();
        private final JButton deleteButton = new JButton("Delete from database");
        private GridBagConstraints cons = new GridBagConstraints();
        private final GridBagLayout gridBag = new GridBagLayout();

        public DeleteStudent() {
        super();
        setLayout(gridBag);
        setPreferredSize(new Dimension(400, 300));

        addComponents();
        addComponents(); //Method fails when run more than once!
        }

        public void addComponents() {
        cons.gridy = 1;
        cons.insets = new Insets(50, 0, 0, 0);
        gridBag.setConstraints(deleteButton, cons);

        removeAll();
        add(search);
        add(deleteButton);
        update();
        }

        private void update() {
        revalidate();
        repaint();
        } 
```

**截图**：

1次方法调用后的JPanel：http: [//img402.imageshack.us/img402/6409/oncer.png](http://img402.imageshack.us/img402/6409/oncer.png)

2 次方法调用后的 JPanel：http: [//imageshack.us/scaled/landing/254/twiced.png](http://imageshack.us/scaled/landing/254/twiced.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T07:47:06.483

添加到我的评论：

似乎问题是您在调用之前设置`JPanel`s`GridBagLayout`约束`removeAll()`应该在调用之后完成，`removeAll();`这样当我们添加新组件时，`LayoutManager`它仍然有效并且尚未重置为其默认值。

```
import java.awt.Dimension;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.Insets;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class Test {

    public Test() {
        createAndShowGui();
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new Test();
            }
        });
    }

    private void createAndShowGui() {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(new DeleteStudent());
        frame.pack();
        frame.setVisible(true);
    }
}

class DeleteStudent extends JPanel {

    public JPanel search = new JPanel() {//for testing
        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }
    };
    private final JButton deleteButton = new JButton("Delete from database");
    private GridBagConstraints cons = new GridBagConstraints();
    private final GridBagLayout gridBag = new GridBagLayout();

    public DeleteStudent() {
        super();
        setLayout(gridBag);

        addComponents();
        addComponents(); //Method fails when run more than once!
    }

    @Override
    public Dimension getPreferredSize() {
        return new Dimension(400, 300);
    }

    public void addComponents() {
        removeAll();//must call this before resetting Layout and adding new components

        cons.gridy = 1;
        cons.insets = new Insets(50, 0, 0, 0);
        gridBag.setConstraints(deleteButton, cons);

        add(search);
        add(deleteButton);
        update();
    }

    private void update() {
        revalidate();
        repaint();
    }
} 
```

# matlab - 根据条件从结构数组matlab中选择项目

> ID：14180274
> 
> 赞同：4
> 
> 时间：2013-01-06T07:35:40.777
> 
> 标签：matlab

我有一个名为`Lst`. 每个结构都具有以下形式：

```
Point (x,y)
Type (1-6) 
```

我想为每种类型获取单独的点数组。我怎么才能得到它？

```
Lst(Lst.Type==1); 
```

将不起作用，因为 Type 不是 的字段，`Lst`而是`Lst(i)`.

此外，有没有办法保存每个项目的索引或另一种方法，然后将它们再次组合到原始顺序？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-06T07:44:19.100

`L1 = Lst([Lst.Type]==1);`会给你where的子`L1`集。`Lst``Type == 1`

同样，您可以使用它`idx1 = find([Lst.Type]==1)`来记住您的索引。

**编辑**：上面使用`[]`运算符将​​字段元素聚合`Type`到`Lst`一个数组中。对于您的评论/问题，您也可以使用完全相同的运算符来获取`X`结构化数组子集的特定字段元素的数组，如

```
X1 = [Lst([Lst.Type]==1).X]; 
```

# android - 如何从 Android 片段更新 XML TextView？

> ID：14180277
> 
> 赞同：3
> 
> 时间：2013-01-06T07:36:22.477
> 
> 标签：android, android-fragments, textview

我正在尝试`TextView`从`FragmentActivity`. 在`else`语句中，我首先创建一个`Fragment`，然后使用属于片段`TextView`的`updateItemView()`方法更新，但我得到的只是一个空指针异常。

我可以更新`TextView`from the `if`statement 但为什么我不能更新`TextView` from the `else`statement？

这是的代码`FragmentActivity`：

```
public void toDeatailsBtn(View view){

    ItemFragment listFragment = (ItemFragment) getSupportFragmentManager()
    .findFragmentById(R.id.large_layout_list_item_fragment);

    if(listFragment != null){
        //The "if" code is working.
        listFragment.updateItemView();
    }

    // I'm swaping fragments here. I already added firstFragment to the
    //fragment_container FrameLayout in other code.
    else{
        ItemFragment secondFragment = new ItemFragment();
        FragmentTransaction transaction =
        getSupportFragmentManager().beginTransaction();
        transaction.replace(R.id.fragment_container, secondFragment);

        transaction.addToBackStack(null);
        transaction.commit();

        //This is giving me the null pointer exception, even though
        //secondFragment has been created in theory.
        secondFragment.updateItemView();
    }
} 
```

`Fragment`包含`updateItemView()` `Method`：_

```
public class ItemFragment extends Fragment {
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
    Bundle savedInstanceState) {
        return inflater.inflate(R.layout.item_fragment, container, false);
    }

    public void updateItemView(){
        TextView name = (TextView) getActivity()
        .findViewById(R.id.list_item_fragment);
        name.setText("TEST");
    }
} 
```

`TextView`：_

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal">

        <TextView
            android:id="@+id/list_item_fragment"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:freezesText="true" />
    </LinearLayout>
</ScrollView> 
```

最后`FrameLayout`我用来替换片段：

```
<FrameLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/fragment_container"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    tools:context=".MainFragmentActivity" /> 
```

错误日志：

```
01-06 00:59:08.425: E/AndroidRuntime(1610): java.lang.IllegalStateException: Could not execute method of the activity
01-06 00:59:08.425: E/AndroidRuntime(1610):     at android.view.View$1.onClick(View.java:3591)
01-06 00:59:08.425: E/AndroidRuntime(1610):     at android.view.View.performClick(View.java:4084)
01-06 00:59:08.425: E/AndroidRuntime(1610):     at android.view.View$PerformClick.run(View.java:16966)
01-06 00:59:08.425: E/AndroidRuntime(1610):     at android.os.Handler.handleCallback(Handler.java:615)
01-06 00:59:08.425: E/AndroidRuntime(1610):     at android.os.Handler.dispatchMessage(Handler.java:92)
01-06 00:59:08.425: E/AndroidRuntime(1610):     at android.os.Looper.loop(Looper.java:137)
01-06 00:59:08.425: E/AndroidRuntime(1610):     at android.app.ActivityThread.main(ActivityThread.java:4745)
01-06 00:59:08.425: E/AndroidRuntime(1610):     at java.lang.reflect.Method.invokeNative(Native Method)
01-06 00:59:08.425: E/AndroidRuntime(1610):     at java.lang.reflect.Method.invoke(Method.java:511)
01-06 00:59:08.425: E/AndroidRuntime(1610):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
01-06 00:59:08.425: E/AndroidRuntime(1610):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
01-06 00:59:08.425: E/AndroidRuntime(1610):     at dalvik.system.NativeStart.main(Native Method)
01-06 00:59:08.425: E/AndroidRuntime(1610): Caused by: java.lang.reflect.InvocationTargetException
01-06 00:59:08.425: E/AndroidRuntime(1610):     at java.lang.reflect.Method.invokeNative(Native Method)
01-06 00:59:08.425: E/AndroidRuntime(1610):     at java.lang.reflect.Method.invoke(Method.java:511)
01-06 00:59:08.425: E/AndroidRuntime(1610):     at android.view.View$1.onClick(View.java:3586)
01-06 00:59:08.425: E/AndroidRuntime(1610):     ... 11 more
01-06 00:59:08.425: E/AndroidRuntime(1610): Caused by: java.lang.NullPointerException
01-06 00:59:08.425: E/AndroidRuntime(1610):     at com.site.myapp.ItemFragment.updateItemView(ItemFragment.java:27)
01-06 00:59:08.425: E/AndroidRuntime(1610):     at com.site.myapp.MainFragmentActivity.toDetailsBtn(MainFragmentActivity.java:90)
01-06 00:59:08.425: E/AndroidRuntime(1610):     ... 14 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T07:51:49.690

当您调用 commit 时，该 Fragment 事务不会立即完成，因此`TextView`当您调用`updateItemView()`. 尝试使用[`FragmentManager.executePendingTransaction()`](http://developer.android.com/reference/android/app/FragmentManager.html#executePendingTransactions%28%29)强制进行交易：

```
//...
transaction.addToBackStack(null);
transaction.commit();
getSupportFragmentManager().executePendingTransaction();
secondFragment.updateItemView(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-25T09:55:49.797

在`myFragment`类中编写一个静态方法：

```
public static myFragment newInstance(String txt) {
        myFragment myfragment = new myFragment();

        Bundle args = new Bundle();
        args.putString("TEXT", txt);
        myfragment.setArguments(args);

        return myfragment;
    } 
```

之后在类的`OnCreate`方法中和`myFragment``inflate``textView tv`

```
tv.setText(getArguments().getString("TEXT")); 
```

在`FragmentActivity`主课上做：

```
myFragment fragment = myFragment.newInstance(textToBeSent); 
```

之前`replace`，

```
fragmentTransaction.replace(R.id.fr_dynamic, fragment);
fragmentTransaction.commit(); 
```

# javascript - 在 AngularJS 的控制器中从 JSON 调用一个值，以便我可以编辑它

> ID：14180282
> 
> 赞同：0
> 
> 时间：2013-01-06T07:37:13.607
> 
> 标签：javascript, json, controller, angularjs, timeline

我想知道是否有人可以在这里为我提供帮助。

我正在使用 JSON 文件使用 AngularJS 创建时间线。我已经能够弄清楚如何使用 HTML 绑定 ng-repeat 循环输出日期，但我需要编辑日期输出；重新格式化后，“2013-01-01”变为“2012 年 12 月 31 日”。

我一直在努力弄清楚如何在控制器中提取日期值，以便我可以将它应用到一个函数中，该函数将该值转换为正确的日期——通过在日期上添加另一天。

非常感谢你！我希望这是有道理的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T05:12:41.473

Javascript 自动本地化日期。角度过滤器`date`需要一个时区，如果没有提供时区，则假定为 UTC。问题是，一旦您的无时区（因此假定为 UTC）字符串本地化，它就不再是 2013-01-01，而是比您的时区少几个小时。在太平洋标准时间，这是-8。所以日期似乎是前一天。

来自服务器的数据*应该*有一个与之关联的时区——这只是最佳实践。没有它，假设 UTC 是一个不错的选择。毕竟，需要*一些*标准。

这是一个 Plunker，展示了一些如何工作的示例，如果您需要它们：[http ://plnkr.co/edit/Jhwnkj?p=preview](http://plnkr.co/edit/Jhwnkj?p=preview)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T23:06:56.147

在您的视图中使用 Angular 日期过滤器。您不必更改控制器中的任何值。这是给你的例子 [http://plnkr.co/edit/iqIpW5uADTRVFycDxdBa](http://plnkr.co/edit/iqIpW5uADTRVFycDxdBa)

阅读 AngularJS 日期过滤器。 [http://docs.angularjs.org/api/ng.filter:date](http://docs.angularjs.org/api/ng.filter:date)

# javascript - UncaughtTypeError：无法调用 null 的方法“getElementByTagName”

> ID：14180290
> 
> 赞同：0
> 
> 时间：2013-01-06T07:38:35.967
> 
> 标签：javascript, jquery, asp.net

我正在asp.net 中开发一个网站。我使用了一个用 RadioButton 编辑的 GridView。这是 GridView 的代码。随着这个 RadioButton GridView 正在从数据库中的表中获取值，它包含 3 列。

```
<asp:GridView ID="creditGridView" runat="server"  Width="500" Height="210px"  GridLines="None" CssClass="classGridView" >
                   <Columns>
                       <asp:TemplateField HeaderText="Pick One">
                           <ItemTemplate>
                               <asp:RadioButton ID="radBatId" runat="server" onclick= "javascript:CheckOtherIsCheckedByGVID(this);" />
                           </ItemTemplate>
                       </asp:TemplateField>
                   </Columns>
</asp:GridView> 
```

我使用 JavaScript 来实现功能，在 GridView 中一次选择一个 RadioButton。这是 JavaScript 代码：

```
function CheckOtherIsCheckedByGVID(rdBtn) {
        var currentRdBtnId = rdBtn.id;
        alert(currentRdBtnId);
        var parent = document.getElementById("<%=creditGridView.ClientID%>");

    var items = parent.getElementsByTagName("input");
    for (i = 0; i < items.length; i++) {
        if (items[i].id != currentRdBtnId && items[i].type == "radio") {
            if (items[i].checked) {
                items[i].checked = false;
            }
        }
        else {
            document.getElementById("<%=radioBtnIndex.ClientID%>").value = i;
        }
    }
} 
```

当我将此功能放在包含 GridView 的同一页面中时，它工作正常。当我将此函数放在单独的 JavaScript 文件中时，它显示错误

> UncaughtTypeError：无法调用 null 的方法“getElementByTagName”

这里变量 parent 正在获取 value `null`。即，`document.getElementById("<%=creditGridView.ClientID%>");`当函数不在同一页面中时，该语句未获取 GridView id。谁能帮我解决这个问题或给我另一种访问 GridView id 的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T08:21:13.947

您不能`<%=creditGridView.ClientID%>`在单独的 js 文件中使用表达式。如果这样的表达式只放在 aspx 页面上，它会在页面呈现期间评估并替换为计算值（例如，gridview 控件的客户端 ID）。但是由于 asp.net 没有处理单独的文件，所以它保持原样。您可以使用一些 css 类标记 GridView，并在单独的 js 文件中使用 css 类选择器来获取 GridView。

# c# - 从逗号分隔的列表或整数中解析枚举标志

> ID：14180291
> 
> 赞同：4
> 
> 时间：2013-01-06T07:38:41.483
> 
> 标签：c#, xml, enums, enum-flags, bitflags

我有一个包含多个标志的 XML，其中一些是无符号的 32 位整数，而另一些是无符号的 64 位整数。其中一些以逗号分隔的列表编写，而另一些则以十六进制样式编写。

看这个例子：

```
<Color>Blue,Red</Color>
<Color>0xC</Color> 
```

由于我不想编写解析每个枚举的方法，因此我决定使用通用方法。但是 Visual Studio 不允许我构建解决方案。这是我的方法：

```
public static T ParseFlags<T>(string value) where T : struct
{
    T result = (T)((object)0);
    string[] array;
    // Remove white spaces and delimit string if it is comma-separated
    if (ParseDelimitedString(value, ',', out array))
    {
        for (int i = 0; i < array.Length; i++)
        {
            T flag = (T)((object)0);
            // Check if value is member of enumeration
            if (Enum.TryParse<T>(array[i], out flag))
            {
                result |= (T)((object)flag);
            }
        }
    }
    else
    {
        switch (Type.GetTypeCode(Enum.GetUnderlyingType(typeof(T))))
        {
            // Remove hex characters and parse node's inner text
            case TypeCode.UInt32:
                result = (T)((object)ParseUint(value));
                break;
            case TypeCode.UInt64:
                result = (T)((object)ParseUlong(value));
                break;
        }
    }
    return result;
} 
```

我得到的错误信息是：

> 错误 1 ​​运算符“|=”不能应用于“T”和“T”类型的操作数

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-06T08:01:57.283

你正在做很多可以为你完成的工作。例如，如果您使用then`enum`声明，则会为您解析逗号分隔的值。`FlagsAttribute``Enum.Parse`

```
public static T ParseFlags<T>(string value) where T : struct
{
    T result;
    ulong temp;
    if (Enum.TryParse(value, out result))
    {
        return result;
    }

    string hexNum = value.StartsWith("0x") ? value.Substring(2) : value;
    if (ulong.TryParse(hexNum, NumberStyles.HexNumber, null, out temp))
    {
        return (T)Enum.ToObject(typeof(T), temp);
    }

    throw new ArgumentException("value could not be parsed");
} 
```

`short`我使用具有、`int`和`ulong`支持值的各种 Flags 枚举类型对此进行了测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-09T18:27:00.637

如果您知道要解析的枚举类型：

```
 [Fact]
    public void when_parsing_options_then_can_combine_flags()
    {
        var values = "Singleline | Compiled";

        var options = values.Split(new[] { '|' }, StringSplitOptions.RemoveEmptyEntries)
            .Select(value => (RegexOptions)Enum.Parse(typeof(RegexOptions), value))
            .Aggregate(RegexOptions.None, (current, value) => current |= value);

        Assert.Equal(RegexOptions.Singleline | RegexOptions.Compiled, options);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T08:01:34.727

试试这个：

```
public static T ParseFlags<T>(string value) where T : struct
{
    long result = 0L;
    string[] array;
    // Remove white spaces and delimit string if it is comma-separated
    if (ParseDelimitedString(value, ',', out array))
    {
        for (int i = 0; i < array.Length; i++)
        {
            T flag = default(T);
            // Check if value is member of enumeration
            if (Enum.TryParse<T>(array[i], out flag))
            {
                result |= (long)flag;
            }
        }
    }
    else
    {
        switch (Type.GetTypeCode(Enum.GetUnderlyingType(typeof(T))))
        {
            // Remove hex characters and parse node's inner text
            case TypeCode.UInt32:
                result = ParseUint(value);
                break;
            case TypeCode.UInt64:
                result = ParseUlong(value);
                break;
        }
    }
    return (T)((object)result);
} 
```

希望能帮助到你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T08:11:28.903

该片段中的“|=”用法使我认为您打算将枚举用作位集，而不仅仅是任何旧的枚举。如果这是真的，你应该做一个小的改变 - 将本地“结果”声明为 int 并适当地调整强制转换，那么你的返回语句应该是“返回 (T)(object)result;”。带有“|”的那一行 看起来像：“结果 |= (int)(object)flag;”。也许，有一个更好的答案，但请注意，[枚举是整数](http://msdn.microsoft.com/en-us/library/cc138362.aspx)，并且您的 bitset 方案已被此解决方案充分覆盖，除非有我错过的情况或您没有说明的情况。

# php - 如何使用准备好的语句绑定变量

> ID：14180292
> 
> 赞同：0
> 
> 时间：2013-01-06T07:38:41.807
> 
> 标签：php, pdo, prepared-statement

我在 html 中有一个表格，用户可以在其中单击一行，并将该行的数据属性传递给屏幕上加载的 PHP 文件。我希望这个 PHP 文件包含一些与传递的变量相关的数据。

例如，这是定义变量的简单 jQuery：

```
$(document).on('click', 'tr', function() {
    var id = $(this).attr("data-recordId");
    $('#section2').load('data_entry_form.php?id='+id);
}); 
```

这是旨在使用 id 变量并获取关联元素（根据 SQL 查询）的 PHP，其中 id = 到 fee_source_id。**PHP有什么问题？它不工作。**我想简单地回显/显示条件`fee_source_id = :id`为真的 SQL 查询的结果。

```
<html>
<form>
<?php

require_once 'config.php';

$dbh = new PDO($dsn, $dbuser, $dbpass);

$dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
$dbh->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);

$id = $_GET['id'];

$sth = $dbh->prepare('
    SELECT a_aif.aif_id,
      a_aif.fee_source_id,
      a_aif.company_name_per_sedar,
      a_aif.document_filing_date
    FROM  a_aif
    WHERE a_aif.fee_source_id = :id');
$sth->bindParam(':id', $id, PDO::PARAM_STR);
$sth->execute();

?>
</form>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T12:25:48.113

您将需要[**获取**](http://php.net/manual/en/pdostatement.fetch.php)结果集的行。然后回显您需要的字段。

如果您要返回数组，则使用 [**$.getJSON**](http://api.jquery.com/jQuery.getJSON/)而不是 $('#section2').load可能会有所帮助

```
$sth = $dbh->prepare('
        SELECT a_aif.aif_id,
          a_aif.fee_source_id,
          a_aif.company_name_per_sedar,
          a_aif.document_filing_date
        FROM  a_aif
        WHERE a_aif.fee_source_id = :id');
    $sth->bindParam(':id', $id, PDO::PARAM_STR);
    $sth->setFetchMode(PDO::FETCH_ASSOC);
    $sth->execute();
    $row  = $sth-> fetch(); // returns 1 row
    //$data[] = $row; Returns all of array 
    //$id = $row['id'];// Returns indivadual fiels in array

    echo $data; 
```

# java - C++ 版本的 java 这个。在课堂上

> ID：14180293
> 
> 赞同：0
> 
> 时间：2013-01-06T07:39:17.987
> 
> 标签：java, c++

> **可能重复：**
> [C++ 等价于 Java this](https://stackoverflow.com/questions/6905598/c-equivalent-to-java-this)

java的this的c++版本是什么。：

```
class javaObj{

private String name;

public void setName(String name)
{
    this.name = name;
}
} 
```

我发现在 c++ 中唯一有效的是：

```
class cppObj
{
private:
    string name;

public:
    void setName(string name);
};

void cppObj::setName(string name)
{
    cppObj::name = name;
} 
```

我必须使用 cppObj:: 还是有这个。相当于c++？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T07:40:42.160

C++ 等价于 Java 的 this 如下：

```
this->name = name; 
```

这篇[文章](https://stackoverflow.com/a/6905627/1055604)提出了另一种语法：

```
(*this).name = name; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T07:40:26.830

C++ 等价物[是**`this`**指针](http://en.cppreference.com/w/cpp/language/this)。

```
this->name = name; 
```

这种操作更常见的是执行以下操作：

```
void cppObj::setName(const string& name)
{
    name_ = name;
} 
```

其中成员变量带有下划线后缀，并且参数通过`const`引用传递（不复制 的值`string`）。这里没有歧义，`this`不需要指针。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T07:42:09.403

是的，C++ 有等价的`this`指针。等效代码是：

```
void cppObj::setName(string name)
{
    this->name = name;
} 
```

但是，您可以增强您的代码：

```
class cppObj
{
private:
    std::string name_;   // better naming style to distinguish class member with other variables

public:
    void setName(const std::string& name);  // pass by reference to elide the unnecessary copy
};

void cppObj::setName(const std::string& name)
{
    name_ = name;  // not necessary to have to use `this->` pointer syntax
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T07:46:02.587

像java，this，但是“->”而不是“.”；

*   [IBM C++ for AIX：this 指针（仅限 C++）](http://publib.boulder.ibm.com/infocenter/comphelp/v8v101/topic/com.ibm.xlcpp8a.doc/language/ref/cplr035.htm#cplr035)
*   [教程网站：C++ this 指针](http://login2win.blogspot.com.es/2008/05/c-this-pointer.html)

# eclipse - 为什么 TextView 不工作？

> ID：14180296
> 
> 赞同：0
> 
> 时间：2013-01-06T07:40:01.510
> 
> 标签：eclipse, android-intent, textview

我正在编写一个 android 程序，它使用两个简单的活动按字母顺序排列三个单词。但是在第二个（输出）活动中，TextView 或 Intents 都不起作用。输出没有显示。Java 代码对于第一个（输入）活动如下：`package com.example.names;

```
import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class Input extends Activity {
EditText t1,t2,t3;
final Context context=this;

String n[]=new String[100];
String t[]=new String[100];

String a1,a2,a3;
Button alpha;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.input);
    t1=(EditText)findViewById(R.id.editText1);
    t2=(EditText)findViewById(R.id.editText2);
    t3=(EditText)findViewById(R.id.editText3);
n[0]=t1.getText().toString();
n[1]=t2.getText().toString();
n[2]=t3.getText().toString();
for(int j=0;j<2;j++) 
    {
        for(int k=j+1;k<3;k++)
    {
    if(n[j].compareToIgnoreCase(n[k])>0)
        {
        String temp=n[j];
        n[j]=n[k];
        n[k]=temp;
        }
    }
    }
   a1=n[0];
    a2=n[1];
    a3=n[2];
   alpha=(Button)findViewById(R.id.button1);
   alpha.setOnClickListener(new OnClickListener() {

    public void onClick(View v) {
        // TODO Auto-generated method stub
        Intent i=new Intent(Input.this,Output.class);
        i.putExtra("x", a1+a2+a3);

           Toast.makeText(Input.this, "Method OnClick has been invoked",Toast.LENGTH_SHORT).show();
           startActivity(i);    
    }
});}}` 
```

第二个活动的java代码如下：

```
package com.example.names;

import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;
import android.widget.Toast;

public class Output extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

   TextView p1=new TextView(this);

   Bundle extras=getIntent().getExtras();

   if (extras!=null){
 String ans=extras.getString("x");
   p1.setText(ans);
   p1.setTextSize(50);
   Toast.makeText(Output.this, "All lines have been executed",Toast.LENGTH_LONG).show();
   setContentView(p1);

}};} 
```

为什么不显示输出呢？？？该应用程序也没有崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T05:58:05.987

使用以下代码更改您的代码。

单击按钮时获取edittext值。

您的输入活动看起来像这样。

```
public class Input extends Activity {
    EditText t1,t2,t3;
    final Context context=this;

    String n[]=new String[100];
    String t[]=new String[100];

    String a1,a2,a3;
    Button alpha;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.input);

        t1=(EditText)findViewById(R.id.editText1);
        t2=(EditText)findViewById(R.id.editText2);
        t3=(EditText)findViewById(R.id.editText3);

       alpha=(Button)findViewById(R.id.button1);
       alpha.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub

            n[0]=t1.getText().toString();
            n[1]=t2.getText().toString();
            n[2]=t3.getText().toString();
            for(int j=0;j<2;j++) 
                {
                    for(int k=j+1;k<3;k++)
                {
                if(n[j].compareToIgnoreCase(n[k])>0)
                    {
                    String temp=n[j];
                    n[j]=n[k];
                    n[k]=temp;

                    }
                }
                }
               a1=n[0];
                a2=n[1];
                a3=n[2];
            Intent i=new Intent(Input.this,Output.class);
            i.putExtra("x", a1+a2+a3);

               Toast.makeText(Input.this, "Method OnClick has been invoked",Toast.LENGTH_SHORT).show();
               startActivity(i);    
        }
    });}} 
```

您的输出活动很好，该活动没有任何变化。

# java - Java到mysql jdbc连接问题

> ID：14180301
> 
> 赞同：1
> 
> 时间：2013-01-06T07:40:40.963
> 
> 标签：java, mysql, database, jdbc, connection

我刚开始使用 java 小程序连接到 mysql 数据库。这是我第一次尝试这样做。

我研究了很多，也看过很多教程，但我仍然面临问题。由于我的 java 小程序进入浏览器，我确实对其进行了签名。我也一直在使用 jdbc，并且 jar 文件已正确导入到我的库中。

我也一直在使用 000webhost.com 并尝试从 IDE 和浏览器连接到数据库。我还请了两个朋友帮助我。其中一个不得不早点去，另一个不知道我哪里出错了。

这是我的代码： http: [//prntscr.com/oagfi](http://prntscr.com/oagfi)

![在此处输入图像描述](../Images/89fb4cf63438eb49c28fc8a7bd127c98.png)

我得出的结论是 DriverManager.getConnection(...) 给我带来了问题。

错误显示... [http://prntscr.com/oaetz](http://prntscr.com/oaetz)

![在此处输入图像描述](../Images/081783e58fd2c010209384659e85301e.png)

我也尝试查找原因，但仍然没有运气。

我能做些什么来解决这个问题吗？我很好奇这个原因意味着什么以及为什么我遇到麻烦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-22T13:56:21.393

如果您使用的是免费的 000webhost 帐户，那么您无法在主机帐户之外访问您的数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T09:24:20.807

从 Applet（如果我的记忆没有失败），您必须使用签名代码和/或您只能从 Applet 下载连接到远程主机......如果没有，则会引发安全异常。（小程序在受限/受限沙箱上运行）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-22T07:04:27.463

```
 /* RegistrationDAO*/

        /*
         * To change this template, choose Tools | Templates
         * and open the template in the editor.
         */
        package com.tcs.ignite.connectionname.DAO;

        import com.tcs.ignite.connectionname.bean.Register;
        import com.tcs.ignite.connectionname.util.Eyeconnection;
        import java.sql.Connection;
        import java.sql.PreparedStatement;
        import java.sql.ResultSet;

        public class RegisterDAO {
            private Connection connection;
             private connectionnamecon;

            public RegisterDAO() {
                con = new connectionname();
            }

            public boolean insertRecords(Register rg) throws Exception {

                connection = con.openConnection();

                String select="select * from register";
                PreparedStatement ps=connection.prepareStatement(select);
                ResultSet rs=ps.executeQuery();
                while(rs.next())
                {
                    String email=rs.getString("user_email");
                    if(rg.getUser_email().equals(email))
                    {
                        return false;
                     }
                }
               ps.close();

                String query = "insert into register(user_Fname,user_Lname,password,confirm_pass,contact_no,user_email,user_address,user_pincode) VALUES (?,?,?,?,?,?,?,?)";
                ps = connection.prepareStatement(query);

                ps.setString(1, rg.getUser_Fname());
                ps.setString(2, rg.getUser_Lname());
                ps.setString(3, rg.getPassword());
                ps.setString(4, rg.getConfirm_pass());
                ps.setString(5, rg.getContact_no());
                ps.setString(6, rg.getUser_email());
                ps.setString(7, rg.getUser_address());
                ps.setString(8,rg.getUser_pincode());

                int rowcount = ps.executeUpdate();
                con.closeConnection();
                if (rowcount == 0) {
                    return false;
                } else {
                    return true;
                }
            }
        }

    /*
    RegistrationManager*/
     */
    package com.tcs.ignite.connectionname.Manager;

    import com.tcs.ignite.connectionname.DAO.RegisterDAO;
    import com.tcs.ignite.connectionname.bean.Register;

    public class RegisterManager {
         public boolean insertManager(Register rg) throws Exception {

            RegisterDAO regdao = new RegisterDAO();
            boolean result = regdao.insertRecords(rg);
            if(result==true)
            {
                return true;
            }
            else
            {
                return false;
            }
        }

    }
 /*RegistrationServlet*/

     protected void doPost(HttpServletRequest request, HttpServletResponse response)
                throws ServletException, IOException {

            response.setContentType("text/html;charset=UTF-8");
            PrintWriter out = response.getWriter();
            try {

              Register reg=new Register();

              reg.setUser_Fname(request.getParameter("firstname"));
              reg.setUser_Lname(request.getParameter("lastname"));
              reg.setPassword(request.getParameter("password"));
              reg.setConfirm_pass(request.getParameter("confirm_password"));
              reg.setContact_no(request.getParameter("mobile"));
              reg.setUser_email(request.getParameter("email"));
              reg.setUser_address(request.getParameter("address"));
              reg.setUser_pincode(request.getParameter("pincode"));

              RegisterManager regManager=new RegisterManager();
              if(regManager.insertManager(reg)){
    //               RequestDispatcher requestDispatcher= request.getRequestDispatcher("TCSBLUE.jsp");
    //               requestDispatcher.forward(request, response);
                  HttpSession session = request.getSession(true);
                   session.setAttribute("loginid", reg.getUser_email());
                   //out.print(session.getAttribute("loginid"));
                  out.write("Successfully Registered...");
              }
              else
              {
    //              RequestDispatcher requestDispatcher= request.getRequestDispatcher("Error.jsp");
    //               requestDispatcher.forward(request, response);
                  out.write("Something is going wrong....");
              }
            }
            catch(Exception ex)
            {
                Logger.getLogger(Connection.class.getName()).log(Level.SEVERE, null, ex);
            }
            finally {            
                out.close();
            }

        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T07:48:41.967

检查`JDBC Connector`您正在使用的版本。以下链接也将帮助您做到`JDBC Connection`-

[将 Java 连接到 MySQL 数据库](https://stackoverflow.com/questions/2839321/java-connectivity-with-mysql/2840358#2840358)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-06T08:04:01.337

你在防火墙/代理服务器后面吗？如果是这样，它是否允许您使用的端口 3306 上的传出连接？这是我曾经遇到过的一个问题，我们的公司防火墙严重瘫痪，我们只能通过 http / https 端口进行交谈。

# objective-c - viewController insertSubview:atIndex

> ID：14180305
> 
> 赞同：1
> 
> 时间：2013-01-06T07:40:55.093
> 
> 标签：objective-c, ios, uiviewcontroller

我有 2 个 viewController，AViewController 内容底部有 3 个按钮，BViewController 内容有一个 tableView。在 AViewController 中单击一个按钮时`[aViewController insertSubview:bViewController.view atIndex:0]`，两个视图都正确显示，但是当我滚动 tableView 时，应用程序崩溃了。我有什么问题吗？

# java - 查找最大子数组的开始和结束索引

> ID：14180308
> 
> 赞同：16
> 
> 时间：2013-01-06T07:41:58.277
> 
> 标签：java

```
 public static void main(String[] args) {

        int arr[]= {0,-1,2,-3,5,9,-5,10};

        int max_ending_here=0;
        int max_so_far=0;
        int start =0;
        int end=0;

        for(int i=0;i< arr.length;i++)
        {
            max_ending_here=max_ending_here+arr[i];
            if(max_ending_here<0)
            {
                max_ending_here=0;
            }

            if(max_so_far<max_ending_here){

                max_so_far=max_ending_here;

            }

        }
        System.out.println(max_so_far);

    }

} 
```

这个程序生成子数组的最大总和..在这种情况下它的 19，使用 {5,9,-5,10}..现在我必须找到这个子数组的开始和结束索引..我该怎么做那 ？？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-06-25T00:30:57.463

这是一个解决这个问题的C程序。我认为所有语言的逻辑都是相同的，所以我发布了这个答案。

```
void findMaxSubArrayIndex(){          
        int n,*a;
        int start=0,end=0,curr_max=0,prev_max=0,start_o=0,i;

        scanf("%d",&n);
        a = (int*)malloc(sizeof(int)*n);
        for(i=0; i<n; i++)  scanf("%d",a+i);

        prev_max = a[0];

        for(i=0; i<n; i++){
            curr_max += a[i];
            if(curr_max < 0){
                start = i+1;
                curr_max = 0;
            }
            else if(curr_max > prev_max){
                end = i;
                start_o = start;
                prev_max = curr_max;
            }

        }

        printf("%d %d \n",start_o,end); 
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-11-29T21:42:19.063

修复 Carl Saldanha 解决方案：

```
 int max_ending_here = 0;
    int max_so_far = 0;
    int _start = 0;
    int start = 0;
    int end = -1;

    for(int i=0; i<array.length; i++) {
        max_ending_here = max_ending_here + array[i];
        if (max_ending_here < 0) {
            max_ending_here = 0;
            _start = i+1;
        }

        if (max_ending_here > max_so_far) {
            max_so_far = max_ending_here;
            start = _start;
            end = i;
        }
    } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-22T10:30:20.173

这是maxsubarray的算法：

```
public class MaxSubArray {

public static void main(String[] args) {
    int[] intArr={3, -1, -1, -1, -1, -1, 2, 0, 0, 0 };
    //int[] intArr = {-1, 3, -5, 4, 6, -1, 2, -7, 13, -3};
    //int[] intArr={-6,-2,-3,-4,-1,-5,-5};
    findMaxSubArray(intArr);
}

public static void findMaxSubArray(int[] inputArray){

    int maxStartIndex=0;
    int maxEndIndex=0;
    int maxSum = Integer.MIN_VALUE; 

    int cumulativeSum= 0;
    int maxStartIndexUntilNow=0;

    for (int currentIndex = 0; currentIndex < inputArray.length; currentIndex++) {

        int eachArrayItem = inputArray[currentIndex];

        cumulativeSum+=eachArrayItem;

        if(cumulativeSum>maxSum){
            maxSum = cumulativeSum;
            maxStartIndex=maxStartIndexUntilNow;
            maxEndIndex = currentIndex;
        }
        if (cumulativeSum<0){
            maxStartIndexUntilNow=currentIndex+1;
            cumulativeSum=0;
        }
    }

    System.out.println("Max sum         : "+maxSum);
    System.out.println("Max start index : "+maxStartIndex);
    System.out.println("Max end index   : "+maxEndIndex);
}

} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-09-03T09:25:11.580

这是 python 中的一个解决方案 - [Kadane 的算法](https://en.wikipedia.org/wiki/Maximum_subarray_problem)扩展为打印开始/结束索引

```
def max_subarray(array):
    max_so_far = max_ending_here = array[0]
    start_index = 0
    end_index = 0
    for i in range(1, len(array) -1):
        temp_start_index = temp_end_index = None
        if array[i] > (max_ending_here + array[i]):
            temp_start_index = temp_end_index = i
            max_ending_here = array[i]
        else:
            temp_end_index = i
            max_ending_here = max_ending_here + array[i]
        if max_so_far < max_ending_here:
            max_so_far = max_ending_here
            if temp_start_index != None:
                start_index = temp_start_index
            end_index = i
    print max_so_far, start_index, end_index

if __name__ == "__main__":
    array = [-2, 1, -3, 4, -1, 2, 1, 8, -5, 4]
    max_subarray(array) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-06T07:50:24.750

像这样

```
public static void main(String[] args) {

    int arr[]= {0,-1,2,-3,5,9,-5,10};

    int max_ending_here=0;
    int max_so_far=0;
    int start =0;
    int end=0;

    for(int i=0;i< arr.length;i++){
        max_ending_here=max_ending_here+arr[i];
        if(max_ending_here<0)
        {
            start=i+1; //Every time it goes negative start from next index
            max_ending_here=0;
        }
        else 
            end =i; //As long as its positive keep updating the end

        if(max_so_far<max_ending_here){
            max_so_far=max_ending_here;
        }

    }
    System.out.println(max_so_far);
} 
```

好的，正如 Steve P 所指出的，上述解决方案存在问题。这是另一个适用于所有人的解决方案

```
public static int[] compareSub(int arr[]){
    int start=-1;
    int end=-1;
    int max=0;
    if(arr.length>0){
        //Get that many array elements and compare all of them.
        //Then compare their max to the overall max
        start=0;end=0;max=arr[0];
        for(int arrSize=1;arrSize<arr.length;arrSize++){
            for(int i=0;i<arr.length-arrSize+1;i++){
                int potentialMax=sumOfSub(arr,i,i+arrSize);
                if(potentialMax>max){
                    max=potentialMax;
                    start=i;
                    end=i+arrSize-1;
                }           
            }       
        }

    }
    return new int[]{start,end,max};
}

public static int sumOfSub(int arr[],int start,int end){
    int sum=0;
    for(int i=start;i<end;i++)
        sum+=arr[i];
    return sum;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-06T08:13:26.820

这个问题有点不清楚，但我猜“子数组”是 arr 对象的一半。

一个蹩脚的方式来做到这一点

```
public int sum(int[] arr){
    int total = 0;
    for(int index : arr){
        total += index;
    }
    return total;
}

public void foo(){
    int arr[] = {0,-1,2,-3,5,9,-5,10};
    int subArr1[] = new int[(arr.length/2)];
    int subArr2[] = new int[(arr.length/2)];

    for(int i = 0; i < arr.length/2; i++){
    // Lazy hack, might want to double check this...
         subArr1[i] = arr[i];
         subArr2[i] = arr[((arr.length -1) -i)];
    }

    int sumArr1 = sum(subArr1);
    int sumArr2 = sum(subArr2);
} 
```

如果 arr 包含奇数个元素，我认为这可能不起作用。

如果您想获得更高级别的支持，请将原始数组转换为 List 对象

```
List<Integer> list = Arrays.asList(arr); 
```

这样您就可以访问集合对象功能。

另外，如果您有时间，请查看称为 reduce 的高阶函数。您将需要一个支持函数式编程的库。Guava 或 lambdaJ 可能有一个 reduce 方法。我知道 apache-commons 缺少一个，除非你想把它拼凑起来。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-03-25T18:13:59.610

我唯一需要添加的（这里发布的几个解决方案）是涵盖所有整数都是负数的情况，在这种情况下，最大子数组将只是最大元素。很容易做到这一点.. 只需在遍历它时跟踪最大元素和最大元素索引的索引。如果最大元素为负数，则返回它的索引。

还有可能处理溢出的情况。我已经看到算法测试考虑到了.. IE，假设 MAXINT 是元素之一，而你试图添加到它。我相信一些 Codility（编码面试筛选器）测试会考虑到这一点。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-05-11T14:42:04.360

### 在python中解决3个问题，即求和、数组元素和索引。

```
def max_sum_subarray(arr):

    current_sum = arr[0] 
    max_sum = arr[0]     

    curr_array = [arr[0]]
    final_array=[]
    s = 0
    start = 0
    e = 0
    end = 0

    for i in range(1,len(arr)):

        element = arr[i]

        if current_sum+element > element:
            curr_array.append(element)
            current_sum = current_sum+element
            e += 1
        else:
            curr_array = [element]
            current_sum = element
            s = i

        if current_sum > max_sum:
            final_array = curr_array[:]
            start = s
            end = e
            max_sum = current_sum

    print("Original given array is : ", arr)
    print("The array elements that are included in the sum are : ",final_array)
    print("The starting and ending index are {} and {} respectively.".format(start, end))
    print("The maximum sum is : ", max_sum)

# Driver code
arr = [-12, 15, -13, 14, -1, 2, 1, -5, 4]
max_sum_subarray(arr) 
```

*   奥姆·普拉萨德·纳亚克

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-07-15T10:44:25.817

```
public static void maxSubArray(int []arr){
    int sum=0,j=0;
    int temp[] = new int[arr.length]; 

    for(int i=0;i<arr.length;i++,j++){  
        sum  =  sum + arr[i];
        if(sum <= 0){
            sum =0;
            temp[j] = -1;
        }else{              
            temp[j] = i;                
        }
    }
    rollback(temp,arr);
}

public static void rollback(int [] temp , int[] arr){
    int s =0,start=0 ;
    int maxTillNow = 0,count =0;
    String str1 = "",str2="";
    System.out.println("============");
    // find the continuos index 
    for(int i=0;i<temp.length;i++){

        if(temp[i] != -1){
            s += arr[temp[i]];  
            if(s > maxTillNow){
                if(count == 0){
                    str1 = "" + start;
                }
                count++;
                maxTillNow = s;
                     str2 =  " " + temp[i]; 
            }
        }else{
            s=0;
            count =0;
            if(i != temp.length-1)
                start = temp[i+1];
        }

    }
    System.out.println("Max sum will be  ==== >> " + maxTillNow);
    System.out.print("start from ---> "+str1 + "  end to --- >>  " +str2);
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-12-19T07:18:02.490

```
 public void MaxSubArray(int[] arr)
    {
        int MaxSoFar = 0;
        int CurrentMax = 0;
        int ActualStart=0,TempStart=0,End = 0;

        for(int i =0 ; i<arr.Length;i++)
        {
            CurrentMax += arr[i];
            if(CurrentMax<0)
            {
                CurrentMax = 0;
                TempStart = i + 1;
            }
            if(MaxSoFar<CurrentMax)
            {
                MaxSoFar = CurrentMax;
                ActualStart = TempStart;
                End = i;
            }
        }
        Console.WriteLine(ActualStart.ToString()+End.ToString());
    } 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-03-01T00:27:20.813

C 中的 O(n) 解决方案是：-

```
void maxsumindex(int arr[], int len)
{
    int maxsum = INT_MIN, cur_sum = 0, start=0, end=0, max = INT_MIN, maxp = -1, flag = 0;
    for(int i=0;i<len;i++)
    {
        if(max < arr[i]){
            max = arr[i];
            maxp = i;
        }
        cur_sum += arr[i];
        if(cur_sum < 0)
        {
            cur_sum = 0;
            start = i+1;
        }
        else flag = 1;
        if(maxsum < cur_sum)
        {
            maxsum = cur_sum;
            end = i;
        }
    }
    //This is the case when all elements are negative
    if(flag == 0)
    {
        printf("Max sum subarray = {%d}\n",arr[maxp]);
        return;
    }
    printf("Max sum subarray = {");
    for(int i=start;i<=end;i++)
        printf("%d ",arr[i]);
    printf("}\n");
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-12-27T00:46:49.153

这是使用 Kadane 算法的 Go 解决方案

```
func maxSubArr(A []int) (int, int, int) {
    start, currStart, end, maxSum := 0, 0, 0, A[0]
    maxAtI := A[0]
    for i := 1; i < len(A); i++ {
        if maxAtI > 0 {
            maxAtI += A[i]

        } else {
            maxAtI = A[i]
            currStart = i
        }
        if maxAtI > maxSum {
            maxSum = maxAtI
            start = currStart
            end = i
        }
    }
    return start, end, maxSum
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-11-19T07:14:04.013

这是一个 C++ 解决方案。

```
void maxSubArraySum(int *a, int size) {
    int local_max = a[0];
    int global_max = a[0];
    int sum_so_far = a[0];
    int start = 0, end = 0;
    int tmp_start = 0;
    for (int i = 1; i < size; i++) {
        sum_so_far = a[i] + local_max;
        if (sum_so_far > a[i]) {
            local_max = sum_so_far;
        } else {
            tmp_start = i;
            local_max = a[i];
        }
        if (global_max < local_max) {
            global_max = local_max;
            start = tmp_start;
            end = i;
        }
    }
    cout<<"Start Index: "<<start<<endl;
    cout<<"End Index: "<<end<<endl;
    cout<<"Maximum Sum: "<<global_max<<endl;
}

int main() {
    int arr[] = {4, -3, -2, 2, 3, 1, -2, -3, 4,2, -6, -3, -1, 3, 1, 2};
    maxSubArraySum(arr, sizeof(arr)/sizeof(arr[0]));
    return 0;
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-04-24T07:26:01.130

```
pair<int,int> maxSumPair(vector<int> arr) {
int n = arr.size();`
int currSum = arr[0], maxSoFar = arr[0];
int start = 0, end ,prev = currSum;
    unordered_map<int,pair<int,int>> mp;
    for(int i = 1 ; i < n ; i++) {
        prev = currSum;
        if(currSum == arr[i]) {
            end = i-1;
            mp.insert({currSum,{start,end}});
            start = i;
        }
        if(maxSoFar < currSum) {
            maxSoFar = currSum;
            end = i;
            mp.insert({currSum,{start,end}});
        }
    }
    int maxSum = INT_MIN;
    for(auto it: mp) {
        if(it.first > maxSum) {
            maxSum = it.first;
        }
    }
    return mp[maxSum];
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-08-18T16:46:28.747

int maxSubarraySum(int arr[], int n){

```
 int max_so_far = -1 * Integer.MAX_VALUE;
    int max_curr = 0;
    int start = 0;
    int end = 0;

    for(int i=0; i < arr.length; i++){
        max_curr = max_curr + arr[i];
        if(max_so_far < max_curr){
            max_so_far = max_curr;
        }

        if( max_curr < 0){
          max_curr = 0;
          start = i+1;
        }
        else 
        end = i;
    }

    start = end < start ? end : start;
    System.out.println( start + "..." + end);
    return max_so_far;
} 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-11-04T05:57:07.600

golang实现中的最大子数组

```
package main

import (
    "fmt"
)

func main() {
    in := []int{-2, -12, 23, -10, 11, -6, -1}
    a, b := max(in)
    fmt.Println(a)
    fmt.Println(b)
}

func max(in []int) ([]int, int) {
    var p, r, sum, sf, psf int
    if len(in) == 0 {
        return in, 0
    }

    sum = in[0]

    for i, n := range in {
        sf += n
        if sf > sum {
            sum = sf
            p = psf
            r = i
        }

        if sf <= 0 {
            psf = i + 1
            sf = 0
        }
    }
    return in[p : r+1], sum
} 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2022-02-27T10:18:38.043

**我认为这将有助于获取开始和结束索引**

```
// Time Complexity = O(N)
// Space Complexity = O(1)
public static int maxSum2(int[] nums){
    int globalSum = Integer.MIN_VALUE;
    int currentSum = 0;
    int start=0;
    int end=0;
    for(int i=0; i<nums.length;i++){
        currentSum += nums[i];
        if (currentSum>globalSum){
            globalSum = currentSum;
            end = i;
        }
        if (currentSum<0){
            currentSum=0;
            start = i+1;
        }
    }
    System.out.println(start + " " + end);
    return globalSum;
} 
```

# javascript - 画布淡入/淡出功能无法按预期工作

> ID：14180309
> 
> 赞同：0
> 
> 时间：2013-01-06T07:42:02.863
> 
> 标签：javascript, html, canvas

所以我有这些功能来淡入淡出画布，但这些功能并没有按照我期望的方式工作。这是我目前正在使用的内容：

```
function fade_out ()
{
    var canvas = document.getElementById("builder");
    var context = canvas.getContext('2d');

    console.log(context.globalAlpha);

    context.globalAlpha -= 0.01;

    if(context.globalAlpha > 0)
    {
        setTimeout(fade_out, 5);
    }
}
function fade_in ()
{
    var canvas = document.getElementById("builder");
    var context = canvas.getContext('2d');

    context.globalAlpha += 0.01;

    if(context.globalAlpha < 1)
    {
        setTimeout(fade_in, 5);
    }
} 
```

我的意图是让它褪色半秒。我最终得到的是它只是一闪一闪地进进出出。第一个函数中的 console.log 告诉我它甚至还没有达到我期望的工作方式。这里出了什么问题？

编辑：似乎有一个无限循环，并且 context.globalAlpha 正在进入 20 位有效数字，即使我没有使用这样的数字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T07:44:20.720

```
function fade_in() {
setTimeout( function() {
  var cn = document.getElementById("builder");
  var ct = cn.getContext('2d').globalAlpha;
  ct += 0.02;
  if(ct >= 1) {
      ct=1;
  }
  if (ct < 1) {
    fade_in();
  }
  else {
    return false;
  }
}, 30);
}
function fade_out() {
setTimeout( function() {
  var cn = document.getElementById("builder");
  var ct = cn.getContext('2d').globalAlpha;
  ct -= 0.02;
  if(ct <= 0) {
      ct=0;
  }
  if (ct > 0) {
    fade_out();
  }
  else {
    return false;
  }
}, 30);
} 
```

# wpf - WPF用户控件属性初始化

> ID：14180311
> 
> 赞同：1
> 
> 时间：2013-01-06T07:42:11.380
> 
> 标签：wpf, user-controls, dependency-properties

我正在使用 WPF 用户控件并有以下问题：为什么在将属性设置为 a 之后属性初始化/赋值的行为会发生变化`DependencyProperty`？

让我简要说明一下：

考虑这个`UserControl`类的代码：

```
public partial class myUserControl : UserControl
{
    private string _blabla;
    public myUserControl()
    {
        InitializeComponent();
        _blabla = "init";
    }

    //public static DependencyProperty BlaBlaProperty = DependencyProperty.Register(
    //    "BlaBla", typeof(string), typeof(UserControlToolTip));

    public string BlaBla
    {
        get { return _blabla; }
        set { _blabla = value; }
    }
} 
```

这就是`UserControl`在 XAML 文件中初始化的方式：

```
<loc:myUserControl BlaBla="ddd" x:Name="myUsrCtrlName" /> 
```

我遇到的问题是行*set { _blabla = value; }*仅在注释掉*DependencyProperty声明时调用（根据此示例）。*但是，当*DependencyProperty*行成为程序的一部分时，*set { _blabla = value; }*行不再被系统调用。

有人可以向我解释这种奇怪的行为吗？

太感谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T08:50:14.800

依赖属性的 CLR 包装器（getter 和 setter）只能用于调用依赖属性的`GetValue`和`SetValue`方法。

例如

```
public string BlaBla
{
    get { return (string)GetValue(BlaBlaProperty) }
    set { SetValue(BlaBlaPropert, value); }
} 
```

仅此而已...
原因是 WPF 绑定引擎在从 XAML 完成绑定时***直接***`GetValue`调用和（例如，不调用 CLR 包装器）。 `SetValue`

 *因此，您没有看到它们被调用的原因是因为它们确实没有被调用，而这正是您不应该向 CLR Get 和 Set 方法添加任何逻辑的原因。

**编辑**
基于 OPs 评论 - 这是一个在`DependencyProperty`更改时创建回调方法的示例：

```
public static DependencyProperty BlaBlaProperty = 
       DependencyProperty.Register("BlaBla", typeof(string), Typeof(UserControlToolTip), 
       new FrameworkPropertyMetadata(null, OnBlachshmaPropertyChanged));

private static void OnBlachshmaPropertyChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
{
        UserControlToolTip owner = d as UserControlToolTip;

        if (owner != null)
        {
            // Place logic here
        }
 } 
```*

# core-data - 将新数据插入核心数据的空白行

> ID：14180312
> 
> 赞同：0
> 
> 时间：2013-01-06T07:42:47.030
> 
> 标签：core-data

我想将数据（字符串）添加到核心数据（iOS）中的空白行之一。你是怎样做的？

例如：我有一个 STUDENTS 实体，在该实体中有 3 个属性：索引、姓名、年龄。3个属性都填充了数据，假设它有10行数据。但是在索引 9 上，名称的属性没有数据（空格）。你如何填补这个空白？

我无法清楚地描述它，因为我还不能上传图片。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T09:50:44.073

您不应将其`Core Data`视为具有行和列的数据库。它是一个`Object Graph and Persistence framework`. 所以你处理对象（如行）和对象属性（如列）。因此，一旦您获取或创建了一些对象，您就可以设置它们的属性。

如果您还没有`NSManagedObject`从您的对象模型创建子类，那么您必须使用`KVC`访问器：

```
[student10 setValue:@"William" forKey:@"name"]; 
```

如果您确实创建了子类，则可以使用`Objective-C`属性。

```
student10.name = @"William"; 
```

我建议阅读更多有关`Core Data`Apple 文档的内容，以正确理解该框架。他们也有一些我认为的教程。

# jquery - 棘手的子选择器

> ID：14180315
> 
> 赞同：1
> 
> 时间：2013-01-06T07:43:10.763
> 
> 标签：jquery, html, selector

这是一个简单的问题，但我无法完成。我尝试了很多不同的方法，包括这些[http://api.jquery.com/child-selector/](http://api.jquery.com/child-selector/)

在这种情况下：

**HTML**

```
<div id="quiz_list_wrap"> 
    <div class="row">
        <div id=level>bla bla
        </div>
    </div>
</div> 
```

**jQuery**

```
$(document).on("click","#quiz_list_wrap .row",function(event){
    var self = $(this); // I need self for something else
    var varname = $(self > .level);
        alert(varname.html());
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T07:48:12.803

~~您的点击处理程序将永远不会被调用，因为选择器`"#quiz_list_wrap .row"`不匹配任何内容。该选择器查找具有 class的*后代*。但是您在示例 HTML 中拥有*自己*的类。`#quiz_list_wrap``row``#quiz_list_wrap` *`row`*~~ **（问题中的更新结构不再存在该问题。）**

 *另外，您已经给出了`div`an `id`。所以文档中只能有**其中之一**。要选择`div`，只需执行以下操作：

```
var levelDiv = $("#level"); 
```

如果您*只想*在它是您的元素的后代时找到它`#quiz_list_wrap`，并且只想在点击时找到它，您可以使用`find`：

```
$(document).on("click","#quiz_list_wrap",function(event){
// ------------------ note change -----^
    var levelDiv = $(this).find("#level");
}); 
```

现在，如果您的 HTML 实际上看起来像这样（我添加了一个子元素`row`并将`id`级别 div 更改为 a`class`以便您可以拥有多个）：

```
<div id="quiz_list_wrap"> 
    <div class="row">
        <div class=level>bla bla
        </div>
    </div>
</div> 
```

...然后您的点击处理程序将被您的原始选择器调用，并且您将在处理程序中使用`$(this).find("div.level")`（或只是`$(this).find(".level")`）来找到它。

最后，既然你说*子*选择器，我会提到`find`寻找任何后代（孩子，孙子等）。如果您*真的*只想看孩子，请`$(this).children("selector here")`改用。*

# bash - 选择字符串中的特定单词

> ID：14180321
> 
> 赞同：3
> 
> 时间：2013-01-06T07:44:16.250
> 
> 标签：bash

字符串（contents1）包含以下内容

> 755572 ZR66_op/Res7.fcp 755676 ZR66_op/Res-Edited-MP3-Files 755677 ZR66_op/Res-Files 756876 ZR66_op/Res-Edited-WAV-Files 758228 ZR67_op/Res5.fcp 758224 ZR67_alop/ResFile-Files /Res-Edited-文件

我只想将以下内容收集到字符串中（contents2）

> 755572 ZR66_op/Res7.fcp 755676 ZR66_op/Res-Edited-MP3-Files 755677 ZR66_op/Res-Files 756876 ZR66_op/Res-Edited-WAV-Files 758224 ZR66_op/Res-Original-Audio-Files

将`ZR66_op`是搜索元素

任何人都可以帮助我吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T10:29:20.530

您可以使用模式匹配：

```
#! /bin/bash
search=ZR66_op

contents1=755572\ ZR66_op/Res7.fcp\ \
755676\ ZR66_op/Res-Edited-MP3-Files\ \
755677\ ZR66_op/Res-Files\ \
756876\ ZR66_op/Res-Edited-WAV-Files\ \
758228\ ZR67_op/Res5.fcp\ \
758224\ ZR66_op/Res-Original-Audio-Files\ \
758225\ ZR67_op/Res-Edited-Files

ar=($contents1)

for (( i=0; i/2<=${#ar}; i+=2 )) ; do
    if [[ ${ar[i+1]} == "$search"* ]] ; then
        contents2+="${ar[i]} ${ar[i+1]} "
    fi
done

contents2=${contents2% } # Remove the extra space
echo "$contents2" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T17:01:20.167

当您使用以空格分隔的字符串时，并且您正在从字符串中提取固定大小的集合（对、三元组等）中的标记时，您可以使用“读取”将标记加载到变量中：

```
#! /bin/bash
contents1='755572 ZR66_op/Res7.fcp 755676 ZR66_op/Res-Edited-MP3-Files 755677 ZR66_op/Res-Files 756876 ZR66_op/Res-Edited-WAV-Files 758228 ZR67_op/Res5.fcp 758224 ZR66_op/Res-Original-Audio-Files 758225 ZR67_op/Res-Edited-Files'

search=ZR66_op

contents2=""
while read number filename
do
    if [[ $filename == "$search"* ]]
    then
        contents2="$contents2 $number $filename "
    fi
done <<< $contents1

echo $contents2 
```

# php - 基于自定义属性连接多个表

> ID：14180324
> 
> 赞同：1
> 
> 时间：2013-01-06T07:44:24.573
> 
> 标签：php, mysql, magento

我正在尝试在 Mage_Sales_Model_Resource_Report_Order_Createdat 中加入两个表，

```
$columns = array(
    // convert dates from UTC to current admin timezone
    'period'                         => $periodExpr,
    'store_id'                       => 'o.store_id',
    'order_status'                   => 'o.status',
    'orders_count'                   => new Zend_Db_Expr('COUNT(o.entity_id)'),
    'total_qty_ordered'              => new Zend_Db_Expr('SUM(oi.total_qty_ordered)'),
    'total_qty_invoiced'             => new Zend_Db_Expr('SUM(oi.total_qty_invoiced)'),
    'total_income_amount'            => new Zend_Db_Expr(
        sprintf('SUM((%s - %s) * %s)',
            $adapter->getIfNullSql('o.base_grand_total', 0),
            $adapter->getIfNullSql('o.base_total_canceled',0),
            $adapter->getIfNullSql('o.base_to_global_rate',0)
        )
    ),
    'total_revenue_amount'           => new Zend_Db_Expr(
        sprintf('SUM((%s - %s - %s - (%s - %s - %s)) * %s)',
            $adapter->getIfNullSql('o.base_total_invoiced', 0),
            $adapter->getIfNullSql('o.base_tax_invoiced', 0),
            $adapter->getIfNullSql('o.base_shipping_invoiced', 0),
            $adapter->getIfNullSql('o.base_total_refunded', 0),
            $adapter->getIfNullSql('o.base_tax_refunded', 0),
            $adapter->getIfNullSql('o.base_shipping_refunded', 0),
            $adapter->getIfNullSql('o.base_to_global_rate', 0)
        )
    ),
    'total_profit_amount'            => new Zend_Db_Expr(
        sprintf('SUM((%s - %s - %s - %s - %s) * %s)',
            $adapter->getIfNullSql('o.base_total_paid', 0),
            $adapter->getIfNullSql('o.base_total_refunded', 0),
            $adapter->getIfNullSql('o.base_tax_invoiced', 0),
            $adapter->getIfNullSql('o.base_shipping_invoiced', 0),
            $adapter->getIfNullSql('o.base_total_invoiced_cost', 0),
            $adapter->getIfNullSql('o.base_to_global_rate', 0)
        )
    ),
    'total_invoiced_amount'          => new Zend_Db_Expr(
        sprintf('SUM(%s * %s)',
            $adapter->getIfNullSql('o.base_total_invoiced', 0),
            $adapter->getIfNullSql('o.base_to_global_rate', 0)
        )
    ),
    'total_canceled_amount'          => new Zend_Db_Expr(
        sprintf('SUM(%s * %s)',
            $adapter->getIfNullSql('o.base_total_canceled', 0),
            $adapter->getIfNullSql('o.base_to_global_rate', 0)
        )
    ),
    'total_paid_amount'              => new Zend_Db_Expr(
        sprintf('SUM(%s * %s)',
            $adapter->getIfNullSql('o.base_total_paid', 0),
            $adapter->getIfNullSql('o.base_to_global_rate', 0)
        )
    ),
    'total_refunded_amount'          => new Zend_Db_Expr(
        sprintf('SUM(%s * %s)',
            $adapter->getIfNullSql('o.base_total_refunded', 0),
            $adapter->getIfNullSql('o.base_to_global_rate', 0)
        )
    ),
    'total_tax_amount'               => new Zend_Db_Expr(
        sprintf('SUM((%s - %s) * %s)',
            $adapter->getIfNullSql('o.base_tax_amount', 0),
            $adapter->getIfNullSql('o.base_tax_canceled', 0),
            $adapter->getIfNullSql('o.base_to_global_rate', 0)
        )
    ),
    'total_tax_amount_actual'        => new Zend_Db_Expr(
        sprintf('SUM((%s -%s) * %s)',
            $adapter->getIfNullSql('o.base_tax_invoiced', 0),
            $adapter->getIfNullSql('o.base_tax_refunded', 0),
            $adapter->getIfNullSql('o.base_to_global_rate', 0)
        )
    ),
    'total_shipping_amount'          => new Zend_Db_Expr(
        sprintf('SUM((%s - %s) * %s)',
            $adapter->getIfNullSql('o.base_shipping_amount', 0),
            $adapter->getIfNullSql('o.base_shipping_canceled', 0),
            $adapter->getIfNullSql('o.base_to_global_rate', 0)
        )
    ),
    'total_shipping_amount_actual'   => new Zend_Db_Expr(
        sprintf('SUM((%s - %s) * %s)',
            $adapter->getIfNullSql('o.base_shipping_invoiced', 0),
            $adapter->getIfNullSql('o.base_shipping_refunded', 0),
            $adapter->getIfNullSql('o.base_to_global_rate', 0)
        )
    ),
    'total_discount_amount'          => new Zend_Db_Expr(
        sprintf('SUM((ABS(%s) - %s) * %s)',
            $adapter->getIfNullSql('o.base_discount_amount', 0),
            $adapter->getIfNullSql('o.base_discount_canceled', 0),
            $adapter->getIfNullSql('o.base_to_global_rate', 0)
        )
    ),
    'total_discount_amount_actual'   => new Zend_Db_Expr(
        sprintf('SUM((%s - %s) * %s)',
            $adapter->getIfNullSql('o.base_discount_invoiced', 0),
            $adapter->getIfNullSql('o.base_discount_refunded', 0),
            $adapter->getIfNullSql('o.base_to_global_rate', 0)
        )
    )
);

$select          = $adapter->select();
$selectOrderItem = $adapter->select();

$qtyCanceledExpr = $adapter->getIfNullSql('qty_canceled', 0);
$cols            = array(
    'order_id'           => 'order_id',
    'total_qty_ordered'  => new Zend_Db_expr("SUM(qty_ordered - {$qtyCanceledExpr})"),
    'total_qty_invoiced' => new Zend_Db_expr('SUM(qty_invoiced)'),
);
$selectOrderItem->from($this->getTable('sales/order_item'), $cols)
    ->where('parent_item_id IS NULL')
    ->group('order_id');

$select->from(array('o' => $this->getTable('sales/order')), $columns)
    ->join(array('oi' => $selectOrderItem), 'oi.order_id = o.entity_id', array())
    ->where('o.state NOT IN (?)', array(
        Mage_Sales_Model_Order::STATE_PENDING_PAYMENT,
        Mage_Sales_Model_Order::STATE_NEW
    )); 
```

有人可以向我解释一下里面发生了什么：

```
$select->from(array('o' => $this->getTable('sales/order')), $columns)
    ->join(array('oi' => $selectOrderItem), 'oi.order_id = o.entity_id', array())
    ->where('o.state NOT IN (?)', array(
        Mage_Sales_Model_Order::STATE_PENDING_PAYMENT,
        Mage_Sales_Model_Order::STATE_NEW
    )); 
```

据我了解，sales/order_item 表正在与 sales/order 连接...（有人可以解释一下这种语法吗？）我正在尝试了解如何正确连接表，因为我需要将 sales/order_grid 与 sales/ 连接起来订购。

谢谢！

# c++ - 如何将“this”绑定到 C++ TR1 中的类函数？

> ID：14180328
> 
> 赞同：-1
> 
> 时间：2013-01-06T07:44:54.440
> 
> 标签：c++, tr1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T09:20:27.470

It's best to migrate from TR1, which is an informal proposal from 2006, to C++11, which incorporated most of TR1 verbatim (meaning that a TR1 program is probably converted C++11 if you just remove the `tr1::`s).

Although the interfaces are mostly the same, the TR1 implementation is separate. So it's basically frozen in time, and new compiler quirks might cause it to break. Or on other platforms, they might alias TR1 features forward to "native" C++11 meaning that `tr1::` classes might have differences from the actual TR1 spec.

On GCC, after removing `tr1::`, remove `tr1/` from the headers and pass `-std=c++11` on the command line.

# javascript - 函数完成前函数执行后的代码

> ID：14180330
> 
> 赞同：0
> 
> 时间：2013-01-06T07:45:09.607
> 
> 标签：javascript, jquery

至少我认为这是正在发生的事情。我在一个 .js 文件中有代码，它调用另一个 .js 文件中存在的函数。此函数对 php 页面进行 ajax 调用，该页面创建并返回一个选中的单选按钮列表。当函数返回时，将执行将所选单选按钮的值传递给 php 页面并生成更多列表的代码（再次通过 ajax）。每次用户更改选定的单选按钮时，列表都会更新。这在我通过单击选择它们时有效，但是，当页面加载时，选择了正确的单选按钮，但捕获所选单选按钮的代码返回未定义。当我在函数调用之后直接发出警报时，它可以正常工作。这让我相信事情正在无序执行。

我之前解决这个问题的方法是将代码放在第一个函数调用之后的函数中，并在第一个函数的末尾调用该函数。但是，这无助于我理解为什么会发生这种情况。这是代码：

第一个文件：

```
$(document).on("pageinit","#add_page",function(){
     restore_addreg_page();
     //alert('function finished');
     var selected_group = $('#group :checked').val();
} 
```

第二个文件：

```
function restore_addreg_page(){
    get_major_groups();
        ...more code
}
function get_major_groups(){
$.ajax({
    url: 'PHP_Scripts/get_major_groups.php',
    dataType: 'html',
    success: function(data){
        $('#major_groups').empty();
        $('#major_groups').append(data);
        $('#major_groups').trigger('create');
        $('input:radio').each(function(){
            if($(this).attr("id") == 'major_group0'){
                $(this).prop("checked",true).checkboxradio('refresh');
            }
        });
    },
    error: function(data){
        alert('Query Error');
    }
});
} 
```

如果我取消注释警报，则一切正常，否则 selected_group 未定义，之后的调用取决于该失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T08:16:11.890

在这里，您的函数在获得结果之前被返回。默认情况下 ajax() 调用是异步调用。要使其同步，请在 ajax() 中将 async 属性设置为 false，如图所示。

```
$.ajax({
...........
async: false,
.............. 
```

# php - PHP：使用缩短的 URL 解析内部文件路径

> ID：14180331
> 
> 赞同：3
> 
> 时间：2013-01-06T07:45:16.803
> 
> 标签：php, url-rewriting, url-shortener

## 我的文档根：

/var/www/project/templates/index.html
/var/www/project/templates/about.html
/var/www/project/templates/contact.html
/var/www/project/templates/press/2013/01 /01/mypresspost1
/var/www/project/templates/press/2013/01/02/mypresspost2
/var/www/project/templates/blog/2013/01/01/myblogpost1
/var/www/project/templates/blog /2013/01/02/myblogpost2

## 目标：

使用缩短的 URL 查找内部文件路径。
因此，如果我点击`mysite.com/myblogpost2`我实际上将加载`/blog/2013/01/02/myblogpost2`
我正在使用模板引擎，因此路径在前端变得可用，例如：`{include file="{$path}"}`

## 我的引导程序：

```
RewriteCond %{REQUEST_URI} !=/index.php
RewriteRule .* /index.php 
```

假设我已经有了`myblogpost2`从 URI 中获取字符串的方法。
现在这只是解决内部路径的问题，所以我可以设置`$path`

## 想法：

*我有几个想法，这些只是为了更好地说明我的问题。
最终我正在寻找最好的路线，所以欢迎任何建议。*

**使用来自平面文件的 JSON：**

```
{
    "myblogpost1":   {longpath:"/blog/2013/01/01/myblogpost1"},
    "myblogpost2":   {longpath:"/blog/2013/01/02/myblogpost2"}
}

$string = "myblogpost1";
$path = objJsonResp[$string]->longpath; 
```

**查询一张表：**

```
$path = SELECT longPath FROM shortUrls WHERE name = :name 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T12:30:58.820

由于您将拥有动态创建的条目，因此我将使用 mysql 表来执行此操作。在“别名”的创建中：

*   创建标题的别名，删除特殊字符等。空格到下划线...等
*   检查是否已经存在该字符串的别名
*   如果是这样，在最后放置一个-1，再次检查，如果它仍然存在，则增加数字直到找到一个唯一的。
*   保存别名和目标。
*   我认为您有一个唯一的 ID，因此请存储此 ID，因为您可能更改了日期并且目标 URL 与原来不同。
*   在 .htaccess 中，应该清楚您需要将所有传入请求重写到特定文件，该文件检查字符串是否为别名。
*   如果是这样，您从该“页面”获得了唯一 ID，那么您可以通过读取帖子的日期并使用此信息构建实际 url 来重定向位置标题。
*   会缓存这个“建立”，以免失去性能。

# ios5 - 如何在 box2d 中移动 PhysicsSprite

> ID：14180337
> 
> 赞同：0
> 
> 时间：2013-01-06T07:46:01.133
> 
> 标签：ios5, box2d-iphone, physics-engine

我有一个运动学身体类型的physicsSprite，我想将身体和精灵向下移动并返回到它的位置。我尝试过这样的内部更新方法：

```
for (NSValue *bodyValue in [self getGoalPostBodiesList])
                          {
                              b2Body *gPBody = (b2Body *)[bodyValue pointerValue];

                          PhysicsSprite *pSprite =(PhysicsSprite *) gPBody->GetUserData();
                          NSLog(@"\n tag value of Sprite = %d",pSprite.tag);
                          if(pSprite == goal1)
                          {
                              pSprite.position = CGPointMake((gPBody->GetPosition().x)*32.0,(gPBody->GetPosition().y)*32.0);
                              float angle = gPBody->GetAngle();
                              pSprite.rotation = -(CC_RADIANS_TO_DEGREES(angle));

                              id moveDownAction = [CCMoveTo actionWithDuration:0.5 position:CGPointMake(pSprite.position.x,(pSprite.position.y )- 40)];
                              id moveUpAction = [CCMoveTo actionWithDuration:0.5 position:CGPointMake(pSprite.position.x,(pSprite.position.y )+ 40)];
                              CCSequence *seqAction = [CCSequence actions:moveDownAction,moveUpAction, nil];
                              [pSprite runAction:seqAction];                         

                              b2Vec2 pos = b2Vec2(pSprite.position.x/32.0, pSprite.position.y/32.0);
                              gPBody->SetTransform(pos, CC_DEGREES_TO_RADIANS(pSprite.rotation));
                              gPBody->SetLinearVelocity(b2Vec2(0.0f, 0.0f));
                              gPBody->SetAngularVelocity(0.0f);

    }
   } 
```

精灵仍然没有改变它的位置。任何人的帮助将不胜感激。

谢谢大家，

莫尼什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T08:07:53.823

总结一下您的代码，您更新精灵的位置以反映身体的位置，启动动画，然后更新身体的位置以对应于精灵的位置。所以很自然，这里什么都不应该移动，因为你的`CCMoveTo`动作还没有对你的精灵产生任何影响。

其次，您的更新方法可能会被非常频繁地调用，例如每秒数十次，因此动画会不断重置并且不会产生任何可见的进度。

为了遵循一致的模式，您如何设置运动机构的速度。此外，更新精灵的位置以对应于这些身体，就像你对动态身体所做的那样，但*不要*将你的身体的变换设置为对应于它们的精灵。

# c - Max Macro 的安全解决方案？

> ID：14180338
> 
> 赞同：0
> 
> 时间：2013-01-06T07:46:01.513
> 
> 标签：c, macros

我们都知道这个著名的宏示例：

```
#define max(a,b) ((a) > (b) ? (a) : (b)) 
```

而且，由于它使用`a`and`b`两次，所以当我们执行以下操作时它变得不准确：

```
max(x, y++); // because this gets translated to...
((x) > (y++) ? (x) : (y++)); // y is incremented twice 
```

在*Effective C++*`inline`中，Scott Meyers 提出了一个使用函数的 C++ 解决方案。

在*21st Century C*中，我希望有一个类似的 C 解决方案，但遗憾的是，它所建议的只是避免重复使用。这让我很难过。:'(

当然，总是可以用常规函数替换它。但我想知道是否有一个仅限 C 的宏解决方案来解决双重使用问题。**任何可能的解决方案？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T08:25:40.343

在 GCC 的情况下，您可以使用[typeof](http://gcc.gnu.org/onlinedocs/gcc/Typeof.html)扩展，如下所示：

```
#define max(a,b) \
    ({ typeof (a) _a = (a); \
        typeof (b) _b = (b); \
        _a > _b ? _a : _b; }) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-06T08:10:59.013

让你松了一口气，C`inline`自 C99 起就有了功能。

# c# - 检查相似的字符串

> ID：14180340
> 
> 赞同：-3
> 
> 时间：2013-01-06T07:46:10.610
> 
> 标签：c#, string

我正在尝试在**没有包含方法的情况下**检查一个“错误”字符范围内的相似单词的文本，以便：“cat”= *cat,c*at,ca*t,cat*。我的代码是。

这是一个例子：

```
string s = "the cat is here with the cagt";
int count;

string[] words = s.Split(' ');
foreach (var item in words)
{
    if(///check for "cat")
    {
        count++;
        return count; (will return 2)
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T08:19:23.157

这会做你不想要的，但我仍然认为 SpellCheck 库将是要走的路

```
string wordToFind = "cat";
string sentance = "the cat is here with the cagt";
int count = 0;

foreach (var word in sentance.Split(' '))
{
    if (word.Equals(wordToFind, StringComparison.OrdinalIgnoreCase))
    {
        count++;
        continue;
    }
    foreach (var chr in word)
    {
        if (word.Replace(chr.ToString(), "").Equals(wordToFind, StringComparison.OrdinalIgnoreCase))
        {
            count++;
        }
    }
}

// returns 2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T08:13:15.360

可能，您可以使用正则表达式进行查找匹配。

[正则表达式类 MSDN](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.aspx)

[C# 正则表达式](http://www.dotnetperls.com/regex)

[30 分钟正则表达式教程](http://www.codeproject.com/Articles/9099/The-30-Minute-Regex-Tutorial)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T09:22:04.840

这是简单而正确但缓慢的：

```
static bool EqualsExceptOneExtraChar(string goodStr, string strWithOneExtraChar)
{
  if (strWithOneExtraChar.Length != goodStr.Length + 1)
    return false;
  for (int i = 0; i < strWithOneExtraChar.Length; ++i)
  {
    if (strWithOneExtraChar.Remove(i, 1) == goodStr)
      return true;
  }
  return false;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T07:54:16.667

正则表达式可能是最好的解决方案。但也试试这个。

```
String str = yourstring;
String s1 = 'cat';
 int cat1 = yourstring.IndexOf(s1,0); 
```

# wcf - Azure（网站）Web 角色项目中的动态 WCF 服务 URL 更新

> ID：14180341
> 
> 赞同：0
> 
> 时间：2013-01-06T07:46:20.127
> 
> 标签：wcf, azure, webrole

我有一个带有 2 个 Web 角色（一个 Azure 网站项目和一个 Azure WCF 服务角色）的 Azure 项目。WCF 服务由 Azure 网站项目使用，并使用“添加服务引用”选项进行引用。该网站使用 web.config 中定义的 URL 连接到 WCF 服务，该服务在本地开发/Azure 计算模拟器中运行良好。在我的本地开发机器上，当我运行解决方案时，服务和网站会在 IIS Express 中加载并执行，URL 为“http://127.0.0.1:8080/v1.svc”和“http://127.0.分别为 0.1:81/"。

但是，当我在 Azure 云服务上发布应用程序时，它分别为网站和服务创建了一个单独的机器/VM/实例（因为它们被视为两个不同的角色）。

现在我的问题是，由于 Azure 在运行时为实例分配 IP，我应该如何动态更改（在网站的 web.config 中）中的 URL 并更新 WCF 服务以使网站能够无缝地使用 WCF 服务？

珍惜你的时间。

谢谢，卡蒂克。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T05:17:49.237

感谢您的答复。我尝试了解决方案，但收到 404 错误。在我的情况下，webrole 名称是“TimeSheetUI”，当我尝试使用“timesheetui.cloudapp.net:8080”访问该服务时，它会引发 404 错误。但是，如果我尝试使用[http://e214d16594be4e31abfbf0488b5d612b.cloudapp.net:8080/timesheetservices.svc](http://e214d16594be4e31abfbf0488b5d612b.cloudapp.net:8080/timesheetservices.svc)访问它，它可以工作。我希望我不需要添加任何带有 DNS 等的 CNAME 条目来使其工作。

但是，我尝试使用编程选项在运行时构建 URL，并将服务端点的类型选项设置为“内部”。

```
var endpoints = RoleEnvironment.Roles["TimeSheetService"].Instances.Select(i => i.InstanceEndpoints["TimeSheetService.EndPoint"]).ToArray();
var r = new Random();
EndpointAddress endPointAddress = new EndpointAddress(String.Format("http://{0}/TimeSheetService.svc", endpoints[r.Next(endpoints.Count() - 1)].IPEndpoint));
var factory = new ChannelFactory<TimeSheetProxy.ITimeSheet>("BasicHttpBinding_ITimeSheet");var client = factory.CreateChannel(endPointAddress);TimeSheetUI.TimeSheetProxy.TimeSheet[] ts = client.DisplayTimeSheets(); 
```

上面的代码工作正常，没有问题。但不确定这是否是一种优雅的完成方式！

找到上述解决方案@http: [//lab.studiopesec.com/azure-applications-101-part-ii/](http://lab.studiopesec.com/azure-applications-101-part-ii/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-06T22:29:26.833

在 ServiceConfig 文件中为您的服务指定端点/端口：

```
<ServiceDefinition name="MyService" xmlns="http://schemas.microsoft.com/ServiceHosting/2008/10/ServiceDefinition">
   <WebRole name="WCFServiceRole">
      …
      <Endpoints>
         <InputEndpoint name="HttpIn" protocol="http" port="8080" localPort="8080" />
      </Endpoints>
   </WebRole>
   <WebRole name="MyWebRole">
      …
      <Endpoints>
         <InputEndpoint name="HttpIn" protocol="http" port="80" localPort="80" />
      </Endpoints>
   </WebRole>
   …
</ServiceDefinition> 
```

然后在您的 web.config 中，使用 Azure DNS 和端口指定 WCF 端点（即 mywebrole.cloudapp.net:8080

有关详细信息，请参阅 -[在 Windows Azure 中使用 WCF 的指南](http://msdn.microsoft.com/en-us/library/windowsazure/hh848261.aspx)

# javascript - 使用 javascript .replace 正则表达式将数字括在括号中

> ID：14180343
> 
> 赞同：0
> 
> 时间：2013-01-06T07:47:06.567
> 
> 标签：javascript, regex, string

我有这个字符串，我试图将括号括在“位置”和颜色之后的数字数组周围。

> str = 'Label_3_1:{位置：115,234，宽度：126，高度：20，文本：“另一个按钮”，字体大小：18，颜色：0,0,0,1}'

我可以使用这个正则表达式来做到这一点，但前提是每个逗号后面的数字都有一个空格

```
str = str.replace(/([\d\.]+(, [\d\.]+)+)/g, "[$1]"); 
```

我试图让它在没有任何空格的情况下工作。

输出应如下所示

```
str = 'Label_3_1:{Position: 115,234,Width: 126,Height: 20,Text:"Another Button",FontSize: 18,Color: [0, 0, 0, 1] }' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T07:50:37.343

通过添加`\s*`，它可以工作

`str.replace(/([\d\.]+(,\s*[\d\.]+)+)/g, "[$1]");`

这是结果：

`"Label_3_1:{Position: [115,234],Width: 126,Height: 20,Text:"Another Button",FontSize: 18,Color: [0,0,0,1]}"`

# mysql - MySql 存储过程 else if 和多查询

> ID：14180344
> 
> 赞同：5
> 
> 时间：2013-01-06T07:47:50.900
> 
> 标签：mysql, stored-procedures, navicat

在以下存储过程中，我遇到了错误：

```
DROP PROCEDURE IF EXISTS `SP_DeleteFileInfo`;
CREATE  PROCEDURE `SP_DeleteFileInfo`(pFileID int)
Set @FileRef= null;
select filesinfo.ReferenceID into @FileRef FROM filesinfo where filesinfo.FileID =pFileID;
DELETE From filesinfo
WHERE filesinfo.FileID= pFileID;
IF EXISTS(SELECT * from filesrefrences where filesrefrences.ReferenceID= @FileRef and filesrefrences.RefrenceCount>1) then 
    update filesrefrences
    set 
        filesrefrences.RefrenceCount= filesrefrences.RefrenceCount-1
    where 
        filesrefrences.ReferenceID= @FileRef;
    SELECT @FileRef;
ELSE IF(@FileRef is Not NULL) THEN
    DELETE from filesrefrences WHERE filesrefrences.ReferenceID = @FileRef;
    SELECT -77;
ELSE
    SELECT -99;
end if; 
```

**遇到的错误是：**

```
[SQL]
 select filesinfo.ReferenceID into @FileRef FROM filesinfo where filesinfo.FileID =pFileID;
[Err] 1054 - **Unknown column 'pFileID' in 'where clause'** 
```

解决此错误的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-06T08:00:44.030

定义`pFileID`为`IN`参数，例如

```
CREATE PROCEDURE SP_DeleteFileInfo(IN pFileID int) 
```

完整的查询，

```
DROP PROCEDURE IF EXISTS `SP_DeleteFileInfo`;
DELIMITER //
CREATE  PROCEDURE `SP_DeleteFileInfo`(IN pFileID int)
BEGIN
    Set @FileRef= null;
    select filesinfo.ReferenceID into @FileRef FROM filesinfo where filesinfo.FileID =pFileID;
    DELETE From filesinfo WHERE filesinfo.FileID= pFileID;
    IF EXISTS(SELECT * from filesrefrences where filesrefrences.ReferenceID= @FileRef and filesrefrences.RefrenceCount>1) then 
        update filesrefrences
        set  filesrefrences.RefrenceCount= filesrefrences.RefrenceCount-1
        where  filesrefrences.ReferenceID= @FileRef;
        SELECT @FileRef;
    ELSE 
        IF(@FileRef is Not NULL) THEN
            DELETE from filesrefrences WHERE filesrefrences.ReferenceID = @FileRef;
            SELECT -77;
        ELSE
            SELECT -99;
        END IF;
    END IF;
END //
DELIMITER ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T08:36:21.717

我必须添加一个额外的**“End IF”** 来覆盖**“Else IF”**语句，完整的查询是这样的：

```
CREATE  PROCEDURE `SP_DeleteFileInfo`(IN pFileID int)
BEGIN    
Set @FileRef= null;
    select filesinfo.ReferenceID into @FileRef FROM filesinfo where filesinfo.FileID =pFileID;
    DELETE From filesinfo WHERE filesinfo.FileID= pFileID;
    IF EXISTS(SELECT * from filesrefrences where filesrefrences.ReferenceID= @FileRef and filesrefrences.RefrenceCount>1) then 
        update filesrefrences
        set  filesrefrences.RefrenceCount= filesrefrences.RefrenceCount-1
        where  filesrefrences.ReferenceID= @FileRef;
        SELECT @FileRef;
    ELSE IF(@FileRef is Not NULL) THEN
        DELETE from filesrefrences WHERE filesrefrences.ReferenceID = @FileRef;
        SELECT -77;
    ELSE
        SELECT -99;
    end if;
end if;
END; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T08:50:42.293

您有多个语法错误

```
DROP PROCEDURE IF EXISTS `SP_DeleteFileInfo`;
-- MISSING DELIMITER //
CREATE  PROCEDURE `SP_DeleteFileInfo`(pFileID int)
-- MISSING BEGIN
  Set @FileRef= null;
  select filesinfo.ReferenceID into @FileRef FROM filesinfo where filesinfo.FileID =pFileID;
  DELETE From filesinfo
  WHERE filesinfo.FileID= pFileID;
  IF 
    EXISTS(SELECT * from filesrefrences where filesrefrences.ReferenceID= @FileRef and filesrefrences.RefrenceCount>1) 
  then 
    update filesrefrences
    set 
        filesrefrences.RefrenceCount= filesrefrences.RefrenceCount-1
    where 
        filesrefrences.ReferenceID= @FileRef;
    SELECT @FileRef;
  ELSE 
    IF
      (@FileRef is Not NULL) 
    THEN
      DELETE from filesrefrences WHERE filesrefrences.ReferenceID = @FileRef;
      SELECT -77;
    ELSE
      SELECT -99;
    end if;
-- MISSING END IF;
-- MISSING END//
-- MISSING DELIMITER ; 
```

你得到这个错误

> [SQL] select filesinfo.ReferenceID into @FileRef FROM filesinfo where filesinfo.FileID =pFileID; [Err] 1054 - “where 子句”中的未知列“pFileID”

因为您创建的存储过程是这样的

```
CREATE  PROCEDURE `SP_DeleteFileInfo`(pFileID int)
Set @FileRef= null; 
```

所有其他语句都是正常的单个语句，因此`pFileID`在此上下文中是未知的。

自己试试这个 select 语句，你会得到同样的错误。

```
select filesinfo.ReferenceID into @FileRef FROM filesinfo where filesinfo.FileID =pFileID; 
```

# java - 在 jsp 或 multipart/form-data 中上传文件

> ID：14180352
> 
> 赞同：1
> 
> 时间：2013-01-06T07:49:34.973
> 
> 标签：java, jsp, servlets, file-upload

实际上，我试图在使用 jsp 中的通用上传库上传之前获取要上传的文件数，并且我创建了一个函数来获取文件数，这里是：

```
public static int getUploadFileCount(HttpServletRequest request) throws FileUploadException
{
    int Result = 0;

    DiskFileItemFactory factory = new DiskFileItemFactory();
    ServletFileUpload upload = new ServletFileUpload(factory);
    List<FileItem> items = upload.parseRequest(request);
    for (FileItem item : items) 
    {
        if (!item.isFormField())
        Result++;
    }       

    return Result;
} 
```

并在此处的业务逻辑中使用此功能：

```
public void doChangeProfilePhoto(HttpServletRequest request) throws FileUploadException
{
    if(UploadFileUtil.getUploadFileCount(request) != 1)
        throw new FileUploadException("There is Multiple/None File upload for Profile Photo. ");
    ProfileImage newProfileImage = new ProfileImage();
    newProfileImage.setFileName("sam.jpg");
    if(new UploadBPOProfilePhotoImpl().uploadPhoto(newProfileImage, request))
    {}
} 
```

在调用 uploadPhoto 函数后的这段代码中，还使用相同的代码来一一检索文件，如下所示：

```
 DiskFileItemFactory factory = new DiskFileItemFactory();
    ServletFileUpload upload = new ServletFileUpload(factory);
    List<FileItem> items = upload.parseRequest(request);
    for (FileItem item : items) // Did not get file if i already used this code once For getting the files count:
    {
        if (!item.isFormField())
        //did for makeing file and writing/saving it with a name
    } 
```

所以在这里我遇到的问题是，当我使用此代码时，当我使用相同的代码来计算文件时，它不会获取文件

如果我评论这两条线，我用它来获取 doChangeProfilePhoto 中的文件计数，如下所示：

```
//if(UploadFileUtil.getUploadFileCount(request) != 1)
//    throw new FileUploadException("There is Multiple/None File upload for Profile Photo. "); 
```

然后它的工作。为什么会发生这种情况，如果有一次使用它，那么在它无法检索文件之后。它背后的原因是什么，有没有办法使用普通上传来计算文件......以及它们的名字？

# java - System 类中的inheritedChannel() 方法有什么用

> ID：14180353
> 
> 赞同：8
> 
> 时间：2013-01-06T07:49:37.577
> 
> 标签：java

**在System**类中找到此方法。只是想知道它-

```
public static Channel inheritedChannel() throws IOException {
     return SelectorProvider.provider().inheritedChannel();
} 
```

[Java Doc 描述是：](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#inheritedChannel%28%29)

> *返回从创建此 Java 虚拟机的实体继承的通道。该方法返回调用系统范围默认 SelectorProvider 对象的inheritedChannel 方法获得的通道。*

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-06T08:11:59.533

`inetd`它专为在 Unixy 系统上或`xinetd`在 Unixy 系统上按需启动 Java 程序而设计。[不幸的是，Oracle 在他们的Designing Services to be Launched from`inetd`](http://docs.oracle.com/javase/6/docs/technotes/guides/rmi/inetd/launch-service.html) article 中有更多文档和示例代码，不幸的是与 RMI 相关，并且在 Jetty 源代码中有一个非常简单的示例，[`InheritedChannelConnector`](https://github.com/eclipse/jetty.project/blob/jetty-7.1.0.v20100505/jetty-server/src/main/java/org/eclipse/jetty/server/nio/InheritedChannelConnector.java)并且在 bug [JETTY-496](http://web.archive.org/web/20150517000856/http://jira.codehaus.org/browse/JETTY-496?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel&showAll=true)中有一些有趣的讨论，其中引入了 Jetty 功能.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-06T08:03:01.140

从[SelectorProvider.inheritedChannel()](http://docs.oracle.com/javase/6/docs/api/java/nio/channels/spi/SelectorProvider.html#inheritedChannel%28%29)：

返回从创建此 Java 虚拟机的实体继承的通道。

在许多操作系统上，进程（例如 Java 虚拟机）可以以允许进程从创建进程的实体继承通道的方式启动。这样做的方式取决于系统，通道可能连接到的可能实体也是如此。**例如，在 UNIX 系统上，Internet 服务守护程序 ( *inetd* ) 用于在请求到达关联的网络端口时启动程序以服务请求。在此示例中，启动的进程继承了表示网络套接字的通道。**

如果继承的通道表示网络套接字，则此方法返回的 java.nio.channels.Channel 类型确定如下：

*   如果继承的通道表示面向流的连接套接字，则返回 java.nio.channels.SocketChannel。至少最初，套接字通道处于阻塞模式，绑定到套接字地址并连接到对等点。

*   如果继承的通道表示面向流的侦听套接字，则返回 java.nio.channels.ServerSocketChannel。服务器套接字通道至少在最初处于阻塞模式，并绑定到套接字地址。

*   如果继承的通道是面向数据报的套接字，则返回 java.nio.channels.DatagramChannel。至少最初，数据报通道处于阻塞模式，并绑定到套接字地址。

除了所描述的面向网络的渠道外，这种方法将来可能会返回其他类型的渠道。

此方法的第一次调用会创建返回的通道。此方法的后续调用返回相同的通道。

# php - 如何从 Web 前端向 GNU 屏幕会话发送命令？

> ID：14180354
> 
> 赞同：0
> 
> 时间：2013-01-06T07:49:52.983
> 
> 标签：php, apache, minecraft, game-development

简而言之：我有一个游戏服务器，我想为其构建一个管理应用程序。到目前为止我所拥有的：

```
$command = "echo hello";
system('screen -S minecraft -p0 -X stuff "$command"'); 
```

我不知道 PHP 是否能做到这一点，或者我的权限是否设置正确。PHP5，CentOS 6.3。

是否有更适合此任务的语言，或使权限起作用的建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T09:37:43.730

要将一些文本发送到屏幕，您必须以屏幕所有者身份运行命令。

由于 PHP 肯定会以 www-data 用户身份运行命令，因此您应该尝试在 system() 的开头添加“ **sudo -u your_user** ”。

# php - 使用 php imap 签署 gmail

> ID：14180358
> 
> 赞同：0
> 
> 时间：2013-01-06T07:50:10.083
> 
> 标签：php, email, imap

我的代码

```
$headers  = 'MIME-Version: 1.0' . PHP_EOL;
$headers .= 'Content-type: text/html; charset=iso-8859-1' . PHP_EOL;
$headers .= 'From: Me <me@gmail.com>' . PHP_EOL;
imap_mail('you@gmail.com','test',"$output","$headers"); 
```

有没有办法在邮件上签名？当我使用上面的代码测试发送电子邮件时，我收到了电子邮件，但我收到了错误

```
This message may not have been sent by: me@gmail.com  Learn more  Report phishing 
```

[根据 gmail](https://support.google.com/mail/bin/answer.py?hl=en&answer=180707)，他们将签名数据附加到标头以进行身份​​验证

我正在使用 gmail imap 发送邮件

```
$inbox = imap_open($hostname,$username,$password)
          or die('Cannot connect to Gmail: ' . imap_last_error()); 
```

有没有办法使用 php imap 对电子邮件进行身份验证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T08:38:07.553

如果您想以 Gmail 用户的身份发送邮件，我建议您使用 Gmail 的 SMTP。因为 IMAP 主要用于接收来自收件箱的邮件。

以下是从 Gmail 的 SMTP 发送邮件的方法。

第一的

*   确保安装了 PEAR Mail 包。
    *   通常，特别是对于 PHP 4 或更高版本，这已经为您完成了。试一试。(邮件.php)

然后

**使用 SMTP 身份验证从 PHP 发送邮件 - 示例**

```
<?php
 require_once "Mail.php";

 $from = "Sender <sender@gmail.com>";
 $to = "Recipient <recipient@gmail.com>";
 $subject = "Hi!";
 $body = "Hi,\n\nHow are you?";

 $host = "smtp.gmail.com";
 $username = "username@gmail.com";
 $password = "Gmail Password";

 $headers = array ('From' => $from,
   'To' => $to,
   'Subject' => $subject);
 $smtp = Mail::factory('smtp',
   array ('host' => $host,
     'auth' => true,
     'username' => $username,
     'password' => $password));

 $mail = $smtp->send($to, $headers, $body);

 if (PEAR::isError($mail)) {
   echo("<p>" . $mail->getMessage() . "</p>");
  } else {
   echo("<p>Message successfully sent!</p>");
  }
 ?> 
```

**使用 SMTP 身份验证和 SSL 加密从 PHP 发送邮件 - 示例**

```
<?php
 require_once "Mail.php";

 $from = "Sender <sender@gmail.com>";
 $to = "Recipient <recipient@gmail.com>";
 $subject = "Hi!";
 $body = "Hi,\n\nHow are you?";

 $host = "ssl://smtp.gmail.com";
 $port = "465";
 $username = "username@gmail.com";
 $password = "Gmail Password";

 $headers = array ('From' => $from,
   'To' => $to,
   'Subject' => $subject);
 $smtp = Mail::factory('smtp',
   array ('host' => $host,
     'port' => $port,
     'auth' => true,
     'username' => $username,
     'password' => $password));

 $mail = $smtp->send($to, $headers, $body);

 if (PEAR::isError($mail)) {
   echo("<p>" . $mail->getMessage() . "</p>");
  } else {
   echo("<p>Message successfully sent!</p>");
  }
 ?> 
```

来源[about.com](http://email.about.com/od/emailprogrammingtips/qt/PHP_Email_SMTP_Authentication.htm)

# c++ - 交换指针

> ID：14180365
> 
> 赞同：1
> 
> 时间：2013-01-06T07:51:23.030
> 
> 标签：c++, c, pointers

> **可能重复：**
> [使用指针交换对象](https://stackoverflow.com/questions/2232706/swapping-objects-using-pointers)

我知道如何使用指针进行交换，但是，如果我尝试这样的不同方法：

```
/* Pointers */
#include <stdio.h>
int main ()
{
  int a=4,b=6;
  swap(&a,&b);
  printf("A is %d, and B is %d\n",a,b);
  return 0;
}

int swap(int *a, int *b)
{
  int *temp;
  temp = a;
  a = b;
  b = temp;
  return 0;
} 
```

它不起作用。基本上交换函数正在改变地址，就像'a'现在有'b'的地址，反之亦然。如果我打印出交换函数中的值，它会给出交换的值，但它不会反映在 main功能。谁能告诉我为什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-06T07:54:57.093

因为

> 交换函数正在改变地址，就像'a'现在有'b'的地址，反之亦然

不是真的。它不会改变他们的地址（这绝对没有任何意义）。该函数更改指针的**值**- 这些指针是地址的副本，并且这些指针，因为它们是函数参数，因此对于函数来说是本地的。你要做的是：

```
int swap(int *a, int *b)
{
    int temp;
    temp = *a;
    *a = *b;
    *b = temp;
    return 0;
} 
```

或者您可以使用引用（仅在 C++ 中），如下所示：

```
int swap(int &a, int &b)
{
    int temp;
    temp = a;
    a = b;
    b = temp;
    return 0;
} 
```

**并在没有**addressof 运算符的情况下调用它：

```
int a = 4, b = 6;
swap(a, b); 
```

但是，如果这是用于实际实现，而不是“编写交换函数”式作业，那么您应该`std::swap()` [使用](http://www.cplusplus.com/reference/algorithm/swap/)来自`<algorithm>`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-06T08:24:19.923

如果您只是使用标准方法将它们视为 inout，您将收到**变量**的副本，而不是实际变量。但是，当您传递 a 时，`*variable`您会给它一个指向实际变量的变量。然后您可以使用交换设置内存位置，因为内存位置的副本仍然相同。

所以试试这个代码为你的功能：

```
int swap(int *a, int *b)
{
  int tmp;
  tmp = *a;
  *a = *b;
  *b = tmp;
  return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T07:56:52.820

交换中的“a”和“b”不是主要的“a”和“b”。在交换中，这些是指针。如果要交换 a,b 指向的值，则需要：

```
int swap( int* pa, int *pb )
{
    int temp;
    temp = *pa;
    *pa = *pb;
    *pb = temp;
    return 0;
} 
```

注意我使用了更合适的变量名。此外，您需要分配 temp（与分配指向 temp 的指针相比）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T08:44:19.233

您可以尝试使用：

```
int swap(int*& a, int*& b)
{
  int *temp;
  temp = a;
  a = b;
  b = temp;
  return 0;
} 
```

请注意，堆栈地址无法移动，因此您需要不同的主地址：

```
int main ()
{
  int a=4,b=6;
  int *A = &a;
  int *B = &b;

  swap(A, B);
  printf("A is %d, and B is %d\n",*A, *B);
  return 0;
} 
```

# javascript - 如何安装 page.js

> ID：14180367
> 
> 赞同：0
> 
> 时间：2013-01-06T07:51:41.180
> 
> 标签：javascript, npm

我想在我的项目中使用[page.js。](http://visionmedia.github.com/page.js/)但我认为它使用某种构建系统，所以我没有得到我包含在页面中并开始使用的单个 page.js 文件

```
page('/',index) 
```

任何想法，如何使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T07:58:51.913

在您的终端中：

```
npm install page 
```

然后在节点中：

```
> var page = require('page')
undefined
> page
{ [Function: page]
  callbacks: [],
  base: [Function],
  start: [Function],
  stop: [Function],
  show: [Function],
  replace: [Function],
  dispatch: [Function],
  Context: [Function: Context],
  Route: [Function: Route] } 
```

那是你要找的吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-01T10:12:22.367

实际的客户端脚本`index.js`在包的根目录中调用。只需将其重命名为`page.js`并将其复制到您保存库脚本的任何位置。

# asp.net - 通过 web.config 授权仅允许匿名用户

> ID：14180370
> 
> 赞同：7
> 
> 时间：2013-01-06T07:52:09.460
> 
> 标签：asp.net, asp.net-authorization, role-base-authorization

我想在 web.config 中使用授权来阻止经过身份验证的用户访问 SignUp.aspx。用户不能访问它，例如他们的角色是管理员和访客。

```
<location path="SignUp.aspx">
    <system.web>
        <authorization>
            <allow users="?"/>
        </authorization>
    </system.web>
</location>

    <authentication mode="Forms">
        <forms name="AuthCookie" loginUrl="Login.aspx" timeout="60" 
                           defaultUrl="Index.aspx"/>
    </authentication>
    <authorization>
        <deny users="?"/>
    </authorization> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-06T11:40:55.213

```
 <authorization>
        <allow users="?"/>
        <deny users="*"/>
    </authorization> 
```

现在实际上无法验证它，但它应该可以解决问题。所有其他用户的明确拒绝应该只允许未经身份验证的用户允许该页面。

# android - 如何改变 startScroll() 的速度

> ID：14180373
> 
> 赞同：0
> 
> 时间：2013-01-06T07:52:16.587
> 
> 标签：android, textview

我正在使用[这个](http://goo.gl/RSQIH)答案在我的应用程序中实现一个选取框`textView`，但我希望能够更改它的速度而无需设置`Scroller`. 如果我为 设置持续时间`Scroller`，那么文本的速度将取决于有多少文本，但我想要的是速度保持不变。有没有办法做到这一点？如果没有，有没有其他方法可以让文本以一定的速度自动滚动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T08:03:34.150

您误解了代码。

您必须为滚动条设置持续时间，否则它怎么知道要花多少时间。

所以现在我们必须让滚动条的速度保持不变。

但`velocity = distance / duration`

因此，使该常数保持不变的方法是使持续时间成为距离的函数

例如。如果`duration =2* distance`

`velocity= 2`

等等。

根据您发布的代码

```
 int distance = scrollingLen - (getWidth() + mXPaused);
     int duration = (new Double(mRndDuration * distance * 1.00000
                                  / scrollingLen)).intValue(); 
```

现在`duration= distance * constant /scrollingLen`

所以只需删除`scrollingLen`它，它将是距离的纯函数，为您提供恒定的速度

```
duration= distance * constant /anotherConstant 
```

# javascript - 下载多个文件和 zip - Chrome 扩展

> ID：14180375
> 
> 赞同：7
> 
> 时间：2013-01-06T07:52:44.497
> 
> 标签：javascript, google-chrome-extension, download, archive

是否可以将多个图像下载到沙盒文件系统中（没有“另存为”对话框或最多一个另存为对话框）？

下载后，我想把它们压缩成一个.. 有没有 javascript 存档库？

提前致谢..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-06T12:48:58.667

您可以为此使用[zip.js。](https://github.com/gildas-lormeau/zip.js)它已经有用于从 HTTP 获取要压缩的内容的 API（参见[zip.HttpReader](http://gildas-lormeau.github.com/zip.js/core-api.html#zip-reading)构造函数）和用于在 HTML5 文件系统上写入生成的 zip（参见[zip.FileWriter](http://gildas-lormeau.github.com/zip.js/core-api.html#zip-writer)构造函数）。

这是使用[文件系统 API](http://gildas-lormeau.github.com/zip.js/fs-api.html)的示例：

`index.html`文件：

```
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Zip JSON data from the BBC into HTML5 FileSystem</title>
</head>
<body>
  <script src="zip.js"></script>
  <script src="zip-fs.js"></script>
  <script src="zip-ext.js"></script>
  <script src="example.js"></script>
</body>
</html> 
```

`example.js`文件：

```
// create a zip virtual filesystem
var fs = new zip.fs.FS();

// add some files into the zip filesystem 

// add the "bbc-music.json" file in the root directory
fs.root.addHttpContent("bbc-music.json", 
  "http://www.bbc.co.uk/programmes/genres/music.json");
// add the "bbc-learning.json" file in the root directory
fs.root.addHttpContent("bbc-learning.json", 
  "http://www.bbc.co.uk/programmes/genres/learning.json");

// create a file named "test.zip" in the root directory of the HTML5 filesystem 
createFile("test.zip", function(fileEntry) {
  // export the zip content into "test.zip" file
  fs.root.exportFileEntry(fileEntry, function() {
    console.log("done");
  });
});

// function to create a file in the HTML5 temporary filesystem
function createFile(filename, callback) {
  webkitRequestFileSystem(TEMPORARY, 4 * 1024 * 1024, function(fs) {
    fs.root.getFile(filename, { create : true }, callback);
  });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T10:30:29.920

您可以将图像作为某些网页的常规部分访问或通过`XMLHTTPRequest`s. 单独下载。[在此之后，您可以使用JSZip](http://stuartk.com/jszip/) JavaScript 库将它们压缩到一个存档中。zip 可以存储为没有“另存为”对话框的文件（尝试网站上的示例）。虽然我不确定你为什么需要[sandbox](https://developer.chrome.com/extensions/manifest.html#sandbox)。

还有其他用于压缩的 JavaScript 库，例如，[其他 SO answer](https://stackoverflow.com/questions/294297/javascript-implementation-of-gzip)中提到了一些。

# c# - 为什么 mvc4 pages_Membership 不使用 Salt？

> ID：14180378
> 
> 赞同：1
> 
> 时间：2013-01-06T07:53:23.357
> 
> 标签：c#, asp.net-mvc-4

我正在尝试使用 MVC4 框架编写尽可能安全的系统。我注意到在我的数据库中自动创建了表来处理 MVC4 中的网页安全性。我已经声明该框架将在其身份验证中使用盐，但在创建用户时并非如此。

该字段在数据库中，但它是`NULL`。

如何应用此功能？

谢谢

# java - 在 java 中实例化泛型类型时的 InstantiationException

> ID：14180380
> 
> 赞同：0
> 
> 时间：2013-01-06T07:54:08.663
> 
> 标签：java, generics, instantiation

我一直试图让它工作一段时间，并且我一直在寻找答案（包括这里）。但我无法弄清楚。

所以这里的代码（有点最小化）：

```
public class Event<T> {
    public MessageType msgType;
    public int layer;
    public int gameObjectId;
    public String name;
    public float value;
    public int senderId;
    public T ext;

    public Event(Class<T> classType) {
        if(classType != null) {
            try {
                ext = classType.newInstance();  //this is the failing line
            } catch (InstantiationException e) {
                e.printStackTrace();
            } catch (IllegalAccessException e) {
                e.printStackTrace();
            }
        }
        msgType = MessageType.NONE;
        layer = TypeHandler.lAll;
        gameObjectId = -1;
        name = null;
        value = -1;
    }
}

public class DataExtension {
    public float[] values;
    public String[] string;
    public Object[] objects;
    public boolean[] boolens;
} 
```

这就是问题：

```
Event<DataExtension> mSelectionEvent;

mSelectionEvent = new Event<DataExtension>(DataExtension.class, MessageType.SELECTED); 
```

这给了我以下例外：

```
java.lang.InstantiationException: se.plainentertainment.bagl.v2.core.Event$DataExtension
    at java.lang.Class.newInstance0(Unknown Source)
    at java.lang.Class.newInstance(Unknown Source)
    at se.plainentertainment.bagl.v2.core.Event.<init>(Event.java:85)
    at se.plainentertainment.bagl.v2.core.SelectionHandler.<init>(SelectionHandler.java:46)... 
```

所以，我试图实例化的类应该满足所有要求，对吧？它有一个默认构造函数，并且它不是抽象的。为什么我会收到此错误？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T08:18:54.787

```
Event$DataExtension 
```

这是一个内部类。是静态的吗？我会带着预感去说不。这意味着它包含对包含事件的引用（隐式），这意味着您可能无法通过 newInstance 实例化它。

尝试将其设置为静态内部类，或者如果它不需要绑定到事件对象，则将其移出类。

# android - 如何使用phonegap将背景图像设置为android 4.x的固定？

> ID：14180395
> 
> 赞同：2
> 
> 时间：2013-01-06T07:58:00.260
> 
> 标签：android, css, cordova, android-emulator

我正在使用phonegap 2.0 开发一个android 应用程序。我使用在谷歌浏览器上运行的波纹插件调试我的应用程序。涟漪上一切正常，但在 android 上却不行。在 android 上，背景图像不固定。我在谷歌上进行了大量搜索，但找不到任何解决方案。

我的CSS是：

```
background-image: url('../img/hdpi/App_Bg.png') !important;
background-repeat: no-repeat !important;
background-attachment: fixed !important;
background-size: 100% 100% !important;
background-position:100% 100% !important; 
```

如何将背景图像设置为 android webkit 浏览器的固定？有什么神奇的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T05:11:09.707

您是否包含了这些元标记？

```
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no", ,height=device-height/>
<meta name="layout" content="mobile"/>
<meta name="apple-mobile-web-app-capable" content="yes"/> 
```

# makefile - 使用库创建 Makefile

> ID：14180397
> 
> 赞同：0
> 
> 时间：2013-01-06T07:58:16.970
> 
> 标签：makefile

如何使用以下命令创建一个简单的 Makefile？

```
 g++ -Wall -I/usr/include/opencv -I/usr/include/opencv2 -L/usr/lib/ -g -o exe sourc1.cpp sourc2.cpp sourc3.cpp -lopencv_core -lopencv_imgproc -lopencv_highgui -lopencv_ml -lopencv_video -lopencv_features2d -lopencv_calib3d -lopencv_objdetect -lopencv_contrib -lopencv_legacy -lv4l1 -lv4l2 -lv4lconvert -pthread 
```

我引用了这个[链接](http://edndoc.esri.com/arcobjects/9.0/arcgisdevhelp/developmentenvs/cpp/makefiles/makefile.linux.htm)，但我很困惑。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T08:26:45.710

也许像

```
 # your Makefile

 #### variables
 RM= rm -vf
 CXX= g++
 CXXFLAGS= -Wall -g
 CPPFLAGS= -I/usr/include/opencv -I/usr/include/opencv2 
 LDLIBS= -lopencv_core -lopencv_imgproc -lopencv_highgui \
         -lopencv_ml -lopencv_video -lopencv_features2d \
         -lopencv_calib3d -lopencv_objdetect -lopencv_contrib \
         -lopencv_legacy -lv4l1 -lv4l2 -lv4lconvert 
 SOURCEFILES= sourc1.cpp sourc2.cpp sourc3.cpp 
 OBJECTFILES= $(patsubst %.cpp,%.o,$(SOURCEFILES))
 PROGNAME= yourexe

 ### rules
 .PHONY: all clean

 all: $(PROGNAME)
 $(PROGNAME): $(OBJECTFILES)
       $(LINK.cpp) $^ $(LOADLIBES) $(LDLIBS) -o $@

 clean:
       $(RM) $(OBJECTFILES) $(PROGNAME) 
```

随意适应。（您可能有头文件，并且需要将目标文件的依赖项添加到源文件和头文件）。如果它知道*opencv* ，也许可以使用[pkg-config](http://en.wikipedia.org/wiki/Pkg-config)。用制表符替换规则中最初的许多空格。仔细阅读[GNU make 文档](http://www.gnu.org/software/make/manual/make.html)。

 *如果你有`sourc2.cpp`并且如果你有两个头文件`header1.hh`并且`header2.hh`是`#include`-d`sourc2.cpp`你需要添加依赖规则：

```
 sourc2.o: source2.cpp header1.hh header2.hh 
```

并且有一种方法（通过传递[-M](http://gcc.gnu.org/onlinedocs/gcc/Preprocessor-Options.html)之类的参数或`-MD`通过`gcc`适当的规则）来自动生成此类依赖项，请参阅[此问题](https://stackoverflow.com/questions/5229561/gnu-make-generating-automatic-dependencies-with-generated-header-files)。

您可能想使用[remake](http://bashdb.sourceforge.net/remake/)来调试您的`Makefile`-s （例如 as `remake -x`）。运行`make -p`以了解哪些**规则是已知的`make`***

# css - CSS3背景图像动画与过渡

> ID：14180404
> 
> 赞同：0
> 
> 时间：2013-01-06T07:59:37.010
> 
> 标签：css, hover, background-image, css-transitions, css-animations

我有两个项目，一个带有 img 标签，另一个带有 div 标签（背景 css）
我的 img 项目：[http](http://untitledexperiment97.heliohost.org/)
://untitledexperiment97.heliohost.org/ 我的 div 项目：[http://untitledexperiment97.heliohost.org/home2。 html](http://untitledexperiment97.heliohost.org/home2.html)
我制作了 2 个项目，因为 img 项目上圆圈的位置不在屏幕中心，而 div 项目将在屏幕中心：)
当我将鼠标悬停在 img 项目的圆圈上时，圆圈将旋转和缩放。
在我的 div 项目中，圆圈不会旋转，只会缩放。
我的问题是，如何使它在 div 项目上同时缩放和旋转？

对不起我的语言:)我是新来的:)谢谢

# android - 在android中使用Surface View放大和缩小

> ID：14180408
> 
> 赞同：0
> 
> 时间：2013-01-06T08:01:28.640
> 
> 标签：android, zooming, surfaceview

我正在制作一个检查界面，当用户在底部签名时，我想放大到屏幕的那个部分。我使用相机尝试了这段代码。该程序给出一个错误 - 意外停止。你能帮我解决这个问题吗？

```
 public class MainActivity extends Activity 
    {
        MySurfaceView mySurfaceView;
        private Paint paint = new Paint(Paint.ANTI_ALIAS_FLAG);

         Parameters params;
         Camera camera;

          int currentZoomLevel = 0, maxZoomLevel = 0;
          int MAX_ZOOM=200;

          ZoomControls zoomControls = (ZoomControls) findViewById(R.id.zoomControls1);

              @Override
             public void onCreate(Bundle savedInstanceState)  
             {                 
                   super.onCreate(savedInstanceState);
                   mySurfaceView = new MySurfaceView(this);
                   setContentView(mySurfaceView);
              } 

              class MySurfaceView extends SurfaceView
              {
                  Path path;
                  Thread thread = null;
                   SurfaceHolder surfaceHolder;
                volatile boolean running = false;
                   Random random;

                    public MySurfaceView(Context context)
                    {
                            super(context);

                       surfaceHolder = getHolder();
                  paint.setStyle(Paint.Style.STROKE);
                  paint.setStrokeWidth(3);
                    paint.setColor(Color.BLUE);
                  }  
             @Override
                public boolean onTouchEvent(MotionEvent event) 
             {
              if(event.getAction() == MotionEvent.ACTION_DOWN)
               {
                    path = new Path();
                      path.moveTo(event.getX(), event.getY());
                }
               else if(event.getAction() == MotionEvent.ACTION_MOVE)
               {
                     path.lineTo(event.getX(), event.getY());
               }
               else if(event.getAction() == MotionEvent.ACTION_UP)
              {
 path.lineTo(event.getX(), event.getY());
}
if(params.isZoomSupported())
{    
   maxZoomLevel = params.getMaxZoom();

   zoomControls.setIsZoomInEnabled(true);
       zoomControls.setIsZoomOutEnabled(true);

       zoomControls.setOnZoomInClickListener(new OnClickListener()
       {
        public void onClick(View v)
        {
            if(currentZoomLevel < MAX_ZOOM){
                 currentZoomLevel++;
                 camera.startSmoothZoom(currentZoomLevel); 
             }

        }
    });

   zoomControls.setOnZoomOutClickListener(new OnClickListener()
   {
           public void onClick(View v)
           {
                   if(currentZoomLevel > 0)
                   {
                       currentZoomLevel--;
                       camera.startSmoothZoom(currentZoomLevel);
                   }
           }
       });    
  }
  else
  {
    zoomControls.setVisibility(View.GONE);
  }

if(path != null)
{
 Canvas canvas = surfaceHolder.lockCanvas();
 canvas.drawPath(path, paint);
 //canvas.scale(20,20,canvas.getHeight()-20,canvas.getWidth()-20);

 surfaceHolder.unlockCanvasAndPost(canvas);
}
return running;
  }
    }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-10T13:29:13.863

`ZoomControls`未添加到要在此行的布局中显示的布局

```
setContentView(mySurfaceView); 
```

# jquery - 加载新图像后无限滚动和颜色框

> ID：14180411
> 
> 赞同：0
> 
> 时间：2013-01-06T08:01:48.967
> 
> 标签：jquery, colorbox, infinite-scroll

当我的无限滚动加载新图像时，对新图像的颜色框调用不再起作用。通过无限滚动调用加载新内容后，如何使颜色框正常工作？

无限滚动（+砖石）：

```
$(function(){

var $container = $('#content_home');

$container.imagesLoaded(function(){
  $container.masonry({
    itemSelector : '.wrdLatest',
     columnWidth:15
  });
});

$container.infinitescroll({
  navSelector  : '#nav',    
  nextSelector : '#nav a', 
  itemSelector : '.wrdLatest'  
  },
  function( newElements ) {
    var $newElems = $( newElements ).css({ opacity: 0 });
    $newElems.imagesLoaded(function(){
        $newElems.animate({ opacity: 1 });
        $container.masonry( 'appended', $newElems, true );
    });
  }
);

}); 
```

彩盒调用：

```
 $(function() {
    $(".item_popup").colorbox({iframe:true, width:"916", height:"838"});
 }); 
```

html:

```
 <div class="wrdLatest" id="<?=$row['item_id']?>">
         <a class="item_popup" href="popup.php?id=<?=$row['item_id']?>">click</a>
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T08:28:08.150

通过将颜色框调用添加到无限滚动回调来解决它：

```
 navSelector  : '#nav',    
  nextSelector : '#nav a', 
  itemSelector : '.wrdLatest'  
  },
  function( newElements ) {
    var $newElems = $( newElements ).css({ opacity: 0 });
    $newElems.imagesLoaded(function(){
        $newElems.animate({ opacity: 1 });
        $container.masonry( 'appended', $newElems, true );
        $(".item_popup").colorbox({iframe:true, width:"916", height:"838"});
        //$(".item_popup").colorbox({onComplete:function(){ $("#cboxWrapper").append("<div id='textbox12'>hello world</div>"); } }); 
        $("#item_popup").colorbox({iframe:true, width:"916", height:"838"});
        $(".signup_popup").colorbox({iframe:true, width:"488", height:"279", href:"welcome.php", scrolling: false});
        $(".activate_popup").colorbox({iframe:true, width:"488", height:"279", href:"active.php", scrolling: false});
        $("#activate_popup").colorbox({iframe:true, width:"488", height:"279", href:"active.php", scrolling: false});
        $(".signup_popup1").colorbox({iframe:true, width:"488", height:"279", href:"welcome.php", scrolling: false});
    });
  }
); 
```

# java - 如果使用“localhost”URL，则无法从 HttpServletRequest 获取 IP

> ID：14180416
> 
> 赞同：3
> 
> 时间：2013-01-06T08:02:35.093
> 
> 标签：java, jakarta-ee, servlets

尝试从 HttpServletRequest 获取 IP 时遇到问题，请先查看我的编码：

```
String ip = request.getHeader("X-Forwarded-For");
        if (ip == null || ip.length() == 0 || "unknown".equalsIgnoreCase(ip)) {
            ip = request.getHeader("Proxy-Client-IP");
        }
        if (ip == null || ip.length() == 0 || "unknown".equalsIgnoreCase(ip)) {
            ip = request.getHeader("WL-Proxy-Client-IP");
        }
        if (ip == null || ip.length() == 0 || "unknown".equalsIgnoreCase(ip)) {
            ip = request.getHeader("HTTP_CLIENT_IP");
        }
        if (ip == null || ip.length() == 0 || "unknown".equalsIgnoreCase(ip)) {
            ip = request.getHeader("HTTP_X_FORWARDED_FOR");
        }
        if (ip == null || ip.length() == 0 || "unknown".equalsIgnoreCase(ip)) {
            ip = request.getRemoteAddr();
        }
        return ip; 
```

我的问题是如果使用以下 URL 打开应用程序（我的 PC 的 URL 是 18.111，服务器部署在本地主机上）“https://192.168.18.111:8443/test/main.html”，我可以使用上述编码获得正确的 URL，但是如果用“https://localhost:8443/test/main.html”打开，它会返回类似“0.1.0.1....”的东西，上面的函数，为什么这个函数对“localhost”不起作用有人知道是否有更好的方法从 HttpServletRequest 获取 IP？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-06T21:00:46.650

你的方法的结果是绝对正确的。我假设你得到的数字是`0:0:0:0:0:0:0:1`。它是环回地址的有效形式。**但它只是 IPv6 格式的 localhost**。localhost 的 IPv4 地址是 localhost 的`127.0.0.1`IPv6 地址是`0:0:0:0:0:0:0:1`。

问题是 URL`https://localhost:8443/test/main.html`默认匹配两个版本的 IP 协议。显然您的浏览器选择使用 IPv6。

对于本地测试，请尝试使用文字地址`127.0.0.1`而不是名称`localhost`。或者，您可以在 DNS 设置中仅使用 IPv4 地址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T12:14:36.847

为什么不尝试

```
request.getRemoteAddr() 
```

只要？您真的需要原始 IP 地址（“X-Forwarded-For”提供的那个）吗？我猜有时看到一些愚蠢的 LAN 地址而不是可寻址资源是没有用的 - 由上层方法提供。

**后期编辑：**

看看这个问题：[Finding user ip address](https://stackoverflow.com/questions/12324466/finding-user-ip-address) which似乎是固定的。

# java - 将随机数放入数组列表java

> ID：14180419
> 
> 赞同：-2
> 
> 时间：2013-01-06T08:03:09.890
> 
> 标签：java, arrays, random, arraylist

我正在尝试将我生成的所有随机数放入 arraylist 并将所有随机数打印到单个数组中

```
 static int pick;
    public static void main(String[] args) {
        ArrayList al = new ArrayList(); 
        Random rand = new Random();

        for (int j = 0; j<10; j++)
        {
        pick = rand.nextInt(100);
        al.add(pick);
        System.out.println("Contents of al: " + al);
        } 
```

从上面的函数我得到了这样的结果

```
 Contents of al: [43]
 Contents of al: [43, 44]
 Contents of al: [43, 44, 3]
 Contents of al: [43, 44, 3, 66]
 Contents of al: [43, 44, 3, 66, 47]
 Contents of al: [43, 44, 3, 66, 47, 24]
 Contents of al: [43, 44, 3, 66, 47, 24, 12]
 Contents of al: [43, 44, 3, 66, 47, 24, 12, 35]
 Contents of al: [43, 44, 3, 66, 47, 24, 12, 35, 0]
 Contents of al: [43, 44, 3, 66, 47, 24, 12, 35, 0, 85] 
```

我想要的预期输出只是上述结果的最后一行

```
 Contents of al: [43, 44, 3, 66, 47, 24, 12, 35, 0, 85] 
```

有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T08:07:11.710

如果要在数组已满时打印数组，请将 println 退出循环。

希望这能回答你的问题

```
 static int pick;
    public static void main(String[] args) {
        ArrayList al = new ArrayList(); 
        Random rand = new Random();

        for (int j = 0; j<10; j++)
        {
            pick = rand.nextInt(100);
            al.add(pick);
        }

        System.out.println("Contents of al: " + al);
     } 
```

# android - 加载繁重的 UI 时显示 ProgressDialog

> ID：14180425
> 
> 赞同：2
> 
> 时间：2013-01-06T08:04:13.287
> 
> 标签：android, android-asynctask, progressdialog

我`asynctask`经常使用但是这次它不起作用！我有一个 UI 包含一个`viewpager`和`fragments`. 填充视图大约需要 3 秒。现在我想显示 ProgressDialog 直到它使用`AsyncTask`. 但是`ProgressDialog`没有显示！！！！

任何人都可以告诉我解决方案吗？谢谢

```
onCreate(...){
   setContentView(...)
   new LoadUI(MyActivity.this).execute();
}

public class LoadUI extends AsyncTask<Void, Void, Void>{
    ProgressDialog pd;
    Context context;

    public LoadUI(Context mContext) {
        this.context = mContext;
        pd = new ProgressDialog(mContext);
        aViewPager = (ViewPager) findViewById(R.id.aPagerDay);
    }

    @Override
    protected void onPreExecute() {
        pd.show();
    }

    @Override
    protected Void doInBackground(Void... params) {
        //Create ViewPager
        //Create pagerAdapter
        return null;
    }

    @Override
    protected void onPostExecute(Void result) {
        if (pd.isShowing()) {
            pd.dismiss();
        }
        super.onPostExecute(result);
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T08:50:32.703

您可以尝试两种选择：

要么像这样使用`AsyncTask`'s 方法`get(long timeout, TimeUnit unit)`：

```
task.get(1000, TimeUnit.MILLISECONDS); 
```

这将使您的主线程`AsyncTask`最多等待 1000 毫秒的结果。

或者，您可以在异步任务中显示一个进度对话框，直到它完成。看到这个[线程](https://stackoverflow.com/a/4538370/1108032)。基本上，异步任务运行时会显示一个进度对话框，完成后会隐藏。

您甚至还有第三个选项：“如果`Thread`足以满足您的需求，您可以使用它的`join`方法。但是，如果任务需要很长时间，您仍然需要显示进度对话框，否则您将因为主要线程长时间处于非活动状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-24T08:15:48.870

问题是 GUI 没有准备好`onCreate()`。如果我尝试`Dialog`在这种状态下显示，则不会显示任何内容。一个解决方案是移动`dialog`到活动`onStart()`：

```
@override
onStart(){
   new LoadUI(MyActivity.this).execute();
} 
```

# eclipse - eclipse中的maven插件

> ID：14180430
> 
> 赞同：0
> 
> 时间：2013-01-06T08:04:46.367
> 
> 标签：eclipse, jar

通过将maven插件添加到eclipse（m2eclipse）中，项目使用的所有jar是否会自动添加到eclipse中构建项目的路径？如果没有自动添加，应该怎么做才能让 jar 进入构建路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T22:44:22.913

> 通过将maven插件添加到eclipse（m2eclipse）中，项目使用的所有jar是否会自动添加到eclipse中构建项目的路径？

您在 pom.xml 中定义为依赖项的所有 JAR 都将自动添加到 Eclipse 构建路径中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T08:47:52.423

如果您的项目在 Eclipse 中设置为 Maven 项目，那么可以。这还假设您的 settings.xml 文件和 pom.xml 是正确的。

如果它是现有的非 maven 项目，则需要在添加依赖项之前使用上下文菜单将其转换为 maven 项目。

# iphone - 使用 xib 的代码，但不适用于 Storyboard

> ID：14180432
> 
> 赞同：3
> 
> 时间：2013-01-06T08:05:50.787
> 
> 标签：iphone, objective-c, uitableview, ios6, exc-bad-access

我是 iPhone 应用程序的新手。我正在学习如何获取 JSON 数据并对其进行解析并将其显示在 iPhone 的表格中。为此，我正在经历[**`this video`**](http://www.youtube.com/watch?v=RJZcD3hfs3k)。

我用 xib 文件做了这个，它工作得很好。

我正在尝试使用`Storyboard`. 我做了和我做的一样的事情`Stoaryboard`，但是执行在下一行中断了。

`cell.textLabel.text = [[news objectAtIndex:indexPath.row] objectForKey:@"title"];`

我的代码是

```
-(UITableViewCell *) tableView:(UITableView *) tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    NSLog(@"i m here 1");

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"MainCell"];
    NSLog(@"i m here 2");

    if (cell==nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"MainCell"];
        NSLog(@"i m here 3");
    }
    NSLog(@"i m here 4");
    cell.textLabel.text = [[news objectAtIndex:indexPath.row] objectForKey:@"title"];
    // cell.textLabel.text = @"dadsf ad";
    NSLog(@"i m here 5");
    return cell;
} 
```

在`NSLog`中，我得到输出直到`i m here 4`。

当我评论`cell.textLabel.text = [[news objectAtIndex`和取消评论时`cell.textLabel.text = @"dadsf ad";`，它可以工作并且我`dadsf ad`在 iPhone 中看到。

```
// cell.textLabel.text = [[news objectAtIndex:indexPath.row] objectForKey:@"title"];
cell.textLabel.text = @"dadsf ad"; 
```

当我运行时`cell.textLabel.text = [[news objectAt`，我进入屏幕下方。

![在此处输入图像描述](../Images/6b92b3ae378105333d24173ac2ab3e4a.png)

## 笔记：

我也去了模拟器并做了`Reset Content and Setting`，仍然面临同样的问题。知道为什么吗？

* * *

## 更新 1

我激活`NSZombieEnabled`并运行代码。我进入 NSLOG 作为

```
JSONNewsStoryBoard[19389:11303] i m here 4
2013-01-06 11:26:15.327 JSONNewsStoryBoard[19389:11303] *** -[CFArray objectAtIndex:]: message sent to deallocated instance 0x7497040 
```

下面是屏幕截图。

![在此处输入图像描述](../Images/4adef185d96828e16419d146b01f0d64.png)

* * *

## 更新 2 - 答案

我尝试添加`NSLog(@"checking news count %d", [news count]);`，`cellForRowAtIndexPath`我遇到了同样的问题。手段`news`为空。

所以我加了

```
news = [NSJSONSerialization JSONObjectWithData:data options:nil error:nil]; 
```

`cellForRowAtIndexPath`并且它起作用了。:) :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T08:44:53.407

似乎该`news`对象在调用它之前的某个时间已被释放`objectAtIndex:`，这可能与界面构建器和情节提要控制您赋予它们的对象的方式有关。尝试在代码中的各个点检查是否`news`等于。`nil`您可能必须`news`在不同的时间点进行实例化。

# python - 安装 PIL 适用于 sudo，不能在 venv 中使用

> ID：14180433
> 
> 赞同：2
> 
> 时间：2013-01-06T08:05:51.550
> 
> 标签：python, python-imaging-library, ubuntu-10.04

我在 Ubuntu 10.04 中工作。我机器上的默认python是2.6。我用 python 2.7 创建了一个virutalenv。我正在编写一个要在 googleappengine 上运行的 django 应用程序。为了在我的一个模型中使用 ImageField，我需要安装 PIL。有很多很多关于安装 PIL 的帖子，我关注了其中很多，但都没有成功。

我能够成功运行

```
sudo pip install PIL 
```

但我的 virtualenv 无法访问它。当我跑

```
pip install PIL 
```

在我的 virtualenv 中，我得到一个 gcc 错误。

我安装了所有依赖项，apt-get 安装了 python-imaging，下载了 PIL 并尝试使用 setup.py 构建/安装，并按照我读过的许多帖子中的许多其他说明进行操作。

有没有人有任何想法？

编辑：

错误：

错误：命令“gcc”失败，退出状态为 1

编辑：我可以粘贴尽可能多的错误（其余的不在屏幕上）

```
 _imaging.c:301: error: ‘PyExc_IOError’ undeclared (first use in this function)

_imaging.c:302: error: ‘NULL’ undeclared (first use in this function)

_imaging.c: In function ‘ImagingError_MemoryError’:

_imaging.c:308: warning: implicit declaration of function ‘PyErr_NoMemory’</p>

_imaging.c:308: warning: return makes pointer from integer without a cast

_imaging.c: In function ‘ImagingError_Mismatch’:

_imaging.c:314: error: ‘PyExc_ValueError’ undeclared (first use in this function)

_imaging.c:315: error: ‘NULL’ undeclared (first use in this function)

_imaging.c: In function ‘ImagingError_ModeError’:

_imaging.c:321: error: ‘PyExc_ValueError’ undeclared (first use in this function)

_imaging.c:322: error: ‘NULL’ undeclared (first use in this function)

_imaging.c: In function ‘ImagingError_ValueError’:

_imaging.c:329: error: ‘PyExc_ValueError’ undeclared (first use in this function)

_imaging.c:332: error: ‘NULL’ undeclared (first use in this function)

_imaging.c: In function ‘ImagingError_Clear’:

_imaging.c:338: warning: implicit declaration of function ‘PyErr_Clear’</p>

_imaging.c: At top level:

_imaging.c:369: error: expected ‘)’ before ‘*’ token

_imaging.c:464: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:510: error: expected ‘)’ before ‘*’ token

_imaging.c:587: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:619: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:631: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:643: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:655: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:664: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:675: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:686: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:697: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:719: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:743: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:760: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:777: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:786: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:803: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:813: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:824: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:857: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:879: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:914: error: expected ‘)’ before ‘*’ token

_imaging.c:954: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:981: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:1054: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:1065: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:1075: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:1114: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:1191: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:1202: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:1339: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:1359: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:1394: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:1419: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:1448: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:1459: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:1479: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:1530: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:1568: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:1614: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:1689: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:1739: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:1765: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:1771: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:1783: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:1817: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:1845: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:1874: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:1885: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:1901: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:1922: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:1928: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:1939: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:1950: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:1961: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:1972: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:1983: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:2001: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:2019: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:2030: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:2041: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:2052: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:2063: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:2081: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c: In function ‘_font_dealloc’:

_imaging.c:2142: warning: implicit declaration of function ‘Py_XDECREF’</p>

_imaging.c:2142: error: ‘ImagingFontObject’ has no member named ‘ref’</p>

_imaging.c: In function ‘textwidth’:

_imaging.c:2152: error: ‘ImagingFontObject’ has no member named ‘glyphs’</p>

_imaging.c: At top level:

_imaging.c:2157: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:2205: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:2215: error: array type has incomplete element type

_imaging.c:2216: error: ‘PyCFunction’ undeclared here (not in a function)

_imaging.c:2216: error: expected ‘}’ before ‘_font_getmask’</p>

_imaging.c:2217: error: expected ‘}’ before ‘_font_getsize’</p>

_imaging.c:2218: error: ‘NULL’ undeclared here (not in a function)

_imaging.c:2221: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:2229: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c: In function ‘_draw_dealloc’:

_imaging.c:2257: error: ‘ImagingDrawObject’ has no member named ‘image’</p>

_imaging.c: At top level:

_imaging.c:2261: error: expected ‘)’ before ‘*’ token

_imaging.c:2263: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:2278: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:2298: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:2335: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:2353: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:2390: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:2406: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:2459: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:2474: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:2507: error: expected ‘)’ before ‘*’ token

_imaging.c:2509: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:2536: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:2554: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:2600: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:2637: error: array type has incomplete element type

_imaging.c:2640: error: expected ‘}’ before ‘_draw_line’</p>

_imaging.c:2641: error: expected ‘}’ before ‘_draw_lines’</p>

_imaging.c:2643: error: expected ‘}’ before ‘_draw_outline’</p>

_imaging.c:2645: error: expected ‘}’ before ‘_draw_polygon’</p>

_imaging.c:2646: error: expected ‘}’ before ‘_draw_rectangle’</p>

_imaging.c:2647: error: expected ‘}’ before ‘_draw_point’</p>

_imaging.c:2648: error: expected ‘}’ before ‘_draw_points’</p>

_imaging.c:2649: error: expected ‘}’ before ‘_draw_arc’</p>

_imaging.c:2650: error: expected ‘}’ before ‘_draw_bitmap’</p>

_imaging.c:2651: error: expected ‘}’ before ‘_draw_chord’</p>

_imaging.c:2652: error: expected ‘}’ before ‘_draw_ellipse’</p>

_imaging.c:2653: error: expected ‘}’ before ‘_draw_pieslice’</p>

_imaging.c:2654: error: expected ‘}’ before ‘_draw_ink’</p>

_imaging.c:2659: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:2668: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c: In function ‘pixel_access_dealloc’:

_imaging.c:2693: error: ‘PixelAccessObject’ has no member named ‘image’</p>

_imaging.c: At top level:

_imaging.c:2697: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:2708: error: expected declaration specifiers or ‘...’ before ‘PyObject’</p>

_imaging.c:2708: error: expected declaration specifiers or ‘...’ before ‘PyObject’</p>

_imaging.c: In function ‘pixel_access_setitem’:

_imaging.c:2710: error: ‘PixelAccessObject’ has no member named ‘image’</p>

_imaging.c:2714: error: ‘PixelAccessObject’ has no member named ‘readonly’</p>

_imaging.c:2719: warning: implicit declaration of function ‘_getxy’</p>

_imaging.c:2719: error: ‘xy’ undeclared (first use in this function)

_imaging.c:2723: error: ‘PyExc_IndexError’ undeclared (first use in this function)

_imaging.c:2727: error: ‘color’ undeclared (first use in this function)

_imaging.c:2730: warning: implicit declaration of function ‘getink’</p>

_imaging.c:2733: error: ‘PixelAccessObject’ has no member named ‘image’</p>

_imaging.c: At top level:

_imaging.c:2744: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:2763: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:2774: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:2791: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:2811: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:2846: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:2867: error: array type has incomplete element type

_imaging.c:2870: error: expected ‘}’ before ‘_getpixel’</p>

_imaging.c:2871: error: expected ‘}’ before ‘_putpixel’</p>

_imaging.c:2873: error: expected ‘}’ before ‘pixel_access_new’</p>

_imaging.c:2876: error: expected ‘}’ before ‘_convert’</p>

_imaging.c:2877: error: expected ‘}’ before ‘_convert2’</p>

_imaging.c:2878: error: expected ‘}’ before ‘_convert_matrix’</p>

_imaging.c:2879: error: expected ‘}’ before ‘_copy’</p>

_imaging.c:2880: error: expected ‘}’ before ‘_copy2’</p>

_imaging.c:2884: error: expected ‘}’ before ‘_crop’</p>

_imaging.c:2885: error: expected ‘}’ before ‘_expand’</p>

_imaging.c:2886: error: expected ‘}’ before ‘_filter’</p>

_imaging.c:2887: error: expected ‘}’ before ‘_histogram’</p>

_imaging.c:2889: error: expected ‘}’ before ‘_modefilter’</p>

_imaging.c:2891: error: expected ‘}’ before ‘_offset’</p>

_imaging.c:2892: error: expected ‘}’ before ‘_paste’</p>

_imaging.c:2893: error: expected ‘}’ before ‘_point’</p>

_imaging.c:2894: error: expected ‘}’ before ‘_point_transform’</p>

_imaging.c:2895: error: expected ‘}’ before ‘_putdata’</p>

_imaging.c:2897: error: expected ‘}’ before ‘_quantize’</p>

_imaging.c:2900: error: expected ‘}’ before ‘_rankfilter’</p>

_imaging.c:2902: error: expected ‘}’ before ‘_resize’</p>

_imaging.c:2903: error: expected ‘}’ before ‘_rotate’</p>

_imaging.c:2904: error: expected ‘}’ before ‘_stretch’</p>

_imaging.c:2905: error: expected ‘}’ before ‘_transpose’</p>

_imaging.c:2906: error: expected ‘}’ before ‘_transform2’</p>

_imaging.c:2908: error: expected ‘}’ before ‘_isblock’</p>

_imaging.c:2910: error: expected ‘}’ before ‘_getbbox’</p>

_imaging.c:2911: error: expected ‘}’ before ‘_getcolors’</p>

_imaging.c:2912: error: expected ‘}’ before ‘_getextrema’</p>

_imaging.c:2913: error: expected ‘}’ before ‘_getprojection’</p>

_imaging.c:2915: error: expected ‘}’ before ‘_getband’</p>

_imaging.c:2916: error: expected ‘}’ before ‘_putband’</p>

_imaging.c:2917: error: expected ‘}’ before ‘_fillband’</p>

_imaging.c:2919: error: expected ‘}’ before ‘im_setmode’</p>

_imaging.c:2921: error: expected ‘}’ before ‘_getpalette’</p>

_imaging.c:2922: error: expected ‘}’ before ‘_putpalette’</p>

_imaging.c:2923: error: expected ‘}’ before ‘_putpalettealpha’</p>

_imaging.c:2927: error: expected ‘}’ before ‘_chop_invert’</p>

_imaging.c:2928: error: expected ‘}’ before ‘_chop_lighter’</p>

_imaging.c:2929: error: expected ‘}’ before ‘_chop_darker’</p>

_imaging.c:2930: error: expected ‘}’ before ‘_chop_difference’</p>

_imaging.c:2931: error: expected ‘}’ before ‘_chop_multiply’</p>

_imaging.c:2932: error: expected ‘}’ before ‘_chop_screen’</p>

_imaging.c:2933: error: expected ‘}’ before ‘_chop_add’</p>

_imaging.c:2934: error: expected ‘}’ before ‘_chop_subtract’</p>

_imaging.c:2935: error: expected ‘}’ before ‘_chop_add_modulo’</p>

_imaging.c:2936: error: expected ‘}’ before ‘_chop_subtract_modulo’</p>

_imaging.c:2937: error: expected ‘}’ before ‘_chop_and’</p>

_imaging.c:2938: error: expected ‘}’ before ‘_chop_or’</p>

_imaging.c:2939: error: expected ‘}’ before ‘_chop_xor’</p>

_imaging.c:2944: error: expected ‘}’ before ‘_gaussian_blur’</p>

_imaging.c:2945: error: expected ‘}’ before ‘_unsharp_mask’</p>

_imaging.c:2950: error: expected ‘}’ before ‘_effect_spread’</p>

_imaging.c:2954: error: expected ‘}’ before ‘_new_array’</p>

_imaging.c:2955: error: expected ‘}’ before ‘_new_block’</p>

_imaging.c:2958: error: expected ‘}’ before ‘_save_ppm’</p>

_imaging.c:2967: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c: In function ‘image_length’:

_imaging.c:2996: error: ‘ImagingObject’ has no member named ‘image’</p>

_imaging.c: At top level:

_imaging.c:3001: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:3016: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘image_as_sequence’</p>

_imaging.c:3029: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘PyTypeObject’</p>

_imaging.c:3050: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘PyTypeObject’</p>

_imaging.c:3062: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘PyTypeObject’</p>

_imaging.c:3076: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘pixel_access_as_mapping’</p>

_imaging.c:3084: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘PyTypeObject’</p>

_imaging.c:3106: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:3107: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:3108: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:3109: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:3110: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:3111: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:3112: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:3113: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:3114: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:3115: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:3116: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:3117: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:3118: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:3119: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:3120: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:3123: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:3124: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:3125: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:3126: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:3127: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:3128: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:3129: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:3144: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:3147: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:3149: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:3150: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘*’ token

_imaging.c:3152: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute’ before ‘functions’</p>

_imaging.c:3250: warning: return type defaults to ‘int’</p>

_imaging.c: In function ‘DL_EXPORT’:

_imaging.c:3250: error: expected declaration specifiers before ‘init_imaging’</p>

_imaging.c:3281: error: expected ‘{’ at end of input

error: command 'gcc' failed with exit status 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T08:19:31.150

[使用Pillow](http://pypi.python.org/pypi/Pillow)可能会带来更好的运气。Pillow 是 PIL 的一个分支，它解决了 PIL 的 setuptools 不兼容问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T08:35:58.207

要在虚拟环境中安装 PIL，首先需要确保系统上的所有依赖项都可用。

首先，确保您的构建环境已安装。运行`sudo apt-get install build-essential`，然后运行以下命令：

```
sudo apt-get build-dep python-imaging 
```

完成后（可能需要一些时间），在不使用 sudo 的情况下激活您的虚拟环境*，*然后*在不使用 sudo*`pip install PIL`在您的虚拟环境中运行的情况下重新启动。

当您这样做时`sudo pip install PIL`，将其安装在系统范围的 Python 中，而不是在您的虚拟环境中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-06T09:03:48.370

[这是](https://darrenma.wordpress.com/2012/07/13/installing-pil-into-a-virtualenv-properly-in-ubuntu/)我在新机器上安装时使用的指南：

所需的依赖项：

*   libjpeg8
*   libjpeg8-dev
*   libfreetype6
*   libfreetype6-dev
*   zlib1g
*   zlib1g-dev

并仔细检查符号链接

高温高压

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-06T10:01:53.720

谢谢 Burhan Khalid 的指点，他们在路上送我。

我需要做的是

`sudo apt-get install python2.7-dev.`

这将 Python.h 添加到 usr/include/python2.7，然后 gcc 能够编译 PIL。

谢谢！

# mysql - Zend DB Expr 从先前的连接中获取值

> ID：14180434
> 
> 赞同：0
> 
> 时间：2013-01-06T08:05:52.517
> 
> 标签：mysql, zend-framework, zend-db

我在 zend db 查询中有以下代码

```
->join(array('z' => new Zend_Db_Expr('(' . $this->_dbhInstance->select()->from('zipcode', array('lat', 'lon', 'zip'))
                    ->group('zip') . ')')), 'zip = f.zipcode')
        ->join(array('distance' => new Zend_Db_Expr('(SELECT GetDistance(' . $lat . ',' . $lon . ',z.lat,z.lon) as distance)'))) 
```

问题是 z.lat,z.lon 没有从之前的连接 (>join(array('z')) 中获取值，它只是使用实际的文本。

如何格式化 z.lat,z.lon) 以从 >join(array('z' ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T05:38:53.167

这不起作用，因为 Join 具有树参数

```
->join(tableName,joinCondition,fetchParameters) 
```

但是你只写了两个...

# knockout.js - 使用淘汰赛js刷新网格

> ID：14180436
> 
> 赞同：0
> 
> 时间：2013-01-06T08:05:59.957
> 
> 标签：knockout.js, knockout-2.0, knockout-mvc

我是淘汰赛 js 的新手，一直在尝试使用淘汰赛刷新 Grid。这是我的视图模型

```
var GridViewModel = function () {
    var _this = {};

    _this.mainData = ko.observableArray();

  _this.DataFromServer= function()
    {
        var _transactions = $.getJSON('/data/getData', '', function (response) {
            if (response) {

                var results = ko.observableArray();
                _this.mainData.removeAll();
                results = response.mainData;
                for (var i = 0; i < results.length; i++) {
                    _this.mainData.push(results[i]);
                };

            }
        });
  }

ko.applyBindings(_this);
    _this.DataFromServer();
    return _this;

}

var viewModel = GridViewModel(); 
```

上面的代码工作正常并将数据从服务器绑定到网格，但我不确定如何在每 10 秒后再次绑定

我一直在像这样调用 Viewmodel 后使用 setInterval

```
 var viewModel = GridViewModel();

 setInterval(new GridViewModel(), 10000); 
```

但这不起作用。请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T08:34:24.957

没关系，找到解决方案。将 AJAX 方法移出 ViewModel 并在 AJAX 调用期间单独调用它。

# jsf - 在构建或部署期间检查 Facelets 文件的完整性

> ID：14180440
> 
> 赞同：4
> 
> 时间：2013-01-06T08:06:37.353
> 
> 标签：jsf, jboss, facelets

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T15:02:54.503

从理论上讲，像 WTP 和 JBosd 工具这样的 Eclipse 插件可以做到这一点，但到目前为止，这些插件只能在完整的 IDE 中工作，而不是作为可由 Ant 或 Maven 调用的单独命令行工具。

更糟糕的是，这些工具从来都不是完美的。他们总是报告大量误报，根据经验，他们的验证算法通常落后数年。当前版本的 WTP 可能只是勉强验证 Java EE 5 的所有内容（也许它仍然遗漏了一些晦涩的功能）。

因此，如果您基于此验证的构建失败，您可能永远无法部署任何东西。即使在最仔细编码和完全正确的 Web 应用程序中，WTP 和 JBoss 工具也发现有必要报告数百个或在大型项目中数千个警告和错误。恕我直言，依赖它完全没用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-06T15:07:32.760

这是一种鸡/蛋问题。正如您自己所说，许多 EL 表达式只能在运行时进行评估。

[请记住，EL 包含的不仅仅是简单的属性和方法名称，它还有不同的隐式对象（`params`、`facesContext`、`session`等），可在不同的上下文中使用，您还可以通过许多不同的方式将自己的对象添加到其中（其他 Facelets 模板，可能会或可能不会在 faces-config 中注册的 bean，甚至是在视图中插入对象的纯 Java 代码）。]

所有这些都导致使用这种类型的检查来构建工具变得非常困难。我认为最接近您想要的是使用[JSFUnit](http://www.jboss.org/jsfunit)和[Arquillian](http://www.jboss.org/arquillian.html)为每个页面创建自己的 JSF 单元测试，并将它们集成到您的构建中。由于您的目标是 JBoss 7，我认为这应该是可行的。

# python - Adding command line modifications to the interpreter setup in Aptana Studio on Mac

> ID：14180442
> 
> 赞同：0
> 
> 时间：2013-01-06T08:07:01.913
> 
> 标签：python, aptana

I'm using Aptana Studio with PyDev for my Python development.

When running my python scripts on my Mac, I want to add:

```
arch -i386 
```

on the front of the python command line so I get:

```
arch -i386 /Library/Frameworks/Python.framework/Versions/2.7/bin/python 
```

Aptana doesn't seem to let me do this though when setting up a new interpreter. I've also tried:

```
/usr/bin/arch -i386 /Library/Frameworks/Python.framework/Versions/2.7/bin/python 
```

Does anyone kow how I might do this?

!m!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T14:29:31.783

我一直有同样的问题，解决方案似乎很容易。

在 Aptana 中，转到解释器设置页面，那里会有一个按钮来添加一个新的解释器，执行此操作。在那里选择32位python的别名，即；

/Library/Frameworks/Python.framework/Versions/2.7/bin/python2.7-32

然后使用该解释器而不是默认的解释器，这对我有用。

# android - 在android中打印阿拉伯字符串

> ID：14180445
> 
> 赞同：1
> 
> 时间：2013-01-06T08:07:19.137
> 
> 标签：android, fonts

在我的应用程序中，我需要将一些字符串添加到列表中并将它们打印回来。问题是当我打印它们时，我可以看到字母与单词发生了互换。单词是阿拉伯语。（在 4.2 之前，android 不支持阿拉伯语）。我尝试的是使用几个阿拉伯语渲染类，例如 fursi 类和 Arabi 实用程序类。没有什么能帮助我。

这是这个词`٣.. ما زاد على` 实际上这部分`٣..`应该是第一个它总是正确的，正如我所展示的那样。有没有办法解决这个问题。这是将应用程序添加到市场中的唯一一个错误 :(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T06:33:22.440

哦，哎哟！阿拉伯语在这方面比希伯来语差，因为阿拉伯语有自己的数字！正确的！

我曾经在 Windows 上遇到过类似的问题，符号不完全被视为希伯来语，也不完全被视为非希伯来语。我发现解决此问题的*唯一*方法是将字符串分成两部分 - 打印有问题的符号（您的 300），然后打印字符串的其余部分。

我认为使用 Unicode 情况会变得更好。我想并非总是如此。

更新：在评论中你说字符串的翻译是 3..。在阿拉伯语中，零和点看起来非常相似（这就是我将点与零混淆的原因）。也许负责输入的人打错了，阿拉伯语也不流利？3.. 没有多大意义（3\. 有，300 也有，但是 3.. ？）。检查输入，它可能是错误的，这会混淆布局算法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T06:30:24.720

从技术上讲，我无法理解我采取行动纠正上述问题的原因。然而这就是它。`我用“+”反转单词和分隔的字母并添加到列表中。太神奇了！

# c++ - 使用 GUID 获取设备总是失败

> ID：14180446
> 
> 赞同：0
> 
> 时间：2013-01-06T08:07:40.410
> 
> 标签：c++, winapi, guid, ports

我正在尝试获取有关当前在 C++ Win32 中连接到计算机的设备的信息（位置信息、位置路径等）。我知道如何使用函数[SetupDiGetDeviceRegistryProperty()获取此信息](http://msdn.microsoft.com/en-us/library/windows/hardware/ff551967%28v=vs.85%29.aspx)

在我使用该函数之前`SetupDiGetDeviceRegistryProperty()`，我必须先调用[SetupDiGetSelectedDevice()](http://msdn.microsoft.com/en-us/library/windows/hardware/ff552011%28v=vs.85%29.aspx)，因为我需要在`SP_DEVINFO_DATA`里面传递一个作为参数`SetupDiGetDeviceRegistryProperty()`。这个对吗？

**我的问题：**我永远无法使用该功能获得设备`SetupDiGetSelectedDevice()`。当我调用该函数时，它总是失败，即返回 FALSE。`GetLastError()`返回代码 e0000211，我不确定这意味着什么。

我的以下代码出了什么问题？如果我使用错误的功能来*获取*设备，那么我应该使用什么功能来获取设备？

```
INT_PTR WINAPI WinProcCallback( HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam )
{
    switch (message)
    {
        case WM_DEVICECHANGE:
        {
            TCHAR strBuff[256];

            PDEV_BROADCAST_HDR h = (PDEV_BROADCAST_HDR) lParam;
            if (h->dbch_devicetype != DBT_DEVTYP_DEVICEINTERFACE) {
                printf("h->dbch_devicetype != DBT_DEVTYP_DEVICEINTERFACE\n");
                break;
            }

            switch (wParam)
            {
                case DBT_DEVICEARRIVAL:
                {
                    DWORD dataT = 0;
                SP_DEVINFO_DATA deviceInfoData = {0};
                deviceInfoData.cbSize          = sizeof(SP_DEVINFO_DATA);
                deviceInfoData.ClassGuid       = h->dbcc_classguid;

               // The following function always works and is successful
                HDEVINFO hDevInfo = SetupDiGetClassDevs(&h->dbcc_classguid, NULL, NULL, DIGCF_PRESENT | DIGCF_DEVICEINTERFACE);
                if (hDevInfo == INVALID_HANDLE_VALUE) {
                    printf("hDevInfo == INVALID_HANDLE_VALUE\n");
                    break;
                }

               // ERROR OCCURS HERE: The following function ALWAYS returns false: whats going wrong?
                if (SetupDiGetSelectedDevice(hDevInfo, &deviceInfoData) == FALSE) {
                    printf("SetupDiGetSelectedDevice(hDevInfo, &deviceInfoData) == FALSE\n");
                    break;
                }

               // Get device location information
               DWORD buffersize = 0;
                LPTSTR buffer    = NULL;
                while (!SetupDiGetDeviceRegistryProperty(hDevInfo,  &deviceInfoData, SPDRP_LOCATION_INFORMATION, &dataT,
                                                                   (PBYTE)buffer, buffersize, &buffersize))
                {
                    if (GetLastError() == ERROR_INSUFFICIENT_BUFFER) {
                        // Change the buffer size.
                        if (buffer) 
                            LocalFree(buffer);
                        buffer = (LPTSTR)LocalAlloc(LPTR, buffersize);
                    }
                }

                printf("Data: %d: %s\n", i, buffer);
                }
                break; 
```

# java - 执行 java 应用程序时 launch4j 出错

> ID：14180449
> 
> 赞同：-1
> 
> 时间：2013-01-06T08:07:58.067
> 
> 标签：java, mysql, database, jdbc, launch4j

我创建了一个成功创建的 Java 应用程序的 exe 文件。但是当我尝试执行它并在显示的表单中放置一些值时，按提交按钮，它显示错误：

> ```
> Executing: C:\Users\bhawna\Desktop\tto1.exe
> java.lang.ClassNotFoundException: com.mysql.jdbc.Driver   at java.net.URLClassLoader$1.run(Unknown Source)    at 
> ```
> 
> java.net.URLClassLoader$1.run(Unknown Source) at java.security.AccessController.doPrivileged(Native Method) at java.net.URLClassLoader.findClass(Unknown Source) at java.lang.ClassLoader.loadClass(Unknown Source) at sun .misc.Launcher$AppClassLoader.loadClass(Unknown Source) at java.lang.ClassLoader.loadClass(Unknown Source) at java.lang.Class.forName0(Native Method) at java.lang.Class.forName(Unknown Source) at ngo_interface .eventdetail.jButton1ActionPerformed(eventdetail.java:192) at ngo_interface.eventdetail.access$300(eventdetail.java:20) at ngo_interface.eventdetail$4.actionPerformed(eventdetail.java:89) at javax.swing.AbstractButton.fireActionPerformed(Unknown Source ) 在 javax.swing.DefaultButtonModel 的 javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)。fireActionPerformed(Unknown Source) at javax.swing.DefaultButtonModel.setPressed(Unknown Source) at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source) at java.awt.Component.processMouseEvent(Unknown Source) at javax.swing。 JComponent.processMouseEvent(Unknown Source) at java.awt.Component.processEvent(Unknown Source) at java.awt.Container.processEvent(Unknown Source) at java.awt.Component.dispatchEventImpl(Unknown Source) at java.awt.Container。 dispatchEventImpl(Unknown Source) at java.awt.Component.dispatchEvent(Unknown Source) at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source) at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source) at java.awt.LightweightDispatcher.dispatchEvent(未知来源）在 java.awt.Container。dispatchEventImpl(Unknown Source) at java.awt.Window.dispatchEventImpl(Unknown Source) at java.awt.Component.dispatchEvent(Unknown Source) at java.awt.EventQueue.dispatchEventImpl(Unknown Source) at java.awt.EventQueue.access$000 （未知源）在 java.awt.EventQueue$3.run（未知源）在 java.awt.EventQueue$3.run（未知源）在 java.security.AccessController.doPrivileged(Native Method) 在 java.security.ProtectionDomain$1。 doIntersectionPrivilege(Unknown Source) at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source) at java.awt.EventQueue$4.run(Unknown Source) at java.awt.EventQueue$4.run(Unknown Source) at java.security.AccessController java.security.ProtectionDomain 的 .doPrivileged(Native Method) $1.doIntersectionPrivilege(Unknown Source) 的 java.awt。EventQueue.dispatchEvent(Unknown Source) at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source) at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source) at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source) at java.awt.EventDispatchThread。 java.awt.EventDispatchThread.pumpEvents(Unknown Source) at java.awt.EventDispatchThread.run(Unknown Source) 的 pumpEvents(Unknown Source)EventDispatchThread.run（未知来源）EventDispatchThread.run（未知来源）

我应该怎么办？这些值不会进入数据库。
这是launch4j的日志文件：

```
CmdLine:    C:\Users\bhawna\Desktop\ttf1.exe --l4j-debug
WOW64:      yes
Check launcher:  (n/a)
64-bit search:  SOFTWARE\JavaSoft\Java Runtime Environment...
Match:      SOFTWARE\JavaSoft\Java Runtime Environment\1.6
Match:      SOFTWARE\JavaSoft\Java Runtime Environment\1.6.0_32
Match:      SOFTWARE\JavaSoft\Java Runtime Environment\1.7
Match:      SOFTWARE\JavaSoft\Java Runtime Environment\1.7.0
Using 64-bit runtime.
64-bit search:  SOFTWARE\JavaSoft\Java Development Kit...
Ignore:     SOFTWARE\JavaSoft\Java Development Kit\1.7
Ignore:     SOFTWARE\JavaSoft\Java Development Kit\1.7.0
Using 64-bit runtime.
Check launcher: C:\Program Files\Java\jre7\bin\javaw.exe (OK)
Add classpath:  mysql-connector-java-5.0.8-bin.jar
Add classpath:  beansbindings-1.2.1.jar
Launcher:   C:\Program Files\Java\jre7\bin\javaw.exe
Launcher args:  -classpath "C:\Users\bhawna\Desktop\ttf1.exe;mysql-connector-java-5.0.8-bin.jar;beansbindings-1.2.1.jar" ngo_interface.NewJFrame
Args length:    128/32768 chars
Exit code:  0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T08:23:01.967

只需在类路径中添加 mysql-connector jar 文件

# javascript - 本地正则表达式匹配变量未更新

> ID：14180452
> 
> 赞同：1
> 
> 时间：2013-01-06T08:08:08.730
> 
> 标签：javascript, regex, node.js

我正在遍历一组对象并将它们映射到我自己的自定义对象。我正在通过正则表达式提取数据。我第一次运行循环工作正常，但在随后的迭代中，虽然它们匹配，但匹配变量没有设置。

这是正则表达式之一：

```
var gameRegex   = /(\^?)([A-z]+)\s?(\d+)?\s+(at\s)?(\^?)([A-z]+)\s?(\d+)?\s\((.*)\)/g; 
```

这是我循环的初始部分：

```
for(var i = 1; i <= data.count; i++) {
    var gameMatch = gameRegex.exec(data["left" + i]);
    var idMatch = idRegex.exec(data["url" + i]); 
```

第一次，gameMatch 和 idMatch 有值。即使我已经测试过它们确实有效，以下迭代也不起作用。

如果我多次使用正则表达式，可能特别是在 Node.js 中，是否需要做一些事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T08:52:33.173

当你有一个带有全局标志的正则表达式并与之一起`/.../g`使用`exec()`时，JavaScript 会设置一个以`lastIndex`该正则表达式命名的属性。

```
s = "abab";
r = /a/g;
r.exec(s);    // ["a"]
r.lastIndex   // 1
r.exec(s);    // ["a"]
r.lastIndex   // 3
r.exec(s);    // null
r.lastIndex   // 0 
```

这意味着用于同一字符串中的多个匹配项。您可以`exec()`一次又一次地调用，并且每次调用`lastIndex`都会增加 - 自动定义下一次执行的开始位置：

```
while (match = r.exec(s)) {
  console.log(match);
} 
```

现在`lastIndex`将在第一次调用 后关闭`exec()`。但是由于您每次都传入不同的字符串，因此表达式将不再匹配。

有两种方法可以解决这个问题：

*   手动设置`r.lastIndex = 0`每次或
*   删除`g`全局标志

在您的情况下，后一种选择将是正确的选择。

* * *

进一步阅读：

*   [`.exec()`在 MDN 上](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/exec)
*   [`.exec()`在 MSDN 上](http://msdn.microsoft.com/en-us/library/ie/z908hy33%28v=vs.94%29.aspx)
*   [regular-expressions.info 上的“如何使用 JavaScript RegExp 对象”](http://www.regular-expressions.info/javascript.html)

# android - monodroid 打印

> ID：14180454
> 
> 赞同：0
> 
> 时间：2013-01-06T08:08:38.277
> 
> 标签：android, xamarin.android

我有一台 BIXOLON 移动打印机，我可以在 windows mobile 程序中通过此设备进行打印。我想在 MONODOIRD 应用程序中通过此设备打印...有 sdk，但使用该 sdk 的库是 java...有谁知道我如何在 monodroid 中通过此设备打印？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T16:00:31.510

你的“lib”是一个`.jar`文件吗？如果是，则[绑定它](http://docs.xamarin.com/Android/Guides/Advanced_Topics/Java_Integration_Overview/Binding_a_Java_Library_%28.jar%29)，这将使它可以从 C# 访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T08:31:47.147

在我阅读了有关绑定 jar 文件的 xamarin 帮助后，我得到了一些错误......我在这篇文章的末尾列出......我需要这个 jar 文件完全编译......

反映 com.bixolon.android.library.BxlService 时引发警告 1 缺少类错误：android/hardware/usb/UsbManager

反映 com.bixolon.android.library.UsbLauncher 时引发警告 2 缺少类错误：android/hardware/usb/UsbManager

警告 3 对于 ConnectThread，找不到封闭类型“BxlService”。

警告 4 对于 ConnectThread，找不到封闭类型“BxlService”。

警告 5 对于 ConnectedThread，找不到封闭类型“BxlService”。

警告 6 对于 ConnectedThread，找不到封闭类型“BxlService”。

# z3 - 此文件是否符合 SMT2.0 标准？

> ID：14180457
> 
> 赞同：1
> 
> 时间：2013-01-06T08:08:56.840
> 
> 标签：z3, smt

[点击查看文件](http://seg.nju.edu.cn/BACH/Demo/water_1.smt2)

此文件是否符合 SMT2.0 标准？至少，z3 可以接受它。顺便说一句，“declare-const”和“declare-fun”有什么区别？例如，为了声明一个 Bool 变量，我可以编写`declare-const a Bool`or `declare-fun a() Bool`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T10:29:21.417

我无法找到您在帖子中提到的文件，但要回答您关于 declare-const 的问题：

```
(declare-const a Bool) 
```

意思是一样的

```
(declare-fun a () Bool) 
```

declare-const 不是标准 SMT-LIB2 的一部分。它是为了方便手动输入 SMT-LIB2 基准而添加到 Z3 的命令。您始终可以使用 declare-fun 来兼容跨求解器。

而 Z3 可以处理符合 SMT-LIB2 的文件。另一方面，Z3 的输入格式中还有几个其他扩展不属于 SMT-LIB2 标准。提一些：

*   声明数据类型。代数数据类型的声明是 Z3 特定的扩展。

*   战术和解决方案。战术的创建、组合和应用是 Z3 特有的。

*   声明-rel，声明-var，规则，查询。定点求解器使用这些命令是为了方便将基准作为 Horn 公式输入。

# c# - LINQ to entity（创建一个新表，显示数据库中的所有表）

> ID：14180458
> 
> 赞同：0
> 
> 时间：2013-01-06T08:08:58.090
> 
> 标签：c#, database, linq, linq-to-entities

我已经尝试解决这个问题几个小时了，谷歌搜索并没有产生任何有用的东西，我目前正在准备考试，我相信我需要知道这些事情，所以我希望有人可以帮我！

我有两个问题；

1.  不能创建新表吗？（或者我相信它被称为实体）

2.  而且，是否可以显示您拥有的所有表格？

我正在制作一个小型表单项目，我基本上只是在制作将执行 Linq to Entity 证明的不同命令的方法。

比如一个控件来创建一个新的表，名称放在文本框中，一个列表框显示数据库中的所有表等等。

希望有人能够提供帮助。

〜埃塔纳拉祖尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T08:11:53.527

1：不，列出MOST ORM的它是一种数据访问技术。EntityFramework 具有架构更新等，但这又不是“运行时”。

2：不，再说一遍，这不是管理数据库的技术。你只能查询你有什么课程。

好吧，2 是可能的，但是您必须在运行时在单独的 appdomain 中生成类，然后使用它来查询数据。

# codeigniter - Codeigniter - 忘记密码

> ID：14180462
> 
> 赞同：6
> 
> 时间：2013-01-06T08:11:05.213
> 
> 标签：codeigniter, passwords

您好：我需要在登录页面实现忘记密码。在这里，我解释了我到目前为止所拥有的。

1.  恢复视图提示收到电子邮件输入
2.  功能`email_exists()`将验证电子邮件。如果是这样，则`send_email()`使用`$temp_pass`密钥和链接。数据库将存储 $temp_pass 以供进一步操作和验证。
3.  用户单击先前发送`$temp_pass`给函数 reset_password 的链接。
4.  模型控制器将`$temp_pass`与数据库进行验证。如果是这样，请加载视图以输入新密码 - 这就是我卡住的地方，因为表单指向一个无法识别的控制器，`$temp_pass`因此无法重置密码。

如何找回与正确用户关联的新密码并重置密码？

下面的代码：

## 控制器

```
 public function recover(){
    //Loads the view for the recover password process.
    $this->load->view('recover');
}
public function recover_password(){
    $this->load->library('form_validation');
    $this->form_validation->set_rules('email', 'Email', 'required|trim|xss_clean|callback_validate_credentials');

            //check if email is in the database
        $this->load->model('model_users');
        if($this->model_users->email_exists()){
            //$them_pass is the varible to be sent to the user's email 
            $temp_pass = md5(uniqid());
            //send email with #temp_pass as a link
            $this->load->library('email', array('mailtype'=>'html'));
            $this->email->from('user@yahoo.com', "Site");
            $this->email->to($this->input->post('email'));
            $this->email->subject("Reset your Password");

            $message = "<p>This email has been sent as a request to reset our password</p>";
            $message .= "<p><a href='".base_url()."main/reset_password/$temp_pass'>Click here </a>if you want to reset your password,
                        if not, then ignore</p>";
            $this->email->message($message);

            if($this->email->send()){
                $this->load->model('model_users');
                if($this->model_users->temp_reset_password($temp_pass)){
                    echo "check your email for instructions, thank you";
                }
            }
            else{
                echo "email was not sent, please contact your administrator";
            }

        }else{
            echo "your email is not in our database";
        }
}
public function reset_password($temp_pass){
    $this->load->model('model_users');
    if($this->model_users->is_temp_pass_valid($temp_pass)){

        $this->load->view('reset_password');

    }else{
        echo "the key is not valid";    
    }

}
public function update_password(){
    $this->load->library('form_validation');
        $this->form_validation->set_rules('password', 'Password', 'required|trim');
        $this->form_validation->set_rules('cpassword', 'Confirm Password', 'required|trim|matches[password]');
            if($this->form_validation->run()){
            echo "passwords match"; 
            }else{
            echo "passwords do not match";  
            }
} 
```

## 模型_用户

```
 public function email_exists(){
    $email = $this->input->post('email');
    $query = $this->db->query("SELECT email, password FROM users WHERE email='$email'");    
    if($row = $query->row()){
        return TRUE;
    }else{
        return FALSE;
    }
 }
public function temp_reset_password($temp_pass){
    $data =array(
                'email' =>$this->input->post('email'),
                'reset_pass'=>$temp_pass);
                $email = $data['email'];

    if($data){
        $this->db->where('email', $email);
        $this->db->update('users', $data);  
        return TRUE;
    }else{
        return FALSE;
    }

}
public function is_temp_pass_valid($temp_pass){
    $this->db->where('reset_pass', $temp_pass);
    $query = $this->db->get('users');
    if($query->num_rows() == 1){
        return TRUE;
    }
    else return FALSE;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T08:41:31.557

我不太确定你被困在哪里。我可以得到这样一个事实，即您正在为用户创建一个临时标志，您在用户单击链接时验证该标志。因此，这意味着，您可以在该点开始一个会话，并且用户只能重置密码，前提是该特定会话处于活动状态。

在这一步之后，你要求用户输入他的新密码，并且由于你有你`$temp_pass`为用户调用的临时标志（请注意它应该是唯一的），那么你可以得到试图重置的用户密码。

因此，您需要做的就是运行这种数据库查询 -

```
$this->db->where('reset_pass', $temp_pass);
$this->db->update('users', $data); // where $data will have the fields with values you are updating 
```

* * *

## 我猜你犯了一个错误

`recover_password()`另外，我刚刚在您的功能中注意到-

```
$message .= "<p><a href='".base_url()."main/reset_password/$temp_pass'>Click here </a>if you want to reset your password, if not, then ignore</p>"; 
```

上面的行不应该是 -

```
$message .= "<p><a href='".base_url()."main/reset_password/".$temp_pass."'>Click here </a>if you want to reset your password, if not, then ignore</p>"; 
```

## 更新

您可以`$temp_pass`进入会话并从那里检索。这是解决问题的一种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-04T09:21:48.293

我想建议对您的密码重置程序进行一些改进。

1.  如果您将重置信息与用户模型分开存储在自己的数据库表中，则可以将其他信息（如到期日期、用户 ID 和已使用标志）与令牌一起存储。用户模型将保持干净，多次重置不会相互干扰。
2.  重置令牌不应直接存储在数据库中，而应仅存储令牌的**哈希值**。具有数据库读取权限（SQL 注入）的攻击者可以重置他希望的任何帐户。
3.  令牌应该是不可预测的，`md5(uniqid())`如果您知道重置完成的时间，可能会严重缩小范围。

我发布了一些[示例代码](http://www.martinstoeckli.ch/php/php.html#passwordreset)，介绍了这样一个密码重置过程的外观，以及一个可以生成安全令牌的类。

# windows - 如何在rasdial中保存密码？

> ID：14180472
> 
> 赞同：9
> 
> 时间：2013-01-06T08:12:54.820
> 
> 标签：windows, vpn

伙计们。

我想在我的应用程序中使用 Windows RASDIAL 连接到 VPN。

我正在使用这个 cmd 命令：

```
rasdial a-1 username pass 
```

我只想知道，如何在此命令中保存密码以供下次连接？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-01-11T11:49:39.760

在 Windows 10 中，`rasphone`将始终提示输入凭据（跳过此步骤的选项已消失。感谢 Microsoft！）。`rasdial`但是我可以通过使用 EAP 身份验证来使用我保存的密码：

![](../Images/7197a9859aa0ea4188f73c8beb7c5e4e.png)

如果没有 EAP，MS-CHAP v2 将无法工作。

现在我可以执行`rasdial VpnName`，它使用我保存的密码。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-01-09T13:01:46.480

可能OP已经解决了问题（4年前问过），但`rasdial`无法保存密码。但是您可以将存储在 Windows 中的凭据与`rasphone`. 记得取消勾选“提示输入姓名和密码、证书等”。在连接属性中跳过对话框。

> 您可以使用 rasphone.exe 使用存储的凭据拨打连接：
> 
> `rasphone -d "VPN NAME"`
> 
> 挂断：
> 
> `rasphone -h "VPN NAME"`
> 
> 您还需要进入 VPN 连接属性的选项选项卡并取消选中“提示输入名称和密码、证书等”。

[https://superuser.com/a/894969/27235](https://superuser.com/a/894969/27235)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-06-11T23:41:47.787

要在没有用户交互的情况下连接到 VPN 并避免在批处理文件中记下密码，您可以使用...

`rasphone -d VPNname`

...并使用此答案删除“提示输入用户名和密码”对话框... [https://superuser.com/a/1027290/418793](https://superuser.com/a/1027290/418793)

# c# - 如何填充 C# 列表并在列表中的项目与 SQL 过程丰富的某些值之间执行乘法运算

> ID：14180478
> 
> 赞同：0
> 
> 时间：2013-01-06T08:14:37.643
> 
> 标签：c#, list, matrix, multiplication

我会寻求一些与我的问题相关的帮助。

我需要根据公式在 C# 中计算：

(Ra,p -RavgA) 其中：

1.  Ra,p 是“用户 a 对项目 p 的评分”和
2.  RavgA 是“用户的平均评分”

为了达到数据“用户对项目 p 的评价”，我正在使用 SQL 存储过程：

```
SELECT     Ocjena_ID 
```

从 OcjeneKorisnika 哪里 (Korisnik_ID = @Korisnik_ID)

例如，这个存储过程为我提供了 "Ocjena_ID" 的值：

1.  4
2.  5
3.  5

要在 C# 中填充列表，在 DBBL 中我定义了：

```
public List<SelectOcjeneZaDoSadaOcjenjeneArtikleSP_Result> SelectOcjeneZaDoSadaOcjenjeneArtikleSP(int Korisnik_ID)
    {
        return context.SelectOcjeneZaDoSadaOcjenjeneArtikleSP(Korisnik_ID).ToList();

    } 
```

为了计算“用户的平均评分”，我在 CB 中使用：

```
string connectionString = "Data Source=localhost;Initial Catalog=OnLineTeaShop;Trusted_Connection=True;";
            using (SqlConnection conn = new SqlConnection(connectionString))
            {
                using (SqlCommand cmd = new SqlCommand("dbo.AVG_Evaluation_for_CustomerV2SP"))
                {
                    cmd.CommandType = CommandType.StoredProcedure;
                    cmd.Parameters.Add(new SqlParameter("@Korisnik_ID", Convert.ToInt32(Session["UserID"])));

                    SqlParameter countParameter = new SqlParameter("@retAVGVal", SqlDbType.Float);
                    countParameter.Direction = ParameterDirection.Output;
                    cmd.Parameters.Add(countParameter);

                    conn.Open();
                    cmd.Connection = conn;

                    cmd.ExecuteNonQuery();
                    string SrednjaVrijednost = cmd.Parameters["@retAVGVal"].Value.ToString();

                    txtAktvniAVG.Text = SrednjaVrijednost;

                    conn.Close();
                }

            } 
```

这段代码给了我 txtAktivniAVG 字段值 4,67。

问题是如何从 CB 文件中的列表中获取数据并计算列表中每个项目的乘法值，达到“用户平均评分”的值，并创建/填充需要 1 行和 i （在本例中为 3）列的矩阵用那些数据？

预先感谢您的支持。

BR,

达米尔

# android - 如何使用代码更改前景和背景图片？

> ID：14180482
> 
> 赞同：0
> 
> 时间：2013-01-06T08:15:11.860
> 
> 标签：android, seekbar

我在seekbar中定义了前景图片和背景图片。现在它可以在搜索栏中很好地显示前景和背景。

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <!-- background picture -->
    <item android:id="@android:id/background"
          android:drawable="@drawable/back" />    
    <!-- energy diagram -->
    <item android:id="@android:id/progress" 
          android:drawable="@drawable/fill" />
</layer-list> 
```

如何使用Java代码实现更改前景图片和背景图片？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T08:48:29.023

***XML 布局明智***

**seekbar_progress.xml，把它放在你的 /res/drawable/ 文件夹中：**

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
<item android:id="@android:id/background">
    <nine-patch
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:src="@drawable/seekbar_background"
        android:dither="true"
     />
</item>
<item android:id="@android:id/secondaryProgress">
    <clip>
        <shape>
            <gradient
                android:startColor="#80028ac8"
                android:centerColor="#80127fb1"
                android:centerY="0.75"
                android:endColor="#a004638f"
                android:angle="270"
            />
        </shape>
    </clip>
</item>
<item
    android:id="@android:id/progress"
    android:drawable="@drawable/seekbar_progress_bg"
/>
</layer-list> 
```

***搜索栏***

```
 <SeekBar
    android:id="@+id/frequency_slider"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:max="20"
    android:progress="0"
    android:secondaryProgress="0"
    android:progressDrawable="@drawable/seekbar_progress"
    android:thumb="@drawable/seek_thumb"
 /> 
```

* * *

***以编程方式***

```
// ------------ custom seekbar
LayerDrawable layer = (LayerDrawable) verticalSeekBar_1.getProgressDrawable();

Drawable draw1 = (Drawable)layer.findDrawableByLayerId(android.R.id.progress);
Bitmap bitmap1 = BitmapFactory.decodeResource(getApplicationContext().getResources(), R.drawable.scroll_on);

draw1 = new ClipDrawable(new BitmapDrawable(bitmap1), Gravity.AXIS_PULL_BEFORE, ClipDrawable.HORIZONTAL);

layer.setDrawableByLayerId(android.R.id.progress, draw1);

Drawable draw2 = (Drawable) layer.findDrawableByLayerId(android.R.id.background);

Bitmap bitmap2 = BitmapFactory.decodeResource(getApplicationContext().getResources(), R.drawable.scroll_off);

draw2 = new BitmapDrawable(bitmap2);
layer.setDrawableByLayerId(android.R.id.background, draw2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T08:36:12.160

`layer-list`xml 资源实际上创建了一个`LayerDrawable`实例。您可以使用方法更改其图层`setDrawableByLayerId`或使用您想要的任何图层创建新的可绘制实例。

# redirect - 如何将旧的 joomla 文章重定向到主目录并删除语言代码

> ID：14180483
> 
> 赞同：0
> 
> 时间：2013-01-06T08:15:19.303
> 
> 标签：redirect, joomla, seo

我用新设计的旧网页重建了网站，其网址以 .html 结尾。网页有 3 种语言。域保持不变。

我打算做几件事：

1.  删除所有网址末尾的 .html。
2.  将旧新闻文章重定向到主要新闻（2 种语言）目录。
3.  从主要语言中删除语言代码 /lv。
4.  重写没有 /lv 和 html 的主要语言新闻文章 url。

主要产品/联系人/信息我将使用 joomla 内置的重定向系统手动重定向（它们很少），但新闻文章很旧（每种语言大约 500 篇），我想将 /en 和 /ru 重定向到基于语言的新闻类别。

我导出到新网页的主要语言新闻，但现在他们最后没有语言代码 /lv 和 .html。

旧网址看起来像：http: [//vervo.lv/ru/news/43-jaunumi/538-2012gad-transporta-joma-butiski-attistjusas-attiecibas-ar-afganistanu.html](http://vervo.lv/ru/news/43-jaunumi/538-2012gad-transporta-joma-butiski-attistjusas-attiecibas-ar-afganistanu.html)

我计划将它们重定向到 mysite.lv/ru/novosti、mysite.lv/en/news

是否可以将目录 mysite.lv/ru/news.html 中的所有内容重定向到 mysite.lv/ru/news 并且对于 3 种语言都一样？不重定向其他东西？

你能建议如何正确地做到这一点。我不是程序员。只是高级 joomla 用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T21:01:33.297

是的，这可以通过 .htaccess 和 mod_rewrite 实现。如果它不起作用，请尝试评论或删除 Options +FollowSymLinks 行。

```
<IfModule mod_rewrite.c>
    Options +FollowSymLinks
    RewriteEngine on

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d

    # Remove .html
    RewriteRule ^(.*)\.html$ /$1 [NC]

    # Strip main language code
    RewriteRule ^lv/(.*) /$1 [NC,R=301,L]

    # Redirect old to new RU news
    RewriteRule ^ru/news/43-jaunumi/(.*) /ru/novosti/$1 [NC,R=301,L]

    # Redirect old to new EN news
    RewriteRule ^en/news/43-jaunumi/(.*) /en/news/$1 [NC.R=301,L]
</IfModule> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T08:13:07.083

一种更简单的非程序员方法可能是使用 SEF 组件（或 joomla 重定向），但这比实现 mrfeelgood 的解决方案需要更长的时间。尝试 sh404 以获得易于使用的解决方案。

# kendo-ui - HTML5 标签中 Kendo UI 属性的智能感知

> ID：14180486
> 
> 赞同：0
> 
> 时间：2013-01-06T08:15:48.690
> 
> 标签：kendo-ui

如何在 HTML 5 标签中获取 KendoUI 属性的智能感知？我`kendo.all-vsdoc.js`在我的 HTML 文件中引用了但仍然没有获得 KendoUI 属性的智能感知。

例如：

```
<section data-role="layout" data-id="default">
    <header data-role="header">
        <div data-role="navbar">My App</div>
    </header>

    <footer data-role="footer">
        <div data-role="tabstrip">
            <a href="#">Home</a>
        </div>
    </footer>
</section> 
```

智能感知没有获取诸如`data-role`,之类的属性`data-id`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T09:26:32.257

目前，您无法获得特定于剑道的数据属性的智能感知。vsdoc 文件用于 JavaScript。

# java - 谁能给我使用 Volatile 的例子

> ID：14180488
> 
> 赞同：-2
> 
> 时间：2013-01-06T08:15:57.350
> 
> 标签：java, static, volatile

> **可能重复：**
> [静态全局变量和静态易失变量有什么区别？](https://stackoverflow.com/questions/346306/what-is-the-difference-between-a-static-global-and-static-volatile-variable)

```
public class Test {
volatile  boolean running = true;

public void count() {
    new Thread(new Runnable() {
        public void run() {
            int counter = 0;
            while (running) {

                counter++;
                System.out.println("Thread 1 counting " + counter);
            }
            System.out.println("Thread 1 finished. Counted up to "
                    + counter);
        }
    }).start();
    new Thread(new Runnable() {
        public void run() {             
            try {
                Thread.sleep(1);
            } catch (InterruptedException ignored) {
            }
            System.out.println("Thread 2 finishing");
            running = false;
        }
    }).start();
}

public static void main(String[] args) {

    new Test().count();
}
} 
```

我没有发现静态变量和易失变量之间的区别？

在上面的代码中，我也可以用静态变量来实现同样的事情，任何人都可以给我举个例子，只有 volatile 才能达到目的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T08:28:22.787

我脑海中浮现的第一个：

[http://www.docjar.com/html/api/java/util/concurrent/atomic/AtomicLong.java.html](http://www.docjar.com/html/api/java/util/concurrent/atomic/AtomicLong.java.html)

在值上使用 volatile 来强制更新的原子性。

# php - 来自一个 MySQL 表的数据将在另一个表中使用

> ID：14180493
> 
> 赞同：0
> 
> 时间：2013-01-06T08:16:26.147
> 
> 标签：php, mysql, select, inner-join

**概括：**

当显示来自 TABLE2 的数据时，将 TABLE2 的 TOPIC 字段中的数字替换为来自 TABLE1 的相关 TOPIC_NAME。

**细节：**

我在同一个 MySQL 数据库中有 2 个表。我需要帮助从 TABLE1 填充数组以供 TABLE2 使用。如果重要的话，我正在使用 PDO。

没有更新或插入......只显示单词而不是数字。

我是否将 TABLE2 Foreach 显示循环嵌套在 TABLE1 的 Foreach 循环中？

或者...

我可以先用 TOPIC 数据填充一个数组，然后执行 TABLE1 Foreach 显示循环吗？

或者...

我可以使用 TABLE2 中的数据引用 TABLE1 中的 TOPIC_NAME 而不创建数组吗？

或者...

？？？

==============================

**TABLE1**是主题列表。

表 1 语法：

TOPIC_NUM,TOPIC_NAME

来自表 1 的样本记录：

1、主题1

2、主题2

ETC...

==============================

**表 2**是个人和相关数据的列表。

表 2 语法：

ID，姓名，州，主题，年份

来自表 2 的样本记录：

1，约翰·史密斯，MA，2，2005

2，Jane Doe，亚利桑那州，2009 年 1 月

ETC...

==============================

仅供参考：在上面的示例记录中，州缩写后面的数字是 TOPIC。

这是我的代码：

```
<?php 

try {

    $db = new PDO("mysql:host=$hostname;dbname=$database", $username, $password);

    $db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

    $db->exec("SET CHARACTER SET utf8");

// TABLE1
$tablename1 = 'topics';
$topics_col1 = 'TOPIC_NUM';
$topics_col2 = 'TOPIC_NAME';

// TABLE2
$tablename2 = 'people';
$items_col1 = 'NAME';
$items_col2 = 'STATE';
$items_col3 = 'TOPIC';
$items_col4 = 'YEAR';

$items_q = "SELECT $items_col1, $items_col2, $items_col3 FROM $tablename2";
$items = $db->query($items_q);

foreach ($items as $items_row) {
?>

<h2><?php 
/*

THIS IS WHERE THE TOPIC_NAME FROM TABLE1 SHOULD DISPLAY

*/
?></h2>

<p>
<?php echo $items_row[$items_col1];?>
<br />
<?php echo $items_row[$items_col2];?>
<br />
<?php echo $items_row[$items_col3];?>
<br />
<?php echo $items_row[$items_col4];?>
</p>

<?php   
} // end FOREACH

    $db = null; // close the database connection

} // end TRY
catch(PDOException $e) {
    echo '<span class="error">ERROR:</span><br />'.$e->getMessage() . "<br />";
    die();
} // end CATCH

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T08:22:16.773

只需使用`INNER JOIN`

```
SELECT  a.ID, a.NAME, a.STATE, b.TOPIC_NAME , a.YEAR
FROM    table2 a
        INNER JOIN table1 b
            ON  a.topic = b.topic_num 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/d7be9/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T03:11:01.630

为了将来参考，这里是这个脚本的最终版本。我已经包含了一个注释部分，它显示了使用“点”方法的查询的替代编码方法。

我已经测试了这个脚本（使用这两种方法）并且它运行良好。

```
<?php 

try {

    $db = new PDO("mysql:host=$hostname;dbname=$database", $username, $password);

    $db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

    $db->exec("SET CHARACTER SET utf8");

// TABLE1
$tablename1 = 'topics';
$topics_col1 = 'TOPIC_NUM';
$topics_col2 = 'TOPIC_NAME';

// TABLE2
$tablename2 = 'people';
$items_col1 = 'NAME';
$items_col2 = 'STATE';
$items_col3 = 'TOPIC';
$items_col4 = 'YEAR';

$items_q = "SELECT $items_col1, $items_col2, $items_col3, $items_col4, $topics_col2 
FROM $tablename2 
JOIN $tablename1 on ($items_col3 = $topics_col1)";

/* ALTERNATE METHOD FOR QUERY

(*No need for all of the vars above using this method.)
$items_q = "SELECT $tablename2.NAME, $tablename2.STATE, $tablename2.TOPIC, $tablename2.YEAR, $tablename1.TOPIC_NAME 
FROM $tablename2 
INNER JOIN $tablename1 on ($tablename2.TOPIC = $tablename1.TOPIC_NUM)";

*/

$items = $db->query($items_q);

foreach ($items as $items_row) {
?>

<h2><?php echo $items_row[$topics_col2];?></h2>

<p>
<?php echo $items_row[$items_col1];?>
<br />
<?php echo $items_row[$items_col2];?>
<br />
<?php echo $items_row[$items_col3];?>
<br />
<?php echo $items_row[$items_col4];?>
</p>

<?php   
} // end FOREACH

    $db = null; // close the database connection

} // end TRY
catch(PDOException $e) {
    echo '<span class="error">ERROR:</span><br />'.$e->getMessage() . "<br />";
    die();
} // end CATCH

?> 
```

# php - HTML5 PHP AJAX 上传：PHP 不工作

> ID：14180498
> 
> 赞同：0
> 
> 时间：2013-01-06T08:17:12.200
> 
> 标签：php, ajax, html, upload

我正在尝试编写自己的 php 上传器，以便学习和理解它是如何工作的。尽量不使用任何库/插件/API。所以基本上我有 javascript 的东西做它应该是的（我希望..）。现在我被困在PHP上。我希望它上传并保存为 img/1.png。（不使用任何变量来测试它......）。这是我的脚本。保持非常简单，没有任何错误检查，只是为了让基本的上传工作。这适用于多个文件吗？有人可以指导我只为非常基本的（多）文件上传我的 PHP 文件应该是什么样子吗？谢谢！

专辑创建.js

```
$(document).ready(function() {
  $('#album_create').submit(function() {
    var file = document.getElementById('album-files').files[0]; //Files[0] = 1st file
    var reader = new FileReader();

    reader.onload = function(f) {shipOff(f);};
    reader.onerror = function(event) {
      console.error("File could not be read! Code " + event.target.error.code);
    };
    reader.readAsText(file, 'UTF-8');
    return false;
  });
});

function shipOff(event) {
  var result = event.target.result;
  var fileName = document.getElementById('album-files').files[0].name; //Should be 'picture.jpg'
  console.log(fileName);
  $.post('ajax/album_create.php', { data: result, name: fileName }, function(data){console.log(data);});
  return false;
} 
```

ajax/album_create.php

```
$data = $_POST['data'];

move_uploaded_file($data[0], 'img/1.png'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T08:29:32.217

您正在发布：

```
data: result, name: fileName 
```

但album_create.php 期待：

```
 $data = $_POST['data'];
    $fileName = $_POST['fileName']; 
```

`$fileName = $_POST['fileName'];` 应该：`$fileName = $_POST['name'];`

# java - 将 jar 文件 URI 转换为文件

> ID：14180499
> 
> 赞同：0
> 
> 时间：2013-01-06T08:17:32.800
> 
> 标签：java, jar, embedded-resource

我需要从我的 Jar 中访问一个配置文件，所以我使用：

```
URL configUrl = Object.class.getResource("/config.xml"); 
```

现在我需要将 URL 转换为 File 对象，因为这是下游的 ConfigurationFile 对象初始化所需的。当我尝试这个时：

```
new File(configUrl.toURI()) 
```

我得到：

```
 java.lang.IllegalArgumentException: URI is not hierarchical 
```

当我尝试这个时：

```
 new File(Thread.currentThread().getContextClassLoader().getResource("config.xml").getFile()) 
```

我得到：

```
File does not exist: 'file:\E:\Apps\jarfile.jar!\config.xml' 
```

注意：不幸的是，我必须在 InputStream 上有一个 File 对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T08:30:53.073

你的问题没有意义。资源可能在 JAR 文件中，而 JAR 文件中的项目根本不是文件，或者`File.`

时期。

如果您需要一个`File`对象，您将不得不与 JAR 文件分开分发该项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T08:55:22.273

如果文件在 JAR 中...您可以使用 getResourceAsStream() 并直接读取或使用 URL...

```
URL urlConfig = Object.class.getResource(CONFIG_FILE);
if (urlConfig == null) {
    // throw <error>
}
URLConnection connConfig = urlConfig.openConnection();
InputStream isConfig = connConfig.getInputStream(); // do things 
```

将内容保存到临时文件...（等待 1 秒...嗯）

```
public static File doThing(InputStream is) throws IOException {
    File tmp = null;
    FileOutputStream tmpOs = null;
    try {
        tmp = File.createTempFile("xml", "tmp");
        tmpOs = new FileOutputStream(tmp);
        int len = -1;
        byte[] b = new byte[4096];
        while ((len = is.read(b)) != -1) {
            tmpOs.write(b, 0, len);
        }
    } finally {
        try { is.close(); } catch (Exception e) {}
        try { tmpOs.close(); } catch (Exception e) {}
    }
    return tmp;
} 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-01-06T08:24:28.300

你有没有试过这个：

```
文件 f;
尝试 {
  f = 新文件(url.toURI());
} 捕捉（URISyntaxException e）{
  f = 新文件(url.getPath());
}

```

# jquery - jQuery 显示/隐藏

> ID：14180500
> 
> 赞同：1
> 
> 时间：2013-01-06T08:17:34.883
> 
> 标签：jquery, function, hide, show

我正在尝试为显示/隐藏功能制作简单的 jquery 代码。但我仍然做错了什么。

```
$(document).ready(function(){
    $('.arrow').click(function() {
        $('#box').show("slow");     
    });

    $('.arrow').click(function() {
        $('#box').hide("slow");
    }); 
    $('.arrow').click(function() {
        $('#box').show("slow");     
    }); 
}); 
```

[http://jsfiddle.net/Armgh/](http://jsfiddle.net/Armgh/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-06T08:20:48.817

使用[`toggle`](http://api.jquery.com/toggle/)：

```
$(document).ready(function(){
    $('.arrow').click(function() {
        $('#box').toggle('slow');       
    }); 
}); 
```

[http://jsfiddle.net/Armgh/1/](http://jsfiddle.net/Armgh/1/)

或者您可以保存您的状态并手动切换：

```
$(document).ready(function(){
    var hidden = false;
    $('.arrow').click(function() {
        if (hidden) {
            hidden = true;
            $('#box').hide("slow");
        } else {
            hidden = false;
            $('#box').show("slow");
        }
    });
}); 
```

[http://jsfiddle.net/Armgh/](http://jsfiddle.net/Armgh/)

**编辑**

使用[`slideUp`](http://api.jquery.com/slideUp/)/ [`slideDown`](http://api.jquery.com/slideDown/)，你可以这样做：

```
$(document).ready(function(){
    var hidden = false;
    $('.arrow').click(function() {
        if (hidden) {
            hidden = false;
            $('#box').slideDown("slow");
        } else {
            hidden = true;
            $('#box').slideUp("slow");
        }
    });
}); 
```

[http://jsfiddle.net/Armgh/3/](http://jsfiddle.net/Armgh/3/)

或使用[幻灯片切换](http://api.jquery.com/slideToggle/)

```
$(document).ready(function(){
    $('.arrow').click(function() {
        $('#box').slideToggle("slow");
    });
}); 
```

[http://jsfiddle.net/Armgh/4/](http://jsfiddle.net/Armgh/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T08:24:56.290

您应该简单地使用 .toggle 功能：

```
$(document).ready(function(){

    $('.arrow').click(function() {
        $('#box').toggle("slow");     
    });

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-10T19:53:39.693

`slow`您也可以使用带有 [ , `medium`, `fast`] 参数的任何切换，

```
 $(document).ready(function(){
        $('.arrow').on('click', function() {
            $('#box').toggle("slow");  
        });
    }); 
```

# javascript - 如何制作使用 Javascript 路由器的可索引网站？

> ID：14180512
> 
> 赞同：2
> 
> 时间：2013-01-06T08:19:23.073
> 
> 标签：javascript, web-applications, backbone.js, seo, web-crawler

我一直在研究一个使用 Backbone.js 路由器的项目，所有数据都是由 javascript 通过 restful 请求加载的。我知道无法检测服务器端是否启用了 Javascript，但这里是我认为使该网站可索引的场景：

1.  我可以为 sitemap.xml 上的每个链接附加一个查询字符串，我可以放置一个`<script>`标签来检测是否启用了 Javascript。服务器使用可索引数据呈现此页面，当用户访问此页面时，我可以手动初始化 Backbone.js 路由器。但是问题是我需要执行一个 sql 查询来在服务器端呈现可索引的数据，如果访问者不是机器人，它将导致额外的负载。当用户在某处共享网站的 url 时，它不会是可索引的页面，网络爬虫可能无法识别该 url 的内容。网络爬虫搜索页面中的额外字符串可能会让用户感到厌烦。

2.  我可以从他们的用户代理在服务器端检测流行的网络爬虫，如谷歌、雅虎、必应、Facebook，但我怀疑会有一些我错过的网络爬虫。

哪种方式看起来更方便，或者您有任何想法和经验来制作可索引的此类网站？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T17:42:53.300

正如 elias94xx 在他的评论中所建议的那样，解决这一困境的一个可靠方法是利用 Google 的“AJAX 抓取”。简而言之，谷歌告诉网络社区“看起来我们不会真正为你呈现你的 JS 代码，但如果你想为我们在服务器端呈现它，我们会尽最大努力让你轻松。” 他们使用两个基本概念来做到这一点：漂亮的 URL => 丑陋的 URL 翻译和 HTML 快照。

1) Google 实现了一种语法，Web 开发人员可以使用该语法来指定仍然可以抓取的客户端 URL。这些“漂亮的 URL”的语法，正如 Google 所说的那样，是：`www.example.com?myquery#!key1=value1&key2=value2`.

当您使用具有该格式的网址时，Google 不会尝试抓取该确切网址。相反，它会抓取“丑陋的 URL”等价物：`www.example.com?myquery&_escaped_fragment_=key1=value1%26key2=value2`. 由于该 URL 有 a`?`而不是 a`#`这当然会导致调用您的服务器。然后，您的服务器可以使用“HTML 快照”技术。

2) 该技术的基础是让您的网络服务器运行一个无头 JS 运行器。当 Google 从您的服务器请求一个“丑陋的 URL”时，服务器会在无头运行器中加载您的 Backbone 路由器代码，并生成（然后返回给 Google）代码在客户端运行时会生成的相同 HTML .

可以在此处找到漂亮 => 丑陋 URL 的完整说明： [https ://developers.google.com/webmasters/ajax-crawling/docs/specification](https://developers.google.com/webmasters/ajax-crawling/docs/specification)

可以在此处找到 HTML 快照的完整说明： [https ://developers.google.com/webmasters/ajax-crawling/docs/html-snapshot](https://developers.google.com/webmasters/ajax-crawling/docs/html-snapshot)

哦，虽然到目前为止一切都基于 Google，但 Bing/Yahoo 也采用了这种语法，如 Squidoo 所示：
[http ://www.squidoo.com/ajax-crawling](http://www.squidoo.com/ajax-crawling)

# java - 将一维数组排序为二维

> ID：14180514
> 
> 赞同：-1
> 
> 时间：2013-01-06T08:19:45.233
> 
> 标签：java, arrays, sorting, matrix

```
private double[] myNumbers = {10, 2, 5, 3, 6, 4};
private double[][] result;

private double[][] divideNumbers(double[] derp) {

    int j = 0, k = 0;
    for (int i=0; i < derp.length; i++) {
        if (derp[i] >=4 && derp[i] <=8) {
            result[1][j] = derp[i];
            j++;
        }
        else {
            result[0][k] = derp[i];
            k++;
        }
    }

    //System.out.println(result[0] +"  "+ result[1]);
    return result;
} 
```

我正在尝试将一维数组排序到一个矩阵中，其中 4 - 8 之间的数字在一个中，所有其他数字在另一个中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T08:25:25.283

1）你没有初始化结果[][]。你会得到一个 NullPointerException。

循环遍历`myNumbers`，计算每个类别的值的数量，然后创建`result[][]`，或将您的值推入 an`ArrayList<Double>[2]`并使用`List.toArray()`以转换回数组。

2) result[][] 在您的方法之外声明。虽然在技术上是有效的，但如果没有特定的原因，它通常是糟糕的形式。由于您已经返回 double[][] 您可能希望在函数中声明一个 double[][] 以使用并返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T09:09:46.977

我没有完全按照您的要求进行操作，但这应该可以让您的代码正常工作。

```
class OneDimToTwoDim {
    public static void main(String[] args) {

        // declare myNumbers one dimensional array
        double[] myNumbers = {10, 2, 5, 3, 6, 4};

        // display two dimensional array
        for (int x = 0; x < myNumbers.length; x++) {
            System.out.print("[" + myNumbers[x] + "] "); // Display the string.
        }

        // pass in myNumbers argument for derp parameter, and return a two dimensional array called resultNumbers
        double[][] resultNumbers = OneDimToTwoDim.divideNumbers(myNumbers);

        System.out.println(); // Display the string.
        System.out.println(); // Display the string.

        for (int x = 0; x < resultNumbers.length; x++) {
            for (int y = 0; y < resultNumbers[x].length; y++) {
                System.out.print("[" + resultNumbers[x][y] + "] "); // Display the string.
            }
            System.out.println(); // Display the string.
        }
    }

    private static double[][] divideNumbers(double[] derp) {

        // declare result to be returned 
        double[][] result = new double[2][derp.length];

        int j = 0, k = 0;
        for (int i=0; i < derp.length; i++) {
            if (derp[i] >=4 && derp[i] <=8) {
                    result[1][j] = derp[i];
                    j++;
            }
            else {
                    result[0][k] = derp[i];
                    k++;
            }
        }

        return result;
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-06T08:25:54.667

您的结果数组未初始化。您是否收到空指针异常？那是问题吗？

```
private static double[] myNumbers = {10, 2, 5, 3, 6, 4};
private static double[][] result = new double[2][myNumbers.length];
private static double[][] divideNumbers(double[] derp) {
    int j = 0, k = 0;
    for (int i=0; i < derp.length; i++) {
        if (derp[i] >=4 && derp[i] <=8) {
            result[1][j] = derp[i];
            j++;
        }
        else {
            result[0][k] = derp[i];
            k++;
        }
    }
    result[0] = Arrays.copyOfRange(result[0],0,k);
    result[1] = Arrays.copyOfRange(result[1],0,j);
    return result;
} 
```

# visual-c++ - Visual C++：接口的 ATL 实现

> ID：14180516
> 
> 赞同：4
> 
> 时间：2013-01-06T08:20:37.553
> 
> 标签：visual-c++, com, atl

我想这是一个真正愚蠢的问题，但我找不到答案。我正在尝试使用 ATL 实现 COM 接口。据此，[我](http://msdn.microsoft.com/en-us/library/35tb9xw9%28v=vs.80%29.aspx)应该使用**实施接口向导**。我的问题是如何在此向导中找到所需的界面。我必须浏览所有图书馆吗？是否在接口文档的某处指定（[IOleCommandTarget](http://msdn.microsoft.com/en-us/library/ms683797%28v=vs.85%29.aspx)）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-06T08:30:04.433

要实现一个接口，您需要：

*   继承你的类
*   将其添加到界面图上
*   实现它的方法

例如：

```
class CFoo : 
  // regular COM object base class, esp. those generated by ATL Simple Object Class Wizard
  public IOleCommandTarget
{

BEGIN_COM_MAP(CFoo)
  // ...
  COM_INTERFACE_ENTRY(IOleCommandTarget)
END_COM_MAP()

// ...

public:
// IOleCommandTarget
  STDMETHOD(Exec)(...) // IOleCommandTarget methods go here
  {
    // ...
  }
}; 
```

# asp.net - 单击 Gridview 中的“接受”按钮，然后在不同页面的另一个 Gridview 中移动记录

> ID：14180518
> 
> 赞同：1
> 
> 时间：2013-01-06T08:20:48.457
> 
> 标签：asp.net, gridview, expression, move, transfer

我想要一个具有**“接受”**按钮的gridview，然后单击它。我希望在另一个页面中的另一个网格视图中移动或转移接受的记录？

我已经有两个网格视图：

**Gridview1**名为**PendingRecordsGridview**。 **Gridview2**命名为**AcceptedRecordsGridview**。

我已经做了一个 register.aspx 页面，点击注册按钮后，它将在 PendingRecordsGridview 中发送数据。它有效！而现在，就像我说的。我想在那个gridview中添加“接受”按钮，所以在点击接受按钮之后。记录将被转移到AcceptedRecordsGridview（另一个页面）请！帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T09:18:26.367

参考这个。。我已经测试过了。。

你必须记住的事情..

1.  你必须为你的两个gridview创建两个不同的表。但这些表设计应该与tbl1和tbl2相同。在tbl1中将一个字段作为主键并使其自动递增

2.  不要在 tbl2 中保留任何主键或自动递增字段

这里在接受按钮上，首先数据将被插入到 tbl2，然后从原始表 tbl1 page.aspx 文件中删除

```
 <asp:GridView ID="PendingRecordsGridview" runat="server" 
        AutoGenerateColumns="False" DataKeyNames="id"
        onrowcommand="PendingRecordsGridview_RowCommand">
        <Columns>
            <asp:TemplateField HeaderText="Accept">
                <ItemTemplate>
                    <asp:Button CommandArgument='<%# Bind("id") %>' ID="Button1" runat="server" CausesValidation="false" 
                        CommandName="accept" Text="Accept" />
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="name" SortExpression="name">
                <ItemTemplate>
                    <asp:Label ID="Label1" runat="server" Text='<%# Bind("name") %>'></asp:Label>
                </ItemTemplate>
                <EditItemTemplate>
                    <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("name") %>'></asp:TextBox>
                </EditItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="id" SortExpression="id">
                <ItemTemplate>
                    <asp:Label ID="Label2" runat="server" Text='<%# Bind("id") %>'></asp:Label>
                </ItemTemplate>
                <EditItemTemplate>
                    <asp:Label ID="Label1" runat="server" Text='<%# Eval("id") %>'></asp:Label>
                </EditItemTemplate>
            </asp:TemplateField>
        </Columns>
    </asp:GridView>
    <asp:SqlDataSource ID="sd1" runat="server" 
        ConnectionString="<%$ ConnectionStrings:ConnectionString %>" 
        SelectCommand="SELECT * FROM [tbl1]"></asp:SqlDataSource> 
```

现在 page.aspx.cs 文件

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        bind();
    }
}
protected void bind()
{
    PendingRecordsGridview.DataSource = sd1;
    PendingRecordsGridview.DataBind();
}
protected void PendingRecordsGridview_RowCommand(object sender, GridViewCommandEventArgs e)
{
    if (e.CommandName == "accept")
    {
        Session["id"] = e.CommandArgument.ToString();
        SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString);

        con.Open();
            SqlCommand cmd1 = new SqlCommand("INSERT INTO tbl2 (id, name) SELECT id, name FROM tbl1 where id='"+Session["id"].ToString()+"'", con);
            SqlCommand cmd2 = new SqlCommand("delete from tbl1 where id='"+Session["id"].ToString()+"'", con);
            cmd1.ExecuteNonQuery();
            cmd2.ExecuteNonQuery();
            bind();

    }
} 
```

现在只需再翻一页.. 并将其与 tbl2 绑定，这将有已批准的记录...

随时询问这个问题。如果你觉得它有帮助，请将其标记为答案

# apache-flex - 如何捕获从 StageWebView 跟踪到控制台的错误

> ID：14180521
> 
> 赞同：2
> 
> 时间：2013-01-06T08:21:17.950
> 
> 标签：apache-flex, air, flash-builder, stagewebview

将 StageWebView 的内容设置为包含 JavaScript 或 HTML 错误的 HTML 标记时，这些错误将被跟踪到 Flash Builder 中的控制台。有没有办法捕捉这些错误？

例如，如果我有一个 DIV 并且它没有正确终止，则此消息将被跟踪到控制台，

```
about:blank:75 HTML ERROR: Unmatched </div2> encountered.  Ignoring tag. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-10T10:13:00.243

您可以使用[StageWebViewBridge](https://code.google.com/p/stagewebviewbridge/)捕获 HTML / Javascript 错误，当您的页面发生错误时使用此 .swc，这将在您的 flash builder 控制台中跟踪错误消息。

```
 private var _stage : Stage;

    private function added_to_stage_handler():void
    {
         _stage = this.stage;
         initStage();
    }
    private function initStage() : void
    {
        StageWebViewDisk.setDebugMode( true );
        StageWebViewDisk.initialize(stage);
    }

    private function loadURL( url : String ):void
    {
        if(!webView)
            webView = new StageWebViewBridge(0, 300, 900, 300);
        webView.addEventListener(StageWebViewBridgeEvent.DEVICE_READY, onDeviceReady );
        webView.addEventListener(Event.COMPLETE, onCompleteHandler);
        webView.addEventListener(ErrorEvent.ERROR, onErrorHandler);
        webView.addEventListener(LocationChangeEvent.LOCATION_CHANGING, onLocationChange);
        var _view:SpriteVisualElement = new SpriteVisualElement();
        _view.addChild(webView);
        addElement(_view);
        webView.loadURL( url );
    } 
```

# entity-framework - EF 4 Code First - 如何对此建模？

> ID：14180526
> 
> 赞同：1
> 
> 时间：2013-01-06T08:23:15.313
> 
> 标签：entity-framework, entity-framework-4, ef-code-first

我正在尝试 EF 和 Code First 方法

我有一个看起来像的帐户模型

```
public class Account
{
   public virtual int AccountID {get; set;}
   public virtual string AccountName {get; set;}
   public virtual Account ParentAccount {get; set;}
   public virtual Contact AccountOwner {get; set}
} 
```

联系人类是一个简单的类

```
public class Contact
{
   public virtual int ContactID {get; set;}
   public virtual string ContactName {get; set;}
} 
```

现在我不知道如何将 ID 添加到帐户类。

假设我已经正确设置了上下文，需要对 Account 类进行哪些修改，以便

1.  我可以添加一个帐户作为另一个帐户的父级

2.  我可以访问特定帐户的 ParentAccount

3.  我可以访问特定帐户的 AccountOwner

我是新来的。任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T10:22:13.017

这是我将如何解决这个问题。

将外键属性添加到您的类。我说的是`ParentAccountId`和`AccountOwnerId`。为了使导航更容易一些，我还在 Account 中添加了一组子帐户，在 Contact 中添加了一组拥有的帐户。请注意，没有必要将“普通”属性设为虚拟。只有导航属性应该是虚拟的。

```
public class Account
{
    public int AccountID {get; set;}
    public string AccountName {get; set;}
    public int? ParentAccountId { get; set; }
    public int? AccountOwnerId { get; set; }

    public virtual Account ParentAccount { get; set; }
    public virtual ICollection<Account> ChildAccounts { get; set; }

    public virtual Contact AccountOwner { get; set; }

    public Account()
    {
        ChildAccounts = new List<Account>();
    }
}

public class Contact
{
    public int ContactID { get; set; }
    public string ContactName { get; set; }

    public virtual ICollection<Account> OwnedAccounts { get; set; }

    public Contact()
    {
        OwnedAccounts = new List<Account>();
    }
} 
```

接下来，为 Account 类创建一个映射，以向 EF 解释如何设置关系。

```
public class AccountMapping : EntityTypeConfiguration<Account>
{
    public AccountMapping()
    {
        HasOptional(x => x.ParentAccount).WithMany(x => x.ChildAccounts).HasForeignKey(x => x.ParentAccountId);
        HasOptional(x => x.AccountOwner).WithMany(x => x.OwnedAccounts).HasForeignKey(x => x.AccountOwnerId);
    }
} 
```

最后，将映射添加到您的 DbContext 类。

```
public MyContext : DbContext
{
    public DbSet<Account> Accounts { get; set; }
    public DbSet<Contact> Contacts { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Configurations.Add(new AccountMapping());
    }
} 
```

请注意，我假设 AccountOwner 和 ParentAccount 是可选的。如果需要，只需将外部属性的类型从更改为`int?`并将映射中的 更改为。`int``HasOptional``HasRequired`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T08:39:51.217

```
public class Account
{
   [Key]
   public virtual int AccountID {get; set;}
   public virtual string AccountName {get; set;}
   public virtual Account ParentAccount {get; set;}
   public virtual Contact AccountOwner {get; set}
   public virtual IEnummerable<Account> ChiledAccount {get; set}
}

public class Contact
{
   [Key]
   public virtual int ContactID {get; set;}
   public virtual string ContactName {get; set;}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T09:10:29.223

您可以在不使用 Fluent API 的情况下执行此操作。**默认情况下**，EF 维护约定。因为您的映射很简单。

您拥有**帐户 (1)：联系人 (m)**关系。

所以试试下面的模型

```
public class Account
{
   public int Id {get; set;}
   public string AccountName {get; set;}

   public virtual ICollection<Contact> AccountOwners { get; set; }
}

public class Contact
{
   public int Id {get; set;}
   public string ContactName {get; set;}

   public virtual Account ParentAccount {get; set;}
} 
```

然后您的数据库表将如下创建：

```
Accounts Table

Id            int             NotNull
AccountName   nvarchar(100)   AllowNull

Contacts Table

Id            int             NotNull
ContactName   nvarchar(100)   AllowNull
Account_Id    int             NotNull 
```

如果您需要进行高级映射，那么您必须学习 Fluent API。

# phpstorm - 如何在 phpStorm 中更新 CSS3 验证器？

> ID：14180531
> 
> 赞同：2
> 
> 时间：2013-01-06T08:24:23.760
> 
> 标签：phpstorm

我已将我的 CSS 级别设置为 3，但 phpStorm 未检测到转换。

```
-webkit-transition 
```

是一个可行的属性，你可以给它一个元素。你甚至可以在这里查看： [Transitions W3C](http://www.w3schools.com/css3/css3_transitions.asp)

另外，我正在使用 CSS3 的第 3 级。那么为什么会报错呢？ ![在此处输入图像描述](../Images/d48f3e5653069a2dfee7786e3972b168.png) ![显示的 CSS3](../Images/87059d8384cf885f05c39c6ae145f0aa.png)

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-04T16:53:14.493

`Project Settings -> Inspections -> CSS -> Unknown CSS Property`在 Webstorm 8 中，您可以`W3C CSS Validator`在同一类别下选中“忽略供应商特定的 CSS 属性” 。自定义属性（如`transition`）可以在`Unknown CSS Property`条目中定义（逗号分隔）。这可能也适用于 PhpStorm。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T14:05:02.753

**PhpStorm 中的W3C CSS 验证器检查与您在**[此处](http://jigsaw.w3.org/css-validator/)获得的完全相同（W3C CSS 验证器官方网站），只是一个本地版本——仅此而已。

如果上述官方在线工具在您的代码上产生错误/警告，那么除了禁用此**额外**检查（是的，这是对 PhpStorm 自己的检查的额外检查）之外，您无能为力。

如果相反（在线工具不会产生错误或警告），则向[问题跟踪器](http://youtrack.jetbrains.com/issues/WI)提交错误报告，在下一个版本中，PhpStorm 将拥有该工具的更新版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-26T01:59:26.453

或者，您可以将未知的 CSS 属性添加到自定义属性中，如以下屏幕截图所示（这是运行“检查代码...”操作后的结果）：

![将转换添加到自定义属性](../Images/ff77e8716af89b7cba9bcbb50d9e85a3.png)

这是一种使用您使用的缺少的 CSS 属性来训练您的 PhpStorm/WebStorm 的方法。我还导出了我的 WebStorm/PhpStorm 设置，所以一旦我修复了这些缺失的 CSS 属性，我就不必再做一次了。

# scala - 如何在 IsTraversableLike 中使用类型成员 A？

> ID：14180533
> 
> 赞同：9
> 
> 时间：2013-01-06T08:24:28.203
> 
> 标签：scala

我正在尝试为 Scala 集合编写一些扩展方法，但在完全泛化它们时遇到了麻烦。

tailOption 的第一次尝试会产生类似的结果：

```
implicit class TailOption[A, Repr <: GenTraversableLike[A, Repr]](val repr: Repr) {
  def tailOption: Option[Repr] = 
    if (repr.isEmpty) None 
    else Some(repr.tail)
} 
```

不幸的是，这不起作用：

```
scala> List(1,2,3).tailOption
<console>:19: error: value tailOption is not a member of List[Int]
              List(1,2,3).tailOption 
```

Scala 2.10 提供了 IsTraversableLike 类型类来帮助适应所有集合（包括奇数集合，如字符串）的这种事情。

有了这个，我可以很容易地实现tailOption：

```
implicit class TailOption[Repr](val r: Repr)(implicit fr: IsTraversableLike[Repr]) {
  def tailOption: Option[Repr] = { 
    val repr = fr.conversion(r)
    if (repr.isEmpty) None 
    else Some(repr.tail)
  }
}

scala> List(1,2,3).tailOption
res12: Option[List[Int]] = Some(List(2, 3))

scala> "one".tailOption
res13: Option[String] = Some(ne) 
```

结果是正确的类型：`Option[<input-type>]`. 具体来说，我能够`Repr`在调用返回的方法时保留类型`Repr`，比如`tail.

不幸的是，我似乎无法使用这个技巧来保留集合元素的类型。我不能调用返回元素的方法。

`IsTraversableLike`确实有一个成员 A 但它似乎不是很有用。特别是我无法重建我的原始元素类型，并且该成员在类型上不等效。例如，没有进一步的工作，`headTailOption`看起来像这样：

```
implicit class HeadTailOption[Repr](val r: Repr)(implicit val fr: IsTraversableLike[Repr]) { 
  def headTailOption: Option[(fr.A, Repr)] = { 
    val repr = fr.conversion(r)
    if (repr.isEmpty) None 
    else Some(repr.head -> repr.tail)
  }
}

scala> val Some((c, _)) = "one".headTailOption
c: _1.fr.A forSome { val _1: HeadTailOption[String] } = o 
```

正如我们所见，c 具有美妙的巴洛克风格。但是，这种类型*不*等同于 Char：

```
scala> val fr = implicitly[IsTraversableLike[String]]
fr: scala.collection.generic.IsTraversableLike[String] = scala.collection.generic.IsTraversableLike$$anon$1@60ab6a84

scala> implicitly[fr.A <:< Char]
<console>:25: error: Cannot prove that fr.A <:< Char.
              implicitly[fr.A <:< Char] 
```

我尝试了各种技巧，包括`Repr[A] <: GenTraversableLike[A, Repr[A]]`没有任何帮助。任何人都可以找出神奇的酱汁来`headTailOption`返回正确的类型：

```
val headTailString: Option[(Char, String)] = "one".headTailOption
val headTailList: Option[(Int, List[Int])] = List(1,2,3).headTailOption 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T09:51:42.940

部分答案。您可能已经从`IsTraversableLike`. 它仍然使用分离隐式转换和实例化包装类的“旧方法”，而不是一步一步通过隐式类。事实证明，“旧方法”确实有效：

```
import collection.GenTraversableLike
import collection.generic.IsTraversableLike

final class HeadTailOptionImpl[A, Repr](repr: GenTraversableLike[A, Repr]) { 
  def headTailOption: Option[(A, Repr)] = { 
    if (repr.isEmpty) None 
    else Some(repr.head -> repr.tail)
  }
}

implicit def headTailOption[Repr](r: Repr)(implicit fr: IsTraversableLike[Repr]):
  HeadTailOptionImpl[fr.A,Repr] = new HeadTailOptionImpl(fr.conversion(r))

// `c` looks still weird: `scala.collection.generic.IsTraversableLike.stringRepr.A`
val Some((c, _)) = "one".headTailOption
val d: Char = c  // ...but it really is a `Char`!

val headTailString: Option[(Char, String)] = "one".headTailOption
val headTailList: Option[(Int, List[Int])] = List(1,2,3).headTailOption 
```

* * *

正如 Miles 指出的那样，拆分对于隐式搜索和类型推断来说似乎是必不可少的。

另一个解决方案，虽然当然不那么优雅，是放弃字符串和集合的统一：

```
trait HeadTailOptionLike[A, Repr] {
  def headTailOption: Option[(A, Repr)]
}

implicit class GenHeadTailOption[A, Repr](repr: GenTraversableLike[A, Repr])
extends HeadTailOptionLike[A, Repr] {
  def headTailOption = 
    if (repr.isEmpty) None 
    else Some(repr.head -> repr.tail)
}

implicit class StringHeadTailOption(repr: String)
extends HeadTailOptionLike[Char, String] {
  def headTailOption = 
    if (repr.isEmpty) None 
    else Some(repr.head -> repr.tail) // could use repr.charAt(0) -> repr.substring(1)
}

List(1,2,3).headTailOption
"one".headTailOption 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-29T14:59:44.943

如果`A`从`IsTraversableLike`.

```
import collection.generic.IsTraversableLike

implicit class HeadTailOption[Repr,A0](val r: Repr)(implicit val fr: IsTraversableLike[Repr]{ type A = A0 }) { 
  def headTailOption: Option[(A0, Repr)] = { 
    val repr = fr.conversion(r)
    if (repr.isEmpty) None 
    else Some(repr.head -> repr.tail)
  }
} 
```

或等效地：

```
import collection.generic.IsTraversableLike

type IsTraversableLikeAux[Repr,A0] = IsTraversableLike[Repr]{ type A = A0 }

implicit class HeadTailOption[Repr,A](val r: Repr)(implicit val fr: IsTraversableLikeAux[Repr,A]) { 
  def headTailOption: Option[(A, Repr)] = { 
    val repr = fr.conversion(r)
    if (repr.isEmpty) None 
    else Some(repr.head -> repr.tail)
  }
} 
```

然后一切正常。

```
scala> val Some((c, _)) = "one".headTailOption
c: scala.collection.generic.IsTraversableLike.stringRepr.A = o

scala> c.isSpaceChar
res0: Boolean = false 
```

编译器知道这`scala.collection.generic.IsTraversableLike.stringRepr.A`与`Char`.

# ruby - 从 Ruby 块返回值

> ID：14180538
> 
> 赞同：1
> 
> 时间：2013-01-06T08:25:41.110
> 
> 标签：ruby

我有一个方法

```
def method1(&block)
  #.............
  if condition == "yes"
    yield if block_given?
    {success: :true, value: **value returned from the block**}
  else        
    {is_success: :false, value: get_errors_array() }
  end
end 
```

如何从中检索值`&block`？应该`&block`使用`return`关键字吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-06T08:35:06.687

不，这里不应该有一个`return`in a block。块的“返回”值是其中最后一个表达式的值。

`value_returned = yield if block_given?`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-06T10:02:48.960

```
def method1
  fail("Needs block") unless block_given?
  if condition
    {success: true, value: yield}
  else        
    {success: false, value: get_errors_array}
  end
end 
```

注意事项和问题：

*   如果您使用`yield`不习惯放入`&block`方法参数。如果你想要求块 write `fail("Need blocks") unless block_given?`。你可以忽略它，然后你会得到一个“LocalJumpError: no block given”，这也没关系。
*   `yield`是一个表达式，而不是一个语句。
*   写起来不习惯`method()`。
*   当没有给出块时，您需要使用默认值（当然，除非您之前失败）。
*   您使用了不同的键`success`，`is_success`为什么？
*   您使用`:true`and`:false`而不是真正的布尔值，为什么？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-06T08:30:11.673

使用`call`.

```
block.call 
```

如果`block`接受参数，则给出参数：

```
block.call(whatever_arguments) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-06T11:26:33.723

& 前缀运算符将允许方法将传递的块捕获为命名参数。

```
def wrap &b
     print "dog barks: "
     3.times(&b)
     print "\t"
end
wrap { print "Wow! " }  # Wow!  Wow!  wow! 
```

# ios - iOS，setTransform 被 setFrame 覆盖？重新运行 setFrame 后不重新绘制变换

> ID：14180542
> 
> 赞同：5
> 
> 时间：2013-01-06T08:27:56.930
> 
> 标签：ios, uiview, screen-orientation, cgaffinetransform

**使用 setFrame 重绘框架后，我的变换未绘制。**

当使用 setFrame 改变方向时，我正在缩放视图。但是这个视图也需要根据`BOOL`参数改变位置：*On = up in view, off = down off screen*。我`setTransform`用来调整视图的位置。

首先，我通过执行 a 来绘制视图`setFrame`。这会在屏幕底部将视图绘制 100 点。然后我设置了一个变换（ty 上的-100）将它带到视点中（只要`BOOL`设置为`TRUE`，否则变换为 0 并且视图不在屏幕上）。

```
[view setFrame:CGRectMake(0, self.view.bounds.size.height, self.view.bounds.size.width, 100)];
[view setTransform:CGAffineTransformMake(1, 0, 0, 1, 0, -100)] 
```

正如预期的那样，这可以正常工作，但是当更改方向并且重新运行此代码（以重新调整视图大小）时，即使它被记录为视图的变换，变换也不会绘制。换句话说，视图就在屏幕外，好像 transform.ty 是 0。

```
Log message before re-draw: view.transform.ty -10.000000
Log message after re-draw: view.transform.ty -10.000000 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-06T08:49:49.440

视图`frame`是从三个基本值*派生*`bounds`的值： 、`center`和`transform`。setter`frame`尝试通过反转过程来做正确的事情，但是当设置非身份时，它不能总是正确地工作`transform`。

[文档](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIView_Class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816-CH3-SW5)在这一点上非常清楚：

> 如果变换属性不是恒等变换，则此属性的值未定义，因此应被忽略。
> 
> ...
> 
> 如果 transform 属性包含非恒等变换，则 frame 属性的值未定义且不应修改。在这种情况下，您可以使用 center 属性重新定位视图并使用 bounds 属性调整大小。

由于您`transform`只翻译视图，因此我完全没有理由使用它。只需更改视图框架的原点：

```
[view setFrame:CGRectMake(0, self.view.bounds.size.height - 100, self.view.bounds.size.width, 100)]; 
```

# ruby-on-rails - Rails：Rubber EC2 'cap deploy' 命令未完成

> ID：14180544
> 
> 赞同：1
> 
> 时间：2013-01-06T08:28:16.390
> 
> 标签：ruby-on-rails, amazon-ec2

每次我运行`cap deploy`我都会遇到这个错误。我有三个实例（db01、web01、app01），问题似乎只出在应用程序实例上。这是正在发生的事情：

```
 triggering after callbacks for `deploy:restart'
   * 2013-01-06 12:13:17 executing `rubber:apache:reload'
   * 2013-01-06 12:13:17 executing `rubber:apache:serial_reload'
   * 2013-01-06 12:13:17 executing `rubber:apache:_serial_task_serial_reload_app01'
     triggering before callbacks for `rubber:apache:_serial_task_serial_reload_app01'
   * 2013-01-06 12:13:17 executing `rubber:passenger:serial_remove_from_pool_reload_app01'
   * executing "sudo -p 'sudo password: '  bash -l -c 'rm -f /mnt/vlogio-production/releases/*/public/httpchk.txt && sleep 5'"
     servers: ["app01.foo.com"]
     [app01.foo.com] executing command
     command finished in 10646ms
   * executing "sudo -p 'sudo password: '  bash -l -c 'if ! ps ax | grep -v grep | grep -c apache2 &> /dev/null; then service apache2 start; else service apache2 reload; fi'"
     servers: ["app01.foo.com"]
     [app01.foo.com] executing command
  ** [out :: app01.foo.com] * Starting web server apache2
  ** [out :: app01.foo.com] 
  ** [out :: app01.foo.com] 
  ** [out :: app01.foo.com] 
  ** [out :: app01.foo.com] 
  ** [out :: app01.foo.com] [ OK ]
     command finished in 5817ms
     triggering after callbacks for `rubber:apache:_serial_task_serial_reload_app01'
   * 2013-01-06 12:13:34 executing `rubber:passenger:serial_add_to_pool_reload_app01'
  ** Waiting for passenger to startup
   * executing "sudo -p 'sudo password: '  bash -l -c 'while ! curl -s -ff http://localhost:$CAPISTRANO:VAR$/ &> /dev/null; do echo .; done'"
     servers: ["app01.foo.com"]
     [app01.foo.com] executing command
  ** [out :: app01.foo.com] .
  ** [out :: app01.foo.com] .
  ** [out :: app01.foo.com] .
  ** [out :: app01.foo.com] .
  ** [out :: app01.foo.com] .
  ** [out :: app01.foo.com] .
  ** [out :: app01.foo.com] . 
```

然后`** [out :: app01.foo.com] .`无限期地每秒打印几次（我离开了 6 个小时，什么也没发生）。任何解决此问题的帮助将不胜感激。

# ruby-on-rails-3 - 当两个字段对应可能的未初始化对象时如何根据两个字段查找_or_initialize

> ID：14180559
> 
> 赞同：0
> 
> 时间：2013-01-06T08:32:21.480
> 
> 标签：ruby-on-rails-3

大家好，我有一种情况，我在表格上接受汽车维修申请的订单。我有以下型号：

```
Car
belongs_to :car_company

Car_company
has_many :cars

Services
attributes_accessible :car_company_id, :car_id
#virtual attributes
attributes_accessible :car_company_name, :car_reg 
```

问题是，用户可以在一个表格中输入汽车公司的名称以及汽车的注册号。如果公司名称不存在，它会创建一个新公司并将其与服务相关联，汽车也是如此。我让这部分工作，但问题是我希望在提交此表单时，无论该汽车公司存在还是不存在，所创建的汽车都应自动与 car_company 相关联。

我很困惑如何以正确的方式完成这件事？它基本上只是为了避免必须单独输入汽车详细信息和公司详细信息才能在表格上使用它们。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T01:18:08.440

我看到你使用了一个非常规的模型名称。按照 Rails 中的约定，您的模型应该是`CarCompany`. 但是，我认为您所拥有的将起作用。

将这样的东西放在适当的控制器中可能就像你想要的那样。如果没有，请说明您想要什么。

```
car_company = Car_company.find_or_initialize_by_name(params[:car_company_name])
car = Car.find_or_initialize_by_registration(params[:car_registration])
car_company.cars << car
car_company.save 
```

您实际上可以将中间两行与 结合起来`car_company.cars.find_or...`，但我不确定这是否有效。

我希望这会有所帮助。

# c++ - 这个 typedef 语法是如何工作的..？

> ID：14180561
> 
> 赞同：1
> 
> 时间：2013-01-06T08:32:42.057
> 
> 标签：c++, typedef, ostream

```
#include<iostream.h>
#include<conio.h>

typedef ostream& (*T)(ostream& , int);
class Base
{
    T fun;
    int  var;
    public:
    Base(T func, int arg): fun(func) , var(arg)
    {};
    friend ostream& operator<<(ostream& o, Base& obj)
    {
        return obj.fun(o,obj.var);
    }
};

ostream& odisp(ostream& o, int i);
{
    o<<”i=”&lt;<i<<endl;
    return o;
}
Base disp(int i)
{
    return base(odisp, i)
}; 
```

从第一行开始我就完全卡住了，因为我无法弄清楚这个 typedef 是如何工作的。它看起来像一个指向函数语法的指针，但 ostream 又让我感到困惑..？？请解释一下整个代码是如何工作的..??

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T08:38:56.290

```
#include <iostream.h>
#include <conio.h> 
```

正如已经指出的那样，`iostream.h`并且`conio.h`不是 C++ 程序的标准头文件。IO 流库的正确标头包含语句是`#include <iostream>`，不带扩展名。

```
typedef ostream& (*T)(ostream& , int); 
```

这将创建一个`typedef`named `T`，它是一个指向具有以下属性的函数的指针：

*   返回对的引用`ostream`
*   接受两个参数，顺序如下：
    *   一个参考`ostream`
    *   `int`价值

`ostream`，假设它指的是`std::ostream`，它本身就是 的一个`typedef`，[`std::basic_ostream`](http://en.cppreference.com/w/cpp/io/basic_ostream)它可以在 C++ 标准库中找到。它被定义为：

```
namespace std {
    typedef basic_ostream<char> ostream;
} 
```

对象`std::cout`是 的实例`std::ostream`。

```
class Base
{
    T fun; // (1)
    int var; // (2)
public:
    Base(T func, int arg): fun(func) , var(arg) {}; // (3)

    friend ostream& operator<<(ostream& o, Base& obj) // (4)
    {
        return obj.fun(o, obj.var);
    }
}; 
```

这是一个包含两件事的类：(1) 指向上述函数的指针和 (2) 整数。构造函数 (3) 允许该类的用户使用函数指针和整数对其进行实例化。

友元函数声明 (4) 重载了左移位运算符`<<`。这种重载称为[运算符重载](http://en.wikipedia.org/wiki/Operator_overloading)。按照约定，操作`<<`符在 IO 流的上下文中也称为流插入操作符。

请注意，以这种方式定义的友元函数实际上不是 的成员`Base`，因此不接收`this`指针（因此需要单独的`Base&`参数）。

```
ostream& odisp(ostream& o, int i);
{
    o << "i=" << i << endl;
    return o;
} 
```

这是一个名为 的函数`odisp`。它接受对一个`ostream`和一个整数的引用。如果你传入整数 42，它会以这种形式打印出传入的整数：

> 我=42

```
Base disp(int i)
{
    return base(odisp, i)
}; 
```

此函数有多个语法错误，不会按原样运行：

*   `base`可能是`Base`. 在这种情况下，它将构造一个`Base`临时的并返回它。
*   少了一个分号。

这些问题对语言来说有些基础。您可能想选择一[本很好的介绍性 C++ 书籍](https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list)来涵盖这些问题。

# php - Secure login script on Google Code - without mail form field?

> ID：14180562
> 
> 赞同：0
> 
> 时间：2013-01-06T08:32:48.720
> 
> 标签：php, security, login, google-code

I need a login system on my site.
[On this page](https://code.google.com/p/php-pdo-secure-login-script-example/source/browse/branches/index.php), I found the "secure login scripts" - this is the header of the page.

But there is no:

*   mail verification,
*   mail field on the form (duplicate mails are allowed),
*   limit for false login try,
*   restriction for duplicates IP addresses.
*   no captcha...

Could someone comment - is this script really secure ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T08:52:29.860

This is not the *official google page*. Google Code is something like GitHub - any developer can host his project there.

As for the script.. If you don't feel it's secure enough, why don't you make it secure then?

# servicestack - WIF 的服务堆栈支持

> ID：14180568
> 
> 赞同：5
> 
> 时间：2013-01-06T08:33:54.437
> 
> 标签：servicestack

我需要将 servicestack 连接到 ADFS，以及通常的社交 ID 提供者。我知道有一些应用程序可以为我做到这一点，authbridge、thinktecture 等，但我真的很想在一个应用程序中拥有一切。

是否有人致力于将 WIF 身份验证提供程序添加到 servicestack？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T10:17:26.363

ServiceStack 没有添加任何对 WIF 的特定支持，但看起来它可能是由第 3 方 (Auth10) 在其 ServiceStack Auth NuGet 包中提供的：

[https://nuget.org/packages/Auth10.ServiceStack](https://nuget.org/packages/Auth10.ServiceStack)

# android - 试图让 OnFling 工作

> ID：14180569
> 
> 赞同：2
> 
> 时间：2013-01-06T08:34:10.257
> 
> 标签：android, swipe, touch-event, uiswipegesturerecognizer, swipe-gesture

我知道关于这个话题有很多问题。我已经看过其中的大多数，但我仍然无法调试我的代码。它不检测滑动。我是 Android 编程和 Java 的初学者，所以请不要太挑剔。

*   我有一个简单的线性布局，带有一个填充整个布局的按钮。每次单击按钮时，它的值都会增加 1。
*   我正在尝试实现向左滑动。我的基本疑问是我应该使用按钮还是线性布局来实现 setOnTouchListener？
*   我见过人们使用 OnGestureListener 和 OnTouchListener。哪一个更可取？

    ```
    public class MainActivity extends Activity implements OnClickListener{

    public Button increment;
    public int cnt= 0;
    private static final int SWIPE_MIN_DISTANCE = 80;
    private static final int SWIPE_THRESHOLD_VELOCITY = 40;
    GestureDetector gestureDetector;
    LinearLayout swipe_layout= (LinearLayout)findViewById(R.id.linear);

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        increment= (Button)findViewById(R.id.numberkey);
        increment.setOnClickListener(this);
        setDisplay(0);
        gestureDetector= new GestureDetector(this, new Detector());
        increment.setOnTouchListener(new OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent event) {
                gestureDetector.onTouchEvent(event);
                return true;
            }
        });

    }

    @Override
    public void onClick(View v) 
    {
        setDisplay(cnt++);
    }

    private void setDisplay(int i) 
    {   increment.setText(String.valueOf(i));
    }

    class Detector extends SimpleOnGestureListener {

    @Override
        public boolean onDown(MotionEvent e) {
            return true;
        }

        @Override
        public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float            velocityY) {
                // right to left swipe
                if(e1.getX() - e2.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY)
                   Toast.makeText(MainActivity.this, "Left Swipe", Toast.LENGTH_SHORT).show();

                else if (e2.getX() - e1.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
                    Toast.makeText(MainActivity.this, "Right Swipe", Toast.LENGTH_SHORT).show();
                }
            return false;
        }

    } 
    ```

    }

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T08:48:10.810

移动

```
LinearLayout swipe_layout= (LinearLayout)findViewById(R.id.linear); 
```

在`setContentView(R.layout.activity_main);`Activity 之后，因为您试图在为当前 Activity 设置布局之前找到视图

并将`onTouchListener`布局设置为：

```
LinearLayout swipe_layout;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    swipe_layout= (LinearLayout)findViewById(R.id.linear);

    swipe_layout.setOnTouchListener(new OnTouchListener() {

     @Override
       public boolean onTouch(View v, MotionEvent event) {

         return true;
    }
  }); 
```

# c - malloc 在 do while 块中

> ID：14180577
> 
> 赞同：1
> 
> 时间：2013-01-06T08:36:25.407
> 
> 标签：c, malloc

我可以将 malloc 放在 do...while 块中以确保成功分配吗？

像：

```
#define STR_SIZE 1024 * 1024
char *str;
do
    str = (char *) malloc(STR_SIZE);
while ( !str ); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-06T08:39:49.237

它可能不会工作，因为`malloc`很少失败，当资源耗尽时它会失败，而且这些不会很快可用。

^(获得更多资源的唯一常见情况`malloc`是，如果某个其他大进程释放了大量内存，这种情况很少发生，也可能永远不会发生；如果您关心它，`sleep`请在循环中至少添加 a ，并准备好在`malloc`真正失败并始终返回时处理这种情况`NULL`。)

更好的做法是测试`malloc`结果并退出失败和错误消息，例如

```
 char* str = malloc(STR_SIZE);
  if (!str) {
      perror("malloc failed for str");
      exit (EXIT_FAILURE);
  } 
```

并且每个程序都应该处理`malloc`失败的情况（通常是通过退出并显示错误消息）。

^(很多程序在失败时调用-s或-s`xmalloc`的函数，并在成功时返回分配的区域`exit``abort``malloc`)

明智地处理 malloc 失败（即正在做一些事情以能够继续执行）真的很难。一些程序可能例如`free`一些其他全局数据。实际上这相当于实现了一些专门的[垃圾收集](http://en.wikipedia.org/wiki/Garbage_collection_%28computer_science%29)机制。一些服务器可能只是使当前请求失败（并且应该非常小心地这样做，释放当前失败请求使用的所有资源）。

`malloc`当您需要比可用资源更多的资源时，可能会真正失败。所以你必须处理这种情况。

顺便说一句，您可以考虑使用[Boehm 的保守垃圾收集器](http://www.hpl.hp.com/personal/Hans_Boehm/gc/)并使用`GC_malloc`而`malloc`不是关心它的失败和关于`free`-ing。（我认为 Boehm 的 GC 会在内存不足时中止程序）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T10:16:41.883

正如其他答案所指出的那样，您的代码存在缺陷。然而，背后的想法并非完全不合理。

处理失败的经典方法`malloc`是退出程序，如[Basile 的回答](https://stackoverflow.com/a/14180598/1600898)中所述。检查. `malloc`_ `xmalloc`_ `malloc`这很容易实现和推理，但并非没有缺陷。这对于短命的命令行程序很有意义，例如那些通常从 Unix shell 调用的命令行程序，但是对于不适合让程序立即死机的交互式程序，即使它确实耗尽了内存，它也会失败. 它也不适合库代码，因为使用库的程序可能不希望进程仅仅因为单个分配失败而退出。

当内存问题很可能不是由程序的活动引起时，重试分配是有意义的。例如，多进程 HTTP 服务器可能不想在单个内存分配失败时拒绝请求并立即结束进程。但是，一个好的实现应该：1）注意在请求之间休眠以避免忙循环并给系统一个恢复的机会，以及 2）确保进程在多次迭代后退出，以防它是进程本身导致分配失败。例如：

```
void *safe_malloc(size_t howmuch)
{
  int i = 0;
  while (i++ < 10) {
    void *ptr = malloc(howmuch);
    if (ptr)
      return ptr;
    sleep(i);
  }
  perror("malloc");
  exit(EXIT_FAILURE);
} 
```

这种方法已用于服务器，例如现已过时的[phttpd](http://development.freecode.com/projects/phttpd) Web 服务器。

Emacs 使用了另一种解决交互式应用程序失败的方法`malloc`：在启动时分配固定数量的内存并保存以备后用。当内存分配失败时，释放内存并引发 Lisp 级异常，放弃当前操作。向用户显示一条警告消息，解释情况。释放的内存使程序能够继续工作足够长的时间，以便用户在 Emacs 出现故障之前保存他们的工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T09:18:42.903

当然可以，但是如果`STR_SIZE`不合理，这将永远锁定您的代码。

如果您的内存非常分散，Malloc 也可能会在极少数情况下失败。在这种情况下，您的代码将起作用。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-06T10:48:52.043

你可以，虽然它是一个罕见的 malloc 会失败，语法上正确，但如果它在逻辑上是正确的，我不会，如果它有效，我会尝试编码。

# php - 如何序列化 PHP 中的“对象”类型以发送到 WCF 服务？

> ID：14180579
> 
> 赞同：0
> 
> 时间：2013-01-06T08:36:53.470
> 
> 标签：php, wcf, object, serialization

我的 WCF 服务可以接受动态更新字段的请求，方法是传递包装在 Object 和 DynamicAttributeType 枚举中的值来指定类型，如下所示：

```
[DataContract]
[KnownType(typeof(string))]
[KnownType(typeof(bool))]
[KnownType(typeof(PickListInfo))]
public class DynamicAttributeInfo
{
  [DataMember]
  public string Name { get; set; }

  [DataMember]
  public object Value { get; set; }

  [DataMember]
  public DynamicAttributeType DynamicAttributeType { get; set; }
} 
```

这适用于 .Net 客户端。我正在尝试帮助 PHP 客户端使其工作。到目前为止，我们在创建将作为对象传递但仍包含内部真实值（字​​符串/布尔值/PickList）的东西时遇到了麻烦。

**请注意：** WCF 服务正在生产中，不能更改它。我正在寻找 PHP 客户端的解决方案。

以下是他的不同尝试：

1）首先尝试 - 简单的字符串作为值：

```
<?php
   $da = new DynamicAttributeInfo();
   $da->DynamicAttributeType = 'String';
   $da->Name = 'lv_eutmsource';
   $da->Value = 'test';
?> 
```

异常：[InnerException] => stdClass Object ([HelpLink] => [InnerException] => [Message] => 来自命名空间'http://schemas.datacontract.org/2004/07/XXX.XXX 的结束元素'Value' .XXXService.Common.Entities' 预期。找到文本“测试”。第 2 行，位置 725。

2）秒取（半成功）：空类的新对象

```
<?php
 class testText() {
 }

 $da = new DynamicAttributeInfo();
 $da->DynamicAttributeType = 'String';
 $da->Name = 'lv_eutmsource';
 $da->Value = new testText();
?> 
```

这次没有 WCF 异常，但实际上没有传递任何值，我的代码以“Object.ToString”结束。

3）其他尝试：非空类 - 他试图添加不同名称的字段 - 没有任何效果。

```
<?php
 class Value() {
     public $String;
 }

 $text = new Value();
 $text->String = 'test text';

 $da = new DynamicAttributeInfo();
 $da->DynamicAttributeType = 'String';
 $da->Name = 'lv_eutmsource';
 $da->Value = $text;
?> 
```

异常：[InnerException] => stdClass Object ( [HelpLink] => [InnerException] => stdClass Object ( [HelpLink] => [InnerException] => [Message] => 来自命名空间'http://的结束元素'Value' schemas.datacontract.org/2004/07/XXX.XXX.XXXService.Common.Entities' 预期。从命名空间''中找到元素'String'。

```
<?php
 class textText() {
     public $text;
 }

 $text = new testText();
 $text->text = 'test text';

 $da = new DynamicAttributeInfo();
 $da->DynamicAttributeType = 'String';
 $da->Name = 'lv_eutmsource';
 $da->Value = $text;
?> 
```

异常： [InnerException] => stdClass Object ( [HelpLink] => [InnerException] => stdClass Object ( [HelpLink] => [InnerException] => [Message] => 来自命名空间'http://的结束元素'Value' schemas.datacontract.org/2004/07/XXX.XXX.XXXService.Common.Entities 预期。从命名空间“”中找到元素“文本”。

```
<?php
 class Value() {
     public $Value;
 }

 $text = new Value();
 $text->Value = 'test text';

 $da = new DynamicAttributeInfo();
 $da->DynamicAttributeType = 'String';
 $da->Name = 'lv_eutmsource';
 $da->Value = $text;
?> 
```

异常： [InnerException] => stdClass Object ( [HelpLink] => [InnerException] => stdClass Object ( [HelpLink] => [InnerException] => [Message] => 来自命名空间'http://的结束元素'Value' schemas.datacontract.org/2004/07/XXX.XXX.XXXService.Common.Entities 预期。从命名空间“”中找到元素“值”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T08:20:55.110

所以我的客户毕竟能够让它工作。就是这样：

而不是像我通常所做的那样明确地为该字段分配值：

```
$DynamicAttributeInfo->Value = $text; 
```

我必须手动创建一个 SOAP 变量，明确定义它的类型和命名空间：

```
$DynamicAttributeInfo->Value = new SoapVar($text,XSD_STRING,'string','http://www.w3.org/2001/XMLSchema'); 
```

这样它就按预期通过了。

# algorithm - 堆的大哦符号

> ID：14180582
> 
> 赞同：0
> 
> 时间：2013-01-06T08:37:41.887
> 
> 标签：algorithm

我试图理解大哦符号。任何帮助，将不胜感激。

假设有一个程序创建一个最大堆，然后推送和删除该项目。

假设有 n 个项目。

要创建一个堆，如果你已经将它读入一个数组，它需要 O(n) 来堆化，然后堆化它。要推送一个项目，它需要 O(1) 并且要删除它，它需要 O(1) 之后要对其进行堆放，每次删除需要 log n 并且对于 n 个项目需要 n log n

所以大的哦符号是 O(n + n log n) 或者，它是 O(n log n) 只是因为我们选择了最大的一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T08:53:55.717

在堆中堆积新元素的复杂性是`O(logN)`，不是`O(1)`（除非您使用[斐波那契堆](http://en.wikipedia.org/wiki/Fibonacci_heap)，但事实并非如此）。

也没有符号`O(N + NlogN)`比`NlogN`增长快，`N`所以这个符号简单地写成`O(NlogN)`。

编辑：大哦符号仅描述函数的渐近行为，即 - 它增长的速度。当您接近无穷大`2*f(x)`并且`11021392103*f(x)`行为相似时，这就是为什么在编写大哦符号时，我们会忽略函数前面的任何常量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T10:58:34.683

形式上，`O(N + N log N)`等价于`O(N log N)`。

也就是说，假设其中每个都隐藏了系数，ala: `O( aN + bN log(cN) )`。如果您有非常大`N`的值，则这些系数变得不重要，并且算法仅受其最大项的限制，在本例中为`log(N)`。

但这并不意味着系数*完全不重要*。这就是为什么在讨论图算法时你会经常看到作者说“ [Floyd-Warshall 算法](https://en.wikipedia.org/wiki/Floyd%E2%80%93Warshall_algorithm)在 O(N^3) 时间内运行，但系数很小”。

如果我们可以在这种情况下以某种方式写出 O(0.5N^3)，我们会的。但事实证明，系数会根据您实现算法的方式以及运行它的计算机而有所不同。因此，我们满足于渐近比较，不一定是因为它是最好的方法，而是因为没有真正的好选择。

您还会看到诸如“最坏情况：O(N^2)，平均情况：O(N)”之类的内容。这是试图捕捉算法的行为如何随输入而变化。通常，预排序或随机输入可以为您提供平均情况，而邪恶的反派可以构建产生最坏情况的输入。

最后，我要说的是：`O(N + N log N)=O(N log N)`. 这是真的，它是你作业的正确答案。但是我们使用这种 big-O 符号来进行交流，并且随着时间的推移，您可能会发现您觉得它`O(N + N log N)`更具表现力的情况，也许如果您的算法通常用于 small `N`. 在这种情况下，不要太担心形式主义——只要清楚你想用它传达什么。

# accelerometer - iPhone4S 和 iPhone5 上的加速度计行为不同？

> ID：14180583
> 
> 赞同：1
> 
> 时间：2013-01-06T08:37:51.313
> 
> 标签：accelerometer, iphone-5, iphone-4, acceleration

我正在使用“UIAccelerationValue”将加速度计值记录到文件中。通过电子邮件发送文件后，将对记录的数据进行粗略的离线分析。这适用于最高 100Hz 的最大采样频率的 iPhone4S，并提供合理的结果。

最近我得到一个 iPhone5 用于测试目的，它表现出奇怪的行为。时间戳信息不是不断上升，并且远离两个测量点之间的恒定时间间隔。相比之下，iPhone4S 并非如此。此外，似乎加速度极限约为。iPhone5 为 8G，而 iPhone4S 为 2G。

似乎没有明显原因，iPhone5 的采样性能差异很大。

如何在 iPhone5 上解决这个问题？

# asp.net-mvc - 我应该将 Request.IsAuthenticated 或 WebSecurity.IsAuthenticated 与 MVC4 Simple 成员资格一起使用吗？

> ID：14180585
> 
> 赞同：1
> 
> 时间：2013-01-06T08:38:07.097
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我正在使用具有简单成员资格的 MVC4 数据库。在示例模板中，他们使用以下内容：

```
@if (Request.IsAuthenticated) {
    <text>
        Hello, @Html.ActionLink(User.Identity.Name, "Manage", "Account", routeValues: null, htmlAttributes: new { @class = "username", title = "Manage" })!
        @using (Html.BeginForm("LogOff", "Account", FormMethod.Post, new { id = "logoutForm" })) {
            @Html.AntiForgeryToken()
            <a href="javascript:document.getElementById('logoutForm').submit()">Log off</a>
        } 
```

在其他网站上，我看到了这个：

```
@if(WebSecurity.IsAuthenticated)
{
  <p>Welcome, @WebSecurity.CurrentUserName</p>
  <p><a href="@Href("~/logout")">Log out</a></p>
} 
```

有人能告诉我这些有什么区别吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T08:46:41.410

**Request.IsAuthenticated**

我相信，如果您使用的是 Windows 身份验证。如果请求是由经过身份验证的用户发送的，则始终为 true。在这种情况下，用户和组等由您机器中的 Windows Active Directory 或用户帐户处理。

**WebSecurity.IsAuthenticated**

这一点我相信在使用 Membership provider 的同时，我们可以为用户进行 CRUD 操作。请访问以下网址以获取更多信息。 [http://www.mikepope.com/blog/displayblog.aspx?permalink=2240](http://www.mikepope.com/blog/displayblog.aspx?permalink=2240)

# mysql - MySQL 创建函数的难点

> ID：14180588
> 
> 赞同：0
> 
> 时间：2013-01-06T08:38:24.397
> 
> 标签：mysql

好的，这是我第一次尝试`CREATE FUNCTION`，所以请多多包涵！

所以，我有这个（简化的）表结构：

```
CREATE TABLE `pokemon` (
    `id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
    `userid` INT UNSIGNED NOT NULL,
    `boxid` TINYINT UNSIGNED NOT NULL DEFAULT 255,
    `boxpos` SMALLINT UNSIGNED,
    PRIMARY KEY (`id`),
    UNIQUE KEY `position` (`userid`,`boxid`,`boxpos`)
) ENGINE=InnoDB 
```

我想创建一个函数，给定用户 ID 和框 ID，返回一个空框位置（即不会触发重复键错误的位置）。

请注意，`boxid`使用从 0 到 249 的值作为框 ID，并使用 255 作为用户方的特殊值。`boxpos`Boxes 中的范围为 0 到 45,504，但 Party 中只有 0 到 5。此外，在 Party 中返回的位置应该是第一个空位置，而在 Box 中它应该是随机位置。

因此，考虑到所有这些，这是我的尝试：

```
begin
declare ret smallint unsigned;
declare exist tinyint unsigned default 1;
if fieldid = 255 then
  create temporary table `party` (
    `pos` smallint unsigned not null
  );
  insert into `party` values (0),(1),(2),(3),(4),(5);
  delete from `party` where `pos` in (select `fieldpos` from `pokemon` where `userid`=userid and `fieldid`=255);
  select `pos` into ret from `party` limit 1;
  if ret is null then select `[[Error: No room in Party]]` from `party`; end if;
else
  while exist=1 do
    set exist=0;
    set ret=floor(rand()*45504);
    select 1 into exist from `pokemon` where `fieldid`=fieldid and `userid`=userid and `fieldpos`=ret;
  end while;
end if;
return ret;
end; 
```

*（注意这是函数的主体，在 phpMyAdmin 中输入）*

编辑：我已经解决了这个`DECLARE`问题，但现在它说我不能从函数返回结果集。

我不确定我哪里出错了，我想我需要帮助才能走上正轨。特别是，我是否首先得到了正确的功能逻辑？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T09:00:40.003

在这一行：

```
if ret is null then select `[[Error: No room in Party]]` from `party`; end if; 
```

您为表中的所有行选择一个常量值，`party`但不要将该选择的结果放入变量中。这可能就是错误的来源。

它可能应该是这样的：

```
if ret is null then 
   set ret = '[[Error: No room in Party]]';
end if; 
```

（另请注意，字符串文字需要用单引号 ( `'`) 括起来，而不是那些可怕的反引号 - 这首先不是必需的，因此最好将它们一起排除）。

# javascript - IE10 是否支持 DOM4 Mutation Observers？

> ID：14180603
> 
> 赞同：2
> 
> 时间：2013-01-06T08:40:13.857
> 
> 标签：javascript, html, dom, internet-explorer-10, mutation-observers

如果没有，那么我只能希望与带有突变事件的 IE9 相同的行为？

我问是因为我目前没有可用的 IE10 平台，而且谷歌搜索没有为我产生任何结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T10:11:21.057

不，只有现代浏览器可以（Firefox、Chrome、Safari）。Opera 也不行。

# batch-file - 通过从文本文件中读取行批量更改文件夹名称

> ID：14180607
> 
> 赞同：0
> 
> 时间：2013-01-06T08:41:39.263
> 
> 标签：batch-file, cmd

我有很多文件夹都有一个file.txt。这个 file.txt 有很多行，有这样一行

```
SMTP_Email_Address type=SZ name@company.com SMTP_Email_Address 
```

并且每封电子邮件在每个文件的这一行中都与其他电子邮件不同
我如何阅读电子邮件地址或从文本文件中搜索电子邮件并用这个名称重命名文件夹？

如果我们在名为 (A) 的文件夹中有这条线，我希望批量读取 name@company.com 并重命名 (A) 文件夹。

**它会是这样的（`*@*.*`在file.txt/第一个电子邮件地址中查找
，如果你找到则批量查找>>将文件夹重命名为任何名称）**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T17:27:04.203

这是未经测试的，但我相信它会起作用：

```
@echo off
pushd "your root location"
for /f "tokens=1* delims=:" %%A in (
  'findstr /srbc:"SMTP_Email_Address  *type=SZ  *[^ ][^ ]*@[^ ][^ ]*\.[^ ][^ ]*  *SMTP_Email_Address" filel.txt^|sort /r'
) do if exist "%%A" for %%F in ("%%A\..") do (
  for /f "tokens=3" %%N in ("%%B") do ren "%%~fF" "%%N"
)
popd 
```

FINDSTR /S 选项在所有子文件夹中搜索“file.txt”以查找电子邮件地址行。完整文件路径以找到的每一行为前缀。SORT /R 导致子文件夹列在父文件夹之前。这很重要，这样我们就不会在重命名父文件夹后尝试重命名子文件夹。

IF EXIST "%%A" 防止在文件夹已命名后重命名文件夹（文件夹被重命名为找到的第一个电子邮件地址）。

最外面的 FOR /F 将找到的行分成“file.txt”的路径和文本行。下一个 FOR 提取文件的父文件夹，最后一个 FOR 提取电子邮件地址。

如果相同的电子邮件地址出现在多个文件夹中，该脚本当然无法重命名第二个文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T08:55:06.483

**在执行 oneliner 之前：**

```
sgeorge-mn:stack sgeorge$ ls -l
total 0
drwxr-xr-x  3 sgeorge  wheel  102 Jan  6 14:18 fol1
drwxr-xr-x  3 sgeorge  wheel  102 Jan  6 14:18 fol2
drwxr-xr-x  3 sgeorge  wheel  102 Jan  6 14:18 fol3

sgeorge-mn:stack sgeorge$ cat */file.txt
SMTP_Email_Address type=SZ abc@company.com SMTP_Email_Address )
SMTP_Email_Address type=SZ lmn@company.com SMTP_Email_Address )
SMTP_Email_Address type=SZ xyz@company.com SMTP_Email_Address ) 
```

**单线：**

```
sgeorge-mn:stack sgeorge$ for i in `ls -1`; do NAME=`awk '{ print $3}'  $i/file.txt | awk -F\@ '{ print $1}'` && mv $i $NAME ; done 
```

**执行oneliner后：**

```
sgeorge-mn:stack sgeorge$ ls -l
total 0
drwxr-xr-x  3 sgeorge  wheel  102 Jan  6 14:18 abc
drwxr-xr-x  3 sgeorge  wheel  102 Jan  6 14:18 lmn
drwxr-xr-x  3 sgeorge  wheel  102 Jan  6 14:18 xyz

sgeorge-mn:stack sgeorge$ cat */file.txt
SMTP_Email_Address type=SZ abc@company.com SMTP_Email_Address )
SMTP_Email_Address type=SZ lmn@company.com SMTP_Email_Address )
SMTP_Email_Address type=SZ xyz@company.com SMTP_Email_Address ) 
```

# performance - 如何使网站在浏览器上加载*慢*？

> ID：14180608
> 
> 赞同：1
> 
> 时间：2013-01-06T08:41:49.690
> 
> 标签：performance, google-chrome-extension

对于某些用户的接受度测试，我们需要编写一个 chrome 扩展程序，使特定站点（即 www.cnn.com 等）加载速度变慢 - 有点模仿缓慢的互联网连接。关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T08:44:14.507

它*必须*是Chrome扩展程序吗？因为例如有一个叫做[Sloppy](http://www.dallaway.com/sloppy/)的东西。

# iphone - 在其他平移手势之后告诉 ScrollView 滚动

> ID：14180613
> 
> 赞同：3
> 
> 时间：2013-01-06T08:43:36.817
> 
> 标签：iphone, ios, ipad, scrollview

我无法让滚动视图（在表格视图中）滚动。基本上，我有一个 if 语句来检查水平移动是否大于垂直移动。如果是，则在单元格上执行平移手势。否则，我希望表格视图正常滚动。我试过使用一些变体，`self.scrollview.enabled = yes`但我无法让它工作。

它适用于水平平移手势，但我无法让它在 else 部分正确滚动。这是最相关的代码：（对不起，如果它很糟糕 - 我还是 iOS/Objective C 的新手）。哦，如果您在代码摘录中随机看到一个奇怪的“代码”，请忽略它——我在格式化时遇到了一些问题，我丢了一个字。

```
-(void)handlePan:(UIPanGestureRecognizer *)panGestureRecognizer
{
    CGPoint location = [panGestureRecognizer locationInView:_tableView];

    //Get the corresponding index path within the table view
    NSIndexPath *indexPath = [_tableView indexPathForRowAtPoint:location];
    TVTableCell *cell = [_tableView cellForRowAtIndexPath:indexPath];

    CGPoint translation = [panGestureRecognizer translationInView:cell];
    // Check for horizontal gesture
    if (fabsf(translation.x) > fabsf(translation.y)) {
        CGPoint originalCenter = cell.center;

        if (panGestureRecognizer.state == UIGestureRecognizerStateBegan) {
            NSLog(@"pan gesture started");
        }

        if (panGestureRecognizer.state == UIGestureRecognizerStateChanged) {
            // translate the center

            CGPoint translation = [panGestureRecognizer translationInView:self.view];
            if (translation.x > 0) {
                cell.center = CGPointMake(originalCenter.x + (translation.x-(translation.x-3)), originalCenter.y);
            } else {
                cell.center = CGPointMake(originalCenter.x + (translation.x-(translation.x+3)), originalCenter.y);
            }

            // determine whether the item has been dragged far enough to initiate a delete / complete
            //this will be implemented eventually
            //  _deleteOnDragRelease = self.frame.origin.x < -self.frame.size.width / 2;
            NSLog(@"state changed");
        }

        if (panGestureRecognizer.state == UIGestureRecognizerStateEnded) {
            // the frame this cell would have had before being dragged
            CGRect originalFrame = CGRectMake(0, cell.frame.origin.y,
                                              cell.bounds.size.width, cell.bounds.size.height);
            //    if (!_deleteOnDragRelease) {
            // if the item is not being deleted, snap back to the original location
            [UIView animateWithDuration:0.2
                             animations:^{
                                 cell.frame = originalFrame;

                             }
             ];

        }
    } else {
        //else: scroll tableview normally
        NSLog(@"dear god act normally");
    }
} 
```

感谢您的帮助，非常欢迎所有建议。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-06T12:54:29.353

我不是很喜欢，`UITableView`但我想问题在于将您的自定义分配给您`UIPanGestureRecognizer`基本上`_tableView`会使默认设置无效。无论如何，无论出于何种原因，您都可以通过这种方式解决它。

假设您在 ViewController 中执行所有操作，即使它很脏。

使您的 ViewController 符合[`UIGestureRecognizerDelegate`协议](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIGestureRecognizerDelegate_Protocol/Reference/Reference.html)

在您`ViewController.m`覆盖该`gestureRecognizer:shouldRecognizeSimultaneouslyWithGestureRecognizer:`方法。

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer
{
    return YES;
} 
```

正如文档所说：

> 询问代理是否应允许两个手势识别器同时识别手势。
> 
> **返回值**
> YES 以允许gestureRecognizer 和otherGestureRecognizer 同时识别它们的手势。默认实现返回 NO——不能同时识别两个手势。

这样，您的平移识别器和默认识别器`UITableView`都将运行。

您需要做的最后一件事是将 ViewController 设置为`UIPanGestureRecognizer`：

```
UIPanGestureRecognizer *panRecognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(handlePan:)];
panRecognizer.delegate = self; 
```

*注意：这是您可以实施的最快和最脏的解决方案。更好的解决方案可能是将手势跟踪逻辑转移到单元格本身，或者将`UIPanGestureRecognizer`. 也看看[这个答案](https://stackoverflow.com/questions/10183584/uipangesturerecognizer-on-uitableviewcell-overwrites-uitableviews-scroll-view-g)。*

# dataframe - 重新索引数据帧的问题：重新索引仅对具有唯一值的索引对象有效

> ID：14180615
> 
> 赞同：3
> 
> 时间：2013-01-06T08:44:13.760
> 
> 标签：dataframe, pandas, reindex

尝试在熊猫中重新索引数据框时，我遇到了一个非常奇怪的行为。我的 Pandas 版本是 0.10.0，我使用 Python 2.7。基本上，当我加载数据框时：

```
eurusd = pd.DataFrame.load('EUR_USD_30Min.df').drop_duplicates().dropna()

eurusd

<class 'pandas.core.frame.DataFrame'>
DatetimeIndex: 119710 entries, 2003-02-02 17:30:00 to 2012-12-28 17:00:00
Data columns:
open     119710  non-null values
high     119710  non-null values
low      119710  non-null values
close    119710  non-null values
dtypes: float64(4) 
```

然后我尝试在更大的日期范围内重新索引：

```
newindex  = pd.DateRange(datetime.datetime(2002,1,1), datetime.datetime(2012,12,31), offset=pd.datetools.Minute(30))

newindex

<class 'pandas.tseries.index.DatetimeIndex'>
[2002-01-01 00:00:00, ..., 2012-12-31 00:00:00]
Length: 192817, Freq: 30T, Timezone: None 
```

尝试重新索引数据框时出现奇怪的行为。如果我重新索引数据集的较大部分，我会收到此错误：

```
eurusd[29558:29560].reindex(index=newindex)

Exception: Reindexing only valid with uniquely valued Index objects 
```

但是，如果我对上面的两个数据子集做同样的事情，我不会得到错误：

这是第一个子集，没有问题，

```
eurusd[29558:29559].reindex(index=newindex)

<class 'pandas.core.frame.DataFrame'>
DatetimeIndex: 192817 entries, 2002-01-01 00:00:00 to 2012-12-31 00:00:00
Freq: 30T
Data columns:
open     1  non-null values
high     1  non-null values
low      1  non-null values
close    1  non-null values
dtypes: float64(4) 
```

这是第二个子集，仍然没有问题，

```
eurusd[29559:29560].reindex(index=newindex)

<class 'pandas.core.frame.DataFrame'>
DatetimeIndex: 192817 entries, 2002-01-01 00:00:00 to 2012-12-31 00:00:00
Freq: 30T
Data columns:
open     1  non-null values
high     1  non-null values
low      1  non-null values
close    1  non-null values
dtypes: float64(4) 
```

我真的为此发疯，无法理解其中的原因。看起来数据框从重复项和重复索引中“干净”......如果你愿意，我可以为数据框提供泡菜文件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-06T16:55:19.700

您可以按索引分组并获取第一个条目（请参阅[文档](http://pandas.pydata.org/pandas-docs/dev/groupby.html#splitting-an-object-into-groups)）：

```
df.groupby(level=0).first() 
```

例子：

```
In [1]: df = pd.DataFrame([[1], [2]], index=[1, 1])

In [2]: df
Out[2]: 
   0
1  1
1  2

In [3]: df.groupby(level=0).first()
Out[3]: 
   0
1  1 
```

# java - 设计模式：惰性单例、泛型和继承：java.lang.Class 不能强制转换为 java.lang.reflect.ParameterizedType

> ID：14180619
> 
> 赞同：0
> 
> 时间：2013-01-06T08:44:52.313
> 
> 标签：java, generics, inheritance, singleton, lazy-evaluation

我正在尝试使用泛型和继承来实现 Lazy Singleton。我创建了一个`abstract`超类并声明了一个 Map ，它将存储该类的子类的所有实例。

这里是：

```
public abstract class AbstractXMLParser<T> {
    @SuppressWarnings("rawtypes")
    private static final Map<Class<? extends AbstractXMLParser>, AbstractXMLParser> INSTANCES = new HashMap<>();

    public AbstractXMLParser() {
        throw new UnsupportedOperationException("Cannot instantiate");
    }

    private static class SingletonHolder<T> {       
        @SuppressWarnings({ "unchecked"})
        private static <T> T getInstance() throws InstantiationException, IllegalAccessException {
            Class<T> clazz = (Class<T>) ((ParameterizedType) SingletonHolder.class.getClass().getGenericSuperclass()).getActualTypeArguments()[0];
            return clazz.newInstance();
        }
    }

    @SuppressWarnings({ "unchecked", "rawtypes" })
    public static <T extends AbstractXMLParser> T getInstance() throws InstantiationException, IllegalAccessException {
        Class<T> clazz = (Class<T>) ((ParameterizedType) AbstractXMLParser.class.getClass().getGenericSuperclass()).getActualTypeArguments()[0];
        if(INSTANCES.containsKey(clazz)) {
            return (T) INSTANCES.get(clazz);
        } else {
            T instance = SingletonHolder.getInstance();
            INSTANCES.put(clazz, instance);
            return instance;
        }
    }
} 
```

其中一个子类是：

```
public class ActivityTypeXMLParser extends AbstractXMLParser<ActivityTypeXMLParser>{
    private ActivityTypesXMLModel activityTypes;

    private ActivityTypeXMLParser() {

    }

    public static void main(String... strings) throws InstantiationException, IllegalAccessException {
        ActivityTypeXMLParser.getInstance();

    }
} 
```

该`main`方法用于测试目的。但我得到了例外：

```
Exception in thread "main" java.lang.ClassCastException: java.lang.Class cannot be cast to java.lang.reflect.ParameterizedType
    at com.edfx.adb.xml.parser.AbstractXMLParser.getInstance(AbstractXMLParser.java:25)
    at com.edfx.adb.xml.parser.ActivityTypeXMLParser.main(ActivityTypeXMLParser.java:30) 
```

现在调试后我发现

```
Class<T> clazz = (Class<T>) ((ParameterizedType) AbstractXMLParser.class.getClass().getGenericSuperclass()).getActualTypeArguments()[0]; 
```

是异常的原因，因为`AbstractXMLParser.class.getClass().getGenericSuperclass()`是返回`class java.lang.Object`。我需要到`Class<T>`这里。我怎样才能在课堂`AbstractXMLParser`和 in`SingletonHolder`中提取它`AbstractXMLParser`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T09:19:24.573

此代码存在多个问题：

*   `static`方法不被继承。`AbstractXMLParser.getInstance()`不知道它是在`ActivityTypeXMLParser`when 调用 as的上下文中调用的`ActivityTypeXMLParser.getInstance()`。

*   `AbstractXMLParser.class.getClass()`返回您班级的`Class' of`Class `, not`Class`。

*   目前还不清楚为什么你需要`AbstractXMLParser<T>`通用。请注意，和中`T`的 s是不同的类型参数。`AbstractXMLParser``SingletonHolder``getInstance()`

您需要将有问题的类`getInstance()`隐式传递给：

```
getInstance(ActivityTypeXMLParser.class); 
```

.

```
@SuppressWarnings({ "unchecked", "rawtypes" })
public static <T extends AbstractXMLParser> T getInstance(Class<T> clazz) 
    throws InstantiationException, 
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T10:59:14.507

这是我所做的完整解决方案，对某人有帮助。

`abstract super-class`：_

```
@SuppressWarnings({"all"})
public abstract class AbstractXMLParser<T> {    
    private static final Map<Class<? extends AbstractXMLParser>, AbstractXMLParser> INSTANCES = new HashMap<>();

    public AbstractXMLParser() {

    }

    private static class SingletonHolder<T> {               
        private static <T> T getInstance(Class<T> clazz) throws InstantiationException, IllegalAccessException, NoSuchMethodException, SecurityException, IllegalArgumentException, InvocationTargetException {
            Constructor<T> constructor = (Constructor<T>) clazz.getDeclaredConstructors()[0];
            constructor.setAccessible(true);            
            return constructor.newInstance(null);
        }
    }

    protected static <T extends AbstractXMLParser<T>> T getInstance(Class<T> clazz) throws InstantiationException, IllegalAccessException, NoSuchMethodException, SecurityException, IllegalArgumentException, InvocationTargetException {      
        if(INSTANCES.containsKey(clazz)) {
            return (T) INSTANCES.get(clazz);
        } else {
            T instance = SingletonHolder.getInstance(clazz);
            INSTANCES.put(clazz, instance);
            return instance;
        }
    }

    protected static <T extends AbstractXMLParser<T>> void putInstance(Class<T> clazz, T instance) {
        if(!INSTANCES.containsKey(clazz)) {
            INSTANCES.put(clazz, instance);
        }
    }
} 
```

还有一个子类：

```
public class ActivityTypeXMLParser extends AbstractXMLParser<ActivityTypeXMLParser>{

    private ActivityTypeXMLParser() {

    }   

    public static ActivityTypeXMLParser getInstance() {
        ActivityTypeXMLParser activityTypeXMLParser = null;

        try {
            activityTypeXMLParser = getInstance(ActivityTypeXMLParser.class);
        } catch (Exception exception) {
        }

        if(activityTypeXMLParser == null) {
            activityTypeXMLParser = new ActivityTypeXMLParser();
            putInstance(ActivityTypeXMLParser.class, activityTypeXMLParser);
        }

        return activityTypeXMLParser;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T09:40:48.447

您似乎想要获取作为抽象类的子类的类的泛型类型。但是你得到

```
AbstractXMLParser.class.getClass() 
```

这是抽象类的类，总是`Class` 相反，您应该只使用`getClass()`具体类的类。

# statistics - logit模型中的尺度参数

> ID：14180620
> 
> 赞同：4
> 
> 时间：2013-01-06T08:44:52.143
> 
> 标签：statistics, regression

在仔细阅读 logit 模型注释时，我很可能遇到了一种叫做“比例参数”的东西。有人可以解释一下那是什么以及它的用途。不使用会发生什么。另外，它也用于概率模型吗？

干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-24T01:17:20.697

这是5个月前问的，但无论如何我都会回答。

[OP，您可能还记得线性回归](http://en.wikipedia.org/wiki/Linear_regression)中残差平方和的概念。由此，我们可以通过将残差 SS 除以残差自由度来获得模型中误差的标准差的统计量。误差的标准差也称为*尺度参数*：它是线性回归中误差`sigma`的`N(mu, sigma)`分布。

在逻辑回归中，与残差 SS 类似的统计量是残差：在考虑预测变量的影响后，模型中无法解释的变化量。现在理论上，逻辑回归没有尺度参数：请注意，`sigma`二项式分布中没有等价物。（回想一下，逻辑回归假设数据来自二项分布，其参数`p`是预测变量的函数。）然而，在实践中，我们经常观察到数据中的可变性比模型所能解释的要多. 为此调整模型的一种方法是计算类似于线性回归中的“尺度参数”：残差偏差除以残差 df。

由于过度离散是响应分布的一个属性，它同样适用于概率回归和逻辑回归。

可以证明，在某些假设下，正确指定的逻辑/概率模型中的残差偏差应近似等于残差 df：即，尺度参数应约为 1。尺度参数 > 1 的模型是说是*过度分散*；您可以通过将系数等的所有 t 统计量除以比例参数来实现这一点，就像在线性回归中一样。

请注意，这并不总是有用的规则。它主要取决于每个二项式观察的试验次数很大的假设，这对于真实数据通常是违反的。例如，如果您有一个二元响应（每个观察值都是 0 或 1），它就会完全崩溃。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-23T23:38:49.847

我发现它们也有点难以理解，所以请耐心等待，但也许我有一些可能对你有用的见解。

首先，如果您还没有，请查看 Kenneth Train 的关于基于模拟的估计的书。在他关于 logit 的章节中，甚至还有一个关于比例参数的子章节（第 3.3 章）。

基本上，人们在谈论什么会有所不同，所以这取决于你在想什么。有些人将每个选择的整个条件效用除以 lambda。这个 lambda 通常不会被识别，因为效用的规模是未知的（只有相对差异很重要）。也许当您提出概率时，您讨论了未识别的正态误差项的方差。

但是，还有其他人在讨论如何用（混合）logit 模型逼近随机效用模型时讨论它们。从这个意义上说，这是因为多项式 logit 可以解释为“平滑”的 max 函数。也就是说，如果仅将 IID 极值误差乘以 lambda，则当 lambda -> 0 时，对数和收敛到最大选择（= 间接效用）。Kenneth Train 也谈到了这一点，请查看。

编辑：我认为实际上，如果您遇到数字麻烦，这主要是一件重要的事情。例如，我遇到了一些问题，其中某些数据行的大多数条件选择概率为 0 或 1，这会产生可能性问题。使用更高的 lambda 类型“平滑”了概率（在某种意义上，作为 lambda -> infinity，所有 CCPs -> 1/J（其中 J = 选择数））。

希望它有所帮助。

# jquery - 使用同位素排列网格

> ID：14180624
> 
> 赞同：0
> 
> 时间：2013-01-06T08:45:31.480
> 
> 标签：jquery, jquery-isotope

我正在使用 Jquery isotope 来排列不同大小的 div。

当html是这样的：

```
<div id="feed">
    <div class="item size1">
    </div>     
    <div class="item size1">
    </div>                 
    <div class="item size1">
    </div>     
    <div class="item size1">
    </div>      
    <div class="item size1">
    </div>
</div> 
```

网格排列得很好： ![在此处输入图像描述](../Images/d081595a7d0e89003976fb5433f2645b.png)

但是当我将html更改为：

```
<div id="feed">
    <div class="item size2">
    </div>     
    <div class="item size1">
    </div>                 
    <div class="item size1">
    </div>     
    <div class="item size1">
    </div>      
    <div class="item size1">
    </div>
</div> 
```

网格如下所示： ![在此处输入图像描述](../Images/e6c35e95ac901d6adc6c1105211b4f82.png)

`feed`div 很`540px`宽，但我希望在填充更多行之前完全使用宽度，在第二种情况下不会发生。

jquery 看起来像这样：

```
$('#feed').isotope({
    itemSelector: '.item',
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T17:20:30.183

通过为属性提供一个有限值来解决上述问题，`columnWidth`如下所示：

```
$('#container').isotope({
  masonry: {
    columnWidth: 240
  }
}); 
```

更多[在这里](http://isotope.metafizzy.co/docs/layout-modes.html)。

# java - sqlserver中的JAVA日期

> ID：14180626
> 
> 赞同：-1
> 
> 时间：2013-01-06T08:45:38.233
> 
> 标签：java, sql-server, date

我得到了值“2007-1-1”的日期类型，但保存后，“01 1 2007 12:00AM”改为在 sqlserver 中。如何在sqlserver中保存“2007-1-1”？谢谢你们。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-06T08:48:29.390

听起来你根本没有问题。您正在保存*date*，而不是字符串。当您将其取回*并将其转换为文本*时如何表示它是无关紧要的。您应该将值视为日期，而不是一段文本。到时候你就好了。如果您想将该日期转换为特定格式的文本，这是一个完全独立的操作。

（请注意，您应该尽可能避免字符串转换 - 例如，始终在准备好的语句中使用适当的参数，而不是将值直接放入 SQL 中，并且在使用返回的结果时不要在使用前盲目地将所有值转换为字符串。 )

# html - TD 琐碎的修复需要永远

> ID：14180627
> 
> 赞同：0
> 
> 时间：2013-01-06T08:46:06.227
> 
> 标签：html, css, height

我花了 2 天时间试图弄清楚为什么这个 td 的高度比它应该的要大，我知道这可能是一些我几乎无法观察到的微不足道的事情。

这是 HTML 在检查器中的外观： ![在此处输入图像描述](../Images/146da4f2f22a8aaec55b3f2e94de8d2b.png)

请注意，高度为 50px，但 td 没有响应

![在此处输入图像描述](../Images/a57257550d8314dffe8d0f9418bbb100.png)

即使图像高度是 50px :)

![在此处输入图像描述](../Images/706ef5b03276d356e2a967669c3218a4.png)

5px 是从哪里来的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T09:48:02.590

问题的简单演示：

```
<table><tr><td style="border: solid red 1px; padding:0"><img 
  src=http://lorempixel.com/54/50/ alt=""></table> 
```

绘制单元格边框后，您可以看到图像下方有空间。它保留给字母的后代，即使没有真正的字母存在——内容仍被视为文本。

最简单的解决方法是将以下内容添加到样式表中：

```
td img { display: block; } 
```

这导致图像被设置为一个简单的块，而不是被视为位于文本基线上的元素文本（可以说是一个大字母）。

# ipad - iPad Web 应用程序 - 缓存清单更新，但 ipad 使用旧图像

> ID：14180629
> 
> 赞同：1
> 
> 时间：2013-01-06T08:46:24.137
> 
> 标签：ipad, caching, web, manifest

我正在为 iPad 开发一个网络应用程序（除其他外），我使用 cache.manifest 离线加载内容。

这一直有效，但我注意到缓存更新存在 1 个问题......有时（我重复这只是有时会发生）我以前使用过的旧图像，但在大约 50 个 cache.manifest 版本之前已经替换了它们，仍然存在正在加载而不是新图像。

我为图像使用相同的名称，但实际图像已更改。其他一切似乎都在更新（css、js、html 等），甚至大多数时候图像都是更新的版本，但每隔一段时间（可能是 1/4 cache.manifest 版本）一些旧图像正在被使用再次通过 iPad。

我尝试通过清除设置> safari 下的所有网站/缓存数据来清除数据。我已经尝试按住电源按钮 5 秒钟，然后按主页按钮 5 秒钟，这应该会清除应用程序的数据。

虽然知道如何从 iPad 上真正清除 safari / 我的网络应用程序的所有数据会很有用，但我正在寻找一个更永久的解决方案，因为我希望在某个时候将其投入生产，所以我需要一些我能做到的东西在我的编码中做来解决这个问题。

您可以在 chumpgenius.com/chump 查看 Web 应用程序（在 chrome 中效果最好！）。我应该提到这个问题只发生在 iPad 上，据我所知。我想您无法复制此问题，因为此时您永远不会下载旧内容，但也许我的代码中的某些内容无法正常工作。我在 index.html 的底部有 appcache 处理东西（查看源代码）

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T22:09:15.500

您是否尝试过从 HTML 标记中删除清单文件和属性？它被称为缓存是有原因的，我遇到了同样的问题，它对我有用。最好在项目完成之前不要使用清单，否则它会让你发疯。

# javascript - javascript：核心执行概念

> ID：14180630
> 
> 赞同：-1
> 
> 时间：2013-01-06T08:46:40.203
> 
> 标签：javascript

```
 function foo(){ alert(this);}
  x=new foo();//this is equal to {foo();}//foo() is operating on the newly created object... 
```

现在，根据this关键字的定义“this指向函数操作的当前对象”

由于上述函数对新创建的对象进行操作，因此 this 关键字指向它。现在，再次：

```
function foo(){
      //this function foo is an javascript object right?

 } 
```

所以当我像这样在其中创建一个嵌套函数并在那里执行它时

```
 function foo(){
 function fo()
      {
       alert(this);//"this" keyword now should point to javascript function object
      }
 fo();//fo here is operating on javascript function object
}
foo(); 
```

所以现在当函数`foo()`执行时 this 关键字应该按照上面的定义指向函数 foo 对象。

不要这样说：“这个关键字的值取决于你如何调用一个函数”

我知道我正在简单地调用该函数，但根据上述定义，我的观点是否正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T08:59:13.630

在您的第二个示例中，警报对象将是窗口。这是因为：

1.  您只是调用外部函数，而不是实例化它
2.  警报值是*内部*函数的上下文，默认情况下是窗口。如果您将其用作构造函数，则*外部*函数的上下文将是实例。`foo`

为了详细说明第二点，如果您要运行以下代码，记录的值将是 x 的值：

```
 function foo() {
   var that = this;
   function fo() {
     console.log(that); //"this" keyword now should point to javascript function object
   }
   fo(); //fo here is operating on javascript function object
 }
 var x = new foo(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T09:51:41.713

你的观点是错误的。请看我的另一个回答。

看，如果你使用`new`，那么`this`在构造函数的范围内将指向返回的对象。

```
var Point2D = function (x, y) {
    this.x = x;
    this.y = y;

    this.setX = function (x) { this.x = x; };
    this.setY = function (y) { this.y = y; };
};

var point1 = new Point2D(1, 5),
    point2 = new Point2D(2, 3);

point1.setX(7);
point2.setY(32); 
```

我的嵌套函数被设置为***正在创建的全新“this”的***属性。

如果我在构造函数中有辅助函数：

```
Point2D = function (x, y) {

    function roundX () { return Math.floor(this.x); }
    function roundY () { return Math.floor(this.y); }
} 
```

这些函数***不是作为对象的属性添加的，因此`this`在它们内部调用`window`, 而不是***。

这就是 JS 的工作方式。

要么一个函数直接是一个对象的属性，要么你使用`.call()`或`.apply()`传递一个不同`this`的函数，或者函数使用`window`.

还：

是的，函数是对象。
但`this`在我的`Point2D`示例内部并没有指向 Point2D 函数......

它指向一个全新的对象，该对象被制作并返回。

如果您忘记使用`new`，猜猜什么会被用作`this`，而不是？
`window`做。

没有什么真正的神奇之处。

当您使用像我的 Point2D 构造函数这样的函数时，该函数会检查是否`new`被调用。如果是这样，那么`this = {};`就是在函数开始时在幕后发生的事情。如果不是，那么`this = window`就是所谓的。

但是嵌套函数也是如此。被`new`使用了吗？然后嵌套函数对一个 100% 全新的对象进行操作。否则，它在`window`.

唯一的四种解决方法是：

```
function sayName () { console.log(this.name); }

var bob = { name : "Bob" }; 
```

1)`.call(new_this)`

```
sayName.call(bob); // Bob 
```

证明函数是对象——它们都有自己的属性/方法

2)`.apply(new_this)`

```
sayName.apply(bob);  // Bob 
```

`.apply`并且`.call`除了参数如何传递给函数之外是相同的。

如果我`.call`在 Point2D 上使用，它看起来像：

```
var obj = {},
    x = 1,
    y = 3;

Point2D.call(obj, x, y); 
```

现在，Point2D 不再创建新对象，而是在`obj`.
如果我要使用`.apply`它看起来像：

```
var obj = {},
    x = 1,
    y = 3;

Point2D.apply(obj, [x,y]); 
```

全部区别在于您传递一个数组，而不是一次传递一个（对于您不知道有多少参数的情况）

...继续

3)`.bind`像其他两个一样工作，除了不是触发函数，它制作函数的副本，其中`this` ***总是***指向同一个对象，而不是每次调用函数时都计算。

```
var sayBob = sayName.bind(bob);
sayBob(); // Bob 
```

Bind 的工作原理是这样的：

```
function bind_this (new_this) {
    var func = this;
    return function () {
        func.call(new_this);
    }
}

function sayName () {
    console.log(this.name);
}

sayName.bind_this = bind_this;

var sayBob = sayName.bind_this(bob);
sayBob(); // Bob 
```

为了让论点正确，还有更多的事情要做，但这就是想法。

4）只需将您想要使用的功能设置为您想要使用它的事物的属性......

```
var bob = { name : "Bob" };

function sayName () { console.log(this.name); }

bob.sayName = sayName;
bob.sayName(); // Bob 
```

你有它......这些是使用方法`this`

如果使用`new`then 则`this`指向一个新对象。
如果您使用`.call` `.apply` `.bind`或设置函数作为对象的属性，则`this`指向您设置的对象。

如果您不执行上述任何一项操作，请`this`指向`window`。
函数是嵌套 6 深还是在全局范围内都没有关系。这些是你的选择。

想象一下我的 Point2D 看起来像这样：

```
var Point2D = function (x, y) {
    var this = undefined;
    if (new) { this = {}; }
    else if (called) { this = called; }
    else { this = window; }

    this.x = x;
    this.y = y;

    this.setX = function (x) {
        this = undefined;
        if (new) { this = {}; }
        else if (called) { this = called; }
        else { this = window; }
        /* this function is set as a property of another object -- so it is "called", always */
        this.x = x;
        if (new) { return this; }
    };

    this.setY = function (y) { /* same as setX */ };

    if (new) { return this; }
}; 
```

所有函数的内部，嵌套或非嵌套的工作，在引擎盖下......

所以现在，看着它，你应该看到它们之间的区别：

```
var obj = {};

var point = new Point2D(1, 3); // new object

var point2 = Point2D(2, 3); // point2 is empty and window gets the values

Point2D.call(obj, 5, 7); // obj is added to, instead of making a new object 
```

所以现在，希望您了解以下内容：

```
var bob = {
    name : "bob",
    speak : function () {
        var name = this.name; // bob
        console.log(name + " is lower case.");

        function uppercase () {
            var window_name = this.name;
            console.log(window_name + " is window.name.");
        }
        uppercase();

        function working_uppercase () { console.log(this.name.toUpperCase()); }

        working_uppercase.call(this);
    }
}; 
```

如果你不明白为什么这是真的，那就相信我的话，相信我是对的，几年后，这将成为你的第二天性。

另一种解决方案可能是避免`this`或谨慎使用它以避免混淆。

```
var Point2D = function (x, y) {
    this.x = x;
    this.y = y;

    this.findMagnitude = function () {
        return Math.sqrt(this.x * this.x
                       + this.y * this.y);
    };
};

var point = Point2D(3, 7); 
```

哎呀！没有`new`。

```
point; // undefined
window.findMagnitude; // function () { ... } 
```

那么为什么不处理不会搞砸的功能呢？

```
var Point2D = function (x, y) {
    var point = {
        x : x,
        y : y,
        setX : function (x) { this.x = x; },
        setY : function (y) { point.y = y; }
    };

    return point;
};

var point1 = Point2D(1, 3),
    point2 = Point2D(2, 7); 
```

我什`this`至在其中一种方法上使用过，但是因为我是直接在对象上设置的，所以只要不将函数复制到其他地方或在回调中使用它就可以了。

另一个，我在...上使用了一个引用。该函数可以提供给其他对象，也可以作为返回值传递，或者异步调用，每次，它都会对完全相同的对象执行完全相同的操作，因为它引用了对象，而不是`this`.

# php - 在 Windows 中使用 CMD 运行 PHP

> ID：14180636
> 
> 赞同：1
> 
> 时间：2013-01-06T08:48:15.323
> 
> 标签：php

如何在 cmd 中运行 php.. 我尝试使用 php filename.php 通过为该 php 文件提供正确的内容来运行它.. 但我得到了错误，

**'php' 不是内部或外部命令、可运行程序或批处理文件。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T09:00:30.537

您应该检查您的环境变量中是否有 PHP 的路径。

```
"My Computer" > "Properties" > "Advanced" > "Environment Variables" > "Path" 
```

或者你可以使用命令行。确保设置实际路径。

```
set PATH=%PATH%;C:\path\to\php 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T08:51:24.143

这可能是针对超级用户的，但无论如何我都会回答。

这是因为您没有安装 php。我建议安装 Cygwin，然后在其中安装 PHP。更多信息在[这里](http://www.garethhunt.com/2008/02/06/php-and-cygwin/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T09:30:50.990

@Sergejs Rižovs 的答案已经到位，但您的命令似乎实际上可能并不正确。看看[这里](http://ss64.com/nt/path.html)有关设置路径命令的更多参考

# android - 无法导入 Facebook Android SDK 的包

> ID：14180639
> 
> 赞同：0
> 
> 时间：2013-01-06T08:48:57.577
> 
> 标签：android, facebook, import

当我尝试导入 facebook SDK 时，我无法导入 facebook SDK 提供的包。

我尝试了以下步骤：

1.  从 git 克隆 sdk（路径为 - D:\gitrepository\facebook-android-sdk）

2.  我有一个项目，我想在其中使用 facebook api。（我的项目路径是：D:\androidworkspace\ContactManager）

3.  我从 Eclipse 中的“D:\git repository\facebook-android-sdk”导入了“facebook”文件夹。

4.  然后我将互联网权限添加到“ContactManager”。

5.  我使用该命令获取哈希键并在 fb 上注册它。

6.  同样在 ContactManager 中，右键单击 -> 属性 -> Android -> 将库添加为“facebook”。将编译器版本更改为 1.6

*现在在ContactManger*、 FaceBook 和*FacebookTestActivity 上*可以看到一个红色的感叹号图标，因为 Facebook 项目提供的类无法解析。

我哪里出错了，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T09:02:35.710

**facebook-android-sdk-3.0 库与最低 API:8 一起使用。所以请尝试将您的项目 API 提升到 8**

```
<uses-sdk android:minSdkVersion="8" /> 
```

`You can also check the API's Version at Run Time and modify your code basis on reflection or some another technique`

# java - Java - 获取 JSONObject 时出现 NullPointerException

> ID：14180643
> 
> 赞同：2
> 
> 时间：2013-01-06T08:49:55.610
> 
> 标签：java, android, json, rest, nullpointerexception

我正在尝试使用[Lukencode](http://lukencode.com/2010/04/27/calling-web-services-in-android-using-httpclient/)的 RestClient 类在我的 Android 应用程序中实现登录功能。我有一个名为`UserFunctions`通过 RestClient 检索 JSONObject 的类：

```
public class UserFunctions {

    private RestClient restClient;
    private String json;
    private Context mContext;

    private static String login_tag = "login";
    private static String register_tag = "register";

    // constructor
    public UserFunctions(Context context){
        restClient = new RestClient("http://10.0.2.2:81/HGourmet/user");
        mContext = context;
    }

    /**
     * function make Login Request
     * @param email
     * @param password
     * */
   public JSONObject loginUser(String email, String password){
        // Building Parameters      
        restClient.AddParam("tag", login_tag);
        restClient.AddParam("email", email);
        restClient.AddParam("password", password);

        // getting JSON Object
        try{
    restClient.Execute(RequestMethod.POST);
    }catch(Exception e){
        e.printStackTrace();
    }               
    json = restClient.getResponse();

        JSONObject jObj = null;
        try {
            jObj = new JSONObject(json);
        } catch (JSONException e) {
            Log.e("JSON Parser", "Error parsing data " + e.toString());
        }
        return jObj;
    } 
```

以下是我在 logcat 中得到的内容：

```
01-06 09:01:05.805: E/Trace(1819): error opening trace file: No such file or directory (2)
01-06 09:02:05.485: E/AndroidRuntime(1819): FATAL EXCEPTION: main
01-06 09:02:05.485: E/AndroidRuntime(1819): java.lang.NullPointerException
01-06 09:02:05.485: E/AndroidRuntime(1819):     at org.json.JSONTokener.nextCleanInternal(JSONTokener.java:116)
01-06 09:02:05.485: E/AndroidRuntime(1819):     at org.json.JSONTokener.nextValue(JSONTokener.java:94)
01-06 09:02:05.485: E/AndroidRuntime(1819):     at org.json.JSONObject.<init>(JSONObject.java:154)
01-06 09:02:05.485: E/AndroidRuntime(1819):     at org.json.JSONObject.<init>(JSONObject.java:171)
01-06 09:02:05.485: E/AndroidRuntime(1819):     at com.hanu.hgourmet.library.UserFunctions.loginUser(UserFunctions.java:49)
01-06 09:02:05.485: E/AndroidRuntime(1819):     at com.hanu.hgourmet.LoginActivity$1.onClick(LoginActivity.java:56)
01-06 09:02:05.485: E/AndroidRuntime(1819):     at android.view.View.performClick(View.java:4202)
01-06 09:02:05.485: E/AndroidRuntime(1819):     at android.view.View$PerformClick.run(View.java:17340)
01-06 09:02:05.485: E/AndroidRuntime(1819):     at android.os.Handler.handleCallback(Handler.java:725)
01-06 09:02:05.485: E/AndroidRuntime(1819):     at android.os.Handler.dispatchMessage(Handler.java:92)
01-06 09:02:05.485: E/AndroidRuntime(1819):     at android.os.Looper.loop(Looper.java:137)
01-06 09:02:05.485: E/AndroidRuntime(1819):     at android.app.ActivityThread.main(ActivityThread.java:5039)
01-06 09:02:05.485: E/AndroidRuntime(1819):     at java.lang.reflect.Method.invokeNative(Native Method)
01-06 09:02:05.485: E/AndroidRuntime(1819):     at java.lang.reflect.Method.invoke(Method.java:511)
01-06 09:02:05.485: E/AndroidRuntime(1819):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-06 09:02:05.485: E/AndroidRuntime(1819):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-06 09:02:05.485: E/AndroidRuntime(1819):     at dalvik.system.NativeStart.main(Native Method) 
```

我真的希望有人能帮我找出这个问题的原因。非常感谢你。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-06T09:06:40.020

我不会详细说明您应该如何执行此操作，而只会说明它发生的原因。根据定义，AsyncTask 是异步的。这意味着当您执行它时，它会在不同的线程中并行执行其工作。因此，您不能指望它在`execute()`被调用后立即终止（否则它将被称为*SyncTask*，并且没有任何存在的理由）。

视为烤面包机`AsyncTask`。当您启动烤面包机（执行 AsyncTask）时，它会烤面包，但不会立即返回烤面包。烤它需要一些时间。当它烤面包时，您可以做其他事情（因此不会完全冻结 UI 线程）。当它烤完你的面包时，它会用*叮叮声通知你！*面包烤好了。这里也是一样。`json`只有在 AsyncTask 通知您它已完成执行时，您才应该开始使用（烤面包）。

# ruby-on-rails - Rails 设计与 Couchbase

> ID：14180644
> 
> 赞同：3
> 
> 时间：2013-01-06T08:49:59.243
> 
> 标签：ruby-on-rails, devise, couchbase

设置一个新的 Rails 应用程序，我想使用 Couchbase 2.0 存储所有数据，并使用 Devise 进行用户身份验证，但我在 ORM（对象关系映射）中遇到错误，这意味着 Devise 不知道如何与 Couchbase 交谈。Couchbase 是一个类似于 Cassandra 的 NoSQL 数据存储，所以我想知道是否有人将 Devise 配置为与 Couchbase、Cassandra 或其他 NoSQL 一起使用并且可以提供帮助？

这是简单的 rails 应用程序，使用

`rails new myapp -T -O`

已编辑`Gemfile`，添加

```
gem "couchbase"
gem "couchbase-model"
gem "devise" 
```

设置 Couchbase 配置

`rails generate couchbase:config`并使用数据库连接信息编辑 config/couchbase.yml。

`rails generate devise:install`它创建了 config/initializers/devise.rb

查看 config/initializers/devise.rb，我看到它自动放入`require 'devise/orm/couchbase'`

`rails generate devise User`

失败：

```
/usr/local/rvm/gems/ruby-1.9.3-p362/gems/activesupport-3.2.10/lib/active_support/dependencies.rb:251:in `require': cannot load such file -- devise/orm/couchbase (LoadError) 
```

设计库中没有设计/orm/couchbase。

如果我将 config/initializers/devise.rb 中的 couchbase orm 行更改为

`require 'devise/orm/active_record.rb'`

当我尝试这样做时，我得到了一个不同的错误`rails generate devise User`：

`error couchbase [not found]`

有什么想法如何继续，还是 Devise 还没有为 Couchbase 和/或 NoSQL 数据存储做好准备？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T15:22:21.007

没错，目前还没有人为 Couchbase 和 Devise gem 编写过 ORM 适配器。我相信他们只有几个 ORM，ActiveRecord/SQL 是主要的。您可以使用 Sorcery gem，它允许集成/黑客攻击并与 Couchbase 一起使用。我自己还没有做过，但前几天我正在研究它。

如果我有机会为巫术制作指南，我将更新此答案，以便您收到通知，或者在 Twitter 上关注我：http: [//twitter.com/scalabl3](http://twitter.com/scalabl3)

# actionscript-3 - Starling 和 PureMVC

> ID：14180649
> 
> 赞同：1
> 
> 时间：2013-01-06T08:51:32.570
> 
> 标签：actionscript-3, puremvc, starling-framework

如何在我的 PureMVC 应用程序中获得单个视图以使用 Starling 及其自己的中介并与应用程序的其余部分进行通信？

应用程序的其余部分将不会使用八哥。

从我到目前为止的研究来看，starling 似乎只能在 swf 的主要“文档类”上激活？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T15:38:46.553

好的，所以我想出了如何做到这一点。你需要知道的几件事。

1.  虽然 Starling 感觉就像一个黑匣子/围墙花园，但您确实可以在最新版本中通过以下方式获得对 rootClass 的引用 `Starling.current.root`
2.  如果您有对 stage 的引用，您几乎可以在任何地方创建您的 starling 实例。所以你的调解员看起来像

    ```
    override public function onRegister():void {
        starlingInstance = new Starling(StarlingContainer, stageReference);
        starlingInstance.addEventListener(starling.events.Event.ROOT_CREATED, onStarlingRootCreated);
        starlingInstance.viewPort = new Rectangle(x, y, width, height);
        starlingInstance.start();
    }

    private function onStarlingRootCreated(event:starling.events.Event):void {

        viewComponent = Starling.current.root as StarlingContainer;
    } 
    ```

3.  `Event.ROOT_CREATED`重要的部分是在将 viewComponent 设置为 Starling rootClass 之前等待事件。

4.  您可以使用访问启动 stage3d 上下文`Starling.current.stage`或使用访问 nativeStage`Starling.current.nativeStage` 这对于侦听 StarlingContainer 上下文之外的事件很有用。

一旦你以这种方式设置了你的中介，你就可以像对待任何其他的 viewComponent 一样对待你的 starling viewComponent，发送通知等。

非常感谢[Starling 论坛](http://forum.starling-framework.org/topic/ab-testing-starling?replies=10#post-19934)。

# php - jQuerymobile mySQL

> ID：14180650
> 
> 赞同：-1
> 
> 时间：2013-01-06T08:51:42.970
> 
> 标签：php, mysql

我目前正在使用 joomla 为我的最后一年项目做一个网站，为了获得更好的成绩，我被要求使用 Jquerymobile 使其易于访问。但是，我不知道如何使用 mySQL 和 php 以及 Jquerymobile 从我的数据库中检索数据。任何人都可以启发我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T09:04:16.600

您必须使用 Ajax。所以使用`$.ajax`,`$.post`或`$.get`方法向您的网络服务器发送请求。然后，您将像往常一样使用 PDO 或 mysqli 请求您的数据库，或者您将使用 joomla API，因为您想使用 joomla。

基本语法适用于您的 javascript 文件，例如`ajaxquery.js`. 我假设您将通过单击 id 为的按钮发送请求`clickit`

```
(function(){
    var onClickCallback(e){
        //do something with DOM by handling the e object
        $.ajax('yoururl',{data:{var1:"value1",var2:"value2"},type:"get"})
              .success(function(xhr){
                  //display your data here
               ).fail(function(xhr){
                    $("#content").append($('<p class="error">An error occured</p>'));
                });
      }
    $('#clickit').on('click',onClickCallback);
})(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T09:11:41.310

这是基本问题。我认为您需要使用 PHP 和 MySQL 学习 CURD。

1.  首先你需要学习如何连接PHP和MySQL
2.  您需要学习如何将数据从 PHP 插入 MySQL
3.  您需要学习如何将数据从 PHP 更新到 MySQL
4.  您需要学习如何将数据从 PHP 更新到 MySQL

之后，您可以使用 ajax 来显示您的数据：

```
$.post('crud.php', function(data) {
  $('#result').html(data);
}); 
```

祝你好运。

# python - Python：编码错误 - 网页内容

> ID：14180651
> 
> 赞同：0
> 
> 时间：2013-01-06T08:51:47.413
> 
> 标签：python, unicode, character-encoding

我正在尝试获取网页的内容并对其进行解析，而不是保存在 mysql db 中。

我实际上是为编码 utf8 的网页做的。

但是当我尝试使用 8859-9 编码网页时，我得到了错误。

我获取页面内容的代码：

```
def getcontent(url):
    opener = urllib2.build_opener()
    opener.addheaders = [('User-agent', 'Magic Browser')]
    opener.addheaders = [('Accept-Charset', 'utf-8')]   
    #print chardet.detect(response).get('encoding)
    response = opener.open(url).read()
    opener.close()
    return response

url     = "http://www.meb.gov.tr/duyurular/index.asp?ID=4"
contentofpage = getcontent(url)
print contentofpage
print chardet.detect(contentofpage)
print contentofpage.encode("utf-8") 
```

页面内容的输出： ... E�itim Teknolojileri Genel M�d�rl� ...

```
{'confidence': 0.7789909202570836, 'encoding': 'ISO-8859-2'}

Traceback (most recent call last):
  File "meb.py", line 18, in <module>
    print contentofpage.encode("utf-8")
    UnicodeDecodeError: 'ascii' codec can't decode byte 0xee in position 458: ordinal not     in range(128) 
```

实际上页面是土耳其页面，编码是 8859-9。

当我尝试使用默认编码时，我看到的都是���而不是一些字符。我如何将页面内容转换为 utf-8 或土耳其语 (iso-8859-9)

另外当我使用 unicode(contentofpage)

它得到

回溯（最后一次调用）：文件“meb.py”，第 20 行，打印 unicode（contentofpage）UnicodeDecodeError：'ascii'编解码器无法解码位置 458 的字节 0xee：序数不在范围内（128）

有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T09:06:36.557

我认为您想解码而不是编码，因为它已经编码。

```
print contentofpage.decode("iso-8859-9") 
```

产生一个样本，如：

```
Eğitim Teknolojileri Genel Müdürlüğü 
```

# c# - Nhibernate 不会级联删除

> ID：14180653
> 
> 赞同：1
> 
> 时间：2013-01-06T08:52:27.883
> 
> 标签：c#, database, class, nhibernate, nhibernate-mapping

我对 nhibernate 有一个非常简单的问题（我刚开始使用它）

我有以下 hbm 映射文件：

```
<class name="Customer" table="Customers" lazy="false">
<id name="Id" column="CustomerId">
    <generator class="native">
</id>
<property name="Name" />
<property name="Picture" type="BinaryBlob" />
<bag name="Orders" cascade="all-delete-orphan" lazy="false">
  <key column="CustomerId" />
  <one-to-many class="Order" />
</bag>
</class>

<class name="Order" table="Orders" lazy="false">
<id name="Id" column="OrderId">
    <generator class="native">
</id>
<property name="Name" />
<property name="Picture" type="BinaryBlob" />
<bag name="Products" cascade="all-delete-orphan" lazy="false"
  <key column="OrderId" />
  <one-to-many class="Product" />
</bag>
</class>

<class name="Product" table="Products" lazy="false">
<id name="Id" column="ProductId">
    <generator class="native">
</id>
<property name="Name" />
<property name="Picture" type="BinaryBlob" />
<property name="ProductStr" />
</class> 
```

Customer 类有一个 int id、字符串名称、byte[] 图片和 IList of Orders。

Order 类有一个 int id、string name、byte[] 图片和 IList of Products。

产品类有一个 int id、字符串名称、byte[] 图片、字符串 productstr 和 int 数量（我目前不使用）

客户表有一个客户 ID、名称和图片（varbinary(max)）。

订单包含订单 ID、名称、图片和客户 ID

产品具有产品 ID、名称、图片、productstr 和订单 ID。

问题：当我使用 session.Delete(csCustomer) 删除客户时，它会成功地从数据库中删除整个客户，但不会删除所有订单。它只在已删除客户的所有订单中的客户 ID 字段中放置 null。

任何人都可以发现我的配置有问题吗？我看到了一个使用 nhibernate 的示例，他们在订单类中保存了对客户的引用，并在产品类中保存了对订单的引用，这是我需要做些什么来修复它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T17:24:07.470

你必须`inverse="true"`放在你的包上。

您的客户映射应如下所示：

```
<class name="Customer" table="Customers" lazy="false">
<id name="Id" column="CustomerId">
    <generator class="native">
</id>
<property name="Name" />
<property name="Picture" type="BinaryBlob" />
<bag name="Orders" cascade="all-delete-orphan" inverse="true" lazy="false">
  <key column="CustomerId" />
  <one-to-many class="Order" />
</bag>
</class> 
```

[这里](http://notherdev.blogspot.co.uk/search/label/NHibernate%20mapping)有一篇关于这个属性的好文章，Ayende很久以前就[写过它。](http://www.hibernatingrhinos.com/products/nhprof/learn/alert/SuperfluousManyToOneUpdate)

我建议您扩展您的订单映射，参考您的客户添加：

```
<many-to-one name="Customer" column="CustomerId" not-null="true"/> 
```

并将虚拟属性添加到您的类中：

```
public virtual Customer Customer { get; set; } 
```

更多信息[在这里](http://blogs.microsoft.co.il/blogs/arnona/archive/2011/07/12/understanding-one-to-many-relationships-in-nhibernate.aspx)。

您可能要考虑的另一件事是更改原因`bag`，`set`因为包允许重复，如此[处](https://stackoverflow.com/a/1921727/219406)所述。

并且也许使用[封装](http://lostechies.com/jimmybogard/2010/03/10/strengthening-your-domain-encapsulated-collections/)来增强您的域。

# java - 警报生成器中应用程序的令牌不为空

> ID：14180666
> 
> 赞同：0
> 
> 时间：2013-01-06T08:55:10.000
> 
> 标签：java, android, eclipse

我每周都使用接收器制作一个警报框。但是我在下面的代码中遇到以下错误

> 无法添加窗口 - 令牌 null 不适用于应用程序

我正在使用的代码是

```
 public class AlarmReceiver extends BroadcastReceiver 
    {
         @Override
         public void onReceive(Context context, Intent intent) 
         {
           try {
                 displayAlert("Have you seen your chiropractor this month?", "Alert!", context);
                } 
           catch (Exception e) 
            {
               Toast.makeText(context, "There was an error somewhere, but we still received an alarm", Toast.LENGTH_SHORT).show();
                 e.printStackTrace();
              }
        }

         public void displayAlert(final String error, String title, final Context context)
         {
                new AlertDialog.Builder(context.getApplicationContext()).setMessage(error)  
                .setTitle(title)  
                .setCancelable(true)  
                .setNeutralButton("Continue",  
                   new DialogInterface.OnClickListener() {  
                   public void onClick(DialogInterface dialog, int whichButton){
                           dialog.cancel();
                            Intent newIntent = new Intent(context, Appointment.class);
                            context.startActivity(newIntent);
                   }  
                   })  
                .show(); 
            }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T09:01:11.953

问题出在`getApplicationContext()`

```
new AlertDialog.Builder(this).setMessage(error)  
            .setTitle(title)  
            .setCancelable(true)  
            .setNeutralButton("Continue",  
               new DialogInterface.OnClickListener() {  
               public void onClick(DialogInterface dialog, int whichButton){
                       dialog.cancel();
                        Intent newIntent = new Intent(context, Appointment.class);
                        context.startActivity(newIntent);
               }  
               })  
            .show(); 
```

代替`getApplicationContext()`通行证`ActivityName.this`或`getContext()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T09:01:53.377

而不是这个：

```
context.getApplicationContext(); 
```

采用

```
this 
```

再试一次，这应该可以

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T09:11:27.500

我真的不认为展示`AlertDialog`你的`BroadcastReceiver`. `Notification`当用户单击它时，您应该创建一个并打开一些活动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T09:49:42.217

我不想要通知，我只是做了一个便宜的把戏

我创建了一个空白活动 MYExtraActivity 并在 Receiver 中调用它

```
Intent newIntent = new Intent(context, MYExtraActivity .class);
                            context.startActivity(newIntent); 
```

在这个新活动中，我定义了一个警报和一切

# c# - mouse_event 函数单击一次

> ID：14180667
> 
> 赞同：0
> 
> 时间：2013-01-06T08:55:10.527
> 
> 标签：c#, aforge

当我的视频检测到像蓝色这样的颜色时，我使用`mouse_event`函数来模拟点击，问题是当它检测到蓝色时它开始一遍又一遍地点击，我想在它检测到颜色时执行单击并停止直到颜色消失然后回来。

```
if(blue=detect)
{
mouse.clickright();
} 
```

但是当它检测到它开始一次又一次地点击

```
void clickright()
{
x = position.x;
y = position.y;

mouse_event(MOUSE_RIGHTDOWN | MOUSE_RIGHTUP, X,Y,0,0);
} 
```

背后的代码不准确..但你们可以理解：P `clickright()`单击帮助后我怎么能停止它！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T09:02:01.983

因为你的“如果”是错误的..

```
if(blue==detect)
{
mouse.clickright();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T09:12:34.627

```
if(blue==detect)
{
mouse.clickright();
'then remove handler for clickright for a while then put it back

} 
```

背后的代码不准确..但你可以理解：P

# sorting - 对与 vi 中的模式不匹配的每一行进行排序

> ID：14180668
> 
> 赞同：0
> 
> 时间：2013-01-06T08:55:14.983
> 
> 标签：sorting, pattern-matching, vi

如何在 vi(m) 中对不包含模式的每一行进行排序。示例：对不以 # 开头的每一行进行排序

我试过 1,$v/^#/sort... 没有结果！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T11:28:17.550

您可能可以分多个步骤执行此操作（假设您需要顶部的排序输入）：

1.  标记第一行。

    > `:1ka`

2.  将与模式不匹配的行移到顶部（替换为正确的模式）。

    > `:v/^#/m0`

3.  对与模式不匹配的范围进行排序。

    > `:1,'a sort`

# codeigniter - AWS SES codeigniter 邮件失败

> ID：14180673
> 
> 赞同：2
> 
> 时间：2013-01-06T08:56:42.837
> 
> 标签：codeigniter, amazon-web-services

我正在使用以下代码使用我的亚马逊 ses 服务凭证发送电子邮件。但是消息没有得到传递......

这是我的代码：

```
$this->load->library('email');

$config = array(
    'protocol' => 'smtp',
    'smtp_host' => 'email-smtp.us-east-1.amazonaws.com',
    'smtp_user' => '******',
    'smtp_pass' => '*********',
    'smtp_port' => 25
);

$this->email->initialize($config);

$this->email->from('sender08@example.com');
$this->email->to('reciever@example.com');

$this->email->subject('Test');
$this->email->message('test');
$this->email->set_newline("\r\n");
$this->email->send();
$this->email->print_debugger(); 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-14T20:22:02.613

为了让它工作，我在我的 config/email.php 文件中添加了以下几行

```
$config['newline']      = "\r\n";
$config['smtp_crypto']  = 'tls'; 
```

注意：您需要[CI 2.1.0 或更高版本才能使 smtp_crypto 指令](http://ellislab.com/forums/viewthread/158882/)正常工作

我希望它也可以通过将其添加到您的配置数组来工作：

```
$config = array(
    'protocol'  => 'smtp',
    'smtp_host' => 'email-smtp.us-east-1.amazonaws.com',
    'smtp_user' => '******',
    'smtp_pass' => '*********',
    'smtp_port' => 25,
    'newline'   => "\r\n",
    'smtp_crypto' => 'tls'
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T09:12:31.850

只需将 email-smtp.us-east-1.amazonaws.com 更改为 ssl://email-smtp.us-east-1.amazonaws.com

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-07T07:44:51.100

我找到了解决方案：如果您使用的是 TLS

然后代替这个 email-smtp.us-east-1.amazonaws.com

使用 tls://email-smtp.us-east-1.amazonaws.com

并添加此 $config['newline'] = "\r\n"; 您在哪里定义了 SMTP 配置。

我面临通过更改这两个解决的相同问题。

我希望这些建议也对你们有所帮助。

# c - 释放线程获取的资源

> ID：14180675
> 
> 赞同：1
> 
> 时间：2013-01-06T08:57:15.297
> 
> 标签：c, pthreads, posix

我读到了 pthread_detach ，它在调用线程时释放了线程获取的资源，所以我做了一个小实验，但即使在分离线程之后，看起来资源也没有释放。这是代码：

```
#define SIZE 2048
void *func(void *arg);

int main()
{
    void *x;
    int i;

    pthread_t tid;
    pthread_attr_t attr,attr2;

    int fp=open("SharedMemWithMutex.c",O_RDONLY);

    pthread_attr_init(&attr2);

    pthread_create(&tid,&attr2,func,&fp);

    pthread_join(tid,&x); 

    i=*(int *)x;
    fprintf(stderr,"BEFORE DETACH: read bytes are %d\n",i);
    pthread_detach(tid);

    i=*(int *)x;
    fprintf(stderr,"AFTER DETACH: read bytes are %d\n",i);

    return 0;

}

void *func(void *arg)
{
    int fp=*(int *)arg;

    char buf[SIZE];

    int *readbytes=(int *) malloc(sizeof(int));
    *readbytes=read(fp,buf,SIZE);   

    return readbytes;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T09:00:03.423

这里的“资源”仅包括`pthreads`加入线程并找出其退出状态所需的内部资源。

它不包括您自己获取的任何其他资源（堆内存、打开的文件、数据库连接等）。认识到这些资源通常不具有属于特定线程的内在概念可能会有所帮助，因为线程可以自由地共享它们。

您的代码还有其他几个问题：

*   您可以加入或分离线程；你不能两者都做。
*   检查函数的返回码是个好习惯；这里`pthread_detach()`可能返回错误代码。
*   目前尚不清楚您希望通过重复实现什么`i=*(int *)x`。即使`readbytes`确实被自动释放，第二个`i=*(int *)x`也只会导致未定义的行为，这可能会或可能不会以任何特定方式表现出来。

# c++ - 通过 C++ 与 OS 函数交互

> ID：14180678
> 
> 赞同：0
> 
> 时间：2013-01-06T08:58:02.130
> 
> 标签：c++, windows, clipboard

我正在尝试用 C++ 制作一个与操作系统功能交互的工具，但我以前从未做过类似的事情，所以我什至不知道在哪里寻找答案。

这是我想做的概述示例：

假设我在一个文件夹中存储了许多文本文件。每个文件都有一些文本和密码（只是字符串，没有加密）。我想要做的是输入一个关键字（例如“1”或“2”，或任何关键字），然后将在文件中选择一个密码。现在，我知道如何做所有这些“简单”的事情了，**接下来是我的问题：**

一旦我找到密码 - 假设密码将存储在 String psw 变量中 - 我想将 psw 字符串复制到我的操作系统（比如说 Windows）用于函数“复制”的“缓冲区”（或其他任何内容）中" (Ctrl + C)。这导致：下次我按 Ctrl+V 时，psw 将被粘贴。

使用示例：用户运行 .exe 并打开一个窗口。然后他输入一个关键字并选择一个密码并将其添加到处理“复制”功能的“缓冲区”中。程序可能会在这种状态下终止，或者等待另一个密码（我们不再关心它了）。现在，假设用户创建了一个文本文件，按 Ctrl + V 并将密码粘贴到文本文件中，中间没有来自用户端的任何其他交互。

这是我的问题：这甚至可能还是我应该放弃这个想法？如果是，我将不胜感激任何帮助、教程或一些关于在哪里搜索的模式。

提前致谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T09:02:45.120

这更像是一个“Windows”的答案，而不是一个“C++”的答案，但下面的代码将在 C 或 C++ 中工作。

[在 Windows 上，您可以通过 Win32 API](http://msdn.microsoft.com/en-us/library/windows/desktop/ff468801%28v=vs.85%29.aspx)实用地将字符串“粘贴”到剪贴板中。

```
void PasteString(const char* pszPhrase)
{
    int len = strlen(pszPhrase);
    BOOL fResult = FALSE;

    fResult = OpenClipboard(GetDesktopWindow());

    if (fResult == FALSE)
    {
        return;
    }

    HGLOBAL hglob = GlobalAlloc(GHND, len+1);
    void* pGlobalMemory = GlobalLock(hglob);

    strcpy((char*)pGlobalMemory, pszPhrase);

    GlobalUnlock(hglob);

    EmptyClipboard();
    SetClipboardData(CF_TEXT, hglob);
    CloseClipboard();
} 
```

# c# - Delegatecommand、relaycommand 和 routedcommand 的区别

> ID：14180688
> 
> 赞同：50
> 
> 时间：2013-01-06T09:00:35.460
> 
> 标签：c#, mvvm, command

我对命令模式感到困惑。关于命令有很多不同的解释。我以为下面的代码是delegatecommand，但是在阅读了relaycommand之后，我很怀疑。

relaycommand、delegatecommand 和 routedcommand 有什么区别。是否可以在与我发布的代码相关的示例中显示？

```
class FindProductCommand : ICommand
{
    ProductViewModel _avm;

    public FindProductCommand(ProductViewModel avm)
    {
        _avm = avm;
    }

    public bool CanExecute(object parameter)
    {
        return _avm.CanFindProduct();
    }

    public void Execute(object parameter)
    {
        _avm.FindProduct();
    }

    public event EventHandler CanExecuteChanged
    {
        add { CommandManager.RequerySuggested += value; }
        remove { CommandManager.RequerySuggested -= value; }
    }

} 
```

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-01-06T10:27:22.180

您的`FindProductCommand`类实现了[`ICommand`](https://msdn.microsoft.com/en-us/library/system.windows.input.icommand%28v=vs.110%29.aspx?f=255&MSPPError=-2147217396)接口，这意味着它可以用作[WPF**命令**](https://msdn.microsoft.com/en-us/library/ms752308.aspx#Anchor_0)。它既不是 a`DelegateCommand`也不是 a `RelayCommand`，也不是 a `RoutedCommand`，它们是`ICommand`接口的其他实现。

* * *

**`FindProductCommand`与`DelegateCommand`/`RelayCommand`**

通常，当一个实现`ICommand`被命名为`DelegateCommand`or`RelayCommand`时，目的是您不必编写实现该`ICommand`接口的类；相反，您将必要的方法作为参数传递给`DelegateCommand`/`RelayCommand`构造函数。

例如，您可以编写以下代码，而不是整个班级：

```
ProductViewModel _avm;
var FindPoductCommand = new DelegateCommand<object>(
    parameter => _avm.FindProduct(),
    parameter => _avm.CanFindProduct()
); 
```

（另一个可能比节省样板代码更大的好处——如果您在视图模型中实例化`DelegateCommand`/ `RelayCommand`，您的命令可以访问该视图模型的内部状态。）

`DelegateCommand`/的一些实现`RelayCommand`：

*   [Microsoft Prism DelegateCommand 参考](http://msdn.microsoft.com/en-us/library/ff654132.aspx)
*   [WPF教程实现`ICommand`调用`DelegateCommand`](http://wpftutorial.net/DelegateCommand.html)
*   [另一种实现](http://relentlessdevelopment.wordpress.com/2010/03/30/simplified-mvvm-commanding-with-delegatecommand/)也称为`DelegateCommand`
*   Josh Smith的[原始实现`RelayCommand`](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx#id0090030)

有关的：

*   [Relay/ICommand 与 DelegateCommand——区别](https://stackoverflow.com/q/16988250/111794)

* * *

**`FindProductCommand`对比`RoutedCommand`**

您`FindProductCommand`将`FindProduct`在触发时执行。

WPF 的内置[`RoutedCommand`](https://msdn.microsoft.com/en-us/library/system.windows.input.routedcommand.aspx?f=255&MSPPError=-2147217396&cs-save-lang=1&cs-lang=csharp#code-snippet-1)函数做了其他事情：它引发了一个[路由事件](https://msdn.microsoft.com/en-us/library/ms742806.aspx?f=255&MSPPError=-2147217396)，该事件可由可视树中的其他对象处理。这意味着您可以将命令绑定附加到要执行的其他对象`FindProduct`，同时将`RoutedCommand`自身专门附加到触发命令的一个或多个对象，例如按钮、菜单项或上下文菜单项。

一些相关的SO答案：

*   [MVVM 路由和中继命令](https://stackoverflow.com/questions/650010/mvvm-routed-and-relay-command)
*   [WPF ICommand 与 RoutedCommand](https://stackoverflow.com/q/1135983/111794)

# objective-c - 如何在cocos2d中以横向和横向模式自动旋转游戏场景？

> ID：14180692
> 
> 赞同：1
> 
> 时间：2013-01-06T09:01:06.227
> 
> 标签：objective-c, cocos2d-iphone

我正在使用 cocos box2d 版本 v1.1.0-RC0。任何人都可以帮我解决一下，我怎么能在横向右和横向左模式下自动旋转我的游戏场景。游戏场景仅在横向左侧，而不是在设备方向的横向右侧旋转。

# mysql - mysql join, group concat or group by

> ID：14180695
> 
> 赞同：1
> 
> 时间：2013-01-06T09:01:13.087
> 
> 标签：mysql, sql, foreach, pivot

我有一张`users`,`inductions`和的表格`user_inductions`。

*   该`users`表有`id`and `name`,
*   该`inductions`表有`id`和`name`, 和
*   `user_inductions`有和。_ `id`_`user_id``induction_id`

我想返回一份所有诱导和做过诱导的人的列表。但是，我已经这样做了，因为我希望创建一个如下所示的表格。我不确定如何编辑查询，所以我可以按我的意愿取回信息。

```
------------------------------------------------------------------------------------
| name    | tennis | cricket | rugby | squash | football | Table tennis |   etc    |
------------------------------------------------------------------------------------
| Bob     |   0    |   1     |   0   |    1   |    1     |     0        |          |
------------------------------------------------------------------------------------
| paul    |   1    |   1     |   1   |    1   |    0     |     0        |          |
------------------------------------------------------------------------------------ 
```

我想遍历数据，以便在顶部获得归纳列表，然后每个用户如果已被引导到该主题，则以 1 下降，如果没有，则以 0 下降。我有几个查询，但他们只返回所有用户只返回他们所做的归纳或归纳和做过的人。

例如：

```
SELECT CONCAT(  `f_name` ,  ' ',  `l_name` ) AS user, GROUP_CONCAT( pmainductions.name
ORDER BY pmainductions.id ) AS induction
FROM users
LEFT JOIN pmainduction_user ON users.id = pmainduction_user.user_id
LEFT JOIN pmainductions ON pmainductions.id = pmainduction_user.pmainduction_id
GROUP BY users.id 
```

这会产生

```
bob | cricket,squash,football

paul| tennis,cricket,rugby,squash 
```

任何帮助，将不胜感激。谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T09:06:46.420

尝试这个：

```
SELECT 
  CONCAT(  `f_name` ,  ' ',  `l_name` ) AS user, 
  MAX(CASE WHEN pmainductions.name = 'tennis' THEN 1 ELSE 0 END) AS 'tennis',
  MAX(CASE WHEN pmainductions.name = 'cricket' THEN 1 ELSE 0 END) AS 'cricket',
  MAX(CASE WHEN pmainductions.name = 'rugby' THEN 1 ELSE 0 END) AS 'rugby',
  ...
FROM users
LEFT JOIN pmainduction_user ON users.id         = pmainduction_user.user_id
LEFT JOIN pmainductions     ON pmainductions.id = pmainduction_user.pmainduction_id
GROUP BY users.id; 
```

如果您对每个用户有未知数量的感应，并且您想动态地执行此操作，您可以这样做：

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT CONCAT('MAX(IF(p.Name = ''',
      p.Name, ''', 1, 0)) AS ', '''',   p.Name , '''')
  ) INTO @sql
FROM users u
LEFT JOIN user_inductions up ON u.id = up.user_id
LEFT JOIN inductions      p ON p.id = up.induction_id;

SET @sql = CONCAT('SELECT u.name AS user,' ,
                  @sql, ' FROM users u ',
                  ' LEFT JOIN user_inductions up ',
                  ' ON u.id = up.user_id',
                  ' LEFT JOIN inductions      p     ',
                  ' ON p.id = up.induction_id ',
                  ' GROUP BY u.id');
SELECT @sql;

prepare stmt 
FROM @sql;

execute stmt; 
```

## [SQL 小提琴演示](http://sqlfiddle.com/#!2/4519f/2)

这会给你类似的东西：

```
| USER | TENNIS | CRICKET | RUGBY | SQUASH | FOOTBALL | TABLE TENNIS | TWO WORDS |
----------------------------------------------------------------------------------
|  bob |      1 |       1 |     1 |      1 |        1 |            0 |         0 |
| paul |      1 |       1 |     1 |      1 |        1 |            1 |         1 | 
```

# c++ - Switchcase 语句问题。从txt文件c ++中读取信息

> ID：14180698
> 
> 赞同：-1
> 
> 时间：2013-01-06T09:01:46.680
> 
> 标签：c++, struct, switch-statement

我正在尝试编写一个程序，该程序从文本文件中读取信息并使用结构和联合以及 cstrings 将其复制到数组中。我的文本文件看起来像这样。

```
F South Korea
Male Psy Park Jae Sang
31 - 12 - 1977
3 CSCI114 55 CSCI103 44 GangNam 100

S Female Super Junior
5 - 8 - 1978 
2 CSCI114 60 CSCI103 80

F People Republic Of China
Unknown James Bond
11 - 12 - 1976
4 CSCI114 54 CSCI124 66 CSCI007 99 CSCI123 28 
```

我的查询是，我编写了一个带有 for 循环的简单 switch 案例，该循环根据其条件读取信息。例如，每段前的第一个字母表示学生是外国人，F 还是新加坡人，S。根据他们的国籍，我选择将他们的信息复制到哪个结构/联合。为了给你一个更好的主意，这是我从原始文本文件中获取信息并处理它后的最终文本输出文件的样子。

[http://i.stack.imgur.com/Bv2YS.jpg](http://i.stack.imgur.com/Bv2YS.jpg)

以下是我遇到问题的代码部分。看来 char 变量是否读取“S”或“F”，我的 switch 语句仅将其读取为“F”。

```
 //file to array.

        char dateJunk;
        int numOfCourses;

        int k = 0;
        while (!afile.eof())
        {
            for (int k = 0; k < 3; k++)
            {
            afile >> locale;
                switch (locale)
                {
                    case 'F':
                        afile.getline(x[k].st.foreignStudent.nationality, MAX);
                        afile >> x[k].st.foreignStudent.gender;
                        afile.getline(x[k].st.foreignStudent.name, MAX);
                        afile >> x[k].st.foreignStudent.bd.day;
                        afile >> dateJunk;
                        afile >> x[k].st.foreignStudent.bd.month;
                        afile >> dateJunk;
                        afile >> x[k].st.foreignStudent.bd.year;
                        afile >> x[k].st.foreignStudent.numOfCourses;

                        for (int i = 0; i < x[k].st.foreignStudent.numOfCourses; i++)
                        {
                            afile >> x[i].st.foreignStudent.subjects[k];

                            afile >> x[i].st.foreignStudent.grades[k];
                        }
                        break;

                    case 'S':
                        afile >> x[k].st.localStudent.gender;
                        afile.getline(x[k].st.localStudent.name, MAX);
                        afile >> x[k].st.localStudent.bd.day;
                        afile >> dateJunk;
                        afile >> x[k].st.localStudent.bd.month;
                        afile >> dateJunk;
                        afile >> x[k].st.localStudent.bd.year;
                        afile >> x[k].st.localStudent.numOfCourses;;
                        for (int i = 0; i < x[k].st.localStudent.numOfCourses; i++)
                        {
                            afile >> x[i].st.localStudent.subjects[k];

                            afile >> x[i].st.localStudent.grades[k];
                        }
                }
                }
        }

        //Tests my cstring arrays to see everything is copied in correctly.
        for (int k = 0; k < 3; k++)
        {
        cout << locale << " " << x[k].st.foreignStudent.nationality;
        cout << endl;
        cout << x[k].st.foreignStudent.gender;
        cout << x[k].st.foreignStudent.name;
        cout << endl;
        cout << x[k].st.foreignStudent.bd.day << " - ";
        cout << x[k].st.foreignStudent.bd.month << " - ";
        cout << x[k].st.foreignStudent.bd.year;
        cout << endl;
        cout << x[k].st.foreignStudent.numOfCourses;
        cout << endl;
        for(int i = 0; i < x[k].st.foreignStudent.numOfCourses; i++)
        {
        cout << x[i].st.foreignStudent.subjects[k] << " ";
        cout << x[i].st.foreignStudent.grades[k] << " ";

        }
            cout << endl;
        }

        return 0;
    } 
```

下面是完整的代码。

```
 #include <iostream>
    #include <fstream>
    #include <cstdlib>
    #include <ctime>
    using namespace std;

    const int MAX = 80;

    struct Birthday
    {
        char day[MAX];
        char month[MAX];
        char year[MAX];
    };

    struct Local
    {
        char name[MAX];
        char nationality[MAX];
        char gender[MAX];
        Birthday bd;
        char subjects [MAX][MAX];
        char grades [MAX][MAX];
        int numOfCourses;

    };

    struct Foreigner
    {
        char name[MAX];
        char nationality[MAX];
        char gender[MAX];
        Birthday bd;
        char subjects [MAX][MAX];
        char grades [MAX][MAX];
        int numOfCourses;
    };

    union Student
    {
        Local     localStudent;
        Foreigner foreignStudent;
    };

    enum CountryType {S, F};

    struct UowStudents
    {
        CountryType ct;
        Student st;
    };

    int fileToArray (fstream& afile, char fileName [], UowStudents* x, char& locale);

    int main ()
    {
        srand(time_t(NULL));

        fstream afile;
        UowStudents x [MAX];
        char fileName[MAX];
        char locale;
        cout << "Enter filename: ";
        cin >> fileName;
        int size = fileToArray (afile, fileName, x, locale);

    }

    int fileToArray (fstream& afile, char fileName [], UowStudents* x, char& locale)
    {
        afile.open(fileName, ios::in);

        if (!afile)
        {
            cout << fileName << "could not be opened for read" << endl;
            exit (-1);
        }
        //file to array.

        char dateJunk;
        int numOfCourses;

        int k = 0;
        while (!afile.eof())
        {
            for (int k = 0; k < 3; k++)
            {
            afile >> locale;
                switch (locale)
                {
                    case 'F':
                        afile.getline(x[k].st.foreignStudent.nationality, MAX);
                        afile >> x[k].st.foreignStudent.gender;
                        afile.getline(x[k].st.foreignStudent.name, MAX);
                        afile >> x[k].st.foreignStudent.bd.day;
                        afile >> dateJunk;
                        afile >> x[k].st.foreignStudent.bd.month;
                        afile >> dateJunk;
                        afile >> x[k].st.foreignStudent.bd.year;
                        afile >> x[k].st.foreignStudent.numOfCourses;

                        for (int i = 0; i < x[k].st.foreignStudent.numOfCourses; i++)
                        {
                            afile >> x[i].st.foreignStudent.subjects[k];

                            afile >> x[i].st.foreignStudent.grades[k];
                        }
                        break;

                    case 'S':
                        afile >> x[k].st.localStudent.gender;
                        afile.getline(x[k].st.localStudent.name, MAX);
                        afile >> x[k].st.localStudent.bd.day;
                        afile >> dateJunk;
                        afile >> x[k].st.localStudent.bd.month;
                        afile >> dateJunk;
                        afile >> x[k].st.localStudent.bd.year;
                        afile >> x[k].st.localStudent.numOfCourses;;
                        for (int i = 0; i < x[k].st.localStudent.numOfCourses; i++)
                        {
                            afile >> x[i].st.localStudent.subjects[k];

                            afile >> x[i].st.localStudent.grades[k];
                        }
                }
                }
        }

        //Tests my cstring arrays to see everything is copied in correctly.
        //The print for foreign student cstrings also has information for the
        //one Singaporean student "S" in the middle. Singaporean must go into
        //the local cstrings.
        for (int k = 0; k < 3; k++)
        {
        cout << locale << " " << x[k].st.foreignStudent.nationality;
        cout << endl;
        cout << x[k].st.foreignStudent.gender;
        cout << x[k].st.foreignStudent.name;
        cout << endl;
        cout << x[k].st.foreignStudent.bd.day << " - ";
        cout << x[k].st.foreignStudent.bd.month << " - ";
        cout << x[k].st.foreignStudent.bd.year;
        cout << endl;
        cout << x[k].st.foreignStudent.numOfCourses;
        cout << endl;
        for(int i = 0; i < x[k].st.foreignStudent.numOfCourses; i++)
        {
        cout << x[i].st.foreignStudent.subjects[k] << " ";
        cout << x[i].st.foreignStudent.grades[k] << " ";

        }
            cout << endl;
        }

//as you can see, everything gets copied into localStudent struct as well.
        for (int k = 0; k < 3; k++)
        {

            cout << x[k].st.localStudent.gender;
            cout << x[k].st.localStudent.name;
            cout << endl;
            cout << x[k].st.localStudent.bd.day << " - ";
            cout << x[k].st.localStudent.bd.month << " - ";
            cout << x[k].st.localStudent.bd.year;
            cout << endl;
            cout << x[k].st.localStudent.numOfCourses;
            cout << endl;
            for(int i = 0; i < x[k].st.localStudent.numOfCourses; i++)
            {
                cout << x[i].st.localStudent.subjects[k] << " ";
                cout << x[i].st.localStudent.grades[k] << " ";

            }
            cout << endl;
        }

        return 0;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T10:28:40.047

您正在看到`union`在 C++ 中使用 a 的效果。

联合的主要特征是所有成员共享同一块内存。并且由于您的成员结构`Local`和`Foreigner`布局完全相同，您可以使用其中任一来打印联合的内容。

如果您更改其中一种结构（例如，从 中删除`nationality`）`Local`，您将看到一些打印输出出现乱码（尤其是那些将外国学生打印为本地学生的条目，反之亦然）。这是因为用于学生的内存块对于本地和外国学生的解释不同。
注意：从技术上讲，这会导致未定义的行为，但在这种情况下，结果不太可能是灾难性的。正式地，您只能读取您上次写入联合的同一成员，或者（如果成员是结构）结构的初始成员与上次写入联合的结构中的初始成员相同。

# sql-server - 无法将 Linq 中的存储过程添加到包含用户定义表类型的 Visual Web Developer 中的 SQL 文件

> ID：14180703
> 
> 赞同：0
> 
> 时间：2013-01-06T09:02:42.027
> 
> 标签：sql-server, sql-server-2012, linq-to-sql, user-defined-types

我有`SQL Server 2012`数据库。

SP 有两种，一种是字符串类型的参数，另一种是用户自定义类型的参数。

我可以从 Visual Web 开发人员的数据库资源管理器中将第一个 SP 拉到`Linq`SQL 文件，但我无法将第二个 SP（一个以用户定义类型作为参数的）拉到 Linq to SQL 文件。

此外，我无法在数据库资源管理器的“类型”文件夹下看到我的用户定义类型。

我重新启动了我的系统几次，但没有帮助并得到错误：

`Could not retrieve schema information for database object dbo.JobSaveOrPublishJob`

我错过了什么吗？

第二个存储过程的架构是：

```
ALTER PROCEDURE [dbo].[JobSaveOrPublishJob]
    -- Add the parameters for the stored procedure here
    @Title NVARCHAR(150), --
    @WorktoolID INT,
    @JobSummary NVARCHAR(500),--
    @Description NVARCHAR(4000),--
    @StartDate DATETIME,--
    @DueDate DATETIME,--
    @Duration INT,--
    @BasePayment MONEY, --
    @InstanceCount INT, --
    @MarketPlaceID BIGINT, --
    --@PreferredZerkerIDs [dbo].[TableTypePreferredZerkers] READONLY, -- User-defined type
    @PublishAfter int, 
    @Qualifications [dbo].[TableTypeQualificationJob] READONLY, -- User-defined type
    @Questionnaires [dbo].[TableTypeQuestionnaire] READONLY, -- User-defined type
    @AutoAward BIT, --
    @AutoAccept BIT, --
    @SharePublicProfile BIT, --
    @BlockCommunication BIT, --
    @IsPublished BIT, --
    @CreatedBy BIGINT, --
    @TrainingCourse [dbo].[TableTypeJobTrainingCourses] READONLY -- User-defined type

AS
BEGIN
-- Do something 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T19:28:00.323

从设计师的角度来看，它不受支持。从代码的角度来看，有一种方法可以解决它，但它并不漂亮（根本）。看

[https://stackoverflow.com/a/1810750/736079](https://stackoverflow.com/a/1810750/736079)

# wpf - 当 SelectedItem 绑定到列表中不存在的内容时，取消选择所有项目

> ID：14180705
> 
> 赞同：8
> 
> 时间：2013-01-06T09:02:56.077
> 
> 标签：wpf, binding, selecteditem, itemssource

我有两个不同`ItemsSource`但`SelectedItem`绑定到相同属性的列表 - “***名称***”。

首先，我在右侧列表中选择项目“c”，因此左侧列表中的项目“c”也被选中。

比我在右侧列表中选择了另一个项目，但左侧列表中的“c”仍然被选中。我明白为什么要这样做，但是我可以取消选择正确列表中的“c”吗？

![在此处输入图像描述](../Images/44525cc5398a69c8b81bb1282b58a9c4.png)

XAML：

```
 <Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition  />
        <ColumnDefinition  />
    </Grid.ColumnDefinitions>

    <ListView SelectedItem="{Binding Name}" ItemsSource="{Binding lstNames1}"/>
    <ListView SelectedItem="{Binding Name}" ItemsSource="{Binding lstNames2}" Grid.Column="1"/>
</Grid> 
```

后面的代码：

```
 public partial class selected : Window
{
    public ObservableCollection<string> lstNames1 { get; set; }
    public ObservableCollection<string> lstNames2 { get; set; }

    public string Name { get; set; }

    public selected()
    {
        Names1 = new ObservableCollection<string> {"a1", "b1", "c"};
        Names2 = new ObservableCollection<string> { "a2", "b2", "c" };
        InitializeComponent();
        DataContext = this;
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-06T09:49:02.023

如果您将`SelectedItem`绑定切换到`SelectedValue`this 将按照您的意愿行事， The `SelectedItem`is not clearing because it not set to because it not set to `null`because the other list has set a value,`SelectedValue`行为有点不同，因为它必须找到一个项目，否则它将清除`SelectedItem`列表中的.

```
<ListView SelectedValue="{Binding Name}" ItemsSource="{Binding lstNames1}" />
<ListView SelectedValue="{Binding Name}" ItemsSource="{Binding lstNames2}" Grid.Column="1"/> 
```

希望这是有道理的:)

![在此处输入图像描述](../Images/44975e46cc93e099636ee6eadab13b08.png) ![在此处输入图像描述](../Images/509776499326a79ecd148dc3b8240482.png)

# php - 使用 zend gdata lib 删除 youtube 播放列表

> ID：14180706
> 
> 赞同：0
> 
> 时间：2013-01-06T09:03:16.167
> 
> 标签：php, youtube-api, zend-gdata

我正在寻找一种方法来使用 Zend 库在 YouTube 上获取特定视频播放列表的对象。我试过这段代码：

```
 $url = 'http://gdata.youtube.com/feeds/api/playlists/'.$_GET['plid'].'?v=2';
    $feed = $yt->getVideoFeed($url);
    $feed->delete(); 
```

但是 delete() 显然不是 getVideoFeed() 对象的函数。我该如何做这项工作？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T16:40:31.167

PHP的[YouTube API 开发人员指南](https://developers.google.com/youtube/2.0/developers_guide_php)应该为您指明正确的方向。

首先，您需要获取`PlaylistListEntry`您感兴趣的播放列表，如[https://developers.google.com/youtube/2.0/developers_guide_php#Retrieving_Playlists中所述](https://developers.google.com/youtube/2.0/developers_guide_php#Retrieving_Playlists)

然后，您可以在该对象上调用该`delete()`方法： [https ://developers.google.com/youtube/2.0/developers_guide_php#Deleting_a_Playlist](https://developers.google.com/youtube/2.0/developers_guide_php#Deleting_a_Playlist)`PlaylistListEntry`

# javascript - javascript中的奇怪标记

> ID：14180711
> 
> 赞同：0
> 
> 时间：2013-01-06T09:04:13.200
> 
> 标签：javascript

[此页面](http://www-archive.mozilla.org/js/language/js20-1999-02-18/tokens.html)中有几个令牌，我不知道 Javascript 中的用途。它们是“->”、“::”、“..”、“...”。它们是用来做什么的？或者它们只是某种从未成为主流的退化特征？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T09:30:37.520

这是 1999 年 2 月的 JavaScript 2.0 草案！[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators)是新规范中一个不错的方便列表。

JavaScript 现在真的被称为 ECMAScript，它的规范在这里： http: [//www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf)。

# php - PHP/AJAx 实时搜索的最佳方法 - xml 还是 MySQL？

> ID：14180713
> 
> 赞同：1
> 
> 时间：2013-01-06T09:04:23.030
> 
> 标签：php, mysql, xml, ajax, search

需要一些建议......

我已经看到很多关于执行 AJAX 实时搜索的不同方法的讨论，其中使用自动完成功能来建议搜索词。就像在 Google 或 YouTube 上一样。

一些教程建议使用 AJAX 从 XML 文件中获取结果。有人建议直接查询数据库。关于采取哪种方法似乎有很多相互矛盾的建议——但对每种方法的优缺点没有明确的共识。

假设我有一个结构表：

```
ID   TITLE   AUTHOR   LINK 
```

我想要一个自动完成的搜索框，以提供有关标题的建议。该表很大 - 100000+ 行。

什么是最好的方法：

1.  在每次击键时直接查询 DB（可能设置一个函数来限制每个用户每秒的 # 服务器请求）。

2.  查询 XML 文件。这更有效吗？如果我直接查询数据库，我是否有超载服务器的风险？

3.  还有什么？

有人可以总结需要考虑的事情吗？如果您的网站上有 AJAX 实时搜索，您会采用什么方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T10:35:02.533

首先，100,000+ 行是一个*小型*数据库。今天的计算机速度很快，它们有大量的 RAM，它们有快速的总线。但是，即使不是所有这些，正确的索引数据库也将使用[二叉搜索树](https://en.wikipedia.org/wiki/Binary_search_tree)或更高级的变体之类的东西，以确保搜索在 O(log N) 时间内发生，或者更快。对于 100,000 行的数据库，这意味着所需的元素将在最多 17 次比较中找到。将其提升到 10,000,000 行只需要 23 次比较。因此，从这个意义上说，尺寸几乎不是问题。

您将如何读取该 XML 文件？数据库是精心设计的软件，通常经过多年的测试、调试和优化。而且，如果您对 DB 不满意，通常可以执行扩展或修改以提高 DB 的效率。例如，Facebook 每秒处理大约 6000 万次查询，它们[运行在 MySQL 上](http://gigaom.com/cloud/facebook-shares-some-secrets-on-making-mysql-scale/)。

相比之下，您的 XML 文件在开头没有索引，因此每次阅读时都需要线性搜索（在 O(N) 时间内）。文件 I/O 相对较慢，线性搜索也较慢。

您的数据库还被设计成可以同时接受许多用户的点击而不会抱怨。您的操作系统可能会或可能不会被设计为处理多个用户对同一文件的同时访问。

XML 选项可能更好的一种情况是，如果您的数据库位于不同的服务器上并且存在大量滞后时间。在这种情况下，您可以考虑使用 SQLite 或尝试优化与数据库的连接。

# linux-kernel - 将数据包从 IP 层传递到设备驱动程序

> ID：14180717
> 
> 赞同：2
> 
> 时间：2013-01-06T09:06:12.413
> 
> 标签：linux-kernel

我正在尝试将 sk_buff 数据包从协议栈的 IP 层传递到我创建并注册的设备驱动程序。设备驱动程序代码如下：

```
 #include<linux/module.h>
    #include<linux/netdevice.h>
    #include<linux/kernel.h>
    #include<linux/skbuff.h>
    #include<linux/pci.h>
    #include<linux/interrupt.h>
    struct net_device *my_dev;
    static netdev_tx_t veth_xmit(struct sk_buff *skb, struct net_device *dev)
    {
           printk(KERN_INFO "I got a packet");    
           return NETDEV_TX_OK;
    }
    static int veth_open(struct net_device *dev)
    {

                  memcpy(dev->dev_addr, "\0ABCD0", ETH_ALEN);
                  netif_start_queue(dev);

                  return 0;
    }

    int veth_close(struct net_device *dev)
    {
           printk("releasing mydev\n");
           netif_stop_queue(dev);
           return 0;
    }

    int veth_dev_init(struct net_device *dev)
    {
           printk("initialising\n");
           return 0;
    }

    static struct net_device_ops veth_ops = {

     .ndo_init         = veth_dev_init,
     .ndo_open         = veth_open,
     .ndo_stop         = veth_close,
     .ndo_start_xmit   = veth_xmit,

       };
   int veth_init()
   {
   int ret,i;
   my_dev = alloc_netdev(sizeof(struct net_device), "my_dev", ether_setup);
   if (my_dev == NULL)
    return -ENOMEM; 
   my_dev->netdev_ops = &veth_ops;
       register_netdev(my_dev);
       return 0;
   }
   void veth_exit()
   {
    unregister_netdev(my_dev);
    free_netdev(my_dev);
   }

   module_init(veth_init);
   module_exit(veth_exit); 
```

然后在加载此模块并使用“ifconfig”为其分配 IP 地址后，我尝试使用 dev_queue_xmit() 函数传递数据包。代码如下：

```
 struct sk_buff *skb;
   void generate_send()
   {
   skb=alloc_skb(skb,2);
   skb->data[0]='m';//just to check
       skb->dev="my_dev";
       dev_queue_xmit(skb);
   }
   static int testing_init(void)
   {
   //time=4;    
   generate_send();

   return 0;    
   }
   static void testing_exit(void)
   {
printk(KERN_INFO "Goodbye, world 2\n");
   }
   module_init(testing_init);
   module_exit(testing_exit); 
```

但是数据包没有通过，当我尝试加载这个测试模块时，系统显示致命错误并终止进程。你能给我一个解决这个问题的好方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T10:53:47.597

由于您的代码显示您只是将 skb 分配为

```
 struct sk_buff *skb;
   void generate_send()
   {
   skb=alloc_skb(skb,2);
   skb->data[0]='m';//just to check
       skb->dev="my_dev";
       dev_queue_xmit(skb);
   } 
```

所以没有检查 alloc_skb() 是否成功分配存储。而你只是设置这个（skb）结构的 dev 和 data 参数。但是如果你在文件**/net/core/dev.c中看到函数****dev_queue_xmit()**的源代码，你会得到为什么你得到返回值为正的结果，但这并不意味着数据包已经传输。

 **所以首先尝试将整个数据包创建为其 UDP/TCP 标头、IP 标头、协议建议的数据。然后将 skb 的字段设置为这个全新创建的数据包。现在尝试发送它你会得到结果。

供参考尝试->

```
skb = alloc_skb(len, GFP_ATOMIC);
if (!skb)
        return;

skb_put(skb, len);

skb_push(skb, sizeof(*udph));
skb_reset_transport_header(skb);
udph = udp_hdr(skb);
udph->source = htons(....);
udph->dest = htons(...);
udph->len = htons(udp_len);
udph->check = 0;
udph->check = csum_tcpudp_magic(local_ip,
                                remote_ip,
                                udp_len, IPPROTO_UDP,
                                csum_partial(udph, udp_len, 0));

if (udph->check == 0)
        udph->check = CSUM_MANGLED_0;

skb_push(skb, sizeof(*iph));
skb_reset_network_header(skb);
iph = ip_hdr(skb);

/* iph->version = 4; iph->ihl = 5; */
put_unaligned(0x45, (unsigned char *)iph);
iph->tos      = 0;
put_unaligned(htons(ip_len), &(iph->tot_len));
iph->id       = htons(atomic_inc_return(&ip_ident));
iph->frag_off = 0;
iph->ttl      = 64;
iph->protocol = IPPROTO_UDP;
iph->check    = 0;
put_unaligned(local_ip, &(iph->saddr));
put_unaligned(remote_ip, &(iph->daddr));
iph->check    = ip_fast_csum((unsigned char *)iph, iph->ihl);

eth = (struct ethhdr *) skb_push(skb, ETH_HLEN);
skb_reset_mac_header(skb);
skb->protocol = eth->h_proto = htons(ETH_P_IP);
memcpy(eth->h_source, dev->dev_addr, ETH_ALEN);
memcpy(eth->h_dest, remote_mac, ETH_ALEN);

skb->dev = dev;

dev_queue_xmit(skb); 
```

根据需要更改字段...**

# mysql - 密码错误...？

> ID：14180718
> 
> 赞同：0
> 
> 时间：2013-01-06T09:06:32.130
> 
> 标签：mysql, login, passwords, case

我有一个 MySQL 表用于我的程序的登录信息。密码数据类型是 varchar。当我尝试登录我的密码时，它并不关心我的字符是小写还是大写。如果我输入正确的字母，它会登录。对此有什么解决方案？非常感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T09:13:07.960

发生这种情况是因为默认情况下 mysql[不区分大小写](http://dev.mysql.com/doc/refman/5.0/en/case-sensitivity.html)：

```
mysql> create table foo (id INT NOT NULL AUTO_INCREMENT PRIMARY KEY, bar VARCHAR(20));
Query OK, 0 rows affected (0.12 sec)

mysql> insert into foo values ('','Hello'),('','hello');
Query OK, 2 rows affected, 2 warnings (0.03 sec)
Records: 2  Duplicates: 0  Warnings: 0

mysql> select * from foo where bar = 'hello';
+----+-------+
| id | bar   |
+----+-------+
|  1 | Hello |
|  2 | hello |
+----+-------+
2 rows in set (0.00 sec) 
```

到目前为止，最简单的选择是不要以纯文本形式存储您的密码！加密或散列它们并存储散列/加密值。

* * *

存储密码哈希的一种简单方法是使用内置`md5`函数：

```
mysql> SELECT MD5('secret');
+----------------------------------+
| MD5('secret')                    |
+----------------------------------+
| 5ebe2294ecd0e0f08eab7690d2a6ee69 |
+----------------------------------+
1 row in set (0.40 sec) 
```

然后，您的查询将是：

```
SELECT * FROM `sometable` WHERE `the_password` = MD5('secret'); 
```

请注意，这是一种单向散列 - 也就是说，您实际上无法`secret`从散列版本中获取单词。因此，例如，您不能使用它在用户注册欢迎电子邮件中显示密码。

MySQL 支持一些您应该查看的[加密和散列函数。](http://dev.mysql.com/doc/refman/5.0/en/encryption-functions.html#function_password)

# sml - How to "do nothing" in else part of if condition in SML

> ID：14180728
> 
> 赞同：3
> 
> 时间：2013-01-06T09:07:44.313
> 
> 标签：sml, smlnj

In SML I must use the `else` part , since those are the rules of the language .

How can I do nothing in the `else` condition then ?

```
fun calc(input : string ) : int =

    let
      val outStr = ref "someString"
      val outInt = ref 0
    in
      outInt := (validateHelper(input) handle _ => ~1);
      if (outInt <> ~1) 
         then
            (  outStr := replaceRomanDec(input);       (* replace roman number with decimal *)
               outInt := (calcMyRomanExpression(!outStr) handle _ => ~1);
            )
         else (* nada *)

      !outInt
    end; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T09:19:07.973

```
else () 
```

The value `()` is the unique inhabitant of the `unit` type. It makes the whole if-then-else construct well-typed, since the `then` branch also has type `unit`.

Finally, in some ML variants `if e1 then e2` can be used as shortcut for `if e1 then e2 else ()`, but not in SML.

# python - 以反斜杠结尾的字符串错误

> ID：14180729
> 
> 赞同：0
> 
> 时间：2013-01-06T09:07:57.180
> 
> 标签：python, string

> **可能重复：**
> [为什么我不能用 \ 结束原始字符串](https://stackoverflow.com/questions/11168076/why-cant-i-end-a-raw-string-with-a)

为什么这个语法正确：

```
baseFilePath = r"C:\SVN\google code" 
```

虽然这给出了错误

```
baseFilePath = r"C:\SVN\google code\" 
```

> SyntaxError：扫描字符串文字时 EOL

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T09:13:39.637

来自[文档](http://docs.python.org/2/reference/lexical_analysis.html#string-literals)：

> 当存在 'r' 或 'R' 前缀时，反斜杠后面的字符将不加更改地包含在字符串中，并且所有反斜杠都保留在字符串中。例如，字符串文字 r"\n" 由两个字符组成：一个反斜杠和一个小写的 'n'。字符串引号可以用反斜杠转义，但反斜杠保留在字符串中；例如，r"\"" 是由两个字符组成的有效字符串文字：反斜杠和双引号；r"\" 不是有效的字符串文字（即使原始字符串也不能以奇数个反斜杠结尾）。具体来说，原始字符串不能以单个反斜杠结尾（因为反斜杠会转义后面的引号字符）。

**具体来说，原始字符串不能以单个反斜杠结尾（因为反斜杠会转义以下引号字符）**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T09:18:51.373

使用`os.path.join`，它可以避免这种情况，并注意使用适合操作系统的目录分隔符：

```
>>> import os
>>> os.path.join('C:','svn','google code')
'C:/svn/google code' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T09:09:57.837

在第二种情况下，您正在转义引号`\"`是 a 的转义序列`"`

要使用反斜杠，您应该使用双反斜杠`\\`

这应该工作：

```
baseFilePath = "C:\\SVN\\google code\\"

>>> print(baseFilePath)
    C:\SVN\google code\ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T09:11:16.000

在这里，反斜杠转义了结尾`"`。
如果要`\`在字符串中使用，最安全的方法是转义反斜杠本身。

尝试这个：

```
baseFilePath = "C:\\SVN\\google code\\" 
```

我推荐它而不是使用原始字符串。[python doc](http://docs.python.org/2/reference/lexical_analysis.html)中描述了需要转义的字符。

# regex - .htaccess 重定向的正则表达式

> ID：14180730
> 
> 赞同：0
> 
> 时间：2013-01-06T09:08:20.423
> 
> 标签：regex, .htaccess, redirect

我已经编辑了我网站中的**所有**网址，下面是一个**示例**（它不必在 calipers 目录下）（下划线的数量也不是恒定的）

> .com/Calipers/Insize_1108_1_2

至

> .com/Calipers/Insize-1108-1-2

所以网址中只更改了 1 个字符，我应该如何修改我的 .htaccess ？

目前我的 htaccess 不包含除我的 cms 默认设置之外的任何内容，如下所示。

```
RewriteBase /
RewriteRule ^sitemap.xml$ index.php?route=feed/google_sitemap [L]
RewriteRule ^googlebase.xml$ index.php?route=feed/google_base [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !.*\.(ico|gif|jpg|jpeg|png|js|css)
RewriteRule ^([^?]*) index.php?_route_=$1 [L,QSA] 
```

**编辑：这是我试图做的，但没有奏效。**

```
RewriteRule ^([^/]+)[_]([^/]+)$ $1-$2 [R=301,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T10:27:09.427

```
RedirectMatch 301 (/Calipers/Insize)_(\d+)_(\d+)_(\d+)$ $1-$2-$3-$4

RewriteBase /
RewriteRule ^sitemap.xml$ index.php?route=feed/google_sitemap [L]
RewriteRule ^googlebase.xml$ index.php?route=feed/google_base [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !.*\.(ico|gif|jpg|jpeg|png|js|css)
RewriteRule ^([^?]*) index.php?_route_=$1 [L,QSA] 
```

untested yet,

also see here: [htaccess regex directory to variable](https://stackoverflow.com/questions/11747296/htaccess-regex-directory-to-variable)

### edit

Your regex `^([^/]+)[_]([^/]+)$` doesn't match your url ".com/Calipers/Insize_1108_1_2"

With `^` the start of the string is marked. It would be better to look from the end don't touch the begin.

This results in

```
RewriteRule ^(.*)_(\d+)_(\d+)_(\d+)$ $1-$2-$3-$4 [R=301,L] 
```

what isn't very different from my first solution.

It groups the three numbers at the end (with `(\d+)` for each one) and takes the rest until start (with `(.*)`).

# objective-c - UIScrollView 就像新的 iOS App Store

> ID：14180732
> 
> 赞同：4
> 
> 时间：2013-01-06T09:09:08.690
> 
> 标签：objective-c, ios, uiscrollview, app-store, image-gallery

我需要做一些类似新应用商店的事情，如附图所示 ![应用商店截图](../Images/7b6f7a14e7ff8190875a9cca6e75d052.png)

但是，我知道我必须使用带有一些图像或按钮的滚动视图

但我想知道曲线和滑动图像，滚动时调整大小，我在谈论它的所有功能

任何好的例子或解释？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T09:22:59.197

以下是一些模拟 Appstore 应用程序外观的代码：

WellSegmentedController： http: [//www.cocoacontrols.com/platforms/ios/controls/sdwellsegmentedcontrol](http://www.cocoacontrols.com/platforms/ios/controls/sdwellsegmentedcontrol)

图片 Carussel： http: [//www.binpress.com/app/icarousel/614](http://www.binpress.com/app/icarousel/614)

我知道有人也制作了分页网格代码，但我再也找不到了。但是，仔细查看 cocoacontrols.com 应该会为您提供所需的所有备件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T11:43:29.697

如果您想使用 UIKit，请查看 UICollectionView。Ray Wenderlich 有一个很好的入门教程 - [http://www.raywenderlich.com/22324/beginning-uicollectionview-in-ios-6-part-12](http://www.raywenderlich.com/22324/beginning-uicollectionview-in-ios-6-part-12)

警告，它仅适用于该类集的 iOS6+。

# html - 下拉菜单问题

> ID：14180733
> 
> 赞同：1
> 
> 时间：2013-01-06T09:09:09.833
> 
> 标签：html, css, drop-down-menu, menu, mootools

我在这里重新创建了我的菜单：http: [//jsfiddle.net/bVQ2H/2/](http://jsfiddle.net/bVQ2H/2/) 正如你所看到的，它有一个下拉菜单，我试图做的是在鼠标悬停在该下拉菜单上时添加一个类菜单和“更多”按钮，基本上这个类应该添加到包含下拉菜单和“更多”按钮的“li”元素中。

应该保留在“focusedmenu”类消失之前的延迟。

我只能使用 Mootools，不能使用 jQuery。

知道如何实现吗？

JS代码

```
window.addEvent('domready', function() {
  var timer;
  $$('li.submenu_explore').addEvents({
    mouseenter: function(){
      $$('li.submenu_explore').addClass('focusedmenu');
    },
    mouseleave: function(){
      timer = function(){ $$('li.submenu_explore').removeClass('focusedmenu'); }.delay(1000);
    }
  });
}); 
```

HTML 代码：

```
<div class="layout_core_menu_main">
  <ul id="navigation">
      <li><a href="#">Albums</a></li>
      <li><a href="#">Blogs</a></li>
      <li><a href="#">Classifieds</a></li>
      <li class="submenu_explore">
        <a href="javascript:void(0);" id="submenu_toggle">More</a>
        <ul>
          <li><a href="#">Groups</a></li>
          <li><a href="#">Videos</a></li>
          <li><a href="#">Music</a></li>
        </ul>
    </li>
  </ul>
</div> 
```

CSS 代码：

```
/*
MAIN MENU
*/
.layout_core_menu_main
{
  height: 38px;
  border: 1px solid #000;
  background: #111;
}
.layout_core_menu_main > ul
{
  width: auto;
  margin: 0px auto 0px auto;
  position: relative;
}
.layout_core_menu_main > ul > li
{
  float: left;
}
.layout_core_menu_main > ul > li > a
{
  font-size: 12px;
  font-weight: bold;
  line-height: 38px;
  outline: none;
  display: inline-block;
  padding: 0px 16px;
  position: relative;
  border-right: 1px solid #000;
}
.layout_core_menu_main > ul > li > a:link, .layout_core_menu_main > ul > li > a:visited
{
   color: #EEE;
   text-decoration: none;
}
.layout_core_menu_main > ul > li > a:hover, .layout_core_menu_main > ul > li:hover > a
{
  color: #FFF;
  font-weight: bold;
  text-decoration: none;
  background: #000;
}
.layout_core_menu_main > ul > li.active > a, .layout_core_menu_main > ul > li > a:active, .layout_core_menu_main > ul li.focusedmenu > a
{
  background: #000;
  color: #FFF;
  font-weight: bold;
  text-decoration: none;
}

/*
Submenu for MAIN MENU
*/
.layout_core_menu_main > ul > li > ul
{
  margin-top: 1px;
}
.layout_core_menu_main > ul > li:hover > ul, .layout_core_menu_main > ul li.focusedmenu ul
{
  display: block;
}
.layout_core_menu_main ul ul
{
  display: none;
  position: absolute;
  right: 0px;
  z-index: 1;
  background-color: #EEE;
  border: 1px solid #AAA;
  width: 200px;
  padding: 5px 0px;
  font-size: 12px;
  font-weight: bold;
}
.layout_core_menu_main ul ul li
{
  font-weight: bold;
}
.layout_core_menu_main ul ul li a
{
  display: block;
  padding: 0px 10px;
  line-height: 26px;
  text-align: left;
  color: #555;
  text-shadow: 1px 1px 0px #FFF;
  outline: none;
  text-decoration: none;
}
.layout_core_menu_main ul ul li a:hover, .layout_core_menu_main ul ul li.active > a
{
  color: #333;
  background: #FFF;
  text-decoration: none;
}
li.submenu_explore
{
  position: relative;
}
li.submenu_explore > a
{
  background: #000;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T12:50:00.983

为您的活动添加延迟`mouseenter`似乎提供了一种解决方法。

```
mouseenter: function(){
  timer = function(){ 
    $$('li.submenu_explore').addClass('focusedmenu'); 
    $$('#Output').set('html',$$('li.submenu_explore').hasClass('focusedmenu'));                        
  }.delay(1000);
} 
```

**工作示例：http:** [//jsbin.com/uvoxiq/5/edit](http://jsbin.com/uvoxiq/5/edit)

# c# - 如何使用高图表动态地将系列数据添加到折线图

> ID：14180741
> 
> 赞同：0
> 
> 时间：2013-01-06T09:10:54.063
> 
> 标签：c#, jquery, highcharts

来自 webservice 的数据是从 BindTrend 方法获取的，并在绑定到图表之前解析为 Json 对象： 我的代码如下：

```
 var plot;
    var itemdata = [];
    var chart;
    var data = [];
 $(document).ready(function () {

            $.ajax({
            type: "POST",
            url: "ChartBinder.asmx/BindTrend",
            data: "{}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (msg) {           
               var newJ = $.parseJSON(msg.d);               
                DrawTrend(newJ);
            },
            error: function (msg) {
                alert("Error");
            }
        });    
    })   

    function DrawTrend(plot) {
       for (i = 0; i < plot.length; i++) {
        var x = {}
        x.id=plot[i].Name;
        x.name = plot[i].Name;
        x.data = [plot[i].Value];
        itemdata.push(x);
        }
              chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container',
                type: 'line',
                marginRight: 130,
                marginBottom: 25
            },
            series: itemdata
        });
    } 
```

请注意，当我对值进行硬编码时`'x.data=[1,2,3....]'`，我可以获得图表。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T07:11:58.750

从您在评论中提到的内容来看，您的 plot[i].Value 是一个数组`Strings`，它应该是数字/浮点数的数组。您可以按如下方式在 javascript 中进行转换。也不需要显式地在值周围添加`[`& `]`，默认情况下，JS 数组中有它。

```
 for (i = 0; i < plot.length; i++) {
        var x = {}
        x.id=plot[i].Name;
        x.name = plot[i].Name;

        //plot[i].Value = ["3121", "21211", "3121", "21211", "21000", "9872", "83402", "83402", "28302", "109523", "2832", "9523"];

        var stringArr=plot[i].Value;
        var floatArr=[];
        for(var j=0;j<stringArr.length;j++){
           dobleArr.push(parseFloat(stringArr[j]);
        }
        x.data=floatArr;

        itemdata.push(x);
   } 
```

我建议也通过返回错误 14的[Highcharts](https://stackoverflow.com/questions/12485560/highcharts-returning-error-14/12489695#12489695)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-06T09:25:13.757

那是因为你在 'for' 中声明了 x 吗？

```
 var x = {}
 function DrawTrend(plot) {
       for (i = 0; i < plot.length; i++) {

        x.id=plot[i].Name;
        x.name = plot[i].Name;
        x.data = [plot[i].Value];
        itemdata.push(x);
        } 
```

# android - 是否可以在 Eclipse 中将外部 jar 文件嵌入（组合）到我的库项目中？

> ID：14180742
> 
> 赞同：2
> 
> 时间：2013-01-06T09:11:10.517
> 
> 标签：android, eclipse, jar, java

我正在eclipse中开发一个Android项目。我正在创建一个`library project`由`main project`. `Main project`使用`external jar`文件。我想将此`external jar`文件添加到我的`library project`，只需将 jar 文件添加`library project`到`main project`. 我已经在库项目中添加了该 jar 文件，但是当我编译库项目时，它的大小没有改变，并且外部 jar 文件没有嵌入到库项目中。

我的意思是我想将库和外部 jar 合并到一个库中，我的项目可以链接到该库。

我怎样才能做到这一点？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T09:27:28.543

因此，您想将库和外部 jar 合并到您的项目可以链接到的一个库中吗？这是不可能的。您不能仅仅组合/链接两个二进制文件 (JAR) 并期望它们作为一个单独的库工作。您的库是动态链接的，而不是静态链接的，并且每个库都加载到不同的地址空间中。如果你想让它们合二为一，你需要拥有这两个库的源码（你现有的库和外部jar）并将它们**编译**成一个（即静态链接）。

**更新：**

感谢 Sergiu 的洞察力，这是真的。上面的答案是基于库是 JRE 在运行时在某个内存位置加载的二进制文件，并且它是格式化的二进制文件，其中函数/变量加载在环境计算的位置 - 一般 CS 理论。

根据您的评论，我搜索了如何组合两个 JAR，您的方法似乎是正确的。

这是另一个 SO 答案：[结合两个 JAR](https://stackoverflow.com/questions/5080220/how-to-combine-two-jar-files)

查看第二个答案，它还澄清了 Manifest.mf 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T09:18:07.553

您可以使用两种方式将外部 jar 添加到项目中：

1.  右键单击项目，转到`Properties`.
2.  在`Java Build Path`选项卡中选择`Library`选项卡并单击`Add External JARs..`按钮以将外部 jar 文件添加到您的项目中。
3.  点击`OK`。

另一种方法是将`jar`文件复制到您的项目`libs`文件夹中，然后右键单击该`jar`文件并选择`Build Path>Add to Build Path.`

试试这个方法，希望对你有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-27T14:22:09.803

这是一个常见问题，它被定义为您的库的**范围**。通常范围是“已**提供**”，这意味着该库应该包含在类路径中（对于 javac）而**不是****Jar**文件中，但在这种情况下，您应该将库范围更改为“**编译**”，这样它也可以进入 Jar文件。

我不使用 Eclipse，所以我不知道要查看哪个菜单，但它是通用属性，（在 Apache Maven、IntelliJ 中，...）所以我很确定你可以在 Eclipse 上找到它的位置小搜索

长话短说，**将您的库范围更改为“编译”**

# opengl - 如何画一个立方体

> ID：14180745
> 
> 赞同：-2
> 
> 时间：2013-01-06T09:11:22.607
> 
> 标签：opengl

我有8个顶点。我想用这个顶点绘制立方体。如何绘制带顶点的立方体？

顶点：

```
 v1, v2, v3,v4, v5,v6,v7,v8

   they are array of float with 3 elements(float v1[3]) 
```

我已经做好了

```
glBegin(GL_QUADS);
        glVertex3f(v1[0], v1  [1], v1[2]);
        // do same thing for other 7 vertex
glEnd(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T09:39:54.973

从[http://www.wikihow.com/Make-a-Cube-in-OpenGL总结](http://www.wikihow.com/Make-a-Cube-in-OpenGL)

> 现在我们在 glBegin() 和 glEnd() 行之间添加顶点。

```
// Multi-colored side - FRONT
glBegin(GL_POLYGON);
glVertex3f( -0.5, -0.5, -0.5);       // P1
glVertex3f( -0.5,  0.5, -0.5);       // P2
glVertex3f(  0.5,  0.5, -0.5);       // P3
glVertex3f(  0.5, -0.5, -0.5);       // P4
glEnd(); 
```

# dns - 执行 NAPTR 查询

> ID：14180750
> 
> 赞同：6
> 
> 时间：2013-01-06T09:12:17.693
> 
> 标签：dns, sip, srv

这可能看起来是一个非常简单的问题，但我在网上没有找到答案。

任何人都可以给我线索如何为 SIP 域执行 NAPTR 查询？（这主要用于 DNS 查找），或者任何对我来说也很好的参考资料（这个存在于 rfc2915 上）。

也许使用终端或任何工具，而且我还想使用 java 来做，所以如果任何一段代码都会非常有帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-06T10:09:44.880

您正在寻找的 RFC 是“[会话发起协议 (SIP)：定位 SIP 服务器](https://www.rfc-editor.org/rfc/rfc3263)”。

下面简要介绍如何选择传输协议和解析 SIP 服务器地址。

1.  如果指定了传输参数，则优先，
2.  如果没有传输参数且目标是 IP 地址，则 sip 应使用 udp 和 sips tcp，
3.  如果没有传输参数且目标是具有显式端口的主机名，则 sip 应使用 udp 和 sips tcp，并且应使用 A 或 AAAA 记录 DNS 查找来解析主机（第 4.2 节），
4.  如果没有传输协议并且没有明确的端口和目标是主机名，则客户端应该进行 NAPTR 查找并利用服务 SIP+D2U、SIP+D2T、SIP+D2S、SIPS+D2T 和 SIPS+D2S 的记录，
5.  如果找到 NAPTR 记录，则选择所需的传输并查找 SRV 记录，
6.  如果未找到 NAPTR 记录，则查找所需协议 _sip._udp、_sip._tcp、_sips._tcp、_sip._tls 的 SRV 记录，
7.  如果没有找到 SRV 记录，则查找 A 或 AAAA 记录。

在现实世界中，几乎没有 SIP 提供商使用 NAPTR 记录，可能有一半或更少使用 SRV 记录，其余仅依赖 A 记录。在我自己的 SIP 软件中，我关闭了 NAPTR 查找，因为它只是浪费时间，而且如果 SIP 提供商费心设置 NAPTR 记录，他们很可能也会设置标准 SRV 记录。

事后看来，SIP 协议设计者可能应该单独处理整个 SIP 服务器地址解析，让实施者使用标准 IP 负载平衡和故障转移机制。因为 SIP 客户端并不都支持 SRV 记录，在我的经验中，使用这样的记录总比没有好，但对于故障转移或负载平衡来说并不是一个很好的解决方案。

如果您正在寻找带有 SIP NAPTR 记录的主机名，请尝试 columbia.edu 和 snom.com，上次我检查它们都有一些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-10-13T16:36:03.323

[DNS 中的 NAPTR 记录与 DNS](https://en.wikipedia.org/wiki/NAPTR_record)中的任何其他记录[（SRV、CNAME 等）一样。](https://en.wikipedia.org/wiki/List_of_DNS_record_types)

> NAPTR 记录最常用于 Internet 电话中的应用程序，例如，在会话发起协议 (SIP) 中服务器和用户地址的映射中。NAPTR 记录与服务记录 (SRV) 的组合允许链接多个记录以形成复杂的重写规则，从而产生新的域标签或统一资源标识符 (URI)。
> 
> NAPTR 记录的 DNS 类型代码是 35。

要查询它们，您可以使用命令行工具`dig`并使用`-t`开关指定查询类型。例如：

```
$ dig -t naptr 4.4.2.2.3.3.5.6.8.1.4.4.e164.arpa

; <<>> DiG 9.10.6 <<>> -t naptr 4.4.2.2.3.3.5.6.8.1.4.4.e164.arpa
;; global options: +cmd
;; Got answer:
;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 64886
;; flags: qr rd ra; QUERY: 1, ANSWER: 2, AUTHORITY: 0, ADDITIONAL: 1

;; OPT PSEUDOSECTION:
; EDNS: version: 0, flags:; udp: 4096
;; QUESTION SECTION:
;4.4.2.2.3.3.5.6.8.1.4.4.e164.arpa. IN  NAPTR

;; ANSWER SECTION:
4.4.2.2.3.3.5.6.8.1.4.4.e164.arpa. 86400 IN NAPTR 100 20 "u" "E2U+pstn:tel" "!^(.*)$!tel:\\1!" .
4.4.2.2.3.3.5.6.8.1.4.4.e164.arpa. 86400 IN NAPTR 100 10 "u" "E2U+sip" "!^\\+441865332(.*)$!sip:\\1@nominet.org.uk!" .

;; Query time: 356 msec
;; SERVER: 192.168.1.85#53(192.168.1.85)
;; WHEN: Sat Oct 13 12:31:29 EDT 2018
;; MSG SIZE  rcvd: 179 
```

如果您有兴趣，可以阅读有关 E.164 和 ENUM 的更多信息：

*   [https://en.wikipedia.org/wiki/E.164](https://en.wikipedia.org/wiki/E.164)
*   [快速浏览将电话号码映射到 DNS 的 ENUM](https://danielpocock.com/a-quick-look-at-enum)
*   [名称授权指针 (NAPTR) RR](http://www.zytrax.com/books/dns/ch8/naptr.html)
*   [教程：使用 NAPTR 和 SRV DNS 记录的 SIP](https://anders.com/cms/264/)
*   [RFC2915](https://www.rfc-editor.org/rfc/rfc2915)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-23T18:35:14.783

NAPTR 记录和 SRV 记录在 LTE (4G) 解决方案中很常见。EPC 节点（网络节点）使用 DNS 来选择使用 S-NAPTR & SRV 记录的其他 EPC 节点。这在不改变 MME 节点上的任何配置的情况下为运营商提供了添加/删除节点的很大自由度。您可以参考一些 3gpp 标准 29.003 或 23.401 或 google 关于主题“使用 DNS 的 epc 节点选择”。[https://ericlajoie.com/nodeselection.html](https://ericlajoie.com/nodeselection.html)

# javascript - Javascript ECDSA 获取私钥和 公钥？

> ID：14180753
> 
> 赞同：4
> 
> 时间：2013-01-06T09:12:46.497
> 
> 标签：javascript, cryptography, ecdsa

我只需要为 ECDSA 获取私钥和​​公钥对。斯坦福 Javascript 加密库以非标准方式 ( [https://groups.google.com/forum/?fromgroups#!topic/sjcl-discuss/UaWUyMWS3Rs](https://groups.google.com/forum/?fromgroups#!topic/sjcl-discuss/UaWUyMWS3Rs) ) 执行此操作，这对我来说没用 - 就像制作一个MD5 库可以为其他所有内容提供不同的结果？

是否有在 JavaScript 中使用 ECDSA 的实际工作方式？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-18T21:59:17.103

jsrsasign 4.0.0 现在支持使用 EC 私钥和公钥进行 ECDSA 签名和验证。

[http://kjur.github.io/jsrsasign/](http://kjur.github.io/jsrsasign/)

我认为这可以满足您的需求。这是一个演示页面。

[http://kjur.github.io/jsrsasign/sample-ecdsa.html](http://kjur.github.io/jsrsasign/sample-ecdsa.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T19:52:03.613

首先，您链接到的评论谈论的是 ECDSA 签名的格式，而不是密钥对。其次，这有点误导：

ECDSA 算法的输出是区间 [1, n-1] 中的两个整数。ECDSA 标准 ( [FIPS 183-3](http://csrc.nist.gov/publications/fips/fips186-3/fips_186-3.pdf) ) 没有指定将这对数字编码为字节数组的标准方法。

一种方法是将数字封装在 ASN.1 SEQUENCE 中。这是[ANSI X9.62](http://webstore.ansi.org/RecordDetail.aspx?sku=ANSI%20X9.62:2005)和[RFC3278](https://www.rfc-editor.org/rfc/rfc3278#section-8.2)指定的方式。它是 Java 和 (AFAIR) Microsoft CNG/.NET 的标准输出。

另一种方法是用零填充数字，使它们具有相同的字节长度`n`，然后将它们连接起来。这是由 PKCS#11 和大多数智能卡实现完成的。

如果我正确阅读了源代码，SJCL 会以第二种方式对 ECDSA 签名进行编码。您可以轻松地将这种格式转换为第一种格式。

# c# - VirtualAlloc 将如何增强 .Net 应用程序的性能？

> ID：14180757
> 
> 赞同：0
> 
> 时间：2013-01-06T09:13:35.820
> 
> 标签：c#, performance, winapi, memory-management

我在一些 C# 应用程序中看到了 VirtualAlloc/Free windows API 方法的一些用法，我想知道在 C# 中使用这些方法的原因。

VirtualAlloc/Free 对我有什么好处，有什么想法吗？

**编辑**： VirtualAlloc 会比典型的 .Net “new” 语句或任何其他 .Net 内存分配方法执行得更好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T10:06:35.187

我看到的唯一好处是单个托管对象的大小限制为 2GB。如果您使用`VirtualAlloc/VirtualFree`，您可以管理更大的对象。同时，我建议您`HeapAlloc/HeapFree`为此目的使用 NT 堆 ( )。

阅读有关内存状态的信息：已提交/保留/空闲。您可以在虚拟分配中使用它们。在极少数情况下，它们很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T10:28:23.553

需要使用 VirtualAllocEx 的一种情况是当您需要在不同进程的地址空间中分配内存时。我无法想象托管应用程序中 VirtualAllocEx 或 VirtualAlloc 的任何其他用例。

# ember.js - ember js DS.AdapterPopulatedRecordArray 内容

> ID：14180759
> 
> 赞同：3
> 
> 时间：2013-01-06T09:14:58.730
> 
> 标签：ember.js

```
AppController = Ember.ArrayController.extend
cat_id: ''
subcat_data: (->
  App.Subcategory.find({ parent_id: @get("cat_id") })
).property('cat_id').cacheable()

categorySub: (->
 result = Ember.A()
 for category in this.toArray()
    @set('cat_id', category.id)
    @sub = @get("subcat_data")
    console.log @sub
    result.pushObject({
      category: category
      subcategories: @sub.toArray()
    })

result.toArray()
).property('@subcat_data', '@each') 
```

现在在 console.log @sub 中显示零个对象的内容

DS.AdapterPopulatedRecordArray:ember768> { query={...}, content=[0], store=, more...}

但是当我签入 firebug DOM 时，它会显示对象内容的内容 [17, 18]

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T18:27:26.517

如果你使用`Ember-data`， an 的内容不会`ControllerArray`马上被填满，当你通过 console.log 请求它的内容时，Ember-data 返回一个`Promise`空对象`RecordArray`. 当您检查 DOM 中的内容时，内容已被填充。验证这一点的更好方法是仅在填充内容时调用 console.log。

```
contentDidChange: function() {
  console.info(this.get('content'));
}.observes('content.isLoaded') 
```

# algorithm - 算法在二维空间中找到分隔两组点的多边形

> ID：14180762
> 
> 赞同：-1
> 
> 时间：2013-01-06T09:15:32.547
> 
> 标签：algorithm, 2d, polygon

我在二维空间中有一组点。这些点有两种不同的类型（比如少数点是黑色的，而其余的点是白色的）。我需要找到一种算法来找到将两个点子集分开的多边形。多边形的顶点可以是这两种点中的任何一种。

我尝试谷歌搜索，但找不到任何合适的算法。是否存在任何算法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T10:22:30.240

您的问题不是很清楚，但我认为您只是在要求*存在*。考虑以下算法：

1.  选择一种特定的颜色，比如黑色
2.  使用直线将此顶点连接到所有其他黑色顶点。很可能，路径上不应该有白色顶点。
3.  如果任何白色顶点正好在直线上，则无限绕道。
4.  在这个由黑色节点形成的“星”网络周围画一个多边形。

只要您将多边形绘制得非常接近“星形”网络，就可以始终完成最后一步，因此您现在可以得到在 2D 中将黑色与白色点分开的多边形

# opencv - cvCvtColor (JavaCV + OpenCV) 的问题！

> ID：14180763
> 
> 赞同：2
> 
> 时间：2013-01-06T09:15:35.383
> 
> 标签：opencv, javacv

我用来`cvFindContours`在车牌中查找数字段，效果很好。之后，我想将其转换为灰度（用于 OCR），我使用`cvCvtColor`但它让我很困惑。

板图： ![在此处输入图像描述](../Images/a02d3616dd816f5aed4d4a7cf3221053.png)

我得到的一些数字图像（之后`cvCvtColor`）：

![在此处输入图像描述](../Images/c38d6ffed0fae87653b68f354e48ab62.png)

![在此处输入图像描述](../Images/c25cb7e126b1acf051d4288ca2ae8965.png)

![在此处输入图像描述](../Images/a04d2a5cdf68be857ef780e3f6cdd1f4.png)

![在此处输入图像描述](../Images/0c68006048d39e6ba8becd14962d0025.png)

![在此处输入图像描述](../Images/649c005edefec53d5f2db200f644a125.png)

这太奇怪了，有些工作正常，但有些不行。任何人都可以帮助我吗？

哦，这是我的代码：

```
CvSeq contours = new CvSeq();
                IplImage contour_img = cvCreateImage( cvGetSize( plateImageGrey ), IPL_DEPTH_8U, 1);
                cvZero( contour_img );
                CvMemStorage storage = CvMemStorage.create();                   
                cvFindContours( plateImageGrey, storage, contours, Loader.sizeof(CvContour.class), CV_RETR_LIST, CV_CHAIN_APPROX_SIMPLE );              
                while(contours != null)
                {
                    if(CV_IS_SEQ_CONTOUR(contours))
                    {
                        cvDrawContours( contour_img, contours, cvScalarAll(255), cvScalarAll(255), CV_C, CV_C, CV_C );
                        CvRect  boundingRect = cvBoundingRect(contours,1); 
                        if(((boundingRect.height()/boundingRect.width()) >=  2.0) && ((boundingRect.height()/boundingRect.width()) <=  3.0) && (area >= 1000))
                        {                           
                            CvRect cr = new CvRect(boundingRect.x() - 5 , boundingRect.y() - 5, boundingRect.width() + 10, boundingRect.height() + 10);                             
                            cvSetImageROI(plateImage, cr);                      
                            IplImage charImage = cvCreateImage(cvGetSize(plateImage), plateImage.depth(), plateImage.nChannels());
                            cvCopy(plateImage, charImage);
                            cvResetImageROI(plateImage);

                            IplImage charImageGrey = cvCreateImage( cvGetSize( charImage ), IPL_DEPTH_8U, 1);
                            cvCvtColor( charImage, charImageGrey, CV_BGRA2GRAY);

                            Bitmap charImageBitmap = Bitmap.createBitmap(charImageGrey.width(), charImageGrey.height(), Bitmap.Config.ALPHA_8);
                            charImageBitmap.copyPixelsFromBuffer(charImageGrey.getByteBuffer());
                            charImageBitmap = charImageBitmap.copy(Bitmap.Config.ARGB_8888, true);
                        }
                    }
                    contours = contours.h_next();           
                } 
```

提前致谢！！！

# ant - 什么时候应该使用 Ant Buildfiles？

> ID：14180773
> 
> 赞同：3
> 
> 时间：2013-01-06T09:17:48.240
> 
> 标签：ant, build, build-process

在大型团队项目中，我需要手动编辑 Ant Buildfile。在我从头开始编写的小程序上，我不需要为构建制作或编辑任何类型的帮助文件（例如，从未为 Hello World 编写过构建文件）。所以我的问题是：

1.  在那些较小的项目上，该程序是如何构建的？
2.  什么样的项目会自动构建，什么样的项目需要一个需要手动编辑的Buildfile？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T10:15:57.273

用 Ant 构建的任何项目都不会在不创建构建文件的情况下自动构建。

如果没有构建文件，Ant 不会做任何事情。

也许您的 IDE 会为您生成一个，或者您甚至没有使用 Ant 来构建您的小项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T09:02:45.173

首先是 build.xml，其次是 IDE 支持。

IDE 将为您生成一个默认的 build.xml 文件。您必须对其进行自定义以适应任何客户要求。

实际上，在 IDE 之外完成的任何工作都需要一个体面的 build.xml 文件。例如，使用 IDE 提供的不同工具进行代码覆盖，静态代码分析（如 findbugs）。

# ruby - 块不适用于`{}`

> ID：14180778
> 
> 赞同：0
> 
> 时间：2013-01-06T09:18:26.933
> 
> 标签：ruby

这个正在工作

```
[:dev1, :dev2, :dev3].each do |env|
  define_method "#{env.to_s}?" do  
    settings.environment == env
  end
end 
```

但这不是

```
[:dev1, :dev2, :dev3].each do |env|
  define_method "#{env.to_s}?" { settings.environment == env }
end 
```

由于使用`{ ... }`语法，它会导致错误。为什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-06T09:26:48.123

这可能是因为该方法接受除块之外的其他参数，并且您省略了括号。

试试这种方式：

```
define_method("#{env.to_s}?") { settings.environment == env } 
```

# html - HTML5 导航元素与角色 =“导航”

> ID：14180785
> 
> 赞同：52
> 
> 时间：2013-01-06T09:19:09.957
> 
> 标签：html, semantic-markup, nav

以下所有内容是否具有相同的语义含义？如果不是，请解释您的答案。

**1.**

```
<nav>
    <ul>
        <li><a href="#">link</li>
        <li><a href="#">link</li>
        <li><a href="#">link</li>
        <li><a href="#">link</li>
    </ul>
</nav> 
```

**2.**

```
<div role="navigation">
    <ul>
        <li><a href="#">link</li>
        <li><a href="#">link</li>
        <li><a href="#">link</li>
        <li><a href="#">link</li>
    </ul>
</div> 
```

**3.**

```
<ul role="navigation"> 
<! -- breaks HTML5 specification 3.2.7.4 Implicit ARIA Semantics
      navigation is not an allowed value of role on ul -->
    <li><a href="#">link</li>
    <li><a href="#">link</li>
    <li><a href="#">link</li>
    <li><a href="#">link</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-01-08T18:15:03.933

正如[Alohci 所指出](https://stackoverflow.com/a/14181478/1591669)的，根据 HTML5，示例 3 是[不允许](http://www.w3.org/TR/html5/dom.html#sec-implicit-aria-semantics)的。

但是示例 1 和示例 2 在语义上**并不等效。**

`nav`是一个切片元素，`div`不是。因此，示例 1 创建了一个无标题部分（类似于空标题），从而更改了整个文档的[大纲](http://www.w3.org/TR/html5/sections.html#headings-and-sections)。

也`nav`始终*属于*其父分段内容（分别是分段根），因此您可以拥有整个网站的导航、主要内容的导航、仅主要内容第 3 章的导航和/或侧边栏中的次要内容等。

这种差异体现在[`navigation`角色的定义中](http://www.w3.org/TR/wai-aria/roles#navigation)

> 用于导航文档或相关文档的导航元素（通常是链接）的集合。

和[`nav`元素](http://www.w3.org/TR/html5/sections.html#the-nav-element)（由我加粗）：

> 该`nav`元素**表示**链接到其他页面或页面内部分的页面部分：具有导航链接的部分。

* * *

另请注意：不支持/不知道 WAI-ARIA 的 HTML5 用户代理不会理解示例 2 包含导航（反之亦然）。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-10-17T18:27:13.967

[Twitter Bootstrap](http://getbootstrap.com/components/ "引导文档")使用`<nav role="navigation">`

这似乎最有效地涵盖了所有需求。

> 确保为每个导航栏添加一个 role="navigation" 以帮助实现可访问性。

[w3.org 也建议这样做](http://www.w3.org/WAI/GL/wiki/Using_HTML5_nav_element#Example:The_.3Cnav.3E_element "w3.org on nav role='navigation'")

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-06T11:04:43.090

前两种情况在语义上是等价的。第三个不是。`<ul>`具有[默认的隐含 ARIA 语义](http://www.w3.org/html/wg/drafts/html/CR/dom.html#sec-implicit-aria-semantics),`list`并且只能有效地设置为`directory`, `list`, `listbox`, `menu`, `menubar`, `presentation`, `tablist`,`toolbar`或`tree`，因此将其设置`navigation`为无效并破坏元素在前两种情况下的`list`语义。`<ul>`

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-10-27T10:31:30.690

`<nav role="navigation">`在 W3C 验证服务上使用 HTML5 dtd 为我验证。

对我来说，这似乎是一个不错的选择，因为它支持新旧版本，直到辅助技术赶上来。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-04-02T04:42:25.733

[WAVE Web Accessibility Tool](http://wave.webaim.org/) can be used to get information about things like this.

Though I find the documentation there and the result view when checking a bit confusing. I think it would be good with clear examples since not everyone knows very much about accessibility on the web. (The result view looks very good, but still examples would be helpful.)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-06T09:27:59.253

好的，这是一个很好的问题，简而言之，当两个或多个提出类似问题的规范在不同时间发布并由不同的浏览器/屏幕阅读器支持时，就会发生这种情况。

该`<nav>`元素应`navigation`自动赋予角色，因此理论上您可以只使用选项 1。但是，一些屏幕阅读器还不知道，所以使用 2 会更好。选项 3 似乎很奇怪，因为它不仅仅是一个无序列表，它是一个导航。

当然，这是一个很好的例子——对于许多 ARIA 角色，没有要匹配的 HTML 元素，因此您可能会选择选项 2，因为您正在使用来自 ARIA 的其他东西，并且想要明确。

就个人而言，我使用 2 是因为 GZIP 使文件大小无关紧要，并且它可以在我测试过的 AT 中工作（Voiceover 和 Windows 上的其他东西，我现在不记得了）。

# java - java缓冲图像导致空白图像

> ID：14180789
> 
> 赞同：2
> 
> 时间：2013-01-06T09:20:03.370
> 
> 标签：java, bufferedimage

我正在尝试从 gif 中提取所有帧并将它们放在一列中，下一帧在最后一帧之下。所以一个人可以向下滚动一个高大的图像并查看 gif。我可以提取所有帧，但是当我尝试将其写出来时，我得到的只是一张黑色画布。宽度和高度是正确的，它说它正确读取了图像。这里出了什么问题？

```
 String img = "test.gif"; //original gif
    String[] temp = img.split(".gif");
    String base = temp[0];

    try {
        ImageReader reader = ImageIO.getImageReadersBySuffix("GIF").next();
        ImageInputStream in = ImageIO.createImageInputStream(new File(img));
        reader.setInput(in);

        int rows = reader.getNumImages(true);  // How many images there will be 
        int cols = 1;
        int chunks = rows;
        int chunkWidth, chunkHeight;
        int type;

        type = reader.read(0).getType(); //Get single frame file type
        chunkWidth = reader.read(0).getWidth(); //Get single frame width
        chunkHeight = reader.read(0).getHeight();  //Get single frame height

        //Initializing the final image
        BufferedImage finalImg = new BufferedImage(chunkWidth, chunkHeight * rows, type);

        for (int i = 0, count = reader.getNumImages(true); i < count; i++) {
            BufferedImage image = reader.read(i); //read next frame from gif
            finalImg.createGraphics().drawImage(image, chunkWidth, chunkHeight * i, null); //append new image to new file
        }

        System.out.println("Image concatenated.....");
        ImageIO.write(finalImg, "png", new File("finalImg1234555.png")); //final png with all gif images in it

    } catch (IOException ex) {
        Logger.getLogger(Gifextract.class.getName()).log(Level.SEVERE, null, ex);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T09:24:56.817

`finalImg.createGraphics().drawImage(image, chunkWidth, chunkHeight * i, null);`

x 坐标是`chunkWidth`，这意味着图像的左边缘从 开始`chunkWidth`。因为`finalImg`只有`chunkWidth`你的宽度完全超出了`finalImg`' 的范围。我怀疑 x 坐标应该是`0`.

# android - Android源码编译字符串编码

> ID：14180790
> 
> 赞同：0
> 
> 时间：2013-01-06T09:20:04.357
> 
> 标签：android, encoding

我想比较两种国语并检查它们是否一致。

```
String language = loc.locale.getDisplayLanguage(loc.locale);  // loc is a JavaBean，locale is a java.util.Locale instance
if ("Čeština".trim().equalsIgnoreCase(language.trim())) {   // make compilation is not equal
      language = "Česky";
} 
```

我在 Eclipse 中编译。If 表达式的结果为真。但是在通过make编译的源代码中，条件为假。我转成utf-8格式来比较，不行。

现在我请求帮助。提前致谢！

# python - python代码与mysql一起工作，'drop table'耗时太长

> ID：14180792
> 
> 赞同：-1
> 
> 时间：2013-01-06T09:20:23.640
> 
> 标签：python, mysql

我在 travis-ci.org 上进行了测试。

测试代码是

```
import MySQLdb

create_tbl_SQL = open("tables.sql").read()

conn = MySQLdb.connect(db = "test_travis", user = "root", passwd = "", charset =     "utf8", host = "localhost", port = 3306)

def create_tables():
    conn.cursor().execute(create_tbl_SQL)

def drop_tables():
    conn.cursor().execute("drop table user, post;")

create_tables()

conn1 = MySQLdb.connect(db = "test_travis", user = "root", passwd = "", charset =    "utf8", host = "localhost", port = 3306)

c = conn1.cursor()

c.execute("insert into user set user.name = '111'")

c.execute("select * from user; ")

drop_tables() 
```

但是 travis-ci.org 上的测试需要 3 分钟才能运行。

这段代码在github上：https://github.com/hit9/test_mysql_on_travis/

travis-ci.org 上的这个测试：https://travis-ci.org/hit9/test_mysql_on_travis

我认为'drop table' 动作使这个脚本运行缓慢。

但我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T09:47:57.583

我试过了

```
mysql -e "set autocommit=1" 
```

在我的 .travis.yml 中，但这不起作用

所以，我应该在 drop 语句之前插入这一行

```
c.execute("commit ") 
```

# java - 为什么 ASM 无法为我的生成类找出正确的最大值？

> ID：14180795
> 
> 赞同：3
> 
> 时间：2013-01-06T09:20:27.867
> 
> 标签：java, bytecode, java-bytecode-asm

我正在使用 ASM 3.1 生成一个虚拟类。它只有一个简单的构造函数，没有其他方法：

```
public class TestAsm {

public static void main(String... args) throws Throwable {
    ClassWriter sw = new ClassWriter(ClassWriter.COMPUTE_FRAMES | ClassWriter.COMPUTE_MAXS);
    sw.visit(Opcodes.V1_6, Opcodes.ACC_PUBLIC | Opcodes.ACC_SUPER, "test/SubCls", null, "test/SuperCls", null);
    sw.visitField(Opcodes.ACC_PUBLIC, "i", "I", null, null);

    MethodVisitor mv = sw.visitMethod(0, "<init>", "()V", null, null);
    // mv.visitMaxs(2, 1);
    mv.visitCode();
    mv.visitVarInsn(Opcodes.ALOAD, 0);
    mv.visitMethodInsn(Opcodes.INVOKESPECIAL, "test/SuperCls", "<init>", "()V");
    mv.visitVarInsn(Opcodes.ALOAD, 0);
    mv.visitInsn(Opcodes.ICONST_2);
    mv.visitFieldInsn(Opcodes.PUTFIELD, "test/SubCls", "i", "I");
    mv.visitInsn(Opcodes.RETURN);
    mv.visitEnd();

    sw.visitEnd();
    byte[] cls = sw.toByteArray();
    FileOutputStream fos = new FileOutputStream("bin/test/SubCls.class");
    fos.write(cls);
    fos.close();

    SuperCls o = (SuperCls) Class.forName("test.SubCls").newInstance();
    System.out.println(o.i);

    System.out.println(o.getClass().getDeclaredField("i").getInt(o));
    }
} 
```

如您所见，`ClassWriter.COMPUTE_FRAMES`根据文档，我指定了标志，它将计算我所有方法的堆栈大小和本地大小。但是当我运行这段代码时，我得到一个错误：

```
Exception in thread "main" java.lang.VerifyError: (class: test/SubCls, method: <init> signature: ()V) Stack size too large
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:169)
at test.TestAsm.main(TestAsm.java:33) 
```

我使用'javap -c'检查了生成的类文件，发现堆栈大小和本地大小不正确：

```
$ javap -c SubCls -verbose
public class test.SubCls extends test.SuperCls
minor version: 0
major version: 50
Constant pool:
const #1 = Asciz    test/SubCls;
const #2 = class    #1; //  test/SubCls
const #3 = Asciz    test/SuperCls;
const #4 = class    #3; //  test/SuperCls
const #5 = Asciz    i;
const #6 = Asciz    I;
const #7 = Asciz    <init>;
const #8 = Asciz    ()V;
const #9 = NameAndType  #7:#8;//  "<init>":()V
const #10 = Method  #4.#9;  //  test/SuperCls."<init>":()V
const #11 = NameAndType #5:#6;//  i:I
const #12 = Field   #2.#11; //  test/SubCls.i:I
const #13 = Asciz   Code;

{
public int i;

test.SubCls();
  Code:
   Stack=0, Locals=1, Args_size=1
   0:   aload_0
   1:   invokespecial   #10; //Method test/SuperCls."<init>":()V
   4:   aload_0
   5:   iconst_2
   6:   putfield    #12; //Field i:I
   9:   return

} 
```

当我手动调用时`visitMaxs(2, 1)`，这个错误就会消失。
但我不知道为什么 ASM 不能为我计算出正确的最大值。谁能给我一个提示？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T10:54:12.847

打电话`mv.visitMaxs(0, 0);`；我确实在某个地方读到过，发现它很奇怪，以至于我记得。

# c - 为什么在 Redis 源代码中我没有看到内存屏障？

> ID：14180796
> 
> 赞同：2
> 
> 时间：2013-01-06T09:21:14.217
> 
> 标签：c, memory, gcc, redis, kernel

在 Linux 内核源代码中，存在许多内存屏障（smp_mb() 等）。

但是在redis的源码中，并没有看到。在redis的Makefile中，gcc优化选项是-O2，所以应该对这些指令重新排序。为什么它不使用 mb() 来确保正确的行为？

添加：

例如：在 Linux 内核的 kfifo 中：

```
unsigned int __kfifo_put(struct kfifo *fifo,unsigned char *buffer, unsigned int len)   
{   
  unsigned int l;   
  len = min(len, fifo->size - fifo->in + fifo->out);
  smp_mb();
  l = min(len, fifo->size - (fifo->in & (fifo->size - 1)));   
  memcpy(fifo->buffer + (fifo->in & (fifo->size - 1)), buffer, l);
  ...
  smp_wmb();
  fifo->in += len;
  ...
} 
```

在 Redis 源码中，我研究了整个项目，找不到内存障碍：例如：

```
zskiplistNode *zslInsert(zskiplist *zsl, double score, robj *obj) {
  zskiplistNode *update[ZSKIPLIST_MAXLEVEL], *x;
  unsigned int rank[ZSKIPLIST_MAXLEVEL];
  int i, level;
  ...
  level = zslRandomLevel();
  if (level > zsl->level) {
    for (i = zsl->level; i < level; i++) {
      rank[i] = 0;
      update[i] = zsl->header;
/////need a mb() ???
      update[i]->level[i].span = zsl->length;
    }
    zsl->level = level;
  }
  ...
} 
```

为什么在redis中没有内存屏障有什么特别的吗？
我认为我对 mb() 的理解可能不成熟，感谢您的评论...

添加：

但是在上面显示的两段代码中，linux内核中的kfifo使用了mb()。它只是更改分配在线程堆栈空间中的变量以及用户 mb() 在 r/w 操作之间。所以它不应该完全与多线程相关......（虽然redis是单线程）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-06T09:32:45.627

意识到很少的代码需要显式的内存屏障可能会有所帮助。此类代码的一些示例包括操作系统内核、线程库和无锁数据结构。

大多数其他代码将：

1.  不直接与线程交互，使内存屏障变得不必要；
2.  使用操作系统提供的线程库（例如`pthreads`），并依赖此类库提供的[内存排序保证。](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap04.html#tag_04_11)

如果在问这个问题时，您想到了 Redis 代码库的特定部分，请向我们展示相关代码。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-06T16:23:50.960

Redis 是单线程的，因此不需要内存屏障。

只有当您有多个执行路径（例如在多线程应用程序中）时，它们才有意义。即使使用多线程用户空间应用程序，您通常也不需要自己的内存屏障，因为库（例如 pthreads）在同步 API 中包含内存屏障（例如互斥锁、信号量、条件变量等）。

# oracle10g - 我正在使用带有 select id=@@identity set nocount off 的 sql 语句，但我得到 ORA-00933：SQL 命令未正确结束

> ID：14180798
> 
> 赞同：-2
> 
> 时间：2013-01-06T09:21:22.927
> 
> 标签：oracle10g

我正在使用 oracle 10g，当我执行以下查询时出现错误（ORA-00933：SQL 命令未正确结束）

此查询在 sql server 上运行良好，但在 oracle 中它给出了错误

```
insert into tbl_scheduler(startdat,enddat,sdat,endt) 
values ('Sun, 06 Jan 2013 15:45:00 GMT', 'Sun, 06 Jan 2013 16:07:00 GMT','06-Jan-13','06-Jan-13') 
select id=@@identity 
set nocount off 
```

将“select id=@@identity set nocount off”添加到查询时发生错误

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2013-01-06T09:25:48.537

可能你可以使用分隔符；

```
insert into tbl_scheduler(startdat,enddat,sdat,endt) values('Sun, 06 Jan 2013 15:45:00 GMT', 'Sun, 06 Jan 2013 16:07:00 GMT','06-Jan-13','06-Jan-13');
select id=@@identity;
set nocount off; 
```

# javascript - 在显示推特提要时，如何检查是否使用 JavaScript 或 JQuery 转发了特定推文？

> ID：14180799
> 
> 赞同：1
> 
> 时间：2013-01-06T09:21:25.743
> 
> 标签：javascript, jquery, twitter, social-media

> **可能的重复：**
> [判断一条推文是否是转推？](https://stackoverflow.com/questions/8902635/telling-whether-a-tweet-is-a-retweet-or-not)

因此，我一直在研究一个 twitter 提要脚本，该脚本可以引入我的提要。我想知道如何检查特定推文是否被转推，然后如果它被转推，我想使用转推推文中的信息。这是 twitter API 为转推生成的示例关联数组。

```
Array
(
    [0] => Array
        (
            [created_at] => Sun Jan 06 08:28:39 +0000 2013
            [id] => 287838076443705345
            [id_str] => 287838076443705345
            [text] => RT @Fullscreen: Heads-up: many YT partners are reporting issues claiming their videos. It appears to be a YT bug. We will keep you posted.
            [source] => web
            ... 
            [user] => Array
                (
                    [id] => 212642904
                    [id_str] => 212642904
                    [name] => Elias Ranz-Schleifer
                    [screen_name] => Xxplosions
                    ... 
                )
                ...
            [retweeted_status] => Array
                (
                    [created_at] => Sun Jan 06 02:08:43 +0000 2013
                    [id] => 287742460824805378
                    [id_str] => 287742460824805378
                    [text] => Heads-up: many YT partners are reporting issues claiming their videos. It appears to be a YT bug. We will keep you posted.
                    ... 
                    [user] => Array
                        (
                            [id] => 238110322
                            [id_str] => 238110322
                            [name] => Fullscreen, Inc.
                            [screen_name] => Fullscreen
                            ... 
                        )
                        ...
                )

            [retweet_count] => 44
            ...
        )

) 
```

所以基本上我只想在它存在的情况下`[text] => RT @Fullscreen: Heads-up: many...`替换它。`[text] => Heads-up: many...`如果它不存在，则使用从推文中提取信息的正常方法。我想基本上我想要了解的是如何检查是否`[retweeted_status]`存在然后提取该信息，如果不存在则提取其他信息。我想避免将 RT 放在那里，因为它似乎是可能的，并使用类似的信息`id_str, text, screen_name, etc.`

我用来获取常规推文拉取信息的代码是：

```
id = tweets[i]["id_str"];
twitPic = tweets[0]["user"]["profile_image_url_https"];
content = tweets[i]["text"];
tweetTime = tweets[i]["created_at"]; 
```

where`i`被 for 循环中的索引替换。如果您对我想要了解的内容有任何疑问，请告诉我，我很乐意为您解答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T09:43:14.393

您可以像这样测试密钥是否存在：

```
// by using the 'in' operator
content = ('retweeted_status' in tweets[i]) ?  tweets[i]["retweeted_status"] : tweets[i]["text"];
// or by using the method 'hasOwnProperty()'
if(tweets[i].hasOwnProperty('retweeted_status')) {
    content = tweets[i]["retweeted_status"];
} else {
    content = tweets[i]["text"];
} 
```

您也可以检查未定义，但这不是测试键是否存在的准确方法（如果键存在但值实际上未定义怎么办？）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T09:38:13.133

```
// save current tweet
var tweet = tweets[i];
var id = tweet.id_str;
var twitPic = tweet.user.profile_image_url_https;
var tweetTime = tweet.created_at;
var isRetweet = Object.prototype.toString.call(tweet.retweeted_status).slice(8, -1) === 'Object';
// try to use text from original tweet
var content = isRetweet ? tweet.retweeted_status.text : tweet.text; 
```

# indexing - 尝试在第 133 行索引全局“p”（一个 nil 值）

> ID：14180803
> 
> 赞同：1
> 
> 时间：2013-01-06T09:22:40.850
> 
> 标签：indexing, lua, love2d

我一直在尝试为我的朋友和我正在做的一个小项目制作一个主菜单。我在用于玩家重力的第 133 行遇到了这个错误（我的朋友编码了那部分）。听到是代码，将不胜感激：

我无法让代码块工作，所以把它放在这个 URL 上

[http://pastebin.com/ue09X0Bi](http://pastebin.com/ue09X0Bi)

PS 非常抱歉，我无法让代码块工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T10:20:16.827

The global variable `p` is used throughout the code but is not assigned anywhere, so its value is logically `nil`.

Note: it is unusual and not recommendable to have a global variable with a such short name.

EDIT: from the new link you provide in the comment, `p` is set inside function `loadgeneral` contained in `player.lua`. This means that `loadgeneral` is not called, although it is present at line 19 in function `love.load` of your script. This is probably normal, since `gamestate` is there set to `"menu"` and you immediately compare that variable to `"playing"`, which will always yield false!

# android - 删除“谢谢。您的项目很快就会出现。” 在 InApp 购买后出现 toast

> ID：14180807
> 
> 赞同：4
> 
> 时间：2013-01-06T09:23:47.323
> 
> 标签：android, in-app-purchase, google-play, toast

在我进行 IAP 购买后，会弹出一个 Toast（谢谢。您的商品很快就会出现）。好像这来自 Google 的 Market/Play 客户端，因为我当然没有任何代码可以做到这一点。

问题：我如何删除这个？是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:45:12.873

toast 来自 Google Play 应用程序，您不能禁止它，因为它不是您的应用程序的一部分。

它就像来自第三方应用程序的任何其他吐司一样，完全不受您的控制。

# android - 阿拉伯字母转换为拉丁文

> ID：14180808
> 
> 赞同：0
> 
> 时间：2013-01-06T09:23:55.433
> 
> 标签：android, eclipse, sqlite, encoding, localization

我正在开发一个将数据存储在 SQLite 数据库中的阿拉伯语应用程序。我插入数据如下

```
mySQLiteAdapter.Insert(" تطبيق عربي"); 
```

但问题是，有时当我打开 Eclipse 时，我发现阿拉伯字母已转换为拉丁文

```
mySQLiteAdapter.Insert("Êã ÊÏÑíÈå Úáì ßíÝíÉ ãÊÇÈÚÉ"); 
```

我不知道是什么问题，因为我已将编码设置更改为 UTF-8..

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T09:43:36.020

来自您的电脑的问题更改系统更改系统位置

控制面板 >> 语言 >> 日期和时间格式 >> 更改系统区域设置 >> 阿拉伯语

# winapi - 从 Windows RT 中的桌面应用程序加载“comctl32.dll”失败

> ID：14180810
> 
> 赞同：4
> 
> 时间：2013-01-06T09:24:09.103
> 
> 标签：winapi, windows-8, loadlibrary, comctl32

使用[http://forum.xda-developers.com/showthread.php?t=1944675](http://forum.xda-developers.com/showthread.php?t=1944675)中描述的方法，我使用 Windows RT 在我的表面上执行了一个 win32 桌面应用程序。

**可以使用LoadLibrary加载诸如****user32.dll、kernel32.dll、gdi32.dll**等windows dll 。但是当我尝试使用**LoadLibrary加载****“comctl32.dll”**或**“c​​omdlg32.dll”**时，它返回NULL。

 ********GetLastError()**返回的错误代码是**1114**。这意味着*“动态链接库 (DLL) 初始化例程失败。”*

编辑：当我测试为 x86 编译的应用程序时，它可以正常工作。当我为 ARM 构建它并在 Windows RT 下运行时，发生了这个错误。

示例代码：

```
HMODULE hModule;
hModule = LoadLibraryA("user32.dll");
printf("Load Library user32.dll : %x with Err: %x\n", hModule, GetLastError());
hModule = LoadLibraryA("kernel32.dll");
printf("Load Library kernel32.dll : %x with Err: %x\n", hModule, GetLastError());
hModule = LoadLibraryA("comctl32.dll");
printf("Load Library comctl32.dll : %x with Err: %x\n", hModule, GetLastError()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T12:34:37.313

> 但是可以加载 Microsoft 批准的 dll，例如 user32.dll 和 comctl32.dll

您认为 comctl32.dll 被“批准”的假设是错误的。它的所有导出函数都不在可在商店应用程序中使用的 winapi 函数列表中。它的唯一用途是为通用控件提供一个实现，这些控件都不能在商店应用程序中使用。它只能用于桌面应用程序，不能在 Windows RT 上自己编写。

Microsoft 没有理由让 comctl32.dll 在应用商店应用的沙箱中工作。因此，预计将无法正常工作。

加载 kernel32 和 user32 是可能的，这些 DLL*确实*包含批准的 winapi 函数。但是，使用任何不在批准列表中的功能都会导致您在验证测试中失败。您无法发布这样的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T09:35:25.130

通常，当我使用 ComCtl32.dll 时，我还会添加一个清单依赖项，如[本 MSDN 文章](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773175%28v=vs.85%29.aspx)（特别是[本节](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773175%28v=vs.85%29.aspx#no_extensions)）中所述。不确定这是否是您无法加载它的原因，但如果您想以任何方式使用它，您可能需要添加清单信息。

不知道 ComDlg32.dll。******

# forms - 使用现有数据 symfony2 自动填充表单

> ID：14180813
> 
> 赞同：0
> 
> 时间：2013-01-06T09:24:53.683
> 
> 标签：forms, symfony, php, auto-populate

如何自动填充包含实体选项的表单？我正在尝试制作一个更新详细信息表单，该表单在调用时已经包含该用户信息。

我正在使用 Symphony 2.1。

表格如下所示：

`$builder //->add('createdate') //->add('modifydate') ->add('schoolname') ->add('schoolprofile') ->add('streetaddress') ->add('streetaddressext') ->add('country', 'entity', array( 'class' => 'IFS\Account\RegisterSchoolBundle\Entity\Country', 'property' => 'countryname', )) ->add('schoolprogramid', 'entity', array( 'class' => 'IFS\Account\RegisterSchoolBundle\Entity\Schoolprogram', 'property' => 'displayname', )) ->add('schoolsizegroupid', 'entity', array( 'class' => 'IFS\Account\RegisterSchoolBundle\Entity\Schoolsizegroup', 'property' => 'displayname', )) ->add('state', 'entity', array( 'class' => 'IFS\Account\RegisterSchoolBundle\Entity\State', 'property' => 'statename', )) ->add('city', 'entity', array( 'class' => 'IFS\Account\RegisterSchoolBundle\Entity\City', 'property' => 'cityname', )) ; }`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T09:36:24.053

您可以在实体级别设置默认值，例如：

```
class MyObject {

    __construct() {
        $this->setValue('myDefaultValue');
        //...
    }

    //...
} 
```

另外，您的问题似乎与此问题重复：[How to set default value for form field in Symfony2?](https://stackoverflow.com/questions/7913086/how-to-set-default-value-for-form-field-in-symfony2)

# c++ - 解释一下这个虚函数指针代码？

> ID：14180823
> 
> 赞同：-2
> 
> 时间：2013-01-06T09:26:13.163
> 
> 标签：c++, function-pointers

```
#include <iostream>

struct Shape
{
    virtual Shape* duplicate() { return new Shape; }
    virtual void print() { std::cout << "SHAPE" << std::endl; }
    virtual ~Shape() {}
};

struct Box : public Shape
{
    virtual Box* duplicate() { return new Box; }
    virtual void print() { std::cout << "BOX" << std::endl; }
};

int main(int argc, char** argv) 
{ 
  Shape* s1 = new Box;
  Box* b1 = s1->duplicate();

  b1->print();

  delete s1;
  delete b1;

  return 0; 
} 
```

我不确定这是否是函数指针的语法，即使是这样，主函数也会令人困惑......此外，在对象声明时正在使用指针......我不熟悉这样的声明，所以请解释一下这段代码作品..？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T09:57:16.483

以下定义了一个不带参数并返回指向的指针的虚函数`Shape`：

```
struct Shape
{
    virtual Shape* duplicate() { return new Shape; } 
```

下面*覆盖*了这个函数

```
struct Box : public Shape
{
    virtual Box* duplicate() { return new Box; } 
```

请注意返回类型如何更改为`Box*`. 这是允许的，因为`Box`它是 的子类`Shape`。这称为[协变返回类型](http://en.wikipedia.org/wiki/Covariant_return_type)。

以下尝试`Box::duplicate()`通过`Shape*`指针调用：

```
 Shape* s1 = new Box;
  Box* b1 = s1->duplicate(); 
```

这不会编译，因为`Shape::duplicate()`返回`Shape*`而不是`Box*`.

# python - mutateRow() in HBase through Thrift requires undocumented fourth argument

> ID：14180824
> 
> 赞同：1
> 
> 时间：2013-01-06T09:26:30.563
> 
> 标签：python, hadoop, hbase, thrift

When I try to do an insert/update to HBase via Thrift (Python, specifically), mutateRow() requires a fourth argument "attributes". Thrift says that this column is a string->string map. None of the examples and online discussions mention this fourth column, and even the Thrift examples provided with the same, exact version of HBase don't have it.

If you can, please just include a full example of creating a table, defining a column family, inserting a row, and dumping the data.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T09:26:30.563

No problem. Also, instead of just dumping the value of the created column, I actually dump the last three versions of the modified column, just because its cool.

For completeness, I, roughly, did the following to get Thrift working:

*   Downloaded and built Thrift (using SVN.. 2012-11-15/1429368).
*   Ran "thrift -gen py <thrift file>" from the path that I wanted the Python interface files created in.
*   Installed "thrift" package via PIP.

I ran the the following code from the root of the generated files.

```
from thrift.transport import TSocket
from thrift.transport import TTransport
from thrift.protocol import TBinaryProtocol

from hbase import Hbase
from hbase.ttypes import *

from random import randrange
from pprint import pprint

socket = TSocket.TSocket('localhost', 9090)
transport = TTransport.TBufferedTransport(socket)
transport.open()
protocol = TBinaryProtocol.TBinaryProtocol(transport)
client = Hbase.Client(protocol)

table_name = 'test_table'
row_key = 'test_row1'
colfamily1 = 'test_colfamily1'
column1 = 'test_col1'
fullcol1 = ('%s:%s' % (colfamily1, column1))
value = ('%d' % randrange(1000, 9999))

num_versions = 3

try:
    desc = ColumnDescriptor(colfamily1)
    client.createTable(table_name, [desc])
except AlreadyExists:
    pass

client.mutateRow(table_name, row_key, [Mutation(column=fullcol1, value=value)], {})
results = client.getVer(table_name, row_key, fullcol1, num_versions, {})

pprint(results) 
```

Output:

```
$ python test.py 
[TCell(timestamp=1357463438825L, value='9842')]
$ python test.py 
[TCell(timestamp=1357463439700L, value='9166'),
 TCell(timestamp=1357463438825L, value='9842')]
$ python test.py 
[TCell(timestamp=1357463440359L, value='2978'),
 TCell(timestamp=1357463439700L, value='9166'),
 TCell(timestamp=1357463438825L, value='9842')] 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-25T23:27:43.190

Instead of messing with the low level Thrift API, you should use HappyBase to use HBase from Python. See [https://github.com/wbolster/happybase](https://github.com/wbolster/happybase) and the tutorial in its documentation at [http://happybase.readthedocs.org/en/latest/](http://happybase.readthedocs.org/en/latest/) for code samples. It includes samples for exactly the things you asked for.

# mysql - MySQL表问题：当两列之一必须为空时（连续）

> ID：14180833
> 
> 赞同：0
> 
> 时间：2013-01-06T09:27:02.727
> 
> 标签：mysql, database

我正在使用 MySQL，并且出于参照完整性的目的，我的表使用 innoDB 存储。

**问题**

我正在建立一个销售订单系统。我的`invoice`表有`tracking_code`列和`COD_place`列

> 客户使用以下任一方法与我打交道：运输或 COD（货到付款/亲自与他会面）。每个运送的包裹都有一个跟踪代码，而对于 COD，必须有一个地方可以做到这一点。因此列`tracking_code`和`COD_place`。

问题是，如果首选运输，则该`COD_place`列应为 NULL 或留空；否则，`tracking_code`必须为 NULL。

它不优雅。代表这一点的最佳方式是什么？你能`method`在 MySQL 中创建一个通用实体吗？

我真的想不出任何优雅的解决方案，所以我在这里求助于你。先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T09:41:36.060

您应该引入一个附加列来指定请求的事务类型。不要试图根据其他信息隐含地假设这一点。

在表中包含冗余信息字段是可以接受的（使用 NULL）。

或者，您可以为每种类型的事务创建一个附加表，其中仅包含该类型事务所需的相关字段。这具有额外的优势，即能够清楚地表示这些过程而不受其他过程的干扰。

例如，您可能有应该处理 COD 交易的业务逻辑，其中包括“司机收款”状态，而您的运输交易可能有一个列来处理“付款预授权交易 ID”。COD 逻辑无需关心运输交易，反之亦然。

通过 Invoice 上的附加 transaction_type 字段，您知道要加入哪个表，以便收集附加信息。如果您将来添加第 3 种类型，您将不会得到一个不断扩大的 Invoice 表。

# asp.net - IIS 未由 Visual Studio 更新

> ID：14180838
> 
> 赞同：0
> 
> 时间：2013-01-06T09:28:11.040
> 
> 标签：asp.net, visual-studio-2010, iis

在 Visual Studio 中，我有一个 MVC 项目。我需要使用本地 IIS，而不是 Express 版本。所以我使用“使用本地 Web 服务器”并取消选中“使用 IIS Express”。

然后我单击“创建虚拟目录”按钮。

我收到“虚拟目录已成功创建”消息。一切似乎都很好。

当我运行应用程序时，我进入`"HTTP Error 503\. The service is unavailable."`了网络浏览器。

如果我转到 IIS，该目录不会出现在列表中。

我迷路了，Visual Studio 是否有可能使用另一个注册表文件或版本来创建虚拟目录？我可以使用哪些工具来跟踪问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T09:32:37.843

如果您没有以管理员身份运行 Visual Studio，它将无法更改您的 IIS 配置。如果你需要使用完整的 IIS，你可以自己在 IIS 管理器中创建虚拟目录——你不需要使用 VS 中的创建虚拟目录按钮。

# redirect - Is it possible to forward data to another controller/action in Zend 2?

> ID：14180839
> 
> 赞同：7
> 
> 时间：2013-01-06T09:28:11.443
> 
> 标签：redirect, zend-framework2, forward

I think a common problem is trying to forward (post) data to another page. Normally, I'd resort to sessions to pass data between pages, but this forward helper in Zend looks like it has potential. Is there any way to get information about a forward request? Like ask for the forwarder (and it'd return null normally when there's no forwarder)?

And if there's no current implementation, is it possible? It'd be a fun project, and something I've wanted forever anyways. (I'm also currently using my own BcryptDbTableAuth class until I find a better solution).

By the way, I'm not talking about adding request params. It should be invisible to the user. And I'm still investigating variable routes (Wildcard is supposed to do the trick but I keep getting "route cannot be matched"... will drill on that a bit more)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-06T09:52:28.833

There are two options to "forward". Understand php is as server side language a processor to grab an incoming request and return a response.

That said, the first "forward" uses in-framework forwarding. This means there is only one request and one response. Internally the framework calls one controller action and then another one. Zend Framework calls this method **forward**.

The second "forward" is a real redirect, where the first response contains a `Location` header and the `302` http status code. This results in a second request and consecutively in a second response. Zend Framework calls this method **redirect**.

So with above, the *forward* you talk about in your question does not involve any sessions or route match parameters, since the second call to an action is within the same php process, so all variables are already known.

**Forward example**

An example to forward is to use the `forward` controller plugin:

```
class MyController
{
  public function myAction()
  {
    return $this->forward()->dispatch('MyModule\Controller\Other', array(
      'action' => 'other',
      'foo'   => 'bar',
      'baz'   => new Bat()
    ));
  }
} 
```

To access:

```
class OtherController {
    public function otherAction()
    {
        $foo = $this->params()->fromRoute('foo');
    }
} 
```

As you might note, it is possible to add additional parameters to the forward call including real objects.

**Redirect example**

One option is to use the route parameters, so you capture data in the url you send back. Because you say you don't want that, you have to use a session for that:

```
use Zend\Session\Container;

class MyController
{
  public function myAction()
  {
    $session = new Container('MyContainer');
    $session->foo = 'bar';
    $session->baz = 'bat';

    return $this->redirect()->toRoute('my/other/route');
  }
} 
```

# c++ - 中缀到后缀转换 - 分段错误

> ID：14180840
> 
> 赞同：-5
> 
> 时间：2013-01-06T09:28:34.497
> 
> 标签：c++, segmentation-fault, stack

我收到一个分段错误，说 core dumped 。C++ 程序是要隐藏一个中缀表达式。我想逻辑是正确的。我检查了代码，但无法找出错误。我有优先级函数来计算运算符的优先级，函数 ifpf 将中缀表达式转换为后缀表达式。

```
#include <iostream>
#include <cstring>
#include <cstdlib>
#include <stdio.h>
#define size 100
using namespace std;
class stack{
    char pstack[size];
    int top;
    public:
    stack(){
        int top=-1;
    }
    void push(char item){
        if(top==size) {cout<<"Stack is already full";exit(0);}
        else {pstack[++top]=item;}
    }
    char pop(){
        char ch='#';
        if(top==-1) cout<<"Stack is empty...";
        else { ch=pstack[top--];}
        return ch;
    }
    int precedence(char ch){
        switch(ch){
            case '(' : return 1;
            case ')' : return 2;
            case '+' :
            case '-' : return 3;
            case '*' :
            case '/' :
            case '%' : return 4;
            case '^' : return 5;
            default : return 0;
        }
    }
    void ifpf(){
        int len,priority,i,j=0;
        char infix[size],ch,postfix[size];
        cout<<"Enter the infix expression : "<<endl;
        cin>>infix;
        len=strlen(infix);
        infix[len++]=')';
        push('(');
        for(i=0,j=0;i<len;i++){
            switch(precedence(infix[i])){
                case 1 : push(infix[i]);break;
                case 2 : ch=pop();
                while(ch!='('){
                    postfix[j++]=ch;ch=pop();
                }
                break;
                case 3 : ch=pop();
                while(precedence(ch)>=3){
                    postfix[j++]=ch;ch=pop();
                }
                push(ch);
                push(infix[i]);
                break;
                case 4 : ch=pop();
                while(precedence(ch)>=4){
                    postfix[j++]=ch;ch=pop();
                }
                push(ch);
                push(infix[i]);
                break;
                case 5 : ch=pop();
                while(precedence(ch)==5){
                    postfix[j++]=ch;ch=pop();
                }
                push(ch);
                push(infix[i]);
                break;
                default : postfix[j++]=infix[i];break;
            }
        }
        cout<<"The post fix wxpression is : ";
        cout<<postfix;
    }
};
int main(){
    stack obj;
    obj.ifpf();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T09:40:29.067

这是第一个错误：

```
if(top==size) {cout<<"Stack is already full";exit(0);}
else {pstack[++top]=item;} 
```

那应该是：

```
if(top==size-1) {cout<<"Stack is already full";exit(0);}
else {pstack[++top]=item;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T10:41:17.367

问题是你没有`top`正确设置，在你的构造函数中你声明了一个 local `top`which left **stack::top uninitialized**。

```
 stack(){
        int top=-1;  //
    } 
```

更新到以下代码，应该可以工作：

```
 stack() {
        top = -1;
    } 
```

# c++ - c++：Python 的列表类比

> ID：14180844
> 
> 赞同：1
> 
> 时间：2013-01-06T09:28:54.143
> 
> 标签：c++, arrays, types, vector, type-conversion

我正在尝试创建一个实际上类似于 Python 对象的`list`对象。在我的代码中，我有以下类：`object_type`, `type_type`, `none_type`, `bool_type`, `int_type`, `float_type`, ,抽象类`bytes_type`在哪里。`object_type`

抽象类有一些虚函数，如`type_type __type__(void)`, `bytes_type __name__(void)`, `bytes_type __repr__(void)`, `bool_type __bool__(void)`, `int_type __int__(void)`, `float_type __float__(void)`, `bytes_type __bytes__(void)`.

`type_type`类有以下构造函数：`type_type(object_type*)`; 在构造过程中，指向源对象的指针被存储到`object_type* type_type::__cdata__`并在用户想要使用`type_type::__eq__(const type_type&)`函数比较两种类型时使用（这个函数使用`typeid`你可能已经猜到了）。

我需要创建`list_type`对象，它可以存储任何基于`object_type`. 它必须具有`__get__(const int_type&)`获取元素的`__set__(const int_type&, object_type*)`功能和设置元素的功能。所有对象都存储在`std::vector<object_type*> __cdata__`.

如何强制`list_type::__get__(const int_type&)`返回正确的对象？假设我们有`list_type`，其中包含三个元素：`[bytes_type object0, int_type object1, float_type object3]`. 使用`list_type::__get__(0)`应该返回`bytes_type object0`。功能`type_type object_type::__type__()`可能很有用。

用户可以`object_type`在执行期间创建新的基于类型的困难（我所描述的所有内容都用于创建新的玩具语言）。然而，所有类型都基于`object_type`并具有其虚函数。

你有什么想法？我很高兴听到你的建议。

PS git 仓库：[https ://github.com/ghostmansd/quirinus](https://github.com/ghostmansd/quirinus)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T16:02:15.553

```
All objects are stored inside std::vector<object_type*> __cdata__.

How can I force list_type::__get__(const int_type&) to return correct object? 
```

里面已经有正确的对象了`std::vector<object_type*>`。它的类型是`object_type*`. 您应该返回`object_type*`或`object_type&`。这些是可能的最佳返回类型。C++ 类型系统不够复杂，无法让函数的返回类型取决于其输入。

您应该考虑使用智能指针而不是原始指针，但原理保持不变。

一个旁注。*你可以用引用或指针（智能或原始）做`object_type`什么？两件事：您可以将其转换为其他指针或引用，或者您可以通过它调用虚函数。强制转换只有在您知道或可以猜测目标类型时才有用，并且通过虚函数实现每个可以想象的操作是不切实际的，因为有无限的可想象操作集。这可能意味着这个设计不是你想做的最好的。*

哦，你不应该在 C++ 中使用双下划线。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T13:50:12.430

您在方法中使用的方法约定非常类似于 python。正如@BenjaminLindley 所说，这是无效的，因为在 C++ 中，以双下划线为前缀的名称保留给编译器（在 Python 中，它们保留用于特殊方法，例如`__eq__`，但在 C++ 中，您可以重载 == 以获得类似的效果）。

注意：以下适用于编译时已知的类型。

由于 C++ 是静态类型的，因此您不能返回多种类型。您必须返回 object_type& ，然后可以将其转换回原始类型：

您的列表可以存储（智能）指向 object_type 的指针，并且您的 get 方法（或重载`[]`运算符）将返回对 object_type 的引用。

```
// data is underlying container of pointers, getInt() returns int value from int_type
object_type& get(const int_type& i) { return *(data[i.getInt()]); } 
```

此处使用引用来避免切片并访问存储在列表中的值。

用户必须强制转换才能获得对象的原始类型。

```
try
{
    bytes_type& object0 = dynamic_cast<bytes_type&>(your_list.get(0))
    // operate on object0
}
catch(std::bad_cast& e)
{
     // type was incorrect
     std::cout << "Invalid type";
} 
```

boost::any 类似于这个想法，所以你可以看看他们是如何实现的。

# javascript - 如何在Javascript中取消转义字符？

> ID：14180847
> 
> 赞同：-1
> 
> 时间：2013-01-06T09:29:54.027
> 
> 标签：javascript

> **可能重复：**
> [HTML 实体解码](https://stackoverflow.com/questions/5796718/html-entity-decode)

我想转换这个字符串

```
&lt;p&gt;update this post&lt;/p&gt; 
```

到

```
<p>update this post</p> 
```

在 Javascript 中。

你有什么主意吗？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T09:35:18.383

我会创建一个元素，设置它`innerHTML`并获取它`innerText`：

```
var element = document.createElement('div');
element.innerHTML = '&lt;p&gt;update this post&lt;/p&gt; ';
console.log(element.innerText); 
```

结果是：

```
"<p>update this post</p> " 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T09:38:45.110

工作示例：

```
var text='&lt;p&gt;update this post&lt;/p&gt;';
var d = document.createElement("div");
d.innerHTML=text;
alert(d.innerText || d.text || d.textContent); 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-01-06T09:33:50.497

您可以使用此方法：

```
var param = '&lt;p&gt;update this post&lt;/p&gt'; 
unescape(param); 
```

# cakephp - CakePHP：关联小型“选择”表的最佳实践

> ID：14180850
> 
> 赞同：1
> 
> 时间：2013-01-06T09:30:14.843
> 
> 标签：cakephp, foreign-keys, cakephp-model

快速最佳实践问题。

我的关联如下： User hasOne UserBasicInfo
UserBasicInfo 有一个国家（用户居住的国家）的选择元素。
选择元素由一个简单的“国家”表（id、国家名称、缩写）填充

最好使用 Model::query() 从国家表中获取数据吗？或者我应该为这些数据创建一个模型？

如果创建模型，我应该使用与 UserBasicInfo 模型的关联，还是应该只使用 $uses 变量？

如果它影响答案，实际上有许多以类似方式填充的选择字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T14:18:48.277

Model::query() 在 cakephp 中做任何事情都不是最好的。

在您正在使用的 UsersController 操作中

```
$this->set('countries', $this->User->Country->find('list')); 
```

在编辑/添加表单中

```
$this->Form->input('country_id'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T17:32:19.673

> 如果它影响答案，实际上有许多以类似方式填充的选择字段。

它可能。您是否有多个国家/地区选择框，或者这些选择字段都是从不同的表中提取的？如果是前者，您可以使用`options`key in[`FormHelper::select()`](http://book.cakephp.org/2.0/en/core-libraries/helpers/form.html#FormHelper%3a%3aselect)从一个数组中填充多个选择：

### 控制器：

```
$this->loadModel('Country');
$this->set('countries', $this->Country->find('list')); 
```

### 看法：

```
$this->Form->select('UserBillingInfo.country_id', $countries);
$this->Form->select('UserShippingInfo.country_id', $countries);
etc... 
```

* * *

否则，我通常通过在我的模型之间创建适当的关联，然后使用其中一个`Model::find('list')`或自定义模型方法来检索选项来处理这种情况。如果您正确命名变量，options 变量将自动用作您选择的选项：

### 控制器：

```
$this->set('countries', $this->User->UserBasicInfo->Country->find('list')); 
```

### 看法：

```
$this->Form->input('UserBasicInfo.country_id'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T15:09:51.553

我对这种选择元素使用视图助手。如果我以你的情况为例，我会这样做：

控制器：

```
class UsersController extends AppController {
      ....
      public $helpers = array('Common');
      ....
} 
```

帮手：

```
class CommonHelper extends AppHelper {
      ....
      public function get_country_list() {
            App::import( 'Model', 'Country' );
            $objCountry = new Country();
            $countries = $objCountry->find( 'list' );
            return $countries;
      }
      ....
} 
```

看法：

```
....
echo $this->Form->input('country_id', array(
     'options' => $this->Common->get_country_list(),
     'value' => !empty($data['UserBasicInfo']['country_id']) ? $data['UserBasicInfo']['country_id'] : ''
));
.... 
```

条件是**你必须有一个 Country 模型**。通过这种方式，您可以填充任何下拉菜单。干杯！！！

# mysql - 节点mysql超时

> ID：14180858
> 
> 赞同：4
> 
> 时间：2013-01-06T09:31:14.547
> 
> 标签：mysql, node.js, timeout

我们知道node有一些mysql模块，一些是纯js实现的（比如[node-mysql](https://github.com/felixge/node-mysql)），一些是基于c libmysql的。

我更喜欢 node-mysql，因为它不需要额外的 mysql 库，看起来更“干净”。但我也注意到它不支持连接和查询中的超时功能，这可能会在某些环境中导致问题。

所以我的问题是：有人干净地解决了这个超时问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T21:23:01.333

我们解决此问题的方法是检查错误消息，并在必要时重新连接

这就是他们在[https://github.com/felixge/node-mysql#server-disconnects建议的方式](https://github.com/felixge/node-mysql#server-disconnects)

这是文档更改时的示例代码

```
function handleDisconnect(connection) {
  connection.on('error', function(err) {
    if (!err.fatal) {
      return;
    }

    if (err.code !== 'PROTOCOL_CONNECTION_LOST') {
      throw err;
    }

    console.log('Re-connecting lost connection: ' + err.stack);

    connection = mysql.createConnection(connection.config);
    handleDisconnect(connection);
    connection.connect();
  });
}

handleDisconnect(connection); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-15T14:51:33.423

我遇到了同样的问题，使用方法 mysql.createPool 而不是方法 createConnection 对我有用。

这是我的代码；

```
/*jslint node: true */
'use strict';
var Q = require('q');

var mysql = require('mysql');
var _config;
var env = process.env.NODE_ENV || 'development';
if (env === 'development') {
  _config = {
    host     : 'localhost',
    user     : 'root',
    charset : 'latin1',
    password : '123456',
    database : 'DEVDB',
    connectionLimit: 10
  };
}else {
  _config = {
    host : 'PRODUCTIONHOST',
    user     : 'root',
    charset : 'latin1',
        password : 'PRODUCTIONPASS',
    database: 'PRODUCTIONDB',
    connectionLimit: 10
  };
}

var _pool = mysql.createPool(_config);

var runquery = function() {
  var deferred = Q.defer();
  var args = Array.prototype.slice.call(arguments);

  //console.log(args);
  args.push(function(err, results){
    if (err) {
      deferred.reject(new Error(err));
    } else {
      deferred.resolve(results);
    }
  });

  _pool.query.apply(_pool, args);

  return deferred.promise;
};

module.exports = runquery; 
```

使用示例；

```
runquery('select id from users where mail = ?', 'eugenioclrc')
.then(function(rows){
  console.log(rows);
}); 
```

# java - 在编译时和运行时向下转换/向上转换错误？

> ID：14180861
> 
> 赞同：4
> 
> 时间：2013-01-06T09:31:49.350
> 
> 标签：java, inheritance, casting, type-conversion, downcast

请检查以下程序。

我怀疑编译器何时会在编译器级别发出强制转换异常以及何时会在`runtime`？

就像在下面的程序中，表达式

我认为`(Redwood) new Tree()`应该在编译器时失败，因为 Tree 不是 Redwood。但它并没有失败`compile time`，正如预期的那样，它在`runtime`!!!

```
public class Redwood extends Tree {
     public static void main(String[] args) {
         new Redwood().go();
     }
     void go() {
         go2(new Tree(), new Redwood());
         go2((Redwood) new Tree(), new Redwood());
     }
     void go2(Tree t1, Redwood r1) {
         Redwood r2 = (Redwood)t1;
         Tree t2 = (Tree)r1;
     }
 }
 class Tree { } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-06T09:33:50.703

树不一定是红木，但它可能是，因此没有编译时错误。

在这种情况下，很明显它不是，但是编译器倾向于抱怨绝对不正确的事情，而不是可能或可能不正确的事情。在这种情况下，逻辑不正确，而不是代码本身，逻辑是您的问题，而不是编译器的问题。

```
Tree t = new Redwood();
Redwood r = (Redwood) t; 
```

在编译和运行时都完全有效。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-06T09:58:40.967

我在解释中又添加了一个子类。

```
 Tree
      /    \
     /      \
    /        \ 
Redwood       Blackwood 
```

在这个层次结构中：

**Upcast**：当我们沿类层次结构向一个方向投射引用时`from the sub classes towards the root`。*在这种情况下，我们不需要**使用**强制转换运算符*

**大写示例：**

一个`Redwood`或`Blackwood`两者都是`tree`：所以

```
Tree t1;
Tree t2;
Redwood r = new Redwood() ;
Blackwood  b = new Blackwood() ; 

t1 = r;    // Valid 
t2 = b;    // Valid 
```

**Downcast**：当我们沿类层次结构向一个方向投射引用时`from the root class towards the children or subclasses`。*我们需要显式类型转换。*

**垂头丧气的例子：**

```
Redwood r = new Tree();  //compiler error, because Tree is not a Redwood 
Blackwood r = new Tree();  //compiler error, because Tree is not a Blackwood 
```

`Tree object` **如果它确实指向** `Redwood`对象或对象，则需要显式类型转换，否则`Blackwook`在运行时会出错。例如

在这种情况下：

```
Tree t1;
Tree t2;
Redwood r = new Redwood() ;
Blackwood  b = new Blackwood() ; 

t1 = r;    // Valid 
t2 = r;    // Valid     

Redwood r2 = (Redwood)t1; 
Blackwood  b2 = (Blackwood)t2 
```

**[回答]**

`Redwood r = (Redwood) new Tree();` **为什么没有编译器错误？**

它的**Downcast**示例：

源头`Redwood r = (Redwood) new Tree();`创建 Tree 对象并类型转换为`Redwood`.

你可以这样想：

```
Tree t = new Tree();`
Redwood r = (Redwood)t; 
```

所以它在编译时没问题，

**[回答]**

**为什么运行时错误？**

但真正`Redwood`的子类不能指向`Tree`超级类对象。所以你的代码在运行时失败。

树 t = 新树（）；

`t`指向`Tree()`对象 not `Redwood()`。这就是运行时错误的原因。

编译器现在不写什么是有价值的，`t`并且在*语法上*每件事都是写的。但是在运行时由于，if的对象`Redwood r = (Redwood)t;`在哪里出错了。 `t``Tree class`

**[建议：]**

我建议您使用**instanceof**运算符：

强制转换/强制操作用于在类型之间进行转换，*instanceof运算符用于***在运行时**检查类型信息。*

**说明**：

*instanceof*运算符允许您确定对象的类型。它接受运算符左侧的对象和运算符右侧的类型，并返回一个*布尔*值，指示该对象是否属于该类型。举个例子最清楚地说明了这一点：

```
if (t instanceof Redwood)
{
    Redwood r = (Redwood)t;
    // rest of your code
} 
```

但我还要补充一点：**从基类型转换为派生类型是一件坏事。** **参考**：[当心 instanceof 运算符](http://www.javapractices.com/topic/TopicAction.do?Id=31)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-06T10:02:13.283

编译器只会查看表达式的编译时类型。它不对表达式的运行时类型进行假设。`new Tree()`具有编译时类型`Tree`，因此`(Redwood)new Tree()`与`(Redwood)myTreeVariable`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-06T10:55:29.277

> 我怀疑编译器何时会在编译器级别发出强制转换异常以及何时会在运行时发出异常？

严格来说，编译器不会“发出强制转换异常”。您将获得：

*   编译错误，或
*   运行时异常。

* * *

`(Redwood) new Tree()`给出运行时异常而不是编译错误的原因是JLS [（第 5.5.1 节）](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.5.1)所说的应该发生。

具体来说，JLS 是这样说的：

> *“给定一个编译时引用类型 S（源）和一个编译时引用类型 T（目标），如果由于以下规则而没有发生编译时错误，则存在从 S 到 T 的强制转换。”*
> 
> *“如果 S 是类类型”* AND *“如果 T 是类类型，则 |S| <: |T| 或 |T| <: |S|。否则，会发生编译时错误。”*

其中“|S| <: |T|” 表示类型 S 是类型 T 或 T 的子类型。

在这种情况下 S is`Tree`和 T is `Redwood`，两者都是类并且`Redwood`是`Tree`... 的子类型，因此没有编译错误。

很明显这是“错误”的事实是不相关的。JLS 说它是合法的 Java，因此它不应该给出编译错误。（智能编译器*可能会*发出编译警告，表示表达式将始终抛出异常......但这是一个不同的问题。）

* * *

JLS 规则背后的推理没有在规范中详细说明，但我想它是这样的：

比较这三个片段：

```
Redwood r = (Redwood) new Tree();

Tree t = new Tree();
Redwood r = (Redwood) t;

Tree t1 = new Tree();  Tree t2 = new Redwood();
Redwood r = (Redwood) (someCondition ? t1 : t2);

Tree t = gardenStore.purchaseTree();
Redwood r = (Redwood) t; 
```

假设他们将第一个片段定义为编译错误：

*   第二个呢？嗯，这也很容易证明。

*   第三个呢？这可能很容易……或者可能非常困难。

*   第四个呢？现在片段的合法性取决于我们甚至可能没有源代码的方法的语义！

关键是，一旦您开始要求编译器证明表达式的动态值，您就处于导致停机问题的滑坡上。如果你将编译错误设为可选，那么你会遇到可怕的情况，一个编译器可以说一个程序是有效的，而另一个编译器可以说它有错误！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-06T09:42:50.873

需要补充的是，不需要向下转换：由于Redwood也是一棵树，所以你总是可以将它赋值给一个树变量，

```
Redwood r;
Tree t = r; // no casting needed 
```

您可能总是在 Java 类型系统中寻找*替代原则。*我敢肯定，有十亿吨的材料。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-06T10:09:33.680

引用的树可能事先是红木，这就是代码编译良好的原因。

```
 Tree t1 =  new Redwood(); 
     Redwood r1 = (Redwood)t1;
     Tree t2 = (Tree)r1; 
```

您可以看到 Tree() 可能已经是红木了。

# ruby - 如何对使用带有 Web 服务 OAuth 凭据的 files.insert 创建的文件设置权限？

> ID：14180863
> 
> 赞同：1
> 
> 时间：2013-01-06T09:32:31.527
> 
> 标签：ruby, google-drive-api, google-api-ruby-client

我使用以下代码进行了身份验证：

```
 key = Google::APIClient::KeyUtils.load_from_pkcs12(path_to_key_file, 'notasecret')
  @client.authorization = Signet::OAuth2::Client.new(
      :token_credential_uri => 'https://accounts.google.com/o/oauth2/token',
      :audience => 'https://accounts.google.com/o/oauth2/token',
      :scope => 'https://www.googleapis.com/auth/drive',
      :issuer => 'xxx@developer.gserviceaccount.com',   
      :signing_key => key)

    @client.authorization.fetch_access_token! 
```

并使用创建文件

```
file = @drive.files.insert.request_schema.new({
  'title' => title,
  'description' => description,
  'mimeType' => mime_type
})
media = Google::APIClient::UploadIO.new(file_name, mime_type)
result = @client.execute(
  :api_method => @drive.files.insert,
  :body_object => file,
  :media => media,
  :parameters => {
    'uploadType' => 'multipart',
    'convert' => true,
    'alt' => 'json'}) 
```

该文档已成功创建，但我无法弄清楚如何将结果文件的所有权设置给我域中的特定用户（如果无法设置所有权，则与其他用户共享）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T01:21:11.010

您需要使用权限供稿来添加权限。请参阅[有关共享的文档](https://developers.google.com/drive/manage-sharing)和[`drive.permissions.insert`](https://developers.google.com/drive/v2/reference/permissions/insert)方法，其中有一个 Ruby 示例：

# python - 对元组列表中的每个值求和

> ID：14180866
> 
> 赞同：33
> 
> 时间：2013-01-06T09:32:43.310
> 
> 标签：python, performance, list, python-2.7, list-comprehension

我有一个类似于此的元组列表：

```
l = [(1, 2), (3, 4), (5, 6), (7, 8), (9, 0)] 
```

我想创建一个简单的单线，它会给我以下结果：

```
r = (25, 20) or r = [25, 20] # don't care if tuple or list. 
```

这就像执行以下操作：

```
r = [0, 0]
for t in l:
  r[0]+=t[0]
  r[1]+=t[1] 
```

我确信这是非常简单的事情，但我想不出来。

注意：我已经看过类似的问题：

[如何对元组内的一组列表中的第一个值求和？](https://stackoverflow.com/questions/4663024/how-do-i-sum-the-first-value-in-a-set-of-lists-within-a-tuple)

[如何在 Python 的元组列表中对每个元组中的第一个值求和？](https://stackoverflow.com/questions/638048/how-do-i-sum-the-first-value-in-each-tuple-in-a-list-of-tuples-in-python)

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-01-06T09:33:53.480

使用`zip()`和`sum()`：

```
In [1]: l = [(1, 2), (3, 4), (5, 6), (7, 8), (9, 0)]

In [2]: [sum(x) for x in zip(*l)]
Out[2]: [25, 20] 
```

或者：

```
In [4]: map(sum, zip(*l))
Out[4]: [25, 20] 
```

`timeit`结果：

```
In [16]: l = [(1, 2), (3, 4), (5, 6), (7, 8), (9, 0)]*1000

In [17]: %timeit [sum(x) for x in zip(*l)]
1000 loops, best of 3: 1.46 ms per loop

In [18]: %timeit [sum(x) for x in izip(*l)]       #prefer itertools.izip
1000 loops, best of 3: 1.28 ms per loop

In [19]: %timeit map(sum, zip(*l))
100 loops, best of 3: 1.48 ms per loop

In [20]: %timeit map(sum, izip(*l))                #prefer itertools.izip
1000 loops, best of 3: 1.29 ms per loop 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-24T16:16:57.073

我想在给定的答案中添加一些内容：

如果我有一个dict数组，例如

```
l = [{'quantity': 10, 'price': 5},{'quantity': 6, 'price': 15},{'quantity': 2, 'price': 3},{'quantity': 100, 'price': 2}] 
```

我想获得两个（或更多）计算数量的总和，例如数量和价格*数量的总和

我可以：

```
(total_quantity, total_price) = (
sum(x) for x in zip(*((item['quantity'],
                       item['price'] * item['quantity'])
                      for item in l))) 
```

代替：

```
total_quantity = 0
total_price = 0
for item in l:
     total_quantity += item['quantity']
     total_price += item['price'] * item['quantity'] 
```

也许第一个解决方案可读性较差，但更“pythonesque”:)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-07-07T23:03:25.157

不使用 zip

```
sum(e[0] for e in l), sum(e[1] for e in l) 
```

# asp.net - 事件处理程序序列

> ID：14180872
> 
> 赞同：0
> 
> 时间：2013-01-06T09:33:36.273
> 
> 标签：asp.net

我有一段测试代码来了解事件处理程序的执行顺序。为什么顺序是这样的？：

1.  `Button1_Init`
2.  `Page_Init`
3.  `Page_Load`
4.  `Button1_Load`
5.  `Page_PreRender`
6.  `Button1_PreRender`
7.  `Button1_Unload`
8.  `Page_Unload`

例如，为什么是`Button1_Init`before `Page_Init`，但是`Page_Load`是 before `Button1_Load`？

测试代码：

```
public partial class WebForm1 : System.Web.UI.Page
    {

        protected void Page_Init(object sender, EventArgs e)
        {

        }

        protected void Page_Load(object sender, EventArgs e)
        {

        }

        protected void Page_PreRender(object sender, EventArgs e)
        {

        }

        protected void Page_Disposed(object sender, EventArgs e)
        {

        }

        protected void Page_Unload(object sender, EventArgs e)
        {

        }

        protected void Button1_Init(object sender, EventArgs e)
        {

        }

        protected void Button1_Load(object sender, EventArgs e)
        {

        }

        protected void Button1_PreRender(object sender, EventArgs e)
        {

        }

        protected void Button1_Disposed(object sender, EventArgs e)
        {

        }

        protected void Button1_Unload(object sender, EventArgs e)
        {

        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T11:31:52.803

1.  当所有控件都将被初始化时，Page_Init 会被触发，以确保在页面将添加/使用它们之前初始化所有控件，否则将发生空引用。

2.  这次页面需要设置控件的各种属性，这就是为什么首先触发页面加载然后触发按钮加载的原因。

预渲染也会发生同样的事情。

另一个提示：userControl 中的 Preinit 不可用。它仅在页面中可用，因为控件尚不存在。

# javascript - Knockout.js - 传递参数

> ID：14180876
> 
> 赞同：9
> 
> 时间：2013-01-06T09:34:07.740
> 
> 标签：javascript, knockout.js

我对 Knockout.js 有疑问。我想将用户名传递给一个函数并在警报时显示它。奇怪的事情正在发生。每次我用正确的用户名刷新页面时都会收到警报，但是在我单击它后我没有得到任何响应。这里有什么问题？这是我的代码：

```
<ul data-bind="foreach: contacts">
   <li class="user-box"><span class="user-box-name" data-bind="text: username, click: $root.userClick(username)"></span>
   </li>
</ul> 
```

和

```
self.userClick = function (x) {
    alert(x);
} 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-06T09:40:37.203

`click`绑定接受单击控件时要调用的回调函数。

但是，在您的示例中，您正在调用该函数。因此，每次加载页面时都会发生这种情况，加载绑定并在编写函数时调用您的函数。你需要将它包装在一个函数中，这样它就不会被那样调用。

```
<span class="user-box-name"
      data-bind="text: username, click: function () { $root.userClick(username); }">
</span> 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-06T09:47:53.503

Knockout 将正确的对象传递给事件处理程序。这样做：

```
<ul data-bind="foreach: contacts">
   <li class="user-box">
     <span 
       class="user-box-name" 
       data-bind="text: username, click: $root.userClick"
     ></span>
   </li>
</ul> 
```

和

```
self.userClick: function (obj, event) {
    alert(obj.username);
} 
```

# javascript - 单击输入文本框的选择后如何获取插入符号的位置？

> ID：14180877
> 
> 赞同：-1
> 
> 时间：2013-01-06T09:34:08.437
> 
> 标签：javascript, jquery, html, css

我有一个输入框，里面选择了文本。

当我在选择区域内单击时，我想接收插入符号的位置。

我看到的唯一可能有用的属性是选择开始属性，但由于选定的输入框，它始终为 0。

如何接收点击的插入位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T14:59:06.140

您可以在文本框内单击时获得插入符号的位置，但由于所选文本不是 DOM 节点，因此您无法在所选部分上分配单击事件。如果您只想单击插入符号位置，这将对您有所帮助。

```
 function GetCaretPosition(ctrl) {
        var CaretPos = 0; // IE Support
    if (document.selection) {
            ctrl.focus();
            var Sel = document.selection.createRange();
            Sel.moveStart('character', - ctrl.value.length);
            CaretPos = Sel.text.length;
        }
        // Firefox support
        else if (ctrl.selectionStart || ctrl.selectionStart == '0') CaretPos = ctrl.selectionStart;
        return (CaretPos);
    }

$(document).ready(function(e) {
    $('.textBox').click(function(e) {
        alert(GetCaretPosition(this));
    });
}); 
```

检查[http://jsfiddle.net/thvd5/](http://jsfiddle.net/thvd5/)

# android - 是否可以在 Universal-image-loader 的帮助下使用 Contacts api v3 检索联系人的图像？

> ID：14180878
> 
> 赞同：1
> 
> 时间：2013-01-06T09:34:15.440
> 
> 标签：android, gdata-api, universal-image-loader

现在我正在使用以下代码检索图像，它运行良好。但我想使用 . 实现缓存`universal-image-loader`。我已经在我的其他项目中实现了它，其中我有完整的图像 url，如 ~\images\pic1。 jpeg 。另一方面，在使用 Contacts api v3 时，我必须处理输入流，而且我没有如此完整的 url。所以我不知道如何实现`universal-image-loader`。

供参考：[联系 api v3](https://developers.google.com/google-apps/contacts/v3/#contact_photo_management)

这是我现在正在使用的代码：

```
 Bitmap bm=BitmapFactory.decodeResource(HomeActivity.this.getResources(),
            R.drawable.profile_pic);
    CONSTANTS.buffer = new byte[4096];

// iterate the loop upto number of contacts
    for(int i=0;i<CONSTANTS.contactArrayList.size();i++)
    {

//if the contact has any profile pic then retrieve it otherwise set default profile pic from drawable folder

    if(CONSTANTS.contactArrayList.get(i).getContactPhotoLink().getEtag()!=null)
        {
            try
            {
                GDataRequest request = CONSTANTS.mContactService.createLinkQueryRequest(CONSTANTS.contactArrayList.get(i).getContactPhotoLink());
                  request.execute();
                  InputStream in = request.getResponseStream();
                  CONSTANTS.buffer = ByteStreams.toByteArray(in);
                  bm = BitmapFactory.decodeByteArray(CONSTANTS.buffer, 0, CONSTANTS.buffer.length);
                  in.close();
                  request.end();
            }
            catch (Exception e) {
                UTILS.Log_e("loadProfilePics error", e.toString());
            }

        }
        else
        {
            bm = BitmapFactory.decodeResource(HomeActivity.this.getResources(),
                    R.drawable.profile_pic);
        }
         CONSTANTS.contactArrayList.get(i).setContactPhoto(bm);
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T10:12:29.233

是的，`universal-image-loader`允许您这样做。只需按照以下步骤操作：

1.  可以引入自己的url类型，例如`contacts-api-v3://user_id=<user_id>`
2.  提供一种检索`InputStream`此类 url 的方法：

    ```
    public class CustomImageDownloader extends URLConnectionImageDownloader {
        @Override
        protected InputStream getStreamFromOtherSource(URI imageUri) throws IOException {
            if (imageUri.getScheme().equals("contacts-api-v3")) {
                // here you can use code provided in your question
                return retriveInputStreamForThisUser();
            }
            return null;
        }
    } 
    ```

3.  配置`ImageLoader`为使用您的`CustomImageDownloader`：

    ```
    final ImageLoaderConfiguration.Builder builder = new ImageLoaderConfiguration.Builder(context);

    // some basic configuration should be here

    builder.imageDownloader(new CustomImageDownloader()); 
    ```

4.  现在你可以这样使用它：

    ```
    ImageLoader.getInstance().displayImage("contacts-api-v3://user_id=123", imageView); 
    ```

# python - 来自导入的未定义变量：GObject

> ID：14180879
> 
> 赞同：3
> 
> 时间：2013-01-06T09:34:15.430
> 
> 标签：python, ubuntu-12.04

我正在尝试在 ubuntu 12.04 上的 Eclipse Helios 中使用 PyDev 2.7.1 构建 GTK+ 应用程序。但是 Python 找不到类 gobject.GObject。我安装了我能找到的任何 gobject 库并尝试了几个外部库路径，就像这些 post [pydev issue with gobject](https://stackoverflow.com/questions/2106349/pydev-issue-with-gobject)和[How to resolve these unresolved imports in PyDev (eclipse)?](https://stackoverflow.com/questions/11098483/how-to-resolve-these-unresolved-imports-in-pydev-eclipse) .

但到目前为止一切正常。有谁知道解决方法/解决方案？

问候CK

```
 import pygtk
  pygtk.require("2.0")
  import gobject

  class MyClass(gobject.GObject):
  ... 
```

进口

```
 from gi.repository import GObject 
```

不工作。

我还在 Eclipse 中的 PYTHONPATH 中添加了 /usr/lib/pyshared/python2.7，其中 gtk-2.0、gi 和 gobject 模块位于其中，但没有任何区别。

我也为解释器添加了一个强制内置的 gi，但没有效果。

这里报告了一个错误[http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=649861](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=649861)，但自 pygobject 3.0.2-4 以来它已得到解决。我的 python-gobject 版本是 3.2.2-1

导入适用于在 PyDev 和终端中执行的测试脚本：

```
from gi.repository import GObject, Gtk

class Test(GObject.GObject):
    def __init__(self):
        GObject.GObject.__init__(self)
        print ("test")

    def main(self):
        print ("Import has worked")

print (__name__)
if __name__ == '__main__':    
    test = Test()
    test.main() 
```

当我将此应用于 MyClass(GObject.GObject) 类时，出现以下错误：

*ImportError: could not import gobject (error was: ImportError('When using gi.repository you must not import static modules like "gobject". Please change all of "import gobject" to "from gi.repository import GObject".', ))*

没有`import gobject`，只有`from gi.repository import GObject`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T15:47:08.823

我终于找到了。

```
import gobject

class MyClass(gobject.GObject):

def __init__(self, channelstrip, name, s_type, mainWin):
    gobject.GObject.__init__(self) 
```

# c# - 将大数分配给 BigInteger 时出错

> ID：14180880
> 
> 赞同：6
> 
> 时间：2013-01-06T09:34:18.683
> 
> 标签：c#, biginteger

试图`BigInteger`在 C# 中为 a 分配一个大数字

```
 BigInteger number= 27419669081321110693270343633073797; 
```

但它显示错误：

> *积分常数太大*

我认为这`BigInteger`和我的 RAM 一样大，所以我怎样才能将这个数字移到`BigInteger`?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-06T09:41:02.963

我认为您可以使用`BigInteger.Parse(String)`. 在不太了解 C# 的情况下，我认为作业的正确部分是错误的。数字太大了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T09:54:02.737

我检查了我的 VS 并解析成功。尝试通过这种方法解析：

```
BigInteger mybigint;
bool checkparse=BigInteger.TryParse("27419669081321110693270343633073797",out  mybigint);
if(checkparse==false)
   //You can't parse this string
else
   //string parsed 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T09:54:34.203

该`BigInteger`类型是一个不可变类型，表示一个任意大的整数，其值**在理论上**没有上限或下限。

正如[Burkhard](https://stackoverflow.com/a/14180920/447156)和[Hank](https://stackoverflow.com/a/14180925/447156)所说，您应该[`BigInteger.Parse()`](http://msdn.microsoft.com/en-us/library/dd268285.aspx)为此使用方法。

```
BigInteger number= BigInteger.Parse("27419669081321110693270343633073797"); 
```

也不要忘记；

> 如果您使用该`Parse()`方法来往返该方法`BigInteger`输出的值的字符串表示形式`ToString`，则应使用`BigInteger.ToString(String)`带有“R”格式说明符的方法来生成该`BigInteger` 值的字符串表示形式。否则，字符串表示形式`BigInteger` 仅保留原始值的**50 个**最高有效位，并且当您使用 Parse 方法恢复该 `BigInteger`值时，数据可能会丢失。

# c++ - 第一个元素在插入排序期间未排序

> ID：14180881
> 
> 赞同：1
> 
> 时间：2013-01-06T09:35:07.753
> 
> 标签：c++

```
#include <stdio.h>
#include <conio.h>

int main() 
{

    int a[6] = {5,2,4,6,1,3};
    int j,i,k,cnt=1;
    for (j=1;j<7;j++)
    {
        k = a[j];
        i = j-1;
        while(i>0 && a[i]>k)
        {
            a[i+1] = a[i];
            i = i-1;
        }
        a[i+1] = k;
    }
    for(i=0;i<6;i++) 
    {
        printf("\n Final op %d",a[i]);
    }
    getch();
} 
```

我在静态数组中传递一些元素，但第一个元素是值

`a[0]`没有得到排序，但其余的值 from`a[1]`得到`a[5]`排序

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T09:40:42.460

问题是`>0`在

```
while(i>0 
```

这应该读

```
while(i>=0 
```

此外，还有未定义的行为

```
 k = a[j]; 
```

当`j==6`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T09:40:01.060

```
while(i>-1 && a[i]>k)
        {
           a[i+1] = a[i];
           i = i-1;
        } 
```

仅进行此更改，您的插入排序将完美运行。

它没有得到排序，因为数组从 a[0] n 开始，当它在 a[0] 时，你的 while 被终止，所以不访问它的元素。

希望对你有帮助

# facebook - Facebook 是否提供一种在用户登录 facebook.com 时显示其登录页面的方式？

> ID：14180886
> 
> 赞同：0
> 
> 时间：2013-01-06T09:35:58.547
> 
> 标签：facebook, login, facebook-login

很抱歉问这个问题，但浏览 Facebook 文档我找不到任何线索。

当用户登录到 facebook.com 时，Facebook 是否提供了一种使用用户名文本框显示其登录页面的方法？因此，用户将能够选择另一个帐户。

**编辑**

我想添加到站点/应用程序的功能是使用户能够从不同的 Facebook 帐户中进行选择。

谢谢宜兰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T10:51:42.837

好吧，我不太确定，但可以这样想，当一个人使用 Facebook 注册到您的网站时，该网站会存储他的电子邮件地址并使用 Facebook 验证该电子邮件地址。现在，当您允许用户使用 Facebook 自行注册时，您可以这样做：首先要求用户输入电子邮件地址，然后尝试使用该电子邮件地址对 Facebook 进行身份验证。这样用户将有机会选择他首选的 Facebook 帐户。请注意，如果您直接使用 facebook 连接按钮，它将使用打开的 facebook 帐户登录您。因此请使用电子邮件地址进行身份验证。

# css - SASS Compass 生成一个 0 KB 的文件

> ID：14180889
> 
> 赞同：0
> 
> 时间：2013-01-06T09:36:25.083
> 
> 标签：css, sass, compass-sass

我是一名网页设计师，我正在使用 SASS 开发一组结构化的 CSS 文件。我使用 Compass 将我的 .scss 文件编译成最终的 .css 文件。

一切正常，直到今天我做了很多更改后，结果 CSS 文件什么都没有。换句话说，Compass 成功编译了 SASS，但生成了一个 0 KB 大小的文件。

指南针命令行不显示任何错误。

如何通过 Compass 调试 SASS？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T09:41:49.673

你是如何编译指南针的？通过指南针应用程序还是通过命令行？您可以在 config.rb 文件中设置配置选项。您也可以从命令行发出也可以`compass compile <myProject> --debug-info`。希望这可以帮助！

```
sass_options = {
    :debug_info => true
} 
```

# javascript - 动态json值存储

> ID：14180898
> 
> 赞同：0
> 
> 时间：2013-01-06T09:38:43.433
> 
> 标签：javascript, json, jquery, getjson

形成一个 php 页面，我正在使用 json 发送一些值。

```
$result = mysql_query("SELECT * FROM user_info");

    $i=1;
    while($row = mysql_fetch_array($result, MYSQL_NUM)) {
        if(is_array($row) && count($row)>0) 
        {
            $res['user_name'.$i]         = $row[1];
            $res['user_email'.$i]           = $row[2];
            $res['gender'.$i]           = $row[4];
            $res['i']                   = $i;
            $i++;
        }
    }

echo json_encode($res); 
```

我对这段代码没有问题。但是在另一个页面中，我想获取该数据代码如下

```
 $.post(urlName, function(data) {
    var obj = jQuery.parseJSON ( data );
    $noOfUser   = obj.i;
    alert("No of user- "+$noOfUser);

    for($i=0;$i<=$noOfUser;$i++)
    {
    $user_name = obj.user_name+$i;
    $user_emai = obj.user_email+$i;
    $gender    = obj.gender+$i;

    alert("User Name- "+$user_name);
    alert("User Email- "+$user_emai);
    alert("User Gender- "+$gender);
    }
    }); 
```

但问题是当我添加这个`obj.user_name+$i`而不是简单`obj.user_name`时，它无法正确检索数据，但我需要获取这些值如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T09:44:45.580

您正在尝试做的尝试获取 的`user_name`成员`obj`并附加 的值`$i`。由于`user_name`未定义，因此脚本失败。

这是因为在 javascript 中要使用动态生成的密钥访问对象的成员，您必须使用`[]`访问器，因此在您的情况下，以下示例应该可以工作。

```
$user_name = obj['user_name' + $i]; 
```

# java - Java线程卡住了通知调用

> ID：14180902
> 
> 赞同：3
> 
> 时间：2013-01-06T09:39:43.463
> 
> 标签：java, multithreading, wait, notify

我被这段代码困住了，我认为我错过了一些非常重要的东西。当线程运行时，我可以向向量添加消息，但是当它调用通知时，似乎`getNextMessageFromQueue()`保持等待。

我是否锁定了*消息*变量？

谢谢你的帮助。

我的调度程序类将所有消息发送给我的客户：

```
private Vector<Message> messages = new Vector<Message>(); 

public synchronized void addMessage(Message message) {
    messages.add(message);
    notify(); 
}

private synchronized Message getNextMessageFromQueue() throws InterruptedException { 
    while (messages.size() < 1) {
        wait(); 
    }

    Message message = (Message) messages.get(0); 
    messages.removeElementAt(0);

    return message; 
}

private void sendMessageToAllClients(Message message) {     
    for (int i=0; i < clients.size(); i++) { 
        Client client = (Client) clients.get(i); 
        client.sendMessage(message); 
    } 
}

public void run() { 
    try { 
        while (true) { 
            Message message = getNextMessageFromQueue(); 
            sendMessageToAllClients(message); 
        } 
    } catch (InterruptedException ie) {
        ie.printStackTrace();
    } 
} 
```

这里是客户端类：

```
private Socket socket;

private ObjectOutputStream out;
private ObjectInputStream in;

public Client(Socket s) throws IOException {
    socket = s;

    out = new ObjectOutputStream(socket.getOutputStream());
    in = new ObjectInputStream(socket.getInputStream());
}

public Socket getSocket() {
    return socket;
}

public void sendMessage(Message message) { 
    try {
        out.writeObject(message);
        out.flush();
    } catch (IOException e) {
        e.printStackTrace();
    }           
} 
```

这是 的主要调用`addMessage`：

```
Message message = new Message();
message.setMessage("Welcome to " + client.getSocket().getLocalAddress() + ":" + client.getSocket().getPort());

dispatcher.addMessage(message); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T13:49:28.317

我认为您在`in = new ObjectInputStream(socket.getInputStream());` 删除它时有一个错误，如果没有必要或以其他方式重建。阅读此[Java 套接字：程序在 socket.getInputStream() 处停止而没有错误？](https://stackoverflow.com/questions/8186135/java-sockets-program-stops-at-socket-getinputstream-w-o-error)

要了解您的 inputData 是否为空，请使用 socket.getInputStream().available()，它返回输入字节的大小。

# c - C中奇怪的int输出

> ID：14180903
> 
> 赞同：2
> 
> 时间：2013-01-06T09:39:46.440
> 
> 标签：c, printf

我正在使用 OpenCV，我需要将 Iplimage->ID 转换为 char[]，以便我可以使用 TCP 发送它，然后在服务器上将其重新转换为 int。

这是 Iplimage 标头：

```
typedef struct _IplImage
{
    int  nSize;
    int  ID;  //<--- ID of type INT
    int  nChannels;
    int  alphaChannel;
    int  depth;
    char colorModel[4];
    char channelSeq[4];
    int  dataOrder;
    int  origin;
    int  align;
    int  width;
    int  height;
    struct _IplROI *roi;
    struct _IplImage *maskROI;
    void  *imageId;
    struct _IplTileInfo *tileInfo;
    int  imageSize;
    char *imageData;
    int  widthStep;
    int  BorderMode[4];
    int  BorderConst[4];
    char *imageDataOrigin;
}
IplImage; 
```

这是我的代码：

```
char IDbuffer[10];
snprintf(IDbuffer,10,"%e",frame->ID);//where frame is of type IplImage*
printf("frame->ID= %a\n",IDbuffer); 
```

这就是我打印出来的：

> 框架->ID = 0x0.0000000037d0cp-1022

甚至尝试

```
printf("frame->ID= %a\n",frame->ID); 
```

给我同样的输出。

这是整数格式吗？？如果是的话，我怎么能将这种格式的 char * 转换为 int？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T09:44:18.860

使用`%d`格式说明符，因为`frame->ID`它是一个整数：

```
snprintf(IDbuffer,10,"%d",frame->ID); 
```

然后使用`%s`格式说明符打印缓冲区：

```
printf("frame->ID= %s\n",IDbuffer); 
```

[在printf](http://linux.die.net/man/3/printf)手册页中有更多关于格式说明符的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T09:43:25.197

`%e`格式说明符需要一个类型的参数`double`，而您传递的是一个`int`。结果行为是未定义的。这里的所有都是它的。

通过使用`%e`，您承诺`snprintf`. 你保证你会`double`在相应的位置提供一个论据。稍后，您通过提供`int`而不是来破坏该承诺`double`，这会导致毫无意义的结果。你基本上是在`snprintf`撒谎`frame->ID`。

`%a`也需要`double`论证。为什么你坚持使用`double`带`int`参数的格式说明符？你希望这如何工作？

要么提供正确类型的参数（即`double`），要么使用正确的格式说明符（即`%d`for `int`）。不管是这个还是那个。像你这样把事情混在一起不会有任何成就。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T09:43:46.007

您需要`ID`在打印之前强制加倍：

```
snprintf(IDbuffer,10,"%e", (double)frame->ID); 
```

或者，您可以将其打印为整数：

```
snprintf(IDbuffer,10,"%d", frame->ID) 
```

检查此以获取有关[snprintf的更多信息](http://www.cplusplus.com/reference/cstdio/printf/)

# shell - 以编程方式取消引用/解析 bash 中的别名

> ID：14180906
> 
> 赞同：1
> 
> 时间：2013-01-06T09:40:03.790
> 
> 标签：shell, scripting, bash

我需要以编程方式确定 shell 别名在 bash 中解析为哪个命令；即，我需要编写一个 bash 函数，该函数将采用可能引用别名的名称并返回它最终引用的“真实”命令，并**在适用的情况下通过别名链递归。**

例如，给定以下别名：

```
alias dir='list -l'
alias list='ls' 
```

我的功能在哪里`dereference_alias`，

```
dereference_alias list    # returns "ls"
dereference_alias dir     # also returns "ls" 
```

是否有一些我不知道的内置函数可以巧妙地做到这一点，还是我应该放弃自己的输出`alias`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-11-17T03:57:35.023

这是我编写的一个版本，它不依赖任何外部命令，并且还处理递归别名而不创建无限循环：

```
# Arguments:
#
#   $1  Command to compact using aliases
#
function command-to-alias()
{
    local alias_key
    local expansion
    local guess

    local command="$1"
    local search_again="x"
    local shortest_guess="$command"

    while [[ "${search_again:-}" ]]; do
        unset search_again
        for alias_key in "${!BASH_ALIASES[@]}"; do
            expansion="${BASH_ALIASES[$alias_key]}"
            guess="${command/#"$expansion"/$alias_key}"
            test "${#guess}" -lt "${#shortest_guess}" || continue
            shortest_guess="$guess"
            search_again="x"
        done
        command="$shortest_guess"
    done

    echo "$command"
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T09:40:03.790

这是我的做法，但我不确定这是最好的方法：

```
dereference_alias () {
  # recursively expand alias, dropping arguments
  # output == input if no alias matches
  local p
  local a="$1"
  if [[ "alias" -eq $(type -t $a) ]] && p=$(alias "$a" 2>&-); then
    dereference_alias $(sed -re "s/alias "$a"='(\S+).*'$/\1/" <<< "$p")
  else
    echo $a
  fi
} 
```

这里的主要缺点是我依赖`sed`，并且我在别名中删除任何参数的方法在第一个空格处停止，期望别名永远不会指向由于某种原因在其名称中包含空格的程序（即`alias badprogram='A\ Very\ Bad\ Program --some-argument'`） ，这是一个*足够*合理的假设，但仍然如此。我认为至少整个`sed`部分可以被一些利用 bash 自己的命令行解析/拆分/标记化的东西代替，但我不知道从哪里开始。

# java - Java 程序在 Windows 上运行时不显示 Unicode 字符

> ID：14180907
> 
> 赞同：2
> 
> 时间：2013-01-06T09:40:03.603
> 
> 标签：java, windows, macos, swing

当我的 Java 程序在别人的笔记本电脑（Windows）上运行时，没有出现 unicode 字符有什么原因吗？

我在我的 Mac 上用 Java (Swing) 编写了一个国际象棋程序。每个棋子都由该棋子的 unicode 字符表示。棋盘显示为一个按钮网格，每个按钮的文本都设置为国际象棋 unicode 字符。

在我的 Mac 上它运行良好，但我的朋友（使用 Windows）说，尽管出现了按钮网格，但他看不到任何国际象棋字符。幸运的是，我将每个按钮的工具提示设置为它所代表的棋子的名称，这使他能够测试游戏，但是我相信你明白必须将鼠标悬停在每个方块上方才能知道什么是耗时的. 尽管如此，它确实表明我的程序运行良好，只是没有显示任何 unicode。

我可以对我的程序或他笔记本电脑上的朋友设置做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T11:14:47.267

此[示例](https://stackoverflow.com/a/2562685/230513)的此[变体](https://stackoverflow.com/a/2563350/230513)在Windows 7 上使用默认的 family可以正常工作，其中包含所需的字形。`Font``Font.SANS_SERIF`

```
static Font font = new Font(Font.SANS_SERIF, Font.PLAIN, 72); 
```

![在此处输入图像描述](../Images/319a3822b668849b776e55f33a5ddfe4.png)

相反，您已将;设置`name`为 `null`结果，“`Font`返回的 new 的逻辑字体名称`getName()`设置为 name `Default`。”

# matlab - 在对数刻度上绘制趋势线

> ID：14180910
> 
> 赞同：1
> 
> 时间：2013-01-06T09:40:08.133
> 
> 标签：matlab, trendline

我正在尝试将趋势线添加到`semilogx`绘图中，但无法成功。我想要 和 之间的趋势线`y(17)`，`y(20)`但它没有绘制为直线。

这是我的代码：

```
%// Define equation.
x = [90868 68151 45434 34076 27261 13631 6816 3408 2273 1948 1705 1137 853 683 569 455 342 274 228 190]; 
y = [3680 3723 3800 3866 3920 4103 4250 4320 4340 4344 4350 4364 4373 4379 4384 4393 4398 4402 4405 4407];

%// Plot it
semilogx(x,y, 'bo-', 'LineWidth', 3); 
grid on; 

%// Enlarge figure to full screen.
set(gcf, 'units','normalized','outerposition',[0 0 1 1]);

%// Give a name to the title bar. 
set(gcf,'name','Demo by ImageAnalyst','numbertitle','off')

%// Fit the y data range with a line (limitedRange).
limitedRange = 17:20;
coeffs = polyfit(x(limitedRange), y(limitedRange), 1);
xFitting = linspace(200, 90000, 50);
yFitted = polyval(coeffs, xFitting);

%// Plot the fitted line over the specified range.
hold on;
plot(xFitting, yFitted, 'ro-', 'LineWidth', 2);
legend('Original Data', 'Line Fit'); 
```

如何使趋势线显示为一条线？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T11:40:03.257

这里不应该有任何抱怨`polyfit`，它有效。

这是你的情节：

![在此处输入图像描述](../Images/80044c5c8d0389d119d0351ed6211b0f.png)

一切都说得通。你的线扭曲的原因是你的 x 轴有一个对数刻度（如果你在对数 x 刻度上绘制一条线，你会看到它是一条曲线）。`*ax*+*b*``*a*log*x*+*b*`

要将其视为对数 x 轴上的一条线，您需要引入适当的“反向”失真。在您的情况下，趋势线应该像这样计算：

```
limitedRange = 17:20;
coeffs = polyfit(log10(x(limitedRange)), y(limitedRange), 1); %// Note the log10
xFitting = linspace(200, 90000, 50);
yFitted = polyval(coeffs, log10(xFitting));                   %// Note the log10 
```

这还不是全部。在对数刻度中，低 x 坐标的间距往往更大，趋势线圆圈在 x 轴的较高值处会更密集。为了否定这一点，您需要`xFitting`在线性刻度上以指数间隔排列点，以便它们在对数刻度上呈线性间隔，例如：

```
xFitting = 10 .^ (1:.1:5); 
```

或使用内置[`logspace`](http://www.mathworks.com/help/matlab/ref/logspace.html)函数：

```
xFitting = logspace(1, 5, 50); 
```

计算趋势线的最终代码应该是：

```
limitedRange = 17:20;
coeffs = polyfit(log10(x(limitedRange)), y(limitedRange), 1);
xFitting = logspace(1, 5, 50);
yFitted = polyval(coeffs, log10(xFitting)); 
```

这应该给你以下情节：

![在此处输入图像描述](../Images/c94bf2c3534454e938a526820f911320.png)

同样，请记住，这是一个对数刻度！

希望这可以帮助 ：）

# graphviz - 我怎样才能让盒子在同一行？

> ID：14180911
> 
> 赞同：2
> 
> 时间：2013-01-06T09:40:07.157
> 
> 标签：graphviz

我已阅读此链接->[在 Graphviz（或替代方案）中将“主线”节点强制为直线](https://stackoverflow.com/questions/4671238/forcing-main-line-nodes-into-a-straight-line-in-graphviz-or-alternatives/4671684#4671684)

尽管使用了这个 - 我无法做到这一点。我做错了什么？

*   为什么当我将权重与2号相同时，节点号3不在同一级别=高度？为什么节点 5 与使用相同权重的 no 4 不在同一级别=高度？

*   是否有任何理由与框 1 和 4 具有相同的左边距

谢谢！

F

```
<graphviz>

digraph MMM8
{
rankdir=LR

node [shape=box,  width="0.8", height="0.5", fontsize="10"];
edge [weight=2]
      1, 2, 3, 6, 7;
edge [weight=1]
      4, 5, Nod1,  8;

 node [shape = box];
        1 [label = "111111111111"];
        2 [label = "2"];
        3 [label = "3"];
        4 [label = "4"];
        5 [label = "5"];
        6 [label = "6"];
        7 [label = "7"];
        8 [label = "7"];
        9 [label = "9"];
Nod1 [label="N1", shape=diamond,style=filled,label="",height=.1,width=.1] ;
{
1-> 2[label="C1"]
2-> 3
3 -> Nod1 
4->Nod1
Nod1->5 
5->6 
6-> 7
5->8
8-> 9
9-> 7

 {
rank = same;
1, 4
}
{
rank = same;
6,8
}

}
</graphviz> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T20:19:33.930

您必须创建一个子组，`rank=same`并在子组中包含您想要内联的每个节点。

```
digraph MMM8
{
    rankdir=LR
    node [shape=box,  width="0.8", height="0.5", fontsize="10"];

    node [shape = box];
    {
        rank=same;
        1 [label = "111111111111"];
        2 [label = "2"];
        3 [label = "3"];
        6 [label = "6"];
        7 [label = "7"];
    }
    {
        rank=same;
        4 [label = "4"];
        5 [label = "5"];        
        8 [label = "8"];        
        Nod1 [label="N1", shape=diamond,style=filled,label="",height=.1,width=.1] ;
    }

    9 [label = "9"];

    1-> 2[label="C1"];
    2-> 3;
    3 -> Nod1; 
    4->Nod1;
    Nod1->5; 
    5->6 ;
    6-> 7;
    5->8;
    8-> 9;
    9-> 7;

} 
```

如果您想让所有这些节点对齐，则必须将两个子组合并为一个并将节点 9 移入其中。

# java - 给定代码的时间复杂度。

> ID：14180912
> 
> 赞同：0
> 
> 时间：2013-01-06T09:40:12.247
> 
> 标签：java, performance

下面的代码是找出一个数字在数组中显示的次数。例如：

`1,2,2,2,3,4,5,5,5,5 number 2 = 3 times number 5 = 4 times.`

以下代码在 Java 中的时间复杂度是多少？就时间复杂度而言，解决此问题的最佳方法是什么？

```
public static void main(String[]args)
    {
        int[] data = {1,1,2,3,4,4,4,5,6,7,8,8,8,8};
        System.out.println(count(data,8));

    }

public static int count(int[] a, int x)
{
    int count=0;
    int index=0;
    while(index<a.length)
    {
        if(a[index]==x)
        {
            count++;
        }
        index++;

    }
    return count;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T09:43:05.387

> 是 o(n) ，logN 还是其他？

您查看每个元素一次，因此它是 O(n)

> 如果是 o(n)，我可以通过 LogN 同谋来完成这项任务吗？

使用低值和高值进行二分搜索，搜索的值刚好小于您搜索的值并略高于您搜索的值。这两个结果之间的差异将告诉您有多少。这是一个 O(Log N) 搜索。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T09:42:34.700

`while(index<a.length)`

此循环在 中的每个值运行一次`data`。这是**O(n)**。如果您想在**O(log n)**中执行此操作，您将需要一个排序数组和一个二进制搜索。你有一个排序数组，所以你只需要做一个二进制搜索。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T09:42:43.587

答案是**O(n)**。

您遍历数组，查看每个索引一次。

例如，数组大小是 10 --> 10 次比较，数组大小是 100 --> 100 次比较等等。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-06T09:42:46.310

您检查数组的每个元素，因此您的代码具有`O(n)`时间复杂度。

要及时做到这一点`O(log n)`，您必须利用数组已排序的事实。这可以通过[二进制搜索](http://en.wikipedia.org/wiki/Binary_search_algorithm)的变体来完成。由于这看起来像家庭作业，因此在提供更多提示之前，我会让您考虑一下。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-06T10:17:12.990

O(n)。当代码遍历数组的每个元素时，它的 0(n)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-06T09:44:42.617

**O(n)** 此代码使用数组的每个元素。

```
while(index<a.length) 
```

您可以将其替换为

```
for(int index = 0; index < a.length; i++) 
```

# ios - 如何在 iOS 上嵌入 Cordova WebView

> ID：14180913
> 
> 赞同：1
> 
> 时间：2013-01-06T09:40:25.500
> 
> 标签：ios, cordova

首先，我创建一个 xcode 项目，然后将 Cordova 添加到项目中

我是按照这个教程一步一步做的：[http://docs.phonegap.com/en/2.2.0/guide_cordova-webview_ios.md.html#Embedding%20Cordova%20WebView%20on%20iOS](http://docs.phonegap.com/en/2.2.0/guide_cordova-webview_ios.md.html#Embedding%20Cordova%20WebView%20on%20iOS)

但仍然出现错误

```
Libtool /Users/wanyc/Library/Developer/Xcode/DerivedData/TestCordova-bmqmtqdeafhklhbjqbnmochohdoe/Build/Products/Debug-iphonesimulator/libCordova.a normal i386
    cd /Users/wanyc/Downloads/infoviz-ios-master/CordovaLib
    setenv IPHONEOS_DEPLOYMENT_TARGET 5.1
    setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/libtool -static -arch_only i386 -syslibroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk -L/Users/wanyc/Library/Developer/Xcode/DerivedData/TestCordova-bmqmtqdeafhklhbjqbnmochohdoe/Build/Products/Debug-iphonesimulator -filelist /Users/wanyc/Library/Developer/Xcode/DerivedData/TestCordova-bmqmtqdeafhklhbjqbnmochohdoe/Build/Intermediates/CordovaLib.build/Debug-iphonesimulator/CordovaLib.build/Objects-normal/i386/Cordova.LinkFileList -all_load -Obj-C -lsqlite3.0 -o /Users/wanyc/Library/Developer/Xcode/DerivedData/TestCordova-bmqmtqdeafhklhbjqbnmochohdoe/Build/Products/Debug-iphonesimulator/libCordova.a

/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/libtool: unknown option character `O' in: -Obj-C
Usage: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/libtool -static [-] file [...] [-filelist listfile[,dirname]] [-arch_only arch] [-sacLT]
Usage: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/libtool -dynamic [-] file [...] [-filelist listfile[,dirname]] [-arch_only arch] [-o output] [-install_name name] [-compatibility_version #] [-current_version #] [-seg1addr 0x#] [-segs_read_only_addr 0x#] [-segs_read_write_addr 0x#] [-seg_addr_table <filename>] [-seg_addr_table_filename <file_system_path>] [-all_load] [-noall_load]
Command /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/libtool failed with exit code 1 
```

我发现这个错误`'Add -all_load and -Obj-C - for the "Other Linker Flags" value'`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T09:43:52.983

应该是`-ObjC`，不是`-Obj-C`。[这是 Apple 文档中的一个示例。](http://developer.apple.com/library/mac/#qa/qa1490/_index.html)

（另外，请不要显示编译器错误的屏幕截图——它们的大小被调整得太小以至于几乎无法阅读。您可以从错误日志中复制并粘贴文本。）

# c# - 在等待锁定期间睡眠的正确方法

> ID：14180915
> 
> 赞同：2
> 
> 时间：2013-01-06T09:40:35.257
> 
> 标签：c#, asynchronous, windows-runtime, httpclient, async-await

在我的 win8 (winrt, c#) 应用程序中，我需要调用一个具有非常具体限制的 Web API：不再每 2 秒调用一次 Web 服务。

我试图强制执行此限制，如下所示：

```
class Client
{
    const int Delay = 2000;
    HttpClient m_client = new HttpClient();
    int m_ticks = 0;

    public async Task<string> Get(string url)
    {
        // Multiple threads could be calling, I need to protect access to m_ticks:
        string result = null;
        lock (this)
        {
            int ticks = Environment.TickCount - m_ticks;
            if (ticks < Delay)
                await Task.Delay(Delay - ticks);

            result = await m_client.GetStringAsync(url);

            m_ticks = Environment.TickCount;
        }

        return result;
    }
} 
```

这让我陷入了一堵砖墙：

1.  我不能在锁中使用 await 语句。
2.  我不能回退到 WebClient + Thread.Sleep 之类的东西（避免异步废话），因为它在 win8 客户端配置文件中不存在。
3.  我无法避免这种方法是“异步”的，因为这样我就无法等待 GetStringAsync 或 Task.Delay 而不处于异步函数中。
4.  我无法避免锁定，因为多个线程可能正在调用此函数，并且我需要同步访问 m_ticks。

我到底要怎么写这样的东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T02:38:25.763

该[`SemaphoreSlim`](http://msdn.microsoft.com/en-us/library/system.threading.semaphoreslim.aspx)类型在 .NET 4.5 中进行了扩展以包含`await`- 兼容`WaitAsync`方法。它没有`IDisposable`-based `Release`，但构建一个并不难：

```
sealed class SemaphoreSlimReleaser : IDisposable
{
  SemaphoreSlim mutex;
  public SemaphoreSlimReleaser(SemaphoreSlim mutex)
  {
    this.mutex = mutex;
  }

  void Dispose()
  {
    if (mutex == null)
      return;
    mutex.Release();
    mutex = null;
  }
} 
```

然后您可以使用与您已有的非常相似的代码：

```
class Client
{
  const int Delay = 2000;
  HttpClient m_client = new HttpClient();
  int m_ticks = 0;
  SemaphoreSlim mutex = new SemaphoreSlim(1);

  public async Task<string> Get(string url)
  {
    // Multiple threads could be calling, I need to protect access to m_ticks:
    string result = null;
    await mutex.WaitAsync();
    using (new SemaphoreSlimReleaser(mutex))
    {
        int ticks = Environment.TickCount - m_ticks;
        if (ticks < Delay)
            await Task.Delay(Delay - ticks);

        result = await m_client.GetStringAsync(url);

        m_ticks = Environment.TickCount;
    }

    return result;
  }
} 
```

PS 如果你有兴趣，我的 AsyncEx 库有[一整套`async`兼容的同步原语](http://nitoasyncex.codeplex.com/documentation)，灵感来自[Stephen Toub 的博客系列](http://blogs.msdn.com/b/pfxteam/archive/2012/02/11/10266920.aspx)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-06T09:47:45.717

简单的解决方案：

使用并发队列。

[http://msdn.microsoft.com/en-us/library/dd267265.aspx](http://msdn.microsoft.com/en-us/library/dd267265.aspx)

所有使用 Web 服务的请求都将添加到队列中。

您将有一个线程每两秒将一个对象排入队列使用它并返回答案。

# postgresql - 在 PostgreSQL UDF 中调用 clGetPlatformIDs 错误 -1001

> ID：14180919
> 
> 赞同：1
> 
> 时间：2013-01-06T09:40:49.560
> 
> 标签：postgresql, opencl

我正在尝试编写一个将在 PostgreSQL 中执行的 OpenCL 函数。为此，我从我的 OpenCL 代码创建 DLL，并使用用户定义函数机制将其链接到 postgres。在调用 clGetPlatformIDs 之前一切顺利。函数返回错误 -1001，我读到这表明查找 OpenCL 驱动程序有问题。

我尝试将相同的代码（我必须删除一些 postgres 魔法）编译为 exe 并成功运行它 - 所有平台都正确找到，所以我假设我已经正确设置了 SDK 和驱动程序。

我在 Windows 7 x64 上运行 PostgreSQL 9.1。我还在使用带有 Visual Studio 2010 的 Nvidia CUDA SDK 4.2 并在 GeForce GTS 450 上运行我的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T04:16:46.697

这是 MSFT 在 Windows、服务、GPU、安全和设备驱动程序方面的问题。

您无法在 Windows 上将 PostgreSQL 作为服务运行并查看任何 GPU。您正在点击不允许从 Windows 服务访问任何“图形”设备的会话 O 隔离。您可以将 PostgreSQL 作为进程（而不是服务）启动，也可以将服务器放在 Linux 上。

请参阅 [http://www.scribd.com/doc/58343489/Windows-Session-0-Isolation-Impact-on-GPU-as-Service](http://www.scribd.com/doc/58343489/Windows-Session-0-Isolation-Impact-on-GPU-as-Service)

在 Linux 上运行还有其他重要原因，因为如果在超时期限之前未访问屏幕，Windows 将需要重新启动您的 GPU。请参阅 [http://msdn.microsoft.com/en-us/library/windows/hardware/ff570088%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/ff570088%28v=vs.85%29.aspx)

NVida 为 Windows 上的特定 Tesla 卡提供了非图形 GPU 设备驱动程序。这些卡没有任何视频输出。因此它们不被视为图形设备驱动程序。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-06T15:54:31.497

也许库尝试使用一些**环境变量**来定位 SDK ，并且环境没有在 PostegreSQL 上下文中继承。

因此，请尝试从您的两个代码中**转储环境**，并检查您的独立程序中是否有任何 OpenCL/Cuda 变量可用并且在您的 PostegreSQL UDF 中是否缺少。

# java - 杰克逊：将对象视为原始

> ID：14180922
> 
> 赞同：4
> 
> 时间：2013-01-06T09:41:31.563
> 
> 标签：java, jackson

我有一个类，它或多或少是一个围绕双精度的包装类。当我通过杰克逊序列化我的课程时，我会收到类似的信息：{“value”：123.0}。我基本上希望发生的是，杰克逊只给了我 123.0。如果我可以扩展 Number，我的问题将得到解决，但由于我已经在扩展另一个类，所以这不是一个选项。

班级：

```
@JsonIgnoreProperties(ignoreUnknown = true)
@SuppressWarnings("unused")
public class TestValue {
    @JsonProperty
    private final Double d;

    public TestValue(Double d) {
        this.d = d;
    }
} 
```

结果是：

```
{
  "d" : 123.0
} 
```

什么会像预期的那样工作：

```
public class TestValue extends Number {
    private final Double d;

    public TestValue(Double d) {
        this.d = d;
    }

    public double doubleValue() {
        return d;
    }

    public float floatValue() {
        return d.floatValue();
    }

    public int intValue() {
        return d.intValue();
    }

    public long longValue() {
        return d.longValue();
    }

    public String toString() {
        return d.toString();
    }
} 
```

..导致：123.0

但是 - 你知道 - 我已经在扩展另一个抽象类。我怎样才能得到预期的结果？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T10:19:02.327

由于我确信有人可以重用它，我将回答我自己的问题（感谢 Gavin 向我展示的方式）：

```
public class TestValue {
    private final Double d;

    public TestValue(Double d) {
        this.d = d;
    }

    @JsonValue
    public Double getValue() {
        return d;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T09:54:47.563

看来您要自定义序列化，请参见[此处](http://wiki.fasterxml.com/JacksonHowToCustomSerializers)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T10:16:51.567

首先，为 type 创建一个自定义序列化程序`TestValue`。

```
public class TestValueSerializer extends JsonSerializer<TestValue> {
@Override
public void serialize(TestValue value, JsonGenerator gen, SerializerProvider provider) throws IOException,
        JsonProcessingException {
    gen.writeString(value.toString());
} 
```

}

`@JsonSerialize(using=TestValueSerializer.class)`然后在类型之前添加注释`TestValue`。

顺便说一句，即使`TestValue`没有扩展其他类，最好避免从`Number`. 始终谨慎使用实现继承。

# java - BroadcastReceiver & getIntent() 的区别

> ID：14180927
> 
> 赞同：-2
> 
> 时间：2013-01-06T09:42:28.417
> 
> 标签：java, android, android-intent, broadcast

那是一个愚蠢的问题。搜索后得到答案；）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T09:58:39.280

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T10:10:01.273

`getIntent()`用于获取`Intent`启动的`Activity`. 因为`Activity`并不总是需要知道是哪一个`Intent`开始了他。因为例如 a `startActivity`from the`Launcher`没什么特别的。只有`Activity`当他想做一些特别的事情时，他才想明确地知道它。例如“创建电子邮件”而不是转到邮件应用程序。

记住只有 1`Intent`可以启动 1 `Activity`。

A`BroadcastReceiver`是一个在一个或多个 上注册自己的组件`Intents`。如果`Intent`通过 发送/广播`sendBroadcast`，这`BroadcastReceiver`将被启动。因此，`BroadcastReceiver`总是想知道是哪个`Intent`开始了他`WIFI_CONNECTED`，或类似的。据我了解，这就是为什么 上有一个参数`onReceive`，而 a`Activity`只有一个`getIntent()`. （如我错了请纠正我）

记住只有 1`Intent`是发送，并且`BroadcastReceivers`可以启动 0 或更多。（所有注册的都启动）

# python - 使用 django-kombu 的其他替代方法是什么？

> ID：14180944
> 
> 赞同：3
> 
> 时间：2013-01-06T09:44:12.330
> 
> 标签：python, django, celery

我正在将 Django-kombu 与 Celery 一起使用，但在很多地方读到它还没有准备好生产。

基本上，我想使用 Celery 创建一个多主 - 多从架构，并在它们之间传递消息，然后返回到进行调用的主程序。

我不明白 Kombu 适合在那里。为什么不是 RabbitMQ？教程都非常混乱，一个人提出建议，另一个人提出其他建议。

有人可以让我更清楚地了解在处理 Celery + Django 时生产堆栈是什么样的吗？

另外，我必须使用 Dj-Celery 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T12:00:44.417

Kombu 的稳定版本已准备好生产，对于 celery 也是如此。

Kombu 负责消费者、生产者和消息代理之间的整个消息传递，依次是 celery 工作者、webworkers（或更一般的将任务放入队列的脚本）和您正在使用的消息代理。

你需要kombu来运行celery（如果你查看它的设置，它实际上是在要求中）

使用kombu，您可以使用不同的消息代理（rabbitmq，redis ...），因此选择不是使用kombu或rabbitmq，因为它们做不同的事情，而是在kombu和redis或kombu和rabbitmq等之间。

如果你可以使用 redis 作为消息代理，你只需要安装：celery-with-redis 和 django-celery 包

# java - 如何使用 EasyMock 测试写入/读取文件

> ID：14180945
> 
> 赞同：2
> 
> 时间：2013-01-06T09:44:16.427
> 
> 标签：java, unit-testing, testing, junit, easymock

我是初学者，请自己掌握。我需要测试这个方法 - 写入/读取到/从文件。你能得到建议吗？我能做多好，只使用junit测试或更好的EasyMock？你可以推荐做什么？

```
public class AbsFigure {

public void write(String fileName, List<FigureGeneral> figuresList) {
    try {
        PrintWriter out = new PrintWriter(
                new File(fileName).getAbsoluteFile());
        try {
            for (int i = 0; i < figuresList.size(); i++) {
                out.println(figuresList.get(i).toString());
            }
        } finally {
            out.close();
        }
    } catch (IOException e) {
        e.printStackTrace();
        System.out.println("Cannot write to file!");
    }
}

// read from file
private ArrayList<FigureGeneral> figureReader(String fileName) {
    String line = null;
    ArrayList<FigureGeneral> myListFigure = new ArrayList<FigureGeneral>();

    try {
        File myFile = new File(fileName);
        FileReader fileReader = new FileReader(myFile);
        BufferedReader bufferedReader = new BufferedReader(fileReader);

        while ((line = bufferedReader.readLine()) != null) {
            myListFigure.add(fromStringToFigureGeneral(line));
        }
        System.out.println(myListFigure);
        bufferedReader.close();

    } catch (FileNotFoundException e) {
        System.out.println("File which You loking for not found!");
    } catch (NumberFormatException e) {
        e.printStackTrace();
    } catch (IOException e) {
        System.out.println("Wrong input!");
    }

    return myListFigure;
}

// change from String to FigureGeneral(Triangle or Rectangle)
private FigureGeneral fromStringToFigureGeneral(String line) {
    String[] arrayLines = line.split(" ");
    FigureGeneral figures = null;

    if (arrayLines[0].equals("triangle")) {
        figures = new Triangle(Double.parseDouble(arrayLines[1]),
                Double.parseDouble(arrayLines[2]), "triangle");
    } else {
        figures = new Rectangle(Double.parseDouble(arrayLines[1]),
                Double.parseDouble(arrayLines[2]), "rectangle");
    }

    return figures;
}

public void launch(AbsFigure absFigure) {
    List<FigureGeneral> figuresList = absFigure.generateRandomFigures(5);

    AreaCompare areaCompare = new AreaCompare();
    Collections.sort(figuresList, areaCompare);

    absFigure.write("test.txt", figuresList);
    figureReader("test.txt");
}

public static void main(String[] args) {
    AbsFigure absFigure = new AbsFigure();
    absFigure.launch(absFigure);
}
} 
```

我写了更多的代码，你可以更好地理解情况。我希望您可以推荐如何测试它（也许您可以显示两个变体）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T11:06:55.460

通过使用内存 I/O，您可以完全避免使用磁盘 I/O。您不需要 EasyMock，只需不同的输入和输出流。您可以通过检查生成的输出流（写入）和生成的 FigureGeneral 对象列表（读取）来断言您的方法与 JUnit 一起正常工作。

*一步步：*

1) 注入写入方法将使用的输出流。

您可以添加另一个由现有的“write”方法调用的“write”方法，该方法采用具有如下签名的输出流：

```
public void write(OutputStream outputStream, List<FigureGeneral> figuresList); 
```

您原来的 write 方法将通过像这样调用该方法来包装上述方法：

```
write(new FileOutputStream(new File(fileName).getAbsoluteFile()), figuresList); 
```

2) 使用 InputStream 对 read 方法重复上述技巧。

这将为您提供一个带有如下签名的读取方法：

```
private ArrayList<FigureGeneral> figureReader(InputStream inputStream); 
```

3) 现在编写使用 ByteArrayInputStream 和 ByteArrayOutputStream 的 JUnit 测试并调用上述方法。

您可以通过在 ByteArrayOutputStream 上调用 toByteArray() 并断言结果来检查 write 方法的结果。您可以通过在将某个 ByteArrayInputStream 传递给 List 后断言 List 中的值来检查 read 方法的结果。

这是一个（伪）方法，您可以添加到测试类中，以断言可以将不同性质的 FigureGeneral 对象列表写入输出流，从输入流中读回并且相等。

```
public void assertCanBeWrittenAndReaback(List<FigureGeneral> inputFigure) {
  ByteArrayOutputStream outStream = new ByteArrayOutputStream();
  absFigure.write(outStream, inputFigures);
  List<FigureGeneral> outputFigure = absFigure.figureReader(new ByteArrayInputStream(outStream.toByteArray()));
  assertEqualsFigureGeneralLists(inputFigure, outputFigure);
} 
```

4）这会给你一个很好的测试覆盖率。尽管如此，如果您想实现 100% 的测试覆盖率，您仍然必须测试现在已成为包装器的原始 write 和 readFigure 方法。

原始方法只不过是重定向到使用输入和输出流的同名方法。您可以使用 EasyMock 来检查它们的重定向，方法是覆盖（或者如果将这些方法放在接口后面则实现）这两个重定向方法并断言它们接收到正确的 FileInputStream 和 FileOutputStream 对象。不过，您需要一些临时文件，因为 FileOutputStream 构造函数需要一个现有文件。但是，我没有看到在测试用例中使用临时文件有任何重大问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T10:52:53.023

最好只制作一个临时测试文件，然后检查其内容，类似于[这个 SO question](https://stackoverflow.com/questions/7345403/unit-test-best-practice-when-testing-class-that-reads-and-writes-to-the-filesyst)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T08:24:02.703

我向您建议，这是在这种情况下更好的覆盖范围之一：

`setUp()`您在注释中制作临时方法`@Before.`

并在此方法中初始化您需要的所有内容。

您制作了拆卸方法 -`releaseResources()`在 annotation`@After`中，您删除了您的临时文件。

并`@Test`为所有机会情况做出准备，如果测试失败抛出`new RuntimeException():`

```
public class AbsFigureTest {

    public static final String defaultTestPath = "unittest.tmp";
    private List<FigureGeneral> inputFigures;
    private List<FigureGeneral> outputFigures;
    private DeepCompare deepCompare;

    @Before
    public void setUp() throws FigureGeneralFilesFoundException,
            FigureGeneralFormatException {
        inputFigures = absFigure.generateRandomFigures(5);
        absFigure.write(defaultTestPath, inputFigures);
        outputFigures = absFigure.figureReader(defaultTestPath);
        deepCompare = new DeepCompare();
}

    @After
    public void releaseResources() {
        new File(defaultTestPath).delete();
    }

    @Test
    public void assertEquals_FigureGeneralLists_ReturnZero() {
        for (int i = 0; i < inputFigures.size(); i++) {
            FigureGeneral inputValue = inputFigures.get(i);
            FigureGeneral outputValue = outputFigures.get(i);

            if (deepCompare.compare(inputValue, outputValue) != 0)
                throw new RuntimeException("not equal");
        }

    }

    @Test
    public void testDeepCompRectangle_EqualResult_ReturnZero() {
        FigureGeneral oneFigure = new Rectangle(2.0, 2.0, "rectangle");
        FigureGeneral twoFigure = new Rectangle(2.0, 2.0, "rectangle");
        int result = deepCompare.compare(oneFigure, twoFigure);
        assertTrue("expected to be equal", result == 0);
    }

    @Test
    public void testDeepCompTriangle_EqualResult_ReturnZero() {
        FigureGeneral oneFigure = new Triangle(2.0, 2.0, "rectangle");
        FigureGeneral twoFigure = new Triangle(2.0, 2.0, "rectangle");
        int result = deepCompare.compare(oneFigure, twoFigure);
        assertTrue("expected to be equal", result == 0);
    }

    @Test
    public void testDeepComp_GreaterThan_ReturnOne() {
        FigureGeneral oneFigure = new Triangle(2.0, 2.0, "triangle");
        FigureGeneral twoFigure = new Rectangle(1.0, 1.0, "rectangle");
        int result = deepCompare.compare(oneFigure, twoFigure);
        assertTrue("expected to be greater than", result >= 1);

        if (deepCompare.compare(oneFigure, twoFigure) != 0)
            throw new RuntimeException("not equal");
    }
} 
```

# python - 使用结构的 django 部署 - 类型错误：prepare_deployment() 只需要 1 个参数（给定 0）

> ID：14180952
> 
> 赞同：2
> 
> 时间：2013-01-06T09:45:03.387
> 
> 标签：python, django, fabric

我正在使用本指南： http: [//www.jeffknupp.com/blog/2012/02/09/starting-a-django-project-the-right-way/](http://www.jeffknupp.com/blog/2012/02/09/starting-a-django-project-the-right-way/)

设置我的 django 项目。但我被困在部署部分。我在我的 virtualenv 中使用 pip 安装了结构。我在 myproject 目录中创建了这个文件：

```
from fabric.api import local

def prepare_deployment(branch_name):
    local('python manage.py test finance')
    local('git add -p && git commit')
    local('git checkout master && git merge ' + branchname)

from fabric.api import lcd

def deploy():
    with lcd('home/andrius/djcode/myproject/'):
        local('git pull /home/andrius/djcode/dev/')
        local('python manage.py migrate finance')
        local('python manage.py test finance')
        local('/my/command/to/restart/webserver') 
```

但是当我输入这个命令时（如指南所示）：

> 晶圆厂prepare_deployment

我收到此错误：

```
Traceback (most recent call last):
  File "/home/andrius/env/local/lib/python2.7/site-packages/fabric/main.py", line 732, in main
    *args, **kwargs
  File "/home/andrius/env/local/lib/python2.7/site-packages/fabric/tasks.py", line 345, in execute
    results['<local-only>'] = task.run(*args, **new_kwargs)
  File "/home/andrius/env/local/lib/python2.7/site-packages/fabric/tasks.py", line 121, in run
    return self.wrapped(*args, **kwargs)
TypeError: prepare_deployment() takes exactly 1 argument (0 given) 
```

因此，即使它没有在指南中指定输入参数，我想它也需要我的分支名称。所以输入了这个：

> 晶圆厂prepare_deployment v0.1

（v0.1 是我的分支名称）所以现在我收到了这个错误：

```
Warning: Command(s) not found:
    v0.1

Available commands:
    deploy
    prepare_deployment 
```

我还注意到在函数 prepare_deployment 中的文件 fabfile.py 的指南中，输入写为“branch_name”，并且在函数内部有参数“branchname”。所以我认为它应该是相同的并将'branchname'重命名为'branch_name'，但仍然得到相同的错误。

所以我认为我在这里做错了什么。可能是什么问题呢？

更新：我试图在 fabfile.py 中调用函数：

> 准备部署（“v0.1”）

输出是这样的：

```
[localhost] local: python manage.py test finance
Creating test database for alias 'default'...
Got an error creating the test database: permission denied to create database

Type 'yes' if you would like to try deleting the test database 'test_finance', or 'no' to cancel: yes
Destroying old test database 'default'...
Got an error recreating the test database: database "test_finance" does not exist

Fatal error: local() encountered an error (return code 2) while executing 'python manage.py test finance'

Aborting. 
```

我想我还应该提到我的应用程序名称是“金融”作为数据库名称“金融”。也许这些是矛盾的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T12:01:34.507

Fabric 使用特定语法从命令行将参数传递给任务。从 bash shell 你需要使用

```
fab prepare_deployment:v0.1 
```

[您可以在每个任务参数](http://docs.fabfile.org/en/latest/usage/fab.html#per-task-arguments)的结构文档中阅读它。

如果您确实需要在 bash 命令中使用方括号，则需要对它们进行转义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T10:06:20.123

正如你所说，这个功能应该是这样的......

```
def prepare_deployment(branch_name):
    local('python manage.py test finance')
    local('git add -p && git commit')
    local('git checkout master && git merge ' + branch_name) 
```

然后你只需调用...

```
fab prepare_deployment("v0.1") 
```

# html - 停止为一个元素应用 CSS 选择器

> ID：14180953
> 
> 赞同：1
> 
> 时间：2013-01-06T09:45:07.743
> 
> 标签：html, css, css-selectors

我想阻止此 CSS 选择器应用于页面中的所有元素：

```
input {
    color:red;
} 
```

这将使`<input>`每种类型的 s 的文本变为红色，但我想在不更改此 CSS 规则的选择器或样式的情况下从中排除一个输入。元素应该具有默认样式（当页面上没有 css 时的样式）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T09:49:02.110

您可以使用 not 选择器。由于输入字段应该有一个名称，您可以使用以下方法排除它：

```
input:not([name="exludeme"]) { } 
```

此方法不适用于 IE8 及更早版本。要同时支持 ie7 和 ie8，您可以使用属性选择器。在这种情况下，您必须重置该字段：

```
input[name="exludeme"] { /*add all your reset styles here*/ } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-06T09:49:58.567

为不同的人添加一个 id 并仅为他应用它，并确保没有其他 css 会覆盖您选择的 css 使用[!important](http://webdesign.about.com/od/css/f/blcssfaqimportn.htm)

**html**：

```
<div class="box"></div>
<div class="box"></div>
<div class="box"></div>
<div class="box" id="diff"></div> 
```

**CSS**：

```
div.box {
  background-color:red;
  width:50px;
  height:50px;
  position: relative;
}

#diff{
  background-color:black  !important ;
} 
```

检查这个：http: [//jsfiddle.net/y32Wv/](http://jsfiddle.net/y32Wv/)

**注意：** `!important`是可选的，取决于文件中的选择器位置，但在可能被其他 css 规则覆盖的情况下（例如，如果有人更改 css 规则的顺序），它将停止正常工作，并`!important`阻止它正在发生。

# symfony - 移动 symfony2 项目

> ID：14180955
> 
> 赞同：1
> 
> 时间：2013-01-06T09:45:53.847
> 
> 标签：symfony

用 symfony 学习编程是一个进化的过程（对我来说）。所以，我必须做我做过的新事情，或者我必须改变它们。

现在我改变了项目的结构。它不再完整地存在于 web 目录中，它现在存在于我的用户中，并且`'projectname'-> 'User/.../procektname/web'`web 目录中只有一个符号链接。
在此更改之前，我必须在浏览器中使用 启动应用程序`http://localhost/dev_app.php/`，现在是`http:localhost/project/dev_app.php`. 它运行良好。而且我认为，这样我就可以在一台计算机上运行多个 Symfony 项目。

但是当我启动`config.php`并完成配置（数据库和机密）时，`config.php`会将配置数据写入旧路径。为什么？项目搬家后有什么事情要做吗？

PS我认为它比我写的要难。您必须知道，我没有移动我的项目，我已经制作了副本并移动了副本。几分钟前的一个视图，我做了以下事情： 更改原件的名称。现在什么都没有运行！

```
php app/console cache:clear --env=prod --no-debug 
```

以 RuntimeExeption 结尾，我可以看到，它会清除旧路径的缓存！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T18:26:03.727

我手动删除缓存并运行应用程序。至少有一个问题，为什么当我用控制台清除现金时我会得到例外。但我认为这是另一个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-24T23:26:49.433

我遇到的问题与 carp-enter 完全相同。Wouter J 发布了正确的 symfony 链接。我们需要覆盖路径的 getter。之后，它工作得很好。

# jquery - 如何验证单选按钮并将字母数字属性添加到文本框？

> ID：14180956
> 
> 赞同：0
> 
> 时间：2013-01-06T09:45:58.143
> 
> 标签：jquery, jquery-validate

我试过这段代码来验证单选按钮：

```
<html>
<head>
<script src="jquery-1.8.3.js" type="text/javascript">
</script>
<script src="jquery.validate.js" type="text/javascript">
</script>
<script>
$(document).ready(function(){
$("#myform").validate({
rules:{
username:{
required:true,
alphanumeric:true
}
gender:"required",
},
messages:{
username:
{
required:"username cannot be empty",
alphanumeric:"username needs to be alphanumeric"
}
gender:{
required:"specify this field",
}
}
});
});

</script>
<style type="text/css">

label.error
{
color:red;
padding-left:.5em;
}
</style>

</head>
<body>
<form id="myform" action="r.html">
<table>

<tr>
<td><label for="username">Username<em>*</em>:</td></label><td><input type="text"           id="username" name="username"/></td>
</tr>

<tr>
<td><label for="gender" validate="required:true" class="required">Gender<em>*</em>:      </label></td><td><input type="radio" id="gender" name="gender" value="male"/>Male</td>
</tr>
<tr>
<td></td><td><input type="radio" id="gender" name="gender" value="female"/>Female</td>
</tr>

<tr>
<td></td>
<td><input type="submit" value="submit" id="submit"/></td>
</tr>
</table>
</form>
</body>
</html> 
```

当我尝试此代码时，正在验证性别字段，但在性别和男性属性之间出现错误消息..但它必须出现`0.5em`在男性属性之后。

并且字母数字验证根本不起作用。请有人帮帮我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T16:39:11.617

你有很多错误......

* * *

就像[在您的其他问题](https://stackoverflow.com/questions/14171179/how-to-validate-a-login-form-with-jquery)中一样，这不是规则的典型语法......

```
gender:"required", 
```

它应该`required: true`和你的内心`rules: {}`一样...

```
rules: {
    username: {
        required: true,
        alphanumeric: true
    },
    gender: {
        required: true
    }
}, 
```

在您的 HTML 中...

```
<label for="gender" validate="required:true" class="required">Gender<em>*</em>:</label> 
```

`validate="required:true"`完全是多余的，应该删除。

*   这是毫无意义的，因为它是完全捏造的`attribute`。
*   它应用于`label`而不是`input`.

`class="required"`不仅是多余的，因为它应用于 a`label`而不是`input`元素，而且完全是多余的，因为您已经在`.validate()`选项中指定了规则。

使用 jQuery 中定义的规则，HTML 将是：

```
<label for="gender">Gender<em>*</em>:</label> 
```

* * *

要使用该`alphanumeric`规则，您还需要在[此处包含](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)*“其他方法”*文件：

[http://ajax.aspnetcdn.com/ajax/jquery.validate/1.10.0/additional-methods.js](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.10.0/additional-methods.js)

或缩小：

[http://ajax.aspnetcdn.com/ajax/jquery.validate/1.10.0/additional-methods.min.js](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.10.0/additional-methods.min.js)

* * *

您的 HTML 无效。请注意如何`</label>`在`</td>`...

```
<td><label for="username">Username<em>*</em>:</td></label> 
```

应该：

```
<td>
    <label for="username">Username<em>*</em>:</label>
</td> 
```

* * *

至于放置您的错误，我不会首先使用 a`table`来布置表单。尽管如此，您可以使用内置`errorPlacement:`方法放置错误消息。 `error.insertAfter(element)`是默认功能。

使用条件来测试的类型`input`将允许您更改单选按钮的此功能。您可以调整下面的代码以根据需要放置您的消息。

**jQuery`.validate()`方法：**

```
$("#myform").validate({

    // your rules and options,

    errorPlacement: function (error, element) {
        if (element.is('input[type="text"]')) {
            error.insertAfter(element); // placement of errors on text fields
        } else if (element.is('input[type="radio"]')) {
            element.next('.radio-message').html(error);  // placement of errors on radio buttons
        } else {
            error.insertAfter(element);  // default placement
        }
    }
}); 
```

**HTML：**

```
<input type="radio" id="gender" name="gender" value="male" />Male <span class="radio-message"></span> 
```

**工作演示：**

**[http://jsfiddle.net/kP4Xy/](http://jsfiddle.net/kP4Xy/)**

* * *

您还缺少一个逗号（***会****破坏代码*）并且有一些额外的逗号（*可能会破坏 IE 中的代码*）。

同样，**[就像我之前所说](https://stackoverflow.com/a/14175055/594235)的，当您遵循正确的代码缩进和格式时，更容易看到这些错误。** *我强烈建议你这次听我的建议。你会成为一个更好的程序员，你的代码会更容易阅读，你的 HTML 会更有效，你的 JavaScript 会更容易排除故障。*

* * *

**插件文档：**

[http://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)

# ember.js - 如何在 Router v2 中为路由呈现多个模板

> ID：14180958
> 
> 赞同：10
> 
> 时间：2013-01-06T09:46:03.993
> 
> 标签：ember.js

我的索引模板有两个出口，一个用于标题，另一个用于内容。内容中呈现的模板会根据正在查看的内容而变化。

在旧路由器中，这可以通过调用`connectOutlet`拥有该模板的不同控制器来完成。我不知道如何在新路由器中做同样的事情。

有什么建议么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-09T09:13:07.843

通过我的研究，我得出了这样的结论：假设您有一个这样定义的路由器：

```
App.Router.map(function(match) {
  match('/').to('index');
}); 
```

应用模板：

```
<script type="text/x-handlebars">
{{outlet header}}
{{outlet}}
</script> 
```

索引模板：

```
<script type="text/x-handlebars" data-template-name="index">
{{outlet dashboard}}
{{outlet spaces}}
</script> 
```

现在，我们想要的是当用户访问索引路由器时，页面应该：

*   将索引渲染到应用程序模板的主出口和标题出口。
*   将仪表板、空间模板渲染为索引模板。

为此，我们在 indexRoute 中编写以下代码

```
App.IndexRoute = Em.Route.extend({
    renderTemplate: function(controller, model){
        //Render header into header outlet
        this.render('header',{
            outlet:'header'
        });
        //Render index into main outlet. If you comment out 
        //this line, the code below fails
        this.render('index');

        //by using into, we can render into the index template
        //Note: The controller is optional.if not specified,
        //ember picks up controller for the given template.
        this.render('dashboard',{
            outlet:'dashboard',
            into:'index',
            controller:this.controllerFor('somethingElse', App.TestModel.find())
        });
        //controller is SpacesController
        this.render('spaces',{
            outlet:'spaces',
            into:'index'
        });
    }
}); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-06T10:36:20.947

您可以使用路由器中的 renderTemplates 函数来渲染多个视图以命名插座：

```
renderTemplates:function () {
   this.render('todos_list', {
       into:'todos', //template name
       outlet: 'todos', //named outlet
       controller: 'listController' //controller you want to use
   });
   this.render('todos_test', {
       into:'todos',
       outlet: 'test',
       controller: 'testController'
   });
},

setupControllers:function (controller, model) {
   this.controllerFor('list').set('content', listmodel.find());
   this.controllerFor('test').set('content', testmodel.find());
} 
```

setupControllerControllerFor 函数将允许您分配我们在前一个路由器中设置为“上下文”的内容。

在您的模板中，您可以像以前一样命名网点：

```
{{outlet list}}
{{outlet test}} 
```

希望这可以帮助 ：）

# django - Django 1.4 消息框架

> ID：14180963
> 
> 赞同：0
> 
> 时间：2013-01-06T09:46:45.413
> 
> 标签：django, django-views, django-messages

开发服务器使用 django1.3，但部署服务器由 django1.4 提供支持。消息框架在 django1.4 上根本不起作用，但在 1.3 上用以下代码工作得很好。

设置.py

```
 MIDDLEWARE_CLASSES = (
        'django.middleware.common.CommonMiddleware',
        'django.contrib.sessions.middleware.SessionMiddleware',
        'django.middleware.csrf.CsrfViewMiddleware',
        'django.contrib.auth.middleware.AuthenticationMiddleware',
        'django.contrib.messages.middleware.MessageMiddleware',
    )
    INSTALLED_APPS = (
        'django.contrib.auth',
        'django.contrib.contenttypes',
        'django.contrib.sessions',
        'django.contrib.sites',
        'django.contrib.messages',
        'django.contrib.staticfiles',
        'django.contrib.admin',
        ... ,
    ) 
```

视图.py

```
 from django.contrib import messages
    from django.http import HttpResponseRedirect
    ...

    def some_view(request):
        ...
        mess1 = 'Thank you! Your message was received.' 
        messages.info(request, mess1)
        return HttpResponseRedirect('/contact/') 
```

模板

```
 {% if messages %}
        <ul class="messages">
            {% for message in messages %}
            <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>
            {{ message }}
            </li>
            {% endfor %}
        </ul>
    {% endif %} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T19:58:44.700

您是否添加了消息模板上下文处理器？

```
TEMPLATE_CONTEXT_PROCESSORS = (
    "django.contrib.messages.context_processors.messages",
) 
```

请参阅此[了解更多信息](https://docs.djangoproject.com/en/1.4/ref/contrib/messages/)。

# java - 是否可以确定 Android 位图上的 png 压缩类型？

> ID：14180964
> 
> 赞同：0
> 
> 时间：2013-01-06T09:46:49.873
> 
> 标签：java, android, png, android-framework

我知道有不同类型的 png 压缩格式（例如使用调色板）。是否可以（以编程方式）确定在 Android 中压缩位图时要使用的类型？

如果答案是否定的，任何人都可以提出这样做​​的方法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T10:38:30.917

在 Android 中，没有客户端 API 可以指定，因为`Bitmap.compress()`调用了不接受此类参数的[本机方法。](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/graphics/Bitmap.java#Bitmap.compress%28android.graphics.Bitmap.CompressFormat,int,java.io.OutputStream%29)

但是，您可以使用[libpng](http://www.libpng.org/pub/png/libpng.html)（顺便说一句，我认为 Android 在其本机实现中使用它），它当然允许您需要[的细粒度控制。](http://www.libpng.org/pub/png/libpng-1.2.5-manual.html)

但我真的不认为在 GB 大小的驱动器中保存一堆 KB 值得付出这种努力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T15:19:26.277

最终我不得不对 Android 的 skia 库进行更改，因为我不想添加任何 Java 代码（我需要快速压缩 png）。如果有人需要这样的解决方案，我将我的上传到：
[https ://github.com/androidcompile/Android_external_skia_pngCompression](https://github.com/androidcompile/Android_external_skia_pngCompression)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T13:38:43.837

您也可以使用[PNGJ](https://code.google.com/p/pngj/)，它允许完全控制写入参数。

# objective-c - 这些情况的正则表达式是什么？

> ID：14180972
> 
> 赞同：3
> 
> 时间：2013-01-06T09:48:04.797
> 
> 标签：objective-c, ios, regex

这些情况的正则表达式是什么：

**29000.12345678900**，预期结果**29000.123456789**

**29000.000** , 预期结果**29000**

**29000.00003400**，预期结果**29000.000034**

简而言之，如果在小数点后面没有再找到 1-9，我想消除 0 点，如果实际上可以将数字视为整数，我还想消除点 (.)。

我使用这个正则表达式

```
(?:.0*$|0*$) 
```

但它给了我这个结果：

**29123.6**来自**29123.6400**， 4 从那里消失了。

当我单独测试正则表达式时，它工作得很好，

`.0*$`从**29123.0000**给我**29123**

 **`0*$`从**29123.642300**给我**29123.6423**

 **我错过了组合正则表达式的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T09:56:15.160

如果您认为正则表达式是最好的方法，您可以使用以下内容：

```
\.?0+$ 
```

它适用于两种情况：

```
> '12300000.000001130000000'.replace(/\.?0+$/g, '')
"12300000.00000113"
> '12300000.000000000000'.replace(/\.?0+$/g, '')
"12300000" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-06T10:01:55.257

你可以使用这个正则表达式

```
^\d+(\.\d*[1-9])?
-   -------------
|        |->this would match only if the digits after . end with [1-9] 
|
|->^ depicts the start of the string..it is necessary to match the pattern 
```

解决你的问题

[在这里](http://regexhero.net/tester/)试试

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T10:11:45.923

你只是想要这个：

```
^\d*(\.?\d*[1-9])? 
```

1.  `^\d*`这意味着第一组之前的一个或多个数字。
2.  在`()`描述匹配组中。
3.  `\.?`表示单个 DOT`(.)`可以存在但可选。`eg. (.)`
4.  `\d*`可以有一个或多个数字。`eg. (1234)`
5.  `\.?\d*`可以有一个 DOT 和一个或多个数字`eg. (.123)`
6.  `[1-9]`这仅包括从 1 到 9 的数字，仅不包括`0`.`eg. (2344)`

## [正则表达式](http://regexr.com?33akv)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T10:56:36.307

我不知道 Objective-C 是否支持类似以下构造的东西，但在 Python 中，您可以完全不用正则表达式，使用[`str.rstrip()`](http://docs.python.org/2.7/library/stdtypes.html?highlight=rstrip#str.rstrip)：

```
In [1]: def shorten_number(number):
   ...:     return number.rstrip('0').rstrip('.')

In [2]: shorten_number('29000.12345678900')
Out[2]: '29000.123456789'

In [3]: shorten_number('29000.000')
Out[3]: '29000' 
```****

# bash - 当管道字符直接跟随 Bash 中的重定向时会发生什么？

> ID：14180977
> 
> 赞同：2
> 
> 时间：2013-01-06T09:49:02.210
> 
> 标签：bash, pipeline

我不小心在 Bash 中运行了以下脚本：

```
$ ls -l | > ../test.txt 
```

我得到了一个空的 test.txt。

发生了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T09:53:39.593

您运行了一个*空命令*，即只有一个或多个重定向的简单命令。这执行重定向，但没有别的。

```
>file 
```

是一种截断`file`为零字节的方法。空命令会忽略其标准输入，这就是您看不到`ls`输出的原因。我相信 POSIX 没有定义这个（事实上，`zsh`当你键入时读取 stdin `>file`）。有一个名为`:`（冒号）的显式空命令。如果您只需要它们的副作用，即重定向和变量赋值，则空命令很有用，如

```
: ${FOO:="default value"}  # Assign to FOO unless it has a value already. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T09:53:24.113

`> ../test.txt`尽管有输入数据，但会清空文件，这就是为什么你有 0 大小的文件。

# git - 如何在 Git 中查看已提交文件和已编辑文件之间的差异？

> ID：14180980
> 
> 赞同：0
> 
> 时间：2013-01-06T09:49:22.293
> 
> 标签：git, github

我有一个我已经提交的文件 example.txt

```
git commit -m "added example" 
```

现在我编辑了这个文件，想看看有什么不同吗？我怎么能看到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T09:52:29.427

你只需要使用`$git diff example.txt`

# php - 如何确保 MySQL 中的值在 PHP 中保持其类型？

> ID：14180981
> 
> 赞同：8
> 
> 时间：2013-01-06T09:49:28.800
> 
> 标签：php, mysqli, types, mysqlnd

我在我的 PHP 脚本中遇到问题，其中从 MySQL 调用的值作为字符串返回，尽管在数据库中被标记为`int`和`tinyint`.

这是一个问题，因为在将基于 MySQL 日期的数组转换为 JSON 数据时，应该是整数的值放在双引号中，这会在使用该 JSON 数据的 Javascript 和 iPhone 应用程序中造成问题。我得到的 JSON 值看起来像`"key" : "1"`，当我想要的是`"key" : 1`。

在做了一些研究之后，似乎只要安装了 PHP 5.3 并安装了模块，[就应该可以将这些值作为它们的本机类型。](https://stackoverflow.com/a/2430657/184108)`mysqlnd`我有 5.3.3，`phpinfo()`似乎表明我已经`mysqlnd`安装并运行了模块：

```
mysqlnd enabled
Version mysqlnd 5.0.10 - 20111026 
```

但是，我的值仍然作为字符串返回。

我查看了[mysqlnd 的 PHP 手册条目，](http://php.net/manual/en/book.mysqlnd.php)我总是可能遗漏了显而易见的内容，但我没有看到任何表明我需要在代码中执行任何特定操作来获取本机值的内容。

我到底该怎么做才能让我的 MySQL 函数在 PHP 中以它们的本机类型为我提供 MySQL 结果？

* * *

为了使下面的答案更加吸引人，这是我用来连接数据库的命令：

```
private function databaseConnect()
{
    $this->mysqli = new mysqli(Database::$DB_SERVER, Database::$DB_USERNAME, Database::$DB_PASSWORD);
    $this->mysqli->set_charset("utf8");
    return true;
}

private function dbConnect()
{
    Database::$USE_MYSQLI = extension_loaded('mysqli');
    if (!$this->databaseConnect())
    {
        echo "Cannot Connect To The Database Server";
        throw new Exception();
    }
    if (!$this->databaseSelectDB())
    {
        echo "The database server connected, but the system could not find the right database";
        throw new Exception();
    }
}

private function databaseQuery($query)
{
    return $this->mysqli->query($query);
}

public function doQuery($query)
{
    $result = $this->databaseQuery($query);
    if ($result == FALSE)
    {
        //ErrorHandler::backtrace();
        die("This query did not work: $query");
    }
    return $result;
}

private function getRows($table, $matches, $orderBy = array(), $limit = array())
{
    $calcFoundRows = '';
    if (count($limit) > 0)
    {
        $calcFoundRows = ' SQL_CALC_FOUND_ROWS';
    }
    $query = 'SELECT ' . $calcFoundRows . ' * FROM ' . $table;
    if (count($matches) > 0)
    {
        $query .= ' WHERE ';
        $keys = array_keys($matches);
        $first = true;
        foreach ($keys as $key)
        {
            if (!$first)
            {
                $query .= ' AND ';
            }
            $first = false;

            // now he is safe to add to the query
            // the only time this is an array is when this is called by getSelectedUsers or getSelectedArticles
            // in that case it is an array of array's as the key (which is the column name) may have more than
            // one condition
            if (is_array($matches[$key]))
            {
                $firstForColumn = true;
                foreach ($matches[$key] as $conditions)
                {
                    if (!$firstForColumn)
                    {
                        $query .= ' AND ';
                    }
                    $firstForColumn = false;

                    // if the value is an array we generate an OR selection
                    if (is_array($conditions[1]))
                    {
                        $firstOr = true;
                        $query .= '(';

                        foreach ($conditions[1] as $value)
                        {
                            if (!$firstOr)
                            {
                                $query .= ' OR ';
                            }
                            $firstOr = false;
                            // clean this guy before putting him into the query
                            $this->cleanMySQLData($value);
                            if ($conditions[0] == Selection::$CONTAINS)
                            {
                                //$query .= 'MATCH (' . $key . ') AGAINST (' . $value . ') ';
                                $value = trim($value, "'");
                                $value = "'%" . $value . "%'";
                                $query .= $key . ' LIKE ' . $value;
                            }
                            else
                            {
                                $query .= $key . ' ' . $conditions[0] . ' ' . $value;
                            }
                        }

                        $query .= ')';
                    }
                    else
                    {
                        // clean this guy before putting him into the query
                        $var = $conditions[1];
                        $this->cleanMySQLData($var);
                        if ($conditions[0] == Selection::$CONTAINS)
                        {
                            //$query .= 'MATCH (' . $key . ') AGAINST (' . $var . ') ';
                            $var = trim($var, "'");
                            $var = "'%" . $var . "%'";
                            $query .= $key . ' LIKE ' . $var;
                        }
                        else
                        {
                            $query .= $key . ' ' . $conditions[0] . ' ' . $var;
                        }
                    }
                }
            }
            else
            {
                // clean this guy before putting him into the query
                $this->cleanMySQLData($matches[$key]);
                $query .= $key . " = " . $matches[$key];
            }
        }
    }
    if (count($orderBy) > 0)
    {
        $query .= " ORDER BY ";
        $first = true;
        foreach ($orderBy as $orderCol)
        {
            if (!$first)
            {
                $query .= ',';
            }
            $query .= $orderCol;
            $first = false;
        }
    }

    if (count($limit) > 0)
    {
        $query .= ' LIMIT ' . $limit[0];
        if (count($limit) > 1)
        {
            $query .= ',' . $limit[1];
        }
    }

    $result = $this->doQuery($query);
    $data = array();
    while ($row = $this->databaseFetchAssoc($result))
    {
        $data[] = $row;
    }
    if (strlen($calcFoundRows) > 0)
    {
        $numRows = $this->databaseCountFoundRows();
        $key = '^^' . $table . '_selectionCount';
        Session::getSession()->putUserSubstitution($key, $numRows);
    }

    return $data;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T10:43:47.113

> 我到底该怎么做才能让我的 MySQL 函数在 PHP 中以它们的本机类型为我提供 MySQL 结果？

您连接到数据库，然后准备查询，执行它，绑定结果，然后获取它。

让我们逐行执行这些步骤：

```
$conn = new Mysqli('localhost', 'testuser', 'test', 'test');
$stmt = $conn->prepare("SELECT id FROM config LIMIT 1");
$stmt->execute();
$stmt->bind_result($id);
$stmt->fetch();
var_dump($id); # it's an int! 
```

这对我有用。由于您编写的代码更加复杂，因此您需要找到查询数据库的位置。检查您是否正在使用[`Mysqli::prepare()`](http://php.net/Mysqli.prepare)，如果没有，请介绍它。

您还需要使用[`Mysqli_Stmt::execute()`](http://php.net/Mysqli_Stmt.execute)，[`Mysqli_Stmt::bind_result()`](http://php.net/Mysqli_Stmt.bind_result)否则不会为该结果列保留（此处为整数）类型。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-06T09:55:21.967

> 但是，我的值仍然作为字符串返回。

你在 PHP 中，你的数据是 int、bool、strings 都没有关系......如果它们有这样的类型，它们被称为标量数据，动态转换将允许你让它们按照你想要的方式运行。例如，字符串`"12345"+"54321"`会给你`66666`. 如果您绝对希望您的数据属于特定类型，就像在每种语言中一样，这不是驱动程序的工作。在 Java 中，您有类似JDBC 接口中`.getString`的`.getInt`方法，在 PHP 中您没有，因为它不是很有用。`intval` `boolval` `strval`您将不得不使用... 函数或`(int)`, `(bool)`... 转换运算符来转换您的数据。

正如您的帖子所说，您可以使用服务器端准备好的语句来获得它：

> **使用 mysqlnd 进行 PDO 的优势**
> 
> mysqlnd 在使用服务器端准备语句时返回本机数据类型，例如，INT 列作为整数变量而不是字符串返回。这意味着内部的数据转换更少。

# 带 PDO

您必须在连接后放置此行

```
$PDO->setAttribute(PDO::ATTR_EMULATE_PREPARES,false); 
```

然后，当您要查询时：

```
$s = $PDO->prepare('yourquery');
//here, binding params
$s->bindValue('paramName','paramValue');
$s->execute(); 
```

# 使用 Mysqli

当您使用 mysqli 时，语法会有所不同： 注意：没有客户端准备好的语句，因此您不需要我在 PDO 中放置的配置行。

因此，您的查询将如下所示：

```
$statement = $MySQli->prepare('your query');
$statement->bind_param('si', $stringParam, $intParam);
$statement->bind_result($var1, $var2 /*,...*/);
$statement->execute();
while($statement->fetch()){
  //process here, result will be in var1, var2...
} 
```

可以看到，这里没有内置的 fetchAll 方法。要绑定您的数据，您需要使用变量，因为它不像 in 那样作为值传递，`PDOStatement::bindValue()`而是通过引用传递。此外，类型在第一个 arg 中定义（s 代表字符串，i 代表整数......）没有命名参数，只有索引参数。该`fetch`方法以不同的方式工作，需要您在执行语句之前调用 bind_result；

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-05-13T00:19:36.020

默认情况下为准备好的语句启用它。如果您一直使用准备好的语句，那么您已经以正确的类型返回了数据。

```
$stmt = $mysqli->prepare('SELECT 1');
$stmt->execute();
$ret = $stmt->get_result();
echo gettype($ret->fetch_row()[0]); 
```

上面的代码将返回：

> 整数

但是，如果您使用正常的未准备查询，那么即使使用 mysqlnd，所有值也会作为字符串返回。但是您也可以启用相同的设置以应用于未准备的查询。

```
$ret = $mysqli->query('SELECT 1');
echo gettype($ret->fetch_row()[0]);
// outputs:
// string

// Enable the same setting for unprepared queries
mysqli_options($mysqli, MYSQLI_OPT_INT_AND_FLOAT_NATIVE, true);

$ret = $mysqli->query('SELECT 1');
echo gettype($ret->fetch_row()[0]);
// outputs:
// integer 
```

原因是mysqlnd的技术实现。这同样适用于 PDO_MYSQL，但在 PDO 中，当您关闭模拟准备好的语句时，默认情况下会启用此设置。[Ulf Wendel](http://blog.ulf-wendel.de/2008/pdo_mysqlnd-the-new-features-of-pdo_mysql/)在您链接的其中一篇文章中有一个很好的解释。

> 这是针对 mysqlnd 编译时 PDO_MYSQL 的新默认值，关闭 PDO 准备语句仿真并禁用`PDO::ATTR_STRINGIFY_FETCHES`. MySQL Prepared Statements 使用不同的二进制通信协议但非准备语句。二进制协议避免了不必要的字符串类型转换。

Julien Pauli 在此演示文稿中解释了文本和二进制 MySQL 协议之间的区别：[https ://www.slideshare.net/jpauli/mysqlnd](https://www.slideshare.net/jpauli/mysqlnd)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-03-30T15:24:22.223

使用 mysqlnd 可以做到这一点，但只有在您启用它之后。要启用它，您需要调用该方法`options`并将选项设置为 true：

```
$this->mysqli->options(MYSQLI_OPT_INT_AND_FLOAT_NATIVE, true); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-06T09:54:44.233

这可能不是最好的答案，但您可以使用诸如[intval()](http://us.php.net/manual/en/function.intval.php)之类的东西来强化数据类型。在使用 PDO、Mysqli 甚至旧的（现已弃用的）mysql 函数时，我个人有过这种经验。您可以运行测试用例`is_int()`并`is_string()`100% 确定从数据库中获取的数据确实是字符串与 int。对不起，我无法提供更多帮助！

# image - Magento：更新的产品图像不会出现在前端

> ID：14180990
> 
> 赞同：0
> 
> 时间：2013-01-06T09:51:26.473
> 
> 标签：image, magento, product, appearance

我打开了一个产品，删除了它的图像并上传了其他 2 个。他们出现在后端。我刷新了缓存，删除了`System=>Cache Management`. `media/catalog/product/cache`我手动删除了图像缓存。我删除了缓存`var/cache`，删除了缓存`var/minifycache`（我有 Fooman Speedster），更新了索引管理中的索引。我删除了浏览器中的缓存。

最后，之前的图像仍然存在。怎么回事？我一次又一次地点击所有的删除/刷新按钮，10 次，我从文件系统中手动删除了所有可能和不可能的缓存。结果：没有出现新图像。

经过2小时的尝试，我非常生气。

我从文件系统中删除了那些旧图像。

新图像没有出现，现在我有一个产品的默认 Magento 图像。

我尝试直接访问新图像（例如[http://mysite.com/media/catalog/products/o/1.jpg](http://mysite.com/media/catalog/products/o/1.jpg)），并且图像被加载并找到没有问题。

新图像显示在后端罚款。

到底发生了什么？如何摆脱它，最后在凌晨 5 点变坏？？？谢谢大家帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T10:04:20.703

我唯一的建议是双重和三重检查您是否已刷新所有可能的缓存（Magento 缓存、系统缓存以及所有 8 个缓存以及媒体缓存）。如果您使用 Zend Full Page 缓存，也将其清空。转到 /var/cache 并删除此处的所有内容并在 var/sessions 中执行相同操作（如果您将会话存储在文件系统中而不是数据库中）。

如果所有这些都失败了，请尝试使用您尚未查看该站点的其他浏览器。如果失败，请尝试上传*您的 magento 版本*的新副本，替换所有核心文件。我已经看到 Magento 发生了疯狂的事情，上传干净的副本可以解决任何原因的问题。希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-03T10:10:37.050

只需尝试命令

php bin/magento 目录：图像：调整大小

然后

重新索引命令

您的系统将完美运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-11T16:53:29.580

我自己也遇到了这个问题。不要忘记从外部查看，例如在 varnish/pagespeed/some CDN 的情况下，并密切注意 URL。我花了大约一个小时挠头，想知道为什么当我清除错误的东西（www.example.com 而不是 media.example.com）时它不起作用。

# javascript - Javascript - 加载页面 4 次，然后在第 5 次更改

> ID：14180995
> 
> 赞同：0
> 
> 时间：2013-01-06T09:51:56.220
> 
> 标签：javascript

我正在制作一个基于 PHP 的滚动屏幕，我使用 javascript 每 10 秒加载一个页面。这是我到目前为止所拥有的：

```
<script>   
 setInterval(function(){
      $('#container').fadeOut('slow').load('screener.php').fadeIn("slow");
     },10000);
</script> 
```

所以我猜我需要一个计数来加载screener.php，或者如果计数= 5，则加载alternate.php。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T09:57:45.257

是的，这正是您需要做的。

```
var counter = 0;

setInterval(function(){
    if (counter % 5 === 0) {
        $('#container').fadeOut('slow').load('alternate.php').fadeIn("slow");
    } else {
        $('#container').fadeOut('slow').load('screener.php').fadeIn("slow");
    }

    counter++;
 },10000); 
```

# mysql - 仅在仅存在一次的情况下从 MySQL 数据库中选择一个值

> ID：14180997
> 
> 赞同：2
> 
> 时间：2013-01-06T09:52:09.183
> 
> 标签：mysql, sql, select, count

假设我有一个 MySQL 表，其中包含以下条目：

```
1
2
3
2
5
6
7
6
6
8 
```

当我执行“SELECT * ...”时，我会取回所有条目。但我只想取回这些条目，它们在表中只存在一次。意味着值 2（存在两次）和 6（存在 3 次）的行必须完全从我的结果中删除。

我找到了一个关键字 DISTINCT，但据我了解，它只避免条目显示两次，它并没有完全过滤它们。

我认为它可以用 COUNT 以某种方式完成，但我所尝试的一切并没有真正成功。那么这里正确的 SQL 语句是什么？

编辑：为了澄清这一点，我想要回来的结果是

```
1
3
5
7
8 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-06T09:53:43.403

您可以像这样与 a和 a子句`COUNT()`结合使用：`GROUP BY``HAVING`

```
SELECT yourCol
FROM yourTable
GROUP BY yourCol
HAVING COUNT(*) < 2 
```

[示例小提琴。](http://sqlfiddle.com/#!2/7e9b6/1/0)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-06T09:59:52.837

您想混合使用 GROUP BY 和 COUNT()。

假设列称为“id”，表称为“表”，则以下语句将起作用：

```
SELECT * FROM `table` GROUP BY id HAVING COUNT(id) = 1 
```

这将完全过滤掉重复的结果（例如，它会去掉你的 2 和 6）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-06T10:12:58.317

三种方式。一个`GROUP BY`和`HAVING`：

```
SELECT columnX
FROM tableX
GROUP BY columnX
HAVING COUNT(*) = 1 ; 
```

一个具有相关`NOT EXISTS`子查询：

```
SELECT columnX
FROM tableX AS t
WHERE NOT EXISTS
      ( SELECT *
        FROM tableX AS t2
        WHERE t2.columnX = t.columnX
          AND t2.pk <> t.pk             -- pk is the primary key of the table
      ) ; 
```

以及对第一种方式的改进（如果您有一个主键`pk`列和一个索引`(columnX, pk)`：

```
SELECT columnX
FROM tableX
GROUP BY columnX
HAVING MIN(pk) = MAX(pk) ; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-06T09:54:03.400

```
select id from foo group by id having count(*) < 2; 
```

# c# - 如何获取页面名称并在 asp.net 中添加一些字符串？

> ID：14180998
> 
> 赞同：0
> 
> 时间：2013-01-06T09:52:17.810
> 
> 标签：c#, jquery, asp.net

我的问题：我有两页

1- page.aspx 用于英语语言模式

2- page-ar.aspx 用于阿拉伯语模式

我有`LinkeButton`点击我通过会话；

```
Session["lang"] = "ar"; 
```

或者

```
Session["lang"] = "en"; 
```

我需要获取 page.aspx 名称并将此字符串“-ar”添加到转到阿拉伯语模式或从 page-ar.aspx 中删除“-ar”到转到英语模式

并考虑到您可能在 pageurl 中有一些查询字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T11:20:43.017

这是在**Mr/sheKhar**帮助和我自己的搜索之后的答案

我有两个按钮

一个用于阿拉伯语，另一个用于英语模式

***当用户点击英文按钮时***

```
 protected void english_Click(object sender, EventArgs e)
{
    string Path = System.Web.HttpContext.Current.Request.Url.AbsolutePath;
    System.IO.FileInfo Info = new System.IO.FileInfo(Path);
    string pageName = Info.Name;

    if (Session["lang"].ToString() == "ar")
    {
        string enlink = pageName.Substring(0, pageName.Length - 8) + ".aspx";
        Session["lang"] = "en";

        var page = (Page)HttpContext.Current.CurrentHandler;
        string QueryString = page.ClientQueryString;
        if (!(string.IsNullOrEmpty(QueryString)))
        {
            Response.Redirect(enlink + "?" + QueryString);
        }
        else
        {
            Response.Redirect(enlink);
        }
    }

} 
```

***当用户点击阿拉伯语按钮时***

```
 protected void arabic_Click(object sender, EventArgs e)
{

    string Path = System.Web.HttpContext.Current.Request.Url.AbsolutePath;
    System.IO.FileInfo Info = new System.IO.FileInfo(Path);
    string pageName = Info.Name;

    if (Session["lang"].ToString() == "en")
    {
        string arlink= pageName.Substring(0, pageName.Length - 5) + "-ar.aspx";
        Session["lang"] = "ar";
        //
        var page = (Page)HttpContext.Current.CurrentHandler;
        string QueryString = page.ClientQueryString; // this code get The Query String 

        if (!(string.IsNullOrEmpty(QueryString)))
        {
            Response.Redirect(arlink +"?"+ QueryString);
        }
        else
        {
            Response.Redirect(arlink);
        }
    }

} 
```

希望这段代码可以帮助某人:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T10:38:23.023

您可以在代码隐藏页面中使用以下代码（例如 Page_Load）：

```
protected string LinkUrl;

protected void Page_Load(object sender, EventArgs e)
{
    var language = (string) Session["lang"] ?? "en";

    LinkUrl = (language == "ar")
                ? Page.ResolveUrl("~/page-ar.aspx")
                : Page.ResolveUrl("~/page.aspx");
} 
```

然后，您可以在页面标记上放置如下链接：

```
 <a href="<%= LinkUrl %>">Language Demo</a> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T10:45:39.900

如果您刚开始设计系统，我建议您使用资源**.resx**文件。

要使用资源使 UI 多语言，请查看这篇文章：http: [//support.microsoft.com/kb/917414](http://support.microsoft.com/kb/917414)

对于从数据库中提取的数据，您将不得不使用大量的 if 语句。

```
If (arabic) {
     Select arabic data
}
else
{
     Select english data
} 
```

如果您考虑使用 resx 文件，我可以为您提供更多信息。

使用此解决方案，没有字符串操作，查询字符串会很好，一切都会正常工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-06T10:03:00.403

```
string url = HttpContext.Current.Request.Url.AbsoluteUri;
// http://localhost:1302/TESTERS/Default6.aspx

string path = HttpContext.Current.Request.Url.AbsolutePath;
// /TESTERS/Default6.aspx

string host = HttpContext.Current.Request.Url.Host;
// localhost 
```

您可以创建一个可以返回当前页面名称的函数，如下所示

```
public string GetCurrentPageName()
{
    string Path = System.Web.HttpContext.Current.Request.Url.AbsolutePath;
    System.IO.FileInfo Info = new System.IO.FileInfo(Path);
    string pageName = Info.Name;
    return pageName;
} 
```

现在最后你可以创建一个函数并传递会话值，如下所示

```
 public string GetCurrentPageName(string fileName)
{
     string Path = System.Web.HttpContext.Current.Request.Url.AbsolutePath;
    System.IO.FileInfo Info = new System.IO.FileInfo(Path);
    string pageName = Info.Name;
    if (fileName == "ar")
        return pageName.Substring(0, pageName.Length - 7) + ".aspx";
    else
        return pageName.Substring(0, pageName.Length - 5) + "_ar.aspx";    
 } 
```

在上述函数中传递会话值，它将起作用。

**注意：-我没有测试过。**

# c - 大数的模乘法

> ID：14180999
> 
> 赞同：1
> 
> 时间：2013-01-06T09:52:22.250
> 
> 标签：c, math, multiplication, modular-arithmetic

我需要找到一种有效的算法来进行三个数字的模乘。

换句话说，有没有办法在 C 中找到它？

```
(100100101010001001 * 1010000100100010 * 10010001001010100101001) % 1000000007 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T09:59:52.860

If you are looking to avoid integer overflow, you can transform

```
(a * b * c) % d 
```

into

```
((((a % d) * (b % d)) % d) * (c % d)) % d 
```

In C:

```
unsigned long work(unsigned long a, unsigned long b, unsigned long c, unsigned long d)
{
    unsigned long r = a % d;
    r *= b % d;
    r %= d;
    r *= c % d;
    r %= d;
    return r;
} 
```

It can still overflow though, but less often than the naïve version. If you want to be positively sure it will not overflow then you should use some form of big numbers library like [gmplib](http://gmplib.org/ "The GNU Multiple Precision Arithmetic Library"). The usage would look like:

```
unsigned long work(unsigned long a, unsigned long b, unsigned long c, unsigned long d)
{
    mpz_t tmp, res;
    unsigned long r;
    mpz_init_set_ui(tmp, a);
    mpz_mul_ui(res, tmp, b);
    mpz_mul_ui(tmp, res, c);
    mpz_mod_ui(res, tmp, d);
    r = mpz_get_ui(res);
    mpz_clear(res);
    mpz_clear(tmp);
    return r;
} 
```

Maybe Gmplib supports directly setting the result into the same variable as one of the operand but I am not sure. You would have to check this in the documentation.