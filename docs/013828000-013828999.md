# StackOverflow 问答 13828000-13828999

# c++ - Apache Thrift，线程安全的 TSimpleServer stop() 调用

> ID：13828000
> 
> 赞同：0
> 
> 时间：2012-12-11T20:29:47.867
> 
> 标签：c++, synchronization, thread-safety, thrift

我正在使用 Thrift 框架来处理几个应用程序之间的 IPC。

我似乎想解决一个轻微的竞争条件问题，但是这个解决方案也出现了一个线程安全问题。

TSimpleServer（Thrift 代码）的代码如下所示：

```
void TSimpleServer::serve()
{
   // ...
   while(!stop_) { // ... }
}

void TSimpleServer::stop()
{
   stop_ = true;
   // ...
} 
```

因此，如果我启动一个运行此函数的新线程：

```
void workerFunction()
{
   // server is of type TSimpleServer
   server.serve();  // blocks here
} 
```

并尝试从不同的线程停止它：

```
void StopServer()
{
   server.stop();  // called from a separate thread
} 
```

当来自 stop() 的线程正在写入时，运行 serve() 的线程是否可以从 TSimpleServer 的未受保护的 stop_ 属性中读取？

由于某种原因我忽略了这不是问题吗？任何有关同步的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T08:20:15.630

这不应该是一个问题。对适合处理器字（4 或 8 个字节）的属性对齐变量的任何写入都是原子的。换句话说，当另一个线程正在写入它时，不可能读取它的值。所以，代码是完全正确的。

# javascript - Javascript 计时器

> ID：13828002
> 
> 赞同：-4
> 
> 时间：2012-12-11T20:29:57.447
> 
> 标签：javascript, timer

因此，我正在尝试制作一个计时器，每秒将提交的单词中的一个字母放入输入中。

像这样的东西。假设输入了字符串“matsumoto”，输出将是： 1\. m 2\. ma 3\. mat 4\. mats 5\. matsu 6\. matsum 7\. matsumo 8\. matsumot 9\. matsumoto

我之前真正做过的只是定时警报。如果有人可以帮助我或给我一个起点，我将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T20:35:25.390

就像是

```
var str = 'matsumoto';
var inp = document.getElementById('your element id');
var index = 0;
var hnd = setInterval(function()
{
    inp.value += str[index++];

    if (index == str.length)
        clearInterval(hnd);
}, 1000); 
```

应该做的伎俩。这将创建一个变量来保存您的字符串，获取对输入元素的引用以填充字符，然后设置起始索引。然后每 1000 毫秒（即一秒）调用该`setInterval`方法，并将当前索引处的字符添加到输入元素。然后索引递增，并针对字符串的长度进行测试，如果它们匹配，我们就完成了，所以我们使用该`clearInterval`方法来停止计时器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T20:35:35.280

这可以帮助你，W3c JavaScript 计时事件：

[http://www.w3schools.com/js/js_timing.asp](http://www.w3schools.com/js/js_timing.asp)

# d3.js - 使用 SI 前缀格式化数字，小数位数固定

> ID：13828003
> 
> 赞同：13
> 
> 时间：2012-12-11T20:30:00.840
> 
> 标签：d3.js

我正在查看 d3.format 的可用类型

> 可用的类型值为：
> 
> exponent ("e") - 使用 Number.toExponential。
> 
> 一般 ("g") - 使用 Number.toPrecision。
> 
> fixed ("f") - 使用 Number.toFixed。
> 
> integer ("d") - 使用 Number.toString，但忽略任何非整数值。
> 
> 舍入 ("r") - 类似于固定，但舍入到精确有效数字。
> 
> 百分比 ("%") - 与固定相同，但乘以 100 并以 "%" 为后缀。
> 
> 舍入百分比 ("p") - 类似于舍入，但乘以 100 并以 "%" 为后缀。
> 
> SI 前缀 ("s") -**类似于 rounded**，但带有后缀的单位，例如 "9.5M" 或 "1.00µ"。

[https://github.com/mbostock/d3/wiki/Formatting#wiki-d3_format](https://github.com/mbostock/d3/wiki/Formatting#wiki-d3_format)

我想要的是一个类似于固定而不是四舍五入的 SI 前缀是否存在这样的格式选项？

一些例子：

```
var format = d3.format('.1s');
format(12600000); // Would like 12.6M get 10M
format(12400000); // Would like 12.4M get 10M
format(1240000); // Would like 1.2M get 1M
format(1290000); // Would like 1.3M get 1M 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-18T18:05:32.843

你几乎做对了。使用[`d3.formatPrefix()`](https://github.com/mbostock/d3/wiki/Formatting#wiki-d3_formatPrefix)一个可以获得 SI 前缀。为了得到不带小数的四舍五入数字，我使用了[Javascript`.toFixed()`](http://www.w3schools.com/jsref/jsref_tofixed.asp)：

```
var prefix = d3.formatPrefix(137594020);
console.log(prefix.symbol); // "M"
console.log(prefix.scale(137594020).toFixed()); // 138

var prefix = d3.formatPrefix(13759402);
console.log(prefix.symbol); // "M"
console.log(prefix.scale(13759402).toFixed()); // 14

var prefix = d3.formatPrefix(1375);
console.log(prefix.symbol); // "k"
console.log(prefix.scale(1375).toFixed()); // 1 
```

您可以在[jsfiddle](http://jsfiddle.net/bngtlrs/QMQrk/)自己尝试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-22T00:17:45.127

你只需要改变你的

```
d3.format('.1s'); 
```

经过

```
d3.format('.3s'); 
```

```
console.log(d3.format(".3s")(12600000));
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.4.11/d3.min.js"></script>
```

# webgl - Three.js 中的水模拟

> ID：13828004
> 
> 赞同：2
> 
> 时间：2012-12-11T20:30:03.547
> 
> 标签：webgl, three.js

我正在做一个模拟项目，我需要用 Three.js 移植这个 Webgl 示例。我已经知道一些着色器并且使用过 Three.js。任何帮助将不胜感激。

[Webgl 水](http://madebyevan.com/webgl-water/)

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T09:55:34.987

我找到了平面几何中水模拟的最佳方法 - 检查答案

[Three.js 水着色器从 r48 迁移到 r52](https://stackoverflow.com/questions/13924991/three-js-water-shaders-migration-from-r48-to-r52)

> 纹理统一更改：纹理单元现在自动分配，纹理对象转到值属性而不是纹理一 { type: "t", value: 0, texture: map } => { type: "t", value: map }

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T09:24:24.237

检查他的项目的源代码（我使用 firebug for firefox）。他的 javascripts 没有被缩小，所以它们非常易读。所以假设你知道你的水模拟理论，掌握它应该不难:)

# java - 在 Eclipse juno 中将项目添加到 Websphere 服务器需要做什么？

> ID：13828005
> 
> 赞同：13
> 
> 时间：2012-12-11T20:30:03.077
> 
> 标签：java, eclipse, websphere, websphere-8

我已经从这里安装了“WebSphere Application Server Developer Tools for Eclipse V8.5.1”以及“WebSphere Application Server for Developers V8.5”：[https ://www.ibm.com/developerworks/mydeveloperworks/blogs/wasdev/进入/下载？lang=en](https://www.ibm.com/developerworks/mydeveloperworks/blogs/wasdev/entry/download?lang=en)。

我正在使用 Eclipse Juno。

我使用 First Steps 工具为应用程序开发创建配置文件。

我在 Server 视图中添加了一个“WebSphere Application Server v8.5”服务器，并将其指向该配置文件。

当我在服务器视图中右键单击服务器并选择“添加和删除...”时，我会看到一个对话框说“没有可以从服务器中添加或删除的资源”。

我可以将我的项目添加到 Tomcat 服务器或“WebSphere Application Server V8.5 Liberty Profile”（我需要使用“真正的”WebSphere，原因有很多，超出了这个问题的范围——Liberty 还不够好） .

为了让我将项目添加到服务器，我缺少什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-11T20:49:56.387

我在 WAS 8.0 中使用 IBM RSA/RDi/Rational Developer for i（基于 Eclipse 构建，并且已多次更改名称）和 WAS 8.0，所以不确定这是否会直接适用于您的情况，但您编写的内容听起来非常类似于我过去遇到的麻烦...

我们设置了一个“父”类项目，其中包含将部署到 WAS 的 EAR，然后我们有一个包含 WAR 的相应“Web”应用程序。

在父项目中，在属性 -> 部署程序集下，添加您的“网络”项目。还要检查项目参考下的“网络”项目。

希望这将使您的应用程序可部署到 WAS...

**编辑 I**
这就是我使用 IBM RSA 创建我的 EAR“父”项目的方式（它是基于 Eclipse 构建的 - 您可能需要调整其中一些设置以应用于您的 Eclipse 版本）
1\. 转到文件 -> 新建 - > Project... 并选择 Java EE -> Enterprise Application Project
2\. 输入适当的项目名称并选择您的 WebSphere App Server 作为目标运行时
3\. 系统提示我列出 Java EE 模块依赖项，然后我选择 Web将打包入耳的app；我还选择“生成 application.xml 部署描述符”

然后我可以将耳朵添加到我的 WAS 服务器。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-12T07:13:57.117

WebSphere Application Server Developer Tools 仅允许您在标准 WAS 上部署 EAR 而不是 WAR（在 Liberty 上，它也允许您部署 WAR），即使可以使用管理控制台部署 WAR。我不知道他们为什么会有这种限制，但在 RAD（Rational Application Developer）中也是如此。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-09-16T10:26:32.903

1 .右键单击 «Package Explorer» 视图中的项目名称。2\. 选择 «Properties» 3\. 选择 «Project Facets» 4\. 单击 «Runtimes» 选项卡 5\. 检查服务器 6\. 单击 «OK»

现在

1.  在«服务器»视图中右键单击服务器名称
2.  点击«添加和删除...»
3.  将资源移至右列

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-28T21:52:07.497

您无法部署 .war，因此创建一个 JavaEE 项目并将您的 Web 项目包含在其中。然后你可以部署你的 name_JavaProjectEE 和里面的 war 模块。

# debugging - Facebook评论：网址“无法访问”，无缘无故出现503错误

> ID：13828008
> 
> 赞同：0
> 
> 时间：2012-12-11T20:30:16.443
> 
> 标签：debugging, comments, facebook-comments

是的，我阅读了所有其他类似的主题。我的 OG 标签很完美，我的服务器可以很好地处理 HTTP 范围标头，等等。

放入调试器时的 URL [http://www.prophotoblogs.com/blog/auto-update-1289/ ：](http://www.prophotoblogs.com/blog/auto-update-1289/)

[http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.prophotoblogs.com%2Fblog%2Fauto-update-1289%2F](http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.prophotoblogs.com%2Fblog%2Fauto-update-1289%2F)

说它得到一个 503 代码，并且当您要求查看刮板所看到的确切内容时，“文档未返回任何数据”。

但是，页面加载完美，如果你使用 FB 用户代理 curl 它，一切都很完美。我运行了所有这些测试，它们完美地返回：

```
curl --user-agent "facebookexternalhit/1.1 (+http://www.facebook.com/externalhit_uatext.php)" "http://www.prophotoblogs.com/blog/auto-update-1289/"
curl -I -H 'Range: bytes=0-40960' --user-agent "facebookexternalhit/1.1 (+http://www.facebook.com/externalhit_uatext.php)" 'http://www.prophotoblogs.com/blog/auto-update-1289/' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T20:33:20.737

嗯...我没有看到 a `503`，我也没有看到您的“OG 标签是完美的”：

[脸书皮棉](http://developers.facebook.com/tools/debug/og/object?q=http://www.prophotoblogs.com/blog/auto-update-1289/)

![Linter 截图](../Images/742466e0961189cb29eeba5ecfa601a5.png)

# php - 寻找超过 2 个整数的 GCD（最大公约数）？

> ID：13828011
> 
> 赞同：7
> 
> 时间：2012-12-11T20:30:24.333
> 
> 标签：php, math, greatest-common-divisor

我已经有一个函数可以找到 2 个数字的 GCD。

```
function getGCDBetween($a, $b)
{
    while ($b != 0)
    {
        $m = $a % $b;
        $a = $b;
        $b = $m;
    }
    return $a;
} 
```

但是现在，我想扩展这个函数来找到 N 个点的 GCD。有什么建议吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-07-05T22:29:36.597

有一种更优雅的方法可以做到这一点：

```
// Recursive function to compute gcd (euclidian method)
function gcd ($a, $b) {
    return $b ? gcd($b, $a % $b) : $a;
}
// Then reduce any list of integer
echo array_reduce(array(42, 56, 28), 'gcd'); // === 14 
```

如果要使用浮点数，请使用 approximation ：

```
function fgcd ($a, $b) {
    return $b > .01 ? fgcd($b, fmod($a, $b)) : $a; // using fmod
}
echo array_reduce(array(2.468, 3.7, 6.1699), 'fgcd'); // ~= 1.232 
```

您可以在 PHP 5.3 中使用闭包：

```
$gcd = function ($a, $b) use (&$gcd) { return $b ? $gcd($b, $a % $b) : $a; }; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-11T20:40:55.510

不得不做一些挖掘，但这[是我发现](https://en.wikipedia.org/wiki/Greatest_common_divisor#Properties)的。

> 三个数的 gcd 可以计算为 gcd(a, b, c) = gcd(gcd(a, b), c)，或者通过应用交换性和结合性以某种不同的方式计算。这可以扩展到任意数量的数字。

您可以使用以下内容：

```
function multiGCD($nums)
{
    $gcd = getGCDBetween($nums[0], $nums[1]);

    for ($i = 2; $i < count($nums); $i++) { $gcd = getGCDBetween($gcd, $nums[$i]); }

    return $gcd;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T20:36:43.083

取数字 1 和 2 的 GCD，然后是那个和数字 3 的 GCD，以此类推。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-11T20:31:55.087

你可以试试

```
function gcd($a, $b) {
    if ($a == 0 || $b == 0)
        return abs(max(abs($a), abs($b)));
    $r = $a % $b;
    return ($r != 0) ? gcd($b, $r) : abs($b);
}

function gcd_array($array, $a = 0) {
    $b = array_pop($array);
    return ($b === null) ? (int) $a : gcd_array($array, gcd($a, $b));
}

echo gcd_array(array(50, 100, 150, 200, 400, 800, 1000)); // output 50 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-13T16:29:39.380

您还可以使用[gmp](http://www.php.net/manual/en/function.gmp-gcd.php)库：

```
<?php
    $gcd = gmp_gcd( '12', '21' );
    echo gmp_strval( $gcd );
?> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-11T20:36:01.787

我找到了一个解决方案，但它看起来有点难看：

1) 检查每个整数的每个除数

2）在每个数组中找到更大的整数

```
function getAllDivisorsOf($n)
{
    $sqrt = sqrt($n);
    $divisors = array (1, $n);
    for ($i = 2; ($i < $sqrt); $i++)
    {
        if (($n % $i) == 0)
        {
            $divisors[] = $i;
            $divisors[] = ($n / $i);
        }
    }
    if (($i * $i) == $n)
    {
        $divisors[] = $i;
    }
    sort($divisors);
    return $divisors;
}

function getGCDFromNumberSet(array $nArray)
{
    $allDivisors = array ();
    foreach ($nArray as $n)
    {
        $allDivisors[] = getAllDivisorsOf($n);
    }
    $allValues = array_unique(call_user_func_array('array_merge', $allDivisors));
    array_unshift($allDivisors, $allValues);
    $commons = call_user_func_array('array_intersect', $allDivisors);
    sort($commons);
    return end($commons);
}

echo getGCDFromNumberSet(array(50, 100, 150, 200, 400, 800, 1000)); // 50 
```

有更好的主意吗？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-11T20:36:05.033

您可以将数字存储在数组和/或数据库中并从那里读取。然后在一个循环中，您可以模块化划分数组元素。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-10-28T10:08:05.700

我发现这在某处通过递归计算 gcd

```
function gcd(...$numbers) {
   if (count($numbers) > 2) {
        return array_reduce($numbers, 'gcd'); // use php's array reduce
  }

  $r = $numbers[0] % $numbers[1];
    return $r === 0 ? abs($numbers[1]) : gcd($numbers[1], $r);
} 
```

# razor - 在 ASP.NET MVC4 中将变量从 ViewModel 传递到 View

> ID：13828017
> 
> 赞同：1
> 
> 时间：2012-12-11T20:30:39.467
> 
> 标签：razor, asp.net-mvc-4, viewmodel

我有这个 ViewModel：

```
public DashboardViewModel(Dashboard dashboard)
        {
            HardwareType hwt = new HardwareType { HType = "PC" };
            IQueryable<Hardware> Pcs = db.Hardware.Where(h => h.HardwareType.Contains(hwt));

        } 
```

我想将 Pcs 变量传递给我的视图，以便可以遍历它。这是我的控制器：

```
 public ActionResult Index()
        {
            ViewBag.Title = "ULS Computer Inventory Tracker";

            Dashboard dashboard = new Dashboard();
            var dashbaordViewModel = new DashboardViewModel(dashboard);

            return View(dashboardViewModel);
        } 
```

而我的观点：

```
@{
    @model CIT.ViewModels.DashboardViewModel
}

...

 @foreach (var item in Pcs) {
    <li><a href="#" class="btn"><i class="icon-hdd"></i> @item.HardwareType</a></li>
 } 
```

但是我得到一个`Pcs`在当前上下文中不存在的错误。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T20:33:15.213

由于它现在存在，Pcs 被限定为仅存在于 viewmodel 的构造函数中的变量，因此您需要将 PCS 变量作为成员级别变量公开给 ViewModel..

```
 public IEnumerable<Hardware> Pcs { get; set; }

    public DashboardViewModel(Dashboard dashboard)
    {
        HardwareType hwt = new HardwareType { HType = "PC" };
        Pcs = db.Hardware.Where(h => h.HardwareType.Contains(hwt));
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T20:40:41.233

为了使视图能够访问它，`Pcs`需要可从实例范围公开访问。理想情况下，这应该通过公共财产来完成：

```
Public IEnumerable<Hardware> Pcs {get; private set;}

public DashboardViewModel(Dashboard dashboard)
{
    HardwareType hwt = new HardwareType { HType = "PC" };
    this.Pcs = db.Hardware.Where(h => h.HardwareType.Contains(hwt));
} 
```

还应该通过视图中的模型引用它：

```
@foreach (Hardware item in Model.Pcs) 
```

# java - Java - 将十六进制转换为十进制 - 使字符串 = 正确的数字

> ID：13828025
> 
> 赞同：3
> 
> 时间：2012-12-11T20:31:18.337
> 
> 标签：java, string, parsing, int

**错误是由于一个被忽视的错误**

我最近创建了一个将 rgb 值转换为十六进制的 Java 程序。现在我正在尝试制作一个相反的程序。我已经想出了我要使用的算法，我只需要将字符转换`A - F`为值`10 - 15`。看起来很简单吧？这就是我遇到问题的地方。

这是我到目前为止的代码。输入一个字符串`nums()`，然后对照数组对其进行检查`abc`。一旦找到匹配项，它将获取字符串`a`并将其转换为整数，然后获取`i`并添加 10 以获得正确的数字。

```
class TextToNum {
  String[] abc = { "A", "B", "C", "D", "E", "F" };
  public int nums(String a) {
    for(int i = 0; i < abc.length; i++) {
      if (a == abc[i]) {
        a = Integer.parseInt(a.trim());
        a = i + 10;
      }
    }
    return a;
  }
} 
```

我得到的错误是：

```
gbConv.java:52: incompatible types
found   : int
required: java.lang.String
                a = Integer.parseInt(a.trim());
                                    ^
rgbConv.java:53: incompatible types
found   : int
required: java.lang.String
                a = i + 10;
                      ^
rgbConv.java:56: incompatible types
found   : java.lang.String
required: int
        return a;
               ^ 
```

很明显有问题，`Integer.parseInt()`但我不知道如何解决它。我一直在网上寻找，我找不到任何东西。任何建议/教程都会有很大帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-11T20:35:40.160

要将十六进制字符串转换为 int，您可以简单地使用[`Integer.parseInt(str, 16)`](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#parseInt%28java.lang.String,%20int%29).

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-11T20:35:54.967

你为什么不试试哪个已经可用。

```
 Color.decode("hex string"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T20:48:08.830

`Integer.parseInt(String str)`仅当`str`包含整数时才有效。就像您将字符串作为整数的`str="12345"` `Integer.parseInt(str)`结果一样。`12345`

但是在您提到的情况下，您正在通过`"A", "B", "C", "D", "E", "F"`.

# django-admin - 在 Django 管理中使用 AdminImageMixin 的 sorl-thumbnail

> ID：13828033
> 
> 赞同：3
> 
> 时间：2012-12-11T20:31:37.963
> 
> 标签：django-admin, sorl-thumbnail

我正在尝试使用[sorl-thumbnail v11.12](http://sorl-thumbnail.readthedocs.org/en/latest/examples.html)在 Django 管理员中显示缩略图。

我`models.py`已经按照文档使用了 sorl.thumbnail.ImageField：

```
Note You do not need to use the sorl.thumbnail.ImageField to use sorl.thumbnail. The standard django.db.models.ImageField is fine except that using the sorl.thumbnail.ImageField lets you plugin the nice admin addition explained in the next section. 
```

但是，我不确定如何配置`admin.py`. 我已经做了一个`manage.py syncdb`。目前，我有以下内容，但它没有在 Django 管理中显示缩略图。

**我的项目/admin.py**

```
from django.contrib.admin import *
from sorl.thumbnail.admin import AdminImageMixin

class ModelAdmin(AdminImageMixin, ModelAdmin):
    pass

class TabularInline(AdminImageMixin, TabularInline):
    pass

class StackedInline(AdminImageMixin, StackedInline):
    pass 
```

**我的项目/myapp/admin.py**

```
from MyProject import admin
from myapp.models import Tours

class ToursAdmin(admin.ModelAdmin):
    list_display = ('name', 'image', 'price')
    search_fields = ('name',)

admin.site.register(Tours, ToursAdmin) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-29T12:35:39.693

```
# models.py
class Tours(models.Model):
    image = models.ImageField(upload_to="path/")

    def thumb(self):
        return u'<img src="%s" />' % (get_thumbnail(c, "50x50", crop='center', quality=95).url)
    thumbs.short_description = 'Photos'
    thumbs.allow_tags = True

# admin.py
class ToursAdmin(admin.ModelAdmin):
    list_display = ('name', 'thumb', 'price') 
```

# mysql - 批处理文件摆脱了输出中的迭代器编号

> ID：13828036
> 
> 赞同：1
> 
> 时间：2012-12-11T20:31:44.140
> 
> 标签：mysql, for-loop, batch-file

我编写了一个批处理文件，它将遍历目录的内容并为每个文件执行一个 mysql 命令。

这是代码：

```
SET FilePath=D:\COUNTR~1\blah\*.sql

FOR %%a IN (%FilePath%) DO mysql -u root -plinuxsux blah < "%%a" 
```

在 Windows 的命令行中，它返回如下：

```
mysql -u root -plinuxsux blah 0<"absolute\path\to\my\sql\file.sql" 
```

我到底如何摆脱“<”符号之前的那个愚蠢的迭代“0”？我用谷歌搜索，找不到任何东西。谢谢。

顺便说一句，mysql 命令仍然成功执行并显示在数据库中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T20:37:38.730

添加的是文件被输入`0`的标记。`stdin`我可能会建议添加`@ECHO OFF`到批处理脚本的开头以摆脱命令行的自动回显。

如果您仍然想查看正在处理的文件，您可以`FOR`使用类似的内容扩展您的循环。

```
FOR %%a IN (%FilePath%) DO (
    ECHO Processing %%a...
    mysql -u root -plinuxsux blah < "%%a"
) 
```

有关重定向和常用句柄（即, ）的更多信息，请参阅[本文。](http://technet.microsoft.com/en-us/library/bb490982.aspx)`stdin``stdout`

# c++ - 为什么我的程序会在拥有线程的情况下生成 LdrpLoaderLock 死锁？

> ID：13828039
> 
> 赞同：4
> 
> 时间：2012-12-11T20:31:47.067
> 
> 标签：c++, multithreading, winapi, deadlock

我开发了一个多年来一直在开发的 c++ 应用程序。我们最近在我们的测试实验室中添加了一些 4 台处理器测试机器。

在这样做之后，我们发现负载下的特定测试会间歇性地导致`LdrpLoaderLock`死锁，并且拥有的线程不再运行。拥有线程 id 通常在数值上是暗示性的，因为可能是从正在运行的线程推断出来的线程 id，并且锁内存结构看起来没有损坏。

我在调试器中没有遇到这个问题。我只能在它发生后看看它。我开始记录我正在创建的所有线程，但我没有在其中看到问题线程 ID。这可能没有意义，因为在死锁发生后日志记录可能无法工作。我想我需要一种方法来跟踪线程创建和入口点，这样我就可以找出哪个线程正在执行此操作。任何帮助表示赞赏。

来自windbg

```
0:000> !锁
CritSec ntdll!LdrpLoaderLock+0 at 775d20c0
服务员醒了 没有
锁数 5
递归计数 2
拥有线程 f38
条目数 0
争用计数 5
*** 锁定

```

扫描 805 个关键部分

```
0:000> !线程
索引 TID
0 00000ab8
1 000008cc
2 00000e68
3 0000134c
4 00000c44
5 000011a0
6 00000f18
7 00000908
8 00001084
9 00000f08
10 00001098
11 00001010
12 00000d40
13 0000135c

```

线程堆栈消耗的总 VM 0x031cf000

```
0:000> d 775d20c0
775d20c0 60 43 5d 77 一个 ff ff ff-02 00 00 00 38 0f 00 00 `C]w........8...
775d20d0 ac 04 00 00 00 00 00 00-40 43 5d 77 ff ff ff ........@C]w....
775d20e0 00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 02 ......
775d20f0 00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00 ......
775d2100 00 49 5d 77 ff ff ff ff-00 00 00 00 00 00 00 00 .I]w............
775d2110 00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00 ......
775d2120 20 49 5d 77 ff ff ff ff-00 00 00 00 00 00 00 00 I]w............
775d2130 00 00 00 00 a0 0f 00 00-00 00 00 00 00 00 00 00 ......

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T21:34:46.430

雷蒙德·陈是对的。我正在调用第三方 com 组件。它正在创建一个线程，然后在析构函数中调用 TerminateThread。幸运的是，我有源许可证，否则我将永远不知所措。注释掉该析构函数中的 TerminateThread 调用并重建解决了我的问题。现在让第 3 方修复他们的代码。

# http - 通过 SSL 传递 GET 变量 = 安全？

> ID：13828046
> 
> 赞同：5
> 
> 时间：2012-12-11T20:32:11.943
> 
> 标签：http, url, ssl, https, get

我有一个移动应用程序 (iOS)，它使用 URL 中的 GET 变量发送服务器请求。

现在所有请求都是 SSL 安全的，这意味着我们只对所有请求使用 HTTPS。

现在它不在浏览器中，因此没有历史记录，也没有人真正看到 URL，我们禁用对服务器日志的所有访问（这两个事实使这个问题与所有其他类似问题不同）。

话虽如此，假设传递的 GET 变量是安全的并且不能被“中间人”攻击入侵，是否安全？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T20:52:59.283

严格来说，“中间人”攻击仍然可以执行。最大的问题是它是否对最终用户透明。

中间人仍然可以劫持最初的 SSL 握手并返回自己的 SSL 证书。证书可以用于正确的域名等，但区别在于（希望）它不会由受信任的来源（即证书颁发机构 (CA)）签名。如果您的应用程序识别到这一点并停止通信，那么您就可以了。另一方面，如果您的应用程序没有通过受信任的 CA 检查真实性，那么您将与黑客协商会话，然后黑客可以看到您的流量，对其进行检查，然后将其发送到真实服务器进行处理。来自真实服务器的所有响应也对黑客可见。

如果黑客能够以某种方式使用可信 CA 的密钥签署他们的欺诈证书，那么就无法阻止他们。这种情况很少见，但 CA 可能会受到损害。

在 Web 浏览器的情况下，这样的攻击会向用户显示“停止，发生了一些可疑的事情”消息，这在以后的浏览器版本中变得更加明显。尽管如此，最终用户仍然可以继续前进并接受不受信任的证书，从而有效地允许黑客窃听。如果您的应用程序（或 iOS 本身）允许这样做，那么除了尽可能多地教育用户之外，您几乎无能为力。

总而言之，如果您的应用程序与目标服务器协商 SSL 通道并确保返回的证书由受信任的机构签名（并且不询问用户），那么您应该没问题。所有 HTTP 流量，包括之后的 GET/POST 动词和标头，都将被加密。还有两句警告是有道理的。

*   这就是为什么设备（在这种情况下为 iOS）必须非常小心地保护其受信任的权限文件（“根 CA”）
*   您需要使用安全密码进行底层通信。对于非关键数据（即非个人信息），RC4 可能很好并且可能更快。对于任何个人（即银行业务），尽你所能去。如果不是默认设置，我会推荐 AES-256。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T18:01:01.600

SSL 为您的请求提供了一个加密通道，但是您知道，一旦请求到达其目的地，您的访问日志将记录纯文本变量。

如果您发送的信息在任何方面都是敏感的，那么您应该使用 POST。这将防止 Web 服务器记录变量。如果这与您有关，它还将阻止从其他域（同源策略）调用您的安全请求

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T20:39:58.993

不要忘记您的请求可能会通过代理，并且这些代理也会记录消息。

# linker - kdevelop链接问题

> ID：13828050
> 
> 赞同：0
> 
> 时间：2012-12-11T20:32:31.043
> 
> 标签：linker, cmake, kdevelop

将新类添加到 KDevelop C++ 项目后，链接器无法找到确切的源（在本例中为 calculation.cpp）：

```
-- Build files have been written to: /var/www/C++/fibonacci/build
Scanning dependencies of target fibonacci
Linking CXX executable fibonacci
CMakeFiles/fibonacci.dir/main.cpp.o: In function `main':
/var/www/C++/fibonacci/main.cpp:12: undefined reference to `Calculation::fibonacci(unsigned int)'
/var/www/C++/fibonacci/main.cpp:13: undefined reference to `Calculation::fibonacci_req(unsigned int, unsigned int, unsigned int)'
collect2: ld returned 1 exit status
make[2]: *** [fibonacci] Error 1
make[1]: *** [CMakeFiles/fibonacci.dir/all] Error 2
make: *** [all] Error 2
*** Failed *** 
```

kdevelop 界面中没有选项来设置应该链接或不链接的文件。如何解决链接问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T20:32:31.043

需要在 CMakeLists.txt 文件中将源文件添加到您的项目中。代替：

```
add_executable(example main.cpp) 
```

和：

```
set(MySources main.cpp calculation.h calculation.cpp)

add_executable(example ${MySources}) 
```

这应该是它。

# javascript - Fancybox 文本链接未打开覆盖

> ID：13828054
> 
> 赞同：0
> 
> 时间：2012-12-11T20:32:43.073
> 
> 标签：javascript, jquery, fancybox

我在 IE 7 和 8 中打开花式框时遇到问题。它在 Chrome 和 FF 中运行良好。我在另一个页面上使用了相同类型的实现，它工作正常。所以，我猜我只是错过了一些东西，需要一双新的眼睛来看待它。

```
<script>
//booking info popup
jQuery(document).ready(function() {
    $("#biopopup").fancybox({
        'autoScale'         : false
    });
});
</script> 
```

打开 Fancybox 的链接：

```
<a id="biopopup" href="#bipop" class="btn btn-small btn-danger">Booking Inquiry</a> 
```

弹出内容：

```
<div style="display:none">
        <div id="bipop" style="width:450px;height:500px;">
            <div id="formHeader">
                <h2>Booking Inquiry</h2>
            </div>
            <div class="bookingForm">
                <form action="" method="" class="clearfix">
                    <div class="mainFields">
                        <input type="text" id="name" value="Full Name" onfocus="if (this.value == 'Full Name') {this.value=''}" onBlur="if (this.value == '') {this.value='Full Name'}">
                        <input type="text" id="organization" value="Organization" onfocus="if (this.value == 'Organization') {this.value=''}" onBlur="if (this.value == '') {this.value='Organization'}">
                        <input type="text" id="email" value="Email Address" onfocus="if (this.value == 'Email Address') {this.value=''}" onBlur="if (this.value == '') {this.value='Email Address'}">
                        <input type="text" id="phone" value="Phone Number" onfocus="if (this.value == 'Phone Number') {this.value=''}" onBlur="if (this.value == '') {this.value='Phone Number'}">
                        <input type="text" id="date" value="Desired Date" class="datepicker" onfocus="if (this.value == 'Desired Date') {this.value=''}" onBlur="if (this.value == '') {this.value='Desired Date'}">
                        <div class="clearfix">
                            <input type="text" id="city" class="ccity" value="City" onfocus="if (this.value == 'City') {this.value=''}" onBlur="if (this.value == '') {this.value='City'}">
                            <input type="text" id="state" class="cstate" value="State" onfocus="if (this.value == 'State') {this.value=''}" onBlur="if (this.value == '') {this.value='State'}">
                            <input type="text" id="zip" class="czip" value="Zip" onfocus="if (this.value == 'Zip') {this.value=''}" onBlur="if (this.value == '') {this.value='Zip'}">
                        </div>
                        <textarea id="comments" value="Comments" onfocus="if (this.value == 'Comments') {this.value=''}" onBlur="if (this.value == '') {this.value='Comments'}"></textarea>
                    </div>

                    <input type="submit" name="submit" value="Send Info." class="button green">
                </form>
            </div>
        </div> 
```

这是页面：[http](http://www.outreach.com/trial-test.aspx) ://www.outreach.com/trial-test.aspx （点击“预订查询”按钮）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T14:01:46.043

我想到了。我是前端开发人员，通常不必处理这个问题，但我们的 CMS 使用的是 asp，我忘记了所有服务器控件都必须出现在标签内。我在弹出窗口中使用了一个表单，并且在某处产生了冲突。我取下了表单标签，它现在可以工作了。

# c# - 如何找到实现接口的类

> ID：13828059
> 
> 赞同：1
> 
> 时间：2012-12-11T20:32:59.850
> 
> 标签：c#, winforms, .net-4.0

我对基于 C# 的 WinForms 应用程序有一个架构问题。我真的希望有人能给我一个如何解决这个问题的想法。

我有不同的类实现接口 ITest1 或 ITest2 或两者。

```
class1 : ITest1
class2 : ITest1, ITest2
class3 : ITest2 
```

在应用程序开始时，我有一些配置源告诉应用程序在 ITest1 和 ITest2 的整个应用程序生命类型（class1、class2 或 class3）中使用哪些类

```
ITest1 test1;
ITest2 test2;
switch (configresult)
{
    case "configuration1":
        test1 = new class1();
        test2 = new class2();
        break;
    case "configuration2":
        test1 = new class2();
        test2 = new class3();
        break;
    case "configuration3":  // This happens the most!
        test1 = new class2();
        test2 = (class2)test1;
        break;
} 
```

现在我想知道在运行时哪个类实现了某个接口。在伪代码中：

```
if( test1 is implemented by class2 )
    ((class2)test1).Class2Method();

if( test2 is implemented by class1 )
    ((class1)test1).Class1Method(); 
```

有没有办法通过提供接口变量来找出用于实现接口的类？

在实际程序中，我有 10 多个接口，这些接口由 40 多个类以完全不同的方式实现，所以我不想在需要转换回原始类的所有时刻都执行任何 switch 语句。

- - - - - - - - - 更新！

我想一些背景信息可以更容易地解决我的问题，是的，我同意 Ed S. 这更多的是关于我的设计的问题，但我非常愿意改变这一切。

我的科学应用程序支持 40 多种不同的科学仪器来测量半导体。温度、电流、电压、开关，应有尽有。我定义了 10 个可供用户使用的功能：温度、电压、电流、开关等……这些都放在接口中；ITemperature、IVoltage 等...

有些乐器可以做任何事情，有些只能做部分。如果用户有支持的高质量温度测量设备，我们使用它来实现 ITemperature，但是当他/她有一个昂贵的电压表也可以测量温度时，我使用相同的仪器来测量温度和电压（因此仪器实现 ITemperature和电压）。所有仪器都非常非常不同，几乎不可能创建一个抽象类来涵盖所有仪器。有些需要通过网络界面进行控制，有些需要通过 USB 进行控制，相信我很多事情都不同。所以有时我需要直接访问仪器类（重置寄存器、初始化或其他）。这是我尝试做的。非常欢迎任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T20:40:20.330

[此处](http://msdn.microsoft.com/en-us/library/scekt9xw%28v=vs.80%29.aspx)记录了`is`关键字，尽管从您的问题中听起来您的架构中存在更大的问题。

```
if( test1 is class2 )
    ((class2)test1).Class2Method();

if( test2 is class1 )
    ((class1)test1).Class1Method(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T22:09:05.440

您不需要知道哪个类实现了接口。相反，您可以直接通过界面访问所需的功能。这就是接口的用途。

```
ITest1 test1 = obj as ITest1;
if (test1 != null) {
    test1.Test1InterfaceMethod();
}

ITest2 test2 = obj as ITest2;
if (test2 != null) {
    test2.Test2InterfaceMethod();
} 
```

与强制转换相比，`as`关键字的优势在于类型测试和强制转换只是一种操作。否则，您必须测试类型，`is`然后强制`()`转换，内部再次测试类型:-(

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T21:54:48.603

我认为您真正要寻找的是 Duck Typing，而不是铸造。铸造几乎是一个编译时活动。[您可以使用library](https://github.com/deftflux/DuckTyping)或使用 C# 4.0 的`dynamic`关键字来实现鸭子类型。

```
public static dynamic Quack(dynamic duck)
{
    try
    {
        // bind method at run time and execute it
        return duck.Quack();
    }
    catch (RuntimeBinderException)
    {
        //throw if method call failed
        return null;
    }        
} 
```

您可以在运行时进行投射并在投射时调用方法，但它使用反射，并且速度不是非常快。见[这里](http://social.msdn.microsoft.com/Forums/en-US/csharplanguage/thread/fe14d396-bc35-4f98-851d-ce3c8663cd79/)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T20:36:12.627

```
if (test1.GetType() == typeof(class2)) ... 
```

或者：

```
var c = test1 as class2;
if (c != null) c.Class2Method(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-18T10:27:42.347

使用要测试的对象的 GetType() 方法。

# c# - 将参数传递给 EXE 程序集

> ID：13828060
> 
> 赞同：4
> 
> 时间：2012-12-11T20:33:11.027
> 
> 标签：c#

我想从另一个实用程序应用程序启动我的应用程序并传递一个参数。最简单的解决方案：

```
System.Diagnostics.Process.Start(appPath, param); 
```

... 不是一个选项，因为我想阻止其他人向应用程序提供参数。换句话说：我*只想*从我的实用程序应用程序中使用一个参数来启动我的应用程序。

如何做到这一点？

谢谢， 莱斯泽克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T20:43:48.910

如果你（出于安全原因）不想传递有意义的参数来启动你的主程序，那么你可以使用匿名管道（从 Net 4 开始）
基本上你遵循这个伪代码

*   在实用程序中，创建匿名管道并启动传递管道句柄的主程序。
*   主程序使用传递的句柄监听匿名管道
*   实用程序使用匿名管道发送消息

[在这里你可以找到一个详细的例子](http://msdn.microsoft.com/en-us/library/bb546102.aspx)

这样，有一个参数从实用程序传递给主程序，代表匿名管道，但没有其他程序或用户可以轻易地伪造主程序。如果您在此场景中还添加了两个程序之间的某种形式的秘密握手，您将获得强大的保护。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T20:38:45.047

如果我理解正确，您希望该过程如下所示：

1.  启动 UtilityProgram.exe
2.  在启动 YourApplication.exe 的 UtilityProgram 中执行某些操作

并且您要确保没有其他人可以在 UtilityProgram 之外启动 YourApplication.exe。

我认为最简单的方法是在 YourApplication.exe 中要求一个复杂的参数，有点像密码。

因此，在 YourApplication.exe 中，您的代码可能如下所示：

```
static int Main(string[] args){
    if (args.Length != 1) {
        // We got more than 1 parameter, exiting with a code of -1.
        return -1;
    }

    if (args[0] != "abc123def456ghi") {
        // We got 1 parameter, but it wasn't right, exiting with a code of -2.
        return -2;
    }

    // Got 1 matching parameter
    // Code goes here
} 
```

然后在 UtilityProgram.exe 中，你可以这样做：

```
Process MyApp = new Process();
MyApp.StartInfo.FileName = @"C:\path\to\MyApp\exe";
MyApp.StartInfo.Arguments = "abc123def456ghi";
MyApp.Start(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T20:40:16.700

您可以将应用程序的参数之一设置为您只知道的密码。然后您可以从启动实用程序传递该参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T22:07:42.007

我想到的另一个选择是仅在 Debug 构建中接受参数。我可以控制这两个应用程序，并且我是唯一需要使用参数启动主应用程序的人。我可以在发布版本中去掉这个功能。

# azure - Azure 辅助角色配置文件转换

> ID：13828065
> 
> 赞同：10
> 
> 时间：2012-12-11T20:33:25.910
> 
> 标签：azure, app-config, azure-worker-roles

我已经设置了一个新的工作角色，并通过 SlowCheetah 为其设置了几个新的配置转换。当我使用选择的新配置之一构建项目时，我确实看到在 \bin 文件夹下创建了 configs 文件夹，正如您所期望的那样（例如 \bin\Production）。

当我使用其中一个新配置打包云服务以进行部署时，我的 Web 项目的配置得到了适当的转换，但我的工作角色（只是一个库）没有，即使我在 \bin 文件夹下看到更新的 \bin\生产。

看起来天蓝色的打包工具忽略了工作角色库的配置集。我怎样才能让它从适当的配置中选择配置文件？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-19T11:29:38.343

是的，你可以做到这一点——一旦你知道如何做到这一点，它甚至非常容易。
App.config 没有*被设计*转换，但幸运的是，Azure 团队使构建/部署过程非常适合这些场景。您需要做的事情是相当有据可查的，尽管是以一种非常迂回的方式，并且大多数文章都假设您已经熟悉 MSBuild 脚本等。

您将在下面找到您需要放入项目中的行，这些行将使这个 Just Work。这应该不会超过五分钟。请注意，这不是 hack - 整个 Azure 部署过程旨在支持这种事情。

如果您想了解更多，底部有一些相关文章的链接。

## 一些概念点

1.  在 Azure 中实现这种事情的推荐方法是*不*使用 Web.config 和 App.config，而是使用 CloudConfigurationManager 并使用角色设置。但是，有时这并不是正确的答案，通常是因为需要 *.config 设置（smtp、wcf、elmah 等）的内置或第三方组件。
2.  Web Config 转换旨在仅转换 web.config。这意味着 app.config 不是*通过设计*转换的。
3.  Web Config 转换旨在仅在*发布*时启动，因此当您在本地运行时，即使在 Cloud Emulator 中，您的 Web.config 也不会被转换。

我们可以解决这个问题的方法是挂钩到 Cloud 项目的构建过程。当您将项目部署到 Azure 时，将使用您可以挂钩的构建过程来构建云项目。简而言之，云项目构建了 web 和 worker 角色，并将它们放在你的云项目下的 Obj 文件夹下。然后，它运行一个基本上压缩所有内容的过程，最后将结果放入 Bin 文件夹。从那里，“zip”文件和配置文件被上传到 Azure。

## 解决方案

是手动编辑您的 Cloud.csproj 文件（如果您从 Visual Studio 中执行此操作，则需要先卸载项目）。`</project>`然后将其添加到结束标记的正上方：

```
 <Import Project="$(MSBuildExtensionsPath)\Microsoft\VisualStudio\v11.0\Web\Microsoft.Web.Publishing.targets" />
    <PropertyGroup>
      <WorkerRoleDir>$(IntermediateOutputPath)WorkerRole1\</WorkerRoleDir>
      <AppConfigOriginal>$(WorkerRoleDir)WorkerRole1.dll.config</AppConfigOriginal>
      <AppConfigTransformer>$(SolutionDir)WorkerRole1\App.$(Configuration).config</AppConfigTransformer>
      <AppConfigAfterTransformed>$(WorkerRoleDir)AfterTransformed.config</AppConfigAfterTransformed>
    </PropertyGroup>
    <Target Name="TransformAppConfig" AfterTargets="AfterPackageComputeService">
      <Message Text="Transforming $(AppConfigOriginal) via $(AppConfigTransformer) to $(AppConfigAfterTransformed)" />
      <TransformXml Source="$(AppConfigOriginal)" Transform="$(AppConfigTransformer)" Destination="$(AppConfigAfterTransformed)" />
      <Copy SourceFiles="$(AppConfigOriginal)" DestinationFiles="$(WorkerRoleDir)App.Config.Original" />
      <Copy SourceFiles="$(AppConfigAfterTransformed)" DestinationFiles="$(AppConfigOriginal)" />
    </Target> 
```

## 笔记

*   那里有几个硬编码的路径，您必须对其进行修改。我确信有一种方法可以让它们变软，但这需要比我更多的 MSBuild 技能。
*   当您部署到本地云模拟器时，转换实际上会*运行*，但不会被*使用*。因此，结果与未转换的 Web.config 的行为一致。但是，如果您的转换失败，即使只是在模拟器中运行，您也会收到构建错误。
*   另请参阅[This other SO question](https://stackoverflow.com/questions/6187118/app-config-transformations)
*   [深入探索](http://blog.slalom.com/2011/08/19/building-and-deploying-windows-azure-projects-using-msbuild-and-tfs-2010/)
*   [Tom Hollanders 高度链接文章直接从 MSBuild 部署](http://blogs.msdn.com/b/tomholl/archive/2011/12/06/automated-build-and-deployment-with-windows-azure-sdk-1-6.aspx)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-05-25T11:21:49.477

我觉得@Frans 的答案太复杂了，下面是我在[互联网](https://github.com/sayedihashimi/slow-cheetah/issues/60#issuecomment-13859725)上找到的代码。鉴于您已经设置好 app.config 转换并开始工作，请在文本编辑器中打开您的云项目 (.ccproj)，找到以下行：

```
<Import Project="$(CloudExtensionsDir)Microsoft.WindowsAzure.targets" /> 
```

并在其后插入以下内容：

```
 <!-- Get worker role transform start -->
  <Target Name="CopyWorkerRoleConfigurations" AfterTargets="CopyWorkerRoleFiles">
    <Copy SourceFiles="$(WorkerTargetDir)\YOUR-PROJECT-NAME.dll.config" DestinationFolder="$(IntermediateOutputPath)YOUR-PROJECT-NAME" OverwriteReadOnlyFiles="true" />
  </Target>
  <!-- Get worker role transform end --> 
```

并将 YOUR-PROJECT-NAME 替换为您的工作项目名称。

**更新**

实际上，我找到了一种更好的方法（MSBuild 4+）：如果您在 Azure 项目中拥有超过 1 个具有 app.config 转换的辅助角色，则上面的脚本将不起作用。这是更通用的方法：

```
 <Target Name="CopyWorkerRoleConfigurations" AfterTargets="CopyWorkerRoleFiles">
    <PropertyGroup>
         <RootFolder>$([System.IO.Path]::GetDirectoryName($(MSBuildProjectDirectory)))</RootFolder>
    </PropertyGroup>

    <Copy SourceFiles="$(RootFolder)\%(ProjectName)\bin\$(Configuration)\%(EntryPoint).config" DestinationFolder="%(WorkerRoleReferences.OutputDir)" OverwriteReadOnlyFiles="true" />
  </Target> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T20:56:05.217

确保您已设置云服务配置。右键单击云项目，您应该会看到您尝试打包的配置。例如，我重命名并使用本地、测试和生产配置。然后，您的云服务项目应包含 3 个配置文件：

*   服务配置.Local.cscfg
*   服务配置.PROD.cscfg
*   服务配置.TEST.cscfg

右键单击云服务项目并选择“包”并为您的部署选择正确的服务和构建配置。

注意：除非您添加 MS，否则 app.configs 不会在构建过程中进行转换 -[请参阅此 SO 答案](https://stackoverflow.com/questions/6187118/app-config-transformations)以了解在构建过程中进行转换的技术。但是，对于云部署，最好将 ServiceConfiguration.*.cscfg 文件与`CloudConfigurationManager.GetSetting("settingsKey")`- CloudConfigurationManager.GetSetting 结合使用 - SDK 1.7 中添加 - 如果在角色中，它从 ServiceConfig 获取值，否则从 web.config/app.config 获取应用设置

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-30T08:49:04.203

有一个窍门。也许有人会派上用场。Azure 辅助角色生成器包括标记为“复制”的文件。但是 app.config 将在 WorkerRole1.dll.config （或其他一些）中进行转换，这在设计时不存在。作弊VS：

卸载角色项目 .csproj。

在项目中找到包含文件的 ItemGroup 部分。我有接下来的几个：

```
<None Include="app.config">
  <SubType>Designer</SubType>
</None>
<None Include="app.Debug.config">
  <DependentUpon>app.config</DependentUpon>
</None>
<None Include="app.Release.config">
  <DependentUpon>app.config</DependentUpon>
  <SubType>Designer</SubType>
</None> 
```

然后在之前或之后设置：

```
<Content Include="bin\$(Configuration)\WorkerRole1.dll.config">
  <CopyToOutputDirectory>Always</CopyToOutputDirectory>
  <Link>WorkerRole1.dll.config</Link>
</Content> 
```

这个技巧说构建器“WorkerRole1.dll.config”作为**链接**存在，这个将在构建（和转换）后获得并包含在 WorkerRole 包中。

# git - 如何在 Windows 上解决与 Git 的文件夹大小写冲突？

> ID：13828066
> 
> 赞同：10
> 
> 时间：2012-12-11T20:33:29.317
> 
> 标签：git

我正在做一个`git rebase`，我被卡住了，因为在一个提交中我有一个名为 的文件夹`Proto`，但在另一个提交中我有一个名为`proto`. 这是一个诚实的错误，`Proto`在这两种情况下都应该如此。我能想到的最好的办法是尝试从两个提交中删除该文件夹，然后再次尝试变基，但必须有更好的方法。

过去，当我遇到文件大小写问题时，我使用过 git mv，但是使用文件夹它不会让我运行 git mv，我不知道为什么。

在 Windows 上修复 git 中的文件夹大写问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-14T21:02:37.573

当大量文件移动到不同的目录时，我们在 Windows 上的 git 存储库中遇到了类似的问题。

我第一次手动修复了我们的问题，方法是将存储库克隆到 Linux VM 并使用`git mv`命令运行 bash 脚本来修复文件路径问题。这是一个痛苦的过程，所以我决定开发一个工具来自动化这个过程。

[Git Unite是我使用](https://github.com/tawman/git-unite)[libgit2sharp](https://github.com/libgit2/libgit2sharp)库编写的一个 .NET 控制台应用程序。该程序识别所有 git 索引条目，其文件路径大小写与 Windows 文件系统报告的不同。

[我在Git Unite - Fix Case Sensitive File Paths on Windows 上](http://www.woodcp.com/2013/01/git-unite-fix-case-sensitive-file-paths-on-windows/)写了一篇博文，详细介绍了工具、用法和背后的历史

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T20:40:17.123

将文件夹重命名到 Git 历史记录中很困难，因为不跟踪文件夹——只跟踪文件夹中的文件。假设您想重命名`oldFolder`为`oldfolder`您可以尝试以下操作：

1.  从您第一次在`oldFolder`. 编辑将文件添加到此文件夹的每个提交。当交互式变基停止时，创建`newFolder`并执行`git mv oldFolder/* newFolder/`. 为交互式变基的每次停止执行后者。

2.  显然，您不能在 Windows 中拥有`oldFolder`并且`newFolder`是同一个单词的两个不同大写版本。因此，重复步骤 1 以重命名`newFolder`为`oldfolder`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T20:38:34.390

[`git config --global core.ignorecase true`](http://www.kernel.org/pub/software/scm/git/docs/git-config.html)应该可以解决您在 Windows 上的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T20:40:23.237

[已编辑]我怀疑您需要将文件夹中的每个文件“git mv”到一个临时名称，如“ProtoX”，然后将临时命名的文件“git mv”到“Proto”，因为 Git 不会自行跟踪文件夹 - - 仅文件夹中的文件。

双“git mv”适用于 Windows 不区分大小写的文件系统。（您应该能够在区分大小写的文件系统（如 Linux）上直接从 'proto' 移动到 'Proto'。）

# assembly - IRQ 在 LPC238 (Crossworks + GCC) 上无法正常工作

> ID：13828069
> 
> 赞同：1
> 
> 时间：2012-12-11T20:33:59.707
> 
> 标签：assembly, arm, interrupt, uart, irq

我目前正在使用 Crossworks ARM (2.1)，我的 LPC2368 MCU 上的中断有一些问题。

两个操作过程（在 UART 示例中）：

1）工作一：

*   整个 uart 初始化和 IRQ 实现位于 main.c 文件中
*   代码是使用 VECTORED_IRQ_INTERRUPTS 标志构建的，因为 Crossworks 需要它
*   一切正常（回声测试仪正在响应）
*   从 IRQ 退出后，cpu 将其模式更改为主管（它也设置了构建标志）这很酷并且可以工作..

2）不工作之一：

*   cpu 由位于除 main.c ((ProjDir)/SystemCtrl/) 之外的其他目录中的其他文件中的例程初始化
*   uart初始化函数设置在嵌套目录((ProjDir)/SystemCtrl/LPC/libuart)
*   启动后一切正常。波特率很好，UART 已正确初始化

第一件坏事：当第一次收到数据时，IRQ被正确调用。但接收到的数据不同（即发送：0x31，接收：0x82）。

第二个坏事：即使接收到错误的数据，echo 也会向 PC 发送不同的值！（即发送：0x31，接收：0x82，回显将发送：0xFE）

第三个坏事：IRQ 正在退出并且 CPSR 中的 IRQ 模式仍然设置！I 标志未清除。IRQ 具有**属性**((interrupt(IRQ)))。并且仍然无法正常工作。

有人知道吗？我不知道出了什么问题。我什至更改了堆栈大小（我认为它可能在奇怪的空间中以某种方式丢失了）。嵌套目录如何破坏一切？它还使用干净的项目进行了测试，无需更改任何设置。

# c - C + Ubuntu (GNU/Linux) 中的 JACK 录音/播放编程

> ID：13828073
> 
> 赞同：4
> 
> 时间：2012-12-11T20:34:24.637
> 
> 标签：c, linux, ubuntu, gnu, jack

在谷歌和编程和音频中使用“JACK”工作非常困难，大多数结果似乎给了我有关*如何正确插入**音频插孔***的 Windows 教程/问题，或者有类似于我的“Line-in”带有音频插孔编程”。我怎么找不到任何关于名为“JACK”的音频系统的教程，我需要知道如何初始化、列出声卡、从该列表中选择一个声卡，然后录制和播放我选择的输入/输出。

到目前为止，我唯一的 JACK 编程资源如下...... [http://jackit.sourceforge.net/cgi-bin/lxr/http/source/example-clients/capture_client.c](http://jackit.sourceforge.net/cgi-bin/lxr/http/source/example-clients/capture_client.c) http://www.alsa- project.org/~tiwai/alsa-driver-api/ch01.html#id292665 [http://www.alsa-project.org/~tiwai/alsa-driver-api/re01.html](http://www.alsa-project.org/~tiwai/alsa-driver-api/re01.html)

我认为 capture_client.c 可以在任何情况下工作，所以我对逐行实际发生的事情感到困惑。这就是为什么我希望找到一个 JACK 教程。我需要 RAW 音频数据，所以我可以手动将其加密成数据包，所以我想我需要 JACK，因为我发现 Gstreamer 只使用低级加密，ALSA 编写代码很痛苦（需要永远）但它实际上虽然有效，但所有其他音频库都不适合我的情况，或者只是发臭。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-03T09:39:50.837

搜索互联网时，请尝试使用 jackd（jack daemon 的缩写）。

Jack 的主要设计目的是能够将多个应用程序链接到一个信号链中。因此，守护进程通常根据音频硬件使用 alsa 来处理硬件端口。守护程序设置采样率和格式，格式始终为标准化浮点数，采样率由用户设置。这消除了应用程序之间的采样率和格式转换。

听起来您要么必须跳出框框思考才能让 jackd 为您工作，要么需要将功能包含在守护程序中（例如，jack 已经能够通过网络发送音频数据）或 jackd 真的只是不适合您的目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-25T18:43:02.133

[这](http://dis-dot-dat.net/index.cgi?item=jacktuts/starting/)就是我学习的地方。他经历了编译和实际代码。

# facebook-graph-api - 无法使用成就发布用户的“消息”

> ID：13828075
> 
> 赞同：0
> 
> 时间：2012-12-11T20:34:32.553
> 
> 标签：facebook-graph-api, achievements

我有一个名为“Physi Bricks”的 Facebook 游戏。游戏有成就。当用户获得成就时，我会询问他们是否愿意发布有关该成就的消息。如果他们单击“是”，则会提示他们输入消息。然后，当我使用我的应用令牌将其提交到 Facebook 时，此消息将附加到成就。

当用户不选择包含消息时，成就提交成功。

当用户选择包含一条消息时，我从 Facebook 收到此错误：

" **ID 为 347432048676550 的应用程序未被授予使用属性消息的能力。** "

根据 Facebook Documentation for [Creating a Achievement for a User](https://developers.facebook.com/docs/achievements/)，我可以发布“消息”参数，前提是我拥有​​“publish_actions”权限。

如何/在哪里可以授予我使用“消息”属性的能力？

# asp.net-mvc - 调用重定向已执行，但没有任何反应

> ID：13828077
> 
> 赞同：1
> 
> 时间：2012-12-11T20:34:49.090
> 
> 标签：asp.net-mvc

我有一个登录控制器，如果用户已经登录但仍尝试访问登录控制器，则会重定向到 MyEvents 控制器。

在我的代码中，正在执行 RedirectToAction 行，但没有任何反应。我知道您不能在 Ajax 调用中重定向，但这是从另一个页面到`/Login`. 似乎没有任何理由不为我重定向。

```
Function Index(Optional ReturnUrl As String = "") As ActionResult
  If HttpContext.User.Identity.IsAuthenticated Then
     RedirectToAction("Index", "MyEvents") 'This Line is being read, but nothing happens
  End If

  Return View()
End Function 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T20:36:41.337

该`RedirectToAction`方法实际上并不执行重定向，它返回一个发送给客户端的结果，告诉它重定向。添加一个`Return`，它会工作。

```
Return RedirectToAction("Index", "MyEvents") 
```

# linux - 在 Asterisk 上安装 Mp3 插件

> ID：13828079
> 
> 赞同：0
> 
> 时间：2012-12-11T20:35:03.317
> 
> 标签：linux, centos, asterisk, ivr

我在 Centos 6 上运行 Asterisk 1.8.18.0，我希望它可以从 Windows 机器播放 MP3 或 WAV 文件（在 Audacity 上制作）。我找到了 Asterisk 的 MP3 插件，但我在安装时没有包含它。我是否必须重新安装才能将 MP3 插件添加到 Asterisk，或者有什么方法可以让我在无需重新安装的情况下插入它？

基本上我试图让它工作： exten => s, n, Playback(/etc/asterisk/my_greeting.mp3)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T20:38:45.047

从您的 Asterisk 源目录中，使用`make menuselect`启用该模块。重新运行`make`，`make install`然后执行以下操作：

```
$ asterisk -r
*CLI> module load format_mp3.so 
```

您可以在不停止 Asterisk 服务器的情况下完成所有这些操作。

# css - 如何将 /sfPropelORMPlugin/css/global.css 和 /default.css 包含到 symfony 项目中？

> ID：13828081
> 
> 赞同：0
> 
> 时间：2012-12-11T20:35:13.640
> 
> 标签：css, plugins, symfony-1.4

我已经下载了插件 sfPropelORMPlugin，但我不知道如何将它加载到 symfony 项目中。

我已经检查了页面的来源，但它只有

```
<link rel="stylesheet" type="text/css" media="screen" href="/css/main.css" /> 
```

我应该在哪里包含它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T08:19:21.153

我真的不明白你想要什么。

安装 sfPropelORMPlugin 并对其进行[配置后](https://github.com/propelorm/sfPropelORMPlugin/blob/master/README.md)，您应该运行以下命令将 css 移动（或创建符号链接）到 web 文件夹中：

```
php symfony plugins:publish-assets 
```

然后，您将在 /web 文件夹中拥有 css，就像您说的那样`/web/sfPropelORMPlugin/css/...`。

sfPropelORMPlugin 样式表将自动包含在您的管理生成器模块和 crud 模块中。但是，如果您在其他地方需要它们（例如自定义模块），只需像普通 css 一样包含它们：

```
<link rel="stylesheet" type="text/css" href="/sfPropelORMPlugin/css/global.css" />
<link rel="stylesheet" type="text/css" href="/sfPropelORMPlugin/css/default.css" /> 
```

# netbeans - 换手机模拟器

> ID：13828088
> 
> 赞同：0
> 
> 时间：2012-12-11T20:35:33.893
> 
> 标签：netbeans, java-me

我在 Netbeans 中的项目目前正在使用`JavaMEPhone1`手机模拟器。如何将此手机模拟器更改为另一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T07:44:53.443

您可以从各个公司站点下载并安装模拟器。这是诺基亚的链接：http: [//www.developer.nokia.com/info/sw.nokia.com/id/6e772b17-604b-4081-999c-31f1f0dc2dbb/S60_Platform_SDKs_for_Symbian_OS_for_Java.html](http://www.developer.nokia.com/info/sw.nokia.com/id/6e772b17-604b-4081-999c-31f1f0dc2dbb/S60_Platform_SDKs_for_Symbian_OS_for_Java.html)

然后，新安装的模拟器将成为从 NetBeans 中选择的选项。

上次我检查时，这在 Linux 机器上是不可能的。不知道你运行的是什么操作系统。但如果是Windows，你应该没问题。

# extjs4.1 - ExtJs 4 - 在记录保存时加载嵌套数据

> ID：13828092
> 
> 赞同：1
> 
> 时间：2012-12-11T20:35:39.353
> 
> 标签：extjs4.1

我有两个模型。掌握 -

```
Ext.define('App.model.Master', {
   extend    : 'Ext.data.Model'

  ,fields    : [
    { name  : 'master_name', type  : 'string' },
    { name  : 'id', type  : 'int'}
  ]
  ,proxy    : {
    type  : 'rest',
    url    : '/master',
    reader    : {
      type  : 'json',
      root  : 'masters'
    }
  }
  ,associations  : [{
    type      : 'hasMany'
    id        : 'id',
    foreignKey    : 'master_id',
    associationKey  : 'details',
    name      : 'details',
    model      : 'App.model.Detail',
  }]
}); 
```

和细节 -

```
Ext.define('App.model.Detail', {
  extend    : 'Ext.data.Model'
  fields    : [
    { name  : 'detail_name', type  : 'string' },
    { name  : 'id', type  : 'int' },
    {name  : 'master_id', type  : 'string'}
  ]
}); 
```

我的问题是，当我添加新的主记录时，服务器中会自动添加一个详细信息。我得到的回应是——

```
{
  success : true,
  masters : {
    master_name  : 'aaa',
    id      : 1,
    details    : [
      {
        detail_name  : 'bbb',
        id      : 11,
        master_id  : 1
      }
    ]
  }
} 
```

尽管我付出了所有努力，但一旦将响应添加到主存储中，我就无法读取“详细信息”。我认为'record.details()' 会给我一个在添加大师时返回的记录，但我什么也没得到。

但是，如果我重新加载商店，我能够正确获取数据。

我还需要能够读取 Store.add() 上的嵌套响应。

任何帮助深表感谢。

# objective-c - 包含字典的排序数组

> ID：13828094
> 
> 赞同：0
> 
> 时间：2012-12-11T20:35:48.103
> 
> 标签：objective-c, sorting, nsarray

为了学习，我正在制作一个小游戏。

我想对一个可变数组进行排序，为此我在网上看到了一些示例。问题是，我需要对字典数组进行排序。每本字典都有一个玩家的名字，他完成的时间和他使用的移动次数。

是否可以对我的主要数组中的字典进行排序？

如果是，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T20:58:50.353

当然可以，但是您必须提供比较器块，如下所示：

```
NSArray *sortedArray = [startArray sortedArrayUsingComparator:^NSComparisonResult(id a, id b) {
    NSString* aa = [a objectForKey:KEY_USERNAME];
    NSString* bb = [b objectForKey:KEY_USERNAME];
    return [bb compare:aa];
}]; 
```

这将从“startArray”创建一个新的（不可变的）数组，该数组是一个字典数组，其中“KEY_USERNAME”键用于比较 2 个任意元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T21:06:58.143

对您的问题的快速回答是肯定的，您可以对一系列字典进行排序，稍后我将向您展示如何排序。但在此之前，请允许我说我不推荐这个。根据我从您上面的解释中了解到的情况，每个玩家都有 3 个特征：姓名、时间、计数器。在这种情况下，我认为不需要字典数组，我看到您要么有一个数组字典，其中每个数组都有您想要的 3 个项目，要么您可以为您的播放器创建一个对象（更推荐) 你最终会得到一个对象数组，这是最简单的，然后你会很容易地对你的对象进行排序......

要回答您的问题，一种方法是使用可以调用它的方法`sortedArrayUsingFunction`来`NSArray`请求自定义排序功能，如下所示：

```
mySortedArray = [myArray sortedArrayUsingFunction:myCustomSort context:nil]; 
```

现在您可以编写自己的排序函数，根据需要在其中转换对象。这是一个例子：

```
NSInteger myCustomSort(id val1, id val2, void *context)
{
    NSDictionarry *dic1 = (NSDictionarry *) val1;
    NSDictionarry *dic2 = (NSDictionarry *) val2;
    //now you have 2 dictionaries from the array, jut do the comparison you want and return any of NSOrderedAscending, NSOrderedDescending, or NSOrderedSame
} 
```

# oauth-2.0 - 具有多个域的 github oauth

> ID：13828098
> 
> 赞同：9
> 
> 时间：2012-12-11T20:35:55.013
> 
> 标签：oauth-2.0, multi-tenant, github-api

我正在运行一个在多个子域 usergroupXYZ.onruby.de 上运行的应用程序，并且还支持任意域作为别名。因此您可以通过 yourusergroup.onruby.de 或 customdomain.de 访问域。

该应用程序通过 twitter oauth 和 github oauth2 提供登录信息。

问题是，我没有找到通过自定义域支持 github auth 的方法。我总是`redirect_uri_mismatch`从 github 得到错误。

twitter auth 没有重定向到不同域的问题。

除了为每个自定义域创建一个 github 应用程序令牌之外，还有没有人可以解决这个问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-12T14:29:23.710

您可以覆盖回调 URL，但它必须与 OAuth 应用程序设置中的主机名匹配。本文档给出了好的和坏的匹配列表：http: [//developer.github.com/v3/oauth/#redirect-urls](http://developer.github.com/v3/oauth/#redirect-urls)

由于允许使用不同的上下文，一种解决方案是在基本回调 URL 上创建不同的上下文，然后使用上下文信息重定向到特定主机。这意味着您将像“经纪人”一样行事，并且需要将一些信息传递给目标主机。

如果你的回调 URL 是，`oauth.onruby.de`那么根据 Github 将是有效的。然后，您可以重定向到和。`oauth.onruby.de/cust1``oauth.onruby.de/cust2``/cust1``cust1.de``/cust2``cust2.de`

请记住，`oauth.onruby.de`它将充当网关或代理，并且需要确保没有安全风险。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-12T21:41:09.423

是的，我们按照 Akber 的建议做了。我们有两个站点，`xxx.com`并且`xxx.co.uk`我们想为两个站点 OAuth 使用一个 github 应用程序。

我们使用了 Rails 和 OmniAuth gem。

我们需要做的第一件事是追加`com`或`co.uk`到回调 URL 的末尾

```
class OmniAuth::Strategies::GitHub
  # Some code are omitted    

  def callback_url
    url = super
    matches = url.match(/xxx\.([a-z|\.]+)(:\d+)?\//)
    if matches && matches[1] != 'com'
      tld = matches[1]
      url.gsub!("xxx.#{matches[1]}", 'xxx.com')
      url << "/#{tld}"
    end

    url
  end
end 
```

这是在 github OAuth 回调时重定向的 rails 中间件代码

```
def call(env)
    match = env["PATH_INFO"].match(/\A\/users\/auth\/github\/callback\/(.+)\Z/)
    if match
      host = env["HTTP_HOST"]
      [301, {"Location" => "#{env['rack.url_scheme']}://#{host.gsub('com', match[1])}/users/auth/github/callback?#{env["QUERY_STRING"]}"}, self]
    else
      @app.call(env)
    end
end 
```

# grails - Grails 应用程序：JS 文件混淆

> ID：13828099
> 
> 赞同：1
> 
> 时间：2012-12-11T20:35:58.820
> 
> 标签：grails, ant, war, google-closure-compiler

我想在 war 文件中用最小化版本（由 Closure Compiler - [https://developers.google.com/closure/compiler/docs/gettingstarted_app最小化）替换 js 文件。](https://developers.google.com/closure/compiler/docs/gettingstarted_app)为了建立战争，我正在使用 ant：

```
...
<target name="war" depends="buildnumber" description="--> Creates a WAR of a Grails application">
    <grails command="war" environment="${grails.env}"/>
</target>
... 
```

我补充说：

```
grails.project.resources = { stagingDir ->
    delete(file:"${stagingDir}/js/*.js")
} 
```

到 <root>\grails-app\conf\BuildConfig.groovy 但 js 文件不会为 war 文件删除。

如何在 ant 构建文件中提供要最小化的文件列表，以及如何将其添加到最终的战争文件中？

更新：

我将以下内容添加到 \grails-app\conf\BuildConfig.groovy 以将最小化文件复制到 war 文件。在第一步中，ant 最小化了 js 文件。下一步生成war文件，这一步用最小化文件替换原始js文件。

```
grails.war.resources = { stagingDir, args ->
    def jsFiles = [
            'file1.js',
            'file2.js',
            'file3.js',
            ...
            'templates.common.js'
    ];
    for (file in jsFiles) {
        File f = new File("minimizedjs\\${file}");
        if(f.exists()) {
            copy(file: "minimizedjs\\${file}", tofile: "${stagingDir}\\js\\${file}")
        }
        else {
            println('.....!');
            break;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T21:35:17.180

有一个插件 - [http://grails.org/plugin/closure-compiler](http://grails.org/plugin/closure-compiler) - 所以不需要使用 Ant 进行手动处理。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-11T21:44:04.930

Burt Beckwith 的答案是正确的。

以下是您的解决方案不起作用的具体原因：

*   应该是`grails.war.resources`。不`grails.project.resources`：见[手册](http://grails.org/doc/latest/guide/deployment.html)
*   要在 ant 中使用通配符，请使用`fileset`标签而不是`file`属性

这是一个应该可以工作的固定版本：

```
grails.war.resources = { stagingDir, args ->
    delete() {
        fileset(dir:"${stagingDir}/js", includes: "*.js")
    }
} 
```

# ssis - 将 SSIS 包部署到 SQL Server 2008 SP3

> ID：13828109
> 
> 赞同：0
> 
> 时间：2012-12-11T20:36:28.450
> 
> 标签：ssis, business-intelligence, msdeploy

我有一个生产数据库服务器

> “Microsoft SQL Server 2008 (SP3) - 10.0.5500.0 (X64) Sep 21 2011 22:45:45 版权所有 (c) 1988-2008 Microsoft Corporation Web Edition (64-bit) o​​n Windows NT 6.1 (Build 7601: Service Pack 1 )"

当我尝试将包部署到数据库时，我在 Visual Studio 2008 BI 中创建了一个 SSIS 包，出现以下错误

**在 SQL Server 中存储或修改包需要 SSIS 运行时和数据库版本相同。不支持在早期版本中存储包。**

这可以被视为更高版本吗？

更多异常详情

信息

> 以用户身份执行：DEV-03\SYSTEM。Microsoft (R) SQL Server Execute Package Utility Version 10.50.2500.0 for 64-bit 版权所有 (C) Microsoft Corporation 2010。保留所有权利。开始时间：下午 4:23:16 错误：2012-12-11 16:23:16.92 代码：0xC001700A 来源：
> 说明：包中的版本号无效。版本号不能大于当前版本号。End Error Error: 2012-12-11 16:23:16.93 Code: 0xC0016020 Source: Description: Package migration from version 6 to version 3 failed with error 0xC001700A “The version number in the package is not valid. The version number cannot be greater比当前版本号。”。结束错误错误：2012-12-11 16:23:16.93 代码：0xC0010018 来源：描述：从节点“DTS:Property”加载值“6”时出错。结束错误 由于错误 0xC0010014，无法加载包“C:\userPath\SSIS\FullPackage.dtsx”。描述：由于错误 0xC0010014“发生一个或多个错误，包无法加载。在此之前应该有更具体的错误来解释错误的详细信息。此消息用作遇到错误的函数的返回值。”。当 CPackage::LoadFromXML 失败时会发生这种情况。来源：开始：下午 4:23:16 完成：下午 4:23:16 经过：0.265 秒。包无法加载。步骤失败。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T22:24:12.217

从您的错误来看，您似乎正在使用 VS2010 开发 SQL Server 2012 包，然后尝试将其部署到 SQL Server 2008 R2。从另一个问题的评论中，您可以看到 SSIS 中的版本 6 是 Sql Server 2012 [SSIS 版本检出](https://stackoverflow.com/questions/10210130/ssis-version-checkout#comment13113761_10210130)（感谢@billinkc），版本 10.50.2500.0 是 Sql 2008 R2 SP1。你确定你是在正确的机器上开发并部署到正确的机器上吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T14:52:06.250

有同样的问题，只需将包的版本设置为旧版本即可解决，来自：

```
VersionBuild: <DTS:Property DTS:Name="VersionBuild">87</DTS:Property>
VersionGUID: <DTS:Property DTS:Name="VersionGUID">{E7A9B363-E2DD-40CF-8126-70025D388B2E}</DTS:Property> 
```

至：

```
VersionBuild: <DTS:Property DTS:Name="VersionBuild">72</DTS:Property>
VersionGUID: <DTS:Property DTS:Name="VersionGUID">{A82E6DDE-A5CD-4354-9953-31716F572E42}</DTS:Property> 
```

奇迹般有效！

# html - xpath - 如何根据具有特定内容的内容选择超链接？

> ID：13828112
> 
> 赞同：1
> 
> 时间：2012-12-11T20:36:32.097
> 
> 标签：html, dom, xpath

我想在表格行中选择某个超链接。我的链接有两个类别“mf”和“6day”。我希望能够选择具有上述之一的行（现在只有 1 行就可以了），然后移动到第二个锚标记，然后存储链接（storeAttribute）。

所以我有一张这样的桌子：

```
 ______________________________________
th |  td   | role|  td |  td |  td | td |
 _________________________________________
tr |  6day | a   | txt | txt | txt | a9 |
tr |  6day | a   | txt | txt | txt | a9 |
tr |  mf   | a   | txt | txt | txt | a1 | <-- the a1 here (2nd anchor link)
tr |  6day | a   | txt | txt | txt | a9 |
tr |  6day | a   | txt | txt | txt | a9 | 
```

我想要其中包含纯文本“mf”的行。

然后我想要“下一个”'a'（锚）标签，即**a1**链接（它实际上是一个 'a' 而不是 'a1' 但我用 a1 来区分它）。

我可以选择我想要的**行：**

`storeAttribute`和`xpath=(//table/tbody/tr/td[contains(text(),'Monday - Friday')])`

但试图然后选择该行中的下一个标签让我感到困惑。

我已经用各种 , 等尝试了上述方法`/..//a`，`..//a`但没有运气

我可以使用这个：`xpath=(//table/tbody/tr[3]/td[8]/a)`但这取决于桌子的布局，所以对于我的需要来说太脆弱了。

“真正的”HTML 表位于：http: [//jsfiddle.net/8LJMu/](http://jsfiddle.net/8LJMu/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T22:55:35.480

You want `(//table[@id='practitioners']/tbody/tr[td[contains(@class, 'calendar') and contains(.,'Monday - Friday')]]//td[@class='']/a[@target='_blank'])[1]` - literally, "the first item of the node-list composed of all anchor elements with a "_blank" target attribute contained in any cell with no CSS class contained in any rows in the 'practitioners' table that contain a 'calendar' cell containing "Monday - Friday". If you're looking for all such cells, just remove the leading `(` and the trailing `)[1]`.

# python - 如何在 Python 中使用 telnet 命令检查远程服务器上的缺失数据流

> ID：13828121
> 
> 赞同：3
> 
> 时间：2012-12-11T20:37:02.447
> 
> 标签：python, telnet, telnetlib

我有一个带有 IP 地址和端口的远程服务器。我可以使用标准命令窗口成功连接到它。使用命令窗口时，我可以通过窗口看到数据流，但如果数据流停止，我无法收到通知。我想改用 Python 来完成相同的任务，并增加了在数据流停止时提醒我的功能。我在下面附上了我一直在使用的代码，有人可以帮助我完成这个过程吗？

```
import sys
import telnetlib
import easygui

HOST = "###.###.###.###, 25"

tn = telnetlib.Telnet(HOST)

print tn.read_all()

tn.write("exit\n")

if data =="":
    easygui.msgbox("There's no data!!", title="Bummer Box") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T21:09:57.917

第一步是能够连接到主机；你还没有提到这是否有效。我相信[tn.read_all](http://docs.python.org/2/library/telnetlib.html#telnetlib.Telnet.read_all)会继续阅读，直到出现 EOF。`tn.expect`如果您知道数据应该是什么样子，或者您可能不知道，您可能会想要`tn.read_lazy`。

下一步是能够定期检查连接，比如每分钟或每十秒。[threading.Timer](http://docs.python.org/3.1/library/threading.html?highlight=timer#timer-objects)将帮助您轻松安排任务。

第三步是通知。如果检查数据成功，则静默返回。只有在缺乏数据的情况下，您才会调用弹出消息框、发送电子邮件或其他任何方式。

# mysql - MYSQL 查找两个日期/时间之间的时间跨度

> ID：13828123
> 
> 赞同：3
> 
> 时间：2012-12-11T20:37:08.417
> 
> 标签：mysql, sql, datetime

我有一个表有两个字段 dt(DateTime) 和 isblocked(Bit)

![在此处输入图像描述](../Images/90304fd7e4135e022b0924429d888483.png)

我一直在尝试做的是找到两个日期/时间之间的时间跨度，其中有 45 分钟连续免费 ​​- 基于开始日期/时间。

例如：根据上表使用 2012-12-11 13:30:00' 作为我的开始日期。我需要这样的值：

```
2012-12-11 15:30:00
2012-12-11 16:45:00 
```

我尝试了一些最小和最大查询，例如：

```
SELECT MIN(dt), isbooked
FROM booking
WHERE dt >= '2012-12-11 13:30:00' AND isbooked = 1
GROUP BY dt
LIMIT 1; 
```

但我似乎无法将正确的结构放在一起。如果需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T20:52:31.480

在 MySQL 中，您可以使用相关子查询来执行此操作：

```
select min(b.dt) as StartTime, NotBookedTime as EndTime
from (select b.*,
             (select min(b2.dt) from booking b2 where b2.dt >= b.dt and b2.isbooked = 1
             ) as NotBookedTime
      from booking b
     ) b
where b.isbooked = 0
group by NotBookedTime
having date_add(min(b.dt), interval 45 minute) <=  NotBookedTime 
```

它的作用是找到每条记录的第一个预定间隔，并记住时间。然后它会找到第一个预定的间隔，并检查差异何时为 45 分钟或更大。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T21:00:48.123

这也应该有效：

```
SELECT d.dt
FROM (
  SELECT
    t1.dt,
    MIN(case when t2.isBooked then t2.dt end) AS next_booked,
    MAX(case when not t2.isBooked then t2.dt end) as max_unbooked
  FROM times t1 INNER JOIN times t2 ON t1.dt < t2.dt
  WHERE t1.isBooked =0
  GROUP BY t1.dt
) d
WHERE
  timediff(next_booked,d.dt)>='00:45:00' or
  (next_booked is null and timediff(max_unbooked,d.dt)>='00:30:00') 
```

取决于你所追求的，它也可以像这样简化：

```
SELECT d.dt
FROM (
  SELECT
    t1.dt,
    MIN(t2.dt) as next_booked
  FROM times t1 left  JOIN times t2 ON t1.dt < t2.dt and t2.isBooked=1
  WHERE t1.isBooked =0
  GROUP BY t1.dt
) d
WHERE timediff(d.next_booked, d.dt)>='00:45:00'
      or d.next_booked is null
GROUP BY d.next_booked 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T21:01:38.653

看看这个[SQLFiddle](http://www.sqlfiddle.com/#!2/ae34b/9)

```
SELECT min(b.dt) AS StartTime, NotBookedTime AS EndTime
FROM (SELECT b.*,
        (SELECT min(b2.dt) FROM DT b2 
           WHERE b2.dt >= b.dt AND b2.isBooked = 1
         ) AS NotBookedTime
     FROM DT b
    ) b
WHERE b.isBooked = 0
GROUP BY NotBookedTime
HAVING EndTime is not null 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T21:08:31.923

您可以使用变量：

```
set @tp=now();
SELECT @tp:=dt as dt,isbooked FROM booking WHERE 
    dt >= addtime(@tp,'00:45:00') AND isbooked = 1
    ORDER BY dt; 
```

`@TP`它将采用上一个所选日期的值。

# php - 如果在数组中替换为对应的列

> ID：13828126
> 
> 赞同：0
> 
> 时间：2012-12-11T20:37:28.603
> 
> 标签：php

**更新**：我实际上在做什么：

我正在制作一个 ETL 工具并在 php 中编写它的脚本：ETL 是为特定域设计的，提供的数据与其结构一致，但数据中有一些脏东西需要删除，例如`H.NO , H#, H.NO. should be = HNO`：我正在使用的方法存储过程。在其中我为错误值创建了一个查找表并用正确的值替换它们，因此最终存储的数据应该是完美的。

我必须检测 db 表中的错误值并将它们替换为正确的值。

* * *

我创建了一个`$find[]` 存储来自 DB 的值的数组，然后有一个变量`$exist`，我想检查它是否存在于`$find[wrong]`数组（列）中。如果确实如此，则其值将替换为相应的 cloumn 值`$find[right]`。请让我知道我该怎么做这种更换。谢谢，

*注意：*我的数据库表只包含两列，名为`wrong and right`

当我转储`$find`数组时，它给了我以下输出： `Array ( [0] => Array ( [0] => FSc [wrong] => FSc [1] => FSC [right] => FSC ) [1] => Array ( [0] => Fsc [wrong] => Fsc [1] => FSC [right] => FSC )`

代码：

```
$lookup = mysql_query("select * from lookup");
while($getlookup = mysql_fetch_array($lookup))
{
$find[] = $getlookup; 
}
print_r($find); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T20:42:03.813

在 MySQL 本身中解决。取回时：

```
 SELECT right, IF(wrong='$exist',right,wrong) as wrong from lookup 
```

当然，使用 PDO 和准备好的语句而不是 mysql_*，或者在转义变量时要非常小心。

但是，如果需要删除“错误”数据：

```
 UPDATE data_to_fix
 LEFT JOIN lookup l1
 ON data_to_fix.some_field1 LIKE l1.wrong
 LEFT JOIN lookup l2
 ON data_to_fix.some_field2 LIKE l2.wrong
 SET 
   data_to_fix.some_field1 = IFNULL(l1.right, data_to_fix.some_field1),
   data_to_fix.some_field2 = IFNULL(l2.right, data_to_fix.some_field2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T20:43:25.130

好的，您只需将查询更改为此

```
"SELECT right FROM lookup WHERE wrong = '" . $exists . "'" 
```

如果没有匹配，这将返回 0 行。或者如果有匹配项，则为一（或多行，具体取决于表的设置方式）。

你应该在你的`wrong`字段上有一个索引来优化查询。`right`如果对于任何值应该只有一个特定值`wrong`（即`wrong`在每一行上是唯一的），那么创建`wrong`一个唯一索引来强制它的唯一性。

* * *

更新答案以匹配您修改后的问题。我要做的只是使用 SQL 查询来更新映射表中的错误数据。

所以我假设你的数据库结构可能看起来像这样：

```
the_table
---------
the_field (the field you are trying to change)
... some other fields

mapping_table
---------
wrong
right 
```

然后，您需要运行以使用经过清理的值更新表的查询将如下所示

```
UPDATE the_table AS t
INNER JOIN mapping_table AS mt ON t.the_field = mt.wrong
SET bt.the_field = mt.right 
```

这会将现有的表更新为新值。显然，如果您不想就地更改表，您可以制作表的副本，然后针对该表副本运行此查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T20:47:17.133

试试这个。您还需要使用 PDO 或 mysqli，因为 mysql_* 很快就会消失......

```
<?php
function check_wrong_right($exist) {
    $lookup = mysql_query("select right from lookup WHERE wrong = '" . mysql_real_escape_string($exist). "'");
    if (mysql_num_rows($lookup) == 1) {
        $row = mysql_fetch_array($lookup);
        return $row['right'];
    }
    return $exist;
}

echo check_wrong_right('FSc'); 
```

# asp.net - 当我们收到错误时 404 重定向触发 - ASP.NET

> ID：13828127
> 
> 赞同：1
> 
> 时间：2012-12-11T20:37:34.037
> 
> 标签：asp.net, web-config, http-status-code-404

我的 web.config 中有以下值：

```
<system.web> 
  <customErrors mode="RemoteOnly"
    defaultRedirect="/CARE/Home/Custom404">
    <error statusCode="404" redirect="/CARE/Home/custom404"/>
  </customErrors>
</system.web>

<system.webServer>
  <httpErrors errorMode="DetailedLocalOnly">
      <remove statusCode="404"/>
      <error statusCode="404" path="/CARE/Home/Custom404" responseMode="ExecuteURL"/>
  </httpErrors>
</system.webServer> 
```

非常适合我们的 404 错误（页面未找到），但由于某种原因，当页面上出现错误时会触发此错误。

关于为什么的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T20:41:17.530

这是因为您已经`defaultRedirect`设置了**404**页面。

正如[msdn](http://msdn.microsoft.com/en-us/library/system.web.configuration.customerrorssection.defaultredirect.aspx)所述：

> DefaultRedirect 指定在不存在错误自定义页面的情况下要激活的通用错误页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T20:41:25.620

看起来您已将 defaultRedirect 设置为指向 system.web 部分的 404 错误页面（这与您为 statuscode=404 的重定向设置的 URL 相同）。

您可能想在那里设置不同的页面。

# javascript - 动态加载脚本后访问变量

> ID：13828129
> 
> 赞同：0
> 
> 时间：2012-12-11T20:37:36.917
> 
> 标签：javascript, javascript-events

就在前面：这个项目不使用 JQuery。

我们有一些第三方 JavaScript；它又大又多毛，不需要经常使用，所以我们只在需要时动态加载它：

```
function loadBigHairyCode()
{
    var file = document.createElement('script')
    file.setAttribute("type","text/javascript")
    file.setAttribute("src","path/to/big/ugly/script/file.js")
    document.getElementsByTagName("head")[0].appendChild(file)

    magic_needs_to_happen_here
} 
```

脚本加载工作正常，包括一些未在此处显示的相应 CSS。

加载的文件定义了一个构造函数（调用它`UglyGlobalFunc`），我们以通常的方式（`var foo = new UglyGlobalFunc(....)`）在其他地方使用它。问题是，因为该文件的其余部分有点难看，我们需要对其进行一些修复，以使其不那么糟糕。具体来说，在我上面展示的“魔术需要在这里发生”的地方，我想写相当于

```
UglyGlobalFunc.prototype.BodgeBodgeBodge = function() {....} 
```

就像我在编辑底层文件一样。

但这失败了，因为在代码中，UglyGlobalFunc 是未定义的，这是有道理的。对于像`window.UglyGlobalFunc.proto...`. 所以我的问题是：

1.  动态加载的内容是否可以在执行时访问（需要发生魔法的地方）？或者直到 loadBigHairyCode() 返回并且浏览器经历某种刷新周期之后它们才变得“真实”？

2.  如果是，那么我如何访问它们？某种 getGlobalVariableByName("string") 函数？

3.  如果不是，那么... aieee。正常人是怎么做这种事的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T20:44:37.520

你可以试试这个

```
function loadBigHairyCode()
{
    var file = document.createElement('script')
    file.onreadystatechange= function () { // works in IE
        if (this.readyState == 'complete') MyFunc();
    }
    file.onload= MyFunc;
    file.type="text/javascript";
    file.src="path/to/big/ugly/script/file.js";
    document.getElementsByTagName("head")[0].appendChild(file)
}

function MyFunc(){
    //....
} 
```

**更新：** [**您可以阅读此内容**](http://www.nczonline.net/blog/2009/06/23/loading-javascript-without-blocking/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T20:42:59.220

当您创建这样的`<script>`元素时，您必须绑定到它的`onload`事件，该事件在它加载并可供使用时立即触发。

另一种选择是仅用于`document.write('<script src="..."></script>');`同步加载它。然后您可以在以下行中使用它。只需确保在页面完成加载*之前*执行此操作，否则您的整个文档将被覆盖。

# python - %d 用于在 Python 中命名输入和输出文件

> ID：13828132
> 
> 赞同：0
> 
> 时间：2012-12-11T20:37:51.760
> 
> 标签：python, for-in-loop

我想自动输入一些名称为数组“日期”的文件，然后在一些操作后保存它们，但代码不起作用：

```
dates=[20120711,20120712,20120713,20120714,20120715]
DEM="C:\\Path\\iranDem.tif"

for i in dates:
    Norma="C:\\Temporar\\%d.tif" 
    JoNorma="C:\\%d.tif"

    Delta=arcpy.sa.Times(DEM,0.0065)
    JoNorma=arcpy.sa.Minus(Norma,Delta)
    % i 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T20:40:15.033

您需要将`%`操作员放在*正确*的位置：

```
JoNorma=arcpy.sa.Minus(Norma % i, Delta) 
```

您不能只将`% i`放在单独的行上，运算符需要一个字符串来*操作*。

我更正了您帖子的缩进，但我怀疑您没有意识到在 Python 中，缩进是至关重要的。您需要确保作为循环一部分的所有行都正确缩进，就像您的问题中现在显示的那样。

# asp.net - 在 windows server 2008 64 位上注册 COM dll

> ID：13828135
> 
> 赞同：0
> 
> 时间：2012-12-11T20:38:11.020
> 
> 标签：asp.net, com, asp.net-web-api, iis-7.5

我正在尝试从使用 IIS 7.5 在 Windows Server 2008 R2 Standard Service Pack 1 64 位上运行的 ASP.NET Web API 站点引用 COM dll。

我可以在我的 Windows 7 64 位机器上注册 COM dll，并且 IIS 引用它没有问题。

我尝试使用以下命令在 Windows Server 2008 框中使用以下命令注册 dll：

```
c:\windows\system32\regsvr32.exe <filename>.dll 
```

我收到它已成功注册的消息，但是当我运行该网站时，我收到以下异常：

```
Retrieving the COM class factory for component with CLSID {...} failed due to the following error: 80040154 Class not registered (Exception from HRESULT: 0x80040154 (REGDB_E_CLASSNOTREG)). 
```

我已经尝试重新启动 IIS。

我看过[这篇文章](http://social.msdn.microsoft.com/Forums/en-US/netfx64bit/thread/168e08cc-b553-4c69-9917-1e142f5ca7c6/)，但重新安装 Windows 不是最佳解决方案。

1.  关于可能导致此问题的任何想法？
2.  另外，为什么 Windows 7 工作而 Windows Server 2008 不工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T21:36:45.263

答案是在 IIS 中编辑应用程序池的高级设置。然后在该对话框中将“启用 32 位应用程序”设置为 true。 ![在此处输入图像描述](../Images/787cdd98b336770c810ae2ace47982b5.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T20:40:35.853

我想知道它是否与64位操作系统有关？在这里检查：

[http://support.microsoft.com/kb/282747](http://support.microsoft.com/kb/282747)

# ms-word - 在 MS-Word Doc 中嵌入图片链接的快捷方式

> ID：13828139
> 
> 赞同：0
> 
> 时间：2012-12-11T20:38:20.667
> 
> 标签：ms-word

我想在 MS-Word 文档中嵌入/链接 90+ .jpg 图像。我可以做到这一点，单击插入/图片/来自文件，然后从对话框中选择文件，单击插入，单击链接到文件。它是

有没有办法快速添加多个虚拟链接，然后返回链接中的文件名？也就是说，是否有可以查看和编辑文件名的查看模式？是否有第三方工具可以让我这样做？

# amazon-web-services - AWS AnonymousTVM 编译 Java 服务器端

> ID：13828140
> 
> 赞同：1
> 
> 时间：2012-12-11T20:38:20.767
> 
> 标签：amazon-web-services

[我已经从http://aws.amazon.com/code/8872061742402990](http://aws.amazon.com/code/8872061742402990)下载到 Java 中的 AnonymousTVM 服务器端代码。我的问题是我需要更改代码中的某些内容，但不知道如何编译它以创建新的 .war 文件。我很感激一点帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T23:58:28.133

版本 1.2.0 中的 ant 命令（使用 build.xml 文件）不编译 java 代码。它只是为您的 .war 文件打包所需的文件。似乎版本 1.3.0 已更改，它的 ant 编译整个包。

[https://forums.aws.amazon.com/thread.jspa?threadID=111850&tstart=0](https://forums.aws.amazon.com/thread.jspa?threadID=111850&tstart=0)

# android - Android 选项菜单 - 单行中的多个项目

> ID：13828141
> 
> 赞同：2
> 
> 时间：2012-12-11T20:38:22.837
> 
> 标签：android, android-layout, android-ui

我想创建一个总共有 5 个项目的选项菜单。但是，我希望两个项目并排存在于一行中，而另外 3 个项目可以存在于它们自己的单独行中。

添加单独存在于他们自己的行中的项目是微不足道的使用.....

但是，问题是如何让 2 并排存在于一条线上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T21:59:28.063

不幸的是，一个真正的选项菜单（由 创建`onCreateOptionsMenu(Menu menu)`）需要一个`menu`资源，它只是一个带有`item`节点的 XML。如果您使用`Dialog`or创建自定义菜单`PopupWindow`，那么您可以随心所欲地做任何事情。在这种情况下，创建一个垂直布局，`LinearLayout`其中一些水平`LinearLayout`s 包含您的并排元素，其中穿插着您的常规元素。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/Button01"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Button" />

        <Button
            android:id="@+id/Button02"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Button" />
    </LinearLayout>

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/button2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Button" />

        <Button
            android:id="@+id/button3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Button" />
    </LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-11T20:42:45.777

对单独存在的项目使用垂直线性布局，对必须并排存在的两个项目使用水平线性布局。

在 xml 中，LinearLayout 属性是`android:orientation="vertical"`或`"horizontal"`取决于您使用的属性。

# windows - MS DOS - 使用参数和 SET 复制任意数量的文件

> ID：13828151
> 
> 赞同：0
> 
> 时间：2012-12-11T20:38:47.360
> 
> 标签：windows, batch-file, parameter-passing, dos

我在 MS Dos 上遇到了一个有点傻的问题，基本上我所做的如下：

假设我们位于 C:\BATCH... 将目录 C:\BATCH 中作为参数传递的任意数量的文件复制到目录 J:\TEXTS。探测：

1.  *   该目标目录存在，如果不存在，则创建它。
2.  *   确定传递了哪些参数。
3.  *   指示是否将文件复制到那里。

我试过了，但不知道把参数放在哪个部分。也尝试将变量的值与参数相等，但我认为它做不到。

我离开了我所做的，但我使用了参数。

```
@echo off
if not exist J:\texts\nul md J:\texts
set dir=J:\texts
cls

:continue
set /p file="File to copy (END to finish) "
if %file%==END goto end
if not exist %file% goto error1
cls
echo You will copy the file %file% into directory %dir%
pause
cls
copy %file% %dir% >nul
goto loopback

:loopback
goto continue

:error1
cls
echo The file %file% doesnt exist.

:end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T21:33:59.143

参数以 , 等形式传递`%1`。`%2`所以如果你调用

```
YourScript.bat "foo.txt" "bar.txt" 
```

，那么变量`%1`将包含`"foo.txt"`并且`%2`将包含`"bar.txt"`。

要支持可变数量的参数，您可以使用命令`shift`。它将所有参数向后移动一步，因此 %2 变为 %1，%3 变为 %2，依此类推。

因此，在循环中，您可以将文件移入`%1`，然后调用`shift`，并重复该操作，直到`%1`为空。

```
@echo off

rem  Initialization goes here

:start

rem  Check if there are files left.
if %1X==X goto done

echo Copying %1
rem  Actual copying goes here. Maybe some checking
rem  if file exists and stuff like that.
shift
goto start

:done
echo Done. 
```

PS：我在您的脚本中看到标签“error1”。不要害怕使用更具描述性的名称。如果您遇到 10 种或更多类型的错误，您会感谢自己。

# java - JAVA 未来正在运行？

> ID：13828153
> 
> 赞同：2
> 
> 时间：2012-12-11T20:38:53.183
> 
> 标签：java, web-applications, concurrency, future

从未来（java.util.concurrent.Future）有没有办法知道它的进程当前是否正在运行？我试图在 Web 应用程序中构建一个视图，该视图显示某些进程的状态，如果它完成或被取消，我只能从未来获得。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T20:41:39.677

怎么样`boolean isDone()`？如果它仍在运行，它返回 false。否则，您可以启动一个调用 get() 并阻塞直到完成的线程。然后这个线程可以设置一个完成标志。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T20:50:25.317

这不是 a 的重点`Future`。关键是它是对未来结果的**承诺**，因此得名。它不保证它将如何或何时运行。它可以在当前线程上运行，在不同的线程上运行，或者我想可能在不同的进程中运行。因此，除了存在或不存在之外，它没有任何状态——这或多或少是重点。如果要监视某个线程的进度，则必须在较低的抽象层工作。

# ruby-on-rails - UpdateController#index 中的 NoMethodError

> ID：13828156
> 
> 赞同：0
> 
> 时间：2012-12-11T20:39:11.943
> 
> 标签：ruby-on-rails

无法找到 RoR 在 UpdateController#index 中给出 NoMethodError 的原因

我正在尝试从我的控制器方法更新数据库表记录。

在我的控制器中，代码是：

```
currency = Currency.where(:code => code)
currency.rate = quote["LastTradePriceOnly"]
currency.save 
```

我的表定义是：

```
create_table :currencies do |t|
t.string  :code,  :null => false
t.string  :name
t.text  :description
t.float :rate
t.boolean :direct,  :default =>true
t.timestamps 
```

我得到的错误是未定义的方法 `rate=' for #

任何帮助将不胜感激，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T04:41:00.363

`where`返回一个 ActiveRecord 关系，它基本上表现得像一个可枚举的模型。如果您只想要一项，请使用`find`：

```
single_currency = Currency.find_by_code(code) 
```

# c# - Facebook API，导出群墙条目

> ID：13828162
> 
> 赞同：1
> 
> 时间：2012-12-11T20:39:40.367
> 
> 标签：c#, php, facebook, api

在尝试找到对此类事物的 API/教程的引用后，我来到了这里。

我想使用 PHP 或 C# 扫描特定的群组墙，从中提取所有帖子。

最后，我想要一个包含每个帖子的嵌套数组，以及以下详细信息：

*   相关评论的数组
*   喜欢
*   意见

显然，我不要求提供任何代码，只要求提供我需要使用的相关 API 的参考。

**编辑：**如果这是不可能的，我应该考虑 cURL 作为一种选择吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T23:01:42.723

`/GROUP_ID/feed`端点包含所有这些数据。

示例：[https ://developers.facebook.com/tools/explorer?method=GET&path=195466193802264%2Ffeed](https://developers.facebook.com/tools/explorer?method=GET&path=195466193802264%2Ffeed)

注意：“查看者”功能无法通过 API 使用。

# .net - DB2 错误：不允许将 NULL 值分配给非空列“”？

> ID：13828164
> 
> 赞同：1
> 
> 时间：2012-12-11T20:39:51.363
> 
> 标签：.net, database, vb.net, insert, db2

我正在尝试在表上进行插入，它抛出了这个错误。但是，它没有向我显示受影响的列。

有谁知道这里发生了什么？

![DB2 错误](../Images/309e41da437920b5100bce2396bca5a3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T23:42:27.167

不知何故，您的应用程序或 SQL 正在发送`<NULL>`到已指定的列`"NOT NULL"`。

我刚刚在我正在编写的应用程序中看到了这一点。考虑下表：

```
CREATE TABLE "PURCHASE" (
  "PURCHASE_NAME"   VARCHAR(150)    NOT NULL,
  "NOTIFY_FLAG" CHARACTER(1)    NOT NULL,
  "PURCHASE_AMOUNT" DECIMAL(9, 2)
) 
```

以以下方式插入将产生您询问的错误：

```
INSERT INTO PURCHASE
(PURCHASE_NAME, NOTIFY_FLAG, PURCHASE_AMOUNT) 
VALUES 
('Lotus Organizer version 3.1', null, 12743.27); 
```

您的屏幕截图显示您的数据库客户端未向您发送列信息。它应该看起来像这样：

```
ERROR [23502] [IBM][DB2/AIX64] SQL0407N  Assignment of a NULL value to a NOT NULL
column "TBSPACEID=15, TABLEID=11, COLNO=16" is not allowed. 
```

要对此进行调试，您需要以某种方式捕获您的应用程序正在生成的 SQL，并通过更直接的 DB 客户端运行它，例如 TOAD ( [http://www.quest.com/database-management/](http://www.quest.com/database-management/) )。

# python - Python 的 matplotlib/basemap 错误信息

> ID：13828165
> 
> 赞同：1
> 
> 时间：2012-12-11T20:39:54.600
> 
> 标签：python, matplotlib, matplotlib-basemap, epd-python

我使用 py2.7 和 Windows 的免费版 EPD，我有一个使用 NetCDF4 读取数据的程序，我使用来自
[http://sourceforge.net/projects/matplotlib/files/matplotlib-toolkits/的底图 1.0.5](http://sourceforge.net/projects/matplotlib/files/matplotlib-toolkits/)

当我绘制我的图形时，它最初运行良好几次然后我收到以下错误消息，当我重新启动（关闭并再次打开）EPD 直到它再次出现时问题得到解决。这可能是matplotlib中的错误吗？以及如何解决问题？谢谢

```
*In [9]: Traceback (most recent call last):
  File "C:\Python27\EPD\lib\site-packages\wx\_misc.py", line 1342, in Notify
    self.notify()
  File "C:\Python27\EPD\lib\site-packages\wx\_core.py", line 14720, in Notify
    self.result = self.callable(*self.args, **self.kwargs)
  File "C:\Python27\EPD\lib\site-packages\matplotlib\backends\backend_wx.py", li
ne 990, in _onDrawIdle
    self.draw(*args, **kwargs)
  File "C:\Python27\EPD\lib\site-packages\matplotlib\backends\backend_wxagg.py",
 line 59, in draw
    FigureCanvasAgg.draw(self)
  File "C:\Python27\EPD\lib\site-packages\matplotlib\backends\backend_agg.py", l
ine 401, in draw
    self.figure.draw(self.renderer)
  File "C:\Python27\EPD\lib\site-packages\matplotlib\artist.py", line 55, in dra
w_wrapper
    draw(artist, renderer, *args, **kwargs)
  File "C:\Python27\EPD\lib\site-packages\matplotlib\figure.py", line 884, in dr
aw
    func(*args)
  File "C:\Python27\EPD\lib\site-packages\matplotlib\artist.py", line 55, in dra
w_wrapper
    draw(artist, renderer, *args, **kwargs)
  File "C:\Python27\EPD\lib\site-packages\matplotlib\axes.py", line 1983, in dra
w
    a.draw(renderer)
  File "C:\Python27\EPD\lib\site-packages\matplotlib\artist.py", line 55, in dra
w_wrapper
    draw(artist, renderer, *args, **kwargs)
  File "C:\Python27\EPD\lib\site-packages\matplotlib\image.py", line 355, in dra
w
    im = self.make_image(renderer.get_image_magnification())
  File "C:\Python27\EPD\lib\site-packages\matplotlib\image.py", line 575, in mak
e_image
    transformed_viewLim)
  File "C:\Python27\EPD\lib\site-packages\matplotlib\image.py", line 202, in _ge
t_unsampled_image
    x = self.to_rgba(self._A, self._alpha, bytes=True)
  File "C:\Python27\EPD\lib\site-packages\matplotlib\cm.py", line 213, in to_rgb
a
    x = self.norm(x)
  File "C:\Python27\EPD\lib\site-packages\matplotlib\colors.py", line 845, in __
call__
    result, is_scalar = self.process_value(value)
  File "C:\Python27\EPD\lib\site-packages\matplotlib\colors.py", line 835, in pr
ocess_value
    result = result.astype(np.float32)
  File "C:\Python27\EPD\lib\site-packages\numpy\ma\core.py", line 2908, in astyp
e
    output = self._data.astype(newtype).view(type(self))
MemoryError
If you suspect this is an IPython bug, please report it at:
    https://github.com/ipython/ipython/issues
or send an email to the mailing list at ipython-dev@scipy.org
You can print a more detailed traceback right now with "%tb", or use "%debug"
to interactively debug it.
Extra-detailed tracebacks for bug-reporting purposes can be enabled via:
    %config Application.verbose_crash=True* 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T08:44:50.567

You need to free up some memory (you're getting a MemoryError). You could do this by `del`eting any no longer needed variables and, if you've got figures that you no longer need, closing those with `plt.close(figure)` (close documentation can be found [http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.close](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.close)).

HTH

# vb.net - 标签文本未一一更新 Visual Basic

> ID：13828173
> 
> 赞同：1
> 
> 时间：2012-12-11T20:40:31.953
> 
> 标签：vb.net, label

我有这个自定义类

```
Public Class labelScroll
    Inherits Label

    Public Shadows Property Text As String
        Get
            Return MyBase.Text
        End Get
        Set(ByVal value As String)
            Dim add As String = ""
            Dim result As String()
            Dim i As Integer
            result = Split(value, vbLf)
            Dim n As Integer = 30
            If (result.Length < n) Then
                n = result.Length
            End If
            Dim start As Integer = result.Length - n
            For i = start To result.Length - 1 Step 1
                add += result(i) + Environment.NewLine
            Next
            MyBase.Text = add
        End Set
    End Property
End Class 
```

我有一个表单，我放置了这个 labelScroll 并且还放置了一个按钮：我有这个按钮的点击事件的代码：

```
Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
    LabelScroll1.Text = "1"
    Threading.Thread.Sleep(1000)
    LabelScroll1.Text += "2"
    Threading.Thread.Sleep(1000)
    LabelScroll1.Text += "3"
End Sub 
```

当我点击按钮时会发生什么，它需要 2 秒，然后在三行上只显示“1”“2”“3”。实际应该发生的是，当用户单击按钮时，“1”出现然后`Threading.Thread.Sleep(1000)`被执行，因此程序等待 1 秒然后在下一行打印“2”。

为什么没有发生这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T20:47:06.880

在标签上设置文本会使控件无效 - 这意味着它将在下一次处理事件队列时重绘（有效地）。当您在 UI 线程上睡觉时，这不会发生 - 尝试`MyBase.Update()`在 MyBase.Text = ... 行之后立即添加以强制立即更新。

# r - 将背景颜色设置为 corrplot 中数据的强度

> ID：13828186
> 
> 赞同：2
> 
> 时间：2012-12-11T20:41:38.400
> 
> 标签：r, matrix, r-corrplot

我有一个数据矩阵，我想使用背景颜色来显示矩阵元素的值，因此背景越暗，矩阵元素越大。我已经像这样使用 corrplot ：

```
corrplot(overlaps[[1]], method="number", is.corr=FALSE, type="full",
         cl.lim=c(0,100), addgrid.col="red", addshade="positive") 
```

矩阵如下所示： ![在此处输入图像描述](../Images/24badd9ad01c8f654c3f25bd472e0868.png)

但我希望背景显示强度而不是这里的数字。我该怎么办？

先感谢您

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T21:23:27.177

```
library(corrplot)
m <- matrix(rnorm(1000), ncol = 10)
corrplot(cor(m), method = "color", type="full", addgrid.col = "red",
        addshade = "positive", addCoef.col = "black") 
```

虽然我不确定这是否是显示相关性的最佳方式......

# excel - VBA - “调用”找不到子或函数

> ID：13828192
> 
> 赞同：3
> 
> 时间：2012-12-11T20:42:00.093
> 
> 标签：excel, vba

我创建了以下宏：

```
 Sub X()
        Call Y
        Range("A1:M31").Calculate
    End Sub 
```

Y 在另一个模块中被定义为 Public：

```
 Public Sub Y()
        Cells(13, 13) = A()
        Cells(14, 13) = B()
    End Sub 
```

Y，当被调用时（通过按钮或某些事件之后）可以完美运行并调用 A 和 B，它们是与 Y 在同一模块中定义的其他宏。但是，当我尝试从 X 所在的另一个模块调用它时，我得到编译错误：“未定义子或函数”。

哪里有问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T01:31:15.307

将代码移动到一个单独的模块并且它工作。

# c# - C# 选项参数

> ID：13828194
> 
> 赞同：0
> 
> 时间：2012-12-11T20:42:13.653
> 
> 标签：c#, visual-studio-2010, c#-4.0

当我将以下代码用于方法时，最后会出现一条红色波浪线，并带有一条消息`invalid expression term ')'`。
但该方法运行良好。有谁知道为什么错误信息？

```
public TimedMsgBox(bool isTimed = true)
{
    *** some code here ***
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T20:43:20.760

您没有返回类型。如果没有预期，请使用 void。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T20:47:34.327

有时 Visual Studio 会保留这些错误，即使它们已经得到解决。我有很多次在构建方法时暂停，在类中的下一个方法下方出现一条红线，完成我的方法，但仍然看到那条红线。

尝试重建解决方案（不仅仅是简单的构建），或者只是重新启动 Visual Studio。这通常会为我摆脱它。

编辑：或者，如果波浪线一般困扰您，只需按照[此建议](http://www.devcurry.com/2011/01/disable-squiggly-or-wavy-lines-in.html)将其关闭。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T20:49:14.117

我会尝试从方法中取出“=true”并在代码中定义它。IDE 可能会与方法中变量的实例化混淆...

```
 public TimedMsgBox(bool isTimed)
    {
       *** some code here   ***
    } 
```

正如前面有人所说，如果没有返回任何内容，该方法应该返回 void

# c++ - Makefile c++11 支持

> ID：13828195
> 
> 赞同：2
> 
> 时间：2012-12-11T20:42:21.390
> 
> 标签：c++, linux, gcc, c++11, makefile

我最近用 C++ 开始了一个小项目。我创建了一个简单的 Makefile：

```
 CC=g++
    CFLAGS =-std=c++0x -I. -c
    VPATH = src include

    vpath %.c src

    vpath %.h include

    TabooSearch : main.o Task.o TabooList.o
                  $(CC) $(CFLAGS) -o TabooSearch main.o Task.o TabooList.o 
```

问题是，当我运行时，`make`我从 gcc 中得到这种错误：
`error: ‘nullptr’ was not declared in this scope`
我没有任何想法，我的 Makefile 有什么问题，有人可以帮我解决这个问题。我在 Debian 上的 gcc 版本是 4.7.2
在此先感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T20:49:17.647

由于您使用隐式规则来构建`.o`文件，因此您应该使用`CXXFLAGS`来设置 C++ 标志：

> CXXFLAGS =-std=c++0x

不需要`-I.`or `-c`。

我会添加更多标志以获得体面的错误和警告：

> CXXFLAGS := -Wall -Wextra -pedantic-errors -std+c++0x

同样对于`g++`. 如果您的默认设置不调用 g++，那么您需要添加

> CXX = g++

# erlang - 连接 erlang 元组中保存的值

> ID：13828196
> 
> 赞同：0
> 
> 时间：2012-12-11T20:42:21.493
> 
> 标签：erlang, mapreduce, riak

我正在尝试用 erlang 为 riak 编写地图阶段，但遇到了问题。我需要连接描述和代码，它们是单独的项目，并以“代码描述”的形式将它们组合起来，然后需要将其赋值为 1，因此“代码描述”=1 以便我计算在我的减少阶段也出现了同样的情况（描述来自静态池，而不是自由文本）。破折号也很重要。使用 proplists 我可以导航到我想要的值并使用 {struct, values} = ...etc 我得到了一些类似的东西：

```
[{"desc":"Stuff Needs Doing","code":"SND"},{"desc":"Done","code":"DNE"}] 
```

当我编写以下代码段时，我只得到过滤列表中每个 kv 的 desc 返回：

```
Desc = proplists:get_value(<<"desc">>, Data),
[Desc]. 
```

看到它们都是字符数据，我认为[DescVar ++ CodeVar]。会工作，但是当我对我的集群运行它时，我实际上收到了一条错误消息，它抱怨 ++。+ 也不起作用，所以我该如何在 erlang 中做我所追求的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T17:44:57.363

我认为您的输入示例在 Erlang 中无效。

然而，作为一个例子，如果你的输入是这样的：

```
[{"desc","A","code","B"}, {"desc","A","code","B"}, {"desc","C","code","B"}] 
```

那么这确实想要你想要的：

```
test() ->
    do([{"desc","Stuff Needs Doing","code","SND"},{"desc","Done","code","DNE"},{"desc","Done","code","DNE"}]).

do(L) -> 
    L2 = lists:map(fun({_,D,_,C}) -> C++"-"++D end, L),
    count(L2,[]).

count([], Acc) -> Acc;
count([H|T], Acc) -> 
    case lists:keytake(H,1,Acc) of
        false -> count(T, [{H,1} | Acc]);
        {value, {H,N}, Acc2} -> count(T, [{H,N+1} | Acc2])
    end. 
```

输出：

```
1> test:test().
[{"DNE-Done",2},{"SND-Stuff Needs Doing",1}]
2> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T22:43:17.593

我没有玩过 Riak，但我假设您正在使用典型的 erlang 解码 json（[{struct,Values}] 格式）。

```
[{"desc":"Stuff Needs Doing","code":"SND"},{"desc":"Done","code":"DNE"}] 
```

上面的 json 字符串将解码为 erlang 为：

```
[{struct,[{<<"desc">>,<<"Stuff Needs Doing">>},
      {<<"code">>,<<"SND">>}]},
{struct,[{<<"desc">>,<<"Done">>},{<<"code">>,<<"DNE">>}]}] 
```

然后这个列表理解会给你你正在寻找的结果（并保持正确的结果格式）：

```
[{struct,[{<<X/binary,"-",Y/binary>>,1}]}||{struct,[{<<"desc">>,Y},{<<"code">>,X}]}<-Data]. 
```

“数据”是 erlang 解码的 JSON。

这会产生：

```
[{struct,[{<<"SND-Stuff Needs Doing">>,1}]},{struct,[{<<"DNE-Done">>,1}]}] 
```

将 JSON 字符串编码为：

```
[{"SND-Stuff Needs Doing":1},{"DNE-Done":1}] 
```

* * *

# php - 如何：非 Facebook 用户发布到 Facebook 页面墙

> ID：13828197
> 
> 赞同：3
> 
> 时间：2012-12-11T20:42:25.123
> 
> 标签：php, facebook, access-token, facebook-wall

我正在考虑一个场景，我需要你的意见，这是否可能。

我有一个普通的网站，在这个网站上我有一个表格，通过发送表格，它也应该发送到一个特定的 Facebook 页面。作为正常的页面状态更新。现在我不想强迫我的用户注册到 facebook 以发送表格。

通过阅读此处的一些文章和 facebook API，我认为这是可能的，但我有一个无法解决的问题：

1.  Facebook 应用程序创建
2.  获取管理员的用户令牌
3.  获取页面访问令牌以在页面墙上发布

这些点（1-3）应该可以正常工作，但这是我的问题：

如果我是对的，令牌会在一段时间后过期 - 如何获得不会过期的令牌？或者还有其他方法可以解决这个问题吗？

这是在 facebook 页面上发布的工作代码：

```
$attachment = array(
'access_token' => 'BACyul4fRfyEmI3xwMDs..........................',
'message'=> "Hello Test"
);
$result = $facebook->api('/'.$page_id.'/feed', 'POST', $attachment); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T22:52:01.983

> 如何获得不会过期的令牌？或者还有其他方法可以解决这个问题吗？

无法获得不会过期的令牌，但可以对其进行扩展。阅读[此处](https://developers.facebook.com/docs/howtos/login/extending-tokens/)了解更多信息。但最佳做法是查看他们是否已经使用 SDK 登录，如果没有，则将他们重定向到登录。就是这么简单。

您不需要`access_token`在附件中添加，facebook SDK 会为您处理。所以这很好：

```
$attachment = array(
'message'=> "Hello Test"
);
$result = $facebook->api('/'.$page_id.'/feed', 'POST', $attachment); 
```

[本文档](https://developers.facebook.com/docs/reference/api/post/)中提供了更多参数

# ruby-on-rails - Rails 查看哈希数组

> ID：13828198
> 
> 赞同：0
> 
> 时间：2012-12-11T20:42:31.093
> 
> 标签：ruby-on-rails, ruby, arrays

在我的 Rails 应用程序中，现在我有这样的数据：

```
[[{:car=>"", :article=>"", :group=>"", :price=>""},
  {:car=>"Volkswagen", :article=>"7H0127401A", :group=>"FILTER", :price=>"0,564"},
  {:car=>"Volkswagen", :article=>"7H0127401B", :group=>"FILTER", :price=>"0,546"}, 
  {:car=>"Volkswagen", :article=>"7H0127401D", :group=>"FILTER", :price=>"0,42"}], 
 [{:car=>"", :article=>"", :group=>"", :price=>""}, 
  {:car=>"Volkswagen", :article=>"7H0127401A", :group=>"FILTER", :price=>"0,564"}],   
 [{:car=>"", :article=>"", :group=>"", :price=>""}, 
  {:car=>"Volkswagen", :article=>"7H0127401B", :group=>"FILTER", :price=>"0,546"}]] 
```

并查看：

```
=@oem_art.each do |oem|
      -oem.each do |oo|
        %tr{:class => cycle("zebra-stripe zebra-grey zebra1", "zebra-stripe zebra-grey zebra2")}   
          %td
            = oo[:car]
          %td
            %h4
              = oo[:article]            
          %td
            = oo[:group]
          %td
            = oo[:price] 
```

但我怎样才能以更美丽的方式做到这一点？另外如何用空键跳过散列？我怎样才能通过标准的一个循环来做到这一点，例如：

```
=@oem_art.each do |oem|
          = oem.car
          %td
            =oem.price 
```

怎么弄平？但是这里没用...

UPD

```
 def original_art
    @article = Article.find_by_ART_ID(params[:id])
    @constr_num = ArtLookup.get_construction_number(@article.ART_ID)
    oem_art = []
    @constr_num.each do |o|
      as_oem = get_from_as_oem(o.ARL_SEARCH_NUMBER)
      if as_oem.present?
        oem_art << as_oem
      end
    end    
    @oem_art = oem_art.to_a.uniq
    @article = Article.first
    @oem_art
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T20:55:28.333

美是个人品味的问题，并且`flatten`对于避免嵌套循环有些用处。

```
- @oem_art.flatten.reject { |h| h[:car].empty? }.each do |oem|
  = oem[:car]
  # And so on ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T21:49:36.523

这就是我在对该问题的评论中提出的观点。如果您有`oem_art`：

```
[[{:car=>"", :article=>"", :group=>"", :price=>""},
  {:car=>"Volkswagen", :article=>"7H0127401A", :group=>"FILTER", :price=>"0,564"},
  {:car=>"Volkswagen", :article=>"7H0127401B", :group=>"FILTER", :price=>"0,546"}, 
  {:car=>"Volkswagen", :article=>"7H0127401D", :group=>"FILTER", :price=>"0,42"}], 
 [{:car=>"", :article=>"", :group=>"", :price=>""}, 
  {:car=>"Volkswagen", :article=>"7H0127401A", :group=>"FILTER", :price=>"0,564"}],   
 [{:car=>"", :article=>"", :group=>"", :price=>""}, 
  {:car=>"Volkswagen", :article=>"7H0127401B", :group=>"FILTER", :price=>"0,546"}]] 
```

即元素是：

```
1\. [{:car=>"", :article=>"", :group=>"", :price=>""},
      {:car=>"Volkswagen", :article=>"7H0127401A", :group=>"FILTER", :price=>"0,564"},
      {:car=>"Volkswagen", :article=>"7H0127401B", :group=>"FILTER", :price=>"0,546"}, 
      {:car=>"Volkswagen", :article=>"7H0127401D", :group=>"FILTER", :price=>"0,42"}]

2\. [{:car=>"", :article=>"", :group=>"", :price=>""}, 
      {:car=>"Volkswagen", :article=>"7H0127401A", :group=>"FILTER", :price=>"0,564"}]

3\. [{:car=>"", :article=>"", :group=>"", :price=>""}, 
      {:car=>"Volkswagen", :article=>"7H0127401B", :group=>"FILTER", :price=>"0,546"}] 
```

如果你调用`oem_art.uniq`这将删除重复的元素，但 3 个元素都是不同的，所以什么都不会被删除。它实际上不会从元素中删除 7H0127401A 和 7H0127401B 的重复*项*。

# facebook-graph-api - 图形 API 太慢 - 获取用户信息的其他方式

> ID：13828199
> 
> 赞同：0
> 
> 时间：2012-12-11T20:42:32.343
> 
> 标签：facebook-graph-api, time, get, facebook-fql

我使用以下代码通过 Facebook Graph API 获取用户信息：

```
try{
        $home = $facebook->api("/$user/home");
        $feed = $facebook->api("/$user/feed");
 ... 
```

我得到什么：

```
 Array
(
[data] => Array
    (
        [0] => Array
            (
                [id] => 1110904xxx
                [from] => Array
                    (
                        [category] => Computers/internet website
                        [name] => Test
                        [id] => 111090485635468
                    )

                [message] => Testing app for Facebook
                [picture] => https://fbcdn-photos-a.akamaihd.net/xxx
                [link] => http://www.facebook.com/photo.php?xxx
                [icon] => https://s-static.ak.facebook.com/rsrc.php/xx

 ... 
```

并正确显示：

```
<?php $msg = $home['data']['0']['message'];
echo $msg; ?> 
```

我会做一些问题以避免创建很多主题：

1.  我做得对吗？

2.  加载信息需要很多时间。还有其他方法可以获取用户主页吗？你能告诉我一个如何获取用户主页的例子吗？

3.  还有其他标签，例如*status*和 timeline_photo。我怎样才能在代码中识别用户发布的内容？如果是状态更新或照片更新。

非常感谢！上帝保佑你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T22:58:31.330

> 我做得对吗？

是的，您的解决方案很好。

> 加载信息需要很多时间。还有其他方法可以获取用户主页吗？你能告诉我一个如何获取用户主页的例子吗？

你不会找到比这更快的东西了。很可能瓶颈在您的服务器上。在那里搜索速度问题。

> 还有其他标签，例如 status 和 timeline_photo。我怎样才能在代码中识别用户发布的内容？如果是状态更新或照片更新。

`type`每个帖子都会返回一个字段。检查它以确定它是什么类型。例如：$home['data']['0']['type']

# facebook - 二维码扫描后登录 Facebook

> ID：13828202
> 
> 赞同：1
> 
> 时间：2012-12-11T20:42:49.547
> 
> 标签：facebook, url, redirect, login, qr-code

当他们扫描二维码时，我想将用户重定向到我的 Facebook 活动页面。但是，当扫描二维码时，我会被重定向到手机上的登录页面。是否可以重定向到特定的活动页面？

谢谢-k-

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T22:53:54.980

Just send them to this url: [http://m.facebook.com/EVENT_ID](http://m.facebook.com/EVENT_ID)

Such as:

[http://m.facebook.com/371939689563437](http://m.facebook.com/371939689563437)

# shell - AWK如何从文件中读取一行并使用子字符串获取一些值

> ID：13828204
> 
> 赞同：1
> 
> 时间：2012-12-11T20:43:01.687
> 
> 标签：shell, unix, awk

我是 AWK 的新手。你能告诉我如何使用awk从文件中读取一行吗？如何使用读取行中的子字符串函数获取值并将其存储到变量中？例如这里是数据集：

```
01 001   410070300186169                 359829047319420
01 002   410070234186169                 359829043245420
01 001   410070234186169                 359829047319420 
```

我想检查位置 4 到 6 的值是否为“001”，然后将数据写入文件 file_1，如果值为“002”，则将数据写入文件 file_2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T21:11:29.483

干得好; 您可以将所有内容放在一行中，但为了便于阅读，我将其分解为多个：

```
awk '$2=="001" {print > "file_1"}
     $2=="002" {print > "file_2"}' input_file 
```

**解释：**

*   `awk`默认情况下，使用空格和制表符作为分隔符将每一行分隔为字段，因此对于读取的每一行，第二列中的值将保存在`$2`
*   `$2=="001" {print > "file_1"}`：如果`$2`是`001`，则将整行打印到`file_1`
*   `$2=="002" {print > "file_2"}`: 同样对于`002`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T21:10:52.690

您可以像这样在 awk 1 班轮中完成所有这些操作：

```
awk '$2 == "001" {print > "file_1"} $2 == "002" {print > "file_2"}' infile 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T20:50:26.203

你可以读入 $0 与

```
getline <file 
```

那么你可以使用

```
 substr($0, 1 , 5) 
```

获取从索引 1 开始，长度为 5 的 $0 子字符串

# http - 禁止从 dojo/request 向浏览器控制台写入错误

> ID：13828211
> 
> 赞同：2
> 
> 时间：2012-12-11T20:43:40.377
> 
> 标签：http, dojo, firebug

有谁知道在执行 dojo/request 时如何禁止在浏览器控制台中显示错误。

例如，我向后端发出一个 post 请求，它返回 HTTP 400，告诉我由于验证检查而发生错误。

我将在我的代码中适当地处理它，显示一些验证警告但仍然 dojo/request 将错误记录到控制台中：

![例子](../Images/334f6c5f8b4798a99eae73c7076aa383.png)

这个例子是在 HTTP500 上的，但在 HTTP400 上也是一样的。

这是一个代码片段

```
var results = request.post("/webapp/target/save", {
                data:       dojo.toJson(this._dataObject),
                headers:    this.headers,
                handleAs:   "json"
            }); 
```

必须有一种方法可以在生产代码中隐藏它:)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T11:27:01.663

我不认为这是可能的。报告网络错误不是 Dojo 的特性，也不是普通的 JavaScript。偶`event.preventDefault()`/`event.stopPropagation()`处理粗的时候`XMLHttpRequest`还是`console.error = function(){}`没有效果的。

您可以禁止在 Firebug 中记录网络错误： ![在此处输入图像描述](../Images/3e4e49cf56b886780b57688e1293819e.png)

[IE9 中的Dragonfly](http://www.opera.com/dragonfly/)和 F12 开发人员工具不会将网络错误记录到控制台中。Chrome 开发工具可以，但我找不到禁用它的方法。

用户不会在打开开发工具的情况下使用您的应用程序，因此他们根本不会看到任何错误，而愿意看到错误的人有几十种方法来完成该*黑客攻击*。无论如何，我也希望在这里有一个选择。

# sip - SIP 注册和订阅

> ID：13828215
> 
> 赞同：1
> 
> 时间：2012-12-11T20:43:52.560
> 
> 标签：sip

我想了解 REGISTER 和 SUBSCRIBE 的细微差别。在大多数情况下，您希望 UAC 注册然后订阅。UAC可以订阅但不注册..？或者 UAC 可以注册的帐户数量超过订阅的数量。

例如，注册 5 个帐户并订阅 3 个帐户

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T10:11:47.543

[REGISTER](https://www.rfc-editor.org/rfc/rfc3261#section-10)消息将您的URI `Contact`（您的用户代理所在的位置）与您的`From`URI（您是谁）相关联。

[SUBSCRIBE](https://www.rfc-editor.org/rfc/rfc3265)消息表明您希望接收有关某种事件的通知。[sipwiz 给出了一个](https://stackoverflow.com/a/13831517/10259)被通知呼叫转移状态的例子（它实际上使用[REFER](https://www.rfc-editor.org/rfc/rfc3515)消息来执行转移）。

什么样的活动？几乎任何你想要的。为 SIP 定义了几个不同的事件包，包括呼叫转移（REFER 请求）和[出席](https://www.rfc-editor.org/rfc/rfc3856)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T01:46:59.140

两种类型的请求之间没有规定的联系。它们可以共享一个共同的目的，例如更新和通知存在信息，但除了这些情况之外，它们的目的在很大程度上是独立的。

例如，SUBSCRIBE 请求通常用于设置订阅以发送有关呼叫转移状态的通知，这与 REGISTER 请求完全无关。

是的，您可以在 5 个帐户上注册并在 3 个帐户上订阅某种活动。您还可以在 5 个帐户上注册并在所有 5 个帐户上订阅 3 个不同的事件包，这样您最终就获得了 15 个订阅等。

# c# - 使用 linq 按范围分组

> ID：13828216
> 
> 赞同：9
> 
> 时间：2012-12-11T20:43:59.547
> 
> 标签：c#, linq, group-by, range

我们如何使用分组范围等于或大于？

```
var data = new[] {
    new { Id = 0, Price = 2 },
    new { Id = 1, Price = 10 },
    new { Id = 2, Price = 30 },
    new { Id = 3, Price = 50 },
    new { Id = 4, Price = 120 },
    new { Id = 5, Price = 200 },
    new { Id = 6, Price = 1024 },
};

var ranges = new[] { 10, 50, 100, 500 };
var grouped = data.GroupBy( x => ranges.FirstOrDefault( r => r > x.Price ) );

grouped ouput is 
price 10-50 -> 3 
price 50-100 -> 1 
price 100-500 -> 2 
```

需要的输出按等于或大于使用的范围分组

```
price >= 10 -> 6
price >= 50 -> 4
price >= 100 -> 3
price >= 500 -> 1 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-11T20:54:42.307

```
var grouped = ranges.Select(r => new { 
            Price = r, 
            Count = data.Where(x => x.Price >= r).Count() }); 
```

还有另一种选择（如果您有大量数据，那么分组比枚举每个价格组的所有数据要好）：

```
var priceGroups = data.GroupBy(x => ranges.FirstOrDefault(r => r > x.Price))
                      .Select(g => new { Price = g.Key, Count = g.Count() })
                      .ToList();

var grouped = ranges.Select(r => new
{
    Price = r,
    Count = priceGroups.Where(g => g.Price > r || g.Price == 0).Sum(g => g.Count)
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T21:08:13.717

分组对源进行**分区**，每个项目都分配给一个组。

你所拥有的是一个好的开始：

```
var data = new[] {
    new { Id = 0, Price = 2 },
    new { Id = 1, Price = 10 },
    new { Id = 2, Price = 30 },
    new { Id = 3, Price = 50 },
    new { Id = 4, Price = 120 },
    new { Id = 5, Price = 200 },
    new { Id = 6, Price = 1024 },
};

var ranges = new[] { 10, 50, 100, 500 };
var grouped = data.GroupBy( x => ranges.FirstOrDefault( r => r <= x.Price ) ); 
```

跟进：

```
int soFar = 0;
Dictionary<int, int> counts = grouped.ToDictionary(g => g.Key, g => g.Count());
foreach(int key in counts.Keys.OrderByDescending(i => i))
{
  soFar += counts[key];
  counts[key] = soFar;
} 
```

* * *

或者，如果您想在一个 linq 语句中执行此操作：

```
int soFar = 0;
var grouped = data
  .GroupBy( x => ranges.FirstOrDefault( r => r <= x.Price ) )
  .OrderByDescending(g => g.Key)
  .Select(g =>
  {
    soFar += g.Count();
    return new Tuple<int, int>(g.Key, soFar)
  }); 
```

# .net - 异步页面 - 公共交通 - 服务总线

> ID：13828217
> 
> 赞同：0
> 
> 时间：2012-12-11T20:44:02.017
> 
> 标签：.net, servicebus, masstransit

我正在尝试学习如何使用[这里](http://masstransit-project.com/)找到的 Mass Transit 。

我用两个控制台制作了一个项目，可以让它们互相交谈。从本质上讲，我只是按照它附带的示例进行操作，并以这种方式学习。

我现在正试图让 Mass Transit 与 Web 应用程序一起工作。我在 VS2010 中使用示例项目内容制作了一个新的 Web 应用程序，并在页面上添加了一个按钮。这个想法是，当您单击按钮时，它会向队列添加一条消息，而我正准备为 Starbucks（公共交通附带的应用程序）提供示例应用程序，它会从队列中读取消息（Cashier 或 Barista 控制台）。所以本质上，我正在尝试将星巴克的“客户”程序变成一个网络界面。

问题：

我阅读了文档，看来我必须在 Application_Start 上的全局应用程序中初始化服务总线。我这样做，然后在按钮上调用它。我只是使用：

```
 sbc.UseMsmq();
 sbc.ReceiveFrom("msmq://localhost/test_queue");
 sbc.UseControlBus(); 
```

在初始化。

我刚刚拥有的按钮：

```
var message = new NewOrderMessage
{
CorrelationId = _transactionId,
Item = "1",
Name = "1",
Size = "1",
};     
bus.Publish(message); 
```

我也试过：

```
Bus.Instance.Publish(message, x => x.SetResponseAddress(Bus.Instance.Endpoint.Address.Uri)); 
```

和一大堆其他的东西。

它会引发错误，但在：

ServiceBusConfiguratorImpl.cs

这行说：

```
builder = configurator.Configure(builder); 
```

错误是：

```
Could not load file or assembly 'Stact, Version=1.1.0.0, Culture=neutral, PublicKeyToken=b800c4cfcdeea87b' or one of its dependencies. The system cannot find the file specified 
```

所以我有点失落......

就像我说的，我真正想做的就是将“客户”程序从星巴克示例更改为 Web 界面，这样我就可以学习如何将公共交通用于 Web 应用程序。

如果有人有关于如何运行它的工作示例或教程，将不胜感激。我在谷歌上搜索了几个小时，但没有发现任何有用的东西......：S

提前致谢，

最诚挚的问候，罗宾

.net、公共交通、MSMQ、C#、服务总线

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T02:17:31.820

因此，其中一个参考资料，最值得注意的是 Stact，不在网站的 bin 文件夹中。首先确保将 NuGet 引用复制到 Web 应用程序中。如果您遇到任何问题，我也会考虑联系邮件列表[https://groups.google.com/forum/?fromgroups=#!forum/masstransit-discuss 。](https://groups.google.com/forum/?fromgroups=#!forum/masstransit-discuss)通常得到比这里更好的响应。

据我从您的代码中可以看出，这似乎是正确的。只是发布到总线是您想要做的。装配错误只是意味着你错过了一些东西。一旦你过去了，它就会看到你是否有另一个错误。祝你好运！

# ocaml - 使 ocamlbuild 将 .ml 和 .mli 文件都传递给 ocamldoc

> ID：13828221
> 
> 赞同：8
> 
> 时间：2012-12-11T20:44:21.280
> 
> 标签：ocaml, ocamlbuild, ocamldoc

我想在我生成的文档中包含源代码。当我`ocamldoc`像这样在命令行上调用时，这有效`ocamldoc -I _build -html -keep-code -colorize-code *.{ml,mli} -d .docdir`：但是，我在将其与`ocamlbuild`.

我正在使用以下代码`myocamlbuild.ml`：

```
open Ocamlbuild_plugin;;

dispatch begin function
  | After_options ->
      Options.ocamldoc := S[A"ocamldoc"; A"-keep-code"; A"-colorize-code"]
  | _ -> ()
end 
```

但这仅包括没有相应接口文件的文件的源 - 与[这里](https://github.com/ocaml-batteries-team/batteries-included/issues/251)所说的相反，它看起来像`ocamlbuild`拒绝将`.ml`文件传递给`ocamldoc`当有`.mli`文件存在时。有没有办法哄 ocamlbuild 做我想做的事？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-07T13:13:41.147

因为我需要破解一些东西来做类似的事情，所以如果我在这里发布它作为答案可能会有所帮助（至少在 OCamlbuild 具有该功能之前）。所以，这是我的相关部分`myocamlbuild.ml`：

```
open Ocamlbuild_plugin;;

dispatch begin function
  | After_rules ->
     (* Using both .ml and .mli files to build documentation: *)
     rule "ocaml: ml & mli -> odoc"
       ~insert:`top
       ~tags:["ocaml"; "doc"; "doc_use_interf_n_implem"]
       ~prod:"%.odoc"
       (* "%.cmo" so that cmis of ml dependencies are already built: *)
       ~deps:["%.ml"; "%.mli"; "%.cmo"]
       begin fun env build ->
         let mli = env "%.mli" and ml = env "%.ml" and odoc = env "%.odoc" in
         let tags =
           (Tags.union (tags_of_pathname mli) (tags_of_pathname ml))
           ++"doc_use_interf_n_implem"++"ocaml"++"doc" in
         let include_dirs = Pathname.include_dirs_of (Pathname.dirname ml) in
         let include_flags =
           List.fold_right (fun p acc -> A"-I" :: A p :: acc) include_dirs [] in
         Cmd (S [!Options.ocamldoc; A"-dump"; Px odoc;
                 T (tags++"doc"++"pp"); S (include_flags);
                 A"-intf"; P mli; A"-impl"; P ml])
       end;

    (* Specifying merge options with tags: *)
    pflag ["ocaml"; "doc"; "doc_use_interf_n_implem"] "merge"
      (fun s -> S[A"-m"; A s]);
end 
```

然后将标签添加`doc_use_interf_n_implem`到`.ml`和/或`.mli`应该从实现和接口生成文档的文件应该可以解决问题。

使用上面的代码，添加合并选项也可以通过添加标签来完成，例如`merge(A)`（合并所有）。

请注意，这是一个 hack，可能会破坏复杂项目中的内容。值得注意的是，我没有使用`camlp[45]`-processed 文件测试它，也没有使用 4.00.1 以外的 OCamlbuild 版本进行测试。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T15:21:40.743

OCamlbuild 目前似乎不支持该功能。[你能在 bugtracker 上](http://caml.inria.fr/mantis/)提交一个功能请求吗？

# mysql - MySQL 触发器检查数据 - 如何调用过程和引用“新”？

> ID：13828222
> 
> 赞同：2
> 
> 时间：2012-12-11T20:44:23.980
> 
> 标签：mysql, stored-procedures, triggers

对于 MySQL，我想使用 before-insert 和 before-update 触发器来检查数据，类似于检查条件的工作方式。我可以很容易地对此进行编码，并且可以正常工作，但是由于我需要两个触发器（插入+更新）并且检查代码相同，因此我想将其放入一个过程中。但是，似乎我不能在过程中使用“新”限定符——只能在触发器中使用。也不能作为参数传递。

任何想法如何做到这一点？我真的很讨厌不得不在两个触发器中复制检查代码。

（太糟糕了，触发器语法不能像“CREATE TRIGGER t BEFORE INSERT-OR-UPDATE ON ...”。）

更新：这是我编写的一个 PHP 函数，用于创建两个触发器，而不必拥有两个检查代码副本。我仍然想知道是否有一种纯 MySQL 方法可以在不复制检查代码的情况下执行此操作。

```
function add_trigger($table, $sql) {
    dbquery2("drop trigger if exists table_{$table}_trigger1");
    dbquery2("drop trigger if exists table_{$table}_trigger2");
    dbquery2("create trigger table_{$table}_trigger1 before insert on $table for each row begin $sql end");
    dbquery2("create trigger table_{$table}_trigger2 before update on $table for each row begin $sql end");
} 
```

dbquery2 是我自己的调用 mysqli::query 的函数。

更新 2：鉴于 SQL 将由 PHP 生成，这是一个仅使用一个过程的改进版本。长得离谱的参数列表是 PHP 从 information_schema 生成的，因此它们的长度和冗余无关紧要。

```
function add_trigger($table, $sql) {
    if ($result = dbquery2("select column_name, column_type from information_schema.columns where table_schema = 'cwadb_local' and table_name = '$table'")) {
        while ($row = $result->fetch_assoc()) {
            $cols .= ", new.{$row['column_name']}";
            $params .= ", {$row['column_name']} {$row['column_type']}";
        }
        $cols = substr($cols, 2); // remove extra ", " at front
        $params = substr($params, 2);
        $t1 = "create trigger table_{$table}_trigger1 before insert on $table for each row begin call check_table_{$table}($cols); end";
        $t2 = "create trigger table_{$table}_trigger2 before update on $table for each row begin call check_table_{$table}($cols); end";
        $proc = "create procedure check_table_{$table}($params) begin $sql end";
        dbquery2("drop procedure if exists check_table_{$table}"); // like mysqli::query, but throws exception on error
        dbquery2("drop trigger if exists table_{$table}_trigger1");
        dbquery2("drop trigger if exists table_{$table}_trigger2");
        dbquery2($t1);
        dbquery2($t2);
        dbquery2($proc);
        echo "<p>Success!";
    }
} 
```

# forms - Access 2010：ColumnHistory 语法

> ID：13828226
> 
> 赞同：1
> 
> 时间：2012-12-11T20:44:42.560
> 
> 标签：forms, ms-access-2010

我阅读了很多论坛和博客，但我无法为我的问题找到解决方案......

我想在“控制源”字段中使用以下公式在文本字段中显示“ColumnHistory”

```
=ColumnHistory("Test","Comments","[ID]=" & Nz([ID],0)) 
```

在哪里：

*   “测试”是表名
*   “评论”是设置为备忘录和记录历史数据的列的名称
*   [ID] 是表格附带的默认/自动 ID 字段

以上所有方法都可以正常工作，直到我不想通过 ID 字段查询，而是通过名为“TID”的不同字段进行查询，所以如果我只是在公式中将 ID 替换为 TID，它会返回 #Error

有趣的观察：

1.  一旦从“ID”字段中删除“主键”，公式也会返回#Error
2.  如果我将主键添加到“TID”字段并调整公式，它仍然不起作用-#Error
3.  使用原始公式将主键返回到“ID”字段就可以了

知道如何让这个公式在没有 ID 字段的情况下工作吗？

# c++ - Exact differences in c++11 support when using libc++ versus libstc++ on Apple llvm 4.1?

> ID：13828229
> 
> 赞同：1
> 
> 时间：2012-12-11T20:44:53.323
> 
> 标签：c++, c++11, xcode4.5, llvm-clang, llvm-c++-api

Can anyone suggest a way to determine the differences in c++11 support when using libc++ versus libstdc++ that ship with the Apple LLVM compiler?

In particular, I am currently using LLVM 4.1 that ships with Xcode 4.5.2\.

Presumably, the answer depends in part on the level of c++11 support offered by clang for this version, and in part on the version of libc++ and libstdc++ were shipped with 4.1\.

My general sense is that c++11 support is "nearly complete" these days when using libc++, but that you lose something when switching to libstdc++, but i can't figure out what -- a few simple c++11 features seem to work fine on both.

I get the sense that the c++11 support for the libstdc++ that ships with gcc 4.8 is pretty good, but I have no idea if the libstdc++ that ships with llvm 4.1 is old or not.

Also, I get the sense that there is no difference in the level of c++11 support (using llvm 4.1 with libc++) when compiling for osx or ios 6.01, but I'm not positive.

Any suggestions on how to figure all this out?

[Context: due to upstream dependencies,I might need to link to libstdc++ instead of libc++, so I want to figure out what I might be losing]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T21:23:01.390

The libstdc++ that ships with LLVM 4.1 is gcc-4.2\. That version has no C++11 support. It does have some tr1 support though.

Additionally, the best way to check for C++11 *language* features is to use clang's `has_feature` [macro test](http://clang.llvm.org/docs/LanguageExtensions.html#cxx11).

For C++11 library features, you'll need to go with libc++.

# git - 从 Git 中的 fork 父级拉取更改

> ID：13828230
> 
> 赞同：26
> 
> 时间：2012-12-11T20:44:54.480
> 
> 标签：git, github

你如何从 Git 中的 fork 的父级中提取更改，特别是在 github 配置的项目中？

例如，假设我将[http://github.com/originaluser/originalproject](http://github.com/originaluser/originalproject)分叉为[http://github.com/myuser/myproject](http://github.com/myuser/myproject)。我不打算将 myproject 永久分叉，因为我只想维护一个“dev”分支来测试一些实验性功能，然后最终将其合并回原始项目。

因此，每当对 originalproject 进行提交时，我都希望能够将它们拉下来并将它们与 myproject 合并。但是，我也希望能够将更改推送到 myproject 中，但在我的分支完成并经过测试之前，还不能立即创建拉取请求以将它们合并到 originalproject 中。最好的方法是什么？

编辑：默认情况下，当我为本地开发创建我的 github 分支的本地结帐/分支，然后向上推/拉更改时，这些更改只会影响我的个人分支。我从未从原始项目中得到任何更改。我该如何解决？

抱歉任何不正确的 git 术语。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2019-01-22T18:02:47.183

扩展其他答案，这些是我在 tsc-watch 的分叉上采取的步骤：

```
git remote add upstream https://github.com/gilamran/tsc-watch.git
git fetch upstream
git merge upstream/master
git push 
```

解释：

1.  将远程服务器添加为上游
2.  从上游获取所有更改
3.  将上游分支的更改合并到我的主分支
4.  将所有更改推送到 github

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-11T20:52:49.197

您可以将父存储库（上游）添加为另一个远程分支。就像是

```
git remote add upstream ... 
```

然后你可以*git fetch*查看任何更改，然后 rebase/merge... 随便。

# knockout.js - 使用原生 Knockout 模板引擎生成

> ID：13828233
> 
> 赞同：0
> 
> 时间：2012-12-11T20:45:21.700
> 
> 标签：knockout.js, template-engine

如何使用 Knockout 本机模板引擎为给定模板和视图模型生成绑定但未附加的 html 元素？

我想实现类似于：

```
var template = "<div data-bind="text: name"></div>";
var viewModel = { name: "Hello" };
var domNode = ko.applyBindings(template, viewModel);

$('body').append(domNode); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T21:01:05.550

是的，您可以这样做，但您应该先将 dom 元素添加到页面，然后再应用绑定：

```
var template = "<div id='TemplateId' data-bind='text: name'></div>";
var viewModel = { name: "Hello" };

var test = $('body').append(template);
var domElement = $('#TemplateId')[0];
ko.applyBindings(viewModel, domElement); 
```

这是工作小提琴：http: [//jsfiddle.net/mq2GU/](http://jsfiddle.net/mq2GU/)

# android - 如何为 android 应用程序提供类别类型 ENTERTAINMENT

> ID：13828236
> 
> 赞同：0
> 
> 时间：2012-12-11T20:45:35.167
> 
> 标签：android, android-manifest

我是 android 新手，很抱歉，如果问题听起来很愚蠢，我已经创建了一个小部件，我想将其上传到 ENTERTAINMENT 类别。在 Play 商店中，有类别类型为 ENTERTAINMENT 的应用程序 [https://play.google.com/store/apps/category/ENTERTAINMENT?feature=category-nav](https://play.google.com/store/apps/category/ENTERTAINMENT?feature=category-nav)但我没有在类别类型[http://support 中找到此定义。 google.com/googleplay/android-developer/bin/answer.py?hl=en&answer=113475](http://support.google.com/googleplay/android-developer/bin/answer.py?hl=en&answer=113475)。我需要让它在 ENTERTAINMENT 下可用。

谷歌怎么知道它是一个普通的应用程序或一个小部件。我需要做一些特别的事情或存储解析 AndroidManifest.xml。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T20:49:48.637

在开发者控制台 v2（他们的新外观）中，肯定有一个娱乐类别。您在准备 Play 商品详情时执行此操作。澄清一下，这是在网站上的 xml 之外。![播放商品详情](../Images/82a7e655649a896b53309762e0b9a9ac.png)

至于小部件与应用程序，只需在标题中指定它是小部件，Play 商店没有小部件的特定类别，因为小部件是应用程序的一部分。

# scala - 在 scala 中提供“uncurried”的一般浓缩

> ID：13828238
> 
> 赞同：1
> 
> 时间：2012-12-11T20:45:43.633
> 
> 标签：scala, currying, scalaz, shapeless

`f: A => B => ... => Z`在 scala/scalaz/shapeless/etc 中是否存在一般丰富的内容？这样`f.uncurried:(A, B, ...) => Z`吗？

目前我有这个，但我相信某处必须有一个预先存在的、更通用的解决方案。

```
implicit def enrichMyCurriedFunction[A, B, C] = new EnrichedCurriedFunction[A, B, C](_)

class EnrichedCurriedFunction[A, B, C](f: A => B => C) {
  def uncurried: (A, B) => C = (a, b) => f(a)(b)
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T20:56:42.223

确实有一个内置函数：

```
val foo = (x: Int) => (y: Int) => x+y
foo: Int => (Int => Int) = <function1>

Function.uncurried(foo)
res16: (Int, Int) => Int = <function2> 
```

# iphone - 如何移动到另一个导航控制器

> ID：13828241
> 
> 赞同：1
> 
> 时间：2012-12-11T20:46:11.403
> 
> 标签：iphone, objective-c, cocoa-touch, ios5, ios4

我有一个导航控制器，我想移动到另一个导航控制器。所以基本上当人们注销时，他们会进入登录注册导航控制器。我怎样才能在ios中完成它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T20:48:55.123

您可以像这样重新分配根视图控制器：

```
self.window.rootViewController = navigationController; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T21:38:52.720

为什么不将登录屏幕呈现为模态视图控制器？如果用户注销，您将在当前屏幕上显示模态视图控制器。当用户登录时，您关闭显示应用程序真实部分的模式登录视图控制器。

# python - Matplotlib：图例中的颜色编码文本而不是线条

> ID：13828246
> 
> 赞同：18
> 
> 时间：2012-12-11T20:46:42.403
> 
> 标签：python, numpy, matplotlib, plot, legend

在某些 LCD 显示器上，图例中水平线的颜色很难区分。（见附图）。因此，不是在图例中画一条线，而是可以只对文本本身进行颜色编码吗？所以换句话说，蓝色的“y = 0x”，绿色的“y = 1x”等等......

```
import matplotlib.pyplot as plt
import numpy as np

x = np.arange(10)

fig = plt.figure()
ax = plt.subplot(111)

for i in xrange(5):
    ax.plot(x, i * x, label='$y = %ix$' % i)

ax.legend()

plt.show() 
```

![在此处输入图像描述](../Images/484d5db648860f1074575d7ef1dc94aa.png)

PS。如果仅在图例中可以使线条变粗，但在情节中却不能，这也可以。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-08-27T23:19:16.230

I was wondering the same thing. Here is what I came up with to change the color of the font in the legend. I am not totally happy with this method, since it seems a little clumsy, but it seems to get the job done [Edit: see below for a better way]:

```
import matplotlib.pyplot as plt
import numpy as np

x = np.arange(10)

fig = plt.figure()
ax = plt.subplot(111)

colors = []
for i in xrange(5):
    line, = ax.plot(x, i * x, label='$y = %ix$' % i)
    colors.append(plt.getp(line,'color'))

leg = ax.legend()

for color,text in zip(colors,leg.get_texts()):
    text.set_color(color)

plt.show() 
```

![the colorful results](../Images/669aea39614eacf2d904d8c2fecffe9a.png)

2016 Edit:

Actually, there is a better way. You can simply iterate over the lines in the legend, which avoids needing to keep track of the colors as the lines are plotted. Much less clunky. Now, changing the line colors is basically a one-liner (okay, it's actually a two-liner). Here is the complete example:

```
import matplotlib.pyplot as plt
import numpy as np

x = np.arange(10)

fig = plt.figure()
ax = plt.subplot(111)

for i in xrange(5):
    ax.plot(x, i*x, label='$y = %ix$'%i)

leg = ax.legend()

# change the font colors to match the line colors:
for line,text in zip(leg.get_lines(), leg.get_texts()):
    text.set_color(line.get_color())

plt.show() 
```

2017 Edit: Lastly, if you really do want the color-coded text *instead* of a line (as the title suggests), then you can suppress the lines in the legend by using

```
 leg = ax.legend(handlelength=0) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-11T21:35:44.473

只需设置`linewidth`图例句柄：

```
In [55]: fig, ax = plt.subplots()

In [56]: x = np.arange(10)

In [57]: for i in xrange(5):                    
   ....:     ax.plot(x, i * x, label='$y = %ix$' % i)
   ....:     

In [58]: leg = ax.legend(loc='best')

In [59]: for l in leg.legendHandles:            
   ....:     l.set_linewidth(10)
   ....: 
```

![legend_linewidth.png](../Images/090fc78f765f944f48aa91e19dd2a634.png)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-01-16T12:37:12.797

在通过图例文本 getter/setter 和轴线 getter/setter 完成所有绘图之后，可以干净地完成此操作。在绘图之前将图例文本颜色设置为与 for 循环中的线条颜色相同。

```
import matplotlib.pyplot as plt
import numpy as np

x = np.arange(10)

fig = plt.figure()
ax = plt.subplot(111)

for i in xrange(5):
    ax.plot(x, i * x, label='$y = %ix$' % i)

leg = ax.legend()

def color_legend_texts(leg):
    """Color legend texts based on color of corresponding lines"""
    for line, txt in zip(leg.get_lines(), leg.get_texts()):
        txt.set_color(line.get_color())  

color_legend_texts(leg)    

plt.show() 
```

在这个答案中要注意的主要区别是格式化绘图可以与绘图操作完全分离。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-05-03T19:57:04.213

提供更通用的解决方案来使用图例句柄的颜色为图例文本着色：这不仅适用于线条，而且适用于图例中的任何艺术家。它看起来如下：

```
import matplotlib.pyplot as plt
import numpy as np

x = np.arange(10)

fig = plt.figure()
ax = plt.subplot(111)

ax.plot(x, 3 * x, label='$y = %ix$' % 3)
ax.scatter(x, 4 * x, color="red", label='$y = %ix$' % 4)
ax.hist(x, label="hist")
ax.errorbar(x,2*x,yerr=0.3*x, label='$y = %ix$' % 2)

leg = ax.legend()

for artist, text in zip(leg.legendHandles, leg.get_texts()):
    try:
        col = artist.get_color()
    except:
        col = artist.get_facecolor()
    if isinstance(col, np.ndarray):
        col = col[0]
    text.set_color(col)

plt.show() 
```

[![在此处输入图像描述](../Images/bbd32f6ef75833cc8b2c246428a42c31.png)](https://i.stack.imgur.com/Vq0TE.png)

# sql - 具有 LEFT JOIN 和聚合函数的 MS Access 链接表查询未返回预期结果

> ID：13828252
> 
> 赞同：0
> 
> 时间：2012-12-11T20:47:05.370
> 
> 标签：sql

**我有一个查询，在 SQL db 上运行时输出以下结果**

```
CreatedDate                 QuoteNumber NumberOfLicensedDrivers
2012-07-01 10:38:49.157 48641           0
2012-07-01 18:35:38.680 48650           2
2012-07-02 08:44:33.770 48670           1
2012-07-02 09:12:09.447 48700           0 
```

**为了这篇文章，我已经简化了查询，但基本上是：**

```
SELECT DISTINCT
       CreatedDate,
       QuoteNumber,
       count([DriversLicense]) as NumberOfLicensedDrivers
FROM table1 LEFT OUTER JOIN table2 on table2.QuoteID = table1.ID 
WHERE CreatedDate > '7/1/2012'
GROUP BY QuoteNumber, CreatedDate 
ORDER BY CreatedDate ASC 
```

这个查询给了我预期的输出。我希望所有引号都显示在我的输出中。如果有 0 个驱动程序，我希望显示 0 个。问题是我需要使用链接表在 MS 访问中创建相同的结果。MS 访问输出没有给我预期的结果。

**这是我用于 MS ACCESS 的查询**

```
SELECT DISTINCT 
     quote.CreatedDate, 
     quote.QuoteNumber, 
     count(quoteDrivers.DriversLicense) As NumberOfLicensedDrivers
FROM quote 
LEFT JOIN quoteDrivers ON quote.ID = quoteDrivers.QuoteID
WHERE (quote.CreatedDate>#7/1/2012#)
GROUP BY quote.CreatedDate, quote.QuoteNumber
ORDER BY quote.CreatedDate; 
```

**输出显示没有许可的驱动程序：**

```
CreatedDate            QuoteNumber  NumberOfLicensedDrivers
7/1/2012 10:38:49 AM   48641    0
7/1/2012 6:35:39 PM    48650    0
7/2/2012 8:44:34 AM    48670    0
7/2/2012 9:12:09 AM    48700    0 
```

**但是，当我对 quoteDrivers 表添加一个额外的 WHERE 子句时：**

```
SELECT DISTINCT 
    quote.CreatedDate, 
    quote.QuoteNumber, 
    count(quoteDrivers.DriversLicense) As NumberOfLicensedDrivers
FROM quote 
LEFT JOIN quoteDrivers ON quote.ID = quoteDrivers.QuoteID
WHERE (quote.CreatedDate>#7/1/2012#)
and quoteDrivers.DriverAddedDate >#1/1/2012# ''Added this
GROUP BY quote.CreatedDate, quote.QuoteNumber
ORDER BY quote.CreatedDate; 
```

**我得到了预期的结果（减去 0 个驱动程序的引号）**

```
CreatedDate         QuoteNumber NumberOfLicensedDrivers
7/1/2012 6:35:39 PM 48650           2
7/2/2012 8:44:34 AM 48670           1 
```

**谁能解释为什么我没有在 quoteDrivers 表的 where 子句中指定列的情况下没有得到驱动程序的数量？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T21:00:39.480

不确定 Access 是否支持这一点，但在一般 SQL 中，将条件移动到 join 中的 on 子句将使查询的“外部”部分保持工作

```
Select
  quote.CreatedDate, 
  quote.QuoteNumber, 
  count(quoteDrivers.DriversLicense) As NumberOfLicensedDrivers
From
  quote 
    Left Join
  quoteDrivers 
    On quote.ID = quoteDrivers.QuoteID And quoteDrivers.DriverAddedDate > #1/1/2012#
Where
  quote.CreatedDate > #7/1/2012#
Group By
  quote.CreatedDate, 
  quote.QuoteNumber
Order By
  quote.CreatedDate; 
```

另外，你的 distinct 对这个 group by 来说是多余的。可能优化器足够聪明，不会变慢，但为什么要冒险！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T21:07:02.597

一个确定的解决方法：您可以在封装连接服务器端的 sql 服务器上创建一个视图，然后在 Access 中将视图作为链接表链接到该视图。还要检查日期变量逻辑，尝试用 DateDiff 函数替换它，以避免硬编码日期文字根据本地设置被不同解释的问题

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T03:55:25.630

我建议重写查询如下：

```
SELECT CreatedDate, QuoteNumber, Count(*) as NumberOfLicensedDrivers
FROM (
    SELECT q.CreatedDate, q.QuoteNumber, qd.DriversLicense
    FROM quote q INNER JOIN quoteDrivers qd ON q.ID = qd.QuoteID
    WHERE q.CreatedDate > #7/1/2012#
) X
GROUP BY CreatedDate, QuoteNumber
ORDER BY 1 
```

通过组合子查询中的表，然后从中获取驱动程序的数量，查询表单适合 MS SQL server SQL 和 MS Jet SQL（MS access SQL）的规则集，因此 ms 访问的范围较小做“错误的事情”，结果集应该是相同的。

我只是不确定日期格式#..#; 在 SQL 中，这通常是 '..'；如果后端是另一个 ms 访问数据库，则格式 #..# 将是强制性的，但鉴于它是 sql，'..' 可能会更好 - 虽然我不能肯定地说，所以你可能想测试一下。

希望这可以帮助 ：-）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T14:15:00.137

我的愚蠢抓住了我。我不确定为什么以下查询曾经有效。

```
SELECT DISTINCT 
    quote.CreatedDate, 
    quote.QuoteNumber, 
    count(quoteDrivers.DriversLicense) As NumberOfLicensedDrivers
FROM quote 
LEFT JOIN quoteDrivers ON quote.ID = quoteDrivers.QuoteID
WHERE (quote.CreatedDate>#7/1/2012#)
and quoteDrivers.DriverAddedDate >#1/1/2012# 
GROUP BY quote.CreatedDate, quote.QuoteNumber
ORDER BY quote.CreatedDate; 
```

quoteDrivers.QuoteID 是一个字符串，quote.ID 是一个 GUID。创建链接表时，MS 访问会在 GUIDS 周围添加方括号 {}。我不确定为什么只有在我对 quoteDrivers 表添加 where 子句时查询才有效。

**以下查询正是我所需要的。**

```
SELECT DISTINCT 
    quote.CreatedDate, 
    quote.QuoteNumber, 
    count(quoteDrivers.DriversLicense) As NumberOfLicensedDrivers
FROM quote 
LEFT JOIN quoteDrivers ON quote.ID = "{" + quoteDrivers.QuoteID + "}"
WHERE (quote.CreatedDate>#7/1/2012#)
GROUP BY quote.CreatedDate, quote.QuoteNumber
ORDER BY quote.CreatedDate; 
```

我应该事先解释一下列结构，很抱歉没有这样做。如果有人能解释为什么当我在 quoteDrivers 表中添加 where 子句时我的 join 有效，`("and quoteDrivers.DriverAddedDate >#1/1/2012#")`我将不胜感激。

# vb.net - 通过带有 vb.net 的 Amazon SES 发送电子邮件返回“接收到来自传输流的意外 EOF 或 0 字节”

> ID：13828255
> 
> 赞同：3
> 
> 时间：2012-12-11T20:47:15.853
> 
> 标签：vb.net, amazon-web-services, smtp, amazon-ses

我正在使用 vb.net 通过 Amazon SES 发送电子邮件。我正在使用 .net 框架 4.0。该代码无法在我的开发机器（Win XP SP3）上运行，但在 Win2k8 R2 服务器上可以完美运行。

我看到很多人在 Windows 服务器上遇到同样的问题，并用这个来修复它：http: [//support.microsoft.com/kb/948963](http://support.microsoft.com/kb/948963)，但我的 XP 机器还没有找到任何修复程序。

对于我的问题，我将不胜感激。异常的详细信息如下：

谢谢您的帮助

```
 Source=System
  StackTrace:
       at System.Net.Mail.SmtpClient.Send(MailMessage message)
       at System.Net.Mail.SmtpClient.Send(String from, String recipients, String subject, String body)
       at SMSNotifier.Form2.SendWithSMTP(String username, String password, String host, Int32 port) in C:\Documents and Settings\rprosper.COOPERATIVA\My Documents\Visual Studio 2010\Projects\SMSNotifier\SMSNotifier\Form2.vb:line 17
  InnerException: System.IO.IOException
       Message=Received an unexpected EOF or 0 bytes from the transport stream. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-14T21:12:39.520

有人正在断开连接。

如果您没有正确验证或使用正确的端口/地址，它可能是亚马逊，或者它可能是您的 ISP，因为许多阻止出站 SMTP 连接，但是如果没有看到代码，几乎不可能更具体。

在更一般的说明中，您可以使用 openssl 测试您的 SES 连接，这将为您提供比当前错误消息更多的信息。

[http://docs.aws.amazon.com/ses/latest/DeveloperGuide/send-email-smtp-client-command-line.html](http://docs.aws.amazon.com/ses/latest/DeveloperGuide/send-email-smtp-client-command-line.html)

# c# - 在会话中存储散列密码是否不可取？

> ID：13828259
> 
> 赞同：3
> 
> 时间：2012-12-11T20:47:32.823
> 
> 标签：c#, asp.net, asp.net-mvc, security, passwords

在（服务器端）会话中的用户对象中存储散列密码是否不可取？不言而喻，需要在某个时候检索加盐和散列的密码以比较散列以验证给定用户，但是一旦进行比较，是否存在与将其保存在用户对象中相关的可量化的安全风险？

* * *

鉴于评论中的讨论，问题的要点是密码和哈希数据将存储在用户对象中，一旦从数据库中检索到其余用户数据，则只需一次干净的调用。在发布这个问题之前，我明白当然存在*风险*，但它是否足以保证实施一个框架以从用户那里清除它，或者这样做只是一种良好的做法？

* * *

鉴于响应，我认为最好的解决方案是拥有一个包含密码和盐的凭据对象，该对象通过 ID 与用户相关联，但不直接存储在其中。

当用户尝试登录时，会通过电子邮件/用户名从数据库中检索用户对象（不包含密码数据）。然后读取 ID 并将其用于检索关联的凭证对象。然后可以进行密码验证。如果密码正确，则将用户置于会话中并销毁凭据对象。

结果是一个没有密码数据的用户对象，因此可以避免任何潜在的相关安全风险（尽管它们可能很小，如问题中所讨论的那样）。另一个结果是在用户对象使用之前没有手动清除用户对象中的密码数据。这是一个比要求每次都清除数据更可靠的系统，并且如果使用 EF 或类似技术，则不会在将对象的更改推送到数据库时意外删除密码数据的风险。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T20:51:50.837

就个人而言，我认为没有任何理由不这样做。如果加盐哈希是安全的，那么将其存储在服务器端会话中的安全性应该不会低于将其存储在数据库中的安全性。

毕竟，使用良好的加盐散列的全部意义在于，即使您的数据库遭到破坏并且有人获得了所有加盐散列，他们仍然无法恢复实际密码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T20:52:21.940

假设您信任您的服务器，我认为这不会太不安全。

对于理想的密码散列，散列的泄漏并不是非常重要的。如果盐没有暴露，那么实际上不可能恢复密码。如果构造散列的盐和元素被暴露（除了密码），那么它变得可能，但通常是不切实际的，因为彩虹表是无用的并且暴力是唯一的方法。如果您使用强大的散列算法，例如 SHA256 或 Bcrypt，您不必担心太多。

话虽如此，我绝对不建议只给陌生人密码哈希，但将其保存在您的服务器上应该几乎没有安全隐患（如果有的话）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T20:52:42.177

如果您的会话未针对客户端站点存储进行序列化，则不存在与此相关的即时威胁。但是，如果您必须在会话中存储哈希，那么您应该修改您的身份验证/授权逻辑以获得更好的应用程序设计。

# asp.net - 允许/拒绝用户执行特定活动的最佳方式是什么？

> ID：13828261
> 
> 赞同：0
> 
> 时间：2012-12-11T20:47:37.880
> 
> 标签：asp.net

我想使用内置的 ASP.NET 成员机制，但对我来说似乎还不够。它只允许人们做一堆任务（角色）。我可以允许一个人，但似乎很难拒绝一个人，即；让会计部门的人。查看敏感信息，但如何拒绝该部门的特定人员？我必须创建 AccountDept 和 AccountDeptNoSensitiveData 角色等等......如果有很多活动，那将是一团糟。

在我的情况下，具有允许/拒绝机制的旧经典组和用户要好得多。但是，如果有的话，我不想重新发明以前已经发明的东西，这就是我在这里要求的：

对于基于表单的身份验证，是否有任何 ASP.NET 成员机制的扩展变体或另一个好的“框架/样板/现成的”允许我授权/拒绝人们在我的应用程序中执行任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T21:48:54.367

基于声明的授权可能正是您想要的。用户不是具有特定角色和角色附带的所有授权，而是携带一个声明，这可以启用更精细的允许/拒绝检查。

来自[MSDN](http://msdn.microsoft.com/en-us/library/system.identitymodel.services.claimsprincipalpermission)：

> 这比通过纯 RBAC（基于角色的访问检查）提供的粒度要大得多，其中许多权限通常收集在单个角色下。也许，更重要的是，基于声明的授权可以更好地分离业务逻辑和授权策略，因为代码中对资源的特定操作可以要求许可，并且后端策略可以用于配置呈现实体必须拥有的声明为了满足需求。

这是一个来自 .NET Rocks 的非常好的播客，可以让您熟悉该主题：[Dominick Baier 带领我们了解基于声明的安全性！](http://www.dotnetrocks.com/default.aspx?showNum=674).

在 ASP.NET 4.5 中，当使用命名空间的表单身份验证时，核心框架能够执行基于声明的授权`System.Security.Claims`。该`Page.User`对象可以强制转换为[`ClaimsPrincipal`](http://msdn.microsoft.com/en-us/library/system.security.claims.claimsprincipal). 您可以检查委托人的主张并据此做出决定，即是否允许执行某项操作。有关[`ClaimsAuthorizationManager`](http://msdn.microsoft.com/en-us/library/system.security.claims.claimsauthorizationmanager)如何在 ASP.NET 中完成此操作的说明，请参阅参考资料。

您的代码可能会变得更复杂，但与尝试在多个角色定义中匹配所有可能的授权组合相比，它应该不那么令人头疼。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T21:49:11.093

在我看来，有一个缺失的部分是下一个层次 - 权利或操作。授权管理器有这些，但没有原生 API。使用基于 AzMan com 的 API 是邪恶的。

本质上，当您想做某事时，您会检查用户是否具有给定的权限。这些权限收集在您分配给用户的角色中。这使您可以精细地控制角色可以做什么，而无需数以百万计的角色。

可悲的是，我不知道有任何东西可以为您提供“权利 API”。我为我的应用程序创建了自己的应用程序，而且我看过的大多数应用程序似乎都是自己推出的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T12:05:48.060

也许我可以继续使用内置的 ASP.NET 成员资格提供程序并将角色用作组，并且不再询问“角色中的用户”：

```
 User.Identity.IsAuthenticated && Roles.IsUserInRole(user, role) 
```

相反，我可以添加任务列表和权限列表，如下所示：

```
 Tasks
    Task1    name="Accounting"
       Allow roles="Accounting", "Executive"
       Allow users="SalesPerson1", "OtherPerson2" //Granted people
       Deny  users="AccountingPerson1" //Banned person 
```

并征求用户许可

```
 User.Identity.IsAuthenticated && MyCustomSecurity.HaveRight(user, task) 
```

好的，有人已经做了我提到的事情：

[http://permissionmanager.codeplex.com/](http://permissionmanager.codeplex.com/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-07T09:45:11.033

要回答您的问题，基本上有两种方法可以允许/拒绝用户访问资源或执行特定活动。

1.  禁用所有内容或禁止所有内容（所有控件或组件），然后通过权限授予访问权限以打开可能性。这种方式是最安全的方式，除非他/她已被授予该操作，否则用户将无法做任何事情。
2.  默认情况下允许一切，然后分配限制以禁止或禁用操作。这是更快的方法，在这种情况下，您需要通过权限创建更少的限制

ASP.net 成员资格是一项在粒度、安全性、操作审核等方面受到限制的功能，如果时间不受限制，您仍然可以扩展它。

# ios - 如何执行此获取请求？

> ID：13828269
> 
> 赞同：0
> 
> 时间：2012-12-11T20:48:17.300
> 
> 标签：ios, core-data

我正在使用 Core Data 编写一个应用程序，其中有两个实体，一个称为 Item，另一个称为 CustomLabel。一个项目可以有多个自定义标签，而每个自定义标签只能与一个项目关联。

本质上，我想出去获取与一个特定项目相关的所有 CustomLabels，以便我可以显示它们。我该怎么做呢？

（我的 CustomLabel 实体具有 LabelName 和 Value 属性，而 Item 具有 Name、Price 和 Quantity 属性。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T20:55:58.667

```
 NSFetchRequest* fetchRequest = [[NSFetchRequest alloc] init];
 NSEntityDescription* entityDescription = [NSEntityDescription entityForName:@"Item" inManagedObjectContext:moc];
 NSPredicate* predicate = [NSPredicate predicateWithFormat:@"name == %@", itemName];
 [fetchRequest setPredicate:predicate];
 NSArray *customLabels = [moc executeFetchRequest:fetchRequest]; 
```

这假设您已经设置了托管对象上下文、设置了关系的实体等。

您将拥有的实体将是 Item 和 CustomLabel。您将为它们创建属性并建立它们之间的关系。

# php - 如何在 WooCommerce 类别页面中缩短（截断）长产品标题？

> ID：13828274
> 
> 赞同：2
> 
> 时间：2012-12-11T20:48:42.030
> 
> 标签：php, wordpress, woocommerce

我想在 WooCommerce 类别页面中用“...”结尾的短标题截断长产品标题。如果我是对的，类别页面中的产品由“content-product.php”的循环显示。

代码是：

```
<li<?php echo $class ?>>
<?php do_action( 'woocommerce_before_shop_loop_item' ); ?>

<a href="<?php the_permalink(); ?>">

    <div class="thumbnail">     
        <?php do_action( 'woocommerce_before_shop_loop_item_title' ); ?>

        <?php if ( yiw_get_option( 'shop_show_name' ) ) : ?>
            <strong class="<?php echo $title_position; ?>">
                <?php the_title(); ?>
            </strong>
        <?php endif ?>
    </div>

    <?php do_action( 'woocommerce_after_shop_loop_item_title' ); ?>
</a>

<?php do_action( 'woocommerce_after_shop_loop_item' ); ?>
</li> 
```

我发现很多 PHP 函数可以缩短一个长字符串（这个看起来很简单[http://shrtnr.us/r0yfwg](http://shrtnr.us/r0yfwg)），但我无法将该函数应用于`the_title()`...

如果有人能让我走上正确的道路，我将不胜感激。提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-12-09T15:15:02.243

请按照此处给出的使用以下代码，它工作正常 -[缩短-woocommerce-product-titles](http://www.pixelninja.me/shorten-woocommerce-product-titles/)

只需将以下代码放入主题的 functions.php 中即可。

```
 // Automatically shortens WooCommerce product titles on the main shop, category, and tag pages 
// to a specific number of words
function short_woocommerce_product_titles_words( $title, $id ) {
  if ( ( is_shop() || is_product_tag() || is_product_category() ) && get_post_type( $id ) === 'product' ) {
    $title_words = explode(" ", $title);
    if ( count($title_words) > 5 ) { // Kicks in if the product title is longer than 5 words
      // Shortens the title to 5 words and adds ellipsis at the end
      return implode(" ", array_slice($title_words, 0, 5)) . '...';
    } else {
      return $title; // If the title isn't longer than 5 words, it will be returned in its full length without the ellipsis
    }
  } else {
    return $title;
  }
}
add_filter( 'the_title', 'short_woocommerce_product_titles_words', 10, 2 ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-10-11T06:02:31.897

一个非常常见的问题：有时，WooCommerce 产品标题太长了。最重要的是，您可能还希望保持商店体验一致，并使所有 WooCommerce 产品标题的长度相同。这就是你的做法。

您可以使用简单的 CSS 而不是冗长的 php 代码。这将 100% 用于最新的 woocommerce。

```
 .shop-products.products .product .product-wrapper .product-name {
overflow: hidden;
text-overflow: ellipsis;
white-space: nowrap;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T21:21:28.240

这是一个棘手的问题，因为您必须弄清楚您正在调用的 the_title() 函数实际上是什么。最好的猜测是这样做： $title = the_title(); 然后检查 $title 里面的内容，如果它只是纯文本，那么你可以使用你提到的截断函数。如果它不仅仅是纯文本，则必须先过滤掉要截断的实际部分。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T22:57:19.397

正如 Flobbo 所建议的，我通过 jQuery 找到了一个解决方案。

首先我改变了：`<strong class="<?php echo $title_position; ?>"><?php the_title(); ?></strong>`

到 ：`<span class="productname"><strong class="<?php echo $title_position; ?>"><?php the_title(); ?></strong></span>`

我的 jQuery 代码（放在前面`</body>`的是：

```
$(document).ready(function() {
    $('span.productname').each(function() {
        var title = $.trim($(this).text());
        var max = 31;

        if (title.length > max) {
            var shortText = jQuery.trim(title).substring(0, max).split(" ").slice(0, -1).join(" ") + "...";
            $(this).html('<strong class="below-thumb">' + shortText + '</strong>');
        }
    });
}); 
```

仅此而已。这有点 DIY，但它的工作原理:)

**编辑 ：**

上面的 jQuery 函数会根据单词和空格截断字符串（不截断单词）。但是如果你不关心单词，你可以修改函数，如：

```
$(document).ready(function() {
    $('span.productname').each(function() {
        var title = $.trim($(this).text());
        var max = 30;

        if (title.length > max) {
            var shortText = jQuery.trim(title).substring(0, max - 3) + '...';
            $(this).html('<strong class="below-thumb">' + shortText + '</strong>');
        }
    });
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-20T00:56:52.750

```
function truncate($text, $limit) {
if (str_word_count($text, 0) > $limit) {
    $words = str_word_count($text, 2);
    $pos = array_keys($words);
    $text = substr($text, 0, $pos[$limit]) . '...';
}
return $text;
} 
```

然后你可以这样做：

```
 $title = get_the_title();

  <?php echo truncate($title, <w/e number>); ?> 
```

将函数放入functions.php，这样你就可以在任何你想要的地方使用它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-03T06:59:26.363

为此目的有一个插件：[Woo Title Limit](https://wordpress.org/plugins/woo-title-limit/)

# sql - Magento 与 RDBMS 无关的语法如何处理日期函数？

> ID：13828278
> 
> 赞同：1
> 
> 时间：2012-12-11T20:49:00.707
> 
> 标签：sql, magento, datetime, abstraction

我正在为 Magento 1.6 及更高版本开发一个扩展，并希望使用通用数据库语法而不是 MySQL 特定的语法。我需要一个简单的表来存储可以用来选择一组订单的时间戳。

我查看了 lib/Varien/Db 和 lib/Zend/Db，我看到的唯一日期函数似乎是特定于 MySQL 的：

```
lib/Varien/Db/Adapter/Mysqli.php:    public function convertDate($date)
lib/Varien/Db/Adapter/Pdo/Mysql.php: public function convertDate($date) 
```

在 MySQL 中，我会写：

```
INSERT INTO `marketing_services` SET `last_sent` = NOW(); 
```

我知道主要的 RDBMS 系统在日期函数的词汇和实现方面有所不同，但是 Magento 是否有这个和其他日期函数的抽象，如果没有，我应该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T09:43:09.770

用这个

```
/** @var $adapter Varien_Db_Adapter_Interface **/    
$now = $adapter->formatDate(Varien_Date::now())
// or
$nowDateOnlyWithoutTime = $adapter->formatDate(Varien_Date::now(), false) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T21:55:02.750

这是 Zend 框架代码，在 Magento 和 MySql 中没什么特别的。 [源代码](https://github.com/breerly/zf1/blob/master/library/Zend/Db/Adapter/Abstract.php)

插入：

```
$adapter->insert('marketing_services', array('last_sent'=>new Zend_Db_Expr('NOW()')); 
```

更新：

```
$adapter->update('marketing_services', array('last_sent'=>new Zend_Db_Expr('NOW()')); 
```

# xml - 在两个相同节点的第二个节点中插入 XML 节点

> ID：13828280
> 
> 赞同：0
> 
> 时间：2012-12-11T20:49:09.350
> 
> 标签：xml, xmlstarlet

我正在使用 XML Starlet 以编程方式编辑 xml 文件。我有以下 XML 文档：

```
 <manifest>
            <application>
                    <activity>
                            <intent-filter>
                                   <action/>
                                   <category/>
                            </intent-filter>
                            <intent-filter>
                            </intent-filter>
                    </activity>
            </application>
    </manifest> 
```

我正在尝试向`<action>`第二个`<intent-filter>`节点添加一个新标签。我如何做到这一点而不会在第一个`<intent-filter>`不经意间创建一个节点？

预期输出：

```
 <manifest>
            <application>
                    <activity>
                            <intent-filter>
                                   <action/>
                                   <category/>
                            </intent-filter>
                            <intent-filter>
                                   <action/>
                            </intent-filter>
                    </activity>
            </application>
    </manifest> 
```

我已经查看了以下位置的文档：http: [//xmlstar.sourceforge.net/doc/xmlstarlet.txt](http://xmlstar.sourceforge.net/doc/xmlstarlet.txt)然而，我似乎缺少这种情况的解决方案。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T20:59:19.200

想通了，我实际上遇到了 XPath 问题！

```
xml ed -s "(/manifest/application/activity/intent-filter)[2]" -t elem -n action -v "" manifest.xml 
```

尽管如果有另一种实现此操作的规范方法，请插话。

# javascript - 简单的 jQuery 幻灯片/暂停 onClick（图像）

> ID：13828285
> 
> 赞同：0
> 
> 时间：2012-12-11T20:49:27.343
> 
> 标签：javascript, jquery

```
$("#slideshow > div:gt(0)").hide();

setInterval(function() { 
  $('#slideshow > div:first')
    .fadeOut(1000)
    .next()
    .fadeIn(1000)
    .end()
    .appendTo('#slideshow');
},  3000); 
```

小提琴：http: [//jsfiddle.net/camny77/WgRtp/embedded/result/](http://jsfiddle.net/camny77/WgRtp/embedded/result/)

我只想为***STOP添加一个功能*** `onClick`

..然后恢复，`onClick`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T21:01:32.370

您可以使用[clearInterval](https://developer.mozilla.org/en-US/docs/DOM/window.clearInterval)函数清除间隔，从而使动画停止。

维护一个变量来检查动画的状态，它是否处于活动状态，并在点击事件发生时切换它。

以下代码将使动画在您单击时停止，并在您单击时再次恢复。

```
var _animate  = '';
var active = 1;
function animate() {
    _animate = setInterval(function() { 
      $('#slideshow > div:first')
        .fadeOut(1000)
        .next()
        .fadeIn(1000)
        .end()
        .appendTo('#slideshow');
    },  3000);
}

$("#slideshow").bind(
    'click' , function() {
        if (active === 1) {
            clearInterval(_animate);
            active = 0;
        } else {
            animate();
            active = 1;

        }
    }
);
$("#slideshow > div:gt(0)").hide();
animate(); 
```

我已经编辑了你的小提琴：http: [//jsfiddle.net/WgRtp/3/](http://jsfiddle.net/WgRtp/3/)

# shell - 删除所有没有@符号的行

> ID：13828287
> 
> 赞同：1
> 
> 时间：2012-12-11T20:49:32.650
> 
> 标签：shell, command-line, command

我试图基本上做与[http://www.udel.edu/topics/software/general/editors/unix/vi/delsearch.html](http://www.udel.edu/topics/software/general/editors/unix/vi/delsearch.html)相反的事情，这表明：

```
grep -v @ oldfile.txt > newfile.txt 
```

但是，我不想输出没有@符号的文件，我只想将具有@符号的文件输出到一个新文件中。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T20:52:18.483

`-v`选项表示“`grep`反向匹配”。只需将其删除，这`grep`就是正常使用的方式：

```
grep '@' oldfile.txt > newfile.txt 
```

一般来说，grep 的简单用例：

```
grep "search_pattern_here" input_filename_here > output_filename_here 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T20:50:31.173

这很*简单*：

```
grep '@' oldfile.txt > newfile.txt 
```

**笔记**

*   `-v`方法`invert mode`

# php - ONFOCUS/ ONBLUR 如果在 INPUT 框中没有输入任何内容，则提交默认值而不是空值

> ID：13828289
> 
> 赞同：0
> 
> 时间：2012-12-11T20:49:45.240
> 
> 标签：php, forms, default-value, onblur, onfocus

我已经用一些动态操作替换了默认的“值”。输入框中有一个默认值，用户点击，默认值被删除。用户离开并且不输入任何内容，默认值重新出现。到目前为止，一切都很好。

问题是，每当用户提交表单并将名称字段留空时，我都会得到默认值，而不是什么都没有或一个空字段。

```
<input style="width:95%;" type="text" name="email" 
onfocus="if(this.value==this.defaultValue)this.value=''" 
onblur="if(this.value=='')this.value=this.defaultValue" 
value="<?php echo $entry_email; ?>" maxlength="27" size="50" /> 
```

我已经阅读了一段时间，并说其他选项，例如 onclick 而不是 onfocus。此外，onsubmit 然后每个人还建议更改代码以处理该功能，这就是所有内容混合在一起的地方。我知道这个问题被问了一遍又一遍，但它们都涉及 js 代码更新。

我是否疯狂地认为我的上面的代码可以稍微修改一下，所以检查默认值是填写还是空白，但不提交默认值？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T20:53:40.820

当用户单击提交按钮时，您的文本输入首先触发 onblur 事件，然后表单提交。所以你提交的是默认值。检查与表单提交事件上的值匹配的默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T21:04:18.183

尝试分离 html 和 js 代码。使用jquery，简单易学

```
<input style="width:95%;" type="text" id="email" name="email" value="<?php echo $entry_email; ?>" maxlength="27" size="50" />
<script language="javascript" src="http://code.jquery.com/jquery.min.js"></script> 
<script language="javascript">         
$('#email').blur(function() {
          $('#email').val(defaultValue);
        });
</script> 
```

并检查用户的电子邮件值是否等于默认值，然后停止表单提交。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T21:07:59.687

您可以简单地使用`placeholder`内部`input`标签。

```
<input type="text" name="email" value="" placeholder="Enter Email"> 
```

# mouseover - Google 地球在地标翻转时显示说明

> ID：13828292
> 
> 赞同：2
> 
> 时间：2012-12-11T20:49:59.743
> 
> 标签：mouseover, google-earth, balloon

单击地标时，说明气球会打开。我想使用鼠标悬停而不是单击来做同样的事情。我做了很多搜索，只能找出如何在翻转时突出显示地标。[这个问题](https://stackoverflow.com/questions/4614006/how-can-i-add-description-on-pushpin-on-bing-in-the-time-of-mouse-over)似乎与我正在寻找的最接近，但它适用于 Bing，而不是 Google Earth。

看起来这将是一个基本功能（我首先查看了工具以查看该选项是否存在）。当您有很多地标时，滚动搜索特定信息的速度要快得多，而不是向下滚动“地点”下的地标列表。

我可以编写 kml，但任何比这更复杂的东西，例如 javascript，都超出了我的范围，所以我希望有一个相对简单的答案

感谢您的任何帮助，您可以提供。

兰多

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T22:35:56.040

如果您想将 Google 地球与普通 KML 一起使用，那么唯一的选择是使用 StyleMaps 和鼠标悬停事件来显示您的地标的突出显示样式。

KML 中的 JavaScript 技巧要求您首先单击 Placemark 以显示带有嵌入 JavaScript 的气球描述。例如，请查看[http://kml-samples.googlecode.com/svn/trunk/kml/javascript/](http://kml-samples.googlecode.com/svn/trunk/kml/javascript/)。

一个技巧是`<gx:balloonVisibility>`在目标 KML 文件上使用，然后将该 KML 与具有基于区域的 NetworkLink 的根 KML 文件包装起来，当区域通过缩放变为活动时，该 NetworkLink 会加载第一个 KML 文件。加载带有地标的 KML 时，气球会自动打开，但不是您想要的。

如果谷歌在未来版本的谷歌地球中添加这个新功能，这是有可能的。

但是，如果您想使用 Google Earth API 滚动您自己的应用程序网络，那么您可以完全控制并且可以以任何您想要的方式处理鼠标悬停事件。

[https://developers.google.com/earth/documentation/events#event_listeners](https://developers.google.com/earth/documentation/events#event_listeners)

# asp.net - 如何在 vb.net 中做正则表达式

> ID：13828295
> 
> 赞同：2
> 
> 时间：2012-12-11T20:50:10.870
> 
> 标签：asp.net, regex, vb.net

所以这里有很多关于正则表达式的问题和答案。缺点是绝大多数答案只是**正**则表达式......

我也用谷歌搜索过——发现了数百个网站。试图通过所有事情来快速理解和实施答案并不容易。它们要么使用不同的语言——这可能不应该有任何区别，尽管你在 C# 到 VB 中的转义方式不同，这会导致混淆什么是转义字符与正则表达式开关。

我正在努力的部分是理解它们，这样我就可以实现一些显然是简单的表达式。

**我的场景：**

我必须检查给定字符串中的每个字符，如果正则表达式不允许任何字符，那么它应该返回 false。

**例子：**

我尝试了以下表达式（从这里的各种答案复制/粘贴......）

```
Dim r As New Regex("^[a-zA-Z0-9 ]*$") 
```

也试过

```
Dim r As New Regex("[a-zA-Z0-9\s]") 
```

也试过

```
Dim r as New Regex("^[A-Za-z0-9 ]*") 
```

**我一直在实施这样的：**

```
Dim r As New Regex(_fontJIAdieuxRegEx) '' where _fontJIAdieuxRegEx is one of the above regex strings.
Dim supported = r.IsMatch(fontName) 
```

我一直在尝试验证以下内容：

`darren`应该返回`True`

`da-rren``False`由于`-`连字符应该返回

`da rren`应该返回`True`

现在，简单地说，这些表达式中的任何一个都将返回`True`所有字符串或`False`所有字符串；所以我显然做错了什么。

我真的很感激有人指出我哪里出错了，并解释了一些关于正则表达式的构成。

一旦我对它们有了更多了解，我就需要能够有不同的表达方式来允许其他字符，例如！@" ' . 等等。所以请不要只粘贴表达式来解决上面的简单示例。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T21:00:18.130

第一个模式是正确使用的模式。如果字符串中只有一个字符匹配，则第二种模式将返回 true。如果字符串开头的零个或多个字符匹配，第三个模式将返回 true，它总是这样。

我不知道你做了什么让它不起作用，但是像这样使用它是有效的：

```
Dim _fontJIAdieuxRegEx As String = "^[a-zA-Z0-9 ]*$"

Dim r As New Regex(_fontJIAdieuxRegEx)

Console.WriteLine(r.IsMatch("darren"))
Console.WriteLine(r.IsMatch("da-rren"))
Console.WriteLine(r.IsMatch("da rren")) 
```

输出：

```
True
False
True 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T20:53:17.893

正则表达式类位于命名空间中`System.Text.RegularExpressions`。要使它们可用，请将 Imports`System.Text.RegularExpressions`放在源代码的开头。

```
Regex.IsMatch("subject", "regex") 
```

*检查正则表达式是否匹配主题字符串。*

```
Regex.Replace("subject", "regex", "replacement") 
```

*执行搜索和替换。*

```
Regex.Split("subject", "regex") 
```

*如上所述，将主题字符串拆分为字符串数组。所有这些方法都接受一个可选的附加类型参数`RegexOptions`，比如构造函数。*

来源/更多信息：[http ://www.regular-expressions.info/dotnet.html](http://www.regular-expressions.info/dotnet.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T21:05:26.447

你的第二个表达式匹配**任何东西**。`*`字符类末尾的字符告诉正则表达式引擎匹配该字符类零*次*或多次。由于表达式中没有其他条件，因此任何字符串都是有效的。第三个表达式匹配至少有一个有效字符的任何东西。

第一个表达式应该有效，但如果您不需要它们，我不喜欢开始和结束锚点 ( `^`and )。`$`我会在这里做的是*反转*表达式......寻找无效的字符。表达式如下所示：

> [^A-Za-z0-9 ]

在这种情况下，`^`用作字符类一部分的字符意味着*否定*该类：这将匹配**不在**该类中的任何字符，并且由于我们没有任何锚点，如果这样的字符出现在任何地方，它将匹配字符串。现在，当然，我还必须反转 VB.Net 代码中的结果：

```
Dim r As New Regex("[^A-Za-z0-9 ]")
Dim supported = Not r.IsMatch(fontName) 
```

# svn - SVN 提交被拒绝。错误“无法打开文件 txn-current-lock”

> ID：13828296
> 
> 赞同：2
> 
> 时间：2012-12-11T20:50:12.570
> 
> 标签：svn, permissions, centos, commit

我正在与 CentOS 5、Apache 2.2 和 WHM 面板签约的 VPS 上安装 SVN 服务器 (v1.6)。
我安装并配置了所有必要的模块，并且能够通过我的网络浏览器正常创建和访问存储库。

## 问题是：

我不能提交或导入任何东西，我总是返回错误：

```
Error: Can not open file '/[path]/svn/test/db/txn-current-lock': Permission denied 
```

我已阅读并执行有关此错误的众多教程的权限，但均未成功。
我正在使用 TortoiseSVN 连接到服务器。

## 您可能会发现一些有用的信息：

*   我正在尝试通过外部 HTTP 连接执行提交。
*   SELinux 被禁用。
*   我已将文件夹的所有者更改为用户/组 apache`chown -R apache: apache /var/www/svn`
*   我为所有文件夹和文件定义了 777 权限`chmod -R 777 /var/www/svn`
*   运行命令查看 Apache 的活动进程，一些进程留下了用户/组“nobody”。我尝试将 Apache 的设置更改为不与该用户/组一起运行，但我所有的网站都停止工作。

Apache进程列表：

```
root@vps [/var/www]# ps aux | egrep '(apache|httpd)'
root     19904  0.0  4.4 133972 35056 ?        Ss   16:58   0:00 /usr/local/apache/bin/httpd -k start -DSSL
nobody   20401  0.0  3.5 133972 27772 ?        S    17:01   0:00 /usr/local/apache/bin/httpd -k start -DSSL
root     20409  0.0  3.4 133972 27112 ?        S    17:01   0:00 /usr/local/apache/bin/httpd -k start -DSSL
nobody   20410  0.0  3.8 190040 30412 ?        Sl   17:01   0:00 /usr/local/apache/bin/httpd -k start -DSSL
nobody   20412  0.0  3.9 190344 30944 ?        Sl   17:01   0:00 /usr/local/apache/bin/httpd -k start -DSSL
nobody   20414  0.0  4.4 190160 35364 ?        Sl   17:01   0:00 /usr/local/apache/bin/httpd -k start -DSSL
nobody   20416  0.0  4.0 190980 32108 ?        Sl   17:01   0:00 /usr/local/apache/bin/httpd -k start -DSSL
nobody   20418  0.3  5.3 263028 42328 ?        Sl   17:01   0:12 /usr/local/apache/bin/httpd -k start -DSSL
root     32409  0.0  0.1   7212   816 pts/0    R+   17:54   0:00 egrep (apache|httpd) 
```

SVN 文件夹权限`var/www/`：

```
drwxrwxr-x 3 apache apache 4096 Dec 11 16:41 svn/ 
```

存储库权限`var/www/svn/`：

```
drwxrwxr-x 6 apache apache 4096 Dec 11 16:41 test/ 
```

存储库的内部文件夹`var/www/svn/test`：

```
drwxrwxr-x 2 apache apache 4096 Dec 11 16:41 conf/
drwxrwxr-x 6 apache apache 4096 Dec 11 16:41 db/
-rwxrwxr-x 1 apache apache    2 Dec 11 16:41 format*
drwxrwxr-x 2 apache apache 4096 Dec 11 16:41 hooks/
drwxrwxr-x 2 apache apache 4096 Dec 11 16:41 locks/
-rwxrwxr-x 1 apache apache  229 Dec 11 16:41 README.txt* 
```

# c# - 如何复制 Excel 绘制“平滑线散点图”的操作

> ID：13828297
> 
> 赞同：1
> 
> 时间：2012-12-11T20:50:15.107
> 
> 标签：c#, javascript, asp.net-mvc-3, highcharts

我需要在代码中复制一个 Excel“平滑线散点图”图。我正在尝试使用 Highcharts 的线条，因此我必须获取 Excel 用来构建平滑线的数据。

**这是Excel：（**注意最高点不是系列中的点） ![在此处输入图像描述](../Images/0c6148b820e3f73f721da9b31bbb63ee.png)

我得到了这个`Spline`（不一样的东西，我知道）[http://jsfiddle.net/qF6Va/1/](http://jsfiddle.net/qF6Va/1/)

![在此处输入图像描述](../Images/e4416e41a65332db082126bbfee174b4.png)

**我应该使用什么算法来获得平滑的 excel 线条数据？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T22:47:34.033

[在此CodeProject](http://www.codeproject.com/Articles/12018/Interpolation-with-Polynomials-and-Splines)`Cubic Spline`的帮助下使用 a 解决了它

![在此处输入图像描述](../Images/2927aa02bb3651434f4ed8ac6191564c.png)

# php - 使用 file_get_contents 解析 PHP 问题

> ID：13828306
> 
> 赞同：0
> 
> 时间：2012-12-11T20:51:20.257
> 
> 标签：php, dynamic

我正在从一个 php 文件加载我的导航栏，所以我可以只编辑一个文件来更新整个站点。

代码：

```
function getRsc($url){
    return file_get_contents($url.'.php');
} 
```

那是工作文件，直到我尝试将实际的 php 添加到文件中。

```
 <?php
      if(isLoggedIn()){
        echo("<a class='btn btn-success' href='/account.php'> My Account </a>");
      }else {
        echo("<a class='btn btn-success' href='/login.php'> Login/Signup </a>");
      } 
  ?> 
```

它只是将 PHP 显示为文本，而不是解析它。我怎样才能做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T20:52:47.973

您不能`file_get_contents`像这样在本地文件系统上创建 PHP 文件。它不会被执行，你只会取回纯文本的、未处理的代码。

您需要`include`或`require`代替本地 PHP 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T20:53:22.793

你为什么不做一个常规的`require`？例如，

```
<?php

require "path/to/nav-bar.php"; 
```

您不应该使用它`file_get_contents`来加载和运行 PHP 文件。看看[`require`](http://php.net/manual/en/function.require.php)。

# r - 如何使用 RMySQL 包更新 MySQL 表

> ID：13828307
> 
> 赞同：2
> 
> 时间：2012-12-11T20:51:21.457
> 
> 标签：r, rmysql

RMySQL 中是否有任何函数可以仅更新表的一部分，而不是将整个表附加或覆盖到数据库中？因为有一天我们的一些数据可能不完整，我需要保留旧表并只替换有新数据进入的行，这是我编写的函数，但没有工作，任何帮助将不胜感激：

```
col.info <- "(id int, timestamp bigint, yyyy int, mm int, dd int, value double, 
PRIMARY KEY(id, timestamp, yyyy, mm, dd))"

Func <- function(con, tbl.name, dat.set, col.info) {
  if (dbExistsTable(con, tbl.name)) {  
  dbWriteTable(con, tbl.name, dat.set, row.names=F, append=T);  #what can I change the append for??

  } else { 
  dbSendQuery(con, paste("CREATE TABLE IF NOT EXISTS", tbl.name, col.info, sep=" ")); 
  dbWriteTable(con, tbl.name, dat.set, row.names=F, append=T);
  }
} 

Func(conn_table, "daily_update", df, col.info) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-11-19T11:52:57.253

我最近遇到了完全符合您需要的[dbx 包。](https://github.com/ankane/dbx)

以下代码将在您的数据库表上执行 upsert（重复键更新）查询。只需将 where_cols 参数替换为作为主键的列。

```
install.packages("dbx")
library(dbx)
dbx::dbxUpsert(con, tbl.name, dat.set, where_cols = c("id")) 
```

# java - Java程序执行

> ID：13828310
> 
> 赞同：-3
> 
> 时间：2012-12-11T20:51:40.480
> 
> 标签：java

请解释一下这个程序的行为如何？

```
class A
{
    //public static String name = "asdf";

    public static final String name = "asdf";

    static {
        System.out.println("static block inside A");
    }

    {
        System.out.println("regular code block");
    }
}

public class tt 
{   
    public static void main(String ar[])
    {
        System.out.println(A.name);
        //A a = new A();
    }
} 
```

1.  在执行上述程序时，我得到的输出为 - **asdf**
    Qns：为什么没有一个代码块没有被执行？

2.  如果我取消注释非最终静态变量名称并注释最终静态变量，我得到的输出为 - A **asdf Qns****内的静态块**：为什么没有执行常规代码块？

***   如果我评论 System.out.println(A.name); 并取消注释 A a = new A(); 在 tt 类中，我得到的输出为 - **常规代码块****内的静态**块 Qns：这里两个块都在执行。但是静态块和常规块有什么区别？** 

 ***** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T20:57:42.570

1.  因为`name`is a`static final String`用一个[常量表达式](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.28)作为它的值，所以它的主体`tt.main`被有效地编译为

    ```
    System.out.println("asdf"); 
    ```

    ...没有对 的引用的痕迹`A.name`，因此`A`不会被初始化。

2.  “常规”代码块是实例初始化程序。它仅在您*创建*.`a`

3.  是的，此时您正在创建 的实例`A`，因此[*静态初始化程序*](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.7)和[*实例初始化程序*](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.6)都运行。静态初始化器只会运行一次；每次创建实例时都会运行实例初始化程序。

按照上面的链接访问每个术语的 Java 语言规范详细信息。****

# objective-c - 自定义 UITableViewCell 不占用单元格的完整边界？

> ID：13828313
> 
> 赞同：0
> 
> 时间：2012-12-11T20:51:52.160
> 
> 标签：objective-c, ios, cocoa-touch, uitableview

我正在做[这个教程](http://www.raywenderlich.com/21842/how-to-make-a-gesture-driven-to-do-list-app-part-13)，在其中的一部分中我无法得到我想要的结果。

我`UITableViewCell`将单元格子类化并直接自定义单元格，因为我想为每个单元格添加渐变效果。基本上，我在每个单元格的顶部和底部添加了渐变效果。

这是我使用的代码：

```
- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        // add a layer that overlays the cell adding a subtle gradient effect
        gradientLayer = [CAGradientLayer layer];
        gradientLayer.frame = self.bounds;
        gradientLayer.colors = @[(id)[[UIColor colorWithWhite:1.0f alpha:0.2f] CGColor],
        (id)[[UIColor colorWithWhite:1.0f alpha:0.1f] CGColor],
        (id)[[UIColor clearColor] CGColor],
        (id)[[UIColor colorWithWhite:0.0f alpha:0.1f] CGColor]];
        gradientLayer.locations = @[@0.00f, @0.01f, @0.95f, @1.00f];
        [self.layer insertSublayer:gradientLayer atIndex:0];
    }
    return self;
}
-(void) layoutSubviews{
   [super layoutSubviews];

   //ensure that gradient layers occupy the full bounds
   gradientLayer.frame = self.bounds;
} 
```

作为理想的结果，我希望看到渐变层占据了单元格的整个边界。然而，它只占据从单元的开始和结束大约 1mm 的空间。因此，它没有占据全部边界。

如果我注释掉`[super layoutSubviews]`它，它会显示完整的渐变，它占据了单元格的完整边界。但这一次，它不显示单元格内的文本。

我无法解决它。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T22:37:50.847

下面的评论表明问题看起来像这样

![这](../Images/001879e89e30675d4f1fac2a8e3139d0.png)

解决方案是将单元格的背景设置为清晰的颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T23:55:42.590

正确的方法是使用 self.contentView.frame 如下：

```
gradientLayer.frame = self.contentView.frame; 
```

# java - 关于 Java 语法的基本问题

> ID：13828317
> 
> 赞同：2
> 
> 时间：2012-12-11T20:52:09.420
> 
> 标签：java

我正在尝试理解以下有效的 Java 代码。我有两个问题，在代码中进行了注释。

```
class C {
  C x;  //1.) why is something like x = new C(); not required here?  Does this 
        //mean x refers to this current class of C?
  int f;
  void run(boolean b, int x) {
    C y;
    y = new C(); 
    if (b) { this.bump(y,x); } //2.) Is "this" in this.bump necessary?  Likewise,
                               //this.bump(this.y,x) would be equivalent right?
    else { f = this.x.f + 1; }  
  }
  void bump(C z, int j) {
    z.f=j;
  }
  } 
```

谢谢，抱歉这些基本问题

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-11T20:54:51.750

`1.) why is something like x = new C(); not required here?`

x 只是一个未初始化的引用。如果你想使用它，你确实需要为它分配一些东西。

`2.) Is "this" in this.bump necessary?`

No.`this`指的是当前对象，因为`x`它是当前对象的成员，在这种情况下您不需要它。

`2a) Likewise, this.bump(this.y,x) would be equivalent right?`

No.`y`是一个局部变量，你不能用`this.y`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T20:56:14.430

这个：

```
 C x; 
```

声明在type`x`类中调用的单个字段。该语句没有设置 field 的任何初始值。和它基本相同；`C``C``x``C x = null`

那个：

```
 this.bump(y,x); 
```

`this`这里是多余的。你会得到同样的结果`bump(y,x);`

`this.y`在这种情况下不会编译，因为`y`它是一个局部变量（在方法内），而不是一个字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T20:56:18.967

`C x;`表示您已经声明了一个名为 x 的 C 类型变量。你还没有创建一个实例，你通过调用`x = new C();`

从同一个类中调用成员方法时，不需要使用 this 关键字。

`this.bump(this.y,x)`不是你想的那样，因为 y 是一个局部变量（run 方法的局部变量）而不是一个类成员，所以你实际上会得到一个编译错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T20:56:22.180

1.) `C x`这里没有引用任何东西。但是如果你分配它，它会引用一些类型的类`C`。这可能是当前类，但也可能引用了另一个类。例如，如果`C`是一个类`Person`，x 可以引用这个人的妈妈、爸爸、朋友等...
2.) 不，那里不需要它，因为没有以相同方式命名的局部变量。它的等价物。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-11T20:56:26.590

1)`new`在堆而不是栈上分配内存

2) `this`in`this.bump`是不必要的。`this.bump(this.y,x)`不等价，因为`class C`没有名为的成员变量`y`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-11T20:56:31.823

> 1.）为什么`x = new C();`这里不需要类似的东西？

默认情况下，参考是`null`. 由程序员决定是否需要初始化引用以指向某个对象。

> 这是否意味着 x 指的是当前的 C 类？

这里，`x`是对一些类实例的引用`C`。引用可以是（并且是）`null`。

> 2.) 有`this`必要`this.bump`吗？

不。

> 同样，`this.bump(this.y,x)`将是等效的吗？

是的。

# string - 在两个字符之间拆分字符串

> ID：13828328
> 
> 赞同：0
> 
> 时间：2012-12-11T20:53:05.267
> 
> 标签：string, vbscript

在 vbs 脚本中，我试图在两个字符之间获取一些字符。

例如

"C:\temp\98542\orange\myfile.txt"

想要**98542**

或者

"C:\temp\748\apple\myfile2.txt"

想要**748**

我不确定最好的方法（拆分函数？）是取出这些数字字符并为其分配两个新变量？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T21:07:41.397

```
x = Split("C:\temp\98542\orange\myfile.txt","\")(2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T21:58:32.870

org.apache.commons.lang3.StringUtils.split("C:/temp/98542/orange/myfile.txt", "/")[2];

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T20:56:54.540

有几种方法，“最好”的方法取决于您的要求。您可以编写自己的代码，用于`Mid`一次获取一个字符。或者，`Split`如果您知道此数字始终位于文件名中的同一位置，则可以使用。或者您可以使用正则表达式，这将花费更少的代码。什么是“最好的”取决于你。

# git - 带有本地开发和主分支的 Git 远程存储库工作流程？

> ID：13828329
> 
> 赞同：0
> 
> 时间：2012-12-11T20:53:06.330
> 
> 标签：git, repository, workflow, branching-strategy

我正在尝试使用 git 学习和开发最佳实践。关于分支，我一直在阅读 git flow 分支实践。基于这种做法，我的分支机构应该是

```
master
develop
hotfix
feature 
```

我使用本地仓库在本地机器上开发。我有两个要推送的远程裸仓库。一个是 TEST 服务器，第二个是 LIVE 生产服务器。这两个远程仓库都有一个接收后挂钩。

master 分支应该只保留给最终的生产代码。那么，我应该将哪个分支推送到 TEST 服务器？目前我必须将开发合并到主控，然后将本地主控推送到测试。但是，如果我在那次推送之后有任何编辑，那主人已经改变了，还没有真正准备好投入生产。我应该将开发分支推到测试服务器吗？然后，最终批准合并开发到主服务器，然后将主服务器推送到 LIVE 服务器？

我不明白为什么我对此感到如此困惑？我想我害怕犯任何错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T21:11:24.603

这实际上非常简单，将测试服务器上需要的任何内容推送到测试服务器上。如果您的代码还没有准备好合并到 master 中，那么就不要合并它，只需推送您的开发分支和/或您的主题分支。没有什么坏处，事实上在你的裸仓库中有很多分支是很正常的。

事实上，如果你有提交钩子来触发持续集成构建和测试，那么你需要所有当前正在测试的分支都在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T21:48:26.937

我有一个类似的架构：master、hotfix 和 development。

想象一下，您有一个新功能要开发。我的步骤是什么：

每个新功能都有一个新分支：

```
git checkout -b issue1234
<make some updates...>
git commit -a -m 'mensagem'
git push origin issue1234 
```

您可以与开发分支合并，只是为了看看它如何与其他开发工作并运行测试用例。

```
git checkout dev
git merge issue1234
git push 
```

人们进行了几次测试，对其进行编辑并决定它已准备好部署！

```
git checkout master
git merge issue1234
git push 
```

请注意，我从不将**master**与**develop**合并。只是功能被合并。

我不知道这是否是最好的方法，但我总能知道每个功能/问题的哪些代码发生了变化。

# javascript - codemirror - 空行号？

> ID：13828330
> 
> 赞同：2
> 
> 时间：2012-12-11T20:53:14.343
> 
> 标签：javascript, codemirror, line-numbers

当您将行号应用于代码镜像时，它们仅显示该行是否实际具有内容。请参阅[此](http://jsfiddle.net/rEq3r/1/)示例小提琴。它仅显示行号 1-5。

我想知道是否有配置来显示整个高度的行号？（而不是空白条目）？

我一直在查看文档，但似乎找不到任何关于此的内容。有什么建议么？

这是我的基本配置：

```
var myCodeMirror = CodeMirror(document.body, {
  value: "function myScript()\n{\n\treturn 100;\n}\n",
  mode:  "javascript",
  lineNumbers: true
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T20:57:53.473

丑陋的解决方法：只需追加`\n`直到它开始滚动（检查`scrollTop`和`scrollHeight`）。

# angularjs - 我的 angularjs 工厂出了什么问题？

> ID：13828336
> 
> 赞同：2
> 
> 时间：2012-12-11T20:53:33.383
> 
> 标签：angularjs

我有一个构建应用程序

```
var HappySundayonEtsyApp = angular.module('HappySundayonEtsyApp', ['ngResource']); 
```

用一个控制器

```
HappySundayonEtsyApp.controller('ListingsController',
function ListingsController ($scope, $filter, Listings, $resource) {
$scope.sortingOrder = sortingOrder;
... 
```

控制器工作正常，控制器中添加了一些静态 JSON 以进行测试。当我尝试使用定义为的服务获取数据时

```
HappySundayonEtsyApp.factory('Listings', ['$resource', function ($resource) {
var resource = $resource('/listings/:id', { 
  id : '@id' 
}, {
  index : { method: 'GET', isArray : true },
  save : { method : 'PUT' }
});
return resource;
}]); 
```

并在控制器中

```
$scope.items = Listings.get() 
```

没有任何作用。该 URL 提供了完美的 JSON，正如我通过一个简单的验证

```
$http.get('/listings/').success(function(data){
   $scope.items = data;
}); 
```

在调试器（Chrome）中我看到

```
Listings.get(): h
  __proto__: h 
```

我使用的是 1.0.3 版。如果有人可以提供帮助，我将不胜感激，在阅读、尝试和调试 2 天后，我感到非常沮丧。大概是一件很简单的事情……

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T21:52:41.510

使用时`$resource`，调用该`.get`方法不会返回来自 HTTP 调用的响应，它只是返回它的一个 Promise。这意味着 $scope.items**将在未来**包含结果。

为确保`$scope.items`包含 HTTP/$resource 调用的响应，请改为在回调中分配 $scope.items：

```
Listings.get(function (response) {
    $scope.items = response;
}); 
```

但是，假设你有这个：

```
<ul>
    <li data-ng-repeat="item in items"></li>
</ul> 
```

然后你可以使用这个：`$scope.items = Listings.get()`由于当承诺被履行时，repeat 将被更新并迭代所有项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T21:23:53.933

实际上，看起来您的 JSON 是一个数组，并且您专门定义`index`了您设置的操作`isArray : true`，因此您可能打算这样做：

```
$scope.items = Listings.index(); 
```

# ruby-on-rails - 在 Rails 中集成 javascript 应用程序的最佳方法

> ID：13828342
> 
> 赞同：0
> 
> 时间：2012-12-11T20:54:15.253
> 
> 标签：ruby-on-rails, ruby-on-rails-3, html

我的项目是在 Rails 中制作一个带有 html5 游戏的网站。

我有一个名为 的控制器`games_controller`，我想将*/games/name-of-my-game*与每个 html5 游戏匹配。我创建了一条路线，与 games_controller 功能相匹配，但这是我的问题：

我希望我的 html5 游戏的所有内容都是“即插即用”的，我的意思是在 Rails 之外开发它们，然后只需将其复制/粘贴到我的应用程序中，一切正常（引用图像、.js 文件和所有）。但我也希望我的游戏视图位于我的应用程序布局中。这是我尝试过的：

*   将它放在*/public*目录中，并在我的 games_controller 的`show`方法中执行`render "/public/path_to_my_game"`. 这会破坏所有引用，例如`<script type="text/javascript" src="some_script.js"></script>`，因为 url 不是 */path_to_my_game* 而是*/games/name-of-my-game*。

*   将其放在*/public*目录中，但`redirect_to`在我的`show`方法中使用 a 代替`render`。引用没有损坏，但布局消失了（我可能错了，但布局被控制器卡住了，而不是静态文件）。

*   把它放在*app/views/games 中*，但这看起来很难看，所以我很快停下来:)。

有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T21:08:07.613

如果你有类似的东西

```
# config/routes.rb
match '/games/:game' => 'games_controller#show'

# app/controllers/games_controller.rb
def show
  @game = params[:game]
end 
```

您在布局文件中真正需要做的就是

```
<%= javascript_include_tag @game %> 
```

这意味着您将拥有`app/assets/javascripts/<game>.js`每个游戏的文件。它将负责启动每个游戏。

显然，您需要采取预防措施来验证这`params[:game]`是一款有效的游戏。

* * *

或者，您可以在布局文件中创建内容部分

```
<html>
  <head>
    <%= yield :game %>
  </head>
  <!-- rest of layout ... --> 
```

然后用你的服务提供适当的视图`GamesController`

```
# app/controllers/games_controller.rb
def show
  @game = params[:game]
  render "games/#{@game}"
rescue ActionView::MissingTemplate
  redirect_to root_path, :alert => "invalid game id"
end 
```

然后在您的游戏视图中，您将需要每个游戏的所有必要文件。例如，用户访问`/games/pacman`

```
# app/views/games/pacman.html.erb
<% content_for :game do %>
  <%= javascript_include_tag 'pacman/foobar' %>
  <%= javascript_include_tag 'pacman/start' %>
  <%= stylesheet_link_tag 'pacman/styles' %>
<% end %> 
```

另一个例子，用户访问`/games/time_pilot`

```
# app/views/games/pacman.html.erb
<% content_for :game do %>
  <%= javascript_include_tag 'time_pilot/init' %>
  <%= stylesheet_link_tag 'time_pilot/base' %>
  <%= stylesheet_link_tag 'time_pilot/retro' %>
<% end %> 
```

因为我确信每个游戏都会有不同数量的依赖项，并且它们都会以不同的方式初始化，所以您可以相应地为每个游戏构建视图并提供与每个游戏相关的任何资产。

* * *

有关布局和渲染的更多帮助，请参阅 rails 指南：[Rails 中的布局和渲染](http://guides.rubyonrails.org/layouts_and_rendering.html#using-the-content_for-method)

# javascript - 使用 Facebook Javascript SDK 获取用户图片的当前方法是什么 - 最佳捷径？

> ID：13828343
> 
> 赞同：0
> 
> 时间：2012-12-11T20:54:15.830
> 
> 标签：javascript, jquery, facebook

这是我第一次使用 FB JS SDK。我一直在寻找获取用户照片的最佳方法，但我发现了各种不同的方法，有些方法已经过时了。

我终于设法通过检查返回的对象来做到这一点。但它似乎又笨重又长。

```
profileDiv.innerHTML += '<img src="' + response.picture.data.url + '">'; 
```

他们是更好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T20:58:05.360

您真正需要显示某人的个人资料图片的只是他们的`user_id`或`username`.

```
<img src="https://graph.facebook.com/4/picture" width="50">` 
```

![](../Images/7b8e885789bda84bd43a236df816e801.png)

或者

```
<img src="https://graph.facebook.com/zuck/picture" width="50"> 
```

![](../Images/d16ab2b9d3cf6c592a4fa35311df72c6.png)

使用此 URL `https://graph.facebook.com/user_id/picture`，您可以获取该用户的个人资料图片。您还可以使用`type`参数指定大小。例如 -`type=large`

# video - 在视频播放器中禁用快进

> ID：13828345
> 
> 赞同：0
> 
> 时间：2012-12-11T20:54:29.540
> 
> 标签：video, wordpress, video-streaming, wordpress-theming

任何人都可以建议一个 WordPress 视频插件或任何其他方式来完成

a) 在人们会走到最后的视频上禁用快进？

b) 也许让视频进入“成功”页面，然后将该成员标记为已完成该视频模块？

任何帮助请......？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T21:00:40.177

选择自定义 Flash 播放器，这样您就可以灵活地跟踪视频的整体进度，并且可以在此之上集成任何业务逻辑。

对于一个简单的视频播放器试试[这个](http://www.ilike2flash.com/2011/11/simple-as3-video-player-using.html)。

# java - Java - 如何在等待数据的进程上实现线程

> ID：13828346
> 
> 赞同：9
> 
> 时间：2012-12-11T20:54:32.363
> 
> 标签：java, multithreading, threadpool

我对多线程编程相当陌生，我希望能够深入了解实现以下想法的最佳方法。

现在我的代码是这样工作的 ![当前功能](../Images/0e23d3032e134d960b01b4182c1365b6.png)

它是单线程的，因此在处理每条数据并将其写入数据库所需的时间里，新数据进来并排队，这太慢了。我在 4CPU 服务器上运行，但当前设置仅使用 1。

我想将中间部分完成的工作与剩余的 3 个 CPU 分开。我将如何最好地做到这一点？我以为我可以为每条新数据创建一个新线程，但我们在一天之内谈论了数十万个新线程。根据我的阅读，与此相关的开销将非常大。内存对我来说是一个问题，所以如果创建所有这些线程会占用太多内存，我就会遇到麻烦。新线程是否会使用较不繁忙的 CPU，还是会使用相同的 CPU，因为它是同一个 JVM？

如果是这样的话，每条新数据的处理和数据库写入不应超过几秒钟。

我也在阅读有关线程池的信息，但这个想法让我有点困惑，我找不到一个很好的例子。

我在想这样的事情 ![主意](../Images/9f1734c56a06936bed1783d2adba95e2.png)

请帮助多线程新手提出合理的设计！提前致谢 ：-）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T21:19:15.507

更重要的一点是，有多少线程在并行工作（因此可能会杀死一台机器）。如果您一个接一个地创建一个 Thread 对象，它可以更有效地完成，但总的来说，这样做的成本（可能）可以忽略不计（正如 Michal 指出的那样）。撇开这一点不谈（假设您想了解多线程），您的设计听起来已经足够合理了。现在去看看什么[`java.util.concurrent`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/package-summary.html)可以为您提供实现它的工具的尊重：

*   `ExecutorService`: 最好的选择。创建一个固定的`n`工作线程线程池，然后，对于每个传入线程，发布一个`Runnable`进行处理并将所有数据存储到数据库中。

    ```
    public class DataProcessor {
        final ExecutorService workerThreadPool = Executors.newFixedThreadPool(5);

        public void onNewDataFromTheOutsideWorld(Data d) { 
           workerThreadPool.execute(new ProcessingAndStoreToDBRunnable(d));
        }

        public void onShutdown() { 
           workerThreadPool.shutdown();
        }
    } 
    ```

    这`ExecutorService`将确保只有固定数量的工作人员实际并行运行，

*   自己的排队机制：当涉及到具有不同优先级的作业时，您可能希望实现自己的工作机制。请注意，这要复杂得多，如果可能，您应该坚持使用该`ExecutorService`解决方案。

    基本思想是`BlockingQueue`添加数据并启动`n`从队列中读取作业的工作线程。诀窍是，如果没有作业，队列将阻塞（从而使线程进入睡眠状态），如果有多个`n`作业，则作业将存储在队列中，直到处理线程可用。

    ```
    public class DataProcessor {
        final BlockingQueue<Data> queue = new BlockingQueue<Data>();

        public void onInit() {
           for (int i = 0; i < n; i++) 
               new Thread(new WorkerRunnable(queue)).start();
        }

        public void onNewDataFromTheOutsideWorld(Data d) { 
           queue.add(d);
        }
    }

    public class WorkerRunnable implements Runnable {
        public void run() { 
           while (true) {
               Data d = queue.take();
               processData(d);
           }
        }
     } 
    ```

    正如我所说，这要实现起来要复杂得多，因为我还没有触及诸如

    *   停止工作线程
    *   确保处理异常，然后返回处理
    *   等等

这些只是多线程环境中的基本（但非常强大）工具。如果您需要更高级的工具，请查看 Guava 库，例如使用其美妙的 a 概念[`ListenableFuture`](http://code.google.com/p/guava-libraries/wiki/ListenableFutureExplained)（如果您需要工作线程的结果，您应该使用它。）

然后，您将拥有一个相当基本的设计，您可以从中添加一些更复杂的处理步骤，正如您在评论中已经指出的那样。还有人指出，它随后变成了一个相当广泛的问题；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T21:14:55.947

首先，您应该考虑性能在此应用程序中的重要性以及您需要处理的流量类型。如果您不太关心为每个请求添加 0.1 毫秒的延迟（如果您说每个请求需要几秒钟，我认为您不会这样做），那么创建一个新线程将不会是一个明显的成本。请注意，您的线程应该在完成工作后结束生命，因此您不会同时拥有数十万个线程 - 它们将随着时间的推移而启动和结束。如果您每天收到“几十万”个请求，那么这只是每秒几个请求（假设它们被平均分配）。有了这样的参数，您的平均活动请求数约为几十个（大约每秒 10 次，每个请求几秒钟〜=随时有几十个请求）。这比您机器上的内核数量多，但应该毫无问题地处理 - 如果这些线程与数据库通信，它们将花费大部分时间等待通信链接。虽然为每个请求设置一个单独的线程通常可能不是最好的设计，但它可能比学习 Futures 和 Executors 更容易实现。

因此，这两种解决方案都有其优点 - 更好的设计和可能更好的资源使用的期货（尽管这可能取决于您安排它们的程度）和每个请求的线程以使某些东西快速工作（并且能够很容易地理解内部发生的事情）系统）。如果您现在只学习并发，我实际上建议您先以不太优雅的方式进行学习，以便了解系统在幕后需要做什么。然后，当您熟悉那种“手动”调度方法时，您可以进入更高级别的抽象，学习 Futures 等，并重构您的代码。如果您立即开始使用 Futures，那么第二个版本可能会比您能够编写的代码要好得多。

# ruby-on-rails - Rails 和 Backbone 架构

> ID：13828347
> 
> 赞同：1
> 
> 时间：2012-12-11T20:54:36.050
> 
> 标签：ruby-on-rails, ruby-on-rails-3, backbone.js, backbone-relational

我听说过很多关于 Backbone 的信息，并想在我的最新项目中使用它来学习它。但是，我来自 Rails 背景，我的经验似乎不适用于 Backbone。

例如，我有四个模型需要在产品视图中显示。

```
class Product < ActiveRecord::Base
  belongs_to :category
  belongs_to :child
  has_many :actions
  has_many :comments
end

class Child < ActiveRecord::Base
  belongs_to :user
  has_many :products
end 
```

我正在使用 Backbone-relational 来定义 Backbone 模型中的关系。以下是产品 Backbone 模型。

```
class Ibabybox.Models.Product extends Backbone.RelationalModel
  paramRoot: 'product'
  urlRoot: '/products'

  relations: 
    [
      {
        type: Backbone.HasMany
        key: 'actions'
        relatedModel: 'Ibabybox.Models.Action'
        collectionType: 'Ibabybox.Collections.ActionsCollection'
        reverseRelation:
          key: 'product'
          includeInJSON: 'id'
      } 
    ] 
```

在主干路由器中，我执行以下操作。

类 Ibabybox.Routers.ProductsRou​​ter 扩展 Backbone.Router

```
routes:
"": "index"
":id": "show"

show: (id) ->
  @product = new Ibabybox.Models.Product({id: id})
  @product.fetch
    success: (product) ->
      actions = product.get('actions')
      child = product.get('child')
      @child_model = new Ibabybox.Models.Child({id: child.id})
      user = @child_model.get('user')
      @view = new Ibabybox.Views.Products.ShowView({model: product, actions: actions, child: child, user: user})
      $("#products").html(@view.render().el) 
```

在 Rails 控制器上，我执行以下操作。

```
class ProductsController < ApplicationController
  def show
    @product = Product.find(params[:id])
    render json: @product.to_json(:include => [ :actions, 
                                            :child => { :include => {:user => {:methods => [:name] }}} ])
  end
end 
```

首先，我是否朝着正确的方向前进？

其次，感觉需要定义和编写很多东西来显示产品的相关内容以及感觉我可能做错了什么的原因......

任何帮助/建议/更正将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T08:14:39.067

根据backbone.js doc [There's More Not One Way To Do It](http://backbonejs.org/#FAQ-tim-toady)，但是当你的应用程序增长时，有些方法会变得很痛苦。在使用backbone.js 和rails 开发了3 个应用程序之后，这是我的经验。

1.  主干.js 并不适合每个网站。特别是如果您的网站是基于内容的。在这种情况下，使用 pjax 可以获得更好的结果。

2.  基于资源的设计是最好的方法。希望rails和backbone.js都能发挥作用。您可以轻松使用默认的 Rails 生成器，只需进行最少的更改。对于复杂的对象，我更喜欢使用[jbuilder](https://github.com/rails/jbuilder)，因为我可以缓存对象。

3.  如果你使用显式 $.ajax,$.post,$.get 可能你错了。[same as 2]

4.  如果你在重复自己，那就有问题了。

5.  不要错过[主干事件](http://backbonejs.org/#FAQ-events)。（在您的情况下，您可以使用事件而不是传递成功回调来获取）

# ajax - 单页网站的最佳实践，可在不损害 SEO 的情况下减少页面加载时间

> ID：13828352
> 
> 赞同：0
> 
> 时间：2012-12-11T20:55:06.893
> 
> 标签：ajax, wordpress

我想知道有哪些最佳实践可以减少单页网站的页面加载时间，并且这样做不会对 SEO 造成伤害。

我倾向于使用“hijax 链接”的 ajax 解决方案，但我想知道在页面加载顺序方面有哪些最佳实践。例如，假设我有一个简单的网页——有家、关于、我的猫的照片、联系人等，我计划通过垂直滚动将它全部显示在主页上——分配一个“屏幕”的内容每件。

我在wordpress中对此进行编码，所以我的主要想法是首先加载第一个“屏幕”，即主页的英雄部分，作为home.php的一部分，所以用户不必等待整个事情-和搜索引擎优化。然后一旦完成加载，在后台通过 ajax 加载接下来的四个。所以我想知道最好的策略是什么。有人在其他地方提供了这个答案：

“使用 php 构建一个标准的 5 页站点，并适当分离页眉、页脚、内容。然后使用 javascript 重定向到一个（单独的）页面，页面上包含所有内容。”

在 wordpress 中，我认为这是这个意思。创建一个带有循环的单独页面，将其他四个“屏幕”作为帖子抓取。然后在加载 home.php 之后加载此页面。有没有人看到这种方法有任何问题，或者正如问题所要求的那样，有任何更好的或最佳实践来实现这一点，我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T21:01:00.433

您可以做几件事：

1.  需要提高后端代码的性能，以防万一。
2.  分页：将页面拆分为较小的页面
3.  缓存
4.  减小内容大小，减小背景图片大小，压缩js内容
5.  压缩内容

大多数时候，完美的优化将取决于您的情况。从上述其中一项开始将为您完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T21:32:09.417

您的问题被标记为“wordpress”。因此，我假设您使用 wordpress。

如果是这样，我认为合乎逻辑的起点是使用其中一个 wordpress 缓存插件。我为我的[网站](http://www.technologyspirit.com)使用快速缓存，它产生了显着的不同。

但是，你不应该停止使用插件。考虑您使用的主题的质量。您必须确保主题质量良好。设计不佳的主题可能会导致数据库调用效率低下，并且可能会降低您的网站速度。

使用 ajax 延迟和加载页面的一部分不应该是您的第一个优化操作。首先尝试所有其他选项。

# eclipse - Eclipse 不在工作区中显示项目

> ID：13828353
> 
> 赞同：4
> 
> 时间：2012-12-11T20:55:07.793
> 
> 标签：eclipse

我打开了从另一台计算机转移的 Eclipse 工作区，但它没有在包资源管理器中显示任何项目（应该有很多）。仍然项目的文件夹位于工作区文件夹中。

我转移工作区的新机器运行 Windows 7，它有只读文件夹问题（[更多在这里](http://itexpertvoice.com/home/fixing-the-windows-7-read-only-folder-blues/)）。也就是说，在该操作系统上创建的所有文件夹都是只读的，并且无法以任何方式删除只读属性。

Eclipse 最初拒绝打开工作区，说工作区的 .metadata 文件夹是只读的。将用户控制转到最低级别后，它会打开工作区，但它的行为就像它不包含任何项目一样。我认为这是因为 Eclipse 拒绝使用只读文件夹，并且项目文件夹也是只读的。

有人有同样的问题吗？你是怎么解决的？欢迎提出任何建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T21:10:25.753

将项目移动到工作空间路径文件夹中是不够的，您还需要导入它们。而且由于它们位于您的路径文件夹中，因此您无法再次导入它们，因为它会说您的工作区中仍然有它们。将它们移动到另一个文件夹（例如在桌面中），确保您的工作区文件夹为空，然后尝试从桌面中的临时文件夹中导入它们。

# ios - 写入 plist 可以在模拟器上工作，但不能在设备上工作

> ID：13828358
> 
> 赞同：-2
> 
> 时间：2012-12-11T20:55:35.000
> 
> 标签：ios, plist

> **可能重复：**
> [无法写入 Plist](https://stackoverflow.com/questions/5116831/not-able-to-write-to-plist)

我有这个问题。我有一个名为“instellingen”的 plist 文件。在该文件中，存储了不同的设置。例如，在启动时显示游戏规则。这在模拟器上工作得很好，但是当我在我的 iPad 上测试它时，plist dat 不会被保存。

这是我的代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    plistPath = [[NSBundle mainBundle] pathForResource:@"instellingen" ofType:@"plist"];
    instellingen = [NSMutableDictionary dictionaryWithContentsOfFile:plistPath];

    if ([[instellingen objectForKey:@"regelAtRuntime"] boolValue] == TRUE) {
        [self.showRulesButton setTitle:@"Spelregels niet meer tonen" forState:UIControlStateNormal];
    }else{
        [self.showRulesButton setTitle:@"Spelregels wel tonen" forState:UIControlStateNormal];
    }

    [self.mainContent flashScrollIndicators];

}

- (IBAction)dismissRules:(id)sender {
    [self dismissViewControllerAnimated:YES completion:nil];
}

- (IBAction)dontShowRegels:(id)sender {

    if ([[instellingen objectForKey:@"regelAtRuntime"] boolValue] == TRUE) {
        [instellingen setValue:@"0" forKey:@"regelAtRuntime"];
    }else{
        [instellingen setValue:@"1" forKey:@"regelAtRuntime"];
    }

    [instellingen writeToFile:plistPath atomically:YES];
} 
```

从可怕的 VC 那里读取规则似乎可以正常工作，使用这段代码：

```
NSString *plistPath = [[NSBundle mainBundle] pathForResource:@"instellingen" ofType:@"plist"];
    instellingen = [NSDictionary dictionaryWithContentsOfFile:plistPath];

    if ([[instellingen objectForKey:@"regelAtRuntime"] boolValue] == TRUE) {
        NSLog(@"We're in!");
        [self performSegueWithIdentifier:@"showRulesSegue" sender:self];
    } 
```

有谁知道我做错了什么？我试过运行一个干净的构建（Product Clean）。

任何帮助都意味着很多！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T20:57:58.433

The app bundle is read-write on Simulator but read-only on device. When your app is first launched, you should copy the plist to the Documents directory (if it needs to be backed up) or Library/Caches (if it doesn't), then use that version in your app.

# java - AsyncTask，多种不同的操作

> ID：13828359
> 
> 赞同：0
> 
> 时间：2012-12-11T20:55:40.820
> 
> 标签：java, android, post, methods, android-asynctask

我目前有一堂课有 4 种方法。我需要将其更改为 AsyncTask。每个方法都接收不同的参数（文件、整数、字符串...）以使用并使用 post 或 get 连接到不同的 URL。我的问题是我还能以某种方式在一个 AsyncTask 类中拥有所有这些操作，还是我需要为每个方法创建新的 AsyncTask 类？

```
private class Task extends AsyncTask<URL, Integer, Long> {
protected Long doInBackground(URL... urls) {
     int count = urls.length;
     long totalSize = 0;
     for (int i = 0; i < count; i++) {
     }
     return totalSize;
 }

 protected void onProgressUpdate(Integer... progress) {
     setProgressPercent(progress[0]);
 }

 protected void onPostExecute(Long result) {
     showDialog("Downloaded " + result + " bytes");
 }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T21:04:41.570

这取决于您是否需要所有 4 个 AsyncTasks 同时运行或者它们是否可以按顺序运行。

我想它们可以按顺序运行，因为它们当前在主线程中是这样运行的，所以只需传递所有需要的参数并一一执行它们的操作。事实上，如果函数已经编写好了，只需将这些函数移动到您的 AsyncTask 类中：

MainActivity.java：

```
public static final int FILE_TYPE = 0;
public static final int INT_TYPE = 1;
public static final int STRING_TYPE = 2;

taskargs = new Object[] { "mystring", new File("somefile.txt"), new myObject("somearg") };

new Task(STRING_TYPE, taskargs).execute(); 
```

异步任务

```
private class Task extends AsyncTask<URL, Integer, Long> {
    private Int type;
    private Object[] objects;
    public Task(Int type, Object[] objects) {
        this.type = type;
        this.objects = objects;
    }
    protected Long doInBackground(URL... urls) {
        int count = urls.length;
        long totalSize = 0;
        for (int i = 0; i < count; i++) {
        }
        //obviously you can switch on whatever string/int you'd like
        switch (type) {
            case 0:  taskFile();
                     break;
            case 1:  taskInteger();
                     break;
            case 2:  taskString();
                     break;
            default: break;
        }
        return totalSize;
    }

    protected void onProgressUpdate(Integer... progress) {
        setProgressPercent(progress[0]);
    }

    protected void onPostExecute(Long result) {
        showDialog("Downloaded " + result + " bytes");
    }
    protected void taskFile(){ //do something with objects array }
    protected void taskInteger(){ //do something with objects array }
    protected void taskString(){ //do something with objects array }
} 
```

# r - 访问 lme 图中的异常值 id

> ID：13828360
> 
> 赞同：5
> 
> 时间：2012-12-11T20:55:45.847
> 
> 标签：r, plot, outliers

我在 r 中绘制一个 lme fit 对象并在图表上显示异常值 id（studyID），但我想通过在绘图对象中查找它们来自动访问这些 ID。我无法弄清楚如何做到这一点。我正在做很多分析，因此能够自动执行此操作而不是实际查看每个图表中的异常值 id 编号会有所帮助。

这是我正在做的一个简化示例：

```
fit <- lme(dv ~ studyID + Gender + Group * DOP, random=~1|studyID, cor=corSymm(), na.action="na.omit", method="ML", data=x$data)

require (car)

plotObject <- plot(fit, resid(., type = "p") ~ fitted(.) | Group*DOP, abline = 0, id=.05) 
```

我想要做的是访问 plotObject 的某些属性，该属性存储用于识别图表中由 plot 语句产生的异常值的 ID 号。

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T21:05:56.130

我不知道这些信息是否真的存储在绘图对象中，但自己计算很容易。来自`?plot.lme`：

> ```
>  id: an optional numeric value, or one-sided formula. If given as
>           a value, it is used as a significance level for a two-sided
>           outlier test for the standardized, or normalized residuals.
>           Observations with absolute standardized (normalized)
>           residuals greater than the 1 - value/2 quantile of the
>           standard normal distribution are identified in the plot using
>           ‘idLabels’. 
> ```

所以我会说类似

```
library(nlme)
fm1 <- lme(distance ~ age, data = Orthodont) # random is ~ age
which(abs(residuals(fm1,type="normalized"))>qnorm(0.975))
## M09 M09 M13 
##  34  35  49 
plot(fm1,id=.05)  ## for comparison 
```

似乎可以解决问题。

# c# - DLL 中的 WPF 窗口无法加载其关联的资源 DLL

> ID：13828366
> 
> 赞同：1
> 
> 时间：2012-12-11T20:56:07.373
> 
> 标签：c#, wpf

我有一个 WPF dll，用 .NET 4.0 构建，有一个需要本地化的 Window 类。
我正在使用 Sisulizer 构建我的资源 dll，但我无法让这些资源 dll 为 dll 加载。

根据阅读几篇文章，我尝试了以下方法：

在加载 Window 之前，在 WPF dll 中设置 CurrentUICulture 和 CurrentCulture（我已经设置了一个和两个都没有运气）。

```
System.Threading.Thread.CurrentThread.CurrentUICulture = new System.Globalization.CultureInfo("fr-FR");
System.Threading.Thread.CurrentThread.CurrentCulture = new System.Globalization.CultureInfo("fr-FR"); 
```

为我的资源设置文化。

```
Properties.Resources.Culture = new System.Globalization.CultureInfo("fr-FR"); 
```

我在放置 WPF EXE 的位置下方创建了名称为 fr 和 fr-FR 的文件夹。最后，我的 WPF EXE 确实使用放置在“fr”和“fr.FR”文件夹中的不同资源 dll 本地化为法语。当我在 DLL 中打开窗口时，硬编码文本不会更改，并且我在运行时在 ViewModel 中加载并在视图中显示的资源字符串也不会被翻译。

谁能建议如何做到这一点？

# symfony - 验证数组中的项目 - Symfony 2.1

> ID：13828368
> 
> 赞同：7
> 
> 时间：2012-12-11T20:56:09.510
> 
> 标签：symfony, symfony-2.1

我正在使用 Symfony 2.1 验证模块来验证我的 REST API 的数据，它可以正常工作，但我想知道是否有任何简单的方法来验证数组中的项目。例如，我的一个字段是一个日期数组，我想确保里面的每个项目都是正确格式化的日期。

我使用 YAML 如下设置约束，`array_of_dates`是我希望能够验证该数组中的每个项目是否为有效日期的字段。

```
# src/Acme/DemoBundle/Resources/config/validation.yml
Acme\DemoBundle\Entity\Demo:
    properties:
        start:
            - NotBlank: ~
            - Date: ~
        end:
            - NotBlank: ~
            - Date: ~
        array_of_dates:
            - Type:
                type: array 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-12T01:38:28.383

应用[所有约束验证器](http://symfony.com/doc/2.0/reference/constraints/All.html)。

> 此约束允许您将一组约束应用于数组的每个元素

# perl - 使用 CPAN 安装 perl 交换机失败

> ID：13828375
> 
> 赞同：0
> 
> 时间：2012-12-11T20:56:32.193
> 
> 标签：perl, cpan

我粘贴了下面的输出（最初发布到[http://pastebin.com/Sh7a8tHK](http://pastebin.com/Sh7a8tHK)）

```
cpan[1]> install Switch
Reading '/.cpan/Metadata'
Database was generated on Tue, 11 Dec 2012 05:55:05 GMT
Running install for module 'Switch'
Running make for R/RG/RGARCIA/Switch-2.16.tar.gz
Checksum for /.cpan/sources/authors/id/R/RG/RGARCIA/Switch-2.16.tar.gz ok
Scanning cache /.cpan/build for sizes
............................................................................DONE

CPAN.pm: Building R/RG/RGARCIA/Switch-2.16.tar.gz

Checking if your kit is complete...
Looks good
Writing Makefile for Switch
Writing MYMETA.yml and MYMETA.json
cp Switch.pm blib/lib/Switch.pm
Manifying blib/man3/Switch.3
RGARCIA/Switch-2.16.tar.gz
/usr/ccs/bin/make -- OK
Running make test
PERL_DL_NONLAZY=1 /opt/perl/bin/perl "-MExtUtils::Command::MM" "-e" "test_harness(0, 'blib/lib', 'blib/arch')" t/*.t
t/given.t ... Useless use of numeric gt (>) in void context at t/given.t line 19.
t/given.t ... Failed 2/293 subtests
t/nested.t .. ok
t/switch.t .. ok

Test Summary Report
-------------------
t/given.t (Wstat: 0 Tests: 293 Failed: 2)
Failed tests:  2-3
Files=3, Tests=590,  1 wallclock secs ( 0.07 usr  0.01 sys +  0.47 cusr  0.00 csys =  0.55 CPU)
Result: FAIL
Failed 1/3 test programs. 2/590 subtests failed.
*** Error code 255
make: Fatal error: Command failed for target `test_dynamic'
RGARCIA/Switch-2.16.tar.gz
/usr/ccs/bin/make test -- NOT OK
//hint// to see the cpan-testers results for installing this module, try:
reports RGARCIA/Switch-2.16.tar.gz
Running make install
make test had returned bad status, won't install without force
Failed during this command:
RGARCIA/Switch-2.16.tar.gz                   : make_test NO

cpan[2]> 
```

正如“无用使用数字 gt.....”所证明的那样，该模块似乎存在问题，但是我使用 CPAN 在另一台机器上很好地安装了这个模块。这是 CPAN 在安装时抱怨的唯一模块。

我正在使用最新版本的 perl 5.16：

```
This is perl 5, version 16, subversion 2 (v5.16.2) built for i86pc-solaris 
```

我怎样才能安装这个模块？

注意：请不要告诉我 Switch 已弃用。我明白那个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T20:58:52.567

尝试这样做：

```
use feature qw/switch/; 
```

看

```
perldoc -q switch 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T22:48:55.133

如果您可以使用 Perl v5.10 或更高版本，请参阅*有效的 Perler*文章[使用 for() 而不是 given() 。](http://www.effectiveperlprogramming.com/2011/05/use-for-instead-of-given/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T18:50:30.443

修补：

`--- Switch-2.16-wjgfvU/Switch.pm 2009-10-23 00:52:51.000000000 -0700`

`+++ Switch-2.16-wjgfvUcopy/Switch.pm 2010-08-15 17:41:38.000000000 -0700`

```
@@ -146,7 +146,7 @@ sub filter_blocks
die "Bad $keyword statement (problem in the code block?) near $Switch::file line ", line(substr($source,0, pos $source), $line), "\n";
        };
my $code = filter_blocks(substr($source,$pos[0],$pos[4]-$pos[0]),line(substr($source,0,$pos[0]),$line));
-           $code =~ s/{/{ local \$::_S_W_I_T_C_H; Switch::switch $arg;/;
+           $code =~ s/{/{ local \$::_S_W_I_T_C_H; Switch::switch($arg);/;
            $text .= $code . 'continue {last}';
            next component;
        } 
```

# python - 如何在 Python 中的两个程序之间发送数据？

> ID：13828378
> 
> 赞同：0
> 
> 时间：2012-12-11T20:56:42.930
> 
> 标签：python, sockets, flask, pipe

我有一个用 Python 编写的程序“A”，它捕获从我的浏览器到 Internet 并返回的 HTTP 请求/响应。我想在使用 Flask 构建的 Web 应用程序（程序“B”）上显示这些 HTTP 请求/响应。

将捕获的数据从程序“A”“发送”到“B”的最佳方法是什么

现在，我正在从程序“B”创建两个管道并在程序“A”中实例化主对象，一旦我有数据要显示......程序“A”将其写入管道并且程序“B”读取/显示它。

这似乎并不一致，我也看到了数据编码问题。在为这种方法投入更多时间之前，我想了解您对此的看法。

这是在程序“A”和“B”之间进行通信的最佳方式吗？还是有其他人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T07:49:15.440

您可以在两者之间使用数据库层。

我们遇到了同样的问题，我们通过向 Redis 实例和另一个读取它的应用程序发送 HTTP 请求来解决它。我们想监控 HTTP 请求。

这样您也可以实现数据的持久性。

# ckeditor - CKEditor 4 中有哪些工具栏按钮？

> ID：13828383
> 
> 赞同：47
> 
> 时间：2012-12-11T20:56:58.347
> 
> 标签：ckeditor

[CKEditor 文档在此处](http://docs.ckeditor.com/#!/guide/dev_toolbar)逐项提到工具栏配置，但不同组中的按钮名称列表在哪里？

这里有一个类似的[问题](https://stackoverflow.com/questions/9463900/customising-ckeditor-toolbar)，但答案是针对以前版本的 CKEditor。某些按钮名称不起作用。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-12-12T08:41:09.580

您可以检查 CKEditor 包中的[工具栏示例](https://ckeditor.com/latest/samples/old/toolbar/toolbar.html)。

在那里，您列出了在您的 CKEditor 构建中启用的所有按钮和所有工具栏组（从 CKEditor 4 开始，有两种设置工具栏布局的方法）。

如果您没有看到您记得的 CKEditor 3 中的按钮，请检查它是否在您的 CKEditor 软件包版本中可用（现在有 3 个 - 基本、标准和完整）。某些插件不包含在任何这些构建中，您必须[创建自己的](http://ckeditor.com/builder).

PS。如果您使用标准或基本构建检查`config.js`文件 - 通过设置在这些预设中删除一些按钮，如下划线[`config.removeButtons`](http://docs.ckeditor.com/#!/api/CKEDITOR.config-cfg-removeButtons)。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-09-05T13:02:17.827

[这](http://ckeditor.com/comment/123266#comment-123266)是一个很好的按钮名称列表：

> CKEditor 工具栏项目的完整列表

项目

*   “来源”
*   “节省”
*   “新页面”
*   “文档道具”
*   “预览”
*   “打印”
*   “模板”
*   “文档”

项目

*   “切”
*   “复制”
*   “粘贴”
*   “粘贴文本”
*   “从单词粘贴”
*   “撤消”
*   “重做”

项目

*   “寻找”
*   “代替”
*   “全选”
*   “斯凯特”

项目

*   “形式”
*   “复选框”
*   “收音机”
*   “文本域”
*   “文本区域”
*   “选择”
*   “按钮”
*   “图像按钮”
*   “隐藏的领域”

项目

*   “胆大”
*   “斜体”
*   “强调”
*   “罢工”
*   “下标”
*   “上标”
*   “删除格式”

项目

*   “编号列表”
*   “项目符号列表”
*   “突出”
*   “缩进”
*   “块引用”
*   “创建分区”
*   “左对齐”
*   “对齐中心”
*   “正当理由”
*   “对齐块”
*   “双向”
*   “双向”

项目

*   “关联”
*   “取消链接”
*   “锚”

项目

*   “创建占位符”
*   “图片”
*   “闪光”
*   “桌子”
*   “水平规则”
*   “笑脸”
*   “特殊字符”
*   “分页符”
*   “框架”
*   “插入前”

项目

*   “风格”
*   “格式”
*   “字体”
*   “字体大小”

项目

*   “文本颜色”
*   “背景色”

项目

*   “用户界面颜色”
*   “最大化”
*   “显示块”

项目

*   “按钮1”
*   “按钮2”
*   “按钮 3”
*   “嵌入”
*   “媒体嵌入”

项目

*   “关于”

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-04-06T16:18:17.380

只需在可视化[**CKEditor Toolbar Configurator中生成您自己的配置**](http://ckeditor.com/latest/samples/toolbarconfigurator/index.html#basic)

*生成了一个例子：*

```
CKEDITOR.editorConfig = function( config ) {
  config.toolbarGroups = [
    { name: 'clipboard', groups: [ 'clipboard', 'undo' ] },
    { name: 'editing', groups: [ 'find', 'selection', 'spellchecker', 'editing' ] },
    { name: 'document', groups: [ 'mode', 'document', 'doctools' ] },
    { name: 'forms', groups: [ 'forms' ] },
    { name: 'basicstyles', groups: [ 'basicstyles', 'cleanup' ] },
    { name: 'paragraph', groups: [ 'list', 'indent', 'blocks', 'align', 'bidi', 'paragraph' ] },
    { name: 'links', groups: [ 'links' ] },
    { name: 'insert', groups: [ 'insert' ] },
    { name: 'styles', groups: [ 'styles' ] },
    { name: 'colors', groups: [ 'colors' ] },
    { name: 'tools', groups: [ 'tools' ] },
    { name: 'others', groups: [ 'others' ] },
    { name: 'about', groups: [ 'about' ] }
  ];

  config.removeButtons = 'Form,Radio,TextField,Textarea,Select,Button,ImageButton,HiddenField,BidiLtr,BidiRtl,Language,Styles,Font,Smiley,CreateDiv,Checkbox,Scayt,NewPage,About';
}; 
```

[![在此处输入图像描述](../Images/c69b3bf2d995d4759431b88b0d28cec7.png)](https://i.stack.imgur.com/LsntK.png)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-06-28T09:26:19.980

下划线选项可用，但默认情况下不可见。您需要从 config.js 文件的下一行删除它。

```
config.removeButtons = 'Underline,Subscript,Superscript'; 
```

# python - 是否可以在 Python 中使用太多函数？

> ID：13828387
> 
> 赞同：7
> 
> 时间：2012-12-11T20:57:06.743
> 
> 标签：python

这种宽泛的问题。

当我发现自己不得不编写越来越长的脚本时，我发现我的本能是将所有内容分解成一口大小的函数；然而，这最终导致函数调用函数调用函数调用函数......我想知道我是否完全以错误的方式思考这个问题。

这是删节脚本的样子。对不起，这有点做作。

```
def simple_task_1():
    return

def simple_task_2():
    return

def simple_task_3():
    return

def simple_task_4():
    return

def complex_task_1():
    simple_task_2()
    simple_task_3()
    simple_task_4()
    return

def startup():
    simple_task_1()
    complex_task_1()
    simple_task_4()

def finish():
    # other function calls
    return

def main():
    startup()
    finish() 
```

那么，这是使用函数的正确方法吗？有没有一个客观的观点，你可以说你在彼此内部进行了太多的函数调用？我是否应该为最终只完成一次的任务创建函数？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T21:00:12.727

Python 有一个“递归”限制。如果你做到了，那么你可能使用了太多的函数，否则这可能没什么大不了的——通常你只能在递归调用函数时达到递归限制（然后*通常是*因为你做错了什么并且当你应该有的时候没有打破）。

功能的重点是让您的生活更轻松。如果你发现你有太多的功能并且你实际上并没有让你的生活更轻松，那么这可能是一个问题。例如：

```
def add(x,y):
    return x+y 
```

是一个非常没有意义的功能，但是如果您愿意，最好避免使用它`sinc`：

```
def sinc(x):
    return math.sin(x)/x 
```

这实际上可能很有用，因为新函数名称比其中执行的代码更具描述性。此外，稍后如果您发现需要删除 x=0 处的奇点，您可以`sinc`轻松地将其添加进去。

最终，可读性才是最重要的。如果使用函数使您的代码更易于阅读，那么它可能是值得的（即使您只从一个地方调用它并且可以轻松地内联它）。如果您真的关心性能，则存在一些灰色区域（函数的执行时间确实比内联代码要长一些），但是您不应该以此为借口来内联难以阅读的内容，除非您可以可靠地证明这是一个性能瓶颈。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T21:18:44.073

将大的东西分解成更小的东西，无论是模块、类、函数等，这正是处理软件复杂性的方法。分而治之。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T21:03:38.007

函数的要点是允许代码重用和更简洁的代码。如果您只做一次真的很简单，那么该功能可能是不必要的。

话虽如此，将代码拆分为函数外观并没有明显的错误。如果它使您的生活更轻松或您的代码更具可读性，那么请继续使用它们。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T21:04:06.163

看起来不错，至少在抽象方面。

将程序精确分解为函数取决于函数的功能，但如果最终结果由函数组成，每个函数都执行一项由函数名称完整描述的任务，那么您就走在了正确的轨道上。

如果您发现自己拥有大量具有逻辑分组的函数，您可能会考虑将它们划分为模块。如果你有很多函数使用相同的数据，你可以考虑创建一个类来保存数据和相应的函数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-11T21:06:01.100

你正在做一个权衡。通常，将代码模块化是一件好事。大多数人做得不够。它增加了代码的可重用性和（通常）可读性。但它可能会走得太远：如果您发现自己对哪些函数调用哪些函数感到困惑，并且可读性开始下降，您可能需要重新考虑您的设计。

要注意的另一件事是调用函数需要大量开销，这可能很重要。每次调用函数时，都必须创建一个激活记录并将其放置在[调用堆栈](http://en.wikipedia.org/wiki/Call_stack)中。对于简单得离谱的函数，这种开销是不值得的。例如，如果您正在实现一个需要 2 个数字的平均值的排序函数（也许选择快速排序的枢轴？），您最好只编写`(a+b)/2`而不是定义一个函数

```
def avg(a, b):
    return (a+b)/2 
```

您提出了一个非常好的问题，这绝对是您应该不断思考的问题，但显然很难给出具体的答案。当您编写越来越多的代码时，您会对它有更好的感觉。

# ruby-on-rails - 红宝石如何才舍入更高？

> ID：13828388
> 
> 赞同：0
> 
> 时间：2012-12-11T20:57:17.233
> 
> 标签：ruby-on-rails, ruby, rounding

我怎样才能在红宝石中四舍五入，所以最后两个数字是空的？例如

```
4233.000001 to 4300
52825 to 52900
627444 to 627500
111999 to 112000 
```

?

现在我只能通过round（-2）在数学规则中四舍五入，但是如何才能做得更高，并且最后只有2个null？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T21:00:20.167

你应该使用`ceil`

```
def my_round a
  (a / 100.0).ceil * 100
end

my_round 4233.000001 # => 4300
my_round 52825 # => 52900
my_round 627444 # => 627500
my_round 111999 # => 112000 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T21:17:42.427

根据 Sergio 的回答，您可以将模块混合到实际`Numeric`对象中以获得更通用的解决方案：

```
module RoundsUp
  def round_up(ndigits)
    pow_ten = 10 ** -ndigits
    (self / pow_ten.to_f).ceil * pow_ten
  end
end 
```

然后

```
mynumeric = 262.33
mynumeric.extend(RoundsUp)
mynumeric.round_up(-2) #=> 300 
```

你有一个方法，`round`对于任意位数的行为都像正常的一样

# c# - ZeroMQ 非阻塞非队列推送

> ID：13828395
> 
> 赞同：3
> 
> 时间：2012-12-11T20:57:54.100
> 
> 标签：c#, zeromq

我正在使用 ZeroMQ 的 C# 包装器，但这似乎更像是 ZeroMQ 的一个潜在问题。

有什么方法可以在不阻塞**和**不排队的情况下推送消息？如果服务器未启动，我希望将消息永久处理而不会阻塞。

以下是我到目前为止尝试过的设置：

1)

发送（阻止发送）

高水位线 = 0

这（奇怪地）并没有阻塞，但它似乎在内存中排队，直到套接字连接（内存不断增加进程）。

2)

发送（非阻塞发送）

高水位线 = 1

这是一个竞争条件。如果我快速连续发送两条消息，则有时会因为超过高水位线而丢弃一条消息。

3)

轮询套接字以确定它是否会阻塞。这并没有真正帮助，因为我仍然必须在队列开始阻塞之前将一条（旧）消息放入队列中（如果我设置 HWM = 1）。

具有任何高水位标记的非阻塞发送是不可取的，因为一旦服务器恢复联机，它就会从客户端收到一堆旧消息。

阻止发送不起作用，因为我不想阻止。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T06:59:53.943

您似乎正在寻找的只是一个 PUB 插座。此套接字类型在发送时从不阻塞，并丢弃它无法发送给订阅者的任何消息。请参阅此页面：[http](http://api.zeromq.org/3-2:zmq-socket) ://api.zeromq.org/3-2:zmq-socket 。

附带说明一下，您不需要将此套接字用于“真正的”发布/订阅，您可以通过端点只有一个 PUB 和一个 SUB 套接字，将其用于两个节点之间的非阻塞通信。

您的服务器在重新连接后不会收到“旧”消息，因为 PUB 套接字将丢弃在服务器断开连接时无法发送的消息。尽管如此，我相信虽然您无法避免一些内部 ZMQ“排队”，但它应该对您的用例影响不大。

# javascript - 在 Node.js 中传递变量？

> ID：13828398
> 
> 赞同：0
> 
> 时间：2012-12-11T20:57:59.417
> 
> 标签：javascript, node.js

所以，我正在尝试将我的聊天系统升级到 Node.js，而且我已经好几年没觉得自己像个菜鸟了！

在 PHP 中，它效率低下，但绝对有意义。请求启动，它计算出用户信息、房间信息、解析消息等等。相当线性。它在不同的地方调用了几个函数，但每次，它只需要直接向该函数发送它需要的信息。完成该功能后，它会返回，然后使用不同的信息使用其他内容完成更多工作。如果出现异常，它（通常）会被捕获到可以提醒用户的级别。

据我了解，Node.js 绝对不是这样工作的，而是主要由回调提供支持——而且我有很多回调正在进行。它必须处理初始连接，然后它必须检查 cookie 文件是否存在，然后它必须读取 cookie 文件，然后它必须从数据库中获取一些用户信息，然后它必须获取一些来自数据库的其他用户信息，然后它必须从数据库中获取更多用户信息，然后它必须将用户添加到房间，如果一段时间内没有任何人，则必须获取从数据库中获取房间信息，然后最终响应请求。完成后，至少还有两个级别的权限检查。

它与 PHP 进程没有太大区别，但在 PHP 中，它是通过 Apache 进行多线程处理的，因此请求可以坐在那里等待 DB 调用返回而完全没有问题。用户查找、房间订阅、权限，都单独处理。

在 Node.js 中，“当你完成了那个”系统并不*太难*理解（我已经大量使用客户端 JS 和 jQuery），但变量传递肯定是。其中很大一部分是 try/catch 被回调彻底击败。如果房间数据查找查询失败，*该函数*需要知道它应该将错误发送回哪个连接（到那时可能是过去的两个或三个连接），因为它不会冒泡到多个级别返回. 因此，连接对象需要通过每个回调传递。这在处理异常时只是有点恶心，因为这些可能发生在任何地方，*最后一个*回调，我的手指拒绝再输入任何内容，直到我调查出了如此严重的错误！

所以我想我想知道的是，是否有任何我不熟悉的“黑客”可能允许变量“跳过”非嵌套回调。无限期地关闭 try/catch 链也很不错。

**编辑：**我在处理数百行代码时遇到了麻烦，所以让我们看看我是否可以通过回调堆栈提供一些视觉帮助。同一行的任何内容都是直接调用，下一行是回调。

```
connection.on('messaage') -> controller.validateUser -> fs.exists
 fs.readFile
  function() -> controller.addUser -> factory.user -> user.refreshData -> db.query
   user.refreshChars -> db.query
    user.refreshBlocks -> db.query
     function() -> controller.addRoom -> factory.room -> room.refreshData -> db.query
      room.getRole -> db.query
       function() -> room.getUserList -> connection.sendUTF 
```

如您所见，这些函数大多位于对象中，而不仅仅是嵌套的未命名函数，因为它们通常需要从多个位置以任意顺序访问。问题是，有些级别需要用户对象，有些则不需要。如果 try/catch 正常工作，则只有第一个和最后一个需要知道连接才能发回信息。

我需要的是一种为这些不同的功能提供不同信息的方法，而不必在每个功能之前用他们不需要的东西来淹没它。*这*是不受欢迎的做法。我还需要各种用户对象函数以非常不同的方式失败 - 对象不需要关注自身的方式，因为它是调用函数的责任。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T01:30:42.347

```
initial(); // begins the process

  // this starts things off
function initial() {
    var props = {  // this is the common object
        onerror: function(err) {
                     if (err.msg === "reallyBadError")
                         return false; // false means stop
                     else
                         return true;  // true means we can continue
                 },
        someInitialData: {whatever:"data"}
    };

    doSomethingAsync(getFirstCallback(props));
}

function getFirstCallback(props) {

        // return the actual callback function
    return function(err, info) {
           // if callback was passed an error, handle it
        if (err && props.onerror(err) === false)
            return;

        props.info = info; // add something to props
        doAnotherAsync(getSecondCallack(props));
    };
}

function getSecondCallback(props) {

        // return the actual callback function
    return function(err, foo) {
           // if callback was passed an error, handle it
        if (err && props.onerror(err) === false)
            return;

        // maybe do something with props.info
        props.foo = foo; // add something to props
        doOneMoreAsync(getFinalCallack(props));
    };
}

function getFinalCallback(props) {

        // return the actual callback function
    return function(err, bar) {
           // if callback was passed an error, handle it
        if (err && props.onerror(err) === false)
            return;

        // maybe do something with props.info and props.foo

        // we also have access to the original props.whatever
    };
} 
```

* * *

这是一个原型版本：

```
var r = new Requester(); // begins the process

  // Here's the implementation
function Requester() {
    // "this" is the common object
    this.someInitialData = {whatever:"data"};

    doSomethingAsync(this.firstCallback.bind(this));
}

Requester.prototype.onerror: function(err) {
     if (err.msg === "reallyBadError")
         return false; // false means stop
     else
         return true;  // true means we can continue
 };

Requester.prototype.firstCallback = function(err, info) {
       // if callback was passed an error, handle it
    if (err && this.onerror(err) === false)
        return;

    this.info = info; 
    doAnotherAsync(this.secondCallack.bind(this));
};

Requester.prototype.secondCallback = function(err, foo) {
       // if callback was passed an error, handle it
    if (err && this.onerror(err) === false)
        return;

    this.foo = foo;
    doOneMoreAsync(this.finalCallack.bind(this));
};

Requester.prototype.finalCallback = function(err, bar) {
       // if callback was passed an error, handle it
    if (err && this.onerror(err) === false)
        return;

    // The final code    
}; 
```

# c# - 虽然转换双 0.10 double.parse() 转换为 10.0

> ID：13828399
> 
> 赞同：3
> 
> 时间：2012-12-11T20:57:59.450
> 
> 标签：c#, parsing, double

我在 Visual Studio 中有一个简单的控制台应用程序，用于在变大之前测试一些代码。但是现在我在解析一些字符串时遇到了问题。
当用户输入是`String: 0.10`我想将其转换为双精度。所以输出应该是双倍的：0.10。

但是当我使用以下代码执行此操作时：

```
double r_value = 0;
r_value = Math.Round(double.Parse(value), 2); 
```

或者

```
r_value = double.Parse(value); 
```

输出将是：10 或 10.0。这个输出怎么会这样变化？并按照我的想法转换为 10.0 而不是 0.10。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-11T21:00:17.797

我强烈怀疑您的默认文化是`.`一种*分组*分隔符（通常是数千个）。因此，在一个英国人可能将一万写成“10,000”的地方，一些其他文化会写成“10.000”。在这一点上，你的输出是有意义的。

如果您想使用*不变的文化*（将其视为`.`小数分隔符和`,`分组分隔符）进行解析，请明确执行：

```
double r_value = double.Parse(value, CultureInfo.InvariantCulture); 
```

# javascript - 如何使用箭头键更改背景位置？

> ID：13828400
> 
> 赞同：0
> 
> 时间：2012-12-11T20:57:58.363
> 
> 标签：javascript

嗨，刚开始尝试学习一点 javascript，现在对于我的第一个程序，我想编写在按下箭头键时移动“背景位置”的代码。所以我希望你们中的一个可以帮助我修复我的代码。

我的（不是那么花哨）代码：

```
 var x = 0;
 var y = 0;

function GetChar (event){
        var keyCode = ('which' in event) ? event.which : event.keyCode;
        posy(move(keyCode, x, y))
        posx(move(keyCode, x, y))
    }

function move (key, x, y){
    if (key === 38){
        return y ++;
    } if else (key === 40){
        return y --;
    } if else (key === 39){
        return x ++;
    } if else (key === 37){
        return x --;
    } else{

    }
}

function posy(movy) {
    return body.style.background-position-y + movy * 100; 
}

function posx(movx) {
    return body.style.background-position-x + movx * 100; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T11:48:04.667

我最终用 jQuery 解决了它：

```
$(document).ready(function(){

    var posx = 0;
    var posy = 0;

    $(document).keydown(function(e){
            if(e.keyCode==40){
                posy--;
                console.log('down');
            }else if(e.keyCode==38){
                posy++;
                console.log('up');

            }else if(e.keyCode==39){
                posx--;
                console.log('right');

            }else if(e.keyCode==37){
                posx++;
                console.log('left');

            }else{

            };
        console.log(posy);
        console.log(posx);
        $('body').css('background-position-y', ''+posy*100+'px');
        $('body').css('background-position-x', ''+posx*100+'px');
    });
}); 
```

# xml - XPath 中的 concat()

> ID：13828416
> 
> 赞同：2
> 
> 时间：2012-12-11T20:59:23.610
> 
> 标签：xml, xpath

这是我的 xml：

```
<compositeurs> 
    <compositeur></compositeur>
    <compositeur id="5">
        <dates naissance="1687" deces="1770"></dates>
        <nom>
            <prenom>Johann</prenom>
            <prenom>Sebastian</prenom>
            <prenom>Sebastian</prenom>
            <prenom>Sebastian</prenom>
            <famille>Bach</famille>
        </nom>
    </compositeur> 
        <pays>Alemagne</pays>
    <compositeur></compositeur>
</compositeurs> 
```

我想连接所有具有 famille="Bach" 的元素 prenom。

我用过`concat(//nom[famille='Bach']/prenom)`，但它错了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T21:15:04.643

在 XPath 1.0 中是不可能的

这是在 XPath 2.0 中执行此操作的方法：

```
string-join(//nom[famille='Bach']/prenom, ' ') 
```

如果 XPath 2.0 不可用，您总是可以用您使用的任何命令式语言连接原始表达式的结果。

# php - CodeIgniter——最好的控制器命名协议？

> ID：13828418
> 
> 赞同：1
> 
> 时间：2012-12-11T20:59:39.980
> 
> 标签：php, codeigniter

我一直在使用 CodeIgniter，我想知道我设置控制器的方式是否不正确。

我正在尝试使用[Phil Sturgeon 博客上的方法 2](http://philsturgeon.co.uk/blog/2009/07/Create-an-Admin-panel-with-CodeIgniter)合并我网站的管理部分。

如果我还需要一个控制器来处理前端的产品和用户，我可以将它们命名为 products.php 和 users.php 还是它们会导致冲突？

感谢您的帮助！

![文件结构](../Images/ee9dd6fa06fc4dec3d93e3a66ef1bdea.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T21:14:51.000

`controller`您可以在两个不同的文件夹中为双方（后端和前端）使用相同的名称，即

```
admin/users.php 
front/users.php 
```

但是您也可以使用 a`prefix`来提高可读性或避免混淆，例如

```
admin/adm_users.php // read as admin users.php
front/frn_users.php // read as frontend users.php 
```

# java - WriteAbortedException Java

> ID：13828421
> 
> 赞同：-1
> 
> 时间：2012-12-11T20:59:56.890
> 
> 标签：java, android, caching, serialization, deserialization

我有以下方法。此方法的目的是从缓存中检索存储的数组列表。

```
 public ArrayList<T> read_arraylist_from_cache(File name){

    FileInputStream fis;
    ArrayList<T> returnlist = null;
    try {   
            fis = new FileInputStream(name);            
            ObjectInputStream ois = new ObjectInputStream(fis);

           //here I take the exception 
            returnlist = (ArrayList<T>) ois.readObject();
            ois.close();
    } catch (Exception e) {
        Log.d("Cannot retrieve the arraylist from the cache", "Cannot retrieve the arraylist from the cache", e);
        e.getStackTrace();
    }
    return returnlist;
} 
```

但是，当我尝试转换为 ArrayList 时，我会遇到 WriteAbortedException。我传递给上述类的 ArrayList 如下：

```
 ArrayList <Product> 
```

产品pojo在哪里：

```
 public class Products implements Serializable{

 @JsonProperty
 private String prodnum;
     @JsonProperty
     private String brand;

      //get,set
  } 
```

我用来将数组列表存储到缓存的方法如下

```
 public void write_to_byte_array(ArrayList<T> list,File file){

    // write to byte array
    FileOutputStream fos = null;
    try {
        fos = new FileOutputStream(file);
    } catch (FileNotFoundException e1) {
        Log.d("file not found", "file not found", e1);
    }

    ObjectOutputStream oos = null;
    try {
        oos = new ObjectOutputStream(fos);
    } catch (Exception e1) {
        Log.d("Create ObjectOutputStream object", "Create ObjectOutputStream object", e1);
    }

    try {
        oos.writeObject(list);
    } catch (IOException e1) {
        Log.d("Write ObjectOutputStream object to file", "Write ObjectOutputStream object to file", e1);
    }

    try {
        oos.close();
    } catch (IOException e1) {
        Log.d("Close the connection with the file", "Close the connection with the file", e1);
    }

} 
```

我传递给上述方法的 arratList 列表是

```
 ArrayList<Products> 
```

再次，文件和我之前写的文件一样。但是我不明白我做错了什么。谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T21:15:06.203

WriteAbortedException [API](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/WriteAbortedException.html)很好地描述了这个问题。

在写入您尝试读取的对象时，您是否在日志中捕获任何内容？

您是否检查过 WriteAbortedException.getCause() 返回的内容？

另外，请注意，您的异常处理`write_to_byte_array`确实应该重新考虑。如果 FileOutputStream 构造函数失败，无法找到文件，你记录它，然后继续，如果没有任何问题，保证你将在下一个 try 块抛出 NullPointerException，并再次继续，就好像什么都没有错误，保证在下一个 try 块出现另一个 NullPointerException。

# java - 在 libgdx 0.9.7 中绘制表格边框

> ID：13828423
> 
> 赞同：14
> 
> 时间：2012-12-11T21:00:01.337
> 
> 标签：java, opengl-es, libgdx

我正在使用 libgdx 游戏框架绘制表格。一切都完美地呈现了我想要实现的目标。我现在需要的只是显示表格的单元格边框，但到目前为止我没有发现任何相关信息。我也倾向于使用调试边框线来完成目的，但也无法改变它们的颜色。

这是我的代码。

```
Table table = new Table();
table.setFillParent(true);
table.left().top();

table.add(new Label("Results", new LabelStyle(font, Color.BLACK))).colspan(2).expandX();
table.row();
table.add(new Label(text_you_score, new LabelStyle(font, Color.BLACK)));
table.add(new Label(text_actual_score, new LabelStyle(font, Color.BLACK)));
return table; 
```

表格和单元格有许多属性可用，但边框属性不可用。我们也可以手动绘制网格线，但这在我认为的每种设备分辨率上都无法完美运行。任何帮助或想法都非常感谢。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-02-25T20:27:44.967

这是基于 libGDX 1.5.3：

一个解决方案是使用[NinePatch](https://github.com/libgdx/libgdx/wiki/Ninepatches)作为您的`Table`.

```
NinePatch patch = new NinePatch(new Texture(Gdx.files.internal("background.png")),
     3, 3, 3, 3);
NinePatchDrawable background = new NinePatchDrawable(patch);

Table table = new Table();
table.setBackground(background); 
```

使用数字变量，您可以修改边界半径。确保这与 png 文件匹配。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T11:07:59.957

1.  为调试模式注册您的表

    `table.debug();`

2.  调用`render()`方法

    `Table.drawDebug(stage);`

[例子](https://github.com/libgdx/libgdx/blob/master/tests/gdx-tests/src/com/badlogic/gdx/tests/TableLayoutTest.java)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-01-30T03:46:49.523

`ShapeRenderer`我通过将 a与`table.drawDebug(shapeRenderer shapes)`调用（我无法开始工作）转换为使用 a`stage`并将表添加为参与者来实现调试行的显示。

上面答案中链接的[示例](https://github.com/libgdx/libgdx/blob/master/tests/gdx-tests/src/com/badlogic/gdx/tests/TableLayoutTest.java)确实清楚地表明了这一点，但这里有一个简短的片段供参考。这是在 libGDX 1.5.3 上。

```
public class MyGdxGame extends ApplicationAdapter {

    Texture img;
    Stage stage;

    @Override
    public void create () {
        img = new Texture("badlogic.jpg");
        stage = new Stage();
        final Skin skin = new Skin();

        Label.LabelStyle style = new Label.LabelStyle(new BitmapFont(),Color.WHITE);
        TextField.TextFieldStyle textFieldStyle = new TextField.TextFieldStyle();
        textFieldStyle.fontColor = Color.WHITE;
        textFieldStyle.font = new BitmapFont();

        skin.add("default", style);
        skin.add("default", textFieldStyle);
        // Keep your code clean by creating widgets separate from layout.
        Label nameLabel = new Label("Name:", skin);
        TextField nameText = new TextField("",skin);
        Label addressLabel = new Label("Address:", skin);
        TextField addressText = new TextField("",skin);

        Table table = new Table();
        table.add(nameLabel);              // Row 0, column 0.
        table.add(nameText).width(100);    // Row 0, column 1.
        table.row();                       // Move to next row.
        table.add(addressLabel);           // Row 1, column 0.
        table.add(addressText).width(100); // Row 1, column 1.

        table.setOriginX(0);
        table.setOriginY(0);
        table.setX(200);
        table.setY(200);
        table.debug();

        stage.addActor(table);
    }

    @Override
    public void render () {
        Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT);
        stage.act(Gdx.graphics.getDeltaTime());
        stage.draw();
    }

    public void resize (int width, int height) {
        stage.getViewport().update(width, height, true);
    }

    public void dispose () {
        stage.dispose();
    }   
} 
```

# windows-8 - WinJS.xhr 本地网络错误

> ID：13828426
> 
> 赞同：4
> 
> 时间：2012-12-11T21:00:07.610
> 
> 标签：windows-8, xmlhttprequest, winjs

我正在尝试制作一个简单的 Windows 8 应用程序，但我遇到了问题。当我尝试向本地网络服务器发出 xhr 请求时，它失败并显示错误代码：0x2efd

示例代码：

```
WinJS.xhr({ url: "http://192.168.0.30" }).then(
    function completed(response) {
        //var json = JSON.parse(response.responseText);
        //var list = new WinJS.Binding.List(json.results);

        console.log(response.responseText);
    },
    function error(error) { console.log(error) },
    function progress(progress) { }
); 
```

但是当我尝试使用远程 IP 例如 google.com 时，它可以工作。出了什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T21:15:57.443

您是否在项目的应用程序清单中声明了“专用网络”功能？双击您的应用程序清单文件 - 它位于功能选项卡下。

# c# - 如何强制完成并行活动或工作流？

> ID：13828436
> 
> 赞同：3
> 
> 时间：2012-12-11T21:01:08.000
> 
> 标签：c#, workflow-foundation

我有一个 Windows 工作流（顺序），它只包含一个并行活动，并且在并行活动中有多个顺序活动。并行活动的工作方式是，所有序列必须在并行活动完成之前完成。我正在寻找一些稍微不同的东西......其中一个序列是独一无二的，当这个特定序列完成时，我想继续（完成并行活动）而不等待其他序列完成）。由于此工作流仅包含此并行活动，因此我需要找到一种方法来完成并行活动或完成整个工作流。要么会得到我正在寻找的结果。

有没有好的方法来处理这个？注意，我使用的是 Windows 工作流基础 v3.5。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T23:13:45.887

处理此问题的最佳方法可能是使用 CAG： http: [//msdn.microsoft.com/en-us/library/ms733611](http://msdn.microsoft.com/en-us/library/ms733611(v=VS.85).aspx) (v=VS.85).aspx 。您可以在那里指定一个可以评估的条件，并确定特定分支是否应该完成并行。

在 WF4 中，我们尝试通过 CompletionCondition 通过并行活动直接配置此行为来改进这种情况：http: [//msdn.microsoft.com/en-us/library/system.activities.statements.parallel.completioncondition.aspx](http://msdn.microsoft.com/en-us/library/system.activities.statements.parallel.completioncondition.aspx) . 不幸的是，这对您使用 WF3.5 没有帮助，但希望它能提供一些背景信息。:-)

——戴夫，WF团队

# image - 高斯模糊的使用

> ID：13828437
> 
> 赞同：0
> 
> 时间：2012-12-11T21:01:09.980
> 
> 标签：image, image-processing, gaussian

我现在阅读了大量关于高斯模糊的不同解释，我真的很困惑。

我大致了解高斯模糊是如何工作的。 [http://en.wikipedia.org/wiki/Gaussian_blur](http://en.wikipedia.org/wiki/Gaussian_blur)

我知道我们选择 3*sigma 作为掩码的最大尺寸，因为值会变得非常小。

但我的三个问题是：

1.  如何仅使用 sigma 创建高斯蒙版？

2.  如果我理解正确，掩码会给我权重，然后我将掩码放在左上角的像素上。我将掩码中每个像素值的权重相乘。然后我将蒙版移动到下一个像素。我对所有像素都这样做。它是否正确？

3.  我也知道一维蒙版更快。所以我为 x 创建了一个蒙版，为 y 创建了一个蒙版。假设我的面具看起来像这样。(3x3)

> 1 2 1
> 
> 2 4 2
> 
> 1 2 1

我的 x 和 y 面具会是什么样子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T01:22:00.980

1-创建高斯蒙版的解决方案是设置一个`N`按`N`矩阵，使用`N=3*sigma`（或更少，如果你想要一个更粗略的解决方案），并用 填充每个`(i,j)`条目`exp(-((i-N/2)^2 + (j-N/2)^2)/(2*sigma^2))`。正如评论所提到的，`N=3*sigma`仅仅意味着你将你的高斯截断在一个“足够小”的阈值。

2-是的-您理解正确。一个小细节是，您需要通过权重的总和进行归一化（即，将您所说的结果除以矩阵中所有元素的总和）。另一种选择是您可以构建已经归一化的矩阵，这样您就不需要在最后执行此归一化（归一化的高斯公式变为`exp(-((i-N/2)^2 + (j-N/2)^2)/(2*sigma^2))/(2*pi*sigma)`）

3-在您的特定情况下，一维版本是`[1 2 1]`（即，您的`x`和`y`掩码），因为您可以获得通过乘法给出的矩阵`transpose([1 2 1]) * [1 2 1]`。一般来说，您可以使用与上述类似的一维高斯公式直接构建这些一维高斯：（`exp(-((i-N/2)^2)/(2*sigma^2))` 或归一化版本`exp(-((i-N/2)^2)/(2*sigma^2)) / (sigma*sqrt(2*pi))`）

# c# - 带有 Java 客户端 null 返回的 SOAP C# 服务器

> ID：13828439
> 
> 赞同：5
> 
> 时间：2012-12-11T21:01:12.943
> 
> 标签：c#, java, web-services, soap

我想检查不同平台之间的 SOAP 互操作性；我是一名 Java 程序员，尤其不了解 C#。

我在 C# 中做了什么：

**转移对象**：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Xml.Serialization;

[XmlRoot]
public class Pack
{
    private int id;
    private string name;

    public Pack()
    {   
    }

    public Pack(int anId, string aName)
    {
        this.id = anId;
        this.name = aName;
    }

    public void setId(int anId)
    {
        this.id = anId;
    }

    public int getId()
    {
        return id;
    }

    public void setName(string aName)
    {
        this.name = aName;
    }

    public string getName()
    {
        return name;
    }
} 
```

**网络服务**：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Services;
using System.Xml.Serialization;

[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
public class PackWS : System.Web.Services.WebService
{
    private Dictionary<int, Pack> dictionary;

    public PackWS()
    {
        dictionary = new Dictionary<int, Pack>();
    }

    [WebMethod]
    [XmlInclude(typeof(String))]
    public String getName()
    {
        return "Goodbye world!";
    }

    [WebMethod]
    [XmlInclude(typeof(Pack))]
    public void addPackage(Pack package)
    {
       dictionary.Add(package.getId(), package);
    }

    [WebMethod]
    [XmlInclude(typeof(Pack))]
    public Pack getPackage(int id)
    {
        return dictionary[id];
    }
} 
```

项目在指定的 URI 处构建和发布 wsdl。我添加了一个 Java 客户端部分：

**转移对象**：

```
package user;

import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement
public class Pack {
    private int id;
    private String name;

    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }
} 
```

**界面：**

```
package user;

import javax.jws.WebService;
import javax.jws.soap.SOAPBinding;

@WebService(targetNamespace = "http://tempuri.org/",
        portName = "PackWSSoap",
        wsdlLocation = "http://localhost:57265/Service.asmx?wsdl",
        serviceName = "PackWS")
@SOAPBinding(style = SOAPBinding.Style.RPC)
public interface PackWSSoap {
    void addPackage(Pack pack);
    Pack getPackage(int id);
    String getName();
} 
```

**服务**

```
package user;

import javax.xml.namespace.QName;
import javax.xml.ws.Service;
import java.net.MalformedURLException;
import java.net.URL;

public class PackageClient {
    public static void main(String[] args) {
        try {
            URL url = new URL("http://localhost:57265/Service.asmx?wsdl");
            QName qName = new QName("http://tempuri.org/", "PackWS");

            Service service = Service.create(url, qName);

            PackWSSoap packWS = service.getPort(PackWSSoap.class);

            System.out.println(packWS.getName());//null here

            packWS.addPackage(getPack());//C# exception here

            System.out.println(packWS.getPackage(getPack().getId()));//unreachable 

        } catch (MalformedURLException e) {
            e.printStackTrace();
        }
    }

    static Pack getPack() {
        return new Pack(){{
            setId(2);
            setName("name");
        }
        };
    }
} 
```

调用该`getName()`方法时，它应该返回一个简单的字符串，但它返回 null。当尝试通过调用添加包时，`addPackage(pack)`我在客户端上收到来自 C# 的异常，在 Java 中：

```
Exception in thread "main" javax.xml.ws.soap.SOAPFaultException: System.Web.Services.Protocols.SoapException: Server was unable to process request. ---> System.NullReferenceException: Object reference not set to an instance of an object.
   at PackWS.addPackage(Pack package) in f:\DS Projects\ds5\NET\App_Code\PackWS.cs:line 38
   --- End of inner exception stack trace ---
    at com.sun.xml.ws.fault.SOAP11Fault.getProtocolException(SOAP11Fault.java:163)
    at com.sun.xml.ws.fault.SOAPFaultBuilder.createException(SOAPFaultBuilder.java:94)
    at com.sun.xml.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:236)
    at com.sun.xml.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:206)
    at com.sun.xml.ws.client.sei.SEIStub.invoke(SEIStub.java:103)
    at $Proxy18.addPackage(Unknown Source)
    at user.PackageClient.main(PackageClient.java:25)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120) 
```

我不认为沟通有什么问题，因为异常通过得很好；但我相信我没有向 .NET 服务器添加任何内容。任何帮助将不胜感激，并对长篇文章感到抱歉。

这是**WSDL**：

```
<wsdl:definitions xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tm="http://microsoft.com/wsdl/mime/textMatching/" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:mime="http://schemas.xmlsoap.org/wsdl/mime/" xmlns:tns="http://tempuri.org/" xmlns:s="http://www.w3.org/2001/XMLSchema" xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" xmlns:http="http://schemas.xmlsoap.org/wsdl/http/" targetNamespace="http://tempuri.org/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/">
<wsdl:types>
<s:schema elementFormDefault="qualified" targetNamespace="http://tempuri.org/">
<s:element name="getName">
<s:complexType/>
</s:element>
<s:element name="getNameResponse">
<s:complexType>
<s:sequence>
<s:element minOccurs="0" maxOccurs="1" name="getNameResult" type="s:string"/>
</s:sequence>
</s:complexType>
</s:element>
<s:element name="addPackage">
<s:complexType>
<s:sequence>
<s:element minOccurs="1" maxOccurs="1" name="package" nillable="true" type="tns:Pack"/>
</s:sequence>
</s:complexType>
</s:element>
<s:complexType name="Pack"/>
<s:element name="addPackageResponse">
<s:complexType/>
</s:element>
<s:element name="getPackage">
<s:complexType>
<s:sequence>
<s:element minOccurs="1" maxOccurs="1" name="id" type="s:int"/>
</s:sequence>
</s:complexType>
</s:element>
<s:element name="getPackageResponse">
<s:complexType>
<s:sequence>
<s:element minOccurs="1" maxOccurs="1" name="getPackageResult" nillable="true" type="tns:Pack"/>
</s:sequence>
</s:complexType>
</s:element>
</s:schema>
</wsdl:types>
<wsdl:message name="getNameSoapIn">
<wsdl:part name="parameters" element="tns:getName"/>
</wsdl:message>
<wsdl:message name="getNameSoapOut">
<wsdl:part name="parameters" element="tns:getNameResponse"/>
</wsdl:message>
<wsdl:message name="addPackageSoapIn">
<wsdl:part name="parameters" element="tns:addPackage"/>
</wsdl:message>
<wsdl:message name="addPackageSoapOut">
<wsdl:part name="parameters" element="tns:addPackageResponse"/>
</wsdl:message>
<wsdl:message name="getPackageSoapIn">
<wsdl:part name="parameters" element="tns:getPackage"/>
</wsdl:message>
<wsdl:message name="getPackageSoapOut">
<wsdl:part name="parameters" element="tns:getPackageResponse"/>
</wsdl:message>
<wsdl:portType name="PackWSSoap">
<wsdl:operation name="getName">
<wsdl:input message="tns:getNameSoapIn"/>
<wsdl:output message="tns:getNameSoapOut"/>
</wsdl:operation>
<wsdl:operation name="addPackage">
<wsdl:input message="tns:addPackageSoapIn"/>
<wsdl:output message="tns:addPackageSoapOut"/>
</wsdl:operation>
<wsdl:operation name="getPackage">
<wsdl:input message="tns:getPackageSoapIn"/>
<wsdl:output message="tns:getPackageSoapOut"/>
</wsdl:operation>
</wsdl:portType>
<wsdl:binding name="PackWSSoap" type="tns:PackWSSoap">
<soap:binding transport="http://schemas.xmlsoap.org/soap/http"/>
<wsdl:operation name="getName">
<soap:operation soapAction="http://tempuri.org/getName" style="document"/>
<wsdl:input>
<soap:body use="literal"/>
</wsdl:input>
<wsdl:output>
<soap:body use="literal"/>
</wsdl:output>
</wsdl:operation>
<wsdl:operation name="addPackage">
<soap:operation soapAction="http://tempuri.org/addPackage" style="document"/>
<wsdl:input>
<soap:body use="literal"/>
</wsdl:input>
<wsdl:output>
<soap:body use="literal"/>
</wsdl:output>
</wsdl:operation>
<wsdl:operation name="getPackage">
<soap:operation soapAction="http://tempuri.org/getPackage" style="document"/>
<wsdl:input>
<soap:body use="literal"/>
</wsdl:input>
<wsdl:output>
<soap:body use="literal"/>
</wsdl:output>
</wsdl:operation>
</wsdl:binding>
<wsdl:binding name="PackWSSoap12" type="tns:PackWSSoap">
<soap12:binding transport="http://schemas.xmlsoap.org/soap/http"/>
<wsdl:operation name="getName">
<soap12:operation soapAction="http://tempuri.org/getName" style="document"/>
<wsdl:input>
<soap12:body use="literal"/>
</wsdl:input>
<wsdl:output>
<soap12:body use="literal"/>
</wsdl:output>
</wsdl:operation>
<wsdl:operation name="addPackage">
<soap12:operation soapAction="http://tempuri.org/addPackage" style="document"/>
<wsdl:input>
<soap12:body use="literal"/>
</wsdl:input>
<wsdl:output>
<soap12:body use="literal"/>
</wsdl:output>
</wsdl:operation>
<wsdl:operation name="getPackage">
<soap12:operation soapAction="http://tempuri.org/getPackage" style="document"/>
<wsdl:input>
<soap12:body use="literal"/>
</wsdl:input>
<wsdl:output>
<soap12:body use="literal"/>
</wsdl:output>
</wsdl:operation>
</wsdl:binding>
<wsdl:service name="PackWS">
<wsdl:port name="PackWSSoap" binding="tns:PackWSSoap">
<soap:address location="http://localhost:57265/Service.asmx"/>
</wsdl:port>
<wsdl:port name="PackWSSoap12" binding="tns:PackWSSoap12">
<soap12:address location="http://localhost:57265/Service.asmx"/>
</wsdl:port>
</wsdl:service>
</wsdl:definitions> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T21:17:41.780

.NET 中的 Web 服务不维护请求之间的会话状态。当您初始化字典时，它仅在该特定请求的持续时间内存在。在随后的请求中，它再次为空，因此您得到了异常。

如果你想实现这样的服务，使用在请求之间持续存在的对象，你可以使用 Application 作为共享存储。不过，它看起来有点难看，因为您必须在访问它时键入 cast。

初始化：

```
Application["dictionary"] = new Dictionary<int, Pack>(); 
```

添加：

```
((Dictionary<int, Pack>)Application["dictionary"]).Add(package.getId(), package); 
```

阅读：

```
return ((Dictionary<int, Pack>)Application["dictionary"])[id]; 
```

有关应用程序商店（HttpApplicationState 的一个实例）的更多信息，请访问[http://msdn.microsoft.com/en-us/library/system.web.httpapplicationstate.aspx](http://msdn.microsoft.com/en-us/library/system.web.httpapplicationstate.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T20:50:42.007

如果不是绝对必要，我永远不会使用肥皂。我建议您使用 REST Web 服务将主体 JSON 对象放入其中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T12:16:48.253

您的 .asmx 文件（ASP.NET Web 服务）在哪里？

您得到的例外来自 PackWS.cs:line 38，它应该是 getPackage() web 方法。

当我运行 PackageClient 我得到

```
Dec 22, 2012 7:13:50 AM org.apache.cxf.service.factory.ReflectionServiceFactoryBean buildServiceFromWSDL
INFO: Creating Service {http://tempuri.org/}PackWS from WSDL: http://10.0.1.32:49232/PackWS.asmx?wsdl
Dec 22, 2012 7:13:51 AM org.apache.cxf.service.factory.ReflectionServiceFactoryBean buildServiceFromWSDL
INFO: Creating Service {http://tempuri.org/}PackWS from WSDL: http://10.0.1.32:49232/PackWS.asmx?wsdl
Hello world! 
```

在.NET Web 服务上我得到

```
System.Collections.Generic.KeyNotFoundException was unhandled by user code
  HResult=-2146232969
  Message=The given key was not present in the dictionary.
  Source=mscorlib
  StackTrace:
       at System.Collections.Generic.Dictionary`2.get_Item(TKey key)
       at PackWS.getPackage(Int32 id) in c:\Users\Vineet\Documents\Visual Studio 2012\Projects\PackWS\PackWS\PackWS.asmx:line 39
  InnerException: 
```

要解决这个问题，请遵循 Scott 上面提到的内容。

查看 .NET Web 服务的整个源代码：

[https://github.com/firefoxNX/StackOverflow/tree/master/PackWS](https://github.com/firefoxNX/StackOverflow/tree/master/PackWS)

和 Java 客户端

[https://github.com/firefoxNX/StackOverflow/tree/master/PackWSClient](https://github.com/firefoxNX/StackOverflow/tree/master/PackWSClient)

# symfony - Symfony 2 - 创建上传资产的链接

> ID：13828447
> 
> 赞同：2
> 
> 时间：2012-12-11T21:01:32.587
> 
> 标签：symfony, twig

如何使用 Symfony 2 和 twig 动态链接到上传的资产？我有一个将文件上传到文件夹的控制器`/web/uploads/entityName/fileName`。在模板中，我尝试使用该`asset(document.path)`功能来创建图像链接。问题是该函数返回的路径`/web/fileName`。如何添加缺少的路径参数 ( `uploads/documents`)？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T00:40:56.407

使用 Twig 字符串连接运算符“~”，如下所示：

```
asset('uploads/documents'~document.path) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T06:36:23.307

您可以将 url 从控制器发送到 Twig。
`// Controller
$twig_params = array('uploadedURL' => $uploadedURL);
$this->render('VendorBundle:someTemplate.html.twig', $twig_params)`

`// Twig
<img src="{{ uploadedURL }}" />`

# javascript - 用户在文本输入中键入时的 html 捕获事件

> ID：13828450
> 
> 赞同：25
> 
> 时间：2012-12-11T21:01:39.297
> 
> 标签：javascript, jquery, html, input, typeahead

我只是想知道当用户在我的 Web 应用程序上的文本输入字段中输入时我如何去捕捉事件。

场景是，我有一个联系人列表网格。在表单的顶部，用户可以键入他们要查找的联系人的姓名。一旦文本输入中有超过 1 个字符，我想开始在系统中搜索包含用户输入的那些字符的联系人。随着他们不断输入数据的变化。

它实际上只是一个简单的提前类型功能（或自动完成），但我想在不同的控件中触发数据。

一旦输入失去焦点，我可以从输入中取出文本，但这不适合这种情况。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-11T21:04:25.907

使用 keyup 事件在用户键入时捕获值，并尽您所能搜索该值：

```
$('input').on('keyup', function() {
     if (this.value.length > 1) {
          // do search for this.value here
     }
}); 
```

另一种选择是`input`事件，它从键、粘贴等中捕获任何输入。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2016-04-17T12:07:36.697

为什么不使用 HTML oninput 事件？

```
<input type="text" oninput="searchContacts()"> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-11T21:07:26.947

我会使用 ' [input](https://developer.mozilla.org/en-US/docs/DOM/DOM_event_reference/input) ' 和 ' [propertychange](http://msdn.microsoft.com/en-us/library/ie/ms536956%28v=vs.85%29.aspx) ' 事件。他们也可以通过鼠标进行剪切和粘贴。

另外，考虑[去抖动](http://underscorejs.org/#debounce)你的事件处理程序，这样快速打字员就不会受到许多 DOM 刷新的惩罚。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T21:12:34.473

看看我的尝试：

你应该把 .combo 放在每个 .input 类之后。

.input 是一个文本框，.combo 是一个 div

```
$(".input").keyup(function(){
    var val = this.value;
    if (val.length > 1) {
        //you search method...
    }
    if (data) $(this).next(".combo").html(data).fadeIn(); else $(this).next(".combo").hide().html("");
});

$(".input").blur(function(){
    $(this).next(".combo").hide();
}); 
```

# wix - WiX：添加显示已安装功能的摘要对话框

> ID：13828460
> 
> 赞同：5
> 
> 时间：2012-12-11T21:02:32.183
> 
> 标签：wix, windows-installer

我想在安装结束时向用户显示一个摘要页面，显示安装了哪些功能。ADDLOCAL 属性包含此信息，但我无法弄清楚如何在对话框中显示其值。将其添加为控件的 Text 属性不起作用。

```
<!-- Does not display anything -->
<Control Id="InstalledFeaturesText" Type="Text" ... Text="[ADDLOCAL]" /> 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T16:33:41.647

将以下行添加到您的 wix 源代码

```
<SetProperty Id="FEATURELIST" Value="[ADDLOCAL]" After="CostFinalize"/> 
```

并使用`FEATURELIST`属性获取所有已安装功能的列表。就是这样。:)

`'ADDLOCAL`之所以如此，是因为在完成所有安装序列后 '似乎变得未定义。

# java - Java中的Shell-sort算法变体

> ID：13828461
> 
> 赞同：3
> 
> 时间：2012-12-11T21:02:35.600
> 
> 标签：java, sorting, shellsort

有没有办法计算 for 循环的起点及其调整。原始循环有这些条件

`for( int gap = a.length / 2; gap > 0; gap /= 2 )`

我对其进行了调整以设置 Hibbard's Shell Sort 的条件并得到了这个

`for( int gap = (int) Math.pow(2, a.length); gap > 0; gap /= 2 )`

它工作得稍微好一点，甚至可能是正确的，但我想从这里开始使用更高级的 shell 类型。

[http://en.wikipedia.org/wiki/Shellsort#Gap_sequences](http://en.wikipedia.org/wiki/Shellsort#Gap_sequences)

如何将 (3^k - 1)/2 不大于 n/3 的上限转换为 for 循环条件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T21:22:47.580

“k”值是序列的元素。所以你的 for 循环可能看起来像：

```
 for (int k = 0; (Math.pow(3, k) - 1) / 2 <= Math.ceil(n / 3); k++) {
        int gap = (int) ((Math.pow(3, k) - 1) / 2);
        ...
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T21:28:20.343

```
for( int gap = 1; gap < ((a.length + 2)/3); gap = (((((gap *2)+1)*3)-1)/2)) 
```

# selenium-webdriver - 使用 CSSSelector 的第一个匹配元素

> ID：13828463
> 
> 赞同：1
> 
> 时间：2012-12-11T21:02:56.050
> 
> 标签：selenium-webdriver, css-selectors

所以，我正在尝试对专栏进行测试`Title or Names or DateTime`

我正在尝试获取`test`td 元素，并使用 CSSSelector 尝试了以下操作：

```
div#body-inner div#ctl00_ContentPlaceHolder1_Control1_pnlList div table#ctl00_ContentPlaceHolder1_Control1_gv.gv tbody tr.item td:nth-child(4) 
```

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head id="ctl00_PageHead">
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <title>Employee</title>

  <body id="ctl00_PageBody">
    <form name="aspnetForm">
      <div>
      </div>
      <div>
      </div>
      <table class="global-table" cellpadding="0" cellspacing="0">
        <tr class="body">
          <td>
            <div id="body">
              <div id="body-inner">
                <h1>
                                    Employee Information</h1>
                <div id="ctl00_ContentPlaceHolder1_Control1_pnlList" style="width: 100%;">
                  &nbsp;
                  <div class='filter'>
                  </div>
                  <div>
                    <table class="gv" cellspacing="0" border="0" id="ctl00_ContentPlaceHolder1_Control1_gv" style="border-collapse: collapse;">
                      <tr class="header">
                        <th class=" nolink" scope="col">
                          &nbsp;
                        </th>
                        <th scope="col">
                          <a href="javascript:__doPostBack('ctl00$ContentPlaceHolder1$Control1$gv','Sort$Phone')">
                                                        Phone</a>
                        </th>
                        <th class=" sorted-desc" scope="col">
                          <a href="javascript:__doPostBack('ctl00$ContentPlaceHolder1$Control1$gv','Sort$Title')">
                                                        Title</a>
                        </th>
                        <th scope="col">
                          <a href="javascript:__doPostBack('ctl00$ContentPlaceHolder1$Control1$gv','Sort$SubTitle')">
                                                        SubTitle</a>
                        </th>
                        <th scope="col">
                          <a href="javascript:__doPostBack('ctl00$ContentPlaceHolder1$Control1$gv','Sort$Names')">
                                                        Names</a>
                        </th>
                        <th scope="col">
                          <a href="javascript:__doPostBack('ctl00$ContentPlaceHolder1$Control1$gv','Sort$Names')">
                                                        Enames</a>
                        </th>
                        <th scope="col">
                          <a href="javascript:__doPostBack('ctl00$ContentPlaceHolder1$Control1$gv','Sort$Active')">
                                                        Active</a>
                        </th>
                        <th scope="col">
                          <a href="javascript:__doPostBack('ctl00$ContentPlaceHolder1$Control1$gv','Sort$DateTime')">
                                                        &nbsp;DateTime</a>
                        </th>
                      </tr>
                      <tr class="item">
                        <td align="center">
                          <a href="javascript:__doPostBack('ctl00$ContentPlaceHolder1$Control1$gv','Select$0')">
                                                        Edit</a>
                        </td>
                        <td align="center" style="width: 15px;">
                        </td>
                        <td>
                          Test
                        </td>
                        <td>
                          &nbsp;
                        </td>
                        <td>
                          &nbsp;
                        </td>
                        <td>
                          &nbsp;
                        </td>
                        <td>
                          &nbsp;
                        </td>
                        <td>
                          8/23/2011&nbsp;
                        </td>
                      </tr>
                      <tr class="altItem">
                        <td align="center">
                          <a href="javascript:__doPostBack('ctl00$ContentPlaceHolder1$Control1$gv','Select$1')">
                                                        Edit</a>
                        </td>
                        <td align="center" style="width: 15px;">
                        </td>
                        <td>
                          Test1
                        </td>
                        <td>
                          1
                        </td>
                        <td>
                          Employee
                        </td>
                        <td>
                          &nbsp;
                        </td>
                        <td>
                          &nbsp;
                        </td>
                        <td>
                          7/31/2014
                        </td>
                      </tr>
                      <tr class="item">
                        <td align="center">
                          <a href="javascript:__doPostBack('ctl00$ContentPlaceHolder1$Control1$gv','Select$2')">
                                                        Edit</a>
                        </td>
                        <td align="center" style="width: 15px;">
                        </td>
                        <td>
                          Test2</td>
                        <td>
                          111
                        </td>
                        <td>
                          Employer
                        </td>
                        <td>
                        </td>
                        <td>
                          &nbsp;
                        </td>
                        <td>
                          7/31/2013
                        </td>
                      </tr>
                      <tr class="altItem">
                        <td align="center">
                          <a href="javascript:__doPostBack('ctl00$ContentPlaceHolder1$Control1$gv','Select$3')">
                                                        Edit</a>
                        </td>
                        <td align="center" style="width: 15px;">
                        </td>
                        <td>
                          Test3</td>
                        <td>
                          &nbsp;
                        </td>
                        <td>
                          &nbsp;
                        </td>
                        <td>
                          &nbsp;
                        </td>
                        <td>
                          &nbsp;
                        </td>
                        <td>
                          8/23/2011
                        </td>
                      </tr>
                      <tr class="item">
                        <td align="center">
                          <a href="javascript:__doPostBack('ctl00$ContentPlaceHolder1$Control1$gv','Select$4')">
                                                        Edit</a>
                        </td>
                        <td align="center" style="width: 15px;">
                        </td>
                        <td>
                          Test4</td>
                        <td>
                          2
                        </td>
                        <td>
                          Employer
                        </td>
                        <td>
                          &nbsp;
                        </td>
                        <td>
                          &nbsp;
                        </td>
                        <td>
                          7/31/2012
                        </td>
                      </tr>
                      <tr class="altItem">
                        <td align="center">
                          <a href="javascript:__doPostBack('ctl00$ContentPlaceHolder1$Control1$gv','Select$5')">
                                                        Edit</a>
                        </td>
                        <td align="center" style="width: 15px;">
                        </td>
                        <td>
                          Test5</td>
                        <td>
                          3
                        </td>
                        <td>
                          Employer&nbsp;
                        </td>
                        <td>
                          &nbsp;
                        </td>
                        <td>
                          &nbsp;
                        </td>
                        <td>
                          7/31/2012
                        </td>
                      </tr>
                      <tr class="item">
                        <td align="center">
                          <a href="javascript:__doPostBack('ctl00$ContentPlaceHolder1$Control1$gv','Select$6')">
                                                        Edit</a>
                        </td>
                        <td align="center" style="width: 15px;">
                        </td>
                        <td>
                          Test6
                        </td>
                        <td>
                          a
                        </td>
                        <td>
                          &nbsp;
                        </td>
                        <td>
                          &nbsp;
                        </td>
                        <td>
                          &nbsp;
                        </td>
                        <td>
                          7/20/2012
                        </td>
                      </tr>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </td>
        </tr>
        <tr class="footer">
          <td>
          </td>
        </tr>
      </table>
    </form>
  </body>

</html> 
```

我得到的结果是所有匹配的元素，但我怎样才能只得到 td`test`呢？

```
<td >
test
</td>
<td >
DEMO TEST OCT 25
</td>
<td class="firefinder-match">
DEMO TEST OCT 25
</td>
<td >
DEMO TEST OCT 25
</td>
<td >
DEMO TEST OCT 25
</td>

<td >
DEMO TEST OCT 25
</td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T22:19:23.777

问题在于`tr.item`。该类有多行，您正在选择所有行。通过使用`first-child`伪类更具体，因此它只会选择第一个`tr.item`而不是全部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T22:35:46.067

这是我能够得到的方法：

```
table#ctl00_ContentPlaceHolder1_Control1_gv.gv tbody tr.item:nth-child(3) > td:nth-of-type(3) 
```

# c++ - 如果在其库未直接包含在源代码中时使用标识符，是否可以强制视觉工作室抛出错误？

> ID：13828464
> 
> 赞同：1
> 
> 时间：2012-12-11T21:03:13.713
> 
> 标签：c++, visual-studio-2010, include

编译以下源时：

```
int main()
{
  exp(1.0);

  return 0;
} 
```

编译器给出以下错误：`error C3861: 'exp': identifier not found`因为我没有行：`#include <iostream>`上面`main()`

但是，如果间接包含库，Visual Studio 将不会显示错误。例如，以下代码编译没有问题，即使 的依赖关系`exp`在`<cmath>`.

```
#include <istream>
int main()
{
  exp(1.0);

  return 0;
} 
```

这是因为`<iostream>`包括`<istream>`哪些包括`<ostream>`哪些包括`<ios>`哪些包括`<xlocnum>`哪些包括`<cmath>`。

如果我没有明确包含一个库但尝试使用它的标识符之一，有没有办法让视觉工作室抛出错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T21:19:13.697

您可能想看看[include-what-you-use](http://code.google.com/p/include-what-you-use/)。它是一个基于[clang](http://clang.llvm.org/)的工具，试图检测缺失和多余的包含指令。

# php - 您如何观察 Magento 数据的变化？

> ID：13828465
> 
> 赞同：0
> 
> 时间：2012-12-11T21:03:17.190
> 
> 标签：php, mysql, magento

我想观察几乎所有 Magento 存储数据（例如客户、订单、产品）的变化。SOAP/RPC API 似乎无法获取数据更改列表。

构建一个模块的唯一方法是观察这里[http://www.magentocommerce.com/wiki/5_-_modules_and_development/reference/magento_events](http://www.magentocommerce.com/wiki/5_-_modules_and_development/reference/magento_events)找到的大多数 Magento 事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T21:21:47.717

*   `model_save_before`/`model_save_after`

但是，不能保证这会捕获所有影响实体的写操作。可以使用写入适配器插入/更改/删除实体数据，完全绕过 ORM 和框架。

重要的问题是：你为什么要这样做？

# c++ - 使用模板复制和移动构造函数进行 C++ 类型擦除

> ID：13828468
> 
> 赞同：5
> 
> 时间：2012-12-11T21:03:32.353
> 
> 标签：c++

我最近开始学习类型擦除。事实证明，这种技术可以大大简化我的生活。因此我试图实现这种模式。但是，我在使用类型擦除类的复制和移动构造函数时遇到了一些问题。现在，让我们先看一下代码，这很简单

```
#include<iostream>
class A //first class
{
    private:
        double _value;
    public:
        //default constructor
        A():_value(0) {}
        //constructor
        A(double v):_value(v) {}
        //copy constructor
        A(const A &o):_value(o._value) {}
        //move constructor
        A(A &&o):_value(o._value) { o._value = 0; }

        double value() const { return _value; }
};

class B //second class
{
    private:
        int _value;
    public:
        //default constructor
        B():_value(0) {}
        //constructor
        B(int v):_value(v) {}
        //copy constructor
        B(const B &o):_value(o._value) {}
        //move constructor
        B(B &&o):_value(o._value) { o._value = 0; }

        //some public member
        int value() const { return _value; }
};

class Erasure //the type erasure
{
    private:
        class Interface  //interface of the holder
        {
            public:
                virtual double value() const = 0;
        };

        //holder template - implementing the interface
        template<typename T> class Holder:public Interface
        {
            public:
                T _object;
            public:
                //construct by copying o
                Holder(const T &o):_object(o) {}
                //construct by moving o
                Holder(T &&o):_object(std::move(o)) {}
                //copy constructor
                Holder(const Holder<T> &o):_object(o._object) {}
                //move constructor
                Holder(Holder<T> &&o):_object(std::move(o._object)) {}

                //implements the virtual member function
                virtual double value() const
                {
                    return double(_object.value());
                }
        };

        Interface *_ptr; //pointer to holder
    public:
        //construction by copying o
        template<typename T> Erasure(const T &o):
             _ptr(new Holder<T>(o))
        {}

        //construction by moving o
        template<typename T> Erasure(T &&o):
            _ptr(new Holder<T>(std::move(o)))
        {}

        //delegate
        double value() const { return _ptr->value(); }
};

int main(int argc,char **argv)
{
    A a(100.2344);
    B b(-100);

    Erasure g1(std::move(a));
    Erasure g2(b);

    return 0;
} 
```

作为编译器，我在 Debian 测试系统上使用 gcc 4.7。假设代码存储在名为`terasure.cpp`build 的文件中会导致以下错误消息

```
$> g++ -std=c++0x -o terasure terasure.cpp
terasure.cpp: In instantiation of ‘class Erasure::Holder<B&>’:
terasure.cpp:78:45:   required from ‘Erasure::Erasure(T&&) [with T = B&]’
terasure.cpp:92:17:   required from here
terasure.cpp:56:17: error: ‘Erasure::Holder<T>::Holder(T&&) [with T = B&]’ cannot be   overloaded
terasure.cpp:54:17: error: with ‘Erasure::Holder<T>::Holder(const T&) [with T = B&]’
terasure.cpp: In instantiation of ‘Erasure::Erasure(T&&) [with T = B&]’:
terasure.cpp:92:17:   required from here
terasure.cpp:78:45: error: no matching function for call to   ‘Erasure::Holder<B&>::Holder(std::remove_reference<B&>::type)’
terasure.cpp:78:45: note: candidates are:
terasure.cpp:60:17: note: Erasure::Holder<T>::Holder(Erasure::Holder<T>&&) [with T = B&]
terasure.cpp:60:17: note:   no known conversion for argument 1 from ‘std::remove_reference<B&>::type {aka B}’ to ‘Erasure::Holder<B&>&&’
terasure.cpp:58:17: note: Erasure::Holder<T>::Holder(const Erasure::Holder<T>&) [with T = B&]
terasure.cpp:58:17: note:   no known conversion for argument 1 from ‘std::remove_reference<B&>::type {aka B}’ to ‘const Erasure::Holder<B&>&’
terasure.cpp:54:17: note: Erasure::Holder<T>::Holder(const T&) [with T = B&]
terasure.cpp:54:17: note:   no known conversion for argument 1 from ‘std::remove_reference<B&>::type {aka B}’ to ‘B&’ 
```

似乎`Erasure g2(b);`编译器仍然尝试使用移动构造函数。这是编译器的预期行为吗？我是否误解了类型擦除模式的一般内容？有人知道如何做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T21:32:20.327

从编译器错误中可以明显看出，编译器正在尝试将您的`Holder`类实例化为`T = B&`. 这意味着该类将存储引用类型的成员，这会给您在复制等方面带来一些问题。

问题在于`T&&`（对于推导的模板参数）是一个通用引用，这意味着它将绑定到所有内容。对于它的 r 值，`B`它将推断`T`为 be`B`并绑定为 r 值引用，对于 l 值，它将推断`T`为 be`B&`并使用引用折叠来解释`B& &&`为`B&`（对于`const B`l 值，它将推断`T`为`const B&`并进行折叠） . 在您的示例`b`中，是一个可修改的左值，使构造函数采用`T&&`（推断为）比（推断为`B&`）更好的匹配。这也意味着构造函数并不是真正需要的（与由于`const T&``const B&``Erasure``const T&``Holder``T`没有为该构造函数推断）。

对此的解决方案是在创建持有者类时从类型中删除引用（可能还有常量，除非您想要一个 const 成员）。您还应该使用`std::forward<T>`而不是`std::move`，因为如前所述，构造函数也绑定到左值，并且从这些值移动可能是一个坏主意。

```
 template<typename T> Erasure(T&& o):
        _ptr(new Holder<typename std::remove_cv<typename std::remove_reference<T>::type>::type>(std::forward<T>(o))
    {} 
```

您的类中还有另一个错误，`Erasure`编译器不会捕获它：您将您`Holder`的原始指针存储在指向堆分配内存的原始指针中，但既没有自定义析构函数来删除它，也没有自定义处理复制/移动/分配（规则三/五）。解决该问题的一种选择是实现这些操作（或使用 禁止不必要的操作`=delete`）。然而这有点乏味，所以我个人的建议是不要手动管理内存，而是使用 a`std::unique_ptr`进行内存管理（不会给你复制能力，但如果你想要你首先需要扩展你`Holder`的类以进行克隆） .

其他要考虑的要点：为什么要为 和 实现自定义复制/移动`Erasure::Holder<T>`构造`A`函数`B`？默认值应该很好，并且不会禁用移动赋值运算符的生成。

另一点是`Erasure(T &&o)`有问题的，因为它将与复制/移动构造函数竞争（`T&&`可以绑定到`Èrasure&`哪个是更好的匹配然后两者`const Erasure&`）`Erasure&&`。为避免这种情况，您可以使用`enable_if`检查类型`Erasure`，为您提供与此类似的内容：

```
 template<typename T, typename Dummy = typename std::enable_if<!std::is_same<Erasure, std::remove_reference<T>>::value>::type>
    Erasure(T&& o):
        _ptr(new Holder<typename std::remove_cv<typename std::remove_reference<T>::type>::type>(std::forward<T>(o))
   {} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T21:32:27.717

您的问题是`T`您的构造函数采用通用引用将类型推断为引用。您想使用以下内容：

```
#include <type_traits>

class Erasure {
    ....

    //construction by moving o
    template<typename T>
    Erasure(T &&o):
        _ptr(new Holder<typename std::remove_reference<T>::type>(std::forward<T>(o)))
    {
    }
}; 
```

也就是说，您需要删除从中推断出的任何引用`T`（可能还有任何 cv 限定符，但更正不会这样做）。然后你不想要`std::move()`这个论点`o`，但`std::forward<T>()`它：`std::move(o)`如果你确实将非`const`引用传递给`Erasure`.

我没有过多关注其他代码，据我所知，还有一些语义错误（例如，您需要某种形式的引用计数或`clone()`包含指针的 int 形式，以及资源控制（即复制构造函数、复制赋值和析构函数）在`Erasure`.

# sql - 将排序规则应用于 sql server 数据库

> ID：13828471
> 
> 赞同：2
> 
> 时间：2012-12-11T21:03:47.823
> 
> 标签：sql, sql-server, sql-server-2012, collation

我目前正在将排序规则应用于我的 sql server 数据库，这些数据库位于数据库服务器 - sql server 2012 上。

每个数据库都有不同的排序规则，因为数据从拉丁语到 Cryillic 和一个阿拉伯语数据库不等。

我有3个问题：

1.  是否可以将多个排序规则应用于同一个 sql server 数据库？
2.  不同排序规则的事实数据库在同一个数据库服务器上，服务器排序规则和数据库之间是否存在冲突的可能性？
3.  最后 - 是否有一个脚本可以用来对每个数据库应用排序规则，注意它们是创建并包含数据的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T21:13:12.000

> 是否可以将多个排序规则应用于同一个 sql server 数据库？

数据库排序规则只是该数据库中新列的默认值。您可以根据自己的喜好指定不同的排序规则，只要它用于不同的列即可。您甚至可以在视图或 ad-hoc SQL 中指定排序规则。

> 不同排序规则的事实数据库在同一个数据库服务器上，服务器排序规则和数据库之间是否存在冲突的可能性？

服务器排序规则只是新数据库的默认排序规则。通常，它也是`master`and使用的排序规则`tempdb`。这意味着对临时表的查询需要您明确指定排序规则。

> 最后 - 是否有一个脚本可以用来对每个数据库应用排序规则，注意它们是创建并包含数据的？

您可以使用[alter database](http://msdn.microsoft.com/en-us/library/ms174269.aspx)命令：

```
ALTER DATABASE TestDb ALTER COLLATION French_CI_AI 
```

请注意，所有现有列都将保留其排序规则。如前所述，数据库排序规则只是新列的默认值。

# paypal-ipn - 为什么实施 HTTP/1.1 会破坏我的 IPN 脚本？

> ID：13828472
> 
> 赞同：0
> 
> 时间：2012-12-11T21:03:48.813
> 
> 标签：paypal-ipn, http-1.1

这是我在 PHP 脚本中的原始代码：

```
$header = "POST /cgi-bin/webscr HTTP/1.0\r\n";
$header .= "Content-Type: application/x-www-form-urlencoded\r\n";
$header .= "Content-Length: " . strlen($req) . "\r\n\r\n"; 
```

我收到一封来自 Paypal 的电子邮件，说我需要升级我的 IPN 脚本，以便它使用 HTTP/1.1。所以这是我根据他们的指示将代码更改为的内容：

```
$header .="POST /cgi-bin/webscr HTTP/1.1\r\n";
$header .="Content-Type: application/x-www-form-urlencoded\r\n";
$header .="Host: www.paypal.com\r\n";
$header .="Connection: close\r\n"; 
```

今天付款已经完成，但 IPN 不再更新我的数据库，这是我对其进行的唯一更改。关于做什么的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-26T07:22:58.300

是的。我刚刚和这个做了战斗。对我有用的是删除连接关闭标头，并为来自 PP 的响应添加修剪。以下是标题：

```
$header  = "POST /cgi-bin/webscr HTTP/1.1\r\n";
$header .= "Content-Type: application/x-www-form-urlencoded\r\n";
$header .= "Host: www.paypal.com\r\n"; 
$header .= "Content-Length: " . strlen($req) . "\r\n\r\n"; 
```

这是 fsockopen：

```
$fp = fsockopen ('ssl://www.paypal.com', 443, $errno, $errstr, 30); 
```

以下是 PP 回复的内容：

```
if (!$fp) {
// HTTP ERROR
  error_mail("Could not open socket");
//
} else {
  fputs ($fp, $header . $req);
  while (!feof($fp)) {
    $res = trim(fgets ($fp, 1024));
    }
//
// check the payment_status is Completed
// check that receiver_email is your Primary PayPal email
//
  if ((strcmp ($res, "VERIFIED") == 0) && ($payment_status == "Completed") && ($receiver_email == $valid_receiver_email)) { 
```

这对我有用。

# php - 我正在尝试搜索/迭代一个非常复杂的数组并提取特定值，但我不知道这样做的最佳途径

> ID：13828479
> 
> 赞同：2
> 
> 时间：2012-12-11T21:04:27.233
> 
> 标签：php, arrays

下面是数组结构的示例。我需要能够提取特定值，例如：[245][subfields][a]。每个数组中有可变数量的 [fields] 和可变数量的 [subfields]。感谢您的任何建议！

编辑：我已将数组包含在我正在检索的原生 JSON 格式中。然后我使用 json_decode 将其转换为 php 中的可用数组。如果您有更好的建议，请告诉我。

[链接到漂亮的数组](http://i.imgur.com/GoFol.png)

```
{"leader":"01220nam  2200265   4500","fields":[{"001":"ocm00000197"},{"005":"19880526181046.0"},{"008":"690325r19681924nyua          00000 eng  "},{"010":{"ind1":" ","ind2":" ","subfields":[{"a":"67-020193 \/\/r832"}]}},{"035":{"ind1":" ","ind2":" ","subfields":[{"a":".b10000021"},{"b":"a    "},{"c":"-"}]}},{"041":{"ind1":"1","ind2":" ","subfields":[{"a":"eng"},{"a":"fre"}]}},{"049":{"ind1":" ","ind2":" ","subfields":[{"a":"JBLA"},{"c":"$8.00"}]}},{"100":{"ind1":"1","ind2":"0","subfields":[{"a":"Allemagne, Henry Ren\u00e2e d',"},{"d":"1863-1950."}]}},{"245":{"ind1":"1","ind2":"0","subfields":[{"a":"Decorative antique ironwork :"},{"b":"a pictorial treasury \/"},{"c":"by Henry Ren\u00e2e d'Allemagne ; introd., bibliography, and translation of captions by Vera K. Ostoia."}]}},{"260":{"ind1":"0","ind2":" ","subfields":[{"a":"New York :"},{"b":"Dover Publications,"},{"c":"[1968]"}]}},{"300":{"ind1":" ","ind2":" ","subfields":[{"a":"x, 415 p. :"},{"b":"(chiefly ill.) ;"},{"c":"31 cm."}]}},{"500":{"ind1":" ","ind2":" ","subfields":[{"a":"\"This Dover edition ... is a republication of all the plates in the two portfolios of Mus\u00e2ee Le Secq des Tournelles \u00e1a Rouen: Ferronnerie ancienne, originally published ... in 1924.\""}]}},{"500":{"ind1":" ","ind2":" ","subfields":[{"a":"\"Other books by Henry Ren\u00e2e d'Allemagne\": p. x."}]}},{"590":{"ind1":" ","ind2":" ","subfields":[{"a":"1373336."}]}},{"650":{"ind1":" ","ind2":"0","subfields":[{"a":"Art metal-work."}]}},{"700":{"ind1":"1","ind2":"0","subfields":[{"a":"Ostoia, Vera K."}]}},{"710":{"ind1":"2","ind2":"0","subfields":[{"a":"Mus\u00e2ee Le Secq des Tournelles."}]}},{"830":{"ind1":" ","ind2":"0","subfields":[{"a":"Dover pictorial archive series."}]}},{"999":{"ind1":" ","ind2":" ","subfields":[{"b":"1"},{"c":"901102"},{"d":"m"},{"e":"b"},{"f":"-"},{"g":"0"}]}},{"945":{"ind1":" ","ind2":" ","subfields":[{"a":"739.4\/ALLEMAGNE,H"},{"g":"1"},{"i":"31184001373336"},{"l":"abx7 "},{"n":"moved from RESEARCH collection - Feb 2012"},{"o":"-"},{"p":"$8.00"},{"s":"-"},{"t":"235"},{"u":"10"},{"v":"0"},{"w":"0"},{"x":"1"},{"y":".i10000021"},{"z":"901102"}]}}]} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T21:12:48.210

因此，您似乎需要一种方法来遍历`fields`键以检查其每个子数组的第一个键以匹配您搜索的项目。

```
// Loop over the fields, which are each arrays numerically indexed...
foreach ($record['fields'] as $key => $field) {
  // Get the field's first array key, which is 010, 015, etc...
  $marc_keys = array_keys($field);
  // the first key...
  $marc_field = $marc_keys[0];
  // Note in PHP 5.4 you could dereference it more easily like
  // $marc_field = array_keys($field)[0];

  // Test if the key you found is the one you want...
  if ($marc_field == '245') {
     foreach ($field[$marc_field]['subfields'] as $subkey => $subfield) {
       // Get the subfield identifier (the first array key)
       $sf_keys = array_keys($subfield);
       $sf_identifier = $sf_keys[0];
       if ($sf_identifier == 'a') {
          // Congratulations Arthur, you found the grail....
          // Do something with it...
       } 
     }
  }
  // Otherwise, keep looping until you find the one you need...
} 
```

## 作为一个函数：

最好将其转换为接受`$field,$subfield`as 参数的函数：

### 更新以考虑相同类型的多个子字段，并返回一个数组：

```
function getSubfield($record, $in_field, $in_subfield) {
    // Array to hold output for multiple like subfields
    $subfields_returned = array();

    foreach ($record['fields'] as $key => $field) {
      $marc_keys = array_keys($field);
      $marc_field = $marc_keys[0];

      // Test if the key you found is the one you want (which is the $in_field param)
      if ($marc_field == $in_field) {
         foreach ($field[$marc_field]['subfields'] as $subkey => $subfield) {

           $sf_keys = array_keys($subfield);
           $sf_identifier = $sf_keys[0];

           // And match the subfield to the function param $in_subfield

           if ($sf_identifier == $in_subfield) {
              // Congratulations Arthur, you found the grail....
              // Return it...
              $subfields_returned[] = $subfield[$sf_identifier];
           }
         }
          // After the subfield loop, you can return the accumulated array
         if (count($subfields_returned) > 0) return $subfields_returned;
      }
      // Otherwise, keep looping until you find the one you need...
    }
} 
```

## [这是一个演示](http://codepad.viper-7.com/G5zNhM)

……我拼凑出一张唱片……

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T22:09:50.643

```
// behaves like  array(*, 245, *, 'subfields', *, 'a', *);
// where * is a wildcard for 0 or more keys
$keySequence = array(245, 'subfields', 'a');

$arr = array();
$arr[245]['subfields']['a'] = 'i match';
$arr[245]['subfields'][7]['a'] = 'i match';
$arr[0][0][0][245][0][0]['subfields']['subfields'][0]['a']['a'] = 'i match';
$arr[0][0][0][0][0][0]['subfields']['subfields'][0]['a']['a'] = 'i dont match';
$arr[0][0][0][0][0][0]['subfields']['subfields'][0]['a']['a'] = 'i dont match';

$iter = new RecursiveIteratorIterator(new RecursiveArrayIterator($arr));
$filtered = new CallbackFilterIterator($iter, function ($_, $_, $iterator) use ($keySequence) {
    $i = 0;
    $max = count($keySequence);
    foreach (range(0, $iterator->getDepth()) as $depth) {
        if ($keySequence[$i] === $iterator->getSubIterator($depth)->key())
            $i++;
        if ($i === $max)
            return true;
    }
    return $i === $max;
});

foreach ($filtered as $leafVal) {
    echo "$leafVal\n";
} 
```

[http://codepad.viper-7.com/9t4qVO](http://codepad.viper-7.com/9t4qVO)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T21:16:51.453

如果您要对此数据进行大量自定义搜索，您可以考虑使用[各种已编写的函数](https://www.google.com/search?q=php%20array%20to%20xml)将数组转换为 XML 。然后就可以使用 XPath 灵活的查询数据了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T21:19:05.383

```
function recursiveArrayIterator($arr){
    foreach($arr as $key => $arr2){
        if(is_array($arr2)){
           recursiveArrayIterator($arr2);
        }
    }
}
$arr = array(array('key'=>'value'));
recursiveArrayIterator($arr); 
```

我没有你的要求，但这可能会对你有所帮助。

# window - 如何挂钩 vim 的窗口调整大小事件？

> ID：13828483
> 
> 赞同：3
> 
> 时间：2012-12-11T21:04:50.100
> 
> 标签：window, vim

如果我有一个带有 vim 的窗口（窗口管理器使用的窗口，而不是 vim 窗口），然后执行 :vsp 或 :sp，然后调整我的窗口大小，拆分不会调整大小。我想，当窗口 vim 处于调整大小时，拆分相应地调整大小（即 =）。

我正在使用 gvim，但这可能适用于 vim 和 gvim。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T21:24:14.347

有一个`VimResized`可用于自动命令的事件，因此您可以使用：

```
autocmd VimResized * exe "normal \<c-w>=" 
```

这似乎适用于 gvim，并用于缩小基于终端的 vim。但是在终端中扩大 vim 有一点问题，在采取其他行动之前它不会正确重绘。

# c# - TextBoxFor 设置属性名称不正确，进而不绑定模型

> ID：13828487
> 
> 赞同：1
> 
> 时间：2012-12-11T21:05:02.367
> 
> 标签：c#, html, asp.net-mvc-3, post, model-binding

在我的一个类型为 的强类型视图中`ProfileModel`，我为另一种类型调用了一个编辑器：

```
@model MVC3App.WebUI.Models.ProfileModel

<div class="contact-form">
    @Html.EditorFor(x => x.ContactModel)
</div> 
```

我有这个简单的模型：

```
public class ContactModel
{
    [Required]
    [Display(Name = "Name:")]
    public string Name { get; set; }

    [Required]
    [Display(Name = "Email:")]
    public string Email { get; set; }

    [Required]
    [Display(Name = "Message:")]
    public string Message { get; set; }
} 
```

这就是我在 EditorTemplate 视图中`ContactModel`用来显示文本框的内容：

```
@model MVC3App.WebUI.Models.ContactModel

@Html.TextBoxFor(model => model.Name, new { placeholder = "* Name" }) 
```

生成的 HTML：

```
<input data-val="true" 
       data-val-required="The field Name: is required." 
       id="ContactModel_Name" 
       name="ContactModel.Name" 
       placeholder="* Name" type="text" value=""> 
```

当 POST 回服务器时，该值未绑定到模型属性。

```
[HttpPost]
public ActionResult SendPatientContact(ContactModel model)
{
    if (ModelState.IsValid)
    {
        // model.Name is null. :S

        return RedirectToAction("ThankYou");
    }

    return RedirectToAction("ThankYou");
} 
```

如果我手动将`name`文本框的 设置为`name="Name"`，则该值将正确绑定到模型属性。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T22:10:03.690

在您的情况下，您不应使用`@Html.EditorFor`方法，而应使用`@{Html.RenderPartial("_ContactPartialView", Model.ContactModel);}`

# c# - 具有速度执行控制的线程池

> ID：13828489
> 
> 赞同：0
> 
> 时间：2012-12-11T21:05:08.953
> 
> 标签：c#, task-parallel-library, threadpool

我需要在 c# 中并行处理数据库中的几行（可能是数百万行）。处理速度非常快（50 或 150 毫秒/行），但我无法在运行前知道这个速度，因为它取决于硬件/网络。

ThreadPool 或更新的 TaskParallelLibrary 似乎满足了我的需求，因为我是线程新手，并且希望获得最有效的数据处理方式。

然而，这些方法并没有提供一种方法来控制我的任务的执行速度（行/分钟）：我希望能够为处理设置最大速度限制或全速运行。

请注意，设置 ThreadPool/TaskFactory 的线程数并不能满足我的需要，因为我希望能够将速度限制设置为低于“单线程速度”。

为 TPL 使用自定义调度程序似乎是一种方法，但我没有找到实现它的方法。

此外，我担心采用这种设置的效率成本。

您能否为我提供如何完成这项工作的方法或建议？

提前感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T21:10:25.173

TPL 在线程池之上提供了一个方便的编程抽象。如果可以的话，我总是会选择 TPL。

如果您希望限制总处理速度，则没有任何内置支持。

您可以在处理文件时测量总处理速度，并通过在每个线程中引入（非旋转）延迟来调节速度。延迟的大小可以根据观察到的处理速度在您的代码中动态调整。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T21:42:21.303

我没有看到限制速度的优势，但我建议您考虑限制操作的最大并行度。这可以通过[ParalleForEach](http://msdn.microsoft.com/en-us/library/vstudio/system.threading.tasks.paralleloptions.maxdegreeofparallelism%28v=vs.100%29.aspx)选项属性中的 MaxDegreeOfParallelism 来完成，因为代码在*不同*的数据行上工作。这样您就可以控制插槽，因为没有更好的术语，可以根据您正在工作的标准来扩展或减少。

这是一个使用[ConcurrentBag](http://msdn.microsoft.com/en-us/library/vstudio/dd381779%28v=vs.100%29.aspx)处理分散数据行并使用 2 个并行任务的示例。

```
 var myLines = new List<string> { "Alpha", "Beta", "Gamma", "Omega" };

   var stringResult = new ConcurrentBag<string>();

   ParallelOptions parallelOptions = new ParallelOptions();

   parallelOptions.MaxDegreeOfParallelism = 2;

   Parallel.ForEach( myLines, parallelOptions, line =>
   {
      if (line.Contains( "e" ))
         stringResult.Add( line );

   } );

   Console.WriteLine( string.Join( " | ", stringResult ) );
   // Outputs Beta | Omega 
```

请注意，并行选项还具有[TaskScheduler](http://msdn.microsoft.com/en-us/library/vstudio/system.threading.tasks.paralleloptions.taskscheduler%28v=vs.100%29.aspx)属性，您可以优化更多处理。最后为了获得更多控制权，也许您想在达到特定阈值时取消处理？如果是这样，请查看[CancellationToken](http://msdn.microsoft.com/en-us/library/vstudio/system.threading.tasks.paralleloptions.cancellationtoken%28v=vs.100%29.aspx)属性以提前退出该过程。

# javascript - 查找输入元素

> ID：13828490
> 
> 赞同：0
> 
> 时间：2012-12-11T21:05:18.323
> 
> 标签：javascript, jquery

似乎 JQuery 在使用**.find**方法作为输入元素或一些复杂的后代（或者我是盲人）方面有一些魔力/细微差别。这是我的 JS 代码：

```
<div id="edit_lists_div">
  <div style="width: 100%; margin-bottom:5px">&nbsp;
  <button value="" style="display: none;" id="edit_lists_div_btn1">Btn1</button>
  <button value="" style="display: none;" id="edit_lists_div_btn2"
  disabled="disabled">Btn2</button>
  <button value="" style="display: none;" id="edit_lists_div_btn3"
  disabled="disabled">Btn3</button>
  </div>
  <div style="width: 100%; height: 210px; overflow: auto;">
  <table class="my_grid" id="edit_lists_div_table">
      <thead>
      <tr>
          <th width="30"></th>
          <th style="display: none;">id</th>
          <th width="100">Title</th>
          <th width="25">Some field 1</th>
          <th style="display: none;">some_property</th>
          <th>Some field 2</th>
      </tr>
      </thead>
      <caption>Lists</caption>
      <tbody>
      <tr>
          <td property_name="">
          <input row_selector="true" type="checkbox">
          </td>
          <td style="display: none;" property_value="157" property_name="id">157</td>
          <td property_value="List1" property_name="title">List1</td>
          <td property_value="4" property_name="subscribers_count">4</td>
          <td style="display: none;" property_value="9867,9869,9871,9868"
          property_name="subscribers">9867,9869,9871,9868</td>
          <td property_value="New" property_name="status">New</td>
      </tr>
      </tbody>
  </table>
  </div> 
```

我只想得到*输入*字段

```
<input row_selector="true" type="checkbox"> 
```

并以某种方式管理它。但是**.find**找不到！这是我所做的：

```
var tmp = $("#edit_lists_div").find("tbody");
var div_inputs = tmp.find("input"); // it is empty! 
```

这里有什么问题？

**更新 1：**请注意，此处仍未找到解决方案。我已经选择了正确的答案但未选择它，因为它在我的应用程序上下文中变得不可用。我的意思是这个答案：

```
var tmp = $("#edit_lists_div").find("tbody");    
var div_inputs = $('input[type="checkbox"]', '#edit_lists_div'); 
```

仅适用于 FIRST Firebug 调试。比我有空/not_found JQuery 对象了。

这段代码也是如此：

```
var tmp = $("#edit_lists_div").find("tbody");    
var div_inputs = $('input', '#edit_lists_div'); 
```

这是它第一次起作用。但在第二次尝试后坏了。这里有什么玄学？！

**更新2：**至于我的处理程序可能出现的问题......不是！我已经为此案例检查了此代码：

```
$.ajax({
url : getUrl(),
dataType : "json",
success : function(data) {
   // my code goes here and still can't get input element!
  }
}); 
```

**更新3：**如果我需要这些输入有什么关系：

```
div_inputs.each(function() {
// some business logic with found inputs goes here
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T21:07:05.537

我会在表格中搜索一个复选框，因为表格有一个 ID，应该很容易找到，而且只有一个复选框：

```
$(function() {
    $('input[type="checkbox"]', '#edit_lists_div_table').prop('checked',true);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T21:12:42.603

我建议您取消`.find()`并链接您的选择器：

```
 var $checkbox = $('#edit_lists_div tbody input'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T21:17:32.943

我不确定你遇到了什么问题。您发布的代码在 jsfiddler.net 上运行良好：

[http://jsfiddle.net/BstRW/](http://jsfiddle.net/BstRW/)

// 包括格式化代码是 stackoverflow 对我的 jsfiddle 链接感到满意。

```
var tmp = $("#edit_lists_div").find("tbody");
var div_inputs = tmp.find("input"); // it is empty!
alert(div_inputs.attr("type")); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T11:32:52.187

好的，找到了解决方案。它不在 JQuery 中。它在我的应用架构中。我在我的 JS 代码之前有*异步* **$.ajax调用。**在*成功*函数上，它创建了我的表，但正如您所知，我曾尝试在成功方法处理之前访问此表元素，因此在创建它们之前！

希望它会帮助一些人。小心 AJAX！

# c# - 在 asp.net 中使用 sql db 创建向导的基本步骤是什么？

> ID：13828493
> 
> 赞同：0
> 
> 时间：2012-12-11T21:05:48.923
> 
> 标签：c#, asp.net, sql

我只是对asp.net 中的wizardstep 感到好奇。我正在尝试在 asp.net 中创建向导步骤以注册公司和他们公司的员工，我创建了向导步骤并尝试将所有数据输入放入 sql 服务器。

但是公司里有很多员工，所以我尝试创建一个数组列表并将信息放入数组中，当用户单击添加人员按钮并单击完成按钮时，使用 for 循环将包括公司信息在内的所有数据插入到 sql 中。

我搜索了一些文章，其中大多数都试图插入 aspx 页面，但我尝试的是从后面的代码中插入。

此外，我有与公司数据库相关的外键的 sql 数据，如果我想插入每个工人，则必须首先创建公司，所以我想我必须将所有数据放入 arraylist 以保存每个工人并将它们全部插入到一起完成点击。

如果某处有任何最好的例子，将不胜感激，但如果有任何简单的方法可以将它放入，请告诉我任何想法。

谢谢

# c# - 在 Windows 应用商店应用中使用 REST 服务的最佳方式是什么？

> ID：13828498
> 
> 赞同：1
> 
> 时间：2012-12-11T21:05:59.320
> 
> 标签：c#, rest, asynchronous, windows-store-apps, discogs-api

我对 Windows 应用商店应用程序开发非常陌生，我需要使用基于 REST 的 Web 服务。

我的问题是，在过去几年中，为消费现代 Web 服务而开发的技术发生了如此多的变化，最终很难找到最简单的技术，尤其是最新的技术。实现这一目标的解决方案。

我想在使用 C# 的 Windows 商店应用程序中使用[Discogs API](http://www.discogs.com/developers/)。我只需要使用 GET。

谢谢。

* * *

编辑：我问什么是在 Windows 应用商店应用程序中使用 REST 服务的最佳方式的主要原因是因为我需要一个兼容异步的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T22:40:39.243

当然`HttpWebRequest`，.NET 中的内容就足够了。如果您想要一些抽象，可以使用 RestSharp ( [http://restsharp.org/](http://restsharp.org/) ) 之类的选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T22:33:51.307

这是一篇[文章](https://stackoverflow.com/questions/8883656/how-to-consume-a-restful-service-in-net)，其中包含从 .NET 使用 REST 时的几个库建议

编辑：

但是，除非您需要[THIS](http://discogsnet.codeplex.com/)框架提供的东西……我只会使用已经为您构建的 API 接口！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T07:20:44.453

我也可以选择另一种选择：[HttpClient](http://msdn.microsoft.com/en-us/library/system.net.http.httpclient%28VS.110%29.aspx)类将是 .NET 4.5（包括 Windows 应用商店应用程序）中针对您的场景的“开箱即用”推荐。默认情况下，它利用[HttpWebRequest](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx)。

有一个[快速入门：使用开发中心上的 HttpClient 进行连接](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh781239.aspx)，它解决了 GET 场景，应该会让你走得很远。还有一个完整的[HttpClient](http://code.msdn.microsoft.com/windowsapps/HttpClient-sample-55700664)示例。

# c# - 如何将 TemplateBinding 应用于“自动”高度和宽度

> ID：13828500
> 
> 赞同：4
> 
> 时间：2012-12-11T21:06:03.040
> 
> 标签：c#, wpf, xaml, textbox, templatebinding

在资源字典中：

```
<Style x:Key="ControlFrame" TargetType="{x:Type TextBox}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type TextBox}">
                <Border Background="{TemplateBinding Background}" BorderThickness="2">
                    <ScrollViewer Margin="0" x:Name="PART_ContentHost" />
                    <Border.BorderBrush>
                        <VisualBrush>
                            <VisualBrush.Visual>
                                <Rectangle StrokeDashArray="8, 2" Stroke="{TemplateBinding BorderBrush}" 
                                           StrokeThickness="2"
                                           Width="{TemplateBinding Width}"
                                           Height="{TemplateBinding Height}"/>
                            </VisualBrush.Visual>
                        </VisualBrush>
                    </Border.BorderBrush>
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

在 C# 中：

```
TextBox textbox = new TextBox();
textbox.Width = 200;
textbox.Height = 200;
Style style = this.FindResource("ControlFrame") as Style;
textbox.Style = style;
canvas.Children.Insert(0, textbox); 
```

我可以正确获得虚线边框。

![在此处输入图像描述](../Images/ba84be8a629e4c255a83a50c1e3311ae.png)

如果我将**文本框**包装到**ContentControl中而不给出文本****框**的高度和宽度，如下所示：

```
TextBox textbox = new TextBox();
Style style = this.FindResource("ControlFrame") as Style;
textbox.Style = style;
ContentControl cc = new ContentControl();
cc.Content = textbox;
cc.Height = 200;
cc.Width = 200;
canvas.Children.Insert(0, cc); 
```

结果错过了：

![在此处输入图像描述](../Images/3d9b30262f63cc6c3cf9e51974c79459.png)

我猜原因是：

在样式中，我使用以下设置边框的宽度和高度。它们依赖于**TextBox**的宽度和高度。

```
Width="{TemplateBinding Width}"
Height="{TemplateBinding Height}" 
```

**如果我将TextBox**包装到**ContentControl**中，则**TextBox**的 Width 和 Height 设置为 Auto 并根据**ContentControl**进行更改。但是，**样式**无法再获得确切的高度和宽度。

我的问题是：

有什么方法可以让我的**Style**为包含在**ContentControl中的****TextBox**正确显示。由于**ContentControl**是可拖动的，因此我无法将确切的 Height 和 Width 设置为内部**TextBox**。

 ******* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T21:28:33.227

如果您没有明确设置`Width/Height`，则必须将模板绑定更改为`ActualWidth/ActualHeight`：

```
<VisualBrush.Visual>
   <Rectangle StrokeDashArray="8, 2" Stroke="{TemplateBinding BorderBrush}" 
              StrokeThickness="2"
              Width="{TemplateBinding ActualWidth}"
              Height="{TemplateBinding ActualHeight}"/>
</VisualBrush.Visual> 
```

布局：（如果我正确理解您的问题）

```
 <Grid>
     <ContentControl >
        <TextBox BorderBrush="Red" Background="Blue" Style="{StaticResource ControlFrame}" />
     </ContentControl>
 </Grid> 
```

`ActualWidth/ActualHeight`将返回控件的渲染大小，`Width/Height`如果未在其他地方明确设置，将返回 NaN。******

# c# - 跨整个访问者的 ASP.net 静态 DataView 使用 - 公共静态函数 - 这种方式线程安全吗？

> ID：13828502
> 
> 赞同：3
> 
> 时间：2012-12-11T21:06:28.890
> 
> 标签：c#, asp.net, function, static, thread-safety

好简单的问题。在下面的类中做 returnAttackDescription 函数线程安全。

我的意思是假设使用所有不同的参数同时对该函数进行 100 次不同的调用（因为它需要 3 个参数）

**这个工作线程安全吗？如果不是，我怎样才能使它线程安全？这个数据视图会在第一次函数调用时被初始化吗？还是什么时候？**

谢谢你

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Data;

public static class Descriptions
{
    private static DataView dvAttacks;

    static Descriptions()
    {
        try
        {
            DataSet dsTempEnemyAttack = DbConnection.db_Select_Query("select AttackType,AttackCategory,BasePower,Accuracy,MoreFacts_tr,MoreFacts_en,Priority from tblAttacks");
            dvAttacks = new DataView(dsTempEnemyAttack.Tables[0]);
        }
        catch
        {

        }
    }

    public static string returnAttackDescription(string srAttackName, string srLang, string srCssClassName)
    {
        dvAttacks.RowFilter = "AttackName='" + srAttackName + "'";

        string srReturn = string.Format("<div class=\"{0}\" title=\"" +
                "{0}<hr/>" +
                "Type: {1}<br/>" +
                "Category: {2}<br/>" +
                "Base Power: {3}<br/>" +
                "Accuracy: {4}<br/>" +
                "Priority: {5}<br/>" +
                "Effect: {6}\"></div>", srCssClassName, srAttackName,
                dvAttacks[0]["AttackType"].ToString(),
                dvAttacks[0]["AttackCategory"].ToString(),
                dvAttacks[0]["BasePower"].ToString(),
                dvAttacks[0]["Accuracy"].ToString(),
                dvAttacks[0]["Priority"].ToString(), 
                dvAttacks[0]["MoreFacts_" + srLang].ToString());

        return srReturn;
    }
} 
```

**第二种可能的解决方案是这个线程安全吗？**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Data;

public static class Descriptions
{
    private static DataView dvAttacks;

    static Descriptions()
    {
        try
        {
            dsAttacks = DbConnection.db_Select_Query("select AttackName,AttackType,AttackCategory,BasePower,Accuracy,MoreFacts_tr,MoreFacts_en,Priority from tblAttacks");
        }
        catch
        {

        }
    }

    public static string returnAttackDescription2(string srAttackName, string srLang, string srCssClassName)
    {
        var results = (from r in dsAttacks.Tables[0].AsEnumerable()
                       where r.Field<string>("AttackName") == srAttackName
                       select new
                           {

                               srAttackType = r.Field<string>("AttackType"),
                               srAttackCategory = r.Field<string>("AttackCategory"),
                               irBasePower = r.Field<Int16>("BasePower"),
                               irAccuracy = r.Field<Int16>("Accuracy"),
                               irPriority = r.Field<Int16>("Priority"),
                               srMoreFacts = r.Field<string>("MoreFacts_" + srLang)
                           }
                        ).FirstOrDefault();

        string srReturn = string.Format("<div class=\"{0}\" title=\"" +
        "{0}<hr/>" +
        "Type: {1}<br/>" +
        "Category: {2}<br/>" +
        "Base Power: {3}<br/>" +
        "Accuracy: {4}<br/>" +
        "Priority: {5}<br/>" +
        "Effect: {6}\"></div>", srCssClassName, srAttackName,
        results.srAttackType,
        results.srAttackCategory,
        results.irBasePower,
        results.irAccuracy,
        results.irPriority, results.srMoreFacts);

        return srReturn;
    }
} 
```

时间：2019-04-01 标签：c#asp.net 4.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T22:04:40.927

解决方案不是真正的线程安全的，我现在看到的问题`dvAttacks.RowFilter`是改变结果，所以你需要通过使用线程锁使其线程安全：

```
 private static readonly object _lock = new object();

   public static string returnAttackDescription(string srAttackName, string srLang, string srCssClassName)
    {
        lock (_lock)
        {
            dvAttacks.RowFilter = "AttackName='" + srAttackName + "'";

            string srReturn = string.Format("<div class=\"{0}\" title=\"" +
                    "{0}<hr/>" +
                    "Type: {1}<br/>" +
                    "Category: {2}<br/>" +
                    "Base Power: {3}<br/>" +
                    "Accuracy: {4}<br/>" +
                    "Priority: {5}<br/>" +
                    "Effect: {6}\"></div>", srCssClassName, srAttackName,
                    dvAttacks[0]["AttackType"].ToString(),
                    dvAttacks[0]["AttackCategory"].ToString(),
                    dvAttacks[0]["BasePower"].ToString(),
                    dvAttacks[0]["Accuracy"].ToString(),
                    dvAttacks[0]["Priority"].ToString(), 
                    dvAttacks[0]["MoreFacts_" + srLang].ToString());

            return srReturn;
        }
    } 
```

`Descriptions()`当您的应用程序启动时调用该函数，生成静态数据，`DataView dvAttacks`然后此数据将保留在内存中而不会更改，直到应用程序重新启动。应用程序的每个池都有一组不同的数据。

在第二种解决方案中，您只读取它们`DataView`而不影响它们，因此您不会将它们更改为有任何冲突。就这样，工作正常，所有新内存在线程上都没有冲突。

这是`private static DataView dvAttacks;`线程中常见的参数，并且仅在您的应用程序启动时创建 - 之后您只有读取......但您不能在没有锁定的情况下将其更改为ether inside。

一和二之间的不同之处在于，第一个数据在过滤器内部发生变化，第二个您只需读取它们并将您需要的数据复制到新内存中，因此您只读取它们。第二个按原样工作。

> 并且这个数据视图会在第一次函数调用时被初始化吗

它在应用程序启动的那一刻和任何页面调用之前初始化。您可以使用`Debug.Write`来检查这一点。

# list - Scheme将条目转换为列表

> ID：13828509
> 
> 赞同：4
> 
> 时间：2012-12-11T21:07:21.090
> 
> 标签：list, input, scheme, racket

如何将输入转换为列表？

```
(define (conjuger v t p)
    (cond ((equal? t '(present)) (present (radical v) p)) 
```

我想将 V 作为一个单词输入，但我不得不将它作为一个列表输入，以便程序运行。有没有办法让计划这样做：

```
'(m a n g e r) => '(manger)

'(manger) => '(m a n g e r) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T21:27:27.727

在第一部分试试这个：

```
(define (implode lst)
  (string->symbol
   (apply string-append
          (map symbol->string lst))))

(list (implode '(m a n g e r)))
; => '(manger) 
```

这是第二部分：

```
(define (explode itm)
  (map (lambda (c) (string->symbol (string c)))
       (string->list
        (symbol->string itm))))

(explode (car '(manger)))
; => '(m a n g e r) 
```

请注意，在您的代码中，您使用的是*符号*，而不是字符串。我相应地写了我的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T21:52:07.890

这是 Nils M. Holm，Sketchy Scheme 的版本。第 4.5 版 (Raleigh 2011) p. 72-74：

```
(define (compose f g)
  (lambda x
    (f (apply g x))))

(define symbol->list
  (compose string->list symbol->string))

(define (explode item)
  (map (lambda (item)
         (string->symbol
          (string item)))
       (symbol->list item)))

(define (implode item)
  (letrec
      ((sym->char
        (lambda (item)
          (let ((string (symbol->string item)))
            (if (not (= (string-length string) 1))
                (error "bad symbol -- IMPLODE")
                (string-ref string 0))))))
    (string->symbol
     (list->string
      (map sym->char item)))))

scheme@(guile-user)> (explode 'foo)
$1 = (f o o)
scheme@(guile-user)> (implode '(b a r))
$2 = bar 
```

这本书的旧版本可以[在线](http://www.bcl.hamilton.ie/~nmh/t3x.org/zzz/)免费获得 pdf 或 html 格式，标题为 »sketchy lisp«（但明确处理 Scheme）。第 2.5 章讨论了将符号拆分为列表的问题，反之亦然。

# r - 从R中的csv导入几行

> ID：13828512
> 
> 赞同：4
> 
> 时间：2012-12-11T21:07:34.283
> 
> 标签：r

我有 N 行的 csv 文件，其中每一行对应一个数据点。有没有办法从这个 csv 文件中读取一组预先指定的行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T22:55:28.417

It is faster to extract the rows you want with another tool like Python or the Unix shell, but if R is your best choice:

```
file.in <- file('yourfile.txt', 'rt')
##file.header <- readLines(file.in,n=1) #do this if you are skipping a header
##change this to the lines that you want - line numbers must not decrease
ind.to.read <- c(10,15,20) 
##this is how many lines you want to skip in between lines you want
ind.to.skip <- c(ind.to.read[1],diff(ind.to.read)) - 1
# [1] 9 4 4 
##returns a list of data frames corresponding to rows
lines.to.keep <- lapply(ind.to.skip, function(x) { 
  readLines(file.in,n=x)
  read.table(file.in,nrow=1) 
}) 
small.df <- do.call(rbind,lines.to.keep) #put the data frames together 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-11T21:09:25.943

您可以将`skip`and`nrows`参数指定为`read.csv`：

> `skip`整数：开始读取数据之前要跳过的数据文件的行数。
> 
> `nrows`integer：要读入的最大行数。忽略负数和其他无效值。

# c - 使用 forks=0 和 forks==0 有什么区别？

> ID：13828513
> 
> 赞同：-4
> 
> 时间：2012-12-11T21:07:35.530
> 
> 标签：c, fork

`if(fork()=0)`和 和有什么不一样`if(fork()==0)`？
当它返回 0 时，它是孩子，但如果它 ==0 怎么办？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T21:09:37.540

`=`是赋值运算符，`==`是相等比较运算符。使用时应该会收到编译警告或错误`fork() = 0`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T21:08:42.717

在第一种情况下，`if`永远不会输入。第二种，如果当前执行代码`if`的结果在“子”进程之后，则进入。`fork`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T21:09:20.753

```
fork() = 0 
```

是赋值

```
fork() == 0 
```

相等性检验

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T21:09:05.590

`=`给变量赋值，`==`检查是否相等。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T08:21:55.217

在第一种情况下 if(fork()=0) 是一个赋值，它总是正确的。这个条件永远不会错误。
而 if(fork()==0) 检查条件 fork() 是否具有等于 0 的值。

# mysql - MySQL-在查询中截断日期时间

> ID：13828514
> 
> 赞同：1
> 
> 时间：2012-12-11T21:07:37.523
> 
> 标签：mysql, sql

我有以下查询：

```
select * from player_source 
where source is not null 
```

这导致

```
ID      create_dtime
001     2012-10-16 16:13:27
002     2012-12-10 16:13:27 
```

等等...

我想过滤查询，使其仅返回 create_dtime 大于或等于 2012 年 12 月 3 日且小于或等于 2012 年 12 月 9 日的结果。

我尝试使用

```
select * from player_source 
where source is not null
and Create_Dtime >= To_Date('2012-Dec-03','yyyy-mon-dd')
and Create_Dtime <= To_Date('2012-Dec-09','yyyy-mon-dd') 
```

使用我的 Oracle 根，但它似乎没有用。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T21:09:50.557

询问：

```
select * 
from player_source 
where source is not null
and Create_Dtime >= '2012-10-03'
and Create_Dtime <= '2012-10-09' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T21:10:29.203

尝试这个

```
 select * 
 from player_source 
 where source is not null
 and Create_Dtime >= '2012-Dec-03'
 and Create_Dtime <= '2012-Dec-09' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T21:10:38.940

语法是：

```
select * from player_source 
where source is not null
and Create_Dtime > '2012-12-03'
and Create_Dtime <= '2012-12-09' 
```

或者，更简洁地说：

```
select * from player_source 
where source is not null
and Create_Dtime > '2012-12-03' BETWEEN
and '2012-12-09' 
```

# c# - 如何获取表格行中的所有 HtmlInputText 控件？

> ID：13828516
> 
> 赞同：2
> 
> 时间：2012-12-11T21:07:41.330
> 
> 标签：c#, html, .net, xml, html-table

我正在尝试创建一个网页来创建小型播放列表。将数据输入字段后，需要将其保存到 XML 文件中。目前该表如下所示：

```
<%-- song list table --%>
<table runat="server" id="table" class="table">

<%-- info row --%>
<thead>
 <tr>    
  <td>Song Title</td>
  <td>Song Artist</td>
  <td>Song Album</td>
  <td><%-- column for delete button --%></td>
 </tr>
</thead>

<%-- input rows --%>
<tbody>
 <tr>
  <td><input runat="server" placeholder="Title" type="text" /></td>
  <td><input runat="server" placeholder="Artist" type="text" /></td>
  <td><input runat="server" placeholder="Album" type="text" /></td>

  <td>
   <a href="#">
    <img src="Images/Delete.png" onmouseover="this.src='Images/Delete-Hover.png'" onmouseout="this.src='Images/Delete.png'" alt="Delete" />
   </a>
  </td>
 </tr>
</tbody>

</table> 
```

新行将使用 jQuery 动态添加。当用户单击保存时，我需要将表数据写入他们特定的 XML 文件。目前我的后端代码如下所示：

```
//for each row
foreach (HtmlTableRow row in table.Rows)
{
 //create row info
 textWriter.WriteStartElement("Row");

 //for each cell
 foreach (HtmlTableCell element in row.Cells)
 {
  //get inputs

  //write current input to xml
 }

 //close row
 textWriter.WriteEndElement();
} 
```

我的问题是我的代码从那里去哪里，以便能够获取每个输入的值并将它们写入 XML。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T21:14:38.233

您需要为元素提供一个 ID，以便您可以参考它们。此外，任何动态添加的行都无法以这种方式访问​​；那是因为它们并不作为服务器控件存在于控件树中，而是纯粹的客户端控件。您必须使用`Request.Form`集合访问这些。如果您希望它们也能在回发中持续存在，则必须将它们动态添加到控制树中。

如果您使用的是 JQuery，那么获取客户端上的所有值并将值发送到 Web 服务或类似的东西会更高效、更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T21:27:15.337

我的建议是重新考虑如何收集数据。我假设您将让这些信息`HTTP POST`使用`$.ajax()`或类似的东西对您的服务器执行 - 在服务器端，您希望获取按行分组的`Title`,`Artist`和`Album`字段的所有实例。

与其回发表格（一组显示数据但不代表数据的 UI 元素），不如考虑回发给服务器并让服务器期待一`IEnumerable`组`Song`对象，如下所示：

```
public class Song {
    public String Album { get; set; }
    public String Artist { get; set; }
    public String Title { get; set; }
} 
```

现在，当您绑定表单本身时，您可以绑定如下内容：

```
<table>
 <thead>
  <tr>    
   <td>Song Title</td>
   <td>Song Artist</td>
   <td>Song Album</td>
   <td><%-- column for delete button --%></td>
  </tr>
 </thead>
 <tbody>
  <tr>
   <td><input placeholder="Title" type="text" name="Songs[0].Title" /></td>
   <td><input placeholder="Title" type="text" name="Songs[0].Artist" /></td>
   <td><input placeholder="Title" type="text" name="Songs[0].Album" /></td>
  </tr>
 </tbody>
</table> 
```

该`[0]`符号表示该元素是被`IEnumerable`调用的一部分`Songs`，并且位于索引处`0`。当您的`jQuery`脚本然后添加新行时，您只需增加索引。所以 - 一个新的行会是这样的：

```
 <tr>
  <td><input placeholder="Title" type="text" name="Songs[1].Title" /></td>
  <td><input placeholder="Title" type="text" name="Songs[1].Artist" /></td>
  <td><input placeholder="Title" type="text" name="Songs[1].Album" /></td>
 </tr> 
```

唯一的诀窍是确保您的索引中永远不会出现空白。IE - 如果您有 5 行，并且删除了第三行，则需要*重新索引*第 4 行和第 5 行（通过递减`[#]`值）。

**注意：以上所有内容都假设您使用的是服务器端绑定。**

如果您已经在使用`jQuery`，您可能还会发现简单地解析您`table`的`input`元素`jQuery`并将其发布为您可以直接控制的对象会更简单。这使您根本不必进行任何索引。一个例子是这样的：

```
$('#submit-button').on('click', function (ev) {
    var songs = [];
    $('#table > tbody > tr').each(function (index, element) {
        var $tr = $(element);

        var album = $tr.find('input[placeholder=Album]').val();
        var artist = $tr.find('input[placeholder=Artist]').val();
        var title = $tr.find('input[placeholder=title]').val();

        songs.push({ Album: album, Artist: artist, Title: title });
    });

    $.ajax({
        url: '/my/post/url',
        type: 'POST',
        data: songs
    });
}); 
```

在服务器端，您现在将收到一个`HTTP POST`包含`/my/post/url`表中歌曲数据的有效负载 - 无需担心时髦的数据绑定语法或索引。

希望这可以帮助。

# ruby-on-rails - 从 2 个表中获取记录并按日期合并它们

> ID：13828518
> 
> 赞同：0
> 
> 时间：2012-12-11T21:07:47.863
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

假设我的数据库中有 2 个表，都有 'updated_at' 字段。我想在一个活动记录查询中检索两个表中的所有记录。我应该返回一个由 updated_at 字段排序的大型活动记录关系。假设这两个表非常相似。

如果可能的话，最好有能力只返回前 50，或第二个 50，等等。

这是一个例子

```
cats = Cat.all
dog = Dog.all

animals = (cats | dogs).sort!{|a,b| a.updated_at <=> b.updated_at}.limit(50) 
```

将所有的狗和猫合并为一个，然后再获得前 50 只动物，这是相当昂贵的。

我需要一种对 db 进行查询的方法，并且 db 返回前 50 只动物。或第二个 50 只动物。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T21:29:15.090

鉴于这些模型非常相似，使用 ActiveRecord 的[单表继承](http://api.rubyonrails.org/classes/ActiveRecord/Base.html)不是更好吗？对于您提供的示例，您将拥有基类 Animal，并且您只需使用 Animal.order("updated_at").limit(50) 即可获得所需的结果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T00:47:06.090

这不是一个单一的查询，但一个明显的优化是只抓取每个查询的前 50 个而不是整个表：

```
cats = Cat.order_by(:updated_at).limit(50)
dogs = Dog.order_by(:updated_at).limit(50)

animals = (cats + dogs).sort_by(&:updated_at).first(50) 
```

然后，您可以通过查询最后一个来获得下一个 50`updated_at`

```
last_animal_date = animals.last.updated_a
next_cats = Cat.where("updated_at > ?", last_date).order_by(:updated_at).limit(50)
next_dogs = Dog.where("updated_at > ?", last_date).order_by(:updated_at).limit(50)
# etc ... 
```

显然，对于重复的数量，这需要考虑到一种方法中，但我将其作为练习留给读者:)

# matlab - 使用验证字符串的正确方法？

> ID：13828520
> 
> 赞同：1
> 
> 时间：2012-12-11T21:07:55.977
> 
> 标签：matlab

我正在尝试使用以下代码在 matlab 的文本文件中搜索 hello：

```
 fid = fopen(filename, 'r');
 if (fid == -1) 
    error('cnt open');
 end

 i = 0;
 while (i == 0)

    str = 'hello';
    validStrings = fgets(fid);
     validStr = validatestring(str,validStrings);
    disp(validStr)
    if (line == -1) 
      i = 1;
    else
    fprintf(1, '%s', line);
    end

 end

 fclose(fid); 
```

在这种情况下我可以不使用 validStrings 吗？我收到错误

```
??? Error using ==> validatestring
Valid strings must be a cell array of strings. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T21:40:36.353

该函数需要一个字符串单元：

```
A = cell(100,1); // use a bigger number if you have a large file
while (i == 0)
    str = 'hello';
    validStrings = fgets(fid);
    j = 1;
    [A{j} remain] = strtok(validStrings, ' '); //or other delimiter than spaces
    while(size(remain,2) ~= 0)
        [A{j} remain] = strtok(str, ' ');
        j = j+1;
    end
    validStr = validatestring(str,A);
    disp(validStr)
    if (line == -1) 
        i = 1;
    else
        fprintf(1, '%s', line);
    end
end 
```

# java - 如何查看数组列表是否已填充

> ID：13828521
> 
> 赞同：4
> 
> 时间：2012-12-11T21:07:55.873
> 
> 标签：java

您好，我正在创建一个使用数组列表的应用程序（练习目的不是真正的应用程序）我创建了一个方法，它可以给我数学答案，但前提是数组列表不包含任何对象。出于某种原因，我总是在 if/else 构造中看到 else 。

这是我检查数组列表是否包含对象的方法

```
public void sluitRegistratie() {

    aantalBezoekers = bezoeker.size();

    if(!(aantalBezoekers >= 0)) {

        String str = "Gemiddelde tijd bezoekers: " + (gesommeerdeTijd / aantalBezoekers);

        JOptionPane.showMessageDialog(null, str);
    }
    else {
        JOptionPane.showMessageDialog(null, "Bezoekers zijn nog niet weg");
    }

} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-11T21:10:14.460

ArrayList 有一个`isEmpty()`方法，`true`如果 arraylist 为空则返回，`false`否则返回。所以看起来你想要`if(bezoeker.isEmpty())...`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T21:09:40.870

```
if(!(aantalBezoekers >= 0)) 
```

是相同的：

```
if(aantalBezoekers < 0) 
```

换句话说，当长度小于零时，这是不可能发生的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-11T21:09:26.113

ArrayList 的大小永远不会是负数，因此您对 !size()>=0 的检查永远不会是真的。只需检查 size()==0。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T21:10:04.820

An`ArrayList`至少可以容纳 0 个元素，因此`!(aantalBezoekers >= 0)`永远是`false`，并且您将永远在`else`其中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-11T21:12:11.920

```
if(!(aantalBezoekers >= 0)) { 
```

基本上意味着仅当**aantalBezoekers**不**大于零时**才执行。

如果您想检查您的列表大小是否为零，请使用以下内容：

```
if(bezoeker.size()>0){
  System.out.pritnln("bezoeker is greater than zero " + bezoeker..size());
 } 
 else {
  System.out.pritnln("Mahn, my bezoeker is Empty " + bezoeker..size());
  } 
```

您也可以简单地使用[**ArrayList.isEmpty()**](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#isEmpty%28%29)方法来检查 arraylist 是否为空。

```
if(bezoeker.isEmpty()) { 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-11T21:09:34.583

那是因为

`!(aantalBezoekers >= 0)`

方法

`not greater than or equal to zero`

这相当于

`less than zero`

这永远不会发生。

# c++ - WlanHostedNetworkSetProperty 不改变最大对等点

> ID：13828526
> 
> 赞同：1
> 
> 时间：2012-12-11T21:08:18.103
> 
> 标签：c++, wlanapi

所以我在从 WLanapi.dll 调用 WlanHostedNetworkSetProperty 时遇到了一个问题。这是从 WLAN_HOSTED_NETWORK_CONNECTION_SETTINGS 传递到该函数的 dwMaxNumberOfPeers 不会被持久化，除非 SSID 与之前的调用不同。

场景1（问题）：

1.  我调用**WlanHostedNetworkSetProperty**并使用**dwMaxNumberOfPeers** 5 和**SSID** “MyNetwork”传递**WLAN_HOSTED_NETWORK_CONNECTION_SETTINGS**
*****   当我调用**WlanHostedNetworkQueryProperty**时，我得到了我刚刚设置的详细信息*   现在我再次调用**WlanHostedNetworkSetProperty**，这次**dwMaxNumberOfPeers**为 10，**SSID**保持“MyNetwork”*   当我调用**WlanHostedNetworkQueryProperty**时，我会得到**dwMaxNumberOfPeers** 5，而不是 10...****

 ****场景2（没问题）：

1.  我调用**WlanHostedNetworkSetProperty**并使用**dwMaxNumberOfPeers** 5 和**SSID** “MyNetwork”传递**WLAN_HOSTED_NETWORK_CONNECTION_SETTINGS**
*****   当我调用**WlanHostedNetworkQueryProperty**时，我得到了我刚刚设置的详细信息*   现在我再次调用**WlanHostedNetworkSetProperty**，这次**dwMaxNumberOfPeers**为 10，**SSID**更改为“MyOtherNetwork”*   当我调用**WlanHostedNetworkQueryProperty**时，我会将**dwMaxNumberOfPeers**正确设置为 10 ...****

 ****你们有人遇到过吗？每次我想更改托管网络的最大对等点时，您如何在不设置一些虚假随机 SSID 的情况下解决它？********

# c# - 如何在 C# winforms 中使用 keybd_event 模拟 Ctrl+Alt+H

> ID：13828527
> 
> 赞同：-1
> 
> 时间：2012-12-11T21:08:23.570
> 
> 标签：c#, winforms, keyboard, keypress

如何使用 keybd_event() 模拟 Ctrl+Alt+H ？以下代码不起作用：

```
 keybd_event((byte)Convert.ToInt32(Keys.Control), (byte)MapVirtualKey(Convert.ToInt32(Keys.Control), 0), 0, 0);
        keybd_event((byte)Convert.ToInt32(Keys.Alt), (byte)MapVirtualKey(Convert.ToInt32(Keys.Alt), 0), 0, 0);
        keybd_event((byte)Keys.H, (byte)MapVirtualKey(Convert.ToInt32(Keys.H), 0), 0, 0);
        keybd_event((byte)Keys.H, (byte)MapVirtualKey(Convert.ToInt32(Keys.H), 0), KEYEVENTF_KEYUP, 0);
        keybd_event((byte)Convert.ToInt32(Keys.Alt), (byte)MapVirtualKey(Convert.ToInt32(Keys.Alt), 0), KEYEVENTF_KEYUP, 0);
        keybd_event((byte)Convert.ToInt32(Keys.Control), (byte)MapVirtualKey(Convert.ToInt32(Keys.Control), 0), KEYEVENTF_KEYUP, 0); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T21:13:50.210

您应该覆盖`ProcessCmdKey`方法。

请参阅此链接：

[拾取击键 Ctrl-Alt-Q](https://stackoverflow.com/questions/8029548/picking-up-keystrokes-ctrl-alt-q)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T21:14:37.827

您可以使用 SendKeys 来执行此操作：

```
SendKeys.Send("^%H"); 
```

[http://msdn.microsoft.com/en-us/library/system.windows.forms.sendkeys.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.sendkeys.aspx)

**编辑** （见下面的评论......）

您想在桌面上启动一个使用一组特定热键设置的 Windows 快捷方式。在这种情况下 CTRL+ALT+H。您想编写一个应用程序来执行该快捷键组合。

为了让这个工作你的桌面必须有“焦点”。这意味着不应启动其他窗口。因此，启动您的应用程序，最小化所有其他窗口，然后按下应用程序上的按钮。这是您的按钮后面应该有的代码：

```
 private void button1_Click(object sender, EventArgs e)
    {
        this.WindowState = FormWindowState.Minimized;
        SendKeys.SendWait("^%h");
    } 
```

这将最小化当前窗口，从而将焦点放在您的桌面上。然后它将 CTRL 和 ALT 以及 H 键发送到桌面，这将启动您的快捷方式。

# php - tf-idf 出错

> ID：13828530
> 
> 赞同：1
> 
> 时间：2012-12-11T21:08:35.937
> 
> 标签：php, mysql, algorithm, tf-idf

嗨，我对 tf-idf 有疑问。代码显示：“0”

这是代码：

```
$terms = array_count_values( explode( ' ', $frase ) );
$total_term = asort( $terms );
$total_array = count($total_term);

for ($i=1; $i<=$total_array; $i++){
$SQL = mysql_query("SELECT webTitulo, webDescripcion, webkeywords, weburl FROM webs WHERE MATCH (webTitulo, webDescripcion, webkeywords, weburl) AGAINST ('$total_term[$i]')", $server_link) or die(mysql_error());
$frec_term = mysql_num_rows($SQL);
}
$sssql = mysql_query("SELECT uDR.webTitulo, uDR.webDescripcion, uDR.webkeywords, uDR.weburl, SUM(uDR.priority) as SPriority
FROM (

(SELECT s1.webTitulo, s1.webDescripcion, s1.weburl, s1.webkeywords, 3 as priority FROM webs s1 WHERE MATCH (webTitulo) AGAINST ('$frase'))

UNION

(SELECT s2.webTitulo, s2.webDescripcion, s2.weburl, s2.webkeywords, 1 as priority FROM webs s2 WHERE MATCH (webkeywords) AGAINST ('$frase'))

UNION

(SELECT s3.webTitulo, s3.webDescripcion, s3.weburl, s3.webkeywords, 2 as priority FROM webs s3 WHERE MATCH (webDescripcion) AGAINST ('$frase'))) uDR

GROUP BY uDR.webTitulo, uDR.weburl, uDR.webDescripcion, uDR.webkeywords

ORDER BY SPriority DESC ", $server_link) 
                         or die(mysql_error()); 
$totalRows = mysql_num_rows($sssql);
$tf_idf = $frec_term * log10($totalRows/70);
echo $tf_idf; 
```

70 是一个数字，用于替换不存在的变量。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T21:22:41.077

你的逻辑是错误的：如果你`$frase`用一个句子替换，你最终会得到`$total_term`as`true`而不是数组，见[这个例子](http://codepad.org/BgjK7WeI)。

即使`$total`是一个数组，键也是字符串而不是数字，因为`array_count_values`.

即使它们的键是数字的，它们也可能是从零开始的，这意味着你的最后一个`$frec_term = mysql_num_rows($SQL);`将评估为`0`.

所以会有很多原因`$tf_idf`，`0`它们都来自 $frec_term 是`NULL`/ undefined /的事实`0`。

# python - Python 从 Tkinter 列表框中获得多项选择的问题

> ID：13828531
> 
> 赞同：1
> 
> 时间：2012-12-11T21:08:39.503
> 
> 标签：python, listbox, get, ltk

这是我今天早些时候提出的同一个问题，你们中的一些人试图帮助我解决这个问题，但我无法让它发挥作用。我要做的就是在单击列表框时使用我所做的多项选择来填充“ichose”。

```
import Tkinter as tk
from Tkinter import *
global ichose

class App(tk.Frame):
    def __init__(self, master):
        tk.Frame.__init__(self,master)
        self.master=master
        self.grid()
        self.ichose = ()

        self.l = Listbox(self, height=10, selectmode=EXTENDED)
        # Selectmode can be SINGLE, BROWSE, MULTIPLE or EXTENDED. Default BROWSE
        self.l.grid(column=0, row=0, sticky=(N,W,E,S))
        self.l.bind("Double-Button-1", self.entered)

        s = Scrollbar(self, orient=VERTICAL, command=self.l.yview)
        s.grid(column=0, row=0, sticky=(N,S,E))
        self.l['yscrollcommand'] = s.set

        for i in range(1,101):
            self.l.insert('end', 'Line %d of 100' % i)

    def entered(self, event):
        self.ichose = self.selection_get()
        self.ichose = ('hello')

root=tk.Tk()
root.title('Listbox Problem')
root.geometry('200x200')
app=App(root)
root.mainloop()

print app.ichose 
```

无论我做什么，“ichose”都会作为一个空元组 () 出现。很明显，函数“entered”从未被调用，因为我从未看到测试字符串“hello”。

我也不知道“双按钮-”、“<>”等中的各种选项是什么。我在哪里可以找到每个选项的列表和解释？

如果有人可以请修改我的程序以便“打印 ichose”工作，我将非常感激。您可以从我的程序中看到，我并不真正知道自己在做什么，但很想学习。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T14:55:41.253

我终于找到了自己问题的答案。如果您想从列表框中捕获多个响应，这非常有用。我评论了很多。希望能帮助到你！

```
import Tkinter as tk
from Tkinter import *

class App(tk.Frame):
    def __init__(self, master):
        tk.Frame.__init__(self,master)
        self.master=master
        self.grid()
        self.ichose = []

        self.l = Listbox(self, height=10, selectmode=MULTIPLE)
        # Selectmode can be SINGLE, BROWSE, MULTIPLE or EXTENDED. Default BROWSE
        self.l.grid(column=0, row=0, sticky=(N,W,E,S))

        s = Scrollbar(self, orient=VERTICAL, command=self.l.yview)
        s.grid(column=0, row=0, sticky=(N,S,E))
        self.l['yscrollcommand'] = s.set

        for i in range(1,101):
            self.l.insert('end', 'Line %d of 100' % i)

        # Create Textbox that will display selected items from list
        self.selected_list = Text(self,width=20,height=10,wrap=WORD)
        self.selected_list.grid(row=12, column=0, sticky=W)        

        # Now execute the poll() function to capture selected list items
        self.ichose = self.poll()

    def poll(self):
        items =[]
        self.ichose = []
        # Set up an automatically recurring event that repeats after 200 millisecs
        self.selected_list.after(200, self.poll)
        # curselection retrieves the selected items as a tuple of strings. These
        # strings are the list indexes ('0' to whatever) of the items selected.
        # map applies the function specified in the 1st parameter to every item
        # from the 2nd parameter and returns a list of the results. So "items"
        # is now a list of integers
        items = map(int,self.l.curselection())

        # For however many values there are in "items":
        for i in range(len(items)):
            # Use each number as an index and get from the listbox the actual
            # text strings corresponding to each index, and append each to
            # the list "ichose".
            self.ichose.append(self.l.get(items[i]))
        # Write ichose to the textbox to display it.
        self.update_list()
        return self.ichose

    def update_list(self):
        self.selected_list.delete(0.0, END)
        self.selected_list.insert(0.0, self.ichose)

root=tk.Tk()
root.title('Listbox Multi-Capture')
root.geometry('200x340')
app=App(root)
root.mainloop()

print app.ichose 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T15:18:09.227

```
# ----------------[ Listbox EXAMPLE ]----------------

    self.sarcCountries = (
        "Bangladesh",
        "India",
        "Pakistan",
        "Nepal",
        "Bhutan",
        "Sri Lanka",
        "Afghanistan"
    )

    self.listData = StringVar(value = self.sarcCountries)

    self.listbox = Listbox(
        master           = self,
        height           = 10,
        listvariable     = self.listData,
        selectmode       = MULTIPLE,
        selectbackground = "#BC80CC"
    )

    self.listbox.bind("<<ListboxSelect>>", self.OnListboxSelectionChanged)

    self.listbox.pack(fill = BOTH, expand = 0, padx = 10, pady = 10)
# ----------------[ Listbox EXAMPLE ]----------------

def OnListboxSelectionChanged(self, val):
    # NOTE: If your listbox's select mode is MULTIPLE, then you may use this portion of code
    selections = val.widget.curselection()

    print("---------------------------")

    if (selections != ()):
        for index in selections:
            print(self.sarcCountries[int(index)])

    print("---------------------------") 
```

# .net - 异常导致 Windows 服务在使用 NHibernate 结束分布式事务时崩溃

> ID：13828532
> 
> 赞同：0
> 
> 时间：2012-12-11T21:08:41.570
> 
> 标签：.net, nhibernate, windows-services, distributed-transactions

我有一个用 .NET 4.0 框架编写的 Windows 服务，它使用 NHibernate 在与 Oracle 数据库对话的分布式事务中登记。在我们的测试环境中，服务遇到数据库错误，这似乎导致 NHibernate 关闭 ADO.NET 连接出现问题。

对 NHibernate 的整个调用，从打开会话到处理它，都包装在一个捕获 System.Exception 的 try/catch 块中，但该块中没有捕获到错误。

我在下面的 Windows 事件日志中包含了堆栈跟踪以供参考。

我相信异常是在另一个线程中引发的（堆栈跟踪似乎引用了该线程），然后传播并导致 Windows 服务崩溃。

我的问题是：
1\. 如果它是另一个线程，它来自哪里（从什么开始）？
2\. 有什么我可以添加到我的代码中以确保此异常不会逃逸并关闭 Windows 服务吗？

* * *

应用程序：X
框架版本：v4.0.30319
描述：进程因未处理的异常而终止。
异常信息：NHibernate.ADOException
堆栈：
在 NHibernate.Connection.DriverConnectionProvider.CloseConnection(System.Data.IDbConnection)在 NHibernate.AdoNet.ConnectionManager.CloseConnection( ) 在 NHibernate 的
NHibernate.Connection.ConnectionProvider.CloseConnection(System.Data.IDbConnection) .AdoNet.ConnectionManager.AfterTransaction() 在 NHibernate.Impl.SessionImpl.AfterTransactionCompletion(Boolean, NHibernate.ITransaction) 在 NHibernate.Transaction.AdoNetWithDistributedTransactionFactory+<> *c_DisplayClass1.b*

*_0(System.Object, System.Transactions.TransactionEventArgs)
在 System.Transactions.TransactionCompletedEventHandler.Invoke(System.Object, System.Transactions.TransactionEventArgs)
在 System.Transactions.TransactionStatePromotedAborted.EnterState(System.Transactions.InternalTransaction)
在 System.Transactions .InternalTransaction.DistributedTransactionOutcome(System.Transactions.InternalTransaction, System.Transactions.TransactionStatus)
在 System.Transactions.Oletx.RealOletxTransaction.FireOutcome(System.Transactions.TransactionStatus)
在 System.Transactions.Oletx.OutcomeEnlistment.InvokeOutcomeFunction(System.Transactions.TransactionStatus ) )
在 System.Transactions.Oletx.OletxTransactionManager.ShimNotificationCallback(System.Object, Boolean)
在 System.Threading._ThreadPoolWaitOrTimerCallback.PerformWaitOrTimerCallback(System.Object, Boolean)*

 ** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T05:08:56.040

> > 如果它是另一个线程，它来自哪里（什么开始它）？

在内部`NHibernate.Transaction.AdoNetWithDistributedTransactionFactory`，存在一个事件处理程序`System.Transactions.Transaction.TransactionCompleted`。此事件在完成后由 .NET 框架在线程池线程上触发，如堆栈跟踪底部所示。

> > 有什么我可以添加到我的代码中以确保此异常不会逃脱并关闭 Windows 服务吗？

正确的做法是找出异常发生的确切原因。我没有使用过 Oracle，但在处理 DTC 和 SQL Server 时并没有真正遇到这个特殊问题（尽管还有很多其他问题）。问题的根源可能是 DTC 或 NHibernate 中的错误。*

# jsp - 调用托管在 CDN 中的 CSS 文件的 JSP 代码或 Web 服务器配置？

> ID：13828534
> 
> 赞同：2
> 
> 时间：2012-12-11T21:08:48.207
> 
> 标签：jsp, dns, cdn

我有 JSP 文件，它们调用托管在 CDN 中的 css 和图像文件，如下所示。

```
link rel="stylesheet" type="text/css" href="http://cdnname/test.css"
img src="http://cdnname/modal-lineSeparatorDown.png" alt="" 
```

cdnname（cdndev.abc.com、cdntest.abc.com 等）随层（开发、测试、阶段和生产）而变化。我想向网络服务器（.htaccess 或 httpd.conf）添加一个配置以匹配 css 和图像并重定向或编写代码（JSTL）以获取主机名并决定将 css 和/或图像定向到何处。

哪个是更好的选择？

第二个选项似乎使 JSP 页面看起来很丑，重复代码太多，因为我有很多图像和每页合理数量的 CSS。

第一个选项似乎有一些性能问题。

有人可以建议吗？雅虎、谷歌等如何处理这个问题？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T14:24:42.623

为什么不在环境中设置目标 CDN 并使用 ${env.resourceurl}/ 之类的东西为所有资源添加前缀？

这样，您可以拥有尽可能多的环境（dev1、dev2、ci、test 等），并且您不需要在代码中了解它们的任何信息，您只希望环境与代码运行的世界相匹配在。

# javascript - 在应用计费模块中发生 java 异常

> ID：13828536
> 
> 赞同：-2
> 
> 时间：2012-12-11T21:09:06.063
> 
> 标签：javascript, android, module, titanium, in-app-billing

> **可能重复：**
> [在应用程序计费 java 未捕获的异常发生](https://stackoverflow.com/questions/13694109/in-app-billing-java-uncaught-exception-occured)

嗨，我正在使用钛中的应用内计费模块，但它说发生了未捕获的 java 异常。你能帮我解决这方面的问题吗？这是我的代码

```
 var InAppBilling = require('ti.inappbilling');
 InAppBilling.startBillingService();
 InAppBilling.requestPurchase({
productId : 'jesse',
productType : InAppBilling.ITEM_TYPE_INAPP,
//developerPayload : devPayload
}); 
```

提前致谢

```
 [WARN][ActivityManager(   76)] Unable to start service Intent { act=com.android.vending.billing.MarketBillingService.BIND }: not found
  [ERROR][BillingService( 1276)] Market Billing Service could not be bound.
 [WARN][System.err( 1276)] java.lang.NullPointerException
 [WARN][System.err( 1276)]  at ti.inappbilling.BillingService.requestPurchase(BillingService.java:214)
[WARN][System.err( 1276)]   at ti.inappbilling.InappbillingModule.requestPurchase(InappbillingModule.java:198)
[WARN][System.err( 1276)]   at org.appcelerator.kroll.runtime.v8.V8Object.nativeFireEvent(Native Method)
[WARN][System.err( 1276)]   at org.appcelerator.kroll.runtime.v8.V8Object.fireEvent(V8Object.java:60)
[WARN][System.err( 1276)]   at org.appcelerator.kroll.KrollProxy.doFireEvent(KrollProxy.java:636)
[WARN][System.err( 1276)]   at org.appcelerator.kroll.KrollProxy.handleMessage(KrollProxy.java:829)
[WARN][System.err( 1276)]   at org.appcelerator.titanium.proxy.TiViewProxy.handleMessage(TiViewProxy.java:307)
[WARN][System.err( 1276)]   at android.os.Handler.dispatchMessage(Handler.java:95)
 [WARN][System.err( 1276)]  at android.os.Looper.loop(Looper.java:137)
[WARN][System.err( 1276)]   at org.appcelerator.kroll.KrollRuntime$KrollRuntimeThread.run(KrollRuntime.java:109) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T21:22:23.020

您必须在真实设备上对此进行测试，因为模拟器没有内置 Android Market。[测试应用内结算](http://developer.android.com/google/play/billing/billing_testing.html)状态：

> **在 Android 设备上安装您的应用程序。**
> 
> 您不能使用模拟器测试应用内计费；您必须在设备上安装应用程序才能测试应用内计费。

# java - ProgressMonitorDialog - 观察活动线程以更新监视器

> ID：13828537
> 
> 赞同：2
> 
> 时间：2012-12-11T21:09:10.557
> 
> 标签：java, multithreading, swt, progress-bar

在我的 GUI 中，我有一个 PDF 文件创建操作。该操作最多可能需要 10-15 秒才能完成。当我开始操作时，我给它附加了一个监听器。侦听器更改光标并禁用 GUI，直到操作完成。
我还想添加一个进度条，这样用户就会知道它什么时候完成。

创建了一个方法 startProgressBar() 并从操作方法的开头调用它。
*见下文：*

```
 private void startSavePdfOperation() {
      startProgressBar();
      saveOp = new AplotSaveOperation(appReg.getString("aplot.message.SAVETOPDF"), "PDF", session);
      saveOp.addOperationListener(new MyOperationListener(this) { 
```

*startProgressBar 方法 - 见下文：*

```
 public void startProgressBar() {
     Shell shell = new Shell(getShell());
  shell.setSize(260, 120);
  final ProgressBar bar = new ProgressBar(shell, SWT.SMOOTH);
  bar.setBounds (20, 20, 200, 20);
  shell.open();
  final int maximum = bar.getMaximum();
  new Thread(new Runnable() {
     public void run() {
        for (final int[] i = new int[1]; i[0] <= maximum; i[0]++) {
        try {Thread.sleep (100);} catch (Throwable th) {}
           if (Display.getDefault().isDisposed()) return;
           Display.getDefault().asyncExec(new Runnable() {
              public void run() {
              if (bar.isDisposed ()) return;
                 bar.setSelection(i[0]);
              }
           });
        }
     }
  }).start(); 
```

上面的代码创建了 ProgressBar。问题是操作将在进度条指示器接近结束之前结束。

问题：这是因为在方法中我正在创建一个新线程，而指标是根据新线程而不是操作线程更新的吗？

问题：是否可以创建一个新线程来监视 GUI 线程并相应地更新进度条？

阅读建议将 ProgressMonitorDialog 与 IRunnableWithProgress 一起使用的文章。

*使用 ProgressMonitorDialog 的方法 startProgressBar - 见下文：*

```
 public void startProgressBar() {
  ProgressMonitorDialog dialog = new ProgressMonitorDialog(getShell());    
  try {
     dialog.run(true, true, new IRunnableWithProgress(){
          public void run(IProgressMonitor monitor) {
              monitor.beginTask("Some nice progress message here ...", 100);
              ** getThread(); **
              monitor.done();
          }
      });
  }
  catch (InvocationTargetException e) {
     // TODO Auto-generated catch block
     e.printStackTrace();
  }
  catch (InterruptedException e) {
     // TODO Auto-generated catch block
     e.printStackTrace();
  } 
}

 public void getThread() {
   new Thread etc.. etc...

 } 
```

似乎它在线程和更新方面会遇到与上面的代码相同的问题。

问题：所以现在我在想我可以将 ProgressBar 添加或更新到我现有的 Listener

*OperationListener 代码 - 见下文：*

```
 public abstract class MyOperationListener implements InterfaceAIFOperationListener {
  AplotCreatePDFDialog w = null;

  public MyOperationListener(AplotCreatePDFDialog win) {
     w = win;
  } 
  public void startOperation(String startMessage) {
     Display.getDefault().asyncExec(new Runnable() {
        public void run() {
           w.getShell().setCursor(new Cursor(Display.getCurrent(), SWT.CURSOR_WAIT));
           w.recursiveSetEnabled(getShell(), getShell().getEnabled());
           w.getShell().setEnabled(!getShell().getEnabled());
        }
     });
  } 

  public void endOperation() {
     try {
        endOperationImpl();
     }
     finally {
        Display.getDefault().asyncExec(new Runnable() {
           public void run() {
              w.getShell().setCursor(new Cursor(Display.getCurrent(), SWT.CURSOR_ARROW));
              w.recursiveSetEnabled(getShell(), true);
              w.getShell().setEnabled(!getShell().getEnabled());
              w.close();
           }
        });
     }
  } 
  abstract protected void endOperationImpl();
} // end class MyOperationListener 
```

感谢您对此提供的任何帮助。

***编辑***

Baz，您在下面的回答正是问题所要求的，所以感谢您的回答。

但是我开始认为我想做的事情是不可能的。当我的操作开始时，我希望进度条指示器开始，当我的操作结束时，我希望指示器在最后并且监视器会关闭。

我认为可能有一种方法可以使用我的侦听器来添加进度条。类似于以下内容。

```
 public void startOperation(String startMessage) {
     Display.getDefault().asyncExec(new Runnable() {
        public void run() {
           ->monitor.beginTask("Creating PDF File(s)", IProgressMonitor.UNKNOWN);<-
           w.getShell().setCursor(new Cursor(Display.getCurrent(), SWT.CURSOR_WAIT));
           w.recursiveSetEnabled(getShell(), getShell().getEnabled());
           w.getShell().setEnabled(!getShell().getEnabled());

        }
     });
  } 
  public void endOperation() {
     try {
        ->monitor.worked(1);<-
        endOperationImpl();
     }
     finally {
        Display.getDefault().asyncExec(new Runnable() {
           public void run() {
              w.getShell().setCursor(new Cursor(Display.getCurrent(), SWT.CURSOR_ARROW));
              w.recursiveSetEnabled(getShell(), true);
              w.getShell().setEnabled(!getShell().getEnabled());
              ->monitor.done();<-
              w.close();
           }
        });
     }
  } 
  abstract protected void endOperationImpl(); 
```

} // 结束类 MyOperationListener

但我开始看到 ProgressBar 必须进行某种测量才能正确显示指标。

如果指示器只是来回走动并且显示器会在操作结束时关闭，我会很高兴。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T21:23:52.793

为什么不使用[`ProgressMonitorDialog`](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fjface%2Fdialogs%2FProgressMonitorDialog.html)？

[这](https://stackoverflow.com/a/12987522/1449199)是我的一个相关答案，展示了一个简单的例子。

这是它的样子：

![在此处输入图像描述](../Images/c00d588b78f00ded1908ad70b2cf6cfe.png)

* * *

如果您不确定工作负载，请使用以下代码：

```
monitor.beginTask("Copying files", IProgressMonitor.UNKNOWN); 
```

它会在运行时显示空闲栏。

# salesforce - 在开发人员帐户中安装托管软件包后，Salesforce 中的自定义设置问题

> ID：13828539
> 
> 赞同：0
> 
> 时间：2012-12-11T21:09:19.560
> 
> 标签：salesforce

我真的被困在编码的最后阶段。我在引导部分创建了一个自定义按钮，我在 javascript 代码中调用自定义设置 url。它在我的开发人员组织中运行良好，但是当我在其他开发人员组织中安装它时它失败了。这是供您参考的代码；

```
{!REQUIRESCRIPT("/soap/ajax/26.0/connection.js")}  
var uname = encodeURI('{!$Setup.UserDetails__c.UName__c}');   
var ukey= encodeURI('{!$Setup.UserDetails__c.Sha1Key__c}');  
try{  
var rurl= escape('/handleapprequest?email={!Lead.Email}&fname ={!Lead.FirstName}&lastname={!Lead.LastName}&company={!Lead.Company}');  
window.open('{!$Setup.UserDetails__c.Url__c}login/' + uname + '/'+ ukey +'?returnurl='+rurl, 'Send Email',   'height=600,location=no,resizable=yes,toolbar=no,status=no,menubar=no,scrollbars=1', 1)
}catch(err)  
{alert(err);} 
```

当我将我的包安装到不同的开发人员组织时，执行 onClick javascript 的按钮出现异常“遇到此按钮或链接的 OnClick JavaScript 问题：Field Setup.UserDetails_ *c.UName* _c 不存在检查拼写”
请，让我知道这里出了什么问题？我已经创建了 Beta 包，我无法从我的开发人员组织中更改或删除代码。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T15:16:23.413

首先，您应该检查您的包装中是否包含自定义设置。如果您不这样做，那么它就不会存在于新组织中。

即使您在包中确实有自定义设置，您仍然必须在目标组织中输入一个值。包仅包含元数据，不包含数据，因此您必须在此自定义设置中添加一行，以便您的按钮将其拾取。您可以在目标组织中手动执行此操作，也可以使用安装后触发器自动执行此操作。顺便说一句，即使您有一个测试版托管包，您仍然可以向其中添加对象和代码。

# css - Twitter 引导页脚太低

> ID：13828543
> 
> 赞同：1
> 
> 时间：2012-12-11T21:09:29.077
> 
> 标签：css, twitter-bootstrap

我正在使用带有我购买的模板的 Twitter 引导程序。我必须做一些工作才能让页脚出现并且看起来可以接受，但现在它总是太低了。

我的意思是，将始终添加空白区域，以便页脚位于屏幕底部下方 - 您始终必须向下滚动才能看到它。

[这是该网站的链接](http://www.mylifelessons.net)。您只需要查看主页即可看到问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T21:21:37.437

如果要删除导致页面增长得更多的额外空白间距，则只需删除：

```
body {
    padding-bottom: 40px;
    padding-top: 60px;
}

#wrap {
    min-height: 100%;
}

html, body {
    height: 100%;
} 
```

如果您要使用页脚实现的目的是始终将其粘贴在页面底部，您应该遵循一种称为粘性页脚的技术，如下[所示](http://mystrd.at/modern-clean-css-sticky-footer/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T21:31:01.453

问题似乎是您将#wrap 元素设置为'min-height: 100%;'。如果您对页脚位于内容底部而不是页面底部感到满意，那么删除它应该很容易解决。

# c - 如果 bash 脚本不存在，则原子创建文件

> ID：13828544
> 
> 赞同：17
> 
> 时间：2012-12-11T21:09:30.287
> 
> 标签：c, linux, bash

在系统调用`open()`中，如果我用 打开`O_CREAT | O_EXCL`，系统调用确保文件不存在时才会创建。原子性由系统调用保证。是否有类似的方法可以从 bash 脚本以原子方式创建文件？

更新：我发现了两种不同的原子方式

1.  使用 set -o noclobber。然后您可以原子地使用 > 运算符。
2.  只需使用 mkdir。mkdir 是原子的

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-11T21:51:09.233

100% 纯 bash 解决方案：

```
set -o noclobber
{ > file ; } &> /dev/null 
```

`file`如果不存在名为`file`. 如果有一个名为 的文件`file`，则什么也不做（但返回一个非零返回码）。

优点 wrt`touch`命令：

*   如果文件已存在，则不更新时间戳
*   100% 内置 bash
*   按预期返回代码：如果`file`已经存在或`file`无法创建则失败；如果`file`不存在并被创建则成功。

缺点：

*   需要设置该`noclobber`选项（但在脚本中可以，如果您小心重定向，或者之后取消设置）。

我猜这个解决方案实际上是`open`系统调用的 bash 对应物`O_CREAT | O_EXCL`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-30T22:50:56.780

`mv -n`这是一个使用该技巧的 bash 函数：

```
function mkatomic() {
  f="$(mktemp)"
  mv -n "$f" "$1"
  if [ -e "$f" ]; then
    rm "$f"
    echo "ERROR: file exists:" "$1" >&2
    return 1
  fi
} 
```

例子：

```
$ mkatomic foo
$ wc -c foo
0 foo
$ mkatomic foo
ERROR: file exists: foo 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-11T21:32:53.960

您可以使用随机生成的名称创建它，然后将其重命名 ( `mv -n random desired`) 以使用所需的名称。如果文件已经存在，重命名将失败。

像这样：

```
#!/bin/bash

touch randomFileName
mv -n randomFileName lockFile

if [ -e randomFileName ] ; then
    echo "Failed to acquired lock"
else
    echo "Acquired lock"
fi 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-11T21:30:54.177

需要明确的是，确保仅在文件不存在时才创建文件与原子性不同。该操作是原子的当且仅当当两个或多个单独的线程尝试同时做同样的事情时，恰好一个会成功而所有其他的都会失败。

我所知道的在 shell 脚本中以原子方式创建文件的最好方法遵循这种模式（而且它并不完美）：

1.  创建一个极有可能不存在的文件（使用合适的随机数选择或文件名中的其他内容），并在其中放置一些独特的内容（其他线程不会有的内容 - 再次，随机数或其他内容)
2.  验证文件是否存在并包含您期望的内容
3.  创建从该文件到所需文件的硬链接
4.  验证所需文件是否包含预期内容

特别是，`touch`它不是原子的，因为如果文件不存在，它将创建文件，或者只是更新时间戳。您也许可以玩不同时间戳的游戏，但读取和解析时间戳以查看您是否“赢得”比赛比上述更难。`mkdir`可以是原子的，但您必须检查返回码，否则，您只能说“是的，目录已创建，但我不知道哪个线程获胜”。如果您使用的文件系统不支持硬链接，您可能不得不接受一个不太理想的解决方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-02T22:17:19.807

Another way to do this is to use `umask` to try to create the file and open it for writing, without creating it with write permissions, like this:

```
LOCK_FILE=only_one_at_a_time_please
UMASK=$(umask)
umask 777
echo "$$" > "$LOCK_FILE"
umask "$UMASK"
trap "rm '$LOCK_FILE'" EXIT 
```

If the file is missing, the script will succeed at creating and opening it for writing, despite the file being created without writing permissions. If it already exists, the script won't be able to open the file for writing. It would be possible to use `exec` to open the file and keep the file descriptor around.

`rm` requires you to have write permissions to the directory itself, without regards to file permissions.

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-12-11T21:13:53.133

`touch`是您要查找的命令。如果文件存在，它会更新所提供文件的时间戳，如果不存在则创建它。

# javascript - Javascript离线加载但不在drupal中

> ID：13828545
> 
> 赞同：0
> 
> 时间：2012-12-11T21:09:33.167
> 
> 标签：javascript, jquery, drupal

我正在尝试合并 Javascript 并将其加载到 drupal 中。问题是执行它。我知道这是一个简单的问题，但我的知识并没有超出将 javascript 添加到 drupal 页面的范围。当我在dreamweaver 中离线加载它时，它可以完美加载并且可以正常工作。

```
$(document).ready(function(){
//function for contact form dropdown
function contact() {
    if ($("#contactForm").is(":hidden")){
        $("#contactForm").slideDown("slow");
        $("#backgroundPopup").css({"opacity": "0.7"});
        $("#backgroundPopup").fadeIn("slow"); 
```

我知道问题出在前三行。因为当我在 chrome 中加载它时，它告诉我问题出在第 1 行。

我知道这与drupal 有关，我不知道是否需要在Drupal 中以不同方式加载javascript。

给出的错误是：未捕获类型错误：对象窗口的属性 $ 不是函数。

无知请多多指教......

```
$(document).ready(function(){
//function for contact form dropdown
function contact() {
    if ($("#contactForm").is(":hidden")){
        $("#contactForm").slideDown("slow");
        $("#backgroundPopup").css({"opacity": "0.7"});
        $("#backgroundPopup").fadeIn("slow"); 
    }
    else{
        $("#contactForm").slideUp("slow");
        $("#backgroundPopup").fadeOut("slow");  
    }
}

//run contact form when any contact link is clicked
$(".contact").click(function(){contact()});

//animation for same page links #
$('a[href*=#]').each(function() {
    if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'')
    && location.hostname == this.hostname
    && this.hash.replace(/#/,'') ) {
      var $targetId = $(this.hash), $targetAnchor = $('[name=' + this.hash.slice(1) +']');
      var $target = $targetId.length ? $targetId : $targetAnchor.length ? $targetAnchor : false;
        if ($(this.hash).length) {
            $(this).click(function(event) {
                var targetOffset = $(this.hash).offset().top;
                var target = this.hash;
                event.preventDefault();            
                $('html, body').animate({scrollTop: targetOffset}, 500);
                return false;
            });
        }
    }
});

  //submission scripts
 $('.contactForm').submit( function(){
    //statements to validate the form   
    var filter = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
    var email = document.getElementById('e-mail');
    if (!filter.test(email.value)) {
        $('.email-missing').show();
    } else {$('.email-missing').hide();}
    if (document.cform.name.value == "") {
        $('.name-missing').show();
    } else {$('.name-missing').hide();} 
    if (document.cform.message.value == "") {
        $('.message-missing').show();
    } else {$('.message-missing').hide();}      
    if ((document.cform.name.value == "") || (!filter.test(email.value)) || (document.cform.message.value == "")){
        return false;
    } 

    if ((document.cform.name.value != "") && (filter.test(email.value)) && (document.cform.message.value != "")) {
        //hide the form
        $('.contactForm').hide();

        //show the loading bar
        $('.loader').append($('.bar'));
        $('.bar').css({display:'block'});

        //send the ajax request
        $.post('mail.php',{name:$('#name').val(),
                          email:$('#e-mail').val(),
                          message:$('#message').val()},

        //return the data
        function(data){
          //hide the graphic
          $('.bar').css({display:'none'});
          $('.loader').append(data);
        });

        //waits 2000, then closes the form and fades out
        setTimeout('$("#backgroundPopup").fadeOut("slow");      $("#contactForm").slideUp("slow")', 2000);

        //stay on the page
        return false;
    } 
  });
//only need force for IE6  
$("#backgroundPopup").css({  
    "height": document.documentElement.clientHeight 
});  
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T21:18:00.927

`$`在 Drupal 7 中默认不是别名`jQuery`，您需要像这样传递它：

```
(function($) {
  // Your code here
})(jQuery); 
```

有关更多信息，请参阅[在 Drupal 7 中管理 JavaScript 。](http://drupal.org/node/756722)

# jquery - .draggable() id 被移除 拖动/克隆时

> ID：13828549
> 
> 赞同：2
> 
> 时间：2012-12-11T21:09:40.660
> 
> 标签：jquery, jquery-ui

我最近被迫升级：

*   jQuery 从 1.7.1 到 1.8.3
*   jQueryUI 从 1.8.9 到 1.9.2

（我被迫升级以兼容最新版本的 Blueimp 的 jQuery 文件上传。）

我有以下代码，在 (1.7.1 / 1.8.9) 下完美运行

```
$( "div.archive li" )
  .draggable({ // make the archive-icons draggable and connect to the album(s)
    connectToSortable:  handleSortable, // ,"#album_45 ul", //
    helper: "clone", // (helper must be set to 'clone' in order to work flawlessly),
    revert: "invalid",
    appendTo: "body"}) 
```

和

```
sortableUL.sortable({
    helper: 'clone',
    appendTo: "body",
    update : function () {
        var serializedSequence = sortableUL.sortable('serialize'); // Fails in jQueryui/1.8.21 !!
        $.ajax({
            url: "/callback/upAlbum",
            type: "post",
            data: serializedSequence,
            success: function(htmlData){
                sortableUL.html(htmlData);
                recursiveSortable(albumID, joPanel); // once the newly ordered zone-album has been read, recurse back to: make list sortable & slidable
            }
        }); // END $.ajax
    } // END update : function ()
}); 
```

上面的代码在旧 jQuery 和 jQueryUI 下运行良好，但在新版本下失败。如果我降级回旧版本，代码将再次工作（但我的 jQuery FileUploader 将无法工作！）。

新设置中不会生成错误消息。但是，会出现以下情况：

可拖动的列表项是`<li id="icon_1234">`. 当这些被放入 时`.sortable()`，它们被接受。因此，它们成为`<li>`了`.sortable()` `<ul>`. 但是，那时 将`id="icon_1234"`被删除。的其他属性`<li>`保持不变。

**更新：**实际上，`id="icon_1234"`当`<li>`附加到时 会被删除`<body>`，所以`.droppable()`显然不是问题的原因。但是，注释掉该`appendTo:`选项并不会改变问题。

当然，如果没有`id="icon_1234"`，新删除的内容将`<li>`无法在以下语句中继续存在：

```
var serializedSequence = sortableUL.sortable('serialize'); 
```

因此，在更新回调之后，新删除的将从列表中`<li>`消失。`.sortable()`

我真的不知道如何解决这个问题......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T08:09:43.257

好吧，让我分享一下我发现的东西，以及我一路上忍受的弹弓和箭矢。

据我了解，jQuery UI 大神们[认为](http://bugs.jqueryui.com/ticket/7734)`id`从 a中删除`draggable`a`sortable`是一项功能。似乎这是在 1.8.9 和 1.9.2 之间引入的。

原因是人们不想要重复的 ID。如果是这样，该`.sortable('serialize')`方法不应该寻找 ，`id=""`而是寻找`<li>`. （但是，默认情况下，serialize 方法会继续查找`id`'s。）

所以，这是我的解决方法。您的列表项过去看起来像这样：

```
<li id="foo_123"> 
```

我们需要为这些添加一个属性`<li>`：

```
<li id="foo_123" bar="foo_123"> 
```

接下来，我们指示 serialize 方法查找新属性，而不是 id：

```
var serializedSequence = $('#sortableUL').sortable('serialize',{
  key: 'foo',
  attribute: 'bar'
}); 
```

这应该可以解决问题。但是，就我而言，还有一个吊索/箭头。该`serialize`方法未生成正确序列化的数组。（我不知道为什么，但我不能在此*功能*上浪费更多时间。）因此，我需要添加：

```
serializedSequence = serializedSequence.replace(/=/g,"[]="); 
```

更新：这是其他人为类似解决方案制作[的小提琴。](http://jsfiddle.net/WTTsB/)

希望这可以帮助 ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-16T18:39:15.883

补充 Ivo Renkema 上面的答案，您可以在键上使用数组推送：

```
var serializedSequence = $('#sortableUL').sortable('serialize',{
  key: 'foo[]',
  attribute: 'bar'
}); 
```

这将产生数组 foo[]=1&foo[]=2...

在这里更新[小提琴](http://jsfiddle.net/juanserrats/nr4azdem/)

# jquery - 如何选择此 div 并在单击链接时运行动画？

> ID：13828553
> 
> 赞同：0
> 
> 时间：2012-12-11T21:10:08.580
> 
> 标签：jquery, function, jquery-selectors, jquery-animate, bind

如何选择带有链接的 div 并在单击链接时运行动画？

这是html代码和脚本：

```
<div class="section white" id="work">
<div class="maincontent2"></div>
<section class="main">  
            <ul class="ch-grid">
                <li>
                    <div class="ch-item">               
                        <div class="ch-info">
                            <div class="ch-info-front ch-img-1"></div>
                            <div class="ch-info-back" id="graphiccircle">
                                <h3><a href="index.html#graphicdesign">Graphic Design</a></h3>
                                <p>Graphic/Typography<a href="index.html#graphicdesign">View</a></p>
                            </div>  
                        </div>
                    </div>
                </li>
</ul>

        </section>
</div> 
```

剧本：

```
$(function() {
            $('').bind('click',function(event){
                var $anchor = $(this);
                 $('html, body').stop().animate({
                    scrollLeft: $($anchor.attr('href')).offset().left, scrollTop: $($anchor.attr('href')).offset().top
                }, 1500,'easeInOutExpo');
                event.preventDefault();
            });
        }); 
```

# javascript - 有没有办法在 jQuery 中为事件“绑定”分配一个键，以便新的处理程序用相同的键覆盖以前的处理程序？

> ID：13828555
> 
> 赞同：2
> 
> 时间：2012-12-11T21:10:16.193
> 
> 标签：javascript, jquery

我有一种情况，我需要将一个处理程序绑定到一个事件，然后，如果最终我需要绑定另一个处理程序，我需要取消绑定前一个处理程序。

我知道如果我有对前一个处理程序的引用，我可以做到这一点，在这种情况下我会这样做`unbind`，但在我的场景中这很困难。此外，我知道我也可以取消绑定每个处理程序，这是我试图避免的。

我想要的是这样的：

```
$("#myInput").bind("click", myHandler, "key");

// here, as I'm passing the same key, this handler will overwrite the previous
$("#myInput").bind("click", myHandler2, "key"); 
```

但这似乎不存在。

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T21:41:29.840

不，事件处理程序不会被覆盖。您需要手动删除它们。

但是，您可以[命名您的事件名称](http://api.jquery.com/on/#event-names)，以便您可以在不明确知道它们的情况下删除旧的（而不仅仅是分离所有点击处理程序）：

```
$("#myInput").on("click.key", myHandler);

$("#myInput").off(".key").on("click.key", myHandler2); 
```

* * *

否则，您将需要手动覆盖处理程序：

```
var handler = null;
$("#myInput").on("click", function() {
    if (typeof handler=='function') handler.apply(this, arguments);
});

handler = myHandler;

handler = myHandler2; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T13:51:36.683

您可以使用 .data() 方法访问绑定到元素的所有事件处理程序，它返回数组对象。所以你可以找到最后一次点击处理程序。代码可能是这样的：

```
var lastHandler = null;
jQuery.each($("#myInput").data("events"), function(i, event){
   if(i == 'click'){
      lastHandler = event[event.length-1].handler;
   }
});
$("#myInput").unbind("click", lastHandler); 
```

# javascript - 在自动完成项目上输入会影响提交按钮

> ID：13828556
> 
> 赞同：2
> 
> 时间：2012-12-11T21:10:21.137
> 
> 标签：javascript, asp.net, html

我正在使用`google.maps.places.Autocomplete`api 使用自动完成功能查找地址。当用户通过按键选择一个项目并点击输入按钮时，提交按钮会受到影响。

原则上，默认按钮行为是可以的，但在自动完成文本框中选择元素时则不行。

我真的需要捕捉 Enter 事件并检查哪个元素具有焦点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T21:12:41.103

您将需要添加一个 keydown 事件并在按下键 13 (Enter) 时正确处理。

# html - htaccess 重写。我不希望所有这些都被重写 - 如何排除某些页面？

> ID：13828564
> 
> 赞同：3
> 
> 时间：2012-12-11T21:10:38.217
> 
> 标签：html, wordpress, .htaccess, mod-rewrite

我的htaccess如下：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteRule ^moreinfo/(.*)$ http://www.kgstiles.com/moreinfo$1 [R=301]
    RewriteRule ^healthsolutions/(.*)$ http://www.kgstiles.com/healthsolutions$1 [R=301]
    RewriteRule ^(.*)\.html$ $1/ [R=301]
    RewriteRule ^(.*)\.htm$ $1/ [R=301]
</IfModule> 
```

我现在使用 wordpress 而不是直接的 html 编码。上面的重写规则用于转发根目录以及 /moreinfo/ 和 /healthsolutions/ 目录中的所有旧 .html 和 .htm 页面。不幸的是，他们还从 wordpress 页面中删除了 .htm 和 .html（我认为它们最初都以 php 结尾）。现在我看到了一些基本功能，比如在 .html 结尾的 wordpress 的可视化编辑器中打开图像编辑器（使用它们会产生 404 错误）。

所以问题是：有没有办法将我的重写规则限制在某些目录中，这样 Wordpress 的功能就不会受到阻碍？

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T21:14:38.300

您需要添加一个重写条件，例如：

```
RewriteCond $1 !^(dontrewrite\.php) 
```

您可以在其中添加 RegEx 表达式以省略某些目录/文件夹/文件类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T21:14:53.963

你可以尝试这样的事情：

重写引擎开启

```
# assuming wordpress is installed in blog directory
RewriteRule ^blog(/.*|)$ - [L] # don't take any action

RewriteRule ^moreinfo/(.*)$ http://www.kgstiles.com/moreinfo$1 [R=301,L]
RewriteRule ^healthsolutions/(.*)$ http://www.kgstiles.com/healthsolutions$1 [R=301,L]
RewriteRule ^(.*)\.html$ $1/ [R=301,L]
RewriteRule ^(.*)\.htm$ $1/ [R=301,L] 
```

# jquery - Jquery - 使用链接但不分开

> ID：13828565
> 
> 赞同：1
> 
> 时间：2012-12-11T21:10:44.160
> 
> 标签：jquery, jquery-chaining

我是一位经验丰富的开发人员，对 Jquery 不熟悉。我遇到了一个问题，我的代码在链接在一起时有效，但在分开时无效，我想了解 Jquery 行为。

我有一个`<div>`带有 4 个按钮的按钮。当按下 4 个按钮中的一个时，我需要所有 4 个按钮都消失并用一个新按钮替换它（新按钮是一个与按下的按钮具有相同值但具有不同 CSS 以使其看起来不同的按钮）

按下按钮时，我`<div>`像这样清除

```
$(this).parent().empty(); 
```

然后我建立了我想插入的新按钮

```
var splitstr = event.target.id.split('-');
var pick = splitstr[0];
var position_id = splitstr[1];
var singlebutton = '<button class="pick' + pick + ' pickbutton-box btn btn-primary btn-large madepick" name="pick" ' + 'id="made'+ position_id + '" ' + 'value="' + pick + '">' + pick + '</button>'; 
```

然后我尝试将其重新插入父级：

```
$(this).parent().append(singlebutton); 
```

当我这样做时，所有 4 个按钮`<div>`都被删除，但没有添加新按钮。但是，如果我在做空和追加之前建立字符串

```
var singlebutton = " ---- HTML CODE for button ---- "
$(this).parent().empty().append(singlebutton); 
```

一切都按预期工作。这对我来说似乎没有任何意义。有人可以解释发生了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T21:26:07.103

你说你有这样的事情：

```
<div>
    <button>click me</button>
    <button>click me</button>
    <button>click me</button>
    <button>click me</button>
</div> 
```

和这样的事件处理程序：

```
$('div button').click(function() {
   $(this).parent().empty();
   // etc
}); 
```

当您的处理程序代码运行时，`this`指向单击的按钮，该按钮由`$(this).parent().empty();`. 您需要保存对父 div 的引用以便以后能够引用它，因为`this`它将变为空。像这样的东西：

```
$('div button').click(function() {
   var div = $(this).parent().empty();
   // cannot use 'this' anymore below this point
   div.append('something');
}); 
```

链式版本有效，因为对父元素的引用是从 开始提前传递的`.parent`，而 的值`this`变得无关紧要。

# jquery - jQuery - 如果用户没有滚动到底部，则在用户离开页面时显示消息

> ID：13828566
> 
> 赞同：0
> 
> 时间：2012-12-11T21:10:45.687
> 
> 标签：jquery, scroll

jQuery 的新手，无法让这段代码的最后一段工作。我试图在用户通过单击链接离开页面时显示一个简单的警报，如果他们没有通过滚动到底部看到所有页面内容。

我不确定它是否应该阻止用户进入下一页，但现在我只想获取检测用户是否已到达底部并使其与我拥有的代码一起工作的部分。我已经有了检测是否有滚动条的部分，并且在用户到达底部时卡住了如何注册：

**jQuery：**

```
 <script>
        $(document).ready(function() {
            var verticalScrollPresent = function() {
                return document.documentElement.scrollHeight !== document.documentElement.clientHeight;
            }

            $('#nav').click(function() {
                if (verticalScrollPresent) {
//imagining that this is where the code will go, but how can I register that the user     has scrolled to the bottom?
                        alert("There's a whole bunch of stuff you haven't seen yet!");
                }
            });
        });

    </script> 
```

**HTML**

```
<a id="nav" href="http://google.com">Next page</a> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T21:26:15.027

将变量设置为 false，当用户滚动到底部时，将变量设置为 true，在用户单击链接时检查该变量：

```
<script type = "text/javascript"> 
    $(document).ready(function() {
        var beenToBottom = false;
        $(window).on('scroll', function() {
            //guesstimated scrolled to bottom, adjust as neccessary
            if (($(this).scrollTop() + $(this).height() + 200) > $(document).height()) {
                beenToBottom = true;
            }
        });

        $('#nav').click(function(e) {
            e.preventDefault();
            if (!beenToBottom) {
                alert("There's a whole bunch of stuff you haven't seen yet!");
            }else{
                document.location.href = this.href;
            }
        });
    });
</script>​ 
```

# javascript - 如何使用 Javascript onKeyDown 控制画廊 - 左右箭头

> ID：13828570
> 
> 赞同：1
> 
> 时间：2012-12-11T21:11:10.707
> 
> 标签：javascript

请查看[steven.tlvweb.com](http://steven.tlvweb.com)

我想实现它，以便左右键盘箭头控制流程。

目前滚轮可以工作，并在构造函数中设置如下：

```
/*  ImageFlow Constructor */    

    /* add mouse wheel events ==== */
    if (window.addEventListener)
        this.oc.addEventListener('DOMMouseScroll', function(e) {
            if (e.preventDefault) e.preventDefault();
            this.parent.scroll(-e.detail);
            return false;
        }, false);

    this.oc.onmousewheel = function () {
        this.parent.scroll(event.wheelDelta);
        return false;
    } 
```

而在 imageflow.prototype 更下方的代码是：

```
 /* ==== mousewheel scrolling ==== */
    scroll : function (sc) {
        if (sc < 0) {
            if (this.view < this.NF - 1) this.calc(1);
        } else {
            if (this.view > 0) this.calc(-1);
        }
    }, 
```

所以，我为构造函数写了一些代码：

```
this.oc.onkeydown=function(){
        this.parent.keypress(event.keyCode);
        return false;
    } 
```

在 imageflow.prototype 我包括：

```
 /* ==== arrow keys ==== */
    keypress : function(kp) {   
        switch (kp) {

        case 39:                        //right Key
        if (this.view < this.NF - 1) {  //if not at far right of gallery
                    this.calc(1);       //move gallery left
        break;
                    }

                    case 37:            //left Key
        if (this.view > 0) {            //if not at far left of gallery
                    this.calc(-1);      //move gallery left
        break; 
                    } 

        }
    }, 
```

注意实际上图像流构造函数中当前有代码，但它不起作用（将它们全部删除甚至没有效果）：

```
 /* ==== right arrow ==== */
    this.arR.onclick = this.arR.ondblclick = function () {
        if (this.parent.view < this.parent.NF - 1)
            this.parent.calc(1);
    }
    /* ==== Left arrow ==== */
    this.arL.onclick = this.arL.ondblclick = function () {
        if (this.parent.view > 0)
            this.parent.calc(-1);
    } 
```

我认为我遗漏了一些相对基本的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:09:47.050

好的，多亏了杰森，我终于到了某个地方！查看 steven.tlvweb.com 以了解左右箭头键现在是否正常工作。

我只是现在线路有问题

this.parent.scroll(120);

基本上滚动在原型中设置为取一个整数并根据它是正数还是负数向左或向右移动。我只是没有正确调用它。

this.parent.scroll(event.wheelDelta);

是构造函数的正确编码，但在 window.document.onkeydown=function() 内它不起作用。

```
function ImageFlow(oCont, xmlfile, horizon, size, zoom, border, start, interval) {

/* === handle mouse scroll wheel === */
this.oc.onmousewheel = function () {
this.parent.scroll(event.wheelDelta);
return false;
    }

/* ==== add keydown events ==== */  
    window.document.onkeydown=function(){
    switch (event.keyCode) {

    case 39:  //right Key
        alert('keyRight'); //move gallery right
        this.parent.scroll(120);

        break;

    case 37: //left Key

        alert('keyleft'); //move gallery left   
        this.parent.scroll(-120);
        break;

    }

    return false;
    }
}

ImageFlow.prototype = {

    scroll : function (sc) {

        alert('here');

        if (sc < 0) {
            if (this.view < this.NF - 1) this.calc(1);
        } else {
            if (this.view > 0) this.calc(-1);
        }
    },

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T00:02:55.877

我在 JSFiddle 中为您创建了一个更简单的示例。

[http://jsfiddle.net/nLaGz/](http://jsfiddle.net/nLaGz/)

基本上，您似乎正在尝试将键盘事件附加到 this.oc 对象，该对象基本上代表您的`<div id="imageFlow">`元素。

问题是，`<div>`元素不是输入元素，所以它们不能很好地处理键盘事件，因为它们从来没有像表单输入那样真正获得“焦点”。

幸运的是，window.document 对象是附加键盘事件的好地方，因为无论哪个 dom 元素具有焦点，它都会监听。

尝试更改您的线路：

```
this.oc.onkeydown 
```

至

```
window.document.onkeydown 
```

# php - 使用锚标题而不是图像标题

> ID：13828571
> 
> 赞同：5
> 
> 时间：2012-12-11T21:11:16.583
> 
> 标签：php, html, css, wordpress

如果我在锚点中有图像，如何使锚点的标题出现，而不是图像元素的标题？

我知道我可以使用 javascript 删除 title 属性，但我希望有一个更简单的解决方案。

## 例如

```
<a title="Anchor Title"><img title="Image Title" /></a> 
```

如果您将鼠标悬停在链接上，它将显示“图像标题”。

## 我试过的

使用 CSS，我想也许我可以更改 z-indexes 以将锚点推到前面，或者我可以将锚点显示为一个块并给它图像的宽度和高度。这没有用。[请参阅此处](http://jsfiddle.net/bozdoz/HAb37/)的JSFiddle 。

我希望找到使用 CSS 或 HTML 的解决方案。

我想这样做的原因是我正在使用 Wordpress，吐出帖子和缩略图。我希望缩略图链接到某个页面，并且我希望为链接设置一个通用标题，但它从单个缩略图中获取标题。这是 Wordpress/PHP 代码：

```
<a href="<?php the_permalink(); ?>" title="Click to see Featured Stories">
<?php the_post_thumbnail(); ?>
</a> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T21:20:12.780

[在缩略图](http://codex.wordpress.org/Function_Reference/the_post_thumbnail#Parameters)的数组中的`title`属性中传递一个空字符串：`$attr`

```
<?php the_post_thumbnail('thumbnail', array('title' => '')); ?> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-12T09:10:03.853

这提供了一个通用的解决方案，不考虑 WordPress。CSS 阻止标题显示。

HTML：

```
<a title="Anchor Title">
    <img title="Image Title" src="http://codepen.io/images/logo.png" />
</a> 
```

使用 CSS：

```
a {
  display: inline-block;
}

img {
  pointer-events: none;
} 
```

结果

![在此处输入图像描述](../Images/88645ef1ff49a4975bcd8083dc0d1d41.png)

请参阅[CodePen 示例](http://codepen.io/joe/pen/yoBdq)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T21:19:47.327

只需`<span>`在图像上放置一个透明的，具有透明背景和所需的标题属性。

**标记**

```
<a href="#">

    <img title="Image Title" />
    <span title="Div Title"></span>    

</a>​ 
```

**CSS**

```
img { width:50px;height:50px;background:blue; }
a, img { position:absolute; } 
a { z-index:4;display:block;width:50px;height:50px; }
img { z-index:2; }
​span{
    top:0;
    left:0;
    position:absolute;
    width:50px;
    height:50px;    
    display:block;
    z-index:100;
    background-color:transparent;
}​ 
```

我刚刚[分叉了你的小提琴](http://jsfiddle.net/MZgym/)，至少在 Chrome 中工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T21:25:32.877

[http://jsfiddle.net/hnmuj/](http://jsfiddle.net/hnmuj/)

CSS：

```
#foo {
    position:relative;
    display:block;    
}
#foo span {
    position:absolute;
    width:100%;
    height:100%;
    z-index:1;
    top:0;
    left:0;
    display:block; 
```

} ​</p>

HTML：

```
<a title="Anchor Title" id="foo">
    <span></span>
    <img title="Image Title" />
</a>​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-11T21:20:26.837

我认为删除 img title 属性是最简单的解决方案。

# c# - 只需从内部项目文件夹中获取文件

> ID：13828577
> 
> 赞同：1
> 
> 时间：2012-12-11T21:11:34.033
> 
> 标签：c#, windows-phone-7

> **可能重复：**
> [如何使用我的 windows phone 7 应用程序项目中的文件填充列表框](https://stackoverflow.com/questions/13824721/how-to-populate-a-listbox-with-files-in-the-project-of-my-windows-phone-7-applic)

我是 C# 的新手，这让我很烦恼。

我的应用程序从我在解决方案资源管理器中创建的名为`Images`. 如果我将这些图像与 URI 和其他东西一起使用硬编码，我可以看到这些图像，但我想做的是动态地获取这些图像名称，然后加载它。我已经看到了一些类似的问题，但无法解决我的问题。我正在尝试这样：

```
DirectoryInfo directoryInfo = new DirectoryInfo(@"/Images");
foreach (FileInfo file in directoryInfo.GetFiles()) {
      photos.Add(new Photo() { FileName = file.FullName, PhotoSource = GetImageSource("Images/" + file.FullName) });
} 
```

`directoryInfo`始终设置为空。解决方案资源管理器中显示的我的项目层次结构如下：

```
 Project
     Main.xaml
         Maim.xaml.cs
     Images
         1.jpg
         2.jpg
         ... 
```

感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T22:39:48.247

来自[MSDN](http://msdn.microsoft.com/en-us/library/ff402541%28v=VS.92%29.aspx)：

> 对于 Windows Phone 应用程序，所有 I/O 操作都仅限于隔离存储，不能直接访问底层操作系统文件系统或其他应用程序的隔离存储。

因此，您无法以您想要的方式访问您的图像文件夹。

由于无论如何您都不能动态地将图像添加到 XAP，因此可用的图像将是恒定的。看来您只需要手动添加 URI：

`BitmapImage myImage = new BitmapImage(new Uri("Images/myImage.png", UriKind.Relative));`

如果您有不同语言环境的不同图像，您可以在资源文件中包含图像名称/路径，然后从那里创建它们。

或者，如果您有一组默认图像，然后会有一些用户添加的图像，并且您想遍历所有这些图像，您可以在第一次启动时将您的默认值从图像文件夹写入到 IsolatedStorage。[有关使用独立存储的详细信息，请参见此处](http://msdn.microsoft.com/en-us/library/ff626519%28v=vs.92%29.aspx)。您可以遍历应用程序 IsolatedStorageFile 中的目录和文件（请参阅[可用的方法](http://msdn.microsoft.com/en-us/library/System.IO.IsolatedStorage.IsolatedStorageFile%28v=vs.100%29.aspx)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T21:27:05.400

也许你想使用

```
string path = Path.Combine(Environment.CurrentDirectory, "Images");
foreach (string file in Directory.GetFiles(path) 
{
     photos.Add(new Photo {FileName = file, PhotoSource = GetImageSource(Path.Combine(path, Path.GetFileNameWithoutExtension(file))});
} 
```

它返回文件夹内容的列表。

Path.Combine 将单个字符串组合成一个完整的路径（因此您无需担心反斜杠。

路径命名空间被低估了，我建议你仔细看看它，因为它会为你节省很多时间。

# c# - 在代码或存储过程中验证密码

> ID：13828578
> 
> 赞同：3
> 
> 时间：2012-12-11T21:11:44.150
> 
> 标签：c#, security, passwords, asp.net-membership

我目前正在使用 .net/c# 创建登录和注册系统。一个 sql server 数据库保存用户名和密码（带有盐等的散列密码）

当我需要验证密码时，当前的程序是什么。是否将用户输入的值与盐等进行哈希处理，将其传递给存储过程并在那里进行比较？或者，与上述步骤相同，但比较 C# 代码中的密码？

我想根据最佳实践和最安全的方法做出决定，因此寻找关于这个和我应该考虑的项目的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T21:30:42.107

我认为这是一个六和两个三分球。对我来说重要的是您存储的不是密码，而是哈希。这是很好的设计。

我唯一要补充的就是保持一致。当用户创建帐户或重置密码时，除了处理登录之外，您的哈希引擎也可能会发挥作用。将所有内容保存在一个黑匣子中。换句话说，数据库或 c# 中的一个应该非常智能，而另一个则非常愚蠢。

我想您可以从可重用性中获得它......您是否有可能希望在不同的数据库中重用安全机制？或者上面没有一层组件？这可能会影响你的选择。

我唯一能想到的另一件事是您在应用程序内更改数据时设置了什么安全性（即日常业务功能）。这方面会影响你的决定吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T16:52:45.547

你应该用你最了解的来比较它。除非您绝对确定在密码错误时无法欺骗存储过程返回“True”，否则您最好在代码中进行比较。我建议你不要做类似“select * from users where login 〓 [value]”之类的事情

我宁愿这样做：

*   清理用户输入（即转义会导致 sql 错误或 sql 注入的不需要的字符）

*   准备一个参数化查询或存储过程，将用户和散列密码作为输入。

*   使 sp 返回每个匹配的行，以及两个字段（登录名和密码）

*   在代码中，检查 sp 返回一行且仅返回一行，并且登录名和密码都与用户输入匹配（避免一些 sql 注入）。

其中一些在某种程度上是多余的，但无论如何都会增加安全性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T21:16:17.933

无论哪种方式都可以，但我个人会在 C# 代码中进行比较。

我担心的是，如果有人可以访问数据库，即使哈希不匹配，他们也可以简单地更改验证存储过程以始终返回成功。但这实际上归结为您更信任的东西 - 您的应用程序代码安全性或数据库安全性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T21:26:25.070

我总是对用户名/电子邮件进行一般验证，然后使用它从数据库中提取密码并与用户在代码中输入的值进行比较......我是开发人员而不是 dba，这让我想到数据库支持代码（不是相反）所以当出现这种速度不受影响的情况时，我将逻辑推向代码..

不是真的对错..正是我会做的

编辑：始终加密/散列您的密码。

# log4j - 如何在 WebSphere 7 中设置 log4j.configuration 系统变量？

> ID：13828582
> 
> 赞同：8
> 
> 时间：2012-12-11T21:12:04.667
> 
> 标签：log4j, websphere, ear

我有一个 Java EE 5 Web 应用程序，我将其作为 EAR 文件部署到 WebSphere 7。

我希望我的 log4j 配置位于 EAR 文件的外部，这样我就可以在需要时调整日志内容，而无需重新构建和重新部署 EAR 文件。

我的理解是我可以通过设置一个名为 log4j.configuration 的“系统变量”来指定我的 log4j.properties 文件的位置。（例如 log4j.configuration=c:/log4j.properties）

我的问题是，如何在 WebSphere 7 管理控制台中设置这个系统变量？

浏览我看到有`Environment > WebSphere Variables`，但这看起来不正确，因为这将为整个服务器设置一个变量。我猜我只想为我的应用程序 EAR 文件设置一个系统变量。

非常感谢任何帮助或建议！

抢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-11T22:04:30.080

该`log4j.configuration`属性是 Java 虚拟机系统属性。您可以通过将其添加到应用程序服务器的通用 JVM 参数列表的末尾来加载此属性。这是在 WebSphere 控制台中通过浏览以下内容完成的：

`Servers > Application servers > [app server name] > Process definition > Java Virtual Machine`

在通用 JVM 参数下，添加以下内容：

`-Dlog4j.configuration=file:C:/log4j.properties`

单击`Apply`此页面底部的 ，然后保存您的更改。这将需要重新启动应用程序服务器才能生效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-26T10:35:10.423

您还可以将共享库用于应用程序并将 log4j.xml 放在那里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-28T16:20:01.147

我找到了一个解决方案来为每个 EAR 或 WAR 分配一个外部 log4j.xml 配置文件：

1.  我从我们的 EAR 中提取了 log4j.xml，将这个单独的 XML 压缩到一个 JAR 文件中。将其放置在 WebSphere 可访问的路径中的服务器上，
2.  创建一个共享库（WebSphere > Environment > Shared Libraries），将类路径映射到这个档案。确保选择“为此共享库使用隔离的类加载器”，否则您必须为应用程序的每个模块分配引用，而不仅仅是父 EAR。
3.  在我们的 EAR 中分配引用（Application -> ApplicationType -> WebSphere 企业应用程序 -> EAR NAME -> Shared library references -> SELECT YOUR EAR -> Reference shared libraries -> SELECT THE LOG4J CONFIGURATION JAR）并添加它。
4.  重新启动应用程序

我使用这种方式将特定的外部 log4j 配置文件分配给 EAR 中的每个 WAR。 [在这里](https://thequirksofit.blogspot.com/search?q=log4j%20)您可以找到原始解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-11T11:01:59.767

## 如何将 Log4j.xml（不是 log4j2.xml）指向外部文件

对于 Linux OS 中 websphere 8.5 中的 Log4J（不是 Log4J2），请在服务器 > 应用程序服务器 > [应用服务器名称] > 进程定义 > Java 虚拟机下自定义属性。属性名称：**log4j.configuration**属性值：**文件：/xyz/abc/def/config/log4j.xml**

注意：如果您从自定义属性中执行，则不需要附加 -D。但是如果你在通用 JVM 参数下给出它，使用这个： **-Dlog4j.configuration=file:/xyz/abc/def/config/log4j.xml** -Dlog4j.debug 每个属性必须用空格分隔。我为 Log4J 本身添加了调试日志，以查看它从何处选择 log4J.xml 文件。

# javascript - 工具提示中 y 轴值之间的 Highcharts 变化 (%)

> ID：13828583
> 
> 赞同：2
> 
> 时间：2012-12-11T21:12:08.560
> 
> 标签：javascript, highcharts

我有一个非常简单的样条图，我试图在每个工具提示上显示所选点与前一个点的值之间的变化，以百分比变化衡量。基本上**[这](http://www.highcharts.com/stock/demo/compare)**是我要展示的工具提示格式

我一直在寻找解决方案，但我想出的唯一方法就是**[这个](http://jsfiddle.net/techunter/PhW3t/55/)**。

希望能帮助到你。

这是我的图表选项：

```
GeneralChartOptions = {

    chart: {
        renderTo: 'dummycontainer',
        type: 'spline',
        zoomType: 'x',
        spacingRight: 20
    },
    credits: {
        enabled: false
    },
    title: {
        text: ''
    },
    xAxis: {
        type: 'datetime',
        dateTimeLabelFormats: {
            month: '%b \'%y',
            year: '%b'
        }
    },
    yAxis: {
        title: {
            text: ''
        },
        plotLines: []
    },
    tooltip: {
        xDateFormat: '%m-%Y',
        shared: true, 
        crosshairs: true,
    },
    exporting: {
        enabled: false
    },
    labels: {
       formatter: function() {
          return Highcharts.numberFormat(this.value, 2,".",",");

       }
    },
    series: []
} 
```

感谢您的帮助，我真的很感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T23:34:49.807

看看他们是怎么做的然后试试怎么样？

```
tooltip: {
    pointFormat: '<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b> ({point.change}%)<br/>',
    valueDecimals: 2
},

plotOptions: {
    series: {
        compare: 'percent'
    }
} 
```

[**演示**](http://jsfiddle.net/KHfW9/)

# asp.net-mvc - 网络矩阵示例

> ID：13828585
> 
> 赞同：1
> 
> 时间：2012-12-11T21:12:25.760
> 
> 标签：asp.net-mvc, webmatrix

有人可以向我推荐一本好的网络矩阵书籍/网站/博客，为我提供商业应用程序的分步示例。

这个应用程序示例应该从空网站开始？或 CRUD 或数据访问示例

网络矩阵的新手！！

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T00:13:01.073

Mike 的 Dot Netting 有一些很棒的文章，查看档案，他已经在博客上写了大约两年的关于使用 Web 矩阵的文章，一些好东西在不久前。

[http://www.mikesdotnetting.com/](http://www.mikesdotnetting.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T23:01:41.260

Steve Lydford 的书“使用 Microsoft WebMatrix 构建 ASP.NET 网页”的最后五章解释了从 Empty Site 模板构建一个现实的电子商务应用程序。

不过，您必须考虑到这本书是在 WebMatrix 2 发布之前编写的，因此没有提到它的改进。

介绍其主要功能的另一个重要的通用 WebMatrix 教程位于[http://www.asp.net/web-pages/tutorials](http://www.asp.net/web-pages/tutorials)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T11:08:07.767

结合 webmatrix 和 mvc 4 的简单教程。

[http://www.codeguru.com/csharp/.net/net_asp/mvc/using-simplemembership-in-asp.net-mvc-4.htm](http://www.codeguru.com/csharp/.net/net_asp/mvc/using-simplemembership-in-asp.net-mvc-4.htm)

# javascript - pattern.test 不是函数

> ID：13828591
> 
> 赞同：5
> 
> 时间：2012-12-11T21:12:45.473
> 
> 标签：javascript, jquery, regex, pattern-matching

我真的不明白为什么下面的代码与正则表达式不匹配

```
$val = "12/11/2012";
$opts = {"rule" : "required|format", "format" : {"pattern" : /^\d{1,2}\/\d{1,2}\/\d{4}$/, "errorMsg" : "Invalid date. Allowed allowed: mm/dd/yyyy"}}; 

if(rule=="format" && typeof $opts.format.pattern==="string") {
    try {
       var pattern = (typeof $opts.format.pattern==="object") ? $opts.format.pattern : new Regex($opts.format.pattern, "g");
       if(pattern.test($val)) { // $val contains 12/11/2012
            alert("Invalid Date!"); // Shows invalid format
       }
    } catch(err){
       alert(err.message); // shows pattern.test is not a function
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T08:58:46.163

问题是它`$opts.format.pattern`不是一个字符串，它是一个 RegEx 对象。

所以这将起作用：

```
var $val = "12/11/2012";
var $opts = {"rule" : "required|format", "format" : {"pattern" : /^\d{1,2}\/\d{1,2}\/\d{4}$/, "errorMsg" : "Invalid date. Allowed allowed: mm/dd/yyyy"}}; 

if ($opts.format.pattern instanceof RegExp) {
  try {
    var pattern = $opts.format.pattern;
    if(!pattern.test($val)) {
      alert("Invalid date");
    } else {
      alert("Valid date");
    }
  } catch(err){
    alert(err.message); // shows pattern.test is not a function
  }
} 
```

# python - NumPy/SciPy 中的广义累积函数？

> ID：13828599
> 
> 赞同：19
> 
> 时间：2012-12-11T21:13:25.747
> 
> 标签：python, numpy, scipy, cumsum

numpy 或 scipy（或其他一些库）中是否有将 cumsum 和 cumprod 的概念推广到任意函数的函数。例如，考虑（理论）函数

```
cumf( func, array) 
```

func 是一个接受两个浮点数并返回一个浮点数的函数。特殊情况

```
lambda x,y: x+y 
```

和

```
lambda x,y: x*y 
```

分别是 cumsum 和 cumprod。例如，如果

```
func = lambda x,prev_x: x^2*prev_x 
```

我将其应用于：

```
cumf(func, np.array( 1, 2, 3) ) 
```

我想

```
np.array( 1, 4, 9*4 ) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-01-12T23:11:00.153

上面的 ValueError 仍然是使用 Numpy 1.20.1（使用 Python 3.9.1）的错误。

幸运的是，发现了一种使用强制转换的解决方法： [https ://groups.google.com/forum/#!topic/numpy/JgUltPe2hqw](https://groups.google.com/forum/#!topic/numpy/JgUltPe2hqw)

```
import numpy as np
uadd = np.frompyfunc(lambda x, y: x + y, 2, 1)
uadd.accumulate([1,2,3], dtype=object).astype(int)
# array([1, 3, 6]) 
```

请注意，由于自定义操作适用于对象类型，因此它不会从 numpy 的高效内存管理中受益。因此，对于非常大的数组，该操作可能比不需要强制转换为对象的操作要慢。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-11T21:14:31.470

NumPy 的 ufunc 有[`accumulate()`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.ufunc.accumulate.html)：

```
In [22]: np.multiply.accumulate([[1, 2, 3], [4, 5, 6]], axis=1)
Out[22]: 
array([[  1,   2,   6],
       [  4,  20, 120]]) 
```

不幸的是，调用`accumulate()`' `frompyfunc()`ed Python 函数失败并出现一个奇怪的错误：

```
In [32]: uadd = np.frompyfunc(lambda x, y: x + y, 2, 1)

In [33]: uadd.accumulate([1, 2, 3])
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)

ValueError: could not find a matching type for <lambda> (vectorized).accumulate, 
            requested type has type code 'l' 
```

这是使用 NumPy 1.6.1 和 Python 2.7.3。

# sql - 从/向数据库删除+插入数据

> ID：13828600
> 
> 赞同：1
> 
> 时间：2012-12-11T21:13:27.400
> 
> 标签：sql, database, sql-insert, delete-row, corresponding-records

我有一些包含一些聚合数据的数据库表。他们的记录（几千个/表）由外部 .NET 应用程序定期重新计算，因此应删除旧数据并定期插入新数据。在这种情况下，更新不是一种选择。

在删除/插入之间有一个中间时间，当记录状态不一致（旧的已删除，新的尚未在表中），因此在该状态下进行选择查询会导致错误的结果。

我使用 subsonic simplerepository 来处理数据库功能。

解决/处理这种状态的最佳实践/模式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T21:19:04.930

我想到了三个选项：

1.  创建一个事务，并锁定读取直到完成。这仅在进程相对较快时才有效。如果您一次处理/锁定一张表，几千条记录应该不会太糟糕——如果您锁定整个过程，那可能会很昂贵！但是如果数据是相关的，这就是你必须做的
2.  写入表的临时版本，然后删除旧表并重命名临时表。
3.  与上面相同，除了从临时表（不一定是 SQL 临时表，但辅助保存表就足够了）批量复制到正确的表中，首先从主表中删除。你仍然想为此使用交易。

# asp.net - 使用asp.net在google maps api中为给定地址设置标记

> ID：13828601
> 
> 赞同：0
> 
> 时间：2012-12-11T21:13:44.283
> 
> 标签：asp.net, google-maps-api-3, google-maps-markers

我正在使用 asp.net 做一个 web 应用程序，我想在 textBox 中从用户那里获取一个地址，并通过一个标记（泪滴形）在 google maps api（我在我的 web 应用程序中实现）中显示这个地址事物）。那么有人可以给我这样做的代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T04:44:35.180

如果您正在寻找通过获取地址在地图上放置标记，那么您需要先查看地理编码服务。示例和描述有据可查，因此我没有提供任何与之相关的代码。

[地理编码服务](https://developers.google.com/maps/documentation/javascript/geocoding)

上面提供的示例将从 HTML 输入元素中获取输入。由于您的问题是关于从**Asp.net TextBox**获取输入，因此您可以这样做-

假设你有——

```
<asp:TextBox ID="txt_address" runat="server"> 
<asp:Button ID="btn_locate" runat="server" OnClientClick="codeAddress(); return false;"> 
```

而不是`var address = document.getElementById("address").value;`在示例中，

写-

`var address= document.getElementById('<%=txt_address.ClientID%>').value;`

请记住`return false`Button 源中的 ，因为这将阻止`postback`提交。

# haskell - 没有 ScopedTypeVariables 的外部绑定类型声明

> ID：13828602
> 
> 赞同：4
> 
> 时间：2012-12-11T21:13:45.327
> 
> 标签：haskell

我有以下工作定义：

```
{-# LANGUAGE ScopedTypeVariables #-}
module Control.Retry where

import Prelude hiding (catch)
import Control.Exception
import Control.Concurrent

retrying [] action = action 
retrying (i:is) action = catch action processError
  where 
    processError (e :: IOException) = threadDelay i >> retrying is action 
```

只是出于好奇，我想知道如何在不使用`ScopedTypeVariables`pragma 的情况下重新实现它，或者我是否可以，以及推断的类型声明`processError`实际上是什么，因为指定`processError :: IOException -> IO a`使它无法编译。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T22:01:22.960

另一种选择，可能比 asTypeOf 更干净一点：

```
retrying [] action = action 
retrying (i:is) action = catch action processError                                                                                                                                
  where
    processError e = threadDelay i >> retrying is action
      where
        _ = e :: IOException 
```

不确定这是否是惯用的；我只是做了它并且它起作用了。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-11T21:25:44.637

如果你想避免`ScopedTypeVariables`，你可以大部分时间使用`asTypeOf`。

```
retrying [] action = action 
retrying (i:is) action = catch action processError
  where 
    processError e = snd (e `asTypeOf` (undefined :: IOException), threadDelay i >> retrying is action) 
```

这`undefined :: IOException`是一个表达式类型签名，这是标准允许的。要求`asTypeOf`例外`e`是.`IOException`

不过，我更喜欢`ScopedTypeVariables`这里。

和

```
retrying :: [Int] -> IO a -> IO a 
```

的类型`processError`被推断为

```
processError :: IOException -> IO a 
```

这里的类型变量与`a`. 的签名中的类型变量相同`retrying`。但是，如果没有扩展，则不能在 Haskell 中指定该`ScopedTypeVariables`类型，因为写下签名中的类型变量默认情况下是通用量化的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T08:08:31.637

这个怎么样：

```
retrying [] action = action 
retrying (i:is) action = catch action $ processError $
                         threadDelay i >> retrying is action
  where
    processError :: IO a -> IOException -> IO a
    processError foo e = foo 
```

基本上，这解决了 do 的问题`processError :: IOException -> IO a`，其中`a`是通用的并且与`a`封闭函数中的不同，方法是接受一个带有类型的参数，`a`以便将其与封闭函数中的类型联系起来。

# core-data - 向关系中插入新数据时如何更新tableView

> ID：13828612
> 
> 赞同：0
> 
> 时间：2012-12-11T21:14:30.757
> 
> 标签：core-data, tableview, nsfetchedresultscontroller, relation

我使用通过关系“事件”一对多连接的 2 个实体 Person 和 Event。在我的第一个表格视图中，我有人的名字，第二个我有他们的事件类型。我可以将新事件插入特定的人，但第二个表格视图也没有更新的问题。只有当我使用导航器返回人员并且在它再次发生事件之后我才能看到更改。

对于插入新事件，我使用此方法：

```
- (void) addEventControllerDidSave:(NSString *)typeData{

    NSManagedObjectContext* context = [self managedObjectContext];
    Event *newEvent = (Event *)[NSEntityDescription insertNewObjectForEntityForName:@"Event" inManagedObjectContext:context];
    [newEvent setType:typeData];
    [currentPerson addEventsObject:newEvent];

    NSError *error;
    if (![[self managedObjectContext] save:&error])
    {
        NSLog(@"Problem saving: %@", [error localizedDescription]);
    }

    [self dismissViewControllerAnimated:YES completion:nil];
} 
```

我如何定义单元格：

```
//create cell use relation
    NSArray *eventsArray = [[[[self currentPerson] events] objectEnumerator]allObjects];
    Event *newEvent = [eventsArray objectAtIndex:indexPath.row];
    [[cell textLabel]setText: [newEvent type]]; 
```

更新表方法：

```
- (void) controllerWillChangeContent:(NSFetchedResultsController *)controller{
    [[self tableView] beginUpdates];
}

- (void) controllerDidChangeContent:(NSFetchedResultsController *)controller{
    [[self tableView] endUpdates];
}

- (void) controller: (NSFetchedResultsController *)controller didChangeObject:(id)anObject atIndexPath:(NSIndexPath *)indexPath forChangeType:(NSFetchedResultsChangeType)type newIndexPath:(NSIndexPath *)newIndexPath{

    UITableView *tableView = [self tableView];
    switch (type) {
        case NSFetchedResultsChangeInsert:
            [tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;
        case NSFetchedResultsChangeDelete:
            [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;
        case NSFetchedResultsChangeUpdate:
        {
            NSArray *eventsArray = [[[[self currentPerson] events] objectEnumerator]allObjects];
            Event *newEvent = [eventsArray objectAtIndex:indexPath.row];
            UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
            [[cell textLabel]setText: [newEvent type]];
            break;
        }
        case NSFetchedResultsChangeMove:
        {
            [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
            [tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;
        }
        default:
            break;
    }//switch
}

- (void) controller: (NSFetchedResultsController *) controller didChangeSection:(id<NSFetchedResultsSectionInfo>)sectionInfo atIndex:(NSUInteger)sectionIndex forChangeType:(NSFetchedResultsChangeType)type
{
    switch (type) {
        case NSFetchedResultsChangeInsert:
            [self.tableView insertSections:[NSIndexSet indexSetWithIndex:sectionIndex]
                          withRowAnimation:UITableViewRowAnimationFade];
            break;
        case NSFetchedResultsChangeDelete:
            [self.tableView deleteSections:[NSIndexSet indexSetWithIndex:sectionIndex]
                          withRowAnimation:UITableViewRowAnimationFade];
            break;
        default:
            break;
    }
} 
```

我真的不知道如何正确更新 tableView，我更新了我的第一个 tableView 但第二个有我早期描述的问题（可能是因为我使用关系？）你还可以在 git 上看到我的完整项目（也许它有助于）：

[https://github.com/dennis87/eventCost](https://github.com/dennis87/eventCost)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T22:48:16.657

有`EventsTableController`一个`fetchResultsController`属性和相应的`_fetchResultsController`实例变量。但是这个 FRC 总是`nil`因为它从未在`EventsTableController`.

永远不会调用更新方法`controllerWillChangeContent`, `didChangeObject`，`controllerDidChangeContent`因为您没有带委托的 FRC。

作为一种解决方法，您可以添加

```
[self.tableView reloadData]; 
```

in `addEventControllerDidSave`，则新条目将立即可见。

但真正的解决方案是初始化并使用 FRC，就像您在`NamesTableController`. 然后将自动显示新事件。

* * *

创建一个获取当前人员的所有事件的获取结果控制器看起来像这样（这是您来自 的代码`NamesTableController`，已修改以在 中使用`EventsTableController`）：

```
-(NSFetchedResultsController *) fetchResultsController{
    if (_fetchResultsController != nil) {
        return _fetchResultsController;
    }

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Event"
                                              inManagedObjectContext:[self managedObjectContext]];
    [fetchRequest setEntity:entity];

    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"person = %@", self.currentPerson];
    [fetchRequest setPredicate:predicate];

    NSSortDescriptor *sort = [[NSSortDescriptor alloc]initWithKey:@"type" ascending:YES];
    NSArray *sortArray = [[NSArray alloc]initWithObjects:sort, nil];
    [fetchRequest setSortDescriptors:sortArray];

    _fetchResultsController = [[NSFetchedResultsController alloc]
                               initWithFetchRequest:fetchRequest
                               managedObjectContext:[self managedObjectContext]
                               sectionNameKeyPath:nil
                               cacheName:nil];

    _fetchResultsController.delegate = self;
    return _fetchResultsController;
} 
```

# javascript - 在 ejs 页面中未定义 relativeTime() 实用程序

> ID：13828613
> 
> 赞同：1
> 
> 时间：2012-12-11T21:14:32.233
> 
> 标签：javascript, node.js, ejs, geddy

使用 GeddyJS 我创建了一个网络应用程序。

我有一个我想成为相对日期时间的表格（“自......以来的 5 分钟”）。但是，当我在我的页面中使用 GeddyJS 文档中的功能时，它不可用。它说

```
C:\Users\Chris\AppData\Roaming\npm\node_modules\geddy\lib\template\engines\ejs.js:74
    throw err;
          ^
TypeError: ejs:28
    26|             <td><%= people[i].location %></td>
    27|             <td><%= people[i].recorder %></td>
 >> 28|             <td><%= geddy.relativeTime(new Date(people[i].time)) %></td>
    29|             <td><%= people[i].direction %></td>
    30|             <td><%= people[i].transportation %></td>
    31|             <td>(<%= people[i].id %>)</td>
Object #<Object> has no method 'relativeTime'
    at Template.handleErr (C:\Users\Chris\AppData\Roaming\npm\node_modules\geddy\lib\template\engines\ejs.js:58:15)
    at Object.Template.compile.rethrow (C:\Users\Chris\AppData\Roaming\npm\node_modules\geddy\lib\template\engines\ejs.js:90:41) 
```

我应该如何拨打电话？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T01:36:12.757

看起来你应该使用`geddy.date.relativeTime`not `geddy.relativeTime`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-11T22:24:13.790

你把它分配给`res.locals.geddy = geddy;`?

# algorithm - 这些语言中哪一种是 NP 完全的？

> ID：13828615
> 
> 赞同：3
> 
> 时间：2012-12-11T21:14:37.397
> 
> 标签：algorithm, computer-science, theory, np-complete, np

我正在寻找 NP 和 NP 完全问题之间的区别。我在 Jason 的 StackOverflow 中找到了这个很棒的答案。关于 NP 完全问题，他说

> 一个 NP 问题 X，它可以在多项式时间内将任何其他 NP 问题 Y 简化为 X。直观地说，这意味着如果我们知道如何快速求解 X，我们就可以快速求解 Y。准确地说，如果存在多项式时间算法 f 将 X 的实例 x 在多项式时间内转换为 Y 的实例 y = f(x)，则 Y 可简化为 X，并且当且仅当答案f(x) 是肯定的。

我的问题是：哪一个是 NP 完全问题，X 还是 Y？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T21:19:44.833

NP 完全语言是 X。想法是您可以从任意 NP 语言 Y 开始，然后在多项式时间内将其简化为 X。

形式上，NP-completeness 的定义如下： 语言 X 被称为 NP-complete iff

1.  X ∈ NP。也就是说，X 不能比“最难的 NP 问题”“更难”，因为 X 本身就是 NP 的成员。
2.  对于任何 Y ∈ NP，存在从 Y 到 X 的多项式时间映射缩减。也就是说，X“至少与 NP 中的任何问题一样难”，因为 X 的多项式时间算法给出了多项式时间算法对于 Y。顺便说一下，Y 是多项式时间可简化为 X 的事实有时表示为 Y ≤ [p] X。

也就是说，可以将任何 NP 完全语言简化为任何其他 NP 完全语言，因此如果 Y 多项式时间减少到 X 并且 X 是 NP 完全的，则 Y 可能（但不是必须）是 NP -完全的。然而，众所周知，如果 Y 在多项式时间内减少到 X，则 Y 必须是 NP 的一个元素。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T21:16:23.937

两者都或都不是。这个过程称为 Karp 约简，关键是任何 NP 完全问题都可以在多项式时间内转化为任何其他 NP 完全问题。

然而，NP 完全问题只是 NP 问题的一个子集。（根据我们目前的理解，如果 P=NP，它们是相同的。）

# orchardcms - 使用 Query 中的 sort 对布尔值进行排序

> ID：13828618
> 
> 赞同：0
> 
> 时间：2012-12-11T21:14:38.053
> 
> 标签：orchardcms

可能有更好的方法来做到这一点，但我的客户有一个他们想要显示的书籍列表。其中一些是由社会本身提供的，他们希望它们在任何其他书籍之前首先展​​示。我设置了一个名为“待售书籍”的自定义类型，并添加了一个布尔字段，表明这是一本社会书籍。

我创建了一个查询“所有书籍”，在其中我根据标题排序，然后是布尔字段，但是它不排序，而是先显示数字，然后按字母顺序排列。

有没有办法让那些被标记为“真实”的书首先显示在列表中？

亲切的问候

西蒙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T21:28:45.683

您应该首先按布尔字段排序，然后按标题排序，而不是相反。

按多列排序就像优先排序一样 - 这意味着集合将按第一列排序，如果有任何行具有该列的相同值，那么只有这些行才会按第二列排序。如果这 2 列中有一些具有相同值的行，则排序将由第三个排序列（如果有）执行。等等..

# java - Maven 父 pom 变量未解析

> ID：13828619
> 
> 赞同：4
> 
> 时间：2012-12-11T21:14:44.573
> 
> 标签：java, maven

我有以下POM结构：

./foobar-common/pom.xml ./abc-window/pom.xml ./abc-datasource/pom.xml

两者 abc-window pom.xml 如下：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>hu.abc.ringcore</groupId>
    <artifactId>abc-window</artifactId>
    <packaging>jar</packaging>
    <version>1.0-SNAPSHOT</version>
    <name>abc-window</name>

    <parent>
        <relativePath>../foobar-common/pom.xml</relativePath>
        <groupId>hu.abc.ringcore</groupId>
        <artifactId>foobar-common</artifactId>
        <version>1.0</version>
    </parent>

    <dependencies>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>${junit.version}</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>hu.abc.ringcore</groupId>
            <artifactId>abc-datasource</artifactId>
            <version>${project.version}</version>
        </dependency>
    </dependencies>

    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-source-plugin</artifactId>
                <version>2.2.1</version>
                <executions>
                    <execution>
                        <goals>
                            <goal>jar</goal>
                        </goals>
                        <phase>package</phase>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-eclipse-plugin</artifactId>
                <version>2.9</version>
                <configuration>
                    <downloadSources>true</downloadSources>
                    <downloadJavadocs>true</downloadJavadocs>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project> 
```

abc-datasource pom.xml 如下：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>hu.abc.ringcore</groupId>
<artifactId>abc-datasource</artifactId>
<packaging>jar</packaging>
<version>1.0-SNAPSHOT</version>
<name>abc-datasource</name>

<parent>
    <relativePath>../foobar-common/pom.xml</relativePath>
    <groupId>hu.abc.ringcore</groupId>
    <artifactId>foobar-common</artifactId>
    <version>1.0</version>
</parent>

<dependencies>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>${junit.version}</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.apache.commons</groupId>
        <artifactId>commons-lang3</artifactId>
        <version>${commons-lang3.version}</version>
    </dependency>
    <dependency>
        <groupId>hu.abc.ringcore</groupId>
        <artifactId>abc-base</artifactId>
        <version>${project.version}</version>
    </dependency>
    <dependency>
        <groupId>hu.abc.ringcore</groupId>
        <artifactId>abc-event</artifactId>
        <version>${project.version}</version>
    </dependency>
    <dependency>
        <groupId>hu.abc.ringcore</groupId>
        <artifactId>abc-variable</artifactId>
        <version>${project.version}</version>
    </dependency>
    <dependency>
        <groupId>hu.abc.ringcore</groupId>
        <artifactId>abc-variableintf</artifactId>
        <version>${project.version}</version>
    </dependency>
    <dependency>
        <groupId>hu.foobar.ring</groupId>
        <artifactId>RateSorszamIntf</artifactId>
        <version>${ringcore-services.version}</version>
    </dependency>
</dependencies>

<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-source-plugin</artifactId>
            <version>2.2.1</version>
            <executions>
                <execution>
                    <goals>
                        <goal>jar</goal>
                    </goals>
                    <phase>package</phase>
                </execution>
            </executions>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-eclipse-plugin</artifactId>
            <version>2.9</version>
            <configuration>
                <downloadSources>true</downloadSources>
                <downloadJavadocs>true</downloadJavadocs>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

foob​​ar-common pom.xml 如下：

```
<project>
    <modelVersion>4.0.0</modelVersion>
    <name>Maven Default Project</name>
    <groupId>hu.foobar.ringcore</groupId>
    <artifactId>foobar-common</artifactId>
    <version>1.0</version>
    <packaging>pom</packaging>

    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <junit.version>4.10</junit.version>
        <spring.version>3.1.2.RELEASE</spring.version>
        <spring-security.version>2.0.6.RELEASE</spring-security.version>
        <commons-logging.version>1.1.1</commons-logging.version>
        <dom4j.version>1.6.1</dom4j.version>
        <javaee-api.version>6.0</javaee-api.version>
        <mycila-event.version>3.0</mycila-event.version>
        <ringcore-services.version>1.3.4-SNAPSHOT</ringcore-services.version>
        <commons-lang3.version>3.1</commons-lang3.version>
    </properties>

</project> 
```

我的问题是，如果我按预期从父 pom 属性中提取依赖项版本`mvn install`。`abc-datasource`但是，如果我`mvn install`从`abc-window`该引用中执行，`abc-datasource`则版本未解决，我得到：

```
[ERROR] Failed to execute goal on project abc-window: Could not resolve dependencies for project hu.abc.ringcore:abc-window:jar:1.0-SNAPSHOT: Failed to collect dependencies for [junit:junit:jar:4.10 (test), hu.abc.ringcore:abc-datasource:jar:1.0-SNAPSHOT (compile)]: Failed to read artifact descriptor for org.apache.commons:commons-lang3:jar:${commons-lang3.version}: Could not transfer artifact org.apache.commons:commons-lang3:pom:${commons-lang3.version} from/to central (http://repo.maven.apache.org/maven2): IllegalArgumentException: Illegal character in path at index 70: http://repo.maven.apache.org/maven2/org/apache/commons/commons-lang3/${commons-lang3.version}/commons-lang3-${commons-lang3.version}.pom 
```

两个项目都有相同的父 pom，所以为什么它不起作用..？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T21:19:37.753

`dependencyManagment`在父 pom 中 使用

```
<dependencyManagement>
  <dependencies>
    <dependency>
       <groupId>junit</groupId>
       <artifactId>junit</artifactId>
       <version>${junit.version}</version>
    </dependency>
    <dependency>
       <groupId>org.apache.commons</groupId>
       <artifactId>commons-lang3</artifactId>
       <version>${commons-lang3.version}</version>
    </dependency>
    </dependencies>
  </dependencyManagement> 
```

在父 pom 中添加所有版本，并在子 pom 中使用没有版本的依赖项

**编辑**

```
/pom.xml                 <-parent pom
/abc-window/pom.xml     <-child module  
/abc-datasource/pom.xml <-child module 
```

并且父 pom 应该包含

```
<project  
...  
   <properties>   
    ... 
   </properties>  
   <modules>  
      <module>abc-datasource</module>
      <module>abc-window</module>  
   </modules>   
   <build>
      <pluginManagment>   
       ...
      </pluginManagment>
   </build>
   <dependencyManagment>
    ...  
   </dependencyManagment>  
</project> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T21:21:24.463

abc-window 中的父级列为：

```
 <parent>
            <relativePath>../foobar-common/pom.xml</relativePath>
            <groupId>hu.abc.ringcore</groupId>
            <artifactId>foobar-common</artifactId>
            <version>1.0</version>
        </parent> 
```

abc-datasource 中的父级列为：

```
<parent>
    <relativePath>../foobar-common/pom.xml</relativePath>
    <groupId>hu.ratesoft.ringcore</groupId>
    <artifactId>foobar-common</artifactId>
    <version>1.0</version>
</parent> 
```

因此，它们没有相同的 groupId。

# ios - 我应该创建一个自定义 UITableViewCell 吗？

> ID：13828624
> 
> 赞同：1
> 
> 时间：2012-12-11T21:14:57.967
> 
> 标签：ios, uitableview

如何将 UITableViewCellEditingStyleInsert 默认图像更改为自定义创建的？

有没有简单的方法或者我应该创建一个自定义 UITableViewCell？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T21:27:41.467

标准 API 不支持以任何方式自定义用于`UITableViewCellEditingStyleInsert`.

您唯一的选择是使用您自己添加到单元格的按钮。您将无法使用`UITableView`. 当点击自定义按钮时，您需要将单元格的编辑样式设置为`None`并使用您自己的方法。

# php - 从另一个模块访问实体/存储类

> ID：13828625
> 
> 赞同：0
> 
> 时间：2012-12-11T21:14:59.013
> 
> 标签：php, model-view-controller, ppi

是否可以从另一个模块访问实体/存储类，或者我应该在需要它们的每个模块中创建相同的类？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T21:19:57.080

您应该在模块的 Module.php 文件中的 getServiceConfig() 方法下将存储类设置为“服务”。

```
public function getServiceConfig()
{
    return array('factories' => array(

        'user.storage' => function($sm) {
             return new \UserModule\Storage\User($sm->get('datasource'));
         }
    );
 } 
```

现在服务 'user.storage' 存在于系统范围内，您可以使用 $sm->get('user.storage') 在任何其他服务声明中使用它，或者从您的控制器中调用 getService() 来获取您的服务.

```
public function indexAction()
{
    $us = $this->getService('user.storage');
    $user = $us->getByID($this->getRouteParam('id'));
    $this->render('UserModule:index:index.html.php', compact('user'));
} 
```

希望这可以帮助。谢谢。

# drupal - Drupal 7 中有没有办法阻止管理员编辑节点？

> ID：13828629
> 
> 赞同：2
> 
> 时间：2012-12-11T21:15:54.520
> 
> 标签：drupal, drupal-7

我有一个以编程方式创建（和更新）Drupal 7 节点的模块。

由于主体的内容是由程序以随机​​间隔更改的，因此我不希望任何人（包括管理员）能够编辑它们。有没有办法完全“关闭”允许管理员编辑节点的界面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T21:35:48.200

如果它是具有管理员角色的标准用户，您可以[`hook_node_access()`](http://api.drupal.org/api/drupal/modules!node!node.api.php/function/hook_node_access/7)在自定义模块中实现：

```
function MYMODULE_node_access($node, $op, $account) {
  $type = is_string($node) ? $node : $node->type;
  if ($type == 'the_type' && $op == 'update') {
    return NODE_ACCESS_DENY;
  }
  return NODE_ACCESS_IGNORE;
} 
```

如果它是“超级用户”（用户 1），您需要获得更多创意，因为该用户绕过了许多访问检查。

您可以实现[`hook_menu_alter()`](http://api.drupal.org/api/drupal/modules%21system%21system.api.php/function/hook_menu_alter/7)覆盖节点编辑页面的访问回调，并提供您自己的：

```
function MYMODULE_menu_alter(&$items) {
  $items['node/%node/edit']['access callback'] = 'MYMODULE_node_edit_form_access';
}

function MYMODULE_node_edit_form_access($node) {
  $type = is_string($node) ? $node : $node->type;
  if ($type == 'my_type') {
    return FALSE;
  } 
  return node_access('update', $node);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T12:25:24.323

我喜欢 Clive 的两个建议，但另一种选择是简单地使用 HOOK_form_alter 禁用字段。这也适用于用户 1 帐户。我最近使用它来禁用我不希望任何人修改的特定字段。

```
function YOURMODULE_form_alter(&$form, &$form_state, $form_id) {
  if ($form_id == 'your_form_id') {
    $form['body_field']['body']['#disabled'] = TRUE;
    $form['body_field']['body']['#value'] = $form['body_field']['body']['#default_value'];
  }
} 
```

诚然，如果由于预告片而使用内置 body 字段，则此解决方案并不理想。但是，如果您想禁用某些字段的编辑，同时保持节点的其他方面可编辑并且页面保持不变，那么它会非常有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T22:20:21.123

我不确定你为什么需要他们成为管理员。老实说，这个角色应该留给拥有绝对控制权的人——即使是那些人也不应该把它用作他们的“主要”账户，因为它可能会破坏事物。为什么不只是创建一个“编辑”角色或类似的角色，并提供您需要的所有权限？

# objective-c - 绘制前不要清除上下文

> ID：13828633
> 
> 赞同：3
> 
> 时间：2012-12-11T21:16:20.227
> 
> 标签：objective-c, ios, drawing, graphicscontext

我试图找到一种在视图上绘制线条而不重绘所有上下文的方法。

这是我的绘图方法：

```
-(void)drawInContext:(CGContextRef)context {
    for (int i = 0; i < self.drawings.count; ++i) {
        Drawing* drawing = [self.drawings objectAtIndex:i];

        CGContextSetStrokeColorWithColor(context, drawing.colorTrait.CGColor);
        CGContextSetLineWidth(context, 1.0);

        CGContextMoveToPoint(context, [[drawing.points objectAtIndex:0] CGPointValue].x * self.zoomScale, [[drawing.points objectAtIndex:] CGPointValue].y * self.zoomScale);

        for (int i = 1; i < drawing.points.count; i++) {
            CGContextAddLineToPoint(context, [[drawing.points objectAtIndex:i] CGPointValue].x * self.zoomScale, [[drawing.points objectAtIndex:i] CGPointValue].y * self.zoomScale);
        }

        CGContextStrokePath(context);
    }
}

-(void)drawRect:(CGRect)rect {
    if (isRedrawing) {
        [self drawInContext:UIGraphicsGetCurrentContext()];
        isRedrawing = NO;
    }

    [[UIColor redColor] set];
    [currentPath stroke];
} 
```

但是当我在我的 touches 方法中调用 setNeedsDisplay 时，视图被完全清除了。有没有办法让我的方法奏效？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T23:08:09.793

无论好坏，我都使用图层：

```
- (void)drawRect:(CGRect)rect {

    CGContextRef context = UIGraphicsGetCurrentContext();

    if (first) {

        // Wait for the first call to get a valid context

        first = NO;

        // Then create a CGContextRef (offlineContext_1) and matching CGLayer (layer_1)

        layer_1 = CGLayerCreateWithContext (context,self.bounds.size, NULL);    
        offlineContext_1 = CGLayerGetContext (layer_1);

        // If you have any pending graphics to draw, draw them now on offlineContext_1

    }

    // Normally graphics calls are made here, but the use of an "offline" context means the graphics calls can be made any time.

    CGContextSaveGState(context);

    // Write whatever is in offlineContext_1 to the UIView's context 

    CGContextDrawLayerAtPoint (context, CGPointZero, layer_1);
    CGContextRestoreGState(context);

} 
```

这个想法是，虽然 UIView 的上下文总是被清除，但与 Layer 关联的离线上下文却没有。您可以继续累积图形操作，而不会被 drawRect 清除。

编辑：所以你已经指出了你的问题和我解决的问题之间的一个区别。在第一次显示之前我不需要绘制任何东西，而您想在第一次显示之前绘制一些东西。据我所知，您可以随时以任何大小和分辨率创建图层。我发现最简单的方法是等待将有效上下文（具有当前设备的正确设置）传递给我，然后根据该上下文创建一个新的上下文/层。查看“if (first)”块的内部。

您可以做同样的事情，但您还必须缓存从服务器获取的行等，直到第一个 drawRect: 被调用。然后，您可以使用给定的上下文创建离线上下文，将您从服务器获得的线等绘制到离线上下文，然后绘制图层，如下所示。因此，您要添加到该方法的唯一内容是在“if (first)”循环中调用以在继续之前绘制待处理的服务器源图形（请参阅源代码中添加的注释）。

# android - Android 可以有多个监听器吗？

> ID：13828636
> 
> 赞同：0
> 
> 时间：2012-12-11T21:16:27.630
> 
> 标签：android

假设我有 5 个按钮。对于每个按钮，我希望能够触发一个侦听器。一旦监听器被触发，我想在我的 sdk 中触发一个异步任务，然后让 sdk 返回异步任务的状态。

1）我写一个单独的监听器/按钮吗？我在某处读到我只能在 android 中注册一个侦听器，如果那是真的，我该如何处理许多侦听器？

2) 如何将 SDK 的 postExecute 调用结果返回到 api 层？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T21:22:54.930

> 1）我写一个单独的监听器/按钮吗？我在某处读到我只能在 android 中注册一个侦听器，如果那是真的，我该如何处理许多侦听器？

一个 View 只能有一个每种类型的监听器，即一个 Button 不能有两个`OnClickListeners`。不要将此与一个侦听器可以附加到多个视图这一事实混淆，即 ButtonA 和 ButtonB 可以具有相同的`OnClickListener`

> 2) 如何将 SDK 的 postExecute 调用结果返回到 api 层？

你的术语不正确，但你会在你去的时候弄明白。通常`onPostExecute()`会调用另一个方法或直接使用视图：

```
@Override
protected void onPostExecute(String result) {
    doSomething(result);
    textView.setText(result);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T21:22:22.013

最简单的方法是在活动中设置一个侦听器，然后处理多个按钮。您可以使用[OnKeyListener](http://developer.android.com/reference/android/view/View.OnKeyListener.html)类执行此操作。然后，您对按下哪个键进行切换，为您希望操作的按钮设置案例，然后启动您的`AsyncTask`.

我不太确定“返回 postExecute”是什么意思。但是，如果您查看[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)，您会看到如何使用正确的参数将结果返回到 onPostExecute。当您实例化您的子类时，`AsyncTask`您可以轻松地传递您希望执行回调的活动或上下文。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T21:24:26.633

您可以有多个侦听器，根据您想对它们做什么，您可以为每个按钮设置一个。至于`postExecute()`，它在 UI 线程上运行，因此您可以从那里显示结果或做任何您想做的事情。有关更多详细信息，您需要提供一些您尝试过的代码，并准确说明您遇到问题的地方。如果您还没有，请通过

**[关于入门的 Android 文档](http://developer.android.com/design/index.html)**

**[这个链接描述了 AsynTask](http://developer.android.com/reference/android/os/AsyncTask.html)**

# asp.net-mvc - 无法在实体框架模型中的 MVC 4 模板中使用 UserProfile？

> ID：13828638
> 
> 赞同：5
> 
> 时间：2012-12-11T21:16:32.113
> 
> 标签：asp.net-mvc, entity-framework, asp.net-mvc-4

我正在尝试创建一个自定义模型（例如博客文章），该模型与 MVC 4 模板中用于注册和 oAuth 身份验证的 WebSecurity 功能使用的实体“UserProfile”相关。

下面的例子：

```
public class Post
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int Id { get; set; }
    public string Detail { get; set; }
    public UserProfile User { get; set; }
} 
```

我能够正确地将当前的 UserProfile 与博客文章相关联，如下所示：

```
post.User = user = db.UserProfiles.FirstOrDefault(u => u.UserName.ToLower() == WebSecurity.CurrentUserName);
db.Posts.Add(post);
db.SaveChanges(); 
```

但是当我尝试从数据库中获取博客文章时，我为用户获取了一个空对象：

```
var post = db.Posts.Where(x => x.Id == postId).FirstOrDefault();
post.User is null! 
```

我相信这是因为创建 SimpleMembershipProvider 时在数据库中创建的关系：

```
WebSecurity.InitializeDatabaseConnection("DefaultConnection", "UserProfile", "Id", "UserName", autoCreateTables: true); 
```

我确定必须有一种方法可以忽略这些或在我的博客类的 User 属性中添加一个属性来克服这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T21:53:20.567

由于您没有使用急切加载（例如通过使用 .include），因此您必须将 User 属性设置为**virtual**，因此它可以由 EF 延迟加载（默认情况下，延迟加载已为 DataContext 启用 - 所以如果您没有更改此设置，延迟加载应该可以工作）。

```
public class Post
{
    ...
    public virtual UserProfile User { get; set; } // navigation properties need to be virtual to support lazy loading
    ...
} 
```

如果您不想延迟加载，则需要**包含**Navigation（并执行**预加载**）属性，例如：

```
var postWithUser = db.Posts
                           .Include(p => p.User)
                           .Where(x => x.Id == postId)
                           .FirstOrDefault(); 
```

您可能会发现[这篇关于延迟/急切加载的文章](http://msdn.microsoft.com/en-us/data/jj574232.aspx)很有趣（或者只是谷歌搜索 EF 和延迟/急切加载）

# automake - 如何使用 Automake 为“noinst”类型的库设置 LDFLAGS？

> ID：13828639
> 
> 赞同：4
> 
> 时间：2012-12-11T21:16:37.253
> 
> 标签：automake, ldflags

假设我开发了**libfoo.a**作为编译过程的中间步骤。这是 Makefile.am 中的一行：

```
noinst_LIBRARIES = libfoo.a 
```

这个库依赖于其他库。为了防止我得到未定义的引用错误，我需要设置它的**LDFLAGS**变量。这是我所做的：

```
libfoo_a_LDFLAGS = `pkg-config --ldflags some_lib` 
```

但是，automake 失败并显示以下消息：

```
variable `libfoo_a_LDFLAGS` is defined but no program or library has `libfoo_a` as canonical name (possible typo) 
```

我在这里做错了什么？它适用于**libfoo_a_SOURCES**和**_CFLAGS**。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T07:00:47.933

使用简单的 *.a 中间库是不可能做到这一点的。那是因为中间库从不链接，所以`LDFLAGS`对它没有意义。中间库只是一个 ar 档案，它只是一个目标文件的集合。ar 档案没有地方记录需要用于链接最终对象的标志。

正常的解决方案是按照 William Pursell 的建议：将必要的内容添加`LDFLAGS`到您在构建过程中创建的最终可执行文件或共享库中。

另一种可能性是将您的中间库构建为 libtool *.la 库，即使您只打算将它们用作中间库。当您这样做时，构建系统将生成一个共享对象（您最终不会使用它，因为您会将底层对象文件组合到您的实际构建工件中），但更重要的是它将创建一个 *.la 文件，它有一个地方记录这种依赖信息。Automake 手册称其为“Libtool 便利库”。为此，您当然必须使用 libtool，然后切换到`libfoo.la`在您的文件中调用`Makefile.am`它并在`noinst_LTLIBRARIES`. 但是除非您已经在使用 libtool，否则这可能比它的价值更麻烦。

# php - Preg_match 使用 PREG_OFFSET_CAPTURE 返回每个匹配的位置数组

> ID：13828640
> 
> 赞同：-2
> 
> 时间：2012-12-11T21:16:44.187
> 
> 标签：php, function, preg-match

返回位置数组时遇到问题：

```
function returnPosition($string,$start){ 
     preg_match('/' . preg_quote($start, '/').'/im', $string, $m, PREG_OFFSET_CAPTURE);

    $startArr = array();

    foreach ($m as $value)
    {
        $startArr = array_push($startArr, $m);
    }
    //var_dump($startArr);
    return $startArr;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T21:19:51.463

毫不奇怪，您[使用 array_push wrong](http://php.net/array_push)。它不**返回**修改后的数组。它返回数组中元素的新数量，因此在每次迭代中，您都会丢弃曾经是具有 int 的数组的内容。尝试

```
$startArr[] = $m; 
```

或者至少只是

```
array_push($startArr, $m); 
```

完全没有任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T18:07:35.887

找到了适合我的东西：

```
function getTagPositions($strBody, $start, $end)
{
    preg_match_all('/' . preg_quote($start, '/') . '([\w\s.]*?)'. preg_quote($end, '/').'/im', $strBody, $strTag, PREG_PATTERN_ORDER);
    $intOffset = 0;
    $intIndex = 0;
    $intTagPositions = array();

    foreach($strTag[0] as $strFullTag) {
        $intTagPositions[$intIndex] = array('start' => (strpos($strBody, $strFullTag, $intOffset)), 'end' => (strpos($strBody, $strFullTag, $intOffset) + strlen($strFullTag)));
        $intOffset += strlen($strFullTag);
        $intIndex++;
    }
    return $intTagPositions;
}

$intTagPositions = getTagPositions("hello there hello hello","he","lo");
// returns
Array ( [0] => Array ( [start] => 0 [end] => 5 ) [1] => Array ( [start] => 7 [end] => 17 ) [2] => Array ( [start] => 18 [end] => 23 ) ) 
```

# iphone - UITableViewCell 背景视图/图像

> ID：13828643
> 
> 赞同：2
> 
> 时间：2012-12-11T21:16:53.033
> 
> 标签：iphone, objective-c, image, uitableview

我在哪里设置 cellForRowAt 中 tableview 单元格的 backgroundImage .. 我该怎么做？我就是这样做的，它有点工作，但我想知道设置背景图像（）的正确方法是正确的，它是在“如果”的`cell.backgroundView`内部还是外部。？`if(cell==nil)`

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {    
    static NSString *cellIdentifier = @"RootViewCellIdentifier";

    UITableViewCell *cell = [_tableView dequeueReusableCellWithIdentifier:cellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:cellIdentifier];

        cell.backgroundView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"image1.png"]];
    }

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T21:59:26.753

曾经这样做，但现在我更喜欢**willDisplayCell**：

```
- (void)tableView:(UITableView *)tableView
  willDisplayCell:(UITableViewCell *)cell
  forRowAtIndexPath:(NSIndexPath *)indexPath
{
    cell.backgroundColor = [UIColor redColor];
} 
```

文档说

> 表格视图在使用单元格绘制行之前将此消息发送给其委托人，从而允许委托人**在单元格对象显示之前对其进行自定义**。此方法使委托有机会**覆盖**先前由表视图设置的基于状态的属性，例如选择和背景颜色。委托返回后，表格视图仅设置 alpha 和 frame 属性，然后仅在为滑入或滑出的行设置动画时。

使用 cellForRowAtIndexPath 时，有一些奇怪的特殊情况，其中单元格自定义无法完全按照我的意愿工作。willDisplayCell 没有这样的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T04:32:22.083

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath  *)indexPath {  
[cell.imageview setImage:[UIImage imageNamed:@"image1.png"]];
   }
return cell; 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T05:38:50.330

试试这个可能会有所帮助......

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {    
    static NSString *cellIdentifier = @"RootViewCellIdentifier";

    UITableViewCell *cell = [_tableView dequeueReusableCellWithIdentifier:cellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:cellIdentifier];

         UIImageView *backimg = [[UIImageView alloc] init];
        backimg.frame = CGRectMake(0, 0, 320, 44);
        backimg.tag = 20;
        [cell.contentView addSubview:backimg];
    }
    UIImageView *imag = (UIImageView *)[cell.contentView viewWithTag:20];
    [imag setImage:[UIImage imageNamed:@"sky.png"]];
    return cell;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-12T00:08:01.727

为单元格设置背景视图的最佳位置是 tableView:willDisplayCell:forRowAtIndexPath: 方法。

```
- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath
{
    cell.backgroundView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"image1.png"]];
} 
```

# css - IE8：用什么代替 nth-of-type(n)？

> ID：13828644
> 
> 赞同：11
> 
> 时间：2012-12-11T21:17:01.600
> 
> 标签：css, internet-explorer-8, css-selectors

我继承了以下 CSS 代码来最初隐藏一系列段落和一系列列表项的后面元素。

```
.profileSection p:nth-of-type(n+2) {
    display: none;
}

.profileSection li:nth-of-type(n+6) {
    display: none;
} 
```

显然，这段代码在 IE8 中不起作用。隐藏这些元素的替代方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T21:25:32.217

这是一个关于它的讨论：

[http://www.thebrightlines.com/2010/01/04/alternative-for-nth-of-type-and-nth-child/](http://www.thebrightlines.com/2010/01/04/alternative-for-nth-of-type-and-nth-child/)

作者提到您可以通过使用来引用特定的子元素

```
tagname + tagname + etc 
```

或者通过使用获得通用孩子

```
* + * + etc 
```

我个人只会为这些项目添加一个特殊的类。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T23:24:42.940

`+`，[相邻兄弟选择器](https://developer.mozilla.org/en-US/docs/CSS/Adjacent_sibling_selectors)，将允许您选择所有**直接**相邻的兄弟。在你的情况下：`.profileSection p+p`。（如果您必须这样做，请考虑将其包装在某些东西中以防止其他浏览器看到它，例如[条件注释](http://reference.sitepoint.com/css/conditionalcomments)。）

但是，如果您的标记包含的元素不是彼此相邻的元素，`+`那将无济于事。`<p>`例如：

```
<p>Alpha</p>
<h4>Header</h4>
<p>Beta</p> 
```

如果您在站点上还没有某种[shiv](http://code.google.com/p/html5shiv/)或[modizr](http://modernizr.com/)功能（这将有助于解决许多其他类似问题），最简单的方法是向元素添加一个特殊类，然后选择使用该类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T21:41:45.577

您还可以尝试下载并包含[selectivizr](http://selectivizr.com/)，它使 css3 选择器在 IE6-8 中工作

# scala - Scala请求响应消息设计中的类型继承误解

> ID：13828647
> 
> 赞同：1
> 
> 时间：2012-12-11T21:17:27.230
> 
> 标签：scala, design-patterns, generics, inheritance, matching

我正在尝试用 scala 制作一个小型消息传递系统。我不知道如何在线解决这个类/类型/泛型/层次结构问题 //PROBLEM

逻辑是：请求有一个函数列表，当响应到达时调用。当 Response 到达时，调用 getResult 并使用模式匹配。似乎我无法从 Request 列表中调用可以被任何子类型 Response 重载的函数？

```
object Worksheet {
    class Request {
        //var op = List[( _<:Response ) => Unit]()
        var op = List[Response => Unit]()             // FIXED
    }
    class Response {}
    class MyResult extends Response {}
    class AnotherMyResult extends Response {}

    val map = Map[String, Request]()                  

  def getResult(a:Any) {
    a match {
            ...
        case r:Response =>
            //map.get("").get.op foreach ((o) => o(r)) //PROBLEM 
                      map("").op foreach ((o) => o(r))        //NO PROBLEM 
            ...
    }
  }                                               
} 
```

请帮忙 ;）

编辑

```
 def simpleop (r:MyResult) : Unit = { }

  def req = new Request()
  req.op += simpleop _                      //PROBLEM STILL

  map += ("" -> req) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T21:42:20.320

你不能`simpleop`用 type 的参数调用方法`Response`，所以你不能同时拥有:`case r:Response => map("").op foreach ((o) => o(r))`和`req.op += simpleop _`.

# c - 从 C 中的结构打印 int 数组

> ID：13828650
> 
> 赞同：1
> 
> 时间：2012-12-11T21:17:38.630
> 
> 标签：c

我正在尝试从文件中读取结构，然后显示（和排序）和数组。我遇到了麻烦，但我认为这与我没有访问正确的内存有关。当我打印数组时，它会出现大量随机数。

```
struct details
{
    int numberOfPresents;
    int numberOfBuildings;
    int buildings[];
};

void print_int_array(const int *array) 
{ 
    for(int i=0; i<200; i++) 
        printf("%d | ", array[i]);

    putchar('\n');
} 

void sort(int buildings[], int count)
{
    int i, j, temp;
    do {
        j = 0;  
        for (i = 0;i<count-1;i++)
        {
            if (buildings[i] < buildings[i+1])
            {
                j = 1;
                temp = buildings[i];
                buildings[i] = buildings[i+1];
                buildings[i+1] = temp;
            }
        }
    } while (j == 1);
}

int main()
{
    FILE *fp;
    fp = fopen("buildings.out", "r");   
    struct details data1;
    size_t structSize = sizeof(struct details);
    //size_t arraySize = sizeof(int)*sizeof(buildings);
    fread(&data1, structSize, 1, fp);
    for(int i=0; i<200; i++) 
        printf("%d | ", data1.buildings[i]);

    //sort(data1.buildings );
    //print_int_array(data1.buildings, arraySize);
    //printf("Number of Houses: %d\n",numberOfHouses(data1.numberOfPresents, data1.buildings));
    fclose(fp);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T21:30:57.123

您的结构的大小仅包括数组的最小分配（我认为是一个条目）。它实际上并没有为您想要的 200 个条目分配足够的空间。有一些可能的修复。

如果总是 200 个条目，那么只需将建筑物声明为大小为 200。这是最简单的。

如果您在阅读之前知道条目数，那么您可以做一些不愉快的事情，例如（s 是条目数）：

```
struct details *data1 = (struct details *) malloc(sizeof(struct details)+s*sizeof(int)); 
```

完成后免费数据1。这种类型的代码通常不受欢迎，但过去很常见。读取命令也变得复杂。

最后的选择是将建筑物更改为 int*，然后在读取之前对该数组进行 m​​alloc。同样，读取必须在循环中完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T21:29:01.590

您有两个问题不利于您打印数据。

*   没有为记录分配足够的空间。
*   没有为记录读取足够的数据。

该行`struct details data1`仅在堆栈上为`struct`. 你需要足够的 200 个。我会立即建议一个数组。

```
struct details data1[200]; 
```

当您执行读取时`fread(&data1, structSize, 1, fp)`，您只会读取一条大小为 的记录`structSize`。现在您已经分配了足够的内存来读取 200 条记录，您也可以将正在读取的记录数增加到 200 条。

```
fread(data1, structSize, 200, fp); 
```

（请注意，我们删除了 ，`&`因为我们现在正在处理一个数组。如果您只是按名称引用它们，数组会自动返回它们的基地址。）

现在，如果您的文件中没有 200 条记录怎么办？您可能需要捕获 的返回值`fread()`以确定您实际读取了多少条记录。

```
int intNumberOfRecords = fread(&data1, structSize, 200, fp);
for(int i=0; i<intNumberOfRecords ; i++)
  [...] 
```

现在我们已经开始工作了，我们可以更仔细地看看它`srtuct`本身。我们在定义方面遇到了挑战，我们无法轻易克服。

```
struct details{
    int numberOfPresents;
    int numberOfBuildings;
    int buildings[];
}; 
```

最后一个成员 ,`buildings[]`不会从文件中正确读取。这是因为它在 32 位内存模型中充其量只是一个 32 位整数。换句话说，您将从磁盘读取的只是一个指向内存中某处的 32 位数字。你最终不会得到一个包含建筑物的数组。如果您尝试访问它（即在您的`sort`例程中），您很可能会出现段错误，并且您的程序将永远无法运行。尝试为此发布通用解决方案有点超出我的回答范围。可以这么说，您要么必须使用固定大小的数组，要么将可变大小的数组动态写入磁盘（可变长度记录）。固定大小的数组会容易得多。如果我们将您的定义更改为以下内容，我们将从磁盘加载一些数据。

```
struct details{
    int numberOfPresents;
    int numberOfBuildings;
    int buildings[16];
}; 
```

我们也会避免 seg-faulting，这是一个很好的加分项。但是，我不知道您的输入文件是什么样的，所以我不知道这是否会根据您的数据起作用。

# gwt - DevMode中GWT Internal Jetty Server的bin文件夹在哪里？

> ID：13828653
> 
> 赞同：2
> 
> 时间：2012-12-11T21:17:50.133
> 
> 标签：gwt, jetty

我需要在 DevMode 的 Jetty 服务器的起始路径中放置一些属性文件（库所需的配置文件），但无法弄清楚将它们放在哪里。我应该把它们放在哪里？

我用谷歌搜索但没有运气。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T23:53:38.247

If you use maven in your project, placing them in the src/main/resources should work.

Otherwise put it in your WEB-INF/classes

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T02:22:36.667

您需要共享您的项目设置信息。马文？还要提及属性文件是用于应用程序还是码头以及您要实现的目标。

如果它是特定于项目的，您也可以尝试将属性文件放在 web-inf/classes 中。

我猜你没有使用任何标准的 GWT 项目设置。即使您解决了这个问题，也很难继续进行下去。我建议您应该使用 gwt 标准设置。[您可以从此处](http://code.google.com/p/google-web-toolkit/downloads/detail?name=gwt-2.5.0.zip&can=2&q=)引用 GWT 示例文件夹。

![如果](../Images/c084d2a82f284670a369f50a60165736.png)

使用设置为模板的 Hello 项目。如果您是初学者，还请阅读[https://developers.google.com/web-toolkit/doc/latest/RefCommandLineTools#webAppCreator](https://developers.google.com/web-toolkit/doc/latest/RefCommandLineTools#webAppCreator)。

# c++ - QFormLayout 中的 QSpacerItem - 垂直展开

> ID：13828657
> 
> 赞同：6
> 
> 时间：2012-12-11T21:18:05.150
> 
> 标签：c++, qt

我想在我的 . 中强制扩大空间`QFormLayout`，但无论如何`QFormLayout`只能使用`QSpaceItem::sizeHint()`. 有谁知道解决这个问题的方法，或者处理这个问题的正确方法？

* * *

```
MyWidget::MyWidget(QWidget *parent) : QWidget(parent)
{
   SetupLayout();
}

void MyWidget::SetupLayout()
{
   QFormLayout * layout = new QFormLayout();

   layout->addRow("Something1", new QComboBox());
   layout->addRow("Something2", new QSpinBox());

   //Spacer
   layout->addItem(new QSpacerItem(0,10, QSizePolicy::Expanding, QSizePolicy::Expanding));

   layout->addRow(QPushButton("Something3"));

   setLayout(layout);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T23:11:18.717

经过大量手动操作以及大量尝试后，我想使用 QFormLayout 做你想做的事情是不可能的。

此布局适用于需要填充大量字段的窗口，但仅用于此目的。

如果您想在表单的各个部分之间添加更大的间距，您可以使用 QVBoxLayout，其中有几个 QFormLayout，由间距分隔。请注意，在这种情况下，每个部分都有自己的第一列和第二列宽度，因此这可能不是最佳解决方案。

另一种解决方案（如果我们正在讨论对某些选项进行分组）是使用几个 QGroupBoxes 和 QFormLayouts 。这些组不会通过增加间距来分隔，但它会非常易读，您可以命名您的组。如果分组选项是您想要做的 - 这可能是最常见且用户友好的方式。

如果您只想要您指出的视觉效果 - 每个部分中具有相同宽度的列和部分之间的间距增加，您可以使用带有 2 列的 QGridLayout 并在部分之间的行中添加间隔。在这种情况下，您必须自己创建 QLabel 放入第一列。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T19:19:15.487

所以有几个不同的问题：

1.  `QFormLayout`不要像其他布局一样扩展。我的小部件（其中一些）被放入`QFormLayout`. 这阻止了他们的扩张。我将我的主要父布局从 切换`QFormLayout`到`QVBoxLayout`. 这让我不得不使用`QLayout::setAlignment(Qt::AlignTop)`
2.  这解决了我的一些其他小部件没有扩展的一些问题。但是这些小部件使用`QVBoxLayout`。上面的小部件使用`QFormLayout`. 为了得到这个扩展，我必须在我的`QSpacerItem`：

`QSpacerItem * my_spacer = new QSpacerItem(0,1000, QSizePolicy::Expanding, QSizePolicy::Expanding);`

* * *

我正在提供一些示例代码。目标是显示层次结构，以及 QFormLayout 会导致麻烦的地方。

示例代码：

```
//A main Widget class
void SetupLayout()
{
   QHBoxLayout * main_layout = new QHBoxLayout();

   main_layout->addWidget(Some_Widget);

   //Create a control widget
   control_widget = new QWidget();  // IMPORTANT control_widget is a member
   QVBoxLayout * layout = new QVBoxLayout(); //IMPORTANT!!!! - Here it was QFormLayout

   layout->setAlignment(Qt::AlignTop); //IMPORTANT - Needed this after switching to QVBoxLayout

   layout->addWidget(new QComboBox("stuff")); //Some combo box
   control_widget->setLayout(layout);

   main_layout->addWidget(control_widget);
}

//Later on, we have a "Put a new widget in the control area" task
void NewControlArea()
{
   if(current_control)
      control_widget->removeWidget(current_control);  //current_control is a member variable

   current_control = new MyWidget();  //FROM ABOVE
   control_widget->addWidget(current_control);
} 
```

如果`MyWidget`使用 a `QFormLayout`，除非我添加带有大小提示的垫片，否则不会扩展。但是，如果`MyWidget`使用 a `QVBoxLayout`，则其中的任何`QWidgets`内容都会正确展开。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-09T23:21:44.980

只是为了后代，我遇到了类似的问题。我发现有一个像下面这样的组织会导致内部布局（QHBoxLayout）中的任何东西都不会像我自己将它们放到 QFormLayout 中那样垂直扩展：

```
QFormLayout
-QHBoxLayout
--QListWidget 
```

但是，如果我通过将 HBoxLayout 放入 QWidget 来添加一个间接层，那么调整大小可以正常工作：

```
QFormLayout
-QWidget
--QHBoxLayout
---QListWidget 
```

因此，您可以尝试在其中添加一个 QWidget 并将您的垫片放入其中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-06-27T09:27:24.580

我所做的可能有点骇人听闻，而且不是很优雅，但它仅在一行中就成功了：

```
addRow("  ", (QWidget*)nullptr); 
```

这将在此调用之前和之后添加的行之间的空间加倍。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-11T23:00:24.063

我怀疑`MyWidget`尺寸不对。布局将使用小部件的大小来确定如何最好地布局自己的项目。仅仅因为其中一项设置为扩展策略并不意味着布局将强制`MyWidget`扩展的大小。如果 的大小`MyWidget`是固定的，则内部布局无能为力。

如果你做得`MyWidget`更大，你应该看到布局如你所愿。也许您需要将`MyWidget`其策略设置为扩展的垂直布局？在不知道如何`MyWidget`获得它的大小的情况下，很难确定。

# c++ - 如何使用循环检查等价，然后在没有等价的情况下执行一些代码？

> ID：13828658
> 
> 赞同：1
> 
> 时间：2012-12-11T21:18:12.133
> 
> 标签：c++, design-patterns

我做了这样的事情：

```
for (vector<vector<int> > :: iterator it = result.begin(); it != it.end(); ++it) {
  if (equal(it->begin(), it->end(), triplet->begin()) {
    flag = 1;
    break;
  }
}
if (flag != 1) triplets.insert(triplet); 
```

我想知道如何在没有“标志”的情况下做到这一点。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T21:21:30.923

**编辑：**代码更改后（flag==1 vs flag!=1），这个答案**不再正确**。

因为您`break`可以将代码放在 for 中：

```
for (vector<vector<int> > :: iterator it = result.begin(); it != it.end(); ++it) {
  if (equal(it->begin(), it->end(), triplet->begin()) {
    triplets.insert(triplet);
    break;
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T21:20:58.160

您可以使用 中的[`std::none_of()`](http://en.cppreference.com/w/cpp/algorithm/all_any_none_of)功能`<algorithm>`。

```
if (std::none_of(result.begin(), result.end(), [&triplet](const vector<int> &it) -> bool {
    return equal(it.begin(), it.end(), triplet.begin());
}) {
    triplets.insert(triplet);
} 
```

这个函数接受一个范围和一个一元谓词（这里我使用的是 C++11 lambda），并根据范围中的任何元素是否返回谓词中的值来返回`true`或返回。还有其他两种变体。`false``true``std::any_of()``std::all_of()`

# android - 当 ActionBar 选项卡导航过长时，如何停止它以显示为微调器？

> ID：13828659
> 
> 赞同：12
> 
> 时间：2012-12-11T21:18:22.577
> 
> 标签：android, android-layout, android-actionbar, actionbarsherlock

我有一个带有选项卡导航的操作栏。在 3.1 上运行时一切都很好，但是一旦我在 4.1 设备上安装了应用程序，选项卡就被迫显示为微调器，破坏了我的布局设计。看起来标签占用了太多空间（如果我删除了一些片段，一切看起来都很好。有没有办法阻止这种行为并再次将导航显示为标签，就像在 android 3.1 中一样？有人知道吗？

谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-20T20:10:07.503

[我在这里](https://groups.google.com/d/msg/android-developers/2unF5lKfn64/iKUX7JbbOo4J)找到了答案。添加选项卡后必须设置导航模式。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-11T21:32:10.587

首先，澄清一下：这不是一个错误，它按预期工作。在 Google 代码论坛上参考[此](http://code.google.com/p/android/issues/detail?id=24439)讨论。

但是，我得出的解决方案是，如果您覆盖：

```
<bool name="abs__action_bar_embed_tabs">false</bool> //for ActionBarSherlock
<bool name="android:action_bar_embed_tabs">false</bool> //for default ActionBar 
```

你不会有`NAVIGATION_MODE_LIST`纵向模式。但是，您不会有嵌入的选项卡，如果您将屏幕旋转为横向，它也不会工作。默认情况下，您将嵌入标签页，因此`NAVIGATION_MODE_LIST`屏幕宽度大于 480dp。

发生这种行为（我假设）是因为嵌入的选项卡仅限于 ActionBar 的宽度，因此如果您覆盖布尔值，它将在单独的行中有选项卡并且不会折叠。但不幸的是，我无法解释为什么这在横向上不起作用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-09-26T11:13:58.397

据我了解，如果您有许多选项卡并希望它们始终可滚动，您应该考虑使用**ViewPager + PagerTitleStrip 。**这是来自 ttps://code.google.com/p/android/issues/detail?id=24439#c9 的引用：

> 如果您的 UI 包含许多选项卡，以至于您经常点击滚动选项卡或折叠到微调框，您可能会考虑使用 PagerTitleStrip 作为指示器而不是完整选项卡，以便以不那么混乱的方式呈现此信息。如果显示的选项卡集在用户控制之下，这将特别有用。可点击标签在 YouTube 应用程序中存在小的、有界的集合时效果最佳。滚动标签条失去对任何标签的一键式访问，这是它们相对于简单标题条的主要优势。PagerTitleStrip 样式的示例可以在 Android Market 和 Google+ 应用程序中找到。

我不建议使用技巧，因为没有人保证技巧会稳定运行。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-11T21:27:27.740

对不起，但你无法阻止这一切。据谷歌称，这是一项功能，而不是错误。请参阅：[http ://code.google.com/p/android/issues/detail?id=24439](http://code.google.com/p/android/issues/detail?id=24439)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-12T04:30:00.133

如果您真的想仍然使用选项卡并阻止它折叠成微调器，那么如果您碰巧为选项卡设置了 customView，则在技术上可以使用反射：

```
View v = <your custom tab view>;
Tab tab = actionBar.newTab().setCustomView(v);
    do{
       v = (View)v.getParent();                 
    } while (v!=null && !v.getClass().getSimpleName().equalsIgnoreCase("ScrollingTabContainerView"));

if(v!=null) {
    try {
        Method allowCollapse = v.getClass().getDeclaredMethod("setAllowCollapse", new Class[] { Boolean.TYPE });
        allowCollapse.setAccessible(true);
        allowCollapse.invoke(v, new Object[]{ false });                         
    } catch (Exception e) {
    }
} 
```

如果没有足够的空间，选项卡将在 ActionBar 中滚动。选项卡和任何菜单操作项的屏幕宽度为 1/2，因此您可以计算选项卡是否最终滚动并调整选项卡、菜单操作项标签等或强制选项卡进入堆叠模式以避免滚动选项卡...或者如前所述，使用 PagerTitleStrip 代替。

# ruby-on-rails-3 - REE 1.8.7-2011.03，是否 `Enumerator#each` 保证以与 `Enumerable#to_a` 相同的顺序返回元素

> ID：13828660
> 
> 赞同：0
> 
> 时间：2012-12-11T21:18:27.647
> 
> 标签：ruby-on-rails-3, activerecord, ruby-enterprise-edition

我遇到了一个问题，即来自 ActiveRecord 关联的记录以我没想到的顺序返回。这很容易解决，但是一些已经在生产中的代码假设有一定的顺序，而这个顺序对我来说很重要——事实上它很关键。

我已经缩小了将旧东西修复到这个基本问题的方法：如果保证“Enumerable#each”在关联上返回一致的 ActiveRecord 记录顺序，那么至少我知道我正在处理一个持续损坏的问题假设，这是可以修正的。如果不能保证，那么我可能会被冲洗掉。

所以我的问题是，在 Ruby Enterprise Edition，Release 2011.03 中，该`Enumerable#each`方法是否以与我调用相同的顺序返回 Enumerable 中的元素`Enumerable#to_a`（在`Object`

我已经从 github 下载了 REE 代码，并检查了这个版本的标签（并且我已经验证我在我的开发、登台和生产环境中使用相同的 Ruby 版本）。问题是我读C不是很好，所以我只能说我很有信心顺序是一样的，但是我的C阅读能力不是很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T21:24:33.997

是的，这是有保证的；`#to_a`实际上只是收集结果`#each`并将它们返回到一个新数组中。

enum_to_a 创建一个新数组，然后`collect_all`作为块参数调用它自己的`each`. `collect_all`只需执行`rb_ary_push(ary, i);`，它将给定值推送到创建的数组上。在 Ruby 中，这将是：

```
array = []
enum.each {|v| array.push v } 
```

希望有帮助！

# python - Python硬件，类和方法的麻烦

> ID：13828661
> 
> 赞同：-7
> 
> 时间：2012-12-11T21:18:34.793
> 
> 标签：python

我在 CS 课上遇到了硬件问题。问题与在 python 中创建一个类有关。这是提示

你的类应该命名为 Student，你应该定义以下方法：

`__init__`：此方法初始化一个学生对象。

参数：姓名、GPA 和所学单位数

• 应根据传入的信息初始化名称、GPA 和单位的实例变量。如果 GPA 或单位数为负数，请将其设置为 0。（不要担心此方法中的非数字值。）

update：如果 Student 接受新类，则此方法更新 Student 对象的实例变量。

• 参数：新班级的单位、在新班级中获得的成绩（以数字形式）。

• 应修改单位的实例变量以添加新类的单位

• 应修改 GPA 以纳入新班级的成绩。（请注意，这将是使用单位计数和两组 GPA 的加权平均值。）

get_gpa：这个方法应该返回学生的 GPA。

get_name：此方法应返回学生的姓名。

**这是我所拥有的**

```
class Student:
  def__init__(self,name,GPA,units):
    if units <0:
      units=0
    if GPA<0:
      GPA=0
    self.name=name
    self.GPA=GPA
    self.units=units

  def update(newunits,GPE): 
```

这就是我能想到的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T21:32:36.573

让我们通过一些要点，希望对您有所帮助：

### 构造函数 ( `__init__`)

> 如果 GPA 或单位数为负数，则将其设置为 0。

所以你可能想分别检查每个：

```
if units < 0:
    units = 0
if GPA < 0:
    GPA = 0 
```

### 更新方法

方法通常将当前对象的引用作为第一个参数，`self`按照约定命名（就像在 中一样`__init__`）。所以你的更新方法声明应该是这样的：

```
def update(self, newunits, GPE):
    ... 
```

> 应该修改单位的实例变量以添加新类的单位

正如您在构造函数中所做的那样，您可以使用`self.varname`. 所以你可能想做这样的事情：

```
self.units += newunits 
```

> 应修改 GPA 以纳入在新课程中获得的成绩。（请注意，这将是使用单位计数和两组 GPA 的加权平均值。）

就像您更新一样，`self.units`您必须在`self.GPA`此处更新。不幸的是，我不知道 GPA 是什么以及它是如何计算的，所以我只能猜测：

```
self.GPA = ((self.GPA * oldunits) + (GPE * newunits)) / self.units 
```

请注意，我在这里引入了一个新的局部变量，它只是在更新*之前*（更新之后）`oldunits`临时存储单位。*`oldunits = self.units - newunits`*

 *### get_gpa 和 get_name

这些是简单的 getter，只从对象返回一个值。在这里，您有一个**units**的示例，即您应该自己找出实际想要的值：

```
def get_units (self):
    return self.units 
```

请注意，拥有 getter（`get_x`方法）是相当不合常理的，因为您只希望人们直接访问属性（同时小心处理它们）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T21:24:18.100

我会帮你完成这个问题，但让我先指​​出一个小错误：

```
if units <0 and GPA <0:
  units=0
  GPA=0 
```

只有当它们都是负数时，这才会将单位和 GPA 设置为零。如果它是负数，您将希望将每个设置为零，即使另一个不是。将其更改为：

```
if units < 0: units = 0
if GPA < 0: GPA = 0 
```

关于您的更新方法，正确的签名将是：

```
def update(self, newunits, GPE): 
```

Python 对象方法应始终以 self 开头。

现在，我不确定如何计算 GPA（如果我住的是我们使用不同的系统），但根据一些相当谷歌的查询，你的更新方法应该是这样的：

```
def update(self, newunits, GPE):
    GPE_earned_before = self.GPA * self.units
    total_GPE = GPE_earned_before + GPE
    self.GPA = total_GPE / (self.units + newunits)
    self.units += newunits 
```

为了清楚起见，我在这里使用了很多变量，但这可以缩短为：

```
def update(self, newunits, GPE):
    self.GPA = (self.GPA * self.units + GPE) / (self.units + newunits)
    self.units += newunits 
```*

# objective-c - 使用 Segue 将数据（字符串）从子视图控制器传递到父 VC

> ID：13828666
> 
> 赞同：0
> 
> 时间：2012-12-11T21:19:10.457
> 
> 标签：objective-c, ios

使用 Segue 将数据（字符串）从子视图控制器传递到父 VC。有人可以建议我最快和最简单的方法（在故事板中），

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T21:25:03.260

试试这个博客，它解释了你需要知道的每一件事:)

[http://www.appcoda.com/storyboards-ios-tutorial-pass-data-between-view-controller-with-segue/](http://www.appcoda.com/storyboards-ios-tutorial-pass-data-between-view-controller-with-segue/)

```
UIStoryboard *storybord = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
ActionsViewController *vc =[storybord instantiateViewControllerWithIdentifier:@"-----"];
vc.Title =[namesarray objectAtIndex:indexPath.row];//where Title variable at next view class
[self.navigationController pushViewController:vc animated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T21:38:39.193

您需要 `prepareForSegue:sender:` 在可以访问`destinationViewController`.

# c++ - 调试 - 检测写入内存位置的函数

> ID：13828677
> 
> 赞同：1
> 
> 时间：2012-12-11T21:20:07.687
> 
> 标签：c++, debugging, gdb

我需要知道 linux 调试器 gdb 是否有办法检测特定 C++ 类（由文件 Chord.cc 表示）的函数（任何函数）是否访问特定内存位置（比如说 0xffffbc）。这对我有很大帮助。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T21:47:44.727

[GDB 观察点](http://sourceware.org/gdb/onlinedocs/gdb/Set-Watchpoints.html)是您正在寻找的：

从该页面引用：

> 只要表达式的值发生更改，您就可以使用观察点停止执行，而无需预测可能发生这种情况的特定位置。（这有时称为数据断点。）表达式可能像单个变量的值一样简单，也可能像运算符组合的多个变量一样复杂。示例包括：
> 
> *   对单个变量值的引用。
> *   转换为适当数据类型的地址。例如，`*(int *)0x12345678' 将监视指定地址的 4 字节区域（假设一个 int 占用 4 字节）。

然后，您可以尝试应用本文中的技术[使其](https://stackoverflow.com/a/4532860/1298153)成为条件观察点，并查看是否可以找到一种方法将其限制为来自该类的特定函数调用。您可能还会发现[此讨论](https://stackoverflow.com/questions/5336403/is-there-any-way-to-set-a-breakpoint-in-gdb-that-is-conditional-on-the-call-stac)与这方面相关。

# binaryfiles - 您如何在 Amazon App Store 上拒绝二进制文件？

> ID：13828680
> 
> 赞同：1
> 
> 时间：2012-12-11T21:20:18.313
> 
> 标签：binaryfiles, submission, amazon-appstore

我刚刚提交了一个二进制文件以更新亚马逊应用商店上的现有应用程序，并意识到其中存在错误。我去拒绝它，但是一旦我点击提交，我就看不到它的方法了。关于如何拒绝应用更新的二进制并添加新的任何想法？

谢谢，

缺口

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-02T18:59:33.017

要将进程中的应用程序恢复到可以提交新版本的状态，只需使用开发人员门户中的联系我们表单，他们可以很快为您完成

# iphone - 如何在 viewController 中使用 UITabbar？

> ID：13828681
> 
> 赞同：0
> 
> 时间：2012-12-11T21:20:18.950
> 
> 标签：iphone, ios, uitableview, uitabbar

如果我直截了当，那么我的问题是我有一个带有两个按钮的 UIViewController。

1.  Button One --（onclick 必须导航到）--->`UITabbarController`有 4 个`UITabbar`项目，或者我可以`UITabbar`在我的新项目中使用一个`UIViewController`；

2.  按钮二 --(OnClick 必须导航到)---> `UITabbarController`where first`tabbaritem`将包含 contains`UITableView`或者我可以`UITabbar`在我的 new `UIViewController`where first`TabbarItem`中包含 a `UITableView`。

我怎么能做这个？？？示例代码将更有帮助，这两种建议都没有。如果您需要任何澄清，请随时询问。

向埃蒙致以最诚挚的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T21:55:18.160

首先，如果您希望在单击按钮时推送另一个视图控制器，则需要有一个 NavigationController。您需要执行的步骤如下

1.  从 iPhone 上的 MasterDetail 应用开始
2.  在 xib 文件中，放置按钮并将它们连接到正确的方法
3.  在视图中确实出现了视图控制器有以下代码

    ```
    self.tbc1 = [[UITabBarController alloc] init];
    self.tbc2 = [[UITabBarController alloc] init];

    UIViewController *tbc1vc1 = [[UIViewController alloc] init];
    UIViewController *tbc1vc2 = [[UIViewController alloc] init];
    UIViewController *tbc1vc3 = [[UIViewController alloc] init];

    UITableViewController *tbc2vc1 = [[UITableViewController alloc] init];
    UIViewController *tbc2vc2 = [[UIViewController alloc] init];
    UIViewController *tbc2vc3 = [[UIViewController alloc] init];

    [self.tbc1 setViewControllers:[NSArray arrayWithObjects:tbc1vc1,tbc1vc2,tbc1vc3, nil]];
    [self.tbc1 setViewControllers:[NSArray arrayWithObjects:tbc2vc1,tbc2vc2,tbc2vc3, nil]]; 
    ```

4.  当然，您必须在视图控制器中为 tbc1 和 tbc2 定义属性。

5.  在应用程序委托中执行以下操作

    ```
     self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    ViewController *myViewController = [[ViewController alloc] init];
    self.viewController = [[UINavigationController alloc] initWithRootViewController:myViewController];
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];
    return YES; 
    ```

6.  将 .h 文件中的 UIViewController 更改为 UINavigationController 之类的

    ```
    @property (strong, nonatomic) UINavigationController *viewController; 
    ```

7.  有两个按钮并将其连接到以下方法

    ```
    -(IBAction)tbc1Clicked{
    [self.navigationController pushViewController:self.tbc1 animated:YES];
    }

    -(IBAction)tbc2Clicked{
        [self.navigationController pushViewController:self.tbc2 animated:YES];
    } 
    ```

# ruby - 如何替换 HTML 片段中 HTML 元素的 id 或类？

> ID：13828683
> 
> 赞同：0
> 
> 时间：2012-12-11T21:20:27.817
> 
> 标签：ruby, parsing, html-parsing, nokogiri

我需要检查一个 HTML 片段并将 HTML 元素的 ID 或类替换为其他值。使用正则表达式不符合我的需要，因为在文本中可能会出现多次搜索到的类，我应该保留它。

例如，我有这个 HTML：

```
<div id='sweet'>
  Bla bla sweet bla bla...
</div> 
```

当我`id='sweet'`用“苦”代替时，我想收到：

```
<div id='bitter'>
  Bla bla sweet bla bla...
</div> 
```

我可以用 Nokogiri 毫无问题地做到这一点，但有时我会得到无效的 HTML，需要按原样返回标记。问题是，Nokogiri 修复了标记和损坏的节点。

例子：

```
</table>
<div id='sweet'>
  Bla bla sweet bla bla...
</div> 
```

我只会收到这个：

```
<div id='bitter'>
  Bla bla sweet bla bla...
</div> 
```

示例 2：

```
</div>
<div id='sweet'>
  Bla bla sweet bla bla...
</div>
<table>
  <tr>
    <td>
      Some text 
```

我会得到这个：

```
<div id='bitter'>
  Bla bla sweet bla bla...
</div>
<table>
  <tr>
    <td>
      Some text
    </td>
  </tr>
</table> 
```

我怎样才能从第二个例子中得到这个？：

```
</div>
<div id='bitter'>
  Bla bla sweet bla bla...
</div>
<table>
  <tr>
    <td>
      Some text 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T22:35:04.693

您可以使用正则表达式，但需要更多上下文：

```
str = "</div>
<div id='sweet'>
  Bla bla sweet bla bla...
</div>
<table>
  <tr>
    <td>
      Some text"

str.sub /id='sweet'/, "id='bitter'" 
```

只会改变'sweet'的第一个实例。

相似地，

```
str = "</div>
<div class='cls1 sweet cls3'>
  Bla bla sweet bla bla...
</div>
<table>
  <tr>
    <td>
      Some text"

puts str.sub( /class=['"]([^'"]*)sweet([^'"]*)['"]/ ) { "class='#{$1}bitter#{$2}'" } 
```

仅在类属性中处理“甜蜜”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T21:53:19.540

嗯，最明显的答案是：

```
str = <<EOF
</div>
<div id='sweet'>
  Bla bla sweet bla bla...
</div>
<table>
  <tr>
    <td>
      Some text
EOF

str['sweet'] = 'bitter'
puts str 
```

# sql-server-2008 - 如何配置 pyodbc 以使用 freeTDS 和 unixODBC 正确接受来自 SQL Server 的字符串？

> ID：13828688
> 
> 赞同：6
> 
> 时间：2012-12-11T21:20:38.443
> 
> 标签：sql-server-2008, unicode, pyodbc, freetds, unixodbc

我无法从 MSSQL 服务器获取有效字符串到 python。我相信某处存在编码不匹配。我相信它位于 ODBC 层和 python 之间，因为我能够在 tsql 和 isql 中获得可读的结果。

pyodbc 期望什么字符编码？我需要在链中进行哪些更改才能使其正常工作？

**具体例子**

这是一个简化的python脚本作为示例：

```
#!/usr/bin/env python
import pyodbc

dsn = 'yourdb'
user = 'import'
password = 'get0lddata'
database = 'YourDb'

def get_cursor():
    con_string = 'DSN=%s;UID=%s;PWD=%s;DATABASE=%s;' % (dsn, user, password, database)
    conn = pyodbc.connect(con_string)
    return conn.cursor()

if __name__ == '__main__':
    c = get_cursor()
    c.execute("select id, name from recipe where id = 4140567")

    row = c.fetchone()
    if row:
        print row 
```

这个脚本的输出是：

```
(Decimal('4140567'), u'\U0072006f\U006e0061\U00650067') 
```

或者，如果脚本的最后一行更改为：

```
print "{0}, '{1}'".format(row.id, row.name) 
```

那么结果是：

```
Traceback (most recent call last):
  File "/home/mdenson/projects/test.py", line 20, in <module>
    print "{0}, '{1}'".format(row.id, row.name)
UnicodeEncodeError: 'ascii' codec can't encode characters in position 0-2: ordinal not in range(128) 
```

使用**tsql**执行相同查询的脚本：

```
root@luke:~# tsql -S cmw -U import -P get0lddata
locale is "C"
locale charset is "ANSI_X3.4-1968"
using default charset "UTF-8"
1> select id, name from recipe where id = 4140567
2> go
id      name
4140567 orange2
(1 row affected) 
```

以及在**isql**中：

```
root@luke:~# isql -v yourdb import get0lddata
SQL>  select id, name from recipe where id = 4140567
+----------------------+--------------------------+
| id                   | name                     |
+----------------------+--------------------------+
| 4140567              | orange2                  |
+----------------------+--------------------------+
SQLRowCount returns 1
1 rows fetched 
```

所以我早上一直在做这个工作，看起来高高低低，还没有弄清楚有什么问题。

**细节**

以下是版本详细信息：

*   客户端是 Ubuntu 12.04
*   freetds v0.91
*   unixodbc 2.2.14
*   蟒蛇2.7.3
*   pyodbc 2.1.7-1（来自 ubuntu 包）和 3.0.7-beta06（从源代码编译）

*   服务器是带有 SQL Server Express 2008 R2 的 XP

下面是客户端上几个配置文件的内容。

/etc/freetds/freetds.conf

```
[global]
    tds version = 8.0
    text size = 64512
[cmw]
    host = 192.168.90.104
    port = 1433
    tds version = 8.0
    client charset = UTF-8 
```

/etc/odbcinst.ini

```
[FreeTDS]
Description = TDS driver (Sybase/MS SQL)
Driver = /usr/lib/x86_64-linux-gnu/odbc/libtdsodbc.so
Setup = /usr/lib/x86_64-linux-gnu/odbc/libtdsS.so
CPTimeout =
CPReuse =
FileUsage = 1 
```

/etc/odbc.ini

```
[yourdb]
Driver = FreeTDS
Description = ODBC connection via FreeTDS
Trace = No
Servername = cmw
Database = YourDB
Charset = UTF-8 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T19:55:06.153

因此，在继续工作之后，我现在将 unicode 字符输入 python。不幸的是，我偶然发现的解决方案就像亲吻你的表弟一样令人满意。

我通过安装 python3 和 python3-dev 包然后用 python3 重建 pyodbc 解决了这个问题。

现在我已经完成了这个，我的脚本现在可以工作了，即使我仍然使用 python 2.7 运行它们。

所以我不知道这样做解决了什么问题，但它现在可以工作了，我可以继续我开始的项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T00:19:20.620

您是否有可能遇到 BOM（字节顺序标记）问题？如果是这样，也许这段代码会有所帮助：

```
import codecs
if s.beginswith( codecs.BOM_UTF8 ):
    # The byte string s begins with the BOM: Do something.
    # For example, decode the string as UTF-8

if u[0] == unicode( codecs.BOM_UTF8, "utf8" ):
    # The unicode string begins with the BOM: Do something.
    # For example, remove the character.

# Strip the BOM from the beginning of the Unicode string, if it exists
u.lstrip( unicode( codecs.BOM_UTF8, "utf8" ) ) 
```

[我在这个页面](http://www.evanjones.ca/python-utf8.html)上找到了那个片段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-03T16:26:29.367

如果将 pyodbc 升级到版本 3，问题将得到解决。

# wordpress - 如何确定 RSS 源的订阅者数量

> ID：13828689
> 
> 赞同：0
> 
> 时间：2012-12-11T21:20:41.797
> 
> 标签：wordpress, rss, blogs, subscribe

我有一个客户正在使用他们的 Wordpress 网站 (www.website.com/feed) 的基本提要。她在问有多少人订阅了她的订阅源。是否有捷径可寻？我以为你可以用谷歌阅读器，但我想这些只是谷歌阅读器的统计数据。我知道 Feedburner 可以做到这一点，但是将提要连接到 feedburner 会影响提要当前在站点上的工作方式吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T05:34:26.747

您想开始使用 feedburner。

本文列出了一些很好的方法来做到这一点。 [http://codex.wordpress.org/Using_FeedBurner](http://codex.wordpress.org/Using_FeedBurner)

使用插件、自定义函数和编辑 .htaccess 文件。

因为你已经有了这个设置，我会推荐 .htaccess 方法。

询问 Apache 的全部细节。 [http://www.askapache.com/htaccess/redirecting-wordpress-feeds-to-feedburner.html](http://www.askapache.com/htaccess/redirecting-wordpress-feeds-to-feedburner.html)

# matlab - Symbolic Toolbox Matlab中的差分方程

> ID：13828692
> 
> 赞同：2
> 
> 时间：2012-12-11T21:20:56.663
> 
> 标签：matlab, signal-processing, symbolic-math, difference-equations

有人可以告诉我有没有办法解决[差分方程](http://en.wikipedia.org/wiki/Difference_equation)，例如：

```
y(k) = a1 * y(k-1) + a2 * y(k-2) + b0*u(k) 
```

在 Matlab 中使用符号工具箱？我想找到这个方程的显式解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T23:19:24.133

从[这个来源](http://www.mathworks.com/matlabcentral/newsreader/view_thread/297473)，有两种方法：

*   应用[Z 变换](http://www.mathworks.com/help/symbolic/compute-z-transforms-and-inverse-z-transforms.html)，求解 X(z)，然后在需要时查找 Z 逆变换查找表。

*   写y(n)=r^n，得到辅助方程，先求解齐次部分。

    ```
    r^n = a1*r(n-1) + a2*r^(n-2) 
    ```

底线是，现在在 Matlab 中没有解决差分方程的好方法。

# c# - 以更好的方式处理异常文件

> ID：13828694
> 
> 赞同：0
> 
> 时间：2012-12-11T21:21:05.663
> 
> 标签：c#, exception-handling

我有此代码用于保存到文件。

```
string filePath = Path.Combine(Path.GetTempPath(), "ConnectFour.txt");

try
{       
using (StreamWriter myFile = File.CreateText(filePath))
{
  // saving code
}

}catch (IOException){
    MessageBox.Show("There was an error saving this game!", "ERROR", MessageBoxButtons.OK, MessageBoxIcon.Exclamation, MessageBoxDefaultButton.Button1);

} catch (Exception){
    MessageBox.Show("There was an error saving this game!", "ERROR", MessageBoxButtons.OK, MessageBoxIcon.Exclamation, MessageBoxDefaultButton.Button1);
} 
```

使用文件处理时是否有更好的方法来处理异常？可能会捕获更具体的异常，例如 FileNotFound？你有什么建议吗？我问这个问题是因为当我在另一台计算机上为我的应用程序使用我的可执行文件时，我收到了消息框（一个异常被捕获）而且我不知道它是什么！此外，我拥有此应用程序的每台计算机上都没有显示此异常，因此更难弄清楚！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T21:49:34.790

作为一般规则，您通常不应该捕获每个异常（通过编写`catch(Exception)`），而应该只捕获那些您可以在这个特定点真正处理的异常。

查看文档并查看保存代码中使用的所有方法都可以引发哪些异常。考虑一下它们在您的特定算法中的真正含义，以及如何将异常转换为用户友好的错误消息。

例如，UnauthorizedAccessException 和 FileNotFoundException 是非常不同的东西。如果您只写“发生错误”，用户将无法理解发生了什么问题。

考虑记录异常以获取有用的调试信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T21:24:58.383

为什么不使用抛出的异常并显示消息：

```
}
catch( IOException e )
{
   MessageBox.Show("There was an error saving this game: " + e.Message
                    , "ERROR"
                    , MessageBoxButtons.OK
                    , MessageBoxIcon.Exclamation
                    , MessageBoxDefaultButton.Button1);
} 
```

如果文件必须在您的操作之前存在，您可以执行`File.Exists( file )`. 错误检查总是比异常处理更受欢迎......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T21:25:13.010

你可以这样做：

```
try{}

catch(exception ex){
if(ex is IOException){
messagebox.show("Your Specific Message");
//and do others like this

}
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T21:26:53.800

基于异常的工作流管理是一个建议的指导方针，如果不是唯一可能的话，在处理`IO`操作的情况下，so 文件也是。很多时候，没有其他方法可以处理您的程序工作流，如果不是在处理 IO 工件时通过**预期的异常处理。**

在您的情况下，我会添加`catch`所有*预期*的异常，而对于其他人来说，只会离开堆栈。

希望这可以帮助。

# sql - SQL 替换值

> ID：13828695
> 
> 赞同：1
> 
> 时间：2012-12-11T21:21:07.457
> 
> 标签：sql, replace

我有一些数据存储在一个关于客户语言偏好的表中，但它存储为一个整数，其中 8 = 英语和 9 = 法语等。我认为这样做的原因是整数是另一个表中的键，将它们链接到描述它们的字符串。

不幸的是，我只能访问第一个表而不能访问另一个表，否则执行 JOIN 将是一件简单的事情，所以是否可以编写一个 SELECT 查询，将 8 映射到英语，9 映射到法语等等？

我在想象这样的事情..

```
SELECT clientName, FUNCTION(languagePreference, ((8, "English"), (9, "French"))) 
FROM table 
```

所以代替这个..

```
clientName languagePreference

Dave          8    
Emmanuelle    9    
Luc           9    
John          8 
```

我明白这个...

```
clientName languagePreference

Dave         English
Emmanuelle   French
Luc          French
John         English 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T21:25:51.547

`TSQL:`

```
SELECT clientName, 
  CASE languagePreference
       WHEN 8 THEN 'English'
       WHEN 9 THEN 'French'
       ... --Go on like this if you have more languagePreference keys
  END as languagePreference
FROM table 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T21:25:38.563

使用 TSQL，使用`CASE`

```
SELECT clientName, 
       CASE WHEN (languagePreference=8) THEN 
               'English' 
       ELSE 
            CASE WHEN (languagePreference=9) THEN
                'French'
            ELSE
                'Unknown'
            END
       END as languagePreference
FROM table 
```

# actionscript-3 - 更改状态确实会立即更改 Flex

> ID：13828696
> 
> 赞同：0
> 
> 时间：2012-12-11T21:21:16.640
> 
> 标签：actionscript-3, apache-flex, actionscript, flex4.6

我有一个在 Flex 中的不同图形之间切换的应用程序。每个图表都是它自己的状态。在 MXML 中，我进行了设置，以便在状态更改时图像的源发生更改：

```
<s:Image id="chartImage"
         source.all="{ callImages.all }"
         source.classA="{ callImages.classB }"
         source.classB="{ callImages.classA }"
         /> 
```

我有成功更改图像的按钮。但是，我有一个小错误，因为在该行之后

```
this.currentState = chartName; 
```

我的代码预计图形图像源会被更改，但是我假设，直到函数结束和屏幕更新之后，对 s:Image 元素的实际更改才会发生。因此，当它抓取chartImage.height 时，它会使用我刚刚离开的状态中的旧的。

有没有办法让它得到新的图像（因此它的尺寸），所以我可以在下一行用这些尺寸进行计算？至此，chartImage.height 返回状态改变前的高度，但在函数执行后就不同了。

我可以在几分之一秒后运行一个计时器，然后在那里执行这些行，它会起作用。但是，我宁愿告诉它渲染屏幕，然后继续我的代码。这可能吗？只是看起来更优雅。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T00:07:26.827

> 有没有办法让它得到新的图像（因此它的尺寸），所以我可以在下一行用这些尺寸进行计算？

每个 Flex 组件都必须经过自己的验证周期，该验证周期建立在 Flash Player 的呈现机制之上。[如果您对Flash/Flex Elastic Racetrack](http://www.quilix.com/node/61)执行 Google 搜索，则有一些很棒的帖子。

[但是，您可以通过调用validateNow()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/core/UIComponent.html#validateNow%28%29)方法强制组件以线性方式运行它的验证方法。

有可能——特别是如果你有一个状态转换——在你设置 currentState 变量之后你的 Image 上的属性还没有改变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T00:13:02.567

您通常不能在 Flex 中更改图像的来源，然后立即检查（“在下一行”）它的高度 — 例外情况可能是源是原始位图，但即使这样，Flex 的布局框架也会因不同的因素，所以我不会依赖这个。

这是 Flex 的经典问题：框架的美妙（和痛苦）在于它逐步呈现其更改以最大化应用程序的响应能力。谷歌“弹性组件生命周期”有大量关于这个过程细节的资源。

有几种方法可以解决这个问题。通常你会想要使用绑定表达式，因为它们正是为了这个原因而设计的：异步布局更改。不要过度使用它们，但它们是保持代码库简单灵活的可靠工具。

您可以通过 mxml 绑定到 SparkImage 的高度：

```
<s:Image id="chartImage" />
<s:Label id="debugLabel" text="{ 'Height of chartImage: ' + chartImage.height }" /> 
```

但如果您需要运行逻辑，我建议您使用 BindingUtils（在脚本块中）：

```
import mx.binding.utils.BindingUtils;

protected function someOtherFunctionBlock():void
{
    BindingUtils.bindSetter( handleHeigtChange, image, "height" );
}

protected function handleHeigtChange( value:Number ):void
{
   // Deal with value change
} 
```

# ruby - 你会如何在 Ruby 中表达一个成语“用这个对象，如果它存在，做这个”？

> ID：13828700
> 
> 赞同：5
> 
> 时间：2012-12-11T21:21:23.660
> 
> 标签：ruby

在 Ruby（尤其是 Rails）中，您经常必须检查是否存在某些内容，然后对其执行操作，例如：

```
if @objects.any?
  puts "We have these objects:"
  @objects.each { |o| puts "hello: #{o}"
end 
```

这是尽可能短的，一切都很好，但是如果你有`@objects.some_association.something.hit_database.process`而不是`@objects`呢？我将不得不在`if`表达式中第二次重复它，如果我不知道实现细节并且方法调用很昂贵怎么办？

显而易见的选择是创建一个变量，然后对其进行测试，然后对其进行处理，但是你必须想出一个变量名（呃），它也会在内存中徘徊，直到作用域结束。

为什么不这样：

```
@objects.some_association.something.hit_database.process.with :any? do |objects|
    puts "We have these objects:"
    objects.each { ... }
end 
```

你会怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T21:27:15.727

`any?`请注意，如果您只打算发送，则没有理由检查数组是否至少有一个元素`each`，因为发送`each`到空数组是无操作的。

要回答您的问题，也许您正在寻找[https://github.com/raganwald/andand](https://github.com/raganwald/andand)？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T22:25:16.523

确实，使用变量会污染命名空间，但我仍然认为`if (var = value).predicate`is 是一个非常常见的习惯用法，通常完全没问题：

```
if (objects = @objects.some_association.hit_database).present?
  puts "We have these objects: #{objects}"
end 
```

选项 2：如果您想以声明方式创建自己的抽象，也可以使用块：

```
@objects.some_association.hit_database.as(:if => :present?) do |objects|
  puts "We have these objects: #{objects}"
end 
```

写`Object#as(options = {})`的很直白。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T21:30:28.313

**编辑**：如果您使用的是 Ruby 1.9，该[`Object#tap`](http://www.ruby-doc.org/core-1.9.3/Object.html#method-i-tap)方法提供的功能与下面列出的代码相同。

听起来您只是希望能够在不污染范围的情况下保存对对象的引用，对吗？我们如何打开`Object`类并添加一个方法`do`，它只会将自己屈服于块：

```
class Object
  def do
    yield self if block_given?
    return self # allow chaining
  end
end 
```

然后我们可以调用，例如：

```
[1,2,3].do { |a| puts a.length if a.any? }
=> 3
[].do { |a| puts a.length if a.any? }
=> nil 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-11T21:38:27.053

[水龙头](http://ruby-doc.org/core-1.9.3/Object.html#method-i-tap)呢？

```
@objects.some_association.something.hit_database.process.tap do |objects|
  if objects.any?
    puts "We have these objects:"
    objects.each { ... }
  end
end 
```

# f# - 扩展查询表达式

> ID：13828703
> 
> 赞同：8
> 
> 时间：2012-12-11T21:21:33.870
> 
> 标签：f#

有没有关于如何扩展/添加新关键字到查询表达式的文档或示例？这甚至可能吗？

例如，我想添加一个领先/滞后运算符。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-11T22:12:40.460

除了@pad 提到[的 Rx 框架的查询构建器](http://mnajder.blogspot.cz/2011/09/when-reactive-framework-meets-f-30.html)之外，还有来自 F# 团队的 Wonseok Chae 的演讲，内容是包含查询表达式的计算表达式。我不确定会议是否被录制，但是有[非常详细的幻灯片](http://files.meetup.com/2922732/Computation%20Expressions%20%28April%29.pdf)，其中包含一个关于生成 .NET IL 代码的查询语法的很酷的示例。

[标准 F# 查询构建器](https://github.com/fsharp/fsharp/blob/master/src/fsharp/FSharp.Core/Query.fsi)的源代码可能是了解支持哪些类型的操作以及如何使用属性注释它们的最佳资源。

`where`子句演示了您可能需要的关键属性：

```
[<CustomOperation("where",MaintainsVariableSpace=true,AllowIntoPattern=true)>]
member Where : 
  : source:QuerySource<'T,'Q> * 
    [<ProjectionParameter>] predicate:('T -> bool) -> QuerySource<'T,'Q> 
```

该`CustomOperation`属性定义操作的名称。（非常重要的）参数`MaintainsVariableSpace`允许您说操作返回与输入相同类型的值。在这种情况下，之前定义的变量在操作后仍然可用。例如：

```
query { for p in db.Products do
        let name = p.ProductName
        where (p.UnitPrice.Value > 100.0M)
        select name } 
```

在这里，变量`p`和`name`之后仍然可以访问，`where`因为`where`仅过滤输入，但不会转换列表中的值。

最后，`ProjectionParameter`允许您说`p.UnitValue > 100.0M`实际上应该将其转换为一个函数，该函数接受上下文（可用变量）并评估此表达式。如果您不指定此属性，则操作仅获取参数的值，如下所示：

```
query { for p in .. do
        take 10 } 
```

在这里，参数`10`只是一个简单的表达式，不能使用`p`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-11T22:44:36.767

该语言的非常酷的功能。刚刚实现了反向查询QuerySource。

简单的例子，但只是一个演示。

```
module QueryExtensions

type ExtendedQueryBuilder() =
    inherit Linq.QueryBuilder()
    /// Defines an operation 'reverse' that reverses the sequence    
    [<CustomOperation("reverse", MaintainsVariableSpace = true)>]
    member __.Reverse (source : Linq.QuerySource<'T,System.Collections.IEnumerable>) =
        let reversed = source.Source |> List.ofSeq |> List.rev
        new Linq.QuerySource<'T,System.Collections.IEnumerable>(reversed)

let query = ExtendedQueryBuilder() 
```

现在它被使用了。

```
let a = [1 .. 100]

let specialReverse = 
    query {
        for i in a do
        select i
        reverse
    } 
```

# wcf - 在 WCF 服务中接收 POST 数据

> ID：13828716
> 
> 赞同：2
> 
> 时间：2012-12-11T21:22:26.913
> 
> 标签：wcf, post

我阅读了很多教程，但我无法为我的项目运行它。我做了一些发送数据的 GET 服务，它们工作得很好，但是我在接收数据时遇到了问题。如果有人能告诉我我失败的地方，而不是发布一些链接，我将不胜感激。:) 当我尝试在浏览器中调用该服务时，出现错误：不允许使用方法。但我认为这只是第一个错误。

这是我的代码。首先是我调用服务的Android代码：

```
public class MainActivity extends Activity {

String SERVICE_URI = "http://10.0.2.2:51602/RestServiceImpl.svc";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    HttpPost request = new HttpPost(SERVICE_URI + "/registerUser");
    request.setHeader("Accept", "application/json");
    request.setHeader("Content-type", "application/json");

    try {
        JSONStringer user = new JSONStringer()
                .object()
                .key("userInfo")
                .object()
                    .key("Email").value("mail")
                    .key("Password").value("pass")
                    .key("Cauntry").value("country")
                    .key("UserName").value("username")
                .endObject()
        .endObject();

        StringEntity entity = new StringEntity(user.toString());
        request.setEntity(entity);

        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpResponse response = httpClient.execute(request);

        } catch (JSONException e) {
            e.printStackTrace();
        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

IRestServiceImpl.cs：

```
[ServiceContract]
public interface IRestServiceImpl
{
    [OperationContract]
    [WebInvoke(Method = "POST",
        UriTemplate = "registerUser",
        BodyStyle = WebMessageBodyStyle.Wrapped,
        ResponseFormat = WebMessageFormat.Json,
        RequestFormat = WebMessageFormat.Json)]
    void receiveData(String data);
} 
```

RestServiceImpl.cs：

```
public class RestServiceImpl : IRestServiceImpl
{
    public void receiveData(String data)
    {
        //some code
    }
} 
```

网络配置：

```
<?xml version="1.0"?>
<configuration>

  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <services>
      <service name="RestService.RestServiceImpl" behaviorConfiguration="ServiceBehaviour">

        <endpoint address ="" binding="webHttpBinding" contract="RestService.IRestServiceImpl" behaviorConfiguration="web">

        </endpoint>
      </service>
    </services>

    <behaviors>
      <serviceBehaviors>
        <behavior name="ServiceBehaviour">
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
      </serviceBehaviors>
      <endpointBehaviors>
        <behavior name="web">
          <webHttp/>
        </behavior>
      </endpointBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>

</configuration> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T21:50:27.740

您的问题是您将 JSON**对象**传递给操作，但操作需要 JSON **string**。如果我正确理解 Java 代码，这就是您要发送的内容：

```
{
    "userInfo" : {
        "Email" : "mail",
        "Password" : "pass",
        "Cauntry" : "country",
        "UserName" : "username"
    }
} 
```

这不是 JSON 字符串。

您可以做几件事。第一种选择是将操作修改为不采用字符串，而是采用与该对象等效的数据协定。

代码看起来像下面的代码。请注意，您还应该将正文格式更改为`Bare`（而不是`Wrapped`）。

```
public class RequestData
{
    public UserInfo userInfo { get; set; }
}

public class UserInfo
{
    public string Email { get; set; }
    public string Password { get; set; }
    public string Cauntry { get; set; } // typo to match the OP
    public string UserName { get; set; }
}

[ServiceContract]
public interface IRestServiceImpl
{
    [OperationContract]
    [WebInvoke(Method = "POST",
        UriTemplate = "registerUser",
        BodyStyle = WebMessageBodyStyle.Bare,
        ResponseFormat = WebMessageFormat.Json,
        RequestFormat = WebMessageFormat.Json)]
    void receiveData(RequestData data);
} 
```

另一种选择是，如果数据的“模式”每次都发生变化，则将输入作为*流*（而不是字符串）。这样你应该能够基本上接受任何输入。您可能还需要一个内容类型映射器。[您可以在http://blogs.msdn.com/b/carlosfigueira/archive/2008/04/17/wcf-raw-programming-model-receiving-arbitrary-data.aspx](http://blogs.msdn.com/b/carlosfigueira/archive/2008/04/17/wcf-raw-programming-model-receiving-arbitrary-data.aspx)找到有关此方案的更多信息。

# android - android Local Service 如何与应用程序中的多个活动通信？

> ID：13828717
> 
> 赞同：2
> 
> 时间：2012-12-11T21:22:27.233
> 
> 标签：android

我已经浏览了有关 Stackoverflow 的一些主题，但找不到任何足够的答案“多个活动如何与 android 中的绑定服务通信？”。我在我的应用程序和 2 个活动中有一个简单的绑定服务。我已经在服务和活动之间建立了通信，但现在我在我的应用程序中又添加了一个活动。

作为主要活动的活动 A 将从服务中获取一些数据。服务正在与 Servlet 通信并从 servlet 中获取数据，我将把这些数据发送到我的 Activity A，这个 Activity 将呈现数据。我通过单击按钮从活动 A 调用新活动。活动 A 将向活动 B 发送一些数据。我`Intent`用于在活动 A 和 B 之间共享数据。活动 B 有一些按钮可以更新活动 B 中的数据并将其发送给服务，服务会将响应发送回活动B.

我知道一个活动如何与一个服务通信，但我不知道一个服务如何与两个或更多活动通信。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T21:43:08.423

在活动 B 中与您进行通信的`Service`方式与您在活动 A 中的操作方式相同。我假设您正在注册某种形式，`BroadcastReceiver`以侦听活动 A 中服务的内容。您也可以在 B 中执行此操作，并且两者都可以活动将收到广播。

如果您想从 Activity B 向服务发送命令，您可以使用通常`startService`的方式将意图发送回服务。这不会重新启动您的服务，但它只会向服务重新发出一个新命令，您可以通过在服务中实现该`onStartCommand`功能来在服务中拦截该命令。您可以在此生命周期图的帮助下阅读有关您的服务功能的更多信息，请[点击此处](http://developer.android.com/guide/components/services.html#LifecycleCallbacks)。

因此，您可以在清单中为这两个 Activity 注册广播接收意图，也可以在代码中通过在 onStart 中的两个 Activity 上监听相同的意图过滤器并在 onPause 中再次关闭它们来完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T21:46:52.663

如果您的活动扩展 BroadcastReceiver，它们将侦听从应用程序发送的广播。在您的服务中，您需要在要与活动通信时调用 sendBroadcast(Intent intent)。

在 AndroidManifest.xml 文件中，您需要将意图过滤器添加到您希望服务与之通信的活动中，其中包括意图的操作名称。如果你想发送不同的意图，我相信你需要给他们不同的动作名称。

这是一个如何实现这样的事情的[例子。](http://www.vogella.com/articles/AndroidBroadcastReceiver/article.html)

# slf4j - 无法加载类“org.slf4j.impl.StaticLoggerBinder”——哪个类路径？

> ID：13828719
> 
> 赞同：22
> 
> 时间：2012-12-11T21:22:33.917
> 
> 标签：slf4j

My`pom.xml`仅包含一个对 SLF4J 的引用：

```
 <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-jdk14</artifactId>
        <version>1.5.10</version>
    </dependency> 
```

我收到此错误：

> SLF4J：无法加载类“org.slf4j.impl.StaticLoggerBinder”。
> 
> SLF4J：默认为无操作（NOP）记录器实现 SLF4J：
> 
> 有关详细信息，请参阅[http://www.slf4j.org/codes.html#StaticLoggerBinder](http://www.slf4j.org/codes.html#StaticLoggerBinder)。

我检查了那个 URL，它确实提供了一个解决方案：*“将 slf4j-nop.jar、slf4j-simple.jar、slf4j-log4j12.jar、slf4j-jdk14.jar 或 logback-classic.jar 中的一个（也是唯一一个）放在**类路径**应该可以解决问题。”*

我的问题是：**哪个**类路径？

*   系统的[%CLASSPATH%](http://docs.oracle.com/javase/tutorial/essential/environment/paths.html) ? （我没有！我需要专门为此创建它）
*   Eclipse 的项目`.classpath`？（我想我试过了，但没有帮助）
*   其他？

我在 SO 上找到[了很多关于这个主题](https://stackoverflow.com/a/9919375/1864054)[的](https://stackoverflow.com/questions/11916706/slf4j-failed-to-load-class-org-slf4j-impl-staticloggerbinder-error)帖子，但它们都引用了相同的答案：*“place ... on **the class path** ”*。

**哪个**类路径？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-12T13:55:32.553

首先，为了添加 SLF4J，您应该在 pom.xml 中放置**一个**且只有**一个**这些依赖项。这取决于您选择使用什么实现。您在 pom.xml 中添加的每个依赖项都会自动添加到类路径中。只要你用的是Eclipse就不需要修改系统的%CLASSPATH%？

```
<dependency>
   <groupId>ch.qos.logback</groupId>
   <artifactId>logback-classic</artifactId>
   <version></version>
</dependency> 
```

```
<dependency>
   <groupId>org.slf4j</groupId>
   <artifactId>slf4j-simple</artifactId>
   <version></version>
   <scope>compile</scope>
</dependency> 
```

```
<dependency>
   <groupId>org.slf4j</groupId>
   <artifactId>slf4j-log4j12</artifactId>
   <version></version>
   <scope>compile</scope>
</dependency> 
```

```
<dependency>
   <groupId>org.slf4j</groupId>
   <artifactId>slf4j-jdk14</artifactId>
   <version></version>
   <scope>compile</scope>
</dependency> 
```

最后但同样重要的是，您将遇到错误 SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder"。

Eclipse Juno 和 Indigo 在使用捆绑的 maven 版本 (m2e) 时不会抑制消息 SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder"。此行为从 m2e 版本 1.1.0.20120530-0009 及更高版本开始存在。

虽然，这被指示为错误，您的日志将正常保存。在修复此错误之前，突出显示的错误仍将存在。[在m2e 支持站点](https://bugs.eclipse.org/bugs/show_bug.cgi?id=387064)中了解更多信息。

为了抑制此消息，当前可用的解决方案是使用外部 maven 版本而不是 Eclipse 的捆绑版本。您可以在下面的问题中找到有关此解决方案和有关此错误的更多详细信息。

[SLF4J：无法加载类“org.slf4j.impl.StaticLoggerBinder”。错误](https://stackoverflow.com/questions/11916706/slf4j-failed-to-load-class-org-slf4j-impl-staticloggerbinder-error)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-26T19:41:39.623

## 问题：

我`Maven`用来管理我的依赖项。就我而言，我收到此错误的原因是**因为我的系统中有多个`slf4j-simple`jar**在我的类路径上。[SLF4J 文档](https://www.slf4j.org/codes.html#StaticLoggerBinder)指出：

> 将slf4j-nop.jar slf4j-simple.jar、slf4j-log4j12.jar、slf4j-jdk14.jar 或 logback-classic.jar 中的一个**（也是唯一一个）放在类路径上应该可以解决问题。**

## 解决方案：

*   在文件系统中搜索以下 jars 并删除除 in 之外的所有副本`.m3`：
    1.  slf4j-nop
    2.  slf4j-简单
    3.  slf4j-log4j12
    4.  slf4j-jdk14
    5.  logback-经典

# android - ImageView 的默认缩放类型是什么？

> ID：13828720
> 
> 赞同：5
> 
> 时间：2012-12-11T21:22:39.313
> 
> 标签：android, imageview

我可以设置将图像边界缩放到`ImageView`using边界的选项`setScaleType(ImageView.ScaleType)`。

什么是默认值`ImageView.ScaleType`？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-11T21:25:08.973

看起来是[`ScaleType.FIT_CENTER`](http://developer.android.com/reference/android/widget/ImageView.ScaleType.html#FIT_CENTER)：

```
private void initImageView() {
    mMatrix     = new Matrix();
    mScaleType  = ScaleType.FIT_CENTER;
} 
```

ImageView源码链接：[Android 4.1.1 r6.1](https://android.googlesource.com/platform/frameworks/base/+/android-4.1.1_r6.1/core/java/android/widget/ImageView.java#164)

# visual-studio-2010 - 从 Visual Studio 2008 转换的解决方案在 Visual Studio 2010 中的 Gacutil 构建后步骤失败

> ID：13828723
> 
> 赞同：3
> 
> 时间：2012-12-11T21:22:47.380
> 
> 标签：visual-studio-2010, visual-studio-2008, gacutil, post-build

我已将包含多个项目的 .NET 2.0 解决方案从 Visual Studio 2008（一切都正确构建）转换为 Visual Studio 2010。我在以管理员模式运行的 Visual Studio 2010 中加载了解决方案并选择了“构建解决方案”。在某些项目中的某些构建后步骤中构建失败：

```
Microsoft (R) .NET Global Assembly Cache Utility.  Version 3.5.30729.1
Copyright (c) Microsoft Corporation.  All rights reserved.

Failure adding assembly to the cache: Access denied. You might not have administrative credentials to perform this task. Contact your system administrator for assistance.
36>C:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.Targets(3717,9): error MSB3073: The command ""C:\Program Files\Microsoft SDKs\Windows\v6.0A\bin\gacutil.exe" /i MyAssembly.dll" exited with code 1. 
```

如果我选择这些相同的项目，并且只构建单个项目，而不是整个解决方案，那么 gacutil 命令是成功的。

错误消息听起来好像是权限问题（“拒绝访问”），但我已验证 Visual Studio 2010 正在管理员模式下运行——我在标题栏中看到它（“MySolution - Microsoft Visual Studio（管理员） ”）。

为什么 gacutil 在构建整个解决方案时会失败，但在解决方案中只构建一个项目时会成功？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-03T10:02:18.240

在将我们的一种解决方案转换为 Visual Studio 2010 后，我最近遇到了完全相同的问题。

分析表明，如果两个连续编译的项目`gacutil`在其构建后步骤中调用，*并且*第二个项目足够小，*并且*构建机器足够快，那么第二次调用`gacutil`将系统性地失败并出现“拒绝访问”错误。

这看起来像是某种竞争条件，但我们无法确定确切的根本原因。在有一个正在运行的实例时用繁忙的循环阻塞构建后步骤`gacutil`并没有改变这种情况。

最后，我们能够通过使用 4.0 版`gacutil`而不是 3.5 版来解决这个问题。我们将构建后步骤中的所有调用从：

```
"$(FrameworkSDKDir)Bin\gacutil.exe" /if "$(TargetPath)" /nologo 
```

到：

```
"$(FrameworkSDKDir)Bin\NETFX 4.0 Tools\gacutil.exe" /if "$(TargetPath)" /nologo 
```

应用这些更改后，`gacutil`在构建期间没有再次失败。

# javascript - 需要帮助理解为什么 javascript 对象属性未定义

> ID：13828733
> 
> 赞同：0
> 
> 时间：2012-12-11T21:23:16.470
> 
> 标签：javascript, jquery

我需要帮助理解为什么以下代码返回未定义的对象属性：

```
var count = 0;
var intervals = {
    collection : []                      
}

intervals.collection[0] = function () {
    this.timer = setInterval(function(){
       count++;
       $("p").html(count);            
    }, 1000);
}();

if(typeof intervals.collection[0] === "undefined") {
    $("span").html("undefined");        
}​ 
```

工作示例：http: [//jsfiddle.net/tvaQk/8/](http://jsfiddle.net/tvaQk/8/)

基本上，我希望能够保留一组 setIntervals 供以后参考，以便循环并清除。我在想我可以遍历 interval.collection 数组并执行以下操作：

`clearInterval(intervals.collection[0].timer)`

但不能因为`intervals.collection[0]`未定义

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T21:26:00.723

你忘了`return`.

```
intervals.collection[0] = function () {
  return this.timer = setInterval(function(){
--^^^^^^-- 
```

注意`this`是指`window`，我不确定向元素添加属性`timer`是否`window`是您实际期望的。否则，您应返回间隔 id 以免弄乱全局`window`范围。

* * *

能够访问`timer`using的一种简短方法`intervals.collection[0].timer`是创建一个 Object ：

```
intervals.collection.push({
  timer: setInterval(function(){
    count++;
    $("p").html(count);            
  }, 1000)
});

console.log(intervals.collection[0].timer); 
```

我`Array.push`在此示例中使用了将新创建的区间添加为数组的最后一个元素。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T21:28:37.693

也许你让事情复杂化了......我要做的就是将间隔直接推入数组。

```
intervals.collection.push( setInterval(function(){...}, 1000) ); 
```

您不需要 IIFE 来执行间隔，当您将其推入数组时，它也会执行。

然后你可以像这样清除它们：

```
intervals.collection.forEach(function( timer ) {
  clearInterval( timer );
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T21:26:26.693

你可以简单地这样写：

```
intervals.collection[0] = setInterval(function(){
    $("p").html(++count);            
}, 1000); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T21:30:22.853

您正在分配一个自调用函数，这意味着您分配了函数的返回值。该函数本身不返回任何内容，因此它是未定义的。

# android - onResume 导致启动时出现问题

> ID：13828734
> 
> 赞同：0
> 
> 时间：2012-12-11T21:23:25.087
> 
> 标签：android, listview, onresume, activity-lifecycle

我有一个允许用户开始第二个活动的活动。第二个活动有一个我添加到数组列表中的项目列表。当我返回上一个活动时，我想显示数组列表的大小。

但是我遇到了 onResume() 的问题。它在我的第一个活动创建时被调用，结果生成一个错误，因为数组列表在首次启动时不存在！

onResume():

```
@Override
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();
    getIntentData();
    calcSubTotal(orderData);
} 
```

获取意图数据（）：

```
public void getIntentData(){
    b = new Bundle();
    b = getIntent().getExtras();
    orderData = b.getParcelable("order");
    Toast.makeText(this.getApplicationContext(), orderData.size(), Toast.LENGTH_LONG).show();
} 
```

第二个活动的 onCreate()：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_starters);
    createTestData();

    b = new Bundle();
    orderData = new MenuItemList();

    adapter = new MenuItemArrayAdapter(this, starters);
    this.setListAdapter(adapter);
}

@Override
protected void onListItemClick(ListView l, View v, int position, long id) {

    Toast.makeText(this.getApplicationContext(), l.getItemAtPosition(position).toString() + " clicked", Toast.LENGTH_LONG).show();
    //add clicked item to orderData....
    MenuItem m = (MenuItem)l.getItemAtPosition(position);
    //create new item
    orderData.add(m);   
} 
```

知道我如何能够控制它吗？

错误：

> java.lang.RuntimeException：无法恢复活动 {com.example.waitronproto3/com.example.waitronproto3.SectionsActivity}：java.lang.NullPointerException

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T21:30:05.000

我想你可能想看看`startActivityForResult`，当你开始你的第二个活动时。它将允许您的第二个活动将结果返回给您的第一个活动。您可以在[活动](http://developer.android.com/reference/android/app/Activity.html)文档中阅读它，特别是文档的“开始活动和获取结果”部分。

编辑：从您的代码的外观来看-您所做的任何事情都不是存储来自第二个活动的捆绑包并将其发送回第一个活动。所以你永远不会`Bundle`在你的第一个活动中得到正确的数据。按照建议，考虑`startActivityForResult`启动您的第二个活动。这将允许您轻松地将数据返回到您的第一个活动中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T21:30:14.110

> 但是我遇到了 onResume() 的问题。它在我的第一个活动创建时被调用，结果生成一个错误，因为数组列表在首次启动时不存在！

我建议先更改`getIntentData()`以检查是否存在适当的数据：

```
public void getIntentData(){
    Intent intent = getIntent();
    if(intent != null && intent.hasExtra("order")) {
        orderData = b.getParcelable("order");
        Toast.makeText(this.getApplicationContext(), orderData.size(), Toast.LENGTH_LONG).show();
        calculateSubTotal(order);
    }
} 
```

并更新`onResume()`：

```
@Override
protected void onResume() {
    super.onResume();
    getIntentData();
} 
```

（尽管您现在可以简单地`getIntentData()`输入`onResume()`。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T21:34:23.207

您`onResume()`将`onCreate()`根据[Android 生命周期](http://developer.android.com/reference/android/app/Activity.html)被调用，因此您需要在尝试使用数据之前检查数据是否不为空。

```
`if(intentData != null)

//do something` 
```

# mysql - 如果最后 3 个相等，MySQL 查询限制为 3 个或更多？

> ID：13828737
> 
> 赞同：1
> 
> 时间：2012-12-11T21:23:37.927
> 
> 标签：mysql

我需要将结果限制为 3 行（示例），但如果第 3 个结果等于第 4 个，则也打印第 4 个，依此类推。解释：从此表

```
id         punteggio
1          100
2          200
3          70
4          100
5          54
6          201
7          200 
```

如果我做

```
SELECT * FROM table ORDER BY punteggio DESC LIMIT 3 
```

我需要在每种情况下打印以下情况：

```
id         punteggio
6           201
2           200
7           200
1           100
4           100 
```

因为我的“三个”最佳点实际上是 7 个中的 5 个，原因 2 和 7 具有相同的点，例如 1 和 4...

我事先不知道最低和最高点，否则我会这样做

```
"WHERE punteggio >= 100" 
```

非常感谢！

更新

不幸的是，我的情况发生了变化：

punteggio 从另一个表的 SUM 中诞生：

```
id          idPersona              punteggio
1             1                        30
2             1                        -10
3             2                        50
4             3                        60
5             2                        -10
6             3                        150
7             1                        190 
```

等等...

我试过做：

```
SELECT  persone.nome,
SUM(transazioni.importoFinale) AS punti
FROM    transazioni
INNER JOIN persone ON persone.idPersona = transazioni.idPersona
INNER JOIN 

(SELECT DISTINCT(SUM(transazioni.importoFinale)) AS punti,
persone.nome
FROM    transazioni
INNER JOIN persone on persone.idPersona = transazioni.idPersona
GROUP BY persone.idPersona
ORDER BY punti DESC
LIMIT 3) subq ON transazioni.punti = subq.punti
ORDER BY punti DESC 
```

但它不起作用...

谢谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T21:29:54.053

```
SELECT id, punteggio
FROM yourtable
WHERE punteggio IN (
   SELECT * FROM (
       SELECT DISTINCT punteggio
       FROM yourtable
       ORDER BY punteggio DESC
       LIMIT 3
   ) AS temp
); 
```

请注意，`select *`存在用于解决 mysql 不支持`IN()`子句中子查询限制的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T21:27:48.770

使用子查询连接来获取`DISTINCT`3 个最大值的集合`punteggio`并将其与主表连接以检索具有这些值的所有行。

```
SELECT
  id,
  punteggio
FROM
  yourtable
  /* subquery gets the top 3 values only */
  /* and the INNER JOIN matches it to all rows in the main table having those values */
  INNER JOIN (
     SELECT DISTINCT punteggio as p
     FROM yourtable
     ORDER BY punteggio DESC
     LIMIT 3
  ) subq ON yourtable.punteggio = subq.p
ORDER BY punteggio DESC 
```

### [这是 SQLFiddle.com 上的演示](http://sqlfiddle.com/#!2/808e8/4)

# javascript - 从 iframe 间接调用的 Fancybox 2.1.3 返回“无法加载请求的内容。请稍后再试。'

> ID：13828739
> 
> 赞同：2
> 
> 时间：2012-12-11T21:23:45.393
> 
> 标签：javascript, jquery, iframe, fancybox

我正在努力设置最新的fancybox。我设法从 iframe 调用 fancybox 以在主页上打开，但它似乎没有找到内容。

所以，我有以下设置：

**main-page：** 打开 iframe 并包含用于在 fancybox 中显示图像的 javascript 函数。出于测试目的，我还没有使用任何参数调用该函数，而是使用硬编码的图像，直到我让它工作为止。所以javascript函数看起来像这样：

```
$jj = jQuery.noConflict();
function triggerFancybox(){
$jj(".triggerid").trigger("click");
alert("Fancybox triggered!");}
function callMe(){
$jj(".triggerid").fancybox('images/showroom/playground/displaced/dispm_6.jpg' , {'type' : 'image'});
triggerFancybox();}
function callMe1(){
$jj(".triggerid").fancybox('http://demo.artonbit.com/images/showroom/playground/displaced/dispm_6.jpg' , {'type' : 'image'});
triggerFancybox();}
function callMe2(){
$jj(".triggerid").fancybox('http://demo.artonbit.com/images/showroom/playground/displaced/dispm_6.jpg');
triggerFancybox();} 
```

主页还包含一个虚拟元素，我用它来打开 fancybox 内容：

```
<a href="#" class="triggerid"></a>      <!-- This id can be called by an iframe for the fancybox> 
```

**iframe：** iframe 目前只包含一个 onclick 触发器，这里是最新的尝试：

```
<p><a class="fancyframe" rel="group" href="images/showroom/playground/displaced/dispm_6.jpg" onclick="parent.callMe();return false;"><img style="float: left;" alt="PXM Commercial Shot1" src="images/showroom/playground/displaced/dispm_6.jpg" height="135" width="240" /> </a>
</p>
<p><a class="fancyframe" rel="group" href="images/showroom/playground/displaced/Disp_7b1.jpg" onclick="parent.callMe1();return false;"><img style="float: left;" alt="PXM Commercial Shot1" src="images/showroom/playground/displaced/dispm_6.jpg" height="135" width="240" /> </a>
</p>
<p><a class="fancyframe" rel="group" href="images/showroom/playground/displaced/dispm_9.jpg" onclick="parent.callMe2();return false;"><img style="float: left;" alt="PXM Commercial Shot1" src="images/showroom/playground/displaced/dispm_6.jpg" height="135" width="240" /> </a>
</p>
<p><a href="#" onclick="parent.callMe();return false;">Another Test</a> 
```

所以，fancybox 被触发，但它找不到内容。我尝试了许多不同的调用fancybox的方法，但我总是得到标题中的错误消息。

图片参考是正确的。应包括所有必要的库。我以 id 作为目标对此进行了测试，目前我正在使用一个类（如 Fancybox FAQ 中所建议的那样）。

我想念什么？

我首先使用较旧的fancybox 1.3.4 实现了这一点，它运行良好。

您可以在此地址找到问题的运行演示：http: [//demo.artonbit.com](http://demo.artonbit.com)

进入首页后，只需单击最左上角的图块（Displaced！），这将打开一个包含一些文本和三个缩略图的 iframe。这些是fancybox的触发器。他们成功调用了“callMe”方法，但是fancybox 找不到内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T02:11:09.770

我检查的第一件事是你的网站和你加载的脚本，所以我认为你只需要一个 jQuery 实例，而不是用两个不同的版本和命名空间来复杂化自己......无论如何。

现在你的代码，它没有正确的格式，因为你**要么**：

1）将fancybox绑定到一个选择器（例如一个类），如：

```
$(".selector").fancybox({
  // API options
}); 
```

2）手动调用fancybox

```
$.fancybox([
  href: 'images/showroom/playground/displaced/dispm_6.jpg'
],{
  // API options
  type: "image"
}); 
```

... 但不是 ：

```
$(".triggerid").fancybox('images/showroom/playground/displaced/dispm_6.jpg', { 
   // API options
   'type' : 'image'
}); 
```

...这是上述两者的混合。

在您的特定情况下，您只需在函数内部将 fancybox 脚本更改为正确的格式，例如：

```
function callMe(){
  $(".triggerid").fancybox({
      href: 'http://demo.artonbit.com/images/showroom/playground/displaced/dispm_6.jpg'
  });
  triggerFancybox();
} 
```

...或使用您的命名空间`$jj`

**注意**：由于`href`具有图像扩展名，因此您实际上不需要指定`type: "image"`

眼见为实...... **[JSFIDDLE](http://jsfiddle.net/q5er7/)**

# redis - Redis，即将过期的数组项

> ID：13828744
> 
> 赞同：0
> 
> 时间：2012-12-11T21:23:59.737
> 
> 标签：redis

我正在尝试使用 Redis 来防止对网站的过度访问，这是一个计划，我有一组数据

> IP => (0 => http://, 1 => http://)

但是我需要做的是为这些项目中的每一个设置一个 EXPIRE 标签，我已经研究了集合、哈希和许多其他的，但是我似乎找不到方法。服务器支持告诉我这是可能的，但我对 redis 太陌生了。

我在他们的网站上找到了以下示例

```
RPUSH pagewviews.user:<userid> http://.....
EXPIRE pagewviews.user:<userid> 60 
```

但是，我需要知道钥匙，我似乎无法获得或找到获得的方法。我正在使用 predis 来处理 redis。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T02:22:43.593

`userid`来自您的应用程序，而不是来自 Redis 。有可能：

*   一个合乎逻辑的、唯一的用户名（如果用户在您的站点上进行身份验证）
*   分配给每个用户的某种唯一 ID 并保存在 cookie 中（缺点：用户可以删除 cookie）
*   客户端 IP 地址（缺点：多个用户可能出于各种原因使用相同的 IP 地址）。

# android - 从 AppWidget 启动 MainActivity 不起作用

> ID：13828747
> 
> 赞同：0
> 
> 时间：2012-12-11T21:24:14.750
> 
> 标签：android, android-intent, android-widget

我正在尝试从具有待处理意图的 AppWidget 启动 MainActivity，但我无法弄清楚为什么它不会触发意图。该小部件有一个最多包含 3 个项目的 ListView，它绑定到 RemoteViewsService。我想在单击任何行时启动我的 MainActivity。谁能告诉我我可能做错了什么？

我已经检查了一些相关的帖子，比如[Launching an activity from an AppWidget](https://stackoverflow.com/questions/6052646/launching-an-activity-from-an-appwidget)，甚至尝试从这里运行示例[https://github.com/commonsguy/cw-advandroid/tree/master/AppWidget](https://github.com/commonsguy/cw-advandroid/tree/master/AppWidget)，虽然示例有效，仍然无法说出我做了什么不同的事情。

以下是我的一些相关代码，如果我应该发布更多内容，请告诉我，如果我的帖子看起来不正确，请提前道歉，因为这是我的第一个问题：

小部件布局：

```
<?xml version="1.0" encoding="utf-8"?>
<ListView xmlns:android="http://schemas.android.com/apk/res/android"
      android:id="@+id/stocks"
      android:layout_width="match_parent"
      android:layout_height="match_parent"
/> 
```

AppWidgetProvider 类：

```
@Override
    public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {
        Log.d(LOGTAG, "onUpdate");
        Log.d(LOGTAG, "appWidgetIds.length="+appWidgetIds.length);
        for (int i = 0; i < appWidgetIds.length; ++i) {
            Log.d(LOGTAG, "appWidgetIds[i]="+appWidgetIds[i]);
        }
        // update each of the app widgets with the remote adapter
        for (int i = 0; i < appWidgetIds.length; ++i) {
            updateWidget(context, appWidgetManager, appWidgetIds[i]);
        }
        super.onUpdate(context, appWidgetManager, appWidgetIds);
    }

    public void updateWidget(Context context, AppWidgetManager appWidgetManager, int appWidgetId) {
        Log.d(LOGTAG, "updateWidget id="+appWidgetId);

        // Sets up the intent that points to the StackViewService that will
        // provide the views for this collection.
        Intent intent = new Intent(context, StockAppWidgetService.class);
        intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, appWidgetId);
        // When intents are compared, the extras are ignored, so we need to embed the extras
        // into the data so that the extras will not be ignored.
        intent.setData(Uri.parse(intent.toUri(Intent.URI_INTENT_SCHEME)));
        RemoteViews rv = new RemoteViews(context.getPackageName(), R.layout.stock_appwidget);
        rv.setRemoteAdapter(R.id.stocks, intent);

        Intent contentIntent = new Intent(context, MainActivity.class);
        //contentIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP | Intent.FLAG_ACTIVITY_NEW_TASK);
        PendingIntent startAppPendingIntent = 
                PendingIntent.getActivity(context, 0, contentIntent, 0);
        rv.setPendingIntentTemplate(R.id.stocks, startAppPendingIntent);

        appWidgetManager.updateAppWidget(appWidgetId, rv);
    } 
```

显现：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="x40241.chris.yuan.a4.app"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="14"
        android:targetSdkVersion="16" />

    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.Holo.Light.DarkActionBar" >
        <activity
            android:name=".MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name=".SearchableActivity" >
            <intent-filter>
                <action android:name="x40241.chris.yuan.a4.app.SEARCH" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <service android:name=".StockServiceImpl" />
        <service android:name=".StockAppWidgetService"
                 android:permission="android.permission.BIND_REMOTEVIEWS" />
        <receiver android:name=".ServiceLauncher">  
            <intent-filter>  
                <action android:name="android.intent.action.BOOT_COMPLETED" />  
            </intent-filter>  
        </receiver>
        <receiver android:name=".StockAppWidgetProvider" >
            <intent-filter>
                <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
            </intent-filter>
            <meta-data android:name="android.appwidget.provider"
                       android:resource="@xml/stock_appwidget_info" />
        </receiver>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T06:59:57.883

我想我找到了答案，或者至少在相关帖子中找到了一个可行的解决方案：

[应用小部件中的 AdapterViewFlipper：setPendingIntentTemplate() 和 setOnClickFillInIntent() 不起作用](https://stackoverflow.com/questions/12958186/adapterviewflipper-in-app-widget-setpendingintenttemplate-and-setonclickfilli)

事实证明我没有正确设置 FillInIntent。我应该在列表项的顶层视图而不是列表本身上调用 setOnClickFillInIntent。这是使它在 RemoteViewsFactory 中工作的代码更改：

```
 public RemoteViews getViewAt(int position) {
        if (DEBUG) Log.d(LOGTAG, "StockRemoteViewsFactory getViewAt position="+position);

        RemoteViews rv = new RemoteViews(mContext.getPackageName(), R.layout.widget_item);
        rv.setTextViewText(R.id.text_symbol, mStockItems.get(position).getSymbol());
        rv.setTextViewText(R.id.text_price, String.format("$%.2f", mStockItems.get(position).getPrice()));

        Intent fillInIntent = new Intent(Intent.ACTION_MAIN);
        fillInIntent.putExtra(StockAppWidgetProvider.ITEM_NUM, position);

        // set on the top level view of the list item, instead of the list view itself
        //rv.setOnClickFillInIntent(R.id.stocks, fillInIntent);
        rv.setOnClickFillInIntent(R.id.general_layout, fillInIntent);    

        return rv;
    } 
```

# svg - D3 – SVG 矩形在文本之后渲染，覆盖文本

> ID：13828749
> 
> 赞同：0
> 
> 时间：2012-12-11T21:24:18.277
> 
> 标签：svg, d3.js

我知道使用 SVG，DOM 元素按照它们的编码顺序呈现，并且不支持 z-index。我已经建立了这个图表（基于 Swimlanes：[http](http://bl.ocks.org/1962173) ://bl.ocks.org/1962173 ），其中单词经常被矩形覆盖，并且在 DOM 中查看，许多矩形实际上是在我的文本之后呈现的，甚至尽管在我的代码中，文本显然是最后调用的。这是现场直播：

[http://stanford.edu/~c0chran/cgi-bin/WordRiver/index.html](http://stanford.edu/~c0chran/cgi-bin/WordRiver/index.html)

以及我渲染所有形状（矩形/标签）的代码：

```
function display () {

 var rects, labels
, minExtent = brush.extent()[0]
, maxExtent = brush.extent()[1];
var extentWidth = maxExtent - minExtent;
if (extentWidth > max_extent_width)
  maxExtent = minExtent + max_extent_width;
if (extentWidth < min_extent_width)
  maxExtent = minExtent + min_extent_width;
var visItems = jsonData.filter(function (d) {return d.time_bin <= maxExtent && d.time_bin >= minExtent});
mini.select('.brush').call(brush.extent([minExtent, maxExtent])); 

x1.domain([minExtent, maxExtent]);

if ((maxExtent - minExtent) > 5) {
xDateAxis.ticks(10);
}
else if ((maxExtent - minExtent) > 10) {
xDateAxis.ticks(20);
}
else {
xDateAxis.ticks(5);
}

// update the axis

main.select('.main.axis').call(xDateAxis)
.selectAll('text')
  .attr('dx', 5)
  .attr('dy', 12);

// upate the item rects
rects = itemRects.selectAll('rect')
.data(visItems, function (d,i) { return i; })
.attr('x', function(d) { return x1(d.time_bin); })
.attr('y', function(d) { return y1(d.dist_bin) + .1 * y1(1) + 0.5; })
.attr('width', 165)
.call(updateText);

rects.enter().append('svg:rect')
.attr('x', function(d) { return x1(d.time_bin); })
.attr('y', function(d) { return y1(d.dist_bin) + .1 * y1(1) + 0.5; })
.attr('width', 165)
.attr('class','borderMe')    
.attr('height', function(d) { return .8 * y1(1); })
.style('fill', function(d) {            
    var b = Math.round(colorScale(d.positivity));
    return "rgb(25,50," + b + ")";
})
.call(updateText);

rects.exit().remove();

// update the item labels
function updateText() {
console.log('hello!');
labels = itemRects.selectAll('text')
.data(visItems, function (d) { return d.word; })
.text(function (d) { return d.word; })
.attr('x', function(d) { 
    return Math.round(x1(d.time_bin+0.1)); 
})
.attr('y', function(d) { return y1(d.dist_bin) + .6 * y1(1)})
.attr('id','hover');
}
labels.enter().append('svg:text')
.text(function (d) { return d.word; })
.attr('x', function(d) { 
    return Math.round(x1(d.time_bin+0.1)); 
})
.attr('y', function(d) { return y1(d.dist_bin) + .6 * y1(1) })
.attr('text-anchor', 'start')
.attr('class', 'itemLabel')
.attr('id','hover')
.style('kerning',function(d) {
    if (typeFaceScale(d.objectivity) < 1) {
        return 0.5;
    }
})
.style('font-family', function(d) { // add more if/else to ammend objectivity texts
    if (typeFaceScale(d.objectivity) < 1) {
     return 'Impact';
    }
    else if(typeFaceScale(d.objectivity) > 2) {
        return 'Times New Roman'
    }
    else {return 'Rockwell'}
})
.style('font-size',function(d) {
    if (d.word.length >= 8 && wordSizeScale(d.frequency)>=16) { 
        return 16;
    }
    if ((maxExtent - minExtent) <= 5) {
        return Math.round(wordSizeScale(d.frequency))
    }
    else {
        return Math.round(wordSizeScale(d.frequency)- extentSizeScale(maxExtent-minExtent));
    }
})
.style('fill','white');
labels.exit().remove(); 
```

};

# html - 嵌套列表和悬停效果的问题

> ID：13828750
> 
> 赞同：1
> 
> 时间：2012-12-11T21:24:23.713
> 
> 标签：html, css

我从包含嵌套列表的菜单中得到了一些丑陋的行为。

父菜单有一些广泛的类别。当用户将鼠标悬停在这些列表项之一上时，下面会出现一个子菜单。这可以。

但是，子项也可以有子菜单（我将这些称为孙子菜单）。这些也会出现在悬停时，但是当用户不再悬停在孙子上时，整个子菜单就会消失。

这最好用[FIDDLE来解释](http://jsfiddle.net/zWqZc/1/)

*   将鼠标悬停在 Parent 上会显示 3 个孩子。这很好。
*   将鼠标悬停在 Child 1 上会显示孙子。这也很好。
*   但是现在一旦展开子 1 下的孙子，尝试单击子 2 或子 3 就会变得笨拙。这真是太糟了。

如果没有这种愚蠢的行为，如何在这里实现体面的悬停效果？（最好使用 CSS 解决方案。）

HTML

```
<div id="centeredmenu">
    <ul>
      <li>
        <p><a href="#"><span>Parent</span></a></p>
            <ul>
               <li>
                   <a href="#">Child 1 </a>
                      <ul>
                        <li><a href="#">grandchild 1</a></li>
                        <li><a href="#">grandchild 2</a></li>
                        <li><a href="#">grandchild 3</a></li>
                      </ul>  
                </li>
                <li><a href="#">Child 2</a></li>
                <li><a href="#">Child 3</a></li>
              </ul>
          </li>
   </ul> 
```

​</p>

CSS

```
#centeredmenu ul {
   clear:left;
   float:left;
   list-style:none;
   margin:0;
   padding:0;
   position:relative;
   left:50%;
   text-align:center;
}
#centeredmenu ul li {
   display:block;
   float:left;
   list-style:none;
   margin:0;
   padding:0;
   position:relative;
   right:50%;
}
#centeredmenu ul li a {
    display:block;
    margin:0 0 0 0px;
    padding:3px 10px;
    background: rgb(240,240,240);
    color:#333333;
    text-decoration:none;
    line-height:2.3em;
    border-top: 4px solid transparent;
    border-right: 1px solid transparent;
    border-bottom: 3px solid transparent;
    border-left: 1px solid #848484;
}

/*hides the sub menu*/
#centeredmenu ul li ul li{
    display: none;
}

/*displays sub menu on hover*/
#centeredmenu ul li:hover ul li {
    display: block;
    clear: both;
    margin-left: 15px;
}

/*hides sub-sub menu*/
#centeredmenu ul li ul li ul{
    display: none;
}

/*displays sub-sub menu on hover*/
#centeredmenu ul li ul li:hover ul {
    display: block;
    clear: both;
    margin-left: 15px;
}​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T18:59:47.120

嵌套列表的标记结构看起来不错。

在嵌套的 UL 上使用绝对位置和您提到的 z-index 调整应该可以做到这一点。

这个仅 CSS 的演示看起来很相关：

[http://line25.com/wp-content/uploads/2012/css-menu/demo/index.html](http://line25.com/wp-content/uploads/2012/css-menu/demo/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T21:29:57.930

问题是当您将鼠标从 child1 移到 child2 上时，child1 折叠并将 child2 从鼠标光标下移出。您需要绝对定位孙子，以免它们包含在子孙中。

# java - 如何调整 JMenuItem 的大小以适合 JButton？

> ID：13828751
> 
> 赞同：0
> 
> 时间：2012-12-11T21:24:24.650
> 
> 标签：java, swing, jbutton, jmenu

这是我正在使用的代码：

```
JMenu menu = new JMenu("Menu");

JMenuItem item = new JMenuItem("Add");
item.add(new JButton("SOMETHING A BIT WORDY"));
menu.add(item);

// ... 
JMenuBar menuBar = new JMenuBar();
menuBar.addMenu(menu);
JFrame frame = new JFrame();
frame.setJMenuBar(menuBar);

// ...
frame.pack();
frame.setVisible(); 
```

但是，按钮（在菜单项内部）看起来很小，并且仅包含文本“...”，当按钮的大小无法适合预期的文本时使用该文本。有没有办法让我的 JMenuItem “增长”以适合我的 JButton（或 JTextArea，或 JLabel，或任何可能的组件）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T03:20:35.453

我完全同意发表评论的其他人，在菜单项中放置一个按钮可能是一种奇怪的组合，如果你坚持这样做，setPreferredSize 可以解决你的问题。我使用了一个糟糕的硬代码实现，如果有人知道如何动态设置宽度，也请指导我。:P 提前谢谢。

```
JMenu menu = new JMenu("Menu");

JMenuItem item = new JMenuItem("Add");
item.add(new JButton("SOMETHING A BIT WORDY"));
item.setLayout(new FlowLayout()); // set FlowLayout for item
item.setPreferredSize(new Dimension(200, 100)); // hard code implementation :-(
menu.add(item);

// ... 
JMenuBar menuBar = new JMenuBar();
menuBar.add(menu);
JFrame frame = new JFrame();
frame.setJMenuBar(menuBar);

// ...
frame.pack();
frame.setVisible(true); 
```

![在此处输入图像描述](../Images/948f77541204f3a29af90be365476fd3.png)

# sql - 基于其他列的条件时使用大小写的列的不同值

> ID：13828754
> 
> 赞同：1
> 
> 时间：2012-12-11T21:24:37.963
> 
> 标签：sql, join, if-statement

我有两张表，它们有一个共同的字段（acct #）。表 1 具有不同的帐户 # 值，表 2 具有帐户 # 在 2 年期间每天销售的数量。我实际上是在尝试从 table2 到 table1 进行 sumif 查找，如果 Volume 在 table2 中包含的某个日期 [DeliveryDateSk] 内，则对 Volume 求和。

现在我可以为 table1 和 table2 使用同一个表。我对 table1 的 sql 将是：

```
SELECT
left([FactActualDetail].[SourceCustomerProductCode],7) as [Acct #]
FROM [dbo].[FactActualDetail] [FactActualDetail]
GROUP BY left([FactActualDetail].[SourceCustomerProductCode],7) 
```

表 2 已被分解，我已按天对所有产品进行分组，删除了表的 [EQMultiplier] 列中包含 0 的任何产品线，仅显示 [DeliveryDateSk] > 20110102。我还加入了另一个表 (DimCustomer) 仅向我显示 [SC] = 4 或 5 或 6 或 7 的客户。我需要执行此 sql 以减少行数，并按账户按天显示 Volume by day。

```
SELECT 
sum([FactActualDetail].[Volume]) AS [Volume],
sum([FactActualDetail].[GrossMargin]) AS [GrossMargin],
left([FactActualDetail].[SourceCustomerProductCode],7) as [Acct #],
[FactActualDetail].[DeliveryDateSK] AS [DeliveryDateSK]

FROM [dbo].[FactActualDetail] [FactActualDetail]
LEFT JOIN [dbo].[DimCustomer] [DimCustomer] ON ([FactActualDetail].[CustomerSK]
= [DimCustomer].[CustomerSK])

WHERE [EQMultiplier] > 0 AND [DeliveryDateSK] > 20110102 AND ([SC] = 04 OR [SC]
= 05 OR [SC] = 06 OR [SC] = 07)

GROUP BY left([FactActualDetail].[SourceCustomerProductCode],7),[DeliveryDateSK] 
```

所以上面代码的结果返回给我的 Table2 看起来像这样：

```
| Volume | GrossMargin  | Acct #  |  DeliveryDateSk | 
---------------------------------------------------------------
|    5   |      35      | 5551111 |     20110101    |  
|    3   |      15      | 5551111 |     20110105    |  
|    6   |      40      | 5551112 |     20110101    |  
|    2   |      11      | 5551112 |     20110109    |  
|    1   |       9      | 5551112 |     20110110    |  
|    9   |      77      | 5551113 |     20110102    |  
|    8   |      74      | 5551114 |     20110104    | 
```

我现在要做的是将 table2 与 table1 连接，其中包含一个不同的 Acct #'s 列表。对于 table1，如果 [DeliveryDateSk] 在今年的第 1 周，我将需要为将返回 Volume 的列编写代码。然后，我将编写语句以在我编写的第一个代码的前 52 周内返回 [DeliveryDateSk] 的 Volume。语句将如下所示：

```
sum(CASE WHEN ([DeliveryDateSK] >= 20120102 AND [DeliveryDateSk] <= 20120108)
AND [FactActualDetail].[CaseAndGallonVolume] > 0 THEN 1 ELSE 0 end) AS 
[Week1 2012]

sum(CASE WHEN ([DeliveryDateSK] >= 20110103 AND [DeliveryDateSk] <= 20120101) 
AND [FactActualDetail].[CaseAndGallonVolume] > 0 THEN 1 ELSE 0 end) AS [2011] 
```

这个想法是，如果一个账户在今年的第 1 周有交易量，而在前 52 周没有交易量，那么它就是一个新账户，需要注意（该列中的简单“1”就足够了第 1 周）。然后，我需要在接下来的 51 周内重复上述声明。因此，如果一个账户在 2012 年的第 2 周（在 20120109 和 20120115 的 [DeliveryDateSK] 之间）有交易量，并且在前 52 周（2011 年第 2 周到 2012 年第 1 周，或更准确地说 - 20110110 和 20120108 之间）没有交易量)，那么我会将其记为“2”。所以你可以想象一个很长的代码！

我正在描绘一个 sql 语句，如下所示：

```
sum(CASE WHEN ((([DeliveryDateSK] >= 20120102 AND [DeliveryDateSk] <= 20120108) AND
[FactActualDetail].[Volume] > 0) AND (([DeliveryDateSK] >= 20110103 AND     
[DeliveryDateSk] <= 20120101) AND [FactActualDetail].[Volume] < 1)) THEN 1 ELSE 0 end)
AS [Week 1 NEW] 
```

如果帐户是新帐户，那应该返回 1。然后我将重复代码并在第 2 周执行 ELSEIF，依此类推，直到 52。我的输出将只有两列：Acct # 和我的长代码列，如果它们满足健康）状况。

任何建议将不胜感激！

# javascript - 清除 Tampermonkey 的浏览器选项卡 RAM 使用情况？

> ID：13828755
> 
> 赞同：1
> 
> 时间：2012-12-11T21:24:42.473
> 
> 标签：javascript, google-chrome, memory-management, tampermonkey

我正在寻找一种使用 Tampermonkey for Chrome 注入 javascript 的解决方案，每次重新加载页面都会清除 RAM 的使用而不增加它。

我正在使用 Chrome Developer Tools->Timeline 对注入的脚本进行测试。每次我重新加载页面时，RAM 使用量都会增加。

我的 javascript 包含几个 jQuery AJAX 调用和几行代码。

我尝试了所有可能的 javascript reload 函数，但没有一个能给我想要的结果。

因此，如果有人有想法，如何解决这个问题，我将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T22:39:09.593

**更新：**
[我已经修复了 Tampermonkey](http://tampermonkey.net/changelog.php?version=2.10.2995&ext=dhdg)中的内存泄漏，即使在页面重新加载后，它也会导致一些数据保留在内存中。所以也许你的问题现在已经解决了。

* * *

* * *

选择另一个选项卡并等待几秒钟。没有其他方法可以触发垃圾收集。

也许你可以使用这个魔法来伪造一个完整的重新加载：

```
// ==UserScript==
// @name       fake reload
// @namespace  http://use.i.E.your.homepage/
// @version    0.1
// @description  enter something useful
// @match      http://tampermonkey.net/empty.html
// @copyright  2012+, You
// ==/UserScript==

function fake_reload() {
    console.log("...now");
    GM_openInTab(window.location.href, {active: false, insert: true});
    // close the current window some ms later to allow the insert magic to detect this' tab position
    window.setTimeout(window.close, 1);
}
window.setTimeout(fake_reload, 3000);
console.log("run 'fake reload'..."); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T13:46:01.947

您可能在脚本代码中有内存泄漏。有关堵塞此类泄漏的想法，请参阅[此答案](https://stackoverflow.com/a/13702786/331508)。

通常，您无法根据设计从 javascript 中清除 RAM。但是，如果您对在用户脚本中（也可能在目标页面上）查找和堵塞内存泄漏非常执着，您可以获取/构建 Chrome 的调试版本，然后查看如何允许 javascript 强制垃圾收集的[答案](https://stackoverflow.com/a/3034245/331508).

# html5boilerplate - 合并 CSS 文件 - HTML5 样板 Ant 构建脚本

> ID：13828761
> 
> 赞同：0
> 
> 时间：2012-12-11T21:25:09.267
> 
> 标签：html5boilerplate, build-script

我正在使用最新版本的 H5BP 以及他们的 Ant 构建脚本，并且在运行构建脚本时很难让 CSS 文件组合/连接。我希望将 normalize.css 和 main.css 合并到一个文件中。我尝试将以下内容添加到 project.properties 文件中，但没有这样的运气：

```
file.stylesheets  = normalize.css 
```

我也试过：

```
file.stylesheets  = normalize.css,main.css 
```

任何帮助将非常感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T16:41:33.213

你必须设置

```
file.root.stylesheet    = normalize.css 
```

然后

```
file.stylesheets  = normalize.css,main.css 
```

在项目.properties

# entity-framework - 创建新表实体框架代码优先模式

> ID：13828765
> 
> 赞同：1
> 
> 时间：2012-12-11T21:25:25.787
> 
> 标签：entity-framework, ef-code-first, entity-framework-migrations

我对这种代码优先模式很陌生。我创建了一个类，现在我想在我的数据库中创建一个表。在 PM 控制台中，我编写了“添加迁移 addSummaries”并按 Enter。我有以下错误：

```
PM> add-migration addsummaries
System.ArgumentNullException: Value cannot be null.
Parameter name: key
at System.Collections.Generic.Dictionary`2.FindEntry(TKey key)
at System.Collections.Generic.Dictionary`2.TryGetValue(TKey key, TValue& value)
at System.Data.Entity.ModelConfiguration.Configuration.Mapping.SortedEntityTypeIndex.Add(EdmEn    titySet entitySet, EdmEntityType entityType)
at  System.Data.Entity.ModelConfiguration.Configuration.Mapping.EntityMappingService.Analyze()
at  System.Data.Entity.ModelConfiguration.Configuration.ModelConfiguration.ConfigureEntityTypes (DbDatabaseMapping databaseMapping, DbProviderManifest providerManifest)
at     System.Data.Entity.ModelConfiguration.Configuration.ModelConfiguration.Configure(DbDatabase Mapping databaseMapping, DbProviderManifest providerManifest)
at System.Data.Entity.DbModelBuilder.Build(DbProviderManifest providerManifest,  DbProviderInfo providerInfo)
at System.Data.Entity.DbModelBuilder.Build(DbConnection providerConnection)
at System.Data.Entity.Internal.LazyInternalContext.CreateModel(LazyInternalContext  internalContext)
at System.Data.Entity.Internal.RetryLazy`2.GetValue(TInput input)
at System.Data.Entity.Internal.LazyInternalContext.InitializeContext()
at System.Data.Entity.Internal.LazyInternalContext.get_CodeFirstModel()
at System.Data.Entity.Infrastructure.EdmxWriter.WriteEdmx(DbContext context, XmlWriter  writer)
at System.Data.Entity.Migrations.Extensions.DbContextExtensions.<>c__DisplayClass1\. <GetModel>b__0(XmlWriter w)
at System.Data.Entity.Migrations.Extensions.DbContextExtensions.GetModel(Action`1 writeXml)
at System.Data.Entity.Migrations.Extensions.DbContextExtensions.GetModel(DbContext context)
at System.Data.Entity.Migrations.DbMigrator..ctor(DbMigrationsConfiguration  configuration, DbContext usersContext)
at System.Data.Entity.Migrations.DbMigrator..ctor(DbMigrationsConfiguration  configuration)
at System.Data.Entity.Migrations.Design.ToolingFacade.BaseRunner.GetMigrator()
at     System.Data.Entity.Migrations.Design.ToolingFacade.GetPendingMigrationsRunner.RunCore()
at System.Data.Entity.Migrations.Design.ToolingFacade.BaseRunner.Run()
Value cannot be null.
Parameter name: key
PM> 
```

我不知道这是什么意思..有人可以帮我找到实际的错误吗？

编辑：

```
 public class Summary
{
    [Key]
    public int Id { get; set; }

    public Guid SummaryId { get; set; }

    [Required]
    [Display(Name="Title")]
    [MaxLength(500)]
    public string SummaryTitle { get; set; }

    [Display(Name = "Description")]
    public string Description { get; set; }

    public DateTime PublishDate { get; set; }

    public virtual UserProfile Writer { get; set; }

    public bool PublishStatus { get; set; }

    [Required]
    public DateTime LastActionDate { get; set; }

    public HttpPostedFileBase DocumentFile { get; set; }
    public string FileName { get; set; }
    public string FileLocation { get; set; }

    [Required]
    public string Tag { get; set; }

    public virtual ICollection<Course> Category { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-02T01:23:07.883

如果您有一个从“Summary”类继承的类，并且它引用了未包含在您的 DbContext 中的另一个自定义类，您将遇到此问题。

# extjs - Ext.getCmp 在 ExtJS4 中不起作用

> ID：13828774
> 
> 赞同：0
> 
> 时间：2012-12-11T21:25:59.007
> 
> 标签：extjs, extjs4

我正在尝试创建一个组件并在控制器内部访问它。但是在通过 id 访问组件时，它并没有返回组件。它总是返回未定义的。请在代码下方找到。

在此处输入代码

```
//Component creation in view layer as below

Ext.define('MyApp.view.performance.grid.IFrameGridCmp', {
    extend: 'Ext.panel.Panel',
    alias: 'widget.crMainPanel',
    id:'mainPanelId',
    layout: {
        align: 'stretch',
        type: 'vbox'
    },
    border:0,
    resizable: false,
    forceFit: true,
    autoWidth: true,
    initComponent: function() {
        Ext.apply(this, {
            items: [
                {
                    xtype:'panel',
                    flex:.02,
                    border:0
                },
                {
                    xtype:'crHeaderPanel',
                    flex:.05
                },
                {
                    xtype: 'crUpperPanel',
                    flex: 0.93
                },
                Ext.create('Ext.Component', {
                    autoEl: {
                        tag: 'iframe', 
                        cls: 'x-hidden', 
                        src: Ext.SSL_SECURE_URL
                    },
                    id:'FileDownloader',
                    height:0,
                    listeners: {
                        afterrender: function () {
                            this.getEl().on('load', function () {
                                console.log('loaded download frame');
                            });
                        }
                    },
                    load: function(config){
                        var e = this.getEl();
                        e.dom.src = config.url + (config.params ? '?' + Ext.urlEncode(config.params) : '');
                        e.dom.onload = function() {
                            Ext.getBody().unmask();
                            if(e.dom.contentDocument.body.childNodes[0].wholeText == '404') {
                                Ext.Msg.show({
                                    title: 'Attachment missing',
                                    msg: 'The document you are after can not be found on the server.',
                                    buttons: Ext.Msg.OK,
                                    icon: Ext.MessageBox.ERROR 
                                });
                            }
                        };
                    }
                })
            ]
        });
        this.callParent(arguments);
    }
});

========================================

    enter code here

//Accessing the controller as below in controller

views: ['performance.grid.IFrameGridCmp'],

//The below line gives error
var downloader = Ext.getCmp('FileDownloader');
            downloader.load({
                url: '/APXUI/data/json/xls?exportData='+Ext.JSON.encode(records)
            }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T21:44:09.380

好吧，在您调用时未创建视图`Ext.getCmp()`

请注意，这`views: ['performance.grid.IFrameGridCmp'],`只是一种将该视图绑定到控制器的方式，这意味着控制器将为您创建一个 getter，仅此而已。您仍然需要通过调用`.create();`或实例化视图`Ext.widget('crMainPanel')`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T22:02:29.767

在您的控制器中，例如使用控制来处理它：

```
me.control({
    'crMainPanel #FileDownloader': {
         afterrender: me.addDownloader
    }
}); 
```

不要使用 Ext.getCmp() 它真的很慢，你会遇到很多问题。不要使用 id - 最好使用 itemId。为什么需要从控制器调用它？

# javascript - 使用 Jquery Mobile 在过渡期间停止页面大小调整

> ID：13828783
> 
> 赞同：18
> 
> 时间：2012-12-11T21:26:30.380
> 
> 标签：javascript, jquery, cordova, jquery-mobile

我正在构建一个需要扩展到所有分辨率的 phonegap 应用程序，因此我用百分比来定义一切。我还使用了一个带有我在 Jquery 中定义的 div 作为内容的固定标题。

我遇到的问题是，在页面之间的转换过程中，由于页面高度在转换过程中发生了变化，所以会出现“卡顿”。我正试图阻止这种情况发生。有什么想法吗？

我在下面创建了一个示例来真正说明这一点。 [http://jsfiddle.net/fz7qs/2/](http://jsfiddle.net/fz7qs/2/)

```
<div id="pageContainer" style="position: relative !important; height: 100%;">
<div data-role="page" id="test1">

    <div data-role="header">
        <h1>Page Title</h1>
    </div><!-- /header -->

    <a id="page2link">To Page 2</a>

    <div data-role="content">    
        <p>Page content goes here.</p>        
    </div><!-- /content -->

    <div data-role="footer">
        <h4>Page Footer</h4>
    </div><!-- /footer -->
</div><!-- /page -->

<div data-role="page" id="test2" style="height: 568px">

<div data-role="header">
    <h1>Page 2</h1>
</div>

<a id="page1link">To Page 1</a>

<div data-role="content" style="height: 50%;">
    <p style="height: 80%; border: 1px solid black;">This is page 2</p>        
</div><!-- /content -->

<div data-role="footer">
    <h4>Page Footer</h4>
</div> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-14T03:01:07.517

*整个 jsFiddle 页面在 Chrome 桌面浏览器的第一次访问时跳转，因此在使用前按下 jsFiddle RUN 按钮以正确加载。*

***编辑：根据评论部分的发展修改了答案和 jsFiddle。***

***编辑 2：jsFiddles 现在使用 jQuery 1.7.2 和 jQuery Mobile 1.2.0 来修复 Chrome 浏览器错误。***

[**jsFiddle 演示**](http://jsfiddle.net/LJgzQ/3/)

解决方案是在 CSS 文件而不是 HTML 部分中**设置样式，因为****jQuery Mobile UI**也通过样式表拥有自己的样式主题。

此外，您`extra closing div`在该 HTML 的底部有一个 for 页面，并且没有关闭网页。jsFiddles 不需要 HTML 中的 head 部分，因为页面已设置好`HTML5`，您只需使用“**管理资源**”按钮将文件（移动 jQuery）导入 jsFiddle。

*尽管您在问题中将其列为完整的百分比单位，但我保留了示例中所示的像素单位，但这些也可以是百分比。*

**CSS 设置：**

```
a {
 cursor: hand;
 cursor: pointer;    
}

.content1 {
  height: 268px;
}

.text1 {
  height: 50%;
  border: 1px solid black;
}

.content2 {
  height: 568px;
}

.text2 {
  height: 80%;
  border: 1px solid black;
} 
```

在您的 HTML 部分中，我还`footer`使用以下方法将 固定到页面底部`data-position`：

```
<div data-role="footer" data-position="fixed"> 
```

除了将 固定到页面底部之外，您还可以通过为每个具有*相同 value*`footer`的页面添加额外设置来使其不动画化。`data-id`

 *```
<div data-role="footer" data-id="foo" data-position="fixed"> 
```

[**jsFiddle 页脚**](http://jsfiddle.net/LJgzQ/4/)。

* * *

***编辑 2：***根据最近在 Chrome 中`jQuery 1.8.2`和***发现的错误（隐藏的滚动条仍然会导致正文元素跳转***），这是一个修改后的 jsFiddle 示例：`jQuery Mobile 1.2.0`

 *[**基于 jQuery 1.7.2 和 jQuery Mobile 1.2.0 的 jsFiddle 百分比**](http://jsfiddle.net/H5NRs/)

**关于这个错误：**

我刚刚发现在使用 jsFiddle中的函数期间将 jsFiddle 与 jQuery 1.8.2 和 jQuery Mobile 1.2.0**`overflow`**一起使用时无法按预期工作。**`hidden`****`scrollBars`**

*该功能是在jQuery动画期间隐藏浏览器滚动条，防止元素在页面更改的动画期间短暂跳转。*

浏览器的滚动条实际上​​是隐藏的，但正文部分的元素继续“跳跃”，就好像滚动条仍然存在一样。

***当 jsFiddle jQuery 设置为 1.7.2 时，不会发生这种情况。***

* * *

如果您想知道如何在一个页面上拥有多个伪页面，请在此处查看此[**jsFiddle**](http://jsfiddle.net/pG2ZA/)以获取不相关的[**SO 答案**](https://stackoverflow.com/a/10866418/1195891)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T19:44:43.880

尝试改变这一点：

```
<div data-role="content" style="height: 50%;"> 
```

对此：

```
<div data-role="content" style="height: auto;"> 
```

示例：http: [//jsfiddle.net/fz7qs/13/](http://jsfiddle.net/fz7qs/13/)**

# gradle - Gradle 无法通过我的 http 代理解析依赖项

> ID：13828787
> 
> 赞同：8
> 
> 时间：2012-12-11T21:27:02.667
> 
> 标签：gradle

当我尝试`gradle dependencies`在我的计算机上运行时，我收到 407 状态代码“需要代理身份验证”。

我在我的`%GRADLE_HOME%`目录中创建了一个 gradle.properties 文件。 `gradle.properties`包含以下条目：

```
systemProp.proxySet='true'
systemProp.http.proxyHost=http-proxy.nwie.net
systemProp.http.proxyPort=8080
systemProp.http.proxyUser=%myUserNameHere%
systemProp.http.proxyPassword=%myPasswordHere% 
```

通过将 HTTP_PROXY 设置为以下值，我可以成功通过我的 ruby​​ gem 代理： [http://%myUserNameHere%:%myPasswordHere%@http-proxy.nwie.net:8080](http://%myUserNameHere%:%myPasswordHere%@http-proxy.nwie.net:8080)

我正在使用 gradle-1.3，如果我遗漏了什么，请告诉我。

提前致谢！

更新：我尝试将 systemProp.http.proxyUser 设置为域/用户名格式的新值。以下是我当前的属性文件内容：

```
systemProp.proxySet=true
systemProp.http.proxyHost=http-proxy.nwie.net
systemProp.http.proxyPort=8080
systemProp.http.proxyUser=http-proxy.nwie.net/%USERNAME%
systemProp.http.proxyPassword=%PASSWORD% 
```

我目前收到与最初发现的相同的错误消息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-01-29T19:44:16.650

一些依赖项是从通过 HTTPS 运行的服务器获取的，因此您还需要为 https 属性指定值：

```
systemProp.https.proxyHost=http-proxy.nwie.net
systemProp.https.proxyPort=8080
systemProp.https.proxyUser=http-proxy.nwie.net/%USERNAME%
systemProp.https.proxyPassword=%PASSWORD% 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T22:40:14.133

它是 NTLM 代理吗（通常在带有活动目录的 Windows 环境中找到）。如果是这样，您可能必须使用格式域/用户名的用户名指定域名。看看这个链接。

[http://www.gradle.org/docs/current/userguide/build_environment.html](http://www.gradle.org/docs/current/userguide/build_environment.html)

# python-3.x - 没有名为 pylab 的模块

> ID：13828795
> 
> 赞同：2
> 
> 时间：2012-12-11T21:27:20.573
> 
> 标签：python-3.x, matplotlib

我刚刚在 Fedora 上升级到 python3，并试图导入`pylab`. 但是我得到了一个错误

```
ImportError: No module named 'pylab' 
```

经过一番研究，我发现[了一些](https://stackoverflow.com/questions/7223808/graphs-plots-in-python-3)有关安装软件包`matplotlib-py3k`以使其工作的信息。但是，该页面的链接已关闭！也许有一个`yum install`包我可以用来简单地安装`pylab`以使用 python3？

python2.x 的软件包已安装并正在运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T21:32:40.343

试试`yum install python-matplotlib`。如果我弄错了，那么您可以从源头尝试。

从`matplotlib`网站...

> 如果你在 Fedora/RedHat 上，你可以通过首先安装`yum-builddep`然后运行来获得构建 matplotlib 所需的所有依赖项： `su -c "yum-builddep python-matplotlib"`这不会构建 matplotlib，但它会获得所有构建依赖项，这将使从源代码构建更容易。

然后你可以使用`git clone git@github.com:matplotlib/matplotlib.git`git`matplotlib`然后用`cd matplotlib`and安装`python setup.py install`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-20T11:43:20.867

您需要通过执行以下操作为 python3 安装 matplotlib：

```
yum install python3-matplotlib 
```

# excel - 无效或不合格的参考

> ID：13828796
> 
> 赞同：2
> 
> 时间：2012-12-11T21:27:22.217
> 
> 标签：excel, vba

我需要输入工作表名称吗？我需要在具有相似工作表但选项卡名称不同的多个工作簿中使用此宏。

```
Sub pageSetup()
ActiveSheet.pageSetup
.Orientation = xlLandscape
.PaperSize = xlPaperLegal
.FitToPagesWide = 1
.FitToPagesTall = 1
.LeftMargin = Application.InchesToPoints(1#)

End Sub 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T03:11:37.713

由于蒂姆没有声称他的答案，您可以使用以下两个选项之一

*   格式化`ActiveSheet`
*   `WorkSheets`全部格式化`ActiveWorkBook`

**活动表**

```
Sub TimWilliamsPoints()
With ActiveSheet.pageSetup
.Orientation = xlLandscape
.PaperSize = xlPaperLegal
.FitToPagesWide = 1
.FitToPagesTall = 1
.LeftMargin = Application.InchesToPoints(1#)
End With
End Sub 
```

**所有工作表**

```
Sub TimWilliamsPoints2()
Dim ws As Worksheet
For Each ws In ActiveWorkbook.Sheets
With ws.pageSetup
.Orientation = xlLandscape
.PaperSize = xlPaperLegal
.FitToPagesWide = 1
.FitToPagesTall = 1
.LeftMargin = Application.InchesToPoints(1#)
End With
Next ws
End Sub 
```

# python - 如何在极坐标中制作箭袋图

> ID：13828800
> 
> 赞同：9
> 
> 时间：2012-12-11T21:27:26.257
> 
> 标签：python, matplotlib

如何在极坐标中制作箭袋图？我有关于 r 和 theta 的数据。我试过了：

```
import numpy as np

radii = np.linspace(0.5,1,10)
thetas = np.linspace(0,2*np.pi,20)
theta, r = np.meshgrid(thetas, radii)

f = plt.figure()
ax = f.add_subplot(111, polar=True)
ax.quiver(theta, r, dr, dt) 
```

其中 dr 和 dt 是 r 和 theta 方向的数据向量。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-12T19:07:21.223

看起来 quiver 不会为您进行转换。您需要手动进行 (r,t) -> (x,y) 转换：

```
radii = np.linspace(0.5,1,10)
thetas = np.linspace(0,2*np.pi,20)
theta, r = np.meshgrid(thetas, radii)

dr = 1
dt = 1

f = plt.figure()
ax = f.add_subplot(111, polar=True)
ax.quiver(theta, r, dr * cos(theta) - dt * sin (theta), dr * sin(theta) + dt * cos(theta)) 
```

![图形](../Images/c105cc20b5ba693a0c058eb72c0f2fdc.png)

# java - 检查字符串中的单词是否超过 50 个字符

> ID：13828809
> 
> 赞同：-3
> 
> 时间：2012-12-11T21:28:01.263
> 
> 标签：java, string, word

我知道还有其他帖子，但它们不是关于 java 的。我要的是一种检查字符串是否包含超过 56 个字符的单词的方法。然后我想在单词中插入一个“”（可能在中间）。我希望原始字符串中的空格保留在那里。（因此，split(" ") 对我没有帮助）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T21:29:51.950

```
Pattern.compile("\\w{56,}").matcher(string).find() 
```

当然，假设您对“单词”的定义与 Pattern 对“单词字符”的定义相匹配：`[a-zA-Z_0-9]`

要解压，只需查找 56 个或更多连续的单词字符。

如果你喜欢，你甚至可以抓住这个`Matcher`对象，这会让你得到 56+ 字母单词的`start()`and `end()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T21:30:14.983

循环遍历字符串，使用`indexOf()`方法查找下一个空格。将当前索引与前一个索引进行比较，看它是否超过 50。在中点插入空格，然后从该点重新启动 indexOf() 循环。

# internet-explorer-8 - 使用 TinyMCE 粘贴插件粘贴重音字符会导致 IE 崩溃

> ID：13828810
> 
> 赞同：1
> 
> 时间：2012-12-11T21:28:01.733
> 
> 标签：internet-explorer-8, crash, tinymce, non-ascii-characters

我们正在使用 TinyMCE 控件来处理我们的 Web 应用程序中的格式化文本。我们在应用程序中支持重音字符。但是，将重音字符粘贴到其他文本（是否重音）之间的字段中会导致 IE8 冻结并且必须重新启动。如果我们粘贴到空字段中，它可以正常工作，如果我们粘贴在字段的开头或结尾，它不会崩溃。只有在其他文本之间粘贴时才会崩溃。这在 FireFox 或 Chrome 中不会发生。

我已将“粘贴”插件确定为问题，但我们需要使用此插件将文本从 MS Word 正确粘贴到应用程序中。我无法在 TinyMCE 的文档或他们的论坛上找到任何内容。我在他们的论坛上发布了一些内容，但没有收到任何回复。

有没有其他人有这个问题和可能的解决方案（除了不使用 IE）？

# reporting-services - 参考 SSRS 中的 SSAS 参数

> ID：13828811
> 
> 赞同：0
> 
> 时间：2012-12-11T21:28:10.767
> 
> 标签：reporting-services, ssas

我的 SSRS 报告中有一个名为 Year 的参数。我的数据源是 SSAS。当我在文本字段中引用参数时，我得到..

[昏暗日期].[年份].&[2012]

我如何从中提取 2012 年？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T03:13:58.957

将引用表达式更改为使用 .Label，而不是 .Value。

# r - 在 geom_text 中绘制近似相等

> ID：13828814
> 
> 赞同：8
> 
> 时间：2012-12-11T21:28:24.850
> 
> 标签：r, ggplot2

我无法意识到如何在插入的文本之前放置近似相等的符号`geom_text`。这有效：

```
ggplot(data.frame(x=1:2, y=1:2), aes(x=x,y=y)) + geom_point() +
  geom_text(aes(label="10^10", x=1.5, y=1.5), parse=T) 
```

如果我`%~~%`在正文之前

```
ggplot(data.frame(x=1:2, y=1:2), aes(x=x,y=y)) + geom_point() +
  geom_text(aes(label="%~~%10^10", x=1.5, y=1.5), parse=T) 
```

它返回一个错误：意外的 SPECIAL %~~%

我发现了几个相关的问题，但无法应用给定的建议。我使用包 ggplot2_0.9.2.1。包 grDevices 也被加载。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T22:11:34.797

它将与方程式左侧的某些东西一起使用。这也可以`NULL`。

```
ggplot(data.frame(x=1:2, y=1:2), aes(x=x,y=y)) + geom_point() +
   geom_text(aes(label="NULL%~~%10^10", x=1.5, y=1.5), parse=T) 
```

![在此处输入图像描述](../Images/2a5b7356d4c09fdbfcc402d3f1013f67.png)

# c - 为什么我的节点上下文不打印任何内容？

> ID：13828816
> 
> 赞同：3
> 
> 时间：2012-12-11T21:28:34.210
> 
> 标签：c

我正在尝试创建一个保持算术运算顺序的计算器。我的想法是将中缀表示法转换为后缀表示法，这样我就可以从左到右解决它而不必担心括号。在尝试将中缀转换为后缀表示法之前，我想解决一个后缀表示法练习，我尝试使用节点来解决这个问题，但是我在将数字和运算符划分为节点时遇到了问题。我是指针和结构的新手，所有事情都让我感到困惑。

这是试图划分它的函数：

```
typedef char* String;
typedef struct node
{
    String       str;
    struct node *next;
} Node;

Node *rpn_divider(String equation, int eq_size)
{
     Node *rpn_parts = node_alloc(1); //pointer to first element in the node
     Node *part_temp = rpn_parts; //pointer to the lattest element in the node
     String temp = malloc(sizeof(char*) * NUM_SIZE);

     int i, j; //i = string equation index, j = string temp index

     for (i = 0, j = 0; i < eq_size; i++)
     {
         if (isNum(equation[i]))
            temp[j++] = equation[i];
         else if (isOper(equation[i]))
         {
              temp[0] = equation[i];
              temp[1] = '\0';
              next_node(part_temp, temp);
         }
         else
         {
              if (temp == '\0') continue;
              temp[j] = '\0';
              next_node(part_temp, temp);
              j = 0;
         }
     }
     free(part_temp->next);
     free(temp);
     return rpn_parts;
} 
```

这是 next_node 函数：

```
void next_node(Node *node, String str)
{
  node->str = str;
     node->next = node_alloc(1);
     node = node->next;
     free(str);
     str =  malloc(sizeof(char*) * NUM_SIZE);
     str[0] = '\0';
} 
```

当我尝试打印节点上下文时，它什么也不做：

```
Node *ptr;
for (ptr = head; ptr != NULL; ptr = ptr->next);
{
    printf("The Str = %s", ptr->str);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T21:40:15.683

在`next_node`函数中，您正在分配内存并将其分配给 str 的本地副本。这是内存泄漏，调用者永远不会看到 str 的新值。相反，您可以这样做：

```
void next_node(Node *node, String *str)
{
     node->str = *str;
     node->next = node_alloc(1);
     node = node->next;
     free(*str);
     *str =  malloc(sizeof(char*) * NUM_SIZE);
     (*str)[0] = '\0';
} 
```

并像这样使用它：

```
next_node(part_temp, &temp); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T15:42:06.673

你犯了一个大错误。
你在 for 循环后面放了一个分号，像这样

```
for (ptr = head; ptr != NULL; ptr = ptr->next); 
```

应该是这样的

```
for (ptr = head; ptr != NULL; ptr = ptr->next) 
```

可能这有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T18:18:56.920

好的，这很奇怪，如果我输入字符串，它会起作用：

```
String rpn_equation = "2 3 5 + 6 2 + 5 * + *"; 
```

甚至对于 2 位数字或 4 位数字，但如果我输入 3 位或 5 位数字，它会除错，我不明白为什么：

```
Node *rpn_divider(String equation, int eq_size)
{
     Node *head = node_alloc(1); //pointer to first element in the node
     Node *part_temp = head; //pointer to the lattest element in the node
     String temp = malloc(sizeof(char*) * NUM_SIZE);

     int i, j = 0; //i = string equation index, j = string temp index

     for (i = 0; i < eq_size; i++)
     {
         if (isNum(equation[i]))
            temp[j++] = equation[i];
         else if (isOper(equation[i]))
         {
              temp[0] = equation[i];
              temp[1] = '\0';
              part_temp->str = temp;
              part_temp->next = node_alloc(1);
              part_temp = part_temp->next;
              temp =  malloc(sizeof(char*) * NUM_SIZE);
              temp[0] = '\0';
         }
         else
         {
              if (temp[j] == '\0') continue;
              temp[j] = '\0';
              part_temp->str = temp;
              part_temp->next = node_alloc(1);
              part_temp = part_temp->next;
              temp =  malloc(sizeof(char*) * NUM_SIZE);
              temp[0] = '\0';
              j = 0;
         }
     }
     free(part_temp);         
     return head;
} 
```

我删除了 node_next 函数，因为它无法使用它..

# php - 某些字符串没有通过 GET 到达 PHP

> ID：13828820
> 
> 赞同：2
> 
> 时间：2012-12-11T21:28:47.423
> 
> 标签：php, javascript

我正在使用一个非常简单的模型应用程序来查询数据库并在地图上显示结果。应用程序向服务器发送一个`GET`httprequest，该服务器返回一个序列化的值数组。httprequest的基本结构是：

```
httpRequest.open("GET","handle-query.php?query=" + queryJs) 
```

并且，另一方面：

```
$queryPhp = $_GET["query"]; 
```

当查询看起来像这样时......

```
["SELECT%SUM(commit)%FROM%financialdata%WHERE%region='Centre'", "SELECT%SUM(commit)%FROM%financialdata%WHERE%region='Kara'", "SELECT%SUM(commit)%FROM%financialdata%WHERE%region='Maritime'", "SELECT%SUM(commit)%FROM%financialdata%WHERE%region='Plateaux'", "SELECT%SUM(commit)%FROM%financialdata%WHERE%region='Savanes'"] 
```

...然后将其正确传递给服务器，并生成响应。但是，当查询看起来像这样时......

```
["SELECT%SUM(commit)%FROM%financialdata%WHERE%prefect='Sotouboua'", "SELECT%SUM(commit)%FROM%financialdata%WHERE%prefect='Tchamba'", "SELECT%SUM(commit)%FROM%financialdata%WHERE%prefect='Tchaoudjo'", "SELECT%SUM(commit)%FROM%financialdata%WHERE%prefect='Assoli'", "SELECT%SUM(commit)%FROM%financialdata%WHERE%prefect='Bassar'", "SELECT%SUM(commit)%FROM%financialdata%WHERE%prefect='Bimah'", "SELECT%SUM(commit)%FROM%financialdata%WHERE%prefect='Doufelgou'", "SELECT%SUM(commit)%FROM%financialdata%WHERE%prefect='Keran'", "SELECT%SUM(commit)%FROM%financialdata%WHERE%prefect='Kozah'", "SELECT%SUM(commit)%FROM%financialdata%WHERE%prefect='Golfe'", "SELECT%SUM(commit)%FROM%financialdata%WHERE%prefect='Lacs'", "SELECT%SUM(commit)%FROM%financialdata%WHERE%prefect='Vo'", "SELECT%SUM(commit)%FROM%financialdata%WHERE%prefect='Yoto'", "SELECT%SUM(commit)%FROM%financialdata%WHERE%prefect='Zio'", "SELECT%SUM(commit)%FROM%financialdata%WHERE%prefect='Amou'", "SELECT%SUM(commit)%FROM%financialdata%WHERE%prefect='Haho'", "SELECT%SUM(commit)%FROM%financialdata%WHERE%prefect='Kloto'", "SELECT%SUM(commit)%FROM%financialdata%WHERE%prefect='Ogou'", "SELECT%SUM(commit)%FROM%financialdata%WHERE%prefect='Wawa'", "SELECT%SUM(commit)%FROM%financialdata%WHERE%prefect='Oti'", "SELECT%SUM(commit)%FROM%financialdata%WHERE%prefect='Tone'"] 
```

...然后服务器收到一个空字符串。这两个字符串都是由相同的函数生成的，并且都可以在我的虚拟服务器 (WAMP) 上完美运行。如果有人有任何想法，将不胜感激。

（PS阅读后我意识到我应该使用一个更好的清理框架等，但这只是一个需要在线生活2小时的演示，修复这个小东西比重新开始更好. 它在我的本地主机上完美运行。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T21:40:39.227

要真正回答您的问题，您将作为`query`(handle-query.php?query=) 发送一个 get 参数，然后将其作为`queryJS`(queryJs) 拉出。

```
$_GET['query'] // instead of $_GET['queryJs'] 
```

应该这样做。

（正如每个人都指出的那样，不要以明文或其他方式发送 SQL，除非您打算不实际执行 SQL，并且您只是想宣传您的数据库结构，也许它就是那么漂亮。）

# git - 通过 IntelliJ 将新文件添加到 git

> ID：13828829
> 
> 赞同：4
> 
> 时间：2012-12-11T21:29:23.463
> 
> 标签：git, intellij-idea

新文件已在脚本目录中创建

![在此处输入图像描述](../Images/0289a12d378a9264b766add2c592edee.png)

同时 IDEA 表示没有检测到更改（这是真的，提交的文件没有发生任何更改，但添加了新文件）

![在此处输入图像描述](../Images/cc2dcd5e5443ace7df40603f62cdf9b6.png)

手动添加文件后

![在此处输入图像描述](../Images/88688eb522dc8214843a33afa6bb100b.png)

IDEA 现在允许它被提交

![在此处输入图像描述](../Images/8908da4db3f91939650ec37b2bf37f43.png)

如何配置 IDEA 以检测新文件并允许添加它们（如果从 IDEA 外部添加）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T22:30:20.447

IDEA 不会在`Commit Project`对话框中显示新文件，投票支持：

*   [IDEA-73077](http://youtrack.jetbrains.com/issue/IDEA-73077)提交更改：添加选项以在此处显示未版本控制的文件

您的问题也是

*   [在 JetBrains intellij for git 中显示未跟踪的文件](https://stackoverflow.com/questions/13746106/show-untracked-files-in-jetbrains-intellij-for-git)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T15:15:54.343

我刚刚弄清楚如何轻松地将多个文件添加到 git 版本控制中：

1.  打开“更改”窗口
2.  如果您有未版本化的文件，树视图中将有一个“未版本化文件”类别。
3.  如果要一次添加所有这些文件，请右键单击“Unversioned Files”并选择“Add to VCS”
4.  如果有很多文件要添加，它会显示类似“查看所有未版本控制的文件”。选择您想要的文件，然后单击左侧的“+”号添加文件

可能还有更多我可以涵盖的情况，但以上内容应该足以让您弄清楚其余的情况：P

注意：这意味着上面的工作流程不仅适用于 Git，也适用于其他 VCS。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-11T21:39:12.777

确保 IntelliJ 已将 Git 配置为指向同一目录。然后，点击同步按钮（蓝色的“刷新”按钮），以便 IntelliJ 可以获取对文件系统所做的更改。它通常会自行执行此操作并且是相当自动的，但有时它可能会暂时不同步。

# c++ - 不会死的斐波那契兔子

> ID：13828831
> 
> 赞同：7
> 
> 时间：2012-12-11T21:29:31.683
> 
> 标签：c++

一对刚出生的兔子（一公一母）被放在一块田地里。兔子可以在一个月大的时候交配，所以在第二个月末，每对兔子都会生出两对新兔子，然后死去。

注：第 0 个月有 0 对兔子。第 1 个月，有 1 对兔子。

1.  编写一个程序 - 使用 while 循环 - 从用户那里获取月数，并在该月末打印兔子对的数量。

2.  在同一个 cpp 文件中，编写一个递归函数 rabbits()，它将月数作为输入，并返回该月末的兔子对数。

3.  在主程序中，使用用户输入的数字调用函数 rabbits()。输出两个计算（即，您使用循环获得的计算和递归函数返回的计算）并查看它们是否相等。

* * *

描述是相当不言自明的。我已经关闭了主程序（常规斐波那契函数），但我无法弄清楚如何实现兔子在繁殖后死亡。我已经知道每隔一个月，兔子的数量就会翻倍，但我不知道如何实现。提前致谢。

```
#include <iostream>
using namespace std;

int rabbits (int);

int main ()
{
int x, month, result, counter = 0, rab_now, rab_lastmonth = 1, rab_twomonthsago = 0;

cout << "Please enter the month \n\n";
cin >> month;
cout << "\n";

result = rabbits (month);

while (counter <= month - 1)
{
      rab_now = rab_lastmonth + rab_twomonthsago;

      x = rab_lastmonth;
      rab_lastmonth = rab_now;
      rab_twomonthsago = x;

      counter++;
}

cout << "At the end of month " << month << ", there will be " << rab_lastmonth << "      
pairs of rabbits" << endl;

system("PAUSE");
return 0;
}

int rabbits (int month)

{
if (month == 0)
{
    return 0;
}
else if (month == 1)
{
    return 1;
}
else
{
    return (rabbits (month + 1) + rabbits (month - 2));
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T21:32:03.913

你的函数几乎是正确的，只有一个小错误——可能是一个错字：

```
return (rabbits (month + 1) + rabbits (month - 2)); 
```

– 你想要上个月的兔子*，*而不是下个月的兔子。更改`+`为`-`：

```
return (rabbits (month - 1) + rabbits (month - 2)); 
```

你去吧。

顺便说一句，尝试用更大的月份数调用该函数——例如 20 或 30。你注意到性能方​​面的任何事情了吗？特别是与迭代实现相比？你能想出一种更有效地实现递归函数的方法吗（脑筋急转弯：这不是微不足道的，除非你已经知道如何处理这个问题）。

# xslt - XSLT - 格式化日期 - 删除毫秒

> ID：13828836
> 
> 赞同：4
> 
> 时间：2012-12-11T21:29:59.657
> 
> 标签：xslt

我正在使用 XSLT 创建 XML 文件。日期时间有毫秒。我需要在没有毫秒的情况下输出 XML。

格式必须是`YYYY-MM-DDTHH:MM:SS`

例如：

XML 将日期显示为：`2012-12-341T09:26:53.132-0500`

但这需要是：`2012-12-341T09:26:53`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T02:08:08.333

如果所有值都是 dateTime 并且具有`.`，则可以使用**[`substring-before()`](http://www.w3.org/TR/xpath/#function-substring-before)**：

```
substring-before('2012-12-341T09:26:53.132-0500', '.') 
```

您可以**[`substring()`](http://www.w3.org/TR/xpath/#function-substring)**用来选择前 20 个字符：

```
substring('2012-12-341T09:26:53.132-0500', 0, 21) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T21:44:13.863

如果您使用的是 XSLT2，请参阅此功能：[http](http://www.w3.org/TR/xslt20/#function-format-dateTime) ://www.w3.org/TR/xslt20/#function-format-dateTime 。这个图片字符串应该给你你想要的：

```
format-dateTime($dateTime,'[Y0001]-[M01]-[D01]T[H01]:[m01]:[s01]') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T04:04:06.653

**无论字符串是否包含点或连字符或点和连字符都包含，或者没有，此 XPath 表达式都会产生所需的结果，并且不依赖于 year、month、day 使用的位数**：

```
 substring-before(concat(substring-before(concat(substring-after(.,'T'),
                                                    '.'),
                                             '.'),
                           '-'),
                     '-') 
```

**这是一个使用此 XPath 表达式的简单 XSLT 转换**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="dt/text()">
   <xsl:value-of select="substring-before(., 'T')"/>
   <xsl:text>T</xsl:text>
   <xsl:value-of select=
   "substring-before(concat(substring-before(concat(substring-after(.,'T'),
                                                    '.'),
                                             '.'),
                           '-'),
                     '-')
   "/>
 </xsl:template>
</xsl:stylesheet> 
```

**当将此转换应用于此测试 XML 文档时：**

```
<t>
 <dt>2012-12-341T09:26:53.132-0500</dt>
 <dt>2012-12-355T09:34:56</dt>
 <dt>2012-12-355T09:34:56-0500</dt>
 <dt>2012-12-13T9:34:5-0500</dt>
 <dt>2012-12-344T09:12:34.378-0500</dt>
</t> 
```

**产生了想要的正确结果：**

```
<t>
   <dt>2012-12-341T09:26:53</dt>
   <dt>2012-12-355T09:34:56</dt>
   <dt>2012-12-355T09:34:56</dt>
   <dt>2012-12-13T9:34:5</dt>
   <dt>2012-12-344T09:12:34</dt>
</t> 
```

**说明**：

正确应用**[哨兵](http://en.wikipedia.org/wiki/Sentinel_value)**。

# radio-button - 选择单选按钮时更改行背景颜色

> ID：13828837
> 
> 赞同：0
> 
> 时间：2012-12-11T21:30:00.173
> 
> 标签：radio-button, background-color

我希望我的行的颜色在选择单选按钮时改变颜色。

我有 2 个单选按钮“标准”和“标准国际”。

When the 'standard' value is selected I want the table row to change color but when 'standard international' is checked I want the 'standard' table row to go back to the default white color.

下面是我的代码：

```
<div style="float:right; width:465px;" class="delivery-item">
  <table width="100%" border="0" cellspacing="15" cellpadding="15">
    <tr>
      <td>
        <input type="radio" name="[[+method.deliveryKey]]" value="[[+method.id]]" id="delivery-[[+method.id]]" [[+method.selected:notempty=`checked="checked"`]] />
        <label style="padding-left:10px; font-weight:bold;" for="delivery-[[+method.id]]">[[+method.title]]</label>
        <ul>
          <li style="padding-left:25px;" class="distribution">[[%simplecart.methods.yourcontribution? &price=`&#36; [[+method.price_add:scNumberFormatRev]]`]]</li>
        </ul>
      </td>
      <td width="25%"><li class="total" style="font-size:16px; font-weight:bold;">[[%simplecart.methods.total? &price=`Total &#36; [[+method.total:scNumberFormatRev]]`]]</li></td>
    </tr>
  </table>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-01-16T13:13:03.753

我会做这样的事情。不需要脚本。

```
.optionOne:checked ~ #first ul, .optionOne:checked ~ #first, .optionTwo:checked ~ #second ul, .optionTwo:checked ~ #second {
background-color: red;
}

.optionTwo:checked ~ #second {
background-color: red;
}
#first, #second {
display: block;
width:100%;
height: 100%;

}
```

```
<div style="float:right; width:465px;" class="delivery-item">
  <table width="100%" border="0" cellspacing="15" cellpadding="15">
    <tr>
      <td>
        <input class="optionOne" type="radio" name="[[+method.deliveryKey]]" value="[[+method.id]]" id="delivery-[[+method.id]]" [[+method.selected:notempty=`checked="checked"`]] />
        <label id="first"  style="padding-left:10px; font-weight:bold;" for="delivery-[[+method.id]]">[[+method.title]] <ul>
          <li style="padding-left:25px;" class="distribution">[[%simplecart.methods.yourcontribution? &price=`&#36; [[+method.price_add:scNumberFormatRev]]`]]</li>
        </ul></label>

      </td>
      <td width="25%">
      <input class="optionTwo" type="radio" name="[[+method.deliveryKey]]" value="[[+method.id]]" id="otherOption" />
        <label  id="second"  for="otherOption" style="padding-left:10px; font-weight:bold;" for="delivery-[[+method.id]]">[[+method.title]]<ul>
        <li class="total" style="font-size:16px; font-weight:bold;">[[%simplecart.methods.total? &price=`Total &#36; [[+method.total:scNumberFormatRev]]`]]</li></ul></label></td>
    </tr>
  </table>
</div>
```

# android - Admob 广告未出现在我的应用中

> ID：13828838
> 
> 赞同：0
> 
> 时间：2012-12-11T21:30:02.620
> 
> 标签：android, admob

Admob 广告没有出现在我的 android 应用程序中。我已经使用 XML 方法实现了 admob 代码。虽然没有出现添加，但它正在向 admob 发送请求 ..（8 个请求，填充率为 100%）。我错过了什么？以及如何在 admob 广告的 XML 实现中启用测试模式？

这是我的主要 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/ScrollView01"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@layout/back2"
        android:orientation="vertical"
        android:padding="30dip" >

        <com.google.ads.AdView
            xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
            android:id="@+id/adView1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            ads:adSize="BANNER"
            ads:adUnitId="AdMob ID"
            ads:loadAdOnCreate="true"
            ads:testDevices="TEST_EMULATOR" />

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="60dp"
            android:text="@string/hello"
            android:textSize="15sp" />

        <Button
            android:id="@+id/button1"
            android:layout_width="fill_parent"
            android:layout_height="60dp"
            android:layout_marginTop="50dp"
            android:background="@color/buttonc1"
            android:text="@string/tutorials"
            android:textSize="21sp" />

        <Button
            android:id="@+id/button2"
            android:layout_width="fill_parent"
            android:layout_height="60dp"
            android:layout_marginTop="30dp"
            android:background="@color/buttonc3"
            android:text="@string/themes"
            android:textSize="21sp" />

        <Button
            android:id="@+id/button3"
            android:layout_width="fill_parent"
            android:layout_height="60dp"
            android:layout_marginTop="30dp"
            android:background="@color/buttonc2"
            android:text="@string/gadgets"
            android:textSize="21sp" />

        <Button
            android:id="@+id/button4"
            android:layout_width="fill_parent"
            android:layout_height="60dp"
            android:layout_marginTop="30dp"
            android:background="@color/buttonc4"
            android:text="@string/networking"
            android:textSize="21sp" />

        <Button
            android:id="@+id/button5"
            android:layout_width="fill_parent"
            android:layout_height="60dp"
            android:layout_marginTop="30dp"
            android:background="@layout/button5"
            android:text="@string/win8index"
            android:textColor="#D5D5D5"
            android:textSize="21sp" />
    </LinearLayout>

</ScrollView> 
```

这是 manifest.xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="org.core.mywindows8"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="org.core.mywindows8.Corefile"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".Contenturl"
            android:label="My Windows 8" >
        </activity>
        <activity
            android:name=".Tutorial"
            android:label="Tutorial Categories" >
        </activity>
        <activity
            android:name=".MainActivity"
            android:label="General Troubleshoot" >
        </activity>
        <activity
            android:name=".Myfeed"
            android:label="Tutorial Categories" >
        </activity>
        <activity
            android:name=".MyWindows"
            android:label="My Windows 8" >
        </activity>
        <activity
            android:name=".Topic"
            android:label="Tutorial Categories" >
        </activity>
        <activity
            android:name=".ActivityNet"
            android:label="Networking and Internet" >
        </activity>
        <activity
            android:name=".Appear"
            android:label="Windows 8 Customization Guide" >
        </activity>
        <activity
            android:name=".HD"
            android:label="Hardware and Drivers" >
        </activity>
        <activity
            android:name=".Index"
            android:label="Windows 8 Master Index" >
        </activity>
        <activity
            android:name=".Inter"
            android:label="Networking Articles" >
        </activity>
        <activity
            android:name=".Short"
            android:label="Shortcut and Context Menu" >
        </activity>
        <activity
            android:name=".StartSc"
            android:label="Taskbar and Start Screen" >
        </activity>
        <activity
            android:name=".Tab"
            android:label="Windows 8 Tablet" >
        </activity>
        <activity
            android:name=".UA"
            android:label="Windows 8 User Account" >
        </activity>
        <activity
            android:name=".Update"
            android:label="Windows 8 Updates and Gadgets" >
        </activity>
        <activity
            android:name=".WinTheme"
            android:label="Windows 8 Themes" >
        </activity>
        <activity
            android:name=".MainActivity1"
            android:label="System and Security" >
        </activity>
        <activity
            android:name="com.google.ads.AdActivity"
            android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize" />
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T22:04:11.700

将`xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"`与您放在一起`AdView`并从您的`ListView`. （见下文）不要忘记清理您的项目。

此外，`xmlns:android="http://schemas.android.com/apk/res/android"`从您的`LinearLayout`.

您没有看到广告，因为您没有为阻止展示的广告提供足够的空间，您应该会看到此消息。

> W/Ads(363)：没有足够的空间来展示广告！想要: <480, 75>, 有: <390, 1073741823>

要查看广告，请提供更多空间。尝试这样的事情

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/ScrollView01"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:paddingBottom="30dip"
        android:paddingTop="30dip" >

        <com.google.ads.AdView
            xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
            android:id="@+id/adView1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            ads:adSize="BANNER"
            ads:adUnitId="Your Admob ID"
            ads:loadAdOnCreate="true"
            ads:testDevices="TEST_EMULATOR" />

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:padding="30dip" >

            <!-- Your TextView and Buttons go here -->

        </LinearLayout>
    </LinearLayout>
</ScrollView> 
```

您可以在上面看到这一点，但要在您的模拟器中设置测试模式，请使用`testDevices`XML 字段。

```
<com.google.ads.AdView
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:id="@+id/adView1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    ads:adSize="BANNER"
    ads:adUnitId="your id"
    ads:testDevices="TEST_EMULATOR"
    ads:loadAdOnCreate="true" /> 
```

添加真实设备，将手机插入计算机并在手机上运行应用程序。您将在 LogCat 中看到您的电话 ID。会用绿色说些什么。

您可以像这样添加其他真实设备

```
ads:testDevices="TEST_EMULATOR, 123356r6xcfgxtysd, 456r4y6rfghghsfgd" 
```

# objective-c - 在 OpenGL 目标 c os x 中绘制纹理

> ID：13828841
> 
> 赞同：4
> 
> 时间：2012-12-11T21:30:11.623
> 
> 标签：objective-c, macos, opengl

我试图显示一张图片，但它没有显示出来。

这是我的 NSOpenGLView 子类的代码：

```
//
//  MyOpenGLView.m
//  OpenGLTests
//
//  Created by Tom Schamberger on 10.12.12.
//  Copyright (c) 2012 Tom Schamberger. All rights reserved.
//

#import "MyOpenGLView.h"

@implementation MyOpenGLView

- (id)initWithFrame:(NSRect)frame
{
    NSOpenGLPixelFormat * pf = [MyOpenGLView basicPixelFormat];

    self = [super initWithFrame: frame pixelFormat: pf];
    return self;
}

+ (NSOpenGLPixelFormat*) basicPixelFormat
{
    NSOpenGLPixelFormatAttribute attributes [] = {
        NSOpenGLPFAWindow,
        NSOpenGLPFADoubleBuffer,    // double buffered
        NSOpenGLPFADepthSize, (NSOpenGLPixelFormatAttribute)16, // 16 bit depth buffer
        (NSOpenGLPixelFormatAttribute)nil
    };
    return [[NSOpenGLPixelFormat alloc] initWithAttributes:attributes];
}

- (void) prepareOpenGL
{
    glEnable(GL_DEPTH_TEST);

    glShadeModel(GL_SMOOTH);
    glEnable(GL_CULL_FACE);
    glFrontFace(GL_CCW);
    glPolygonOffset (1.0f, 1.0f);
    glClearColor(0.0f, 0.0f, 0.0f, 0.5f);

    if([self loadTextures])
        NSLog(@"Load");
}

- (void)drawRect:(NSRect)dirtyRect
{
    glClear (GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    glBindTexture( GL_TEXTURE_2D, texture);
    glPolygonMode(GL_FRONT_AND_BACK,GL_LINE);
    glColor3f(1, 1, 1);
    glBegin( GL_QUADS );
    glTexCoord2f( 0.0f, 0.0f);
    glVertex2f( -0.5f, -0.5f);
    glTexCoord2f( 1.0f, 0.0f);
    glVertex2f(  0.5f, -0.5f);
    glTexCoord2f( 1.0f, 1.0f);
    glVertex2f(  0.5f,  0.5f);
    glTexCoord2f( 0.0f, 1.0f);
    glVertex2f( -0.5f,  0.5f);
    glEnd();

    glFlush();
}

- (BOOL) loadTextures
{
    NSImage *img = [NSImage imageNamed:@"NeHe.bmp"];
    if(img == nil)
        return FALSE;
    else if(img.size.height == 0 || img.size.width == 0)
        return FALSE;
    NSBitmapImageRep *rep = [[NSBitmapImageRep alloc] initWithData: [img TIFFRepresentation]];
    glGenTextures( 1, &texture);
    glBindTexture( GL_TEXTURE_2D, texture);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_BASE_LEVEL, 0);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAX_LEVEL, 0);
    glTexParameteri( GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR );
    glTexParameteri( GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR );
    glTexImage2D( GL_TEXTURE_2D, 0, GL_RGB, rep.size.width,
                 rep.size.height, 0, GL_RGB,
                 GL_UNSIGNED_BYTE, rep.bitmapData);
    return TRUE;
}
@end 
```

它绘制一个矩形，但不显示纹理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-12T06:23:40.350

您可能应该将清除颜色 alpha 设置为 0.0 而不是 0.5

此加载纹理的代码有效。

```
backGroundPath = @"Background.bmp";

NSData* backGroundData = [NSData dataWithContentsOfFile:backGroundPath options:NSUncachedRead error:nil];
backGroundImage = [NSBitmapImageRep imageRepWithData:backGroundData];

glPixelStorei(GL_UNPACK_ALIGNMENT, 1);
glGenTextures( 1, backGroundTexture);

glBindTexture(GL_TEXTURE_2D, backGroundTexture[0]);

glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER,
                GL_NEAREST);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER,
                GL_NEAREST);

glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, backGroundImage.size.width,
             backGroundImage.size.height, 0, GL_RGBA, GL_UNSIGNED_BYTE,
             backGroundImage.bitmapData); 
```

# c# - 在 .Net Compact Framework 中使用 X509 证书进行客户端身份验证 HTTPRequest

> ID：13828844
> 
> 赞同：6
> 
> 时间：2012-12-11T21:30:15.977
> 
> 标签：c#, .net, ssl, compact-framework, x509

我在 Windows Mobile 6 中工作，并且希望在与 Apache 网络服务器通信时进行客户端身份验证。我的本地证书存储中有一个证书，它应该相当简单：

```
X509Store myStore = new X509Store("MY", StoreLocation.CurrentUser);
myStore.Open(OpenFlags.ReadOnly);
X509Certificate2Collection certificates = myStore.Certificates;
X509Certificate2 clientcertificate;
foreach (X509Certificate 2certificate in certificates) {
     clientcertificate = certificate; //omitted code to validate certificate
}
HttpWebRequest req = (HttpWebRequest)WebRequest.Create(webPage);
req.AllowWriteStreamBuffering = true;
req.AllowAutoRedirect = false;
req.Method = "POST";
req.ContentType = "text/xml";
req.Accept = "text/xml";
req.ClientCertificates.Add(clientcertificate);
Stream stream = req.GetRequestStream();
stream.Write(buffer, 0, buffer.Length);
stream.Close(); 
```

只要我删除“req.ClientCertificates.Add(clientcertificate)”行，此代码段就可以工作。

插入后，我会收到“无法为 SSL/TLS 建立安全通道”。令人发指的是，当我在常规 .Net 框架中使用这个确切的代码时，它完美地传输了证书。

有谁知道这在 Compact Framework 中是否可行？如果我无法提供 X509Certificate 进行客户端身份验证，我应该采取哪些其他方式来确保身份验证正确（我应该有权访问 CAPI 或其他 Microsoft 加密模块）

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:23:15.513

可能是您的 Apache 服务器不支持安全连接。

例如，我有一些托管域上的网站，它们的成本很低或根本没有。我一直使用这些网站来测试代码。

但是，要获得 SSL 功能，我必须每月支付 50 美元。所以，我无法在我的网站上测试这些。

测试：如果 Apache 服务器支持 SSL，您应该能够将 URL 替换为 SSL 等效项：http: [//www.stackoverflow.com](http://www.stackoverflow.com)与[https://www.stackoverflow.com](https://www.stackoverflow.com)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-10T17:47:04.603

好消息：我解决了。事实证明，它与 .Net Compact Framework 无关。在 3.5 CF 中，只要可以访问 X509 证书，就支持 HTTPWebRequest.ClientCertificates。

SSL 握手失败的原因是服务器端证书的信任问题。我们的服务器证书是自签名的，并且我们使用了为错误 URL 签名的证书，因此应用程序不会信任提供的服务器证书。出于测试目的，我们制定了信任所有证书策略，该策略将在生产中删除。

```
sealed class AcceptAllCertificatePolicy : ICertificatePolicy
{
    private const uint CERT_E_UNTRUSTEDROOT = 0x800B0109;

    public bool CheckValidationResult(ServicePoint srvPoint, X509Certificate
    certificate, WebRequest request, int certificateProblem)
    {
        // Just accept.
        return true;
    }
    /*public bool CheckValidationResult(ServicePoint sp,
    X509Certificate cert, WebRequest req, int problem)
    {
        return true;  
    }*/
} 
```

在 HTTPWebRequest 之前引用

```
System.Net.ServicePointManager.CertificatePolicy = new AcceptAllCertificatePolicy(); 
```

这解决了我们使用 SSL/TLS 安全通道的问题。

# php - PHP $_POST 正在工作但没有获得 HTML 元素的值

> ID：13828845
> 
> 赞同：2
> 
> 时间：2012-12-11T21:30:18.493
> 
> 标签：php, html, forms, post

TL;DR 版本

我有一个包含数百个 html 输入元素的大表单，我制作了一个 php 数组来存储其中的所有元素名称。当我运行我的 process.php 文件时，它使用循环遍历该数组并创建一个新数组，该数组的键是每个元素的名称，该数组的值是每个元素的值。我知道这段代码作为文本框、单选按钮和下拉选择的元素值工作正常。复选框没有将值放入数组，而是键和值读取相同的内容，即元素的名称。为什么 $_POST 给我复选框的名称或 ID，而不是它的值？

完整解释 /w 代码示例：

我遇到的问题对我来说似乎很不寻常，因为据我了解它与 $_POST 的工作方式背道而驰。

无论如何，过去一年我一直在开发一个旅游保险网站，它即将完成。客户希望我创建一个表单版本，他们可以在人们提交申请后查看该表单，它将从他们选择的文件中获取值。

我的问题是 $_POST 没有获取我的复选框元素的值，而是获取它们的名称或 ID（两者相同，因此我无法确定它获取的是哪个）。$_POST 成功获取所有单选、文本和下拉元素的值，而不是复选框。

我的 process.php 文件中有一个非常大的数组，因为表单非常大。我所做的是创建一个数组，其中包含我希望访问的每个元素的名称。下面是数组遵循的结构示例，在这里发布整个内容（表格上的 400 多个元素）太大了。

```
$form_data = array 
('trav_emer_med_insur',
'trav_emer_single',
'trav_emer_single_date_go',
'trav_emer_single_date_ba',
'trav_emer_single_days',

'trav_emer_annual',
'trav_emer_annual_date_go',
'trav_emer_annual_days',

'trav_emer_extend',
'trav_emer_extend_date_go',
'trav_emer_extend_date_ef',
'trav_emer_extend_date_ba',
'trav_emer_extend_days',
); 
```

这是在 process.php 上运行以创建用户数据文件的代码，该文件保存在服务器上的受保护文件夹中。

```
// Create user output data
$out_data = array();
$count = count($form_data); 
for( $i = 0; $i < $count; $i++ ) 
{
    if(empty($_POST[$form_data[$i]])) {
        $out_data[$form_data[$i]] = " ";
        }
    else {
        $out_data[$form_data[$i]] = $_POST[$form_data[$i]];
        }
}

//Set variable names for new file
$dir = "/home/imelnick/public_html/getawayinsured.ca/userdata/";
$timestamp=date("YmdGis");
$name = $out_data['txtApp1Name'];
$value = str_replace(" ", "", $name);
$item = $value . "^" . $timestamp  . ".txt";
$filename = $dir . $item;

//Put data in file
//Open file for writing
$fileHandle = fopen($filename, 'w') or die("Can't open file");

//Write contents of out_data array to file
foreach ($out_data as $key => $value) {
$fileLine = $key . "\t" . $value . "\r\n";
fwrite($fileHandle, $fileLine);
}

//Close file
fclose($fileHandle); 
```

数组中的第一个名称块属于复选框，它们遵循以下格式：

```
<input type="checkbox" name="trav_emer_med_insur" id="trav_emer_med_insur_if"  value="YES" class="form_elements" onClick="if(this.checked){document.getElementById('trav_emer_med_options').style.display='block';}else{document.getElementById('trav_emer_med_options').style.display='none';}"/> 
```

onClick 语句扩展了一个 div，其中包含为申请人提供更多选项的附加复选框。

我从表单数据创建的输出数据数组具有数组中每个项目的键作为元素的名称，数组中每个项目的值是相应 HTML 元素的值。

拆分数组并写入 $key/$value 组合后，预期值`$_POST[$form_data[0]] (note: $form_data[0] = trav_emer_med_insur)`是上述复选框代码的值，`value="YES"`. 但是文件中的输出如下所示。

`trav_emer_med_insur trav_emer_med_insur`

我很确定处理表单本身的代码没有问题，因为表单上的其他元素的值很好地保存到文件中（单选按钮、文本框、下拉菜单都可以使用）。Checkboxes 没有，它们拒绝 $_POST HTML 元素的值，只是不断地输出名称两次。

例如，上面我的数组示例中未列出的表单中的另一个名为smoked_if 的元素是一个单选按钮对，它询问申请人是否吸烟。这是最近应用程序的示例输出。

可以看出我的代码的预期结果正在执行。

`smoked_if no`

我在这里不知所措，因为这不仅与 $_POST 本身的功能相矛盾，而且由于表单上的所有其他元素的值都没有问题地发布，它告诉我复选框元素和 $_POST 存在问题。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T21:42:13.003

我认为您的问题可能与未选中复选框时未发布的事实有关。

如果您需要解决此问题，请参阅[发布未选中的复选框](https://stackoverflow.com/questions/1809494/post-the-checkboxes-that-are-unchecked)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T21:50:06.930

只要信息在 Form 标签内，它就会被传递到服务器。话虽如此，您需要了解发送到服务器的是项目的名称和价值。

当您在查看 PHP 时，您想提交，然后一个字符串将如下所示：来自[http://www.w3schools.com/tags/tryit.asp?filename=tryhtml_form_checkbox](http://www.w3schools.com/tags/tryit.asp?filename=tryhtml_form_checkbox)的示例

```
?vehicle=car&vehicle=truck 
```

在 PHP 中，当您发布它时，这个想法是相同的，但只是隐藏在不熟练的眼睛之外。在我的示例中获取它的值：

```
$vehicle= $_POST["vehicle"];
echo ''.$vehicle;   //shows   ARRAY

foreach( $item in $vehicle){
    echo ''.$item.'\n';   //will iterate through all the vehicle and print them out
} 
```

你也可以这样说

```
if(in_array("car", $vehicle)){
   echo "there exists a car\n";
}
http://php.net/manual/en/function.in-array.php 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T22:05:05.823

由于复选框仅在选中时才会发布，因此您需要一种解决方法。我认为最常见的解决方法是使用**与复选框同名**的隐藏输入，通常为 0 作为值。并且不要忘记将隐藏输入放在复选框之前:) 这样即使未选中复选框，您也会获得隐藏输入的值。如果复选框被选中，隐藏字段的值在 POST 数组中被复选框中的值覆盖。

# json - 在 webmethod 中使用 json.net 序列化程序

> ID：13828848
> 
> 赞同：4
> 
> 时间：2012-12-11T21:30:22.620
> 
> 标签：json, asmx, json.net, deserialization, webmethod

我将从我的问题开始：

我有一个通过 AJAX/JSON 调用的网络方法。我们称它为“GlobalMethod”，用于管理“容器”对象，该对象具有从同一“基类”派生的项目列表。这是我的情况的代码示例：

```
[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[System.ComponentModel.ToolboxItem(false)]
[System.Web.Script.Services.ScriptService]
public class MyService : System.Web.Services.WebService
{

    [WebMethod]
    public string GlobalMethod(Container data)
    {
        string result = "";
        foreach (var item in data.Items)
        {
            result += item.BaseProperty;
            if (item is FirstDerivedClass)
                result += ((FirstDerivedClass)item).FirstDerivedProperty;
            else if (item is SecondDerivedClass)
                result += ((SecondDerivedClass)item).SecondDerivedProperty;
        }
        return result;
    }
}

public class Container
{
    public List<BaseClass> Items;
}

public abstract class BaseClass
{
    public string BaseProperty;
}

public class FirstDerivedClass : BaseClass
{
    public string FirstDerivedProperty;
}

public class SecondDerivedClass : BaseClass
{
    public string SecondDerivedProperty;
} 
```

这种方法根本行不通。我将无法使用默认的 JavascriptSerializer 调用此方法，因为序列化程序无法解析容器将拥有的对象类型：它们可能是 FirstDerivedClass 或 SecondDerivedClass 类型。

因此，浏览网络以寻找我的问题的解决方案时，我遇到了[Json.NET](http://json.codeplex.com/)，其方法 JsonConvert.DeserializeObject 能够检索使用 JsonConvert.SerializeObject 序列化的对象的原始类型，因为它添加了一个名为“ $类型”。

我现在的问题是：如何使用此序列化程序而不是 ASMX 使用的默认方法来制作 webmethod？如果方法签名仍然存在

```
[WebMethod]
public string GlobalMethod(Container data) 
```

然后我将得到一个**完全空**的Container 对象，因为框架正在执行反序列化工作并且不知道要实例化哪些项目，而且我无法告诉框架它应该使用 Json.NET 来完成这项工作，将能够完全反序列化数据。

如果我尝试以这种方式修改方法

```
 [WebMethod]
    public string GlobalMethod(string data)
    {
        string result = "";
        Container container = JsonConvert.DeserializeObject<Container>(data,
                                        new JsonSerializerSettings
                                        {
                                            TypeNameHandling = TypeNameHandling.Objects
                                        });
        foreach (var item in container.Items) {
   ... 
```

然后我会收到另一个服务器错误 500，因为**“没有为 u0027system.string u0027 类型定义无参数构造函数”**

好的，希望我的问题很清楚......我已经花了一整天的时间，但我似乎没有找到解决方案。重新审视我的方法的体系结构以避免使用派生类并不是一个很好的选择（请注意实际代码要复杂得多，我只是简化了它以达到重点！）。

顺便补充一句，调用 webmethod 的 ajax 方法是这样完成的：

```
 $.ajax({
        type: "POST",
        url: wsUrl + method,
        data: JSON.stringify(data),
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        processData: false,
        success: function(msg)
        {
            try{
                success(JSON.parse(msg.d));
            } finally {

            }   

        },
        error: error
    }); 
```

感谢任何愿意与我分享他的知识的人！

* * *

我想分享一下我是如何真正解决我的问题的。正如我已经说过的，我这样修改了我的方法：

```
[WebMethod]
public string GlobalMethod(string data)
{
    string result = "";
    Container container = JsonConvert.DeserializeObject<Container>(data,
                                    new JsonSerializerSettings
                                    {
                                        TypeNameHandling = TypeNameHandling.Objects
                                    });
    foreach (var item in container.Items) { 
```

最初，我开始收到错误 500 **“没有为 u0027system.string u0027 类型定义的无参数构造函数”**

但最终我发现了原因：从客户端传输到服务器的 json 字符串被 .NET 框架反序列化为包含的对象，它不是字符串，而是实际的 JSON 对象！

因此，在我的 ajax 方法中，诀窍如下：

```
 $.ajax({
        type: "POST",
        url: wsUrl + method,
        **data: JSON.stringify(JSON.stringify(data)),**
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        processData: false,
        success: function(msg)
        {
            try{
                success(JSON.parse(msg.d));
            } finally {

            }   

        },
        error: error
    }); 
```

这意味着 json 对象被封装在另一个字符串中，该字符串将由我的服务器端 GlobalMethod(string) 通过 Json.NET 手动反序列化。

显然，我不会在 ajax 例程中包含这个双重“stringify”，但我会注意将输入中的 JSON.stringified 数据传递给 ajax 例程本身！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T14:30:54.217

这只是一个技巧，只是一个想法，听起来并不优雅，但它应该可以工作我只是好奇

以这种方式更改容器：

```
public class Container
{
    public List<MyUnionBaseClass> Items;
} 
```

并定义（伪代码）：

```
public class MyUnionBaseClass{

  public void MyUnionBaseClass(BaseClass b){
     this.setValue(b);
  };

  final public BaseClass getValue(){
       if(first!=null) return (BaseClass) first;
       if(second!=null)return (BaseClass) second;
       return null;
  }

  final public setValue(BaseClass b){
    if(b instanceOf firstClass){
         first = (FirstClass) b;  
    }
    if(b instanceOf secondClass){
         second = (SecondClass) b;
    }
  }

  private FirstDerivedClass first=null;
  private SecondDerivedClass second=null;

} 
```

Ps：这很粗糙，应该改进。这有意义吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T21:34:48.073

更改 web 方法以接受`object`

```
[WebMethod]
public string GlobalMethod(object data) 
```

这应该可以解决您遇到的问题。

# facebook - 检查用户是否喜欢没有应用程序许可请求的页面

> ID：13828880
> 
> 赞同：0
> 
> 时间：2012-12-11T21:32:56.440
> 
> 标签：facebook, facebook-graph-api, facebook-like

我有一个简单的标签页，php sdk 工作，我知道我可以从用户signed_request 那里得到这个特定页面的“喜欢”。

这个页面是与另一家也有 FB 页面的公司合作的。我想知道的是，我是否可以为当前用户获取他们页面的类似状态，以便我可以授权此选项卡上的操作，这取决于用户喜欢我的页面和我的合作伙伴的页面。

如果不使用实际的应用程序、access_token 和请求的适当权限，这是否可能？

例如，我的页面是 fb.com/Coke，我的合作伙伴是 fb.com/Target 在这个特定的标签页上，我只想在我（可乐）被喜欢（我已经可以得到）并且我的合作伙伴（Target ) 也很受欢迎。

我尝试了graphAPI（我/喜欢）和FQL（使用连接表）以及未经授权的请求的compalin。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T22:45:17.720

**简短的回答：**

不，这在生产环境中是不可能的。

**进一步说明：**

一些用户的喜欢列表是公开的。在这种情况下，它会起作用。

但是，为了从具有该设置为非公开的用户（例如我自己，只有朋友的朋友可以看到）的用户那里获得喜欢，那么它需要一个应用程序和一个`access_token`具有`user_likes`权限的应用程序。

从[文档](https://developers.facebook.com/docs/reference/fql/page_fan)中：

> ```
> Permissions Required:
> user_likes permissions if querying the current user. 
> ```

# asp-classic - ASP Classic 中的特定日期和时间

> ID：13828884
> 
> 赞同：1
> 
> 时间：2012-12-11T21:33:32.717
> 
> 标签：asp-classic

嗨，我有以下代码：

```
Dim CurrentDate
CurrentDate = Date()

Dim intHour
Dim intMinute
Dim intSecond

intHour = 17
intMinute = 0
intSecond = 0

Dim NewDate
Dim NewDate1
Dim NewDate2

NewDate = DatePart("yyyy", CurrentDate)
NewDate1 = DatePart("m", CurrentDate)
NewDate2 = DatePart("d", CurrentDate)

Dim Dates 

Dates = DateSerial(NewDate, NewDate1, NewDate2)

Dim Time 

Time = TimeSerial(intHour, intMonth, intSecond) 
```

我在 VB 中做了同样的事情：

```
 Dim value As Date = Date.Now
    Dim intHour As Integer
    Dim intMinute As Integer
    Dim intSecond As Integer

    intHour = 17
    intMinute = 0
    intSecond = 0

    Dim newdatetime As DateTime = New Date(value.Year, value.Month, value.Day, intHour, intMinute, intSecond) 
```

在VB中我可以做

```
Dim newdatetime As DateTime = New Date(value.Year, value.Month, value.Day, intHour, intMinute, intSecond). 
```

在我的 ASP 代码中，我有`Dates = DateSerial(NewDate, NewDate1, NewDate2)`和`Time = TimeSerial(intHour, intMonth, intSecond)`. 我怎样才能像在 VB 中一样将它们作为 DateTime 组合在一起？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T22:33:07.763

两种方式：

```
dim h,n,s
h = 17
n =  1
s =  2

dim t
t = timeserial(h,n,s)

dim d
d = date()
dim ts1
ts1 = dateadd("h",h, _
      dateadd("n",n, _
      dateadd("s",s, d )))
dim ts2
ts2 = d + T 
```

两者都产生相同的输出。有添加的那个有一些陷阱，这取决于你玩它离第 0 天有多近。我认为第一种方法是“更理智”。据我记得 VBScript 只是将日期部分存储在整数或浮点数中，将时间部分存储在浮点数的小数部分中（作为 24 小时一天的一部分，因此 12:00 是 0.5），因此您可以添加他们和 +

# phpdoc - phpdoc web 界面：未定义的偏移量：1 英寸 \src\phpDocumentor\Console\Input\ArgvInput.php

> ID：13828886
> 
> 赞同：1
> 
> 时间：2012-12-11T21:34:04.453
> 
> 标签：phpdoc

我已经使用 installer.php 文件安装了 phpdoc，当我从 wamp (localhost/phpDocumentor/bin/phpdoc.php) 打开 phpdoc.php 时，我收到此错误：

```
 Notice: Undefined offset: 1 in D:\Tools\Programming\WebsiteBuilding\WAMP\wamp2.2e\www\phpDocumentor\src\phpDocumentor\Console\Input\ArgvInput.php on line 52 
```

我在我的 WAMP php - 设置`register argc argv`中`true`设置，但我仍然得到这个。

我究竟做错了什么？

错误快照：

![错误快照](../Images/8de5872924525b87cb46af7820a60d1b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T10:20:36.393

PHPDoc 旨在用于命令行。您得到的错误意味着您没有提供参数。这意味着您不能通过网络服务器*调用*PHPDoc，您只能*查看*生成的文档。

在 Windows 下的典型调用`phpdoc`如下所示（在**命令行**上）：

```
phpdoc.bat -d src -t docs 
```

`src`您的源代码所在`docs`的目录以及应生成文档的目录在哪里。

有关更多说明，请参阅[PHPDoc 安装程序文档](http://phpdoc.org/docs/latest/for-users/installation/using-installer.html#instructions)。

# ios - 帮助循环、存储和使用 CGPoints

> ID：13828888
> 
> 赞同：0
> 
> 时间：2012-12-11T21:34:12.317
> 
> 标签：ios, for-loop, uibutton, cgpoint

我有一些 UIButtons 可以移动到不同的位置，由一个名为 totalSmallButtonLocations 的数组预先确定。所以我通过availableLocations，一个NSMutableArray，分配不同的CGPoints，并从availableLocations中删除这些点。一旦完成，就会有一个 UIView 动画将按钮移动到新位置。

目前这是可行的，但正如您在下面看到的那样，它很长，（在实际项目中还有更多按钮和位置）：

```
int randomNumber;
NSValue *val;
CGPoint a, b, c;
NSMutableArray *availableLocations;
availableLocations = [NSMutableArray arrayWithArray:totalSmallButtonLocations];

randomNumber = arc4random_uniform(3);
val = [availableLocations objectAtIndex:randomNumber];
a = [val CGPointValue];
[availableLocations removeObjectAtIndex:randomNumber];
randomNumber = arc4random_uniform(13);
val = [availableLocations objectAtIndex:randomNumber];
b = [val CGPointValue];
[availableLocations removeObjectAtIndex:randomNumber];
randomNumber = arc4random_uniform(12);
val = [availableLocations objectAtIndex:randomNumber];
c = [val CGPointValue];

[UIView animateWithDuration:0.5 animations:^{
    button1.center = a;
    button2.center = b;
    button3.center = c; 
```

所以我正在尝试创建一个循环，但是 CGPoint 方面会导致一些问题。我认为我的循环没问题，但我不知道如何在动画部分分配它，它抛出了错误：

“从不兼容的类型 id 分配给 'CGPoint'（又名 'struct CGPoint'）”：

```
int randomNumber;
NSValue *val;
CGPoint a;
NSMutableArray *availableLocations;
availableLocations = [NSMutableArray arrayWithArray:totalSmallButtonLocations];
NSMutableArray *points = [NSMutableArray array];

for(int looper = 14; looper > 0; looper--)
{
    randomNumber = arc4random_uniform(looper);
    val = [availableLocations objectAtIndex:randomNumber];
    a = [val CGPointValue];
    [points addObject:[ NSValue valueWithCGPoint:a]];
}
[UIView animateWithDuration:0.5 animations:^{
    button1.center = [points objectAtIndex:1];
    button2.center = [points objectAtIndex:2];
    button3.center = [points objectAtIndex:3]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T21:38:23.333

问题是你得到一个指向 CGPoint 而不是 CGPoint 本身的指针。问题是在这里`[points objectAtIndex:1];`你得到一个对象而不是 struct CGPoint。您只需要像这样包装它`[[points objectAtIndex:1] CGPointValue];`，警告就应该消失了。

# ruby-on-rails-3 - Rails 3 + Heroku：无法加载这样的文件——测试/单元/测试用例（LoadError）

> ID：13828889
> 
> 赞同：23
> 
> 时间：2012-12-11T21:34:14.090
> 
> 标签：ruby-on-rails-3, heroku

在heroku（`heroku run console`...）中运行控制台时出现以下错误。该应用程序运行没有问题，但我似乎无法运行控制台，因此在开发中我没有这个问题。

```
/app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:251:in `require': cannot load such file -- test/unit/testcase (LoadError)
from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:251:in `block in require'
from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:236:in `load_dependency'
from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:251:in `require'
from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.9/lib/active_support/test_case.rb:1:in `<top (required)>'
from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:251:in `require'
from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:251:in `block in require'
from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:236:in `load_dependency'
from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:251:in `require'
from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.9/lib/rails/console/app.rb:2:in `<top (required)>'
from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:251:in `require'
from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:251:in `block in require'
from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:236:in `load_dependency'
from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:251:in `require'
from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.9/lib/rails/application.rb:304:in `initialize_console'
from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.9/lib/rails/application.rb:152:in `load_console'
from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.9/lib/rails/commands/console.rb:27:in `start'
from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.9/lib/rails/commands/console.rb:8:in `start'
from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.9/lib/rails/commands.rb:41:in `<top (required)>'
from script/rails:6:in `require'
from script/rails:6:in `<main>' 
```

这是我的 Gemfile：

```
source 'http://rubygems.org'
ruby '1.9.3'

gem 'rails', '3.2.9'

gem 'oauth', '~> 0.4.4'
gem 'twitter', '~> 1.4.1'
gem 'sendgrid'
gem 'koala'

gem 'therubyracer', '0.10.2'
gem 'execjs'

# Rails 3.1 - Asset Pipeline
gem 'json'

group :assets do
  gem 'sass-rails', "  >= 3.2.3"
  gem 'coffee-rails', ">= 3.2.1"
  gem 'uglifier', '>= 1.0.3'
  gem 'bootstrap-sass'
end

gem 'coffee-script'

gem 'jquery-rails'

gem "fog"
gem 'bootstrap-wysihtml5-rails', '0.3.1.10'

group :production do
  gem "heroku"
  gem 'pg', '0.13'
  gem 'newrelic_rpm'
  gem 'newrelic_api'
end

group :test do
  gem 'email_spec'
  gem "cucumber-rails"
  gem "rspec-rails"
  gem "capybara"
  gem 'culerity'
  gem "selenium-webdriver"
  gem "database_cleaner"
  gem 'factory_girl_rails'
end

group :development, :grades, :test do
  gem "launchy"
  gem "mysql2"
  gem "letter_opener"
  gem "pry"
  gem "rails-erd"
end

gem "airbrake"
gem "authlogic"
gem 'awesome_print'
gem 'cancan'
gem 'dalli'

#gem "oink"
gem 'validates_timeliness', '~> 3.0.2'
gem 'hpricot'
gem "ruby_parser"
gem "prawn_rails"
gem "thin"
gem "nested_form", :git => "git://github.com/ryanb/nested_form.git"
gem "meta_search"
gem "carrierwave"
gem "aws-s3"
gem "mini_magick"
gem 'will_paginate'
gem "spreadsheet"
gem "oauth-plugin", ">= 0.4.0.pre1"
gem 'flash_cookie_session'
gem 'haml-rails'
gem 'squeel'
gem 'rails_best_practices', :group => :development
gem 'simple_form'
gem 'taps', :group => :development
gem 'resque'
gem "audited-activerecord", "~> 3.0"
gem "lograge"
gem 'quiet_assets'
gem 'yajl-ruby', :require => "yajl"
gem 'switch_user' 
```

我不知道为什么会收到此错误。有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2015-01-06T16:31:47.393

对于 Rails 3.1.12 和 Ruby 2.2.0，我必须添加

```
gem 'test-unit' 
```

到我的`Gemfile`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-12T10:03:04.303

`test`在`.slugignore`文件中删除对我有用。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-12T10:54:26.603

显然 Heroku 已经改变了它解释`.slugignore`文件的方式。

就我而言，我有`rpc`目录`.slugignore`，它清除了我的应用程序所依赖的宝石之一的`rpc` *子目录*，导致`LoadError`. 我不确定 Heroku 是否有意做出这种改变。无论是否`.slugignore`按预期工作，删除影响行`.slugignore`现在应该可以解决问题。

PS 我已经为此向 Heroku 提出了支持票。

**更新：**根据 Heroku 支持，对`.slugignore`解析进行了一些更改以使其与 更加一致`.gitignore`，并且它按预期工作。只删除顶级目录的正确方法是 put `/rpc`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-12T10:00:57.023

从 .slugignore 中删除测试目录解决了这个问题

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-12T10:28:06.047

从中删除测试目录`.slugignore`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-12T05:36:34.490

我们今天也遇到了这个问题。我怀疑 Heroku 的 Ruby 构建包中一定发生了一些变化。

对我们来说，prototype-rails 尝试加载是一个问题，`ActionView::TestCase`而这又需要`test/unit/testcase`. 该[补丁](https://github.com/ennova/prototype-rails/commit/16f68a7529dea20372561188e2c6a721e0d305ae)非常简单，可以作为[fork](https://github.com/ennova/prototype-rails)使用。

如果您使用的是 Bundler，您可能需要以下内容：

```
gem 'prototype-rails', :git => 'git://github.com/ennova/prototype-rails.git' 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-12-11T23:00:16.993

我尝试禁用多线程（注释掉 config.threadsafe！），这似乎暂时有效，直到 heroku 齐心协力。

# python - 预建索引的数据清理后果

> ID：13828891
> 
> 赞同：1
> 
> 时间：2012-12-11T21:34:19.540
> 
> 标签：python, pandas, time-series

**客观的：**

创建一个索引来容纳来自 csv 文件的一组预先存在的价格数据。我可以使用列表推导建立索引。如果以这种方式完成，构造将给我一个长度为 86,772 的过滤列表——当运行 1/3/2007-8/30/2012 42 次（即 10 分钟间隔）时。但是，我来自 csv 的价格数据是长度：62,034。请注意，长度的差异是由于***数据清理问题***造成的。

也就是说，我不确定如何克服*真实*数据和这个预先构建的（列表组合）数据框之间明显的不匹配。

**试图：**

我是否错误地使用了前两行？

```
data=pd.read_csv('___.csv', parse_dates={'datetime':[0,1]}).set_index('datetime')

dt_index = pd.DatetimeIndex([datetime.combine(i.date,i.time) for i in data.index])

ts = pd.Series(data.prices.values, dt_index) 
```

**问题：**

1.  据我了解，我应该使用“组合”，因为***我希望索引构造完全由我的 csv 文件通知***。并且，“组合”返回一个新的日期时间对象，其日期分量等于给定日期对象的日期分量，其时间分量等于给定时间对象的时间分量。

2.  当我 parse_dates 时，它是否将时间和日期混为一谈并将其视为“日期”？

3.  有没有更好的方法来实现既定目标？

**回溯错误：**

> AttributeError：“unicode”对象没有属性“日期”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T21:46:32.007

你可以整齐地写如下：

```
ts = df1.prices 
```

这是一个例子：

```
In [1]: df = pd.read_csv('prices.csv',
                  parse_dates={'datetime': [0,1]}).set_index('datetime')

In [2]: df # dataframe
Out[2]: 
                    prices  duty
datetime                 
2012-11-12 10:00:00      1     0
2012-12-12 10:00:00      2     0
2012-12-12 10:00:00      3     1

In [3]: df.prices # timeseries
Out[3]: 
datetime
2012-11-12 10:00:00    1
2012-12-12 10:00:00    2
2012-12-12 11:00:00    3
Name: prices

In [4]: ts = df.prices 
```

您可以像这样分组日期（类似于[文档中的这个示例](http://pandas.pydata.org/pandas-docs/dev/groupby.html#transformation)）：

```
In [5]: key = lambda x: x.date()

In [6]: df.groupby(key).sum()
Out[6]: 
            prices  duty
2012-11-12       1     0
2012-12-12       5     1

In [7]: ts.groupby(key).sum()
Out[7]: 
2012-11-12    1
2012-12-12    5 
```

其中**price.csv**包含：

```
date,time,prices,duty
11/12/2012,10:00,1,0
12/12/2012,10:00,2,0
12/12/2012,11:00,3,1 
```

# internet-explorer - 使用 KoGrid 的 IE8 中的参数无效错误

> ID：13828900
> 
> 赞同：0
> 
> 时间：2012-12-11T21:35:19.287
> 
> 标签：internet-explorer, knockout.js, kogrid

我正在尝试使用 KoGrid，但了解到我什至无法获得一个非常简单的示例来在 IE8 中正常工作。FF 9.0.1 中一切正常。

我已将原始代码剥离为一个非常简单的测试，但仍然显示错误：

```
<div data-bind="koGrid: {data: someList}"></div> 
```

使用 javascript 的：

```
var vm = {
    someList: ko.observableArray([{
        Name: "A Name",
        Synonym: "A Synonym"},
    {
        Name: "Another Name",
        Synonym: "Another Synonym"},
    {
        Name: "A third Name",
        Synonym: "A third Synonym"}])
};

ko.applyBindings(vm); 
```

jsFiddle 可以在这里找到：http: [//jsfiddle.net/SLMg7/6/](http://jsfiddle.net/SLMg7/6/)

来自 IE8 的错误消息是：

消息：无效的参数。行：2596 字符：17 代码：0 URI：[http ://cloud.github.com/downloads/SteveSanderson/knockout/knockout-2.2.0.debug.js](http://cloud.github.com/downloads/SteveSanderson/knockout/knockout-2.2.0.debug.js)

我正在使用带有 jQ​​uery 1.8.2 的淘汰赛 2.2.0 和 KoGrid 2.0.6。我已经使用 VisStudio 中的调试器在该行中断，但它在最后一行，我还不能确定可能是什么错误。有什么想法吗？

# html - 如何正确垂直对齐表格单元格内的图像+文本

> ID：13828901
> 
> 赞同：8
> 
> 时间：2012-12-11T21:35:23.537
> 
> 标签：html, css

我需要`vertical-align:top`“一些文字”和“其他文字”。以下对我不起作用，只有第二个单元格正确对齐。我不明白问题是什么。

```
<style>
    td {
      vertical-align:top;
    }
</style>

<table>    
    <tr>
        <td><img src="icon.png"/> Some text </td>
        <td> Other text </td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-11T21:42:30.153

而不是使用：

```
td {
    vertical-align: top;
} 
```

采用：

```
td {
    vertical-align: baseline;
}
td img {
    vertical-align: top;
} 
```

# php - 在自定义 php 页面中登录 wordpress

> ID：13828902
> 
> 赞同：1
> 
> 时间：2012-12-11T21:35:25.263
> 
> 标签：php, wordpress

> **可能重复：**
> [将 PHP 网站与 Wordpress 用户身份验证集成](https://stackoverflow.com/questions/13792576/integrate-php-website-with-wordpress-user-authentication)

我正在尝试通过 php 脚本在 wordpress 安装目录之外执行登录。我想在整个网站上使用相同的用户和用户状态，而不仅仅是博客。

到目前为止，我设法通过包含“class-phpass.php”来验证凭据，但我还没有找到任何有关执行实际登录的信息。

有什么方法可以创建 cookie 并在 wordpress 中使用它们，反之亦然？

我还找到了一个插件，可以让我的 cookie 可用于整个域，所以我认为我非常接近。

# java - Graphics2D中双精度绘图的目的是什么

> ID：13828909
> 
> 赞同：0
> 
> 时间：2012-12-11T21:36:47.773
> 
> 标签：java, graphics2d

谁能给我解释一下？

您不能在像素之间绘制，那么为什么在绘制时要使用浮点或双重测量？在 Oracle 的文档中写了一些关于打印机设备的内容，但它也不能在最小的点之间进行绘制。我不明白。

让我们说一条简单的线。这条线的宽度设置为 1.3f。当它被绘制时会发生什么：

1.  在 Windows 中显示（我相信它有 96 DPI）？
2.  300 DPI的打印机？

AFAIK Java 在内部使用 72 DPI。那么数学如何呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T22:25:12.100

我想到了几个用例。

*   您的图形设备可能会被缩放。例如，我知道有几个应用程序使用图形上下文的适当缩放来绘制单位圆的窗口填充图像，即半径为 1 的圆。
*   您可能正在为面向矢量的目标生成输出，例如 PDF 文件。在这种情况下，用户可能会任意放大，并且即使在高分辨率下也可能期望相当数量或精度。
*   就像您提到的那样，打印机的打印分辨率可能比屏幕高得多，这是通过内置缩放因子来实现的，该缩放因子将默认坐标单位映射到设备像素大小的几倍。
*   抗锯齿建议亚像素分辨率。应用于几何对象边界处给定像素的颜色量将取决于所述对象的子像素坐标。

以上都不会轻易排除使用单精度浮点数，事实上大多数 G2D 操作也可以使用浮点数。使用双精度仅对非常大的变焦、非常高的精度要求和类似应用程序很重要。但另一方面，在任何情况下，大多数计算都是在 double 上执行的，并且尽可能远地通过图形管道进行这些计算的开销通常可以忽略不计。所以当你问我为什么要使用 double 而不是 float 时，我会问你“为什么不呢？”</p>

# javascript - 在监听变化的值的同时执行一个函数

> ID：13828910
> 
> 赞同：0
> 
> 时间：2012-12-11T21:36:55.177
> 
> 标签：javascript, jquery, events

我在这里使用 iosSlider 显示艺术品：http: [//artiris.clients.twi.tl/galeries/galerie-bleue](http://artiris.clients.twi.tl/galeries/galerie-bleue)

我希望为中心之外的作品添加一个模糊滤镜。尽管该插件没有“活动”类设置，但我可以轻松地添加一个具有简单功能的类设置。

这是棘手的部分。我希望模糊过渡进出。不是时间值，而是我希望过渡与滑块运动相关联。例如，当艺术品接近中心时，模糊值将与运动相关联，当艺术品位于中心时，模糊值将为 0。我想要这个，因为滑块支持触摸。

滑块对象确实提供了它的实时位置，因此我可以确定要设置的模糊值。但是，为此编写一个 do/while 循环，浏览器就会崩溃。还有 onSlideStart 和 onSlideComplete 事件，但我不知道如何在一个事件上执行函数并在另一个事件上停止它。

总而言之，我只需要有人引导我朝着正确的方向前进，让我能够干净有效地做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T21:59:25.103

除非您有某种“onDrag”事件不断发生，否则我只能想到两种方法来处理这个问题。

**第**一个：`setTimeout`每毫秒左右运行一次，它会调整模糊。这几乎可以肯定**不是**一个好的选择，但在技术上它是*一个*选择。这可能会导致性能问题，尤其是在低速设备上。这也意味着模糊可能是不稳定的，因为超时实际上可能不会每毫秒运行一次。

正如您在评论中所建议的那样，您不能为其使用循环并根据事件启用/禁用循环，因为 javascript 是单线程的：一旦循环开始，将不再运行其他 javascript，您将始终锁定您的浏览器。

**第二**：只有 CSS 的解决方案。如果移动只是 CSS，那么幸运的话，模糊可以以相同的方式完成。遗憾的是，我不是 CSS 专家，所以我不确定最好的方法。

抱歉，这不是您问题的一个很好的答案，但我想为您解释 javascript 选项，以及您可能不应该这样做的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T23:09:48.093

iosSlider 开发报告提供了一些见解。

您可以在 iosSlider 插件的 touchmove 事件中添加自己的函数。然后，此函数将与 iosSlider 拖动一起触发。我建议将它放在第 1806 行之后的某个位置。如果我要对其进行编码，我会这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T07:45:42.187

好吧，就在这里。[http://artiris.clients.twi.tl/galeries/galerie-bleue](http://artiris.clients.twi.tl/galeries/galerie-bleue)

不确定这是否是最好的方法，但它似乎有效！

当滑块开始移动时，我开始一个超时，它每 100 毫秒运行一个函数。当滑块停止移动时，超时清除。

这是我的功能：

```
function adjustFilter() {
    var nodes = $gallerySlider.data('iosslider').slideNodes,
        stage = $gallerySlider.data('iosslider').stageWidth,
        matrix =    $slider.css("-webkit-transform") ||
                    $slider.css("-moz-transform") ||
                    $slider.css("-ms-transform") ||
                    $slider.css("-o-transform") ||
                    $slider.css("transform"),
        matrixArray = matrixToArray(matrix),
        position =  Math.abs(matrixArray[4]);

    for(var i = 0; i < nodes.length; i++) {
        var $node = $(nodes[i]),
            nodeMatrix =    $node.css("-webkit-transform") ||
                            $node.css("-moz-transform") ||
                            $node.css("-ms-transform") ||
                            $node.css("-o-transform") ||
                            $node.css("transform"),
            nodeMatrixArray = matrixToArray(nodeMatrix),
            nodePosition = Math.abs(nodeMatrixArray[4]),
            distance = Math.abs(Math.min(Math.max(parseInt(nodePosition-position), stage*(-1)), stage)),
            tx = distance/stage;

        $node.css({ '-webkit-filter' : 'blur('+tx*10/2+'px) grayscale('+tx+')' })
    }
} 
```

基本上它得到滑块的位置。然后对于每个节点，我得到它的当前位置并计算到中心的距离。这个距离是标准化的，因此它永远不会大于幻灯片的宽度。然后我使用该数字实时设置每个节点的模糊和灰度。这样效果是连续的。

到目前为止，性能似乎还不错。无论如何，我只会在浏览器支持过滤器属性时运行该函数。

如果有人可以建议我改进此代码的方法，我会全力以赴。

# html - 设置列之间的边距

> ID：13828911
> 
> 赞同：0
> 
> 时间：2012-12-11T21:37:04.020
> 
> 标签：html, css

我们有 3 列（可能有人想要更多）

可以说我想要它们之间的 30px 距离。

这意味着我需要创建 3 种不同的样式：

1.  第一栏：`margin-right:15px`
2.  中心柱：`margin-right:15px;margin-left:15px;`
3.  最后一栏：`margin-left:15px;`

也许它不是很复杂，但它很不舒服，特别是当最终用户可能没有`HTML`背景的一些 wordpress 等需要时。

这是一个[小提琴](http://jsfiddle.net/kFeFj/)。

是否有可能以简单的方式实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T22:20:53.980

在容器元素上尝试负边距

[http://jsfiddle.net/5JZGt/](http://jsfiddle.net/5JZGt/)（此演示显示多个框）

一些HTML：

```
<div class="container">
    <div class="child">

    </div>

    <div class="child">

    </div>

    <div class="child">

    </div>
</div> 
```

CSS：

```
.container {
    margin: -10px 0 0 -10px;
}

.container .child {
    width: 100px;
    height: 100px;
    background: red;
    margin: 10px 0 0 10px;
    float: left;
} 
```

您可以取消`.child`该类，而只引用`div`您正在使用的元素或任何元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T21:49:15.300

有一个更简单的解决方案（[jsFiddle](http://jsfiddle.net/kFeFj/12/)），它不需要您使用 2 个类，即：

```
.col-gutter {
  padding-right: 20px;
}

.col-gutter:last-of-type {
  padding-right: 0;
} 
```

您可以使用一个类将装订线大小设置为您需要的任何大小

**更新（IE8）**

如果你想至少支持 IE8，你可以改用这个：

```
.col-gutter {
  padding-left: 20px;
}

.col-gutter:first-child {
  padding-left: 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T22:05:00.093

您始终可以使用以下方法（对于 3 列布局）：

```
.onethird {
     width: 30%;
     margin-left: 5%;
     float: left;
}
.onethird:first-child {
    float: left;
    margin-left: 0;
}
.onethird.third {
    float: right;
}
​ 
```

只需将其包裹在容器中，并确保清除浮动。

这是您的小提琴的更新：http: [//jsfiddle.net/kFeFj/23/](http://jsfiddle.net/kFeFj/23/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T21:41:08.170

你可以有

HTML

```
<div class="margin-right">
<div class="margin-left margin-right">
<div class="margin-left"> 
```

CSS

```
.margin-left { margin-left: 15px }
.margin-right { margin-right: 15px } 
```

# c - MinGW GCC 不识别 MEMSTATUSEX？

> ID：13828913
> 
> 赞同：0
> 
> 时间：2012-12-11T21:37:24.730
> 
> 标签：c, api, winapi, gcc, mingw

我在 Windows 7 上使用 MinGW GCC 编译器。我正在尝试编译包含以下代码的源代码：

```
MEMORYSTATUSEX mem_stat;
mem_stat.dwLength = sizeof(memstat);
BOOL success = GlobalMemoryStatusEx(mem_stat);
ram_ptr = &(mem_stat->ullAvailPhys); 
```

我相信您可以猜到，这段代码只是使用 GlobalMemoryStatusEx 返回的 MEMORYSTATUSEX 结构获取可用内存。

当我尝试编译时，我收到此错误：

```
error: unknown type name 'MEMORYSTATUSEX' 
```

我查看了 winbase.h（在 MinGW 安装包含文件夹中），猜猜我发现了什么？

```
#if (_WIN32_WINNT >= 0x0500)
typedef struct _MEMORYSTATUSEX {
    DWORD dwLength;
    DWORD dwMemoryLoad;
    DWORDLONG ullTotalPhys;
    DWORDLONG ullAvailPhys;
    DWORDLONG ullTotalPageFile;
    DWORDLONG ullAvailPageFile;
    DWORDLONG ullTotalVirtual;
    DWORDLONG ullAvailVirtual;
    DWORDLONG ullAvailExtendedVirtual;
} MEMORYSTATUSEX,*LPMEMORYSTATUSEX;
#endif 
```

所以它就在那里。我猜这与预编译器if / endif有关，但我不知道如何解决这个问题......

更奇怪的是，如果我改用 MEMORYSTATUS 结构，它可以正常工作。

根据 MS 文档，两者都具有相同的最低客户端版本要求：

MEMORYSTATUSEX：http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa366589%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366589%28v=vs.85%29.aspx)

内存状态：http : [//msdn.microsoft.com/en-us/library/windows/desktop/aa366772%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366772%28v=vs.85%29.aspx)

我需要设置一些编译器标志吗？或者有人有其他解决方案吗？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-15T13:08:06.147

在包含 Windows.h 之前，添加：

```
#define WINVER 0x0500 
```

头文件 windef.h 说：

```
/*
 * If you need Win32 API features newer the Win95 and WinNT then you must
 * define WINVER before including windows.h or any other method of including
 * the windef.h header.
 */ 
```

然后使用 -std=c++11 标志进行编译，例如：

```
g++ -Wall -std=c++11 -c <yourFile>.cpp -o <yourFile>.o 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T20:10:15.853

显然，您必须自己将 _WIN32_WINNT 定义为您的头文件/源文件之一中的编译器标志或定义语句，才能使此特定功能正常工作。

添加`#define _WIN32_WINNT 0x0500`将允许代码正常编译。

# java - 在我的情况下是集合还是数组？

> ID：13828916
> 
> 赞同：1
> 
> 时间：2012-12-11T21:38:15.983
> 
> 标签：java, arrays, collections

我有返回 (x,y,z) 元组的 SQL 请求：

*   x 介于 1 和 9 之间
*   y 在 1 到 500 之间
*   z 介于 1 和 15 之间

因此，如果我所有的 67500 种可能性都存储到数据库中，那么我有 9 * 500 * 15 = 最大 67500 种可能性和最小 0 种可能性。

例如，我的列表中可以有 (4, 256, 1)，但不能有 (3, 410, 8)。

我想生成 3 个链表。例如，如果我选择`x=2`我希望第二个列表显示此 x 值的所有可用 y，并使用 y 选项显示 z 值的同上。

我应该使用 Collection ar Array 轻松检索值以生成 mys 列表吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T21:39:50.037

我认为当数据的大小不是恒定的（或）提前知道时，使用集合 API 总是好的。

如果需要，您可以使用数组并执行此操作`arrayCopy`，但这将是重新发明循环的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T21:44:16.760

通常，仅在绝对需要时才使用数组（例如不在此处）。

你会找到 `Map<Integer, List<Integer>>`一个很好的起点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T21:45:39.620

如果您的元素“列表”是恒定的，则应该使用数组。通过 JDBC API 查询，您将知道查询将返回多少行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T21:46:56.240

由于键落在这样的小范围内，一个简单的`short`s 二维数组就足够了：

```
short data[10][500]; 
```

第一个索引是 的值`x`；第二个指标是 的值`y`。

的值`z`存储为`short`at的各个位`[x][y]`。要访问单个位，请使用位操作：

```
if ((data[x][y] & (1 << z)) != 0) // The element at x,y,x is present
    ...
data[x][y] != (1 << z); // Add an element at x,y,z
data[x][y] &= ~(1 << z); // Remove the element at x,y,z 
```

这种数据结构在空间上非常有效：它需要大约 10KBytes 的内存来存储整个数据集。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-11T21:42:20.100

> 例如，如果我选择 x=2，我希望第二个列表显示此 x 值的所有可用 y，以及带有 y 选择的 z 值的同上。

如果您需要快速检索，您可能应该查看`Map`

# html - 调整窗口大小时保持所有元素定位相同的css定位样式是什么？

> ID：13828917
> 
> 赞同：1
> 
> 时间：2012-12-11T21:38:21.733
> 
> 标签：html, css

我的 html 页面有一些文本、一个搜索栏、一个结果窗格、一个导航栏和几个其他元素，我希望它们彼此保持在相同的位置。

我的想法是在相对定位的容器 div 中制作绝对定位的 div，然后给它们所有最小/最大像素值。

如果我给他们最小/最大像素值，他们不会在调整窗口大小时改变大小/定位，对吗？

但是，如果我这样做了，那么它们不会不适合屏幕较小的显示器吗？

请原谅我的陈述中的任何不准确之处，我仍在学习过程中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T21:53:09.323

如果将高度和宽度设置为百分比，然后设置最小高度和最小宽度，则 div 将弯曲到父 div 的大小（取决于父窗口的大小）。该解决方案的问题在于，对于较小的屏幕尺寸窗口，如果单个 div 的内容需要换行，元素的绝对定位将不允许您向下移动它们。您可以使用默认浏览器设置和调整边距值来定位内部 div，并使用 float:left 或 float:right 定位需要相邻的元素。

# android - 构建android自己的相机：定义正确的方向

> ID：13828920
> 
> 赞同：1
> 
> 时间：2012-12-11T21:38:30.017
> 
> 标签：android, video, camera, android-camera, video-capture

我正在实施相机活动并遇到方向问题。

虽然我成功定义了预览的方向，但最终电影的方向总是错误的 90 度。

我已经尝试了所有建议，我在这里找到的那​​些只是定义了正确的预览，而不是录制的电影。

我正在使用下一种方法开始录制：

```
private void startRecording() {
        mRecordingButton.setBackgroundResource(R.drawable.rec_stop);
        mSwitchCameraButton.setVisibility(View.INVISIBLE);
        mSendButton.setVisibility(View.INVISIBLE);
        mChronometer.setVisibility(View.VISIBLE);

        try {
            mMediaRecorder = new MediaRecorder();

            mCamera.unlock();
            mMediaRecorder.setCamera(mCamera);

            mMediaRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
            mMediaRecorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);

            mMediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
            mMediaRecorder.setAudioEncoder(0x00000003);
            mMediaRecorder.setVideoEncoder(VideoEncoder.H264);

            mMediaRecorder.setOutputFile(getFile().getPath());
            mMediaRecorder.setVideoSize(480, 720);
            mMediaRecorder.setVideoEncodingBitRate(BPS_VIDEO);
            mMediaRecorder.setVideoFrameRate(24);
            mMediaRecorder.setAudioChannels(2);
            mMediaRecorder.setAudioEncodingBitRate(BPS_AUDIO);
            // mMediaRecorder.setOrientationHint(90);

            mMediaRecorder.setPreviewDisplay(mSurfaceHolder.getSurface());

            mMediaRecorder.prepare();
            mMediaRecorder.start();

            mChronometer.setBase(SystemClock.elapsedRealtime());
            mChronometer.start();

            mIsRecording = true;
        } catch (Exception e) {
            e.printStackTrace();
        }
    } 
```

这来定义方向：

```
public void surfaceCreated(SurfaceHolder arg0) {
        mCamera = Camera.open(0);
        Camera.Parameters params = mCamera.getParameters();
        List<Size> sizes = params.getSupportedPictureSizes();
        Size mSize = sizes.get(0);
        params.setPictureSize(mSize.width, mSize.height);

        if (Integer.parseInt(Build.VERSION.SDK) >= 8) {
            Display display =
                    ((WindowManager) getSystemService(WINDOW_SERVICE)).getDefaultDisplay();

            if (display.getRotation() == Surface.ROTATION_0) {
                setDisplayOrientation(mCamera, 90);
            } else if (display.getRotation() == Surface.ROTATION_270) {
                setDisplayOrientation(mCamera, 180);
            }
        } else {
            if (getResources().getConfiguration().orientation == Configuration.ORIENTATION_PORTRAIT) {
                params.set("orientation", "portrait");
                params.set("rotation", 90);
            }
            if (getResources().getConfiguration().orientation == Configuration.ORIENTATION_LANDSCAPE) {
                params.set("orientation", "landscape");
                params.set("rotation", 90);
            }
        }

        mCamera.setParameters(params);

//      setCameraDisplayOrientation(this, 0, mCamera);

        previewCamera();

        if (mCamera == null) {
            Toast.makeText(
                    this.getApplicationContext(),
                    "Camera is not available!",
                    Toast.LENGTH_SHORT).show();
            finish();
        }
    }

    public void previewCamera() {
        try {
            mCamera.setPreviewDisplay(mSurfaceHolder);
            mCamera.startPreview();
        } catch (Exception e) {
            Log.d("VideoCameraActivity", "Cannot start preview", e);
        }
    } 
```

PS这一行解决了这个问题：

```
mMediaRecorder.setOrientationHint(90); 
```

但会导致某些设备（galaxy s1、s3）崩溃。

# c++ - 竞赛游戏树的 C++ 实现

> ID：13828921
> 
> 赞同：9
> 
> 时间：2012-12-11T21:38:31.440
> 
> 标签：c++, opengl, tree

我正在使用 Glut 在 OpenGL 中构建赛车游戏，我对细节有点迷失。首先，任何建议或路线图都会非常棒。

到目前为止，我的想法是这样的：

1.  *转换的树实现。*
2.  *模拟动力学。*****(*)****
***   *用于碰撞检测的八叉树实现。**   *实际碰撞检测。*****(*)*******   *在 Maya 中建模并将其导出为 .OBJ。**   *使用 GLSL 或类似的东西来优化游戏以提高图形质量。*****

 ******(*)：**我不确定这两个的顺序。

所以我从没有树实现的模拟动力学开始，结果对我来说是一个巨大的混乱。你有什么办法可以帮助我建造这样一棵树以用于赛车游戏吗？

我想到了这样的事情，但我不知道如何实现它。

![红色为静态，黄色为动态节点](../Images/58af9d13c43055bbdb4e063e02501c6f.png) ***红色为静态，黄色为动态节点***

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-27T01:26:02.207

我建议与@bezad 完全相反。

从一辆汽车和一条无限的道路开始。

将渲染和动态问题拆分为两个完全不同的事情。常见的更新和/或是和`Car`之间的链接。`CarRenderModel``CarPhysicsModel`

将什么塑造`Car`成 GL 场景取决于`Car`.

除其他外，这意味着您可以`Car`在屏幕上显示一个非常简单的内容，并为其附加一个非常简单的物理模型，并且可以使其`Car`更漂亮或在物理上表现得更好，而无需将两者联系在一起。而且，理想情况下，在每个阶段你都有一些*可玩*的东西。

所以，一辆长方形的汽车，5长3宽，1单位高。一条 13 个单位宽的道路，永无止境。一个固定的相机。也许是地平线。第一个物理模型是火箭飞船，每按下箭头键，汽车就会在该方向上获得 x 个单位/秒的速度。请注意，这辆车不旋转——它是轴对齐的。如果汽车离开道路，它就会爆炸，“游戏”就结束了。

您现在在屏幕上有响应用户输入的内容。您可以花时间制作更精美的汽车模型（车轮等），或者您可以改进汽车物理和控制模型（方向！角度！破坏！=加速！），或者您可以使环境更有趣（添加黑色-和白色条纹，以便您可以看到路边的速度。道路附近的越野部分，可能还有炸毁汽车的树木），或者您可以使相机更有趣（例如，它留在后面车，然后回头看）。

现在，对于动力学，我会使用与汽车-汽车交互不同的代码来处理宇宙-汽车交互，只是为了保持我的理智完好无损。汽车无法改变环境。

这意味着您可以编写一堆车与宇宙的交互，而不是车与车的交互。

...

在 C++ 中构建任意树很容易。

```
#include <vector>
#include <memory>
#include <string>
struct MyTree;
typedef std::unique_ptr<MyTree> upTree; // punt on memory management!
struct MyBaseNode;
typedef std::unique_ptr<MyBaseNode> upNode;

struct MyTree {
  std::vector<upTree> children;
  upNode node;
  MyTree( upNode node_ ):node(std::move(node_)) {}
private:
// if C++11 compiler, use these:
  MyTree( MyTree const& ) = delete;
  MyTree& operator=( MyTree const& ) = delete;
// if C++03, use these:
  // MyTree( MyTree const& ); // no implementation
  // MyTree& operator=( MyTree const& ); // no implementation
};
upTree make_tree(upNode node) { return upTree( new MyTree(std::move(node)) ); }

enum EOrder{ eFirst, eMiddle, eLast };
template<typename Functor>
void walk_tree( upTree const& tree, Functor f, bool bFirst = true, bool bLast = true) {
  if (!tree) return;
  f( tree, bFirst, bLast );
  for (auto it = tree->children.begin(); it != tree->children.end(); ++it) {
    bool bChildFirst = (it == tree->children.begin());
    bool bChildLast = ((it+1) == tree->children.end());
    walk_tree( *it, f, bChildFirst, bChildLast );
  }
}
struct MyBaseNode {
  virtual ~MyBaseNode() {};
  // put things that your tree nodes have to be able to do here
  // as pure virtual functions...
  virtual std::string MyName() const = 0;
};

struct CarsNode : MyBaseNode {
  // cars node implementation!
  virtual std::string MyName() const /*override*/ { return "I am a bunch of CARS!"; }
};
upNode make_cars() { return upNode( new CarsNode() ); }

struct CarNode : MyBaseNode {
  // car node implementation!
  virtual std::string MyName() const /*override*/ { return "I am a CAR!"; }
};
upNode make_car() { return upNode( new CarNode() ); }

struct RoadNode : MyBaseNode {
  // car node implementation!
  virtual std::string MyName() const /*override*/ { return "I am a ROAD!"; }
};
upNode make_road() { return upNode( new RoadNode() ); }

#include <iostream>
void tree_printer_func( upTree const& tree, bool bFirst, bool bLast ) {
  if (bFirst) std::cout << "[ ";
  if (tree->node) {
    std::cout << tree->node->MyName().c_str();
  } else {
    std::cout << "nullNode";
  }
  if (bLast) {
    std::cout << " ]\n";
  } else {
    std::cout << ", ";
  }
}
int main() {
  upTree root = make_tree(upNode());
  upTree carsTree = make_tree(make_cars());
  carsTree->children.push_back( make_tree( make_car() ) );
  carsTree->children.push_back( make_tree( make_car() ) );
  root->children.push_back( std::move(carsTree) );
  upTree roadTree = make_tree(make_road());
  root->children.push_back( std::move(roadTree) );
  walk_tree( root, tree_printer_func );
} 
```

以上内容相当粗糙（例如，我没有在打印机中正确处理端节点），但它演示了 C++ 中的非同质、非泄漏、n 元树结构。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T07:15:31.770

如果我理解正确，那么您是在询问有关如何开发项目（您的游戏）的想法。我会从轮胎、车身、其他汽车零件和汽车等较小的物体开始，然后是环境、地形和道路轨迹等。最后是世界，并将所有其他物体放在一起进入世界。希望能帮助到你。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-28T16:00:22.737

你可以考虑在 gamdev.stackexchange 上发布这个；你可能会在那里得到更好的答案。

话虽如此，我同意[Michael IV](https://stackoverflow.com/users/507043/michael-iv)在评论中的建议。您最好的选择是从免费的开源游戏引擎开始。即使您想制作自己的引擎，首先使用现有引擎构建它也会为您提供有关如何完成它的宝贵想法。

[这是有关使用哪个引擎的游戏开发的相关回答问题。](https://gamedev.stackexchange.com/questions/17260/is-there-an-all-inclusive-c-game-engine-that-is-free)****

# ruby - Ruby 目录如何工作？

> ID：13828924
> 
> 赞同：1
> 
> 时间：2012-12-11T21:38:44.690
> 
> 标签：ruby, io, stream, directory

`Dir`与 -s相比，-s 似乎很尴尬`File`。许多方法与方法相似`IO`，但 a`Dir`不继承自`IO`. 例如，`tell`在`IO`文档中写道：

> 返回 ios 的当前偏移量（以字节为单位）。

当通过正常的`read`-ing 和-ing 时，我会得到像and这样的大量数字。我最初期望这些整数更像“数组”并且只是一个简单的范围。`tell``Dir``346723732``422823816`

*   这些是包含在文件中的字节`Dir`吗？
*   如果没有，返回的数字有什么意义`IO#tell`吗？
*   另外，如果 -s不是 Streams ，为什么它们`Dir`具有`open`and功能？`close`
*   关闭 a 仍然和`Dir`正常一样重要`IO`吗？

任何关于 Ruby 如何工作的一般解释`Dir`都将不胜感激。

**更新**另一个令人困惑的部分：如果`Dir`s 不是`IO`s，为什么[close](http://ruby-doc.org/core-1.9.3/Dir.html#method-i-close)会引发一个`IOerror`？

> 关闭目录流。任何进一步尝试访问 dir 都会引发 IOError。

另请注意，在文档中它认为它是“目录流”。因此，这再次提出了它们是否流式传输的问题，如果不是，为什么要使用命名约定？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T21:50:54.367

文档`Dir#tell`说：

```
Returns the current position in dir. 
```

没有具体说明该职位的含义。返回值的含义可能会根据您使用的操作系统以及包含目录的文件系统的类型而有所不同。该值应该被视为不透明的，不要试图以任何方式解释它。它服务的唯一目的是能够将该值发送回操作系统，例如通过调用`Dir#seek`.

目录不仅仅是一个巨大的文件。更典型的是，它们只是从文件名映射到有关文件数据所在位置的信息。

您不应该（据我所知不能）自己写入目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T17:09:20.287

所以在一些 IRC 聊天之后，这是我得出的结论：

### 对象`Dir`不是`IO`

`Dir`不继承自 IO 类，仅可读。仍然不确定为什么`IOError`在`#close`.

### 然而，一个打开`Dir`的就是一个流

> Dir 类的对象是表示底层文件系统中目录的目录流。

此外，如果您检查[源代码](https://github.com/ruby/ruby/blob/trunk/dir.c#L737-L757)，`Dir#close`您将看到它调用了 C 函数`dirclose`。`man dirclose`印刷：

> 该 `closedir()` 函数关闭与关联的目录流 `dirp`。成功调用`closedir()`也会关闭与`dirp`. 此调用后目录流描述符`dirp` 不可用。

...`dirp`作为一个参数。

所以是的，实例化`Dir`的 s**将**打开一个流，是的，`Dir`s 将使用文件描述符，如果您不想依赖垃圾收集，则需要关闭。

非常感谢**#ruby-lang** irc上的*injekt*和其他人！

# jquery - 如何遍历这个 json 数组并填充一个选择列表？

> ID：13828925
> 
> 赞同：1
> 
> 时间：2012-12-11T21:38:46.980
> 
> 标签：jquery, json

尽管有其他类似的例子，我不能完全让这个每个循环来填充一个选择列表......但我真的很接近！

根据我[之前的问题](https://stackoverflow.com/questions/13755304/why-is-this-jquery-ajax-call-not-returning-data-from-my-php-script)，我使用 PHP 脚本返回一个 json 数组，基于另一个得到部分回答的问题。脚本 getStudyNames.php 返回此 json 数组：

```
[{"studyindex":"1","studyname":"ADHD"},{"studyindex":"24","studyname":"ADHD_RD"},{"studyindex":"20","studyname":"AFL"},{"studyindex":"42","studyname":"AFRICANERS"},{"studyindex":"2","studyname":"AHD"},{"studyindex":"22","studyname":"AJS"},{"studyindex":"3","studyname":"ASA-FS"},{"studyindex":"4","studyname":"ASIAN"},{"studyindex":"5","studyname":"AUS TWINS"},...] 
```

但是，我似乎不太了解如何解析此数组的语法正确，然后将其添加到选择列表中。

这是我尝试执行此操作的代码：

```
$.ajax({                                      
      url: 'getStudyNames.php',        //the script to call to get data          
      data: "",                        //you can insert url argumnets here to pass to api.php
                                       //for example "id=5&parent=6"
      dataType: 'json',                //data format
      error: function() {
        alert('Refresh of study names failed.');
      },
      success: function(data)          //on receipt of reply
      { 
        var $studylist = $('#studylist').empty();
        $data.each(data, function(i, record) {
          $studylist.append('<option value='.record.studyindex.'>'.html(record.studyname) );
        })
       } 
    }); 
```

根据上面的输出，我知道 getStudyNames.php 有效；但是为什么这个学习列表不起作用对我来说仍然是一个谜......感谢任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T21:44:35.340

看起来附加中有一些拼写错误，并且句点不用于 javascript 中的集中，即 PHP，而在 javascript 中这将是`+`标志。

尝试先创建元素，以便更容易查看发生了什么，然后附加它：

```
$.each(data, function(i, record) {
  var elem = $('<option />', {value: record.studyindex, html: record.studyname});
  $studylist.append(elem);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T21:51:36.800

`$data.each(data, function)`

应该

`$.each(data, function)`

`.html()`错误地嵌套在`.append()`

你没有关闭你的`<option>`

`'<option value='.record.studyindex.'>'`

应该

`'<option value=' + record.studyindex + '>'`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T21:52:23.093

尝试将以下内容放入`success`.

```
var $studylist = $('#studylist').empty();
$.each(data, function(i, record) {
   $studylist.append($("<option/>", {
        value: record.studyindex,
        text: record.studyname
    }));
}); 
```

# scala - Scala：抽象类构造函数参数与 Trait val 成员？

> ID：13828926
> 
> 赞同：7
> 
> 时间：2012-12-11T21:38:50.680
> 
> 标签：scala, abstract-class, traits

我注意到有几个关于如何在抽象类和特征之间进行选择的讨论，但似乎没有一个集中在以下点上。让我使用抽象类的一个原因是，它们可以有构造函数参数，而特征不能。但为什么不是以下

```
trait X {
  def haha: Int
}
class Y(val haha: Int) extends X 
```

甚至不需要早期定义来让一切正常工作（我担心）。抽象类版本是

```
abstract class X(haha: Int)
class Y(val haha: Int) extends X(haha) 
```

而且我不喜欢抽象类版本，因为当您多次扩展时，这些构造函数参数无处不在（也许有人告诉我如何避免这种情况？）。

我知道抽象类可以更好地使用 Java 进行插值，并且更符合“is-a”概念。尽管如此，有什么理由我应该在某处使用抽象类吗？谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-11T22:33:33.317

类参数不必是成员（字段或定义）。

```
abstract class X(haha: Int) {
  val hoho = 2 * haha  // compile-time constant
} 
```

同样，特征初始化顺序取决于线性化（混合顺序），这就是特征成员应该是 defs 而不是 vals 的原因。（而且你总是可以用 val 覆盖 def。）使用抽象类，你知道你的 super 是谁，并且你正在为子类定义扩展点。

但请注意，您的抽象类的 val 位置错误：

```
abstract class X(val haha: Int)
class Y(haha: Int) extends X(haha) 
```

也就是说，您会期望 X 决定参数是否是 val （并且不一定是）。在 X 或 Y 中使用参数可以将其变成一个字段。

您对类的值参数的观察也适用于类型参数：将 Foo[A] 向上传递是多么令人讨厌。所以在 Scala 中，我们可以有一个成员类型 A 来代替它可以保持抽象，直到在叶子中定义。但这实际上与是否定义特征或类无关。

但是特征参数正在进入 Scala。（请参阅 Scala 错误以了解由于这个原因而属于低优先级的早期定义。）

# ios - iOS 的 LLDB 的 P 命令不打印帧变量

> ID：13828927
> 
> 赞同：8
> 
> 时间：2012-12-11T21:38:51.810
> 
> 标签：ios, xcode, lldb

可以说我想做一个

```
p uiTextFieldObj.frame 
```

它会说错误：属性

```
'frame' not found on object of type 'UITextField *' 
```

有什么技巧可以让我展示出来吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-11T22:03:10.193

你可以这样做：

```
p (CGRect)[uiTextFieldObj frame] 
```

从 Xcode 4.5.2 开始，使用点语法在 lldb 中打印属性似乎仅适用于您的应用程序中定义的对象的属性，而不适用于框架类定义的属性。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-11T22:02:52.073

您可以通过 [] 表示法而不是 . 符号：

你试过这个吗？

```
print (CGRect)[textfieldObj frame] 
```

如果没有 (CGRect) 强制转换，它很可能会显示一个错误，指出它不知道返回类型。你也可以这样做：

```
po textfieldObj 
```

这将向您显示框架和有关文本字段的其他一些信息。po debug 命令将调用 objects -description 方法，您可以覆盖该方法以提供您喜欢的任何信息。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-08-30T03:04:52.623

查看[Xcode 中的 @import-ant 更改](http://furbo.org/2015/05/11/an-import-ant-change-in-xcode/)

> LLDB 的 Objective-C 解析器现在可以遍历应用程序中使用的任何模块，并确定用于它定义的所有函数和方法的类型

```
e @import UIKit;
po uiTextFieldObj.frame 
```

# php - 这个 AS3 代码与 PHP 文件通信有什么问题？

> ID：13828930
> 
> 赞同：1
> 
> 时间：2012-12-11T21:39:02.490
> 
> 标签：php, mysql, actionscript-3, flash, url

我正在尝试在 Flash 中创建用户登录系统，但我需要通过 PHP 与 MySQL 通信才能这样做。我查看了一些教程，但我一直遇到错误。

这是我在 Flash 中制作的界面，我正在尝试与 controlpanel.php 进行通信

[http://i.imgur.com/JrTWm.png?1](http://i.imgur.com/JrTWm.png?1)

这是代码

文件

```
package actions
{
    import flash.display.MovieClip;
    import flash.events.MouseEvent;
    import flash.net.URLRequest;
    import flash.net.URLVariables;
    import flash.net.URLLoader;
    import flash.events.Event;
    import flash.net.URLLoaderDataFormat;
    import flash.net.URLRequestMethod;
    import flash.text.TextFieldAutoSize;

    public class main extends MovieClip
    {
        public function main():void
        {
            submit_button.buttonMode = true;
            submit_button.addEventListener(MouseEvent.MOUSE_DOWN, checkLogin)

            username.text = "";
            password.text = "";
        }

        public function checkLogin(e:MouseEvent):void
        {
            if(username.text==""||password.text=="")
            {
                if (username.text == "")
                {
                    username.text = "Enter your username";      
                }

                if (password.text == "")
                {
                    password.text="Enter your password";
                }
            }
            else
            {
                processLogin();
            }
        }

        public function processLogin():void
        {
            var phpVars:URLVariables = new URLVariables();
            var phpFileRequest:URLRequest = new URLRequest("http://mathlympics.cu.cc/php/controlpanel.php");
            phpFileRequest.method = URLRequestMethod.POST;
            phpFileRequest.data = phpVars;

            var phpLoader:URLLoader=new URLLoader();
            phpLoader.dataFormat = URLLoaderDataFormat.VARIABLES;

            phpVars.systemCall = "checkLogin";
            phpVars.username = username.text;
            phpVars.password = password.text;

            phpLoader.load(phpFileRequest);
            phpLoader.addEventListener(Event.COMPLETE, showResult);
        }

        public function showResult(event:Event):void
        {
            result_text.autoSize = TextFieldAutoSize.LEFT;
            result_text.text = ""+ event.target.data.systemResult;
        }
    }
} 
```

PHP 文件 - connect.php

```
<?php
$db_username = "censored";
$db_name = "censored";
$db_password = "censored";
$db_host = "mysql2.000webhost.com";
mysql_connect($db_host,$db_username, $db_password, $db_name);
mysql_select_db($db_name) or die (mysql_error());
?> 
```

PHP 文件 - controlpanel.php

```
 <?php
error_reporting(E_ALL);
include_once("connect.php");
$username       = "admin";
$password       = "password";
$sql            = "SELECT * FROM user WHERE username='$username' AND password='$password'";
$query          = mysql_query($sql);
$login_counter  = mysql_num_rows($query);
if ($login_counter > 0)
{
    $data       = mysql_fetch_array($query);
    $userbio    = $data["user_bio"];
    echo "systemResult=" . $userbio;
}
else
{
    echo "systemResult=Invalid";    
}
?> 
```

我没有收到任何错误，但是当我按下提交按钮时，结果文本框中显示未定义，即使我输入了正确的用户名和密码。

```
<!-- Hosting24 Analytics Code -->
<script type="text/javascript" src="http://stats.hosting24.com/count.php"></script>
<!-- End Of Analytics Code --> 
```

对于那些感兴趣的人：这是我的网站，请在[此处输入链接描述](http://mathlympics.cu.cc/loginsystem.swf)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T22:36:33.693

所以问题最终出现在你`SELECT * FROM user...`应该是的时候`SELECT * FROM users...`=）

# java - android和在xml中解析文档

> ID：13828934
> 
> 赞同：0
> 
> 时间：2012-12-11T21:39:26.287
> 
> 标签：java, android, xml

以 xml 向我的应用发送数据：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?><response><status>FAIL</status><time>2012-12-11 22:35</time></response> 
```

我可以通过以下方式读取这些数据：

```
String si;
while(is.available()>0){
    si+=(char)is.read();

} 
```

但是使用文档生成器：

```
Document doc=db.parse(sock.getInputStream()); 
```

将我的应用程序挂在这个地方。

有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T22:36:43.143

我的猜测是套接字输入流永远不会发出文件结束信号，因此解析方法只是挂起等待下一个字符。我建议使用您的示例循环来收集 XML，然后通过将字符串包装在 ByteArrayInputStream 或 StringBufferInputStream 中将其传递给 parse 方法。

# c++ - Microsoft AMP for C++ 与 Dobbs 博士示例？

> ID：13828936
> 
> 赞同：0
> 
> 时间：2012-12-11T21:39:32.470
> 
> 标签：c++, windows

我正在尝试找出完整的代码，如下所述：

[http://www.drdobbs.com/windows/microsofts-c-amp-unveiled/231600761?pgno=2](http://www.drdobbs.com/windows/microsofts-c-amp-unveiled/231600761?pgno=2)

我正在尝试找出如何使用 Simple C++ AMP Version 生成完整的代码示例？如何定义网格对象？我需要使用哪个标头来使用direct3d？看来我的 Visual Studio 2012 将这些标记为未定义。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T22:24:45.663

我以前从未见过`restrict(direct3d)`。我怀疑应该`restrict(amp)`是

你还需要`#include <amp.h>`

# .net - .net MD5 正在播放

> ID：13828937
> 
> 赞同：2
> 
> 时间：2012-12-11T21:39:37.853
> 
> 标签：.net, io, md5

可以说我正在做类似的事情：

```
FileStream fs = File.OpenRead("xxx.xxx");
byte[] buffer = new byte[1024];
int count;
long pos = 0, length = fs.Length;

MD5 md5 = MD5.Create();

while(pos < length && (count = fs.Read(buffer, 0, 1024)) > 0)
{
  doWork(buffer, count);
  md5.AddBlock(buffer, count); // <- Is this possible?
}

byte[] checksum = md5.GetChecksum(); // <- Possible? 
```

我希望能够在通过流时计算 MD5 校验和……这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T21:57:00.007

您正在寻找的两种方法是[TransformBlock](http://msdn.microsoft.com/en-us/library/system.security.cryptography.hashalgorithm.transformblock.aspx)和[TransformFinalBlock](http://msdn.microsoft.com/en-us/library/system.security.cryptography.hashalgorithm.transformfinalblock.aspx)。他们会做你正在寻找的东西。

```
FileStream fs = File.OpenRead("xxx.xxx");
byte[] buffer = new byte[1024];
int count;
long pos = 0, length = fs.Length;

MD5 md5 = MD5.Create();

while(pos < length && (count = fs.Read(buffer, 0, 1024)) > 0)
{
  pos += count;
  doWork(buffer, count);
  int md5Offset = 0

  //The while loop may be unnessasary, I don't know if it will ever process less than the length you pass in. The MSDN is unclear about that.
  while(md5Offset < count)
      md5Offset += md5.TransformBlock(buffer, md5Offset , count - md5Offset, buffer, md5Offset);
}

md5.TransformFinalBlock(buffer, 0, 0);
byte[] checksum = md5.Hash; 
```

# java - 将图像添加到 ToolItem

> ID：13828938
> 
> 赞同：-4
> 
> 时间：2012-12-11T21:39:38.083
> 
> 标签：java, image, swt, toolbar

我想将图像设置为工具项。但是，我的程序不起作用，它只显示一个空窗口。

到目前为止我的代码：

```
import org.eclipse.swt.*;

import org.eclipse.swt.graphics.Image;
import org.eclipse.swt.widgets.*;

public class test
{
    public static void main(String [] args)
    {
        Display display = new Display( );
        final Shell shell = new Shell(display);
        shell.setSize(900, 200);

        final ToolBar t=new ToolBar(shell,SWT.NONE);
        Image image=new Image(display,"C:\\Users\\ART\\Documents\\Parsian\\bottum.jpg");

        final ToolItem ti=new ToolItem(t,SWT.NONE);
        ti.setImage(image);
        ti.setText("test");

        shell.open( );
        while (!shell.isDisposed( ))
        {
            if (!display.readAndDispatch( ))
                display.sleep( );
        }
        display.dispose( );
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T22:03:03.397

您的代码缺少的是魔术功能[`Control#pack()`](http://help.eclipse.org/helios/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/widgets/Control.html#pack())：

```
public static void main(String[] args)
{
    Display display = new Display();
    final Shell shell = new Shell(display);

    final ToolBar bar = new ToolBar(shell, SWT.FLAT | SWT.WRAP | SWT.RIGHT);
    final ToolItem item = new ToolItem(bar, SWT.PUSH);
    Image image = new Image(display, "img/star.png");
    item.setImage(image);
    item.setText("test");

    /* Add this pack() call */
    bar.pack();
    shell.setSize(400, 250);
    shell.open();
    while (!shell.isDisposed())
    {
        if (!display.readAndDispatch())
            display.sleep();
    }
    display.dispose();
} 
```

它看起来像这样：

![在此处输入图像描述](../Images/5c562dcb2515c4bb306c008cf3a68cdd.png)

# javascript - 为 HTML 页面创建面板

> ID：13828943
> 
> 赞同：0
> 
> 时间：2012-12-11T21:40:02.147
> 
> 标签：javascript, jquery, html

我正在使用 JQUery 并尝试为我的 HTML 页面创建一个面板。该面板包含多个 div。

我的 JavaScript 函数是：

```
function createQuestionPanel() {
    var topDiv = $('<div>top div</div>');
    var questionDiv = $('<div>bottom div</div>');
    topDiv.after(questionDiv);
    return topDiv;
} 
```

我调用此函数并将其附加到 HTML 元素的另一个 JQuery 表示。问题是它只显示topdiv。我希望它同时显示底部和顶部 div。我是否需要将所有 div 包装在我的 createQuestionPanel() 方法中，还是有更好的方法来做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T21:42:11.740

只需添加`div`另一层：

```
function createQuestionPanel() {
    var div = $('<div>');
    $('<div>top div</div>').appendTo(div);
    $('<div>bottom div</div>').appendTo(div);
    return div;
} 
```

小提琴：http: [//jsfiddle.net/maniator/d7MtM/](http://jsfiddle.net/maniator/d7MtM/)

或者你可以返回一个 jQuery 对象数组：

```
function createQuestionPanel() {
    var topDiv = $('<div>top div</div>');
    var questionDiv = $('<div>bottom div</div>');
    return [topDiv, questionDiv];
} 
```

小提琴：http: [//jsfiddle.net/maniator/RhCpe/](http://jsfiddle.net/maniator/RhCpe/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T21:44:26.173

你可以把它们加在一起

```
function createQuestionPanel() {
    var div = $('<div>top div</div><div>bottom div</div>');
    return div;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T22:01:18.293

非常简单，用 jQuery 创建两个元素，给它们不同的文本，然后`add()`将它们放在一起，在同一行返回，因为它在我看来仍然可读：

```
function createQuestionPanel() {
  return $('<div />', {text: 'top div'}).add($('<div />', {text: 'bottom div'}));
} 
```

# android - 我在 ContactPicker 中得到重复的数字

> ID：13828944
> 
> 赞同：0
> 
> 时间：2012-12-11T21:40:06.357
> 
> 标签：android, android-contacts

我在 Android 中使用 ContactPicker 时遇到问题。我的代码是下一个

```
public void showContacts(View v){
        phoneNumber.setText("");

        Intent contactPickerIntent = new Intent(Intent.ACTION_PICK, Contacts.CONTENT_URI);  
        startActivityForResult(contactPickerIntent, 1001); 
    }

    @Override  
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {  
        if (resultCode == RESULT_OK) {  
            switch (requestCode) {  
                case 1001:
                    Cursor cursor = null;  
                    String[] numeros = null;
                    try {  
                        Uri result = data.getData();
                        String id = result.getLastPathSegment(); 
                        cursor = getContentResolver().query(Phone.CONTENT_URI, 
                                null, 
                                Phone.CONTACT_ID + "=?", new String[] {id}, null);

                        int phoneIdx = cursor.getColumnIndex(Phone.NUMBER);
                        if(cursor.getCount() > 0){
                            numeros = new String[cursor.getCount()];
                            if (cursor.moveToFirst()) {
                                int cont = 0;
                                do{
                                    numeros[cont] = cursor.getString(phoneIdx);
                                    cont++;
                                }while(cursor.moveToNext());
                            }
                        }
                    } catch (Exception e) {  
                        Log.e("Exception", "Failed to get email data", e);  
                    } finally {  
                        if (cursor != null) {  
                            cursor.close();  
                        }
                        if(numeros != null){
                            if(numeros.length > 1){
                                showNumbers(numeros);
                            }else{
                                phoneNumber.setText(numeros[0]);
                            }
                        }
                    } 
                break;
            }
        }
    }

    private void showNumbers(final String[] numeros){
        AlertDialog.Builder builder = new AlertDialog.Builder(this);

        builder.setSingleChoiceItems(numeros, -1, new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialogo, int item) {
                phoneNumber.setText(numeros[item]);
                dialogo.cancel();
            }
        });

        builder.create().show();
    } 
```

基本上在第一种方法中我调用 ContactPicker，在第二种方法中我收到这个答案，我处理它并验证用户是否有多个电话。

问题是，算法返回我六倍的数字。我不知道为什么会出现这种情况。

# javascript - 将变量添加到 d3/javascript 对象工具提示的 href 链接

> ID：13828946
> 
> 赞同：0
> 
> 时间：2012-12-11T21:40:08.750
> 
> 标签：javascript, html, tooltip, d3.js, href

所以这就是我正在做的事情：

```
var selection = canvas.selectAll("circle").data(data);      
selection.enter().append("circle")
    selection
      .attr("title", function(d){ return "<div class='candtip'>"+d.Name+"<br /><a
        href='Twitter.com/'+d.Twitter><img src='Twitter.png'/></a></div>"}) 
```

因此，对于每个元素，我都会显示一个显示 Twitter 徽标的工具提示，然后我希望当您单击该图片时，它会将您带到该人的 Twitter 页面，但我似乎无法让 href 部分正常工作. 数据的设置方式是“d.Twitter”是一个变量，它保存了那个人的 Twitter 页面的 id，所以如果页面是 Twitter.com/OprahWinfrey，那么 d.Twitter = OprahWinfrey。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:32:16.603

我不确定您使用的浏览器可以在`title`属性创建的工具提示中呈现 html。AFAIK，您只能将纯文本放在工具提示中（即，在`title`属性中）。如果您想要可点击的 html 工具提示，您需要自己创建它们，例如，使用 SVG 标记和组。

这是一个相当完整的示例，您可以根据自己的目的进行剖析：

```
<style>
    circle { fill: #8ad; }
    rect   { fill: white; stroke: #eee; }
    g.candtip         { display: none;  }
    a:hover g.candtip { display: block; }
    g.candtip:hover   { display: block; }
</style>

<svg width="600" height="600" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"></svg>

<script type="text/javascript">
var getY         = function(d,i) { return 100 + i*100; }
var getTranslate = function(d,i) { return "translate(100,"+getY(d,i)+")"; }
var data = [ 
    {Name: "Uwe Jugel", Twitter: "ubunatic"},
    {Name: "Juve",      Twitter: "ubunatic"}
]
var canvas = d3.select("svg")
var selection = canvas.selectAll("a").data(data)
var newLinks = selection.enter().append("a")

newLinks
.attr("xlink:target","_blank")
.attr("xlink:href", function(d,i) { return "http://twitter.com/"+d.Twitter; })

newLinks.append("circle")
.attr("cx", 100)
.attr("cy", getY)
.attr("r", 40)

var newTooltips = newLinks.append("g").attr("class", "candtip")
newTooltips.attr("transform", getTranslate );

newTooltips.append("rect")
.attr("x", 0)
.attr("y", 0)
.attr("width", 100)
.attr("height", 30)

newTooltips.append("text")
.attr("x", 30)
.attr("y", 20)
.text( function(d,i) { return d.Name; } )

newTooltips.append("svg:image")
.attr("xlink:href", "https://twitter.com/images/resources/twitter-bird-16x16.png")
.attr("x", 5)
.attr("y", 5)
.attr("width",  "16px")
.attr("height", "16px")   
</script> 
```

它基本上设置了一个悬停`circle`和一个工具提示组`g.candtip`。工具提示是通过简单的`:hover`规则完成的。SVG 中的链接是通过`<a>`+完成的`xlink:href`。所有数据都由 d3 + d3.style 辅助函数读取和转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T14:19:39.107

尝试：

```
var selection = canvas.selectAll("circle").data(data);      
selection.enter().append("circle")
    selection // no need for this here
      .attr("title", function(d){ return "<div class='candtip'>" + d.Name + "<br /><a
        href='Twitter.com/" + d.Twitter + "'><img src='Twitter.png'/></a></div>"}) 
```

# drupal - Drupal 7 Views - 按字段列出分组

> ID：13828952
> 
> 赞同：4
> 
> 时间：2012-12-11T21:40:39.147
> 
> 标签：drupal, drupal-7, drupal-views

我有一个视图，列出类型`Bio`的内容（人物传记）。但是，我想对其进行格式化，以便将它们分组在不同的标题下。

`Bios`我在内容类型中添加了一个新字段，它是一个包含三个不同选项的下拉列表-`Foo`和. 我想要做的是在他们各自组的标题下显示人员。`Bar``Baz`

目前：

```
- John Doe
- Jane Doe
- Jack Doe
- Juanita Doe
- Jim Doe 
```

我想要的是：

```
#Foo
- John Doe
- Jane Doe

#Bar
- Jack Doe
- Juanita Doe

#Baz
- Jim Doe 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-11T22:29:35.563

您应该能够简单地在视图中进行分组。无需触摸模板。

分组方法如下：

1.  将下拉字段添加到视图中的字段列表中。如果您不想与每个人一起显示（只想显示在顶部），请确保在设置字段时选择“从显示中排除”
2.  单击以配置视图格式的设置。我在示例中使用了“未格式化列表”，但这可能是一个 html 列表或表格...

![在此处输入图像描述](../Images/0fd12113eb9c300d01a9255148b362e9.png)

3.  选择您现在在视图中拥有的字段（即使您没有显示它）作为分组字段！

![在此处输入图像描述](../Images/c2465564bf3fe3fec92d64243ad6ca72.png)

应该是这样！让我们知道它是否适合您。

# neo4j - CYPHER 查询中的 LIKE 子句

> ID：13828953
> 
> 赞同：57
> 
> 时间：2012-12-11T21:40:39.787
> 
> 标签：neo4j, cypher

在 Cypher 查询中似乎不支持 LIKE。

是否有任何其他构造可以执行相同的任务？

例如：

```
start n = node(*) where n.Name LIKE('%SUBSTRING%') return n.Name, n; 
```

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-12-12T09:15:24.830

使用正则表达式： http: [//neo4j.com/docs/developer-manual/current/#query-where-regex](http://neo4j.com/docs/developer-manual/current/#query-where-regex)

```
start n = node(*) where n.Name =~ '.*SUBSTRING.*' return n.Name, n; 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2014-10-09T13:49:10.103

从 2.0 版开始，首选语法使用`MATCH`.

例如

```
MATCH (n) where n.Name =~ '.*SUBSTRING.*' return n.Name, n; 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2017-03-15T17:31:39.953

不需要正则表达式：

```
start n = node(*) where n.Name contains "substring" return n.Name, n; 
```

转到[cypher refcard](https://neo4j.com/docs/cypher-refcard/current/)并向下滚动到 Predicates 部分。你会发现这个和其他有用的东西。

想要不区分大小写？转换为小写：

```
start n = node(*) where lower(n.Name) contains lower("substring") return n.Name, n; 
```

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2014-10-09T22:45:02.363

如果你想让它不区分大小写

```
MATCH (n) WHERE n.name =~ '(?i).*SUBSTRING.*' RETURN n; 
```

# spring - 在 Eclipse Juno 中使用 JRebel 时出现异常

> ID：13828954
> 
> 赞同：0
> 
> 时间：2012-12-11T21:40:45.067
> 
> 标签：spring, jboss, jrebel

我正在尝试使用启用了 JRebel 的 Spring 使用 JBoss 4.2.3 启动 Web 应用程序。

我收到以下异常：

> javax.servlet.ServletException: org.springframework.context.annotation.ComponentScanBeanDefinitionParser.reparse(Lorg/w3c/dom/Element;Lorg/springframework/beans/factory/xml/ParserContext;)Lorg/springframework/beans/factory/config/BeanDefinition ; javax.faces.webapp.FacesServlet.service(FacesServlet.java:606) br.com.mint.common.filter.ClientAbortConnectionFilter.doFilter(ClientAbortConnectionFilter.java:25) br.com.mint.common.filter.FileUploadFilter.doFilter( FileUploadFilter.java:72) org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96) 根本原因
> 
> java.lang.AbstractMethodError: org.springframework.context.annotation.ComponentScanBeanDefinitionParser.reparse(Lorg/w3c/dom/Element;Lorg/springframework/beans/factory/xml/ParserContext;)Lorg/springframework/beans/factory/config/BeanDefinition ; sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) java.lang.reflect.Method.invoke(Method .java:597) org.zeroturnaround.javarebel.integration.spring.annotations.ComponentScanner.doScan(ComponentScanner.java:67) org.zeroturnaround.javarebel.integration.spring.annotations.ComponentScanner.scan(ComponentScanner.java:56) org .zeroturnaround.javarebel.integration.spring.annotations.AnnotationBeanDefinitionManager。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T11:56:41.280

在这方面工作了很长时间后，我认为回到 Eclipse Indigo 是个好主意。安装所有插件并解决与类路径相关的所有问题后，它工作正常。

# ember.js - 如何在 Ember.js 中引用单击的对象

> ID：13828956
> 
> 赞同：4
> 
> 时间：2012-12-11T21:40:48.777
> 
> 标签：ember.js

如果这是一个菜鸟问题，我很抱歉，我是 Ember.js 的新手，并试图弄清楚一些事情。在 Ember.js 中，假设我在数组控制器中有一个对象列表并为每个特定对象呈现一个视图，如果用户单击属于特定对象的 DOM 元素，我如何确定单击了哪个对象的元素？

例子

```
ul#mainChat
  {{#each chat in App.chatController}}
  {{#view App.MainChatView tagName="li"}}
  li | Example
  {{/view}}
  {{/each}} 
```

如果我在聊天控制器数组中有 5 个对象并生成了 5 个 li，用户单击一个，我如何确定属于哪个对象。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T05:10:45.510

您必须为该元素包含一个操作并将该操作传递给一个上下文，您可以通过目标中的操作的 event.context 访问该上下文。

例如。

```
{{#each item in items}}
  <li {{action viewItem item target="view"}}>{{name}}</li>
{{/each}} 
```

然后在您的视图中（或您将操作目标设置为的任何位置，这取决于您在做什么）您将拥有：

```
viewItem: function(event) {
  var item;
  item = event.context;
  //do what you want with the item 
} 
```

# github - 詹金斯没有得到最新的提交

> ID：13828960
> 
> 赞同：5
> 
> 时间：2012-12-11T21:41:08.323
> 
> 标签：github, jenkins, jenkins-plugins

我一直在尝试用 github 配置 jenkins。基本上，当工作区（第一次构建）中没有文件时，一切都很好，jenkins 会获取最新的更改。但是当我触发另一个构建（在推送到 github 之后）时，不会获取最新的更改。

你能给我一些建议吗？提前谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T13:32:14.493

检查运行 jenkins 的机器上的时钟。我遇到了类似的问题，我的构建服务器与源存储库服务器有 2 分钟的时差，最新的更改没有立即获取，而是延迟了。

# html - CSS IE 悬停状态问题

> ID：13828965
> 
> 赞同：0
> 
> 时间：2012-12-11T21:42:03.907
> 
> 标签：html, css

我对 IE 有一个奇怪的问题。基本上，我想创建一个链接，该链接悬停在一个框中的所有内容上，而不用链接实际包装内容。在除 IE 之外的所有浏览器中，这种技术似乎都有效。当我将鼠标悬停在 IE 中时，当我将鼠标悬停在文本上时，它会给我带来问题。它会失去悬停效果，仅当鼠标位于未填充文本的区域时才会产生悬停效果。在我的网站中，我的框中也有一张图片，但为简单起见，我将其从示例中删除。这也发生在 IE10 中，因此这不是单个浏览器问题。

在我的示例中，您会注意到，如果您将鼠标从侧面移入 h3 文本或 p 标签文本，它不会悬停链接，但如果您将鼠标悬停在空白区域，那么它会在文本上方保持徘徊。

**HTML**

```
 <div class="boxWrapper">
   <a href="/"></a>
   <h3>Title Goes Here</h3>
   <p>Content of box goes here</p>
  </div> 
```

**CSS**

```
.boxWrapper {background:green;}
a {position: absolute; height: 45px; width: 100%; z-index: 5; background: transparent; display:block;}
a:hover {background:rgba(255,255,255,.3)}
h3 {background:#aaa;}
a:hover~h3 {background: #565659; position: relative; z-index: 1;}
p {font-size: 18px; line-height: 26px; color: #6d6e71; position: relative; z-index: 1;} 
```

这是我在 jsfiddle [http://jsfiddle.net/NZuK6/上的代码示例](http://jsfiddle.net/NZuK6/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T21:51:43.500

您没有尝试使用`cursor:pointer`css for `.boxWrapper:hover`css 选择器吗？您还可以删除锚标记，并使用`onclick`div 的事件来重定向用户。

[http://jsfiddle.net/NZuK6/1/](http://jsfiddle.net/NZuK6/1/)

您可以修改它以使您的其他悬停效果回到 div 而不是锚点上。希望这可以帮助。

# python - 在 Python 中使用 Mechanize 填充和提交 textarea

> ID：13828968
> 
> 赞同：0
> 
> 时间：2012-12-11T21:42:11.550
> 
> 标签：python, mechanize

好的，所以我正在使用 Mechanize 登录 Google 群组并手动将成员添加到群组中。

我已经能够成功登录并导航到相应的页面。在此页面上有一个文本区域框，您可以在其中添加要手动添加到组的电子邮件地址。

这是文本区域的 html：

```
<textarea class="gwt-TextArea GFBTXDWBA-" id="gwt-uid-224" aria-haspopup="false" dir="" role="combobox" aria-autocomplete="list" aria-activedescendant=""></textarea> 
```

当我运行一个循环时：

```
for form in br.forms():
print form 
```

唯一返回的表单是顶部的“搜索成员”表单，没有任何文本区域出现。

我不认为 select_form 会起作用，因为它实际上不是一个表单。屏幕左上角有一个“添加”按钮，用于提交来自文本区域的输入，这里是“添加”按钮的 HTML：

```
<input type="text" tabindex="-1" role="presentation" style="opacity: 0; height: 1px; width: 1px; z-index: -1; overflow: hidden; position: absolute;"> 
```

我**想要做**的是将电子邮件地址添加到文本区域并提交。任何帮助将*不胜*感激。

这是我的完整代码：

```
import mechanize
import cookielib

br = mechanize.Browser()

cj = cookielib.LWPCookieJar()
br.set_cookiejar(cj)

br.set_handle_equiv(True)
br.set_handle_gzip(True)
br.set_handle_redirect(True)
br.set_handle_referer(True)
br.set_handle_robots(False)

br.set_handle_refresh(mechanize._http.HTTPRefreshProcessor(), max_time=1)

br.addheaders = [('User-agent', 'Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.0.1) Gecko/2008071615 Fedora/3.0.1-1.fc9 Firefox/3.0.1')]

r = br.open('https://accounts.google.com/ServiceLogin?continue=https%3A%2F%2Fgroups.google.com%2Fd%2Fmanagemembers%2Ftesttgroup123456%2Fadd&hl=en&service=groups2&passive=true')
html = r.read()

br.select_form(nr=0)

br.form['Email']='myUsername'
br.form['Passwd']='myPassword'
br.submit()

for form in br.forms():
    print form 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T03:39:41.017

更好的方法是使用 Google 的 Provisioning API

[https://developers.google.com/google-apps/provisioning/](https://developers.google.com/google-apps/provisioning/)

# java - @ManagedNotification 注释有什么作用？

> ID：13828980
> 
> 赞同：4
> 
> 时间：2012-12-11T21:42:28.423
> 
> 标签：java, spring, jmx

这个 SSCCE 有很多代码，但是我在[github](https://github.com/selenium34/jmx-example)上添加了这个代码，以便于交互。

我正试图围绕这个注释转转，但我似乎无法弄清楚它的用途。我创建了一个示例应用程序。我能够创建 MBean、监视它并连接到我的本地 MBean 服务器以在运行时修改应用程序，但看不到 @ManagedNotification 和 @ManagedNotifications 的实际用途。

我可以删除课堂上的 ManagedNotifications，但仍会收到通知。唯一的区别是我没有看到通知的描述，但是只要你的消息是好的，我看不到这个注释的需要。我还缺少什么吗？它上面的 javadocs 声明它将用于方法，但 @ManagedNotifications 和 @ManagedNotification 的目标仅限于类型。这个注释比我看到的还多吗？

# python - 使用两个队列同步线程

> ID：13828981
> 
> 赞同：0
> 
> 时间：2012-12-11T21:42:28.230
> 
> 标签：python, multithreading, queue

假设我有一个线程池。这个线程池使用两个队列`q1`和`q2`. 它读取`q1`并写入新项目`q2`。当`q1`为空时，我们交换两个队列`q1, q2, = q2, q1`并重复该过程，直到两个队列都为空。为了同步线程，我使用了另一个仅包含一个项目的队列，并在进程结束时删除了该项目。

我认为这是一种非常愚蠢的做法。有什么改进建议吗？

[文档](http://docs.python.org/2/library/queue.html#Queue.Queue.join)上有一个非常好的简单示例，但只有一个队列。我的解决方案看起来不太好，如果它是正确的：

```
global flag
global lock
global barrier
global q1
global q2
global q
while True:
    if q1.empty():
        flag = False
        barrier.wait() # wait for all the theads to reach this point.
        # execute the code of swapping queues only once
        with lock:
            if not flag:
                flag = True
                if q2.empty():
                    q.get()
                    q.task_done()
                else:
                    q1, q2 = q2, q1

    process_items_in_q1() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T00:35:13.313

我认为你的方法有效。以下是您可能会或可能不会找到更好的另外两个：

1.  您可以只使用一个队列并推送 N 个标记来分隔“级别”，其中 N 是线程数。当一个线程读取一个标记时，它只调用barrier.wait()。如果目标只是确保所有 N 个线程在级别之间调用 barrier.wait()，这应该就足够了。

2.  或者，您可以简化上面发布的代码：使用 2 个普通列表而不是 2 个队列。所有线程都从 中弹出`list1`并附加到`list2`，这在 Queue 的逻辑中不需要特别注意。此外，如果每个“级别”都相对较大，您可以简单地为每个级别重复创建线程并等待它们全部完成的整个代码。这将使一次一级的逻辑更加明显。

（最后，像往常一样，请注意，到目前为止，您没有通过在 Python 中使用线程获得任何处理能力：这是 GIL。）

# ruby-on-rails-3 - Rails3 Mysql2::Error: Unknown column - ActiveRecord::StatementInvalid

> ID：13828983
> 
> 赞同：3
> 
> 时间：2012-12-11T21:42:39.757
> 
> 标签：ruby-on-rails-3, rails-migrations, mysql2, mysql

我是在这个级别使用 Rails 中的数据库的新手，我已经寻找了几个小时，但还没有找到解决这个特定问题的方法。

版本：**Rails 3.2.9、Ruby 1.9.3、MySQL 5.5.28（mysql2 gem 2.9.0）、Mac OS 10.7.5**

错误：

```
ActiveRecord::StatementInvalid in Action_figures#list

Mysql2::Error: Unknown column 'action_figures.position' in 'order clause': SELECT `action_figures`.* FROM `action_figures`  ORDER BY action_figures.position ASC 
```

提取的源代码（第 14 行附近）：[list.html.erb]

```
11:       <th>Visible</th>
12:       <th>Actions</th>
13:     </tr>
14:     <% @action_figures.each do |action_figure| %>
15:     <tr>
16:       <td><%= action_figure.position %></td>
17:       <td><%= action_figure.name %></td> 
```

**我生成了 ActionFigures 模型和控制器，但稍后在迁移文件中**指定了 :position、:name 等：****

 **```
class CreateActionFigures < ActiveRecord::Migration
  def change
    create_table :action_figures do |t|
      t.string "name"
      t.integer "position"
      t.boolean "visible", :default => false
      t.timestamps
    end
  end
end 
```

这在模型中：

```
class ActionFigure < ActiveRecord::Base
  has_many :pages
  attr_accessible :name, :position, :visible
end 
```

**我已经运行`rake db:migrate`了几次，停止并重新启动服务器，关闭并重新打开终端只是为了确保它不是那些东西，但是当我这样做时：**

```
mysql> SHOW FIELDS FROM action_figures; 
```

我得到下表：

```
+------------+----------+------+-----+---------+----------------+
| Field      | Type     | Null | Key | Default | Extra          |
+------------+----------+------+-----+---------+----------------+
| id         | int(11)  | NO   | PRI | NULL    | auto_increment |
| created_at | datetime | NO   |     | NULL    |                |
| updated_at | datetime | NO   |     | NULL    |                |
+------------+----------+------+-----+---------+----------------+ 
```

问题：

1.  **为什么 :name、:position 和 :visible 没有出现在表格中？**
2.  **我现在如何添加它们？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T21:50:32.547

如果您在旧的 ActionFigures 迁移文件中指定了位置、名称和其他所有内容，`db:migrate`则不会获取该文件中的更改。

如果您查看`schema.rb`db 文件夹中的文件，它有一个版本号。该数字与上次运行的迁移文件上的数字相匹配。因此，当您运行`rake db:migrate`它时，它会考虑该数字，因此它不会在此之前重新运行迁移。发生这种情况是为了不尝试重新创建表等等......

你有几个选择：

1.  如果您此后未进行其他迁移，请执行 a`rake db:rollback`以反转 ActionFigure 表的创建更改。

2.  `rake db:drop`然后使用您在迁移中所做`rake db:create`的`rake db:migrate`更改重新创建表。

3.  删除您在迁移文件中所做的更改，并使用`rails g migration add_name_and_position_to_action_figures name position:integer`并运行`rake db:migrate`以对表进行更改进行新的迁移。

还有其他方法，但根据您数据库中的数据，我只会选择 2 或 3。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T21:51:43.030

您是否添加了表格……运行迁移……然后编辑迁移文件以添加位置和可见属性？如果是这样，您需要添加新的迁移（或重新运行上次迁移）

试试这个;

```
rails g migration add_position_to_action_figures position:integer visible:boolean

bundle exec rake db:migrate 
```**

# c# - 下划线和粗体文本

> ID：13828984
> 
> 赞同：7
> 
> 时间：2012-12-11T21:42:43.243
> 
> 标签：c#, ms-word, openxml

如何使文本带有下划线和粗体？我的文字变粗但没有下划线。
这是我的一些代码，非常直接，它使用运行属性来加粗并给给定的文本加下划线。

```
Run run_header = para_main.AppendChild(new Run());
RunProperties runProps = new RunProperties();
Bold bold = new Bold();
Underline ul = new Underline();
runProps.Append(bold);
runProps.Append(ul);
run_header.AppendChild(new RunProperties(runProps));
//run_header.AppendChild(new RunProperties(new Bold(), new Underline()));

string username = form.Username;
string proces_header = form.HeaderTitle;

run_header.AppendChild(new Text(proces_header + " | " + username));
run_header.AppendChild(new Break()); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-11T21:47:44.963

尝试像这样将 Underline Val 属性设置为 Single：

```
new Underline() { Val = DocumentFormat.OpenXml.Wordprocessing.UnderlineValues.Single } 
```

# sqlite - 第一次使用 SQLite3 用户 python 3，打印中的语法错误

> ID：13828989
> 
> 赞同：0
> 
> 时间：2012-12-11T21:43:14.797
> 
> 标签：sqlite, syntax, python-3.x

我正在开发一个能够通过将问题导出到数据库来进行测验的程序。我在网上看了一会儿，它说在 python 中导入或导出到数据库的最简单方法之一是使用 SQLite3 插件，所以我正在尝试。这是我第一次我在 python 中使用了 SQLite3 插件，并且我在 self.connection.commit() 上不断收到语法错误：

```
def AddQuestion(self, Question, Answer1, Answer2, Answer3, Answer4):
    self.cursor.execute("""INSERT INTO questions
                            VALUES (?, ?, ?, ?, ?, ?)""", (None, Question, Answer1, Answer2, Answer3, Answer4, CorrectAnswer)
    self.connection.commit() 
```

如果我通过在它前面添加 # 来将它变成注释，它会告诉我这里的打印是一个语法错误：

```
print ("Would you like to make a test? Or would you like to take a test?") 
```

也许是我的缩进，还是我做错了什么？

```
import squlite3
class QuestionStorage(object):
    def _init_(self, path):
        self.connection = sqlite3.connect(path)
        self.cursor = self.connection.cursor ()

def Close(self):
    self.cursor.close()
    self.connection.close()

def CreateDb(self):
    query = """CREATE TABLE questions
             (id INTEGER PRIMARY KEY, Question TEXT, Answer1 TEXT, Answer2 TEXT, Answer3 TEXT, Answer4 TEXT, CorrectAnswer TEXT)"""
    self.cursor.exeute(query)
    self.connection.commit()
    #self.cursor.close()

def AddQuestion(self, Question, Answer1, Answer2, Answer3, Answer4):
    self.cursor.execute("""INSERT INTO questions
                            VALUES (?, ?, ?, ?, ?, ?)""", (None, Question, Answer1, Answer2, Answer3, Answer4, CorrectAnswer)
    self.connection.commit()

def GetQuestion(self, index = None):
    self.cursor.execute("""SELECT * FROM questions WEHRE id=?""", (index,))

print ("Would you like to make a test? Or would you like to take a test?")
testTaker = input ("To create a test, type Create. To take a test, type Take.")

if testTaker == "Create":
    testName = input ("Give your test a name.")
    testQ = int(input ("How many questions will be on this test? (Numeric value only.)"))
    testType = input ("Will this test be multiple choice? (y/n)")
    if testType == "N" or "n":
        counter = 1
        qs = QuestionStorage("questions.db")
        qs.CreateDb()
        counter = 1
        while counter >= testQ:
            Answer = []
            Question = input ("What is your question?")
            Answer[1] = input ("What is the first answer?")
            Answer[2] = input ("What is the second answer?")
            Answer[3] = input ("What is the third answer?")
            Answer[4] = input ("What is your last answer?")
            correctAnswer = input("Which answer is the correct answer? (1, 2, 3, or 4?)")
            Answer[5] = Answer[correctAnswer]

        qs.AddQuestion(Question, Answer[1] , Answer[2], Answer[3], Answer[4], Answer[5])
        counter +=1

else: 
```

然后在else之后，我将获得读取数据库的代码以进行测试。

如果有人可以帮助我解决这个问题，那就太好了。现在我只是想让它达到我可以在调试中运行它的地步。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T21:46:37.000

您忘记在此处关闭括号：

```
self.cursor.execute("""INSERT INTO questions
                        VALUES (?, ?, ?, ?, ?, ?)""", (None, Question, Answer1, Answer2, Answer3, Answer4, CorrectAnswer) 
```

`)`在行尾放置另一个结束。

# ios - iOS：向条形按钮发送多个操作

> ID：13828990
> 
> 赞同：0
> 
> 时间：2012-12-11T21:43:17.140
> 
> 标签：ios, uibarbuttonitem

在我的应用程序中，我希望自定义一个条形按钮，该按钮当前显示用户的位置，以便如果用户点击并按住它，它会显示一个包含其他信息的子视图。但是，似乎我只能发送一个动作。绝对是这种情况，还是有办法让我采取多个行动？我知道有一个子类可以启用用户方向位置（例如在地图应用程序中） - 我可以以某种方式实现类似的功能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T21:57:54.850

创建您自己的`UIButton`并添加您想要的所有手势识别器或操作。然后创建`UIBarButtonItem`with `initWithCustomView:`。

```
UIButton *btn = // create button as needed
btn.showsTouchWhenHighlighted = YES; // keep the "glow" effect
[btn addTarget:self action:@selector(someSelector) forControlEvents:someEvent];
// repeat as needed for different events/selectors
// or add gesture recognizers

UIBarButtonItem *btnItem = [[UIBarButtonItem alloc] initWithCustomView:btn]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T21:55:34.670

UIBarButtonItems 只发送一个事件。您需要创建自己的自定义控件，向其中添加手势识别器以识别点击和长按，并使用您的自定义控件创建条形按钮项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T22:35:30.727

正如其他评论所说：不可能将“长按”手势识别器添加到本机栏按钮。有两种方法可以解决这个问题：

1) 在视图层次结构中找到代表按钮的 UIView 并向其添加手势识别器。更多信息[在这里](https://stackoverflow.com/questions/10471390/using-uilongpressgesturerecognizer-and-uibarbuttonitem)。这是非常直接的，只需几行代码即可完成，但如果将来视图的内部结构发生变化，可能会中断。

2) 通过将 UIButton 拖到导航栏按钮上（Interfacebuilder）或以编程方式设置 customView 属性，为导航栏按钮设置 customView。然后，您需要为该 UIButton 赋予 navBarButton 的外观并向其添加手势识别器。

# delphi - 如何使用 dgRowSelect = False 跟踪选定的行

> ID：13828991
> 
> 赞同：1
> 
> 时间：2012-12-11T21:43:23.010
> 
> 标签：delphi, tdbgrid

当 dgRowSelect = False 我如何检测 OnDrawColumnCell 方法中的选定行？

不是选定的单元格，而是包含选定单元格的行。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T21:53:04.163

下面的代码似乎工作。`TDBGrid`仍然保持`SelectedRows`更新（即使没有启用它不会使用它们绘制）`dgRowSelect`，因此您仍然可以在绘图代码中访问它们。（您仍然需要启用`dgMultiSelect`，即使`dgRowSelect`不需要。）

该代码让网格完成所有绘图，只需`Canvas.Brush.Color`在选定的行上设置 。如果该单元格的状态恰好是 ，则提供的颜色将被单个单元格的绘图代码覆盖`gdSelected`。

我已将所选行的颜色设置为`clFuchsia`，并将所选单元格的默认颜色设置为清晰起见（网格对于所选行很*丑陋*`clFuchsia`，但它可以演示）：

```
procedure TForm1.DBGrid1DrawColumnCell(Sender: TObject; const Rect: TRect; DataCol: Integer;
  Column: TColumn; State: TGridDrawState);
var
  Selected: Boolean;
  Grid: TDBGrid;
begin
  Grid := TDBGrid(Sender); 
  if not (gdSelected in State) then
  begin
    Selected := Grid.SelectedRows.CurrentRowSelected;
    if Selected then
      Grid.Canvas.Brush.Color := clFuchsia;
  end;
  Grid.DefaultDrawColumnCell(Rect, DataCol, Column, State);
end; 
```

上面的示例结果，选择了第一行和第三行：

![在此处输入图像描述](../Images/66c423b2a0a7b8cd56c84d0a747bb300.png)

当然，您可以只使用通常选择的颜色`clHighLight`; 不过，我发现它令人困惑，因为未选择行的当前单元格与所选行的颜色完全匹配。如果它们直接相邻，在视觉上会很烦人。

# magento - Magento 1.4.0.1 -> 1.7 MySQL 错误 150

> ID：13828992
> 
> 赞同：1
> 
> 时间：2012-12-11T21:43:36.683
> 
> 标签：magento, magento-1.4, magento-1.7, updating

按照说明进行操作：http: [//turnkeye.com/blog/magento-upgrade-guide/](http://turnkeye.com/blog/magento-upgrade-guide/) （这不是 Magento 官方网站，但它指的是这个）。

我已经让自己

> 现在升级完成，您可以在浏览器中访问您的 Magento 商店执行数据库升级，此过程需要几分钟，请耐心等待。

然后得到mysql错误。谷歌对这个问题一无所知。如果你知道什么，请帮忙。

我的错误日志：

```
a:5:{i:0;s:245:"Error in file: "/home/mysite/public_html/app/code/core/Mage/Customer/sql/customer_setup/mysql4-upgrade-1.4.0.0.7-1.4.0.0.8.php" - SQLSTATE[HY000]: General error: 1005 Can't create table './mysite_magento/customer_form_attribute.frm' (errno: 150)";i:1;s:978:"#0 /home/mysite/public_html/app/code/core/Mage/Core/Model/Resource/Setup.php(645): Mage::exception('Mage_Core', 'Error in file: ...')
#1 /home/mysite/public_html/app/code/core/Mage/Core/Model/Resource/Setup.php(437): Mage_Core_Model_Resource_Setup->_modifyResourceDb('upgrade', '1.4.0.0.6', '1.6.2.0.1')
#2 /home/mysite/public_html/app/code/core/Mage/Core/Model/Resource/Setup.php(320): Mage_Core_Model_Resource_Setup->_upgradeResourceDb('1.4.0.0.6', '1.6.2.0.1')
#3 /home/mysite/public_html/app/code/core/Mage/Core/Model/Resource/Setup.php(235): Mage_Core_Model_Resource_Setup->applyUpdates()
#4 /home/mysite/public_html/app/code/core/Mage/Core/Model/App.php(417): Mage_Core_Model_Resource_Setup::applyAllUpdates()
#5 /home/mysite/public_html/app/code/core/Mage/Core/Model/App.php(343): Mage_Core_Model_App->_initModules()
#6 /home/mysite/public_html/app/Mage.php(683): Mage_Core_Model_App->run(Array)
#7 /home/mysite/public_html/index.php(87): Mage::run('', 'store')
#8 {main}";s:3:"url";s:1:"/";s:11:"script_name";s:10:"/index.php";s:4:"skin";s:7:"default";} 
```

我找到了应该创建表**customer_form_attribute**的确切代码并尝试执行它，但是在没有任何有关其原因的其他信息的情况下得到了相同的错误。这里是：

```
[SQL] 

CREATE TABLE `customer_form_attribute` (
  `form_code` char(32) NOT NULL,
  `attribute_id` smallint UNSIGNED NOT NULL,
  PRIMARY KEY(`form_code`, `attribute_id`),
  KEY `IDX_CUSTOMER_FORM_ATTRIBUTE_ATTRIBUTE` (`attribute_id`),
  CONSTRAINT `FK_CUSTOMER_FORM_ATTRIBUTE_ATTRIBUTE` FOREIGN KEY (`attribute_id`) REFERENCES `{$installer->getTable('eav_attribute')}` (`attribute_id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='Customer attributes/forms relations';
[Err] 1005 - Can't create table './mysite_magento/customer_form_attribute.frm' (errno: 150) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T03:40:07.927

检查你的 mysql 错误日志——它会有更多信息。您可能有一个重复的键，在这种情况下，日志将显示哪个表有问题。运行查询以查找任何重复的键并更正它们。

我建议在升级数据库之前运行[数据库修复工具。](http://www.magentocommerce.com/download)它将识别并纠正大多数数据库完整性问题。

# opencl - opencl 链表/原子函数

> ID：13828994
> 
> 赞同：0
> 
> 时间：2012-12-11T21:43:52.083
> 
> 标签：opencl, gpgpu

我仍然不是 OpenCL 方面的专家，但我想使用 OpenCL 制作一个链接列表（想要制作单元格“体素”和粒子以将它们链接到这些体素中），所以这两个列表是`(particles,voxels)`

我在网上看到了一种使用`atom_xchg`函数的（简单）方法，但是某些 GPU 支持原子函数，而其他 GPU 不支持。

注意：我知道在 khr opencl 中有一个检查来检查是否支持原子函数

所以问题是：

1.  一般来说，哪些 GPU 支持原子功能（例如：来自 nvidia 系列 2xx 及以上或 ATI 4xxx 及以上的 GPU）

2.  本地内存上的原子函数慢吗？

3.  如果不支持原子函数，是否有任何简单的方法来制作链表？

我正在使用 OpenCL 1.0