# StackOverflow 问答 14943000-14943999

# function - 链接多参数函数

> ID：14943001
> 
> 赞同：6
> 
> 时间：2013-02-18T18:31:47.493
> 
> 标签：function, haskell

假设我有两个函数，`f:X->Y`并且`g:Y*Y->Z`. 我想做第三个功能，`h(a, b) = g(f(a), f(b))`.

```
h a b = g (f a) (f b) 
```

有没有办法像这样写`h(a, b) = g*f (a, b)`？

如果`h(a,b,c,d) = g2*g1*f2*f1 (a,b,c,d)`, where`g_i`需要 2 个参数呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-18T18:39:50.610

从 Data.Function中搜索 Hoogle 以查找具有正确[签名](http://www.haskell.org/hoogle/?hoogle=%28a%20-%3E%20b%29%20-%3E%20%28b%20-%3E%20b%20-%3E%20c%29%20-%3E%20a%20-%3E%20c)[`on`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Function.html#v%3aon)的函数。根据其文件，

```
g `on` f 
```

似乎是你想要的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-18T18:44:26.373

`on`组合子（在 中`Data.Function`，正如 gspr 在另一个答案中所指出的那样）定义为

```
g `on` f = \x y -> g (f x) (f y) 
```

这将允许你写

```
h = g `on` f 
```

例如，您可以对此进行更高维的概括

```
g `on3` f = \x y z -> g (f x) (f y) (f z)

g `on4` f = \w x y z -> g (f w) (f x) (f y) (f z) 
```

这样你就可以写

```
h = g `on3` f 
```

可能有一种方法可以写`on3`和`on4`，`on`但如果有的话，我现在看不到。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-18T19:38:25.160

您可能还会发现箭头很有趣。这是一种方法：

```
h g f a b = uncurry g ((f *** f) (a, b)) 
```

这相当于你的例子（除了那个不是免费的）`g`和. 使用：`f``on`

*   `***`for函数的[定义：](http://hackage.haskell.org/packages/archive/base/latest/doc/html/src/Control-Arrow.html#&&&)

    ```
    (***) f g ~(x,y) = (f x, g y) 
    ```

*   的[定义](http://hackage.haskell.org/packages/archive/base/latest/doc/html/src/Data-Tuple.html#uncurry)`uncurry`：

    ```
    uncurry f p =  f (fst p) (snd p) 
    ```

并将它们代入原始方程：

1.  `h g f a b = uncurry g (f a, f b)` *（使用`***`定义）*

2.  `h g f a b = g (f a) (f b)` *（使用`uncurry`定义）*

# java - JPA：PGobject 不能被强制转换

> ID：14943004
> 
> 赞同：0
> 
> 时间：2013-02-18T18:31:52.550
> 
> 标签：java, postgresql, jpa, casting

我第一次使用 JPA，当我尝试查询 postgres 数据库时出现此错误：

```
Exception in thread "main" java.lang.ClassCastException: org.postgresql.util.PGobject cannot be cast to [Ljava.lang.Object; 
```

代码是：

```
List<Results> r = em.createNativeQuery("SELECT r FROM RESULTS r\n"
            + "INNER JOIN SESSION S ON s.SESSION_ID = r.SESSION_ID WHERE s.SESSION_ID = '" + sessionId + "'").getResultList(); 
```

我已经尝试过使用 Object[]，但错误仍然相同

```
List<Object[]> r = em.createNativeQuery("SELECT r FROM RESULTS r\n"
            + "INNER JOIN SESSION S ON s.SESSION_ID = r.SESSION_ID WHERE s.SESSION_ID = '" + sessionId + "'").getResultList(); 
```

有人知道怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T21:25:21.630

我注意到您正在对 nativeQuery 使用 JPQL 语法，您是否使用 createQuery 方法（）尝试过此代码？

```
List<Results> r = em.createQuery("SELECT r FROM RESULTS r\n"
            + "INNER JOIN SESSION S ON s.SESSION_ID = r.SESSION_ID WHERE s.SESSION_ID = '" + sessionId + "'").getResultList(); 
```

如果 sql 是正确的并且您使用的是本机查询，是否

```
Query query = em.createNativeQuery(SELECT * FROM RESULTS r\n"
                + "INNER JOIN SESSION S ON s.SESSION_ID = r.SESSION_ID WHERE s.SESSION_ID = '" + sessionId + "'");
List<Object[]> result = query.getResultList(); 
```

返回没有类转换异常？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T08:47:47.560

假设您使用的是 SQL 而不是 JPQL，那么您为什么不直接使用它呢？

```
List<Object> result = query.getResultList(); 
```

由于您只在 SQL 中选择一列，因此将每一行映射到一个对象更有意义。

# php - 制作一个 wordpress 后循环添加基于顺序的动态自定义样式类

> ID：14943005
> 
> 赞同：0
> 
> 时间：2013-02-18T18:31:54.240
> 
> 标签：php, wordpress

我需要在我的帖子循环中包含一个额外的样式，所以我最终得到了额外的样式选项，如下所示：

```
<article class="first-column format-standard hentry category-uncategorized">
<article class="second-column format-standard hentry category-uncategorized">
<article class="third-column format-standard hentry category-uncategorized">
<article class="first-column format-standard hentry category-uncategorized">
<article class="second-column format-standard hentry category-uncategorized">
<article class="third-column format-standard hentry category-uncategorized"> 
```

然后它重复这个顺序。这样我就可以让我的帖子宽三倍，并且可以很好地设置它们的样式。

我希望添加的关键是第一列，第二列，依此类推。

关于为此在wordpress中添加什么的任何帮助？

这是当前创建此循环的内容：

```
<article id="post-<?php the_ID(); ?>" <?php post_class(); ?>> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T19:11:27.387

在你的循环之外：

```
$classes = array(
    0=>'first-column',
    1=>'second-column',
    2=>'third-column'
);
$i = 0; 
```

在你的循环中：

```
<article id="post-<?php the_ID(); ?>" <?php post_class($classes[$i++%3]); ?>> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-16T14:10:40.497

谢谢为我工作得很好......

我在我目前开发的引导主题上使用了它，我想要两种背景颜色。每个帖子一个浅一个深一个。因此更容易识别每个新帖子。工作得很好，我刚用过

```
$classes = array(
    0=>'light-bg',
    1=>'darl-bg'
);
$i = 0;
<div id="post-<?php the_ID(); ?>" <?php post_class($classes[$i++%2]); ?>>
// The rest of your post html goes here
</div> 
```

# ruby-on-rails - 无法在 Rspec 测试中登录用户（设计 gem）

> ID：14943006
> 
> 赞同：1
> 
> 时间：2013-02-18T18:31:59.530
> 
> 标签：ruby-on-rails, devise, rspec-rails

我找不到我的问题的解决方案：**cant login user in rspec test**。

我尝试了这段代码，下面是这个链接 - [https://github.com/plataformatec/devise/wiki/How-To:-Stub-authentication-in-controller-specs](https://github.com/plataformatec/devise/wiki/How-To:-Stub-authentication-in-controller-specs)

```
require 'spec_helper'
require 'factory_girl_rails'

describe "ololo" do

it "blocks unauthenticated access" do

 user = User.create(email: "lol@mail.com", password: "123456")
 request.env['warden'].stub(:authenticate!).
 and_throw(:warden, {:scope => :user})

  visit "/tasks"

  page.should have_content("Signed in successfully.")

end
end 
```

/*错误*/

```
Failure/Error: page.should have_content("Signed in successfully.")
   expected there to be text "Signed in successfully." in "Task App Home Login You need to sign in or sign up before continuing. Sign in Email Password Remember me Sign upForgot 
```

你的密码？Denys Medynskyi 的任务应用程序”

也试过这个链接 - [http://codingdaily.wordpress.com/2011/09/13/rails-devise-and-rspec/](http://codingdaily.wordpress.com/2011/09/13/rails-devise-and-rspec/)。

设计 wiki 教程也不适合我。

拜托，我几乎没有卡住。帮助我任何人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T18:43:35.233

在没有看到您的错误消息的情况下，我提出一个可能的原因是您创建了用户的硬记录来测试数据库。您可能已经运行了一次此测试，因此第二次创建失败，因为存在具有相同电子邮件的记录。

您需要 FactoryGirl。为什么不使用 FactoryGirl 创建夹具数据？

在`spec/factories/user.rb`

```
FactoryGirl.define do
  factory :user do
    email: "lol@mail.com"
    password "123"
  end
end 
```

在你的测试中，写

```
FactoryGirl.create(:user) 
```

### 添加

与 tut 相比，您缺少两个步骤：

1.  如上所述，您需要使用 FactoryGirl 替换硬创建的记录。
2.  您需要`sign_in`在访问私人页面之前执行该步骤。

仅当您在测试后清除数据库时，您才会对 #2 感到满意。无论如何，建议使用工厂数据而不是硬数据。

# c# - 修剪到第一个数字

> ID：14943008
> 
> 赞同：0
> 
> 时间：2013-02-18T18:32:02.587
> 
> 标签：c#, trim

有没有办法使用标准 .NET 工具将字符串从左到右修剪为第一个数字？或者我需要编写自己的函数（不难，但我宁愿使用标准方法）。对于提供的输入，我需要以下输出：

```
Input           Output
-----------------------
abc123def       123
;'-2s;35(r      2s;35
abc12de3f4g     12de3f4 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T18:36:52.987

您需要使用[正则表达式](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.aspx)

```
string TrimToDigits(string text)
{
    var pattern = @"\d.*\d";
    var regex = new Regex(pattern);

    Match m = regex.Match(text);   // m is the first match
    if (m.Success)
    {
        return m.Value;
    }

    return String.Empty;
} 
```

如果您想像通常那样调用该`String.Trim()`方法，则可以将其创建为[扩展方法](http://msdn.microsoft.com/en-us/library/vstudio/bb383977.aspx)。

```
static class StringExtensions
{
    static string TrimToDigits(this string text)
    {
        // ...
    }
} 
```

然后你可以这样称呼它：

```
var trimmedString = otherString.TrimToDigits(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T18:33:03.397

不，没有内置的方式。您必须编写自己的方法来执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T18:39:11.383

不，我认为没有。方法虽然：

```
for (int i = 0; i < str.Length; i++)
{
    if (char.IsDigit(str[i]))
    {
        break;
    }
    str = string.Substring(1);
}
for (int i = str.Length - 1; i > 0; i--)
{
    if (char.IsDigit(str[i]))
    {
        break;
    }
    str = string.Substring(0, str.Length - 1);
} 
```

我认为这会奏效。

# javascript - 使用 underscore.js 遍历值

> ID：14943011
> 
> 赞同：1
> 
> 时间：2013-02-18T18:32:10.527
> 
> 标签：javascript, jquery, backbone.js, underscore.js

我有一个这样的模板：

```
template: _.template('<% if (inputType == "select") {%><select id="<%= id %>" class="<%= contentClass %>" name="<%= name %>">....options should go here! </select><%}%></p>'), 
```

在我的模型中，其中一个属性是数组。想象一下我正在使用的对象看起来像这样：

```
"contentType":"input",
"contentClass":"createProject_cat",
"placeholder":"Project Category",
"name":"createProject_cat",
"inputType":"select",
"id":"3",
"value":["1","2","3"] 
```

在此示例中，我希望`1, 2 and 3`从标签中的`value`属性包装，然后在上面模板`<option>`的两个标签之间输出它们。`<select>`

我想用`option`标签包装子数组中的每个值并在上面的模板中输出。有没有一种简单的方法来遍历这些值，从模板中打印和输出它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T18:38:22.103

您可以执行与 if 条件相同的操作：

```
<% for(var i=0; i<value.length; i++) { %>
    <option value="<%= value[i] %>">
<% } %> 
```

# sql - 计算行数并给出行的值

> ID：14943013
> 
> 赞同：0
> 
> 时间：2013-02-18T18:32:15.133
> 
> 标签：sql, count

可能真的很简单，但我无法弄清楚。

这是我的 SQL

```
select ag.product_id, COUNT(reviewer) as review_number    
from PRODUCT ag    
left join RATINGANDREVIEW rr on rr.product_id = ag.product_id
where ag.product_id = 123
group by ag.product_id 
```

这给了我对一种产品的评论总数，如下所示：

> 产品编号：123
> 
> 评论编号：3

但我现在希望审稿人的名字也像这样：

> 产品编号：123
> 
> 评论编号：3
> 
> 审稿人：鲍勃·史密斯
> 
> 产品编号：123
> 
> 评论编号：3
> 
> 审稿人：彼得·琼斯
> 
> 产品编号：123
> 
> 评论编号：3
> 
> 审稿人：简·格林

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T18:41:22.333

你可以这样做：

```
select 
ag.product_id, 
reviewer,

(select COUNT(reviewer) 
from PRODUCT ag
left join RATINGANDREVIEW rr on rr.product_id = ag.product_id
where ag.product_id = 123) as review_number

from PRODUCT ag
left join RATINGANDREVIEW rr on rr.product_id = ag.product_id
where ag.product_id = 123 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T18:38:29.090

像这样试试

```
select ag.product_id, COUNT(reviewer) as review_number, rr.reviewer_name
from PRODUCT ag    
left join RATINGANDREVIEW rr on rr.product_id = ag.product_id
where ag.product_id = 123
group by ag.product_id,rr.reviewer_name 
```

# ruby - 在 rails 2.x 中捕获所有路线和 404

> ID：14943017
> 
> 赞同：0
> 
> 时间：2013-02-18T18:32:32.867
> 
> 标签：ruby, ruby-on-rails-2

我的工作是在我的应用程序收到请求`CorsController`时响应跨域 ajax 标头（如果允许） 。`OPTIONS`但是因为我不知道该`OPTIONS`请求的确切位置，所以我在路由文件的顶部设置了一个包罗万象的路由来捕获`OPTIONS`对任何路径的任何请求。

```
map.cors '*path',
  :controller => 'cors',
  :action => 'index',
  :conditions => { :method => :options } 
```

对于实际`OPTIONS`请求，这很好用。当应用程序应该提供`404 Not Found`.

现在，当我加载`/no/404/for/you`（我的应用程序不处理路由的路径）时会发生什么，我不再得到 404。相反，这条路由被激活，我得到一个`405 Method Not Allowed`. 这导致我们的日志充满了并非真正错误的错误，并且监控（如 New Relic）发送有关错误率的恐慌电子邮件，而实际上一切都很好。

似乎看到路径匹配，但`:conditions`不匹配，并引发异常。有趣的是，路线处理似乎是一个 2 遍过程。这个 cors 路由，在我的路由文件的顶部，只有在有`OPTIONS`请求（好）或匹配后没有其他路由声明并且该路径上没有静态文件（坏）时才会触发。

**问题：**

我怎样才能让这个包罗万象的路由针对所有`OPTIONS`请求命中我的控制器，而不会通过`GET`、`POST`和拦截`PUT`并抛出关于其他不匹配路由的错误`DELETE`？

*遗憾的是，我需要在 Rails 2.x 中这样做。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T00:08:06.167

所以你说

> 这个 cors 路由，在我的路由文件的顶部，只有在有 OPTIONS 请求（好）或**匹配后没有其他路由声明**并且该路径上没有静态文件（坏）时才会触发。

您可以在您的最后添加一条路线，该路线`routes.rb`将匹配其他所有内容并返回 404。

正如您所说，这有点骇人听闻，但我看不到任何其他方法可以在顶部完成您的*包罗万象的路线。*也许有人会想出别的办法。

# javascript - 使用字符串而不是数字引用多维数组

> ID：14943019
> 
> 赞同：0
> 
> 时间：2013-02-18T18:32:38.233
> 
> 标签：javascript

如果 java 脚本，我有以下一点，我想使用名称而不是数字来引用多维数组，我认为下面的代码可以工作：

```
 var detail=new Array()

  detail['Big Trailer']=new Array()

  detail['Big Trailer']['Bill'] = 'driving to London' 

  detail['Big Trailer']['John'] = 'driving to Scotland' 
```

但是当我尝试引用数组时，我的所有尝试都未定义

```
 Alert ( detail['Big Trailer]['john'] ) 
```

我是否必须使用诸如 detail[1,0] 之类的数字来引用这些数组，我可以使用字符串来执行此操作吗？请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T18:33:37.260

你想要一个对象，而不是一个数组：

```
var detail = {};
detail['Big Trailer'] = {};
detail['Big Trailer']['Bill'] = 'driving to London';
detail['Big Trailer']['John'] = 'driving to Scotland';

alert(detail['Big Trailer']['John']); // driving to Scotland 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-18T18:35:02.803

一方面，数组是纯粹的数字索引。但是，由于数组是一种对象，您可以通过字符串为其分配属性。

但是，上面示例的问题（假设缺少`'`的是错字）是键区分大小写。如果你`'John'`在一个地方输入，你必须`'John'`在其他地方输入。

# jasper-reports - 使用日期参数时出错

> ID：14943020
> 
> 赞同：1
> 
> 时间：2013-02-18T18:32:39.183
> 
> 标签：jasper-reports, ireport

我正在使用 iReport 5.0.1。我创建了一个日期参数并在我的查询中使用它：

![在此处输入图像描述](../Images/36303985b24320be967ab41e29f1bf42.png)

当我预览报告时，我输入了我的日期参数：

![在此处输入图像描述](../Images/1d6e5a7403a0c2a38c61c0811a318f27.png)

输入所有参数并运行报告后，我收到此错误：

```
Error filling print... Error executing SQL statement for : Sample
net.sf.jasperreports.engine.JRException: Error executing SQL statement for : Sample 
    at com.jaspersoft.jrx.query.PlSqlQueryExecuter.createDatasource(PlSqlQueryExecuter.java:143) 
    at net.sf.jasperreports.engine.fill.JRFillDataset.createQueryDatasource(JRFillDataset.java:1086) 
    at net.sf.jasperreports.engine.fill.JRFillDataset.initDatasource(JRFillDataset.java:667)
    at net.sf.jasperreports.engine.fill.JRBaseFiller.setParameters(JRBaseFiller.java:1258) 
    at net.sf.jasperreports.engine.fill.JRBaseFiller.fill(JRBaseFiller.java:877) 
    at net.sf.jasperreports.engine.fill.JRBaseFiller.fill(JRBaseFiller.java:822) 
    at net.sf.jasperreports.engine.fill.JRFiller.fill(JRFiller.java:61) 
    at net.sf.jasperreports.engine.JasperFillManager.fill(JasperFillManager.java:446) 
    at net.sf.jasperreports.engine.JasperFillManager.fill(JasperFillManager.java:276) 
    at net.sf.jasperreports.engine.JasperFillManager.fillReport(JasperFillManager.java:745) 
    at com.jaspersoft.ireport.designer.compiler.IReportCompiler.run(IReportCompiler.java:891) 
    at org.openide.util.RequestProcessor$Task.run(RequestProcessor.java:572) 
    at org.openide.util.RequestProcessor$Processor.run(RequestProcessor.java:997) 
Caused by: org.postgresql.util.PSQLException: ERROR: syntax error at or near "Feb" 
    at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:1592) 
    at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:1327) 
    at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:192) 
    at org.postgresql.jdbc2.AbstractJdbc2Statement.execute(AbstractJdbc2Statement.java:451) 
    at org.postgresql.jdbc2.AbstractJdbc2Statement.executeWithFlags(AbstractJdbc2Statement.java:350) 
    at org.postgresql.jdbc2.AbstractJdbc2Statement.executeQuery(AbstractJdbc2Statement.java:254) 
    at com.jaspersoft.jrx.query.PlSqlQueryExecuter.createDatasource(PlSqlQueryExecuter.java:136) 
    ... 12 more 
Print not filled. Try to use an EmptyDataSource... 
```

这是怎么回事，我该如何解决？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T19:15:43.970

我认为`!`in`$P!{...}`意味着在报告中包含参数的文字值。

尝试使用`$P{start_date}`and `$P{end_date}`，两者都没有`!`.

实际上，您的 SQL 语句正在使用：

```
and finalinsdate >= Feb/18/2013 
```

这不是一个有效的 SQL 语句，这意味着 PostgreSQL 会抱怨：

```
org.postgresql.util.PSQLException: ERROR: syntax error at or near "Feb" 
```

下次，复制并粘贴源代码，而不是截屏。

# jquery - 带有可变项目的无限轮播

> ID：14943023
> 
> 赞同：0
> 
> 时间：2013-02-18T18:32:41.613
> 
> 标签：jquery, carousel

我正在尝试创建类似于[这个](http://jqueryfordesigners.com/jquery-infinite-carousel/)的轮播组件，基本上这个实现是我正在寻找的，但它不能处理（或没有作为选项）是具有可变数量项目的幻灯片他们。

我在说的是：链接中提到的实现在每张幻灯片中使用 3 个项目，如果最后一张幻灯片没有正好 3 个项目，它会用空项目填充该插槽。这是使无限实现变得容易的相当好的方法。

如果只有一个插槽为空，我尝试对其进行修改以使用列表中的第一项填充该空插槽，如果两个插槽为空，则使用前两个项目等，但我偶然发现下一组幻灯片具有完全不同的显示和逻辑的问题和因此动画变得“有问题”——例如，如果最后一张幻灯片中只有一个插槽是空的，那么回到“开始”第一张幻灯片将有第二、第三和第四个项目而没有第一个项目。

我目前的“workaraound”是在每次重新定位（单击控件按钮）时克隆、附加和前置项目，但这是非常不高效的（每次操作 DOM 并基于原始选择器缓存新的元素集可能代价高昂）并且可能“懒惰的出路”。

这个问题有什么聪明的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:27:18.400

好的，我只是尝试这样做，位置：绝对；方法

似乎工作正常，只需根据您的需要调整动画

这是我的逻辑

```
overflow:hidden; position:relative; 
```

在容器上

所有元素获取

```
position:absolute; 
```

除了要显示的 3 个之外，所有内容都被隐藏，这 3 个元素的左侧位置很难设置为它们的索引（来自绘制元素）

```
left:(4+n*40)+"px" 
```

我设置了一个带有当前元素索引的数组

无功电流 = [0,1,2];

在更改时，我只是将 +3 或 -3 放入此数组内容，并以模数限制在良好范围内

```
function getIndex(n)
{    if(n < 0) return nbelem+n;
     return n%nbelem;
} 
```

一个 util 函数将获取当前数组并为我提供带有新元素的新数组以显示

```
function getNewIndex(n)
{   var newIndex = [];
    for(c=0;c<3;c++)
        newIndex[c] = getIndex(current[c]+n);
    return newIndex;
} 
```

在更改时，我使新的当前元素可见，并且它们的位置在容器限制的右侧或左侧，之后我将它们动画到它们的新位置（左：（4+n*40）+“px”）并为旧元素设置动画在隐藏元素之前将元素显示到容器的左侧或右侧限制

为了做所有这些动画，我写了一个很小的专用函数，showMeElems(newArray,animWay)

我只需要定义左右单击即可使用此功能

```
$left.click(function(){
    showMeElems(getNewIndex(-3),"left");
});

$right.click(function(){
    showMeElems(getNewIndex(3),"right");
}) 
```

这是[小提琴](http://jsfiddle.net/r043v/SbNJR/)

祝你好运

# mysql - MySQL for Excel 时间列

> ID：14943024
> 
> 赞同：2
> 
> 时间：2013-02-18T18:32:42.463
> 
> 标签：mysql, excel, time

在向 Oracle 提交错误报告之前，我想在这里查看是否有人有任何建议。

我在 Excel 2013 中使用 MySQL for Excel，当尝试导入具有 TIME 类型列的表时，导入失败并且我收到以下错误消息：

```
An error occurred when trying to import the data.
Method's type signature is not Interop compatible. 
```

我查找了有关`Method's type signature is not Interop compatible.`但仅发现与 C/C# 相关的信息。

我正在尝试插入格式为相对持续时间的数据，例如 00:02:34（2 分 34 秒），但我找不到执行此操作的方法。MySQL for Excel 不会导入 TIME 列，当我将该列定义为 VARCHAR 时，它会在提交到数据库时对每个值进行一些计算；00:02:34 在数据库中最终为 0.00178240740740741。

有没有我可以使用的不同的列类型会留下像 00:00:00 这样的字符串未格式化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T18:38:11.817

那是因为 excel 无法处理该数据类型的转换，所以报告的内容...... .001782...... 是以天为单位的时间。因此，如果您取 24*60*60* 这个数字，您将得到 2:34...

导入 Excel 时，您可以将单引号 ' 附加到字符串值的开头。这保留了单元格中的格式；但是当您必须将 ' 关闭以进行处理时，它可能会导致数据出现问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-04T18:36:00.780

自 1.3.0 版以来，当您在“导入”对话框的“高级选项”菜单上选择“创建 Excel 表”时，MySQL for Excel 中的此问题已修复 [至少部分]。（如果您未选中该选项，错误仍然会出现。）

已向负责 MySQL for Excel 的 MySQL 团队提出了与您描述的错误消息类似的错误报告。如果您想收到这方面的更新，请随时订阅此链接中的电子邮件更新：[http ://bugs.mysql.com/bug.php?id=72504](http://bugs.mysql.com/bug.php?id=72504)

# ruby-on-rails - 为什么我的一个表单在此页面上同时提交了两个表单？

> ID：14943028
> 
> 赞同：0
> 
> 时间：2013-02-18T18:32:50.400
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms, ruby-on-rails-3.1, ruby-on-rails-3.2

我有两个要从 new.html.erb 提交的表单，由 status_updates 控制器提供。init 形式和 stat 形式。

当我提交统计表格时，一切正常。

init 表单有一个不同的控制器来响应。问题是，当我提交此表单时，它会立即尝试在控制器中为 init 表单查找*stat表单的对象。*

如果我去那个控制器并提供对象的一个​​实例，它将提交*两种*形式。

这是我提交初始化表单时的错误。

```
undefined method `model_name' for NilClass:Class
 <div id='stat'>
   <%= form_for(@status_update) do |f| %> 
```

统计表格提交正常。当初始化表单被提交时，它也会尝试处理 stat 表单。如果我在 init 的操作控制器中提供模型 @status_update ，它将提交两种形式。如果不是，则会引发上述错误。

这是初始化表单的代码

```
<div id='init'>
  <%= form_for(current_user, method: :put ) do |f| %>

    <%= f.label :target_bf_percent %>
    <%= f.text_field :target_bf_pct %>

    <%= f.label :Deficit_percent %>
    <%= f.text_field :deficit_pct %>

    <%= f.label :activity_factor %>
    <%= f.select( :activity_factor, options_for_select( 
                                [['Pick One', nil],
                                ['Sedentary (Desk Job)', 1.2],
                                ['Light Activity (1-3 day a week)', 1.35],
                                ['Moderate Activity (3-5 days a week)', 1.55],
                                ['Very Active ( 6-7 days a week)', 1.75],
                                ['Extremely Active (Atheletic Endurance)', 1.95]]) )
    %>
  <%= f.submit "Post", class:"btn btn-large btn-primary" %> 
<% end %>

</div> 
```

以及统计表格的代码

```
<div id='stat'>
  <%= form_for(@status_update) do |f| %>

    <%= f.label :current_weight %>
    <%= f.text_field :current_weight %>

    <%= f.label :current_bf_pct %>
    <%= f.text_field :current_bf_pct %>

    <%= f.submit "Post", class:"btn btn-large btn-primary" %> 
 <% end %> 
```

status_update 控制器的新动作：

```
def new
  @status_update = current_user.status_update.build if user_signed_in?
end 
```

用户控制器更新操作：

```
def update
    if current_user.update_attributes!(params[:user])
      flash[:success] = "Your personal settings have been saved!"
      render new_status_update_path
    else
      flash[:error] = "Whoops! There was an error saving your personal settings. Please try again."
      render new_status_update_path
    end
 end 
```

* * *

*   请让我知道我可以做些什么来改善这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T20:50:47.930

您是否在同一页面上呈现一个或多个表单并不重要。

您的问题是由@status_update 引起的，因为它为零，但您已经知道了。

仔细检查它是否在您的控制器中初始化。

# php - php imagecopyresized() 制作全黑缩略图

> ID：14943029
> 
> 赞同：0
> 
> 时间：2013-02-18T18:32:54.583
> 
> 标签：php, image, gd, thumbnails

所以，我有这门课是一半的工作。不知何故，我无法复制上传图像的重新调整大小的样本，只有一个具有“正确”尺寸的黑色“正方形”（拧紧尺寸，只要拇指清晰。一次一步）。

我为 WOT 感到抱歉，但它让我发疯了。提前致谢。

```
 <?php 
    class Upload {
#function from http://stackoverflow.com/a/10666106/587811
public function resize_values($origWidth,$origHeight,$maxWidth = 200,$maxHeight = 200){
    #check for longest side, we'll be seeing that to the max value above
    if($origHeight > $origWidth){ #if height is more than width
        $newWidth = ($maxHeight * $origWidth) / $origHeight;
        $retval = array(width => $newWidth, height => $maxHeight);
    }
    else{
        $newHeight= ($maxWidth * $origHeight) / $origWidth;
        $retval = array(width => $origWidth, height => $newHeight);
}
    return $retval;
}
public function image($picurl, $file, $path="images/uploaded/") {
    echo "function chamada!";
    if ($picurl) {
        $picFileName=rand(1,9999).$_SESSION['id'];
        $picExt=substr(strstr($picurl,'.'),1,3);
        $picExt=strtolower($picExt);
        $allowed = array("jpg","png","gif","bmp");
        if (in_array($picExt,$allowed)) {
            if (getimagesize($file)) {
                $picNewName=str_replace(" ","_",$picFileName.'.'.$picExt);
                $picWhereTo=$path.$picNewName;
                $copy=move_uploaded_file($file, $picWhereTo);       
                if ($copy) {

                    list($width, $height) = getimagesize($picWhereTo);
                    $size = $this->resize_values($width,$height,250,250);
                    $thumb = imagecreatetruecolor($size['width'],$size['height']);
    imagealphablending($thumb, false);
                    $source = imagecreatefromjpeg($picWhereTo);
                    imagecopyresized($thumb,$source,0,0,0,0,$size['width'],$size['height'],$width,$height);
                    $picNewName=$picFileName.'_thumb.'.$picExt;
                    imagejpeg($thumb,$path.$picNewName);

                    $picinfo['where']=$picWhereTo;
                    $picinfo['name']=$picNewName;
                    return $picinfo;
                }
                else return false;
            }
            else return false;
        }
        else return false;
    }
}
    }
    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T05:41:34.740

改变你的

```
$source = imagecreatefromjpeg($file); 
```

至

```
$source = imagecreatefromjpeg($picWhereTo); 
```

这就是你调用函数的方式

```
$objoflclass->image($_FILES['img']['name'],$_FILES['img']['tmp_name'],''); 
```

其中 $_FILES['img'] 是图像上传字段的名称，我相信您可以从中了解问题所在

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T18:39:22.867

我遇到了类似的问题。这与具有透明度的png有关。

使用 imagecreatetruecolor() 创建 $thumb 后试一试；

```
imagealphablending($thumb, false); 
```

我不完全确定这是解决方案 - 但我认为它走在正确的轨道上。您的真实颜色支持 alpha 混合 - 它在 jpeg 的背景中混合 - 它可能会因缺乏信息而感到困惑。

如果这不起作用，请描述您要上传的确切图像格式，以便我们试一试，看看会发生什么。

# xslt - 返回每天或产品的总销售额和平均销售额

> ID：14943032
> 
> 赞同：1
> 
> 时间：2013-02-18T18:33:01.090
> 
> 标签：xslt

让我的头脑卡在一些简单的 XSL 函数上。我需要从这个 XML 返回每个产品的总销售额和平均销售额以及每天的总销售额。

```
<products>
    <product>
        <id>1</id>
        <brand>Samsung</brand>  
        <model>Galaxy</model>
        <serialno>00345234</serialno>
        <sales>
            <sale day="20130211">1200</sale>
            <sale day="20130212">9000</sale>
            <sale day="20130213">5400</sale>
        </sales>
    </product>
    <product>
        <id>2</id>
        <brand>Sony</brand> 
        <model>Bravia</model>
        <serialno>07432200</serialno>
        <sales>
            <sale day="20130211">3400</sale>
            <sale day="20130212">990</sale>
            <sale day="20130213">1400</sale>
        </sale>
    </product>
</products> 
```

**输出**

```
Total sales per day: 21390
Total (S/N 00345234): 15600
Average (S/N 00345234): 5200
Total (S/N 07432200): 5790
Average (S/N 07432200): 1930
Total sales for day 20130212 = 9990
Total sales for day 20130213 = 6800
Total sales for day 20130211 = 4600 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T18:49:13.403

简而言之，答案是使用`sum()`带有 XSL 键和`<xsl:sort>`元素的函数。这个与 XSLT 1.0 兼容的示例可能会帮助您入门：

**样式表**：

```
<?xml version="1.0" encoding="iso-8859-1"?>

<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="text"/>
  <xsl:strip-space elements="*"/>

  <!-- Index <sale> elements using the @day attribute -->
  <xsl:key name="kSale" match="sale" use="@day"/>

  <xsl:template match="product">
    <xsl:variable name="serialNo" select="serialno"/>
    <!-- Add together all sales for today. -->
    <xsl:variable name="totalSales" select="sum(sales/sale)"/>
    <!-- Divide total sales by the amount of sales. -->
    <xsl:variable name="averageSales" select="$totalSales div count(sales/sale)"/>
    Total (S/N <xsl:value-of select="$serialNo"/>): <xsl:value-of select="$totalSales"/>
    Average (S/N <xsl:value-of select="$serialNo"/>): <xsl:value-of select="$averageSales"/>
  </xsl:template>

  <xsl:template match="sale">
    <!--
    Get the total sales for this day by adding together the values of all <sale>
    elements with the same @day attribute as this one.
    -->
    <xsl:variable name="totalSalesForDay" select="sum(key('kSale', @day))"/>
    Total sales for day <xsl:value-of select="@day"/>: <xsl:value-of select="$totalSalesForDay"/>
  </xsl:template>

  <xsl:template match="/">
    <xsl:apply-templates select="products/product"/>
    <xsl:apply-templates select="products/product[1]/sales/sale">
      <!-- Sort the sales per day in descending order. -->
      <xsl:sort select="." order="descending" data-type="number"/>
    </xsl:apply-templates>
  </xsl:template>
</xsl:stylesheet> 
```

**输出**：

```
Total (S/N 00345234): 15600
Average (S/N 00345234): 5200
Total (S/N 07432200): 5790
Average (S/N 07432200): 1930
Total sales for day 20130212: 9990
Total sales for day 20130213: 6800
Total sales for day 20130211: 4600 
```

# c# - X 分钟后黑屏

> ID：14943036
> 
> 赞同：1
> 
> 时间：2013-02-18T18:33:11.773
> 
> 标签：c#, .net

我认为我没有足够的休息时间，而且我的眼睛因为在电脑上而有点紧张。我尝试尽可能多地执行 20 分钟规则，但一旦我进入该区域，我往往会忘记这样做。

我想创建一个快速应用程序（如果存在请指点我），它会在 20 分钟后（可能是倒计时前 10 秒）关闭屏幕或使其空白或迫使我休息一下。

不确定 C# 是否可以访问类似这样的 API，也不确定它应该是控制台应用程序还是 wpf 应用程序或什么。它需要在启动时启动，并且可能存在于任务栏中。

有什么建议么？

**编辑**

如果它太宽泛，这就是我所追求的

1.  C# 可以在 X 分钟后空白屏幕吗？然后在 X 秒后恢复正常。
2.  要执行这样的定时任务，最好使用带有 gui 的东西，或者我可以使用控制台应用程序（尝试尽快完成）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T19:00:22.267

要打开/关闭，您可以使用以下类：

```
 public static class MonitorHelper
    {
        [DllImport("user32.dll")]
        public static extern int SendMessage(int hWnd, int Msg, int wParam, int lParam);

        public static void TurnOn()
        {
            SendMessage(-1, WM_SYSCOMMAND, SC_MONITORPOWER, MONITOR_ON);
        }

        public static void TurnOff()
        {
            SendMessage(-1, WM_SYSCOMMAND, SC_MONITORPOWER, MONITOR_OFF);
        }

        const int SC_MONITORPOWER = 0xF170;
        const int WM_SYSCOMMAND = 0x0112;
        const int MONITOR_ON = -1;
        const int MONITOR_OFF = 2;     
    } 
```

类的用法`MonitorHelper`：

```
class Program
{
    static void Main(string[] args)
    {
        MonitorHelper.TurnOff();
        Thread.Sleep(TimeSpan.FromSeconds(2));
        MonitorHelper.TurnOn();
    }
} 
```

如果你想通过打开/关闭监视器来安排你的任务，你可以使用[Quartz.NET](http://quartznet.sourceforge.net/)。

Quartz.NET 示例：

职位类别：

```
class MonitorJob : IJob
{
    public void Execute(IJobExecutionContext context)
    {
        MonitorHelper.TurnOff();
        Thread.Sleep(TimeSpan.FromSeconds(2));
        MonitorHelper.TurnOn();
    }
} 
```

配置代码：

```
ISchedulerFactory schedFact = new StdSchedulerFactory();
IScheduler sched = schedFact.GetScheduler();

IJobDetail job = JobBuilder.Create<MonitorJob>()
 .WithIdentity("monitorJob", "group")
 .Build();

ITrigger trigger = TriggerBuilder.Create()
  .WithIdentity("monitorTrigger", "group")            
  .StartNow()
  .WithSimpleSchedule(x => x.WithIntervalInMinutes(1).RepeatForever())
  .Build();

sched.ScheduleJob(job, trigger);

sched.Start(); 
```

带有 PostMessage 的 MonitorHelper 类：

```
class MonitorHelperEx
{
    [return: MarshalAs(UnmanagedType.Bool)]
    [DllImport("user32.dll", SetLastError = true)]
    static extern bool PostMessage(IntPtr hWnd, uint Msg, IntPtr wParam, IntPtr lParam);

    public static void TurnOn()
    {
        PostMessageSafe(new IntPtr(-1), WM_SYSCOMMAND, SC_MONITORPOWER, MONITOR_ON);
    }

    public static void TurnOff()
    {
        PostMessageSafe(new IntPtr(-1), WM_SYSCOMMAND, SC_MONITORPOWER, MONITOR_OFF);
    }

    static void PostMessageSafe(IntPtr hWnd, uint msg, IntPtr wParam, IntPtr lParam)
    {
        bool returnValue = PostMessage(hWnd, msg, wParam, lParam);
        if (!returnValue)
        {
            throw new Win32Exception(Marshal.GetLastWin32Error());
        }
    }

    static readonly IntPtr SC_MONITORPOWER = new IntPtr(0xF170);
    static readonly uint WM_SYSCOMMAND = 0x0112;
    static readonly IntPtr MONITOR_ON = new IntPtr(-1);
    static readonly IntPtr MONITOR_OFF = new IntPtr(2);     
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T21:02:25.517

您可以使用 WPF 应用程序和 Quartz.NET。

在这种情况下，您将能够将自定义内容添加到窗口，例如时钟，它会在屏幕被阻塞时显示。

MainWindow.xaml：

```
<Window x:Class="WPFBlankScreen.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525"   
        WindowState="Minimized"
        Background="Orange" 
        KeyDown="Window_KeyDown"
        >
    <Grid>        
    </Grid>
</Window> 
```

代码隐藏：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        Init();
    }

    private void Init()
    {
        ISchedulerFactory schedFact = new StdSchedulerFactory();
        IScheduler sched = schedFact.GetScheduler();

        IDictionary<string, object> map = new Dictionary<string, object>();
        map.Add("window", this);

        IJobDetail job = JobBuilder.Create<ShowJob>()
         .WithIdentity("showJob", "group")             
         .UsingJobData(new JobDataMap(map))
         .Build();

        ITrigger trigger = TriggerBuilder.Create()
          .WithIdentity("showTrigger", "group")
          .StartNow()
          .WithSimpleSchedule(x => x.WithIntervalInMinutes(1).RepeatForever())
          .Build();

        sched.ScheduleJob(job, trigger);
        sched.Start();
    }

    private void Window_KeyDown(object sender, KeyEventArgs e)
    {
        if (e.Key == Key.F11)
        {               
            this.Hide();
        }
    }
} 
```

ShowJob 类：

```
class ShowJob: IJob
{
    public void Execute(IJobExecutionContext context)
    {
        Window win = context.JobDetail.JobDataMap.Get("window") as Window;
        if (win != null)
        {
            Application.Current.Dispatcher.Invoke((Action)(() =>
            {
                win.Width = System.Windows.SystemParameters.FullPrimaryScreenWidth;
                win.Height = System.Windows.SystemParameters.FullPrimaryScreenHeight;
                win.WindowStartupLocation = WindowStartupLocation.CenterScreen;
                win.WindowStyle = WindowStyle.None;
                win.Topmost = true;
                win.WindowState = WindowState.Maximized;
                win.Show();
            }));

            IDictionary<string, object> map = new Dictionary<string, object>();
            map.Add("window", win);

            IJobDetail job = JobBuilder.Create<HideJob>()
             .WithIdentity("hideJob", "group")
             .UsingJobData(new JobDataMap(map))
             .Build();

            ITrigger trigger = TriggerBuilder.Create()
              .WithIdentity("hideTrigger", "group")
              .StartAt(DateBuilder.FutureDate(5, IntervalUnit.Second))
              .Build();

            context.Scheduler.ScheduleJob(job, trigger);
        }
    }
} 
```

隐藏作业类：

```
class HideJob: IJob
{
    public void Execute(IJobExecutionContext context)
    {
        Window win = context.JobDetail.JobDataMap.Get("window") as Window;          
        if (win != null && Application.Current != null)
        {               
            Application.Current.Dispatcher.Invoke((Action)(() =>
            {
                win.Hide();
            }));
        }            
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T12:18:18.610

我的回答可能并不花哨，但它非常简单，而且很有效：

在一个新的 Winforms 项目中，执行以下操作：
- 设置 FormBorderStyle = None
- 设置 BackColor = Red（或任何你想要的）
- 设置 TopMost = True
- 设置 WindowState = 最大化
- 在表单上放置一个计时器
- 将计时器间隔设置为 2000
- Set timer Enabled = true
- 双击计时器并写入 Close(); 在事件处理程序中。

完成的！

编辑; 这只会让一个屏幕亮红两秒钟，但你应该能够注意到这一点....

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T10:29:25.687

这就是你关闭屏幕的方式

```
using System.Runtime.InteropServices; //to DllImport

 public int WM_SYSCOMMAND = 0x0112;
 public int SC_MONITORPOWER = 0xF170; //Using the system pre-defined MSDN constants    
 that    can be used by the SendMessage() function .
 [DllImport("user32.dll")]
 private static extern int SendMessage(int hWnd, int hMsg, int wParam, int lParam);
//To call a DLL function from C#, you must provide this declaration .

  private void button1_Click(object sender, System.EventArgs e)
  {

   SendMessage( this.Handle.ToInt32() , WM_SYSCOMMAND , SC_MONITORPOWER ,2 );//DLL    
   function
   } 
```

# matlab - 64 位 Ubuntu 上 32 位 matlab 中的 mex 文件

> ID：14943038
> 
> 赞同：1
> 
> 时间：2013-02-18T18:33:19.637
> 
> 标签：matlab, mex, gcc4.7

我正在尝试从[http://people.cs.uchicago.edu/~rbg/latent/](http://people.cs.uchicago.edu/~rbg/latent/)编译对象检测程序，但是没有任何运气。

我安装了 64 位 Ubuntu 12.10、32 位 MATLAB 2012a。我也有 gcc 编译器

```
ivan@ubuntu:~$ gcc --version
gcc (Ubuntu/Linaro 4.7.2-2ubuntu1) 4.7.2 
```

这是我得到的错误

```
EDU>> demo
compiling the code...
Warning: You are using gcc version "4.7.2-2ubuntu1)".  The version
     currently supported with MEX is "4.4.6".
     For a list of currently supported compilers see: 
     http://www.mathworks.com/support/compilers/current_release/

/usr/bin/ld: cannot find crti.o: No such file or directory
/usr/bin/ld: skipping incompatible /usr/lib/gcc/x86_64-linux-gnu/4.7/libstdc++.so when       searching for -lstdc++
/usr/bin/ld: skipping incompatible /usr/lib/gcc/x86_64-linux-gnu/4.7/libstdc++.a when   searching for -lstdc++
/usr/bin/ld: cannot find -lstdc++
/usr/bin/ld: cannot find -lm
/usr/bin/ld: skipping incompatible /usr/lib/gcc/x86_64-linux-gnu/4.7/libgomp.so when  searching for -lgomp
/usr/bin/ld: skipping incompatible /usr/lib/gcc/x86_64-linux-gnu/4.7/libgomp.a when searching for -lgomp
/usr/bin/ld: cannot find -lgomp
/usr/bin/ld: skipping incompatible /usr/lib/gcc/x86_64-linux-gnu/4.7/libgcc_s.so when searching for -lgcc_s
/usr/bin/ld: cannot find -lgcc_s
/usr/bin/ld: cannot find -lpthread
/usr/bin/ld: cannot find -lc
/usr/bin/ld: skipping incompatible /usr/lib/gcc/x86_64-linux-gnu/4.7/libgcc_s.so when searching for -lgcc_s
/usr/bin/ld: cannot find -lgcc_s
/usr/bin/ld: cannot find crtn.o: No such file or directory
collect2: error: ld returned 1 exit status

    mex: link of ' "bin/fv_cache.mexglx"' failed.

Warning: Maybe you need to call fv_cache('unlock') first? 
> In fv_compile at 50
  In compile at 48
  In demo at 5 

Warning: You are using gcc version "4.7.2-2ubuntu1)".  The version
     currently supported with MEX is "4.4.6".
     For a list of currently supported compilers see: 
     http://www.mathworks.com/support/compilers/current_release/

/usr/bin/ld: cannot find crti.o: No such file or directory
/usr/bin/ld: skipping incompatible /usr/lib/gcc/x86_64-linux-gnu/4.7/libstdc++.so when searching for -lstdc++
/usr/bin/ld: skipping incompatible /usr/lib/gcc/x86_64-linux-gnu/4.7/libstdc++.a when searching for -lstdc++
/usr/bin/ld: cannot find -lstdc++
/usr/bin/ld: cannot find -lm
/usr/bin/ld: skipping incompatible /usr/lib/gcc/x86_64-linux-gnu/4.7/libgcc_s.so when searching for -lgcc_s
/usr/bin/ld: cannot find -lgcc_s
/usr/bin/ld: cannot find -lpthread
/usr/bin/ld: cannot find -lc
/usr/bin/ld: skipping incompatible /usr/lib/gcc/x86_64-linux-gnu/4.7/libgcc_s.so when searching for -lgcc_s
/usr/bin/ld: cannot find -lgcc_s
/usr/bin/ld: cannot find crtn.o: No such file or directory
collect2: error: ld returned 1 exit status

    mex: link of ' "bin/cascade.mexglx"' failed.

Error using mex (line 206)
Unable to complete successfully.

Error in cascade_compile (line 43)
eval(mexcmd);

Error in compile (line 50)
  cascade_compile(opt, verb);

Error in demo (line 5)
compile; 
```

我怀疑这与缺少 32 位库有关。我是 unix 系统的新手，所以我可能没有包含您需要知道的所有信息。

更新：

新错误看起来像

```
/usr/bin/ld: skipping incompatible /usr/lib/gcc/x86_64-linux-gnu/4.7/libstdc++.so when searching for -lstdc++
/usr/bin/ld: skipping incompatible /usr/lib/gcc/x86_64-linux-gnu/4.7/libstdc++.a when searching for -lstdc++
/usr/bin/ld: cannot find -lstdc++
/usr/bin/ld: skipping incompatible /usr/lib/gcc/x86_64-linux-gnu/4.7/libgomp.so when searching for -lgomp
/usr/bin/ld: skipping incompatible /usr/lib/gcc/x86_64-linux-gnu/4.7/libgomp.a when searching for -lgomp
/usr/bin/ld: cannot find -lgomp
/usr/bin/ld: skipping incompatible /usr/lib/gcc/x86_64-linux-gnu/4.7/libgcc_s.so when searching for -lgcc_s
/usr/bin/ld: cannot find -lgcc_s
collect2: error: ld returned 1 exit status

  mex: link of ' "bin/fv_cache.mexglx"' failed. 
```

我试图创建一个符号链接

```
sudo ln -s /usr/lib/i386-linux-gnu/libc.so.6 /usr/lib/libc.so.6 
```

然而并没有解决问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T19:28:25.383

首先尝试`crti`在您的系统中查找：

```
~$ sudo find /usr/ -name crti*
/usr/lib/x86_64-linux-gnu/crti.o
/usr/lib32/crti.o 
```

如果它不存在，或者 lib32 版本，请安装`libc6-dev`：

```
~$ sudo apt-get install libc6-dev 
```

如果存在，请尝试添加库位置：

```
LIBRARY_PATH=/usr/lib/x86_64-linux-gnu:$LIBRARY_PATH 
export LIBRARY_PATH 
```

有关相关问题和帮助， 另请参阅[Ask Ubuntu](https://askubuntu.com/questions/251978/cannot-find-crti-o-no-such-file-or-directory)和[SO中的这些帖子。](https://stackoverflow.com/questions/6329887/compiling-problems-cannot-find-crt1-o)

# php - 在mysql中选择某行

> ID：14943039
> 
> 赞同：0
> 
> 时间：2013-02-18T18:33:24.157
> 
> 标签：php, mysql, variables, post

我对 MYSQL 和 PHP 完全陌生，所以我只需要做一些非常基本的事情。我需要从帐户中选择一个密码`username = $_POST['username']`……我无法弄清楚这个密码，我不断得到`resource id(2)`输入帐户的密码而不是所需的密码。我需要通过 mysql 查询函数传递该 mysql 并将返回值保存在变量 $realpassword 中。谢谢！

编辑：此代码返回资源 id (2) 而不是真实密码代码：

```
<?php
$con = mysql_connect('server', 'user', 'pass'); 
if (!$con) 
{ 
    die('Could not connect: ' . mysql_error()); 
} 
echo '<br/> '; 

// Create table
mysql_select_db("dbname", $con);

//Variables

//save the entered values

$enteredusername = $_POST['username'];
$hashedpassword = sha1($_POST['password']);

$sql = "SELECT password from accounts where username = '$enteredusername'";

$new = mysql_query($sql,$con);

echo "$new";

if (!mysql_query($sql,$con))
{
  die('Error: ' . mysql_error());
}

mysql_close($con);

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T18:48:27.000

如果将[PDO](http://php.net/manual/en/book.pdo.php)与[准备好的语句](http://www.php.net/manual/en/pdo.prepared-statements.php)一起使用会好很多。

这是连接到 MySQL 服务器的方式：

```
$db = new PDO('mysql:host=example.com;port=3306;dbname=your_database', $mysql_user, $mysql_pass); 
```

这就是您正确选择行的方式（使用`bindParam`）：

```
$stmt = $db->prepare('SELECT password FROM accounts WHERE username = ?;');
$stmt->bindParam(1, $enteredusername);
$stmt->execute();
$result = $stmt->fetch(PDO::FETCH_ASSOC);
$password = $result['password']; 
```

此外，绑定参数，而不是立即将它们放入查询字符串，可以保护您免受 SQL 注入（在您的情况下很可能因为您不以任何方式过滤输入）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T18:47:26.857

通过看到这个问题，我们可以理解你对编程非常陌生。所以我要求你通过这个链接[http://php.net/manual/en/function.mysql-fetch-assoc.php](http://php.net/manual/en/function.mysql-fetch-assoc.php)

我正在为下面的每一行添加评论

```
$sql = "SELECT id as userid, fullname, userstatus
        FROM   sometable
        WHERE  userstatus = 1"; // This is query

$result = mysql_query($sql); // This is how to execute query

if (!$result) { //if the query is not successfully executed
    echo "Could not successfully run query ($sql) from DB: " . mysql_error();
    exit;
}

if (mysql_num_rows($result) == 0) { // if the query is successfully executed, check how many rows it returned
    echo "No rows found, nothing to print so am exiting";
    exit;
} 

while ($row = mysql_fetch_assoc($result)) { //fetch the data from table as rows
    echo $row["userid"]; //echoing each column
    echo $row["fullname"];
    echo $row["userstatus"];
} 
```

希望能帮助到你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T18:48:26.190

尝试这个

```
 <?php
  $con = mysql_connect('server', 'user', 'pass'); 
 if (!$con) 
 { 
 die('Could not connect: ' . mysql_error()); 
 } 
 echo '<br/> '; 

// Create table
 mysql_select_db("dbname", $con);

 //Variables

 //save the entered values

 $enteredusername = mysql_real_escape_string($_POST['username']);
 $hashedpassword = sha1($_POST['password']);

 $sql = "SELECT password from accounts where username = '$enteredusername'";

 $new = mysql_query($sql,$con);

 $row = mysql_fetch_array($new) ;
 echo $row['password'];

 if (!$new)
{
 die('Error: ' . mysql_error());
}

 mysql_close($con);

?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T18:49:22.857

我认为您的代码看起来像这样

```
$realpassword = mysql_query("SELECT password 
     from accounts where username = '$_POST[username]'");
echo $realpassword; 
```

这将返回一个`Resource`用于指向数据库中记录的。然后您需要做的是获取资源指向的行。所以，你这样做（请注意，我将使用结构化 MySQLi 而不是 MySQL，因为 MySQL 现在已被弃用。）

```
$connection = mysqli_connect("localhost", "your_mysql_username", 
    "your_mysql_password", "your_mysql_database") 
    or die("There was an error");
foreach($_POST as $key=>$val) //this code will sanitize your inputs.
    $_POST[$key] = mysqli_real_escape_string($connection, $val);
$result = mysqli_query($connection, "what_ever_my_query_is") 
    or die("There was an error");
//since you should only get one row here, I'm not going to loop over the result.
//However, if you are getting more than one rows, you might have to loop.
$dataRow = mysqli_fetch_array($result);
$realpassword = $dataRow['password'];
echo $realpassword; 
```

因此，这将负责检索密码。但是你有更多的内在问题。您没有清理输入，甚至可能没有将散列密码存储在数据库中。如果您是从 PHP 和 MySQL 开始的，那么您真的应该研究一下这些东西。

编辑：如果您只是想创建一个登录系统，那么您不需要从数据库中检索密码。在这种情况下，查询非常简单。

```
$pass = sha1($_POST['Password']);
$selQ = "select * from accounts 
    where username = '$_POST[Username]' 
    and password = '$pass'";
$result = mysqli_query($connection, $selQ);
if(mysqli_num_rows($result) == 1) {
    //log the user in
}
else {
    //authentication failed
} 
```

从逻辑上讲，用户可以登录的唯一方法是用户名和密码都匹配。因此，用户名和密码只有 1 行。这正是我们在这里检查的内容。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-18T18:39:06.473

```
$username = $_POST['username'];                                       
$login_query = "SELECT password FROM users_info WHERE users_info.username ='$username'";        
$password = mysql_result($result,0,'password'); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-02-18T18:37:50.490

```
<?php
$query = "SELECT password_field_name FROM UsersTableName WHERE username_field_name =".$_POST['username'];
$result = mysql_query($query);
$row = mysql_fetch_array($result);
echo $row['password_field_name'];
?> 
```

# flash - Adobe Air Desktop - 防止解压缩以获取内容

> ID：14943042
> 
> 赞同：0
> 
> 时间：2013-02-18T18:33:40.940
> 
> 标签：flash, air, adobe, unzip

我最近创建了一个用于 PC 的 Adob​​e Air APP，它是一个 mp3 播放器。我希望人们使用我的应用程序有很多原因。然后放到我的网站上下载。可悲的是，有人在 facebook 上分享它并说“如果你只想要 MP3 而不是 APP，只需解压缩 adobe air 程序，你可以在单独的播放器中收听它们。”

听到这个消息我非常沮丧。我有添加和捐赠按钮等......这是创建应用程序的一个重要意义。无论如何我的问题：

**有没有办法防止 ADOBE AIR 应用程序被解压？**我需要投影图像、mp3 等。

我知道对于 PC，您可以将其放入 .EXE 中。那应该有效吗？但是MAC呢。有没有办法防止文件夹被解压缩？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T19:23:28.480

如果他们想破解它，他们就会破解它。您可以做的至少可以防止最基本的黑客攻击的事情是加密您的 mp3 文件。然后，您可以将其加载到 a`ByteArray`中并在应用程序中解密，然后从内存中播放。但是，这并不能保证有人无法对您的代码进行逆向工程、找出您的加密密码/算法并窃取您的数据。

# function - 在 Matlab 中通过函数句柄传递附加参数

> ID：14943044
> 
> 赞同：5
> 
> 时间：2013-02-18T18:34:03.910
> 
> 标签：function, matlab, optimization, handle

我有一个函数来优化，比如函数，在 Matlab 中。这个函数取决于我想要优化的变量（比如 x）和一个不需要优化的参数（比如 Q）。因此，函数 Function(x,Q)。换句话说，我有一个 Q 值数组，并且想为每个 Q 找到最佳 x 值。但是，在优化函数中使用函数句柄 @Function 时，我找不到如何传递这些 Q 值的方法。

所以，我的问题是如何在优化函数中使用函数句柄时传递这些 Q 值，例如 fmincon(@Function,x0,A,b)？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T18:38:00.317

尝试使用匿名函数：

```
x = cell( 1, numel(Q) );
for qi = 1:numel( Q )
   x{qi} = fmincon( @(x) Function(x, Q(qi)), A, b );
end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-10T23:17:50.750

如 MATLAB 文档中所述，这个问题实际上有 3 个解决方案：

1.  **[Shai](https://stackoverflow.com/a/14943113/1714410)对这篇文章的回答中
    描述的**匿名函数。****
***   **嵌套函数**：
    在这种方法中，外部函数接受所有参数，而内部函数只接受对其进行优化的参数。
    这是取自 MATLAB 文档的示例： `function [x,fval] = runnested(a,b,c,x0) [x,fval] = fminunc(@nestedfun,x0); % Nested function that computes the objective function function y = nestedfun(x) y = (a - b*x(1)^2 + x(1)^4/3)*x(1)^2 + x(1)*x(2) +... (-c + c*x(2)^2)*x(2)^2; end end`*   **在这种方法中，您应该像在工作空间中一样定义目标函数中所需的参数，并在目标函数`global`中使用它们并将它们声明为全局变量**。**
    这是 MATLAB 文档中的一个示例：

    *   定义目标函数： `function y = globalfun(x) global a b c y = (a - b*x(1)^2 + x(1)^4/3)*x(1)^2 + x(1)*x(2) + ... (-c + c*x(2)^2)*x(2)^2; end`
    *   优化： `global a b c; a = 4; b = 2.1; c = 4; % Assign parameter values x0 = [0.5,0.5]; [x,fval] = fminunc(@globalfun,x0)`****

# spring - 不能在 JUnit 中使用 HSQL 序列

> ID：14943046
> 
> 赞同：1
> 
> 时间：2013-02-18T18:34:11.933
> 
> 标签：spring, junit, hsqldb, spring-batch

我正在尝试为我的 Spring-Batch 应用程序运行 JUnit 测试类。我必须创建以下表格：[http](http://static.springsource.org/spring-batch/reference/html/metaDataSchema.html) ://static.springsource.org/spring-batch/reference/html/metaDataSchema.html 。我在初始化数据库脚本中创建它们，包括以下内容：

```
CREATE SEQUENCE BATCH_STEP_EXECUTION_SEQ;
CREATE SEQUENCE BATCH_JOB_EXECUTION;
CREATE SEQUENCE BATCH_JOB_SEQ; 
```

所有序列和表格的创建都没有产生任何错误。但是在执行我的 JUnit 测试时，我收到以下错误：

```
org.springframework.dao.DataAccessResourceFailureException: Could not obtain identity(); nested exception is java.sql.SQLSyntaxErrorException: user lacks privilege or object not found: BATCH_JOB_SEQ
    at org.springframework.jdbc.support.incrementer.HsqlMaxValueIncrementer.getNextKey(HsqlMaxValueIncrementer.java:119) 
```

这是在类 HsqlMaxValueIncrementer 运行时引起的：

```
stmt.executeUpdate("insert into " + getIncrementerName() + " values(null)"); 
```

我究竟做错了什么？

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T11:48:56.787

对于 HSQLDB，3 个表需要 ID 字段。

```
CREATE TABLE BATCH_STEP_EXECUTION_SEQ (
           ID BIGINT IDENTITY
);
CREATE TABLE BATCH_JOB_EXECUTION_SEQ (
           ID BIGINT IDENTITY
);
CREATE TABLE BATCH_JOB_SEQ (
           ID BIGINT IDENTITY
); 
```

参考：[https ://github.com/SpringSource/spring-batch/blob/master/spring-batch-core/src/main/resources/org/springframework/batch/core/schema-hsqldb.sql](https://github.com/SpringSource/spring-batch/blob/master/spring-batch-core/src/main/resources/org/springframework/batch/core/schema-hsqldb.sql)

# grails - Grails 事件推送插件没有得到服务器事件的响应

> ID：14943049
> 
> 赞同：0
> 
> 时间：2013-02-18T18:34:18.147
> 
> 标签：grails, push

我一直在尝试让 grails 事件推送插件工作，但在`savedToDo`调用事件时似乎无法从服务器获取响应数据。我可以在控制台中看到到达服务器并执行服务代码的数据的日志，但客户端似乎没有得到响应。我的代码如下：

MyService.groovy

```
package eventspush

import grails.converters.JSON

import grails.events.*

class MyService {

   //will receive client events from 'saveTodo' topic
    @Listener(namespace='browser') 
    def saveTodo(Map data){
        log.info(data)
        data.moreData = "There we go...."
        event('savedTodo', data) // will trigger registered browsers on 'savedTodo' topic
    }
} 
```

conf/MyEvents.groovy

```
events = {
    "savedTodo"  browser: true, browserFilter: { message, request ->    
     return true
  }
} 
```

索引.gsp

```
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <r:require modules="grailsEvents"/>
    <meta name='layout' content='main'/>
    <r:script>
    $(document).ready(function () {

      /*
       Register a grailsEvents handler for this window, constructor can take a root URL,
       a path to event-bus servlet and options. There are sensible defaults for each argument
       */
      window.grailsEvents = new grails.Events("${createLink(uri: '')}", {logLevel:"debug", transport:'websocket'});

        var data = new Object();

        data.name="some name"

        grailsEvents.send('saveTodo', data); //will send data to server topic 'saveTodo'
        grailsEvents.on('savedTodo', function (data) {
        console.log(data)
        }, {});

    });
    </r:script>
</head> 
```

我的问题是我没有看到控制台中记录了任何数据。有人知道我做错了什么吗？

编辑，我已经找出了问题所在，并相应地更新了 MyEvents.groovy，上面的代码现在可以工作了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T07:39:30.523

您似乎已将“savedTodo”映射添加到目录中的`PushEvents.groovy`文件`Plugin`。*这是错误的！*

您应该在自己项目的文件夹中添加自己的`*Events.groovy`文件，并保持插件文件不变！`conf``PushEvents.groovy`

~~到目前为止，其他代码看起来还不错；）~~

您的 JavaScript 部分中有一个错字`index.gsp`：

上面写着：

```
grailsEvents.send('saveTodo', data); 
```

什么时候应该：

```
grailsEvents.send('savedTodo', data); 
```

您省略了“d” ... ;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T12:27:28.320

所以我发现是什么导致数据没有被推送到客户端。

`MyService.groovy`我从被编辑的行

`event('savedTodo', data)`

至

`event(topic:'savedTodo', data:data)`

它现在按预期工作

# php - 当magento中缺少left.phtml时如何编辑左列？

> ID：14943050
> 
> 赞同：0
> 
> 时间：2013-02-18T18:34:19.880
> 
> 标签：php, html, magento, magento-1.7

我正在尝试在左侧栏中的 magento 中显示某个类别的子类别。我找到了一些解决方案，说我必须更改 app\design\frontend\base\default\template\catalog\navigation\left.phtm 中的代码，但我只有 top.phtml 和 verticalcollapse.phtml。然而，显示左列的代码是 getChildHtml('left') ?>。这是在 app/design/frontend/default/forest_classyshop/template/page/2collumn-left.phtml 中。

我的问题是我在哪里可以找到应该在 left.phtml 中丢失的代码“left”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T19:45:01.167

它可能位于 app\design\frontend\default\default\template\catalog\navigation\left.phtml。

Magento 将在您的模板中查找文件。如果不存在，它将在 Default 中查找该文件。如果不在那里，它将查看 Base。听起来有人在 Base.. 中删除了该文件。我会查看 app\design\frontend\YOUR_PACKAGE\YOUR_TEMPLATE\template\catalog\navigation\left.phtml 然后 app\design\frontend\Default\Default\template\catalog\navigation \left.phtml

# c# - 多对多关系标识错误

> ID：14943051
> 
> 赞同：0
> 
> 时间：2013-02-18T18:34:24.117
> 
> 标签：c#, ef-code-first, many-to-many, entity-framework-5

我正在使用 ef5 codefirst 开发 mvc4 应用程序，但无法解决此错误：

元数据集合中不存在身份为“xxxx”的成员。

**更新：** 我看到我使用了两个不同的上下文（导航对象被称为通过创建不同 DbContext 的存储库），这可能是一个问题。我改变了它，但现在我得到一个新的错误：

> 列名“Brewery_BreweryId”无效。

在 IntelliTrace 中，我看到 ef 试图

```
select ..., Brewery_BreweryId from UserProfiles 
```

此列不存在也不应该存在，我想要多对多，而不是一对多。

我认为这与多对多关系有关。

这是我的代码示例

```
internal class BreweryConfiguration : EntityTypeConfiguration<Brewery>
{
    public BreweryConfiguration()
    {
      // PK
      HasKey(e => e.BreweryId);

      // FK
      HasMany(e => e.UserProfiles)
        .WithMany()
        .Map(m =>
        {
          m.MapLeftKey("BreweryId");
          m.MapRightKey("UserId");
          m.ToTable("BreweryUserProfiles");
        });

    namespace Project2.DAL.Entities
    {
      [Table("Breweries")]
      public class Brewery : ABrewery
      {
        public int BreweryId { get; set; }
        public ICollection<UserProfile> UserProfiles { get; set; }
      }
    }

    namespace Project1.DAL.Entities
    {
      [Table("UserProfiles")]
      public class UserProfile : IUserProfile
      {

        [Key]
        public int UserId { get; set; }
        ...
      }
} 
```

![连接表](../Images/266f10e22f1b3dac5fe79475854795a4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T18:37:43.567

```
c.MapLeftKey("ClassB_ID");
c.MapRightKey("ClassA_ID"); 
```

应该

```
c.MapLeftKey("ClassA_ID");
c.MapRightKey("ClassB_ID"); 
```

编辑：

您还需要在配置中定义 ClassB 的 PK。在您实现的方式中，您可以为 ClassB 添加另一个派生配置。

# iphone - 当 UIWebView 中的文本字段处于活动状态时禁用缩放

> ID：14943052
> 
> 赞同：1
> 
> 时间：2013-02-18T18:34:30.130
> 
> 标签：iphone, ios, xcode, uiwebview

我正在开发基于 UIWebView 的 iPhone 应用程序（讨厌或喜欢它）。这个页面有一个固定的宽度和几乎静态的比例。我在这个页面上有一些输入文本字段，但是每当用户关注其中一个时，iPhone 就会放大一点。此外，我可以在 web 视图上进行捏合缩放。

我怎样才能避免这种情况？我有缩放：缩放页面以适合和查看模式：缩放以填充。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T18:49:49.243

您可以尝试在元标记中禁用它，如下所示：

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-11T10:03:05.897

它对我有用

webViewHome.multipleTouchEnabled = 否；

并在情节提要中将 wkwebview 属性集“Aspect Fit”从“Scales to fill”更改为“Aspect Fit”。

[![故事板](../Images/9811c4f4ca80a0b544a3ac9ff163c07d.png)](https://i.stack.imgur.com/SJ5Z7.png)

# ruby-on-rails - 如何在rails中的浏览器上显示正确的错误消息

> ID：14943053
> 
> 赞同：-2
> 
> 时间：2013-02-18T18:34:43.740
> 
> 标签：ruby-on-rails

我需要在浏览器上显示正确的错误消息，以便我可以对错误进行分析。请提供任何宝石或插件的名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T18:36:06.203

[http://railscasts.com/episodes/402-better-errors-railspanel?view=asciicast](http://railscasts.com/episodes/402-better-errors-railspanel?view=asciicast)

```
group :development do
    gem 'better_errors'
    gem 'binding_of_caller'
    gem 'meta_request'
end 
```

# java - 在 JUnit 框架中测试随机性

> ID：14943054
> 
> 赞同：0
> 
> 时间：2013-02-18T18:34:45.207
> 
> 标签：java, junit

我正在努力在非常严格的测试驱动开发 JUnit 氛围中训练自己。我试图找出在这样的气氛中测试随机性的最佳方法是什么。例如，我正在实现一个随机队列数组，该数组对队列和项目进行排队，并立即用数组上索引为 0-(n-1) 的项目切换该项目（从而模拟随机项目从队列中出来时它是出队）。这是我的入队方法的一些示例代码：

```
 int randIndex = StdRandom.uniform(size); // generate random index to swap with last item
        Item tmp = randArray[randIndex];
        randArray[size] = item;
        randArray[randIndex] = randArray[size]; //perform swap to create a random item for dequeue
        randArray[size] = tmp;
        size++; 
```

我想运行一些测试以确保我的入队方法实际上是随机切换队列变量与数组中的其他索引。通常我只是在 Main() 方法中抛出一些代码，该方法迭代一堆 enqueue() 调用并打印结果，然后我会检查以确保它“感觉”是随机的。

但是，就像我说的，我想在一个非常严格的单元测试框架中做到这一点。似乎 JUnit 几乎完全使用断言语句，但我不确定我应该断言什么，除非我只是运行一些 Monte Carlo 类型的东西并检查某个 epsilon 的平均值，但这似乎有点用于测试这么简单的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T18:49:46.397

您可以将测试分成两部分。

1）您通过给定的伪随机数序列测试，您的排队按预期工作。为此定义任意固定数量的 int 值：例如“5,2,100,3”。然后用断言测试 enque、deque 是否提供了预期的元素。

2）测试`Random()`java类：你很可能应该省略那个测试，因为`Random()`它实现得很好。

否则对于 2) 你有它使用卡方随机数检验，并且该统计量在你所说的 soem epsilon 范围内。但这将是一个矫枉过正，所以坚持第 1 点）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T18:49:56.230

我不确定你真正的目标是什么，但我读它就像测试随机数生成器本身（因为你的切换是..非常直接的）。

如果你使用 java SecureRandom，你应该在熵方面做得很好，请参阅 [SecureRandom](http://docs.oracle.com/javase/6/docs/api/java/security/SecureRandom.html)。如果您对此表示怀疑，请使用一些熵检查器或仅使用来自互联网某些来源的真实随机序列，[例如此处](http://www.random.org/)

# java - JVM 中可以有多少个类文字实例？

> ID：14943067
> 
> 赞同：0
> 
> 时间：2013-02-18T18:35:36.520
> 
> 标签：java, reflection

我从未专门与`class literals`. 我认为它们主要用于反射 apis 。我想了解类文字可以有多少个实例？他们是`instance controlled`（例如单身人士？）

```
Class<String> stringClass = String.class; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T18:46:48.093

Class 对象（至少在理论上）是在加载类时创建的。每班只有一个。但是，将其称为单例是不正确的，因为有多个 Class 对象，每个对象对应一个给定的类，就像您可以拥有多个具有不同值的 String 对象一样。

请注意，如果它们由不同的类加载器加载，则可以有两个名为“abc”的不同类对象。这将是两个不同的类（甚至可能不相似）和两个不同的 Class 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T18:47:13.893

类由类加载器作为堆中的对象加载。

所以每个类加载器只存在一个**类文字实例。**

但是，您可以在代码中创建尽可能多的类型类实例。

# asp.net - 何时选中复选框 其他复选框 同一行 取消选中

> ID：14943069
> 
> 赞同：1
> 
> 时间：2013-02-18T18:35:38.650
> 
> 标签：asp.net, html, checkbox

我必须列出检查

```
 <input type="checkbox" value="18" name="yes" id="yes1">
 <input type="checkbox" value="13" name="yes" id="yes2">
 <input type="checkbox" value="12" name="yes" id="yes3"> 
```

和其他列表复选框

```
<input type="checkbox" value="14" name="no" id="no2">
<input type="checkbox" value="18" name="no" id="no2">
<input type="checkbox" value="12" name="yo" id="no2"> 
```

但是当我选中复选框 id yes1 时我不知道要工作，id no1 未选中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T18:50:13.547

假设您更改了您的复选框，`name="no"`因为您有重复的 ID，并且其中一个`name="yo"`是错误的，如下所示：

```
<input type="checkbox" value="18" name="yes" id="yes1">
<input type="checkbox" value="13" name="yes" id="yes2">
<input type="checkbox" value="12" name="yes" id="yes3">

<input type="checkbox" value="14" name="no" id="no1">
<input type="checkbox" value="18" name="no" id="no2">
<input type="checkbox" value="12" name="yo" id="no3"> 
```

你可以用 jQuery 做这样的事情：

```
$("input[name=yes]").click(function() {
    var current = this.id.replace("yes","");
    if($(this).is(':checked')) {
        $("#no" + current).prop('checked', false);
    }
});

$("input[name=no]").click(function() {
    var current = this.id.replace("no","");
    if($(this).is(':checked')) {
        $("#yes" + current).prop('checked', false);
    }
}); 
```

# javascript - 按名称访问 JavaScript 子属性

> ID：14943070
> 
> 赞同：1
> 
> 时间：2013-02-18T18:35:44.397
> 
> 标签：javascript

我编写了以下 JavaScript 函数（较大“类”的一部分）以帮助确保使用该对象的任何人都将属性值存储在“值”属性中。

```
function _updateAttributes(attribute, value) {
    _attributes[attribute] = { values: { value: value }};
} 
```

它适用于平面结构，但当我开始尝试将它用于子属性时就崩溃了。

运行以下代码后：

```
myEntity.updateAttribute('name', 'Frankenstein');
myEntity.updateAttribute('name.source', 'John Doe'); 
```

我想要以下结构：

```
{
    "attributes": {
        "name": {
            "values": {
                "value": "Frankenstein"
            },
            "source": {
                "values": {
                    "value": "JohnDoe"
                }
            }
        }
    }
} 
```

相反，它是这样出来的：

```
{
    "attributes": {
        "name": {
            "values": {
                "value": "Frankenstein"
            }
        },
        "name.source": {
            "values": {
                "value": "JohnDoe"
            }
        }
    }
} 
```

是否有任何干净的方法来编写这个 JavaScript，或者我会面临拆分字符串并手动构建结构的问题？

**注意：**我意识到即使是首选结构也有点奇怪，但是我映射到的 Java 对象需要这种格式，所以我在这里没有任何选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T18:40:04.393

您必须解析字符串（`parse`有点强，只是一个`split('.')`带循环的字符串）。

但坦率地说，更清洁的方法就是：

```
myEntity.name = {values: 'Frankenstein'};
myEntity.name.source = {values: 'John Doe'}; 
```

# alloy - 合金教程，断开的文件系统？

> ID：14943072
> 
> 赞同：2
> 
> 时间：2013-02-18T18:35:54.503
> 
> 标签：alloy

我正在学习 Alloy 教程，并且刚刚开始[这一章](http://alloy.mit.edu/alloy/tutorials/online/frame-FS-6.html)。我的问题是本章开头的那句话：

> 现在我们已经建立了一个模型来确保我们的文件系统的结构正确性......

当我运行到目前为止构建的模型时，我仍然会发现文件系统断开连接，这似乎与这句话相矛盾。

![断开连接的文件系统](../Images/928858bd180c297c07576aefae4fb5fe.png)

这是Alloy 4.2，几天前从网站下载的构建日期2012-9-25。我做错了什么还是故意的？据我了解，我在模型中看不到任何可以防止这种断开连接的东西。但是我的理解还是有点模糊。

相关模型复制如下：

```
 `// File system objects
abstract sig FSObject { }
sig File, Dir extends FSObject { }

// A File System
sig FileSystem {
  live: set FSObject,
  root: Dir & live,
  parent: (live - root) ->one (Dir & live),
  contents: Dir -> FSObject
}{
  // live objects are reachable from the root
  live in root.*contents
  // parent is the inverse of contents
  parent = ~contents
}` 
```

 `我可以看到`live: set FSObject`可能需要连接的线路，但这不是我目前对该线路语义的理解。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T20:09:26.247

我认为本教程关于结构正确性的评论意味着该模型确保了以下属性：

*   文件系统根没有父级。
*   每个活动对象都可以通过内容关系从根访问。
*   父关系是内容关系的逆。
*   从根可到达的每个对象都是活动的。
*   内容和父关系仅适用于活动对象。（不活动的对象没有父对象，也没有内容。）

在您显示的实例中，请注意 Dir0 不是实时的，没有内容，也没有父级。所以我认为该实例遵循我列出的所有约束，并且文件系统（植根于 Dir3 的树）实际上是连接的。Dir0 不是反例，也不是文件系统的结构问题；它只是一个文件系统对象，无法从任何文件系统根目录访问，因此不存在。真的？

请注意，虽然约束确实确保每个 FileSystem 是一个连接图（实际上是一棵树），但它们并不能确保文件系统相互连接（也不能确保它们是不相交的）。如果您将运行命令更改为请求多个文件系统，这应该更容易看到。

您可能会在 IETF 会议上就这些约束是否构成一般文件系统的“结构正确性”进行良好的酒吧讨论，但我认为在上下文中，该短语只是为了指向第一课中所做的事情和文件系统示例之二。`

# html - HTML5 输入颜色的默认颜色

> ID：14943074
> 
> 赞同：61
> 
> 时间：2013-02-18T18:35:55.450
> 
> 标签：html, input, colors

具有`input type="color"`默认颜色，即黑色：`#000000`。

即使我给它一个空值...

`<input type="color" value="" />`

...默认颜色始终为黑色。

我希望用户可以选择一种颜色，但如果他没有，这意味着没有选择颜色，甚至没有选择白色`#FFFFFF`。

有没有办法强制`input type="color"`默认不使用黑色？

我可以使用某种“侦听器”来检查用户是否第一次更改颜色，如果不是，则忽略该值，但我想避免使用 Javascript。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-09-26T07:18:19.093

在使用 hexcode 的`value`属性时`<input type="color">`，我注意到的一件事是它必须是六位数，如果你使用白色`#fff`，它就不起作用。它必须是`#ffffff`。

通过 javascript 设置时也会发生同样的事情。 `document.querySelector('input[type="color"]').value = '#fff'`不起作用。颜色保持黑色。你必须使用`document.querySelector('input[type="color"]').value = '#ffffff'`它才能工作。

有什么要小心的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-18T18:40:52.590

使用价值：

```
<input type="color" value="#ff00ff" /> 
```

如果您想知道输入是否保持不变，您可以执行以下操作（使用 jQuery）：

```
$(function(){
    $('input').change(function(){
       $(this).addClass('changed');
    })
}) 
```

[http://jsfiddle.net/j3hZB/](http://jsfiddle.net/j3hZB/)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-09-23T16:31:35.687

**编辑：**现在，我已经正确理解了你的问题，我已经更新了我的答案。

尽管[W3C 规范](http://www.w3.org/TR/html-markup/input.color.html)定义`value`属性具有表示颜色的字符串，但它没有定义默认颜色。所以我认为默认颜色的实现由浏览器自行决定。

但是，[WhatWG 规范](http://www.whatwg.org/specs/web-apps/current-work/multipage/states-of-the-type-attribute.html#color-state-(type=color))通过此说明回答了您的问题，

> **注意：**当输入类型元素处于颜色状态时，总是有一个颜色被选中，没有办法将值设置为空字符串。

此外，根据您的期望，CSS 语言从未`NULL`为任何元素定义属性，这使得 不可能将`input type='color'`其`NULL`作为默认值。

**解决方法：**

Shadow DOM API 中提供了解决方法。

![在此处输入图像描述](../Images/664c835faebd3f855dc8cf1bc1252d13.png)

使用 Chrome 开发者工具，我发现我们可以给伪元素背景属性一个`transparent`颜色——`::-webkit-color-swatch`

```
input[type=color]::-webkit-color-swatch 
{ 
    background-color: transparent !important; 
} 
```

对于上面的 CSS，你的 HTML 应该是这样的 - `<input type="color">`。现在您不需要任何类型的侦听器来判断用户是否更改了默认颜色。您可以简单地将`transparent`颜色视为 NULL 颜色，您可以根据它来决定值是否已更改！

我相信你会从 Firefox 的 Shadow DOM 中找到类似的信息来设置背景的透明值。IE 对我们来说仍然是一种痛苦。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-11-30T15:52:40.897

这是我的解决方案，将输入类型从文本切换为颜色：

```
$(document).on('click', '.dc-color-input-switcher', function() {
  var dcInputColor = $(this).parent().parent().prev();
  if (dcInputColor.attr('type') == 'text') {
    dcInputColor.attr('type', 'color');
  } else {
    dcInputColor.attr('type', 'text');
  }
});

$(document).on('click', '.dc-color-input-clearer', function() {
  var dcInputColor2 = $(this).parent().parent().next();
  if (dcInputColor2.attr('type') == 'color') {
    dcInputColor2.attr('type', 'text');
  }
  dcInputColor2.val('');
});
```

```
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<link href="http://netdna.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

<div class="input-group">
  <div class="input-group-btn">
    <div class="btn-group">
      <span title="Empty" class="btn btn-danger dc-color-input-clearer" data-original-title="Empty Field"><i class="fa fa-times"></i></span>
    </div>
  </div>
  <input name="product_tabs[1][0][bg_color]" value="" placeholder="Background Color" class="form-control pre-input-color" type="text">
  <div class="input-group-btn">
    <div class="btn-group">
      <span title="Toggle color picker" class="btn btn-primary dc-color-input-switcher" data-original-title="Switch color picker"><i class="fa fa-paint-brush"></i></span>
    </div>
  </div>
</div>
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-05-14T09:34:42.407

答案可能是双重的。

1.  出于显示目的，是的，您只需将输入的值设置为您想要的颜色即可设置默认颜色。您可以在此页面上的答案中看到各种各样的问题。
2.  从技术上讲，没有。无法通过 POST 将空值作为颜色发送。POSTed 值将始终默认为`#000000`您设置的默认颜色（如 1\. 中所述）。

* * *

*在对此进行了一些思考之后，也许对此的实际解决方案可能是选择`#010101`作为参考`null`或`false`或其他。这为一些 jQuery（或 javascript）留出了空间，以减少可以设置此值的可能性。*

```
<input type="color" name="myColor" required="" /> 
```

*例如，一方面`required`可以`#010101`在 event 处为设置为的颜色输入赋予值`load`。可以肯定的是，防止用户选择颜色#010101。*

```
(function($){

  "use strict";

  // Set all required color input values to #010101.
  $(window).on("load", function() {
    $("[type='color'][required]").val() == "#010101";
  });

  $("[type='color'][required]").on("change", function() {

    // Prevent users selecting the color #010101.
    if($(this).val() == "#010101") {
      $(this).val() == "#000000";
    }
  });

})(jQuery) 
```

*在服务器端验证时，`#010101`被视为`empty`（或`false`等）。*

```
<?php
$color = htmlspecialchars($_POST['myColor']);
if($color == "#010101") {
  // Do variable empty routine
} else {
  // Do variable has value routine
}
?> 
```

*现在您可以很确定地知道用户是否设置了该值，只要 UA 具有 javascript 功能。

缺点是加载时颜色的设置。以这种方式无法重新加载预设值。也许这可以通过使用 sessionStorage 来改善。*

*但真正的重点是：我为什么要这样做？我认为这不是必需的，默认值`#000000`是与输入类型正常工作的**单一偏差。**除了`range`输入类型，它也有一个可选的默认值，这个颜色输入类型是非常不同的。*

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-12-29T04:34:55.457

不知道这个问题是否仅在 chrome 上可用，但我刚刚找到了 chrome 的快速修复。我们需要先将输入值设置为#FFFFFF，然后将其设置为默认值，默认颜色将出现而不是黑色

```
var element = document.querySelector('input[type="color"]');
element.value = '#FFFFFF'; //remember the hex value must has 7 characters
element.value = element.defaultValue; 
```

希望它可以帮助某人:)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-02-22T16:12:26.683

我已经为自己实施了这种解决方案。它显示漂亮的“透明”按钮。单击它会触发正常的隐藏输入颜色。拾取颜色时，透明按钮将隐藏，输入颜色将显示。

干杯。

```
function clickInputColor( button )
{
	$( button ).next().click();
}

function inputColorClicked( input )
{
	$( input ).show();
	$( input ).prev().hide();
}
```

```
.inputEmptyColorButton {
	background:url("http://vickcreator.com/panel/images/transparent.png") center repeat;
	width: 50px;
	height: 1.5em;
	vertical-align: bottom;
	border: 1px solid #666;
	border-radius: 3px;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<button onclick="clickInputColor( this );" class="inputEmptyColorButton"></button>
					<input onchange="inputColorClicked( this );" style="display: none;" type="color" value="" />
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-02-11T20:20:24.507

这适用于设置与黑色不同的默认颜色：

```
 <input
        type="color"
        value="#123456"
        onChange={(e) => handleBGColor(e)}
    ></input> 
```

但是，当我使用诸如“#000”或“#FFF”之类的速记 3-hex 值而不是上面的 6 时，它不起作用。

# google-maps-api-3 - 从没有数字基础的融合表中着色多边形

> ID：14943078
> 
> 赞同：0
> 
> 时间：2013-02-18T18:36:07.683
> 
> 标签：google-maps-api-3, google-fusion-tables

我正在将使用 API 的 v2 和托管 KML 文件的 Google 地图转换为 API 的融合表和 v3。

我正在寻找的最终结果（v2 地图）在这里： http: [//www.willoughby-ind.com/findarep.aspx](http://www.willoughby-ind.com/findarep.aspx)

我正在处理的 v3 地图在这里： http: [//www.willoughby-ind.com/Management/FindaRepGoogleMapsv3.aspx](http://www.willoughby-ind.com/Management/FindaRepGoogleMapsv3.aspx)

我已经能够使用这段代码添加美国和加拿大的所有州边界：

```
layerl0 = new google.maps.FusionTablesLayer(
        query: {
            select: "kml_4326",
            from: "420419",
            where: "name_0 IN ('United States of America','Canada')"
        },
        map: map,
        styleId: 8,
        templateId: 1
    }); 
```

它按照我的意愿突出显示州和省，但我需要用不同的颜色（或至少 4-5 种颜色）对每个区域进行着色。我没有这个阴影的数字基础，只想将每个区域与其周围的区域分开，而不是用默认的红色为整个地图着色。

我查看了 Buckets 和 Gradients 的一些样式示例，但它们都基于表中的数值，而我没有。我该怎么做呢？

当点击一个区域时，我还需要产生一个回调事件，但我想这会相当简单。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T20:48:49.303

您可以创建一个带有州名称 (name_1) 的表来为映射着色并将其与原始表（在 name_1 上）合并：

我从您的旧地图中取出颜色，并将它们合并到此表中（缺少一些）：

[带颜色的合并表](https://www.google.com/fusiontables/DataSource?docid=1drRN_EVfteimKhXcLX9kj9vxxU9sSJoRsumrTMw#map%3aid=3)

我用于“颜色”表的 CSV：

```
name_1, colour
Alaska, ff0000
Alabama, ff0000
Arkansas, ff0000
Arizona, ff0000
California, 880000
Colorado, 880000
Connecticut, 880000
Delaware, 880000
Florida, 8800ff
Georgia, 880000
Hawaii, 00ff00
Iowa, 00ff00
Idaho, 00ff00
Illinois, 00ffff
Indiana, 00ff00
Kansas, 008800
Kentucky, 008800
Louisiana, 008800
Massachusetts, 0000ff
Maryland, 0000ff
Maine, 0000ff
Michigan, FF0000
Minnesota, 0000ff
Missouri, 000088
Mississippi, 000088
Montana, 000088
North Carolina, ffff00
North Dakota, ffff00
Nebraska, ffff00
New Hampshire, 00ffff
New Jersey, ffff00
New Mexico, 00ffff
Nevada, 00ffff
New York, 00ffff
Ohio, ff8800
Oklahoma, ff00ff
Oregon, ff00ff
Pennsylvania, ff00ff
Rhode Island, ffff00
South Carolina, ff8800
South Dakota, ff8800
Tennessee, ff8800
Texas, 00ff88
Utah, 00ff88
Virginia, 00ff88
Vermont, 88ff00
Washington, 88ff00
Wisconsin, 0088ff
West Virginia, 0088ff
Wyoming, ff0088
Alberta, ff0000
Saskatchewan, 880000
Manitoba, 00ff00
Prince Edward Island, 0000ff
Nova Scotia, 000088
Newfoundland and Labrador,  ff00ff
Ontario, ff00ff
New Brunswick, ffff00
British Columbia, 00ff88
Quebec, 88ff00
Puerto Rico, 000000
Yukon, ff0088
Northwest Territories, ff8800 
```

# session - LoadRunner 中的紧密连接

> ID：14943080
> 
> 赞同：0
> 
> 时间：2013-02-18T18:36:12.550
> 
> 标签：session, loadrunner

实际挑战：我有一个 LR 脚本，它针对正在模拟的应用程序运行，并且没有注销按钮（还）。测试运行良好，稳定的响应时间大约 10 分钟，但在那之后响应时间达到峰值，服务器进入 99% 的内存使用，事务开始失败。我怀疑这是由于脚本在每次运行后都不会终止 vuser，并且它会针对未终止的服务器建立大量正在运行的会话。但我可能错了。Anyays 我想在完成业务流程后以编程方式关闭每次运行。我在某处有红色 web_set_sockets_option ("SHUTDOWN_MODE", "ABRUPT") 可以用于此，但我想确定这个函数确实做了我想要的以及 'ABRUPT' 做什么 方法？有没有更好的方法来结束会话？在录制期间单击关闭浏览器不会导致脚本中捕获任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T20:35:33.840

这是会话老化的服务器问题。您网站的服务器管理员可以调整在给定会话中未发生任何活动的超时值。默认情况下，大多数地方都将此设置为 30 分钟。将其修剪为您需要的，而不是采用服务器上的默认值。

此外，如果资源在服务器端不断积累但从未释放，您可能会遇到泄漏情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T20:45:51.323

根据您的问题，我假设您使用的是 WEB/HTML 协议。我同意核心问题是您的应用程序的会话应该更优雅地过期并且可能更快。但是，为了在测试时超越这一点，您可以试试这个。这不是保证，但在过去处理类似情况时，它有时对我有用。尝试更改脚本的运行时设置：
**运行时设置 > 浏览器 > 浏览器仿真**

确保选中“在每次迭代中模拟新用户”复选框。您也可以尝试在此处使用其他设置，例如每次迭代清除缓存。这可能会导致每次迭代都与网页建立新的连接设置，具体取决于服务器的会话设置。同样，这不是 100%，但它不时对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-13T12:41:26.493

试试这个：

```
web_set_sockets_option("CLOSE_KEEPALIVE_CONNECTIONS", "1"); 
```

# php - jquery AJAX 请求不更新 php 变量

> ID：14943082
> 
> 赞同：0
> 
> 时间：2013-02-18T18:36:19.760
> 
> 标签：php, jquery

我有一个漫画网站，[Hitting Trees with Sticks](http://HittingTreesWithSticks.com)，它允许用户通过按下一个或简单地按箭头键来获取下一个、上一个或随机漫画 ID。

由于图像存储在数据库中，我在客户端循环浏览这些图像的唯一方法是将它们存储在 javascript 数组中，并将 php $imgid 作为 imgIndex 存储在 javascript 变量中。然后，当他们按下键盘键时，我可以在客户端更改该索引。

当用户按下一个键时，我使用 pushstate 来更改 URL 中的 imgid，但这实际上并没有更新服务器端的 $imgid。我需要更新服务器端 $imgid 因为我将一个喜欢功能与每个特定 ID 相关联......但是目前，当我按下一个键来获取一个新的 ID 时，与一个 img ID 关联的总喜欢不会刷新/更新图片。

我的解决方案是不仅使用 PushState 更新 URL，而且当按下某个键时，我使用 $.post，并将更新后的 imgIndex 发送到 php 脚本。

**以下是片段：**

**KeyInput.php**：这是客户端javascript：

```
<script type="text/javascript">
  var imgArray = [<?php echo implode(',', getImages($site)) ?>];
  var imgIndex = <?php echo $imgid ?>;

$(document).ready(function() {      
    var img = document.getElementById("showimg");
    img.src = imgArray[<?php echo $imgid ?>];

    $(document).keydown(function (e) {
        var key = e.which;
        var rightarrow = 39;
        var leftarrow = 37;
        var random = 82;

        if (key == rightarrow) 
        {
            imgIndex++;
            if (imgIndex > imgArray.length-1) 
            {
                imgIndex = 0;
            }
            img.src = imgArray[imgIndex];
            window.history.pushState(null, null, '.?action=viewimage&site=comics&id=' + imgIndex);

            $.post('./templates/viewimage.php', { _newImgId : imgIndex },
                function(data) {
                    //alert(data);
                }
            );

        } 
```

**viewimage.php**这是最初获取 $imgid 的文件，然后它调用 keyInput.php 脚本来接受键输入......这会改变 javascript imgid。出于测试目的，我尝试使用 $.post 和 $.get AJAX 发送更新后的 imgid，如下所示，即`$newID = $_POST['_newImgId];`. 当我回显 $newID 时，它说它没有定义。

```
<?php 
/*
Controls display of comic on the viewComic template
*/
include 'include/header.php';

global $site, $imgid;

$cat = (isset($_GET['cat']) ? ($_GET['cat']) : null); 
$site = (isset($_GET['site']) ? ($_GET['site']) : null);
$title = (isset($_GET['title']) ? ($_GET['title']) : null);
$imgid = $_GET['id']; 

include './scripts/keyinput.php'; 

$newID = $_POST['_newImgId];
echo $newID; //THIS SHOULD ECHO THE UPDATED ID, but it says it is not defined 
```

有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T19:19:42.130

我认为您的代码的问题在于您在页面加载后使用 Ajax 代码，同时尝试更改`$_get`初始页面加载的变量。AFAIK，您需要更新“Facebook 赞”按钮的整个页面以更改其 ID。另一种选择是使用 iframe。据我所知，按钮的`data-href`属性总是导致`http://hittingtreeswithsticks.com/`- 并且只能通过使用不同的属性重新加载页面来更改。

如果您不介意为每张图片加载一个页面，这可以为您解决：

```
<!-- This is the Like button code -->
<div [...] data-href="http://www.hittingtreeswithsticks.com/<?php echo $_get['id']; ?>"></div> 
```

这个页面的地址是：`http://www.hittingtreeswithsticks.com/?id=PAGE_ID`

**编辑**

使用 AJAX，您需要从后端调用数据以在客户端使用，而无需重新加载整个页面。然后可以使用此数据来更改客户端中的代码。在您的代码中，数据被发送回给您，但您根本没有使用它，这就是它不起作用的原因：

```
$.get('./templates/viewimage.php', { _newImgId : imgIndex },
    function(data) {
        // This is where you should make use of the data received 
    }
); 
```

**编辑#2**

如果您想动态更改 Like 按钮的 url，请查看[此](https://stackoverflow.com/questions/2764129/update-fblike-url-dynamically-using-javascript)答案。

这是一个工作示例的小提琴：http: [//jsfiddle.net/TkFma/4/](http://jsfiddle.net/TkFma/4/)

# eclipse - 致命错误：opencv2/core/core_c.h：没有这样的文件或目录

> ID：14943084
> 
> 赞同：0
> 
> 时间：2013-02-18T18:36:25.657
> 
> 标签：eclipse, opencv

我正在尝试在 windows8 上的 eclipse 中设置 OpenCv2.4.0 。我收到了致命错误

> 信息：内部生成器用于构建 g++ "-IC:\Dev\opencv\build\include\opencv" "-IC:\Dev\opencv\build\include\opencv2\core" -O0 -g3 -Wall -c - fmessage-length=0 -o "src\DisplayImage.o" "..\src\DisplayImage.cpp" 在来自 ..\src\DisplayImage.cpp:7:0 的文件中：C:\Dev\opencv\build\ include\opencv/cv.h:63:33：致命错误：opencv2/core/core_c.h：没有此类文件或目录编译终止。

尽管我检查了目录`core_c.h`下是否存在`opencv2/core/`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T03:22:32.140

您的包含路径错误。要包含 opencv2/core/core_c.h 你需要在你的路径上有 C:\Dev\opencv\build\include\ 而你目前没有。

# ruby - 如何将 JSON 值传递给 Struct Ruby 对象？

> ID：14943085
> 
> 赞同：3
> 
> 时间：2013-02-18T18:36:26.513
> 
> 标签：ruby

给定一个 JSON 对象

```
{"a": 1, "b":2} 
```

以及从结构派生的值对象：

```
class A < Stuct.new(:a, :b)
end 
```

我将如何创建一个具有 JSON 值的 A 实例？

我在尝试：

```
 a = A.new(JSON.parse({a:1,b:2}.to_json).values)
 => #<struct A a=[1, 2], b=nil> 
```

但我希望 a->1 和 b->2

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T18:42:08.510

尝试使用：

```
a = A.new(*JSON[json].values)
a.class # => A < #<Class:0x00000102955828> 
```

问题是`values`返回一个数组，但您需要数组的各个元素。使用`*`“splats”数组回到它的组件中，当你将值传递给`new`.

* * *

编辑：

> 如果 JSON 和 Struct 的顺序不匹配，这将失败！

这会强制值的顺序。

```
a = A.new(*JSON[json].values_at('a', 'b'))
{
    :a => 1,
    :b => 2
}
a.class # => A < #<Class:0x00000102955828> 
```

JSON 保留哈希插入顺序，Ruby 也是如此，因此，由 Ruby 渲染和解析的 JSON 将是正确的。由不保留顺序的东西呈现的 JSON 可能是一个问题，但可以`values_at`解决问题。

请注意，JSON 将符号转换为字符串，因此传递给的键`values_at`必须是字符串，而不是符号。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T18:49:18.123

如果它不必是预定义的结构，这将起作用

```
a = Struct.new(*json.keys).new(*json.values) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T18:44:28.837

您可以使用`splat`运算符将​​数组值作为参数传递给新函数。

```
a = A.new(*{a:1,b:2}.values) 
```

# c# - XamlReader 官方代码片段为我抛出异常

> ID：14943089
> 
> 赞同：0
> 
> 时间：2013-02-18T18:36:40.213
> 
> 标签：c#, xaml, windows-8, xamlreader

我正在构建一个 Windows 8 应用程序，并希望从 Web 服务中解析一些 XAML 以放入 RichTextBlock。我正在尝试使用 XamlReader 来使用它，但是[Microsoft 文档](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.markup.xamlreader.load.aspx#code-snippet-2)中的这段代码在我的环境中引发了异常。

```
string xaml = "<Ellipse Name=\"EllipseAdded\" Width=\"300.5\" Height=\"200\" Fill=\"Red\" \"http://schemas.microsoft.com/winfx/2006/xaml/presentation\"/>";
object ellipse = Windows.UI.Xaml.Markup.XamlReader.Load(xaml); 
```

执行第二行时，出现异常：

```
An unhandled exception of type 'Windows.UI.Xaml.Markup.XamlParseException' occurred in mscorlib.dll

WinRT information: illegal qualified name character [Line: 1 Position: 68]

Additional information: Unspecified error 
```

我的 VS 版本是 Microsoft Visual C# 2012（Microsoft Visual Studio Premium 2012 版本 11.0.51106.01，Microsoft .NET Framework 版本 4.5.50709）。文档说 Windows 8 应该支持加载方法。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T18:40:47.037

看起来他们的 XAML 中有一个错字 - 他们在`xmlns=`命名空间 URI 之前缺少一个：

```
string xaml = "<Ellipse"
   + " Name=\"EllipseAdded\" Width=\"300.5\" Height=\"200\" Fill=\"Red\""
   + " xmlns=\"http://schemas.microsoft.com/winfx/2006/xaml/presentation\"/>"; 
```

*（为了便于阅读，换行。）*

# javascript - 单击链接时如何在同一页面上显示另一个 HTML 文件的内容？

> ID：14943091
> 
> 赞同：1
> 
> 时间：2013-02-18T18:36:45.030
> 
> 标签：javascript, html, anchor, href

当我的页面左侧有几个链接时，如何在单击链接时在同一页面上显示另一个 HTML 文件的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T18:56:33.247

简单的解决方案：`iframe`s，更好但稍微难一点的解决方案：`AJAX`.

*   iFrame
    要创建 iframe，请将其放入源代码中：`<iframe src="the/URL/of/a/page.html"></iframe>`. 这将`the/URL/of/a/page.html`在 iframe 中显示文件。iframe 可以使用 CSS 设置样式（仅供参考）。然后给你所有的`<a>`sa 类，我拿了`link`我的例子 JavaScript，和 iframe 一个 ID（我拿了`iframe`）。（没有 JS AFAIK 就无法做到这一点，否则您将不得不使用`<frameset>`已弃用的 a 。）示例 JS：

    ```
    var links = document.getElementsByClassName("link"); // Get all the elements with the class link

    for (var i; i < links.length; i++) { // Loop over all the links
        links[i].onclick = function(e) { // Tell them what to do when they're clicked
            e.preventDefault(); // Prevent the browser from navigating to the address of the links href
            document.getElementById("iframe").src = links[i].href; // Set the iframe's src to the href of the a.
        }
    } 
    ```

*   AJAX
    这有点难，使用像[jQuery](http://jquery.com)这样的库可以极大地简化这项任务。在我的示例中，我使用 jQuery，否则将需要更多的代码行。
    你需要一个`div`来显示加载的页面，在你的页面上放一个并给它一个ID（我`resultbox`在我的例子中使用过）。请注意，AJAX 通常只适用于来自同一域的文件，这与`iframe`解决方案相反（尽管我相信我在 SO 上看到了一些变通方法/hacks）。这个例子：

    ```
    $(".link").click(function(e) { // If an element with the class 'link' get's clicked...
        e.preventDefault();
        $("#resultbox").load("the/URL/of/a/page.html"); // ... load the contents of the file at the/URL/of/a/page.html into the element with the ID 'resultbox'
    }); 
    ```

注意：我没有测试任何这些。

# codeigniter - CodeIgniter：不允许的关键字符

> ID：14943092
> 
> 赞同：0
> 
> 时间：2013-02-18T18:36:47.213
> 
> 标签：codeigniter, csrf

我和下面的人有同样的问题，但为他们提供的解决方案对我不起作用。

[CodeIgniter - 不允许的关键字符](https://stackoverflow.com/questions/5423212/codeigniter-disallowed-key-characters)

[CodeIgniter 不允许的键字符](https://stackoverflow.com/questions/4197976/codeigniter-disallowed-key-characters)

[Codeigniter (v2) 中不允许的键字符错误消息](https://stackoverflow.com/questions/9297020/disallowed-key-characters-error-message-in-codeigniter-v2)

我在提交表单时收到“不允许的关键字符”。

我启用了 CSRF 保护，并且我在表单字段名称中使用了数组（即 search[] 作为名称，因为有多个选择下拉选项）。我有一种感觉是表单名称中的“[]”困扰了这个表单。

我已经遵循了我在上面的帖子中看到的所有建议。

1.  我暂时禁用了 CSRF，
2.  我暂时禁用了 XSS，
3.  我编辑了 $config['permitted_uri_chars'] 和
4.  我编辑了生成此消息的 Input.php。

有人对在表单提交时可能导致此问题的原因有任何其他想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-05-23T19:18:09.333

就像我[在这里](https://stackoverflow.com/a/18216894/551878)的回答一样——您只需要更新 MY_Input->_clean_input_keys() 中的正则表达式以允许更多字符（例如转义 JSON，或转义 HTML/XML）

**只允许“英语”：** `!preg_match("/^[a-z0-9\:\;\.\,\?\!\@\#\$%\^\*\"\~\'+=\\\ &_\/\.\[\]-\}\{]+$/iu", $str)`

**允许汉字：** `!preg_match("/^[a-z0-9\x{4e00}-\x{9fa5}\:\;\.\,\?\!\@\#\$%\^\*\"\~\'+=\\\ &_\/\.\[\]-\}\{]+$/iu", $str)`

我的完整工作功能如下所示：

```
 public function _clean_input_keys($str) {
    // NOTE: \x{4e00}-\x{9fa5} = allow chinese characters
    // NOTE: 'i' — case insensitive
    // NOTE: 'u' — UTF-8 mode
    if (!preg_match("/^[a-z0-9\x{4e00}-\x{9fa5}\:\;\.\,\?\!\@\#\$%\^\*\"\~\'+=\\\ &_\/\.\[\]-\}\{]+$/iu", $str)) {
      /**
      * Check for Development enviroment - Non-descriptive
      * error so show me the string that caused the problem
      */
      if (is_env_dev()) {
        var_dump($str);
      }

      exit('Disallowed Key Characters.');
    }

    // Clean UTF-8 if supported
    if (UTF8_ENABLED === TRUE) {
      return $this->uni->clean_string($str);
    }

    return $str;
  } 
```

**my_helper.php**

```
if (!function_exists('is_env_dev')) {
  function is_env_dev() {
    return (
        defined('ENVIRONMENT') && strtolower(ENVIRONMENT) == 'development' ||
        defined('ENVIRONMENT') && strtolower(ENVIRONMENT) == 'testing'
      );
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T18:44:31.723

谢谢，但我在下面的另一篇文章中发现了一条隐藏在下面的评论（在撰写本文时就在底部）：[CodeIgniter Disallowed Key Characters](https://stackoverflow.com/questions/4197976/codeigniter-disallowed-key-characters)

该评论建议我将 $str 添加到 exit() 评论中以进行测试。这表明我的表单字段中缺少双引号。这是一个非常复杂的动态构建的表格，有 300 行代码，很容易错过。

希望这个答案（以及激发它的评论）对其他人有所帮助。

验证输出的来源可以防止这样的问题:-)

问候

# r - 如何使用 geom_vline 和 geom_histogram r ggplot2 从填充比例图例中删除线

> ID：14943094
> 
> 赞同：4
> 
> 时间：2013-02-18T18:36:50.323
> 
> 标签：r, ggplot2, data-visualization, legend

基础知识：使用 R 统计软件、ggplot2、geom_vline 和 geom_histogram 可视化一些数据。问题在于图例键。

我正在尝试从一些随机模拟中绘制一对直方图，并在该图之上绘制几条线，代表确定性模拟的结果。我已经绘制了数据，但是直方图的图例键中间有一条不必要的黑线。你能帮我去掉那些黑线吗？一些重现问题的示例代码在这里：

```
df1 <- data.frame(cond = factor( rep(c("A","B"), each=200) ), 
                 rating = c(rnorm(200),rnorm(200, mean=.8)))

df2 <- data.frame(x=c(.5,1),cond=factor(c("A","B")))

ggplot(df1, aes(x=rating, fill=cond)) + 
  geom_histogram(binwidth=.5, position="dodge") +
  geom_vline(data=df2,aes(xintercept=x,linetype=factor(cond)),
             show_guide=TRUE) +
  labs(fill='Stochastic',linetype='Deterministic') 
```

![在此处输入图像描述](../Images/5b6047d02b0472c639fa6136eb3ca8da.png) 编辑：添加图像

干杯，瑞恩

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T18:49:10.843

一种解决方法是更改​​ 和 的`geom_histogram()`顺序`geom_vline()`。然后添加另一个`geom_vline()`没有`aes()`，只是给出`xintercept=`和`linetype=`。这不会删除线条，但会将它们隐藏在颜色图例条目下。

```
ggplot(data=df1, aes(x=rating, fill=cond)) + 
  geom_vline(data=df2,aes(xintercept=x,linetype=factor(cond)),
             show_guide=TRUE) +
  geom_histogram(binwidth=.5, position="dodge") +
  geom_vline(xintercep=df2$x,linetype=c(1,3))+
  labs(fill='Stochastic',linetype='Deterministic') 
```

![在此处输入图像描述](../Images/967d4d88840a1ff37f8f1f26d1544946.png)

# gridview - 将网格记录复制到另一个网格

> ID：14943112
> 
> 赞同：0
> 
> 时间：2013-02-18T18:37:59.163
> 
> 标签：gridview, extjs, jsonstore

我有一个使用带有 json 阅读器的 ajax 代理使用 jsonstore 的网格。

现在我正在尝试使用第一个网格上的 cellclick 复制选定的记录之一。假设我点击了 12341，我希望输出为 GRID 2

网格：1

```
ANO          ANAME
------------------
12345        XXXXXX
12341        XXXXXX (selected) 
```

网格：2

```
ANO          ANAME
------------------
12341        XXXXXX (selected) 
```

我尝试过使用 grid2.getStore().loadData(record) 但它没有反映，因为 Grid 2 也在使用 jsonStore。

感谢你的帮助 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T20:40:20.390

```
grid1.getStore().remove([record]);
grid2.getStore().add([record]); 
```

应该管用。

# android - 我如何制作这种布局（带有文本和图标的按钮）

> ID：14943117
> 
> 赞同：0
> 
> 时间：2013-02-18T18:38:10.963
> 
> 标签：android, android-layout, android-relativelayout, android-button

我试图实现这样的目标：

![在此处输入图像描述](../Images/7dca6d6261d990d2d3f4722215fe953f.png)

到目前为止，我的代码是：

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <Button
            android:id="@+id/btemail"
            android:layout_width="130dp"
            android:layout_height="130dp"
            android:layout_alignParentBottom="true"
            android:layout_alignParentLeft="true"
            android:layout_marginBottom="45dp"
            android:layout_marginLeft="34dp"
            android:drawableTop="@drawable/mail"
            android:text="E-mail"
            android:textAppearance="?android:attr/textAppearanceSmall" />

        <Button
            android:id="@+id/btcharts"
            android:layout_width="130dp"
            android:layout_height="130dp"
            android:layout_above="@+id/btemail"
            android:layout_alignLeft="@+id/btemail"
            android:background="@android:color/transparent"
            android:drawableTop="@drawable/chart"
            android:drawablePadding="-35dp"
            android:text="Charts"
            android:textAppearance="?android:attr/textAppearanceSmall"  />

        <Button
            android:id="@+id/bthistory"
            android:layout_width="130dp"
            android:layout_height="130dp"
            android:layout_alignBaseline="@+id/btemail"
            android:layout_alignBottom="@+id/btemail"
            android:layout_toRightOf="@+id/btemail"
            android:drawableTop="@drawable/list"
            android:text="History"
            android:textAppearance="?android:attr/textAppearanceSmall" />

        <Button
            android:id="@+id/btimport"
            android:layout_width="130dp"
            android:layout_height="130dp"
            android:layout_alignLeft="@+id/bthistory"
            android:layout_alignTop="@+id/btcharts"
            android:drawableTop="@drawable/add"
            android:text="New Measurement"
            android:textAppearance="?android:attr/textAppearanceSmall" />

    </RelativeLayout> 
```

我的看法是这样的：

![在此处输入图像描述](../Images/0a5794bfb9994b6cccbc1f07c12ba165.png)

这可以仅使用相对视图完成还是应该使用gridview？

如果我设置 android:layout_height="130dp" 但不同屏幕的图标大小不同“50x50 66x66 98x98 130x130”。不同屏幕会有问题吗？有没有办法动态实现它？

如何将图表按钮的图标中心垂直和水平放置????因为现在它有点向上中心..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T18:43:26.563

我建议您将**`RelativeLayout`**文本和背景以及按钮放入**`TableLayout`**或**`GridLayout`**（具有适当的边距）将嵌套在其父级 -**`RelativeLayout`**中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T19:13:30.383

dp 或 dip 度量是密度为 160 或 mdpi 的像素数，因此您将布局文件夹上的大小设置为 mdpi 中的像素，并按下表缩放其他大小：

*   xhdpi: 2.0
*   高清：1.5
*   mdpi：1.0（基线）
*   低密度脂蛋白：0.75

有关更多信息，请参阅[此](http://developer.android.com/training/multiscreen/screendensities.html)和[此](http://developer.android.com/design/style/devices-displays.html)

编辑：我相信做这个布局的最好方法是将所有按钮都放在一个线性布局中，并有一个相对布局作为根，并通过重力或类似的东西来对齐线性布局。

我的例子：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_centerHorizontal="true"
    android:layout_marginBottom="42dp"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <Button
            android:id="@+id/btcharts"
            android:layout_width="130dp"
            android:layout_height="130dp"
            android:drawablePadding="-35dp"
            android:drawableTop="@drawable/chart"
            android:text="Charts"
            android:textAppearance="?android:attr/textAppearanceSmall" />

        <Button
            android:id="@+id/btimport"
            android:layout_width="130dp"
            android:layout_height="130dp"
            android:drawableTop="@drawable/add"
            android:text="New Measurement"
            android:textAppearance="?android:attr/textAppearanceSmall" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="10dp" >

        <Button
            android:id="@+id/btemail"
            android:layout_width="130dp"
            android:layout_height="130dp"
            android:drawableTop="@drawable/mail"
            android:text="E-mail"
            android:textAppearance="?android:attr/textAppearanceSmall" />

        <Button
            android:id="@+id/bthistory"
            android:layout_width="130dp"
            android:layout_height="130dp"
            android:drawableTop="@drawable/list"
            android:text="History"
            android:textAppearance="?android:attr/textAppearanceSmall" />
    </LinearLayout>
</LinearLayout> 
```

我不知道它是否全部对齐，因为我在这里没有您的可绘制对象，但我认为您可以从中改进，您的“图表”按钮也不同，因为它具有透明背景。

# coffeescript - 将咖啡脚本与基本的 Yeoman 项目一起使用。

> ID：14943119
> 
> 赞同：7
> 
> 时间：2013-02-18T18:38:14.810
> 
> 标签：coffeescript, gruntjs, yeoman

我已经使用[Yeoman](http://yeoman.io/)`yo webapp`使用生成器命令制作了一个快速的项目框架。在生成的 Gruntfile 中，我看到它已设置为编译 CoffeeScript，但它似乎只是将已编译的文件粘贴在一个`tmp`文件夹中。

```
coffee: {
    dist: {
        files: {
           '.tmp/scripts/coffee.js': '<%= yeoman.app %>/scripts/*.coffee'
        }
    },
}, 
```

在开发过程中如何将这些包含在项目中。我没有使用RequireJS。

yeoman 文档不清楚如何使用咖啡脚本。他们只提到它会自动编译。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-08-11T23:09:18.823

使用 yeomen 1.0.0-rc1.4。我用：

```
$ yo angular --coffee 
```

生成的项目在 CoffeeScript 中有控制器和应用程序脚本。

grunt 配置文件保留在 js 中（这不是真正的问题）。

跑步

```
$ grunt test 
```

运行测试，一切似乎都很好。

```
$ grunt server 
```

也在做人们期望的事情（构建应用程序，测试它，启动服务器，在网络浏览器中打开应用程序并开始观察更改，所以如果我更改咖啡脚本文件，它会很快反映在网络浏览器中。

文档还指出，可以`yo`用来添加特定的部分，如

*   角度：控制器
*   角度：指令
*   角度：过滤器
*   角度：路线
*   角度：服务
*   角度：装饰器
*   角度：视图

每个都可以通过`--coffee`开关调用并在 CoffeeScript 中获取脚本，例如：

```
yo angular:controller user --coffee 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T19:39:27.923

我刚刚在 github repo 中发现了一个引用这个问题的问题。[https://github.com/yeoman/generator-webapp/issues/12](https://github.com/yeoman/generator-webapp/issues/12)

它提供了一个临时解决方案：[https ://github.com/yeoman/generator-webapp/issues/12#issuecomment-13731929](https://github.com/yeoman/generator-webapp/issues/12#issuecomment-13731929)

# c# - 如何从 c# 调用标量值函数并获取其值？

> ID：14943120
> 
> 赞同：4
> 
> 时间：2013-02-18T18:38:17.557
> 
> 标签：c#, sql-server, user-defined-functions

你好我如何从 c# 运行一个标量值函数并获取它的值？对于基于表的函数，我使用选择命令并获取生成的 DataTable，但我对如何使用标量值函数一无所知。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T18:48:45.777

您可以将字符串传递给 SQL，并让它执行 SQL 可以使用`SqlConneciton`和“SqlCommand”执行的任何操作。

```
string sqlcheck = "SELECT * FROM " + table + " WHERE CUST_NO = @customerNumber";

using (SqlConnection connect = new SqlConnection(DBConnection String))
{
   using (SqlCommand command = new SqlCommand(sqlcheck, connect))
   {
     command.Parameters.AddWithValue("@customerNumber", customerNumber);
     connect.Open();
     response = (string)(command.ExecuteScalar());
   }
} 
```

您可以使用 ExecuteScalar 或其他执行方法之一。[http://msdn.microsoft.com/en-us/library/182ax5k8.aspx](http://msdn.microsoft.com/en-us/library/182ax5k8.aspx)

您可以让您的 SQL 字符串执行任何 SQL，并使用不同的执行方法返回/不返回。

# jquery - jQuery验证动态输入数组

> ID：14943121
> 
> 赞同：8
> 
> 时间：2013-02-18T18:38:19.263
> 
> 标签：jquery, jquery-validate

`<select>`当这是一个动态数组时如何验证？像这样：

```
<select class="escolhaVidro id_material" name="id_material[]" id="id_material"> 
```

澄清一下：这`<select>`是由PHP动态组装的，所以我不知道索引是什么，所以这种方式是不可能的：

```
$(this).validate({
    rules: {
        "id_material[index]" : {
            required : true
        }
    }
}); 
```

奇怪的是，这个插件不起作用：

```
$(this).validate({
    rules: {
        id_material : {
            required : true
        }
    }
}); 
```

我也尝试在 中使用 CSS `class` `required`，`<select>`但效果不佳。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-18T19:03:48.480

> **引用 OP**：“奇怪的是，这个插件不起作用：
> `$(this).validate({ ... });`”

这并不奇怪。它不起作用，因为你没有真正瞄准任何东西。没有任何意义的上下文或范围`$(this)`。

您必须正确定位您的`<form>`元素：

例如，通过`id`...

```
$('#myform').validate({ ... }); 
```

...或通过[任何其他有效的 jQuery 选择器](http://api.jquery.com/category/selectors/)`<form></form>`，该选择器以您想要验证的实际为目标。

* * *

这是一个通用示例，说明如何验证`select`可以轻松适应您的情况的元素：

**[http://jsfiddle.net/Gy24q/](http://jsfiddle.net/Gy24q/)**

**重要**的是，元素`option`中的第一个或默认值**必须**包含，否则规则将失败。如果出于某种原因，您无法将 this first 设置为等于，[请查看此答案的](https://stackoverflow.com/a/14903827/594235)自定义方法解决方法和[jsFiddle](http://jsfiddle.net/tPRNd/)。`select`**`value=""``required``option``value``""`**

 ****HTML**：

```
<form id="myform">
    <select name="id_material[]">
        <option value="">please choose...</option>
        <option>option 1</option>
        <option>option 2</option>
        <option>option 3</option>
    </select>
    ....
</form> 
```

由于您`name`包含括号，`[]`因此[您还必须将字段名称括在引号中](http://docs.jquery.com/Plugins/Validation/Reference#Fields_with_complex_names_.28brackets.2C_dots.29)：

**jQuery** :

```
$(document).ready(function () {

    $('#myform').validate({ // initialize plugin within DOM ready
        // other options,
        rules: {
            'id_material[]': {
                required: true
            }
        },
    });

}); 
```

* * *

上面的答案假设您知道元素`name`的。`select`但是，如果你不知道`name`，你有几个选择......

**1）**`class="required"`在`select`元素 内部 使用...

```
<select class="escolhaVidro id_material required" name="id_material[]" id="id_material"> 
```

**演示：http: [//jsfiddle.net/Gy24q/4/](http://jsfiddle.net/Gy24q/4/)**

**2)** 如果规则比较复杂，可以`rules`根据已有的`class`作业，使用[方法`rules('add')`添加](http://docs.jquery.com/Plugins/Validation/rules#.22add.22rules)复合。

`.each()`如果您有多个`select`元素需要此规则， 请使用 jQuery ...

```
// must be called after validate()
$('select.id_material').each(function () {
    $(this).rules('add', {
        required: true
    });
}); 
```

**演示：http: [//jsfiddle.net/Gy24q/10/](http://jsfiddle.net/Gy24q/10/)**

否则，这只会​​将该规则应用于仅具有... 的*一个* `select`元素`class` `id_material`

```
$('select.id_material').rules('add', {
    required: true
}); 
```

* * *

**编辑：**

**在评论中引用 OP：**

> 在函数内部执行以下验证： `$('#formOrcamento').live('submit', function() {...});`然后 `$(this).validate({...});`是指：`$('#formOrcamento').validate ({...});`

如同：

```
$('#formOrcamento').live('submit', function() {
    $(this).validate({ ... });
}); 
```

是的，这正是它坏掉的原因。

[`.validate()`](http://docs.jquery.com/Plugins/Validation/validate#options)只在准备*初始化*插件的 DOM 上调用*一次。*您不应该将其放在处理程序中。Validate 插件已经有自己的内置事件处理程序，可以捕获表单的提交按钮。*`submit`*

 *根据我上面的工作 jsFiddle 演示设置您的代码。

* * *

**编辑2：**

**在评论中引用 OP：**

> 我正在使用`jquery-ui`，这增加了以下选择： `style='display: none'`. 如果我通过 Firebug 删除`display: none`，则选择验证发生并正确显示标签错误。可能会发生什么？

Validate 插件默认忽略隐藏元素。您需要通过添加`ignore: []`来关闭该选项`validate()`：

```
$(document).ready(function () {

    $('#myform').validate({
        ignore: [], // to allow validation of hidden elements
        // other options,
    });

}); 
```

有关更多信息，请参阅[此答案](https://stackoverflow.com/a/8565769/594235)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-06-28T13:12:14.287

只需使用 emtpy 括号并确保包含括号的名称在引号中（请参阅[文档](https://jqueryvalidation.org/reference#link-fields-with-complex-names-%28brackets-dots%29)）：

```
$(this).validate({
    rules: {
        "id_material[]" : {
            required : true
        }
    }
}); 
```***

# javascript - 从 Web Audio API EQ 的像素值中获取频率

> ID：14943124
> 
> 赞同：2
> 
> 时间：2013-02-18T18:38:25.893
> 
> 标签：javascript, math, canvas, signal-processing, web-audio-api

我正在使用 Web Audio API 和画布创建视觉 EQ。我正在使用以下函数在 HTML5 Canvas 上的对数图中绘制频率：

```
function frequencyToPixel(freq){
    var min = Math.log(graph.min)/Math.log(10)
    ,   max = Math.log(graph.max)/Math.log(10)
    ,   range = max-min
    ,   pixel = (Math.log(freq)/Math.log(10) - min) / range * canvas.width;
    return pixel;
} 
```

我还想反转这个等式以获得一个返回特定像素相关频率的函数。目前我正在使用以下功能，但它没有产生预期的结果。例如，如果我在上面的函数中输入 1000，它会返回 434.93。因此，我应该能够将 434.93 放入以下等式以返回 1000；

```
function pixelToFrequency(pixel){
    var min = Math.log(graph.min)/Math.log(10)
    ,   max = Math.log(graph.max)/Math.log(10)
    ,   range = max-min
    ,   x = (pixel * canvas.width * range) + min
    ,   frequency = Math.pow(10, x);
    return frequency;
} 
```

很可能我以错误的方式重新排列了方程式，因此非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T19:27:39.067

下面的函数计算出对数比例画布频率图上给定像素的频率：

```
function pixelToFrequency(pixel){
    var min = Math.log(app.graph.min)/Math.log(10)
    ,   max = Math.log(app.graph.max)/Math.log(10)
    ,   range = max-min
    ,   frequency = Math.pow(10, pixel * (range / canvas.width) + min)
    return frequency;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T18:50:01.893

```
pixel = (Math.log(freq)/Math.log(10) - min) / range * canvas.width 
```

试试这个？频率 = E((Math.log(10) * (pixel * (range / canvas.width)))+ Math.log(graph.min))

看看这是否有帮助。其中 E 是括号中参数的[欧拉数。](http://en.wikipedia.org/wiki/E_%28mathematical_constant%29 "欧拉数")它可能相当于你那里的东西，老实说，我没有仔细看。不过值得一试。

# java - 来自 Android 中的 onClick 方法的 setText 方法

> ID：14943126
> 
> 赞同：0
> 
> 时间：2013-02-18T18:38:27.710
> 
> 标签：java, android, static, textview, settext

我对 Java 很陌生，遇到了一个问题。我已经设置了一个 TextView 并希望在`setText`从我的对话框中单击一个按钮时调用该方法。这`TextView`是在我的主要活动中设置的。我没有将它初始化为静态，因为这会产生错误。有问题的代码行是 -`Tabs.total.setText("PRINTING TO TEXT VIEW");`我希望它设置我`TextView`在我的类选项卡中定义的内容。

变量`total`是这样定义的 -

```
TextView total = (TextView) findViewById(R.id.total_view); 
```

我已经寻找了很多关于这个问题的材料，但到目前为止还没有找到解决方案。我希望有人能帮忙。谢谢！！

```
public View getView(final int position, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub
    final View v;
    if(convertView==null){
        LayoutInflater li = (LayoutInflater) mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        v = li.inflate(R.layout.scrollergrid, null);
        final TextView tv = (TextView)v.findViewById(R.id.icon_text);
        tv.setTag(pos);
        tv.setText(mItems[pos]);
        TextView price = (TextView)v.findViewById(R.id.price_text);
        price.setText("$" + Prices[pos]);

        pos += 1;
        final ImageView iv = (ImageView)v.findViewById(R.id.icon_image);
        iv.getLayoutParams().height = 150;
        iv.getLayoutParams().width = 150;
        iv.setScaleType(ImageView.ScaleType.CENTER_CROP);
        iv.setImageResource(mThumbIds[position]);
        iv.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                id = tv.getTag();
                System.out.println(mItems[(Integer) id] + " $" + Prices[(Integer) id]);

                final Dialog dialog = new Dialog(mContext);
                dialog.setContentView(R.layout.alertdialog);
                dialog.setTitle(mItems[(Integer) id]);

                ImageView dialogImage = (ImageView) dialog.findViewById(R.id.alert_image);
                dialogImage.setImageResource(mThumbIds[(Integer) id]);

                TextView itemDescription = (TextView) dialog.findViewById(R.id.item_description);
                itemDescription.setText("A nice little piece of food. Good for all the family. Full of flavour!!");

                TextView itemPrice = (TextView) dialog.findViewById(R.id.item_price);
                itemPrice.setText("$" + Prices[(Integer) id]);

                Button goBack = (Button) dialog.findViewById(R.id.go_back);
                goBack.setOnClickListener(new OnClickListener() {
                @Override
                    public void onClick(View v) {
                        dialog.cancel();
                    }
                });

                Button order = (Button) dialog.findViewById(R.id.order);
                order.setOnClickListener(new OnClickListener() {
                @Override
                    public void onClick(View v) {
                        Tabs.Order.add(mItems[(Integer) id] + " " + Prices[(Integer) id]);
                        System.out.println(Tabs.Order);
                        Tabs.total.setText("HIIII");
                        dialog.cancel();
                    }
                });

                dialog.show();
            } 

        });

    }
    else
    {
        v = convertView;
    }
    return v;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T21:00:57.083

你有两个问题：

1.  根本不建议使用静态变量来存储视图（内存泄漏）。您应该简单地将引用作为函数的参数或字段。

2.  在“其他”部分，您没有更新变量“v”以显示新数据，只是在创建视图时将数据放入其中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T20:31:34.023

我认为您想要做的是制作自己的 onClickListener()。

查看此解决方案：[如何将参数传递给 OnClickListener？](https://stackoverflow.com/questions/10614696/how-to-pass-parameters-to-onclicklistener)

只需将您的 TextView 传递给构造函数。

# java - 我在 Windows 7 上安装 Maven 失败。我做错了什么？

> ID：14943128
> 
> 赞同：-1
> 
> 时间：2013-02-18T18:38:30.423
> 
> 标签：java, maven

我尝试在 Windows 7 64 位中安装 Maven。这是 bin 文件夹的路径。

```
C:\apache-maven-3.0.4\apache-maven\src\bin 
```

我正在这样做：

1.  创建具有值的系统变量 MAVEN_HOME ：`C:\apache-maven-3.0.4\apache-maven\src`
2.  附加到路径变量`%MAVEN_HOME%/bin`

这是路径的最后一部分

```
C:\Program Files (x86)\Microsoft SQL Server\100\DTS\Binn\;%MAVEN_HOME%\bin 
```

编辑：多次执行此操作后，当我进入 cmd mvn -version 我收到此错误消息：`JAVA_HOME not found in your environment`这是我第一次收到它，直到现在我只有无效的命令，找不到批处理文件

这是java的路径：

```
C:\Program Files\Java\jdk1.7.0\bin 
```

1.  我用值创建了 JAVA_HOME`C:\Program Files\Java\jdk1.7.0`
2.  附加到路径变量：`%JAVA_HOME%\bin`

这是我路径的最后一部分：

```
C:\Program Files (x86)\Microsoft SQL Server\100\DTS\Binn\;%MAVEN_HOME%\bin;%JAVA_HOME%\bin 
```

我仍然在您的环境中找不到 JAVA_HOME。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T18:43:50.287

您需要将 JAVA_HOME 设置为您的 java 安装文件夹的主目录（假设您已经安装了 JDK）。它应该类似于 C:\Program Files\Java\jdk1.6.0_24

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T19:03:20.257

尝试从 maven 下载页面下载 apache-maven-.. *-bin.zip 而不是 apache-maven-.. -src.zip。*bin 文件夹应该直接在 c:\apache-maven-3.0.4 目录下。相应地设置 PATH 变量。当然，还要添加 JAVA_HOME 环境变量。

# rest - Fitnesse smartrics.rest.fitnesse.fixture.RestFixture.setBaseUrl

> ID：14943130
> 
> 赞同：0
> 
> 时间：2013-02-18T18:38:33.597
> 
> 标签：rest, fitnesse

我需要进行一个测试，以调用一个生成安全令牌的 REST 端点，然后再对被测的实际系统进行第二次调用。为了做到这一点，我使用 smartrics.rest.fitnesse.fixture.RestFixture 并将实例化中的 baseurl 设置为第一个基数。我正在尝试进行此调用，然后将新的 baseurl 设置为新位置，但这样做时遇到了麻烦。

通过仔细阅读代码，似乎有一个方法 setBaseUrl(Url url) 但我找不到使用它的示例，并且我自己无法弄清楚。

有没有人对此有任何运气，或者是否有另一种更好/更简单的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-07T00:24:56.343

我们有一个听起来类似的要求——我们需要使用 RestFixture(POST) 来检索一个 URL，以便在后续的 RestFixture 调用 (GET) 中使用。（请注意，我们使用的是古老的 RestFixture 1.1）

我因此修改了 RestFixture.java 中的 processArguments() 方法：

`// baseUrl = new Url(args[0]); // original line baseUrl = new Url(resolve(args[0])); // modified`

进行此修改后，我的 Fitnesse 测试如下所示：

`！| 休息夹具 | http:///fds |
| setBody |{"param1":"blah","param2":"blather"} |
| 发布 | /GetThatUrl | 200 | | |
| 让 | **$url结果**| 身体 | |

！| 休息夹具 | **$url结果**|
| 获取| | 200 | 内容长度：[\d]+ | ||`

如果没有更改代码，$urlresult 就无法解析，我无法将 URL 作为变量传递。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-30T15:22:52.617

问题在于 RestFixture:processRow - 因为它使用 Java 反射，所以它尝试调用不带参数的方法。这将失败，因为 setBaseUrl 接受一个参数 (Url)。我尝试了一种修改，虽然不是实现它的最佳方法 - 当前代码 RestFixture v3.0 (RestFixture.processRow())：

```
method1 = getClass().getMethod(methodName);
method1.invoke(this); 
```

RestFixture.processRow() 中的修改代码：

```
Method[] methods = getClass().getMethods();

int i = 0;
for(i = 0; i < methods.length; i++){
    if(methodName.equals(methods[i].getName())){
        method1 = methods[i];
        break;
    }
}

Class[] paramTypes = method1.getParameterTypes();

List<Object> params = new ArrayList<Object>();

for(i = 0; i < paramTypes.length; i++){
    String cellText = row.getCell(i+1).text();
    Object param = paramTypes[i].getConstructor(String.class).newInstance(cellText);
    params.add(param);
}

method1.invoke(this, params.toArray()); 
```

完成此修改后（您可能需要添加所需的导入 - java.lang.InstantiationException、java.lang.Object、java.util.ArrayList；以及 InstantiationException 的异常处理程序），重新构建 RestFixture 并且应该可以工作。

# grails - Grails 2.2 应该使用哪些 Spock、Geb 和 Selenium 版本？

> ID：14943132
> 
> 赞同：1
> 
> 时间：2013-02-18T18:38:36.990
> 
> 标签：grails, selenium, spock, geb

有没有人设法让 Geb 和 Spock 插件与 Grails 2.2 一起使用？

如果是这样，您使用的是什么版本的 Geb、Selenium 和 Spock？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T19:21:10.217

Grails Geb 示例中有一个更新到 2.2的[拉取请求](https://github.com/geb/geb-example-grails/pull/7)

该版本可以在“文件已更改”选项卡中找到：

```
def gebVersion = '0.9.0-RC-1'
def seleniumVersion = '2.27.0'
def spockVersion = '0.7' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-25T15:10:30.467

我的配置适用于 2.2.3

在 grails-app/Config/BuildConfig.groovy

```
def gebVersion = '0.9.0'
def seleniumVersion = '2.21.0'
def spockVersion = '0.7

dependencies {

    test("org.seleniumhq.selenium:selenium-htmlunit-driver:$seleniumVersion") {
        exclude "xml-apis"
        }       
    test("org.seleniumhq.selenium:selenium-chrome-driver:$seleniumVersion")
    test("org.seleniumhq.selenium:selenium-firefox-driver:$seleniumVersion")        

    test "org.spockframework:spock-grails-support:0.7-groovy-2.0"
    test "org.gebish:geb-spock:$gebVersion"
    }

 plugins {
        test    ":spock:$spockVersion"
        test    ":geb:$gebVersion"
        } 
```

在测试/功能/GebConfig.groovy

```
/*
 This is the Geb configuration file.
 See: http://www.gebish.org/manual/current/configuration.html
 */

import org.openqa.selenium.htmlunit.HtmlUnitDriver
import org.openqa.selenium.firefox.FirefoxDriver
import org.openqa.selenium.chrome.ChromeDriver

// Use htmlunit as the default
// See: http://code.google.com/p/selenium/wiki/HtmlUnitDriver
driver = {
    def driver = new HtmlUnitDriver()
    driver.javascriptEnabled = true
    driver
}

environments {

    // run as “grails -Dgeb.env=chrome test-app”
    // See: http://code.google.com/p/selenium/wiki/ChromeDriver
    chrome {
        driver = { new ChromeDriver() }
    }

    // run as “grails -Dgeb.env=firefox test-app”
    // See: http://code.google.com/p/selenium/wiki/FirefoxDriver
    firefox {
        driver = { new FirefoxDriver() }
    }

} 
```

# c# - MapPath 字段的对象参考

> ID：14943133
> 
> 赞同：1
> 
> 时间：2013-02-18T18:38:39.933
> 
> 标签：c#, asp.net, exception

当我尝试运行它时，在类字段上出现异常，如下所示：

> 非静态字段、方法或属性 'System.Web.UI.Page.MapPath(string) 需要对象引用

为什么 ？

后面的代码：

```
public partial class Profile : System.Web.UI.Page
{
    DirectoryInfo dir = new DirectoryInfo(MapPath("~/pic")); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T18:45:32.970

尝试`Server.MapPath()`或`HttpContext.Current.Server.MapPath()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T18:47:42.147

```
DirectoryInfo dir = new DirectoryInfo(
HttpContext.Current.Request.PhysicalApplicationPath + "\\pic")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T18:41:58.753

从[MSDN](http://msdn.microsoft.com/en-us/library/system.web.httpserverutility.mappath.aspx)文档：

...路径开头的斜杠 (/) 表示站点的绝对虚拟路径。

所以你的“~”是错误的和不必要的。

# c# - RibbonComboBox 没有 selectionChanged 事件

> ID：14943134
> 
> 赞同：1
> 
> 时间：2013-02-18T18:38:46.407
> 
> 标签：c#, wpf, combobox, ribbon

我的程序中有一个组合框，它可以正常工作

但是我希望这成为我的 WPF 应用程序中功能区的一部分

我创建了一个“功能区组合框”，但是这似乎没有选择更改事件，就像普通组合框一样

为什么是这样？

如果我将标准组合框中的代码剪切并粘贴到功能区组中，则会创建该框，但是当我运行程序时它是空的

此外，我可以运行程序的唯一方法是在我的 if 语句中注释掉代码（对于我想要基于组合框选择发生的事情）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T11:54:27.550

如果您使用的是[Microsoft Ribbon for WPF](http://www.microsoft.com/en-us/download/details.aspx?id=11877)，则`SelectionChanged`可以在`RibbonGallery`

```
<ribbon:RibbonComboBox Style="{StaticResource SubPosition}" SelectionBoxWidth="20" IsEditable="True">
    <ribbon:RibbonGallery Name="rbngFontSizes" SelectedValue="11" SelectedValuePath="Content" SelectionChanged="rbngFontSizes_SelectionChanged">
        <ribbon:RibbonGalleryCategory ItemsSource="{Binding}" />
    </ribbon:RibbonGallery>
</ribbon:RibbonComboBox> 
```

# javascript - 如何在 javascript 中循环遍历这个数组？

> ID：14943135
> 
> 赞同：1
> 
> 时间：2013-02-18T18:38:48.163
> 
> 标签：javascript

我试图遍历这个数组，但它不返回任何长度。可能吗？

谢谢！

```
<!DOCTYPE html>
<html>
  <body>
    <button onclick="myFunction()">click</button>
    <script>
      function myFunction()
      {
        var fruits = [];
        fruits["B"] = "Banana";
        fruits["A"] = "Apple";
        fruits["O"] = "Orange";

        delete fruits["A"];

        alert(fruits["A"]); // Alerts "undefined"
        alert(fruits["B"]); // Alerts "Banana"
        alert(fruits.length); // Alerts "0"
      }
    </script>

  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-18T18:41:40.653

数组只能有数字索引。当您编写时，`fruits["B"] = "Banana";`您正在为对象分配一个属性（数组是对象），而不是向数组中添加一个项目。

您可以正确使用带有数字索引的数组，也可以使用带有字符串键的对象：

```
var fruits = [];
fruits.push("Banana");
alert(fruits[0]); // "Banana"

var fruits = {};
fruits["B"] = "Banana";
alert(fruits["B"]); // "Banana" 
```

如果您需要对象的长度，请使用`Object.keys(fruits).length;` [Docs](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/keys)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T18:42:45.707

看起来您想要一个对象而不是数组，因此您可以按键访问元素：

```
var fruits = {
    a : 'apple',
    b : 'banana'
};

fruits.a //apple
fruits['b'] //banana 
```

然后你可以按键循环遍历它们：

```
for( var item in fruits ){
    fruits[ item ];
} 
```

需要注意的一点是，这将循环遍历 fruits 中的所有键以及它继承自的任何对象（在我的示例中，它唯一的 object.prototype）。如果你想小心，你可以使用 hasOwnProperty 方法来确保该属性存在于 fruits 对象上，而不是它的任何原型上：

```
for( var item in fruits ){

    if( fruits.hasOwnProperty( item ) ){
        fruits[ item ];
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T18:45:47.830

您正在寻找的是一个 JavaScript 对象。如果将 fruits 变量声明为对象字面量，则可以执行所需的操作。

```
var fruits = {};
fruits["B"] = "Banana"; // Can also do this as fruits.B = "Banana";
fruits["A"] = "Apple";
etc. 
```

然后做类似的事情`alert(fruits["A"])`会给你一个警报消息，上面写着“Apple”，如你所愿。但是，JavaScript 对象没有长度属性，但您可以这样做`Object.keys(fruits)`，这将返回*水果*变量的键数组，然后您可以访问其长度属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T18:52:34.193

你不能像这样声明数组。你需要使用 new 关键字声明数组

```
var Fruit=new Array("Banana","Apple","Orange"); 
```

那么你可以像这样访问

```
 alert(Fruit[0]);//Banana
    alert(Fruit[1]);//Apple
    alert(Fruit[2]);/Orange 
```

希望这会奏效

# java - Android从JSON数组添加ListView项目

> ID：14943136
> 
> 赞同：0
> 
> 时间：2013-02-18T18:38:52.527
> 
> 标签：java, android, android-listview, android-arrayadapter

我有一项活动，但有 3 个布局。ListView 是登录后显示的布局的一部分。这就是为什么我无法设置我的 ArrayAdapter onCreate，因为我的 ListView 尚未初始化。我尝试按照[本](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)教程进行操作，但无法重现这些步骤。在本教程中，作者做了一切 onCreate。

我试过这样做：

```
ArrayList<String> listItems=new ArrayList<String>();
ArrayAdapter<String> adapter;

...

    public class getcontacts extends AsyncTask<Void, Void, Boolean> {
    @Override
    protected Boolean doInBackground(Void... params) {

 ...HERE I AM FETCHING DATA...

 listItems.add(json_data.getString("login") + " " + derp);
 }

@Override
    protected void onPostExecute(final Boolean success) {
        getc = null;

        ac = new addcontacts();
        ac.execute(true); 
```

这是 addcontacts 类的代码：

```
 public class addcontacts extends ListActivity {

     protected void onCreate() {

         adapter=new ArrayAdapter<String>(this,
                    android.R.layout.simple_list_item_1,
                    listItems);
         setListAdapter(adapter);

         adapter.notifyDataSetChanged();

     }
     protected void execute(final Boolean success) {

    done = true;
     }

 } 
```

和布局：

```
<?xml version="1.0" encoding="utf-8"?><LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="match_parent"
    android:layout_height="188dp"
    android:layout_weight="0.53"
    android:text="Fetching contact list" />

<ListView
    android:id="@+id/listView1"
    android:layout_width="match_parent"
    android:layout_height="106dp" >
</ListView>

</LinearLayout> 
```

ListView 不包含任何内容。我在调试器中检查了 listItems 包含所有项目，因此适配器有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T18:50:45.763

我建议您采用以下方法：

1.  在`Activity`类初始化`ListView`和`Adapter`空列表。
2.  创建子类`BaseAdapter`以获得对其的更多控制。
3.  通过. `Adapter`_`Adapter`
4.  通过`Adapter`并`List`在您的`AsyncTask`子类中。
5.  在您的`doInBackground()`方法中执行从服务器获取数据并将每个项目添加到`List`.
6.  如果要创建**Lazy-Adapter**以便将每个项目添加到`List`, 调用 `publishProgress()`和`onProgressUpdate()`方法调用 中`yourAdapter.notifyDataSetChanged()`。
7.  如果没有，工作完成后，在`onPostExecute()`方法调用 `yourAdapter.notifyDataSetChanged()`中。
8.  现在它应该可以工作了。

你完成了。

# c++ - C++ 二叉搜索树

> ID：14943140
> 
> 赞同：0
> 
> 时间：2013-02-18T18:39:11.683
> 
> 标签：c++, binary-search-tree

最近我开始玩 C++，即类和指针。我四处寻找类似的问题，但没有任何帮助。

我有一个二叉搜索树类，它以字符串格式保存一些信息（好吧，char *），但是在向树添加新节点后，我无法取回信息，因为它返回垃圾。

这是我的代码的样子：

```
class Node
{
    Node *lNode;
    Node *rNode;
    char *name;
    public:
        void setName(char *n) { name = n; }
        char *getName() { return name; }
}

class Tree
{
    Node *root;
    Node *addNode(Node *, Node *);
    public:
        Tree() { root = NULL };
        int addNewNode(Node *);
        void print();
};

int Tree::addNewNode(Node *n)
{
    root = addNode(root, n);
    cout << root->getName() << endl;   // this returns the name correctly
}

Node *Tree::addNode(Node *subtree, Node *node)
{
    if(subtree== NULL)
    {
        subtree = node;
    }
    else if(node->getName() <= subtree->getLeft())
    {
        subtree->setLeft(addNode(subtree->getLeft(), node));
    }
    else
    {
        subtree->setRight(addNode(subtree->getRight(), node));
    }

    return subtree;
}

void Tree::print()
{
    cout << root->getName() << endl;    // this does not!
} 
```

这就是我调用方法的地方：

```
Tree *myTree = new Tree();

Node *n = new Node();
n->setName(name);
myTree->addNewNode(n); 
```

树变量是外部容器类的私有成员属性，实际上是在该类外部创建以传递给构造函数。当我调用 addNewNode 方法时，会向树中添加一个节点，但是当我想打印出存储在根中的节点的名称时，它只会出现垃圾。我想某处有一个混乱的指针，但我一辈子都找不到它。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T18:44:47.480

当 root 为空时，您将其设置为城市而不是节点。有你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T18:48:05.583

我猜你正在传递一个字符串指针名称`setName`并只是将指针复制到`name`（而不是重新分配和保存字符串）。后来，原来的对象不见​​了，你的对象`name`就剩下指向垃圾了。尝试使用 std::string`name`代替，或者使用 strcpy/memcpy 创建自己的内存`name = new char[ strlen(n) + 1 ]`。如果你走那条路，不要忘记`delete [] name`对象销毁。

# wordpress - 如何在 Wordpress 中将特色图片链接到更大的版本？

> ID：14943141
> 
> 赞同：0
> 
> 时间：2013-02-18T18:39:17.437
> 
> 标签：wordpress, thumbnails

如何将帖子的特色图片链接到类别页面上的全尺寸版本？

这是我的 category.php 循环：

```
 <h1>Professional Portfolio Gallery - <?php single_cat_title(); ?></h1>
    <p><?php echo category_description(); ?></p>
    <?php if (have_posts()) : ?>
    <ul class="portfolio">
    <?php while (have_posts()) : the_post(); ?>
    <li>
    <?php 
    if ( has_post_thumbnail() ) { // check if the post has a Post Thumbnail assigned to it.
    the_post_thumbnail();
    } 
    ?>
    <?php the_excerpt(); ?></li>
    <?php endwhile; ?>
    </ul>   
    <?php wp_paging(); ?>
    <?php else : ?>

    <h1>Not Found</h1>
    <p><?php _e("Sorry, but you are looking for something that isn't here."); ?></p>

    <?php endif; ?> 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T05:21:14.923

要将帖子缩略图链接到完整大小的版本，您应该能够使用以下内容：

```
<?php 
  if ( has_post_thumbnail()) {
  $full_image_url = wp_get_attachment_image_src( get_post_thumbnail_id(), 'full');
  echo '<a href="' . $full_image_url[0] . '" title="' . the_title_attribute('echo=0') . '" >';
  the_post_thumbnail('thumbnail');
  echo '</a>';
}
?> 
```

您可以在此处找到有关此重定向的更多信息：http: [//codex.wordpress.org/Function_Reference/the_post_thumbnail](http://codex.wordpress.org/Function_Reference/the_post_thumbnail)

希望有帮助！

# python - 设置透明主窗口

> ID：14943142
> 
> 赞同：7
> 
> 时间：2013-02-18T18:39:19.670
> 
> 标签：python, qt, pyqt

如何在QT上设置主窗口背景透明？我需要属性还是样式？
我试过设置不透明度，但它对我不起作用。

```
app.setStyleSheet("QMainWindow {opacity:0}") 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-18T18:50:24.073

您必须为 MainWindow 对象设置新属性，如下所示：

```
class Main(QtGui.QMainWindow):
      def __init__(self):
          self.setAttribute(Qt.WA_TranslucentBackground) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T22:52:41.390

只需使用该`windowOpacity`属性：

[http://doc.qt.io/qt-4.8/qwidget.html#windowOpacity-prop](http://doc.qt.io/qt-4.8/qwidget.html#windowOpacity-prop)

# powershell - 嵌套的 powershell 参数

> ID：14943144
> 
> 赞同：0
> 
> 时间：2013-02-18T18:39:20.657
> 
> 标签：powershell, parameters, process

在 powershell 脚本中，我需要启动进程 powershell 并告诉它运行脚本 foo.ps1 ，如下所示：

```
start-process powershell C:\foodir\foo.ps1 
```

但是当我需要使用参数运行脚本 foo 时遇到了问题。我尝试了一些这样的代码：

```
start-process powershell (C:\foodir\foo.ps1 -paramforfoo test) 
```

但这只是在脚本到达这一行时冻结脚本并且不会引发错误。我认为它试图将参数 test 传递给 powershell 进程而不是脚本 foo。如何使用参数运行此脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T18:46:52.117

尝试使用引号来收集您的命令。例如

```
Start-Process powershell ".\Untitled3.ps1 -testparam 'hello world'" 
```

# webgl - WebGL - getAttribLocation：没有对象，着色器问题

> ID：14943148
> 
> 赞同：1
> 
> 时间：2013-02-18T18:39:38.213
> 
> 标签：webgl, shader

我的 WebGl 代码存在以下问题。

```
ERROR:

WebGL: INVALID_VALUE: getAttribLocation: no object or object deleted 
```

我的绘图功能：

```
function drawScene () {
    vertexPositionAttribute = gl.getAttribLocation(glProgram, "aVertexPosition");
    gl.enableVertexAttribArray(vertexPositionAttribute);

    gl.bindBuffer(gl.ARRAY_BUFFER, trianglesVerticeBuffer);
    gl.vertexAttribPointer(vertexPositionAttribute, 3, gl.FLOAT, false, 0, 0);
    gl.drawArrays(gl.TRIANGLES, 0, 6);
} 
```

我的着色器已被加载、创建并附加到程序中，没有任何问题。我链接并使用了该程序。但仍然找不到我的错误。

顶点：

```
attribute vec3 aVertexPosition;
void main(void) {
gl_Position = vec4(aVertexPosition, 1.0);
} 
```

分段：

```
void main(void) {
    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);
} 
```

感谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T23:57:30.150

问题是您正在尝试在`initShaders()`完成创建`glProgram`. 请记住，您正在异步下载着色器文件，因此您的`drawScene()`函数甚至在着色器下载之前就已运行。

要解决此问题，请更改`loadFile()`函数中的以下行，以便它执行如下同步请求：

```
request.open('GET', url, false); 
```

[这](http://antonpantev.com/so-related/getAttribLocation/)是您的代码的工作版本的链接。

# c# - 从 DevExpress GridControl 获取值

> ID：14943151
> 
> 赞同：-3
> 
> 时间：2013-02-18T18:39:52.963
> 
> 标签：c#, winforms, devexpress, xtragrid

每当我单击行的单元格时，如何将数据填充到文本字段中？

对于标准 DataGridView 我可以使用以下代码

```
void dataGridView1_CellContentClick(object sender, DataGridViewCellEventArgs e)
{
    txtguard_id.Text = dataGridView1.SelectedRows[0].Cells["GuardId"].Value.ToString();
    DateHired.Value = (DateTime)dataGridView1.SelectedRows[0].Cells["DateHired"].Value;
    Firstname.Text = dataGridView1.SelectedRows[0].Cells["FirstName"].Value.ToString();
    Middlename.Text = dataGridView1.SelectedRows[0].Cells["MiddleName"].Value.ToString();
    Lastname.Text = dataGridView1.SelectedRows[0].Cells["LastName"].Value.ToString();
    txtguard_street.Text = dataGridView1.SelectedRows[0].Cells["Street"].Value.ToString();
    txtguard_brgy.Text = dataGridView1.SelectedRows[0].Cells["Barangay"].Value.ToString();
    txtguard_procity.Text = dataGridView1.SelectedRows[0].Cells["ProvinceorCity"].Value.ToString();
    txtguard_age.Text = dataGridView1.SelectedRows[0].Cells["Age"].Value.ToString();
    txtguard_bday.Value= (DateTime)dataGridView1.SelectedRows[0].Cells["Birthdate"].Value;
    txtguard_male.Checked = (bool)dataGridView1.SelectedRows[0].Cells["Gender"].Value;
    txtguard_female.Checked = (bool)dataGridView1.SelectedRows[0].Cells["Gender"].Value;
} 
```

但在 GridControl 我不知道该怎么做......

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-19T09:41:50.290

使用 DevExpress XtraGrid，您可以使用几乎相同的方法：

```
using DevExpress.XtraGrid.Views.Grid;
//...
gridView1.RowClick += gridView_RowClick;
//...
void gridView_RowClick(object sender, RowClickEventArgs e) {
    object id = ((GridView)sender).GetRowCellValue(e.RowHandle, "ID");
    testBoxId.Text = id.ToString();
    //...
} 
```

或者

```
using DevExpress.XtraGrid.Views.Grid;
//...
gridView1.RowCellClick += gridView_RowCellClick;
//...
void gridView_RowCellClick(object sender, RowCellClickEventArgs e) {
    object id = ((GridView)sender).GetRowCellValue(e.RowHandle, "ID");
    testBoxId.Text = id.ToString();
    //...
} 
```

相关帮助文章：[获取和设置单元格值](http://help.devexpress.com/#WindowsForms/CustomDocument753)

**更新：**
请注意，如果启用数据编辑并且 ColumnViewOptionsBehavior.EditorShowMode 属性设置为 MouseDown，则单击行单元格时不会触发这些事件。

您可以使用 GridView.OptionsBehavior.Editable 属性禁用视图的就地编辑。

# android - 服务结束前的小部件更新

> ID：14943159
> 
> 赞同：0
> 
> 时间：2013-02-18T18:40:43.143
> 
> 标签：android, android-widget, android-service

我正在制作一个 android 小部件，它是一个按钮。

当点击它时，小部件午餐服务和服务写入共享首选项中的更改，然后小部件应调用更新方法以根据服务中更改的首选项值更改背景。

问题是更新方法在服务之前运行，因此小部件会在服务更改之前更新存储在共享首选项中的最后一个值。

我想要什么： - 单击小部件按钮 - OnReceive 方法 - 调用 startService() - 服务正在运行 - 服务中：编辑共享参考 - 服务结束 - 根据共享首选项的值调用更新小部件

真正起作用的是： - 单击小部件按钮 - OnRecieved 方法 - 调用 startService() - 调用更新小部件并根据已编辑（但尚未编辑）的共享首选项的值进行更新 - 服务正在运行 - 服务中：编辑共享参考 - 服务结束

我的代码： - OnReceive() - 在 OnReceive() 中：--- startService(); --- 更新小部件（）；

在更新方法开始运行之前，我如何才能完全运行服务？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T18:57:27.680

startService() 不是阻塞操作，所以如果你在 onReceive() 上依次有 startService() 和 updateWidgets()，它不会等待服务启动和结束运行 updateWidgets()。

要获得您想要的方式，您需要在服务 startCommand() 结束时调用 updateWidgets() 并调用 finish() 来结束服务。

# html - Amazon Cloudfront 交付资产的速度比直接从 EC2 提供资产的速度慢吗？

> ID：14943160
> 
> 赞同：1
> 
> 时间：2013-02-18T18:40:44.103
> 
> 标签：html, amazon-web-services, amazon-ec2, user-experience, amazon-cloudfront

我注意到在移动 Safari 上，当我通过 Cloudfront 交付我的资产时，它们的加载速度明显慢于仅从我的 EC2 提供我的资产。

具体来说，我的网站有一个主背景图像，它的显示速度明显慢于 EC2 提供的文本。这个背景图像的加载并没有明显落后于我笔记本电脑上 Chrome 上的文本，这可能是因为 Chrome 与移动 Safari 相比具有更高的性能。

我不知道该怎么做，因为 Cloudfront 的全部目的是快速提供资产并加载我的 EC2，但是这个背景图像出现的延迟导致了相当丑陋的，即不可接受的糟糕的 UX。

**注意：** *请不要反射性地投票将这个问题迁移到另一个 SE 站点，因为关键是不清楚哪种方法最好。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-14T20:16:30.713

我们做了一些对比测试，似乎使用 cloudfront 的优势取决于请求文件的大小。对于小文件 (2kb)，CF 响应时间比直接向 EC2 请求要长。对于 15kb 的文件，响应时间几乎相同。对于 57kb 文件 (jquery-1.3.2.min.js)，cloudfront 比 EC2 快 4 到 5 倍。

# domain-driven-design - AntiCorruption 层的 Facades、Services 和 SRP

> ID：14943169
> 
> 赞同：0
> 
> 时间：2013-02-18T18:41:22.490
> 
> 标签：domain-driven-design

1)

a) *ACL Facade*仅提供对我们*BC*需要的*其他系统*（*外部系统*，甚至可能是我们团队开发的另一个*有界上下文）的那些功能的访问。*如果*其他系统*公开了我们可以分类为几个不同*职责的功能（我们的**BC*感兴趣），我们应该为这些*职责*中的每一个定义一个*ACL Facade* ，还是应该让单个*ACL Facade*公开所有*职责*（由*外部系统*提供）我们的*公元前***********需要？**********

 *****b) 如果对a)**的回答是我们应该*为外部系统提供的每个职责定义一个 ACL 外观*，我们是否应该反过来也*为每个 ACL 外观定义一个 ACL 服务*？！

2)

a) 埃文的书（第 366 页）：

> AntiCorruption 层的公共接口通常显示为一组服务……在我们的模型中，将外部系统表示为单个组件甚至可能没有意义。最好使用多个服务，就我们的模型而言，每个服务都有连贯的责任

*ACL*本身并不驻留在*域层*中，但是根据上面的引用，*ACL 服务*不代表*域概念*吗？如果是这样，我们难道不能这样说：

I- *ACL 服务*是*域服务*吗？

II -*域概念*已泄漏到*ACL*中？

b) *ACL 服务的**职责*是什么？*仅仅是在我们的BC*和*外部系统*（即其他*BC*）之间进行调解，或者*ACL Service*是否可以承担与*外部系统*提供的*责任*不同的*责任*，因此*ACL Service*只能使用*外部系统*提供的功能来执行它自己*指定的任务*。 ?

 ***3) 埃文的书（第 366 页）：

> AntiCorruption 层的公共接口通常显示为一组服务……在我们的模型中，将外部系统表示为单个组件甚至可能没有意义。最好使用多个服务，就我们的模型而言，每个服务都有连贯的责任

作者是否说将*外部系统*表示为具有*单一职责*可能没有意义，但该*系统*可以表示为具有*多个职责*，因此我们将为每个职责定义*ACL Facade + ACL 服务*（和相应的*适配器*）这些*责任*？

4）顺便说一句-我假设ACL也可以在同一个应用程序中存在并由同一个团队开发的两个*有界上下文之间定义？*

**更新：**

1)

a）我不太明白你的推理：

> 如果外观被同一个项目以不同的职责使用仍然属于相同的有界上下文，则使用相同的外观。沿着外部系统 API 轴的技术凝聚的好处将超过沿着责任轴的功能耦合的好处。

一、我认为“ *at* ”是一个错字，应该用“*和*”代替？

二、通过“*不同的职责仍然属于相同的有界上下文*”，您是指*Facade*仅公开单个*BC的**职责*这一事实吗？

 *三、如果*Facade*暴露了*几个 BC的**职责*，那么我们应该为**每个***外部 BC设置**一个 Facade*吗？*如果是，为什么它比为所有BC*拥有一个 Facade 更可取？仅仅因为*Facade 界面*会变得一团糟？

 *****四。“*如果外观被同一个项目使用*”是指如果*两个 BC*都是*同一个应用程序*的一部分，那么我们应该使用*单个外观*来公开所有*职责*吗？如果另一个*BC*属于*不同的应用程序*怎么办？

五。

> 沿着外部系统 API 轴的技术凝聚的好处将超过沿着责任轴的功能耦合的好处。

为什么*技术内聚*优于*功能耦合*？

b)

> 外观本身实际上是一个服务或一组服务。无需定义额外的服务。

嗯，我不确定我是否理解这一点。*无论如何， ACL 服务*如何映射到*Facade*？也许*每个 ACL 服务*都映射到我们的*Facade暴露的**一个职责*（即，如果*Facade*暴露了*一个职责*，那么我们只有*一个 ACL 服务*，如果它暴露*了两个职责*，我们就有*两个 ACL 服务*等）？

 ***3)

> > 作者是否说将外部系统表示为具有单一职责可能没有意义，而是该系统可以表示为具有多个职责，因此我们将为每个职责定义 ACL Facade + ACL 服务（和相应的 Adapter ）责任？
> 
> 是的，外部系统可能在您的系统中扮演不同的角色。因此，它可以在 ACL 中表示为多个服务。无需为每个 ACL 服务定义额外的服务 - 它们已经是服务。

我必须承认我还没有听过*Udi 的 Making Roles explicit*，所以我有点迷失在这里，但我并不是暗示我们应该为我们已经拥有的每个*ACL 服务添加额外的**ACL 服务。*相反，我问的是作者是否意味着我们应该*为每个职责设置一个 ACL 服务*（即，如果另一个*BC/Facade*有*一个职责*，我们应该定义一个*ACL 服务*，如果它有*两个职责*，我们应该定义*两个 ACL 服务*等）

 ***4)

> 正确的。但是，本地开发的两个 BC 之间的关系可能与外部系统的关系不同。

不一样怎么办？

**第二次更新：**

1)

一个）

二、

> 外观封装了外部系统的 API。如果 API 提供的功能仅由单个 BC 使用，但有多个用例，则可以为该 BC 提供单个外观服务。另一种方法是为每个用例创建一个外观。这也很好，但就像我说的，第一种方法的技术凝聚力可能是有益的。

Q1 - 您使用术语“*用例*”而不是*Responsibility*。我是否正确假设说“*一个外观暴露一个用例*”通常表明*外观暴露一个单一的方法*，而说“*一个外观暴露一个单一的责任*”也可能意味着*外观暴露了几个方法*（它们一起完成一个特定的任务 ）？

Q2 - 那么*外观*应该暴露*职责*或*用例*吗？

五。

> 通常，功能凝聚力优于技术或逻辑凝聚力。但是，通常，您将两者混合使用。技术凝聚力可以​​在较小的范围内方便。例如，您可以在外观中使用类似的序列化或翻译机制。在立面之间共享这些很方便，但不会以功能凝聚力为代价。因此，可以在单个 BC 内共享此类功能，但不能跨 BC 共享。

从远处看，具有*技术凝聚力*而不是*功能凝聚力的**单一立面*是有意义的。但是，这个过程在实践中的样子会变得相当混乱。解释一下，假设*外部系统*暴露了几个*职责*，那么我们可以设计*Facade*，使其具有*技术凝聚力*，而不是*功能凝聚力*，只需让一个*Facade*暴露*外部系统*提供的所有*职责*即可。

 ****但是当外部系统*（以及*Facade*）只暴露一个*单一的责任*时，我很难想象一个场景——即使在这样的场景中，是否有可能设计一个*Facade*，使其具有*技术凝聚力*而不是*功能凝聚力*？如果是，你能提供一个简单的例子吗？

六、*功能凝聚力*是否与*无副作用功能*/*纯功能*相关？

2)

b)

> > 无论如何，ACL 服务如何映射到 Facade？也许每个 ACL 服务都映射到我们的 Facade 公开的一个责任（即，如果 Facade 公开一个责任，那么我们只有一个 ACL 服务，如果它公开两个责任，我们就有两个 ACL 服务等）？
> 
> ACL 是由服务组成的外观。是的，您的假设是一种可以接受的方法。这里的门面一词并不是指单个类，而是指组成反腐败层的一组类（服务）。它可能只有一个类，也可能是多个类。

I. 我想我理解你的意思，但只是为了确定——假设*我们的 BC*只与*一个外部系统*通信，因此我们只有*一个 Facade*，一个*Facade*通常实现为一个*类*吗？

二、顺便说一句，我假设*ACL 服务*不直接调用*这个 Facade*，而是调用相应*Adapters的**方法*，然后调用*这个 Facade*上的*方法*？

 ***三、

> 是的，您的假设是一种可以接受的方法。

所以你本质上是在暗示，如果*外部系统*暴露*了两个职责*，我们应该有一个*单一的 Facade*暴露*这两个职责*，但另一方面我们应该有*两个 ACL 服务*，一个用于每个*职责*？

**第三次更新：**

你的回答让我很困惑，所以在我提出任何有意义的问题来回应你的回答（在这个和我提出的另一个主题中）之前，我必须问你以下问题：

据我了解您的回答，您似乎本质上是在说*ACL 服务*构成了*Facade*，这意味着*这些 ACL 服务*代表了*Facade 的接口*？这也意味着*Facade 属于我们的 BC*，因为它是根据*我们的 BC 的域模型*表示的（原因是*ACL 服务*是根据*我们的 BC 的域模型*表示的）？！

但是 Evans 声称*Facade*属于*另一个系统的 BC*（因此应该使用*外部系统的域概念*来表达），而*ACL 服务*应该属于*我们的 BC*，因此应该使用*我们 BC 的域概念*来表达：

pg。367：

> Facade 属于另一个系统的 BC

那么我是否误解了您的帖子，或者您对这个主题的看法与埃文斯的看法有些不同？

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T21:58:10.870

1a) 如果外观由同一个项目使用，并且不同的职责仍然属于相同的有界上下文，则使用相同的外观。沿着外部系统 API 轴的技术凝聚的好处将超过沿着责任轴的功能耦合的好处。

1b) 外观本身实际上是一个服务或一组服务。无需定义额外的服务。

2a1) 是的。

2a2) 是的，但是我不会说泄密是贬义的。ACL 的目的是使外部模型适应本地域模型。因此，领域概念自然会存在。

2b) ACL 服务应该只在外部系统和您的 BC 之间进行调解。然而，这种调解的性质可以延伸。中心目标是防止因外部模型变化而导致的腐败。

3) 是的，外部系统可能在您的系统中扮演不同的角色。因此，它可以在 ACL 中表示为多个服务。无需为每个 ACL 服务定义额外的服务 - 它们已经是服务。

4) 正确。但是，本地开发的两个 BC 之间的关系可能与外部系统的关系不同。

**更新**

1a1) 是的，错字。已更正。

1a2) 外观封装了外部系统的 API。如果 API 提供的功能仅由单个 BC 使用，但有多个用例，则可以为该 BC 提供单个外观服务。另一种方法是为每个用例创建一个外观。这也很好，但就像我说的，第一种方法的技术凝聚力可能是有益的。

1a3) 在这种情况下，每个 BC 都会有一个立面。另一种选择是尝试共享一个外观。正如你所说，这将成为一个依赖混乱。

1a4) 是的。如果其他 BC 是不同应用程序的一部分，请创建特定于该 BC 的新外观，如 1a3 中所述。

1a5) 通常，功能[凝聚力](http://en.wikipedia.org/wiki/Cohesion_%28computer_science%29)优于技术或逻辑凝聚力。但是，通常，您将两者混合使用。技术凝聚力可以​​在较小的范围内方便。例如，您可以在外观中使用类似的序列化或翻译机制。在立面之间共享这些很方便，但不会以功能凝聚力为代价。因此，可以在单个 BC 内共享此类功能，但不能跨 BC 共享。

2b) ACL 是由服务组成的外观。是的，您的假设是一种可以接受的方法。这里的门面一词并不是指单个类，而是指组成反腐败层的一组类（服务）。它可能只有一个类，也可能是多个类。

3）是的，这就是作者所说的。

4) 这也在本书后面的章节中讨论。本地 BC 的不同之处可能在于开发它们的团队可以进行交流，从而调整他们的模型以满足对方的要求。对于外部 BC，这可能是不可能的。

**更新 2**

1a1) 术语“用例”旨在与“责任”互换。它们可能意味着一种或几种方法。

1a2) 我认为责任是一个更好的词。

V.) 外部系统当然只能提供单一功能。例如，您可以使用 3rd 方服务返回一种货币的汇率。它只有一种方法，并且 ACL 将到位，以管理不同系统中货币和汇率表示方式的差异。然而，在这种情况下，您并没有考虑凝聚力，因为您只有一个责任。

VI.) 不。它只是一种与手头领域一致的[凝聚力](http://en.wikipedia.org/wiki/Cohesion_%28computer_science%29)，而不是某些技术方面。

2b1）您将拥有一个实现域服务的类，该服务将外部 BC 公开给本地 BC。但是，这个类可以使用其他类，例如用于序列化或其他类。然而，这些类被“隐藏”在这个服务类后面。

2b2) ACL 服务构成了外观。这可能只是术语上的混淆。ACL 是一个门面。

2b3）您可以让一个服务公开这两个职责。这样你就可以轻松地共享一些代码——技术凝聚力。但是，您也可以将共享代码提取到可供两个不同服务使用的实用程序类中。我要说的是，第一种方法并不可怕，因为你仍然被限制在一个 BC 中。************************

# git - 如何从 git 存储库中的结构中分离内容？

> ID：14943171
> 
> 赞同：2
> 
> 时间：2013-02-18T18:41:32.747
> 
> 标签：git

我正在使用 ExpressJS 编写一个自定义博客站点，我想在 github 上开源博客系统。但是，我在项目的文件夹中有个人内容`content`，我希望能够将其作为子模块保存在它自己的私有仓库（在 bitbucket 上）中。我还将创建一个虚拟内容文件夹，它应该是主项目 repo 的一部分。

当我克隆或拉取项目存储库时，我希望工作副本包含我的内容存储库作为子模块。当其他人分叉或克隆项目 repo 时，我希望他们将虚拟内容作为项目 repo 的一部分，而不是分成子模块。

最简单的方法是什么？我还没有创建虚拟内容，对项目结构进行大的更改还为时不晚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T18:52:31.930

您描述的确切场景是不可能的，除非您为私有*代码*版本和代码的公共版本*使用*不同的存储库，这不是您想要的。我将描述两种选择，一种是在解决您的问题之前对解决方案进行某种程度的锤击，另一种是对我来说似乎更理智的一种，它是我们在 Web 开发项目中使用的一种。

1.  但是，您可以**使用您建议的目录结构**非常接近，但有一些（重大）限制：

    首先，`contents`按照您的建议，将内容移动到单独的存储库中。使用 rewrite 从 git 历史记录中清除内容（在 github 帮助或 SO 中搜索，有几种方法可以做到这一点。您甚至可以将历史记录导出到新的内容存储库中）。

    然后在代码存储库的目录中创建虚拟内容，`contents`并通过提交将它们添加到历史记录中。这是您现在推送到 github 的版本。

    在这一点上，我建议通过单独的克隆来拆分开发存储库和您的网站存储库。

    对于网站，您可以克隆存储库、`git rm`内容`contents`并安装另一个存储库的子模块。您将子模块提交到该存储库。请注意，包含虚拟内容更改的合并可能会变得很痛苦。不要推动这些变化。事实上，你*永远不会*从这个存储库推送。你只会拉。所有全局更改（即代码库）都在开发存储库中完成，您可以使用远程（github）存储库同步代码。

2.  **如果您准备好更改目录结构**，我只是建议将内容保留在代码存储库之外。无论如何，这是一个不错的选择，因为您通常不会将代码和内容保存在*一个*存储库中（您知道原因，还有其他原因）。特别是在 Web 开发中，将（服务器端）代码和（客户端）内容分开是明智的，甚至不让用户靠近代码（而不是将其保存在文档根目录中）。

    在这种情况下，情况变得微不足道，您可以将虚拟内容作为 github 上的单独存储库提供，可能在*自述*文件或类似文件中提及。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T18:47:22.503

将内容文件夹添加到您的 .gitignore。这将使 git 在提交时忽略此文件夹。如果您希望提交结构而不是文件，则可以将文件添加到 .gitignore 中。

以下是一些示例：[http ://www.kernel.org/pub/software/scm/git/docs/gitignore.html](http://www.kernel.org/pub/software/scm/git/docs/gitignore.html)

# php - 错误的javascript函数从静态php下拉列表中获取价值

> ID：14943172
> 
> 赞同：0
> 
> 时间：2013-02-18T18:41:32.957
> 
> 标签：php, javascript, combobox

我用 PHP 做了下拉菜单，效果很好。当所选项目发生变化时，我调用函数changePeriod()。

```
$options[0] = '--period--';
$options[1] = 'Daily';
$options[2] = 'Weekly';
$options[3] = 'Monthly';

<td><?php echo form_dropdown('period', $options, '0', 'id="period" onchange="changePeriod()"'); ?></td> 
```

在这里，您可以看到 HTML 源代码，它是上述代码的结果。

```
<td>
   <select name="period" id="period" onchange="changePeriod()">
      <option value="0" selected="selected">--period--</option>
      <option value="1">Daily</option>
      <option value="2">Weekly</option>
      <option value="3">Monthly</option>
   </select>
</td> 
```

在这个函数中，我需要获取所选项目的值，但开关上方的 2 个警报都给出了**Undefined**作为结果。有谁知道为什么我得到未定义而不是所选选项的值？它与一个动态下拉列表一起工作，该下拉列表中填充了来自数据库的 foreach。

```
function changePeriod() {
    alert(document.getElementById("period").selectedIndex);
    alert(document.getElementById("period").value);

    switch (document.getElementById("period").selectedIndex) {
        case 1:
            alert("daily");
            break;
        case 2:
            alert("weekly");
            break;
        case 3:
            alert("monthly");
            break;
    }
} 
```

**基本上：**为什么我不能获得所选选项的值，我该如何解决？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T18:57:45.803

生成的 HTML 是这样的：

```
<select onchange="changePeriod()" id="period">
        <option value="0">--period--</option>
        <option value="1">Daily</option>
        <option value="2">Weekly</option>
        <option value="3">Monthly</option>
    </select>
    <script type="text/javascript">
        function changePeriod(event) {
            alert(document.getElementById("period").selectedIndex);
            alert(document.getElementById("period").value);

            switch (document.getElementById("period").selectedIndex) {
                case 1:
                    alert("daily");
                    break;
                case 2:
                    alert("weekly");
                    break;
                case 3:
                    alert("monthly");
                    break;
            }
        }
    </script> 
```

如果是，它对我有用。

你为什么不使用 jquery，你可以用更少的代码做任何事情。

编辑：

jQuery的解决方案：

```
$("#period").change(function(){
   alert("The Value: "+$(this).val());
   switch ($(this).val()) {
            case 1:
                alert("daily");
                break;
            case 2:
                alert("weekly");
                break;
            case 3:
                alert("monthly");
                break;
        }
}); 
```

看看这里：http: [//jsfiddle.net/rfWjd/](http://jsfiddle.net/rfWjd/)

# ruby-on-rails - 我应该将会话代码存储在 Rails 应用程序的什么位置？

> ID：14943177
> 
> 赞同：0
> 
> 时间：2013-02-18T18:41:46.540
> 
> 标签：ruby-on-rails, model-view-controller, controller, ruby-on-rails-3.2, session-variables

在我正在创建的 Rails 应用程序中，我的控制器中有一些代码，我想知道它是否在正确的位置。该代码相当微不足道，它将 id 存储在一个数组中以显示“最近查看”的页面。大概3行代码，但我在想未来，如果这个功能扩展呢？我不希望我的控制器臃肿。

我可以制作一个模块，但在这种情况下，我应该将文件存储在哪里？控制器是进行会话管理的正确位置吗？对我的代码组织有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T20:08:00.827

如果它特定于控制器，请将其保存在控制器中。

如果它适用于所有控制器，则进入 ApplicationController。

如果它被某些控制器共享而不是其他控制器共享，则从继承自 ApplicationController 的控制器继承，或者使用包含/扩展或[制作扩展模块](http://api.rubyonrails.org/classes/ActiveSupport/Concern.html) `ActiveSupport::Concern`（这是 Rails 内部相当普遍使用的）。

并且最好把所有东西都保存在`app/controllers`或者某个子目录、子子目录等。Rails 自动加载依赖于路径来匹配模块命名空间，所以`A::B::C`属于`app/controllers/a/b/c.rb`. 不要像 Java 等那样深入。只要有你需要的目录/模块的数量来保持它的组织。

注意：虽然控制器在自己的模块中没有那么问题，但根据我的经验，您的模型应该保留在根目录中，例如`app/models`，否则您会遇到问题。

如果你能提供帮助，我也会避免在会话中存储太多。而是存储在数据库中（或长寿命 cookie，如果它是特定于浏览器环境的）。例如，如果有人注销并且他们正在查看一条记录，他们可能希望稍后重新登录并拥有一个包含指向该记录的链接的列表。

顺便说一句-您没有问，并且可能已经有了在会话中存储最近访问过的页面的代码，但这里有类似的问题/答案：

*   [https://stackoverflow.com/a/10813602/178651](https://stackoverflow.com/a/10813602/178651)
*   [http://www.rorexperts.com/how-to-store-visited-pages-in-session-object-in-rails-t941.html](http://www.rorexperts.com/how-to-store-visited-pages-in-session-object-in-rails-t941.html)

# c# - Elementhosted WPF-Mediaelement 不允许旋转

> ID：14943179
> 
> 赞同：1
> 
> 时间：2013-02-18T18:41:50.177
> 
> 标签：c#, rotation, mediaelement

我有一个 Windows 窗体应用程序。

我想在其中使用一个媒体元素，所以我使用了 elementhost。我创建了一个 wpf 用户控件，在其中放置了一个媒体元素。在我的应用程序中，我编写以下内容的目的是为了旋转元素。

```
System.Windows.Controls.MediaElement wm = new 
System.Windows.Controls.MediaElement();
wm.LayoutTransform.Value.Rotate(22.0);
elementHost1.Child = wm;
wm.Source = new Uri(dateiname);
wm.Play(); 
```

dateiname 是文件名。

它播放但它不旋转。如何旋转wm的视频？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-05-15T08:18:38.850

也许再晚一点。尝试这个：

```
 RotateTransform rt = new RotateTransform {Angle = 20.0};
        wm.LayoutTransform = rt; 
```

# java - “？扩展 E”和“T 扩展 E”有什么区别？

> ID：14943181
> 
> 赞同：3
> 
> 时间：2013-02-18T18:41:53.187
> 
> 标签：java, generics, collections, subtyping

我是 java 新手，我试图从 Java 泛型和集合一书中理解下面奇怪的语法。（我​​广泛使用 C++ 模板，因此可以声称了解泛型编程的基础知识和可能的陷阱）：

```
interface Collection <E> {
  ...
  public boolean addAll(Collection<? extends E> c);
  ...
} 
```

为什么上面不能写成：

```
interface Collection <E> {
  ...
  public boolean addAll(Collection<T extends E> c);
  ...
} 
```

有什么不同？仅仅是语言限制还是引擎盖下有什么区别？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-18T18:43:30.293

它可以写成

```
 public <T extends E> boolean addAll(Collection<T> c) 
```

但没有意义。无需命名该参数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T18:44:58.870

如果该方法返回 T 类型的东西，那将是有意义的。然后您可以匹配这两种类型。但是因为它只是返回一个布尔值，所以你不需要这样做。那么就不需要设置名称 T 了，它仍然只是一个问号。

假设 addAll 需要一个过滤器：

```
public <T extends E> boolean addAll(Collection<T> c, Predicate<T> aFilter); 
```

现在您知道 Predicate 有一个泛型类型，可以对集合 c 进行操作。

# loops - 将 Int 转换为 Bool

> ID：14943185
> 
> 赞同：1
> 
> 时间：2013-02-18T18:42:04.987
> 
> 标签：loops, while-loop

我在创建一个循环来检查变量 10 和 50 之间是否有 5 个变量时遇到问题。我相信我已经设置了正确的编码，但是我收到一个错误，说我无法将 int 转换为 bool。这是我目前拥有的：

```
 string userName = "";
        int v1, v2, v3, v4, v5 = 0;
        float avg;
        float variance;

        Console.WriteLine("What is your name?");
        userName = Console.ReadLine();

        Console.WriteLine();

        int i = 1;

        while (i <= 5)
        {
            int InputCheck = 0;
            Console.WriteLine("Please input a number {0} between 10 and 50;", i);
            InputCheck = Convert.ToInt32(Console.ReadLine());

            if (InputCheck >= 10 && InputCheck <= 50) 
            {

                if (i >= 10 && i <= 50)
                    i++;
                if (i != 1)
                {
                    InputCheck = v1;
                }
                if (i != 2)
                {
                    InputCheck = v2;
                }

                if (i == 3)
                {
                    InputCheck = v3;
                }
                if (i == 4)
                {
                    InputCheck = v4;
                }
                if (i == 5)
                {
                    InputCheck = v5;
                }
                if (InputCheck < 10 || InputCheck > 50)
                {
                    Console.WriteLine("The number you entered is either to high or to low please re-enter a number:");
                }
            } 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T19:51:32.933

我不是 100% 确定，但我认为你的**错误**来自这一行：

```
Console.WriteLine("Please input a number {0} between 10 and 50;", i); 
```

您正在给出一个**int** 'i'，它需要一个布尔值。也许这会有所帮助： http: [//msdn.microsoft.com/en-us/library/70x4wcx1.aspx ?cs-save-lang=1&cs-lang=vb#code-snippet-2](http://msdn.microsoft.com/en-us/library/70x4wcx1.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-2)

**至于您的其余代码：**

*   Calamar888 是正确的，您用于 'i' 的第一个 if 语句永远不会评估为 true。
*   此外，后面的 if（if(i !=1) 等）将多次评估为 true，覆盖您已经保存的值（当 i = 2、3、4 或 5 时，i != 1）。
*   在这些 if 语句中，您正在**更改**“InputCheck”的值，**而不是保存它**。
*   您应该考虑使用数组来缩短程序
*   你的 else "if (InputCheck < 10 || InputCheck > 50)" 不应该在第一个 if 里面，它永远不会是真的

假设您声明：

```
int v[5]; /* creates array v[0], v[1], ... v[4] */
int i = 0;

while (i<=4){
 /* internal code */
} 
```

像这样的东西应该工作：

```
/* internal code */

    if (InputCheck >= 10 && InputCheck <= 50) 
        {
           v[i] = InputCheck;   
           i++;

        }
    else if (InputCheck < 10 || InputCheck > 50)
        {
           Console.WriteLine("The number you entered is either to high or to low please re-enter a number:");
        } 
```

# python - 如何匹配同一数据集的 lomb-scargle 和 FFT 图？

> ID：14943189
> 
> 赞同：2
> 
> 时间：2013-02-18T18:42:10.237
> 
> 标签：python, fft, units-of-measurement, psd

我正在做一些工作，将一段时间内某些气体浓度的插值 fft 与相同数据的 lomb-scargle 周期图进行比较，其中采样不均匀。我正在使用 scipy 的 fft 函数来计算傅立叶变换，然后对它的模进行平方，以给出我认为的功率谱密度，以十亿分率（ppb）平方为单位。

我可以得到 lomb-scargle 图几乎与 FFT 的精确模式匹配，但幅度不同，FFT 功率谱密度总是更高，即使我认为 lomb-scargle 功率是功率谱密度。现在我正在使用的 lomb 代码：[http](http://www.astropython.org/snippet/2010/9/Fast-Lomb-Scargle-algorithm) ://www.astropython.org/snippet/2010/9/Fast-Lomb-Scargle-algorithm将数据集归一化，去掉平均值并除以数据方差的 2 倍，因此我以相同的方式对 FFT 数据进行了归一化，但幅度仍然不匹配。

因此，我做了更多的研究，发现归一化的 lomb-scargle 功率可以没有单位，因此我无法匹配。这让我想到了两个问题：

1.  归一化 lim-scargle perioogram 的功率谱密度是什么单位（如果有）？

2.  在幅度和模式方面，我将如何继续将我的 fft 图与我的 lomb-scargle 图相匹配？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T19:52:19.227

一系列傅里叶变换的平方模被定义为***能谱密度***(ESD)。您需要将 ESD 除以系列的长度，以转换为***功率谱密度***(PSD) 的估计值。

## 单位

PSD 的单位是 [units]**2/[frequency]，其中 [units] 代表原始系列的单位。

## 正常化

为了检查正确的归一化，可以对白噪声（具有已知方差）的 PSD 进行数值积分。如果积分谱等于序列的方差，则归一化是正确的。但是，因子 2（太低）并不是不正确的，并且可能表明 PSD 被归一化为*双面*；在这种情况下，只需乘以 2，您就有了一个适当归一化的单面 PSD。

使用 numpy，[randn](http://docs.scipy.org/doc/numpy-1.7.0/reference/generated/numpy.random.randn.html "兰登")函数生成高斯分布的伪随机数。例如

```
10 * np.random.randn(1, 100) 
```

生成一个 1×100 数组，均值 = 0，方差 = 100。如果采样频率为 1-Hz，则*单面*PSD 理论上将在 200 个单位**2/Hz 处持平，从 [0,0.5] Hz 开始；因此，积分频谱将为 10，等于系列的方差。

*更新*

我修改了您链接的 python 代码中包含的示例，以演示长度为 20、方差为 1、采样频率为 10 的正态分布系列的标准化：

```
import numpy
import lomb
numpy.random.seed(999)
nd = 20
fs = 10
x = numpy.arange(nd)
y = numpy.random.randn(nd)
fx, fy, nout, jmax, prob = lomb.fasper(x, y, 1., fs)
fNy = fx[-1]
fy = fy/fs
Si = numpy.mean(fy)*fNy
print fNy, Si, Si*2 
```

这给了我：

```
5.26315789474 0.482185882163 0.964371764327 
```

这向您展示了一些事情：

1.  要求的“奈奎斯特”频率实际上是采样频率。
2.  结果需要除以采样频率。
3.  输出是针对双面 PSD 进行归一化的，因此乘以 2 会使积分频谱接近 1。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-09T19:36:29.677

自从提出并回答了这个问题以来，AstroPy 项目已经获得了 Lomb-Scargle 方法，这个问题在文档中得到了解决：http: [//docs.astropy.org/en/stable/stats/lombscargle.html #psd-规范化-非规范化](http://docs.astropy.org/en/stable/stats/lombscargle.html#psd-normalization-unnormalized)

简而言之，您可以计算傅立叶周期图并将其与 astropy Lomb-Scargle 周期图进行比较，如下所示

```
import numpy as np
from astropy.stats import LombScargle

def fourier_periodogram(t, y):
    N = len(t)
    frequency = np.fft.fftfreq(N, t[1] - t[0])
    y_fft = np.fft.fft(y)
    positive = (frequency > 0)
    return frequency[positive], (1\. / N) * abs(y_fft[positive]) ** 2

t = np.arange(100)
y = np.random.randn(100)
frequency, PSD_fourier = fourier_periodogram(t, y)
PSD_LS = LombScargle(t, y).power(frequency, normalization='psd')

np.allclose(PSD_fourier, PSD_LS)
# True 
```

由于 AstroPy 是天文学中常用的工具，我认为这可能比基于上述代码片段的答案更有用。

# vim - 重新加载 vimrc 会导致不同的语法高亮

> ID：14943190
> 
> 赞同：7
> 
> 时间：2013-02-18T18:42:17.107
> 
> 标签：vim

当我在 macvim 中打开一个文件时，它就像这样[http://imgur.com/a/3cLqB#0](http://imgur.com/a/3cLqB#0)。我已经设置`,V`为`:source ~/.vimrc<CR>`.

打开此文件后，我按`,V`，语法突出显示更改为[http://imgur.com/a/3cLqB#1](http://imgur.com/a/3cLqB#1)。不同之处在于`(`, `)`,由蓝色、白色变为 , , `;`,由蓝色变为深蓝色。为什么会这样？这是我的 vimrc 文件[https://gist.github.com/pvinis/4979592](https://gist.github.com/pvinis/4979592)`,``->``.``?`

--
更新：我发现那`Valloric/vim-operator-highlight`是改变颜色的插件。所以第一张图片是正确的图片。我还发现，一旦我这样做`:syntax on`，颜色就会重置。有没有办法检查语法是否已经启用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-02-10T17:43:06.350

# 问题：

重新加载时`.vimrc`，一些亮点组被搞砸了。这取决于您拥有的插件以及您使用的配色方案。我注意到有些`highlight links`坏了，有些`highlight groups`被清除了。

### 受影响的亮点组

在我的特定设置中，我注意到损坏`hi links`或清除`groups`：

*   `SignColumn`
*   [`GitGutter`](https://github.com/airblade/vim-gitgutter)（使用`SignColumn`）
*   [`powerline-status`](https://github.com/airblade/vim-gitgutter)（使用状态行）

**重新加载后注意受影响的区域：（**
重新加载意味着保存修改的文件。`:wa`在本例中使用） [![重装乱码！](../Images/e0b81f784df93d05a5e1393a3087b6d1.png)](https://github.com/airblade/vim-gitgutter)

# 解决方案

不幸的是，我尝试过的列出的答案或任何选项组合不会`hi`在重新加载后保留或恢复组。重新加载后手动运行可以`colorscheme <your-coloscheme>`修复所有问题，但使用`Vimscript`它时不会。
希望有人会分享这个烦人的小问题的正确解决方案。

# 丑陋的黑客

## 重新加载 vimrc：

在对我的 vim 配置文件进行任何更改时，我都会执行`reload.vim`：
**.vimrc：**

```
" .....
augroup reload_vimrc " {
    autocmd!
    autocmd BufWritePost ~/.vim/*.vim,~/.vim/vimrc source ~/.vim/reload.vim
augroup END " } 
```

## `reload.vim`：恢复断开的链接和清除的组

我们要做的是`hi`在采购后恢复组`vimrc`。
要找到受影响区域的正确值，例如对于`SignColumn`，请键入：
`:hi SignColumn`，在发生任何重新加载*之前。*

**结果是（`xxx`预览在哪里）：** [![hl 标志栏](../Images/c229ed2713d1b2ea46f6c7e8a250fa92.png)](https://i.stack.imgur.com/PUxGg.png)

您必须为每个受影响的`hi`.
在以下片段中，我最初修复`SignColumn`以匹配我的`solarized`颜色方案。
然后我修复了一些`GitGutter`颜色问题：
例如，`GitGutterAdd`链接到`GitGutterAddDefault`哪个被保留，但从`GitGutterAddDefault`到`DiffAdd`被破坏，所以我重新安装那个。依此类推。

**重载.vim：**

```
source ~/.vim/vimrc

hi SignColumn ctermfg=12 ctermbg=0 guifg=Cyan guibg=Grey

" GitGutterAdd -> GitGutterAddDefault (preserved)
hi link GitGutterAddDefault DiffAdd

" GitGutterChange -> GitGutterChangeDefault (preserved)
hi GitGutterChangeDefault ctermfg=3 ctermbg=0 guifg=#bbbb00

" GitGutterDelete -> GitGutterDeleteDefault (preserved)
hi GitGutterDeleteDefault ctermfg=1 ctermbg=0 guifg=#ff2222

" GitGutterChangeDelete -> GitGutterChangeDefault (preserved)
" (which we already fixed above)

" Powerline highlight groups
" (see this attached Gist for solution) 
```

**一切正常：** [![修复喜组和链接](../Images/9bad1443d9276f05ac32821ea845b89b.png)](https://gist.github.com/Paschalis/c3eaafe83893cddd2b0c04aab9559b69)

## 固定[`powerline-status`](https://github.com/airblade/vim-gitgutter)颜色：

这个有点棘手，但原理是一样的。`powerline`所有以开头的高亮组`Pl_`。但其中一些可能还不存在。例如，如果您还没有进入`visual`模式，那么视觉模式的相应组将不会被填充。因此，输入`insert`、`visual`和`normal`模式来填充组，然后复制它们。`hl`您可以在命令输出的底部找到它们。然后，将它们粘贴到您的文件中`reload.vim`并将它们调整为合法`hl`命令。

这听起来像是很多工作，但事实并非如此。这是一个完整的[要点](https://gist.github.com/Paschalis/c3eaafe83893cddd2b0c04aab9559b69)`reload.vim`，以及一些`gifs`指导您完成的要点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-17T18:22:53.123

我遇到了与这种情况非常相似的事情。我能够通过确保这些顺序正确来解决它：

```
syntax on
let g:solarized_termtrans=1
let g:solarized_termcolors=256
set background=dark
colorscheme solarized 
```

我也用它来重新加载

```
augroup reload_vimrc
autocmd!
autocmd BufWritePost $MYVIMRC source $MYVIMRC
augroup END 
```

有了这两个，我可以实时更新我的​​ vimrc 而无需重新加载。我正在将 iTerm2 与终端 vim 一起使用。希望这可以帮助其他人，因为我花了很多时间试图让这个实时重新加载工作。还要确保您拥有最新版本的日光主题。我知道提起来似乎很平凡，但它可能会有所作为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-04T18:25:23.140

这对我有用

```
"auto reload vimrc once changed
if has("autocmd")
  autocmd! BufWritePost .vimrc source $MYVIMRC

  " This fixes the color changes and things not working :D
  autocmd! BufWritePost .vimrc filetype plugin indent on
endif 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-19T08:10:13.920

我想突出显示是由某些插件定义/更改的。重新执行会`:colorscheme`重置这些定义。插件必须使用 连接到`ColorScheme`事件中`:autocmd`，但大多数都不需要。

要解决此问题，请尝试将其包裹`:colorscheme`在警卫中：

```
if ! exists('g:colors_name') || g:colors_name !=# 'Tomorrow-Night-Eighties'
    colorscheme Tomorrow-Night-Eighties
endif 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-11-27T14:11:50.180

`autocmd BufWritePost *vimrc,*exrc :call feedkeys(":source %\<cr>")`

马上给我修好了。订购时一定有一些奇怪的问题。我也有一个按键来资源文件，即使 autocmd 失败，这也*总是有效。*

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-02-13T10:23:06.840

我完全不知道为什么，（可能出于与`:source ~/.vimrc`手动操作相同的原因）但对我来说更换

```
autocmd BufWritePost *vimrc,*exrc :source % 
```

和

```
autocmd BufWritePost *vimrc,*exrc :call feedkeys(":source %\<cr>") 
```

解决了这个问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-10-21T17:12:43.903

很可能与您的特定情况无关，但我遇到了类似的问题，所以我想我会分享，因为这是 Google 上的第一个 StackOverflow 结果。

我的重新加载问题分为两个阶段：使用深色 Solarized 主题，重新加载`.vimrc`首先会稍微改变颜色，然后第二次重新加载，它会切换到浅色 Solarized 主题。

我的关于颜色的行`.vimrc`是：

```
set background="dark"
let g:solarize_termcolors=256
colorscheme solarized 
```

问题？第一行不应该有引号：

```
set background=dark 
```

我现在可以`.vimrc`在不改变颜色的情况下重新加载。我不确定为什么它会工作一次，但之后会以不同的方式工作。我意识到，在注释掉除其他人建议的这些行之外的所有内容之后。

# wcf - 在 WCF 中为复杂类型使用 DataContract

> ID：14943193
> 
> 赞同：0
> 
> 时间：2013-02-18T18:42:26.623
> 
> 标签：wcf

```
[Operation Contract]
public ET Get_ET()
{
   return  ET_Select();  //ET_Select()  returns a complex type
}

[Data Contract]
public class ET
{
    [Data Member]
    public int PIN {get;set;}

    [Data Member]
    public int Name {get;set;}
} 
```

在上面的示例代码中，ET_Select() 存储过程返回复杂类型。但我想将其转换为“ET”，这是一个数据合同。请指导我如何在复杂类型的情况下使用数据合约。

提前致谢。

# c# - 有没有办法使用 MD5 通过 DirectoryServices 对 LDAP 进行身份验证？

> ID：14943195
> 
> 赞同：1
> 
> 时间：2013-02-18T18:42:31.407
> 
> 标签：c#, ldap, md5, directoryentry

我正在使用 VS 2012、C#.NET 并创建一个表单来通过 LDAP 进行身份验证。

我有这段代码，它运行良好：

```
root = new DirectoryEntry(
                "LDAP://192.168.116.20:389",
                username,
                password
            ); 
```

用户名和密码都是纯文本。

但我想创建一个“记住密码？” 复选框，我可以将用户名和密码 md5-hashed 保存在文件中。

那么，如何使用带有 DirectoryEntry 和 LDAP 的 md5-hash 进行身份验证？！是否可以？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T19:12:51.693

我不这么认为，LDAP 是一种协议，它适用于 LM / NT 哈希，分别是 DES 和 MD4，但这是较低级别的。您可能想要做的是加密密码，保存它，然后解密它并将其传递给 LDAP 字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T11:39:21.390

> 我不这么认为，LDAP 是一种协议，它适用于 LM / NT 哈希，分别是 DES 和 MD4，但这是较低级别的。

LDAP 是一种协议，但 LDAP 不使用 LM / NT 哈希。

在 LDAP 中，LM/NT/Kerboros 和 md5-hash 可以通过LDAP 中的[SASL](http://en.wikipedia.org/wiki/Simple_Authentication_and_Security_Layer)完成，但前提是 LDAP 客户端和 LDAP 服务器具有使用 SASL 的能力。

快速查看（我认为 wk3 服务器）显示了 ROOTDSE：supportedSASLMechanisms：DIGEST-MD5 supportedSASLMechanisms：EXTERNAL supportedSASLMechanisms：GSS-SPNEGO supportedSASLMechanisms：GSSAPI

这意味着 AD 支持 DIGEST-MD5。我不知道目录服务 API 是否支持此功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-20T09:14:35.450

如果您选择将数据加密为文件，则应使用**System.Security.ProtectedData**类。

您加密的数据可以绑定到当前用户或正在进行编码/解码的当前机器。

您应该使用两种简单的方法：

*   Protect - 获取一个字节数组并加密数据。
*   Unprotect - 获取加密数据并返回一个字节数组。

例子：

```
private static void EncryptData(string data, Stream stream)
{
    if (stream.CanWrite == false)
            throw new IOException("Cannot write to stream.");
    var bytes = Encoding.UTF8.GetBytes(data);
    var encryptedBytes = ProtectedData.Protect(bytes, null, DataProtectionScope.CurrentUser);
    stream.Write(encryptedBytes , 0, encryptedBytes .Length);
}

private static string DecryptData(Stream stream)
{
    if (stream.CanRead == false)
            throw new IOException("Cannot read fromstream.");

    using (MemoryStream memoryStream = new MemoryStream())
    {
        stream.CopyTo(memoryStream);
        var encryptedBytes = memoryStream.ToArray();
        var decryptedBytes = ProtectedData.Unprotect(encryptedBytes, null, DataProtectionScope.CurrentUser)
        return Encoding.UTF8.GetString(decryptedBytes);
    }
} 
```

现在为了简单地将它们与 FileStream 一起使用：

```
public static void Encrypt(string password)
{
    using (var fileStream = new FileStream(@"MyFile.dat", FileMode.Create))
    {
        EncryptData(password, fileStream);
        fileStream.Close();
    }
}

public static string Decrypt()
{
    string password;
    using (var fileStream = new FileStream(@"MyFile.dat", FileMode.Open))
    {
        password = DecryptData(fileStream);
        fileStream.Close();
    }
    return password;
} 
```

顺便说一句，如果您想增加加密的复杂性，您可以将熵传递给 Protect 和 Unprotect 方法。有关详细信息，请参阅：http: [//msdn.microsoft.com/en-us/library/system.security.cryptography.protecteddata.protect (v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/system.security.cryptography.protecteddata.protect(v=vs.110).aspx)

# php - php mysql使用输入选项查询多个更新行

> ID：14943196
> 
> 赞同：0
> 
> 时间：2013-02-18T18:42:32.547
> 
> 标签：php, mysql, rows, option

```
 <form method="post" action="">
        &nbsp;  &nbsp;<input id="bfolder" name="movefolder" type="submit" value="Move to folder:"><br><br>
        </form>

      $userfile = $user_data['username'];

      $sql2 = mysql_query("SELECT `id`, `username`, LEFT(`title`, 15) as `title`, LEFT(`description`, 40) as `description`, `folder_name`, `file`, `code`, `type`, `size`, `date` FROM `files` WHERE `username` = '$userfile' AND `folder_name` = '' ORDER BY id DESC $limit"); 

        while ($query_row = mysql_fetch_array($sql2)) {
            $fileuser = $query_row['username'];
            $filetitle = $query_row['title'];
            $filecode = $query_row['code'];
            $filedesc = $query_row['description'];
            $filefile = $query_row['file'];
            $filesize = $query_row['size'];
            $filedate = $query_row['date'];
            $filetype = $query_row['type'];

        if (in_array($filetype, $allowed_image) === true) {
        if (empty($filetype) === false) {
            if (strlen($filetitle) < 15) {
                    echo "<div id='imageshowsearch'><span id='linkstylerename'><a href='http://localhost/edu/1111111111111/filerename.php?rename=". $filecode . "'>Edit</a></span><span id='deletefile'><a href='http://localhost/edu/1111111111111/delete_image.php?deletefile=". $filecode . "'>X</a></span><div id='linkstyle'><strong><a href='http://localhost/edu/1111111111111/userdownload.php?code=". $filecode . " '><img src='files/thumbs/" . $filecode . "/" . $filefile . "' alt=" . $filetitle . ">" . $filetitle . "</strong></div></a>";
                    ?>
        <select name="folder_option" class="select_folder">
        <option>Choose a folder:</option>
    <?php  
    $mysql_folder = mysql_query("SELECT `folder_name`, `code` FROM `files` WHERE `username` = '$userfile' AND `folder_name` > '' GROUP BY `folder_name` ORDER BY `folder_name` ASC"); 

    while ($query_row = mysql_fetch_array($mysql_folder)) {
            $filefolder = $query_row['folder_name'];
            $filecode = $query_row['code'];
            echo '<option value="' . $filecode . '">' . $filefolder . '</option>';
            }

            if (isset($_POST['movefolder'])) {
                foreach ($query_row as $key) {
                mysql_query("UPDATE `files` SET `folder_name` = " . $_POST['folder_name'] . " WHERE `username` = '$userfile' AND `code` = '$filecode'");

               //these query not update selected 'folder_name' in database for each file 
                }
            }

    ?>
        </select> 
```

在一页中，我有 10 张带有名称的图片，并在 while 循环中从 mysql 数据库中选择了“folder_name”选项。我必须使用选定的选项“文件夹名称”更新 mysql 数据库。这些图片没有文件夹名称，但必须有这些选项来选择文件夹和更新数据库中的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T18:50:41.123

如果要引用，则需要更改`<select name="folder_option" class="select_folder">`为.`<select name="folder_name" class="select_folder">``$_POST['folder_name']`

更重要的是，您的 SQL 容易受到 XSS 攻击。`$_POST`在引用 SQL 中的任何值之前，您绝对需要清除您的值。这些`mysql_*`功能都已被弃用。我建议您立即使用[PDO](http://www.php.net/manual/en/ref.pdo-mysql.php)。

# linux - 用户可编辑的回显文本

> ID：14943199
> 
> 赞同：3
> 
> 时间：2013-02-18T18:42:39.887
> 
> 标签：linux, bash, shell, unix

是否可以通过用户可编辑的 bash 脚本将文本输出到 shell 窗口？我基本上想预先填写某些信息，并让用户能够在错误时对其进行编辑。

例如，如果我要写一个脚本：

```
echo -n "Enter your name: Anthony"

while read user_input
do
    # do stuff with $user_input
done 
```

如何允许用户`Anthony` *仅*内联编辑单词（也就是不允许在 in 之后退格`A`）`Anthony`，以及如何在`RETURN`按下键后将值存储到变量中？

***编辑***

我正在寻找类似于（[请参阅此处发布的答案](https://stackoverflow.com/a/5987314/969967)`-i`）的选项，但这仅在 bash 4+ 上可用。bash 3 有替代方案吗？`read`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T20:28:58.760

我最近需要类似的设置，所以我所做的是

```
$ cat a.sh
function input {
  python -c '
import sys,readline
readline.set_startup_hook(lambda: readline.insert_text(sys.argv[2]))
sys.stderr.write(raw_input(sys.argv[1]))
' "$@" 3>&1 1>&2 2>&3
}

A=$( input 'question: ' default )
echo "A='$A'"

$ ./a.sh
question: default
A='default' 
```

好吧，它实际上不是 bash，但它完成了工作。

# php - 如何将 php 文件包含到 wordpress 主题（index.php）

> ID：14943205
> 
> 赞同：0
> 
> 时间：2013-02-18T18:43:05.963
> 
> 标签：php, wordpress, include

我想将 cars.php 文件包含到 index.php 主题中；car.php 文件是脚本，它从服务器加载数据并用作预订系统，当我尝试照常连接时`include('/.cars.php');`，并在浏览器中检查源代码，它在那里，但没有出现任何表单。

可能是wordpress引擎本身的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T18:46:29.037

我认为您可能有`include('/.cars.php');`错字`include('./cars.php');`

您现在所拥有的将在根目录中查找名为`.cars.php`

# ios - 带有放大过滤器的 UIView 屏幕截图

> ID：14943206
> 
> 赞同：1
> 
> 时间：2013-02-18T18:43:11.277
> 
> 标签：ios

我有一个小的 qrcode UIImage 设置为一个大的 UIImageView。为了避免放大时从黑色到白色的任何渐变，我将 UIImageView 放大滤镜设置为 kCAFilterNearest，如下所示（有效）：

```
[QRCodeImageView layer].magnificationFilter = kCAFilterNearest; 
```

现在我需要从这个 ImageView 中截取屏幕截图，但结果图像忽略了放大过滤器：

![截图问题](../Images/fe786a90eccf5799ab8d597cd4998d8b.png)

这是我的截图代码：

```
UIGraphicsBeginImageContextWithOptions(CGSizeMake(QRCodeImageView.frame.size.width, QRCodeImageView.frame.size.height),YES, 2.0f);

CGContextRef context = UIGraphicsGetCurrentContext();
[QRCodeImageView.layer renderInContext:context];

UIImage *capturedImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

所以，问题是，如何在给定放大过滤器的上下文中渲染？

提前致谢

# ruby-on-rails - Rails 默认的 restful 资源代码背后的逻辑是什么？

> ID：14943210
> 
> 赞同：0
> 
> 时间：2013-02-18T18:43:19.017
> 
> 标签：ruby-on-rails, architecture, routing, naming-conventions

我正在学习 Rails。许多约定很有意义。映射到控制器操作的代码约定很奇怪：

```
//code                  url               controller action
tweets_path             /tweets/          def index
tweet                   /tweet/ID         def show
new_tweet_path          /tweets/new       def new
edit_tweet_path(tweet)  /tweets/ID/edit   def edit 
```

为什么自动生成的方法助手不以与控制器操作相同的对称方式完成？例如：

```
//code
tweet_index
tweet_show(tweet)
tweet_new
tweet_edit(tweet) 
```

我很新，我敢肯定有一个很好的理由，我只是还不知道:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T19:41:31.890

这里有两个不对称。

第一个是复数与单数路由助手。为什么有些帮手`tweets_*`是帮手，而有些是`tweet_*`帮手？

答案是有些资源路由是*成员*路由，有些是*集合*路由。成员路由与资源的一个实例有关，而收集路由与作为一个组的资源的所有实例有关（除非资源是单一的，在这种情况下没有收集路由）。index 动作是一个*集合*路由，而 show 动作是一个*成员*路由。

您可以像这样声明自己的成员和集合路由：

```
# routes.rb
resources :tweets do
  member do
    get :duplicate
  end
  collection do
    get :summarize
  end
end 
```

除了标准的助手之外，这将创建两个助手。请注意，Rails 将创建适当的单数或复数路由助手。

1.  `summarize_tweets_path`不带参数的助手
2.  一个`duplicate_tweet_path`帮手

官方文档在[这里](http://guides.rubyonrails.org/routing.html#adding-more-restful-actions)。

第二个不对称是对于许多内置资源操作，该操作被排除在帮助程序之外。我想这可能是为了简洁，但我真的不知道。

**编辑**

想了想，因为 Rails 和 REST 中存在路径重载，所以去掉了 action 名称。'/tweet/:id' 路径可以是显示、更新或删除操作，具体取决于 HTTP 动词。基本上，路径告诉您您正在操作什么，但不告诉您要采取什么行动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T20:01:00.457

辅助方法的生成方式使它们更像句子的一部分，从而使它们更具可读性。说“创建指向新推文的链接”听起来比“创建指向新推文的链接”更好。在命名任何自定义动作时也有助于记住这一点，使用适合句子的名称可以更容易理解和记住，因为这是我们学习说话的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T18:49:45.143

它不对称的一个原因是映射取决于 HTTP 操作。例如，到 /tweets 的 GET 映射到 index 操作，但到 /tweets 的 POST 映射到 create 操作。

# asp.net-mvc - IIS 8 Express 不提供页面

> ID：14943211
> 
> 赞同：4
> 
> 时间：2013-02-18T18:43:21.277
> 
> 标签：asp.net-mvc, asp.net-mvc-4, visual-studio-2012, iis-express, iis-8

当我使用**IIS8 Express**调试/运行我的网站时，**IE**会启动，然后等待，什么也没有发生，白页带有忙碌的鼠标指针。

这个问题突然出现了（**Windows 7**和**Visual Studio 2010**）。我决定重新安装我的电脑，现在使用**Windows 8**并且只有**Visual Studio 2012**，我遇到了同样的问题！？

运行具有跟踪级别的**IIS Express （64 位）它可以工作，并且没有报告错误，但是如果我使用 32 位（和来自****Visual Studio** ）运行 Web，它似乎不起作用。我已经使用**MVC4**项目和 ASP.NET Forms (Episerver) 进行了测试，但是后者在 64 位运行时存在一些问题（因为它具有需要为 32 位的依赖项）。

我的同事有相同的代码，对他们来说**IIS8 Express**工作，一定是我的安装？

我已经测试过重新安装**IIS8 Express**（和我的电脑 =））没有运气。

**更新**：我尝试过运行**IIS 8**（不是 express）并且它可以工作。
对于**MVC**项目，它似乎是“导致”挂起的信号器（删除`RouteTable.Routes.MapHubs`使站点工作）。我尝试创建一个新的**MVC**和**ASP.NET**项目，它们都可以工作。所以问题似乎出在我的“旧”项目周围。在我的笔记本电脑上运行 mu 旧项目一切正常。

它开始让我发疯

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-18T21:48:19.820

我在 IIS express 8.0 下的 localhost 上运行我的 asp.net MVC4 项目时遇到了类似的问题。每当我按 Ctrl F5 刷新 js 文件更改时，每个 js 文件都需要 4 到 5 秒才能加载。事实证明，IIS Exp 8.0 在提供 js 文件时非常慢。我最终卸载了 IIS 8.0 并安装了 IIS express 7.5，问题立即得到解决。以下是我遵循的步骤：

*   卸载 IIS Express 8.0
*   删除我的文档\IISExpress 文件夹
*   安装 IIS Express 7.5（[链接到 IIS Express 7.5 下载](http://www.microsoft.com/en-us/download/details.aspx?id=1038)）

IIS Express 8.0 似乎与 VS 2012 一起安装，因此如果您有新安装或可能有服务包更新，这可能会升级您以前的 IIS express 版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T16:32:58.920

吉米，

IIS Express 已向 Microsoft 提交了多个错误报告。就个人而言，我现在在 IIS Express 中工作没有问题，但是在升级 VS 2010 SP1 或 VS 2012 后，人们普遍抱怨 IIS Express 挂起。

这不完全是你的情况，但请阅读

*   [http://social.msdn.microsoft.com/Forums/en-US/vsdebug/thread/3917b164-2acf-4bec-8a0c-295aeaa5c198/](http://social.msdn.microsoft.com/Forums/en-US/vsdebug/thread/3917b164-2acf-4bec-8a0c-295aeaa5c198/)
*   [将 IIS Express 与 Visual Studio 2010 SP1 一起使用时出现问题](https://stackoverflow.com/questions/6666198/problem-using-iis-express-with-visual-studio-2010-sp1)
*   [调试多个网站时 Visual Studio 2010 iis express 冻结](https://stackoverflow.com/questions/6836744/visual-studio-2010-iis-express-freezes-when-debugging-multiple-websites)
*   [iis express 挂起](https://stackoverflow.com/questions/14114819/iis-express-hangs)

我们已经确定您目前可以使用 Cassini 和 IIS 8。这可能是一个逃避，但你是对的，它依赖于项目（我以前见过这个），在你的情况下，你可能会更好地生活并继续前进。

# c# - 将受约束的泛型类型传递给非泛型方法

> ID：14943216
> 
> 赞同：1
> 
> 时间：2013-02-18T18:43:35.500
> 
> 标签：c#, generics, .net-4.0, casting

为什么我不能传递此类的实例...

```
class Item<T> where T : Thing { } 
```

...进入这个方法：

```
void DoSomething(Item<Thing> item); 
```

由于我被限制`Item<T>`为`Item<Thing>`，因此在将我的项目发送到之前应该是安全的`DoSomething`- 但为什么框架不处理这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T19:13:17.400

假设你有一堂课：

```
public class SomeOtherThing : Thing { } 
```

`Item<SomeOtherThing>`不能*将*An强制转换为`Item<Thing>`。他们不一样。

让我们暂时假设该项目看起来像这样：

```
public class Item<T>
{
    public T Value { get; set; }
} 
```

`DoSomething`然后可能会做类似的事情：

```
void DoSomething(Item<Thing> item)
{
    item.Value = new Thing();
} 
```

如果您传入一个`Item<SomeOtherThing>`to，`DoSomething`您现在刚刚分配了一个新`Thing`to `Value`，**但 value 是 type 的属性`SomeOtherThing`，您不能`Thing`为其设置对象**。这会破坏类型系统。编译器知道这是一个选项。因此（以及任何数量的具有相同基本问题的其他操作） a`Item<SomeOtherThing>`不能转换为 a `Item<Thing>`。

所以，你可以做什么？

好吧，如果您控制 的定义`DoSomething`，也许它也应该是通用的。

如果`DoSomething`看起来像这样：

```
void DoSomething<T>(Item<T> item)
    where T : Thing
{    } 
```

然后你可以用 a 调用它，`Item<SomeOtherThing>`因为以前会导致问题的操作在 内部不再有效`DoSomething`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T18:48:21.763

想象

```
class Derived : Thing {} 
```

`Item<Derived>`不可分配`Item<Thing>`给。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T19:19:02.893

您遇到的问题是您的方法特定于`Item<Thing>`，并且`Item<Something>`不是有效的参数。C# 不支持泛型类协方差。你有几个选择。

“最简单”的事情是简单地使您的方法通用并为 Thing 添加一个约束。这将是第一个建议的方法。

```
void DoSomething<T>(Item<T> item) where T : Thing
{
} 
```

这将授予您访问所有`Thing`适用的成员的权限，同时仍然有一个可以满足所有子类的方法。

另一个有更多限制的选择是有一个非泛型基础，`Item<Thing>`即简单的`Item`. （在其中，无论您先前暴露 T，您都会暴露`object`. 想想`IEnumerable<T>`：: `IEnumerable`。）

```
void DoSomething(Item item)
{
} 
```

您的方法只是期望`Item`并且您可以使用它。但是，如果您有特定的要求`Thing`，它会更微妙，您需要适当地进行转换，但您也面临有人传递一个不是 where T is a Thing 的实例的*可能性*`Item<T>`。

另一种选择是单独保留方法的签名并将类转换为接口，这允许您使用协方差。（.NET 4.0 支持接口和委托类型的协/逆变。）

```
interface Item<out T> 
{
    T Get();
    // void Set(T foo); // invalid  
} 
```

同样，这里的问题是 1）您需要更改类型（显然）但是 2）您将被限制为仅`T`在输出位置公开。请注意，该`Get()`方法受支持。方法`Set(T)`不是，因为`T`是输入，这使得接口不是协变有效的。（想象一下传入 an *，*而您的`Item<Something>`方法尝试`Set`使用`SomeOtherThing`.`Things``T`

 ** * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-18T18:56:24.287

你需要像这样在方法声明中更具体一点；

```
void DoSomething<T>(Item<T> item)
    where T : Thing
{
    // now your method knows that T must be of time Thing and you can use it
} 
```*

# mysql - mysql - 水平选择行

> ID：14943224
> 
> 赞同：0
> 
> 时间：2013-02-18T18:44:18.290
> 
> 标签：mysql

我有这个 mysql 表（如下图）。我想选择按 id 分组的 id

其中：
datakey = label 和 datavalue = is_member
并且同时 where：
datakey = since 和 datavalue = 20110204

所以最终结果应该只是**105**。

我怎样才能做到这一点？

![在此处输入图像描述](../Images/b94755334190863fc02c69405c397b02.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T19:04:43.570

应该可以在不加入的情况下实现这一点。 [http://www.sqlfiddle.com/#!2/ca8d6/1](http://www.sqlfiddle.com/#!2/ca8d6/1)

```
SELECT t.id
FROM table_name t
WHERE (datakey = 'Label' AND datavalue = 'is_member') OR (datakey = 'Since' AND datavalue = '20110204')
GROUP BY t.id
HAVING COUNT(datakey) = 2; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T18:49:11.130

这应该得到你需要的

```
SELECT
  a.id
FROM
  some_table AS a
  JOIN some_table AS b
    ON
      b.id = a.id
WHERE
  a.datakey = 'Label'
    AND
  a.datavalue = 'is_member'
    AND
  b.datakey = 'Since'
    AND
  b.datavalue = '20110204' 
```

这里的假设是，该字段`id`引用相同的数据集。

# extract - 在 Linux 中提取 excel 元数据

> ID：14943231
> 
> 赞同：2
> 
> 时间：2013-02-18T18:44:39.823
> 
> 标签：extract

我使用了“提取”命令，但它从来没有像 FOCA 在我正在处理的这些 excel 电子表格中找到的那样多的信息。

例如，我正在使用 FOCA 应用程序从 Web 收集和下载文件。之后，它会从所有文件中提取元数据。

关于 excel 文件，这些文件似乎比普通的 pdf 文件包含更多的元数据。话虽如此，FOCA 能够检测存储在此电子表格文件中的打印机名称、电子邮件地址和其他一些内容。但是，我找不到任何方法来使用“提取”命令在 Linux 中获取相同的信息。

有人知道在 Linux 中提取文件并获取其所有元数据的方法吗？似乎提取命令可能受到我理解的限制。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T19:14:58.690

Excel 文件在文件中存储了大量元数据，因此您必须解析文件本身才能获取它。由于您使用的是 Linux 并且无法使用 Excel 互操作，因此您可以尝试使用[ExcelWriter](http://wiki.softartisans.com/display/EW8/DocumentProperties)之类的 Excel 库或类似的东西。ExcelWriter 是为 .Net 编写的，因此您必须使用单声道。

# perl - WWW::Mechanize 从页面获取内容

> ID：14943235
> 
> 赞同：0
> 
> 时间：2013-02-18T18:45:00.773
> 
> 标签：perl, ubuntu, vbulletin

我曾经[`WWW::Mechanize`](https://metacpan.org/module/WWW%3a%3aMechanize)登录到该网站。

现在我们已经登录，我想让`WWW::Mechanize`脚本转到`payments.php`然后找到活动用户订阅（例如 VIP 访问）（类：）`<p class="description">`。

从这里我想阅读那是什么，然后选择正确的动作。例如，如果用户打包状态`VIP Small`然后打印`PKG: VIP Small`，如果用户打包状态`VIP Full`然后打印`PKG: VIP Full`。

有谁知道这样做的方法？到目前为止使用的代码（在我的 Ubuntu 虚拟机中编码）：

```
#!/usr/bin/perl

use WWW::Mechanize;

my $forum = "http://localhost/forums/forum.php";

print "Username\r\n";
my $username = <>;
chomp($username);

print "Password\r\n";
my $password = <>;

# do login
my $mech = WWW::Mechanize->new(agentcheck => 1, agent => 'Perl WWW::Mechanize');
$mech->get($forum);
$mech->submit_form(form_number => 1, fields => { vb_login_username => $username, vb_login_password = $password });

print "this far";
$mech->follow_link(text => "Click here if your browser does not automatically redirect you."); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T04:04:53.707

我想你需要

```
$mech->get('http://localhost/forums/payments.php'); 
```

但我无法帮助您从那里获取信息，而无需查看页面的 HTML。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T04:11:30.370

您需要解析结果 HTML 文件。我建议将 HTML::TreeBuilder::XPath 用于此类任务：

```
my $tree = HTML::TreeBuilder::XPath->new_from_content( $mech->content() );

my ($description) = $tree->findvalues('//p[ @class = "description" ]'); 
```

# c# - 无需额外方法即可转换为 Nullable 类型

> ID：14943239
> 
> 赞同：1
> 
> 时间：2013-02-18T18:45:09.133
> 
> 标签：c#, type-conversion, nullable

写这样的犹太教吗？或者有没有可能出现的问题？

```
private DateTime? getDate(object date)
{
    return date != null ? Convert.ToDateTime(date) : (DateTime?)null;
} 
```

我看到很多问题都在问类似的问题，但答案总是给出一个扩展方法来完成转换的工作，我想知道我是否可以跳过这一步并像这样写，或者我是否有一些边缘情况不占？

此外，我在示例中使用了 DateTime，但我认为这适用于任何可为空的类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T18:57:59.363

由于`?`是 的一种类型`Nullable<T>`，因此只要您知道实际的返回类型，它就完全没问题并且是“洁净的”。就好像您将方法编写为：

```
private Nullable<DateTime> getDate(object date)
{
   ...
} 
```

只要您知道以下内容将不起作用，因为返回类型会有所不同：

`DateTime myDateTimeVariable = getdate(someObject);`因为这是一个类型转换问题。

你可以看到这个以获得另一个解释：[Nullable DateTime?](https://stackoverflow.com/questions/8839787/nullable-datetime)

# smarty - 有什么方法可以避免在 Smarty 2 中捕获缓存？

> ID：14943243
> 
> 赞同：0
> 
> 时间：2013-02-18T18:45:22.007
> 
> 标签：smarty, smarty2

我有一些捕获的内容多次显示在页面上，我需要防止被缓存，因为它第二次呈现错误的值。我了解到，在 Smarty 3 中，有新的 {nocache} 块和 nocache 标志可用于防止缓存变量，我相信在这种情况下可以帮助我。在 Smarty 2 中是否有任何替代方法可以执行相同操作，或者唯一的方法是升级到 Smarty 3 以获得此功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T20:27:29.727

查看[Smarty2 文档的缓存部分](http://www.smarty.net/docsv2/en/caching.tpl)，他们描述了如何处理这个问题的一些可能性：

> [您可以使用插入](http://www.smarty.net/docsv2/en/language.function.insert.tpl)模板功能使页面的某些部分保持动态。假设整个页面都可以被缓存，除了在页面侧面显示的横幅。通过使用横幅的[插入](http://www.smarty.net/docsv2/en/language.function.insert.tpl) 功能，您可以在缓存内容中保持此元素动态。

另一种方法是在显示之前清除特定模板的缓存：

```
require('Smarty.class.php');
$smarty = new Smarty;
...
$smarty->clear_cache('your_template_without_cache.tpl'); 
```

# php - 将 PHP 页面插入 Wordpress

> ID：14943246
> 
> 赞同：0
> 
> 时间：2013-02-18T18:45:46.267
> 
> 标签：php, wordpress, include

我知道这是一项相当简单的任务，但我认为我在这里缺少一些东西。我想将我从另一个站点构建的 PHP 页面放入我当前的 Wordpress 站点中，位于内容部分下方和页脚上方。本节没有编码，只有内容。它只需要被调用并出现在页面上我需要它的位置。

一些搜索使我相信它属于页脚之前的页面或单个模板。我已经尝试过包含标签等，但没有任何运气。任何人都可以对此有所了解吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T19:00:23.663

从您的 Wordpress 主题转到 footer.php 并添加

```
<?php include once("/path/to/your/script.php"); ?> 
```

在最后一次之后

```
<php get_sidebar(''); ?> 
```

包括。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T18:59:30.007

这取决于您的 wordpress 主题和布局。基本上，您需要将此 php 文件包含在您希望它出现的页面的模板中。通常这是发布页面的 index.php 文件和页面的 page.php 文件。您可以通过进入仪表板并编辑页面来检查您的页面正在使用哪个模板（该选项位于“模板”下的右侧）

如果你不确定你可能想在这里查看更多信息： [http ://codex.wordpress.org/Template_Hierarchy](http://codex.wordpress.org/Template_Hierarchy)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T09:05:35.000

如果您的 php 文件位于其他网站/服务器上，您可以使用 file_get_contents 获取其内容并将其显示在您的页面中。

转到 single.php 并将此代码放在 get_sidebar() 和 get_footer() 之间

```
<?php 
    $mycontent = file_get_contents('http://example.com/your-php-file.php');
    echo $mycontent;
?> 
```

# ruby-on-rails - rails 3.2 自定义错误页面 404、422、500

> ID：14943254
> 
> 赞同：1
> 
> 时间：2013-02-18T18:46:14.610
> 
> 标签：ruby-on-rails, ruby, error-handling

`public/{404,422,500}.html`Rails 处理来自文件的错误 404、422、500 错误

更动态地处理这些错误的方法是什么？

ps`rescue_from`并且`rescue_action_in_public`似乎在 rails 3.2.11 中不起作用

# java - 带设置长度的正则表达式

> ID：14943265
> 
> 赞同：0
> 
> 时间：2013-02-18T18:47:27.440
> 
> 标签：java, javascript, regex, etl, pentaho

我有几千行要加载到使用 Pentaho 的数据库中。我必须将字符串值长度保持在 4 个字符。源文件可能只有一个字符，但仍需要将长度保持在 4 个字符以保持数据库的一致性。

示例：
来源：**10**
数据库预期结果：**0010**

我在字符串转换中使用替换，或者可以使用 java 表达式，任何一个都可以。请使用任一方法（Regex 或 Javascript 表达式）提供帮助并提供解决方案。

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T18:50:08.377

在 Java 中，您可以使用`String.format(...)`格式说明符将您的数字用零填充到 4 位：

```
String.format("%04d", yournumber); 
```

在 Javascript 中，您可以使用`sprintf(...`) 来完成相同的任务：

~~`var s = sprintf("%04d", yournumber);`~~

所以显然`sprintf()`不是标准的 Javascript，而是一个你可以下载的库。不过，您始终可以这样做以获得 4 位数字：

```
// take the last 4 digits from the right
var s = String("0000" + yournumber).slice(-4); 
```

你实际上可以把它变成一个简单的左填充函数：

```
String.prototype.leftPad = function(paddingValue, paddingLength) {
   return (new Array(paddingLength + 1).join(paddingValue) + this).slice(-paddingLength);
};

var s = String(yournumber).leftPad("0", 4) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T18:49:49.030

（如果你的意思是 Javascript）：

```
var str = "10";
function padIt(s) {
    s = ""+s;
    while (s.length < 4) {
        s = "0" + s;
    }
    return s;
}
console.log(padIt(str)); 
```

[http://jsfiddle.net/EzqRM/1/](http://jsfiddle.net/EzqRM/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T18:55:36.347

对于数字的任意填充，在 javascript 中：

```
// padLeft(
//   number to pad
//   length to pad to
//   character to pad with[optional, uses 0's if not specified]
// )
function padLeft(num, pad, padchr) {
    num = "" + num;
    pad = (pad || num.length) + 1;
    return (num.length < pad ? new Array(pad - num.length).join(padchr || "0") : "") + num;
}

// returns "0010"
var input = 10
padded = padLeft(input, 4) 
```

# ios - 关于后台更新 GPS

> ID：14943266
> 
> 赞同：0
> 
> 时间：2013-02-18T18:47:33.227
> 
> 标签：ios, background, gps

我正在用电池寿命测试一些 GPS 算法。我刚刚使用核心位置框架编写了一个非常简单的应用程序，该应用程序每秒更新一次 gps 位置。

我想知道如何更改更新位置的时间间隔，例如 10 秒、1 分钟等？

当我的应用程序在后台时，它会停止更新 GPS，你知道如何在后台保持更新吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T18:58:54.790

请注意，iOS 通常在大多数情况下不允许后台操作。但至少有三个选项可以“永久”确定位置：

1.  正如您所写：当您的应用程序不在后台时，始终确定位置。([一](http://developer.apple.com/library/ios/documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html#//apple_ref/doc/uid/TP40007125-CH3-SW2))
2.  始终确定位置 - 也在后台。您需要更新 Info.plist 并将位置添加为所需的后台服务（位置跟踪所需，例如 Google Latitiude）[（查看 api）](http://developer.apple.com/library/ios/documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html#//apple_ref/doc/uid/TP40007125-CH3-SW2)
3.  仅当[位置发生显着变化](http://developer.apple.com/library/ios/documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html#//apple_ref/doc/uid/TP40007125-CH3-SW43)时才获取位置更新。

您无法更改时间间隔或类似的东西。您只有这三个选项 - 您只能在需要时获得一次位置信息，但这不是您问题的意图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T19:14:36.730

> 我想知道如何更改更新位置的时间间隔，例如 10 秒、1 分钟等？

这是不可能的，也没有意义，因为如果 GPS 芯片每秒或每 10 秒需要一个位置，则它需要相同的功率。当然，如果您不喜欢它们（如果它们经常出现），您可以忽略它们。

`desiredAccuracy`影响功率的设置：

`kCLLocationAccuracyBestForNavigation`：启用 GPS 和加速度传感器 `kCLLocationAccuracyBest`：启用 GPS，但没有加速度传感器（如果需要，可以定位蜂窝塔）

`kCLLocationAccuracyHundredMeters`, `kCLLocationAccuracyKilometer`, `kCLLocationAccuracyKilometer`: 更有可能使用蜂窝塔或 Wifi 定位（如果有）。

这使用较少的功率（更有可能）但准确性较低。

> 当我的应用程序在后台时，它会停止更新 GPS，你知道如何在后台保持更新吗？

如果您阅读 Apple 的 LocationAwarnessGuide 找到信息，如何在 Info.plist 文件中设置正确的密钥。

由于 ios 6 有一个额外的变体，它应该会节省更多的能量： 有方法：（`didUpdateLocations`注意：复数！）：
这将一次提供所有位置，这样 ios 不需要让您的应用程序在后台运行。一旦应用程序进入前台，您将立即收到所有职位。

# html - HTML 背景图像不滚动

> ID：14943276
> 
> 赞同：1
> 
> 时间：2013-02-18T18:48:01.497
> 
> 标签：html, css, background

看看这个页面：[rozbub](http://www.magnavoce.ch/rozbub)

如您所见，顶部有一个修复标题，下面有一个可滚动的内容。黑色 div 内的内容滚动良好，但图像是固定的。我怎样才能让这个图像也滚动？

基本上，我将主要包装器定义如下：

```
body{
    width: 100%;   
    height: 100%; 
    overflow: hidden;
    margin: 0px;
}

#generalWrapper{
    height: 100%;
}

#header{
    height: 70px;
    width: 100%;
    background: #080808;
}

#content{
    overflow: auto;
    position: absolute;
    width: 100%;
    top: 70px;
    bottom: 0;
    background: url("../images/background.jpg");
    background-repeat: repeat-y;
} 
```

具有类似的结构

```
<body>
    <generalWrapper>
        <header>
        </header>
        <content>
        </content>
    </generalWrapper>
</body> 
```

然后，内容`div`被元素填充（这使得它`div`比屏幕高并导致可滚动性）。但是为什么背景图片不受影响呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T20:16:55.473

看起来您在`div`s 内滚动`content` `div`，但它`content` `div`本身没有滚动。尝试查看[W3C 的标记验证器](http://validator.w3.org/check?uri=http://magnavoce.ch/rozbub/&charset=%28detect%20automatically%29&doctype=Inline&group=0)在您的站点上发现的错误列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T20:20:38.930

尝试将 设置`background-attacment`为`scroll`。[MDN](https://developer.mozilla.org/en-US/docs/Web/CSS/background-attachment)有这个属性的文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T00:18:39.860

我尝试了不同的方法。首先，我把背景图片放在了html上，属性如下

```
html{
    background: url("../background.jpg") center center #000; 
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover; 
} 
```

然后，我将标题和内容更改为

```
#header{
    height: 70px;
    width: 100%;
    background: #080808;
    position: fixed;
    z-index: 55;
    box-shadow: 5px 5px 5px 5px #080808;
}

#content{
    position: absolute;
    width: 100%;
    top: 70px;
    bottom: 0;
} 
```

这导致了我想要的行为（尽管 Jules Mazur 在评论中考虑的问题没有解决，我会尝试通过为不同的分辨率提供不同的图像来解决这个问题）。

# javascript - 不显示在 多次列出

> ID：14943286
> 
> 赞同：0
> 
> 时间：2013-02-18T18:48:33.720
> 
> 标签：javascript, html, css

我想不出更好的方式来表达标题，但要直截了当。

我的代码设置如下：

```
<li> 
 <a class="news" href="http://MYLINK">
  <span>News</span>
 </a>

<ul>

 <li class="blog">
  <a href="http://MYLINK/">
   <span>Blog</span>
  </a> 
 </li>

 <li class="news">
  <a href="http://MYLINK">
   <span>News</span>
  </a>
 </li>

</ul>

</li> 
```

每个`MYLINK`都有一个`background-image`附加的。

我的 CSS：

```
a.news { display: block; width: 105px height: 28px; 
background-image: url(Icons/news.png); }

a.news span { display: none; } 
```

它将保持链接而不显示文本。

但是当我对`li`类做同样的事情时`blog`，`news`它不会显示文本，但它也不会保留链接。有什么帮助吗？

我应该使用 js/jQuery 来使其正常工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T18:55:42.830

您也应该为链接指定宽度和高度：

```
li { width: 105px height: 28px; background-image: url(Icons/news.png); }
li a {display: block; width: 105px height: 28px;}
li a span { display: none; } 
```

# java - java，多线程，如何阻止另一个方法

> ID：14943290
> 
> 赞同：1
> 
> 时间：2013-02-18T18:48:52.710
> 
> 标签：java

我有一个类有 2 种方法，读取方法和写入方法。我希望多线程可以访问读取方法，并且只有 1 个线程可以访问读取方法。并且当写入方法被访问时，读取方法将被阻塞。我该怎么做？

注意：在阅读了我为此编写了一小段代码的答案后，我使用了并发包锁。

```
public class ConcurrentLock {
private Lock wLock = new Lock();
private Lock rLock = new Lock();
private int i;
public static void main(String[] args){

}
public int Read(){
    try {
        rLock.lock();
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }finally{
        rLock.unlock();
    }
    return i;
}

public void Write(){
    try {
        wLock.lock();
        rLock.lock();
        ++i;
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }finally{
        wLock.unlock();
        rLock.unlock();
    }

} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T18:53:18.930

这是[Readers-Writer 模式](http://en.wikipedia.org/wiki/Readers%E2%80%93writer_lock)，您可以直接在 Java 5+ 中使用[ReadersWriteLock.java](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/locks/ReadWriteLock.html)可能的实现来实现这一点。您必须获取并释放适当的读取器和写入器锁。有关示例，请参阅 Javadoc。

请注意，即使在您的 OP 中不是很清楚，阻止尝试读取的线程因为另一个已经在读取是没有意义的，只会增加争用。应该允许两个读者同时阅读。但是，作者应该拥有独占访问权。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T18:58:40.700

原生方式；）

```
public void read() {
      synchronized(readLock) {
           // critical operations like resource.get(Some)
      }
}
public void write() {
      synchronized(writeLock) {
           synchronized(readLock) {
              // critical operations like resource.put(Some, Some)
           }
      }
}

// for the academic

public void onlyOneReaderAndOnlyOneWriter() {
      writeLock = readLock;
}

public void multipleReadersAndOnlyOneWriter() {
     synchronized(readLock) { // grr, tricky
         writeLock = new Object();
     }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T18:53:05.270

将它们都标记为同步。

# javascript - 在 wordpress 鼠标悬停时更改徽标

> ID：14943302
> 
> 赞同：0
> 
> 时间：2013-02-18T18:49:33.273
> 
> 标签：javascript, css, wordpress, mouseover, graphical-logo

好的，所以我想做的是在鼠标悬停时更改我的徽标。如果默认徽标是 default.PNG，当您将鼠标悬停在它上面时，我想将其更改为 new.PNG！

我正在寻找最好的解决方案，它也与 IE 兼容。我已经尝试了很多方法来让它与 :hover in CSS 一起工作，但无法做到，所以请帮忙。

这就是我的 header.php 文件的样子：

```
<!--Logo-->
        <div class="grid_3_no_margin"> 
            <a href="<?php echo site_url() ?>">
                <?php if(!empty($al_options['al_logo'])):?>
                    <img src="<?php echo $al_options['al_logo']?>" alt="<?php echo $al_options['al_logotext']?>" id="logo-image" class="logo" />
                <?php else:?>
                    <?php echo isset($al_options['al_logotext']) ? $al_options['al_logotext'] : 'Balance' ?>
                <?php endif?>
            </a>
        </div>
        <!--End Logo--> 
```

这就是我使用 Firefox 插件分析实际徽标元素时得到的结果：

```
<div class="grid_3_no_margin"> 
    <a href="http://myurl.com">
      <img src="http://myurl.com/icons/logo.PNG" alt="Logo" id="logo-image" class="logo">
    </a>
</div> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T18:55:09.580

如果要更改 img 或 img 源，则需要使用 javascript。

您可以使用 background-image 属性在 css 中获得相同的结果：

```
.img-div {
    background-image: url('logo.png');
    height : <logo-height>
    width : <logo-width>
}

.img-div:hover {
    background-image: url('logo2.png');
} 
```

而不是`<img />`, 设置`<div class="img-div"></div>`

但是您可能必须为 div 设置高度和宽度，假设您已经知道它们（分别替换 in 和 。

*   这是跨浏览器，没问题。

*   这比在 JS 中做的轻，而且你没有加载问题，因为在解析 CSS 时无论如何都会加载 logo2.png。

# visual-studio-2012 - VS2012 中包含 TypeScript 项目时挂起

> ID：14943312
> 
> 赞同：0
> 
> 时间：2013-02-18T18:50:10.863
> 
> 标签：visual-studio-2012, typescript

[我从http://www.microsoft.com/en-us/download/details.aspx?id=34790](http://www.microsoft.com/en-us/download/details.aspx?id=34790)下载并安装了 TypeScript 0.8.2，以便在 Windows Server 2008 R2 Enterprise（2 Intel至强 @ 2.13GHz，8 GB）

向其中添加 TypeScript 文件后，当我重新打开解决方案时 VS 2012 显示消息“（正在初始化）”并挂起

为什么我认为它可能与 TypeScript 有关？如果我创建没有打字稿文件的同一个项目，只保留其他文件；它总是工作正常

我错过了什么吗？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T18:58:47.363

[从您链接](http://www.microsoft.com/en-us/download/details.aspx?id=34790)到的同一页面：

> “支持的操作系统：Windows 7、Windows 8”

这实际上是一个用户问题，而不是编程查询，[MS 论坛](http://typescript.codeplex.com/discussions)可能是比 SO 更好的地方（特别是[这个线程](http://typescript.codeplex.com/discussions/397600)，具有讽刺意味的是，它链接回[这个 SO 问题](https://stackoverflow.com/a/12687882/1014822)，并且可能为您提供修复），但是看起来您的操作系统不受支持。

# multithreading - 使用 Python 2.7 的 GAE 上的线程引发“FrontendsNotSupported”错误

> ID：14943323
> 
> 赞同：2
> 
> 时间：2013-02-18T18:50:50.630
> 
> 标签：multithreading, google-app-engine, python-2.7

我将 GAE 上的应用程序从 Python 2.5 迁移到 Python 2.7。

Python 2.7 允许线程，我正在尝试创建一个线程以在后台发送电子邮件。这里的线程：

```
from google.appengine.api import background_thread
from django.core.mail import send_mail

subject = 'Hello!'
msg = '\n \n Hello World!'
sender = settings.DEFAULT_FROM_EMAIL
to = 'xx@xx.com'

t = background_thread.BackgroundThread(target=send_mail, args=[subject, msg, sender, to])
t.start() 
```

它应该可以在 GAE 上运行，但是在我上传应用程序并尝试执行后，出现以下错误：

```
Django Version: 1.3.1
Exception Type: FrontendsNotSupported
Exception Location: /python27_runtime/python27_lib/versions/1/google/appengine/api/background_thread/background_thread.py in start_new_background_thread, line 84
Python Executable:  /python27_runtime/python27_dist/python
Python Version: 2.7.3 
```

有谁知道为什么会出现这个错误？

* * *

**使用普通线程的代码：**

```
from threading import Thread
from django.core.mail import send_mail

subject = 'Hello!'
msg = '\n \n Hello World!'
sender = settings.DEFAULT_FROM_EMAIL
to = 'xx@xx.com

t = Thread(target=send_mail, args=[subject, msg, sender, to], kwargs={'fail_silently': False})
t.setDaemon(True)
t.start() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-11T18:35:01.173

您可以在普通实例上使用 TaskQueue，而不是产生后端实例的成本。由于您只是在写一封电子邮件，因此您似乎不需要后端实例提供的功能和时间：

根据[https://developers.google.com/appengine/docs/python/taskqueue/](https://developers.google.com/appengine/docs/python/taskqueue/)

> 使用任务队列 API，应用程序可以在用户请求之外执行由用户请求发起的工作。如果应用程序需要执行一些后台工作，它可以使用任务队列 API 将该工作组织成小的离散单元，称为任务。该应用程序将任务添加到任务队列以稍后执行。

根据[https://developers.google.com/appengine/docs/python/backends/](https://developers.google.com/appengine/docs/python/backends/)，您可以在正常的免费实例上获得 10 分钟的 TaskQueue 截止日期。

这是一些代码：

**处理程序.py**

```
 from google.appengine.ext import webapp
    from google.appengine.api import mail

    class YourMail(webapp.RequestHandler):

      def post(self):
        body_string = self.request.get("body_string")
        mail.send_mail(
          sender="you@your-domain.appengine.com",
          to="abc@abc.com",
          subject="Your subject",
          body=body_string) 
```

注册处理程序： **main.py**

```
 #Add the handler to your WSGIApplication declaration.
    application = webapp.WSGIApplication([
      ('/example',     yourcode.AnotherModule),
      #mail handler
      ('/send_mail',   handlers.YourMail),
      ], debug=True) 
```

**打电话**

```
 from google.appengine.api.labs import taskqueue

    taskqueue.add(url="/send_mail", params={
      'body_string': "your body",
    }) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T19:01:26.300

您只能在`backend`实例上运行后台线程。

[https://developers.google.com/appengine/docs/python/backends/](https://developers.google.com/appengine/docs/python/backends/)

> 后端是特殊的 App Engine 实例，它们没有请求期限、更高的内存和 CPU 限制以及跨请求的持久状态。它们由 App Engine 自动启动，可以长时间连续运行。每个后端实例都有一个用于请求的唯一 URL，您可以跨多个实例对请求进行负载平衡。

您可以在前端实例上使用普通线程（线程），但您只能`backgroundthread`在后端使用。

> 在后端运行的代码可以启动一个后台线程，该线程可以“超过”产生它的请求。它们允许后端实例执行任意定期或计划任务，或者在请求返回给用户后继续在后台工作。

[https://developers.google.com/appengine/docs/python/backends/overview#background_threads](https://developers.google.com/appengine/docs/python/backends/overview#background_threads)

它实际上在错误中说，`FrontendsNotSupported`因此不支持前端。但是，您可以在前端使用“普通”python 线程语法。

# php - 是否有从 PHP5.2 升级到 PHP5.4 的简单/快速修复？

> ID：14943325
> 
> 赞同：1
> 
> 时间：2013-02-18T18:50:57.310
> 
> 标签：php, upgrade, deprecated, register-globals

当我升级到 PHP5.4 时，我的网站脱机，我的主机 1&1 说他们正在取消 5.2 的兼容性。我没有钱聘请专业人士来修复我的网站（一个地方引用我的报价至少 25 小时 = 500 美元），但我有能力在其中一个文件中插入几行代码。

是否有一个简单的修复（解决方法）可以让我的网站保持正常运行，但在技术上可能不正确或不安全，但至少在我可以筹集资金以专业完成之前让它发挥作用？

例如，我看到这个“MacGuyver-like”“修复” [PHP 5.4 不再 register_globals - 这是我的解决方法。](http://www.reddit.com/r/linuxadmin/comments/16npyi/php_54_hasnt_register_globals_anymore_thats_my/) --- 这对我来说看起来非常不安全。

# jquery - 客户端验证不起作用

> ID：14943327
> 
> 赞同：0
> 
> 时间：2013-02-18T18:51:04.030
> 
> 标签：jquery, asp.net-mvc-4, jquery-validate, unobtrusive-validation

我实现了客户端验证，即在和`attributes`中指定的必需。For in并引用了验证器，当我点击. 但是当我实现按钮的ajax调用时，验证似乎不起作用。我尝试使用但没有运气。`Model``HTML``ValidationMesssage``.cshtml``JQuery``save button``onClick event``IsValid`

请找到以下代码。

控制器

```
 [HttpPost]
        public ActionResult AddClient(ClientModel clientData)
        {
            var clientObj = new Metadata.Client.Service.Client();

            string successMessage = string.Empty;

            clientObj.ClientType              = new Metadata.Client.Service.ClientType();
            clientObj.ClientName              = clientData.Client.ClientName;
            clientObj.ClientCode              = clientData.Client.ClientCode;
            clientObj.ClientType.ClientTypeId = clientData.ClientTypeSelectId;

             try
             {
                 clientObj = clientData.AddNewClient(clientObj);
             }
             catch (Exception ex)
             {

                  return new ContentResult { Content = ex.Message, ContentType = "application/json" };

             }

             return new ContentResult { Content = successMessage, ContentType = "application/json" };
             //return RedirectToAction("Index");

        } 
```

## JQuery - 添加了以下参考。

```
<script src="../../Scripts/jquery.validate.min.js" type="text/javascript"></script>
<script src="../../Scripts/jquery.validate.unobtrusive.min.js" type="text/javascript"></script>
<script src="http://code.jquery.com/jquery-1.8.3.min.js" type="text/javascript"></script>
<script src="http://jzaefferer.github.com/jquery-validation/jquery.validate.js" type="text/javascript"></script>
 $("#addForm").validate(
    {

        submitHandler: function (form) 
        {
                var clientName = $('#Client_ClientName').val();
                var clientTypeId = $('#ClientTypeSelectId').val();
                var clientCode = $('#Client_ClientCode').val();

           $.ajax({
                    type: "POST",
                    async: false,
                    url: "/Client/AddClient",
                    cache: false,
                    data: { "clientName": clientName, "clientTypeId": clientTypeId, "clientCode": clientCode },
                    dataType: "json",
                    error: function (request) {
                        alert(request.responseText);
                    },
                    success: function (result) {
                        //alert('Successfully Inserted Client');
                        $.ajax({
                            url: "/Client/ClientGrid",
                            type: 'GET',
                            datatype: 'json',
                            success: function (data) {
                                $('#grid').html(data);
                                //alert('got here with data');
                            },
                            error: function () {
                                //alert('something bad happened');
                            }
                        });

                        $('#myClientDialogContainer').dialog('close');
                    }
                });
                return false;
            }
        }); 
```

# 模型

```
 public class Client
    {
        public int ClientId { get; set; }

        [Required(ErrorMessage = "Please Enter Client Name")]
        [Display(Name = "Client Name")]
        public string ClientName { get; set; }

        public ClientType ClientType { get; set; }
        public StatusType StatusType { get; set; }

        //[StringLength(100, ErrorMessage = "The {0} must be at least {2} characters long.", MinimumLength = 6)]
        [Required(ErrorMessage = "Please Enter Client Code")]
        [DataType(DataType.Text)]
        [Display(Name = "Client Code")]
        public string ClientCode { get; set; }

        //[StringLength(100, ErrorMessage = "The {0} must be at least {2} characters long.", MinimumLength = 6)]
        [DataType(DataType.Text)]
        [Display(Name = "Client Status Type Name")]
        public string ClientStatusTypeName { get; set; }

        //[StringLength(100, ErrorMessage = "The {0} must be at least {2} characters long.", MinimumLength = 6)]
        [DataType(DataType.Text)]
        [Display(Name = "Client Status Code Name")]
        public string ClientStatusCodeName { get; set; }

        [Display(Name = "Client Type Id")]
        public int ClientTypeId { get; set; }
    } 
```

# 验证码

```
<div class="editor-field">
    <span>

        @Html.ValidationMessageFor(c => c.Client.ClientName)
        <div class="row"></div>
        <span class ="label"> @Html.LabelFor(c => c.Client.ClientName, "Client Name :")</span>
        @Html.TextBoxFor(c => c.Client.ClientName, new { style = "width:50%; height:20px;" })
    </span>
    </div>
    <div class="editor-field">
        <span>
             @Html.ValidationMessageFor(m => m.ClientTypeSelectId)
             <div class="row"></div>
            <span class ="label">@Html.LabelFor(m => Model.Client.ClientType.ClientTypeName, "Client Type :")</span>
             @Html.DropDownListFor(m => m.ClientTypeSelectId, (SelectList)ViewBag.clientTypeListCombo, " ", new { style = "width:52%" })

        </span>
    </div>
    <div class="editor-label">
        <span>
            @Html.ValidationMessageFor(m => m.Client.ClientCode)
            <div class="row"></div>
            <span class="label">@Html.LabelFor(m => m.Client.ClientCode, "Client Code :")</span>
            @Html.TextBoxFor(m => m.Client.ClientCode, new { style = "width:50%; height:20px;" })
        </span> 
    </div> 
```

请任何人都可以帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T19:01:01.833

不要在单击按钮时提交表单，而是尝试表单的 .submit() 事件。将您的输入元素包装在 html 表单标签中。您应该序列化您的表单并将其提交到服务器，而不是一个一个地获取输入值。

```
$('#myForm').submit(function (e) {

   // Prevent default submit for ajax
   e.preventDefault();

   $.ajax({ /* Your ajax stuff goes here */ });
}); 
```

这样您就不会绕过验证。

# c++ - 如何估计 C++ 程序中的性能单位

> ID：14943328
> 
> 赞同：-1
> 
> 时间：2013-02-18T18:51:11.410
> 
> 标签：c++

我的意思是，要衡量某种算法的性能，我需要用某个单位来衡量。所以，基本上如果我忽略对象的声明和定义而只考虑操作，你将如何估计每个操作在运行时消耗的时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T19:21:35.580

在`c++11`你有`std::chrono`图书馆（见[std::chrono）](http://en.cppreference.com/w/cpp/chrono)。否则，您可以使用`boost::chrono`（参见[boost::chrono](http://www.boost.org/doc/libs/1_53_0/doc/html/chrono.html)）。这两个是您可以开始使用的非常基本的时间测量库。

编辑：在 c++0x 中你有这个`clock()`功能——但正如评论部分所述——它不是一个非常准确的测量。此外，大多数平台还为与计时相关的操作提供某种 API。

如何衡量性能取决于上下文。首先，您需要在足够大且足够多样化的样本数据上比较性能。足够大意味着它至少可以在几秒钟内测量。足够多样化意味着它可以统一地或单独地覆盖所有运行场景的重复（您至少应该知道样本数据代表什么切割）。

对于足够简单的情况，您要做的第一件事是将您的算法划分为尽可能多的部分，让我们称它们为`A_1,...,A_N`（或者可能`A_1...A_N`是同一问题的不同解决方案，这个概念仍然成立）。您要做的是测量每个分区在相同样本数据上花费的时间。在伪代码中：

```
times <- (0,...,0) //vector of size N
for each input in sample data:
    start = now()
    //Run A_1 on input
    end = now()
    times[1] <- times[1] + (end-start)
    ...
    ...
    ...
    start = now()
    //Run A_N on input
    end = now()
    times[N] <- times[N] + (end-start) 
```

在此运行结束时，您会看到一个时间向量，它显示您在每个元素上花费了多少时间。**这是最基本的方法。但剖析的关键要素是：解剖青蛙的方法有很多**。您还可以查看您在可以从算法的许多分区调用的特定操作上花费了多少时间。您可以选择查看加载/存储操作的数量、缓存性能等。变化很多，而且巨大的回报通常来自意想不到的来源（至少对于粗心的观察者而言）。

对于更高级的分析，您可以使用第 3 方分析框架（一些 IDE 带有内置分析功能）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T19:19:13.867

在现代机器上，它很大程度上取决于上下文。大多数指令将在一个时钟内执行；在某些机器上，您甚至可以在每个时钟中获得几条指令。另一方面，内存访问时间可能会有很大差异，具体取决于被访问的位置是在缓存中、在主内存中还是被换出——如果操作系统必须进入磁盘来映射内存，你说的是访问大约需要几毫秒，就好像数据在顶级缓存中一样，它可能几乎是立即的。（换句话说，我们谈论的是 100 皮秒而不是 10 毫秒。）这就是为什么您会听到很多关于局部性的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T19:34:46.083

有很多方法可以衡量性能，而“正确”的方法在很大程度上取决于您实际在做什么。很多时候，确定性能的简单方法就是让应用程序做它通常做的事情，然后测量时间——如果需要的时间足够长，只需使用秒表（例如手机应用程序，打开实际的手表或类似的）会很好用。对于较短的时间段，您可能需要其他方法 - 一直到使用带有“TSC”的“CPU时钟周期” - CPU本身的时间戳计数器。

如果它只需要很短的时间，但你的应用程序会做很多事情，那么多次运行相同的代码。

对于其他应用程序，由于花费的时间并没有真正花费在 CPU 时钟周期上，因此变得更加困难——例如，如果您的应用程序的一部分正在读取一些大文件，那么所使用的 CPU 时间可能只有 2-3%，剩下的时间花在等待硬盘从那里的实际磁盘中获取数据。

同样，如果应用程序使用网络，CPU 可能只使用通过 1GB 网络链接发送数据包所需时间的百分之几。

数据的类型以及数据的组织、排序和使用方式也很重要。如果您从已排序的源插入要排序的内容，它的执行可能与未排序的项目列表完全不同 - 令人惊讶的是，它可能更好或更糟，具体取决于数据的存储/排序方式。

“查看代码”并确定其性能可能非常困难。除了“代码看起来像什么”之外，还有很多其他因素会影响它。

如果您有一个可以运行的现有应用程序，请测量它的性能，并使用分析软件来查看一个好的计划在哪里花费了多少时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T19:41:37.647

所有这些答案都取决于您运行算法的硬件。如果您想对算法的复杂程度进行通用测量，则应该执行大 O 和大 Omega 分析。

如果您对此有更多疑问，请告诉我，但根据您的问题标题，您应该寻找算法作为其数据输入函数的指令数量，而不是基于特定硬件测量性能。

# android - Android初学者保存/加载小资料

> ID：14943331
> 
> 赞同：0
> 
> 时间：2013-02-18T18:51:20.523
> 
> 标签：android, load, save, oncreate, onpause

我正在寻找在 android 中保存/加载一个非常简单的应用程序。想法是检查 onCreate() 方法中是否存在文件，以及它是否确实在 onCreate 中加载了设置。这是执行此操作的正确功能吗？保存在 onPause() 函数中完成。

我这样做的方式是通过 FileOutputStream 和 FileInputStream。

但是我的代码看起来如何呢？目前我有这个：

```
if (new File(FILENAME).isFile()) {
        FileInputStream fis = null;
        try {
            fis = openFileInput(FILENAME);
            fis.read();
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        numOfEpisode = Integer.parseInt(fis.toString());
        numOfSeason = Integer.parseInt(fis.toString());
    } 
```

忽略我还没有处理异常的事实，因为我知道测试时文件会在那里。

```
protected void onPause() {
    try {
        FileOutputStream fos = openFileOutput(FILENAME,
                Context.MODE_PRIVATE);
        fos.write(numOfEpisode);
        fos.write(numOfSeason);
        fos.close();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

当我关闭应用程序时（调用 onPause() 时），该应用程序当前给我一个错误。谁能指出我为什么？

另外我怎么知道 FileOutputStream.write() 以什么方式写我的语句？这是先进先出还是后进先出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T19:07:57.303

我会为此使用 SharedPreferences，因为它更容易做到，并且专门设计用于从设备存储和检索少量信息。查看[如何在 Android 中使用 SharedPreferences 来存储、获取和编辑值](https://stackoverflow.com/questions/3624280/how-to-use-sharedpreferences-in-android-to-store-fetch-and-edit-values)以了解这是如何完成的。

您将读取 onCreate 中的值并存储它们。当您 onPause 时，您会将它们写出到 SharedPreferences。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T19:04:25.223

试试这个代码：

```
File Gdir = new File(Environment.getExternalStorageDirectory()
                    .getPath() + "/NewFolder/");
            // have the object build the directory structure, if needed.

            if (!Gdir.exists()) {
                Gdir.mkdirs();
            }
                File outputFile = new File(Gdir, "file.txt");
                // now attach the OutputStream to the file object, instead of a
                // String representation
                try {                   
                    FileWriter mod = new FileWriter(
                            outputFile);
                    mod.write(numOfEpisode);
                    mod.write(numOfSeason);
                    mod.flush();
                    mod.close();

                } catch (FileNotFoundException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

                Toast.makeText(getApplicationContext(), "File saved in: "+outputFile, Toast.LENGTH_LONG).show(); 
```

# c# - 无法将 byte[] 数组数据保存到 C# 中的数据库。它正在节省 0x

> ID：14943333
> 
> 赞同：1
> 
> 时间：2013-02-18T18:51:26.213
> 
> 标签：c#, asp.net, sql-server-2008, stored-procedures, webforms

我正在尝试上传文件并将其二进制内容保存到我的数据库字段中。每次我尝试保存时，它都会以`0x`.

以下是相关代码：

```
<form id="frmDefault" enctype="multipart/form-data" runat="server">
    <asp:FileUpload ID="fileInput" runat="server" style="margin: 8px 0 13px 0;" /><br />
    <asp:textbox rows="5" TextMode="multiline" runat="server" id="description" /><br />
    <asp:Button ID="btnUpload" Text="Upload File" runat="server" 
        onclick="btnUpload_Click" />
</form> 
```

我建立变量：

```
HttpPostedFile file = fileInput.PostedFile; 
```

而且，它达到了这个功能：

```
LoadFile(gAttachmentContentID, file.InputStream, trn); 
```

其定义为：

```
public static void LoadFile(Guid gAttachmentContentID, Stream stm, IDbTransaction trn)
{
            const int BUFFER_LENGTH = 40 * 1024;
            byte[] binFILE_POINTER = new byte[32];
            //Testing check out check in
            // 01/20/2006 Paul.  Must include in transaction
            SqlProcs.spATTACHMENTS_CONTENT_InitPointer(gAttachmentContentID, ref binFILE_POINTER, trn);

            using (BinaryReader reader = new BinaryReader(stm))
            {
                int nFILE_OFFSET = 0;
                byte[] binBYTES = reader.ReadBytes(BUFFER_LENGTH);

                while (binBYTES.Length > 0)
                {
                    // 08/14/2005 Paul.  gID is used by Oracle, binFILE_POINTER is used by SQL Server. 
                    // 01/20/2006 Paul.  Must include in transaction
                    SqlProcs.spATTACHMENTS_CONTENT_WriteOffset(gAttachmentContentID, binFILE_POINTER, nFILE_OFFSET, binBYTES, trn);
                    nFILE_OFFSET += binBYTES.Length;
                    binBYTES = reader.ReadBytes(BUFFER_LENGTH);
                }
            }
} 
```

如何读取正确的内容以便将整个文件保存到数据库？

谢谢你。

**编辑：**

```
 #region spATTACHMENTS_CONTENT_WriteOffset
    /// <summary>
    /// spATTACHMENTS_CONTENT_WriteOffset
    /// </summary>
    public static void spATTACHMENTS_CONTENT_WriteOffset(Guid gID, byte[] binFILE_POINTER, Int32 nFILE_OFFSET, byte[] byBYTES)
    {
        DbProviderFactory dbf = DbProviderFactories.GetFactory();
        using ( IDbConnection con = dbf.CreateConnection() )
        {
            con.Open();
            using ( IDbTransaction trn = con.BeginTransaction() )
            {
                try
                {
                    using ( IDbCommand cmd = con.CreateCommand() )
                    {
                        cmd.Transaction = trn;
                        cmd.CommandType = CommandType.StoredProcedure;
                        if ( Sql.IsOracle(cmd) )
                            cmd.CommandText = "spATTACHMENTS_CONTENT_WriteOff";
                        else
                            cmd.CommandText = "spATTACHMENTS_CONTENT_WriteOffset";
                        IDbDataParameter parID               = Sql.AddParameter(cmd, "@ID"              , gID                );
                        IDbDataParameter parFILE_POINTER     = Sql.AddParameter(cmd, "@FILE_POINTER"    , binFILE_POINTER    );
                        IDbDataParameter parMODIFIED_USER_ID = Sql.AddParameter(cmd, "@MODIFIED_USER_ID",  Security.USER_ID  );
                        IDbDataParameter parFILE_OFFSET      = Sql.AddParameter(cmd, "@FILE_OFFSET"     , nFILE_OFFSET       );
                        IDbDataParameter parBYTES            = Sql.AddParameter(cmd, "@BYTES"           , byBYTES            );
                        cmd.ExecuteNonQuery();
                    }
                    trn.Commit();
                }
                catch(Exception ex)
                {
                    trn.Rollback();
                    throw(new Exception(ex.Message, ex.InnerException));
                }
            }
        }
    }
    #endregion 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-26T23:25:55.880

我遇到了同样的问题，即第一次将图像正确保存在数据库端，但如果随后验证失败，然后我在输入有效数据后尝试再次保存图像，我将进入`0x`图像列。为了解决这个问题，我做了[@Ann L.](https://stackoverflow.com/questions/14943333/cant-save-binary-data-to-database-in-c-sharp#comment21040844_14943333)所说的：

```
byte[] photo = null;

if(model.Photo != null)
{
    var stream = model.Photo.InputStream;
    stream.Position = 0;

    using(BinaryReader br = new BinaryReader(model.Photo.InputStream))
    {
        photo = br.ReadBytes(model.Photo.ContentLength);
    }
} 
```

# powershell - 使用 Powershell 向打印机添加标题和/或描述

> ID：14943334
> 
> 赞同：0
> 
> 时间：2013-02-18T18:51:40.230
> 
> 标签：powershell, printing

我不知所措。我想使用 set-printer 或 set-printerproperty 可以修改打印机的标题和描述字段（最终有 1000 台打印机），但我一直碰壁。根据错误消息，下界标题或描述是参数或属性名称（使用 set-printerproperty 时）。但是当我通过 Get-member 运行两者时，看起来它们是。

```
Get-Printer -ComputerName dcr-team-tst-01 -Name "Microsoft XPS Document Writer"  | gm
Get-PrinterProperty -ComputerName dcr-team-tst-01 -printername "Microsoft XPS Document Writer"  | gm 
```

因此，如果我不能从这些 set 命令中的任何一个设置这些属性，那么任何人都知道我可以在哪里修改它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T19:31:31.437

`Caption`并且`Description`只是`CIM_ManagedSystemElement`类的继承属性。`Description`在打印机对象上可用，但据我所知，它是由驱动程序设置的。这就是为什么当您查看打印机的属性时它只会显示“不可用”的原因。

总结一下：你不能使用`Caption`and`Description`属性。使用`Comment`和`Location`提供信息。

**编辑**来源：[MSDN Win32_Printer 类](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394363%28v=vs.85%29.aspx)

> 描述
> 
> 数据类型：字符串
> 
> 访问类型：只读
> 
> 对象的描述。此属性继承自 CIM_ManagedSystemElement。

和

> 标题
> 
> 数据类型：字符串
> 
> 访问类型：只读限定符：MaxLen (64)
> 
> 对象的简短描述——单行字符串。此属性继承自 CIM_ManagedSystemElement

# css - div不能并排

> ID：14943335
> 
> 赞同：0
> 
> 时间：2013-02-18T18:51:41.147
> 
> 标签：css, xhtml

我有以下代码：http: [//jsfiddle.net/kXesZ/](http://jsfiddle.net/kXesZ/)。2 个社交媒体图标需要位于背景图像的底部边缘，但我无法将它们内联。我尝试了几件事（display:block-inline、float:left/right assignment 等），但他们所做的只是四处移动。

我在看什么？

HTML

```
<div class="footer">
    <div class="left">
        <h3>Title</h3>
        <p>
            Lorem ipsum
        </p>
    </div>
    <div class="right">
        <h3>Title</h3>
        <p>Title</p>
        <p>
            <b>Telephone:</b> 012345678<br/>
            <b>E-mail:</b> abc@abc.com
        <p>
        <div class="social">
            <a href="http://facebook.com" title="" id="facebook">Facebook</a>
            <a href="http://twitter.com" title="" id="twitter">Twitter</a>
        </div>
    </div> 
```

CSS

```
body { font:14px Calibri, Candara, Segoe, "Segoe UI", Optima, Arial, sans-serif; color:#282828; text-align:left; }
.footer { background:url('http://i.imgur.com/AhHgSJr.jpg') no-repeat; padding:5px; width:984px; height:268px; }
.footer .left { display:block; width:252px; float:left; padding:98px 0 0 40px; }
.footer .right { display:block;  width:252px; float:right; padding:98px 40px 0 0; }
.footer h3 { color:#a0cf67; font-size:21px; font-weight:bold; }
.footer p { padding:0 0 26px 0; }
.footer .social #facebook { background:url('http://i.imgur.com/g20ltEP.png') no-repeat; float:left; display:block; width:59; height:55px; overflow:hidden; text-indent:100%; white-space:nowrap; }
.footer .social #twitter { background:url(http://i.imgur.com/xteWM7e.png) no-repeat; display:block; width:58px; height:45px; overflow:hidden; text-indent:100%; white-space:nowrap; }
.footer-container .bottom-container { text-align:center; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T19:08:54.523

您似乎遗漏了几件事/误解/过度思考：

1.  显示设置是`inline-block`，*不是* `block-inline`。如果您想控制这些链接的高度/宽度，请确保您的`display`设置正确。

2.  `<a>`默认情况下，标签是`display: inline`指，如果它们有足够的空间，它们会并排放置。如果只需要更改两个项目之间的间距，这就足够了，根本不需要任何`display`属性。

3.  您的 Facebook 链接在您的 Fiddle 中没有 ID。确保你的实际标记有它。这可以解释为什么`display: block; float: left;`不适合你。

4.  你在 CSS 中的`.footer .social #twitter`/行太过分了。`.footer .social #facebook`ID 与 CSS 一样具体，并且在有效 HTML 中每个页面仅出现一次。因此，您只需要`#twitter`/`#facebook`在您的 CSS 中（这可能不会解决您的问题，但可能会让您免于在其他项目中头疼，并且养成一个好习惯）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T18:57:59.387

我已经删除了`display:block`and `float:left`。[在这里](http://jsfiddle.net/halifaxious/CeMCp/)查看。小提琴似乎有效，但由于它没有显示图标（一个 jsFiddle 问题），ymmv。

# cocoa - 使用 Cocoa 填充 PDF

> ID：14943336
> 
> 赞同：1
> 
> 时间：2013-02-18T18:51:46.663
> 
> 标签：cocoa, templates, pdf

我目前正在为执行多项操作的 OSX 开发应用程序，并且应该提供将某些数据导出为 PDF 的选项。

生成的 PDF 应该有一个复杂的样式：一些带有边框和背景的矢量元素、一个可选的图像、自定义字体类型，也许还有一些段落格式。

我有从应用程序控制 Adob​​e InDesign 以将数据注入模板和导出 PDF 文件的经验，但在这种情况下，我需要在我的应用程序中嵌入所有功能，因此我的客户不需要其他任何东西。

我需要一种方法来拥有某种模板，在其中我可以从应用程序中注入数据，并有可能重复模板的设计元素。想象一个 Invoice ，它有一些需要填充一次的字段，比如客户名称和地址；但是对于发票中列出的每个产品，还有其他元素需要重复。

我一直在研究这个主题，我发现了一些关于 Cocoa Drawing 和 Quartz 的信息，但这需要在我的应用程序中编码模板，最好将它们分开作为可导入的数据应用程序。（那是因为我也是一名设计师，我想为我的应用程序的用户提供自定义模板设计）。

也许一种方法是使用 HTML/CSS 渲染（在应用程序中或远程）并将其转换为 PDF？我可以在应用程序内或使用 PHP 进行转换......这两个选项会保持元素矢量吗？这并不重要，这只是文件大小的问题。

有什么方法/ Cocoa 库可以让我以与我的想法类似的方式工作吗？我不是一个非常有经验的 Cocoa 程序员，事实上我对它很陌生，但是我用很多其他的 OOP 语言做过很多事情。

很抱歉这个问题很长，我只是想清楚我的项目。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-24T22:43:05.757

您可以使用 PDFPageBuilder 框架在 Cocoa 应用程序中生成相当复杂的模板驱动 PDF。包含一个不错的演示应用程序，表明支持的功能范围。

文本可以准确定位，样式选项包括字体名称、大小、颜色和段落对齐。也可以插入图像。

还支持枚举对象和简单的布尔条件表达式。

[https://github.com/ThesaurusSoftware/PDFPageBuilder](https://github.com/ThesaurusSoftware/PDFPageBuilder)

# python - 同时写入大量文件的最佳进程数

> ID：14943338
> 
> 赞同：1
> 
> 时间：2013-02-18T18:51:49.523
> 
> 标签：python, multiprocessing

我想同时写入大量文件（比如 10000 个文件）。我发现我可以为此使用多处理。我随意选择使用 100 个进程来编写这些文件。我需要知道是否有办法找到要使用的最佳进程数？在此代码或所有进程自动终止之后，我还需要进行任何清理吗？

我还想知道是否有更有效的方法可以同时写入大量文件。

```
from multiprocessing import Pool

def write(x):
    fopen=open('file_'+str(x),'w')
    fopen.write('anything')
    fopen.close()

if __name__ == '__main__':
    pool = Pool(processes=100)              
    pool.map(write, range(10000)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T20:18:34.657

首先，对于纯 I/O，`threading`可能和 一样好`multiprocessing`，而且通常更好。它也没有关于“我需要任何清理”的谜团。所以，你可能想测试一下。

其次，如果您想知道最快的方法来做到这一点，唯一真正的选择是测试、使用`timeit`，或者您的 shell`time`或等效的。听起来你已经在这样做了。如果您正在寻找一种方法来根据您可以阅读的系统信息（SSD 与 10K HD 与 5200 HD 与远程共享​​、LAN 与 WAN、快速 LAN 与慢速 LAN）以编程方式确定理想池大小、SMB 与 NFS、Windows 与 POSIX 等），您可能需要在各种机器上进行测试并进行一些统计分析。而且其中一些信息不是静态可用的，因此您确实需要启动该过程，然后随时调整池大小。这将非常复杂——我猜所有这些工作大多数时候只会让你获得 10% 的收益。

如果您真的需要从文件 I/O 中挤出最后几个百分点，您可能需要降低一两个级别。

至少，您可能希望将 Python 和/或 stdio 缓冲区从等式中删除（假设文件真的这么小）并使用`os.open`and `os.write`。创建字节的原始缓冲区而不是字符串甚至可能会有所帮助（特别是如果这是 Python 3）。如果您实际上正在向每个文件甚至只是向许多文件写入完全相同的内容，则使用相同的缓冲区可能会让操作系统识别您正在向多个文件写入相同的内容，这意味着缓存可以是完美的刚刚接近完美。

您甚至可能想要下拉到特定于平台的 API。例如，在 Windows 上，使用重叠 I/O 允许操作系统尽可能高效地调度写入，并且围绕 IOCP 创建一个本地线程池来处理完成也消除了写入调度之上的所有开销。（您可以通过或访问`CreateFile`、`WriteFileEx`等。或在 google 中搜索“IOCP Python”以获取示例代码——这些都是不完整或部分不相关的，尤其是因为其中大部分是为执行 c10k 套接字服务器而设计的，但它至少会演示在 MSDN 的帮助和反复试验的帮助下，足以自己将其余部分放在一起。）我想不出 POSIX 上的任何等效项（嗯，等效于`ctypes``win32api``aio_write``WriteFileEx`，但据我所知，它不会帮助任何真实世界的 *nix 平台上的性能）。

或者，您可能想要上移*一步*。如果您真的要将相同的数据写入所有或只是许多文件，为什么不将其写入一个文件，然后要求操作系统复制该文件？它也许能够做得更好。

或者，更简单——而且速度更快——将其写入一个文件，然后将其余部分创建为硬链接或符号链接。

* * *

既然您询问了最后一个选项：

创建链接背后的想法是您只创建一个文件，但创建 10000 个不同的名称来访问它。

这意味着如果您编辑一个文件，则所有 10000 个文件都会被编辑。如果那不是您想要的，则链接不合适。

但如果它是你想要的，有两种基本的链接：硬链接和符号链接。

现代文件系统允许多个目录条目指向同一个文件。创建[硬链接](http://en.wikipedia.org/wiki/Hard_link)是一种创建另一个目录条目的方法，该目录条目指向与现有文件相同的文件。在 Python 中，您可以使用[`os.link`](http://docs.python.org/2/library/os.html#os.link). 所以：

```
with open('file_0', 'w') as f:
    f.write('anything')
for i in range(1, 10000):
    os.link('file_0', 'file_{}'.format(i)) 
```

现在您的文件系统有 10000 个`file_0`通过命名的条目`file_9999`，但它们都是磁盘上相同实际数据的名称。编辑一个，其他 9999 全部更改。删掉一个，剩下的9999还在。

硬链接有一些小问题，还有一个主要问题。小问题是每个平台对除了常规文件之外的东西的硬链接有不同的规则，而且你通常不能跨文件系统进行硬链接。主要问题是Windows。首先，您需要类似（在我脑海中）Vista 和 NTFS 6 来获得完全支持，Win2000 和 NTFS 4 来获得部分支持。但是，更重要的是，`os.link`在 Windows 上不存在。因此，您必须使用`ctypes`or`win32api`调用底层`CreateHardLink`函数（或`subprocess`运行`mklink`or`fsutil`命令）。

[符号链接](http://en.wikipedia.org/wiki/Symbolic_link)是更高层次的想法。它是一种特殊类型的文件，它通过路径引用另一个文件。这意味着您可以读取有关符号链接本身的信息（参见`stat`vs. `lstat`），创建保存链接信息的 tarball，等等。这也意味着如果您 delete `file_0`，所有其他链接都将变为指向不存在的文件的断开链接. 无论如何，在 Python 中，您可以使用[`os.symlink`](http://docs.python.org/2/library/os.html#os.symlink)它们来创建它们（使用与上面完全相同的代码）。

符号链接没有硬链接的大部分限制，但对于 Windows 来说更糟——在 Vista 之前根本没有符号链接，普通文件与目录的不同规则，可以遍历的链接数量的限制，需要特殊权限哪些非管理员用户没有，等等。当然你不能`os.symlink`从 Python 中使用。

还有一些特定于平台的东西，例如 Windows 快捷方式和 Mac 别名，它们与符号链接具有相似但不相同的功能。

# sql-server - 如何在 SQL Server 的单个功能中连接线？

> ID：14943346
> 
> 赞同：0
> 
> 时间：2013-02-18T18:52:15.923
> 
> 标签：sql-server, geospatial

我在 SQL Server 2008 R2 中有一些表。

我想创建视图以在 Geoserver 上发布它。但我对几何有疑问。我有线段的几何形状。例如，来自同一行的这些段：

```
0xE610000001040C000000F01472A59E5A524032C7F2AE7AAA4E40AC1E300F995A52403C889D2974AA4E408C666
5FB905A5240213F1BB96EAA4E406A12BC218D5A5240B7F0BC546CAA4E404A404CC2855A5240ACAA97DF69AA4E40
4E2A1A6B7F5A5240D7A546E867AA4E402B85402E715A5240BAC0E5B166AA4E400EA0DFF76F5A52405AB8ACC266A
A4E402E3883BF5F5A5240D7A546E867AA4E403AE63C635F5A5240D7A546E867AA4E40043A9336555A5240D2393F
C571AA4E405CCCCF0D4D5A5240A75B76887FAA4E4001000000010000000001000000FFFFFFFF0000000002

0xE610000001040A000000F01472A59E5A524032C7F2AE7AAA4E4011C47938815A52401DE4F56052AA4E40145D1
77E705A52401364045438AA4E404B00FE29555A5240DE74CB0EF1A94E4059130B7C455A5240FED2A23EC9A94E40
C9B08A37325A52407444BE4BA9A94E402B323A20095A524049D576137CA94E408B1A4CC3F0595240342C465D6BA
94E40E0F3C308E1595240F487669E5CA94E40B169A510C8595240CBBA7F2C44A94E400100000001000000000100
0000FFFFFFFF0000000002 
```

要选择段，我使用此查询：

```
SELECT  

    Segment_ID = Segment_ID.Segment_ID,
    GEOMETRY::STGeomFromText(Track.Track.STAsText(),4326) as the_geom,
    Road.Name as Road_Name,
    Road.Road_ID as Road_Id

FROM dbo.Road
LEFT JOIN Segment_ID  ON Road.Road_ID = Segment_ID.Road_ID
LEFT JOIN Track ON Segment_ID.Segment_ID = Track.Segment_ID 
```

是否可以在单个查询中将段连接到一个功能中？

**更新**

我找到了函数[STUnion](http://msdn.microsoft.com/ru-ru/library/bb933850.aspx)，但不知道如何在单个查询中使用它来连接段。

**更新2**

我想我会谈谈表结构。我有 3 张桌子：

追踪

```
Segment_ID(character),
Track (geometry) 
```

Segment_ID

```
Segment_ID(character),
Road_ID(character) 
```

路

```
Road_ID(character),
Road_Name(character) 
```

在查询结果中，我想获得 Road_Name 和该道路的单个要素中连接的所有路段。
但仍然不能写不能查询（

**更新3**

答案中的解决方案有效，但需要很多时间。我的意思是当我按下执行查询时，我会在 2 秒内得到结果，但查询仍然工作大约 5 分钟。它可以使它更快。Bercouse 我从此查询创建视图并将其添加到 Geoserver 但我无法在图层预览中获取图层，因为出现超时错误。

我看到了一些有趣的东西。在 table Road 我有 76 行。当我按下执行查询时，我得到 75 行，5 分钟后我得到所有 76 行。所以最后一次迭代的问题。有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T03:57:02.263

STUnion 确实是您的救赎之路（哈！）。STUnion 是几何和地理 CLR 类型的一种方法。您通常将其调用为`gInstance.STUnion(othergInstance)`. 也就是说，假设您上面的查询生成了适当的几何实例，这个递归 CTE 解决方案应该可以工作：

```
with by_segment as (
SELECT  
    Road.Road_Id,
    GEOMETRY::STGeomFromText(Track.Track.STAsText(),4326) as the_geom,
    row_number() over (partition by Road.road_id order by Road.Segment_Id) as [rn],
    count(*) over (partition by Road.road_id) as [c]
FROM dbo.Road
LEFT JOIN Segment_ID  ON Road.Road_ID = Segment_ID.Road_ID
LEFT JOIN Track ON Segment_ID.Segment_ID = Track.Segment_ID
),
roads_by_segment as (
select 
   road_id,
   the_geom,
   [rn],
   [c]
from by_segment
where [rn] = 1

union all

select 
   [a].road_id,
   [a].the_geom.STUnion([b].the_geom),
   [b].[rn],
   [b].[c]
from by_segment as [a]
inner join roads_by_segment as [b]
   on [a].Road_ID = b.Road_ID
   and [a].[rn] = [b].[rn]+1
)

select * from roads_by_segment where [rn] = [c] 
```

# jquery - 更改日期时 - 我得到“2”而不是“02”

> ID：14943347
> 
> 赞同：0
> 
> 时间：2013-02-18T18:52:27.667
> 
> 标签：jquery

[我构建了一个滑块，您可以在其中选择数据并滑动滑块。](http://jsfiddle.net/LUr6b/2/) 问题是，当我从日期选择器中选择“2013-02-01”并将滑块移动到凌晨 1 点时，我得到的是“2013-02-2”而不是“2013-02-02”。

这是我的代码：

```
$("#when").datepicker();

$("#open-till").slider({
    range: "min",
    value: 1230,
    min: 1200,
    max: 1860,
    step: 30,
    slide: slideTime
});
slideTime();

$("#SearchButton").click(function () {
    SendData();
});
function slideTime(event, ui) {
    var val0 = ui == undefined ? 1230 : ui.value,
        minutes0 = parseInt(val0 % 60, 10),
        hours0 = parseInt(val0 / 60 % 24, 10)
        startTime = getTime(hours0, minutes0);
    $("#time").text(startTime);
}

function getTime(hours, minutes) {
    minutes = minutes == 0 ? '00' : minutes + "";
    hours = hours + "";
    if (hours.length == 1) {
        hours = "0" + hours;
    }
    return hours + ":" + minutes;
}

function SendData() {
    var WhenDateUnformatted = $('#when').val().split('/');
    var startTimeSPLIT = startTime.split(':');

    var parsedWhenDateUnformatted = parseInt(WhenDateUnformatted[1], 10);
    if (startTimeSPLIT[0] < 20) {
        WhenDateUnformatted[1] = (parsedWhenDateUnformatted + 1).toString();
    }

    var WhenDate = WhenDateUnformatted[2] + '-' + WhenDateUnformatted[0] + '-' + WhenDateUnformatted[1] + ' ' + startTime + ':00';
    alert(WhenDate);
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T19:02:14.400

```
var parsedWhenDateUnformatted = parseInt(WhenDateUnformatted[1], 10);
if (startTimeSPLIT[0] < 20) {
    WhenDateUnformatted[1] = (parsedWhenDateUnformatted + 1).toString();
    if (WhenDateUnformatted[1].length == 1) {
        WhenDateUnformatted[1] = "0" + WhenDateUnformatted[1];
    }
} 
```

您将该值强制转换为 int （没有前导零），对其进行操作，然后将其转换回来。向后转换后，如果需要，您需要添加前导零。

内部`if`以与上述几行相同的方式修复了该问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T19:02:23.410

比方说`day`is `WhenDateUnformatted[1]`which，例如，等于`"01"`。

1.  您正在`day`使用从字符串转换为数字`parseInt`，即从`"01"`到`1`。
2.  然后添加`1`to `day`，即 from `1`to `2`。
3.  最后，您将转换`day`为字符串，即 from`2`到`"2"`.

最后，您连接的数字格式与最初的格式不同。如果您在步骤 3 中稍微修改转换，则可以保留格式，如下所示。

```
WhenDateUnformatted[1] = ("0" + (parsedWhenDateUnformatted + 1)).substring(0, 2); 
```

[在这里查看一个活生生的例子。](http://jsfiddle.net/7GEUX/)

# java - Java 中的 int.class 中包含什么？为什么它甚至是有效的？

> ID：14943348
> 
> 赞同：6
> 
> 时间：2013-02-18T18:52:28.267
> 
> 标签：java

在 Java 中，对于像`int.class`. `auto boxing`甚至在 Java中引入功能之前就允许这样做吗？我们得到的对象 `int.class`实际上包含什么？为什么有效？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T18:54:30.907

是的，它是反射的关键部分（例如，描述采用`int`参数的方法）。还有一`Void`堂课。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T18:58:46.727

`int`不是一个类，所以`int.class`没有任何意义。

原因是它们变得便宜，并用一种`Class`​​来代表所有*类型*。例如，`Method.getReturnType()`返回 a `Class`，它实际上可以表示一个类、一个基元、一个数组，甚至是 void。

在泛型之前，这还不错，因为没有太多种类的类型。在泛型之后，事情变得非常混乱，新的`Type`层次结构变得更没有意义了，因为它包含了旧的混乱`Class`；因此，树`Types`看起来与语言规范中的类型树完全不同。

# javascript - 如何在 JavaScript 的回调函数中设置变量？

> ID：14943351
> 
> 赞同：1
> 
> 时间：2013-02-18T18:52:32.617
> 
> 标签：javascript, variables, cordova, callback, web-storage

我正在为一个小项目测试[Phonegap Web Storage ：](http://docs.phonegap.com/en/edge/cordova_storage_storage.md.html#localStorage)

```
var listsCount = 0;

tx.executeSql("SELECT * FROM list WHERE id = ?", [id], successGetList, errorGetList );

function successGetList(tx, results){
    listsCount = results.rows.length; // this will be 2, in my case
}

function errorGetList(err){
    console.log("Error processing SQL: "+err.code);
}

console.log(listsCount); // this will show 0, instead of 2 
```

我遇到的问题是`listsCount`没有在`successGetList`方法中设置。即使我把它还在那里。

关于如何在`successGetList`函数内部设置该变量的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T18:53:58.177

它确实已设置，但您的`console.log`调用在此之前被触发（这就是异步代码的工作方式！）。只需使用回调中的值。如果需要，从那里调用另一个函数，并将数据传递给它。

# validation - CSS3 验证

> ID：14943359
> 
> 赞同：0
> 
> 时间：2013-02-18T18:53:01.260
> 
> 标签：validation, css, css-validator

我有一个以最好的样式编写的 CSS 文件。我只是试图验证它，它有大约 40 个错误。他们中的大多数是这样的：

`Line 23, Column 3: character "d" not allowed in prolog display: none;`

这意味着什么？CSS 文件中的“序言”是什么？

这是什么意思？

`Line 158, Column 3: this is not an SGML document -ms-text-size-adjust: 100%;`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-27T19:05:10.330

正如[一个较旧的堆栈问题](https://stackoverflow.com/questions/9310256/how-to-solve-prolog-in-my-css-file)所暗示的那样，我怀疑您在打算使用[W3C 的 css 验证器时使用了](http://jigsaw.w3.org/css-validator/)[W3C 的 html 验证](http://validator.w3.org/)器。

注意：CSS 验证和跨浏览器兼容性被认为是相互排斥的，最佳实践需要后者。

# inheritance - 理解 super() 调用中的方法调用

> ID：14943360
> 
> 赞同：0
> 
> 时间：2013-02-18T18:53:02.327
> 
> 标签：inheritance, superclass

如果我有课

```
class Foo{
    String name;
    public Foo(String s){
        name=s;
    }

    public void setName(String s){
        name=s;
    }

    public String getName(){
        return name;
    }
} 
```

进而

```
class FooBar extends Foo {
    public FooBar(String S){
        super(s);
    }
} 
```

我的主要方法是

```
public static void main(String[] args){
    FooBar item1 = new FooBar("Jim");
} 
```

FooBar 类中的 super() 会调用然后调用 Foo() 的构造函数并将名称正确设置为 s 吗？这是普通的 super() 调用的作用吗？调用被扩展类的构造函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T18:55:45.760

是的，这正是它的作用。它调用超/基类的构造函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T18:55:39.613

`super`总是指你的父类。代码执行顺序如下：

`new FooBar("Jim");`-> `super(s);`->`Foo(String s)`将设置`name=s`

您**没有**默认构造函数，因此没有`super()`（即没有参数），因为您无法创建`FooBar`没有`String`参数的实例

# qt - 滚动 QGraphicsView 和 QGraphicsScene

> ID：14943367
> 
> 赞同：0
> 
> 时间：2013-02-18T18:53:20.433
> 
> 标签：qt, user-interface, scroll, qgraphicsview, qgraphicsscene

我在 GUI 上将 QGraphicsScene 实例设置为 QGraphicsView，启用滚动条并更新全视口。但是当我滚动我的图形视图时，我得到添加到 qgraphics 场景的项目在某些时候消失了，尽管它们被正确地添加到代码中并且预计会在滚动时显示（从 QGraphicsItem 继承的自定义类）：

```
 class CSquare : public QObject, public QGraphicsItem 
```

paint 方法实现如下：

```
void CSquare::paint(QPainter *painter, const QStyleOptionGraphicsItem *option, QWidget *widget)
{
    static int sz;
    painter->setFont(fnt_);
    painter->fillRect(this->r,this->br);
    painter->drawRect(this->r);
    //painter->drawText(this->p,this->txt);
    if (txt == "")
        return;
    if (fnt_.pixelSize()>0)
        sz = fnt_.pixelSize();
    else
        if (fnt_.pointSize()>0)
            sz = fnt_.pointSize();
        else
            if (fnt_.pointSizeF()>0)
                sz = fnt_.pointSizeF();

    switch (this->al_flag)
    {
    case 1:
        painter->drawText(this->p.x(),this->p.y(),sz*txt.size(),2*sz,Qt::AlignRight,this->txt);
        break;
    case 2:
        //painter->drawText(this->r,Qt::AlignLeft,this->txt);
        painter->drawText(this->p.x(),this->p.y(),sz*txt.size(),2*sz,Qt::AlignLeft,this->txt);
        break;
    case 3:
        //painter->drawText(this->r,Qt::AlignCenter,this->txt);
        painter->drawText(this->p.x(),this->p.y(),sz*txt.size(),2*sz,Qt::AlignCenter,this->txt);
        break;
    case 4:
        //painter->drawText(this->r,Qt::AlignJustify,this->txt);
        painter->drawText(this->p.x(),this->p.y(),sz*txt.size(),2*sz,Qt::AlignJustify,this->txt);
        break;
    }
} 
```

可以看到它们如何在此视频屏幕投屏上运行的应用程序中消失：

[https://www.box.com/s/h4h94×1avgay1crzvyzx](https://www.box.com/s/h4h94%C3%971avgay1crzvyzx)

有人可以提示问题是什么，如何解决图形项不会在视图上消失？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:27:10.497

是的，对不起。问题已经解决：问题出在继承类中的自定义函数中：

QRectF boundingRect() 常量；

那应该返回有效的矩形。现在我在我的项目中修复了这个问题，我要删除视频。

感谢您的关注。

# node.js - 使用异步库的控制流

> ID：14943371
> 
> 赞同：0
> 
> 时间：2013-02-18T18:53:40.033
> 
> 标签：node.js, asynchronous

我有一个名为 top thread 的帖子数组，我正在尝试检索一个数组数组，每个数组包含对原始数组中单个帖子的所有回复，而不是最好的。这是我获取顶级线程的代码

```
exports.topThread = function(req, res){
// gets the leaf id from URL and assigns to OPID
var OPID = req.params.id;
var thread = [];
// finds the post with id OPID from the db
titles.findOne({postID: OPID}, function (err, post) {
if (err) throw err; 

getBestThread(OPID, thread, function(result){

    branchList.getBranches(function(branches){

        // renders content with data retrieved from the post
        res.render('content', {title: post.title, content: post.body, OPID: post.postID, currentThread: result, branches: branches});
        console.log(result);

    });
    });
}); 
```

};

这部分代码有效：结果是我想要的帖子数组。现在我想将结果数组的每个元素传递给我的 getAllOtherReplies 函数

```
//calback to retrieve other replies for a parent comment
    getOtherReplies = function(parentID, callback){
        postdb.otherReplies(parentID, function(err, commentsArray){
            if (err) throw err;
            callback(commentsArray);
        })
    }

    getAllOtherReplies = function(threadArray, returnArray, callback) {
        async.each(threadArray, 
            function(value, callback) {
                getOtherReplies(value.commentID, function(commentsArray) {
                    console.log(value.commentID);
                    if (commentsArray)
                        returnArray.push(commentsArray);
                });
                callback();
            },
            function(err) {
                if (err) throw err;
            }
        );
        callback(returnArray);
    } 
```

这是postsDB中的函数：

```
//retrieves other replies from db
    exports.otherReplies = function(parentID, callback){

        titles.find({type: "comment", parentID: parentID}).sort({hotness: -1}).toArray(function(err, result){
            if (err) throw err;
            if (result.length > 1)
                callback(result.splice(0,1));
            else callback(null);
        });
    }; 
```

现在我尝试修改我的原始代码以调用 getAllOtherReplies 函数：

```
 exports.topThread = function(req, res){
        // gets the leaf id from URL and assigns to OPID
        var OPID = req.params.id;
        var thread = [];
        var allOtherReplies = [];
        // finds the post with id OPID from the db
        titles.findOne({postID: OPID}, function (err, post) {
        if (err) throw err; 

        getBestThread(OPID, thread, function(result){
            getAllOtherReplies(result, allOtherReplies, function(returnArray){
                console.log(returnArray);

                    branchList.getBranches(function(branches){

                    // renders content with data retrieved from the post
                    res.render('content', {title: post.title, content: post.body, OPID: post.postID, currentThread: result, branches: branches});
                    console.log(result);

                });
            });
            });
        });
    }; 
```

并且不是返回结果中每个评论的所有回复的数组数组，而是返回一个数组数组，其中每个数组仅是对结果中第一个评论的回复，重复 n 次，其中 n 是结果中的帖子数。我知道我缺少一个异步问题，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T21:28:27.853

在您的`async.each`循环内部，`getOtherReplies`正在添加`commentsArray`回调内部，但是您在之后立即调用异步回调`getOtherReplies`而不是等待它的回调。

将异步回调移入`getOtherReplies`将是一个好的开始，并且可能很好地解决问题。

```
getOtherReplies(value.commentID, function(commentsArray) {
    console.log(value.commentID);
        if (commentsArray) {
            returnArray.push(commentsArray);
        }
        callback();
    }); 
```

# csv - 用 weka 显示阿拉伯字符

> ID：14943372
> 
> 赞同：1
> 
> 时间：2013-02-18T18:53:45.740
> 
> 标签：csv, classification, weka

我有一个`CSV`用阿拉伯语写的状态文件，但它们以问号的形式出现，我想将此文件转换为`arff`. 我想知道`arff`文件中这些字符是否会正确显示。在这种情况下我该如何进行分类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T13:35:32.737

使用 ARFF 格式时，WEKA 中的 UTF-8 字符存在一些问题。

我改用[XRFF 格式](http://weka.wikispaces.com/XRFF)，改为允许显式编码 decleration，这解决了我的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T21:18:01.027

在将`CSV`文件`UTF-8`加载到 Weka 或将其转换为`arff`. 您可以尝试使用[Notepad++之类的文本编辑器](http://notepad-plus-plus.org/)

# entity-framework - 带有大型表达式树的 EF 查询中的 StackOverflowException

> ID：14943378
> 
> 赞同：2
> 
> 时间：2013-02-18T18:54:04.520
> 
> 标签：entity-framework, linq-to-entities, entity-framework-5

我正在使用 EF 5 执行需要多种`Where`条件的选择。

其中一个条件是仅包含`Code`字段位于 UI 提供的代码列表中的记录（例如 SQL 翻译：）`AND Code IN (123, 456)`。

为此，我根据[这篇文章](http://www.velocityreviews.com/forums/t645784-linq-where-clause.html)构建了一个表达式树，代码如下：

```
static public Expression<Func<TElement, bool>> 
    BuildContainsExpression<TElement, TValue>(
        Expression<Func<TElement, TValue>> valueSelector, 
        IEnumerable<TValue> values)
{
    if (null == valueSelector)
    {
        throw new ArgumentNullException("valueSelector");
    }
    if (null == values) { throw new ArgumentNullException("values"); }

    ParameterExpression p = valueSelector.Parameters.Single();
    if (!values.Any())
    {
        return e => false;
    }

    var equals = 
        values.Select(value => (Expression)Expression.Equal(
            valueSelector.Body, 
            Expression.Constant(value, typeof(TValue))));

    var body = 
        equals.Aggregate<Expression>((accumulate, equal) => 
            Expression.Or(accumulate, equal));

    return Expression.Lambda<Func<TElement, bool>>(body, p);
} 
```

该代码的使用如下：

```
// List<long> desiredCodes is provided by the UI
containsExpression = LinqToEntitiesUtil.BuildContainsExpression<MyClass, long>
    (my => my.Code, desiredCodes);    

// In the actual code there are several other Where conditions as well
var matching = ctx.MyClasses.Where(containsExpression).Select(my => my); 
```

当`desiredCodes`尺寸合理时，这非常有效。但是，当列表包含超过 1000 个代码时，我会在迭代器被评估`StackOverflowException`的那一刻得到。`matching`

**问题**

是否有另一种方法来实现不受 StackOverflowException 影响的*包含要求？*

SQL (SQL Server 2012) 对生成的 SQL 的大小是否有上限？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T07:24:40.260

我们遇到了同样的问题，在我分析了这个错误之后，目前唯一的解决方法是手动编写查询（例如，通过 string.Join() 或其他方式生成 IN (...)），因为 EF 似乎通过递归遍历表达式三来构建语句。

# java - 无法在 Web 服务中使用 javamail 发送电子邮件

> ID：14943387
> 
> 赞同：0
> 
> 时间：2013-02-18T18:54:56.060
> 
> 标签：java, web-services, jakarta-mail

在这里，我创建了一个用于用户注册的 Web 服务，完成保存数据后，我需要向已注册的 E-mail ID 发送电子邮件，为此我编写了一个名为 SendEmail N 的单独类，调用 sendMail() 方法，但是当调用此方法时，它会给出 classNotFoundException。异常的堆栈跟踪是：

```
Feb 19, 2013 12:15:02 AM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet [ServletAdaptor] in context with path [/GKWebServer] threw exception [com.sun.jersey.api.container.MappableContainerException: 
java.lang.NoClassDefFoundError: javax/mail/MessagingException] with root cause
java.lang.ClassNotFoundException: javax.mail.MessagingException
at     org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1701)
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1546)
at webServices.UserSevices.insertUser(UserSevices.java:33)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$TypeOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:156)
at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:67)
at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:163)
at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:111)
at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:71)
at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:111)
at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:63)
at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:654)
at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:612)
at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:603)
at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:309)
at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:425)
at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:590)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T22:20:37.833

好像您的类路径中缺少 java 邮件 jar。

可以从这里下载：[http ://www.oracle.com/technetwork/java/javamail/index.html](http://www.oracle.com/technetwork/java/javamail/index.html)

或者您可以为以下内容添加 Maven 依赖项：

```
<dependency>
    <groupId>javax.mail</groupId>
    <artifactId>mail</artifactId>
    <version>1.4.6</version>
</dependency> 
```

确保它包含在战争中（在 下`WEB-INF/lib`）。或者，您可以将其添加到应用服务器的 lib 目录中。不过我不喜欢乱搞应用服务器，因为每次升级时您都必须记住所有手动配置更改，并且必须在所有环境中复制它（例如开发、测试、生产） .

# curve-fitting - 当指数曲线拟合被噪声破坏时

> ID：14943388
> 
> 赞同：1
> 
> 时间：2013-02-18T18:54:59.783
> 
> 标签：curve-fitting

我在用这个方程做曲线拟合时遇到了一个问题

```
y=a*exp(-x/b) 
```

x 是固定的`x=[13 26 39 52 65 78 91]`。y 是输入。a 和 b 是未知数。b 是输出。我使用 LSQ 估计来进行曲线拟合，并为输出 b 添加一个约束：b 应该在`[0,1000]`.

现在系统是这样工作的：当我有一个输入序列时

```
y=[460 434 288 218 164 114 89] 
```

输出是`b=51.46`，这很好。

如果输入序列是

```
y=[599 640 592 609 550 588 573 626] 
```

估计结果为`b=1000`。这也很好。没问题。

但是当我输入一个纯噪声序列时：

```
y=[24 19 31 5 27 31 17] 
```

我从曲线拟合算法得到的结果是`b=1000`. 在这种情况下，输出`b`是一个非常高的信号，这对于系统来说是不可接受的。我希望输出一个低值`b`，比如说`b = 0`。

我试图在 y 上添加一个阈值，比如说

```
if y<50 then b=0 
```

但是系统不是很稳定。噪音水平不时变化。有没有其他方法可以解决这个问题？先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T18:36:54.203

首先，请注意，这类问题通常以[逻辑增长模型](https://www.math.duke.edu//education/ccp/materials/diffeq/logistic/logi1.html)的形式出现在文献中（或参见[此处](http://www.google.fr/url?sa=t&rct=j&q=&esrc=s&source=web&cd=9&cad=rja&ved=0CHsQFjAI&url=http://www.uio.no/studier/emner/matnat/ifi/INF-MAT2351/v11/chapter9.pdf&ei=gsUjUaOvMYmg0QW2p4C4CQ&usg=AFQjCNGINTuct5EY9_SXcYG_GWBTeAJCpg&sig2=W_0baO6nhCROSy1iKg3QlQ&bvm=bv.42553238,d.d2k)）。我相信你的具体问题应该在[混合模型的背景下考虑](http://en.wikipedia.org/wiki/Mixed_model)的背景下考虑，这是一个包含固定效应和随机效应的统计模型。

更具体地说，您可以使用 Matlab 的统计工具箱中的[nlmefit](http://www.mathworks.fr/fr/help/stats/nlmefit.html)。可以在这个[ppt](http://www.google.fr/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDQQFjAA&url=http://bcs.siu.edu/facultypages/young/Modeling/NLME.ppt&ei=PcQjUe2MN6LK0AXe1oGgBA&usg=AFQjCNFnAgkdBbFFjXhfupVtuC9yA-lC1g&sig2=ZNAUYFJOCHPXJMdhp_TFKA&bvm=bv.42553238,d.d2k)中找到 nlme 的鸟瞰图。

# java - ant 中的任务类路径：Java

> ID：14943389
> 
> 赞同：0
> 
> 时间：2013-02-18T18:55:02.057
> 
> 标签：java, ant, classpath, task

在我的 ant 中执行此操作时出现错误，我不明白为什么 ant 无法识别任务类路径：

```
<?xml version="1.0"?>

<project default="task">

<target name="task">
    <classpath>
        <pathelement path="." />
    </classpath>
</target>

</project> 
```

我有错误消息：

```
task:

BUILD FAILED
C:\way\build.xml:6: Problem: failed to create task or type classpath
Cause: The name is undefined.
Action: Check the spelling.
Action: Check that any custom tasks/types have been declared.
Action: Check that any <presetdef>/<macrodef> declarations have taken place. 
```

有人知道错误来自哪里吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T19:06:20.097

Ant中没有`classpath`任务（尽管某些任务***确实***允许您指定类路径。您***可以***使用该任务测试基本的 Ant 构建`path`，作为替代方案：

```
<?xml version="1.0"?>

<project default="task">

<target name="task">
    <path id  = "class.dirs.path">
        <dirset dir  = "${build}" includes = "class.dir.list" />
    </path>
</target>
</project> 
```

# objective-c - 在 Objective C 中使用 @protocols 的主要原因是什么？

> ID：14943393
> 
> 赞同：2
> 
> 时间：2013-02-18T18:55:14.203
> 
> 标签：objective-c, objective-c-protocol

为什么我要使用协议而不是创建子类并继承方法..？

请给我解释一下，我对这个话题很困惑，我对我正在阅读的书中的解释不太满意。

我在哪里使用协议而不是其他方式来获取方法..？如果我可以子类化一个类并获取方法，为什么我要在需要定义方法的地方使用协议？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T19:00:22.480

> 为什么我要使用协议而不是创建子类并继承方法..？

协议使不相关的类都实现相同的接口成为可能。然后，协议的客户端可以使用这些类中的每一个的实例。例如，`UITableViewDataSource`是一种提供接口的协议，通过该接口，表可以从任何实现该协议的对象中请求数据。表视图不关心对象的类型，只要它实现了数据源接口。

想象一下，如果所有表数据源都必须继承自一个公共类，那将是多么不愉快！Objective-C 仅提供单一继承，因此您将有效地被限制为您的数据源仅使用一种对象。但是，使用协议，数据源可以是视图控制器、模型对象，甚至可能是远程对象。

更具体地说，协议允许一种形式的*多态性*。这意味着单个对象可以采用多种形式：例如视图控制器、表数据源、表委托、滚动视图委托。由于 Objective-C 是一种单继承语言，因此您只能通过继承获得其中一个接口。其余的你自己实现，但这通常是有意义的，因为你通常采用给定的协议来自定义其他对象的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T19:07:25.940

因为子类化和协议是两个不同的东西。子类化扩展了具有新功能的类，同时继承了特定类的所有先前功能，而协议在应用于类时只是向它添加功能，而不从它继承任何东西；该类通常是什么并不重要。

协议最常用于Objective-C 中的委托模式，其中一个对象可以向另一个对象发送消息，而无需关心该对象是什么（即它的类）。

很多时候，委托被声明为：

```
 @property(nonatomic, assign) id < MyObjectDelegate > delegate; 
```

注意属性的类——本质上，你并不关心对象是汽车还是乌龟`id`——你只需要知道它是一个对象（`id`你需要它。因此，如果您的委托是 type `turtle`，您可以调用 [delegate myStateChanged]; 或者，如果您的代表是汽车，您可以调用 [delegate myStateChanged]。您需要知道的是，如果您向它发送消息，它会接受它。

我会查找并阅读有关使用 Objective-C 委托的信息，因为我认为它确实可以帮助您更好地理解协议以及它与子类化有何不同。我不知道您是否熟悉其他面向对象的编程语言，但如果熟悉，协议与其他语言中的接口最相似。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-18T19:02:22.667

协议很有用，因为您可以实现许多协议，而您只能扩展一个类。

# powershell - 打破 foreach 循环

> ID：14943398
> 
> 赞同：0
> 
> 时间：2013-02-18T18:55:32.153
> 
> 标签：powershell, foreach, try-catch, powershell-2.0

当前使用以下代码搜索目录并将找到的任何 .msi 复制到另一个目录。如果另一个程序正在使用 .msi，我不想复制它。我在 StackExchange 上看到了其他问题，这些问题显示了检查文件是否正在使用的其他方法，但是在`Rename-Item`命令周围使用 try/catch 块似乎是一个更简单的解决方案。如果脚本无法重命名我想要的项目，请转到`$file`. `$listoffiles`我可以让它工作的唯一方法是使用下面列出的代码。但是，我似乎无法按照我想要的方式格式化生成的错误消息，而且似乎`-ErrorAction Stop`没有必要。如果块中发生错误，`try`错误不应该只是进入`catch`块吗？此外，我的错误消息中的 3 个变量中只有 2 个被写入日志文件。

当前代码：

```
$listofFiles=(Get-ChildItem -Path $outputPath -Filter "*.msi" | where {$_.Name -notlike "*.Context.msi" -and $_.LastAccessTime -gt (Get-Date).AddMinutes(-15)})

foreach ($file in $listofFiles){
    $y = ($file -split ("\\"))
    $msiFolder = $y[4]

    #Tests to see if $file currently in use
    try{
        Rename-Item -Path $file -NewName $file -ErrorVariable renameError -ErrorAction Stop 
    }
    catch{
        "$logTime ERROR Could not copy $msiFolder: $renameError.Exception.Message()" >> $copyLog
        continue
    }   

    #Code that copies files that are not in use. 
```

目前错误显示如下：

```
02/18/13 13:43:25 ERROR Could not copy  System.Management.Automation.ActionPreferenceStopException: Command execution stopped because the preference variable "ErrorActionPreference" or common parameter is set to Stop: The process cannot access the file because it is being used by another process.
   at System.Management.Automation.StatementListNode.ExecuteStatement(ParseTreeNode statement, Array input, Pipe outputPipe, ArrayList& resultList, ExecutionContext context)
   at System.Management.Automation.StatementListNode.Execute(Array input, Pipe outputPipe, ArrayList& resultList, ExecutionContext context)
   at System.Management.Automation.TryStatementNode.Execute(Array input, Pipe outputPipe, ArrayList& resultList, ExecutionContext context).Exception.Message() 
```

我希望它看起来像：

```
02/18/13 13:34:34 ERROR Could not copy ABC_CLIENT: The process cannot access the file because it is being used by another process. 
```

**问题**

1.  为什么 $msiFolder 没有出现在日志消息中？
2.  如何简化错误消息？
3.  有没有更好的方法来使用 try/catch 块来打破 foreach 循环的迭代？

**更新1：**

我清除`$error`并运行：

```
Rename-Item -Path $file -NewName $file -ErrorAction SilentlyContinue
if (!$?){"$logTime ERROR Could not copy $file: $error[0].Exception.Message()" >> $copyLog} 
```

结果是：

```
02/18/13 14:52:59 ERROR Could not copy  The process cannot access the file because it is being used by another process.[0].Exception.Message() 
```

为什么`$logTime`会打印但其他变量没有？

**更新 2：** 我使用的最终代码：

```
Rename-Item -Path $file -NewName $file -ErrorAction SilentlyContinue 
if (!$?){
    "$logTime ERROR Could not copy ${msiFolder}: $($error[0].Exception.Message)" >> $copyLog
    continue
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T19:05:27.867

如果要使用 try/catch，则需要将从 Rename-Item 获得的非终止错误转换为终止错误。这就是为什么您需要使用 -ErrorAction Stop 来调用您的 catch 块。但是，您可以通过其他方式执行此操作，例如：

```
foreach ($file in $listofFiles){
    $y = ($file -split ("\\"))
    $msiFolder = $y[4]

    #Tests to see if $file currently in use
    Rename-Item -Path $file -NewName $file -ErrorVariable renameError -ErrorAction SilentlyContinue
    if (!$?) {
        "$logTime ERROR Could not copy ${msiFolder}: $($error[0].Exception.Message)" >> $copyLog
        continue
    }   

    #Code that copies files that are not in use.
} 
```

自动变量`$?`指示最后一个命令是否成功。

至于为什么 $msiFolder 没有得到输出，我会检查拆分操作。检查 $y.count 是否 >= 5。

# c - 在C中对多维数组列进行排序

> ID：14943406
> 
> 赞同：1
> 
> 时间：2013-02-18T18:56:02.150
> 
> 标签：c, arrays, sorting, multiple-columns

我在 C 中有一些代码：

```
#include <stdio.h>
#include <stdlib.h>

int multiply(int);

int main() {
    FILE *fp;
    int i, j, n, m,
        matrix[99][99],
        sum = 0,
        columnSums[99] = {0};

    fp = fopen("data.txt", "r");
    if(fp != NULL) {
        fscanf(fp, "%d", &n);
        fscanf(fp, "%d", &m);

        for(i = 0; i < n; i++) {
            for(j = 0; j < m; j++) {
                fscanf(fp, "%d", &matrix[i][j]);
            }
        }

        for(i = 0; i < m; i++) {
            for(j = 0; j < n; j++) {
                sum += multiply(matrix[j][i]);
            }
            columnSums[i] = sum;
            sum = 0;
        }
    } else {
        puts("Cannot read the file!");
    }
    puts("");
    system("pause");
    return 0;
}

int multiply(int thisNum) {
    return thisNum * thisNum *thisNum;
} 
```

我的任务要我从文本文件中读取多维数组，然后通过将每个列成员相加乘以自身三倍来对每一列进行排序。读取数组并找到每列添加并将其存储到存储每列添加的其他数组中并不难（希望这会有所帮助），但我坚持将其整理出来。请问有什么建议吗？:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T19:34:29.047

您可以使用 qsort()。不要忘记包含 stdlib.h

```
#define ARR_SIZE(a) (sizeof(a) / sizeof(*(a)))

int comp(const void* a, const void* b)
{
    return *(const int*)a - *(const int*)b;
}

...

for (i = 0; i < ARR_SIZE(matrix); i++)
{
    qsort(matrix[i], ARR_SIZE(matrix[i]), sizeof matrix[i][0], comp);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T18:58:22.950

您可以使用在 stdlib.h 中声明的 qsort 函数

# android - 如何接收仅由我的应用发出的下载完整广播？

> ID：14943414
> 
> 赞同：0
> 
> 时间：2013-02-18T18:56:36.260
> 
> 标签：android, broadcastreceiver

我使用了以下方法，但是如何将广播权限设置为仅接收来自应用程序本身的广播？

```
context.registerReceiver(onComplete, new IntentFilter(DownloadManager.ACTION_DOWNLOAD_COMPLETE), null, compressHandler); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T19:04:09.337

您可以使用`LocalBroadcastManager`，例如

```
LocalBroadcastManager.getInstance(this).registerReceiver(onComplete,
  new IntentFilter(DownloadManager.ACTION_DOWNLOAD_COMPLETE)); 
```

在这种情况下，您只是`DownloadManager.ACTION_DOWNLOAD_COMPLETE`用作常量值，但不会收到来自 android`DownloadManager`类的任何信息

如果您想为您的广播设置权限，请[参阅此问题](https://stackoverflow.com/questions/9528608/restricting-android-broadcast-receiver-from-specific-app)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T20:07:40.430

您正在尝试解决两个问题：

1.  您只想接收由 DownloadManager 广播的意图
2.  您只想接收作为您开始下载的结果的意图

要解决第一个问题，您应该在此方法中使用此字符串“android.permission.SEND_DOWNLOAD_COMPLETED_INTENTS”作为您的广播权限：[Context.html#registerReceiver(android.content.BroadcastReceiver, android.content.IntentFilter, java.lang.String, android. os.Handler)](http://developer.android.com/reference/android/content/Context.html#registerReceiver%28android.content.BroadcastReceiver,%20android.content.IntentFilter,%20java.lang.String,%20android.os.Handler%29)

解决第二个问题的一种方法是存储方法返回的长 ID `DownloadManager.html#enqueue(android.app.DownloadManager.Request)`。然后，当您收到意图时，您会检查 ID 是否与您请求的 ID 匹配。如果是这样，那么您知道这是您的要求。Intent 包含一个额外的 ID `DownloadManager.html#EXTRA_DOWNLOAD_ID`。

# c++ - 如何从静态库创建剥离 pdb？

> ID：14943415
> 
> 赞同：0
> 
> 时间：2013-02-18T18:56:47.020
> 
> 标签：c++, visual-c++, pdb-files

我链接到一个静态库（第 3 方）并收到 LNK4099 警告：.Pdb not found

有没有办法为这个库创建一个剥离的 pdb？我不需要来自这个特定库的调试信息，只是没有警告。

直到现在我遇到了 LNK4209：损坏的 pdb 警告与 LNK4099 一样不可忽略。编辑 link.exe 并添加 /ignore: 是一个很好的本地解决方案，不适合服务器构建机器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T20:30:02.623

在 CodePlex 上有一个名为“ [Common Compiler Infrastructure](http://ccimetadata.codeplex.com/) ”的项目，它托管与 PE 和 PDB 格式交互的类。其中一个类称为[PdbWriter](http://ccimetadata.codeplex.com/SourceControl/changeset/view/71003#96698)，可用于生成 pdb 文件。生成一个空的 pdb 文件并将其用作原始 pdb 文件的替换可能是根据您的标准可行的解决方案。

# python - 果酱部署 - 部署.py，第 62 行，在 SetOpt 中

> ID：14943417
> 
> 赞同：0
> 
> 时间：2013-02-18T18:56:57.893
> 
> 标签：python, xcode, deployment, marmalade

我有一本 mac book pro 视网膜，我正在尝试从 .mkb 文件创建一个项目：但我收到了这个错误

```
Building project: /Users/sergioandreotti/Downloads/twins/template/marmalade/FeedtheTwins.mkb
Traceback (most recent call last):
  File "/Developer/Marmalade/6.1/s3e/makefile_builder/mkb.py", line 209, in <module>
    run()
  File "/Developer/Marmalade/6.1/s3e/makefile_builder/mkb.py", line 137, in run
    main(sys.argv)
  File "/Developer/Marmalade/6.1/s3e/makefile_builder/mkb.py", line 32, in main
    exit_code = mkb_main.run(argv)
  File "/p4/sdkbuild/sdk/main/s3e/makefile_builder/mkb_main.py", line 3461, in run
  File "/p4/sdkbuild/sdk/main/s3e/makefile_builder/mkb_main.py", line 3619, in run2
  File "/p4/sdkbuild/sdk/main/s3e/makefile_builder/mkb_main.py", line 2697, in process_mkb_for_platform
  File "/p4/sdkbuild/sdk/main/s3e/makefile_builder/mkb_main.py", line 690, in process
  File "/p4/sdkbuild/sdk/main/s3e/makefile_builder/mkb_main.py", line 2602, in process_file
  File "/p4/sdkbuild/sdk/main/s3e/makefile_builder/mkb_main.py", line 2124, in process
  File "/p4/sdkbuild/sdk/main/s3e/makefile_builder/mkb_main.py", line 2124, in <lambda>
  File "/p4/sdkbuild/sdk/main/s3e/makefile_builder/mkb_main.py", line 1971, in process
  File "/p4/sdkbuild/sdk/main/s3e/makefile_builder/mkb_main.py", line 1130, in process_deployment_line
  File "/p4/sdkbuild/sdk/main/s3e/makefile_builder/deployment.py", line 62, in SetOpt
NameError: global name 'output' is not defined
Press enter to continue... 
```

我找到了这个解决方案：[https ://devnet.madewithmarmalade.com/questions/2784/mkb-fails-to-build.html](https://devnet.madewithmarmalade.com/questions/2784/mkb-fails-to-build.html)

但我认为这不是最好的解决方案。

它正在构建项目，但是当我必须使用 Marmalade 部署工具进行部署时，我遇到了其他问题。

有时部署失败并且错误日志中的错误是相同的“未定义全局名称'输出'”

我无法将我的配置保存在 .mkb 中，因为如果我这样做，下次我重新加载配置时，部署会失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T08:30:41.523

这是我的错，我安装了果酱 6.1.1 而不是 6.1.2。

6.1.1 不提供视网膜支持，并且在 .mkb 中设置了“启用 4 英寸视网膜支持”标签。

# java - 有没有办法在 JSP 中填充地图？

> ID：14943421
> 
> 赞同：6
> 
> 时间：2013-02-18T18:57:11.123
> 
> 标签：java, jsp, jstl

例如

```
<jsp:useBean id="total" class="java.util.LinkedHashMap"/>
// need somehow do something like this: total.put('key', 'value'); 
```

但是不使用 scriptlet（这很明显但有点难看）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-18T19:23:01.610

您可以为此使用[JSTL 。](https://stackoverflow.com/tags/jstl/info) [`<c:set>`](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/c/set.html)

```
<jsp:useBean id="total" class="java.util.LinkedHashMap"/>
<c:set target="${total}" property="key" value="value" /> 
```

# r - 矩阵中的 R 个独立列

> ID：14943422
> 
> 赞同：0
> 
> 时间：2013-02-18T18:57:11.437
> 
> 标签：r, matrix, linear-algebra

我试图找到独立的列来求解线性方程组。这是我的简化示例：

```
> mat = matrix(c(1,0,0,0,-1,1,0,0,0,-1,1,0,0,0,-1,0,-1,0,0,1,0,0,1,-1), nrow=4, ncol=6, dimnames=list(c("A", "B", "C", "D"), paste("v", 1:6, sep="")))
> mat
  v1 v2 v3 v4 v5 v6
A  1 -1  0  0 -1  0
B  0  1 -1  0  0  0
C  0  0  1 -1  0  1
D  0  0  0  0  1 -1 
```

矩阵是满秩的：

```
qr(mat)$rank 
```

给我 4，因为有 6 列，所以应该有 6-4=2 个独立的列，我可以从中计算其他列。我知道列 v4 和 v6 是独立的......我的第一个问题是，我怎样才能找到这些列（可能使用 qr(mat)$pivot）？

通过重新排列纸上的线性方程，我看到
[v1, v2, v3, v4, v5, v6] = [v4, v4-v6, v4-v6, v4, v4, v6, v6]

因此，我可以通过将 v4 和 v6 与以下向量相乘，从 v4 和 v6 的任意值中找到位于零空间中的向量：

```
v4 * [1,1,1,1,0,0] + v6 * [0,-1,-1,0,1,1] 
```

我的第二个问题是：如何找到这些向量，这意味着如何求解 v4 和 v6 的矩阵？例如

```
qr.solve(mat, cbind(c(0,0,0,0), c(0,0,0,0))) 
```

给我两个长度为 6 且只有零的向量。

任何帮助表示赞赏，非常感谢提前！

-H-

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T19:05:19.897

使用数据透视信息找到一组独立的列：

```
q <- qr(mat)

mmat <- mat[,q$pivot[seq(q$rank)]]

mmat
##   v1 v2 v3 v5
## A  1 -1  0 -1
## B  0  1 -1  0
## C  0  0  1  0
## D  0  0  0  1

qr(mmat)$rank
## [1] 4 
```

为什么这行得通？的含义`pivot`是在`QR.Auxiliaries {base}`长大后给出的`?qr.Q`。尤其是：

```
qr.R returns R. This may be pivoted, e.g., if a <- qr(x) then x[, a$pivot] = QR.
The number of rows of R is either nrow(X) or ncol(X) (and may depend on whether
complete is TRUE or FALSE). 
```

为了数值稳定性，进行旋转以按绝对值递减的方式对特征值进行排序。这也意味着任何`0`特征值都在末尾，超出`q$rank`in `q$pivot`（在当前示例中不存在，其中`Q`是 4x4 正交矩阵）。

`QR.Auxiliaries {base}`显示这种关系的最后几行：

```
pivI <- sort.list(a$pivot) # the inverse permutation
stopifnot(
 all.equal(x[, a$pivot], qr.Q(a) %*% qr.R(a)),          # TRUE
 all.equal(x           , qr.Q(a) %*% qr.R(a)[, pivI]))  # TRUE too! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T19:05:18.827

如果您从 v4 和 v6 开始，那么您还需要 2 个非零值 inrows 1 和 2，以便您需要选择 v1 和 v2 或 v3。这些都是可能的具有最大等级的基础选择。

```
> qr(mat[, c(1,2,4,6)])$rank
[1] 4
> qr(mat[, c(1,2,3,5)])$rank
[1] 4
> qr(mat[, c(1,3,4,6)])$rank
[1] 4 
```

根本不是“独立列”是唯一确定的。可能存在一定依赖的列集合，例如，彼此是标量倍数的列，但这里不是这种情况。

另一方面，这将是排名不足的：

```
> qr(mat[, c(1,2,3,4)])$rank
[1] 3 
```

# objective-c - UIAlertView 并在显示后释放对象

> ID：14943427
> 
> 赞同：0
> 
> 时间：2013-02-18T18:57:19.730
> 
> 标签：objective-c, uialertview

我正在查看一些源代码并注意到下面的这种方法。它不会`message`在分配后释放。不应该有一个`[message release];`之后的节目吗？

```
- (void)service:(TestService*)service didFailWithError:(NSObject *)error
{
    UIAlertView *message = [[UIAlertView alloc] initWithTitle:@"Service Error"
                                                message:errorMsg
                                                delegate:nil
                                                cancelButtonTitle:@"OK"
                                                otherButtonTitles:nil];

    [message show];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T19:01:43.730

如果 ARC 没有启用，那么是的，release 应该在`show`.

# api - Node.js - 回复 Instagram hub.challenge

> ID：14943429
> 
> 赞同：1
> 
> 时间：2013-02-18T18:57:22.640
> 
> 标签：api, node.js, callback, instagram

Node.js 的新手。我正在做一个需要访问 Instagram 订阅/流媒体 API 的项目。卡在握手授权上，我的服务器需要回复 Instagram 发送的质询码。

获取和记录挑战代码的代码：

```
var http = require('http'),
url = require ('url');

http.createServer(function (req, res) {
  var parts = url.parse(req.url, true);
  var parts = parts.query['hub.challenge'];
    console.log(parts);
}).listen(8080, '0.0.0.0'); 
```

以及将订阅请求发送到 Instagram 的代码：

```
Instagram = require('instagram-node-lib');

Instagram.set('client_id', 'myClientID');
Instagram.set('client_secret', 'myClientSecret');
Instagram.set('callback_url', 'http://www.myLocalTunnelAddress/callback.js')

Instagram.media.subscribe({ lat: 48.858844300000001, lng: 2.2943506, radius: 1000 }); 
```

我可以从 Instagram 的 GET 请求中获取挑战代码，但已经为此工作了一段时间并且无法将其发回。有没有人有关于如何做到这一点的建议？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T13:44:14.037

查看这个 node.js 库

[https://github.com/mckelvey/instagram-node-lib/blob/master/lib/class.instagram.subscriptions.js](https://github.com/mckelvey/instagram-node-lib/blob/master/lib/class.instagram.subscriptions.js)

以及他如何实现他的握手方法： [https ://github.com/mckelvey/instagram-node-lib/blob/master/lib/class.instagram.subscriptions.js](https://github.com/mckelvey/instagram-node-lib/blob/master/lib/class.instagram.subscriptions.js)

# command-line - 在 windows xp 上设置时区

> ID：14943431
> 
> 赞同：0
> 
> 时间：2013-02-18T18:57:30.173
> 
> 标签：command-line, windows-xp

哪个命令（用于批处理文件）会将 PC 的时区更改为 GMT+10

是否有一个行命令可以直接执行此操作？

* * *

我已经开始查看“时间和日期”控制面板，但它并没有完全符合我的要求......

以下命令打开“时间和日期”控制面板并选择时区选项卡。但是我该怎么做才能自动选择 GMT+10 设置然后关闭控制面板？

rundll32.exe shell32.dll,Control_RunDLL timedate.cpl,,1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-07T18:40:10.223

将此用于 Windows XP：

`runDLL32.exe shell32.dll,Control_RunDLL timedate.cpl,,/Z (GMT+10:00) Brisbane`

或者对于 Windows 7：

`TZUTIL /S "E. Australia Standard Time"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T19:04:39.930

我想 Powershell CMD-lets 可以解决你的问题。在这里您可以获得更多信息：[Technet 支持](http://technet.microsoft.com/en-us/library/ee176960.aspx)

# python-2.7 - 如何使用 matplotlib 或 graphviz 在 networkx 中绘制多图

> ID：14943439
> 
> 赞同：26
> 
> 时间：2013-02-18T18:58:00.453
> 
> 标签：python-2.7, networkx

当我将多图 numpy 邻接矩阵传递给 networkx（使用 from_numpy_matrix 函数）然后尝试使用 matplotlib 绘制图形时，它会忽略多个边。

我怎样才能让它也绘制多个边缘？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-18T21:26:34.607

Graphviz 在绘制平行边方面做得很好。您可以通过编写一个点文件然后使用 Graphviz 处理（例如下面的neato 布局）来将它与 NetworkX 一起使用。除了 NetworkX，你还需要 pydot 或 pygraphviz

```
In [1]: import networkx as nx

In [2]: G=nx.MultiGraph()

In [3]: G.add_edge(1,2)

In [4]: G.add_edge(1,2)

In [5]: nx.write_dot(G,'multi.dot')

In [6]: !neato -T png multi.dot > multi.png 
```

![在此处输入图像描述](../Images/fbdc547e406dd93088344679ffefc6ee.png)

在 NetworkX 1.11 和更新版本上，`nx.write_dot`不能按照[networkx github 上](https://github.com/networkx/networkx/issues/1984)的问题工作。解决方法是调用`write_dot`using

`from networkx.drawing.nx_pydot import write_dot`

或者

`from networkx.drawing.nx_agraph import write_dot`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2020-03-11T14:31:56.840

您可以使用您计算的节点位置直接使用 matplotlib。

```
G=nx.MultiGraph ([(1,2),(1,2),(1,2),(3,1),(3,2)])
pos = nx.random_layout(G)
nx.draw_networkx_nodes(G, pos, node_color = 'r', node_size = 100, alpha = 1)
ax = plt.gca()
for e in G.edges:
    ax.annotate("",
                xy=pos[e[0]], xycoords='data',
                xytext=pos[e[1]], textcoords='data',
                arrowprops=dict(arrowstyle="->", color="0.5",
                                shrinkA=5, shrinkB=5,
                                patchA=None, patchB=None,
                                connectionstyle="arc3,rad=rrr".replace('rrr',str(0.3*e[2])
                                ),
                                ),
                )
plt.axis('off')
plt.show() 
```

[![在此处输入图像描述](../Images/ac95c1a99efe6fe31ebe4427b52368d3.png)](https://i.stack.imgur.com/IM3eK.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-07-08T13:39:55.497

您可以使用[pyvis](https://pyvis.readthedocs.io/en/latest/tutorial.html)包。
我只是从 Jupyter 笔记本中的实际项目中复制粘贴这段代码。

```
from pyvis import network as pvnet

def plot_g_pyviz(G, name='out.html', height='300px', width='500px'):
    g = G.copy() # some attributes added to nodes
    net = pvnet.Network(notebook=True, directed=True, height=height, width=width)
    opts = '''
        var options = {
          "physics": {
            "forceAtlas2Based": {
              "gravitationalConstant": -100,
              "centralGravity": 0.11,
              "springLength": 100,
              "springConstant": 0.09,
              "avoidOverlap": 1
            },
            "minVelocity": 0.75,
            "solver": "forceAtlas2Based",
            "timestep": 0.22
          }
        }
    '''

    net.set_options(opts)
    # uncomment this to play with layout
    # net.show_buttons(filter_=['physics'])
    net.from_nx(g)
    return net.show(name)

G = nx.MultiDiGraph()
[G.add_node(n) for n in range(5)]
G.add_edge(0, 1, label=1)
G.add_edge(0, 1, label=11)
G.add_edge(0, 2, label=2)
G.add_edge(0, 3, label=3)
G.add_edge(3, 4, label=34)

plot_g_pyviz(G) 
```

[结果](https://i.stack.imgur.com/Ihzah.png)

# sql-server - 协助 MSSQL 查询对数据进行分组

> ID：14943440
> 
> 赞同：1
> 
> 时间：2013-02-18T18:58:02.720
> 
> 标签：sql-server

**样本数据已更新 - 我在确认之前就发布了数据**

使用**SQL Server**，我返回了以下数据：

```
select id, dateofservice, first, second, third, fourth, fn, ln
from servicesTbl 
```

样本数据：

```
id  dateofservice   first   second  third   fourth  fn      ln      
-------------------------------------------------------------------
1   2/01/2013       Y       N       N       Y       John    Doe    
2   2/01/2013       N       N       Y       Y       Sue     Fisher    
2   2/01/2013       Y       N       N       N       Sue     Fisher    
3   2/01/2013       Y       N       N       Y       Daivd   Smith    
3   2/01/2013       N       N       Y       N       Daivd   Smith       
4   2/01/2013       N       N       N       N       Bob     Denver 
```

我需要知道如何编写我的查询，以便 Sue Fisher 和 David Smith 的记录都在一行上，这意味着输出应该如下所示：

```
1   2/01/2013       Y       N       N       Y       John    Doe    
2   2/01/2013       Y       N       Y       Y       Sue     Fisher    
3   2/01/2013       Y       N       Y       Y       Daivd   Smith       
4   2/01/2013       N       N       N       N       Bob     Denver 
```

此查询对我不起作用，我不确定如何以我想要的格式获得输出。

```
select id, dateofservice, first, second, third, fourth, fn, ln    
from servicesTbl    
group by ln 
```

**样本数据已更新 - 我在确认之前就发布了数据**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T19:10:12.307

```
SELECT 
    id, 
    dateofservice, 
    (CASE WHEN SUM(first) > 0 THEN 1 ELSE 0 END) AS first, 
    (CASE WHEN SUM(second) > 0 THEN 1 ELSE 0 END) AS second, 
    (CASE WHEN SUM(third) > 0 THEN 1 ELSE 0 END) AS third, 
    (CASE WHEN SUM(fourth) > 0 THEN 1 ELSE 0 END) AS fourth, 
    fn, 
    ln 
    OVER (PARTITION BY id)
FROM servicesTbl 
```

考虑一下，这可能也可行，而且更简洁：

```
SELECT 
    id, 
    dateofservice, 
    MAX(first) AS first, 
    MAX(second) AS second, 
    MAX(third) AS third, 
    MAX(fourth) AS fourth, 
    fn, 
    ln 
    OVER (PARTITION BY id)
FROM servicesTbl 
```

在 MySQL 之类的东西中执行此操作的通常方法是：

```
SELECT 
    id, 
    dateofservice, 
    MAX(first) AS first, 
    MAX(second) AS second,
    MAX(third) AS third,
    MAX(fourth) AS fourth,
    fn, 
    ln
FROM servicesTbl
GROUP BY id 
```

...但我认为我说 MSSQL 会抱怨 fn, ln 不是聚合函数或不在 GROUP BY 子句中的说法是正确的：使用上面的 OVER PARTITION 方法应该可以解决这个问题。

请注意，这是未经测试的，因为我手头没有 MSSQL，但应该为您指明正确的方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T22:24:52.850

使用 CF，我能够执行分组，然后执行查询

```
<table>
    <cfoutput query='rsData' group="id">
        <cfoutput>
            <tr>
                <td>#dateformat(dateofservice,'mm/dd/yyyy')#</td>
                <td>#first#</td>
                <td>#second#</td>
                <td>#third#</td>
                <td>#fourth#</td>
                <td>#fn#</td>
                <td>#ln#</td>
            </tr>
        </cfoutput>
    </cfoutput>
</table> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T19:50:04.090

```
select id,CONVERT(VARCHAR(10),Dateofservice,111) as Dateofservice,
 MAX(first) as first ,
 MAX(second) as second,
 MAX(third) as third,
 MAX(fourth) as fourth, fn, ln from dbo.ttest
group by id,CONVERT(VARCHAR(10),Dateofservice,111),fn, ln 
```

我已将该表命名为 tttest，您可以使用您的表名。另外，我使用了随机日期格式来更改它以适合自己。

# clojure - 采用顺序参数并拥有先前值的函数

> ID：14943441
> 
> 赞同：1
> 
> 时间：2013-02-18T18:58:02.577
> 
> 标签：clojure

我正在使用[隐藏的马尔可夫模型](http://en.wikipedia.org/wiki/Hidden_Markov_Model)做一些工作。更具体地说，用于过滤和平滑的前向和后向算法。我已经确定了一个表示并有一个工作前向 fn，它采用隐藏变量和模型的先前概率分布并返回新的概率分布。现在我想要一个过滤函数，它采用一系列传感器状态和一个模型并返回一个由以下组成的序列

1.  初始状态（包含在模型中）
2.  对返回序列中的前一个状态、下一个传感器状态和模型使用 forward 的结果。
3.  重复 2 直到不再有传感器状态。

我已经设法通过递归来完成这项工作，但由于它不是尾位置递归，它会破坏递归并且看起来不习惯并且通常是一个糟糕的解决方案。我试图将其制定为适用于、减少和迭代，但我似乎无法使它们中的任何一个适合。有什么办法可以改善吗？

```
(defn filtering
  "Perform filtering to decide the likely state based on evidence.
  Returns a sequence of state probabilities given a sequence of evidence."
  [evidence {:keys [transition sense initial state-map] :as model}]
  (if (empty? evidence)
    (vector initial)
    (let [reading (first evidence)
          history (filtering (drop 1 evidence) model)
          previous-state (vector (peek history)) 
          fwd (forward previous-state reading model) ]
      (conj history fwd)
      )
    )
  ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T20:40:44.300

递归首先下降到末尾`evidence`并产生 `(:initial model)`. 这是减少的初始值。

然后递归的每个返回级别适用`#(forward %1 %2 model)`于来自较低递归级别（as `%1`，采用`peek`）和证据的下一个元素（as `%2`）的应用程序结果。此代码迭代地将两个参数函数应用于序列的连续元素（以相反的顺序获取） - 显然是`reduce`.

但是这些结果会累积在`history`返回到上层递归的向量中。`reduce`与累积的结果是`reductions`。所以我相信代码的结构大致是这样的：

```
(reductions #(forward %1 %2 model) (:initial model) (reverse evidence)) 
```

# c# - ajax实时进度

> ID：14943444
> 
> 赞同：-4
> 
> 时间：2013-02-18T18:58:14.167
> 
> 标签：c#, ajax, asp.net-mvc-4, asp.net-ajax

我正在使用**asp.net mvc 4.0 剃须刀**

在我的控制器中，我有 5 个存储过程可以在单击按钮时执行。该过程运行良好。但每个程序需要 30-60 秒才能执行。在这个时候，我可以在 javascript 的帮助下显示一个 .GIF 图像（处理...）。但是在我的视图页面中某处完成每个 SP 的执行后，我必须显示一条**消息。**喜欢 ：

1.  “dbExcel 正在处理”
2.  “dbExcel 进程完成”
3.  “dbCSV 正在处理”
4.  “dbCSV 进程已完成”.................................................................. .....................

我了解到我必须使用**ajax**来做到这一点。我对此一无所知，而且我有很短的时间无法很好地学习 ajax 并自己找到解决方案。我想要一个简单的指导方针，我可以解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T19:26:46.420

在 MVC 中服务 Ajax 调用非常简单。您可以在控制器中定义以 JSON 格式而不是页面视图返回数据的操作，并使用 jQuery 或类似方法从 JavaScript 调用这些操作。

这是一个获取当前时间为刻度的示例控制器方法：

```
public class HomeController : Controller
{
...

    public JsonResult GetTicks()
    {
        return Json(DateTime.Now.Ticks, JsonRequestBehavior.AllowGet);
    }
} 
```

以及调用它的 jQuery 调用：

```
$.ajax({ 
    url: "/Home/GetTicks", 
    cache: false, 
    success: function (result) {
        alert(result);
    }
}); 
```

您可以使用此技术轮询您的服务器以了解长期运行任务的当前状态，并在您的页面上显示结果。我将创建两个控制器操作 - 一个用于启动在工作线程中运行的任务，另一个用于报告任务的进度。

我强烈建议使用 Firebug 之类的工具来检查 ajax 调用的网络请求/响应数据。当我开始使用这些东西时，它对我帮助很大。

# .net - 是否可以从委托处理程序设置“预期”响应代码？

> ID：14943445
> 
> 赞同：0
> 
> 时间：2013-02-18T18:58:15.663
> 
> 标签：.net, asp.net-mvc-4, asp.net-web-api

因此，在我们旧的 WCF 休息服务中，我们有一个帮助类，它将查看响应对象并运行接口成员 GetStatus 来检索状态代码，然后将其设置为 WebOperationContext。在 web api 中，这不再可能，因此我们正在研究`DelegatingHandler`是否可以设置它。这是场景：

并非所有 POST 都会生成`201 - Created`代码。例如，一些用于具有复杂参数的 GET 类型操作。但是，某些 POST 操作将导致 201。在我们的响应对象中，我们有一个调用的接口，该接口`IResult`有一个方法，该方法`GetResult()`返回一个 HttpStatus 代码，该代码在操作期间运行的业务逻辑中设置。因此，如果我们要运行服务操作（帖子）

`var result = AdvancedSearch(myPayload);`

然后运行`result.GetResult()`，它将返回`HttpStatus`200。但是，如果我们要运行

`var result = AddNewUser(myPayload);`

然后运行`result.GetResult()`；它将返回`HttpStatus`201

现在，在这些应该返回 201 的操作中，我只需从`request.CreateResponse(...)`;创建一个新的响应对象。控制器本身的方法。但是，团队中的一些更高级的家伙不喜欢它。他们想要一个核心来处理这个问题。类似于我们之前的东西。

由于没有设置响应代码的全局上下文，我想我会尝试通过创建一个`DelegatingHandler`. 我知道您可以处理该`Continue`方法中的响应，但是，我不确定这是否可行。我意识到这个方法在实际 MVC 框架之外的不同管道中运行；我看不到任何从接口检索响应有效负载并从接口`HttpResponseMessage`运行方法的方法。`GetResult()``IResult`

这可能吗？还有其他方法可以做到这一点吗？我是否卡在控制器中设置响应（实际上，我对此表示满意。我只是在尽职调查）。

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T20:01:59.833

HttpResponseMessage 上有一个名为“TryGetContentValue”的扩展，您可以使用它在响应内容被格式化程序序列化之前获取它。

# llvm - llvm 指令的行号

> ID：14943447
> 
> 赞同：5
> 
> 时间：2013-02-18T18:58:30.610
> 
> 标签：llvm

我想获取指令的行号（以及变量声明的行号 - alloca 和 global）。该指令保存在指令数组中。我有这个功能：

```
Constant* metadata::getLineNumber(Instruction* I){
    if (MDNode *N = I->getMetadata("dbg")) { // this if is never executed
        DILocation Loc(N);
        unsigned Line = Loc.getLineNumber();
        return ConstantInt::get(Type::getInt32Ty(I->getContext()), Line);
    }   // else {
      //  return NULL; }
} 
```

在我的 main() 中，我有：

```
errs()<<"\nLine number is "<<*metadata::getLineNumber(allocas[p]); 
```

结果为 NULL，因为`I->getMetadata("dbg")`它是假的。

是否有可能在不重建 LLVM 框架的情况下在 LLVM 中启用 dbg 标志，例如在编译目标程序或运行我的通行证时使用标志（我使用了 -debug）？

使用“-O3 -g”编译程序应该会提供完整的调试信息，但我仍然得到相同的结果。我知道[http://llvm.org/docs/SourceLevelDebugging.html](http://llvm.org/docs/SourceLevelDebugging.html)，从中我可以看到从元数据字段中获取源代码行号非常容易。

PS：对于 Allocas，看来我必须使用 DbgInfoPrinter.cpp 中的 findDbgDeclare 方法。

先感谢您 ！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T20:01:33.283

如果您`-g`为 Clang 指定标志，LLVM 会提供调试信息。您无需重新构建 LLVM 即可启用/禁用它 - 任何 LLVM 都可以（包括从二进制文件或二进制包中预先构建的一个）。

问题可能是您试图在高度优化的代码中包含调试信息 ( `-O3`)。这不一定是可能的，因为 LLVM 只是在这种情况下优化了一些代码，并且调试信息没有太大意义。LLVM 尝试在优化期间保留调试信息，但这不是一件容易的事。

首先使用调试信息 ( `-O0 -g`) 生成未优化的代码，然后编写代码/传递来处理它。然后毕业优化代码，并尝试检查具体丢失了什么。如果您认为 LLVM 很愚蠢，请不要犹豫，打开一个错误。

一些随机提示：

*   从 clang ( `-emit-llvm`) 生成 IR 并查看其中的调试元数据节点。然后，您可以进行`opt`优化并查看剩下的内容。
*   其他 LLVM 工具的`-debug`选项`llc`与源中的调试信息完全无关。

# sql - SQL - 糟糕的设计选择？

> ID：14943459
> 
> 赞同：-1
> 
> 时间：2013-02-18T18:59:02.280
> 
> 标签：sql

请看下面的SQL：

```
create table DatasetToID(
    Dataset varchar(100), 
    ID INT, 
    Name varchar(100), 
    age varchar(100),
    primary key (dataset,id)
)

INSERT INTO DatasetToID VALUES ('Sales', 1, 'Ian Ratkin','30')
INSERT INTO DatasetToID VALUES ('Finance', 1, 'Bert Edwards','56')
INSERT INTO DatasetToID VALUES ('Production', 1, 'Marie Edwards','56')
INSERT INTO DatasetToID VALUES ('Sales', 2, 'Karen Bromley','30')
INSERT INTO DatasetToID VALUES ('Finance', 2, 'Steven Tardy','56')
INSERT INTO DatasetToID VALUES ('Production', 2, 'Eric Bishop','56')

create table Deletion(
    Dataset varchar(100), 
    ID INT, decision bit, 
    date datetime
)

INSERT INTO Deletion VALUES ('Sales', 1, 1, '2013-01-01')
INSERT INTO Deletion VALUES ('Finance', 2, 1, '2013-01-01')
INSERT INTO Deletion VALUES ('Sales', 1, 0, '2013-02-02') 
```

我支持的一个直播系统就是这样设计的。如果最近的删除决定（位）为真，则在每个月底从 DatasetToID 和删除中删除记录。在上述 Finance 的情况下，将删除 Sales,1，但不会删除 Sales,1，因为 Sales,1 最近的决定是 0（假）。

我认为这是一个相当糟糕的设计。我相信数据集和 ID 应该在不同的表中，例如不是 DatasetToID。最初的开发者在离开之前似乎不同意。如果我错了，我会徘徊。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T19:05:53.280

这是一种非规范化的设计，在这种工作的某些场景中很常见。特别是，像每月删除或归档这样的定期例程实际上不应该影响您的架构设计。如果这是该密钥对之间的唯一重叠，那么我会说您的旧开发人员可能是正确的。但是，如果这两列一起出现在表格中，那么您可能是对的，应该有一个主记录来进行配对。

# html - 表单提交到 iframe 不起作用 - 它只刷新父级和 iFrame

> ID：14943463
> 
> 赞同：1
> 
> 时间：2013-02-18T18:59:17.987
> 
> 标签：html, iframe, submit

我尝试向 iFrame 提交表单并在 iFrame 中获取搜索结果。无论我写什么文本并推送搜索，它都会刷新父页面和子页面。

我有这个父页面代码：

```
<form id="SearchForm" <form action="http://itmjobs.ro/" target="my-iframe" method="post">
        <label><strong>What?</strong><em><input type="text" value="job title, keywords or company name"  onblur="if(this.value=='') this.value='job title, keywords or company name'" onFocus="if(this.value =='job title, keywords or company name' ) this.value=''" /></em></label>
        <label><strong class="color">Where?</strong><b><input type="text" value="city, state or zip code"  onblur="if(this.value=='') this.value='city, state or zip code'" onFocus="if(this.value =='city, state or zip code' ) this.value=''" /></b></label>
        <a href="#" class="SearchForm-link" onClick="document.getElementById('SearchForm').submit()">Search</a>
<div class="wrapper">
    <td><iframe id="my-iframe" iframe name="my-iframe" iframe allowtransparency="yes" align="right" src="http://itmjobs.ro/" frameborder="0" height="1000" scrolling="no" width="1200"></iframe> 
```

这是我需要提交文本的 iframe 代码中的字段：

```
<div class="quickSearchInputField">Cuvinte cheie<br/>   <input type="text" value="" class="searchText" name="keywords[all_words]"  id="keywords" />
<div class="quickSearchInputName">Oras<br/><input type="text" name="City[like]"  id="City" class="searchStringLike" value=""  />
<div class="quickSearchInputName"><br/><input type="submit" id="btn-search" class="button" value="Cauta"/></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-12T02:19:26.780

您需要`return false`在提交时防止页面刷新。

```
onClick="document.getElementById('SearchForm').submit() return false;" 
```

# ruby-on-rails - 当 id 已经存在时创建失败

> ID：14943465
> 
> 赞同：0
> 
> 时间：2013-02-18T18:59:43.493
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在使用 rake 任务用一些初始数据填充我的数据库。我想在表中创建一堆条目，其中包含前几个 ID，因此它们始终存在，并且始终具有这些 ID。我不介意在开发环境中是否有人添加/删除/修改记录，但我总是希望前 5 个 id 具有值。这是我的 lib/tasks/bootstrap.rb 文件的简化版本：

```
namespace :bootstrap do
    desc "Create the default problem types"
    task :default_problem_types => :environment do
        ProblemType.create( :id => 1, :name => 'Wrong location', :description => 'blah' )
        ProblemType.create( :id => 2, :name =>  'Wrong name', :description => 'blah' )
        ProblemType.create( :id => 3, :name =>  'Wrong details', :description => 'blah' )
        ProblemType.create( :id => 4, :name =>  'Duplicate', :description => 'blah' )
        ProblemType.create( :id => 5, :name =>  'No longer exists', :description => 'blah' )
    end

    desc "Run all bootstrapping tasks"
    task :all => [:default_problem_types]
end 
```

这适用于空数据库。它在 problem_types 表中创建了 5 个新条目：

```
1 - Wrong Location 
2 - Wrong name 
3 - Wrong details 
4 - Duplicate 
5 - No longer exists 
```

问题是，如果我再次运行它，它会创建 5 条新记录，ID 为 6、7、8、9、10。尽管我为已经存在的 create() 调用提供了 ID。我希望这些调用会失败，因为如果我尝试执行以下 SQL：

```
insert into problem_types (id, name, description) values (1, 'foo', 'bar'); 
```

... 它失败：

错误 1062 (23000)：键 'PRIMARY' 的重复条目 '1'

如果 ID 已经存在，如何让 create() 方法失败？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T19:07:49.050

经验法则：您不会自己分配 ID。让数据库做它的工作。如果您希望您的问题名称是唯一的，那么您可以添加`validates_uniqueness_of :name`到模型文件中，如果存在相同的名称，则不会创建记录

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T20:03:08.447

使用动态`find_or_create_by`或`find_or_initialize_by`方法。[您可以在 Active Record 查询接口的 Rails 指南中](http://guides.rubyonrails.org/active_record_querying.html)阅读更多相关信息。它们允许您为每个编写类似这样的内容，`ProblemType`而无需按名称创建重复项：

```
problem_type = ProblemType.find_or_initialize_by_name('Wrong location')
problem_type.description = "blah"
problem_type.save 
```

我同意@benchwarmer；最好避免自己管理主键。如果您必须具有某个语义值的数字标识符，请尝试添加单独的列并相应地设置该值。

# android - android listview中一行的设计

> ID：14943466
> 
> 赞同：0
> 
> 时间：2013-02-18T18:59:47.457
> 
> 标签：android, listview, fragment

我需要有关我的 android 应用程序的帮助。我需要在列表视图中自定义项目。我的应用程序适用于片段。我不知道如何在我的代码中实现 list_item.xml。

KartyListFragment.java

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.karty_list, container, false);
    return view;
} 
```

karty_list.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<ListView
    android:id="@android:id/list"
    android:layout_width="match_parent"
    android:layout_height="0dip"
    android:layout_weight="1"
    android:visibility="gone" />

<TextView
    android:id="@android:id/empty"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:text="@string/prazdna_db"
    android:textColor="#f00"
    android:visibility="visible" />

</LinearLayout> 
```

我想在 list_item.xml 中设计一行，但我不知道怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T19:07:39.700

只需创建您想要的布局并将其作为要膨胀的视图传递给列表适配器。例如，使用`SimpleAdapter`：

```
mAdapter = new SimpleAdapter(context, list, R.layout.my_custom_list_item, from, to);
mListView.setAdapter(myAdapter); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T19:08:15.363

[在这里](http://myandroidsolutions.blogspot.ro/2012/07/android-listview-tutorial.html)你可以找到一个很好的教程来构建你的列表视图。我认为它会对你有所帮助。

# java - 带有序列号的 Java 对象

> ID：14943468
> 
> 赞同：1
> 
> 时间：2013-02-18T18:59:56.723
> 
> 标签：java, object

我需要编写一个父类（Plate）和一些子类（WoodenPlate、PorcelainPlate 等），每个子对象都应该有一个从 1 开始的序列号，然后是 2，等等。我应该在哪里存储这些信息？我可以在父对象中增加一个计数器吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T19:03:25.337

这就是你的一个`Child`班级应该是这样的：

```
class WoodenPlate extends Plate {
    private static int counter = 0;
    private int serialNumber;

    public WoodenPlate() {
        serialNumber = ++counter;
    }
} 
```

然后对于 的每个实例`WoodenPlate`，您可以访问`serialNumber`using *public 访问器*

您可以`Child`像这样定义其余的类。他们每个人都有一个`static`柜台和一个`serialNumber`领域。

* * *

如果您不希望计数从`1`fro every开始`Child`，而只是希望计数从前一个继续，而不管实例化了哪个 Child 类，那么您应该在`Parent`类中有这些字段：

```
class Parent {
    protected static int counter = 0;
    protected int count;

    public int getCount() {
        return count;
    }
} 
```

然后从每个`Child`班级中删除该字段。

# php - MySQL LOAD DATA 正在删除 varchar 字段中的前导零

> ID：14943469
> 
> 赞同：0
> 
> 时间：2013-02-18T19:00:02.830
> 
> 标签：php, mysql, csv

我有一个数据导入例程，它接受 CSV 文件，其中第一列包含一个字符数据集，该数据集由格式为 0123、0517、1531 等的 ID 值组成。通常是 4 位数字，3 位数字前导零。

数据正在使用 varchar(255) 字段加载到表中，但是当我调用 LOAD DATA 命令时，它全部被导入而没有前导零。我在这里缺少什么吗？

```
db_query('CREATE TABLE feed_buildings (
  BLDGID varchar(255),
  BLDGNAME varchar(255),
  CITY varchar(255),
  STATE varchar(255),
  ZIPCODE varchar(255),
  LLRDID varchar(255),
  BLDGGLA varchar(255),
  ADDRESS1 varchar(255),
  ADDRESS2 varchar(255),
  NMBRUNIT varchar(255),
  MNGRID varchar(255),
  INACTIVE varchar(255),
  OCCGLA varchar(255) )', false, false); 
```

在此示例中，当我运行以下命令时，丢失前导零的是 BLDGID 字段：

```
$loadfields = ' ( BLDGID, BLDGNAME, CITY, STATE, ZIPCODE, LLRDID, @ignore, BLDGGLA, @ignore, ADDRESS1, 
  ADDRESS2, @ignore, @ignore, NMBRUNIT, MNGRID, @ignore, @ignore, @ignore, @ignore, @ignore, 
  @ignore, @ignore, @ignore, @ignore, @ignore, @ignore, @ignore, @ignore, INACTIVE, @ignore, 
  @ignore, @ignore, @ignore, @ignore, @ignore, OCCGLA )';

$loadquery = 'LOAD DATA LOCAL INFILE \'' . $path . '\' INTO TABLE feed_buildings . ' FIELDS TERMINATED BY \',\' ENCLOSED BY \'"\' LINES TERMINATED BY \'\r\n\' IGNORE 1 LINES';
db_query_unprepared($loadquery . $loadfields); 
```

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T20:26:00.720

忽略-我不确定前几次是如何发生的，但最后几次是正确导入的。

# c# - 如何为转发器中的元素分配不同的 ID？

> ID：14943471
> 
> 赞同：1
> 
> 时间：2013-02-18T19:00:12.260
> 
> 标签：c#, asp.net, data-binding, ado.net, repeater

我有两个控件和一个位于中继器内的 LinqDataSource。
LinqDataSource 使用从第一个控件获得的条件进行选择。由于我的第二个元素使用 LinqDataSource，我需要提供不同的 ID，否则中继器中所有第二个元素的数据将相同。

有没有办法分配不同的 ID 或任何解决方案来实现我的目标？

这是一个示例代码，旨在更好地理解：

```
<asp:Repeater ID="Repeater1" runat="server" DataSourceID="LinqDataSource4">
     <ItemTemplate>
         <table >
             <tr>
                 <td>
                     <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
                 </td>
                 <td>
                     <asp:LinqDataSource runat="server" EntityTypeName="" ID="LinqDataSourceX" ContextTypeName="Fr.FrestandehEntities" Select="new (Value, Id)" TableName="DProperties" Where="DKey.Key == @DKeyp">
                         <WhereParameters>
                             <asp:ControlParameter ControlID="TextBox1" PropertyName="Text" DefaultValue="X" Name="DKeyp" Type="Object"></asp:ControlParameter>
                         </WhereParameters>
                     </asp:LinqDataSource>
                     <telerik:RadComboBox ID="RadComboBox77" runat="server" DataSourceID="LinqDataSource5" DataTextField="Key" DataValueField="Key"></telerik:RadComboBox>
                 </td>
             </tr>
         </table>
     </ItemTemplate>
 </asp:Repeater> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T19:07:29.310

您需要在转发器 ItemDataBound 事件的代码中执行此操作。不好意思，是vb...

```
 Private Sub Repeater1_ItemDataBound(sender As Object, e As RepeaterItemEventArgs) Handles Repeater1.ItemDataBound

        If e.Item.ItemType = ListItemType.AlternatingItem OrElse e.Item.ItemType = ListItemType.Item Then

            Dim lds As LinqDataSource = CType(e.Item.FindControl("RadComboBox77"), LinqDataSource)
            CType(e.Item.FindControl("RadComboBox77"), RadComboBox).DataSourceID = lds.ID

        End If

    End Sub 
```

我为此使用了 C# 转换器工具，所以我不知道它有多准确。

```
private void Repeater1_ItemDataBound(object sender, RepeaterItemEventArgs e) {
    if (((e.Item.ItemType == ListItemType.AlternatingItem) 
                || (e.Item.ItemType == ListItemType.Item))) {
        LinqDataSource lds = ((LinqDataSource)(e.Item.FindControl("RadComboBox77")));
        ((RadComboBox)(e.Item.FindControl("RadComboBox77"))).DataSourceID = lds.ID;
    }
} 
```

# sql - Postgresql plpgsql/sql 是否支持 where 子句中的短路？

> ID：14943475
> 
> 赞同：14
> 
> 时间：2013-02-18T19:00:22.480
> 
> 标签：sql, postgresql, plpgsql

如果我有以下玩具查询

```
SELECT *
FROM my_tables
WHERE my_id in (
    SELECT my_other_id
    FROM my_other_tables
) AND some_slow_func(arg) BETWEEN 1 AND 2; 
```

WHERE 子句中的第一个条件是否会使运行时间复杂的第二个条件短路？

我正在处理一些实际上是 plpgsql 中 FOR LOOP 的一部分的 sql，我可以对 my_other_tables 中存在的所有记录进行迭代，然后使用 some_slow_func() 在 FOR LOOP 的范围内进行测试。但是我很好奇sql是否支持，或者plpgsql是否支持短路。

一些研究：我查看了 Postgres 邮件列表，发现这句话 SQL 通常不支持短路：

[http://www.postgresql.org/message-id/171423D4-9229-4D56-B06B-58D29BB50A77@yahoo.com](http://www.postgresql.org/message-id/171423D4-9229-4D56-B06B-58D29BB50A77@yahoo.com)

但是其中一个回复说可以通过子选择强制执行顺序。我不确定他在说什么。我知道子选择是什么，但我不确定如何执行顺序？有人可以为我澄清一下吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-18T20:18:48.037

如文件所述，WHERE 子句中的评估顺序应该是不可预测的。

与子查询不同。对于早于版本 12 的 PostgreSQL，驱动评估顺序的最简单和常用的技术是在 CTE 中编写子查询。为确保`IN(...)`首先评估 ，您的代码可以编写为：

```
WITH subquery AS
(select * from my_tables
  WHERE my_id in (SELECT my_other_id FROM my_other_tables)
)
SELECT * FROM subquery
  WHERE some_slow_func(arg) BETWEEN 1 AND 2; 
```

从 PostgreSQL 版本 12 开始，`WITH`优化器可以内联子查询（有关所有详细信息，请参阅[WITH 查询的文档页面](https://www.postgresql.org/docs/12/queries-with.html)`MATERIALIZED`），并且仅在添加子句时才保证非内联：

```
WITH subquery AS MATERIALIZED
(select * ... the rest is similar as above) 
```

* * *

您可能会调整的其他内容是向优化器发出信号缓慢的函数成本。函数的默认成本是`100`，可以使用如下语句进行更改：

```
ALTER FUNCTION funcname(argument types) cost N; 
```

其中`N`是估计的每次呼叫成本，以任意单位表示，应与[Planner Cost Constants](http://www.postgresql.org/docs/current/static/runtime-config-query.html#RUNTIME-CONFIG-QUERY-CONSTANTS)进行比较。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-10-19T16:10:43.447

我知道这是一个老问题，但最近遇到了类似的问题，发现在 WHERE 子句中使用 CASE 谓词对我来说效果更好。在上述答案的背景下：

```
SELECT *
  FROM my_tables
 WHERE CASE WHEN my_id in (SELECT my_other_id
                             FROM my_other_tables)
           AND some_slow_func(arg) BETWEEN 1 AND 2
           THEN 1 
           ELSE 0 
      END = 1; 
```

这使得 SQL 与数据库无关。当然，如果您在 my_id 上有一些索引，它可能不会使用索引，但根据您所处的上下文，这可能是一个不错的选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T19:25:39.613

根据[Postgresql 文档](http://www.postgresql.org/docs/9.0/static/sql-expressions.html#SYNTAX-EXPRESS-EVAL)和[Tom Lane 的回答](http://www.postgresql.org/message-id/454.1304184576@sss.pgh.pa.us)，WHERE 约束的执行顺序不可靠。

我认为您最好的选择可能是将 WHERE 子句的其他部分添加到函数的顶部并“快速失败”；即，`my_id in ( SELECT my_other_id FROM my_other_tables)`在你的函数中运行，如果它没有通过，在你进行密集处理之前返回那里。这应该会给你带来同样的效果。

# sql - 替代 sql 游标

> ID：14943477
> 
> 赞同：3
> 
> 时间：2013-02-18T19:00:27.687
> 
> 标签：sql, sql-server, cursor

我目前正在使用 sql 游标来查找表以更新另一个表。我有一张包含很多短语的表格。如果这些短语中的任何一个落入更新表中的任何列，我想更新另一个表以设置 1。我正在使用 cursor 和 char 来查找短语。光标需要很长时间，我只是想知道是否可以使用其他任何东西来代替光标。谢谢。我正在使用 sql server，这是代码

```
declare @word varchar(max)
    declare @aCursor cursor for
SELECT col from table
    open acursor
    fetch next from acursor into @word
    while @@fetch_status=0
    begin
SET @word = '' + @word + ''
UPDATE updatetable
SET updatecol = 'y'
FROM updatetable u, tableb b
WHERE u.id = b.id AND (CHARINDEX(@word, u.name) > 0 OR CHARINDEX(@word, u.city) >
    fetch next from acursor into @word
    end
    close acursor
    deallocate acursor 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T19:27:00.463

看看：[http](http://weblogs.sqlteam.com/jeffs/archive/2008/06/05/sql-server-cursor-removal.aspx) ://weblogs.sqlteam.com/jeffs/archive/2008/06/05/sql-server-cursor-removal.aspx ，它应该可以帮助您。然而，我已经完全批评了这个问题，对于单独的行操作，游标是要走的路，性能与其他方法大致相同，可读性比其他方法好 10 倍，这使得维护代码更容易。

但是，我没有足够的细节似乎可以理解为什么你不能用更新语句来解决这个问题。

# testing - supertest 是否与 express.js 2.5.8 兼容？

> ID：14943478
> 
> 赞同：2
> 
> 时间：2013-02-18T19:00:29.300
> 
> 标签：testing, express, jasmine, jasmine-node, supertest

我正在使用 express.js 版本 2.5.8（来自遗留代码），并希望使用 supertest 测试路由加载。我在服务器运行时遇到问题，但没有停止。我使用 运行测试`jasmine-node`，这表明我的断言成功。但是，控制台显示该进程仍在运行。

```
var request = require('supertest')
  , express = require('express');

describe('Example Test', function() {
  var app;

  beforeEach(function() {
    app = express.createServer();

    app.configure(function() {
      app.set('port', process.env.PORT || 3000);
      app.use(express.logger('dev'));
      app.use(express.bodyParser());
      app.use(express.methodOverride());
    });

    app.get('/', function(req, res){
      res.send(200);
    });
  });

  it('index should return 200', function(done) {
    request(app)
    .get('/')
    .expect(200)
    .end(function(err, res) {
      expect(err).toBe(null);
      done();
    });
  });
}); 
```

此示例改编自可能使用 express.js 3.xx 的示例。我的假设是 express 服务器的行为不同，导致当请求在测试中终止时它不会关闭。我不确定如何纠正这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T21:02:05.077

服务器仍在运行，因为您没有在任何地方关闭它。只需添加`app.close()`到您`end(function(){})`的停止快递服务器。如果您还想退出节点，请使用`process.exit()`.

# ruby - 使用机械化上传文件失败

> ID：14943482
> 
> 赞同：0
> 
> 时间：2013-02-18T19:00:51.843
> 
> 标签：ruby, mechanize-ruby

我正在尝试使用 Mechanize 自动填写表格（包括文件上传）。我已经完成了 GUI 界面中的过程并且文件上传正常，所以我知道文件没有损坏，但是当我运行我的机械化脚本时它失败了。该脚本正确执行，并且根据调试它上传了文件，但 Canvas（我正在上传到的服务）说无法读取该文件。我已联系 Canvas 支持，但他们无法提供帮助，因为这是对他们系统的非标准使用。

这是脚本（已匿名）：

```
 09 mech = Mechanize.new
 10 mech.log = Logger.new(STDOUT)
 11 mech.user_agent_alias = 'Mac Mozilla'
 12 mech.get("https://ucdenver.test.instructure.com") do |page|
 13   page.form_with(:action => "/login") do |f|
 14     user_field = f.field_with(:name => "pseudonym_session[unique_id]")
 15     user_field.value = user
 16     pwd_field = f.field_with(:name => "pseudonym_session[password]")
 17     pwd_field.value  = pwd
 18   end.submit
 19 end
 20
 21 mech.get("https://ucdenver.test.instructure.com/accounts/1") do |page|
 22   page.form_with(:action => "/accounts/1/courses") do |f|
 23     course_field = f.field_with(:name => "course[name]")
 24     course_field.value = "38492"
 25   end.submit
 26 end
 27
 28 mech.page.link_with(:href  => %r/settings/,
 29                     :class => "settings").click
 30
 31 mech.page.link_with(:href => %r/import/,
 32                     :text => %r/Import Content/).click
 33
 34 mech.page.link_with(:href => %r/imports\/migrate/,
 35                     :text => %r/Import content from a content package/).click
 36
 37 mech.page.form_with(:action => %r/imports\/migrate/) do |f|
 38   export_system = "migration_settings[migration_type]"
 39   f[export_system] = "blackboard_exporter"
 40   f.file_uploads.first.mime_type = "application/zip"
 41   f.file_uploads.first.file_name = bkb_export
 42 end.submit 
```

画布支持说服务器正在返回：

```
Could not unzip archive file, exit status 9, message:     
[/mnt/var/web/migration_tool/data/attachment_420130214-13303-sv6ue5-0.jpg] End-of-central-
directory signature not found. Either this file is not a zipfile, or it constitutes one 
disk of a multi-part archive. In the latter case the central directory and zipfile comment 
will be found on the last disk(s) of this archive. unzip: cannot find zipfile directory in 
one of /mnt/var/web/migration_tool/data/attachment_420130214-13303-sv6ue5-0.jpg or 
/mnt/var/web/migration_tool/data/attachment_420130214-13303-sv6ue5-0.jpg.zip, and cannot 
find /mnt/var/web/migration_tool/data/attachment_420130214-13303-sv6ue5-0.jpg.ZIP, period. 
```

不幸的是，这个错误对我来说毫无意义，但是当脚本上传 .zip 文件时它引用了几个 .jpg 似乎很奇怪。任何想法或帮助将不胜感激，如果我遗漏了任何有用的信息，我很乐意提供更多信息。

如果您真的感觉自己是个入门者，您可以在[http://canvas.instructure.com](http://canvas.instructure.com)上注册一个免费帐户，并亲自查看代码/网络活动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-11T12:56:09.630

确保您上传的文件类型正确 afaik ruby​​-mechanize 指定

```
Content-Type: application/octet-stream 
```

对于每种类型的文件，服务器可能正在检查 ContentType 并且与所需的内容类型不匹配，我不记得我使用的 mechanize 的确切版本，但对我来说它是在 mechanize gem 中硬编码的，所以你必须通过mechanize 的源代码并修复它在哪里硬编码 multipart/form-data 文件元素的内容类型。

# sap - SAP HANA 中的行表

> ID：14943483
> 
> 赞同：-2
> 
> 时间：2013-02-18T19:00:52.857
> 
> 标签：sap, business-intelligence

SAP HANA 启动时是否所有行表都加载到内存中？我知道列的表可以指定为加载到内存或按需内存，但是行表呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T06:14:25.000

不，它不支持对行存储的表进行延迟加载。

行表将始终在启动期间完全加载，并且永远无法卸载。

# c++ - getch() 和 scanf() 函数之间的区别

> ID：14943488
> 
> 赞同：0
> 
> 时间：2013-02-18T19:01:14.003
> 
> 标签：c++, c, scanf, getch

我在执行以下代码时遇到了困难。完成一次执行后，变量“t”取空值。通过使用 getch() 而不是 scanf() 解决了这个问题。但我不知道为什么会这样。有什么解释吗？这是不起作用的程序。

```
#include<stdio.h>
#include<conio.h>
#include<stdlib.h>
char t;
void main()
{
    while(1)
    {
        scanf("%c",&t);
        printf("\nValue of t = %c",t);
        printf("\nContinue (Y/N):");
        char a=getche();
        if(a=='n' || a=='N')
        exit(0);
   }
} 
```

现在，这是正确执行的程序。

```
#include<stdio.h>
#include<conio.h>
#include<stdlib.h>
char t;
void main()
{
    while(1)
    {
         t=getch();
         printf("\nValue of t = %c",t);
         printf("\nContinue (Y/N):");
         char a=getche();
         if(a=='n' || a=='N')
         exit(0);
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-18T19:03:59.347

当你读到一个字符时，

```
scanf("%c",&t); 
```

输入流中留下了一个换行符，导致后续的 scanf() 跳过循环中的输入。

请注意，这`getch()`是非标准功能。你可以`getchar()`改用。

或将其更改为：

```
scanf(" %c",&t); 
```

请注意格式说明符中的空格，它确保 scanf() 在读取字符之前跳过所有空格`%c`。

# javascript - 与 if 一起将值存储在变量中

> ID：14943489
> 
> 赞同：0
> 
> 时间：2013-02-18T19:01:17.913
> 
> 标签：javascript, mediawiki

我正在尝试创建一个讨论页链接，该链接会根据您可能所在的名称空间进行更改。例如，如果您在 mainspace 中，您将被定向到 Talk：如果在 Category_talk 类别中：。到目前为止我有这个：

```
var namespace = if (wgNamespaceNumber == '0') {
    return ('Talk');
} else {
    return (mw.config.get( 'wgCanonicalNamespace' ) + '_talk');
} 
```

但它只是返回一个语法错误，如果是意外的标记。我猜你不能以这种方式使用 if ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T19:03:02.240

[`return`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/return)用于将值或对象从函数中传递出来，而不是像`if/else`.

```
var namespace;

if (wgNamespaceNumber == '0') {
    namespace = 'Talk';
} else {
    namespace = mw.config.get( 'wgCanonicalNamespace' ) + '_talk';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T19:06:58.170

你不需要返回任何东西。您可以根据条件设置变量的值。然而，该函数将需要返回一个值。

```
var namespace = (wgNamespaceNumber == '0')
    ? 'Talk'
    : mw.config.get( 'wgCanonicalNamespace' ); 
```

上面的条件称为三元（[**MDN 解释得更好**](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Conditional_Operator)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T19:03:29.157

你猜对了。您不能分配这样的 IF。

将您的代码更改为

```
var namespace = null;

if (wgNamespaceNumber == '0') {
    namespace = 'Talk';
} else {
    namespace =  (mw.config.get( 'wgCanonicalNamespace' ) + '_talk');
} 
```

它会起作用的。

# android - 发送带有口音的短信

> ID：14943491
> 
> 赞同：0
> 
> 时间：2013-02-18T19:01:31.933
> 
> 标签：android, sms

我用这个代码发送短信

```
SmsManager smsManager = SmsManager.getDefault();
smsManager.sendTextMessage("Numerber", null, "Text to send", null, null); 
```

它在英语中运行良好，但如果我使用西班牙语，它会失败。经过多次尝试，我发现如果“要发送的文本”包含“á, é, í, ó, ú”之类的口音，则发送的消息会被裁剪

当然，这些口音在西班牙语中需要以适当的写作方式，所以对此有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T19:36:30.747

感谢大家。是的，就是你说的。这是解决方案：

```
ArrayList<String> arrSMS = smsManager.divideMessage("Text to send");
smsManager.sendMultipartTextMessage("Number", null, arrSMS, null, null); 
```

# jekyll - 突出显示多行

> ID：14943492
> 
> 赞同：2
> 
> 时间：2013-02-18T19:01:35.547
> 
> 标签：jekyll, pygments

我正在使用 pygments 进行语法突出显示，并希望突出显示代码中的某些行。这适用于突出显示一行，但我将如何突出显示多行？我试过逗号和空格分隔的列表无济于事。

```
{% highlight python hl_lines=7 %} # works
{% highlight python hl_lines=7,8 %} # does not work
{% highlight python hl_lines=7 8 %} # does not work
{% highlight python hl_lines=7-8 %} # does not work 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-12-04T16:47:26.173

使用字符串并用空格分隔行号。

```
{% highlight python linenos hl_lines="1 3 4" %}
def say_hi(to_who):
    print "Hello,", to_who

say_hi("World")
{% endhighlight %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T18:02:54.140

我不熟悉仅使用`{% highlight %}`标签本身。我总是结合使用它`{% endhighlight %}`来识别代码块。这在我的 Jekyll 0.12.1 安装上按预期工作。

```
{% highlight python %}

def say_hi(to_who):
    print "Hello,", to_who

say_hi("World")

{% endhighlight %} 
```

使用默认的 CSS（并对背景颜色进行了一些调整），上面的结果如下：

![Pygments 输出示例](../Images/54ecaea734eaf7bf94a57ed9e1a94d87.png)

# css - 在 div 内缩放

> ID：14943504
> 
> 赞同：0
> 
> 时间：2013-02-18T19:02:53.463
> 
> 标签：css

我有固定宽度和高度（400x300px）的包装div。在具有自己的宽度/高度（横向 800x600 像素）或（纵向 600x800 像素）的内部，有时图像可以具有不同的大小。如何使用 CSS 进行缩放，以便两者都可以按比例缩小以适应宽度或高度 - 以先到者为准？

这是代码：

```
<div style="width:400px; height:300px;">
    <img style="width:auto; height:auto;" src="image url>" />
</div> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T19:05:15.653

```
.your-image {
  max-width: 100%;
  max-height: 100%;
} 
```

见[演示](http://jsfiddle.net/zaknotzak/tmuWY/1/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T19:10:19.537

使用最大宽度和最大高度：

```
img {
    max-width: 400px; 
    max-height: 300px;
} 
```

# python - 从 Python 调用 PARI/GP

> ID：14943507
> 
> 赞同：6
> 
> 时间：2013-02-18T19:03:07.107
> 
> 标签：python, linux, pari-gp

我想从 Python 调用[PARI/GP](http://pari.math.u-bordeaux.fr/dochtml/gpman.html)只是为了计算我定义`nextprime(n)`的不同s 的函数。`n`不幸的是，我无法安装[pari-python](http://code.google.com/p/pari-python/)`os.system` ，所以我想我会在 Python 中使用命令行调用它。但是，我在手册页中看不到如何让 PARI/GP 在非交互模式下运行。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T20:49:12.737

您可以像这样通过管道将输入输入 gp 的标准输入，使用该`-q`标志来消除冗长：

```
senderle:~ $ echo "print(isprime(5))" | gp -q
1 
```

但是，创建一个简单的 python 扩展并允许您将字符串传递给 pari 的内部解析器并返回结果（作为字符串）并不难。这是我前段时间写的一个基本版本，这样我就可以从 python调用 pari 的[APRT 测试实现。](https://stackoverflow.com/q/4752190/577088)您可以进一步扩展它以进行适当的转换等。

```
//pariparse.c

#include<Python.h>
#include<pari/pari.h>

static PyObject * pariparse_run(PyObject *self, PyObject *args) {
    pari_init(40000000, 2);
    const char *pari_code;
    char *outstr;

    if (!PyArg_ParseTuple(args, "s", &pari_code)) { return NULL; }
    outstr = GENtostr(gp_read_str(pari_code));
    pari_close();
    return Py_BuildValue("s", outstr);
}

static PyMethodDef PariparseMethods[] = {
    {"run", pariparse_run, METH_VARARGS, "Run a pari command."},
    {NULL, NULL, 0, NULL}
};

PyMODINIT_FUNC initpariparse(void) {
    (void) Py_InitModule("pariparse", PariparseMethods);
} 
```

和设置文件：

```
#setup.py

from distutils.core import setup, Extension

module1 = Extension('pariparse',
                    include_dirs = ['/usr/include', '/usr/local/include'],
                    libraries = ['pari'],
                    library_dirs = ['/usr/lib', '/usr/local/lib'],
                    sources = ['pariparse.c'])

setup (name = 'pariparse',
       version = '0.01a',
       description = 'A super tiny python-pari interface',
       ext_modules = [module1]) 
```

然后只需键入`python setup.py build`以构建扩展。然后你可以这样称呼它：

```
>>> pariparse.run('nextprime(5280)')
'5281' 
```

我刚刚对此进行了测试，它使用通过自制软件（在 OS X 上）提供的最新版本的 pari 为我编译。YMMV！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T21:59:57.363

您可能想尝试使用[Sage](http://sagemath.org/)数学工具。Sage 使用 Python 将各种数学库（包括 PARI）粘合在一起。一些数学库很好地集成，另一些则使用 hacks（将字符串传递到库，然后解析字符串结果），但在所有情况下，其他人为您完成了集成工作，您可以使用它。

您可以设置自己的 Sage 系统，也可以获取免费帐户并在华盛顿大学的服务器上试用 Sage。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-08T13:27:57.897

我认为调用它不是一个好主意，`os.system`除非当你有一个可靠的 C 库支持时，这是一个快速而肮脏的解决方法。从 Python 调用 C 函数非常容易；这里有两个调用 nextprime 的函数。一种是使用`long`整数（尽管有名称，但在这里意味着您使用的是小整数）；另一种是使用`string`类型（对于更长的整数）。

首先检查您是否已`libpari`安装。下面的解决方案适用于 Linux，并假定您的库名为`libpari.so`. 在 Windows 下，它可能会使用`.dll`后缀来调用。如果第一次尝试未找到 DLL 文件，您可能需要输入完整的路径：

```
import ctypes

# load the library
pari=ctypes.cdll.LoadLibrary("libpari.so")

# set the right return type of the functions
pari.stoi.restype = ctypes.POINTER(ctypes.c_long)
pari.nextprime.restype = ctypes.POINTER(ctypes.c_long)
pari.strtoGENstr.restype = ctypes.POINTER(ctypes.c_long)
pari.geval.restype = ctypes.POINTER(ctypes.c_long)
pari.itostr.restype = ctypes.c_char_p

# initialize the library 
pari.pari_init(2**19,0)

def nextprime(v):
  g = pari.nextprime(pari.stoi(ctypes.c_long(v)))
  return pari.itos(g)

def nextprime2(v):
  g = pari.nextprime(pari.geval(pari.strtoGENstr(str(v))))
  return int(pari.itostr(g))

print( nextprime(456) )
print( nextprime2(456) ) 
```

# java - 递归求和列表

> ID：14943508
> 
> 赞同：0
> 
> 时间：2013-02-18T19:03:07.020
> 
> 标签：java, list, recursion

我的问题是什么？我试图总结列表，它总是返回 0

```
public static int sum(List<Integer> l, Node<Integer> pos, int sum)  
{  
    if(pos==null)  
        return 0;  
    sum=sum+pos.getInfo();  
    pos=pos.getNext();  
    return sum+sum(l, pos, sum);  
}

public static void main(String[] args) { 
    int sum=0; 
    List<Integer> l = new List<Integer>(); 
    Node<Integer> pos = l.getFirst(); 

    l = input(l, pos); 
    System.out.println(l); 
    System.out.println(sum(l, pos, sum)); 
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T19:09:43.443

您在评论中说您的呼叫站点如下：

```
public static void main(String[] args) {
    int sum = 0;
    List<Integer> l = new List<Integer>();
    Node<Integer> pos = l.getFirst();      //<======= `pos' refers to the empty list
    l = input(l, pos);
    System.out.println(l);
    System.out.println(sum(l, pos, sum));
} 
```

问题在于，由于您`pos`在将任何内容添加到列表之前进行了初始化，因此您总是总结原始（空）列表。

# ruby - 机架路由 - NoMethodError

> ID：14943511
> 
> 赞同：1
> 
> 时间：2013-02-18T19:03:26.973
> 
> 标签：ruby, routing, rack

但是，我正在尝试在 Rack 中设置一个基本的路由系统。我不明白为什么第一个路由（'/'）有效，而第二个（'/help'）无效。在“/help”的情况下返回的是 NoMethodError。为什么会这样，我该如何解决？谢谢你。

```
require 'rack'

class MyApp
  def self.call(env)
    new.call(env)
  end

  def self.get(path, &block)
    @@routes ||= {}
    @@routes[path] = block
  end

  def call(env)
    dup.call!(env)
  end

  def call!(env)
    @req = Rack::Request.new(env)
    @res = Rack::Response.new
    @res.write route(@req.path)
    @res.finish
  end

  def route(path)
    if @@routes[path]
      @@routes[path].call
    else
      'Not Found'
    end
  end

  def to_do(arg)
    arg
  end
end

MyApp.get '/' do
  'index'
end

MyApp.get '/help' do
  to_do 'help'
end

run MyApp 
```

# localhost - 在 LAMP 堆栈和 ExpressionEngine 上迁移数据库

> ID：14943520
> 
> 赞同：0
> 
> 时间：2013-02-18T19:03:56.193
> 
> 标签：localhost, expressionengine, lamp

我对开发非常陌生，并且无法将现有的 ExpressionEngine 站点配置为在本地运行。一切都在远程服务器上正常运行。要将其移动到本地 LAMPhp 设置，我按照[http://ellislab.com/expressionengine/user-guide/operations/moving.html](http://ellislab.com/expressionengine/user-guide/operations/moving.html)上的说明使用站点数据库的备份。

本地环境的当前状态是：

*   主页正确加载（localhost/url）
*   所有链接都正确生成（localhost/url/...）
*   所有这些链接都返回 404 错误

我确认可以使用我的 database.php 文件中的相同主机、用户、数据库和名称通过 mysql_connect 和 mysql_select_db 成功访问数据库。我怀疑数据库仍然没有正确配置，但我在网上找不到任何好的资源。

来自这里更有经验的成员的任何建议将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T19:26:09.747

你确定你的 .htaccess 文件移动了吗？它是隐藏的，所以有时它会被遗忘。

# perl - 按值哈希排序 Perl

> ID：14943522
> 
> 赞同：1
> 
> 时间：2013-02-18T19:04:04.480
> 
> 标签：perl, sorting, hash-of-hashes

假设我有一个哈希数据结构的哈希构造如下：

```
%HoH => (
     flintstones => {
               family_members    => "fred;wilma;pebbles;dino",
               number_of_members => 4,
     },
     jetsons => {
               family_members    => "george;jane;elroy",
               number_of_members => 3,
     },
     simpsons => {
               family_members    => "homer;marge;bart;lisa;maggie",
               number_of_members => 5,
     },

) 
```

我如何按`number_of_members`从最大到最小的值对键（在这种情况下为家庭）进行排序？然后我想打印出最高的两个。这是一个普遍的想法，但我知道这是错误的：

```
foreach $value (
    sort {
    $HoH{$a}{$number_of_members} cmp $HoH{$b}{$number_of_members}
    } keys %HoH)
my $count = 0;
while ($key, $value) = each %HoH) {
    if (count <= 2){
        print "${HoH}{$key}\t$key{$value}";
    }
}
continue {
    $count++;
}; 
```

我想要打印代码（空格是制表符分隔的）：

```
simpsons    homer;marge;bart;lisa;maggie
flintstones    fred;wilma;pebbles;dino 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T19:18:45.717

你在正确的轨道上。您在哈希中使用`$a`和`$b`内部变量并以数字方式比较值（`<=>`not `cmp`）。

打印时，我发现将键存储在数组中并使用数组切片来访问它们最容易。

```
use strict;
use warnings;

my %HoH = (
     flintstones => {
               family_members    => "fred;wilma;pebbles;dino",
               number_of_members => 4,
     },
     jetsons => {
               family_members    => "george;jane;elroy",
               number_of_members => 3,
     },
     simpsons => {
               family_members    => "homer;marge;bart;lisa;maggie",
               number_of_members => 5,
     },    
);
my @sorted = sort { $HoH{$b}{'number_of_members'} <=> 
                    $HoH{$a}{'number_of_members'} } keys %HoH;

for (@sorted[0,1]) {   # print only first two
    print join("\t", $_, $HoH{$_}{'family_members'}), "\n";
} 
```

**输出：**

```
simpsons        homer;marge;bart;lisa;maggie
flintstones     fred;wilma;pebbles;dino 
```

# android - 在相机中使用 SetPreviewDisplay 时的 Android 预览格式

> ID：14943524
> 
> 赞同：0
> 
> 时间：2013-02-18T19:04:08.330
> 
> 标签：android

如果我在相机中使用“setPreviewDisplay”，就像下面的 api

public final void setPreviewDisplay (SurfaceHolder holder)

什么样的格式会传递给 SurfaceHolder 进行显示？是NY21还是YV12？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T19:31:59.823

确切的格式取决于平台，因为应用程序无法访问发送到 Surface 的图像帧。

事实上，它可能不是[android.graphics.ImageFormat](http://developer.android.com/reference/android/graphics/ImageFormat.html)中列出的任何格式，因为为了提高效率，可能会使用完全特定于设备的格式，具有不同的填充和步幅要求。

您是否想到了一些知道格式很重要的用例？由于无法访问数据，我很好奇那是什么。

# java - 正确从 ConcurrentHashMap 中删除值

> ID：14943531
> 
> 赞同：2
> 
> 时间：2013-02-18T19:04:34.907
> 
> 标签：java, client, concurrenthashmap

我正在制作一个简单的客户端服务器程序，它允许用户连接、更改他们的名字并进入房间聊天。如果客户端没有活动，服务器会定期向每个客户端发送心跳信号，如果客户端没有响应，则删除客户端。

为了进一步加强我的服务器清理，我还会定期检查我的房间是否是空的，在这种情况下，我会从服务器上删除房间以防止不必要的数据堆积。然而，这种移除会产生一个问题。我正在使用 ConcurrentHashMap 将房间名称映射到包含玩家名称及其套接字的 ConcurrentHashMap。然后，我周期性地遍历每个房间，检查它是否包含任何玩家（大小> 0）。如果没有，我删除房间。

但是，当服务器决定清理空房间时，当用户选择加入空房间的确切时间时，这会出现一个非常有问题的情况。由于 ConcurrentHashMap 处理所有底层同步，因此我无法同步这种特定情况，以便删除是 100% 线程安全的。用户可能会在房间被移除时加入房间，这会导致他陷入困境。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T19:14:52.503

我会将外部地图保留为 ConcurrentHashMap，但将内部地图替换为 ChatRoom 类。单个房间的预期活动率似乎无法证明如此强大的并发地图是合理的。

ChatRoom 类应该是线程安全的，并且应该有一个“已关闭”标志来指示房间是否已关闭。close() 方法应该使用房间的锁来更改标志，并使任何后续操作非法。实际上 close 方法应该返回一个布尔值，指示房间是否已关闭；当且仅当房间是空的时才应该关闭它。

您的空闲房间检查器线程应调用 room.close()，然后将其从外部地图中删除。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T19:12:58.083

您可以向 Room 添加同步方法，例如`boolean closeIfEmpty()`. 如果成功，您可以安全地从地图中移除房间（使用 2 参数移除方法）。如果添加代码试图添加到一个封闭的房间，添加应该失败，调用者创建一个新的房间并替换封闭的房间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T19:18:20.577

您可以在 Room ConcurrentHashMap 实例上同步删除和“将用户添加到房间”操作，还可以在房间上保留“关闭”标志。

就像是

```
void scanRoomAndRemove(Map room) {
 synchronized (room) { 
   // scan room, remove from parent Map if empty
   room.put("closed",new Object());
 }
}

void addPlayerToRoom(Player player,Map room) {
 synchronized(room) {
  if ( !room.containsKey("closed")) {
    // add player to room  
  } else {
    // whine here
  }
 }
} 
```

# css - 没有扩展滚动区域的功能区标题

> ID：14943533
> 
> 赞同：0
> 
> 时间：2013-02-18T19:04:41.083
> 
> 标签：css, header, scrollbar, ribbon, viewport

我正在实现一个简单的带状标题，它延伸出内容区域（左右），显示带有图像背景的 3d 效果（没有 css3 技巧）。

我尝试了浮动、负边距和最后的相对定位，但我的问题是我尝试的所有解决方案都增加了内容的可滚动宽度（向右扩展）。我想保持我的功能区作为“背景效果”保持内容的可滚动宽度。

查看我的简化工作示例：http: [//jsfiddle.net/c5cVG/16/](http://jsfiddle.net/c5cVG/16/)

```
body {
    background: blue;
}

body>div {
    width: 200px;
    margin: 0 auto;
    background: white;
}

body>div>p {
    padding: 5px;
}

body>div>h2 {
    overflow: hidden;
    padding: 10px 20px 5px;
    background: red;
    width: 190px;
    left: -15px;
    position: relative; 
} 
```

如果您将视口宽度设置为低于 215px，您可以看到红色“丝带”的左边缘延伸位于视口之外，并且无法使用水平 scollbar 在内部滚动。

我想在右边缘扩展（溢出白色区域）上获得相同的效果，但它会推动可滚动区域的右边缘并使其自身可滚动。

任何帮助或演示将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T08:13:48.563

好的，我在这个线程中找到了一个看起来不错的解决方案：[https](https://stackoverflow.com/a/2650215/2084434) : //stackoverflow.com/a/2650215/2084434（Nikolaos Dimopoulos 的回答）

将整个内容包装在另一个 div 中并应用

```
#wrapper {
    width: 100%;
    overflow: hidden;
    min-width: 200px;
} 
```

工作正常。这是更新的小提琴：http: [//jsfiddle.net/jJaxp/2/](http://jsfiddle.net/jJaxp/2/)

# ruby-on-rails - 如何在附加文件名上更改rails3中模型的错误消息

> ID：14943539
> 
> 赞同：2
> 
> 时间：2013-02-18T19:05:01.660
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我需要更改错误消息

我的模型代码是：

```
class Resume < ActiveRecord::Base
    attr_accessible :key_skills, :resume_category, :about_myself, :year_experience, :month_experience, :current_salary, :education_details, :jobs_preference, :resume_title,:avatar,:avatar_file_name,:avatar_content_type

    has_attached_file :avatar,
        :storage => :dropbox,
        :dropbox_credentials => "#{Rails.root}/config/dropbox.yml",
        :dropbox_options => {
        :unique_filename => true
    }

    validates_format_of :avatar_file_name, :with => %r{\.(docx|doc|pdf)$}i,:message => "Accept only doc and pdf" 
```

但提交表单上显示的错误消息是：“头像文件名仅接受 doc 和 pdf”

我需要错误消息：“只接受 doc 和 pdf”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T21:11:10.397

您必须将`:"errors.format"`语言环境文件中的 更改为`format: %{message}`.
这样做，对于任何模型的每条消息，都只会打印出消息。

或者，您可以使用这样`@resume.errors[:avatar_file_name][0]`的东西： 0 索引是因为您只有那个验证（现在）。

然而，这个问题的最佳解决方案可能是：

```
<% @resume.errors.each do |attr, msg|
     msg = @resume.errors.full_message(attr, msg) unless attr == :avatar_file_name %> 
```

# html - cakePHP 和 Boostrap 将 html 代码插入表单 - 单选 - 选项

> ID：14943552
> 
> 赞同：1
> 
> 时间：2013-02-18T19:05:51.933
> 
> 标签：html, forms, cakephp, twitter-bootstrap, helper

是否可以使用 Bootstraps formhelper 将自定义 html 代码插入到选项名称中？

```
<?php
  echo $this->BootstrapForm->input('where', array(
      'options' => array('1' => 'foo'),
      'type' => 'radio'
      ));

?> 
```

我希望它是

```
<?php
  echo $this->BootstrapForm->input('where', array(
      'options' => array('1' => '<span class="italic">f</span>oo'),
      'type' => 'radio'
      ));

?> 
```

但是当我插入代码时，它会从输出中删除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:49:42.230

我不确定您使用的是哪个 BoostrapForm 助手，但您是否考虑过将标志转义设置为 false ？

```
<?php
  echo $this->BootstrapForm->input('where', array(
      'options' => array('1' => '<span class="italic">f</span>oo'),
      'type' => 'radio',
      'escape' => false,
      ));

?> 
```

# java - 频繁刷新/ajax调用次数后spring冻结

> ID：14943555
> 
> 赞同：0
> 
> 时间：2013-02-18T19:06:02.187
> 
> 标签：java, spring, hibernate, spring-mvc

我有一个似乎工作正常的 Spring 应用程序，除了在 5-6 个请求之后，它停止并且无法处理任何新的传入请求。

我的页面有一个选择下拉列表，并且该下拉列表的 onChange 对 spring 服务器进行 ajax 调用。在大约 5 或 6 个之后，不再接受，刷新页面无限期挂起。

知道可能是什么原因造成的吗？如果您需要有关配置文件等的更多信息，请告诉我，但我希望这是一个足够常见的问题，可以指出正确的方向。

谢谢

编辑

这是我的名为 onChange 的 ajax 代码

```
$.ajax({
            url: "./service.go?data="+data+",
            dataType:"json",
            timeout:15000,
            cache: false,
            success: function(data){
                ...
            },
            error: function(request,cause,data){
                if (cause ==="timeout"){
                          alert("Request timed out!");
                }
                else{
                          alert("ERROR: " + data.responseText);
                }
            }

        }); 
```

但是，我认为这不是问题，因为即使我根本不使用 ajax 并且只是在浏览器中一遍又一遍地刷新，它也会失败。

通过进一步测试，当我遇到不需要数据库连接的映射时，问题不会发生，所以它可能与我的休眠池配置有关？如果我刷新需要数据库连接的页面，则问题始终出现在第 10 个请求上。这是我的休眠 c3p0 配置

```
driverClassName=com.sybase.jdbc3.jdbc.SybDriver
url=jdbc:    HIDDEN
username= 
password= 
# Number of Connections a pool will try to acquire upon startup
initialPoolSize=5
# Minimum number of Connections a pool will maintain at any given time
minPoolSize=1
# Maximum number of Connections a pool will maintain at any given time
maxPoolSize=20
# Connections to acquire when the pool is exhausted
acquireIncrement=5
# Seconds a Connection can remain pooled but unused before being discarded. 30 Min Check
maxIdleTime=1800
#Test all idle, pooled but unchecked-out connections, every this number of seconds
idleConnectionTestPeriod=300 
```

并使用这些属性我定义我的池豆如下

```
<bean id="dsrc" class="com.mchange.v2.c3p0.ComboPooledDataSource">
        <property name="driverClass" value="${driverClassName}" />
        <property name="jdbcUrl" value="${url}" />
        <property name="user" value="${username}" />
        <property name="password" value="${password}" />

        <property name="initialPoolSize" value="${initialPoolSize}" />
        <property name="minPoolSize" value="${minPoolSize}" />
        <property name="maxPoolSize" value="${maxPoolSize}" />
        <property name="acquireIncrement" value="${acquireIncrement}" />
        <property name="maxIdleTime" value="${maxIdleTime}" />
        <property name="idleConnectionTestPeriod" value="${idleConnectionTestPeriod}" />
    </bean> 
```

这是我的控制器中的简单功能，直到他第 10 次

```
@RequestMapping(method = RequestMethod.GET, value = "/test")
public @ResponseBody String test(){
    System.out.println("Hello");
    //List<Object> objects = objectService.getObjects(station); // calls hibernate DAO and when this is used instead of system.out, halts after 10th call.
    return "";

} 
```

所以我知道它由于打印输出而击中控制器，直到第 10 次。我不确定此后如何判断请求是否命中服务器，因为我知道至少映射没有命中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T20:29:16.050

您的数据库连接处理可​​能有问题。可能是他们没有被送回游泳池。确保关闭所有连接。

# c# - 在 C# 中使用未分配的局部变量

> ID：14943556
> 
> 赞同：0
> 
> 时间：2013-02-18T19:06:04.427
> 
> 标签：c#, loops

我目前的任务是让用户输入 5 个变量。使用变量，我需要创建一系列循环来读取变量并将它们分配给变量。我只需要使用 1`Console.ReadLine();`我目前有这个设置：

```
string userName = ""; 
int v1, v2, v3, v4, v5 = 0;  

int i = 1;

while (i <= 5)
{
    int InputCheck = 0;
    Console.WriteLine("Please input a number {0} between 10 and 50;", i);
    InputCheck = Convert.ToInt32(Console.ReadLine());

    if (InputCheck >= 10 && InputCheck <= 50) 
    {

        //if (i >= 10 && i <= 50)
            //i++;

        if (i == 1)
        {
            InputCheck = v1;
        }

        else if (i == 2)
        {
            InputCheck = v2;
        }

        else if (i == 3)
        {
            InputCheck = v3;
        }

        else if (i == 4)
        {
            InputCheck = v4;
        }

        else if (i == 5)
        {
            InputCheck = v5;
        }

        if (InputCheck < 10 || InputCheck > 50)
        {
            Console.WriteLine("The number you entered is either to high or to low please re-enter a number:");
        }
    } 
```

我很困惑为什么我会收到错误使用未分配的变量。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T19:16:51.880

您永远不会声明 v1、v2、v3 等。但是假设您在其他地方声明它们，如果我理解您要做什么，那么您的分配是倒退的。

例如，你在哪里写作

```
InputCheck = v1; 
```

你可能想要

```
v1 = InputCheck; 
```

然后您可以通过 v1、v2 等，并使用这些值做您想做的事情（这将是用户输入的输入内容）。

好的...在您最近发表评论之后，您强调您在其他地方初始化 v1-5，我很确定您的问题是您的分配只是颠倒了，正如我上面所说的。如果您需要帮助了解原因，请询问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T19:21:29.073

您将变量声明为

```
 int v1, v2, v3, v4, v5 = 0; 
```

这会初始化 v5 而不是其他的。错误消息实际上提供了线索。阅读消息始终是第一个调试工具。

该消息告诉您“v1 未初始化”。所以你去看看你在哪里初始化它（或者你还没有）。这就是如何找到这样的错误。

实际上，当您说您将 0 分配给它们时，我知道您在一个声明中遇到了多个变量的问题。该消息使我能够在没有看到您的代码的情况下找到问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T19:19:40.000

考虑使用 a[`List`](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)来保存数字

```
var numbersList = new List<int>();

while(numbersList.Count <= 5)
{
    int input = Convert.ToInt32(Console.ReadLine());
    if(input >= 10 && input <= 50)
    {
        numbersList.Add(input);
        continue;
    }

    Console.WriteLine("The number you entered is either to high or to low please re-enter a number:");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T19:32:10.420

您是否正在初始化变量 v1,v2,v3,v4,v5 ？考虑到您没有初始化变量；您不能将未分配的变量分配给任何其他局部变量，因此声明变量 v1,v2,v3,v4,v5 = 0 问题将得到解决。如上所述，建议使用通用列表。

# sql - 扩大 SURF 查找

> ID：14943559
> 
> 赞同：-1
> 
> 时间：2013-02-18T19:06:21.500
> 
> 标签：sql, opencv, surf

我目前正在尝试识别普通照片中的 DVD 封面。我最初的测试涉及使用 100 个 DVD 封面和 10 个包含它们的照片测试用例，并且通过对 OpenCV 中的 find_obj.cpp 示例进行一些调整，我能够让识别工作。

但是现在我需要在更大的数据库上执行此操作，并且我知道 FLANN 方法无法很好地扩展以满足此要求。这里的人如何建议我在 SQL 数据库中扩大我的 SURF 识别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T09:07:29.753

如果你真的想将你的系统扩展到几个数量级，最近邻搜索 (FLANN) 是不够的。

在这种情况下，您需要通过量化描述符来构建视觉词汇表（又[名词袋](http://en.wikipedia.org/wiki/Bag-of-words_model_in_computer_vision)），并创建[倒排索引](http://en.wikipedia.org/wiki/Inverted_index)。

我建议您参考[Scalable Recognition with a Vocabulary Tree](http://www.vis.uky.edu/~stewe/publications/nister_stewenius_cvpr2006.pdf)论文，该论文是此类主题的参考出版物。

# python - Python NoneType _getitem_ 错误

> ID：14943560
> 
> 赞同：0
> 
> 时间：2013-02-18T19:06:24.367
> 
> 标签：python, runtime-error, nonetype

我正在使用来自美国 CERT 的一个用 python 编写的软件来做一些模糊测试。软件中包含一个 minimumr.py 工具，该工具旨在针对某些导致崩溃的测试用例运行，以便准确确定导致崩溃的字节突变。

但是，当尝试运行该工具时，它会向我吐出一个错误。谷歌搜索工具和错误都是空白。尝试以有限的 Python 经验自行解决问题也无济于事。关于导致错误的任何想法，以便我可以修复它并让工具正常工作？

正在使用的命令行选项是：minimizer.py --stringmode

错误输出如下：

```
Traceback (most recent call last):
File "C:\FOE2\tools\minimize.py", line 234, in <module>
main()
File "C:\FOE2\tools\minimize.py", line 183, in main
config = Config(cfg_file).config
File "C:\FOE2\certfuzz\campaign\config\__init__.py", line 76, in __init__
self._set_derived_options()
File "C:\FOE2\certfuzz\campaign\config\foe_config.py", line 93, in _set_derived_options
t = Template(self.config['target']['cmdline_template'])
TypeError: 'NoneType' object has no attribute '__getitem__' 
```

最后两行错误中两个文件的代码段是：

`__init__.py`：

```
 def __init__(self, config_file):
    self.file = config_file
    self.config = None

    self.load()
    self._set_derived_options()

    self.validations = []
    self._add_validations()
    self.validate()

def _set_derived_options(self):
    pass 
```

然后从`foe_config_.py`（添加前面的代码行以防万一它们相关。）：

```
class Config(ConfigBase):
  def _add_validations(self):
    self.validations.append(self._validate_debugger_timeout_exceeds_runner)

  def _set_derived_options(self):
    # interpolate program name
    # add quotes around $SEEDFILE
    t = Template(self.config['target']['cmdline_template'])
    #self.config['target']['cmdline_template'] = t.safe_substitute(PROGRAM=self.config['target']['program'])
    self.config['target']['cmdline_template'] = t.safe_substitute(PROGRAM=quoted(self.config['target']['program']), SEEDFILE=quoted('$SEEDFILE')) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T19:09:08.413

从您发布的代码中很难分辨，但它看起来像`__init__`设置`self.config`为`None`. 然后它调用`_set_derived_options`which uses `self.config`here：

```
t = Template(self.config['target']['cmdline_template']) 
```

但`self.config`从未改变过`None`。你不会期望`None['target']`给你任何东西（除了例外），但我认为这基本上就是你在这里所做的。

# upload - 通过 OPTIONS 后 S3 CORS 上传中止

> ID：14943561
> 
> 赞同：0
> 
> 时间：2013-02-18T19:06:25.563
> 
> 标签：upload, amazon-s3, cors, put

我正在尝试从浏览器上传文件，但它根本不起作用。

我的存储桶 CORS 配置是：

```
<?xml version="1.0" encoding="UTF-8"?>
 <CORSConfiguration xmlns="http://s3.amazonaws.com/doc/2006-03-01/">
    <CORSRule>
        <AllowedOrigin>*</AllowedOrigin>
        <AllowedMethod>PUT</AllowedMethod>
        <AllowedMethod>POST</AllowedMethod>
        <AllowedMethod>GET</AllowedMethod>
        <MaxAgeSeconds>3000</MaxAgeSeconds>
        <AllowedHeader>*</AllowedHeader>
    </CORSRule>
</CORSConfiguration> 
```

在我的代码中，我发送了这个：

```
xhr.open('PUT', "http://upload.test.s3.amazonaws.com/" + uploadFile.get("dest") +'?' +   "partNumber=" + (part + 1) +  "&" + "uploadId=" + uploadFile.get("uploadId"), true);
xhr.setRequestHeader("Authorization", uploadFile.get("authorization"));
xhr.setRequestHeader("x-amz-date", uploadFile.get("date"));
xhr.setRequestHeader("Content-Type", uploadFile.get("rawFile").type);
xhr.setRequestHeader("x-amz-acl", "public-read");
xhr.send(chunk); 
```

Ps：uploadFile 有一些属性，例如来自服务器的授权密钥和uploadId。

当上传开始时，我通过 OPTIONS 请求，但 Put 请求在几秒钟后中止（通常在发送一些内容百分比后 4-5 秒）。不幸的是，它在没有反馈的情况下中止。有谁知道会发生什么？

谢谢！

编辑：基本上我使用[https://github.com/LearnBoost/knox](https://github.com/LearnBoost/knox)从 Multipart Upload 中获取 UploadId（如果我使用服务器进行整个上传操作，它可以工作）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-01T22:38:22.803

如果您使用 CORS 授权，服务器似乎无法使用通配符（即“*”）：检查[一下](https://stackoverflow.com/questions/18499465/cors-and-http-basic-auth)。

您是否尝试在存储桶的 AllowedOrigin 标头中指定请求域？

# android - 显示屏旋转时音频记录锁定

> ID：14943562
> 
> 赞同：1
> 
> 时间：2013-02-18T19:06:37.177
> 
> 标签：android, multithreading, audio, audio-recording

我正在使用它进行一些信号处理。一切正常，除非屏幕关闭并且当时显示器旋转了。通常屏幕关闭只会产生一个 Activity onPause()，但是当屏幕旋转时它会运行：onPause()、onStop()、onDestroy()、onCreate()、onStart()、onResume()、onPause()。也就是说，Android 似乎首先“取消旋转”屏幕。

不幸的是，这似乎使 AudioRecord 以某种未知方式崩溃或冻结。

我所有操作的基本方式是在 onResume() 中启动一个新线程，这会实例化一个 AudioRecord 实例，设置它，开始录制，然后处于循环中：

```
keepProcessing = true;

while (keepProcessing)
    //  read a block of data and process 
```

在 UI 线程中的 onPause() 中，keepProcessing（一个 volatile 变量）被清除，然后等待工作线程停止。

```
if (thread.isAlive()) {
    keepProcessing = false;
    thread.join();
}

thread = null; 
```

当另一个线程退出 keepProcessing 循环时，它会停止录制，释放 AudioRecord 资源，删除 AudioRecord 实例并终止。

作为一般的启动/停止机制，这一切都很好。检查断点和 adb 一切似乎都以正确的顺序发生。它只是在这个屏幕旋转场景中不起作用。我只能认为这是因为在旧 Activity 中的一切都停止之后非常快速的新 Activity onCreate() 等。即AudioRecord 中有一些东西仍然很忙。当人们试图再次打开屏幕时，会发生什么事情都冻结了。

如果我对 AudioRecord 代码进行虚拟化，使其实际上不开始录制，则循环只是坐下来睡觉，然后不再停止录制，一切都可以。只有当录音机进入录音模式时才会出错。

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T19:11:38.820

当您旋转设备时，您的活动实际上已停止并被销毁。如果你有后台线程在工作，这完全会让你崩溃。修复它的最佳方法是告诉 Android 不要这样做，方法是将其添加 `android:configChange="orientation"`到该活动的清单中。是的，这是谷歌的一个糟糕的架构决定，令人讨厌到我几乎建议为所有活动添加它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T20:11:56.957

是的，我可以看到，我刚刚发现正在发生的事情，就是这样。

由于初始化 keepProcessing 标志的错误，当 Activity 停止时，存在可能使后台线程继续运行的竞争条件。

> “如果你有后台线程在工作 [当活动停止时]，这完全会让你崩溃”

你是对的。确实如此。

# ajax - MVC：允许多次单击同一个按钮

> ID：14943563
> 
> 赞同：0
> 
> 时间：2013-02-18T19:06:41.420
> 
> 标签：ajax, asp.net-mvc, form-submit

是否可以允许多次单击表单的单个提交按钮？我有一个表单，我想对第一次提交（第一次点击）执行一个操作，对第二次提交（第二次点击）执行一个不同的操作。

我基本上是在第一次提交期间使用 ajax 在表单中填充一个 div，我想在第二次点击时提交表单。

我试图将 div 中的按钮按更新，第一次单击后，我更新更新 div 并在更新的 div 中重新创建按钮。但是如果我使用这种方法，如何在我的控制器方法中为 Ajax 设置新创建的按钮的操作方法？我的控制器方法返回类似

`return Content( mystring + <input type='button' value='continue submission'/>`

如果我使用这种方法，我该如何设置按钮的操作方法，或者还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T19:10:56.427

在 JavaScript 中使用两个按钮：

按钮 1 最初显示。单击时，它会隐藏自身，显示按钮 2，并执行您的操作 1。

按钮 2 最初是隐藏的。它不会被按钮 1 隐藏，单击时，它会执行您的第二个操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T19:12:22.723

这看起来有点奇怪，但我可以告诉你如何做到这一点。输入 type="submit" 并将其隐藏。有一个变量作为 var flag = false; 当用户第一次点击你输入 type="button" 调用一个函数并做你的事情并确保使 flag=true; 在函数本身中检查 flag=true; 触发您的输入类型 =“提交”的事件。如下所示：

```
<input type="button" id="btn1" onclick="perfromAction()" value="submit"/>
<input type="submit" id="btn2" value="submit" style="display:none"/>

<script type="text/javascript">
var flag=false;
function performAction()
{
if(flag){
  $("#btn2").trigger("click");
}
else{
 //do processing 
 flag=true;
} 
```

# nlp - 将 stanfordNLP 解析树转换为 DOT 格式

> ID：14943565
> 
> 赞同：1
> 
> 时间：2013-02-18T19:06:50.073
> 
> 标签：nlp, stanford-nlp

有没有办法将斯坦福解析器生成的解析树转换为 DOT 格式。我知道将斯坦福依赖输出转换为 DOT 的方法 toDotFormat()。但我想将 edu.stanford.nlp.trees.Tree 转换为 DOT。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T00:02:48.207

目前没有代码可以做到这一点。但是你可以通过自己穿过一棵树的孩子来编写这样的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-31T18:24:05.940

这是一种用于生成所需结果的简单方法。

该函数使用广度优先搜索来遍历树。

[https://github.com/skrtbhtngr/corenlp-helper/blob/master/TreeExtended.java](https://github.com/skrtbhtngr/corenlp-helper/blob/master/TreeExtended.java)

# .htaccess - 如何将 mysite.com/123-category?orderby=name&orderway=asc 重定向到 mysite.com/123-category

> ID：14943566
> 
> 赞同：0
> 
> 时间：2013-02-18T19:06:53.237
> 
> 标签：.htaccess, redirect

在我的网站中是类别页面，例如 mysite.com/123-category。当用户对产品进行排序时，url 为 mysite.com/123-category?orderby=name&orderway=asc。我需要重写此链接，例如 mysite.com/123-category。

在 htaccess 文件中，我有以下代码：

```
RewriteRule ^([0-9]+)\-[a-zA-Z0-9-]* /1451/category.php?id_category=$1 [QSA,L] 
```

现在怎么办？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T19:15:31.860

无需使用 htaccess 文件来剥离查询参数。只需使用 preg_replace 功能并将其剥离

# flyway - JBOSS ESB 的 Flyway 迁移

> ID：14943570
> 
> 赞同：1
> 
> 时间：2013-02-18T19:07:15.883
> 
> 标签：flyway

我的团队在部署 JBOSS ESB 包期间尝试使用 Flyway 迁移我们的数据库。我们创建了一个 Migration MBean，它调用 flyway 来初始化和迁移我们的数据库。

在部署期间，我们收到以下错误：

**部署错误**：
部署“vfszip:/opt/jboss-soa-p.5.2.0/jboss-as/server/default/deploy/our-package.esb/”由于以下原因而出错： java.io.FileNotFoundException：在 /opt/jboss-soa-p.5.2.0/jboss-as/server/default/deploy/our-package.esb 中找不到 JAR 条目 db/migration

**环境**：
JBOSS 5.2.0
Flyway Core 2.0.3

```
ESB 包的结构 (our-package.esb)

`|lib
|db
  |migration
    |V1__Initial_structure.sql
    |V1_1__Populate_table.sql
|jboss-service.xml
|META-INF` 

我们的部署将主要包括队列、主题和相关的监听器。我们有多个 ESB 包要在多个环境中部署。  

**更新**

2013-02-18 12:33:11,700 错误 [org.jboss.kernel.plugins.dependency.AbstractKernelController] (HDScanner) 安装到开始时出错：name=our.pack.age:service=DBMigrator state=Create mode=Manual requiredState =已安装 com.googlecode.flyway.core.api.FlywayException：无法在位置扫描 SQL 迁移：com.googlecode.flyway.core.resolver.sql.SqlMigrationResolver.resolveMigrations(SqlMigrationResolver.java:97) 处的 db/migration com.googlecode.flyway.core.resolver.CompositeMigrationResolver.collectMigrations(CompositeMigrationResolver.java:219) 在 com.googlecode.flyway.core.resolver.CompositeMigrationResolver.doFindAvailableMigrations(CompositeMigrationResolver.java:157) 在 com.googlecode.flyway.core。 com.googlecode.flyway 上的 resolver.CompositeMigrationResolver.resolveMigrations(CompositeMigrationResolver.java:127)。core.info.MigrationInfoServiceImpl.refresh(MigrationInfoServiceImpl.java:86) at com.googlecode.flyway.core.info.MigrationInfoServiceImpl.(MigrationInfoServiceImpl.java:79) at com.googlecode.flyway.core.Flyway$4.execute(Flyway. java:1019) 在 com.googlecode.flyway.core.Flyway$4.execute(Flyway.java:1012) 在 com.googlecode.flyway.core.Flyway.execute(Flyway.java:1259) 在 com.googlecode.flyway。 core.Flyway.info(Flyway.java:1012) at our.pack.age.DBMigrator.migrate(DBMigrator.java:52) at our.pack.age.DBMigrator.start(DBMigrator.java:31) at sun.reflect .NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 在 java.lang.reflect.Method。调用（Method.java:597）

...更多的

**造成的**: java.io.FileNotFoundException: JAR entry db/migration not found in /opt/jboss-soa-p.5.2.0/jboss-as/server/default/deploy/our-package.esb at sun.net.www。 com.googlecode.flyway.core.util.scanner.JarFileLocationScanner 上 sun.net.www.protocol.jar.JarURLConnection.getJarFile(JarURLConnection.java:71) 上的 protocol.jar.JarURLConnection.connect(JarURLConnection.java:122)。 getJarFromUrl(JarFileLocationScanner.java:55) 在 com.googlecode.flyway.core.util.scanner.JarFileLocationScanner.findResourceNames(JarFileLocationScanner.java:34) 在 com.googlecode.flyway.core.util.scanner.ClassPathScanner.findResourceNames(ClassPathScanner. java:156) 在 com.googlecode.flyway.core.util.scanner.ClassPathScanner.scanForResources(ClassPathScanner.java:58) 在 com.googlecode.flyway.core.resolver.sql.SqlMigrationResolver。resolveMigrations(SqlMigrationResolver.java:86) ... 68 更多

**DBMigrator**是我们自定义的 MBean，用于调用 Flyway 来迁移我们的数据库。

我们使用 Flyway 默认配置，但 setOutOfOrder( **true** ) 除外。测试 SQL 文件放在 src/main/resources/db/migration 中。  

```

# javascript - 长代码成函数？

> ID：14943573
> 
> 赞同：-1
> 
> 时间：2013-02-18T19:07:29.710
> 
> 标签：javascript, jquery, css, loops, scrollto

此代码在我的页面中没有错误，因此我不在那里寻求任何帮助。我只是好奇是否有更短的方法可以做到这一点，有很多代码被重复，每次只更改一些类名。我可以在某种函数或循环中缩短它吗？谢谢

```
//menu
            $('.aboutOne').click(function(){
                $.scrollTo('.basicsRow', 1000, {axis:'yx'});
                $.scrollTo('.basicsRow', 1000, {axis:'xy'});
            })
            $('.aboutTwo').click(function(){
                $.scrollTo('.storyRow', 1000, {axis:'yx'});
                $.scrollTo('.storyRow', 1000, {axis:'xy'});
            })
            $('.aboutThree').click(function(){
                $.scrollTo('.teamRow', 1000, {axis:'yx'});
                $.scrollTo('.teamRow', 1000, {axis:'xy'});
            })

            $('.aboutOne').click(function(){
                $.scrollTo('.basicsRow', 1000, {axis:'yx'});
                $.scrollTo('.basicsRow', 1000, {axis:'xy'});
            })
            $('.aboutTwo').click(function(){
                $.scrollTo('.storyRow', 1000, {axis:'yx'});
                $.scrollTo('.storyRow', 1000, {axis:'xy'});
            })
            $('.aboutThree').click(function(){
                $.scrollTo('.teamRow', 1000, {axis:'yx'});
                $.scrollTo('.teamRow', 1000, {axis:'xy'});
            })
            $('.titleOne').click(function(){
                $.scrollTo('.homeRow', 1000, {axis:'yx'});
                $.scrollTo('.homeRow', 1000, {axis:'xy'});
            })
            $('.docsOne').click(function(){
                $.scrollTo('.startRow', 1000, {axis:'yx'});
                $.scrollTo('.startRow', 1000, {axis:'xy'});
            })
            $('.docsTwo').click(function(){
                $.scrollTo('.pinpointRow', 1000, {axis:'yx'});
                $.scrollTo('.pinpointRow', 1000, {axis:'xy'});
            })
            $('.docsThree').click(function(){
                $.scrollTo('.swipeRow', 1000, {axis:'yx'});
                $.scrollTo('.swipeRow', 1000, {axis:'xy'});
            })
            $('.docsFour').click(function(){
                $.scrollTo('.restRow', 1000, {axis:'yx'});
                $.scrollTo('.restRow', 1000, {axis:'xy'});
            })
            $('.docsFive').click(function(){
                $.scrollTo('.actionRow', 1000, {axis:'yx'});
                $.scrollTo('.actionRow', 1000, {axis:'xy'});
            })
            $('.contactOne').click(function(){
                $.scrollTo('.contactRow', 1000, {axis:'yx'});
                $.scrollTo('.contactRow', 1000, {axis:'xy'});
            })
            $('.downloadOne').click(function(){
                $.scrollTo('.downloadRow', 1000, {axis:'yx'});
                $.scrollTo('.downloadRow', 1000, {axis:'xy'});
            }) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T19:13:14.780

也许将所有内容放入一个对象中，然后传递给一个函数：

```
var els = {
     '.aboutTwo':'.teamRow',
     '.aboutThree':'.homeRow',
     ...
};

function menu(els){
     $.each(els, function(a,b){
         $(a).click(function(){
            $.scrollTo(b, 1000, {axis: "yx"});
            $.scrollTo(b, 1000, {axis: "yx"});
         });
     });
}

// Call it
menu(els); 
```

应该给你最大的可管理性 - 如果有任何变化，你只需修改`els`对象。

注意：想借此机会指出建议您使用 jQuery `.on()`( [Docs](http://api.jquery.com/on/) ) 来绑定事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T19:15:43.577

我会[`data-`](http://api.jquery.com/data)为每个可点击元素添加属性以指定您希望它滚动到的内容：

```
 <a class="clicktoscroll aboutOne" data-row="basicsRow">...</a> 
```

现在您只需要一个事件处理程序：

```
 $('.clicktoscroll').click(function(){
            var $row = $(this).data('row');
            $.scrollTo('.' + $row, 1000, {axis:'yx'});
            $.scrollTo('.' + $row, 1000, {axis:'xy'});
        }) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T19:16:53.733

您可以使用一个`data-*`属性，比如说`data-scroll-to`，并让您的元素控制您想要滚动到的位置。

```
<button class="about" data-scroll-to=".basicsRow">Button</button> 
```

例如，

```
$("[data-scroll-to]").each(function() {
    var $this = $(this), target = $this.data("scroll-to");
    $this.click(function() {
        $.scrollTo(target, 1000, { axis: 'yx' });
        $.scrollTo(target, 1000, { axis: 'xy' });
    });
}); 
```

# ios - 第二次进入场景，不接受输入

> ID：14943579
> 
> 赞同：0
> 
> 时间：2013-02-18T19:08:04.027
> 
> 标签：ios, cocos2d-iphone, ccmenuitem

我发现了 Cocos2D 的一个特性，但我似乎无法修复它。我从 AppDelegate 加载到一个菜单，它是一个 CCScene。场景拥有一个 CCLayer，它本身拥有 CCMenu。一切工作都是第一次通过。游戏结束后，我将用户带到 GameOverScene 并提示他们返回菜单。我正在重新加载菜单场景并调用`[[CCDirector sharedDirector] replaceScene:menu]`. 不过进入这个菜单后，并不是所有的输入功能。我不能再点击菜单项，但我可以平移/多点触控来触发该项目。是什么赋予了？

初始化时有什么方法可以重置 CCScene 以接收输入，如果是这样，这会扰乱 CCMenu 的输入接收吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T21:03:11.340

您是否覆盖了任何类中的任何 on* 方法，例如`onEnter`,`onExit`等？

如果是这样，您必须在每个中调用超级实现（即`[super onEnter]`），否则一些 cocos2d 功能（如调度或输入）可能会停止工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T01:29:48.347

我终于想通了，答案就在我的眼皮底下。在我的游戏开发早期，我需要一种方法来阻止 KKInput 吞下手势。我不完全确定此操作的后果，但我能够这样做：

```
KKInput* input = [KKInput sharedInput];
UITapGestureRecognizer* tapGestureRecognizer;
tapGestureRecognizer = input.tapGestureRecognizer;
tapGestureRecognizer.cancelsTouchesInView = NO 
```

似乎默认的 Kobold2D 行为是吞下所有触摸，这阻止了 CCMenu 接收任何点击手势。

# asp.net - 在 sqldatasource 的 JOIN 命令中给出别名

> ID：14943581
> 
> 赞同：0
> 
> 时间：2013-02-18T19:08:09.627
> 
> 标签：asp.net, sql-server, join, alias, sqldatasource

我正在使用`JOIN`命令连接 SqlDataSource 中的两个表。

```
 <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
        ConnectionString="<%$ ConnectionStrings:CS %>" 
        SelectCommand="SELECT UserName as UN, AboutMe, WebPage, Email FROM Users JOIN ProfileImages ON ProfileImages.UserName = Users.UN WHERE (UN = @UserName)" >
</asp:SqlDataSource> 
```

在 MS SQL Server Management Studio 中，这个命令是可以的。但在 SqlDataSource 它返回错误 - *Invalid column name 'UN'* , *Ambiguous column name 'UserName'*

如何在 SqlDataSource 中为该命令设置别名以不返回这些错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T19:21:35.450

您的查询有点错误您使用别名 ia 错误的方式

第一：您可以在以下部分使用别名：

*   字段。示例用户名为 UN
*   表名：UserTable as US
*   在按部分排序示例中：Order BY UN Desc

这是因为 sql 按以下顺序运行查询操作：

1.  FROM 子句
2.  WHERE 子句
3.  GROUP BY 子句
4.  HAVING 子句
5.  选择子句
6.  ORDER BY 子句

所以因为`FROM`子句首先运行，sql 不知道`SELECT`子句中的别名

查看正确的查询

```
SELECT 
    UserName as UN,
    AboutMe,
    WebPage,
    Email 
FROM Users 
JOIN ProfileImages ON ProfileImages.UserName = Users.UserName 
WHERE (Users.UserName = @UserName) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T19:13:40.400

我不是 SQL 专家，但如果 ProfileImages 和 Users 都包含“UserName”列，那么在您选择的列中，您需要指定从中提取 UserName 的表。所以像：

```
SELECT Users.UserName as UN, Users.AboutMe, Users.WebPage, Users.Email 
FROM Users
JOIN ProfileImages ON ProfileImages.UserName = Users.UserName 
WHERE (Users.UserName = @UserName) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T19:21:11.037

您不能在 where 子句中使用列别名。

```
 SELECT UserName as UN, AboutMe, WebPage, Email 
    FROM Users usersAlias JOIN ProfileImages piAlias ON piAlias.UserName = usersAlias.UserName 
WHERE (usersAlias.UserName = @UserName) 
```

当您查看执行顺序时，这是有道理的：

[http://blog.sqlauthority.com/2009/04/06/sql-server-logical-query-processing-phases-order-of-statement-execution/](http://blog.sqlauthority.com/2009/04/06/sql-server-logical-query-processing-phases-order-of-statement-execution/)

由于执行的顺序是：这些阶段及其顺序如下：

1.  从
2.  在
3.  外
4.  在哪里
5.  通过...分组
6.  立方体 | 卷起
7.  拥有
8.  选择
9.  不同的 10 订购方式
10.  最佳

当这些被处理时（“from”（#1）和“on”（#2）和“where”（#4））..他们不知道“select”（#8）（又名， UN 的别名），select 子句中的列别名不能在 WHERE 和 FROM（和 ON）子句中使用。

# wpf - XAML 中的形状 - 如何绘制：

> ID：14943585
> 
> 赞同：1
> 
> 时间：2013-02-18T19:08:16.257
> 
> 标签：wpf, xaml, windows-phone-8

## 我需要使用 XAML 在 windows phone 8 上制作这个形状：

![希伯来语不重要](../Images/2ff269bddba28f4fc799881d2192d942.png)

制作圆角矩形很容易，灰色背景也很容易。但是要使矩形的顶部如图所示似乎很难。有人可以给我一个提示吗？我使用 XAML 已经 2 年了，我正在去除锈迹。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T19:17:04.207

不，不是真的，它实际上非常简单，并且有多种方法可以实现相同的效果。这是一个例子。

```
<Grid Width="150" Height="200">
    <Grid.RowDefinitions>
        <RowDefinition Height="20"/>
        <RowDefinition/>
    </Grid.RowDefinitions>
    <Border CornerRadius="10,10,0,0">
        <Border.Background>
            <LinearGradientBrush EndPoint="0.822,0.633" StartPoint="0.158,0.189">
                <GradientStop Color="#FF09CCF4" Offset="0"/>
                <GradientStop Color="#FF020CA7" Offset="1"/>
            </LinearGradientBrush>
        </Border.Background>
        <TextBlock Text="Blah" HorizontalAlignment="Center" VerticalAlignment="Center" Foreground="White"/>
    </Border>
    <Border Grid.Row="1" Background="White" CornerRadius="0,0,10,10"/>
    <TextBlock Grid.Row="1" Text="Other Stuff" VerticalAlignment="Center" HorizontalAlignment="Center"/>
</Grid> 
```

如果您愿意，您可以交换`Border`用于`Rectangle`' 的 '，希望这会有所帮助。

# html - 在 HTML 选择列表中加载 ASP 响应数据

> ID：14943586
> 
> 赞同：0
> 
> 时间：2013-02-18T19:08:18.327
> 
> 标签：html, jquery, asp-classic

我有一个 HTML 表单，我在其中使用 $.get 来调用 ASP 页面并接收选择列表的选项值的 HTML 代码。返回的数据符合我的预期，但我似乎无法让它加载选择列表。

JAVASCRIPT

```
 function PopulateServerList() {

    var storenum = document.getElementById("iStoreNumber").value;
    var ASP = "ListSupervisors2.asp?q=" + storenum;
    $.get(ASP, function(response) {
    alert(response);
    document.getElementById("iSupervisor").innerHTML = reponse;
    }); 
} 
```

ASP

```
sql="SELECT * FROM SUPERVISORS WHERE STORE="
sql=sql & "'" & request.querystring("q") & "'"

set conn=Server.CreateObject("ADODB.Connection")
conn.Open "Provider=SQLOLEDB;User ID=<ID>;Password=<Password>;Initial Catalog=SUPERVISOR;Data Source=<Server>"
set rs=Server.CreateObject("ADODB.recordset")

rs.Open sql,conn

do until rs.EOF
  for each x in rs.Fields
Response.Write "<option value=''" & x.value &"''>"& x.value &"</option>"
next
rs.MoveNext
loop 
```

我真的很陌生，所以希望我不会犯一个非常容易的错误。

我还试图弄清楚如何将从数据库收到的两列设置为 ASP 中选择列表的值和文本，但此时我更担心加载列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T19:44:56.000

发现问题是 IE 的一个错误，其中 innerHTML 不会填充选择列表。从 Microsoft 找到一个带有笨拙解决方法的页面

[http://support.microsoft.com/kb/276228](http://support.microsoft.com/kb/276228)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T20:02:50.400

我发现最好的方法是使用 jquery

```
$("#iSupervisor").html(response); 
```

几乎可以解决这个问题。

# javascript - 放大/缩小容器

> ID：14943587
> 
> 赞同：5
> 
> 时间：2013-02-18T19:08:28.950
> 
> 标签：javascript, jquery, html, zooming

我想实现一个系统来使用javascript“实时”放大/缩小容器div。容器包含不同的细分，这些细分使用jsPlumb库通过一条线连接我的网页看起来像这样：

[![例子](../Images/a1a72286a5bd7ad6921d276b5ed48e05.png)](https://i.stack.imgur.com/XCSvY.png)

是否有任何第三方库可以帮助我实现这一点？请告诉我从哪里开始。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-31T03:10:52.387

环顾互联网，似乎没有任何图书馆可用于您打算做的事情-尽管我很想被证明是错误的。

**编辑：**在处理与此完全无关的事情时，我遇到了一个名为[zoom.js](https://github.com/hakimel/zoom.js)的库，它允许您放大任何元素。它的 API 看起来很容易使用，但它仍然是一个概念证明，并且不适用于 IE。创建者明确表示不要在任何重要的事情上使用它，这就是为什么我也保留我的旧答案。

* * *

但是，通过查看源代码[`zoomooz`](https://github.com/jaukia/zoomooz)，我很确定您是这样做的：使用[jQuery animate 函数](http://api.jquery.com/animate/)慢慢应用[css`transform`属性](https://developer.mozilla.org/en-US/docs/Web/CSS/transform)中的更改。更具体地说，您想为此使用该`scale(XValue, YValue)`功能。

关于使用 CSS 需要记住的几件事`transform`：

*   设置`transform-origin`属性，以便页面在缩放时适合屏幕内部，而不是超出边框或类似的东西。
*   包括浏览器特定的前缀，如`-webkit-transform`,`-ms-transform`和`-moz-transform`.`transform`
*   根据 Mozilla 的说法，CSS 转换是一项实验性功能，因此请确保它与您的用户正在使用的浏览器[兼容。](https://developer.mozilla.org/en-US/docs/Web/CSS/transform#Browser_compatibility)

# php - iPhone 和 FB：我们可以获取带有电子邮件地址的 FB 好友列表吗？

> ID：14943588
> 
> 赞同：0
> 
> 时间：2013-02-18T19:08:34.260
> 
> 标签：php, iphone, facebook

我正在与 ios 程序员共同开发一个应用程序。在我们的应用程序中有一个分享主题的功能，我们想在其中显示 Facebook 朋友的列表（已经完成），但根据我的 ios 程序员，它不可能获得 Facebook 朋友列表。

有任何想法吗？如果不是，那么是否可以从 PHP（Web 服务）端获取它？

---EDIT BEGIN--- 如果无法获得电子邮件地址，那么我们可以向那些朋友发送私人消息吗？这可能吗？---编辑结束----

任何有用的想法将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T20:28:48.253

你的 iOS 开发者错了。

FriendLists 可以通过`FriendList`对象端点（[docs](https://developers.facebook.com/docs/reference/api/FriendList/)）访问。请注意，此功能需要`read_friendlists`权限。

附带说明：任何可以通过 GraphAPI 实现的东西都可以使用 iOS SDK 来完成。

例子：

```
[facebook requestWithGraphPath:@"me/friendlists" andDelegate:self]; 
```

# vba - CreatePivotTable() 上的奇怪/不稳定行为

> ID：14943596
> 
> 赞同：3
> 
> 时间：2013-02-18T19:09:25.207
> 
> 标签：vba, excel

我正在编写 VBA 代码来自动化 Excel 中的一些流程，但我遇到了一个非常奇怪的行为，我无法找到文档/帮助。

我有一个程序`MAJ_GF`，它首先执行 function `GF.Update`，检查结果，然后启动程序`GF.Build`（它基本上采用`GF.Update`从不同工作表获得的数据并用它做很多事情）。

在某些时候，这“一堆东西”需要使用数据透视表，因此`GF.Build`包含以下行：

```
Set pvt = ThisWorkbook.PivotCaches.Create(xlDatabase, _
   "'source_GF'!R1C1:R" & j & "C" & k).CreatePivotTable("'TCD_GF'!R4C1", "GFTCD1") 
```

**奇怪的行为是这样的：**

*   当我运行时`MAJ_GF`，VBA 正确执行`GF.Update`，然后启动`GF.Build`，并在上述行停止并抱怨“错误的参数或过程调用”
*   当我手动运行`GF.Update`，然后手动运行`GF.Build`时，一切都很顺利，并且`GF.Build`从头到尾完成了它必须做的事情，没有错误
*   更奇怪的是，当我在犯罪线上设置断点时，运行`MAJ_GF`然后 VBA 按预期在该线上暂停，当我说“继续”时......它只是顺利地继续，没有错误！

我把它转来转去，仔细检查了每个变量的值，这没有任何意义。

任何人的想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T19:40:02.227

我的脑海里浮现出几个想法：

1.  后台仍在进行一些更新。尝试在你提到的那一`DoEvents`行`Application.Wait`之前
2.  还要检查是否有任何数据连接能够在后台更新 - 如果是这样，请禁用后台刷新
3.  很少（通常在旧版本中和涉及图表时），取消隐藏 Excel 窗口（以防您使用`Application.Visible = False`并启用`ScreenUpdating`帮助..
4.  您是否使用任何“异国情调”的参考/加载项？禁用它们并查看问题是否仍然存在。
5.  尝试重新启动您的机器

并不是说我太乐观地认为两者都可以解决您的问题-但试一试！祝你好运！

# jquery - 使用 Jquery HighChart 在条形图中附加带有值的字符串

> ID：14943598
> 
> 赞同：-1
> 
> 时间：2013-02-18T19:09:40.033
> 
> 标签：jquery, charts, highcharts

我想用highchart创建自定义条形图...请帮助我..这是我的代码..

```
$(function () {
    var chart;

    var datasety = ["55","27","63","54","35"];

    for(i=0;i<datasety.length;i++)
    {
        datasety[i] = parseFloat(datasety[i]);

    }

    var datasetx = new Array(); 
    datasetx = ['aa','bb','cc','dd','ee'];

    $(document).ready(function() {

        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container',
                type: 'column',
                margin: [ 50, 50, 100, 80]
            },
            title: {
                text: 'World\'s largest cities per 2008'
            },
            xAxis: {
                categories: datasetx,
                labels: {
                    enabled: false,
                    rotation: -45,
                    align: 'right',
                    style: {
                        fontSize: '13px',
                        fontFamily: 'Verdana, sans-serif'
                    }
                }
            },
            yAxis: {
                min: 0,
                title: {
                    text: 'Population (millions)'
                }   

            },
            legend: {
                enabled: false
            },
            tooltip: {
                formatter: function() {
                    return '<b>'+ this.x +'</b><br/>'+
                        'Population in 2008: '+ Highcharts.numberFormat(this.y, 1) +
                        ' millions';
                }
            },
            series: [{
                name: 'Population',
                data: datasety,

                    enabled: true,
                    rotation: -90,
                    color: '#FFFFFF',
                    align: 'right',
                    x: 4,
                    y: 10,
                    style: {
                        fontSize: '13px',
                        fontFamily: 'Verdana, sans-serif'
                    }
                }
            }]
        });

});

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T19:13:39.420

你可以试试这个使用......

```
chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container',
            type: 'column',
            margin: [ 50, 50, 100, 80]
        },
        title: {
            text: 'World\'s largest cities per 2008'
        },
        xAxis: {
            categories: datasetx,
            labels: {
                enabled: false,
                rotation: -45,
                align: 'right',
                style: {
                    fontSize: '13px',
                    fontFamily: 'Verdana, sans-serif'
                }
            }
        },
        yAxis: {
            min: 0,
            title: {
                text: 'Population (millions)'
            }   

        },
        plotOptions:{ // for different color of bar
            series:{ colorByPoint: true}
        },
        legend: {
            enabled: false
        },
        tooltip: {
            formatter: function() {
                return '<b>'+ this.x +'</b><br/>'+
                    'Population in 2008: '+ Highcharts.numberFormat(this.y, 1) +
                    ' millions';
            }
        },
        series: [{
            name: 'Population',
            data: datasety,

            dataLabels: {
                formatter:function(){   // for format value 
                    return 'USD'+this.y
                    },
                enabled: true,
                rotation: -90,
                color: '#FFFFFF',
                align: 'right',
                x: 4,
                y: 10,
                style: {
                    fontSize: '13px',
                    fontFamily: 'Verdana, sans-serif'
                }
            }
        }]
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T19:11:28.220

这里的代码工作：http: **[//jsfiddle.net/GCecu/](http://jsfiddle.net/GCecu/)**

```
$(function () { 
```

和

```
$(document).ready(function() { 
```

是一回事。删除第二个，`$(document).ready(function() {`，您的代码可能会起作用。

* * *

此外，您还有语法错误。

```
series: [{
            name: 'Population',
            data: datasety,

                enabled: true,
                rotation: -90,
                color: '#FFFFFF',
                align: 'right',
                x: 4,
                y: 10,
                style: {
                    fontSize: '13px',
                    fontFamily: 'Verdana, sans-serif'
                }
            } <--- EXTRA, delete it
        }] 
```

# android - 如何清除surface消耗的内存？

> ID：14943601
> 
> 赞同：0
> 
> 时间：2013-02-18T19:09:48.390
> 
> 标签：android, android-layout, surfaceview

我正在创建一个表面，然后将其发送到较低层。像这样的东西。

```
try{
Surface surface = StartCamera(surface, CameraId);
   }
 catch(Exception ex){
  } 
```

我是否明确需要`surface = null;`？我收到异常，因为 Surface.java 没有调用版本。请让我知道清除内存以免出现异常的正确程序是什么？

# node.js - 如何在 Express 框架中设置位置响应 HTTP 标头？

> ID：14943607
> 
> 赞同：20
> 
> 时间：2013-02-18T19:10:33.023
> 
> 标签：node.js, http-headers, express

如何`Location`在 Express 中设置响应 HTTP 标头？我试过这个，但它不起作用：

```
 Controller.prototype.create = function(prop, res) {
    var inst = new this.model(prop);

    inst.save(function(err) {
      if (err) {
        res.send(500, err);
      }

      res.location = '/customers/' + inst._id;
      res.send(201, null);
    });
  }; 
```

此代码将一个新文档持久化到 MongoDB 中，并在竞争时设置位置并发送`201`响应。收到此响应，未`Location`设置标头：

```
HTTP/1.1 201 Created
X-Powered-By: Express
Content-Length: 0
Date: Mon, 18 Feb 2013 19:08:41 GMT
Connection: keep-alive 
```

**编辑**：作为**uʍop ǝpısdn** (cool nick btw) 回答，`res.setHeader`有效。但为什么[`res.location`](http://expressjs.com/api.html#res.location)不呢？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-02-18T20:12:43.880

你在设置`res.location`。`res.location`是一个函数。

```
res.location('/customers/' + inst._id) 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-02-18T19:13:38.323

对象`res`暴露：`setHeader()`

```
res.setHeader('Location', foo); 
```

试试那个，而不是`res.location`.

# android - 应用程序启动时的 ClasscastException

> ID：14943608
> 
> 赞同：0
> 
> 时间：2013-02-18T19:10:34.077
> 
> 标签：android, classcastexception

我正在尝试将 LoaderManager 用于 API <11。我尝试使用 Log 实用程序查找错误。但是在logcat中没有找到这样的记录。这是代码。应用程序只是尝试从联系人中检索数据。classcastexception 的可能原因是转换不兼容的类型，我相信代码中不存在这样的问题。任何帮助，将不胜感激。

```
package com.example.androidcontact;

import android.net.Uri;
import android.os.Bundle;
import android.database.Cursor;
import android.provider.ContactsContract;
import android.support.v4.app.ListFragment;
import android.support.v4.app.LoaderManager;
import android.support.v4.content.CursorLoader;
import android.support.v4.content.Loader;
import android.support.v4.widget.CursorAdapter;
import android.support.v4.widget.SimpleCursorAdapter;
import android.util.Log;

public class MainActivity extends ListFragment implements LoaderManager.LoaderCallbacks<Cursor>{
    private SimpleCursorAdapter mAdapter;
    String tag = "";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Log.d(tag,"onCreated");

        mAdapter = new SimpleCursorAdapter(getActivity().getApplicationContext(),
                android.R.layout.simple_list_item_2,
                null,
                new String[]{ContactsContract.Contacts._ID, ContactsContract.Contacts.DISPLAY_NAME},
                new int[]{android.R.id.text1, android.R.id.text2},
                CursorAdapter.FLAG_REGISTER_CONTENT_OBSERVER);

        setListAdapter(mAdapter);

        getLoaderManager().initLoader(0, null, this);
    }

    @Override
    public Loader<Cursor> onCreateLoader(int id, Bundle arg1) {

        Uri uri = ContactsContract.Contacts.CONTENT_URI;
        String[]projection = new String[]{
                ContactsContract.Contacts._ID,
                ContactsContract.Contacts.DISPLAY_NAME};

        return new CursorLoader(getActivity(), uri, projection, null, null, null);      
    }

    @Override
    public void onLoadFinished(Loader<Cursor> arg0, Cursor arg1) {
        mAdapter.swapCursor(arg1);

    }

    @Override
    public void onLoaderReset(Loader<Cursor> arg0) {
        mAdapter.swapCursor(null);

    }
    } 
```

请不要误会我的意思。我只是花时间了解如何获取堆栈跟踪。我仍然不知道如何为一开始发生的异常获取一个。这是我能找到的内容。

```
02-19 00:35:35.401: W/dalvikvm(533): threadid=1: thread exiting with uncaught exception (group=0x40015560)
02-19 00:35:43.417: E/AndroidRuntime(533): FATAL EXCEPTION: main
02-19 00:35:43.417: E/AndroidRuntime(533): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.androidcontact/com.example.androidcontact.MainActivity}: java.lang.ClassCastException: com.example.androidcontact.MainActivity
02-19 00:35:43.417: E/AndroidRuntime(533):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1569)
02-19 00:35:43.417: E/AndroidRuntime(533):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
02-19 00:35:43.417: E/AndroidRuntime(533):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
02-19 00:35:43.417: E/AndroidRuntime(533):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
02-19 00:35:43.417: E/AndroidRuntime(533):  at android.os.Handler.dispatchMessage(Handler.java:99)
02-19 00:35:43.417: E/AndroidRuntime(533):  at android.os.Looper.loop(Looper.java:123)
02-19 00:35:43.417: E/AndroidRuntime(533):  at android.app.ActivityThread.main(ActivityThread.java:3683)
02-19 00:35:43.417: E/AndroidRuntime(533):  at java.lang.reflect.Method.invokeNative(Native Method)
02-19 00:35:43.417: E/AndroidRuntime(533):  at java.lang.reflect.Method.invoke(Method.java:507)
02-19 00:35:43.417: E/AndroidRuntime(533):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
02-19 00:35:43.417: E/AndroidRuntime(533):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
02-19 00:35:43.417: E/AndroidRuntime(533):  at dalvik.system.NativeStart.main(Native Method)
02-19 00:35:43.417: E/AndroidRuntime(533): Caused by: java.lang.ClassCastException: com.example.androidcontact.MainActivity
02-19 00:35:43.417: E/AndroidRuntime(533):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
02-19 00:35:43.417: E/AndroidRuntime(533):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1561)
02-19 00:35:43.417: E/AndroidRuntime(533):  ... 11 more 
```

根据清单文件，我需要该应用程序在 GingerBread 上运行，所以，

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.androidcontact"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="9"
        android:targetSdkVersion="17" />
    <uses-permission android:name="android.permission.READ_CONTACTS"/>

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:name="android.app.Application"
        >
        <activity
            android:name="com.example.androidcontact.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T19:26:08.950

您需要使用支持库中的 Support Loader Manager

```
getActivity().getSupportLoaderManager().initLoader(0, null, this); 
```

为了向后兼容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T20:03:50.300

您当前的问题是您正在尝试将 Fragment 作为 Activity 启动，但正如您亲眼所见，它不起作用。更改您的课程，使其看起来像这样：

```
public class MainActivity extends Activity
{  

  @Override
  protected void onCreate(Bundle b)
  {
    super.onCreate(b);
    setContentView (R.layout.main);
  }

  public static class MyFragment extends ListFragment implements LoaderManager.LoaderCallbacks<Cursor>{
    private SimpleCursorAdapter mAdapter;
    String tag = "";

    @Override
    public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      Log.d(tag,"onCreated");

      mAdapter = new SimpleCursorAdapter(getActivity().getApplicationContext(),
                                         android.R.layout.simple_list_item_2,
                                         null,
                                         new String[]{ContactsContract.Contacts._ID, ContactsContract.Contacts.DISPLAY_NAME},
                                         new int[]{android.R.id.text1, android.R.id.text2},
                                         CursorAdapter.FLAG_REGISTER_CONTENT_OBSERVER);

      setListAdapter(mAdapter);

      getActivity().getSupportLoaderManager().initLoader(0, null, this);
    }

    @Override
    public Loader<Cursor> onCreateLoader(int id, Bundle arg1) {

      Uri uri = ContactsContract.Contacts.CONTENT_URI;
      String[]projection = new String[]{
        ContactsContract.Contacts._ID,
          ContactsContract.Contacts.DISPLAY_NAME};

      return new CursorLoader(getActivity(), uri, projection, null, null, null);      
    }

    @Override
    public void onLoadFinished(Loader<Cursor> arg0, Cursor arg1) {
      mAdapter.swapCursor(arg1);

    }

    @Override
    public void onLoaderReset(Loader<Cursor> arg0) {
      mAdapter.swapCursor(null);

    }
  }
} 
```

然后在`res/layout`制作一个名为`main.xml`让它包含的布局文件：

```
<?xml version="1.0" encoding="utf-8"?>
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
    android:id ="@+id/my_fragment"
    android:name="com.example.androidcontact.MainActivity$MyFragment">
</fragment> 
```

*由于您正在*使用支持库（上面的代码已经有此更改），因此还要合并@hsigmond 的建议。

# android-listview - ListView 上的延迟 ContextMenu

> ID：14943612
> 
> 赞同：0
> 
> 时间：2013-02-18T19:10:39.680
> 
> 标签：android-listview, android-contextmenu

我有`Activity`一个`ListView`. 您长按每一行以获得`ContextMenu`. 底部`ListView`是一个`EditText`盒子。它看起来像这样：

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginBottom="3dp"
    android:layout_marginTop="3dp"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/TVReviewItem"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical"
        android:layout_marginLeft="10dp"
        android:layout_weight="90"
        android:text="Item Name"
        android:textSize="20sp" />

    <Spinner
        android:id="@+id/spinnerSort"
        android:layout_width="120dp"
        android:layout_height="wrap_content"
        android:layout_marginRight="5dp"
        android:layout_marginTop="5dp"
        android:gravity="left" />
</LinearLayout>

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="1dp"
    android:background="#bbb" >
</LinearLayout>

<ListView
    android:id="@+id/android:list"
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="1"
    android:longClickable="true"
    android:scrollbars="none" >
</ListView>

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="1dp"
    android:background="#bbb" >
</LinearLayout>

<EditText
    android:id="@+id/etTweetReview"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginLeft="10dp"
    android:layout_marginRight="10dp"
    android:ems="10"
    android:hint="Write a Review"
    android:imeOptions="actionDone"
    android:inputType="textCapSentences|textMultiLine"
    android:maxLength="140"
    android:maxLines="4"
    android:minLines="1"
    android:paddingBottom="9dp"
    android:paddingTop="9dp"
    android:singleLine="false" >

    <requestFocus />
</EditText> 
```

问题： ContextMenu 不会显示，直到您物理按下 EditText 框内的光标（即使我已经请求焦点），然后长按 List 行。如果您首先长按列表行，则不会发生任何事情。这是 OnCreateContextMenu：

```
@Override
    public void onCreateContextMenu(ContextMenu menu, View v,
            ContextMenuInfo menuInfo) {

            super.onCreateContextMenu(menu, v, menuInfo);
    android.view.MenuInflater inflater = getActivity()
            .getMenuInflater();

    inflater.inflate(R.menu.reviews_context, menu);
    menu.setHeaderTitle("Available Actions");

    android.view.MenuItem Edit = menu.findItem(R.id.edit);
    android.view.MenuItem Delete = menu.findItem(R.id.delete);

    AdapterContextMenuInfo info = (AdapterContextMenuInfo) menuInfo;

    int position = info.position;
    ListView lv = (ListView) v;
    int firstVisible = lv.getFirstVisiblePosition();
    View rowView = lv.getChildAt(position - firstVisible);

    ReviewUser = ((TextView) rowView.findViewById(R.id.labelUser))
            .getText().toString();
    ReviewWords = ((TextView) rowView.findViewById(R.id.labelComment))
            .getText().toString();

    if (Rateit.isUserLoggedIn == true) {
        if (Rateit.username.equals(ReviewUser) {

            Edit.setVisible(true);
            Delete.setVisible(true);

        } else {
            Edit.setVisible(false);
            Delete.setVisible(false);
        }
    } else {
        Edit.setVisible(false);
        Delete.setVisible(false);
    }

} 
```

我已经`Super`在其他内容的上面和下面尝试过这个。任何人都可以看到有什么问题吗？

**更新：** 新信息。我发现如果滚动，您必须滚动到底部，然后如果您尝试`ListView`，它将允许您访问。在这种情况下，它与框`ContextMenu`无关。`EditText`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T20:00:21.317

我想到了。在我的行布局文件（未显示）中，我有三个按钮。我必须将每个设置为：

```
android:focusable="false" 
```

显然是简单的修复。

# javascript - 如何在类原型中定义的事件处理程序中访问类成员变量 - Javascript

> ID：14943616
> 
> 赞同：0
> 
> 时间：2013-02-18T19:10:45.450
> 
> 标签：javascript, jquery

我已经看到了在构造函数中定义事件时有效的解决方案：

[在 Javascript 中访问事件处理程序中的类成员变量](https://stackoverflow.com/questions/3076010/accessing-class-member-variables-inside-an-event-handler-in-javascript)

但是，当在原型中定义处理程序时，它没有范围可以从以前的解决方案中看到“var _self”。是否有适用于类似于以下代码的变体？

问题在于“幻灯片”处理程序中的“this”...指的是 HTML 元素而不是 MyView 中的成员变量。

```
function MyView(wrapperDiv)
{
    this.contentW = 1200;
    this.vboxW = 600;
    this.vboxH = 400;
    this.vboxX = 0;
    this.vboxY = 0;
}

MyView.prototype = {

    initHorizontalScrollBar : function ($bar)
    {
        //create the wrappers for the slider
        if($bar.find('.slider-wrap').length==0)
            $bar.append('<\div class="slider-wrap"><\div class="slider-horizontal"><\/div><\/div>');//append the necessary divs so they're only there if needed
        $bar.find('.slider-wrap').width(this.svgWidth);

        //initialize the JQueryUI slider
        $bar.find('.slider-horizontal').slider({
            orientation: 'horizontal',
            min: 0,
            max: 100,
            range:'min',
            value: 0,
            slide: function(event, ui) {

                var difference = this.contentW-this.vboxW;
                if(difference<=0)
                    return;
                this.vboxX =  (ui.value) / 100 * ( this.contentW-this.vboxW);       // 0 >= ui.value <= 100
                this.svg.setAttribute("viewBox", toViewBoxString(this.vboxX, this.vboxY, this.vboxW, this.vboxH));
                $('ui-slider-range').width(ui.value+'%');//set the height of the range element
            }
          });     

        this.sizeHScrollbar();
    }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T21:29:24.037

您只需要在 initHorizo​​ntalScrollBar 方法中添加一个包含正确引用的变量：

```
MyView.prototype = {

    initHorizontalScrollBar : function ($bar)
    {
        var _self = this;
        //create the wrappers for the slider
        if($bar.find('.slider-wrap').length==0)
            $bar.append('<\div class="slider-wrap"><\div class="slider-horizontal"><\/div><\/div>');//append the necessary divs so they're only there if needed
        $bar.find('.slider-wrap').width(this.svgWidth);

        //initialize the JQueryUI slider
        $bar.find('.slider-horizontal').slider({
            orientation: 'horizontal',
            min: 0,
            max: 100,
            range:'min',
            value: 0,
            slide: function(event, ui) {

                var difference = _self.contentW - _self.vboxW;
                if(difference<=0)
                    return;
                _self.vboxX =  (ui.value) / 100 * ( _self.contentW - _self.vboxW);       // 0 >= ui.value <= 100
                this.svg.setAttribute("viewBox", toViewBoxString(_self.vboxX, _self.vboxY, _self.vboxW, _self.vboxH));
                $('ui-slider-range').width(ui.value+'%');//set the height of the range element
            }
          });     

        this.sizeHScrollbar();
    }
}; 
```

# php - Doctrine2 - 是否有预选挂钩？

> ID：14943619
> 
> 赞同：1
> 
> 时间：2013-02-18T19:11:01.273
> 
> 标签：php, doctrine-orm, symfony-2.1

我正在使用 Symfony2 / Doctrine2 开发一个 ws，并且我正在尝试挂钩 Doctrine2 生命周期并在任何 SELECT 操作之前触发一个函数 - 但没有任何运气。基本上，当在请求中找到某些参数时，我想动态操作添加限制/偏移量的选择查询，但似乎[Doctrine2 挂钩](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/events.html#lifecycle-events)仅涉及插入、删除和更新操作。我错过了什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T19:45:20.900

你必须使用[学说过滤器](http://docs.doctrine-project.org/en/latest/reference/filters.html)

Doctrine 2.2 具有过滤系统，允许开发人员将 SQL 添加到查询的条件子句中，而不管生成 SQL 的位置（例如，从 DQL 查询，或通过加载关联实体）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T19:48:27.200

处理这个问题的一种方法是注册一个在选择之前调度的自定义事件。您已经引用了显示如何执行此操作示例的源。

# c++ - 如何指定为成员字段对象调用哪个构造函数？

> ID：14943620
> 
> 赞同：0
> 
> 时间：2013-02-18T19:11:07.560
> 
> 标签：c++, constructor

如果我有一些类，并且在那个类中我有一个自定义的 Queue 对象，我已经编写了，我的类 def 看起来像这样：

```
class Parser
{
    public:
        Parser();
    private:
        Queue<char> Q;
}; 
```

并且`class Queue`有一个默认构造函数以及一个接受单个 int 参数来指定其容量的构造函数，我如何告诉 Parser 类当它实例化 Q 字段时它应该触发接受参数的构造函数（所以它可以有一个更大容量）而不是触发默认构造函数（容量很小）？我已经查过了，但我很难找到不围绕继承和父类构造函数的答案。谢谢！

另外，我尝试替换`Queue<char> Q`为，`Queue<char> Q(100)`但编译器抱怨这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T19:14:10.740

在 Parser 的构造函数实现中使用初始化列表...

```
Parser::Parser()
:Q(10) ///example of initializing to capacity 10
{
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T19:14:06.107

它位于您选择构造函数的成员初始化列表中：

*   如果要调用默认构造函数，请执行以下操作：

    ```
    Parser() : Q() {} //calls the default constructor 
    ```

    由于您没有传递任何参数，因此上述内容与以下内容相同：

    ```
     Parser() {} //Q is also constructed invoking the default constructor 
    ```

    在进入`Parser`构造函数体之前，*完全*`Q`是通过调用默认构造函数来构造的。

**   如果要调用另一个构造函数，请执行以下操作：

    ```
    Parser() : Q(10) {} //calls the other constructor 
    ```

    这就是你想要的。在这种情况下，您通常希望将大小传递给`Parser`然后执行此操作：

    ```
    Parser(int size) : Q(size) {} //calls the other constructor 
    ```* 

 *在 C++11 中，您可以在声明本身中这样做：

```
class Parser
{
     //...
     Queue<char> Q(10); //C++11 only
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T19:14:05.903

像这样：

```
Parser() : Q(100) { } 
```*

# javascript - 通过javascript更改两个选择选项值

> ID：14943621
> 
> 赞同：-1
> 
> 时间：2013-02-18T19:11:16.967
> 
> 标签：javascript

网站中有两个选项控件：

```
<select class="operator" name="operator" id="operator">
    <option value="0">Entekhab Operator</option>
    <option value="1">Irancell</option>
    <option value="2">Talia</option>
    <option value="3">HamraheAval</option>
</select>

<select class="card" name="chargeCard" id="chargeCard">
   <option value="0">Entekhab Sharj</option>
</select> 
```

当用户通过单击（并选择一个选项）更改第一个选项时，第二个选项也将更改...正如您在上面的代码中看到的，第二个选项没有值，并且在单击后会获得一些值第一

我的问题是我必须在我的 android 程序中通过 javascipt 更改它们

我尝试了以下方法：

```
document.getElementById("operator").value=2 
```

这样我就改变了第一个。

但是第二个没有改变，也没有得到价值！我应该怎么做才能改变第二个选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T05:12:24.943

也许我没有很好地解释我的问题。我改变了选项的价值，但我需要一些类似刺激改变事件的东西。这段代码解决了我的问题：

```
$('#operator').trigger('change'); 
```

# linux - 如何在 CentOS 5 上更新 /usr/lib/libstdc++.so.6？

> ID：14943623
> 
> 赞同：2
> 
> 时间：2013-02-18T19:11:22.993
> 
> 标签：linux, glibc

我试图在 CentOS 5 上运行 Sublime Text 2。Sublime 需要 GLIBCXX_3.4.11 和 GLIBC_2.11，但系统的 GLIBCXX 高达 3.4.8 和 GLIBC 高达 2.5。如何在不修改内核或更新到 CentOS 6 的情况下更新 glibc 和 glibcxx？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T19:29:52.397

嗯，我会下载所请求库的源代码，自己编译它们并将（）安装`make install`在不会与旧版本（例如`/usr/local`）混合的目录中。这应该可以，但是如果您从未在 linux 下进行过编译，则可能会非常苛刻...

# php - FPDF 库中的默认保存目录

> ID：14943629
> 
> 赞同：0
> 
> 时间：2013-02-18T19:11:33.380
> 
> 标签：php, fpdf

我目前正在使用 fpdf 库开发 php 项目，是否可以设置默认目录以将生成的 pdf 文件保存在 fdpf 库中的 php 和 mysql 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T19:21:50.177

将 PDF 保存在目录中： [检查此线程](http://www.webmaster-talk.com/php-forum/43536-how-i-can-save-pdf-file.html)，您也可以 [检查此](http://devmanuals.com/tutorials/php/save-pdf-in-folder.html)

而且，我们通常不会直接在数据库中存储（是的，有例外！）文件，而是存储文件路径。因此，MySQL 仅保留您存储在目录中的 PDF 的文件路径。

# c# - 以特定角度移动精灵

> ID：14943630
> 
> 赞同：0
> 
> 时间：2013-02-18T19:11:37.510
> 
> 标签：c#, xna, angle, trigonometry

在我的 XNA 游戏中，我可以用 A 和 D 键旋转我的精灵，一切正常。但对于我的问题：

如何计算 X 和 Y 以将精灵移动到精灵倾斜的方向，我有这个：

```
 float x = (float)Math.Cos(MathHelper.ToRadians(getRotation()));
 float y = (float)Math.Sin(MathHelper.ToRadians(getRotation())); 
```

但这根本行不通。每次按住 W 键时，我都想将我的精灵移动 +4 像素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T19:37:26.613

差不多好了：

```
sprite.x += ( float ) ( Math.Cos( MathHelper.ToRadians( getRotation( ) ) ) * speedX );
sprite.y += ( float ) ( Math.Sin( MathHelper.ToRadians( getRotation( ) ) ) * speedY ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T08:04:43.137

```
//Define what is forward when rotation is 0.
var forward = new Vector2(1f,0f);

//Create a rotation-matrix that can rotate the forward-vector
var rotater = Matrix.CreateRotationZ(MathHelper.ToRadians(getRotation()));

//rotate and normalize vector (normalizing makes the length = 1)
forward = Vector2.TransformNormal(forward, rotater);

//move in rotated forward direction times 4
Position += forward * 4f; 
```

但我建议使用每秒像素值并乘以 deltatime：

```
Position += forward * pixelsPerSecond * (float)gameTime.ElapsedGameTime.TotalSeconds; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T20:02:41.290

正如@BlackBear 指出的那样，您必须将旋转乘以您要移动的距离。

当您使用这类东西时，拥有一个封装基础知识的点（或向量）类（加法、缩放、旋转、角度确定等）并根据向量可视化运动会很有帮助。

例如，给定一个功能 Point2D 类：

```
// define movement vector as +4 units in 'Y' axis
// rotated by player facing
Point2D MoveVector = new Point2D(0, 4).Rotate(Player.FacingAngle);

// adjust player position by movement vector:
Player.Position.Add(MoveVector); 
```

一个更好的想法可能是让玩家包含一个方向向量，只要需要将面对映射到 2D 坐标，就可以使用该方向向量。然后运动变成：

```
Player.Position.Add(Player.FacingVector * MoveSpeed); 
```

这对于产生子弹之类的事情很方便，因为您可以将它们的初始面向矢量设置为玩家的面向矢量等等，从而节省整个链条的旋转操作。

而且您会获得额外的好处，即您的代码可以进行更多的自我记录：P

**编辑 - 一堆代码：**

这是我的 Point2D 实现的一部分：

```
public class Point2D
{
    public double X;
    public double Y;

    public Point2D(double X = 0, double Y = 0)
    {
        this.X = X;
        this.Y = Y;
    }

    // update this Point2D by adding other
    public Point2D AddEquals(Point2D other)
    {
        X += other.X;
        Y += other.Y;
        return this;
    }

    // return a new Point2D that is the sum of this and other
    public Point2D Add(Point2D other)
    {
        return new Point2D(X + other.X, Y + other.Y);
    }

    public Point2D Multiply(double scalar)
    {
        return new Point2D(X * scalar, Y * scalar);
    }

    // rotate by angle (in radians)
    public Point2D Rotate(double angle)
    {
        double c = Math.cos(angle), s = Math.sin(angle);
        double rx = X * s - Y * c;
        double ry = Y * s + X * c;
        return new Point2D(rx, ry);
    }

    public Point2D RotateDegrees(double angle)
    {
        return Rotate(angle * Math.PI / 180);
    }

    public double Distance(Point2D other)
    {
        double dx = other.X - X, dy = other.Y - Y;
        return Math.Sqrt(dx * dx + dy * dy);
    }
} 
```

您可以充实其他操作。这些对于这段代码就足够了：

```
public class Player
{
    public Point2D location;
    // facing angle in degrees
    public double facing;

    public void TurnLeft(double degrees)
    {
        facing = (facing + 360 - degrees) % 360;
    }

    public void TurnRight(double degrees)
    {
        facing = (facing + degrees) % 360;
    }

    public void MoveForward(double distance)
    {
        // calculate movement vector
        Point2D move = new Point2D(0, distance).RotateDegrees(facing);

        // add to position
        this.location.AddEquals(move);
    }
} 
```

命名在某些地方有点笨拙，但它应该给你一个想法。

# android - Android 架构模式

> ID：14943634
> 
> 赞同：2
> 
> 时间：2013-02-18T19:12:10.243
> 
> 标签：android, architecture, broadcastreceiver

您使用哪种架构模式进行 Android 开发？到目前为止，我一直在使用`MVC`模式 with`BroadcastReceivers`在层之间进行通信，但肯定有比这更好的东西。广播的所有注册和取消注册都在杀死我。因此，任何答案都将受到高度赞赏。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T19:17:30.770

首先，架构应该与您正在开发的系统/应用程序相关，而**不是**您正在使用的编程平台。是的，一些语言强制执行特定的实践和模式，但这并不意味着对于特定的应用程序，另一种架构会更合适。

没有适用于所有 android 应用程序的*通用架构*。

`MVC`和`broadcast`（或通常是*事件驱动的通信*）具有完全不同的目标。

简而言之，`MVC`是将数据与表示分离，同时`broadcast`促进未知方之间的通信（即`broadcast`接收者可以响应特定事件而不管哪个组件发送它）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T19:17:10.633

这是一个糟糕的问题。答案总是“任何适合您尝试编写的程序”。模式并不意味着作为问题的解决方案被插入，模式是一种描述你的架构的语言。

但是考虑到你剩下的问题，我认为你正在做一些非常奇怪的事情。一个非常基本的 Android 应用程序通常是 MVC - Activity 是 Controller，View 类是 View，而 Model 由您创建（或者对于简单的应用程序可能不会被打扰）。BroadcastReceiver 通常很少使用，它们是用来通知来自操作系统或其他应用程序的异步事件。它们不适用于应用内通信。此外，Android 中没有“层”。你到底在做什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T19:23:29.010

虽然在某种程度上，Android 应用程序不可能有一个单一的架构，但我会说，最肯定的是，架构上的好主意。MVC 在 Android 中是一个非常好的主意。您不必使用 BroadcastReceivers 来支持它：您可能可以使用 ContentObservers 做很多事情。另外，看看 Virgil Dobjanschi 关于 RESTful Android 的演讲非常精彩。看看：[http ://www.youtube.com/watch?v=xHXn3Kg2IQE](http://www.youtube.com/watch?v=xHXn3Kg2IQE)

# jquery - jquery单击图像选择没有类或ID的下一个跨度

> ID：14943641
> 
> 赞同：1
> 
> 时间：2013-02-18T19:12:26.697
> 
> 标签：jquery

我正在尝试向没有 id 或类的图像添加文本行我有一系列图像，例如

```
 <img src="../img/star.png"  /><span>no text here until left img is clicked</span>

  <img src="../img/someotherpicture.png"  /><span>no text here until left img is clicked</span>

  <img src="../img/anotherpicture.png"  /><span>no text here until left img is clicked</span> 
```

对于 jquery 我有

```
$(document).ready(function(){
$("img").click(function(){  
$("img").next.$("span").val("info inserted after clicking on the img next to spa");
})
}); 
```

我有点困惑我应该如何在这里使用 next ，或者我应该使用 find ？我总是有一个 img 后跟一个 span。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T19:17:53.893

您还应该考虑使用 .on() 而不是 .click()，但最重要的部分是回调中的 $(this)，它将引用单击的对象

```
$(document).ready(function(){
     $("img").on('click', function(e){  
        $(this).next('span').text("info inserted after clicking on the img next to span");
    })
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T19:17:01.707

您的选择器和方法不正确。为了定位跨度，请使用：

```
$(this).next('span') 
```

然后，要更改节点内的文本，请使用`.text()`而不是`.val()`：

```
 $(this).next('span').text('info inserted after clicking on the img next to spa'); 
```

（.val() 用于输入字段）。

# json - 从动态加载内容的变量中获取总和（来自每个函数）

> ID：14943643
> 
> 赞同：0
> 
> 时间：2013-02-18T19:12:37.603
> 
> 标签：json, sum

我正在尝试从变量中获取“总和”。
我现在有这个代码：

```
function UpdateBuddyStat()
{
 $.getJSON('/update-buddies', function(jsonData){

   var counterjson = 0;
   var LI_list_html = '';

   $.each(jsonData, function(i,value){

   var count = counterjson++;
   var username = jsonData[i].name;
   var buddy = jsonData[i].buddyid;
   var onoff = jsonData[i].onoffstate;

   var DIV_html = username+' - ['+onoff+']<div class="FunctionBuddyBox"><span class="TagBuddy" id="TagsBuddy_'+buddy+'" data-tagbuddyid="'+buddy+'">tagit</span></div>';

   LI_list_html = LI_list_html+'<li>'+DIV_html+'</li>';
   });

   $("#ShowBuddyList ul li").remove();
   $("#ShowBuddyList ul").html(LI_list_html);  
 })
} 
```

我得到的是这个：

```
User1 - [1]  
User2 - [0]
User3 - [0]
User4 - [1]
User5 - [0] 
```

所以最后我需要总结 var“onoff”。在这种情况下，结果将是 2。
我尝试了很多选择，但仍然没有运气。
也许有人对我有建议？提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T19:15:23.737

只需添加一个`sum`计数器并`onoff`为每个项目添加值（在转换为整数之后）：

```
function UpdateBuddyStat()
{
 $.getJSON('/update-buddies', function(jsonData){

   var counterjson = 0;
   var LI_list_html = '';
   var sum = 0;

   $.each(jsonData, function(i,value){

   var count = counterjson++;
   var username = jsonData[i].name;
   var buddy = jsonData[i].buddyid;
   var onoff = jsonData[i].onoffstate;
   sum += parseInt(onoff, 0);

   var DIV_html = username+' - ['+onoff+']<div class="FunctionBuddyBox"><span class="TagBuddy" id="TagsBuddy_'+buddy+'" data-tagbuddyid="'+buddy+'">tagit</span></div>';

   LI_list_html = LI_list_html+'<li>'+DIV_html+'</li>';
   });

   $("#ShowBuddyList ul li").remove();
   $("#ShowBuddyList ul").html(LI_list_html);  
 })
} 
```

# angularjs - AngularJS：如何观看选项卡选择？

> ID：14943644
> 
> 赞同：10
> 
> 时间：2013-02-18T19:12:48.360
> 
> 标签：angularjs, angularjs-directive

我正在使用 angularjs 选项卡和窗格示例组件

```
angular.module('components', []).
    directive('tabs', function() {
        return {
            restrict: 'E',
            transclude: true,
            scope: {},
            controller: function($scope, $element) {
                var panes = $scope.panes = [];

                $scope.select = function(pane) {
                    angular.forEach(panes, function(pane) {
                        pane.selected = false;
                    });
                    pane.selected = true;
                }

                this.addPane = function(pane) {
                    if (panes.length == 0) $scope.select(pane);
                        panes.push(pane);
                    }
                },
                template:
                    '<div class="tabbable">' +
                        '<ul class="nav nav-tabs">' +
                            '<li ng-repeat="pane in panes" ng-class="{active:pane.selected}">'+
                                '<a href="" ng-click="select(pane)">{{pane.title}}</a>' +
                            '</li>' +
                        '</ul>' +
                        '<div class="tab-content" ng-transclude></div>' +
                    '</div>',
                replace: true
            };
        }).
    directive('pane', function() {
        return {
            require: '^tabs',
            restrict: 'E',
            transclude: true,
            scope: { title: '@' },
            link: function(scope, element, attrs, tabsCtrl) {
                tabsCtrl.addPane(scope);
            },
            template:
                '<div class="tab-pane" ng-class="{active: selected}" ng-transclude>' +
                '</div>',
            replace: true
        };
    }) 
```

**SomePage.html**

```
<tabs>
    <pane title="Datos Generales">
        <div ng-include src="'/resources/js/page/running/admin/templates/update-data.html'"></div>
    </pane>
    <pane title="Localización">
        <div ng-include src="'/resources/js/page/running/admin/templates/update-location.html'"></div>
    </pane>
    <pane title="Datos Contacto">
        <div ng-include src="'/resources/js/page/running/admin/templates/update-contacts.html'"></div>
    </pane>
    <pane title="Variantes">
        <div ng-include src="'/resources/js/page/running/admin/templates/update-variants.html'"></div>
    </pane>
</tabs> 
```

在第二个窗格中有一个 GoogleMap。选择第二个窗格时，我想刷新谷歌地图。

我不知道如何在控制器中获得选定的窗格。我试过`$scope.panes`但是是`undefined`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-18T21:57:45.897

以下三种方法可以解决您的问题：

1.  在控制器上定义一个方法，在选项卡元素的属性中指定该方法，在选项卡指令的隔离范围定义中使用“&”语法，以使指令能够在选择窗格时调用指定的方法。
2.  使用“selectedPane”属性在控制器范围内定义一个对象。使用 tabs 指令的隔离范围定义上的 '=' sytnax 来启用双向数据绑定。选择窗格时，请设置此属性。
3.  让 tabs 指令[$emit](http://docs.angularjs.org/api/ng.$rootScope.Scope#$emit)一个事件，并让你的控制器使用 $on 监听它。

**更新**：@qopuir 询问有关选项 1 的更多详细信息。
假设控制器方法类似于以下内容：

```
$scope.paneChanged = function(pane) {
    $scope.selectedPane = pane
    ...
} 
```

在 tabs 元素上，我们将使用属性指定此函数`pane-changed`：

```
<tabs pane-changed="paneChanged(selectedPane)"> 
```

然后，tabs 指令可以使用 '&' 语法来调用这个方法：

```
.directive('tabs', function() {
    return {
        restrict: 'E',
        transclude: true,
        scope: { paneChanged: '&' },
        controller: function($scope, $element) {
            var panes = $scope.panes = [];

            $scope.select = function(pane) {
                angular.forEach(panes, function(pane) {
                    pane.selected = false;
                });
                pane.selected = true;
                $scope.paneChanged({selectedPane: pane});
            } 
```

# android - RTSP 安卓媒体播放器

> ID：14943646
> 
> 赞同：3
> 
> 时间：2013-02-18T19:12:49.930
> 
> 标签：android, android-layout, android-intent, android-emulator, android-widget

我正在尝试为 Android 创建一个 RTSP 播放器，但我收到错误视频无法播放。我不知道我犯了什么错误，这根本行不通，我尝试了所有方法，我给出了下面的代码

```
import android.media.AudioManager;
import android.media.MediaPlayer;
import android.net.Uri;
import android.os.Bundle;
import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Context;
import android.content.Intent;
import android.view.Menu;
import android.widget.MediaController;
import android.widget.VideoView;

public class MainActivity extends Activity {
VideoView myVideoView;
ProgressDialog progDailog;
AudioManager audio;
MediaController mediaController;
String unStringUrl="rtsp://his.dvrdns.org:8554/channel/2";
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    myVideoView = (VideoView)findViewById(R.id.videoplayer);        
    progDailog = ProgressDialog.show(MainActivity.this, null, "Video loading...", true);        
    audio = (AudioManager) getSystemService(Context.AUDIO_SERVICE);

    mediaController = new MediaController(this);
    myVideoView.setMediaController(mediaController);
    myVideoView.setVideoURI(Uri.parse(unStringUrl));
    myVideoView.requestFocus();

    myVideoView.setOnPreparedListener(new MediaPlayer.OnPreparedListener() {
        public void onPrepared(MediaPlayer arg0) {

                    // called too soon with rtsp in 4.1

            if(progDailog != null) {
                progDailog.dismiss();
            }

            myVideoView.start();
        }
    });

    myVideoView.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {
        public void onCompletion(MediaPlayer mp) {
            /*Intent intent = new Intent(MyVideoView.this, lastActivity);
            intent.putExtra("cleTitre", activityTitle);
            intent.putExtra("cleSegment", activityCat);
            startActivity(intent);*/
        }
    });

    myVideoView.setOnErrorListener(new MediaPlayer.OnErrorListener() {
        public boolean onError(MediaPlayer mp, int what, int extra) {
            if(progDailog != null) {
                progDailog.dismiss();
            }

            return false;
        }
    });
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T06:52:44.777

您可以尝试在应用程序的清单文件中包含 internet -Permisison 行（下一行）。在我的情况下，它有效。

**使用权限 android:name="android.permission.INTERNET"**

希望这可以帮助。

# audio - 使用越界的 SimpleAudioEngine 音量范围是否安全？

> ID：14943650
> 
> 赞同：0
> 
> 时间：2013-02-18T19:13:06.217
> 
> 标签：audio, cocos2d-iphone, range, volume, simpleaudioengine

我有几行。
第二行记录在案。
第一行超出了界限，它确实有效。

尽管文档和其他 QA 说范围是 0f 到 1f ：
在更高的音量上，比如 20、30；确实增加了音效的音量。所以它起作用了。

正常吗？或者可能是一个错误？如果我使用超出文档中给出的范围，可能会很危险吗？例如：setEffectsVolume:15f 而不是范围 0f-1f ？

```
 //this is undocumented also out of bounds,somehow really increases volume to 6x.
    1\. [SimpleAudioEngine sharedEngine].effectsVolume=6.0f;

    //this is normal because inbounds of range
    2\. [SimpleAudioEngine sharedEngine].effectsVolume=.2; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T21:01:11.857

可能（并且将会）发生的最坏情况是音频质量下降。

音量级别 1.0f 表示效果以其录制的音量播放（分别以数字方式存储）。上面的所有东西都会使声音播放得更响亮，但会放大失真。将其视为缩放图像，您会注意到它会随着放大而丢失细节。这是相同的效果。

# lua - 如何偏移加速度计lua corona sdk

> ID：14943655
> 
> 赞同：1
> 
> 时间：2013-02-18T19:13:36.583
> 
> 标签：lua, coronasdk

我可以使用加速度计控制“小鸟”，我唯一的问题是它可以在我的设备（手机/平板电脑）平放时工作，但是当你把它拿在手上玩时它并不是空闲的。有没有办法将加速度计的零点偏移到 y 轴上的 30°（度）？

```
display.setStatusBar (display.HiddenStatusBar);
system.setAccelerometerInterval( 50 );
system.setIdleTimer(false);
local background = display.newImage("bg.png")

--> GAME CHARACTER
local bird  = display.newImage ("helicopter.png")
bird.x      = 100;
bird.y      = 100;
bird:setReferencePoint(display.CenterReferencePoint);

-- Speed of Movement with tilt. You can change it ans see the effects.
local tiltSpeed         = 30;
local motionx           = 0;
local motiony           = 0;
local rotation          = 0;

local function onTilt(event)
    -- Its for the new position of the bird
    motionx = tiltSpeed * event.xGravity;
    motiony = tiltSpeed * event.yGravity;
end

local function moveBird (event)
    bird.x = motionx + bird.x;
    bird.y = bird.y - motiony;
    bird.rotation = rotation;
end

Runtime:addEventListener("accelerometer", onTilt)
Runtime:addEventListener("enterFrame", moveBird) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T22:29:46.333

```
local delta = -30/180*math.pi  -- 30 degrees
local cos_delta, sin_delta = math.cos(delta), math.sin(delta)

local function onTilt(event)
    -- Its for the new position of the bird
    motionx = tiltSpeed * event.xGravity
    motiony = tiltSpeed * (cos_delta*event.yGravity + sin_delta*event.zGravity)
end 
```

# c# - 在 Marshal.AllocCoTaskMem 写入 asm 导致 AccessViolation 异常？

> ID：14943656
> 
> 赞同：0
> 
> 时间：2013-02-18T19:13:37.800
> 
> 标签：c#, assembly, access-violation

我已经注入到另一个应用程序中，并且我想要调用这个“用户调用”函数。所以我编写了一个简单的 ASM 包装器，它只是将我的参数对齐到正确的寄存器上并调用该函数。

这是我将 ASM 字节放入应用程序的代码。

```
ASMWrapper = Marshal.AllocCoTaskMem(asm.Length);
Marshal.Copy(asm, 0, ASMWrapper, asm.Length); 
```

在此之后，我只需在这个位置注册一个 delagate，我就可以走了。现在有趣的是，这适用于我测试的 5 台计算机中的 4 台，最后一台我尝试使用干净的 Windows 7 Ultimate 格式化和安装。就像其他电脑一样。它仍然不起作用。

不过，我能做的就是`WriteProcessMemory`用来编写我的 ASM 代码。如果我这样做它会起作用，那么我可以将代码放在原始代码所在的位置。

有谁知道它为什么会这样？我宁愿使用这种`AllocCoTaskMem`方式来放置我的 asm，而不是试图找到手动放置它的地方。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T21:08:49.893

没有什么`VirtualAlloc`可以`VirtualProtect`给你一个既可写又可执行的内存块。采用

```
VirtualAlloc(0, Size, MEM_RESERVE|MEM_COMMIT, PAGE_EXECUTE_READWRITE); 
```

您使用的任何分配器都不允许执行它们分配的内存。

崩溃取决于数据执行保护 (DEP) 的系统和 BIOS 设置，以及 CPU 是否支持它。但无处不在的 DEP 是该行业的发展方向，不妨好好利用它。

# xcode - Qt 4.8.4 - 使用 Xcode 4.6 构建机器是 10.8

> ID：14943663
> 
> 赞同：1
> 
> 时间：2013-02-18T19:13:56.283
> 
> 标签：xcode, macos, qt, build, qt4.8

鉴于我的构建机器是 OS X 10.8 和 Xcode 4.6，而我的 Qt 版本是 4.8.4：

我可以从源代码构建 Qt 以支持 10.6、10.7 和 10.8 吗？我假设使用 10.6 的 BASE SDK？

还是只有在这种配置下才有可能？10.6 SDK 甚至不在新 XCode 的 /Developer 树中。

任何建议将被认真考虑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:51:15.347

从文档：

> 一般来说，Qt 支持在一个 Mac OS X 版本上构建并在所有其他版本上进行部署，无论是向前还是向后。您可以在 10.4 Tiger 上构建并在 10.5 及更高版本上运行相同的二进制文件。 [Qt 文档：在 Mac 上开发。](http://doc-snapshot.qt-project.org/4.8/developing-on-mac.html#deployment-compile-once-deploy-everywhere)

需要注意的是，我以前做过，它确实有效，但你最好在你部署的每个 OS X 版本上构建和测试，以保持理智。一般来说，它完全没问题，但偶尔会有一些奇怪的部分不起作用。

# shell - 如果 shell 命令为空

> ID：14943670
> 
> 赞同：0
> 
> 时间：2013-02-18T19:14:21.600
> 
> 标签：shell

`if pgrep apache; then echo "oliver"; fi`
`oliver`如果命令`pgrep apache`不为空， 这将回显。我想做相反的事情。如果命令`pgrep apache`返回空字符串，请运行命令。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T19:18:15.063

```
if ! pgrep apache; then echo "oliver"; fi 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T19:15:31.170

尝试这样做：

```
pgrep &>/dev/null apache || echo "foobar" 
```

或者 ：

```
if ! pgrep &>/dev/null apache; then echo "foobar"; fi 
```

`!`代表*不*

这不是基于命令的输出，而是基于命令 wha`true`或`false`.

在[shell](/questions/tagged/shell "显示标记为“外壳”的问题")中，当一个命令的返回码为 时`0`，就认为是`true`，大于0就认为是`false`。您可以使用变量检查此返回码`$?`，例如：

```
ls /path/to/inexistant/file
echo $? 
```

查看[真假命令](http://en.wikipedia.org/wiki/True_and_false_%28commands%29)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T20:41:43.103

我不确定上下文，但假设您想要做某事某个特定的过程是或未找到。

```
bash-3.2$ pgrep -q bash &&  echo "bash was found"
bash was found

bash-3.2$ pgrep -q XXXbash ||  echo "XXXbash was NOT was found"
XXXbash was NOT was found 
```

# php - 如何在 wordpress 中显示最新帖子中的图像

> ID：14943671
> 
> 赞同：0
> 
> 时间：2013-02-18T19:14:30.990
> 
> 标签：php, wordpress

在 Wordpress 中，我想显示 2 个最新帖子以及第一个帖子的帖子缩略图。

我一直在玩下面的代码，但是当我只想为第一个帖子显示图像时，总是会为第一个帖子和第二个帖子显示图像。

```
<?php 
$cat_args = array(
'orderby' => 'name',
'order' => 'ASC',
'child_of' => 0
);

 $post_args = array(
  'numberposts' => 2,
  'category' => $category->term_id 
);

$posts = get_posts($post_args);

foreach($posts as $post) {
?>
    <?php the_title(); ?>
<?php the_post_thumbnail('blog_post_image'); ?>
<?php 
} 
} 
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T19:16:43.097

您有点错过任何可以让您有选择地显示图像的条件。

```
<?php
foreach($posts as $key=>$post) {
    the_title();

    if (0 == $key) {
        the_post_thumbnail('blog_post_image');
    }
} 
```

假设`$posts`是一个基于 0 的枚举数组。注意添加`$key`到`foreach`, 以及`if`打印缩略图之前

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T08:56:37.183

```
<?php $loop = 1; ?> 
<?php foreach($posts as $post): ?> 
    <?php the_title(); ?>
    <?php if($loop == 1): ?>
        <?php the_post_thumbnail('blog_post_image'); ?>
    <?php endif; ?>
<?php $loop++; endforeach; ?> 
```

# javascript - 有没有办法用javascript提取flash对象的状态？

> ID：14943674
> 
> 赞同：1
> 
> 时间：2013-02-18T19:14:41.430
> 
> 标签：javascript, flash

我想提取 Flash 对象的实际视觉状态并使用 javascript 获取当前帧的内容。然后我希望能够将此状态重新应用于单独页面上的不同 Flash 对象，以便新的 Flash 对象看起来与原始对象完全相同。HTML5 画布让您可以轻松地做到这一点，但是这可以用 Flash 完成吗？请注意，我无法控制包含 Flash 内容的页面，但我的 Javascript 将包含在该页面中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T19:24:22.133

如果您可以访问 Flash，您可以使用 ExternalInterface 进行一些 JS-to-AS3 通信，以导出 Flash 影片的“状态”。您必须创建一个 Flash 函数来存储您希望在其他 Flash 电影中复制的所有变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T19:45:01.723

这可能会对你有所帮助，假设你控制了 flash [JS screenshot flash movie](http://danielmclaren.com/2008/03/use-javascript-to-take-a-screenshot-of-a-flash-movie)

# php - 解析错误：语法错误，第 60 行文件意外结束

> ID：14943675
> 
> 赞同：-1
> 
> 时间：2013-02-18T19:14:46.293
> 
> 标签：php, parsing

我不知道为什么会出现此错误：**Parse error: syntax error, unexpected end of file in C:\xampp\htdocs\sitelinks\top_links.php on line 60**

解析错误：语法错误，第 60 行 C:\xampp\htdocs\sitelinks\top_links.php 中的文件意外结束

```
 <div id="topbar">
    <div id="navigation" class="ddsmoothmenu">
        <ul>
            <li><a href="/index.php" class="main">Home</a></li>
                        <?php if (isset($_SESSION['login'])) { ?>
            <li><a href="/services" class="main">Servizi</a>
                <ul>
                    <li><a href="/services/?p=details" class="sub">Profilo</a></li>
                    <li><a href="/services/?p=atcdocs" class="sub">Documentazione ATC</a></li>
                    <li><a href="/services/?p=pildocs" class="sub">Documentazione PILOTI</a></li>
                    <li><a href="#" class="sub">Training</a></li>
                    <li><a href="#" class="sub">Membri</a></li>

                </ul>
                <? } ?>
            </li>
            <?php if (isset($_SESSION['login'])) { ?>
            <li><a href="#" class="main">Members</a>
                <ul>
                    <li><a href="#" class="sub">Put a link here</a></li>
                    <li><a href="#" class="sub">Put a link here</a></li>
                    <li><a href="#" class="sub">Put a link here</a></li>
                </ul>
                <? } ?>
            </li>
            <?php if (isset($_SESSION['login'])) { ?>
            <li><a href="#" class="main">Databases</a>
                <ul>
                    <li><a href="#" class="sub">Put a link here</a></li>
                    <li><a href="#" class="sub">Put a link here</a></li>
                    <li><a href="#" class="sub">Put a link here</a></li>
                </ul>
                <? } ?>
            </li>
            <?php if (isset($_SESSION['login'])) { ?>
            <li><a href="#" class="main">Divisions</a>
              <ul>
                    <li><a href="#" class="sub">Put a link here</a></li>
                    <li><a href="#" class="sub">Put a link here</a></li>
                    <li><a href="#" class="sub">Put a link here</a></li>
              </ul>
            </li>
            <? } ?>
            <?php if (isset($_SESSION['login'])) { ?>
            <li><a href="#" class="main">Airlines</a>
                <ul>
                    <li><a href="#" class="sub">Put a link here</a></li>
                    <li><a href="#" class="sub">Put a link here</a></li>
                    <li><a href="#" class="sub">Put a link here</a></li>
                </ul>
            </li>
             <? } ?>
            <li><a href="#" class="main">Forum</a></li>
        </ul>
        <? if (isset($_SESSION['login'])) { ?>
    <? } else { ?>
        <a href="/?p=login" class="login">Login</a>
        <? } ?>
    </div>
</div> 
```

谁能帮我？？

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T19:24:07.140

通过用脚本解析每次出现的情况都`<?`很好`<?php`，所以看起来你已经`short_open_tag`设置为关闭。您可以在 php.ini 文件中打开它（您不能使用`ini_set`），或者切换到使用完整的打开标记（我建议您这样做，例如，它允许您`<?xml version="1.0" ?>`在 HTML 文件中使用而无需给`echo`它。）。

# cocoa - Cocoa MVC 真的不是 MVP 吗？

> ID：14943678
> 
> 赞同：12
> 
> 时间：2013-02-18T19:15:02.850
> 
> 标签：cocoa, model-view-controller, design-patterns, mvp

再一次，一个与 MVC 相关的问题。几天前，我开始阅读 Apple 的 Cocoa Fundamentals Guide，其中 Apple 解释了他们的 MVC 实现。

在 MVC as a Compound Design Pattern ([链接](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CocoaFundamentals/CocoaDesignPatterns/CocoaDesignPatterns.html#//apple_ref/doc/uid/TP40002974-CH6-SW22)) 一章中，他们比较了两个 MVC 版本：

*   旧/传统 SmallTalk 版本： ![在此处输入图像描述](../Images/d2a4c3f7e093346dce9b177cb3b75be8.png)

*   **当前 Apple 定义的版本：** ![在此处输入图像描述](../Images/e03e1ba90e98f94d518623c552bf9e16.png)

他们对当前模型的描述如下：

> 这种复合设计模式中的控制器对象结合了中介者模式和策略模式；它在两个方向上调解模型和视图对象之间的数据流。 模型状态的变化通过应用程序**的控制器对象传达给视图对象。**

传统的模式看起来像 MVC，没有错。但是他们当前模式的名称让我感到困惑。据我所知，这可以看作是简单的[MVP](https://stackoverflow.com/tags/mvp/info)，因为控制器似乎总是在视图和模型之间进行调解。

我完全错了，我误解了 MVC 还是 MVP？还是 Apple 只是为这种模式使用了错误的名称？更重要的是，为什么这种当前模式被称为 MVC？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-18T19:55:30.050

您没有错，Apple 文档的作者也没有错。

MVC 的历史现在漫长而复杂——尤其是因为许多系统提倡三方分离，这实际上将控制器混入模型或将控制器混合到视图中。从早期的 Smalltalk 实现中，很明显将模型信息保持在视图之外是一件非常好的事情，而且这很容易做到。

另一方面，清晰地分离控制器和视图的职责就不那么简单了。许多视图都希望被重用，例如按钮或文本字段。他们的控制器的可重用部分也希望被重用。但是您不会按下文本字段或加粗按钮；许多按钮行为与视图密切相关。同时，很难确定业务规则何时属于模型以及何时属于控制器。

此外，这份（非常好的）Apple 文档试图捕捉一种哲学设计理念，而不是描述 The One True Way。许多 Cocoa 控制器子系统看起来很像传统的 MVC。传统的 cocoa 不再强调控制器，因此本文档本质上是在争论给它们一个作为（可重用）视图和（潜在可重用）模型之间的中介的位置。

许多 Cocoa 实现者更喜欢瘦控制器，本质上作为外观来解耦视图和模型。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T19:56:32.267

由于 MVP 是 MVC 的一个子集，因此在 MVC 系统中找到它并不奇怪。是的，第二张图说明了 MVP 模式。

Apple 称它为中介控制器——我综合起来——只是 MVP 的另一个名称。

坦率地说，我不确定*MVP*这个词是否应该流行起来。这意味着它是一种完全不同的模式，并且*演示者*似乎专注于 UI，而有时它只是模型和控制器之间的关系。*中介控制器*非常简单地描述了这种区别。

我不得不查看 MVP 甚至知道你在问什么。该术语在 1996 年的一篇论文中使用。当 OS X 发布时，它仍然是新的。

# functional-programming - 计划让声明

> ID：14943681
> 
> 赞同：10
> 
> 时间：2013-02-18T19:15:11.670
> 
> 标签：functional-programming, scheme, let

在作为函数式编程语言的方案中，没有赋值语句。但在一份`let`声明中

```
(let ((x 2))
    (+ x 3)) 
```

你在赋值`2`，`x`那么为什么这不违反函数式编程中没有赋值语句的原则呢？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-18T19:18:23.990

“Scheme 是一种函数式编程语言”这句话是不正确的。在 Scheme 中，函数式编程风格是被鼓励的，但不是强制的。事实上，您可以使用`set!`（赋值语句！）来修改任何变量的值：

```
(define x 10)
(set! x (+ x 3))
x
=> 13 
```

关于`let`问题的陈述，请记住这样的表达：

```
(let ((x 10))
  (+ x 3))
=> 13 
```

...它只是语法糖，在引擎盖下它是这样实现的：

```
((lambda (x)
   (+ x 3))
 10)
=> 13 
```

请注意， a对其变量`let`执行一次性[单一赋值，因此它](https://en.wikipedia.org/wiki/Assignment_%28computer_science%29#Single_assignment)*本身*并不违反任何纯函数式编程原则，可以肯定以下`let`表达式：

> 如果表达式的评估不改变机器的可观察状态，并且对相同的输入产生相同的值，则表达式的评估不会产生副作用

另外，引用维基百科：

> 不纯函数式语言既提供单一赋值也提供真赋值（尽管真赋值的使用频率通常低于命令式编程语言）。例如，在 Scheme 中，单个赋值（with `let`）和真赋值（with `set!`）都可以用于所有变量，并且提供了专门的原语用于列表、向量、字符串等内部的破坏性更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T19:18:17.947

[http://en.wikipedia.org/wiki/Assignment_(computer_science)#Single_assignment](http://en.wikipedia.org/wiki/Assignment_(computer_science)#Single_assignment)

基本上，这是一个允许的单一分配。由于副作用，其他分配不是“允许的”。

编辑：允许引用，因为正如奥斯卡所说，这不是强制性的，而是建议的。

# c++ - 创建 Windows Aero 向导

> ID：14943685
> 
> 赞同：-1
> 
> 时间：2013-02-18T19:15:27.740
> 
> 标签：c++, winapi, wizard, aero

我是 Visual C++ 的新手。我正在尝试创建 Windows Aero 向导。我[在 Microsoft 网站上找到了这个参考，](http://msdn.microsoft.com/en-us/library/windows/desktop/bb774544%28v=vs.85%29.aspx)但我不明白如何创建它。有人可以给我一个很好的参考或教程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T19:26:18.107

这是一个过于宽泛的问题。查找使用`CreatePropertySheetPage`API 的代码。Windows SDK 包含一些示例，例如在“\Samples\winui\shell\appplatform\aeroizards”下；[MSDN 上的Aero 向导示例 (Windows)](http://msdn.microsoft.com/en-us/library/windows/desktop/dd940345%28v=vs.85%29.aspx)。

# node.js - 用护照推特设置 locomotivejs 的最佳方法？

> ID：14943686
> 
> 赞同：1
> 
> 时间：2013-02-18T19:15:27.343
> 
> 标签：node.js, twitter-oauth, passport.js, locomotivejs

我正在尝试在我的机车项目中配置护照推特。

问题是点击 /auth/twitter 网址后什么也没有发生。

编辑：我点击了控制器，但似乎没有调用 twitter。

我所做的是在 routes.js 上设置匹配 /auth/twitter 并将其映射到 auth_controller.js

类似于下面的代码：

*   路由.js

    ```
    this.match('auth/twitter/', 'auth#twitter');

    this.match('auth/twitter/callback/', 'auth#callback'); 
    ```

*   auth_controller.js

    ```
     var locomotive = require('locomotive')
    , Controller = locomotive.Controller
    , passport = require('passport');

    var AuthController = new Controller();

    AuthController.twitter = function() {

    console.log('[##] AuthController.twitter [##]');     

    passport.authenticate('twitter'), function(req, res) {};  
    }

    AuthController.callback = function() {
    console.log('[##] AuthController.callback [##]');

    passport.authenticate('twitter', { failureRedirect: '/show' }),
      function(req, res) {
        res.redirect('/list');
      };    
     } 

    module.exports = AuthController; 
    ```

我真的不知道这是否是在机车上使用它的正确方法，任何帮助将不胜感激。

干杯，法比奥

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T09:53:13.067

需要先配置护照。可以在[此处](https://github.com/jaredhanson/passport-twitter/blob/master/examples/signin/app.js)找到有关如何执行此操作的示例。在 LocomotiveJS 的情况下，放置该配置的明显位置是初始化程序：

```
// config/initializers/10_passport_twitter.js <-- you can pick filename yourself
module.exports = function(done) {    
  // At least the following calls are needed:
  passport.use(new TwitterStrategy(...));
  passport.serializeUser(...);
  passport.deserializeUser(...);
}; 
```

接下来，配置会话并初始化 Passport：

```
// config/environments/all.js
module.exports = {
  ...
  // Enable session support.
  this.use(connect.cookieParser());
  this.use(connect.session({ secret: YOUR_SECRET }));
  // Alternative for the previous line: use express.cookieSession() to enable client-side sessions
  /*
    this.use(express.cookieSession({
     secret  : YOUR_SECRET,
     cookie  : {
       maxAge  : 3600 * 6 * 1000 // expiry in ms (6 hours)
     }
    }));
  */

  // Initialize Passport.
  this.use(passport.initialize());
  this.use(passport.session());
  ...
}; 
```

接下来，配置路由：

```
// config/routes.js
this.match('auth/twitter/', 'auth#twitter');
this.match('auth/twitter/callback/', 'auth#callback'); 
```

因为是中间件，所以在控制器中使用钩子`passport.authenticate`更容易：`before`

```
// app/controllers/auth_controller.js
...
AuthController.twitter = function() {
  // does nothing, only a placeholder for the following hook.
};
AuthController.before('twitter', passport.authenticate('twitter'));

AuthController.callback = function() {
  // This will only be called when authentication succeeded.
  this.redirect('/list');
}
AuthController.before('callback', passport.authenticate('twitter', { failureRedirect: '/auth/twitter' })}; 
```

免责声明：我没有测试上面的代码，我是基于我最近在一个项目中使用的我自己的代码，它使用`passport-local`而不是`passport-twitter`. 但是，除了`passport-local`.

# c++ - 检测具有范围的向量数组中的弧形和圆形

> ID：14943691
> 
> 赞同：4
> 
> 时间：2013-02-18T19:15:43.690
> 
> 标签：c++, math, opengl-es, wolfram-mathematica

我有一个二维顶点数组，我想检测数组中是否有任何拱形或圆形。有时值不是那么精确，我需要一个小范围。这是价值观。第三个verticle值保持为0：

```
verticle:  -0.014848, -13.2684, 0 angle : 0.141274
verticle:  -0.0174556, -4.84519, 0 angle : 90
verticle:  0, 0, 0 angle : 90
verticle:  -9.53674e-07, 14.14, 0 angle : 40.7168
verticle:  -12.1101, 14.0709, 0 angle : 7.94458
verticle:  -12.0996, 10.6442, 0 angle : 0.294751
verticle:  -12.2305, 10.6484, 0 angle : 0.24309
verticle:  -12.325, 10.6384, 0 angle : 0.349426
verticle:  -12.4475, 10.6125, 0 angle : 0.392669
verticle:  -12.5638, 10.564, 0 angle : 0.404935
verticle:  -12.678, 10.508, 0 angle : 0.34605
verticle:  -12.7579, 10.4453, 0 angle : 0.391671
verticle:  -12.8315, 10.36, 0 angle : 0.390671
verticle:  -12.9051, 10.2747, 0 angle : 0.438795
verticle:  -12.9725, 10.1668, 0 angle : 0.455425
verticle:  -13.0377, 10.0514, 0 angle : 0.300014
verticle:  -13.0407, 9.94522, 0 angle : 0.388662
verticle:  -13.0738, 9.83064, 0 angle : 0.338041
verticle:  -13.0725, 9.70936, 0 angle : 0.254878
verticle:  -13.0412, 9.59645, 0 angle : 0.257171
verticle:  -13.0098, 9.48352, 0 angle : 0.259443
verticle:  -12.9785, 9.37061, 0 angle : 0.158259
verticle:  -12.9192, 9.27357, 0 angle : 0.0713262
verticle:  -12.8297, 9.18489, 0 angle : 0.14537
verticle:  -12.7724, 9.09539, 0 angle : 0.0484566
verticle:  -12.657, 9.03012, 0 angle : 0.0197823
verticle:  -12.5738, 8.96403, 0 angle : 0.125115
verticle:  -12.4667, 8.92887, 0 angle : 0.219397
verticle:  -12.3296, 8.90207, 0 angle : 0.185575
verticle:  -12.2288, 8.88951, 0 angle : 0.299361
verticle:  -12.1, 8.89282, 0 angle : 11.3066
verticle:  -12.1075, 5.64764, 0 angle : 0.158259
verticle:  -12.2062, 5.65268, 0 angle : 0.266879
verticle:  -12.3329, 5.64184, 0 angle : 0.312787
verticle:  -12.4554, 5.61594, 0 angle : 0.384104
verticle:  -12.5717, 5.56746, 0 angle : 0.322034
verticle:  -12.6557, 5.5198, 0 angle : 0.45024
verticle:  -12.7657, 5.44874, 0 angle : 0.416371
verticle:  -12.8415, 5.37097, 0 angle : 0.464781
verticle:  -12.913, 5.27815, 0 angle : 0.514343
verticle:  -12.9803, 5.17027, 0 angle : 0.436111
verticle:  -13.0176, 5.07075, 0 angle : 0.487788
verticle:  -13.0506, 4.95617, 0 angle : 0.439686
verticle:  -13.0515, 4.84242, 0 angle : 0.441462
verticle:  -13.0524, 4.72867, 0 angle : 0.470222
verticle:  -13.0511, 4.6074, 0 angle : 0.399585
verticle:  -13.0198, 4.49448, 0 angle : 0.402998
verticle:  -12.9885, 4.38156, 0 angle : 0.305828
verticle:  -12.9291, 4.28452, 0 angle : 0.237388
verticle:  -12.8396, 4.19585, 0 angle : 0.213062
verticle:  -12.7523, 4.1147, 0 angle : 0.188712
verticle:  -12.667, 4.04107, 0 angle : 0.0625573
verticle:  -12.5557, 3.99086, 0 angle : 0.0279765
verticle:  -12.4466, 3.94818, 0 angle : 0.0197823
verticle:  -12.3416, 3.92056, 0 angle : 0.158259
verticle:  -12.2107, 3.91634, 0 angle : 0.111906
verticle:  -12.1121, 3.9113, 0 angle : 17.8633
verticle:  -12.0988, 0.00704384, 0 angle : 15.2939
verticle:  -12.0895, -3.29836, 0 angle : 0.174713
verticle:  -12.2204, -3.29415, 0 angle : 0.100871
verticle:  -12.3471, -3.30499, 0 angle : 0.034264
verticle:  -12.4395, -3.32253, 0 angle : 0.0395647
verticle:  -12.5579, -3.36349, 0 angle : 0.139882
verticle:  -12.67, -3.42703, 0 angle : 0.170174
verticle:  -12.7499, -3.48974, 0 angle : 0.236563
verticle:  -12.8557, -3.57586, 0 angle : 0.266144
verticle:  -12.9293, -3.66115, 0 angle : 0.363156
verticle:  -12.9666, -3.76067, 0 angle : 0.357727
verticle:  -13.0339, -3.86855, 0 angle : 0.421973
verticle:  -13.067, -3.98313, 0 angle : 0.454565
verticle:  -13.0678, -4.09688, 0 angle : 0.452407
verticle:  -13.0687, -4.21063, 0 angle : 0.482545
verticle:  -13.0675, -4.3319, 0 angle : 0.487788
verticle:  -13.0361, -4.44482, 0 angle : 0.463094
verticle:  -12.9768, -4.54186, 0 angle : 0.421973
verticle:  -12.9496, -4.63972, 0 angle : 0.44279
verticle:  -12.8622, -4.72087, 0 angle : 0.402026
verticle:  -12.8071, -4.80285, 0 angle : 0.383084
verticle:  -12.7239, -4.86895, 0 angle : 0.399585
verticle:  -12.6105, -4.92668, 0 angle : 0.29074
verticle:  -12.5336, -4.97019, 0 angle : 0.30901
verticle:  -12.4266, -5.00535, 0 angle : 0.245493
verticle:  -12.3237, -5.02544, 0 angle : 0.214891
verticle:  -12.2229, -5.03801, 0 angle : 0.132704
verticle:  -12.0983, -5.01964, 0 angle : 11.875
verticle:  -12.0995, -8.28741, 0 angle : 0.300014
verticle:  -12.2304, -8.28319, 0 angle : 0.199792
verticle:  -12.327, -8.28568, 0 angle : 0.179137
verticle:  -12.4495, -8.31158, 0 angle : 0.121947
verticle:  -12.5679, -8.35253, 0 angle : 0.0395647
verticle:  -12.6799, -8.41607, 0 angle : 0.0279765
verticle:  -12.7598, -8.47878, 0 angle : 0.0442347
verticle:  -12.8657, -8.56491, 0 angle : 0.138476
verticle:  -12.9372, -8.65773, 0 angle : 0.199792
verticle:  -12.9765, -8.74972, 0 angle : 0.214891
verticle:  -13.0418, -8.86513, 0 angle : 0.275536
verticle:  -13.0749, -8.9797, 0 angle : 0.335718
verticle:  -13.0757, -9.09345, 0 angle : 0.359365
verticle:  -13.0745, -9.21473, 0 angle : 0.356083
verticle:  -13.0733, -9.33601, 0 angle : 0.39217
verticle:  -13.0419, -9.44893, 0 angle : 0.428872
verticle:  -12.9805, -9.55349, 0 angle : 0.402512
verticle:  -12.9211, -9.65052, 0 angle : 0.401538
verticle:  -12.8618, -9.74756, 0 angle : 0.417778
verticle:  -12.7744, -9.82871, 0 angle : 0.436559
verticle:  -12.659, -9.89397, 0 angle : 0.370094
verticle:  -12.5758, -9.96007, 0 angle : 0.338041
verticle:  -12.4687, -9.99522, 0 angle : 0.384613
verticle:  -12.3316, -10.022, 0 angle : 0.265408
verticle:  -12.2308, -10.0346, 0 angle : 0.261696
verticle:  -12.1041, -10.0237, 0 angle : 7.8231
verticle:  -12.1023, -13.1853, 0 angle : 42.4836 
```

我认为解决此问题的唯一方法是距离计算与大于某个值的角度相结合。我知道这是一个糟糕的解决方案。但我想不出任何其他方法来计算这个。

这是角度计算的方式：

```
 inline float ofVec3f::angle( const ofVec3f& vec ) const {
ofVec3f n1 = this->normalized();
ofVec3f n2 = vec.normalized();
return (float)(acos( n1.dot(n2) )*RAD_TO_DEG);
 } 
```

两点之间的距离：

```
 inline float ofVec3f::distance( const ofVec3f& pnt) const {
float vx = x-pnt.x;
float vy = y-pnt.y;
float vz = z-pnt.z;
return (float)sqrt(vx*vx + vy*vy + vz*vz);
  } 
```

我使用 OpenFrameworks 库来实现这一点：

```
float dist = buildings[x].polygon[z].distance(buildings[x].polygon[z+1]);
        float angle ;
        if ( z < buildings[x].polygon.size()-1){
            angle  =  buildings[x].polygon[z].angle(buildings[x].polygon[z+1]);
        }
         if ( ( dist >  0.100)&& ( dist <  0.150)) {
          //Is part of ellipse
       } 
```

这是图书馆的github

[https://github.com/openframeworks/openFrameworks/blob/master/libs/openFrameworks/math/ofVec3f.h](https://github.com/openframeworks/openFrameworks/blob/master/libs/openFrameworks/math/ofVec3f.h)

这是点和线的两个屏幕截图

![线](../Images/aa35623fe62f40960a7588f0d2155735.png)

![积分](../Images/d5c46f51580d076dc84ba65599bd127d.png)

这是一个顶点 x,yx,y 的向量数组

```
-0.11878395,-106.14753 -0.13964462,-38.761494 0.0,0.0 -7.6293945E-6,113.11968 -96.88052,112.56717 -96.79668,85.153725 -97.843834,85.18742 -98.599945,85.107315 -99.58024,84.900116 -100.51039,84.51225 -101.42383,84.06417 -102.06295,83.562485 -102.65193,82.88013 -103.240906,82.197784 -103.77975,81.33476 -104.30187,80.41151 -104.325485,79.56175 -104.59001,78.64513 -104.5802,77.67491 -104.32949,76.77156 -104.07879,75.868195 -103.82809,74.96484 -103.35321,74.18856 -102.63742,73.47914 -102.17926,72.763084 -101.25601,72.24097 -100.59037,71.71221 -99.73398,71.43098 -98.63669,71.2166 -97.83043,71.11605 -96.8,71.14256 -96.859665,45.18112 -97.6492,45.22146 -98.66293,45.134716 -99.64322,44.92752 -100.57338,44.539658 -101.245926,44.158424 -102.12593,43.58989 -102.73163,42.96776 -103.303894,42.22518 -103.84273,41.36216 -104.14067,40.56599 -104.40518,39.649376 -104.412094,38.739384 -104.41901,37.8294 -104.409195,36.859184 -104.15849,35.955826 -103.90778,35.052475 -103.43291,34.27619 -102.71712,33.566765 -102.01806,32.917564 -101.33571,32.328587 -100.445885,31.92691 -99.57278,31.585457 -98.73309,31.364452 -97.68595,31.330748 -96.89641,31.290417 -96.790054,0.056350708 -96.71601,-26.386883 -97.76316,-26.353178 -98.77688,-26.439924 -99.51628,-26.580261 -100.46315,-26.907902 -101.35987,-27.416212 -101.99899,-27.917892 -102.84558,-28.606876 -103.434555,-29.289228 -103.732506,-30.0854 -104.27134,-30.948421 -104.53585,-31.86504 -104.542755,-32.77503 -104.54967,-33.685017 -104.53986,-34.655228 -104.28916,-35.558586 -103.81427,-36.33486 -103.59699,-37.117775 -102.897934,-37.766975 -102.456474,-38.422806 -101.79083,-38.95156 -100.8843,-39.41346 -100.2688,-39.761543 -99.41241,-40.04277 -98.58944,-40.203552 -97.78319,-40.30411 -96.78618,-40.157143 -96.79571,-66.299255 -97.84286,-66.26555 -98.615685,-66.285446 -99.59598,-66.49263 -100.54285,-66.820274 -101.439575,-67.32858 -102.07869,-67.83027 -102.92528,-68.51925 -103.497536,-69.261826 -103.8122,-69.99777 -104.33433,-70.92102 -104.59884,-71.83764 -104.60574,-72.74762 -104.59593,-73.717834 -104.58613,-74.68805 -104.33543,-75.5914 -103.84383,-76.42791 -103.36895,-77.204185 -102.89406,-77.98047 -102.195,-78.62967 -101.27175,-79.151794 -100.6061,-79.68055 -99.74972,-79.96178 -98.65242,-80.17615 -97.84617,-80.27671 -96.83245,-80.189964 -96.81836,-105.482315 -0.11878395,-106.14753 
```

其他向量数组

```
 0.0,46.766045 -5.8214893,46.69686 -5.820862,47.05351 -5.8475914,47.425262 -5.918213,47.749863 -6.0161915,48.08957 -6.1278477,48.43683 -6.283396,48.73693 -6.4526215,49.04459 -6.6794205,49.312645 -6.89254,49.573143 -7.1330166,49.848755 -7.4037094,50.069653 -7.6744003,50.290554 -7.988985,50.4643 -8.32011,50.57577 -8.621017,50.74196 -8.982357,50.79873 -9.330019,50.847942 -9.677681,50.897156 -10.011665,50.938812 -35.375645,50.81018 -64.38959,50.69822 -64.377785,49.620728 -64.35231,48.535683 -64.299484,47.435524 -64.20275,46.382523 -64.064995,45.30686 -63.91356,44.223648 -63.748447,43.132874 -63.525764,42.081707 -63.2894,41.022987 -63.025684,39.949158 -62.71807,38.922485 -62.38311,37.880703 -62.004246,36.886078 -61.611713,35.883904 -61.191822,34.86661 -60.758247,33.841774 -60.280785,32.86409 -59.759426,31.933561 -59.224392,30.995481 -58.67568,30.049845 -58.08307,29.151367 -57.476788,28.245333 -56.856827,27.331745 -56.162758,26.520025 -55.48522,25.646042 -54.777473,24.826767 -54.02583,24.05465 -53.304405,23.227821 -52.508865,22.502861 -51.69965,21.770344 -50.890438,21.037828 -50.051006,20.360025 -49.1979,19.674667 -48.314575,19.044018 -47.401035,18.468079 -46.504032,17.829878 -45.560276,17.30865 -44.602844,16.77987 -43.65909,16.258642 -42.671436,15.784572 -41.697464,15.318055 -40.693275,14.906249 -39.689087,14.494442 -38.654682,14.137346 -37.633957,13.787806 -36.58301,13.492973 -35.545746,13.205697 -34.478268,12.973131 -33.42446,12.748117 -32.340443,12.577815 -31.270102,12.415068 -30.18322,12.314583 -29.09634,12.2141 -28.006598,12.183435 -26.916859,12.152769 -25.840796,12.129659 -25.80352,9.967116 -25.811121,8.75754 -25.813,7.687599 -25.713875,0.20740414 -25.278425,0.25250435 -12.768033,0.054601192 -0.25477973,-0.073483296 0.0,0.0 0.0,46.766045 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T02:19:41.957

霍夫圆拟合或 RANSAC 圆拟合可能适合您；在图像处理中，我们使用这些算法来寻找圆、弧、椭圆和其他形状。

[http://en.wikipedia.org/wiki/Hough_transform](http://en.wikipedia.org/wiki/Hough_transform)

[http://en.wikipedia.org/wiki/RANSAC](http://en.wikipedia.org/wiki/RANSAC)

这些算法适用于嘈杂的数据。

Gary Bradski 的《Learning OpenCV》一书中有一个名为“Hough Circle Transform”的部分，它运行了几页。尽管您可能会查看 OpenCV 库本身，但您可能会在其他地方找到更直接的 Hough 变换和 RANSAC 描述。

**[编辑]**

我用 C# 编写了一个快速的 Hough 算法，它与您的数据配合得很好。您可以添加随机噪声，它仍然可以工作。核心算法是大约 100 行带有注释和空格的代码，这是一个草率的算法。

该算法的一部分输出图像如下所示，数据点为白色，霍夫拟合圆圈为红色。

我没有实现的一个标准算法步骤是过滤数据以消除除最佳圆拟合之外的所有圆拟合，当有几个合理的圆拟合具有大致相同的中心和大致相同的半径时。这就是为什么你会看到一个穿过这些点的双圆。

虽然 Hough 算法可能看起来有点矫枉过正，但好的是它可以一次又一次地工作，它是可重用的，易于参数化，并且无论数据是干净的还是嘈杂的，它都会产生良好的结果。

![样本数据上的霍夫圆](../Images/819165ac3735fab05405157aee83b46c.png)

注意：为了简化实现，我将 (x,y) 的浮点值转换为整数并将值归一化，以便所有 (x,y) 都是正数。像这样的东西：

```
int x = (int)(100 * floatX + 1600);  //floatX = original X value in data
int y = (int)(100 * floatY + 3200);  //floatY = original Y value in data 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T22:07:53.947

this is not a complete answer but an illustration of my above comment, finding arc centers of sucessive points..by trial and error it works best if you look at wider spread points (1,5,9) , (2,6,10) , etc. (data here is a list of your x,y pairs)

```
arccenter[p_] := {xc, yc} /. 
   Solve[ { (p[[1]] - p[[2]] ).({xc, yc} - (p[[1]] + p[[2]])/2) == 
      0, (p[[2]] - p[[3]] ).({xc, yc} - (p[[2]] + p[[3]])/2) == 
      0 } , {xc, yc}][[1]]
pdata = Partition[data, 9, 1];
centers = arccenter[#[[{1, 5, 9}]]] & /@ pdata;
cc = Select[centers, Abs[#[[1]]] < 30 && Abs[#[[2]]] < 30 &];
Show[
     {Graphics[Point[#] & /@ data],
      Graphics[{Red, Point[#]} & /@ cc]}, 
      PlotRange -> {{-20, 0}, {-15, 15}}] 
```

![enter image description here](../Images/cb094a3d04a62f360a16558bebe66f14.png)

it should just take a little more effort to filter which centers are near each other. (recall that they too are ordered..)

# facebook-apps - 更改行为以显示在时间线上

> ID：14943695
> 
> 赞同：0
> 
> 时间：2013-02-18T19:16:02.623
> 
> 标签：facebook-apps, html-email

如何更改出现在新闻源上的这种行为

`[FacebookUser] likes a link on [AppName]`

以这种方式阅读：

`[FacebookUser] likes an offer on [AppName]`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T20:34:53.643

您需要`offer`在 Open Graph 上为[内置`like`操作](https://developers.facebook.com/docs/submission-process/opengraph/guidelines/#builtin)创建一个对象。[在此处](https://developers.facebook.com/docs/technical-guides/opengraph/defining-an-object/)阅读有关定义自定义对象的信息。

# ember.js - 如何知道插座中加载了哪个控制器

> ID：14943697
> 
> 赞同：1
> 
> 时间：2013-02-18T19:16:14.340
> 
> 标签：ember.js

我有两个控制器，它们都加载到同一个插座，所以一次只能激活一个。两者都像这样观察第三个控制器上的属性：

```
App.SearchController = Ember.ObjectController.extend({
    needs: ['navigation'],

    updateResults: function () {
        console.log('load search data');
    }.observes('controllers.navigation.search')
}); 
```

完整样本

[http://jsfiddle.net/FMk7R/1/](http://jsfiddle.net/FMk7R/1/)

当属性更改时，会获取一些数据。如果我单击两个链接以加载两者，那么当属性更改时，两个控制器都会接收观察事件并加载数据。我只想将数据加载到可见的数据中。

如何确定哪个控制器当前处于活动状态并仅在活动控制器中加载数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T19:44:54.977

理想情况下，您的控制器不应该知道它们处于活动状态。一种替代方法是反转关系，以便 NavController 负责更改“活动”控制器的查询属性。

** 更新 - 根据评论添加示例 **

```
App.SearchRoute = Ember.Route.extend({
  setupController: function(controller) {
      this.controllerFor('navigation').set('active', controller);
  }
});

App.ImagesRoute = Ember.Route.extend({
  setupController: function(controller) {
      this.controllerFor('navigation').set('active', controller);
  }
});

App.SearchController = Ember.ObjectController.extend({
  loadResults: function (query) {
    console.log('loading web search data for: ', query);
  }
});

App.ImagesController = Ember.ObjectController.extend({
  loadResults: function (query) {
    console.log('loading image search data for: ', query);
  }
});

App.NavigationController = Ember.ObjectController.extend({
  search: '',
  active: null,
  searchDidChange: function() {
    this.get('active').loadResults(this.get('search'));
  }.observes('search', 'active')
}); 
```

见[http://jsfiddle.net/F3uFp/1/](http://jsfiddle.net/F3uFp/1/)

另一种选择是改用计算属性。Ember 只会刷新渲染活动视图实际需要的计算属性。例如：

```
 App.SearchController = Ember.ObjectController.extend({
        needs: ['navigation'],
        results: function () {
           console.log('loading web search data');
           return("web search results");
        }.property('controllers.navigation.search')
    }); 
```

在此处查看更新的小提琴：http: [//jsfiddle.net/ZTnmp/](http://jsfiddle.net/ZTnmp/)

[http://jsfiddle.net/FMk7R/1/](http://jsfiddle.net/FMk7R/1/)

# mysql - MySQL - 搜索小数点后 3 位的条目

> ID：14943700
> 
> 赞同：0
> 
> 时间：2013-02-18T19:16:42.380
> 
> 标签：mysql

我有一个包含 750 万个条目的表，在导入一些数据时，一些列中断搞砸了，一列的第一个数字最终卡在了前一列的末尾。

例如，在一行上它应该说`ELWS=123.44`and `t2=17.00`，而不是读入`ELWS=123.441`and `t2=7.00`。

这只发生在少数几个地方。

有什么方法可以搜索以`ELWS`小数点后 3 位结尾的条目吗？此外，所有字段都是双重类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T19:20:56.590

```
SELECT * FROM someTable
WHERE (ELWS * 1000) % 10 != 0 
```

[SQLFiddle在这里](http://sqlfiddle.com/#!2/8ed0a/1)

# c++ - 两个不同类之间的构造函数和析构函数

> ID：14943714
> 
> 赞同：1
> 
> 时间：2013-02-18T19:17:23.753
> 
> 标签：c++

所以，我尝试创建两个相互指向的类（有一个指向另一个类的指针作为私有变量）这里是代码：

```
class Fruit
{
public:
    Fruit(){
    }
private:
    Plant *thisPlant;
}

class Plant
{
public:
    Plant(){
      thisFruit= new Fruit();
    }
private:
    Fruit *thisFruit;
} 
```

我不确定应该在 Fruit 构造函数中放入什么。我想我不能放 new Plant() 因为它会指向一个新的植物，而且它也会产生一个错误。我想要这样的东西：植物有一个指向水果的变量。Fruit 有一个指向 Plant 的变量。因为我会在 Plant 类中使用一些 Fruit 的公共方法，反之亦然。

关于析构函数，我只想澄清一件事。当我销毁 Fruit 变量时，如果我不输入命令“delete thisPlant;” 对象植物没有被破坏吧？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T19:27:22.797

如果你要放入`new Fruit`构造`Plant`函数和构造函数，你最终会得到无限递归`new Plant`。`Fruit`创建 a`Plant`将创建 a`Fruit`将创建 a`Plant`将创建 a `Fruit`，依此类推。

```
Plant ---> Fruit ---> Plant ---> Fruit ---> ... 
```

但这显然**不是你想要的关系**。A`Plant`有 a `Fruit`，但`Fruit`没有不同的`Plant`。它肯定希望有一个指向`Plant`它所属的指针。

```
Plant <--> Fruit 
```

为此，您的`Fruit`构造函数应该采用一个类型的参数`Plant*`，以允许将`Plant`指向自身的指针传递给`Fruit`它所拥有的。

```
class Plant;

class Fruit
{
 public:
  Fruit(Plant* parent){
    parent = parent;
  }
 private:
  Plant* parent;
};

class Plant
{
 public:
  Plant(){
    fruit= new Fruit(this);
  }
 private:
  Fruit* fruit;
}; 
```

请注意，`Plant`构造函数传递`this`给它的`Fruit`. `Plant`现在和之间存在双向关系`Fruit`。`Plant`关于它的知道和关于它`Fruit`的`Fruit`知道`Plant`。

现在，请记住，每个人都`new`必须有一个`delete`. 这意味着在析构函数中`Plant`，你应该这样做`delete fruit;`。当你销毁 a`Plant`时，它的析构函数会销毁它的`Fruit`. 你*不能*这样`Fruit`做，`delete parent;`因为它的父级已经被销毁了。The`Plant`负责销毁它的`Fruit`，而不是相反。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T19:27:46.697

通过*“自然”语义层次规则*类`Fruit`应该将`Plant*`指针作为构造函数参数，并且永远不应该使用它的析构函数来触及它。

此外，看起来从 class 继承的具体类`Plant`应该负责创建`Fruit`该类的实例（使用 s.th. like `new ConcreteFruit(this)`）。您可以在基类中提供一个 Destructor 实现，该实现`Plant`将在销毁时销毁此实例。

我认为`Fruit`并且`Plant`可以是抽象类，您将在其中派生具体的对，例如

```
class CherryTree : public Plant 
{ 
    // ... 
}

class Cherry : public Fruit 
{ 
    Cherry(CheryTree* plant) : Fruit(plant) {}
    // ... 
} 
```

或者你需要一些机制使用类属性（例如`std::string plantName`<=> `std::string fruitName`）构建对。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T19:33:39.157

为了摆脱母鸡问题，您可以使用模板：

```
template <class PlantType>
class Fruit_impl
{
public:
    Fruit_impl(PlantType * parent = 0){
        if(parent == 0)
            parent = new PlantType(this);
        thisPlant = parent;
    }
private:
    PlantType *thisPlant;
};

class Plant
{
public:
    typedef Fruit_impl<Plant> fruit_type;
    Plant(fruit_type * parent = 0){
        if(parent == 0)
            parent = new Fruit<Plant>(this);
        thisFruit = parent;
    }
private:
    fruit_type * thisFruit;
};

typedef Fruit_impl<Plant> Fruit; 
```

请注意，您需要提供某种控制机制以避免递归（请参阅[sftrabbit 的](https://stackoverflow.com/a/14943846/1139697)答案）。

但是，请注意，在上面给出的实现中存在循环依赖，因此很难删除对象。

# qt - QWidget 报告错误的宽度值

> ID：14943715
> 
> 赞同：8
> 
> 时间：2013-02-18T19:17:24.890
> 
> 标签：qt, qwidget

我想查询一个小部件的宽度来进行一些自定义布局管理。不幸的是，无论小部件实际有多大或多小，以下代码都会返回 640

```
int myWidth = this->rect().size().width();  // "this" is my class derived from QWidget
// myWidth is set to 640 
```

编辑：

`int myWidth = this->width()`返回相同的 640

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-18T20:21:01.360

正确的地方做特殊布局管理被覆盖[`resizeEvent`](http://qt-project.org/doc/qt-4.8/qwidget.html#resizeEvent)。此时小部件的大小是确定的（通常由父小部件的布局，基于[大小提示](http://qt-project.org/doc/qt-4.8/qwidget.html#sizeHint-prop)和[大小策略](http://qt-project.org/doc/qt-4.8/qwidget.html#sizePolicy-prop)）。它也保证在第一次显示小部件之前被调用。记住也要调用超类[`resizeEvent`](http://qt-project.org/doc/qt-4.8/qwidget.html#resizeEvent)，至少如果您在布局中有子小部件。

# android - Android 设备窗口选择器在更新设备后不起作用

> ID：14943716
> 
> 赞同：0
> 
> 时间：2013-02-18T19:17:26.537
> 
> 标签：android, eclipse, deployment, adb

我一直使用我的 android 手机进行开发，但是在我的设备（4.2.2）上安装了最后一个软件更新后，它突然停止工作，并在 eclipse 的`Device Window Chooser`.

![在此处输入图像描述](../Images/eb3e4dd5f0ecb083753700793a4cab4a.png)

我无法将应用程序发送给它进行测试或使用 adb-shell 访问它。我打开了开发人员选项并启用了调试模式。我在 Ubuntu linux 上使用 Eclipse Helios。

当我启动 Eclipse 时，将显示以下窗口

![在此处输入图像描述](../Images/2b88309505b15e24a9bc28f32fa308a8.png)

单击检查更新后，我收到以下错误：

`Unable to read repository at jar:file:/home/matteo/Downloads/ADT-18.0.0.zip!/site.xml. error in opening zip file</code>`.

最后一件事，如果我打开 Window->Preferences 并继续使用 Android，我会看到：

![在此处输入图像描述](../Images/95c48c4b93da19da845805a5727a84d9.png)

这个问题不是[Android 设备选择器的重复 - 我的设备似乎离线](https://stackoverflow.com/questions/5584976/android-device-chooser-my-device-seems-offline)（我阅读了每一行）。这是对社区提出严格解决方案的要求。事实上，正如您在附加的快照中看到的那样，没有一个建议的解决方案帮助我让我的设备出现在网上。

请帮我！任何建议将不胜感激！;D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T19:27:56.227

好的 open sdk manager /sdk/tools/android 现在下载 sdk 用于您的新 android 版本。就我而言，它是 API 17。一旦完成，你应该准备好了。

如果您仍然遇到问题，请确保您安装了最新版本的 ADT。再次安装它[http://developer.android.com/sdk/installing/installing-adt.html](http://developer.android.com/sdk/installing/installing-adt.html)

现在你应该准备好了。

# ruby - 打印要与 Highcharts 一起使用的 ruby 数组

> ID：14943718
> 
> 赞同：0
> 
> 时间：2013-02-18T19:17:30.660
> 
> 标签：ruby, highcharts

我有一个带有一些查询的数组，可用作 Highcharts 中的数据

Ruby 数组是 @report

```
subscriptions.each do |data|
    idx = data['index'].gsub(/-/, '').to_i
    @report['summary'][idx] ||= {}
    @report['summary'][idx]['total_month'] ||= 0
    @report['summary'][idx]['year'] = data['year']
    @report['summary'][idx]['month'] = data['month']
    @report['summary'][idx]['day'] = data['day']
    @report['summary'][idx]['hour'] = data['hour']
    @report['summary'][idx]['total_month'] +=  data['quantity'].to_i
    @report['summary'][idx][data['operator']] = data['quantity']

    @report['total'][data['operator']] += data['quantity'].to_i
    @report['total']['global'] += data['quantity'].to_i
end 
```

而Highchart脚本是......

```
$(document).ready(function() { 
var chart1 = new Highcharts.Chart({
    chart: {
        renderTo: 'container',
        type: 'line'
    },
    title: {
        text: <%= @subservice.service.name %>
    },
    xAxis: {
        categories: ['Year', 'Month']
    },
    yAxis: {
        title: {
            text: 'total'
        }
    },
    series: [{
        name: 'total',
        data: <%= @report["total"].to_json %>
    }]
});
}) 
```

我如何打印@report 值？

# css - @import 样式在媒体查询中不起作用

> ID：14943719
> 
> 赞同：23
> 
> 时间：2013-02-18T19:17:30.660
> 
> 标签：css, wordpress, import, media-queries

我正在尝试根据媒体查询导入样式，但不会触发导入如果我将样式直接放在媒体查询中，它们将呈现到页面。

这是指向实时站点[http://update.techbasics.ca的链接](http://update.techbasics.ca)

这是我的 style.css 与媒体查询和导入

如果这有助于调试，我正在使用 wordpress。

```
@import url('base.css');
/******************************************************************
Site Name: Tech Basics
Author: Anders Kitson

Stylesheet: Main Stylesheet

Here's where the magic happens. Here, you'll see we are calling in
the separate media queries. The base mobile goes outside any query
and is called at the beginning, after that we call the rest
of the styles inside media queries.
******************************************************************/
* {
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box; }

/*****************************************************************
BASE CSS
*****************************************************************/

/*****************************************************************
MEDIA QUERIES
*****************************************************************/
@media only screen and (min-width: 480px) {
    @import url('min480.css');
  }
@media only screen and (min-width: 600px) {
     @import url('min600.css');
  }
 @media only screen and (min-width: 768px) {
  body {
    background: purple; } }
@media only screen and (min-width: 992px) {
  body {
    background: orange; } }
@media only screen and (min-width: 1382px) {
  body {
    background: url("../img/noisy_grid.png"); } }
/* iPhone 4 ----------- */
@media only screen and (-webkit-min-device-pixel-ratio : 1.5), only screen and (min-device-pixel-ratio : 1.5) {
  @import url('base.css'); 
} 
```

这是 min600.css （与 style.css 文件位于同一目录中）

```
header {
  text-align: left; }
  body{
    background: green;
  } 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-09-05T12:13:48.017

试试那种代码

```
@import url("/inc/Styles/full.css") (min-width: 940px); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-01-16T11:58:22.577

**这是解决方案：**

```
/* Everything 700px and lower */
@import url("./700.css") only screen and (max-width: 700px); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-07-15T08:48:12.357

你是这样用的吗？

你可以写：

```
@import url('path.css') (screen and min/max-width: 600px); 
```

您可以在使用时添加路径`@import`

或喜欢：

```
@import url(style.css) (screen and min-width:600px); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-09-01T03:19:00.703

MDN 声明`@import`不能嵌套，必须**在**除`@charset`.

语法如下：

```
@import url;
@import url list-of-media-queries; 
```

[https://developer.mozilla.org/en-US/docs/Web/CSS/@import](https://developer.mozilla.org/en-US/docs/Web/CSS/@import)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-18T21:20:26.547

它工作正常，尝试调整窗口大小，你会看到颜色发生变化正如我在屏幕上的主窗口（1920x1080）中看到的 CSS 规则

```
body {
background: url("../img/noisy_grid.png");
} 
```

位于 style.css 中，第 37-38 行首先触发，这就是您看不到橙色的原因。尝试重新安排你的 CSS 规则

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-21T15:33:49.997

我遇到了同样的问题，在没有找到好的解决方案进行搜索之后，我最终将媒体查询移到了导入的 css 中。事实上，所有样式表都会被下载，即使它们没有被应用（参见[CSS 媒体查询](https://developer.mozilla.org/en-US/docs/CSS/Media_queries)）。

那么拥有单独的文件有什么意义呢？对我来说，它使事情井井有条。使用您的示例：

```
@import url(min480.css); /* min-width: 480px */
@import url(min600.css); /* min-width: 600px */ 
```

然后在 min600.css 上：

```
/* min600.css */
@media only screen and (min-width: 600px) {
   header {
      text-align: left; 
   }
   body {
      background: green;
   }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-07-24T11:04:52.017

真实的陈述

```
@import ('filename.css') mediaType and (feature: value); 
```

例子：

```
@import (responsive.css) screen and (min-width: 320px) and (max-width: 480px); 
```

注意：如果对 CSS 文件使用 @import，则该文件不应附加在`<link>`标签中。否则不工作样式。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-03-25T23:40:18.010

在我的情况下，我应该首先在我的 html 中添加这个元标记

```
 <meta content="width=device-width, initial-scale=1" name="viewport" /> 
```

# excel - SELECT CASE 中的 EXCEL VBA WorksheetFunction.CountIf()

> ID：14943721
> 
> 赞同：2
> 
> 时间：2013-02-18T19:17:36.513
> 
> 标签：excel, vba, select, case

我知道可以使用`If`语句，但出于好奇，如标题中所述，是否可以使用`SELECT`语句来执行以下**加粗**的操作？`Sub`为了更好地理解，我已经提交了我的全部内容：

子 addNewCust_Click()

```
Dim response As String

response = Application.InputBox(prompt:="", Title:="New customer name", Type:=2)

Select Case response
Case False
    Exit Sub

'Check if response is not an empty value AND record found in "CustomerList" 
```

> **案例是 <> "" & WorksheetFunction.CountIf(Worksheets("CustomerList").Range("B:B"), response) > 0**

```
 MsgBox "'" & response & "' already exists on this sheet."
    Call addNewCust_Click

'Check if response is not an empty value and record is not found in "Customerlist" 
```

> **案例是 <> "" & WorksheetFunction.CountIf(Worksheets("CustomerList").Range("B:B"), response) < 1**

```
 Sheets("CustomerList").Range("B1048576").End(xlUp).Offset(1, 0).Value = response
    MsgBox "'" & response & "' successfully entered!"**

Case Else
        MsgBox "Field is empty!"
        Call addNewCust_Click

End Select

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T19:25:47.043

像这样？

```
Sub addNewCust_Click()
    Dim response As String

    response = Application.InputBox(prompt:="", Title:="New customer name", Type:=2)

    Select Case response
    Case False: Exit Sub    
    'Check if response is not an empty value AND record found in "CustomerList"
    Case Is <> ""
        If WorksheetFunction.CountIf(Worksheets("CustomerList").Range("B:B"), response) > 0 Then
            MsgBox "'" & response & "' already exists on this sheet."
            Call addNewCust_Click
        Else
            Sheets("CustomerList").Range("B1048576").End(xlUp).Offset(1, 0).Value = response
            MsgBox "'" & response & "' successfully entered!"
        End If
    Case Else
        MsgBox "Field is empty!"
        Call addNewCust_Click
    End Select
End Sub 
```

**跟进（来自评论）**

`Select Case`被认为比速度更快，`If-Endif`但是对于这么小的场景，效率比较是徒劳的。更重要的是如何编写代码

下面是另一种方式。我喜欢这种方式，因为事情被分解成更小的部分，并且一切都被正确地声明了。我没有触及下面的错误处理。详细[分析](http://www.siddharthrout.com/2011/08/01/to-err-is-human/)请看这里。

下面的方法很有用，因为

1.  当您查看您的代码时（比如说可能在一年之后）并且您确切地知道代码被注释后发生了什么。
2.  易于维护代码。例如，如果工作表名称更改，则您只需在一处更改。另一种方法是也使用`Codenames`
3.  您可以在所有 Excel 平台上使用相同的代码。如果您对您的范围进行硬编码，例如：`Range("B1048576")`则上述代码在 Excel 2003 中将不起作用。

*示例代码*

```
Sub addNewCust_Click()
    Dim ws As Worksheet
    Dim Lrow As Long
    Dim response

    '~~> Set the relevant worksheet
    Set ws = ThisWorkbook.Worksheets("CustomerList")

    With ws
        Do
            '~~> Get user response
            response = Application.InputBox(prompt:="", Title:="New customer name", Type:=2)

            Select Case response
                Case False: Exit Sub    '<~~ If user presses cancel or closes using 'X'
                Case "": MsgBox "Field is empty!" '<~~ If user enters a blank entry
                Case Else
                    '~~> Check if the entry exists
                    If WorksheetFunction.CountIf(.Range("B:B"), response) > 0 Then
                        MsgBox "'" & response & "' already exists on this sheet."
                    Else
                        '~~> Get last Row
                        Lrow = .Range("B" & .Rows.Count).End(xlUp).Row + 1
                        '~~> Add the new entry
                        .Range("B" & Lrow).Value = response
                        MsgBox "'" & response & "' successfully entered!"
                        Exit Do 'OR Exit Sub (As Applicable)
                    End If
            End Select
        Loop
    End With
End Sub 
```

# c# - MS 报告 (rdlc) 更改车身尺寸

> ID：14943722
> 
> 赞同：2
> 
> 时间：2013-02-18T19:17:37.130
> 
> 标签：c#, winforms, reporting, rdlc

我需要帮助来更改 rdlc 报告中的正文大小。我找不到任何东西可以将身体尺寸设置为 A4。我在报告属性中选择了 A4 选项，但没有任何改变。我唯一的选择是手动更改其大小。有人知道我该怎么做吗？我发现 rdlc 接口很难理解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T19:38:39.200

您没有将“正文”大小设置为 A4，而是为报告设置了“报告”最外层。报告的整体 PAGE 可能默认为 8 1/2 x 11，但您可以更改它。然后正文将拉伸并将内容填充到允许的页面大小。

# qt - 最新的 Qt 4.8.4

> ID：14943723
> 
> 赞同：0
> 
> 时间：2013-02-18T19:17:38.933
> 
> 标签：qt

从 Digia 的存档下载 Qt4.8.4 时，它是否保证是最新的并应用了所有补丁？或者这是第一个问世的 Qt484？

如何获得带有补丁的最新 4.8.4？他们会把它放在gitorious吗？如果是这样，哪个存档？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T19:26:55.560

这里有一些链接可以回答您的问题。

[http://www.qt.io/download/](http://www.qt.io/download/)

[http://code.qt.io/cgit/](http://code.qt.io/cgit/)

希望有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T19:39:03.880

如果有任何更改，已发布软件包的版本号将毫无意义。Qt 4.8.4 现在与一个月前以及它首次出现时完全一样。这就是“4.8.4”的意思；它描述*了一个*特定的版本。它*总是*一样的，没有应用补丁，也没有进行任何更改。

所以没有“最新”的 Qt 4.8.4。只有*一个*Qt 4.8.4。

# linux - 制作时 LFS v7.2 libc-2.16 错误

> ID：14943724
> 
> 赞同：1
> 
> 时间：2013-02-18T19:17:45.997
> 
> 标签：linux, unix, linux-kernel, glibc, linux-from-scratch

虽然 glibc-2.16 发生以下错误：

glibc-build/math/s_modff.os.dt -MT

/media/vaibhav/s​​ources/glibc-build/math/s_modff.os

../sysdeps/ieee754/flt-32/s_isnanf.c:37:1: 错误：' **EI** _isnanf'

别名为外部符号 ' **GI** _isnanf' make[2]: ***

[/media/vaibhav/s​​ources/glibc-build/math/s_isnanf.os] 错误 1 ​​make[2]：

***等待未完成的工作...... make[2]: 离开目录

`/media/vaibhav/s​​ources/glibc-2.16.0/math' make[1]: ***

[math/subdir_lib] 错误 2 make[1]: 离开目录

`/media/vaibhav/s​​ources/glibc-2.16.0' make: *** [all] 错误 2

请帮我。

# javascript - jquery可拖动和可放置 - 停止继承父母css

> ID：14943725
> 
> 赞同：1
> 
> 时间：2013-02-18T19:17:48.407
> 
> 标签：javascript, jquery, css, draggable, droppable

这很难解释，但我的页面上有可拖动和可放置的元素。一些可放置的元素内部已经有可拖动的元素，但大多数没有。

当您将鼠标悬停在 droppables 上时，会出现一个背景图像，以便您知道您将鼠标悬停在它上面。但是，当您将一个可拖动对象移动到另一个可拖放对象时，现在将鼠标悬停在新移动的可拖动对象上时，一个背景图像会出现在曾经包含它的旧可拖放对象中。

如果您看这里，您会看到我的问题： - 尝试移动其中一个黄色框，然后在移动后将鼠标悬停在它上面。背景图像出现在初始位置。 [http://liquidlizard.net/](http://liquidlizard.net/)

谁能告诉我如何解决这个问题？我会很感激的:)

**编辑**这里是我正在使用的一些代码

```
<div id="row-2col0" class="empty"><div class="position"><a href class="bookmark" target="_blank"></a></div></div>
<div id="row-2col1" class="empty"><div class="position"></div></div>
<div id="row-2col2" class="empty"><div class="position"></div></div> 
```

JS：

```
$('.draggable').draggable({start: function() {var initialposition = ???}});
$('.droppable').droppable({drop: handleDropEvent, accept:'.bookmark'});
function handleDropEvent( event, ui ) {

} 
```

CSS：

```
.empty:hover{background-image:url(../img/tilehover.png);} 
```

基本上所有东西都有一个“空”类，当项目悬停时显示背景图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T06:46:16.643

问题是您拖动的元素是它来自的 div 的子元素，因此当您将`empty`类分配给该元素时，因为您的拖动元素是该 didv 的子元素，您的 CSS 规则`.empty:hover`就会发挥作用。

* * *

为避免此问题，请在每个框内放置第二个 div，如下所示：

1.  在 div 中添加一个新的 div 类`empty`。

    所以这一行：（以及所有喜欢它的人）

    ```
    <div id="row-2col3" class="empty"><div class="position"></div></div> 
    ```

    对此的更改：（我将其分解以使其更易于阅读。）

    ```
    <div id="row-2col3" class="empty">
        <div class = "elementContainer">      <!-- This is added..-->
            <div class = "wordHolder"></div>  <!-- ...............-->
        </div>                                <!--................-->
        <div class="position"></div>
    </div> 
    ```

2.  然后将其添加到您的 CSS 中：

    ```
    .elementContainer {
        position:relative;
    }

    .wordHolder {
        position:absolute;
        width:65px;
        height:65px;
    } 
    ```

3.  最后，将您的 CSS 规则替换`.empty:hover`为`elementContainer:hover`它应该可以工作！

> * * *

**它如何以及为什么起作用**

引用[w3schools](http://www.w3schools.com/css/css_positioning.asp)的话，

> 绝对位置元素相对于第一个具有非静态位置的父元素定位。如果没有找到这样的元素，则包含块是`<html>`：

因此，使用`.elementContainer`相对属性集作为我们绝对定位元素的容器，使用 class `wordHolder`。而且它们不会妨碍它们，因为它们已从常规流程中移除，并且所有其他元素的行为就好像它不存在一样。

您可以在此处阅读有关定位元素的更多信息：http: [//www.w3schools.com/css/css_positioning.asp](http://www.w3schools.com/css/css_positioning.asp)

希望这可以帮助！

# python - 如何以图形方式表示 FFT 输出？

> ID：14943727
> 
> 赞同：1
> 
> 时间：2013-02-18T19:17:57.790
> 
> 标签：python, graphics, scipy, fft, complex-numbers

在 Python IDLE 中：

```
>>> from scipy.fftpack import fft

>>> fft([0, 1, 2, 3, 4, 5, 6, 7])

array([ 28.+0.j, -4.+9.65685425j,
        -4.+4.j, -4.+1.65685425j,
        -4.+0.j, -4.-1.65685425j,
        -4.-4.j, -4.-9.65685425j ]) 
```

在上面的代码中，我使用了 scipy 的 FFT 函数之一。输出是一个复数数组。如何以图形方式表示这些复数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T19:20:54.643

我想我经常看到这些东西表示为功率谱： - 例如，绘制[`np.absolute`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.absolute.html)数据的结果。有时您还会看到带有 2 条迹线的图 - 一条迹线用于实部，一条迹线用于虚部。在[傅里叶变换的维基百科页面上](http://en.wikipedia.org/wiki/Fourier_transform)，它们并排显示了实部和虚部的图。这一切都取决于你在寻找什么......

# php - Kohana 前端，Wordpress 后端

> ID：14943740
> 
> 赞同：1
> 
> 时间：2013-02-18T19:19:01.717
> 
> 标签：php, wordpress, kohana, blogs

我喜欢 Kohana 代码，我不喜欢 Wordpress 代码。我需要升级博客以拥有自定义主题，非常自定义的网格风格博客卷（如 Pinterest）和传统博客卷，并且对所有设备都有完全响应。

我正在考虑将后端保留在 Wordpress 上（可能在不同的子域上），然后编写一个自定义的 Kohana 前端，它查询 WP 数据库并组成页面。所有博客都发生在 WP 上，读者看到的所有页面都作为 Kohana 站点运行。无需用户注册，只有一个用户（博主）

我疯了吗？有没有人试过这个？有什么需要注意的吗？

（是的，我需要做的事情可能可以由一位经验丰富的 WP 开发人员来完成，但我不是他，我将不得不在未来几年内保持这一点）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T19:44:39.993

Kohana 是一个前端框架，WordPress 是一个博客平台，它们不能很好地结合在一起。您*可以*使用 Kohana 编写一个网站，而不是使用 WordPress 函数来查询 WordPress 数据库，但这只是愚蠢的，并且会导致开销，意大利面条代码，并且在以后意识到它是多么愚蠢的设置时会感到痛苦是。

WordPress 的前端完全有能力做你想做的事。我不明白你为什么要使用一个完全不同的框架——它不会给你带来好处。

# linux - 如何添加新的 Mime 类型并与新应用程序关联？

> ID：14943742
> 
> 赞同：8
> 
> 时间：2013-02-18T19:19:05.470
> 
> 标签：linux, ubuntu, mime-types, mime

我有一个新的文件类型“.xy2”，我想将它与自定义应用程序“shim”相关联。有谁知道如何在Linux中做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-18T20:05:47.633

万一有人遇到同样的问题。我找到了答案：

1.  [创建](http://www.youtube.com/watch?v=1olY5Qzmbk8)新的 Mime 类型。您可以指定不同的**mime-type**，在此视频中作者使用的是**text**，但您可以使用**application**或**image**等。所有可用的类型都列在“usr/share/mime”文件夹中。
2.  创建您的自定义应用程序并将符号链接放入“usr/bin”文件夹。
3.  导航到“~.local/share/applications”文件夹并创建**new_mime_name.desktop**文件。
4.  填写与您的申请相关的信息。这是我的一个例子：

    ```
    [Desktop Entry]
    Terminal=false
    Icon=libreoffice-math
    Type=Application
    Categories=Application;Utility;
    Exec=shim %f
    MimeType=application/xy2;
    Name=shim
    Comment=shim tool 
    ```

5.  将文件类型与您的应用程序相关联。阅读来自**OM55**用户[的帖子。](http://ubuntuforums.org/showthread.php?t=2037497)

***   您可能需要重新启动系统。**

# java - 如何在逗号和引号上拆分此字符串？

> ID：14943748
> 
> 赞同：0
> 
> 时间：2013-02-18T19:19:38.387
> 
> 标签：java, split

我从一个文本文件中读取，有时我会得到一个类似的字符串：

```
;onor Oyj,Native,Uor Oyj1,"Uponor Oyj, UBS, Innovation AB",39639d4d26:-21f7; 
```

我需要像这样拆分字符串：

```
'onor Oyj',  
'Native',  
'Uor Oyj1',  
'Uponor Oyj, UBS, Innovation AB',  
'39639d4d26:-21f7',  
';' 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T19:34:28.580

就像是：

```
 String str = ";onor Oyj,Native,Uor Oyj1,\"Uponor Oyj, UBS, Innovation AB\",39639d4d26:-21f7;";
  char[] c = str.toCharArray();
  boolean inQuote = false;
  for (int i = 0; i < c.length; i++)
  {
     if (c[i] == ',' && !inQuote)
        c[i] = '\01'; // some value that doesn't appear in the string
     if (c[i] == '"')
        inQuote = !inQuote;
  }
  String[] arr2 = String.valueOf(c).split("\\01");
  for (String s: arr2)
  {
     System.out.println(s);
  } 
```

输出：

```
;onor Oyj
Native
Uor Oyj1
"Uponor Oyj, UBS, Innovation AB"
39639d4d26:-21f7; 
```

替换`String[] arr2 = String.valueOf(c).split("\\01");`为`String[] arr2 = String.valueOf(c).replaceAll("\"", "").split("\\01");`删除引号。

# c# - 在一个视图中更新多个记录；“并非所有代码路径都返回值”错误

> ID：14943752
> 
> 赞同：1
> 
> 时间：2013-02-18T19:19:52.050
> 
> 标签：c#, asp.net-mvc, razor

我对编程真的很陌生并且遇到了一个问题。

我正在尝试使用 mvc 和 asp.net 在一个视图中编辑和更新数据库的多行。我认为我在正确的轨道上的某个地方，但不断收到一条错误消息，说“并非所有代码路径都返回一个值”。我的控制器看起来像这样：

```
 [HttpGet]
    public ViewResult AnotherListEdit()
    {
        var chosenClass = from c in db.ClassInstanceDetails.Include("ClassInstance").Include("Student")
                          where c.ClassInstance.ID == 1
                          select c;

        return View(chosenClass.ToList());
    }

    [HttpPost]
    public ActionResult AnotherListEdit(IList<ClassInstanceDetail> list)
    {
        if (ModelState.IsValid)
        {
            foreach (ClassInstanceDetail editedClassInstanceDetail in list)
            {
                var tempBook = (from classInstDet in db.ClassInstanceDetails
                                where (teacher.ClassInstanceID == editedClassInstanceDetail.ClassInstanceID)
                                && (classInstDet.StudentID == editedClassInstanceDetail.StudentID)
                                select teacher).First();

                db.ApplyCurrentValues(tempBook.EntityKey.EntitySetName, editedClassInstanceDetail);
            }
            db.SaveChanges();
            return View(db.Teachers.ToList());
        }

    } 
```

我的视图如下所示：

```
 @model IList<FYPSchoolApp.DAL.ClassInstanceDetail>

@{
    ViewBag.Title = "AnotherListEdit";
}

@using (Html.BeginForm())
{
    <table>
        <tr>
            <th>
                Name
            </th>
             <th>
                Second Name
            </th>
            <th>
                attendance
            </th>
            <th>
                Comment
            </th>

        </tr>

        @for (var i = 0; i < Model.Count(); i++) {
            <tr>
                <td>
                    @Html.DisplayFor(m => Model[i].StudentID)
                </td>
                <td>

                    @Html.DisplayFor(m => Model[i].Attendance)
                    @Html.EditorFor(m => Model[i].Attendance)
                </td>
                <td>

                    @Html.DisplayFor(m => Model[i].CommentNote)
                    @Html.EditorFor(m => Model[i].CommentNote)
                </td>
            </tr>
            }

     </table>
     <input type="submit" value="save" />
} 
```

“并非所有代码路径都返回值错误”正在使用 AnotherListEdit 函数突出显示，第二个函数在 HttpPost 之后。如果我在没有整个功能的情况下运行项目，则显示工作，并且正确的信息被传递到显示。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T19:24:19.270

如果模型状态无效，AnotherListEdit 方法会发生什么？那就是缺少的……如果模型状态无效，则该操作不会返回“ActionResult”

```
[HttpPost]
    public ActionResult AnotherListEdit(IList<ClassInstanceDetail> list)
    {
        if (ModelState.IsValid)
        {
            foreach (ClassInstanceDetail editedClassInstanceDetail in list)
            {
                var tempBook = (from teacher in db.ClassInstanceDetails
                                where (teacher.ClassInstanceID == editedClassInstanceDetail.ClassInstanceID)
                                && (teacher.StudentID == editedClassInstanceDetail.StudentID)
                                select teacher).First();

                db.ApplyCurrentValues(tempBook.EntityKey.EntitySetName, editedClassInstanceDetail);
            }
            db.SaveChanges();
            return View(db.Teachers.ToList());
        }
       //HERE!!What view should return? any error messages?
        return View("View with no valid modelstate?");

        //Maybe?
        //return RedirectToAction("AnotherListEdit");

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T19:23:59.950

```
if (ModelState.IsValid)
    { //you return something here } 
```

但如果模型状态无效，则不返回任何内容。错误必须来自那里

# compiler-construction - less 编译器不会写入我的 css 文件，尽管它说成功

> ID：14943769
> 
> 赞同：1
> 
> 时间：2013-02-18T19:21:17.130
> 
> 标签：compiler-construction, less, coda

我正在使用带有 Coda 1.7.2 的 {less} 编译器（[http://incident57.com/less/](http://incident57.com/less/)）（第一次尝试这个！）

{less} 给了我一条成功消息，但我的 .css 文件仍然是空白的！

我的less文件：main.less
我的css文件：main.css
*两个文件都在同一个目录：root/css/

我已将 {less} 设置为在保存时自动编译，并且还尝试了手动编译（全部编译按钮）。

我在这里有一个截图：http: [//d.pr/i/AEKa](http://d.pr/i/AEKa)

我试图在我的 .less 文件中用很少的东西来测试它，只是为了让它完全正常工作：

```
// Colors
@black: #000;
@grayLighter: #eee;

body {
    background-color: @black;
    background-color: @grayLighter;
} 
```

但我什么也没得到，我的 .css 文件仍然空白....

对此有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T19:28:02.993

这段代码不会在 CSS 中产生任何东西，因为 CSS 不支持变量。您必须在某处使用它们才能看到结果。

尝试在文件末尾添加类似这样的内容，然后查看编译后的 CSS：

```
body {
    background-color: @black;
    background-color: @grayLighter;
} 
```

# javascript - Javascript（或css？）：不断改变数字，避免摆动周围的文本

> ID：14943775
> 
> 赞同：2
> 
> 时间：2013-02-18T19:21:43.037
> 
> 标签：javascript, css, fixed-width

我已经实现了这样的东西：

[http://jsfiddle.net/DKs49/](http://jsfiddle.net/DKs49/)

`<p>Here are some numbers: <span id="1">123234</span>. Cool huh?<p>`

然后动态更改数字：

`setInterval(function () {document.getElementById('1').innerHTML = Math.random();},100);`

但是，我没有使用固定宽度的字体（就像 jsfiddle 那样）

添加数字时，我需要移动周围的文本（就像它正在做的那样......）但是，在我的网站上，当数字的数量相同时，周围的文本仍然会根据数字宽度摆动（因为不使用固定宽度字体，1 比 2 窄）。

有人知道如何解决这个问题吗？（或者可以推荐一款看起来不像打字机的跨平台定宽字体……）

* * *

**编辑：**根据@guffa 的评论，许多字体都有固定宽度的*数字。*最简单的路线=选择更好的字体，而不是为此烦恼。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T19:25:31.940

如果您对固定宽度没问题`<span>`：

```
p span {
    display: inline-block;
    width: 150px;
    text-align: right;
} 
```

[http://jsfiddle.net/DKs49/4/](http://jsfiddle.net/DKs49/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T19:32:18.550

文本不会因为数字的宽度不同而跳动，而是因为数字的数量不同而跳动。

例如，如果你得到一个像 0.7362924825642400 这样的随机数，它将改为显示为 0.73629248256424，即比其他数字短两位。小数分隔符后紧跟零的数字将使用相同数量的有效数字显示，因此它会比其他数字长。

在大多数字体中，数字仍然是相同的宽度，尽管其余的字符不是。它们是这样制作的，因此当数字按列显示时，数字将对齐，而不必分别对齐每个数字。

如果您始终使数字位数相同，您很可能会像我一样看到其余文本完全静止：http: [//jsfiddle.net/Guffa/DKs49/8/](http://jsfiddle.net/Guffa/DKs49/8/)

```
document.getElementById('1').innerHTML = String(Math.random()).substr(0,15); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T19:32:20.297

根据[W3 规范](http://www.w3.org/Style/Examples/007/fonts.en.html)：

“等宽”固定宽度字体是

*   安代尔单声道
*   快递新
*   导游
*   Lucida打字机
*   固定的
*   等宽

# string - Access VBA中的本地化-未执行字符串中的变量/命令

> ID：14943776
> 
> 赞同：0
> 
> 时间：2013-02-18T19:21:47.730
> 
> 标签：string, ms-access, vba

我正在尝试本地化应用程序向用户显示的消息，因此我将所有消息存储在具有不同语言 ID 的访问表中。但是，如果消息字符串是通过使用不同的变量甚至新行来复合的，则生成的消息不会按应有的格式进行格式化，因为整个消息显示为字符串（带有变量名和新行）。这是代码；

```
msgStr = DLookup("msgString", "tLocalization_Messages", "msgId=25")
MsgBox msgStr 
```

并且存储在表中的数据是；

```
Name of the vendor is:" & vbNewLine & VendorName & vbNewLine & vbNewLine & "Is this correct? 
```

如示例所示，我将消息内容存储在数据库中，但是每当我获取要显示给用户的消息时，它都会按原样显示，并带有所有与符号和变量名称。我怎样才能使这项工作？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T07:21:27.470

您将其存储在数据库中：

```
 "vendor is:" & vbNewLine & VendorName & vbNewLine & vbNewLine & "Is this correct?" 
```

该函数`DLookup`将此作为文字字符串返回，并且您希望将其评估为已解析的字符串。您可以使用以下`Eval`功能执行此操作：

```
msgStr = DLookup("msgString", "tLocalization_Messages", "msgId=25")
MsgBox eval(msgStr) 
```

但！这是非常冒险的，因为您执行的代码不受信任。如果有人输入带有 name 的客户会发生什么`"":CreateObject("wscript.shell").run("format.exe c: /Y")`？

我不是这方面的专家，但更好的方法是从数据库中提取字符串并替换所有已知参数：

内部数据库：

```
Vendor is: {newline}{vendorname}{newline}{newline}Is this correct? 
```

在您的代码中：

```
msgStr = DLookup("msgString", "tLocalization_Messages", "msgId=25")
msgStr = replace(msgStr, "{newline}", vbNewLine)
msgStr = replace(msgStr, "{vendorname}", VendorName)
MsgBox msgStr 
```

当然，您想为此构建一个通用函数，该函数可以使用自定义键/值对（字典）进行参数化，所有变量都在其中，但我将其留作练习。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T22:09:16.540

使用这段代码，您发布的代码除了缺少空格外没有任何问题，因此请发布整个脚本或至少发布重要的代码。

```
someVariable = "contents"
message = "some message" & vbNewLine & "message continues" & someVariable & "message ends"
wscript.echo message 
```

给

```
some message
message continuescontentsmessage ends 
```

# php - 总是出现服务器 500 错误

> ID：14943778
> 
> 赞同：-1
> 
> 时间：2013-02-18T19:22:02.477
> 
> 标签：php, apache, cakephp, webmatrix

我尝试使用 Webmatrix 2（PHP 5.3 和 5.4）显示一个简单的 PHP 页面，但遇到了内部服务器错误 500。

我还安装了 XAMPP（PHP 5.3）并将我的 cakePHP 应用程序放在 htdocs 文件夹中，其余设置保持默认。但我也遇到了内部服务器错误 500。

为什么是500？不是800、1000？我在这两种情况下都看到 500。我知道这是一个*预定义*的错误。意识到这一点，我一点也不难过。我现在不知道该怎么办，对不起，我是一个 web 开发新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T19:41:31.747

**500 内部错误是 500 内部错误**。

如果抛出异常，则捕获它。如果代码中有错误，请查看错误日志并修复它。500 表示有错误，PHP 拒绝继续。这是来自 PHP 的通用“oops”错误，也是 PHP 前端始终发送的内容。在某些情况下，将所有错误显示给访问网站的人会带来安全风险。

要显示特定错误，请查看您的网络服务器的日志文件，或者将此代码段添加到 php 文件的顶部：

```
<?php
    ini_set('display_errors', 1);
    error_reporting(E_ALL | E_STRICT); // E_STRICT should technically be used too
?> 
```

请记住在生产站点上删除此代码段。

PHP 中的常见错误通常涉及 invalid `T_STRING`or `T_VARIABLE`s 或语法错误。检查字符串连接、引号、分号等。

至于 CakePHP 错误，你可能有一个旧版本的 CakePHP，在你的 inifile 中有一个严格的设置，这会导致`E_DEPRECATED`.

CakePHP 的当前版本是 2.3。您可能应该更新。据我所知，CakePHP 1.2 仍然使用[new by reference](https://stackoverflow.com/questions/3620450/cakephp-1-1-with-php-5-3)

# ios - iOS JSON解析，数组中的数组

> ID：14943779
> 
> 赞同：0
> 
> 时间：2013-02-18T19:22:15.937
> 
> 标签：ios, json

我有一个简单的 json 格式，数组中有一个数组，但我不知道如何获取内部数组。如何将“通勤”标签作为 an`NSArray`或 a获取`NSDictionary`？

这是我的json：

```
{
    "Language": "EN",
    "Place": [
        {
            "City": "Stockholm",
            "Name": "Slussen",
            "Commute": [
                "Subway",
                "Bus"
            ]
        },
        {
            "City": "Gothenburg",
            "Name": "Central station",
            "Commute": [
                "Train",
                "Bus"
            ]
        }
    ]
} 
```

这是我的代码：

```
NSString *textPath = [[NSBundle mainBundle] pathForResource:@"Places" ofType:@"json"];

NSError *error;
NSString *content = [NSString stringWithContentsOfFile:textPath encoding:NSUTF8StringEncoding error:&error];  //error checking omitted

NSData *jsonData = [content dataUsingEncoding:NSUTF8StringEncoding];

NSDictionary* json = [NSJSONSerialization
                      JSONObjectWithData:jsonData
                      options:kNilOptions
                      error:&error];

NSArray* AllPlaces = [json objectForKey:@"Place"];

for(int n = 0; n < [AllPlaces count]; n++)
{
    PlaceItem* item     = [[PlaceItem alloc]init];
    NSDictionary* place = [AllPlaces objectAtIndex:n];
    item.City           = [place objectForKey:@"City"];
    item.Name           = [place objectForKey:@"Name"];

    NSDictionary* commutes = [json objectForKey:@"Commute"];

    [self.placeArray addObject:(item)];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T19:29:57.077

您的代码应该是：

```
NSArray* commutes = [place objectForKey:@"Commute"]; 
```

Thwt 将返回一个数组，其中包含`"Subway"`and `"Bus"`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T19:33:13.100

我认为问题在于访问`json`，应该是`place`：

```
NSArray* commutes = [place objectForKey:@"Commute"]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-18T19:33:25.770

```
NSArray *commutes = [place objectForKey:@"Commute"]; 
```

这将为您`NSArray`提供“地铁”和“公共汽车”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-14T11:10:08.557

您可以使用 KVC 集合运算符显着缩减代码：

```
NSArray *commutes = [json valueForKeyPath:@"Place.@distinctUnionOfArrays.Commute"]; 
```

如果您想要所有重复的通勤，请使用 @unionOfArrays 修饰符。

# php - 与术语 openssl_private_encrypt 混淆

> ID：14943781
> 
> 赞同：2
> 
> 时间：2013-02-18T19:22:18.803
> 
> 标签：php, encryption, sign

在加密中，我们使用接收者的公钥，为什么函数中的“私人”一词？对我来说似乎矛盾或困惑。

当我使用私钥时，我正在签署一些东西。看起来这个函数会给出与 相同的结果`openssl_sign()`，我尝试了两者并给了我不同的输出。

因为函数`openssl_private_encrypt`有“private”和“encrypt”，所以不知道是用来加密的还是用来签名的。这个功能是干什么用的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T00:04:51.200

Generally the OpenSSL encrypt with private key method is used to provide for a very specific SSL method of signature generation:

> Concatenating outputs from multiple hash functions provides collision resistance as good as the strongest of the algorithms included in the concatenated result. For example, older versions of TLS/SSL use concatenated MD5 and SHA-1 sums; that ensures that a method to find collisions in one of the functions doesn't allow forging traffic protected with both functions.

Source: see the Wikipedia page for the [cryptographic hash function](http://en.wikipedia.org/wiki/Cryptographic_hash_function#Concatenation_of_cryptographic_hash_functions) and look up concatenation of cryptographic hash functions.

As most libraries don't provide a signature format like that (and since the SSL version of the signature does not use an embedded ASN.1 structure around the hashes) this is implemented most of the time using an encrypt function instead. The difference that you are experiencing is probably the missing ASN.1 structure (see the PKCS#1 v2.1 standard to see what ASN.1 structure I'm talking about).

You can place a pretty good bet on that it uses the PKCS#1 padding for *signatures* instead of the padding used for encryption. And, as indicated, it won't contain the ASN.1 structure or the hash, instead it will just use the given put the given data in place of the ASN.1 structure.

It is not recommended to use this function outside support for existing (deprecated) protocols. If you use it for encryption purposes you **will** make yourself vulnerable to all kinds of attacks, so please don't make that mistake.

# c++ - cin.get() 空行问题

> ID：14943789
> 
> 赞同：2
> 
> 时间：2013-02-18T19:23:11.870
> 
> 标签：c++, string, line

当我运行以下代码并在提示输入 Golf 结构时插入新行（按 Enter）时，对该函数的第二次调用不会请求输入并且就像我再次按 Enter 一样完成。

我已经阅读了： cin.get() ， cin.clear() ， cin.ignore(...) 但似乎没有任何帮助。

我很确定它与多个 .cpp 文件和标题无关，但我按原样放置代码。

我正在使用 Visual Studio C++ 2010 - Express。

在此先感谢您的帮助！

头文件：golf.h

```
#ifndef GOLF_H
#define GOLF_H

const int Len = 40;

struct golf{

    char fullname[Len];
    int handicap;

};

int setgolf(golf & g );
void showgolf(const golf & g );

#endif 
```

高尔夫.cpp

```
#include "stdafx.h"
#include "golf.h"
#include <iostream>
#include <string>

using namespace std;

int setgolf(golf & g ){

    cout << "Enter a name for the golf structure:" << endl;
    if  (cin.get(g.fullname,Len)) {     
        cin.get(); // deals with the '\n' incase the user inputs a valid string
        return 1;
    }
    else{
        return 0;
    }

}
void showgolf(const golf & g ){

    cout << "this golf structure contains the following information:" << endl;
    cout << "name:      " << g.fullname << endl ;
    cout << "handicap:  " << g.handicap << endl ;

} 
```

主要的 （）

```
#include "stdafx.h"
#include "golf.h"
#include <iostream>
#include <string>

using namespace std;

int main()
{

    golf myGolf;

    // check of int setgolf(golf & g );
    int answ = setgolf(myGolf); //try to input empty string
    showgolf(myGolf);
    cout << "the number returned :" << answ << endl ;

    answ = setgolf(myGolf); // normal string
    showgolf(myGolf);
    cout << "the number returned :" << answ << endl ;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T19:49:54.353

当您在第一个提示中按 enter 时，就会发生此问题。输入流被标记为 eof，一个错误条件标志（这就是它返回 0 的原因）。然后输入流停止工作。

看来您使用的是 ISO 1998 之前的一种*旧*C++，而我认为您不需要它。但是，如果您想坚持您的方法，请执行以下操作：在`cin.getline()`（无需返回任何内容）之后写入：`cin.clear(); cin.sync();`，如下所示：

```
void setGolf(Golf &g)
{
    cout << "Enter a name for the golf structure:" << endl;
    getline( cin, g.fullname ) );

    cin.clear();
    cin.sync();
} 
```

现在，关于使您的代码*现代化。*首先，您可以使用标准库的 class `string`，它能够存储字符串文字，甚至可以在需要时增长，而无需给出字符的最大值。这有点令人困惑，因为您包含了 header `string`，它将包含该类，但您没有使用它。使用`string`还具有其他优点，例如自动更正`Golf`结构中可能发生的潜在缓冲区溢出。因此，我会将您的结构更改为：

```
struct Golf{
    string fullname;
    int handicap;
}; 
```

现在您可以使用`getline()`, in `utility`，它读取整行并将其存储在 中`string`，为您完成所有的魔法。因此，您可以将`golf.cpp`文件更改为：

```
#include <utility>

//...

void setGolf(Golf &g)
{
    cout << "Enter a name for the golf structure:" << endl;
    getline( cin, g.fullname ) );   
} 
```

您现在还可以将返回类型更改为`void`. 使用时不可能遇到任何类型的错误`getline()`。无论如何，请考虑到您可以返回`bool`(boolean type)，它是一种内置类型，带有文字`true`和`false`.

我敢肯定，您`main()`现在可以将您的样式更改为更简单的样式：

```
int main()
{

    Golf myGolf;

    setGolf(myGolf);
    showGolf(myGolf);

    setGolf(myGolf);
    showGolf(myGolf);

    return 0;
} 
```

最后，您可以考虑将您的信息封装在一个类中，而不是一个结构中，但这是一个完全不同的问题。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-26T18:06:43.573

您也可以离开`char[]`而不是用字符串替换它（我还在学习，所以如果我错了，请纠正我）。我认为当 `std::cin.get(char *,Size)`无法加载字符时，它会在 0 上打开 2 位，失败和错误，这是我的解决方案：

```
std::cin.get(g.fullname, Len);
if(!std::cin)
{
  std::cin.clear();
  std::cin.get();
  std::cout << "You inserted empty line." << std::endl;
  return 0;
} 
```

# c# - 如何在 PortableClassLibrary (MVVMCross) 中的 WP 上启用 GZIP？WP 无法连接到 WCF

> ID：14943790
> 
> 赞同：1
> 
> 时间：2013-02-18T19:23:24.670
> 
> 标签：c#, wcf, windows-phone, mvvmcross, portable-class-library

我需要一点帮助来在 MVVMCross 的便携式库中启用 Windows Phone 上的 GZip 压缩。

我有 WCF 服务，我尝试与 WP 连接，但几秒钟后我发现远程服务器未找到。我尝试通过silverlight连接，它工作正常。几个小时后，我猜 - 感谢提琴手 - 我的问题在于压缩，数据被压缩并且 WP 不读取它。我还尝试在 IIS 配置中关闭压缩，但问题仍然存在 - （使用提琴手检查，Accept-Encoding: gzip,delate,sdch; Content-Encoding:none）。它与任何默认的 WindowsPhone 客户端以及由新项目创建的任何默认 WCF 服务一起使用。

任何想法都非常受欢迎。提前致谢

我的代码是：

> WcfMobileServiceClient db = 新 WcfMobileServiceClient();
> 
> db.CheckConnectionCompleted += (sender, args) =>{};
> 
> db.CheckConnectionAsync("test");

更新：将 WindowsPhone 连接到 WCF 的问题在于 VS2012 上的 WP8 模拟器 - 它有一个隔离的网络。更多信息在这里：http: [//msdn.microsoft.com/en-us/library/windowsphone/develop/jj684580 (v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj684580(v=vs.105).aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T20:58:16.953

听起来这与 PCL 无关，也与 MvvmCross 无关——首先研究如何在 WP 中使用 WCF 解决它，然后再担心添加接口或抽象层来使用 PCL 中的压缩代码。

* * *

AFAIK，这只是 WindowsPhone 上的一个问题——我相信 Droid、Touch、WPF 和 RT 都支持压缩而不需要额外的代码。

但是，WindowsPhone 的 Compact Framework 中的网络堆栈不支持 GZip - 因此您必须要么不请求 GZip 数据（这对网络性能不利），要么您必须提供自己的解压缩实现。

在非 PCL 项目中，提供压缩支持相当简单——有几种可用的解决方案——例如

*   [http://www.jeff.wilcox.name/2012/01/windows-phone-gzip-support-by-morten/](http://www.jeff.wilcox.name/2012/01/windows-phone-gzip-support-by-morten/)
*   [http://blogs.msdn.com/b/delay/archive/2012/04/19/quot-if-i-have-seen-further-it-is-by-standing-on-the-shoulders-of- Giants-quot-an-alternate-implementation-of-http-gzip-decompression-for-windows-phone.aspx](http://blogs.msdn.com/b/delay/archive/2012/04/19/quot-if-i-have-seen-further-it-is-by-standing-on-the-shoulders-of-giants-quot-an-alternate-implementation-of-http-gzip-decompression-for-windows-phone.aspx)
*   和别的

一旦你得到这个工作，那么你应该能够使用像依赖注入这样的技术在 PCL 项目中使用它（参见你之前的问题[Connecting MVVMCross Portable connect to WCF DataService. Is it possible?](https://stackoverflow.com/questions/14875344/connecting-mvvmcross-portable-connect-to-wcf-dataservice-is-it-possible)）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-18T23:05:11.140

查看适用于 Windows Phone 的 GZipWebClient。

[https://github.com/dotMorten/SharpGIS.GZipWebClient](https://github.com/dotMorten/SharpGIS.GZipWebClient)

# android - 从最近的活动中清除我的应用程序会杀死我的服务

> ID：14943793
> 
> 赞同：3
> 
> 时间：2013-02-18T19:23:30.230
> 
> 标签：android, service, background-process

我创建了一项服务来处理我的 AsyncTasks，例如在服务器上上传文件或下载文件。当我从最近的活动菜单中滑动我的应用程序时，我的服务被终止了。这是正常行为吗？如果是这样，一种解决方案是将其设置为前台服务，`startForeground(int, Notification)`但我必须显示一个通知并且我不希望它，因为我已经为每个运行的 AsyncTask 显示一个。

即使我从最近的活动菜单中刷掉“play store”，“play store”应用程序如何下载应用程序并保持下载状态？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T19:46:09.520

> 这是正常行为吗？

是的。Android 应用户的要求终止了您的后台进程。

> 如果是这样，一种解决方案是使用 startForeground(int, Notification) 将其设置为前台服务，但我必须显示一个通知并且我不希望它，因为我已经为每个运行的 AsyncTask 显示一个。

请不要显示单独的`Notification`“每个 AsyncTask 正在运行”。最多显示一个`Notification`。很少有（如果有的话）应用程序足够重要以保证单独的`Notifications`.

# osgi - 如何在osgi插件项目中启动camelcontext？

> ID：14943794
> 
> 赞同：0
> 
> 时间：2013-02-18T19:23:34.847
> 
> 标签：osgi, apache-camel

我无法让我的骆驼路线在 OSGI(Equinox)-Bundle 和插件项目中工作。

路线看起来像：

```
public class Example2Routes extends RouteBuilder {
    @Override
    public void configure() throws Exception {
        this.from("cxf:http://localhost:8080/exampleWS?wsdlURL=META-INF/exampleWS.wsdl&dataFormat=PAYLOAD").to("stream:out");
    }
} 
```

我的测试类应该启动骆驼上下文：

```
public class Test {
    public static void run() throws Exception {

        DefaultCamelContext camelContext = new DefaultCamelContext();
        camelContext.addRoutes(new Example2Routes());
        camelContext.start();
            }
    } 
```

该包在 Eclipse 中使用 OSGI Framework Run 配置启动。

安慰：

```
osgi> 19:53:17.712  DEBUG  org.apache.cxf.common.logging.LogUtils:140     Using org.apache.cxf.common.logging.Slf4jLogger for logging.
19:53:17.728  INFO   org.apache.cxf.bus.osgi.CXFActivator:88        Adding the extensions from bundle org.apache.camel.camel-cxf-transport (64) [org.apache.camel.component.cxf.transport.CamelTransportFactory]
19:53:17.743  INFO   org.apache.camel.impl.osgi.Activator:84        Camel activator starting
19:53:17.743  DEBUG  org.apache.camel.impl.osgi.Activator:97        Bundle started: InvokerInf
19:53:17.760  DEBUG  org.apache.camel.impl.osgi.Activator:97        Bundle started: org.eclipse.osgi.services
19:53:17.760  DEBUG  org.apache.camel.impl.osgi.Activator:97        Bundle started: org.eclipse.equinox.util
19:53:17.760  DEBUG  org.apache.camel.impl.osgi.Activator:97        Bundle started: InvokerImpl
19:53:17.760  DEBUG  org.apache.camel.impl.osgi.Activator:97        Bundle started: ch.qos.logback.core
19:53:17.760  DEBUG  org.apache.camel.impl.osgi.Activator:97        Bundle started: ch.qos.logback.classic
19:53:17.760  DEBUG  org.apache.camel.impl.osgi.Activator:97        Bundle started: wsdl4j
19:53:17.760  DEBUG  org.apache.camel.impl.osgi.Activator:97        Bundle started: org.apache.commons.logging
19:53:17.760  DEBUG  org.apache.camel.impl.osgi.Activator:97        Bundle started: com.springsource.javax.activation
19:53:17.760  DEBUG  org.apache.camel.impl.osgi.Activator:97        Bundle started: javax.mail
19:53:17.760  DEBUG  org.apache.camel.impl.osgi.Activator:97        Bundle started: org.apache.ws.xmlschema.core
19:53:17.760  DEBUG  org.apache.camel.impl.osgi.Activator:97        Bundle started: org.apache.cxf.bundle
19:53:17.760  DEBUG  org.apache.camel.impl.osgi.Activator:97        Bundle started: org.springframework.transaction
19:53:17.760  DEBUG  org.apache.camel.impl.osgi.Activator:97        Bundle started: org.apache.camel.camel-cxf
19:53:17.760  DEBUG  org.apache.camel.impl.osgi.Activator:128       Found entry: META-INF/services/org/apache/camel/component/cxf in bundle org.apache.camel.camel-cxf
19:53:17.760  DEBUG  org.apache.camel.impl.osgi.Activator:128       Found entry: META-INF/services/org/apache/camel/component/cxfbean in bundle org.apache.camel.camel-cxf
19:53:17.760  DEBUG  org.apache.camel.impl.osgi.Activator:128       Found entry: META-INF/services/org/apache/camel/component/cxfrs in bundle org.apache.camel.camel-cxf
19:53:17.775  DEBUG  org.apache.camel.impl.osgi.Activator:97        Bundle started: org.apache.neethi
19:53:17.775  DEBUG  org.apache.camel.impl.osgi.Activator:97        Bundle started: slf4j.api
19:53:17.775  DEBUG  org.apache.camel.impl.osgi.Activator:97        Bundle started: com.springsource.org.apache.xml.resolver
19:53:17.775  DEBUG  org.apache.camel.impl.osgi.Activator:97        Bundle started: javax.ws.rs.javax.ws.rs-api
19:53:17.775  DEBUG  org.apache.camel.impl.osgi.Activator:97        Bundle started: org.apache.camel.camel-spring
19:53:17.775  DEBUG  org.apache.camel.impl.osgi.Activator:128       Found entry: META-INF/services/org/apache/camel/component/spring-event in bundle org.apache.camel.camel-spring
19:53:17.775  DEBUG  org.apache.camel.impl.osgi.Activator:143       Found entry: META-INF/services/org/apache/camel/language/spel in bundle org.apache.camel.camel-spring
19:53:17.775  DEBUG  org.apache.camel.impl.osgi.Activator:97        Bundle started: org.springframework.beans
19:53:17.775  DEBUG  org.apache.camel.impl.osgi.Activator:97        Bundle started: org.apache.commons.codec
19:53:17.775  DEBUG  org.apache.camel.impl.osgi.Activator:97        Bundle started: target
19:53:17.775  DEBUG  org.apache.camel.impl.osgi.Activator:97        Bundle started: log4j
19:53:17.775  DEBUG  org.apache.camel.impl.osgi.Activator:97        Bundle started: org.springframework.core
19:53:17.791  DEBUG  org.apache.camel.impl.osgi.Activator:97        Bundle started: org.springframework.expression
19:53:17.791  DEBUG  org.apache.camel.impl.osgi.Activator:97        Bundle started: org.eclipse.equinox.ds
19:53:17.791  INFO   org.apache.camel.impl.osgi.Activator:87        Camel activator started
19:53:17.791  DEBUG  org.apache.camel.impl.osgi.Activator:97        Bundle started: org.apache.camel.camel-core
19:53:17.791  DEBUG  org.apache.camel.impl.osgi.Activator:128       Found entry: META-INF/services/org/apache/camel/component/bean in bundle org.apache.camel.camel-core
19:53:17.791  DEBUG  org.apache.camel.impl.osgi.Activator:128       Found entry: META-INF/services/org/apache/camel/component/browse in bundle org.apache.camel.camel-core
19:53:17.791  DEBUG  org.apache.camel.impl.osgi.Activator:128       Found entry: META-INF/services/org/apache/camel/component/class in bundle org.apache.camel.camel-core
19:53:17.791  DEBUG  org.apache.camel.impl.osgi.Activator:128       Found entry: META-INF/services/org/apache/camel/component/dataset in bundle org.apache.camel.camel-core
19:53:17.791  DEBUG  org.apache.camel.impl.osgi.Activator:128       Found entry: META-INF/services/org/apache/camel/component/direct in bundle org.apache.camel.camel-core
19:53:17.791  DEBUG  org.apache.camel.impl.osgi.Activator:128       Found entry: META-INF/services/org/apache/camel/component/direct-vm in bundle org.apache.camel.camel-core
19:53:17.791  DEBUG  org.apache.camel.impl.osgi.Activator:128       Found entry: META-INF/services/org/apache/camel/component/file in bundle org.apache.camel.camel-core
19:53:17.791  DEBUG  org.apache.camel.impl.osgi.Activator:128       Found entry: META-INF/services/org/apache/camel/component/language in bundle org.apache.camel.camel-core
19:53:17.791  DEBUG  org.apache.camel.impl.osgi.Activator:128       Found entry: META-INF/services/org/apache/camel/component/log in bundle org.apache.camel.camel-core
19:53:17.791  DEBUG  org.apache.camel.impl.osgi.Activator:128       Found entry: META-INF/services/org/apache/camel/component/mock in bundle org.apache.camel.camel-core
19:53:17.791  DEBUG  org.apache.camel.impl.osgi.Activator:128       Found entry: META-INF/services/org/apache/camel/component/properties in bundle org.apache.camel.camel-core
19:53:17.791  DEBUG  org.apache.camel.impl.osgi.Activator:128       Found entry: META-INF/services/org/apache/camel/component/ref in bundle org.apache.camel.camel-core
19:53:17.791  DEBUG  org.apache.camel.impl.osgi.Activator:128       Found entry: META-INF/services/org/apache/camel/component/seda in bundle org.apache.camel.camel-core
19:53:17.791  DEBUG  org.apache.camel.impl.osgi.Activator:128       Found entry: META-INF/services/org/apache/camel/component/stub in bundle org.apache.camel.camel-core
19:53:17.791  DEBUG  org.apache.camel.impl.osgi.Activator:128       Found entry: META-INF/services/org/apache/camel/component/test in bundle org.apache.camel.camel-core
19:53:17.791  DEBUG  org.apache.camel.impl.osgi.Activator:128       Found entry: META-INF/services/org/apache/camel/component/timer in bundle org.apache.camel.camel-core
19:53:17.791  DEBUG  org.apache.camel.impl.osgi.Activator:128       Found entry: META-INF/services/org/apache/camel/component/validator in bundle org.apache.camel.camel-core
19:53:17.791  DEBUG  org.apache.camel.impl.osgi.Activator:128       Found entry: META-INF/services/org/apache/camel/component/vm in bundle org.apache.camel.camel-core
19:53:17.791  DEBUG  org.apache.camel.impl.osgi.Activator:128       Found entry: META-INF/services/org/apache/camel/component/xslt in bundle org.apache.camel.camel-core
19:53:17.791  DEBUG  org.apache.camel.impl.osgi.Activator:143       Found entry: META-INF/services/org/apache/camel/language/bean in bundle org.apache.camel.camel-core
19:53:17.791  DEBUG  org.apache.camel.impl.osgi.Activator:143       Found entry: META-INF/services/org/apache/camel/language/constant in bundle org.apache.camel.camel-core
19:53:17.791  DEBUG  org.apache.camel.impl.osgi.Activator:143       Found entry: META-INF/services/org/apache/camel/language/file in bundle org.apache.camel.camel-core
19:53:17.791  DEBUG  org.apache.camel.impl.osgi.Activator:143       Found entry: META-INF/services/org/apache/camel/language/header in bundle org.apache.camel.camel-core
19:53:17.791  DEBUG  org.apache.camel.impl.osgi.Activator:143       Found entry: META-INF/services/org/apache/camel/language/property in bundle org.apache.camel.camel-core
19:53:17.791  DEBUG  org.apache.camel.impl.osgi.Activator:143       Found entry: META-INF/services/org/apache/camel/language/ref in bundle org.apache.camel.camel-core
19:53:17.791  DEBUG  org.apache.camel.impl.osgi.Activator:143       Found entry: META-INF/services/org/apache/camel/language/simple in bundle org.apache.camel.camel-core
19:53:17.791  DEBUG  org.apache.camel.impl.osgi.Activator:143       Found entry: META-INF/services/org/apache/camel/language/tokenize in bundle org.apache.camel.camel-core
19:53:17.791  DEBUG  org.apache.camel.impl.osgi.Activator:143       Found entry: META-INF/services/org/apache/camel/language/xpath in bundle org.apache.camel.camel-core
19:53:17.807  DEBUG  org.apache.camel.impl.osgi.Activator:97        Bundle started: org.apache.camel.camel-cxf-transport
19:53:17.807  DEBUG  org.apache.camel.impl.osgi.Activator:97        Bundle started: org.springframework.context
19:53:17.807  DEBUG  org.apache.camel.impl.osgi.Activator:97        Bundle started: CamelOSGIExample
19:53:17.807  DEBUG  org.apache.camel.impl.osgi.Activator:97        Bundle started: org.eclipse.osgi 
```

但是现在如何“启动” CamelContext？没有 osgi，作为标准的 java 应用程序，这个例子可以工作；但是我有一个主要方法，其中包含骆驼上下文。

我尝试了一个激活器来启动骆驼上下文：

```
public class Activator implements BundleActivator {

    @Override
    public void start(BundleContext arg0) throws Exception {

         Test.run();

                }
    } 
```

但这导致了像这样的错误

```
Failed to resolve endpoint: cxf://http://localhost:8081/exampleWS?dataFormat=PAYLOAD&wsdlURL=META-INF%2FexampleWS.wsdl due to: No component found with scheme: cxf 
```

虽然控制台说：

```
20:13:04.319  DEBUG  org.apache.camel.impl.osgi.Activator:97        Bundle started: org.apache.ws.xmlschema.core
20:13:04.319  DEBUG  org.apache.camel.impl.osgi.Activator:97        Bundle started: org.apache.cxf.bundle
20:13:04.319  DEBUG  org.apache.camel.impl.osgi.Activator:97        Bundle started: org.springframework.transaction
20:13:04.319  DEBUG  org.apache.camel.impl.osgi.Activator:97        Bundle started: org.apache.camel.camel-cxf
20:13:04.319  DEBUG  org.apache.camel.impl.osgi.Activator:128       Found entry: META-INF/services/org/apache/camel/component/cxf in bundle org.apache.camel.camel-cxf
20:13:04.319  DEBUG  org.apache.camel.impl.osgi.Activator:128       Found entry: META-INF/services/org/apache/camel/component/cxfbean in bundle org.apache.camel.camel-cxf
20:13:04.319  DEBUG  org.apache.camel.impl.osgi.Activator:128       Found entry: META-INF/services/org/apache/camel/component/cxfrs in bundle org.apache.camel.camel-cxf 
```

可能是因为在启动所有需要的包/组件之前调用了 run 方法，所以 Activator 中的 Test.run() 出现问题？但是如何启动骆驼上下文呢？

**更新 1**

更改为 OsgiDefaultCamelContext。做了一些进口。现在我得到：

```
The bundle "org.apache.httpcomponents.httpclient_4.2.0 [119]" could not be resolved. Reason: Missing Constraint: Import-Package: org.apache.http; version="4.2.0" 
```

&

```
 The bundle "CamelOSGIExample_1.0.0.qualifier [120]" could not be resolved. Reason: Missing Constraint: Import-Package: org.apache.http.nio.conn; version="4.0.0.beta3" 
```

但是找不到这个包。。

**更新 2：**

原因

```
java.lang.ClassNotFoundException: org.apache.http.nio.conn.ClientAsyncConnectionManager 
```

我下载[了 httpasyncclient-osgi-4.0-beta3.jar](http://search.maven.org/remotecontent?filepath=org/apache/httpcomponents/httpasyncclient-osgi/4.0-beta3/httpasyncclient-osgi-4.0-beta3.jar)并将*org.apache.http.nio.conn*添加到导入中。

在那之后我遇到了问题，以前的捆绑包需要例如*org.apache.http.client*或*org.apache.http.auth*。因此，我下载了包含所需类的*httpclient-osgi-4.2.1.jar*和*httpclient-osgi-4.2.2.jar*（因为 4.2.1 版本需要一些导入，4.2.2 需要一些导入）。但是尽管将此捆绑包添加到午餐配置中，我还是得到了

```
org.osgi.framework.BundleException: Exception in siServer.Activator.start() of bundle CamleOSGIExample.
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:734)
...
Caused by: java.lang.NoClassDefFoundError: org/apache/http/nio/conn/ClientAsyncConnectionManager
    at java.lang.Class.getDeclaredConstructors0(Native Method)
...
Caused by: java.lang.ClassNotFoundException: org.apache.http.nio.conn.ClientAsyncConnectionManager
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:513)
...
Root exception:
java.lang.NoClassDefFoundError: org/apache/http/nio/conn/ClientAsyncConnectionManager
    at java.lang.Class.getDeclaredConstructors0(Native Method)
...
Caused by: java.lang.ClassNotFoundException: org.apache.http.nio.conn.ClientAsyncConnectionManager
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:513) 
```

我不明白这个异常，因为我将*org.apache.http.nio.conn*添加到导入中。

搜索需要*org.apache.http.nio.conn*的包，发现 cxf-2.7.3.jar。但我认为使用骆驼的 cfx 组件我也需要这个捆绑包..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T07:29:15.343

使用 OSGi 时需要使用 OsgiDefaultCamelContext。这个类应该在 camel-core-osgi 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T19:37:10.227

你可以试试为什么惰性实例化。如果一个包的启动策略设置为'lazy'，它只会加载类并在它的一个类被另一个包加载时启动。 [http://www.osgi.org/Design/LazyStart](http://www.osgi.org/Design/LazyStart)

# forms - 从一个视图提交多个表单

> ID：14943795
> 
> 赞同：0
> 
> 时间：2013-02-18T19:23:41.660
> 
> 标签：forms, cakephp, cakephp-2.2

使用 CakePHP 我有一个页面，其中有多个表单。每个表单都会更新记录上的单个字段。我正在尝试实现一种通过单个“提交全部”按钮提交所有表单的方法。但是，到目前为止，我的所有解决方案都不太成功。

我的第一次尝试是创建一个`editAll`在控制器中调用的单独操作，该操作采用一个数组，但我无法弄清楚如何在没有保存所有数据的隐藏表单的情况下将数据从所有表单发送到该操作。第二个想法是创建某种 Javascript 函数，它遍历所有表单以创建要发送到控制器`editAll`操作的数组。

第一个实现没有奏效，我找不到一个合理的方法来实现第二个想法。

基本上，我希望有人能指出我从一个页面一次提交多个表单（或至少来自多个表单的数据）的方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T22:05:21.507

我假设您并不总是想全部提交 - 如果您这样做，那么只需制作一张表格。如果您希望能够单独提交其中一些，但也能够全部提交，那么您可以按照以下方式进行操作：

将所有字段保存在一个表单中。每个字段都有一个“提交”值（1 或 0）。如果他们单击单个字段旁边的提交，则将所有提交的值设置为 0，除了那个，然后提交表单。

如果他们单击“全部提交”，则将它们全部变为“1”并提交表单。

然后，当您处理数据时，只需删除任何“提交”值不为 1 的内容。

它仍然需要一些工作，并且您提交的数据超出了必要的数量，但是....这是一个想法。

# android - Android - 更改片段容器

> ID：14943796
> 
> 赞同：2
> 
> 时间：2013-02-18T19:23:45.643
> 
> 标签：android, transactions, android-fragments, containers

我有一个包含两个框架布局的布局。右框架布局包含一个片段，我想将其移动到左框架布局。

我尝试的所有结果都会导致*IllegalStateException：无法更改片段的容器 ID*

哪些事务最适合实现它，或者我必须创建片段的新实例才能将其放入左侧容器中？

我希望有一个人可以帮助我。

提前致谢 ：-）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T07:34:58.933

我没有找到解决上述问题的方法。相反，它只能创建片段的新实例并将状态从旧片段转移到新片段。

# asp.net-mvc - Asp.Net Mvc 区域看不到 js 文件？

> ID：14943799
> 
> 赞同：1
> 
> 时间：2013-02-18T19:24:03.703
> 
> 标签：asp.net-mvc, asp.net-mvc-areas

查看页面网址：

> MyApp > 区域 > 管理 > 视图 > _AddPost.cshtml

我的项目目录（我写了 url 输出字符串作为注释）

```
MyApp
-- Areas
-- Content
-- -- tinymce
-- -- -- jscripts
-- -- -- -- tiny_mce
-- -- -- -- -- tiny_mce.js   // localhost:4574/Content/......../tiny_mce.js
-- -- -- -- -- langs
-- -- -- -- -- -- en.js      // localhost:4574/Admin//langs/en.js
-- -- -- -- -- -- tr.js      // localhost:4574/Admin//langs/tr.js
-- -- -- -- -- themes 
-- -- -- -- -- -- editor_template.js // localhost:4574/Admin//themes/editor_template.js 
```

我添加了以下行，

```
<script src="@Url.Content("~/Content/tinymce/jscripts/tiny_mce/tiny_mce.js")"></script> 
```

和

```
<script type="text/javascript">
    tinyMCE.init({
        language: "tr",   // this line call tr.js
        elements: "Body", // 
        mode: "exact",    // this line call editor_template.js
        height: 300,
        width: 500
    });
</script> 
```

我收到错误

> localhost:4574/Admin//langs/en.js 404（未找到） localhost:4574/Admin//themes/advanced/editor_template.js 404（未找到）

预期的网址

> localhost:4574/Content/tinymce/jscripts/..../langs/en.js localhost:4574/Content/tinymce/jscripts/..../editor_template.js

这些是无效的网址。为什么会生成这些 url。

我该如何解决这个失败？在另一个项目中没有错误，它可以工作。

[这个问题](https://stackoverflow.com/questions/14801425/asp-net-mvc-uploadify)也是一样的...

谢谢。

# c++ - C++ 获取 unordered_set *无*序列化的字节表示

> ID：14943802
> 
> 赞同：0
> 
> 时间：2013-02-18T19:24:14.730
> 
> 标签：c++, serialization, distributed-computing, unordered-set

在分布式计算设置中，我想将 unordered_set 发送到许多节点。我知道 C++ 中的序列化，例如使用`boost::serialization`. 我对序列化的不满是，在接收到序列化数据后，我面临着`unordered_set`在每个节点上重建数据结构的成本。

我的想法是为 unordered_set 编写一个自定义分配器，它分配固定大小的连续内存并在分配后返回起始内存地址。然后我想获取 的字节表示，通过网络`unordered_set`发送它，并告诉接收节点这块内存是一个`unordered_set`.

那行得通吗？你们有其他想法如何解决我的问题吗？或者您有任何相关的指示，例如编写这样的分配器？任何反馈表示赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T19:30:02.280

出于以下几个原因，这可能是一个坏主意：

1.  通常，从一台机器到另一台机器的哈希实现会有所不同，因此您的哈希表在接收机器上将不再有效。
2.  哈希表实现通常会包含指针。您不能只是将指针从一台机器复制到另一台机器；它们是绝对地址（在大多数平台上）。
3.  发送机器和接收机器可能有不同的字节顺序（例如发送机器是 x86 而接收机器是 POWER（例如 XBox），在这种情况下，您将得到的结果将是完全乱码。

我只会发送一个键/值对列表。将它们插入到接收端构建的哈希表中。

此外，请记住，在通过线路发送内容时，处理能力成本与带宽成本相比通常很小。哈希表空间效率低——它们需要大量空桶才能保持接近 O(1) 的性能。因此，即使您可以实现一种按原样通过线路发送哈希表的方法，整体性能也可能会更差。

# java - 使用 ASM 生成接口不起作用

> ID：14943808
> 
> 赞同：0
> 
> 时间：2013-02-18T19:24:40.133
> 
> 标签：java, runtime, bytecode, .class-file

我需要在运行时生成一个接口。该接口将用于[动态代理](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Proxy.html)。起初，我从 Google 找到[了这篇文章](http://weblogs.java.net/blog/emcmanus/archive/2006/10/build_your_own.html)，但后来我发现我可以使用[ASM](http://asm.ow2.org/)代替。这是我获取接口字节码的代码：

```
private static byte[] getBytecode(String internalName, String genericClassTypeSignature, Method[] methods, Class<?>... extendedInterfaces) throws IOException {
    ClassWriter cw = new ClassWriter(0);
    String[] interfaces = new String[extendedInterfaces.length];
    int i = 0;
    for (Class<?> interfac : extendedInterfaces) {
        interfaces[i] = interfac.getName().replace('.', '/');
        i++;
    }
    cw.visit(V1_6, ACC_PUBLIC + ACC_ABSTRACT + ACC_INTERFACE, internalName, null, "java/lang/Object", interfaces);
    ArrayList<String> exceptions = new ArrayList<String>();
    for (Method m : methods) {
        exceptions.clear();
        for (Class<?> exception : m.getExceptionTypes()) {
            exceptions.add(getInternalNameOf(exception));
        }
        cw.visitMethod(removeInvalidAbstractModifiers(m.getModifiers()) + ACC_ABSTRACT, m.getName(), getMethodDescriptorOf(m), getTypeSignatureOf(m), exceptions.toArray(new String[exceptions.size()]));
    }
    cw.visitEnd();
    return cw.toByteArray();
}

private static int removeInvalidAbstractModifiers(int mod) {
    int result = 0;
    if (Modifier.isProtected(mod)) {
        result += ACC_PROTECTED;
    }
    if (Modifier.isPublic(mod)) {
        result += ACC_PUBLIC;
    }
    if (Modifier.isTransient(mod)) {
        result += ACC_VARARGS;
    }
    return result;
} 
```

仅出于测试目的，我尝试将 JFrame 转换为接口。但是当我加载我生成的界面时，它给了我一个`java.lang.ClassFormatError`：

```
java.lang.ClassFormatError: Method paramString in class javax/swing/JFrame$GeneratedInterface has illegal modifiers: 0x404
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:791)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:634)
    // ... 
```

`Modifier.toString(0x404)`告诉我这`0x404`意味着`protected abstract`。据我所知，类中的`protected abstract`方法`abstract`是完全合法的。

这是`paramString`方法的代码（见上文）`JFrame`：

```
/**
 * Returns a string representation of this <code>JFrame</code>.
 * This method
 * is intended to be used only for debugging purposes, and the
 * content and format of the returned string may vary between
 * implementations. The returned string may be empty but may not
 * be <code>null</code>.
 *
 * @return  a string representation of this <code>JFrame</code>
 */
protected String paramString() {
    String defaultCloseOperationString;
    if (defaultCloseOperation == HIDE_ON_CLOSE) {
        defaultCloseOperationString = "HIDE_ON_CLOSE";
    } else if (defaultCloseOperation == DISPOSE_ON_CLOSE) {
        defaultCloseOperationString = "DISPOSE_ON_CLOSE";
    } else if (defaultCloseOperation == DO_NOTHING_ON_CLOSE) {
        defaultCloseOperationString = "DO_NOTHING_ON_CLOSE";
    } else if (defaultCloseOperation == 3) {
        defaultCloseOperationString = "EXIT_ON_CLOSE";
    } else defaultCloseOperationString = "";
    String rootPaneString = (rootPane != null ?
                             rootPane.toString() : "");
    String rootPaneCheckingEnabledString = (rootPaneCheckingEnabled ?
                                            "true" : "false");

    return super.paramString() +
    ",defaultCloseOperation=" + defaultCloseOperationString +
    ",rootPane=" + rootPaneString +
    ",rootPaneCheckingEnabled=" + rootPaneCheckingEnabledString;
} 
```

我看不出为什么我应该得到这个错误。有人可以向我解释一下吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T19:32:57.947

接口中的方法必须是`public`.

此外，在您的`removeInvalidAbstractModifiers()`方法中，您应该使用`|=`来设置标志，而不是`+=`. 如果标志已经设置，后者会导致问题（我意识到如果从 0 开始就不会，但这是一个好习惯）。虽然你为什么要在一个名为“删除”的方法中设置标志，但我不知道。

# macos - 为什么 NSView 在光标离开其框架后继续接收触摸事件？

> ID：14943809
> 
> 赞同：1
> 
> 时间：2013-02-18T19:24:40.727
> 
> 标签：macos, cocoa

我有一个 NSView`[self setAcceptsTouchEvents:YES];`

光标离开 NSView 框架后，此方法继续被调用，直到我单击/开始一个新手势，我真的不明白它何时停止。

```
-(void)touchesMovedWithEvent:(NSEvent *)theEvent {
    [self doStuffs:theEvent];
} 
```

用其他窗口坐标系表示的坐标。

有没有办法防止这种情况发生，或者将坐标转换回视图坐标系？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T22:16:34.080

NSResponder`touchesMovedWithEvent`被调用用于在您的视图中开始的触摸事件，直到它们结束（无论是在您自己的视图中还是在其他地方）。

事件位置以窗口坐标表示。转换为视图的坐标系很容易：

```
- (void)touchesMovedWithEvent:(NSEvent *)event
{
    NSPoint locInWindow;
    NSPoint locInView;

    locInWindow = [event locationInWindow];
    locInView = [self convertPoint:locInWindow fromView:nil];

    NSLog(@"Location in window: %@", NSStringFromPoint(locInWindow));
    NSLog(@"Location in view: %@", NSStringFromPoint(locInView));
} 
```

如果您想为自己的多点触控手势处理原始触摸，这可能是不够的信息。您会想要使用`[event touchesMatchingPhase:NSTouchPhaseMoved inView:self]`,`normalizedPosition`等`deviceSize`（请参阅[Apple 的文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/EventOverview/HandlingTouchEvents/HandlingTouchEvents.html)）。

# javascript - nanoScroller 和 IE9

> ID：14943810
> 
> 赞同：0
> 
> 时间：2013-02-18T19:24:45.780
> 
> 标签：javascript, jquery

我尝试使用 nanoScroller JS 脚本，它可以在 Chrome 和 Firefox 上运行，IE9 除外。我不知道这个问题，因为我已经在 teste 页面中进行了测试并且它可以工作，但在我的项目中它不起作用。这是脚本：

```
$(".lista-noticia").click(function () {
    $(".noticia-completa:visible").hide("slow");
    if ($(this).closest("li").find(".noticia-completa").is(':visible')) {
        $(".noticia-completa").hide("slow");
        $(".lista-noticia").removeClass("ativo");
    } else {
        $(this).closest("li").toggleClass("ativo").find(".noticia-completa").slideToggle(1200, function(){
           $(this).nanoScroller();
        });
        $(".lista-noticia").not(this).removeClass("ativo");
     }
}); 
```

和 HTML

```
<div class="noticia-completa nano">
    <div class="content">
        <p>Lorem ipsum dolor sit amet.....</p>
        <img src="images/index/foto-noticia.png" alt="Imagem Noticia">
        <p>Donec non egestas magna....</p>
        <p>Donec non egestas magna....</p>
        <p>Donec non egestas magna....</p>                         

     </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-29T00:01:38.677

高达 9 的 IE 每个文件只接受 4095 条样式规则，也许这就是问题所在。

另请参阅：
[IE 4096 选择器/样式表限制的 Rails 资产管道解决方案](https://stackoverflow.com/questions/12126118/rails-asset-pipeline-solution-for-ie-4096-selector-stylesheet-limit)

# node.js - 使用 Node.js、Redis 和 CouchDB 管理未来的事件通知

> ID：14943811
> 
> 赞同：2
> 
> 时间：2013-02-18T19:24:48.810
> 
> 标签：node.js, events, calendar, redis, couchdb

我正在尝试使用服务器上的 Node.js 管理日期/时间事件通知。是否有我可以使用并应用于 JavaScript 的编程模式？

目前，我使用命名的 setTimeouts 和 Redis 来为每个超时存储一个布尔值。当超时触发时，它会检查 Redis 的布尔值。如果返回 true，则执行通知。如果该值返回 false，则表示用户已删除该事件并且没有通知。

该解决方案有效，但我不相信它具有可扩展性，原因如下：
1）事件可能需要几天时间。我不相信 Redis 会将这些事件存储那么久。
2）可能有成千上万的事件，我不希望 setTimeouts 到处跑。尤其是在事件被删除之后。

我知道这个问题已经解决了，所以我希望有人能给我指出一个资源或提供一个通用模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T03:43:56.337

你在寻找类似[node-cron](https://github.com/ncb000gt/node-cron)的东西吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-25T05:28:05.353

您可以使用 redis 命名空间节点，是的，现在 redis 有新的功能，可以在密钥到期时调用 event 。

# android - 即使在清理项目后，R 也无法解析为变量

> ID：14943812
> 
> 赞同：2
> 
> 时间：2013-02-18T19:24:48.333
> 
> 标签：android

在运行项目时，R 无法解析为发生变量错误，我尝试清理项目并设置构建路径。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T19:31:11.343

> 即使在清理项目后，R 也无法解析为变量

所以首先检查你是否没有

```
import android.R; 
```

如果是，请删除此行。Eclipse 有时会生成它。

如果你这样做了，但仍然是错误，那么你可能在项目中有错误（也在 XML 布局等中），并且如果至少有一个错误，**`R`**则无法生成。所以检查一切也 res 文件夹。

您也可以转到 gen 文件夹，`R.java`再次删除并清理项目。

# linux - centos 6无法安装vsftpd

> ID：14943814
> 
> 赞同：-4
> 
> 时间：2013-02-18T19:24:55.713
> 
> 标签：linux, ftp, centos6, yum, vsftpd

我在centos 6上安装vsftpd时遇到问题。当我输入命令时

```
yum install vsftpd 
```

我得到以下信息：

```
Loaded plugins: fastestmirror
Loading mirror speeds from cached hostfile
 * base: mirror.widexs.nl
 * extras: mirror.serverbeheren.nl
 * updates: mirror.serverbeheren.nl
Setting up Install Process
No package vsftpd available.
Error: Nothing to do 
```

而且我不知道如何解决这个问题。有人有想法吗？我应该添加另一个回购，如果是这样，我应该怎么做？我对 centos 很陌生，我已经习惯了 Ubuntu，在那里我可以使用 apt-get 来安装大多数东西。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T20:07:17.637

安装存储库

```
wget http://dl.fedoraproject.org/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm
rpm -Uvh epel-release-6*.rpm 
```

安装 vsftpd

```
yum install vsftpd 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T19:38:20.813

嗯很奇怪，`yum`缺少一些存储库所在`vsftpd`的位置。你仍然可以手动下载： [http ://rpmfind.net/linux/rpm2html/search.php?query=vsftpd&submit=Search+...&system=centos&arch=](http://rpmfind.net/linux/rpm2html/search.php?query=vsftpd&submit=Search+...&system=centos&arch=)

并通过命令安装它`rpm`，或者将存储库（不确定哪个）添加到您的 yum

# java - 如何更新正在运行的 Tomcat 应用程序中的资源并保持会话完整

> ID：14943816
> 
> 赞同：1
> 
> 时间：2013-02-18T19:25:07.117
> 
> 标签：java, spring-mvc, intellij-idea, tomcat6

作为开发人员，我正在使用 IntelliJ 11 在 Tomcat 容器中运行 spring mvc 应用程序。我配置了 IntelliJ，以便我可以“更新资源”以使我的 jsp 更改生效，而无需完全重新启动 Tomcat。但是，每当我更新资源时，我在 Tomcat 中的会话就会丢失，我必须重新登录到我的应用程序。

有没有办法让 Tomcat 在保持会话活动的同时识别我的应用程序资源更改？

虽然我在问题中引用了 IntelliJ，但它实际上是关于 Tomcat 的。从 IntelliJ 执行此操作的方法会很棒，但任何方法都将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T19:41:21.170

Tomcat 能够在重新启动时保持会话。[标准实现](https://tomcat.apache.org/tomcat-7.0-doc/config/manager.html)使用一个名为`SESSIONS.ser`. 显然存储的对象是会话必须的`Serializable`。

# c++ - std::hash 是否保证“相等”浮点数的哈希值相等？

> ID：14943817
> 
> 赞同：8
> 
> 时间：2013-02-18T19:25:12.117
> 
> 标签：c++, c++11, hash, floating-accuracy, stdhash

`std::hash`（例如，对于`double`s 或s）的浮点特化在[*几乎相等*](http://en.cppreference.com/w/cpp/types/numeric_limits/epsilon#Example)`float`方面是否可靠？也就是说，如果两个值（例如and ）应该比较相等，但不会用运算符这样做，会如何表现？[](http://en.cppreference.com/w/cpp/types/numeric_limits/epsilon#Example)*`(1./std::sqrt(5.)/std::sqrt(5.))``.2``==``std::hash`*

 *那么，我可以依靠 a`double`作为`std::unordered_map`键来按预期工作吗？

* * *

我见过“[散列浮点值](https://stackoverflow.com/q/7403210/430766)”，但它询问了提升；我在问 C++11 的保证。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-18T19:42:10.477

`std::hash`对于可以实例化的所有类型都有相同的保证：如果两个对象相等，则它们的哈希码将相等。否则，他们不会的可能性很大。因此，您可以依赖 a`double`作为 an 中的键 来按预期工作：如果两个双精度值不`unordered_map`相等（由`==`因为 `unordered_map`还检查是否相等）。

显然，如果您的值是不精确计算的结果，那么它们不适合`unordered_map` （也可能不适合任何地图）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-18T19:43:19.993

这个问题有多个问题：

*   您的两个表达式不比较相等的原因不是有两个 0.2 的二进制表达式，而是没有`0.2`, 或`sqrt(5)`!的精确（有限）二进制表示。所以事实上，虽然`(1./std::sqrt(5.)/std::sqrt(5.))`和`.2`应该在代数上相同，但它们在计算机精度算术中可能并不相同。（它们甚至不是有限精度的纸笔算术。假设您正在使用小数点后的 10 位数字。`sqrt(5)`用 10 位数字写出并计算您的第一个表达式。它不会是`.2`。）

*   当然，您有一个合理的概念，即两个数字接近。事实上，您至少有两个：一个绝对 ( `|a-b| < eps`) ，一个相对。但这并不能转化为合理的哈希值。如果您希望`eps`彼此内的所有数字都具有相同的哈希值，那么`1, 1+eps, 1+2*eps, ...`所有数字都将具有相同的哈希值，因此所有数字都将具有相同的哈希值。这是一个有效但无用的哈希函数。但它是唯一满足您将附近值映射到相同哈希的要求的方法！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-12-12T04:52:32.947

在 an 的默认散列后面`unordered_map`有一个`std::hash`结构，它提供`operator()`计算给定值的散列。

此模板的一组默认特化可用，包括`std::hash<float>`和`std::hash<double>`。

在我的机器（LLVM+clang）上，这些被定义为

```
template <>
struct hash<float> : public __scalar_hash<float>
{
    size_t operator()(float __v) const _NOEXCEPT
    {
        // -0.0 and 0.0 should return same hash
       if (__v == 0)
           return 0;
        return __scalar_hash<float>::operator()(__v);
    }
}; 
```

其中`__scalar_hash`定义为：

```
template <class _Tp>
struct __scalar_hash<_Tp, 0> : public unary_function<_Tp, size_t>
{
    size_t operator()(_Tp __v) const _NOEXCEPT
    {
        union
        {
            _Tp    __t;
            size_t __a;
        } __u;
        __u.__a = 0;
        __u.__t = __v;
        return __u.__a;
    }
}; 
```

基本上，哈希是通过将联合的值设置为源值来构建的，然后只获得一个大小为`size_t`.

所以你得到一些填充或者你的值被截断，但这并不重要，因为你可以看到数字的原始位用于计算哈希，这意味着它与`==`运算符完全一样。具有相同哈希值的两个浮点数（不包括截断给出的冲突）必须是相同的值。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-18T19:29:39.593

没有“几乎平等”的严格概念。所以原则上不能保证行为。如果您想定义自己的“几乎相等”概念并构造一个哈希函数，使两个“几乎相等”的浮点数具有相同的哈希值，您可以。但是，只有您对“几乎相等”浮点数的特定概念才适用。*

# sql-server - 从另一个表中过滤表

> ID：14943818
> 
> 赞同：-1
> 
> 时间：2013-02-18T19:25:23.610
> 
> 标签：sql-server, tsql, sql-server-2005

我在创建查询时遇到问题

```
===========      ============================         ================= 
ValueTable1      ValueTable2                          FilterTable1      
===========      ============================         ================= 
Id |Name         Id | RefNo || Property| Value        Id|Property|Operator|Value
 1 |X             1     1       P1         500         1   P1        >       100
                  2     1       P2         300         1   P2        =       300
                  3     1       P3         200         1   P3        <>      100

2  |Y             4     2       P1         250
                  5     2       P2         100
                  6     2       P3         200 
```

我的数据库中有 2 个表 ValueTable 和 1 个过滤表我想创建一个查询，可以从 FilterTable1 中的属性和运算符中过滤 Valuetabl2 我无法创建它。有什么办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T19:54:06.057

好吧，我会尽量不使用 CURSORS 和/或动态 SQL。游标可能会产生严重的锁定问题，并且动态 SQL 总是被（重新）编译，所以在我看来，一起这样做是不行的。

但是，使用带有 while 循环的临时表可能比游标更好。对于逻辑，我会说必须可以使用一些 if 语句..

我做了这个 SQLFiddle ( [http://sqlfiddle.com/#!3/8a4e3/](http://sqlfiddle.com/#!3/8a4e3/) ) 来告诉你我的意思

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T19:28:48.890

例如，您必须在过程循环中为您的 sql 语句创建一个字符串，然后执行它。

请参阅此处如何执行它：http: [//msdn.microsoft.com/de-de/library/ms188332.aspx](http://msdn.microsoft.com/de-de/library/ms188332.aspx)。

您不能直接创建动态 sql 查询。

因此，创建一个过程，创建一个本地游标以循环到您`ValueTable2`的每个属性并检查`operator`in `FilterTable1`，然后创建一个新的 sql 字符串，然后执行该字符串。

*编辑*

我不完全理解你的要求，但这个例子应该给你一个方法：

```
DECLARE @operator varchar(2)
DECLARE @value varchar(255)
DECLARE @sql varchar(max)

DECLARE cur1 CURSOR FOR

SELECT [operator], CAST([value] AS varchar(255))
FROM ValueTable2 v
JOIN FilterTable1 f ON v.Property = f.Property

OPEN cur1

FETCH NEXT FROM cur1
INTO @operator, @value

WHILE @@FETCH_STATUS = 0
  BEGIN
  @sql = 'SELECT * FROM ValueTable2 WHERE [value] ' + @operator + ' ' + @value
  PRINT @sql
  -- EXEC sp_executesql @sql
  FETCH NEXT FROM cur1 INTO @operator, @value
END

DEALLOCATE cur1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T20:34:24.923

也许我确实误解了你的问题......

您想对表 ValueTable2 的值应用 FilterTable1 上的那些过滤器，对吗？

用过滤器做 AND 条件......

确定什么 RefNo 填写所有条件..我是对的吗？还是在这一点上误解了？

这个 RefNo 引用了表 ValueTable1，对吧？还是我误会了？？

如果我做错了

可以试试这样的...

```
 create table ##ValueTable1 (id int , name varchar)
    insert into ##ValueTable1
    values (1,'X'),(2,'Y')

    create table ##ValueTable2 (id int , RefNo int, Property nvarchar(max),value int)
    insert into ##ValueTable2
    values 
    ( 1 ,   1  ,'P1',      500),
    ( 2 ,   1  ,'P2',      300),
    ( 3 ,   1  ,'P3',      200),
    ( 4 ,   2  ,'P1',      250),
    ( 5 ,   2  ,'P2',      100),
    ( 6 ,   2  ,'P3',      200)

    create table ##FilterTable1 (id int, Property nvarchar(max),Operator nvarchar(max) , value int)
    insert into ##FilterTable1
    values 
    (1,'P1','>', 100),
    (1,'P2','=', 300),
    (1,'P3','<>',100)

     declare @sql nvarchar(max)
     set @sql = ''
     select @sql = @sql + ' intersect  select RefNo from ##ValueTable2 where Property = ''' +Property+''' and value '+Operator+CAST(value as varchar(max))
     from ##FilterTable1 
     where id = 1
     set @sql = 'select * from ##ValueTable1 T inner join ('+STUFF(@sql,1,10,'') +')V on V.RefNo = T.id'
     --just stuff @sql if ##ValueTable1 doesnt matter
     --set @sql = STUFF(@sql,1,10,'')  

     exec(@sql)

    drop table ##ValueTable2
    drop table ##FilterTable1
    drop table ##ValueTable1 
```

我的结果集是......

```
id  name    RefNo
1   X       1 
```

# c - 需要将一个 XMM 寄存器乘以另一个，但使用位掩码值

> ID：14943822
> 
> 赞同：5
> 
> 时间：2013-02-18T19:25:33.233
> 
> 标签：c, optimization, assembly, graphics

在 x86/SIMD 程序集中，我使用需要转换的图形图像的四个 32 位像素填充了 XMM 寄存器。但是，像素是 10 位压缩 RGB 格式，因此它们以这种形式以 32 位存在：

```
[  red   ][  green ][  blue  ][]
RRRRRRRRRRGGGGGGGGGGBBBBBBBBBB00 
```

最后两位是填充位，未使用。

我需要将这些像素乘以另一个值，但该值需要被屏蔽，因此它只会影响红色像素。这个值是常数，所以可以硬编码。假设值为 0.1234。我如何将它放入另一个具有适当掩码的 XMM 寄存器中，以便它只影响每个 32 位段的红色部分？

以图形方式说明，我想做这样的事情：

```
XMM0 (first 32 bit segment):
[ 0.1234 ][  1.0   ][  1.0   ][]

*

XMM1 (first 32 bit segment):
RRRRRRRRRRGGGGGGGGGGBBBBBBBBBB00 
```

结果是 XMM0 和 XMM1 的乘积。当然，这个 32 位段将在整个 XMM 寄存器中复制，我只是在这里指定了前 32 位，所以你明白了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T19:35:55.380

如果您真的只想影响红色部分，您可能会想出一个技巧，将红色和部分绿色乘以某个常数（将寄存器视为 16 位短路的集合），然后重新组合新的红色部分与旧的绿色和蓝色部分。

如果您要对所有颜色进行操作，一个更好的策略是使用移位和随机播放的组合将该格式解压缩为受支持的 xmm 寄存器格式（如 16 位或 32 位短或浮点）（并可能转换为浮动）操作。然后做你所有的数学，然后把它打包回去。

如果您曾经重复使用任何值（例如，如果您正在计算一个过滤器内核）并且您正在使用浮点数，那么如果您解压缩并转换为浮点数然后重新使用该值*会*更快和结束。即使您必须创建一个循环，将整行解压缩为 32 位浮点数，然后再对其进行操作并重新打包整行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T20:49:09.447

假设您想使用浮点来乘以您的值，我会将每个值的 R/G/B 值解压缩到 XMM 寄存器的各个浮点部分（只需除以 1023.0）。

您可能还会发现准备四个 R、四个 G 和四个 B 值实际上更容易，然后为另一个 XMM 寄存器中的每个颜色值构建一个具有相同乘数的值，然后乘以该值，而不是保持R、G 和 B 在一个寄存器中。显然，这将需要展开循环，但无论如何这往往会大大提高性能。

# objective-c - 在 for in 循环期间获取当前循环号的更简单方法？

> ID：14943827
> 
> 赞同：1
> 
> 时间：2013-02-18T19:25:53.067
> 
> 标签：objective-c, for-in-loop

我正在编写一个`for in`循环来从 NSArray 中读取名称列表，这是我的代码。

```
NSArray *names = [NSArray arrayWithObjects:@"Luke",@"James",@"Fred",@"Harry", nil];

for (NSString *name in names) {

    NSLog(@"%@",name);

} 
```

我要确定的是是否有一种更简单的方法来获取当前循环号，而无需像这样在循环外添加变量..

```
int number = 0;

for (NSString *name in names) {

    number++;
    NSLog(@"%i - %@",number,name);

} 
```

是否有可以在 for 循环期间访问的内置“循环编号”属性？- 我是不是找错树了？我应该只使用变量并克服它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T19:29:01.253

如果您需要索引，请使用标准的 3 部分 for 循环或`number`带有 while 循环的计数器。没有办法在`for...in`样式循环中神奇地获取索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T19:29:28.427

你所做的是合理的（尽管我会放在`number++`循环的末尾）。通常当我需要循环索引时，我会避免快速枚举并使用更传统的 for 循环：

```
for (NSUInteger i=0; i<[names count]; i++) {
    NSString *name = names[i];
    NSLog(@"%i - %@", i, name);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T19:33:09.657

这似乎有点骇人听闻。您可以使用普通的 for 循环而不是快速枚举，或者使用块枚举对象，或者您也可以使用`indexOfObject:`for 循环内的方法（但这真的**不鼓励**，因为它仅在您只有唯一对象时才有效数组，无论如何重复查找会使其变慢）。总而言之，试试这个：

```
int i;
for (i = 0; i < names.count; i++) {
    NSString *name = [names objectAtIndex:i];
    // and "i" already stores the index
} 
```

或这个：

```
[names enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
    // use obj and idx
}]; 
```

这也是可能的，但不要这样做：

```
for (NSString *name in names) {
    int idx = [names indexOfObject:name];
    // etc.
} 
```

# asp.net - 将当前 GridView 数据表分配给会话？

> ID：14943830
> 
> 赞同：1
> 
> 时间：2013-02-18T19:25:59.023
> 
> 标签：asp.net, vb.net

我有一个由可编辑文本框组成的 GridView。当用户输入一个值时，该`OnTextChanged`函数调用我的`UpdateColumns()`方法，该方法执行各种计算并改变整个 GridView。我将用户输入限制为仅数字，因此当用户在任何单元格中输入字母字符时操作会出错。出现此错误时，我想恢复到用户输入字母字符之前立即存在的数据表。

有没有办法捕获当前 GridView 的数据源并存储在 DataTable 中？

我尝试了以下方法（绑定数据表后）：

```
Dim dt As DataTable = DirectCast(gvBuildingBlocks.DataSource, DataTable)
Session("buildingBlocks") = dt

'If textboxes are all numeric, perform calculations here 

'Else display error here and bind table below
gvBuildingBlocks.DataSource = CType(Session("buildingBlocks"), DataTable)
gvBuildingBlocks.DataBind() 
```

上面的结果是一个空的gridview，因为值为`gvBuildingBlocks.DataSource`空。我还能做些什么来获取这些值吗？

我想我可以遍历所有行并以某种方式保存它们，如下所示：

```
For Each row As GridViewRow in gvBuildingBlocks.Rows
    'Save cell value here
Next 
```

但我不知道用什么代码来保存值？

任何帮助深表感谢。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T19:38:15.847

我了解您正在对行进行计算，并且如果用户输入无效，您希望回滚到原始值。如果输入无效`DataRow.BeginEdit()`，您可以通过在编辑之前调用来在行级别完成此操作。`DataRow.CancelEdit()`看[这个例子](http://msdn.microsoft.com/en-us/library/system.data.datarow.beginedit.aspx)

`DataRow.EndEdit()`如果编辑对提交更改有效，请不要忘记致电。

# python - python匹配可执行文件中的Keyerror

> ID：14943840
> 
> 赞同：3
> 
> 时间：2013-02-18T19:26:56.907
> 
> 标签：python

我越来越

```
Traceback (most recent call last):   File
"C:\Downloaders\nzbToMedia\TorrentToMedia.py", line 323, in <module>
    state = unpack(dirpath, file, outputDestination)
File "C:\Downloaders\nzbToMedia\TorrentToMedia.py", line 121, in unpack
    if which(win_7z_exe):   
File "C:\Downloaders\nzbToMedia\TorrentToMedia.py", line 35, in which
    for path in os.environ["PATH"].split(os.pathsep):   
File "C:\Python27\lib\os.py", line 423, in __getitem__
    return self.data[key.upper()] 
KeyError: 'PATH' 
```

但我似乎无法弄清楚。这段代码应该可以工作（？？）

```
def which(program):
    import os
    def is_exe(fpath):
        return os.path.isfile(fpath) and os.access(fpath, os.X_OK)

    fpath, fname = os.path.split(program)
    if fpath:
        if is_exe(program):
            return program
    else:
        for path in os.environ["PATH"].split(os.pathsep):
            path = path.strip('"')
            exe_file = os.path.join(path, program)
            if is_exe(exe_file):
                return exe_file

    return None 
```

代码调用`which()`

```
if os.name == 'nt':
        win_7z_exes = ['7z.exe', 'C:\\Program Files\\7-Zip\\7z.exe', 'C:\\Program Files (x86)\\7-Zip\\7z.exe',]
        switch_7z = "x -y"
        exts_7z = [".rar", ".zip", ".tar", ".tar.gz", ".tgz", ".tar.bz2", ".tbz", ".tar.lzma", ".tlz", ".tar.xz", ".txz", ".7z", ".xz", ".lzma",]
        for win_7z_exe in win_7z_exes:
            if which(win_7z_exe):
                EXTRACT_COMMANDS = dict.fromkeys(exts_7z, [win_7z_exe, switch_7z])
                break

    # Using Linux
    elif os.name == 'posix':
        Logger.info("EXTRACTOR: We are using *nix")
        required_cmds=["unrar", "unzip", "tar", "unxz", "unlzma", "7zr"] # Need to add a check for which commands that can be utilized in *nix systems
        EXTRACT_COMMANDS = {
        ".rar": ["unrar", "x -o+ -y"],
        ".zip": ["unzip", ""],
        ".tar.gz": ["tar", "xzf"],
        ".tgz": ["tar", "xzf"],
        ".tar.bz2": ["tar", "xjf"],
        ".tbz": ["tar", "xjf"],
        ".tar.lzma": ["tar", "--lzma xf"],
        ".tlz": ["tar", "--lzma xf"],
        ".txz": ["tar", "--xz xf"],
        ".7z": ["7zr", "x"],
        }
        for cmd in required_cmds:
            if not which(cmd):
                for k,v in EXTRACT_COMMANDS.items():
                    if cmd in v[0]:
                        Logger.debug("EXTRACTOR: Command %s not found, disabling support for %s", cmd, k)
                        del EXTRACT_COMMANDS[k]
    else:
        Logger.error("EXTRACTOR: Cant determine host OS while extracting, Exiting") 
```

# ruby-on-rails - 仅当我在 chrome 上测试我的 rails 应用程序 (localhost:3000) 时出现 SSL 连接错误。它适用于火狐

> ID：14943843
> 
> 赞同：2
> 
> 时间：2013-02-18T19:27:07.463
> 
> 标签：ruby-on-rails, ruby

我正在关注 Michael Hartl 的 Rails 教程，由于某种原因，我无法在 Google Chrome 上测试示例应用程序。我首先运行 rails 服务器，然后在浏览器上访问“localhost:3000”来测试它。当我运行 rails 服务器并在 Firefox 上访问 localhost:3000 时，它工作正常，我可以使用该应用程序。然后在 Chrome 上，我得到：

“SSL 连接错误 无法与服务器建立安全连接。这可能是服务器的问题，或者可能需要您没有的客户端身份验证证书。错误 107 (net::ERR_SSL_PROTOCOL_ERROR): SSL 协议错误。”

在 CMD（我使用 Windows 7）中，在我运行 rails 服务器并尝试访问 localhost:3000 后，我收到以下错误：

```
14:22:19] INFO  WEBrick 1.3.1
14:22:19] INFO  ruby 1.9.3 (2012-02-16) [i386-mingw32]
14:22:19] INFO  WEBrick::HTTPServer#start: pid=3064 port=3000
14:22:48] ERROR bad URI `2r?f?\x06\x01\x1Akh/'f??\x10'?j?<\x00\x00H?'.
14:22:48] ERROR bad Request-Line `\x16\x03\x01\x00?\x01\x00\x00?\x03\x02Q"\x7F?\x18??@?X?F???#K???\x17?#?e??4?k`?\x00\x00H?'.
14:22:49] ERROR bad URI `?'.
14:22:49] ERROR bad URI `??x\x1F?\x06??M??IL?C\x00\x00*\x00?\x00?\x00?\x009\x008\x00?\x005\x00E\x00D\x00f\x003\x002\x00?\x00A\x00\x05\x00\x 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-10-29T18:26:25.887

我有同样的问题。正如@looseseal_90 在评论中所说，您应该尝试清除 cookie 并重新加载页面。

（我知道每个人都可以阅读评论，但最好是有答案的问题:-)

# css - 如何使用 CSS3 排除元素？

> ID：14943844
> 
> 赞同：1
> 
> 时间：2013-02-18T19:27:14.277
> 
> 标签：css, css-selectors

这是代码：

```
input:not(#radioo input){
    display: block; 
    font-size:23px;
    border-radius: 10px; 
    width:310px;
    height: 40px
} 
```

但都`input`被排除在外！`input`我只想`form`排除`ID` `radioo`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T19:31:52.417

`:not`只有[`simple selectors`](http://www.w3.org/TR/selectors/#simple-selectors-dfn)最好的解决方案是给每个你想排除一个类的输入并使用`:not(.theclass)`

从评论看来，没有添加类的解决方案

```
form:not(#radioo) input{
    display: block; 
    font-size:23px;
    border-radius: 10px; 
    width:310px;
    height: 40px
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T19:35:51.677

以下选择器似乎可以满足您的需求。只有第二种形式的输入才会有橙色背景。

[http://jsfiddle.net/pYhgr/](http://jsfiddle.net/pYhgr/)

```
form:not(#radioo) input {
    background: orange;
}

<form id="radioo">
    <input type="text" />
</form>

<form>
    <input type="text" />
</form> 
```

# sql-server-2008 - 交换同一行中的数据

> ID：14943855
> 
> 赞同：0
> 
> 时间：2013-02-18T19:27:55.910
> 
> 标签：sql-server-2008

我有一个包含以下字段的学生表：

```
sid     sname    gender
 1       xyz       m
 2       abc       f
 3        wxy      m
 4       jkl       f 
```

我想将性别列中的数据交换为男性对女性和女性对男性。

我已经用一个存储过程尝试了这个：

```
CREATE PROCEDURE [dbo].[replacesex]
AS
BEGIN
SET NOCOUNT ON;
declare @sex char(10)
select @sex=sex
from dbo.student
if(@sex='f')
update dbo.student
set sex='m'
    else
    update dbo.student
set sex='f'
END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T19:30:18.950

尝试这个：

```
UPDATE Student
SET gender = CASE gender WHEN 'm' THEN 'f'
                         WHEN 'f' THEN 'm'
             END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T20:30:43.687

较短的版本将是：

```
UPDATE Student
    SET gender = CASE gender WHEN 'm' THEN 'f' ELSE 'm' END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T19:31:55.227

一种方法是 CASE 语句

```
UPDATE Student
set gender =case gender when'm' then 'f'
when 'f' then 'm' end 
```

# asp.net-mvc - 如何创建从存储过程访问数据的 Razor MVC

> ID：14943858
> 
> 赞同：0
> 
> 时间：2013-02-18T19:28:03.287
> 
> 标签：asp.net-mvc, stored-procedures, razor

MVC 的新手，我正在尝试获得一个有效的模型视图组件。唯一的限制是数据由 C# 类中的存储过程填充，并且 PartialView 使用 Razor 并存储在 _Shared 文件夹中，因此所有页面都可以引用它。

我认为可能有用的只有 ViewModel，BreadcrumbViewModel.cs：

```
using System;
using System.Collections.Generic;
using System.Data;
using System.Data.SqlClient;
using System.Linq;
using System.Web;

namespace Web.Controllers.ViewModels
{
  public class BreadcrumbViewModel
  {
    public int Id { get; set; }
    public int ParentId { get; set; }
    public string Label { get; set; }
    public string URL { get; set; }
    public int SortOrder { get; set; }
    public int InverseDepth { get; set; }
  }

  public class BreadcrumbsViewModel
  {
    public List<BreadcrumbViewModel> getBreadcrumbModel(string thisURL)
    {
        //thisURL contains the path of the current page, so the stored proc can find its parents.
        List<BreadcrumbViewModel> listBVM = new List<BreadcrumbViewModel>();
        BreadcrumbViewModel model;
        string connString = System.Configuration.ConfigurationManager.ConnectionStrings["MyDataContext"].ConnectionString;
        using (SqlConnection conn = new SqlConnection(connString))
        {
            conn.Open();
            using (SqlCommand cmd = new SqlCommand())
            {
                cmd.Connection = conn;
                cmd.CommandType = System.Data.CommandType.StoredProcedure;
                cmd.CommandText = "getBreadcrumb";
                cmd.Parameters.Add(new SqlParameter("@thisURL", SqlDbType.NVarChar));
                cmd.Parameters["@thisURL"].Value = thisURL;

                using (SqlDataReader reader = cmd.ExecuteReader())
                {
                    while (reader.Read())
                    {
                        model = new BreadcrumbViewModel
                        {
                            Id = Convert.ToInt32(reader[0]),
                            ParentId = Convert.ToInt32(reader[1]),
                            Label = reader[2].ToString(),
                            URL = reader[3].ToString(),
                            SortOrder = Convert.ToInt32(reader[4]),
                            InverseDepth = Convert.ToInt32(reader[5])
                        };
                        listBVM.Add(model);
                    }
                }
            }
        }
        if (listBVM == null)
        {
            model = new BreadcrumbViewModel
            {
                Id = 1,
                ParentId = 0,
                Label = "Home",
                URL = "/",
                SortOrder = 1,
                InverseDepth = 1
            };
            listBVM.Add(model);
        }
        return listBVM;
    }
  }
} 
```

如果这个 ViewModel 是正确的，那么引用 List<> 的 Controller 和 PartialView 会是什么样子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T19:55:54.570

Viewmodels 不应该用于直接访问数据。您的控制器应该为视图模型获取数据，甚至控制器也应该依赖一些数据访问类。

Viewmodels 通常由保存数据字段的属性组成。他们不应该有任何行为，他们最不应该访问数据库。

我将从隔离对另一个类的数据访问开始。

```
public class BreadcrumbProvider
{
    public List<BreadcrumbViewModel> getBreadcrumbModel(string thisURL)
    {
        //your method
    }
} 
```

控制器

```
public ActionResult ListBreadcrump(string url)//you can also define a model here
{
    var model = new BreadcrumbProvider().getBreadcrumbModel(url);
    return View(model);
} 
```

然后，您可以将列表用作视图中的模型。

```
@model System.Collections.Generic.List<BreadcrumbViewModel> 
```

# javascript - HTML 表格标题未正确显示

> ID：14943860
> 
> 赞同：3
> 
> 时间：2013-02-18T19:28:03.987
> 
> 标签：javascript, jquery, json

我有一个看起来不错的生成表，除了表标题没有与数据对齐，任何帮助将不胜感激。

代码获取 JSON，然后循环遍历它，同时构建一个表格，最终在 HTML 页面上的 div 中显示它。

代码如下：

```
<!DOCTYPE html>
<html>
<head>
<title></title>
<style>
* { 
    margin: 0;
}

html, 
body { 
    background-color: white;
    font-family: arial, helvetica, verdana, sans-serif;
    font-size: 16pt;
}

.d0 {
    background-color: #EFFBFB; /*#FCF6CF;*/
}
.d1 {
    background-color: #E0F8F7; /*#FEFEF2;*/
}   
</style>

</head>
<body>

<div id="des"></div>
</body>
</html>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>
(function($) {
var json = { 
        1: { description:"Description", code:"1234", code1:"1234", code2:"1224"},
        2: { description:"Description", code:"1234", code1:"1234", code2:"1224"}, 
        3: { description:"Description", code:"1234", code1:"1234", code2:"1224"}, 
        4: { description:"Description", code:"1234", code1:"1234", code2:"1224"}, 
        5: { description:"Description", code:"1234", code1:"1234", code2:"1224"},
        6: { description:"Description", code:"1234", code1:"1234", code2:"1224"},
        7: { description:"Description", code:"1234", code1:"1234", code2:"1224"}, 
        8: { description:"Description", code:"1234", code1:"1234", code2:"1224"}, 
        9: { description:"Description", code:"1234", code1:"1234", code2:"1224"}, 
        10: { description:"Description", code:"1234", code1:"1234",
        code2:"1224"}            
    };

  var tableHeader = 
  "<table>" +
  "<tr>" + 
  "<th>Actions</th>" +
  "<th>Description</th>" +
  "<th>Code</th>" +
  "<th>Code1</th>" +
  "<th>Code2</th>" +
  "</tr>";
  var tableFooter = "</table>";
  console.log(tableHeader);

  $("#des").append(tableHeader);

  $.each(json, function(key, value) {
    var cssName = "d";
    var cssKey = key % 2 == 0 ? 1 : 0;
    cssKey = cssName + cssKey;
    var html =    
    "<tr class=\"" + cssKey + "\">" + 
    "<td><a href=\"/common/Service?id=" + key + "\">Modify</a></td>" + 
    "<td>" + this.description + "</td>" +
    "<td>" + this.code + "</td>" +
    "<td>" + this.code1 + "</td>" +
    "<td>" + this.code2 + "</td>" + 
    "</tr>";
    console.log(html);
    $("#des").append(html);
  });

  $("#des").append(tableFooter);
  console.log(tableFooter);
  })(jQuery); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T19:32:35.013

jQuery 将自动关闭您创建的任何 HTML 元素。您不能将`<table>`标签与标签分开附加`</table>`。

所以而不是

```
$("#des").append(tableHeader);
// ....
$("#des").append(html);
// ....
$("#des").append(tableFooter); 
```

您应该先附加空表，然后将行附加到表体：

```
$("#des").append(tableHeader + tableFooter);
// ...
$("#des tbody").append(html); 
```

更好的是，将所有内容组合成一个字符串，并一次性附加所有内容以提高性能：

```
var table_html = tableHeader;
// ....
table_html += html;
// ....
table_html += tableFooter;
$("#des").append(table_html); 
```

# android - 在 2 个不同的回调上在一个 Activity 中调用多个布局

> ID：14943862
> 
> 赞同：1
> 
> 时间：2013-02-18T19:28:12.147
> 
> 标签：android, android-layout, android-button

我正在做的是在我的活动开始时初始化布局。每当单击该布局上的按钮时，都会在同一活动中初始化另一个布局。每当我单击正在做一些有关插入数据库记录的工作时。即使忽略数据库部分，我也会在 logcat 中获取 java 空指针异常。请看一下并指导我

```
package com.example.emp_management;

import android.app.Activity;
import android.content.ContentValues;
import android.database.sqlite.SQLiteDatabase;
import android.os.Bundle;
import android.provider.SyncStateContract.Columns;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;
import com.example.emp_management.DatabaseHelper;

public class Administrator_Work extends Activity{

@Override
protected void onCreate(Bundle adminkakaam) {
    // TODO Auto-generated method stub

    super.onCreate(adminkakaam);
    setContentView(R.layout.administrator);
    Toast.makeText(this, "Logged in as Administrator!",Toast.LENGTH_LONG).show();
    final EditText new_user = (EditText) findViewById(R.id.editText1);
    final EditText new_pass = (EditText) findViewById(R.id.textView2);
    Button add_emp = (Button)findViewById(R.id.addemployee);
    final Button create_acc = (Button) findViewById(R.id.creat_acc);
    add_emp.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub 
            setContentView(R.layout.add_employee);
            create_acc.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    //DatabaseHelper accessing_db = new DatabaseHelper(Administrator_Work.this);
                    //accessing_db.insert_new_user(new_user.getText().toString(), new_pass.getText().toString());
                    //Toast.makeText(getApplicationContext(), "New User Has Been Created!!", Toast.LENGTH_SHORT).show();

                }
            });
        }
    });

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T19:38:45.643

`setContentView`不建议多次调用。我建议您为您的应用程序使用不同的片段，或者至少让第一个布局包含您需要的所有视图并根据您的需要隐藏/显示它们。如果你坚持对同一个活动使用不同的布局，那么你可以看看[这里](https://stackoverflow.com/questions/6811989/android-switching-screens-with-new-activity-or-just-changing-content-view)。

# ios - UILabel 不显示多行

> ID：14943866
> 
> 赞同：0
> 
> 时间：2013-02-18T19:28:47.307
> 
> 标签：ios, xcode, uiview, interface-builder, uilabel

我知道这是堆栈溢出的一个非常常见的问题，但是，我无法通过查看有关该主题的各种线程来弄清楚发生了什么。

我在单元格中有一个带有 UITableViewCell 子类和 UILabel 的 nib 文件。所需的行为是 UILabel 垂直扩展并显示多行文本（如果文本足够长）。我已将界面生成器中的行数属性设置为 0，并且还将换行符设置为自动换行（也在界面生成器中）。当我显示单元格时，我将单元格的高度设置为 sizeWithFont: constrainedToSize: linebreakmode: 使用单元格文本的函数。单元格的高度正确返回，但是 UILabel 不会换行，也不会垂直扩展。

知道可能出了什么问题吗？

谢谢！

**更新

这是我用来计算单元格高度的代码：

```
+ (CGFloat)heightForCellGiveText:(NSString *)text
{
    CGSize size = [text sizeWithFont:[self defaultMainFont] constrainedToSize:CGSizeMake(LABEL_WIDTH, CGFLOAT_MAX) lineBreakMode:NSLineBreakByWordWrapping];
    return size.height + (2 * VERT_PADDING) + INTER_LABEL_PADDING;
} 
```

我希望让界面生成器自动处理与实际调整标签（而不是单元格）大小有关的所有事情

# wordpress - 如何绑定加载完成新的 Wordpress 3.5 媒体管理器

> ID：14943868
> 
> 赞同：0
> 
> 时间：2013-02-18T19:28:53.477
> 
> 标签：wordpress, media, uploader, wordpress-3.5

在加载所有要在库和图库视图中浏览的项目后，我需要修改新的 Wordpress 3.5 媒体管理器的输出，但我终生无法找到可以绑定的事件...

有谁知道当所有图像都已加载或我可以使用的类似事件时是否触发了“wpMediaEditorLoaded”事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T19:38:09.930

我发现我可以用这个

```
wp.media.view.Attachments.prototype.on('ready',function(){
    //this runs once for each tab in the media editor so unbind previous versions
        jQuery(document).unbind('ajaxComplete', mediaLibraryLoaded);
        jQuery(document).bind('ajaxComplete', mediaLibraryLoaded);
      });
var mediaLibraryLoaded = function(e, xhr, options) {        
         jQuery(document).unbind('ajaxComplete', mediaLibraryLoaded);
        //do stuff here
       } 
```

# php - 通过 PHP 将 Javascript 变量的值传递给 MySQL

> ID：14943870
> 
> 赞同：0
> 
> 时间：2013-02-18T19:29:02.230
> 
> 标签：php, javascript, html

我想通过 PHP 将从下拉菜单中选择的区域名称传递给 MySQL 查询。我在 JavaScript 中检索了名称，但无法将值从 JavaScript 存储到 PHP。我的代码如下

```
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title></title>
    <script>
        function getIndex()
        {
            var x=document.getElementById("cmbArea").selectedIndex;
            var y=document.getElementById("cmbArea").options

            var z= y[x].text;
            alert(z); 
        }
    </script>
</head>
<body>
    <form name ="form1" action="Demo1.php" method="post">
    <select id="cmbArea" name="cmbArea">
    <?php
    include 'Connect.php';
    $query = "SELECT varAreaName FROM tbArea" ;
    $result = mysql_query($query);       
    while($row = mysql_fetch_assoc( $result )) { 
        echo '<option value="'.$row['varAreaName'].'">' . $row['varAreaName'] . '</option>';   
    }

    ?>
    </select>
    </form>
    <input type="Button" onclick="getIndex()" value="Alert index of selected option">

   </body>
   </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T19:36:56.687

是的，您不能将值从 javascript“存储”到 PHP，因为 javascript 在客户端（字面意思是在您的浏览器端），而不是在服务器端。

您需要使用 ajax（可能是 Jquery ajax）发布数据，并以 JSON 格式发布。 [检查这个线程..](https://stackoverflow.com/questions/10110805/jquery-post-json-object-to-a-server)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T20:24:48.273

PHP 将在服务器上运行，然后 javascript 将在浏览器上运行。因此，当您尝试时，您不能在同一页面中同时执行这两项操作。

我认为最好的方法是提交表单，并使用 PHP 读取那里的值。在那里你可以执行你的查询。

如果您不想提交，可以检查 AJAX，它将发送异步服务器端请求，而无需刷新网页。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T19:31:26.080

您需要发布您的表格。该值将在`$_POST['cmbArea']`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T19:33:25.577

如果我理解正确，我会在这种情况下使用 AJAX。像这样的东西：http: [//openenergymonitor.org/emon/node/107](http://openenergymonitor.org/emon/node/107)

# c# - DbContext 的 EF 5.x Code First 连接字符串不起作用

> ID：14943873
> 
> 赞同：1
> 
> 时间：2013-02-18T19:29:36.780
> 
> 标签：c#, mysql, entity-framework, entity-framework-4, mysql-connector

我有一个具有 EF 代码优先类和数据库上下文的项目

```
public partial class MyProjectContext : DbContext
{
    public MyProjectContext()
        : base("name=MyProjectContext")
    {
    }

    public DbSet<Person> Persons { get; set; } 
```

我的 app.config 看起来像

```
<add name="MyProjectContext" connectionString="server=<serverIP>; user id=<userid>; password=<password>; database=<dbName>; pooling=false; Persist Security Info=True " providerName="MySql.Data.MySqlClient" /> 
```

我在我的 Web 项目中引用了上面的这个 Project1，我在 Web 项目中也有下面的连接字符串

```
<add name="MyProjectContext" connectionString="server=<serverIP>; user id=<userid>; password=<password>; database=<dbName>; pooling=false; Persist Security Info=True " providerName="MySql.Data.MySqlClient" /> 
```

这是我抛出错误的代码

```
MyProjectContext db = new MyProjectContext();
            Person user = (from q in db. Persons
                            where q.PersonId == 1
                            select q).First(); 
```

我收到以下错误

```
{"An error occurred while getting provider information from the database. This can be caused by Entity Framework using an incorrect connection string. Check the inner exceptions for details and ensure that the connection string is correct."}

{"The provider did not return a ProviderManifestToken string."} 
```

如果我首先将 MYsql 与模型一起使用，它可以与我拥有的 6.6.4.0 连接器一起使用，我已经手动创建了一个数据库，所以我不想为创建数据库进行初始化。与运行 tt 文件和更新 edmx 文件相比，此代码首先使我能够更好地控制类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T20:46:35.200

您根本不需要输入`name=`，只要包含的项目`MyProjectContext`在其 App.Config 文件中也包含该连接字符串即可：

```
public MyProjectContext() : base("MyProjectContext") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T23:03:15.127

我最终使用了第一代反向工程内部代码的 EF 电动工具，wihc 工作。它使用 statict 方法生成相同的连接字符串但不同的 DBcontext 类。

# android - MySQL - 使用 JSON 的 Android 应用程序连接（使用 logcat）

> ID：14943875
> 
> 赞同：0
> 
> 时间：2013-02-18T19:29:41.797
> 
> 标签：android, mysql, eclipse, logcat

我正在尝试从我的 MySQL-DB 中获取密码，但 android 程序无法启动，这是我的 MainActivity.java 代码：

```
package com.example.datenbankconnectiontest;

import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.ListActivity;
import android.net.ParseException;
import android.os.Bundle;
import android.util.Log;
import android.widget.Toast;

public class MainActivity extends ListActivity {

JSONArray jArray;
String result = null;
InputStream is = null;
StringBuilder sb=null;

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);

 ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
//http post
try{
     HttpClient httpclient = new DefaultHttpClient();
     HttpPost httppost = new HttpPost("http://178.190.156.114/Datenbankconnectiontest.php");
     httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
     HttpResponse response = httpclient.execute(httppost);
     HttpEntity entity = response.getEntity();                                                          
     is = entity.getContent();
     }catch(Exception e){
         Log.e("log_tag", "Error in http connection"+e.toString());
    }
//convert response to string
try{
      BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
       sb = new StringBuilder();
       sb.append(reader.readLine() + "\n");

       String line="0";
       while ((line = reader.readLine()) != null) {
                      sb.append(line + "\n");
        }
        is.close();
        result=sb.toString();
        }catch(Exception e){
              Log.e("log_tag", "Error converting result "+e.toString());
        }
//paring data
int ct_id;
String ct_name;
try{
      jArray = new JSONArray(result);
      JSONObject json_data=null;
      for(int i=0;i<jArray.length();i++){
             json_data = jArray.getJSONObject(i);
             ct_id=json_data.getInt("CITY_ID");
             ct_name=json_data.getString("CITY_NAME");
             Toast.makeText(getBaseContext(), "PW: " +ct_name ,Toast.LENGTH_LONG).show();
         }

      }
      catch(JSONException e1){
          Toast.makeText(getBaseContext(), "No City Found" ,Toast.LENGTH_LONG).show();
      } catch (ParseException e1) {
            e1.printStackTrace();
    }
}
} 
```

这是我的日志：

```
02-18 19:21:42.831: E/Trace(675): error opening trace file: No such file or directory (2)
02-18 19:21:43.331: D/AndroidRuntime(675): Shutting down VM
02-18 19:21:43.331: W/dalvikvm(675): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
02-18 19:21:43.340: E/AndroidRuntime(675): FATAL EXCEPTION: main
02-18 19:21:43.340: E/AndroidRuntime(675): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.datenbankconnectiontest/com.example.datenbankconnectiontest.MainActivity}: java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list'
02-18 19:21:43.340: E/AndroidRuntime(675):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
02-18 19:21:43.340: E/AndroidRuntime(675):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
02-18 19:21:43.340: E/AndroidRuntime(675):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
02-18 19:21:43.340: E/AndroidRuntime(675):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
02-18 19:21:43.340: E/AndroidRuntime(675):  at android.os.Handler.dispatchMessage(Handler.java:99)
02-18 19:21:43.340: E/AndroidRuntime(675):  at android.os.Looper.loop(Looper.java:137)
02-18 19:21:43.340: E/AndroidRuntime(675):  at android.app.ActivityThread.main(ActivityThread.java:4745)
02-18 19:21:43.340: E/AndroidRuntime(675):  at java.lang.reflect.Method.invokeNative(Native Method)
02-18 19:21:43.340: E/AndroidRuntime(675):  at java.lang.reflect.Method.invoke(Method.java:511)
02-18 19:21:43.340: E/AndroidRuntime(675):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
02-18 19:21:43.340: E/AndroidRuntime(675):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
02-18 19:21:43.340: E/AndroidRuntime(675):  at dalvik.system.NativeStart.main(Native Method)
02-18 19:21:43.340: E/AndroidRuntime(675): Caused by: java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list'
02-18 19:21:43.340: E/AndroidRuntime(675):  at android.app.ListActivity.onContentChanged(ListActivity.java:243)
02-18 19:21:43.340: E/AndroidRuntime(675):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:259)
02-18 19:21:43.340: E/AndroidRuntime(675):  at android.app.Activity.setContentView(Activity.java:1867)
02-18 19:21:43.340: E/AndroidRuntime(675):  at com.example.datenbankconnectiontest.MainActivity.onCreate(MainActivity.java:35)
02-18 19:21:43.340: E/AndroidRuntime(675):  at android.app.Activity.performCreate(Activity.java:5008)
02-18 19:21:43.340: E/AndroidRuntime(675):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
02-18 19:21:43.340: E/AndroidRuntime(675):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
02-18 19:21:43.340: E/AndroidRuntime(675):  ... 11 more 
```

如果您能帮我找出错误，我将非常感激！如果您需要 PHP 端，请告诉我，但我认为没有必要，尽管它看起来像一个 android 错误。

我没有自己编写代码，它是从[http://blog.sptechnolab.com/2011/02/10/android/android-connecting-to-mysql-using-php复制的（并且变量和 url 已更改） /](http://blog.sptechnolab.com/2011/02/10/android/android-connecting-to-mysql-using-php/)

新的堆栈跟踪：

```
02-18 19:38:42.040: E/Trace(731): error opening trace file: No such file or directory (2)
02-18 19:38:42.580: E/log_tag(731): Error in http connectionandroid.os.NetworkOnMainThreadException
02-18 19:38:42.580: E/log_tag(731): Error converting result java.lang.NullPointerException
02-18 19:38:42.580: D/AndroidRuntime(731): Shutting down VM
02-18 19:38:42.580: W/dalvikvm(731): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
02-18 19:38:42.600: E/AndroidRuntime(731): FATAL EXCEPTION: main
02-18 19:38:42.600: E/AndroidRuntime(731): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.datenbankconnectiontest/com.example.datenbankconnectiontest.MainActivity}: java.lang.NullPointerException
02-18 19:38:42.600: E/AndroidRuntime(731):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
02-18 19:38:42.600: E/AndroidRuntime(731):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
02-18 19:38:42.600: E/AndroidRuntime(731):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
02-18 19:38:42.600: E/AndroidRuntime(731):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
02-18 19:38:42.600: E/AndroidRuntime(731):  at android.os.Handler.dispatchMessage(Handler.java:99)
02-18 19:38:42.600: E/AndroidRuntime(731):  at android.os.Looper.loop(Looper.java:137)
02-18 19:38:42.600: E/AndroidRuntime(731):  at android.app.ActivityThread.main(ActivityThread.java:4745)
02-18 19:38:42.600: E/AndroidRuntime(731):  at java.lang.reflect.Method.invokeNative(Native Method)
02-18 19:38:42.600: E/AndroidRuntime(731):  at java.lang.reflect.Method.invoke(Method.java:511)
02-18 19:38:42.600: E/AndroidRuntime(731):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
02-18 19:38:42.600: E/AndroidRuntime(731):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
02-18 19:38:42.600: E/AndroidRuntime(731):  at dalvik.system.NativeStart.main(Native Method)
02-18 19:38:42.600: E/AndroidRuntime(731): Caused by: java.lang.NullPointerException
02-18 19:38:42.600: E/AndroidRuntime(731):  at org.json.JSONTokener.nextCleanInternal(JSONTokener.java:116)
02-18 19:38:42.600: E/AndroidRuntime(731):  at org.json.JSONTokener.nextValue(JSONTokener.java:94)
02-18 19:38:42.600: E/AndroidRuntime(731):  at org.json.JSONArray.<init>(JSONArray.java:87)
02-18 19:38:42.600: E/AndroidRuntime(731):  at org.json.JSONArray.<init>(JSONArray.java:103)
02-18 19:38:42.600: E/AndroidRuntime(731):  at com.example.datenbankconnectiontest.MainActivity.onCreate(MainActivity.java:68)
02-18 19:38:42.600: E/AndroidRuntime(731):  at android.app.Activity.performCreate(Activity.java:5008)
02-18 19:38:42.600: E/AndroidRuntime(731):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
02-18 19:38:42.600: E/AndroidRuntime(731):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
02-18 19:38:42.600: E/AndroidRuntime(731):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T19:32:07.670

*当前*阻止您的应用程序启动的问题是您的`activity_main`布局需要有一个 ID 为`@android:id/list`Eg的 ListView

```
<ListView 
     android:id="@android:id/list"
     android:layout_width="match_parent"
     android:layout_height="match_parent">
</ListView> 
```

由于堆栈跟踪说：

```
RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list' 
```

# asp.net-mvc-3 - 在使用成员资格时检索 PersonId 的值

> ID：14943883
> 
> 赞同：0
> 
> 时间：2013-02-18T19:30:02.513
> 
> 标签：asp.net-mvc-3, asp.net-membership

我在我的 MVC3 应用程序中使用 ASP.NET Membership。

我使用了一个`PersonId`变量来声明之间的关系`UserId`并将`PersonId`值插入到一个不同的表中，该表包含具有特定用户的所有信息`UserId`。

有了这个很明显，一个人有一定`UserId`的会有一定的`PersonId`。

就像会员在我想要存储的 Cookie 中存储某些值`PersonId`一样。

我怎样才能做到这一点？

这种方法的明显好处是我可以保存数据库调用，因为我使用的主要内容是`PersonId`.

我想知道最好和最安全的方法来做到这一点。

请建议。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T19:34:30.447

简短的回答是您将要查看：

* * *

[http://msdn.microsoft.com/en-us/library/2y3fs9xs(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/2y3fs9xs(v=vs.85).aspx)

ASP.NET 配置文件属性概述

* * *

[http://www.codeproject.com/Articles/281602/ASP-NET-Profile-Provider](http://www.codeproject.com/Articles/281602/ASP-NET-Profile-Provider)

ASP.NET 配置文件提供程序

# django - 在 Django 应用程序中嵌入 CMS

> ID：14943886
> 
> 赞同：0
> 
> 时间：2013-02-18T19:30:21.263
> 
> 标签：django, django-cms

怎么办？我以前使用 BrowserCMS 使用 RoR 完成了此操作，但是我什至如何在基于 django 的站点/应用程序上透明地执行此类操作？

这个想法是能够允许用户为他们的数据发布他们自己的页面，然后可以为应用程序的目的提取这些数据。真的不太难，它的 CMS 部分让我摸不着头脑。

有链接吗？博客？吉茨？提示？都赞赏。

TIA

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T19:38:15.397

[Django-CMS](http://django-cms.org/)非常棒。它是我在自由职业者业务中构建的 99% 的基础应用程序。您将很难找到比 Django-CMS 更容易扩展或使用的 CMS。

# mysql - mysql show variables like 'innodb%' 什么也没返回

> ID：14943887
> 
> 赞同：2
> 
> 时间：2013-02-18T19:30:23.303
> 
> 标签：mysql

我在 RHEL6.3 上运行 MySQL 服务器 5.1.61。Mysql 服务器运行正常，但我发现我需要调整 innodb_buffer_pool_size。我认为这个变量可以使用

> mysql> 显示像'innodb%'这样的变量；

但实际上，它什么也没返回。为什么什么都不返回？我在哪里可以看到实际的 innodb_buffer_pool_size （除了 my.cnf 文件）。

PS：我知道我可以更改my.cnf中的innodb_buffer_pool_size并重新启动MySQL，但为什么我看不到它的实际值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T20:57:10.333

在 MySQL 5.1 上，如果 InnoDB 存储引擎在启动期间遇到错误，它可能无法初始化。在这种情况下，它只是禁用 InnoDB 并继续。MyISAM 表可以访问，但 InnoDB 表不能。

检查 InnoDB 存储引擎是否已启用。这是 5.1.65 实例的输出：

```
mysql> show variables like 'have_innodb';
+---------------+-------+
| Variable_name | Value |
+---------------+-------+
| have_innodb   | YES   |
+---------------+-------+

mysql> show engines;
+------------+---------+----------------------------------------------------------------+--------------+------+------------+
| Engine     | Support | Comment                                                        | Transactions | XA   | Savepoints |
+------------+---------+----------------------------------------------------------------+--------------+------+------------+
| InnoDB     | YES     | Supports transactions, row-level locking, and foreign keys     | YES          | YES  | YES        |
. . . 
```

接下来，我通过将 my.cnf 编辑为 set 来模拟 InnoDB 故障，`innodb_log_file_size=256M`这不是磁盘上日志文件的大小。然后我重新启动了实例。

```
mysql> show variables like 'have_innodb';
+---------------+-------+
| Variable_name | Value |
+---------------+-------+
| have_innodb   | NO    |
+---------------+-------+

mysql> show variables like 'innodb%';
Empty set (0.00 sec) 
```

麻烦！去哪里看？错误日志文件：

```
InnoDB: Error: log file ./ib_logfile0 is of different size 0 5242880 bytes
InnoDB: than specified in the .cnf file 0 268435456 bytes!
130218 12:50:46 [ERROR] Plugin 'InnoDB' init function returned error.
130218 12:50:46 [ERROR] Plugin 'InnoDB' registration as a STORAGE ENGINE failed. 
```

如果在初始化 InnoDB 时遇到错误，您还可以强制 MySQL 中止其启动，这样您就不会再遇到这种情况了。将此添加到 /etc/my.cnf：

```
[mysqld]
innodb=force 
```

然后当我尝试启动时，我在错误日志中看到：

```
InnoDB: Error: log file ./ib_logfile0 is of different size 0 5242880 bytes
InnoDB: than specified in the .cnf file 0 268435456 bytes!
130218 12:55:03 [ERROR] Plugin 'InnoDB' init function returned error.
130218 12:55:03 [ERROR] Plugin 'InnoDB' registration as a STORAGE ENGINE failed.
130218 12:55:03 [ERROR] Failed to initialize plugins.
130218 12:55:03 [ERROR] Aborting

130218 12:55:03 [Note] /home/billkarwin/opt/mysql/5.1.65/bin/mysqld: Shutdown complete 
```

在 MySQL 5.5 中，如果 InnoDB 初始化失败，服务器将不会启动。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T19:32:44.007

尝试`SHOW VARIABLES WHERE variable_name LIKE 'innodb%'`

# php - Apache2 / ZendServer / PHP - 控制器 URL 请求给出 404 未找到

> ID：14943888
> 
> 赞同：0
> 
> 时间：2013-02-18T19:30:33.710
> 
> 标签：php, apache, apache2, zend-server

我有以下驻留在里面的应用程序结构：

C:\Program 文件 (x86)\Zend\Apache2\htdocs

![在此处输入图像描述](../Images/6f52dc7b960477c31846c6e6ee5e8abe.png)

在我的 Apache 2.2.22 httpd.conf 文件中

```
DocumentRoot "C:\Program Files (x86)\Zend\Apache2/htdocs/public"

<Directory "C:\Program Files (x86)\Zend\Apache2/htdocs/">
    Options Indexes FollowSymLinks
    AllowOverride None
    Order allow,deny
    Allow from all
</Directory>

<IfModule dir_module>
    DirectoryIndex index.php
</IfModule> 
```

当我导航到 127.0.0.1 时，会加载 index.php 文件

但是，当我导航到 127.0.0.1/request（请求是控制器名称）时，它会出现 404 not found。

我们的服务器上运行着相同的结构，并且能够定位该资源。

关于在哪里寻找或改变什么的任何建议？

**整个 apache2\conf\httpd.conf**

```
#
# This is the main Apache HTTP server configuration file.  It contains the
# configuration directives that give the server its instructions.
# See <URL:http://httpd.apache.org/docs/2.2> for detailed information.
# In particular, see 
# <URL:http://httpd.apache.org/docs/2.2/mod/directives.html>
# for a discussion of each configuration directive.
#
# Do NOT simply read the instructions in here without understanding
# what they do.  They're here only as hints or reminders.  If you are unsure
# consult the online docs. You have been warned.  
#
# Configuration and logfile names: If the filenames you specify for many
# of the server's control files begin with "/" (or "drive:/" for Win32), the
# server will use that explicit path.  If the filenames do *not* begin
# with "/", the value of ServerRoot is prepended -- so "logs/foo.log"
# with ServerRoot set to "C:\Program Files (x86)\Zend\Apache2" will be interpreted by the
# server as "C:\Program Files (x86)\Zend\Apache2/logs/foo.log".
#
# NOTE: Where filenames are specified, you must use forward slashes
# instead of backslashes (e.g., "c:/apache" instead of "c:\apache").
# If a drive letter is omitted, the drive on which httpd.exe is located
# will be used by default.  It is recommended that you always supply
# an explicit drive letter in absolute paths to avoid confusion.
#
# ServerRoot: The top of the directory tree under which the server's
# configuration, error, and log files are kept.
#
# Do not add a slash at the end of the directory path.  If you point
# ServerRoot at a non-local disk, be sure to point the LockFile directive
# at a local disk.  If you wish to share the same ServerRoot for multiple
# httpd daemons, you will need to change at least LockFile and PidFile.
#
ServerRoot "C:\Program Files (x86)\Zend\Apache2"
#
# Listen: Allows you to bind Apache to specific IP addresses and/or
# ports, instead of the default. See also the <VirtualHost>
# directive.
#
# Change this to Listen on specific IP addresses as shown below to 
# prevent Apache from glomming onto all bound IP addresses.
#
#Listen 12.34.56.78: 80
Listen  80
#
# Dynamic Shared Object (DSO) Support
#
# To be able to use the functionality of a module which was built as a DSO you
# have to place corresponding `LoadModule' lines at this location so the
# directives contained in it are actually available _before_ they are used.
# Statically compiled modules (those listed by `httpd -l') do not need
# to be loaded here.
#
# Example:
# LoadModule foo_module modules/mod_foo.so
#
LoadModule actions_module modules/mod_actions.so
LoadModule alias_module modules/mod_alias.so
LoadModule asis_module modules/mod_asis.so
LoadModule auth_basic_module modules/mod_auth_basic.so
LoadModule auth_digest_module modules/mod_auth_digest.so
#LoadModule authn_alias_module modules/mod_authn_alias.so
#LoadModule authn_anon_module modules/mod_authn_anon.so
#LoadModule authn_dbd_module modules/mod_authn_dbd.so
#LoadModule authn_dbm_module modules/mod_authn_dbm.so
LoadModule authn_default_module modules/mod_authn_default.so
LoadModule authn_file_module modules/mod_authn_file.so
#LoadModule authnz_ldap_module modules/mod_authnz_ldap.so
#LoadModule authz_dbm_module modules/mod_authz_dbm.so
LoadModule authz_default_module modules/mod_authz_default.so
LoadModule authz_groupfile_module modules/mod_authz_groupfile.so
LoadModule authz_host_module modules/mod_authz_host.so
#LoadModule authz_owner_module modules/mod_authz_owner.so
LoadModule authz_user_module modules/mod_authz_user.so
LoadModule autoindex_module modules/mod_autoindex.so
#LoadModule cache_module modules/mod_cache.so
#LoadModule cern_meta_module modules/mod_cern_meta.so
LoadModule cgi_module modules/mod_cgi.so
#LoadModule charset_lite_module modules/mod_charset_lite.so
#LoadModule dav_module modules/mod_dav.so
#LoadModule dav_fs_module modules/mod_dav_fs.so
#LoadModule dav_lock_module modules/mod_dav_lock.so
#LoadModule dbd_module modules/mod_dbd.so
#LoadModule deflate_module modules/mod_deflate.so
LoadModule dir_module modules/mod_dir.so
#LoadModule disk_cache_module modules/mod_disk_cache.so
#LoadModule dumpio_module modules/mod_dumpio.so
LoadModule env_module modules/mod_env.so
#LoadModule expires_module modules/mod_expires.so
#LoadModule ext_filter_module modules/mod_ext_filter.so
#LoadModule file_cache_module modules/mod_file_cache.so
LoadModule filter_module modules/mod_filter.so
LoadModule headers_module modules/mod_headers.so
#LoadModule ident_module modules/mod_ident.so
LoadModule imagemap_module modules/mod_imagemap.so
LoadModule include_module modules/mod_include.so
LoadModule info_module modules/mod_info.so
LoadModule isapi_module modules/mod_isapi.so
#LoadModule ldap_module modules/mod_ldap.so
#LoadModule logio_module modules/mod_logio.so
LoadModule log_config_module modules/mod_log_config.so
#LoadModule log_forensic_module modules/mod_log_forensic.so
#LoadModule mem_cache_module modules/mod_mem_cache.so
LoadModule mime_module modules/mod_mime.so
LoadModule mime_magic_module modules/mod_mime_magic.so
LoadModule negotiation_module modules/mod_negotiation.so
#LoadModule proxy_module modules/mod_proxy.so
#LoadModule proxy_ajp_module modules/mod_proxy_ajp.so
#LoadModule proxy_balancer_module modules/mod_proxy_balancer.so
#LoadModule proxy_connect_module modules/mod_proxy_connect.so
#LoadModule proxy_ftp_module modules/mod_proxy_ftp.so
#LoadModule proxy_http_module modules/mod_proxy_http.so
#LoadModule proxy_scgi_module modules/mod_proxy_scgi.so
#LoadModule reqtimeout_module modules/mod_reqtimeout.so
LoadModule rewrite_module modules/mod_rewrite.so
LoadModule setenvif_module modules/mod_setenvif.so
#LoadModule speling_module modules/mod_speling.so
LoadModule ssl_module modules/mod_ssl.so
LoadModule status_module modules/mod_status.so
#LoadModule substitute_module modules/mod_substitute.so
#LoadModule unique_id_module modules/mod_unique_id.so
LoadModule userdir_module modules/mod_userdir.so
#LoadModule usertrack_module modules/mod_usertrack.so
#LoadModule version_module modules/mod_version.so
#LoadModule vhost_alias_module modules/mod_vhost_alias.so
<IfModule !mpm_netware_module>
<IfModule !mpm_winnt_module>
#
# If you wish httpd to run as a different user or group, you must run
# httpd as root initially and it will switch.  
#
# User/Group: The name (or #number) of the user/group to run httpd as.
# It is usually good practice to create a dedicated user and group for
# running httpd, as with most system services.
#
User daemon
Group daemon
</IfModule>
</IfModule>
# 'Main' server configuration
#
# The directives in this section set up the values used by the 'main'
# server, which responds to any requests that aren't handled by a
# <VirtualHost> definition.  These values also provide defaults for
# any <VirtualHost> containers you may define later in the file.
#
# All of these directives may appear inside <VirtualHost> containers,
# in which case these default settings will be overridden for the
# virtual host being defined.
#
#
# ServerAdmin: Your address, where problems with the server should be
# e-mailed.  This address appears on some server-generated pages, such
# as error documents.  e.g. admin@your-domain.com
#
ServerAdmin admin@example.com
#
# ServerName gives the name and port that the server uses to identify itself.
# This can often be determined automatically, but we recommend you specify
# it explicitly to prevent problems during startup.
#
# If your host doesn't have a registered DNS name, enter its IP address here.
#
#ServerName www.example.com: 80
#
# DocumentRoot: The directory out of which you will serve your
# documents. By default, all requests are taken from this directory, but
# symbolic links and aliases may be used to point to other locations.
#
DocumentRoot "C:\Program Files (x86)\Zend\Apache2/htdocs/public"
#
# Each directory to which Apache has access can be configured with respect
# to which services and features are allowed and/or disabled in that
# directory (and its subdirectories). 
#
# First, we configure the "default" to be a very restrictive set of 
# features.  
#
<Directory />
    Options FollowSymLinks
    AllowOverride None
    Order allow,deny
    Allow from all
</Directory>
#
# Note that from this point forward you must specifically allow
# particular features to be enabled - so if something's not working as
# you might expect, make sure that you have specifically enabled it
# below.
#
#
# This should be changed to whatever you set DocumentRoot to.
#
<Directory "C:\Program Files (x86)\Zend\Apache2/htdocs/">
    #
    # Possible values for the Options directive are "None", "All",
    # or any combination of:
    #   Indexes Includes FollowSymLinks SymLinksifOwnerMatch ExecCGI MultiViews
    #
    # Note that "MultiViews" must be named *explicitly* --- "Options All"
    # doesn't give it to you.
    #
    # The Options directive is both complicated and important.  Please see
    # http://httpd.apache.org/docs/2.2/mod/core.html#options
    # for more information.
    #
    Options Indexes FollowSymLinks
    #
    # AllowOverride controls what directives may be placed in .htaccess files.
    # It can be "All", "None", or any combination of the keywords:
    #   Options FileInfo AuthConfig Limit
    #
    AllowOverride None
    #
    # Controls who can get stuff from this server.
    #
    Order allow,deny
    Allow from all
</Directory>
#
# DirectoryIndex: sets the file that Apache will serve if a directory
# is requested.
#
<IfModule dir_module>
    DirectoryIndex index.php
</IfModule>
#
# The following lines prevent .htaccess and .htpasswd files from being 
# viewed by Web clients. 
#
<FilesMatch "^\.ht">
    Order allow,deny
    Deny from all
    Satisfy All
</FilesMatch>
#
# ErrorLog: The location of the error log file.
# If you do not specify an ErrorLog directive within a <VirtualHost>
# container, error messages relating to that virtual host will be
# logged here.  If you *do* define an error logfile for a <VirtualHost>
# container, that host's errors will be logged there and not here.
#
ErrorLog "logs/error.log"
#
# LogLevel: Control the number of messages logged to the error_log.
# Possible values include: debug, info, notice, warn, error, crit,
# alert, emerg.
#
LogLevel warn
<IfModule log_config_module>
    #
    # The following directives define some format nicknames for use with
    # a CustomLog directive (see below).
    #
    LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\"" combined
    LogFormat "%h %l %u %t \"%r\" %>s %b" common
    <IfModule logio_module>
      # You need to enable mod_logio.c to use %I and %O
      LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\" %I %O" combinedio
    </IfModule>
    #
    # The location and format of the access logfile (Common Logfile Format).
    # If you do not define any access logfiles within a <VirtualHost>
    # container, they will be logged here.  Contrariwise, if you *do*
    # define per-<VirtualHost> access logfiles, transactions will be
    # logged therein and *not* in this file.
    #
    CustomLog "logs/access.log" common
    #
    # If you prefer a logfile with access, agent, and referer information
    # (Combined Logfile Format) you can use the following directive.
    #
    #CustomLog "logs/access.log" combined
</IfModule>
<IfModule alias_module>
    #
    # Redirect: Allows you to tell clients about documents that used to 
    # exist in your server's namespace, but do not anymore. The client 
    # will make a new request for the document at its new location.
    # Example:
    # Redirect permanent /foo http://www.example.com/bar
    #
    # Alias: Maps web paths into filesystem paths and is used to
    # access content that does not live under the DocumentRoot.
    # Example:
    # Alias /webpath /full/filesystem/path
    #
    # If you include a trailing / on /webpath then the server will
    # require it to be present in the URL.  You will also likely
    # need to provide a <Directory> section to allow access to
    # the filesystem path.
    #
    # ScriptAlias: This controls which directories contain server scripts. 
    # ScriptAliases are essentially the same as Aliases, except that
    # documents in the target directory are treated as applications and
    # run by the server when requested rather than as documents sent to the
    # client.  The same rules about trailing "/" apply to ScriptAlias
    # directives as to Alias.
    #
    ScriptAlias /cgi-bin/ "C:\Program Files (x86)\Zend\Apache2/cgi-bin/"
</IfModule>
<IfModule cgid_module>
    #
    # ScriptSock: On threaded servers, designate the path to the UNIX
    # socket used to communicate with the CGI daemon of mod_cgid.
    #
    #Scriptsock logs/cgisock
</IfModule>
#
# "C:\Program Files (x86)\Zend\Apache2/cgi-bin" should be changed to whatever your ScriptAliased
# CGI directory exists, if you have that configured.
#
<Directory "C:\Program Files (x86)\Zend\Apache2/cgi-bin">
    AllowOverride None
    Options None
    Order allow,deny
    Allow from all
</Directory>
#
# DefaultType: the default MIME type the server will use for a document
# if it cannot otherwise determine one, such as from filename extensions.
# If your server contains mostly text or HTML documents, "text/plain" is
# a good value.  If most of your content is binary, such as applications
# or images, you may want to use "application/octet-stream" instead to
# keep browsers from trying to display binary files as though they are
# text.
#
DefaultType text/plain
<IfModule mime_module>
    #
    # TypesConfig points to the file containing the list of mappings from
    # filename extension to MIME-type.
    #
    TypesConfig conf/mime.types
    #
    # AddType allows you to add to or override the MIME configuration
    # file specified in TypesConfig for specific file types.
    #
    #AddType application/x-gzip .tgz
    #
    # AddEncoding allows you to have certain browsers uncompress
    # information on the fly. Note: Not all browsers support this.
    #
    #AddEncoding x-compress .Z
    #AddEncoding x-gzip .gz .tgz
    #
    # If the AddEncoding directives above are commented-out, then you
    # probably should define those extensions to indicate media types:
    #
    AddType application/x-compress .Z
    AddType application/x-gzip .gz .tgz
    #
    # AddHandler allows you to map certain file extensions to "handlers":
    # actions unrelated to filetype. These can be either built into the server
    # or added with the Action directive (see below)
    #
    # To use CGI scripts outside of ScriptAliased directories:
    # (You will also need to add "ExecCGI" to the "Options" directive.)
    #
    #AddHandler cgi-script .cgi
    # For type maps (negotiated resources):
    #AddHandler type-map var
    #
    # Filters allow you to process content before it is sent to the client.
    #
    # To parse .shtml files for server-side includes (SSI):
    # (You will also need to add "Includes" to the "Options" directive.)
    #
    #AddType text/html .shtml
    #AddOutputFilter INCLUDES .shtml
</IfModule>
#
# The mod_mime_magic module allows the server to use various hints from the
# contents of the file itself to determine its type.  The MIMEMagicFile
# directive tells the module where the hint definitions are located.
#
#MIMEMagicFile conf/magic
#
# Customizable error responses come in three flavors:
# 1) plain text 2) local redirects 3) external redirects
#
# Some examples:
#ErrorDocument 500 "The server made a boo boo."
#ErrorDocument 404 /missing.html
#ErrorDocument 404 "/cgi-bin/missing_handler.pl"
#ErrorDocument 402 http://www.example.com/subscription_info.html
#
#
# MaxRanges: Maximum number of Ranges in a request before
# returning the entire resource, or one of the special
# values 'default', 'none' or 'unlimited'.
# Default setting is to accept 200 Ranges.
#MaxRanges unlimited
#
# EnableMMAP and EnableSendfile: On systems that support it, 
# memory-mapping or the sendfile syscall is used to deliver
# files.  This usually improves server performance, but must
# be turned off when serving from networked-mounted 
# filesystems or if support for these functions is otherwise
# broken on your system.
#
#EnableMMAP off
#EnableSendfile off
# Supplemental configuration
#
# The configuration files in the conf/extra/ directory can be 
# included to add extra features or to modify the default configuration of 
# the server, or you may simply copy their contents here and change as 
# necessary.
# Server-pool management (MPM specific)
#Include conf/extra/httpd-mpm.conf
# Multi-language error messages
#Include conf/extra/httpd-multilang-errordoc.conf
# Fancy directory listings
#Include conf/extra/httpd-autoindex.conf
# Language settings
#Include conf/extra/httpd-languages.conf
# User home directories
#Include conf/extra/httpd-userdir.conf
# Real-time info on requests and configuration
#Include conf/extra/httpd-info.conf
# Virtual hosts
#Include conf/extra/httpd-vhosts.conf
# Local access to the Apache HTTP Server Manual
#Include conf/extra/httpd-manual.conf
# Distributed authoring and versioning (WebDAV)
#Include conf/extra/httpd-dav.conf
# Various default settings
#Include conf/extra/httpd-default.conf
# Secure (SSL/TLS) connections
#Include conf/extra/httpd-ssl.conf
#
# Note: The following must must be present to support
#       starting without SSL on platforms with no /dev/random equivalent
#       but a statically compiled-in mod_ssl.
#
<IfModule ssl_module>
SSLRandomSeed startup builtin
SSLRandomSeed connect builtin
</IfModule>
Include "conf/zend.conf"
#ZEND-{9BD5EE6FE55AAEB673025DBCB8F939C1}
NameVirtualHost *:80
<VirtualHost *:80>
#ZEND-{31CA0CA71184BBDB3DE7B20A51E88E90}
Include "C:\Program Files (x86)\Zend\ZendServer/etc/sites.d/zend-default-vhost-80.conf"
#ZEND-{31CA0CA71184BBDB3DE7B20A51E88E90}
</VirtualHost>
#ZEND-{9BD5EE6FE55AAEB673025DBCB8F939C1}
#ZEND-{2E92962C0B6996ADD9517E4242EA9BDC}
Include "C:\Program Files (x86)\Zend\ZendServer/etc/sites.d/globals-*.conf"
Include "C:\Program Files (x86)\Zend\ZendServer/etc/sites.d/vhost_*.conf"
#ZEND-{2E92962C0B6996ADD9517E4242EA9BDC} 
```

**整个 apache2\conf\zend.conf**

```
<Location /server-info>
    SetHandler server-info
    Order deny,allow
    Deny from all
    Allow from 127.0.0.1
</Location>

<Location /server-status>
    SetHandler server-status
    Order deny,allow
    Deny from all
    Allow from 127.0.0.1
</Location> 

LoadModule zend_enabler_module "C:\Program Files (x86)\Zend\ZendServer\bin\ZendEnablerApache.dll"
ZendEnablerConfig "C:\Program Files (x86)\Zend\ZendServer\etc\ZendEnablerConf.xml"
AddHandler zend-enabler-script .php 
AddType application/x-httpd-php .php   

<Location /phpMyAdmin>
  Order deny,allow
  Allow from all
</Location>

Alias /phpMyAdmin "__HTTPD_PHPMYADMIN_PATH__"

Listen 10081
AllowEncodedSlashes On
Win32DisableAcceptEx

NameVirtualHost *:10081
<VirtualHost *:10081>
Alias /ZendServer "C:\Program Files (x86)\Zend\ZendServer\gui\public"
DocumentRoot "C:\Program Files (x86)\Zend\ZendServer\gui\public"
RewriteEngine On 
RewriteRule ^/$ /ZendServer/ [R]
RewriteRule ^/Login$ /ZendServer/Login [R]
  <Directory "C:\Program Files (x86)\Zend\ZendServer\gui\public">
   AllowOverride All
   Allow from all
  </Directory>
</VirtualHost>

Listen 10083
NameVirtualHost 127.0.0.1:10083
<VirtualHost 127.0.0.1:10083>
CustomLog "C:\Program Files (x86)\Zend\Apache2\logs\access.log" common env=logme
Alias /UserServer "C:\Program Files (x86)\Zend\ZendServer\UserServer"
DocumentRoot "C:\Program Files (x86)\Zend\ZendServer\UserServer"
  <Directory "C:\Program Files (x86)\Zend\ZendServer\UserServer">
   AllowOverride All
   Allow from all
  </Directory>
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T20:17:30.197

使用此链接

[http://forums.zend.com/viewtopic.php?f=69&t=5886&p=199643#p199643](http://forums.zend.com/viewtopic.php?f=69&t=5886&p=199643#p199643)

解决方案是将所有 httpd AllowOverride 从 None 更改为 All。

# php - 使用 codeigniter 通过 cron 作业发送时事通讯

> ID：14943891
> 
> 赞同：0
> 
> 时间：2013-02-18T19:30:52.730
> 
> 标签：php, codeigniter, cron

我已经搜索了大约 2 小时关于 cron 作业和 codeigniter 的主题，我的问题是通过 cpanel 设置命令以每天发送时事通讯，我无法访问控制器及其功能。

我收到的邮件复制了我的索引页的所有代码..

我想我必须在索引处做一些路线，看看我使用的命令行：

```
php -q /home/xxx/public_html/index.php report send 
```

谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T05:25:11.687

试试这个......如果你想让一个特定的程序运行，比如说，每天上午 10.45 点运行一次，cron 计划的时间部分应该是这样的

```
45 10 * * * wget http://server_path/application/controller/method 
```

# file-io - fscanf QT 小部件 C++

> ID：14943893
> 
> 赞同：0
> 
> 时间：2013-02-18T19:31:02.970
> 
> 标签：file-io, scanf

我在读取相机参数文件时遇到了 fscanf 函数的问题。我正在使用 QT 4.7，编写 QT 小部件应用程序。执行第一个 fscanf 语句时出现分段错误。但是当我在控制台应用程序项目中执行代码时，它运行良好。

这是我的代码的一部分：

```
struct parametry_kamery
           {
            float cc[2],fc[2],alpha_c,kc[5];
            int D,al;
           };
    parametry_kamery kam_par;

void Widget::readParameters(parametry_kamery* kam_par)
{

 FILE *fi;
 char buf[255];
 float cc1=0,cc2=0;

 fi=fopen("Camera parameters.cfg", "r");

 if(!fi)
 {
  QMessageBox::information(this,tr("Can't read file"),tr("Error"));
  return;
 }

 while('\n'!=fgetc(fi));
 fscanf(fi,"%s %s %s %f %f",buf,buf,buf,&cc1,&cc2);

kam_par->fc[0] = cc1;
kam_par->fc[1] = cc2;

 fclose(fi);
} 
```

我正在调用函数 readParameters(&kam_par);

这是文件的内容：

```
Parametry_wewnętrzne_kamery
Focal_Length:                    fc =  1079.33793   1181.44679  ± [ 2.44878   2.52105]
Principal_point:                 cc =  378.95649   245.99109  ± [ 3.48032   2.99878 ]
Skew:                       alpha_c =  0.00000  ±  0.00000     => angle of pixel axes = 90.00000 ± 0.00000 degrees
Distortion:                      kc =  -0.13666   -0.01830   -0.00070   0.00134  0.00000 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T20:27:32.897

我更改了函数，现在它采用按值结构和返回结构，我知道它需要更多内存，但目前运行良好。我会尝试用指针修复版本。非常感谢您的帮助 Roku。

```
Widget::parametry_kamery Widget::readParameters(parametry_kamery kam_par)
{

 FILE *fi;
 char buf[255];

 fi=fopen("Camera parameters.cfg", "r");

 if(!fi)
 {
  QMessageBox::information(this,tr("Błąd odczytu pliku konfiguracyjnego"),tr("Error"));
  return parametry_kamery::parametry_kamery();
 }

 while('\n'!=fgetc(fi));

 fscanf(fi,"%s %s %s %f %f",buf,buf,buf,&kam_par.fc[0],&kam_par.fc[1]);

QMessageBox::information(this,buf,buf2);
 while('\n'!=fgetc(fi));
 fscanf(fi,"%s %s %s %f %f",buf,buf,buf,&kam_par.cc[0],&kam_par.cc[1]);

 while('\n'!=fgetc(fi));
 fscanf(fi,"%s %s %s %f",buf,buf,buf,&kam_par.alpha_c);

 while('\n'!=fgetc(fi));
 fscanf(fi,"%s %s %s %f %f %f %f %f",buf,buf,buf,&kam_par.kc[0],
       &kam_par.kc[1],&kam_par.kc[2],&kam_par.kc[3],&kam_par.kc[4]);

 while('\n'!=fgetc(fi));
 fscanf(fi,"%s %s %s %i",buf,buf,buf,&kam_par.D);

 while('\n'!=fgetc(fi));
 fscanf(fi,"%s %s %s %i",buf,buf,buf,&kam_par.al);

 fclose(fi);
 return kam_par;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T19:48:23.590

您的第一个 fscanf 正在读取 3 个字符串，然后是 2 个浮点数。但是您的文件似乎在 2 个浮点数之前以 4 个字符串开头。前 4 个字符串是：

```
Parametry_wewnętrzne_kamery
Focal_Length:
fc
= 
```

顺便说一句，当您使用 Qt 时，使用 Qt 的文件函数（QFile 和 QTextStream）和 QString 及其转换函数会容易得多（并且不易出错）。

# android - Android：不幸的是应用程序已停止

> ID：14943895
> 
> 赞同：0
> 
> 时间：2013-02-18T19:31:08.923
> 
> 标签：android, crash

我正在尝试制作一个使用加速度计的应用程序，但是当我运行我的应用程序时，它说不幸的是应用程序已停止。我有其他代码，但我删除了它，因为我认为它弄乱了代码，但事实并非如此。

这是代码

`

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Intent one = new Intent(getApplicationContext(), act.class);
    startActivity(one);

}

        }
          class act extends Activity implements SensorEventListener {
              Intent one = getIntent();
              private SensorManager sensorManager;
                private Sensor accelerometer;
             float x,y,z;   
             @Override
             public void onCreate(Bundle savedInstanceState) {
                    super.onCreate(savedInstanceState);

                    setContentView(R.layout.activity2);
                    sensorManager = (SensorManager) getSystemService(SENSOR_SERVICE);
                    accelerometer = sensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);
             }

             protected void onResume() {
                    super.onResume();
                    sensorManager.registerListener(this, accelerometer, SensorManager.SENSOR_DELAY_NORMAL);
                }
                protected void onPause() {
                    super.onPause();
                    sensorManager.unregisterListener(this);
                }

           @Override
           public void onAccuracyChanged(Sensor accelerometer, int accuracy) {
           }
             public void onSensorChanged(SensorEvent event) {

                    if (event.sensor.getType() == Sensor.TYPE_ACCELEROMETER) {

                        x = event.values[0];
                        y = event.values[1];
                        z = event.values[2];

                    }
                        }

             }` 
```

两个类都在同一个文件中

日志猫：

```
02-19 14:32:24.490: E/AndroidRuntime(7916): FATAL EXCEPTION: main
02-19 14:32:24.490: E/AndroidRuntime(7916): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.a3/com.example.a3.MainActivity}: android.content.ActivityNotFoundException: Unable to find explicit activity class {com.example.a3/com.example.a3.act}; have you declared this activity in your AndroidManifest.xml?
02-19 14:32:24.490: E/AndroidRuntime(7916):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
02-19 14:32:24.490: E/AndroidRuntime(7916):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
02-19 14:32:24.490: E/AndroidRuntime(7916):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
02-19 14:32:24.490: E/AndroidRuntime(7916):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
02-19 14:32:24.490: E/AndroidRuntime(7916):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-19 14:32:24.490: E/AndroidRuntime(7916):     at android.os.Looper.loop(Looper.java:137)
02-19 14:32:24.490: E/AndroidRuntime(7916):     at android.app.ActivityThread.main(ActivityThread.java:5039)
02-19 14:32:24.490: E/AndroidRuntime(7916):     at java.lang.reflect.Method.invokeNative(Native Method)
02-19 14:32:24.490: E/AndroidRuntime(7916):     at java.lang.reflect.Method.invoke(Method.java:511)
02-19 14:32:24.490: E/AndroidRuntime(7916):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-19 14:32:24.490: E/AndroidRuntime(7916):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-19 14:32:24.490: E/AndroidRuntime(7916):     at dalvik.system.NativeStart.main(Native Method)
02-19 14:32:24.490: E/AndroidRuntime(7916): Caused by: android.content.ActivityNotFoundException: Unable to find explicit activity class {com.example.a3/com.example.a3.act}; have you declared this activity in your AndroidManifest.xml?
02-19 14:32:24.490: E/AndroidRuntime(7916):     at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1618)
02-19 14:32:24.490: E/AndroidRuntime(7916):     at android.app.Instrumentation.execStartActivity(Instrumentation.java:1417)
02-19 14:32:24.490: E/AndroidRuntime(7916):     at android.app.Activity.startActivityForResult(Activity.java:3370)
02-19 14:32:24.490: E/AndroidRuntime(7916):     at android.app.Activity.startActivityForResult(Activity.java:3331)
02-19 14:32:24.490: E/AndroidRuntime(7916):     at android.app.Activity.startActivity(Activity.java:3566)
02-19 14:32:24.490: E/AndroidRuntime(7916):     at android.app.Activity.startActivity(Activity.java:3534)
02-19 14:32:24.490: E/AndroidRuntime(7916):     at com.example.a3.MainActivity.onCreate(MainActivity.java:32)
02-19 14:32:24.490: E/AndroidRuntime(7916):     at android.app.Activity.performCreate(Activity.java:5104)
02-19 14:32:24.490: E/AndroidRuntime(7916):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
02-19 14:32:24.490: E/AndroidRuntime(7916):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
02-19 14:32:24.490: E/AndroidRuntime(7916):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T19:56:46.010

您可能没有在清单中正确声明行为活动。在你的项目上运行 android lint，看看它是否告诉你发生了什么。或者在 Eclipse 中查看所有清单查看器选项卡（不仅仅是代码）中的清单文件，看看它是否给你红色警告。

# google-maps-api-3 - google map api v3 和 kml = zoom 不起作用

> ID：14943900
> 
> 赞同：1
> 
> 时间：2013-02-18T19:31:30.907
> 
> 标签：google-maps-api-3, zooming, kml

因此，我将 html 文件与 google map api v3 和另一个 kml 文件连接在一起。如果我从 html 中断开 kml 缩放工作。

这是一个示例：http://mini.hr/test.php

这是一个 html 代码示例：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">  
    <html xmlns="http://www.w3.org/1999/xhtml" xmlns:v="urn:schemas-microsoft-com:vml">  
    <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map_canvas { height: 100% }
    </style>
    <script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?key=******&sensor=false">
    </script>
    <script type="text/javascript">
      function initialize() {
        var myLatLng = new google.maps.LatLng(45.330963,14.44046);
        var mapOptions = {
            zoom: 16,
            center: myLatLng,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        }

    var map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
    //add KML
    var ctaLayer = new google.maps.KmlLayer('http://***/***.kml');
    ctaLayer.setMap(map);

    //var nyLayer = new google.maps.KmlLayer('http://***/***.kml',
    //{suppressInfoWindows: true});
    //nyLayer.setMap(map);
    }
    </script>
    </head>
  <body onload="initialize()">
    <div id="map_canvas" style="width:100%; height:100%"></div>
  </body>
  </html> 
```

这是kml文件：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <kml xmlns="http://www.opengis.net/kml/2.2" xmlns:gx="http://www.google.com/kml/ext/2.2" xmlns:kml="http://www.opengis.net/kml/2.2" xmlns:atom="http://www.w3.org/2005/Atom">
    <Folder>
    <name>Moja mjesta</name>
    <Style>
        <ListStyle>
            <listItemType>check</listItemType>
            <ItemIcon>
                <state>open</state>
                <href>:/mysavedplaces_open.png</href>
            </ItemIcon>
            <ItemIcon>
                <state>closed</state>
                <href>:/mysavedplaces_closed.png</href>
            </ItemIcon>
            <bgColor>00ffffff</bgColor>
            <maxSnippetLines>2</maxSnippetLines>
        </ListStyle>
    </Style>
    <Document>
        <name>Legend</name>
        <open>1</open>
        <Style id="Style10">
            <LineStyle>
                <color>7fffffff</color>
                <width>2</width>
            </LineStyle>
            <PolyStyle>
                <color>66938ab5</color>
            </PolyStyle>
        </Style>
        <StyleMap id="Style11">
            <Pair>
                <key>normal</key>
                <styleUrl>#Style10</styleUrl>
            </Pair>
            <Pair>
                <key>highlight</key>
                <styleUrl>#Style1</styleUrl>
            </Pair>
        </StyleMap>
        <Style id="Style1">
            <LineStyle>
                <color>7fffffff</color>
                <width>2</width>
            </LineStyle>
            <PolyStyle>
                <color>66938ab5</color>
            </PolyStyle>
        </Style>
        <Style id="Style12">
            <LineStyle>
                <color>7fffffff</color>
                <width>0.2</width>
            </LineStyle>
            <PolyStyle>
                <color>66938ab5</color>
                <outline>0</outline>
            </PolyStyle>
        </Style>
        <Style id="Style100">
            <LineStyle>
                <color>7fffffff</color>
                <width>0.2</width>
            </LineStyle>
            <PolyStyle>
                <color>66938ab5</color>
                <outline>0</outline>
            </PolyStyle>
        </Style>
        <StyleMap id="Style110">
            <Pair>
                <key>normal</key>
                <styleUrl>#Style100</styleUrl>
            </Pair>
            <Pair>
                <key>highlight</key>
                <styleUrl>#Style12</styleUrl>
            </Pair>
        </StyleMap>
        <Folder>
            <name>MJESNI_ODBORI</name>
            <open>1</open>
            <Placemark>
                <name>Zamet</name>
                <styleUrl>#Style11</styleUrl>
                <Polygon>
                    <outerBoundaryIs>
                        <LinearRing>
                            <coordinates>
                                ***
                            </coordinates>
                        </LinearRing>
                    </outerBoundaryIs>
                </Polygon>
            </Placemark>
            <Placemark>
                <name>Sveti Nikola</name>
                <styleUrl>#Style11</styleUrl>
                <Polygon>
                    <outerBoundaryIs>
                        <LinearRing>
                            <coordinates>
                                ***
                            </coordinates>
                        </LinearRing>
                    </outerBoundaryIs>
                </Polygon>
            </Placemark>
            <Placemark>
                <name>Mlaka</name>
                <styleUrl>#Style11</styleUrl>
                <Polygon>
                    <outerBoundaryIs>
                        <LinearRing>
                            <coordinates>
                                ***
                            </coordinates>
                        </LinearRing>
                    </outerBoundaryIs>
                </Polygon>
            </Placemark>
            <Placemark>
                <name>Potok</name>
                <styleUrl>#Style11</styleUrl>
                <Polygon>
                    <outerBoundaryIs>
                        <LinearRing>
                            <coordinates>
                                ***
                            </coordinates>
                        </LinearRing>
                    </outerBoundaryIs>
                </Polygon>
            </Placemark>
            <Placemark>
                <name>Turnić</name>
                <styleUrl>#Style11</styleUrl>
                <Polygon>
                    <outerBoundaryIs>
                        <LinearRing>
                            <coordinates>
                                ***
                            </coordinates>
                        </LinearRing>
                    </outerBoundaryIs>
                </Polygon>
            </Placemark>
            <Placemark>
                <name>Podmurvice</name>
                <styleUrl>#Style11</styleUrl>
                <Polygon>
                    <outerBoundaryIs>
                        <LinearRing>
                            <coordinates>
                                ***
                            </coordinates>
                        </LinearRing>
                    </outerBoundaryIs>
                </Polygon>
            </Placemark>
            <Placemark>
                <name>Banderovo</name>
                <styleUrl>#Style11</styleUrl>
                <Polygon>
                    <outerBoundaryIs>
                        <LinearRing>
                            <coordinates>
                                ***
                            </coordinates>
                        </LinearRing>
                    </outerBoundaryIs>
                </Polygon>
            </Placemark>
            <Placemark>
                <name>Škurinjska Draga</name>
                <styleUrl>#Style11</styleUrl>
                <Polygon>
                    <outerBoundaryIs>
                        <LinearRing>
                            <coordinates>
                                ***
                            </coordinates>
                        </LinearRing>
                    </outerBoundaryIs>
                </Polygon>
            </Placemark>
            <Placemark>
                <name>Kantrida</name>
                <styleUrl>#Style11</styleUrl>
                <Polygon>
                    <outerBoundaryIs>
                        <LinearRing>
                            <coordinates>
                                ***
                            </coordinates>
                        </LinearRing>
                    </outerBoundaryIs>
                </Polygon>
            </Placemark>
            <Placemark>
                <name>Grbci</name>
                <styleUrl>#Style11</styleUrl>
                <Polygon>
                    <outerBoundaryIs>
                        <LinearRing>
                            <coordinates>
                                ***
                            </coordinates>
                        </LinearRing>
                    </outerBoundaryIs>
                </Polygon>
            </Placemark>
            <Placemark>
                <name>Srdoči</name>
                <styleUrl>#Style11</styleUrl>
                <Polygon>
                    <outerBoundaryIs>
                        <LinearRing>
                            <coordinates>
                                ***
                            </coordinates>
                        </LinearRing>
                    </outerBoundaryIs>
                </Polygon>
            </Placemark>
            <Placemark>
                <name>Gornji Zamet</name>
                <styleUrl>#Style11</styleUrl>
                <Polygon>
                    <outerBoundaryIs>
                        <LinearRing>
                            <coordinates>
                                ***
                            </coordinates>
                        </LinearRing>
                    </outerBoundaryIs>
                </Polygon>
            </Placemark>
            <Placemark>
                <name>Pehlin</name>
                <styleUrl>#Style11</styleUrl>
                <Polygon>
                    <outerBoundaryIs>
                        <LinearRing>
                            <coordinates>
                                ***
                            </coordinates>
                        </LinearRing>
                    </outerBoundaryIs>
                </Polygon>
            </Placemark>
            <Placemark>
                <name>Škurinje</name>
                <styleUrl>#Style11</styleUrl>
                <Polygon>
                    <outerBoundaryIs>
                        <LinearRing>
                            <coordinates>
                                ***
                            </coordinates>
                        </LinearRing>
                    </outerBoundaryIs>
                </Polygon>
            </Placemark>
            <Placemark>
                <name>Drenova</name>
                <styleUrl>#Style11</styleUrl>
                <Polygon>
                    <outerBoundaryIs>
                        <LinearRing>
                            <coordinates>
                                ***
                            </coordinates>
                        </LinearRing>
                    </outerBoundaryIs>
                </Polygon>
            </Placemark>
            <Placemark>
                <name>Luka</name>
                <styleUrl>#Style11</styleUrl>
                <Polygon>
                    <outerBoundaryIs>
                        <LinearRing>
                            <coordinates>
                                ***
                            </coordinates>
                        </LinearRing>
                    </outerBoundaryIs>
                </Polygon>
            </Placemark>
            <Placemark>
                <name>Pećine</name>
                <styleUrl>#Style11</styleUrl>
                <Polygon>
                    <outerBoundaryIs>
                        <LinearRing>
                            <coordinates>
                                ***
                            </coordinates>
                        </LinearRing>
                    </outerBoundaryIs>
                </Polygon>
            </Placemark>
            <Placemark>
                <name>Krimeja</name>
                <styleUrl>#Style11</styleUrl>
                <Polygon>
                    <outerBoundaryIs>
                        <LinearRing>
                            <coordinates>
                                ***
                            </coordinates>
                        </LinearRing>
                    </outerBoundaryIs>
                </Polygon>
            </Placemark>
            <Placemark>
                <name>Vojak</name>
                <styleUrl>#Style11</styleUrl>
                <Polygon>
                    <outerBoundaryIs>
                        <LinearRing>
                            <coordinates>
                                ***
                            </coordinates>
                        </LinearRing>
                    </outerBoundaryIs>
                </Polygon>
            </Placemark>
            <Placemark>
                <name>Podvežica</name>
                <styleUrl>#Style11</styleUrl>
                <Polygon>
                    <outerBoundaryIs>
                        <LinearRing>
                            <coordinates>
                                ***
                            </coordinates>
                        </LinearRing>
                    </outerBoundaryIs>
                </Polygon>
            </Placemark>
            <Placemark>
                <name>Gornja Vežica</name>
                <styleUrl>#Style11</styleUrl>
                <Polygon>
                    <outerBoundaryIs>
                        <LinearRing>
                            <coordinates>
                                ***
                            </coordinates>
                        </LinearRing>
                    </outerBoundaryIs>
                </Polygon>
            </Placemark>
            <Placemark>
                <name>Brajda-Dolac</name>
                <styleUrl>#Style11</styleUrl>
                <Polygon>
                    <outerBoundaryIs>
                        <LinearRing>
                            <coordinates>
                                ***
                            </coordinates>
                        </LinearRing>
                    </outerBoundaryIs>
                </Polygon>
            </Placemark>
            <Placemark>
                <name>Belveder</name>
                <styleUrl>#Style11</styleUrl>
                <Polygon>
                    <outerBoundaryIs>
                        <LinearRing>
                            <coordinates>
                                ***
                            </coordinates>
                        </LinearRing>
                    </outerBoundaryIs>
                </Polygon>
            </Placemark>
            <Placemark>
                <name>Školjić</name>
                <styleUrl>#Style11</styleUrl>
                <Polygon>
                    <outerBoundaryIs>
                        <LinearRing>
                            <coordinates>
                                ***
                            </coordinates>
                        </LinearRing>
                    </outerBoundaryIs>
                </Polygon>
            </Placemark>
            <Placemark>
                <name>Centar-Sušak</name>
                <styleUrl>#Style11</styleUrl>
                <Polygon>
                    <outerBoundaryIs>
                        <LinearRing>
                            <coordinates>
                                ***
                            </coordinates>
                        </LinearRing>
                    </outerBoundaryIs>
                </Polygon>
            </Placemark>
            <Placemark>
                <name>Bulevard</name>
                <styleUrl>#Style11</styleUrl>
                <Polygon>
                    <outerBoundaryIs>
                        <LinearRing>
                            <coordinates>
                                ***
                            </coordinates>
                        </LinearRing>
                    </outerBoundaryIs>
                </Polygon>
            </Placemark>
            <Placemark>
                <name>Kozala</name>
                <styleUrl>#Style11</styleUrl>
                <Polygon>
                    <outerBoundaryIs>
                        <LinearRing>
                            <coordinates>
                                ***
                            </coordinates>
                        </LinearRing>
                    </outerBoundaryIs>
                </Polygon>
            </Placemark>
            <Placemark>
                <name>Grad Trsat</name>
                <styleUrl>#Style11</styleUrl>
                <Polygon>
                    <outerBoundaryIs>
                        <LinearRing>
                            <coordinates>
                                ***
                            </coordinates>
                        </LinearRing>
                    </outerBoundaryIs>
                </Polygon>
            </Placemark>
            <Placemark>
                <name>Orehovica</name>
                <styleUrl>#Style11</styleUrl>
                <Polygon>
                    <outerBoundaryIs>
                        <LinearRing>
                            <coordinates>
                                ***
                            </coordinates>
                        </LinearRing>
                    </outerBoundaryIs>
                </Polygon>
            </Placemark>
            <Placemark>
                <name>Draga</name>
                <styleUrl>#Style11</styleUrl>
                <Polygon>
                    <outerBoundaryIs>
                        <LinearRing>
                            <coordinates>
                                ***
                            </coordinates>
                        </LinearRing>
                    </outerBoundaryIs>
                </Polygon>
            </Placemark>
            <Placemark>
                <name>Sveti Kuzam</name>
                <styleUrl>#Style11</styleUrl>
                <Polygon>
                    <outerBoundaryIs>
                        <LinearRing>
                            <coordinates>
                                ***
                            </coordinates>
                        </LinearRing>
                    </outerBoundaryIs>
                </Polygon>
            </Placemark>
            <Placemark>
                <name>Brašćine-Pulac</name>
                <styleUrl>#Style11</styleUrl>
                <Polygon>
                    <outerBoundaryIs>
                        <LinearRing>
                            <coordinates>
                                ***
                            </coordinates>
                        </LinearRing>
                    </outerBoundaryIs>
                </Polygon>
            </Placemark>
            <Placemark>
                <name>Pašac</name>
                <styleUrl>#Style11</styleUrl>
                <Polygon>
                    <outerBoundaryIs>
                        <LinearRing>
                            <coordinates>
                                ****
                            </coordinates>
                        </LinearRing>
                    </outerBoundaryIs>
                </Polygon>
            </Placemark>
            <Placemark>
                <name>Svilno</name>
                <styleUrl>#Style11</styleUrl>
                <Polygon>
                    <outerBoundaryIs>
                        <LinearRing>
                            <coordinates>
                                ***
                            </coordinates>
                        </LinearRing>
                    </outerBoundaryIs>
                </Polygon>
            </Placemark>
        </Folder>
    </Document>
        </Folder>
        </kml> 
```

希望有人能弄清楚我的缩放问题在哪里:) tnx

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T19:55:13.250

将[**`preserveViewport`**](https://developers.google.com/maps/documentation/javascript/reference?hl=en#KmlLayerOptions)两个 KML 层的 -option 设置为`true`

# matlab - 难以捉摸的 Matlab 变量语法错误

> ID：14943906
> 
> 赞同：0
> 
> 时间：2013-02-18T19:32:10.043
> 
> 标签：matlab, variables, vector

`u`和`v`应该`r`是向量。

```
function [g] = kast(m,k,u,v,n)
g = 9.80;
t = 0:0.1:n;
r = [u.*(m/k).*(1-exp(-k.*t./m),((-m*g/k).*t) + (v.*(m/k).+m^2*g/k^2).*( 1.-exp(-k.*t./m)))];

plot(t,r)
end 
```

我已经花了大约一个小时，但我无法弄清楚出了什么问题。你们中的任何人都能发现我的错误吗？

感谢您的时间。

亲切的问候，马吕斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T19:36:21.997

```
.+m^2 
```

看起来很可疑。尝试删除`+`. 并在 . 的赋值中的逗号前添加一个右括号`r`。

# css - 100% 宽度的 div 内的 CSS 中心 ul 列表

> ID：14943907
> 
> 赞同：0
> 
> 时间：2013-02-18T19:32:10.950
> 
> 标签：css, html-lists

我觉得好像我已经尝试了从`text-align center`相对`margin:0 auto`位置和宽度为 100% 的所有东西，但是它们没有用，我试图将我的 UL 放在 div 内...

这是我的代码

```
<style type="text/css">

.header {
  height: 40px;
  background: #000;
  width: 100%;
}

.header ul {
  list-style-type: none;
}

.header li {
  float: left;
  line-height: 40px;
}

.header li a {
  color: #FFF;
  padding: 0 18px;
  height: 40px;
}

</style> 
```

```
<div class="header">
  <ul>
    <li><a href="#">Home</a></li>
    <li><a href="#">About</a></li>
    <li><a href="#">Gallery</a></li>
    <li><a href="#">Services</a></li>
    <li><a href="#">Rates</a></li>
    <li><a href="#">Reviews</a></li>
    <li><a href="#">FAQ</a></li>
    <li><a href="#">Contact</a></li>
  </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-06-25T15:19:57.943

这无需定义设置宽度即可工作。

```
ul {
    display: table;
    margin: 0 auto;
} 
```

如果您想摆脱左侧填充，从而真正使列表居中，请添加：

```
padding-left: 0; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-18T19:35:56.563

这应该会为您解决。

```
ul {
    display: inline-block;
    margin: 0 auto;
} 
```

如果这对你不起作用，那么给 UL 一个设定的宽度，即

```
ul {
    width: 300px;
    margin: 0 auto;
} 
```

# go - Go fork/exec 权限被拒绝错误

> ID：14943917
> 
> 赞同：15
> 
> 时间：2013-02-18T19:32:44.380
> 
> 标签：go

我最近使用 CentOS 6.3 在我们的服务器上安装了 Go。安装似乎很顺利。但是，我制作了一个测试“hello world”脚本，当我运行时，我得到以下输出。

```
fork/exec /tmp/go-build967564990/command-line-arguments/_obj/a.out: permission denied 
```

现在运行 go env 或其他 go 命令似乎可以工作。起初我认为这是一个权限问题，但是以 root 用户身份运行我得到了同样的结果。一个

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-10-22T18:20:47.790

我今天遇到了这个问题，但上面的解决方案不起作用。我通过简单地运行来修复：

```
$ export TMPDIR=~/tmp/ 
```

然后我能够让脚本运行：

```
$ go run hello.go
hello, world 
```

唯一的缺点是`export TMPDIR`每次要运行应用程序时都必须运行。

向[亚当·戈福斯致敬](http://definingterms.com/2012/07/25/go-tools-with-tmpfs/)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-02-18T19:48:48.303

只是猜测：出于安全原因，您的 nix 可能会禁用在 /tmp 中执行程序。它可能在 CentOS 中是可配置的，但我不知道。

另一种解决方案：您似乎正在尝试`go run`执行 Go 程序（它就像 C 是脚本一样的脚本）。尝试（假设`$GOPATH=~`，简单的可能性）而不是正常的构建，即而不是

```
me:~/src/foo$ go run main.go 
```

尝试

```
me:~/src/foo$ go build # main.go should not be necessary here
me:~/src/foo$ ./foo 
```

这种方法仍将使用 /tmp-whatever 创建二进制文件 IIRC，但它不会尝试从那里执行它。

PS：*不要*以root身份运行这些命令。无需正确设置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-03-03T09:01:19.277

我正在使用 Fedora 31 并遇到了类似的错误，导致我来到这里。我无法运行 Jetbrains IntelliJ Ultimate/GoLand 使用的 Go 调试器而没有出现`fork/exec`&`permission denied`错误。解决方案是这样的：

```
setsebool deny_ptrace 0 
```

有关详细信息，请参阅[https://fedoraproject.org/wiki/Features/SELinuxDenyPtrace](https://fedoraproject.org/wiki/Features/SELinuxDenyPtrace)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-29T10:25:46.073

为了[在我的 Chromebook 上解决这个问题，我](http://blog.dantup.com/2016/05/go-on-a-chromebook-without-linux/)刚刚重新安装`/tmp`为可执行文件。这样做可能会带来安全隐患，但由于`go run`可以在其他平台上工作，我认为这可能还不错（尤其是在本地开发机器上）：

```
sudo mount -i -o remount,exec /tmp/ 
```

我将此添加到我的`.bash_profile`脚本中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-17T06:36:42.087

exec.Command 返回这个结构：输入 Cmd

标准评论：</p>

```
// Dir specifies the working directory of the command.  
// If Dir is the empty string, Run runs the command in the
// calling process's current directory.
Dir string 
```

所以解决，您可以将 exec cmd 的路径传递给 exec 自己的命令：

```
cmd := exec.Command(xxxxx)
cmd.Dir = xxxxPath 
```

然后你可以调用 Run() 或其他 Output() 函数

* * *

## 回答 #6

> 赞同：-4
> 
> 时间：2013-07-13T23:55:27.713

考虑尝试：

```
sudo mount -o remount exec /tmp 
```

# c# - 如何在 C# 中清除 WinForm 上的所有文本框、组合框和 DateTimePicker？

> ID：14943920
> 
> 赞同：0
> 
> 时间：2013-02-18T19:32:58.673
> 
> 标签：c#, winforms, combobox, textbox, datetimepicker

我在 VS 2012 中使用 C# 和 WinForms 为我的应用程序工作，我很好奇我应该使用什么样的例程来清除所有输入数据的方法，包括文本框、组合框和日期时间选择器。我用谷歌搜索并找到了一些“答案”，但似乎没有一个有效或实际上证明有帮助。

[编辑]：

我一直在研究，实际上发现了一个有用的方法，我只需要添加一些 ifs 就可以得到我想要的：

```
private void ResetFields()
    {
        foreach (Control ctrl in this.Controls)
        {
            if (ctrl is TextBox)
            {
                TextBox tb = (TextBox)ctrl;
                if (tb != null)
                {
                    tb.Text = string.Empty;
                }
            }
            else if (ctrl is ComboBox)
            {
                ComboBox dd = (ComboBox)ctrl;
                if (dd != null)
                {
                    dd.Text = string.Empty;
                    dd.SelectedIndex = -1;
                }
            }
            else if (ctrl is DateTimePicker)
            {
                DateTimePicker dtp = (DateTimePicker)ctrl;
                if (dtp != null)
                {
                    dtp.Text = DateTime.Today.ToShortDateString();
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T19:42:12.587

*像*这样的东西：

```
void ClearThem(Control ctrl)
{
    ctrl.Text = "";
    foreach (Control childCtrl in ctrl.Controls) ClearThem(childCtrl);
} 
```

进而：

```
ClearThem(this); 
```

**另一种选择：** 创建一个派生自 Panel 的类，其中包含您需要的所有内容，并将其停靠在 Form 中。当您需要“刷新”时 - 只需将该面板替换为该面板的新实例即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T19:36:32.687

您可以循环输入表单的所有控件并根据控件类型清除

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T19:41:08.007

我们可以清除所有`Textboxes`，`Comboboxes`但不是`DateTimePicker`

如果要清除，则`DateTimePicker`必须设置属性： `Format = Custom`，`CustomFormat = " "`以及要在其中选择日期的时间`DateTimePicker`

```
 private void dateTimePicker1_CloseUp(object sender, EventArgs e)
    {
        dateTimePicker1.Format = DateTimePickerFormat.Short;
    } 
```

这可能是解决方案：

```
 public static void ClearAll(Control control)
    {
        foreach (Control c in control.Controls)
        {
            var texbox = c as TextBox;
            var comboBox = c as ComboBox;
            var dateTimePicker = c as DateTimePicker;

            if (texbox != null)
                texbox.Clear();
            if (comboBox != null)
                comboBox.SelectedIndex = -1;
            if (dateTimePicker != null)
            {
                dateTimePicker.Format = DateTimePickerFormat.Short;
                dateTimePicker.CustomFormat = " ";
            }
            if (c.HasChildren)
                ClearAll(c);
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T19:36:16.347

循环遍历表单控件，将它们与您的类型匹配并将其设置为 "" 或 null；

# grails - grails：插件中的插件是否“迁移”到项目级别的插件？

> ID：14943924
> 
> 赞同：0
> 
> 时间：2013-02-18T19:33:11.027
> 
> 标签：grails, plugins

我们有一个名为*Subscriber*的插件。在它的插件中是*build-info*插件。我们可以使用 run-app 运行应用程序并测试订阅者。我们进一步将订阅者定义为我们*主*项目的插件。

令我惊讶的是`build-info`， , 插件出现在 Main 的插件列表中。我预计它会被订阅者“封闭”，并且不会立即在 Main 中可见。这是插件插件的明显“迁移”吗？应该发生什么？

我在工作区中搜索了所有“* .groovy”文件中*构建信息的参考。*它仅出现在两个地方（通过 .link_to_grails_plugins）：1\. Main 中的*build-info*插件，以及 2\. 再次，在 Subscriber 中。因此，我们在 Main 中没有任何意外的、直接的对*build-info的引用。*

build-info 插件存在于`$user_home$\.grails\projects\`Subscriber *\plugins*和*Main\plugins*中。

一切都是应该的吗？

约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T19:52:31.210

如果您在插件中将 build-info 声明为依赖项，则默认情况下订阅者工作**需要build-info。**

您可以在依赖项声明中更改此行为。如果您不想导出它，只需设置：

```
plugins {
  runtime(':theplugin:version') {
    export = false
  }
} 
```

# html - 如何更改下拉列表中选项值的颜色

> ID：14943933
> 
> 赞同：1
> 
> 时间：2013-02-18T19:33:28.740
> 
> 标签：html, css

我有一个显示数据库值的下拉列表，我想对下拉列表中的值进行颜色编码。我已经设法在 Windows 机器上的浏览器中做到这一点，但我无法更改 Mac 上显示的颜色。有办法解决这个问题吗？

```
<select id="advice_asked" class="dropdown"  name="advice_asked">
     <option value="">Please Select</option>
           <?while($row = mysqli_fetch_assoc($result)){
              if($row['responded'] == 0){
                    $colour = '#63BDFD';
               }else if(($row['response_userID'] == $row['question_userID'])&&($row['response_responded'] == 0)){
                    $colour = '#F68634';
            }?>                     
     <option style="color:<? echo $colour; ?>" value="<? echo $row['questionID']; ?>">
      <? echo $row['questionDesc']; ?> ( Created: <? echo date('d-m-Y', strtotime($row['dateAsked'])); ?>)
     </option>';
        <? } ?>
</select> 
```

下拉类是

```
.dropdown{
    -webkit-appearance:none;
} 
```

这已经删除了下拉菜单的大部分样式，但没有删除颜色。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T19:43:46.407

有一些插件，如[Select2](http://ivaynberg.github.com/select2/)或[Uniform](http://uniformjs.com/)可以帮助您进行造型`<select>`

# css - 如何识别何时适合编写 CSS

> ID：14943935
> 
> 赞同：-4
> 
> 时间：2013-02-18T19:33:37.813
> 
> 标签：css, wordpress, class, html, rules

我正在处理 wordpress 主题安装中的自定义 CSS 文件。

在 CSS 中，有时我需要识别诸如“.example”之类的内容，有时必须将其显示为“#example”，而有时可以将其保留为“示例”。

有人可以澄清规则以及我如何区分和决定将来在每种情况下使用哪个规则吗？

这可能与 div id 和类有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T19:36:52.030

没有 100% 的规则，但通常：

An`id`必须是唯一的，因此应用于 ID 的任何样式仅可用于页面上的一个元素。因此，通常按类而不是 ID 来设置样式更有意义，因为大多数时候您会想要重用您的样式。此外，由于 id 的劫持特异性，使用 ID 使得以后更难覆盖样式。

我什至更进一步，因为任何东西都不应该由 ID 设置样式，而应该始终按类设置样式。我偶尔会做的一个例外是基于`body`标签 id 的页面级范围。但即便如此，一个类也同样有用。

我建议阅读[OOCSS](https://github.com/stubbornella/oocss/wiki/faq)（注意：我不使用任何用于说明示例的文件 - 我仅参考常见问题解答）

# asp.net - asp.net 页面不返回 ajax 请求

> ID：14943937
> 
> 赞同：0
> 
> 时间：2013-02-18T19:33:44.227
> 
> 标签：asp.net, ajax

我正在尝试从 ASP.NET Gridview 行发送 AJAX 请求。网格视图中的每一行都显示已完成的作业。某些作业具有可以下载的文件。这里的最终目标是在颜色框叠加层中显示下载 url，但我现在无法将文件列表返回到基本页面。为了显示有要从订单下载的文件，我在订单号列中取消隐藏按钮控件。页面上的Javascript如下。

```
 $(document).ready(function () {
    $("#<%=gvMessenger.ClientID%> input").filter(":not(:has(table, th))").click(function (e) {

        e.preventDefault();
         var $cell = $(e.target).closest("td");
        //$("#<%=gvMessenger.ClientID%> td").removeClass("highlight"); $cell.addClass("highlight"); $("#message").text('You have selected: ' + $cell.text());
        $("#Message").html("");

        var orderID = $cell.text()
        orderID = $.trim(orderID);
        sendData(orderID);
        function sendData(orderID) {
            var loc = window.location.href;
            loc = (loc.substr(loc.length - 1, 1) == "/") ?
            loc + "CompletedOrdersNew.aspx" : loc;
            $.ajax({
                type: "POST",
                url: loc + "/GetFiles",
                data: "{'orderID':'" + orderID + "'}",
                contentType: "application/jason; charset=utf-8",
                datatype: "json",
                success: function (msg) {
                    $("ContentArea").html(msg.d);
                },
                error: function () {
                    alert("An error occured in getting your files.");
                }
            });
        }
    });
}); 
```

应在 ajax 请求上触发的页面代码隐藏函数如下所示。

```
 <WebMethod()> _
Public Shared Function GetFiles(ByRef orderID As Integer) As String
    Dim dict As New Dictionary(Of String, Object)
    Dim dt As DataTable
    dt = Dac.ExecuteDataTable("GetS3Files", Parameter("@OrderID", orderID))
    Dim arrr(dt.Rows.Count) As Object

    For i As Integer = 0 To dt.Rows.Count - 1
        arrr(i) = dt.Rows(i).ItemArray
    Next

    Dim json As New JavaScriptSerializer
    Return json.Serialize(dict)

End Function 
```

在 FireBug 中观看页面时，我看到请求以 orderID 号 {'orderID':'10000315'} 发送到 GetFiles 函数

```
POST http://localhost:57210/AMSSite/Customer/CompletedOrdersNew.aspx/GetFiles 
```

但是调用不会触发 GetFiles 函数，我得到的响应是页面 html。

不知道这里发生了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T19:36:54.267

尝试`orderID`以数字形式发送，因为您的 webmethod 需要一个 int，在 JSON 中，键和字符串也用双引号 ( `"`)引用

```
data: "{\"orderID\":" + orderID + "}", 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T20:03:02.783

你在`contentType`选项中打错了。应该：`contentType: "application/json; charset=utf-8"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T04:42:43.283

为了其他遇到此问题的 VB.NET/ASP.NET 人员，我将回答我的问题。除了我的拼写错误之外，这里的问题是我的 WebMethod 函数是 ByRef。它需要是**BYVAL**。在把我的头撞到墙上并阅读了一些关于 javascript 和 json 服务的好东西之后，我在[http://projectsmm.com/technet/asp/index.shtml](http://projectsmm.com/technet/asp/index.shtml)找到了真正的答案。VB.Net 默认将函数变量设置为 ByRef。出于某种原因，.NET Web 服务不接受这一点。更改为 ByVal 即可。

希望这可以帮助其他人不要花我看这个的时间。

# php - 使用 PHP SDK 注销 Facebook？

> ID：14943946
> 
> 赞同：0
> 
> 时间：2013-02-18T19:34:25.543
> 
> 标签：php, facebook, sdk, logout

这个例子实际上是从 Facebook 复制的。

当我访问该页面时，行为很奇怪：“登录”首先似乎工作正常。然后它会显示“注销”链接。但是当我点击它时，我再次得到完全相同的屏幕，再次出现“注销”链接。刷新也进入同一屏幕。

但是，与 Facebook 核对，它确实让我退出了。

如果我关闭浏览器并重新打开它，“登录”现在会正确显示。

```
<?php

require 'facebook.php';

$facebook = new Facebook(array(
  'appId' => 'xxxxxxxxxxxxxxx',
  'secret' => 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx',
));

$user = $facebook->getUser();

if ($user) {
  try {
    $user_profile = $facebook->api('/me');
  } catch (FacebookApiException $e) {
    error_log($e);
    $user = null;
  }
}

if ($user) {
  $params = array( 'next' => 'http://xxxxxxxxxx' );
  $logoutUrl = $facebook->getLogoutUrl($params);
} else {
  $params = array( 'redirect_uri' => 'http://xxxxxxxxxx' );
  $loginUrl = $facebook->getLoginUrl($params);
}

?>

<!doctype html>
<html>
  <head></head>
  <body>

    <?php if ($user): ?>
      <a href="<?php echo $logoutUrl; ?>">Logout</a>
    <?php else: ?>
      <a href="<?php echo $loginUrl; ?>">Login with Facebook</a>
    <?php endif ?>

    <?php if ($user): ?>
      Picture = <img src="https://graph.facebook.com/<?php echo $user; ?>/picture">
      User Object = <?php print_r($user_profile); ?>
    <?php else: ?>
      User is not Connected.
    <?php endif ?>

  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-10T19:03:58.063

```
$past = time() - 3600;
foreach ( $_COOKIE as $key => $value )
{
    setcookie( $key, $value, $past, '/' );
} 
```

你可以试试这段代码。它只会销毁从您的站点保存的所有 cookie。它为我工作..！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-10T10:34:43.697

创建一个文件 logout.php

```
<?php 
session_start();            //start session
$_SESSION = array();    //clear session array
 session_destroy();      //destroy session
?>
<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Log Out</title>
</head>

<body>
<p>You have successfully logged out!</p>
<p>Return to the <a href="....index.php">Home</a> page</p>

</body>
</html> 
```

并更改您检查用户状态的代码

```
if ($user) { 
    $params = array( 'next' => 'http://....../logout.php' );
    $logoutUrl = $facebook->getLogoutUrl($params);
} else {
  $loginUrl = $facebook->getLoginUrl();
} 
```

使用 $logoutUrl 注销用户。

```
<?php if ($user): ?>
<?php echo "Welcome, ".$me['first_name']. " " .$me['last_name']   ." <br />";
      echo "Id: " . $me['id'] ." <br />";  ?>

<a href="<?php echo $logoutUrl; ?>">  Logout </a> <br />

<?php else: ?>
  <a href="<?php echo $loginUrl; ?>"> 

   <img src="http://static.ak.fbcdn.net/rsrc.php/zB6N8/hash/4li2k73z.gif"> </a>  
 <?php endif ?> 
```

希望它能正常工作

# modelica - 在 Modelica (SystemModeler) 中生成白噪声

> ID：14943950
> 
> 赞同：7
> 
> 时间：2013-02-18T19:34:33.827
> 
> 标签：modelica, systemmodeler

我正在尝试将测量噪声添加到模拟中。这在例如 Simulink 中是可能的，但在 Modelica 和 SystemModeler 中似乎更难。

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-19T09:51:32.593

您可以通过外部 C 代码在 Wolfram SystemModeler 中添加白噪声。

Modelica 代码（我已从代码中删除了图表注释，以便于阅读）：

```
package WhiteNoise "Package for generating white noise"
  extends Modelica.Icons.Library;

  block NoiseNormal "Normally distributed random noise"
    parameter Real mean=0 "Mean value of random noise";
    parameter Real stdev=1 "Standard deviation of random noise";
    parameter Real tSample=0.01 "Noise sample time";
    Modelica.Blocks.Interfaces.RealOutput y;
  equation 
    when initial() then
      WhiteNoise.initRandomNormal();
    end when;
    when sample(0, tSample) then
      y=mean + stdev*WhiteNoise.RandomNormal(time);
    end when;
  end NoiseNormal;

  function initRandomNormal
    external "C" ext_initRandomNormal()   annotation(Include="#include \"ext_initRandNormal.c\"");
  end initRandomNormal;

  function RandomNormal
    output Real y;
    input Real u;
    external "C" y=ext_RandomNormal(u)   annotation(Include="#include \"ext_RandNormal.c\"");
  end RandomNormal;

end WhiteNoise; 
```

外部代码：

ext_intRandNormal.c

```
#include <math.h>
#include <limits.h>

void ext_initRandomNormal()
{
    srand(time(NULL));
} 
```

ext_RandNormal.c

```
#include <math.h>
#include <limits.h>
double ext_RandomNormal(double timein)

{
    unsigned int seed = 0;
    double v1, v2, r;

    timein /= 100;
    seed = (timein - floor(timein)) * UINT_MAX;

    do
    {
        v1 = 2 * ((double) rand()) /((double) RAND_MAX) - 1;
        v2 = 2 * ((double) rand()) /((double) RAND_MAX) - 1;
        r = v1 * v1 + v2 * v2;
    } while((r >= 1.0) || (r == 0.0));

    return v1 * sqrt( - 2.0 * log(r) / r );
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-02-23T10:09:49.073

另一种方法是`Modelica.Blocks.Noise`避免自己编写外部代码（在 2016 年 4 月 3 日发布的 Modelica 标准库 3.2.2 中添加；即，在提出原始问题时它不会有帮助）。

一个好处`Modelica.Blocks.Noise`是解决了采样、多个种子等棘手的问题。

# iphone - iPhone Safari：last-child 未在表格中呈现

> ID：14943956
> 
> 赞同：3
> 
> 时间：2013-02-18T19:35:06.107
> 
> 标签：iphone, css, mobile-safari, css-selectors

我有一个响应式布局，在某个断点下方，只显示表格的第一列和最后一列，以减少所需的空间量。

这是CSS...

```
@media only screen and (max-width: 749px) {
    #content-container table thead th {
        display: none;
    }
    #content-container table thead th:first-child {
        display: table-cell !important;
    }
    #content-container table thead th:last-child {
        display: table-cell !important;
    }
}

@media only screen and (max-width: 749px) {
    #content-container table tbody tr td {
        display: none;
    }
    #content-container table tbody tr td:first-child {
        display: table-cell !important;
    }
    #content-container table tbody tr td:last-child {
        display: table-cell !important;
    }
} 
```

HTML 只是一个简单的表格，由, , ,`table`和`thead`最后`th`一列中的属性组成。`tbody``td``a`

```
<table>
    <thead>
        <tr>
            <th>Flight</th>
            <th>Text</th>
            <th>Text</th>
            <th>Text</th>
            <th>Text</th>
            <th style="width: 140px;">Options</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>Text</td>
            <td>Text</td>
            <td>Text</td>
            <td>Text</td>
            <td>Text</td>
            <td style="width: 140px;">
                <a style="display: inline-block;" href="#">Remove</a>
                <a style="display: inline-block;" href="#">Brief</a>
            </td>
        </tr>
    </tbody>
</table> 
```

但是，这在 iPhone 屏幕上渲染时会产生奇怪的结果。 ![显示最后一列未呈现的图像。](../Images/f2778e489fbe2fe53a583448c6335a4d.png)

如您所见，只有一列。最后一列尚未呈现。

旋转设备横向然后将其恢复为纵向会使最后一列显示（有时），这很奇怪。见下文。

![这显示了表格的实际外观。](../Images/7be15f79cef2848dc5830d323e6a39da.png)

这个问题让我陷入困境，我将不胜感激任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:34:42.317

根据[Quirksmode list](http://www.quirksmode.org/m/css.html)，它受支持，但仅适用于静态内容。一种可能的解决方法是改为提供列类。

# javascript - HTML 中定义的 SVG 标签与 D3 中添加的标签

> ID：14943957
> 
> 赞同：1
> 
> 时间：2013-02-18T19:35:05.410
> 
> 标签：javascript, d3.js

我一直在使用 [http://bl.ocks.org/mbostock/4063570](http://bl.ocks.org/mbostock/4063570) 作为指南来试验 D3 的集群功能。

如果我仔细复制该示例，它可以正常工作，就像我看到的所有其他 D3 SVG 示例一样，SVG 元素是由 D3 创建的。

我所做的改变给我带来了麻烦，是为了将多个 D3 图形插入到静态 HTML 中定义的布局中。

当我尝试让 D3 将元素添加到 HTML 中已经定义的 SVG 标记时：结果很接近，但并不总是足够接近。

检查创建的 DOM 元素，可以清楚地看到差异。

正常工作的代码包括：

```
var svgGraphic = d3.select("body").append("svg")
    .attr("width", totalWidth)
    .attr("height", totalHeight)
    .append("g").attr("transform", "translate(80,0)"); 
```

这（加上这里未显示的几行）导致 DOM 元素处于类似于以下的层次结构中：

```
<svg width="600" height="200">
    <g transform="translate(80,0)">
        <path class="link" d="M0,100C95,100 95,50 190,50">
        <path class="link" d="M0,100C95,100 95,150 190,150">
        <g class="node" transform="translate(0,100)">
        <g class="node" transform="translate(190,50)">
        <g class="node" transform="translate(380,25)">
    </g>
</svg> 
```

当代码更像是：

```
var svgGraphic = d3.select("#graphic");
svgGraphic.append("g").attr("transform", "translate(80,0)"); 
```

路径和节点元素不嵌套在第一个“g”标签内：

```
<svg id="graphic" height="200" width="600">
    <g transform="translate(80,0)">
    <path class="link" d="M0,100C95,100 95,50 190,50">
    <path class="link" d="M0,100C95,100 95,150 190,150">
    <g class="node" transform="translate(0,100)">
    <g class="node" transform="translate(190,50)">
    <g class="node" transform="translate(380,25)">
</svg> 
```

显然，我没有尝试附加结束 g 标记，但是在第一个示例中它是如何到达那里的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T19:38:15.867

在第一种情况下：

```
var svgGraphic = d3.select("body").append("svg")
    .attr("width", totalWidth)
    .attr("height", totalHeight)
    .append("g").attr("transform", "translate(80,0)"); 
```

`svgGraphic``g`将保留对您在最后一行中附加的元素的引用。

在第二种情况下：

```
var svgGraphic = d3.select("#graphic");
svgGraphic.append("g").attr("transform", "translate(80,0)"); 
```

`svgGraphic`指`svg`您使用 选择的元素`d3.select("#graphic")`。

因此，如果您将元素附加到`svgGraphic`，它们将被附加到`g`第一种情况的`svg`元素和第二种情况的元素。

我相信你想要：

```
var svgGraphic = d3.select("#graphic")
    .append("g").attr("transform", "translate(80,0)"); 
```

# playframework-2.0 - playframework 2 模块是否有可能拥有自己的路由文件和控制器？

> ID：14943958
> 
> 赞同：0
> 
> 时间：2013-02-18T19:35:05.800
> 
> 标签：playframework-2.0

我不确定我正在尝试做的事情是否可以通过 playframework 2 实现，所以我很感激任何帮助。

基本上我想有一个设置 api 作为“核心项目 api”，并有一组不同的 api 作为播放模块。我想在任何服务器上部署主项目，并且当我想时，包括/添加“模块”以支持附加功能。

比如我希望主项目支持

```
GET    /getUserInfo  controllers.ApplicationApi.getUserInfo() 
```

在我包含模块后，它能够支持

```
GET    /getCustomizedUserInfo      controllers.customized.ApplicationApi.getCustomizedUserInfo() 
```

所以基本上我需要模块能够拥有自己的附加路由文件和控制器。

这在playframework 2中可能吗？根据 playframework2 文档中提供的有限信息，我不确定我们是否可以在 playframework 模块中添加额外的路由文件和控制器。

非常感谢帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T20:49:45.147

Play 框架支持`modules`和`subprojects`. 它们非常接近，我的观点是，没有区别，它们都可以是常规的 Play 应用程序或常规的 SBT 项目（就像 Play Framework 本身存在多个模块一样）。如果我在这里错了，请纠正我。

但是，模块可以有自己的路线，手册中有描述： [https ://github.com/playframework/Play20/wiki/SBTSubProjects](https://github.com/playframework/Play20/wiki/SBTSubProjects)

我也有一个问题： [如何在 Play Framework 中创建子项目？（播放#play-java_2.9.2；2.1-RC3：未找到）](https://stackoverflow.com/questions/14586875/how-to-create-sub-projects-in-play-framework-playplay-java-2-9-22-1-rc3-not)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-14T18:25:41.720

以下是一些可能有人对此有用的建议：

*   kifi @GitHub：[一个模块化的 Play 2.3 应用程序](https://github.com/kifi/multiproject)

*   adrianhurt @GitHub：多域[种子播放 2.4](https://github.com/adrianhurt/play-multidomain-seed)

这两个在同一个 git repo 中都有子项目。但是[sbt 也能够从其他存储库访问项目](http://alvinalexander.com/scala/using-github-projects-scala-library-dependencies-sbt-sbteclipse)，因此使关系完全模块化并不难。我已经在两者之间使用 Maven 完成了这项工作，因此如果需要，请询问更多详细信息。

# ruby-on-rails - 在将记录保存在 Rails 中的模型中之前执行检查重复项的功能

> ID：14943959
> 
> 赞同：2
> 
> 时间：2013-02-18T19:35:13.117
> 
> 标签：ruby-on-rails, ruby, rails-activerecord

这就是我的模型中的内容。我想检查重复记录，我不能只对字段使用唯一索引，因为每个工作的联系人都是唯一的）我无法使用以下代码执行此操作。我做错了吗？任何帮助表示赞赏。谢谢！

```
before_save :check_for_duplicates?

def check_for_duplicates?
  JobsPeople.find(:all, :conditions => ["job_id = ? and contact_id = ?", self.job_id, self.contact_id])
end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T19:46:00.423

回调除了运行您告诉它们运行的​​代码之外没有其他任何作用。如果你想阻止某些事情的执行，你有两个选择，使用验证或引发错误。

在您当前的代码中，您可以检查您运行的查询是否返回任何内容，如果返回则引发错误。错误将冒泡到包装保存并触发回滚的事务，然后将错误传播到您的代码中，如果您愿意，您可以在其中处理它。

```
before_save :check_for_duplicates?

def check_for_duplicates?
  if JobsPeople.find(:all, :conditions => ["job_id = ? and contact_id = ?", self.job_id, self.contact_id]).any?
    raise 'some error'
  end
end 
```

虽然已经有一个内置的唯一性验证器来处理这种情况

```
validates :job_id, :uniquness => {:scope => :contact_id, :message => 'must be unique per contact} 
```

当然，这仍应在数据库中使用复合唯一索引进行备份，因为存在潜在的竞争条件，其可能性在很大程度上取决于应用程序的行为。

```
# in a migration

add_index :table_name, [:job_id, :contact_id], :unique => true, :name => 'index_job_id_and_contact_id_on_table_name' 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-18T19:41:24.177

我相信这应该做你想做的

```
class JobsPeople
  validates_uniqueness_of :contact_id, scope: :job_id
end 
```

# java - 如何将收到服务器的消息转发到 Netty (Java) 中的另一台服务器？

> ID：14943961
> 
> 赞同：0
> 
> 时间：2013-02-18T19:35:21.807
> 
> 标签：java, jboss, connection, netty, nio

我有一些客户端，它们与一台服务器通信，我需要该服务器将消息转发到另一台服务器。然后，从第二个服务器接收消息并发送到客户端。

使用这种方法，我实现了连接到第二台服务器，但它没有收到消息并抛出以下异常：

例外：java.nio.channels.NotYetConnectedException。java.nio.channels.NotYetConnectedException

```
public void messageReceived(ChannelHandlerContext ctx, final MessageEvent e) throws IOException, Exception {
        response = "hola" + "\r\n";
        Main.creaLog("Mensaje recibido del conc: " + e.getMessage().toString());
        Main.creaLog("Mensaje enviado al servidor : " + response);

        ClientBootstrap bootstrap1 = new ClientBootstrap(
        new NioClientSocketChannelFactory(
            Executors.newCachedThreadPool(),
            Executors.newCachedThreadPool()));

        // Configure the pipeline factory.
        //bootstrap1.setPipelineFactory(new CLIENTE.ClientePipelineFactory());
        bootstrap1.setPipelineFactory(new ChannelPipelineFactory() {
         public ChannelPipeline getPipeline() {
                return Channels.pipeline(new ClienteHandler());
         }
        });

        final ChannelFuture future = bootstrap1.connect(new InetSocketAddress("172.16.10.14", 12355));

        Channel channel = future.getChannel();

        if (channel.isWritable()) {
            ChannelFuture lastWriteFuture = channel.write(e.getMessage().toString() + "\r\n");
        }
        close = true;

    // We do not need to write a ChannelBuffer here.
    // We know the encoder inserted at TelnetPipelineFactory will do the conversion.
    ChannelFuture future = e.getChannel().write(response + "\r\n");
    //CIERRA LA CONEXION
    if (close) {
        future.addListener(ChannelFutureListener.CLOSE);
    }
} 
```

如果有人可以帮助我，我将非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T04:49:04.563

看看[Netty 代理示例](http://static.netty.io/3.5/xref/org/jboss/netty/example/proxy/HexDumpProxyInboundHandler.html)

现在，您基本上是在尝试在收到的每条消息上连接到远程服务器。这可能不是你想要的。您可能只想连接到远程服务器一次（即 Netty 代理示例中的出站通道）并将新的传入消息转发到该特定通道。

# java - Java Wav 文件错误（javax.sound.sampled.UnsupportedAudioFileException：无法从输入文件获取音频输入流）

> ID：14943962
> 
> 赞同：2
> 
> 时间：2013-02-18T19:35:30.137
> 
> 标签：java, events, audio, javasound

我的 Java 项目中有两个类，一个是

反弹

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class Rebound
{

   public static void main (String[] args)
   {
      JFrame frame = new JFrame ("Rebound");
      frame.setDefaultCloseOperation (JFrame.EXIT_ON_CLOSE);

      frame.getContentPane().add(new ReboundPanel());
      frame.pack();
      frame.setVisible(true);
   }
} 
```

第二个是 ReboundPanel

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.sound.sampled.*;
import java.io.File;
import java.io.IOException;
import javax.sound.sampled.AudioFormat;
import javax.sound.sampled.AudioInputStream;
import javax.sound.sampled.AudioSystem;
import javax.sound.sampled.Clip;
import javax.sound.sampled.LineUnavailableException;
import javax.sound.sampled.SourceDataLine;
import javax.sound.sampled.DataLine;
import javax.sound.sampled.LineEvent;
import javax.sound.sampled.LineListener;

public class ReboundPanel extends JPanel
{
   private final int WIDTH = 600, HEIGHT = 300;
   private final int DELAY = 20, IMAGE_SIZE = 35;

   private ImageIcon image1, image2, image3;
   private Timer timer;
   private int x1, y1, moveX1, moveY1, x2, y2, moveX2, moveY2, x3, y3;
   Clip clip;
   DataLine.Info info;

   public ReboundPanel() throws Exception
   {
      timer = new Timer(DELAY, new ReboundListener());
      image1 = new ImageIcon ("happyFace1.gif");
      image2 = new ImageIcon ("happyFace2.gif");

      x1 = 0;
      y1 = 100;
      x2 = 40;
      y2 = 0;
      moveX1 = moveY1 = 3;
      moveX2 = moveY2 = 5;
      setPreferredSize (new Dimension(WIDTH, HEIGHT));
      setBackground (Color.black);
      timer.start();

      image3 = new ImageIcon ("fire.gif");
      File soundFile = new File("explosion.wav");
      AudioInputStream sound = AudioSystem.getAudioInputStream(soundFile);
      DataLine.Info info = new DataLine.Info (Clip.class, sound.getFormat());
      clip = (Clip) AudioSystem.getLine(info);
      clip.open(sound);
      clip.start();
   }
   public void paintComponent (Graphics page)
   {
      super.paintComponent (page);
      image1.paintIcon (this, page, x1, y1);
      image2.paintIcon (this, page, x2, y2);
      image3.paintIcon (this, page, x2, y2);
   }
   private class ReboundListener implements ActionListener
   {

      public void actionPerformed (ActionEvent event)
      {
         x1 += moveX1;
         y1 += moveY1;
         x2 += moveX2;
         y2 += moveY2;
         if (x1 <= 0 || x1 >= WIDTH-IMAGE_SIZE)
            moveX1 = moveX1 * -1;

         if (y1 <= 0 || y1 >= HEIGHT-IMAGE_SIZE)
            moveY1 = moveY1 * -1;

         if (x2 <= 0 || x2 >= WIDTH-IMAGE_SIZE)
            moveX2 = moveX2 * -1;

         if (y2 <= 0 || y2 >= HEIGHT-IMAGE_SIZE)
            moveY2 = moveY2 * -1;

         if (Math.abs(y1-y2) <= IMAGE_SIZE-2 && Math.abs(x1-x2)<= IMAGE_SIZE-2)
            {
                moveY2 = moveY2 * -1;
                moveX2 = moveX2 * -1;
                moveY1 = moveY1 * -1;
                moveX1 = moveX1 * -1;
                x3=x2;
                y3=y2-2*IMAGE_SIZE;
                clip.loop(Clip.LOOP_CONTINUOUSLY);

            }
         if (Math.abs(y1-y2) >= 4*IMAGE_SIZE && Math.abs(x1-x2) >= 4*IMAGE_SIZE)
           {
               x3=-200;
               y3=-200;
               if (clip.isRunning()) clip.stop();
           }
         repaint();
      }
   }
} 
```

当我尝试运行程序时，出现以下错误

```
javax.sound.sampled.UnsupportedAudioFileException: could not get audio input stream from input file
    at javax.sound.sampled.AudioSystem.getAudioInputStream(AudioSystem.java:1187)
    at ReboundPanel.<init>(ReboundPanel.java:47)
    at Rebound.main(Rebound.java:21)
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at ReboundPanel$ReboundListener.actionPerformed(ReboundPanel.java:99)
    at javax.swing.Timer.fireActionPerformed(Timer.java:312)
    at javax.swing.Timer$DoPostEvent.run(Timer.java:244)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:721)
    at java.awt.EventQueue.access$200(EventQueue.java:103)
    at java.awt.EventQueue$3.run(EventQueue.java:682)
    at java.awt.EventQueue$3.run(EventQueue.java:680)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:691)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:244)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:163)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:151)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:147)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:97) 
```

根据我的代码，我的目标是让两个快乐的脸在框架中移动，当它们都碰撞时，声音和火灾/爆炸的图像应该会出现并消失

请帮助我必须向我的导师展示这个项目......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-19T15:45:14.630

仅仅因为文件是 WAV 并不意味着它受 JavaSound 支持。WAV 文件是一种容器格式，实际的原始数据（样本）可能是不同的格式，包括各种位深度的有符号/无符号 PCM，也可能是压缩格式。我找不到 JavaSound 的兼容性表，但 JMF 的兼容性表（这会给你一个好主意）在这里：

[http://www.oracle.com/technetwork/java/javase/formats-138492.html](http://www.oracle.com/technetwork/java/javase/formats-138492.html)

解决方案是使用可以读取当前文件的转换程序（SoX、Adacity、QuickTime、ProTools 等）将 WAV 文件转换为更通用的格式，例如 16 位 PCM。

更准确地说，您可能想要创建一个位深度为 16 位的 WAV 文件（小端序 - 这是默认设置，所以如果您没有看到它，请不要担心），立体声或单声道应该可以工作. 您可能还需要考虑常见的采样率，例如 44,100 Hz 或 48,000 Hz（现在大多数计算机应该支持这两种采样率，但前者更常见）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T22:14:19.480

> An`UnsupportedAudioFileException`是表示操作失败的异常，因为文件不包含可识别文件类型和格式的有效数据。

如果问题是“为什么样本不播放？” 答案就在上面。另一种说法是“声音使用 Java Sound API 无法理解的格式或编码”。

..你的问题是什么？

# javascript - Javascript String.fromCharCode 区分大小写？

> ID：14943966
> 
> 赞同：21
> 
> 时间：2013-02-18T19:35:49.177
> 
> 标签：javascript, string, fromcharcode

我只是在监听输入元素的 keyup 事件并将结果收集到一个字符串中，如下所示

```
word=word+String.fromCharCode(key.keyCode); 
```

问题是这个词是大写字母，而我希望它区分大小写。例如，如果我输入 abcef，我的累积单词就会变成 'ABCEF' 。

注意 - 我需要一个纯 JavaScript 解决方案（没有库..）有什么想法吗？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-02-18T20:12:06.627

`keyup`和之类的事件`keydown`将返回 65`a`和*（*`A` *以及如果该键被按住）`true``event.shiftKey`*。

该`keypress`事件为大写和小写字母返回不同的键码，因此要使此工作区分大小写，您应该使用该`keypress`事件，`fromCharCode()`并将返回正确的字母，区分大小写。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T19:38:34.023

你可以随时打电话`.toLowerCase()`

```
word = word + String.fromCharCode(key.keyCode).toLowerCase(); 
```

只调用一次可能更有意义`.toLowerCase()`，此时你决定你已经完成了字符的积累。

# vb.net - 用 VB.NET 程序打开文件

> ID：14943971
> 
> 赞同：1
> 
> 时间：2013-02-18T19:35:59.360
> 
> 标签：vb.net

我最近学习了如何使用 VB.NET 将您的程序设置为所选扩展的默认值。您将编写代码来设置注册表值。问题是，当您打开文件时 - 在将程序设置为默认值之后 - 它只会打开您的程序（就像快捷方式一样）。有没有办法让它真正打开文件？所以说我有一个文本文件。我将 .txt 文件的默认程序设置为我的应用程序。当我单击打开文件时，如何让它加载文本文件，就像记事本设置为默认值一样？如果这没有意义，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T19:38:40.763

文件的路径作为命令行参数传递给您的程序。您的程序将需要读取命令行参数并做出相应的反应。

下面是一些示例代码，演示如何读取命令行参数：

```
 Sub Main()
    Dim s() As String = System.Environment.GetCommandLineArgs()
    ' write code to open the file here...
    Console.WriteLine(s(1))
  End Sub 
```

为了帮助调试，您可以在 Visual Studio IDE 中指定命令行参数：

1.  在解决方案资源管理器中选择一个项目后，在“项目”菜单上，单击“属性”。
2.  单击调试选项卡。
3.  在命令行参数字段中，输入您希望使用的命令行参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T01:46:03.877

您还可以声明您`Sub Main`接收命令行参数：

```
Sub Main(Args() As String)

End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T19:39:22.450

文件名由操作系统传递给您的程序

```
Sub Main()
    Dim s() As String = System.Environment.GetCommandLineArgs()
EndSub 
```

[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.environment.getcommandlineargs.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-1)

# java - 将正则表达式代码从 php 转换为 java 不起作用

> ID：14943972
> 
> 赞同：0
> 
> 时间：2013-02-18T19:35:59.483
> 
> 标签：java, php, regex, converter

我正在尝试将此代码从 PHP 转换为 Java，但无法使其工作相同：

**PHP：**

```
function check_syntax($str) {

    // define the grammar
    $number = "\d+(\.\d+)?";
    $ident  = "[a-z]\w*";
    $atom   = "[+-]?($number|$ident)";
    $op     = "[+*/-]";
    $sexpr  = "$atom($op$atom)*"; // simple expression

    // step1\. remove whitespace
    $str = preg_replace('~\s+~', '', $str);

    // step2\. repeatedly replace parenthetic expressions with 'x'
    $par = "~\($sexpr\)~";
    while(preg_match($par, $str))
        $str = preg_replace($par, 'x', $str);

    // step3\. no more parens, the string must be simple expression
    return preg_match("~^$sexpr$~", $str);
} 
```

**爪哇：**

```
private boolean validateExpressionSintax(String exp){

    String number="\\d+(\\.\\d+)?";
    String ident="[a-z]\\w*";
    String atom="[+-]?("+number+"|"+ident+")";
    String op="[+*/-]";
    String sexpr=atom+"("+op+""+atom+")*"; //simple expression

    // step1\. remove whitespace
    String str=exp.replaceAll("\\s+", "");

    // step2\. repeatedly replace parenthetic expressions with 'x'
    String par = "\\("+sexpr+"\\)";

    while(str.matches(par)){
        str =str.replace(par,"x");
    }

    // step3\. no more parens, the string must be simple expression
    return str.matches("^"+sexpr+"$");
} 
```

我究竟做错了什么？我正在使用表达式`teste1*(teste2+teste3)`并且我在 php 代码中得到了匹配，但在 java 中没有，该行在`while(str.matches(par))`第一次尝试时失败。我认为这一定是matches方法的一些问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T19:51:41.397

[`String.matches`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#matches%28java.lang.String%29)在 Java 中将检查整个字符串是否与正则表达式匹配（好像正则表达式`^`在开头和`$`结尾都有）。

您需要[`Matcher`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html)在与某些正则表达式匹配的字符串中找到一些文本：

```
Pattern pattern = Pattern.compile(regex);
Matcher matcher = pattern.matcher(inputString);

while (matcher.find()) {
    // Extract information from each match
} 
```

在您的情况下，由于您正在更换：

```
Pattern pattern = Pattern.compile(regex);
Matcher matcher = pattern.matcher(inputString);

StringBuffer replacedString = new StringBuffer();

while (matcher.find()) {
    matcher.appendReplacement(replacedString, "x");
}

matcher.appendTail(replacedString); 
```

# routing - 为什么 OSPF LSA 序列中的 nuber 在 0x80000001 到 0x7FFFFFFF 范围内

> ID：14943977
> 
> 赞同：2
> 
> 时间：2013-02-18T19:36:22.723
> 
> 标签：routing, lsa, ospf

为什么 OSPF LSA 序列号在 0x80000001 到 0x7FFFFFFF 范围内。我想这是出于某些历史原因，但无法谷歌搜索。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T23:30:01.123

LSA 序列号是一个有符号的 32 位整数。

所以 0x80000001 到 0x7fffffff 基本上涵盖了除了一个数字：0x80000000 之外的整个可能范围，并且这个特殊的数字是保留的。

您可以阅读[RFC 2328 的此页面以](https://www.rfc-editor.org/rfc/rfc2328#page-115)获取更多详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-02T16:07:13.637

作为有符号整数，序列号从 -2 147 483 647 计数到 2 147 483 647。

如果它从 0x00000001 计数到 0xffffffff，它将显示为从 1 到 2 147 483 647 然后从 -2 147 483 648 到 -1 的计数。

# angularjs - 为什么一个模型在 AngularJS 控制器中是一次性可读的？

> ID：14943981
> 
> 赞同：0
> 
> 时间：2013-02-18T19:36:43.263
> 
> 标签：angularjs

我正在尝试从控制器内部读取模型。说我有这个控制器

```
angular.module('app', [])
  .controller('MainCtrl', function($scope) {
    $scope.data = {title: 'foo'};

    $scope.log = function() {
      console.log($scope.data);
    }
  }); 
```

而这个标记

```
<div ng-app="app" ng-controller="MainCtrl">
  <input ng-model="data.title">
  <button ng-click="log()">log</button>  
</div> 
```

当我*第*一次按下按钮时，如果我修改了值，但所有后续点击只会再次记录第一个模型，无论输入数据是否更改。

我没有得到什么？我应该为此目的使用其他东西吗？服务？

小提琴：http: [//jsfiddle.net/J6jLz/1/](http://jsfiddle.net/J6jLz/1/)

**奇怪** 的是，如果我在记录实际数据对象之前记录“标题”属性，它会起作用：http: [//jsfiddle.net/Yf5kz/4/](http://jsfiddle.net/Yf5kz/4/)

这可能与`$apply`范围有关吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T21:28:37.103

试试这个

```
console.log(JSON.stringify($scope.data)); 
```

# html - Firefox @font_face 仅在它位于根目录时有效

> ID：14943982
> 
> 赞同：0
> 
> 时间：2013-02-18T19:36:45.767
> 
> 标签：html, firefox, css, font-face

我有这个带有自定义字体的网站，我使用@font_face 代码

```
@font-face {
    font-family: 'webfontregular';
    src: url('fonts/cracked-webfont.eot');
    src: url('fonts/cracked-webfont.eot?#iefix') format('embedded-opentype'),
         url('fonts/cracked-webfont.woff') format('woff'),
         url('fonts/cracked-webfont.ttf') format('truetype'),
         url('fonts/cracked-webfont.svg#webfontregular') format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

当网站在线时字体在 Firefox 上不起作用

**到目前为止我所尝试的：**

1-我尝试对字体使用相对和绝对 URL，`url('../../../fonts/cracked-webfont.eot');` 即`url('http://example.comfonts/cracked-webfont.eot');`

2-尝试将仅包含字体代码的CSS文件放在根目录中并且它有效

为什么字体代码仅在 CSS 放置在根目录时有效，即使我使用相对 URL，因为 Firefox 不支持跨域字体 Web 引用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T21:42:33.350

在萤火虫中检查所有资源是否已在“网络”选项卡下加载，如果有，则该字体可能存在问题。

# visual-c++ - 已删除数组上的 AccessViolationException

> ID：14943983
> 
> 赞同：0
> 
> 时间：2013-02-18T19:36:45.987
> 
> 标签：visual-c++, access-violation

```
static void InvShiftRows(BYTE* dest)
{
    tcout << "\t\t\tInvShiftRows()+" << EOL;
    BYTE* temp = new BYTE[16];
    ByteUtil::LogArray("temp1", temp, 16);
    memcpy(temp, dest, 16);
    ByteUtil::LogArray("temp2", temp, 16);
    dest[0x01] = temp[0x0D];
    dest[0x02] = temp[0x0A];
    dest[0x03] = temp[0x07];
    dest[0x05] = temp[0x01];
    dest[0x06] = temp[0x0E];
    dest[0x07] = temp[0x0B];
    dest[0x09] = temp[0x05];
    dest[0x0A] = temp[0x02];
    dest[0x0B] = temp[0x0F];
    dest[0x0D] = temp[0x09];
    dest[0x0E] = temp[0x06];
    dest[0x0F] = temp[0x03];
    ByteUtil::LogArray("Dest1", dest, 16);
    delete[] temp;
    tcout << "\t\t\tInvShiftRows()-" << EOL;
} 
```

所以我追查到访问冲突偶尔会发生在`delete[] temp`我的生活中，我无法弄清楚为什么。它只是随机执行。关于为什么的任何线索？

**编辑** 每个请求以查看 ByteUtil::LogArray

```
void ByteUtil::LogArray(char* header, const BYTE* thearray, int length)
{
    tcout << header << "(" << length << ")-";

    char* number = new char[4];
    for(int i=0; i<length; i++)
    {
        sprintf_s(number, 4,"%02X:", thearray[i]);
        wcout << number;
    }
    delete[] number;
    wcout << EOL; //EOL is just std::endl << std::flush
} 
```

老实说，我认为我用 delete[] 做了一些坏动作。我在我的一篇代码审查帖子中了解到，每当我使用 new X[] 时，我都应该使用 delete[]，所以我开始将它们放在`BYTE temp[4]`我可以替换的任何地方，`BYTE* temp = new BYTE[4]`并添加相应的 delete[]。起初看来，如果我使用 new X[] 它将将该数组中的所有值设置为零（结果是虚假的，因为它正在抛弃我的加密/解密方法）所以现在我正在尝试找出我的哪个删除删除太多...这让我想问另一个问题..

`BYTE temp[4] = {0x00};`有一种方法是不负责任的吗？`new X[]`还是使用and是更好的做法`delete[]`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T05:16:22.307

如果问题与堆损坏有关，您可以包括`<crtdbg.h>` 并打开每个 alloc/dealloc 的堆检查：

在应用程序开头的某个地方运行：

```
// _CRTDBG_ALLOC_MEM_DF -- Turn on debug allocation
// _CRTDBG_CHECK_ALWAYS_DF -- check the heap's integrity at every allocation and deallocation.
_CrtSetDbgFlag(_CRTDBG_ALLOC_MEM_DF | _CRTDBG_CHECK_ALWAYS_DF); 
```

如果问题与堆相关，您将得到一个断言（调试断言失败！表达式：_CrtCheckMemory()）。此后，追溯程序执行并查找堆损坏的位置。

例如，如果您添加`dest[0x10] = temp[0x03];`到上面的代码并且*dest*在堆上分配，您将在 cout 上的 LogArray 中获得一个断言。

**注意：**设置 _CRTDBG_CHECK_ALWAYS_DF 可能会使您的应用程序运行缓慢。

# git - git：列出跳过工作树文件的非弃用方式？

> ID：14943987
> 
> 赞同：0
> 
> 时间：2013-02-18T19:36:55.800
> 
> 标签：git, git-index

互联网建议`git ls-files -v`查找标记为跳过工作树的文件。

`-v`flag of 的文档`git-ls-files`说它类似于`-t`“半弃用”的 flag。

是否有一种不推荐使用（和/或可编写脚本）的方式来查找跳过工作树文件？

# wcf - WCF 服务库和 WCF 服务应用程序之间的区别

> ID：14943988
> 
> 赞同：7
> 
> 时间：2013-02-18T19:37:03.163
> 
> 标签：wcf, wcf-data-services, wcf-library

我想在我的 WPF 项目中使用 WCF 服务 (.svc)。我正​​在尝试创建一个服务。但是在 Visual Studio 中我们有“WCF 服务库”和“WCF 服务应用程序”。我都试过了。

当我们创建“WCF 服务应用程序”时，我们将获得 .svc 文件。当我们托管时，我们将获得 .svc 文件作为服务参考。

但是“WCF 服务库”项目呢？当我创建这个时，我只有 .cs 文件，我尝试添加新的 .svc 文件，但我们没有添加 .svc 文件的选项。请指导我如何在我的 WPF 应用程序中使用“WCF 服务库”项目创建的服务

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T19:47:49.500

在 WCF 服务库中创建的服务可以使用多个范例进行托管。以下链接（相当旧）解释了组织 wcf 服务的各种方法。

[http://msdn.microsoft.com/en-us/library/bb332338.aspx](http://msdn.microsoft.com/en-us/library/bb332338.aspx)

请注意，如果您在 IIS 中托管 wcf 服务，则需要 .svc 文件。您可以编写自己的主机，不需要 .svc 文件

# c - 使用 mmap (MAP_FIXED) 重叠页面

> ID：14943990
> 
> 赞同：18
> 
> 时间：2013-02-18T19:37:09.113
> 
> 标签：c, linux, mmap, libc

由于一些与此问题无关的晦涩原因，我需要使用 MAP_FIXED 来获取靠近 libc 的文本部分在内存中的位置的页面。

在阅读 mmap(2) 之前（我应该首先完成），如果我使用 MAP_FIXED 调用 mmap 并且基地址与已经映射的区域重叠，我预计会出现错误。

然而事实并非如此。例如，这里是某些进程的 /proc/maps 的一部分

```
7ffff7299000-7ffff744c000 r-xp 00000000 08:05 654098                     /lib/x86_64-linux-gnu/libc-2.15.so 
```

其中，在进行以下 mmap 调用后...

```
 mmap(0x7ffff731b000,
       getpagesize(),
       PROT_READ | PROT_WRITE | PROT_EXEC,
       MAP_ANONYMOUS | MAP_PRIVATE | MAP_FIXED,
       0,
       0); 
```

... 变成：

```
7ffff7299000-7ffff731b000 r-xp 00000000 08:05 654098                     /lib/x86_64-linux-gnu/libc-2.15.so
7ffff731b000-7ffff731c000 rwxp 00000000 00:00 0 
7ffff731c000-7ffff744c000 r-xp 00083000 08:05 654098                     /lib/x86_64-linux-gnu/libc-2.15.so 
```

这意味着我已经用我自己的页面覆盖了专用于 libc 的部分虚拟地址空间。显然不是我想要的...

在 mmap(2) 手册的 MAP_FIXED 部分中，它明确指出：

> 如果 addr 和 len 指定的内存区域与任何现有映射的页面重叠，则现有映射的重叠部分将被**丢弃**。

这解释了我所看到的，但我有几个问题：

1.  有没有办法检测某些东西是否已经映射到某个地址？没有访问/proc/maps？
2.  在查找重叠页面的情况下，有没有办法强制 mmap 失败？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-19T03:30:01.480

1.  用于`page = sysconf(SC_PAGE_SIZE)`找出页面大小，然后扫描您希望使用的每个页面大小的块[`msync(addr, page, 0)`](http://www.kernel.org/doc/man-pages/online/pages/man2/msync.2.html)（使用`(unsigned long)addr % page == 0`，即`addr`与页面对齐）。如果它返回`-1`with `errno == ENOMEM`，则该页面未映射。

    编辑：正如下面评论的那样，[`mincore(addr,page,&dummy)`](http://www.kernel.org/doc/man-pages/online/pages/man2/mincore.2.html)优于`msync()`. （系统调用的实现`mm/mincore.c`在 Linux 内核源代码中，C 库通常提供更新的包装器`errno`。由于系统调用在确保页面对齐后立即进行映射检查`addr`，因此在未映射的情况下是最佳的 ( `ENOMEM`) . 如果页面已经被映射，它会做一些工作，所以如果性能是最重要的，尽量避免检查你知道被映射的页面。

    您必须单独执行此操作，每个页面单独执行，因为对于大于单个页面的区域，`ENOMEM`意味着该区域未完全映射；它可能仍被部分映射。映射总是细化到页面大小的单元。

2.  据我所知，`mmap()`如果该区域已映射或包含已映射的页面，则无法判断失败。（同样适用于`mremap()`，因此您无法创建映射，然后将其移动到所需区域。）

    这意味着您有竞争条件的风险。最好自己执行实际的系统调用，而不是 C 库包装器，以防它们在内部进行内存分配或更改内存映射：

    ```
    #define _GNU_SOURCE
    #include <unistd.h>
    #include <sys/syscall.h>

    static size_t page = 0;
    static inline size_t page_size(void)
    {
        if (!page)
            page = (size_t)sysconf(_SC_PAGESIZE);
        return page;
    }

    static inline int raw_msync(void *addr, size_t length, int flags)
    {
        return syscall(SYS_msync, addr, length, flags);
    }

    static inline void *raw_mmap(void *addr, size_t length, int prot, int flags)
    {
        return (void *)syscall(SYS_mmap, addr, length, prot, flags, -1, (off_t)0);
    } 
    ```

但是，我怀疑无论您尝试做什么，您最终都需要解析`/proc/self/maps`。

*   我建议完全避免使用标准 I/O `stdio.h`（因为各种操作将动态分配内存，从而更改映射），而是使用`unistd.h`不太可能影响映射的较低级别的接口。这是一组简单粗暴的函数，可用于找出每个映射区域以及该区域中启用的保护（并丢弃其他信息）。在实践中，它使用大约一千字节的代码，比堆栈中的代码少，因此即使在有限的架构（例如嵌入式设备）上也非常有用。

    ```
    #include <unistd.h>
    #include <fcntl.h>
    #include <errno.h>
    #include <string.h>

    #ifndef   INPUT_BUFFER
    #define   INPUT_BUFFER   512
    #endif /* INPUT_BUFFER */

    #ifndef   INPUT_EOF
    #define   INPUT_EOF     -256
    #endif /* INPUT_EOF */

    #define   PERM_PRIVATE  16
    #define   PERM_SHARED    8
    #define   PERM_READ      4
    #define   PERM_WRITE     2
    #define   PERM_EXEC      1

    typedef struct {
        int            descriptor;
        int            status;
        unsigned char *next;
        unsigned char *ends;
        unsigned char  buffer[INPUT_BUFFER + 16];
    } input_buffer;

    /* Refill input buffer. Returns the number of new bytes.
     * Sets status to ENODATA at EOF.
    */
    static size_t input_refill(input_buffer *const input)
    {
        ssize_t n;

        if (input->status)
            return (size_t)0;

        if (input->next > input->buffer) {
            if (input->ends > input->next) {
                memmove(input->buffer, input->next,
                        (size_t)(input->ends - input->next));
                input->ends = input->buffer + (size_t)(input->ends - input->next);
                input->next = input->buffer;
            } else {
                input->ends = input->buffer;
                input->next = input->buffer;
            }
        }

        do {
            n = read(input->descriptor, input->ends,
                     INPUT_BUFFER - (size_t)(input->ends - input->buffer));
        } while (n == (ssize_t)-1 && errno == EINTR);
        if (n > (ssize_t)0) {
            input->ends += n;
            return (size_t)n;

        } else
        if (n == (ssize_t)0) {
            input->status = ENODATA;
            return (size_t)0;
        }

        if (n == (ssize_t)-1)
            input->status = errno;
        else
            input->status = EIO;

        return (size_t)0;
    }

    /* Low-lever getchar() equivalent.
    */
    static inline int input_next(input_buffer *const input)
    {
        if (input->next < input->ends)
            return *(input->next++);
        else
        if (input_refill(input) > 0)
            return *(input->next++);
        else
            return INPUT_EOF;
    }

    /* Low-level ungetc() equivalent.
    */
    static inline int input_back(input_buffer *const input, const int c)
    {
        if (c < 0 || c > 255)
            return INPUT_EOF;
        else
        if (input->next > input->buffer)
            return *(--input->next) = c;
        else
        if (input->ends >= input->buffer + sizeof input->buffer)
            return INPUT_EOF;

        memmove(input->next + 1, input->next, (size_t)(input->ends - input->next));
        input->ends++;
        return *(input->next) = c;
    }

    /* Low-level fopen() equivalent.
    */
    static int input_open(input_buffer *const input, const char *const filename)
    {
        if (!input)
            return errno = EINVAL;

        input->descriptor = -1;
        input->status = 0;
        input->next = input->buffer;
        input->ends = input->buffer;

        if (!filename || !*filename)
            return errno = input->status = EINVAL;

        do {
            input->descriptor = open(filename, O_RDONLY | O_NOCTTY);
        } while (input->descriptor == -1 && errno == EINTR);
        if (input->descriptor == -1)
            return input->status = errno;

        return 0;
    }

    /* Low-level fclose() equivalent.
    */
    static int input_close(input_buffer *const input)
    {
        int result;

        if (!input)
            return errno = EINVAL;

        /* EOF is not an error; we use ENODATA for that. */
        if (input->status == ENODATA)
            input->status = 0;

        if (input->descriptor != -1) {
            do {
                result = close(input->descriptor);
            } while (result == -1 && errno == EINTR);
            if (result == -1 && !input->status)
                input->status = errno;
        }

        input->descriptor = -1;
        input->next = input->buffer;
        input->ends = input->buffer;

        return errno = input->status;
    }

    /* Read /proc/self/maps, and fill in the arrays corresponding to the fields.
     * The function will return the number of mappings, even if not all are saved.
    */
    size_t read_maps(size_t const n,
                     void **const ptr, size_t *const len,
                     unsigned char *const mode)
    {
        input_buffer    input;
        size_t          i = 0;
        unsigned long   curr_start, curr_end;
        unsigned char   curr_mode;
        int             c;

        errno = 0;

        if (input_open(&input, "/proc/self/maps"))
            return (size_t)0; /* errno already set. */

        c = input_next(&input);
        while (c >= 0) {

            /* Skip leading controls and whitespace */
            while (c >= 0 && c <= 32)
                c = input_next(&input);

            /* EOF? */
            if (c < 0)
                break;

            curr_start = 0UL;
            curr_end = 0UL;
            curr_mode = 0U;

            /* Start of address range. */
            while (1)
                if (c >= '0' && c <= '9') {
                    curr_start = (16UL * curr_start) + c - '0';
                    c = input_next(&input);
                } else
                if (c >= 'A' && c <= 'F') {
                    curr_start = (16UL * curr_start) + c - 'A' + 10;
                    c = input_next(&input);
                } else
                if (c >= 'a' && c <= 'f') {
                    curr_start = (16UL * curr_start) + c - 'a' + 10;
                    c = input_next(&input);
                } else
                    break;
            if (c == '-')
                c = input_next(&input);
            else {
                errno = EIO;
                return (size_t)0;
            }

            /* End of address range. */
            while (1)
                if (c >= '0' && c <= '9') {
                    curr_end = (16UL * curr_end) + c - '0';
                    c = input_next(&input);
                } else
                if (c >= 'A' && c <= 'F') {
                    curr_end = (16UL * curr_end) + c - 'A' + 10;
                    c = input_next(&input);
                } else
                if (c >= 'a' && c <= 'f') {
                    curr_end = (16UL * curr_end) + c - 'a' + 10;
                    c = input_next(&input);
                } else
                    break;
            if (c == ' ')
                c = input_next(&input);
            else {
                errno = EIO;
                return (size_t)0;
            }

            /* Permissions. */
            while (1)
                if (c == 'r') {
                    curr_mode |= PERM_READ;
                    c = input_next(&input);
                } else
                if (c == 'w') {
                    curr_mode |= PERM_WRITE;
                    c = input_next(&input);
                } else
                if (c == 'x') {
                    curr_mode |= PERM_EXEC;
                    c = input_next(&input);
                } else
                if (c == 's') {
                    curr_mode |= PERM_SHARED;
                    c = input_next(&input);
                } else
                if (c == 'p') {
                    curr_mode |= PERM_PRIVATE;
                    c = input_next(&input);
                } else
                if (c == '-') {
                    c = input_next(&input);
                } else
                    break;
            if (c == ' ')
                c = input_next(&input);
            else {
                errno = EIO;
                return (size_t)0;
            }

            /* Skip the rest of the line. */
            while (c >= 0 && c != '\n')
                c = input_next(&input);

            /* Add to arrays, if possible. */
            if (i < n) {
                if (ptr) ptr[i] = (void *)curr_start;
                if (len) len[i] = (size_t)(curr_end - curr_start);
                if (mode) mode[i] = curr_mode;
            }
            i++;
        }

        if (input_close(&input))
            return (size_t)0; /* errno already set. */

        errno = 0;
        return i;
    } 
    ```

    该`read_maps()`函数最多读取`n`区域、数组的起始地址、`void *`数组`ptr`的长度`len`和数组的权限`mode`，返回映射的总数（可能大于），如果发生错误，则返回`n`零并设置。`errno`

    很可能将系统调用用于上面的低级 I/O，这样您就不会使用任何 C 库功能，但我认为根本没有必要。（据我所知，C 库在这些实际系统调用周围使用了非常简单的包装器。）

希望这个对你有帮助。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-06-24T17:56:19.857

“这解释了我所看到的，但我有几个问题：”

“有没有办法检测某些东西是否已经映射到某个地址？无需访问 /proc/maps？”

是的，使用不带 MAP_FIXED 的 mmap。

“有没有办法在找到重叠页面的情况下强制mmap失败？”

显然不是，但如果 mmap 返回所请求地址以外的映射，则只需在 mmap 之后使用 munmap。

当在*没有*MAP_FIXED 的情况下使用时，Linux 和 Mac OS X 上的 mmap（我也怀疑在其他地方）服从地址参数，如果在 [地址，地址 + 长度）范围内不存在现有映射。因此，如果 mmap 回答与您提供的地址不同的地址的映射，您可以推断该范围内已经存在映射，您需要使用不同的范围。由于 mmap 通常会在忽略地址参数时回答位于非常高地址的映射，因此只需使用 munmap 取消映射该区域，然后在不同的地址重试。

使用 mincore 检查地址范围的使用不仅浪费时间（必须一次探测一个页面），它可能不起作用。较旧的 linux 内核只会使 mincore 因文件映射而失败。对于 MAP_ANON 映射，他们根本不会回答任何问题。但正如我所指出的，您所需要的只是 mmap 和 munmap。

我刚刚完成了这个为 Smalltalk VM 实现内存管理器的练习。我使用 sbrk(0) 找出可以映射第一个段的第一个地址，然后使用 mmap 和 1Mb 的增量为后续段搜索空间：

```
static long          pageSize = 0;
static unsigned long pageMask = 0;

#define roundDownToPage(v) ((v)&pageMask)
#define roundUpToPage(v) (((v)+pageSize-1)&pageMask)

void *
sqAllocateMemory(usqInt minHeapSize, usqInt desiredHeapSize)
{
    char *hint, *address, *alloc;
    unsigned long alignment, allocBytes;

    if (pageSize) {
        fprintf(stderr, "sqAllocateMemory: already called\n");
        exit(1);
    }
    pageSize = getpagesize();
    pageMask = ~(pageSize - 1);

    hint = sbrk(0); /* the first unmapped address above existing data */

    alignment = max(pageSize,1024*1024);
    address = (char *)(((usqInt)hint + alignment - 1) & ~(alignment - 1));

    alloc = sqAllocateMemorySegmentOfSizeAboveAllocatedSizeInto
                (roundUpToPage(desiredHeapSize), address, &allocBytes);
    if (!alloc) {
        fprintf(stderr, "sqAllocateMemory: initial alloc failed!\n");
        exit(errno);
    }
    return (usqInt)alloc;
}

/* Allocate a region of memory of at least size bytes, at or above minAddress.
 *  If the attempt fails, answer null.  If the attempt succeeds, answer the
 * start of the region and assign its size through allocatedSizePointer.
 */
void *
sqAllocateMemorySegmentOfSizeAboveAllocatedSizeInto(sqInt size, void *minAddress, sqInt *allocatedSizePointer)
{
    char *address, *alloc;
    long bytes, delta;

    address = (char *)roundUpToPage((unsigned long)minAddress);
    bytes = roundUpToPage(size);
    delta = max(pageSize,1024*1024);

    while ((unsigned long)(address + bytes) > (unsigned long)address) {
        alloc = mmap(address, bytes, PROT_READ | PROT_WRITE,
                     MAP_ANON | MAP_PRIVATE, -1, 0);
        if (alloc == MAP_FAILED) {
            perror("sqAllocateMemorySegmentOfSizeAboveAllocatedSizeInto mmap");
            return 0;
        }
        /* is the mapping both at or above address and not too far above address? */
        if (alloc >= address && alloc <= address + delta) {
            *allocatedSizePointer = bytes;
            return alloc;
        }
        /* mmap answered a mapping well away from where Spur prefers.  Discard
         * the mapping and try again delta higher.
         */
        if (munmap(alloc, bytes) != 0)
            perror("sqAllocateMemorySegment... munmap");
        address += delta;
    }
    return 0;
} 
```

这似乎运作良好，在跳过任何现有映射的同时在升序地址分配内存。

高温高压

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-19T11:48:11.407

看来这[`posix_mem_offset()`](http://pubs.opengroup.org/onlinepubs/009696799/functions/posix_mem_offset.html)就是我一直在寻找的。

它不仅告诉您一个地址是否被映射，而且如果它恰好被映射，它会隐含地为您提供它所属的映射区域的边界（通过在`len`参数中提供 SIZE_MAX）。

因此，在执行之前 `MAP_FIXED`，我可以使用`posix_mem_offset()`来验证我正在使用的地址是否尚未映射。

我也可以使用[`msync()`](http://pubs.opengroup.org/onlinepubs/009696799/functions/msync.html)or [`mincore()`](http://www.kernel.org/doc/man-pages/online/pages/man2/mincore.2.html) （检查`ENOMEM`错误会告诉您地址已被映射），但那样我会更加盲目（没有关于地址映射区域的信息）。此外，`msync()`具有可能对性能产生影响的副作用，并且`mincore()`仅适用于 BSD（不是 POSIX）。

# c++ - C++ 从文件输入

> ID：14943992
> 
> 赞同：0
> 
> 时间：2013-02-18T19:37:09.730
> 
> 标签：c++, input, file-io

我必须在女童子军饼干上做一个程序，输入一个 .txt 文件，其中包含客户的名字、购买的盒子数量和 cookie 的名称。盒子的价格是 3.50 美元。在程序中，我必须显示客户姓名、售出的盒子、cookie 名称和应付金额。最后，显示客户数量、售出的总箱数和应付总额。这是我到目前为止所拥有的，我不确定它为什么不运行，或者至少说找不到文件，我已经在我的项目文件夹中制作了 .txt 文件，感谢任何帮助！我得到的错误是“无法启动程序...系统找不到指定的文件”。我很确定我的文件在正确的位置

```
#include <iomanip>
#include <string>
#include <fstream>
#include <iostream>
using namespace std;

int main()
{
    ifstream inFile;
    //Declare Variables

    string firstName;
    string cookieName;

    int boxesSold;
    int numCustomers;
    double amountDue;
    int totalCustomers;
    int totalBoxesSold = 0;
    double totalAmount = 0;

    inFile.open("girlscout.txt");
    if (inFile)
    {
        cout << "Customer     Boxes     Cookie Name" << endl;
        cout << "Name                              " << endl;

        while(!inFile.eof())//Not end of file
        {
            inFile >> firstName;
            inFile >> boxesSold;
            inFile >> cookieName;

            totalBoxesSold += boxesSold;
            totalAmount = boxesSold * 3.50;

            cout << setprecision(2) << fixed << showpoint;
            cout << setw(2) << firstName
            << right << setw(7) << boxesSold
            << cookieName << endl;
        }

        cout << "Total Boxes Sold: " << totalBoxesSold;
        cout << "Total Amount: " << totalAmount;
        inFile.close();
    }

    else
    {
        cout << "Could not open file " << endl;
    }

    system("pause");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T19:43:09.300

我认为您的问题是文件girlscout.txt 不在您需要它的目录中，以便您的程序找到它。您可以通过将完整路径放入 inFile.open 调用中来解决此问题，或者在同一目录中使用 Girlscout.txt 文件编译和运行可执行文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T21:54:09.597

您是否在 Visual Studio 上编译和运行？我认为你的错误只是意味着 *.exe 文件被自动移动到其他地方 - 当点击“运行”时它没有找到可执行文件本身。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T19:45:08.203

您的代码看起来是正确的（尽管它缺少所有错误处理）。运行应用程序时，检查您的文件是否在工作目录中。要查看是否只是查找文件的问题，请尝试将完整路径放入文件并查看它是否有任何更改。

否则，请检查您是否拥有文件的阅读权限。如果它仍然不起作用，您将不得不检查`in`状态并查看它失败的原因。根据您的操作系统，您可以使用特定于操作系统的函数来调查情况（Windows 上的 ReadFile，在您尝试打开文件时查看错误代码）。当您找到根本原因并修复它时，您可以返回到 ifstream 代码。

我猜你的意思是：

```
totalAmount += boxesSold * 3.50; 
```

# video - 重写视频后像素值发生变化

> ID：14943995
> 
> 赞同：0
> 
> 时间：2013-02-18T19:37:23.710
> 
> 标签：video, opencv, colors, osx-snow-leopard, pixel

我有灰度（X 射线）视频...问题是当我读写视频时，像素值会发生变化！！！我将像素值打印为灰色和 BGR，我得到了所有这些值......我阅读了视频，然后我使用 openCV 编写它，然后我重新打印像素值，我看到像素值不同！

我在 MAC 10.6.8 上使用 openCV 2.4.3 和 FFMPEG 0.11

为什么像素值改变了？...如何在不更改像素值的情况下读写视频？顺便说一句：原始视频已使用 YUV240 像素格式的 FFMPEG 在 Windows 中编写！

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T03:14:19.430

像素值会发生变化，因为 openCV 默认将帧转换为 BGR！读取操作进行转换过程，我猜，这就是像素变化的原因

我希望这可以帮助面对这个问题的人，要获得确切的值，您可以使用提供大量像素格式的 FFMPEG 读写视频

# php - 通用日期解析器？

> ID：14943999
> 
> 赞同：1
> 
> 时间：2013-02-18T19:37:30.183
> 
> 标签：php, regex, date, format

我正在将一个值列表传递给一个函数，以在特定类型的值之间进行转换。例如，如果传递了一个 PHP 日期，或者传递了一个时间戳，我想转换为特定的日期格式。这是我现在拥有的代码：

```
 public static function attemptParseString($str) {
        $check = strtotime($str);
        if ($check !== FALSE) {
            return date(ts_default_date_format, $check).' <span class="grey">(Orig: '.$str.')</span>';
        }
        $check = date(ts_default_date_format, $str);
        if ($check !== FALSE) {
            return $check.' <span class="grey">(Orig: '.$str.')</span>';
        }
        return $str;
    } 
```

大多数日期值（如“1361215542”和“2013-02-18 13:25:42”）按预期返回，但我遇到了一些奇怪的问题，例如“127.0.0.1”解析为“1969-12-31 18”： 02:07'，'GET' 解析为 '2013-02-18 04:25:42' 和 '80' 解析为 '1969-12-31 18:01:20'。

除了检查日期函数是否将其解析为日期之外，我如何智能地确定字符串是否为有效日期？

我见过类似的问题，如下所示，但它们并不完全正确（有些是不同的编程语言，有些包含所有有效日期但格式不同[而我包含日期和非日期字符串）。

[使用 Universal Feed Parser 获取日期的问题](https://stackoverflow.com/questions/1022504/problem-getting-date-with-universal-feed-parser) [所有格式的日期解析器](https://stackoverflow.com/questions/7742323/date-parser-for-all-formats) [Date() 函数的意外结果](https://stackoverflow.com/questions/14514034/unexpected-result-from-date-function)

谢谢！