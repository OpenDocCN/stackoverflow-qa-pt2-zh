# StackOverflow 问答 14834000-14834999

# wpf - DataGrid 行高的 DataGridTextColumn.width="*" 的任何等效项？

> ID：14834002
> 
> 赞同：1
> 
> 时间：2013-02-12T13:45:11.500
> 
> 标签：wpf, wpfdatagrid

在我的理解中，通过给出值“ *”，DataGridColumn 扩展以填充所有可用的边距`DataGrid`。我通常会*为所有列指定“”以使它们的宽度相等并且不留余量。

```
<DataGrid.Columns>
    <DataGridTextColumn Header="Header" Width="*"/>
    <DataGridTextColumn Header="Header" Width="*"/>
    <DataGridTextColumn Header="Header" Width="*"/>
    <DataGridTextColumn Header="Header" Width="*"/>
    <DataGridTextColumn Header="Header" Width="*"/>
    <DataGridTextColumn Header="Header" Width="*"/>
</DataGrid.Columns> 
```

但是，如果我的 DataGrid 被旋转，并且第一行用作实际的列标题会怎样（这听起来可能是一个糟糕的设计，但是......）。在那种情况下，是否有办法让所有行的高度均等化，并且不留余量？

```
<DataGrid.Columns>
    <DataGridTextColumn Header="Header"/>
    <DataGridTextColumn Header="Header"/>
    <DataGridTextColumn Header="Header"/>
    <DataGridTextColumn Header="Header"/>
    <DataGridComboBoxColumn Header="Header"/>
    <DataGridTextColumn Header="Header"/>
    <DataGridComboBoxColumn Header="Header"/>
    <DataGridTextColumn Header="Header"/>
    <DataGridTextColumn Header="Header"/>
</DataGrid.Columns>
<DataGrid.LayoutTransform>
    <TransformGroup>
        <RotateTransform Angle="-90" />
        <ScaleTransform ScaleX="1" ScaleY="-1" />
    </TransformGroup>
</DataGrid.LayoutTransform>
<DataGrid.ColumnHeaderStyle>
    <Style TargetType="{x:Type DataGridColumnHeader}"
            BasedOn="{StaticResource {x:Type DataGridColumnHeader}}">
        <Setter Property="LayoutTransform">
            <Setter.Value>
                <TransformGroup>
                    <RotateTransform Angle="-90" />
                    <ScaleTransform ScaleX="1" ScaleY="-1" />
                </TransformGroup>
            </Setter.Value>
        </Setter>
    </Style>
</DataGrid.ColumnHeaderStyle>
<DataGrid.CellStyle>
    <Style  TargetType="DataGridCell">
        <Setter Property="LayoutTransform">
            <Setter.Value>
                <TransformGroup>
                    <RotateTransform Angle="-90" />
                        <ScaleTransform ScaleX="1" ScaleY="-1" />
                </TransformGroup>
            </Setter.Value>
        </Setter>
    </Style>
</DataGrid.CellStyle> 
```

# c# - 具有虚拟属性的部分类？

> ID：14834004
> 
> 赞同：0
> 
> 时间：2013-02-12T13:45:15.740
> 
> 标签：c#, partial-classes

部分类中是否可以有虚拟属性？在我的场景中，我们有自动生成的类，这些类被我们的 Micro-ORM 使用并精确映射到我们的数据库表。

但是，我们经常希望扩展这些类，因此`partial`在这种情况下使用关键字绝对没问题。

不过，我有一种情况，我想在部分类中覆盖自动生成的 getter。

例如：

```
public partial class MyClass {
   public int MyProperty{ get; set; }
} 
```

..我想覆盖`get`并实现一些自定义逻辑**而不**操纵自动生成的代码。这是至关重要的。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T14:02:34.640

也许您可以修改自动生成的类以将获取和设置放在其他文件中。例子：

```
// file: MyClass_1.cs
public partial class MyClass
{
   public int MyProperty
   {
      get { this.MyPropertyGet(); }
      set { this.MyPropertySet(value); }
   }
} 
```

在其他文件中：

```
// file: MyClass_2.cs
public partial class MyClass
{
   private int _myProperty;

   private int MyPropertyGet()
   {
      return _myProperty;
   }

   private void MyPropertySet(int value)
   {
      _myProperty = value;
   }
} 
```

# php - 导致电子邮件提交转到 404 的复选框

> ID：14834008
> 
> 赞同：2
> 
> 时间：2013-02-12T13:45:28.353
> 
> 标签：php, wordpress

我创建了一个表单（我省略了部分），它收集用户的复选框选择（通过 Wordpress 创建）并将结果通过电子邮件发送给我。

当我勾选硬件选择并提交时，电子邮件正常，但是当我勾选任何附件并单击提交时，它会进入 404 页面。

谁能看到错误在哪里？我以同样的方式创建了两组复选框和结果，只是看不到错误在哪里！

```
<form id="customisesystem" name="enquiry" method="POST" onSubmit="return formCheck(this);" action="<?php echo the_permalink(); ?>">
  <div id="customise-area">
    <?php $posts = get_field('options');
                            if( $posts ):
                            $items = 0;
                            foreach( $posts as $post): // variable must be called $post (IMPORTANT)
                                setup_postdata($post); ?>
    <div class="custom-option">
      <p><b>
        <?php the_title(); ?>
        </b></p>
      <br />
      <div>
        <p><?php echo the_field('description'); ?></p>
      </div>
      <?php $counter = 1; while(the_repeater_field('images')): ?>
      <?php if($counter <= 1) { ?>
      <img width="180" height="136" src="<?php the_sub_field('image'); ?>" alt="<?php the_title(); ?>" />
      <?php } ?>
      <?php $counter++; endwhile; ?>
      <p>
        <input type="checkbox" name="hardware[]" value="<?php the_title(); ?>">
        Select</p>
      <div class="clear"></div>
    </div>
    <?php $items++; endforeach;
                            wp_reset_postdata(); // IMPORTANT - reset the $post object so the rest of the page works correctly
                            endif; ?>
  </div>
  <div id="customise-area">
    <?php $posts = get_field('accessories');
                            if( $posts ):
                            $items = 0;
                            foreach( $posts as $post): // variable must be called $post (IMPORTANT)
                                setup_postdata($post); ?>
    <div class="custom-option">
      <p><b>
        <?php the_title(); ?>
        </b></p>
      <br />
      <div>
        <p><?php echo the_field('description'); ?></p>
      </div>
      <?php $counter = 1; while(the_repeater_field('images')): ?>
      <?php if($counter <= 1) { ?>
      <img width="180" height="136" src="<?php the_sub_field('image'); ?>" alt="<?php the_title(); ?>" />
      <?php } ?>
      <?php $counter++; endwhile; ?>
      <p>
        <input type="checkbox" name="accessories[]" value="<?php the_title(); ?>">
        Select</p>
      <div class="clear"></div>
    </div>
    <?php $items++; endforeach;
                            wp_reset_postdata(); // IMPORTANT - reset the $post object so the rest of the page works correctly
                            endif; ?>
  </div>
  <? if(isset($_POST['submit'])) { 

$to = "rob@domain.com";
$header = 'From: rob@domain.com';
$subject = "Domain: Quotation";
$enquiry_first_name = $_POST['enquiryfirstname'];
$enquiry_last_name = $_POST['enquirylastname'];
$enquiry_title = $_POST['enquirytitle'];
$enquiry_organisation = $_POST['enquiryorganisation'];
$enquiry_address = $_POST['enquiryaddress'];
$enquiry_country = $_POST['enquirycountry'];
$enquiry_email_address = $_POST['enquiryemailaddress'];
$enquiry_telephone = $_POST['enquirytelephone'];
$enquiry_additional_comments = $_POST['enquiryadditionalcomments'];
$enquiry_product = get_the_title();
if(!empty($_POST['hardware'])) {
    foreach($_POST['hardware'] as $check) {
        $hardwareresults .= $check."\n";
    }
}
if(!empty($_POST['accessories'])) {
    foreach($_POST['accessories'] as $test) {
        $accessoriesresults .= $test."\n";
    }
}

$body = "You have a quote request from the website:

Quotation:
$enquiry_product

Hardware:
$hardwareresults

Accessories:
$accessoriesresults

Name: $enquiry_title $enquiry_first_name $enquiry_last_name
Type of organisation: $enquiry_organisation 
Address: $enquiry_address, $enquiry_country
E-Mail: $enquiry_email_address 
Tel: $enquiry_telephone
Comments: $enquiry_additional_comments

Kind regards";

mail($to, $subject, $body, $header);

echo "Thank you for your enquiry.";

} ?>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T13:54:09.637

**要开始**`htmlspecialchars`在值输出中使用：

```
<input type="checkbox" name="accessories[]" value="<?php the_title(); ?>">
<input type="checkbox" name="accessories[]" value="<?php htmlspecialchars(the_title()); ?>"> 
```

**第二**：你`formCheck`两次，

> ```
> in <form id="customisesystem"> and `<input type="submit" />`. 
> ```

只留下一个。

**第三，也是最重要的。**

WP 不像你想象的那样工作。在以下情况下，应在合适`hook`的 as内检查`init`：

```
add_action('init', 'check_form');
function check_form(){
    if(isset($_POST['submit'])){ 
        // check form
        if (is_OK)
            // redirect to same page
            wp_redirect($my_url);
        else
            // continue to show the form to allow modification
    }
} 
```

* * *

**第四**`expects parameter 1 to be string, array given`：您的页面显示由于php 函数而导致的消息错误。所以这样做：

转到第 1452 和 968 行并调试传递给这些函数的变量并显示它们是什么：

> var_dump()

可能你正在做这样的事情：

```
trim($_POST['accessories']); 
```

但你应该这样做：

```
foreach ($_POST['accessories'] as $val)
{
    $new_val = $val;
    $new_val = trim($new_val);
    $new_val = strip_tags($new_val);

    // more ....
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T13:59:38.730

我认为，这并没有直接对上面的代码做任何事情（或者错误将被称为对影响这种行为的 CMS 内部函数的约束函数调用），但我查看了发布的站点并尝试了它.

当一切正常时，URL 与 404 错误相同（并且两者都带有`200 OK`HTTP 标头输出。这很奇怪，似乎这是您运行它的整个系统的问题。我看过404页面，发现一些PHP错误，首先输出：

> **警告**：trim() 期望参数 1 是字符串，数组在 **/home/teamwork/public_html/clients/rogue/wp-includes/query.php中的第****1452** 行
> 
> **警告**：strip_tags() 期望参数 1 是字符串，给定数组在 **/home/teamwork/public_html/clients/rogue/wp-includes/formatting.php** 第**968行**

可能会调用这些 WordPress 函数。您可以调试它们的确切调用位置/时间吗？

也许这会影响您的 CMS 进入错误模式而不是呈现正确的视图？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T15:57:44.637

在这个问题上花了 2 天后，我找到了最令人沮丧的答案！在我将复选框值设置为 的地方`accessories[]`，我将其更改为`access[]`并且它起作用了。

我不能完全解释为什么，但它会是值 var 的长度吗？

# javascript - 需要帮助 javascript array = [] 以及如何输出带有值的数组中的变量名

> ID：14834015
> 
> 赞同：-2
> 
> 时间：2013-02-12T13:45:40.407
> 
> 标签：javascript, arrays

我有一个关于数组的问题如下

```
array = {} 
```

和

```
array = []; 
```

它是否相同？

也想问

```
array { ID1 : "apple", ID2 : "Orange"} 
```

和

```
array [ID1 : "apple", ID2 : "Orange"]; 
```

哪个是对的？。

现在我用下面的代码编写我的代码，需要你的帮助来教我关于 ARRAY 的知识。

```
var Store = [ store = 0, store1 = 0, store2 = 0,store3 = 0,store4 = 0];
var stock1 = 77,stock2 = 47,stock3 = 37,stock4 = 27,stock5 = 17;

for(i=0;i<stock1;i++){
store[0]++
}
var Sum_1 = Store;
document.getElementById('show1').innerHTML=Sum_1; 
```

输出将是

```
77 
```

我的问题是我如何输出它成为

```
store = 77
store1 = 47
store2 = 37 
```

大多数与 ID 或 Name 一起和值。

太感谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:10:01.210

`[]`用于文字**数组**声明，`{}`用于文字**对象**声明。

使用以下方法初始化没有值的数组：

```
var my_array = []; 
```

并带有值：

```
var my_array = [1, 2, 3]; 
```

请注意，您**不能通过**此设置索引。你必须这样做：

```
var my_array = [];
my_array["one"] = 1;
// etc. 
```

然后你可以得到“1”回来`my_array["one"]`

如果您想获得实际的索引名称或“*键*”，那么您需要做一些诡计：

```
var outputString = "";

function ListAll()
{
    for(var key in my_array)
    {
        if(my_array.hasOwnProperty(key)) // Check if the key is actually a property (index)
        {
            outputString += key + " = " + my_array[key]; // add to string
        }
    }

    alert(outputString); // or assign the string to a div, whatever you need
} 
```

在此示例中，`key`将是索引和`my_array[key]`实际值

# jsf-2 - 在 JSF 登录期间何时创建会话？

> ID：14834016
> 
> 赞同：6
> 
> 时间：2013-02-12T13:45:42.293
> 
> 标签：jsf-2, session-state

在 JSF 中，似乎会话是在成功登录**之前创建的。**即简单地请求登录页面会导致创建一个新会话。

为收到的每个请求而不是每个成功登录的用户创建会话似乎非常浪费（并且容易受到 DDoS 攻击）。

下面的代码非常通用，但显示了我所指的那种简单场景。

索引.xhtml：

```
<html>
    <body>
        <h:form id="login">
            <h:outputLabel for="username">Username</h:outputLabel>
            <p:inputText id="username" name="username" value="#{userController.username}"/>
            <h:outputLabel for="password">Password</h:outputLabel>
            <p:password id="password" name="password" value="#{userController.password}"/>

            <p:commandButton id="loginButton" value="login" action="#{loginController.login}"/>
        </h:form>
    </body>
</html> 
```

登录控制器.java

```
@ViewScoped
public class LoginController implements Serializable {

    String username;
    String password;

    public void login(){
        HttpServletRequest request = (HttpServletRequest) FacesContext.getCurrentInstance().getExternalContext().getRequest();
        if (request.getSession(false) == null){
            System.out.println("No session.");
        } else {
            System.out.println("Session already exists.");
        }

        try {
            request.login(username, password);
        } catch (ServletException e) {
            FacesContext.getCurrentInstance.addMessage(null, new FacesMessage("Login failure", e.getMessage()));
        }
    }

    // username and password getters/setters

} 
```

**编辑：杂乱无章的代码示例已修复**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-12T14:06:50.417

首先，您的测试方法是完全错误的。

```
if (request.getSession() == null){
    System.out.println("No session.");
} else {
    System.out.println("Session already exists.");
} 
```

请仔细阅读无参数方法的[javadoc 。](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getSession%28%29)`getSession()`你会意识到它**永远不会**回来`null`。

回到具体问题，默认情况下 JSF 确实会自动创建会话，因为 JSF 视图状态必须存储在那里。如果将 JSF 状态保存方法设置为`client`而不是`server`，则它不会存储在 session 中，因此不需要创建 session。

```
<context-param>
    <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
    <param-value>client</param-value>
</context-param> 
```

在即将到来的 JSF 2.2 中，您也可以将 bean 放在请求范围内并使用它`<f:view transient="true">`来完全无状态。这适用于自 Mojarra 2.1.19 起才可用的当前 JSF 2.1 版本。另请参阅例如来自 Mojarra 开发人员之一的[此博客。](http://weblogs.java.net/blog/mriem/archive/2013/02/08/jsf-going-stateless?force=255)

# c# - EF - linq2entities 不识别 .tostring() 方法？

> ID：14834018
> 
> 赞同：1
> 
> 时间：2013-02-12T13:46:00.120
> 
> 标签：c#, .net, asp.net-mvc, entity-framework

我无法编译以下代码，并且出现以下错误：

```
LINQ to Entities does not recognize the method 'System.String ToString() 
```

我有点惊讶，因为我能够在 Linq2SQL 中做到这一点，但不能在实体框架中做到这一点。

请问重写下面的代码有什么帮助吗？我已经看到了一些与此错误相关的示例，但我找不到特定于此场景的内容。谢谢

```
 using (ctx)
 {
                   var productResults = (from q in ctx.Products
                                         where q.ProductId == productId && q.Model == productModel
                                         select new Models.ProductDTO
                                         {
                                             Id = q.ProductId,
                                             Name = q.Name.ToString(),
                                             Year = q.Year.ToString("MMM ddd d HH:mm yyyy"),
                                             Model = q.Model,
                                             Description = q.Description.ToString()
                                         }).Distinct().ToList().AsParallel();
                   Department.Products = productResults;
                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T13:50:46.937

首先从`context`

```
var productResults = ctx.Products.where(q => q.ProductId == productId && q.Model == productModel).ToList(); 
```

然后查询是并选择新类型为`ProductDTO`

```
var productDTO = (from q in productResults 
                 select new Models.ProductDTO
                 {
                      Id = q.ProductId,
                      Name = q.Name.ToString(),
                      Year = q.Year.ToString("MMM ddd d HH:mm yyyy"),
                      Model = q.Model,
                      Description = q.Description.ToString()
                 }).Distinct().ToList().AsParallel(); 
```

**评论后**

可数：

```
IEnumerable<Products> list = context.Products.Take(10);
// after this line data load the memory that fetched from DB. 
```

SQL 输出：

```
 Select * FROM Table 
```

可查询：

```
IQuerable<Products> list = context.Products.Take(10);
// data still not fetch from DB 
```

SQL 输出：

```
 Select Top 10 FROM Table 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T13:51:54.337

您也可以在一个查询中执行此操作；

```
 var productResults = ctx.Products.Where(q => q.ProductId == productId && q.Model == productModel).ToList()
                .Select<Product, ProductDTO>(m =>
                {
                    Models.ProductDTO dto= new Models.ProductDTO();
                    dto.Id = m.ProductId;
                    dto.Name = m.Name.ToString();
                    dto.Year = m.Year.ToString("MMM ddd d HH:mm yyyy");
                    dto.Model = m.Model;
                    dto.Description = m.Description.ToString();
                    return dto;
                }).Distinct().ToList().AsParallel(); 
```

可能有更好的方法，但将其分成两个查询可能会起作用。

```
var productResults = (from q in ctx.Products
     where q.ProductId == productId && q.Model == productModel
     select q).ToList();

var temp = from o in productResults
         select new Models.ProductDTO
         {
             Id = q.ProductId,
             Name = q.Name.ToString(),
             Year = q.Year.ToString("MMM ddd d HH:mm yyyy"),
             Model = q.Model,
             Description = q.Description.ToString()
         }).Distinct().ToList(); 
```

# c# - 如何使用 .Net Regex 匹配除“仅空格”之外的任何内容

> ID：14834019
> 
> 赞同：4
> 
> 时间：2013-02-12T13:46:05.977
> 
> 标签：c#, regex

当字符串包含任何内容但不包含“仅空格”时，我想匹配它。

空间很好，只要有其他东西，就可以在任何地方。

当空间出现在任何地方时，我似乎无法匹配。

（编辑：我希望在正则表达式中执行此操作，因为我最终想将它与其他正则表达式模式结合使用 | ）

这是我的测试代码：

```
class Program
{
    static void Main(string[] args)
    {
        List<string> strings = new List<string>() { "123", "1 3", "12 ", "1  " , "  3", "   "};

        string r = "^[^ ]{3}$";
        foreach (string s in strings)
        {
            Match match = new Regex(r).Match(s);
            Console.WriteLine(string.Format("string='{0}', regex='{1}', match='{2}'", s, r, match.Value));
        }
        Console.Read();
    }
} 
```

这给出了这个输出：

```
string='123', regex='^[^ ]{3}$', match='123'
string='1 3', regex='^[^ ]{3}$', match=''
string='12 ', regex='^[^ ]{3}$', match=''
string='1  ', regex='^[^ ]{3}$', match=''
string='  3', regex='^[^ ]{3}$', match=''
string='   ', regex='^[^ ]{3}$', match='' 
```

我想要的是这样的：

```
string='123', regex='^[^ ]{3}$', match='123' << VALID
string='1 3', regex='^[^ ]{3}$', match='1 3' << VALID
string='12 ', regex='^[^ ]{3}$', match='12 ' << VALID
string='1  ', regex='^[^ ]{3}$', match='1  ' << VALID
string='  3', regex='^[^ ]{3}$', match='  3' << VALID
string='   ', regex='^[^ ]{3}$', match=''    << NOT VALID 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T14:04:18.647

我会用

```
^\s*\S+.*?$ 
```

打破正则表达式...

*   `^`- 线的开始
*   `\s*`- 零个或多个空白字符
*   `\S+`- 一个或多个非空白字符
*   `.*?`- 任何字符（空格与否 - 非贪婪 -> 尽可能少地匹配）
*   `$`- 行结束。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-12T13:47:46.900

这里不需要正则表达式。您可以使用[`string.IsNullOrWhitespace()`](http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k%28SYSTEM.STRING.ISNULLORWHITESPACE%29;k%28TargetFrameworkMoniker-%22.NETFRAMEWORK%2cVERSION%3dV4.0%22%29;k%28DevLang-CSHARP%29&rd=true)

一个正则表达式是这样的：

```
[^ ] 
```

这样做很简单：它检查您的字符串是否包含任何不是空格的内容。

`match.Success`我通过添加到输出稍微调整了您的代码：

```
var strings = new List<string> { "123", "1 3", "12 ", "1  " , "  3", "   ", "" };

string r = "[^ ]";
foreach (string s in strings)
{
    Match match = new Regex(r).Match(s);
    Console.WriteLine(string.Format("string='{0}', regex='{1}', match='{2}', " +
                                    "is match={3}", s, r, match.Value,
                                    match.Success));
} 
```

结果将是：

```
string='123', regex='[^ ]', match='1', is match=True
string='1 3', regex='[^ ]', match='1', is match=True
string='12 ', regex='[^ ]', match='1', is match=True
string='1  ', regex='[^ ]', match='1', is match=True
string='  3', regex='[^ ]', match='3', is match=True
string='   ', regex='[^ ]', match='', is match=False
string='', regex='[^ ]', match='', is match=False 
```

顺便说一句：而不是`new Regex(r).Match(s)`你应该使用`Regex.Match(s, r)`. 这允许正则表达式引擎缓存模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T13:48:11.277

使用`^\s+$`并简单地否定 的结果`Match()`怎么样？

# javascript - 数组对象与数组文字 - 性能 JavaScript

> ID：14834025
> 
> 赞同：0
> 
> 时间：2013-02-12T13:46:15.413
> 
> 标签：javascript

今天我正在浏览stackoverflow中的一些帖子，这个回复刚刚弹出。 [https://stackoverflow.com/a/2280350/548591](https://stackoverflow.com/a/2280350/548591)

[https://stackoverflow.com/a/11513602/548591](https://stackoverflow.com/a/11513602/548591)

```
var name = [];
var name = new Array(); 
```

就性能而言，字面意思是否比初始化`new Array Object`.

**现在正在看这篇文章，只是想更新。**

[http://yuiblog.com/blog/2006/11/13/javascript-we-hardly-new-ya/](http://yuiblog.com/blog/2006/11/13/javascript-we-hardly-new-ya/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T13:51:55.127

从我自己直接实现 ECMA 语法到制作解析器，我可以告诉你：

Array 文字`[]`被直接解析，然后转换为数组对象，而`new Array()`首先被解析为“表达式”，然后检查 new 关键字，然后检查您想要创建的内容（在这种情况下`Array`），然后进行评估。

我无法准确告诉您使用 会损失多少性能`new Array()`，它因 Javascript 引擎而异。例如，V8 (Chrome) 会预编译代码以对其进行优化，因此`[]`无论如何它都可能被转换为文字，具体取决于它的工作方式。

最简单的方法是创建一个测试函数，该函数创建几十万个数组，并分别使用文字声明或构造函数初始化来测量循环的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T13:52:04.797

是的，根据测试，初始化`[]`比使用`new Array`. 除此之外，文字版本更具可读性。
这[已经被问到了](https://stackoverflow.com/questions/7375120/why-arr-is-faster-than-arr-new-array)！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T13:52:09.090

根据浏览器的不同，**[Literals 的速度似乎快了两倍](http://jsperf.com/array-object-array-literal)**。也就是说，在存在显着差异的浏览器中。

# php - 在不创建依赖项的情况下避免幻数

> ID：14834028
> 
> 赞同：9
> 
> 时间：2013-02-12T13:46:17.273
> 
> 标签：php, dependency-injection, enums, tightly-coupled-code

我正在为我正在处理的 API 创建一个错误管理器。这个想法是它提供了一个可以从 API 返回的错误代码的单一存储，确保以相同的方式处理不同调用中的相同错误（例如，请求中缺少所需的值）。

我最初的方法是：

```
$this->_errorManager->setError(ErrorCodes::REQUIRED_FIELD); 
```

但是，这会在我想设置错误的任何地方创建对错误代码类的依赖。

替代方案是：

```
$this->_errorManager->setError(100); 
```

但是现在我的代码中间有一个数字，这没有任何意义。

虽然我可以想到这个特定问题的解决方案，但在其他情况下我会想要使用“枚举”，而我想不出一个不紧密耦合类的解决方案。

有没有更好的方法来做到这一点，或者我可以采取不同的方法来删除幻数？还是我必须根据具体情况接受和考虑紧密耦合？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T13:56:59.300

这是所需的耦合。虽然让应用程序和它的错误管理器松散耦合是个好主意，但没有理由将应用程序和它的错误代码分开，它们*属于一起*。

**依赖项：**

```
+-----------------------+
|Application error codes|<------------+
+-----------------------+             |
           ^                          |
           |                          |
+----------+----------+               |
|Application component|               |
+----------+----------+               |
           |                          |
           v                          |
+-----------------------+     +-------+-----+
|Error handler interface|<|---+Error handler|
+-----------------------+     +-------------+ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T15:35:08.080

您可以使用“预处理器”宏和生成文件来清除*其中一些障碍。*预处理器宏来自[m4](http://www.gnu.org/software/m4/)。

假设您维护一个这样的错误代码文件。

```
 define(`ERR_REQUIRED_FIELD',`100')dnl 
```

然后，您可以编写带有英文错误“constant”的 PHP 代码。

```
$this->_errorManager->setError(ERR_REQUIRED_FIELD); 
```

并在您的 makefile 中包含一行通过 m4 运行这两个文件。管理它的方法不止一种。（为简洁起见，我省略了 makefile，只是通过 m4 运行我的测试文件。）

```
$ m4 test.php.m4 > test.php
$ cat test.php
$this->_errorManager->setError(100); 
```

这*确实*引入了依赖；php 文件将全部依赖于错误代码文件。但这是一个微不足道的依赖关系，可以通过 makefile 轻松管理。在实践中，我可能会构建一个看起来像这样的错误代码文件。. .

```
ERR_DISK_FULL
ERR_REQUIRED_FIELD
ERR_MISSING_ARG 
```

并使用文本实用程序`make`和

*   构建 m4 宏定义，或
*   为您的 ErrorCodes 模块构建定义。

数值等于行号；这保证您永远不会有重复的错误代码。

# jquery - jQuery - 如果悬停超过 5 秒然后显示 div

> ID：14834035
> 
> 赞同：3
> 
> 时间：2013-02-12T13:46:32.873
> 
> 标签：jquery, function, timeout

如果我将鼠标悬停在一个元素上超过 5 秒，我想显示一个 div，我尝试了一些在 stackoverflow 中发布的解决方案，但它们都不起作用。

这是我没有超时的悬停功能

```
$('div.avatar-with-data, .q-item-avatar').hover(function(){
        $(this).find('div.user-data').fadeIn('fast');
    },function(){
        $(this).find('div.user-data').fadeOut('fast');
    }); 
```

**更新**

没有答案有效，但如果我改变

`$(this).find('div.user-data').fadeIn('fast');`

到

`alert('shown');`

然后它起作用了（不明白为什么，尝试将 fadeIn 更改为 show() 但仍然没有运气）。但是我上面的悬停功能可以在没有超时的情况下工作。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-12T13:48:58.503

试试这个

```
var tOut;
$('div.avatar-with-data, .q-item-avatar').hover(function(){
    tOut = setTimeout(function(){
        $(this).find('div.user-data').fadeIn('fast');
    },5000);
},function(){
    clearTimeout(tOut);
    $(this).find('div.user-data').fadeOut('fast');
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T13:49:23.747

应该相对直截了当。您需要在它们悬停时启动 5 秒的超时，并在它们停止悬停时清除它。

```
var hoverTimeout;

$('div.avatar-with-data, .q-item-avatar').hover(function() {
    hoverTimeout = setTimeout(function() {
        $(this).find('div.user-data').fadeIn('fast');
    }, 5000);
}, function() {
    clearTimeout(hoverTimeout);
    $(this).find('div.user-data').fadeOut('fast');
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-12T14:42:05.377

使用[hoverIntent](http://cherne.net/brian/resources/jquery.hoverIntent.html)，语法本质上与 hover 相同。它超级简单，并且通过一些额外的奖励完全符合您的要求。HoverIntent 比计划悬停做得更好，可以弄清楚你什么时候真正在悬停，以及为什么你的鼠标刚刚经过。

```
var config = {    
     over: makeTall, // function = onMouseOver callback (REQUIRED)    
     timeout: 500, // number = milliseconds delay before onMouseOut    
     interval: 5000, // number = milliseconds delay before trying to call over    
     out: makeShort // function = onMouseOut callback (REQUIRED)    
};

$("#demo3 li").hoverIntent( config ) 
```

直接从上面提供的 hoverIntent 链接的第一页...

**间隔：** hoverIntent 在读取/比较鼠标坐标之间等待的毫秒数。当用户的鼠标第一次进入元素时，它的坐标被记录下来。最快可以调用“over”函数是在单个轮询间隔之后。将轮询间隔设置得更高会增加第一次可能的“过度”调用之前的延迟，但也会增加到下一个比较点的时间。默认间隔：100

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T13:49:33.757

您需要存储一个变量，然后使用`setTimeout()`. 像这样的东西应该工作：

```
var timer;

$('div.avatar-with-data, .q-item-avatar').hover(function() {  
    hovered = true;
    timer = window.setTimeout(function() {  
            $(this).find('div.user-data').fadeIn('fast');
    }, 5000);
}, function() {  
    window.clearTimeout(timer); 
    $(this).find('div.user-data').fadeOut('fast');
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-12T13:53:42.973

也许使用 Javascript Timeout 功能？

将显示 div 的函数的超时设置为 5000（5 秒）。并在您悬停时清除超时。尚未对此进行测试，但希望它会进一步帮助您...

```
var timeout;

$('div.avatar-with-data, .q-item-avatar').hover(function(){
        timeout=setTimeout(showTooltip,5000);    
    },function(){      
        hideTooltip();
    });

function showTooltip() {
   $(this).find('div.user-data').fadeIn('fast');
   clearTimeout(t);
}

function hideTooltip() {
   $(this).find('div.user-data').fadeOut('fast');
  clearTimeout(timeout);
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-04-27T15:33:26.860

我是 Stack Overflow 论坛的新用户。希望能帮到你！我喜欢用像流这样的小代码来解决问题：

```
$(".liveUser").on("mouseover mouseout", function(event) {
  if (event.type !== "mouseover")
    clearTimeout(showID);
  showID = setTimeout(function() {$(".userDetail")[(event.type === "mouseover"?"show":"hide")]()}, (event.type === "mouseover"?3000:0));
}); 
```

我希望我对你有帮助！朱利亚诺

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-05-26T06:55:53.220

**此代码还将避免多次弹跳**

```
 var myVar;
 $(".liveUser").on({
        mouseenter: function () {
        myVar = setTimeout(function(){
             $(".userDetail").stop().hide().fadeIn();
                 }, 400);
        },
        mouseleave: function () {
            clearTimeout(myVar);
            $(".userDetail").stop().fadeOut();
       }
   }); 
```

# asp.net-mvc - 未提供所需的防伪令牌或无效 - 仅限 Safari

> ID：14834036
> 
> 赞同：5
> 
> 时间：2013-02-12T13:46:36.100
> 
> 标签：asp.net-mvc, cookies, safari

我有一个带有典型 xss 保护的 asp.net mvc 2 项目

`<%=Html.AntiForgeryToken() %>`在每个表单内和`[ValidateAntiForgeryToken]`每个 Post 操作上。

这在 Chrome、Firefox 和 IE 中按预期工作。

但我在 Safari (v 5.1.7) 中收到以下错误。

> System.Web.Mvc.HttpAntiForgeryException：未提供所需的防伪令牌或无效。

我看到异常的原因`RequestValidationToken`是创建的 cookie 的过期日期不正确`Mon, 01 Jan 2001`，而在其他浏览器中正确设置为`Session`.

**如何让 Safari 停止为我的 Anti-Forgery cookie 分配虚假的到期日期？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T01:58:16.443

我通过从 IIS 的身份验证提供程序列表中删除“协商”解决了这个问题。

与 safari 的此问题类似：

[Windows 7 中 Safari 5.x 的 Windows 身份验证问题](https://stackoverflow.com/questions/12817452/windows-authentication-issue-with-safari-5-x-in-windows-7)

# android - Android 活动生命周期 - 相同的方法被调用两次

> ID：14834037
> 
> 赞同：2
> 
> 时间：2013-02-12T13:46:36.700
> 
> 标签：android, android-activity

我有一个方法可以从`onNavigationItemSelected`of`ActionBar`和`onResume`生命周期方法中调用。因此，当`Activity`创建方法时，该方法被调用两次。

那么当方法被调用时，是否有可能实现这样的方法`onNavigationItemSelected`，它不应该被调用`onResume`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T13:49:56.283

只在`onResume`. `onResume`在第一次创建 Activity 时调用。有关详细信息，请参阅[活动生命周期](http://developer.android.com/reference/android/app/Activity.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T13:43:11.190

使用此处使用的手动标志/布尔值[android action bar onNavigationItemSelected](https://stackoverflow.com/questions/9517749/android-action-bar-onnavigationitemselected)

这样您就可以忽略对 onNavigationItemSelected 方法的第一次调用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T13:56:47.367

在 Activity 生命周期中，OnCreate() 只被调用一次，而 OnResume() 每次在停止、暂停、启动和 OnCreate 之前被调用。所以决定你真正想要什么。如果您想在每个简历上调用方法，那么只能在 OnResume 中调用它，而不是在 OnCreate 中调用它。

# class - Matlab：类对象的空闲内存

> ID：14834040
> 
> 赞同：3
> 
> 时间：2013-02-12T13:46:49.153
> 
> 标签：class, matlab, memory

我最近使用 Matlab 的 OOP 编写了一些代码。在每个类对象中，我将一些测量数据保存为属性并定义评估它们的方法。对于平均数据集，一个类对象使用大约 32 MB 的内存。现在我正在编写一个应该处理这些对象的 GUI。

在第一步中，我从保存的 .mat 文件（大约 200 个对象，硬盘上 2GB）加载一组对象并将它们存储在句柄结构中。它们填满 RAM 并在加载时使用大约 6-7 GB。这没有问题。

但是如果我关闭 GUI，我似乎无法释放已使用的内存。我尝试了不同的方法，但没有成功。

在类的析构函数中将数据字段设置为“空”：

```
function delete(obj)
    obj.timeVector = [];
    obj.valueVector = [];
end 
```

在图中尝试释放它_CloseRequestFcn：

```
function figure_CloseRequestFcn(hObject, eventdata, handles)
    handles.data = [];
    handles = rmfield(handles,'data');
    guidata(hObject,handles);
    clear handles;
    pack; %Matlab issues a warning, that pack could only 
          %be used from the command line, but that did
          %not work either
    delete(hObject);
end 
```

除了在使用 GUI 后每次都关闭 Matlab 之外，还有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T08:55:34.983

我在 Matlab 错误报告中心找到了答案。似乎自 R2011b 以来就存在。

**概括**

在 MAT 文件中存储对象可能会导致内存泄漏并阻止对象类被清除

**描述**

在 MAT 文件中存储类的实例“MyClass”后，调用 clear classes 可能会导致警告：

警告：存在“MyClass”类的对象。无法清除此类或其任何超类。

即使您已清除工作区中该类的所有实例，此警告仍然存在。警告可能会出现在一种 MAT 文件格式中，而不会出现在另一种格式中。

**解决方法**

在某些情况下，切换到不同的 MAT 文件格式可能会消除警告。

[http://www.mathworks.ch/support/bugreports/857319](http://www.mathworks.ch/support/bugreports/857319)

编辑：我尝试了旧格式的保存，但这也不起作用。我得到一个“错误关闭文件”（[http://www.mathworks.ch/matlabcentral/answers/18098-error-using-save-error-closing-file](http://www.mathworks.ch/matlabcentral/answers/18098-error-using-save-error-closing-file)）。所以 Matlab 不支持保存类对象。然后我将不得不忍受内存问题，并在每次使用 GUI 后重新启动 Matlab。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T18:35:56.880

根据您的`memory`屏幕截图，肯定有没有被清除的内存。您在 Matlab 的垃圾收集中发现了一个基本缺陷的可能性很小，但更有可能的是，大约 6G 的内存驻留数据实际上仍然可以通过一系列链接获得。根据个人经验，以下几种方式可以让您认为已清除的内存仍然可用：

*   计时器对象：如果计时器的回调函数之一引用此数据（或副本），则该数据仍然可用。你需要调用`deleted(t)`那个计时器。

*   函数中的持久变量：我经常将数据缓存在函数中的持久变量中，这显然允许将来访问该数据，因此不会被清除。您需要调用`clear FUNCTIONNAME`以清除关联的持久变量。

*   在 GUI 对象中，作为数据或在回调函数中：需要清除图形和任何持久性。

*   类中可以保留数据的任何静态方法或常量属性。这些可以在班级内单独清除，也可以通过强制使用`clear CLASSNAME`。

查找数据陈旧链接的一些技巧（同样，基于个人错误）

*   查看每次调用后丢失的确切字节数，使用`x=memory;`调用获取准确计数。是否一致？这是一个你认识的数字吗？有时我可以在意识到它恰好是 238263232 字节后发现泄漏，因此是一个 29782904 双数组，它必须来自函数 xyz。

*   查看实际删除了哪些类。在您的`delete(obj)`函数中添加详细显示或正在删除哪些对象，并通过推断哪些不是。对于给定的未删除对象，它可以从哪里引用？您不需要`delete(obj)`像您正在做的那样清除函数中的数据，Matlab 应该为您处理。使用该`delete`函数作为调试工具。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-12T13:59:01.537

Matlab 有一个[垃圾收集器](http://en.wikipedia.org/wiki/Garbage_collection_%28computer_science%29)，所以你不需要手动管理内存。关闭 GUI 后，除了工作区中的内存之外，所有内存都将被释放。您可以使用 清除工作区变量[`clear`](http://www.mathworks.com/help/matlab/ref/clear.html)。

我在 Windows 上注意到的一件事（不确定其他平台）是 Matlab 的 GUI 有时会保留额外的内存（可能是 100 MB，但不像您看到的那样多 GB）。简单地最小化然后恢复 GUI 将释放这些多余的内存。

# javascript - IE 7、8 和 chrome 中的类名未更改

> ID：14834045
> 
> 赞同：1
> 
> 时间：2013-02-12T13:47:02.360
> 
> 标签：javascript, internet-explorer, cross-browser

我正在尝试在 onload 期间更改两个元素的类名。

这是我的相同代码：

```
 var browserName=navigator.appName;
    var tfElem = document.getElementById("TTlExpct");
    var blTfElem = document.getElementById("BTLExpct");
    if (browserName=="Microsoft Internet Explorer")
    {
        tfElem.className ="pn-tf";
        blTfElem.className ="pn-tf active";
        }
    else
    {
        tfElem.setAttribute('class', 'pn-tf');
        blTfElem.setAttribute('class', 'pn-tf active');
        } 
```

如果不是 IE，else 块负责处理代码，在 mozilla 中，这工作正常，类名正在设置。

它不适用于 IE7 和 IE8

和

在 chrome 中，它只有在我重新加载页面时才有效。

任何帮助将不胜感激 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T13:50:27.777

`setAttribute`在旧版本的 IE中的实现存在一个错误。在较新版本的 IE 中，如果您不使用触发标准模式的 Doctype，则可能会模拟该错误。

代替：

```
foo.setAttribute('class', value); 
```

和：

```
foo.className = value; 
```

**到处**这样做。不要尝试进行浏览器检测。所有支持的浏览器`setAttribute('class', value)`也支持`foo.className = value`.

您问题中的代码应重写为：

```
var tfElem = document.getElementById("TTlExpct");
var blTfElem = document.getElementById("BTLExpct");
tfElem.className ="pn-tf";
blTfElem.className ="pn-tf active"; 
```

# zend-server-ce - zf 蓝图不起作用

> ID：14834051
> 
> 赞同：0
> 
> 时间：2013-02-12T13:47:21.800
> 
> 标签：zend-server-ce, zf-boilerplate

安装 Zend Server，下载[Blueprint](http://zf-boilerplate.com/downloads/)，尝试启动应用程序时它告诉我：

```
Fatal error: Class 'Memcache' not found in C:\Program Files (x86)\Zend\Apache2\htdocs\zfboilerprint\library\Bisna\Application\Container\DoctrineContainer.php on line 460 
```

我做错了什么，我需要什么来摆脱这个错误？问题是，我安装了带有 php 5.3 的 Zend 服务器，只是因为我在 5.4 上也遇到了这个错误，而在我有 php 5.2 之前它不支持命名空间并显示其他错误，所以我不能让这个产品在任何版本上工作的PHP。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T20:29:04.720

找到了答案，我需要在 php 上安装 memcshe 扩展。刚刚在 web 中找到了 dll 并在 php.ini 中添加了几个字符串

# forms - 在 Magento 1.7 注册表单中添加新字段

> ID：14834054
> 
> 赞同：0
> 
> 时间：2013-02-12T13:47:29.583
> 
> 标签：forms, magento, registration

谁能给我一个关于如何***将自定义字段添加***到适用于***Magento 1.7***的 Magento***注册表单***的分步指南。我遇到了很多，所有这些要么都支持旧版本，要么对于我的理解来说太复杂了，因为我对它非常陌生。

 ** * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T13:56:25.443

您需要添加客户属性

因此您可以使用您构建的自定义模块来执行此操作，或者那里有一些模块可以为您提供此功能，例如[客户属性](http://amasty.com/customer-attributes.html)

它可以只在后端，也可以在前端等。它有很多功能

此功能已在企业版中，但对于社区版，您需要实现它，或使用自定义模块

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T14:27:54.543

您无需花费任何欧元即可获得所需的东西......使用此[扩展程序](http://www.magentocommerce.com/magento-connect/custom-attributes-4340.html)，然后放入您的 regiter.phtml 和 edit.phtml 如下所示：

```
 <li class="control">
                <div class="input-box">
                    <input type="text" name="attribute-name" title="<?php echo $this->__('your pretty label') ?>" id="attribute-name" value="<?= $this->getCustomer()->getAttributeName()); ?>" class="input" />
                </div>
                <label for="attribute-name"><?php echo $this->__("your pretty label") ?></label>
            </li> 
```*

# c# - 将数据表从 c# 导出为 pdf

> ID：14834055
> 
> 赞同：-1
> 
> 时间：2013-02-12T13:47:32.357
> 
> 标签：c#, pdf

我有一个表列表，我将它从 c# 导出到 PDF

```
List<DataTable> l; 
```

我想做的内容包含：表名和表开始的页数

我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T14:47:56.950

尝试 iTextSharp + 将 dataTable 导出为 pdf [http://amin-sayed.blogspot.com/2008/10/in-this-article-ill-demonstrate-how-to.html](http://amin-sayed.blogspot.com/2008/10/in-this-article-ill-demonstrate-how-to.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-03T09:09:32.567

参考这个，如果你有一些需要..

[无需自动化即可将数据导出到 Excel、Word、PDF](http://www.codeproject.com/Articles/151789/Export-Data-to-Excel-Word-PDF-without-Automation-f)

# postgresql - 如果我想节省空间，是否必须创建代理键？

> ID：14834059
> 
> 赞同：1
> 
> 时间：2013-02-12T13:47:59.017
> 
> 标签：postgresql, foreign-keys

假设我有一张非常大的桌子，里面有这样的车主：

```
OWNERSHIP
owner    | car
---------------
steven   | audi
bernahrd | vw
dieter   | vw
eike     | vw
robert   | audi
... one hundred million rows ... 
```

如果我将其重构为：

```
OWNERSHIP
owner    | car <-foreign key TYPE.car_type
---------------
steven   | audi
bernahrd | vw
dieter   | vw
eike     | vw
robert   | audi
...

TYPE
car_type      |
---------------
audi
vw 
```

我是否赢得了空间或速度方面的任何东西，或者我是否需要为此在 car_type 上创建一个 INTEGER 代理键？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T21:33:08.090

整数将占用 4 个字节，[比 "vw" 多一个字节](http://www.postgresql.org/docs/9.0/static/datatype-character.html)。碰巧的是，[PostgreSQL 枚举也占用了 4 个字节](http://www.postgresql.org/docs/9.0/static/datatype-enum.html)，因此通过切换到这种表示，您不会获得任何存储方面的东西（除了它对更改枚举本身带来的困难）。无论哪种方式，查询都一样快，因为对于这样大小的表，无论如何您都将查询索引。数据库性能，尤其是当表变大时，本质上是 I/O 问题，而不是 CPU 性能。我不相信整数索引会比短字符串索引更小或更快，尤其是当您有大量行引用非常小的一组可能值时。它肯定不会成为您的应用程序的瓶颈。

即使我们假设您能够通过使用人工密钥恢复 4 个字节，您要节省多少存储空间？4 字节乘以 1 亿行理想情况下约为 400 MB。您是否如此迫切地需要存储，以至于您需要在您的 honkin 数据库服务器上获取少量这样的存储空间？这是假设您将其重构为自己的表并使用正确的外键。

当然，回答这个问题的正确方法是根本不从第一原则争论。拿你的 1 亿行表来双向工作。然后自己检查尺寸，如下所示：

```
SELECT pg_size_pretty(pg_total_relation_size('ownership')));
SELECT pg_size_pretty(pg_total_relation_size('ownership2'))); 
```

使用 EXPLAIN ANALYZE 进行测试查询，如下所示：

```
EXPLAIN ANALYZE SELECT * FROM ownership WHERE car = 'audi';
EXPLAIN ANALYZE SELECT * FROM ownership2 WHERE car_id = 1; 
```

比成本更关注实际花费的时间，但要看看成本。如果可能，在与您的生产相同的数据库服务器上执行此操作；如果不是，请使用具有相同 PostgreSQL 配置的类似机器。然后你就会有硬性的数字来告诉你你付出了什么，你得到了什么。我的怀疑是，您会发现使用人工密钥的空间使用情况会稍差一些，并且性能相当。

如果这是您发现的，请做相关的事情并使用自然键，而不必担心优化物理存储。空间是你拥有的最便宜的商品。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T20:58:18.633

使用两个表和字符串外键当然会比使用一个使用更多的空间。多少取决于您拥有多少种汽车。

你应该使用整数`car_id`：

*   如果大量汽车名称重复，使用整数键将节省空间。

*   如果您需要索引`car`列，则更是如此，因为整数索引比字符串索引小得多。

*   比较整数也比比较字符串要快，所以汽车搜索也应该更快。

*   较小的表意味着如果它适合缓存则较大的部分，因此访问它也应该更快。

# c++ - 多线程类中的互斥体可能出现分段错误

> ID：14834060
> 
> 赞同：2
> 
> 时间：2013-02-12T13:48:00.097
> 
> 标签：c++, c++11, thread-safety, segmentation-fault, mutex

多个线程 ( `std::async`) 通过 a 共享以下类的实例`shared_ptr`，是否有可能在这部分代码中出现分段错误？如果我的理解`std::mutex`是正确的，`mutex.lock()`则会导致所有其他线程试图调用`mutex.lock()`阻塞直到`mutex.unlock()`被调用，因此对向量的访问应该完全按顺序进行。我在这里错过了什么吗？如果没有，是否有更好的方法来设计这样的类（也许使用 a `std::atomic_flag`）？

```
#include <mutex>
#include <vector>
class Foo
{
   private:
      std::mutex mutex;
      std::vector<int> values;
   public:
      Foo();
      void add(const int);
      int get();
};
Foo::Foo() : mutex(), values() {}
void Foo::add(const int value)
{
   mutex.lock();
   values.push_back(value);
   mutex.unlock();
}
int Foo::get()
{
   mutex.lock();
   int value;
   if ( values.size() > 0 )
   {
      value = values.back();
      values.pop_back();
   }
   else
   {
      value = 0;
   }
   mutex.unlock();
   return value;
} 
```

免责声明：默认值 0 in`get()`是因为它在代码的其余部分具有特殊含义。

更新：上面的代码与我使用的完全一样，当然除了拼写错误 push_Back。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T13:53:44.920

除了不使用 RAII 来获取锁并使用`size() > 0`而不是`!empty()`，代码看起来不错。这正是互斥锁的使用方式，这是您需要互斥锁的方式和位置的典型示例。

正如 Andy Prowl 所指出的，实例不能被复制构造或复制分配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T15:08:20.863

这是“改进”版本：

```
#include <mutex>
#include <vector>
class Foo {
   private:
      std::mutex mutex;
      typedef std::lock_guard<std::mutex> lock;
      std::vector<int> values;
   public:
      Foo();
      void add(int);
      int get();
};
Foo::Foo() : mutex(), values() {}
void Foo::add(int value) {
   lock _(mutex);
   values.push_back(value);
}
int Foo::get() {
   lock _(mutex);
   int value = 0;
   if ( !values.empty() )
   {
      value = values.back();
      values.pop_back();
   }
   return value;
} 
```

与 RAII 获取`mutex`等。

# jquery - 推特引导折叠标签问题

> ID：14834062
> 
> 赞同：0
> 
> 时间：2013-02-12T13:48:01.123
> 
> 标签：jquery, css, twitter-bootstrap

我正在使用引导程序并在表单上折叠 - 允许用户根据需要添加某些字段。但我发现，如果我点击键盘按钮选项卡跳转到下一个字段，它将跳转到折叠/隐藏字段。

无论如何围绕这个？我在下面包含了一些代码

```
 <div class="control-group">
                <label class="control-label" for="title">Title</label>
                <div class="controls">
                    <input type="text" name="title" id="title" class="input-xlarge" placeholder="Title">
                </div>
            </div>

            <hr />

            <div class="control-group">
                                    <div class="controls">
                     <a data-toggle="collapse" data-target="#add_date_div">
                        Add A Date
                    </a>
                                        </div>
            </div>

            <div id="add_date_div" class="collapse">

                <div class="control-group">
                    <label class="control-label" for="start_date">
                            Start Date:

                    </label>
                    <div class="controls">
                        <div id="collapse_date" class="input-append date form_datetime" data-date="2013-09-16T05:25:07Z" data-date-format="dd MM yyyy - hh:ii" data-link-field="dtp_input1" >
                            <input name="start_date" type="text" value="" readonly><span class="add-on"><i class="icon-th"></i></span>

                        </div>
                    </div>
                </div>

                <div class="control-group">
                    <label class="control-label" for="end_date">
                        End Date:1
                    </label>
                    <div class="controls">
                        <div id="collapse_date" class="input-append date form_datetime" data-date="2013-09-16T05:25:07Z" data-date-format="dd MM yyyy - hh:ii" data-link-field="dtp_input1" >

                            <input name="end_date" type="text" value="" readonly><span class="add-on"><i class="icon-th"></i></span>
                        </div>
                    </div>
                </div>
            </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:15:08.483

这是因为折叠的部分实际上并没有隐藏。它是一个高度溢出黑客。因此，将其添加到您的 CSS 文件中。删除折叠代码。（即来自链接的数据切换和数据目标属性以及来自#add_date_div 的class="collapse"）并添加自定义jquery 代码和CSS，如下所示：

```
#add_date_div {
    display:none;
}

$(function(){
    $(".add_a_date").on("click",function() {
        $("#add_date_div").slideToggle();
    });
}); 
```

[工作小提琴](http://jsfiddle.net/me6Sb/1/)

# java - 如何使用 WinRun4J 将 Java 应用程序作为 Windows 服务运行

> ID：14834063
> 
> 赞同：0
> 
> 时间：2013-02-12T13:48:05.963
> 
> 标签：java, windows, windows-services, winrun4j

我正在尝试使用 WinRun4J 将 Java 应用程序作为 Windows 服务运行。

我将 WinRun4J64c.exe 复制到我的应用程序目录中，并将以下 service.ini 文件放在旁边：

```
service.class=org.boris.winrun4j.MainService
service.id=MyAPP
service.name=MyAPP
service.description=some description

classpath.1=./lib/*
classpath.2=WinRun4J.jar

[MainService]
class=play.core.server.NettyServer 
```

但是，如果我以以下方式启动服务：`WinRun4J64c.exe --WinRun4J:RegisterService`我得到：

```
Service control dispatcher error: 1063 
```

怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T10:44:59.187

我没有让它工作，所以我的解决方法是使用[Apache Commons Deamon](http://www.apache.org/dist/commons/daemon/binaries/windows/)。我使用以下参数执行了包含的 prunsrv.exe：

```
prunsrv.exe install "MeineAnwendung" \
--Install="C:/pfad/zu/prunsrv.exe" \
--JvmOptions=-Dpidfile.path=NUL
--Jvm=auto \
--Startup=auto \
--StartMode=jvm \
--Classpath="c:/irgendwo/anwendung/lib/*;" \
--StartClass=play.core.server.NettyServer 
```

# c# - LongListSelector 和上下文菜单

> ID：14834073
> 
> 赞同：2
> 
> 时间：2013-02-12T13:48:40.770
> 
> 标签：c#, silverlight, windows-phone-7

我有一组要显示为列表的对象。所以，我将 a`LongListSelector`与这个集合绑定。集合中的所有项目都以列表的形式出现。我想做的下一件事是当用户长按一个项目时，它会弹出一个带有删除、添加和其他选项的小窗口。

我应该怎么做？我在很多地方搜索并没有找到关于 LongListSelector 和上下文菜单的信息

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T14:14:57.713

如果你想要一个上下文菜单……看看[Phone Toolkit](http://phone.codeplex.com/)中的 ContextMenu 控件。

然后，有关如何添加此内容的示例，请查看工具包本身，但对于您的问题更具体，您可以在[此处查看类似的问题...](http://social.msdn.microsoft.com/Forums/en-US/wpdevelop/thread/9ef36d6c-09c6-47dc-a479-cbbedeacd2e1/)

简而言之，您只需在 longlistselector 的每个数据项上添加上下文菜单 xaml

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-08-04T01:14:01.103

将上下文菜单放在 LongListSelector 上的简单代码：

```
<phone:LongListSelector x:Name="lls" LayoutMode="List" Margin="0,150,0,0">
    <phone:LongListSelector.ItemTemplate>
        <DataTemplate>
            <StackPanel Orientation="Horizontal" Margin="12,2,0,4" Height="105" Width="432">
                <Border BorderThickness="1" Width="99" Height="99" BorderBrush="#FFFFC700" Background="#FFFFC700"/>
                <StackPanel Width="311" Margin="8,-7,0,0">
                    <toolkit:ContextMenuService.ContextMenu>
                        <toolkit:ContextMenu IsZoomEnabled="True">
                            <toolkit:MenuItem Header="Delete" Click="Delete_Click"/>
                        </toolkit:ContextMenu>
                    </toolkit:ContextMenuService.ContextMenu>
                    <TextBlock Text="{Binding data}" TextWrapping="NoWrap" Margin="12,0,0,0" Style="{StaticResource PhoneTextExtraLargeStyle}"/>
                    <TextBlock Text="{Binding resume}" TextWrapping="NoWrap" Margin="12,-6,0,0" Style="{StaticResource PhoneTextSubtleStyle}"/>
                </StackPanel>
            </StackPanel>

        </DataTemplate>
    </phone:LongListSelector.ItemTemplate>
</phone:LongListSelector> 
```

您必须注意`ContextMenuService.ContextMenu`. 如果你把它拿出来是`StackPanel`不行的。

# vb.net - Aspose.Cells - 为范围设置边框

> ID：14834080
> 
> 赞同：2
> 
> 时间：2013-02-12T13:48:59.307
> 
> 标签：vb.net, formatting, aspose-cells

我目前正在使用 Aspose.Cells。我基本上已经完成了我需要做的事情，但是仍然存在一个问题；我看不到将边框应用于定义范围的简单方法。我可以为一个单元格，但是当将样式应用于范围时，该范围内的所有单元格都被格式化。

我能看到的唯一方法是编写一个方法来枚举范围内的所有单元格以确定正确的边框属性。这似乎是一种有点可怕的方式来实现我认为的简单任务，所以我希望有更好的方法！

在那儿？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-14T18:58:28.570

好的，让我们开始吧。假设我们要为从 A2 单元格到 H6 单元格范围的范围添加边框。永远记住，Aspose 中的单元格索引是基于零的。所以 A2 单元格的索引为第 1 行和第 0 列。

定义范围

`Dim range = current_worksheet.Cells.CreateRange(1, 0, 5, 8)`

设置边框

```
 range.SetOutlineBorder(Aspose.Cells.BorderType.TopBorder,Aspose.Cells.CellBorderType.Thick,Drawing.Color.Blue)
range.SetOutlineBorder(Aspose.Cells.BorderType.BottomBorder,Aspose.Cells.CellBorderType.Thick, Drawing.Color.Blue)
range.SetOutlineBorder(Aspose.Cells.BorderType.LeftBorder,Aspose.Cells.CellBorderType.Thick, Drawing.Color.Blue)
range.SetOutlineBorder(Aspose.Cells.BorderType.RightBorder,Aspose.Cells.CellBorderType.Thick, Drawing.Color.Blue) 
```

而已！

# c# - 在 C# 中引发保留异常时会出现什么问题？

> ID：14834082
> 
> 赞同：7
> 
> 时间：2013-02-12T13:49:08.767
> 
> 标签：c#, exception, fxcop

如果您输入代码，FxCop 会违反规则 CA2201 `System.IndexOutOfRangeException`（[请参阅参考资料](http://msdn.microsoft.com/en-us/library/ms182338.aspx)）。根据文档，这样做的理由`System.IndexOutOfRangeException`是“保留并且应该只由公共语言运行时抛出”。

但是如果你 throw 真的会出什么问题`System.IndexOutOfRangeException`呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T13:55:52.993

没有。

从技术角度来看，抛出这个异常是完全可以的。如果你这样做，什么都不会破坏。

但是请记住，`System.IndexOutOfRangeException`只有在遇到第一个位置时才应该抛出`System.IndexOutOfRangeException`，否则这个异常将不合适，因为它非常清楚地定义了这个异常类型的用途。[MSDN 状态为](http://msdn.microsoft.com/en-us/library/system.indexoutofrangeexception.aspx) `System.IndexOutOfRangeException`：

> 尝试访问具有超出数组边界的索引的数组元素时引发的异常。这个类不能被继承。

# symfony - Symfony2：使用请求中的信息动态添加表单字段

> ID：14834084
> 
> 赞同：0
> 
> 时间：2013-02-12T13:49:13.647
> 
> 标签：symfony, symfony-forms

设想：

1.  第 1 步：从一些古老的 Web 服务中获取信息
2.  第 2 步：在我的表单中添加 x 单选按钮，而 x 取决于来自 Web 服务的信息

我知道我应该添加一个事件订阅者类，如[文档中所示](http://symfony.com/doc/current/cookbook/form/dynamic_form_modification.html#adding-an-event-subscriber-to-a-form-class)

$event 有一个 setData 方法。可能我必须使用它。如何从控制器访问此方法？

附加信息：我正在使用 Doctrine。目前我正在创建一个 Doctrine 实体并将其传递给如下形式：

```
$product = new Product(); $form = $this->createForm(new ProductType(), $product); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T14:02:26.737

You don't have to setData() on the $event object. You've to implement an [`on POST_SET_DATA`](https://github.com/symfony/Form/blob/master/FormEvents.php) logic that builds your form [the way you want](http://symfony.com/doc/current/cookbook/form/dynamic_form_modification.html#inside-the-event-subscriber-class) according to you data.

You've then to initialize your form (inside your controller) using your webservice's reply.

(**Note:** SET_DATA form event is deprecated since version 2.1\. It'll be definitely removed in version 2.3)

**Update:**

You can set an array as form data and use a `DataTransformer` to structure your form's data the way you want. Take a look at the [Data Transformation part](http://www.youtube.com/watch?v=JAX13g5orwo&feature=share&list=PLo7mBDsRHu11ChvScWUE7MN1Qo5QVHQEz) of [Symfony 2 Form Tricks](http://www.youtube.com/watch?v=JAX13g5orwo&feature=share&list=PLo7mBDsRHu11ChvScWUE7MN1Qo5QVHQEz) during the last San Francisco Symfony Live.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T12:59:44.813

这是我最终得到的解决方案。不确定这是否是最好的方法，所以这个答案没有被标记为正确，以鼓励其他更有经验的 Symfony 用户提出更好的解决方案。

我不喜欢这个解决方案的地方是，我不能再将整个产品实体传递给表单，而是必须将每个属性单独添加到选项数组中：

无论如何，这就是它现在的实现方式：

动态数据使用 options 数组作为 createForm() 的第二个参数传递：

```
 // ExampleController.php

  use Acme\ExampleBundle\Entity\Product;
  public function addAction()
  {
     // choices contains the dynamic data I am fetching from the webservice in my actual code
     $choices = array("key1" => "value1", "key2" => "value2");

     // now create a new Entity
     $product = new Product();

     // and some attributes already have values for some reason
     $product->setPrice(42);

     $form = $this->createForm(new AddproductType(), 
              array(
                 "choices" => $choices,
                 "price"   => $product->getPrice() 
               )
            );
     if ($request->isMethod('POST')) {
        $form->bind($request);
        if ($form->isValid()) {
          // ... standard symfony stuff here
        }
     }
    return array(
        'form' => $form->createView()
    );
 } 
```

现在是表单类。请注意事件侦听器部分和 setDefaultOptions 方法。

```
// ProductType.php

namespace Acme\ExampleBundle\Form;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormEvents;
use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\OptionsResolver\OptionsResolverInterface;

class ProductType extends AbstractType
{

  public function buildForm(FormBuilderInterface $builder, array $options)
  {
    $formFactory = $builder->getFormFactory();
    $builder->addEventListener(
        FormEvents::PRE_SET_DATA,
        function (\Symfony\Component\Form\FormEvent $event) use ($formFactory) {

                // get the option array passed from the controller
                $options = $event->getData();

                $choices = $options["choices"];
                $event->getForm()->add(
                // add a new element with radio buttons to the form
                $formFactory->createNamed("my_dynamic_field_name", "choice", null, array(
                        "empty_value" => "Choose an option",
                        "label" => "My dynamic field: ",
                        "choices" => $choices
                    )
                )
            );

        }
    );

    // ... add other form elements
    $builder->add("price", "text");
    // ..
 }

 public function setDefaultOptions(OptionsResolverInterface $resolver)
 {
    // register choices as a potential option
    $resolver->setDefaults(array(
        'choices' => null
    ));
 }
} 
```

# javascript - 在中心屏幕中打开 URL 链接

> ID：14834085
> 
> 赞同：2
> 
> 时间：2013-02-12T13:49:21.870
> 
> 标签：javascript, reporting-services, ssrs-2008, reportbuilder3.0

我开发了一个带有链接 URL 的 SSRS 报告，在新窗口中打开一个系统屏幕。

我的问题是新窗口在屏幕的左上角打开。

我现在的表达是：

```
="javascript:void(window.open('myURL.aspx?TaskID=" & Fields!TaskID.Value &    
"','_blank','width=1150,height=460'))" 
```

也尝试过（什么也没发生）：

```
="javascript:void(window.open('myURL.aspx?TaskID=" & Fields!TaskID.Value &    
"','_blank','width=1150,height=460,left=100,top=100'))" 
```

还有这个（仍然没有发生）：

```
="javascript:void(window.open('myURL.aspx?TaskID=" & Fields!TaskID.Value &    
"','_blank','width=1150,height=460','left=screen.width/2,top=screen.height/2'))" 
```

有什么建议如何在屏幕中央打开新窗口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:22:16.460

我无法使用 Reporting Services 进行计算`screen.width`或`screen.height`在其中工作，因此目前似乎无法根据用户的分辨率将新窗口居中。

`top`和的绝对值`left`将起作用。`left`在第二次尝试中使用绝对值和`top`值检查您的语法。不确定这是否是问题或代码中的错字。它应该是：

```
="javascript:void(window.open('myURL.aspx?TaskID=" & Fields!TaskID.Value &    
"','_blank','width=1150,height=460,left=100,top=100'))" 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-13T12:28:52.880

如果您使用 jQuery，您可以使用[.width()](http://api.jquery.com/width/)和[.height()](http://api.jquery.com/height/)来确定窗口的宽度和高度。可能存在一些限制，您可以在 Google 中搜索以找到解决方案。这在类似情况下对我有用。

# linux - linux打印到STDOUT并使用单个命令重定向到文件

> ID：14834087
> 
> 赞同：4
> 
> 时间：2013-02-12T13:49:28.483
> 
> 标签：linux, csh

有没有办法将命令的输出回显到终端并使用单个文件重定向到文件，而不是在 csh 中使用 2 个单独的命令（出于历史原因，我必须为此目的使用 csh）。目前我这样做

```
echo "Hello World!"
echo "Hello World!" > textfile

echo "next line blah blah"
echo "next line blah blah" >> textfile 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T13:50:41.023

这正是`tee`为了：

```
echo "Hello World!" | tee textfile 
```

对于多个输出，您可以使用

```
(
  echo "Hello World!"
  echo "next line blah blah"
) | tee textfile 
```

或将附加选项与`tee`.

```
echo "Hello World!" | tee textfile
echo "next line blah blah" | tee -a textfile 
```

# javascript - 文本编辑器的多行选择（getRangeAt）和环绕内容（）

> ID：14834094
> 
> 赞同：0
> 
> 时间：2013-02-12T13:49:43.643
> 
> 标签：javascript, selection, text-editor

我正在尝试为网站创建一个简单的文本编辑器。我想向他添加类似此站点中的代码按钮的内容。因此，通过选择特定的文本，将其背景设置为灰色。这是我现在所拥有的，但如果我选择了多行文本（通过按 Enter 创建的行），则函数 test() 不起作用。它仅在我每次选择一行时才有效。

```
<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/html"> 
<head>

  <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">
  <link rel="stylesheet" href="Awesome/css/font-awesome.css">

</head>
<body onload="InitEditable()">

  <div style="margin-left:10px;">
        <p>
          <div class="btn-group">
           <a class="btn" href="#" onclick="fontEdit('bold')"><i class="icon-bold"></i></a>
           <a class="btn" href="#" onclick="fontEdit('italic')"><i class="icon-italic"></i></a>
           <a class="btn" href="#" onclick="fontEdit('underline')"><i class="icon-underline"></i></a>
           <a class="btn" href="#" onclick="test()"><i class="icon-link"></i></a>
                <a class="btn" href="#" onclick="fontEdit('justifyLeft')"><i class="icon-align-left"></i></a>
                <a class="btn" href="#" onclick="fontEdit('justifyCenter')"><i class="icon-align-center"></i></a>
                <a class="btn" href="#" onclick="fontEdit('justifyRight')"><i class="icon-align-right"></i></a>
                <a class="btn" href="#" onclick="fontEdit('justifyFull')"><i class="icon-align-justify"></i></a>
          </div>
        </p>
  </div>

  <div style="margin-left:10px;"><iframe id="textEditor" style="width:500px;height:170px;font-family:arial;font-size:11px;"></iframe></div>

 <script type="text/javascript">

var editorDoc;
var editor;

function InitEditable() 
{
  editor = document.getElementById("textEditor");
  editorDoc = editor.contentwindow.document;              
  var editorBody = editorDoc.body;

  if ('contentEditable' in editorBody) {
                  // allow contentEditable
          editorBody.contentEditable = true;
  }else {  // Firefox earlier than version 3

          if ('designMode' in editorDoc) {
                          // turn on designMode
                  editorDoc.designMode = "on";                          
          }
  }
}

function fontEdit(x,y)
{
editorDoc.execCommand(x,"",y);
editorDoc.focus();
}

function test(){

  var range = document.getElementById("textEditor").contentwindow.window.getSelection().getRangeAt(0);

  var newNode = document.createElement('div');
  newNode.style.backgroundColor = "gray";

  range.surroundContents(newNode);      
  return false;  

}
</script>

</body>
</html> 
```

一定是surroundContents() 和div 有问题，但想不出什么办法来解决。

欢迎任何想法！提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T15:33:32.450

一种选择是我的[Rangy](https://code.google.com/p/rangy/)库（[演示](http://rangy.googlecode.com/svn/trunk/demos/cssclassapplier.html)）的[类应用程序模块](https://code.google.com/p/rangy/wiki/CSSClassApplierModule)

现场演示：http: [//jsfiddle.net/D7s5j/](http://jsfiddle.net/D7s5j/)

CSS：

```
.code {
   background-color: #ccc;
   font-family: Courier New, monospace;
} 
```

JS：

```
var codeApplier = rangy.createCssClassApplier("code");
codeApplier.applyToSelection(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T16:47:28.710

所以问题是 contenteditable 对象，创建`<div>`所以这不能让surroundContents（）正常工作并`<div>s`在所选范围内添加它自己的。

我最终通过添加此代码解决了我的问题

`$("#textEditor>div").replaceWith(function() { return $(this).contents(); });`

从 contenteditable 对象中删除`<div>s`标签。

您也可以添加它以`<br>`在按下输入后创建标签。

`$("#textEditor > div").before("<br />").contents().unwrap();`

对于第二个代码，感谢 VisioN。

# ruby - 如何在测试中绕过对超级方法的调用

> ID：14834100
> 
> 赞同：1
> 
> 时间：2013-02-12T13:50:04.163
> 
> 标签：ruby, ruby-mocha

我有这样的基本结构

```
class Automobile
  def some_method
    # this code sets up structure for child classes... I want to test this
  end
end

class Car < Automobile
  def some_method
    super
    # code specific to Car... it's tested elsewhere so I don't want to test this now
  end
end

class CompactCar < Car
  def some_method
    super
    # code specific to CompactCar... I want to test this
  end
end 
```

什么是推荐的测试方法`CompactCar`而不`Automobile`运行代码`Car`？ `Automobile#some_method`提供子类所需的结构，因此我想始终对其进行测试，但`Car's`功能在其他地方进行了测试，我不想重复努力。

一种解决方案是使用`class_eval`overwrite `Car#some_method`，但这并不理想，因为覆盖的方法在我的测试期间保持不变（除非我使用 setup/teardown 方法重新加载原始库文件......有点丑陋的解决方案）。此外，简单地将调用存根`Car#some_method`似乎不起作用。

是否有更清洁/更普遍接受的方式来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:09:37.387

只需将具体代码放入单独的方法中即可。你似乎没有使用 super 的任何东西。除非你是？

```
class CompactCar < Car
  def some_method
    super
    compact_car_specific_code
  end

  # Test this method in isolation.
  def compact_car_specific_code
    # code specific to CompactCar... I want to test this
  end
end 
```

# jquery - 按钮未显示在 jQuery 对话框中

> ID：14834107
> 
> 赞同：1
> 
> 时间：2013-02-12T13:50:22.383
> 
> 标签：jquery, jquery-ui, jquery-ui-dialog, jquery-dialog

我有一个事务编辑 jQuery 对话框，当单击正确的按钮时弹出就好了，但对话框中定义的“保存”和“取消”按钮不显示。对话框的 HTML 是：

```
 <div id="trxpop">
        <div>
            <label for="txtItem1">Item1: </label>
            <input id="txtItem1" type="text" /><br />
            <label for="item1">Item2: </label>      
            <input id="txtItem2" type="text" /><br />
        </div>
  </div> 
```

和 jQuery 在这里

```
jQuery.fn.EditTrx = function (item1, item2) {
$("#txtItem1").val(item1);
$("#item1").val(item1);
$("#trxpop").dialog({
    title: 'Edit Transaction',
    modal: true,
    buttons: {
        'Save': function () {
            /* Do stuff */
            $(this).dialog('close');
        },
        'Cancel': function () {
            $(this).dialog('close');
        }
    },
    resizable: false,
    draggable: true,
    stack: true,
    closeOnEscape: true,
    zIndex: 1320,
    width: 500
}); 
```

}

这应该根据我读过的所有文档起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T14:06:37.967

[http://jsfiddle.net/G4F7M/](http://jsfiddle.net/G4F7M/)

对我来说很好用。只是更改了 func 调用并添加了一个用于打开对话框的按钮：

```
$('input').click(function(){
EditTrx();
}); 
```

因此，如果这些按钮未显示，则可能是其他导致问题的原因，例如 css。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T15:38:48.937

我不得不在完整的按钮定义周围添加一组新的括号，现在它可以正常工作了。我编辑了上面的原始代码示例以反映此更改。谢谢大家的回复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-04T13:33:57.547

如果问题仍然存在，如已接受的答案中所述，则可以通过在对话控件的打开事件中执行以下操作来解决。

```
open: function (event, ui) {
    //For displaying the buttons of GUI.
    $('.ui-button-text').each(function (i) {
        $(this).html($(this).parent().attr('text'));
    })
}, 
```

# c# - 速度 - 将位图数据复制到数组中还是直接使用它？

> ID：14834108
> 
> 赞同：3
> 
> 时间：2013-02-12T13:50:22.483
> 
> 标签：c#, .net, performance, image-processing, bitmap

我正在使用一个`LockedBitmap`类来简化 C# 中位图数据的处理。目前它正在将数据复制到本地`byte[]`数组中，然后通过其类方法访问该数组以获取/设置像素颜色值。

这比直接通过指针访问锁定的位图数据更快还是更好？是否需要副本？

**编辑：**我不是在问是否可以直接使用位图数据，我每天都在使用它。我只是要求比较这两种方法，以及是否有必要复制像素数据。

* * *

将像素数据复制到临时数组中：

```
// create byte array to copy pixel values
int step = Depth / 8;
Pixels = new byte[PixelCount * step];
Iptr = bitmapData.Scan0;

// Copy data from pointer to array
Marshal.Copy(Iptr, Pixels, 0, Pixels.Length); 
```

直接读取像素值：

```
byte* p = (byte*)(void*)bmData.Scan0.ToPointer();
int ws = bmData.Stride;
byte* row = &p[i * ws];
byte Gcolor = row[j];
byte Bcolor = row[j + 1];
byte Rcolor = row[j + 2]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T15:41:17.400

> 这比直接通过指针访问锁定的位图数据更快还是更好？

不，它需要一个额外的复制操作，然后另一个操作将处理后的值复制回位图。

> 是否需要副本？

仅在`unsafe`代码不受欢迎或不可用的环境中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T14:25:33.197

您绝对可以直接对位图数据进行操作而无需复制它。这是我用来将客户 16bpp 灰度格式拉入可显示位图的一些代码：

```
 Rectangle rect = new Rectangle(0, 0, bmOut.Width, bmOut.Height);
    System.Drawing.Imaging.BitmapData bmpData =
        bmOut.LockBits(rect, System.Drawing.Imaging.ImageLockMode.ReadWrite,
        bmOut.PixelFormat);
    IntPtr ptr = bmpData.Scan0;
    Byte[] bytes;

    bytes = rawIn.ReadBytes(framesize);

    for (int x = 0; x < bytes.Length; x += 2)
    {
        short[] rgb = new short[3];
        int value = bytes[x + 1] * 256 + bytes[x];
        //value = value / 32;
        value = iMax * (value - iMin) / (iMax - iMin);

        if (value < iMin)
        {
            value = iMin;
        }
        else if (value > iMax)
        {
            value = iMax;
        }

        value = 65536 * (value - iMin) / (iMax - iMin);

        rgb[0] = rgb[1] = rgb[2] = (short)(value);
        System.Runtime.InteropServices.Marshal.Copy(rgb, 0, ptr + (x) * 3, 3);

    }
    bmOut.UnlockBits(bmpData); 
```

关键是`LockBits`和`UnlockBits`

作为一个快速的解释，我正在将文件中的 16bpp 读入`bytes`，将 16 位重构为`value`. 然后，使用外部提供的`iMin`和`iMax`缩放来获得正确的阴影。然后取那个单一`value`的并构造 RGB 并使用`Marshal.Copy`将其放入位图中。

# ruby-on-rails - 在 Rails 中使用acts-as-taggable-on 显示标签被标记到特定对象的时间

> ID：14834109
> 
> 赞同：0
> 
> 时间：2013-02-12T13:50:23.627
> 
> 标签：ruby-on-rails, tags, acts-as-taggable-on

对不起，这么长的话题，我只能用这些话来表达。

例如： `@article=Article.new`

并且用户可以`@article`使用自己的标签（例如`good`）进行不同的标记

那么，如何显示`good`标签被标记到**@article**的次数？

> > 在四处搜索之后，我只是找到了计算标签被标记的**总**次数的解决方案（在这种情况下，Article.all 上使用了多少次“好”），例如：[Acts-as-taggable-on find all tags by上下文](https://stackoverflow.com/questions/4595112/acts-as-taggable-on-find-all-tags-by-context)。就像我们在 stackoverflow 的标签功能中所拥有的一样

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T13:51:27.910

利用`Article.tagged_with('good').count`

# sql - 从另一个视图创建视图

> ID：14834113
> 
> 赞同：12
> 
> 时间：2013-02-12T13:50:36.563
> 
> 标签：sql, oracle

搜索后我在网上或任何其他资源中都没有找到任何东西，我想知道您是否可以通过加入另一个视图和其他一些表来形成一个视图？与此类似的东西我猜想 Server_ref.part_notification_view 是加入的视图。

```
Create View "PART_NOTIFICATION_VIEW" ("NOTIFICATION_IX", "PART_NBR", "MFG_CD", "PART_CLASS_CD", "LEADTIME", "BILLTO_CUST_NBR", "BILL_TO_ACCT_NM", "CUST_PART_NBR", "LAST_CUST_PO", "LAST_REQ_DT", "QTY_OPEN", "YEAR_USAGE", "AVAILABLE_SALE_STANDARD_QT", "ISSUE_DATE", "EFFECTIVE_DATE", "BRIEF_DESCRIPTION", "NOTIFICATION_TYPE", "ACTUAL_DOCUMENT_LINK", "AFFECTED_PARTS_LIST_DOC_LINK", "EMAIL_LINK", "FILE_FOLDER", "RECOMMENDED_REPLACEMENT", "PCN_TYPE", "IMPACT", "MANUFACTURER_NM", "LAST_BUY_DT", "LAST_SHIP_DT", "SALES_MIN_BUY_QTY", "SALES_MIN_PKG_QTY", "PART_DESC", "BOND_QOH", "BOND_QIT", "BRANCH_QOH", "BRANCH_QIT", "BOND_QTY", "BOND_PIPELINE", "BOND_OP", "BRAND_CD", "STATUS", "COMMENTS")
AS
  SELECT
    svr.notification_ix,
    svr.part_nbr,
    svr.mfg_cd,
    svr.part_class_cd,
    svr.leadtime,
    svr.billto_cust_nbr,
    svr.bill_to_acct_nm,
    svr.cust_part_nbr,
    svr.last_cust_po,
    svr.last_req_dt,
    svr.qty_open,
    svr.year_usage,
    svr.available_sale_standard_qt,
    svr.issue_date,
    svr.effective_date,
    svr.brief_description,
    svr.notification_type,
    svr.actual_document_link,
    svr.affected_parts_list_doc_link,
    svr.email_link,
    svr.file_folder,
    svr.recommended_replacement,
    svr.pcn_type,
    svr.impact,
    svr.manufacturer_nm,
    svr.last_buy_dt,
    svr.last_ship_dt,
    svr.sales_min_buy_qty,
    svr.sales_min_pkg_qty,
    svr.part_desc,
    NVL(svr.bond_qoh, 0)                                                                    AS bond_qoh,
    NVL(svr.bond_qit, 0)                                                                    AS bond_qit,
    NVL(svr.branch_qoh, 0)                                                                  AS branch_qoh,
    NVL(svr.branch_qit, 0)                                                                  AS branch_qit,
    NVL(svr.bond_qoh, 0)      + NVL(svr.bond_qit, 0) + NVL(svr.branch_qoh, 0) + NVL(svr.branch_qit, 0) AS bond_qty,
    NVL(svr.bond_pipeline, 0) + NVL(svr.po_qt, 0)                                                 AS bond_pipeline,
    svr.bond_op,
    svr.brand_cd,
    cs.status,
    cc.comments
  FROM part_notification_view svr
  JOIN css_status cs
  ON svr.part_nbr = cs.part_nbr
  AND svr.mfg_cd = cs.mfg_cd
  AND svr.billto_cust_nbr = cs.account
  JOIN css_comment cc
  ON svr.part_nbr = cc.part_nbr
  AND svr.mfg_cd = cc.mfg_cd
  AND svr.billto_cust_nbr = cc.account; 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-12T14:46:40.870

您当然可以拥有一个构建在另一个视图之上的视图：

```
create table my_table (id number, name varchar2(20), address varchar2(30));

table MY_TABLE created.

create or replace view my_view_1 as
select id, name
from my_table;

view MY_VIEW_1 created.

create or replace view my_view_2 as
select mv1.id, mv1.name, mt.address
from my_view_1 mv1
join my_table mt on mt.id = mv1.id;

view MY_VIEW_2 created. 
```

但是您不能引用基础表中的任何内容，包括不属于视图的任何字段：

```
create or replace view my_view_3 as
select mv1.id, mv1.name, mv1.address
from my_view_1 mv1
join my_table mt on mt.id = mv1.id;

SQL Error: ORA-00904: "MV1"."ADDRESS": invalid identifier
00904\. 00000 -  "%s: invalid identifier" 
```

具有相同列的基础表不是问题，如果您在视图中包含更多内容，那么无论如何您都必须为它们起别名。

这样做有时会遇到性能问题，如果您针对相同的基表创建新视图并将其扩展以包含您想要的额外数据，它可能会更快、更可靠（尽管可能更难维护）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-12T15:11:14.043

长答案...

关系数据库的基本特征之一是表、查询结果和视图（它们只是存储的查询）之间不应存在逻辑差异。事实上，“关系”是指可以通过其中任何一个访问的数据行。[http://en.wikipedia.org/wiki/Relation_%28database%29](http://en.wikipedia.org/wiki/Relation_%28database%29)

当然，不同的 RDBMS 会在不同程度上施加差异，尤其是在涉及 DDL 命令（更新、删除、插入）时，它们都对 DDL 可以应用于的对象类型施加了限制。

以 Oracle 为例，系统将允许对保留键的视图进行更新和删除，插入是可能的，但在实践中很少使用（“替代”触发器类型可用于允许对任何视图进行 DDL）。

因此，鉴于所有这些，您可以针对以下内容运行选择：

1.  一张桌子
2.  一组连接表
3.  一个看法
4.  查询（通常称为内联视图）
5.  连接到视图和表的查询
6.  ETC

...因此该选择可以封装在视图定义中。

简短的回答：是的

# vaadin - 如何使用“Java 的 Vaadin 框架”为我的网站设置选项卡图标，以便它显示在我的网络浏览器中？

> ID：14834118
> 
> 赞同：0
> 
> 时间：2013-02-12T13:50:47.603
> 
> 标签：vaadin, vaadin7

使用“Java 的 Vaadin 框架”我如何为我的网站设置选项卡图标，使其显示在我的网络浏览器中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T20:53:02.553

您必须为您的应用程序创建一个主题并将 favicon.ico 放在主题文件夹的根目录中（例如 VAADIN/themes/mytheme/favicon.ico）。有关 Vaadin 主题的更多信息，请参阅 Book of Vaadin（[Vaadin 6](https://vaadin.com/book/vaadin6/-/page/themes.html)或[Vaadin 7](https://vaadin.com/book/-/page/themes.html)）。

# iphone - 多个图像的平滑 UIImageView 动画

> ID：14834119
> 
> 赞同：1
> 
> 时间：2013-02-12T13:50:54.160
> 
> 标签：iphone, ios, objective-c, uiimageview

我在 an 上使用`UIImageView`了动画来为 36 个图像设置动画，如下所示：

```
-(void) kickOffTheAnimation {

    self.imgView.animationImages = imagesArr;

   [self.imgView setAnimationRepeatCount:HUGE_VALF];
   self.imgView.animationDuration =0.9;

    [self.imgView startAnimating];

} 
```

我的`viewDidLoad`方法很简单：

```
NSMutableArray *imagesArr = [[NSMutableArray alloc] init];
for(int i =0; i<35; i++) {
    [imagesArr addObject:[UIImage imageNamed: [NSString stringWithFormat:@"img%i@2x.png",i]]];
 }

    [self kickOffTheAnimation]; 
```

但是，有一个小故障，动画到达最终图像时不流畅，并从第一张图像重复动画，我该如何解决这个问题？

**编辑：**

确切的问题是在到达 img35.png 并显示 img0.png 后会发生毫秒挂起

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:44:10.590

我有时注意到一个非常小的循环延迟和更大的内存图像阵列。可能是某些资源必须重新加载。我已经`AVPlayer`在重复模式下使用了一部小电影，运气更好。一部真正的电影也可能压缩得更好。

# ruby-on-rails - Rails 3：搜索方法返回所有模型而不是指定

> ID：14834120
> 
> 赞同：0
> 
> 时间：2013-02-12T13:51:02.787
> 
> 标签：ruby-on-rails, search, methods

**我正在尝试做的事情：**我有一个模型“Recipe”，在其中我定义了一个“search”方法，该方法从复选框（我称之为标签）中获取一组字符串和一个字符串。这个想法是在数据库中搜索包含字符串的“名称”或“指令”中包含任何内容的食谱，并且还具有与它的“标签”属性匹配的任何标签。

**问题：**搜索方法返回我数据库中的所有食谱，并且在通过特定参数查找时似乎根本不起作用。

控制器中的动作方法：

```
def index
      @recipes = Recipe.search(params[:search], params[:tag])
      if !@recipes
        @recipes = Recipe.all
      end
      respond_to do |format|
      format.html 
      format.json { render json: @recipe }
    end
  end 
```

我的模型中的搜索方法：

```
 def self.search(search, tags)
    conditions = ""

    search.present? do
        # Condition 1: recipe.name OR instruction same as search?
        conditions = "name LIKE ? OR instructions LIKE ?, '%#{search[0].strip}%', '%#{search[0].strip}%'"

     # Condition 2: if tags included, any matching?
      if !tags.empty?
        tags.each do |tag|
          conditions += "'AND tags LIKE ?', '%#{tag}%'"
        end
      end
      end
    # Hämtar och returnerar alla recipes där codition 1 och/eller 2 stämmer.
        Recipe.find(:all, :conditions => [conditions]) unless conditions.length < 1
  end 
```

任何想法为什么它返回所有记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T13:59:09.487

如果您使用的是 rails 3，那么很容易链接查找条件

```
def self.search(string, tags)
  klass = scoped

  if string.present?
    klass = klass.where('name LIKE ? OR instructions LIKE ?', "%#{string}%", "%#{string}%")
  end

  if tags.present?
    tags.each do |tag|
      klass = klass.where('tags LIKE ?', "%#{tag}%")
    end
  end

  klass
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T14:09:11.657

当你这样做

```
search.present? do
  ...
end 
```

该块的内容被忽略 - 将一个块传递给一个不需要的函数是完全合法的，但是除非函数决定调用该块，否则该块不会被调用。结果，您的条件构建代码都不会被执行。你可能是说

```
if search.present?
  ...
end 
```

正如 jvnill 指出的那样，通常操作范围比手动构建 SQL 片段要好得多（也更安全）

# .net - 如何正则表达式匹配带有可选括号的模式？

> ID：14834121
> 
> 赞同：0
> 
> 时间：2013-02-12T13:51:04.180
> 
> 标签：.net, regex, parentheses, optional

我正在寻找一个与带有可选括号的模式匹配的单行正则表达式。当括号存在时，它们不应包含在匹配的模式中。

以下粗体文本演示了应该/不应该匹配的内容：

**应该匹配：**

> “标题说明（**AAA123**）”
> 
> “（**ABC000**）标题说明”
> 
> “标题说明**DEF999** ”
> 
> “标题 - **RST321** - 描述”

**不应该匹配：**

> “标题说明 AB123”
> 
> “标题说明 CCC456a”
> 
> “标题说明 (ABE999c)”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T14:07:02.580

试试这个正则表达式：

```
\b[a-zA-Z]{3}\d{3}\b 
```

这匹配：

```
# \b          - A word boundary,
# [a-zA-Z]{3} - followed by 3 letters,
# \d{3}       - followed by 3 digits,
# \b          - followed by a word boundary. 
```

正则表达式不关心括号，如请求，但不匹配太长的字符串。

# web - DFP 广告管理系统 - 支持多种屏幕尺寸

> ID：14834126
> 
> 赞同：0
> 
> 时间：2013-02-12T13:51:12.613
> 
> 标签：web, banner

我在网页左侧显示横幅。根据屏幕尺寸，必须使用 160x600 或 300x600。

我可以确定屏幕尺寸并设置正确的代码，但我认为这不是正确的方法。

有人知道如何让 DoubleClick 来决定哪个广告更适合页面吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T10:50:58.137

不幸的是，DoubleClick 文档来自古代 :) 解决方案：不要在网页中放置横幅大小。在 Doubleclick 提供的 javascript 代码中动态设置它。

# wpf - 我可以在 wpf 应用程序中使用 silverlight 应用程序吗？

> ID：14834127
> 
> 赞同：0
> 
> 时间：2013-02-12T13:51:26.413
> 
> 标签：wpf, silverlight, blend

我从[http://gallery.expression.microsoft.com/](http://gallery.expression.microsoft.com/)获得了一个 silverlight 示例，例如模拟时钟和进度条。我正在使用 microsoft blend 4 制作 wpf 桌面应用程序。我的问题是如何使用 blend 4 在我的 wpf 应用程序中放置/运行/嵌入示例。

我选择 wpf 应用程序是因为我可以添加 windows/form 并且代码与 windows 应用程序窗体几乎相同。

如果silverlight不能在wpf应用程序中运行，你能建议如何做分层控件吗？我的计划是先运行加载栏。然后隐藏它以显示主菜单和模拟时钟。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T18:47:56.773

Silverlight 是 WPF 功能的非常非常紧凑的版本。您可以将示例重写为 WPF，它会运行得更有效率。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-12T13:58:58.737

Silverlight 就像 adobe flex 一样有助于制作（运行）网络浏览器应用程序。如果您在 wpf 应用程序中使用 silverlight，那么您必须使用 webbrowser 控件。

知识：当我们想尝试为 webbrowser 应用程序带来 wpf 时，我们使用 silverlight .. 反之亦然（就像你正在做的那样），没有多大意义..

# ruby - Watir Web 驱动程序下载文件

> ID：14834130
> 
> 赞同：1
> 
> 时间：2013-02-12T13:51:38.173
> 
> 标签：ruby, automation, download, watir, watir-webdriver

我正在编写 Ruby 脚本来自动使用 Watir Web 驱动程序从文件列表中下载文件。关于自动弹出窗口和目录选择器以将文件保存到某个位置的任何指针或方法？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T19:22:05.073

更改下载位置的默认 Watir 首选项

用于镀铬

```
profile = Selenium::WebDriver::Chrome::Profile.new
download_dir = File.join(Rails.root, 'lib', 'assets')
profile['download.default_directory'] = download_dir
profile['download.prompt_for_download'] = false
@b = Watir::Browser.new :chrome, :profile => profile 
```

火狐

```
profile = Selenium::WebDriver::Firefox::Profile.new    
download_dir = File.join(Rails.root, 'lib', 'assets')
profile['browser.download.dir'] = download_dir
profile['browser.helperApps.neverAsk.saveToDisk'] = "text/csv,application/pdf"
@b = Watir::Browser.new. :firefox, :profile => profile 
```

注意：为了能够从您的 rails 应用程序中轻松访问 Rails.root/lib 文件夹，您需要将此代码或类似代码添加到您的 config/application.rb 文件中：

```
config.autoload_paths += Dir["#{config.root}/lib/**/"] 
```

更多信息：[http ://watir.com/guides/downloads/](http://watir.com/guides/downloads/)

# javascript - 使用 jquery 或 Javascript 从字符串中删除公共字符串

> ID：14834134
> 
> 赞同：0
> 
> 时间：2013-02-12T13:51:47.340
> 
> 标签：javascript, jquery

怎样才能去掉'tp.','ta.' 和“塔。” 从下面的字符串从它来的每个地方

```
str = " tp.FirstName, tp.FamilyName, ta.DOB, tta.TypeOfLocation
WHERE

tp.DateStamp BETWEEN '2012-02-12 15:13:00' AND '2013-02-12 15:13:00'

AND tta.db_name_id =21
AND

tp.FirstName = 'Darlene'"; 
```

我需要如下结果：

```
FirstName, FamilyName, DOB, TypeOfLocation
WHERE

DateStamp BETWEEN '2012-02-12 15:13:00' AND '2013-02-12 15:13:00'

AND db_name_id =21
AND

FirstName = 'Darlene'"; 
```

注意：我问过同样的问题，但这次我使用了多个删除字符串。请帮助我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T13:54:56.030

可以试试这个：

```
str.replace(/(tp\.)|(ta\.)|(tta\.)/g, ''); 
```

**[小提琴](http://jsfiddle.net/57Aym/2/)：检查控制台**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T14:19:04.437

```
 "aaa tp.bbb tf.ccc  tq.ddddd".replace(/[(tp\.)(tf\.)(tq\.)]/g, "")

    "aaa bbb ccc  ddddd" 
```

但。正则表达式可能比“正常”字符串操作慢一个数量级。现在有多达 10 个浏览器和 5 个平台需要对此进行测试。难以置信，但这个例子可能要快得多：

```
 "aaa tp.bbbb  tf.ccc".split("tp.").join("").split("tf.").join("")
     "aaa bbbb  ccc" 
```

尝试和测试。我会首先在移动浏览器上测试非常大的字符串。这一切都取决于您认为主要用途将在哪里*。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T13:57:04.727

用这个：

```
str = str.replace(/tp\./g,"").replace(/tta\./g,"").replace(/ta\./g,""); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T13:54:43.530

尝试`str.substring(str.indexOf("."))`字符串中的每个单词。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-12T13:57:00.300

```
var newstring = str.replace(".tp","").replace(".ta","").replace("tta.",""); 
```

那行得通

# ios - NSMutableArray remove Object 正在克隆 Array 中的另一个对象

> ID：14834149
> 
> 赞同：4
> 
> 时间：2013-02-12T13:52:33.753
> 
> 标签：ios, xcode, cocoa-touch, nsmutablearray

删除 NSMutableArray 中的对象后出现一个奇怪的错误。

![删除对象之前](../Images/ead3a87b64e0c44c9d146dc99a8f880a.png)

如果我删除一个对象

```
[Array removeObjectAtIndex:2]; 
```

数组更改为：

![在此处输入图像描述](../Images/c7008385af70b341b918844008bd7060.png)

为什么现在有 2 个 ContactViewControllers？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T14:16:07.323

lldb 有时会说谎。它会感到困惑，并会显示不正确的信息。尝试做

```
po Array 
```

您应该会看到正确的数组内容。

# macos - 变量名出现在提示中

> ID：14834157
> 
> 赞同：1
> 
> 时间：2013-02-12T13:53:03.407
> 
> 标签：macos, bash

我正在尝试通过键入“project something”来自动化我打开编辑器和“cd-ing”到项目文件夹的日常任务。到目前为止，一切都很好。代码正在运行。但我得到了一些意想不到的行为。当前目录标签显示`Lukas-mbp:~sub_directory(2603m|master) $`。这是`sub_directory`在那儿做什么。这是我正在使用的变量名，如下面的代码。但是谁能告诉我为什么我的终端显示的是它而不是实际的目录？

```
function project() {
  for directory in ~/projects/*
  do
    for sub_directory in $directory/*
    do
      if [[ "$sub_directory" =~ $1 ]]; then
        cd "$sub_directory"
        sublime $sub_directory
        return
      fi
    done
  done
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T18:25:06.560

使用简单的**通配符**而不是做所有不必要的循环！但是，我还没有完全理解您的子目录树，所以我提供了两个替代方案，使用合适的那个。将函数添加到*~/.bashrc*。

**1 - 如果您的子目录树是这样的（与您的示例完全相同*）：**

```
~/projects/subdir1/target1/
~/projects/subdir1/target2/
~/projects/subdir2/target3/
~/projects/subdir2/target4/ 
```

该功能将是这样的：

```
function project {
    cd ~/projects/*/"$1"
    sublime .
    # or sublime ./*
} 
```

* 请记住，如果您有两个或多个具有相同名称的*目标，但在不同的**subdir*上，它将只匹配第一个，就像您的示例一样。

**2 - 如果您的子目录树是这样的（这对我来说似乎更常见）：**

```
~/projects/target1/
~/projects/target2/
~/projects/target3/
~/projects/target4/ 
```

该功能将是这样的：

```
function project {
    cd ~/projects/"$1"
    sublime .
    # or sublime ./*
} 
```

# css - Bootstrap 多列折叠

> ID：14834158
> 
> 赞同：1
> 
> 时间：2013-02-12T13:53:10.617
> 
> 标签：css, twitter-bootstrap

大家好，我需要有两列布局，但我需要将内容堆叠起来。这是一个小提琴[http://jsfiddle.net/kljuco/KPMCJ/](http://jsfiddle.net/kljuco/KPMCJ/)。

```
<link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.0/css/bootstrap-combined.min.css" rel="stylesheet">
<div class="row">
    <div class="span6">
        <table class="table">
            <tr><th colspan="2">Test 1</th></tr>
            <tr>
                <td>test</td>
                <td>test</td>
            </tr>
            <tr>
                <td>test</td>
                <td>test</td>
            </tr>
        </table>
    </div>
    <div class="span6">
        <table class="table">
            <tr><th colspan="2">Test 2</th></tr>
            <tr>
                <td>test</td>
                <td>test</td>
            </tr>
            <tr>
                <td>test</td>
                <td>test</td>
            </tr>
              <tr>
                <td>test</td>
                <td>test</td>
            </tr>
              <tr>
                <td>test</td>
                <td>test</td>
            </tr>
              <tr>
                <td>test</td>
                <td>test</td>
            </tr>
              <tr>
                <td>test</td>
                <td>test</td>
            </tr>
              <tr>
                <td>test</td>
                <td>test</td>
            </tr>
              <tr>
                <td>test</td>
                <td>test</td>
            </tr>
        </table>
    </div>
</div>
<div class="row">
    <div class="span6">
         <table class="table">
             <tr><th colspan="2">Test 3</th></tr>
            <tr>
                <td>test</td>
                <td>test</td>
            </tr>
            <tr>
                <td>test</td>
                <td>test</td>
            </tr>
             <tr>
                <td>test</td>
                <td>test</td>
            </tr>
        </table>
    </div>
    <div class="span6">
          <table class="table">
              <tr><th colspan="2">Test 4</th></tr>
            <tr>
                <td>test</td>
                <td>test</td>
            </tr>
            <tr>
                <td>test</td>
                <td>test</td>
            </tr>
             <tr>
                <td>test</td>
                <td>test</td>
            </tr>
        </table>
    </div>
</div><div class="row">
    <div class="span6"></div>
    <div class="span6"></div>
</div><div class="row">
    <div class="span6"></div>
    <div class="span6"></div>
</div> 
```

我需要将“Test 3”表放在“Test 1”表的正下方。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T14:13:58.850

你可以像这样嵌套你的行......

```
<link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.0/css/bootstrap-combined.min.css" rel="stylesheet">
<div class="row">
    <div class="span6">
        <table class="table">
            <tr><th colspan="2">Test 1</th></tr>
            <tr>
                <td>test</td>
                <td>test</td>
            </tr>
            <tr>
                <td>test</td>
                <td>test</td>
            </tr>
        </table>
        <div class="row">
            <div class="span6">
                <table class="table">
                    <tr><th colspan="2">Test 3</th></tr>
                    <tr>
                          <td>test</td>
                          <td>test</td>
                    </tr>
                    <tr>
                          <td>test</td>
                          <td>test</td>
                    </tr>
                    <tr>
                          <td>test</td>
                          <td>test</td>
                    </tr>
                </table>
             </div>
        </div>
    </div>
    <div class="span6">
        <table class="table">
            <tr><th colspan="2">Test 2</th></tr>
            <tr>
                <td>test</td>
                <td>test</td>
            </tr>
            <tr>
                <td>test</td>
                <td>test</td>
            </tr>
              <tr>
                <td>test</td>
                <td>test</td>
            </tr>
              <tr>
                <td>test</td>
                <td>test</td>
            </tr>
              <tr>
                <td>test</td>
                <td>test</td>
            </tr>
              <tr>
                <td>test</td>
                <td>test</td>
            </tr>
              <tr>
                <td>test</td>
                <td>test</td>
            </tr>
              <tr>
                <td>test</td>
                <td>test</td>
            </tr>
        </table>
        <div class="row">
            <div class="span6">
                 <table class="table">
                     <tr><th colspan="2">Test 4</th></tr>
                     <tr>
                          <td>test</td>
                          <td>test</td>
                     </tr>
                     <tr>
                          <td>test</td>
                          <td>test</td>
                     </tr>
                     <tr>
                          <td>test</td>
                          <td>test</td>
                     </tr>
                 </table>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="span6"></div>
    <div class="span6"></div>
</div><div class="row">
    <div class="span6"></div>
    <div class="span6"></div>
</div> 
```

至少你可以从这里开始调整以获得你想要的结果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T14:15:23.283

这不是 CSS 应该做的事情，而是让 jQuery 解决您的问题：

```
<table id="first" class="table"> ....
<table id="second" class="table"> ...
<table id="third" class="table"> ...

$('#third').insertBefore('#second'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T14:29:36.423

另外，另一种方式：http: [//jsfiddle.net/persianturtle/KPMCJ/3/](http://jsfiddle.net/persianturtle/KPMCJ/3/)

坏消息是我不得不为第二个表复制 html。

好消息，没有 jQuery。

看一看。

```
@media (max-width: 767px) {

  #second {
      display:none;
  }

#second-small {
      display:table;
  }

}

@media (min-width: 766px) {

  #second-small {
      display:none;
  }

} 
```

# java - 从枚举值实例化类的好习惯

> ID：14834168
> 
> 赞同：4
> 
> 时间：2013-02-12T13:53:48.487
> 
> 标签：java, enums, instantiation

我一直在寻找很多地方，但我没有为我的问题找到一个好的答案：

我有一个枚举，例如：

```
public enum Window { CLASSIC, MODERN } 
```

我需要根据枚举值分离我的应用程序的行为，如下所示：

```
switch (myWindow.getType()) {
  case CLASSIC: new ClassicWindow(...);
  case MODERN: new ModernWindow(...);
} 
```

我知道您的想法：只需将其放在枚举和 basta 中，但这并不是唯一取决于我的枚举的类！而且我写的对象创建方法不能和我有对象一样多！

简而言之，在这种情况下我该怎么办？我的一个朋友对我说要摆脱枚举并每次都使用派生类，但最后我必须为我的所有测试创建与子类一样多的实例！

简而言之，我被卡住了。

你知道一个最佳实践吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T13:57:16.683

您似乎正在寻找一种[设计模式](https://en.wikipedia.org/wiki/Software_design_pattern)，而不是使用枚举的良好做法。您打算编写的代码将充满 switch 语句，每个可能的枚举值都有一个条件 - 从长远来看很难维护和扩展。一个更好的想法是在一个单独的类中重构每个可能的情况的行为，也许使用[抽象工厂](https://en.wikipedia.org/wiki/Abstract_factory_pattern)模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T13:58:08.717

这是工厂模式。 [这个例子](http://en.wikipedia.org/wiki/Factory_method_pattern#Java_3)实际上准确地显示了你在做什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T14:03:16.433

您可以在枚举中实现一个接口并让它们充当工厂：

```
interface WindowBuilder {
    Window makeWindow();
}

enum WindowType implements WindowBuilder {
    SIMPLE {
        public Window makeWindow() { return new SimpleWindow() }
    },
    [... other enums]
} 
```

或者您可以使用反射并将一个类绑定到枚举类型以让它们（再次）作为工厂工作：

```
enum WindowType {
    SIMPLE(SimpleWindow.class),
    [... other enums]

    private final Class<? extends Window> wndType;

    private WindowType(Class<? extends Window> wndType) {
        this.wndType = wndType;
    }

    public Window makeWindow() {
        // in fact you will need to either catch the exceptions newInstance can throw, or declare the method can throw them
        return this.wndType.newInstance();
    }
} 
```

无论哪种方式，您之后都可以这样称呼他们：

```
Window window = myWindow.getType().makeWindow(); 
```

# c# - 项目降级时 MSChart 不起作用

> ID：14834174
> 
> 赞同：0
> 
> 时间：2013-02-12T13:54:08.243
> 
> 标签：c#, .net, mschart, downgrade

我有一个问题，我在 4.5 框架下创建了一个项目，然后将其降级到 3.5，但 MSChart 不起作用，即使它应该在 3.5 下工作。我已经删除并重新添加了参考资料，根本没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T14:07:01.210

您需要在这里小心，因为 .net 4 是一个基准。

如果你有一个 .net 4 可执行文件，那么它可以引用一个 .net 2 库没有问题。（请记住，.net 2、3 和 3.5 本质上都是 .net 2）

但是，如果您有一个 .net 2 可执行文件并尝试引用一个 .net 4 库，它就无法工作。

我怀疑你有后者。在 .net 3.5 下运行有效地为您提供了一个 .net 2 可执行文件。如果将 MsChart 组件构建为 .net 4 组件，那么您将遇到问题。

我会仔细检查您在此处引用的 MsChart 版本。如果您重新添加了错误的版本，仅仅删除和阅读可能是不够的。

# javascript - 错误：对象在 Javascript 中不支持此方法

> ID：14834179
> 
> 赞同：1
> 
> 时间：2013-02-12T13:54:18.113
> 
> 标签：javascript, html5-canvas

以下代码在除 IE 之外的其他浏览器中正常工作。我的代码是：

```
<script lang="javascript" type="text/javascript">
  alert("fdgdfgdfg");
  var canvas;
  var ctx;
  var canX;
  var canY;
  var rltvX;
  var rltvY;
  var x = "black";
  var flag = false;
  var w, h;
  function init() {
    alert("aaaaaaaaaaa");
    alert("bbbbbbbbbbb");
    canvas = document.getElementById("canvas");
    ctx = canvas.getContext("2d");
    w = canvas.width;
    h = canvas.height;
    canvas.addEventListener("mousemove", function(e) {findxy('move', e);}, false);
    canvas.addEventListener("mousedown", function(e) {findxy('down', e);}, false);
    canvas.addEventListener("mouseup", function(e) {findxy('up', e);}, false);
    canvas.addEventListener("mouseout", function(e) {findxy('out', e);}, false);
    canvas.addEventListener("touchstart", touchDown, false);
    canvas.addEventListener("touchmove", move, true);
    canvas.addEventListener("touchend", touchUp, false);
    document.body.addEventListener("mouseup", mouseUp, false);
    document.body.addEventListener("touchcancel", touchUp, false);
  }
  function findxy(res, e) {
    if (res == 'down') {
      canX = e.clientX - canvas.offsetLeft-5;
      canY = e.clientY - canvas.offsetTop-25;
      flag = true;
      dot_flag = true;
      if (dot_flag) {
        ctx.beginPath();
        ctx.fillStyle = x;
        ctx.fillRect(canX, canY, 2, 2);
        ctx.closePath();
        dot_flag = false;
      }
    }
    if (res == 'up' || res == "out") {
      flag = false;
    }
    if (res == 'move') {
      if (flag) {
        rltvX = canX;
        rltvY = canY;
        canX = e.clientX - canvas.offsetLeft-5;
        canY = e.clientY - canvas.offsetTop-25;
        ctx.beginPath();
        ctx.moveTo(rltvX, rltvY);
        ctx.lineTo(canX, canY);
        ctx.strokeStyle = x;
        ctx.lineWidth = 2;
        ctx.stroke();
        ctx.closePath();
      }
    }
  }
  function touchDown(e) {
    if (!e)
      var e = event;
    e.preventDefault();
    canX = e.targetTouches[0].pageX - canvas.offsetLeft-5;
    canY = e.targetTouches[0].pageY - canvas.offsetTop-25;
    ctx.beginPath();
    ctx.fillStyle = x;
    ctx.fillRect(canX, canY, 2, 2);
    ctx.closePath();
  }
  function move(e) {
    if (!e)
      var e = event;
    e.preventDefault();
    rltvX = canX;
    rltvY = canY;
    canX = e.targetTouches[0].pageX - canvas.offsetLeft-5;
    canY = e.targetTouches[0].pageY - canvas.offsetTop-25;
    ctx.beginPath();
    ctx.strokeStyle = x;
    ctx.lineWidth = 2;
    ctx.moveTo(rltvX, rltvY);
    ctx.lineTo(canX, canY);
    ctx.stroke();
  }
</script> 
```

错误是，对象“画布”不支持该方法`addEventListener()`。这在除 IE 之外的所有浏览器中都能正常工作。有什么选择吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T13:58:22.580

如果您使用的是 IE8，则应使用该`attachEvent()`方法而不是`addEventListener()`. 这意味着您必须首先检查用户使用的浏览器，然后在元素上调用正确的方法。

编辑如何检查使用哪种方法：

```
if (el.addEventListener){
  el.addEventListener(...); 
} else if (el.attachEvent){
  el.attachEvent(...);
} 
```

`el`你的 DOM 元素在哪里。

# opengl - 为什么这个 GLSL 着色器在 GeForce 上运行良好，但在 Intel HD 4000 上却奇怪地闪烁？

> ID：14834180
> 
> 赞同：2
> 
> 时间：2013-02-12T13:54:19.507
> 
> 标签：opengl, glsl, intel, opengl-3

使用 OpenGL 3.3 核心配置文件，我使用以下着色器通过**gl.DrawArrays(gl.TRIANGLES, 0, 3)**渲染全屏“四边形”（作为单个超大三角形） 。

顶点着色器：

```
#version 330 core
#line 1

vec4 vx_Quad_gl_Position () {
    const float extent = 3;
    const vec2 pos[3] = vec2[](vec2(-1, -1), vec2(extent, -1), vec2(-1, extent));
    return vec4(pos[gl_VertexID], 0, 1);
}

void main () {
    gl_Position = vx_Quad_gl_Position();
} 
```

片段着色器：

```
#version 330 core
#line 1
out vec3 out_Color;

vec3 fx_RedTest (const in vec3 vCol) {
    return vec3(0.9, 0.1, 0.1);
}

vec3 fx_Grayscale (const in vec3 vCol) {
    return vec3((vCol.r * 0.3) + (vCol.g * 0.59) + (vCol.b * 0.11));

}

void main () {
    out_Color = fx_RedTest(out_Color);
    out_Color = fx_Grayscale(out_Color);
} 
```

现在，代码可能看起来有点奇怪，目前的目的可能看起来毫无用处，但这不应该对 GL 驱动程序进行调整。

在 GeForce 上，按预期获得灰屏。即，应用于硬编码颜色“红色”（0.9、0.1、0.1）的“灰度效果”。

但是，Intel HD 4000 [驱动程序 9.17.10.2932 (12-12-2012) 版本 -- 最新版本] 总是反复显示以下不断闪烁的噪音模式：![shot01](../Images/8fb70af1e6628e4011da208f18b5182c.png)

现在，为了进行一些实验，我稍微改变了 fx_Grayscale() 函数——实际上它应该产生相同的视觉结果，只是编码略有不同：

```
vec3 fx_Grayscale (const in vec3 vCol) {

    vec3 col = vec3(0.9, 0.1, 0.1);
    col = vCol;
    float x = (col.r * 0.3) + (col.g * 0.59) + (col.b * 0.11);
    return vec3(x, x, x);
} 
```

同样，Nvidia 做了正确的事情，而 Intel HD 现在总是重复地产生一种完全不同但仍然不断闪烁的噪声模式：![shot02](../Images/8a83cccf885382bc9e3038db40636903.png)

我是否必须怀疑（又一个）英特尔 GL 驱动程序错误，或者您是否看到我的 GLSL 代码有任何问题——**不是从漂亮的角度来看**（它是着色器代码生成实验项目的一部分），而只是从**规范正确性**的角度来看看法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T14:03:19.147

我认为将“out”颜色作为参数发送给另一个函数看起来很奇怪。我会像这样重写它：

```
void main () {
    vec3 col = vec3(0f,0f,0f);
    col = fx_RedTest(col);
    col = fx_Grayscale(col);
    out_Color = col;
} 
```

它有什么不同吗？

# html - ASP.NET MVC 应用程序， 标签

> ID：14834189
> 
> 赞同：4
> 
> 时间：2013-02-12T13:54:52.860
> 
> 标签：html, asp.net-mvc

在我正在处理的 ASP.NET MVC 应用程序中，文件`<text>`中使用了标签`.cshtml`。

例子 -

```
<text>some text</text> 
```

它们提供什么功能？我在互联网上找不到对它们的*任何*引用:)

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T14:01:24.667

这有点与@标签相反......

在您处于“HTML 模式”的视图中，您可以像这样使用 Razor-block：

```
@{
  //Razor code
} 
```

Razor 将检测 razor 块中的 HTML 标记并呈现它，但有时您只需要显示文字文本。这就是标签出现的地方......它在不使用实际 HTML 标签的情况下切换回 HTML 模式......

因此，某些文本会在您的视图中呈现该确切文本（没有标签>）：Convaluted 示例，但此代码：

```
<div>
you have
@{
 if(numItems == 0)
 {
   <text>no</text>
 }
 else
 {
   @numItems
 }

}
items
</div> 
```

例如，将呈现“您没有物品”或“您有 5 件物品”...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T13:57:58.040

此元素用于明确标识内容。您可以在此处阅读有关此内容的信息：[http://weblogs.asp.net/scottgu/archive/2010/12/15/asp-net-mvc-3-razor-s-and-lt-text-gt-syntax。 aspx](http://weblogs.asp.net/scottgu/archive/2010/12/15/asp-net-mvc-3-razor-s-and-lt-text-gt-syntax.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T13:57:05.853

`<text>`明确告诉 Razor 视图引擎这是文本而不是代码。当渲染器与页面斗争或需要严格控制 html 时，我会使用它。

例如

```
<div id="content" @if (ViewData["PageLayout"] != null){
<text>class="@ViewData["PageLayout"].ToString()</text><text>"</text>
}> 
```

请参阅Scott Gu[的这篇文章](http://weblogs.asp.net/scottgu/archive/2010/12/15/asp-net-mvc-3-razor-s-and-lt-text-gt-syntax.aspx)。

# javascript - 在整个对象中使用多个函数中的变量

> ID：14834190
> 
> 赞同：2
> 
> 时间：2013-02-12T13:54:53.797
> 
> 标签：javascript

**根据**

*   我想使用从对象中的另一个函数设置的一些变量
*   一个函数，`onUpdate:`等待从应用程序中的其他地方进行调用
*   第二个功能，`onRelease:`鼠标点击后触发

**我想要达到的目标**

`DOM`我需要为这两个功能使用一些元素。但是， a`document.onload`在这里不起作用，所以我想我需要将它们存储在某种`JavaScript object`.

**限制**

（元素只用在这个`Object`里面，必须在里面声明`Object`）

* * *

**注意**：这是一个定制的`app`，所以它可能看起来有点混乱，但我只需要知道这是否可以在当前情况下完成

* * *

**问题**

有什么方法可以使用`Javascript Objects`或某种功能来存储/获取`DOM`元素，以便它们在整个过程中可用`Object`？

**代码**

```
var ObjB = exports.ObjB = ObjA.extend({

    /* Something to contain the DOM Elements E.g.
     UI = {
         domElement: document.querySelector('#dom')
     }, 
    */ 

    onUpdate: function() {
        if(domElement.hasClass('class')) { 
            // logic using other elements
        }
    },

    onRelease: function() {
        if(domElement.hasClass('class')) { 
            // logic using other elements  
        }
    }

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T14:16:18.157

如果您想多次使用 dom 元素，并且您想避免每次要使用该元素时都调用选择器，您可以这样做，但请注意，这只有在您不删除或稍后添加所需的元素（在您`this.setupUi()`第一次调用之后），因为`UI`只会*初始化*一次：

```
var ObjB = exports.ObjB = ObjA.extend({

    onUpdate: function() {
        this.setupUi();

        if(this.UI.domElement.hasClass('class')) { 
            // logic using other elements
        }
    },

    onRelease: function() {

        this.setupUi();

        if(this.UI.domElement.hasClass('class')) { 
            // logic using other elements  
        }
    },

    setupUi : function() {
        if( !this.UI ) {
           this.UI = {};
           this.UI.domElement =  document.querySelector('#dom');
           //add all other elements that are required by the object
        }

    }

}); 
```

# iphone - 架构 armv7s 的未定义符号：

> ID：14834194
> 
> 赞同：6
> 
> 时间：2013-02-12T13:55:33.667
> 
> 标签：iphone, ios, objective-c

因此，我正在尝试将其实施到我当前的项目中：

[https://github.com/mobitar/MBAlertView](https://github.com/mobitar/MBAlertView)

Wenn 我尝试在我的应用程序中使用它，但出现此错误：

> ld /Users/florianschaal/Library/Developer/Xcode/DerivedData/Janssenapp-egfiwitwudiuhubsglmuhxxuafya/Build/Products/Debug-iphoneos/Janssenapp.app/Janssenapp normal armv7s cd /Users/florianschaal/Developer/Janssenapp setenv IPHONEOS_DEPLOYMENT_TARGET 6.1 setenv PATH "/Applications /Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/ sbin" /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch armv7s -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/ iPhoneOS6.1。sdk -L/Users/florianschaal/Library/Developer/Xcode/DerivedData/Janssenapp-egfiwitwudiuhubsglmuhxxuafya/Build/Products/Debug-iphoneos -L/Users/florianschaal/Developer/Janssenapp/Janssenapp/ZBarSDK -F/Users/florianschaal/Library/ Developer/Xcode/DerivedData/Janssenapp-egfiwitwudiuhubsglmuhxxuafya/Build/Products/Debug-iphoneos -filelist /Users/florianschaal/Library/Developer/Xcode/DerivedData/Janssenapp-egfiwitwudiuhubsglmuhxxuafya/Build/Intermediates/Janssenapp.build/Debug-iphoneos/Janssenapp。 build/Objects-normal/armv7s/Janssenapp.LinkFileList -dead_strip -fobjc-arc -fobjc-link-runtime -miphoneos-version-min=6.1 -framework UIKit -framework Foundation -framework CoreGraphics -o /Users/florianschaal/Library/Developer /Xcode/DerivedData/Janssenapp-egfiwitwudiuhubsglmuhxxuafya/Build/Products/Debug-iphoneos/Janssenapp.app/Janssenapp应用程序/Janssenapp应用程序/Janssenapp应用程序/Janssenapp应用程序/JanssenappLinkFileList -dead_strip -fobjc-arc -fobjc-link-runtime -miphoneos-version-min=6.1 -framework UIKit -framework Foundation -framework CoreGraphics -o /Users/florianschaal/Library/Developer/Xcode/DerivedData/Janssenapp-egfiwitwudiuhubsglmuhxxuafya/Build /Products/Debug-iphoneos/Janssenapp.app/JanssenappLinkFileList -dead_strip -fobjc-arc -fobjc-link-runtime -miphoneos-version-min=6.1 -framework UIKit -framework Foundation -framework CoreGraphics -o /Users/florianschaal/Library/Developer/Xcode/DerivedData/Janssenapp-egfiwitwudiuhubsglmuhxxuafya/Build /Products/Debug-iphoneos/Janssenapp.app/Janssenapp
> 
> 架构 armv7s 的未定义符号：
> “_OBJC_CLASS_$_CABasicAnimation”，引用自：MBSpinningCircle.o 中的 objc-class-ref “_kCAMediaTimingFunctionEaseOut”，引用自：MBAlertView.o “_kCATransitionFade”中的-[MBAlertView animationWithValues:times:duration:]，引用自：-[UIView(动画） UIView+Animations.o 中的 addFadingAnimationWithDuration:] "_kCAMediaTimingFunctionEaseInEaseOut"，引用自：-[UIView(Animations) animationPop] 在 UIView+Animations.o -[UIView(Animations) addPulsingAnimation] 在 UIView+Animations.o -[UIView(动画）在 UIView+Animations.o "_kCATransitionFromBottom" 中的 addFadingAnimationWithDuration:]，引用自：-[UIView(Animations) addFadingAnimationWithDuration:] 在 UIView+Animations.o "_OBJC_CLASS_$_CATransition"，引用自：UIView+Animations.o 中的objc-class-ref "_kCAMediaTimingFunctionEaseIn"，引用自：MBAlertView.o 中的-[MBAlertView addDismissAnimation] "_kCAFillModeForwards"，引用自：-[UIView(Animations) animationPop]在 UIView+Animations.o -[UIView(Animations) addPulsingAnimation] 在 UIView+Animations.o -[MBAlertView animationWithValues:times:duration:] 在MBAlertView.o "_OBJC_CLASS_$_CAMediaTimingFunction"，引用自：objc-class-ref in UIView +Animations.o objc-class-ref in MBAlertView.o "_OBJC_CLASS_$_CAKeyframeAnimation"，引用自： objc-class-ref in UIView+Animations.o objc-class-ref in MBlertView.o "_CATransform3DMakeScale"，引用自：-[UIView(Animations) animationPop] 在 UIView+Animations.o -[UIView(Animations) addPulsingAnimation] 在 UIView+Animations.o -[MBAlertView addDismissAnimation] 在 MBAlertView.o -[MBAlertView addBounceAnimationToLayer:] 在 MBAlertView.o -[MBAlertView MBAlertView.o 中的 didSelectBodyLabel:] -MBAlertView.o 中的 [MBAlertView didHighlightButton:] ld：未找到架构 armv7s clang 的符号：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）o -[MBAlertView didHighlightButton:] 在 MBAlertView.old 中：未找到架构 armv7s clang 的符号：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）o -[MBAlertView didHighlightButton:] 在 MBAlertView.old 中：未找到架构 armv7s clang 的符号：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T14:07:39.207

I have downloaded MBAlertView repository than compiled the example project and it worked. After that i have added MBAlertView directory to my project and it started to work after i added QuartzCore.framework in Link Binary With Librarys section of Build Phases in project file.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T14:11:28.910

您只需查看以下可能对您有所帮助的问题

1.  [问题 1](https://stackoverflow.com/questions/6429494/undefined-symbols-for-architecture-armv7)

2.  [问题2](https://stackoverflow.com/questions/8559256/undefined-symbols-for-architecture-armv7)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T14:13:00.333

除非你正在编写高性能游戏并使用汇编编写，否则只需在构建设置中关闭 armv7s 架构即可。这对普通应用程序没有任何影响（它是 iphone5 中的处理器）。

# razor - ASP.Net MVC4 with Razor - 在视图中访问控制器方法的最佳和正确方法

> ID：14834195
> 
> 赞同：0
> 
> 时间：2013-02-12T13:55:35.197
> 
> 标签：razor, asp.net-mvc-4

我一直在使用 ASP.NET，但我对带有 Razor 概念的 ASP.Net MVC 4 相当陌生。所以我的问题可能是基本的，但我感谢每一个帮助，因为我现在几天都找不到明确的答案（或者我正在寻找错误的东西）。问题是：如何在不使用索引方法的情况下访问视图中的控制器方法？

场景：

*   我有一个存储一些值的数据库，如日期、价格等......（变量在 Model.

*   我有一个设置视图索引的控制器

*   我有一个视图显示 Indexpage 与我的数据库的值。

我想对价格列的所有值求和，但不想将结果存储在我的数据库中。据我了解，我通过控制器类中的方法访问数据库，并在我的视图中调用此方法。

为了逐步学习，我刚刚在控制器中定义了一个固定值，以查看如何在我的视图中显示该值。

编码：

```
Model:

[Range(1, 100)]
[DataType(DataType.Currency)]
public decimal Price { get; set; } // Amount of an entry

Controller:

     public ActionResult Index()
        {
             return View(db.Amounts.ToList());
        }

      public ActionResult ShowSumOfAllPrices()
        {

            //For testing db is not called yet. Query must be defined and result written to a variable within this mehod
            ViewBag.Price = 2;

            return View();
        }

View:

@*testmethod for displaying sumprize (first just wit test result) via controler*@

    <table>
    <tr>   
        <td>hallo @ViewBag.Price</td>
    </tr>
    </table> 
```

只要我没有在方法中定义 `ShowSumOfAllPrices()`（在我的控制器类中）的方法内容，结果就不会显示`index()`。

问题是：视图中的方法的结果是否仅在我`Index()`在控制器的方法中定义它时才可见，或者我可以像我一样编写一个额外的方法并在我的视图中调用它？如果我 c&p `ShowSumOfAllPrices()`to的逻辑，它就可以工作`Index()`。但我认为我不需要在我的 index 方法中定义所有内容。如果是这样，这将是一个大而胖的方法。因此，据我所知，有 3 种可能的方法，但并非所有方法都“不错”甚至有效：

1.  定义`Index()`方法中的所有内容。
2.  定义其他方法，但在 Index 方法中调用它们，因为这是在我的视图中显示它而不使用模型的唯一方法，因为我不想将这些数据存储在我的数据库中
3.  我可以定义其他方法并在我的视图中直接调用它们而无需新页面，但只有此方法的结果显示在当前索引页面的内容下。

我希望我的问题是可以理解的，并且这个问题不像我以前那样被问过。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T14:05:40.140

> 在 Index() 方法中定义所有内容。

控制器并不意味着保存逻辑。

> 定义其他方法，但在 Index 方法中调用它们，因为这是在我的视图中显示它而不使用模型的唯一方法，因为我不想将这些数据存储在我的数据库中

不要在控制器本身中定义其他方法。创建其他类，然后在`Index()`或任何合适的控制器方法中调用这些方法。如果你想在视图中显示数据，那么模型是最好的选择，但你甚至可以将数据存储在`ViewBag`

> 我可以定义其他方法并在我的视图中直接调用它们而无需新页面，但只有该方法的结果显示在当前索引页面的内容下。

如果您想在同一视图中获取方法的结果，则可能是这种情况[可能使用相同类型的 AJAX]，但如果您想渲染其他页面，那么这可能是个坏主意。

您可以做的**最好**的事情是为您所需的功能声明一个类作为单一责任原则，然后使用该类在您想要结果的方法中执行该操作。您可以使用 AJAX 和 JQuery 访问控制器方法，只需谷歌一下，你会是你自己的。

希望这可以帮助。

# java - 使用 Java PreparedStatements 设置列别名

> ID：14834197
> 
> 赞同：0
> 
> 时间：2013-02-12T13:55:38.517
> 
> 标签：java, oracle, oracle10g, prepared-statement

大家好 :) 我想用 Oracle 10g 动态命名我的列。这是我想做的事情：

```
SELECT 
  NAME as "User.Name",
  EMAIL as "User.Email.For.Criteria2.at." || CRITERIA 
FROM CUSTOMERS 
WHERE 
  CRITERIA = ? 
```

或者：

```
SELECT 
  NAME as "User.Name",
  EMAIL as "User.Email.For.Criteria2.at." || ?
FROM CUSTOMERS 
WHERE 
  CRITERIA = ? 
```

随着一些Java循环遍历所有参数：（这已经在生产中）

```
ps.setString(i+1, parameterArray[i]); 
```

我知道我可以用 Java 构建查询，但我的限制是要避免部署新的 Java 代码：/。我可以修改 SQL。这是否仅适用于 Oracle SQL？

此致

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T14:12:09.630

列名（别名）在 SQL 中是静态的，并且必须在解析时（绑定之前）知道。这允许一些工具在执行查询之前知道列数、它们的名称和它们的类型。

因此，您不能动态命名列别名。

* * *

另一种看待它的方式：绑定只能替换值。所以问问自己：我可以用`?`常量表达式替换绑定`'A'`吗？

*   您可以替换`?`where 子句中的
*   您不能替换`?`列别名中的 ，这将产生无效查询。

# html - 使用 HTML 和 CSS 滚动表格

> ID：14834198
> 
> 赞同：77
> 
> 时间：2013-02-12T13:55:40.397
> 
> 标签：html, css, html-table

我有一个表格，我用数据填充

```
<table id="products-table"  style="overflow-y:scroll" >
    <thead>
        <tr>
            <th>Product (Parent Product)</th> 
            <th>Associated Sites</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        @for (int i = 0; i < Model.Count(); i++)
        { 
        <tr>
            <td>
                <a href="Edit"><strong>@Model.ElementAt(i).Name</strong></a><br />
            </td>
            <td>
                <span class="lesser"></span>
            </td>
            <td>@Html.ActionLink("Edit Product", "Edit", "Products")<br />
                @Html.ActionLink("Associate Site", "Associate", "Products")
            </td>
         </tr>
        }
        <tr>
</tbody>
</table> 
```

和这样的CSS

```
 #products-table
{
     width: 200px;
    height: 400px;
    overflow:scroll;
} 
```

但是滚动不起作用，我想修复表格的高度，如果超过，则使用滚动条

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2013-02-12T14:01:14.673

***带有固定标题的表格***

```
<table cellspacing="0" cellpadding="0" border="0" width="325">
  <tr>
    <td>
       <table cellspacing="0" cellpadding="1" border="1" width="300" >
         <tr style="color:white;background-color:grey">
            <th>Header 1</th>
            <th>Header 2</th>
         </tr>
       </table>
    </td>
  </tr>
  <tr>
    <td>
       <div style="width:320px; height:80px; overflow:auto;">
         <table cellspacing="0" cellpadding="1" border="1" width="300" >
           <tr>
             <td>new item</td>
             <td>new item</td>
           </tr>
           <tr>
             <td>new item</td>
             <td>new item</td>
           </tr>
              <tr>
             <td>new item</td>
             <td>new item</td>
           </tr>
              <tr>
             <td>new item</td>
             <td>new item</td>
           </tr>
              <tr>
             <td>new item</td>
             <td>new item</td>
           </tr>
              <tr>
             <td>new item</td>
             <td>new item</td>
           </tr>
              <tr>
             <td>new item</td>
             <td>new item</td>
           </tr>
              <tr>
             <td>new item</td>
             <td>new item</td>
           </tr>
              <tr>
             <td>new item</td>
             <td>new item</td>
           </tr>
              <tr>
             <td>new item</td>
             <td>new item</td>
           </tr>
         </table>  
       </div>
    </td>
  </tr>
</table>
```

结果

![演示图片](../Images/0aa8137df22ec46fc4f165a40e756799.png)

这适用于所有浏览器

演示 jsfiddle [http://jsfiddle.net/nyCKE/6302/](http://jsfiddle.net/nyCKE/6302/)

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2016-09-28T14:30:49.687

迟到的答案，另一个想法，但很短。

1.  将标题单元格的内容放入div
2.  修复标题**内容**，见 CSS

```
table  { margin-top:  20px; display: inline-block; overflow: auto; }
th div { margin-top: -20px; position: absolute; } 
```

请注意，由于[匿名表对象](https://drafts.csswg.org/css2/tables.html)，可以将表显示为内联块：

> 必须假定“缺失”[在 HTML 表树结构中] 元素才能使表模型工作。任何表格元素都会在其周围自动生成必要的匿名表格对象。

```
/* scrolltable rules */
table  { margin-top:  20px; display: inline-block; overflow: auto; }
th div { margin-top: -20px; position: absolute; }

/* design */
table { border-collapse: collapse; }
tr:nth-child(even) { background: #EEE; }
```

```
<table style="height: 150px">
  <tr> <th><div>first</div> <th><div>second</div>
  <tr> <td>foo <td>bar
  <tr> <td>foo foo foo foo foo <td>bar
  <tr> <td>foo <td>bar
  <tr> <td>foo <td>bar bar bar
  <tr> <td>foo <td>bar
  <tr> <td>foo <td>bar
  <tr> <td>foo <td>bar
  <tr> <td>foo <td>bar
  <tr> <td>foo <td>bar
  <tr> <td>foo <td>bar
  <tr> <td>foo <td>bar
  <tr> <td>foo <td>bar
  <tr> <td>foo <td>bar
  <tr> <td>foo <td>bar
</table>
```

# 截至 2016 年

实现这一点的正确方法是[position:sticky](https://css-tricks.com/position-sticky-2/) - 请参阅链接中的演示。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-12-23T20:16:00.300

对于那些想知道如何使用多个标题实现 Garry 的解决方案的人来说，就是这样：

```
#wrapper {
  width: 235px;
}

table {
  border: 1px solid black;
  width: 100%;
}

th,
td {
  width: 100px;
  border: 1px solid black;
}

thead>tr {
  position: relative;
  display: block;
}

tbody {
  display: block;
  height: 80px;
  overflow: auto;
}
```

```
<div id="wrapper">
  <table>
    <thead>
      <tr>
        <th>column1</th>
        <th>column2</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>row1</td>
        <td>row1</td>
      </tr>
      <tr>
        <td>row2</td>
        <td>row2</td>
      </tr>
      <tr>
        <td>row3</td>
        <td>row3</td>
      </tr>
      <tr>
        <td>row4</td>
        <td>row4</td>
      </tr>
    </tbody>
  </table>
</div>
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-04-02T04:07:24.213

仅适用于 Chrome，但它可以适应其他现代浏览器。表格回退到其他浏览器中带有滚动条的普通表格。使用 CSS3 FLEX 属性。

[http://jsfiddle.net/4SUP8/1/](http://jsfiddle.net/4SUP8/1/)

```
<table border="1px" class="flexy">
    <caption>Lista Sumnjivih vozila:</caption>
    <thead>
        <tr>
            <td>Opis Sumnje</td>
        <td>Registarski<br>broj vozila</td>
        <td>Datum<br>Vreme</td>
        <td>Brzina<br>(km/h)</td>
        <td>Lokacija</td>
        <td>Status</td>
        <td>Akcija</td>
        </tr>
    </thead>
    <tbody>

        <tr>
        <td>Osumnjičen tranzit</td>
        <td>NS182TP</td>
        <td>23-03-2014 20:48:08</td>
        <td>11.3</td>
        <td>Raskrsnica kod pumpe<br></td>
        <td></td>
        <td>Prikaz</td>
        </tr>
        <tr>

        <tr>
        <td>Osumnjičen tranzit</td>
        <td>NS182TP</td>
        <td>23-03-2014 20:48:08</td>
        <td>11.3</td>
        <td>Raskrsnica kod pumpe<br></td>
        <td></td>
        <td>Prikaz</td>
        </tr>
        <tr>

        <tr>
        <td>Osumnjičen tranzit</td>
        <td>NS182TP</td>
        <td>23-03-2014 20:48:08</td>
        <td>11.3</td>
        <td>Raskrsnica kod pumpe<br></td>
        <td></td>
        <td>Prikaz</td>
        </tr>
        <tr>

        <tr>
        <td>Osumnjičen tranzit</td>
        <td>NS182TP</td>
        <td>23-03-2014 20:48:08</td>
        <td>11.3</td>
        <td>Raskrsnica kod pumpe<br></td>
        <td></td>
        <td>Prikaz</td>
        </tr>

    </tbody>
</table> 
```

样式（CSS 3）：

```
caption {
    display: block;
    line-height: 3em;
    width: 100%;
    -webkit-align-items: stretch;
    border: 1px solid #eee;
}

       .flexy {
            display: block;
            width: 90%;
            border: 1px solid #eee;
            max-height: 320px;
            overflow: auto;
        }

        .flexy thead {
            display: -webkit-flex;
            -webkit-flex-flow: row;
        }

        .flexy thead tr {
            padding-right: 15px;
            display: -webkit-flex;
            width: 100%;
            -webkit-align-items: stretch;
        }

        .flexy tbody {
            display: -webkit-flex;
            height: 100px;
            overflow: auto;
            -webkit-flex-flow: row wrap;
        }
        .flexy tbody tr{
            display: -webkit-flex;
            width: 100%;
        }

        .flexy tr td {
            width: 15%;
        } 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-08-24T07:18:24.017

这对我有用

演示：[jsfiddle](http://jsfiddle.net/xpvt214o/671664/)

```
$(function() 
{
    Fixed_Header();
}); 
```

* * *

```
function Fixed_Header()
{
    $('.User_Table thead').css({'position': 'absolute'});
    $('.User_Table tbody tr:eq("2") td').each(function(index,e){
        $('.User_Table thead tr th:eq("'+index+'")').css({'width' : $(this).outerWidth() +"px" });
    });
    var Header_Height = $('.User_Table thead').outerHeight();
    $('.User_Table thead').css({'margin-top' : "-"+Header_Height+"px"});
    $('.User_Table').css({'margin-top' : Header_Height+"px"});
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-08-25T05:33:21.720

```
<div style="overflow:auto">
    <table id="table2"></table>
</div> 
```

试试这个溢出表的代码，它只适用于 div 标签

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-04-03T07:17:54.373

向溢出的 HTML 表格元素添加渐变渐变，以更好地指示有更多内容需要滚动。

*   带有固定标题的表格
*   溢出滚动渐变
*   自定义滚动条

请参阅下面的实时示例：

```
$("#scrolltable").html("<table id='cell'><tbody></tbody></table>");
$("#cell").append("<thead><tr><th><div>First col</div></th><th><div>Second col</div></th></tr></thead>");

for (var i = 0; i < 40; i++) {
  $("#scrolltable > table > tbody").append("<tr><td>" + "foo" + "</td><td>" + "bar" + "</td></tr>");
}
```

```
/* Table with fixed header */

table,
thead {
  width: 100%;
  text-align: left;
}

#scrolltable {
  margin-top: 50px;
  height: 120px;
  overflow: auto;
  width: 200px;
}

#scrolltable table {
  border-collapse: collapse;
}

#scrolltable tr:nth-child(even) {
  background: #EEE;
}

#scrolltable th div {
  position: absolute;
  margin-top: -30px;
}

/* Custom scrollbar */

::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);
  border-radius: 10px;
}

::-webkit-scrollbar-thumb {
  border-radius: 10px;
  box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.5);
}

/* Overflow scroll gradient */

.overflow-scroll-gradient {
  position: relative;
}

.overflow-scroll-gradient::after {
  content: '';
  position: absolute;
  bottom: 0;
  width: 240px;
  height: 25px;
  background: linear-gradient( rgba(255, 255, 255, 0.001), white);
  pointer-events: none;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div class="overflow-scroll-gradient">
  <div id="scrolltable">
  </div>
</div>
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-07-04T18:29:09.200

```
 .outer {
    overflow-y: auto;
    height: 300px;
  }

  .outer {
    width: 100%;
    -layout: fixed;
  }

  .outer th {
    text-align: left;
    top: 0;
    position: sticky;
    background-color: white;
  }
```

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>MYCRUD</title>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css" integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
</head>
<body>

<div class="container-fluid col-md-11">
  <div class="row">

    <div class="col-lg-12">

        <div class="card-body">
          <div class="outer">

            <table class="table table-hover bg-light">
              <thead>
                <tr>
                  <th scope="col">ID</th>
                  <th scope="col">Marca</th>
                  <th scope="col">Editar</th>
                  <th scope="col">Eliminar</th>
                </tr>
              </thead>
              <tbody>

                  <tr>
                    <td>4</td>
                    <td>Toyota</td>
                    <td> <a class="btn btn-success" href="#">
                        <i class="fa fa-edit"></i>
                      </a>
                    </td>
                    <td> <a class="btn btn-danger" href="#">
                        <i class="fa fa-trash"></i>
                      </a>
                    </td>
                  </tr>

                                  <tr>
                    <td>3</td>
                    <td>Honda </td>
                    <td> <a class="btn btn-success" href="#">
                        <i class="fa fa-edit"></i>
                      </a>
                    </td>
                    <td> <a class="btn btn-danger" href="#">
                        <i class="fa fa-trash"></i>
                      </a>
                    </td>
                  </tr>

                                  <tr>
                    <td>5</td>
                    <td>Myo</td>
                    <td> <a class="btn btn-success" href="#">
                        <i class="fa fa-edit"></i>
                      </a>
                    </td>
                    <td> <a class="btn btn-danger" href="#">
                        <i class="fa fa-trash"></i>
                      </a>
                    </td>
                  </tr>

                                  <tr>
                    <td>6</td>
                    <td>Acer</td>
                    <td> <a class="btn btn-success" href="#">
                        <i class="fa fa-edit"></i>
                      </a>
                    </td>
                    <td> <a class="btn btn-danger" href="#">
                        <i class="fa fa-trash"></i>
                      </a>
                    </td>
                  </tr>

                                  <tr>
                    <td>7</td>
                    <td>HP</td>
                    <td> <a class="btn btn-success" href="#">
                        <i class="fa fa-edit"></i>
                      </a>
                    </td>
                    <td> <a class="btn btn-danger" href="#">
                        <i class="fa fa-trash"></i>
                      </a>
                    </td>
                  </tr>

                                  <tr>
                    <td>8</td>
                    <td>DELL</td>
                    <td> <a class="btn btn-success" href="#">
                        <i class="fa fa-edit"></i>
                      </a>
                    </td>
                    <td> <a class="btn btn-danger" href="#">
                        <i class="fa fa-trash"></i>
                      </a>
                    </td>
                  </tr>

                                  <tr>
                    <td>9</td>
                    <td>LOGITECH</td>
                    <td> <a class="btn btn-success" href="#">
                        <i class="fa fa-edit"></i>
                      </a>
                    </td>
                    <td> <a class="btn btn-danger" href="#">
                        <i class="fa fa-trash"></i>
                      </a>
                    </td>
                  </tr>

                              </tbody>
            </table>
          </div>

        </div>

    </div>

  </div>

</div>

</body>
</html>
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-04-07T09:08:22.940

不管现在值多少钱：这是另一个解决方案：

*   在一个内创建两个 div`display: inline-block`
*   在第一个 div 中，放一个只有表头的表（表头表`tabhead`）
*   在第二个 div 中，放置一个带有标题和数据的表（数据表/完整表`tabfull`）
*   使用 JavaScript，用于`setTimeout(() => {/*...*/})`在渲染后/用结果填充表格后执行代码`fetch`
*   测量数据表中每个 th 的宽度（使用`clientWidth`）
*   对标题表中的对应项应用相同的宽度
*   将数据表标题的可见性设置为隐藏并将边距顶部设置为 -1 * 数据表的高度

通过一些调整，这是使用的方法（为了简洁/简单，我使用了 d3js，可以使用普通 DOM 完成相同的操作）：

```
setTimeout(() => { // pass one cycle
  d3.select('#tabfull')
    .style('margin-top', (-1 * d3.select('#tabscroll').select('thead').node().getBoundingClientRect().height) + 'px')
    .select('thead')
      .style('visibility', 'hidden');
  let widths=[]; // really rely on COMPUTED values
  d3.select('#tabfull').select('thead').selectAll('th')
    .each((n, i, nd) => widths.push(nd[i].clientWidth));
  d3.select('#tabhead').select('thead').selectAll('th')
    .each((n, i, nd) => d3.select(nd[i])
          .style('padding-right', 0)
          .style('padding-left', 0)
          .style('width', widths[i]+'px'));
}) 
```

等待渲染周期具有在整个过程中使用浏览器布局引擎的优势 - 对于任何类型的标题；它不受特殊条件或单元格内容长度以某种方式相似的约束。它还可以针对可见的滚动条进行正确调整（例如在 Windows 上）

我在这里建立了一个带有完整示例的代码笔：[https ://codepen.io/sebredhh/pen/QmJvKy](https://codepen.io/sebredhh/pen/QmJvKy)

# ruby-on-rails - 从 rails 2 升级到 3 时，网页无法使用 data-confirm 和 data-method 属性

> ID：14834200
> 
> 赞同：1
> 
> 时间：2013-02-12T13:55:47.753
> 
> 标签：ruby-on-rails, ruby-on-rails-3

源代码：

```
<td class="delete">
<%= link_to 'Destroy', 
  expense, 
  :confirm => 'Are you sure?', 
  :method => :delete, 
  :class => "btnDelete" %></td> 
```

Rails 2 生成：

```
<td class="delete">
<a href="/expenses/18051" class="btnDelete" 
onclick="
  if (confirm('Are you sure?')) { 
    var f = document.createElement('form'); 
    f.style.display = 'none'; 
    this.parentNode.appendChild(f); 
    f.method = 'POST'; 
    f.action = this.href;
    var m = document.createElement('input'); 
    m.setAttribute('type', 'hidden'); 
    m.setAttribute('name', '_method'); 
    m.setAttribute('value', 'delete'); 
    f.appendChild(m);
    var s = document.createElement('input'); 
    s.setAttribute('type', 'hidden'); 
    s.setAttribute('name', 'authenticity_token'); 
    s.setAttribute('value','MTAoIigmzVSh39na4GRcpnOQXe1yMQkOYGnzCvZI0Xk='); 
    f.appendChild(s);
    f.submit(); 
  };
  return false;
">Destroy</a></td> 
```

Rails 3 生成：

```
<td class="delete">
<a href="/expenses/17732" class="btnDelete" data-confirm="Are you sure?"     
data-method="delete" rel="nofollow">Destroy</a>
</td> 
```

该页面的运行方式与使用生成 js 在 rails 2 上的方式不同，并且该应用程序不使用 jquery（还）。我提到 jquery 是因为谷歌搜索 data-confirm 和 data-method 属性会得到命中，这意味着他们需要 jquery 才能做任何事情。

是否有一些参考文档可以处理 data-confirm 和 data-method 属性的功能要求和/或 rails 3 期望哪些可以使链接到帮助程序生成的代码按预期工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T14:35:16.733

自从我创建了一个新的 rails 3.0 应用程序以来已经有一段时间了。看看我的一个，我认为您需要包含创建应用程序时生成的 rails.js 文件，它应该会为您处理好事情。

```
<%= javascript_include_tag "rails" %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T19:16:42.027

部分答案：启用资产管道和编码

```
<%= javascript_include_tag "application" %> 
```

在视图中，rails 使用其（rail 的）jquery 库副本为页面提供服务，从而启用链接上的确认消息框。有了这种程度的理解，我希望看到的是 1）关于资产管道上 link_to 助手的 :confirm 参数之间依赖关系的文档和 2）即使资产管道被禁用也允许确认的解决方法。

# linux - 套接字编程中recv中的“资源暂时不可用”

> ID：14834204
> 
> 赞同：1
> 
> 时间：2013-02-12T13:56:02.293
> 
> 标签：linux, sockets

我想通过套接字编程读取和写入 Wanpipe 驱动程序（Sangoma 卡的网络设备驱动程序），但我收到此消息错误：“资源暂时不可用”。该卡正在工作，我看到它在 ifconfig 中发送和接收数据包。我已经包含了我的代码，如果有人在这方面帮助我，我会非常高兴。一个相关问题：我将套接字设置为阻塞模式但接收消息没有阻塞？我怎么能阻止recv？

```
int main(void)
{
   int sd;
   int buflen=WP_HEADER + MAX_PACKET;
   char buf[buflen];
   struct wan_sockaddr_ll sa;
   sd = socket(AF_WANPIPE, SOCK_RAW,0);

   if (sd < 0) /* if socket failed to initialize, exit */
   {
      perror("Error Creating Socket");
      exit(1);
   }

   printf("Socket Descriptor:%d\n",sd);
   memset(&sa,0,sizeof(struct wan_sockaddr_ll));
   strncpy((char*)sa.sll_card,"wanpipe1",sizeof(sa.sl l_card));
   strncpy((char*)sa.sll_device,"w1g1",sizeof(sa.sll_ device)); 
   sa.sll_protocol = htons(PVC_PROT);
   sa.sll_family = AF_WANPIPE;

   if(bind(sd, (struct sockaddr *)&sa, sizeof(sa)) < 0)
   {
      perror("error bind failed");
      close(sd);
      exit(1);
   }

   int data=0;
   int ret=ioctl(sd,FIONBIO,&data);

   if (ret < 0) 
   {
      perror("ioctl error!");
      close(sd);
      return 1;
   }

   fd_set read_fds;
   struct timeval timeout;
   timeout.tv_sec = 10;
   timeout.tv_usec = 0;
   FD_ZERO(&read_fds);
   FD_SET(sd,&read_fds);

   if(select(sd+1, &read_fds, NULL, NULL, &timeout) < 0)
   {
      perror("select() error!");
      exit(1);
   }

   if (FD_ISSET(sd,&read_fds))
      printf("There is data for reading\n");
   else
      printf("There is no data for reading\n");*/

   // MSG_WAITALL | MSG_PEEK | MSG_OOB
   int r=recv(sd,buf,buflen,0);

   if (r < 0) 
   {
      perror("Wanpipe raw socket reading");
      close(sd);
      exit(1);
   }

   printf("\nNumber of bytes read into the buffer: %d",r);
   printf("\nThe read buffer: ");
   puts(buf);
   close(sd);
} 
```

先感谢您。

# php - PHP PDO MySQL查询打印空白

> ID：14834205
> 
> 赞同：0
> 
> 时间：2013-02-12T13:56:03.127
> 
> 标签：php, mysql, pdo

阅读 PHP MySQL 教程并将 PHP 切换为 PDO；无论如何，我的查询是空白的。

```
$get_cat = $that->dbh->query("SELECT `cat_name`, `cat_desc` FROM `categories`");

            if(isset($get_cat))
            {
        while($row = $get_cat->fetch(PDO::FETCH_ASSOC))
            {
                printf("
                <tr>
                    <td>".$row['cat_name']." : ".$row['cat_desc']."</td>
                </tr>
                ");
            }
            }
            else
                {
                    echo '<tr><td>return is false</td></tr>';
                } 
```

$指的是：

```
include('db.php');
$that = new lib(); 
```

OLD：那么，为什么我的查询是空白的？在将骰子放入之前，它将返回布尔值并在循环中给出错误，其中骰子只是空白。类别表中包含数据，页面在提交新条目时刷新。新：致命错误：在第 36 行的 C:\wamp\www\forum\create_category.php 中的非对象上调用成员函数 fetch()

第 36 行是 while 循环行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T13:59:15.317

`mysql_fetch_array`不是 PDO。你需要类似的东西：

```
while($row = $get_cat->fetch(PDO::FETCH_ASSOC)) 
```

得到你的行。

你也不能`mysql_error()`用来得到错误。例如，您可以使用，`$that->dbh->errorInfo()`但您应该研究异常，以获得更强大的方法来捕获所有错误。

**编辑：**您应该检查错误是什么。使用`isset`是没有意义的，因为您刚刚为它分配了一个值，所以它总是会被设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T13:59:54.410

您的查询不正确-这是您要执行的操作吗？

```
SELECT `categories`.`cat_name`, `categories`.`cat_desc` FROM `categories` 
```

不看表结构就很难知道。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T14:41:36.710

你需要告诉 PDO 抛出错误。

```
$dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
$res = $that->dbh->query("SELECT cat_name, cat_desc FROM categories");
while($row = $res->fetch())
{
    echo "<tr><td>$row[cat_name] : $row[cat_desc]</td></tr>\n";
} 
```

运行您的代码，阅读错误消息并采取适当的措施

不要忘记将第一行添加到您的 db.php 文件中，以使设置永久化

# java - 如何在 SWT / Java App 中禁用 Mac OS 中的全屏按钮？

> ID：14834207
> 
> 赞同：2
> 
> 时间：2013-02-12T13:56:09.993
> 
> 标签：java, macos, swt, fullscreen

我正在开发 SWT 应用程序。它在 Windows 上运行良好，但是当我在 mac 上运行相同的代码时。我的外壳右上角有一个全屏按钮。

![在此处输入图像描述](../Images/7e113ca8082c2a416b0a6924e68f22fd.png)

单击该全屏按钮后，应用程序停止响应并且没有任何反应。我想禁用单击该全屏按钮。

```
display = Display.getDefault();
shell = new Shell(display, SWT.DIALOG_TRIM | SWT.APPLICATION_MODAL);        
setDialogShell(shell);
getDialogShell().setLayout( new FormLayout());
getDialogShell().setFullScreen(false); 
```

请帮忙。我已经浏览了这个[链接](http://www.eclipse.org/forums/index.php/m/928169/)，但不知道如何在 mac 中禁用该全屏按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T14:21:45.567

```
display = Display.getDefault();
shell = new Shell(display, SWT.DIALOG_TRIM | SWT.APPLICATION_MODAL);
//Shell shell = window.getShell();
NSWindow nswindow = shell.view.window();
nswindow.setCollectionBehavior(0);  
nswindow.setShowsResizeIndicator(false);
setDialogShell(shell);
getDialogShell().setLayout( new FormLayout());
getDialogShell().setFullScreen(false); 
```

这对我有用..

********** **编辑** ***** ** *** ** *** ** *** ** *** ******

 **上面的代码没有在 Windows 中运行，因为没有识别出“NSWindow”类。要为 window 和 mac 使用通用代码，请使用以下代码。

```
public static boolean isWindows() {

      return (System.getProperty("os.name").toLowerCase().indexOf("win") >= 0);

     } 
```

/// 检查操作系统是否为Window，然后修改代码如下

```
display = Display.getDefault();
        shell = new Shell(display, SWT.DIALOG_TRIM | SWT.APPLICATION_MODAL);
         //Shell shell = window.getShell();

        if(!isWindows()){
            Field field = Control.class.getDeclaredField("view");
            Object /*NSView*/ view = field.get(shell);
            if (view != null)
            {
                Class<?> c = Class.forName("org.eclipse.swt.internal.cocoa.NSView");
                Object /*NSWindow*/ window = c.getDeclaredMethod("window").invoke(view);

                c = Class.forName("org.eclipse.swt.internal.cocoa.NSWindow");
                Method setCollectionBehavior = c.getDeclaredMethod(
                        "setCollectionBehavior", /*JVM.is64bit() ?*/ long.class /*: int.class*/);
                setCollectionBehavior.invoke(window,0);
            }
            //          NSWindow nswindow = shell.view.window();
            //          nswindow.setCollectionBehavior(0) ; 
            //          nswindow.setShowsResizeIndicator(false);
        }
        setDialogShell(shell);
        getDialogShell().setLayout( new FormLayout());
        getDialogShell().setFullScreen(false);

        getDialogShell().layout();
        getDialogShell().pack(); 
```**

# c - 如何简单地生成与所有 base64 编码兼容的随机 base64 字符串

> ID：14834209
> 
> 赞同：2
> 
> 时间：2013-02-12T13:56:17.017
> 
> 标签：c, random, base64

在 C 语言中，我被要求编写一个函数来生成长度为 40 个字符（30 个字节？）的随机 Base64 字符串。但是我不知道Base64的味道，所以它需要兼容很多版本的Base64。

我能做些什么 ？什么是最好的选择？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T14:25:56.743

所有 Base64 编码在某些方面都一致，例如使用 [0-9A-Za-z]，即 62 个字符。所以你不会得到完整的 64^40 个可能的组合，但你可以得到 62^40，这仍然是很多！您可以为每个数字生成一个随机数，mod 62。或者更仔细地对其进行切片以减少系统所需的熵量。例如，给定一个 32 位随机数，一次取 6 位 (0..63)，如果这些位是 62 或 63，则丢弃它们，否则将它们映射到一个 Base64 位。这样，您只需要大约 8 个 32 位整数即可生成 40 个字符的字符串。

如果这个系统有安全方面的考虑，你需要考虑生成“不寻常”的 Base64 数字的后果（例如，攻击者可以检测到你的 Base64 数字的特殊之处在于只有 62 个符号和一个小的语料库——这有关系吗？）。

# sql - 为什么这些 NVL() 语句在 SQL 中是错误的？

> ID：14834211
> 
> 赞同：2
> 
> 时间：2013-02-12T13:56:23.377
> 
> 标签：sql, oracle

```
SELECT inv_no,NVL2(inv_amt,inv_date,'Not Available')
FROM invoice;

SELECT inv_no,NVL2(inv_amt,inv_amt*.25,'Not Available') FROM invoice; 
```

得到

```
ORA-01858: a non-numeric character was found where a numeric was expected
ORA-01722: invalid number 
```

请分别建议我可以在 expr1 和 expr2 中给出哪些数据类型。

另外请告诉我这是怎么回事？

```
SELECT inv_no,NVL2(inv_date,sysdate-inv_date,sysdate)
FROM invoice 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T14:04:42.080

第二个和第三个参数`NVL2`应该是相同的数据类型。所以，假设`inv_date`是一个日期，你需要`varchar2`像这样；

```
SELECT inv_no, NVL2(inv_amt, to_char(inv_date, 'dd-mon-yyyy hh24:mi:ss'), 'Not Available') FROM ... 
```

或您想要的任何格式字符串。否则 Oracle 将转换第三个参数`'Not Available'`以匹配第二个参数的数据类型。这将尝试转换`'Not Available'`为日期并崩溃。

同样在第二个示例中，您必须通过 将 转换`inv_amt*.25`为 char `to_char`，例如`to_char(inv_amt*.25)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T09:56:37.983

您的前 2 个示例尝试为同一字段提供日期/数字和文本结果。当 Oracle 尝试将此文本转换为任一类型时，这将导致错误。您需要使用`to_char(field)`日期/数字字段上的函数将它们转换为文本。

最后，日期实际上是添加到数据库基准日期的数字。例如，日期是一个基日数，它的小数是一天的比率，例如 0.5 是 12 小时，并且数据库有一个基日，例如`01-Jan-1900`或`01-Jan-2000`。这就是为什么当你这样做时`date - date`结果是一个数字，而日期也可以表示为一个数字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-22T06:28:44.350

参考：[https ://docs.oracle.com/cd/B19306_01/server.102/b14200/functions106.htm](https://docs.oracle.com/cd/B19306_01/server.102/b14200/functions106.htm)

第二个参数应该是字符或数字。第二个参数给出了第三个参数将被隐式转换的数据类型。所以：

**1\. 第一个**
`SELECT inv_no,NVL2(inv_amt,inv_date,'Not Available') FROM invoice;`
不正确，因为您不能将 DATE 作为第二个参数。

一样的方法：

```
SELECT NVL2(NULLIF(1, 1), SYSDATE, 'A') FROM DUAL; -- FAILS;
SELECT NVL2(NULLIF(1, 0), SYSDATE, 'A') FROM DUAL; -- FAILS;
SELECT NVL2(NULLIF(1, 1), 'A', SYSDATE) FROM DUAL; -- PASS; returns SYSDATE (as char datatype)
SELECT NVL2(NULLIF(1, 0), 'A', SYSDATE) FROM DUAL; -- PASS; returns 'A'; 
```

**2\. 第二个也是无效的：**
`SELECT inv_no,NVL2(inv_amt,inv_amt*.25,'Not Available') FROM invoice;`
Oracle 尝试将第三个参数隐式转换为第二个参数的数据类型，这意味着它尝试将“不可用”转换为数值。

当您交换第二个和第三个参数时，它将起作用：

```
SELECT inv_no,NVL2(inv_amt,'Not Available',inv_amt*.25) FROM invoice; 
```

inv_amt*.25 将隐式转换为字符数据；这个例子是无用的，因为它会让你 NULL*.25 使它成为 NULL。

但是，您可以做的是，您可以通过将数字结果转换为字符来将两个参数都设为字符：

```
SELECT inv_no,NVL2(inv_amt,TO_CHAR(inv_amt*.25), 'Not Available') FROM invoice; 
```

尤其是当您想显示货币时，这会很有意义。

**3.第三个比较复杂**

我能解释的唯一方法是在处理第三个参数之前将第二个参数转换为字符。这样第三个也将转换为字符。考虑到这两种情况，这是有道理的：

```
SELECT NVL2(2, SYSDATE - TO_DATE('10-JAN-83'), SYSDATE) from dual; -- PASSES
SELECT NVL2(2, 2.2, SYSDATE) from dual; -- FAILS. 
```

最后：我建议坚持 Oracle 的文档并使用显式转换。

# binary-tree - 如何在节点附近打印描述字符串？

> ID：14834215
> 
> 赞同：1
> 
> 时间：2013-02-12T13:56:32.447
> 
> 标签：binary-tree, graphviz, dot

我最近开始使用 DOT 语言来描述二叉树的结构。下面的示例允许在每个节点内绘制具有数字作为标签的二叉树。

```
graph tree {
    0 [shape=ellipse]
    1 [shape=ellipse]
    2 [shape=ellipse]
    3 [shape=ellipse]
    4 [shape=ellipse]
    0 -- 1
    0 -- 2
    2 -- 3
    2 -- 4
} 
```

现在，我想在每个节点附近打印一些附加信息，但不在包含节点标签的椭圆内。换句话说，如何在节点附近打印描述字符串？我应该如何修改上面的代码来实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T15:00:54.697

这个脚本，加上添加的行，

```
graph tree {
    0 [shape=ellipse]
    1 [shape=ellipse]
    2 [shape=ellipse]
    3 [shape=ellipse]
    4 [shape=ellipse]
    0 -- 1
    0 -- 2
    2 -- 3
    2 -- 4

node [shape=none]
edge [style="invis"]
rank="same"
subgraph { 0 -- "desc of 0" }
subgraph { 1 -- "desc of 1" }
subgraph { 2 -- "desc of 2" }
subgraph { 3 -- "desc of 3" }
subgraph { 4 -- "desc of 4" }
} 
```

为您的描述生成一个合理的图像

![在此处输入图像描述](../Images/71740d0d000f741ce5b13d63a5d9c222.png)

# android - 更改返回按钮行为 - Android

> ID：14834217
> 
> 赞同：1
> 
> 时间：2013-02-12T13:56:40.157
> 
> 标签：android, android-activity, back

我有一个应用程序。流程是 -
**启动屏幕 ---> 主屏幕 ---> 项目列表屏幕 ---> 项目详细信息屏幕**

在我的应用程序中，我在**项目列表屏幕**和**项目详细信息屏幕上有****主页**按钮功能。

 ****当我在**项目详细信息屏幕上按下****主页按钮**时，它会返回**主屏幕**。这是预期的行为。但是当我按下**主屏幕上**的**返回按钮**时，它会带我回到**项目详细信息屏幕**。（*这是我不想要的*）

 *******我尝试使用**finish()杀死****项目详细信息屏幕**，但是活动堆栈中的最后一个活动是项目列表屏幕。主屏幕上的后退按钮现在将我带到项目列表屏幕。当用户在主屏幕上时，有什么方法可以清除活动堆栈。在这方面的任何帮助将不胜感激。

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T14:04:51.640

您应该使用其他意图标志启动*主屏幕活动：*

```
// create intent
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
intent.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);
startActivity(intent); 
```

这会将活动堆栈清除到主屏幕活动。此活动将仅呈现，而不是重新创建。此外，这可以保证只有一个主屏幕活动可能是您想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T14:02:52.273

Use the Intent [flag](https://developer.android.com/reference/android/content/Intent.html#addFlags%28int%29) [`FLAG_ACTIVITY_CLEAR_TOP`](https://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_CLEAR_TOP) to clear the stack:

```
Intent intent = new Intent(this, HomeActivity.class);
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(intent); 
```

You should call this code when the 'Home button' is pressed.*************

# ruby-on-rails-3.2 - Capistrano 删除资产

> ID：14834218
> 
> 赞同：7
> 
> 时间：2013-02-12T13:56:40.147
> 
> 标签：ruby-on-rails-3.2, capistrano

每次我做上限：部署 Capistrano 都会删除我的资产，说它们是不需要的。事实上，它们是必需的，为了让它们回来，我必须在每次执行 cap:deploy 后执行 cap:assets:precompile，否则我的站点没有样式或图像。

这是不是：normalize_asset_timestamps 在部署期间不起作用：finalize_update？

Capistrano v2.14.1，Rails v3.2.11

```
** Removing assets that haven't been deployed for 10080 minutes...
* executing ...
** [out :: server.com] comm:
** [out :: server.com] file 2 is not in sorted order
** [out :: server.com] Removing unneeded asset: application-66c9f07224da686e6b5a64752995df38.css
** [out :: server.com] Removing unneeded asset: application-66c9f07224da686e6b5a64752995df38.css.gz
** [out :: server.com] Removing unneeded asset: application-7b53d1e1411ed0a62ea32ace5ee4e7c2.js
** [out :: server.com] Removing unneeded asset: application-7b53d1e1411ed0a62ea32ace5ee4e7c2.js.gz
** [out :: server.com] Removing unneeded asset: application.css
** [out :: server.com] Removing unneeded asset: application.css.gz
** [out :: server.com] Removing unneeded asset: application.js
** [out :: server.com] Removing unneeded asset: application.js.gz 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T11:19:31.530

这是解决方案：[https ://github.com/capistrano/capistrano/pull/422](https://github.com/capistrano/capistrano/pull/422)

要么添加

```
after "deploy", "assets:precompile" 
```

在 deploy.rb 结束时，等待 capistrano gem 更新

或将 2 行添加到您的 capistrano gem 中

或者你可以直接从 github 更新 capistrano

```
gem 'capistrano', git: 'https://github.com/capistrano/capistrano.git' 
```

我不推荐

# c++ - 使用 C++ 和 FFmpeg 流式传输到 Flash Media Server

> ID：14834220
> 
> 赞同：0
> 
> 时间：2013-02-12T13:56:41.997
> 
> 标签：c++, ffmpeg, flash-media-server

我正在用 C++ 构建一个应用程序，它应该使用 FFmpeg 将实时流发送到 Flash Media Server。对于初学者，我希望能够发送一个 .mp4 文件。使用 FFmpeg .exe 我可以这样做：

```
ffmpeg -re -i TEST.mp4 -vcodec libx264 -f flv rtmp://[host]/[application]/[stream] 
```

你将如何在代码中实现类似的东西？我只能弄清楚如何读取数据，而不是写入数据。我找到了打开输入的功能，但没有关于如何连接到 FMS 的信息。我能找到的所有写函数似乎都是如何写入文件。请指教。

# ruby - 将所有 xpath 结果收集到 ruby 中的数组中

> ID：14834222
> 
> 赞同：2
> 
> 时间：2013-02-12T13:56:46.820
> 
> 标签：ruby, tags, automation, watir

我有一个代码非常糟糕的 JSP，我正在尝试在其上运行自动化。有一系列名称（无 ID）为“delete[x]”的复选框，其中 X 是所填充项目的项目编号。我正在尝试选择所有复选框，以便删除每个条目。这是我所拥有的

```
check_boxes = []
check_boxes.push(@browser.checkbox(:xpath, "//input[contains(@name,'delete')]"))
puts check_boxes.size

check_boxes.each do |check_box|
check_box.set 
```

这样做的问题是它只选择与 xpath 匹配的第一个实例（节点）转储到数组中。我知道我可以遍历 xpath 向节点添加索引，然后在索引超出范围时将我排除在外，但这似乎是一种肮脏的方式。

我知道有一个“as”标签可以获取一组锚点，我想知道是否有类似的方法来获取整个复选框的选择

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T14:08:34.147

我认为问题不在于 xpath 本身。这`@browser.checkbox`是导致仅返回第一个复选框的原因。

如果你想要所有匹配的复选框，你应该使用（注意复数）：

```
@browser.checkboxes 
```

请注意，它`checkboxes`返回一组复选框。除非您正在做一些非常花哨的事情，否则您通常不需要将其转换为数组。

你可以简单地做：

```
@browser.checkboxes(:name => /delete/).each do |checkbox|
  checkbox.set
end 
```

# java - 意外类型所需变量找到值

> ID：14834224
> 
> 赞同：0
> 
> 时间：2013-02-12T13:56:46.503
> 
> 标签：java, arraylist

```
public class example
{
    public ArrayList<Integer> ToFill = new ArrayList<>();

    public void Alter(int Value , int Position)
    { 
      ToFill.get(Position) = Value ;  // this line has an error 
    }
} 
```

由于某种原因，这段代码给出了编译错误，有人能解释为什么吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-12T13:57:56.693

`ToFill.get(Position)`返回一个值，其中赋值的左侧必须是一个变量。相反，请[`set(index, element)`](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html#set%28int,%20E%29)按如下方式使用：

```
ToFill.set(Position, Value); 
```

但是，您所做的只有在使用数组时才有效，例如：

```
Integer[] array = ...
array[Position] = Value; 
```

* * *

作为旁注，请始终使用 Java 命名约定：

*   `toFill`代替`ToFill`
*   `alter`代替`Alter`
*   `position`而不是`Position`.
*   `value`而不是`Value`.

# javascript - AngularJS 在控制器中注入模块

> ID：14834226
> 
> 赞同：2
> 
> 时间：2013-02-12T13:56:51.143
> 
> 标签：javascript, angularjs, angularjs-directive

我正在尝试编写一个可重用的组件，它将在我的所有页面中以一致的方式处理错误。问题是尽管组件可以工作，但我无法将其注入我的控制器中。这是一些代码：

应用程序.js

```
'use strict';

// Declare app level module which depends on filters, and services
angular.module('Popdown', ['Popdown.directives']);

angular.module('Page', ['Popdown']); 
```

指令.js

```
'use strict';

/* Directives */

angular.module('Popdown.directives', []).
  directive('popdown', function() {
    return {
        scope: {},
        templateUrl: 'partials/popdown.html',
        replace: true,
        compile: function(cElement, attrs) {
            cElement.css('position','absolute');
            var h = cElement.height();
            cElement.css('background-color','black');
            cElement.css('height', '50px');
            cElement.css('margin', '0 auto');
            cElement.css('top', parseInt(-h) + 'px');
        },
        link: function(scope, lElement, attrs) {
            scope.$watch('message', function() {
                lElement.animate({
                    'top': '0px'
                }, {
                    duration: 400,
                    easing: 'swing'
                })
            });
        }
    }
  }); 
```

控制器.js

```
'use strict';

/* Controllers */

var PopdownCtl = function($scope) {
    $scope.notify = function(message) {
        $scope.icon = 'icon-notify';
        $scope.message = message;
    }
}

var IndexCtl = function($scope, Popdown) {
    $scope.error = 'No error yet';

    var msg = Math.random();
    Popdown.notify(msg);

    $scope.throwError = function() {

    }
}

IndexCtl.$inject = ['Popdown']; 
```

索引.html

```
<!doctype html>
<html lang="en" ng-app>
<head>
  <meta charset="utf-8">
  <title>My AngularJS App</title>
  <link rel="stylesheet" href="css/app.css"/>
</head>
<body>
  <ul class="menu">
    <li><a href="#/view1">view1</a></li>
    <li><a href="#/view2">view2</a></li>
  </ul>

  <div ng-view></div>

  <div ng-controller="IndexCtl"></div>

  <div popdown></div>

  <!-- In production use:
  <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.0.4/angular.min.js"></script>
  -->
  <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
  <script src="lib/angular/angular.js"></script>
  <script src="js/app.js"></script>
  <script src="js/services.js"></script>
  <script src="js/controllers.js"></script>
  <script src="js/filters.js"></script>
  <script src="js/directives.js"></script>
</body>
</html> 
```

我不断收到以下错误：

```
Error: Unknown provider: PopdownProvider <- Popdown
    at Error (<anonymous>)
    at http://localhost:8000/app/lib/angular/angular.js:2652:15
    at Object.getService [as get] (http://localhost:8000/app/lib/angular/angular.js:2780:39)
    at http://localhost:8000/app/lib/angular/angular.js:2657:45
    at getService (http://localhost:8000/app/lib/angular/angular.js:2780:39)
    at invoke (http://localhost:8000/app/lib/angular/angular.js:2798:13)
    at Object.instantiate (http://localhost:8000/app/lib/angular/angular.js:2830:23)
    at http://localhost:8000/app/lib/angular/angular.js:4657:24
    at http://localhost:8000/app/lib/angular/angular.js:4236:17
    at forEach (http://localhost:8000/app/lib/angular/angular.js:117:20) 
```

我是 AngularJS 的新手，我觉得它很酷，但似乎我还是个菜鸟……有人能帮我理解这里发生了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T14:10:06.787

您在`ng-app`指令中缺少模块规范。它应该指定一个模块名称作为它的属性值。

由于您计划拥有多个可重用模块，因此您可能希望声明一个依赖于其他模块的顶级应用程序模块，例如：

```
angular.module('app', ['Popdown', 'Page']); 
```

然后在您的 HTML 中：

```
<html lang="en" ng-app="app"> 
```

我建议通过此文档：[http](http://docs.angularjs.org/guide/module) ://docs.angularjs.org/guide/module和这个 SO 问题：[https ://stackoverflow.com/a/12339707/1418796](https://stackoverflow.com/a/12339707/1418796)

# junit - 无法从命令提示符运行 junit 测试

> ID：14834228
> 
> 赞同：0
> 
> 时间：2013-02-12T13:56:55.307
> 
> 标签：junit, webdriver, selenium-webdriver, junit4, junit3

我正在尝试从命令行运行 JUnit 测试用例
我遵循的代码设置为 bin dir

```
c:/eclipse/workspace/sample/bin> java -cp C:\Ram Doc\eclipse\plugins\org.junit_4.8.2.v4_8_2_v20110321-1705.junit.jar C:\Ram Doc\eclipse\workspace\Script_Bvt\bin org.junit.runner.JUnitCore login_sanity(That's my class Name) 
```

错误信息是

```
C:\Ram Doc\eclipse\workspace\Script_Bvt\bin>java -cp C:\Ram Doc\eclipse\plugins\
org.junit_4.8.2.v4_8_2_v20110321-1705.junit.jar java org.junit.runner.JUnitCore
login_sanity
Exception in thread "main" java.lang.NoClassDefFoundError: Doc\eclipse\plugins\o
rg/junit_4/8/2/v4_8_2_v20110321-1705/junit/jar
Caused by: java.lang.ClassNotFoundException: Doc\eclipse\plugins\org.junit_4.8.2
.v4_8_2_v20110321-1705.junit.jar
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
Could not find the main class: Doc\eclipse\plugins\org.junit_4.8.2.v4_8_2_v20110
321-1705.junit.jar.  Program will exit. 
```

如果我将其保留`login_sanity`在其他位置并执行：

```
C:\Selenium>javac -cp "C:\Selenium\junit4.10\junit4.10\junit-4.10.jar;." org.junit.runner.JUnitCore login_sanity 
```

我收到以下错误：

```
Class names, 'org.junit.runner.JUnitCore,login_sanity', are only accepted if 
annotation processing is explicitly requested 
```

以下显示了我的完整步骤： ![在此处输入图像描述](../Images/6f80c9dfb77a1726135762ecb6c36fc8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:45:36.840

通常，通过命令行运行 Java 类是这样完成的（在 Windows 上，您似乎正在使用它）：

```
java -cp "jar1;jar2;dir\*" my.app.package.MainClass my_arguments
```

据我所知，您正在尝试`login_sanity`通过`JUnitCore`. 换句话说，您正在`JUnitCore`以测试类作为参数执行该类；并且您需要该`junit.jar`库才能运行该`JUnitCore`课程。

为了运行此命令，您需要：

1.  将`junit.jar`库放在您的类路径中，并且；
2.  指定要执行的主类`JUnitCore`，以及要传递给主类的参数，即`login_sanity`

所以它是这样的：

```
java -cp "C:\path\to\junit.jar;C:\path\to\bin\*" org.junit.runner.JUnitCore login_sanity
```

上面的命令假定你的类`login_sanity`在默认包中，即没有包，并且在`bin`目录中。

如果你的类*不在***默认包**中，即你在你的类中声明了一个包，`login_sanity`那么你需要在命令行中使用它的完全限定名。这是一个例子——

假设您的课程在以下包中：`my.app.login`. 换句话说，您的 java 类的前几行是：

```
package my.app.services;

public class login_sanity {
  /* your tests go here */
} 
```

在这种情况下，您将`JUnitCore`像这样执行：

```
java -cp "C:\path\to\junit.jar;C:\path\to\bin\*" org.junit.runner.JUnitCore my.app.services.login_sanity
```

顺便说一句，典型的 Java 约定是以驼峰式命名您的类，即`LoginSanity`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-01T19:26:12.557

„将 junit jar 添加到类路径
中„„将测试的类添加到类路径中„„
运行 junit.textui.TestRunner测试类

java -classpath .;c:\path\name.jar;c:\path\to\bin org.junit.runner.JUnitCore nameofclass

# php - 如何在mysql中存储多行和多列数组

> ID：14834239
> 
> 赞同：0
> 
> 时间：2013-02-12T13:57:28.127
> 
> 标签：php, mysql, multidimensional-array

我有一系列复选框。

```
<input type="checkbox" name="selection[]"  value="move" /> 
<input type="checkbox" name="selection[]"  value="move2" /> 
<input type="checkbox" name="selection[]"  value="move3" /> 
<input type="checkbox" name="selection[]"  value="move4" /> 
```

根据所选复选框的数量，生成具有相应行数的表。

```
for($x=0; $x<$N; $x++)
{
    echo nl2br("<td><textarea name=art[] rows=10 cols=30></textarea>   </td><td><textarea name=science[] rows=10 cols=30></textarea></td></textarea></td><td><textarea name=method[] rows=10 cols=30></textarea></td><td><textarea name=criteria[] rows=10 cols=30></textarea></td></tr>"); 
} 
```

我不知道每次将生成多少具有相应列的表行。那么如何编写代码来插入每组行数组是一个问题。我试过了

```
$optionsVal = implode(",", $data); 
```

但这仅适用于存储选定的选项，而不适用于生成的表行和列。请任何人都可以帮助解决这个问题。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:13:56.763

好的，所以我想我理解得更好一些，但也许你应该用其他方式传达你的问题。

基本上我的理解是，您接受不确定的（在您拥有的复选框数量的范围内）数量的复选框，这些复选框又会为每个选定的复选框生成一行。

如果要将这些生成的行存储在 mySQL 中，则需要将数据发布回数据库

```
$result = mysqli_query($query, $conn);
$row = mysqli_fetch_array($result); 
```

您需要设置与此类似的 $result，并将您的复选框值存储在其中。在此示例中，如果最终用户点击保存按钮，它将复选框中的值插入到变量中

```
if(isset($_POST["savebtn"]))
{
    //inserting the new information
    $id = $_POST[""];
    $name = $_POST[""]; 

    //iterate through each checkbox selected

foreach($_POST["checkbox"] as $loc_id)
{
  $query = "INSERT INTO table(ID, Loc_Code) VALUES('$id', '$loc_id')";
  $result = mysqli_query($query, $conn);
}

?> 
```

这只是从另一个示例中获取的，但是您离内爆还很远，您需要先将 php 选择的结果保存到变量中，然后通过循环选择在 mySQL 中为它们分配行

更新：

好的，所以你把它们放在一个数组中，seelction[] - 这很好，现在你想检查是否选择了某个值......

```
if (in_array("move2", $_POST['selection'])) { /* move2 was selected */} 
```

然后你想把它放到一个字符串中——你对 implode 方法是正确的

```
echo implode("\n", $_POST['selection']); 
```

然后用 foreach 循环回显它

```
foreach ($_POST['selection'] as $selection) {
     echo "You selected: $selection <br>";
 } 
```

# java - 使用 Java 将逗号对齐的双精度打印到打印机设备

> ID：14834248
> 
> 赞同：3
> 
> 时间：2013-02-12T13:57:58.623
> 
> 标签：java, printing, alignment

对于一个项目，我需要在打印机上打印一些数字。它们需要打印在彼此下方，并以逗号对齐。字体不是也不能是等宽字体。我正在使用 DecimalFormat("0.000") 将所有数字转换为以 3 位小数结尾的字符串。

将逗号上的数字对齐在彼此下方的正确方法是什么？我正在使用 Java 的 Printable 接口，如此处所述[http://docs.oracle.com/javase/tutorial/2d/printing/index.html](http://docs.oracle.com/javase/tutorial/2d/printing/index.html)。

谢谢

**编辑：我不是想打印到控制台，而是打印到打印机（真正的纸张出来的实际硬件）**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:27:44.177

使用等宽字体肯定会更好看。

我假设逗号是小数点。这就是我要做的。

*   使用 drawString 生成逗号图像。

*   将数字分成两部分，小数点前的数字和小数点后的数字。

*   使用drawString生成小数点前的数字图像和小数点后的数字。

*   将所有数字转换为图像后，查看小数点后的数字，看看哪一个的宽度最长。

*   您现在有了小数点后最长数字的宽度像素数和逗号。

*   再次浏览数字图像，按以下顺序在打印机画布上绘制图像。

    *   小数点后的数字
    *   逗号
    *   小数点前的数字

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T14:10:29.237

只需将它们转换为对齐的字符串，然后打印这些字符串：

```
public static String align (String str)
{
    int n = str.indexOf('.');

    StringBuilder sb = new StringBuilder ();
    for (int i = n; i < 3; i++)
        sb.append ((char)0x2007); // Append FIGURE-SPACE character
    sb.append (str);
    return sb.toString ();
}

public static void main(String[] args) {
    Random r = new Random ();
    DecimalFormat format = new DecimalFormat("0.000");

    for (int i = 0; i < 10; i++)
    {
        String str = format.format(Math.pow (r.nextDouble(), 3.0) * 150.0); 
        System.out.println(align (str));
    }
} 
```

# python - 为 paramiko 会话设置会话变量

> ID：14834251
> 
> 赞同：8
> 
> 时间：2013-02-12T13:58:09.440
> 
> 标签：python, ubuntu, ssh, paramiko

有谁知道在使用 SSHClient 时如何为 exec_command 调用注册环境变量？

我正在使用实例化 SSHClient 类的基本脚本，使用 connect 方法连接到另一台计算机，然后使用 exec_command 方法发送命令。但是，当我尝试发出命令时，似乎没有注册任何环境变量。我可以做一些基本的事情，比如“ls”并查看标准输出，但是在尝试运行已安装的程序时，缺少环境变量的事实使得无法运行它们。在命令行中使用 ssh 来做同样的事情，因为设置了用户的环境变量。

```
#!/usr/bin/python
import paramiko

ssh.connect('mymachine',username='myname',password='pass')    
stdin,stdout,stderr=ssh.exec_command('cd /myfolder/path')
stdin,stdout,stderr=ssh.exec_command('ls')

....

....

ssh.close() 
```

注意：我无法更改 paramiko 中的目录。`cd`我将后续命令中的命令附加到单个`ssh.exec_command('cd /dddd/ddd;ls')`. 我已经`ls`举了一个例子，但我的实际后续命令是不同的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2017-04-18T14:29:10.413

从 2.1.0 2016-12-09 版本开始，您可以将环境变量字典添加到**exec_command**：

```
import paramiko
paramiko.util.log_to_file("paramiko.log")
ssh = paramiko.SSHClient()
k =   paramiko.RSAKey.from_private_key_file("<private_key_file>")
ssh.connect(<hostname>,username=<username>,pkey=k)
env_dict={"LC_TELEPHONE":"ET_HOME","LC_MEASUREMENT":"MILES_APART"}
stdin , stdout, stderr = ssh.exec_command('echo $LC_TELEPHONE; echo "..."; echo $LC_MEASUREMENT',environment=env_dict)
print stdout.read() 
```

输出：

```
ET_HOME
...
MILES_APART 
```

但为什么我选择了 LC_TELEPHONE 和 LC_MEASUREMENT？因为这是目标主机的 ssh 配置允许我设置的少数环境中的两个：

```
grep AcceptEnv /etc/ssh/sshd_config 
```

输出：

```
AcceptEnv LANG LC_CTYPE LC_NUMERIC LC_TIME LC_COLLATE LC_MONETARY LC_MESSAGES
AcceptEnv LC_PAPER LC_NAME LC_ADDRESS LC_TELEPHONE LC_MEASUREMENT
AcceptEnv LC_IDENTIFICATION LC_ALL 
```

换句话说，这不起作用：

```
env_dict={"HELLO":"WORLD","GOODBYE":"CRUEL_WORLD"}
stdin , stdout, stderr = ssh.exec_command("echo $HELLO; echo '...'; echo $GOODBYE")
print stdout.read() 
```

输出：

```
... 
```

正如文档警告的那样，环境变量被默默拒绝 [http://docs.paramiko.org/en/2.1/api/client.html](http://docs.paramiko.org/en/2.1/api/client.html) [http://docs.paramiko.org/en/2.1/api/channel.html# paramiko.channel.Channel.set_environment_variable](http://docs.paramiko.org/en/2.1/api/channel.html#paramiko.channel.Channel.set_environment_variable)

如果您无法控制目标服务器的 sshd 配置，请将环境变量放入文件并获取它的工作原理：

```
stdin , stdout, stderr = ssh.exec_command("cat .set_env;source .set_env; echo $HELLO; echo '...'; echo $GOODBYE")
print stdout.read() 
```

输出：

```
# begin .set_env
HELLO="WORLD"
GOODBYE="CRUEL_WORLD"
# end .set_env
WORLD
...
CRUEL_WORLD 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-04T07:24:57.587

```
#!/usr/bin/python
import paramiko

client = paramiko.SSHClient()
client.load_system_host_keys()
client.set_missing_host_key_policy(paramiko.WarningPolicy)
client.connect(myhostname, theport, myuser, thepass)
stdin,stdout,stderr = client.exec_command('cd /tmp;pwd;ls -al')
#returns your output
print stdout.read() 
```

这一切对我来说都很好。如果您有特殊的环境变量，您可能必须在远程命令提示符下设置它们。如果您将变量写入 myENV 文件然后调用可能会有所帮助

`stdin,stdout,stderr = client.exec_command('source ./myEnv')`

你有没有尝试过这样的事情？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-10T01:55:05.837

你可以这样做：`client.exec_command(..., get_pty=True)`。

这将使 paramiko 分配一个伪终端，类似于`ssh`.

# php - 如何在变量中包含来自不同文件的返回值

> ID：14834254
> 
> 赞同：0
> 
> 时间：2013-02-12T13:58:14.187
> 
> 标签：php, javascript

我可以从变量中的嵌入式 php 返回一个值（如下所示），但在这种情况下，我想获得一个 php 文件的输出，例如 result.php。

```
var jsVar = "<?php echo 'thisisfromphp' ?>"; 
```

所以运行“result.php”会产生一个返回的结果。我怎么能从 result.php 中获取这个结果并将其用作变量 - 我在想这样的事情：

```
var jsVar = "<?php echo result.php ?>"; 
```

PS 我会将 result.php 中的 php 代码嵌入到变量中（如上），但这一切都变得混乱了..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T14:01:00.690

你应该做的是重构你的代码。不要`result.php`回显您尝试捕获的内容。那不是可重用的代码。将它所做的任何事情抽象成一个可以重用的函数，然后您就可以`require "result.php"`稍后`callYourFunction()`获得所需的输出。

但是，如果您坚持这样做（我再次建议不要这样做），您可以：

```
ob_start();
require_once 'result.php';
$contents = ob_get_contents();
ob_end_clean();

// later...
var jsVar = <?php echo json_encode($contents); ?> 
```

# php - 自动向服务器提交值

> ID：14834258
> 
> 赞同：-1
> 
> 时间：2013-02-12T13:58:29.693
> 
> 标签：php, html, forms, submit

我计划为 Chrome 的 webmail 应用程序构建一个自动检查器扩展；我以前做过的事情，但现在我遇到了问题。

在登录站点，我有以下登录表单：

```
<form name="form" action="./" method="post">
<input type="hidden" name="_token" value="8efe33...">
<input type="hidden" name="_task" value="login"><input type="hidden" name="_action" value="login"><input type="hidden" name="_timezone" id="rcmlogintz" value="_default_"><input type="hidden" name="_dstactive" id="rcmlogindst" value="_default_"><input type="hidden" name="_url" id="rcmloginurl" value=""><table summary="" border="0"><tbody><tr><td class="title"><label for="rcmloginuser">Username</label>
</td>
<td class="input"><input name="_user" id="rcmloginuser" autocapitalize="off" autocomplete="off" type="text"></td>
</tr>
<tr><td class="title"><label for="rcmloginpwd">Password</label>
</td>
<td class="input"><input name="_pass" id="rcmloginpwd" autocapitalize="off" autocomplete="off" type="password"></td>
</tr>
</tbody>
</table>

<p style="text-align:center;"><input type="submit" class="button mainaction" value="Login" /></p>

</form> 
```

如您所见，它具有相应的用户名和密码字段'_user'和'_pass'，并且提交按钮执行POST类型的'./'操作。

./ 表示当前文件，在这种特定情况下为 index.php。

据我了解，这意味着调用：

```
email_server.com/index.php?_user=some_username&_pass=some_password 
```

将提交这些值（就像填写登录凭据并点击“登录”按钮一样）。相反，它只是简单地填写了_user值，_pass仍然是空的，更不用说它根本不尝试登录的事实。

我过去做过这件事，而且效果很好。在这种情况下我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T14:08:34.423

在发送数据之前，您必须知道该表单将其数据发送到何处，因为您必须模拟一个表单。cURL 能够通过许多不同的选项设置向服务器发送 POST 和 GET 数据。查看[http://php.net/manual/en/function.curl-setopt.php](http://php.net/manual/en/function.curl-setopt.php)了解所有设置。以 CURLOPT_POST... 开头的任何内容都是不错的选择。

# c# - WPF 密钥是数字或数字

> ID：14834260
> 
> 赞同：16
> 
> 时间：2013-02-12T13:58:40.640
> 
> 标签：c#, wpf, key, keydown

我的窗口中有`previewKeyDown`方法，我想知道按下的键只是`A-Z`字母或`1-0`数字（没有任何 F1..12、enter、ctrl、alt 等 - 只是字母或数字）。

我试过`Char.IsLetter`了，但我需要给字符，所以`e.key.ToString()[0]`不起作用，因为它几乎每次都是一封信。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-12T14:05:31.377

这样的事情会做：

```
if ((e.Key >= Key.A && e.Key <= Key.Z) || (e.Key >= Key.D0 && e.Key <= Key.D9) || (e.Key >= Key.NumPad0 && e.Key <= Key.NumPad9)) 
```

当然，您还必须检查是否根据您的要求按下了诸如 CTRL 之类的修饰键。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-12T14:07:26.173

`e.Key` is giving you a member of the `enum` `System.Windows.Input.Key`

You should be able to do the following to determine whether it is a letter or a number:

```
var isNumber = e.Key >= Key.D0 && e.Key <= Key.D9;
var isLetter = e.Key >= Key.A && e.Key <= Key.Z; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-12T14:23:40.793

[在您的特定情况下， Jon](https://stackoverflow.com/a/14834382/302677)和[Jeffery](https://stackoverflow.com/a/14834418/302677)提供的答案可能是最好的，但是如果您需要测试您的字符串是否有其他字母/数字逻辑，那么您可以使用[KeyConverter](http://msdn.microsoft.com/en-us/library/system.windows.input.keyconverter.aspx)类将 a 转换`System.Windows.Input.Key`为字符串

```
var strKey = new KeyConverter().ConvertToString(e.Key); 
```

您仍然需要检查是否有任何修饰键被按住（Shift、Ctrl 和 Alt），还应注意这仅适用于字母和数字。特殊字符（如逗号、引号等）将显示为`e.Key.ToString()`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-06-29T02:54:54.403

试试这个，它有效。

```
 private void txbNumber_KeyDown(object sender, KeyEventArgs e)
    {
        if (e.Key >= Key.D0 && e.Key <= Key.D9) ; // it`s number
        else if (e.Key >= Key.NumPad0 && e.Key <= Key.NumPad9) ; // it`s number
        else if (e.Key == Key.Escape || e.Key == Key.Tab || e.Key == Key.CapsLock || e.Key == Key.LeftShift || e.Key == Key.LeftCtrl ||
            e.Key == Key.LWin || e.Key == Key.LeftAlt || e.Key == Key.RightAlt || e.Key == Key.RightCtrl || e.Key == Key.RightShift ||
            e.Key == Key.Left || e.Key == Key.Up || e.Key == Key.Down || e.Key == Key.Right || e.Key == Key.Return || e.Key == Key.Delete ||
            e.Key == Key.System) ; // it`s a system key (add other key here if you want to allow)
        else
            e.Handled = true; // the key will sappressed
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T14:09:14.250

添加对 Microsoft.VisualBasic 的引用并使用 VB IsNumeric 函数，结合 char.IsLetter()。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-08-07T11:38:13.343

有点粘，但它有效:)

```
 private void TextBox_KeyDown(object sender, KeyEventArgs e)
    {
        Regex R = new Regex("^([A-Z]|[0-9]){1}$");

        var strKey = new KeyConverter().ConvertToString(e.Key);
        if(strKey.Length > 1 )
        {
            strKey = strKey.Replace("NumPad", "").Replace("D", "");
        }
        if (strKey.Length == 1)
        {
            if (!R.IsMatch(strKey))
            {
                e.Handled = true;
            }
        }
        else
        {
            e.Handled = true;
        }
    } 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-02-12T14:05:48.747

你能放一些代码来显示你的意图吗？这不应该为你工作

```
 if(e.key.ToString().Length==1)

    `Char.IsLetter(e.key.ToString()[0])`
    else

// 
```

# javascript - 获取 SCRIPT1014：来自本地 js 文件的 IE 中的无效字符

> ID：14834261
> 
> 赞同：6
> 
> 时间：2013-02-12T13:58:50.183
> 
> 标签：javascript, internet-explorer, local

我正在开发一个本地存储的站点，并且在我测试过的所有浏览器中都运行良好，除了任何版本的 IE。它为我包含在脚本标签中的每个 js 文件提供了“SCRIPT1014：无效字符”，例如：`<script src="Scripts/jquery-1.9.1.min.js"></script>`

这会产生以下错误：

```
SCRIPT1014: Invalid character 
jquery-1.9.1.min.js, line 1 character 1 
```

如果我然后单击错误以在 ie 开发人员工具中查看文件，它看起来像这样：

```
?? I?%&/m?{J?J??t??`$ؐ@??????iG#)?*??eVe]f@?흼??{???{???;?N'????\fdl??J?ɞ!????~|?"???? 
```

ETC

除了这是一个常见问题（或者人们从来没有在 ie 中查看本地存储的网页吗？），但我在搜索时没有找到太多，而且我发现的内容没有帮助。
如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T14:05:22.067

这里有一个类似的问题：[SCRIPT1014: Invalid character](https://stackoverflow.com/questions/6261256/script1014-invalid-character)

我会检查本地脚本的浏览器安全设置。

您可以尝试将其添加到您的页面，看看它是否有效：

```
<!-- saved from url=(0016)http://localhost --> 
```

或者您可以将“本地 Intranet”区域设置为低并禁用保护模式（如果打开）。

[http://msdn.microsoft.com/en-us/library/ms537628(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ms537628(v=vs.85).aspx)

编辑：在评论中回答 - 清除浏览器缓存。

# c - 在 C 中向后读取文本文件

> ID：14834267
> 
> 赞同：13
> 
> 时间：2013-02-12T13:59:11.880
> 
> 标签：c, text, stream, standard-library

在 C 中向后读取文件的最佳方法是什么？我知道一开始您可能会认为这没有任何用处，但大多数日志等都会在文件末尾附加最新数据。我想从文件中向后读取文本，将其缓冲成行 - 即

abc
def
ghi

应按行阅读**ghi**，**def**，**abc**。

到目前为止，我已经尝试过：

```
 #include <stdio.h>
    #include <stdlib.h>

    void read_file(FILE *fileptr)
    {
        char currentchar = '\0';
        int size = 0;

        while( currentchar != '\n' )
        {
            currentchar = fgetc(fileptr); printf("%c\n", currentchar);
            fseek(fileptr, -2, SEEK_CUR);
            if( currentchar == '\n') { fseek(fileptr, -2, SEEK_CUR); break; }
            else size++;

        }
        char buffer[size]; fread(buffer, 1, size, fileptr);
        printf("Length: %d chars\n", size);
        printf("Buffer: %s\n", buffer);

    }

    int main(int argc, char *argv[])
    {
        if( argc < 2) { printf("Usage: backwards [filename]\n"); return 1; }

        FILE *fileptr = fopen(argv[1], "rb");
        if( fileptr == NULL ) { perror("Error:"); return 1; }

        fseek(fileptr, -1, SEEK_END); /* Seek to END of the file just before EOF */
        read_file(fileptr);

        return 0;

    } 
```

试图简单地读取一行并缓冲它。对不起，我的代码很糟糕，我变得非常困惑。我知道您通常会为整个文件分配内存然后读入数据，但对于不断变化的大文件，我认为直接读取会更好（特别是如果我想在文件中搜索文本）。

提前致谢

*** 抱歉忘了提到这将在 Linux 上使用，所以换行符只是没有 CR 的 NL。***

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-12T14:30:42.403

您可以通过程序通过管道输入输入`tac`，这就像`cat`但倒退！

[http://linux.die.net/man/1/tac](http://linux.die.net/man/1/tac)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-12T18:16:04.487

我推荐一种更便携（希望）的文件大小确定方式，因为`fseek(binaryStream, offset, SEEK_END)`不能保证有效。请参阅下面的代码。

我相信文件应该至少在内核级别缓冲最少（例如，默认情况下每个文件缓冲至少一个块），因此搜索不应该产生大量额外的 I/O，并且应该只在内部推进文件位置。如果默认缓冲不满意，你可以尝试使用`setvbuf()`来加速 I/O。

```
#include <limits.h>
#include <string.h>
#include <stdio.h>

/* File must be open with 'b' in the mode parameter to fopen() */
long fsize(FILE* binaryStream)
{
  long ofs, ofs2;
  int result;

  if (fseek(binaryStream, 0, SEEK_SET) != 0 ||
      fgetc(binaryStream) == EOF)
    return 0;

  ofs = 1;

  while ((result = fseek(binaryStream, ofs, SEEK_SET)) == 0 &&
         (result = (fgetc(binaryStream) == EOF)) == 0 &&
         ofs <= LONG_MAX / 4 + 1)
    ofs *= 2;

  /* If the last seek failed, back up to the last successfully seekable offset */
  if (result != 0)
    ofs /= 2;

  for (ofs2 = ofs / 2; ofs2 != 0; ofs2 /= 2)
    if (fseek(binaryStream, ofs + ofs2, SEEK_SET) == 0 &&
        fgetc(binaryStream) != EOF)
      ofs += ofs2;

  /* Return -1 for files longer than LONG_MAX */
  if (ofs == LONG_MAX)
    return -1;

  return ofs + 1;
}

/* File must be open with 'b' in the mode parameter to fopen() */
/* Set file position to size of file before reading last line of file */
char* fgetsr(char* buf, int n, FILE* binaryStream)
{
  long fpos;
  int cpos;
  int first = 1;

  if (n <= 1 || (fpos = ftell(binaryStream)) == -1 || fpos == 0)
    return NULL;

  cpos = n - 1;
  buf[cpos] = '\0';

  for (;;)
  {
    int c;

    if (fseek(binaryStream, --fpos, SEEK_SET) != 0 ||
        (c = fgetc(binaryStream)) == EOF)
      return NULL;

    if (c == '\n' && first == 0) /* accept at most one '\n' */
      break;
    first = 0;

    if (c != '\r') /* ignore DOS/Windows '\r' */
    {
      unsigned char ch = c;
      if (cpos == 0)
      {
        memmove(buf + 1, buf, n - 2);
        ++cpos;
      }
      memcpy(buf + --cpos, &ch, 1);
    }

    if (fpos == 0)
    {
      fseek(binaryStream, 0, SEEK_SET);
      break;
    }
  }

  memmove(buf, buf + cpos, n - cpos);

  return buf;
}

int main(int argc, char* argv[])
{
  FILE* f;
  long sz;

  if (argc < 2)
  {
    printf("filename parameter required\n");
    return -1;
  }

  if ((f = fopen(argv[1], "rb")) == NULL)
  {
    printf("failed to open file \'%s\'\n", argv[1]);
    return -1;
  }

  sz = fsize(f);
//  printf("file size: %ld\n", sz);

  if (sz > 0)
  {
    char buf[256];
    fseek(f, sz, SEEK_SET);
    while (fgetsr(buf, sizeof(buf), f) != NULL)
      printf("%s", buf);
  }

  fclose(f);
  return 0;
} 
```

我只在具有 2 个不同编译器的 Windows 上对此进行了测试。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-12T14:33:31.463

有很多方法可以做到这一点，但一次读取一个字节绝对是较差的选择之一。

阅读最后一个，比如说，4KB，然后从最后一个字符回到前一个换行符是我的选择。

另一种选择是`mmap`文件，只是假装文件是一块内存，然后向后扫描。[您也可以告诉`mmap`您正在向后阅读，以使其为您预取数据]。

如果文件非常大（几千兆字节），您可能只想在`mmap`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T15:15:05.340

如果您想学习如何操作，这里有一个 Debian/Ubuntu 示例（对于其他基于 RPM 的发行版，请根据需要进行调整）：

```
~$ which tac
/usr/bin/tac
~$ dpkg -S /usr/bin/tac
coreutils: /usr/bin/tac
~$ mkdir srcs
~$ cd srcs
~/srcs$ apt-get source coreutils 
```

（剪辑 apt-get 输出）

```
~/srcs$ ls
coreutils-8.13  coreutils_8.13-3.2ubuntu2.1.diff.gz  coreutils_8.13-3.2ubuntu2.1.dsc  coreutils_8.13.orig.tar.gz
~/srcs$ cd coreutils-8.13/
~/srcs/coreutils-8.13$ find . -name tac.c
./src/tac.c
~/srcs/coreutils-8.13$ less src/tac.c 
```

这不是太长，超过 600 行，虽然它包含一些高级功能，并使用其他来源的功能，但反向行缓冲实现似乎在该`tac.c`源文件中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T14:34:11.240

每个字节的 FSEEKing 听起来非常缓慢。

如果您有内存，只需将整个文件读入内存，然后将其反转或向后扫描。

另一种选择是 Windows 内存映射文件。

# c# - 更改代码以呈现回车符和换行符

> ID：14834268
> 
> 赞同：1
> 
> 时间：2013-02-12T13:59:13.373
> 
> 标签：c#, asp.net, .net

我在 SQL Server 数据库中有一个文本，其中包含`new line character`和`carriage return character`。当我将此值分配给字符串变量时，我可以看到这些换行符和回车符，如第一个屏幕截图所示。但是当它被渲染时，这些值不存在（如第二个屏幕截图所示）。

我们如何`render`在gridview中使用以下代码换行和回车字符？

**代码**

```
protected void Page_Load(object sender, EventArgs e)
{

    List<Account> result = new List<Account>();
    string value = DisplayTest("Daily Tax Updates:\r\n");

    Account acc = new Account(){Description = value};
    result.Add(acc);

    grdFinancialAmount.DataSource = result;
    grdFinancialAmount.DataBind();

}

public class Account
{
    public string Description { get; set; }
}

private static string DisplayTest(string searchValue)
{
    string test = String.Empty;
    string connectionString = "Data Source=.;Initial Catalog=LibraryReservationSystem;Integrated Security=True;Connect Timeout=30";

    using (SqlConnection connection = new SqlConnection(connectionString))
    {
        connection.Open();
        string commandText = @"SELECT AccountType,* 
                          FROM Account 
                          WHERE AccountType LIKE @input ESCAPE '\'";
        using (SqlCommand command = new SqlCommand(commandText, connection))
        {
            command.CommandType = System.Data.CommandType.Text;
            command.Parameters.AddWithValue("@input", "%" + searchValue + "%");

            using (SqlDataReader reader = command.ExecuteReader())
            {
                if (reader.HasRows)
                {
                    while (reader.Read())
                    {

                        test = reader.GetString(0);
                    }
                }
            }
        }
    }

    return test;

} 
```

**标记**

```
<asp:GridView ID="grdFinancialAmount" runat="server" AutoGenerateColumns="false">
    <Columns>
        <asp:TemplateField HeaderText="Text">
            <ItemTemplate>
                <%# Eval("Description")%>
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

来自数据库的变量值

![来自数据库的变量值](../Images/7479daa2443099aff5fee037f0fa3ecc.png)

渲染值

![渲染值](../Images/9b21c65e2826e3cf8559d176d3c2e952.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:01:17.897

替换为`\r\n`应该`\\r\\n`可以正常工作。

我误解了这一点，我虽然你想显示`\r\n`而不是返回字符，但正如评论所说，替换为`<br/>`.

```
string.Replace("\r\n", "<br/>"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T14:17:21.670

您呈现的值是 html。放入`\r\n`html 可能会更改源 html，但对渲染的内容绝对没有影响。

您可以通过在渲染窗口上执行“查看源代码”来验证这一点。

这里的一种方法是，在渲染之前，用硬换行符替换所有出现的`\r\n`地方`<br/>`。

或者你可以在`<p>`你的字符串前面添加一个`</p>`标签，在你的字符串末尾添加一个标签，然后用 替换所有`\r\n`出现的`</p><p>`地方，即将它分成段落。这可能是两者中更优雅的方法。

这里也会有其他选项，你只需要知道你需要将你的 crlf 字符翻译成 html 可以理解的东西。

# php - 解压用户提交文件的安全性

> ID：14834270
> 
> 赞同：7
> 
> 时间：2013-02-12T13:59:16.060
> 
> 标签：php, wordpress, zip, unzip

这里不是一个编码问题，而是一个与安全性有关的一般问题。我目前正在开发一个允许用户提交内容的项目。该内容的一个关键部分是用户上传一个 Zip 文件。zip 文件应仅包含 mp3 文件。

然后我将这些文件解压缩到服务器上的一个目录，这样我们就可以在网站上流式传输音频供用户收听。

我担心的是，这为我们打开了一些可能具有破坏性的 zip 文件。我过去读过“zipbombs”，显然不希望恶意 zip 文件造成损坏。

那么，有没有一种安全的方法来做到这一点？我可以在不先解压缩的情况下扫描 zip 文件吗？如果它包含 MP3 以外的任何内容，请将其删除或向管理员发出警告？

如果它有所作为，我正在 Wordpress 上开发该网站。我目前使用 wordpress 的内置上传功能让用户将 zip 文件上传到我们的服务器（我不确定 wordpress 中是否有任何形式的安全措施来扫描 zip 文件？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T14:15:06.490

代码，仅从 zip 中提取 MP3，忽略其他内容

```
$zip = new ZipArchive();
$filename = 'newzip.zip';

if ($zip->open($filename)!==TRUE) {
   exit("cannot open <$filename>\n");
}

for ($i=0; $i<$zip->numFiles;$i++) {
   $info = $zip->statIndex($i);
   $file = pathinfo($info['name']);
   if(strtolower($file['extension']) == "mp3") {
        file_put_contents(basename($info['name']), $zip->getFromIndex($i));
   }

}
$zip->close(); 
```

我会使用类似`id3_get_version`（[http://www.php.net/manual/en/function.id3-get-version.php](http://www.php.net/manual/en/function.id3-get-version.php)）的东西来确保文件的内容也是mp3

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T14:29:24.443

他们是否有理由需要压缩 MP3？除非 MP3 中的 ID3v2 信息中有很多文本框，否则文件大小实际上会由于字典的存储而随着 ZIP 的增加而增加。

据我所知，没有任何方法可以在不实际解析的情况下扫描 ZIP。在您通过 Huffman 字典运行每一位之前，数据是不透明的。您如何确定 MP3 文件是什么文件？通过文件扩展名？按帧？MP3 编码器有一个宽松的标准（解码器有一个更严格的规范），这使得很难扫描文件结构而不出现误报。

以下是一些 ZIP 安全风险：

1.  注释导致缓冲区溢出的数据。解决方案：删除评论数据。
2.  ZIP 压缩后的大小很小，但会膨胀以填充文件系统（经典的 ZIP 炸弹）。解决方法：充气前检查充气尺寸；检查字典以确保它有很多条目，并且压缩数据不全是 1。
3.  嵌套 ZIP（与 #2 相关）。解决方案：当 ZIP 存档中的条目本身就是 ZIP 数据时停止。您可以通过检查中央目录的标记来确定这一点，数字 0x02014b50（十六进制，在 ZIP 中总是小端 - [http://en.wikipedia.org/wiki/Zip_%28file_format%29#Structure](http://en.wikipedia.org/wiki/Zip_%28file_format%29#Structure)）。
4.  嵌套目录结构，旨在超出文件系统的限制并挂起放气过程。解决方案：不要解压目录。

因此，要么进行大量的清理和完整性检查，要么至少使用 PHP 来扫描存档；检查每个文件的 MP3 特性（但是你这样做 - 扩展名和 MP3 标题的存在？但你不能依赖它们位于字节[0。http ://en.wikipedia.org/wiki/MP3# File_structure](http://en.wikipedia.org/wiki/MP3#File_structure)）和缩小的文件大小（[http://www.php.net/manual/en/function.zip-entry-filesize.php](http://www.php.net/manual/en/function.zip-entry-filesize.php)）。如果膨胀的文件太大，或者存在任何非 MP3，请退出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T14:07:29.293

使用以下代码作为 .zip 存档中的文件名：

```
$zip = zip_open('test.zip');

while($entry = zip_read($zip)) {
    $file_name = zip_entry_name($entry);
    $ext = pathinfo($file_name, PATHINFO_EXTENSION);
    if(strtoupper($ext) !== 'MP3') {
        notify_admin($file_name);
    }
} 
```

请注意，以下代码只会查看扩展名。这意味着用户可以上传任何具有 MP3 扩展名的内容。要真正检查文件是否为 mp3，您必须将其解压缩。我建议您在临时目录中执行此操作。

文件解压后，您可以使用 ffmpeg 或其他工具对其进行分析。在任何情况下，拥有有关比特率、轨道长度等的详细数据都会很有趣。

如果分析失败，您可以标记该文件。

# vim - 如果内容没有改变，则停止 Vim 保存文件

> ID：14834273
> 
> 赞同：16
> 
> 时间：2013-02-12T13:59:20.387
> 
> 标签：vim

在我见过的 GUI 文本编辑器中，当文本没有更改（或已更改并恢复到其原始状态）时，Save 选项显示为灰色。

对于类似的事情，Vim 可以在这种情况下禁用保存文件吗？也就是说，这样做`:w`实际上不会更改文件的 mtime。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-12T14:05:05.730

您可以使用`:update`命令（`:up`简称），仅当缓冲区已被修改时才写入文件。如果你觉得很强烈，你可以在 gvim 的文件菜单中添加一个更新选项，但也许 Ex 命令就足够了。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-05-20T01:28:29.523

```
WRITING WITH MULTIPLE BUFFERS               *buffer-write*

                            *:wa* *:wall*
:wa[ll]         Write all changed buffers.  Buffers without a file
            name or which are readonly are not written. {not in
            Vi}

:wa[ll]!        Write all changed buffers, even the ones that are
            readonly.  Buffers without a file name are not
            written. {not in Vi} 
```

`:wa`将保存所有***更改的***文件

`:xa`将保存所有***更改***的文件，然后退出 vim。

# cloud-foundry - Micro Cloud Foundry 的理想虚拟机配置

> ID：14834283
> 
> 赞同：0
> 
> 时间：2013-02-12T13:59:47.110
> 
> 标签：cloud-foundry

您能否建议使用微云代工的理想虚拟机配置。我知道配置可能取决于很多参数，但我正在寻找能够顺利运行而又不会使来宾或主机在性能方面太慢的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T19:11:35.897

当您下载 Micro Cloud 时，它已经包含在已配置的 VM 中。您可以查看 VM 配置，但无需手动创建新 VM。

“micro.vmx”是虚拟机。

以下是有关 Micro Cloud 的文档的链接，以获取更多信息：

[http://docs.cloudfoundry.com/infrastructure/micro/installing-mcf.html](http://docs.cloudfoundry.com/infrastructure/micro/installing-mcf.html)

# mysql - Mysql查询动态将行转换为列

> ID：14834290
> 
> 赞同：36
> 
> 时间：2013-02-12T14:00:02.260
> 
> 标签：mysql, sql, group-by, pivot

MySQL 能否将列转换为行，动态添加行所需的列。我认为我的问题可能与数据透视表有关，但我不确定，除了给出以下示例之外，我不知道如何构建这个问题。

给定两个表 A 和 B，看起来像

表 A

```
+--+-----+----+
|id|order|data|
+--+-----+----+
|1 |1    |P   |
+--+-----+----+
|2 |2    |Q   |
+--+-----+----+
|2 |1    |R   |
+--+-----+----+
|1 |2    |S   |
+--+-----+----+ 
```

我喜欢编写如下所示的查询：

结果表

```
+--+-----+-----+
|id|data1|data2|
+--+-----+-----+
|1 |P    |S    |
+--+-----+-----+
|2 |R    |Q    |
+--+-----+-----+ 
```

基本上我想将表 B 中的每一行变成结果表中的一列。如果为 id=1 向表 B 添加了一个新条目，那么我希望结果表自动扩展一列以容纳这个额外的数据点。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-02-12T14:02:05.753

您可以使用`GROUP BY`和`MAX`来模拟枢轴。MySQL 也支持`IF`语句。

```
SELECT  ID,
        MAX(IF(`order` = 1, data, NULL)) data1,
        MAX(IF(`order` = 2, data, NULL)) data2
FROM    TableA
GROUP   BY ID 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/70129/2)

如果您有多个 的值`order`，动态 SQL 可能更合适，这样您就不必修改查询：

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'MAX(IF(`order` = ', `order`, ',data,NULL)) AS data', `order`)
  ) INTO @sql
FROM TableName;

SET @sql = CONCAT('SELECT  ID, ', @sql, ' 
                  FROM    TableName
                  GROUP   BY ID');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/70129/13)
*   [SQLFiddle 演示（*另一个例子*）](http://sqlfiddle.com/#!2/42489/2)

两个查询的输出：

```
╔════╦═══════╦═══════╗
║ ID ║ DATA1 ║ DATA2 ║
╠════╬═══════╬═══════╣
║  1 ║ P     ║ S     ║
║  2 ║ R     ║ Q     ║
╚════╩═══════╩═══════╝ 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-12T14:02:34.913

您需要使用`MAX`并`GROUP BY`模拟 PIVOT：

```
SELECT Id,
   MAX(CASE WHEN Order = 1 THEN data END) data1,
   MAX(CASE WHEN Order = 2 THEN data END) data2
FROM TableA
GROUP BY Id 
```

这是[SQL Fiddle](http://www.sqlfiddle.com/#!2/fc8eb/1)。

# java - mysql替换方法加java

> ID：14834293
> 
> 赞同：0
> 
> 时间：2013-02-12T14:00:10.723
> 
> 标签：java, mysql

我知道如何通过使用 REPLACE 方法来替换整个字段的单个值

```
 UPDATE `table` SET `field` = REPLACE(`field`, `string`, `anothervalue`) 
```

但是如果我必须在同一字段中用不同的其他东西替换不同的值，例如“，”，那就用“。”替换。并且“/”是替换为空格“”和“hons”是替换为同一字段中的“honours”，我可以在一个查询中完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T14:02:04.197

```
UPDATE `table` 
SET `field` = REPLACE(REPLACE(REPLACE(`field`,'/',' ') ',','.') , 'hons', 'honours') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T14:01:51.580

你可以级联`replace`

```
UPDATE `table` 
SET `field` = replace(replace(replace(`field`, ',', '.'), '/', ' '), 'hons', 'honours') 
```

# json - this.href.substr(23) 对 GA 的事件跟踪过程有什么作用？

> ID：14834294
> 
> 赞同：0
> 
> 时间：2013-02-12T14:00:12.233
> 
> 标签：json, jquery, google-analytics, event-tracking

有人可以帮助我理解以下链接中的过程，尤其是 onClick 中的部分：

```
<a href="http://www.example.com/files/download/files.php?file=my_file.doc" onClick="_gaq.push(['_trackEvent', 'Downloads', 'DOC', this.href.substr(23)]); fn12_reminder(this,''); return false;" rel="nofollow"> 
```

我知道这是简单的 GA 甚至跟踪过程，但我无法理解的是最后一部分`this.href.substr(23)`我无法弄清楚这在整个过程中实际上做了什么？

标头中加载的 js 脚本具有以下性质（我将其完整发布，以便有经验的人可以发现连接，如果存在的话）：

```
var functions = true;
function fn12_custom_display_notice(theNotice,theClass){
    if(theClass!=''){
        jQuery("#user-notice").removeClass();
        jQuery("#user-notice").addClass(theClass);
        }
        jQuery("#user-notice").html(theNotice).animate({width:'toggle'},250).delay(3000).animate({width:'toggle'},250);
        }
function fn12_custom_display_reminder(theHTML,theDownloadLink){if(typeof jQuery.ui!='undefined'){$("#dialog").attr("title","Please help spread the word").html(theHTML);$("#dialog").dialog({modal:true,width:375,buttons:{"Continue to Download":function(){$(this).dialog("close");window.location=theDownloadLink;}}});}else{window.location=theDownloadLink;}}
function fn12_custom_reminder(aelem,topic){theLink=$(aelem).attr("href");$.ajax({type:"POST",url:"/db/ajax.php",data:"action=reminder&thepath="+theLink+"&topic="+topic,dataType:"json",error:function(){window.location=theLink;},success:function(msg){if(msg.status==1)fn12_custom_display_reminder(msg.html,theLink);else{fn12_custom_display_notice(msg.message,"error");}}});}
function fn12_custom_gplus_callback(theObject){if(theObject.state=='on'){fn12_custom_display_notice("Big thanks!!!",'success');}}

/* jquery_cookie.js Copyright (c) 2006 Klaus Hartl (stilbuero.de), Dual licensed under the MIT and GPL licenses */
jQuery.cookie=function(name,value,options){if(typeof value!='undefined'||(name&&typeof name!='string')){if(typeof name=='string'){options=options||{};if(value===null){value='';options.expires=-1;}
var expires='';if(options.expires&&(typeof options.expires=='number'||options.expires.toUTCString)){var date;if(typeof options.expires=='number'){date=new Date();date.setTime(date.getTime()+(options.expires*24*60*60*1000));}else{date=options.expires;}
expires='; expires='+date.toUTCString();}
var path=options.path?'; path='+(options.path):'';var domain=options.domain?'; domain='+(options.domain):'';var secure=options.secure?'; secure':'';document.cookie=name+'='+encodeURIComponent(value)+expires+path+domain+secure;}else{for(var n in name){jQuery.cookie(n,name[n],value||options);}}}else{var returnValue={};if(document.cookie){var cookies=document.cookie.split(';');for(var i=0;i<cookies.length;i++){var cookie=jQuery.trim(cookies[i]);if(!name){var nameLength=cookie.indexOf('=');returnValue[cookie.substr(0,nameLength)]=decodeURIComponent(cookie.substr(nameLength+1));}else if(cookie.substr(0,name.length+1)==(name+'=')){returnValue=decodeURIComponent(cookie.substr(name.length+1));break;}}}
return returnValue;}}; 
```

任何帮助都会受到高度评价

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:03:40.190

在您的示例中，`this.href.substr(23)`等于`files/download/files.php?file=my_file.doc`，它只是与`a`元素关联的 url。

*   `this`指的是当前对象，`a`元素。
*   `href`指元素的属性。
*   `substr(23)`采用从第 23 个字符开始的子字符串，以剥离协议和域名。

# backbone.js - Backbone.js - 使用子模型构建视图

> ID：14834295
> 
> 赞同：1
> 
> 时间：2013-02-12T14:00:14.737
> 
> 标签：backbone.js

每次单击元素时，我都会创建一个主干模型的编辑视图。我遇到的问题是编辑视图需要两个主干集合来创建编辑表单（它包含两个`<select>`列表）。

风景：

```
MyApp.elementView = Backbone.View.extend({
    events: {
            'click .edit': 'editForm',
    },
    editForm: function(ev) {

            var editView = new TimeTrack.Views.EditJob({
                model: this.model
                // This view needs two more collections
                // for the <select> elements
            });
            ...
    }
}); 
```

实例化视图：

```
var elementView = new MyApp.elementView({
        collection: elementCollection
}); 
```

将所需集合推送到编辑视图的最佳方式是什么？我是否必须从 elementView 实例化传递编辑视图所需的集合？或者有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T14:11:31.733

我这样做了，传入视图 2 集合，1 - 主要和其他如下：到 elementView - 第二个集合并在 elementView 中接收她。

示例：在路由器中，我是

```
initialize: ->
  (YourNameSpace).secondCollection = new (YourNameSpace).secondCollection

 elements: =>
    view = new (YourNameSpace).elementView( secondCollection: @secondCollection )
    $('.l-yield').html(view.render().el) 
```

# android - NullPointerException（可能由 getStringExtra 或 getTimeInstance 引起）

> ID：14834298
> 
> 赞同：1
> 
> 时间：2013-02-12T14:00:32.973
> 
> 标签：android, crash, nullpointerexception

我扩展广播接收器：

```
 public class MyBroadcast extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
        Bundle bundle = intent.getExtras();
        if (null == bundle)
            return;
        String phoneNumber = intent.getStringExtra(Intent.EXTRA_PHONE_NUMBER);
        String currentTimeString = DateFormat.getTimeInstance(DateFormat.SHORT).format(new Date());
        int a = 2; 
        if (currentTimeString.length() == 5) {
            a = 3;
        }
        String minutes = currentTimeString.substring(a);
        if (phoneNumber.equals(minutes)) {
            //some code
        }
    }
 } 
```

我的一位用户使用 ACRA 收到了以下崩溃报告（因此，我不能重复此错误）：

```
"java.lang.RuntimeException: Unable to start receiver myapp.service.MyBroadcast: java.lang.NullPointerException
    at android.app.ActivityThread.handleReceiver(ActivityThread.java:2144)
    at android.app.ActivityThread.access$2400(ActivityThread.java:135)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1114)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:150)
    at android.app.ActivityThread.main(ActivityThread.java:4389)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:507)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607)
    at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.NullPointerException
    at myapp.service.MyBroadcast.onReceive(MyBroadcast.java:31)
    at android.app.ActivityThread.handleReceiver(ActivityThread.java:2103)
    ... 10 more
java.lang.NullPointerException
    at myapp.service.MyBroadcast.onReceive(MyBroadcast.java:31)
    at android.app.ActivityThread.handleReceiver(ActivityThread.java:2103)
    at android.app.ActivityThread.access$2400(ActivityThread.java:135)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1114)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:150)
    at android.app.ActivityThread.main(ActivityThread.java:4389)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:507)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607)
    at dalvik.system.NativeStart.main(Native Method)" 
```

所以，第 31 行有 NullPointerException：

```
if (phoneNumber.equals(minutes)) { 
```

据我了解字符串之一`phoneNumber`或`minutes`为空。而且我认为`intent.getStringExtra(Intent.EXTRA_PHONE_NUMBER)`在我的情况下不能为空（或者我错了？）。我假设它`currentTimeString`的长度为 4 或 5 个符号（例如，因为它返回 1:45 或 20:54）。也许原因是遇到此错误的用户具有语言环境 en_PK（我认为是巴基斯坦）并`DateFormat.getTimeInstance`以某种奇怪的格式返回时间，但正如我所见，应该[没有什么奇怪](http://en.wikipedia.org/wiki/Date_and_time_notation_in_Pakistan)的......

这是什么原因造成的`NullPointerException`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T14:14:46.953

当然`phoneNumber`是空的，因为这样做`String.equals(null)`只会返回假。根据[文档](http://developer.android.com/reference/android/content/Intent.html#ACTION_NEW_OUTGOING_CALL)，接收者`ACTION_NEW_OUTGOING_CALL`可能会修改该数字，包括在不应该调用它时将其设置为 null（例如家长控制应用程序）。所以我假设这是您的用户的情况，即您的接收者得到了一个无效的号码。

顺便说一句，正如@Puru 提到的，不推荐您提取分钟的方式。

# javascript - AngularJS 复选框 ng-repeat 和选定对象？

> ID：14834300
> 
> 赞同：40
> 
> 时间：2013-02-12T14:00:47.910
> 
> 标签：javascript, angularjs, checkbox, repeat

我试图以适当的方式减少痛苦，但我不知道如何处理 ng-model 并将其绑定到选定的列表等，而且我需要稍后填充该列表并保留选定的对象在里面。

```
categories = [ { "name": "Sport", "id": "50d5ad" } , {"name": "General", "id": "678ffr" } ]

    <span ng-repeat="category in categories">
      <label class="checkbox" for="{{category.id}}">
        <input type="checkbox" value="{{category.id}}" ng-model="??" ng-click="??" name="group" id="{{category.id}}" />
        {{category.name}}
      </label>
    </span> 
```

每次填充列表时，我都必须覆盖类别，因为它将从服务器中提取出来。

所以我想我需要有数组，第二个将保存选定的对象？

如果我是对的，我该如何预选复选框？

我是否需要 ng-click 才能调用自定义函数将所选对象存储在另一个数组中？

我需要在复选框中使用 ng-model 吗？为什么？

少痛点的正确方法是什么？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2013-02-12T14:46:22.793

> 每次填充列表时，我都必须覆盖类别，因为它将被拉出表单服务器。所以我问我需要有数组，而第二个将保存选定的对象？

是的，因为它是一个列表，您可以/应该使用数组。有关所选项目/对象的信息应存储在您的范围模型中（示例如下）。

> 如果我是对的，我如何预先选择复选框？

将所选选项/复选框的 ID 保存在您的模型上，然后让其他`ng-model`人完成剩下的工作。

> 我是否需要 ng-click 才能调用自定义函数将所选对象存储在另一个数组中？

不，你不需要它，`ng-model`就足够了。

> 我需要 ng-model 复选框吗？又是为了什么？

Yes, you need it. The `ng-model` is responsible for storing the selected options on your model and for making the ('pre-')selection automatic.

**jsfiddle** [http://jsfiddle.net/bmleite/PQvQ2/](http://jsfiddle.net/bmleite/PQvQ2/)

# css - IE 8 菜单下拉问题

> ID：14834305
> 
> 赞同：0
> 
> 时间：2013-02-12T14:01:09.553
> 
> 标签：css, internet-explorer, menu

菜单不会像在 IE7 中那样下拉。谁能帮忙……拜托！？

您必须单击标题才能显示它，否则菜单将被隐藏。

下面的CSS：

```
#top_nav{ width: 810px; float: left; background: #DADADA; margin: 0; position: relative; z-index: 100; padding: 0;}
#top_nav ul {margin: 0 0 0 10px; padding: 0; list-style: none; float: left; width: 800px; height: 40px; }
#top_nav li {float: left; margin: 0; padding: 0; width: auto; font-weight: normal; cursor: pointer; white-space: nowrap; font-size: 100%; color: #000; line-height: 150%;}
#top_nav li a{text-decoration: none; color: #000; width: auto; display: block; padding: 8px 18px 7px 18px; line-height: 25px; text-align: center; font-weight: normal; }

#top_nav li ul {position: absolute; left: -999em; height: auto; width: 234px; w\idth: 224px; font-weight: normal; padding: 0px 0 0 0; margin: 0 0 0 0; border-bottom: 1px solid #aaa; }
#top_nav li li {padding: 0; background-color: #DADADA; font-size: 90%; line-height: 120%;}

#top_nav li li a{line-height: auto; text-align: left; width: 212px; w\idth: 202px; padding: 3px 10px; border-top: 1px solid #aaa; border-left: 1px solid #aaa; border-right: 1px solid #aaa; }
#top_nav li li a:hover{ background-color: #92D400; color: #fff;}

#top_nav li:hover ul ul, #top_nav li:hover ul ul ul, #top_nav li.sfhover ul ul, #top_nav li.sfhover ul ul ul {left: -999em;}
#top_nav li:hover ul, #top_nav li li:hover ul, #top_nav li li li:hover ul, #top_nav li.sfhover ul, #top_nav li li.sfhover ul, #top_nav li li li.sfhover ul {    left: auto;}
#top_nav li:hover, #top_nav li.sfhover, #top_nav a.active{ background-color: #92D400; }

#sub_nav{ background: #002F5F; float: left; width: 810px; margin: 0; }
#sub_nav ul{ float: left; width: 790px; margin: 0 0 0 10px; padding: 0; list-style: none; }
#sub_nav li{ float: left; margin: 0; padding: 0; font-size: 90%; font-weight: bold; text-align: center; }
#sub_nav li a{ color: #fff; display: block; height: 105px; padding: 8px 30px 0 30px; text-decoration: none; }
#sub_nav li a:hover,
#sub_nav li a.active{ background-color: #DADADA; color: #002F5F; }

#section_nav{ float: left; margin: 1px 0 0px 0; width: 810px; background: #002F5F; }
#section_nav ul{ float: left; width: 808px; margin: 0; padding: 0; list-style: none; }
#section_nav li{ float: left; margin: 0; padding: 0; font-size: 70%; font-weight: bold; }
#section_nav li a{ color: #fff; display: block; padding: 8px 10px; border-right: 1px solid #fff; border-bottom: 1px solid #fff;  text-decoration: none; }
#section_nav li a:hover,
#section_nav li a.active{ background: #92D400;}
#section_nav img{ float: left; margin: 2px 0 0 2px;} 
```

* * *

下拉菜单在 IE8 中不会自动工作，您还必须单击标题才能显示。

HTML 如下所列：

```
<link href="css/stylesheet.css" rel="stylesheet" type="text/css">

<script type="text/javascript" src="js/jquery.min.1.7.1.js"></script>

<link rel="stylesheet" href="js/nivo-slider/nivo-slider.css" type="text/css" media="screen" />
<script src="js/nivo-slider/jquery.nivo.slider.pack.js" type="text/javascript"></script>

<script type="text/javascript">
jQuery(window).load(function() {
var total = jQuery('#slider img').length;
var rand = Math.floor(Math.random()*total);
jQuery('#slider').nivoSlider({
    animSpeed: 1000, // Slide transition speed
    pauseTime: 4000, // How long each slide will show
    directionNav: false,
    effect: 'boxRainGrow'
});

});
</script>

<script type="text/javascript">
$(function(){
    $('a[href*=#]').click(function() {
    if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'') 
        && location.hostname == this.hostname) {
            var $target = $(this.hash);
            $target = $target.length && $target || $('[name=' + this.hash.slice(1) +']');
            if ($target.length) {
                var targetOffset = $target.offset().top;
                $('html,body').animate({scrollTop: targetOffset}, 500);
                return false;   
            }
        }
    });
});
</script>

</head>

<body>

<a name="top"></a>

<div id="wrap"><!-- START OF WRAP -->

    <div id="header"><!-- START OF HEADER -->
        <a href="http://thehub/livelinkprod/llisapi.dll/intranet/9555529/" class="hub"><img src="images/buttons/btn_back_to_hub.png" width="117" height="27" border="0"></a>

        <img src="images/txt/txt_global_energy_transformation.png" width="361" height="43" id="logo">

  <br clear="all">

        <div id="slider" class="nivoSlider">
            <a href="http://thehub/livelinkprod/llisapi.dll/intranet/9530498//index.htm?nodeid=9530361&vernum=0" target="_blank"><img src="images/headers/New-org-chart.png" width="730" height="162"></a>
                    <a href="http://thehub/livelinkprod/llisapi.dll/fetch/2000/9697/5358303/9288735/appointments-vacancies.html"><img src="images/headers/New-appointments.png " width="730" height="162"></a></div>
    </div><!-- END OF HEADER -->

    <div id="top_nav"><!-- START OF TOP NAVIGATION -->
            <ul>
                <li><a href="index.html" class="active">Home</a></li>
                <li><a href="#">GET Information</a>
                    <ul>
                        <li><a href="latest-news.html">Latest news</a></li>
                        <li><a href="appointments-vacancies.html">Appointments &amp vacancies</a></li>
                        <!-- <li><a href="blogs.html">Blogs</a></li> -->
                        <li><a href="change-champions-smes.html">Change champions &amp; SMEs</a></li>
                        <li><a href="stakeholders.html">Stakeholders</a></li>
                    </ul>
                </li>
                <li><a href="get-involved.html">GET Involved</a></li>
                <li><a href="#">GET Answers</a>
<ul>
     <li><a href="get-answers.html">General</a></li>
     <li><a href="get-answers-structure.html">Service line-specific</a>
</ul>
</li>
                <li><a href="mailto:get@lr.org?subject=Global Energy Transformation - Site Enquiry">GET in touch</a></li>
                <li><a href="service-lines.html">Service lines/functions</a>
                    <ul>
                        <li><a href="inspection-services.html">Inspection services</a></li>
                        <li><a href="compliance-services.html">Compliance services</a></li>
                        <li><a href="asset-integrity-services.html">Asset integrity services</a></li>
                        <li><a href="drilling-integrity-services.html">Drilling integrity services</a></li>
                        <li><a href="consultancy-services.html">Consultancy services</a></li>
                        <li><a href="business-development-services.html">Business development services</a></li>
                        <li><a href="business-services.html">Business services</a></li>
                        <li><a href="finance.html">Finance</a></li>
                        <li><a href="human-resources.html">Human resources</a></li>
<li><a href="technology.html">Technology</a></li>
<li><a href="strategic-projects.html">Strategic projects</a></li>
                    </ul>
                </li>
            </ul>
    </div><!-- END OF TOP NAVIGATION --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-23T02:26:29.290

“z-索引：x；” 解决了 CSS 下拉菜单和 jQuery 滑块（幻灯片/轮播）之间的冲突。对于许多人似乎遇到的问题，这是一个简单的解决方案。

尝试将其放在下拉 ul 的 CSS 样式下。

例子

```
.navbar ul .subnav {
display: none;  
z-index: 3; 
} 
```

您可以玩弄数字 (x)。

# perl - Perl dancer and Template Toolkit：在模板中包含模板

> ID：14834316
> 
> 赞同：5
> 
> 时间：2013-02-12T14:01:48.453
> 
> 标签：perl, template-toolkit, dancer

我正在尝试在模板中包含一个模板，如下所示：

父母.tt

```
 <div class="row-fluid">
    <div class="span3">
    [% INCLUDE my_sidebar]
    </div><!--/span-->
   </div> 
```

my_sidebar.tt 与 parent.tt (/myapp/views) 存在于同一文件夹中

我对 config.yml 进行了以下更改：使用 ABSOLUTE

```
template: "template_toolkit"
engines:
   template_toolkit:
     encoding:  'utf8'
     start_tag: '[%'
     end_tag:   '%]'
     ABSOLUTE : 1 
```

parent.tt 包含：

```
[% INCLUDE /myapps/views/my_sidebar %] 
```

与相对

```
template: "template_toolkit"
engines:
   template_toolkit:
     encoding:  'utf8'
     start_tag: '[%'
     end_tag:   '%]'
     RELATIVE : 1
     INCLUDE_PATH: /myapps/views 
```

parent.tt 包含：

```
[% INCLUDE my_sidebar %] 
```

但在这两种情况下，我都会收到以下错误：

```
core - template - file error - my_sidebar: not found at /.../csm/64-bit/cpan/5.16.1-2012.09/lib/Dancer/Template/Abstract.pm line 90. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T14:15:13.063

您需要`my_sidebar.tt`在您的`INCLUDE`. Dancer 会自动在主模板的名称上附加一个可配置的扩展名（`.tt`默认情况下），但 TT 不知道该设置。

# android - Android：如何以编程方式配对蓝牙设备？

> ID：14834318
> 
> 赞同：4
> 
> 时间：2013-02-12T14:01:57.413
> 
> 标签：android, android-source

**请任何人帮助我以编程**方式将我的安卓手机与其他发现的手机配对？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T08:14:48.737

使用反射找到了解决方案，我现在这样做如下，它对我有用：

```
//For Pairing
private void pairDevice(BluetoothDevice device) {
    try {
        Log.d("pairDevice()", "Start Pairing...");
        Method m = device.getClass().getMethod("createBond", (Class[]) null);
        m.invoke(device, (Object[]) null);
        Log.d("pairDevice()", "Pairing finished.");
    } catch (Exception e) {
        Log.e("pairDevice()", e.getMessage());
    }
}

//For UnPairing
   private void unpairDevice(BluetoothDevice device) {
    try {
        Log.d("unpairDevice()", "Start Un-Pairing...");
        Method m = device.getClass().getMethod("removeBond", (Class[]) null);
        m.invoke(device, (Object[]) null);
        Log.d("unpairDevice()", "Un-Pairing finished.");
    } catch (Exception e) {
        Log.e(TAG, e.getMessage());
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-12T14:06:57.267

可以这样做：

```
public void pairDevice(BluetoothDevice device) {
        String ACTION_PAIRING_REQUEST = "android.bluetooth.device.action.PAIRING_REQUEST";
        Intent intent = new Intent(ACTION_PAIRING_REQUEST);
        String EXTRA_DEVICE = "android.bluetooth.device.extra.DEVICE";
        intent.putExtra(EXTRA_DEVICE, device);
        String EXTRA_PAIRING_VARIANT = "android.bluetooth.device.extra.PAIRING_VARIANT";
        int PAIRING_VARIANT_PIN = 0;
        intent.putExtra(EXTRA_PAIRING_VARIANT, PAIRING_VARIANT_PIN);
        intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        getActivity().startActivityForResult(intent,0);

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T14:42:28.710

您是否在 Android Manifest 文件中设置了权限？

```
<uses-permission android:name="android.permission.BLUETOOTH" />
<uses-permission android:name="android.permission.BLUETOOTH_ADMIN" /> 
```

# android - Eclipse 'Project > Clean...' removes my additional Android src folder. How to fix?

> ID：14834319
> 
> 赞同：2
> 
> 时间：2013-02-12T14:01:58.307
> 
> 标签：android, eclipse

In my Android project I've created an additional source-code folder called `src-plugins`. I added it to `build.properties` and building the project works fine.

However, now and then my `gen` folder won't regenerate and the solution is always to do an Eclipse `Project > Clean...`. However, this also removes the deepest sub-folder of `src-plugins` -- including all of its files.

**Question:** Is there a way to fix this?

I'll preemptively answer the most likely comment: I'm not using a subpackage because I need access to package-private class members. But I still feel I need to group these files in a separate folder.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:46:30.153

如果没有任何日志或布局文件、活动文件等，它的重现甚至会有所不同，但这可能与相同的旧 R.java 问题有关，当您在某些布局文件中遇到问题时。您说它是零星的，但是您必须跟踪在正常行为和文件夹消失期间已修改的内容。这可能只是一件非常小而简单的事情。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-01-20T14:01:47.087

在您的 IDE 中选择*Build > Clean Project*`./gradlew clean`或从控制台中使用。

# java - Insert/Read Array into sqlite database in java

> ID：14834323
> 
> 赞同：0
> 
> 时间：2013-02-12T14:02:06.290
> 
> 标签：java, database, arrays, insert

I'm using Java and SQLite and I have the following situation:

I have a database connected and created a table say ubs

Now I have arrays `int[] d` and `double[] o` in Java, what would be the most efficient way to store it in the database? I tried piecewise insertion and read... the insertion works but it doesnt read out right.

Here is my code:

```
 int size = 20;
    int[] d = new int[size];
    double[] o = new double[size];
    double[] c = new double[size];

    int[] dtest = new int[size];
    double[] otest = new double[size];
    double[] ctest = new double[size];

    for(int a = 0; a< size; ++a) {
        d[a] = a+1;
        o[a] = Math.random();
        c[a] = Math.random();
    }

    Connection conn = DriverManager.getConnection(sDbUrl);

     Statement stat = conn.createStatement();
     stat.executeUpdate("CREATE  TABLE ubs (date INTEGER, open DOUBLE, close DOUBLE)");
     PreparedStatement prep = conn.prepareStatement("insert into ubs values (?,?,?);");
     for(int a = 0; a < size; ++a) {
         prep.setInt(1, d[a]);
         prep.setDouble(2,o[a]);
         prep.setDouble(3,c[a]);
         prep.addBatch();
     }

     conn.setAutoCommit(false);
     prep.executeBatch();
     conn.commit();
     conn.setAutoCommit(true);
     ResultSet rs = stat.executeQuery("select * from ubs;");
     int a = 0;
     while (rs.next())
     {
         dtest[a] = rs.getInt("date");
         otest[a] = rs.getDouble("open");
         ctest[a] = rs.getDouble("close");
         ++a;
     }
    rs.close();
    conn.close();

     //test wether contain the same:
    for(a = 0; a< size; ++a) {
         System.out.println("original: " + o[a] +" saved: "+otest[a]);

    } 
```

here is what it returns:

```
 original: 0.707119601198528 saved: 0.22184821183493642
    original: 0.616040801231279 saved: 0.0
    original: 0.32427329912284675 saved: 0.0
    original: 0.570393637345201 saved: 0.0
    original: 0.05334583924906977 saved: 0.0
    original: 0.5920142191693711 saved: 0.0
    original: 0.5440058264918218 saved: 0.0
    original: 0.9792739762035961 saved: 0.0
    original: 0.7288365270388483 saved: 0.0
    original: 0.862852415217843 saved: 0.0
    original: 0.6427868320117643 saved: 0.0
    original: 0.4895153310585434 saved: 0.0
    original: 0.9163102294291119 saved: 0.0
    original: 0.7991642836297964 saved: 0.0
    original: 0.35640672534480244 saved: 0.0
    original: 0.047751063499014146 saved: 0.0
    original: 0.4956032547461785 saved: 0.0
    original: 0.8975964852843482 saved: 0.0
    original: 0.11097820888267451 saved: 0.0
    original: 0.22184821183493642 saved: 0.0 
```

which doesnt make sense. SO what am I doing wrong? And how can I improve it? By the way this code might be completely senseless because I pieced it together from different tutorials so sorry for that.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T15:53:18.947

在您的以下循环中

```
int a = 0;
while (rs.next())
{
         dtest[a] = rs.getInt("date");
         otest[a] = rs.getDouble("open");
         ctest[a] = rs.getDouble("close");
} 
```

最后添加`a++`。

基本上，您的数组索引在之后不会增加`rs.next()`

# perl - 如何检查ccperl中是否存在文件？

> ID：14834327
> 
> 赞同：-1
> 
> 时间：2013-02-12T14:02:26.843
> 
> 标签：perl, batch-file, clearcase

我需要检查 ccperl 中是否存在文件。

我尝试使用“如果存在”，但它没有用。

我知道有时我们在命令的开头和结尾使用“'”，但还有其他方法吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T14:07:25.923

您可能想要的是`-f 'myfile'`，如果名称对应于文件，则返回 true 。

有[许多这样的测试](http://perldoc.perl.org/functions/-X.html)，您可以使用它`-e`来检查名称是否存在，但它可以是文件或目录（或者可能是 Unix 上的链接或管道）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T14:25:56.477

关于[ccperl（或 ratpl）](http://www-01.ibm.com/support/docview.wss?uid=swg21245227)，请检查使用的 perl 版本（对于旧的 ClearCase 版本，它仍然是 5.8.6）。
这可能会影响使用某些经过测试的文件`-f`，正如[该线程从带有尾随空格的文件中说明的](http://www.nntp.perl.org/group/perl.beginners/2007/10/msg96549.html)那样。

[您可以在此处查看 ClearCase ccperl 脚本](http://www.ibm.com/developerworks/forums/thread.jspa?threadID=41198)的示例：

```
if ( $n_file != 0 ) {
  while ( $file_name = shift(@file_list) )
  {
    if ( ! -f $vob_path.$dir_part.'/'.$file_name ) {
      print "not found $vob_path".$dir_part.'/'."$file_name \n";
    } else {
      $size1 = &file_size($file_name);
      $size2 = &file_size($vob_path.$dir_part.'/'.$file_name);
      if ( $size1 != $size2 ) {
        print "Err file $dir_part $file_name $size1 $size2\n";
      }
    }
  }
} 
```

（它也会测试目录，下面几行，带有`-d`选项）

# php - 在 foreach 中循环直到找到第一个匹配的元素

> ID：14834331
> 
> 赞同：0
> 
> 时间：2013-02-12T14:02:43.147
> 
> 标签：php, file, foreach, directory, glob

首先为模糊的问题标题道歉。我想不出一个有意义的标题。

我正在使用以下方法遍历目录中的图像文件：

```
$folder = 'frames/*';
foreach(glob($folder) as $file)
{

} 
```

### 要求

我想测量每个文件的大小，如果它的大小小于然后`8kb`，移动到下一个文件并检查它的大小，直到你得到大小大于的文件`8kb`。现在我正在使用

```
$size = filesize($file);
if($size<8192) // less than 8kb file
{
    // this is where I need to keep moving until I find the first file that is greater than 8kb
   // then perform some actions with that file
}
// continue looping again to find another instance of file less than 8kb 
```

我看了看，`next()`但`current()`无法想出我正在寻找的解决方案。

所以对于这样的结果：

```
File 1=> 12kb
File 2=> 15kb
File 3=> 7kb // <-- Found a less than 8kb file, check next one
File 4=> 7kb // <-- Again a less than 8kb, check next one
File 5=> 7kb // <-- Damn! a less than 8kb again..move to next
File 6=> 13kb // <-- Aha! capture this file
File 7=> 12kb
File 8=> 14kb
File 9=> 7kb
File 10=> 7kb
File 11=> 17kb // <-- capture this file again
.
.
and so on 
```

### 更新

我正在使用的完整代码

```
$folder = 'frames/*';
$prev = false;
foreach(glob($folder) as $file)
{
    $size = filesize($file);    
    if($size<=8192)
    {
       $prev = true;
    }

    if($size=>8192 && $prev == true)
    {
       $prev = false;
       echo $file.'<br />'; // wrong files being printed out    
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T14:04:56.423

您需要做的是保留一个变量，指示先前分析的文件是小文件还是大文件，并做出相应的反应。

像这样的东西：

```
$folder = 'frames/*';
$prevSmall = false; // use this to check if previous file was small
foreach(glob($folder) as $file)
{
    $size = filesize($file);
    if ($size <= 8192) {
        $prevSmall = true; // remember that this one was small
    }

    // if file is big enough AND previous was a small one we do something
    if($size>8192 && true == $prevSmall)
    {
        $prevSmall = false; // we handle a big one, we reset the variable
        // Do something with this file
    }
} 
```

# c# - 如何为 ASP 中继器中的名称列表创建大写字母行

> ID：14834335
> 
> 赞同：3
> 
> 时间：2013-02-12T14:03:00.373
> 
> 标签：c#, asp.net

![在此处输入图像描述](../Images/365b71557ae5e9e47153624b1721cf24.png)

我正在使用 asp 转发器来显示名称列表，并且我想将当前字母显示为一种分组标题，就像在索引页面中一样。

数据在绑定之前按字母顺序排序，但我发现在显示名称之前很难插入“A”和“B”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T14:04:48.740

在绑定之前进行排序。

即绑定排序后的结果集。

然而，如果没有看到你所拥有的价值观，就不可能确切地知道如何做到这一点。

* * *

更新-根据您的[评论](https://stackoverflow.com/questions/14834335/how-to-sort-in-asp-repeater/14834366#comment20785324_14834366)，我会说您需要将绑定源更改为类似`Dictionary<string,IList<string>>`.

使用这样的结构，您可以通过键（排序）和子列表（二级排序）进行绑定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T17:36:16.653

将 Panel 控件添加到您的 ItemTemplate，并将可见性设置为 False。当您绑定中继器时（假设您正在订阅`ItemDataBound`事件），运行检查以查看第一个字母是否已更改。如果有，请将面板的可见性设置为 true 并打印出该字母。

如果您需要一些示例代码，请告诉我。

**编辑：示例代码**

为清楚起见，“AlphaHeaders”就是我们要显示的“A”、“B”、“C”字母

**aspx 代码**

中继器将如下所示：

```
<table>
    <asp:Repeater id="rptRepeater" runat="server" OnItemDataBound="rptNames_OnItemDataBound">
        <ItemTemplate>
            <asp:Panel id="pnlAlphaHeader" runat="server" visible="False">
               <tr><td><asp:Label id="lblAlphaHeader" runat="server" /></td></tr>
            </asp:Panel>
            <tr><td><asp:Label id="lblName" runat="server" /></td></tr>
        </ItemTemplate>
    </asp:Repeater>
</table> 
```

**aspx.cs 代码**

首先，您需要一个保存当前 AlphaHeader 的变量：

```
private string _AlphaHeaderCurrent = String.Empty; 
```

然后，您将对转发器的`OnItemDataBound`事件进行处理：

```
protected void rptNames_OnItemDataBound(object sender, System.Web.UI.WebControls.RepeaterItemEventArgs e)
{
   if ((e.ItemType==ListItemType.Item) || (e.ItemType==ListItemType.AlternatingItem)) {
      string name = e.Item.DataItem("Name").ToString();
      //check if the first letter of the current name is new. If it is new, we print out the header
      if(!name.StartsWith(this._AlphaHeaderCurrent)) {
         this._AlphaHeaderCurrent = name.SubString(1);                               
         ((Panel)e.ItemFindControl("pnlAlphaHeader")).Visible = true;
         ((Label)e.Item.FindControl("lblAlphaHeader")).Text = the._AlphaHeader;
      }
      ((Label)e.Item.FindControl("lblName")).Text = name;          
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T14:05:42.390

在将数据绑定到中继器之前，您需要对数据进行排序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T14:14:52.307

您可以使用嵌套中继器（中继器内的中继器）。像类别和子类别。在第一个中继器中，您可以列出所有名称并以 A 开头。然后在子中继器中，您可以显示所有名称。您还将使用 itemdatabound 事件绑定第二个中继器。

```
<asp:Repeater id="rptFirstLetters" runat="server" OnItemDataBound="rptChars_OnItemDataBound">
<ItemTemplate>
    <div>"<%#Eval("letters") %>"
        <asp:Repeater id="rptNames" runat="server">
            <ItemTemplate>
                <%#Eval("names") %>
            </ItemTemplate>
        </asp:Repeater>         
    </div> // bind all letters
</ItemTemplate> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-12T17:38:08.817

老实说，这并不是一个很好的方法，中继器通常会导致我发现的丑陋代码。如果可以设置，来自 kad1r 的分层方法可能是最好的，但也有其他选择，具体取决于您的实现细节；我在某些方面更喜欢这个，因为它可以保持标记非常干净，而且我有一个非程序员设计人员，这对我来说是一个加分项。

ASPX：

```
<%@ Page language="C#" Src="test.CODE.cs" Inherits="test_Page" %>
<asp:Repeater ID="TestRepeater" runat="server">
    <ItemTemplate>
        <asp:PlaceHolder Visible='<%# Eval("IsFirstInGroup") %>' runat="server">
            <strong><%# Eval("Initial") %></strong><br/>
        </asp:PlaceHolder>
        <%# Eval("Name") %><br/>
    </ItemTemplate>
</asp:Repeater> 
```

代码背后：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

public class test_Page : Page
{
        protected Repeater TestRepeater;

        protected override void OnInit(EventArgs e)
        {
                base.OnInit(e);

                String[] names = new String[] 
                {        
                        "Alpha, John",
                        "Altman, Mary", 
                        "Asher, Cyril",
                        "Bachman, Turner",
                        "Beta, Rob",
                        "Bexman, Norah",
                        "Clark, Freddy"
                };

                List<_DispItem> l = new List<_DispItem>();

                for (int i = 0; i < names.Length; i++)
                        l.Add(new _DispItem() { Name = names[i], IsFirstInGroup = (i == 0 || names[i - 1][0] != names[i][0]) });

                TestRepeater.DataSource = l;
                TestRepeater.DataBind();
        }

        private class _DispItem
        {
                public String Name { get; set; }
                public String Initial { get { return Name.Substring(0, 1); } }
                public bool IsFirstInGroup { get; set; }
        }
} 
```

# java - 如何在连续的for循环之间传递变量值？

> ID：14834336
> 
> 赞同：0
> 
> 时间：2013-02-12T14:03:01.050
> 
> 标签：java, variables, for-loop

我有两个连续的 for 循环，我需要将其中一个变量的值传递给另一个 for 循环内的实例。

```
for(int x=0; x< sentence.length(); x++)  {

  int i;
  if (!Character.isWhitespace(sentence.charAt(x)))
      i = x ;
      break;    
}

for (int  i  ; i < sentence.length(); i++) {
  if (Character.isWhitespace(sentence.charAt(i)))
     if (!Character.isWhitespace(sentence.charAt(i + 1)))
} 
```

这只是我程序的一部分，我的目的是将 x 的值（从第一个 for 循环）分配给 i 变量（从第二个 for 循环），这样我就不会从 0 开始，而是从 x 的值开始（在中断之前第一个 for 循环）...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:12:35.523

它看起来像 Java，是吗？

您必须在循环块之外声明“i”变量。顺便说一句，如果“i”不是循环计数器，则为这个变量赋予一个有意义的名称（并且 x 与循环计数器无关），这是一个很好的做法。

此外，您可能有一个错误，因为中断超出了条件表达式块（第一个循环）。

```
int currentCharPosition = 0; //give a maningful name to your variable (keep i for loop counter)

for(int i=0; i< sentence.length(); i++) {

            if (!Character.isWhitespace(sentence.charAt(x))){  
                currentCharPosition  = x ;
                break;  //put the break in the if block
            }

}

while( currentCharPosition < sentence.length()) {
            ...
            currentCharPosition++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T14:12:33.843

您需要了解 Java 块作用域：

*   [http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html)

像这样在for循环之外声明你的变量

```
// Declare what you want to access outside here.
...
for(int x = 0; x< sentence.length(); x++)  { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T14:13:47.150

```
int x;
for(x = 0; x < sentence.length; x++)
   if(!Character.isWhitespace(sentence.charAt(x)))
      break;

for(int i = x; i < //And so on and so fourth 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T14:28:26.787

```
int sentenceLength = sentence.length();
int[] firstLoopData = new int[sentenceLength -1];
for(int x=0, index=0; x < sentenceLength; x++)  {
    if (!Character.isWhitespace(sentence.charAt(x))){
        firstLoopData[index] = x;
        index++; 
        break; 
    }   
}

for(int tempInt: firstLoopData){
    //your code...
} 
```

# python - scrapy xpath 异常

> ID：14834338
> 
> 赞同：0
> 
> 时间：2013-02-12T14:03:05.023
> 
> 标签：python, xpath, scrapy

```
 self.product_urls.extend(hxs.select("//div[@id="product-list"]//div[@class="product-images"]/table/tr[1]//a')").extract()) 
```

这行代码给了我一个异常“无效路径”，我猜“产品列表”有问题我怎样才能写相同的@id而不会出现错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T14:10:41.317

问题在于额外的括号，这是正确的语法。

```
self.product_urls.extend(hxs.select('//div[@id="product-list"]//div[@class="product-images"]/table/tr[1]//a').extract()) 
```

google 应该是你最好的朋友解决这类问题，你还需要学习 Xpath/python 基础知识

# user-interface - 向用户提供有关我的程序运行状态的一些信息

> ID：14834339
> 
> 赞同：1
> 
> 时间：2013-02-12T14:03:04.593
> 
> 标签：user-interface, racket

我为我的 Racket 批处理数据处理程序制作了一个简单的 GUI，它接受用户指定的输入文件并写入用户指定的输出文件。一旦用户指定了这些文件，他们所要做的就是单击“运行”按钮。该程序可以运行，但 GUI 在运行批处理逻辑时变得无响应。由于可能需要很长时间才能完成，所以我想向用户保证它没有崩溃。我怎样才能避免这种反应迟钝（至少冻结窗口部分）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:49:39.943

在线程中运行批处理。

请参阅[线程上的球拍文档](http://docs.racket-lang.org/reference/threads.html?q=thread#%28def._%28%28quote._~23~25kernel%29._thread%29%29)

# com - LoadRunner COM/DCOM 和 Trapping Sub

> ID：14834347
> 
> 赞同：0
> 
> 时间：2013-02-12T14:03:25.730
> 
> 标签：com, loadrunner

当我第一次在我的应用程序上使用协议顾问时，我建议使用 COM/DCOM 协议来记录 LoadRunnser VUser 脚本。我正在这样做，但是当开始录制时，我收到一条弹出消息：

“捕获子进程” “您必须是管理员才能录制子进程，只录制主进程”

这说明什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T15:07:23.393

除非您可以访问正在录制的应用程序的完整源代码，并且可以访问应用程序的开发人员来帮助您设置 COM/DCOM 过滤器，否则您应该避免它，就好像它是埃博拉病毒感染的腺鼠疫一样。切勿在无法访问源代码的商业应用程序（例如浏览器）上使用它。

此外，您的错误消息指出您对主机的权利存在潜在问题。安装要求指出，管理访问权限是使用 LoadRunner 工具的推荐模型。如上所述的错误消息似乎暗示您可能没有对主机的管理访问权限。

# unix - 跟踪我的路径是如何设置的

> ID：14834349
> 
> 赞同：0
> 
> 时间：2013-02-12T14:03:27.507
> 
> 标签：unix, path, csh

有没有办法（在 UNIX 中）跟踪 my`$PATH`的设置方式？

我的路径中有一个我不想要的条目，但我找不到将其永久删除的来源。我正在运行 Solaris 10 和 CSH。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T14:29:41.300

它设置在`/home/<your_user>/.profile`或中`/home/<your_user>/.bash_profile`。

检查它做

```
grep -l PATH /home/<your_user>/.* 2>/dev/null 
```

这将指向定义此变量的 .files。

# asp.net - ASP.NET MVC 3 caching or not caching action strategy

> ID：14834351
> 
> 赞同：0
> 
> 时间：2013-02-12T14:03:44.887
> 
> 标签：asp.net, asp.net-mvc, caching

I have an action, let's say /Foo/Bar with a GET parameter in this action, get_cached, who define if we want to get the cached value or the "realtime".

This is made with the following code :

```
public ActionResult Bar()
{
    var useCache = Request.Params["get_cached"] == "1" ? true : false;

    if (useCache)
    {
        return RedirectToAction("BarCached");
    }
    else
    {
        return RedirectToAction("BarRealTime");
    }
}

[OutputCache(Duration = 100, VaryByParam = "*")]
public ActionResult BarCached()
{
    return Content("mystuff_cached");
}
public ActionResult BarRealTime()
{
    return Content("mystuff_realtime");
} 
```

No problem with this code, apart the url will be shown as *BarCached* or *BarRealTime* and i would get only Bar (the main action name).

I tried to change the RedirectToAction to the full method name like this :

```
return this.BarCached() 
```

But this disable the cache capabilities !

So, how can render the ActionResult code from a method (render BarCached from Bar) using the OutputCache definitions on this method (OutputCache on BarCached) ?

Thanks by advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T18:57:58.323

在 asp.net[管道](http://msdn.microsoft.com/en-us/library/system.web.httpapplication%28v=VS.100%29.aspx#Y6257)中，ResolveRequestCache（OutputCache 所依赖的）在请求通过身份验证后发生。在上面的示例中，当您到达“Bar”时，使用输出缓存为时已晚，正如您所说的那样，`this.BarCached()`它无法识别缓存属性。

如果您的问题是任何 generate 的性能`"mystuff_"`，您能否不只是将该调用的结果保存到应用程序缓存并在您的`Bar()`方法而不是`RedirectToAction`对象中返回它？

我知道的解决方案不多，但希望同样有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T13:23:17.660

我结束了使用作为`System.Web.Caching`asp.net MVC 的基本缓存处理程序的命名空间。我可以访问 Asp.NET MVC 的缓存存储库`System.Web.HttpContext.Current.Cache`

使用它，我存储“BarCached”的 ActionResult，然后我可以使用类似这样的方式以我想要的方式获取缓存功能：

向缓存中添加值

```
System.Web.HttpContext.Current.Cache.Insert(
                    "mykey",
                    "myvalue",
                    null,
                    DateTime.Now.AddSeconds(expirationInSeconds),
                    System.Web.Caching.Cache.NoSlidingExpiration
                ); 
```

并从缓存中获取价值

```
var myvalue = System.Web.HttpContext.Current.Cache.Get("mykey") 
```

# opera-extension - Opera 扩展：选择文本和页面菜单

> ID：14834353
> 
> 赞同：0
> 
> 时间：2013-02-12T14:03:51.537
> 
> 标签：opera-extension

创建具有此类功能的 Opera 插件的最简单方法是什么：用户选择页面上的文本（例如**menu**），单击右键并看到：

![上下文菜单](../Images/70ba9e5eea6e33063657c102c17d3938.png)

?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-08T20:27:32.180

您应该使用[上下文菜单扩展 API](http://dev.opera.com/extension-docs/contextMenus.html)。

# iphone - Storyboard Device-Specific Resources

> ID：14834361
> 
> 赞同：0
> 
> 时间：2013-02-12T14:04:32.980
> 
> 标签：iphone, ios, ipad, storyboard, uistoryboard

I have two storyboards named `HomeView~iphone.storyboard` and `HomeView~ipad.storyboard`. Both storyboards have an `initialViewController` in the storyboard file.

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"HomeView"
                                                     bundle:nil];
UIViewController *controller = [storyboard instantiateInitialViewController]; 
```

I get the following error when I try to access the `instantiateInitialViewController`.

> Could not find a storyboard named `HomeView` in bundle `NSBundle - NSInvalidArgumentException`

Do you have any Idea? The apple [documentation](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/LoadingResources/Introduction/Introduction.html#//apple_ref/doc/uid/10000051i-CH1-SW2) says ~iphone and ~ipad is supported for any file in the bundle.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T14:49:51.337

您是否尝试过`HomeView.storyboard`用于 iPhone 和`HomeView~ipad.storyboard`iPad？

# javascript - jquery移动滑动功能

> ID：14834364
> 
> 赞同：0
> 
> 时间：2013-02-12T14:04:41.650
> 
> 标签：javascript, jquery, ios, jquery-mobile

我在 ipad 的网络应用程序上设置了滑动功能，这样一旦用户用手指向右滑动，它就会将他们带到他们访问的最后一页。那个javascript看起来像这样

```
 <script>
$(document).bind('swiperight', function () {
        history.back();
    });</script> 
```

现在考虑到这一点，如果我想让函数更精确，以便它更改为特定页面，我会合并 JQM 更改页面功能吗？

```
 <script>
$(document).bind('swiperight', function () {
       $.mobile.changePage( "#home", { transition: "slide"} );
    });</script> 
```

我将把 data-direction="reverse" 的属性放在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:07:52.850

它应该如下所示：

```
$(document).bind('swiperight', function () {
    $.mobile.changePage("#home", {
        transition: "slide",
        reverse: true
    });
}); 
```

# ios - iOS 版 MapQuest。MQMapKit - MQMapView - MQRoute 自定义注释视图（图像）

> ID：14834369
> 
> 赞同：0
> 
> 时间：2013-02-12T14:05:02.203
> 
> 标签：ios, mapquest

是否存在自定义 MQRoute 外观的方法？特别是我对自定义表示路线起点和终点的注释感兴趣。

作为调用`[MQRoute getRouteWithStartCoordinate:endCoordinate:]`地图的结果显示橙色路线和两个指示起点和终点的紫色气球。如何替换这些气球的图像？如何更改线条颜色、样式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T09:05:14.533

到目前为止，我找到了关于 MQRoute 定制的下一个答案：

> 要创建自定义路线，您可以直接调用 Directions Web 服务并根据需要创建叠加层和标记。为您创建路由的包装器执行基本路由，但不能很好地处理自定义。

# vb.net - VB.Net 字符串比较和通配符值

> ID：14834380
> 
> 赞同：0
> 
> 时间：2013-02-12T14:05:25.180
> 
> 标签：vb.net, wildcard, string-comparison

是否可以进行字符串比较，其中我要比较的字符串之一具有通配符并且通常仅用于格式化目的。例如

```
Dim correctFormat as String = "##-##-###-##"
Dim stringToCheck = someClass.SomeFunctionThatReturnsAStringToCheck
If FormatOf(CorrectFormat) = FormatOF(StringToCheck) then
 Else
End if 
```

我知道组成的 FormatOf 语法，但我只是用它来显示我在问什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T14:18:34.310

不需要正则表达式。

您可以简单地使用[`Like`](http://msdn.microsoft.com/en-us/library/swf8kaxw.aspx)支持`?`,`*`和`#`作为通配符以及字符列表 ( `[...]`, `[!...]`)的运算符

因此，您只需将代码更改为：

```
If stringToCheck Like correctFormat Then 
```

它会按预期工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T14:06:37.213

方法是使用[正则表达式](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.aspx)——这就是它们的用途。

这是与您发布的格式匹配的正则表达式：

```
^\d{2}-\d{2}-\d{3}-\d{2}$ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T14:16:57.563

正如上一篇文章所提到的，您应该为此目的使用正则表达式 - 它们更适合该任务。可悲的是，学习它们可能会令人困惑，尤其是发现错误可能真的很烦人。我真的很喜欢[http://www.regular-expressions.info/](http://www.regular-expressions.info/)和[http://regexpal.com/](http://regexpal.com/)之前构建和测试正则表达式。

在 VB.net 中使用类似 reg.ismatch

# php - 编辑数据如何工作？

> ID：14834383
> 
> 赞同：0
> 
> 时间：2013-02-12T14:05:31.370
> 
> 标签：php, jqgrid

JqG​​rid 文档说明了有关 postData 的以下内容：

> 用于向发布到服务器的数据添加内容的数组

就是这样。因此，我使用 postData 将变量发送到我的 PHP，以便我可以使用 switch case 来调用我想要的函数。

这允许我拥有一个包含项目所有功能的 PHP 页面。我想做同样的事情，`editData`所以我不需要为与项目关联的每个内联编辑功能创建一个 PHP 页面。

但是，`editData`似乎没有传递到 PHP 页面。我尝试将 POSTed 变量打印到文件中，但它们是空的。建议？

注意：我知道这个`editData`错误，但这应该由我正在使用的版本 4.4.4 修复

```
$("#list").jqGrid({
    url:'functions.php',
    datatype:'xml',
    mtype:'POST',           
    postData: { 
        action:'popGrid', 
        sqlCount:sqlCount, 
        sqlSelect:sqlSelect, 
        sqlSelect2:sqlSelect2, 
        label1:label1, 
        label2:label2,
    },
    colNames:['Label','Account_Num','Amount', 'Type Code', 'Record Code',    'Sequence'],
    colModel :[
        {name:'label', index:'label', width:150, align:'center', sortable:false, editable:true},
        {name:'cntrct_id', index:'cntrct_id', width:150, align:'center', sortable:true},
        {name:'amount', index:'amount', width:150, align:'center', sortable:false, editable:true},
        {name:'type_cd', index:'type_cd', width:150, align:'center', sortable:false, editable:true},
        {name:'rec_cd', index:'rec_cd', width:150, align:'center', sortable:false},
        {name:'db_seq', index:'db_seq', width:150, align:'center', sortable:false},
    ],
    editurl: 'functions.php',
    extraparam: { action: function(){ return 'grdAdjust'; } },
    onSelectRow: function(id) {
        if(id && id!==lastSel) {
            jQuery('#list').restoreRow(lastSel);
            jQuery('#list').editRow(id,true);
            lastSel=id;
        }
    },

    pager: '#pager',
    rowNum:100,
    rowList:[100,200,300,400,500,600,700,800,900,1000],
    sortname: 'cntrct_id',
    sortorder: 'desc',
    viewrecords: true,
    caption: 'Adjustments'
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:53:03.387

该选项`editData`在[表单编辑](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:form_editing#properties)中的作用与`postData`在主网格中的作用相同。另一方面，您在问题文本中写了有关“内联编辑”的内容。在这种情况下，您应该改用`extraparam`选项（请参阅[文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:inline_editing#saverow)）。如果您需要*常用*的内联编辑选项，那么使用默认设置`$.jgrid.inlineEdit`可能对您有所帮助。您没有发布任何代码，我不确定您使用哪种编辑模式和方式，因此我无法提供更多使用示例`editData`等`extraparam`。

**更新**：您`extraparam`现在以错误的方式使用。`extraparam`不是**jqGrid**选项，它是`editRow`. 正确的用法可能是关于以下内容：

```
onSelectRow: function (id) {
    if (id && id !== lastSel){
        $(this).jqGrid("restoreRow", lastSel);
        $(this).jqGrid("editRow", id, {
            keys: true,
            extraparam: {
                action: function () {
                    return 'grdAdjust';
                }
            }
        });
        lastSel = id;
    }
} 
```

如果您需要后常量值，`action`可以使用简化形式`extraparam`：like `extraparam: {action: 'grdAdjust'}`。如果您需要从页面返回某个变量或某个元素的值，这些值将在不同的`editRow`.

此外，我建议您包括`gridview: true`jqGrid 选项并简化`colModel`您使用的选项。如果具有与您可以发出`index`的相同的值。`name`的默认值`width`已经是 150，所以你也不需要指定`width:150`。如果您想在所有或大多数列中使用，您可以通过在网格中包含选项`align:'center'`来更改网格的默认值。因为大多数列都有您也可以在其中包含设置。结果，您可以减少到以下内容：`align``cmTemplate: {align:'center'}``sortable: false``cmTemplate``colModel`

```
colModel: [
    {name: 'label', editable: true},
    {name: 'cntrct_id', sortable: true},
    {name: 'amount', editable: true},
    {name: 'type_cd', editable: true},
    {name: 'rec_cd'},
    {name: 'db_seq'},
],
cmTemplate: {align: 'center', sortable: false}, 
```

这样的改变不仅简化了代码的阅读，也简化了维护。有关列模板的更多信息，请参见[此处。](https://stackoverflow.com/a/6047856/315935)

# kendo-ui - 在 Javascript 中将布局设置为视图

> ID：14834390
> 
> 赞同：1
> 
> 时间：2013-02-12T14:05:44.083
> 
> 标签：kendo-ui

我有这种情况：

我有一些视图，默认情况下他们为它们分配了一个布局。问题是在某些特定情况下，我需要在 Javascript 文件中更改其中一些视图的布局。

我正在使用这种方式：

$("#tabstrip-dash").setAttribute('data-layout', 'mobile-tabstrip-layout2');

此解决方案仅在我重新加载应用程序时才有效，但我想立即更改它。

有没有办法设置新的布局？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-23T01:01:40.153

看起来答案可能是这样的：

```
app.navigate("#someId") 
```

我从这里得到了这个信息：[http ://www.kendoui.c​​om/forums/mobile/general-discussions/how-to-switch-views-programatically.aspx](http://www.kendoui.com/forums/mobile/general-discussions/how-to-switch-views-programatically.aspx)

请注意，在测试中我得到了这个工作，但在我的主要项目中我*没有*。我看到错误“Uncaught TypeError: Cannot read property 'length' of undefined”。不完全确定发生了什么，但还有其他报告（以防其他人发生这种情况）。

# jpanel - 如何从 JPanel 清除图像？

> ID：14834395
> 
> 赞同：1
> 
> 时间：2013-02-12T14:06:19.207
> 
> 标签：jpanel

我`JFileChooser`用来浏览图像到我的`JPanel`. 当我想浏览第二张图片时，第一张图片还在！

`JPanel`实际上，我想知道，当我浏览第二张图片时，如何清除第一张图片？

注意：我已经使用了`JPanel.repaint()`and `JPanel.revalidate()`，但是它们没有用。

# java - java Calendar get(calendar.MONTH) 返回 0

> ID：14834396
> 
> 赞同：1
> 
> 时间：2013-02-12T14:06:30.313
> 
> 标签：java

为什么 calendar.get(calendar.MONTH) 在这里返回 0（零）：？

```
Date date = new SimpleDateFormat("yyyy-mm-dd").parse("2013-02-12");

Calendar calendar = Calendar.getInstance();

calendar.setTime(date);

System.out.println( calendar.get(calendar.MONTH) ); // 0 ?? 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T14:07:34.083

`MM`月和`mm`分钟。使用格式 - `yyyy-MM-dd`，您将获得所需的输出，即`1`.

```
Date date = new SimpleDateFormat("yyyy-MM-dd").parse("2013-02-12"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T14:07:36.737

明白了。。对不起。。

答案：因为我使用“mm”而不是“MM”

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-12T14:07:38.730

`new SimpleDateFormat("yyyy-mm-dd")`应该`new SimpleDateFormat("yyyy-MM-dd")`

# git - 我可以更改分叉存储库的目录结构，但仍然需要新的更改吗？

> ID：14834399
> 
> 赞同：0
> 
> 时间：2013-02-12T14:06:36.983
> 
> 标签：git, github, repository

我想更改我在 github 上创建的存储库的目录结构。我的意思是，我将移动现有目录，创建新目录并移动文件。

之后，我希望仍然能够从每个文件的原始存储库中提取更新。这可能吗？如果是：如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T19:42:15.253

是的，这是可能的。只需移动您的文件。我建议创建一个只进行移动的提交。之后你可以简单地拉 - git 会自己弄清楚要做什么。

# opencl - 如何使用 2 个 OpenCL 运行时

> ID：14834403
> 
> 赞同：7
> 
> 时间：2013-02-12T14:06:46.223
> 
> 标签：opencl

我想在一个系统中一起使用 2 个 OpenCL 运行时（在我的情况下是 AMD 和 Nvidia，但问题很笼统）。

我知道我可以使用任何 SDK 编译我的程序。但是在运行程序的时候，我需要提供libOpenCL.so。如何提供两个运行时的库，以便在我的 OpenCL 程序中看到 3 个设备（AMD CPU、AMD GPU、Nvidia GPU）？

我知道它一定是可能的，但我还没有找到关于如何为 linux 做的描述。

非常感谢，托马斯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T14:21:58.240

你想的不对。SDK 不是由应用程序提供的，*也不需要*运行已编译的程序。OpenCL**运行时**由客户端系统提供，这就是让您的程序平台和设备在`clGetPlatformIDs`和`clGetDeviceIDs`.

如果用户没有 Nvidia 显卡，您将*无法*在他的系统上使用 Nvidia 平台和设备，因为他没有 Nvidia OpenCL 运行时或硬件。

所有不同的 OpenCL SDK 都为您提供特定于供应商的扩展，然后供应商运行时即可理解这些扩展。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-16T17:48:34.343

Khronos OpenCL 工作组定义了一个 ICD 层（可安装的客户端驱动程序），它允许在系统上安装多个供应商驱动程序。应用程序通过 ICD 层访问供应商驱动程序。有关更多详细信息，请参阅[cl_khr_icd.txt](http://www.khronos.org/registry/cl/extensions/khr/cl_khr_icd.txt)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-17T02:41:01.167

史密斯和托马斯的答案是正确的；这只是对该信息的扩展：当您枚举 OpenCL 平台时，您会为每个安装的驱动程序获得一个。在每个平台中，您都枚举了设备。AMD 和 Intel 驱动程序也暴露了 CPU 设备。因此，在完全填充的机器上，您可能会看到一个 AMD 平台（带有 CPU 和 GPU 设备）、一个 NVIDIA 平台（带有 GPU 设备）和一个 Intel 平台（带有 CPU 和 GPU 设备）。您的代码会在您想要使用的任何设备上创建一个上下文，并创建一个或多个命令队列来为它们工作。您可以让他们都忙于工作，但您只能在同一平台的设备之间共享数据缓冲区。要跨平台共享数据，它必须在两者之间使用 CPU 内存。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-09T19:46:02.523

关于同时在多个 OpenCL 设备上运行。如果您想在多个设备上运行，请为每个设备/供应商创建一个单独的上下文，并在单独的线程中运行每个。例如，我有一个 GTX 590。这显示为两个 GTX 590 设备。我也有英特尔 i7 处理器。我创建了三个上下文：两个用于 590 设备，一个用于 CPU，并使用 SDL_CreateThread 在三个线程中运行每个上下文/设备（pthreads 也很好用）。如果您想获得好的结果，您必须根据每个设备的“速度”来衡量每个设备的作业数量。例如，每个 GTX 590 为 45%，CPU 为 10%。使用的最佳权重取决于应用程序。

# objective-c - 非矩形“可点击”区域

> ID：14834415
> 
> 赞同：1
> 
> 时间：2013-02-12T14:07:18.630
> 
> 标签：objective-c, xcode

我有一张包含许多不同形状建筑物的 3D 地图。我希望用户单击地图上的建筑物，这将充当新视图的转场。

我计划通过创建与建筑物形状相同的不可见按钮来解决此问题，然后将它们放置在 imageview（保存地图）的顶部。

在做了一些阅读之后，我发现创建自定义按钮并不像我想象的那么简单（我认为我将不得不做很多子类化和自定义，当我有 50 多个不同形状的按钮时，这似乎不合理制作），所以我想知道是否有另一种方法可以用来解决这个问题。

* * *

编辑：我现在应该补充一点，所有功能都可以正常工作，但我必须使用默认的矩形按钮，alpha 设置为 0.1。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T14:12:25.930

**编辑以改进数据模型**

为此，您将在背景中有一个带有地图图像的 UIView。您可以使用 UIImageView 或在 drawRect 中自己渲染图像来执行此操作。

然后，您将定义几个 CGPath 引用。通过执行这样的操作为每个建筑物创建一个...[如何从点数组创建 CGPathRef 点将](https://stackoverflow.com/questions/9309930/how-to-create-cgpathref-from-array-of-points)是每个建筑物的角。

现在以某种方式将这些路径存储在一个数组中。每个“可点击”建筑都需要一条路径。

我会将路径存储在 Building 对象或其他东西中......

```
@interface Building : NSObject

@property (nonatomic) CGPath path;

@end 
```

现在在您覆盖的 UIView 子类中`- (void)touchesBegan...`。然后，您可以获取接触点并遍历您的路径以找到被触摸的那个...

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches anyObject];

    CGPoint touchPoint = [touch locationInView:self];

    for (Building *building in self.buildings) {
        if (CGPathContainsPoint(building.path, CGAffineTransformIdentity, touchPoint, YES)) {
            //the touch was inside this building!
            //now do something with this knowledge.
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T15:03:41.260

我曾经实现过一个meteo 应用程序。我们做了一张地图——有几个可点击的区域。定义这些非矩形区域的最简单方法是将它们定义为`UIBezierPath`，并使用`UITapGestureRecognizer` UIBezierPath 使用 CGPath，但它是纯 Objective-C。CGPath 的其他优势，您可以轻松地填充/描边这些路径 - 使用随机颜色 - 在调试时可以很好地看到它们

所以

```
//in you .h, or in class extension

//an array of UIBezierPath you create
// each bezierPath represent an area.
@property (nonatomic, strong) NSArray *myShapes;

//in your .m

- (void)viewDidLoad
{
    [super viewDidLoad];
    //load stuff
    UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTap:)];
    [self.view addGesture:tap];

    // ...
}

- (void)handleTap:(UITapGestureRecognizer *)tap
{
    UIBezierPath *recognizedArea = nil;
    //if your shapes are defined in self.view coordinates : 
    CGPoint hitPoint = [tap locationInView:self.view];
    for(UIBezierPath *regionPath in self.myShapes){
        if([regionPath containsPoint:tap]){
            recognizedArea = regionPath;
            break;
        }
    }
    //handle touch for THIS specific area when recognizedArea isn't nil
    if(recognizedArea){
        //YOUR CODE HERE
    }
    // you might also iterate with a normal integer increment
    // and use the path index to retrieve region-specific-data from another array

} 
```

# iis - Clustered Web Servers Failing

> ID：14834416
> 
> 赞同：3
> 
> 时间：2013-02-12T14:07:19.927
> 
> 标签：iis, webserver, iis-7.5

I have three web servers running Windows Server 2008\. Two are clustered, the third a standalone server (two live, one test). They use shared configuration with the configuration file located on a central file server. Every so often one live web server will stop responding. The event log shows the following error.

```
The worker process for application pool 'My Website' encountered an error 'Configuration file is not well-formed XML
' trying to read configuration data from file '\\?\C:\inetpub\temp\apppools\My Website\My Website.config', line number '3'.  The data field contains the error code. 
```

The config file has the following data

```
<!-- ERROR: There's been an error reading or processing the applicationhost.config file.  Line number: 0  Error message: Cannot read configuration file
 --> 
```

There is nothing in the event viewer on the file server.

When I restart the web server everything works fine.

Any ideas?

## Edit

I have around 30 websites. 10 are true standalone websites running in their own application pools. The other 20 are old websites that just redirect all requests to a different URL (some on my server, some external), these share the same application pool.

One of the 10 "standalone" websites is running php. One is .NET 2.0\. One is classic asp with two virtual directories set up to run as a .NET 2.0 applications. The other 7 are running classic asp only.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-11-22T19:42:50.560

它已经很老了，但我来到这里是因为我今天遇到了这个问题，而且它似乎仍然存在。原因通常是 DFSR 特性，如果运行集群，这一特性尤其有效。有三种可能的解决方案。

*   更改注册表项以降低同步速度并避免文件锁定导致错误，如下所述： [https ://blogs.msdn.microsoft.com/asiatech/2013/12/01/you-may-experience- configuration-file-is-not-well-formed-xml-error-while-using-dfsr-to-synchronize-the-iis-configuration-files/](https://blogs.msdn.microsoft.com/asiatech/2013/12/01/you-may-experience-configuration-file-is-not-well-formed-xml-error-while-using-dfsr-to-synchronize-the-iis-configuration-files/)
*   安装 Microsoft 提供的修补程序。直接链接是[https://support.microsoft.com/de-de/hotfix/kbhotfix?kbnum=960412&kbln=en-US](https://support.microsoft.com/de-de/hotfix/kbhotfix?kbnum=960412&kbln=en-US)
*   正确配置您的 DFSR 环境并明确排除文件夹 *\inetpub\temp\apppools*（在 DFSR 复制 applicationHost.config 之后，WAS 无论如何都会重建文件）

尽管有修补程序，但我个人最喜欢第三个选项。

* * *

这个迟到的答案的目的是文档，因为其他人可能会来到这里，并且该页面在 Google 上的排名似乎很高。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T21:39:52.200

这是一个很长的镜头，但是...如果通过 netbios 访问该文件并且定期访问该文件，则您可能对文件服务器的打击太大，并且 Windows 认为您正在尝试进行 DOS 攻击，因此它开始拒绝请求。这也可能是由于防火墙在访问文件服务器时解释了这一点。

另外，从[这里](http://technet.microsoft.com/en-us/library/cc734988%28v=ws.10%29.aspx)检查一下iis用户的临时文件夹是否已满，问题可能不仅是文件服务器，还可能是临时存储配置文件失败。

你能分享一些你的服务器布局的卷信息吗？（# 应用程序池 / # 网站等）

编辑：

我假设您对此解决方法不感兴趣，特别是如果这意味着更改文件的位置:)

# iphone - Using CLGeocoder to find the nearest city

> ID：14834429
> 
> 赞同：2
> 
> 时间：2013-02-12T14:07:43.127
> 
> 标签：iphone, ios, mapkit, clgeocoder

So I've been looking at this for a while, and I can't seem to find a solution anywhere. I am trying to use `CLGeocoder` in an iOS app to find the nearest city to where the user long taps on the map. I have two main problems:

1.  Even if the user is very zoomed out, and the user taps on say New York (which is what they intend), because of how zoomed out the map is, `CLGeocoder` often returns a nearby city instead of the more obvious answer of New York. I can't work out how to set the "fuzziness" of the search to overcome this issue.
2.  In many instances the `City` field is null in the returned placemark object, most commonly in remote areas such as deserts or oceans. In this case, I would ideally want to find the nearest object that actually has `City` defined, but can't work out how to do this.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T14:11:05.980

通过使用获取您的位置的所有详细信息`CLGeocoder`

```
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation
{
    [currentLocation stopUpdatingLocation];

    CLLocation *myLocation = [[CLLocation alloc] initWithLatitude:latitudeValue longitude:longitudeValue];

    CLGeocoder * geoCoder = [[CLGeocoder alloc] init];

    [geoCoder reverseGeocodeLocation:myLocation completionHandler:^(NSArray *placemarks, NSError *error) {

        if(!error)
        {
            for (CLPlacemark * placemark in placemarks)
            {
                NSLog(@"placemark.ISOcountryCode %@",placemark.ISOcountryCode);
                NSLog(@"placemark.country %@",placemark.country);
                NSLog(@"placemark.postalCode %@",placemark.postalCode);
                NSLog(@"placemark.administrativeArea %@",placemark.administrativeArea);
                NSLog(@"placemark.locality %@",placemark.locality);
                NSLog(@"placemark.subLocality %@",placemark.subLocality);
                NSLog(@"placemark.subThoroughfare %@",placemark.subThoroughfare);

            }

        }
        else
        {
            NSLog(@"failed getting city: %@", [error description]);
        }

    }];

} 
```

# javascript - 外部 iframe 更改大小

> ID：14834432
> 
> 赞同：0
> 
> 时间：2013-02-12T14:07:57.423
> 
> 标签：javascript, html, css, iframe

请在[此处](http://tv.handball.lv/reportazas/)查看第一个视频（iframe）是否可以以某种方式更改宽度和高度，使其看起来像其他视频？

![在此处输入图像描述](../Images/348677b48ade31f26636e23d6907b799.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T14:37:48.013

重新定位 iframe 并隐藏其他部分的唯一方法。

将以下 CSS 添加到 iframe：

```
margin: -60px 0 0 -127px;
width: 500px;
height: 299px; 
```

并添加**溢出：隐藏；**到具有**latestPostOtherVideo**类的容器 div。

# sql - 带有 sql 子查询的 sql 查询

> ID：14834434
> 
> 赞同：0
> 
> 时间：2013-02-12T14:08:01.547
> 
> 标签：sql, sql-server-2008, tsql

大家好我已经编写了以下查询来组合3个表的结果（`tblQuestions,tblReplies,tblTechnology`并显示所需的结果如下

```
SELECT tech.DatePosted,
       tech.QuestionID,
       tech.TechnologyName,
       tblr3.TechID,
       tblr3.QuestionTitle,
       tblr3.UserName,
       tblr3.ReplyCount,
       tblr3.viewCount,
       tblr3.date,
       tblr3.RepliedName
FROM   (SELECT tblr1.DatePosted,
               tblr1.QuestionID,
               tblr2.TechID,
               tblr2.QuestionTitle,
               tblr2.UserName,
               tblr2.ReplyCount,
               tblr2.viewCount,
               tblr1.date,
               tblr1.RepliedName
        FROM   (SELECT tblq.DatePosted,
                       tblq.TechID,
                       tblq.QuestionID,
                       tblq.RepliedName,
                       tblq.QuestionTitle,
                       tblq.UserName,
                       tblq.ReplyCount,
                       tblq.viewCount,
                       tblq.date
                FROM   (SELECT q.DatePosted,
                               q.TechID,
                               q.QuestionID,
                               q.QuestionTitle,
                               q.UserName,
                               q.ReplyCount,
                               q.viewCount,
                               r.date,
                               r.UserName AS RepliedName
                        FROM   tblQuestions AS q, tblReplies AS r
                        WHERE  r.QuestionID = q.QuestionID
                               AND r.TechID = q.TechID
                               AND q.TechID = 1) AS tblq,
                                                 (SELECT   r.QuestionID,
                                                           max(r.date) AS PostedDate
                                                  FROM     tblReplies AS r
                                                  GROUP BY QuestionID) AS tblr
                WHERE  tblq.QuestionID = tblr.QuestionID
                       AND tblq.date = tblr.PostedDate) AS tblr1
               RIGHT OUTER JOIN
               (SELECT q.QuestionID,
                       q.TechID,
                       q.UserName,
                       q.viewCount,
                       q.ReplyCount,
                       q.QuestionTitle
                FROM   tblQuestions AS q
                WHERE  q.TechID = 1) AS tblr2
               ON tblr2.QuestionID = tblr1.QuestionID) AS tblr3
       LEFT OUTER JOIN
       (SELECT q.QuestionID,
               q.DatePosted,
               t.TechID,
               t.TechName AS TechnologyName
        FROM   tblTechnology AS t, tblQuestions AS q
        WHERE  q.TechID = t.TechID) AS tech
        ON tblr3.TechID = tech.TechID
           AND tblr3.QuestionID = tech.QuestionID
           AND tech.TechID = 1 
```

这给了我预期的以下结果，但`NULL`在一些数据存在的领域

![在此处输入图像描述](../Images/a5b7f4e467209db0373209596facc415.png)

代替`NULL`我需要提取一些存在于 中的数据`tblQuestions`，也可以减少查询。

来自 OP 评论：

我正在尝试提取 q`uestiontitle,username,questionid from tblquestions`以及基于来自的技术 ID`replycount and viewcount`为该问题发布的最新回复`QuestionID``tblreplys`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T14:50:34.873

您的查询基本上是这样的：

```
SELECT
    blah
FROM
    (
        (SELECT
            blah
        FROM
            Questions
            INNER JOIN Replies ON QuestionID AND TechID) tblr1
        RIGHT JOIN Questions tblr2 ON QuestionID
    ) tblr3
    LEFT JOIN Technologies ON tblr3.tblr1.QuestionID = Technologies.QuestionID 
```

我知道这不是一个有效的查询，但请耐心等待。`tblr1`包含`INNER JOIN`问题和答案之间。然而，由于没有问题的答案，`salary`这些记录是`NULL`针对`salary`问题的。然后`RIGHT JOIN`to Questions 介绍了该`salary`问题，并且该问题存在于`tblr3`结果集中，因为它是一个`RIGHT JOIN`即使`tblr1`对于该问题为空的问题。

then to 技术是`LEFT JOIN`基于inside which is really the from 。通过查看子查询的列列表，如果您更改为这将确保未回答的问题加入到表中`QuestionID``tblr3``QuestionID``tblr1``tblr3``tblr1.QuestionID``tblr2.QuestionID``Technology`

编辑：我认为以下查询将为您提供结果并且更简单：

```
WITH LatestReplies AS
(
  SELECT
    ReplyID,
    QuestionID,
    ReplyDate,
    UserName,
    Reply
  FROM
    (SELECT
      ReplyID,
      QuestionID,
      ReplyDate,
      UserName,
      Reply,
      ROW_NUMBER() OVER (PARTITION BY QuestionID ORDER BY ReplyDate DESC) ReplyOrder
    FROM
      tblReplies) A
  WHERE
    ReplyOrder = 1
)
SELECT
  tblQuestions.DatePosted,
  tblQuestions.QuestionID,
  tblTechnology.TechnologyName,
  tblQuestions.TechID,
  tblQuestions.QuestionTitle,
  tblQuestions.UserName,
  tblQuestions.ReplyCount,
  tblQuestions.ViewCount,
  LatestReplies.ReplyDate,
  LatestReplies.UserName RepliedName
FROM
  tblQuestions
  LEFT JOIN tblTechnology ON tblQuestions.TechID = tblTechnology.TechID
  LEFT JOIN LatestReplies ON tblQuestions.QuestionID = LatestReplies.QuestionID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T07:40:34.497

毕竟解决了以下问题

```
select 
    FI.QuestionID,
    FI.QuestionTitle,
    FI.UserName,
    FI.DatePosted,
    FI.[date],
    FI.RepliedName,
    FI.viewCount,
    FI.ReplyCount,
    FI.ReplyMsg,
    TT.TechID,
    TT.TechName 
from 
    tblTechnology TT,
    (select distinct
        TQ.TechID,
        TQ.QuestionID,
        TQ.QuestionTitle,
        TQ.UserName,
        TQ.DatePosted,
        TR.[date],
        TR.UserName as RepliedName,
        TQ.viewCount,
        TQ.ReplyCount,
        TR.ReplyMsg 
    from  
        tblQuestions TQ 
        LEFT OUTER JOIN tblReplies TR ON 
                TR.TechID=TQ.TechID 
            and TR.QuestionID = TQ.QUESTIONID 
            and TR.[date] in (select 
                                MAX(TR.[date]) 
                            from 
                                tblReplies TR 
                            group by 
                                TR.QuestionID)
    ) FI 
where 
    FI.TechID=TT.TechID 
and TT.TechID=@TechID 
```

![在此处输入图像描述](../Images/1860df19cbeeb36543981f46c19a5077.png)

# php - MySQL 一次查询更新整个表

> ID：14834436
> 
> 赞同：-4
> 
> 时间：2013-02-12T14:08:06.190
> 
> 标签：php, mysql, database, phpmyadmin, insert-update

我正在尝试加载和更新整个表格的内容。我加载数据没有问题，但它不会更新..有人可以告诉我我在这里做错了什么：

```
while($show_table   = mysql_fetch_array($result_table)){
    echo "<tr><td><input type='text' name='table_id' value='" . 
        $show_table["id"] . "'/><input type='text' name='table_date' value='" . $show_table["date"] . "'/>
        </td><td>&euro; <input type='text' name='table_week' value='" . $show_table["week"] . "'/>
        </td><td>&euro; <input type='text' name='table_midweek' value='" . $show_table["midweek"] . "'/>
        </td><td>&euro; <input type='text' name='table_weekend' value='" . $show_table["weekend"] . "'/>
        </td><td><input type='text' name='table_type' value='" . $show_table["type"] . "'/>
        </td><td><input type='text' name='table_information' value='" . $show_table["information"] . "'/></td></tr>";
}

echo "</table>
<p><input type='submit' id='form_submit' name='update_confirm' value='Tarieven bijwerken'></p>
</form>";

if ($_POST['update_confirm'] == 'Tarieven bijwerken') {
    $id = $_POST['table_id'];
    $date = $_POST['table_date'];
    $week = $_POST['table_week'];
    $midweek = $_POST['table_midweek'];
    $weekend = $_POST['table_weekend'];
    $type = $_POST['table_type'];
    $information = $_POST['table_information'];

    $update_table = "UPDATE tarieven SET date='$date', week='$week', midweek='$midweek', weekend='$weekend', type='$type', information='$information' WHERE id='$id';";
    $confirm_table  = mysql_query($update_table);

} else {
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T14:12:35.633

您的查询仅更新 1 行，由指定`UPDATE tarieven SET ... WHERE id='$id'`- 尽管您正在遍历所有记录并显示它们，但更新在循环之外。

# android - Android：Yeahpad Pillbox7 的 idVendor？

> ID：14834437
> 
> 赞同：0
> 
> 时间：2013-02-12T14:08:10.630
> 
> 标签：android, eclipse, ubuntu

![在此处输入图像描述](../Images/edb34ec3385bf5c3efae37b60725acc1.png)

我正在尝试通过 Eclipce 在 Yeahpad Pillbox7 上运行/调试和我的 Android 应用程序。

我的操作系统是 Ubuntu 12.10 ..

从[http://developer.android.com/tools/device.html#setting-up](http://developer.android.com/tools/device.html#setting-up)页面，

我可以看到我需要设置：

> sudo gedit /etc/udev/rules.d/51-android.rules

然后我需要添加这个：

> SUBSYSTEM=="usb", ATTR{idVendor}=="?", MODE="0666", GROUP="plugdev"

***但是我找不到******Yeahpad devies的！*** *`ATTR{idVendor}`*

 ****更新：**

只需使用

> 18d1

所以它看起来像这样。

> SUBSYSTEM=="usb", ATTR{idVendor}=="18d1", MODE="0666", GROUP="plugdev"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T14:36:05.440

通过运行显示连接的设备`sudo lsusb -v`**

# python - 如何获取远程文件的大小？

> ID：14834442
> 
> 赞同：8
> 
> 时间：2013-02-12T14:08:26.297
> 
> 标签：python, paramiko

上传文件后如何获取远程文件的大小，使用 sftp paramiko 客户端？?

```
ssh = paramiko.SSHClient()
ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())
ssh.connect( 'hostname', username = 'test', password = 'test', timeout=10)
sftp = ssh.open_sftp()
res = sftp.put(filepath, destination ) 
```

?

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-12T14:11:55.403

使用[`.stat()`方法](https://docs.paramiko.org/en/stable/api/sftp.html#paramiko.sftp_client.SFTPClient.stat)：

```
info = sftp.stat(destination)
print(info.st_size) 
```

该`.stat()`方法遵循符号链接；如果不希望这样做，请改用该[`.lstat()`方法](https://docs.paramiko.org/en/stable/api/sftp.html#paramiko.sftp_client.SFTPClient.lstat)。

请参阅[`SFTPAttributes`类信息](https://docs.paramiko.org/en/stable/api/sftp.html#paramiko.sftp_attr.SFTPAttributes)以了解可用的属性。`.st_size`是以字节为单位的大小。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T14:11:38.237

您可以使用此方法：

```
lstat(self, path) 
```

见 paramiko[文档](http://docs.paramiko.org/en/2.1/api/sftp.html#paramiko.sftp_client.SFTPClient.lstat)

# windows-8 - 将已安装的 windows 8 32 位更新为 windows 8 64 位

> ID：14834443
> 
> 赞同：0
> 
> 时间：2013-02-12T14:08:26.580
> 
> 标签：windows-8, 64-bit, 32bit-64bit, 32-bit

刚给自己买了一台新的 Windows 8 平板电脑，它运行 32 位 Win 8（亚马逊上宣传为 64 位，但我猜这是另一个主题）。我的问题是，我可以将现有系统升级到64位，而无需重新设置win 8吗？我在谷歌上没有找到任何东西，甚至没有人有同样的问题，这让我有点害怕没有解决方案。无论如何，我在这里问:)任何答案都非常感谢^_^

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T14:17:34.770

更改架构时没有升级路径，所以不，从 32 位切换到 64 位时，无论您使用什么硬件，都必须完全重新安装。

编辑：感谢投反对票，但下面的视频不是升级，而是新安装。

如果您不手动备份，您的数据将会丢失，所有程序和驱动程序都需要重新安装。引用微软官方文档：

> 如果您想从 32 位版本的 Windows 迁移到 64 位版本的 Windows 7，反之亦然，您需要备份文件并在 Windows 7 安装期间选择“自定义”选项。然后，您需要恢复文件并重新安装程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-29T23:31:49.443

那这个呢？在上述回复前一周发布

[http://www.youtube.com/watch?v=z86MPrydfvs](http://www.youtube.com/watch?v=z86MPrydfvs)

# c++ - winbio.h 头文件功能被禁用？

> ID：14834449
> 
> 赞同：0
> 
> 时间：2013-02-12T14:08:44.470
> 
> 标签：c++, windows, windows-7, credential-providers

我在 Windows 7 速成版中使用 VS 2010。

我也试图`winbiocapturesample`从这个头文件中获取一个函数。但是我在使用 winbio.h 函数时遇到了问题。这个头文件放在 microsoft sdk v7.0a 中。

在禁用以下条件功能后，我会将该头文件包含在我的解决方案中。

```
#if (NTDDI_VERSION >= NTDDI_WIN7) 
```

但我只使用 Windows 7。谁能告诉 NTDDI_VERSION，为什么它不起作用。

如果我尝试调试`error C3861: 'WinBioOpenSession': identifier not found`

但是，在检查上述条件后，“WinBioOpenSession”在该头文件中。

预先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T15:03:11.320

编译器无法预测您所针对的 Windows 版本。你必须设置它。如果要针对 Windows 7，`NTDDI_VERSION`则应设置为。`NTDDI_WIN7`

# java - Microsoft Excel 作为 SQL 数据库

> ID：14834455
> 
> 赞同：0
> 
> 时间：2013-02-12T14:08:54.047
> 
> 标签：java, excel, odbc

我已按照本[网站 5.3 内容](http://www3.ntu.edu.sg/home/ehchua/programming/java/JDBC_Basic.html#zz-5.3)中提供的说明进行操作，并且代码运行良好。

我的计划是制作一个 jar 文件（包含一个界面/GUI），将该 jar 文件分发给用户，然后让他们所有的读/写数据都应该来自一个 excel 文件。当我将excel文件放在本地驱动器中时它可以工作，但是当我将文件放在网络文件夹/服务器中时，java会产生一个问题：

> java.exe 遇到问题需要关闭。对此造成的不便，我们表示歉意。

或者

```
Java Result: -1073741811 
```

有什么建议么？谢谢

```
public class TestIntoExcel 
{
public String s;
public double number;
public Date d;
public void display()throws ClassNotFoundException, SQLException
{
    Class.forName("oracle.jdbc.driver.OracleDriver");
    Connection writeConnection = DriverManager.getConnection
        ("jdbc:odbc:usersavedataODBC");
    writeConnection.setReadOnly(false);
    Statement writeStatement = writeConnection.createStatement();
    writeStatement.executeUpdate("CREATE TABLE TEST_INSERT(COL1 INT,COL2 VARCHAR(10),COL3 DATE)");
    PreparedStatement writeStatement2 = 
        writeConnection.prepareStatement("INSERT INTO TEST_INSERT(COL1,COL2,COL3)VALUES(?,?,?)");

    for(int i = 0; i<3;i++)
    {
        writeStatement2.setDouble(1, i);
        writeStatement2.setString(2, "Row" + i);
        writeStatement2.setDate(3, new java.sql.Date(new Date().getTime()));
        writeStatement2.execute();
     }

    String query = "select *from[TEST_INSERT]";
    ResultSet rset = writeStatement.executeQuery(query);
    //System.out.println(rset);
    while(rset.next())
    {
        number = rset.getDouble("COL1");
        s = rset.getString("COL2");
        d = rset.getDate("COL3");
        System.out.println(number+"\n"+s+"\n"+d);
}

writeStatement.close();
writeStatement2.close();
writeConnection.close(); 
```

# c++ - 将数组 (int*) 设置为 NULL 是否会释放它占用的内存？

> ID：14834461
> 
> 赞同：1
> 
> 时间：2013-02-12T14:09:25.737
> 
> 标签：c++, arrays, pointers, memory, null

假设我有一个声明为的数组：

```
int* array; 
```

我用许多整数填充数组。

如果我以后说

```
array = NULL; 
```

这会释放数组中的数字占用的内存，还是只是在内存仍然存在时使数组无法使用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T14:12:48.120

`int* array;`不是数组，而是指针。此时您没有数组。你不能开始做`array[0] = 5;`任何事情，因为它甚至没有指向一个有效的`int`对象，更不用说一个`int`s 的数组了。

通过执行以下操作声明数组：

```
int array[5]; 
```

该数组*确实*有 5 个对象可供您开始分配。但是，这个数组*不能*是`delete`d。数组不是动态分配的。

但是，如果您已经完成`int* array = new int[5];`，您将通过动态分配 5 s 的数组`int`并获取指向该数组中第一个元素的指针。在这种情况下，您*必须* `delete[] array;`. 如果您不这样做并且仅将指针设置为`NULL`or `nullptr`，则只会泄漏内存。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T14:12:28.900

如果您使用`new []`（更有可能，因为变量的名称是`array`）或分配内存`new`，这将导致**内存泄漏**。

将指针设置为`NULL`不会释放内存，只会重新分配指针。换句话说，您将失去任何引用先前分配的内存的机会。

用于`delete[]`释放分配的内存`new[]`，并`delete`释放分配的内存`new`。

但是，请考虑*根本不*使用原始指针和手动内存管理，它们通常不需要并且容易出错。C++ 标准库带有集合和智能指针，它们在后台执行内存管理并保护您免受此类错误的影响。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-12T14:15:20.933

当您使用代码时

```
int *array;
array = NULL; 
```

你已经初始化了指针。当您将数据分配给 *array

```
int *array;
array[1] = 3; 
```

你会得到一个未定义的行为，但在大多数情况下是访问冲突。当您在写入之前分配内存并将 NULL 分配给指针时

```
int *array;
array = new int[3];
array[0] = 2;
array[2] = 4;
array = NULL; 
```

你得到一个内存泄漏。当您删除数据时，一切都应该没问题：

```
int *array;
array = new int[3];
array[0] = 2;
array[2] = 4;
delete[] array;
array = NULL; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T14:11:07.230

将数组设置为 NULL 不会**释放**内存。

它可用的天气将取决于周围的代码以及如何`array`初始化。但是您没有提供该信息，因此其他任何事情都是猜测。

请注意，在现代 C++ 代码中使用指针是不常见的。
您应该寻求使用更合适的结构。那是什么将取决于您对我们的使用。单凭名字`array`。您可能应该使用`std::vector<int>`（或`std::array<int>`C++11）甚至是普通的旧 C 数组`int array[5]`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T14:11:35.960

它会泄漏内存，并且只有在进程退出时才会被释放。分段错误很有可能发生。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-12T14:12:49.990

如果你有：

```
int *array = new int[10]; 
```

你需要使用

```
delete [] array; 
```

释放内存。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-12T14:12:59.490

基本上遵循以下规则：每当使用`new XXX`deallocate with`delete XXX`或 for array allocation 进行分配时`delete [] XXX`。

如果只使用`array = NULL`，则只需将指针设置为`NULL`，就会发生内存泄漏。

# javascript - 在另一个声音的某个点播放声音

> ID：14834466
> 
> 赞同：0
> 
> 时间：2013-02-12T14:09:43.847
> 
> 标签：javascript, html, audio

```
 var audioElm3 = document.getElementById('player');
        if (audioElm3.currentTime === "115") {
            document.getElementById('coverBirds').play();
            console.log("firing");
        }; 
```

所以目的是在“播放器”声音运行期间的某个时间点播放声音“coverBirds”。问题是，当我加载页面时没有任何反应，而且控制台上也没有显示任何内容，奇怪的是。这些都是 HTML5 音频元素。我希望这足以解释它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T14:19:49.237

您需要将您的 javascript 连接到您`document.getElementById('player')`的 timeupdate 事件

```
document.getElementById('player').ontimeupdate = function(){
//CODE GOES HERE
} 
```

只要 currentTime 指示的时间发生变化，就会触发此事件，允许您与所需的 115 秒进行比较，然后触发 coverBirds 音频元素。注意`currentTime`几乎永远不会返回一个很好的整数，将 currentTime 的输出记录到控制台的示例是

> 日志：0
> 日志：0.23746030032634735
> 日志：0.4874148964881897
> 日志：0.7374603152275085
> 日志：0.9872788786888123
> 日志：1.2373242378234863255626
> 日志：1.48726

您将需要相应地调整 if 语句中的逻辑，以舍入您从 currentTime 收到的值或提供开始播放的范围。

[时间更新事件@MDN](https://developer.mozilla.org/en-US/docs/Mozilla_event_reference/timeupdate)

# jquery-mobile - 为什么 jQuery Mobile 预取的“单页”页面不像“多页”页面那样工作

> ID：14834467
> 
> 赞同：0
> 
> 时间：2013-02-12T14:09:44.143
> 
> 标签：jquery-mobile

我有一个网站，由一堆单页模板 jQuery Mobile 页面组成，这些页面使用预取和缓存相互链接。所有页面都存在于 DOM 中（在它们被预取之后）。

这在我的桌面浏览器上运行良好。但是，当我使用我的 HTC EVO 3D Android 手机（默认浏览器或 Opera 浏览器）浏览我的网站时，在页面之间切换就像我实际上是在访问外部页面一样。换句话说，浏览器的地址栏会暂时出现，然后页面变白，然后加载新页面，然后地址栏消失。

我希望该行为与多页模板完全相同。例如，如果您浏览 jQuery Mobile 文档中的多页面模板，您可以非常流畅地从一个页面切换到另一个页面。浏览器地址工具栏不弹出，页面之间没有白色闪烁。但是，如果您浏览“持久工具栏”示例（它使用预取来加载示例中的所有页面），您将看到与我的网站相同的行为。浏览器的地址栏会出现，页面会变白，渲染下一个页面，然后地址栏就会消失。

那么如何使我的预取页面像多页模板一样，而无需重写我的网站以使用多页模板？

作为参考，这里是 jQuery Mobile 持久工具栏演示和多页演示，我认为它们应该完全相同（关于出现的 URL 地址栏）：

[http://jquerymobile.com/demos/1.3.0-rc.1/docs/toolbars/footer-persist-a.html](http://jquerymobile.com/demos/1.3.0-rc.1/docs/toolbars/footer-persist-a.html)

[http://jquerymobile.com/demos/1.3.0-rc.1/docs/pages/multipage-template.html](http://jquerymobile.com/demos/1.3.0-rc.1/docs/pages/multipage-template.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T22:27:12.260

除非您的初始页面使用链接标签`data-prefetch`上的属性直接链接到所有其他页面，`<a>`否则这些页面不会被预取和缓存。我之所以这么说，是因为您的问题暗示您的页面存在一些不支持的链接。您还可以通过 API 加载和缓存它们。

`$.mobile.loadPage( pageUrl, { showLoadMsg: false } );`

您是否能够实际检查移动 Android 设备上的 DOM？

是否有可能根据内存限制从 DOM 中刷新页面？我不知道 jQM 文档中关于这种情况的任何细节，但在某些时候你会填充缓存。

# apache - 将 Joomla SEF 规则从 .htaccess 移至 vhosts.conf

> ID：14834469
> 
> 赞同：2
> 
> 时间：2013-02-12T14:09:46.887
> 
> 标签：apache, .htaccess, joomla, virtualhost, vhosts

我有一个 joomla 安装，它使用内置的 SEF url，以及股票 .htaccess 文件来重写它们。

我认为在 apache 配置而不是 .htaccess 中设置规则会更有效，[以避免在每次文件加载时都请求和解析该文件]，但是找不到它的参考，

所以我将规则从 .htaccess 移到了 vhosts.conf 文件中。

我现在收到 400 个带有 SEF url 的页面的错误请求。

任何人都可以提出什么问题或提供任何建议吗？

**更新**

似乎基础是问题所在，只需将重写规则从以下位置更改：

```
RewriteRule .* index.php [L]
to
RewriteRule .* /index.php [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T14:17:04.407

您在 vhosts.conf 文件中的哪个位置放置了这些规则？他们应该在

```
<Directory /path/to/joomla> 
  #your rules here
</Directory> 
```

在 Vhost 定义中

# html - 在 HTMTL::link_to_route() 中使用 html-tags

> ID：14834471
> 
> 赞同：2
> 
> 时间：2013-02-12T14:09:48.450
> 
> 标签：html, routes, laravel

在 Laravel 中，如何在通过 链接到路由时使用 html-tags `HTML::link_to_route()`？

我所拥有的示例：

```
<li>
    {{ HTML::link_to_route( "books_new", "New Book" ) }}
</li> 
```

我想做的事：

```
<li>
    {{ HTML::link_to_route( 
"books_new", 
"<span class='icon-book'></span>New Book" 
    ) }}
</li> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T14:58:04.530

我知道这不是您想听到的答案 - 但您不能通过 link_to_route 传递 html。

问题是 HTML 类的输出会自动转义。所以如果你试图通过这个：

```
{{ HTML::link_to_route('author','<img src="'.URL::base().'assets/images/image.jpg" alt="icon" />')) }} 
```

结果是这样的：

```
&lt;img src=&quot;http://laravel3.dev/assets/images/image.jpg&quot; alt=&quot;icon&quot; /&gt; 
```

这将只是屏幕上的文本 - 没有图像。相反，您需要自己使用`URI::to_route('author')`和生成链接。所以做一个这样的助手（未经测试）：

```
function link_to_route_image($route, $image)
{
   $m = '<a href="'.URL::to_route($route).'">'
      . '<img>'.$image.'</img>'
      . '</a>';
   return $m;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-13T05:11:34.067

这样的事情怎么样？

```
<li>
    <a href="{{ URL::to_route('books_new') }}"><span class='icon-book'></span>New Book</a>
</li> 
```

如果您使用的是“Font Awesome”，那么在大多数情况下，只需将类添加到某人提到的锚标记就可以了，因为“图标类通过 CSS :before 回显”。您可能需要对 CSS 进行一些调整；但在语义标记方面可能会更好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-04T11:25:58.067

```
<a href="{{ URL::route('empdelete', array('id' => $employee->id)) }}">
        <img src="{{ asset('images/tick-red.jpg') }}" alt="DRC" id="DRCS-logo" /></a> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T14:16:21.093

您不能使用`HTML::....`(class) 进行 HTML 标记，在文档中他们说作为参数传递给类的任何内容都使用 HTML 实体函数进行转义，以使前端更安全！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-27T19:30:53.267

您可以使用此代码在 Laravel Blade 模板中包含字体真棒或图标，我已经使用并完美运行。

```
<a href="{{ route('member.edit',$data->id) }}"><i class="fa fa-pencil-square-o" aria-hidden="true"></i>Edit</a> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-09-20T16:49:18.273

如果您使用的是“Font Awesome”，那么在大多数情况下，只需将类添加到某人提到的锚标记就可以了，因为“图标类通过 CSS :before 回显”。

所以这对我有用：

```
<li>
    {{ HTML::link_to_route( "books_new", "New Book", null, ['class' => 'fa fa-edit'] ) }}
</li> 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-02-12T14:22:05.103

据我所知，Laravel 不允许你这样做。在我看来，这似乎不合标准。

相反，将一个名为的类`icon-book`应用于您的锚标记，然后使用该类将图标作为“背景图像”放入锚中。

```
HTML::link_to_route('books_new', 'New Book', array('class' => 'icon-book')) 
```

或者：

1.  `span`在标签内插入`li`标签
2.  将`icon-book`类分配给`li`标签

# opengl - 围绕其中心旋转opengl四面体？

> ID：14834475
> 
> 赞同：0
> 
> 时间：2013-02-12T14:10:16.663
> 
> 标签：opengl, rotation

我被要求绘制一个 3D 四面体并使其围绕 x、y 或 z 轴旋转，具体取决于输入给定。现在我有2个问题。

1）我使用 GL_TRIANGLES（4 个三角形）绘制了我的四面体。这是绘制将要转换的图元的更好方法吗？

2）我相信（从我看到的其他问题）轴旋转是关于平移到特定轴，例如（0，-y，-z），然后围绕该轴旋转并最终平移回来。好的，现在翻译的价值应该是什么？y，z？我有很多代表每个顶点的值，我要翻译它们吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T14:21:31.033

我认为写完整的答案比问很多问题要快：

1.  为了减轻和加快速度，请使用`GL_TRIANGLE_FAN`or `GL_TRIANGLE_STRIP`代替。

2.  取决于您使用的管道：

    *2.1*旧 OpenGL（< 2.0，无着色器）

    您不应该手动平移和旋转它们。使用适当`glRotate`的和`glTranslate`功能。您需要传递给这些函数的值显然与对象的所需位置和旋转有关；您将在文档中找到有关它们的更多信息。

    *2.2*可编程流水线

    创建一个转换矩阵（您自己或使用 GLM 等库）并将其作为统一传递给顶点着色器。

哦，你不会*翻译成轴*。您将当前视图矩阵乘以适当的旋转矩阵。

在深入研究更复杂的主题之前，您应该尝试阅读更多内容。[本教程](http://arcynthesis.org/gltut)很好地涵盖了现代 OpenGL；如果您被迫使用旧的 OpenGL，请查看[NeHe 教程](http://nehe.gamedev.net)。

# javascript - 通过 CSS 或 JS+CSS 的“只读”块（div）

> ID：14834479
> 
> 赞同：0
> 
> 时间：2013-02-12T14:10:37.607
> 
> 标签：javascript, css

我有一个包含选择标签、按钮标签等的块（div）。我需要一个解决方案来将此块指定为“只读”属性。使用 css 或 js+css，这意味着该块的内容将不可点击或可选择。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T14:15:02.847

用于此块：

```
div {
    position: relative;
    z-index: -1:
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T14:13:21.457

最简单的就是在它上面加一层——

*   使父元素（您现在拥有的容器）位置：相对
*   添加一个子元素（一个带有类层的空白 div）
*   添加位置：绝对；宽度：100%；高度：100%；顶部：0；左：0；z指数：999；到带有类层的新 div

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T14:15:34.693

用CSS

```
#divid { pointer-events: none; } 
```

**更新：**

```
<div id="wrapper">
    <input type="button" value="test" onclick="javascript: alert(1);" />
</div> 
```

css

```
#wrapper { pointer-events: none; } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T14:17:49.177

尝试这个：

```
-webkit-user-select: none;  
-moz-user-select: none;  
-ms-user-select: none;  
user-select: none; 
```

# ruby - ruby 对象模型 + 基于另一个类的类创建

> ID：14834482
> 
> 赞同：0
> 
> 时间：2013-02-12T14:10:50.913
> 
> 标签：ruby

我的问题可能是非常基本的和愚蠢的，但我很困惑为什么输出是这样的。

```
MyClass = Class.new String
MyClass.ancestors
=> [MyClass, String, ..]

AnotherClass = Class.new MyClass
=> AnotherClass 
AnotherClass.ancestors
=> [AnotherClass, MyClass, String, ..] 
```

在上面的代码中，我创建了一个名为 MyClass 的新类实例，并将对象（ruby 中的所有内容都是一个对象）'String' 作为参数传递。为什么“字符串”出现在 MyClass 的祖先列表中。我没有从 String 继承 MyClass ，但这就是 ruby​​ 似乎正在做的事情。它确实可以用作复制构造函数，但为什么要继承？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T14:18:40.837

以下

```
class A < B
end 
```

实际上只是一个语法糖

```
A = Class.new B 
```

有关更多信息，请参阅[Random Ruby Tricks: Class.new](http://blog.steveklabnik.com/posts/2012-09-09-random-ruby-tricks--class-new)和[官方文档](http://www.ruby-doc.org/core-1.9.3/Class.html#method-c-new)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T14:55:23.520

> 我没有继承`MyClass`自`String`

是的，你有。这就是[参数的`Class::new`](http://Ruby-Doc.Org/core-2.0/Class.html#method-c-new)含义：

> # `new(super_class=Object)`→`a_class`
> 
> `Object`使用给定的超类（或者如果没有给定参数）创建一个新的匿名（未命名）类。

# mongodb - 用于 Squeeze 的 MongoDB PowerPC 安装

> ID：14834488
> 
> 赞同：1
> 
> 时间：2013-02-12T14:11:17.450
> 
> 标签：mongodb

我试图在 Debian Squeeze 上安装 MongoDB，但我一直收到错误消息：无法找到软件包时出错，我认为这是因为我在 powerpc 上运行，而在互联网上我只获得基于客户端的 MongoDB 安装。我想知道是否有用于 Debian Squeeze PowerPC 的 MongoDB 服务器安装

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T15:01:17.263

PowerPC 不受 10gen 官方支持，因为它需要 Intel 处理器。虽然有一些尝试让它发挥作用——但它们不是官方的。

一个在[这里](https://github.com/skrabban/mongo-nonx86)，但它非常过时（它的版本是 1.8，当前的 MongoDB 版本是 2.2）。

唯一受支持的方法是将 MongoDB 安装在 Intel 芯片组上，并使用您喜欢的编程语言的驱动程序连接到数据库。这些显然适用于多种语言的PowerPC等（根据文档，但我从未尝试过）。

# python - PyQt：单击 X 不会触发 closeEvent

> ID：14834494
> 
> 赞同：12
> 
> 时间：2013-02-12T14:11:38.773
> 
> 标签：python, pyqt, pyqt4

我是 PyQt 的新手，试图开发简单的应用程序。我用 Qt-designer 设计了简单的 ui。如果用户真的想在单击 X 或 ,,Exit'' 按钮或从菜单中选择 Exit 时退出应用程序，我需要额外的确认。

这是代码：

```
import sys
from PyQt4 import QtGui, QtCore, uic

class MainWindow(QtGui.QMainWindow):
    def __init__(self):
        QtGui.QMainWindow.__init__(self)

        self.ui = uic.loadUi('main_window.ui')
        self.ui.show()

        self.ui.btnExit.clicked.connect(self.close)
        self.ui.actionExit.triggered.connect(self.close)

    def closeEvent(self, event):
        print("event")
        reply = QtGui.QMessageBox.question(self, 'Message',
            "Are you sure to quit?", QtGui.QMessageBox.Yes, QtGui.QMessageBox.No)

        if reply == QtGui.QMessageBox.Yes:
            event.accept()
        else:
            event.ignore()

def main():
    app = QtGui.QApplication(sys.argv)
    win = MainWindow()
    sys.exit(app.exec_())

if __name__ == "__main__":
    main() 
```

问题是：

*   当我在主窗口上单击 X 时，closeEvent 函数不会触发
*   当我单击退出按钮或从菜单中选择 ,,Exit'' 时，
    会调用该函数，但单击是不会关闭应用程序。

我发现了一些关于 SO 的问题并搜索了教程，但没有任何内容涵盖此类问题。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-12T14:41:40.930

请注意，您正在执行以下操作：

```
self.ui = uic.loadUi('main_window.ui')
self.ui.show() 
```

您的*实际*窗口是*内部*`ui`的实例属性 ( ) 。不是自己。而且它还没有实施。 *`win``win``closeEvent`*

 *[`loadUi`](http://pyqt.sourceforge.net/Docs/PyQt4/designer.html#the-uic-module)`.ui`可以在实例中加载文件。

```
PyQt4.uic.loadUi(uifile[, baseinstance=None[, package='']]) 
```

你应该使用它。这样，您的代码将是：

```
import sys
from PyQt4 import QtGui, QtCore, uic

class MainWindow(QtGui.QMainWindow):
    def __init__(self):
        QtGui.QMainWindow.__init__(self)

        uic.loadUi('main_window.ui', self)

        self.btnExit.clicked.connect(self.close)
        self.actionExit.triggered.connect(self.close)

    def closeEvent(self, event):
        print("event")
        reply = QtGui.QMessageBox.question(self, 'Message',
            "Are you sure to quit?", QtGui.QMessageBox.Yes, QtGui.QMessageBox.No)

        if reply == QtGui.QMessageBox.Yes:
            event.accept()
        else:
            event.ignore()

def main():
    app = QtGui.QApplication(sys.argv)
    win = MainWindow()
    win.show()
    sys.exit(app.exec_())

if __name__ == "__main__":
    main() 
```

注意：我不喜欢`show`在`__init__`. 明确的更好。所以，我把它移到`main`. 随意修改它。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-12-15T17:59:26.317

它对我有用，只需添加这一行

```
self.ui.closeEvent = self.closeEvent 
```

所以你的代码是：

```
import sys
from PyQt4 import QtGui, QtCore, uic

class MainWindow(QtGui.QMainWindow):
    def __init__(self):
        QtGui.QMainWindow.__init__(self)

        self.ui = uic.loadUi('main_window.ui')
        self.ui.closeEvent = self.closeEvent
        self.ui.show()

        self.ui.btnExit.clicked.connect(self.close)
        self.ui.actionExit.triggered.connect(self.close)

    def closeEvent(self, event):
        print("event")
        reply = QtGui.QMessageBox.question(self, 'Message',
            "Are you sure to quit?", QtGui.QMessageBox.Yes, QtGui.QMessageBox.No)

        if reply == QtGui.QMessageBox.Yes:
            event.accept()
        else:
            event.ignore()

def main():
    app = QtGui.QApplication(sys.argv)
    win = MainWindow()
    sys.exit(app.exec_())

if __name__ == "__main__":
    main() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-14T18:14:51.953

另一个简单的解决方案是在用户单击关闭按钮时使用**`app.aboutToQuit.connect(self.close_event)`**运行函数中的代码。`closeEvent`

## **示例代码在这里**

```
class Ui_MainWindow(object):
    def setupUi(self, MainWindow):
        MainWindow.setObjectName("MainWindow")
        self.retranslateUi(MainWindow)
        QtCore.QMetaObject.connectSlotsByName(MainWindow)

#--------------------------------------------------------------------------------

        app.aboutToQuit.connect(self.closeEvent) #this line is what ur looking for !!!!!!

#--------------------------------------------------------------------------------

    def retranslateUi(self, MainWindow):
        MainWindow.setWindowTitle('Demo')

    #{______________________________________

    def closeEvent(self):
        #Your code here
        print('User has pressed the close button')
        import sys
        sys.exit(0)

    #}______________________________________

if __name__ == "__main__":
    import sys
    app = QtGui.QApplication(sys.argv)
    MainWindow = QtGui.QMainWindow()
    ui = Ui_MainWindow()
    ui.setupUi(MainWindow) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T14:50:11.177

在设计器中，您可以将事件连接到主窗口，并在设计器中添加新插槽，然后只需在 python 中实现方法，事件->插槽连接将自动完成。*

# php - 如何比较两个数组并获取不适合数组的数据

> ID：14834499
> 
> 赞同：2
> 
> 时间：2013-02-12T14:11:52.560
> 
> 标签：php, arrays

我现在有 2 个数组，我怎样才能得到 2 个数组之间的区别？

```
foreach($test1 as $array)
{
    if (!isset($result[$array["id"]])) $result[$array["id"]] = $array["date"];
}
foreach ($result as $id => $date) {
    $new1[] = array("id" => $id, "date" => $date);
} 
```

给我这个输出：

```
Array ( [0] => Array ( [id] => 47523 [date] => 11-02-13 05:36:32 ) [1] => Array ( [id] => 42415 [date] => 12-02-13 13:56:48 ) 
```

_

```
foreach($test2 as $array) {
    if (!isset($result[$array["id"]])) $result[$array["id"]] = $array["date"];
}
foreach ($result as $id => $date) {
    $new2[] = array("id" => $id, "date" => $date);
} 
```

给我这个输出：

```
Array ( [0] => Array ( [id] => 47523 [date] => 12-02-13 14:22:14 ) [1] => Array ( [id] => 42135[date] => 02-02-13 14:51:42 ) 
```

现在我想比较它们，以便找出差异：我希望预期的输出如下：

```
Array ( [0] => Array ( [id] => 42415 [date] => 12-02-13 13:56:48 ) [1] => Array ( [id] => 42135[date] => 02-02-13 14:51:42) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T14:12:46.527

利用[`array_diff()`](http://www.php.net/manual/en/function.array-diff.php)

```
<?php
$array1 = array("a" => "green", "red", "blue", "red");
$array2 = array("b" => "green", "yellow", "red");
$result = array_diff($array1, $array2);

print_r($result);
?>

Array
(
    [1] => blue
) 
```

# javascript - JScript 超时触发器

> ID：14834502
> 
> 赞同：0
> 
> 时间：2013-02-12T14:12:03.047
> 
> 标签：javascript, html, timeout

```
<html>
<body>
<script>
setTimeout(function(){
document.body.style.background = <img src="1.jpg"</img>
},33);
</script>
</body>
</html> 
```

我想知道如何让图像在 setTimeout 之后出现。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T14:14:49.717

尝试这个：

```
setTimeout(function () {
  document.body.style.backgroundImage = "url('1.jpg')";
}, 33); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T15:22:54.880

为了设置背景图片，您需要使用 CSS[`background-image`](https://developer.mozilla.org/en-US/docs/CSS/background-image)属性。鉴于您没有提供 CSS 样式表，并且您想通过 javascript 动态更改属性，您需要使用该`style`属性。

这个 W3C wiki [Dynamic style - manipifying CSS with JavaScript](http://www.w3.org/wiki/Dynamic_style_-_manipulating_CSS_with_JavaScript#Changing_Element_Styles)对`style`属性有很好的解释。它有许多与 CSS 属性相对应的属性。考虑到属性的 CSS 属性名称是在[CamelCase](http://en.wikipedia.org/wiki/CamelCase)`style`中定义的，实际上也是如此。`background-image``backgroundImage`

因此，为了将背景图像动态设置为`document.body`元素，您可以使用`document.body.style.backgroundImage="url('1.jpg')";`

（你的定时器功能已经好了）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T14:15:02.510

这样的事情会做到这一点：

```
setTimeout(function(){
    document.body.style.background="url(1.jpg)";
},33); 
```

**[演示](http://jsfiddle.net/a3SCB/)**

*请注意，超时以毫秒为单位。对于用户而言，与直接通过 CSS 添加背景相比，33 毫秒可能不会产生明显的差异。*

# android - Specific Android Popup Menu

> ID：14834504
> 
> 赞同：-4
> 
> 时间：2013-02-12T14:12:08.127
> 
> 标签：android, menu, popupmenu

I am familiar with the Android PopupMenu ability, but I want a popup that looks like this:![enter image description here](../Images/2b08a466043dc5f77d3387247ca6b209.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T14:19:16.853

Just a heads up, the Android Developers site ([http://developer.android.com/index.html](http://developer.android.com/index.html)) has all of this explained in detail with tutorials. Try this:

```
AlertDialog.Builder builder = new AlertDialog.Builder(this);

builder.setTitle(title);

builder.setItems(new CharSequence[] {"Copy Text", "Delete", "Details"} , 
    new DialogInterface.OnClickListener() 
    {
        public void onClick(DialogInterface dialog, int which) { /* which is an index */ } 
    }); 
builder.show(); 
```

# iphone - 检测低电量警告ios

> ID：14834506
> 
> 赞同：4
> 
> 时间：2013-02-12T14:12:13.907
> 
> 标签：iphone, ios, objective-c

我正在做一个回合制游戏。为了防止用户作弊，如果用户在回合中关闭应用程序，回合将自动传递给对手。这是因为用户无法关闭应用程序，重新启动它，然后从头开始轮到。

然而，有两种情况应该惩罚玩家。如果有电话打进来，或者出现低电量警告。我可以检测到来电并响应，但我不知道如何处理电池？

任何建议都会很棒

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-12T14:17:45.820

通过将单例的属性设置为 YES 来启用电池监控`UIDevice`：

```
UIDevice *device = [UIDevice currentDevice];
device.batteryMonitoringEnabled = YES; 
```

`iPhone OS`提供两种类型的电池监控事件，一种用于状态变化时（*例如，充电、拔掉、充满电*），另一种用于在电池电量变化时更新。与接近监控的情况一样，您注册回调以接收通知：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(batteryChanged:) name:@"UIDeviceBatteryLevelDidChangeNotification" object:device];
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(batteryChanged:) name:@"UIDeviceBatteryStateDidChangeNotification" object:device]; 
```

另请参阅此[链接。](http://iosdevelopertips.com/device/display-battery-state-and-level-of-charge.html)

# delphi - 如何在创建时使用拥有对象初始化 ListenersList

> ID：14834513
> 
> 赞同：1
> 
> 时间：2013-02-12T14:12:37.400
> 
> 标签：delphi

我有一个引擎，其中包含一个程序集列表。程序集是在引擎初始化时从已注册的 AssemblyClasses 列表中创建的（因此它们在运行时是固定的）。可以触发程序集以使用 ParameterObject 重新计算其结果。

当 Assembly 的 ParameterObject 的属性发生更改或重新计算完成时，将向 ListenersList 中的所有接口触发通知事件 (ParameterChanged resp ResultsChanged)。每个大会都有自己的听众名单。

引擎将自己注册为所有程序集的侦听器之一，现在的问题是，当创建程序集并因此创建初始 ParameterObject 并触发 ParameterChanged 事件时，引擎尚未将自身添加到侦听器列表中所以它不会得到初始 ParameterObject 的通知。

解决这个问题的最佳方法是什么？我应该将引擎的引用添加到构造函数（将引擎引用为 marjan 建议的侦听器），还是在创建每个程序集后显式调用引擎的事件处理程序...

顺便说一句，使用德尔福 XE3

感谢任何建议

# iphone - ios paypal简单支付与多个对象

> ID：14834517
> 
> 赞同：2
> 
> 时间：2013-02-12T14:12:48.080
> 
> 标签：iphone, ios, paypal

**感谢 ragnesh 更新了代码** 我可以支付多件商品，但没有折扣，我需要每个产品 10% 的折扣，有人可以帮忙吗？

```
- (void)simplePayment {
    [PayPal getPayPalInst].shippingEnabled = TRUE;

    [PayPal getPayPalInst].dynamicAmountUpdateEnabled = TRUE;

    [PayPal getPayPalInst].feePayer = FEEPAYER_EACHRECEIVER;

    PayPalPayment *payment = [[PayPalPayment alloc] init];

    payment.recipient = @"email@example.com";
    payment.paymentCurrency = @"USD";

    payment.invoiceData = [[PayPalInvoiceData alloc] init];

    payment.invoiceData.totalShipping = [NSDecimalNumber decimalNumberWithString:@"0"];

    payment.invoiceData.totalTax = [NSDecimalNumber decimalNumberWithString:@"0.00"];

    payment.invoiceData.invoiceItems = [NSMutableArray array];

    NSMutableDictionary * dic = [[NSMutableDictionary alloc]init];

    for (int i = 0; i < [db.array count]; i++) {
            myData =[db.array objectAtIndex:i];
        [dic setValue:myData.itemName forKey:[NSString stringWithFormat:@"title%d",i]];
        [dic setValue:[NSString stringWithFormat:@"%d",myData.itemPrice] forKey:[NSString stringWithFormat:@"price%d",i]];
        [dic setValue:[NSString stringWithFormat:@"%d",myData.itemQuantity] forKey:[NSString stringWithFormat:@"quantity%d",i]];
    }

    NSLog(@"%@",dic);

    for (int i=0; i<[db.array count]; i++) {
        PayPalInvoiceItem *item = [[PayPalInvoiceItem alloc] init];
        [item setItemCount:[NSDecimalNumber decimalNumberWithString:[dic objectForKey:[NSString stringWithFormat:@"quantity%d",i]]]];
        [item setItemPrice:[NSDecimalNumber decimalNumberWithString:[dic objectForKey:[NSString stringWithFormat:@"price%d",i]]]];
        item.name = [dic objectForKey:[NSString stringWithFormat:@"title%d",i]];

        [payment.invoiceData.invoiceItems addObject:item];

        NSDecimalNumber *paypalItemQuantity = [NSDecimalNumber decimalNumberWithString:[dic objectForKey:[NSString stringWithFormat:@"quantity%d",i]]];

        NSDecimalNumber *paypalItemPrice = [NSDecimalNumber decimalNumberWithString:[dic objectForKey:[NSString stringWithFormat:@"price%d",i]]];

        payment.subTotal =[NSDecimalNumber decimalNumberWithString: [NSString stringWithFormat:@"%f",[payment.subTotal floatValue]
                                                                 +[paypalItemPrice floatValue] *

                                                                 [paypalItemQuantity floatValue]

                                                                 ]];

        NSLog(@"%@",[dic objectForKey:[NSString stringWithFormat:@"price%d",i]]);
        NSLog(@"%@",[dic objectForKey:[NSString stringWithFormat:@"title%d",i]]);
        NSLog(@"%@",payment.subTotal);

    }

    [[PayPal getPayPalInst] checkoutWithPayment:payment];
} 
```

**为了折扣，我做了类似的事情：但它弹出错误**

```
payment.subTotal =[NSDecimalNumber decimalNumberWithString: [NSString stringWithFormat:@"%f",([payment.subTotal floatValue]*

                                                                 [paypalItemQuantity floatValue])
                                                                 -([paypalItemPrice floatValue] *

                                                                 [paypalItemQuantity floatValue] *0.1)

                                                                 ]]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:29:14.283

按照此进行[贝宝](http://rajneesh071.blogspot.in/2012/12/paypal-sdk-for-ios.html?q=paypal)集成

把这条线放在你的循环之外

```
payment.invoiceData.invoiceItems = [NSMutableArray array]; 
```

**编辑**

```
- (void)simplePayment
{
    //dismiss any native keyboards

    //optional, set shippingEnabled to TRUE if you want to display shipping
    //options to the user, default: TRUE
    [PayPal getPayPalInst].shippingEnabled = TRUE;

    //optional, set dynamicAmountUpdateEnabled to TRUE if you want to compute
    //shipping and tax based on the user's address choice, default: FALSE
    [PayPal getPayPalInst].dynamicAmountUpdateEnabled = TRUE;

    //optional, choose who pays the fee, default: FEEPAYER_EACHRECEIVER
    [PayPal getPayPalInst].feePayer = FEEPAYER_EACHRECEIVER;

    //for a payment with a single recipient, use a PayPalPayment object
    NSMutableDictionary *dic=[[NSUserDefaults standardUserDefaults]valueForKey:@"drinkDetailDic"];

    PayPalPayment *payment = [[PayPalPayment alloc] init];

    payment.recipient = @"email@example.com";
    payment.paymentCurrency = @"USD";

    payment.description = [dic objectForKey:@"title"];

    //invoiceData is a PayPalInvoiceData object which contains tax, shipping, and a list of PayPalInvoiceItem objects
    payment.invoiceData = [[PayPalInvoiceData alloc] init];

    //shippping charge
    payment.invoiceData.totalShipping = [NSDecimalNumber decimalNumberWithString:@"0"];

    payment.invoiceData.totalTax = [NSDecimalNumber decimalNumberWithString:@"0.00"];

    payment.invoiceData.invoiceItems = [NSMutableArray array];

    for (int i=0; i<2; i++)
    {
        PayPalInvoiceItem *item = [[PayPalInvoiceItem alloc] init];
        item.totalPrice = payment.subTotal;
        [item setItemCount:[NSNumber numberWithInt:1]];
        [item setItemPrice:[NSDecimalNumber decimalNumberWithString:[dic objectForKey:@"price"]]];
        item.name = [dic objectForKey:@"title"];

        [payment.invoiceData.invoiceItems addObject:item];

        payment.subTotal =[NSDecimalNumber decimalNumberWithString: [NSString stringWithFormat:@"%f",[payment.subTotal floatValue]
                                                                     +[[dic objectForKey:@"price"] floatValue]]];

    }

    [[PayPal getPayPalInst] checkoutWithPayment:payment];
} 
```

**笔记**

如果您要添加多个项目，则 subTotal 价格与所有项目价格的总和相同。

# html - HTML5 音频停止功能

> ID：14834520
> 
> 赞同：188
> 
> 时间：2013-02-12T14:12:52.580
> 
> 标签：html, html5-audio

单击导航中的每个链接时，我正在播放一个小音频剪辑

HTML 代码：

```
<audio tabindex="0" id="beep-one" controls preload="auto" >
    <source src="audio/Output 1-2.mp3">
    <source src="audio/Output 1-2.ogg">
</audio> 
```

JS代码：

```
$('#links a').click(function(e) {
    e.preventDefault();
    var beepOne = $("#beep-one")[0];
    beepOne.play();
}); 
```

到目前为止工作正常。

**问题是当声音剪辑已经在运行并且我单击任何链接时没有任何反应。**

我试图在点击链接时停止已经播放的声音，但在 HTML5 的音频 API 中没有直接事件

我尝试了以下代码，但它不起作用

```
$.each($('audio'), function () {
    $(this).stop();
}); 
```

请问有什么建议吗？

* * *

## 回答 #1

> 赞同：439
> 
> 时间：2013-02-12T15:37:01.123

而不是`stop()`你可以尝试：

```
sound.pause();
sound.currentTime = 0; 
```

这应该有预期的效果。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-03-21T05:29:08.633

首先你必须为你的音频元素设置一个 id

在你的 js 中：

`var ply = document.getElementById('player');`

`var oldSrc = ply.src;`// 只是为了记住旧的来源

`ply.src = "";`// 要停止播放器，您必须将源替换为空

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2017-09-12T09:37:19.403

我遇到了同样的问题。如果它是收音机，则停止应该停止流和 onplay*直播。*我看到的所有解决方案都有一个*缺点*：

*   `player.currentTime = 0`继续下载流。
*   `player.src = ''`引发`error`事件

我的解决方案：

```
var player = document.getElementById('radio');
player.pause();
player.src = player.src; 
```

和 HTML

```
<audio src="http://radio-stream" id="radio" class="hidden" preload="none"></audio> 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2015-04-12T11:49:55.887

这是我做 stop() 方法的方式：

代码中的某处：

```
audioCh1: document.createElement("audio"); 
```

然后在 stop() 中：

```
this.audioCh1.pause()
this.audioCh1.src = 'data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEAVFYAAFRWAAABAAgAZGF0YQAAAAA='; 
```

这样我们就不会产生额外的请求，旧的请求被取消，我们的音频元素处于干净状态（在 Chrome 和 FF 中测试）：>

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2017-01-01T08:24:08.280

**此方法有效：**

```
audio.pause();
audio.currentTime = 0; 
```

但是，如果您不想每次停止音频时都编写这两行代码，您可以做两件事之一。我认为第二个更合适，我不确定为什么“javascript 标准之神”没有制定这个标准。

**第一种方法：创建一个函数并传递音频**

```
function stopAudio(audio) {
    audio.pause();
    audio.currentTime = 0;
}

//then using it:
stopAudio(audio); 
```

**第二种方法（首选）：扩展 Audio 类：**

```
Audio.prototype.stop = function() {
    this.pause();
    this.currentTime = 0;
}; 
```

我在一个名为“AudioPlus.js”的javascript文件中有这个，我在我的html中包含在任何将处理音频的脚本之前。

然后你可以在音频对象上调用 stop 函数：

```
audio.stop(); 
```

**最后一个带有“canplaythrough”的铬问题：**

我没有在所有浏览器中测试过这个，但这是我在 Chrome 中遇到的一个问题。如果您尝试在附加了“canplaythrough”事件侦听器的音频上设置 currentTime，那么您将再次触发该事件，这可能会导致不良结果。

因此，与您附加了一个您确实想确保它不会再次触发的事件侦听器的所有情况类似，解决方案是在第一次调用后删除事件侦听器。像这样的东西：

```
//note using jquery to attach the event. You can use plain javascript as well of course.
$(audio).on("canplaythrough", function() {
    $(this).off("canplaythrough");

    // rest of the code ...
}); 
```

**奖金：**

请注意，您可以向 Audio 类（或任何本机 javascript 类）添加更多自定义方法。

例如，如果您想要一个重新启动音频的“重新启动”方法，它可能看起来像：

```
Audio.prototype.restart= function() {
    this.pause();
    this.currentTime = 0;
    this.play();
}; 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2015-04-08T09:07:28.913

从我自己的 javascript 函数切换播放/暂停 - 因为我正在处理广播流，所以我希望它清除缓冲区，以便听众最终不会与广播电台不同步。

```
function playStream() {

        var player = document.getElementById('player');

        (player.paused == true) ? toggle(0) : toggle(1);

}

function toggle(state) {

        var player = document.getElementById('player');
        var link = document.getElementById('radio-link');
        var src = "http://192.81.248.91:8159/;";

        switch(state) {
                case 0:
                        player.src = src;
                        player.load();
                        player.play();
                        link.innerHTML = 'Pause';
                        player_state = 1;
                        break;
                case 1:
                        player.pause();
                        player.currentTime = 0;
                        player.src = '';
                        link.innerHTML = 'Play';
                        player_state = 0;
                        break;
        }
} 
```

事实证明，仅清除 currentTime 并不能在 Chrome 下将其删除，还需要清除源并将其重新加载。希望这会有所帮助。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2014-08-09T01:47:06.893

作为旁注，因为我最近使用了接受的答案中提供的停止方法，根据这个链接：

[https://developer.mozilla.org/en-US/docs/Web/Guide/Events/Media_events](https://developer.mozilla.org/en-US/docs/Web/Guide/Events/Media_events)

通过手动设置 currentTime，可以在音频元素上触发“canplaythrough”事件。在链接中它提到了 Firefox，但是我在 Chrome 上手动设置 currentTime 后遇到了这个事件。因此，如果您有附加到此事件的行为，您可能最终会进入音频循环。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2018-11-08T09:31:03.850

它有时在 chrome 中不起作用，

```
sound.pause();
sound.currentTime = 0; 
```

就这样改变，

```
sound.currentTime = 0;
sound.pause(); 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-11-23T22:59:50.957

沙曼乔治写道：

> 通过手动设置 currentTime，可以在音频元素上触发“canplaythrough”事件。

这确实会发生，暂停也会触发`pause`事件，这两者都使得这种技术不适合用作“停止”方法。此外，`src`如果启用了 zaki 建议的设置，则播放器会尝试将当前页面的 URL 加载为媒体文件（并且失败） -不允许`autoplay`设置`src`为；`null`它将始终被视为 URL。除了破坏播放器对象之外，似乎没有提供“停止”方法的好方法，所以我建议只删除专用的停止按钮并提供暂停和后退按钮 - 停止按钮不会真正添加任何功能.

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-03-19T16:03:12.820

这种方法是“蛮力”，但假设使用 jQuery 是“允许的”，它可以工作。用 div包围你的“玩家”`<audio></audio>`标签（这里的 id 为“plHolder”）。

```
<div id="plHolder">
     <audio controls id="player">
     ...
     </audio>
<div> 
```

那么这个javascript应该可以工作：

```
function stopAudio() {
    var savePlayer = $('#plHolder').html(); // Save player code
    $('#player').remove(); // Remove player from DOM
    $('#FlHolder').html(savePlayer); // Restore it
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-12-05T23:31:59.490

我正在寻找类似的东西，因为我制作了一个可以用来将声音相互分层以获得焦点的应用程序。我最终做的是 - 选择声音时，使用 Javascript 创建音频元素：

```
 const audio = document.createElement('audio') as HTMLAudioElement;
                audio.src = getSoundURL(clickedTrackId);
                audio.id = `${clickedTrackId}-audio`;
                console.log(audio.id);
                audio.volume = 20/100;
                audio.load();
                audio.play(); 
```

然后，将子项附加到文档以实际显示音频元素

```
document.body.appendChild(audio); 
```

最后，当取消选择音频时，您可以完全停止并删除音频元素 - 这也将停止流式传输。

```
 const audio = document.getElementById(`${clickedTrackId}-audio`) as HTMLAudioElement;
            audio.pause();
            audio.remove(); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-04-21T19:18:01.343

我相信检查音频是否正在播放状态并重置 currentTime 属性会很好。

```
if (sound.currentTime !== 0 && (sound.currentTime > 0 && sound.currentTime < sound.duration) {
    sound.currentTime = 0;
}
sound.play(); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-02-02T14:00:05.580

对我来说，该代码工作正常。(IE10+)

```
var Wmp = document.getElementById("MediaPlayer");                
    Wmp.controls.stop();

<object classid="clsid:6BF52A52-394A-11D3-B153-00C04F79FAA6"
    standby="Loading áudio..." style="width: 100%; height: 170px" id="MediaPlayer">... 
```

希望这有帮助。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-02-11T17:27:02.857

我喜欢做的是使用 Angular2 完全删除控件，然后在下一首歌曲有音频路径时重新加载它：

```
<audio id="audioplayer" *ngIf="song?.audio_path"> 
```

然后，当我想在代码中卸载它时，我会这样做：

```
this.song = Object.assign({},this.song,{audio_path: null}); 
```

当分配下一首歌曲时，控件会从头开始完全重新创建：

```
this.song = this.songOnDeck; 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-04-11T19:29:13.240

解决此错误的简单方法是捕获错误。

audioElement.play() 返回一个承诺，因此以下带有 .catch() 的代码应该足以解决此问题：

```
function playSound(sound) {
  sfx.pause();
  sfx.currentTime = 0;
  sfx.src = sound;
  sfx.play().catch(e => e);
}
```

注意：为了向后兼容，您可能希望将箭头函数替换为匿名函数。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-08-27T10:29:14.883

在 IE 11 中，我使用了组合变体：

```
player.currentTime = 0; 
player.pause(); 
player.currentTime = 0; 
```

只有 2 次重复会阻止 IE 在 pause() 之后继续加载媒体流并由此淹没磁盘。

# image - 使用C将图像拆分为多个子图像

> ID：14834525
> 
> 赞同：1
> 
> 时间：2013-02-12T14:13:02.543
> 
> 标签：image, image-processing, satellite-image

我正在寻找一个给定大小为 x 的图像的 C 库，它将图像拆分为多个图像，以便我可以将每个子图像发送到专用 CPU 以使用区域增长或其他方式检测其上的片段。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T22:46:25.523

你真的要分割图像吗？

1.  如果您使用的是多核 CPU，最好加载一次图像，然后使用 x,y,width,height 参数在其上运行处理线程（我假设处理只读取图像）。

2.  如果您有更多主机，则有一个调度程序，它正在对图像执行几个操作：解压缩、拆分、压缩部分、传输部分。我认为，处理主机在同一个本地网络上。如果您可以将图像作为*广播*发送到这个本地网络，我的意思是所有主机一次接收图像，这将是一个性能提升：displathcer 不必拆分和重新发送部分，处理任务应该只选择接收到的整个图像的适当部分（x，y，宽度，高度）。我不知道您使用的是什么图像格式，但我很确定您不必解压缩整个图像，至少在垂直方向上您应该跳过不需要的区域。（您应该将图像拆分为全宽区域，以避免解压缩不需要的区域。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T16:25:50.420

合并来自单独分割输出的结果将是困难的部分。如果你碰巧通过一个段分裂怎么办？你会从每个分割的图像中得到一个片段，你必须将它们合并在一起。会有不确定的情况，因此您必须选择一个指标来决定何时合并两个区域。

如果这是一个问题，您可能想尝试使用[Seam Carving](http://en.wikipedia.org/wiki/Seam_carving)算法来生成不太可能与区域边缘相交的分割。Photoshop 的 Content-Aware Resize 工具使用接缝雕刻来查找图像中视觉上不重要的水平和垂直路径。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T11:57:28.790

在同意 Shai 和 japreiss 的同时，由于您的目标是图像分割，因此您将遇到边界问题（因为您需要邻域信息），对于图像处理部分，我建议类似

libpng：[http ://www.libpng.org/pub/png/libpng.html](http://www.libpng.org/pub/png/libpng.html)

看看这些 StackOverflow 问题：

1.  [如何使用 libpng 将 PNG 编码为缓冲区？](https://stackoverflow.com/questions/1821806/how-to-encode-png-to-buffer-using-libpng)
2.  [使用 libpng 将图像“拆分”为多个片段](https://stackoverflow.com/questions/4801478/using-libpng-to-split-an-image-into-segments)（尚未正确回答）

当您的缓冲区充满图像值时，读取和写入它的部分应该一点也不棘手。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-17T07:39:41.570

正如[japresis](https://stackoverflow.com/a/14879412/1714410)所指出的，合并生成的分割结果可能是您最难的部分。如果您使用的是基于图形切割的图像分割算法，您可以使用这种方法来扩充您的代码，[该方法](http://www2.maths.lth.se/vision/publdb/reports/pdf/strandmark-kahl-cvpr-2010.pdf)提供了一种执行并行操作的原则方法，并以最佳方式组合它们。

# ios - iOS CGContextSetRGBFillColor 参数太少

> ID：14834529
> 
> 赞同：0
> 
> 时间：2013-02-12T14:13:15.147
> 
> 标签：ios, core-graphics

我正在我的应用程序中构建一个 PDF 生成器类，并设置用于绘制文本、线条和图像的方法......

由于某种原因，我似乎无法将带有 CGColor 转换的 UIColor 传递给 CGContextSetRGBFillColor，但我可以将一个传递给 CGContextSetStrokeColorWithColor。

这是我的代码的相关部分：

```
CGContextSetRGBFillColor(currentContext, textColor.CGColor); 
```

我是否错过了为什么一个人会转换而另一个人不会？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:16:18.180

`CGContextSetRGBFillColor()`将组件作为单独的参数。你想要`CGContextSetFillColorWithColor`。

# c# - 字典输出之间的差异 和队列 > 在 C# 中

> ID：14834532
> 
> 赞同：1
> 
> 时间：2013-02-12T14:13:24.967
> 
> 标签：c#, dictionary, queue

谁能帮我理解为什么`for loops`下面两个的输出会产生不同的输出？

在我看来它们是相同的，但是原始`Dictionary`对象的`for loop`输出所有 9 个成员，但`Queue`对象`for loop`只输出前 5 个。

```
void test()
{
        Dictionary<int, string> d = new Dictionary<int, string>();

        d.Add(0, "http://example.com/1.html");
        d.Add(1, "http://example.com/2.html");
        d.Add(2, "http://example.com/3.html");
        d.Add(3, "http://example.com/4.html");
        d.Add(4, "http://example.com/5.html");
        d.Add(5, "http://example.com/6.html");
        d.Add(6, "http://example.com/7.html");
        d.Add(7, "http://example.com/8.html");
        d.Add(8, "http://example.com/9.html");

        Queue<KeyValuePair<int, string>> requestQueue = new Queue<KeyValuePair<int, string>>();

        // build queue
        foreach (KeyValuePair<int, string> dictionaryListItem in d)
        {
            requestQueue.Enqueue(dictionaryListItem);
            Console.WriteLine(dictionaryListItem.Value);
        }

        Console.WriteLine("          ");

        for (int i = 0; i < requestQueue.Count; i++)
        {
            Console.WriteLine(requestQueue.Peek().Value);
            requestQueue.Dequeue();
        }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T14:15:37.047

您需要在循环之前保存计数：

```
var count = requestQueue.Count;
for (int i = 0; i < count; i++)
{
    Console.WriteLine(requestQueue.Peek().Value);
    requestQueue.Dequeue();
} 
```

原因是它在 for 循环的每次迭代中都被评估：

在第一次迭代开始时，`requestQueue.Count`是 9，`i`是`0`。
第二次迭代：`requestQueue.Count`是 8，`i`是`1`.
第三次迭代：`requestQueue.Count`是 7，`i`是`2`.
第 4 次迭代：`requestQueue.Count`是 6，`i`是`3`.
第 5 次迭代：`requestQueue.Count`是 5，`i`是`4`.
第 6 次迭代：`requestQueue.Count`是 4，`i`是`5`. --> 退出循环。

注意：`Count`队列的 每次迭代都会减少，因为`Queue.Dequeue`删除队列中的第一项并将其返回给调用者。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T14:17:33.060

您可能想`while-loop`改用它，这在这里更有意义：

```
while (requestQueue.Count > 0)
{
    Console.WriteLine(requestQueue.Peek().Value);
    requestQueue.Dequeue();
} 
```

你的问题`for-loop`是[`Queue.Dequeue`](http://msdn.microsoft.com/en-us/library/system.collections.queue.dequeue%28v=vs.110%29.aspx)删除了第一个项目，这也减少了`Count`属性。这就是它“中途”停止的原因。

循环变量`i`仍在增加而`Count`正在减少。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T14:19:37.580

因为每次调用 requestQueue.Dequeue() 时都会更改 requestQueue 中的项目数量。而是将 count 的值存储在本地并以该本地作为上限进行循环。

# php - mail() 标头不会阻止邮件进入垃圾邮件文件夹

> ID：14834533
> 
> 赞同：0
> 
> 时间：2013-02-12T14:13:25.183
> 
> 标签：php, email, spam

我在我的 PHP 中使用这些标头来确保电子邮件避开垃圾邮件文件夹，但它们似乎运行得不是很好。

```
 $headers .= "Content-type: text/html; charset=iso-8859-1\r\n"; 
 $headers .= "From: hello@somebodylovesyou.co.uk <hello@somebodylovesyou.co.uk>\r\n"; 
 $headers .= "Reply-To: hello@somebodylovesyou.co.uk <hello@somebodylovesyou.co.uk>\r\n"; 
 $headers .= "Return-Path: hello@somebodylovesyou.co.uk <hello@somebodylovesyou.co.uk>\r\n";
 $headers .= "X-Priority: 3\r\n"; 
 $headers .= "X-MSMail-Priority: Normal\r\n"; 
```

上面的代码中是否有任何您可以更改或删除的内容可能有助于这项工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T14:39:18.177

同意@MarcB：phpMailer 非常简单，可以为您完成所有这些工作。去[这里](http://code.google.com/a/apache-extras.org/p/phpmailer/)下载它。然后按照[此处](http://code.google.com/a/apache-extras.org/p/phpmailer/wiki/BasicMail)的示例进行操作。您应该在大约十分钟内启动并运行。

但是，应该为您带来的真正关键点是，您可以告诉 phpMailer 通过与简单使用 PHP`mail()`函数不同的方法发送邮件。

通过您自己的 PHP 服务器发送邮件通常是邮件最终被标记为垃圾邮件的最终原因，因为接收邮件系统无法将您的 PHP 服务器识别为电子邮件的合法来源。所以他们认为这是垃圾邮件。SPF 和 DomainKeys 等系统可用于告诉全世界您的服务器是电子邮件的合法服务器，但它们可能需要时间来学习和配置，甚至需要更多时间让消息传递到所有第三方电子邮件服务器那里。

有了 PHP 的`mail()`功能，你别无选择；该邮件是通过您的 PHP 服务器发送的，因此除非您对域进行了非常仔细的配置，否则它很容易被标记为垃圾邮件。

但是使用 phpMailer，可以通过其他路由发送，例如[您的主 SMTP 服务器，甚至](http://code.google.com/a/apache-extras.org/p/phpmailer/wiki/BasicSmtp)[是 gmail 等](http://code.google.com/a/apache-extras.org/p/phpmailer/wiki/BasicGmail)第三方系统。

像这样通过公认的电子邮件服务器发送很可能会解决您的问题，但只能使用 phpMailer（或类似的类）来完成，而不能使用 PHP 的内置`mail()`函数。

同样，使用 phpMailer 配置所有这些都非常容易。

你可以花一个星期把头撞在墙上，再花一个星期设置 SPF 和 DomainKeys，再花一两个月等待 Hotmail 和朋友开始将你的 PHP 服务器识别为合法的电子邮件源......或者你可以花十个分钟学习 phpMailer 和其他十或二十分钟重写您的代码以使用它，让它通过已知的合法邮件服务器发送邮件，并立即接受您的电子邮件。你的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T14:17:26.787

避免垃圾邮件过滤器远远超出了您随电子邮件发送的标题。如果您的努力停止上面的代码，您将发现您在避免垃圾邮件过滤器方面的成功程度充其量是马马虎虎。

您应该记住一些提示，以帮助您的邮件避免被标记为 sapam：

1.  为您的域设置[DomainKeys](http://en.wikipedia.org/wiki/DKIM)

2.  为您的域设置[SPF](http://en.wikipedia.org/wiki/Sender_Policy_Framework)

3.  在您的电子邮件中添加退订链接

4.  为您的邮件服务器的 IP 地址设置反向 PTR

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-08-13T14:37:03.590

$headers .= "内容类型: text/html; charset=utf-8\r\n";

将在 MSN 或 HOTMAIL 上工作

# delphi - Delphi - 如何使用启动/停止功能以毫秒或纳秒为单位制作计时器？

> ID：14834534
> 
> 赞同：3
> 
> 时间：2013-02-12T14:13:29.863
> 
> 标签：delphi, timer, while-loop, milliseconds

我在 Delphi7 中寻找以毫秒或纳秒为单位的计时器。我必须通过顺序搜索检查三个 ISAM 文件的速度。第一个 ind 文件包含 50 个字符串，例如“record_0”到“record_50”。第二个 - “record_0”到“record_500”，第三个 - “record_0”到“record_5000”。我已经实现了一切，但我不知道如何制作计时器。我正在将一个字符串与每个 ISAM 文件中的最后一项进行比较。这是我的第一个 ind 文件的代码：

```
procedure TForm1.Button1Click(Sender: TObject);
  var i:integer;
  var content : String[20];
  var indexCounter:integer;
  var keyword:string;
begin
  //First ISAM file
  AssignFile(indF1, 'index1.ind');
  ReWrite(indF1);
  Reset(indF1);
  for i:=0 to 49 do begin
    content := 'record_';
    content := content + IntToStr(i+1);
    index1.index1 := content;
    index1.position1 := FileSize(indF1);
    Seek(indF1, FileSize(indF1));
    write(indF1, index1);
  end;
  CloseFile(indF1);
  Label12.Caption := FileSizeStr('index1.ind');

  //Sequential search in first ind file
  Reset(indF1);
  keyword := 'record_50';
  indexCounter := 0;
  //start timer
  while not Eof(indF1) do begin
    Seek(indF1, indexCounter);
    Read(indF1, Index1);
    if (keyword = Index1.index1) then begin
      //stop timer;
      //Label20 := milliseconds/nanoseconds;
      //return/break while loop (result := -1; exit;) ???
    end;
    indexCounter := indexCounter + 1;
  end; 
```

我需要一个过程/函数，这样当我调用它时，它应该以毫秒或纳秒为单位开始计数，并在找到字符串时停止（它是每个 ind 文件中的最后一个字符串）并显示遍历所有文件的经过时间。另外我不知道如何打破while循环。提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-12T14:23:33.860

`TStopWatch`此处描述的类[`"delphi-high-performance-timer-tstopwatch"`](http://delphi.about.com/od/windowsshellapi/a/delphi-high-performance-timer-tstopwatch.htm)具有所需的所有功能（对于 Delphi-7）。

它在以后的 Delphi 版本 (Delphi-2010) 中实现，作为单元诊断中的高级记录。

例子：

```
var
  sw : TStopWatch;
  elapsedMilliseconds : cardinal;
begin
  ...
  sw := TStopWatch.Create() ;
  try
    sw.Start;

    while not Eof(indF1) do begin
      Seek(indF1, indexCounter);
      Read(indF1, Index1);
      if (keyword = Index1.index1) then begin
        sw.Stop;
        Label20.Caption := IntToStr(sw.ElapsedMilliseconds);
        break; // break while loop
      end;
      indexCounter := indexCounter + 1;
    end;
    ...
  finally
    sw.Free;
  end;
end; 
```

要打破 while 循环，只需`break;`在条件测试中执行。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-12T15:11:23.543

使用[QueryPerformanceFrequency](http://msdn.microsoft.com/en-us/library/ms644905.aspx)和[QueryPerformanceCounter](http://msdn.microsoft.com/en-us/library/ms644904%28VS.85%29.aspx)。第一个函数返回每秒的单位数，第二个函数返回一个值。

```
lFreq: Int64;
InitialF, FinalF: Int64;

if QueryPerformanceFrequency(lFreq) then
  // hi-res timer is supported
else
  // hi-res timer is not supported

QueryPerformanceCounter(InitialF);
// do something you want to time
QueryPerformanceCounter(FinalF);
// duration of the time of something is FinalF - InitialF in "units"
// divide by lFreq to get the amount of time in seconds, 
// this will be an Extended type. 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-12T23:02:43.540

找到了这个简单的代码：

```
var
 StartTime : Cardinal;
begin
  StartTime := GetTickCount;
  //code to do
  ShowMessage(Format('Elapsed time %d ms', [GetTickCount - StartTime])); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T14:17:45.253

使用Jedi JCL 的[JclCounter](http://wiki.delphi-jedi.org/wiki/JCL_Help%3aTJclCounter)。或者，如果您不想使用 Jedi，请使用 Win Api QueryPerformanceCounter。

# sql-server - JDBC 执行带有返回值和输入/输出参数的 SQL Server 存储过程

> ID：14834544
> 
> 赞同：2
> 
> 时间：2013-02-12T14:14:26.603
> 
> 标签：sql-server, stored-procedures, jdbc

我有一个存储过程，它接受 1 个输入值、2 个输出参数并在执行时返回一个值

在互联网上，我看到了使用 Call 的参考资料

```
CallableStatement cstmt = conn.prepareCall("{call ? = spName(?, ?, ?)}");
cstmt.registerOutParameter(1, Types.INTEGER);
cstmt.setObject(2, Types.INTEGER);
cstmt.registerOutParameter(3, Types.NVARCHAR);
cstmt.registerOutParameter(4, Types.NVARCHAR); 
```

但这给了我错误

```
"Incorrect syntax near '{'" 
```

然后我决定像 SQL Management Studio 生成的 SQL 代码一样：

```
CallableStatement cstmt = conn.prepareCall("exec ? = spName ?, ?, ?");
cstmt.registerOutParameter(1, Types.INTEGER);
cstmt.setObject(2, Types.INTEGER);
cstmt.registerOutParameter(3, Types.NVARCHAR);
cstmt.registerOutParameter(4, Types.NVARCHAR); 
```

但这给了我错误

```
"Incorrect syntax near '='" 
```

我认为这是因为查询被转换为

```
"exec @P1 OUT = spName @P2, @P3 OUT, @P4 OUT" 
```

它在 SQL Management Studio 上也不起作用，因为 'OUT' 出现在 '=' 之前

这让我没有想法，因为这两种方式都行不通。

有什么建议么？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T20:08:09.080

调用存储过程的语法是：

```
{[?=]call procedure-name[([parameter][,[parameter]]...)]} 
```

因此，您的第一个示例在 JDBC 调用转义的解析器中触发了一个异常，因为您将其放在`call`了返回值之前。我不确定第二个问题。

因此，如果您将第一个示例修改为：

```
CallableStatement cstmt = conn.prepareCall("{?=call spName(?, ?, ?)}"); 
```

您可以在 MSDN 上找到专门针对 Microsoft JDBC 驱动程序的更多信息：

*   [将语句与存储过程一起使用](http://msdn.microsoft.com/en-us/library/ms378046.aspx)
*   [使用带有返回状态的存储过程](http://msdn.microsoft.com/en-us/library/ms378371.aspx)
*   [使用带有输出参数的存储过程](http://msdn.microsoft.com/en-us/library/ms378108.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-23T17:48:38.287

此外，对于没有任何参数的存储过程，它看起来就像......

```
this.connection.prepareCall("{call dbo.storedProcedure()}") 
```

# java - 如何在 Java 类中实现运算符

> ID：14834553
> 
> 赞同：10
> 
> 时间：2013-02-12T14:14:54.693
> 
> 标签：java, operators

我正在尝试创建一个无符号整数类。

```
public class UnsignedInteger extends Number implements Comparable<UnsignedInteger> 
    { 
    ... 
    } 
```

有没有办法实现运算符，例如；+、-、*、/、<<、>>、|、^、>>>、<<

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-12T14:16:08.610

[Java 不支持运算符重载](https://stackoverflow.com/q/77718/1679863)。您唯一的选择是定义方法，如`add()`, `subtract()`,`multiply()`等，并在那里编写逻辑，并为特定操作调用它们。

您可以查看[BigInteger](http://docs.oracle.com/javase/7/docs/api/java/math/BigInteger.html)类，了解如何定义方法来支持各种操作。如果有兴趣，您甚至可以浏览源代码，您可以在*jdk*主目录的*src*文件夹中找到该源代码。

 ** * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-12T14:28:17.253

已经有 5 个答案说你不能重载运算符，但我想指出你根本不能在**对象**上使用算术运算符。它们仅适用于原始类型（`int`,`double`等）。

以下代码编译的唯一原因

```
Integer a = 1, b = 2;
Integer c = a + b; 
```

是因为 Java 编译器将其编译为

```
Integer a = Integer.valueOf(1), b = Integer.valueOf(2);
Integer c = Integer.valueOf(a.intValue() + b.intValue()); 
```

如果您希望它适用于*您*`UnsignedInteger`的.

 ** * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-12T14:15:48.943

不，您不能覆盖 Java 中的运算符。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-12T14:17:21.813

在 Java 中无法覆盖运算符。您可以做的是定义表示操作的方法，例如标准库中的[BigDecimal](http://docs.oracle.com/javase/1.5.0/docs/api/java/math/BigDecimal.html)或[BigInteger](http://docs.oracle.com/javase/1.5.0/docs/api/java/math/BigInteger.html)。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-03-18T02:31:43.420

有一个名为“ [Java-OO](https://amelentev.github.io/java-oo/) ”的 javac-plugin（像 Lombok 这样的注释处理器），它为 Java 添加了运算符重载。

它允许您非常轻松地将运算符重载添加到您自己的类中。除此之外，Java API 的许多内置类在使用此插件时也支持运算符重载。 *（例如：你可以用 list[6] 和 map["hello"] 代替 list.get(6) 或 map.get("hello")）*

您需要做的就是在使用 javac 编译时将 .jar 包含在类路径中。

所有主要 IDE 都有插件：Eclipse、Netbeans 和 IntelliJ IDEA。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-02-12T14:16:08.187

不，Java 不支持运算符重载。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-02-12T14:18:58.957

Java 不支持运算符重载，他们认为这是一种不好的做法，因为他们知道它们为类重载`+`和`+=`运算符`String`**

# android - Gallery Intent 不适用于 Android 4.0.3

> ID：14834561
> 
> 赞同：1
> 
> 时间：2013-02-12T14:15:12.883
> 
> 标签：android, android-layout, android-intent, android-gallery

这是我从图库中获取图像的代码

```
intent = new Intent(Intent.ACTION_PICK,android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
intent.setType("image/*");
intent.setAction(Intent.ACTION_GET_CONTENT);
startActivityForResult(intent, GALLERY_INTENT); 
```

这是`onActivityResult()`方法

```
if(requestCode==2 && resultCode == RESULT_OK ){

            Uri _uri = data.getData();
            if (_uri != null) {

            //User had pick an image.
            Cursor cursor = getContentResolver().query(_uri, new String[] { android.provider.MediaStore.Images.ImageColumns.DATA }, null, null, null);
            cursor.moveToFirst();

            //Link to the image
            final String imageFilePath = cursor.getString(0);
            cursor.close();

            Intent intent = new Intent(HomeActivity.this,ConfirmPicture.class);
            intent.putExtra(INTENT_KEY_FINISH_ACTIVITY_ON_SAVE_COMPLETED, true);
            intent.putExtra("IMAGE_PATH", imageFilePath);
            intent.putExtra("OUTLET_ID", 0);
            intent.putExtra("OUTLET_NAME", "name");
            startActivity(intent);
           } 
```

此代码在 android 2.3.4 版本上运行良好，但是当我在 4.0.3 设备上测试此代码时，它不起作用，可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T08:27:58.297

我已经解决了这个问题

```
 Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE );
            ZootOutObject.objectUri = getImagePath();
            intent.putExtra(MediaStore.EXTRA_OUTPUT, ZootOutObject.objectUri);
            startActivityForResult(intent, CAMERA_INTENT); 
```

if(requestCode == 1 && resultCode == RESULT_OK){

```
 String pathName=Environment.getExternalStorageDirectory()+"/folder_name/image_zootout.jpg";

             Intent intent = new Intent(getApplicationContext(),PhotoEditorActivity.class);
             intent.putExtra("IMAGE_PATH", pathName);
             intent.putExtra("OUTLET_ID", 0);
             intent.putExtra("OUTLET_NAME", "");
             startActivity(intent);

       }

private Uri getImagePath() {
    // If sd card is available
        if(android.os.Environment.getExternalStorageState().equals(android.os.Environment.MEDIA_MOUNTED)){
            String path = Environment.getExternalStorageDirectory() .getAbsolutePath();
            filename = "image_zootout.jpg";
            path += "/folder_name";
            File file = new File(path);
            if (!file.isDirectory()) {
                file.mkdirs();
            }
            path += "/" + filename;
            File imageFile = new File(path);
            if (!imageFile.exists()) {
                try {
                    imageFile.createNewFile();
                } catch (IOException e) {
                    e.printStackTrace();
                    return null;
                }
            }
            return Uri.fromFile(imageFile);
        }else{ // If sd card is not available
            return null;
        }
    } 
```

# php - 不输入字符显示查询

> ID：14834563
> 
> 赞同：0
> 
> 时间：2013-02-12T14:15:12.513
> 
> 标签：php, jquery, mysql, jquery-events

我在使用“google like”搜索引擎时遇到问题。当页面加载时，它期望输入框中的一个字符在 div 内显示结果。

如何在输入框中不输入任何字符的情况下显示所有数据库内容？下面是三个文件：

索引.html

```
<html>
<head>
<title></title>
</head>
<body>
Caută analizele în baza noastră de date.<br>Taxa de urgență este de 35 Ron
<p align ="right">
<input type="text" id="go" class="field" name="go" onclick="this.value='';" onfocus="this.select()" onblur="this.value=!this.value?'Caută analiza dorită':this.value;" value="Caută analiza dorită"/>
<input type="submit" name="search" id="submit" value="Cauta" /><br/>
<div id="search_query"></div>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="js/instant.js"></script>
</p>
</body>
</html> 
```

搜索.php

```
<?php
$conn = mysql_connect("localhost","user","pass");

mysql_select_db("db");
mysql_set_charset("UTF8", $conn);

if(isset($_POST['search_query'])){
$search_query = mysql_real_escape_string(htmlentities($_POST['search_query']));

$search_query_x = explode(",",$search_query);   

foreach($search_query_x as $search_each){
@$x++;
if($x==1)
@$construct.="Den LIKE '%$search_each%'";
else
$construct.="AND Den LIKE '%s$search_each%'";
}
$construct ="SELECT * FROM biochimie1 WHERE $construct";
$run = mysql_query($construct) or die(mysql_error());
$foundnum = mysql_num_rows($run);
// Define $color=1
$color="1";
if ($foundnum==0){
echo "Ne pare rau dar nu există rezultate pentru <strong><font color='red'>$search_query</font></strong></br></br> Vă rugăm să verificați dacă ați scris corect";
}
else{
echo'<p align="center">';
echo "$foundnum \n";
echo ' rezultate găsite în urma căutării!</p>';
        echo "<table id='table1' border='0'width='500'>         
<tr>
<th width='150' align='center' valign='middle'>Denumire Analize</th>
<th width='50' align='center' valign='middle'>Preț</th>
<th width='100' align='center' valign='middle'>Zile de recoltare</th>
<th width='100' align='center' valign='middle'>Termen de eliberare a rezultatelor</th>
<th width='100' align='center' valign='middle'>Se poate lucra în regim de urgență</th>
</tr></table>";
while($runrows = mysql_fetch_assoc($run))
{
    $NrCrt = $runrows ['NrCrt'];
    $denanalize = $runrows ['Den'];
    $pret = $runrows ['Pret'];
    $rec = $runrows ['Rec'];
    $rez = $runrows ['Rez'];
    $obs = $runrows ['Obs'];
  echo "<table border='0'>";
  // If $color==1 table row color = #FFC600
if($color==1){
echo "
  <tr bgcolor='#efefef'>
    <td width='150' align='center' valign='middle'>$denanalize</td>
    <td width='50' align='center' valign='middle'>$pret</td>
    <td width='100' align='center' valign='middle'>$rec</td>
    <td width='100' align='center' valign='middle'>$rez</td>
    <td width='100' align='center' valign='middle'>$obs</td>
  </tr>
</table>";
// Set $color==2, for switching to other color
$color="2";
}
// When $color not equal 1, use this table row color
else {
echo "<tr bgcolor='#eaeaea'>
    <td width='150' align='center' valign='middle'>$denanalize</td>
    <td width='50' align='center' valign='middle'>$pret</td>
    <td width='100' align='center' valign='middle'>$rec</td>
    <td width='100' align='center' valign='middle'>$rez</td>
    <td width='100' align='center' valign='middle'>$obs</td>
  </tr>";
  // Set $color back to 1
$color="1";
}echo "
</table>";
}
}
}
else{
    echo 'An ERROR has occured';
}
?> 
```

和 Instant.js 文件

```
$('#go').keyup(function(){
                        var search_query=$(this).val();
                        $.post('search.php', {search_query: search_query},function(searchq){
                        $('#search_query').html(searchq);
                    });
}); 
```

谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:18:03.217

它将在负载下工作：

```
$(document).ready(function(){
                        var search_query=$(this).val();
                        $.post('search.php', {search_query: search_query},function(searchq){
                        $('#search_query').html(searchq);
                    }); 
```

# blackberry-10 - BB 10 开发环境

> ID：14834564
> 
> 赞同：1
> 
> 时间：2013-02-12T14:15:14.017
> 
> 标签：blackberry-10, blackberry-cascades

大家好，我正在使用以下工具和 SDK 在 Windows 中进行 Blackberry Native 开发

1.  10 原生 SDK 10.0.9.1673
2.  BlackBerry10Simulator-Installer-BB10_0_10
3.  虚拟机 VMware-player-4.0.3-703057

让我知道，以下配置对于 BB 级联开发是正确的。因为我遇到了以下问题

1.  当我尝试在模拟器上运行二进制文件时，“ldd:FATAL: Unresolved symbol "_ZN2bb8cascades11QmlDocumentC1Ev" 从可执行文件调用”错误。
2.  如果我在 SDk 中导入 BB Cascaded 示例项目，则默认显示“BAR PACKAGES”文件夹，如果我创建自己的项目，则“BAR PACKAGES”则不会显示。

* * *

![在此处输入图像描述](../Images/9d7a1f34a25b43ebfb9f6c7912fa6467.png)

实际上这不是一个答案我没有任何选择图片发布这就是我遵循这种方式的原因，这里我向您展示我的 QNX-IDE 的快照，我已经从示例项目中导入了 GoodCitizen 和 Falling Blocks。Good-Citizen 项目在虚拟机上编译和运行都很好。但是在 Falling Blocks Project 中，没有 BAR 包创建为什么会发生这种情况，任何人都可以向我解释一下这个场景。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-04T12:35:12.807

我认为您需要更新 api 级别

1.  帮助-->更新 api 级别并安装新软件
2.  不断更新您的工具以避免错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T17:31:37.857

您是否在 main.cpp 或 app.cpp 中声明了 QML 文档？

```
QmlDocument *qml = QmlDocument::create("asset:///main.qml").parent(this); 
```

# java - SqlJet 事务滥用错误

> ID：14834565
> 
> 赞同：3
> 
> 时间：2013-02-12T14:15:17.580
> 
> 标签：java, android, sqlite, sqljet

我在使用 SqlJet Transactions 时尝试访问我的数据库，但我一直收到此错误

```
org.tmatesoft.sqljet.core.SqlJetException: MISUSE: error code is MISUSE 
```

这是我的代码：

```
SqlJetDb db = null;

            try {
                File dbFile = new File(Configuration.DATABASE_NAME);

                db = SqlJetDb.open(dbFile, true);
                db.getOptions().setAutovacuum(true);
                db.beginTransaction(SqlJetTransactionMode.READ_ONLY);
                ISqlJetTable table = db.getTable("customers");
                ISqlJetCursor cursor = table.order(table.getPrimaryKeyIndexName());
                if (!cursor.eof()) {
                    do {
                        getInitData(cursor);
                    } while (cursor.next());
                }
            } catch (Exception e) {
                e.printStackTrace();
            } finally {
                try {
                    db.commit();
                } catch (Exception e) {
                    e.printStackTrace();
                }
            } 
```

有人知道这个问题有什么问题吗？由于这个列表，实际的库使用不正确，但我已经检查过了，对我来说没有任何问题。 [http://grepcode.com/file/repo1.maven.org/maven2/org.tmatesoft.sqljet/sqljet/1.0.2/org/tmatesoft/sqljet/core/SqlJetErrorCode.java#SqlJetErrorCode](http://grepcode.com/file/repo1.maven.org/maven2/org.tmatesoft.sqljet/sqljet/1.0.2/org/tmatesoft/sqljet/core/SqlJetErrorCode.java#SqlJetErrorCode)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-19T21:17:56.977

发生这种情况是因为您试图打开已被另一个进程打开的数据库。它发生在我身上是因为 db 是由 Firefox SQLite Manager 打开的，但基本上它可能由访问您的 DB 的任何其他线程或进程发生。

# javascript - 使用 jQuery.form 通过 ajax 将 input[type=file] 发送到 CodeIgniter

> ID：14834569
> 
> 赞同：0
> 
> 时间：2013-02-12T14:15:23.943
> 
> 标签：javascript, jquery, ajax, forms, codeigniter

这是基本`html`形式：

```
<?php echo form_open( 'controller' ); ?>  
  <fieldset>
    <input type="text" name="field_name_1" value="<?php echo set_value('field_name_1'); ?>"/>
    <input type="file" name="field_name_2" value="<?php echo set_value('field_name_2'); ?>"/>
    // more dynamically added form fields
    <input type="submit" />
  </fieldset>
<?php echo form_close(); ?> 
```

**我希望我通过[jQuery Form Plugin](http://jquery.malsup.com/form/)`input[type=file]`被发送到它的控制器（与其他输入类型一起）。`ajax`**

我有下面的代码，它适用于除`input[type=file]`.

```
<script src="http://malsup.github.com/jquery.form.js"></script> 

var options = {
    url: "<?php echo site_url('new_account/validate_new_account'); ?>",
    type: 'POST',
    dataType: 'json',
    success: function(data) {

      if (data.length === 0) {
        alert('Form successfully submitted!');
      } else {
        alert("Some fields weren't answered successfully. Please answer them.");
        // attach server-side form validations to respective fields
        $.each(data, function(key, value){
          var container = '<div class="error">'+value+'</div>';
          $('.form-element input[name="'+key+'"]').after(container);
        });
      }

    }
};

$('#main-submit').click(function(e) {
  $('#professional-form').valid(); // jQuery validate
  $('#professional-form').ajaxSubmit(options);  
  e.preventDefault(); // redirect to other place only if successful form 
}); 
```

其他输入字段发送成功，但**CodeIgniter 仍然没有收到文件**。你们知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-19T12:54:04.567

如以下链接所述，可以通过带有 jquery.form.js 的 ajax 上传文件：

[http://malsup.com/jquery/form/#file-upload](http://malsup.com/jquery/form/#file-upload)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T14:17:17.647

通常无法通过标准 ajax 发布来上传文件。但是，有一些工具允许异步上传文件：

*   [http://blueimp.github.com/jQuery-File-Upload/](http://blueimp.github.com/jQuery-File-Upload/)
*   [http://www.plupload.com/](http://www.plupload.com/)

您不能使用标准 jquery 帖子执行此操作的原因是出于安全原因 javascript 无法读取本地文件。这些工具使用各种解决方案（例如隐藏的 iframe、Flash 或 HTML5 技术）绕过限制，具体取决于浏览器上可用的内容。

# html - 清除修复 HTML 在 chrome 中不起作用？

> ID：14834570
> 
> 赞同：2
> 
> 时间：2013-02-12T14:15:27.867
> 
> 标签：html, css, css-float

我创建了[**这个简单的 html**](http://jsbin.com/ukaxav/2/edit)：

这里有 2 个 SPAN。

通过清除浮动，一个应该在另一个下方。

![在此处输入图像描述](../Images/dbc1cbb91291efa7a758e3b64cd0984d.png)

该`bbb`元素有`float:left`

我使用了（在`aaa`元素上）Facebook 的“clearfix”CSS，它是：

```
 .clearfix:before { content: ""; display: table; }
 .clearfix:after {  content: ".";
    display: block;
    height: 0;
    clear: both;
    visibility: hidden;}

 .clearfix { zoom: 1; } 
```

这是一种有效的方式（就像 facebook 所做的那样），并且如此[处所述](http://robertnyman.com/2007/04/12/how-to-clear-css-floats-without-extra-markup-different-techniques-explained/)

但是它在 FireFox 中有效：（看上图）

但在 chrome (v 24) 中却没有。

![在此处输入图像描述](../Images/744083cc42047d8aa49df254f7c1cfca.png)

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:36:44.077

您的 jsbin 示例有两个拼写错误/语法错误，并且 clearfix 代码不正确。

1.  `<span class=" clearfix">`你在 clearfix 之前有一个空格
2.  `<span class='fll'>bbbbb </span>`你有单引号而不是双引号。

将您的 html 更改为：

```
 <div class="clearfix">aaa </div>
      <div class="fll">bbbbb </div> 
```

和你的CSS：

```
.clearfix:after {
    visibility: hidden;
    display: block;
    font-size: 0;
    content: " ";
    clear: both;
    height: 0;
    }
.clearfix { display: inline-table; }
* html .clearfix { height: 1%; }
.clearfix { display: block; } 
```

它可以工作（所有浏览器，包括 IE6-7）[http://jsbin.com/ukaxav/19/](http://jsbin.com/ukaxav/19/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T14:21:31.650

```
.clearfix { display: block; } 
```

不是更“干净一点”吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T14:22:33.440

添加**显示：内联块；**属性到父 div。

代码：

```
<div style="height: 100%; border: 1px solid blue;display: inline-block;"> 
<span class=" clearfix" style="">aaa </span>
<span class="fll">bbbbb </span>
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T14:25:37.047

Clearfix 旨在清除浮动。**意思是，在一个包含**浮点数的元素上。不是为了清除以前的浮动。所以在你的问题中，你没有把 clearfix 放在正确的地方，或者误解了原理。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T14:31:24.527

`width: 100%;`在你的添加一个`fll`

所以，

```
.clearfix:before {
    content: "";
    display: table; }

.clearfix:after {
    content: ".";
    display: block;
    height: 0;
    clear: both;
    visibility: hidden; }

.clearfix { zoom: 1; }

 .fll
{
    float:left;
    width: 100%;
} 
```

# javascript - 排列数组元素

> ID：14834571
> 
> 赞同：22
> 
> 时间：2013-02-12T14:15:27.817
> 
> 标签：javascript, arrays, algorithm, sorting, ranking

我需要一种算法来对 Javascript 中的数组元素进行排名。

示例：我有一个数组如下：

```
[79, 5, 18, 5, 32, 1, 16, 1, 82, 13] 
```

我需要按值对条目进行排名。所以`82`应该收到 rank `1`，`79`rank`2`等。如果两个条目具有相同的值，它们会收到相同的排名，并且会提高较低值的排名。

所以对于这个数组，新的排名数组将是：

```
[2, 7, 4, 7, 3, 9, 5, 9, 1, 6] 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-02-12T14:17:00.420

```
var arr = [79, 5, 18, 5, 32, 1, 16, 1, 82, 13];
var sorted = arr.slice().sort(function(a,b){return b-a})
var ranks = arr.map(function(v){ return sorted.indexOf(v)+1 });
console.log(ranks);
```

结果 ：

```
[2, 7, 4, 7, 3, 9, 5, 9, 1, 6] 
```

如果您想与旧浏览器兼容，您可能必须[为 indexOf](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)和[map](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map)定义一个 shim （注意，如果您想对非常大的数组快速执行此操作，您最好使用`for`循环并使用对象作为 map而不是`indexOf`）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-12T15:14:33.283

这不适用于较旧的浏览器，因为它使用[ECMAScript 5 功能](http://kangax.github.com/es5-compat-table/)，但它允许您快速简洁地生成一个排名数组，即使对于非常大的数组也是如此。（它不使用`indexOf`which 进行线性搜索，因此对于大型数组可能会很慢。）

```
function cmp_rnum(a,b) {
    // comparison function: reverse numeric order
    return b-a;
}
function index_map(acc, item, index) {
    // reduction function to produce a map of array items to their index
    acc[item] = index;
    return acc;
}
function ranks(v) {
    var rankindex = v.slice().sort(cmp_rnum).reduceLeft(index_map, Object.create(null));
    // reduceLeft() is used so the lowest rank wins if there are duplicates
    // use reduce() if you want the highest rank
    return v.map(function(item){ return rankindex[item]+1; });
} 
```

示例输出：

```
> ranks([79, 5, 18, 5, 32, 1, 16, 1, 82, 13]);
  [2, 7, 4, 7, 3, 9, 5, 9, 1, 6] 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-02-19T07:56:12.833

```
function rank(arr, f) {
    return arr
    .map((x, i) => [x, i])
    .sort((a, b) => f(a[0], b[0]))
    .reduce((a, x, i, s) => (a[x[1]] =
        i > 0 && f(s[i - 1][0], x[0]) === 0 ? a[s[i - 1][1]] : i + 1, a), []);
} 
```

用法：

```
rank([79, 5, 18, 5, 32, 1, 16, 1, 82, 13], (a, b) => b - a);
// [2, 7, 4, 7, 3, 9, 5, 9, 1, 6] 
```

看起来有点难看，但它并没有使用或对象/地图，所以它不仅运行速度快一点，而且更重要的是，它尊重了[比较函数](https://stackoverflow.com/a/24080786)`indexOf()`定义的“相同排名”的含义。如果使用或对象，“相同排名”只能表示或。`indexOf()``a === b``String(a) === String(b)`

或者，使用`findIndex()`：

```
function rank(arr, f) {
    const sorted = arr.slice().sort(f)
    return arr.map(x => sorted.findIndex(s => f(x, s) === 0) + 1)
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-09-28T03:49:09.317

JavaScript ES6 简单的两行解决方案。

```
var arrayRankTransform = arr => {
  const sorted = [...arr].sort((a, b) => b - a);
  return arr.map((x) => sorted.indexOf(x) + 1);
};

console.log(arrayRankTransform([79, 5, 18, 5, 32, 1, 16, 1, 82, 13]));
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-07-27T12:35:53.557

我不擅长 Javascript，但在 PHP 中，可以通过以下方式轻松完成。精通 JavaScript 的人可以提出相关代码。

```
$marks = [79, 5, 18, 5, 32, 1, 16, 1, 82, 13];

public function getRank($marks) {
    $rank = 1; $count = 0; $ranks = [];
    //sort the marks in the descending order
    arsort($marks,1);
    foreach($marks as $mark) {
      //check if this mark is already ranked
      if(array_key_exists($mark, $ranks)) {
       //increase the count to keep how many times each value is repeated
       $count++;
       //no need to give rank - as it is already given
      } else {
        $ranks[$mark] = $i+$j;
        $i++;
      }
    return $ranks;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-03-04T19:01:03.120

这应该适用于数组中的重复键

```
function rank(arry) {
    let sorted = arry.slice().sort(function (a, b) {
        return b - a
    });

    let currentRank = sorted.length;
    let rankValue = null;
    let ranks = [];

    sorted.forEach(value => {
        if(value !== rankValue && rankValue !==null) {
            currentRank--;
        }

        ranks.push({value,currentRank});
        rankValue = value;
    });

    let mapRanksToArrayValues = arry.map(function (x) {
        let _rank = null;
        ranks.forEach( rank => {
            if(rank.value === x ) {
                _rank =  rank.currentRank;
                return;
            }
        });
        return _rank;
    });

    return mapRanksToArrayValues;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-07-10T18:07:17.563

我有同样的功课，这个工作很好，如果你是新手，也更容易理解。

```
function rankings(arr) {
    let rankingsArr = [];
    for (let i = 0; i < arr.length; i++) {
        var rank = 1;
        for (let j = 0; j < arr.length; j++) {
            if (arr[j] > arr[i]) rank++;
        }
        rankingsArr.push(rank);
    }
    return rankingsArr;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-01-08T01:20:12.670

恕我直言，这里的几个解决方案是不正确的，因为它们不能正确处理重复值之后出现的值。这样的追随者应该获得下一个排名。最高排名应该等于数组中唯一值的数量。恕我直言，这个解决方案（在 PHP 中）是正确的。基本上@Suresh 的解决方案已删除了错误。

```
 function rank($marks){
    $rank = 1; $ranks = [];
    rsort($marks,SORT_NUMERIC);
    foreach($marks as $mark) {
      if(!isset($ranks[$mark])) {
        $ranks[$mark] = $rank++;
      }
    }
    return $ranks;
   } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-04-28T16:00:29.233

这种替代方式不需要对输入数组进行排序：

```
// O(n^2)
const rank = (arr) => {
  // Create a temporary array to keep metadata 
  // regarding each entry of the original array
  const tmpArr = arr.map(v => ({
    value: v,
    rank: 1,
  }));

  // Get rid of douplicate values
  const unique = new Set(arr);

  // Loops through the set
  for (let a of unique) {
    for (let b of tmpArr) {
      // increment the order of an element if a larger element is pressent
      if (b.value < a) {
        b.rank += 1;
      }
    }
  }

  // Strip out the unnecessary metadata 
  return tmpArr.map(v => v.rank);
};

console.log(rank([2600, 200, 36, 36, 400, 2, 0, 0]));
// => [1, 3, 4, 4, 2, 5, 6, 6]

console.log(rank([79, 5, 18, 5, 32, 1, 16, 1, 82, 13]));
// => [2, 7, 4, 7, 3, 8, 5, 8, 1, 6]
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-08-28T22:33:58.783

对于我正在编写的操作调度脚本，我需要相同的代码。我使用了对象及其属性/键，它们可以具有任何值并且可以在需要时访问。此外，据我在一些文章中读到，在对象中搜索属性可能比在数组中搜索更快。

下面的脚本包含三个简单的步骤：

1.  对值进行排序（升序或降序对于脚本的其余部分无关紧要）

2.  找出每个值的排名和出现次数

3.  使用步骤 2 中的数据将给定值替换为等级

笔记！下面的脚本不会输出重复的排名，而是增加重复值/元素的排名。

```
function rankArrayElements( toBeRanked ) {

// STEP 1
var toBeRankedSorted = toBeRanked.slice().sort( function( a,b ) { return b-a; } ); // sort descending
//var toBeRankedSorted = toBeRanked.slice().sort( function( a,b ) { return a-b; } ); // sort ascending

var ranks = {}; // each value from the input array will become a key here and have a rank assigned
var ranksCount = {}; // each value from the input array will become a key here and will count number of same elements

// STEP 2
for (var i = 0; i < toBeRankedSorted.length; i++) { // here we populate ranks and ranksCount
    var currentValue = toBeRankedSorted[ i ].toString();

    if ( toBeRankedSorted[ i ] != toBeRankedSorted[ i-1 ] ) ranks[ currentValue ] = i; // if the current value is the same as the previous one, then do not overwrite the rank that was originally assigned (in this way each unique value will have the lowest rank)
    if ( ranksCount[ currentValue ] == undefined ) ranksCount[ currentValue ] = 1; // if this is the first time we iterate this value, then set count to 1
    else ranksCount[ currentValue ]++; // else increment by one
}

var ranked = [];

// STEP 3
for (var i = toBeRanked.length - 1; i >= 0; i--) { // we need to iterate backwards because ranksCount starts with maximum values and decreases
    var currentValue = toBeRanked[i].toString();

    ranksCount[ currentValue ]--;
    if ( ranksCount[ currentValue ] < 0 ) { // a check just in case but in theory it should never fail
        console.error( "Negative rank count has been found which means something went wrong :(" );
        return false;
    }
    ranked[ i ] = ranks[ currentValue ]; // start with the lowest rank for that value...
    ranked[ i ] += ranksCount[ currentValue ]; // ...and then add the remaining number of duplicate values
}

return ranked;} 
```

我还需要为我的脚本做些别的事情。

上面的输出有以下含义：

*   index - 输入数组中元素的 ID

*   value - 输入数组中元素的排名

而且我需要基本上“用值交换索引”，这样我就有了一个元素 ID 列表，按照它们的等级排列：

```
function convertRanksToListOfElementIDs( ranked ) {  // elements with lower ranks will be first in the list

var list = [];

for (var rank = 0; rank < ranked.length; rank++) { // for each rank...
    var rankFound = false;
    for (var elementID = 0; elementID < ranked.length; elementID++) { // ...iterate the array...
        if ( ranked[ elementID ] == rank ) { // ...and find the rank
            if ( rankFound ) console.error( "Duplicate ranks found, rank = " + rank + ", elementID = " + elementID );
            list[ rank ] = elementID;
            rankFound = true;
        }
    }
    if ( !rankFound ) console.error( "No rank found in ranked, rank = " + rank );
}

return list;} 
```

还有一些例子：

待排名：

[36、33、6、26、6、9、27、26、19、9]

[12、12、19、22、13、13、7、6、13、5]

[30, 23, 10, 26, 18, 17, 20, 23, 18, 10]

[7, 7, 7, 7, 7, 7, 7, 7, 7, 7]

[7, 7, 7, 7, 7, 2, 2, 2, 2, 2]

[2, 2, 2, 2, 2, 7, 7, 7, 7, 7]

[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]

rankArrayElements（ToBeRanked）：

[0, 1, 8, 3, 9, 6, 2, 4, 5, 7]

[5, 6, 1, 0, 2, 3, 7, 8, 4, 9]

[0, 2, 8, 1, 5, 7, 4, 3, 6, 9]

[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]

[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]

[5、6、7、8、9、0、1、2、3、4]

[9、8、7、6、5、4、3、2、1、0]

convertRanksToListOfElementIDs(rankArrayElements(ToBeRanked)):

[0, 1, 6, 3, 7, 8, 5, 9, 2, 4]

[3、2、4、5、8、0、1、6、7、9]

[0, 3, 1, 7, 6, 4, 8, 5, 2, 9]

[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]

[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]

[5、6、7、8、9、0、1、2、3、4]

[9、8、7、6、5、4、3、2、1、0]

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-06-14T22:57:22.707

我创建了 Rank_JS Pro。

```
<script>https://cdn.statically.io/gl/maurygta2/mquery/master/Rank Tools/rank.js</script> 
```

基础方法：

```
var a = {
  b: 2,
  c: 7
}
Rank_Tools.rank(a,(pos,name,value) => {
  return pos + ". "+name+" "+value;
})
// result
// rank1 = 1\. c 7
// rank 2 = 2\. b 2 
```

# mysql - SQL 查询。需要对两列中的值组合进行 GROUP BY

> ID：14834572
> 
> 赞同：2
> 
> 时间：2013-02-12T14:15:30.090
> 
> 标签：mysql, sql, group-by, case

所以我有两张桌子。一种是人们拥有的股份数量：

```
Person_ID ||  Shares
1         ||  100
2         ||  150
3         ||  315
4         ||  75
5         ||  45
... 
```

另一个包含一个人是否存在的信息（有两列指定）以及他属于哪个组：

```
Person_id || barcode_presence || manual_presence || group_id
1         || NULL             || 1               || NULL
2         || 1                || NULL            || 1
3         || 1                || 0               || 2
4         || 0                || NULL            || 1
5         || 1                || 0               || 1
... 
```

我需要找出每个组中所有存在的总和和所有缺席的总和（NULL 组也是一个组）。

我无法弄清楚的是，通过两列（barcode_presence 和 manual_presence）的组合来确定此人是否在场：

如果 manual_presence = 1 --> 存在

else if (manual_presence = NULL andbarcode_presence = 1) --> 存在

其他一切都不存在。

这就是我到目前为止所得到的。

```
SELECT  presence_list.Person_id, presence_list.person_name, 
presence_list.barcode_presence, presence_list.manual_presence,
presence_list.group_id, people_data.Share 
, sum(people_data.Share)

FROM presence_list

INNER JOIN people_data
ON presence_list.Person_id = people_data.Person_ID

WHERE meeting_id = 1 AND voting_id = 0 
GROUP BY presence_list.group_id,  
barcode_presence,
manual_presence
ORDER BY presence_list.group_id
; 
```

但显然这并没有给我想要的结果。它按 group_id、barcode_presence 和 manual_presence 的每个可能组合进行分组，如下所示：

```
Person_id || barcode_presence || manual_presence || group_id || share || sum(shares)
1         || NULL             || 1               || NULL     || 100   || 100
2         || 1                || NULL            || 1        || 150   || 150
4         || 0                || NULL            || 1        || 75    || 75
5         || 1                || 0               || 1        || 45    || 45
3         || 1                || 0               || 2        || 315   || 315 
```

所以我正在寻找一种方法来（在这种情况下）将 id 为 4 和 5 的人联系起来，因为它们都不存在并且来自同一组，如下所示：

```
Person_id || barcode_presence || manual_presence || group_id || share || sum(shares)
1         || NULL             || 1               || NULL     || 100   || 100
2         || 1                || NULL            || 1        || 150   || 150
5         || 1                || 0               || 1        || 45    || **120**
3         || 1                || 0               || 2        || 315   || 315 
```

我试过使用`HAVING`子句，但我没有找到一种方法来处理复杂的表达式，比如`manual_presence = 1 OR (manual_presence is null AND barcode_presence = 1)`

任何想法或建议将不胜感激！预先感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T14:20:33.613

如果只能填充两列中的一列，请使用合并...

```
 Group By group_id, Coalesce(barcode_presence, manual_presence) 
```

如果不是，（可以说，barcode_presence = 1 和存在 = 0？），那么你需要决定你想要分组的值的可能组合组，并且只需按执行该操作的表达式进行分组......绘制价值组合图表可能会有所帮助...

```
 barcode value     
 manual     Null      0        1
   Null     GrpA    GrpA     GrpB
     0      GrpC    GrpC     GrpB
     1      GrpB    GrpB     GrpB 
```

假设您想按两者都为 0 和所有其他人进行分组，那么您会写...

```
 Group By group_id, case When isnull(barcode_presence, 0) = 0 
                          And isnull(manual_presence, 0) = 0 Then 0 Else 1 End 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T14:20:20.023

您可以使用 a`case`为在场和不在场的人创建一个组：

```
select  group_id
,       case 
        when barcode_presence = 1 and manual_presence = 1 then 1
        else 0
        end
,       sum(share)
from    presence_list pl
join    people_data pd
on      pl.person_id = pd.person_id
group by 
        group_id
,       case 
        when barcode_presence = 1 and manual_presence = 1 then 1
        else 0
        end
order by 
        group_id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T14:39:14.750

如果我理解正确，我认为制作两列是要走的路：

```
select pd.group_id,
       SUM(isPresent * pd.shares) as PresentShares,
       SUM((1 - isPresent)*pd.shares) as NotPresentShares
from (select pl.*,
             (case when manual_presence = 1 or 
                        manual_precence is null and barcode_presence = 1
                   then 1 else 0
              end) as IsPresent
           end
      from presence_list pl
     ) pl join
     people_data pd
     on pl.Person_id = pd.Person_ID
group by pd.group_id 
```

子查询只是应用您的逻辑来创建一个标志，1 表示存在，0 表示不存在。方便的是，以这种方式编码时，“1 - IsPresent”为 1 表示不存在，0 表示存在。

然后在聚合中使用该值来聚合份额。你可以让外部查询是：

```
select group_id, IsPresent, sum(pd.shares)
from . . .
group by group_id, IsPresent 
```

如果您真的想要单独行上的值。

# macos - GLSL 1.50：“in int”在 OS X 中不合法？

> ID：14834573
> 
> 赞同：3
> 
> 时间：2013-02-12T14:15:33.743
> 
> 标签：macos, opengl, glsl, osx-mountain-lion, opengl-3

此片段着色器代码在 Windows 中编译，但在 OS X 中引发错误（Mountain Lion，使用 3.2 核心上下文）。

```
#version 150 core
in int vinstance_id;
uniform uint object_id[16];
out uint id_map;

void main() {
    id_map = object_id[vinstance_id];
} 
```

错误是：

```
ERROR: 0:2: int can't be an in in the fragment shader 
```

我认为这是不对的：在[GLSL 1.50 规范](http://www.opengl.org/registry/doc/GLSLangSpec.1.50.09.pdf)中，第 4.3.4 节谈到了片段着色器：

> 片段输入只能是有符号和无符号整数和整数向量，浮点数...

这是驱动程序错误吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-12T14:30:06.110

不，你没有仔细阅读规范。

> 作为有符号或无符号整数或整数向量的片段着色器输入必须使用插值限定符**flat**进行限定。

（大约在链接文档的第 32 页中间，如果有人想验证）

# ruby-on-rails - 结合 group_by 和 sum

> ID：14834577
> 
> 赞同：0
> 
> 时间：2013-02-12T14:15:39.867
> 
> 标签：ruby-on-rails, ruby-on-rails-3, group-by, sum

我有一个`model`具有以下属性：

```
user_id,  week_id,  project_id,  hours
1         61         1             20
1         62         1              5
1         61         2             15
1         63         1              0
2         61         1              0 
```

我的`view`样子是这样的：

```
<tr>
61 | 62 | 63  (week_id)
35 | 5  | 0   (Sum of hours per week_id)
</tr>

all_hours = Model.group_by(&:user_id)
@all_hours.each do |user, hours| %>
<tr>
hours.each do | hour |
hour.my_hours 
```

并给了我两行`user 1`

如何对第二次进行分组并将每周的小时数加起来以获得想要的结果？

为了更清楚（希望）：

```
@hours= Model.all.group_by(&:user_id)
<% @hours.each do |user, hours| %>

<tr>
  <% hours.each do |h|%>
      <td><%= h.hours%></td>
  <% end %>
</tr> 
```

每个用户给我一个长行，例如： 0.0 20.0 0.0 .... 0.0 15.0 0.0 现在我想将这一行中的 20 和 15 相加 0.0 35.0 0.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T14:23:46.910

我会尝试使用 rails 3：

```
Model.select(:week_id).
  select(Model.arel_table[:hours].sum.as("sum_of_hours")).select(:user_id)
  group(:week_id).group(:user_id) 
```

这里使用的库是[`arel`](https://github.com/rails/arel)并且是 rails 3，activerecord 的一部分。

我认为这是可行的。但我自己没有试过。希望这可以帮助。

# tsql - 使用加权将日期添加到表 TSQL

> ID：14834579
> 
> 赞同：0
> 
> 时间：2013-02-12T14:15:41.777
> 
> 标签：tsql

我有一个站点表，其中每个站点的评级都在 1 到 4 之间，我还有一个容量表，我想在其中使用站点表中的评级添加开始日期，例如

评级为 1 的网站，开始日期应为 01/05/2010，结束日期为 30/09/2010
评级为 2 和 3 的网站，开始日期应为 01/04/2010，结束日期为 01 /11/2010
评级为 4 的网站开始日期应为 01/01/2010，结束日期应为 31/12/2010

我对前两列的帮助已经看到了下面的代码，我现在需要添加开始日期和结束日期。你能帮我吗？

```
USE OCCUPANCY
CREATE TABLE Cap1
(PitchType_Skey int, 
 Site_Skey int)

DECLARE @PitchType_Skey INT
DECLARE @Site_Skey INT

SET @PitchType_Skey = 1
SET @Site_Skey = 1

WHILE (@Site_Skey < 127)

BEGIN
    IF @PitchType_Skey = 8

BEGIN
   SET @PitchType_Skey = 1
   SET @Site_Skey = @Site_Skey + 1
END

    IF (@Site_Skey < 127)

BEGIN
     INSERT INTO dbo.Cap1 (PitchType_Skey, Site_Skey)
     SELECT @PitchType_Skey, @Site_Skey
END

  SET @PitchType_Skey = @PitchType_Skey + 1

END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T15:28:45.423

在一个命令中并使用 ISO 日期

```
INSERT INTO dbo.Cap1 (PitchType_Skey, Site_Skey, StartDate, EndDate)
SELECT
   ROW_NUMBER() OVER (ORDER BY Site_Skey),
   Site_Skey /*from site table column*/,
   CASE rating
      WHEN 1 THEN '20100501'
      WHEN 4 THEN '20100101'
      ELSE '20100401'
   END,
   CASE rating
      WHEN 1 THEN '20100930'
      WHEN 4 THEN '20101231'
      ELSE '20101101'
   END
FROM Site 
```

# php - 使用参数号，函数名自动抛出异常

> ID：14834595
> 
> 赞同：0
> 
> 时间：2013-02-12T14:16:26.223
> 
> 标签：php

我抛出这样的异常：

```
public function findRole($role)
{
    if(!is_string($role)){
        throw new \InvalidArgumentException(
            sprintf('Role should be a string, %s given.', gettype($role))
        );
    //...
    } 
```

我已经看到了一些这样的例外，并且想做同样的事情：

> 错误：json_decode() 期望参数 1 是字符串，给定数组。

我有没有机会自动抛出这样的异常，以便异常自动为我输出**函数的名称**和**无效的参数号**？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:33:55.123

不是自动的，但您可以制作一种通用模板，例如：

```
if(!is_string($role)) {
    throw create_invalid_argument_exception(__METHOD__, 1, 'string', $role);
}

function create_invalid-argument_exception($method, $argNo, $expectedType, $actualValue) {
    return new \InvalidArgumentException(
        sprintf(
            '%s expects parameter %d to be %s, %s given.',
            $method, $argNo, $expectedType, gettype($actualValue)
        )
    );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T14:35:03.537

您想要的那些错误由 PHP 自动打印，并且可能通过`set_error_handler`函数很好地处理。您自己无法模拟相同的行为（可能没有废话黑客）。因此，您被迫采用例外方式。

您应该注意一个例外：[类型提示](http://php.net/manual/en/language.oop5.typehinting.php)；只能与数组、类、对象和可调用对象（函数）一起使用：

```
public function acceptArray(array $array);
public function acceptObject(object $o);
public function acceptClass(MyClass $o);
public function acceptCallback(callable $f); 
```

如果使用任何其他类型的变量调用这些函数，则会像您发布的特定错误一样抱怨。

我之前谈到的 hack 可能包括自己重新定义每种类型：

```
class Int {...}
class String {...}
class Float {...}
class Bool {...} 
```

然后像这样使用它：

```
$bool = new Bool(true);
acceptString($bool); // public function acceptString(String $s); 
```

会触发错误。但这**不是**PHP 应该如何工作的。因此，我仍然建议您按照最初的想法进行。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-12T14:24:53.023

要捕获异常，您必须使用以下构造：

```
try{
    /** you code here  */
}catch(Exception $e){
    /** convert $e to json and output */
} 
```

并用它包装你的主要功能

# php - mysql检查手动错误

> ID：14834596
> 
> 赞同：-5
> 
> 时间：2013-02-12T14:16:31.643
> 
> 标签：php, mysql

在编写以下代码后遇到了我从未见过的错误：

```
$query= "UPDATE `Pharm_Log` SET `text` = ". $bloodtest . " WHERE `id` = " . $patientid;
   $result = mysql_query($query) or die(mysql_error()); 
```

我的错误信息是这样的

> “您的 SQL 语法有错误；请查看与您的 MySQL 服务器版本相对应的手册，以`id`在第 1 行的‘压力测试：235/43 WHERE = 1’附近使用正确的语法”

任何人都知道如何解决这个问题？将不胜感激

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-12T14:17:13.537

字符串文字（*的值`$bloodtest`*）必须用单引号括起来，

```
$query= "UPDATE `Pharm_Log` SET `text` = '". $bloodtest . "' WHERE `id` = " . $patientid;
$result = mysql_query($query) or die(mysql_error()); 
```

作为旁注，[`SQL Injection`](http://bobby-tables.com/)如果变量的值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用`PreparedStatements`，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

# sockets - Netty：它需要关心 TCP 段的重组吗？

> ID：14834602
> 
> 赞同：3
> 
> 时间：2013-02-12T14:17:04.520
> 
> 标签：sockets, tcp, netty, nio

我有一个关于 TCP 段重组的问题。我了解到数据包可以分为多个段（这与 MSS 有关）。

即）消息流（假设）：

1.  客户端发送一个从应用层传递过来的数据包
2.  在客户端的 TCP 层，数据包分为 3 个段。
3.  段传递到客户端的 IP 层。
4.  服务器的 IP 层接收分段。
5.  在服务器端的 TCP 层，它接收 3 个数据包并将其重组为一个数据包。
6.  服务器的应用层接收到一个数据包。

我的理解是 TCP 层是重新组装分割段的地方。如果我错了，请纠正我。

这是我真正想澄清的事情。

使用Netty时，Server端的“messageReceived()”方法只被调用一次还是3次？如果 TCP 层是重新组装分割段的地方，“messageReceived()”方法只被调用一次，对吗？

那么，真的有必要使用“ReplayingDecoder”之类的东西来保证服务器正在接收的字节数吗？

非常感谢您的帮助。

* * *

附加问题：

如果服务器因为其中一个丢失或其他原因无法重新组装这些段，那么 TCP 层将不完整的数据包传递给应用层？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T20:25:49.483

> 数据包可以分为多个段

颠倒，或错误的术语。TCP 发送分段，这些分段被分成数据包，并且可以在途中进一步分成子数据包。

> 我的理解是 TCP 层是重新组装分割段的地方。

数据包重组发生在 IP 层，而不是应用程序（或 TCP 层）。段重组发生在 TCP 层。

> “messageReceived()”方法只被调用一到三次？

它被调用任意次数，从 1 到 N，其中 N 是字节流的长度。发送方发送和接收方接收之间没有保证的 1::1 对应关系。

> 如果服务器因为其中一个丢失或其他原因无法重新组装这些段，那么 TCP 层将不完整的数据包传递给应用层？

绝对不。TCP 根本不将数据包传递给应用层。它传递一个完整的、正确排序的字节流，或者什么都不传递。

> 想知道我是否应该自己处理分段重组

你没有，也不能自己处理任何事情。TCP 向应用程序提供字节流，而不是段或数据包。

# c++ - 包含列表的 c++ 映射

> ID：14834605
> 
> 赞同：1
> 
> 时间：2013-02-12T14:17:15.227
> 
> 标签：c++, stdmap, stdlist

我想创建一个映射，其中键是 int，值是数组列表 ( `int[][]`)。

我试过这个：

```
const int R = 4, C = 5;
std::map<int, std::list<int[R][C]> > s; 
```

但它不会编译，我不明白为什么......（R和C是程序的参数，但在执行过程中不会改变）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T14:19:42.640

数组不是可复制构造或可复制分配的，标准容器的元素必须如此。您的代码将按原样编译，但数组类型打破了标准容器的要求，您将遇到未定义的行为。你不能有一个`std::list<int[R][C]>`. 但是，C++11 提供了一个不错的新编译时常量，其大小可以满足`std::array`您的喜好：

```
typedef std::array<std::array<int, C>, R> array_2d;
typedef std::list<array_2d> array_list;
std::map<int, array_list> s; 
```

否则，其他替代方法是使用`std::vector`而不是`std::array`（首选），或者使用`std::list`of`int**`并动态分配您的 2D 数组。

但是，我会考虑重新考虑您的设计。这真的是你想要的结构吗？是否应该将任何数据分组到一个`struct`？

# c# - 在没有 INotifyPropertyChanged 的 情况下更新 ObservableCollection 项目

> ID：14834607
> 
> 赞同：0
> 
> 时间：2013-02-12T14:17:17.987
> 
> 标签：c#, wpf, observablecollection

我有 ObservableCollection 播放列表。此播放列表项显示在列表框中。所有项目都在一个特殊的线程中更新它们的数据。我只需要在更新所有数据后，列表框中的元素更新其信息。实际上有没有办法通知项目中的所有数据都发生了变化？我有 1 个解决方案，但它看起来很糟糕，而且在某些情况下它会导致错误。

```
private void AsyncMIReady(MediaItem mediaItem)
{
   if (PlayList.Contains(mediaItem))
   {
       CurSynchronizationContext.Post(delegate(object someState)
             {
                 UpdateItemInPlayList(mediaItem);
             }
                 , null);
    }
 }

public void UpdateItemInPlayList(MediaItem mediaItem)
{
    int i = PlayList.IndexOf(mediaItem);
    PlayList.RemoveAt(i);
    PlayList.Insert(i, mediaItem);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T14:25:47.020

我发现[这](http://peteohanlon.wordpress.com/2008/10/22/bulk-loading-in-observablecollection/)很有用。它涉及对 ObservableCollection 进行子类化并暂停 AddRange 上的通知。

```
public class RangeObservableCollection<T> : ObservableCollection<T>
{
  private bool _suppressNotification = false;

  protected override void OnCollectionChanged(NotifyCollectionChangedEventArgs e)
  {
    if (!_suppressNotification)
      base.OnCollectionChanged(e);
  }

  public void AddRange(IEnumerable<T> list)
  {
    if (list == null)
      throw new ArgumentNullException("list");

    _suppressNotification = true;

    foreach (T item in list)
    {
      Add(item);
    }
    _suppressNotification = false;
    OnCollectionChanged(new NotifyCollectionChangedEventArgs(NotifyCollectionChangedAction.Reset));
  }
} 
```

# database - 在 OSX 上合并两个 .sqlite 文件

> ID：14834613
> 
> 赞同：1
> 
> 时间：2013-02-12T14:17:29.060
> 
> 标签：database, macos, sqlite, merge

那么如何在 Mac 上将具有**相同架构的****两个 .sqlite 数据库文件**（如 somedata.sqlite 和 someOtherData.sqltie）合并到一个 .sqlite 文件中呢？

 **我猜这可以在终端中完成，如果有人能详细描述这些步骤，那就太酷了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T17:48:52.233

如果这两个文件具有完全相同的架构，您可以转储文件并将它们导入新的数据库中。

```
sqlite3 database1.db '.dump' >> tmp.txt
sqlite3 database2.db '.dump' >> tmp.txt
sqlite3 database3.db '.import tmp.txt' 
```

我不在 OSX 中，所以可能不是这样，但你明白了。**

# css - 为什么在 Less 1.3.1 之后 Preboot mixin 不再编译？

> ID：14834616
> 
> 赞同：0
> 
> 时间：2013-02-12T14:17:37.630
> 
> 标签：css, less

我正在使用 Codekit 编译更少的文件，自从它跳转到 Less 1.3.1（大约在 12 年 10 月左右）后，它将不再编译通过我的 Preboot（[http://www.markdotto.com/bootstrap](http://www.markdotto.com/bootstrap)）mixins。

看起来 Preboot 不再维护，github 链接转到 404。

混入代码中的任何内容是否都会成为 Less 所做的任何更改的问题？

他们有什么类似于 Preboot 的东西，可能被更积极地维护了吗？

# batch-file - 从文本文件中读取 - 批处理

> ID：14834625
> 
> 赞同：10
> 
> 时间：2013-02-12T14:18:05.097
> 
> 标签：batch-file, text-files

我有一个文本文件 a.txt：

> 你好世界
> 下午好

我写了一个批处理脚本来逐行读取这个文件的内容：
`FOR /F "tokens=* delims=" %%x in (a.txt) DO echo %%x`

`"Hello" "World"`由于分隔符（空格）的默认行为，我得到了输出。如何覆盖此行为以获取输出为`"Hello World" "Good Afternoon"`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-24T01:47:56.787

您的代码 "for /f "tokens=* delims=" %%x in (a.txt) do echo %%x" 将在大多数 Windows 操作系统上运行，除非您修改了命令。

因此，您可以在执行“for /f”命令之前将“cd”放入要读取的目录以跟随字符串。例如，如果文件“a.txt”位于 C:\documents and settings\%USERNAME%\desktop\a.txt 那么您将使用以下内容。

```
cd "C:\documents and settings\%USERNAME%\desktop"
for /f "tokens=* delims=" %%x in (a.txt) do echo %%x
echo.
echo.
echo.
pause >nul
exit 
```

但是由于 x 原因，这在您的计算机上不起作用，因此有一种更简单、更有效的方法来执行此操作。使用“类型”命令。

```
@echo off
color a
cls
cd "C:\documents and settings\%USERNAME%\desktop"
type a.txt
echo.
echo.
pause >nul
exit 
```

或者，如果您希望他们选择要在批处理中写入的文件，您可以执行以下操作。

```
@echo off
:A
color a
cls
echo Choose the file that you want to read.
echo.
echo.
tree
echo.
echo.
echo.
set file=
set /p file=File:
cls
echo Reading from %file%
echo.
type %file%
echo.
echo.
echo.
set re=
set /p re=Y/N?:
if %re%==Y goto :A
if %re%==y goto :A
exit 
```

# ios - 如何为 iOS 构建 Unity3d 插件

> ID：14834626
> 
> 赞同：68
> 
> 时间：2013-02-12T14:18:05.503
> 
> 标签：ios, objective-c, unity3d

我有一个为 iOS 构建的非常小的 Objective-C 库，我想将它导出到 Unity。我了解编写将所有调用编组到本机库的 csharp 包装器的基本过程，但我完全不知道从哪里开始。任何人都可以逐步解释如何使用我的库创建一个统一包，以便我也可以将它分发给其他开发人员。

Unity3d 文档非常简短，并没有解释任何内容。

谢谢。

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2013-02-14T22:13:27.923

好的，在 Mac 上用 Unity3d 玩了几天后，我终于弄明白了。本指南中的所有代码都是虚拟的。我在 15 分钟左右就写完了这些东西，所以不要被错误和拼写错误所困扰。

1）打开Unity，创建新项目（文件->新项目）并将其保存在某处

2）项目生成时，结构如下：

*   `ProjectName/Assets`（这就是你需要的）
*   `ProjectName/Library`（不管那里有什么）
*   `ProjectName/ProjectSettings`（你不在乎）
*   `ProjectName/ProjectName.sln`（MonoDevelop 项目）

3）转到`ProjectName/Assets`并创建以下文件夹：`Plugins/iOS`，所以最后你将有一个这样的文件夹结构：`ProjectName/Assets/Plugins/iOS`

4) 将已编译的库 (.a) 文件和必要的头文件放入其中`ProjectName/Assets/Plugins/iOS`或将库的源代码复制到那里（.mm、.h、.m 等）。请记住，通常您只能从 C# 访问 C 函数，因此您必须以某种方式将您的 Objective-C 内容包装在 C 代码中，在我的情况下，所有 Objective-C 对象都是以 Singleton 的形式实现的，所以它不是很难制作 C 风格的包装器，例如：

**CWrapper.h**：

```
extern "C" void MySDKFooBarCFunction(); 
```

**CWrapper.mm**

```
#import "CWrapper.h"
#import "MyObjectiveCLibrary.h" // your actual iOS library header

void MySDKFooBarCFunction() {
    [MyObjectiveCLibrary doSomeStuff];
} 
```

5）然后去`ProjectName/Assets`为 CSharp 包装类创建一个文件夹，随便你怎么称呼它，例如：`ProjectName/Assets/MySDK`

6) 在 MySDK 文件夹中创建 MySDK.cs 文件，C# 包装器的虚拟示例如下所示：

```
using UnityEngine;
using System;
using System.Runtime.InteropServices;

public class MySDK
{
    // import a single C-function from our plugin
    [DllImport ("__Internal")]
    private static extern void MySDKFooBarCFunction();

    // wrap imported C-function to C# method
    public static void FooBarCFunction() {
        // it won't work in Editor, so don't run it there
        if(Application.platform != RuntimePlatform.OSXEditor) {
            MySDKFooBarCFunction();
        }
    }
} 
```

7）创建一个shell脚本来打包这些东西`.unitypackage`并将它放在你的项目文件夹旁边（不是里面）。根据您的需要调整脚本中`EXPORT_PATH`的`PROJECT_PATH`变量。

```
#!/bin/sh

WORKDIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
UNITY_BIN="/Applications/Unity/Unity.app/Contents/MacOS/Unity"
EXPORT_PATH="${WORKDIR}/ProjectName.unitypackage"
PROJECT_PATH="${WORKDIR}/ProjectName"
ASSETS_PATH="Assets"

$UNITY_BIN -batchmode -quit \
-logFile export.log \
-projectPath $PROJECT_PATH \
-exportPackage $ASSETS_PATH $EXPORT_PATH 
```

8) 运行创建的 bash 脚本以获取您的包构建。当您通过 Unity 编辑器中的 File -> Build Settings 生成资源时，Assets 中的所有内容都将包含在 Unity 项目的 XCode 项目中。您可以使用生成的包将您的代码分发给其他开发人员，这样他们就可以通过双击包文件将您的库简单地包含到他们的 Unity 项目中。

*运行此脚本时不要忘记关闭 Unity Editor，否则可能无法构建包。*

*如果你有一些问题并且包没有出现，这个脚本总是将日志打印到 export.log*

**仅当您想为您的库制作一个演示统一项目时，接下来的步骤才有意义（至少有利于测试）**

9) 您可以将创建的 Unity 项目 (ProjectName.unity) 放入其中，`Assets/MySDKDemo`以便在您的包中进行演示。

10) 为您的 Demo Unity3d 场景创建一个简单的脚本`Assets/MySDKDemo/MySDKDemo.cs`，例如：

```
using UnityEngine;
using System;
using System.Collections;

public class MySDKDemo : MonoBehaviour
{   
    private GUIStyle labelStyle = new GUIStyle();
    private float centerX = Screen.width / 2;

    // Use this for initialization
    void Start ()
    {   
        labelStyle.fontSize = 24;
        labelStyle.normal.textColor = Color.black;
        labelStyle.alignment = TextAnchor.MiddleCenter;
    }

    void OnGUI ()
    {
        GUI.Label(new Rect(centerX - 200, 20, 400, 35), "MySDK Demo", labelStyle);
        if (GUI.Button(new Rect(centerX - 75, 80, 150, 35), "DoStuff"))
        {
            MySDK.FooBarCFunction();
        }
    }

} 
```

11) 转到统一编辑器。在 Unity Editor 的左侧边栏中找到“Main Camera”，选择它并在 Inspector 面板（右侧边栏）的底部单击 AddComponent，选择 Scripts -> MySDKDemo script

12) 构建 XCode 项目并在设备上运行。

**几条笔记**

1）插件不能在 Unity 编辑器中工作，仅仅是因为它们不是实时编译的，嗯，不确定但可能直到你在插件中使用 C# 之前，C# 的东西可能会立即链接并在编辑器环境中工作。

2) 这篇文章不涉及本机 <-> 托管代码之间的封送处理或数据/内存管理，因为它有很好的文档记录。

[与本机库互操作 @ Mono 项目](http://www.mono-project.com/Interop_with_Native_Libraries)

3) 可以使用 C# 委托传递从 C# 到 C 的回调，在 C 端使用标准函数声明，在 C# 端声明具有相同签名的委托。布尔值、整数和字符串（C：char*）似乎被完美地编组（我不谈论内存管理策略以及谁负责释放内存或返回值策略）。

但是，由于平台限制，它不适用于开箱即用的 iOS 构建，但 C#-to-C 回调仍然可以使用 MonoPInvokeCallbackAttribute 实现，有关此主题的有用链接：

*   [反向回调@Xamarin Docs](http://docs.xamarin.com/guides/ios/advanced_topics/limitations#Reverse_Callbacks)
*   [MonoPInvokeCallbackAttribute 示例@Xamarin 论坛](http://forums.xamarin.com/discussion/1171/difference-between-bmac-exe-on-xamarin-and-monomac-when-compiling-masshortcutsharp)

实际上在 Unity 4 中`AOT.MonoPInvokeCallbackAttribute`已经实现了，它仅限于可以传递给非托管代码的静态委托，但总比没有好。

4) 有一种使用`UnityGetGLViewController`函数获取 Unity RootViewController 的方法。只需在您的实现文件中声明此函数，即：

```
extern UIViewController *UnityGetGLViewController(); 
```

并`UnityGetGLViewController()`在您需要访问 RootViewController 时使用。

5) 细节中有更多神奇和丑陋的东西，让你的 C 接口尽可能简单，否则编组可能会成为你的噩梦，还要记住，托管到非托管通常很昂贵。

6）您肯定在本机代码中使用了一些框架，并且您不希望出现链接器问题。例如，如果您在库中使用 Keychain，则需要将 Security.framework 包含到 Xcode 项目中。

我建议尝试一下[XUPorter](https://github.com/onevcat/XUPorter)，它可以帮助 Unity 将任何额外的依赖项集成到 Xcode 项目中。

祝你好运！

# javascript - Java 脚本代码不起作用？请帮我

> ID：14834629
> 
> 赞同：-2
> 
> 时间：2013-02-12T14:18:17.347
> 
> 标签：javascript, validation

我正在尝试使用 Luhn 算法验证签证卡号。但是这个java脚本代码不起作用？请帮我找出这段代码的错误。是否可以执行此代码？任何形式的帮助表示赞赏。提前致谢...

```
function allnumeric()  
            {   
            var numbers = /^[0-9]+$/;  
            if(inputtxt.value.match(numbers))  
                {  
                    if(function visa(inputtxt))

                    {

                        if(function luhn(inputtxt))

                        {
                        return true;
                        }
                        else  
                        {   
                        return false;  
                        }

                    }

            else  
            {  
            alert('Please enter your valid 10 digit mobile number only');  
            inputtxt.focus();  
            return false;  
            } 

function visa(inputtxt)  
{  
  var cardno = /^(?:4[0-9]{12}(?:[0-9]{3})?)$/;  
  if(inputtxt.value.match(cardno))  
        {  
      return true;  
        }  
      else  
        {  
        alert("Not a valid Visa credit card number!");  
        return false;  
        }  
}  

function luhn(inputtxt)
{
            /* Luhn check */
            var cc_sum = 0;
            var parsedCC;
            var cclen = inputtxt.length;
            for (i=cclen-1; i>=0; i--) {
                    var charati = inputtxt[i] + '';
                    parsedCC = parseInt(charati);
                    var oddeven = cclen-1 - i;
                    cc_sum += (oddeven%2 == 0) ? parsedCC :
                                    (parsedCC > 4) ? parsedCC * 2 % 10 + 1 :
                                            parsedCC * 2;
            }
            var checkvalid = ((cc_sum % 10) == 0) ? true : false;
            return checkvalid;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:20:41.053

`function`调用 visa 和 luhn 时从您的代码中删除：

**编辑：我删除了不必要的代码：**

```
function allnumeric()  
{   
    var numbers = /^[0-9]+$/;  
    if(inputtxt.value.match(numbers))  
    {  
        if(visa(inputtxt))
        {
            return luhn(inputtxt);
        }
        else 
        {
            alert('Please enter your valid 10 digit mobile number only');  
            inputtxt.focus();  
            return false;  
        }
    }
} 
```

# javascript - 如何自动滚动网页？

> ID：14834635
> 
> 赞同：-14
> 
> 时间：2013-02-12T14:18:39.087
> 
> 标签：javascript, jquery, html, css, animation

当网站加载时，我希望显示一个 gif，并且在动画结束后，我希望页面自动向上滚动而无需单击任何按钮并显示我的主站点。我希望 gif 每次都自动加载，而不仅仅是第一次。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T14:23:56.257

给 gif 计时。设置一个超时，当 X 时间过去时它会滚动。计时然后隐藏它而不是滚动可能是一个更好的主意。

虽然不可能计时，因为你必须要加载 GIF 的时间

# sql - 查询以查找和替换 SQL 数据库中的特定单词，而不会影响数据

> ID：14834642
> 
> 赞同：-1
> 
> 时间：2013-02-12T14:18:56.977
> 
> 标签：sql, sql-server, sql-server-2008

我有一个带有表格的数据库，其中包含有关人们所属行业的信息的条目，包括第一产业和第二产业：

例如：航空航天和国防、零售、批发和分销研发、技术、媒体和电信等。

大约有 500 个这样的条目。我想要分隔符号'，'只在第一​​产业和第二产业之间，并且在行业名称中没有。

例如。: 航空航天和国防、零售、批发和分销

应该看起来像

航空航天和国防、零售批发和分销（不带逗号）

无论如何这可以实现，即在不影响主要术语的情况下从次要术语中替换逗号。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T14:31:24.257

首先，你有错误的表设计。单列永远不应该列出一堆用逗号分隔的值。这是一场噩梦（正如您所发现的那样）。

相反，应该有一个单独的表格将人们与行业联系起来，允许每人多行：

```
person_id          industry
1                  Retail, Wholesale and Distribution
1                  Aerospace and Defense
2                  Retail, Wholesale and Distribution 
```

然后在您需要为一个人或一群人查找行业时加入此表。

显然，这使您的逗号问题消失了。

当然，有时您会被愚蠢的桌子设计所困扰。如果是这样，您可以使用`replace()`（感谢其他提到替换功能的答案）提出替代解决方案。

**更新：**

[这是一个有效的 SQLFiddle 解决方案](http://www.sqlfiddle.com/#!3/4122a/1)：

更新使用`replace()`：

```
update bad_design 
   set bad_design.industries = 
       replace(bad_design.industries, from_str, to_str)
    from (
      select * from bad_design join replacements 
         on replace(bad_design.industries, from_str, to_str) <> '' 
    ) as a
    where a.person_id = bad_design.person_id; 
```

注意：这不会一次对同一字符串执行多次替换。你需要更多的东西来做到这一点，比如递归查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T14:48:24.013

根据您的示例，您需要使用 SUBSTRING()、INSTRING() 函数来查找字符串中的第一个逗号和 REPLACE() 第二个逗号。要问您的问题：假设您总是需要替换字符串中的第二个逗号是否安全？您的所有字符串都与您的示例相同或相似吗？等等......这个例子假设了以上所有内容。此外，据我所知，用您的 SQL 版本替换双表和任何其他表和 Oracle 语法 - SQL Server 中的 SUBSTR()=SUBSTRING。这同样适用于 INSTR()...：

```
SELECT str -- orig str --
     , SUBSTR(str, 1, INSTR(str, ',', 1, 1)) first_string
     , REPLACE(SUBSTR(str,  INSTR(str, ',', 1, 1)+1), ',', '') second_string
  FROM
   (
    SELECT 'Aerospace and Defense,Retail, Wholesale and Distribution' str 
      FROM dual
    )
  / 
```

输出（已测试） - 您需要使用 SQL 服务器语法连接 first_string 和 second_string。在 Oracle 中，它将是 SELECT first_string ||''|| second_string 来自...：

```
 Aerospace and Defense, Retail Wholesale and Distribution 
```

在 SQL SERVER 中创建 DUAL 表：http: [//blog.sqlauthority.com/2010/07/20/sql-server-select-from-dual-dual-equivalent/](http://blog.sqlauthority.com/2010/07/20/sql-server-select-from-dual-dual-equivalent/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T14:39:38.657

您可以在桌子上运行替换...

```
select replace(column_name,'Retail, Wholesale','Retail Wholesale')
from table 
```

或更新

```
update table
set column_name = replace(column_name,'Retail, Wholesale','Retail Wholesale') 
```

这基本上将给定列中的字符串“零售，批发”替换为“零售批发”。

# git - git -add 不适用于通配符

> ID：14834650
> 
> 赞同：1
> 
> 时间：2013-02-12T14:19:28.563
> 
> 标签：git, posh-git

我正在尝试添加（编辑：删除操作）这些文件，其中包含“生成”文本，但它不起作用。我正在使用 PowerShell。

```
#       deleted:    Apica.WebPerformance.Web.Controllers/SharedController.generated.cs
#       deleted:    Apica.WebPerformance.Web.Controllers/SidebarController.generated.cs
#       deleted:    Apica.WebPerformance.Web.Controllers/SubscriptionController.generated.cs
#       deleted:    Apica.WebPerformance.Web.Controllers/ToolsController.generated.cs
#       deleted:    Apica.WebPerformance.Web.Controllers/UnauthorizedController.generated.cs
#       deleted:    Apica.WebPerformance.Web.Controllers/UrlCheckController.generated.cs
#       deleted:    Apica.WebPerformance.Web.Controllers/UrlCheckWizardController.generated.cs
#       deleted:    Apica.WebPerformance.Web.Controllers/UserSessionContextController.generated.cs
#       deleted:    Apica.WebPerformance.Web.Controllers/UserSessionContextDataController.generated.cs
#       modified:   Apica.WebPerformance.Web.Controllers/ViewModels/Checks/CheckListViewModel.cs
#       modified:   Apica.WebPerformance.Web.Controllers/ViewModels/Checks/ChecksOverviewViewModel.cs
#       deleted:    Apica.WebPerformance.Web.Controllers/WebSocketCheckWizardController.generated.cs
#       deleted:    Apica.WebPerformance.Web.Controllers/WebSocketJmsCheckWizardController.generated.cs
#       deleted:    Apica.WebPerformance.Web.Controllers/WidgetsController.generated.cs
#       deleted:    Apica.WebPerformance.Web.Controllers/WizardController.generated.cs
#       modified:   Apica.WebPerformance.Web/Assets/Common/Css/jquery.multiSelect.css
#       modified:   Apica.WebPerformance.Web/Views/Examples/MultiSelect.cshtml
#
C:\git_apica\WebPerformance.Web [ViewModelRefactor +6 ~2 -0 | +0 ~6 -52]> git add *generated.cs
C:\git_apica\WebPerformance.Web [ViewModelRefactor +6 ~2 -0 | +0 ~6 -52]> git add '*generated.cs'
C:\git_apica\WebPerformance.Web [ViewModelRefactor +6 ~2 -0 | +0 ~6 -52]> git add '*generated*'
C:\git_apica\WebPerformance.Web [ViewModelRefactor +6 ~2 -0 | +0 ~6 -52]> git add \*generated.cs
C:\git_apica\WebPerformance.Web [ViewModelRefactor +6 ~2 -0 | +0 ~6 -52]> git add '*generated.cs'
C:\git_apica\WebPerformance.Web [ViewModelRefactor +6 ~2 -0 | +0 ~6 -52]> 
```

这些命令都没有实际执行任何操作。但是，它逐个文件地工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T14:59:21.247

也许这个，好先生

```
find | grep generated.cs | xargs git add 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T15:02:43.053

看起来您的命令有两个小问题

1.  看起来您要暂存的文件是外壳所在位置的目录，因此您需要添加前导`*`.
2.  您想要暂存已删除的文件。有两种方法可以[`git rm <file name>`](http://www.kernel.org/pub/software/scm/git/docs/git-rm.html)在每个删除的文件中调用或使用命令的`-u`标志`add`。从文档（强调我的）：

    > -u
    > --update
    > 只匹配索引中已经跟踪的文件而不是工作树。这意味着它永远不会暂存新文件，但它将暂存已修改的跟踪文件的新内容，并且**如果工作树中的相应文件已被删除，它将从索引中删除文件**。

`git add -u *\*.generated.cs`应该管用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T13:41:55.230

这里的问题是通配符只会扩展到文件系统上的文件名（因为 shell 正在执行扩展，而不是`git`）。由于您已删除文件，它们不在文件系统上，因此您需要不同的命令。添加删除操作有两种简单的方法。

```
git add -u 
```

这会将所有修改（包括删除）添加到索引中。

```
git add full/path/to/deleted/file 
```

将添加删除。

或者，如果您用于`git rm`删除文件，则会自动为您添加删除操作。

要获取已删除文件名的列表，此命令应该有效：

```
git status --porcelain | awk '/^ D/ {print $2}' 
```

然后，您可以`xargs`按照 Steven Penny 的建议将结果输入。

# jquery - jquery 动画回调

> ID：14834655
> 
> 赞同：0
> 
> 时间：2013-02-12T14:19:35.687
> 
> 标签：jquery, callback

我想在这个动画函数上添加一个回调——

```
$("a#goto-3").click(function() {
    $('html, body').animate({
       scrollTop: $("#landpoint-3").offset().top}, 1000, 'easeInOutCubic'
    );
    return false; 
}); 
```

我可以用这个在scrollTop上做到这一点......

```
$("a#goto-2").click(function() {
    $('html, body').animate({
       scrollTop: $("#landpoint-2").offset().top}, 1000, 'easeInOutCubic', function() {
         document.write('complete');  
       });
    return false; 
}); 
```

..但是没有运气让它进入动画功能 - 我知道这个应该非常简单..提前谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:21:48.467

```
$("a#goto-3").click(function() {
    $('html, body').animate({
       scrollTop: $("#landpoint-3").offset().top}, 1000, 'easeInOutCubic', function() { callback stuff here; }
    );
    return false; 
}); 
```

确保只为 ONE 元素设置动画，同时在 html 和 body 上设置动画。

见这个例子：http: [//jsfiddle.net/HQUaD/2/](http://jsfiddle.net/HQUaD/2/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-12T14:21:49.870

```
$('html, body').animate({
   scrollTop: $("#landpoint-3").offset().top}, 1000, 'easeInOutCubic', function() {
       // animation completed code
   }
); 
```

[在此处](http://api.jquery.com/animate/)查看文档

或者你可以像这样使用[.when()](http://api.jquery.com/jQuery.when/)：

```
$.when($('html, body').animate({
   scrollTop: $("#landpoint-3").offset().top}, 1000, 'easeInOutCubic'))
.then(function() {
    // both animations completed code!
}); 
```

# tsql - 使用游标的 TSQL 触发器中的意外行为：值为 1 AND 0 的 AND 运算符计算为 true

> ID：14834657
> 
> 赞同：1
> 
> 时间：2013-02-12T14:19:39.820
> 
> 标签：tsql, triggers, cursor, bit, logical-operators

我一直在尝试调试由触发器产生的一些有问题的数据库事务，并且在单步执行 T-SQL 时遇到了意外结果。通过从游标中获取值后`FETCH NEXT FROM Updated_Cursor`，我进入一个while循环，然后对于从游标中获取的每一行，我评估两个变量以确定在一些处理之后是否进行插入，如下所示：

```
WHILE @@FETCH_STATUS = 0
BEGIN
      IF (@first_indicator > 0 AND @second_indicator >0)
      BEGIN
              --processing and insert occurs here 
```

在调试模式下，单步执行代码，我可以看到当这个条件的值评估为 true 时`@first_indicator=1`，`@second_indicator=0`这对我来说没有意义。这会导致插入重复和错误的行。这两个变量是`bit`数据类型，我觉得这可能是相关的，但我不知道为什么会这样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:43:15.337

将代码从光标中拉出时，如下所示：

```
DECLARE @f BIT = 1
DECLARE @s BIT = 0

IF(@f>0 AND @s>0) PRINT 'GH'; 
```

它按预期工作并且不打印。您确定在执行 if 语句时正在查看正确的变量吗？

`IF`此外，您在评论中提到的两个陈述并不等同。因此，我不确定您的实际问题是什么。

# php - 购物车中重复的产品

> ID：14834660
> 
> 赞同：-2
> 
> 时间：2013-02-12T14:19:58.113
> 
> 标签：php, mysqli, shopping-cart

当我将多个产品添加到购物车时，它会复制第一次插入的产品数据。showCart() 中的 prepare 语句也回显了“有问题”，虽然数据仍然显示，但我想我的代码看起来很讨厌。借口，我正计划清洁它，当我让它发挥作用时

```
public function displayProduct()
            {
                if($product = $this->db->query("SELECT id, title, description, price FROM trips ORDER BY id"))
                {

                        while ($row = $product->fetch_assoc())
                                {
                            $output[] = '<div class="reisbox">';
                                    $output[] = '<div id="reis_insidebox1">';
                            $output[] = '<div class="reis_textbox">';
                                $output[] = '<h2>'.ucfirst($row['title']).'</h2>';
                                            $output[] = '<article>';
                                                $output[] = ucfirst($row['description']);
                                            $output[] = '</article>';
                                    $output[] = '</div>';

                                    $output[] = '<div class="rightboxx">';
                                $output[] = '<div class="reis_price_box">';
                                            $output[] = '<div class="reis_price_box_text">';
                                                $output[] = '&euro;'.$row['price'];
                                        $output[] = '</div>';

                                        $output[] = '<div class="more_box">';
                                            $output[] = '<a href="index.php?page=reis"><p>Lees meer..</p></a>';
                                        $output[] = '</div>';
                                    $output[] = '</div>';
                                    $output[] = '</div>';
                                    $output[]='<br />';
                                    $output[] = '<div id="add">';
                                        $output[]='<a href="index.php?page=cart.php&action=add&id='.$row['id'].'">Add to cart</a>';
                                    $output[] = '</div>';
                                        $output[] = '<div class="review_box">';
                                    $output[] = '<div class="review_text">Review</div>';

                                    $output[] = '<div class="review_textbox"> Fantastische ontvangst met kleine attenties. Fantastisch ontbijt,. Goede bedden en ruime zitgelegenheid in de serre.</div>';

                                    $output[] = '<div class="star_box"></div>';

                                    $output[] = '<div class="review_linkbox">';
                                        $output[] = '<a href="review1.php">Schrijf review</a>';
                                    $output[] = '</div>';
                                $output[] = '</div>';
                                $output[] = '</div>';

                    }
                    echo implode($output);
                } 
```

```
public function showCart() {
        $cart = $_SESSION['cart'];
        if ($cart) {
            $items = explode(',',$cart);
            $contents = array();
            foreach ($items as $item) {
                $contents[$item] = (isset($contents[$item])) ? $contents[$item] + 1 : 1;
            }
            $output[]='<div id="contents">';
            $output[] = '<form action="index.php?page=cart.php&action=update" method="post" id="cart">';
            $output[]='<table id="table_cart">';
            $output[]='<thead>';
            $output[]='<tr>';
            $output[]='<th scope="col"></th>';
            $output[]='<th scope="col">Informatie</th>';
            $output[]='<th scope="col">Prijs</th>';
            $output[]='<th scope="col">Aantal</th>';
            $output[]='<th scope="col">Prijs Totaal</th>';
            $output[]='</tr>';
            $output[]='</thead>';
            foreach ($contents as $id=>$qty)
            {
                $sql = 'SELECT id, title, description, price FROM trips WHERE id = ?';
                if($result = $this->db->prepare($sql))
                {
                    $result->bind_param('i', $id);
                    $result->execute();
                    $result->bind_result($id, $title, $description, $price);
                    $result->fetch();
                }
                else
                {
                    echo "something went wrong";
                }
                $output[]='<tr>';
                $output[]='<td><a href="index.php?page=cart.php&action=delete&id='.$id.'" class="r"><p>Remove</p></a></td>';
                $output[]='<td>'.$title.'</td>';
                $output[]='<td>&euro;'.$price.'</td>';
                $output[]='<td><input type="text" name="qty'.$id.'" value="'.$qty.'" size="3" maxlength="3" /></td>';
                $output[]='<td>&euro;'.($price * $qty).'</td>';
                $total += $price * $qty;
                $output[]='</tr>';

            }
            $output[] = '<div id="total">';
            $output[] = '<p>Grand total: <strong>&euro;'.$total.'</strong></p>';
            $output[] = '<button type="submit">Update cart</button>';
            $output[] = '</div">';
            $output[] = '</table>';
            $output[]='</form>';
            $output[] = '</div">';
        } else {
            $output[] = '<p>You shopping cart is empty.</p>';
            $output[] = '<p><a href="index.php?page=reizen.php">terug naar reizen</a></p>';
        }
        return implode('',$output);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T16:56:59.843

首先，这是两个独立的错误，除非发生其他事情，否则您不会告诉我们第一个脚本与这两个错误无关。

错误 1：如果您的脚本`"something went wrong"`在调用期间回显，`to showCart()`那么您应该调试数据库连接并准备语句。除非其中一些列名或行名错误，否则错误很可能出在您的连接中。尝试回显 DB 错误信息以查看发生了什么。

错误 2：显示购物车时重复的产品数据：

为了正确调试这一点，我们首先需要了解您如何将产品添加到购物车，但很可能您这样做会与此行产生负面交互：

```
foreach ($items as $item) {
            $contents[$item] = (isset($contents[$item])) ? $contents[$item] + 1 : 1;
        } 
```

**编辑**

实际上，它可能不是导致第二个错误的那条线，它可能是即使数据库调用失败，您也会回显产品信息的事实。

# html - 用可见性隐藏边距：折叠

> ID：14834661
> 
> 赞同：0
> 
> 时间：2013-02-12T14:19:59.643
> 
> 标签：html

这是我的代码：

```
<div id="divSpinner" style="margin-top:30px; visibility:collapse;">
</div>
<br />
<div id="divPaging">         
</div> 
```

我正在尝试显示一个微调器，然后在“分页”div 中显示一些内容（使用 Javascript）。

微调器和“分页”div 同时不可见，因此我尝试折叠微调器可见性，但“顶部边距”仍会影响“分页”div 的位置。

我应该怎么办 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T14:24:17.753

你必须使用**position: absolute;** 或**位置：相对；**在您的**divPaging** css 上，在与您的代码相关的它们之间进行选择，如果您从网页中放置链接，我可以说您是女巫以及如何。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T14:54:02.750

我设置了“显示：无；” 而不是“可见性：折叠；”

# jquery - jQuery Mobile ajax listview 刷新和点击事件

> ID：14834663
> 
> 赞同：0
> 
> 时间：2013-02-12T14:20:01.410
> 
> 标签：jquery, jquery-mobile

我们通过 jquery.ajax 加载 jQuery Mobile 列表视图

```
$.get('LOADER?......,  
function(html) {  
 if (html != '') {  
      $('#id').html(html).find('ul').listview().listview('refresh'); 
```

在这个列表视图中，我们有一个所有 li-Items 的点击事件，看起来像这样......

```
$('#id li').live('click',function() {  
    if ($(this).data('icon') == 'star') {  
        $(this).buttonMarkup({icon:'check'});  
    } else {  
        $(this).buttonMarkup({icon:'star'});  
    }  
}); 
```

..但是如果单击一个项目，我们将拥有所有两个条件！为什么？

在浏览器上的 pagerefresh F5 后它工作正常？！？！？！？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T15:20:04.133

在对这个问题重新审视之后，我明白真正的问题是什么！我们没有没有点击的问题！我们在页面刷新之前点击两次！

这来自加载第二页后的 jQuery Mobile Pageinit ......

我们以这种方式解决了这个问题：

```
$('#id li').die('click').live('click', function() { 
```

无论如何：感谢您的帮助

# javascript - 如何在更新面板更新之前执行 javascript 函数

> ID：14834665
> 
> 赞同：0
> 
> 时间：2013-02-12T14:20:09.510
> 
> 标签：javascript, jquery, asp.net, submit

我想在触发更新面板进行刷新之前运行 jQuery 函数。由于可以使用许多按钮和其他方式中的任何一种来完成此刷新，我希望使用提交处理程序或类似的东西，但它不起作用。

我尝试将此事件附加到主窗体：

```
jQuery('form').submit(function () { alert('submit!'); }); 
```

还有这个附加到更新面板

```
jQuery('#pnlContent').submit(function () { alert('submit!'); }); 
```

任何人都知道如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-08-26T19:50:46.093

这对我有用。[明白了这里](http://www.dotnetcurry.com/ShowArticle.aspx?ID=256)的想法。基本上，您定义了一个在更新之前运行的函数，以及一个在之后运行的函数。然后您注册这些功能以使用页面请求管理器运行。

```
<script type="text/javascript">
    /* Put your code to run before UpdatePanel begins async postback here */
    function beforeAsyncPostBack() {
        var curtime = new Date();
        alert('Time before PostBack:   ' + curtime);           
    }

    /* Put your code to run after UpdatePanel finishes async postback here */
    function afterAsyncPostBack() {
        var curtime = new Date();           
        alert('Time after PostBack:    ' + curtime);
    }

    /* Don't mess with any of the below code */
    Sys.Application.add_init(appl_init);

    function appl_init() {
        var pgRegMgr = Sys.WebForms.PageRequestManager.getInstance();
        pgRegMgr.add_beginRequest(beforeAsyncPostBack);
        pgRegMgr.add_endRequest(afterAsyncPostBack);
    }      
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T14:33:01.463

您可以使用 onsubmit="return check();" 通知。它会在像这样提交表单之前检查此功能。

```
function check(){
   // do javascript code
   // after check your javascript
   document.getElementById("frm1").submit();
} 
```

HTML：

```
<form id="frm1" action="#" onsubmit="return check();">
    First name: <input type="text" name="fname"><br>
    Last name: <input type="text" name="lname"><br>
    <input type="submit" name="submit" value="Submit form">
</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T14:58:35.337

```
function PageLoad()
{
    if (!window.Sys.WebForms.PageRequestManager.getInstance().get_isInAsyncPostBack())
    {
        window.Sys.WebForms.PageRequestManager.getInstance().add_endRequest( AjaxEnd );
        window.Sys.WebForms.PageRequestManager.getInstance().add_initializeRequest( AjaxBegin );
    }
}

function AjaxEnd()
{
    alert("AjaxEnd");
}

function AjaxBegin()
{
    alert("AjaxBegin");
} 
```

# asp.net-mvc - 如何在 ASP.NET MVC 中导入 Google 联系人（请不要第三方）

> ID：14834667
> 
> 赞同：0
> 
> 时间：2013-02-12T14:20:09.337
> 
> 标签：asp.net-mvc, gmail, google-contacts-api

我使用了一个 API 来导入 GMail 的联系人。代码是这样的：

```
public static DataTable GetGmailContacts(string App_Name, string Uname, string UPassword)
    {
        Log.LogDebug(string.Format("SettingsController.cs-Importing Contacts for email={0}, password={1} from gmail server", Uname, UPassword));
        DataTable dt = new DataTable();
        DataColumn C2 = new DataColumn();
        C2.DataType = Type.GetType("System.String");
        C2.ColumnName = "EmailID";
        try
        {
            dt.Columns.Add(C2);
            RequestSettings rs = new RequestSettings(App_Name, Uname, UPassword);
            rs.AutoPaging = true;
            ContactsRequest cr = new ContactsRequest(rs);
            Feed<Contact> f = cr.GetContacts();
            foreach (Contact t in f.Entries)
            {
                foreach (EMail email in t.Emails)
                {
                    DataRow dr1 = dt.NewRow();
                    dr1["EmailID"] = email.Address.ToString();
                    dt.Rows.Add(dr1);
                }
            }
            Log.LogDebug(string.Format("SettingsController.cs-Imported Contacts for email={0}, password={1} from gmail server", Uname, UPassword));
            return dt;
        }
        catch (Exception e)
        {
            dt = null;
            Log.LogDebug(string.Format("SettingsController.cs-Imported Contacts for email={0}, password={1} from gmail server", Uname, UPassword));
            return dt;
        }
    } 
```

此代码导入 GMail 联系人，但它是第三方 DLL。所以有一段时间谷歌警告我不要使用它。所以我想使用 Direct API。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-26T21:11:23.810

> [**自 2012 年 4 月 20 日起，Google 联系人 API 的第 1 版和第 2 版已被正式弃用。它们将根据我们的弃用政策继续工作，但我们鼓励您从：**][[https](https://developers.google.com/google-apps/contacts/v2/developers_guide?hl=en)] ://developers.google移至第 3 版。 [[com/google-apps/contacts/v2/developers_guide?hl=en](https://developers.google.com/google-apps/contacts/v2/developers_guide?hl=en)]

 **> ## 使用 OAuth 2.0 授权请求
> 
> 对非公开用户数据的 Google Contacts API 请求必须由经过身份验证的用户授权。
> 
> OAuth 2.0 的授权过程或“流程”的细节会有所不同，具体取决于您编写的应用程序类型。以下一般流程适用于所有应用程序类型：
> 
> 1.  创建应用程序时，您将其注册到 Google。然后，Google 会提供您稍后需要的信息，例如客户端 ID 和客户端密码。
> 2.  在 Google API 控制台的服务窗格中激活 Google 联系人 API。（如果它未在控制台中列出，则跳过此步骤。）
> 3.  当您的应用程序需要访问用户数据时，它会要求 Google 提供特定的访问范围。
> 4.  Google 向用户显示一个 OAuth 对话框，要求他们授权您的应用程序请求他们的一些数据。
> 5.  如果用户批准，则 Google 会为您的应用程序提供一个短期访问令牌。
> 6.  您的应用程序请求用户数据，并将访问令牌附加到请求中。
> 7.  如果 Google 确定您的请求和令牌有效，则会返回请求的数据。
> 
> [**来自：** [https ://developers.google.com/google-apps/contacts/v3/#authorizing_requests_with_oauth_20](https://developers.google.com/google-apps/contacts/v3/#authorizing_requests_with_oauth_20)]

查看[Google Contacts API v2 Developer's Guide - .Net](https://developers.google.com/google-apps/contacts/v2/developers_guide_dotnet?csw=1#retrieving_without_query)和[Google Contacts API 3.0 版](https://developers.google.com/google-apps/contacts/v3/)以编写您自己的代码 :)**

# c# - 模型验证 - 仅验证用户输入字段？

> ID：14834673
> 
> 赞同：1
> 
> 时间：2013-02-12T14:20:22.123
> 
> 标签：c#, asp.net-mvc, validation, model-view-controller, asp.net-mvc-4

我很迷失在这里。我知道如何使用验证，并且我目前在每个项目中都使用 FluentValidation。但是每次制作新模型时都会出现一个问题 -*我应该只验证用户输入字段还是所有字段？*

## 例子

```
[Validator(typeof(ChatClientValidator))]
public class ChatClient
{
    public int ID { get; set; }
    public string IP { get; set; } // Generated on server
    public int ChatSessionID { get; set; }
    public virtual ChatSession ChatSession { get; set; }
    public string Name { get; set; } // Client field
    public string Email { get; set; } // Client Field
}

public class ChatClientValidator : AbstractValidator<ChatClient>
{
    public ChatClientValidator()
    {
        RuleFor(x => x.Name).NotEmpty().WithMessage("Name is required");
        RuleFor(x => x.Email).NotEmpty().WithMessage("E-Mail is required").EmailAddress().WithMessage("Enter correct E-Mail address");
    }
} 
```

我是否应该验证 IP、DateTime 等字段（在我的服务器端控制器上生成的字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T01:43:05.023

我将有一个视图模型，它可以在您的视图中直接表示您的字段。我只会验证我的视图模型字段。这当然是如果您还将更新的视图模型映射到域实体。

一旦你验证了你的视图模型然后映射到你的域实体，你的代码然后将你的域实体发送到其他层以更新到数据库。

在映射视图模型之前，您会返回并从数据库中获取现有域模型并将更改的视图模型字段映射到其中。

然后，您应该使用流利的验证或任何其他验证机制来验证整个域模型。

显然，如果您唯一的实体是您的视图模型，那么您需要在它到达数据库之前验证其上的每个字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T14:31:41.553

您应该验证所有字段。众所周知，编码员会犯错误，添加一些验证或断言语句会增加另一层保证，即您的软件按预期执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T14:45:42.013

我喜欢在模型回发到服务器后验证*处理*所需的所有字段。这里的逻辑是每个“ViewModel”类**可以**被多个视图使用，然后每个视图将显示模型的不同方面，并更改表单上显示（和隐藏）的数据会更改回发的值。不在视图中的任何字段都会将 null 或一些无效值（String.Empty 或 0 或 DateTime.MinValue 等）回发到控制器。

通过验证您需要处理的字段，您可以确保其他开发人员不会忘记添加必要的字段，而不用于处理的“只读”字段可以安全地回发为 null。

**例如：**我经常添加`List<SelectListItem>`属性以包含我可能不会验证的下拉信息，也不会在您的示例中验证 ChatSession（假设它用于设置其他值可以替换为 ChatSessionID 并且 ChatSession 主要是为了方便/展示）。但是我经常忘记为 ID 添加一个隐藏字段，所以我将它们标记为 [必需] 以确保它始终存在于我的回发中。

# iphone - 将 Tapku 日历添加到应用程序

> ID：14834678
> 
> 赞同：2
> 
> 时间：2013-02-12T14:20:48.403
> 
> 标签：iphone, ios, calendar, storyboard, tapku

我正在尝试将 Tapku 日历添加到我的应用程序中。我正在使用故事板，我添加了 Tapku 库，导入了必要的文件并添加了 TKCalendarMonthViewDelegate 方法。我正在将日历添加到名为 calendarView 的 UIView。当我运行应用程序时，日历不会出现，只是里面什么都没有的视图。

```
-(void)viewDidLoad
{
[super viewDidLoad];
[self.navigationController setNavigationBarHidden:NO animated:YES];

self.navigationItem.hidesBackButton = YES;
calendar =  [[TKCalendarMonthView alloc] init];
calendar.delegate = self;
calendar.dataSource = self;
calendar.frame = CGRectMake(0, 0, calendar.frame.size.width, calendar.frame.size.height);

// Ensure this is the last "addSubview" because the calendar must be the top most view layer
[self.view addSubview:calendar];
[calendar reload];

// Do any additional setup after loading the view.
} 
```

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T09:09:40.090

尝试直接指定帧点，像这样

```
calendar.frame = CGRectMake(0, 0, 320,400); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-22T23:33:52.897

如果您使用 Storyboard 将 TKCalendarMonthView 添加到您的视图控制器，那么您也不应该在视图控制器的 -viewDidLoad 方法中初始化另一个 TKCalendarMonthView 实例。

在您的故事板中：

*   将 TKCalendarMonthView 添加到您的视图控制器。
*   设置大小限制。
*   将 TKCalendarMonthView 连接到视图控制器中的插座（见下文）。

在您的视图控制器中：

为 TKCalendarMonthView 添加一个出口。

```
@interface YourViewController () <TKCalendarMonthViewDataSource, TKCalendarMonthViewDelegate>
@property (weak, nonatomic) IBOutlet TKCalendarMonthView *calendarMonthView;
@end 
```

在 -viewDidLoad 中，连接 TKCalendarMonthView 的委托和数据源。请注意，如果您首先将 IBOutlet 注释添加到 TKCalendarMonthView.h 中的委托和数据源属性，您也可以在 Storyboard 中执行此操作

```
@implementation YourViewController
...
- (void)viewDidLoad
{
    [super viewDidLoad];
...
    self.calendarMonthView.delegate = self;
    self.calendarMonthView.dataSource = self; 
```

但是，仅这些更改不会让 TKCalendarMonthView 显示日历。原因是视图正在由 Storyboard 初始化，但在 Storyboard 加载时没有调用任何现有的 -init 方法。因此，您需要向 TKCalendarMonthView.m 添加一个 -initWithCoder: 方法。以下示例将调用默认的 -init: 方法。

```
-(id)initWithCoder:(NSCoder *)aDecoder
{
    self = [self init];
    if (self) {

    }

    return self;
} 
```

如果您执行所有这些操作，您应该会看到呈现的日历而不是空白视图。

# jquery - 在 .not() 中选择孩子

> ID：14834681
> 
> 赞同：0
> 
> 时间：2013-02-12T14:20:59.260
> 
> 标签：jquery, hide, children

（对不起，代码片段在这里不起作用）

```
<ul>  
  <li><a href="#" title="" class="active">d</a>  
    <ul>  
      <li><a href="#" title="">d</a></li>  
      <li><a href="#" title="">d</a></li>  
    </ul>  
  </li>  
  ...  
</ul>  

$('#menu > ul > li ul').click(function (e) {  
   e.stopPropagation();  
}).not(this.parent().find('a.active')).hide(); 
```

看一下 .not() 语句。当来自父 li 的兄弟 a 具有活动的类时，我试图让子 UL 显示。我尝试了很多方法（兄弟姐妹、父母、find、hasclass、..），但它们都不起作用。可能是因为我没有以正确的方式使用选择器..

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T14:25:41.720

你可以用纯CSS来做到这一点：

```
.active + ul {
   display: block;
}
a + ul {
   display: none;
} 
```

但如果你想要 jQuery，那么：

```
$('#menu > ul > li ul').click(function (e) {  
   e.stopPropagation();  
}).hide();
$('#menu > ul > li').has('.active').find('ul').show(); 
```

是更好的选择

# jquery-ui - 拖动时交换表 td

> ID：14834682
> 
> 赞同：0
> 
> 时间：2013-02-12T14:20:59.667
> 
> 标签：jquery-ui, jquery-plugins, drag-and-drop, swap

我试图在拖放表中交换两个 TD 元素。我发现这个插件[可交换](http://www.eslinstructor.net/demo/swappable/swappable_home.html)，它以某种方式工作。但是当我拖动某个元素时，光标会将位置更改为某个特定值。我不想改变光标位置。但是当我重新设计这个插件时，它会停止工作。

有没有人有经验或知道任何其他插件？

谢谢，兹比尼克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:33:17.977

您是否尝试过 JQuery Sortable() 选项？见[http://jqueryui.com/sortable/#display-grid](http://jqueryui.com/sortable/#display-grid)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T14:43:05.617

通常我使用[jQuery sortable](http://jqueryui.com/sortable/)。它确实非常想要你想要的。您也可以在表格中使用它。

[然后我在接收事件](http://api.jqueryui.com/sortable/#event-receive)中设置的函数中做我的事情（包括 ajax 更新）

# android - android AlertDialog setView 规则

> ID：14834685
> 
> 赞同：16
> 
> 时间：2013-02-12T14:21:22.883
> 
> 标签：android, android-alertdialog, android-custom-view

该类的`setView()`方法`AlertDialog`允许为对话框指定自定义视图。此自定义视图中可以包含哪些控件是否有任何限制？

另外，如果我们设置一个自定义视图，我们还可以使用 , 等添加按钮`setPositiveButton()`吗`setNegativeButton()`？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-02-12T14:28:02.927

***AlertDialog 类的 setView() 方法允许为对话框指定自定义视图。此自定义视图中可以包含哪些控件是否有任何限制？***

[AlertDialog.Builder](http://developer.android.com/reference/android/app/AlertDialog.Builder.html)中的`setView()`方法采用从[View](http://developer.android.com/reference/android/view/View.html)扩展的任何类（参见它的子类及其子类）。

这意味着 EditTexts、Buttons 等。但也包括从 viewGroups 扩展的布局。

***另外，如果我们设置一个自定义视图，我们还可以使用 setPositiveButton、setNegativeButton 等添加按钮吗？***

是的，它只影响身体。在布局下方添加按钮。

```
@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
    AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
    // Get the layout inflater
    LayoutInflater inflater = getLayoutInflater();
    // Inflate and set the layout for the dialog
    // Pass null as the parent view because its going in the dialog
    // layout
    builder.setView(inflater.inflate(R.layout.YourLayout, null))
        .setPositiveButton(AlertDialog.BUTTON_NEGATIVE, "Yes!",
            new DialogInterface.OnClickListener() {
                @Override
                public void onClick(DialogInterface dialog, int id) {
                    //
                }
         })
        .setNegativeButton(AlertDialog.BUTTON_NEGATIVE, "Cancel",
            new DialogInterface.OnClickListener() {
                @Override
                public void onClick(DialogInterface dialog, int id) {
                    LoginDialogFragment.this.getDialog().cancel();
                }
         });
    return builder.create();
} 
```

**更新：**

自 2 年前以来，这个答案似乎有了一些新的活动，并且有些事情发生了变化。

由于当前的最佳实践状态，我稍微更新了代码以改进格式并添加了以下提示。

> AlertDialog 定义了对话框的样式和结构，但您应该使用 DialogFragment 作为对话框的容器。DialogFragment 类提供了创建对话框和管理其外观所需的所有控件，而不是调用 Dialog 对象上的方法。

上面的示例是指在回调方法中扩展`DialogFragment`和创建 a时。`AlertDialog``onCreateDialog()`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T14:29:19.150

在提供的文档中，[`AlertDialog`](http://developer.android.com/reference/android/app/AlertDialog.html)对于您可以在 AlertDialog 的视图中设置的内容没有任何限制。

因此自定义视图将占据对话框标题下方和按钮上方的位置，这些按钮根本不会受到影响。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-12T14:26:00.480

据我所知，你可以在 setView() 中添加任何你想要的东西。正/负按钮不会受到影响。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-20T10:27:31.620

**试试这个例子**

```
 android.support.v7.app.AlertDialog.Builder adb =
    new android.support.v7.app.AlertDialog.Builder(YoreActivity.this);

  ViewGroup subView = (ViewGroup) getLayoutInflater().// inflater view
                      inflate(R.layout.yore_layout_alert, null, false);

  try {// set data of yore layout

     ((TextView) subView.findViewById(R.id.messageAlert))//get element TextView 
                                            .setText(SomeText);//set text

  } catch (NullPointerException npe) {
    npe.printStackTrace();
  }

  adb.setPositiveButton("textPOSITIVE", new DialogInterface.OnClickListener() {//one method go
    @Override
    public void onClick(DialogInterface dialog, int which) {
      //  TODO some code
    }
  });//one method end

  final android.support.v7.app.AlertDialog alertDialog =
        adb.setTitle(SomeText)// set ttile 
        .setView( subView ).create();// add view in AlertDialog.Builder, and create AlertDialog

  try { //two method go

    ((Button) subView.findViewById(R.id.customPositivButton))
    .setOnClickListener(new View.OnClickListener() {
      @Override
      public void onClick(View v) {
        //  TODO some code
        alertDialog.dismiss();
      }
    });

  } catch (NullPointerException npe) {
    npe.printStackTrace();
  }  //two method end

  alertDialog.show(); //show in YoreActivity 
```

# entity-framework - 如何不止一次地找出 ObjectStateManager 中的实体

> ID：14834687
> 
> 赞同：1
> 
> 时间：2013-02-12T14:21:26.257
> 
> 标签：entity-framework, objectstatemanager

嗨，我收到以下错误：

> AcceptChanges 无法继续，因为对象的键值与 ObjectStateManager 中的另一个对象冲突。在调用 AcceptChanges 之前确保键值是唯一的。

现在我正在尝试修复它，但我需要查明是什么实体给我带来了麻烦，所以我知道去哪里找。

我知道错误是什么并且我知道如何解决它，但我不知道如何找出哪个实体是双重的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T14:35:48.133

您可以检查 ObjectStateManager 以获取所有修改后的实体。代码是这样的：

```
var lst = context.ObjectStateManager
              .GetObjectStateEntries(EntityState.Added |
                                     EntityState.Modified | 
                                     EntityState.Deleted);
var res = lst.GroupBy(c => c.EntityKey).Where(c=> c.Count() > 1); 
```

# python - 用圆逼近多边形

> ID：14834693
> 
> 赞同：8
> 
> 时间：2013-02-12T14:21:35.913
> 
> 标签：python, computational-geometry

好吧，用多边形近似一个圆和毕达哥拉斯的故事可能是众所周知的。但是反过来呢？

我有一些多边形，实际上应该是圆形。然而，由于测量误差，它们不是。所以，我正在寻找的是最能“近似”给定多边形的圆。

在下图中，我们可以看到两个不同的示例。

![在此处输入图像描述](../Images/d24f7ee562d3bfc32efcafd18b6b9f37.png)

我的第一个 Ansatz 是找到点到中心的最大距离和最小值。我们正在寻找的圆圈可能介于两者之间。

有没有解决这个问题的算法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T15:08:13.763

我会用`scipy`最好的方式将一个圆圈“拟合”到我的观点上。您可以通过简单的质心计算获得中心和半径的起​​点。如果点均匀分布在圆上，则此方法效果很好。如果不是，如下例所示，总比没有好！

拟合函数很简单，因为圆很简单。您只需要找到从拟合圆到点的径向距离，因为切线（径向）表面始终是最佳拟合。

```
import numpy as np
from scipy.spatial.distance import cdist
from scipy.optimize import fmin
import scipy

# Draw a fuzzy circle to test
N = 15
THETA = np.random.random(15)*2*np.pi
R     = 1.5 + (.1*np.random.random(15) - .05)
X = R*np.cos(THETA) + 5
Y = R*np.sin(THETA) - 2

# Choose the inital center of fit circle as the CM
xm = X.mean()
ym = Y.mean()

# Choose the inital radius as the average distance to the CM
cm = np.array([xm,ym]).reshape(1,2)
rm = cdist(cm, np.array([X,Y]).T).mean()

# Best fit a circle to these points
def err((w,v,r)):
    pts = [np.linalg.norm([x-w,y-v])-r for x,y in zip(X,Y)]
    return (np.array(pts)**2).sum()

xf,yf,rf = scipy.optimize.fmin(err,[xm,ym,rm])  

# Viszualize the results
import pylab as plt
fig = plt.figure()
ax = fig.add_subplot(1, 1, 1)

# Show the inital guess circle
circ = plt.Circle((xm, ym), radius=rm, color='y',lw=2,alpha=.5)
ax.add_patch(circ)

# Show the fit circle
circ = plt.Circle((xf, yf), radius=rf, color='b',lw=2,alpha=.5)
ax.add_patch(circ)

plt.axis('equal')
plt.scatter(X,Y)
plt.show() 
```

![在此处输入图像描述](../Images/69a733b56527c920f59949cffe4636d9.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T14:38:57.830

也许一个简单的算法将首先计算点的质心（假设它们通常大致规则间隔）。这是圆心。一旦你有了，你可以计算点的平均半径，给出圆的半径。

一个更复杂的答案可能是做一个简单的最小化，即最小化点到圆边缘的距离之和（或距离平方）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T14:32:05.577

有两种不同的 O(n) 算法可用于确定您绘制的最小圆，其中包含维基百科页面[minimum-circle](http://en.wikipedia.org/wiki/Smallest-circle_problem#cite_note-5) question 上的一系列点。从这里开始绘制第二个圆应该相当容易，只需确定您之前找到的圆的中心，然后找到最接近该点的点。第二个圆的半径就是那个。

这可能不是您想要的，但这就是我要开始的方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T14:32:11.637

该问题可能与[最小圆问题](http://en.wikipedia.org/wiki/Smallest-circle_problem)相同。

但由于您的测量误差可能包括异常值，因此 RANSAC 是一个不错的选择。请参阅[http://cs.gmu.edu/~kosecka/cs482/lect-fitting.pdf](http://cs.gmu.edu/~kosecka/cs482/lect-fitting.pdf)以了解该方法的概述（以及其他基本技术），位于[http://www.asl.ethz.ch/education/ master/info-process-rob/Hough-Ransac.pdf](http://www.asl.ethz.ch/education/master/info-process-rob/Hough-Ransac.pdf)有更多关于圆拟合的信息。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-12T15:20:05.283

很容易找到一些近似值：

```
def find_circle_deterministically(x,y):
    center = x.mean(), y.mean()
    radius = np.sqrt((x-center[0])**2 + (y-center[1])**2).mean()
    return center, radius 
```

解释：把圆心放在你的点的平均 x 和平均 y 上。然后，对于每个点，确定到中心的距离并取所有点的平均值。那是你的半径。

这个完整的脚本：

```
import numpy as np
import matplotlib.pyplot as plt

n_points = 10
radius = 4
noise_std = 0.3

angles = np.linspace(0,2*np.pi,n_points,False)
x = np.cos(angles) * radius
y = np.sin(angles) * radius
x += np.random.normal(0,noise_std,x.shape)
y += np.random.normal(0,noise_std,y.shape)

plt.axes(aspect="equal")
plt.plot(x,y,"bx")

def find_circle_deterministically(x,y):
    center = x.mean(), y.mean()
    radius = np.sqrt((x-center[0])**2 + (y-center[1])**2).mean()
    return center, radius

center, radius2 = find_circle_deterministically(x,y)
angles2 = np.linspace(0,2*np.pi,100,True)
x2 = center[0] + np.cos(angles2) * radius2
y2 = center[1] + np.sin(angles2) * radius2
plt.plot(x2,y2,"r-")

plt.show() 
```

产生这个情节：

![在此处输入图像描述](../Images/d9cd5685844d728fdfb951c4c2eafebb.png)

这会很好用，因为您有测量误差的多边形。如果您的点在角度上的分布不大致相等`[0,2pi[`，它将表现不佳。

更一般地说，您可以使用优化。

# javascript - JSON 通过变量名检索对象

> ID：14834702
> 
> 赞同：2
> 
> 时间：2013-02-12T14:21:53.973
> 
> 标签：javascript, jquery, json

我创建了一个返回 JSON 字符串的 .post 表单，我需要根据选择框的名称获取数据。请参考以下示例。

JavaScript

```
$(document).ready(function(){
    $.post('/seller/product_upload/helpers/jpost_product_form_autofill.php',{product_id:$("input[name='product_id']").val()},function(data){
        alert(data);
        if(data!='false'){
            var obj = jQuery.parseJSON(data);
            $("#attributes_table select").each(function(){
                var select=$(this);
                select.find("option").each(function(){
                    var option=$(this);
                    var select_name=select.attr('name');
                    alert(select_name);
                    alert(obj.select_name);
                    if(option.val()==obj.select_name){
                        option.attr('selected','selected');
                    }
                });
            });
        }
    });
}); 
```

这里关注的主要部分实际上是底部`if`。`obj.select_name`不是这里的主要对象名称。它实际上是`selectbox`我在 JSON 中解析的数组键值巧合的名称。

但现在系统不断提醒 undefined for `obj.select_name`。有什么方法可以先将 select_name 解析为字符串，然后再将其解析为 JSON 对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T14:25:38.720

我相信你想这样做：

```
var name = 'select_name';
alert(obj[name]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T14:33:25.933

如前所述，您需要使用方括号来使用未知字符串作为索引。也就是说，您可以使用 jQuery 的`val`函数来简化您的代码。您不需要手动设置选项值，`val`可以像读取它们一样设置它们。像这样：

```
var obj = jQuery.parseJSON(data);
$("#attributes_table select").each(function(){
    var select = $(this);
    select.val(obj[select.attr('name')]);
}); 
```

你也可以这样做，因为它`val`会自动在`forEach`里面做。

```
var obj = jQuery.parseJSON(data);
$("#attributes_table select").val(function(){
    return obj[$(this).attr('name')];
}); 
```

# php - PHP从结果集中访问第n行

> ID：14834704
> 
> 赞同：2
> 
> 时间：2013-02-12T14:22:00.267
> 
> 标签：php, mysql

我有一个返回 5 行的 mysql 查询。

```
SELECT name, email, address from users 
```

我如何将这个结果集中的 3 行分配给一行？

像，`$row = mysql_fetch_array($result[3])`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T14:22:34.740

试试这个:: 使用`LIMIT`

这里逗号前的值表示第 n 行，逗号后的值表示要获取的行数。

```
SELECT name, email, address from users LIMIT 3,1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T14:24:47.140

如前所述，您可以使用 LIMIT 直接在数据库中执行此操作，但如果您想使用 PHP 以编程方式执行此操作，您可以使用`mysql_data_seek`- 请注意 mysql_ 方法已被弃用，并将在 PHP 的未来版本中删除。

```
mysql_data_seek($result, 2); // rows start at 0 
```

# iphone - 服务器没有从 Iphone 获取正确格式的数据？

> ID：14834707
> 
> 赞同：0
> 
> 时间：2013-02-12T14:22:14.973
> 
> 标签：iphone, ios, asp.net-mvc, ios5, asp.net-mvc-4

我的服务器上有一个 ASP.NET MVC。Iphone 正在向 ASP.NET MVC 控制器发送一个 Http 请求。这是Iphone代码，

```
-(void)addNSData:(NSData*)datapart inData:(NSMutableData*)POSTBody forkey:(NSString*)key
{
    [POSTBody appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"%@\"\r\n\r\n", key] dataUsingEncoding:NSUTF8StringEncoding]];
    [POSTBody appendData:[[NSString stringWithFormat:@"%@", datapart] dataUsingEncoding:NSUTF8StringEncoding]];
    [POSTBody appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n", POSTBoundary] dataUsingEncoding:NSUTF8StringEncoding]];
}

{
    NSMutableURLRequest *request = nil;
    request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:@"http://XXX/XXX/publish"]];

NSString *jsonFilePath = [[SharedData shareData].pageDataFolderPath stringByAppendingPathComponent:@"page_json.json"];

[ request setHTTPMethod: @"POST" ];
 [request addValue:[NSString stringWithFormat:@"multipart/form-data; boundary=%@", POSTBoundary] forHTTPHeaderField:@"Content-Type"];
    [request addValue:@".ASPXAUTH=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX" forHTTPHeaderField:@"Cookie"];

// Add HTTP Body
 NSMutableData *POSTBody = [NSMutableData data];
    [POSTBody appendData:[[NSString stringWithFormat:@"--%@\r\n",POSTBoundary] dataUsingEncoding:NSUTF8StringEncoding]];
    [self addNSData:[NSData dataWithContentsOfFile:localZipPath] inData:POSTBody forkey:@"zipFile"];
    [self addNSData:[NSData dataWithContentsOfFile:jsonFilePath] inData:POSTBody forkey:@"contents"];
    NSString *v = page.mo_page.version;
    [self addNSData:[v dataUsingEncoding:NSUTF8StringEncoding] inData:POSTBody forkey:@"version"];
    [self addNSData:[@"true" dataUsingEncoding:NSUTF8StringEncoding] inData:POSTBody forkey:@"isActive"];
    [self addNSData:[page.mo_page.pageid dataUsingEncoding:NSUTF8StringEncoding] inData:POSTBody forkey:@"directory"];

    // Add the closing -- to the POST Form
    [POSTBody appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n", POSTBoundary] dataUsingEncoding:NSUTF8StringEncoding]];

    // Add the body to the myMedRequest & return
    [request setHTTPBody:POSTBody];

    NSURLResponse *response = nil;
    NSError *error = nil;
    NSData *responseData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];

    if(error)
    {
        NSLog(@"Error if any:%@",error.localizedDescription);

    }
    else {
        NSLog(@"Response : %@",[[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding]);
    }
    [[NSFileManager defaultManager] removeItemAtPath:localZipPath error:nil];
    localZipPath = nil;
} 
```

以这种格式获取数据的 ASP.NET MVC 服务器，例如

```
Request.Form["Directory"]= "<32383862 33363339 36393538 34653463 62643862 35376561 66653135 35313764>" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T14:42:48.450

内容类型“ `multipart/form-data`”应用于提交包含文件、非 ASCII 数据和二进制数据的表单。

```
[request addValue:[NSString stringWithFormat:@"multipart/form-data; boundary=%@", POSTBoundary] forHTTPHeaderField:@"Content-Type"]; 
```

那不应该是“ `application/json`”吗？
你告诉你的请求包含二进制数据，这就是服务器所期望的，这就是它得到的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T14:41:12.287

当您看到 ""<32383862..." 时，如果您将其作为 NSData 的“描述”，这就是您将看到的 (NSData *foo; ...; NSLog(@"FOO: %@", foo);) . 你需要做的是通过获取对象的长度和“bytes”指针来访问实际的字节。

```
NSData *foo;
// set foo to some data object
NSUInteger len = [data length];
uint8_t *ptr = [data bytes];
memcpy(toSomeLocation, ptr, len); 
```

# java - java.lang.UnsatisfiedLinkError: t2cGetCharSet

> ID：14834709
> 
> 赞同：1
> 
> 时间：2013-02-12T14:22:19.163
> 
> 标签：java, oracle, driver

我收到以下错误：java.lang.UnsatisfiedLinkError: t2cGetCharSet

```
oracle.jdbc.driver.T2CConnection.t2cGetCharSet(Native Method)
    oracle.jdbc.driver.T2CConnection.getCharSetIds(T2CConnection.java:2957)
    oracle.jdbc.driver.T2CConnection.logon(T2CConnection.java:320)
    oracle.jdbc.driver.PhysicalConnection.<init>(PhysicalConnection.java:361)
    oracle.jdbc.driver.T2CConnection.<init>(T2CConnection.java:142)
    oracle.jdbc.driver.T2CDriverExtension.getConnection(T2CDriverExtension.java:79)
    oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:595)
    java.sql.DriverManager.getConnection(DriverManager.java:512)
    java.sql.DriverManager.getConnection(DriverManager.java:171) 
```

我已经尝试过 ojdbc14.jar 和 classes12.jar。使用的 Oracle 版本是 10 G。请告诉我如何解决此问题。

# r - 在 R 中粘贴 "25 \%" 以便在 LaTeX 中进一步处理

> ID：14834711
> 
> 赞同：3
> 
> 时间：2013-02-12T14:22:25.253
> 
> 标签：r, sweave

我希望 R 中的字符变量取值，比如说“a”，然后添加“\%”，以便稍后在 LaTeX 中创建一个 % 符号。

通常我会做类似的事情：

```
a <- 5
paste(a,"\%") 
```

但这失败了。

```
Error: '\%' is an unrecognized escape in character string starting "\%" 
```

有任何想法吗？一种解决方法是在 LaTeX 中定义另一个给出 %-sign 的命令，但我更喜欢 R 中的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T14:24:39.343

与许多其他语言一样，字符串中的某些字符在转义时具有不同的含义。一个例子是`\n`，这意味着换行而不是`n`。当您编写 时`\%`，R 会尝试将其解释`%`为特殊字符，但这样做失败了。您可能想尝试转义反斜杠，使其只是一个反斜杠：

```
paste(a, "\\%") 
```

[您可以在此处](http://cran.r-project.org/doc/manuals/R-lang.html#Literal-constants)阅读转义序列。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-12T14:27:18.840

您还可以查看包中的函数，该`latexTranslate`函数将从`Hmisc`字符串中转义特殊字符以使其与 LaTeX 兼容：

```
R> latexTranslate("You want to give me 100$ ? I agree 100% !")
[1] "You want to give me 100\\$ ? I agree 100\\% !" 
```

# windows - Windows 7：复制粘贴 .png 图像会导致其失去透明度？

> ID：14834714
> 
> 赞同：0
> 
> 时间：2013-02-12T14:22:35.063
> 
> 标签：windows, image-processing

如标题所述。

这在 Windows 上发生在我身上，图像具有透明背景。

有没有办法在复制粘贴时避免这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T14:42:13.993

好的，我忘了提到的是，在我复制粘贴图像后，我还使用油漆调整了它的大小，期望油漆保持透明度。

但看起来Paint并没有这样做。

# ruby-on-rails-3 - 如何在同一个请求中将许多记录设置为新状态？

> ID：14834715
> 
> 赞同：0
> 
> 时间：2013-02-12T14:22:45.167
> 
> 标签：ruby-on-rails-3

我正在使用 Rails 3.2 开发 API，并且正在为用户获取消息。我需要将我获取的所有消息设置为在同一个请求中读取的状态。我现在正在这样做，有没有更好更快的方法？

```
@output = @message.answers.page(params[:page]).per(10)
@output.each do |message|
 message.status = "read"
 message.save
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T14:38:53.057

`messages.update_all(status: "read")`

# excel - .csv 文件的 BCP SQL 命令存在格式问题

> ID：14834717
> 
> 赞同：0
> 
> 时间：2013-02-12T14:22:49.890
> 
> 标签：excel, sql-server-2005, csv, bcp

我有一个简单的 BCP 命令来查询我的 MSSQL 数据库并将结果复制到 .csv 文件，如下所示：

```
bcp "select fullname from [database1].[dbo].employee" queryout  "c:\test\table.csv"  -c -t"," -r"\n" -S servername -T 
```

当全名列是用逗号分隔的 varchar 时，问题就出现了，例如“Lee, Bruce”。将结果复制到 .csv 文件时，逗号之前的部分 (Lee) 将放置在 Excel 电子表格的第一列中，逗号之后的部分 (Bruce) 将放置在第二列中。我希望它保留第一列中的所有内容并保留逗号 (Lee, Bruce) 。有谁知道如何实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T14:44:52.813

显然，您应该将列分隔符设置为不同于逗号的内容。我不熟悉上述语法，但我猜这些：`-c -t"," -r"\n"`分别是列分隔符和换行符。

此外，您应该更改区域设置中的默认 CSV 分隔符，或者使用导入向导在 Excel 中正确放置数据。顺便说一句，关于 SO 有很多类似的问题。

# android - 为什么我不能在 Android 中为我的 Fragment 充气？

> ID：14834719
> 
> 赞同：1
> 
> 时间：2013-02-12T14:23:00.637
> 
> 标签：android, fragment

我有一个活动，其中包含三个片段，两个具有`listView`布局，一个具有`Relative layout`.

这是活动的xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id = "@+id/activity_main_large"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" xmlns:tools="http://schemas.android.com/tools">

     <fragment
         android:id="@+id/menu_category_fragment"
         android:name="com.thesis.menubook.MenuCategory"
         android:layout_width="123dp"
         android:layout_height="match_parent"
         tools:layout="@layout/activity_menu_category" />

     <fragment
         android:id="@+id/menu_fragment"
         android:name="com.thesis.menubook.MenuFragment"
         android:layout_width="0dip"
         android:layout_height="match_parent"
         android:layout_weight="0.35"
         tools:layout="@layout/activity_menu_fragment" />

     <fragment
         android:id="@+id/orderlist_fragment"
         android:name="com.thesis.menubook.OrderListFragment"
         android:layout_width="wrap_content"
         android:layout_height="match_parent"
         android:layout_weight="0.08"
         tools:layout="@layout/activity_order_list" />

</LinearLayout> 
```

这是主要活动的java文件

```
package com.thesis.menubook;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;

public class MenuMain extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_menu_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.layout.activity_menu_main, menu);
        return true;
    }
} 
```

在那里，我只是试图加载空片段以查看它们是否会实际加载，然后添加小部件和代码以将数据导入片段。但我收到一条错误消息`java.lang.RuntimeException: Unable to start activity ComponentInfo{com.thesis.menubook/com.thesis.menubook.MenuMain}:`

有什么我忽略的原因是它无法加载空片段的原因吗？

这是我的 LogCat（更正类名后更新）：

```
02-12 23:04:28.369: E/AndroidRuntime(1143): FATAL EXCEPTION: main
02-12 23:04:28.369: E/AndroidRuntime(1143): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.thesis.menubook/com.thesis.menubook.MenuMain}: android.view.InflateException: Binary XML file line #8: Error inflating class fragment
02-12 23:04:28.369: E/AndroidRuntime(1143):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1748)
02-12 23:04:28.369: E/AndroidRuntime(1143):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1764)
02-12 23:04:28.369: E/AndroidRuntime(1143):     at android.app.ActivityThread.access$1500(ActivityThread.java:122)
02-12 23:04:28.369: E/AndroidRuntime(1143):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1002)
02-12 23:04:28.369: E/AndroidRuntime(1143):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-12 23:04:28.369: E/AndroidRuntime(1143):     at android.os.Looper.loop(Looper.java:132)
02-12 23:04:28.369: E/AndroidRuntime(1143):     at android.app.ActivityThread.main(ActivityThread.java:4025)
02-12 23:04:28.369: E/AndroidRuntime(1143):     at java.lang.reflect.Method.invokeNative(Native Method)
02-12 23:04:28.369: E/AndroidRuntime(1143):     at java.lang.reflect.Method.invoke(Method.java:491)
02-12 23:04:28.369: E/AndroidRuntime(1143):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
02-12 23:04:28.369: E/AndroidRuntime(1143):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
02-12 23:04:28.369: E/AndroidRuntime(1143):     at dalvik.system.NativeStart.main(Native Method)
02-12 23:04:28.369: E/AndroidRuntime(1143): Caused by: android.view.InflateException: Binary XML file line #8: Error inflating class fragment
02-12 23:04:28.369: E/AndroidRuntime(1143):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:688)
02-12 23:04:28.369: E/AndroidRuntime(1143):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:724)
02-12 23:04:28.369: E/AndroidRuntime(1143):     at android.view.LayoutInflater.inflate(LayoutInflater.java:479)
02-12 23:04:28.369: E/AndroidRuntime(1143):     at android.view.LayoutInflater.inflate(LayoutInflater.java:391)
02-12 23:04:28.369: E/AndroidRuntime(1143):     at android.view.LayoutInflater.inflate(LayoutInflater.java:347)
02-12 23:04:28.369: E/AndroidRuntime(1143):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:223)
02-12 23:04:28.369: E/AndroidRuntime(1143):     at android.app.Activity.setContentView(Activity.java:1780)
02-12 23:04:28.369: E/AndroidRuntime(1143):     at com.thesis.menubook.MenuMain.onCreate(MenuMain.java:15)
02-12 23:04:28.369: E/AndroidRuntime(1143):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1048)
02-12 23:04:28.369: E/AndroidRuntime(1143):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1712)
02-12 23:04:28.369: E/AndroidRuntime(1143):     ... 11 more
02-12 23:04:28.369: E/AndroidRuntime(1143): Caused by: java.lang.ClassCastException: com.thesis.menubook.MenuCategory cannot be cast to android.app.Fragment
02-12 23:04:28.369: E/AndroidRuntime(1143):     at android.app.Fragment.instantiate(Fragment.java:493)
02-12 23:04:28.369: E/AndroidRuntime(1143):     at android.app.Fragment.instantiate(Fragment.java:468)
02-12 23:04:28.369: E/AndroidRuntime(1143):     at android.app.Activity.onCreateView(Activity.java:4132)
02-12 23:04:28.369: E/AndroidRuntime(1143):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:664)
02-12 23:04:28.369: E/AndroidRuntime(1143):     ... 20 more
02-12 23:04:28.905: D/dalvikvm(1143): GC_CONCURRENT freed 329K, 6% free 7390K/7815K, paused 12ms+20ms
02-12 23:04:34.180: I/Process(1143): Sending signal. PID: 1143 SIG: 9** 
```

MenuCategory.java

```
package com.thesis.menubook;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

public class MenuCategory extends Fragment {
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, 
            Bundle savedInstanceState) {

            View view = inflater.inflate(R.layout.activity_menu_category, container, false);
            return view;
    }
} 
```

MenuFragment.java

```
package com.thesis.menubook;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

public class MenuFragment extends Fragment{
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, 
            Bundle savedInstanceState) {

        View view = inflater.inflate(R.layout.activity_menu_fragment, container, false);
        return view;
    }
} 
```

OrderListFragment.java

```
package com.thesis.menubook;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

public class OrderListFragment extends Fragment{
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
                             Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.activity_order_list, container, false);
        return view;
    }
} 
```

以下是片段的 xml 文件：

活动菜单类别

```
<?xml version="1.0" encoding="utf-8"?>
<ListView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

</ListView> 
```

活动菜单片段

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout android:layout_width="match_parent"
    android:layout_height="match_parent" android:gravity="bottom|top" xmlns:android="http://schemas.android.com/apk/res/android" android:paddingLeft="16dp" android:paddingRight="16dp" android:paddingTop="16dp">

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:contentDescription="@string/hello_world"
        android:paddingTop="20dp" />

</RelativeLayout> 
```

活动订单列表

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
    android:orientation="vertical" >

    <!-- Name Label -->
    <TextView
        android:id="@+id/categoryname"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:paddingTop="6dip"
        android:paddingLeft="6dip"
        android:textSize="20sp"
        android:textStyle="bold" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-02-16T17:37:33.120

您使用了错误的 Fragment 类。您正在使用支持库片段`android.support.v4.app.Fragment`。它期望本地框架实​​现：`android.app.Fragment`.

如果您想使用支持库，以便在旧版本上使用，您的活动需要扩展`android.support.v4.app.FragmentActivity`. 然后您将使用该`getSupportFragmentManager()`方法获取 FragmentManager 并添加您的片段。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T14:29:25.390

这是你的答案

```
Caused by: android.app.Fragment$InstantiationException: Unable to instantiate fragment com.example.android.fragments.MenuCategory: make sure class name exists, is public, and has an empty constructor that is public 
```

确保您有默认/空`public`构造函数，`MenuCategory`并确保它`MenuCategory`不是内部类，如果是，那么它应该是`public`and `static`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T14:29:33.320

您的项目中有`MenuCategory`, `MenuFragment`,`OrderListFragment`类吗？如果是这样，您是否将它们放在名为 的包中`com.example.android.fragments`？如果您有这些类，但您将它们放在自己的包中，则需要将 xml 布局中的包名称更改为您自己的，而不是 com.example 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-26T18:44:45.300

1) 您应该在 Anroidmanifest.xml 中将 minSdkVersion 的值更改为 11。2）检查你的mainactivity.xml中定义的fragment的name值是否正确，即packagename.Fragmentclassname。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T14:36:18.437

答案就在错误消息中：

无法实例化片段 com.example.android.fragments.MenuCategory

您需要在您的项目中拥有一个完全限定名称为 com.example.android.fragments.MenuCategory 的类，它是 Fragment 的子类，并且具有无参数构造函数

编辑添加：

在布局的标签中：

```
<fragment
         android:id=blah blah blah
         android:name="com.thesis.menubook.MenuCategory" 
```

...你命名一个Java类。在您的示例中，它是“com.thesis.menubook.MenuCategory”。正如我所说，该类必须存在于您的项目中，扩展 Fragment，并具有无参数构造函数（实际上，您根本不应该提供任何构造函数，因此它只有默认构造函数）。对于每个片段标签，你必须有这样一个类，对应每个 android:name 属性的值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-03-08T15:56:11.657

对我来说问题是别的，我使用的是导航组件，碰巧我没有添加`id`片段标签，也一定要升级到最新的 gradle 版本（我`3.3.2`的暂时是）

# gps - 室内定位

> ID：14834720
> 
> 赞同：2
> 
> 时间：2013-02-12T14:23:15.163
> 
> 标签：gps, indoor-positioning-system

我试图通过谷歌地图上的实际建筑来定位我的平面图来获得室内 GPS。我知道完美的准确性是不可能的。知道怎么做吗？地图需要转换成kml格式吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T17:06:14.863

忘了那个！

只有运气好你才能获得室内 GPS 信号，可能只在窗户附近，然后它可能比你的建筑物的大小更失真。

您只能尝试在建筑物的拐角处获取外部坐标。

对于精确的测量，您需要对测量进行一些平均，只有少数 GPS 设备提供。如果精度较低，请获取坐标，或在不同的时间、日期进行测量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-17T19:20:42.417

否则，您应该考虑使用 Wifi/HF 和您可以精确定位的任何其他无线/无线电源进行地理定位，因为您可能自己安装它，或者至少您的公司/服务中的某个人负责它们，并且可以为您提供完整列表坐标。然后，一旦您获得了无线电位置，您就可以使用无线电传播和位置对设备进行地理定位。

我知道这不是您要寻找的答案，但如果您确实需要在建筑物内找到人员，请考虑将其作为替代答案。

PS：我在工作中做过，效果很好（除了一些无线电发射器损坏的区域）。

# backbone.js - 在 Backbone.js 中处理辅助视图

> ID：14834723
> 
> 赞同：0
> 
> 时间：2013-02-12T14:23:30.147
> 
> 标签：backbone.js

我有一个基本的 Backbone 应用程序，它从远程服务获取 JSON 对象数组并显示它们：到目前为止一切都很好。但是，每个 JSON 对象都有一个标签数组，我想在网页的单独区域中显示标签。

我的问题是：这样做对 Backbone 最友好的方式是什么？我可以在第二个视图中再次解析现有数据，这更清晰但占用更多计算（处理整个数组两次）。

另一种方法是在主视图中收集标签信息，因为它正在通过数组工作，然后将其传递给辅助视图，但随后我将视图链接在一起。

最后，我想根据这些标签进行过滤（因此标签将成为切换按钮，打开/关闭这些按钮将过滤主视图中的信息）；这对如何布局有什么影响吗？

代码片段的奖励积分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T15:05:25.500

嗯。我不确定这是否是 Backbone 友好的方式，但我会将逻辑用于检索集合中的标签列表（我认为这就是您所说的“解析”）。

主视图和子视图都会“监听”同一个集合，而子视图只会调用 collection.getTags() 来获取它需要的标签列表。

```
// Model that represents the list data
var ListDataModel = Backbone.Model.extend({
    defaults: function() {
        return {
            name: null,
            tags: []
        };
    }
});

// Collection of list data
var ListDataCollection = Backbone.Collection.extend({
    model: ListDataModel,
    initialize: function() {
        var me = this;

        // Expires tag collection on reset/change
        this.on('reset', this.expireTagCache, this);
        this.on('change', this.expireTagCache, this);
    },
    /**
     * Expires tag cache
     * @private
     */
    expireTagCache: function() {
        this._cachedTags = null;
    },
    /**
     * Retrieves an array of tags in collection
     * 
     * @return {Array}
     */
    getTags: function() {
        if (this._cachedTags === null) {
            this._cachedTags = _.union.apply(this, this.pluck('tags'));
        }

        return this._cachedTags;
    },

    sync: function(method, model, options) {
        if (method === 'read') {
            var me = this;

            // Make an XHR request to get data for this demo
            Backbone.ajax({
                url: '/echo/json/',
                method: 'POST',
                data: {
                    // Feed mock data into JSFiddle's mock XHR response
                    json: JSON.stringify([
                        { id: 1, name: 'one', tags: [ 'number', 'first', 'odd' ] },
                        { id: 2, name: 'two', tags: [ 'number', 'even' ] },
                        { id: 3, name: 'a', tags: [ 'alphabet', 'first' ] }
                    ]),
                },
                success: function(resp) {
                    options.success(me, resp, options);
                },
                error: function() {
                    if (options.error) {
                        options.error();
                    }
                }
            });
        }
        else {
            // Call the default sync method for other sync method
            Backbone.Collection.prototype.sync.apply(this, arguments);
        }
    }
});

var listColl = new ListDataCollection();
listColl.fetch({
    success: function() {
        console.log(listColl.getTags());
    }
}); 
```

我猜想在集合中处理这个有两个原因：

*   它使视图代码更清晰（这是因为我们在标签提取中没有做非常复杂的逻辑 - 它只是一个简单的 _.pluck() 和 _.union()。
*   它涉及 0 个业务逻辑 - 它可以说属于数据层。

要解决性能问题：

*   它确实通过了两次收集 - 但是，如果您使用的数据量过多，即使在这种情况下客户端也无法处理，您可能需要考虑要求后端为此提供 API 端点。（即使是总共 1000 个标签的 500 条数据，对于现在的现代浏览器来说也不应该太多。）

唔。这有帮助吗？

JSFiddle 与这个集合和模型一起使用：http: [//jsfiddle.net/dashk/G8LaB/](http://jsfiddle.net/dashk/G8LaB/)（并且，一个日志语句来演示结果`.getTags()`）。

# c# - 绑定源事件或网格事件中的 UI 相关代码？

> ID：14834726
> 
> 赞同：0
> 
> 时间：2013-02-12T14:23:39.373
> 
> 标签：c#, winforms, data-binding, user-interface

我有一个带有 1 个绑定源控件的表单。

一个网格和几个独立控件（文本和标签）正在与此源共享绑定。

每次用户更改网格行时，我都想启用/禁用一些控件。

`BindingSource.CurrentChanged`我应该在事件中还是在事件中编写此代码`DataGridView1.RowValidating`？

我倾向于使用 bindingsource 事件，因为我认为它在全球范围内为我提供了我想要的东西，但我“觉得”在那里做 UI 代码是错误的。

意见？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:31:10.227

使用`BindingSource.CurrentChanged`evnt 处理 UI 代码并没有错。`BindingSource`是一个 WinForms 组件。

`dataGridView.RowValidating`事件在事件*之前* `BindingSource`触发。根据您的需要，我会说可以使用其中任何一个:)

# python - python gnuplotpy 与日期时间

> ID：14834731
> 
> 赞同：0
> 
> 时间：2013-02-12T14:23:46.320
> 
> 标签：python, datetime, gnuplot

我一直在尝试使用 gnuplot.py 打印以下数据：

```
data = [[datetime.datetime(2013, 1, 15, 17, 45), 16.00], [datetime.datetime(2013, 1, 16, 17, 45), 15.98], [datetime.datetime(2013, 1, 17, 17, 45), 15.94]] 
```

所以我是这样开始的：

```
gp=Gnuplot.Gnuplot()
gp('set data style linespoints')
gp('set xdata time')
gp('set timefmt "%Y-%m-%d"')
gp('set xrange ["2012-12-20":"2013-02-12"]')
gp.plot(data) 
```

我得到以下回应：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python2.6/dist-packages/Gnuplot/_Gnuplot.py", line 285, in plot
    self._add_to_queue(items)
  File "/usr/lib/python2.6/dist-packages/Gnuplot/_Gnuplot.py", line 255, in _add_to_queue
    self.itemlist.append(PlotItems.Data(item))
  File "/usr/lib/python2.6/dist-packages/Gnuplot/PlotItems.py", line 549, in Data
    data = utils.float_array(data[0])
  File "/usr/lib/python2.6/dist-packages/Gnuplot/utils.py", line 33, in float_array
    return numpy.asarray(m, numpy.float32)
  File "/usr/lib/python2.6/dist-packages/numpy/core/numeric.py", line 230, in asarray
    return array(a, dtype, copy=False, order=order)
ValueError: setting an array element with a sequence. 
```

然后，我尝试将其转换为以下列表：

```
[['2013-01-15', 16.00], ['2013-01-16', 15.98], ['2013-01-17', 15.94]] 
```

结果相同。

有谁知道问题出在哪里？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T14:45:06.693

问题（我相信）出在 gnuplot-py 内部的这一行中，我从回溯中提取了该行：

```
return numpy.asarray(m, numpy.float32) 
```

最终发生的事情是 gnuplot-py 试图将您的日期时间（或字符串）数据转换为`numpy.float32`对象。如果您愿意跳过一些障碍，我们可能会完成这项工作。

* * *

*在检查源后，这部分解决方案实际上可能不是必需的。* 您需要做的第一件事是将内部的那行更改`utils.py`为 use`numpy.float64`而不是`numpy.float32`然后重新安装`gnuplot-py`. 这样我们就可以使用有点标准的纪元符号。（或者，您可以通过更改回溯中引用的文件来绕过重新安装步骤——它甚至可以为您提供行号）：

```
File "/usr/lib/python2.6/dist-packages/Gnuplot/utils.py", line 33, in float_array
    return numpy.asarray(m, numpy.float32) 
```

现在第 33 行显示`numpy.asarray(m,numpy.float64)`为

* * *

我们可以使用浮点数来存储时代信息（`float32`只是没有提供足够的精度，我不认为......）

```
def secs_since_epoch(date_time,epoch=datetime.datetime(1970,1,1,0,0,0)):
    """
    compute seconds since a particular epoch.  The default epoch is the unix
    epoch -- e.g. Jan. 1 1970.
    """
    dt = date_time - epoch  #time elapsed since unix epoch
    return dt.days*24*3600 + dt.seconds + dt.microseconds*1e-6 #converted to seconds 
```

您可以在日期时间对象上使用此函数将它们从日期时间对象转换为简单（双精度）浮点数。幸运的是，Gnuplot 也可以为时间对象读取这种格式：

```
gp = Gnuplot.Gnuplot()
gp('set data style linespoints')
gp('set xdata time')
gp('set timefmt "%s"')
xmin = secs_since_epoch(datetime.datetime(2012,12,20,0,0))
xmax = secs_since_epoch(datetime.datetime(2012,2,12,0,0))
gp('set xrange [%s:%s]' % (xmin,xmax) )
gp.plot(data) 
```

* * *

以下脚本对我来说没问题：

```
import datetime
import Gnuplot

data = [[datetime.datetime(2013, 1, 15, 17, 45), 16.00],
        [datetime.datetime(2013, 1, 16, 17, 45), 15.98],
        [datetime.datetime(2013, 1, 17, 17, 45), 15.94]]

def secs_since_epoch(date_time,epoch=datetime.datetime(1970,1,1,0,0,0)):
    """
    compute seconds since a particular epoch.  The default epoch is the unix
    epoch -- e.g. Jan. 1 1970.
    """
    dt = date_time - epoch  #time elapsed since unix epoch
    return dt.days*24*3600 + dt.seconds + dt.microseconds*1e-6 #converted to seconds

dt,vals = zip(*data)
data = zip(map(secs_since_epoch,dt),vals)

gp = Gnuplot.Gnuplot(debug=True)
gp('set style data linespoints')
gp('set xdata time')
gp('set timefmt "%s"')
xmin = secs_since_epoch(datetime.datetime(2012,12,20,0,0))
xmax = secs_since_epoch(datetime.datetime(2012,2,12,0,0))
#gp('set xrange [%s:%s]' % (xmin,xmax) )
d = Gnuplot.Data(data)
d.set_option(using="1:2")
gp.plot(d)
raw_input() 
```

# opencv - OpenCV - 在 wince6 中处理来自 USB 摄像头的流

> ID：14834732
> 
> 赞同：-2
> 
> 时间：2013-02-12T14:23:48.850
> 
> 标签：opencv, camera, usb, windows-ce

我需要处理来自 USB 摄像头的视频，但我不知道如何将流保存在内存中。我找到了一个在窗口中显示它的代码，但在它显示之前我找不到它的存储位置。任何人都可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T18:02:04.883

如果您[查看我的其他答案](https://stackoverflow.com/a/3402114/176769)，您会看到该函数`cvQueryFrame()`从相机中检索一帧并将其存储在`color_frame`一个类型为变量的变量中`IplImage*`。OpenCV 使用该类型`IplImage`来表示内存中的图像。当然，这个例子展示了如何使用 OpenCV 的 C 接口，所以如果你打算使用 C++ 接口，你必须研究`cv::Mat`.

无论如何，从相机中检索帧并将它们保存在内存中以供以后使用需要您有一个缓冲机制来存储帧。我建议你研究一下**循环缓冲区**（又名*ringbuffers*），看看它们是如何工作的：

*   [C + OpenCV：带有循环缓冲区的 IplImage](https://stackoverflow.com/q/9733005/176769)
*   [循环缓冲区的线程安全实现](https://stackoverflow.com/questions/9743605/thread-safe-implementation-of-circular-buffer)
*   [如何实现 cv::Mat 对象（OpenCV）的循环缓冲区？](https://stackoverflow.com/q/9472880/176769)

# json - 在使用 Windows Phone 8 的 Json 请求中未找到 Web 异常

> ID：14834733
> 
> 赞同：1
> 
> 时间：2013-02-12T14:23:52.433
> 
> 标签：json, exception, httpwebrequest, windows-phone, httpwebresponse

我试图获取并设置 Json，但在“endgetresponse”上有一个例外：

 **```
 public void GetSetJsonString (string message)
        {
        this.message = message; 
        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(myurl);
        request.ContentType = "application/json; charset=utf-8";
        request.Accept = "application/json";
        request.Method = "POST";
        request.CookieContainer = new CookieContainer();
        request.CookieContainer.Add(myurl, myfirstcookie);
        request.CookieContainer.Add(myurl, mysecondcookie);
        request.BeginGetRequestStream(new AsyncCallback(GetRequestStreamCallback), request);

    }
    private void GetRequestStreamCallback(IAsyncResult asynchronousResult)
    {
        HttpWebRequest request = (HttpWebRequest)asynchronousResult.AsyncState;
        Stream postStream = request.EndGetRequestStream(asynchronousResult);
        byte[] byteArray = Encoding.UTF8.GetBytes(message);
        postStream.Write(byteArray, 0, byteArray.Length);
        postStream.Close();
        request.BeginGetResponse(new AsyncCallback(GetResponseCallback), request);
    }

    private void GetResponseCallback(IAsyncResult asynchronousResult)
    {
        HttpWebRequest request = (HttpWebRequest)asynchronousResult.AsyncState;
        HttpWebResponse response = (HttpWebResponse)request.EndGetResponse(asynchronousResult);
        Stream streamResponse = response.GetResponseStream();
        StreamReader streamRead = new StreamReader(streamResponse);
        string answer = streamRead.ReadToEnd();
        streamResponse.Close();
        streamRead.Close();
    }
} 
```*  *就行了 HttpWebResponse response = (HttpWebResponse)request.EndGetResponse(asynchronousResult);

我得到了这个例外：

*{System.Net.WebException：远程服务器返回错误：NotFound。---> System.Net.WebException：远程服务器返回错误：NotFound。在 System.Net.Browser.ClientHttpWebRequest.InternalEndGetResponse(IAsyncResult asyncResult) 在 System.Net.Browser.ClientHttpWebRequest.<>c_ *DisplayClasse.b* _d(Object sendState) 在 System.Net.Browser.AsyncHelper.<>c_ *DisplayClass1.b* _0 (Object sendState) --- 内部异常堆栈跟踪结束 --- 在 System.Net.Browser.AsyncHelper.BeginOnUI(SendOrPostCallback beginMethod, Object state) 在 System.Net.Browser.ClientHttpWebRequest.EndGetResponse(IAsyncResult asyncResult) 在项目。 System.Net.Browser.ClientHttpWebRequest.<>c_DisplayClass1d 处的 GetSetJson.GetResponseCallback(IAsyncResult asynchronousResult) *。*_1b（对象状态2）}*

奇怪的是，当我作为错误发送的 Json 消息时，我没有出现异常，并且我收到了来自服务器的错误消息。

您知道我为什么会出现此异常以及如何解决此问题吗？

非常坦克你！**

# session - 会话可以由用户客户端操作吗？

> ID：14834738
> 
> 赞同：3
> 
> 时间：2013-02-12T14:24:19.930
> 
> 标签：session, client-side, session-hijacking

**背景故事：**我们运营一个拥有数千名用户和少数管理员的网站。其中一些管理员不需要对网站的所有访问权限，因此我想通过授予他们个人权限来限制他们的访问权限。

我的计划是在用户登录时设置一个带有用户权限的会话（如果有的话）。但是，我担心这可能是不安全的操作。

会话可以由用户客户端操作吗？在这种情况下，如果普通用户知道权限名称并为自己设置会话，他们就可以访问管理功能。

我在 Stackoverflow 上找到了一些相关的问题，但他们没有给我足够的关于这个主题的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T14:30:47.230

您已经为管理员和用户提供了登录名，因此保存他们拥有的权限类型并授予他们修改数据的权利。只要您的会话状态是加密的，就很难在客户端进行操作。如果您担心现有会话和 cookie 的安全性，请点击此处链接以确保其安全。 [保护您的会话](http://blog.teamtreehouse.com/how-to-create-bulletproof-sessions)

这是完整的文章如何使您的会话和 cookie 安全...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T14:36:11.343

您确实可以存储服务器变量，例如用户代理、IP 地址等（甚至是 JavaScript 变量），但它们仅适用于验证持久 cookie 数据是否与客户端的新连接匹配。ip 地址不是一个好主意，除非您知道客户端（仅像您一样）不会在每次页面加载时更改（a la AOL）。

现代网络浏览器和 LastPass 之类的第三方服务可以存储登录凭据，只需要按键（有时甚至不需要按键）即可将数据发送到登录表单。持久 cookie 只适用于那些拒绝使用其他可用的东西的人。最后，不再需要持久的非会话 cookie。

没有安全 cookie 之类的东西，除非它仅通过 SSL 传输。使用持久性非会话 cookie（比如记住我）时，可以通过完全按照您正在做的事情来减轻它，但与您正在考虑的方式不同。

# json - Gwt 与 Spring Rest Api 和 AutoBean 通信

> ID：14834748
> 
> 赞同：0
> 
> 时间：2013-02-12T14:24:58.657
> 
> 标签：json, rest, gwt

我有一个独立的 Spring Rest Api。我有用 JPA 注释的模型。我想用这个 rest api 写一个 gwt 客户端。但是，我不想为每个模型对象类型创建 JavaScript 覆盖类型。Gwt AutoBean 上的接口逻辑看起来不错，但我不知道如何与独立的 spring 应用程序集成。你能帮助我吗？或者您是否推荐任何其他结构来简化处理 rest api 响应的过程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T20:10:32.447

是的，可以`AutoBean`与 Spring REST API 一起使用。
序列化的形式`AutoBean`反映了接口声明（有关详细信息，请参见[此处）。](http://code.google.com/p/google-web-toolkit/wiki/AutoBean#JSON_structures)
我正在使用`AutoBean`Spring MVC REST API + Jackson serialzier，它可以正常工作（在简单 bean 的列表中）。

Spring MVC 控制器：

```
@RequestMapping(method = RequestMethod.GET,value="/REST/{id}/data")
public @ResponseBody
    MyDTO getData(@PathVariable("id") Long id) {
        MyDTO data = null;
        // retrieve data
    return data;
} 
```

GWT 客户端：
AutoBeanFactory：

```
public interface MyFactory extends AutoBeanFactory {
    AutoBean<MyDtoAutobean> data();
} 
```

检索 AutoBean：

```
MyDtoAutoBean data = AutoBeanCodex.decode(factory,MyDtoAutoBean.class,responseText).as(); 
```

`responseText`是您对 REST API 的 GET 请求的主体。

`MyDTO`是服务器端的一个类，`MyDtoAutoBean`是客户端（GWT）端的对应接口。它们不必相同。但是，getter 应该匹配，否则您必须使用它`@PropertyName`来更改映射。

# ios - NSMutableArray removeAllObjects 导致崩溃

> ID：14834749
> 
> 赞同：2
> 
> 时间：2013-02-12T14:25:00.470
> 
> 标签：ios, exception, ios6, nsmutablearray

我的里面有一个`NSMutableArray`我定义`ViewController`的数据源，`UITableView`如下所示：

```
NSMutableArray *messageArray; 
```

我有一个重新加载 tableView 数据的方法，在此之前，我想清除现有的 table 数据。

如果我使用以下代码：

```
 [messageArray removeAllObjects];    
  [self.tableView reloadData]; 
```

我得到以下异常：

> 2013-02-12 14:20:30.378 appname[20998:907] *** 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“-[__NSCFArray removeObjectAtIndex:]：发送到不可变对象的变异方法”***第一次抛出调用堆栈： （0x3939e3e7 0x35dd6963 0x3939e307 0x393200e7 0x392eb5e5 0x7cda3 0x3a236047 0x3a2360d1 0x3a236047 0x3a235ffb 0x3a235fd5 0x3a23588b 0x3a235d79 0x3a15e5c9 0x3a14b8b1 0x3a14b1bf 0x336305f7 0x33630227 0x393733e7 0x3937338b 0x3937220f 0x392e523d 0x392e50c9 0x3362f33b 0x3a19f291 0x79c11 0x39be4b20）的libc ++ abi.dylib：终止称为抛出异常

但是如果我使用下面的代码，它就可以工作。

```
 NSMutableArray *emptyArray = [NSMutableArray new];
  messageArray = emptyArray;    
  [self.tableView reloadData]; 
```

为什么我会收到错误消息`removeAllObjects`？这可能是罪魁祸首吗？

```
 NSMutableDictionary *responseDictionary = [NSJSONSerialization JSONObjectWithData:responseData options:kNilOptions error:nil];
    messageArray = responseDictionary[@"data"]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T14:39:42.607

> 这可能是罪魁祸首吗？
> 
> ```
> NSMutableDictionary *responseDictionary = [NSJSONSerialization JSONObjectWithData:responseData options:kNilOptions error:nil];
> messageArray = responseDictionary[@"data"]; 
> ```

是的，您想使用可变容器的选项：

```
NSMutableDictionary *responseDictionary = [NSJSONSerialization JSONObjectWithData:responseData options: NSJSONReadingMutableContainers error:NULL]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T14:27:33.663

看起来您的“NSMutableArray”实际上是一个 NSArray 转换为 NSMutableArray。

在您的代码中搜索如下内容：

```
messageArray = (NSMutableArray *)[obj methodReturningNSArray]; 
```

`removeAllObjects`仅适用于真正的 NSMutableArray，因为错误“发送到不可变对象的变异方法”状态。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T14:33:02.977

你必须改变这一行：

```
messageArray = responseDictionary[@"data"]; 
```

到：

```
messageArray = [responseDictionary[@"data"] mutableCopy]; 
```

默认情况下，您从字典中获取的对象是非可变对象

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T14:29:44.220

您的`messageArray`数据重新加载返回的不是`NSMutableArray`，而是`NSArray`. 如果在重新加载后放置调试器停止，您可以验证这一点。`.mutableCopy`设置时使用`messageArray`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T14:34:23.220

如何找到有错误的地方：

1.  检查您是否@synthesize 一个名为`messageArray`. 如果此属性是`NSArray`类型或使用`copy`修饰符声明的，则合成的 setter 是罪魁祸首。
2.  如果不是，请重新声明 ivar `NSMutableArray *const messageArray`。现在编译器将向您显示每个分配。检查 NSArray 分配。不要忘记在那之后恢复声明。
3.  完成后，将 ivar 重命名为，`_messageArray`以便将来更快地找到直接访问。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-12T14:34:56.343

某处您已设置`NSMutableArray`为`NSArray`, not的实例，`NSMutableArray`或者您声明`NSMutableArray`为 type 的属性`NSArray vs. NSMutableArray`。

`Cocoa`文档使用这个词`immutable`来*指代只读的*、**初始化后不能更改的对象**。

此外，您应该遵循`Cocoa / Objective-C`命名约定。即类名以大写开头；变量采用 myArray 的形式（*或更具描述性的形式，最好是*）。

[您可以在copyWithZone 参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSCopying_Protocol/Reference/Reference.html)和[NSMutableCopying 协议参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSMutableCopying_Protocol/Reference/Reference.html)中找到更多详细信息。

# java - Java中的Unicode到String但很棘手

> ID：14834752
> 
> 赞同：0
> 
> 时间：2013-02-12T14:25:10.083
> 
> 标签：java, regex, unicode

我正在使用其 API 从网站获取数据，该 API 以`JSON`格式返回数据。问题是当`JSON`. 它会返回它的`UNICODE`，例如`Münich`将是`Mu\u0308nich`。

当我将此`JSON`字符串传递给 的构造函数时`org.codehaus.jettison.json.JSONObject`，`Mu\u0308nich`被转换为`Munich (n has an umlaut)`. 错误的。

我很晚才意识到这一点（在获取整个数据之后）。现在我使用以下方法将其转换回`Unicode`表单，即我传递`Munich (n has an umlaut)`给该方法并返回`Mu\u0308nich`。

我想以某种方式将其转换`Mu\u0308nich`为`Münich`. 有任何想法吗？

请注意，只有`u\u0308`to`ü`和`o\u0308`to`ö`和`a\u0308`to`ä`等需要转换。

用于转换回来的方法 -

```
public static String escapeUnicode(String input) {
    StringBuilder b = new StringBuilder(input.length());
    Formatter f = new Formatter(b);
    for (char c : input.toCharArray()) {
        if (c < 128) {
            b.append(c);
        } else {
            f.format("\\u%04x", (int) c);
        }
    }
    return b.toString();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T14:37:45.770

这些被称为[变音符号](http://en.wikipedia.org/wiki/Diacritic)，您可以使用[Normalizer](http://docs.oracle.com/javase/6/docs/api/java/text/Normalizer.html)将变音符号组合成单个 unicode 字符。

使用`normalize`方法和作为 Form [`NFKC`](http://docs.oracle.com/javase/6/docs/api/java/text/Normalizer.Form.html#NFKC)。这将首先将完整的字符串分解为变音符号，然后进行组合以返回“真实”的 unicode 变音符号。

所以：“München”保持“München”，“Mu\u0308nchen”将变为“München”

然后，您将拥有单一格式的字符串，不再使用变音符号，并且易于携带和显示。

如果您使用来自不同平台的文本，一些规范化是至关重要的，否则您最终会遇到您所描述的问题。

# outlook - Outlook mailitem.save 方法的后期绑定问题

> ID：14834754
> 
> 赞同：1
> 
> 时间：2013-02-12T14:25:15.237
> 
> 标签：outlook, vb.net-2010, early-binding

我有一个使用另一封电子邮件的内容（使用 Outlook Redemption 库）重新创建电子邮件的功能。我几乎已经完成了将其转换为早期绑定（我在 vb.net 中使用 Option Strict ON），但 Visual Studio 2010 强调了 .save 和 .move 行，并显示错误“option strict on disallows late binding”。

代码是：

```
'Use Redemption Library function to re-create email
    Dim sItem As Redemption.SafeMailItem
    Dim oItem As Object

    sItem = New Redemption.SafeMailItem
    oItem = myOlApp.Session.GetSharedDefaultFolder(myRecipient, Outlook.OlDefaultFolders.olFolderDrafts).Items.Add(Outlook.OlItemType.olMailItem)

    With sItem
        .Item = oItem
        .Import(tempfilepath, 3)  'olMSG, olRFC822 and olTNEF formats are supported
        .Save()
        .Move(myolfolder)
    End With 
```

解决了其他后期绑定错误后，我看不出为什么这两种方法被标记为问题。

帮助刘易斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T16:14:49.900

您收到该错误是因为 SafeMailItem 完全实现了 Outlook 阻止的属性和方法。
由于 Save 和 Move 没有被阻止，SafeMailItem 没有实现它们，但是当你使用后期绑定时它足够聪明，可以通过它们。使用原始 Outlook 项目调用这些方法：

```
With sItem
        .Item = oItem
        .Import(tempfilepath, 3)  'olMSG, olRFC822 and olTNEF formats are supported
        oItem.Save()
        oItem.Move(myolfolder)
    End With 
```

# merge - SPSS 表与两个数据集中存在的额外变量合并：保留哪个值？

> ID：14834756
> 
> 赞同：1
> 
> 时间：2013-02-12T14:25:23.850
> 
> 标签：merge, spss

我希望是一个简单的 SPSS 问题。如果我使用下面的语法进行表合并，但“bigfile”和“smallfile”都有一些变量的值[比如说，ChildID]，那么“mergefile”是否会从 smallfile 或 bigfile 中获得 ChildID 的值？

```
Match files files=bigfile
/table=smallfile
/by JoinID.
dataset name mergefile.
execute. 
```

非常感谢。-担

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T13:35:16.050

来自精美手册：

> 指定文件的顺序决定了新活动数据集中变量的顺序。此外，如果相同的变量名出现在多个输入文件中，则该变量取自第一个指定的文件。

因此，对于您的特定示例，这应该表明`ChildID`应该是 中的值。`bigfile`让我们证明这一点以确保。

```
data list free /JoinID ChildID X.
begin data
1 1 4
1 1 5
1 1 6
1 1 7
2 2 8
2 2 9
3 3 2
3 3 1
end data.
dataset name bigfile.

data list free /JoinID ChildID Y.
begin data
1 5 4
2 5 8
3 5 2
end data.
dataset name smallfile.

match files file = 'bigfile'
/table = 'smallfile'
/by JoinID.
dataset name mergefile.
list ALL. 
```

产生输出。

> JoinID ChildID XY
> 
> ```
> 1.00     1.00     4.00     4.00
> 1.00     1.00     5.00     4.00
> 1.00     1.00     6.00     4.00
> 1.00     1.00     7.00     4.00
> 2.00     2.00     8.00     8.00
> 2.00     2.00     9.00     8.00
> 3.00     3.00     2.00     2.00
> 3.00     3.00     1.00     2.00 
> ```

您可能还对匹配文件的`rename`子命令（以及`drop`and `keep`）感兴趣（以防止覆盖或指定您希望最终变量来自哪个文件）。我的工作流程通常会从其中一个文件中删除案例，因为如果文件是不同长度的字符串，它们将不会合并。

* * *

下面是使用 rename 和 drop 子命令的示例（使用上面的相同示例数据）。如果您愿意，这将允许您保留后续文件中的值。

```
match files file = 'bigfile'
/rename = (ChildId = Old)
/table = 'smallfile'
/by JoinID
/drop Old.
dataset name mergefile2.
list ALL. 
```

# c# - ASP.NET 验证器的可靠性如何？

> ID：14834758
> 
> 赞同：1
> 
> 时间：2013-02-12T14:25:31.793
> 
> 标签：c#, javascript, .net, validation, code-behind

我决定使用**ASP.NET Validator**来验证我的几十个**WebForm**输入。它在**客户**端工作正常。我的意思是，我完全可以验证输入而无需“发回页面”等。

但是当我尝试在**代码后面**使用验证器时，它给了我这个`Page.Isvalid`属性，我对它的可靠性感到困惑。以下是我自己无法回答的问题：

1.  Validator 是否足够可靠，可以在客户端使用？（除了禁用**javascript**，它可以被操纵吗？）
2.  这个 Validator 如何到达**服务器端**的有效性信息？（是否在某处生成了 C# Validator 代码，还是直接从**客户端**获取信息？）

这是我编写的用于在服务器端验证我的输入的代码：

```
foreach (IValidator iValidator in Page.Validators)
            {
                if (!iValidator.IsValid) { return false; }
            } 
```

但是，它独立于 .aspx 和 .js 吗？我可以在服务器端依赖它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T14:32:12.967

您也应该始终在服务器端进行验证，这主要是通过调用自动完成的`Page.Validate`。

来自[MSDN](http://msdn.microsoft.com/en-us/library/0ke7bxeh.aspx)：

> 当用户单击任何将**CausesValidation**属性设置为 true（默认值）的 ASP.NET 服务器控件时，将调用此方法。其中包括 Button、ImageButton 和 LinkBut​​ton Web 服务器控件、HtmlInputButton、HtmlInputImage 和 HtmlButton HTML 服务器控件，以及可以自动回发到服务器的控件，例如 TextBox、CheckBox、ListControl 和 BulletedList 控件。

如果你想强制验证不同的`ValidationGroup`，你可以手动调用它：

```
Page.Validate("MyValidationGroup");
If(Page.IsValid)
{
    // ...
} 
```

请注意，您应该`Page.IsValid`仅在调用该`Page.Validate`方法后进行检查，或者在启动表单处理的 ASP.NET 服务器控件`CausesValidation`的事件处理程序中将该属性设置为 true 。`OnServerClick`

# ssas - 创建拒绝所有空元素访问的角色

> ID：14834759
> 
> 赞同：0
> 
> 时间：2013-02-12T14:25:32.607
> 
> 标签：ssas, olap, security-roles

我只是想拥有一个拒绝访问维度的所有空元素的角色。

我有正确的 MDX 查询，我在 SQL Server 中测试过：

```
SELECT NON EMPTY [People].[Category].[Category].allmembers ON COLUMNS  FROM [MyCube] 
```

我只是想在我的角色上设置的允许成员中获得相同的结果，但我有一个错误：

> *语法不正确。*

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:12:09.673

维度中不存在空元素。维度的某些元素没有度量值，这是另一回事。因此，您需要在出现非空情况时拒绝对度量的访问。

以下示例显示如何根据类别成员的非空集 - MyMeasure 选择 MyMeasure 值

```
SELECT [Measures].[MyMeasure] ON 0,
NONEMPTY(
    [People].[Category].[Category].MEMBERS, [Measures].[MyMeasure])}
)
ON 1
FROM [MyCube] 
```

希望这可以帮助。

# perl - htmldoc 忽略日期格式的 LC_TIME

> ID：14834773
> 
> 赞同：3
> 
> 时间：2013-02-12T14:26:02.540
> 
> 标签：perl, locale, htmldoc

我正在运行以下 Perl 代码来创建 PDF 文件。

```
{
    local $ENV{LC_TIME} = 'de_DE.utf8';
    system qw(htmldoc --quiet --webpage -t pdf --jpeg --no-link --header .D. --footer .D/ --outfile), "$filename.pdf", $filename;
} 
```

它在我的本地机器上工作，日期在页眉和页脚中都被格式化为 12.02.2013 15:18:19。

一旦我在远程服务器上运行脚本，我就会得到 02/12/13 15:10:25。

为什么 htmldoc 忽略 LC_TIME 值？

顺便说一句，“locale”已经在我的本地机器和服务器上返回 LC_TIME="de_DE.utf8"。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T19:38:53.977

您的服务器可能定义 LC_ALL 优先于特定类别的区域设置。

# openoffice-calc - 自动插入新行

> ID：14834778
> 
> 赞同：-1
> 
> 时间：2013-02-12T14:26:31.340
> 
> 标签：openoffice-calc, libreoffice-calc

我正在寻找 Libre/OpenOffice Calc 中的解决方案，如果当前行的所有字段都填充了数据，则自动插入新行。

更详细一点：有一个电子表格，其中存储了每月的费用，并且在每个月末都会生成一个摘要并包含在该月的最后一行下。给定月份的数据量（行数）是未知的，因此无法修复。一个解决方案会很好，它允许输入数据并在行的末尾自动插入一个新行在实际行和月度摘要行之间。我希望它有点清楚。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-12T22:31:13.937

许多原因让我觉得您应该更喜欢其他存储（数据库？）。完成此操作后，您可以将 calc 连接到数据库。相同的眼部效果，工作更清洁、更安全。

希望会有所帮助

# javascript - Chrome 浏览器：向选择框添加选项不会显示在下拉列表中

> ID：14834779
> 
> 赞同：0
> 
> 时间：2013-02-12T14:26:36.593
> 
> 标签：javascript, google-chrome, drop-down-menu

当用户单击选择框时，甚至会发生 Ajax。

此事件将选项放入选择框中。

将选项放入选择框中后，用户应该能够单击它们。

在 Chrome 中，当您单击下拉列表时出现“选择一项”，但添加选项后，列表仍然是“选择一项”，用户可以按向下箭头键并选择它，但它没有显示在“选项下拉列表”添加后。

什么神奇的 JS 或 jQuery 会刷新这个下拉列表，而无需在 chrome 中再次单击？

单击该选项时，这是通过 JS 执行的：

```
secBox = document.getElementById('sel34541_75');
secBox.length = 1;
addOption(secBox, "Option 1", "execPopDrop('sel34541_75', 34541, 'Option 1', 'type1', 'page.php')");
addOption(secBox, "Option 2", "execPopDrop('sel34541_75', 34541, 'Option 2', 'type2', 'page.php')");
addOption(secBox, "Option 3", "execPopDrop('sel34541_75', 34541, 'Option 3', 'type3', 'page.php')");
addOption(secBox, "Option 4", "execPopDrop('sel34541_75', 34541, 'Option 4', 'type4', 'page.php')"); 
```

添加选项功能如下所示：

```
function addOption(selectbox, text, value) {
  selectbox.options[selectbox.options.length]=new Option(text,value);
} 
```

如果我单击然后按向下箭头，我会看到动态选项在那里，但不在可见的列表中。（这同样适用于 IE 和 FF）

![如果我点击向下箭头，我会看到动态选项](../Images/8a434a59ca524caf4f52ced5533e4086.png)

如果我再次单击它，我会在下拉菜单中看到正确的选项

![如果我再次单击它，我会在下拉菜单中看到正确的选项](../Images/82714a8c974725e135d183ebf9d3f04f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T14:28:26.047

试试这个——适用于所有浏览器——如果你需要对 IE4 的支持，那么你需要在添加选项之前将 1 添加到 options.length ;)

**更新**此解决方案是针对原始问题

```
function addOption(selectbox, text, value) {
  selectbox.options[selectbox.options.length]=new Option(text,value);
} 
```

但是，为什么要将那个可怕的字符串添加到选项中？

看起来你会（不寒而栗）EVAL 值中的字符串

为什么不

```
addOption(secBox, "Option 1", "sel34541_75"); 
```

然后在 execPopDrop 中传递选择，那么它将是

```
function execPopDrop(sel) {
  var val = sel[sel.selectedIndex].value;
  var txt = sel[sel.selectedIndex].text;
  var type="type"+val.split(" ")[1]; // from Option 1
  var parm2 = val.replace(/[sel_]/g,""); // 34541
  // here you have all the stuff you need to do whatever you did before
} 
```

# scala - 2.10 中 Akka 和 scala.actors 的关系

> ID：14834780
> 
> 赞同：16
> 
> 时间：2013-02-12T14:26:38.033
> 
> 标签：scala, akka, actor, scala-2.10

*   Scala 2.10 发行说明是这样说的：“ **Akka Actors 现在是发行版的一部分。原来的 Scala Actors 现在已被弃用。** ”*   最新的 Akka 库（“Akka 2.1.0 for Scala 2.10”）提到了以下依赖项：com.typesafe.akka: **akka-actor_2.10** :2.1.0
       和以下示例：
             `import akka.actor.Actor`
             `class MyActor extends Actor {..}`
             `val system = ActorSystem("MySystem")`*   我的项目包括这些库：
             org.scala-lang: **scala-library** :2.10.0
             org.scala-lang: **scala-actors** :2.10.0

在我的类路径中，我没有名为“akka”的包。我确实看到了`scala.actors`，但它似乎并没有被弃用。

那么，Akka Actors 以何种方式“成为分发的一部分”？
如果确实是这种情况，那么我还应该添加“akka-actor_2.10”库作为依赖项吗？
如果是这样，我是使用 akka.Actor 还是不推荐使用的[scala.actors.Actor](http://www.scala-lang.org/api/current/index.html#scala.actors.Actor)？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-12T14:40:57.693

在 scala 2.9.2 中，scala 演员是 scala-library.jar 的一部分。

如果您下载 scala-2.10.0 发行版，则 scala-library 中没有演员，并且提供了 akka-actors.jar 和 scala-actors.jar。

后者是为了向后兼容而存在的，将在未来的主要版本中删除。

akka-actors 是替代品，您应该将其用于任何新开发（并尽可能使用 scala-actors 移动任何东西）。

如果您的项目中没有当前使用actors的代码，您可能应该重新配置项目的依赖项以删除 org.scala-lang:scala-actors:2.10.0 而是依赖于 com.typesafe.akka:akka-actors_2.10:2.1 .0 如果你想使用演员。

我不确定为什么 2.10.0 中的 scala-actors 中的类没有弃用注释，但我相信它会在 2.10.1 中添加。

[您可以在迁移指南](http://docs.scala-lang.org/overviews/core/actors-migration-guide.html)中找到更多信息。

# java - Java 正则表达式缺失值

> ID：14834781
> 
> 赞同：0
> 
> 时间：2013-02-12T14:26:51.147
> 
> 标签：java, regex, pattern-matching

我必须承认，在编写正则表达式时我非常无用，但我目前遇到了一个让我非常困惑的问题。

我编写了一个函数，它将字符串作为输入（大小为 22K）并对其执行单个正则表达式，以查找 Long 值。已找到一个 long 值，将其替换为来自 hashmap 的 String 值。

但是，它一直在字符串中缺少值，我写的正则表达式是：

```
Pattern.compile("[*]{3}[0-9]{1,}[*]{3}"); 
```

我在文件中搜索的长值的格式如下：

```
***nnnnnnnnnnnnnnnn*** 
```

现在正则表达式似乎可以工作，但就像我说的，它遗漏了一些值，例如：

```
***1407374883553285*** - FOUND
***281474976720057*** - NOT FOUND 
```

我真的很困惑为什么它缺少值，我正在使用一个简单的 while 循环来进行搜索，以及`matcher.find()`它何时匹配。

我假设我的正则表达式不够严格，或者由于输入字符串中数据的结构方式而缺少值。

如果有人可以提供任何建议，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:31:46.550

更干净的正则表达式是`[*]{3}\d+[*]{3}`. 对照以下检查它，看看它是如何进行的：

```
final Pattern pattern = Pattern.compile("[*]{3}\\d+[*]{3}");
final Matcher matcher = pattern.matcher("inputfile");
while (matcher.find())
{
  System.out.println(matcher.group());
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-12T14:38:47.927

您可以将`java.util.regex.Pattern.matches(String regEx, CharSequence input)`正则表达式用作“ `[*]{3}[0-9]*[*]{3}`”

# linux - 命令历史和多个终端的使用

> ID：14834786
> 
> 赞同：6
> 
> 时间：2013-02-12T14:27:12.803
> 
> 标签：linux, terminal, history

在`Ubuntu`中，每当我打开几个终端时，我都会关闭当前会话并打开一个新会话，在这些终端中键入的命令的历史记录不会显示为`history`. 只有一个这样的终端的历史会显示出来。

究竟`history`要跟踪什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T14:38:07.437

历史记录存储在由 指定的文件中`HISTFILE`。您可以在历史手册（`man history`）中找到历史保存的信息：

```
typedef struct _hist_entry {
    char *line;
    char *timestamp;
    histdata_t data;
} HIST_ENTRY; 
```

对于 bash，通常将变量`HISTFILE`设置`.bash_history`为所有 shell 通用的变量。

看看这个不错的历史指南以获得更多技巧： [Bash 命令行历史的权威指南](http://www.catonmat.net/blog/the-definitive-guide-to-bash-command-line-history/)。在那里，您还可以找到`histappend`hek2mgl 注释的参数的详细信息：

> 选项 'histappend' 控制历史列表如何写入 HISTFILE，设置该选项会将当前会话的历史列表附加到 HISTFILE，取消设置（默认）将使 HISTFILE 每次都被覆盖。
> 
> 例如，要设置此选项，请键入：
> 
> ```
> $ shopt -s histappend 
> ```
> 
> 要取消设置，请键入：
> 
> ```
> $ shopt -u histappend 
> ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T14:59:03.193

我正在使用[此处概述的方法](http://ganwellresource.blogspot.se/2012/09/bash-history-of-unique-commands.html)

基本上，它使用 python 并`sets`处理在所有 shell 中输入的所有命令的唯一列表。结果存储在`.my_history`. 使用这种方法，在每个打开的 shell 中输入的所有命令都可以立即在所有其他 shell 中使用。每个都`cd`被存储，因此文件有时需要一些手动清理，但我发现这种方法更适合我的需要。

下面进行必要的更新。

*.profile*：

```
# 5000 unique bash history lines that are shared between 
# sessions on every command. Happy ctrl-r!!
shopt -s histappend
# Well the python code only does 5000 lines
export HISTSIZE=10000
export HISTFILESIZE=10000
export PROMPT_COMMAND="history -a; unique_history.py; history -r; $PROMPT_COMMAND" 
```

*unique_history.py*

```
#!/usr/bin/python

import os
import fcntl
import shutil
import sys

file_ = os.path.expanduser('~/.my_history')
f = open(file_, 'r')
lines = list(f.readlines())
f.close()

myset = set(lines)

file_bash = os.path.expanduser('~/.bash_history')
f = open(file_bash, 'r')
lines += list(f.readlines())
f.close()

lineset = set(lines)
diff = lineset - myset
if len(diff) == 0:
    sys.exit(0)
sys.stdout.write("+")
newlist = []
lines.reverse()
count = 0
for line in lines:
    if count > 5000:
        break
    if line in lineset:
        count += 1
        newlist.append(line)
        lineset.remove(line)
f = open(file_, 'w')
fcntl.flock(f.fileno(), fcntl.LOCK_EX)
newlist.reverse()
for line in newlist:
    f.write(line)
fcntl.flock(f.fileno(), fcntl.LOCK_UN)
f.close()
shutil.copyfile(file_, file_bash)
sys.exit(0) 
```

# javascript - 打破主循环 - jstree

> ID：14834792
> 
> 赞同：1
> 
> 时间：2013-02-12T14:27:31.817
> 
> 标签：javascript, jstree

我正在使用 jstree 库来显示一棵树。

在下面的代码中，我循环遍历树中的选定节点，并根据某些条件为变量“allow_edit”分配一个布尔值。

如果我想打破主循环`'allow_edit = false'.`

我尝试使用标签并打破循环，但这似乎不起作用。我得到未定义的标签。

```
loop1:
$j.each($j("#demo2").jstree("get_selected"), function(index, element) {

  var selected_node_depth = parseInt($j(element).attr('node_depth'));
  var allow_edit = false;

  var array_first_filter = $j.grep(array_first, function(v) { return v[1]  != "not detected";})
  var array_second_filter = $j.grep(array_first_filter, function(v) { return v[3] > selected_node_depth;})

  if (array_second_filter.length === 0 || array_second_filter.length == null)
  {
    allow_edit = true;
  }
  else{
    alert("Confliction exists in your selected terms.");
    allow_edit = false;
    //break loop1; /** not working, getting undefined label **/
  }

} 
```

如果有任何关于如何打破主循环的建议`'allow_edit = false'`？非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T14:30:54.687

如果您传递给的函数`.each()`返回`false`，则迭代将停止。

```
else {
  allow_edit = false; // pointless since you're about to return ...
  return false;
} 
```

此外，作为编程风格说明，任何形式的构造：

```
if (something) {
  flag = true;
}
else {
  flag = false;
} 
```

可以更简单地写成：

```
flag = something; 
```

在 JavaScript 中，要*强制* `flag`为布尔值（`true`或`false`），您可以这样做：

```
flag = !!(something); 
```

两个`!`（逻辑“非”）运算符强制表达式（“某物”）按照与该表达式是语句的测试子句时使用的相同规则被评估为布尔值`if`。

# php - 是否可以通过 userId 查看所有公共帖子和评论

> ID：14834799
> 
> 赞同：-1
> 
> 时间：2013-02-12T14:27:50.340
> 
> 标签：php, facebook, api, facebook-graph-api

看了 2 天并没有得到答案，是否可以使用 FB api 搜索通过 fbid 查看所有公开帖子评论？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T15:45:26.630

您无法获取特定 fbid 的任何公开帖子或评论，您只能通过 Graph API 搜索 facebook 上的所有公开帖子：[搜索 Facebook 所有公开帖子仅查找带有使用 Graph API 或 FQL 链接的帖子？](https://stackoverflow.com/questions/5290961/searching-facebook-all-public-posts-only-for-posts-with-links-using-graph-api-or?rq=1)

# parsing - 需要使用 unix (solaris) 从文件中选择性地删除换行符

> ID：14834801
> 
> 赞同：2
> 
> 时间：2013-02-12T14:28:00.390
> 
> 标签：parsing, unix

我正在尝试找到一种方法来选择性地从文件中删除换行符。删除所有这些我没有问题..但我需要留下一些。

这是错误输入文件的示例。请注意，许可证 ID COO789 和 COO012 的行在我需要删除的描述字段中嵌入了换行符。

```
"Permit Id","Permit Name","Description","Start Date","End Date"
"COO123","Music Festival",,"02/12/2013","02/12/2013"
"COO456","Race Weekend",,"02/23/2013","02/23/2013"
"COO789","Basketball Final 8 Championships - Media vs. Politicians
Skills Competition",,"02/22/2013","02/22/2013"
"COO012","Dragonboat race 
weekend",,"05/11/2013","05/11/2013" 
```

这是我需要文件看起来如何的示例：

```
"Permit Number/Id","Permit Name","Description","Start Date","End Date"
"COO123","Music Festival",,"02/12/2013","02/12/2013"
"COO456","Race Weekend",,"02/23/2013","02/23/2013"
"COO789","Basketball Final 8 Championships - Media vs. Politicians Skills Competition",,"02/22/2013","02/22/2013"
"COO012","Dragonboat race weekend",,"05/11/2013","05/11/2013" 
```

注意：我确实通过删除一些额外的列来简化文件。不过，逻辑应该能够容纳任意数量的列。实际的完整标题行包含所有列。从技术上讲，我希望在描述和位置列中找到“额外的”换行符。

```
"Permit Number/Id","Permit Name","Description","Start Date","End Date","Custom Status","Owner Name","Total Expected Attendance","Location" 
```

我尝试过 sed、cut、tr、nawk 等。对任何可以做到这一点的解决方案都开放......可以从 unix 脚本中调用。

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T16:03:52.877

如果您必须仅从“描述”和“位置”字段中删除换行符，您将需要一个适当的 csv 解析器（想想 Text::CSV）。您也可以使用 相当轻松地做到这一点`GNU awk`，但不幸的是，您无法`gawk`在 Solaris 上访问。因此，下一个最佳解决方案是将不以双引号开头的行连接到前一行。您可以使用`sed`. 我写这个时考虑到兼容性：

```
sed -e :a -e '$!N; s/ *\n\([^"]\)/ \1/; ta' -e 'P;D' file 
```

结果：

```
"Permit Id","Permit Name","Description","Start Date","End Date"
"COO123","Music Festival",,"02/12/2013","02/12/2013"
"COO456","Race Weekend",,"02/23/2013","02/23/2013"
"COO789","Basketball Final 8 Championships - Media vs. Politicians Skills Competition",,"02/22/2013","02/22/2013"
"COO012","Dragonboat race weekend",,"05/11/2013","05/11/2013" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T14:49:49.400

```
sed ':a;N;$!ba;s/ \n/ /g' 
```

将整个文件读入模式空间，然后删除直接出现在空格之后的所有换行符 - 假设所有错误的换行符都符合此模式。如果没有，什么时候应该删除换行符？

# webserver - 我将如何在 Windows 服务器上运行 Dart VM？

> ID：14834803
> 
> 赞同：0
> 
> 时间：2013-02-12T14:28:09.620
> 
> 标签：webserver, dart, windows-server

我看过一些关于如何在 Linux 机器上的 Dart VM 上运行网络服务器的教程。但是在 Windows 服务器上执行相同操作的基本步骤是什么？如果它正在运行，您是否需要关闭 ISS？我假设我需要通过一些环境变量来连接 VM，但我还没有看到教程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T15:01:27.557

这是与 IIS 之类的不同的心理概念。

本质上，您使用 dart 二进制文件从命令行运行 .dart 脚本`dart.exe`

例如，下面的脚本代表一个监听 8080 端口的“dart 服务器”

```
import 'dart:io';

void main() {
  var httpServer = new HttpServer();
  httpServer.defaultRequestHandler = (req, HttpResponse res) {
    var result = "${req.method}: ${req.path}"; 
    print(result);  // log to console  
    res.outputStream.writeString("You requested $result"); // return result to browser
    res.outputStream.close();
  };

  httpServer.listen("127.0.0.1", 8080);

} 
```

将上面的文本另存为`myServer.dart`并从命令行运行`dart.exe myServer.dart`.

然后导航到`http://127.0.0.1:8080/foo/bar`，您将在浏览器中获得以下输出：

```
You requested GET: /foo/bar 
```

从那里，您可以编写代码为特定方法/路径等添加更多处理程序...，从文件系统加载文件以发送到浏览器，访问数据源，返回数据，真正可以用 Dart 代码编写的任何东西并发送到浏览器。

（澄清：如果 IIS 已经在同一个端口上提供服务，您只需要关闭它，例如，端口 8080）。

# c# - 确定动态标签间距

> ID：14834804
> 
> 赞同：0
> 
> 时间：2013-02-12T14:28:17.020
> 
> 标签：c#, visual-studio-2010, flowlayoutpanel

我有一个小程序，`flowLayoutpanel1`我在其中放置了许多动态创建的标签，如下所示：

![在此处输入图像描述](../Images/22cab6298250ce6bf044489233bc57e5.png)

但我希望这些标签彼此之间有某种间隙，这样它们就不会接触，`lbl.SetBounds();`而且似乎在这里不起作用。

这是我正在测试的代码？

```
flowLayoutPanel1.Controls.Clear();
            int length = 9;
            for (int i = 0; i < length; i++)
            {
                Label lbl = new Label();
                lbl.Name = i.ToString();
                lbl.Text = "Label " + i.ToString();
                lbl.AutoSize = true;
                lbl.Font = new Font("Ariel", 10);
                lbl.SetBounds(0, 20, 70, 70);
                lbl.BorderStyle = BorderStyle.FixedSingle;
                flowLayoutPanel1.Controls.Add(lbl);
            } 
```

关于如何完成间距的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T14:33:33.247

如果要增加文本和轮廓之间的间距，请使用：

```
lbl.Padding = new System.Windows.Forms.Padding(4, 4, 4, 4); 
```

![有边距](../Images/35bc4fe1619443c9fab7160286bc9725.png)

如果要在轮廓之间添加空间，请使用：

```
lbl.Margin = new System.Windows.Forms.Padding(4, 4, 4, 4); 
```

![带填充物](../Images/eacf05283cdfe780348f5cf04b160328.png)

或两者

# c++ - c++ priority_queue push/emplace 没有临时对象创建

> ID：14834811
> 
> 赞同：2
> 
> 时间：2013-02-12T14:28:33.083
> 
> 标签：c++, performance, stl, containers, copy-constructor

我了解到该`emplace_back`方法将对象推送到向量中而无需创建临时对象。但是，我找不到使用`push`或为priority_queue 实现此目的的方法`emplace`。有没有一种有效的方法来实现这一目标？或者使用 boost 的 shared_ptr 之类的容器在性能方面很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T15:16:56.030

A`std::priority_queue`只是一个容器适配器，它`std::vector`使用堆操作包装底层容器（默认情况下）。所以为了把`push`东西放进去而不创建一个临时的，那么[`std::priority_queue::emplace`](http://en.cppreference.com/w/cpp/container/priority_queue/emplace)正是你想要使用的。

当然，您不能将任何东西放入队列中的任意位置（并且您的推送元素不一定会出现在容器的末尾），因为它是优先级队列维护和内部顺序。但是，如果那是您想要做的，那么无论如何您选择了错误的容器（或容器适配器）。

不，如果它只是关于性能而不是生命周期管理，那么它很少是`shared_ptr`一个可行的选择。您是否需要动态内存分配，所以这不是一个选择，尤其是在 C++11 中。

# postgresql - 图片表格是电子商务网站的最佳实践吗？

> ID：14834813
> 
> 赞同：0
> 
> 时间：2013-02-12T14:28:35.280
> 
> 标签：postgresql, amazon-s3, database-schema

我正在构建一个包含产品和变体的电子商务系统，每个系统都有 1 到 5 张图像存储在 Amazon S3 上。在存储 S3 URL 的地方有一个单独的图像表是否被认为是最佳实践，或者只向每个产品和变体表添加 5 个图像列是否可以接受？拥有一个单独的图像表意味着在导入时我需要执行 6 次选择然后插入（以确保产品及其每个图像不存在然后导入它们）而不是 1。而且，在检索时，我需要将 images 表连接到 products 表 5 次，以使其与产品一起返回图像，如下所示：

```
SELECT prd."id" AS id, prd."title" AS title, prd."description" AS description,
  prd."createdAt" AS productcreatedate, 
  prdPic1."url" AS productpic1,
  prdPic2."url" AS productpic2,
  prdPic3."url" AS productpic3,
  prdPic4."url" AS productpic4,
  prdPic5."url" AS productpic5,
  brd."name" AS brandname, brd."id" AS brandid, 
  cat."name" AS categoryname, cat."id" AS categoryid, 
  prt."name" AS partnername, prt."id" AS partnerid
FROM "Products" prd
LEFT OUTER JOIN "Pictures" prdPic1 ON prdPic1."entityId" = prd."id" AND prdPic1."entity" = '1'
 AND prdPic1."sortOrder" = 1
LEFT OUTER JOIN "Pictures" prdPic2 ON prdPic2."entityId" = prd."id" AND prdPic2."entity" = '1'
 AND prdPic2."sortOrder" = 2
LEFT OUTER JOIN "Pictures" prdPic3 ON prdPic3."entityId" = prd."id" AND prdPic3."entity" = '1'
 AND prdPic3."sortOrder" = 3
LEFT OUTER JOIN "Pictures" prdPic4 ON prdPic4."entityId" = prd."id" AND prdPic4."entity" = '1'
 AND prdPic4."sortOrder" = 4
LEFT OUTER JOIN "Pictures" prdPic5 ON prdPic5."entityId" = prd."id" AND prdPic5."entity" = '1'
 AND prdPic5."sortOrder" = 5
INNER JOIN "Brands" brd ON brd."id" = prd."BrandId"
INNER JOIN "Categories" cat ON cat."id" = prd."CategoryId"
INNER JOIN "Partners" prt ON prt."id" = brd."PartnerId"; 
```

我很清楚将品牌、类别和合作伙伴标准化以减少冗余。我对图像表的价值不太清楚。在 Postgres 上解释分析说这个查询需要 3310 毫秒才能返回 22000 行。但是，我还没有在图片上创建索引，所以这不是一个公平的分析。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T14:43:06.603

在这种情况下，我想我会添加文本 [] 类型的单列（文本数组）。这样，您就可以在需要的地方获得图像，并且当您为产品添加更多图像时，您不会陷入地狱。

# php - 为什么这个 .htaccess 正则表达式不起作用？

> ID：14834814
> 
> 赞同：1
> 
> 时间：2013-02-12T14:28:36.240
> 
> 标签：php, .htaccess, mod-rewrite

我有一个正则表达式如下

```
http://www.abc.com/signup.php?id=2

RewriteRule ^signup/([a-z]+)/([a-z]+)$ /signup.php?$1=$2 [L] 
```

但这不起作用？任何人都可以帮助我。.htaccess 文件中有什么要启用的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T14:32:37.487

当您还传递数字时，您也应该在正则表达式中匹配它们：

```
RewriteRule ^signup/([a-z0-9]+)/([a-z0-9]+)$ /signup.php?$1=$2 [L] 
```

您可能还想包含其他字符，或者更确切地说使用元类，例如`\w`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T14:32:30.573

修改后，试试这个：

```
RewriteEngine On
RewriteCond %{QUERY_STRING} id=(\d+) 
RewriteRule ^signup\.php$ /signup/%1 [L,R=301]

RewriteRule ^signup/([0-9]+)$ /signup.php?id=$1 [L] 
```

这将重定向`/signup.php?id=123`到`/signup/123`，然后将被重写回`/signup.php?id=123`（但不重定向）。

# vba - 每次单击“撤消”时运行 VBA 函数

> ID：14834818
> 
> 赞同：0
> 
> 时间：2013-02-12T14:28:39.013
> 
> 标签：vba, undo, word-2007

每次用户单击“撤消”（或 crtl+z）时是否可以运行 VBA 函数（Word 2007）？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T14:52:51.687

您可以使用 VBA 拦截 Word 中的大多数内置命令。请参阅 [使用 VBA 控制 2007 Office System 中的内置命令](http://msdn.microsoft.com/en-us/library/office/dd627337%28v=office.12%29.aspx#o2007_usingVBAtoControlBuiltInCommands_ExecutingaBuiltInCommand)。

尝试拦截`EditUndo`命令。

# c++ - 什么是 C++ 中的富指针

> ID：14834820
> 
> 赞同：0
> 
> 时间：2013-02-12T14:28:48.700
> 
> 标签：c++, pointers

我喜欢 C++ 并关注它的发展。在浏览时我遇到了这个链接：

[http://www.cplusplus-soup.com/2012/01/rich-pointers-frequently-asked.html](http://www.cplusplus-soup.com/2012/01/rich-pointers-frequently-asked.html)

有人可以简单地解释富指针的概念吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T14:44:18.800

至少在我阅读时，它们是“标记指针”。换句话说，指针不仅携带它所指向的项目的地址，而且还有一些相关的元数据来告诉指针打算指向什么类型的东西。

# c++ - 回调c delphi

> ID：14834821
> 
> 赞同：1
> 
> 时间：2013-02-12T14:28:49.550
> 
> 标签：c++, delphi, dll, callback

这是在 C++ 应用程序 (exe HOST) 中定义的过程。

```
typedef struct _ RX_DATA_OBJ {
   UINT32     TIME;        
   UINT32     ID;    
   UINT8      LEN; 
   UINT8      DATA[8]; 
} RX_DATA_OBJ;

static void RX_DATA(UINT16 CNT, RX_DATA_OBJ *p_RX_DTATA_OBJ) 
```

我需要在用 Delphi 编写的 DLL 文件中调用上述函数作为回调。

我在 Delphi 中为我的 DLL 做了以下声明：

```
type
  TRX_DATA_OBJ = record
    time: UINT32;
    id:   UINT32;
    len:  UINT8;
    data: array [0..7] of UINT8;
  end;
  PRX_DATA_OBJ = ^TRX_DATA_OBJ;

RX_DATA = procedure(count:UINT16; RX_DATA_OBJ: PRX_DATA_OBJ ) of object;

var
  RX_DATA_out: TRX_DATA_OBJ; 
```

在另一个过程中，我得到指向 HOST 中 RX_DATA 过程的指针。现在我在我的 DLL 中调用这个回调

```
procedure PUT_DATA;
begin
  RX_DATA_out.Time := 100;
  RX_DATA_out.id := $500;
  RX_DATA_out.len := 4;
  RX_DATA_out.data[0] := 1;
  RX_DATA_out.data[1] := 2;
  RX_DATA_out.data[2] := 3
  RX_DATA_out.data[3] := 4;
  RX_DATA_out.data[4] := 5;
  RX_DATA_out.data[5] := 6;
  RX_DATA_out.data[6] := 7;
  RX_DATA_out.data[7] := 8;

  RX_DATA(1, @RX_DATA_out); // RX_DATA_out is global variable defined.
end; 
```

回调被称为正确但在 RX_DATA_out 变量中传递的数据不正确，看起来指向 RX_DATA_out 变量的指针没有指向该变量。

有人能说有什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T14:33:59.740

C++ 函数类型是普通函数，即不是成员函数。但是您已将您的版本声明为对象的方法。那是不匹配。您必须删除`of object`.

您还必须指定调用约定。很可能是这样`cdecl`。在 Delphi 中，如果未指定调用约定，则`register`使用基于寄存器的 Delphi fastcall 约定。那肯定是错的。

最后，如果指向结构的指针永远不会存在`nil`，那么使用`var`参数会更惯用：

```
RX_DATA = procedure(count:UINT16; var RX_DATA_OBJ: TRX_DATA_OBJ); cdecl; 
```

显然，您必须更改调用代码以匹配：

```
RX_DATA(1, RX_DATA_out); 
```

# python - 使用 python 脚本中的嵌入式查询将 CSV 文件转储到 MySQL 数据库

> ID：14834822
> 
> 赞同：0
> 
> 时间：2013-02-12T14:28:54.587
> 
> 标签：python, mysql, csv, python-2.7

我有一个 SQL 查询，它打开一个 csv 文件并将其转储到数据库表中。我正在尝试使用 python 脚本一次转储多个文件以在文件之间进行迭代。我尝试在脚本中嵌入相同的 SQL 查询，但它抛出了一个错误。

这是我的脚本。

```
import csv
import MySQLdb

connection = MySQLdb.connect(host='localhost',
    user='root',
    passwd='password',
    db='some_db')

cursor = connection.cursor()

query = """ LOAD DATA INFILE 'c:\\example.csv' INTO TABLE new_table FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"' ESCAPED BY '"' Lines terminated by '\n' IGNORE 1 LINES """

cursor.execute(query)

conenction.commit()
cursor.close() 
```

由于某种原因，python 脚本在不同的位置查找 example.csv

这是抛出的错误：

```
raise errorclass, errorvalue
InternalError: (29, "File 'C:\\Documents and Settings\\All Users\\Application Data\\MySQL\\MySQL Server 5.5\\data\\example.csv' not found (Errcode: 2)") 
```

任何帮助将不胜感激。我还在 stackoverflow 上搜索以帮助将 scv 文件转储到数据库的不同表中。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T15:07:31.930

您可能需要`load data local`语法来确保数据是相对于客户端而不是服务器读取的。改变

```
query = """ LOAD DATA INFILE 'c:\\example.csv' INTO TABLE new_table FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"' ESCAPED BY '"' Lines terminated by '\n' IGNORE 1 LINES """ 
```

到

```
query = """ LOAD DATA LOCAL INFILE 'c:\\example.csv' INTO TABLE new_table FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"' ESCAPED BY '"' Lines terminated by '\n' IGNORE 1 LINES """ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-02T16:21:04.110

注意你的拼写！conenction.commit() 应该是 connection.commit()

# c# - 使用浮点数 C# 避免图形中的空白

> ID：14834824
> 
> 赞同：0
> 
> 时间：2013-02-12T14:28:59.597
> 
> 标签：c#, xna, floating-point

我在 C# 中使用 XNA 绘制图形

```
View = Matrix.CreateLookAt(new Vector3(0f, 100f, 0f), Vector3.Zero, Vector3.Forward);

Projection = Matrix.CreatePerspectiveFieldOfView(MathHelper.ToRadians(20.0f), ((Game1)Game).graphics.GraphicsDevice.Viewport.AspectRatio, 1.0f, 10000.0f); 
```

我的相机从不移动，只有我的游戏对象移动。我以下列方式移动它们以获得平滑的运动

```
float speed = 0.001f;
pos.Z = pos.Z + (gameTime.ElapsedGameTime.Milliseconds * speed); 
```

但是，我有道路瓷砖（Primitives VertexPositionTexture）要在另一个之后渲染，以给人一种道路行驶的感觉。

它有效，但有时它是我不想要的道路瓷砖之间的像素间距。我认为这与浮点坐标有关。

我应该如何解决这个问题？

提前致谢！我希望我的解释清楚我的问题。

编辑1：如果有人想对这篇文章投反对票，请评论原因。没有反馈就很难开发。

编辑 2：关于原语的信息。

杆 1 上的 res 400 x 50

![在此处输入图像描述](../Images/2aa97182d769aa18f818bd20dd28bcf6.png)

```
using System;
using System.Collections.Generic;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Audio;
using Microsoft.Xna.Framework.Content;
using Microsoft.Xna.Framework.GamerServices;
using Microsoft.Xna.Framework.Graphics;
using Microsoft.Xna.Framework.Input;
using Microsoft.Xna.Framework.Media;

namespace WindowsGame1
{
    class Rod
    {
        public static Microsoft.Xna.Framework.Graphics.VertexBuffer buffer;
        public static Texture2D[] tex;
        public static BasicEffect effect;

        public Vector3 pos;
        public int typ;

        public const float Width = 24f;
        public const float Height = 5;

        public Rod(Vector3 pos,Random r)
        {
            this.pos = pos;
            typ = r.Next(tex.Length);
        }

        static public void Initialize(GraphicsDevice g)
        {
            buffer = new VertexBuffer(g, VertexPositionTexture.VertexDeclaration, 6, BufferUsage.WriteOnly);

            VertexPositionTexture[] vertices = new VertexPositionTexture[6];

            vertices[0].Position = new Vector3(-Width, 0f, -Height);
            vertices[0].TextureCoordinate.X = 0;
            vertices[0].TextureCoordinate.Y = 0;

            vertices[1].Position = new Vector3(Width, 0f, Height);
            vertices[1].TextureCoordinate.X = 1;
            vertices[1].TextureCoordinate.Y = 1;

            vertices[2].Position = new Vector3(-Width, 0f, Height);
            vertices[2].TextureCoordinate.X = 0;
            vertices[2].TextureCoordinate.Y = 1;

            vertices[3].Position = new Vector3(Width, 0f, Height);
            vertices[3].TextureCoordinate.X = 1;
            vertices[3].TextureCoordinate.Y = 1;

            vertices[4].Position = new Vector3(-Width, 0f, -Height);
            vertices[4].TextureCoordinate.X = 0;
            vertices[4].TextureCoordinate.Y = 0;

            vertices[5].Position = new Vector3(Width, 0f, -Height);
            vertices[5].TextureCoordinate.X = 1;
            vertices[5].TextureCoordinate.Y = 0;

            buffer.SetData<VertexPositionTexture>(vertices);
            effect = new BasicEffect(g);
            effect.TextureEnabled = true;
        }

        public void SetTyp(Random r)
        {
            typ = r.Next(tex.Length);
        }

        public void Update(GameTime gameTime, Double speed)
        {
           // pos = new Vector3(pos.X, pos.Y, pos.Z + (gameTime.ElapsedGameTime.Milliseconds * speed) );
            pos.Z = pos.Z + (float)(gameTime.ElapsedGameTime.Milliseconds * speed);
        }

        public void Draw(Matrix View, Matrix Projection, GraphicsDevice g)
        {
            effect.World = Matrix.CreateScale(1.01f) * Matrix.CreateTranslation(pos);
            effect.View = View;
            effect.Projection = Projection;
            effect.Texture = tex[typ];

            foreach (EffectPass pass in effect.CurrentTechnique.Passes)
            {
                g.SetVertexBuffer(buffer);
                pass.Apply();
                g.DrawPrimitives(PrimitiveType.TriangleList, 0, 2);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T15:09:14.910

如果没有更多详细信息，我无法确定问题所在，但可能会发生以下情况：

例如，假设您正在绘制两个矩形。因此，如果您独立绘制它们中的每一个，您将得到如下结果：

```
+--------+
|        |
|        |
+--------+  < gap greatly exaggerated
+--------+  <
|        |
|        |
+--------+ 
```

这可能会导致明显的间隙。

你想要的是这样的：

```
+--------+
|        |
|        |
+--------+
|        |
|        |
+--------+ 
```

不是在没有间隙的意义上，而是在**共享顶点**的意义上。

在上图中，有 8 个顶点。在底部，有 6 个，因为顶点在矩形之间共享。这意味着即使在理论上也不可能有差距，因为两者之间只有一条边。

您需要做的是重构代码以在矩形之间共享顶点。

在图形编程中，这通常被称为四边形或三角形带。Riemer 有一个[页面](http://www.riemers.net/eng/Tutorials/XNA/Csharp/Series3/Triangle_strip.php)在 XNA 的上下文中解释三角形条带。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T15:04:35.940

您可以尝试使用 Matrix.CreateScale(1.01f) 转换纹理

此外，在您的绘画程序中最初创建纹理时，您的纹理是否被正确缩放或调整大小？在任何情况下，通过浮动缩放纹理都会导致边缘不准确，应尽可能避免。

# javascript - 使用滑块缩放

> ID：14834825
> 
> 赞同：1
> 
> 时间：2013-02-12T14:29:05.097
> 
> 标签：javascript, jquery, html

我是 jQuery 的初学者，并希望为我的需求构建一个简短的插件。我正在寻找一个像插件一样的轻而短的时间线，它必须看起来像下面这样：

![在此处输入图像描述](../Images/48213e1e580035a91f37ffe7d3950926.png)

下面的绿色条有两个小矩形，可以左右移动，彼此靠近或远离，以放大/缩小上面时间线的内容（橙色条）。我试图找到类似的插件，我可以将其用作编写使用滑块放大/缩小的参考。
我发现了一些时间线插件，例如 Timeglider 等，它们的缩放功能以不同的方式实现，与上图不同（我可以使用两个矩形来放大/缩小并在橙色条中缩放时间线）。

我想询问有关在哪里可以找到类似插件的建议，我可以将其用作参考，以了解如何实现使用滑块进行缩放。或者，如果没有这样的插件，我将不胜感激有关如何为插件进行缩放功能的一些帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:34:31.563

你知道吗，有一个用于 jQuery UI 的滑块插件（[链接](http://jqueryui.com/slider/)）。这只是样式的问题，连接到幻灯片事件并在旅途中更改缩放级别。

我会扩展我的答案，但我缺少有关您的 HTML 布局的更多信息，希望在 jsfiddle.net 中查看您的一些代码。

# android - ActionBar 在 Android 4.1 和 Android 4.0 上显示和隐藏不同的效果-

> ID：14834832
> 
> 赞同：1
> 
> 时间：2013-02-12T14:29:27.463
> 
> 标签：android, android-actionbar, actionbarsherlock

我的应用程序使用 ActionBarSherlock 来显示和隐藏操作栏。

在 Android 4.1+ 上，操作栏向上滑动并在隐藏时退出屏幕（这是我需要的动画）（显示相反），但在 Android 4.0 或更低版本上，效果是不透明淡出。

使用幻灯片获得与 Android 4.1 相同效果的最佳方法是什么？

更新：
我去 hide() 实现并查看 Sherlock 方法。在此方法`mContentView`中检查它是否为空。

`mContentView`仅在我们没有`windowActionBarOverlay`设置为时才设置`true`：

```
if ((features & (1 << Window.FEATURE_ACTION_BAR_OVERLAY)) == 0) {
        mContentView = (NineFrameLayout)decor.findViewById(android.R.id.content);
    } 
```

事实上，如果我删除 ActionBarOverlay 选项，所有版本都使用相同的效果来隐藏和显示操作栏，但我需要将此设置为 true。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T15:01:08.460

首先，在这个用例中，使用或不使用 actionbarsherlock 的实现不会有所不同。由于您使用的是 4.0 和 4.1。动画将依赖于 SDK 提供的动画，而不是 ActionBarSherlock。

目前您有 2 个动画，一个来自 4.0，一个来自 4.1。这些是获得相同动画所需的步骤：

*   找出调用动画的位置
*   从 4.1 中找到动画并导入到您的项目中
*   设置显示/隐藏操作栏时要调用的动画
*   该动画将在 4.0 和 4.1+ 中调用

我不确定 3.0 之前的设备会发生什么，

希望这有帮助，否则在下面评论

# grails - Grails力控制器下载文件

> ID：14834833
> 
> 赞同：0
> 
> 时间：2013-02-12T14:29:31.177
> 
> 标签：grails, groovy

我有以下代码：

```
def getMyFile(){

    File myFile = new File("/path/to/file.xsl")

    try{

        response.setHeader "Content-disposition", "attachment; filename=${myFile.name}"
        response.contentType = new MimetypesFileTypeMap().getContentType(myFile )
        response.outputStream << myFile .bytes
        response.outputStream.flush()
    }

    catch (e){
        println(e.message)
    }

} 
```

访问此控制器操作时，我希望浏览器下载 excel 文件。

该代码不会在控制台中产生任何错误，但文件未正确下载。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T14:50:36.230

这是适用于很多文件类型的东西

```
 response.setContentType("application/octet-stream")
        response.setHeader("Content-disposition", "attachment; filename=\"myFileName\"")
        response.outputStream << myFile.newInputStream()
        return 
```

# c# - 变量前的@在c#中是什么意思？

> ID：14834840
> 
> 赞同：7
> 
> 时间：2013-02-12T14:29:50.167
> 
> 标签：c#, resharper

[首先，这不是C# 中变量名前的 @ 符号是什么意思的](https://stackoverflow.com/questions/429529/what-does-the-symbol-before-a-variable-name-mean-in-c)重复 ？

as`group`不是保留的关键字。

我写了一些代码，resharper 建议我`@`在变量之前添加`group`。

知道为什么吗？

```
var group = GetDefaultGroup(ClientServiceCommon.Poco.Group);

filteredPairs = @group.Pairs.ToList(); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-12T14:32:17.757

正如您正确指出的那样，`group`不是保留关键字（语言设计者在向语言添加新功能时尽量不引入新的保留关键字，以免破坏现有程序）。然而，它是一个*上下文*关键字：它成为 LINQ 查询表达式中的一个关键字。Resharper 建议您重命名相关变量，以避免在查询表达式中使用此变量时产生歧义。

从[语言规范](http://www.microsoft.com/en-us/download/details.aspx?id=7029)：

> **7.16.1 查询表达式中的歧义**
> 
> 查询表达式包含许多“上下文关键字”，即在给定上下文中具有特殊含义的标识符。具体来说，这些是 from、where、join、on、equals、into、let、orderby、ascending、descending、select、**group** 和 by。为了避免由于混合使用这些标识符作为关键字或简单名称而导致查询表达式中的歧义，当这些标识符出现在查询表达式中的任何位置时，这些标识符都被视为关键字。为此，查询表达式是以“from identifier”开头的任何表达式，后跟除“;”、“=”或“,”之外的任何标记。

如果您尝试执行以下操作，您将收到编译器错误：

```
var filteredParis = from pair in group.Pairs // group is now treated as a keyword
                    select pair; 
```

# r - 'quietly = TRUE' 什么时候在 require() 函数中真正起作用？

> ID：14834841
> 
> 赞同：27
> 
> 时间：2013-02-12T14:29:54.377
> 
> 标签：r

我正在尝试编写一组函数来检查丢失的 R 包，并在必要时安装它们。在 StackOverflow 上有一些很好的代码可以做到这一点：[从这里开始](https://stackoverflow.com/questions/4090169/elegant-way-to-check-for-missing-packages-and-install-them?lq=1)。

我想让这些函数尽可能地静音，特别是因为 R 甚至会以红色墨水返回成功的消息。因此，我试图将`quietly = TRUE`论点传递给`library`和`require`。

但是，这些选项似乎永远不会起作用：

```
# attempt to get a silent fail
require(xyz, quietly = TRUE)
Warning message:
In library(package, lib.loc = lib.loc, character.only = TRUE, logical.return = TRUE,  :
  there is no package called ‘xyz’ 
```

**我怎么能`require`默默地失败，我没有得到什么`quietly`选择？**

文档说：

> `quietly`一个合乎逻辑的。如果为 TRUE，则不会打印确认包裹加载的消息，并且大多数情况下，如果包裹加载失败，则不会打印错误/警告。

但在我看来，“最经常”应该是“几乎从不”以我的个人经验。我很乐意听到你的经历。理由：编码功能以帮助学生。

* * *

**添加。**同样的问题也适用于`quiet = TRUE`in `install.packages()`。它只杀死进度条，但不会杀死随后的“下载的二进制包在”消息（以黑色打印，耶！），即使它对普通用户没有用处。

* * *

**添加。**如果任何人都可能对此感兴趣，那么到目前为止的代码：

```
## getPackage(): package loader/installer
getPackage <- function(pkg, load = TRUE, silent = FALSE, repos = "http://cran.us.r-project.org") {
  if(!suppressMessages(suppressWarnings(require(pkg, character.only = TRUE, quietly = TRUE)))) {
    try(install.packages(pkg, repos = repos), silent = TRUE)
  }
  if(load) suppressPackageStartupMessages(library(pkg, character.only = TRUE, quietly = TRUE))
  if(load & !silent) message("Loaded ", pkg)
}

## Not run:
x <- c("ggplot2", "devtools") # etc.
lapply(x, getPackage, silent = TRUE) 
```

我正在考虑放弃在上面的函数中使用的努力`quietly`，因为它似乎没有按预期工作。我可能应该询问 R 用户列表，以便从核心开发团队获得解释。根据`suppressMessages(suppressWarnings(require(...)))`我的经验，解决方法可能不稳定。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-12T14:38:55.743

如果你想让你的`require`函数**非常**安静，你可以使用：

```
suppressMessages(suppressWarnings(require(xyz))) 
```

这使 ：

...好吧，没什么:)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2015-10-13T16:41:05.147

我不确定它是什么时候添加到语言中的，但现在首选的方法是

```
suppressPackageStartupMessages({
    require(this)
    require(that)
    ...
}) 
```

这会导致“正在加载...”、有关屏蔽符号的投诉和其他噪音，但仍会出现指示实际问题的消息（例如，包或依赖项不可用）。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-07-24T02:41:36.273

最简单的解决方案似乎是

```
try(library(xyz), silent=TRUE) 
```

`require`基本上是一个包装器`tryCatch(library)`，所以这只是去掉了一些无关的代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T14:39:03.810

一种解决方法是在通话前后设置警告选项...

```
 options(warn=-1)
 try(require(xyz, quietly = TRUE),silent=TRUE)
 options(warn=0) 
```

但这很危险..我认为您需要更改警告消息的颜色。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-07-23T19:19:16.973

```
PkgNames <- c("forecast", "tseries", "ggplot2", "qcc", "ggmap","corrgram",
              "effects", "Hmisc", "plyr", "reshape")
invisible(suppressMessages(suppressWarnings(lapply(PkgNames, require, character.only = T)))) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-05-23T04:08:36.287

这是一个古老的问题，但为了其他寻求答案的人的利益：

`requireNamespace`with`quietly=TRUE`似乎*悄悄地*检查软件包是否已安装，因此检查可以很安静：

```
 > if (requireNamespace("Foobar", quietly = TRUE)) "Found it" else "Not found"
    [1] "Not found"
    > if (requireNamespace("utils", quietly = TRUE)) "Found it" else "Not found"
    [1] "Found it" 
```

因此，要解决 OP 的主要问题（粗体问题）：

```
 if (requireNamespace("package", quietly=TRUE)) require("package", quietly=TRUE); 
```

任何噪音都来自加载包装。第二个`quietly=TRUE`有点帮助。因此，以上对于丢失的包裹是无声的，对于一些找到的包裹是无声的，对于其他包裹来说，噪音要小得多`quietly`。毫无疑问，有些软件包根本没有帮助。

# google-apps-script - getActiveSpreadsheet().getActiveSheet().getName() 未使用新工作表名称更新

> ID：14834843
> 
> 赞同：2
> 
> 时间：2013-02-12T14:29:58.523
> 
> 标签：google-apps-script, google-sheets

我正在尝试为我的学校项目创建一个通用时间表。我创建了一个简单的函数来获取活动工作表的名称。

```
function SetSheetName() {
 var Sheet = SpreadsheetApp.getActiveSpreadsheet().getActiveSheet();

  return Sheet.getName();
} 
```

我第一次使用它时效果很好。但是，如果我更改工作表的名称并重新调用该函数，它仍然会获取工作表的旧名称。

例如，如果工作表的名称是“Sheet1”并且我在一个单元格中运行该函数，则单元格的值将是 Sheet1。但是如果我更改同一张表的名称并重新调用该函数，无论如何我仍然会得到 Sheet1。

我想这是谷歌文档的运作方式，但我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-12T02:24:57.503

Henrique 很好地解释了为什么像这样的自定义函数不会在[Script 中更新以汇总未更新](https://stackoverflow.com/questions/9022984/google-apps-script-to-summarise-data-not-updating/9023954#9023954)的数据。

归结为 Google 表格中的优化决策；仅当其参数已更改时，才会重新评估自定义函数。您的函数没有参数 - 因此在电子表格打开时永远不会重新评估它。

David Tew 提到的`GOOGLECLOCK()`函数提供了每分钟一次的更改参数，导致重新评估函数，但在“新工作表”中不可用。所以你运气不好。

# regex - 阿拉伯-印度数字（印度教-阿拉伯）数字 utf8 从 0 到 9 的范围是多少

> ID：14834846
> 
> 赞同：0
> 
> 时间：2013-02-12T14:30:09.680
> 
> 标签：regex, utf-8, arabic, numerical

用于正则表达式的阿拉伯-印度数字（印度教-阿拉伯）数字 utf8 从 0 到 9 的范围是多少：

![在此处输入图像描述](../Images/9a01b7d15cc1467a196b4f4bc11e780a.png)

在正则表达式中使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T14:38:10.250

U+06F0–U+06F9。在检查 Unicode 代码点图表或字符映射时可以很容易地看到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T15:13:58.397

终于我找到了答案

仅适用于数字：\x{0660}-\x{0669}

对于数字和字母：\x{0600}-\x{06ff}

[Unicode 4.0 / ISO 10646 平面 0](ftp://www.columbia.edu/kermit/public_html/utf8-t1.html)

谢谢大家。

# linux - 仅在 bash 脚本中检查可执行文件时计算文件夹和可执行文件？

> ID：14834847
> 
> 赞同：-1
> 
> 时间：2013-02-12T14:30:10.577
> 
> 标签：linux, bash, shell, scripting

我的代码是：

```
function CountEx()
{

    echo "The number of executable files in this dir is: $count"
}
while 
```

我正在使用它像这样：

```
 yaser.sh -x ./folder 
```

输出是`The number of files + folders`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T14:34:01.937

文件夹上的可执行位具有特殊含义，并且最常设置。尝试过滤具有可执行位的常规文件：

```
if [[ -f "$file" -a -x "$file" ]]; 
```

当然，整个练习可以通过以下方式简化`find`：

```
find $folder -maxdepth 1 -type f -executable -ls | wc -l 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T14:38:14.430

可能是你目录下的所有文件都设置了可执行权限。如果您只想检查 elf 文件，请使用 file 命令和 grep 查找 elf。

```
 file $file | grep elf > /dev/null
 if [ $? -eq. 0 ] ; then
     count = `expr $count +  1`
 fi 
```

# jquery - 使用 jQuery deferred() 并在循环内的函数中解析

> ID：14834852
> 
> 赞同：0
> 
> 时间：2013-02-12T14:30:32.050
> 
> 标签：jquery, asynchronous, jquery-deferred

我有一个全局变量`var imageURL = jQuery.Deferred();`作为延迟对象。

接下来我有一个通过循环运行的函数，对于每个循环，我打算获取通过异步函数产生的值。我遇到的问题是我无法正确获取值，因为在函数返回它们的值之前调用它们，所以我被告知使用 jQuery deferred。无法完全理解它：

```
 downloadProductImage: function(remoteImage, localImageName){

    window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, function(fileSystem) {
         fileSystem.root.getFile(localImageName, {create: true, exclusive: false}, function ff1(fileEntry) {
         var localPath = fileEntry.fullPath;
         var ft = new FileTransfer();
         ft.download(remoteImage,
              localPath, function (entry) {
                   imageURL.resolve(entry.fullPath);

                    //return entry.fullPath;

                     }, fail);
                   }, fail);
        }, fail);
} 
```

downloadProductImage 函数是循环执行的，在调用这个函数之后我希望得到 imageURL.resolve(entry.fullPath) 的值，所以我这样做了：

```
 //start loop
    imageURL.done(function(theURL){
        alert(theURL);
    });
//end loop 
```

如果我理解正确，则运行文件下载的回调，并在完成后执行 imageURL.done()。但是 done() 一直显示相同的文件路径，就好像它正在覆盖每个文件一样。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T16:21:21.330

正如评论中所说，您不能将 imageURL 用作全局变量。`$.Deferred`只能使用一次。当其状态为`resolved`or`rejected`时，每次添加`.done`or`.fail`回调时，都会立即返回相同的结果。

您应该做的是删除您的全局 imageURL，并`downloadProductImage`返回一个新的`$.Deferred`. 这样，您可以将 a 添加`.done`到返回的`$.Deferred`.

```
downloadProductImage: function(remoteImage, localImageName) {
    var imageURL = $.Deferred();
    window.requestFileSystem(
        [...]
        ft.download(remoteImage,
            localPath, function (entry) {
                imageURL.resolve(entry.fullPath);
                //return entry.fullPath;
                }, fail);
            }, fail);
    }, fail);
    return imageURL;
} 
```

`reject`如果您的文件传输失败，请不要忘记延迟。

# c# - 在 asp.net 中以编程方式设置“过期”http 标头的值

> ID：14834853
> 
> 赞同：5
> 
> 时间：2013-02-12T14:30:34.673
> 
> 标签：c#, asp.net, caching, http-headers

在 ASP.NET 站点中，我想为某些静态文件添加“Expires”标头，因此我`clientCache`为这些文件所在的文件夹添加了这样的配置：

```
<system.webServer>
  <staticContent>
    <clientCache cacheControlMode="UseExpires" httpExpires="Wed, 13 Feb 2013 08:00:00 GMT" />
  </staticContent> 
```

如果可能，我想以`httpExpires`编程方式计算 的值，例如将其设置为文件上次更新的时间 + 24 小时。

`httpExpires`有没有办法通过调用方法来配置缓存控件以获取值？

如果没有，有什么替代方案？我想过编写一个自定义的 http 处理程序，但也许有一个更简单的解决方案......

*编辑*：请注意，这些是静态文件，因此常规的 asp.net 页面处理程序不提供它们。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T16:31:04.430

您可以使用**[`Response.Cache`](http://msdn.microsoft.com/en-us/library/system.web.httpresponse.cache%28v=vs.100%29.aspx)**以编程方式设置缓存。

**[这是](http://www.dotnetperls.com/cache)**一个很好看的教程。

基本上，您希望将缓存策略设置为`Public`（客户端 + 代理）并设置过期标头。有些方法的命名相当笨拙，但这个方法很简单。

```
HttpContext.Current.Response.Cache.SetCacheability(HttpCacheability.Public);
HttpContext.Current.Response.Cache.SetExpires(yourCalculatedDateTime); 
```

（ASP.NET 设计者不太喜欢得墨忒耳法则，是吗？）

或者，您可以通过`Response.Headers`集合访问听者，您可以在其中明确更改它们。

这两种方式都可以在所有 ASP.NET 处理程序（aspx、asmx）中访问，并且可能在您可以访问当前 HttpContext 的任何地方进行更改。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-13T13:21:22.770

感谢@HonzaBrestan，他让我在 HTTP 模块的想法上走上了正轨，我想出了一个像这样的解决方案，我想分享它以防它对其他人有用。

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Web;

public class ExpirationModule : IHttpModule {

    HttpApplication _context;

    #region static initialization for this example - this should be a config section

    static Dictionary<string, TimeSpan> ExpirationTimes;
    static TimeSpan DefaultExpiration = TimeSpan.FromMinutes(15);
    static CrlExpirationModule() {       
        ExpirationTimes = new Dictionary<string, TimeSpan>();
        ExpirationTimes["~/SOMEFOLDER/SOMEFILE.XYZ"] = TimeSpan.Parse("0.0:30");
        ExpirationTimes["~/ANOTHERFOLDER/ANOTHERFILE.XYZ"] = TimeSpan.Parse("1.1:00");
    }

    #endregion

    public void Init(HttpApplication context) {
        _context = context;
        _context.EndRequest += ContextEndRequest;
    }

    void ContextEndRequest(object sender, EventArgs e) {
        // don't use Path as it contains the application name
        string requestPath = _context.Request.AppRelativeCurrentExecutionFilePath;
        string expirationTimesKey = requestPath.ToUpperInvariant();
        if (!ExpirationTimes.ContainsKey(expirationTimesKey)) {
            // not a file we manage
            return;
        }
        string physicalPath = _context.Request.PhysicalPath;
        if (!File.Exists(physicalPath)) {
            // we do nothing and let IIS return a regular 404 response
            return;
        }
        FileInfo fileInfo = new FileInfo(physicalPath);
        DateTime expirationTime = fileInfo.LastWriteTimeUtc.Add(ExpirationTimes[expirationTimesKey]);
        if (expirationTime <= DateTime.UtcNow) {
            expirationTime = DateTime.UtcNow.Add(DefaultExpiration);
        }
        _context.Response.Cache.SetExpires(expirationTime);
    }

    public void Dispose() {
    }

} 
```

然后你需要在 web config (IIS 7) 中添加模块：

```
<system.webServer>
  <modules>
    <add name="ExpirationModule" type="ExpirationModule"/>
  </modules>
</system.webServer> 
```

# jquery - 带有 altfields 的 jQuery UI Datepicker：验证不应该触发

> ID：14834859
> 
> 赞同：0
> 
> 时间：2013-02-12T14:31:00.663
> 
> 标签：jquery, jquery-ui, jquery-validate, jquery-ui-datepicker

我的表单上有 3 个日期选择器（开始日期、结束日期和截止日期），并且选择的日期打印在各自的替代字段中。我设置了日期验证规则来验证替代字段中的值，而不是日期选择器本身（我尝试在日期选择器上进行验证，但它什么也没做）。

唯一的规则是它们是必需的，并且结束日期和到期日期必须大于开始日期。

如果我选择了一个等于 startdate 的 endate 或 duedate，在我单击提交按钮或者如果我将焦点放在 altfield 上然后单击离开（焦点丢失）之前，我不会收到任何预期的验证错误。

在日期选择器中选择日期时，有没有办法手动验证这些输入？

这是[演示](http://jsfiddle.net/FWudz/)

这是代码：

HTML：

```
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">    
<head>
    <meta http-equiv='Content-Type' content='text/html; charset=utf-8' />
    <title>Goals</title>
    <link rel="stylesheet" type="text/css" href="../style/jquery-ui-1.9.2.custom.min.css"
    />
    <script src="../include/jquery.validate.min.js" type="text/javascript"></script>
    <style type="text/css">
        * {
            font-family: Verdana;
            font-size: 96%;
        }
        label {
            width: 10em;
            float: left;
        }
        label.error {
            float: none;
            color: red;
            padding-left: .5em;
            vertical-align: top;
        }
        p {
            clear: both;
        }
        .submit {
            margin-left: 12em;
        }
        em {
            font-weight: bold;
            padding-right: 1em;
            vertical-align: top;
        }
        .ui-widget {
            font-size: 1em;
        }
        .ui-slider-horizontal {
            display: inline-block;
            width: 30em;
        }
        .ui-slider-vertical {
            display: inline-block;
            float: left;
            margin: 0em 2em 1em 0em;
        }
    </style>
    <form id="newusergoal" method="post">
        <fieldset>
            <legend>Add a New Goal</legend>
            <label for="startdate">Start Date:</label>
            <br/>
            <div id="startdateselect"></div>
            <br/>
            <br/>
            <input type="text" name="startdate" id="startdate" readonly="true" />
            <br/>
            <br/>
            <br/>
            <label for="enddate">End Date:</label>
            <br/>
            <div id="enddateselect"></div>
            <br/>
            <br/>
            <input type="text" name="enddate" id="enddate" readonly="true" />
            <br/>
            <br/>
            <br/>
            <label for="duedate">Due Date:</label>
            <br/>
            <div id="duedateselect"></div>
            <br/>
            <br/>
            <input type="text" name="duedate" id="duedate" readonly="true" />
            <br/>
            <br/>
            <br/>
            <input type="submit" name="submit" id="submit" value="Save New Goal" />
        </fieldset>
    </form> 
```

js：

```
$(document).ready(function () {
$("#newusergoal").validate({
    rules: {
        startdate: {
            required: true
        },
        enddate: {
            required: true,
            greaterThan: "#startdate"
        },
        duedate: {
            required: true,
            greaterThan: "#startdate"
        }
    },
messages: {
    startdate: {
        required: "Goal must have a start date"
    },
    enddate: {
        required: "Goal must have an end date",
        greaterThan: "End date must be greater than the start date"
    },
    duedate: {
        required: "Goal must have an due date",
        greaterThan: "Due date must be greater than the start date"
    }
}
});

$("#startdateselect").datepicker({
    minDate: 0,
    maxDate: "10Y",
    dateFormat: "yy-mm-dd",
    hideIfNoPrevNext: true,
    showButtonPanel: true,
    changeMonth: true,
    changeYear: true,
    altField: "#startdate"
});
$("#enddateselect").datepicker({
    minDate: 0,
    maxDate: "10Y",
    dateFormat: "yy-mm-dd",
    hideIfNoPrevNext: true,
    showButtonPanel: true,
    changeMonth: true,
    changeYear: true,
    altField: "#enddate"
});
$("#duedateselect").datepicker({
    minDate: 0,
    maxDate: "10Y",
    dateFormat: "yy-mm-dd",
    hideIfNoPrevNext: true,
    showButtonPanel: true,
    changeMonth: true,
    changeYear: true,
    altField: "#duedate"
});

jQuery.validator.addMethod(
    "greaterThan",

function (value, element, params) {
    if (!/Invalid|NaN/.test(new Date(value))) {
        return new Date(value) > new Date($(params).val());
    }

    return isNaN(value) && isNaN($(params).val()) || (Number(value) > Number($(params).val()));
},
    'Must be greater than {0}.');

}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T16:06:35.917

> **引用 OP**：“有没有办法手动验证这些输入......？”

用于`.element()`以编程方式触发对单个元素的验证测试。

```
$("#myform").validate().element("#myfield"); 
```

[http://docs.jquery.com/Plugins/Validation/Validator/element#element](http://docs.jquery.com/Plugins/Validation/Validator/element#element)

**演示**：http: [//jsfiddle.net/vMNsy/](http://jsfiddle.net/vMNsy/)

这个演示展示了如何`.element()`在 DOM 就绪事件的第一个字段上触发验证测试。您可以使用自己的自定义事件或函数调用它。

有关更具体的内容，请参阅此答案...

[https://stackoverflow.com/a/4635640/594235](https://stackoverflow.com/a/4635640/594235)

```
$("#myfield").datepicker({
    onClose: function() {
        $("myform").validate().element("#myfield");
    }
}); 
```

**编辑**：根据评论，`onClose`事件不适用于 OP，但为了他人的利益而保留代码。

# ios - 橙色点而不是绿色点

> ID：14834863
> 
> 赞同：0
> 
> 时间：2013-02-12T14:31:04.210
> 
> 标签：ios, objective-c, ios6, ios-provisioning

我是 iPhone 应用程序的新手，想将 xcode 4.5 项目运行到 iPhone（6.1 ios 版本）。

我也在关注[这个视频](http://www.youtube.com/watch?v=lPwlhKgZHCM)。

然而，在我的 iPhone 旁边的管理器中，我看到的是橙色/黄色点而不是绿色点。

我需要做什么才能使它变成绿色，因为视频说它应该是绿色的

![在此处输入图像描述](../Images/3a7a9bbee8f6358ec1f9fb5eb7e7bfc4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T14:32:47.423

将您的 xcode 升级到 4.6，您将再次获得绿点。

# c# - 当XML数据有很多节点时用c#检索XML文件数据

> ID：14834865
> 
> 赞同：0
> 
> 时间：2013-02-12T14:31:18.243
> 
> 标签：c#, asp.net, xml

好吧，我是 C# 编程的新手，我需要一点帮助，我试图找到这个问题的答案，但找不到我想要的。也许我搜索不好，很抱歉。

我有这种类型的 xml 文件：

```
<ROW>
<ID>1256464</ID>
<TEST>
<PROJECT1>
<PROJECT1_ID>984461</PROJECT1_ID>
</PROJECT1>
<PROJECT2>
<PROJECT2_ID>614115</PROJECT2_ID>
</PROJECT2>
<PROJECT3>
<PROJECT3_ID>134998</PROJECT3_ID>
</PROJECT3>
</TEST>
<RESULTS>
<GRADE1>
<GRADE1_ID>6561616</GRADE1_ID>
</GRADE1>
<GRADE2>
<GRADE2_ID>6687979</GRADE2_ID>
</GRADE2>
<GRADE3>
<GRADE3_ID>13156665</GRADE3_ID>
</GRADE3>
</RESULTS>
</ROW> 
```

有很多行，文件很大。所以我应该使用 XmlTextReader 函数。至少我写了一个小代码：

```
 XmlTextReader reader = new XmlTextReader("items.xml");
    while (reader.Read())
    {
    XmlNodeType nodeType = reader.NodeType;
    if (nodeType == XmlNodeType.Element)
    {
    if (reader.NodeType == "ID")
    {
    //this node value i get to the console but others not, if them are in depth
    Console.WriteLine(reader.ReadString());
    }
    //tried to do this stuff i know it's wrong
    //but i cant get the value of this elment how should i loop through
    //and of course i need to reach grade1_id fields and loop through
    if (reader.NodeType == "PROJECT2_ID")
    {
    Console.WriteLine(reader.ReadString());
    }
    }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T14:54:05.083

我想指出您编写的 XML 无效。标签 <GRADE_something_ID> 实际上没有结束标签。（即第二个标签缺少 /-thingy）

我认为这是示例中的错字？否则，您可能会陷入解析此 XML 文件的痛苦世界。

# c# - 循环DataAdapter生成HTML表格

> ID：14834870
> 
> 赞同：2
> 
> 时间：2013-02-12T14:31:34.627
> 
> 标签：c#, asp.net, webforms

我在后面的代码中有以下内容：

```
[WebMethod]
public static string GenerateHtml(string id)
{
    //return id;
    DataView vwMain2;
    try
    {
        DbProviderFactory dbf = DbProviderFactories.GetFactory();
        using (IDbConnection con = dbf.CreateConnection())
        {
            string sSQL;
            sSQL = "select top 20                " + ControlChars.CrLf
                 + " ASSISTING_FILE_ID, DATE_ENTERED, CLIENT_CLAIM_NUM, PRIMARY_INSURED, PRIMARY_CLAIMANT, LOB_ID, FILE_STATUS, BRANCH_NAME," + ControlChars.CrLf
                 + " OWNERS_FIRST_NAME, OWNERS_LAST_NAME, OWNERS_NAME, OWNERS_EMAIL, OWNERS_OFFICE_PHONE, OWNERS_FAX_PHONE, OWNERS_CELL_PHONE" + ControlChars.CrLf
                 + "  from vwFILES_DetailViewWithOwners" + ControlChars.CrLf
                 + " where 1 = 1                    " + ControlChars.CrLf;
            //+ " where 1 = 1 and WEB_USER_ID = '" + Security.USER_ID.ToString() + "'" + ControlChars.CrLf;
            using (IDbCommand cmd = con.CreateCommand())
            {
                cmd.CommandText = sSQL;

                using (DbDataAdapter da = dbf.CreateDataAdapter())
                {
                    ((IDbDataAdapter)da).SelectCommand = cmd;
                    using (DataTable dt = new DataTable())
                    {
                        da.Fill(dt);
                        vwMain2 = dt.DefaultView;
                        GridView2.DataSource = vwMain2;

                            GridView2.DataBind();

                    }
                }
            }
        }
    }
    catch (Exception ex)
    {
        SplendidError.SystemError(new StackTrace(true).GetFrame(0), ex.Message);
        //lblError.Text = ex.Message;
    }

} 
```

我想遍历它并以以下格式创建一个 HTML 表：

```
<table>
    <tbody>
        <tr>
            <th>Column Header</th>
        </tr>
        <tr>
            <td>Column Data</td>
        </tr>
    </tbody>
</table> 
```

做这个的最好方式是什么？我想在生成 HTML 后返回它。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T14:41:10.510

我只是使用 stringBuilder 并在一些循环中手动拼凑 HTML。

```
StringBuilder sb = new StringBuilder();

sb.append('<table><tbody>');

foreach(DataRow r in dt.Rows)
{
     sb.append('<tr><th>' + r["ColumnHeader"] + '</th></tr>');
     sb.append('<tr><th>' + r["ColumnData"] + '</th></tr>');
}

 sb.append('</tbody></table>');

  return sb.ToString(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T14:49:30.437

如果您想像 WebService 一样调用它（例如：对于 jQuery ajax 调用），您有多种选择：

1.  我特别不喜欢这个，但使用[UpdatePanels](http://msdn.microsoft.com/en-ca/library/bb386454(v=vs.100).aspx)可能是一种选择。
2.  如果 SEO 不是问题，并且您只需要在客户端呈现一个表格，您可以只传输一个 JSON 对象并执行 JavaScript 代码来创建 DOM 元素
3.  如果您仍想使用 GridView，[您可以使用 UserControl，动态加载它并使用呈现的字符串将其发送回](http://weblogs.asp.net/srkirkland/archive/2007/11/05/dynamically-render-a-web-user-control.aspx)（显然，UserControl 将包含您刚刚在上面编写的代码）：

代码：

```
Control report;

StringBuilder sb = new StringBuilder();
StringWriter sw = new StringWriter(sb);
Html32TextWriter hw = new Html32TextWriter(sw);

report = LoadControl("WebUserControl.ascx");
report.RenderControl(hw);

report = LoadControl("WebUserControl.ascx"); 

((IReportUserControl)report).LoadReport(); //Initialize the control 

report.RenderControl(hw); 
```

[还有一个关于这个主题的 Stackoverflow 帖子](https://stackoverflow.com/questions/8088427/programatically-rendering-a-web-usercontrol)。

4.  安德鲁的回答是一种不同且简单的方法，并且也可以。

5.  另外，值得一提的是，MVC 在做这些事情时可能会解决一堆问题。

# java - Java多态中对象的字段访问和内存分配

> ID：14834873
> 
> 赞同：1
> 
> 时间：2013-02-12T14:31:50.230
> 
> 标签：java, memory, polymorphism, allocation

我有以下示例代码解释示例多态性概念 - 覆盖

```
    超级类
    {
        公共整数 = 1；
        公共字符超文本='a';
        公共字符串 getColor()
        {
            返回“红色”；
        }
    }

    类 Sub 扩展 Super
    {
        公共整数 = 2;
        public char subText='b';

        公共字符串 getColor()
        {
            返回“蓝色”；
        }
    }

    公开课 Sample2
    {
        公共静态无效主要（字符串 [] 参数）
        {
            超级超级子 = 新子（）；
            System.out.println(supersub.getColor() + supersub.number + supersub.superText );
        }

    }

```

输出为蓝色 1。

**问题一：**

派生类 getColor() 中的方法被覆盖，并显示超类的字段。

有人可以解释为什么不调用派生类中的数字字段吗？即，输出为 blue2

* * *

**问题 2：** **关于内存分配**

对于以下对象实例化，

```
   子子对象 = 新子（）；
```

字段“数字”的内存在堆中分配，数字变量的地址分配给对象引用 subobj。

考虑以下情况，

```
超级超级子 = 新子（）；
```

**(a)**这里创建了派生类 'Sub' 中的变量、'number and subText' 的内存，并将变量的地址放在 supersub 对象中

当我访问时，supersub.subText 我得到 subText 无法解析的错误。

所以，请解释上述**点（a） ，即派生类变量的内存分配**

谢谢，电子人

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T14:36:51.320

Java 中的字段不会被调用，并且永远不会受到动态调度/运行时多态性的影响。在您的情况下，实际上有两个单独的字段恰好具有相同的名称：`Super#number`和`Sub#number`. 该类`Sub`继承`Super#number`，因此它**同时**具有，您访问哪一个取决于您访问它的变量的**静态编译时**类型。这就解释了为什么`subobj`访问一个和`superobj`另一个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T14:37:03.430

> 有人可以解释为什么不调用派生类中的数字字段吗？

那是因为`fields`不是多态的。当访问特定引用上的字段时，您可以访问引用类型中定义的字段，并且决定不是基于实际的对象类型。

> 字段“数字”的内存在堆中分配，数字变量的地址分配给对象引用 subobj。

**不**，`number`是原始类型`int`，原始类型不在堆上分配。它们存储在文字池中。Primitives 和 Wrapper 类是两个不同的东西。如果您使用`Integer`而不是`int`，那么您将在 上创建对象`Heap`，如果该值不在范围内，则由`Java`文字池缓存。

> supersub.subText 我收到 subText 无法解析的错误。

这可以从您对第一个疑问的解释中推断出来。由于字段访问是基于引用类型而不是实际对象类型来解析的。因此，显然您无法访问`subText`引用`Super`，因为该字段不是该类的一部分，而是子类的一部分。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-12T14:41:03.400

> 问题一：
> 
> 显示方法是派生类，并显示超类的字段。
> 
> 有人可以解释为什么不调用派生类中的数字字段吗？即，输出为 blue2

字段不能被覆盖。即使两个类共享父子关系，字段也属于定义它们的类，即使它们与继承的字段共享名称。换句话说，`number`in 与 in`Sub`是完全不同的`number`领域`Super`。

> 问题2：这里创建了派生类'Sub'中的变量内存，'number and subText'，并且当我访问时，变量的地址被放置在supersub Object中，supersub.subText我得到了无法解析subText的错误。

存储的对象`supersub`是 type `Sub`，但编译器不知道。

因为 Java 是一种*静态类型*语言，所以编译器会使用引用的*声明*类型（即变量类型），因为在大多数实际情况下，*运行时*类型（表达式中明显的类型`new`）不是必须在编译时知道。例如，您可能从另一个方法或两个或三个候选方法中获取了此对象，因此运行时类型是不可预测的。

将引用存储在超类变量中意味着您打算暂时使用该对象`Super`。然后，编译器会根据您的这种感知意图进行工作。`Super`不保证只有运行时类型的实例`Sub`，因此它不能做出您期望的假设。

话虽如此，将引用存储在一种或另一种变量中不会修改对象。如果您要将对象强制转换回一个类型的变量，该变量实际上知道您尝试访问的那些成员（在您的情况下是`Sub`类型），您会发现它们仍然存在（并且它们保留了它们的值）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T14:36:36.863

很简单，因为您不能覆盖字段。方法是唯一可以被覆盖的东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T14:37:13.197

您不会覆盖 Java 中的类变量：您隐藏它们。覆盖是实例方法。

# r - 使用 samr 时 R 中的错 误消息

> ID：14834880
> 
> 赞同：0
> 
> 时间：2013-02-12T14:32:20.377
> 
> 标签：r, runtime-error

我一直在 R 中使用 SAM（微阵列的显着性分析），当我的程序运行时，它在使用 sam 指令执行操作时停止。显示的消息是：

```
Cluster size 12488 broken into 6032 6456 
Cluster size 6032 broken into 2628 3404 
Cluster size 2628 broken into 1051 1577 
```

在某些数据集中出现了这些消息，但处理继续进行，完全没有问题；而在其他人中，程序挂起。R 不显示任何消息，但显示集群损坏消息的是 Rstudio。

我正在使用的 sam 指令类似于：

```
samfit <- SAM(t, numbas, resp.type="Two class unpaired",
                         nperms=100, 
                         testStatistic=c("standard"),
                         knn.neighbor=10, 
                         random.seed=1234567, 
                         logged2=TRUE,
                         genenames=rownames(t)) 
```

在没有使用 sam for R 之前，是否有人遇到过这个错误？我在 google 上进行了搜索，但我没有找到任何关于它的信息

谢谢

# python - 如何从 Python 3 中的编码文件中读取/更改特定值

> ID：14834881
> 
> 赞同：0
> 
> 时间：2013-02-12T14:32:19.443
> 
> 标签：python, python-3.x

我正在编写一个 Python 3 脚本，该脚本使用 https API 从 VPN 上的服务器获取随机分配的端口号。有了这个号码后，我想更改 emule 的 .ini 文件以使其使用该端口并启动 emule --easy。

接下来，我想确保 vuze 打开一个监听端口！= emule 正在使用的端口。Vuze 没有将其存储在易于编辑的 .ini 文件中，而是使用经过编码的 .config 文件。

如果有一种相对简单的方法可以在配置文件中设置此值，我想让 python 脚本选择一个随机端口号，更改 .config 文件并打开 vuze。

第二好的方法是启动 vuze 并打开该功能以分配一个随机监听端口，从 .config 文件中读取该端口，如果它与 emule 端口相同，则关闭并重新启动 vuze。

3 月 17 日：我在 [https://bitbucket.org/rsnitsch/py3bencode][1] 找到了 py3bencode，不过我是个菜鸟，但在运行 setup.py 之前我不确定将 4 个文件放在哪里。

3 月 30 日：更新最终代码：

```
def startmysoftware(portgiven):
# eMule

emuleinifile = os.environ['ProgramFiles']+'\\eMule\\config\\'+'preferences.ini'
# vvv beginning and ending quotes are to compensate for Microsoft kludge
emuleappfile = '"'+os.environ['ProgramFiles']+'\\eMule\\emule.exe'+'"'
print(emuleappfile)
# to use both Kademelia and eD2K, emule requires two different port numbers
# unfortunately, PIA's portforwarding servers only provide 1
eMuleNetworkIseD2K = True
parser = SafeConfigParser()
parser.read(emuleinifile)
if eMuleNetworkIseD2K:
    #set up for eD2K
    parser.set('eMule','Port',portgiven)
    parser.set('eMule','UDPPort','0')
    parser.set('eMule','NetworkKademlia','0')
    parser.set('eMule','NetworkED2K','1')
else:
    #set up for Kademelia
    parser.set('eMule','Port','1')
    parser.set('eMule','UDPPort',portgiven)
    parser.set('eMule','NetworkKademlia','1')
    parser.set('eMule','NetworkED2K','0')
with open(emuleinifile, 'w') as configfile:
    parser.write(configfile)
os.system(emuleappfile)
# Vuze
# verify vuze listening port != portgiven for emule and start vuze
vuzeconfigfile = os.environ['AppData']+'\\Azureus\\'+'azureus.config'
# vvv beginning and ending quotes are to compensate for Microsoft kludge
vuzeappfile = '"'+os.environ['ProgramFiles']+'\\Vuze\\azureus.exe'+'"'
vuzelistenport = portgiven
while vuzelistenport == portgiven:
    vuzelistenport = random.randint(49160, 65534)
# bdecode aszreus.config, set port and save
encodedconfig = open(vuzeconfigfile, 'rb').read()
mydecodedconfig=py3bencode.bdecode(encodedconfig)
mydecodedconfig['TCP.Listen.Port']=vuzelistenport
mydecodedconfig['UDP.Listen.Port']=vuzelistenport
mydecodedconfig['UDP.NonData.Listen.Port']=vuzelistenport
encodedconfig=py3bencode.bencode(mydecodedconfig)
configfile = open(vuzeconfigfile,'wb')
configfile.write(encodedconfig)
configfile.close()
os.system(vuzeappfile)
return True 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T16:32:22.473

不需要通过. **_** `setup.py`您可以简单地将`py3bencode.py`其放在与主脚本相同的目录中，然后像导入自己的 Python 模块一样导入它。

要检索 py3bencode，请按照以下说明操作：

*   获取[水银](https://www.mercurial-scm.org/)
*   通过命令行克隆 py3bencode 的 Mercurial 存储库：`hg clone https://bitbucket.org/rsnitsch/py3bencode`

您现在可以简单地复制`py3bencode.py`到与脚本相同的文件夹中。

如果您坚持，您也可以`setup.py`再次尝试该过程：

*   切换到 py3bencode 目录：`cd py3bencode`
*   `setup.py install`使用您的 Python 解释器运行，例如`C:\Python33\python.exe setup.py install`

* * *

一旦你有 py3bencode 供你使用，它应该很容易实现你想要的。只需解码 Vuze 的配置文件并让 Python 打印内容（提示：使用 Python 的`pprint`模块来获得可读的输出）。然后查找您要修改的值。

# c# - Windows 窗体应用程序的连接字符串

> ID：14834883
> 
> 赞同：-1
> 
> 时间：2013-02-12T14:32:22.063
> 
> 标签：c#, database-connection, connection-string

我正在创建 Windows 窗体应用程序。此应用程序将使用 Microsoft Access 数据库记录详细信息。我想知道如果我创建了可安装的安装文件，我如何为该数据库提供连接字符串。

目前我正在使用这样的。

```
string connString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\\Users\\Amrit\\Desktop\\Database.accdb ;Persist Security Info=False;"; 
```

我如何添加通用连接字符串，以便在安装时它可以在任何计算机上工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:39:33.893

它确实取决于您打算安装文件的位置。如果它要在一个一致的位置，你可以使用类似的东西（显然`Environment.SpecialFolder`根据需要改变）：

```
var source = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.LocalApplicationData), Database.accdb); 
```

然后使用`source`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T14:40:01.650

用它作为

```
string ConnectionString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + Directory.GetCurrentDirectory().ToString() +"Database.accdb ;Persist Security Info=False;" 
```

所以它将指向当前应用程序路径+文件名

# localization - 删除 liferay 主题中的本地化

> ID：14834886
> 
> 赞同：5
> 
> 时间：2013-02-12T14:32:41.830
> 
> 标签：localization, liferay-6, liferay-theme

我正在使用 Liferay 6.1 并开发了相同的主题。我的问题是当我加载主题时，head 部分包含巨大的链接，如下所示：

```
<link rel="alternate" hreflang="ar-SA" href="http://localhost/ar">
<link rel="alternate" hreflang="eu-ES" href="http://localhost/eu">
<link rel="alternate" hreflang="bg-BG" href="http://localhost/bg">
<link rel="alternate" hreflang="ca-AD" href="http://localhost/ca">
<link rel="alternate" hreflang="ca-ES" href="http://localhost/ca_ES">
<link rel="alternate" hreflang="zh-CN" href="http://localhost/zh">
<link rel="alternate" hreflang="zh-TW" href="http://localhost/zh_TW">
<link rel="alternate" hreflang="hr-HR" href="http://localhost/hr">
<link rel="alternate" hreflang="cs-CZ" href="http://localhost/cs">
<link rel="alternate" hreflang="da-DK" href="http://localhost/da">
<link rel="alternate" hreflang="nl-NL" href="http://localhost/nl">
<link rel="alternate" hreflang="nl-BE" href="http://localhost/nl_BE">
<link rel="alternate" hreflang="en-GB" href="http://localhost/en_GB">
<link rel="alternate" hreflang="et-EE" href="http://localhost/et">
<link rel="alternate" hreflang="fi-FI" href="http://localhost/fi">
<link rel="alternate" hreflang="fr-FR" href="http://localhost/fr">
<link rel="alternate" hreflang="gl-ES" href="http://localhost/gl">
<link rel="alternate" hreflang="de-DE" href="http://localhost/de">
<link rel="alternate" hreflang="el-GR" href="http://localhost/el">
<link rel="alternate" hreflang="iw-IL" href="http://localhost/iw">
<link rel="alternate" hreflang="hi-IN" href="http://localhost/hi">
<link rel="alternate" hreflang="hu-HU" href="http://localhost/hu">
<link rel="alternate" hreflang="in-ID" href="http://localhost/in">
<link rel="alternate" hreflang="it-IT" href="http://localhost/it">
<link rel="alternate" hreflang="ja-JP" href="http://localhost/ja">
<link rel="alternate" hreflang="ko-KR" href="http://localhost/ko">
<link rel="alternate" hreflang="lo-LA" href="http://localhost/lo">
<link rel="alternate" hreflang="nb-NO" href="http://localhost/nb">
<link rel="alternate" hreflang="fa-IR" href="http://localhost/fa">
<link rel="alternate" hreflang="pl-PL" href="http://localhost/pl">
<link rel="alternate" hreflang="pt-BR" href="http://localhost/pt">
<link rel="alternate" hreflang="pt-PT" href="http://localhost/pt_PT">
<link rel="alternate" hreflang="ro-RO" href="http://localhost/ro">
<link rel="alternate" hreflang="ru-RU" href="http://localhost/ru">
<link rel="alternate" hreflang="sr-RS" href="http://localhost/sr">
<link rel="alternate" hreflang="sr-RS-latin" href="http://localhost/sr_RS_latin">
<link rel="alternate" hreflang="sl-SI" href="http://localhost/sl">
<link rel="alternate" hreflang="sk-SK" href="http://localhost/sk">
<link rel="alternate" hreflang="es-ES" href="http://localhost/es">
<link rel="alternate" hreflang="sv-SE" href="http://localhost/sv">
<link rel="alternate" hreflang="tr-TR" href="http://localhost/tr">
<link rel="alternate" hreflang="uk-UA" href="http://localhost/uk">
<link rel="alternate" hreflang="vi-VN" href="http://localhost/vi"> 
```

我想删除不需要的语言。我希望删除这些链接，因为这不是 SEO 的好习惯。我想要一个主题的默认语言。我尝试添加`translations.disabled=true`portal-ext文件，但这没有用。

您的任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T08:38:08.030

您必须限制要使用的语言环境，将“locales”属性添加到 portal-ext.porterties。例如，要将其限制为英语和德语，您可以这样做

> 语言环境=en_US,de_DE

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-06T07:37:47.150

另见[官方 wiki 文档](http://www.liferay.com/community/wiki/-/wiki/Main/Languagedisplay+customization#section-Languagedisplay+customization-Setting+a+default+Language+and+default+Country)

我在这里引用它：

> 删除不需要的语言
> 
> 默认情况下，Liferay 支持以下所有语言（摘自 Liferay 4.3.3 的 portal.properties）：
> 
> > locales=ar_SA,ca_AD,ca_ES,zh_CN,zh_TW,cs_CZ,nl_NL,en_US,fi_FI,fr_FR,de_DE,el_GR,hu_HU,it_IT,ja_JP,ko_KR,fa_IR,pt_BR,ru_RU,es_ES,sv_SE,tr_TR,vi_VN
> 
> 如果我们只想支持英语、德语和西班牙语，我们只需删除不需要的语言环境，以便我们的语言环境值如下所示：
> 
> ```
> locales=en_US,de_DE,es_ES 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-15T08:10:06.357

portal-ext.properties 设置可以覆盖我的 Portal 设置`Control Panel > Settings > Display Settings > Available Languages`。我会说把它们放在那里是安全的。

此外，在 SEO 部分有一个每页选项来禁用那里的规范链接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-25T10:24:14.350

转到 web.xml 并在启动服务器后删除语言映射 url。

url--tomcat-7.0.42\webapps\ROOT\WEB-INF

# html - IFrame 事件在 HTML 中执行得很好，但在 HTA 中却没有

> ID：14834888
> 
> 赞同：2
> 
> 时间：2013-02-12T14:32:47.413
> 
> 标签：html, vbscript, hta

单击 iframe 内的按钮时，此 HTML 文件会显示消息对话框：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <script language="VBScript" type="text/vbscript">

      Sub load_me()
        frame.document.write "<input type='button' onclick='parent.message()'>"
      End Sub

      Sub message()
        MsgBox "Hi"
      End Sub

    </script>
  </head>

  <body>
    <iframe id="frame" onload="load_me"></iframe>
  </body>
</html> 
```

虽然与 HTA 文件相同的文档，但会引发错误`Error: Object doesn't support this property or method`：：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <title>Test</title>
    <HTA:APPLICATION
      APPLICATIONNAME="Test"
      ID="MyHTMLapplication"
      VERSION="1.0"/>

    <script language="VBScript">

      Sub load_me()
        frame.document.write "<input type='button' onclick='parent.message()'>"
      End Sub

      Sub message()
        MsgBox "Hi"
      End Sub

    </script>
  </head>

  <body bgcolor="white">
    <iframe id="frame" onload="load_me"></iframe>
  </body>
</html> 
```

为什么会这样，或者如何使用`onclick`HTA 中 iframe 按钮的事件执行父函数？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T14:45:44.760

利用：

```
<iframe id="frame" onload="load_me" application="yes"></iframe> 
```

请参阅[.HTA 简介](http://msdn.microsoft.com/en-us/library/ms536496%28v=vs.85%29.aspx)，**信任的力量：HTA 和安全部分**

# android - Android 中的 setVisibility(View.INVISIBLE) 不起作用

> ID：14834891
> 
> 赞同：0
> 
> 时间：2013-02-12T14:33:00.053
> 
> 标签：android, view, onclick, visible, invisible

两天来，我一直在尝试使该`setVisibility(View.INVISIBLE)`功能正常工作。但是如果我在模拟器中测试我的应用程序，它总是会崩溃。怎么了？（还有：视图`arg0`和视图之间`v`有什么区别`onClickListener`？）

```
public class SpielActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_spiel);

    final Button startbutton = (Button)findViewById(R.id.anfangsbutton);
    final TextView initCountdown = (TextView)findViewById(R.id.initcountdown);

    startbutton.setVisibility(View.VISIBLE);

   startbutton.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) { 
            startbutton.setVisibility(View.INVISIBLE);
             new CountDownTimer(3500, 1000) {

                 public void onTick(long millisUntilFinished) {
                     initCountdown.setText("" + millisUntilFinished / 1000);
                 }

                 public void onFinish() {
                     initCountdown.setText("");
                 }
              }.start();

        }
    });
    }

} 
```

这是 LogCat 数据：

```
02-12 14:18:30.147: W/dalvikvm(332): threadid=1: thread exiting with uncaught exception (group=0x40015560)
02-12 14:18:30.147: E/AndroidRuntime(332): FATAL EXCEPTION: main
02-12 14:18:30.147: E/AndroidRuntime(332): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.JodomStudios.cloudgame/com.JodomStudios.cloudgame.SpielActivity}: java.lang.ClassCastException: android.widget.ImageButton
02-12 14:18:30.147: E/AndroidRuntime(332):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
02-12 14:18:30.147: E/AndroidRuntime(332):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
02-12 14:18:30.147: E/AndroidRuntime(332):  at android.app.ActivityThread.access(ActivityThread.java:117)
02-12 14:18:30.147: E/AndroidRuntime(332):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
02-12 14:18:30.147: E/AndroidRuntime(332):  at android.os.Handler.dispatchMessage(Handler.java:99)
02-12 14:18:30.147: E/AndroidRuntime(332):  at android.os.Looper.loop(Looper.java:123)
02-12 14:18:30.147: E/AndroidRuntime(332):  at android.app.ActivityThread.main(ActivityThread.java:3683)
02-12 14:18:30.147: E/AndroidRuntime(332):  at java.lang.reflect.Method.invokeNative(Native Method)
02-12 14:18:30.147: E/AndroidRuntime(332):  at java.lang.reflect.Method.invoke(Method.java:507)
02-12 14:18:30.147: E/AndroidRuntime(332):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
02-12 14:18:30.147: E/AndroidRuntime(332):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
02-12 14:18:30.147: E/AndroidRuntime(332):  at dalvik.system.NativeStart.main(Native Method)
02-12 14:18:30.147: E/AndroidRuntime(332): Caused by: java.lang.ClassCastException: android.widget.ImageButton
02-12 14:18:30.147: E/AndroidRuntime(332):  at com.JodomStudios.cloudgame.SpielActivity.onCreate(SpielActivity.java:19)
02-12 14:18:30.147: E/AndroidRuntime(332):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
02-12 14:18:30.147: E/AndroidRuntime(332):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
02-12 14:18:30.147: E/AndroidRuntime(332):  ... 11 more 
```

这是xml布局

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/linearlayoutspiel"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/backgroundleiter"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/zeitzaehler"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:text="@string/countdown"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <Button
        android:id="@+id/menubutton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:text="@string/menu" />

    <Button
        android:id="@+id/contbutton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:text="@string/cont" />

    <ImageButton
        android:id="@+id/pausebutton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:background="#00000000"
        android:src="@drawable/closebutton" />

    <TextView
        android:id="@+id/initcountdown"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:text="@string/initcountdown"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textSize="40sp" />

    <ImageButton
        android:id="@+id/retrybutton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_toLeftOf="@+id/pausebutton"
        android:background="#00000000"
        android:src="@drawable/zeichnung" />

    <Button
        android:id="@+id/anfangsbutton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/menubutton"
        android:layout_centerHorizontal="true"
        android:layout_marginBottom="18dp"
        android:text="@string/startgame" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:42:41.083

您正在使用开始按钮作为**Button**并在 XML 中定义了 A **ImageButton**。请使它们相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T14:43:46.173

从日志：

```
02-12 14:18:30.147: E/AndroidRuntime(332): Caused by: java.lang.ClassCastException: android.widget.ImageButton 
```

您正在使用的检索按钮似乎是

```
final Button startbutton = (Button)findViewById(R.id.anfangsbutton); 
```

不是按钮，因此不是 ClassCastException。请验证您的布局 xml 并使用正确的演员表。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T14:38:49.940

`ImageButton`您的开始按钮在您的布局中定义为一个。您需要像这样更改代码：

```
final ImageButton startbutton = (ImageButton)findViewById(R.id.anfangsbutton); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T14:40:31.083

我认为您的应用程序也可能会崩溃，因为您不是从 UI 线程更新 UI。您使用计时器，它在单独的线程中运行。尝试将 initCountdown.setText 包装到帖子中：

```
initCountdown.post(new Runnable() {
public void run() {
initCountdown.setText("" + millisUntilFinished / 1000);
}
}); 
```

# c# - 在运行时将对象从一个 dll 传递到另一个

> ID：14834893
> 
> 赞同：0
> 
> 时间：2013-02-12T14:33:01.287
> 
> 标签：c#, runtime, .net-2.0

我有 2 个项目，在一个项目中，我有一个表单和一个具有不同信息的类，此信息仅在运行时获取，现在在另一个项目中，我有另一个表单，它将使用第一个类的对象来获取信息并把它放在表格里。

基本上我做了一些研究并尝试使用反射，但我发现的所有示例都不能正常工作（实际上根本没有工作）。

```
 Assembly a = Assembly.LoadFile("Server.GUI.LocalGUI.dll");
        object o = a.CreateInstance("ServerManager");
        Type t = o.GetType(); 
```

这是我试过的代码，不知道它是否正确......

我正在使用 .net 2.0

有没有人有关于如何在运行时使用另一个 dll 中一个对象的数据的工作示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:52:25.370

我有 2 个项目：`MyForm1`和`MyForm2`。参考 中的项目`MyForm1`。`MyForm2`填充`MyForm1`。创建`MyForm1`in的实例`MyForm2`并访问该方法及其值。

或者创建另一个`Library`项目。在其中公开一个静态变量。在两个 Forms 项目中引用这个库。分配一些值`MyForm1`并访问 中的相同属性`MyForm2`。

但是，如果您真的希望您的代码成为托管代码，请尝试学习和实现[MVP](http://www.google.co.in/#hl=en&tbo=d&output=search&sclient=psy-ab&q=mvp+architecture+in+.net&oq=MVP&gs_l=hp.3.1.0l4.1456.1767.0.4181.3.3.0.0.0.1.625.1398.3-2j0j1.3.0.les;..0.0...1c.1.2.hp.R1JcOI_mgpk&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.&bvm=bv.42261806,d.b2I&fp=7d19122e3e84b4fa&biw=1280&bih=962)。它可能会给你一种新的方式来看待你的问题的解决方案。

您甚至可以在同一个项目中创建这两种形式。在单独的库中处理数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T14:47:03.230

如果您想要这样做 - 您可以这样做：

```
Assembly a = Assembly.LoadFile("Server.GUI.LocalGUI.dll");
dynamic o = a.CreateInstance("ServerManager");
o.Method(); 
```

但我不推荐这个，除非你绝对必须这样做。使用`dynamic`关键字可以是快捷方式 - 但有时是您不想去的地方的快捷方式..

# css - 悬停在下拉菜单项上时父菜单项的活动状态

> ID：14834899
> 
> 赞同：0
> 
> 时间：2013-02-12T14:33:23.780
> 
> 标签：css, hover

我已经阅读了一些针对此问题的解决方案，但没有一个答案有助于解决我的特定问题。在我正在开发的网站上，我在“最新消息”部分有一个带有下拉菜单的菜单。

[http://www.staging.alexanderdzine.com.au/golden-sands-tavern-V2/](http://www.staging.alexanderdzine.com.au/golden-sands-tavern-V2/)

当我将鼠标悬停在下拉列表 li 上时，我希望箭头 bg 保持活动状态，但无法弄清楚。

HTML

```
<div class="Weekday">
<dl class="dropdown">
<dt id="one-ddheader" onmouseover="ddMenu('one',1)" onmouseout="ddMenu('one',-1)">Monday</dt>
<dd id="one-ddcontent" onmouseover="cancelHide('one')" onmouseout="ddMenu('one',-1)">
<ul>
<li><a href="../html/whats-on.html"><img src="../images/backgrounds/test.jpg" width="230" height="280" alt="" title="" /></a></li>
</ul>
</dd>
</dl>
</div> <!-- end Weekday div --> 
```

CSS

```
.dropdown {float:left;}
.dropdown dt{width:114px;padding:0;font-weight:bold;cursor:pointer;line-height:50px;text-align:center;color:#193540;font-size:14px;letter-spacing:1px;text-transform:uppercase;}
.dropdown dt:hover {background:url(../images/backgrounds/bkg_nav-dropdown.png) center no-repeat;}
.dropdown dd {position:relative;left:-135px;overflow:hidden;width:250px;display:none;z-index:200;opacity:0;right:0;}
.dropdown ul {width:250px;list-style:none;}
.dropdown li {display:inline}
.dropdown a, .dropdown a:active, .dropdown a:visited{display:block;background:#6ab7d3;width:250px !important;height:300px !important;}
.dropdown img{background:#6ab7d3;padding:10px;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T14:50:56.820

这在 CSS 中可能无法实现，大多数人使用 jQuery 来处理这类事情，但也许你可以尝试向 .Weekday 添加悬停功能，因为当你悬停在子菜单上时，它的悬停状态会持续存在。

如果你想用 jQuery 实现你想要的功能，我建议你阅读这篇文章的答案：[change background of parent div on hover](https://stackoverflow.com/questions/6306738/change-background-of-parent-div-on-hover)

此外，[此](http://www.o2.sk/)页面使用我提到的第一种方法——没有任何 jQuery。

# asp.net - Databinder.Eval 不显示所有数据

> ID：14834908
> 
> 赞同：1
> 
> 时间：2013-02-12T14:33:52.500
> 
> 标签：asp.net, ascx

我的标记：<%#DataBinder.Eval(Container.DataItem, "summary")%>

运行它以查看在 Web 表单上检索到的摘要中的数据。当您收到包含数据的电子邮件时，它会显示所有内容，但如果您在网页上查看提交的表单，它会切断它。

知道如何让它显示完整信息。谢谢你。

附言。它在一个 ascx 文件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:36:32.400

那是因为您可能在输入中的值周围缺少引号。你需要这样的形式：

```
<input type="hidden" name="summary" value="<%#DataBinder.Eval(Container.DataItem, "summary")%>" /> 
```

如果没有引号，则该值确实会在第一个空格处被削减。

# objective-c - Objective-C 委托不兼容类型

> ID：14834911
> 
> 赞同：0
> 
> 时间：2013-02-12T14:34:00.580
> 
> 标签：objective-c, xcode, pdf

我正在使用[http://www.vfr.org/](http://www.vfr.org/)、pdf 查看器，并尝试添加一个按钮以在 IBOOK 中打开 PDF。

我向它添加了按钮和操作，但是当我想用这个 pdf 打开 ibooks 应用程序时，我卡住了。

我尝试了 2 个解决方案：

1.  按钮点击动作：

    ```
    NSURL *fileURL = document.fileURL;
    NSString *fileName = document.fileName; // Document
    [[UIApplication sharedApplication] openURL:fileURL]; 
    ```

它会打开 IBOOKS，但永远不会加载 PDF。

我假设 URL 格式可能是错误的我什至尝试对 PDF URL 进行硬编码，例如：

```
NSString *stringURL = @"itms-books://linktopdf.pdf";     
NSURL *url = [NSURL URLWithString:stringURL];
[[UIApplication sharedApplication] openURL:url]; 
```

但同样的结果。

2）按钮点击动作：

```
 NSURL *fileURL = document.fileURL;
    NSString *fileName = document.fileName; // Document
    UIDocumentInteractionController *docController = [[UIDocumentInteractionController alloc] init];
    docController = [UIDocumentInteractionController interactionControllerWithURL:fileURL];
    docController.delegate = self; 
```

但是我在尝试委派的地方有一个警告： `docController.delegate = self;`

*`assigning to id UIDocumentInteractionControllerDelegate from Incompatible ReaderViewController`*

有人可以帮助我使其至少在其中一种解决方案中起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:41:38.540

*ReaderViewController*在头文件中是否有这种行：`@interface ReaderViewController : NSObject < UIDocumentInteractionControllerDelegate >`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T14:46:46.930

你的类必须符合`UIDocumentInteractionControllerDelegate` 协议，所以在你的**.h 文件**中让它看起来像

```
@interface ReaderViewController : PerantClass <UIDocumentInteractionControllerDelegate>
{

...

} 
```

然后编译器会知道你的类符合那个协议。当然，您仍然需要实现所需的方法。

还检查此[链接 - 1](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIDocumentInteractionController_class/Reference/Reference.html)和[链接 - 2。](http://disanji.net/iOS_Doc/#documentation/FileManagement/Conceptual/DocumentInteraction_TopicsForIOS/Articles/PreviewingandOpeningItems.html)

# php - php比较两个单选按钮中的值

> ID：14834916
> 
> 赞同：1
> 
> 时间：2013-02-12T14:34:19.160
> 
> 标签：php, html

这是一组单选按钮

```
<input type="radio" name="image" id="100" value="a"/>
<input type="radio" name="image" id="100" value="b"/>
<input type="radio" name="image" id="100" value="c"/>
<input type="radio" name="image" id="200" value="d"/>
<input type="radio" name="image" id="200" value="e"/>
<input type="radio" name="image" id="300" value="f"/>
<input type="radio" name="image" id="300" value="g"/>
<input type="radio" name="image" id="400" value="h"/> 
```

等等...

这是另一个单选按钮集

```
<input type="radio" name="number" value="100"/>
<input type="radio" name="number" value="200"/>200
<input type="radio" name="number" value="300"/>300
<input type="radio" name="number" value="400"/>400
<input type="radio" name="number" value="500"/>500
<input type="radio" name="number" value="600"/>600 
```

我的问题是如何在 php 中将 value="100" 的值与 id="100" 的值进行比较

我想做一个比较，但是对于 id = 100 的字段，我的值为 abcd .. 所以我不能为其赋值 = 100 因为我将其保存在数据库中意味着.. 还有其他 id=100 的字段，但它们值应该不同，否则在将它们发送到数据库后我无法识别它们仍然我必须对两者进行比较..而且服务器端也是如此，我有什么选择？

更详细的解释.. 有两组单选按钮.. 一组有值.. 在其他组中有与这些值相关的图像.. 当用户点击一组值时......并且用户点击一组图像，因此 php 应将该图像与值匹配。如果用户单击 100 作为值，然后他单击 id 200 数据库下的图像，则不允许它进入并给他一些错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T15:55:28.643

抱歉 不得不看看你在说什么。帮助编辑此内容以了解您的要求，“应将该图像与值匹配”

```
<input type="radio" name="image" class="100" value="a_100"/>
<input type="radio" name="image" class="100" value="b_100"/>
<input type="radio" name="image" class="100" value="c_100"/>
<br>
<input type="radio" name="number" value="100"/>
<input type="radio" name="number" value="200"/>
<input type="radio" name="number" value="300"/>

<?php

    $image = strstr($_POST['image'],'_'); 
    $number = '_'.$_POST['number'];

    if($image == $number) {
        //Do something
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T16:04:49.927

问题是寻找比较 PHP 中的两个字段。大概这意味着您想在发布表单时检查它们。

这意味着您只能使用通过 POST 发送的字段部分——即字段`name`和`value`. PHP 永远不会看到`id`任何字段的 ，也不会看到`class`HTML 代码中除`name`和之外的任何其他属性`value`。

因此，评论中关于是否使用的讨论在`id`某种程度上是一个没有实际意义的问题——即使对于您的 HTML 代码而言，一般来说了解它是一个好点，但无论如何您都不能真正使用其中一个`id`或`class`这里，因为 PHP 会永远见不到他们。

你需要采取完全不同的方法。

[问题编辑后编辑]

将`100`or`200`等​​添加到`value`单选`image`按钮的 中，如下所示：

```
<input type="radio" name="image" value="a_100"/>
<input type="radio" name="image" value="b_100"/>
<input type="radio" name="image" value="c_100"/>
<input type="radio" name="image" value="d_200"/>
<input type="radio" name="image" value="e_200"/>
<input type="radio" name="image" value="f_300"/>
<input type="radio" name="image" value="g_300"/>
<input type="radio" name="image" value="h_400"/> 
```

（`number`单选按钮集与您的问题保持不变）

然后，您可以在 PHP 中阅读它，如下所示：

```
$number = $_POST['number'];
list($imgNumber, $imgValue) = explode('_',$_POST['image']); 
```

您现在可以`$number`与进行比较`$imgNumber`。

希望有帮助。

不过，值得提出一个后续问题：您想在这里实现什么目标？这是一个验证练习吗？即，您在哪里检查用户是否选择了与他选择的`image`选项相匹配的`number`选项？如果这就是您正在做的事情，您可能会发现使用 Javascript 过滤在他们选择选项时可用的选项更加用户友好，`number`这样`image`单选按钮集仅显示对选定的有效的选项`number`。

这将是一个完全不同的问题，所以我不会在这里详细介绍，但我建议如果你这样做，它可能是一种对用户更友好的做事方式。

# c# - 向 Web 服务发送文本时字符返回换行符丢失

> ID：14834921
> 
> 赞同：0
> 
> 时间：2013-02-12T14:34:37.797
> 
> 标签：c#, web-services

我有一个 C# Web 服务（非常基本，用 VS 制作）和一个 C# 客户端。

Web 服务运行 SQL Server 存储过程。

发送到 Web 服务的文本中的 CRLF 在到达存储过程时会丢失。

令人讨厌的是，我无法调试或更改服务器。

我可以对客户做些什么，让它以不丢失的方式发送 CRLF？

# .net - GoDaddy Web.Config URL 重写不起作用

> ID：14834922
> 
> 赞同：0
> 
> 时间：2013-02-12T14:34:38.020
> 
> 标签：.net, debugging, url-rewriting, web-config

我有这个网络配置：

```
<?xml version="1.0"?>

<configuration>
  <configSections>
  </configSections>
  <system.web>
    <compilation debug="true" targetFramework="4.0"/>
    <!--maxRequestLength = maximum upload size =- 4096KB = 4MB-->
    <httpRuntime maxRequestLength="409600000"/>
  </system.web>

  <system.webServer>
    <rewrite>
      <rules>
        <!--The following rule will only work when published-->
        <rule name="Construction" stopProcessing="true">
          <match url="Construction\.aspx" negate="true"/>
          <conditions>
            <!-- dont ignore my own ip -->
            <add input="{REMOTE_ADDR}" pattern="XXX.XXX.XXX.XXX" negate="true"/>
          </conditions>
          <action type="Redirect" url="Construction.aspx" redirectType="Found"/>
        </rule>
      </rules>
    </rewrite>
  </system.webServer>

</configuration> 
```

它适用于我本地机器上的 IIS，但在其他机器上，我最终遇到以下问题：

1.  `rewrite`包含该部分时出现 500 错误。当我删除它时，一切正常。
2.  我无法将调试输出打印到屏幕上。

它出什么问题了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T14:04:30.423

我已经按照@CohenA[详细的 500 错误消息 ASP + IIS 7.5](https://stackoverflow.com/questions/2640526/detailed-500-error-message-asp-iis-7-5)的回答来帮助了解 500 错误的完整详细信息。我只是把它注释掉，直到我遇到错误，所以我不必记住它。

* * *

您是否查看过 ReWrite 问题的[答案？](https://stackoverflow.com/questions/4410067/iis-url-rewrite-and-web-config-question)不确定你想用 ReWrite 做什么，但也许你想使用规则 #2

> < match url="^Construction$" />

或者，您是否错过了重定向上的前导 / ？

> < action type="Redirect" url="/Construction.aspx" redirectType="Found"/>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-05T20:53:18.350

我只添加到 <configuration> 标签：

```
<configSections>
      <sectionGroup name="system.webServer">
           <sectionGroup name="rewrite">
                <section name="rewriteMaps" overrideModeDefault="Allow" />
                <section name="rules" overrideModeDefault="Allow" />
           </sectionGroup>
     </sectionGroup>
</configSections> 
```

所以现在它不会出错，但它也不会读取重写

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T14:42:36.437

在我使用的情况下`rewrite`，我不会在匹配的 url 属性中转义句点。你试过`<match url="^Construction.aspx$" negate="true"/>`吗？

诚然，这是一个延伸，因为我已经有一段时间没有为此研究文档了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-09T14:33:57.387

你可以试试下面的配置。这具有重写块，它将到达文件夹的请求重定向到 index.php 页面，并且还将输出详细错误而不是自定义/通用错误页面。这是在托管 IIS 8.5 的 Godaddy 窗口上测试的。希望这可以帮助！

```
<configuration>
 <system.webServer>
    <httpErrors errorMode="Detailed"></httpErrors>
    <asp scriptErrorSentToBrowser="true"></asp>
    <rewrite>
     <rules>
      <rule name="your rule" stopProcessing="true">
       <match url="(.*)$"  ignoreCase="false" />
       <conditions>        
        <add input="{REQUEST_FILENAME}" matchType="IsFile" ignoreCase="false" negate="true" />        
        <add input="{REQUEST_FILENAME}" matchType="IsDirectory" ignoreCase="false" negate="true" />        
       </conditions> 
       <action type="Rewrite" url="index.php?request={R:1}"  appendQueryString="true" />
      </rule>
     </rules>
    </rewrite>
  </system.webServer>
  <system.web>
    <customErrors mode="Off"></customErrors>
    <compilation debug="true"></compilation>
  </system.web>
</configuration> 
```

# weblogic - WebLogic 服务器 - 大文件传输

> ID：14834927
> 
> 赞同：0
> 
> 时间：2013-02-12T14:34:55.850
> 
> 标签：weblogic

我可能在这里提供了完全错误的信息，但目前我们有点不确定在哪里寻找问题。我们有一个在 WebLogic 上运行的服务器，我不确定哪个版本。

我们的网站有一个客户需要的安装程序，可以运行大约 15 MB。通常，这个下载非常好，但我们最近在浏览器报告它完成的下载中发现了问题，但安装程序无法打开 - 文件大小似乎也不是预期的，比如下载刚刚被切断。这些问题归结为用户连接不稳定的情况，例如笔记本电脑中的 3G 卡。

它似乎主要发生在 Mac 上，但这似乎是因为 mac .dmg 文件比 Windows 可执行文件大得多。尽管如此，根据我对网络协议的了解，参差不齐的网络不应该导致我们看到的具体问题。

目前，我们正在调试传输的几个层，比如我们的防火墙，但由于我对 Weblogic 的了解很少，我有点好奇服务器配置本身是否可能缺少某些东西。

不幸的是，我不确定我是否能够在这里发布配置文件——我很确定目前没有专门为安装程序目录创建的 servlet 规则——但我希望这里的人至少能认出这一点类型的问题，并能够指出我正确的方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T19:10:42.780

检查您是否设置了任何 maxpostsize 限制。如果在日志文件中看到任何套接字超时错误，请检查失败的响应。如果您使用的是代理，请检查主要与套接字相关的错误。

当防火墙端、WLS 端、前端代理（如 apache 端）的 tcp 套接字超时时，可能会出现此类问题。

我认为在 WLS 中几乎没有其他设置，例如 http 连接超时。从管理控制台服务器协议常规选项卡或 http 选项卡检查。

# firefox - 使用 Addon SDK 构建无需重启的 Firefox 扩展

> ID：14834932
> 
> 赞同：1
> 
> 时间：2013-02-12T14:35:18.210
> 
> 标签：firefox, firefox-addon, firefox-addon-sdk

我正在使用 Firefox Addon SDK ( [https://github.com/mozilla/addon-sdk](https://github.com/mozilla/addon-sdk) ) 的最新版本来构建我的扩展。此外，我正在使用 Erik Vold 的工具栏按钮包 ( [https://github.com/erikvold/toolbarbutton-jplib](https://github.com/erikvold/toolbarbutton-jplib) ) 在顶部工具栏中显示扩展按钮。运行`cfx xpi`和安装扩展程序时，它告诉我一切正常（无需重新启动或任何需要），但工具栏按钮仅在我实际重新启动浏览器时显示。

我怎样才能让它真正无重启？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T21:30:26.153

使用该`moveTo`功能在安装时强制插入工具栏按钮。我相信这是代码中的错误，但我没有问过 Erik。

像这样的东西会起作用：

```
var ToolbarButton = require('toolbarbutton').ToolbarButton;
var tbb = ToolbarButton(options);
tbb.moveTo(options); 
```

# windows - 在 Windows 命令行上运行 raco

> ID：14834933
> 
> 赞同：3
> 
> 时间：2013-02-12T14:35:21.967
> 
> 标签：windows, powershell, scheme, racket, cmd

我正在尝试在 Windows 平台上制作一个独立的 Racket 可执行文件。如何从 Windows 命令行运行 raco？我不熟悉它。

如果我使用文档并将以下命令输入`cmd.exe`：

> raco exe --gui main.rkt

`cmd.exe`告诉我：

> 'raco' 不是内部或外部命令、可运行程序或批处理文件。

替换`raco.exe`告诉我同样的事情。

我也尝试输入：

> 'C:\Program Files\Racket\raco.exe' exe --gui .\main.rkt

进入`powershell`，它给了我一个`Unexpected token 'exe' in expression or statement`错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T14:49:19.750

对于第一个问题：您需要将可执行文件的路径添加到 Windows 的 %PATH% （环境变量）。对于第二个问题：检查`exe`命令的正确语法和/或“--gui”修饰符，它们被滥用了。例如，在解决第一个问题后试试这个：

```
$ raco.exe exe main.rkt 
```

以上将创建一个可执行`main.exe`文件。

# single-sign-on - OpenAm：使用 RESTful API 实现 SSO

> ID：14834936
> 
> 赞同：0
> 
> 时间：2013-02-12T14:35:30.883
> 
> 标签：single-sign-on, restful-authentication, openam, opensso

我对使用 RESTful API 实现 SSO 感到有点困惑。到目前为止，我已经使用 RESTful API 进行身份验证并获取`token-id`.

应该如何实施 SSO？要使令牌得到验证，它必须作为 cookie 或其他东西保存在某个地方。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T11:01:04.447

如果您想自己进行 SSO，您必须模仿 OpenAM 的使用 cookie 的 SSO 会话跟踪机制。

# c# - 如何在“CalendarExtender”的第二个日历中自动选择下一个日期

> ID：14834939
> 
> 赞同：1
> 
> 时间：2013-02-12T14:35:53.770
> 
> 标签：c#, asp.net

我的表格上有 6 个日历

```
DateFrom1 and DateTo1
DateFrom2 and DateTo2
DateFrom3 and DateTo3 
```

我的日历总是使用今天日期打开，但是，我不需要它。

我希望当我的用户从 DateFrom1（日历）中选择 20/2/2013 并且之后当我的用户单击 DateTO1（日历）时，它必须在打开的日历中自动选择 21/2/2013。

如果他点击 DateFrom2（日历），它应该在日历视图中显示自动选择（22/2/2013）。

我怎样才能在 asp.net 中做到这一点？

注意：我正在使用`CalendarExtender`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:43:10.867

您可以使用`onClientShown`javascript事件通过扩展器的`To`-function根据-date设置-date ：`From``set_selectedDate`

```
<cc1:calendarextender ID="DateTo1"
    OnClientShown="clientShown" ... 
```

例如：

```
<script type="text/javascript">
    function clientShown(sender, args) {
        var extender= $find('DateFrom1');
        sender.set_selectedDate(extender._selectedDate);
    }
</script> 
```

# python - 在运行时决定基类

> ID：14834949
> 
> 赞同：1
> 
> 时间：2013-02-12T14:36:29.683
> 
> 标签：python, oop, class

我想做这样的事情：

```
class A:

    def methodA(self):
        return 5

class B:
    def methodB(self):
        return 10

class X(...):

    def __init__(self, baseclass):
        if baseclass =='A' : derive X from A
        elif baseclass == 'B' : derive X from B
        else: raise Exception("Not supported baseclass %s!" % (baseclass))

    def methodX(self):
        return 42

X('A').methodA() # returns 5
X('A').methodX() # returns 42
X('A').methodB() # methodB not defined
X('B').methodB() # returns 10
X('B').methodX() # returns 42
X('A').methodA() # methodA not defined 
```

我该如何实施？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T17:54:14.833

如果要添加`methodX`到现有类，可以考虑多重继承：

```
class A:
    def methodA(self):
        return 5

class B:
    def methodB(self):
        return 10

class X():
    @classmethod
    def new(cls, baseclass):
        if baseclass == A:
            return AX()
        elif baseclass == B:
            return BX()
        else: raise Exception("Not supported baseclass %s!" % str(baseclass))

    def methodX(self):
        return 42

class AX(A, X):
    pass

class BX(B, X):
    pass 
```

您可以添加 args 和 kwargs`X.new`并将它们传递给特定的构造函数。这是您的测试的输出（我更正了您问题中的最后一个）：

```
>>> ax = X.new(A)
>>> ax.methodA() # returns 5
5
>>> ax.methodX() # returns 42
42
>>> ax.methodB() # methodB not defined
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: AX instance has no attribute 'methodB'
>>> bx = X.new(B)
>>> bx.methodB() # returns 10
10
>>> bx.new(B).methodX() # returns 42
42
>>> bx.new(B).methodA() # methodA not defined
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: BX instance has no attribute 'methodA' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T14:39:43.003

您应该定义两个类`X`和`Y`，以及一个工厂方法来实例化 X 或 Y，具体取决于参数。

通常，您尝试实现的行为有些令人困惑。当您创建一个实例（就是这样`X(...)`做的）时，您应该得到一个 的实例`X`，并且一个类的实例应该具有相同的属性。这是类存在的主要原因之一。

例子：

```
class A:
    def methodA(self):
        return 5

class B:
    def methodB(self):
        return 10

def x(class_name):
    name2class = {"A":A, "B":B}
    return name2class[class_name]()

for name in ["A","B","C"]:
    instance = x(name)
    print name, instance 
```

将打印

```
A <__main__.A instance at 0x022C8D50>
B <__main__.B instance at 0x022C8DF0>
Traceback (most recent call last):
  File ".../14834949.py", line 21, in <module>
    instance = x(name)
  File ".../14834949.py", line 18, in x
    return name2class[class_name]()
KeyError: 'C' 
```

# php - 如何从另一个数据库中提取单个列？

> ID：14834951
> 
> 赞同：0
> 
> 时间：2013-02-12T14:36:35.553
> 
> 标签：php

即使我更改`$_GET`变量，为什么这个条件也会过去？

我有这个代码

```
elseif(isset($_GET['results']) && $_GET['results'] == 'reorder' && 
isset($_GET['sort_column']) && $_GET['sort_column'] != '' && isset($_GET['sort_order']) 
&& $_GET['sort_order'] != '' && $_GET['sort_order'] == 'asc' 
|| $_GET['sort_order'] == 'desc') { /*rest goes here*/ } else {redirect} 
```

链接返回这样

```
http://localhost/system/results.php?script_id=2&results=reorder&sort_column=supplier_address&sort_order=desc 
```

但是，当我将其更改`sort_column=supplier_address`为例如 `sorcodsalumn=supplier_address`它不会重定向，而是继续进行时，知道为什么吗？但是，如果我只是删除几个字母并且不替换为其他内容，它会重定向......

如果我正在使用这个`isset($_GET['sort_column']`并且正在修改`sort_column`为其他东西，怎么会仍然通过这个条件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T14:40:57.670

基本 PHP[运算符优先级](http://php.net/manual/en/language.operators.precedence.php)...`&&`计算 before `||`，因此您的整个语句归结为：

```
(x && y && z && ....) || ($_GET['sort_order'] == 'desc') 
```

您需要简化 if()，添加一些`()`以强制执行您自己的评估顺序，然后事情应该会开始好一些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T14:41:56.140

您的 AND 和 OR 需要正确括起来。

```
else if (isset($_GET['results']) && 
         $_GET['results'] == 'reorder' && 
         isset($_GET['sort_column']) &&
         $_GET['sort_column'] != '' &&
         isset($_GET['sort_order']) && 
         $_GET['sort_order'] != '' &&
         ($_GET['sort_order'] == 'asc' || $_GET['sort_order'] == 'desc')) 
 { 
     /*rest goes here*/ 
 } else {
     redirect
 } 
```

更具体地说，你的最后一个 || 需要自己的括号，如上所示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T14:42:41.900

你需要在你的 || 周围加上一个括号 （或）这样的声明：

```
elseif(isset($_GET['results']) && $_GET['results'] == 'reorder' && 
isset($_GET['sort_column']) && $_GET['sort_column'] != '' && isset($_GET['sort_order']) 
&& $_GET['sort_order'] != '' && ($_GET['sort_order'] == 'asc' 
|| $_GET['sort_order'] == 'desc')) { /*rest goes here*/ } else {redirect} 
```

否则，只要 sort_order 设置为“desc”，您的语句就会返回 true。

# java - 尝试将视频上传到 YouTube 时，YouTubeService 使我的 Android 应用程序崩溃

> ID：14834952
> 
> 赞同：1
> 
> 时间：2013-02-12T14:36:34.977
> 
> 标签：java, android, windows, upload, youtube-api

我尝试使用 YouTubeService 连接到 Youtube 并上传视频，但如果它到达 YouTubeService(Client_ID,Developer_Code) 就会崩溃

我从这个主题得到了一些代码： [视频在 youtube、Android 上上传时旋转](https://stackoverflow.com/questions/11256455/video-is-rotated-when-upload-on-youtube-android)

```
YouTubeService service = new YouTubeService(Client_ID,Developer_key);
    try{
        service.setUserCredentials("bla@bla.com", "test1234");
    } catch (AuthenticationException ex){
        Log.e("AuthenticationError",":"+ex.getMessage());
        return;
    } 
```

我从产品仪表板获得了开发人员密钥，但我不太确定客户端 ID 是什么（我在某处读到它可以是您喜欢的字符串，但我从产品仪表板上选择了应用程序名称）。

代码的其余部分：

```
File videoFile = new File(mSharedPreferences.getString("output_file", ""));
    if(!videoFile.exists()){
        Log.e("FileUploadErr","FileNotFound");
        return;
    }

    String mimeType = "video/*";
    String videoTitle = "name";
    VideoEntry newEntry = new VideoEntry();
    YouTubeMediaGroup mg = newEntry.getOrCreateMediaGroup();
    mg.addCategory(new MediaCategory(YouTubeNamespace.CATEGORY_SCHEME,"Travel"));
    mg.setTitle(new MediaTitle());
    mg.getTitle().setPlainTextContent(videoTitle);
    mg.setKeywords(new MediaKeywords());
    mg.getKeywords().addKeyword("Travel");
    mg.setDescription(new MediaDescription());
    mg.getDescription().setPlainTextContent(videoTitle);
    MediaFileSource ms = new MediaFileSource(videoFile,mimeType);
    newEntry.setMediaSource(ms);
    try{
        VideoEntry createdEntry = service.insert(new URL("http://uploads.gdata.youtube.com/feeds/api/users/default/uploads"), newEntry);      
    } catch(ServiceException se){
        Log.e("UploadVideo",":" + se.getMessage());         
    } catch (MalformedURLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

以下是错误：

```
 02-12 15:31:29.492: E/AndroidRuntime(10012): FATAL EXCEPTION: main
   02-12 15:31:29.492: E/AndroidRuntime(10012): java.lang.IllegalStateException: Could not execute method of the activity
   02-12 15:31:29.492: E/AndroidRuntime(10012):     at android.view.View$1.onClick(View.java:2336)
   02-12 15:31:29.492: E/AndroidRuntime(10012):     at android.view.View.performClick(View.java:2731)
   02-12 15:31:29.492: E/AndroidRuntime(10012):     at android.view.View$PerformClick.run(View.java:9387)
   02-12 15:31:29.492: E/AndroidRuntime(10012):     at android.os.Handler.handleCallback(Handler.java:587)
   02-12 15:31:29.492: E/AndroidRuntime(10012):     at android.os.Handler.dispatchMessage(Handler.java:92)
   02-12 15:31:29.492: E/AndroidRuntime(10012):     at android.os.Looper.loop(Looper.java:130)
   02-12 15:31:29.492: E/AndroidRuntime(10012):     at android.app.ActivityThread.main(ActivityThread.java:3694)
   02-12 15:31:29.492: E/AndroidRuntime(10012):     at java.lang.reflect.Method.invokeNative(Native Method)
   02-12 15:31:29.492: E/AndroidRuntime(10012):     at java.lang.reflect.Method.invoke(Method.java:507)
   02-12 15:31:29.492: E/AndroidRuntime(10012):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
   02-12 15:31:29.492: E/AndroidRuntime(10012):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
   02-12 15:31:29.492: E/AndroidRuntime(10012):     at dalvik.system.NativeStart.main(Native Method)
   02-12 15:31:29.492: E/AndroidRuntime(10012): Caused by: java.lang.reflect.InvocationTargetException
   02-12 15:31:29.492: E/AndroidRuntime(10012):     at java.lang.reflect.Method.invokeNative(Native Method)
   02-12 15:31:29.492: E/AndroidRuntime(10012):     at java.lang.reflect.Method.invoke(Method.java:507)
   02-12 15:31:29.492: E/AndroidRuntime(10012):     at android.view.View$1.onClick(View.java:2331)
   02-12 15:31:29.492: E/AndroidRuntime(10012):     ... 11 more
   02-12 15:31:29.492: E/AndroidRuntime(10012): Caused by: java.lang.VerifyError: com.google.gdata.client.media.MediaService
   02-12 15:31:29.492: E/AndroidRuntime(10012):     at com.atino.bla.ytUpload.uploadToYoutube(ytUpload.java:111)
   02-12 15:31:29.492: E/AndroidRuntime(10012):     at com.atino.bla.ytUpload.testMethode(ytUpload.java:58)
   02-12 15:31:29.492: E/AndroidRuntime(10012):     ... 14 more 
```

有人知道如何解决这个问题吗？

# java - JPA 中的乐观锁是什么？

> ID：14834964
> 
> 赞同：5
> 
> 时间：2013-02-12T14:37:10.233
> 
> 标签：java, jakarta-ee, jpa

我是 JPA 的新手。我归结为这个注释`@Version`。在此注释的文档中，它说：

> “此注解指定实体类的版本字段或属性，作为其乐观锁值。版本用于确保执行合并操作时的完整性和乐观并发控制。”

乐观锁是什么意思，它实际上与这个注解有什么关系？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T14:48:00.907

长话短说...

带有注释字段的实体的每条记录`@Version`都标记有类似 SVN 中的版本。每当通过提交（和刷新！）事务更新实体时，检查确保您当前实体的版本和数据库中的条目匹配。此检查失败会导致`OptimisticLockException`, 因为在当前操作之前有人对该注册表进行了更改。

乐观是基于以下概念

> “我不需要锁定这个条目，没有人会碰它”

而悲观锁实际上锁定了给定条目上的某些操作（如 READ 或 WRITE），假设

> “有人会在我工作时尝试更新此实体”

# php - ajax 变量到 php wordpress

> ID：14834967
> 
> 赞同：0
> 
> 时间：2013-02-12T14:37:20.120
> 
> 标签：php, mysql, wordpress, jquery

获取变量“value”的值

```
 jQuery.validator.addMethod("ordrNum",function(value,element){
     var isExist=false;
    $.ajax({
        type : "POST",
        async: false,
        data : "action=" + value,
        url  : ajaxurl,
        dataType:"json",
        success: function (data) {
    //  document.writeln("test");
    //alert(data["order_no"]);
        //console.log(data["order_no"]);
        //   if (data["order_no"] >0) {
            //  isExist=true;
        //  } 
        }
    });
    //console.log(isExist);

    return isExist;//true;

},"This order number does not exist"); 
```

这是在我的 wordpress 插件下的 validateForm.js 中。我想获得通过动作传递的“VALUE”的值。我想将其传输到数据库以检查是否存在现有数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T14:51:53.700

“数据”设置必须设置如下：

```
$.ajax({
   ....
   data : {name:value},
   ...
}); 
```

您不使用 = 符号。

在你的情况下，它将是

```
data : {action:value}, 
```

# android - 具有拉伸复合可绘制对象的固定宽度 TextView

> ID：14834968
> 
> 赞同：5
> 
> 时间：2013-02-12T14:37:32.320
> 
> 标签：android, layout, textview, compound-drawables

我正在尝试实现以下布局：固定宽度的 TextView 与其父级的左侧对齐，其中的文本与该 TextView 的右侧对齐（这就是为什么固定宽度，可以用其他方式完成吗？）和父级的其余部分填充有可绘制的（简单线）。像这样：![截屏](../Images/36caedfb6dc1b3993afd85fe5b6bfb48.png)

这是一个 ListView 包含 2 种类型的行，行的布局非常简单 - 带有 TextView 和 ImageView 的 LinearLayout（如果需要，我可以稍后发布确切的代码）。而且我收到一个警告，它可以用具有复合可绘制对象的单个 TextView 替换。

我完全支持优化，所以我真的很努力地听从了这个建议。不幸的是，我无法得到相同的结果——该行要么被限制为 TextView 的宽度，要么文本与 ListItem 的右侧对齐，现在到固定位置。

我错过了什么吗？

**编辑：**显然这实际上是不可能的，因为还有一些其他的复杂性（drawable现在是一个level-list drawable，它并不总是一条线，有时它有一个我必须设置的非固定高度）我会离开它现在的样子 - 线性布局，包含一个 TextView 和一个 ImageView。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-06T09:34:36.503

我不认为你缺少任何东西。TextView 复合可绘制功能不是非常可定制的，通常不值得您花时间试图让它们看起来正确。一些 lint 警告有点过于热心和为时过早。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-10T22:25:20.940

lint 所指的优化更适合固定大小的图像。在您的情况下，该线必须拉伸屏幕长度的其余部分，因此它不是可以使用具有复合可绘制的文本视图来完成的。这种 lint 警告更多的是一种建议，而不是必须做的事情，并且通过仅检查仅具有 textview 和 imageview 的线性布局而不是检查图像视图中需要去的内容来检测。如果你已经让它按照你的方式工作，我认为你应该不管它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-09T19:41:04.503

您的视图由此创建 -

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/time"
        android:layout_width="@dimen/today_time_width"
        android:layout_height="wrap_content"
        android:layout_gravity="left"
        android:gravity="right"
        android:layout_marginRight="5dp" />

    <ImageView
        android:layout_gravity="center"
        android:id="@+id/border"
        android:layout_width="match_parent"
        android:layout_height="@dimen/today_current"
        android:src="?attr/item_boundary" />

</LinearLayout> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-10T09:06:30.657

仅使用标准 TextView 无法实现此目的。如果您真的想减少查看次数，您可以创建自定义 TextView 类，将 layoutWidth 设置为 matchParent 并从文本端到右边框画线。但这不值得去做。一些额外的视图不会减慢您的列表。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-07T16:50:32.970

我不确定您是否能够实现您真正想要的，但是您可以将您发布的链接中的线性布局更改为以下内容：

```
 <RelativeLayout
        android:id="@+id/relTrial"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content">
    <TextView 
        android:id="@+id/txtTime"
        android:layout_width="100dp"
        android:layout_height="wrap_content"
        android:gravity="right"
        android:text="12:45 AM"
        android:layout_alignParentLeft="true"/>
    <LinearLayout 
        android:id="@+id/lnrSep"
        android:layout_width="fill_parent"
        android:layout_height="1dp"
        android:gravity="bottom"
        android:layout_marginLeft="5dp"  
        android:layout_marginRight="5dp"          
        android:layout_centerVertical="true"
        android:orientation="horizontal"
        android:background="@android:color/darker_gray"
        android:layout_toRightOf="@+id/txtTime"
        android:layout_alignParentRight="true"></LinearLayout>
    </RelativeLayout> 
```

这样，虽然时间文本在左侧，但时间文本将右对齐，并且该行也将可见。

希望有帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-09T13:13:43.350

如果我没听错，您想为列表视图项添加底部边框吗？试试这个怎么样：

```
android:drawableBottom="@drawable/line" 
```

# protocol-buffers - 使用 boost::mpl 反序列化协议缓冲区

> ID：14834972
> 
> 赞同：1
> 
> 时间：2013-02-12T14:37:51.717
> 
> 标签：protocol-buffers, boost-mpl

我用 PB 创建我的 RPC 协议，例如：

```
enum EMessages {
  E_MSG_METHOD_CONNECT = 0x8001,
  E_MSG_EVENT_CONNECT  = 0xA001,
 ...
}

struct MsgHeader {
  required int32  sessionRef    = 1;
  required int32  transactionId = 2;
  required int32  status        = 3;
}

struct MSG_METHOD_CONNECT {
  optional Messages    opCode  = 1 [default = E_MSG_METHOD_CONNECT];
  required MsgHeader   header  = 2;
  .. other fields ..
} 
```

现在，我定义了一个接口和一个模板类来添加一个间接级别：

```
class IMessage {
  virtual INT     getOpCode() = 0;
  virtual STRING  getName() = 0;
  virtual size_t  getSize() = 0;
  virtual INT     SerializeToString(STRING& out) = 0;
  virtual INT     ParseFromString(STRING& in) = 0;
  ....
}

template<class MESSAGE>
class IMessageImpl : public IMessage {
  protected:
    MESSAGE   m_Message;  ///< The Message Implementation
  public:
    virtual MESSAGE&  getMessage() = 0;
}; 
```

我会将它用作：

```
IMessageImpl<MSG_METHOD_CONNECT> MsgConnect; 
```

现在，当我从端点接收数据时，我当然需要根据消息 opCode 反序列化它。
阅读[这篇文章](http://blog.florindinu.ro/posts/message-dispatching-in-c-part-1-type-lists.html)我正在考虑使用像 boost::mpl::map 这样的类型映射，但是由于我从不使用它，所以我正在寻找一些建议。

<< ------------ [编辑] --------- --- >>

关于上面的代码，我尝试按以下方式对其进行编码：

```
template<class MESSAGE>
class PBMessage : public IMessageImpl<MESSAGE>
{
public:
  PBMessage() {};
  /* ... other methods ... */
};

// Map of types. The key is the Message opCode
typedef typename mpl::map< mpl::pair<mpl::int_[100], PBMessage<MSG_METHOD_CONNECT> >, 
                           mpl::pair<mpl::int_[101], PBMessage<MSG_EVENT_CONNECT> >,
                         > TMessageMap;

// The Message type
template < typename MessageMap, int opCode >
typedef typename mpl::at<MessageMap, mpl::int_<opCode> >::type::value  TMessage; 
```

而且，为了从接收到的缓冲区创建消息，我尝试编写代码（将其作为伪代码）：

```
 class PBMessageFactory : public IMessageFactory {
  public:
    IMessage* createMessage(CHAR* buff, UINT size) {
      int opCode = buff[0]; 
      TMessage<TMessageMap, opCode> msg;
      msg.ParseFromString( STRING(buff) );
    }        
  }; 
```

但是没有成功...有没有人可以给我一些建议如何从 mpl::map 中检索类型？

谢谢，
丹尼尔。

# go - Go 文件名以下划线开头

> ID：14834973
> 
> 赞同：9
> 
> 时间：2013-02-12T14:37:51.777
> 
> 标签：go

我希望一个特定的文件出现在我的编辑器中我的文件列表的顶部，所以我在它前面加上了`_`. 这是它的外观：

```
mypkg
  _func.go
  a.go
  b.go 
```

我知道 Go 的文件命名约定使用`_test`等`_unix`，但是，由于`_func`与特定架构不匹配或者是测试用例，为什么它不能算作源文件？

当我导入这个包时，这个文件中定义的函数不可用。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-12T15:08:28.883

显然，下划线的权重与文件开头的点前缀相同，并且被`go build`命令明显忽略。然而，这不是`go`工具的决定，而是`go/build`标准库中的包的决定。[你可以在这里](http://code.google.com/p/go/source/browse/src/pkg/go/build/build.go#549)看到负责人的路线。

我的猜测是临时文件带有下划线前缀，因此构建工具链会忽略它们。

编辑：[此评论](https://github.com/golang/go/blob/master/src/go/build/build.go#L492)记录了行为。我引用：

```
// Import returns details about the Go package named by the import path,
// interpreting local import paths relative to the srcDir directory.
// If the path is a local import path naming a package that can be imported
// using a standard import path, the returned package will set p.ImportPath
// to that path.
//
// In the directory containing the package, .go, .c, .h, and .s files are
// considered part of the package except for:
//
//      - .go files in package documentation
//      - files starting with _ or . (likely editor temporary files)
//      - files with build constraints not satisfied by the context
//
// If an error occurs, Import returns a non-nil error and a non-nil
// *Package containing partial information.
// 
```

您可以在 package 的[包文档中`go/build`](http://golang.org/pkg/go/build/#Context.Import)以用户友好的形式找到它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T15:08:19.897

我想我记得`_whatever`go 工具以类似的方式处理 dotfiles ( `.whatever`) 是如何隐藏在 shell 中的。不幸的是，我找不到任何关于它记录在哪里的参考。

因此，如果我的内存服务器正确，您将不得不重命名源文件，因为它与 Go 构建系统不兼容，如果您打算将此类`_file.go`视为某个包的一部分。

这种行为的目的可能是为了方便为 CGO 等工具创建临时且不冲突的文件。

# javascript - 在平板设备上滚动网页

> ID：14834974
> 
> 赞同：0
> 
> 时间：2013-02-12T14:37:51.373
> 
> 标签：javascript, android, ipad, browser, tablet

我正在用一些 JavaScript 用 PHP 编写一个网站，当用户单击一个按钮时，它会导致页面慢慢向下滚动到页面底部：

```
scrollBy=300;
window.scrollBy(0,1);
scrolldelay = setTimeout('pageScroll()',scrollBy); 
```

这在桌面上运行得很好，但在 iPad 和 Android 设备上，它似乎执行了大约 5 次滚动迭代然后停止（如果用户点击另一个按钮，有一个单独的函数会停止滚动，但这不是被调用）。

有谁知道为什么会发生这种情况？我环顾四周很长一段时间，但它是一个突出的错误，它开始影响我！

非常感谢！

担

**/编辑**

如果当脚本正在运行（并且已经停止）时，我滚动到页面底部，然后向上一点，滚动再次继续进行大约 10 次迭代然后停止。如果我再次向上滚动，也会发生同样的情况。

# java - 如何根据当前位置获取最近的位置（用户输入的）？

> ID：14834978
> 
> 赞同：1
> 
> 时间：2013-02-12T14:38:02.427
> 
> 标签：java, android, google-maps, location, google-maps-android-api-2

我正在构建一个 Android 应用程序，用户可以在其中根据当前位置找到最近的位置，还可以将位置添加到数据库中。我知道我将不得不在我的数据库中使用 long 和 lat，但我真的不知道如何将当前位置与数据库中的位置进行比较。我什至如何搜索它，因为我可能必须系统地遍历整个数据库，提取每个地理点，然后将其与用户位置进行比较？

示例：假设用户输入了伦敦的 10 个地方和世界各地的 1000 个其他地方，并且伦敦的一个人正在使用该应用程序并希望根据他们当前的位置找到离他们最近的地方。我将如何在数据库中的 1000 个其他地方中搜索这 10 个地方？不需要执行 distanceTo() 1000 次。

任何建议、指南、教程、参考资料都会很棒。

提前致谢。

编辑：

到目前为止，这是我的想法。

获取位置的经度和纬度，可能已经搜索到，当前位置或用户在屏幕上点击的位置。

使用所述位置的 Long/Lat - 使用 getFromLocation 方法从反向地理编码中获取该位置的位置描述。

使用地点描述，根据地址字符串搜索数据库。

这就是我现在所拥有的，但这似乎并不可靠。给定位置的经度/纬度，必须有一种更简单的方法来查询数据库并返回最近地点的完整列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T16:02:10.390

如果您使用纬度和经度，这应该很简单。假设个人的坐标大致是：49°N，2°E。

要查找纬度/经度为 1 平方度的所有位置，您只需选择满足以下条件的所有位置：

*   纬度 >= 48°N 和 <= 50°N

.. 和 ..

*   经度 >= 1°E 和 <= 3°E

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-10T06:49:09.033

这很简单。

维基百科上有一张表格，解释了**1 公里**等十进制度。您从 Google 收到的坐标是**十进制度**。

[https://en.wikipedia.org/wiki/Decimal_degrees](https://en.wikipedia.org/wiki/Decimal_degrees)

如果您对如何计算等有任何疑问，请询问:)

基本上你只需要检查纬度是否高于

```
currentLocationLatitude - rangeInDecimalDegrees 
```

并且小于

```
currentLocationLatitude + rangeInDecimalDegrees 
```

# extjs - 哪个先传播？直接事件与侦听器

> ID：14834982
> 
> 赞同：1
> 
> 时间：2013-02-12T14:38:09.597
> 
> 标签：extjs, event-handling, ext.net

鉴于我有任何 Ext-Element 的情况，我声明：

```
<ext:Button ID="Button1" runat="server" OnDirectClick="someMethod" OnClick="someFunction /> 
```

或者

```
<ext:Button ID="Button1" runat="server">
  <Listeners> <Click Handler="someFunction" /> </Listeners>
  <DirectEvents> <Click Method="someMethod" /> </DirectEvents>
</Buttons> 
```

哪个会先被调用？someFunction 或 someMethod。是否可以在 someMethod 中使用 someFunction 设置的变量，反之亦然？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T19:45:26.213

这两个事件将在基本完全相同的时间被调用。哪个先起火可能会有所不同。

不建议为同一事件配置两个事件处理程序。如果您提供有关您的要求的更多信息，我可以提供一些建议。

如果您想在调用 DirectEvent 之前或之后运行一些客户端代码，最好使用 DirectEvent 的`.Before`和`.Success`（和`.Failure`）处理程序。`<Click>`

希望这可以帮助。

# jquery - Internet Explorer 和 Mouseenter 函数

> ID：14834986
> 
> 赞同：0
> 
> 时间：2013-02-12T14:38:22.480
> 
> 标签：jquery, html, mouseenter, mouseleave

我是自学 JQuery 并且遇到了一些障碍。我所做的是在图像上分层一个 div，将可见性设置为隐藏，并使用 JQuery 声明当我鼠标进入图像时，框是可见的，当我鼠标离开时，框消失。这适用于 Firefox，但在 IE 中，当我将鼠标悬停时，只有单词出现，并且当鼠标离开 div 时它们不会消失。

我知道这个问题已经以多种形式提出，但到目前为止我的研究还没有提供一个可行的答案。我将不胜感激一些建议。

我的 HTML：

```
<table>
<td class=presentation>
<a href="Capabilities-PDF.html" target="_blank"> <div class="cover hidden1"> Learn About Us </div> </a>
<div class="image1"><img
  title="Capabilities"
  alt="Capabilities"
  src="images/thumbnails/Capabilities.png"
class="img"></div></td>
</table>
</body> 
```

我的JavaScript：

```
$(document).ready(function(){
$('.image1').mouseover(function(){
    $('.hidden1').show();
    });
$('.hidden1').mouseout(function(){
    $(this).hide();
}); 
```

我的 CSS：

```
.cover{
background-color: rgba(0, 0, 0, 0.7);
height: 131px;
position: absolute;
width: 175px;
z-index: 1;
text-align: center;
color: ffffff;
font-weight: bold;
text-decoration: none;

}

.hidden1 {
display: none;
}
.image1 {
height: 131px;
width: 175px;
overflow: hidden;
} 
```

# javascript - 编写单行 if 语句的最佳方法

> ID：14834987
> 
> 赞同：-3
> 
> 时间：2013-02-12T14:38:24.710
> 
> 标签：javascript

所以在过去的 5 年里，我一直在用 JavaScript 编写代码，而且都是自学成才的。我遇到越来越多的程序员时遇到的一个问题。我发现我并不总是以最好的方式编码。

我一直在试图弄清楚在 JS 中编写单行 if 语句的最佳方法是什么。我不关心可读性并且该项目不是开源的，所以我不担心其他人添加它。

我通常如何写我的陈述

```
condition = true;
if (condition)
  runFunction();
else
  runSecondFunction(); 
```

但我发现每个人都一直告诉我使用括号。我一直在写这个，因为他们总是在下面的行中加上“它使它更容易阅读”

```
condition = true;
if (condition) {
  runFunction();
}else{
  runSecondFunction();
} 
```

最后有人终于对我说，我应该编写 if 语句以更接近我在 C# 中编写的方式，如下所示

```
condition = true;
if (condition) 
{
  runFunction();
}
else
{
  runSecondFunction();
} 
```

当然还有速记，但我通常只用它来切换像这样的变量

```
condition = true;
(condition) ? condition = false : condition = true; 
```

但最好也使用常规 if 语句的简写。例如：

```
condition = true;
(condition) ? runFunction() : runSecondFunction(); 
```

## 所以问题是

在编写单行 JavaScript 的众多方法中，这是将其编程为最快运行的最佳方法。我不关心可读性，所以请不要说建议这样或那样写，因为它更容易阅读。还请举例说明为什么一种方式比另一种方式更快或更慢。

# 明确

并不是我不关心可读性，而是这些 if 语句对我来说都不是很难阅读的，它们在所有版本中对我来说都有意义。所以你们中的一些人可能认为难以阅读的内容我可能不会。这就是让我想到下一点的原因，因为这些对我来说都不难阅读，也许我应该把它写成 JS 处理它的最佳方式。

例如我发现 JS 需要更长的时间来运行

```
counter++; 
```

然后它确实

```
counter = counter + 1; 
```

所以最后要明确的是，我阅读这些都没有问题，我只想知道哪个最适合 JS 处理。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T14:54:52.977

看看一些 jsperf 测试：

*   [大括号 vs 没有大括号](http://jsperf.com/if-no-braces-vs-braces)
*   [三元与如果](http://jsperf.com/inline-if-test)
*   [如果与布尔值](http://jsperf.com/if-statement-vs-boolean-and-statement)

它们似乎都相对相等（除了布尔版本在我刚刚运行的测试中速度较慢），所以我会选择你最喜欢的外观。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T14:46:03.250

您的速记可以缩短：

代替：

```
(condition) ? condition = false : condition = true; 
```

尝试：

```
condition = condition ? false : true;
var a = condition ? 'conditionTrueValue' : 'conditionFalseValue';
// Or in this case, since you're just toggling the boolean:
condition = !condition; 
```

代替：

```
(condition) ? runFunction() : runSecondFunction(); 
```

您可以像这样保存一些字符：

```
(condition ? runFunction : runSecondFunction)(); 
```

现在，这方面的性能差异（如果有的话）将是微不足道的。

让你的代码可读。如果你必须在一年内恢复你的代码，你会很高兴的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T14:45:22.427

我通常对将每个花括号放在单独的行中而感到恼火，而且我不喜欢结束花括号之后有什么东西。此外，我不喜欢根本不使用它们。

顺便说一句，这将是我的。

```
condition = true;
if (condition) {
  runFunction();
}
else {
  runSecondFunction();
} 
```

当问题是关于三元的时，我不得不说，我只在条件或结果中不涉及任何函数时才使用它。

```
result = (number == 521 : "equal to 521" : "some other number"); 
```

我关心我的代码的可读性，这很重要，当您拥有包含数千行代码的文件时，看起来非常相似 - 如果代码不可读，则很难调试或升级代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T14:48:21.357

如果您“真的”不关心可读性/可维护性，那么只需以感觉最舒适的方式编写即可。

根据我的编程经验，人们推荐使用大括号的原因实际上是为了可维护性，当有人必须为 if 语句添加一段代码时，一个论点是，如果你输入一次，你就不必记住当您需要代码块而不是单个语句时插入它。

我建议使用下面的表格，因为 Javascript 有一些带大括号的怪癖（来自内存），我相信这与闭包/函数的概念有关）某些代码不会运行。当我调试损坏的代码并阅读它时，我感到很惊讶，但那是很久以前的事了。

```
if (expression) {
} 
```

至于性能因素，我认为更多的是与正在执行的逻辑和代码有关，而不是您编写`if`语句的方式。

# stored-procedures - 存储过程中的动态 db2 查询

> ID：14834988
> 
> 赞同：0
> 
> 时间：2013-02-12T14:38:31.263
> 
> 标签：stored-procedures, db2, string-concatenation

嗨，我有一个如下的存储过程，

```
Create  PROCEDURE my_car(
in diesel integer,
out milege integer)
P1: BEGIN

SET START_query = 'SELECT*';
SET FROM_CLAUSE = ' FROM car, diesel';
SET WHERE_CLAUSE = ' WHERE car.c1 = diesel.c2';

IF (diesel =0) THEN            
                SET WHERE_CLAUSE = +WHERE_CLAUSE+'AND car.diesel=0' ;
                ELSE
                SET WHERE_CLAUSE = +WHERE_CLAUSE+' AND car.diesel='+diesel ; 
               END IF;
END P1 
```

但它的抛出错误如下。

```
DB2 SQL Error: SQLCODE=-402, SQLSTATE=42819, SQLERRMC=+, DRIVER=3.52.90 
```

如果我们使用 || 而不是 + 即，

```
SET WHERE_CLAUSE = WHERE_CLAUSE || 'AND car.diesel=0' ; 
```

然后它的抛出错误如下，

```
DB2 SQL Error: SQLCODE=-440, SQLSTATE=42884, SQLERRMC=||;FUNCTION, DRIVER=3.52.90 
```

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T15:30:12.963

在 DB2 中，`||`而不是`+`用于字符串连接。

此外，柴油是一个字符串，您将其与零进行比较。如果您希望柴油为 0 或 1 值，则应将其类型设置为整数。如果它需要是一个字符串，你应该将它与`''`or`'0'`或任何有意义的东西进行比较。

我不确定你的意思是什么`+V_WHERE_CLAUSE+`，但你的代码应该是这样的：

```
IF (diesel = '0') THEN            
    SET WHERE_CLAUSE = WHERE_CLAUSE || 'AND car.diesel=0';
ELSE
    SET WHERE_CLAUSE = WHERE_CLAUSE || ' AND car.diesel=' || diesel; 
END IF; 
```

或者也许只是这样：

```
SET WHERE_CLAUSE = WHERE_CLAUSE || ' AND car.diesel=' || diesel; 
```

# php - php imagemagick 创建一个平铺金字塔 TIFF

> ID：14834989
> 
> 赞同：2
> 
> 时间：2013-02-12T14:38:30.937
> 
> 标签：php, imagemagick

好吧，正如标题所说，我有一个问题。我的测试功能是这样的：

```
$imagePath="/tmp/511a3874a0da1";
$pngName=$imagePath.".png";
$tifName=$imagePath.".tif";
$tempImg = new Imagick();
$tempImg->readImage($pngName);
//$tempImg->roundCorners(150,150);
//$image->transformImage("100x100", "100x100");
$tempImg->setFormat('ptif');
$tempImg->setImageColorSpace(5);
$tempImg->writeImage($tifName); 
```

好吧，它会生成一个 tif 文件，正如手册所说，ptif 是“平铺金字塔 tiff”的格式。我检查了imagemagick命令行工具，通常应该是这样的：

```
convert 511a38e9a5cc5.png -define tiff:tile-geometry=256x256 -compress jpeg 'ptif:o.tif' 
```

我测试了这个命令，它可以工作。但在 php 中，似乎我无法设置 tile-geometry。当我测试 php 生成的 tif 文件和 iipimage 服务器日志告诉我这个文件没有平铺。任何人都知道如何生成平铺金字塔 tiff 吗？纯粹由 php，而不是像“exec xxx”这样的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-09T08:32:05.220

我对平铺金字塔 TIFF 不是很熟悉，但可能是这样的：

```
<?php
$tempImg = new Imagick();
$tempImg->readImage("image.png");
$tempImg->setFormat('ptif');
$tempImg->setImageDepth(8);
$tempImg->setOption('tiff:tile-geometry','256x256');
$tempImg->writeImage("result.tif");
?> 
```

# php - 为 Moodle 之外的用户显示 Moodle 2.4 课程列表

> ID：14834990
> 
> 赞同：0
> 
> 时间：2013-02-12T14:38:31.043
> 
> 标签：php, mysql, moodle

我正在尝试创建一个页面，其中显示课程标题的项目符号列表并链接到用户是 Moodle 2.4 教师的任何课程。

我在这里找到了这段代码，它适用于显示 Moodle 课程类别，但不适用于用户的课程。我不是程序员，所以非常感谢任何帮助。

```
<?php
$con = mysql_connect("localhost","moodle","moodle");
if (!$con) {
die('Could not connect: ' . mysql_error());
}

mysql_select_db("moodle", $con);
$result = mysql_query("SELECT name AS COURSE_NAME,parent FROM mdl_course_categories");

if (isset($result)!=1) {
$message  = 'Invalid query: ' . mysql_error() . "\n";
}
echo "<p> The courses taught are: </p>";

///Display Course Categories
$query_catetories = mysql_query('SELECT cc.id, cc.parent, cc.name FROM   mdl_course_categories cc ');
$categories = mysql_fetch_all($query_catetories);

$tmp_categories = array();

foreach ($categories AS $row) {

$row['id'] = (int) $row['id'];
$row['parent'] = (int) $row['parent'];
if (!$tmp_categories[$row['parent']])
    $tmp_categories[$row['parent']] = array();
$tmp_categories[$row['parent']][] = $row;
}

$course_catetories = buildNode($tmp_categories);

echo '<ul>';
foreach ($course_catetories as $course_catetory) {
print_category_child($course_catetory);
}
echo '</ul>';

function print_category_child($category) {
echo '<li>' . $category['name'];
if (array_key_exists('children', $category)) {
    echo '<ul>';
    foreach ($category['children'] as $child) {
        print_category_child($child);
    }
    echo '</ul>';
}
echo '</li>';
}

function buildNode($inputArray, $parent = 0) {
$return = array();
foreach ($inputArray[$parent] AS $key => $row) {
    if (@$inputArray[$row['id']]) {
        $row['children'] = buildNode($inputArray, $row['id']);
    }
    $return[] = $row;
}
return $return;
}

function mysql_fetch_all($result) {
$all = array();
while ($all[] = mysql_fetch_assoc($result)) {

}
return array_filter($all);
}
///END Course Display 

?>'` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T10:08:47.880

看看你的 Mysql 查询：

```
$result = mysql_query("SELECT name AS COURSE_NAME,parent FROM mdl_course_categories"); 
```

您的结果是“mdl_course_categories”表中的类别名称列表。

如果要显示课程名称列表，请使用正确的表“mdl_course”。它可能是这样的：

```
mysql_select_db("moodle", $con);
$result = mysql_query("SELECT id, fullname FROM mdl_course WHERE category = "your_course_category_here");

while($row = mysql_fetch_array($result)){
    echo $row[0];
    echo "<br>";
    echo $row[1];
} 
```

# ddl - 如何向 Teradata 中的现有表 DDL 添加注释？

> ID：14834992
> 
> 赞同：6
> 
> 时间：2013-02-12T14:38:42.120
> 
> 标签：ddl, teradata

我正在向表中添加一些新列，并希望将文档添加到表 DDL 中以供未来的开发人员使用。怎么办？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T15:16:25.633

**通用语法：**

```
COMMENT ON {OBJECT} {OBJECTNAME} AS '{255 characters of text}; 
```

**详细语法示例：**

```
COMMENT ON TABLE {DATABASE}.{TABLENAME} AS '{255 characters of text}';
COMMENT ON COLUMN {DATABASENAME}.{TABLENAME}.{COLUMNNAME} AS '{255 characters of text}';
COMMENT ON USER {USERNAME} AS '{255 characters of text}';
COMMENT ON DATABASE {DATABASENAME} AS '{255 characters of text}'; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T20:20:59.420

除了添加对象注释之外，您还可以添加内嵌注释来查看定义。由于大多数访问总是通过视图，这就是我们与负责表和文档更改的 DBA 沟通的方式。例如：

```
replace view VIEWDB.vmy_table as
locking DATADB.my_table for access
select *
from  DATADB.my_table
/* This is a comment */
/* Created by Bob */ 
```

这种技术的好处是，当您执行`SHOW SELECT * FROM VIEWDB.vmy_table`.

# java - 出现 OutOfMemoryError：Linux 机器中的 Tomcat 服务器超出 GC 开销限制

> ID：14834993
> 
> 赞同：0
> 
> 时间：2013-02-12T14:38:45.373
> 
> 标签：java, tomcat, out-of-memory

我的 Tomcat 服务器在 Linux 机器上出现“OutOfMemoryError：超出 GC 开销限制”。请让我知道是否有任何工具可以帮助我分析我的 Java 应用程序中的哪个程序正在消耗大量内存。我们是否有任何调试工具可以提供一些信息来了解tomcat 服务器在哪里出现此错误？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T14:47:38.777

确保设置命令行参数：-XX:+HeapDumpOnOutOfMemoryError 以在 OOM 上进行堆转储。也很有用：-XX:HeapDumpPath=<*堆转储文件夹*>。

[当 OOM 发生时，您可以使用MAT](http://www.eclipse.org/mat/)分析堆转储。它是分析堆转储的非常有用的工具。

您也可以使用[jmap](http://docs.oracle.com/javase/6/docs/technotes/tools/share/jmap.html)手动进行堆转储。例子：`jmap -dump:file=<output-filename> <java process id>`

# vhdl - 什么是综合结果中的“门数”以及如何计算

> ID：14834996
> 
> 赞同：7
> 
> 时间：2013-02-12T14:38:49.687
> 
> 标签：vhdl, verilog, area, synthesis

我正在用设计编译器综合我的设计，并与另一个设计进行一些比较（作为我报告中的评估）。Synopsys 的工具可以使用命令轻松报告该区域，但在我读过的所有论文中都关心**门数**。

我的测验是什么是**门数**以及如何计算它？

我用谷歌搜索并听说**门数**计算为`total_area/NAND2_area`。那么，这是真的吗？

感谢您的阅读，请不要因为愚蠢的问题责备我:(。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T16:28:53.150

综合面积通常被引用为 NAND2 等效项中的门数。你是正确的：

```
(total area)/(NAND2 area). 
```

旧的工具和库用来报告这个数字，几年前我注意到工具的转变，只提供 Square Microns 的区域。然而，门数是一个更好的数字，可以让您了解情况，并且该数字可以在不同尺寸的几何形状之间移植。

实现 A 的 40K 小于实现 B 的 50K。比较实现 A 进程 X 的 100000 um^2 与进程 y 上的实现 B 的 65000 um^2 要困难得多。

# html - 谷歌自定义 404 页面

> ID：14834998
> 
> 赞同：0
> 
> 时间：2013-02-12T14:38:50.460
> 
> 标签：html, css, styles, http-status-code-404

我想知道自定义 404 小部件的属性 #goog-fixurl 的用途是什么，因为我找不到任何文档。我了解所有其他属性样式#goog-fixurl

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:52:39.543

这样您就可以从您的 CSS 文档中设置它们的样式。

看看[google webmasters bin](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=136085) 或 [style-the-google-404-widget random blog](http://www.crearegroup-webdesign.co.uk/blog/industry-news/style-the-google-404-widget.html)

继续