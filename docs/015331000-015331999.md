# StackOverflow 问答 15331000-15331999

# c++ - 如何让虚函数根据它所属的类返回不同类型，而不在 Base 中包含虚拟实现？

> ID：15331000
> 
> 赞同：1
> 
> 时间：2013-03-11T04:01:30.360
> 
> 标签：c++, virtual, return-type, conversion-operator

我需要一个类层次结构，其中派生类将实现一个返回类型不同的虚函数。我该怎么做。我尝试过的是以下代码：

```
using namespace std;
class Base
{
public:
    Base()
    {
        cout<<"Constructor of Base"<<endl;
    }
    virtual Base& Decode()=0;
    virtual operator int(){return -1;}
    virtual operator string(){return "WRONG";}
};
class Der1:public Base
{
    int i;
public:
    Der1(int j=0):Base(),i(j)
    {
        cout<<"COnstructor of Der1"<<endl;
    }
    Base& Decode()
    {
        cout<<"Decode in Der1"<<endl;
        return *this;
    }
    operator int()
    {
        return i;
    }
};
class Der2:public Base
{
    string s;
public:
    Der2(string temp="sajas"):Base(),s(temp)
    {
        cout<<"Constructor of Der2"<<endl;
    }
    Base& Decode()
    {
        cout<<"Decode in Der2"<<endl;
        return *this;
    }
    operator string()
    {
        return s;
    }
};
int main()
{
    Base *p=new Der1();
    int val=p->Decode();
} 
```

我在想如果它可以以这种方式工作，用户只需将对象等同于一个有效变量。有没有办法在不包括 Base 中的所有转换运算符和一些虚拟实现的情况下做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T04:13:20.887

我想有一个问题，如果它是纯虚函数，则无法创建类基对象。但另一方面，要解决您的问题，您可以尝试使用模板，如下所示。

```
#include <iostream>

class Base{
public:
    Base(){}
    virtual ~Base(){}
    virtual void show() const {
        std::cout << "Base::show()!" << std::endl;
    }
};
class A:public Base{
public:
    A(){}
    virtual ~A(){}
    virtual void show() const{
        std::cout << "A::show()!" << std::endl;
    }
};

template<typename T>
class Factory{
public:
    const T* operator()() const{
        return &t;
    }
private:
    T t;
};

int main(){
    const A* pA = Factory<A>()();
    pA->show();
    Factory<A>()()->show();
    return 0;
} 
```

# python - PyQt QListView 拖放问题，用于在一个列表中导入和重新排列

> ID：15331001
> 
> 赞同：4
> 
> 时间：2013-03-11T04:01:35.680
> 
> 标签：python, listview, drag-and-drop, pyqt, pyqt4

所以我当前的列表视图代码只允许我将计算机上的文件拖放到我的列表视图中。我想要的是能够重新排列列表视图项目，问题是当我尝试使用 drop 方法导入文件时它会被覆盖并且没有任何反应。例如，如果拖动来自我希望它导入的列表视图之外，如果拖动是内部的，或者更确切地说来自列表视图内部，我希望它像使用 InternalMove 一样简单地移动。

将此添加到我的代码中：

```
self.listView.setDragDropMode(QtGui.QAbstractItemView.InternalMove); 
```

在评论这一点时：

```
def dropEvent(self, event):
    if event.mimeData().hasUrls:
        event.setDropAction(QtCore.Qt.CopyAction)
        event.accept()
        links = []
        for url in event.mimeData().urls():
            links.append(str(url.toLocalFile()))
        self.emit(QtCore.SIGNAL("dropped"), links)
    else:
        event.ignore() 
```

使重新排列工作完美无缺，但不允许我通过拖动导入文件。

因此，我收集到以上是我的问题的原因，但我只是不知道如何修复它并同时工作，看起来它应该是一个简单的修复。

我不知道这是否是正确的方向，但我知道：

```
if event.mimeData().hasUrls: 
```

如果从列表视图外部返回 true，如果在列表视图内则返回 false

您很可能会注意到上述代码来自： [http](http://tech.xster.net/tips/pyqt-drag-images-into-list-widget-for-thumbnail-list/) ://tech.xster.net/tips/pyqt-drag-images-into-list-widget-for-thumbnail-list/ 和 [http://zetcode.com/教程/pyqt4/dragdrop/](http://zetcode.com/tutorials/pyqt4/dragdrop/)

我知道我可以创建一个设置来查询鼠标位置并删除该项目并在最近的位置重新添加它，但是当 InternalMove 内置并满足我的需要时，这似乎很麻烦。

任何帮助将不胜感激，感谢您的时间！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T04:34:33.117

Piotr 的回答是我需要的一半。我实际上在这里找到了我的问题的其余答案-> [http://sjt.is/2012/05/23/pyqt-and-dragndrop/](http://sjt.is/2012/05/23/pyqt-and-dragndrop/)

我只是将我的列表视图定义为：

```
mylist = TestListView(self) 
```

然后使用下面的代码作为类定义：

```
class TestListView(QtGui.QListWidget):

    def __init__(self, parent):
        super(TestListView, self).__init__(parent)
        self.setAcceptDrops(True)
        self.setIconSize(QtCore.QSize(100, 100))
        self.itemClicked.connect(self.on_item_clicked)
        self.setDragDropMode(QtGui.QAbstractItemView.InternalMove)

    def dragEnterEvent(self, event):
        if event.mimeData().hasUrls:
            event.acceptProposedAction()
        else:
            super(TestListView, self).dragEnterEvent(event)

    def dragMoveEvent(self, event):
        super(TestListView, self).dragMoveEvent(event)

    def dropEvent(self, event):
        if event.mimeData().hasUrls():
            links = []
            for url in event.mimeData().urls():
                links.append(str(url.toLocalFile()))
            self.emit(QtCore.SIGNAL("dropped"), links)
            event.acceptProposedAction()
        else:
            super(TestListView,self).dropEvent(event) 
```

当新文件被删除时，它会向连接到列表视图的函数发出信号。当旧文件被删除时，它会被移动。谢谢您的帮助！

# jquery - 引导缩略图内容悬停

> ID：15331004
> 
> 赞同：0
> 
> 时间：2013-03-11T04:02:01.923
> 
> 标签：jquery, twitter-bootstrap

我将内容放入鼠标悬停时出现的图像中。

问题是这不适用于缩略图放大图像的锚链接。

```
<a href="http://dummyimage.com/300x120/a26/fff" class="thumbnail"> <!-- this not work! -->
    <img class="hov" src="http://dummyimage.com/300x120/a26/fff" />
</a> 
```

有没有办法解决这个问题？

这是代码：[jsFiddle](http://jsfiddle.net/lughino/4rvtD/1/)

**编辑**

我试图这样做，但没有任何反应！

```
$('.contenthover').on('click', function(){ $(this).parent().find('.thumbnail').trigger('click'); }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T20:30:50.593

我找到了解决问题的方法。这是代码：

```
<ul class="thumbnails">
         <li class="span3 imag">
             <a href="http://dummyimage.com/300x120/a26/fff" class="thumbnail" rel="gallery1" title="">
                <img class="hov" src="http://dummyimage.com/300x120/a26/fff" />
             </a>
           <div class="contenthover">
                   <div class="btn-group pos">
                    <a class="btn tip dropdown-toggle mybutton" data-toggle="dropdown tooltip" title="Modifica" href="#">
                        <i class="icon-pencil"></i>
                    </a>
                    <ul class="dropdown-menu pull-right" style="margin:0;" aria-labelledby="dLabel" role="menu">
                        <li><a tabindex="-1" class="various" href="#inline"><i class="icon-wrench"></i>Modifica</a></li>
                        <li><a tabindex="-1" data-toggle="modal" href="#modalDesc"><i class="icon-edit"></i>Modifica descrizione</a></li>
                        <li><a tabindex="-1" data-toggle="modal" href="#modalPred"><i class="icon-star"></i>Imposta come predefinito</a></li>
                        <li class="divider"></li>
                        <li><a tabindex="-1" data-toggle="modal" href="#modalDel"><i class="icon-trash"></i>Elimina immagine</a></li>
                    </ul>
               </div>
               <div class="conhov">
                        <p>Nessuna descrizione</p>
               </div>
           </div>
         </li>
   </ul> 
```

CSS：

```
.contenthover { 
   display: none;
   width: 100%;
    height: 100%;
 }
.contenthover, contenthover a { color:#fff; }
.contenthover p { margin:0 0 10px 0; line-height:1.4em; padding: 5px; }
.contenthover a.mybutton { 
    padding:4px 8px;
}
.imag {
   position:relative;
   margin-left: 15px !important;
}
.conhov {
   background: rgba(51, 51, 51, 0.63);
   text-overflow: ellipsis;
   text-shadow: 0 0 3px rgba(0, 0, 0, .75);
   position: absolute;
   left: 0;
   right: 0;
   bottom: 0;
}
.pos {
    position: absolute;
   top: 2%;
   right: 2%;
} 
```

我使用了单个对象的绝对位置，这样拇指的其余部分就是可点击的锚点。

# compiler-construction - 何时将 volatile 与共享 CUDA 内存一起使用

> ID：15331009
> 
> 赞同：17
> 
> 时间：2013-03-11T04:02:46.227
> 
> 标签：compiler-construction, cuda, gpu, gpgpu, volatile

在什么情况下你应该在`volatile`CUDA 内核的共享内存中使用关键字？我知道这`volatile`告诉编译器永远不要缓存任何值，但我的问题是关于共享数组的行为：

```
__shared__ float products[THREADS_PER_ACTION];

// some computation
products[threadIdx.x] = localSum;

// wait for everyone to finish their computation
__syncthreads();

// then a (basic, ugly) reduction:
if (threadIdx.x == 0) {
    float globalSum = 0.0f;
    for (i = 0; i < THREADS_PER_ACTION; i++)
        globalSum += products[i];
} 
```

在这种情况下我需要`products`变得不稳定吗？每个数组条目只能由单个线程访问，除了最后，所有内容都由线程 0 读取。编译器是否有可能缓存整个数组，所以我需要它 `volatile`，还是只缓存元素?

谢谢！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-11T04:20:57.167

如果您不将共享数组声明为`volatile`，则编译器可以自由地优化共享内存中的位置，方法是将它们定位在寄存器中（其范围特定于单个线程），对于任何线程，它都可以选择。无论您是否仅从一个线程访问该特定共享元素，这都是正确的。因此，如果您使用共享内存作为块的线程之间的通信工具，最好声明它`volatile`。但是，这种通信模式通常还需要执行障碍来强制读取/写入的顺序，因此请继续阅读下面的障碍。

显然，如果每个线程只访问它自己的共享内存元素，而不访问与另一个线程关联的元素，那么这无关紧要，编译器优化不会破坏任何东西。

在您的情况下，您有一段代码，其中每个线程都在访问它自己的共享内存元素，并且唯一的线程间访问发生在一个很好理解的位置，您可以使用[内存围栏函数](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#memory-fence-functions) 强制编译器驱逐任何临时存储在寄存器中的值，都将返回到共享数组。因此，您可能认为这`__threadfence_block()`可能有用，但在您的情况下，`__syncthreads()` [已经内置了内存防护功能](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#synchronization-functions)。因此，您的`__syncthreads()`调用足以强制线程同步以及强制将共享内存中的任何寄存器缓存值驱逐回共享内存。

顺便说一句，如果代码末尾的减少涉及性能问题，您可以考虑使用并行减少方法来加速它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2021-10-08T06:18:13.990

简单地说，对于其他会来这里的人：

调用`__syncthreads()`比将共享内存声明为`volatile`. `__syncthreads()`导致来自给定工作组的所有线程一起停止在 1 个公共点并同步内存。

`volatile`OTOH 通过阻止编译器进行任何缓存优化（因此可能会带来成本）来保持线程之间给定的内存缓冲区一致，但是每个线程都可以按照自己的节奏自由运行，这使得编译器/硬件能够执行各种调度优化。
（但请注意，如果写入由超过 1 个处理器指令组成，则volatile**不能保证数据完整性）**

总而言之，当您只需要线程之间的内存一致性，而不是在 1 点一起停止时，`volatile`通常会提供比`__syncthreads()`. 不过，您的数量可能会有所不同，具体取决于特定的算法甚至输入数据，因此如果您需要压缩最后一点性能，请测试这两种方法。

此外，如果工作组中的活动线程的数量小于 SIMD 宽度（warp 大小），则`volatile`可以使用，而不是使用`__synchthreads()`同一 warp 中的所有线程同步执行指令。例如，请参见[最后一个包装展开优化到并行缩减算法](https://developer.download.nvidia.com/assets/cuda/files/reduction.pdf)（幻灯片 21-23），它`__synchthreads()`首先使用，后来仅在`volatile`活动线程数小于扭曲大小时使用。

# php - 学习mysqli和pdo

> ID：15331010
> 
> 赞同：3
> 
> 时间：2013-03-11T04:02:47.857
> 
> 标签：php, mysql, pdo, mysqli

我是一个php和mysql初学者，目前正在学习“用php从web访问mysql数据库”一节，在这本书中，作者只使用了mysqli的例子，但是当我搜索google时，我发现pdo 比 mysqli 好一些，我的问题是：我应该逃避书中的 mysqli 并且只学习 pdo（来自网络）吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T04:11:20.537

是的，绝对直接去 PDO。

首先，要知道在从客户端获取输入时，您几乎应该总是进行参数化查询。PDO 在这方面要容易得多。（我说“几乎”是因为您有时可以通过 PHP 将客户端与数据库 100% 分开）

其次，PDO 更加紧凑，因此它需要的代码行数要少得多。

[有没有关于如何使用 PDO 的好教程？](https://stackoverflow.com/questions/1943069/are-there-good-tutorials-on-how-to-use-pdo)

底线：你迟早要学会它。为什么不早点？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T12:22:24.443

所有 mysqli 示例的问题 - 它们仅涵盖基本情况（即使它们非常冗长和臃肿）。
但是，当您尝试在任何实际应用程序中使用 mysqli 时，在处理准备好的语句时，它变成了一场真正的噩梦。只需尝试将值数组绑定到 IN() 运算符并查看。

因此，为了节省大量时间和精力，最好直接去 PDO，它是合理且方便的驱动程序。您可以从此处的[PDO 标签 wiki开始](https://stackoverflow.com/tags/pdo/info)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T04:10:46.187

您应该先阅读本书，然后再学习使用 PDO 准备的语句。没有真正的正确或错误的方法，所以学习两者都没有害处。

# java - 暂停程序直到点击 JButton

> ID：15331012
> 
> 赞同：0
> 
> 时间：2013-03-11T04:02:49.677
> 
> 标签：java, swing, jbutton

我四处寻找这个并没有得到明确的答案。我写了一个游戏，它需要暂停，直到用户点击他们决定的按钮，然后继续执行。有没有标准的方法来做到这一点？

我见过类似的问题涉及使用“wait()”和“notify()”，但我不确定是否需要添加更多线程，尤其是因为我没有执行复杂或耗时的代码。

我应该澄清它是棋盘游戏的计算机版本，所以只不过是一个带有一些组件的框架。这是我正在尝试做的一些事情，谢谢大家：

```
public class TreasureHunterFrame extends javax.swing.JFrame
{

    public TreasureHunterFrame()
    {
        initComponents();

        startNewGame();
    }

    private void startNewGame()
    {
        ...
        // User asked to click button while this method is running
        synchronized (this) // wait until Stay of Leave button is clicked
    {
        try 
        {
            while (!userHasMadeDecision)
        this.wait();
        }
        catch (InterruptedException ie)
        {
        }
        }
        ....

    }

    private void userStayButtonActionPerformed(java.awt.event.ActionEvent evt)
    {                                
        userHasMadeDecision = true;
        userLeaving = false;
        synchronized (this)
        {
        notifyAll();
        }
    }          

    public static void main(String args[])
    {

        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new TreasureHunterFrame().setVisible(true);
            }
        });
    }
} 
```

# shell - 如何使用 .sig 文件验证下载的文件？

> ID：15331015
> 
> 赞同：97
> 
> 时间：2013-03-11T04:02:56.477
> 
> 标签：shell, command-line, command, signature, verify

当我下载GCC时，它也有一个`.sig`文件，我认为它是为了验证下载的文件而提供的。[（我从这里](http://ftp.kaist.ac.kr/gnu/gnu/gcc/gcc-4.7.2/)下载了 GCC ）。

但我不知道我应该如何使用它。我试过`gpg`了，但它抱怨公钥。

```
[root@localhost src]# gpg --verify gcc-4.7.2.tar.gz.sig gcc-4.7.2.tar.gz
gpg: Signature made Thu 20 Sep 2012 07:30:44 PM KST using DSA key ID C3C45C06
gpg: Can't check signature: No public key
[root@localhost src]# 
```

如何使用文件验证下载的`.sig`文件？

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2015-04-19T16:57:02.180

您需要导入公钥：`C3C45C06`

可以分三步完成。

1.  查找公钥 ID：

    $ gpg gcc-4.7.2.tar.gz.sig gpg: Signature made Čt 20\. září 2012, 12:30:44 CEST using DSA key ID C3C45C06 gpg: Can't check signature: No public key

2.  从密钥服务器导入公钥。通常不需要选择密钥服务器，但可以使用`--keyserver <server>`. [密钥服务器示例。](http://en.wikipedia.org/wiki/Key_server_%28cryptographic%29#Keyserver_examples)

    $ gpg --recv-key C3C45C06 gpg: 从 hkp 服务器 keys.gnupg.net 请求密钥 C3C45C06 gpg: key C3C45C06: public key "Jakub Jelinek jakub@redhat.com" 导入 gpg: 没有找到最终信任的密钥 gpg: 处理的总数: 1 gpg: 进口: 1

如果命令错误超时，[您可能位于阻止默认 gpg 端口的防火墙后面。尝试使用带有端口 80 的 `--keyserver' 选项](https://serverfault.com/questions/168826/how-to-install-gpg-keys-from-behind-a-firewall)（几乎所有防火墙都允许端口 80 b/c 进行 Web 浏览）：

```
$ gpg --keyserver hkp://${HOSTNAME}:80 --recv-keys ${KEY_ID} 
```

3.  验证签名：

    $ gpg gcc-4.7.2.tar.gz.sig gpg: Signature made Čt 20\. září 2012, 12:30:44 CEST using DSA key ID C3C45C06 gpg: G​​ood signature from "Jakub Jelinek jakub@redhat.com" [未知] gpg: 警告：此密钥未经可信签名认证！gpg：没有迹象表明签名属于所有者。主键指纹：33C2 35A3 4C46 AA3F FB29 3709 A328 C3A2 C3C4 5C06

输出应显示“良好的签名”。

* * *

> gpg：警告：此密钥未经可信签名认证！

是另一个问题；）

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2014-04-24T09:33:08.227

这种其他途径对于验证 GNU 项目（例如[Octave](https://ftp.gnu.org/gnu/octave/)）特别有用，因为在任何密钥服务器中都可能找不到他们签名请求的密钥。

来自[https://ftp.gnu.org/README](https://ftp.gnu.org/README)

> 还有 .sig 文件，其中包含上述文件的分离 GPG 签名，由生成它们的同一脚本自动签名。
> 
> 您可以使用来自以下位置的密钥环文件验证**gnu 项目文件的签名**：
> 
> [https://ftp.gnu.org/gnu/gnu-keyring.gpg](https://ftp.gnu.org/gnu/gnu-keyring.gpg)
> 
> 在**包含密钥环文件、要验证的源文件和签名文件**的目录中，使用的命令是：
> 
> `$ gpg --verify --keyring ./gnu-keyring.gpg foo.tar.xz.sig`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-10T12:22:43.077

您必须在公共密钥服务器中搜索给定的密钥 ID：在您的情况下`ID C3C45C06` ，将找到的密钥导入本地密钥库，然后验证应该没问题。我使用的是 Ubuntu 12.04，它带有 Seahorse 密钥管理软件。在密钥导入之前，我看到了这个：

```
~/Downloads$ gpg --verify --keyring ./gnu-keyring.gpg icecat-31.5.0.en-US.linux-x86_64.tar.bz2.sig icecat-31.5.0.en-US.linux-x86_64.tar.bz2
gpg: Signature made  9.03.2015 (пн) 22,35,52 EET using RSA key ID D7E04784
gpg: Can't check signature: public key not found 
```

密钥导入后，我看到了这个：

```
~/Downloads$ gpg --verify --keyring ./gnu-keyring.gpg icecat-31.5.0.en-US.linux-x86_64.tar.bz2.sig icecat-31.5.0.en-US.linux-x86_64.tar.bz2
gpg: Signature made  9.03.2015 (пн) 22,35,52 EET using RSA key ID D7E04784
gpg: Good signature from "Ruben Rodriguez (GNU IceCat releases key) <ruben@gnu.org>"
gpg: WARNING: This key is not certified with a trusted signature!
gpg:          There is no indication that the signature belongs to the owner.
Primary key fingerprint: A573 69A8 BABC 2542 B5A0  368C 3C76 EED7 D7E0 4784 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T02:07:40.650

根据这个[http://gcc.gnu.org/mirrors.html](http://gcc.gnu.org/mirrors.html)应该是 Jakub Jelinek 并且有效。我不知道你会从哪里得到他的公钥。

# java - Axis2 使用甚至 BASIC 身份验证

> ID：15331023
> 
> 赞同：1
> 
> 时间：2013-03-11T04:03:42.060
> 
> 标签：java, web-services, axis2

甚至可能吗？文档没有说清楚。我尝试了各种不同的机制来使身份验证正常工作，但我不断收到“401：未经授权”错误。这是我所在的位置：

```
 stub = new EngineStub();

    HttpClient client = new HttpClient();
    client.getParams().setAuthenticationPreemptive(true);
    stub._getServiceClient().getServiceContext().getConfigurationContext().setProperty(HTTPConstants.CACHED_HTTP_CLIENT, client);

    HttpTransportProperties.Authenticator auth = new HttpTransportProperties.Authenticator();
    List<String> authpref = new ArrayList<String>();
    authpref.add(AuthPolicy.BASIC);
    auth.setAuthSchemes(authpref);
    auth.setUsername(username); 
    auth.setPassword(password);
    auth.setPreemptiveAuthentication(true);
    stub._getServiceClient().getOptions().setProperty(HTTPConstants.AUTHENTICATE, auth); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T12:33:34.277

你是什​​么意思axis2与BASIC AUTH一起工作？如果您的后端服务使用基本身份验证进行保护，您所要做的就是从客户端设置基本身份验证标头并发送请求。您的客户端代码看起来不错；不确定身份验证政策；尝试不这样；

```
 auth.setUsername(USER_NAME);
    auth.setPassword(PASSWORD);
    auth.setPreemptiveAuthentication(true);
    option.setProperty(org.apache.axis2.transport.http.HTTPConstants.AUTHENTICATE, auth);
    option.setManageSession(true); 
```

# python - Python 中后端图像处理的建议

> ID：15331031
> 
> 赞同：3
> 
> 时间：2013-03-11T04:04:17.110
> 
> 标签：python, image-processing, python-imaging-library

在我的网站上，我使用简单的文本覆盖。输入来自文本框，然后 javascript 使用输入进行 AJAX 调用，然后由 PIL（Python 图像库）在后端处理。

问题是，我对 PIL 文本覆盖的质量不满意 - 不可能做出漂亮的笔画（例如白色字体颜色 + 黑色笔画），我正在考虑切换到与 PIL 不同的解决方案。不过，我想继续使用 Python。

你会推荐什么用于 Python 中的图像处理？哪个图书馆提供最好的质量？

谢谢！

最好的，汤姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T05:04:42.047

如果您只想覆盖文本，我建议您只需使用`imagemagick`.

# mips - 如何在 MIPS 架构上获取当前 PC 寄存器值？

> ID：15331033
> 
> 赞同：6
> 
> 时间：2013-03-11T04:04:32.997
> 
> 标签：mips, backtrace, program-counter

我想在 MIPS 上做回溯。然后，我面临一个问题：我如何获得当前的PC寄存器值，因为它不属于32个普通寄存器..谢谢你的建议..

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-11T04:09:45.697

制作一个看起来有点像的子例程：

```
.text 
.globl GetIP 

GetIP:
move $v0, $ra
jr $ra 
```

然后调用例程；它会在调用后为您提供第一条指令的地址。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T04:18:11.083

在 jal 调用之后，它将被复制到 ra 寄存器中......所以你可以存储 ra，然后 jal 到下一行，读取 ra，恢复 ra。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-23T12:07:31.250

虽然这个问题没有被标记`c`，但我认为在`gcc`.

```
__attribute__((noinline)) static void *get_pc(void)
{
    void *pc;
    asm volatile ("move %0, $ra" : "=r"(pc));
    return pc;
} 
```

当然，解决方案的要点与当前接受的答案相同。由于该函数非常小，因此在打开优化时它是一个很好的内联候选。但是，如果该函数被内联，它的返回值将是无效的：它只会`ra`在调用函数中返回一些值，因为不会生成a `jal`or ，因此不会设置为/之后的指令。这就是为什么在这种情况下是必不可少的。`jalr``ra``jal``jalr``__attribute__((noinline))`

# css - 为什么我的动画 GIF 在浏览器和移动设备上如此缓慢？

> ID：15331034
> 
> 赞同：0
> 
> 时间：2013-03-11T04:04:41.557
> 
> 标签：css, safari, gif, animated-gif

为什么我的动画 GIF 在浏览器和移动设备上如此缓慢？我在烟花中将我的速度设置为 1/100，但在浏览器上却更慢……如何制作流畅的动画以显示为装载机？是压缩还是其他一些技巧？也许使用 SVG？

我已经看到那里的动画非常顺利，所以我想知道怎么做...

谢谢

**更新** 这是一个流体 gif 的例子：

[http://img-thumb.ffffound.com/static-data/assets/6/7462923e68408973396e8cafd5fccd9b414f73b3_s.gif](http://img-thumb.ffffound.com/static-data/assets/6/7462923e68408973396e8cafd5fccd9b414f73b3_s.gif)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T04:15:50.117

听起来我找到了自己。它可能是 Fireworks CS6 的错误或其他错误

基本上我以 1/100 秒的帧速率保存。每个州。由于某些原因，这会减慢 gif（可能会使浏览器过载）

通过为每个状态节省 3/100 就足以拥有超级流畅的动画！

# php - 如何在 PHP 字符串中添加撇号？

> ID：15331037
> 
> 赞同：1
> 
> 时间：2013-03-11T04:05:33.950
> 
> 标签：php, string, url, escaping

我的部分`PHP`代码包括以下`URL`字符串的构造：

```
$msg = $_REQUEST["msg"];
$content =  'action=sendmsg'. 
                '&user='.rawurlencode($username). 
                '&password='.rawurlencode($password). 
                '&to='.rawurlencode($destination). 
                '&text='.rawurlencode($msg); 
```

当`$msg`碰巧包含撇号时，它会以`"\'"`.

我需要做什么来确保反斜杠没有被插入`PHP`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T04:07:51.700

您可能想查看stripslashes：[http://php.net/manual/en/function.stripslashes.php](http://php.net/manual/en/function.stripslashes.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T04:09:55.070

假设您要发送`$content`变量而不是仅仅剥离反斜杠，请考虑使用[urlencode()](http://php.net/manual/en/function.urlencode.php)而不是`rawurlencode()`. 此外，您可以对`$content`变量使用该函数一次。

```
$content = urlencode($content); 
```

**更新：**两者都`urlencode`可能`rawurlencode`不适合您的情况。你为什么不直接发送`$content`没有 URL 编码？您如何发送我们的查询字符串？如果您使用 cURL，则不需要对参数进行编码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T05:43:23.493

你可以试试

1.  斜线
2.  或将字符串放入 "" 并在您想要的位置添加 '。

# python - 金字塔服务器不提供闪存文件

> ID：15331039
> 
> 赞同：1
> 
> 时间：2013-03-11T04:05:49.753
> 
> 标签：python, flash, pyramid

我正在运行这个 python 金字塔服务器。奇怪的是，当我将服务器代码移动到另一台机器时，pserve 停止在我的静态文件夹中提供 Flash 视频。而它服务于其他静态文件，如图像，很好！这可能是什么原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T07:28:48.643

Pyramid 的静态视图提供具有通过 python`mimetypes`模块确定的内容类型的文件。您很可能需要在启动时为您的安装添加对额外视频类型的支持。特别是在您的代码中的某处，类似于以下内容。

```
import mimetypes
mimetypes.init()
mimetypes.add_type(...) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T19:54:07.700

我可能在我的金字塔应用程序上遇到了类似的问题。我正在使用 TinyMCE 并将文件放在静态文件夹中。一切都在我的开发服务器上运行，但转移到测试和生产，并且找不到与 TinyMCE 相关的静态 .html 文件。

我的网络主机让我添加了一个符号链接，基本上我认为对服务器软件（在这种情况下为 nginix）进行硬编码，将我的静态 HTML 的网址硬编码到服务器路径，这很有效。

不过，我也必须检查 mimetypes 的东西。

# php - 在每个页面上显示页面内容的开始部分 - wordpress

> ID：15331040
> 
> 赞同：0
> 
> 时间：2013-03-11T04:05:55.150
> 
> 标签：php, content-management-system, wordpress

我在 wordpress 中建立了一个 211 模板站点，我只使用 CMS 中的页面（没有帖子）。我有一个名为“Classes”的页面，它的页面内容会定期更新。

我想在每个页面的右上角添加一个正方形，显示“课程”页面的开始部分，下面的“更多”链接可以将人们引导到“课程”页面。

目前，我只是在学习时在 content-page.php 中添加了一个 html div。有没有插件可以实现我的目标？或者你能否给我一些关于如何编码的指导（一些建议的代码或学习链接会有所帮助）？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T06:23:23.587

如果您尝试在 PHP 中执行此操作，您可以尝试类似这样的操作

```
<?php         
    $page_id = 11; //set page ID
    $page_data = get_page($page_id);
    $title = $page_data->post_title;
    $permalink = get_permalink($page_id);
    echo '<a href="'. $permalink .'">'. $title . '</a>';
    echo '<p>' . the_excerpt() . '<a href="'. $permalink . '">Read more</a></p>';
?> 
```

* * *

如果您需要此脚本的页面 ID，您可以使用它

```
<?php
     $pages = get_pages();
     foreach ( $pages as $page ) {
         echo 'ID: '. $page->ID . ' title: ' . $page->post_title.'<br>';
     }
?> 
```

* * *

如果您尝试基于小部件执行此操作，则需要确保这些步骤。

在 Twenty Twelve 主题中，您在**Widgets部分中有一个名为****Main Sidebar**的部分。在此区域中，您将添加您想要的小部件，并确保您希望小部件所在的所有**页面**都设置为“**默认主题**”而不是“全角页面模板，无侧边栏”。

 ******另外我不知道您是否对代码进行了任何更改，但如果有，您需要确保您的 wp-content/themes/twentytwelve/index.php 在页脚部分之前仍然具有此内容。

```
<?php get_sidebar(); ?> 
```

* * *

如果你想扩大你的小部件区域，你可以篡改控制宽度的 CSS，但要注意这可能会影响容器内项目的稳定性。

wp-content/themes/twentytwelve/style.css

线 1446 - 1449

编辑宽度

```
.widget-area {
    float: right;
    width: 26.041666667%;
} 
```

如果编辑了先前的值，您还需要编辑主站点内容以具有适当的比例百分比。

线 1437 - 1440

```
.site-content {
    float: left;
    width: 65.104166667%;
} 
```

* * *

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T04:43:12.437

### You don't have to use a plugin

The thing you are trying to achieve is quite easily done by editing your template files, depending on your needs. I will suggest the simplest solution, but perhaps you may transform this snippet into a widget for a more dynamic/maintainable usage.

1.  Edit the `page.php` template file in order to make something appear in every page of your Wordpress installation.

2.  Set up the desired layout for your box (perhaps `<div>` with some `float: right`).

3.  Get the page you desire and store it into a php variable, like so: `<?php $page = get_page( $page_id ); ?>`

4.  Get the position of the `<!--more-->` tag, using `stripos`.

5.  Get only the part before the `<!--more-->` tag, using `substr`.

6.  Apply `the_content` filters and then `echo`.

Your code will look a bit like this:

```
<div class="right-info">
    <?php
    $page = get_page(id);
    $more_tag = stripos( $page->post_content, '<!--more-->' );
    $excerpt = substr( $page->post_content, 0, $more_tag ); 
    echo apply_filters('the_content', $excerpt);
    ?>
</div> 
```******

# iphone - 立即执行 selector:withObject:afterDelay 触发，无延迟

> ID：15331042
> 
> 赞同：0
> 
> 时间：2013-03-11T04:06:04.207
> 
> 标签：iphone, ios, objective-c, selector

我有一个以前从未见过的非常奇怪的错误。我以前使用过这个代码数百次，但由于某种原因，afterDelay 被完全忽略了。

我的代码：

```
- (void)runIntro
{
if([self introDone])return;

UIImageView* back = [[UIImageView alloc] initWithFrame:[[AppDelegate shared] frame]];
[back setImage:[[AppDelegate shared] bgImage]];
[back setContentMode:UIViewContentModeScaleAspectFill];

[self.view addSubview:back];

UIImageView* target = [[UIImageView alloc] initWithFrame:CGRectMake(([[AppDelegate shared] width]-250)/2.0, ([[AppDelegate shared] height]-350)/2.0, 250, 72)];
[target setImage:[UIImage imageNamed:@"bpside.png"]];
[self.view addSubview:target];

Parabolic* wally = [[Parabolic alloc] initWithFrame:CGRectMake(([[AppDelegate shared] width]-200)/2.0, ([[AppDelegate shared] height]-314)/2.0+250, 200, 200)];
[wally setImage:[UIImage imageNamed:@"wallyside1.png"]];
[self.view addSubview:wally];

[self performSelector:@selector(moveWallyIntro:) withObject:wally afterDelay:1];
[self performSelector:@selector(moveWallyIntro:) withObject:wally afterDelay:2];
}

- (void)moveWallyIntro:(Parabolic*)wally
{
    [wally runPBM:50 withDY:300 withDuration:0.5];
} 
```

我知道所有其他代码都可以正常工作，但是无论出于何种原因，选择器都会**立即**执行，这会导致一个重大问题。此代码在`viewWillAppear`方法结束时运行。我以前用这种方式编程过很多次，这是我第一次看到这种情况发生。

更新：

如果我删除添加`back`UIImageView 的代码，这不再是问题。如何以像这样的纵横比填充格式添加**巨型图像（3000x2000），以免导致程序挂起？**我为 iphone、ipad 等使用相同的背景图像，因此对于视网膜 iPad 来说它需要很大......

# javascript - ES5 是否“使用严格”；影响关闭？

> ID：15331046
> 
> 赞同：0
> 
> 时间：2013-03-11T04:06:49.747
> 
> 标签：javascript, closures

如果我没记错的话，在严格模式下，函数无法访问全局对象（函数未定义“this”）。另一方面，内部函数需要访问其父级的“this”才能使闭包起作用。JavaScript 会在严格模式下对内部函数进行异常处理吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T04:29:11.390

`this`闭包与指针无关。闭包是函数式编程的概念，而不是面向对象的编程。`this`指针是面向对象编程的一个概念。两者都可以同时独立工作而不会引起问题。

例如，在严格模式下考虑以下函数：

```
function getCounter() {
    "use strict";

    var count = 0;

    return function counter() {
        return ++count;
    };
} 
```

这里调用`getCounter`返回一个闭包。该函数`counter` **关闭**value `count`。然后，您可以按如下方式使用返回的计数器：

```
var counter = getCounter();

counter(); // 1
counter(); // 2
counter(); // 3 
```

我认为您将闭包与嵌套函数混淆了。阅读以下主题。它很好地解释了闭包：[JavaScript 闭包与匿名函数](https://stackoverflow.com/q/12930272/783743)

在严格模式下，`this`指针指向`undefined`全局对象。否则你可以正常使用它。这可以防止您意外创建全局变量。但是，它不会造成任何阻碍。

例如，考虑以下构造函数：

```
function Counter() {
    "use strict";

    var count = 0;

    this.increment = function () {
        count++;
    };

    this.getCount = function () {
        return count;
    };
} 
```

您可以创建一个实例并按如下方式使用它：

```
var counter = new Counter;
counter.increment();
counter.getCount();        // 1 
```

但是，如果您忘记放置`new`then`this`将指向严格模式下的全局对象`undefined`。因此，尝试将方法分配`increment`给`this`将引发错误。

回到最初的问题，`this`如果您希望在嵌套函数中访问它，您始终可以将指针的值存储在另一个变量中。例如：

```
function Counter() {
    "use strict";

    var that = this;

    that.count = 0;

    return function counter() {
        return ++that.count;
    };
} 
```

我知道这是一个非常愚蠢的例子，但它包含了表达我的观点所需的所有元素。您现在可以按如下方式使用上述功能：

```
var counter = new Counter;

counter(); // 1
counter(); // 2
counter(); // 3 
```

这就是它的全部。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T04:20:22.737

通过您的问题，我相信您的意思是构造函数和实例对象。`use strict`pragma 不会影响它。通过表达式内的点或方括号表示法访问和调用函数类型对象的属性会自动将 设置为`ThisBinding`从中获取函数引用的对象。

```
function Foo() {}
Foo.prototype.someMethod = function() {
    console.log(this.blah);
};
var foo = new Foo();
foo.blah = 1;

//this:
foo.someMethod();
//implicitly does this:
foo.someMethod.call(foo); 
```

[**小提琴**](http://jsfiddle.net/v89Vm/2/)

[TJ 可能在Mythical Methods](http://blog.niftysnippets.org/2008/03/mythical-methods.html)中以更简单的方式解释了这种行为：

> `object.functionName()`[...] 当您使用从对象属性（例如，或）获取函数引用的表达式调用函数时`object['functionName']()`，该对象在函数调用中自动设置为“this”。

* * *

`use strict`仅当`this`未设置绑定（`null`或`undefined`）时才会有所不同，此处并非如此。

那么如你所知，`this`当输入函数代码时没有设置引用时，在非严格模式下它是指全局对象（`window`浏览器环境中的对象），而在严格模式下它是`undefined`. 见[ES5.1 第 10.4.3 节](http://es5.github.com/#x10.4.3)

* * *

现在，如果您的意思是将闭包作为另一个函数内部的函数，请使用旧的词法范围技巧。

```
function outerFunction() {
    var _this = this;
    function innerFunction() {
        // _this references the outerFunction's this
    }
} 
```

这种行为不受`use strict`两者的影响。

# sql - 将选择转换为存储过程的最佳方法

> ID：15331049
> 
> 赞同：0
> 
> 时间：2013-03-11T04:07:12.597
> 
> 标签：sql, firebird

我使用此 SQL 来获取每组类型的计数。

```
select 
    mytype, count(mytype)
from types1
group by 1 
```

结果是 5 条记录，每种类型都有计数。我需要将其转换为存储过程；我应该使用上面的 SQL 编写还是应该为每种类型`For...Select`使用 5 次返回单个值？`Select...Where...Into`

我将使用返回计数来更新主表，并且类型将来可能会增加。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T04:12:31.007

这取决于你想从程序中得到什么：

*   如果您想要与五行的选择相同的输出，请使用`FOR SELECT`. 您将获得每种类型的一行和相关的计数。这可能是“标准”方法。

*   但是，如果您想要五个输出变量，每种类型的每个计数一个，您可以使用形式为 的五个查询`SELECT COUNT(1) FROM types1 WHERE mytype = 'type1' INTO :type1`。尽管这将是五个查询，但您最好执行一个`FOR SELECT`查询并循环遍历过程中返回的行。另请注意，如果您在某个时候添加第六种类型，则必须更改此过程以添加其他类型。

*   如果要查询单个类型，还可以执行以下操作，这将返回输入参数中类型的单个计数的单行：

    ```
    CREATE PROCEDURE GetTypeCount(
        TypeName VARCHAR(256)
    )
    RETURNS (
        TypeCount INTEGER
    )
    AS
    BEGIN
        SELECT COUNT(1)
        FROM types1
        WHERE mytype = :TypeName
        INTO :TypeCount;

        SUSPEND
    END 
    ```

# asp.net-mvc-4 - 如何使 {controller}/{id}/{action} 在 MVC4 中工作？

> ID：15331050
> 
> 赞同：4
> 
> 时间：2013-03-11T04:07:18.543
> 
> 标签：asp.net-mvc-4

我已经尝试了一切，但看起来我根本没有得到它。我的 WebApiConfig.cs 看起来像这样：

```
config.Routes.MapHttpRoute(
    "Default",
    "api/{controller}/{id}",
    new { id = RouteParameter.Optional });

config.Routes.MapHttpRoute(
    "AccountVerification",
    "api/{controller}/{id}/{action}",
    null,
    new { controller = "Account" }); 
```

我的控制器看起来像这样：

```
public class AccountController : ApiController {
    public HttpResponseMessage GetByKey(Guid accountID) {
        ...
    }

    [HttpGet]
    [ActionName("Verify")]
    public HttpResponseMessage VerifyAccount(Guid accountID) {
        ...
    }
} 
```

这些方法应该会受到以下 URL 的欢迎：

```
GET /api/account                                        - WORKS
GET /api/account/00000000-0000-0000-000000000001        - WORKS
GET /api/account/00000000-0000-0000-000000000001/verify - DOESNT WORK 
```

我尝试了很多东西；我肯定在这里做错了什么......请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T10:30:43.523

首先，如果您想使用假 Guid 进行测试，并且具有可选的 Guid 参数，它们必须是 Nullable 参数（假 guid 将被反序列化为 null）：

```
public class AccountController : ApiController
{
    public HttpResponseMessage GetByKey(Guid? accountID)
    {
        throw new Exception("GetByKey " + (accountID.HasValue ? accountID.ToString() : "NULL"));
    }

    [System.Web.Http.HttpGet]
    [System.Web.Http.ActionName("Verify")]
    public HttpResponseMessage VerifyAccount(Guid? accountID)
    {
        throw new Exception("VerifyAccount "+(accountID.HasValue?accountID.ToString():"NULL"));
    }
} 
```

那么，您的映射应该：

*   首先使用最具体的路线
*   使用正确的参数名称
*   对动作使用正确的默认值

    ```
    config.Routes.MapHttpRoute(
        "AccountVerification",
        "api/{controller}/{accountID}/{action}"
        );

    config.Routes.MapHttpRoute(
        "Default",
        "api/{controller}/{accountID}",
        defaults: new { Controller="Account", action = "GetByKey", accountID = RouteParameter.Optional }
        ); 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T04:10:21.030

GET /api/account/00000000-0000-0000-000000000001/verify 匹配路由集合中的第一个路由。因此，它从不检查第二条路由是否匹配。将“api/{controller}/{id}/{action}”设置为集合中的第一个路由，它应该可以正常工作。

# windows-phone-7 - 在 Windows mobile 中存储数据

> ID：15331051
> 
> 赞同：0
> 
> 时间：2013-03-11T04:07:21.517
> 
> 标签：windows-phone-7, windows-mobile, windows-phone-8, windows-phone

我是一名 Windows Phone 开发人员。现在我正在为我之前为 windows phone 开发的 windows mobile 6.5 开发一个应用程序。

在我的应用程序中，我想存储一些用户凭据和一些应用程序设置。在 Windows Phone 中，我将其存储在 IsolatedStorageSettings 中。但是我怎样才能将它们存储在 windows mobile 中。?

windows mobile 中使用什么类似于 IsolatedStorageSettings ？我想让这个用户在手机中输入设置，直到应用程序卸载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T05:34:26.873

Windows Mobile（嵌入式手持设备）6.x 上的紧凑框架 (3.5) 不支持独立存储设置。

作为替代方案，您可以使用 xml 文件或注册表或 ini 文件。

另请参阅[在 Windows Mobile 应用程序中存储应用程序设置的首选方法是什么？](https://stackoverflow.com/questions/2232472/what-is-the-preferred-method-for-storing-application-settings-in-windows-mobile). 我更喜欢使用 xml 或 OpenNetCF AppSettings。

这是另一个作为 xml 的 AppSettings 实现：http: [//developers.de/blogs/andreas_lehmann/archive/2009/05/26/a-simple-implementation-of-config-files-for-windows-mobile.aspx](http://developers.de/blogs/andreas_lehmann/archive/2009/05/26/a-simple-implementation-of-config-files-for-windows-mobile.aspx)

# sqlalchemy - SQLAlchemy 中的别名联合

> ID：15331055
> 
> 赞同：2
> 
> 时间：2013-03-11T04:07:44.203
> 
> 标签：sqlalchemy

在 sqlalchemy 中，我试图合并表，然后使用`WHERE`and`ORDER_BY`

就像是

```
SELECT *
FROM (
  SELECT [TABLE_ONE].[SOME_ID] AS [SOME_ID]
  FROM [TABLE_ONE] 
  UNION 
  SELECT [TABLE_TWO].[SOME_ID] AS [SOME_ID]
  FROM [TABLE_TWO]
) AS anon_1
WHERE ... 
```

SQL炼金术：

```
select_q = select([TABLE_ONE.c.SOME_ID], TABLE_ONE)
select_w = select([TABLE_TWO.c.SOME_ID], TABLE_TWO)
union_qw = union(select_q,select_w) 
union_qw_aliased = aliased(union_qw)
s = select('*',union_qw_aliased) 
```

但 SQLAlchemy 生成 SQL 代码：

```
SELECT anon_1.[SOME_ID]
FROM (SELECT [TABLE_ONE].[SOME_ID] AS [SOME_ID]
FROM [TABLE_ONE] UNION SELECT [TABLE_TWO].[SOME_ID] AS [SOME_ID]
FROM [TABLE_TWO]) AS anon_1
WHERE SELECT [TABLE_ONE].[SOME_ID]
FROM [TABLE_ONE] UNION SELECT [TABLE_TWO].[SOME_ID]
FROM [TABLE_TWO] 
```

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T02:06:55.393

您误用了“select()”的第二个参数，它实际上是“whereclause”（尽管我们现在鼓励使用该`where()`方法）。FROM 子句通常隐含在您选择的列中。对于您的“选择 *”，我们可以使用以下方法设置显式 FROM `select_from()`：

```
from sqlalchemy import *

m = MetaData()
t1 = Table('t1', m, Column('id', Integer))
t2 = Table('t2', m, Column('id', Integer))

select_q = select([t1])
select_w = select([t2])
union_qw = union(select_q, select_w)
union_qw_aliased = union_qw.alias()
s = select('*').select_from(union_qw_aliased)

print s 
```

输出：

```
SELECT * 
FROM (SELECT t1.id AS id 
FROM t1 UNION SELECT t2.id AS id 
FROM t2) AS anon_1 
```

要在 WHERE 上做更多事情，请使用`where()`并针对 union_qw_aliased 执行此操作：

```
print s.where(union_qw_aliased.c.id == 5) 
```

输出：

```
SELECT * 
FROM (SELECT t1.id AS id 
FROM t1 UNION SELECT t2.id AS id 
FROM t2) AS anon_1 
WHERE anon_1.id = :id_1 
```

# ios - 图书馆？静止的？动态的？还是框架？另一个项目中的项目

> ID：15331056
> 
> 赞同：207
> 
> 时间：2013-03-11T04:07:49.213
> 
> 标签：ios, xcode, frameworks, static-libraries

我有一个现有的 iOS 应用程序，并且想要添加我一直在开发的大量代码作为另一个项目，只是为了便于测试。新块基本上处理将图像保存到各种共享服务等。因为共享代码需要大量测试和未来更新，我想知道将代码块合并到我现有应用程序中的最佳方法是什么。

我不知道它应该是静态库、动态库还是框架，老实说，我不确定有什么区别，或者我应该如何去做并在 Xcode 中设置它。

我所知道的是，我需要/想要为共享代码保留一个单独的测试和更新应用程序，并让主应用程序使用它。

* * *

## 回答 #1

> 赞同：248
> 
> 时间：2013-03-11T04:41:05.843

First, some general definitions (specific to iOS):

**Static library** - a unit of code linked at compile time, which does not change.

However, iOS static libraries are **not** allowed to contain images/assets (only code). You can get around this challenge by using a **media bundle** though.

A better, more formal definition can be found on Wikipedia [here](http://en.wikipedia.org/wiki/Static_library).

**Dynamic library** - a unit of code and/or assets linked at runtime that *may* change.

However, only Apple is allowed to create dynamic libraries for iOS . You're not allowed to create these, as this will get your app rejected. (See [this](https://stackoverflow.com/questions/4733847/can-you-build-dynamic-libraries-for-ios-and-load-them-at-runtime) other SO post for confirmation and reasoning on such).

**Software Framework** - a compiled set of code that accomplishes a task... hence, you can actually have a **static framework** or a **dynamic framework**, which are typically just the compiled versions of the above.

See the [Wiki on Software Framework](http://en.wikipedia.org/wiki/Software_framework) for more details.

Hence on iOS, your only option is basically to use a static library or static framework (the main difference being that a static framework is distributed as a compiled `.a` file most often, whereas a static library may simply be included as a subproject - you can see all of the code - which is compiled first and its resulting `.a` file used as a dependency by the project).

Now that we're clear(er) on these terms, setting up a static library and supporting media bundle for iOS isn't too difficult, and there are many tutorials on how to do such. I personally would recommend this one:

[https://github.com/jverkoey/iOS-Framework](https://github.com/jverkoey/iOS-Framework)

This is a pretty straight-forward guide and doesn't have the disadvantage of dealing with "fake static libraries"... check it out for more info...

Once you've created your static library, it's as easy as including it as a *submodule* within Git for use across different projects.

Good Luck.

**EDIT**

Regarding a *subproject* within a project, as far as I know, to get this to work/compile correctly, you essentially have to set up a compile chain where the subproject is compiled first, which creates a static framework `.a` file that is used as a dependency by the project.

Here's another useful tutorial which talks about this:

[http://www.cocoanetics.com/2011/12/sub-projects-in-xcode/](http://www.cocoanetics.com/2011/12/sub-projects-in-xcode/)

**EDIT 2**

As of iOS 8, Apple now permits developers to create dynamic frameworks! (Note: your app must have a minimum target of iOS 8 to include a dynamic framework... back porting isn't allowed.)

This has been added as a new project template. In Xcode 6.1, this can be found at:

```
New Project -> iOS -> Framework & Library -> Cocoa Touch Framework 
```

* * *

## 回答 #2

> 赞同：73
> 
> 时间：2019-12-06T15:38:28.897

**Mach-O 文件格式(Mach Object - `.o`)**

在 iOS 世界中，每个源文件都被转换为目标文件 - ABI [^([About])](https://stackoverflow.com/a/59271017/4770877) Mach-O 文件[^([About])](https://stackoverflow.com/a/59214522/4770877)将被打包成最终的可执行**包**（应用程序、框架）、**文件**（库），它的行为由`Mach-O type`[^([About ])](https://stackoverflow.com/a/61035316/4770877)

`Package`是一个本身作为文件的目录 - `opaque file`. 它是为**用户体验**而创建的，以使对内部结构进行一些更改变得复杂，这可能导致不可预测的程序行为。包用于`Document Package`或与`Bundle`. 您可以`Show Package Contents`在 Finder中使用

`Bundle`是一个具有特定结构的目录，用于组织二进制文件（可执行代码）和该代码的资源（例如图像、笔尖... Assets.car 文件[^([关于])](https://stackoverflow.com/a/61040332/4770877)）。Bundle 包含`Info.plist`[^([关于])](https://stackoverflow.com/a/61118898/4770877)文件。Bundle 是为**开发人员体验**而创建的。也可以打包。有几种类型的捆绑包：

*   `application bundle`-`Application target`
*   `framework bundle`并`versioned bundle`作为一个子类型 -`Framework Target`
*   `loadable bundle`(aka `plug-in bundle`) - '... Bundle' (UI Testing Bundle, Unit Testing Bundle) - 可以在运行时加载。`.bundle`Mac OS 的扩展
*   [Mac OS] `XPC Service`- 跨进程通信是一种进程间通信（IPC）。它可以用作**不同进程**上的模块（由`launchd`根进程管理）[^([关于])](https://stackoverflow.com/a/66371178/4770877)
*   其他（`dSYM`[^([关于])](https://stackoverflow.com/a/62219237/4770877)捆绑）

`Application`- `.ipa`, `.app`[^([关于])](https://stackoverflow.com/a/61027062/4770877) - `packaged` `application bundle`- 可启动程序。

[`Application extension`](https://developer.apple.com/library/archive/documentation/General/Conceptual/ExtensibilityPG/)[^([关于])](https://stackoverflow.com/a/66520509/4770877) - 从 iOS v8 - 扩展应用程序的功能，当用户与其他应用程序交互时可用。`App extension`作为捆绑包的一部分，`Containing app`但它在自己的沙箱（处理器，内存...）上运行，尝试使用的应用程序`app extension`称为`Host App`. 扩展应用程序的类型：

*   行动
*   分享
*   照片编辑
*   今天又名小部件
*   ...

共享通用代码和资源。部署目标为 iOS 8+ 时可用。

`Tests`-`packaged` `loadable bundle`用于测试二进制文件。插件架构允许我们将新功能（测试用例）作为单独的模块添加到现有二进制文件中

**库和框架**

[[库与框架]](https://stackoverflow.com/a/66808163/4770877)

[Martin Fowler 谈 InversionOfControl](https://martinfowler.com/bliki/InversionOfControl.html)

> 库本质上是一组可以调用的函数，现在通常组织成类。每个调用都会做一些工作并将控制权返回给客户端。
> 
> 框架体现了一些抽象设计，内置了更多行为。为了使用它，您需要通过子类化或插入您自己的类将您的行为插入到框架中的各个位置。然后，框架的代码会在这些点调用您的代码。程序的主要控制是倒置的，从你移到框架上。这种现象就是控制反转（也称为好莱坞原则 - “不要打电话给我们，我们会打电话给你”

**iOS 上的库和框架**

它们可以帮助您解决：模块化、重用、封装、缩短构建时间

`Library`是为一个或多个架构编译的 Mach-O 目标文件[^([检查静态或动态])](https://stackoverflow.com/a/61027434/4770877)的集合。

`Static library`- `.a`（又名静态存档库，静态链接共享库[^([doc])](https://developer.apple.com/library/archive/documentation/DeveloperTools/Conceptual/DynamicLibraries/100-Articles/OverviewOfDynamicLibraries.html#//apple_ref/doc/uid/TP40001873-SW1)） - 当您将其添加到应用程序中时，**静态链接器**在**编译期间**将合并库中的目标文件并将它们与应用程序目标文件一起打包成一个可执行文件文件。缺点是输出文件大

从 Xcode 9.0 开始，支持 Swift 静态库。

`Dynamic library`- `.dylib`（又名动态共享库、共享对象、动态链接库[^([doc])](https://developer.apple.com/library/archive/documentation/DeveloperTools/Conceptual/DynamicLibraries/100-Articles/OverviewOfDynamicLibraries.html#//apple_ref/doc/uid/TP40001873-SW1)）在**加载或运行时**与应用程序的可执行文件**动态链接**，但不会复制到其中。在练习应用程序的包将包含带有文件的 Frameworks 文件夹。所有 iOS 和 macOS**系统**库都是. 缺点是启动时间很慢，因为所有动态库都应该被复制和链接。**`.dylib`**`dynamic`****

 ****[[静态与动态链接]](https://stackoverflow.com/a/61140381/4770877)

`Text-based stub library`- `.tbd`[^([关于])](https://stackoverflow.com/a/55560213/4770877)，它`dynamic library`是位于目标设备上的文本存根。因此，您不应该将动态库打包到您的包中。它具有尺寸效应。

`Framework`aka `binary framework`-`.framework`是一个`not packaged framework bundle`（允许开发人员轻松查看头文件和资源），其中包含已编译的`static or dynamic`库、头文件和资源。

`Static framework`包含一个`static library`与其资源一起打包的。

`Dynamic framework`aka [`Embedded framework`](https://developer.apple.com/library/archive/documentation/General/Conceptual/ExtensibilityPG/ExtensionScenarios.html#//apple_ref/doc/uid/TP40014214-CH21-SW1)- 来自 iOS v8 - 包含`dynamic library`和 资源。除此之外，动态框架可以在单个包中包含同一动态库的不同版本 ( `versioned bundle`)。也`Embedded framework`用于`App Extension`

[[静态与动态框架]](https://stackoverflow.com/a/57741985/4770877)

[`Umbrella framework`](https://developer.apple.com/library/archive/documentation/MacOSX/Conceptual/BPFrameworks/Concepts/FrameworkAnatomy.html#//apple_ref/doc/uid/20002253-97623-BAJJHAJC) [^(【聚合目标】)](https://stackoverflow.com/a/59215042/4770877)是一个包含其他框架的框架。它在 iOS 上不受官方支持，这就是为什么**不建议**开发人员创建它们[^([Official doc])](https://developer.apple.com/library/archive/technotes/tn2435/_index.html#//apple_ref/doc/uid/DTS40017543-CH1-PROJ_CONFIG-APPS_WITH_DEPENDENCIES_BETWEEN_FRAMEWORKS)。实际上，它是一组子框架（或嵌套框架）。当您创建具有依赖项的框架时，消费者（例如应用程序）负责将此依赖项与您的框架一起添加到项目中。作为开发人员，很自然地尝试找到一种方法将这一职责从消费者转移到您的职责。结果，您认为这`Umbrella framework`是一种拯救，但通常它会导致管理版本以及创建和支持它的复杂性方面出现严重问题。

`Fake Framework`- 是在 a 下的特定操作的结果，`static library`以创建具有`.framework`扩展名的捆绑包，其行为将与`dynamic framework`. 当 Xcode 不支持创建框架时使用此技术，因为没有框架模板。[假框架](https://github.com/kstenerud/iOS-Universal-Framework)的实现之一。在 Xcode 6 中，Apple 添加了 iOS 框架支持。

`Modular Framework`[^([关于])](https://stackoverflow.com/a/59213694/4770877) -`@import`它是一个框架，其中包含一个`.modulemap`文件。模块可以包含子模块。主要优点是您可以节省构建时间`Modular Framework`。

`Universal Library or Framework`(aka Fat) [^([lipo])](https://stackoverflow.com/a/59215277/4770877) [^([Aggregate target])](https://stackoverflow.com/a/59215042/4770877)包含多种架构。例如，您的发布版本应该支持某个拱门，您可以通过`Build Active Architecture Only` [^([ONLY_ACTIVE_ARCH]对其进行调节)](https://stackoverflow.com/a/59215429/4770877)

`XCFramework`[^([About])](https://stackoverflow.com/a/67181295/4770877)由 Xcode 11 引入，它是一个`bundle`包含多种架构（arm、x86_64...）和平台（iOS、MacOS...）的产品。它应该替换一个`Universal Framework`

`Dependency`[^([关于])](https://stackoverflow.com/a/59215808/4770877)您可以使用第三方代码作为目标的一部分。它允许您重用来自许多来源的代码，例如 - 另一个项目、同一工作区中的项目、另一个目标、库、框架等。

**如何构建和使用静态库：**

*   [[Swift 消费者 -> Swift 静态库]](https://stackoverflow.com/a/55899567/4770877)
*   [[Swift 消费者 -> Objective-C 静态库]](https://stackoverflow.com/a/59215981/4770877)
*   [[Objective-C 消费者 -> Swift 静态库]](https://stackoverflow.com/a/59216016/4770877)
*   [[Objective-C 消费者 -> Objective-C 静态库]](https://stackoverflow.com/a/59216038/4770877)

**如何构建和使用动态框架[^([更改为静态])](https://stackoverflow.com/a/57741985/4770877)**

*   [[Swift 消费者 -> Swift 动态框架]](https://stackoverflow.com/a/59216060/4770877)
*   [[Swift 消费者 -> Objective-C 动态框架]](https://stackoverflow.com/a/59216086/4770877)
*   [[Objective-C 消费者 -> Swift 动态框架]](https://stackoverflow.com/a/59216102/4770877)
*   [【Objective-C消费者->Objective-C动态框架】](https://stackoverflow.com/a/59216112/4770877)

[[Xcode 构建系统]](https://stackoverflow.com/a/59216120/4770877)
[[Xcode 组件]](https://stackoverflow.com/a/59215808/4770877)
[[动态链接器]](https://stackoverflow.com/a/59216681/4770877)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-06T11:43:51.107

您还可以为 CocoaPods ( [http://guides.cocoapods.org/making/private-cocoapods.html#1.-create-a-private-spec-repo](http://guides.cocoapods.org/making/private-cocoapods.html#1.-create-a-private-spec-repo) ) 创建 .podspec 文件，并像使用任何其他 pod 一样使用它唯一的区别是它是您的私有 pod，并且对外界不可见（我不确定如果您的 pod 应该创建 CoreData 模型会发生什么，但据我了解，情况并非如此）。****

# r - igraph：具有每个顶点的中心性度量和每个顶点的属性的 csv 文件

> ID：15331057
> 
> 赞同：0
> 
> 时间：2013-03-11T04:07:51.540
> 
> 标签：r, attributes, igraph, vertex, edge-list

我有 2 个数据库：

1.  边缘列表，
2.  带有属性的顶点列表（地理位置和演员类别）

我从数据库 db 中的边列表构建了一个图 G：

```
G <- graph.edgelist(cbind(db.$Source,db$Target)) 
```

我计算了中心性度量（度、介数）。

而且我能够从我的另一个 CSV 表中获取顶点属性，其中包含每个顶点的所有属性。

但是我找不到将顶点列表中每个顶点的属性赋予边缘列表中的顶点的方法（我的顶点列表中的顶点比边缘列表中的顶点多）

因此，我无法构建包含以下列的最终 csv 文件：顶点 ID、顶点名称、顶点属性、顶点度数、顶点介数。我可以用 Id、名称和度数+介数构建这样的文件，但我找不到给出每个顶点属性的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T06:11:00.397

简而言之，使用该`graph.data.frame()`函数构建您的图表，将中心性度量添加为属性，然后`get.data.frame()`再次将其转换为数据框。

# c++ - 在 C++ 中读取由不同进程/线程修改的文件

> ID：15331060
> 
> 赞同：0
> 
> 时间：2013-03-11T04:08:01.743
> 
> 标签：c++, multithreading, file, ifstream

我想动态读取附加内容的文件。由另一个线程写入的文件。我正在使用 ubuntu，并查看了 inotify，但想尝试并为此实现一种简单的方法，因为我只需要阅读附加的内容。我尝试如下：

```
ifstream logFile("path_to_file", ifstream::in);
if(logFile.fail()) {
    cout << "file not found" << endl;
    exit(0);
}

while (true) {
    string line;
    getline(logFile, line);
    if( logFile.eof() ) {
        //wait for 2 seconds
        logFile.clear();
    }
    if(!line.empty())
        cout << line << endl; 
```

但是，当遇到 EOF 时，当最后附加更多内容时，即使我调用 clear() 来清除错误条件，该标志也不会重置。这种方法可能存在什么问题？我需要以共享模式打开文件吗？

谢谢。

# ruby-on-rails - Rails 载波多态附件 - 未定义的方法“图像 will_change！” 错误

> ID：15331063
> 
> 赞同：1
> 
> 时间：2013-03-11T04:08:06.750
> 
> 标签：ruby-on-rails

我正在开发一个名为 Chapter 的模型，它允许用户使用carrierwave 上传多个图像（+ 一个单独的缩略图）。我创建了一个名为 Attachment 的多态模型来安装上传器。

**章节**

```
class Chapter < ActiveRecord::Base
  attr_accessible :title, :uploader_comment, :book_id, :attachments_attributes

  has_many :comments, as: :commentable
  has_many :attachments, as: :attachable

  accepts_nested_attributes_for :attachments

  belongs_to :book
  belongs_to :user

  validates :title, presence: true, length: {maximum: 60}
  validates :book_id, presence: true
  validates :uploader_comment, length: {maximum: 150}
  validates :user_id, presence: true 
  validates :attachments, presence: true
end 
```

**附件**

```
class Attachment < ActiveRecord::Base
    attr_accessible :chapter_image, :chapter_thumb

    belongs_to :attachable, polymorphic: true

    mount_uploader :chapter_image, ChapterImageUploader
    mount_uploader :chapter_thumb, ChapterThumbnailUploader

    validates_presence_of :chapter_image

end 
```

写完上述代码后，我尝试提交表单，但最终得到 **“未定义的方法 `chapter_image_will_change!' 为...”**错误。经过一番搜索，我在另一篇文章中看到我需要运行一些迁移才能摆脱错误。所以我做了以下。

```
rails g migration AddAttachmentToChapters 
  chapter_image:string chapter_thumb:string

bundle exec rake db:migrate 
```

但错误仍然存​​在。我将包括我的视图页面代码，以防万一它会有所帮助。

**新的.html.erb**

```
<div class = "row">
  <div class = "span6 offset3">

    <%= simple_nested_form_for @chapter, html: {multipart: true}, 
        defaults: {required: false} do |f| %>

      <%= render 'shared/error_messages', object: @chapter %>

      <%= f.association :book, collection: current_user.books.all, 
                        tag: :book_id, include_blank: false %>

      <%= f.input :title, label: 'Chapter title' %>

      <%= f.input :uploader_comment %>

      <div class = "control-label">
        Image file upload
      </div>
      <%= f.simple_fields_for :attachments do |attachment_form| %>
        <%= attachment_form.file_field :chapter_image %>
        <%= attachment_form.link_to_remove 'Remove' %>
      <% end %>
      <%= f.link_to_add 'Add image', :attachments %>
      <span class="hint_end">Acceptable file formats: JPG, JPEG, GIF, PNG</span>

      <div class = "control-label">
        Thumbnail upload
      </div>
      <%= f.file_field :chapter_thumb %>
      <span class="hint_end">Acceptable file formats: JPG, JPEG, GIF, PNG</span>

      <%= f.submit "Upload chapter" %>

    <% end %>
  </div>
</div> 
```

欢迎任何建议/帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T05:55:14.640

您需要将缺少的列添加到`Attachment`模型中，而不是`Chapter`：

```
rails g migration AddImageToAttachments chapter_image:string chapter_thumb:string 
```

# java - 检索给定月份的一周的第一天

> ID：15331065
> 
> 赞同：0
> 
> 时间：2013-03-11T04:08:24.627
> 
> 标签：java, calendar

鉴于此代码，它将打印出正确的月份和年份，但似乎显示通常不正确的随机日期。我查看了一些链接，包括[这里](http://www.java-examples.com/display-day-week-using-java-calendar)和[这里](https://stackoverflow.com/questions/8997228/how-to-get-the-first-day-of-a-month)

```
import java.util.Calendar;
import javax.swing.JOptionPane;
public class DayOfTheWeek {
  Calendar now = Calendar.getInstance();
  int month;
  int year;
  String[] monthString;
  public String monthOfInspection() {
    String Month = JOptionPane.showInputDialog("Select month of inspection: ");
    month = Integer.parseInt(Month);
    monthString = new String[] {
      "Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sept", "Oct", "Nov", "Dec"
    };
    return monthString[month - 1];
  }
  public int yearOfInspection() {
    if(month == 1) {
      now.get(Calendar.YEAR);
      now.add(Calendar.YEAR, 1);
    }
    year = now.get(Calendar.YEAR);
    return year;
  }
  public void dayOfTheWeek() {
    now.set(Calendar.DAY_OF_MONTH, 1);
    now.set(Calendar.MONTH, month);
    now.set(Calendar.YEAR, year);
    now.set(Calendar.DAY_OF_WEEK_IN_MONTH, 0);
    String[] strDays = new String[] {
      "Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"
    };
    JOptionPane.showMessageDialog(null, year);
    JOptionPane.showMessageDialog(null, monthString[month - 1]);
    JOptionPane.showMessageDialog(null, now.get(Calendar.DAY_OF_WEEK_IN_MONTH));
    JOptionPane.showMessageDialog(null, strDays[now.get(Calendar.DAY_OF_WEEK_IN_MONTH) - 1]);
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T04:20:21.160

您可能应该使用`Calendar.DAY_OF_WEEK`而不是`Calendar.DAY_OF_WEEK_IN_MONTH`.

```
public void dayOfTheWeek() {
    now.set(Calendar.YEAR, year);
    now.set(Calendar.MONTH, month);
    now.set(Calendar.DAY_OF_MONTH, 1);

    String[] strDays = new String[] {
      "Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"
    };
    JOptionPane.showMessageDialog(null, year);
    JOptionPane.showMessageDialog(null, monthString[month - 1]);
    JOptionPane.showMessageDialog(null, now.get(Calendar.DAY_OF_WEEK));
    JOptionPane.showMessageDialog(null, strDays[now.get(Calendar.DAY_OF_WEEK) -     1]);
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T04:31:18.203

假设你有正确的`month`，`year`这是你可以做的：

```
now.set(Calendar.DATE, 1);
now.set(Calendar.MONTH, month);
now.set(Calendar.YEAR, year);
int dayOfWeek = now.get(Calendar.DAY_OF_WEEK); 
```

# android - 通过蓝牙串行端口配置文件将 Android 应用程序连接到 OS X 时出现问题

> ID：15331067
> 
> 赞同：3
> 
> 时间：2013-03-11T04:08:47.467
> 
> 标签：android, macos, bluetooth, serial-port, osx-lion

我正在尝试从 android 应用程序（设备版本 2.2“Froyo”）连接到我的 MacBook Pro（OS X v10.8“Mountain Lion”）上的蓝牙端口。

从 BluetoothChat 示例开始，我删除了服务器端代码（只需要客户端），并针对 API 8 级兼容性进行了更新。我可以很好地配对，但随后我收到一个`IOException: Connection Refused`错误`bluetoothSocket.connect()`。

我正在使用标准的串行端口配置文件 UUID `00001101-0000-1000-8000-00805f9b34fb`，并且我验证了它是否支持使用反射，如 [缺失手册：Android 蓝牙 RFCOMM中所示](http://wiresareobsolete.com/wordpress/2010/11/android-bluetooth-rfcomm/)

[在对 Stack Overflow](https://stackoverflow.com/questions/2660968)和[Google 代码论坛](http://code.google.com/p/android/issues/detail?id=5427)进行了一些研究之后， 我尝试使用反射来获取套接字，这给了我相同的结果。

我尝试过在 OS X 中使用蓝牙端口设置，但我找不到任何文档，而且我不知道应该设置哪些选项。

我在主首选项面板中检查了“可发现”：
![蓝牙首选项](../Images/0be8a92c10fe5042818e54d6352467a0.png)

我找到了默认隐藏的串行端口菜单。首先，您必须单击选项-> 显示更多信息。然后再次单击选项，您应该会看到“编辑串行端口...”。我不知道在这里设置什么： ![编辑串行端口菜单](../Images/0ef93c593b106946b849a52116d0b670.png)

“高级”窗格中有更多串行端口设置： ![蓝牙高级首选项](../Images/f60e2c0a260e3cd36915dad3fb17d224.png)

任何人都有这方面的经验，或者知道这些选项是什么意思？

**编辑**
我正在[OSX 终端](http://www.tigoe.net/pcomp/resources/archives/avr/000749.shtml)中在所有由`ls /dev/tty.*`. 如链接所示，我基本上使用`screen /dev/tty.<port name> <datarate>` 我一直在使用 9600 作为数据速率，尽管我不知道这是否重要。

# perl - 检查SCP中已经存在的特定用户名

> ID：15331071
> 
> 赞同：0
> 
> 时间：2013-03-11T04:09:28.643
> 
> 标签：perl, scp

我想检查用户名是否已存在于特定主机中或未使用 SCP。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T04:27:54.003

（为了将来的访问者，将评论中的答案转换为实际答案，）

您可能会取得一些成功[`finger(1)`](http://linux.die.net/man/1/finger)。

但正如@tjameson 在评论中所说，“它可能不可用，因为它是一个巨大的[安全漏洞](http://en.wikipedia.org/wiki/Finger_protocol#Security_concerns)。”

您可能想要重新评估您要实现的功能。

# jsf - 在 project_stage 开发中，JSF 页面在加载期间闪烁

> ID：15331073
> 
> 赞同：2
> 
> 时间：2013-03-11T04:09:42.427
> 
> 标签：jsf

我有一个带有 9 个 InputText 框和 2 个 InputSecret 框的 JSF 页面。这些盒子中的每一个都有一个连接到属性文件的标签、一个验证器（带有一条消息），并包含一个连接到命名会话范围 bean 的 EL 表达式。我使用 Glassfish 3.1.2.1 作为应用服务器。如果我将 project_stage 设置为 Development，则在加载或刷新此页面时会看到明显的闪烁。它发生得非常快，但看起来好像背景（正文）在页面加载之前被清除为白色。如果我将项目阶段设置为生产，我看不到闪光灯。导致这种行为的 Project_Stage 开发是做什么的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T14:43:13.273

当从 HTTP 响应接收到的第一个字节和最后一个字节之间需要一些时间时，这是浏览器特定的行为。一些浏览器在收到第一个字节时会显示空白，并在收到最后一个字节时显示整个新页面。人眼的帧速率约为 25fps（电视正在使用）。任何比这更快的东西对人类来说是不明显的。但是任何比这慢的东西都会导致空白可见。

开发阶段导致某些部分没有被缓存，因此源文件中所做的最新更改立即可见，例如 Facelets 源文件。它们都在每个请求的基础上重新编译和重新解析。所有这些都会导致页面加载时间稍长一些，因此当浏览器空白显示超过大约 1/25 秒时，它很快就会显示出来。

您可能需要考虑将 Facelets 缓冲区大小`web.xml`增加到最大 HTML 输出的大小，以便一次性发送响应，而不是分批发送，这可能需要更多的预处理时间。

例如 64KB：

```
<context-param>
    <param-name>javax.faces.FACELETS_BUFFER_SIZE</param-name>
    <param-value>65535</param-value> <!-- 64KB -->
</context-param> 
```

# backbone.js - 在初始化函数之外获取主干视图的“this”对象

> ID：15331075
> 
> 赞同：1
> 
> 时间：2013-03-11T04:09:54.247
> 
> 标签：backbone.js, backbone-views

我正在尝试访问在主干视图的初始化函数中返回的 this 对象。在我的初始化函数中，我将

```
console.log(this) 
```

它将返回该视图的对象。当我通过我的命名空间架构直接访问视图时，例如：

```
console.log(mysite.some.namespace.View) 
```

我得到以下返回：

```
function (){a.apply(this,arguments)} 
```

除了将它记录到我的初始化函数中之外，我如何访问“this”对象？

# azure - 使用 Azure 云服务构建多服务企业应用程序

> ID：15331077
> 
> 赞同：0
> 
> 时间：2013-03-11T04:10:17.997
> 
> 标签：azure

我对使用 azure 云服务构建企业应用程序有一些疑问。

返回故事

我们有一个由 SQL 后端上的十几个 WCF Windows 服务组成的系统。我们目前有大约 10 个客户端，但预计可能会增长到 100 个，系统的吞吐量需求可能会增加 100 倍。当前的系统设计不佳，根本无法扩展。因此，现在似乎是在 azure 平台上重新设计的合适时机。

工艺流程

让我简要描述一组简化的服务和流程，然后问一些关于使用 azure 云服务构建新系统的问题。

服务 A 登录到外部系统并持续下载数据

服务 B 登录到第二个外部系统并持续下载数据

服务 A 和 B 中的每一个都只能有一个登录实例。

A 和 B 都将他们的数据传递给服务 C，后者协调来自两个外部源的数据。

然后将经过验证和核对的数据从 C 传递到服务 D，后者执行一些记帐功能，然后将结果数据传递给服务 E 和 F。

服务 E 不断登录到外部系统并向其上传数据。

服务 F 生成报告并通过 FTP 等发布给客户端

该系统实际上远比这复杂得多，但上面说明了所涉及的过程。该系统每周 6 天、每天 24 小时运行。队列将用于缓冲所有服务之间的消息传递。

我们可以使用 Azure 持久性虚拟机构建这个系统，并利用服务总线、队列等，但这会将我们与垂直扩展策略联系起来。鉴于以下问题，我们如何利用云服务来实现它。

问题

1.  鉴于服务 A、B 和 E 永久登录到外部系统，每个系统只能有一个活动实例。如果我们将这些实现为单实例工作者角色，则会出现停机和修补问题（这是不可接受的）。如果我们为每个实例创建两个实例，是否有一种标准方法可以在 azure 上使用工作角色实现主动-被动负载平衡，或者我们是否必须构建自己的负载平衡器？这个问题有没有我没有想到的另一种解决方案？

2.  服务 C 和 D 是使用多个工作角色实例进行扩展的良好候选者。然而，每个实例都必须处理相关数据。例如，我们可以有 4 个实例，每个实例为 5 个单独的客户处理数据。我们如何让每个实例分组处理消息（以客户端为中心）？此外，在进行修补等时，我们如何将负载从一个实例重新分配到其余实例。例如，如果为 5 个客户端处理数据的实例 1 因操作系统修补而停机，则其客户端的数据必须是由其余实例处理，直到它再次恢复。同样，如果我们决定增加额外的工作者角色，我们如何重新分配负载？

您能提供的任何见解或建议将不胜感激。

垫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T04:29:47.103

问题 #1：您必须实现自己的负载平衡。这应该不会非常复杂，因为您可以使用 Blob 存储租用功能在一个实例的存储中的某个 Blob 上保留互斥锁，同时保持与外部系统的连接处于活动状态。如果您知道连接仍然有效且成功，则可以每隔 X 时间续订一次租约。角色中的每个其他工作人员都可以检查该租约以查看它是否过期。如果它过期了，下一个工作人员会加入并获取租约，然后打开与外部源的连接。

问题 #2：查看 Azure 服务总线。它具有允许客户端处理相关消息的能力。更多信息在这里： http: [//geekswithblogs.net/asmith/archive/2012/04/02/149176.aspx](http://geekswithblogs.net/asmith/archive/2012/04/02/149176.aspx) 所有排队方法都意味着如果一条消息被拾取但没有在可配置的时间内得到处理，它就会去回到队列中，以便下一个可用实例可以拾取并处理它

您可以使用[AzureWatch](http://www.paraleap.com)之类的工具来监控队列的深度（存储或服务总线）并自动缩放 C 和 D 角色中的实例数量以匹配；并监控角色 A、B 和 E 的实例状态，以确保那里始终有一个健康的实例，并在就绪实例的数量降至 0 时自动扩展。

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T14:45:51.433

首先，后退一步。在查看 Windows Azure 上的应用程序架构时，我做的第一件事就是确定该应用程序是否适合迁移到 Windows Azure。我特别关注应用程序中有多少集成——集成总是比预期的更困难，在云中进行时更是如此。如果您的大部分工作负载需要通过一个始终在线的连接来完成，那么您将很难获得我们转向云的可用性和可扩展性。

在不知道您的应用程序的细节的情况下，但作为示例，假设服务 A 和 B 是来自金融数据提供商的提要。数据馈送的提供者非常擅长他们的工作，具有高可用性，并为企业级成本提供“企业级”（无论这意味着什么）。他们的架构也是老派的，在某些情况下，非常死板。因此，首先，请考虑要求您的提要提供商（提供登录/连接并希望您提取数据）通过 Web 服务向您推送数据。公开的 Web 服务是扩展和性能的解决方案，用于从 Azure 上的表存储到 DynamoDB 等高吞吐量数据库服务。（我将挑战任何企业数据提供商来解释像 Amazon S3 这样的服务如何是米老鼠。

正如您所发现的，您的替代方案是构建大量的东西，以确保您的架构适合您的数据供应商的单节点模型。虽然可以做到，但您将花费大量工程资金来手动掌握一大堆分布式计算原理。如果您打算采用主动-被动架构，则需要实现领导者选举算法，以确定被动节点何时应该变为活动状态。这并不像听起来那么微不足道，因为一个活动节点可能看起来已经消失了，但仍在处理中——而且您不想在其位置上插入另一个节点。因此，您将实现一个心跳，甚至是一个单独的“见证”节点，除了密切关注哪些节点是活动的以便对它们做一些事情之外什么都不做。您提到停机和修补是不可接受的。那么什么是可以接受的呢？几分钟或几秒钟，还是不到一秒钟？您希望被动节点从其他节点停止的地方接管，还是重新开始？

您可能会发现实现所有这些的开发成本低于构建和托管高可用性物理服务器的成本。也许您可以分离负载并在物理机器上以共同的方式运行数据馈送服务，并在 Windows Azure 上完成繁重的处理工作。我什至不会看 Azure VM，因为尽管它们不像角色那样循环利用，但它们偶尔会遇到问题——至少比企业级硬件更严重。从与您的数据馈送供应商讨论开始——他们可能有一个解决方案，或者一个可以拼凑在一起的解决方案（例如，一次登录两次，而“第二个”帐户/实例大多丢弃其数据）。

对传统企业整合要非常小心。他们要求在当今面向云的世界中看起来很奇怪的东西。例如，我曾要求我的呼叫服务有一个固定的 IP 地址。您可能会发现，为解决其他人的架构而必须编写的代码最好花在购买物理服务器上。抵制数据提供者——他们是时候走出 90 年代了。

[免责声明]“企业”，尤其是金融服务行业的企业，一直在说他们的要求是特殊的——更高的吞吐量、更高的安全性、高法规和更高的可用性。除了极少数情况（例如高频交易）外，我倾向于在大多数情况下称其为“牛市”。他们受到大量 IT 预算和昂贵工具包供应商带他们去享用美味午餐的影响，并被灌输给他们拥抱服务器的信念。我对企业硬件/软件/服务业务的个人看法影响了这个答案。你的旅费可能会改变。

# ios - 如何在 UITableView 中为图像添加活动指示器？

> ID：15331079
> 
> 赞同：0
> 
> 时间：2013-03-11T04:10:42.690
> 
> 标签：ios, objective-c, objective-c-blocks, uiactivityindicatorview

我已经创建了自定义`tableView`并在其他类中使用自定义`tableView`类来显示`tableView`..

我正在从服务器加载图像并将其显示在`tableViewRow`..每个`image`都不同..

在屏幕上只有 10 个图像中的 7 个会出现，当我向下滚动时，前 3 个图像会重复一段时间，当这些图像加载时，它会显示正确的图像.. 但最初直到新图像出现，它会显示旧图像，我想要放置一个活动指示器来显示图像正在加载而不是旧图像..

我想添加`activity Indicator`,`image`直到`image`加载..

我的代码是...

```
self.tableViewX = tableView;
static NSString *simpleTableIdentifier = @"SimpleTableCell";
SimpleTableCell *cell = (SimpleTableCell *)[tableView1 dequeueReusableCellWithIdentifier:simpleTableIdentifier];
 if (cell == nil)
{
    NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"SimpleTableCell" owner:self options:nil];
    cell = [nib objectAtIndex:0];
}
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^
    {
NSString *imageURL = [NSString stringWithFormat: @"www.xyz.image.png"];
cell.thumbnailImageView.image = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:imageURL]]];
 }); 
```

请帮助我提供一些示例代码..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T04:39:32.657

您可以使用“AsyncImageView”类文件，它将同步加载图像并在图像加载时显示活动指示器

您可以从以下链接下载“AsyncImageView”类文件：- [https://www.dropbox.com/s/peazwjvky9fsjd7/Archive.zip](https://www.dropbox.com/s/peazwjvky9fsjd7/Archive.zip)

在 .m 文件中导入 AsyncImageView 类

```
 #import "AsyncImageView.h" 
```

在 indexpath 方法的 tableview 单元格中

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
     static NSString *simpleTableIdentifier = @"SimpleTableCell";
     SimpleTableCell *cell = (SimpleTableCell *)[tableView1 dequeueReusableCellWithIdentifier:simpleTableIdentifier];
     if (cell == nil)
     {
           NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"SimpleTableCell" owner:self options:nil];
      cell = [nib objectAtIndex:0];
     }
     NSString *imageURL = [NSString stringWithFormat: @"www.xyz.image.png"];
     AsyncImageView *async = [[AsyncImageView alloc]initWithFrame:CGRectMake(0, 0, width, height)];
     [async loadImageFromURL:[NSURL URLWithString:imageURL]];
     [cell.thumbnailImageView addSubview:async];
} 
```

试试这个你的问题会解决的。

# security - Apache Shiro 每个对象的权限？

> ID：15331081
> 
> 赞同：1
> 
> 时间：2013-03-11T04:10:52.710
> 
> 标签：security, jakarta-ee, permissions, acl, shiro

是否可以使用 Shiro 实现每个数据库行权限系统？假设我在一个表中有 10000 条记录，而某些用户只能看到 1000 条记录......只将这些记录返回给用户的最佳方法是什么？这是Shiro“用例”还是我完全走错了路？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-17T20:38:06.070

这似乎是连接表的情况。

USER_RECORD 表：USER_ID | RECORD_ID

```
select record_id, record_field_1, record_field_2, ... 
from record r, user u, user_record ur
where ur.user_id = u.user_id
and ur.record_id = r.record_id
and u.user_id = :userId 
```

# image - 向使用 Highcharts Renderer.image() api 渲染的图像添加工具提示

> ID：15331082
> 
> 赞同：1
> 
> 时间：2013-03-11T04:10:59.777
> 
> 标签：image, highcharts, tooltip

我想为使用渲染的图像添加工具提示： `image (String source, Number x, Number y, Number width, Number height) api`。

我想不出办法做到这一点，我正在使用`org.moxieapps.gwt.highcharts`API 在我的 GWT 应用程序中创建高图表。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-29T19:47:53.733

使用`chart.renderer.text`和`chart.renderer.rect`根据图像的位置绘制和定位您自己的自定义工具提示。

这是我用来显示使用生成的图像的工具提示的示例代码片段`chart.renderer.image`-

```
marker = chart.renderer.image(src, x, y, imageSize, imageSize)
            .on('click', function() {`enter code here`
            })
            .attr({
              zIndex: 100
            })
            .on('mouseover', function() {
              //Call back for image mouse hover                     
              //Draw a text relative to Image X and Y                                                           
                  text = chart.renderer.text("Your tooltip Text",X, Y)
                        .add();

                        var box = text.getBBox();

                        //Now draw a box surrounding the tool tip text                     
            textBG = chart.renderer.rect(box.x, box.y,box.width, box.height, 5)
                .attr({
                    fill: '#FFFFEF',
                        stroke: 'gray',
                                    'stroke-width': 1,
                        zIndex: 4
                      })
                .add();
            })
               .on('mouseout', function() {

                         //Call back for mouse out on the image
                         //Destroy Both markers text and textBG on mouse out
                         //Make text and textBG as global functions for access accross functions 
                         text.destroy();
                         textBG.destroy();  

                         })
                 .add(); 
```

通过这种方式，您可以为图像创建自定义工具提示。

我使用[此](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/members/renderer-on-chart/)链接将工具提示文本及其背景添加到图表的语法。

# iphone - 单个选择器中的选定项目为空

> ID：15331083
> 
> 赞同：0
> 
> 时间：2013-03-11T04:11:00.210
> 
> 标签：iphone, ios, objective-c

当用户选择类型时，我有单个选择器，它将更新标签，但是当我选择项目时，它等于 null 到标签

```
 //update label type
    NSInteger row  = [singlePicker selectedRowInComponent:0];
   NSString *selected = [pickerData objectAtIndex:row];
   NSString *strTypeSelected  = [[NSString alloc] initWithFormat:@"%@",selected];

    typelabel.text =strTypeSelected; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T04:16:56.960

首先确保为这个 singlePicker 对象提供出口和数据源，`UIPickerView`然后尝试这段代码。

```
typelabel.text = [pickerData  objectAtIndex:[singlePicker selectedRowInComponent:0]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T04:20:03.253

试试这个，

```
txtField1.text = [NSString stringWithFormat:@"%@",[arrData objectAtIndex:[picker selectedRowInComponent:0]]]; 
```

签`picker.delegate = self;`入 .m 文件 ->`viewDidLoad`方法。

签入 .h 文件

```
...Controller<UIPickerViewDataSource, UIPickerViewDelegate> {... 
```

它可能对你有帮助。
谢谢。

# ruby-on-rails - Rails 3嵌套资源不在同一个命名空间中

> ID：15331084
> 
> 赞同：0
> 
> 时间：2013-03-11T04:11:20.000
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我的路线文件中有以下内容：

```
namespace :forum do
  resources :topics
  resources :posts do
    resources :comments
  end
end 
```

所以主题和帖子控制器在论坛模块（`Forum::TopicsController`和`Forum::PostsController`）中，但评论控制器不是（它只是`CommentsController`），因为它是多态的（在一些控制器之间共享）。

问题是应用程序寻找的`Forum::CommentsController`显然不存在，我怎样才能为该资源定义没有模块？

我试过了，但没有奏效：

```
namespace :forum do
  resources :topics
  resources :posts do
    resources :comments, controller => 'comments'
  end
end 
```

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T04:41:51.940

Ok, I guess you want to re-use the codes in Comments controller. Is that right? If so, I do not know any direct answer to this question but I guess you may consider something like that.

# comments_controller.rb

```
module forum
  module posts
   class CommentsController < ApplicationController
     include Commentable
   end
  end
end 
```

# commentable.rb

```
module Commentable 

end 
```

Now you can use this commentable module anywhere you want to use. So, you are re-using common codes with two features: 1\. you get freedom to change behavior per controller 2\. you have to create separate files for each controller.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T06:15:42.460

它不是最干净的（我不确定是否有更好的方法来实现这一点），但您可以使用范围而不是命名空间，然后显式设置论坛命名空间中资源的控制器：

```
scope '/forum' do
  resources :topics, controller => 'forum/topics'
  resources :posts, controller => 'forum/posts' do
    resources :comments
  end 
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T05:50:57.860

您也可以手动设置评论的路线

例如

```
match '/forums/:forum_id/posts/:post_id/comments/:comment_id' => 'comments#show' 
```

所以你的评论控制器不必坐在其他模块内

# java - for循环理解

> ID：15331089
> 
> 赞同：-3
> 
> 时间：2013-03-11T04:12:18.823
> 
> 标签：java

我不确定 for 循环是如何工作的，任何人都可以向我简要解释一下吗？

例如这段代码：

```
int count;

for(count=1;count <10; count = count+2)
System.out.print((3*count) + " " ); 
```

答案是：`3 9 15 21 27`，但`9`从哪里来？

让我们假设第一个计数被执行`1+2=3`，所以`3*`1 = `3`。

现在我们不是假设将`3`与 相加`2`然后乘以 `3`吗？

`5*3 = 15`，那么`9`从哪里来？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T04:14:40.417

打印出来的数字不会影响变量`count`。

由于 count 从 1 开始，并且每次从 1 开始增加 2 `count = count+2`，它将是 1,3,5,7 。

然后将其乘以 3，得到您所看到的输出。

```
1 * 3 = 3
3 * 3 = 9
5 * 3 = 15 
```

要获得您希望`count`在循环内更改的输出。

```
for(count=1;count <10; count = count+2)
count = count*3;
System.out.print((count) + " " ); 
```

这将输出 15 作为第二个数字然后停止，因为它将大于 10 以完成 forloop

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T04:15:07.540

它来自`3 * 3`. 在第一个循环之后`count`开始`1`并递增到`3`via 。`count = count + 2`如果您这样做，您所描述的行为应该会发生：

```
for (/*snip*/) {
    count = 3 * count;
} 
```

这将在循环的第二次迭代中输出 15。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-11T04:19:39.883

for 循环的 3 个部分，用分号分隔，给出一个初始赋值（在进入循环之前只执行一个）、一个条件（在进入循环之前检查每次迭代）和一个更新（它在每次迭代后执行）。因此我们有下表

```
count  printed  condition
 1      3         1 < 10
 3      9         3 < 10
 5     15         5 < 10
 7     21         7 < 10
 9     27         9 < 10
11     --        11 < 10 
```

这应该清楚 9 的来源。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T04:15:25.540

该代码不会分配`3*count`回`count`，它只是打印该值。

当循环运行时，count 取值 {1, 3, 5, 7, 9}。在每次迭代中， 的值`3*count`都会打印到标准输出，*但`count`不会被修改*。

* * *

一次迈出这一步：

1.  `count`初始化为 1。
2.  `3*count + " "`打印到标准输出。（你得到 3，`count` *仍然有 1 的值*）
3.  `count`增加 2，设置`count`为 3。
4.  `3*count + " "`打印到标准输出。（`count`现在的值为 3，所以你得到 9，同样`count`没有修改）
5.  `count`增加 2，设置`count`为 5。
6.  输出 15，`count`仍未修改。
7.  `count`再次增加 2，设置`count`为 7。
8.  输出 21。
9.  增加到`count`9。
10.  输出 27。
11.  增加到`count`11。
12.  测试`count < 10`失败，因此退出循环。

* * *

将此行为与以下代码段进行对比，它可能符合您的预期：

```
int count;

for(count=1;count <10; count = count+2)
{
    count = 3*count;
    System.out.print((count) + " " );
} 
```

但是这个循环也只会对`count`{1, 5} 中的值执行，因为 17 大于 10。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-11T04:16:11.717

打印出循环内的计数，您将看到发生了什么：

```
System.out.print("count: " + count + " (3*count): " + 3*count + "\n"); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-11T04:16:41.883

count 从 1 开始，变为值 {1,3,5,7,9}。运行此代码，您将能够亲眼看到发生了什么：

```
for(count=1;count <10; count = count+2) {
    System.out.println("For count = " + count + ", Result: " + (3*count) + " " );
} 
```

count 在循环完成第一次迭代之前不会第一次增加。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-11T04:16:13.220

```
count
1     *3=
3     *3=
5     *3=
7     *3=
9     *3= 
```

# c - C中的打印输出有问题

> ID：15331092
> 
> 赞同：0
> 
> 时间：2013-03-11T04:12:39.460
> 
> 标签：c, pointers, struct, linked-list

我在这里的这个程序不能正确打印出来。这是输入：

有多少员工？2

输入员工 1 信息：月/日/年、年龄、身高、姓名：3/21/34、43、3.4、hdsfgdf

输入员工 2 信息：月/日/年、年龄、身高、姓名：4/44/44、44、6.2、dfgtesas

这是输出：

员工1信息：0/-1081689528/134514548, 16564212, 0.0, ��

员工 2 信息：0/1/14608664, -1217230008, 0.0, ��������

我唯一的猜测是我没有正确填充数组，或者我打印的是地址而不是数据。我这样假设是对的吗？任何一点建议都会有所帮助。非常感谢！

我的代码在 3 个文件中。

## 这是主要的：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "list.h"
#include "personal.c"

LIST *start, *end;

int main(void)
{
int i, numEmp;  

PERSON person;

start=end=NULL;
printf("How many employees? ");
    scanf("%d", &numEmp);
PERSON employees[numEmp];

for (i = 0; i < numEmp; i++)
{
printf("Enter employee %d info: month/day/year, age, height, name:\n", i+1);
scanf("%d/%d/%d,%d,%f,%s", &person.bday.month, &person.bday.day,
          &person.bday.year, &person.age, &person.height, person.name);
    add(&start, &end, person);

}
for (i = 0; i < numEmp; i++)
{
printf("Employee %d information:\n%d/%d/%d, %d, %.1f, %s\n", i+1, employees[i].bday.month, employees[i].bday.day, employees[i].bday.year, employees[i].age, employees[i].height, employees[i].name);

delete(&start, &end);
} 
```

## 这是具有结构的列表：

```
#ifndef LIST_H_ /* to prevent re-definitions */
#define LIST_H_ /* that cause errors */
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

typedef struct DATE
{
    int month;
    int day;
    int year;
} DATE;

typedef struct PERSON
{
    char name[41];
    int age;
    float height;
    DATE bday;

} PERSON;

typedef struct list 
{
PERSON data; 
struct list *next;
} LIST;

#endif 
```

## 这就是我所有方法的所在：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "list.h"

int delete (LIST **head, LIST **tail){
    LIST *temp;

    if (*head == NULL)
        return -1;

    PERSON retVal = (*head)->data;

    if(*head==*tail){
        free(*head);
        *head=*tail=NULL;
    }
    else{
        temp=(*head)->next;
        free(*head);
        *head=temp;
    }

    //return retVal;
}

void add(LIST **head, LIST **tail, PERSON data){
    if(*tail==NULL){
        *head=*tail=(LIST *) malloc(sizeof(LIST));
        (*head)->data=data;//use arrow when struct is pointer. Use . if have direct access to struct
        (*head)->next=NULL;
    }
    else{
        (*tail)->next= (LIST *) malloc(sizeof(LIST));
        *tail=(*tail)->next;
        (*tail)->data=data;
        (*tail)->next=NULL;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T04:16:59.253

```
printf("Employee %d information:\n%d/%d/%d, %d, %.1f, %s\n", i+1, 
        employees[i].bday.month, employees[i].bday.day, employees[i].bday.year,
         employees[i].age, employees[i].height, employees[i].name); 
```

您正在尝试打印`employees`从未初始化的数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T04:16:00.573

[在valgrind](http://valgrind.org/)下运行您的程序。它是一个免费工具，可以自动检测代码中的内存错误。它可能能够准确地为您突出显示您的代码正在读取或写入无效内容的位置。

你所要做的就是`valgrind`在它前面运行你的程序，假设你在一个 Linux 系统上并且已经安装了 valgrind 包。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T04:21:01.677

您同时创建了一个可变长度数组 ( `employees`)**和**一个链表。您将元素添加到链接列表中，但尝试打印可变长度数组的内容（您从未向其写入任何内容）。

任何一个：

1.  将数据读入您的 VLA。

    ```
    for (i = 0; i < numEmp; i++)
    {
        printf("Enter employee %d info: month/day/year, age, height, name:\n", i+1);
        scanf("%d/%d/%d,%d,%f,%s", &employees[i].bday.month, &employees[i].bday.day,
          &employees[i].bday.year, &employees[i].age, &employees[i].height, employees[i].name);
    } 
    ```

2.  忘记 VLA，只打印链接列表的内容。

    ```
    i = 0;
    for (LIST *item = start; item != NULL; item = item->next)
        printf("Employee %d information:\n%d/%d/%d, %d, %.1f, %s\n", ++i, item->data.bday.month, item->data.bday.day, item->data.bday.year, item->data.age, item->data.height, item->data.name); 
    ```

# facebook - 分享facebook时的自定义摘要

> ID：15331100
> 
> 赞同：-1
> 
> 时间：2013-03-11T04:13:31.190
> 
> 标签：facebook, hyperlink, yii

当我像这样通过 facebook 分享时，我想插入新的中断并将链接添加到摘要中：

![在此处输入图像描述](../Images/eaaf6508ffafdaa45a8b1d6acc342abc.png)

线路：“Red RC”是一个链接……我试过但不行……我不知道Facebook是否支持它。有谁知道？？？任何人都可以给我链接到任何有关它的文件...？谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T17:46:01.883

在 url 链接中在 head 中设置元标记

```
<meta property="og:title" content="title" />   
<meta property="og:image" content="imageurl" />   
<meta property="og:description" content="url" /> 
```

您可以查看其他一些元标记 [http://davidwalsh.name/facebook-meta-tags](http://davidwalsh.name/facebook-meta-tags)

# openerp - OpenERP 在添加采购项目行时出错

> ID：15331101
> 
> 赞同：1
> 
> 时间：2013-03-11T04:13:57.567
> 
> 标签：openerp, keyerror

我继承了 purchase.order 中的状态 - 添加了修订，关闭。

修订状态是允许采购订单在批准后修改价格或添加项目。

但发生的情况是我无法在此添加状态下添加新项目行，它总是会提示以下错误消息。

```
Environment Information :
System : Windows-post2008Server-6.1.7600
OS Name : nt
Operating System Release : post2008Server
Operating System Version : 6.1.7600
Operating System Architecture : 32bit
Operating System Locale : en_US.cp1252
Python Version : 2.6.5
OpenERP-Client Version : 6.1.1
Last revision No. & ID :Bazaar Package not Found !Traceback (most recent call last):
  File "netsvc.pyo", line 489, in dispatch
  File "service\web_services.pyo", line 599, in dispatch
  File "osv\osv.pyo", line 122, in wrapper
  File "osv\osv.pyo", line 176, in execute
  File "osv\osv.pyo", line 167, in execute_cr
  File "osv\orm.pyo", line 2947, in read
  File "osv\orm.pyo", line 3070, in _read_flat
KeyError: 10340 
```

经过研究，我发现只有在核心提供的状态之外添加新项目行时才会遇到此错误。

我尝试添加完成和批准状态，它允许我，但不是在我的修订或关闭状态。

# html - 如何在href之间留一个空格？

> ID：15331102
> 
> 赞同：-2
> 
> 时间：2013-03-11T04:14:17.963
> 
> 标签：html, html-lists

我在这里写了我的代码，但它不会给空间

```
<a href="opinion.jsp"><font color="red"><h3>Recommendation</h3></font></a>
<a href="FindoneServ"><font color="red"><h3>Review Mining</h3></font></a>
<a href="rank.jsp"><font color="red"><h3>Generate Graph</h3></font></a>
<a href="index1.jsp"><font color="red"><h3>Sign out</h3></font></a> 
```

我需要这样的输出

```
Recommendation          Review Mining           Generate Graph        Signout 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T09:24:34.377

您的代码中有几个问题：

1.  `font`标签 - 不要使用它，它很丑陋，已被弃用并且完全没用。使用 css 为您的元素设置样式。
2.  `h3`内联元素`a`^*中的块级元素。这是无效的 HTML，在语义上没有意义。
    *   A`h3`是一个标题，它在逻辑上不适合锚元素。
    *   `h3`产生换行符，因此所有链接都放在一行上。

根据您想要做什么，此标记更适合：

```
<!-- Use an unordered list for your anchor elements-->
<ul class="mylinks">
     <li><a href="opinion.jsp">Recommendation</a><li>
     <li><a href="FindoneServ">Review Mining</a><li>
     <li><a href="rank.jsp"   >Generate Graph</a><li>
     <li><a href="index1.jsp" >Sign out</a><li>
</ul> 
```

和相应的CSS

```
<!-- put this in the <head> of your html document --> 
<style type="text/css">
.mylinks li{
    float:left;   /* Fit all your links nicely in one line*/
    margin:0 5px; /* Give them to the left and right a little room to breathe */
    /* You can adjust the space by modifying the 5px value, */
    /* the 0 modifies the top/bottom spacing */
}

.mylinks a{
   color:red; /* fancy red color for your links*/
}
</style> 
```

*：至少在 HTML4 中是这样。问题仍然是这种标签嵌套是否有意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T04:25:44.073

问题是您使用的是标题标签，默认情况下它们后面有一个换行符。

要更改这一点，您可以设置`display`CSS 属性，该属性将使元素与其他元素对齐：

```
h3 { 
  display: inline; 
} 
```

您可能会重新考虑`<h3>`完全使用。一般来说，它适合作为其他内容的标题，而不是导航。我还建议删除`<font>`标签。你不需要它。您可以而且应该使用 CSS 进行样式设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T08:48:21.273

尝试使用：在 div 中列出的无序。

```
<!--HTML-->
<div id="Navigation">
<ul>
<li><a href="opinion.jsp">Recommendation</a></li>
<li><a href="FindoneServ">Review Mining</a></li>
<li><a href="rank.jsp">Generate Graph</a></li>
<li><a href="index1.jsp">Sign out</a></li>
</ul>
</div>

<!--CSS-->

#Navigation
{
      color: #9000A1;
      font-family:"Times New Roman", Times, serif;
} 
```

# c++ - 从类成员函数打印结构输入

> ID：15331103
> 
> 赞同：0
> 
> 时间：2013-03-11T04:14:18.990
> 
> 标签：c++

我想知道如何输入/初始化一个`start_date`和`end_date`（它来自一个`Date`具有整数的结构`month` `day`和`year`来自函数`initializeDate。一旦我能够初始化，我假设我将能够在打印输出成员中使用相同的逻辑功能。

```
struct Date
{
    int month;
    int day;
    int year;
};

void initializeDate(Date &d)
{
    cout<<"Please enter the month"<<endl;
    cin>>start.month;
    cout<<"Please enter the day"<<endl;
    cin>>start.day;
    cout<<"Please enter the year"<<endl;
    cin>>start.year;
    string dummy;
    getline(cin, dummy);
} 
```

编辑：我得到的错误是“开始”没有在这个范围内声明。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T04:19:13.893

这是非常基础的，请阅读一本关于 C++ 的好书。因为你付出了努力所以在下面发帖:)

```
void Information::initializeDate(Date &d)    //comes from the Information class.
{
    // Commented as part of question change!  
    // Date d;     // Guessing that the structure is the private member of the class.
    cout<<"Please enter the month"<<endl;
    cin>>d.month;
    cout<<"Please enter the day"<<endl;
    cin>>d.day;
    cout<<"Please enter the year"<<endl;
    cin>>d.year;
    string dummy;
    getline(cin, dummy);
} 
```

** 刚刚根据您有问题的更改编辑了代码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T04:21:30.757

看起来您一直在更新示例代码。根据当前的修订版，我认为这就是您想要的：

```
#include <iostream>
using namespace std;

struct Date
{
    int month;
    int day;
    int year;
};

void initializeDate(Date &date)
{
    cout<<"Please enter the month"<<endl;
    cin>>date.month;
    cout<<"Please enter the day"<<endl;
    cin>>date.day;
    cout<<"Please enter the year"<<endl;
    cin>>date.year;
}

int main()
{
  Date start, end;
  initializeDate(start);
  initializeDate(end);
  cout << start.year << "/" << start.month << "/" << start.day << endl;
  cout << end.year << "/"   << end.month   << "/" << end.day << endl;
  return 0;
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T04:39:50.363

Ok, there are a couple of problems here, that you should target. First, to fix your code, the error is very simple: there isn't anywhere in your code in which a variable named `start` was declared/defined. So, the compiler is asking you what `start` is. You are trying, I assume, to initialize the values of the members of d, that you passed in the function `initializeDate`, and all you have to do is just replace every occurence of the word `start` with `d`, and you'll get:

```
void initializeDate(Date &d)
{
    cout<<"Please enter the month"<<endl;
    cin>> d.month;
    cout<<"Please enter the day"<<endl;
    cin>> d.day;
    cout<<"Please enter the year"<<endl;
    cin>> d.year;
    string dummy;
    getline(cin, dummy);
} 
```

Now, although this works, it's not the best way to initialize the date. Since `Date` is a `struct`, you can initialize its members using a constructor method. This is achieved by writing it like this:

```
struct Date{
    int day, month, year;
    Date(int, int, int);
    };

Date:: Date(int day, int month, int year){
    this->day = day;
    this->month = month;
    this->year = year;
    }

int main(){
    Date today(11, 3, 2013);
    cout << "today, the date is " << today.day << "-" << today.month << "-" << today.year << endl; 
    return 0;
    } 
```

# iis - 重定向在 ARR 中不起作用，但在 DNN 中起作用

> ID：15331117
> 
> 赞同：4
> 
> 时间：2013-03-11T04:15:42.820
> 
> 标签：iis, url-rewriting, dotnetnuke, arr

我们有一个 IIS 网络场，其中包括一个负载平衡器、4 个 ARR 和 2 个运行 DNN CMS 的 ASP.NET 应用程序服务器。4 个 ARR 将 URL 重写到 DNN 应用程序服务器。我们有 100 多个 URL 需要重定向到网站内更具体的资源。

例如，当用户`http://www.abcd.com/product1`从外部输入时，期望的结果是重定向到`www.abcd.com/index.aspx?articleid=1234`，我们已经在 DNN 环境中配置了这样的行为，并且我们可以确保它可以正常工作，就像当我们在 DNN 应用程序服务器中浏览站点时，DNN能够检测 URL 并相应地执行重定向。

当我们尝试浏览`http://www.abcd.com/product1`from LB 和 ARRs 时会出现问题，当我们键入 时`http://www.abcd.com/product1`，它只是返回到`http://www.abcd.com`主页，重定向根本不起作用。没有在 ARR 和 LB 上执行 IIS 级别的 HTTP 重定向，唯一的设置是默认的 URL 重写规则，它将重写 URL 到后端 DNN 服务器。

IIS 论坛上也发布了同样的问题，只是我决定再次在这里发布它以获得更多曝光。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T05:39:31.700

在通过 ARR 时，您是否正在调用特定的 IP？比如偶然`http://www.abcd.com/product1`变成？`http://xxx.xxx.xxx.xxx/product1`

如果是这样，您可能希望将这些作为附加门户别名添加到 DNN 站点。

否则，您可能需要使用 Fiddler 之类的工具来准确查看重定向/响应的情况。

# javascript - jQuery li 位置返回零

> ID：15331123
> 
> 赞同：2
> 
> 时间：2013-03-11T04:16:18.420
> 
> 标签：javascript, jquery, html, css, position

我有一个简单的列表，其中一些元素具有“父级”类

```
<div>
    <ul>
        <li class="parent">text</li>
        <li>text</li>
        <li class=parent>text</li>
        <li>text</li>
    </ul>
</div> 
```

**div**有**ul**有**li**有`text-align:justify;`_ _**`position:relative;`**`display: inline-block; position:relative;`****

 ****我使用以下代码来获取每个 li 类“父级”的位置。然后我想为其中一些添加类，其中位置小于 100。

```
var position = $('.parent').position();

if (position.left < 100) {
    $('.parent').addClass('left');
} 
```

但它总是在`.position()`一步返回零（可能是第一个的位置`.parent`？）

我怎样才能让它正常工作，让每一个有类的 li 返回正确的位置？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-11T04:18:45.453

根据位置过滤元素，并添加类：

```
$('.parent').filter(function() {
   return $(this).position().left < 100;
}).addClass('left'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T04:23:11.690

你是对的，它抓住了第一个父母的位置。

你可以做这样的事情

```
$(".parent").each(function() {
    if ( $(this).position().left < 100 )
         $(this).addClass('left');
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T04:31:04.037

可以使用回调`addClass`

```
$('.parent').addClass(function() {
    return $(this).posiition().left <100 ?'left':'';
}) 
```

您使用的方法的问题`var position = $('.parent').position();`是它只会返回集合中第一个元素的值，而不是选择器的每个实例****

# asp.net - 类型化数据集 - 强制约束

> ID：15331127
> 
> 赞同：1
> 
> 时间：2013-03-11T04:16:35.813
> 
> 标签：asp.net, c#-4.0, dataset

我在 asp.net 4.5 中使用类型化数据集，但是当我使用 tableadapter 和数据集填充数据表时，我遇到了强制约束错误。

“未能启用约束。一行或多行包含违反非空、唯一或外键约束的值。”。在数据集中只有一行我仍然收到此错误。目前我正在使用

```
Dataset.EnforceConstraints = false; 
```

但我不想用这个。所以请给我解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T05:16:41.487

由于表中的约束而发生此错误。如果您在表中使用关系，它会发生。即，您的表有一个四键成员，您不允许在没有主表条目的情况下添加子表。![在此处输入图像描述](../Images/be4edc9686ea9681f782679ab60e2abd.png)

在图像中显示了一种关系。在 table2 上，一列是 table1 的四个键。因此，如果您尝试在 table2 中插入一个值，而表中没有具有相同 sl_no 的条目，则会显示此错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T06:02:40.450

请仔细查看 TDS。我确信您的 TDS 包含多个与您的 retrn 日期集不匹配的 P.key 字段。因此，请通过右键单击该字段从您的 TDS 中删除一个/一些 P.Key。并再次测试。希望对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T04:03:07.357

首先感谢您的帮助。我得到了解决方案。在该复合键上，我已删除主约束并将其转换为唯一约束，因为有一个可为空的列。并且有一列的最大长度存在一个问题。我发布这个是因为它将来可能对其他人有用。

谢谢。

# perl - 如何从子程序生成哈希？

> ID：15331143
> 
> 赞同：0
> 
> 时间：2013-03-11T04:19:13.663
> 
> 标签：perl, subroutine, hash

我正在尝试收集我的数据库的一些快照并用它做一些数学运算，但我无法从我的子例程中返回我的哈希......

如您所见，我有 2 个哈希 %dbmcfg,%bufsnap,%dbsnap 我已将这 3 个哈希合并为一个哈希 my %snaps =(%bufsnap,%dbmcfg,%dbsnap); ，我是 Perl 的新手，我开始知道变量的范围概念与我成功编写函数和调用它们的 shell 形成对比。

我得到了一些变量错误的目标减速........这个返回的哈希对我很重要，因为我需要将它传递给另一个函数并在那个子例程中做一些数学运算

```
#!/usr/bin/perl
use strict;
use warnings;
use Data::Dumper;

sub snapshots() {
    my @tmpdbmcfg = grep /=/,`db2 "get snapshot for dbm"`;
    my %dbmcfg;
    foreach (@tmpdbmcfg) {
        chomp;
        s/^\s*//;
        s/\s*$//;
        my ($col3,$col4) = split /\s*=\s*/,$_,2;
        $dbmcfg{$col3}=$col4;
    }
    #print Dumper(\%dbmcfg);
    #if ($dbmcfg{'Max agents overflow'} != 0 ) {
    #print "fine\n";
    #} else {print "Not\n"; }

    my @tmpbufarr=grep /=/,`db2 "get snapshot for bufferpools on awdrt"`;
    my %bufsnap;

    foreach (@tmpbufarr) {
        chomp;
        s/^\s*//;
        s/\s*$//;
        my ($bufsnapkey,$bufsnapval) = split /s*=s*/,$_,2;
        $bufsnap{$bufsnapkey} = $bufsnapval;
    }

    my @tmpdbarr =grep /=/,`db2 "get snapshot for db on awdrt"`;
    my %dbsnap;
    foreach (@tmpdbarr) {
        chomp;
        s/^\s*//;
        s/\s*$//;
        my ($dbsnapkey,$dbsnapvalue) = split /s*=s*/,$_,2;
        $dbsnap{$dbsnapkey} = $dbsnapvalue;
    }
    my %snaps = (%bufsnap,%dbmcfg,%dbsnap);
    #print Dumper(\%snaps);
    return (\%snaps);
}

&snaps;
#print Dumper(\%snapis); 
```

帮助表示赞赏............

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T04:33:14.270

您可以返回简单的列表和标量值，但更复杂的结构将不起作用，返回时的哈希将扩展为它们的键和值。你可以这样做：

```
sub foo {
    my (%hash1, %hash2);   # hashes lexically scoped to sub only
    return {               # { .. } creates hash reference
        hash1 => \%hash1,  # these are key/value pairs 
        hash2 => \%hash2,  # hashes now exported outside the sub
    };
}

my $href = foo();          # $href->{hash1} now points to \%hash1 
```

你当然可以即兴创作：

```
return (\%hash1, \%hash2);
...
my ($href1, $href2) = foo();  # two hrefs are returned 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T09:55:04.230

一些额外的提示。

如果你打算在你的函数上放置一个原型（你可能不应该这样做，因为[Perl 原型并没有真正做人们认为他们做](http://web.archive.org/web/20080421062920/http://library.n0i.net/programming/perl/articles/fm_prototypes/)的事情），那么你可能不应该使用 & 号来调用函数 -作为＆符号的副作用之一是[关闭原型检查](http://perldoc.perl.org/perlsub.html#Prototypes)。

一般来说：

a/ 你不想使用原型 b/ 你不想使用旧式（使用 & 符号）函数调用

# linux - 更改 Apache2 服务器目录

> ID：15331148
> 
> 赞同：-1
> 
> 时间：2013-03-11T04:19:45.233
> 
> 标签：linux, apache2

我最近刚刚在我的虚拟机上启动了 ubuntu。我是 linux 新手。我打算在那里临时托管我的开发网站

我已经让 FTP 工作了我已经安装并运行了 Apache2。

我更改了网页的默认文件夹

基本网页确实出现了，一切似乎都正常。

但是由于某种原因CSS没有出现？

当我用萤火虫检查代码时，它告诉我我没有查看文件的权限。

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T04:44:39.810

从评论中，您提到您的 CSS 文件是`-rw-------`(600)，这意味着只有您的用户具有读取或写入权限。

为了让 Apache 或其他任何人能够读取这些文件，您必须为所有用户设置读取权限。像这样的东西应该工作：

```
chmod +r * 
```

如果要递归地对所有文件执行此操作，请添加`-R`标志。

```
chmod -R +r * 
```

参考：

*   [修改](http://linux.die.net/man/1/chmod)

# pydev - 如何为 PyDev 生成大量 PyObjC 的预定义完成？

> ID：15331149
> 
> 赞同：1
> 
> 时间：2013-03-11T04:19:57.900
> 
> 标签：pydev, pyobjc

当我使用 PyObjC 时，带有 PyDev 的 Eclipse 不会向我显示正确的代码完成。[我用谷歌搜索了这个问题，并在这篇文章](https://stackoverflow.com/questions/5234647/using-pyobjc-imports-in-pydev-in-eclipse-on-mac-os-x)中找到了原因。这篇文章说 PyDev 无法读取 bridge-support 文件中的信息，这就是这个问题的原因。

我知道这个问题可以通过编写预定义的完成来解决。但是 PyObjC 中有大量的类/方法。例如，`AppKit`模块本身包含**230393 个**类，`AppKit.NSWindow`其中包含**26991 个**方法。（我在 PyDev 中使用`interpreterinfo.py`and来计算它们）`pycompletion.py`

有没有什么通用的方法可以生成大量 PyDev 的 pledefined 完成脚本？或者当我使用 PyObjC 时有什么方法可以正确完成？

* * *

**添加于 2013/03/12 07:56(JST)**

我在PyDev 中添加`objc`, `Foundation`, `AppKit`,`Cocoa`等等。`Force Builtin`现在 PyDev 向我展示了比以前更多的建议。`alloc()`但是 PyDev在 PyObjC 的类中找不到方法。通常情况下，我们初始化 NSWindow 如下：

```
from Foundation import *
from AppKit import *
    :
    :
window = NSWindow.alloc().initWithContentRect_styleMask_backing_defer_(
        rect,
        style_mask,
        backing,
        flag) 
```

所以我想`alloc()`在我输入后作为完成候选人`window = NSWindow.`。

**第一个问题**`alloc`是 PyDev（和其他 IDE，如 PyCharm）在任何 pyobjc 的类上都找不到方法。我试图`alloc`通过使用交互式 shell 来查找方法，但我也找不到。

**第二个问题**是，由于第一个问题，当我创建 NSWindow 实例（或 PyObjC 中的任何实例）时，PyDev 无法分析变量的类型。所以 PyDev`initWithContentRect_styleMask_backing_defer_`在我输入`window = NSWindow.alloc().`.

如果您知道解决此类问题的方法，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T08:50:47.933

解析 bridgesupport 文件不是一个解决方案，它们只包含 PyObjC 公开的方法和类定义的一小部分（大部分信息是从 Objective-C 运行时提取的）。

我自己不使用 PyDev，也不知道它使用什么文件格式来完成，通过`dir()`在`objc.getClassList()`.

显然，一种解决方法是告诉 PyDev 将您使用的 PyObjC 模块视为内置模块：[PyDev FAQ](http://pydev.org/faq.html#PyDevFAQ-Codecompletionisnotworkingcorrectlyforsomelibrary)

# python - 如何在 Python 语句中使用变量？

> ID：15331151
> 
> 赞同：2
> 
> 时间：2013-03-11T04:20:15.283
> 
> 标签：python, string, class

```
sname = "example"
some_class.<sname>.do_stuff() 
```

`sname`是 中的子类的名称`some_class`。是否可以在我的调用中动态引用字符串，如此`some_class.example.do_stuff()`调用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T04:22:03.813

您正在寻找`getattr()`内置：

```
getattr(some_class, sname).do_stuff() 
```

# eclipse - 如何让Egit记住密码和用户名？

> ID：15331166
> 
> 赞同：31
> 
> 时间：2013-03-11T04:22:00.397
> 
> 标签：eclipse, git, egit

我正在研究托管在 Github 上的 Eclipse 中的一个项目。每次我想推送时，都会弹出一个对话框，询问用户名和密码。有人知道如何保存这些，所以我不必每次都输入它们吗？我在 Eclipse 4.2.1 中使用 Egit

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2014-04-21T05:44:50.550

也为此苦苦挣扎了一段时间：

1.  转到 Git Perspective -> Expand your Project -> Expand Remotes -> 展开要保存密码的遥控器。
2.  右键单击 Fetch 或 Push -> 选择 Change Credentials...
3.  输入用户名和密码 -> 选择确定

这是我发现可行的解决方法。每个 Git 项目都有点手动，但它可以工作^_^。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2019-02-26T14:02:56.920

我有不同的问题。我的凭据永久保存，我无法删除或更改它们。每次我从 git 获得 Auth Fail 时，也许你遇到了同样的问题，但在你的情况下，它会再次提示。也许它会帮助你或其他人。我转到首选项-> 常规-> 安全-> 安全存储并在内容选项卡中删除“默认安全存储”并重新启动 Eclipse。然后eGit再次要求我输入密码并成功将其保存在存储中。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-11T07:12:56.610

您可以将 ssh url 用于您的 repo，[并将您的 ssh 公钥和私钥添加到 EGit](https://stackoverflow.com/a/5965118/6309)。

或者您可以激活[凭证助手](https://stackoverflow.com/questions/5343068/is-there-a-way-to-skip-password-typing-when-using-https-github)，以便 git 记录您的凭证。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-10-23T14:19:17.950

如果安全存储中保存的密码与键入的密码不匹配，就会发生这种情况。以下是您可以解决的方法：

1.  从 Eclipse 工具栏导航到 Window > Preferences > Security > Secure Storage > Contents Tab > [Default Secure Storage] > GIT > “whatever github url”

2.  选择 url 并删除当前用户。

3.  Eclipse 将要求重新启动。去做吧。

4.  推送新的更改，这一次 egit 将提示将凭据保存在从上一步中删除的安全存储中。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-04-09T14:53:45.253

该错误（对于**https** URI）可以链接到（仍在 2014 年开放）[错误 355442](https://bugs.eclipse.org/bugs/show_bug.cgi?id=355442)：

> 每次推送时，egit 都会要求输入安全存储的密码。
> 问题是，我从不检查在推送对话框中存储存储库用户名和密码的选项。

（这意味着如果您忘记输入凭据，它不会再次询问您）

> 可重现：总是
> 
> 重现步骤：
> 
> 1.  未选中“在安全存储中存储用户名和密码”选项推送到上游。
> 2.  再推。

* * *

> 不断收到提示很烦人，但更烦人的是**每次出现时我都必须取消选中该复选框**。
> 如果要将密码存储在安全存储中，则对话框将不再提示。*默认情况下*取消选中复选框不是更有意义吗？

因此，一种解决方法是远程>获取，使用“自定义 URI”（如[Antoine](https://stackoverflow.com/users/1652643/antoine)之前提到的），以便再次输入 URI，并在那里输入您的凭据，选择“存储在安全存储中”。
后续推送应该可以正常工作，因为它们使用的是您刚刚输入的相同 URI。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-07-11T19:48:51.673

Secure Storage 是您的凭据的直接提供者。

所以，去：

*   窗口->首选项->常规->网络
*   将提供者更改为“直接”

这应该是默认设置，因为 Secure Storage 是 Eclipse 中的默认提供程序。

您还可以更改 git 首选项以不弹出确认对话框，整体结果将是一个非常快速的工作流程

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-11-09T21:56:42.517

一种解决方法是：

1.  导航菜单到`Preferences`-> `General`-> `Security`->`Secure Storage`

2.  取消选中***OS X Keystore Integration***以禁用此*主密码提供程序*，或者：

    *   ***Windows OS之Windows集成***案例
    *   ***Linux OS的Linux集成***案例
3.  申请并关闭

这样，eclipse 将依赖*UI 提示*而不是 OS 密钥库，因此您只需在启动 eclipse 后键入一次*安全存储密码。*

以下是其他人如何做到的一些示例：

*   [https://openwritings.net/pg/eclipse/eclipse-failed-write-credentials-your-git-repo-url-secure-store-no-password-provided](https://openwritings.net/pg/eclipse/eclipse-failed-write-credentials-your-git-repo-url-secure-store-no-password-provided)
*   [https://stackoverflow.com/a/64043656/1387113](https://stackoverflow.com/a/64043656/1387113)

# sql - 如何为日期和时间设置自动状态

> ID：15331172
> 
> 赞同：0
> 
> 时间：2013-03-11T04:23:39.320
> 
> 标签：sql, sql-server, sql-server-2005

使用 SQL Server 2005

表格1

离开表

```
ID startDate EndDate

001 21/01/2013 20/02/2013
002 24/01/2013 13/02/2013 
```

表2

```
ID DATE  TIME STATUS

001 21/01/2013 NULL ANNUAL
001 22/01/2013 NULL 
001 23/01/2013 NULL 
001 24/01/2013 NULL  Holiday (Sunday)
001 25/01/2013 02:00 Present 
```

在表2中我想显示状态为缺席，年假后的情况应该显示在系统中

1）年假结束后，系统显示为“缺席”，因为年假延长到可用时间行 2）假期也应该显示为缺席，因为时间不可用。

在表 1 的年假结束日期和表 2 的可用时间行之间系统显示为缺席

预期产出

```
ID DATE  TIME STATUS

001 21/01/2013 NULL ANNUAL
001 22/01/2013 NULL Absent
001 23/01/2013 NULL Absent
001 24/01/2013 NULL  Absent 
001 25/01/2013 02:00 Present 
```

如何查询以下条件。需要查询帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T05:24:45.960

很难理解你的问题，但这有多接近？

```
SELECT 
T2.ID, T2.Date, T2.Time, 
CASE 
WHEN T2.Date = T1.startDate THEN 'Annual'
WHEN T2.Date BETWEEN T1.startDate AND T2.endDate THEN 'Absent'
END Status
FROM 
Table2 T2
LEFT OUTER JOIN
Table1 T1
ON  T2.ID = T1.ID
AND T2.Date BETWEEN T1.startDate AND T2.endDate
WHERE T2.ID = '001' 
```

# c# - 单击按钮时获取 ASP.NET Listview 中的项目 ID

> ID：15331173
> 
> 赞同：5
> 
> 时间：2013-03-11T04:23:44.687
> 
> 标签：c#, asp.net, listview

我在列表视图的每一行都有一个按钮。
我有一个关于单击事件的方法，我想在其中获取数据项的 ID。
我`hidden field`在列表视图中放置了一个来存储 ID。
然而，

```
ListView1.FindControl("hiddenField") is returning null. 
```

我尝试了几种不同的事件参数，但只有空白事件参数与此按钮一起使用，所以我在事件参数中没有任何内容。
我尝试将按钮的命令设置为调用 commandEventArgs，但无论我使用什么事件参数，除了“eventArgs”，我都会得到：

> 'btnManage_Click' 没有重载匹配委托 'System.EventHandler'

如何将事件参数放入此按钮？

**编辑**

按钮位于以下 ListView 的 ItemTemplate 部分

```
<asp:ListView ID="ListView1" runat="server" DataSourceID="LinqDataSource1" EnableModelValidation="True" DataKeyNames="Id" InsertItemPosition="LastItem" >

 <LayoutTemplate>
              <table id="Table2" class="table" runat="server">
                <tr id="Tr1" runat="server">
                  <td id="Td1" runat="server">
                    <table runat="server" id="itemPlaceholderContainer" style="background-color: #FFFFFF; border-collapse: collapse; border-color: #999999; border-style: none; border-width: 1px; font-family: Verdana, Arial, Helvetica, sans-serif;" border="1">
                      <tr id="Tr2" runat="server" style="background-color: #DCDCDC; color: #000000;">
                        <th id="Th1" runat="server"></th>
                        <th id="Th2" runat="server">Name</th>
                        <th id="Th3" runat="server">Manage</th>
                      </tr>
                      <tr runat="server" id="itemPlaceholder"></tr>
                    </table>
                  </td>
                </tr>
                <tr id="Tr3" runat="server">
                  <td id="Td2" runat="server" style="text-align: center; background-color: #CCCCCC; font-family: Verdana, Arial, Helvetica, sans-serif; color: #000000;"></td>
                </tr>
              </table>
            </LayoutTemplate> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T04:35:13.197

你可以这样使用

```
 <asp:Button runat="server" CommandArgument='<%# DisplayIndex %>'/> 
```

查看 API

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listviewcommandeventargs.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listviewcommandeventargs.aspx)

如果你有一个按钮，那么简单

```
 protected void templateButton_OnClick(object sender, EventArgs e)
 {
     Button myButton = (Button)sender;
 } 
```

## 更多细节

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listview.itemcommand.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listview.itemcommand.aspx)

## 编辑 1

假设您有一个属性“id”，那么您可以像这样使用

```
 CommandArgument='<%#Eval("id")' 
```

## 编辑 2

因为它区分大小写并且你有

```
 DataKeyNames="Id" 
```

所以你应该使用如下

```
CommandArgument='<%#Eval("Id")' 
```

并像下面这样使用它

```
 int i = Convert.ToInt32(myButton.CommandArgument.ToString()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T04:38:38.250

```
You can try this: 

ListView lv = (ListView)sender 
```

这里**sender**是 buttonclick 事件的参数。然后尝试获取信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-05T12:57:08.133

我使用以下代码行通过 LinkBut​​ton 发送使用列表视图显示的项目的 ID：

```
<asp:LinkButton ID="LinkButton1" 
                runat="server" 
                Text="Quick View" 
                Font-Size="Small" 
                OnCommand="QuickView" 
                CommandArgument='<%# Eval("Hoarding_Id") %>' >   
</asp:LinkButton> 
```

它工作正常......

# android - Android 开发者第一个应用教程

> ID：15331174
> 
> 赞同：0
> 
> 时间：2013-03-11T04:23:49.913
> 
> 标签：android, android-layout, android-xml

感谢您提供有用的建议，我已经编辑了最初的问题，因为我想显示项目外观的图像以及我得到的空白屏幕，这与教程指示应该显示的不同。我能够解决第一个问题（它只是消失了）但是，在创建第一个意图后我遇到了问题，如本文第二部分所述：developer.android.com/training/ basics/firstapp/starting-activity.html#receivetheintent

该项目已构建，但我为该项目设置的运行配置未显示以下代码中列出的任何输入元素。我不确定如何进一步解决问题，并且非常感谢任何额外的帮助。再次感谢您的帮助。

模拟器： [http ://s1278.beta.photobucket.com/user/cetmrw791346/media/1_zps116f17a9.png.html](http://s1278.beta.photobucket.com/user/cetmrw791346/media/1_zps116f17a9.png.html)

包资源管理器： http: [//s1278.beta.photobucket.com/user/cetmrw791346/media/2_zps0f2b94a2.png.html](http://s1278.beta.photobucket.com/user/cetmrw791346/media/2_zps0f2b94a2.png.html)

以下是相关文件：

```
**AndroidManifest.xml**

<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.firstapp"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.firstapp.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.example.firstapp.DisplayMessageActivity"
            android:label="@string/title_activity_display_message"
            android:parentActivityName="com.example.firstapp.MainActivity" >
            <meta-data
                android:name="android.support.PARENT_ACTIVITY"
                android:value="com.example.firstapp.MainActivity" />
        </activity>
    </application>

</manifest>

**MainActivity.java**

package com.example.firstapp;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.widget.EditText;

public class MainActivity extends Activity {

    public final static String EXTRA_MESSAGE = "com.example.myfirstapp.MESSAGE";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    /** Called when the user clicks the Send button */
    public void sendMessage(View view) {
        Intent intent = new Intent(this, DisplayMessageActivity.class);
        EditText editText = (EditText) findViewById(R.id.edit_message);
        String message = editText.getText().toString();
        intent.putExtra(EXTRA_MESSAGE, message);
        startActivity(intent);
    }
}
activity_main.xml
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal"
    tools:context=".MainActivity" >
  <EditText android:id="@+id/edit_message"
        android:layout_weight="1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:hint="@string/edit_message" />
<Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/button_send"
         android:onClick="sendMessage" />

</LinearLayout>

**strings.xml**

<?xml version="1.0" encoding="utf-8"?>
<resources>

    <string name="app_name">My First App</string>
    <string name="edit_message">Enter a message</string>
    <string name="button_send">Send</string>
    <string name="menu_settings">Settings</string>
    <string name="title_activity_main">MainActivity</string>
    <string name="title_activity_display_message">DisplayMessageActivity</string>
    <string name="action_settings">Settings</string>
    <string name="hello_world">Hello world!</string>

</resources>

activity_display_message.xml
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".DisplayMessageActivity" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/hello_world" />

</RelativeLayout>

**DisplayMessageActivity.java**

package com.example.firstapp;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.MenuItem;
import android.support.v4.app.NavUtils;
import android.annotation.TargetApi;
import android.os.Build;

public class DisplayMessageActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_display_message);
        // Show the Up button in the action bar.
        setupActionBar();
    }

    /**
    * Set up the {@link android.app.ActionBar}, if the API is available.
    */
    @TargetApi(Build.VERSION_CODES.HONEYCOMB)
    private void setupActionBar() {
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
            getActionBar().setDisplayHomeAsUpEnabled(true);
        }
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case android.R.id.home:
            // This ID represents the Home or Up button. In the case of this
            // activity, the Up button is shown. Use NavUtils to allow users
            // to navigate up one level in the application structure. For
            // more details, see the Navigation pattern on Android Design:
            //
            // http://developer.android.com/design/patterns/navigation.html#up-vs-back
            //
            NavUtils.navigateUpFromSameTask(this);
            return true;
        }
        return super.onOptionsItemSelected(item);
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T04:27:18.757

如控制台日志：

> 错误：找不到与给定名称匹配的资源（在“标题”处，值为“@string/action_settings”）

意味着你需要`action_settings`在文件中定义一个字符串`res/values/strings.xml`：

```
<resources>
        <!-- Other String name- value -->
    <string name="action_settings">Action Settings</string>
</resources> 
```

第二种方法是，如果您不使用`Menu` 您的应用程序，则只需在内部评论`android:title`项目属性`res/menu/main.xml`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T04:28:32.523

它是在抱怨`menu/main.xml`，而不是`layout/activity_main.xml`

看起来您的菜单项没有使用完全限定的名称，`android:title`而不仅仅是`title`或者您没有定义它正在使用的字符串。

# tsql - 使用 T-SQL 为默认电话格式创建触发器

> ID：15331177
> 
> 赞同：0
> 
> 时间：2013-03-11T04:24:39.520
> 
> 标签：tsql, sql-server-2008-r2, format, dml, triggers

我创建了一个触发器，确保电话号码以默认格式插入到数据库中。它是为 Oracle 数据库创建的。现在我在 SQL Server 2008 R2 中工作并且在转换这个触发器时遇到了麻烦。任何人都可以帮我将以下触发器转换为 T-SQL 吗？

```
create or replace trigger before_insert_update_locations  
BEFORE insert or update  
ON locations  
for each row  
BEGIN  
    if length(:new.phone) = 10 then  
       :new.phone := '('||substr(:new.phone,1,3)||') '||substr(:new.phone,4,3)||'-'||substr(:new.phone,7,4);  
    elsif length(:new.phone) = 7 then  
       :new.phone := '(907) '||substr(:new.phone,1,3)+'-'||substr(:new.phone,4,4);  
    end if;  
END; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T16:52:38.460

这应该这样做。请记住，每个语句都会触发 T-SQL 触发器。没有“FOR EACH ROW”等价物。因此，下面的触发器在更新和插入后触发，以调整新更新/插入的行的值。如果没有更新电话号码，“IF EXISTS”位会阻止它执行任何操作。

```
CREATE TRIGGER UPDPH
ON locations
AFTER UPDATE, INSERT
AS
BEGIN
    IF EXISTS
        (
            SELECT NULL
            FROM
                inserted i
            LEFT JOIN
                locations l
                ON i.locationsID = l.locationsID
                AND 
                    (
                        i.phone <> l.phone
                        OR 
                        (   l.phone IS NULL
                            AND 
                            i.phone IS NOT NULL
                        )
                        OR
                        (   i.phone IS NULL
                            AND 
                            l.phone IS NOT NULL
                        )
                    )                   
        )
    UPDATE locations
    SET phone = 
        CASE 
            WHEN LEN(i.phone) = 10
                THEN '(' + left(i.phone, 3)
                    + ') '
                    + SUBSTRING(i.phone, 4, 3)
                    + '-'
                    + RIGHT(i.phone, 4)
            WHEN LEN(i.phone) = 7
                THEN '(907) '
                    + LEFT(i.phone, 3)
                    + '-'
                    + RIGHT(i.phone, 4)
            ELSE    
                i.phone
        END
    FROM
        inserted i
    JOIN
        locations 
        ON locations.locationsID = i.locationsID;
END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T08:48:13.947

就像@Jason Quinones 所说，Transact-SQL 不支持触​​发器`FOR EACH ROW`。它也不支持`BEFORE`那些，这就是为什么他和我的回答都提供了一个`AFTER`触发器。尽管事实上，`INSTEAD OF`T-SQL 中有触发器，有时*可以*用作`BEFORE`触发器的替代品，但两者还是完全不同的（正如名称所暗示的那样）。

无论如何，`AFTER`触发器应该可以完美地解决这个问题，所以，这里有另一个 Transact-SQL 版本供您使用：

```
CREATE TRIGGER locations_format_phone
ON locations
AFTER INSERT, UPDATE
AS
BEGIN
  UPDATE locations
  SET phone = '(' + STUFF(STUFF(RIGHT('907' + RTRIM(i.phone), 10), 7, 0, '-'), 4, 0, ') ')
  FROM inserted AS i
  WHERE i.location_id = locations.location_id
    AND LEN(i.phone) IN (7, 10)
END 
```

如您所见，仅当 的长度为`phone`7 或 10 个字符时，触发器才会执行更新。（其他长度的值因此保持不变。）

如果该值是指定长度之一，则首先确保其长度为 10：`907`在开头添加默认前缀，然后取结果的最后 10 个字符。因此，为了说明该方法的工作原理，如果原始长度为 7，您将得到：

```
'907' + '1234567'  ->  '9071234567'            ->  '9071234567'
                        ^^^^^^^^^^ (10 chars)      (same as before) 
```

如果是 10，则会发生以下情况：

```
'907' + '1234567890'  ->  '9071234567890'            ->  '1234567890'
                              ^^^^^^^^^^ (10 chars)      (original value) 
```

接下来，[`STUFF`](http://msdn.microsoft.com/en-us/library/ms188043.aspx "东西（事务处理-SQL）")调用该函数两次以在结果数字的中间插入 a`-`和 a `) `。因为插入位置与未更改的 10 位数字相关，所以`-`先插入 ，然后插入`) `（否则需要考虑位置的移动）：

```
 #4  #7
        |  |
        v  v
0)  'xxxxxxxxxx'

1)  'xxxxxx-xxxx'

2)  'xxx) xxx-xxxx' 
```

最后，`(`在开头简单地连接了 a。

与此问题相关的另一件值得牢记的事情是，`AFTER UPDATE`更新同一个表的触发器可能会导致自身再次触发，这是一种称为*触发器递归*的现象。默认情况下禁用触发递归，但如果您不确定相应选项是否从未更改，您可能需要验证其当前状态。查询`sys.databases`是一种方法：

```
SELECT is_recursive_triggers_on
FROM sys.databases
WHERE name = '*your database name*' 
```

作为`is_recursive_triggers_on`一`bit`列，0 代表`off`，1 代表`on`。

上述触发器的设计方式**不会**阻止其无限递归：即使嵌套调用会在某个时候停止更新任何行（因为`LEN(i.phone) IN (7, 10)`条件`false`最终会变为），触发器[仍将继续被调用](https://stackoverflow.com/questions/15380305/why-is-insert-trigger-called-when-there-is-no-data-to-insert "为什么在没有数据要插入的情况下调用插入触发器？")。要解决此问题，您只需在开头添加此检查：

```
IF NOT EXISTS (SELECT * FROM inserted)
  RETURN
; 
```

在此处阅读有关递归触发器的更多信息：

*   [创建嵌套触发器](http://msdn.microsoft.com/en-us/library/ms190739.aspx#sectionToggle0)

# git-gui - Git GUI - 从启动屏幕上最近使用的存储库中删除条目

> ID：15331180
> 
> 赞同：3
> 
> 时间：2013-03-11T04:24:49.223
> 
> 标签：git-gui

我在初始屏幕上有一些最近使用的存储库，我想删除它们，因为我不再使用它们了。如何删除它们？

操作系统 = Windows 7

我查看了注册表并搜索了 git 目录，但找不到最近使用的列表存储在哪里。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T07:03:31.150

来自[git-gui 来源`choose_repository.tcl`](https://github.com/git/git/blob/master/git-gui/lib/choose_repository.tcl#L231-L241)

```
proc _get_recentrepos {} {
  set recent [list]
  foreach p [get_config gui.recentrepo] {
    if {[_is_git [file join $p .git]]} {
      lappend recent $p
    } else {
      _unset_recentrepo $p
    }
  }
  return [lsort $recent]
} 
```

因此`git config`，请检查是否有**`gui.recentrepo`**可以修改的行。

请注意，将那些旧的 repos 移走（即确保它们记录的路径不再有效）将使 git-gui 中的这些条目自动*消失*。

# php - 警告：fopen（./channels/tvchannel/13_03.html）[function.fopen]：无法打开流：权限被拒绝

> ID：15331182
> 
> 赞同：0
> 
> 时间：2013-03-11T04:24:59.010
> 
> 标签：php

我正在执行一个脚本（通过 php）。

每当我执行它时，我都会收到以下错误：

```
Warning: fopen(./channels/tvchannel/13_03.html) [function.fopen]:     failed to open stream: Permission denied in /home/tvguide/public_html/script.php on line 189

Warning: fwrite() expects parameter 1 to be resource, boolean given in /home/tvguide/public_html/script.php on line 190

Warning: fclose() expects parameter 1 to be resource, boolean given in /home/tvguide/public_html/script.php on line 191 
```

首先，我以为是文件夹权限的问题，所以我设置了775涉及的所有文件夹。

第 187 到 192 行在我的 script.php 中如下所示

```
$file_to_update = "$mypage/$suff/$txt_url.html";
if(!file_exists($file_to_update)) {
$stream = fopen($file_to_update, "w+");
fwrite($stream, $text);
fclose($stream);
} 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T04:35:38.547

据我所知，您正在`w+`打开文件。`775`但是，正如您所说，您只被授予对该文件夹的权限。

即没有公开的写权限。授予`777`权限并执行。看看它是否有效。

# php - 使用“显示”作为字段名称时尝试插入行的语法错误

> ID：15331183
> 
> 赞同：0
> 
> 时间：2013-03-11T04:25:10.197
> 
> 标签：php, mysql, prepared-statement

我有一张桌子：

```
up_rel

> |--id--|--uid--|--pid--|--show--| 
```

我正在做这个插入序列：

```
 $icat_sth = $dbh->prepare("INSERT INTO product_category (name, parent) VALUES(:name, :parent)");
    $icat_sth->bindParam(':name', $post['cat_name']);
    $icat_sth->bindParam(':parent', $post['parent_category']);
    $icat_sth->execute();
    $pid = $dbh->lastInsertId();

    $rel_sth = $dbh->prepare("INSERT INTO up_rel (uid, pid, show) VALUES(:uid, :pid, :show)");
    $rel_sth->bindParam(':uid', $uid);
    $rel_sth->bindParam(':pid', $pid);
    $rel_sth->bindParam(':show', '1');
    $rel_sth->execute();
    echo $dbh->lastInsertId(); 
```

第一次插入产品类别顺利，但下一次插入返回错误：

> 1064 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'show) VALUES(?, ?, ?)' 附近使用正确的语法

如果我从插入中删除显示它可以工作。

我已经尝试将它放在值`(:uid, :pid, 1)` 中，并且在绑定中我引用了它而不是。

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T04:30:28.213

`Show`是 MySQL 中的保留字，所以我认为这是您看到的错误：http: [//dev.mysql.com/doc/refman/5.0/en/show.html](http://dev.mysql.com/doc/refman/5.0/en/show.html)。

根据@Burhan Khalid 的贡献（如果您无法重命名该字段，这是一个不错的选择）：

> 要转义保留字，请使用反引号 ``。

@newfurniturey 对保留字有更有用的参考：

[http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

# c - 切换字符大小写，指针问题

> ID：15331184
> 
> 赞同：0
> 
> 时间：2013-03-11T04:25:14.963
> 
> 标签：c, pointers

我的程序的目标是切换输入的两个字母的大小写。例如a转向A，B转向b。当我知道我的逻辑正确时，我无法让我的代码正常工作。

```
#include <stdio.h>;

void switcharoo(char *ch1,char *ch2)
{

    if(*ch1 >= 'a' && *ch1 <= 'z' && *ch2 >= 'A' && *ch2 <= 'Z')
    {
        *ch1 = 'A' + *ch1 - 'a';
        *ch2 = 'a' + *ch2 - 'A';
    }
    else if(*ch1 >= 'A' && *ch1 <= 'Z' && *ch2 >= 'A' && *ch2 <= 'Z')
    {
        *ch1 = 'a' + *ch1 - 'A';
        *ch2 = 'a' + *ch2 - 'A';
    }
    else if(*ch1 >= 'a' && *ch1 <= 'z' && *ch2 >= 'a' && *ch2 <= 'z')
    {
        *ch1 = 'A' + *ch1 - 'a';
        *ch2 = 'A' + *ch2 - 'a';
    }
    else if(*ch1 >= 'A' && *ch1 <= 'Z' && *ch2 >= 'a' && *ch2 <= 'z')
    {
        *ch1 = 'a' + *ch1 - 'A';
        *ch2 = 'A' + *ch2 - 'a';
    }
}

int main()
{
    char lettera,letterb;

    printf("Please input a first character: ");
    scanf("%c", &lettera);
    printf("Please input a first character: ");
    scanf("%c", &letterb);

    switcharoo(lettera,letterb);
    printf("%c\n %c\n",lettera,letterb);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T04:32:20.670

```
scanf("%c", &lettera);
scanf("%c", &letterb); 
```

这可能不是你想要的。您可能在输入第一个字母后键入的换行符（输入）字符（假设您的提示暗示您希望它们在不同的行上）将作为第二个字母读入。您必须输入两个字母，然后输入一个换行符才能将它们读入您的`lettera`并`letterb`成功...只能提示一次输入 2 个字符。此外，检查的返回值`scanf`以确保它得到您请求的输入是一种很好的做法......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T04:33:24.110

除非我需要创建自己的函数，否则我会使用`#include <ctype.h>`函数让我的生活更轻松。

```
#include <ctype.h>
#include <stdio.h>

int main()
{
    char lettera,letterb;

    printf("Please input a first character: ");
    scanf("%c", &lettera);
    printf("Please input a first character: ");
    scanf(" %c", &letterb); // note the space in front of %c to flush '\n'

    // lettera conversion
    if(isupper(lettera)) {
        lettera = tolower(lettera);
    } else if (islower(lettera)) {
        lettera = toupper(lettera);
    }

    // letterb conversion
    if(isupper(letterb)) {
        letterb = tolower(letterb);
    } else if (islower(letterb)) {
        letterb = toupper(letterb);
    }

    printf("%c\n %c\n",lettera,letterb);

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T04:28:03.917

你应该打电话

```
switcharoo(lettera,letterb); 
```

作为

```
switcharoo(&lettera,&letterb); //passing address of lettera and letterb 
```

当您正在`char *`使用该功能时。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T04:44:15.397

您的代码将无法运行。编译器将给出错误，因为 con not convert char to char *。

尝试按照 Rohan 建议的方式调用您的函数。

或者你可以简化你的功能。仅将它用于一个参数并调用它两次。

```
char changeCase(char ch) {
  if (ch >= 'A' && ch <= 'Z')
    ch -= 32;
  if (ch >= 'a' && ch <= 'z')
    ch += 32;
  return ch;
} 
```

主要你可以写，

```
char lettera, letterb;
//get values of lettera and letterb
lettera = changeCase(lettera);
letterb = changeCase(letterb); 
```

# php - SQL - 多对多 - 如何在一个查询中完成？

> ID：15331186
> 
> 赞同：1
> 
> 时间：2013-03-11T04:25:36.260
> 
> 标签：php, mysql, sql, join, subquery

如果我有一个这样的数据库，有 3 个表：

```
Table: BlogEntries
BlogEntries.id (pk)
BlogEntries.blogText

Table: Tags
Tags.id (pk)
Tags.TagName

Table: TagsForBlogEntries
TagsForBlogEntries.id (pk)
TagsForBlogEntries.tag_id
TagsForBlogEntries.entry_id 
```

如果我想获取博客条目列表并获取这样的数据（表示为数组）：

```
array (
[0] => array(
    [id] => '1',
    [blogText] => 'example text',
    [tags] => array(
      array([id]=>1, [TagName] => 'A Test Tag 1'),
      array([id]=>2, [TagName] => 'A Test Tag 2'),

    )
), 
```

（即所有标签）。最好的方法是如何做到这一点？

我目前会这样做（伪代码） - 基本上“手动”运行子查询（不是来自原始 sql 查询）：

```
select * from BlogEntries;
$rows =array();
foreach($blogEntries as $row) {

   $row['tags'] = mysql_fetch_array( mysql_query("select * from Tags left join TagsForBlogEntries on TagsForBlogEntries.tag_id = tags.id where entry_id = " . $row['id'] ) ) ;
   $rows[] = $row;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T04:30:48.637

有几种方法。一种是按博文分组：

```
SELECT be.id, blogText, GROUP_CONCAT(TagName) AS tags
FROM BlogEntries be JOIN TagsForBlogEntries tbe ON (be.id = tbe.entry_id)
JOIN Tags ON (tbe.tag_id = Tags.id)
GROUP BY be.id 
```

当您遍历每一行时，您可以`tags`用逗号分隔列（或使用您自己`SEPARATOR`的`GROUP_CONCAT`.

第二个将与上述类似，但您自己进行聚合。没有`GROUP BY`。

```
while ($row = $result->fetch()) {
    if (!isset($blogs[$row['id']]) {
        $blogs[$row['id']] = array(
            'text' => $row['blogText'],
            'tags' => array()
        );
    }
    $blogs[$row['id']]['tags'] = $row['TagName'];
} 
```

# javascript - 不加载/发送 javascript 到移动客户端。- HTML

> ID：15331188
> 
> 赞同：0
> 
> 时间：2013-03-11T04:25:48.863
> 
> 标签：javascript, jquery, html

Javascript 文件的大小往往偏大，即使在压缩时也是如此。多亏了javascript，我有一个在桌面上看起来很棒的网站，而且我不担心那里的大小。但是在移动设备上，即使是额外的 50 KB 也很大，所以我做了一些 css 更改，使移动设备看起来很棒，但是现在所有的 javascript 文件也都被发送（到移动设备），即使不需要他们了。

如果客户端具有移动 ID，我有没有办法禁用所有 javascript 文件的发送？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T05:19:30.003

有很多方法可以解决这个问题，通过像[WURFL](http://wurfl.sourceforge.net/)这样的服务器端库，甚至是简单的用户代理检查，并使用网关方法来加载脚本

```
var is_mobile = navigator.userAgent.match(/android|iphone/ig);

var require = function(src, success, failure, force_load){
    if( is_mobile && !!force_load ){ return; }

    var script = document.createElement('script');
    script.async = true; script.type = 'text/javascript'; script.src = src;
    script.onload = success || function(e){};
    script.onerror = failure || function(e){};
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(script);
}

// loaded just for desktop
require('js/desktop-script.js', function(){ // onload
    // desktop only script
}, function(){ // onerror
    console.log("Something went wrong loading this script");
});

// loaded for desktop and mobile
require('js/jquery.js', function(){ // onload
    // desktop and mobile script
}, function(){ // onerror
    console.log("Something went wrong loading this script");
}, true); 
```

# javascript - 增强现实，叠加 3d 模型

> ID：15331189
> 
> 赞同：2
> 
> 时间：2013-03-11T04:25:50.407
> 
> 标签：javascript, augmented-reality

我如何将像[https://code.google.com/p/js-handtracking/](https://code.google.com/p/js-handtracking/)这样的库与 3D 模型一起使用以叠加在手部跟踪上？

你会如何使用 3d 模型文件来处理这样的事情？

模型需要采用什么格式？我从来没有处理过 3D 模型叠加。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-04T11:04:51.173

您要叠加的 3D 对象可以是任何 3D 对象（例如 obj、3ds、ply、vrml）。实际上模型表示不是问题，因为您可以将 3d 表示转换为任何其他 3d 表示（通常）。渲染场景取决于您的浏览器/播放器。

为了在检测到的手上叠加 3d 模型，您需要知道手的位置（当然是相对于您的场景）。检测算法应该为您提供某种可以转换为旋转、平移和缩放的转换矩阵。然后您可以使用这些值将您的 3d 对象放置在 3d 场景中的正确位置。

您应该首先检查是否有手部跟踪算法的 API，或者至少如何截取输出数据（如果有）。否则，您将不得不搜索进行检测的算法（源代码..）并获取转换矩阵并将其应用于您的 3d 对象。

# java - 在java中格式化数组值

> ID：15331190
> 
> 赞同：0
> 
> 时间：2013-03-11T04:26:10.100
> 
> 标签：java, format, output

我正在编写一个菜单驱动的程序，允许用户创建一定数量的团队，然后记录这些团队的胜负。我想格式化我的输出，让它看起来很干净，但是，这样做有点麻烦。如何创建赢/输列？

```
import java.util.Scanner;

public class sports {

public static void main(String[] args) {

    System.out.println("Howdy sports fan!");

    String menuSelect;
    String winSelect;
    String loseSelect;
    int teamSize = 0;

    String[] teamsArray = new String[0];
    int[] winsArray = new int[0];
    int[] lossesArray = new int[0];

    do {

        System.out.println("Please pick an option from the list below:");
        System.out.println("1) Create League");
        System.out.println("2) List all teams");
        System.out.println("3) Record a win");          
        System.out.println("4) Record a loss");         
        System.out.println("5) Quit");          
        Scanner keyboard = new Scanner(System.in);
        menuSelect = keyboard.nextLine();

        if ( menuSelect.equals("1") )
        {

            System.out.println("How many teams should I make?");
            teamSize = Integer.parseInt(keyboard.nextLine());
            teamsArray = new String[teamSize];

            for ( int i = 0; i < teamsArray.length; ++i )
            {
                System.out.println("Team " + (i+1) + "'s name?");
                teamsArray[i] = keyboard.nextLine();                
            }
        }

        else if ( menuSelect.equals("2") )
        {

            System.out.printf( "%15s %16s %n", "W", "L");

            for ( int i = 0; i < teamsArray.length; ++i )
            {
                System.out.println(teamsArray[i]);
                System.out.printf("%15d", winsArray[i]);
                System.out.printf("%16d", lossesArray[i]);

            }
        }

        else if ( menuSelect.equals("3") )
        {
            winsArray = new int[teamSize];
            System.out.println("Which team won a game?");
            winSelect = keyboard.nextLine();

            for ( int i = 0; i < teamsArray.length; ++i )
            {
                if ( winSelect.equals(teamsArray[i]) )
                {
                    winsArray[i]++;
                }
            }
        }

        else if ( menuSelect.equals("4") )
        {
            lossesArray = new int[teamSize];
            System.out.println("Which team lost a game?");
            loseSelect = keyboard.nextLine();

            for ( int i = 0; i < teamsArray.length; ++i )
            {
                if ( loseSelect.equals(teamsArray[i]) )
                {
                    lossesArray[i]++;
                }
            }
        }

    } while(!menuSelect.equals("5"));

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T04:33:05.643

使用[System.out.format](http://docs.oracle.com/javase/6/docs/api/java/util/Formatter.html)。您可以设置字段长度，如 System.out.format("%50s%50s", string1, string2);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T04:37:41.177

您可以使用`System.out.printf`or`String.format`方法。请注意，我们使用“-”标志将宽度设置为 20。请参阅[说明。](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Formatter.html#syntax)

```
public class Example {
  public static void main(String[] args) {
    String[] teams = {"Bobcats", "Tigers", "Lions", "Cheetahs", "Jackals", "Leopards", "Snow Leopards", "Cougars", "Mountain Lions", "Bobcats"};
    System.out.printf("%-30s %-20s %-20s %n", "Team Name", "No. of Wins", "No. of Losses");
    for (int i = 0; i < 10; i++) {
      System.out.printf("%-30s %-20d %-20d %n", teams[i], i, i);
    }
  }
}

$ javac Example.java
$ java Example

Team Name                      No. of Wins          No. of Losses        
Bobcats                        0                    0                    
Tigers                         1                    1                    
Lions                          2                    2                    
Cheetahs                       3                    3                    
Jackals                        4                    4                    
Leopards                       5                    5                    
Snow Leopards                  6                    6                    
Cougars                        7                    7                    
Mountain Lions                 8                    8                    
Bobcats                        9                    9 
```

酷吧？:-)

# c# - 设置质量视频录制桌面屏幕windows媒体编码器9 SDK

> ID：15331192
> 
> 赞同：0
> 
> 时间：2013-03-11T04:26:27.657
> 
> 标签：c#, windows-media-encoder

我在 C# 中使用 windows 媒体编码器 9 SDK 到`record desktop screen`. 但是视频质量很差。

如何设置视频的质量？

这是我的代码：

```
WMEncoderApp DesktopEncoderAppln = new WMEncoderApp();
DesktopEncoder = DesktopEncoderAppln.Encoder;
IWMEncSourceGroupCollection SrcGroupCollection = DesktopEncoder.SourceGroupCollection;
IWMEncSourceGroup SrcGroup = SrcGroupCollection.Add("SG_1");
IWMEncVideoSource2 VideoSrc = (IWMEncVideoSource2)SrcGroup.AddSource(WMENC_SOURCE_TYPE.WMENC_VIDEO); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-18T15:19:36.710

为什么不创建一个预定义的 WM 配置文件，您可以在其中设置质量要求，并在您的 C# 代码中，使用所有预定义设置加载如此创建的配置文件

```
WMEncProfile2() 
```

请使用 WMEncProfile2 查看 SDK 文档以获取更多信息 abt

希望这可以帮助。

# .net - EntLib5 中的日志文件名问题

> ID：15331193
> 
> 赞同：0
> 
> 时间：2013-03-11T04:26:32.670
> 
> 标签：.net, enterprise-library

我有 Windows 窗体应用程序，它每天使用这种文件名格式写入日志

> yyyy-mm-dd-appName.log

这些设置是 EntLib 开箱即用的。我只有一个跟踪侦听器。问题是，如果运行应用程序的用户打开 .log 文件，比如在记事本或其他编辑器中，并且应用程序再次运行，则文件名的 GUID 如下所示

> 8989dsf908dsfds9900.log

我猜这是 EntLib 使用的临时名称，因为应用程序和记事本都在使用该文件。当用户在记事本中关闭文件时，文件名仍然是 GUID。所以在日志文件夹中有一堆带有这些 GUID 的文件。

可以做些什么来解决这个问题吗？问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T03:22:19.510

正如**Randy Levy**在此[链接](http://entlib.codeplex.com/discussions/400468)中所说：这是由 System.Diagnostics 中的文件锁定引起的。您获得多个文件的原因是当用户打开日志文件时，这会导致文件独占锁定。此外，每个跟踪侦听器都尝试在日志记录过程中以独占方式锁定（或将尝试锁定）同一个文件，并且当它无法获得锁定时，它将创建一个带有 GUID 前缀的新文件。

# activiti - 如何使activiti显示文本输入的文本区域字段？

> ID：15331195
> 
> 赞同：0
> 
> 时间：2013-03-11T04:27:00.597
> 
> 标签：activiti

如何让 activiti 显示 textarea 字段，在下面的 formProperty 中插入文本输入？

```
<extensionElements>
        <activiti:formProperty id="Ata"
        name="Ata"
        required="true"
        type="string" />
    </extensionElements> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T07:53:06.067

1.  扩展`AbstractFormType`类并覆盖它的方法，如本示例[TextAreaFormType.java所示](http://code.google.com/p/activitiinaction/source/browse/trunk/book-explorer-form/src/main/java/org/bpmnwithactiviti/explorer/form/TextAreaFormType.java)
2.  Activiti Explorer 是在 Vaadin 中实现的，因此表单字段也必须使用 Vaadin 来实现。[在这里](http://code.google.com/p/activitiinaction/source/browse/trunk/book-explorer-form/src/main/java/org/bpmnwithactiviti/explorer/form/TextAreaFormPropertyRenderer.java) 您可以找到示例实现

3.  [向applicationContext.xml](http://code.google.com/p/activitiinaction/source/browse/trunk/book-explorer-form/src/main/webapp/WEB-INF/applicationContext.xml)中的流程引擎配置添加自定义表单类型`applicationContext.xml`

* * *

```
<bean id="processEngineConfiguration" class="org.activiti.spring.SpringProcessEngineConfiguration">
<property name="customFormTypes">
<list>
<ref bean="userFormType"/>
<ref bean="textAreaFormType"/>
</list>
</property>
</bean>
<bean id="userFormType" class="org.activiti.explorer.form.UserFormType"/>
<bean id="textAreaFormType" class="org.bpmnwithactiviti.explorer.form.TextAreaFormType"/> 
```

# retina-display - 为什么位图图像在 Retina 显示屏上看起来很模糊？

> ID：15331196
> 
> 赞同：3
> 
> 时间：2013-03-11T04:27:15.820
> 
> 标签：retina-display

我没有视网膜设备，但我一直在网上看到这个讨论。我已经阅读了有关为具有 Retina 显示器的设备提供 2 倍图像大小的解决方案，以确保位图不会变得模糊。

但是，我不明白这是如何工作的。首先，正如我所读到的，我假设 Retina 显示器的像素密度是四倍（2 平方）。因此，这意味着正常显示器的每个像素在 Retina 中被四个像素所取代，而它们总体上占据相同的物理空间。

现在，我将参考 SmashingMagazine 的一篇文章 ( [http://coding.smashingmagazine.com/2012/08/20/towards-retina-web/](http://coding.smashingmagazine.com/2012/08/20/towards-retina-web/) )。他们在这里使用了一张图片来解释这个概念： http: [//media.smashingmagazine.com/wp-content/uploads/2012/07/css-device-bitmap-pixels.png](http://media.smashingmagazine.com/wp-content/uploads/2012/07/css-device-bitmap-pixels.png)

他们说，由于 Retina 的像素密度是其四倍，它会将位图的像素乘以每个像素，从而使图像失去细节。

但是，在这两种情况下（4 像素或 1 像素），“彩色块”的物理尺寸仍然相同。那么，保真度的损失在哪里呢？位图像素仍以相同的物理尺寸表示。

这就是我现在的看法。显然，我在做出某种假设，这让我无法理解这个概念。谁能澄清一下？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-07-13T00:39:36.503

在解释如何在视网膜显示器上放大标准光栅图像时，文章指出：

> 由于无法进一步划分位图像素，因此在 Retina 显示器上将其乘以 4 以保持图像的相同物理尺寸，**沿途丢失细节**。

这是误导性的，您的初步理解是正确的。视网膜显示器的像素密度是标准显示器的四倍，因此标准显示器上的单个像素对应于物理尺寸相同的视网膜显示器上的四个像素 (2x2)。细节没有损失，事实上，他们在该声明下方包含的图像证明了这一点：

![设备像素]](../Images/4b1778703afa223f38aad8a9b4695db8.png)

现在，令人困惑的是，如果您在标准显示器和视网膜显示器上并排查看相同的光栅图像，它们看起来并不相同：图像在视网膜显示器上确实看起来更*模糊。*但与文章所说的相反，这并不是因为图像“丢失了细节”，而是因为苹果在放大图像时对图像应用了某种平滑算法。

* * *

那么问题来了，苹果为什么要这么做？

我不知道这是必要的技术原因；如果有的话，平滑图像必须至少增加最小量的开销。

但是，这样做有一个很好的*营销*理由：它使标准图形和视网膜图形之间的差异更加明显和明显。

这听起来像是噱头，但实际上很重要。苹果非常擅长使用“胡萝卜加大棒”的方式让消费者和开发者采用新功能，这就是一个很好的例子。“胡萝卜”是视网膜显示的更高质量——谁不想要更清晰的画面？- 虽然“坚持”是如果您作为开发人员不更新您的应用程序，它看起来会很糟糕（尤其是与其他已经更新的应用程序一起）。

因此，这种方法为开发人员更新应用程序创造了动力，这反过来又使视网膜显示成为消费者更大的卖点，进而对开发人员更新应用程序产生了进一步的需求。*这是一个良性循环，因此，我多年来*没有遇到过一个非视网膜 Mac 应用程序。

# javascript - 获取未捕获的类型错误：对象# has no method 'get' when i try to display data in template I am running into the issue of getting Uncaught TypeError: Object # has no method 'get' when i try to display data in a template here are the different bac 问问题 问问题 2013-03-11T04:27:44.433 2130 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I am running into the issue of getting Uncaught TypeError: Object # has no method 'get' when i try to display data in a template here are the different backbone parts: Template:  Data Models and Collection: $.ajaxPrefilter(function(options, originalOptions, jqXHR) { options.url = 'http://localhost/' +options.url; }); var Office = Backbone.Model.extend({ defaults: { street : null, city : null, state : null, country : null, postal_code : null, }, initialize: function(){ console.log("==> NEW LOCATION"); // you can add event handlers here... } }); var Person = Backbone.Model.extend({ defaults: { picURL : null, firstName : null, lastName : null, email : null, role : null, location : new Office() }, initialize: function(){ console.log("==> NEW PERSON MODEL"); // you can add event handlers here... } }); var Users = Backbone.Collection.extend({ url:'loadData.php?list=16025,28477,28474,25513,16489,58911,04607', model:Person }); View: var ShowClass = Backbone.View.extend({ el: '.page', initialize: function() { _.bindAll(this); //Make all methods in this class have `this` bound to this class }, template: _.template($('#class-template').html()), render: function() { var users = new Users(); console.log('calling fetch'); users.fetch(); users.on("reset", function(users){ console.log('rendering with data:'+users.models[0].get('firstName')); this.$el.html(this.template({users:users.models})); console.log('finished'); }, this); } }); I am able to see the data that is returned from the fetch call, so i know that I am getting data back. It all seems to fall apart when i send it to the template. Thanks in advance for all of your help! (Transporting the answer from the comments to an actual answer, for the purpose of future visitors,) You may have some success with finger(1). But as @tjameson said in the comments, "it may not be available since it's a gaping security hole." You might want to reevaluate what functionality you're trying to achieve. javascriptbackbone.jsunderscore.js 4 1 回答 1 This answer is useful 1 而不是在你的脚本模板上执行 get()，你应该只传递原始属性而不是传递整个模型。 我意识到您还必须更改您的模板，但以这种方式抽象您的模板并在模板本身之外执行循环将使您更好地处理您的错误。这也将使您的代码模块化并且更易于调试。 看法： users.on("reset", function(users){ _.each(users, function (user) { var data = user.toJSON(); this.$el.html(this.template({ picUrl: data.picUrl, firstName: data.firstName })); }, this); 模板只是： <%- picUrl %> <%- firstName %> ... 于 2013-03-11T06:42:19.807 回答 Related 0 python - Appengine：保存实体时出现NameError 1 database-design - 具有库存水平跟踪的库存数据库 - 如何在结账前实施库存检查 2 javascript - JS：包括外部脚本的库 1 c# - 向 PropertyGrid 抛出异常 1 asp.net - ASP.NET 的 MySQL 连接字符串 2 iphone - 字体手提箱到 ttf 问题 1 .net - 错误：文件正被另一个进程使用，即使已关闭和处置 3 ruby - 初始化结束后类属性丢失值 1 java - 如何在 JPanel 中放置文本区域 0 javascript - 捕获 Facebook Oauth 错误 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：15331199
> 
> 赞同：0
> 
> 时间：
> 
> 标签：javascript, backbone.js, underscore.js

I am running into the issue of getting Uncaught TypeError: Object # has no method 'get' when i try to display data in a template here are the different backbone parts:

Template:

```
<script type="text/template" id="class-template">

                <table class="table striped"></table>

                <thead>

                <tr>

                <th>Picture</th>
                <th>First Name</th>
                <th>Last Name</th>
                <th>Role</th>
                <th>Email</th>

                </tr>

                </thead>

                <tbody>

                <% _.each(users,function(user){ %>

                <tr>
                <td><%= user.get('picUrl') %></td>
                <td><%= user.get('firstName') %></td>
                <td><%= user.get('lastLame') %></td>
                <td><%= user.get('role') %></td>
                <td><%= user.get('email') %></td>

                </tr>

                <% }); %>

                </tbody>
                  </table>

    </script> 
```

Data Models and Collection:

```
$.ajaxPrefilter(function(options, originalOptions, jqXHR) {

        options.url = 'http://localhost/' +options.url;

        });

        var Office = Backbone.Model.extend({

            defaults: {
                street : null,
                city : null,
                state : null, 
                country : null,
                postal_code : null,
            },
            initialize: function(){
                console.log("==> NEW LOCATION");

                // you can add event handlers here...

            }
        });
         var Person = Backbone.Model.extend({

            defaults: {
                picURL : null,
                firstName : null,
                lastName : null, 
                email : null,
                role : null,
                location : new Office()
            },
            initialize: function(){
                console.log("==> NEW PERSON MODEL");

                // you can add event handlers here...

            }
        });

        var Users = Backbone.Collection.extend({

        url:'loadData.php?list=16025,28477,28474,25513,16489,58911,04607',
        model:Person

        }); 
```

View:

```
var ShowClass = Backbone.View.extend({

            el: '.page',
            initialize: function() {
                _.bindAll(this); //Make all methods in this class have `this` bound to this class
            },

            template: _.template($('#class-template').html()),

            render: function() {

                var users = new Users();

                console.log('calling fetch');

                users.fetch();

                users.on("reset", function(users){
                    console.log('rendering with data:'+users.models[0].get('firstName'));
                    this.$el.html(this.template({users:users.models}));
                    console.log('finished');
                }, this);

            }

            }); 
```

I am able to see the data that is returned from the fetch call, so i know that I am getting data back. It all seems to fall apart when i send it to the template. Thanks in advance for all of your help!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T06:42:19.807

而不是在你的脚本模板上执行 get()，你应该只传递原始属性而不是传递整个模型。

我意识到您还必须更改您的模板，但以这种方式抽象您的模板并在模板本身之外执行循环将使您更好地处理您的错误。这也将使您的代码模块化并且更易于调试。

看法：

```
users.on("reset", function(users){
    _.each(users, function (user) {
        var data = user.toJSON();
        this.$el.html(this.template({
                        picUrl: data.picUrl, 
                        firstName: data.firstName }));
    }, this); 
```

模板只是：

```
<td><%- picUrl %></td>
<td><%- firstName %></td>
... 
```

# python - Z3py: Array of specific integer type?

> ID：15331203
> 
> 赞同：1
> 
> 时间：2013-03-11T04:27:55.103
> 
> 标签：python, z3

In Z3Python, I want to declare an array of bytes (meaning each member of array is of integer of 8 bits). I tried with the following code, but apparently it reports that Int(8) is illegal type.

Any idea on how to fix the problem? Thanks!

```
I = IntSort()
I8 = Int(8)
A = Array('A', I, I8) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T12:45:55.923

您不能提供数字作为 Int() 函数的参数。它需要一个字符串（实际上是整数的名称），而不是整数的大小（以位为单位）。您可能需要考虑使用位向量：

```
Byte = BitVecSort(8)
i8 = BitVec('i8', Byte)
A = Array('A', IntSort(), Byte) 
```

# windows-xp - Error when trying to link Box2D on Codeblocks 10.05 running on Windows XP

> ID：15331207
> 
> 赞同：0
> 
> 时间：2013-03-11T04:28:30.467
> 
> 标签：windows-xp, mingw, box2d, codeblocks

I'm trying to build a game I made with SDL and Box2D, but I hit a problem when trying to link the Box2D library. I set up the Box2D library as mentioned [here](https://stackoverflow.com/questions/5491007/how-would-i-build-box2d-to-work-in-codeblocks-mingw32windows) but when I try to build the game I get this error:

```
mingw32-g++.exe: \usr\local\lib\libBox2D.so: No such file or directory 
```

Does anyone know a way to fix this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T21:58:14.033

没关系，我设法通过更改项目构建选项来解决这个问题。

# c# - C#水晶报表PDF异常

> ID：15331210
> 
> 赞同：1
> 
> 时间：2013-03-11T04:28:51.660
> 
> 标签：c#, memory, stream, crystal-reports-2010

我有基于我手动创建的数据表的 c# 报告 PDF 导出项目。我正在使用以下代码尝试设置数据源并尝试了许多不同的变体，但无法从我的数据库中获取信息以正确显示在导出为 PDF 的报告中。并保存为我电脑的硬盘。

但是在运行以下代码时，我看不到任何 PDF 正在导出。例外如下

CrystalDecisions.CrystalReports.Engine.LogOnException：数据库登录失败System.Runtime.InteropServices.COMException：数据库登录失败。

我在合同成员的主报告子报告中设置了两个数据源，合同，合同成员

一份合约可以有多个合约成员。

它发生在最后一行

任何帮助是极大的赞赏。以下是我的代码

```
 string result;
            ContractReport report = new ContractReport();
            ContractDTO source = new ContractDTO();            
            report.Load(Server.MapPath("~/ContractReport.rpt"));
            source.Id = 1;
            source.Code = "ABC";
            source.Title = "LondonEast";          
            source.Member = new List<ContractMembersDTO>();
            source.Member.Add(new ContractMembersDTO() { Id = 1, ContractId = 1, StaffNameEng = "ABC", Position = "Project Manager" });
            source.Member.Add(new ContractMembersDTO() { Id = 2, ContractId = 1, StaffNameEng = "DEF", Position = "Project QS" });
            source.Member.Add(new ContractMembersDTO() { Id = 3, ContractId = 1, StaffNameEng = "GHI", Position = "Site Manager" });         
            report.SetDataSource(new[] { source });
            if (reportType.Equals("PDF"))
            {
                try
                {
                    MemoryStream oStream;
                    oStream = (MemoryStream)report.ExportToStream(ExportFormatType.PortableDocFormat); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T05:07:27.627

如果您在报告中有一个表格，那么您的语法*应该可以*工作......

```
report.SetDataSource(myCustomSource); 
```

如果您的主报告有多个表格，请尝试使用：

```
report.Database.Tables["DATASOURCE_TABLE_1"].SetDataSource(myCustomSource);
report.Database.Tables["DATASOURCE_TABLE_2"].SetDataSource(myOtherSource); 
```

如果您有子报表，则还需要单独设置它们：

```
report.Subreports[0].SetDataSource(mySubreportDatasource); 
```

或者

```
report.Subreports[0].Database.Tables[0].SetDataSource(mySubreportDatasource1);
report.Subreports[1].Database.Tables[0].SetDataSource(mySubreportDatasource2); 
```

# api - 监控 OCX 呼叫？

> ID：15331212
> 
> 赞同：1
> 
> 时间：2013-03-11T04:28:53.317
> 
> 标签：api, reverse-engineering, ocx

我有一个没有文档的 OCX，需要使用它。
我已经弄清楚了大部分内容，但是，是否可以监视一个软件对该 OCX 的所有调用和参数？
我已经尝试过 ProcessMonitor、APIMonitor，但它们都没有给我这些信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T09:32:29.193

我自己没试过，但是[WinApiOverride](http://jacquelin.potier.free.fr/winapioverride32/)似乎支持 COM 对象调用监控：

[http://jacquelin.potier.free.fr/winapioverride32/doc/com.htm](http://jacquelin.potier.free.fr/winapioverride32/doc/com.htm)

然而，这是一个非常先进的工具，您可能需要花一些时间为您的特定 COM 类添加规则。

# file - 在matlab中将数据附加到hdf5中的同一数据集

> ID：15331213
> 
> 赞同：3
> 
> 时间：2013-03-11T04:29:02.410
> 
> 标签：file, matlab, append, hdf5

我必须将所有庞大的数据放在 hdf5 中的单个数据集中。现在，问题是，如果您尝试：

```
>> hdf5write('hd', '/dataset1', [1;2;3])
>> hdf5write('hd', '/dataset1', [4;5;6], 'WriteMode', 'append')
??? Error using ==> hdf5writec
writeH5Dset: Dataset names must be unique when appending data. 
```

如您所见，当您尝试将数据附加到同一数据集时，hdf5write 会报错。我环顾四周，发现一种可能的解决方法是先从数据集中获取数据，然后在 matlab 环境中直接连接数据。当然，这对于小数据来说不是问题。对于这种情况，我们谈论的是千兆字节的数据，Matlab 开始大喊内存不足。

因此，在这种情况下，我有哪些可用选项？

注意：我们的 matlab 版本中没有 h5write 函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T16:32:31.667

你不能用 来做`hdf5write`，但是如果你的 Matlab 版本不是太旧，你可以用[`h5create`](http://www.mathworks.com/help/matlab/ref/h5create.html)and来做[`h5write`](http://www.mathworks.com/help/matlab/ref/h5write.html)。此示例取自以下[文档`h5write`](http://www.mathworks.com/help/matlab/ref/h5write.html)：

> 将数据附加到无限数据集。
> 
> ```
> h5create('myfile.h5','/DS3',[20 Inf],'ChunkSize',[5 5]);
> for j = 1:10
>     data = j*ones(20,1);
>     start = [1 j];
>     count = [20 1];
>     h5write('myfile.h5','/DS3',data,start,count);
> end
> h5disp('myfile.h5'); 
> ```

对于旧版本的 Matlab，应该可以使用 Matlab 的 HDF5 低级 API 来完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T13:15:20.457

我相信“附加”模式是将数据集添加到现有文件中。

hdf5write 似乎不支持附加到现有数据集。如果没有较新的 h5write 函数，最好的办法是编写一个小型实用程序，其中包含 H5* 包函数公开的低级 HDF5 库函数。

为了帮助您入门，[文档](http://www.mathworks.com/help/matlab/ref/h5d.write.html)页面有一个关于如何附加到数据集的示例。

# c# - Mono/Linux 字符编码问题？

> ID：15331221
> 
> 赞同：0
> 
> 时间：2013-03-11T04:30:31.617
> 
> 标签：c#, .net, linux, mono

我正在开发一个作为 .NET 控制台应用程序运行的项目。我最初是在 Windows 中编写的，但我刚刚转换为 GNU/Linux 并安装了 Mono，它可以很好地运行我的应用程序，但是输出存在问题。

![在此处输入图像描述](../Images/49f202a60a1a0374264aa3f82e5bc9b2.png)

输出应该是类似 'Loading plugin '/blabla/bla/path' 但你可以看到，嗯.... Giberish

我很确定有某种转义序列导致了这种情况，但我不知道是什么。任何人都知道可能导致这种混乱的原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T05:05:57.033

我想通了！这是由更改 Console.Forecolor 或背景颜色引起的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-24T18:35:47.977

我认为这要么是单声道中的错误，要么是您的 Linux 发行版中的错误。看这里：

[https://github.com/mono/mono/blob/master/mcs/class/corlib/System/TermInfoDriver.cs#L149](https://github.com/mono/mono/blob/master/mcs/class/corlib/System/TermInfoDriver.cs#L149)

现在看看你的 $TERM 是什么样子的——它的内容很可能不是“xterm”，而是类似于“xterm-256color”的东西。你会注意到它掉了下来。究竟发生了什么，我不知道，但我认为它不会落入 ANSI 终端，因为这也应该有效，而是从你的发行版中获取一个 terminfo 文件，它会阻塞并发出无效的转义序列颜色标记。此外，您可能会注意到，一旦您将 $TERM 设置为它可以识别的东西，所有颜色都会有光泽并且效果很好。

# ruby-on-rails-3 - 使用 nginx 将 Rails 应用程序迁移到生产环境

> ID：15331236
> 
> 赞同：0
> 
> 时间：2013-03-11T04:32:17.090
> 
> 标签：ruby-on-rails-3, nginx

我在VPS上。我用`rails new rails_app -d mysql`. 我正在与乘客一起运行 nginx。我正在运行 Rails 3.2.12 和 Ruby 1.9.3。在我的 nginx.conf 文件中，我在`server`指令中添加了以下内容：

```
listen       80;
server_name  www.mydomain.com;
passenger_enabled on;
root /home/mike/www/rails_app/public;
rails_env production; 
```

当我指向 www.mydomain.com 时，我看到 Welcome aboard 你正在使用 Ruby on Rails！。当我单击关于您的应用程序的环境时，我收到此错误：

```
The page you were looking for doesn't exist. 
```

当我检查我的 production.log 时，我看到了这个错误并且不知道如何处理它：

```
ActionController::RoutingError (No route matches [GET] "/rails/info/properties") 
```

我彻夜未眠，并阅读了与此类似的所有 SO 问题，但我仍然无法解决我的问题。如果我在开发中运行它，一切正常。

**编辑**

我发现了 Rails 2.3.4 问题的解释：链接触发了对 rails/info/properties 的 AJAX 请求。属性操作在 Rails::InfoController 中定义，它位于 /rails/railties/builtin/rails_info/rails/info_controller.rb 中。

该路由不需要显式定义，因为它符合 Rails 默认路由 :controller/:action/:id （尽管在这种情况下没有 ID 并且控制器位于 Rails 命名空间中。）

但我什么`info_controller.rb`地方都看不到。

好的，我发现了这个：`config.consider_all_requests_local`是一面旗帜。如果为 true，那么任何错误都会导致详细的调试信息被转储到 HTTP 响应中，并且 Rails::Info 控制器将在 /rails/info/properties 中显示应用程序运行时上下文。在开发和测试环境中默认为真，在生产模式下为假。对于更细粒度的控制，将其设置为 false 并实现 local_request？在控制器中指定哪些请求应提供有关错误的调试信息。

但将其设置为 false 无济于事。

**编辑 2** 好的，我是个白痴。在某处找到这个：`You're clicking the "About your application’s environment" link on the Rails default index.html page. This link only works in development environment, not in production.`

整个晚上我都以为我的 Rails 应用程序不工作了。所以我想我会放弃并去睡觉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T09:59:13.153

您忘记添加passenger_base_uri：

```
server {
    listen 80;
    server_name domain.com;
    charset utf-8;
    root /www/domain.com/public_html;
    passenger_enabled on;
    passenger_base_uri /blog;
    rails_spawn_method smart;
    rails_env production;
} 
```

还要检查乘客和铁路是否在相同的环境（生产或开发）中工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-23T09:04:35.407

对于将来可能会遇到此问题的人，请首先检查服务器中的生产日志。

1.  ssh 到你的服务器，`ssh username@serverIP`
2.  检查最近 20 条左右的错误消息`tail -20 /home/username/appname/current/log/production.log`
3.  如果这是您的代码中的错误（我的由于空数据库而返回一个空数组），则修复该错误并`cap production deploy`再次运行。
4.  重复以检查更多错误。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-11T05:58:36.600

我也面临同样的问题，但我后来发现由于权限，我们的应用程序无法访问特定文件夹。

试试这个命令：

```
chmod -R 777 {name of your project folder}/ 
```

# c# - WPF将窗口最小高度绑定到两个网格行的高度

> ID：15331240
> 
> 赞同：1
> 
> 时间：2013-03-11T04:33:00.583
> 
> 标签：c#, wpf, window

我在 Win7 下的 MSVC 2012 上使用 C# 和 .NET 4。

在 WPF 应用程序项目中，我有一个带有 3 行网格控件的窗口。

这是我的行定义：

```
<Grid.RowDefinitions>
    <RowDefinition Height="Auto"/>
    <RowDefinition Height="145"/>
    <RowDefinition Height="100*"/>
</Grid.RowDefinitions> 
```

顶行有一个菜单栏。中间行有一些控件。与窗口及其内容的底部行大小不相关。我想将窗口的最小高度“绑定”到前 2 行的组合高度，以便窗口可以最小化到它们是唯一可见的点。

我想我可以在视觉设计器中使用“自定义表达式”选项，但我不确定。建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T06:20:29.767

将 Window 的 SizeToContent 属性设置为等于 WidthAndHeight 而不是 Binding。我希望这会有所帮助。

# php - 将变量从 javascript 传递到 php

> ID：15331244
> 
> 赞同：1
> 
> 时间：2013-03-11T04:33:19.637
> 
> 标签：php, javascript, ajax

我想将一个变量从 JavaScript 中的函数传递给也位于 JavaScript 函数内部的 PHP。

例如：

```
myfunction('qwerty');

<script>
myfunctionjs(x)
{
<?php echo $x?>
}
</script> 
```

**注意：**上面的代码只是一个示例

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T04:35:43.330

无法立即将变量从 javascript 传递到 php。为此，您将不得不使用[AJAX](http://api.jquery.com/jQuery.ajax/)。您必须了解服务器端脚本和客户端脚本之间的区别。

[https://softwareengineering.stackexchange.com/questions/171203/what-are-the-difference-between-server-side-and-client-side-programming](https://softwareengineering.stackexchange.com/questions/171203/what-are-the-difference-between-server-side-and-client-side-programming)

阅读上面的链接，它将让您全面了解该过程。如果您有任何问题，请告诉我。

[阅读更多](http://webcheatsheet.com/PHP/passing_javascript_variables_php.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T04:36:33.283

您的代码示例虽然很清楚地表达了您想要的东西，但也应该表明它是多么不可能。

PHP 是一种服务器端语言，而 javascript 是一种客户端语言。javascript 与 PHP “对话”的唯一方法是向服务器提交请求。您可以通过标准 HTTP-GET 请求或 POST 请求（通过表单提交，或者更常见的是通过 Ajax）来完成此操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T04:36:40.263

PHP 不在 JavaScript 函数中。PHP 代码在服务器上执行。执行 Javascript 时，代码如下所示：

```
myfunction('qwerty');

<script>
myfunctionjs(x)
{
 alert(x);  //or whatever $x is
}
</script> 
```

如果要将“x”传递给 PHP 脚本，则必须发出 AJAX 请求。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-11T04:36:47.887

你不能让 javascript 告诉 PHP 做一些内联的事情。JavaScript 运行客户端，而 PHP 运行服务器端。

相反，您需要让您的 javascript**将**数据发送到您的服务器，并且当接收到第二个请求时，您将让 PHP 做一些事情。

如果您使用的是 jQuery，请查看 ajax 方法，例如如何发送数据：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# ruby-on-rails - 一个用户的所有分数

> ID：15331247
> 
> 赞同：0
> 
> 时间：2013-03-11T04:33:32.130
> 
> 标签：ruby-on-rails, html-table, has-many, belongs-to

我有一个表设置有 4 列：名称、日期、分数、等级。在整个表格中，名称类别中有许多重复项。当我点击一个名字时，我希望它显示该用户的所有分数、成绩和相应的日期。

目前，当我单击表格中多次出现的名称时，它只显示我选择的实例的分数、等级和日期。如何让它显示与该名称相关的所有分数、成绩和日期。

这是一个数据库快照 -

成绩表：

```
class CreateScores < ActiveRecord::Migration
   def change
     create_table :scores do |t|
       t.string :name   
       t.integer :score
       t.date :fielded
       t.string :grade
       t.integer :name_id

       t.timestamps
     end
   end
 end 
```

学生表：

```
class CreateStudents < ActiveRecord::Migration
  def change
    create_table :students do |t|
      t.integer :id
      t.string :name

      t.timestamps
    end
  end
end 
```

* * *

这是我视图中显示的表格 -

```
<% @score.each do |score| %>
  <tr class="tableline" >
     <td class="tableline"><%= link_to score.name.upcase, score, {style: 'color:#FFFFFF; text-decoration: none; opacity:1'} %></td>
     <td class="tableline"><%= score.fielded %></td>
     <td class="tableline"><%= score.score %></td>
     <td class="tableline"><%= score.grade %></td>
  </tr>
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T07:15:54.030

似乎您还需要对表进行一些重构，例如，您可能应该拥有一个用户表和一个相关的成绩表。

前任：

```
#users table
id
name

#grades table
id
user_id
score
grade
date 
```

活动记录模型

```
class User < ActiveRecord::Base
  has_many :grades
end

class Grade < ActiveRecord::Base
  belongs_to :user
end 
```

为用户获取所有成绩

```
user = User.find(id)
user.grades 
```

# jasper-reports - 使用 BigQuery 配置 iReport

> ID：15331253
> 
> 赞同：1
> 
> 时间：2013-03-11T04:34:07.817
> 
> 标签：jasper-reports, ireport, google-bigquery

我正在尝试使用[BigQuery从](https://code.google.com/p/starschema-bigquery-jdbc/)[Jaspersoft](http://community.jaspersoft.com/project/ireport-designer)配置 iReport，并且我正在关注 Internet 上发布的每个步骤，但它们不起作用。

配置它的具体步骤如下[here](https://code.google.com/p/starschema-bigquery-jdbc/wiki/JasperReports#Connection_steps_for_creating_reports)

主要步骤是在 BigQuery 中创建一个项目，它为您提供 3 个主要内容：

*   项目 ID
*   客户 ID
*   客户秘密

使用这些参数，您可以创建将 iReport 与 BigQuery 连接所需[的](https://code.google.com/p/starschema-bigquery-jdbc/wiki/JDBCURL)`JDBC URL`说明。

但是，当您只需要在 iReport 的“新数据库 JDBC 连接”创建上输入凭据（用户名和密码）时，我无法使用我`Client Secret`的 iReport 请求`<path to key file>`，我认为这是`*.p12`文件，因为 iReport 给出了这个错误：

`QL problems: java.io.IOException: toDerInputStream rejects tag type ##`

请帮助创建此`*.p12`文件并查看会发生什么，或者如果您已正确配置此配置，请给我提供使此配置正常工作的确切步骤。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T10:11:02.870

*.p12 文件用于连接 ServiceAccount 时。

请转到[Google apis 控制台](https://code.google.com/apis/console/b/0/)并选择您的项目。

在仪表板上会有您的***项目 ID***

要获取***用户名***和***密码***，请转到 API 访问菜单并选择：***创建另一个客户端 ID***从这里您可以选择*服务帐户*或*已安装的应用程序*。

如果您选择*服务帐户*，您将获得 .p12 文件和用户名。

如果您选择*已安装的应用程序*，则应选择“*其他*” ，然后按“**创建客户端 ID** ”，然后您将获得您的**客户端 ID**和**客户端密码**

希望这能解决您的问题，如果没有，请随时提问。

# macos - 带有自定义小部件的 QListWidget 在 Mac OS 中无法正确滚动

> ID：15331256
> 
> 赞同：0
> 
> 时间：2013-03-11T04:34:19.077
> 
> 标签：macos, qt, scroll, qlistwidget

在我的应用程序中，我有一个带有自定义小部件项目的 QListWidget，其中包含一个进度条，由 QListWidget::setWidget() 设置。我被迫使用 QListWidget 而不是 QListView 和委托，因为视图/委托解决方案不会像通常那样为项目小部件中的进度条设置动画。

我的问题是滚动 QListWidget 时，自定义小部件没有跟随。它们似乎只是简单地“粘”在背景上。只有在手动调整周围小部件的大小时，QListWidget 才会正确重新排列子小部件。

这是我向 QListWidget 添加小部件的方法：

```
QListWidgetItem* widgetItem = new QListWidgetItem("");
DownloadItemForm* dlItemForm = new DownloadItemForm(el);
widgetItem->setSizeHint(dlItemForm->size());
ui->listWidget->addItem(widgetItem);
ui->listWidget->setItemWidget(widgetItem, dlItemForm);
widgetItems.insert(el, widgetItem); 
```

我在这里错过了什么吗？似乎其他人也有问题（最后一条评论是我的）：

[https://bugreports.qt-project.org/browse/QTBUG-27043](https://bugreports.qt-project.org/browse/QTBUG-27043)

有谁知道解决方法，还是我只是在这里遗漏了什么？

编辑：

只是为了进一步澄清：我使用的是 Qt 4.8.4。虽然我希望这个问题会在 5.x 中得到解决，但它在 5.0.1 中仍然存在 在 Mac OS 上，进度条是动画的：即使没有进度更新，进度条中也有一个缓慢流动的动画。使用基于视图的小部件和项目委托时，此动画不会运行。在 Mac 上运行 Torrent Qt 示例将支持此声明。进度条动画在使用 QListWidget 时起作用，注入包含带有进度条的表单小部件的小部件项目。

查看 Qt 4.8.4 源代码，QListWidget::setItemWidget() 看起来像这样：

```
void QListWidget::setItemWidget(QListWidgetItem *item, QWidget *widget)
{
    Q_D(QListWidget);
    QModelIndex index = d->listModel()->index(item);
    QAbstractItemView::setIndexWidget(index, widget);
} 
```

这告诉我问题可能出在 QAbstractItemView 中。我想我将不得不跳入其中并尝试从那里解决问题，并希望创建一个补丁，除非有人提出启示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-31T07:32:35.647

我找到了一种解决方法，只需将 listWidget 的滚动条的 valueChanged(int) 信号连接到 listWidget 的 updateEditorGeometries() 插槽即可：

```
connect(_listWidget->verticalScrollBar(),
        SIGNAL(valueChanged(int)),_listWidget,
        SLOT(updateEditorGeometries()));
connect(_listWidget->horizontalScrollBar(),
        SIGNAL(valueChanged(int)),_listWidget,
        SLOT(updateEditorGeometries())); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-16T02:57:00.637

截至 2013-08-05 git://gitorious.org/qt/qt.git 修订版 78b4162a352ddac398b8af7f8be33b009c333244 已修复。从该修订版或更高版本构建可解决该问题。

这是该版本的提交消息：

```
Fix QListWidget item widget scroll bug

This fix applies the patch uploaded in the bug report. The patch was
provided by Qt-Commercial support but seems to have never found it's
way to the sources although the bug was fixed in Qt 5. 
```

如果您使用自制软件，您可以简单地：

```
brew install qt --build-from-source --HEAD 
```

我已经测试并确认这可以解决问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T15:08:13.547

我应用了 Qt 商业支持提供给我的这个补丁。这解决了我在 Qt 4.8.5 上的 Mac 滚动问题：

```
--- /Users/irfanomair/dev/qt-src-carbon-4.8.0/src/gui/kernel/qwidget_mac.mm 2011-12-15 10:38:21.000000000 -0800
+++ kernel/qwidget_mac.mm   2012-09-18 17:17:03.000000000 -0700
@@ -1,22 +1,41 @@

@@ -4684,15 +4703,14 @@
     }

     // Scroll the whole widget if qscrollRect is not valid:
-    QRect validScrollRect = qscrollRect.isValid() ? qscrollRect : q->rect();
-    validScrollRect &= clipRect();
+    QRect validScrollRect = qscrollRect.isValid() ? qscrollRect : QRect(0, 0, q->width(), q->height());

     // If q is overlapped by other widgets, we cannot just blit pixels since
     // this will move overlapping widgets as well. In case we just update:
     const bool overlapped = isOverlapped(validScrollRect.translated(data.crect.topLeft()));
     const bool accelerateScroll = accelEnv && isOpaque && !overlapped;
     const bool isAlien = (q->internalWinId() == 0);
-    const QPoint scrollDelta(dx, dy);
+

     // If qscrollRect is valid, we are _not_ supposed to scroll q's children (as documented).
     // But we do scroll children (and the whole of q) if qscrollRect is invalid. This case is
@@ -4714,7 +4732,6 @@
         }else {
             update_sys(qscrollRect);
         }
-        return;
     }

 #ifdef QT_MAC_USE_COCOA
@@ -4731,6 +4748,7 @@
     // moved when the parent is scrolled. All directly or indirectly moved
     // children will receive a move event before the function call returns.
     QWidgetList movedChildren;
+    const QPoint scrollDelta(dx, dy);
     if (scrollChildren) {
         QObjectList children = q->children(); 
```

# javascript - 如何使用javascript将数据返回到html字段

> ID：15331257
> 
> 赞同：0
> 
> 时间：2013-03-11T04:34:27.150
> 
> 标签：javascript, html

我有各种文本字段，每个文本字段旁边都有一个网格。当我单击一个按钮时，它会向它旁边的文本字段返回一个值。问题是让它知道将数据返回到哪个文本字段。我目前已经将它设置为传递一个带有函数的参数，该函数被放入隐藏字段中，并且 switch 语句检查该字段以便知道将数据发送回哪个字段。

它有效，但似乎我应该能够用更少的代码和一些不是静态编程的东西来做到这一点（当我向表单添加新字段时，我不想手动更新 switch 语句） . 我希望有一个简单的答案，我是编程新手，任何复杂的东西我都不会理解。

我所拥有的一个简化示例是这样的：

```
<form action="#" name="testForm">
    <input type="text" name="input1" size="20">
    <input type=button value="get data" onClick="populateField(1)"/>
    <br>
    <input type="text" name="input2" size="20">
    <input type=button value="get data" onClick="populateField(2)"/>
    <br>
    <input type="text" name="input3" size="20">
    <input type="button" value="get data" onClick="populateField(3)"/>
    <br>
    <input type="text" name="lineID" size=1 style="display:none"/>
</form>

<script>
    function populateField(input) {
        document.testForm.lineID.value = input;
        var element = document.getElementById("lineID");
        var lineID = element.value;
        switch (lineID) {
            case "1":
                document.testForm.input1.value = "some value";
                break;
            case "2":
                document.testForm.input2.value = "some value";
                break;
            case "3":
                document.testForm.input3.value = "some value";
            //etc
        }
    }
</script> 
```

`"document.testForm.input#.value"`我如何使用变量来代替each ，而不是单独的 case `"input#"`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T04:36:38.313

使用括号表示法：

```
document.testForm['input' + lineID].value 
```

# bash - 使用 awk 仅在分隔符后查找第一次出现的字符串

> ID：15331259
> 
> 赞同：38
> 
> 时间：2013-03-11T04:34:42.130
> 
> 标签：bash, awk

我有一堆文件，`Account number: 123456789`在不同的位置都有一行。

我需要做的是能够解析文件，并找到帐号本身。因此，`awk`需要查找`Account number:`并返回紧随其后的字符串。

例如，如果它是：

```
Account number: 1234567 
```

`awk`应该返回：

```
1234567 
```

一旦找到第一次出现，它就可以停止查找。

但是，我难住了。这样做的正确方法是什么`awk`？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-03-11T04:39:29.070

单程：

```
awk -F: '$1=="Account number"{print $2;exit;}' file 
```

我假设您想在文件中找到第一次出现的那一刻停止。如果您想在文件的每一行中查找匹配项，只需删除`exit`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-11T04:36:37.780

您可以使用 an`if`检查是否等于“Account”和“number:” `$1`。`$2`如果他们这样做，那么打印`$3`：

```
> awk '{if ($1 == "Account" && $2 == "number:") {print $3; exit;}}' input.txt 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-01-04T11:18:40.380

接受的答案在字符串前面输出一个空格，这迫使我使用另一种方法：

```
awk '/Account number/{print $3; exit}' 
```

这个解决方案忽略了`:`分隔符，但就像一个魅力，更容易记住 IMO。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-11-27T13:20:10.047

对于这样的匹配，我更喜欢使用`grep`look-behind：

```
grep -Po '(?<=Account number: )\d+' file 
```

或者

```
grep -Po 'Account number: \K\d+' file 
```

`\d+`这表示：打印出现在字符串之后的任何数字序列 ( ) `Account number:`。

在第二种情况下，`\K`清除匹配的字符串，以便在这样之后开始打印`\K`。

* * *

在给定文件的情况下查看它`file`：

```
Account number: 1234567
but then another Account number: 789
and that's all 
```

让我们看看输出的样子：

```
$ grep -Po '(?<=Account number: )\d+' file
1234567
789 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-11T07:28:16.643

你也可以使用`sed -n s///p`：

```
sed -En 's/^Account number: (.+)/\1/p' *.txt | head -n1 
```

# javascript - Javascript Canvas Image onclick不起作用

> ID：15331264
> 
> 赞同：1
> 
> 时间：2013-03-11T04:35:09.933
> 
> 标签：javascript, html, canvas

我无法让 DOM Image onclick 事件正常工作。

```
var context = document.getElementById('canvas').getContext('2d');

var image = new Image();
image.src = "foo.png"
image.onclick = function(e) { console.log("clicked"); }

setInterval(function() {

context.drawImage(image, 100, 100, 50, 50);    

}; 
```

为什么单击图像时没有收到日志消息。在开发人员工具中，我可以看到图像的 onclick 函数不为空。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T04:51:26.087

是的，穆萨所说的……以及其他一些事情。

**对您的代码的一些更改**

*   Image.src="foo.png" 应该在 image.onclick 函数之后
*   Context.drawImage 应该在 image.onclick 函数中
*   据我所知，不需要 setInterval

尝试这个：

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>

<style>
    body{ background-color: ivory; }
    canvas{border:1px solid red;}
</style>

<script>
$(function(){

    var context=document.getElementById("canvas").getContext("2d");

    var image=new Image();
    image.onload=function(){
       context.drawImage(image,0,0);
    }
    image.src="http://i.imgur.com/nJiIJIJ.png";

    document.getElementById("canvas").addEventListener("click", function(){console.log("clicked");}, false);

}); // end $(function(){});
</script>

</head>

<body>
    <canvas id="canvas" width=300 height=300></canvas>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T05:07:23.677

您不能为添加到画布中的特定图像设置 onclick。您可以单独为整个画布设置 onclick，因此您必须使用任何第三方 js，否则您应该进行一些计算，发现您单击了画布的图像..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T14:47:39.967

其他用户是对的。

您在画布上绘制的图像是一个 DOM 元素，但它呈现在未存储在 DOM 中的位置。

这并不意味着您可以访问它的位置并将其与鼠标位置进行比较。

我在这里使用了一个外部库，但它可以满足您的需要：http: [//jsfiddle.net/Saturnix/cygUH/](http://jsfiddle.net/Saturnix/cygUH/)

[这](http://georgealways.github.com/gee/)是使用的库。

由于我无法在不发布代码的情况下发布到 jsfiddles 的链接，因此这是我为您编写的脚本。

```
function demo(g) {
    g.ctx.font = "bold 16px Arial";

    g.draw = function () {
        g.ctx.clearRect(0, 0, g.width, g.height)

        var posX = 0;
        var posY = 0;
        g.ctx.drawImage(image, posX, posY);

        if (g.mouseX > posX && g.mouseX < image.width &&
            g.mouseY > posY && g.mouseY < image.height &&
            g.mousePressed)
        g.ctx.fillText("You're clicking the image!", g.mouseX, g.mouseY);

    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-23T18:09:35.957

您可以将光线（在画布上单击）投射到画布中，并手动测试图像是否与光线相交。你应该写一个

```
objectsUnderPoint( x, y ); 
```

函数返回与射线在 x、y 处相交的所有图像的数组。

这也是通常在 3D 引擎中完成的方式。您当然需要将图像位置保留为图像的属性以进行交叉测试。

# java - Java中的字符串替换冒险

> ID：15331269
> 
> 赞同：0
> 
> 时间：2013-03-11T04:36:01.133
> 
> 标签：java, string, str-replace

我正在尝试实现这一点 - 如果字符串包含`%25`后跟任意数量的字母数字字符的模式，那么我需要替换`%25`为`%`. 以下代码似乎不正确-

```
while (userPassword.contains("%25"+"[^A-Za-z0-9]*")) {
    userPassword = userPassword.replace("%25", "%");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T04:42:41.480

该方法`String.contains()`不适用于正则表达式，但适用于简单文本，因此您实际上正在查看字符串中的*确切*序列“%25[^A-Za-z0-9]”。此外，`^`这意味着它应该匹配不在字符类中的内容，即没有字母数字字符，这与您想要的相反。

您可以改用以下方法`String.matches`：

```
while (userPassword.matches(".*%25[A-Za-z0-9]*")) 
```

（如您所见，我将所有正则表达式放在一个字符串中。编译器会为您完成此操作，但更清楚）

例如：

```
String userPassword = "%25sdflk42"; 

System.out.println(userPassword.contains("%25"+"[A-Za-z0-9]*"));
System.out.println(userPassword.matches(".*%25[A-Za-z0-9]*")); 
```

这将打印：

```
false
true 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T04:40:56.333

你需要在这里小心。[`String.contains`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#contains%28java.lang.CharSequence%29)不***将***参数解释为正则表达式。

试试这个：

```
userPassword = userPassword.replaceAll("%25([a-zA-Z0-9]*)", "%$1"); 
```

它使用反向引用仅替换捕获的模式的一部分。从文档中：

> 美元符号可以被视为对捕获的子序列的引用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T04:39:27.673

```
while (userPassword.contains("%25"+"[^A-Za-z0-9]*")) 
```

应该

```
while (userPassword.contains("%25"+"[A-Za-z0-9]*")) 
```

# php - 在 Magento CE 1.7 中获取产品剩余数量？

> ID：15331271
> 
> 赞同：1
> 
> 时间：2013-03-11T04:36:09.727
> 
> 标签：php, magento-1.7

我想获得给定产品的剩余数量。我将在管理面板中创建一个报告，突出显示每种产品的剩余数量和再订购数量。我能够通过库存详细信息获得重新订购级别的数量。我想获得给定产品的剩余数量。请问有什么建议吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-11T04:37:31.417

尝试

```
<?php 
$num= Mage::getModel('cataloginventory/stock_item')->loadByProduct($_product)->getQty(); 
echo "Remaining products: ".$num;
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-29T14:38:02.033

如果您正在寻找购物车中产品的剩余数量，则需要考虑可配置产品与简单产品：

```
<?php
$quote = Mage::getModel('checkout/cart')->getQuote();
$items = $quote->getAllVisibleItems();

foreach ($items as $item) {
   $cart_product = $item->getProduct();

   if ($option = $item->getOptionByCode('simple_product')) {
      $cart_simple_product = $option->getProduct();
   } else {
      $cart_simple_product = $this->getProduct();
   }

   $stock = Mage::getModel('cataloginventory/stock_item')->loadByProduct($cart_simple_product);
   $max_available_quantity = (int)$stock->getQty();
}
?> 
```

# ios - 我可以使用没有 REST 样式 Web 服务协议的 php 创建 pass 的服务器吗？

> ID：15331274
> 
> 赞同：-1
> 
> 时间：2013-03-11T04:36:37.730
> 
> 标签：ios, rest, passbook

我是 REST 新手。我想创建通行证服务器。我必须使用 REST 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T05:09:46.373

是的。如果您想更新 Apple Passbook Passes，您需要构建一个 REST Web 服务。

> REST 样式的 Web 服务协议用于与您的服务器就通行证的更改进行通信，并在通行证发生更改时获取最新版本的通行证。

有关完整规范，请参阅[Passbook Web 服务参考](https://developer.apple.com/library/ios/#documentation/PassKit/Reference/PassKit_WebService/WebService.html#//apple_ref/doc/uid/TP40011988)。

# emacs - 基于 cc 模式的 Mathematica 的 Emacs 主模式

> ID：15331277
> 
> 赞同：5
> 
> 时间：2013-03-11T04:36:39.047
> 
> 标签：emacs, wolfram-mathematica, elisp

**** Stephan 解决问题 1 - 请参阅下面的答案****

我`\`在语法表中标记为转义字符，然后覆盖 Mathematica 语法元素（如`\[Infinity]`. 这是我的`syntax-propertize-function`：

```
(defconst math-syntax-propertize-function
  (syntax-propertize-rules
   ("\\\\\\[\\([A-Z][A-Za-z]*\\)]" (0 "_")))) 
```

我从`(defun math-node()`函数中引用它，如下所示：

```
 (set (make-local-variable 'syntax-propertize-function)
       math-syntax-propertize-function) 
```

在我的第一次尝试中，我没有使用该`make-local-variable`功能，当我的 elisp 缓冲区突出显示出错时，我感到很惊讶。

****结束问题1的解决方案****

我在 Emacs 中实现了一个从 cc-mode 派生的主要模式，用于编辑 Mathematica 文件。目标是语法高亮和缩进。我将把与 Mathematica 内核的接口留到以后。

我的基本功能正常工作，但有几个症结给我带来了麻烦。

****问题 1** - 该`\`字符用作转义字符并作为多字符、括号关键字的前缀。**

像许多语言一样，Mathematica 使用`\`字符进行转义`"`，而其他`\`字符是字符串。

Mathematic 具有 Mathematica 中所说的语法字符，如`\[Times]`、`\[Element]`、`\[Infinity]`等，代表数学运算符和常量。

而且，Mathematica在函数定义和调用等方面大量使用`[`and`]`而不是`(`and 。`)`

因此，如果我在语法表中标记`\`为转义字符，那么我的括号在我使用语法字符的任何地方都会不匹配。例如，

```
 If[x < \[Pi], True, False] 
```

当然，cc-mode 有意忽略`[`. `\`鉴于 Mathematica 的函数性质，如果不能匹配括号，该模式几乎是无用的。想想没有paren匹配的lisp。

如果我不将`\`语法表作为转义字符放入，那么如何处理注释和字符串中的转义序列？

如果我可以将 Times、Element、Infinity 等放入关键字列表并让一切正常工作，那就太好了。

****问题 2** - Mathematica 的语法与 C、C++、Java、ObjC 等有很大不同，以至于 cc-mode 的内置语法分析并不总能产生所需的结果。**

考虑以下代码块：

```
 FooBar[expression1,
           expression2,
           expression3]; 
```

这种格式很漂亮，因为表达式被识别为参数列表。

但是，如果将列表作为参数传递，

```
 FooBar[{expression1,
                expression2,
                expression3}]; 
```

`{`结果并不漂亮，因为表达式被认为是and中单个语句的延续`}`。不幸的是，简单的设置`c-continuation-offset`破坏`0`了实际的延续，比如，

```
 addMe[x_Real, y_Real] :=
        Plus[x, y]; 
```

你想要缩进的。

问题在于 Mathematica`{`和`}`delineate 列表而不是代码块。

这是我正在使用的当前 elisp 文件：

```
(require 'cc-mode)

;; There are required at compile time to get the sources for the                                
;; language constants.                                                                          
(eval-when-compile
  (require 'cc-langs)
  (require 'cc-fonts))

;; Add math mode the the language constant system. This needs to be                             
;; done at compile time because that is when the language constants                             
;; are evaluated.                                                                               
(eval-and-compile
  (c-add-language 'math-mode 'c-mode))

;; Function names                                                                               
(c-lang-defconst c-cpp-matchers
  math (append
        (c-lang-const c-cpp-matchers c)
        ;; Abc[                                                                                 
        '(("\\<\\([A-Z][A-Za-z0-9]*\\)\\>\\[" 1 font-lock-type-face))
        ;; abc[                                                                                 
        '(("\\<\\([A-Za-z][A-Za-z0-9]*\\)\\>\\[" 1 font-lock-function-name-face))
        ;; Abc                                                                                  
        '(("\\<\\([A-Z][A-Za-z0-9]*\\)\\>" 1 font-lock-keyword-face))
        ;; abc_                                                                                 
        '(("\\<\\([a-z][A-Za-z0-9]*[_]\\)\\>" 1 font-lock-variable-name-face))
        ))

;; font-lock-comment-face                                                                       
;; font-lock-doc-face                                                                           
;; font-lock-string-face                                                                        
;; font-lock-keyword-fact                                                                       
;; font-lock-function-name-face                                                                 
;; font-lock-constant-face                                                                      
;; font-lock-type-face                                                                          
;; font-lock-builtin-face                                                                       
;; font-lock-reference-face                                                                     
;; font-lock-warning-face                                                                       

;; There is no line comment character.                                                          
(c-lang-defconst c-line-comment-starter
  math nil)

;; The block comment starter is (*.                                                             
(c-lang-defconst c-block-comment-starter
  math "(*")

;; The block comment ender is *).                                                               
(c-lang-defconst c-block-comment-ender
  math "*)")

;; The assignment operators.                                                                    
(c-lang-defconst c-assignment-operators
  math '("=" ":=" "+=" "-=" "*=" "/=" "->" ":>"))

;; The operators.                                                                               
(c-lang-defconst c-operators
  math `(
         ;; Unary.                                                                              
         (prefix "+" "-" "!")
         ;; Multiplicative.                                                                     
         (left-assoc "*" "/")
         ;; Additive.                                                                           
         (left-assoc "+" "-")
         ;; Relational.                                                                         
         (left-assoc "<" ">" "<=" ">=")
         ;; Equality.                                                                           
         (left-assoc "==" "=!=")  
         ;; Assignment.                                                                         
         (right-assoc ,@(c-lang-const c-assignment-operators))
         ;; Sequence.                                                                           
         (left-assoc ",")))

;; Syntax modifications necessary to recognize keywords with                                    
;; punctuation characters.                                                                      
;; (c-lang-defconst c-identifier-syntax-modifications                                           
;;   math (append '((?\\ . "w"))                                                                
;;             (c-lang-const c-identifier-syntax-modifications)))                               

;; Constants.                                                                                   
(c-lang-defconst c-constant-kwds
  math '( "False" "True" )) ;; "\\[Infinity]" "\\[Times]" "\\[Divide]" "\\[Sqrt]" "\\[Element]"\
))                                                                                              

(defcustom math-font-lock-extra-types nil
  "Extra types to recognize in math mode.")

(defconst math-font-lock-keywords-1 (c-lang-const c-matchers-1 math)
  "Minimal highlighting for math mode.")

(defconst math-font-lock-keywords-2 (c-lang-const c-matchers-2 math)
  "Fast normal highlighting for math mode.")

(defconst math-font-lock-keywords-3 (c-lang-const c-matchers-3 math)
  "Accurate normal highlighting for math mode.")

(defvar math-font-lock-keywords math-font-lock-keywords-3
  "Default expressions to highlight in math mode.")

(defvar math-mode-syntax-table nil
  "Syntax table used in math mode.")

(message "Setting math-mode-syntax-table to nil to force re-initialization")
(setq math-mode-syntax-table nil)

;; If a syntax table has not yet been set, allocate a new syntax table                          
;; and setup the entries.                                                                       
(unless math-mode-syntax-table
  (setq math-mode-syntax-table
        (funcall (c-lang-const c-make-mode-syntax-table math)))

  (message "Modifying the math-mode-syntax-table")

  ;; character (                                                                                
  ;; ( - open paren class                                                                       
  ;; ) - matching paren character                                                               
  ;; 1 - 1st character of comment delimitter (**)                                               
  ;; n - nested comments allowed                                                                
  (modify-syntax-entry ?\( "()1n" math-mode-syntax-table)

  ;; character )                                                                                
  ;; ) - close parent class                                                                     
  ;; ( - matching paren character                                                               
  ;; 4 - 4th character of comment delimitter (**)                                               
  ;; n - nested comments allowed                                                                
  (modify-syntax-entry ?\) ")(4n" math-mode-syntax-table)

  ;; character *                                                                                
  ;; . - punctuation class                                                                      
  ;; 2 - 2nd character of comment delimitter (**)    
  ;; 3 - 3rd character of comment delimitter (**)                                               
  (modify-syntax-entry ?\* ". 23n" math-mode-syntax-table)

  ;; character [                                                                                
  ;; ( - open paren class                                                                       
  ;; ] - matching paren character                                                               
  (modify-syntax-entry ?\[ "(]" math-mode-syntax-table)

  ;; character ]                                                                                
  ;; ) - close paren class                                                                      
  ;; [ - mathcing paren character                                                               
  (modify-syntax-entry ?\] ")[" math-mode-syntax-table)

  ;; character {                                                                                
  ;; ( - open paren class                                                                       
  ;; } - matching paren character                                                               
  (modify-syntax-entry ?\{ "(}" math-mode-syntax-table)

  ;; character }                                                                                
  ;; ) - close paren class                                                                      
  ;; { - matching paren character                                                               
  (modify-syntax-entry ?\} "){" math-mode-syntax-table)

  ;; The following characters are punctuation (i.e. they cannot appear                          
  ;; in identifiers).                                                                           
  ;;                                                                                            
  ;; / ' % & + - ^ < > = |                                                                      
  (modify-syntax-entry ?\/ "." math-mode-syntax-table)
  (modify-syntax-entry ?\' "." math-mode-syntax-table)
  (modify-syntax-entry ?% "." math-mode-syntax-table)
  (modify-syntax-entry ?& "." math-mode-syntax-table)
  (modify-syntax-entry ?+ "." math-mode-syntax-table)
  (modify-syntax-entry ?- "." math-mode-syntax-table)
  (modify-syntax-entry ?^ "." math-mode-syntax-table)
  (modify-syntax-entry ?< "." math-mode-syntax-table)
  (modify-syntax-entry ?= "." math-mode-syntax-table)
  (modify-syntax-entry ?> "." math-mode-syntax-table)
  (modify-syntax-entry ?| "." math-mode-syntax-table)

  ;; character $                                                                                
  ;; _ - word class (since $ is allowed in identifier names)                                    
  (modify-syntax-entry ?\$ "_" math-mode-syntax-table)

  ;; character \                                                                                
  ;; . - punctuation class (for now treat \ as punctuation                                      
  ;;     until we can fix the \[word] issue).                                                   
  (modify-syntax-entry ?\\ "." math-mode-syntax-table)

  ) ;; end of math-mode-syntax-table adjustments                                                

;;                                                                                              
;;                                                                                              
(defvar math-mode-abbrev-table nil
  "Abbrevation table used in math mode buffers.")

(defvar math-mode-map (let ((map (c-make-inherited-keymap)))
                        map)
  "Keymap used in math mode buffers.")

;; math-mode                                                                                    
;;                                                                                              
(defun math-mode ()
  "Major mode for editing Mathematica code."

  (interactive)
  (kill-all-local-variables)

  (c-initialize-cc-mode t)

  (set-syntax-table math-mode-syntax-table)

  (setq major-mode 'math-mode
        mode-name "Math"
        local-abbrev-table math-mode-abbrev-table
        abbrev-mode t)

  (use-local-map math-mode-map)

  (c-init-language-vars math-mode)
  (c-common-init 'math-mode)

  (run-hooks 'c-mode-common-hook)
  (run-hooks 'math-mode-hook)
  (c-update-modeline))

(provide 'math-mode) 
```

以及一些截图![格式化代码](../Images/2b45f94e27f6ddd907a8c8bf41c0e950.png)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T19:24:25.273

虽然 cc-mode 旨在适应各种语言，但我不确定它是否适合 Mathematica，因为语法与 cc-mode 所支持的语法相去甚远。我建议尝试 SMIE（一种出现在 Emacs-23.4 中的缩进引擎，最初是为 SML 构建的，但目前用于多种语言）。就像 cc-mode 一样，SMIE 也不是所有语言的理想选择，但如果在您的情况下它比 cc-mode 效果更好，我不会感到惊讶。

对于反斜杠问题，最好的办法是使用`syntax-propertize-function`更改特定反斜杠的转义性质（在语法表中将 \ 设置为转义，然后将 \[foo] 的 \ 标记为非转义，或者保留 \作为语法表中的非转义，然后将 \" 和 \\ 的那些 \ 标记为转义）。

# mysql - MYSQL + ERROR 771006 (HY000): 无法创建数据库'Test' (errno: 2)

> ID：15331284
> 
> 赞同：0
> 
> 时间：2013-03-11T04:37:19.133
> 
> 标签：mysql, phpmyadmin

我正在服务器上安装 mysql，我成功完成了。

现在，当我以 root 身份登录并尝试创建数据库时，出现以下错误。

```
**ERROR 771006 (HY000): Can't create database 'Test' (errno: 2)** 
```

我已经允许 cd /var/lib/mysql

```
chmod 755 /var/lib/mysql 
```

并且还做了以下步骤：

```
shell> cd /var/lib
shell> chown -R mysql:mysql mysql 
```

但是当我创建数据库时，我仍然得到相同的错误。

# c# - EntityFramework 5 CodeFirst 相同类型的子父不更新/保存

> ID：15331290
> 
> 赞同：1
> 
> 时间：2013-03-11T04:37:36.080
> 
> 标签：c#, asp.net-mvc, ef-code-first, entity-framework-5

我有一个`class`叫做 Section

```
public class Section
{
    public Section() { construct(0); }
    public Section(int order) { construct(order); }
    private void construct(int order) 
    {
        Children = new List<Section>();
        Fields = new List<XfaField>();
        Hint = new Hint();
        Order = order;
    }

    [Key]
    public int Id { get; set; }

    public int FormId { get; set; }

    public string Name { get; set; }

    [InverseProperty("Parent")]
    public List<Section> Children { get; set; }

    public List<XfaField> Fields { get; set; }

    public Section Parent { get; set; }

    public Hint Hint { get; set; }

    public int Order { get; private set; }

    #region Methods
    public void AddNewChild()
    {
        AddChild(new Section
        {
            Name = "New Child Section",
            FormId = FormId,
        });
    }
    private void AddChild(Section child)
    {
        child.Parent = this;

        if (Children == null) Children = new List<Section>();

        int maxOrder = -1;
        if(Children.Count() > 0) maxOrder = Children.Max(x => x.Order);

        child.Order = ++maxOrder;

        Children.Add(child);

        FactoryTools.Factory.PdfSections.Add(child);
    }
    // Other methods here
    #endregion
} 
```

我正在尝试将一个新孩子添加`Section`到已经存在的父母中，如下所示：

```
 private void AddChildSection()
    {
        var parent = FactoryTools.Factory.PdfSections.FirstOrDefault(x => x.Id == ParentId);

        if (parent == null) throw new Exception("Unable to create child because parent with Id " + ParentId.ToString() + " doesn't exist.");

        parent.AddNewChild();

        FactoryTools.Factory.SaveChanges();
    } 
```

当我查看数据库时，我看到添加了一个新行，例如：

```
Id  Name                Parent_Id   Hint_Id FormId  Order
19  New Child Section   1           27      1       0 
```

但是，当我加载 parent 时`Section`，该`Children`属性始终为`Count`0，如下所示：

```
 public ActionResult EditSection(int formId, int sectionId)
    {
        var model = FactoryTools.Factory.PdfSections.FirstOrDefault(x => x.Id == sectionId);

        if (model == null || model.FormId != formId) model = new Section();

        //model.Children = FactoryTools.Factory.PdfSections.Where(x => x.Parent.Id == sectionId).ToList();

        return PartialView(model);
    } 
```

当然，当我手动添加孩子时，他们就在那里（在上面的代码中，通过取消注释该`model.Children = ...`行）

我习惯了 NHibernate 的做事方式，因此对上述看似简单的任务在 EntityFramework 中不起作用感到非常沮丧，我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T04:47:56.077

实体框架不会急切地加载相关实体。尝试强迫它包括孩子：

```
var model = FactoryTools.Factory.PdfSections.Include("Children").FirstOrDefault(x => x.Id == sectionId); 
```

还有一个强类型重载，您可以将 lambda 传递给它：

```
var model = FactoryTools.Factory.PdfSections.Include(s => s.Children).FirstOrDefault(x => x.Id == sectionId); 
```

# ssl - DTLS 和 TLS 之间的区别

> ID：15331294
> 
> 赞同：48
> 
> 时间：2013-03-11T04:38:02.847
> 
> 标签：ssl, dtls

1.  TLS 和 DTLS 之间的功能区别是什么？
2.  使用 TLS 与 DTLS 时，应用程序流程/协商有何不同？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-05-21T06:48:10.090

基本上 DTLS 是在数据报（UDP、DCCP 等）上构建 TLS

DTLS 有意与 TLS 相似，只是 DTLS 必须解决两个问题：数据包丢失和重新排序。DTLS 实现

1.  包重传
2.  在握手中分配序列号
3.  重放检测。

有关详细信息，请参阅[RFC 6347](https://www.rfc-editor.org/rfc/rfc6347)。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2019-05-09T02:39:25.660

这个*想法*是 DTLS 对于 TLS 就像 UDP 对于 TCP 一样，尽可能地。

请参阅[https://datatracker.ietf.org/doc/draft-ietf-tls-dtls13/](https://datatracker.ietf.org/doc/draft-ietf-tls-dtls13/)可能会过时[RFC 6347](https://www.rfc-editor.org/rfc/rfc6347)以了解有关规范的详细信息以及相关讨论的链接。

DTLS 和传输层安全 (TLS) 协议之间存在关键区别，应用程序程序员需要注意其他答案错过/暗示不存在！

DTLS 协议为数据报协议提供通信隐私。[与撰写本文时（存档）](http://archive.is/ALPBh)的现有顶级答案相反，DTLS**不是**TLS over UDP（或一般的数据报协议）的实现（或“构造”），**并且**，重放检测是 TLS 的必需功能，但在 DTLS 中是**可选的。**DTLS 包括一个非常类似于 TLS 的*握手*的实现，经过修改以在数据报协议上工作。该实现确实处理了数据包重新排序和丢失的问题，但*仅*针对用于 DTLS 握手（和密码选择）的数据包。换句话说，*这些*数据包传递的“航班”*是*可靠地交付。但是，包含有效负载（应用程序数据）的 DTLS 数据包可能不会比封装它们的 DTLS 数据包（通常是 UDP）更可靠地传递其有效负载。

此外，虽然 DTLS 协议 (v1.2) 源自 TLS 协议 (v1.2) 并*声称*“提供等效的安全保证”，*但它并没有*。[2](http://www.isg.rhul.ac.uk/%7Ekp/dtls.pdf) 早在 2013 年，研究人员就发现了 DTLS 实施和 DTLS 协议本身的主要安全缺陷，这些缺陷已经得到纠正，至少在 GnuTLS 和 OpenSSL 实施中是这样。[2](http://www.isg.rhul.ac.uk/%7Ekp/dtls.pdf)此外，DTLS 不保证不可重放性。

最后，OP 询问在使用 TLS 与 DTLS 时应用程序流程有何不同。TLS 旨在通过端到端的经过身份验证的加密可靠地传递数据流。DTLS 旨在交付经过身份验证和端到端加密的应用程序数据，但延迟低于保证所有应用程序数据交付时所能实现的延迟。这就是为什么 DTLS 用于保护损失不如延迟重要的流媒体应用，例如 VoIP、实时视频馈送和 MMO 游戏。

PS：DTLS 1.3 已经完成/在您阅读本文时可能已经作为 RFC 发布。[3](https://datatracker.ietf.org/doc/draft-ietf-tls-dtls13/)

PPS：哦，如果这值得一读，请不要错过[RFC 7457](https://www.rfc-editor.org/rfc/rfc7457#section-3)，“总结对传输层安全性 (TLS) 和数据报 TLS (DTLS) 的已知攻击”。 *我很惊讶 DTLS 1.3（无论如何是最终草案）没有提及它（例如从其安全注意事项部分）（[建议](https://github.com/tlswg/dtls13-spec/issues/254)），TLS 1.3 规范也没有！*

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-03-11T04:51:41.343

DTLS 是 TLS over UDP（一种数据报协议）的实现。根据维基百科，TLS 使用 TCP，而 DTLS 使用 UDP，因此所有经典差异均适用。UDP 通信以数据包流的形式存在，没有排序、传递可靠性或流控制。使用数据报协议的应用程序需要确保它们可以在内部处理这些问题。

[https://en.wikipedia.org/wiki/Transport_Layer_Security#Applications_and_adoption](https://en.wikipedia.org/wiki/Transport_Layer_Security#Applications_and_adoption)

[http://www.diffen.com/difference/TCP_vs_UDP](http://www.diffen.com/difference/TCP_vs_UDP)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-10-26T17:40:23.110

一个区别是，由于通过 UDP，不允许使用流密码：

> 4.1.2.2。空或标准流密码
> 
> DTLS NULL 密码与 TLS 1.2 NULL 密码完全相同。
> 
> TLS 1.2 中描述的唯一流密码是 RC4，不能随机访问。RC4 不得与 DTLS 一起使用。

# java - WebView loadDataWithbaseURL java.lang.NullPointerException

> ID：15331298
> 
> 赞同：1
> 
> 时间：2013-03-11T04:38:32.453
> 
> 标签：java, android, webview

```
//. . .

public class MainActivity extends Activity {

    //. . .

    @Override
    protected void onCreate( Bundle savedInstanceState ) {
        //. . .
        mainActivityProcedure ( );
    }

    //. . .

    public static void mainActivityProcedure ( ) {
        //. . .
        AnotherActivity.anotherActivityProcedure ( ) ;
        SomeActivity.someActivityProcedure ( );
        //. . .
    }

    //. . .

}

//. . .

public class SomeActivity extends Activity {

    //. . .

    @Override
    protected void onCreate( Bundle savedInstanceState ) {
        //. . .
        someWebView = ( WebView ) findViewById ( R.id.someWebView );
        //. . .
    }

    //. . .

    public static void someActivityProcedure ( ) {
        //. . .
        try {
            someWebView.loadDataWithBaseURL ( null , someHTMLCode, mimeType, encoding, null );
    catch ( Exception e ) {
        Log.i("SomeActivity", "someWebView loadDataBaseURL () " + e.toString() );
    }
        //. . .
    }

    //. . .
}

//. . .

public class AnotherActivity extends Activity {

    //. . .

    @Override
    protected void onCreate ( Bundle savedInstanceState ) {
        //. . .
        anotherWebView = ( WebView ) findViewById ( R . id.anotherWebView ) ;
        //. . .
    }

    //. . .

    public static void anotherActivityProcedure ( ) {
        //. . .
        anotherWebView . loadDataWithBaseURL ( null, anotherHTMLCode, mimeType, encoding, null ) ;
        //. . .
    }
} 
```

当 anotherActivityProcedure 调用时，AnotherActivity 总是加载 anotherHTMLCode。SomeActivity 加载 someHTMLCode，除非从 MainActivity.onCreate 调用 mainActivityProcedure。someWebView 或 SomeActivity 有什么问题？我不能把原始代码放在这里。

补充：在 loadDataWithBaseURL() 中替换 null 不能修复它。另外：Logcat 显示消息 java.lang.NullPointerException 将 Log.i() 从 catch 中放置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T04:46:56.187

Try this, Initilized SomeActivity inside MainActivity and the use _someactivity object you can access.

```
SomeActivity _someactivity = new SomeActivity();
_someactivity.someActivityProcedure (); 
```

# javascript - 为什么Javascript没有触发？

> ID：15331300
> 
> 赞同：0
> 
> 时间：2013-03-11T04:38:56.237
> 
> 标签：javascript, asp.net-mvc, cascadingdropdown

为什么 JavaScript 在这个项目上不起​​作用？谁能告诉我发生这种情况的原因？我还在我的**_Layout**上评论了脚本链接，但仍然不起作用。

***模型*_**

 *```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

namespace FA_CS.Models.Credit
{
    public class CreditCarModel
    {
        public string SelectedProvinceId { get; set; }
        public string SelectedCityId { get; set; }
        public string SelectedSuburbId { get; set; }
        public IEnumerable<Province> Provinceses { get; set; }

    }

    public class Province
    {
        public string Id {get;set;}
        public string Name {get;set;}
    }
} 
```

**这是*视图*** 这是我的项目的视图以及这个项目中的内部和外部JS。

```
 @model FA_CS.Models.Credit.CreditCarModel
    @{
        ViewBag.Title = "Spider";
    }

    <script type="text/javascript" src="/scripts/jquery-1.4.4.js"></script>
    <script type="text/javascript">
        $(function () {
            $('#SelectedProvinceId').change(function () {
                var selectedProvinceId = $(this).val();
                $.getJSON('@Url.Action("Cities")', { provinceId: selectedProvinceId }, function (cities) {
                    var citiesSelect = $('#SelectedCityId');
                    citiesSelect.empty();
                    $.each(cities, function (index, city) {
                        citiesSelect.append(
                            $('<option/>')
                                .attr('value', city.Id)
                                .text(city.Name)
                        );
                    });
                });
            });

            $('#SelectedCityId').change(function () {
                var selectedCityId = $(this).val();
                $.getJSON('@Url.Action("Suburbs")', { cityId: selectedCityId }, function (suburbs) {
                    var suburbsSelect = $('#SelectedSuburbId');
                    suburbsSelect.empty();
                    $.each(suburbs, function (index, suburb) {
                        suburbsSelect.append(
                            $('<option/>')
                                .attr('value', suburb.Id)
                                .text(suburb.Name)
                        );
                    });
                });
            });
        });
    </script>

    <div>
        Province: 
        @Html.DropDownListFor(x => x.SelectedProvinceId, new SelectList(Model.Provinceses, "Id", "Name"))
    </div>
    <div>
        City: 
        @Html.DropDownListFor(x => x.SelectedCityId, Enumerable.Empty<SelectListItem>())
    </div>
    <div>
        Suburb: 
        @Html.DropDownListFor(x => x.SelectedSuburbId, Enumerable.Empty<SelectListItem>())
    </div> 
```

***控制器*** 这是我项目的控制器

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using FA_CS.Models.Credit;

namespace FA_CS.Controllers
{
    public class HomeController : Controller
    {

        public ActionResult Spider()
        {
            var model = new CreditCarModel
            {
                Provinceses = Enumerable.Range(1, 10).Select(x => new Province
                {
                    Id = (x + 1).ToString(),
                    Name = "Province" + x
                })

            };

            return View(model);

        }

           public ActionResult Suburbs(int cityId)
    {
        var suburbs = Enumerable.Range(1, 5).Select(x => new
        {
            Id = x,
            Name = "suburb" + x
        });

        return Json(suburbs, JsonRequestBehavior.AllowGet);
    }
    public ActionResult Cities(int provinceId)
    {
        var cities = Enumerable.Range(1, 5).Select(x => new
        {
            Id = x,
            Name = "city" + x
        });
        return Json(cities, JsonRequestBehavior.AllowGet);
       }           
     }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T05:50:12.473

您需要通过 $.ajax() 调用 ajax。

**你写了：** $.getJSON('@Url.Action("Cities")', { ProvinceId: selectedProvinceId }, function (cities) { var urbanSelect = $('#SelectedCityId'); urbanSelect.empty(); $.each （城市，函数（索引，城市）{ citySelect.append( $('') .attr('value', city.Id) .text(city.Name) ); }); });

**而不是你需要编码：**

```
var citiesSelect = $('#SelectedCityId');
     $.ajax({
        url: "/Home/Cities",
        type: "GET",  //these is must
        async: false, //these is optional
        cache: false,  //these is for IE
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        data: { provinceId: 1 },
        success: function (data) {
               $('#SelectedSuburbId').html("");

               var cities=eval(data);
               var citiesHtml = "";
               for (i = 0; i < cities.length; i++) {
                   citiesHtml += '<option value="' + cities[i].Id + '" >' + cities[i].Name + '</option>';
                }
             $('#SelectedSuburbId').html(citiesHtml);
            }
    }); 
```

您通过“数据”获得 json 调用的返回

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T08:31:08.513

使用上面的代码下拉可以填充。但是要获取值，您需要在“Cities”方法的顶部运行查询。并返回一个城市列表。

```
public ActionResult Cities(int provinceId)
{
    var cities = Enumerable.Range(1, 5).Select(x => new
    {
        Id = x,
        Name = "city" + x
    });
    return Json(cities, JsonRequestBehavior.AllowGet);
   }           
 } 
```*

# c - 在 C 中跟踪递归

> ID：15331301
> 
> 赞同：1
> 
> 时间：2013-03-11T04:39:01.940
> 
> 标签：c, recursion, console

我对递归函数和跟踪有基本的了解，但是当我尝试跟踪以下程序时，有些事情变得混乱：

```
#include <stdio.h>
#include <stdlib.h>

int f1(int *a, int c);

int main(void) {
    int a=2, b=3, c=4, d=5;
    a = f1(&c, f1(&b,d));
    printf("a= %d b= %d c= %d d= %d\n",a,b,c,d);

    system("pause");
    return 0;
}

int f1(int *a, int c) {
    *a = c - 2;
    c = c*2 - (*a);
    printf("a= %d c= %d\n", *a, c);
    return c - *a;
} 
```

当我跟踪时，我收到两个对 f、f(4,4) 和 f(3,5) 的调用。我可以正确跟踪返回值和 f 函数中的 printf 语句。但是 main 中的最终 printf 给了我 a= 4 b= 3 c= 2 d= 5 当我写出来时，我最终得到 c=4 ......即使在我对我的工作进行了两次和三次检查之后。当我调试时，我找不到主“c”的值何时发生变化，而且我当然在主“c”的代码中看不到任何算术。

在此先感谢...我有一种我忽略的小东西的感觉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T04:46:00.227

`main()`'s`c`将在这里改变：

```
int f1(int *a, int c) {
    *a = c - 2; /* <-- */
    c = c*2 - (*a);
    printf("a= %d c= %d\n", *a, c);
    return c - *a;
} 
```

在对 的外部调用中`f1`，您将指针传递给`c`. 在`f1`中，当您分配 时`*a`，它会更新`a`指向的任何内容，即`c`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T04:44:44.990

调用`a = f1(&c, f1(&b,d));`传递的地址`c`到`f1()`该函数的第一行

```
*a = c - 2; 
```

改变 的值`c`。`*a`指 的值`c`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T04:49:20.247

试试这样：

```
#include <stdio.h>
#include <stdlib.h>

int f1(int *a, int c, const char *sa);

int main(void) {
    int a=2, b=3, c=4, d=5;
    a = f1(&c, f1(&b,d, "main.b"), "main.c");
    printf("a= %d b= %d c= %d d= %d\n",a,b,c,d);

    system("pause");
    return 0;
}

int f1(int *a, int c, const char *sa) {
  printf("%d: set %s from %d to %d\n", __LINE__, sa, *a, c - 2); 
  *a = c - 2;
  c = c*2 - (*a);
  printf("a= %d c= %d\n", *a, c); 
  return c - *a; 
} 
```

**输出**

```
16: set main.b from 3 to 3
a= 3 c= 7
16: set main.c from 4 to 2
a= 2 c= 6
a= 4 b= 3 c= 2 d= 5 
```

# r - How to get Inverse CDF (kernel) in R?

> ID：15331307
> 
> 赞同：4
> 
> 时间：2013-03-11T04:39:32.847
> 
> 标签：r

Is there any function in R which will calculate the inverse kernel(i am considering normal) CDF for a particular alpha(0,1). I have found quantile but I am not sure how it works.

Thanks

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T06:29:48.687

我们可以积分得到 cdf，我们可以使用求根算法来反转 cdf。首先，我们要对输出进行插值`density`。

```
set.seed(10000)
x <- rnorm(1000, 10, 13)
pdf <- density(x)

# Interpolate the density
f <- approxfun(pdf$x, pdf$y, yleft=0, yright=0)
# Get the cdf by numeric integration
cdf <- function(x){
  integrate(f, -Inf, x)$value
}
# Use a root finding function to invert the cdf
invcdf <- function(q){
  uniroot(function(x){cdf(x) - q}, range(x))$root
} 
```

这使

```
med <- invcdf(.5)
cdf(med)
#[1] 0.5000007 
```

这绝对可以改进。一个问题是我不保证 cdf 总是小于或等于 1（如果您检查 cdf 是否有大于 max(x) 的值，您可能会得到类似 1.00097 的值。但我太累了无法修复那现在。这应该是一个不错的开始。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T01:33:08.617

另一种方法是使用对数样条密度估计而不是核密度估计。查看“logspline”包。通过对数样条密度估计，您可以获得 CDF ( `plogspline`) 和逆 CDF ( `qlogspline`) 函数。

# html - 将斜体样式应用于管道符号

> ID：15331309
> 
> 赞同：3
> 
> 时间：2013-03-11T04:39:45.623
> 
> 标签：html, css

我正在尝试制作一个管道符号`italic`，但在其他字体显示为斜体的情况下它不起作用，我做错什么了吗（在 Chrome 中）？

```
<em>italic | italic</em> | <em class="italic">abc | abc</em> 
```

[**演示。**](http://jsfiddle.net/39qyR/1/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T05:20:02.060

字符如何倾斜（**如果**他们甚至会倾斜）由字体本身定义。我检查了您添加到 Siva Charan 回答的评论中的参考链接，如果您使用 Firebug 检查该元素，您会看到这个字体系列：

```
font-family: "Lucida Grande","Lucida Sans Unicode",Calibri,Arial,Helvetica,Sans,FreeSans,Jamrul,Garuda,Kalimati; 
```

所以，我修改了你的 jsFiddle。等中提琴，管道倾斜：

[http://jsfiddle.net/39qyR/3/](http://jsfiddle.net/39qyR/3/)

我假设那些看到倾斜管道的人已经将 Lucida Grande（或类似的）设置为他们的默认字体，因为当我检查你的原始 jsFiddle 时我没有看到倾斜管道。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T07:33:19.753

“管道符号”，U+007C VERTICAL LINE，本质上是垂直的，在适当的字体设计中，它也有一个垂直的斜体字形。然而，大多数字体设计师并不理解这一点，部分原因是“|” 在普通文本中一直是一个罕见的字符。您可以使用[字体列表工具](http://www.fileformat.info/info/unicode/font/fontlist.htm)查看系统中哪些字体具有正确的“|”设计（输入任何包含它的文本，单击“斜体”）。

因此，如果您想要一条不正确倾斜的垂直线，您可以将字体设置为具有您偏好的字形的字体，尽管没有该字体的人会看到不同的东西。使用可下载的字体`@font-face`将是获得所需结果的最佳方式。

通常，“|” 不应该出现在斜体的文本中，因为很多字体会显示它是倾斜的。因此，而不是`<i>a | b</i>`，标记`<i>a</i>`| *b`*更安全。（类似的考虑适用于许多其他特殊符号，如“+”和“↓”。）

不同的人看到你的测试页面不同的原因是他们在浏览器中有不同的默认字体。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T05:02:40.957

经过一些解决方法后，我了解到由于一些图形表示，所有垂直和水平线都不能是斜体。

# android - How to set Gridlines to a GridView in Android

> ID：15331313
> 
> 赞同：3
> 
> 时间：2013-03-11T04:40:18.780
> 
> 标签：android, gridview, gridlines

I am using GridView to show a summary report of 3 columns in my app. EveryThing seems to work fine except the GridLines for Gridview is missing.

Can anyone please suggest how to display GridLines for GridView and even Headers.

Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T07:39:05.163

我实际上有一个更简单的解决方案。

您可以做的是为您设置垂直和水平间距`Gridview`，例如`1dp`或`2dp`取决于您希望边框的厚度。然后只需将背景颜色设置`GridView`为边框所需的颜色。

让我知道这是否适合您。

# jquery - 如何删除默认悬停文本并在悬停圆环图 Highcharts 上显示自定义文本标题

> ID：15331316
> 
> 赞同：0
> 
> 时间：2013-03-11T04:40:42.097
> 
> 标签：jquery, highcharts

我创建了一个甜甜圈图，我有一个问题，

1.  以两行显示“meternity :84”的内部文本标题。
2.  当我将鼠标悬停/鼠标悬停在图表上时，标题未显示为例外。显示“系列 2”之类的文本，例如：“已批准系列 2：84”，但需要的是“已批准：84”

我尝试使用格式化程序选项。但没有运气，

各位大侠，请看看这个并帮助我解决链接：

```
[http://jsfiddle.net/XyQzR/1/][1] 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T05:34:49.237

如果你想控制显示，你只需要为工具提示配置部分添加一个回调。

像这样修改您的工具提示部分：

```
tooltip: {
    valueSuffix: '',
    formatter: function() {
       console.debug(this.point);
       return this.point.y;
    }
} 
```

而且您只会显示点对象的值（假设这是您要显示的内容）。

我添加了一个`console.debug`向您展示点对象的内容。

这是工作示例：[highcharts](http://jsfiddle.net/XyQzR/4/)

还有关于工具提示的文档页面：[highcharts 上的工具提示](http://api.highcharts.com/highcharts#tooltip.formatter)

这个库的文档非常大，但它是一个非常好的文档（有很好的示例），所以你应该耐心阅读文档（我们不应该为你阅读它;））

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T09:11:41.560

您需要自定义工具提示。您想要的示例如下：

```
 tooltip: {
            valueSuffix: '',
            formatter: function() {
                return this.point.name + " :" + this.point.y;   
            }
        } 
```

[http://jsfiddle.net/cUd5L/](http://jsfiddle.net/cUd5L/)

正如另一张海报所提到的，文档在这方面非常好，尽管它似乎并没有过多地谈论下钻对象。

# eclipse - org.osgi.service.application.ApplicationException: No application id has been found. error while launching C eclipse in windows xp system.

> ID：15331321
> 
> 赞同：1
> 
> 时间：2013-03-11T04:41:36.453
> 
> 标签：eclipse

I am facing org.osgi.service.application.ApplicationException: No application id has been found, error while launching C++ eclipse in windows xp system. Can anyone help me to resolve this issue.

```
!ENTRY org.eclipse.osgi 4 0 2013-03-11 09:39:06.502
!MESSAGE Application error
!STACK 1
org.osgi.service.application.ApplicationException: No application id has been found.
    at org.eclipse.equinox.internal.app.EclipseAppContainer.startDefaultApp(EclipseAppContainer.java:262)
    at org.eclipse.equinox.internal.app.MainApplicationLauncher.run(MainApplicationLauncher.java:29)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438) 
```

# c++ - Constructors behaving strange with exception handling code

> ID：15331322
> 
> 赞同：-2
> 
> 时间：2013-03-11T04:41:45.350
> 
> 标签：c++, visual-c++, exception-handling, constructor

ScreenShot #1: Sample(Sample&) {...) // No Error without using "const" ![enter image description here](../Images/26525968748f75baf4a80755253b4d51.png) ScreenShot #2: Destructor is called twice, when copy-constructor is not included. ![enter image description here](../Images/60dc31f2a7cfbc80dd834d96d43f4baa.png)

When I run this code in VC++2010, I found results surprizing, please have a look:

```
#include <iostream>
using namespace std;

class Sample {
public:
   Sample() { cout<<"Sample().\n"; }
   // Sample (Sample&) { cout<<"Sample(Sample&).\n"; }
   ~Sample() { cout<<"~Sample().\n"; }
};

void fx() {
   throw Sample();
}

int _tmain(int argc, _TCHAR* argv[])
{
   try { fx(); }
   catch (Sample&) { cout<<"Caught Sample.\n"; }
   return 0;
} 
```

Please tell why without including copy-constructor in example, destructor is being called twice. And having so causes Abort() if we're freeing heap in destructor for example.

Also I know that a copy of object is created of the throwing object, but why it is not calling copy-constructor for that.

Please see the attached screen shot for code and output.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T17:13:40.680

这似乎是 VC++ 编译器中的一个错误（功能？:)），它已经存在了一段时间（但是我没有任何链接可以直接支持这个声明，我没有时间继续搜索。我想我不过，我自己也遇到过一两次。）这仍然发生在 VC++ 2012 中。

始终定义一个复制 ctor 是一种很好的编码习惯，即使您不使用它也是如此。这是[三法则的](http://en.wikipedia.org/wiki/Rule_of_three_%28C++_programming%29)一部分。不过有一些警告。

1.  VC++ 在抛出时尝试执行复制 ctor 时将使用对象的上下文而不是调用者。因此，即使标记为私有，它仍然可以访问。这可能是一个遗留问题，尽管我找不到任何特定于该事实的东西。

2.  VC++ 将允许在抛出时使用具有非常量参数的复制 ctor。这也是允许在移动范式实施之前转移资源的遗留问题。我只发现了一些模糊不清的事情。不，VC++ 似乎没有使用移动范例来抛出对象，所以如果您尝试实现移动构造函数，仍然会发生这种情况。

有关移动构造函数的更多信息，您可以[在此处查看](https://stackoverflow.com/questions/3106110/what-are-move-semantics)。

请注意，微软似乎会根据它是否会破坏太多东西来挑选它将实施的 C++ 标准的哪一部分。出于这个原因，我认为我不想加入 M$ 的编译器开发团队。：/

# java - How to remove initial null value?

> ID：15331327
> 
> 赞同：0
> 
> 时间：2013-03-11T04:42:10.940
> 
> 标签：java, servlets

I am uploading a file and displaying it as a link...but initially when I load the the page it displays a null value...I want remove this null value...

```
<form method="POST" name="form1" action="./FileUploadServlet" enctype="multipart/form-data" ><%  String name= request.getParameter("name");%>File:
    <input type="file" name="file" id="file" /> 
    <input type="submit" value="Upload" name="upload" id="upload" />
    <a href="./file/<%=name%>"><%=name%></a> 
```

FileUploadServlet.java

```
// Create path components to save the file
final String docs="C:\\Users\\tushar\\Documents\\NetBeansProjects\\fileupload\\web\\file\\";

final Part filePart = request.getPart("file");
final String file = getFileName(filePart);String a=request.getParameter("id");
     OutputStream out = null;
InputStream filecontent = null;
final PrintWriter writer = response.getWriter(); try{
out = new FileOutputStream(new File(docs +""+file));  
    filecontent = filePart.getInputStream();

    int read = 0;
    final byte[] bytes = new byte[1024];

    while ((read = filecontent.read(bytes)) != -1) {
        out.write(bytes, 0, read);
    }

    response.sendRedirect("upload.jsp?id="+a+"&name="+file+"");

 //   LOGGER.log(Level.SEVERE, "Problems during file upload. Error: {0}", new Object[]{fne.getMessage()});
} finally {
    if (out != null) {
        out.close();
    }
    if (filecontent != null) {
        filecontent.close();
    }
    if (writer != null) {
        writer.close();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T04:58:31.097

最初，当您加载页面时，没有上传文件，导致名称为空。

您可以将名称设置为`""`初始名称或在 JSP 中进行空值检查，其中任何一个都将删除初始空值。

您的值在`response.sendRedirect("upload.jsp?id="+a+"&name="+file+"");`此发送，因此将此处的文件变量设置为一个值或空字符串以避免空值。

# android - 安装 Eclipse 后的第一个 Android 应用

> ID：15331329
> 
> 赞同：1
> 
> 时间：2013-03-11T04:42:33.790
> 
> 标签：android, eclipse, sdk

我已经四处搜索，无法找到我需要的确切情况或答案，所以我必须问一个我确定在某个地方有人问过的问题，所以我很抱歉。但我需要帮助。第一次尝试创建应用程序时，我安装了 Eclipse（来自 android 开发站点的整个套件和经典），安装了 android sdk 和插件。Java 在我的机器上。我拥有开始所需的一切。我是第一次使用 android 开发者网站上的教程。Eclipse 会按应有的方式生成“hello world”应用程序。我的 GS3 通过 USB 插入并安装了驱动程序，系统可以看到它。我单击 run as > android application... 毫不奇怪，没有任何反应。没有错误消息，没有屏幕闪烁，设备上没有应用程序，什么都没有。所以我尝试在模拟器中运行它。不太清楚如何设置它，因为说明含糊不清，但我让一个模拟器运行并尝试再次运行......什么都没有。没有尝试然后失败，没有构建错误..没有快速命令提示符闪烁，什么都没有。IDE 就在那里，就好像我从未点击过任何东西一样。我在这里做错了什么？提前感谢您的帮助

我目前的设置是 Win8 机器 Eclipse Classic（因为网站上提供的那个不会安装插件） Android SDK 21.1 Eclipse Plugin for Android dev Java JDK 1.7 Samsung Galaxy S3 device with driver installed and set to USB debugging

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T05:16:02.440

首先你必须启用开发者选项（USB调试），然后连接你的设备，现在检查adb是否识别你的设备。

检查设备状态打开 DDMS 透视图，然后单击设备选项。如果您的设备未列出，则重新启动您的 adb 以执行此操作，然后在命令提示符/终端中转到 adb 路径，然后执行以下命令

**adb 杀死服务器**

**adb 启动服务器**

**亚行设备**

就是这样，您现在可以在您的设备中运行应用程序

# iphone - iOS: How to draw a line between two moving objects?

> ID：15331334
> 
> 赞同：2
> 
> 时间：2013-03-11T04:43:00.703
> 
> 标签：iphone, ios, animation, drawing, drawrect

I basically have an array of UIView objects that are on screen. They are being moved randomly around and I would like to have a line connecting each object.

In my drawRect method of the UIView that contains all the moving objects, I draw the lines between them. Then once that is done the below method is called for each object

```
-(void)animateIcon:(Icon*)icon{
[UIView animateWithDuration:(arc4random() % 100 * 0.1)
                      delay: 0.0
                    options: UIViewAnimationOptionCurveEaseIn
                 animations:^{
                     icon.frame = CGRectMake((arc4random() % 320), (arc4random() % ((int)self.frame.size.height - 70)), 52, 52);
                 }
                 completion:^(BOOL finished){[self animateIcon:icon];}]; 
```

}

Essentially I would like the lines to stay attached to the objects as they move. If I could call [self setNeedsDisplay]; every time the frame changed at all, then the drawRect method would re-draw the lines, but I can't figure out how to make this happen.

I tried setting an observer on the frame change (shown below) but it only gets triggered once an animation is finished, and doesn't catch the frame changes as the object is mid-animation

```
[icon addObserver:self forKeyPath:@"frame" options:NSKeyValueObservingOptionOld context:NULL]; 
```

any body got any ideas??

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T05:12:32.317

将所有移动视图放在一个数组中

```
[UIView setAnimationDidStopSelector:@selector(animationStopped:isFinished:context:)];

- (void)animationStopped:(NSString*)animationID isFinished:(BOOL)finished context:(void *)context 
{
    context = UIGraphicsGetCurrentContext() ;
    CGContextSaveGState(context);
    CGContextSetStrokeColorWithColor(context,[UIColor blueColor].CGColor );
    CGContextSetLineWidth(myContext, 5.0);
     CGMutablePathRef myPathRef = CGPathCreateMutable() ;
     for (int ind = 0 ; ind < [movingViewArray count] ; ind++)
       {
          UIView *tmpView=[movingViewArray objectAtIndex:ind];
          CGPoint point=tmpView.frame.center;
         if(ind==0) CGPathMoveToPoint(myPathRef, nil, point.x, point.y);
          else {
                 CGPathAddLineToPoint(myPathRef, nil, point.x, point.y);
                 CGPathMoveToPoint(myPathRef, nil, point.x, point.y);
                }
        }

      CGContextAddPath(context, myPathRef) ;

      CGPathRelease(myPathRef);

      CGContextDrawPath(context,kCGPathStroke);
      CGContextClip(context);
} 
```

# php - 如何安全地允许网络用户创建文件？

> ID：15331339
> 
> 赞同：0
> 
> 时间：2013-03-11T04:44:10.110
> 
> 标签：php, linux, apache, file-permissions

我正在建立一个允许某些用户撰写评论的网站，并且我希望在他们这样做时自动生成一个小的 php 文件。设置帐户/组/文件权限以允许此操作的最安全方法是什么？理想情况下，我希望评论作者能够更改标题以防万一他们犯了错误，这将要求 php 不仅能够创建文件和文件夹，还能够移动和/或删除它们。但是，这不是绝对必要的。我的测试服务器正在运行 Linux/Apache，所有内容的最新版本，出于测试目的，我暂时将主评论文件夹的所有者设置为服务器。我也愿意接受有关如何实现这一目标的其他建议。我不是真正的 IT 人，但我可以编写 shell 脚本就好了。

编辑：

感谢选定的答案，我能够想出一个解决方案。我使用了本指南（[http://www.seomoz.org/ugc/using-mod-rewrite-to-convert-dynamic-urls-to-seo-friendly-urls](http://www.seomoz.org/ugc/using-mod-rewrite-to-convert-dynamic-urls-to-seo-friendly-urls)），并将其修改为仅加载所需的 php 脚本没有变量，我设计它是为了直接从原始 URL 中检索信息，使用`$_SERVER['REQUEST_URI']`. 这是我的 .htaccess 文件的样子；它发送`www.domain.com/reviews/the-review-filepath.php`到`www.domain.com/reviews/review.php`.

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule !^review\.php$ review.php 
```

这样做对我来说要容易得多，因为我更多地关注 PHP 而不是正则表达式。感谢所有回答和/或评论的人。这比我以前尝试的方式要好得多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T05:21:05.790

从评论扩展：

如果您想获得一个“干净”的 url（例如`/post/123/comment/456`）而不是“参数化”的 url（例如`/?post=123&comment=456`），您仍然可以使用数据库，并利用[`mod_rewrite`](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html)（因为您标记了[apache](/questions/tagged/apache "显示标记为“apache”的问题")）。

# php - 在table2中查找table1的相关数据

> ID：15331341
> 
> 赞同：2
> 
> 时间：2013-03-11T04:44:16.260
> 
> 标签：php, mysql

表 1 有一些数据作为类别

![这是我的桌子1](../Images/8971d32a460016934667f7b7c876c826.png)

表 2 有一些与表 1 类别相关的数据 ![这是我的表2](../Images/87f160b734abb5f35f3550e9a9762671.png)

两个表之间的关系是table1中的cat_id和table2中的cat_ids。

我要的是什么？我需要显示 table1 和 table2 中的所有字段我只需要相关内容，即 id 存在于 cat_id(table1) 和 cat_ids(table2)

我正在使用这样的查询`select c.* ,cc.* from news_categories cc, news_content c where cc.cat_id = c.cat_ids group by cc.cat_id`，它只提供 table1 和 table2 中的公共数据。我需要公共数据和 table1 中的所有类别有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T04:50:04.030

你应该`JOIN`改用。

```
SELECT t1.*, GROUP_CONCAT(t2.content_id)
FROM table1 t1
LEFT JOIN table2 t2
    ON t2.cat_ids = t1.cat_id
GROUP BY t1.cat_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T04:52:12.157

这适用于两个表的所有字段...

```
SELECT Table1.*, Table2.*
FROM Table1, Table2
WHERE Table1.cat_id = Table2.cat_ids 
```

这适用于表 1 的所有字段和表 2 的内容字段...

```
SELECT Table1.*, Table2.full_content
FROM Table1, Table2
WHERE Table1.cat_id = Table2.cat_ids 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T05:22:17.597

你需要使用外连接，这种情况下左连接..看看[文档](http://www.w3schools.com/sql/sql_join_left.asp)

# ruby-on-rails - 如何在 Ruby on Rails 3.2.12 中使用 Twitter Bootstrap？

> ID：15331345
> 
> 赞同：1
> 
> 时间：2013-03-11T04:44:41.313
> 
> 标签：ruby-on-rails, ruby-on-rails-3, twitter-bootstrap, twitter-bootstrap-rails

我正在从 PHP 切换到 Ruby on Rails，我很喜欢它，唯一的一点是我已经习惯了 Twitter Bootstrap 来完成我的大部分设计，现在没有它我感觉很残废，我遵循了一些教程，比如添加`bootstrap-sass`和什么不是我的`Gemfile`，但我似乎仍然缺少重要的东西，比如`input-block-level`我只是好奇是否有更新版本或更简单的教程可以遵循？谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-11T07:06:16.577

AFAIK，将 twitter 引导程序集成到 rails 的最简单和最方便的方法是通过

[`twitter-bootstrap-rails`](https://github.com/seyhunak/twitter-bootstrap-rails)gem，他们也有很好的文档。

检查这些[屏幕截图](http://railscasts.com/episodes/328-twitter-bootstrap-basics)，以及[这个（高级）](http://railscasts.com/episodes/329-more-on-twitter-bootstrap)以获得一个想法。

欢迎来到 Rails :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T04:49:55.840

在`input-block-level`ERB 中做这样的事情

```
"input-block-level" => "hello_world" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T05:45:35.757

和你一样，我来自 PHP 并且喜欢 RoR ;)

使用引导程序，您需要将其导入清单中。在 RoR 指南中阅读有关资产管道的一些信息。

要导入引导程序，请在您的 app/assets/stylesheets 目录中创建一个文件，使用您想要的名称，但扩展名为 .css.scss，并将以下行放入其中：

```
@import "bootstrap"; 
```

此外，如果您需要使用引导程序中的 javascript 帮助程序，则需要在 app/assets/javascript/application.js 文件中添加以下行：

```
//= require bootstrap 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T05:49:53.160

只需从他的官方网站下载引导程序（CSS，JS）文件并定期在该文件中进行更新：[Bootstrap](http://twitter.github.com/bootstrap/)

对于引导教程：[单击此处](http://www.w3resource.com/twitter-bootstrap/tutorial.php)

或者您可以参考示例代码以供参考，因为有时我们无法实现工具提示等功能。

# jquery - jQuery Validator 插件和单选按钮问题

> ID：15331349
> 
> 赞同：0
> 
> 时间：2013-03-11T04:44:53.837
> 
> 标签：jquery, jquery-validate

我遇到了 jQuery Validator 插件和单选按钮的问题。我有一组三个`"lookingfor"`单选按钮......我想确保至少有一个被选中。尽管无论我做什么，我仍然会收到“此字段为必填项”的消息。有任何想法吗？

```
<html>
<body>
<form action="#" id="signupform" method="post">
        <label for="lookingfor" class="error"></label>
        <fieldset name="lookingfor">
            <input type="radio" name="lookingfor" value="female"/>
                <label for="female"><div class="sprite female" ></div></label>
            <input type="radio" name="lookingfor" value="male" />
                <label for="male"><div class="sprite male"></div></label>
            <input type="radio" name="lookingfor" value="other" />
                <label for="other"><div class="sprite other"></div></label> 
        </fieldset>
        <input type="submit" id="submit" value="" />
    </form>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.0/jquery.validate.js" type="text/javascript"></script>
<script>
    jQuery(document).ready(function() {
        jQuery("#signupform").validate({
            rules: {
                lookingfor:{ required: true }
            }
        });
        });
        </script>
        </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T05:09:29.623

根本问题是您复制了`radio`按钮组的`name`, `lookingfor`, 内部`<fieldset>`：

```
<fieldset name="lookingfor"> 
```

删除这个重复的名称，它工作正常。

**演示：http: [//jsfiddle.net/8qbUn/](http://jsfiddle.net/8qbUn/)**

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-11T05:00:51.130

在一个输入中添加选中，这样它将成为默认选择的单选按钮？

# wix - How to Remove White Background from Wix Button and Checkbox Property?

> ID：15331351
> 
> 赞同：6
> 
> 时间：2013-03-11T04:45:20.803
> 
> 标签：wix

i am trying to make an installer. Thw checkBox and button i have added has a white background. how can i get rid of those white spaces?

```
 <Control Id="DesktopShortcutCheckBox"  Type="CheckBox" X="80" Y="200" Width="290" Height="17" Property="INSTALLDESKTOPSHORTCUT" 
             CheckBoxValue="1" Text="Create a shortcut for this program on the desktop." />

 <Control Id="Back" Type="PushButton" Text="Back" X="215"  Y="243"  Width="60" Height="17">
      <Publish Event="NewDialog"  Value="SecondDlg" />
    </Control> 
```

![enter image description here](../Images/822e1df433a43e47b0151d5d43fedbb1.png)

thnx

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-11T05:08:34.467

不幸的是，Windows Installer UI 不支持透明复选框。你有几个选择：

1.  将复选框移动到不覆盖背景的位置。例如，安装对话框中通常有一个背景，然后是图像底部的水平线，然后是水平线下方的按钮。将复选框放在带有按钮的行下方看起来不错（看起来很标准）并且可以使用标准背景颜色。

2.  使复选框控件仅与复选框本身一样大，然后将静态文本放置在具有透明背景的复选框控件旁边。这可行，但这意味着用户必须直接单击复选框。此外，加速键不起作用，这是可访问性的禁忌。但它确实看起来更好。

3.  使用外部 UI 处理程序自定义绘制所有控件。使用 WiX v3.6+ 中的刻录更容易。可以使用 XML“主题文件”自定义 wixstdba UI。您可以获得比标准 Windows Installer UI 支持的更多自定义 UI。

这都是权衡。选择最适合您的。

# c# - Enable first chance exceptions for specific piece of code

> ID：15331357
> 
> 赞同：1
> 
> 时间：2013-03-11T04:46:13.613
> 
> 标签：c#, debugging, visual-studio-2008

I need Visual Studio to throw first chance exceptions only for a specific class.

If i enable First Chance exception in Visual Studio, it enables for the entire solution.My solution is big and I do not want the exceptions to be thrown every where.

I want the exceptions to be thrown by Visual studio only for a specific piece of code/module/method.

How do I do that? Are there any attributes that I can use for this? Or is it possible to enable through code?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T04:51:12.177

正如你所说>

我的解决方案很大，我不希望到处都抛出异常。

我希望 Visual Studio 仅针对特定的代码/模块/方法抛出异常。

我建议您仅对希望 Visual Studio 抛出异常的代码段使用 try 和 catch 块。

如果解决方案很大，请尝试仅打开一次连接并在最后一点关闭它。

# three.js - THREE.JS: Get object size with respect to camera and object position on screen

> ID：15331358
> 
> 赞同：21
> 
> 时间：2013-03-11T04:46:25.863
> 
> 标签：three.js

I am newbie to 3D programming, I did started to explore the 3D world from WebGL with Three.JS.

I want to predetermine object size while I change the camera.position.z and object's "Z" position.

For example: i have a cube mesh at size of **100x100x100.**

```
cube = new THREE.Mesh(
        new THREE.CubeGeometry(100, 100, 100, 1,1,1, materials),     
        new THREE.MeshFaceMaterial()
    ); 
```

and cam with aspect ratio of **1.8311874**

```
camera = new THREE.PerspectiveCamera( 45, aspect_ratio, 1, 30000 ); 
```

I want to know size (2D width & height) of that cube object on screen when,

```
camera.position.z = 750;
cube.position.z = 500; 
```

Is there is any way to find it/predetermine it?

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-03-11T05:39:35.913

[您可以使用Three.js - Width of view](https://stackoverflow.com/questions/13350875/three-js-width-of-view/13351534#13351534)中解释的公式计算距相机给定距离的可见高度。

```
var vFOV = camera.fov * Math.PI / 180;        // convert vertical fov to radians
var height = 2 * Math.tan( vFOV / 2 ) * dist; // visible height 
```

在您的情况下，相机 FOV 是 45 度，所以

```
vFOV = PI/4\. 
```

（注意：在 three.js 中，相机视野 FOV 是*垂直*的，而不是水平的。）

从相机到立方体*正面*的距离（重要！）是 750 - 500 - 50 = 200。因此，在您的情况下，可见高度是

```
height = 2 * tan( PI/8 ) * 200 = 165.69. 
```

由于立方体的正面是 100 x 100，所以立方体表示的可见高度的分数是

```
fraction = 100 / 165.69 = 0.60. 
```

因此，如果您知道画布高度（以像素为单位），那么立方体的高度（以像素为单位）就是该值的 0.60 倍。

我提供的链接显示了如何计算可见宽度，因此如果需要，您可以以类似的方式进行计算。

# android - 闪烁的背景

> ID：15331361
> 
> 赞同：7
> 
> 时间：2013-03-11T04:46:59.773
> 
> 标签：android, animation

我有一个和`LinearLayout`几个。我希望我的背景定时闪烁，比如从红色到白色再到红色等等。现在，我正在尝试这段代码，但它给了我一个空指针异常。`Buttons``TextViews`

```
LinearLayout ll = (LinearLayout) findViewById(R.layout.activity_main);
Animation anim = new AlphaAnimation(0.0f, 1.0f);
anim.setDuration(50); 
anim.setStartOffset(20);
anim.setRepeatMode(Animation.REVERSE);
anim.setRepeatCount(Animation.INFINITE);
ll.startAnimation(anim); // shows null pointer exception at this line 
```

请帮助我我哪里出错了？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-11T04:53:12.793

您在这里指定了错误的`View`id `findViewById(R.layout.activity_main)`。它应该是这样的：

```
findViewById(R.id.your_view_id); 
```

另外，请务必在`setContentView(R.layout.activity_main)`之后立即致电`super.onCreate`

**编辑**：

这是允许您仅使用所需颜色更改背景颜色的代码。如果从 调用它看起来[`AnimationDrawable.start()`不起作用`Activity.onCreate`](https://code.google.com/p/android/issues/detail?id=1818)，所以我们必须在`Handler.postDelayed`这里使用。

```
final LinearLayout layout = (LinearLayout) findViewById(R.id.layout);
final AnimationDrawable drawable = new AnimationDrawable();
final Handler handler = new Handler();

drawable.addFrame(new ColorDrawable(Color.RED), 400);
drawable.addFrame(new ColorDrawable(Color.GREEN), 400);
drawable.setOneShot(false);

layout.setBackgroundDrawable(drawable);
handler.postDelayed(new Runnable() {
    @Override
    public void run() {
        drawable.start();
    }
}, 100); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-11T04:57:13.533

试试这个

```
LinearLayout ll = (LinearLayout) findViewById(R.id.activity_main);
Animation anim = new AlphaAnimation(0.0f, 1.0f);
anim.setDuration(50); 
anim.setStartOffset(20);
anim.setRepeatMode(Animation.REVERSE);
anim.setRepeatCount(Animation.INFINITE);
ll.startAnimation(anim); 
```

如果`activity_main`是您的 XML 文件名，那么

```
setContentView(R.layout.activity_main); 
```

并在此处使用您的布局 ID

```
LinearLayout ll = (LinearLayout) findViewById(R.id.linear_layout_id); 
```

# c++ - c++ do while循环问题

> ID：15331369
> 
> 赞同：-1
> 
> 时间：2013-03-11T04:47:54.080
> 
> 标签：c++

我有以下 if 语句来确保当天输入有效。但是，如果有人输入了两次无效的日期，它只会保留该值。在继续之前，我如何确保日期有效？一个while循环？

```
cin>>date.day;
    if((date.day>31) || (date.month<1))
      {
          cout <<"Please input a valid day."<< endl;
          date.day = 0;
          cin>>date.day;
      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T04:51:32.647

使用`do` `while`结构：

```
do {
  cout <<"Please input a valid day."<< endl;
  date.day = 0;
  cin>>date.day;
  if (cin.fail()) {
    cin.clear();
    cin.ignore(1024, '\n');
  }
} while(cin.fail() || date.day > 31 || date.day < 1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T04:50:27.283

您正在寻找的是一个`while`循环：

```
cin>>date.day;
while((date.day>31) || (date.month<1))
{
    cout <<"Please input a valid day."<< endl;
    date.day = 0;
    cin>>date.day;
} 
```

# pdf - 性能变化 zend_pdf 2 与 tcpdf 。

> ID：15331374
> 
> 赞同：2
> 
> 时间：2013-03-11T04:48:25.630
> 
> 标签：pdf, zend-framework2, tcpdf, zend-pdf

我用过zend框架，现在想用zf2。我将 zend_pdf 用于 zf1。我知道 tc_pdf 和 zend_pdf 第 1 版之间的一些区别，但不知道 zend_pdf 第 2 版。如果有人对 zend_pdf 第 2 版有所了解，请简要介绍 zf2 zend_pdf 与 tc_pdf 的比较。另外，如果任何 pdf 比 tc_pdf 和 zend_pdf 更好，请给我一些建议。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-11T07:05:52.253

`Zend_Pdf`ZF2 的功能与 ZF1 的相同`Zend_Pdf`。此外，`Zend_Pdf`它实际上不再是 ZF2 核心的一部分。

`TCPDF`是一个更高级别的 API，所以它更容易上手。另外，您不必担心自动加载 - 只需`require()`在您的源代码中即可。`TCPDF`可以很好地处理国际字符，包括从右到左的文本呈现，但`Zend_Pdf`事实并非如此。

`Zend_Pdf`另一方面，支持将现有文档读入内存并对其进行操作（例如，向其中添加页面、拉出页面、操作现有页面、使用已嵌入的字体等），但`TCPDF`事实并非如此。

这绝不是一个彻底的比较，但如果上面提到的任何一点是关键要求，那么这可能会决定你将使用哪一个。如果以上几点都不是关键要求，那么我建议您花更多时间查看每个库的 API，并选择最适合您的要求、编码风格等的 API。它们都是很棒的库.

[更新 - 2013 年 6 月] 我只是在做一些透明图像的工作，发现它`TCPDF`比`Zend_Pdf`这方面的性能要好得多。我编写了一个脚本来创建一个页面，添加一个图像，然后在该图像之上添加第二个透明图像。我循环创建了 100 页。`Zend_Pdf`ZF1 耗时 14 秒。`ZendPdf`来自 github（即从 ZF2 中分离出来的版本）需要 13 秒。TCPDF 耗时 3 秒。这对某些人来说可能很重要，因此我认为值得更新这个答案。（作为比较，当我用不透明的图像代替第二张图像时，两个版本都`Zend_Pdf`在不到一秒的时间内完成了任务，所以透明度肯定是导致速度变慢的原因）。

# iphone - 核心数据 NSFetchRequest 还获取实体的子对象

> ID：15331376
> 
> 赞同：4
> 
> 时间：2013-03-11T04:48:37.463
> 
> 标签：iphone, ios, core-data

我是 iOS 开发和核心数据的新手。我有一个父 NSManagedObject

```
@class Units;
@interface Properties : NSManagedObject

@property (nonatomic, retain) NSString * descr;
@property (nonatomic, retain) NSString * address;
@property (nonatomic, retain) NSString * city;
@property (nonatomic, retain) NSString * state;
@property (nonatomic, retain) NSString *zipCode;
@property (nonatomic, retain) NSString * imageKey;
@property (nonatomic, retain) NSString * numberOfUnit;
@property (nonatomic, retain) NSData * thumbnailData;
@property (nonatomic, strong) UIImage * thumbnail;
@property (nonatomic) double orderingValue;
@property (nonatomic, retain) NSSet *units; 
```

还有一个孩子：

```
@class Properties;

@interface Units : Properties

@property (nonatomic, retain) NSString * unitDescr;
@property (nonatomic) int16_t unitNumber;
@property (nonatomic, retain) Properties *property; 
```

当我使用此方法获取父属性以在表格视图中显示父属性对象时：

```
- (void)loadAllItems
{
    if (!allItems) {
        NSFetchRequest *request = [[NSFetchRequest alloc] init];

        NSEntityDescription *e = [[model entitiesByName] objectForKey:@"Properties"];
        [request setEntity:e];

        NSSortDescriptor *sd = [NSSortDescriptor
                                sortDescriptorWithKey:@"orderingValue"
                                ascending:YES];
        [request setSortDescriptors:[NSArray arrayWithObject:sd]];

        NSError *error;
        NSArray *result = [context executeFetchRequest:request error:&error];
        if (!result) {
            [NSException raise:@"Fetch failed"
                        format:@"Reason: %@", [error localizedDescription]];
        }

        allItems = [[NSMutableArray alloc] initWithArray:result];
    }
} 
```

我遇到了核心数据上下文获取父实体的子对象的问题。我只想返回父对象。

例如，如果我有一个具有 3 个单位的属性，则属性表视图应该只显示 1 行，但它显示 4 行（1 个父级和 3 个子级）。

我如何只返回父对象？

谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-11T06:15:22.377

看看`NSFetchRequest`的`setIncludesSubentities`方法。如果您的数据模型在代码中反映了您的继承模式，那么如果您设置正确，则您的获取请求将不会获取子实体。

`NSFetchRequest *request = [[NSFetchRequest alloc] init]; request.includesSubentities = NO;`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-11T05:04:17.337

如果将*Properties定义为**Units*的父实体，则每个*Units*对象也是一个*Properties*对象。因此，获取属性也会返回所有单位。

这可能不是你想要的。*您应该只定义Properties*和*Units*之间的关系，而不设置父实体（这样两个类都是 的直接子类`NSManagedObject`）。

备注：我将实体称为*Property*和*Unit*，因为每个实例代表一个属性或单元。

# cordova - 科尔多瓦在数据库中保存 id

> ID：15331380
> 
> 赞同：0
> 
> 时间：2013-03-11T04:49:06.433
> 
> 标签：cordova

我有一个在科尔多瓦开发的项目。在这里，我将创建新任务并在 index.html 中列出它们。但在数据库中，“id”字段不会动态存储 id (1,2,3...)。我想知道如何在项目中动态存储 id。请帮助我。我将在其中创建新记录的 js 是：

```
function addTask(task, cb) {
    db.transaction(function(tx) {
        tx.executeSql("INSERT INTO task (taskname) VALUES (?)",
                [ task.taskname ]);
    }, sqlErrH, cb);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T05:42:33.773

我发现了如何做到这一点..代码在创建表中..：

tx.executeSql("CREATE TABLE IF NOT EXISTS tasks (id INTEGER PRIMARY KEY AUTOINCREMENT, taskname)");

这里在 id 字段中，如果我们提到 autoincrement，它会自动增加 id。

谢谢

# opengl - 正确使用截头锥

> ID：15331384
> 
> 赞同：0
> 
> 时间：2013-03-11T04:49:27.640
> 
> 标签：opengl, opengl-es

我正在读一本书，上面写着：`For perspective projection, avoid setting your near or far plane to zero or a negative number. Mathematically this just doesn’t work out.`

它指的是矩阵的`near`和`far`参数，例如：

```
static Matrix4<T> Frustum(T left, T right, T bottom, T top, T near, T far)
{
    T a = 2 * near / (right - left);
    T b = 2 * near / (top - bottom);
    T c = (right + left) / (right - left);
    T d = (top + bottom) / (top - bottom);
    T e = - (far + near) / (far - near);
    T f = -2 * far * near / (far - near);
    Matrix4 m;
    m.x.x = a; m.x.y = 0; m.x.z = 0; m.x.w = 0;
    m.y.x = 0; m.y.y = b; m.y.z = 0; m.y.w = 0;
    m.z.x = c; m.z.y = d; m.z.z = e; m.z.w = -1;
    m.w.x = 0; m.w.y = 0; m.w.z = f; m.w.w = 1;
    return m;
} 
```

好的，我明白了。但我不明白的是，作者随后将所有演示模型都翻译了 -7 的 az，显示在屏幕上很好。但是如果近和远的截锥体 z 分别设置为 5 和 10，为什么屏幕上会出现 -7？不应该只出现转换为 5 到 10 之间的 az 的对象吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T05:47:13.320

因为相机的 znear 和 zfar 值是与相机的*距离*，而不是绝对数字。他们总是积极的。这就是数学的工作原理。

# mysql - 如何选择下一个预约Mysql？

> ID：15331386
> 
> 赞同：0
> 
> 时间：2013-03-11T04:49:52.313
> 
> 标签：mysql

我有一张叫预订的桌子，它包含每辆车的所有预订。我有一个 reservationStatus 字段，表示 1 = 已安排 2 = 待处理，0 = 已取消。

所以我想根据当前的待处理记录从表中选择下一个预订日期。

所以当我运行这段代码时

```
SELECT dateFrom, dateTo FROM reservation WHERE reservationStatus = 2 
```

这将给我当前未决的保留。现在从这里我想返回`dateFrom`字段小于或等于前一个的第一条记录`dateTo`？

这可以在一个选择语句中完成吗？我知道它可以使用 2 个单独的语句和一些 php 来完成，但我想知道它是否可以在一个查询中用 MySql 编写？

**编辑 - 新添加到问题中**

这就是我用 2 个查询和一些 PHP 解决它的方法。

```
$sql = $db->query('SELECT dateTo FROM reservation WHERE Vehicle_id='. $id . ' AND reservationStatus = 2 LIMIT 1 ');
$first = $sql->fetch_assoc();
$sql->free();
$sql = $db->query('SELECT dateFrom FROM reservation WHERE Vehicle_id='. $id . ' AND reservationStatus = 1 AND (dateFrom > \''.$first['dateTo'] .'\') ORDER BY dateFrom ASC ');

$row = $sql->fetch_assoc();

$month = strtotime($first['dateTo']);
$end = strtotime($row['dateFrom']); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T04:55:15.353

将 order by 与 datefrome 一起使用，并限制 1。这将给出您需要的结果

```
SELECT dateFrom, dateTo reservation WHERE reservationStatus = 2
ORDER BY dateFome DESC
LIMIT 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T04:55:40.483

干得好：

```
SELECT dateFrom, dateTo FROM reservation WHERE reservationStatus = 2 
ORDER BY dateFrom DESC 
LIMIT 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T04:52:13.497

尝试

```
SELECT dateFrom, dateTo FROM reservation WHERE reservationStatus = 2
ORDER BY dateFome DESC
LIMIT 1 
```

将按（最新的优先）排序结果`dateFrom`并仅获取第一行。

# php - 如果表A中的记录在表B中不存在做某事，我将如何去做？

> ID：15331389
> 
> 赞同：0
> 
> 时间：2013-03-11T04:50:09.483
> 
> 标签：php, mysql, codeigniter

我有一个名为 emails 的表 A 表我需要检查表 B 也有一个名为 emails 的字段。如果表 A 中的电子邮件未显示在表 BI 中，则需要执行某些操作。

这是我到目前为止的sql部分

```
$check=$this->db->query("SELECT * FROM default_appointment WHERE email NOT IN (SELECT email FROM default_consultation)"); 
```

我不确定我是否在正确的轨道上，如果我不确定如何实现 php 部分。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T04:53:32.640

看看 MySQL [EXISTS](http://dev.mysql.com/doc/refman/5.0/en/exists-and-not-exists-subqueries.html)。

```
SELECT *
FROM default_appointment a
WHERE NOT EXISTS (
  SELECT 1
  FROM default_consultation c
  WHERE c.email = a.email
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T05:12:40.013

```
$check=$this->db->query("SELECT * FROM default_appointment WHERE email NOT IN (SELECT      email FROM default_consultation)");

  $row_count = $this->db->num_rows($check);

  if($row_count > 1)
  {
    // do your stuff
  } 
```

希望它有效

# r - deSolve 包参数可以包含矩阵吗？

> ID：15331394
> 
> 赞同：3
> 
> 时间：2013-03-11T04:50:19.257
> 
> 标签：r, parameters, matrix

我正在尝试编写一个按年龄分层的 SEIR 模型；也就是说，在我的微分方程中，我有一个质量作用参数，它是 20 个年龄段的 beta*（感染比例）*（易感人数）之和。传输系数 (beta) 由接触矩阵计算得出。接触矩阵有 20 列和代表年龄类别的行（行 = 人 i，列 = 人 j），并包含任何年龄类别的两个人之间的接触概率。我设计了它并将其读入 R。我的问题是我不知道如何（或是否）可以在 deSolve 的参数中使用矩阵。我写的下面这段代码不起作用，我相信是因为矩阵/我得到了这个错误：

```
Error in beta * S : non-numeric argument to binary operator 
```

在我胡思乱想之前，我想知道是否可以使用这样的矩阵作为该模型的参数。

```
mat <-as.matrix(read.csv("H:/IBS 796R/contactmatrix.csv", header=F))

times <- seq(0,20,by=1/52)
parameters <- c(mu=0,v=1/75,N=1,p=0,delta=2.4,beta=mat*0.04,sigma=1/8,gamma=1/15)
xstart <- c(S=0.06,E=0,I=0.001,R=0)

SEIR0 <- function(t,x,parameters){
    S=x[1]
    E=x[2]
    I=x[3]
    R=x[4]
    with(as.list(parameters), {
        dS=v*S -beta*S*I/N -delta*S
        dE=beta*S*1/N -E*(sigma+delta)
        dI=sigma*E -I*(gamma+delta)
        dR=gamma*I-delta*R
        res=c(dS,dE,dI,dR)
        list(res)
    })
}

out <- as.data.frame(lsoda(xstart,times,SEIR0,parameters)) 
```

另外，如果我打印参数，这就是 beta 的样子：

```
$beta.V1
 [1] 4e-04 4e-04 4e-04 4e-04 4e-04 4e-04 4e-04 4e-04 4e-04 4e-04 4e-04
[12] 4e-04 4e-04 8e-03 8e-03 8e-03 8e-03 8e-03 8e-03 8e-03

$beta.V2
 [1] 4e-04 4e-04 4e-04 4e-04 4e-04 4e-04 4e-04 4e-04 4e-04 4e-04 4e-04
[12] 4e-04 4e-04 8e-03 8e-03 8e-03 8e-03 8e-03 8e-03 8e-03 
```

....通过 $beta.V20。所以我认为它创建了 20 个向量，每个向量都有 20 个参数……我认为每个向量都是原始矩阵“mat”的一行乘以常数 0.04？但是，当我在“参数”之外乘以 mat*0.04 时，我得到了预期的矩阵。我正在为如何使用 deSolve 实现这些方程而苦苦挣扎，并希望得到任何关于它是否可能的建议。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T06:01:17.873

错误发生在这一行：

```
dS=v*S -beta*S*I/N -delta*S 
```

`non-numeric argument to binary operator`意味着您尝试将一个函数例如乘以一个数字。您可以通过以下方式重现它`I*1`

```
Error in I * 1 : non-numeric argument to binary operator` 
```

在这里，R 找不到 beta ，而 beta 被解释为数学的特殊函数，所以错误。您需要将参数定义为

```
# a list 
list(mu=0,v=1/75,N=1,p=0,delta=2.4,beta=mat*0.04,sigma=1/8,gamma=1/15) 
```

和

```
 ## you get a vector mu,N,p,delta,beta1,bet2,...  
c(mu=0,v=1/75,N=1,p=0,delta=2.4,beta=mat*0.04,sigma=1/8,gamma=1/15) 
```

我认为你甚至可以将你的函数重写为：

```
SEIR0 <- function(t,x,parameters){
  with(as.list(c(parameters, x)), {
    dS = v*S -beta*S*I/N -delta*S    ## matrix
    dE = beta*S*1/N -E*(sigma+delta) ## matrix
    dI = sigma*E -I*(gamma+delta)
    dR = gamma*I-delta*R
    res = c(dS,dE,dI,dR)
    list(res)                        ## different of the structure of xstart
  })
} 
```

这将纠正上述问题，但 ODE 将不起作用，因为 SEIR0 返回的导数数量必须等于初始条件`xstart`向量的长度（此处为 4）。

我建议例如：

```
 res <- c(dS=mean(dS),dE=mean(dE),dI=dI,dR=dR)
  list(res) 
```

# iphone - 需要使用 web 视图访问我的单视图 ios 应用程序中的 url

> ID：15331396
> 
> 赞同：1
> 
> 时间：2013-03-11T04:50:33.170
> 
> 标签：iphone, objective-c, cocoa

我有一个关于 webview 的问题。我有一个 url，需要在 webView 中运行该 url。我的代码在这里..

```
NSLog(@"Response ==> %@" ,encodedString);

        UIWebView *webView;
        webView = [[UIWebView alloc] initWithFrame:CGRectMake(0,0, 320, 470)];
       [webView setDelegate:self];

        NSURL *url1 = [NSURL URLWithString:[encodedString stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];

        NSURLRequest *requestObj = [NSURLRequest requestWithURL:url1];

        NSLog(@"Response2 ==> %@" ,url1);
        [self.webView loadRequest:requestObj];
        [[self view] addSubview:webView]; 
```

`encodedString`是我需要在其中运行的`webView`url 我在输出中使用 "" (%22) 获取 url 值并打开 web 视图，但 url 的内容没有显示。当我`NSLog`用于 url1 时，它显示 Response2 ==> %22http ://66.541.67.50/mobile%22。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T05:02:15.947

我已经使用了这个链接，它显示在网络视图中

```
NSString *encodedString = @"http://stackoverflow.com/questions/15331396/need-to-access-the-url-in-my-single-view-ios-application-using-web-view";
NSLog(@"Response ==> %@" ,encodedString); 
```

更改行 ::`[self->webView loadRequest:requestObj];`到`[webView loadRequest:requestObj];`

其余代码保持不变。

签入 .h 文件 ::`..<UIWebViewDelegate>{...`

它正在工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T04:49:26.013

大家好，我已经解决了，下面的代码对我有用....

```
NSLog(@"Response ==> %@" ,encodedString);

        UIWebView *webView;
        webView = [[UIWebView alloc] initWithFrame:CGRectMake(0,0, 320, 470)];
        [webView setDelegate:self];

        NSString *urlAddress = encodedString;
        NSURL *url1 = [NSURL URLWithString:urlAddress];
        NSURLRequest *requestObj = [NSURLRequest requestWithURL:url1];
        NSLog(@"url1 ==> %@" ,url1);
        [webView loadRequest:requestObj];
        [[self view] addSubview:webView]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T05:00:49.617

这是在 webview 中打开 url 的代码。

```
 yourWebview.backgroundColor=[UIColor clearColor];
      yourWebview.opaque=NO;
     yourWebview.scalesPageToFit=YES;
      [yourWebview loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"your url string"]]]; 
```

让我知道它是否工作..!!!

快乐编码！！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T05:10:24.853

尝试这个

```
url=[NSURL URLWithString:[encodedString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
    NSURLRequest *request=[NSURLRequest requestWithURL:url];
[self.webView loadRequest:request]; 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-03-11T04:58:38.810

将您分配给`encodedString`您的另一个`NSString`可能是浪费时间。更好的是，您可以直接将其加载到您`url1`的如下

```
NSURL *url1 = [NSURL URLWithString:encodedString]; 
```

希望这对你有帮助！

**编辑**

例子 -

```
NSURL *url1 = [NSURL URLWithString:@"http://www.google.com"]; 
```

# ruby-on-rails - 如何在 Rails 3.2 中为所有未知请求（包括图像）呈现相同的 404 页面，而不单独指定每种文件格式？

> ID：15331399
> 
> 赞同：3
> 
> 时间：2013-03-11T04:51:00.707
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, routes, actionview

我们在 routes.rb 中为 404s 使用以下包罗万象的路由：

```
# Catches all 404 errors and redirects
match '*url' => 'default#error_404' 
```

但这会在下面生成 500 内部服务器错误，因为我们没有专门在**error_404**中捕获 PNG 格式。

```
Started GET "/images/doesnotexistyo.png" for 71.198.44.101 at 2013-03-08 07:59:24 +0300
Processing by DefaultController#error_404 as PNG
  Parameters: {"url"=>"images/doesnotexistyo"}
Completed 500 Internal Server Error in 1ms

ActionView::MissingTemplate (Missing template default/error_404, application/error_404 with {:locale=>[:en], :formats=>[:png], :handlers=>[:erb, :builder]}. Searched in:
  * "/home/prod/Prod/app/views" 
```

理想情况下，所有未知请求都会呈现**default#error_404 HTML**动作。我们不知道如何获取**format.any**来呈现 404 HTML 动作。如何使用错误 404 HTML 响应呈现所有未知请求？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T04:57:02.627

**在应用程序控制器中：** [使用rescue_from](http://apidock.com/rails/ActiveSupport/Rescuable/ClassMethods/rescue_from)

```
rescue_from "ActionController::UnknownAction", :with => :render_404
rescue_from "ActionController::RoutingError",  :with => :render_404

def render_404
  respond_to do |format|
    format.html { render :template => "<PATH_OF_404_ERROR_TEMPLATE>", :status => 404 }       
    format.xml { head 404 }
    format.js { head 404 }
    format.json { head 404 }
  end
  return false
end 
```

# jquery-mobile - jQuery mobile 更改页面不会禁用显示面板按钮

> ID：15331400
> 
> 赞同：1
> 
> 时间：2013-03-11T04:51:04.263
> 
> 标签：jquery-mobile, button, panel

我在使用 jq-mobile 禁用显示面板时遇到问题。

我使用模板 PHP，每个页面共享相同的页眉和页脚，所以我为这个问题创建了 html 版本。

标题有两个按钮，可以打开左面板或右面板。page1.html 有 2 个面板（左和右），page2.html 有 1 个面板（左）。

因此，在 page2.html 中，必须禁用标题中的右侧按钮面板，因为 page2.html 没有右侧面板。

问题是，当我打开 page1 然后通过左侧面板菜单导航到 page2 时，右侧面板标题按钮未被禁用。我专门在 page2.html 中添加了**ui-disable**类脚本，但不起作用。

如果我直接访问 page2.html，则该按钮被禁用。

这里是源代码：

page1.html

```
<!DOCTYPE html>
<html>
<head>
    <title>HOME</title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>

    <script>
        $( document ).on( "pageinit", "#index-page", function() {
            $( document ).on( "swipeleft swiperight", "#index-page", function( e ) {
                if ( $.mobile.activePage.jqmData( "panel" ) !== "open" ) {
                    if ( e.type === "swipeleft"  ) {
                        $( "#index-page .right-panel" ).panel( "open" );
                    } else if ( e.type === "swiperight" ) {
                        $( "#index-page .left-panel" ).panel( "open" );
                    }
                }
            });
        });
    </script>
</head>
<body>

    <div data-role="page" id="index-page" class="index-page">

        <!--header-->
        <div data-role="header" data-position="fixed">
            <h1>HOME</h1>
            <a id="show-left-panel" href="#left-panel" data-theme="b" data-icon="arrow-r" data-iconpos="notext" data-shadow="false" data-iconshadow="false" class="ui-icon-nodisc">Open left panel</a>
            <a id="show-right-panel" href="#right-panel" data-theme="b" data-icon="arrow-l" data-iconpos="notext" data-shadow="false" data-iconshadow="false" class="ui-icon-nodisc">Open right panel</a>
        </div><!--/header-->

        <!-- content -->
        <div data-role="content">
            <ul data-role="listview">
                <li data-role="list-divider"><h2>Latest News</h2></li>
                    <li><a href="#">
                        <h3>News 1</h3>
                        <p>News news  news  news  news  news  news  news  news  news  news  news  news ...</p>
                        <p class="ui-li-aside">Fri, Feb 14th 2013</p>
                    </a></li>
                    <li><a href="#">
                        <h3>Dummy word example</h3>
                        <p>The quick brown fox jumps over the lazy doug blah blah The quick brown fox jumps over the lazy doug blah blah...</p>
                        <p class="ui-li-aside">Mon, Jan 14th 2013</p>
                    </a></li>
            </ul>
        </div><!-- /content -->

        <!-- left-panel -->
        <div data-role="panel" id="left-panel" class="left-panel" data-display="push">
            <ul data-role="listview" data-count-theme="e">
                <li data-icon="delete"><a href="#" data-rel="close">Close</a></li>
                <li data-icon="info" data-iconpos="notext"><a href="page2.html">Page 2</a></li>
            </ul>
        </div><!-- /left-panel -->

        <!-- right-panel -->
        <div data-role="panel" id="right-panel" class="right-panel" data-display="overlay" data-position="right">
            <ul data-role="listview" data-icon="false">
                <li data-icon="delete"><a href="#" data-rel="close">Close</a></li>
                <li data-role="list-divider">Submenu</li>
                <li data-theme="e">Foo</li>
                <li><a href="#">Bar</a></li>
            </ul>
        </div><!-- /right-panel -->

        <!--footer-->
        <div data-role="footer" data-position="fixed">
            <h3>Copyright &copy; 2013 Example.com</h3>
        </div><!--/footer-->

    </div>

</body>
</html> 
```

page2.html

```
<!DOCTYPE html>
<html>
<head>
    <title>HOME</title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>

    <script>
        $( document ).on( "pageinit", "#index-page", function() {
            $( document ).on( "swipeleft swiperight", "#index-page", function( e ) {
                if ( $.mobile.activePage.jqmData( "panel" ) !== "open" ) {
                    if ( e.type === "swipeleft"  ) {
                        $( "#index-page .right-panel" ).panel( "open" );
                    } else if ( e.type === "swiperight" ) {
                        $( "#index-page .left-panel" ).panel( "open" );
                    }
                }
            });

            $('#show-right-panel').addClass('ui-disabled'); //if I load page1.html first, than goes here, this line seems to have no effect?
        });
    </script>
</head>
<body>

    <div data-role="page" id="index-page" class="index-page">

        <!--header-->
        <div data-role="header" data-position="fixed">
            <h1>HOME</h1>
            <a id="show-left-panel" href="#left-panel" data-theme="b" data-icon="arrow-r" data-iconpos="notext" data-shadow="false" data-iconshadow="false" class="ui-icon-nodisc">Open left panel</a>
            <a id="show-right-panel" href="#right-panel" data-theme="b" data-icon="arrow-l" data-iconpos="notext" data-shadow="false" data-iconshadow="false" class="ui-icon-nodisc">Open right panel</a>
        </div><!--/header-->

        <!-- content -->
        <div data-role="content">
            <ul data-role="listview">
                <li data-role="list-divider"><h2>Subpage</h2></li>
                    <li><a href="#">
                        <h3>SUb 1</h3>
                        <p>News news  news  news  news  news  news  news  news  news  news  news  news ...</p>
                        <p class="ui-li-aside">Fri, Feb 14th 2013</p>
                    </a></li>
            </ul>
        </div><!-- /content -->

        <!-- left-panel -->
        <div data-role="panel" id="left-panel" class="left-panel" data-display="push">
            <ul data-role="listview" data-count-theme="e">
                <li data-icon="delete"><a href="#" data-rel="close">Close</a></li>
                <li data-icon="info" data-iconpos="notext"><a href="page1.html">Page 1</a></li>
            </ul>
        </div><!-- /left-panel -->

        <!--footer-->
        <div data-role="footer" data-position="fixed">
            <h3>Copyright &copy; 2013 Example.com</h3>
        </div><!--/footer-->

    </div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T09:43:20.337

您的代码有问题（不是错误，因为您的代码完美无缺）。

如果 jQuery 移动页面被分隔在多个 HTML 文件中，当第二个 HTMl 文件加载到 DOM 中时，只会加载其 BODY 内容，其他所有内容（包括 HEAD）都将被丢弃。

因此，您的代码可以通过两种方式修复：

1.  将脚本内容从**page2.html**移动到**page1.html**
2.  将您的脚本内容从**page.2html** HEAD 移动到**page2.html** BODY

解决方案一更简洁，但每个人都是正确的，因此请选择更适合您的解决方案。

另一个问题，你不能有 2 个具有相同 id 的页面，所以在**page2.html**文件中更改页面 id。

有关此主题的更多信息可以在我的其他**[文章](http://www.gajotres.net/how-jquery-mobile-page-handling-affects-javascript-executions/)**（我的个人博客）中找到，以及带有示例的预防方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T16:55:11.603

显然前一页的 DOM 仍在活动页面中。所以我添加了以下脚本来删除它：

```
$( document ).on( "pageshow", "div.big-page", function(event, ui) {
    $(ui.prevPage).remove();
    if($("#right-panel").length > 0) { // make sure the page has right panel
        $("#show-right-panel").removeClass("ui-disabled");
    }
}); 
```

酸：[JQM（jQueryMobile）在changePage（）上将最后一页推出DOM](https://stackoverflow.com/questions/5737730/jqm-jquerymobile-push-last-page-out-of-dom-on-changepage)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-09-15T06:28:31.530

尝试使用不同版本的 JQM 库和 css

# unix - cygwin，如何设置得到unix shell，和c程序，做系统编程？

> ID：15331403
> 
> 赞同：0
> 
> 时间：2013-03-11T04:51:22.127
> 
> 标签：unix, installation, cygwin

你下载哪些包来获得VI选项，和shell，并在其中进行c编程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T05:05:28.843

vim (vi - 改进) 属于编辑器类别。

bash (shell) 属于 Base 类别。

GNU C 属于开发类别。我建议下载 GDB 调试器并`make`从该类别中下载。

所有这些（以及更多）都可以从[www.cygwin.com](http://www.cygwin.com)`setup`上的 Cygwin程序中选择。

# php - PHP使用preg_match和checkdate错误结果检查日期时间格式

> ID：15331405
> 
> 赞同：0
> 
> 时间：2013-03-11T04:51:29.903
> 
> 标签：php, validation, datetime, preg-match

我想使用 preg_match() 和 checkdate() 函数验证日期时间格式。我的格式是“dd/MM/yyyy hh:mm:ss”。我的代码有什么问题？

```
function checkDatetime($dateTime){
    $matches = array();
    if(preg_match("/^(\d{2})-(\d{2})-(\d{4}) ([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9])$/", $dateTime, $matches)){
        print_r($matches); echo "<br>";
        $dd = trim($matches[1]);
        $mm = trim($matches[2]);
        $yy = trim($matches[3]);
        return checkdate($mm, $dd, $yy); // <- Problem here?
    }else{
        echo "wrong format<br>";
        return false;
    }    
} 

//wrong result
if(checkDatetime("12-21-2000 03:04:00")){
    echo "checkDatetime true<br>";
}else{
    echo "checkDatetime false<br>";
}

//correct result
if(checkdate("12", "21", "2000")){
    echo "checkdate true<br>";
}else{
    echo "checkdate false<br>";
} 
```

**输出：**

```
Array ( [0] => 12-21-2000 03:04:00 [1] => 12 [2] => 21 [3] => 2000 [4] => 03 [5] => 04 [6] => 00 )

checkDatetime false

checkdate true 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T05:10:11.197

`if(checkDatetime("12-21-2000 03:04:00"))`导致

```
$dd = 12
$mm = 21
$yy = 2000 
```

然后调用`return checkdate($mm, $dd, $yy);`，相当于`return checkdate(21, 12, 2000);`

很明显`$mm`不能是 21，但我不能说你是否传递了错误的格式，`checkDatetime`或者你是否在正则表达式中解析错误。

# c - C中的计数和排序

> ID：15331413
> 
> 赞同：0
> 
> 时间：2013-03-11T04:52:31.107
> 
> 标签：c, counting

我正在研究一个常规的 C 程序，它计算输入的数量并相应地对它们进行分类。我现在还没有为它编写任何代码，因为我仍在考虑如何去做，所以我会尽力解释。

作为我想使用这个程序的一个例子，假设我希望它计算人们的投票数。我只对人口统计感兴趣，而不是实际投票。因此，用户使用个人选票输入每个人的性别和年龄，然后将其添加到最后的总数中，并在男性和女性之间进行统计。每个年龄段都会分配一个字符来帮助计算。例如年龄 0-20 = A，21-40 = B，41+ = C。然后，会有一个像 X0 这样的输入来结束计数：

所以它看起来像这样，将性别和年龄作为用户输入（忽略项目符号）：

*   输入性别和年龄：男 17
*   输入性别和年龄：女 20
*   输入性别和年龄：男 30
*   输入性别和年龄：女 46
*   输入性别和年龄：男 35
*   输入性别和年龄：X0
*   男：ABB
*   女：交流
*   总计：5

我正在考虑使用 while、for 和 do while 循环来完成此任务，因为我仍在学习该语言，但我很难做到这一点。

如果你们有任何建议，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T05:03:34.310

您可以使用 switch 语句和 if 并使用计数器来计算选票。我会这样处理问题。试着在纸和笔上做一点，写一点代码我相信一旦你开始用纸和笔你就会得到它。同样对于排序，您可以使用一个可以处理的循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T05:06:02.343

您可能应该直接潜入并以您知道的方式编写它。早期的编码经验非常有用。如果你能得到一些你描述的东西，你会在这个过程中学到很多东西。

要像您描述的那样在一行上获得输出和输入，您可能需要`fflush(stdout);`在.`printf``scanf`

顺便说一句，终止用户对程序的输入的常用策略是使用 EOF 代码（在 Unix/Linux 中为 ctrl-D，在 Windows 中为 ctrl-Z）。`scanf`如果遇到 EOF 而不是更多的键盘敲击，将返回负值。

也就是说，作为*更广泛*的策略，我建议您开始考虑将这类程序视为*非交互式的*。想象一下，如果程序不需要每次都检查问卷，而是直接从文件中读取数据。而不是完整的单词，它会有单字母代码，看起来更像

```
M 17
F 20 
```

程序*只是进行了计数。*那不是更容易编写*和使用*吗？

# c# - Treeview 复选框检查了 C# 中列表视图中的文件和文件夹加载

> ID：15331415
> 
> 赞同：0
> 
> 时间：2013-03-11T04:52:56.273
> 
> 标签：c#, treeview

我想制作一个旨在复制文件和文件夹的审核工具。

我使用树视图使用递归方法加载文件和文件夹，但是当树视图检查文件和文件夹加载到列表视图中时需要大量时间（21 分钟为 2GB）。这是一个问题。

如何在最短的时间内将文件和文件夹从树视图加载到列表视图以加快计算速度？

这是我的代码：

```
private void btnAddToListViewCheckedItem_Click(object sender, EventArgs e)
{
    foreach (TreeNode tn in tvLoadTreeviewFromListView.Nodes)
    {

        AddToListView(tn);
    }
}

private void AddToListView(TreeNode tn)
{

    {

        FileInfo file = new FileInfo(tn.Text);

        string[] suffix = { "B", "KB", "MB", "GB", "TB" };
        if (file.Exists)
        {
            int s = 0;
            long size = file.Length;
            while (size >= 1024)
            {
                NO_OF_FILES += 1;
                s++;
                size /= 1024;
            }

            String countFileSize = string.Format("{0}{1}", size, suffix[s]);

            ListViewItem item = lvLoadSelectedFileAndFolder.Items.Add(file.Name);

            item.ImageIndex= sysIcons.GetIconIndex(tn.Text);
            item.SubItems.Add(tn.Text);
            item.SubItems.Add(countFileSize);

        }

        foreach (TreeNode tnx in tn.Nodes)
        {

            for (int i = 0; i < lvLoadSelectedFileAndFolder.Items.Count; i++)
            {
                int ii = 1;
                if (tnx.Text == lvLoadSelectedFileAndFolder.Items[i].SubItems[ii].Text)
                {
                    return;

                }
            }

            if (tnx.Checked)
            {

                AddToListView(tnx);
            }

        }
    }
    catch (Exception ){}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T05:41:21.967

您的`suffix`数组基本上是一个常量，但每次`AddToListView`处理存在的文件名时都会在堆上重新分配。此外，在加载列表视图时暂停 UI 更新。尝试这个 ...

```
const string[] suffix = { "B", "KB", "MB", "GB", "TB" };

private void btnAddToListViewCheckedItem_Click(object sender, EventArgs e)
{
    try
    {
        lvLoadSelectedFileAndFolder.BeginUpdate();
        foreach (TreeNode tn in tvLoadTreeviewFromListView.Nodes)
        {
            AddToListView(tn);
        }
    }
    finally
    {
        lvLoadSelectedFileAndFolder.EndUpdate();
    }
} 
```

# c++ - 为什么 C++ 的 64 位整数扩展称为“long long”？

> ID：15331416
> 
> 赞同：1
> 
> 时间：2013-03-11T04:52:57.550
> 
> 标签：c++, types, 64-bit, long-integer, naming

与其他类型不同：“int”、“boolean”、“double”等。甚至自定义类，也只有一个词。它们的类型只有一个词，但是，只有整数使用两个词；它如何以及为什么会如此特别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-15T00:13:51.460

来自：***“[通往 64 位的漫漫长路](http://queue.acm.org/detail.cfm?id=1165766)”*** - John R. Mashey | 2006 年 10 月 1 日 - 主题：系统演进

“Algol 68 在 1968 年启发了**long long**，并且在某个时候它也被添加到了 GNU C 中。”

摘录：**年表：多个互锁线程**

*   1964 IBM S/360：*32*位，具有 24 位寻址（总共 16 MB）的真实（核心）内存。
*   1968 年 Algol 68：包括长长。[ **long long** for **int**，*还有* **long long real、compl、bits*和*bytes** ]
*   1970 DEC PDP-11/20：16 位、16 位寻址（总共**64** KB）。IBM S/370 系列：虚拟内存，24 位地址，但允许多个用户地址空间。
*   ...
*   1984 年摩托罗拉 MC68020：*32*位；*32*位寻址。
*   1984 C：Amdahl UTS（*32*位 S/370）使用 long long，特别是对于大文件指针。
*   1984 C：Convex（**64**位矢量微型超级计算机）使用 long long 表示**64**位整数。
*   1986 Intel：80386，32*位*，支持 8086 模式。
*   ...
*   1989 ANSI C（“C89”）：工作始于 1983 年，ANSI X3J11。
*   1992 SGI：推出第一台**64**位微型处理器 (MIPS R4000)；仍在运行*32*位操作系统。**64**位 C 工作组：讨论各种模型（**LP64**、**ILP64**、**LLP64**），几乎没有达成一致。
*   1992 年 12 月：推出**64**位 Alpha 系统，运行**64**位操作系统； **LP64**。
*   1994 SGI：在 Power Challenge 上运送 IRIX 6（ **64** / *32*操作系统；*ILP32LL* + **LP64 ）；**客户购买 4 GB+ 内存，使用它。DEC：在 DEC 7000 SMP 中发货 4 GB+（可能稍早一些）。
*   1995 Sun UltraSPARC：**64** / *32*位硬件，仅*32*位操作系统。HAL Computer 的**SPARC64**：使用C 语言的**ILP64**模型。
*   1995 年大文件峰会：将**64**位接口编码为大于 2 GB 的文件，即使在*32*位系统（ILP32LL+ **LP64**）中也是如此。
*   1994 Aspen group：支持C 的**LP64**模型，以便 Unix 供应商保持一致。
*   1996 HP：发布 PA-RISC **2.0，64**位。
*   ...

结束提取。

注意：标准[Algol68↗</a> 没有**用于**unicode/UTF16 的 long char ，也没有**long** long **char**，但是（方便地）**char**的大小不需要与**byte**的大小相同。有时 - “传统上” -**字符**小于 8 位，例如](http://algol68.sourceforge.net/) [6 位](http://en.wikipedia.org/wiki/Six-bit_character_code)（[ASCII](http://en.wikipedia.org/wiki/Six-bit_character_code#Examples_of_sixbit_ASCII_variants)或[GOST](http://en.wikipedia.org/wiki/GOST_10859#6-bit_code%3a_with_only_Latin_upper_case_letters)）或 7 位（例如[ASCII](http://en.wikipedia.org/wiki/ASCII)和现在[GSM_03.38](http://en.wikipedia.org/wiki/GSM_03.38)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T08:09:47.400

C 类型的命名方案最终似乎继承自古老的 Algol，它允许在诸如`int`or `real`（它是浮点数的名称）之类的类型之前使用任意数量的“短”或“长”前缀。当然，他们的解释是依赖于实现的，不能保证`long long long int`实际上比`long int`.

C 继承了前缀（至少对于整数来说，奇怪的是，他们为浮点数选择了更特别的东西），但当时并没有看到允许迭代它们的必要性。而且因为 C 在很多方面都相当松懈，所以它也允许`int`在`long int`.

随着 64 位机器的出现，在这个方案中只需要少量大小以及因此需要单个前缀的假设被打破，编译器开始支持`long long`. 重新发现此方案的部分原因可能是它不需要破坏新名称或关键字。C99 然后将这种类型作为标准的官方部分，C++ 后来继承了它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-28T06:23:25.333

实际上，正如我在“通往 64 位的漫漫长路”中所写

“大约在 1984 年的某个时候，Amdahl UTS 和 Convex 为 64 位整数添加了 long long，前者在 32 位架构上，后者在 64 位架构上。UTS 尤其将其用于长文件指针，这是相同的动机之一long 在 PDP-11 Unix (1977) 中。Algol 68 在 1968 年启发了 long long，它也被添加到 GNU C 中。许多人斥责这种语法，但至少它不再使用保留关键字。

我不知道 GCC 何时添加了 long long，但自从 GCC 1.0 于 1987 年发布以来，其他这些都更早。

实际上，这实际上是由“漫漫长路”中描述的 1992 年工作组决定的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T14:20:59.550

采用 C++ 和 C 标准的原因`long long`是 GCC 多年来一直在使用它，尽管它固有的丑陋，但现有的做法还是胜出。至于为什么 GCC 选择这个名字，你得问问他们。`<g>`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T04:55:17.677

`long long`区别于`long`，通常只有 4 个字节（32 位）。

`long`是一个修饰符，可用于许多原始类型来修改它们。

# c++ - 错误：“void (opca_hello::)()”类型的参数与“void* (*)(void*)”不匹配

> ID：15331422
> 
> 赞同：0
> 
> 时间：2013-03-11T04:53:51.727
> 
> 标签：c++, linux, pthreads

我为线程编写了一个非常简单的代码。由于我对此很陌生，因此我不知道提到的错误。

```
class opca_hello
{
 public:
void hello();
}

void opca_hello::hello()

{
printf ("hello \n");
}

int main(int argc, char **argv)
{
opca_hello opca;
pthread_t thread1, thread2;
pthread_create( &thread1, NULL, opca.hello, NULL);
pthread_join( thread1, NULL);
return 0;
} 
```

错误：“void (opca_hello::)()”类型的参数与“void* (*)(void*)”不匹配

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T05:09:33.560

对成员函数的 C++ 调用需要将指向 this 的指针与其余参数一起传递。

所以要使用线程编写这样的代码：

```
static void *start(void *a)
{
    opca_hello *h = reinterpret_cast<opca_hello *>(a);
    h->hello();
    return 0;
}

pthread_create( &thread1, NULL, start, &opca); 
```

PS：

如果您需要将参数传递给方法，请执行以下操作（例如）：

struct threadDetails { opca_hello *obj; 诠释 p; };

```
static void *start(void *a)
{
    struct threadDetails *td = reinterpret_cast<struct threadDetails *>(a);
    td->obj->hello(td->p);
    delete td;
    return 0;
} 
```

然后：

```
struct threadDetails *td = new struct threadDetails;
td->obj = &opca;
td->p = 500;
pthread_create( &thread1, NULL, start, td); 
```

# html - 弹出窗口未分配屏幕中心

> ID：15331423
> 
> 赞同：0
> 
> 时间：2013-03-11T04:54:01.703
> 
> 标签：html, css

我正在使用下面的代码来分配屏幕的确切中心。但它不起作用。弹出窗口根据 div 的大小出现在不同的位置。但我想在屏幕中央显示 div。

```
.pnl_renewal_res
{   
    background:White;
    position: absolute;
    top: 50%;
    left: 50%;
    margin:-50px 0 0 -100px; /* [-(height/2)px 0 0 -(width/2)px] */
    display: none;
    border:1px solid  #333333;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T04:56:51.563

尝试这个：

```
.pnl_renewal_res
{   
    background:White;
    position: absolute;
    top: 30%;
    left: 30%;
    right:30%;
    bottom:30%;
    display: none;
    border:1px solid  #333333;
} 
```

这将缩放您的弹出窗口，并为其提供维度。当您的容器是绝对的时，您不需要提供边距：顶部、右侧、左侧、底部值都可以。

如果要更改弹出窗口的高度和宽度，请更改百分比值。

此外，您可以将`height`, 和`width`与`top`and结合使用`left`

# c - fread 导致分段错误

> ID：15331426
> 
> 赞同：0
> 
> 时间：2013-03-11T04:54:40.190
> 
> 标签：c, fread

试图创建一个 1024 字节的随机数据文件。当我运行它时，我在 fread 行上得到一个分段错误错误。有人看到我做错了吗？谢谢！

```
#include <stdio.h>
#include <fcntl.h>
#include <unistd.h>
#include <stdlib.h>

#define PERMS 0666

int main() {

   char buf[1024];

   if (creat("test.txt", PERMS) < 0) {
       fprintf(stderr, "couldn't create file\n");
       exit(0);
   }

   char randomData[1024];
   FILE* fp;
   fp = (void*) open("/dev/urandom", O_RDONLY, PERMS);
   fprintf(stderr, "here\n");
   fread(&randomData, 1024, 1, fp);
   fclose(fp);

   return 0;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-11T04:55:49.687

`open`返回文件描述符，而不是`FILE *`指针。使用`fopen`：

```
fp = fopen("/dev/urandom", "r"); 
```

旁白：那个`(void *)`演员是怎么回事？它对你隐藏了错误。心理调试告诉我，您插入了强制转换以摆脱“赋值使指针在没有强制转换的情况下从整数”警告，但在这种情况下，这不是正确的解决方法。当你收到这样的奇怪警告时，你应该在随意插入疯狂演员表之前查看文档。

旁白2：您的程序不会将任何数据写入您的`test.txt`文件。实际上，无论如何，您都会泄漏您立即创建的文件描述符，因此它目前*无法*写入任何内容。即使您确实设法写入了您尝试从中读取的 1024 个字节`/dev/urandom`，它也不会是文本数据，因此该文件扩展名有点奇怪。

旁白3：你为什么首先使用`creat()`？它的[手册页](http://www.manpagez.com/man/2/creat/)非常清楚地说明“此界面已被废弃`open(2)`”。

# java - 点击android上的随机7位数字

> ID：15331435
> 
> 赞同：0
> 
> 时间：2013-03-11T04:55:32.020
> 
> 标签：java, android, random

我希望你能帮助我处理这段代码。我可以生成随机数，但不能精确计数。

问题是，单击按钮后如何生成 7 个随机数字？

请参考我下面的代码：

```
 public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        final Random myRandom = new Random();

        Button buttonGenerate = (Button)findViewById(R.id.generateme);
        final TextView textGenerateNumber = (TextView)findViewById(R.id.generatenumber);

        buttonGenerate.setOnClickListener(new OnClickListener(){

                 @Override
                 public void onClick(View v) {
                      // TODO Auto-generated method stub
                      textGenerateNumber.setText(String.valueOf(myRandom.nextInt()));
                  }
       });
  }
  } 
```

这是我的 XML 文件

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >

    <Button
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Generate Random number"
    android:id="@+id/generateme"
    />
    <TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:id="@+id/generatenumber"
    />
    </LinearLayout 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-07-18T10:23:07.333

尝试在此函数中使用 JAVA 的数学和随机类来生成具有“n”位数字的随机数。例如 7 位随机数。

```
private int nDigitRandomNo(int digits){
    int max = (int) Math.pow(10,(digits)) - 1; //for digits =7, max will be 9999999
    int min = (int) Math.pow(10, digits-1); //for digits = 7, min will be 1000000
    int range = max-min; //This is 8999999
    Random r = new Random(); 
    int x = r.nextInt(range);// This will generate random integers in range 0 - 8999999
    int nDigitRandomNo = x+min; //Our random rumber will be any random number x + min
    return nDigitRandomNo;
}
int digits = 7;
int n = nDigitRandomNo(digits);
//n will be a random number between 1000000 - 9999999 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T04:58:18.493

您可以使用倒数计时器。[http://developer.android.com/reference/android/os/CountDownTimer.html](http://developer.android.com/reference/android/os/CountDownTimer.html)

这是一个例子：[http ://sree.cc/google/android/android-timer-example](http://sree.cc/google/android/android-timer-example)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T05:21:02.293

修改您的代码如下：

```
 public class MainActivity extends Activity {
public  static int[] randomNumbers=new int[7];
public static byte[] sevenDigits=new byte[7];
private  static boolean status=true;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        final Random myRandom = new Random();
             genRandomNumbers();
        while(status);

        for (int  i : randomNumbers) {
            System.out.println(i);
        }
            System.out.println("seven digit random number : "+new String(sevenDigits));

        Button buttonGenerate = (Button)findViewById(R.id.generateme);
        final TextView textGenerateNumber = (TextView)findViewById(R.id.generatenumber);

        buttonGenerate.setOnClickListener(new OnClickListener(){

                 @Override
                 public void onClick(View v) {
                      // TODO Auto-generated method stub
                      textGenerateNumber.setText(String.valueOf(myRandom.nextInt()));
                  }
       });
  }

public  void genRandomNumbers() {
        new Thread(new Runnable() {

            @Override
            public void run() {

                Random random=new Random();
                while(true) {

                    for(int i=0; i<7 ;i++) {
                        randomNumbers[i]=random.nextInt(10);
                                            sevenDigits[i]=random.nextInt(10);
                    }
                    status=false;
                    try {
                        Thread.sleep(30000);
                    } catch (InterruptedException e) {                      
                        e.printStackTrace();
                    }

                }

            }
        }).start();
    }

  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T04:59:53.263

```
int[] rand = new int[7];
int ceiling = 100;  // for random numbers from 0 to 99
for (int i=0; i < rand.length; i++) {
    rand[i] = (int)Math.floor(ceiling*Math.rand());
} 
```

要定期执行，请查看这篇文章： [如何在 Android 中运行 Runnable 线程？](https://stackoverflow.com/questions/1921514/how-to-run-a-runnable-thread-in-android)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T05:04:11.343

您可以使用 Java [Random](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Random.html)类：

```
final int MAX_VALUE = 100;
Random rand = new Random();
int randValue1 = rand.nextInt(MAX_VALUE);
int randValue2 = rand.nextInt(MAX_VALUE); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-11T05:04:35.753

```
/** Returning the Random Numbers*/
public String random () throws NoSuchAlgorithmException {
    Random ranGen = new SecureRandom();
    byte[] randomno= new byte[8]; 
    ranGen.nextBytes(randomno);
    String str = new String(randomno, "UTF8");
    return str ;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-05-08T09:43:04.417

生成一个低于 1000 万的数字，然后将其格式化为 7 位数字：

```
public String gen7DigitNumber()
{
    Random rng = new Random();
    int val = rng.nextInt(10000000);
    return String.format("%07d", val);
} 
```

# javascript - 如何在 Windows 7 中使用 Nodejs？

> ID：15331440
> 
> 赞同：30
> 
> 时间：2013-03-11T04:56:06.510
> 
> 标签：javascript, html, node.js, webserver, websocket

我快要疯了，大多数示例仅显示如何在 linux 终端上运行它以及与服务器的通信。有人可以向我解释如何在 Windows 7 中使用 NodeJs（使其运行并加载所需的任何内容）吗？

并且请，我怎样才能将它与我的 HTML5 代码集成？

我真的很感谢你的回答

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-03-11T05:02:17.973

# android - 安卓全屏

> ID：15331443
> 
> 赞同：0
> 
> 时间：2013-03-11T04:56:14.930
> 
> 标签：android, android-layout, television

我正在使用 Eclipse 开发 Android 应用程序。我注意到一件事，那就是应用程序没有全屏显示。Android TV Box 中应用程序的边框周围有空白的黑色空间。我已经尝试了每个全屏属性（Match_Parent，fill_parent），但仍然没有成功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T05:23:27.703

使用您的活动名称在清单文件中添加主题。

```
 <activity
        android:name=".ActivityName"
        android:theme="@android:style/Theme.Black.NoTitleBar" >
    </activity> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T10:56:08.183

对于那些对 Android 电视盒有同样疑问的人，答案是进入设置然后显示。它包含显示位置选项，您可以在其中设置放大和缩小属性以拉伸或压缩屏幕显示。

# python - 附加单元格后，在 CSV 文件中查找五个不同类别的最小值和最大值

> ID：15331452
> 
> 赞同：0
> 
> 时间：2013-03-11T04:57:26.097
> 
> 标签：python, csv, max, min

大家好，我有一个问题。我刚刚学习最小值和最大值。

我无法找到每个类别的五列的最小值和最大值

这是我所拥有的：

我将 5 列 26 列数据从 csv 文件移动到 txt 文件。

例如 .csv 的附加单元格就像

```
state          car      motorcycle   van        airplane       bike 
Maine          35.5      8.1         5.7         21.0%         33.2%
Michigan       47.9      9.1         5.5         20.40%        25.2%                   
Washington     52.5      1.2         4.6          3.50%        24.7%                     
Denver         21.8      20.5        5.3          2.90%        30.9% 
```

我如何让最小值和最大值看起来像这样

```
 min                       max
car             Denver:      21.8          Washington: 52.5   
motor           Washington:  1.2           Denver:     20.5 
van             Washington   4.6           Maine:       5.7 
airplane        Denver       2.90%         Maine       21.0% 
bike            Washington   24.7%         Maine      33.2%                    - 
```

这是我所拥有的

```
import csv
import string, re
import operator

output = []
data = []
csv_string = []
data_file = []

try:
    with open('data.csv', 'r') as csv_string:
         for line in csv_string:
             cells = line.split(",")
             output.append((cells[0], cells[1], cells[5], cells[7], cells[11], cells[13]))
                         for lines in output:

            #state = cells[0]

            zmin = cells[1]   #car = cells[1]
            ymin = cells[1]
            xmin = cells[5]   #motor = cells[5] 
            wmin = cells[5]
            vmin = cells[7]   #van = cells[7]
            zmax = cells[7]
            ymax = cells[11]  #airplane = cells[11]
            xmax = cells[11]
            wmax = cells[13]  #bike = cells[13] 
            vmax = cells[13]

        if cells[1] < xmin: 
            zmin = cells[1] 
        if cells[1] > xmax: 
            zmax = cells[1]

        if cells[5] < ymin: 
            ymin = cells[5]
        if cells[5] > ymax: 
            ymax = cells[5]

        if cells[7] < zmin:
            xmin = cells[7]
        if cells[7] > zmax: 
            xmax = cells[7] 

        if cells[11] < zmin:
            wmin = cells[11]
        if cells[11] > zmax: 
            wmax = cells[11]

        if cells[13] < zmin:
            vmin = cells[13]
        if cells[13] > zmax: 
            vmax = cells[13]

        outstring = ' '
    for item in output:
            for cell in item:
                outstring += "{0:<35}".format(cell) #Width/Distance of each row
            outstring += "\n"

    print(outstring)

    print('Min: ',zmin,ymin,xmin,wmin,vmin)

    print('Max: ',state,zmax,ymax,xmax,wmax,vmax) 

  finally:
          f.close()

try:    
    f_write = open('output.txt', 'w') #creates the file
    try:
        f_write.writelines(outstring)

  finally:
          f.close() 
```

我不确定我做错了什么。我一直在阅读 min 和 max 但我不明白这在附加 5 列时如何应用于 .csv 文件。

如果有人可以提供一些指导，谢谢您的意见。

程序打印错误的数字

```
 print('Min: ',zmin,ymin,xmin,wmin,vmin)
      47.9,  8.1, 5.5, 20.40%, 25.2% 
 print('Max: ',state,zmax,ymax,xmax,wmax,vmax) 
      21.8, 9.1, 4.6, 20.40%, 30.9% 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T06:52:04.197

使用[`pandas`](http://pandas.pydata.org/)- 为此类数据操作设计的库，任务变得更加简单：

```
import pandas as pd

c = lambda x: float(x.strip('%'))
df = pd.read_csv(f,sep='\s+', converters = {'bike':c, 'airplane':c})

vehicles = df.columns[1:]  #['car', 'motorcycle', 'van', 'airplane', 'bike']

max_v = zip(df['state'][df[vehicles].idxmax().values], 
            df[vehicles].max().values.astype('|S4'))
min_v = zip(df['state'][df[vehicles].idxmin().values],
            df[vehicles].min().values.astype('|S4'))

max_i = [': '.join(tup) for tup in max_v]
min_i = [': '.join(tup) for tup in min_v]

print pd.DataFrame({'min':min_i, 'max':max_i}, index=vehicles) 
```

出去：

```
 max               min
car         Washington: 52.5      Denver: 21.8
motorcycle      Denver: 20.5   Washington: 1.2
van               Maine: 5.7   Washington: 4.6
airplane         Maine: 21.0       Denver: 2.9
bike             Maine: 33.2  Washington: 24.7 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T06:26:27.717

通过使用 Python 的内置`csv`模块，您可以完成大部分所需的工作。以下是如何找到数据的字段（或列）列表的最小值和最大值。显示的示例`data.csv`文件的内容仅包含感兴趣的字段，但可以包含所有 26 列数据，而不会影响仅处理`FIELDS`列表中出现名称的字段的代码。

```
import csv

ID = 'state'
FIELDS = ['car', 'motorcycle', 'van', 'airplane', 'bike']
MIN_ID, MIN, MAX_ID, MAX = 0, 1, 2, 3  # indices of data in min_maxes records

with open('data.csv', 'rb') as csv_file:
    csv_dict_reader = csv.DictReader(csv_file, delimiter=',')

    # initialize min and max values from first row of csv file
    row = csv_dict_reader.next()
    min_maxes = {field: [row[ID], float(row[field])]*2 for field in FIELDS}

    # update min and max values with data from remaining rows of csv file
    for row in csv_dict_reader:
        for id, value, min_max_rec in (
                (row[ID], float(row[field]), min_maxes[field]) for field in FIELDS):
            if value < min_max_rec[MIN]:
                min_max_rec[MIN_ID] = id
                min_max_rec[MIN]    = value
            if value > min_max_rec[MAX]:
                min_max_rec[MAX_ID] = id
                min_max_rec[MAX]    = value

print '                   min                  max'
for field in FIELDS:
    min_max_rec = min_maxes[field]
    print '{:10}    {:12}{:4.1f}      {:12}{:4.1f}'.format(field,
              min_max_rec[MIN_ID]+':', min_max_rec[MIN],
              min_max_rec[MAX_ID]+':', min_max_rec[MAX]) 
```

输入（简化`data.csv`文件）：

```
state,car,motorcycle,van,airplane,bike
Maine,35.5,8.1,5.7,21.0,33.2
Michigan,47.9,9.1,5.5,20.40,25.2
Washington,52.5,1.2,4.6,3.,24.7
Denver,21.8,20.5,5.3,2.90,30.9 
```

输出：

```
 min                  max
car           Denver:     21.8      Washington: 52.5
motorcycle    Washington:  1.2      Denver:     20.5
van           Washington:  4.6      Maine:       5.7
airplane      Denver:      2.9      Maine:      21.0
bike          Washington: 24.7      Maine:      33.2 
```

# c# - 批量更新 SQL 服务器的 C# 代码

> ID：15331462
> 
> 赞同：1
> 
> 时间：2013-03-11T04:58:27.470
> 
> 标签：c#, .net, sql-server, c#-4.0, generics

我们有这个 C# 代码，它将根据结构中的标志更新 SQL Server 数据库表。

```
public struct stSRK
{ 
    public string Sno;
    public string SClaimID;
    public bool SType;
    public string SText; 
} 
```

结构中的数据一次最多可以包含 5000-10000 条记录。目前我们正在使用以下 C# 代码来更新数据库，它会根据结构进行“n”次数据库调用。将有助于有一种替代方法来使用相同的 struct 进行批量更新。请看下面的方法

```
public int UpdateClaims(List<stSRK> _lt, string strClaimType)
{
try
{
    int iCount = 0;
    for (int i = 0; i < _lt.Count; i++)
        {
            if (_lt[i].sType == true)
            {
                if (_lt[i].SText == 'A')
                {
                iCount += Convert.ToInt16(SQL.ExecuteSQL("UPDATE table SET ClaimType = '" + strClaimType + "' WHERE 
                    (Sno = '" + _lt[i].Sno + "' AND ClaimID = '" + _lt[i].SClaimID + "')"));
                }
                else
                {
                iCount += Convert.ToInt16(SQL.ExecuteSQL("UPDATE table SET ClaimType = '" + strClaimType + "' WHERE 
                    (Sno = '" + _lt[i].Sno + "' AND ClaimID = '" + _lt[i].SClaimID + "')"));
                }
            }
            else
            {
                if (_lt[i].SText == 'B')
                {
                iCount += Convert.ToInt16(SQL.ExecuteSQL("UPDATE table SET ClaimType = '" + strClaimType + "' WHERE 
                    (Sno = '" + _lt[i].Sno + "' AND ClaimID = '" + _lt[i].SClaimID + "')"));
                }
                else
                {
                iCount += Convert.ToInt16(SQL.ExecuteSQL("UPDATE table SET ClaimType = '" + strClaimType + "' WHERE 
                    (Sno = '" + _lt[i].Sno + "' AND ClaimID = '" + _lt[i].SClaimID + "')"));
                }
            }
        return iCount;
        }
catch (Exception e)
{
    throw e.Message;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-18T11:05:04.323

对于所有情况，您的查询似乎都是相同的..

你不能重写你的代码来只构建一个 SQL 语句吗？

像这样的东西：

```
public int UpdateClaims(List<stSRK> _lt, string strClaimType)
{
    try
    {
        string allSno = String.Join(",", _lt.Select(l=> l.Sno.ToString()).ToArray());
        string allClaimID = String.Join(",", _lt.Select(l=> l.SClaimID.ToString()).ToArray());

        // Warning: NOT Production code, SQLInjection hazard!
        return Convert.ToInt16(SQL.ExecuteSQL("UPDATE table SET ClaimType = '" + strClaimType + @"' WHERE 
                        (Sno IN(" + allSno + ") AND ClaimID IN(" + allClaimID + "))"));
    catch (Exception e)
    {
        //This is not a good idea, as this way you loose all innerException 
        // information about the exception. And you might just want to remove 
        // the try-catch alltogether if you just rethrow the exception.
        throw e.Message;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-13T10:16:52.090

我的代码：

```
 DataTable tblDetails = new DataTable("tblPlanDetail");

        tblDetails.Columns.Add("row1").DataType = typeof(Int32);
        tblDetails.Columns.Add("row2").DataType = typeof(DateTime);
        tblDetails.Columns.Add("row3").DataType = typeof(String); ;
        tblDetails.Columns.Add("row4").DataType = typeof(Int32); ;

        for (int i = 0; i < table.Rows.Count; i++)
        {

            for (int j = 1; j <= DateTime.DaysInMonth(monthYear.Year, monthYear.Month); j++)
            {
                DataRow row = tblDetails.NewRow();

                DateTime DayOfMonth = new DateTime(monthYear.Year, monthYear.Month, j);
                row["row1"] = idPlan;
                row["row2"] = DayOfMonth;
                row["row3"] = table.Rows[i][0];
                row["row4"] = Int32.Parse((string)table.Rows[i][j]);

                tblDetails.Rows.Add(row);
            }
        }

        try
        {

            SqlBulkCopy sqlbulk = new SqlBulkCopy(connection, SqlBulkCopyOptions.KeepIdentity, transaction);
            sqlbulk.ColumnMappings.Add("row1", "row1");
            sqlbulk.ColumnMappings.Add("row2", "row2");
            sqlbulk.ColumnMappings.Add("row3", "row3");
            sqlbulk.ColumnMappings.Add("row4", "row4");

            sqlbulk.DestinationTableName = "tblPlanDescription";
            sqlbulk.BatchSize = 2;
            sqlbulk.WriteToServer(tblDetails);
            transaction.Commit();
        }
        catch (Exception exp)
        {

            transaction.Rollback();
        }
        finally
        {
            transaction.Dispose();
            connection.Close();
        } 
```

那是批量插入。您可以将其插入临时表。然后您可以执行 SP，它将在服务器端创建必要的索引并更新必要的数据

看[这里](https://stackoverflow.com/questions/4889123/any-way-to-sqlbulkcopy-insert-or-update-if-exists)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T05:01:45.653

尝试使用 linq 查询进行批量更新。这将提高应用程序的性能。

您可以在此处获得有关大规模更新 linq 查询的帮助：

[如何在 Linq 中运行批量更新/删除查询？](https://stackoverflow.com/questions/1952677/how-to-run-a-mass-update-delete-query-in-linq)

[http://msdn.microsoft.com/en-us/library/bb399339.aspx](http://msdn.microsoft.com/en-us/library/bb399339.aspx)

希望这会帮助你。

# r - X 轴与条形图不匹配

> ID：15331472
> 
> 赞同：7
> 
> 时间：2013-03-11T04:59:43.957
> 
> 标签：r, plot

我使用 barplot() 函数从矩阵创建堆积图。

矩阵看起来像这样：

```
1 0.989013 0.010987
2 0.999990 0.000010
3 0.999990 0.000010
4 0.999990 0.000010 
```

创建堆叠图表的代码如下所示：

```
barplot(t(as.matrix(x)), col=c("cyan", "black")) 
```

问题是我想在某些点创建带有刻度和标签的自定义 x 轴。我使用以下方法创建 x 轴：

```
axis(1, at=keyindexes, labels=unique(t$V4), tck=-0.01) 
```

其中 keyindexes 是我需要有刻度的条形编号向量，而 unique(t$V4) 是包含每个刻度的唯一名称的向量。

现在的问题是 x 轴与图表区域不匹配并且明显更短。任何人都可以建议如何使 x 轴更长？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-11T06:02:22.213

轴标签的问题实际上是条形不是以整数为中心的。例如，制作一些有 10 行的数据并用`barplot()`. 然后`axis()`在从 1 到 10 的数字处添加 x 轴。

```
set.seed(1)
x<-data.frame(v1=rnorm(10),v2=rnorm(10))
barplot(t(as.matrix(x)), col=c("cyan", "black"))
axis(1,at=1:10) 
```

![在此处输入图像描述](../Images/3da2257877cb823f484e1c6ec66ff3fb.png)

现在轴文本不在正确的位置。

为了纠正这个问题，`barplot()`应该保存为对象，并且这个对象应该用作`at=`轴中的值。

```
m<-barplot(t(as.matrix(x)), col=c("cyan", "black"))
m
 [1]  0.7  1.9  3.1  4.3  5.5  6.7  7.9  9.1 10.3 11.5
axis(1, at=m,labels=1:10) 
```

![在此处输入图像描述](../Images/4afa886af45272c13a7281b6d106c7c9.png)

## 编辑 - 仅绘制一些刻度

如果只应绘制一些轴刻度文本，那么您可以`m`对所需的值进行子集化，并提供相同长度的`labels=`. 在此示例中，仅注释了 1.、5\. 和 10\. 条。

```
m<-barplot(t(as.matrix(x)), col=c("cyan", "black"))
lab<-c("A","B","C")
axis(1, at=m[c(1,5,10)],labels=lab) 
```

![在此处输入图像描述](../Images/a7e1c0292bace911c1baca34927b7b42.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T01:28:23.100

查看`updateusr`TeachingDemos 包中的函数。此功能将更改或“更新”绘图的用户坐标。该示例显示了更改条形图的 x 轴坐标以匹配附加绘图的直观值。

# php - 通过php发送html表单数据到sql数据库（使用mysqli）

> ID：15331477
> 
> 赞同：13
> 
> 时间：2013-03-11T05:00:03.623
> 
> 标签：php, html, sql, forms, mysqli

我想将输入到 html 表单中的数据发送到我的 sql 数据库，即创建一个新行，将某些值归因于某些列。我知道有类似的问题，我阅读了答案，但似乎没有任何效果。

send_post.php

```
<?php
//Connecting to sql db.
$connect = mysqli_connect("my host","my user","my passwrod","my db");
//Sending form data to sql db.
mysqli_query($connect,"INSERT INTO posts (category, title, contents, tags)
VALUES ('$_POST[post_category]', '$_POST[post_title]', '$_POST[post_contents]', '$_POST[post_tags]')";
?> 
```

post.html#form

```
<form onSubmit="send_post.php" method="post">
    <h3>Category:</h3>
    <input type="text" name="post_category">
    <h3>Post title:</h3>
    <input type="text" name="post_title">
    <h3>Post tags (a,b,c...):</h3>
    <input type="text" name="post_tags">
    <h3>Post (use html):</h3>
    <textarea rows="20" cols="50" name="post_contents"></textarea>
    <input type="submit">
</form> 
```

我的数据库“帖子”表列：

```
pid
title
contents
tags
category 
```

`pid`有`auto_increment`_

我已经尝试以`pid`“正确”的顺序将值发送到所有列，包括 , 。

这`mysqli_connect`部分不是问题，因为我从我的另一个有效的 .php 文件中复制了它。

服务器 php-sql 兼容性也不是问题，因为我成功地让不同的 .php 文件从数据库中检索数据（手动插入的数据）。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-11T05:03:46.010

改变这个

```
<form onSubmit="send_post.php" method="post"> 
```

到

```
<form action="send_post.php" method="post"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-16T12:51:16.363

```
$connect = mysqli_connect("my host","my user","my password","my db"); 
```

不要忘记纠正所有拼写错误，当您不知道出了什么问题时可能会很麻烦。（密码拼错为密码）

# php - 事件日历的数据库大小

> ID：15331478
> 
> 赞同：1
> 
> 时间：2013-03-11T05:00:04.830
> 
> 标签：php, javascript, mysql

我正在使用 php 和 mysql 在事件日历上做一个项目。

我怀疑，当我们尝试在每天的每个小时中包含事件时，它会使数据库变得庞大。因为我们需要每天查看/参考过去和未来的事件。有时，我们需要一些事件持续更多天。那么，在这种情况下，我们可以使用什么技术来保持数据库的大小呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T05:04:14.583

这是我最近用于一个项目的表结构：

```
CREATE TABLE `event` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(255) DEFAULT NULL,
  `description` text,
  `startdate` datetime DEFAULT NULL,
  `enddate` datetime DEFAULT NULL,
  `location` text,
  `price` double(8,2) DEFAULT NULL,
  `user_id` int(11) DEFAULT NULL,
  `created_date` datetime DEFAULT NULL,
  `seats` int(11) NOT NULL,
  `show_map` tinyint(1) DEFAULT '1',
  `latitude` varchar(65) DEFAULT NULL,
  `longitude` varchar(65) DEFAULT NULL,
  `contact` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8; 
```

事件在开始日期和结束日期之间的日历上绘制，这将事件保持在一行。MySQL 能够处理数百万行，所以我认为您不会用完空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T05:43:50.077

你为什么关心每小时存储“东西”。存储事件的开始和结束时间。对于一整天的事件，将开始设置为午夜，并在第二天午夜结束。然后您的数据库与事件数量成比例增长；与一天中的小时数不成比例。而且您不可能逃脱将所有事件存储在“某处”

# java - Android 应用程序崩溃 - 我创建对象的地方是原因

> ID：15331486
> 
> 赞同：0
> 
> 时间：2013-03-11T05:01:15.230
> 
> 标签：java, android, touch

我正在学习制作android应用程序，所以请帮助我。我正在制作一些应用程序来学习触摸输入。所以我决定从获取触摸位置开始。

我做了这个应用程序

```
public class MainActivity extends Activity {
    public final static String EXTRA_MESSAGE = "in.manas.anurag.firstapp.MESSAGE";
    final TextView textView = (TextView)findViewById(R.id.textView);

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        final View touchView = findViewById(R.id.touchView);
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
            textView.setText("Touch coordinates : " +
            String.valueOf(event.getX()) + "x" + String.valueOf(event.getY()));
            return true;
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

} 
```

当我使用模拟器运行这个应用程序时，它崩溃了。然而，应用程序中的一个小变化（即从类中删除“final TextView textView = (TextView)findViewById(R.id.textView);”并将其作为函数 onTouch 的一部分使应用程序工作）

有人可以解释为什么第一个代码不起作用吗？

谢谢你。

-- 正确代码：

```
public class MainActivity extends Activity {
    public final static String EXTRA_MESSAGE = "in.manas.anurag.firstapp.MESSAGE";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        final View touchView = findViewById(R.id.touchView);
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
            final TextView textView = (TextView)findViewById(R.id.textView);
            textView.setText("Touch coordinates : " +
            String.valueOf(event.getX()) + "x" + String.valueOf(event.getY()));
            return true;
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T05:09:42.337

下面的代码将工作

```
public class MainActivity extends Activity {
    public final static String EXTRA_MESSAGE = "in.manas.anurag.firstapp.MESSAGE";
    TextView textView;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        final View touchView = findViewById(R.id.touchView);
        textView = (TextView)findViewById(R.id.textView);
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
            textView.setText("Touch coordinates : " +
            String.valueOf(event.getX()) + "x" + String.valueOf(event.getY()));
            return true;
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
       // getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

} 
```

您的代码未运行的答案是您正在尝试实例化视图

```
 final TextView textView = (TextView)findViewById(R.id.textView); 
```

前 `setContentView(R.layout.activity_main);`

在使用之前，`view id`我们必须告诉`layout`它应该从哪个实例化视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T05:11:41.487

在第一个代码中，您将**findViewById**放在类的全局变量中。但是只有在调用**setViewContent之后才能调用****findViewById**。 **onTouchEvent在****setContentView**之后被调用，所以它可以工作。

 ******所以这会起作用：

```
public class MainActivity extends Activity {
public final static String EXTRA_MESSAGE = "in.manas.anurag.firstapp.MESSAGE";
final TextView textView;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    // this is the place for calling findViewById
    textView = (TextView)findViewById(R.id.textView);
    final View touchView = findViewById(R.id.touchView);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T05:09:04.817

你可以这样做，如果你想能够在`TextView`任何地方使用你的。

```
public final static String EXTRA_MESSAGE = "in.manas.anurag.firstapp.MESSAGE";
TextView textView;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    final View touchView = findViewById(R.id.touchView);
    textView = (TextView)findViewById(R.id.textView); // after the setContentView
}

@Override
public boolean onTouchEvent(MotionEvent event) {
        // set the co-ordinates to the textView.
        textView.setText("Touch coordinates : " +
        String.valueOf(event.getX()) + "x" + String.valueOf(event.getY()));
        return true;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T05:14:59.520

早期崩溃的原因是您在加载类时尝试访问视图 (findViewById)。当您调用 setContentView() 时，视图对象将在稍后可用 您在调用 onCreate() 时为该活动设置视图很晚，同时在类加载时访问它。******

# java - 使用 Class.forName(..).getInstance 时带有 Junit 的 ClassNotFoundException 而 new() 工作正常

> ID：15331487
> 
> 赞同：3
> 
> 时间：2013-03-11T05:01:18.213
> 
> 标签：java, unit-testing, ant, junit, classnotfoundexception

我在`ClassNotFoundException`用junit运行测试时得到：

我有一堆测试 Class Main 的测试用例。Main 类有一个方法，该方法接受一个表示数据类型的字符串，并在内部使用`Class.forName( argument ).newInstance()`. 现在，当我手动测试时，这些方法本身可以正常工作。但是在使用 junit 运行测试用例时，我得到`ClassNotFoundException`（在方法中）传入的数据类型。

然后我在正在测试的方法中添加了一行：new MyDataType。奇怪的是，当我创建实例的后续行`Class.forName( MyDataType ).newInstance()`失败时，操作成功了。

```
Class Main{

public void someMethod( String dataType ){
new MyDataType();   // suceeds
Class.forName( dataType ).newInstance(); // got Exception when dataType = "MyDataType"
}
} 
```

为什么是这样？当我用谷歌搜索时，我发现许多答案表明`MyDataType.class`可能不在`classpath`. 我认为这里不是这种情况，因为 new`MyDataType()`运行良好。

我的运行时和构建时类路径包括包含所需类的 jar。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T05:04:08.347

尝试给出[方法](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Class.html#forName%28java.lang.String%29)所需的完整限定名：

```
Class.forName("com.package.where.class.exists.MyDataType").newInstance(); 
```

# asp.net-mvc-4 - 角色管理器功能尚未启用。MVC 4

> ID：15331488
> 
> 赞同：7
> 
> 时间：2013-03-11T05:01:20.443
> 
> 标签：asp.net-mvc-4

当我在包管理器控制台中更新我的数据库时出现该错误这是我的配置类和 Web 配置角色管理器功能尚未启用。请帮我

我的配置类

```
 namespace TechFactorsLMSV2.Migrations
 {
 using System;
 using System.Data.Entity;
 using System.Data.Entity.Migrations;
 using System.Linq;
 using System.Web.Security;
 using TechFactorsLMSV2.Models;
 using WebMatrix.WebData;

internal sealed class Configuration : DbMigrationsConfiguration<TechFactorsLMSV2.Models.LMSDBContext>
{
    public Configuration()
    {
        AutomaticMigrationsEnabled = false;
    }

    protected override void Seed(TechFactorsLMSV2.Models.LMSDBContext context)
    {
        context.Schools.AddOrUpdate(d => d.SchoolName,
               new School() { SchoolName = "School 1" },
               new School() { SchoolName = "School 2" },
               new School() { SchoolName = "School 3" }
               );

        SeedMembership();
    }

    private void SeedMembership()
    {
        WebSecurity.InitializeDatabaseConnection("DefaultConnection",
            "UserProfile", "UserId", "UserName", autoCreateTables: true);
        var roles = (SimpleRoleProvider)Roles.Provider;
        var membership = (SimpleMembershipProvider)Membership.Provider;

        if (!roles.RoleExists("Admin"))
        {
            roles.CreateRole("Admin");
        }
        if (membership.GetUser("kadadmin", false) == null)
        {
            membership.CreateUserAndAccount("kadadmin", "password");
        }
        if (!roles.GetRolesForUser("kadadmin").Contains("Admin"))
        {
            roles.AddUsersToRoles(new[] { "sallen" }, new[] { "admin" });
        }
    }
}
} 
```

我的网络配置

```
 <?xml version="1.0"?>

<configuration>
<configSections>
<sectionGroup name="system.web.webPages.razor"     type="System.Web.WebPages.Razor.Configuration.RazorWebSectionGroup, System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
  <section name="host" type="System.Web.WebPages.Razor.Configuration.HostSection, System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" />
  <section name="pages" type="System.Web.WebPages.Razor.Configuration.RazorPagesSection, System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" />
</sectionGroup>
 </configSections>
 <connectionStrings>
<add name="DefaultConnection" connectionString="Data Source=(LocalDb)\v11.0;Initial    Catalog=aspnet-TechFactorsLMSV2;Integrated  Security=SSPI;AttachDBFilename=|DataDirectory|\TechFactorsLMSV2.mdf"   providerName="System.Data.SqlClient"  />
  </connectionStrings>

<system.web.webPages.razor>
<host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc,   Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
<pages pageBaseType="System.Web.Mvc.WebViewPage">
  <namespaces>
    <add namespace="System.Web.Mvc" />
    <add namespace="System.Web.Mvc.Ajax" />
    <add namespace="System.Web.Mvc.Html" />
    <add namespace="System.Web.Optimization"/>
    <add namespace="System.Web.Routing" />
  </namespaces>
</pages>

</system.web.webPages.razor>

<appSettings>
<add key="webpages:Enabled" value="false" />
</appSettings>

 <system.web>
 <httpHandlers>
  <add path="*" verb="*" type="System.Web.HttpNotFoundHandler"/>
 </httpHandlers>

 <!--
    Enabling request validation in view pages would cause validation to occur
    after the input has already been processed by the controller. By default
    MVC performs request validation before a controller processes the input.
    To change this behavior apply the ValidateInputAttribute to a
    controller or action.
-->
<pages
    validateRequest="false"
    pageParserFilterType="System.Web.Mvc.ViewTypeParserFilter, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"
    pageBaseType="System.Web.Mvc.ViewPage, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"
    userControlBaseType="System.Web.Mvc.ViewUserControl, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
  <controls>
    <add assembly="System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" namespace="System.Web.Mvc" tagPrefix="mvc" />
  </controls>
</pages>

<roleManager enabled="true" defaultProvider="simple">
  <providers>
    <clear/>
    <add name="simple" type="WebMatrix.WebData.SimpleRoleProvider, 
                         WebMatrix.WebData"/>
  </providers>
</roleManager>
<membership defaultProvider="simple">
  <providers>
    <clear/>
    <add name="simple" type="WebMatrix.WebData.SimpleMembershipProvider,
                         WebMatrix.WebData"/>
  </providers>
</membership>

</system.web>

<system.webServer>
<validation validateIntegratedModeConfiguration="false" />

<handlers>
  <remove name="BlockViewHandler"/>
  <add name="BlockViewHandler" path="*" verb="*" preCondition="integratedMode" type="System.Web.HttpNotFoundHandler" />
</handlers> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-20T15:47:44.060

您需要将此添加到 system.web 部分下的 web.config

```
<roleManager enabled="true" defaultProvider="SimpleRoleProvider">
      <providers>
        <clear/>
        <add name="SimpleRoleProvider" type="WebMatrix.WebData.SimpleRoleProvider, WebMatrix.WebData"/>
      </providers>
    </roleManager>
    <membership defaultProvider="SimpleMembershipProvider">
      <providers>
        <clear/>
        <add name="SimpleMembershipProvider" 
             type="WebMatrix.WebData.SimpleMembershipProvider, WebMatrix.WebData"/>
      </providers>
    </membership> 
```

# javascript - Javascript onclick，引发无法捕获的异常

> ID：15331489
> 
> 赞同：1
> 
> 时间：2013-03-11T05:01:20.957
> 
> 标签：javascript, html, exception, dom-events

我有这段代码，但由于某种原因它不起作用。我试图查看 Google Chrome Javascript 控制台，看起来它正在引发某种异常。但是当抛出异常时，页面会刷新，所以我看不到异常。有人可以帮忙吗？

```
 <section class="form_section">
                <label for="tag">Tags(Click to select)</label>
                <input type="text" placeholder="Enter tag name" id="tag_input" class="tag_input"/>
                <input type="button" value="Add" onclick="addTag()" title="Click to add tag"/>
                <section id="tags" class="tags"></section>
            </section>

var tags = new Array();

        function addTag()
        {
            var value = document.getElementById("tag_input").value;
            if(value.length > 0)
            {
                tags[value] = value;
                var temp = "<a href=\"\" onclick=\"removeTag(this); return false;\" class=\"tag_item\">" + value + "</a>";
                document.getElementById("tags").innerHTML += temp;
                document.getElementById("tag_input").value = "";
            }
        }
        function removeTag(obj)
        {
            console.log(obj);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T05:07:58.140

更正

`condole.log(obj);`必须是`console.log(obj);`并且 put`return false;`所以执行将在那里停止。

如果您不想添加，请`return false;`尝试添加如下链接，

```
var temp = "<a href=\"Javascrip:void(0);\" onclick=\"removeTag(this); return false;\" class=\"tag_item\">" + value + "</a>"; 
```

`Javascrip:void(0);`会为你做的。

# c++ - 用静态库替换dll

> ID：15331490
> 
> 赞同：2
> 
> 时间：2013-03-11T05:01:37.647
> 
> 标签：c++, dll, static, linker

**起点：** 我有一些 C++ 代码链接到第三方静态库，该库链接到 ws2_32.lib。

**目标：** 我正在研究将此 C++ 代码移植到本质上是 Win32 平台的嵌入式平台的方法，但它不允许任何 dll 并具有专有的 UDP 协议实现。

**策略：** 我想写一个模仿winsock API的静态库（或者至少是我关心的这个API的一个子集）。这些相关的 winsock 函数将作为嵌入式平台支持的专有 UDP 函数调用的包装器。

**假设：** 我可以将这个静态库链接到最终的可执行文件而不是 ws2_32.lib。

**问题：**

1.  我的假设是否正确/合理？
2.  如何机械地设置链接？

**我所做的：** 我只尝试在一个功能上这样做，但似乎无法链接。这是我在静态库中定义的：

```
unsigned short __stdcall htons(unsigned short hostshort) {
    return hostshort;
} 
```

当我链接时，我收到以下错误：

```
: error LNK2001: unresolved external symbol __imp__htons@4 
```

链接消息中的这个`__imp__`前缀是我不太明白的。dll 中定义的函数名称是否以某种特殊方式发生变化，我可以在静态库中伪造它以某种方式强制链接器链接到我的函数版本而不是 ws2_32.lib 中的函数吗？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T05:22:47.717

您不想走用专有网络堆栈替换 Winsock 的道路。

但是，如果您需要做的只是模拟简单的例程，例如`htons`，您可以侥幸逃脱。

您需要将例程标记为`extern "C"`，并且可能需要将它们标记为正在导出。

```
extern "C" 
{
__declspec(dllexport) 
unsigned short __stdcall htons(unsigned short a) { return a; }
} 
```

如果您不将它们标记为与 C 兼容的外部，则链接器会执行一些[名称 mangling](http://en.wikipedia.org/wiki/Microsoft_Visual_C%2B%2B_Name_Mangling)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T05:08:35.987

`__imp__`前缀表示它是对 DLL 函数的蹦床（尾调用）。这使得动态链接高效，因为在库加载和修复期间只有一个地方需要更改库函数的实际地址。`__declspec(dllimport)`编译器查找它是因为函数声明中使用了头文件。

您可以删除（可能通过宏）`dllimport`from或使用前缀`winsock2.h`定义您的实现。`_imp__`

# android - Android：在后台自动发送带附件的电子邮件

> ID：15331491
> 
> 赞同：14
> 
> 时间：2013-03-11T05:01:40.160
> 
> 标签：android, email, android-intent, android-service, email-attachments

我正在制作一个应用程序，允许用户拍照并通过电子邮件自动将其发送到他选择的电子邮件。到目前为止，我能够拍照并存储在 SD 卡中。现在我只需要从文件夹 (/sdcard/Pictures/PhotoSender/) 中获取图片并自动发送到用户请求的电子邮件的功能。我怎样才能做到这一点？

我在那个文件夹里有图片。我只需要一些功能来生成电子邮件，将图片（.jpg）作为附件发送（所有这些都在后台）。当电子邮件完全发送完毕后，应该会弹出一个祝酒词“上传完成”。同时用户应该可以自由拍摄更多的照片，所以上传请求应该放在一个队列中。用户不应使用他的电子邮件帐户登录以发送。如果需要，我可以为我的应用创建一个电子邮件帐户作为“发件人”。请帮我！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-11T05:15:13.953

下面是一个完整的类，它支持在 Android 中发送带附件的电子邮件

这是一个实用功能，用于发送带有附件的邮件，在您的情况下，附件只是图片文件的完整路径

```
public static boolean sendEmail(String to, String from, String subject,                                          
                               String message,String[] attachements) throws Exception {     
    Mail mail = new Mail();
    if (subject != null && subject.length() > 0) {
        mail.setSubject(subject);
    } else {
        mail.setSubject("Subject");
    }

    if (message != null && message.length() > 0) {
        mail.setBody(message);
    } else {
        mail.setBody("Message");
    }

    mail.setTo(new String[] {to});

    if (attachements != null) {
        for (String attachement : attachements) {       
            mail.addAttachment(attachement);
        }
    }
    return mail.send();
} 
```

`Mail`这是上述函数中使用的完整类

```
import java.io.File;
import java.util.Date;
import java.util.Properties;

import javax.activation.CommandMap;
import javax.activation.DataHandler;
import javax.activation.DataSource;
import javax.activation.FileDataSource;
import javax.activation.MailcapCommandMap;
import javax.mail.BodyPart;
import javax.mail.Multipart;
import javax.mail.PasswordAuthentication;
import javax.mail.Session;
import javax.mail.Transport;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeBodyPart;
import javax.mail.internet.MimeMessage;
import javax.mail.internet.MimeMultipart;

public class Mail extends javax.mail.Authenticator {
private String user;
private String password;

private String[] to;
private String from;

private String port;
private String sport;

private String host;

private String subject;
private String body;

private boolean _auth;

private boolean _debuggable;

private Multipart multipart;

public String getPassword() {
    return password;
}

public void setPassword(String password) {
    this.password = password;
}

public String[] getTo() {
    return to;
}

public void setTo(String[] to) {
    this.to = to;
}

public String getFrom() {
    return from;
}

public void setFrom(String from) {
    this.from = from;
}

public String getHost() {
    return host;
}

public void setHost(String host) {
    this.host = host;
}

public String getSubject() {
    return subject;
}

public void setSubject(String subject) {
    this.subject = subject;
}

public Multipart getMultipart() {
    return multipart;
}

public void setMultipart(Multipart multipart) {
    this.multipart = multipart;
}

public Mail() {
    host = "smtp.googlemail.com"; // default smtp server
    port = "465"; // default smtp port
    sport = "465"; // default socketfactory port

    user = ""; // username
    password = ""; // password
    from = ""; // email sent from
    subject = ""; // email subject
    body = ""; // email body

    _debuggable = false; // debug mode on or off - default off
    _auth = true; // smtp authentication - default on

    multipart = new MimeMultipart();

    // There is something wrong with MailCap, javamail can not find a
    // handler for the multipart/mixed part, so this bit needs to be added.
    MailcapCommandMap mc = (MailcapCommandMap) CommandMap
            .getDefaultCommandMap();
    mc.addMailcap("text/html;; x-java-content-handler=com.sun.mail.handlers.text_html");
    mc.addMailcap("text/xml;; x-java-content-handler=com.sun.mail.handlers.text_xml");
    mc.addMailcap("text/plain;; x-java-content-handler=com.sun.mail.handlers.text_plain");
    mc.addMailcap("multipart/*;; x-java-content-handler=com.sun.mail.handlers.multipart_mixed");
    mc.addMailcap("message/rfc822;; x-java-content-handler=com.sun.mail.handlers.message_rfc822");
    CommandMap.setDefaultCommandMap(mc);
}

public Mail(String user, String pass) {
    this();

    this.user = user;
    password = pass;
}

public boolean send() throws Exception {
    Properties props = _setProperties();

    if (!user.equals("") && !password.equals("") && to.length > 0
            && !from.equals("") && !subject.equals("") && !body.equals("")) {
        Session session = Session.getInstance(props, this);

        MimeMessage msg = new MimeMessage(session);

        msg.setFrom(new InternetAddress(from));

        InternetAddress[] addressTo = new InternetAddress[to.length];
        for (int i = 0; i < to.length; i++) {
            addressTo[i] = new InternetAddress(to[i]);
        }
        msg.setRecipients(MimeMessage.RecipientType.TO, addressTo);

        msg.setSubject(subject);
        msg.setSentDate(new Date());

        // setup message body
        BodyPart messageBodyPart = new MimeBodyPart();
        messageBodyPart.setText(body);
        multipart.addBodyPart(messageBodyPart);

        // Put parts in message
        msg.setContent(multipart);

        // send email
        Transport.send(msg);

        return true;
    } else {
        return false;
    }
}

public void addAttachment(String filename) throws Exception {
    BodyPart messageBodyPart = new MimeBodyPart();
    DataSource source = new FileDataSource(filename);
    messageBodyPart.setDataHandler(new DataHandler(source));
    messageBodyPart.setFileName(new File(filename).getName());

    multipart.addBodyPart(messageBodyPart);
}

@Override
public PasswordAuthentication getPasswordAuthentication() {
    return new PasswordAuthentication(user, password);
}

private Properties _setProperties() {
    Properties props = new Properties();

    props.put("mail.smtp.host", host);

    if (_debuggable) {
        props.put("mail.debug", "true");
    }

    if (_auth) {
        props.put("mail.smtp.auth", "true");
    }

    props.put("mail.smtp.port", port);
    props.put("mail.smtp.socketFactory.port", sport);
    props.put("mail.smtp.socketFactory.class",
            "javax.net.ssl.SSLSocketFactory");
    props.put("mail.smtp.socketFactory.fallback", "false");

    return props;
}

// the getters and setters
public String getBody() {
    return body;
}

public void setBody(String _body) {
    this.body = _body;
}
} 
```

*注意*：

*   您将需要`activiation.jar`并`mail.jar`在您的类路径中，即 JavaMail API
*   代码应运行`AsynchTask`或专用`Thread`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T05:28:07.670

假设您的 emualtor 设备有电子邮件应用程序，则可以使用以下代码发送邮件。您可以使用安装在您的模拟器或设备上的任何电子邮件应用程序，无论是 yahoomail 还是 google。如果您希望 tp 在后台运行相同的服务，请使用服务。

```
Intent i = new Intent(Intent.ACTION_SEND);  
//i.setType("text/plain"); //use this line for testing in the emulator  
i.setType("message/rfc822") ; // use from live device
i.setClassName("com.google.android.gm", "com.google.android.gm.ComposeActivityGmail");//sending email via gmail
i.putExtra(Intent.EXTRA_EMAIL, new String[]{"test@gmail.com"});  
i.putExtra(Intent.EXTRA_SUBJECT,"subject goes here");  
i.putExtra(Intent.EXTRA_TEXT,"body goes here");  
startActivity(i); 
```

# java - 单击列表视图中的项目后如何提供视频链接

> ID：15331493
> 
> 赞同：2
> 
> 时间：2013-03-11T05:01:42.110
> 
> 标签：java, android

我必须在功能开始之前提供之前的所有链接，如果我点击其中的项目`ListView`，它必须转到那个视频链接，现在我给出了持有人中的链接`ListView`，如果我点击第一个项目，它看起来不太好在`ListView`，它将采用我需要的相应方式的第一个链接。

```
 @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main1);

            ArrayList<Recipedetails1> image_details = GetSearchResults();

            final ListView lv1 = (ListView) findViewById(R.id.listV1_main);
            lv1.setAdapter(new ItemListBaseAdapter1(this, image_details));

            lv1.setOnItemClickListener(new OnItemClickListener() {
                @Override
                public void onItemClick(AdapterView<?> a, View v, int position, long id) { 
                    Object o = lv1.getItemAtPosition(position);
                    Recipedetails1 obj_itemDetails = (Recipedetails1)o;
                    final Intent i = new Intent(Intent.ACTION_VIEW, Uri.parse(((Recipedetails1) o).getUrlWiki()));
                      startActivity(i);
} 
            });
        }

        private ArrayList<Recipedetails1> GetSearchResults(){
            ArrayList<Recipedetails1> results = new ArrayList<Recipedetails1>();

            Recipedetails1 item_details = new Recipedetails1();
            item_details.setName1("Vegterian");
            item_details.setItemDescription1("Recipes made by raw materials");
            item_details.setUrlWiki("https://www.youtube.com/watch?v=C_r0mFvMSfU");
            item_details.setImageNumber1(1);
            results.add(item_details);

            item_details = new Recipedetails1();
            item_details.setName1("Non-Vegterian");
            item_details.setItemDescription1("Flesh of sweet animals");
            item_details.setUrlWiki("https://www.youtube.com/watch?v=C_r0mFvMSfU");
            item_details.setImageNumber1(2);
            results.add(item_details);

            item_details = new Recipedetails1();
            item_details.setName1("Pickels");
            item_details.setItemDescription1("Touchable dish  by Homemade");
            item_details.setUrlWiki("https://www.youtube.com/watch?v=C_r0mFvMSfU");
            item_details.setImageNumber1(3);
            results.add(item_details);

            item_details = new Recipedetails1();
            item_details.setName1("Soups");
            item_details.setItemDescription1("Startup for our food");
            item_details.setUrlWiki("https://www.youtube.com/watch?v=C_r0mFvMSfU");
            item_details.setImageNumber1(4);
            results.add(item_details);

            return results;
        } 
```

实际上我不需要这种方式，因为它看起来不太好，我希望我的链接不显示，它必须在单击 ListView 中的项目后工作，实际上在我的代码中，单击项目后它会去，但是它将从我的持有人链接中获取这是提供链接的任何其他方式。这种代码方法看起来不太好，我不需要我的持有人也想显示我的链接

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T05:58:18.627

现在我的代码正在运行，我在我的列表适配器中删除了 url wiki 的持有者，现在它看起来很好并且工作正常，我评论这一行 //holder.recipeLinkWiki.setText(itemDetailsrrayList1.get(position).getUrlWiki());

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T05:17:41.470

您可以`image_details`通过单击位置从数组列表中获取链接。`image_details.get(position).getUrlWiki();`

像这样使用它：

```
ArrayList<Recipedetails1> image_details;

@Override
        public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.main1);

        image_details = GetSearchResults();

        final ListView lv1 = (ListView) findViewById(R.id.listV1_main);
        lv1.setAdapter(new ItemListBaseAdapter1(this, image_details));

        lv1.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> a, View v, int position, long id) { 
                //int pos = lv1.getItemAtPosition(position);
                String link = image_details.get(position).getUrlWiki();
                final Intent i = new Intent(Intent.ACTION_VIEW, Uri.parse(link));
                  startActivity(i);

} 

 });
    } 
```

# c# - 将文件保存在文件夹中

> ID：15331495
> 
> 赞同：0
> 
> 时间：2013-03-11T05:02:05.227
> 
> 标签：c#, javascript, asp.net-mvc, file

在我的 MVC 应用程序中，我允许用户使用编辑器创建一个新的 PDF 文件。我想将创建的文件保存在文件夹中，我该怎么做？这是我的视图代码：

```
<textarea class="ckeditor" id="message" ></textarea>
<input class="green_button" id="btnCre" type="button" text="Save" value="Save" onclick="confirmsave();"/>
function confirmsave() {
    var box = dhtmlx.modalbox({
        title: "PDF File Details",

        text: "<div id='form_in_box'><div><label> Enter The File Name <input id='fileName' class='inform' type='text'></label><br></div><div><span class='dhtmlx_button'><input type='button' value='save' onclick='create_PDF(this)' style='width:80px;'></span><span class='dhtmlx_button'><input type='button' value='Cancel' onclick='closeFile(this)' style='width:80px;'></span></label></div></div>",
        width: "300px"
    });
}
function closeFile(box) {

    dhtmlx.modalbox.hide(box);

}
function create_PDF(box) {
      var fileName = $("#fileName").val();
    var content = CKEDITOR.instances["message"].getData();
    if (content == "") {
        alert("Enter Content in The Editor");
        return false;
    }
    dhtmlx.modalbox.hide(box);
    dhtmlx.message("Saving file...");
    $.post("/CreatePDF/CreatePDFile",
    {
        content: '' + content + ''
    }, function (data) {

             data = jQuery.trim(data);
            alert("PDF File created succesfully");
            //$("#display_thumbs").html(data);
            CKEDITOR.instances["editor1"].setData("");

        });
    } 
```

控制器代码是

```
public ActionResult CreatePDFile(FormCollection data)
    {
        var htmlContent = data["content"];
        var fileName = data["fileName"];

        return View();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T05:10:40.693

最简单的方法是使用 php pdf 创建器，您可以在其中根据提供的数据创建 pdf。看看 tcpdf 看看是否可行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T05:16:41.880

与其将内容作为 JSON 对象的一部分发布，不如将其作为表单的一部分发布更容易。有关您需要做什么的更多详细信息，请参阅[本文。](http://haacked.com/archive/2010/07/16/uploading-files-with-aspnetmvc.aspx)

# ios - UILocalNotification 背景事件触发在 iOS 中暂停音乐

> ID：15331503
> 
> 赞同：0
> 
> 时间：2013-03-11T05:03:01.500
> 
> 标签：ios, cocoa-touch, uilocalnotification

UILocalNotification 事件触发时，我需要暂停播放音乐。

有人建议我使用以下代码。

[你可以在这里](https://stackoverflow.com/questions/15092016/how-to-run-nstimer-in-background-and-sleep-in-ios)看到我的帖子

这是代码

```
- (void)btnSetupNotificationClicked:(id)sender
{
    UILocalNotification* pOrderCompletedNotification=[[UILocalNotification alloc] init];
    if(pOrderCompletedNotification!=nil)
    {
        [pOrderCompletedNotification setFireDate:[[NSDate alloc] initWithTimeIntervalSinceNow:5.00]];
//      [pOrderCompletedNotification setApplicationIconBadgeNumber:1];
        [pOrderCompletedNotification setTimeZone:[NSTimeZone systemTimeZone]];
        [pOrderCompletedNotification setSoundName:@"OrderCompleted.m4a"];
        [pOrderCompletedNotification setAlertBody:@"Order Completed"];
        [pOrderCompletedNotification setAlertAction:nil];
        [pOrderCompletedNotification setHasAction:NO];

        UIApplication* pApplication=[UIApplication sharedApplication];
        if(pApplication!=nil)
        {
            [pApplication scheduleLocalNotification:pOrderCompletedNotification];
        }
        else
        {
            NSLog(@"Application singleton allocation error.");
        }

        [pOrderCompletedNotification release];
        [pApplication release];
    }
    else
    {
        NSLog(@"Local notification creation error.");
    }   // if
} 
```

但我不知道我应该在哪里`self.player pause`用这些方法写我的代码？我需要在 AppDelegate 中连接以下代码吗？

```
- (void)application:(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)notification
{
    NSLog(@"EVENT from Notification");
} 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T05:06:21.777

您的播放器对象**应该在您的 AppDelegate**文件中声明，以便当通知触发时您可以使用 self.player 对象并且您可以暂停音乐

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T05:12:22.287

AFAIK，您应该在方法中进行所需的编码

```
- (void)application:(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)notification 
```

每当用户收到通知时都会调用它。设备收到通知时不会触发任何事件。这是您打开收到的通知时唯一触发的事件。

# c++-cli - C++ CLI 错误 C2228

> ID：15331518
> 
> 赞同：0
> 
> 时间：2013-03-11T05:04:43.060
> 
> 标签：c++-cli

我正在开发一个 C++/Cli 项目，所以我像这样定义了我的结构。

```
 ref   struct  token_t
    {
    public :
        static TokenTypes_t TokenType;      ///enum class

        static String ^      TokenString;   ///enum class

        static Keyword_t  KeywordID; ///enum class

        static  int        IntVal;     
        static  char       CharVal;    

        static  Operator_t OprID;     ///enum class

    }; 
```

我将此结构的一个实例作为函数参数传递，但是当我尝试执行以下操作时：`token.TokenString.pop_back();`它说：

```
Error   11  error C2228: left of '.pop_back' must have class/struct/union 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T05:09:10.260

您是否在某处声明了结构静态？从您的代码来看，您是否这样做并不明显。如果你没有，那么仅仅 struct 实例化不会让你得到静态成员实例化。您需要在*某处*实例化静态成员。就像是

```
struct  token_t::TokenString = "foo"; (correct the syntax if wrong) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T05:51:47.870

首先， System::String （您声明的 String^ ）没有 pop_back 方法。在[MSDN](http://msdn.microsoft.com/en-us/library/system.string.aspx?cs-save-lang=1&cs-lang=cpp#code-snippet-1)上查找以获取更多信息。

其次，您将其声明为静态的。您正在尝试将其与实例一起使用。那不匹配。最有可能的是，您不想要任何静态的东西。去掉它。

您还需要使用 -> 运算符访问 XXX^ 类型的方法，就像它是普通指针一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T05:53:23.027

您需要使用箭头访问运算符。除此之外，您似乎使用 System.String 就好像它是来自本机 C++ 标准库的 std::string ...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T06:19:18.630

好的，有几件事：

*   `String^`是一个引用类型，你需要使用`->`而不是`.`调用它的方法时。
*   字符串类没有方法`pop_back`。
*   TokenString 已声明`static`，因此访问它的正确方法是`token_t::TokenString`。如果它是静态的，则它不与类型的特定实例相关联，仅与类型本身相关联。
*   您已将类型声明为`ref struct`. 这是完全有效的，但令人困惑。`ref`胜过，所以你所`struct`拥有的和 一样`ref class`。如果你想要一个结构（即值类型，而不是引用类型），你应该说`value struct token_t`. （`value class`会给你与 相同的结果`value struct`，但这又令人困惑。）
*   [String](http://msdn.microsoft.com/en-us/library/system.string.aspx)类的正确成员是 SubString 和 Length。因此，从字符串中删除最后一个字符的行将是： `token_t::TokenString = token_t::TokenString->SubString(0, token_t::TokenString->Length - 1);`

# css - 仅针对使用的类优化 Font Awesome

> ID：15331525
> 
> 赞同：89
> 
> 时间：2013-03-11T05:05:04.903
> 
> 标签：css, sass, font-awesome

我正在使用 Font Awesome Sass 文件[https://github.com/FortAwesome/Font-Awesome/blob/master/sass/font-awesome.sass](https://github.com/FortAwesome/Font-Awesome/blob/master/sass/font-awesome.sass)使其成为**_font-awesome.sass**以便我可以`@import`在我的 Sass 项目中使用。我还使用[http://middlemanapp.com/](http://middlemanapp.com/)将**Sass**转换为**Css**。问题：

1.  有没有办法只将**使用过的图标类**带入我转换的 .css 中？因为现在它承载了**_font-awesome.sass 中的所有类**

2.  **奖励：**是否可以**使用使用的图标类以某种方式****重新编译**字体以使其在生产使用中更小？

 **如果我能在上面的#1 中得到一些提示，那就太好了。

谢谢。

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2013-03-22T20:54:25.027

Sass 不知道你实际使用的是什么类。这是您必须自己手动修剪的东西。打开提供的 .scss 文件并删除您不需要的任何内容。

编辑字体文件本身以消除不需要的字形需要 3rd 方应用程序来执行此操作，并且超出了此问题的范围。

* * *

[Fontello](http://fontello.com/)是一个在线网络服务，可以为您完成所有这些工作。它允许您在多个图标字体集合之间混合和匹配，为您的项目创建完美的字体文件。除了自定义的字体文件，它还提供了多个 .css 文件，其中包含已经为您生成的样式（将扩展名更改为 .scss 将允许您将它们导入到现有的 Sass 项目中）。

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2014-01-08T05:20:31.980

fontello 非常好，但[IcoMoon](http://icomoon.io/app)更棒。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-03-22T01:39:52.883

您现在可以从 Font-awesome 子集图标以供生产使用。现在有一个名为**[icnfnt](https://github.com/johnsmclay/icnfnt)**的官方子集工具，它允许您从当前版本的 Font-awesome (v3.0.2) 中选择和打包您需要的图标。

自定义下载还包括所有 CSS、LESS、SCSS 和 SASS 代码！

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-01-06T16:55:02.090

我使用 LESS 而不是 SASS，所以你可能需要调整你的实现。

环境：

*   字体真棒4.5.0（当前版本）
*   Ubuntu 14.04 LTS
*   重击

使用它来生成您需要的 Unicode 字符编号列表：

```
fa_icons="globe|vimeo|youtube|facebook|twitter|google-plus"
for code in $(egrep "^@fa-var-($fa_icons):" less/font-awesome/variables.less | cut -d ':' -f 2 | sed -e 's/^ "\\//' | sed -e 's/";/,/' | sort ); do echo -n $code; done 
```

然后，您可以在专家模式下将其与 FontSquirrel 一起使用，您可以在其中选择自定义子集：[http ://www.fontsquirrel.com/tools/webfont-generator](http://www.fontsquirrel.com/tools/webfont-generator)

在 Unicode 范围内，输入上面的逗号分隔值。

然后从 CSS 中删除不必要的东西：

```
egrep "@fa-var-($fa_icons);" less/font-awesome/icons.less 
```

您需要打开`less/font-awesome/icons.less`grep 的输出并将其粘贴到文件中。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-02-10T17:27:27.560

好吧，sass 当然可以稍微调整一下以使选择器`%`基于，因此它们只能是可扩展的。完成此操作后，可以制作类以匹配所需的图标，然后可以制作`@extend`令人敬畏的字体类。

就个人而言，我这样做了，实际上并没有使用标记中的类，而只是将选择器用于相关元素并将`@extend`它们与这些类一起使用。

例子：

```
// _icons.scss
%#{$fa-css-prefix}-glass:before { content: $fa-var-glass; }
...

// _core.scss
%#{$fa-css-prefix} {
    ...
} 
```

然后在你的scss

```
a.search {
    @extend %fa;
    @extend %fa-search;
} 
```

等等。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-02-09T15:54:20.577

[Fontastic](http://app.fontastic.me/)为我工作（它在[Font Awesome github 页面](https://github.com/FortAwesome/Font-Awesome/wiki/Customize-Font-Awesome)上列出）。选择您需要的字形并将它们作为新的自定义字体下载。优秀的工具。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-05-13T13:15:48.390

Iconmoon 为我工作。我通过从 font-awesome 导入 svg 文件来使用它，从而确保我得到我想要的图标，而不仅仅是他们网站上可用的图标。此链接还帮助我集成了新图标 [https://tonyxu.io/posts/2018/use-icomoon-to-reduce-fontawesome-size/](https://tonyxu.io/posts/2018/use-icomoon-to-reduce-fontawesome-size/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-02-04T05:28:50.870

这里的所有其他优化工具都是基于浏览器的。如果您正在寻找可以轻松自动化并在本地运行的东西，这[`fontite`](https://gitlab.com/antonok/fontite)可能是最佳选择。

您将在 TOML 配置文件中列出您正在使用的图标。它将仅使用这些类创建 CSS，并且仅将这些图标打包到您的最终字体文件中。您甚至可以将 Font Awesome Brands、Font Awesome Solid 等中的图标组合到相同的 CSS 和字体文件中。**

# java-me - 如何使用诺基亚 Asha 311 S40 FT 设备的本地媒体播放器

> ID：15331526
> 
> 赞同：0
> 
> 时间：2013-03-11T05:05:11.263
> 
> 标签：java-me, media-player

如果我想在我的应用程序中使用诺基亚 S40 FT 设备的本地媒体播放器播放 mp3 音频。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T16:54:44.113

你有没有尝试使用平台请求？

你可以在这里找到有用的东西[http://www.developer.nokia.com/Resources/Library/Java/#!developers-guides/invoking-applications/invoking-applications-in-java-me.html](http://www.developer.nokia.com/Resources/Library/Java/#!developers-guides/invoking-applications/invoking-applications-in-java-me.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-26T08:18:07.310

您可以使用来自 com.nokia.mid.impl.jms.core.Launcher 的方法： `String url = "E:\\mymp3.mp3"; Launcher.handleContent(url);` 但它需要制造商或运营商域证书。但是您可以从 JAVA 应用程序（如 android 中的 Root）打开文件系统的完全访问权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T08:56:19.730

我不久前写了这个：http: [//indiegamemusic.com/help.php ?id=1](http://indiegamemusic.com/help.php?id=1)

应该是你需要的。

# windows-phone-7 - 当应用程序未运行时，如何在 Windows Phone 7 上处理 toast 通知？

> ID：15331528
> 
> 赞同：2
> 
> 时间：2013-03-11T05:05:19.457
> 
> 标签：windows-phone-7, c#-4.0, push-notification, mpns

我的祝酒词是

```
 string ToastPushXML = "<?xml version=\"1.0\" encoding=\"utf-8\"?>" +
            "<wp:Notification xmlns:wp=\"WPNotification\">" + "<wp:Toast>" + "<wp:Text1>{0}</wp:Text1>" +
            "<wp:Text2>{1}</wp:Text2>" + "<wp:Param>{2}</wp:Param>" + "</wp:Toast>" + "</wp:Notification>"; 
```

当我的应用程序正在运行时，我可以在 ShellToastNotificationReceived(object sender, NotificationEventArgs e) 事件处理程序上接收我的自定义参数（wp:myCustomParam1 和其他）作为 e.Collection 中的键

但是当我的应用程序没有运行并且通知到来时，用户点击弹出通知并且应用程序启动，ShellToastNotificationReceived 没有调用并且通知丢失。

那么，在这种情况下如何获取我的自定义参数呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:31:26.347

虽然该参数在这种情况下不可用，但我相信该区域的预期行为是 toast 会驱使用户启动应用程序。一旦应用程序（重新）启动，它将向服务器发出请求以获取所需的最新信息。自应用程序上次启动以来可能已经发送了任意数量的祝酒词，或者应用程序可能使用“社交时间”机制在半夜（或同等时间）不发送祝酒词，因此任何数量的通知也可能没有已经送走了。

有效负载中的`param`参数仅在应用程序运行时收到通知时使用。在这种情况下，该参数用于将另一个往返保存到服务器以获取更多信息。

文本是为用户而存在的。该`param`应用程序在那里。期望是，在任何一个通知中最多只有一个是相关的/使用的。当用户不使用应用程序时，文本就在那里，并告诉他们可能希望他们打开应用程序的内容。

# authentication - OAuth2 SAML 授权授予中的 SubjectConfirmation 是什么意思？

> ID：15331539
> 
> 赞同：10
> 
> 时间：2013-03-11T05:06:54.927
> 
> 标签：authentication, oauth-2.0, saml, assertions

[OAuth2 SAML 不记名规范](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-saml2-bearer-15)描述了应用程序如何将断言*作为授权授予*呈现给令牌端点。例如，[Salesforce 的 API](http://help.salesforce.com/help/doc/en/remoteaccess_oauth_SAML_bearer_flow.htm)允许这种方法使应用程序能够自主地为用户帐户请求访问令牌（只要用户已经为此授予权限，带外）。

不过，我无法理解断言的含义。大部分都很清楚，例如

*   `Issuer`是生成（并签署）断言的一方
*   `Subject`是为其帐户请求访问令牌的用户
*   `AudienceRestriction`将观众限制在令牌端点。

但我无法理解以下内容的含义：

*   `AuthnStatement`——我对 SAML 规范的理解是，这个断言的发布者正在声明它（发布者）已经对主题进行了身份验证。这是正确的吗？

*   `SubjectConfirmation`——谁在这里确认什么？SAML 规范有助于说明此元素“允许确认主题的信息”。但什么是确认？谁执行它，如何执行，何时执行，目的是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-12-13T13:49:49.463

`AuthnStatement`元素描述身份提供者的身份验证行为。如果断言发布者对主题进行了身份验证，则断言应该包含一个表示该身份验证事件的单个。

例子：

```
 <AuthnStatement AuthnInstant="2010-10-01T20:07:34.371Z">
            <AuthnContext>
              <AuthnContextClassRef>
    <!--Authentication method, was the client authenticated with digital cert, password, kerberos token?-->
                urn:oasis:names:tc:SAML:2.0:ac:classes:X509 

<!--For example, the Password class is applicable when a principal authenticates to an authentication authority through the presentation of a password over an unprotected HTTP session. -->
                urn:oasis:names:tc:SAML:2.0:ac:classes:Password

                urn:oasis:names:tc:SAML:2.0:ac:classes:Kerberos

              </AuthnContextClassRef>
            </AuthnContext>
          </AuthnStatement> 
```

`SubjectConfirmation`元素允许授权服务器将其确认为承载断言。此类元素必须具有值为“urn:oasis:names:tc:SAML:2.0:cm:bearer”的 Method 属性。SubjectConfirmation 元素必须包含一个 SubjectConfirmationData 元素（有例外），指示授权服务器的令牌端点 URL。授权服务器必须验证 Recipient 属性的值是否与向其传递断言的令牌端点 URL 匹配。

例子：

```
 <saml:SubjectConfirmation
<!-- Mandatory -->
       Method="urn:oasis:names:tc:SAML:2.0:cm:bearer">
       <saml:SubjectConfirmationData 
<!-- The AuthRequest sent this ID -->
         InResponseTo="aaf23196-1773-2113-474a-fe114412ab72"
<!-- It was through HTTP POST token endpoint URL -->
         Recipient="https://sp.example.com/SAML2/SSO/POST"
<!-- Not valid ON or After this Date and Time -->
         NotOnOrAfter="2004-12-05T09:27:05"/>
     </saml:SubjectConfirmation> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-01-03T21:34:30.827

是的，`AuthnStatement`来自此断言的发布者，声明它已经验证了主题。

`SubjectConfirmation`告诉想要依赖断言的实体如何确认所讨论的主题是此断言中引用的主题。也许断言是有效的，但它是针对发出请求的用户吗？如果该方法是不记名的，那么任何可以`Recipient`在日期之前向引用的端点提出此断言的主体都`NotOnOrAfter`被确认。如果该方法是密钥持有者，则只有能够证明拥有嵌套`KeyInfo`元素引用的密钥的主体才能被确认。

# sql - 在查询中考虑空字符串为空

> ID：15331540
> 
> 赞同：0
> 
> 时间：2013-03-11T05:07:08.203
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2008-r2

我正在使用`sql server R2`. 我有一个存储过程，其中我将两个参数传递为`@username varchar(100)`和`@password varchar(100)`。

现在，当我第一次从我的应用程序创建用户时，密码将为 NULL。

我想查询返回匹配用户名和密码的记录。问题是代码正在传递`empty string`给`stored procedure`. 我想要一些自动考虑或转换的东西`empty string to NULL`。我已经有了解决方案，`if condition`但我想使用单个查询，而不是 if 条件。

**编辑 ：**

它是一个简单的存储过程：

```
CREATE PROCEDURE [dbo].[Pro_TblP]
(
 @userName varchar(100),
 @password varchar(100) 
)
AS
BEGIN
    IF (@password ='')
        BEGIN
            SELECT * FROM TblP 
            WHERE username = @userName AND password IS NULL AND IsDeleted = 0
        END

    ELSE 
        BEGIN
            SELECT * FROM TblP 
            WHERE username = @userName AND password = @password AND IsDeleted = 0
    END
END

GO 
```

我想以单一表示形式组合查询。不想要 if 条件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T05:24:22.740

```
CREATE PROCEDURE [dbo].[Pro_TblP]
(
 @userName varchar(100),
 @password varchar(100) 
)
AS
BEGIN
   SELECT * FROM TblP 
   WHERE username = @userName AND COALESCE(password,'') = @password AND IsDeleted = 0

END

GO 
```

[SQL小提琴](http://sqlfiddle.com/#!3/e8007/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T05:28:04.643

试试下面的代码：当@password 为空字符串或 null 时，它将返回所有值。当您在 @password 变量中传递一个字符串时，它将过滤它。

```
CREATE PROCEDURE [dbo].[Pro_TblP]
(
 @userName varchar(100),
 @password varchar(100) 
)
AS
BEGIN
     SELECT * FROM TblP 
         WHERE username = @userName AND IsDeleted = 0
         And (password = @password OR  isnull(@password,'') = '')           

END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T05:29:38.020

试试这个

```
alter PROCEDURE [dbo].[Pro_TblP]
(
 @userName varchar(100),
 @password varchar(100)='' 
)
AS
BEGIN
   BEGIN
      SELECT * FROM TblP 
      WHERE username = @userName AND IsNull(password,'')=@password AND IsDeleted = 0
   END
END 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T06:48:41.127

```
SELECT *
FROM TblP 
WHERE username = @userName AND 
      IsDeleted = 0 AND
      (
        password = @password OR
        password IS NULL AND @password = ''
      ) 
```

# c - 为哈希表分配所有可用内存

> ID：15331543
> 
> 赞同：3
> 
> 时间：2013-03-11T05:07:34.553
> 
> 标签：c, memory-management, malloc, hashtable

我想在机器上构建一个尽可能大的哈希表。我在想，在初始化时我会声明一大块内存供哈希表使用，但我不清楚最好的方法是什么。我有下面列出的各种想法和问题。Stack Overflow 上有很多相关的帖子，但我仍然很感激你的想法。

假设我有 16GiB 的 RAM 可以玩。

1.  只需选择一个像 8GiB 这样的数字并始终分配那么多，并希望系统的其余部分可以使用其余部分。如果我选择这样做，获得 8GiB 的最佳方式是什么？这是一个 64 位系统，所以我可以调用`malloc(1<<33)`它并且它可能会工作，但它足够大，我认为碎片可能是一个问题。那么我最好分配 8 个单独的 1GiB 块吗？

2.  而不是选择一个数字，我只想要求所有/大部分剩余的物理内存。我天真地以为我可以一直调用`malloc`直到它返回`NULL`，但是乐观的内存分配使它非常无用（它似乎也让我分配了我所有的硬盘驱动器）。像让我查询内存使用情况这样的实用程序`top`，`vmstat`是否有系统调用可以用来获取相同的信息？

3.  我只需要为此目的的物理内存是否正确？我以前从未使用`mmap`过，我应该考虑将它用于构建一个*巨大*的哈希表吗？我的直觉是，对整个表的随机访问对`mmap`.

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-03-11T06:46:01.013

即使您的系统中有足够的 RAM，8GB 仍然是使用 malloc 分配的大内存。

我建议你在这里使用分页和拆分概念。

最初使用 malloc 分配 256MB 内存，现在将这 256MB 划分为 4K 块，并为每个块分配唯一的页面索引，以便您可以使用唯一的页面索引访问它。

当页面充满条目时，拆分页面并为具有不同页面索引的新页面分配另一个 4k 块。继续这样做，而不是一次分配所有内存。

# c# - C# .Net 向导控件删除动态添加的用户控件

> ID：15331544
> 
> 赞同：2
> 
> 时间：2013-03-11T05:07:51.427
> 
> 标签：c#, asp.net, .net, user-controls, wizard

我正在编写一个调查 Web 应用程序，并且我有一个向导控件，其中包含从设计器视图中添加的几个步骤。用户在第一步中选择他们想要完成的调查的名称，然后用户点击下一步按钮，我从数据库中读取调查详细信息。我为每种类型的问题创建了自定义用户控件，在从数据库中读取每个调查问题后，我以编程方式将其添加到向导控件的第 2 步。

这工作正常，调查按预期显示。但是，当用户填写问题的答案并点击下一步时，我无法访问输入到文本框中的答案。似乎我添加到第 2 步的所有自定义控件都已被删除，因为在尝试访问控件时出现空引用异常。我什至在按下下一个按钮后打印出步骤 2 中的控件数量（应该是 11 个），但打印出步骤中没有控件。

我错过了什么吗？是否需要设置一个属性才能从一个步骤访问我动态添加的控件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T05:14:02.480

你是说空引用异常即将到来。

尝试查找您是否在应用程序中使用下拉控件。

如果存在，那么当下拉列表中没有选定的值并且您尝试将其插入数据库时​​，就会出现此异常。

如果您将其编写为，请检查您的代码，`ddlOptions.SelectedItem.toString();`

如果是这样，则将其编辑为>>`ddlOptions.text`

# java - 如何在 Eclipse 中添加两个按钮，一个用于播放 mp3 文件，另一个用于停止它

> ID：15331548
> 
> 赞同：0
> 
> 时间：2013-03-11T05:08:32.257
> 
> 标签：java, android, media-player

我是android应用程序开发的新手。现在我的挑战是在我的 UI 中添加两个按钮，一个用于播放 mp3 文件，另一个用于停止它。我能够成功地做第一个，当我尝试做一个停止时，我看不到任何结果。我的代码如下：

```
package ir.polyglotcenter.childrenmostfrequentwords;

import android.app.Activity;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class Main extends Activity {

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Button myButtonOne = (Button) findViewById(R.id.btn_audio);
    myButtonOne.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            MediaPlayer media = MediaPlayer.create(Main.this, R.raw.audio);
            media.start();

        }
    });
    //this is to stop the audio flow
    Button myButtonTwo = (Button) findViewById(R.id.btn_stop);
    myButtonTwo.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            MediaPlayer media = MediaPlayer.create(Main.this, R.raw.audio);
            media.stop();

        }
    });

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T05:11:47.873

试试这个代码：

```
public class Main extends Activity {

    protected MediaPlayer mMediaPlayer;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        mMediaPlayer = MediaPlayer.create(Main.this, R.raw.audio);

        Button myButtonOne = (Button) findViewById(R.id.btn_audio);
        myButtonOne.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                mMediaPlayer.prepare();
                mMediaPlayer.start();
            }
        });
        //this is to stop the audio flow
        Button myButtonTwo = (Button) findViewById(R.id.btn_stop);
        myButtonTwo.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                if(mMediaPlayer.isPlaying())
                    mMediaPlayer.stop();
            }
        });

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-04T11:40:38.483

播放和停止所有行的所有歌曲。

要点是在 if 或任何循环的循环中实现 MediaPlayer：

```
if(playandstop==true){
mp=MediaPlayer.create(MainActivity.this, resourceIIIDD);
mp.start();
playandstop=false;
}else{
    mp.stop();
    playandstop=true;
} 
```

# c++ - C++ - 包括 unistd.h：为什么不 cunistd？

> ID：15331566
> 
> 赞同：79
> 
> 时间：2013-03-11T05:09:48.593
> 
> 标签：c++, c

据说在C++中包含C头文件时，要去掉“.h”后缀，然后在开头加上“c”。例如，`#include <cstdio>` 代替`#include <stdio.h>`. 但是当我`sleep()`在我的代码中使用时，`#include <cunistd>`它不起作用，但`#include <unistd.h>`有效。为什么不`<cunistd>`呢？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2013-03-11T05:11:38.327

您的算法对于大多数（全部？）标准 C 头文件都是正确的，但`unistd.h`不是标准 C 的一部分，因此标准 C++ 反过来不将它包含在其他`c...`头文件中。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2013-03-11T05:12:38.670

因为`unistd.h`从来都不是 C 语言的一部分。它是操作系统的一部分。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2013-03-11T05:13:47.740

`<unistd.h>`, 代表 unix 标准头文件，名字说明了一切。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-05-27T08:51:39.620

unistd.h 不是标准 C 的一部分。标准 C++ 库不包含它与其他 c 头文件。

# accelerometer - 加速度计噪声

> ID：15331567
> 
> 赞同：1
> 
> 时间：2013-03-11T05:09:58.897
> 
> 标签：accelerometer, noise

我在互联网上读到加速度计在低频时会受到 1/f 噪声的影响，而在高频时会受到高斯噪声的影响。但我不明白他们指的是什么频率？是加速度计的采样频率吗？或手机处理器的工作频率（我正在寻找android手机中的MEMS加速度计）？或其他一些信号的频率（如果是那么什么样的信号）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T05:17:18.707

他们在谈论输入信号的频率。由于这是一个加速度计，因此输入信号是运动。

快速、高频振动会受到高斯噪声的影响。缓慢的低频运动会产生漂移。这限制了您可以使用加速度计准确测量的运动范围。

* * *

## 补充回答：

当涉及到运动时，频率指的是什么？它只是指运动方向的变化，或者更具体地说，是指运动矢量方向的变化。

可能很难想象线性向前运动有一个频率，但如果物体以恒定速度行进或永远不断加速，则线性向前运动的频率仅为零。对于汽车、火车、飞机、船或宇宙飞船，情况并非如此。所有行驶中的车辆最终都必须停下来。当它停止时，它已经完成了一个频率为 的运动`1/(2*time_of_journey)`。

对于加速度计，频率更高，因为加速度计测量的是加速度，而不是距离。因此，如果车辆像宇宙飞船一样行驶，只加速一次，减速一次，那么输入的频率将为`1/time_of_journey`（因为加速度的值从 0 开始并返回到 0）。但是对于汽车、轮船、自行车和大多数其他车辆来说，频率要高得多，因为大多数车辆都在不断地加速和减速。所以加速频率一般为`1/(time_of_journey/number_of_times_you_hit_the_brakes)`。

说真的，这方面的数字通常非常低。以宇宙飞船去月球的简单例子，忽略发射和着陆。尼尔·阿姆斯特朗登月之旅的加速度频率为`1/4 days`0.000003 Hz。这看起来不像是一个很大的频率。

那么为什么要根据频率来说明参数呢？好吧，在信号处理中，运动通常被假定为正弦波。它不现实，也不能反映现实世界，但已经足够好并且足够简化事物，以至于我们可以写下方程式来建模事物。这就是为什么您会在频率方面看到诸如“加速度计噪声”之类的东西。

不过，车辆也确实会在更高的频率下经历加速。由发动机和道路颠簸引起的振动以及与空气的摩擦所产生的频率在我们认为是周期性的范围内。事实上，我们的耳朵经常会听到诸如嘎嘎声、嗡嗡声或嗖嗖声之类的声音。敏感的加速度计也会检测到它们。

# c++ - C++：删除对象还是删除成员？

> ID：15331568
> 
> 赞同：1
> 
> 时间：2013-03-11T05:10:05.300
> 
> 标签：c++, class, heap-memory, dynamic-memory-allocation

我想问一下功能上的区别；也许要求一个示例场景，我应该从以下主要方法中的一个选项中进行选择：

```
#include <iostream>

using namespace std;

class A{
    private:
        int x, y;
    public:
        A(int, int);
    };

class B{
    private:
        int *x, *y;
    public:
        B(int, int);
        ~B();
    };

A:: A(int x, int y){
    this->x = x; this->y = y;
    }

B:: B(int x, int y){
    this->x = new int(x);
    this->y = new int(y); 
    }

B:: ~B(){
    delete this->x;
    delete this->y;
    }

int main(){
    int x = 0, y = 0;
    A* objA = new A(x, y);  // line 1
    B objB1(x, y);          // line 2
    B* objB2 = new B(x, y); // line 3

    delete objA;
    delete objB2;
    return 0;
    } 
```

我知道 main 方法中的第二个声明`B objB1(x, y)`显然与其他 2 个不同，但是有人可以解释一下标记为 1 和 3 的构造函数之间的功能差异吗？在这两个声明中是否有任何不良做法？

谢谢

纳克斯

**更新**

首先，我感谢每个人给出的所有答案，我真的得到了一些很好的见解。我已经编辑了上面的代码，因为一些答案指出我没有删除我使用的对象，这是公平的，但这不是我问题的目的。我只是想深入了解创建类的不同方法之间的功能差异。感谢所有针对这一点的人。我仍在阅读答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T05:27:50.650

我通常更喜欢`A`-style 对象，除非有令人信服的理由使用该`B`模式，仅仅是因为`A`-style 对象更有效。

例如，当`A`分配对象时，将保留 2 个整数（在您的机器上可能是 8 个字节）的内存，然后由传递给构造函数的参数初始化。分配对象时，将保留2 个*指针*的`B`内存（在您的机器上也可能是 8 个字节），但是当在构造函数中初始化对象时，传递的每个值都将被复制到新创建的（在堆上） )，因此总共使用了 8 个字节的内存。因此，在这个简单的示例中，您的对象占用的内存是对象的两倍。*`int``B``int``B``A`*

 *此外，每次您想要访问由`x`和`y`您的`B`对象引用的值时，都需要取消引用指针，这会增加一定程度的间接性和低效率（并且，在许多用例中，还可能涉及 NULL 检查安全性，它增加了一个分支）。当然，每当`B`对象被销毁时，都必须进行额外的堆“清理”。（如果频繁创建和销毁大量堆碎片，这可能会逐渐导致堆碎片。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T05:29:24.557

> “功能上的区别……”

在第 1 行，您通过使用关键字在**堆上**分配类型 A 的对象。`new`在堆上，为指向的对象分配空间，`objA`这意味着`ints`在堆上连续创建 2，这与您的 ivar 定义一致。

**在第 2 行，您在堆栈**上创建了一个 B 类的新对象。当它超出范围时，它将自动调用其析构函数。但是，当 B 被分配时，它将为两个**int 指针**（不是 int）分配空间，这将按照您在 B 的构造函数中指定的那样在**堆上分配。**当`objB1`超出范围时，指针将被`deleted`析构函数成功。

**在第 3 行，您在堆上**创建了一个 B 类的新对象。因此，在堆上为两个**int 指针**（不是 int）分配空间，然后这些 int 又通过使用关键字**在堆上的其他位置分配。**`new`当 you`delete` `objB2`时，析构函数被调用，因此两个“其他地方的整数”被释放，然后你的原始对象`objB2`也从堆中释放。

根据 WhozCraig 的评论，类`A`绝对是您在示例中显示的两个类的首选类定义。

* * *

**编辑（评论回复）：**

WhozCraig 的链接基本上强烈反对使用原始指针。考虑到这一点，是的，我同意，纯粹基于内存管理的第 2 行将是首选，因为`B`技术上管理它自己的内存（尽管它仍然使用原始指针）。

但是，我通常不喜欢（过度）使用`new`内部类，因为`new`它比等效的堆栈（或）分配*要慢得多。*`non-new`因此，我更喜欢`new`整个类而不是单个组件，因为它只需要一次`new`调用，并且所有 ivars 无论如何都分配在堆中。（更好的是`placement new`，，但这远远超出了这个问题的范围）。

*所以总结一下：*

在内存管理的基础上，第 2 行（类`B`）将是首选，但比这更好的是：

```
A objAOnStack(x, y); // Avoids heap altogether 
```

如果您将第 1 行包装在智能指针中，例如`std::shared_ptr`or`std::unique_ptr`或类似的东西，则第 1 行是最好的。

如果没有智能指针包装器，则不应真正考虑第 3 行（`new`无论如何，回避嵌套通常会更好地提高性能）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T05:30:21.033

您应该为您的 B 类定义一个复制构造函数和一个赋值运算符。否则，您将遇到这些指针的严重问题。除此之外，第 1 行和第 3 行之间没有功能上的区别。唯一的区别在于实现。

话虽如此，没有理由在 B 中使用指针。如果您需要固定数量的整数，请使用纯整数或纯数组。如果您需要可变数量的整数，请使用`std::vector`. 如果你真的需要分配动态内存，要非常小心并考虑使用智能指针。

如果您的 B 类仅包含一个 [pointer to] 整数，则可能类似于：

```
class B
{
    private:

        int * x;

    public:

        B (int i)       { x = new int(i); }
        B (const B & b) { x = new int(*b.x); }
        ~B()            { delete x; }

        B & operator= (const B & b)  // Corner cases:
        {                            //
            int * p = x;             // 1) b and *this might
            x = new int(*b.x);       //    be the same object
            delete p;                //
            return *this;            // 2) new might throw
        }                            //    an exception
}; 
```

即使在注释的极端情况下，此代码也会执行“正确的事情（TM）”。

另一种选择是：

```
#include <utility>   // std::swap

class B
{
    private:

        int * x;

    public:

        B (int i)       { x = new int(i); }
        B (const B & b) { x = new int(*b.x); }
        ~B()            { delete x; }

        void swap (B & b)
        {
            using std::swap;
            swap (x, b.x);
        }

        B & operator= (const B & b)  // Corner cases:
        {                            //
            B tmp(b);                // 1) b and *this might
            swap (tmp);              //    be the same object
            return *this;            //
        }                            // 2) new might throw
};                                   //    an exception 
```

但是，如果有两个指针——就像在你的例子中——，你必须调用`new`两次。如果第二个`new`失败抛出异常，您会希望自动`delete`保留第一个所保留的内存`new`......

```
#include <utility>   // std::swap

class B
{
    private:

        int * x;
        int * y;

        void init (int i, int j)
        {
            x = new int(i);

            try
            {
                y = new int(j);
            }
            catch (...)     // first new was OK but
            {               // second failed, so undo
                delete x;   // first allocation and
                throw;      // continue the exception
            }
        }

    public:

        B (int i, int j) { init (i, j); }
        B (const B & b)  { init (*b.x, *b.y); }
        ~B()             { delete x; delete y; }

        void swap (B & b)
        {
            using std::swap;
            swap (x, b.x);
            swap (y, b.y);
        }

        B & operator= (const B & b)  // Corner cases:
        {                            //
            B tmp(b);                // 1) b and *this might
            swap (tmp);              //    be the same object
            return *this;            //
        }                            // 2) new might throw
};                                   //    an exception 
```

如果你有三四个 [pointers to] int……代码会变得更加丑陋！这就是智能指针和 RAII（资源获取即初始化）真正有用的地方：

```
#include <utility>   // std::swap
#include <memory>    // std::unique_ptr (or std::auto_ptr)

class B
{
    private:

        std::auto_ptr<int> x;   // If your compiler supports
        std::auto_ptr<int> y;   // C++11, use unique_ptr instead

    public:

        B (int i, int j) : x(new int(i)),      // If 2nd new
                           y(new int(j)) {}    // fails, 1st is
                                               // undone
        B (const B & b)  : x(new int(*b.x)),
                           y(new int(*b.y)) {}

        // No destructor is required

        void swap (B & b)
        {
            using std::swap;
            swap (x, b.x);
            swap (y, b.y);
        }

        B & operator= (const B & b)  // Corner cases:
        {                            //
            B tmp(b);                // 1) b and *this might
            swap (tmp);              //    be the same object
            return *this;            //
        }                            // 2) new might throw
};                                   //    an exception 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T05:37:40.550

一般来说，A 类的方式比 B 类好得多。除非你有充分的理由，否则你应该坚持类似于 A 的设计。在简单的情况下，对于像这样的简单数据结构，B 类的实现方式甚至可以被认为是不好的做法。

造成这种情况的原因有很多，这里没有特别的顺序：

1.  B 类比 A 类多进行两次动态内存分配。在运行时分配内存*可能*会很慢，并且分配和释放大量不同大小的块*会*导致所谓的“内存碎片*”（这是一件坏事。）
2.  B 类的实例比 A 类的实例大。A 的实例是两个整数的大小，通常每个 32 位，这使得整个实例为 8 个字节。B 的实例需要两个指针（每个指针可以是 32 位或 64 位，具体取决于您的代码是针对 32 位还是 64 位架构编译的）加上两个实际整数（每个 4 字节）加上堆分配器为每个分配存储的一些元数据，每个分配可能是 0 到 32 字节或更多字节。因此，B 的每个实例都比 A 的每个实例大 8、16 或（更多）字节，同时基本上做同样的工作。
3.  访问 B 实例中的字段 (`x`和`y`) 比访问 A 实例中的字段慢。当访问 B 实例的成员时，您所拥有的只是它们*指针*的位置。因此，CPU 获取指针，然后它可以知道保存`x`and值的实际整数的地址，然后它就`y`可以读取或写入它们的值。
4.  在 A 的实例中，您确定`x`并且`y`存储在连续的内存地址中。这是从 CPU 缓存中获得最大收益的最佳情况。在 B 的实例中，实际`x`和所在的地址`y`可能彼此相距很远，并且您从 CPU 缓存中获得的好处会更少。
5.  在 A 中，成员的生命周期与包含它们的对象的生命周期完全相同。对于B来说，没有这样的内在保证。在这个简单的例子中情况并非如此，但在更复杂的情况下，特别是在存在异常的情况下，这一点就变成了一个明显而现实的危险。在 B 的情况下，编程错误（例如，在一些很少执行的析构函数路径中忘记了`delete`一个成员）也是一个问题。

请注意，有时，将对象的生命周期与成员数据解耦是您真正想要的，但这通常不被认为是好的设计。如果您想了解更多信息，请查阅 C++ 中的**RAII模式。**

顺便说一句，正如其他评论中所指出的，您必须`private`为 B 类实现（或声明）复制构造函数和赋值运算符。

由于与上述相同的原因，您应该尽量避免`new`使用您的数据，这意味着在标记为 1、2 和 3 的行中，第 2 行实际上是创建实例的更好方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T05:21:24.943

第 1 行创建 objA 并留下内存泄漏，因为 objA 没有被删除。如果它被删除，成员 x 和 y 也将被删除。objA 还支持复制构造函数和赋值运算符。这些调用不会有任何问题：

```
func1(*objA)
A objB = *objA. 
```

如果您对 objB2 执行相同的操作，您将遇到内存访问冲突，因为 x 和 y 指向的同一内存将被删除两次。您需要创建私有复制构造函数和赋值运算符来防止这种情况。

关于场景：

1.  第 1 行和第 3 行适用于将对象返回给调用函数。调用函数需要负责删除它。在 B 类中，x 和 y 可以是指向基类的指针。所以它们可以是多态的。
2.  Line2 适合将此对象传递给调用堆栈下方的被调用函数。当前函数退出时，该对象将被删除。*

# jquery - 为什么 jQuery 如果条件不起作用？

> ID：15331572
> 
> 赞同：1
> 
> 时间：2013-03-11T05:10:16.157
> 
> 标签：jquery, conditional-statements

我试图通过将获得的标记除以 *100/totalmarks 来在第三个文本框中显示值；但我无法做到这一点；

```
 $(document).ready(function () {
            $("#TextBoxTotalMarks, #TxBx_MarksObtained").keyup(function () {
                var a = parseInt($("#TextBoxTotalMarks").val(), 10);
                var b = parseInt($("#TxBx_MarksObtained").val(), 10);
                var c;
                if (a < b) {
                   c = "sorry not accepted";
                }
                else {
                   c = ((b * 100) / a).toFixed(2);
                }
                $("#TextBoxMarksInPercent").val(c);
            });
        }); 
```

当我在总分文本框中输入 100 分，在获得的分数文本框中输入 300 分时，我没有看到“对不起，不接受”的消息

```
 <tr>
                <td class="shade">
                    <asp:Literal ID="Ltrl_TotalMarks" runat="server" Text="Total Marks"></asp:Literal>
                </td>
                <td>
                    <asp:TextBox ID="TextBoxTotalMarks" runat="server" />
                </td>
            </tr>
            <tr>
                <td class="shade">
                    <asp:Literal ID="Ltrl_MarksObtained" runat="server" Text="Marks Obtained"></asp:Literal>
                </td>
                <td>
                    <asp:TextBox ID="TxBx_MarksObtained" runat="server" 
                </td>
            </tr>
            <tr>
                <td class="shade">
                    <asp:Literal runat="server" ID="Lit_MarksInPercent" Text="Marks In Percent"></asp:Literal>
                </td>
                <td>
                    <asp:TextBox runat="server" ID="TextBoxMarksInPercent" />
                    <span style="color: black;">%</span>
                </td>
            </tr> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T05:15:01.197

**更新**：（*在您显示标记时）*

问题是`ID`您提供的`asp:TextBox`不是它的*客户端*ID。为此，您需要使用它的[`ClientID`属性](http://msdn.microsoft.com/en-gb/library/system.web.ui.control.clientid.aspx)，例如：

```
var a = parseInt($("#<%=TextBoxTotalMarks.ClientID%>").val(), 10); 
```

* * *

**原始答案**：

~~我认为[lc.'s answer](https://stackoverflow.com/a/15331605/157247)可能是主要问题~~ *（不是因为您的编辑）*，而是另外两件事：

1.  请注意，您正在比较*字符串*（因此`"100"`将是`<` `"30"`）。如果您要比较*数字*，请使用`parseInt`以下返回值`val`：

    ```
    var a = parseInt($("#TextBoxTotalMarks").val(), 10);
    var b = parseInt($("#TxBx_MarksObtained").val(), 10); 
    ```

    然后你可能想稍微改变你的条件：

    ```
    if (isNaN(a) || isNaN(b) || a < b) { 
    ```

2.  请注意，`TextBoxTotalMarks`and`TxBx_MarksObtained`应该是`id`值，而不是`name`值。所以你的输入应该是这样的：

    ```
    <input type="text" id="TextBoxTotalMarks">
    <input type="text" id="TxBx_MarksObtained">
    <input type="text" id="TextBoxMarksInPercent"> 
    ```

    或者，如果您想`name`改用，请将您的选择器更改为形式`input[name="TextBoxTotalMarks"]`和类似的形式。

涵盖了这两个，它可以工作：[Live Example](http://jsbin.com/owucug/1) | [来源](http://jsbin.com/owucug/1/edit) *（不过我认为你的计算有问题）*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-11T05:13:21.390

也许您还打算将事件处理程序附加到`#TextBoxTotalMarks`？

```
 $("#TextBoxTotalMarks, #TxBx_MarksObtained").keyup(function () {
       ~~~~~~~~~~~~~~~~~~ 
```

* * *

如果您仍然遇到问题，您可以随时设置断点并检查您正在获取的内容`a`和`b`. [正如TJ Crowder 的回答](https://stackoverflow.com/a/15331627/44853)所解释的那样，这个问题很可能是字符串比较问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T05:14:07.027

你这里有问题：

```
$("#TxBx_MarksObtained, #TxBx_MarksObtained")
//--^^^^-----------------^^^^-------------------using same selector twice. 
```

我认为这应该是：

```
 $("#TxBx_MarksObtained, #TextBoxTotalMarks").keyup(function () { 
```

### 这对我有用：[小提琴](http://jsfiddle.net/v6Dpm/)

# c++ - 情绪检测数据集

> ID：15331573
> 
> 赞同：1
> 
> 时间：2013-03-11T05:10:17.063
> 
> 标签：c++, opencv

我正在使用 opencv 库编写代码，该库跟踪用户的面部和面部特征。我已经设法通过网络摄像头实时检测面部和眼睛、嘴唇等特征。我现在想从检测到的特征中提取情感。我想知道是否有任何可用的数据集可用于比较情绪以及如何完成情绪。

这是人脸检测的代码

```
 CvRect detectFaceInImage(const IplImage *inputImg, const CvHaarClassifierCascade* cascade )
{
    const CvSize minFeatureSize = cvSize(20, 20);
    const int flags = CV_HAAR_FIND_BIGGEST_OBJECT | CV_HAAR_DO_ROUGH_SEARCH;    // Only search for 1 face.
    const float search_scale_factor = 1.1f;
    IplImage *detectImg;
    IplImage *greyImg = 0;
    CvMemStorage* storage;
    CvRect rc;
    double t;
    CvSeq* rects;
    int i;

    storage = cvCreateMemStorage(0);
    cvClearMemStorage( storage );

    // If the image is color, use a greyscale copy of the image.
    detectImg = (IplImage*)inputImg;    // Assume the input image is to be used.
    if (inputImg->nChannels > 1) 
    {
        greyImg = cvCreateImage(cvSize(inputImg->width, inputImg->height), IPL_DEPTH_8U, 1 );
        cvCvtColor( inputImg, greyImg, CV_BGR2GRAY );
        detectImg = greyImg;    // Use the greyscale version as the input.
    }

    // Detect all the faces.
    t = (double)cvGetTickCount();
    rects = cvHaarDetectObjects( detectImg, (CvHaarClassifierCascade*)cascade, storage,
                search_scale_factor, 3, flags, minFeatureSize );
    t = (double)cvGetTickCount() - t;
    printf("[Face Detection took %d ms and found %d objects]\n", cvRound( t/((double)cvGetTickFrequency()*1000.0) ), rects->total );

    // Get the first detected face (the biggest).
    if (rects->total > 0) {
        rc = *(CvRect*)cvGetSeqElem( rects, 0 );
    }
    else
        rc = cvRect(-1,-1,-1,-1);   // Couldn't find the face.

    //cvReleaseHaarClassifierCascade( &cascade );
    //cvReleaseImage( &detectImg );
    if (greyImg)
        cvReleaseImage( &greyImg );
    cvReleaseMemStorage( &storage );

    return rc;  // Return the biggest face found, or (-1,-1,-1,-1).
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-17T18:33:51.540

我正在使用卡罗林斯卡定向情绪面孔 (KDEF) 照片进行教育研究项目。有关数据集的信息可在[http://www.emotionlab.se/resources/kdef](http://www.emotionlab.se/resources/kdef)获得。

请注意，您可能需要对图像进行裁剪、调整大小、居中、拉直和规范化，以便将它们与 OpenCV 一起使用。一旦准备好，图像就可以很好地与所有 OpenCV2 FaceRecognizer 类函数配合使用。

至于如何进行面部表情识别：不存在标准方法。首先阅读 FaceRecognizer 文档并完成教程。对于它的价值：我发现使用局部二进制模式直方图可以产生最准确的结果。

# javascript - 如何使用 regEx 从特定 url 中提取表单的 id？

> ID：15331577
> 
> 赞同：-3
> 
> 时间：2013-03-11T05:10:43.567
> 
> 标签：javascript, regex

请帮助我......我不熟悉正则表达式。我需要从不同的 url 中提取屏幕版本 ID：

1.  本地主机：8080/myapp/desktop/screen-0.0.1-beta/main
2.  本地主机：8080/myapp/desktop/screen-1.1/main
3.  本地主机：8080/myapp/desktop/admin-1/something

所以结果将是 1) 0.0.1-beta 2) 1.1 3) 1 。有任何想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T05:25:34.610

使用正则表达式。

```
var strs = [
    'localhost:8080/myapp/desktop/screen-0.0.1-beta/main',
    'localhost:8080/myapp/desktop/screen-1.1/main',
    'localhost:8080/myapp/desktop/admin-1/something'];

for (var i = 0; i < strs.length; i++) {
    var vid = strs[i].match(/-(.+)-*\//)[1];
    alert(vid);
} 
```

工作示例：http: [//jsfiddle.net/nZXjk/](http://jsfiddle.net/nZXjk/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T05:32:25.273

```
// capture the text following the 'desktop/text-'
var version = url.match(/desktop\/\w*-(.*)\//)[1];

alert(version); 
```

# testng - 在 TestNG 中处理断言

> ID：15331578
> 
> 赞同：1
> 
> 时间：2013-03-11T05:10:44.333
> 
> 标签：testng, assertion

如果断言失败，如何继续在 TestNG 中执行测试？如何在 TestNG 的 HTML 报告中报告失败？

当我运行以下代码时，断言后的行被执行，但在报告中未列出断言失败：

```
@Test
public void googleSearch(){
    driver.get("http://www.google.co.in/");
    System.out.println(" ---------- Start -------------");

    try {
        Assert.assertTrue(driver.findElement(By.xpath("xyz")).isDisplayed(), "unable to find the link");
    } catch (Throwable t) {
        System.out.println("Error");
    }
    System.out.println(" ---------- End -------------");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-10T14:54:03.073

您可以在 catch 块中使用此代码：-

```
org.testng.Assert.fail("expected and actual result do not match"); 
```

让我们以以下代码为例： -

```
String expectedtitle="xyz";
String actualtitle="xywz";
try {
    Assert.assertEquals(expectedtitle, actualtitle);
} catch(Throwable t) {              
    org.testng.Assert.fail("expected and actual result do not match");      
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T16:27:17.277

如果你捕捉到 AssertionError，TestNG 就看不到它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-19T18:52:14.227

同意，失败后继续测试不是最佳实践。使用 after*Methods() 的东西。

但是，专门针对测试（配置）开始和结束的日志记录，根本不要在测试类中进行 - 创建一个侦听器，并从侦听器进行日志记录。

您可以扩展 TestListenerAdapter 并实现它规定的所有方法：

[http://testng.org/javadoc/org/testng/TestListenerAdapter.html](http://testng.org/javadoc/org/testng/TestListenerAdapter.html)

```
public class YourTestResultMonitor extends TestListenerAdapter {
    *snip*
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-08T14:24:22.900

我建议使用 TestNG 原生提供的软断言

```
package automation.tests;

import org.testng.asserts.Assertion;
import org.testng.asserts.SoftAssert;

public class MyTest {
  private Assertion hardAssert = new Assertion();
  private SoftAssert softAssert = new SoftAssert();
}

@Test
public void testForSoftAssertionFailure() {
  softAssert.assertTrue(false);
  softAssert.assertEquals(1, 2);
  softAssert.assertAll();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T16:08:50.227

与其捕获断言错误，不如在测试设计中尽量避免在测试失败后继续测试。

*   如果您需要关闭、断开连接或以其他方式释放测试使用的资源，请在 @AfterMethod 中执行此操作。
*   如果您想测试多个独立的事物并验证它们中的哪些通过，哪些失败，请将它们放入单独的测试中。如果您有多个共享类似设置的测试（例如导航到应用程序中的某个点），请将设置移动到@BeforeMethod。
*   如果您正在测试多个相互依赖的条件，则应在遇到第一个失败时立即退出测试。由于依赖关系，否则您可能会在以后的断言中看到假阴性。

在您的示例中：

```
@BeforeMethod
public void openPage() {
    driver.get("http://www.google.co.in/");
    System.out.println(" ---------- Start -------------");
}

@Test
public void googleSearchThis(){
    Assert.assertTrue(driver.findElement(By.xpath("xyz")).isDisplayed(), "unable to find the link");
}

@Test
public void googleSearchThat(){
    // assert for other things you want to test on the same page
}

@AfterMethod
public void closePage() {
    System.out.println(" ---------- End -------------");
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-20T12:40:54.053

由于您已发现错误，因此不会失败。我重新创建了如下情况。这没有失败。但是抛出了一个 Throwable。`Error`被打印。

```
public class TNG {
    WebDriver driver;

    @Test
    public void googleSearch(){
        System.setProperty("webdriver.chrome.driver", "path to web driver");
        driver = new ChromeDriver();
        driver.get("http://www.google.co.in/");
        System.out.println(" ---------- Start -------------");      
    try {
         Assert.assertTrue(driver.findElement(By.xpath("xyz")).isDisplayed(), "unable to find the link");

    } catch (Throwable t) {
        System.out.println("Error");
    }
    System.out.println(" ---------- End -------------");
  }

   @Test
   public void anotherTest(){
      System.out.println("another test");
   }
} 
```

以下是执行测试的结果。

```
another test
Starting ChromeDriver 2.30.477700 (0057494ad8732195794a7b32078424f92a5fce41) on port 43423
Only local connections are allowed.
Jul 20, 2017 5:55:33 PM org.openqa.selenium.remote.ProtocolHandshake createSession
INFO: Detected dialect: OSS
---------- Start -------------
Error
---------- End -------------
PASSED: anotherTest
PASSED: googleSearch

===============================================
Default test
Tests run: 2, Failures: 0, Skips: 0
===============================================

===============================================
Default suite
Total tests run: 2, Failures: 0, Skips: 0
=============================================== 
```

如果您想在某些测试失败的情况下继续执行测试，您可以简单地编写带有`@Test`注释的方法，例如我创建的 anotherTest() 方法。但是你不能保证测试执行的顺序。在上面的 anotherTest() 已首先执行。

# animation - 是否可以为 NSTextField 设置动画

> ID：15331581
> 
> 赞同：1
> 
> 时间：2013-03-11T05:10:57.027
> 
> 标签：animation, nstextfield

我正在尝试一个非常简单的测试方法，但无法正常工作，抱歉。
我想要实现的是在屏幕上可以看到文本字段标签的变化以及颜色的变化。

我已经尝试了几件事但没有成功，我很确定我还没有得到线索。

任何想法我做错了什么？

我现在有这个：

```
- (IBAction) writeTextToLabel:(id)sender
{

   NSAnimation *animation;

   [animation setDuration:10];

   int n = 100;

   NSString *string1 = @"";

   [animation startAnimation];

   for (int i = 1 ; n >= i ; i++) {

      [label setTextColor:[self ccRandom:1.0 :0.0]];
      string1 = [NSString stringWithFormat:@"Hello World %.3i\n",i];
      [label setStringValue:string1];

   }

   [animation stopAnimation];

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-07T03:44:16.073

您可以通过 ipmcc 使用[AnimTextFieldUsingNSAnimationContext](https://github.com/ipmcc/SOExamples/blob/master/animation/AnimTextFieldUsingNSAnimationContext/AnimTextField/SOAppDelegate.m) 此代码使更改文本的淡入/淡出效果。但是您可以在更改颜色后添加更改颜色代码`[self setStringValue: aString];`。不要忘记将 Quartz.framework 包含到您的项目中。

# java - 刷新后如何在文本字段中保留值？

> ID：15331584
> 
> 赞同：-3
> 
> 时间：2013-03-11T05:11:13.903
> 
> 标签：java, jsp

我正在以表格形式上传文件，该表格还包含一些`textfields`我在文本字段中输入的值。当我单击上传按钮时，我希望这个值保持不变。还有一个保存按钮，当我单击此按钮时，上传的文件应该保存在数据库中。谁能帮我吗？

JSP 文件在这里：

```
<body>
    <form action="./upload" enctype="multipart/form-data" >ID: <input type="text" name="id" value="" />Name: <input type="text" name="name" value="" />
       <input name="uploaded" type="file" />
       <input name="save" type="submit" value="Upload" />

       <input type="submit" value="save1" name="save" /></form>
</body> 
```

我需要servlet中的业务逻辑..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T05:19:42.113

嘿，您是说单击“上传”按钮时应该存在文本字段值。你不必做这件事。默认情况下它会在那里。你应该它会毒死人吗？请提及您的确切要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T05:14:11.740

您的选择是：

*   将数据保存到后端并重新填充表单
*   将数据保存到浏览器内存储 ( [http://www.w3schools.com/html/html5_webstorage.asp](http://www.w3schools.com/html/html5_webstorage.asp) )
*   将上传表单放入 IFRAME

最简单的选择是 IFRAME。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T06:22:01.463

请参阅没有规定使用 value 属性保留文件字段数据。

[看到这个链接](https://stackoverflow.com/questions/2665058/set-default-value-for-a-input-file-form)

```
package comunity.stackoverflow.test;

import java.io.IOException;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

/**
 * Servlet implementation class TestController
 */
public class TestController extends HttpServlet {
    private static final long serialVersionUID = 1L;
public TestController() {
    super();
}

protected void doGet(HttpServletRequest request,
        HttpServletResponse response) throws ServletException, IOException {
    process(request, response);
}

protected void doPost(HttpServletRequest request,
        HttpServletResponse response) throws ServletException, IOException {
    process(request, response);
}

private void process(HttpServletRequest request,
        HttpServletResponse response) {
    storeInRequest(request, "id");
    storeInRequest(request, "name");
    storeInRequest(request, "uploaded");

    // write your upload logic here then navigate to the same page;

    try {
        request.getRequestDispatcher("/test.jsp").forward(request, response);
    } catch (ServletException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

}

private void storeInRequest(HttpServletRequest request,String param){
    String val =  request.getParameter(param);
    if(param!=null && !param.isEmpty()){
        System.out.println(val);
        request.setAttribute(param, val);
    }
} 
```

}

**使用 standard.jat 和 jstl.jar**

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<body>
<form action="upload.do" enctype="multipart/form-data" >
    ID: <input type="text" name="id" value="${id}"/>
    Name: <input type="text" name="name" value="${name}" />
       <input name="uploaded" type="file" />
       <input name="save" type="submit" value="Upload" />

       <input type="submit" value="save1" name="save" /></form>

</body>
</html> 
```

**使用此 JSP 文件。它可能会解决您的问题。**

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>

<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<body>
<form action="upload.do" enctype="multipart/form-data" >
    ID: <input type="text" name="id" value="${id}"/><br/>
    Name: <input type="text" name="name" value="${name}" /><br/>
    <input type="file" id="selectedFile" style="display: none;" />
    <input type="text" name="uploaded" id="uploaded" value="${uploaded}" readonly="readonly" size="60">
    <input type="button" value="Browse..." onclick="mymethod()" /><br/>
       <input name="save" type="submit" value="Upload" />

       <input type="submit" value="save1" name="save" /></form>

</body>
<script type="text/javascript">
function mymethod(){
    document.getElementById('selectedFile').click();
    var val = document.getElementById('selectedFile').value;
    document.getElementById('uploaded').value = val;
}
</script>
</html> 
```

# ruby - 在 DataMapper 中动态发现底层数据库

> ID：15331585
> 
> 赞同：0
> 
> 时间：2013-03-11T05:11:22.233
> 
> 标签：ruby, database-connection, datamapper

在 Rails 中，我通过以下方式以编程方式发现底层数据库：

```
ActiveRecord::Base.connection.adapter_name 
```

它返回“MySQL”、“PostgreSQL”等。

DataMapper 的等效调用是什么？我想出的最好的是：

```
DataMapper.repository(:default).adapter.options["scheme"] 
```

那是批准的机制吗？

# c# - ASP.NET - 在后台运行 SQL 代理

> ID：15331589
> 
> 赞同：0
> 
> 时间：2013-03-11T05:11:48.573
> 
> 标签：c#, asp.net, sql, sql-server-2008, asynchronous

当我单击 ASP.NET 页面上的一些按钮时，我需要启动 SQL 代理作业。

如何让作业在后台运行而不让我的 ASP.NET 页面等待作业完成？

这个想法是单击一个按钮，SQL 代理作业在后台执行它自己的工作，而不会影响我的页面。

我现在有这样的事情：

```
SqlCommand cmd = new SqlCommand(“EXEC sp_start_job @Job_Name = ‘” + JobName + “‘”, conn);
cmd.CommandTimeout = 30;
cmd.ExecuteNonQuery(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T05:13:26.067

“sp_start_job”本质上应该是异步的，它不会等待作业完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T05:14:19.523

您可以使用[异步过程执行](http://rusanu.com/2009/08/05/asynchronous-procedure-execution/)

# php - Python：preg_replace 函数模拟

> ID：15331591
> 
> 赞同：13
> 
> 时间：2013-03-11T05:12:13.917
> 
> 标签：php, python, preg-replace

我在 PHP 中有一个小表达式：

```
 $search = array("'<(script|noscript|style|noindex)[^>]*?>.*?</(script|noscript|style|noindex)>'si",
    "'<\!--.*?-->'si",
    "'<[\/\!]*?[^<>]*?>'si",
    "'([\r\n])[\s]+'");

$replace = array ("",
  "",
  " ", 
  "\\1 ");

  $text = preg_replace($search, $replace, $this->pageHtml); 
```

我是如何在 python 上运行它的？`re.sub`?

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2016-01-24T10:50:32.840

正如[@bereal 所说](https://stackoverflow.com/questions/15331591/python-preg-replace-function-analog#comment21651285_15331591)，使用正则表达式模块[`re.sub`](https://docs.python.org/2/library/re.html#re.sub)。

这是一个简单的例子

Python：

```
>>> import re
>>> re.sub(r'([^A-Z])([A-Z])', r'\1_\2', 'camelCase').lower()
'camel_case' 
```

只是为了好玩，这也是在 PHP 上的：

```
<?php
echo strtolower(preg_replace('/([^A-Z])([A-Z])/', '$1_$2', 'camelCase'));
// prints camel_case 
```

# asp.net - 如何将日期字符串转换为特定的日期格式？

> ID：15331592
> 
> 赞同：0
> 
> 时间：2013-03-11T05:12:21.167
> 
> 标签：asp.net, c#-4.0

我从数据库中获取日期字符串值（3/13/2013 12:00:00AM），我需要像这种格式（yyyy-mm-dd）一样转换。请帮我解决这个问题。

```
string targetdate = "3/13/2013 12:00:00AM";(getting date value from DB)
DateTime lastdate = DateTime.ParseExact(targetdate, "yyyy-mm-dd", 
                  System.Globalization.CultureInfo.CurrentUICulture.DateTimeFormat); 
```

我试过了

```
Iformatprovider = null. 
```

但我得到同样的错误“**字符串未被识别为有效的日期时间**”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T05:14:27.760

首先，您需要`DateTime`使用格式将日期字符串转换为类型对象，`"M/d/yyyy HH:mm:sstt"`稍后您可以使用`"yyyy-MM-dd"`. （你用小写`m`的月份，它应该是大写`M`的月份。

```
string targetdate = "3/13/2013 12:00:00AM";
DateTime lastdate = DateTime.ParseExact(targetdate, 
                       "M/d/yyyy hh:mm:sstt", 
                       System.Globalization.CultureInfo.InvariantCulture);

string newFormat = lastdate.ToString("yyyy-MM-dd"); 
```

`newFormat`将包含`"2013-03-13"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-26T07:57:20.123

如果您知道您拥有哪种日期时间格式以及转换为哪种格式，那么在 .Net 中日期时间转换非常容易。这是一个例子。

```
 String origionalDate = "12/20/2013"; // Format : MM/dd/yyyy
    string origionalFormat = "MM/dd/yyyy";
    string convertInToFormat="dd/MM/yyyy";
    String convertedDate;
    DateTime objDT;

    if (DateTime.TryParseExact(origionalDate, origionalFormat, CultureInfo.InvariantCulture, DateTimeStyles.None, out objDT) == true)
    {
        convertedDate = objDT.ToString(convertInToFormat);
        Response.Write("<b>Origional DateTime Format ( " + origionalFormat + " ) : </b>" + origionalDate);
        Response.Write("<br/>");
        Response.Write("<b>Converted DateTime Format ( " + convertInToFormat + " )  : </b>" + convertedDate);
    }
    else
    {
        Response.Write("<b>Not able to parse datetime.</b>");
    } 
```

有关此的更多详细信息，请访问此链接。**[点击这里...](http://jayeshsorathia.blogspot.com/2013/04/beginning-net-convert-or-cast-from-one-datetime-format-to-another-format.html)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T05:55:59.507

我认为问题在于日期时间

```
"3/13/2013 12:00:00AM" 
```

不应该是凌晨 12:00:00。

应该是下午 12:00:00。

## 例子

```
 string targetdate = "3/13/2013 11:59:59AM";
  DateTime lastdate = DateTime.ParseExact(targetdate,
                               "M/d/yyyy HH:mm:sstt",
                               System.Globalization.CultureInfo.InvariantCulture);

  lastdate=lastdate.AddSeconds(1); 
```

你会得到

```
 3/13/2013 12:00:00 AM 
```

我建议你把它放在数据库端。

如果你使用的是 sql server 那么

## 例子

以下脚本使用 CONVERT() 函数来显示不同的格式。我们将使用 GETDATE() 函数来获取当前日期/时间：

```
CONVERT(VARCHAR(19),GETDATE())
CONVERT(VARCHAR(10),GETDATE(),10)
CONVERT(VARCHAR(10),GETDATE(),110)
CONVERT(VARCHAR(11),GETDATE(),6)
CONVERT(VARCHAR(11),GETDATE(),106)
CONVERT(VARCHAR(24),GETDATE(),113) 
```

结果看起来像这样：

```
Nov 04 2011 11:45 PM
11-04-11
11-04-2011
04 Nov 11
04 Nov 2011
04 Nov 2011 11:45:34:243 
```

# iphone - 单个视图控制器的两个视图

> ID：15331597
> 
> 赞同：0
> 
> 时间：2013-03-11T05:12:43.787
> 
> 标签：iphone, ios, objective-c, uiview, uiviewcontroller

我对 iOS 编程完全陌生。我正在开发一个应用程序，我需要一个不同的纵向视图和另一个横向视图。即使视图不同，两个视图中的按钮和其他控件也是相同的。所以我想为两个视图保持从按钮/标签到视图控制器的相同连接。因此，如果我在视图控制器中更改标签的值，它应该在视图中更改，而与我呈现的视图无关。

现在我面临的问题是我无法将两个不同的根视图添加到故事板中的项目。我试图在主视图中添加两个不同的子视图。这样我就可以创建视图，但我无法将两个视图中的按钮连接到单个连接。例如，

```
@property (strong, nonatomic) IBOutlet UIButton *buttonNext; 
```

只能在一个视图中连接到下一个按钮。

为了解决这个问题，我在故事板中创建了两个不同的视图，为两者添加了相同的视图控制器。然后为每个视图创建一个segue，如下所示：

```
@property (strong, nonatomic) IBOutlet UIView *portraitView;
@property (strong, nonatomic) IBOutlet UIView *landscapeView; 
```

在我的视图控制器中，我添加了：

```
- (void) willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {
[super willRotateToInterfaceOrientation:toInterfaceOrientation duration:duration];
[self adjustViewsForOrientation:toInterfaceOrientation];
}

- (void) adjustViewsForOrientation:(UIInterfaceOrientation)orientation {
//NSLog(self.view.restorationIdentifier);
if (orientation == UIInterfaceOrientationMaskLandscape || orientation == UIInterfaceOrientationLandscapeLeft || orientation == UIInterfaceOrientationLandscapeRight)
{
    if(self.landscapeView == nil)
    {
        self.landscapeView =[[UIView alloc] init];
    }
   self.view = landscapeView;
}
else if (orientation == UIInterfaceOrientationPortrait || orientation == UIInterfaceOrientationPortraitUpsideDown)
{
    self.view = portraitView;
}
} 
```

问题是第二个视图没有正确加载。最初它被加载为零。即使我在代码中初始化视图，它也不会在视图中初始化子视图/控件。在过去的三天里，我一直坚持这一点。任何帮助将非常感激。

**编辑1：**

我在这里添加了一个示例代码：http: [//cl.ly/2z3f3E290f0R](http://cl.ly/2z3f3E290f0R)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T05:21:30.390

你可以用单一视图试试这个：

**第一的**

在`viewDidLoad`方法中，**设备方向的代码**

```
[[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];
[[NSNotificationCenter defaultCenter]  addObserver:self selector:@selector(orientationChanged) name:@"UIDeviceOrientationDidChangeNotification" object:nil]; 
```

**第二**

**OrientationChanged**的​​方法

 **```
-(void)orientationChanged {

    //Check for Portrait Mode
    if (UIInterfaceOrientationIsPortrait(self.interfaceOrientation))
    {
       x=25; y=30;
    }
    //Lanscape mode
    else {
       x=50; y=40;
    }

    [button setFrame:CGRectMake(x, y, 80, 80)];
} 
```

在这里，您可以随心所欲地使用“X”和“Y”。

每当设备旋转时，此方法总是调用。

希望对您有所帮助。

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T07:27:32.060

尝试这个

```
 UIDeviceOrientation newOrientation = [[UIDevice currentDevice] orientation];
        if (newOrientation != UIDeviceOrientationUnknown && newOrientation != UIDeviceOrientationFaceUp && newOrientation != UIDeviceOrientationFaceDown)
        {
            if(orientation != newOrientation)
            {
                //ORIENTATION HAS CHANGED. Do orientation logic
                if(
                   (newOrientation == UIDeviceOrientationLandscapeLeft || newOrientation == UIDeviceOrientationLandscapeRight)&&(orientation == UIDeviceOrientationPortrait || orientation == UIDeviceOrientationPortraitUpsideDown))
                {
                    NSLog(@"Changed orientation to Landscape");
                    // Clear the current view and insert the orientation-specific view
                    [self clearCurrentView];
                    [self.view insertSubview:titleLandscapeView atIndex:0];
                }
                else if (
                         (newOrientation == UIDeviceOrientationPortrait || newOrientation == UIDeviceOrientationPortraitUpsideDown)&&(orientation == UIDeviceOrientationLandscapeLeft || orientation == UIDeviceOrientationLandscapeRight))
                {
                    NSLog(@"Changed orientation to Portrait");
                    // Clear the current view and insert the orientation-specific view
                    [self clearCurrentView];
                    [self.view insertSubview:titlePortraitView atIndex:0];
                }
                orientation = newOrientation;
            }

 -(void) clearCurrentView{
        if (titleLandscapeView.superview){
            NSLog(@"clear titleLandscapeView");
            [titleLandscapeView removeFromSuperview];
        } else if (titlePortraitView.superview){
            NSLog(@"clear titlePortraitView");
            [titlePortraitView removeFromSuperview];
        } else
        {
            NSLog(@"Neither titleLandscapeView nor titlePortraitView");
        }
    } 
```**

# c# - Web API OData - 使用 ODataModelBuilder 公开 ComplexType

> ID：15331601
> 
> 赞同：2
> 
> 时间：2013-03-11T05:13:10.507
> 
> 标签：c#, asp.net, asp.net-web-api, odata

我有 2 个实体（订单和产品），我使用 ODataModelBuilder 作为 OData 公开。在 Order 实体中，有一个 Status 复杂类型。有没有办法公开 Status 复杂类型？

```
ODataModelBuilder _modelBuilder = new ODataModelBuilder();

var _status = _modelBuilder.ComplexType<Status>();
_status.Property(x => x.Description);
_status.Property(x => x.Name);
_status.Property(x => x.StatusId);

var _order = _orders.EntityType;
_order.HasKey(x => x.OrderId);
_order.Property(x => x.ProductId);
_order.Property(x => x.Quantity);
_order.ComplexProperty(x => x.Status);

var _product = _products.EntityType;
_product.HasKey(x => x.ProductId);
_product.Property(x => x.Name);
_product.Property(x => x.Description); 
```

我能想到的另一种方法是将 Status 转换为 EntityType。但是，使用这种方法，我无法在 Order 实体类型中定义 Status ComplexProperty，因此，从 Order 类型中删除了 Status 属性。Order 实体类型必须具有 Status。

有没有人在使用 Web API 中的 OData 之前遇到过这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T16:16:34.140

似乎没有一种方法可以*完全按照*您的意愿去做。但是，您当然可以解决此问题。

```
public class Status
{
   // whatever you have here...
}

// essentially create a duplicate class
public class DerivedStatus : Status { }

// using modelBuilder...
modelBuilder.ComplexType<Status>();
modelBuilder.EntitySet<DerivedStatus>("Statuses"); 
```

不太理想，但它似乎工作。据我所知，您还必须删除对*ComplexProperty*的调用。让我知道这是否适合你。

# python - 在python中格式化输出

> ID：15331604
> 
> 赞同：1
> 
> 时间：2013-03-11T05:13:19.353
> 
> 标签：python, linux

这是我的代码：

```
import commands

mount = commands.getoutput('mount -v')
lines = mount.splitlines()
points = map(lambda line: line.split()[2], lines)
permission = map(lambda line: line.split()[5], lines)
print points
print permission 
```

我得到的输出是：

```
['/', '/proc', '/sys', '/dev/pts', '/dev/shm', '/boot', '/proc/sys/fs/binfmt_misc', '/var/lib/nfs/rpc_pipefs']
['(rw)', '(rw)', '(rw)', '(rw,gid=5,mode=620)', '(rw,rootcontext="system_u:object_r:tmpfs_t:s0")', '(rw)', '(rw)', '(rw)'] 
```

我想在它前面显示每个分区的权限。像：

```
'/'        (rw)
'/proc'    (rw) 
```

等等。如何做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T05:14:27.547

您可以为此使用 zip 功能

```
>>> x = [1, 2, 3]
>>> y = [4, 5, 6]
>>> zipped = zip(x, y)
>>> zipped
[(1, 4), (2, 5), (3, 6)] 
```

在你的情况下

```
zipped = zip(points, permission)
for i, j in zipped:
    print i, j 
```

更多细节看[这里](http://docs.python.org/2/library/functions.html#zip)

# jquery - 使用纯 javascript/jquery 动画的 SVG 折线图

> ID：15331607
> 
> 赞同：0
> 
> 时间：2013-03-11T05:13:42.240
> 
> 标签：jquery, svg, jquery-svg

我创建了一个 SVG 折线图。请参考下面的截图。

![在此处输入图像描述](../Images/786a908694d4770e4ed52e6a9e5e62d8.png)

请参阅下面的 SVG 元素以获取折线图。

```
<svg>
-------------------------------------------------------------
<path id="Ram" fill="none" stroke-width="3" stroke="url(#container_Ram1Gradient)" stroke-linecap="butt" stroke-linejoin="round" d="M 142.8 90.51999999999998 L 213.6 371.32 M 213.6 371.32 L 284.4 306.52 M 284.4 306.52 L 355.2 241.71999999999997 M 355.2 241.71999999999997 L 426 163.96000000000004 M 426 163.96000000000004 L 496.8 224.44000000000003 M 496.8 224.44000000000003 L 567.5999999999999 129.39999999999998 M 567.5999999999999 129.39999999999998 L 638.4 202.83999999999997 M 638.4 202.83999999999997 L 709.2 215.8 " clip-path="url(#ChartAreaClip)"/>
-------------------------------------------
</svg> 
```

我想在该折线图中执行动画。这意味着折线图将动态显示/它将在运行时绘制。

请参考以下链接。

[http://www.highcharts.com/demo/](http://www.highcharts.com/demo/)

我不想使用`<animate> and <animateMotion>`或任何与 SVG 动画相关的东西。因为某些动画不适用于所有浏览器。

所以我想执行纯 jquery 动画（即使用 jquery.animate 方法）。如何使用 jquery animate 方法或任何其他方式在折线图中创建或应用动画？

谢谢，

湿婆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-09-30T05:56:32.213

您可以使用 SnapSvg javascript 库轻松实现这一点有关信息，您可以转到[此链接](http://simpleglyph.in/svg-graph-animation-using-snap-svg-library/)

```
var snapA = Snap("#svg");

jQuery(document).ready(function() {
    var home_graphAnimation = {

    drawsvgline: function(data,i, color, callback) {
      var i2 = i+1;
      var circle1 = snapA.circle(data[i].x , data[i].y ,5);
      circle1.attr({
        stroke: color,
        fill: color,
      });
      var pathA = snapA.path("M "+data[i].x +" "+ data[i].y + " L " + data[i2].x + " " + data[i2].y);
      var lenA = pathA.getTotalLength();
      pathA.attr({
        stroke: color,
        strokeWidth: 4,
        fill: 'none',
        // Draw Path
        "stroke-dasharray": lenA + " " + lenA,
        "stroke-dashoffset": lenA
      }).animate({"stroke-dashoffset": 0}, 100,mina.linear,function(){

        var circle2 = snapA.circle(data[i2].x , data[i2].y ,5);
        circle2.attr({
            stroke: color,
            fill: color,
        });    
        if (data[i2+1]) {
           home_graphAnimation.drawsvgline(data,i+1,color,callback);
        }

        if (i2+1 == data.length) {
            console.log("Callback Executed");
            if(typeof callback == 'function') {
                callback(data);
                return;
            }
        }

      });  
    },

    drawVerticalLine: function(){
        var getPath = snapA.path('M958 420 l0 -320');
        var pathLength = getPath.getTotalLength();

        var perc = 0;
        var dotLength = 10;
        var gapLength = 10;

        getPath.attr({
            stroke: '#000',
            strokeWidth: 2,
            strokeDasharray: 0,
            strokeDashoffset: 0,

        });

        function verticalDashLine(){
            perc +=1;
                if(perc>100){
                    perc = 100;
                }
            var visibleLength = pathLength*perc/100;
            var drawnLength = 0;
            var cssValue = '';
            while(drawnLength < visibleLength){
             drawnLength += dotLength;
                if(drawnLength < visibleLength){
                    cssValue += dotLength+ ' ';
                    drawnLength += gapLength;
                    if(drawnLength < visibleLength){
                        cssValue += gapLength+ ' ';
                    }
                }else{
                    cssValue += (visibleLength + dotLength - drawnLength)+ ' ';
                }
            }
            cssValue += pathLength;

            if(perc<100){
             setTimeout(verticalDashLine, 10);
            }
            // console.log(cssValue);
            getPath.attr({
                strokeDasharray: cssValue
            });

            if(perc==100){
                console.log("Complete");
                verticalDashLineAfter();
            }
        }

        function verticalDashLineAfter() {

            // DRAW  Circle after dash line animation
            var circleRound = snapA.circle(958 ,100 ,5);
            circleRound.attr({
                stroke: '#000',
                strokeWidth: 2,
                fill: 'none'
            });

            // DRAW Line After Circle
            var lineAfterCircle = snapA.path("M 965 100 l 80 0");
            var lineAfterCircle_len = lineAfterCircle.getTotalLength();
            lineAfterCircle.attr({
                stroke: '#000',
                strokeWidth: 2,
                fill: 'none',
                "stroke-dasharray": lineAfterCircle_len + " " + lineAfterCircle_len,
                "stroke-dashoffset": lineAfterCircle_len

            }).animate({"stroke-dashoffset": 0}, 500,mina.easeinout,function(){

                var text1 = snapA.text(1060 ,108 ,"INNOVATION");
                text1.attr({
                    "fill" : "#000",
                    "class" : "invoer-text"
                });
            });
        }

        verticalDashLine();

    }    

}

        var data = [{"x":15,"y":181},{"x":116,"y":153},{"x":217,"y":230},{"x":321,"y":174},{"x":429,"y":225},{"x":537,"y":217},{"x":644,"y":192},{"x":747,"y":166},{"x":852,"y":157},{"x":958,"y":180},{"x":1060,"y":303},{"x":1159,"y":402},{"x":1264,"y":404},{"x":1367,"y":392},{"x":1475,"y":377},{"x":1579,"y":419},{"x":1686,"y":410},{"x":1789,"y":418},{"x":1899,"y":407}]

            var data1 = [{"x":6,"y":305},{"x":102,"y":289},{"x":213,"y":271},{"x":318,"y":310},{"x":426,"y":317},{"x":528,"y":308},{"x":637,"y":266},{"x":740,"y":258},{"x":845,"y":319},{"x":958,"y":347},{"x":1054,"y":261},{"x":1162,"y":242},{"x":1267,"y":219},{"x":1369,"y":211},{"x":1480,"y":254},{"x":1584,"y":204},{"x":1689,"y":234},{"x":1793,"y":223},{"x":1897,"y":194}];

            home_graphAnimation.drawsvgline(data,0, "#F6A85A",function(data){

                // Callback Draw Second Graph after Drawing first Graph
                home_graphAnimation.drawsvgline(data1,0, "#5DBEB7",function(data){

                    // Callback Draw Verticla Line Animation After Drawing Second Graph
                    home_graphAnimation.drawVerticalLine();
                });
            });

});  //END Document Ready
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/snap.svg/0.4.1/snap.svg-min.js"></script>
<svg id="svg" viewBox="0 0 1920 1080"></svg>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T15:17:51.983

首先，您可以将数据存储在 json 对象中：

```
{
    "John": [
        {
            "x": 142.8,
            "y": 90.52
        },
        {
            "x": 213.6,
            "y": 371.32
        }
    ]
} 
```

svg 路径将是这样的：

```
<path id="Ram" fill="none" stroke-width="3" stroke="url(#container_Ram1Gradient)" stroke-linecap="butt" stroke-linejoin="round" d="" clip-path="url(#ChartAreaClip)"/> 
```

现在你必须用 javascript/jquery 填充路径，如下所示：

```
var counter = 0;

function addPoint(x, y, isFirst){
    var new_point = (isFirst? " M " : " L ")+x+" "+y;
    $('#Ram').attr("d", $('#Ram').attr("d")+""+new_point);
    counter++;
    if(counter < John.length){
        setTimeout(addPoint(John[counter].x, John[counter].y, false),200); // Add a new point after 200 milliseconds
    }
}

addPoint(John[0].x, John[0].y, true); 
```

# ios - CSS 和 JS 文件未在 uiwebview 中加载

> ID：15331608
> 
> 赞同：2
> 
> 时间：2013-03-11T05:13:42.570
> 
> 标签：ios, uiwebview

在我的应用程序中，一个包含在文件夹中的网站。我尝试使用以下代码在 webview 中加载它：

```
self.wView.dataDetectorTypes = UIDataDetectorTypeLink;
NSString *htmlFile = [[NSBundle mainBundle] pathForResource:@"index" ofType:@"html" inDirectory:NO];
    NSLog(@"%@",htmlFile);
    //NSData *pathData = [NSData dataWithContentsOfFile:htmlFile];
    //NSString *htmlString = [NSString stringWithContentsOfFile:htmlFile encoding:NSUTF8StringEncoding error:nil];
    NSURL *url = [NSURL URLWithString:[htmlFile lastPathComponent] relativeToURL:[NSURL fileURLWithPath:[htmlFile stringByDeletingLastPathComponent] isDirectory:YES]];

    //(void)[NSURLConnection connectionWithRequest:req delegate:self];
    [self.wView loadRequest:[NSURLRequest requestWithURL:url]] ; 
```

我在 nslog 中获取文件路径。但是在我的 webview 中，没有加载 css 和 js 文件。

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-30T05:08:51.477

这个问题的简单解决方案

在将网站文件夹复制到 XCode 中时，只需选择**为任何添加的文件夹创建文件夹引用选项**

# html - 显示线条的图像显示错误

> ID：15331612
> 
> 赞同：0
> 
> 时间：2013-03-11T05:14:01.287
> 
> 标签：html

![在此处输入图像描述][1]我有问题。我放入背景的图像分为四个部分。页眉、body1、body2 和页脚。我的问题是当 body1 和 body2 连接在一起时，图像中有一条线。当我重复时，这也适用于 body2，这条线在底部。问题是当 div 中的一个图像显示然后另一个图像之后它们之间出现一条线这是我的代码：

```
<div id="header" 
        style="background-image:url('Graphic/banner.png'); height: 84px;">    
    </div>
    <div id="Body1" 
        style="background-image:url('Graphic/topper.png'); height: 364px;" >    
    </div>
    <div id="Body2" 
        style="background-image:url('Graphic/body.png'); height: 364px;">    
    </div>
    <div id="Footer" 
        style="background-image:url('Graphic/footer.png'); height: 82px;">    
    </div> 
```

知道如何使线条消失吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T09:26:31.447

试试这个：这里我的 div 之间没有空格，请确保您的图像上没有空格。

```
<html>
<head>
<title></title>
</head>
<body>
<div id="header" 
        style="background-image:url('#'); background-color: #EBC64D; height: 84px;">    
    </div>
<div id="container">    
    <div id="Body1" 
        style="background-image:url('#'); background-color: #07ED5F; height: 364px;" >    
    </div>

    <div id="Body2" 
        style="background-image:url('#'); background-color: #2E16A8; height: 364px;">    
    </div>
</div>  
    <div id="Footer" 
        style="background-image:url('#'); background-color: #E01B6A; height: 82px;">    
    </div>
</body>
</html> 
```

# linq - 实体框架代码优先 - 多对多 - 包括条件

> ID：15331616
> 
> 赞同：2
> 
> 时间：2013-03-11T05:14:11.863
> 
> 标签：linq, include, ef-code-first, eager-loading

我有两个实体，`Store`并且`Catalog`使用流利的 Api 建立了多对多的关系。`id`我想通过所有状态等于“已发布”的目录来获得商店。下面我尝试编写以下查询，但没有得到预期的结果。

```
var store = context.Stores.Include("Catalogs").Where(s => s.StoreID == id && s.Catalogs.Any(c => c.Status == "Published")).SingleOrDefault(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T05:20:16.290

您所要求的是“给我具有此 ID 的商店，但前提是它具有已发布的目录”（“任何”调用）。

仅获取已发布目录的最简单方法是将它们投影为匿名类型：

```
var result = (from s in context.Stores
             where s.StoreID == id
             select new
             {
                 Store = s,
                 Catalogs = s.Catalogs.Where(c => c.Status == "Published")
             }).SingleOrDefault(); 
```

...或者，在流畅的界面中：

```
var result = context.Stores.Where(st => st.StoreID == id)
                           .Select(s => new 
                           {
                               Store = s,
                               Catalogs = s.Catalogs.Where(c => c.Status == "Published"),
                           }).SingleOrDefault(); 
```

所以`result.Catalogs`保留所有适用于`result.Store`.

# html - 在非多字节 Vim 中正确显示 utf-8 HTML 字符

> ID：15331618
> 
> 赞同：0
> 
> 时间：2013-03-11T05:14:20.267
> 
> 标签：html, vim, utf-8

我一直在尝试在 vim 中打开 .epub 文件以供阅读（是的，这很愚蠢，让我们暂时忽略它）并且我在 epubs 的内部 html 如何显示诸如 ' 和 " 之类的字符时遇到了麻烦。

Vim在打开文件时显示`'`为less 给了我. 我不确定 vim 如何处理这个问题（它似乎将和视为单个字符），因此我不确定如何用它们的 utf-8 等效字符替换特殊的 HTML 字符。`â~@~Y``<E2><80><99>``~@``~Y`

是否有可以正确显示的编码设置？或者手动输入这些字符以便我可以创建搜索和替换宏的方法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T07:50:39.077

看起来 Vim 没有正确检测到 UTF-8 编码；你可以检查

```
:setlocal fileencoding? 
```

并强制使用 UTF-8

```
:edit ++enc=utf-8 file.epub 
```

（或调整您的`'fileencodings'`选项以自动检测到它）。

# c# - 如何在我的 facebook 标签应用程序中获取 facebook 粉丝页面名称

> ID：15331622
> 
> 赞同：0
> 
> 时间：2013-03-11T05:14:30.443
> 
> 标签：c#, asp.net-mvc, facebook, facebook-c#-sdk

我创建了一个 facebook 标签应用程序，允许 facebook 粉丝页面管理员将其作为标签添加到他们的粉丝页面中。到目前为止，一切正常，除了我无法**获得“粉丝页面名称”**？我想在我的 facebook 应用程序中显示它作为标题说“**我的粉丝页面名称**的 twitter 应用程序”。

最重要的是，我如何获得**他们的 Facebook 粉丝页面关注者列表**？

我正在使用 ASP MVC4 facebook 模板。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T08:09:29.840

当某些用户访问您的 Page Tab 应用程序时，Facebook 会发布您已签名的请求。引自 Facebook 的[页面选项卡教程](https://developers.facebook.com/docs/appsonfacebook/pagetabs/)

> 当用户选择您的页面选项卡时，您将收到带有一个附加参数**page**的 signed_request 参数。这个参数包含一个带有**id**（当前页面的页面 id）、**admin**（如果用户是页面的管理员）和like （如果用户喜欢该页面）**的JSON 对象。**

您可以利用获得的**id**来检索您需要的信息**Name of Page**。

虽然您无法获取赞过该页面**的用户列表**，但您可以获得该页面的赞数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T14:52:43.173

[从http://www.nuget.org/packages/Facebook.CSharp.SDK/](http://www.nuget.org/packages/Facebook.CSharp.SDK/)下载 sdk

```
var config = new Dictionary<string, object>();
//your application id and secret from https://developers.facebook.com/apps
config.Add("appId", "3955.......");
config.Add("secret", "4c1d...............");
config.Add("fileUpload", true); //optional

FacebookClient client = new FacebookClient(config);
var fields = client.getSignedRequest()["page"] as Dictionary<string, object>;

var graphApiCall = new FacebookGraphApiRequest();
graphApiCall.Method = FacebookApiMethodType.GET;
graphApiCall.Path = fields["id"];
graphApiCall.Params = null;
//this is the json string that holds all the json string.
Response.Write(client.api(graphApiCall)); 
```

# java - Grid Layout 视图 Java Swing 组件位置

> ID：15331623
> 
> 赞同：0
> 
> 时间：2013-03-11T05:14:43.110
> 
> 标签：java, swing, layout, grid

我在 Java Swing 中使用网格布局时遇到问题。我创建面板并添加`GridLayout`4 列和 2 行。

我尝试在`JButton`其中添加，但`JButton`拉伸宽度。看这张图片：

![在此处输入图像描述](../Images/25dc237718d4a1d540bd6299ee3d61f4.png)

我想创建`JButton`这样的位置，因为我想使用 Java Swing 制作图片库。看这张图片：

![在此处输入图像描述](../Images/61a88a0b4b52c47cef01a658bab80e1a.png)

任何想法？谢谢之前:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T05:22:54.610

使用 GridBagLayout 并指定 GridBagConstraints。它将帮助您根据需要渲染组件

请参考[GridBagLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T05:56:15.417

您可以尝试布局[http://java-sl.com/tip_columns_flow_layout.html](http://java-sl.com/tip_columns_flow_layout.html)

当组件流动以将列填充到可用宽度时，这是一种 Win Explorer 布局。

# c++ - 用 GMP 解析十进制值？

> ID：15331631
> 
> 赞同：0
> 
> 时间：2013-03-11T05:15:28.607
> 
> 标签：c++, gmp

如何准确解析十进制值？也就是说，我有一个值字符串，比如“43.879”，我希望得到一个准确的 GMP 值。我从文档中不清楚如何，或者这是否真的可能。它似乎不适合整数/有理数/浮点值类型 - 尽管也许可以使用有理数。

我的意图是在加法和减法等运算中保留精确的小数，但在除法或指数等运算中切换到高精度浮点数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T06:22:29.777

大多数库为您提供任意大的精度，包括 GMP。然而，即使精度很高，也有一些数字不能用二进制格式精确表示，就像你不能用十进制表示 1/3 一样。对于许多应用程序，将精度设置为较高的数字，如 10，进行计算，然后将结果四舍五入回到所需的精度，如 3 工作。它不适合你吗？看到这个 -[是否有与 Java 的 BigDecimal 等效的 C++？](https://stackoverflow.com/questions/4798777/is-there-a-c-equivalent-to-javas-bigdecimal)

您也可以使用[http://software.intel.com/en-us/articles/intel-decimal-floating-point-math-library](http://software.intel.com/en-us/articles/intel-decimal-floating-point-math-library)

********* 编辑

对于许多数字，二进制浮点中不存在精确表示；大多数当前浮点库提供的那种。无论精度如何，像 0.1 这样的数字都不能表示为二进制数。

为了能够执行您建议的操作，图书馆必须执行相当于“手动加法”、“手动除法”的操作——您在铅笔和纸上添加两个十进制数的那种。例如，要存储 0.1，库*可能会*选择将其表示为字符串本身，然后对字符串进行添加。不用说，一个幼稚的实现会使这个过程变得非常缓慢——慢几个数量级。要添加 0.1 + 0.1，它必须解析字符串、添加 1+1、记住进位、记住小数位等。这就是计算机微代码在几个 CPU 周期（或一条指令）内为您所做的事情. 您的软件库最终会占用大约 100 个 CPU 周期/指令，而不是单条指令。

如果它试图将 0.1 转换为一个数字，它又回到了 1 - 0.1 不能是二进制数字。

然而，人们确实认识到准确表示 0.1 的必要性。只是二进制数表示不会这样做。这就是更新的浮点标准出现的地方，也是英特尔小数点库的发展方向。

重复我之前的例子，假设你有一台可以做 10 个基数的 10 个基数的计算机。该计算机无法将 1/3 存储为“普通”浮点数。它必须存储数字为 1/3 的表示。相当于它是如何写在纸上的。尝试在纸上写下 1/3 作为基数为 10 的浮点数。

另请参阅[为什么不能用二进制精确表示十进制数？](https://stackoverflow.com/questions/1089018/why-cant-decimal-numbers-be-represented-exactly-in-binary)

# java - Android `的等效java代码是什么 `?

> ID：15331632
> 
> 赞同：2
> 
> 时间：2013-03-11T05:15:38.307
> 
> 标签：java, android

什么是等效的 java 代码`<item android:left="10dp">`？

更具体地说，我试图以编程方式获得一个相当于：

```
<item android:left="5dp" android:bottom="5dp">
    <bitmap 
        android:src="@drawable/screw"
        android:gravity="bottom|left" />
</item> 
```

**编辑**

到目前为止，我得到了：

```
BitmapFactory.Options options = new BitmapFactory.Options();
options.inJustDecodeBounds = false;
Bitmap screw = BitmapFactory.decodeResource(res, resId, options);    
BitmapDrawable s = new BitmapDrawable(res, screw);
s.setGravity(Gravity.LEFT|Gravity.BOTTOM); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T07:19:14.267

您可以很容易地从 xml 中膨胀视图，或者如果您以编程方式加载可绘制对象，则应使用文档：http: [//developer.android.com/reference/android/graphics/drawable/LayerDrawable.html](http://developer.android.com/reference/android/graphics/drawable/LayerDrawable.html)

自从我使用 java/android 以来已经有一段时间了，但是像这样。

```
Drawable[] layers = [drawable1, drawable2, etc]
LayerDrawable mDrawable = new LayerDrawable(layers);
//mDrawable.setLayerInset(int index, int left, int top, int right, int bottom)
//you will have to manually calculate density pixels.
mDrawable.setLayerInset(0, 5, 0, 0, 5) 
```

# magento - 在单页成功页面上获取图像

> ID：15331633
> 
> 赞同：0
> 
> 时间：2013-03-11T05:15:45.467
> 
> 标签：magento

我想在 magento 的订单成功页面上获取产品图像，这是代码

```
<?php
$order = Mage::getModel('sales/order')->loadByIncrementId(Mage::getSingleton('checkout/session')->getLastRealOrderId());

foreach ($order->getAllItems() as $item) {

  //Need image code here

}
?> 
```

有人知道如何在单页成功页面上获取产品图片吗

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T05:43:46.113

检查带有缩略图的图像的代码和平

```
<?php
$model = Mage::getModel('sales/order') //getting product model

$_product = $model->load(Mage::getSingleton('checkout/session')->getLastRealOrderId()); //getting product object for particular product id

echo $_product->getImageUrl(); //product's image url
echo $_product->getSmallImageUrl(); //product's small image url
echo $_product->getThumbnailUrl(); //product's thumbnail image url  

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T05:51:17.573

```
 $orderIcrementId = Mage::getSingleton('checkout/session')->getLastRealOrderId();

       $order = Mage::getModel('sales/order')->loadByIncrementId($orderIcrementId);
       $orderItems = $order->getAllItems();
       foreach($orderItems as $orderItem):
         $_product = Mage::getModel('catalog/product')->load($orderItem->getProductId());
         $product_small_image_path = Mage::helper('catalog/image')->init($_product, 'small_image')->resize(135);
         $product_thumbnail_path = Mage::helper('catalog/image')->init($_product, 'thumbnail')->resize(56);
       endforeach; 
```

# ios - 运行时更改其字体名称后更改 UIbutton 位置

> ID：15331635
> 
> 赞同：1
> 
> 时间：2013-03-11T05:15:58.337
> 
> 标签：ios, objective-c, uibutton

当我更改`UIButton`字体名称时。那么它也会改变它的 x 位置。我正在使用自定义字体

我已附上`image`。在这`image`你会得到想法。我怎么解决这个问题？

感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T07:04:46.293

设置 contentHorizo​​ntalAlignment：

```
btn.contentHorizontalAlignment = UIControlContentHorizontalAlignmentLeft; 
```

您可能还想调整左插图的内容，否则文本将触及左边框：

```
btn.contentEdgeInsets = UIEdgeInsetsMake(0, 10, 0, 0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T07:05:20.787

你只给了这个按钮 alignmnet

```
[btn_Trade setContentHorizontalAlignment:UIControlContentHorizontalAlignmentCenter]; 
```

尝试根据您的需要对其余按钮进行对齐，但请确保所有按钮具有相同的对齐方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T05:54:29.537

这可能是因为您正在使用 autoRelease 方法

```
[UIButton buttonWithType:UIButtonTypeCustom]; 
```

尝试使用`initWithFrame:`.

可能这会有所帮助。我没试过。试试看。或者

可能需要设置

```
btn_Trade = UIControlContentHorizontalAlignmentLeft; 
```

所有按钮都一样。

问候，尼拉姆维尔马

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T05:19:27.773

这可能是因为字体默认留下的间距。表示字体中字符的位置不同。立即解决方案是在完成字体设置后设置按钮的位置。

# java - 将字符串转换为数组列表 在java中

> ID：15331637
> 
> 赞同：28
> 
> 时间：2013-03-11T05:16:25.613
> 
> 标签：java, string, list, arraylist, converter

如何将不带分隔符的字符串转换为`ArrayList<Character>`.

我的字符串是这样的：

```
String str = "abcd..." 
```

我知道这样做的一种方法是将 String 转换为`char[]`第一个，然后将其转换`char []`为`ArrayList <Character>`.

有没有更好的方法来做到这一点？喜欢直接转换？考虑到时间和性能，因为我正在使用大型数据库进行编码。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-11T05:41:49.860

您需要像这样添加它。

```
String str = "abcd...";
ArrayList<Character> chars = new ArrayList<Character>();
for (char c : str.toCharArray()) {
  chars.add(c);
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-07-15T12:00:23.340

使用 lambda 表达式来做到这一点。

```
String big_data = "big-data";
ArrayList<Character> chars
        = new ArrayList<>(
                 big_data.chars()
                .mapToObj(e -> (char) e)
                .collect(
                        Collectors.toList()
                )
        ); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-07-01T16:10:17.897

抱歉，Retrobump，但这现在真的很容易！

您可以使用 Streams 在 Java 8 中轻松完成此操作！尝试这个：

```
String string = "testingString";
List<Character> list = string.chars().mapToObj((i) -> Character.valueOf((char)i)).collect(Collectors.toList());
System.out.println(list); 
```

您需要使用`mapToObj`，因为`chars()`返回一个`IntStream`.

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-11T05:22:10.470

如果您在创建后不需要修改列表，可能更好的方法是将字符串包装到类实现`List<Character>`接口中，如下所示：

```
import java.util.AbstractList;
import java.util.List;

public class StringCharacterList extends AbstractList <Character>
{
    private final String string;

    public StringCharacterList (String string)
    {
        this.string = string;
    }

    @Override
    public Character get (int index)
    {
        return Character.valueOf (string.charAt (index));
    }

    @Override
    public int size ()
    {
        return string.length ();
    }
} 
```

然后像这样使用这个类：

```
List <Character> l = new StringCharacterList ("Hello, World!");
System.out.println (l); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-11T05:35:04.007

```
public static void main(String[] args) {
        // TODO Auto-generated method stub
        String str = "abcd...";
        ArrayList<Character> a=new ArrayList<Character>();
        for(int i=0;i<str.length();i++)
        {
            a.add(str.charAt(i));

        }
        System.out.println(a);
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-17T19:32:44.227

你可以这样做：

```
import java.util.ArrayList;

public class YourClass{

    public static void main(String [] args){

        ArrayList<Character> char = new ArrayList<Character>();
        String str = "abcd...";

        for (int x = 0; x < str.length(); x ++){
            char.add(str.charAt(x));
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-05-22T15:17:28.657

```
String myString = "xxx";
ArrayList<Character> myArrayList = myString.chars().mapToObj(x -> (char) x).collect(toCollection(ArrayList::new));
myArrayList.forEach(System.out::println); 
```

# android - 在Android中更改方向时布局损坏

> ID：15331643
> 
> 赞同：2
> 
> 时间：2013-03-11T05:16:42.270
> 
> 标签：android, layout, orientation, landscape

我正在开发用于显示频道直播的应用程序，它默认以横向模式启动，我可以从我的选项菜单将其更改为纵向，反之亦然

现在我在清单中使用此代码并将其放入该活动 android:configChanges="keyboard|keyboardHidden|orientation|screenSize"

当我启动应用程序时，它工作正常，但是当我将方向更改为纵向时，应用程序挂起并且选项菜单不会像往常一样消失。

如果我从清单中删除了这部分`|screenSize`，它工作正常，但布局土地不起作用，纵向布局用于两个方向。

这是 LiveActivity.java

```
package com.shadatv.shada;

import android.media.MediaPlayer;
import android.net.Uri;
import android.os.Bundle;
import android.app.Activity;
import android.app.AlertDialog;

import android.content.DialogInterface;
import android.content.Intent;
import android.content.pm.ActivityInfo;
import android.content.res.Configuration;

import android.view.Menu;
import android.view.MenuItem;

import android.view.WindowManager;

import android.widget.VideoView;

public class LiveActivity extends Activity {
    VideoView videoView;

    private AlertDialog.Builder errorDialog;
    String httpLiveUrl = "http://38.96.148.147:1935/live/livestream/playlist.m3u8";

    // =============================================================================

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
        if (getResources().getConfiguration().orientation == Configuration.ORIENTATION_LANDSCAPE) {
            getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                    WindowManager.LayoutParams.FLAG_FULLSCREEN);
        }
        setContentView(R.layout.live);
        try {
            videoView = (VideoView) findViewById(R.id.myVideoView);
            videoView.setVideoURI(Uri.parse(httpLiveUrl));
            videoView.requestFocus();

            videoView
                    .setOnPreparedListener(new MediaPlayer.OnPreparedListener() {

                        @Override
                        public void onPrepared(MediaPlayer mp) {
                            // TODO Auto-generated method stub

                            videoView.seekTo(1000);
                            videoView.start();

                        }
                    });

        } catch (Exception e) {
            errorDialog = new AlertDialog.Builder(this);
            errorDialog.setMessage("مشكلة في البث");
            errorDialog.setCancelable(true);
            errorDialog.setNeutralButton("Ok",
                    new DialogInterface.OnClickListener() {
                        // click listener on the alert box
                        public void onClick(DialogInterface arg0, int arg1) {

                        }
                    });
            AlertDialog errorStream = errorDialog.create();
            errorStream.show();
        }
    }

    // =============================================================================

    @Override
    public boolean onPrepareOptionsMenu(Menu menu) {
        menu.clear();
        getMenuInflater().inflate(R.menu.activity_shada, menu);
        MenuItem fullItem = menu.findItem(R.id.fullScreen);
        MenuItem smallItem = menu.findItem(R.id.smallScreen);

        if (getResources().getConfiguration().orientation == Configuration.ORIENTATION_LANDSCAPE) {
            fullItem.setVisible(false);
            smallItem.setVisible(true);
        } else if (getResources().getConfiguration().orientation == Configuration.ORIENTATION_PORTRAIT) {
            smallItem.setVisible(false);
            fullItem.setVisible(true);
        }
        return super.onPrepareOptionsMenu(menu);
    }

    // =============================================================================

    public void onConfigurationChanged(Configuration newConfig) {
        super.onConfigurationChanged(newConfig);
        if (getResources().getConfiguration().orientation == Configuration.ORIENTATION_LANDSCAPE) {
            getWindow().clearFlags(
                    WindowManager.LayoutParams.FLAG_FORCE_NOT_FULLSCREEN);
            getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                    WindowManager.LayoutParams.FLAG_FULLSCREEN);
            // setContentView(R.layout.activity_shada);
        } else if (getResources().getConfiguration().orientation == Configuration.ORIENTATION_PORTRAIT) {
            getWindow().clearFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);
            getWindow().setFlags(
                    WindowManager.LayoutParams.FLAG_FORCE_NOT_FULLSCREEN,
                    WindowManager.LayoutParams.FLAG_FORCE_NOT_FULLSCREEN);
            // setContentView(R.layout.activity_shada1);
        }
    }

    // =============================================================================

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case R.id.about: {
            // TODO Auto-generated method stub
            startActivity(new Intent("com.shadatv.MainActivity"));
        }
            break;

        case R.id.smallScreen: {
            setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
        }
            break;

        case R.id.fullScreen: {
            setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
        }
            break;
        }
        return true;
    }

} 
```

清单.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.shadatv.shada"
    android:versionCode="3"
    android:versionName="1.0.2" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/shada"
        android:label="@string/app_name"

        >       
        <activity
            android:name=".MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity
            android:name=".LiveActivity"
            android:configChanges="keyboard|keyboardHidden|orientation|screenSize"
            android:exported="false"
            android:label="@string/app_name"
            android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >

            <intent-filter>
                <action android:name="com.shadatv.LiveActivity" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>

</manifest> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T06:24:57.483

我通过拉出`setContentView`和`try/catch`块来解决它`onCreate`并把它`onConfigChanged`

```
package com.shadatv.shada;

import android.media.MediaPlayer;
import android.net.Uri;
import android.os.Bundle;
import android.app.Activity;
import android.app.AlertDialog;

import android.content.DialogInterface;
import android.content.Intent;
import android.content.pm.ActivityInfo;
import android.content.res.Configuration;

import android.view.Menu;
import android.view.MenuItem;

import android.view.WindowManager;

import android.widget.VideoView;

public class LiveActivity extends Activity {
    VideoView videoView;

    private AlertDialog.Builder errorDialog;
    String httpLiveUrl = "http://38.96.148.147:1935/live/livestream/playlist.m3u8";

    // =============================================================================

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
        // if (getResources().getConfiguration().orientation ==
        // Configuration.ORIENTATION_LANDSCAPE) {
        // getWindow().clearFlags(
        // WindowManager.LayoutParams.FLAG_FORCE_NOT_FULLSCREEN);
        // getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
        // WindowManager.LayoutParams.FLAG_FULLSCREEN);
        // }
        // setContentView(R.layout.live);

    }

    // =============================================================================

    @Override
    public boolean onPrepareOptionsMenu(Menu menu) {
        menu.clear();
        getMenuInflater().inflate(R.menu.activity_shada, menu);
        MenuItem fullItem = menu.findItem(R.id.fullScreen);
        MenuItem smallItem = menu.findItem(R.id.smallScreen);

        if (getResources().getConfiguration().orientation == Configuration.ORIENTATION_LANDSCAPE) {
            fullItem.setVisible(false);
            smallItem.setVisible(true);
        } else if (getResources().getConfiguration().orientation == Configuration.ORIENTATION_PORTRAIT) {
            smallItem.setVisible(false);
            fullItem.setVisible(true);
        }
        return super.onPrepareOptionsMenu(menu);
    }

    // =============================================================================

    @Override
    public void onConfigurationChanged(Configuration newConfig) {
        super.onConfigurationChanged(newConfig);
        setContentView(R.layout.live);
        try {
            videoView = (VideoView) findViewById(R.id.myVideoView);
            videoView.setVideoURI(Uri.parse(httpLiveUrl));
            videoView.requestFocus();

            videoView
                    .setOnPreparedListener(new MediaPlayer.OnPreparedListener() {

                        @Override
                        public void onPrepared(MediaPlayer mp) {
                            // TODO Auto-generated method stub

                            videoView.seekTo(1000);
                            videoView.start();

                        }
                    });

        } catch (Exception e) {
            errorDialog = new AlertDialog.Builder(this);
            errorDialog.setMessage("مشكلة في البث");
            errorDialog.setCancelable(true);
            errorDialog.setNeutralButton("Ok",
                    new DialogInterface.OnClickListener() {
                        // click listener on the alert box
                        public void onClick(DialogInterface arg0, int arg1) {

                        }
                    });
            AlertDialog errorStream = errorDialog.create();
            errorStream.show();
        }

        if (getResources().getConfiguration().orientation == Configuration.ORIENTATION_LANDSCAPE) {
            getWindow().clearFlags(
                    WindowManager.LayoutParams.FLAG_FORCE_NOT_FULLSCREEN);
            getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                    WindowManager.LayoutParams.FLAG_FULLSCREEN);    
        } else if (getResources().getConfiguration().orientation == Configuration.ORIENTATION_PORTRAIT) {
            getWindow().clearFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);
            getWindow().setFlags(
                    WindowManager.LayoutParams.FLAG_FORCE_NOT_FULLSCREEN,
                    WindowManager.LayoutParams.FLAG_FORCE_NOT_FULLSCREEN);
        }
    }

    // =============================================================================

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case R.id.about:
            // TODO Auto-generated method stub
            startActivity(new Intent("com.shadatv.MainActivity"));
            break;

        case R.id.smallScreen:
            setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
            break;

        case R.id.fullScreen:
            setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
            break;
        }
        return true;
    }

} 
```

但我在 optionsMenu 发现了另一个问题。当我按下 about 按钮退出此活动并运行 MainActivity 时，应用程序停止。怎么了？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T05:45:23.133

当您`android:configChanges="keyboardHidden|orientation"`在 AndroidManifest 中写入时，您是在告诉 Android：“不要在拔出键盘或旋转手机时进行默认重置；我想自己处理。

因此，当屏幕方向更改时，您的活动不会设置纵向布局。你为什么使用`android:configChanges="keyboardHidden|orientation` **？**

# android - 具有多个超链接的文本视图

> ID：15331646
> 
> 赞同：1
> 
> 时间：2013-03-11T05:17:04.910
> 
> 标签：android, hyperlink, textview

我有例如以下字符串

> \n 3 Doors Down 是来自美国密西西比州埃斯卡托帕的 http://www.last.fm/tag/post-grunge\" class=\"bbcode_tag\" rel=\"tag\">post-grunge 乐队，成立于 1996 年，由 Brad Arnold（主唱）、Matt Roberts（吉他）、Todd Harrell（贝斯）、Chris Henderson（吉他）和 Greg Upchurch（鼓）组成。乐队于 2000 年与环球唱片签约，发行他们的第一张专辑, http://www.last.fm/music/3+Doors+Down/The+Better+Life\" class=\"bbcode_album\">更好的生活。随着单曲“http://www.last.fm/music/3+Doors+Down/_/Kryptonite\”class=\"bbcode_track\">Kryptonite"的发行，他们受到了国际关注。这张专辑继续销量超过 600 万张。\n\n http://www.last.fm/music/3+Doors+Down\">

我想在带有可点击超链接的文本视图中显示整个字符串。我也不想看到实际的 url，只是显示代替 url 的文本。阅读有关该主题的其他帖子，他们都建议定义类似于此的文本视图

```
<TextView
            android:id="@+id/tvArtistOverview"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_margin="10dp"
            android:autoLink="web"
            android:linksClickable="true" /> 
```

并将 textview 的 SetMovementMethod 设置为

```
myTextView.setMovementMethod(LinkMovementMethod.getInstance()); 
```

当我按照这些步骤操作时，我的链接是可点击的，但是它们并没有按我的意愿显示。我错过了什么？

这是它当前外观的示例。

![就快到了](../Images/bda2cdd0a702f074b68d04f487e819ba.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T05:32:37.630

使用下面的代码。

```
TextView tv = ....
tv.setMovementMethod(LinkMovementMethod.getInstance());

    String content = tv.getText().toString();
    List<String> links = new ArrayList<String>();

    Pattern p = Patterns.WEB_URL;
    Matcher m = p.matcher(content);
    while (m.find()) {
        String urlStr = m.group();
        links.add(urlStr);
    }

    SpannableString f = new SpannableString(content);

    for (int i = 0; i < links.size(); i++) {
        final String url = links.get(i);

        f.setSpan(new InternalURLSpan(new OnClickListener() {
            public void onClick(View v) {
                Context ctx = v.getContext();
                String urlToOpen = url;
                if (!urlToOpen.startsWith("http://") || !urlToOpen.startsWith("https://"))
                    urlToOpen = "http://" + urlToOpen;
                openURLInBrowser(urlToOpen, ctx);
            }
        }), content.indexOf(url), content.indexOf(url) + url.length(), Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);
    }

    tv.setText(f); 
```

# android - 进度条android aac播放器问题

> ID：15331647
> 
> 赞同：0
> 
> 时间：2013-03-11T05:17:06.433
> 
> 标签：android

嗨，我试图从我的 android 中的 aacplayer 获取进度条，我已经有了以下代码：

```
public void playerPCMFeedBuffer(boolean isPlaying, final int bufSizeMs, final int bufCapacityMs) {
    float percent = bufSizeMs * 100 / bufCapacityMs;
    System.out.println("Buffer = " + percent + "% , "+bufSizeMs+" / "+bufCapacityMs);

    handler.post(new Runnable() {
        public void run() {
            progress.setProgress(bufSizeMs * 100 / bufCapacityMs);

        }
    }); 
```

这给了我音频流的缓冲区，所以我想我可以从中设置进度条并显示进度条自行移动。但我收到这个错误：

```
03-11 00:15:15.885: E/AndroidRuntime(7609): FATAL EXCEPTION: main
03-11 00:15:15.885: E/AndroidRuntime(7609): java.lang.NullPointerException
03-11 00:15:15.885: E/AndroidRuntime(7609):     at com.webcraftbd.radio.RadioService$1$1.run(RadioService.java:712)
03-11 00:15:15.885: E/AndroidRuntime(7609):     at android.os.Handler.handleCallback(Handler.java:615)
03-11 00:15:15.885: E/AndroidRuntime(7609):     at android.os.Handler.dispatchMessage(Handler.java:92)
03-11 00:15:15.885: E/AndroidRuntime(7609):     at android.os.Looper.loop(Looper.java:137)
03-11 00:15:15.885: E/AndroidRuntime(7609):     at android.app.ActivityThread.main(ActivityThread.java:4898)
03-11 00:15:15.885: E/AndroidRuntime(7609):     at java.lang.reflect.Method.invokeNative(Native Method)
03-11 00:15:15.885: E/AndroidRuntime(7609):     at java.lang.reflect.Method.invoke(Method.java:511)
03-11 00:15:15.885: E/AndroidRuntime(7609):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
03-11 00:15:15.885: E/AndroidRuntime(7609):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
03-11 00:15:15.885: E/AndroidRuntime(7609):     at dalvik.system.NativeStart.main(Native Method) 
```

非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T05:26:20.680

System.out.println() 在 android 开发中无效。采用

```
 Log.d("tag", "message"); 
```

反而

# vb6 - 找不到路径 VB6

> ID：15331649
> 
> 赞同：1
> 
> 时间：2013-03-11T05:17:20.393
> 
> 标签：vb6, path, directory, backup

我正在尝试在 VB6 上进行备份。

这是我的代码：

> Private Sub Command1_Click()
> Me.CommonDialog1.Filter = "*.sql"
> Me.CommonDialog1.ShowSave
> If Me.CommonDialog1.FileName <> "" Then
> 
> FileCopy App.Path & "C:\Users\Bea\Desktop\symptoms.sql ", Me.CommonDialog1.FileName & ".sql"
> 
> MsgBox "数据库已成功保存在 " & Me.CommonDialog1.FileName & ".sql" End If End Sub

*我得到这个错误：*

**找不到路径**

可能的问题是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-11T05:22:59.713

请学习实际阅读错误信息中的文字。问题很清楚。

那里的路径`App.Path & "C:\Users\bea\Desktop\symptoms.sql"`不存在。如果`App.Path`是`C:\VB6Apps`，并且您连接（添加）`"C:\Users\bea" to it, you end up with`“C:\VB6AppsC:\Users\bea”，这显然不是一个有效的位置。

# java - 在 GWT 中将时间值格式化为 HH:mm:ss.SS

> ID：15331651
> 
> 赞同：0
> 
> 时间：2013-03-11T05:17:44.107
> 
> 标签：java, date, gwt, datetime

我的时间格式如下

```
 public static final String TIME_FORMAT = "HH:mm:ss.SS";
 edition.getEditionDate().format(TIME_FORMAT); 
```

输出如下：

> 15:02:08.293

我应该如何获得以下输出。我不想使用[Joda Time](http://joda-time.sourceforge.net/)。我不想使用 substring() 方法，因为它不是一种有效的方法。

> 15:02:08.29

无法使用 Gwt 客户端代码中不支持的 SimpleDateFormat。[GWT 客户端代码支持的方法](https://developers.google.com/web-toolkit/doc/latest/RefJreEmulation)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T05:27:36.193

```
SimpleDateFormat dateFormat = new SimpleDateFormat ("HH:MM:ss.");
DecimalFormat fractionalformat = new DecimalFormat ("00");

Date date = new Date ();

String str = dateFormat.format (date) + fractionalformat.format (date.getTime () % 1000L / 10L);

System.out.println (str); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T05:29:39.363

引用 SimpleDateFormat javadoc（和变体）：“对于格式化，模式字母的数量是最小的位数，较短的数字在这个数量上补零。”

因此，即使为毫秒指定 1 或 2 位数字，对于大于或等于 100 的值（大多数..），您将获得 3 位数字。

你需要自己动手，看起来米哈伊尔已经证明了这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T06:28:50.287

试试这个

```
String dateString = DateTimeFormat.getFormat("HH:mm:ss.SS").format(new Date());
System.out.println(dateString); 
```

[日期](http://google-web-toolkit.googlecode.com/svn/javadoc/2.5/com/google/gwt/i18n/client/DateTimeFormat.html)时间格式API

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T06:59:54.983

在 GWT 2.5 中，这略有变化 -

1.  如果您希望在服务器端和客户端统一处理此问题，请使用 [DateTimeFormat @Shared](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/i18n/shared/DateTimeFormat.html)

2.  如果您希望仅在客户端处理这两个问题，请使用[DateTimeFormat @ Client](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/i18n/client/DateTimeFormat.html)

代码仍然是 -

```
String dateString = DateTimeFormat.getFormat("HH:mm:ss.SS").format(new Date()); 
```

# android - 来自网络提供商或 gps 的 IS 位置

> ID：15331654
> 
> 赞同：0
> 
> 时间：2013-03-11T05:18:07.290
> 
> 标签：android

```
if (viaGps) {
                locationManager.requestLocationUpdates(
                        LocationManager.GPS_PROVIDER, 0, 0, listener);
                location = locationManager
                        .getLastKnownLocation(LocationManager.GPS_PROVIDER);
            }
            if (viaNetwork) {
                locationManager.requestLocationUpdates(
                        LocationManager.NETWORK_PROVIDER, 0, 0, listener);
                location = locationManager
                        .getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
            }
Log.d("", "lat: "+location.getLatitude()+" lon: "+location.getLongitude()); 
```

我想知道我的两个条件是否都是真的，那么下面的纬度和经度是从哪里来的？这些是来自`gps`还是`network_prvider`。`locationManager`正在通过两者收听位置更新。在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T05:24:32.403

在 Location 对象中，您有一个名为 getProvider() 的方法

您可以执行以下操作

```
if (LocationManager.GPS_PROVIDER.equals(location.getProvider())) {

        } else if (LocationManager.NETWORK_PROVIDER.equals(location.getProvider())) {

        } 
```

# android - Android 视频视图大小

> ID：15331657
> 
> 赞同：3
> 
> 时间：2013-03-11T05:18:41.250
> 
> 标签：android, android-layout, android-videoview

我正在尝试在中心的相对布局内设置视频视图的自定义高度和宽度，顶部和底部包含其他布局。我面临的问题是视频视图没有选择我提供的宽度和高度大小。它显示它的视频大小可能是，但我希望它准确显示我设置的大小。我将视频视图放在 xml 布局中，所以如果有任何解决方法或者我遗漏了什么，请指导我。这是下面的布局标签

```
<RelativeLayout
    android:id="@+id/linearLayout1"
    android:layout_width="fill_parent"
    android:layout_height="640dp"
    android:layout_marginTop="120dp" >

    <VideoView
        android:id="@+id/videoView1"
        android:layout_width="match_parent"
        android:layout_height="640dp"
        />
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T05:43:13.163

我为你找到了解决方案

```
RelativeLayout.LayoutParams videoviewlp = new RelativeLayout.LayoutParams(newwidth, newheight);
    videoviewlp.addRule(RelativeLayout.CENTER_HORIZONTAL, RelativeLayout.TRUE);
    videoviewlp.addRule(RelativeLayout.CENTER_VERTICAL, RelativeLayout.TRUE);
    videoview.setLayoutParams(videoviewlp);
    videoview.invalidate(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T05:33:54.717

尝试这个：

```
<RelativeLayout
        android:id="@+id/linearLayout1"
        android:layout_width="fill_parent"
        android:layout_height="640dp"
        android:layout_marginTop="120dp" >

        <VideoView
            android:layout_alignParentTop="true"
            android:layout_alignParentBottom="true"
            android:layout_alignParentLeft="true"
            android:layout_alignParentRight="true"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent">
    </RelativeLayout> 
```

# java - 递增数组值java

> ID：15331665
> 
> 赞同：-4
> 
> 时间：2013-03-11T05:19:52.060
> 
> 标签：java, arrays, increment

我正在编写一个程序，允许用户输入运动队，然后根据他们输入的团队记录输赢。我相当确定我设置数组的方式是错误的，因为它没有正确增加胜负，有人看到这个问题吗？

```
import java.util.Scanner;

public class sports {

public static void main(String[] args) {

    System.out.println("Howdy sports fan!");

    String menuSelect;
    String winSelect;
    String loseSelect;
    int teamSize = 0;

    String[] teamsArray = new String[0];
    int[] winsArray = new int[0];
    int[] lossesArray = new int[0];

    do {

        System.out.println("Please pick an option from the list below:");
        System.out.println("1) Create League");
        System.out.println("2) List all teams");
        System.out.println("3) Record a win");          
        System.out.println("4) Record a loss");         
        System.out.println("5) Quit");          
        Scanner keyboard = new Scanner(System.in);
        menuSelect = keyboard.nextLine();

        if ( menuSelect.equals("1") )
        {

            System.out.println("How many teams should I make?");
            try
            {
            teamSize = Integer.parseInt(keyboard.nextLine());
            }
            catch (NumberFormatException e)
            {
                System.out.println("Invalid entry, try again.");
            }

            teamsArray = new String[teamSize];

            for ( int i = 0; i < teamsArray.length; ++i )
            {
                System.out.println("Team " + (i+1) + "'s name?");
                teamsArray[i] = keyboard.nextLine();                
            }
        }

        else if ( menuSelect.equals("2") )
        {

            if (teamsArray.length == 0)
            {
                System.out.println("There are no teams!");
            }
            else

            System.out.printf("%21s %21s %n", "W", "L");

            for ( int i = 0; i < teamsArray.length; ++i )
            {
                System.out.printf(teamsArray[i] + "%20d %21d %n", winsArray[i], lossesArray[i]);

            }
        }

        else if ( menuSelect.equals("3") )
        {
            winsArray = new int[teamSize];
            System.out.println("Which team won a game?");
            winSelect = keyboard.nextLine();

            for ( int i = 0; i < teamsArray.length; ++i )
            {
                if ( winSelect.equals(teamsArray[i]) )
                {
                    ++winsArray[i];
                }
            }
        }

        else if ( menuSelect.equals("4") )
        {
            lossesArray = new int[teamSize];
            System.out.println("Which team lost a game?");
            loseSelect = keyboard.nextLine();

            for ( int i = 0; i < teamsArray.length; ++i )
            {
                if ( loseSelect.equals(teamsArray[i]) )
                {
                    ++lossesArray[i];
                }
            }
        }
        else
        {
            System.out.println("Invalid Selection");
        }

    } while(!menuSelect.equals("5"));

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T05:25:30.930

您必须一次初始化 Option#1 中的所有数组，而不是像这样在 Option#3/4 中初始化。

```
import java.util.Scanner;

public class sports {

public static void main(String[] args) {

    System.out.println("Howdy sports fan!");

    String menuSelect;
    String winSelect;
    String loseSelect;
    int teamSize = 0;

    String[] teamsArray = new String[0];
    int[] winsArray = new int[0];
    int[] lossesArray = new int[0];

    do {

        System.out.println("Please pick an option from the list below:");
        System.out.println("1) Create League");
        System.out.println("2) List all teams");
        System.out.println("3) Record a win");          
        System.out.println("4) Record a loss");         
        System.out.println("5) Quit");          
        Scanner keyboard = new Scanner(System.in);
        menuSelect = keyboard.nextLine();

        if ( menuSelect.equals("1") )
        {

            System.out.println("How many teams should I make?");
            try
            {
            teamSize = Integer.parseInt(keyboard.nextLine());
            }
            catch (NumberFormatException e)
            {
                System.out.println("Invalid entry, try again.");
            }

            teamsArray = new String[teamSize];
            winsArray = new int[teamSize];
            lossesArray = new int[teamSize];

            for ( int i = 0; i < teamsArray.length; ++i )
            {
                System.out.println("Team " + (i+1) + "'s name?");
                teamsArray[i] = keyboard.nextLine();                
            }
        }

        else if ( menuSelect.equals("2") )
        {

            if (teamsArray.length == 0)
            {
                System.out.println("There are no teams!");
            }
            else

            System.out.printf("%21s %21s %n", "W", "L");

            for ( int i = 0; i < teamsArray.length; ++i )
            {
                System.out.printf(teamsArray[i] + "%20d %21d %n", winsArray[i], lossesArray[i]);

            }
        }

        else if ( menuSelect.equals("3") )
        {
            System.out.println("Which team won a game?");
            winSelect = keyboard.nextLine();

            for ( int i = 0; i < teamsArray.length; ++i )
            {
                if ( winSelect.equals(teamsArray[i]) )
                {
                    ++winsArray[i];
                }
            }
        }

        else if ( menuSelect.equals("4") )
        {
            System.out.println("Which team lost a game?");
            loseSelect = keyboard.nextLine();

            for ( int i = 0; i < teamsArray.length; ++i )
            {
                if ( loseSelect.equals(teamsArray[i]) )
                {
                    ++lossesArray[i];
                }
            }
        }
        else
        {
            System.out.println("Invalid Selection");
        }

    } while(!menuSelect.equals("5"));

}

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T05:27:05.793

问题在于，每当您读取输赢时，您都在分配`winsArray`和。`lossesArray`以下两个语句应在选项 1 中：

```
winsArray = new int[teamSize];
lossesArray = new int[teamSize]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T05:57:43.730

如果像这样初始化数组，编译器会认为这三个变量teamArray、winsArray 和lossArray 是大小为零的数组类型。这意味着您可以在数组中添加任何值，当您尝试访问像 teamsArray[i] 时会导致错误。

```
String[] teamsArray = new String[0];
int[] winsArray = new int[0];
int[] lossesArray = new int[0]; 
```

因此，当用户选择选项一以创建联盟时，请尝试初始化数组，如 ravidra 所说。

```
teamsArray = new String[teamSize];
winsArray = new int[teamSize];
lossesArray = new int[teamSize]; 
```

尝试了解哪里出了问题以及如何纠正它。

# api - 如何使用 SoundCloud API 显示用户的播放计数

> ID：15331666
> 
> 赞同：0
> 
> 时间：2013-03-11T05:19:53.170
> 
> 标签：api, soundcloud

我正在尝试使用 SoundCloud API 显示特定 SoundCloud 用户的总曲目视图（“playback_count”）。

根据 API 文档，我使用以下函数调用获取信息：

```
http://api.soundcloud.com/tracks/13158665.json?client_id=YOUR_CLIENT_ID 
```

这很好，因为它显示数字“13158665”。

这个数字是多少？是trackid吗？

我需要使用用户用户名获取用户的“playback_count”。

我尝试使用以下方法从用户名中获取 UserId：

```
$soundcloud_playsAPI = "MY_SOUNDCLOUD_API_KEY";

/* Get the SoundCloud UserId from the username */
$json = wp_remote_get("http://api.soundcloud.com/users/jwagener.json?client_id=".$soundcloud_playsAPI);

$soundcloudData = json_decode($json['body'], true);
$soundcloud_userid = $soundcloudData['id']; 
```

这将返回用户 ID：3207181

现在我尝试将该响应替换为先前的 URL 以获取“playback_count”，但它失败了。

```
$json = wp_remote_get("http://api.soundcloud.com/tracks/3207181.json?client_id=".$soundcloud_playsAPI);
$soundcloudPlaysData = json_decode($json['body'], true);
echo $soundcloudPlaysData['playback_count']; 
```

任何指导将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T06:02:07.237

第一个数字是曲目的id，第二个数字是用户的id。

现在您有了用户 ID，您将需要获取他们的每个曲目并计算他们播放了多少次

首先，获取用户制作的所有曲目的 ID 号

GET: /users/{id}/tracks: 用户的曲目列表

```
$json = wp_remote_get("http://api.soundcloud.com/users/3207181/tracks.json?client_id=".$soundcloud_playsAPI); 
```

现在您有一个曲目 ID 列表，因此您需要获取每个曲目并保存每个曲目的播放计数

```
$json = wp_remote_get("http://api.soundcloud.com/tracks/track-id-here.json?client_id=".$soundcloud_playsAPI);
$soundcloudPlaysData = json_decode($json['body'], true);
echo $soundcloudPlaysData['playback_count']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T05:08:08.560

这是完整的解决方案：

```
function listPlays() 
    {SC.initialize({  client_id: 'YOUR ID HERE'}); 
    // Get the SoundCloud UserId from the username 
    var userName="jwagener";
    SC.get("/users/"+userName,  function (users)
            {console.log(users.id);
            var myId=users.id;
            getTracks(myId);
            });

    var getTracks=function (myId)
        {var totalPlays=0;
        SC.get("/users/"+myId+"/tracks", function(getTracks)
            {for (var key in getTracks)    //get each track and look at it's playback_count
                {console.log(getTracks[key].title+"     "+getTracks[key].playback_count);
                totalPlays+=getTracks[key].playback_count;   //add the playback count for this track to the total
                }
            console.log("Total Plays for all tracks: "+totalPlays);

            });
        };

}; 
```

# cocos2d-iphone - b2World 行为怪异（BOX2d + COCOS2d）

> ID：15331672
> 
> 赞同：0
> 
> 时间：2013-03-11T05:20:02.370
> 
> 标签：cocos2d-iphone, box2d

我用 .game 制作游戏`cocos2d + box2d`效果很好，但是玩了一段时间后，我的 b2world 挂了（地线在 drawDebug 模式下消失了），我的一些 b2bodies 属性变成了`NAN`。（我不知道我应该在这里粘贴什么代码！:( )

这段代码有问题吗？？

```
std::vector<b2Body *>toDestroy;    
    //Iterate over the bodies in the physics world
    for (b2Body* b = world->GetBodyList(); b; b = b->GetNext())
    {                    
        if (b->GetUserData() != NULL) {
            //Synchronize the AtlasSprites position and rotation with the corresponding body
            CCSprite *myActor = (CCSprite*)b->GetUserData();

            myActor.position = CGPointMake( b->GetPosition().x * PTM_RATIO, b->GetPosition().y * PTM_RATIO);
        myActor.rotation = -1 * CC_RADIANS_TO_DEGREES(b->GetAngle());

            if(myActor && myActor.tag==5){

                if([myActor opacity]==0){                     

                    toDestroy.push_back(b);                        

                }
            }   
    }   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T06:19:35.703

在初始化事件中正确创建世界，如下所示

**b2Vec2 重力 = b2Vec2(0.0f, -9.8f); _world = 新 b2World（重力）；**

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-12T13:33:10.140

我已经调试了我的所有行..我发现在我的计算中有一个表达式趋向于除以零异常，它卡住了整个世界...

# php - 关于 PDO 结果的 PHP MYSQL if 语句

> ID：15331675
> 
> 赞同：0
> 
> 时间：2013-03-11T05:20:14.230
> 
> 标签：php, mysql, if-statement, pdo, fetch

看看下面的代码。这应该检查数据库是否包含给定用户。如果是，它只返回 true。如果不是，则返回 false。

无论如何，无论数据库中存在的用户名和密码如何，由于某种原因它不会评估为真！！！

```
function databaseContainsUser($email, $password)
{

    include $_SERVER['DOCUMENT_ROOT'].'/includes/db.inc.php';

    try
    {
        $sql = 'SELECT COUNT(*) FROM wl_user
                WHERE email = :email AND password = :password'; 
        $s = $pdo->prepare($sql);
        $s->bindValue(':email', $email);
        $s->bindValue(':password', $password);
        $s->execute("USE $dbname");
    }
    catch (PDOException $e)
    {
        $error = 'Error searching for user. ' . $e->getMessage();
        include $_SERVER['DOCUMENT_ROOT'].'/includes/error.html.php';
        exit();
    }

    $row = $s->fetch(PDO::FETCH_NUM);

    if ($row[0] > 0)
    {   
        return TRUE;
    }
    else
    {
        return FALSE;
    }
} 
```

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T05:25:51.773

由于某些未知原因，您正在传递`"USE $dbname"`要执行的字符串。
删除该字符串。

此外，您正在尝试捕获异常，但显然不告诉 PDO 抛出它们。而你捕捉它只是为了回应一条信息，这是一个很大的禁忌。我最近在[这个答案中解释了正确的方法](https://stackoverflow.com/a/15276004/285587)

如果您的问题不同，您必须询问（或者更好 - 谷歌解决这个问题）。
有关正确的连接选项，包括数据库选择和错误报告，请参阅[PDO 标记 wiki](https://stackoverflow.com/tags/pdo/info)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-11T07:17:23.033

尝试这个

```
 try
{
    $pdo = new PDO('mysql:host=localhost;dbname=yourDbName;', 'root', '',
    array(PDO::ATTR_PERSISTENT => true));
    $sql = 'SELECT count(*) FROM user WHERE email = :email AND password = :password'; 
    $s = $pdo->prepare($sql);
    $s->bindValue(':email', $email);
    $s->bindValue(':password', $password);
    $s->execute();
} 
```

这是本地服务器示例，只需将 yourDbName 更改为您的数据库名称。我只是在我的本地服务器上运行此代码并且它正在工作。

# json - 如何修复 lambda 表达式委托错误？

> ID：15331678
> 
> 赞同：0
> 
> 时间：2013-03-11T05:20:30.407
> 
> 标签：json, windows-phone-7, http, delegates

我正在使用这种方法来获取数据

```
 private void getNews(int cat_id, int page)
    {
        this.progress.Visibility = Visibility.Visible;
        var m = new SharpGIS.GZipWebClient();
        Microsoft.Phone.Reactive.Observable.FromEvent<DownloadStringCompletedEventArgs>(m, "DownloadStringCompleted").Subscribe(l =>
        {
            try
            {
                //List<NewsKeys> deserialized = JsonConvert.DeserializeObject<List<NewsKeys>>(r.EventArgs.Result);
                ObservableCollection<NewsKeys> deserialized = JsonConvert.DeserializeObject<List<NewsKeys>>(l.EventArgs.Result);

                foreach (NewsKeys item in deserialized)
                {
                    items.Add(new NewsKeys { nId = item.nId, title = item.title, shortDesc = item.shortDesc, fullDesc = item.fullDesc, tags = item.tags, smallPic = item.smallPic, bigPic = item.bigPic, video = item.video, audio = item.audio, youtube = item.youtube, doc = item.doc, date_create = item.date_create, date_modify = item.date_modify, date_publish = item.date_publish, catId = item.catId, viewOrder = item.viewOrder, viewCount = item.viewCount, viewStatus = item.viewStatus, viewHome = item.viewHome, uId = item.uId, uFname = item.uFname });
                }
            }
            catch (Exception)
            {
                MessageBox.Show("Sorry, Some unexpected error.");
            }
        });
        m.DownloadStringAsync(new Uri(Resource.NEWS_API+cat_id+"&page="+page));
    } 
```

我得到的错误是

> 错误 1 ​​无法将 lambda 表达式转换为类型“System.IObserver>”，因为它不是委托类型 C:\Users\Adodis\Documents\Visual Studio 2010\Projects\TV\NewsListPage.xaml.cs 51 133

我已经尝试了所有的修复，但无法解决这个问题。我在不同的类中以不同的方法使用相同的块，它工作正常，但是，这个类中的这个方法让我死了。如果您对此有任何想法，请帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:22:06.373

试试这个（我已经分离了`Select`和`Subscribe`操作）：

```
var m = new SharpGIS.GZipWebClient();

Observable.FromEvent<DownloadStringCompletedEventArgs>(m, "DownloadStringCompleted")
          .Select(l => l.EventArgs.Result)
          .Subscribe(res =>
              {
                  try
                  {
                      var deserialized = JsonConvert.DeserializeObject<List<NewsKeys>>(res);

                      foreach (NewsKeys item in deserialized)
                      {
                          items.Add(
                              new NewsKeys
                                  {
                                      nId = item.nId,
                                      title = item.title,
                                      shortDesc = item.shortDesc,
                                      fullDesc = item.fullDesc,
                                      tags = item.tags,
                                      smallPic = item.smallPic,
                                      bigPic = item.bigPic,
                                      video = item.video,
                                      audio = item.audio,
                                      youtube = item.youtube,
                                      doc = item.doc,
                                      date_create = item.date_create,
                                      date_modify = item.date_modify,
                                      date_publish = item.date_publish,
                                      catId = item.catId,
                                      viewOrder = item.viewOrder,
                                      viewCount = item.viewCount,
                                      viewStatus = item.viewStatus,
                                      viewHome = item.viewHome,
                                      uId = item.uId,
                                      uFname = item.uFname
                                  });
                      }
                  }
                  catch (Exception)
                  {
                      MessageBox.Show("Sorry, Some unexpected error.");
                  }
              });

m.DownloadStringAsync(new Uri("Resource.NEWS_API" + cat_id + "&page=" + page)); 
```

# sql-server - SQL Server 触发器插入

> ID：15331682
> 
> 赞同：1
> 
> 时间：2013-03-11T05:20:49.173
> 
> 标签：sql-server, c#-4.0, triggers

您好数据库大师：

我是 SQL Server 世界的新手。基本上我有一个有 3 列的表 `CountryID`，`CountryName`并且`Currency`.

在`insert`我将只插入两个值，`CountryName`并且将使用触发器自动填充，例如`Currency`：`CountryID`

```
CYYYYMMDDHHSS (Code|Year|Month|Day|Hour|Seconds) 
```

一些专家可以帮助我解决我的问题吗？

# python - 使用 Python 和请求抓取网页时的字符集问题

> ID：15331685
> 
> 赞同：1
> 
> 时间：2013-03-11T05:21:11.857
> 
> 标签：python, encoding, character-encoding

尝试下载中文页面时（根据元标记似乎是 gb2312）。在我运行下面的代码并在 gEdit 中以 gb2312 格式打开文件后，我得到了乱码，例如 ê×××(ò) 应该是汉字。

这是相关页面的源代码：[https](https://gist.github.com/anonymous/27663069655db7fd7a19) ://gist.github.com/anonymous/27663069655db7fd7a19 - 实际站点仅适用于教育机构。

我的代码：

```
r = requests.post("http://example.com", data=payload, cookies=cookies)
f = open('myfile.txt', 'w')
f.write(r.text.encode('gb2312',errors="ignore"))
f.close() 
```

页面的标题：

> {'content-length': '6164', 'x-powered-by': 'ASP.NET', 'date': 'Mon, 11 Mar 2013 05:11:24 GMT', 'cache-control': '私有的，“内容类型”：“文本/html”，“服务器”：“Microsoft-IIS/6.0”}

如果我尝试解码而不是编码，我会在 Python 中收到此错误：

> ```
> f.write(r.text.decode('gb2312',errors="ignore")) 
> ```
> 
> UnicodeEncodeError：“ascii”编解码器无法对位置 2017-2018 中的字符进行编码：序数不在范围内（128）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:09:34.573

```
djc@enrai http $ python
Python 2.7.3 (default, Jun 18 2012, 09:39:59)
[GCC 4.5.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import urllib
>>> rsp = urllib.urlopen('https://gist.github.com/anonymous/27663069655db7fd7a19/raw/836a5c55d0f87a2fa5edcc9a14097c945452f520/chinese.html').read()
>>> import chardet
>>> chardet.detect(rsp)
{'confidence': 0.99, 'encoding': 'utf-8'}
>>> rsp.decode('utf-8')
u'\n<HTML><HEAD>(snip)</BODY></HTML>\n' 
```

所以，我猜不要相信字符集标题？

# prolog - 如何在序言列表中找到匹配的元素

> ID：15331690
> 
> 赞同：0
> 
> 时间：2013-03-11T05:21:44.947
> 
> 标签：prolog

我在序言中有以下事实。

```
p(cold,[flu,high_body_temp,headache,dizzy],0.3],
p(cold,[flu,not high_body_temp,headache,dizzy],0.2],
p(cold,[flu,high_body_temp,not headache,dizzy],0.4],
p(cold,[flu,high_body_temp,headache,not dizzy],0.1],
p(cold,[not flu,high_body_temp,headache,dizzy],0.3],
p(cold,[flu,not high_body_temp,headache,not dizzy],0.3],

p(diarrhea,[headache,not stomachache,dizzy,vomit],0.5),
p(diarrhea,[headache,stomachache,not dizzy,vomit],0.4),
p(diarrhea,[headache,stomachache,dizzy,not vomit],0.2),
p(diarrhea,[not headache,stomachache,dizzy,vomit],0.1),
p(diarrhea,[headache,not stomachache,not dizzy,not vomit],0.1), 
```

以及在运行时生成的列表，例如：

```
[flu,headache] 
```

我们应该从包含 [flu,headache] 的“真实”元素的两个事实中得到答案，而“不”意味着该元素不存在：

```
p(cold,[flu,not high_body_temp,headache,not dizzy],0.3],
p(diarrhea,[headache,not stomachache,not dizzy,not vomit],0.1), 
```

答案应该是：

```
cold = 0.3
diarrhea = 0.1 
```

我如何在 prolog 中编写代码来完成这项工作？请帮助。我完全被困住了。TQ。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T08:28:22.777

一旦纠正了语法错误，似乎是一个非常简单的匹配：

```
:- op(100, fx, not).

p(cold,[flu,high_body_temp,headache,dizzy],0.3).
p(cold,[flu,not high_body_temp,headache,dizzy],0.2).
p(cold,[flu,high_body_temp,not headache,dizzy],0.4).
p(cold,[flu,high_body_temp,headache,not dizzy],0.1).
p(cold,[not flu,high_body_temp,headache,dizzy],0.3).
p(cold,[flu,not high_body_temp,headache,not dizzy],0.3).

p(diarrhea,[headache,not stomachache,dizzy,vomit],0.5).
p(diarrhea,[headache,stomachache,not dizzy,vomit],0.4).
p(diarrhea,[headache,stomachache,dizzy,not vomit],0.2).
p(diarrhea,[not headache,stomachache,dizzy,vomit],0.1).
p(diarrhea,[headache,not stomachache,not dizzy,not vomit],0.1).

answer(L, A, N) :-
    p(A, S, N), maplist(match(L), S).
match(L, not S) :-
    \+ memberchk(S, L).
match(L, S) :-
    memberchk(S, L). 
```

产量

```
10 ?- answer([flu,headache],A,N).
A = cold,
N = 0.3 ;
A = diarrhea,
N = 0.1 ;
false. 
```

# android - Emualtor always returning -1 when using getUidRxBytes function

> ID：15331692
> 
> 赞同：1
> 
> 时间：2013-03-11T05:21:47.947
> 
> 标签：android, networking, android-emulator, device

I am new to android programming. I am creating an app that download a file and measure bytes recieved through the application.

I am using thread to do the download and using another thread to measure the bytes recived using `getUidRxBytes` function.

In the device it is working very well but in emulator `getUidRxBytes` function is always returning -1.

Pls help me to understand this issue. Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T05:28:50.907

While the Android emulator can do most everything you need for development, there are things it doesn't do. This looks like one of them.

If you check the documentation for your function, it tells you that a return value of -1 means UNSUPPORTED

[http://developer.android.com/reference/android/net/TrafficStats.html#UNSUPPORTED](http://developer.android.com/reference/android/net/TrafficStats.html#UNSUPPORTED)

# sql - 如何从 cond1=$cond1 和 cond2=$cond2 实时的表中获取 count(*)

> ID：15331697
> 
> 赞同：0
> 
> 时间：2013-03-11T05:22:03.563
> 
> 标签：sql, database

伙计们：

假设我有一个记录元组的基表。如果用户想要得到满足某些条件的 count(*)，可以使用如下 SQL 查询：

```
SELECT count(*) FROM table where cond1=$cond1 AND cond2 = $cond2 AND... 
```

问题1：如果条件保持不变，我们如何获得实时计数？由于某种原因，我不能直接使用 count(*) 来完成任务。

问题2：如果出现新情况，如何扩展问题1中的情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T05:50:00.367

1.  尽管很难想象究竟是什么可以阻止您使用`COUNT()`一种可能的方式来实现您的目标（如果我正确理解您的要求）并假设可能的参数组合数量有限，但可能是：

    *   创建一个记录不同条件集的表
    *   在基表上创建触发器，在更新、插入、删除操作时重新填充/重新计算计数值
    *   从该表中读取计数
2.  更新您的触发器

# drupal - 在drupal中公开过滤器多重搜索

> ID：15331698
> 
> 赞同：1
> 
> 时间：2013-03-11T05:22:09.127
> 
> 标签：drupal, drupal-7

我有一个 Drupal 网站，其中列出了所有可用的寺庙、清真寺、教堂等。现在我想在我的首页有一个搜索表单，用户可以在其中搜索寺庙、清真寺、教堂等。我正在使用查看暴露过滤器来搜索结果。但问题是当我去添加过滤条件时，它要求公开特定的 CCK 字段。

在 Drupal 中机器名总是唯一的。因此，对于寺庙，它采用不同的机器名称，对于清真寺，它采用不同的机器名称。

我只想要一个搜索表单，用户可以在其中搜索所有寺庙、清真寺等。现在我正在使用不同的搜索表单来搜索不同的表单。我怎么能只用一个搜索表单来做到这一点？？？

我正在使用这些模块来处理地址和位置的另一件事

```
Address Field - 7.x-1.0-beta3
Geofield - 7.x-1.1
GeoPHP - 7.x-1.6
Geocoder - 7.x-1.2 
```

如何根据城市和位置搜索结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T01:53:49.767

假设您想按名称进行搜索，那么您应该为所有寺庙的名称使用相同的字段，无论它们的类型如何。通过这样做，暴露该领域将做你想要的。

# php - 如何使用分页符打印大型 HTML 表格？

> ID：15331700
> 
> 赞同：1
> 
> 时间：2013-03-11T05:22:11.450
> 
> 标签：php, html-table

我想打印一个大的 HTML 表格而不破坏它在每页末尾的行。我使用了以下代码，但它不起作用。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>
<style>
@media print
{
  table { page-break-after:auto }
  tr    { page-break-inside:avoid; page-break-after:auto }
  td    { page-break-inside:avoid; page-break-after:auto }
  thead { display:table-header-group }
  tfoot { display:table-footer-group }
}
</style>

<body>
<table border="1">
 <?php
 for($i=0;$i<50;$i++){
 ?>

  <tr>
        <td height="50" width="130">gukgu</td>
        <td height="50" width="180" height="50" width="145">gukgu</td>
        <td height="50" width="130">gukgu</td>
        <td height="50" width="180" height="50" width="145">gukgu</td>
 </tr>
  <?php
  }
   ?>
</table>   
</body>
</html> 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T05:24:06.083

尝试

```
<table border="1">
    <?php for($i=0;$i<50;$i++) { ?>
    <tr>
        <td height="50" width="130">gukgu</td>
        <td height="50" width="180" height="50" width="145">gukgu</td>
        <td height="50" width="130">gukgu</td>
        <td height="50" width="180" height="50" width="145">gukgu</td>
    </tr>
    <?php } ?>
</table> 
```

你有循环内的表标签`for`把它放在循环之前`for`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T06:41:37.733

您可以尝试使用`orphans`指定要留在页面底部的空行数；如果元素的布局与`orphans`设置冲突，则将在下一页打印该元素。浏览器支持虽然相当粗制滥造。我会`tr`为您的示例设置它，如下所示：
`tr{orphans:3}`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-07T00:08:11.143

我迟到了这个讨论，但我遇到了类似的问题，这是我能找到的最接近的讨论。我已经解决了自己的问题，并想与下一个人分享。

我需要打印一个分成几行的大表。每个段以段标题行开始，然后是大约 5 个数据行。我不希望任何段中的分页符，但我*确实*希望列在整个表格中排列。CSS " `page-break-inside:avoid`" 属性只适用于顶级块元素，所以我不能`<div>`在 a中使用`<table>`来控制分页。

但是我*可以*用`<tbody>`！显然，在现代浏览器中，`<table>`元素只是用于对各种表格部分进行分组的控制功能，根本不是块元素，`<tbody>`而是实际的块元素。所以`page-break-inside:avoid`工作。此外，`<tbody>`在单个`<table>`.

这就是秘密：对表格的每个部分使用单独`<tbody>`的，每个部分都有“ `page-break-inside:avoid`” CSS 属性。

有一些并发症。首先，IE11 似乎需要一个 " `orphans:5`" CSS 属性才能工作。其次，我尝试使用`<thead>`段标题行，给它一个“ `page-break-after: avoid`”属性，但我遇到了很多跨浏览器问题，所以我最终只是将段标题放在相应的`<tbody>`标签中。它工作正常。

CSS：

```
 tbody.segment {
        page-break-inside: avoid;
        orphans: 5;
    }
    th.segment {
        border: thin solid black;
    } 
```

HTML：

```
 <table>
        <tbody class="segment">
            <tr><th class="segment" colspan="3">Segment 1</th></tr>
            <tr><td>data1aa</td><td>data1ab</td><td>data1ac</td><tr>
            ...
            <tr><td>data1za</td><td>data1zb</td><td>data1zc</td><tr>
        </tbody>
        <tbody class="segment">
            <tr><th class="segment" colspan="3">Segment 2</th></tr>
            <tr><td>data2aa</td><td>data2ab</td><td>data2ac</td><tr>
            ...
            <tr><td>data2za</td><td>data2zb</td><td>data2zc</td><tr>
        </tbody>
    </table> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-10T19:13:57.423

所有不基于 webkit 的流行桌面浏览器（即 Firefox 和 Internet Explorer）现在都支持元素`page-break-inside: avoid;`上的 CSS 声明`<tr>`，这解决了这些浏览器中的 OP 问题。Webkit 支持显然仅限于块元素，因此 Chrome、Safari 和 Opera 的问题在技术上尚未解决（我很确定此处发布的其他解决方案都无济于事）。但是，可以通过将桌子变成一堆牢不可破的块来模拟所需的行为。如果使用固定的列宽，则可以使用纯 CSS 来完成，如下所示：

```
<style>
  table {border-collapse: collapse;}
  table > tbody > tr {
    display: block;
    page-break-inside: avoid;
  }
  table > tbody > tr > td {
    border: 2px solid black;
    width: 100px;
    max-width: 100px;
  }
  table > tbody > tr:first-child ~ tr > td {border-top: none;}
</style>

<table>
  <tr>
    <td>data</td>
    <td>data</td>
    <td>Multiple<br/>lines of<br/>data</td>
  </tr>
  <tr>
    <td>data</td>
    <td>data</td>
    <td>Multiple<br/>lines of<br/>data</td>
  </tr>
  <tr>
    <td>data</td>
    <td>data</td>
    <td>Multiple<br/>lines of<br/>data</td>
  </tr>
</table> 
```

如果您不想使用固定的列宽，则必须使用 javascript 来确保列宽不会因行而异。我[对另一篇文章的回答](https://stackoverflow.com/questions/7211229/having-google-chrome-repeat-table-headers-on-printed-pages/25737442#25737442)展示了一种方法来做到这一点，但它包括重复的表头，这使得它比在这种情况下需要的复杂得多。不过，仍然可能值得一看。

# javascript - 如何避免在浏览器中显示“C:fakepath”

> ID：15331703
> 
> 赞同：0
> 
> 时间：2013-03-11T05:22:18.250
> 
> 标签：javascript, html

如何避免在文件上传时显示“C:fakepath”。在上传文件时调用 javacript 方法来设置所选路径我的情况

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T05:30:14.013

这是已实施的浏览器安全功能。

根据 的规范`HTML5`，如果您使用 JavaScript 操作其值字符串，则文件上传控件不应显示您选择的文件的真实本地路径。相反，处理文件信息的脚本返回的字符串是`c:\fakepath`.

如果你仍然想摆脱这个假路径，你可以查看这个网站

[上传文件到网站时如何去掉 IE 中的 C:\FakePath](http://www.nextofwindows.com/how-to-get-rid-of-cfakepath-in-ie-when-uploading-a-file-to-the-website-fix/)

希望能帮助到你。

# c++ - 如何为多线程客户端访问多个线程上的相同套接字

> ID：15331704
> 
> 赞同：0
> 
> 时间：2013-03-11T05:22:19.520
> 
> 标签：c++, multithreading, sockets, client, client-server

我设置了一个多线程客户端，以便在一个线程上从服务器接收消息，而另一个线程等待用户输入以便向服务器发送消息。

我对此很陌生，我的代码目前所做的是：两个线程都将单独连接到服务器，这使得服务器将单个客户端识别为两个客户端（因为两个线程都单独连接到服务器）。如何解决此问题，以便接收和发送连接使用相同的连接？

**我已经包含了我的客户端代码**的相关部分（连接到服务器是通过函数 connectToServer）

```
/*thread for sending messages to server*/
DWORD WINAPI send_handle_thread(LPVOID threadInfo)
{
/*structure contains all the data this callback works on*/
myThreadArgument* send_argument = (myThreadArgument*)threadInfo;

/*get client connection*/
myTcpSocket my_client(PORTNUM);

string server_ip_address = "";
readServerConfig(server_ip_address);

my_client.connectToServer(server_ip_address, ADDRESS); //this is where the thread connects to server

while (1)
{
    /*send messages*/

}
return 1;
}

/*thread for receiving messages from server*/
DWORD WINAPI rec_handle_thread(LPVOID threadInfo)
{
/*structure contains all the data this callback works on*/
myThreadArgument* send_argument = (myThreadArgument*)threadInfo;

/*get client connection*/
myTcpSocket my_client(PORTNUM);

string server_ip_address = "";
readServerConfig(server_ip_address);

my_client.connectToServer(server_ip_address, ADDRESS); //this is where thread connects to server

int rec_bytes = 0;

while (1)
{
    /*receive messages*/

}
return 1;
}

int main()
{
/*build a semaphore to synchronise access to std::cout*/
mySemaphore cout_semaphore(string(""),1);

/*initialize the winsock library*/
myTcpSocket::initialize();

/*get local (client) information (assume neither the name nor the address is given)*/
myHostInfo client_info;
string client_name = client_info.getHostName();
string client_ip_address = client_info.getHostIPAddress();

cout << "local host (client) information: " << endl;
cout << "   name:       " << client_name << endl;
cout << "   address:    " << client_ip_address << endl << endl;

/*retrieve server's IP name and address*/
string server_ip_address = "";
readServerConfig(server_ip_address);

myHostInfo server_info(server_ip_address, ADDRESS);
string server_name = server_info.getHostName();

cout << "remote host (server) information: " << endl;
cout << "   name:       " << server_name << endl;
cout << "   address:    " << server_ip_address << endl;

/*retrieve client's IP name and address*/
myTcpSocket my_client(PORTNUM);
cout << my_client;

/*create thread to send messages to server*/
myThreadArgument* send_argument = new myThreadArgument(&my_client, &cout_semaphore, client_name);
myThread* send_thread = new myThread(send_handle_thread, (void*)send_argument);
send_thread->execute();

/*create thread to receive message from server*/
myThreadArgument* rec_argument = new myThreadArgument(&my_client, &cout_semaphore, client_name);
myThread* rec_thread = new myThread(rec_handle_thread, (void*)rec_argument);
rec_thread->execute();

while (1)
{
    Sleep(300);
    cout << "main thread";
}

return 1;
} 
```

**连接服务器**代码：

```
void myTcpSocket::connectToServer(string& serverNameOrAddr,hostType hType)
{ 
/* 
   when this method is called, a client socket has been built already,
   so we have the socketId and portNumber ready.

   a myHostInfo instance is created, no matter how the server's name is 
   given (such as www.yuchen.net) or the server's address is given (such
   as 169.56.32.35), we can use this myHostInfo instance to get the 
   IP address of the server
*/

myHostInfo serverInfo(serverNameOrAddr,hType);

// Store the IP address and socket port number  
struct sockaddr_in serverAddress;
serverAddress.sin_family = AF_INET;
serverAddress.sin_addr.s_addr = inet_addr(serverInfo.getHostIPAddress());
serverAddress.sin_port = htons(portNumber);

// Connect to the given address
try 
{
    if (connect(socketId,(struct sockaddr *)&serverAddress,sizeof(serverAddress)) == -1)
    {
        #ifdef WINDOWS_7 //XP
            int errorCode = 0;
            string errorMsg = "error calling connect():\n";
            detectErrorConnect(&errorCode,errorMsg);
            myException socketConnectException(errorCode,errorMsg);
            throw socketConnectException;
        #endif

        #ifdef UNIX
            myException unixSocketConnectException(0,"unix: error calling connect()");
            throw unixSocketConnectException;
        #endif
    }
}
catch(myException& excp)
{
    excp.response();
    exit(1);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T05:29:20.457

只需在两个地方使用相同的套接字 FD。您甚至不必在使用时进行同步。

# c# - .NET 中开发多线程应用程序和并行编程有什么区别？

> ID：15331711
> 
> 赞同：8
> 
> 时间：2013-03-11T05:22:40.217
> 
> 标签：c#, multithreading, concurrency, parallel-processing, task-parallel-library

最近我读了很多关于 .NET 中的并行编程的文章，但我仍然对关于这个主题的文本的矛盾陈述感到困惑。

例如，stackoverflow.com [task-parallel-library 标签](https://stackoverflow.com/questions/tagged/task-parallel-library)的弹出窗口（将鼠标指向标签图标时）描述：

> “任务并行库是 .NET 4 的一部分。它是一组 API，使开发人员能够对多核共享内存处理器进行编程”

这是否意味着使用早期版本的 .NET 无法实现多核和并行编程应用程序？

我是否控制 .NET 多线程应用程序中内核之间的多核/并行使用/分布？

如何识别要在其上运行线程并将线程归因于特定核心的核心？

[.NET 4.0+ 任务并行库](http://msdn.microsoft.com/en-us/library/dd460717%28v=vs.100%29.aspx)启用了哪些在以前的 .NET 版本中无法做到的事情？

**更新：**
嗯，很难提出具体的问题，但我想更好地理解：

**.NET 中开发多线程应用程序和并行编程有什么区别？**

到目前为止，我无法掌握它们之间的区别

Update2：
MSDN [“.NET Framework 中的并行编程”](http://msdn.microsoft.com/en-us/library/dd460693%28v=vs.100%29.aspx)从 .NET 4.0 版本开始，其文章[Task Parallel Library](https://stackoverflow.com/questions/tagged/task-parallel-library)告诉我们：

> “从 .NET Framework 4 开始，TPL 是编写多线程和并行代码的首选方式”

考虑到我熟悉多线程开发，您能否给我提示如何在 pre-.NET4（在 .NET3.5 中）专门创建并行代码？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-11T12:13:16.303

我将“多线程”视为术语所说的：使用多个线程。

“并行处理”将是：在多个线程之间拆分一组工作，以便可以并行处理工作。

因此，并行处理是多线程的一种特殊情况。

* * *

> 这是否意味着使用早期版本的 .NET 无法实现多核和并行编程应用程序？

一点也不。你可以使用`Thread`类来做到这一点。写起来要困难得多，要正确地写起来*要*困难得多。

> 我是否控制 .NET 多线程应用程序中内核之间的多核/并行使用/分布？

不是真的，但你*不需要*。您可以为您的应用程序处理处理器亲和性，但在 .NET 级别上，这几乎不是一个成功的策略。

任务并行库包含一个“分区器”概念，可用于控制*工作*的分配，这是控制线程在内核上的分配的更好解决方案。

> 如何识别要在其上运行线程并将线程归因于特定核心的核心？

你不应该这样做。.NET 线程不一定与 OS 线程相对应；你的抽象层次比这更高。现在，默认的 .NET 主机*确实会*一对一地映射线程，因此如果您想依赖未记录的实现细节，那么您可以深入了解抽象并使用 P/invoke 来确定/驱动您的处理器亲和力。但如上所述，它没有用。

> .NET 4.0+ 任务并行库启用了哪些在以前的 .NET 版本中无法做到的事情？

没有。但它确实使并行处理（和多线程）变得*更加容易！*

> 考虑到我熟悉多线程开发，您能否给我提示如何在 pre-.NET4（在 .NET3.5 中）专门创建并行代码？

First off, there's no reason to develop for that platform. None. .NET 4.5 is already out, and the last version (.NET 4.0) supports all OSes that the next older version (.NET 3.5) did.

But if you really want to, you can do simple parallel processing by spinning up `Thread` objects or `BackgroundWorker`s, or by queueing work directly to the thread pool. All of these approaches require more code (particularly around error handling) than the `Task` type in the TPL.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-11T05:47:45.883

如果我问你“你是用自己开发的语言编写商业软件吗？还是你自己挖井后喝水？”

这就是通过创建线程并管理它们来编写多线程的区别，而您可以使用 TPL 对线程进行抽象。多核和内核上的线程调度由操作系统维护，因此您无需担心您的线程是否在您的系统支持 AFAIK 的内核上执行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T05:49:33.690

查看这篇[文章](http://www.thejoyofcode.com/The_ThreadPool_is_dead.aspx)，它基本上总结了在 TPL 之前（几乎）不可能的事情，尽管许多公司已经酿造了自己的并行处理库，但它们都没有经过充分优化以利用流行架构的所有资源（仅仅是因为它很大）任务和微软有很多资源+他们很好）。另外有趣的是英特尔的对应实现[TBB](http://en.wikipedia.org/wiki/Intel_Threading_Building_Blocks)与 TPL

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-11T12:07:31.930

> 这是否意味着使用早期版本的 .NET 无法实现多核和并行编程应用程序？

一点也不。自 .Net 1 以来，就出现了 和 等类型`Thread`，`ThreadPool`用于在其他线程上调度计算以及`ManualResetEvent`用于同步。

> 我是否控制 .NET 多线程应用程序中内核之间的多核/并行使用/分布？

不，这主要是操作系统的工作。您可以设置`ProcessorAffinity`a `ProcessThread`，但没有简单的方法`ProcessThread`从 a 获取 a `Thread`（因为最初认为 .Net`Thread`可能不直接对应于 OS 线程）。通常没有理由这样做，你尤其不应该为`ThreadPool`线程这样做。

> .NET 4.0+ 任务并行库启用了哪些在以前的 .NET 版本中无法做到的事情？

我会说这并没有使任何不可能成为可能。但它使许多任务*变得更加*简单。

您始终可以编写自己的版本`ThreadPool`并手动使用同步原语（如`ManualResetEvent`）在线程之间进行同步。但是正确有效地做到这一点是很多容易出错的工作。

> .NET 中开发多线程应用程序和并行编程有什么区别？

这只是一个命名问题，与你之前的问题没有太大关系。并行编程意味着同时执行多个操作，但并没有说明如何实现并行性。为此，您可以使用多台计算机、多个进程或多个线程，甚至一个线程。

（如果操作不受 CPU 限制，则可以在单线程上进行并行编程，例如从磁盘读取文件或从 Internet 获取一些数据。）

因此，多线程编程是并行编程的一个子集，尽管它在 .Net 上最常用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-11T07:09:53.290

多线程过去可以在单核 CPU 上使用。我相信在 .NET 世界中，“并行编程”代表编译器/语言，以及命名空间和“库”添加，它们促进了多核功能（比以前更好）。从这个意义上说，“并行编程”是多线程下的一个类别，它为多个 CPUa/内核提供了改进的支持。

我自己的思考：同时我看到.NET“并行编程”不仅包含多线程，还包含其他技术。考虑一下新的 async/await 设施不保证多线程的事实，因为在某些情况下，它们只是可以在单个线程上完成所有事情的持续传递样式范式的抽象。包括来自运行不同进程（可能在不同机器上）的混合并行性，从这个意义上说，多线程只是“并行编程”这个更广泛概念的一部分。

但是，如果您考虑 .NET 版本，我认为前者是一个更好的解释。

# java - 如何在 ZK DataBinding 中选择一个 TEMPLATE？

> ID：15331716
> 
> 赞同：0
> 
> 时间：2013-03-11T05:23:16.610
> 
> 标签：java, mvvm, binding, zk

我的网格有四个模板，但我无法通过事件（例如，通过单击超链接或按钮）以任何方式更改网格的模板。如何在运行时从其他模板中选择一个模板？

```
<grid id="dataGrid"  model="@bind(vm.taskDTOs) @template('newTaskTemplate')" width="100%">
    <columns id="dataGridColumns" />
    <template name="newTaskTemplate" var="newTask">
        <row>
            <label value="" />
            <label value="@bind(newTask.documentDTO.docTypeDTO.title)"/>
            <label value="@bind(newTask.documentDTO.docNumber)"/>
            <label value="@bind(newTask.documentDTO.docDateTime)"/>
            <label value="@bind(newTask.assignerID)"/>
            <label value="@bind(newTask.assignDateTime)"/>
            <label value="@bind(newTask.assignDateTime)"/>
            <label value="@bind(newTask.documentDTO.docTypeStateDTO.stateActionDTO.actionDTO.title)"/>
        </row>
    </template>

    <!--if="${templateStatus.value=='pendingTask'}"-->

    <template name="pendingTaskTemplate" var="pendingTask">
        <row>
            <label value="@bind(pendingTask.documentDTO.docTypeDTO.title)"/>
            <label value="@bind(pendingTask.documentDTO.docNumber)"/>
            <label value="@bind(pendingTask.documentDTO.docDateTime)"/>
            <label value="@bind(pendingTask.assignerID)"/>
            <label value="@bind(pendingTask.assignDateTime)"/>
            <label value="@bind(pendingTask.assignDateTime)"/>
            <label value="@bind(pendingTask.documentDTO.docTypeStateDTO.stateActionDTO.actionDTO.title)"/>
        </row>
    </template>

    <!--if="${templateStatus.value=='refferedTask'}"-->
    <template name="refferedTaskTemplate" var="RefferedTask">
        <row>
            <label value="@bind(RefferedTask.documentDTO.docTypeDTO.title)"/>
            <label value="@bind(RefferedTask.documentDTO.docNumber)"/>
            <label value="@bind(RefferedTask.documentDTO.docDateTime)"/>
            <label value="@bind(RefferedTask.assigneeID)"/>
            <label value="@bind(RefferedTask.assignDateTime)"/>
            <label value="@bind(RefferedTask.assignDateTime)"/>
            <label value="@bind(RefferedTask.catalogDTO.catalogTypeDTO.title)"/>
        </row>
    </template>

    <!--if="${templateStatus.value == 'allTask'}"-->

    <template name="allTaskTemplate" var="allTask">
        <row>
            <label value="" />
            <label value="@bind(allTask.documentDTO.docTypeDTO.title)"/>
            <label value="@bind(allTask.documentDTO.docNumber)"/>
            <label value="@bind(allTask.documentDTO.docDateTime)"/>
            <label value="@bind(allTask.assignerID)"/>
            <label value="@bind(allTask.assigneeID)"/>
            <label value="@bind(allTask.assignDateTime)"/>
            <label value="@bind(allTask.assignDateTime)"/>
            <label value="@bind(allTask.assignDateTime)"/>
            <label value="@bind(allTask.assignDateTime)"/>
            <label value="@bind(allTask.documentDTO.docTypeStateDTO.stateActionDTO.actionDTO.title)"/>
            <label value="@bind(allTask.catalogDTO.catalogTypeDTO.title)"/>
        </row>
    </template>
</grid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T06:10:10.707

使用“动态模板”。请参考*[子绑定，结合动态模板](http://books.zkoss.org/wiki/ZK_Developer%27s_Reference/MVVM/Data_Binding/Children_Binding#Combine_with_Dynamic_Template)*。

在您的情况下，您可以将模板名称存储为 ViewModel 的属性，并像`@template(vm.templateName)`.

然后在运行时更改属性`vm.templateName`以切换 Grid 的模板。

# android - 在andengine中在哪里实现IAccelerationListener

> ID：15331717
> 
> 赞同：2
> 
> 时间：2013-03-11T05:23:19.277
> 
> 标签：android, andengine

您好，我正在使用 Andengine 在我的游戏中使用 IAccelerationListener 在 Android 中开发游戏。我已经使用 SceneManager 类实现了多个场景。但我有一个问题

```
"where to use IAccelerationListener" 
```

在

```
Level1 extends LScene implements IAccelerationListener 
```

或者

```
GameActivity extends SimpleBaseGameActivity implements IAccelerationListener 
```

在基本活动或场景中。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T06:33:12.123

嗨，如果`IAccelerationListener`在你的`levelscene`然后写这个

```
public class LevelScene extends Scene implements IAccelerometerListener {

    public LevelScene(YourGameAcitity object) {
        object.getEngine().enableAccelerometerSensor(object, this);
    }

    @Override
    public void onAccelerometerChanged(AccelerometerData pAccelerometerData) {
        System.out.println("X : " + pAccelerometerData.getX());
        System.out.println("Y : " + pAccelerometerData.getY());
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T05:34:55.020

您可以在 SimpleBaseGameActivity 中使用 IAccelerationListener。

GameActivity 扩展 SimpleBaseGameActivity 实现 IAccelerationListener

```
@Override
protected void onResume() {
    super.onResume();
    enableAccelerometerSensor(this);
}

@Override
protected void onPause() {
    super.onPause();
    disableAccelerometerSensor();
} 
```

# iphone - 为什么只在导航返回时调用 viewWillAppear

> ID：15331723
> 
> 赞同：8
> 
> 时间：2013-03-11T05:23:38.843
> 
> 标签：iphone, ios, uinavigationcontroller, viewcontroller

我怀疑需要明确..我有堆栈和导航控制器。现在当堆栈加载时`viewDidLoad` `viewWillAppear` `viewDidAppear`将被调用。当我单击某个按钮然后此按钮将我推到新堆栈时，现在新堆栈为我提供了后面的选项..现在当我单击导航控制器的背面时..为什么只会`viewWillAppear`被调用..为什么不`viewDidLoad`和不是`viewDidAppear`

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-11T05:33:20.973

堆栈是后进先出 (LIFO)，因此当您将新的视图控制器推送到堆栈时，以前的视图控制器不会被销毁（它们会保留在内存中）。当您弹回时，无需重新创建 Viewcontroller，因为它已经在内存中。所以只会`viewWillAppear`被调用。

至于为什么`viewDidAppear`在这种情况下不被调用，我不记得我在哪里读过这个，但是`viewDidAppear`在你的 UIViewController 的视图被添加到应用程序的 UIWindow 层次结构之后被调用。这个过程是在 UIViewController 第一次显示之前完成的。

`viewDidLoad`仅在 viewControllers 视图加载到内存中时调用。什么时候做

1.  第一次需要显示视图
2.  有时当 viewController 需要重新加载时，因为某些内存不足的原因它被从内存中清除。

在您的情况下，当您弹回时，viewController 已经加载，因此无需`viewDidLoad`再次调用。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-11T05:29:31.117

ios ui 的完整生命周期在这里解释。![在此处输入图像描述](../Images/bd1539939be3132ffec712b4c1587b89.png)

[http://www.verydemo.com/demo_c134_i4568.html](http://www.verydemo.com/demo_c134_i4568.html)

[来自评论的Abizern](https://stackoverflow.com/users/41116/abizern)注释：这适用于 iOS5 及更早版本。iOS6 不再卸载视图。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-11T05:38:49.533

首先，很好的问题@user2102546。在这里结帐是您查询的完美理由。

viewDidLoad 只有在视图控制器的视图被卸载并且需要重新加载时才会被调用。

通常，如果您使用导航控制器，并使用其中一种弹出方法返回上一个视图，**`viewDidLoad does not get called again, because the view are not unloaded yet`**.

但是，系统可以在任何视图控制器不在最前面时卸载它的视图以释放内存，因此 viewDidLoad 可以在视图控制器即将出现的任何时候被调用。您需要编写代码以正确响应不同的事件。

享受编程！！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-11T05:28:46.603

我没有完整的答案给你，但我希望这会有所帮助。

viewDidLoad 是一个回调，用于在加载事件发生后修改视图。在您的情况下，视图已经加载。它不在视图中的事实并不意味着它已从内存中卸载。

viewDidAppear：虽然我不知道为什么这个事件没有触发，如果其他人能填补这个空白我会很高兴。

# php - 自定义流包装器的流上下文

> ID：15331724
> 
> 赞同：2
> 
> 时间：2013-03-11T05:23:41.910
> 
> 标签：php, stream

在本段后面的代码片段中，我使用 Test_Stream 对象创建了一个名为 test 的流包装器。我正在尝试使用流上下文并有几个问题。首先是代码：

```
<?php
class Test_Stream {
    public $context;

    public function __construct()
    {
        print_r(stream_context_get_options($this->context));
        exit;
    }
}

$context = array(
    'test' => array('key' => 'value'),
    'otherwrapper' => array('key' =>'value')
);
$context = stream_context_create($context);

stream_wrapper_register('test', 'Test_Stream');

$fp = fopen('test://www.domain.tld/whatever', 'r', false, $context); 
```

所以现在，在那个代码片段中，Test_Stream 正在注册到“测试”流包装器，但是......如果我事先不知道包装器名称是什么，或者如果我想把它留给开发商来决定。你怎么知道类中的包装器名称是什么？似乎您必须提前知道它才能获得适当的上下文选项（除非您只是假设第一个上下文选项数组是正确的）但是如果您不提前知道它怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-11T19:26:58.427

您知道打开时调用了哪个协议，因此，在此处使用您的上下文：

```
<?php
class Test_Stream {
    public $context;

    public function stream_open($path, $mode, $options, &$opened_path ){
        var_dump(parse_url($path, PHP_URL_SCHEME));
        exit;
    }
}

$context = array(
    'test' => array('key' => 'value'),
    'otherwrapper' => array('key' =>'value')
);
$context = stream_context_create($context);
stream_wrapper_register('test', 'Test_Stream');
$fp = fopen('test://www.domain.tld/whatever', 'r', false, $context);

string(4) "test" 
```

# iphone - iPhone5底部的按钮不起作用

> ID：15331725
> 
> 赞同：1
> 
> 时间：2013-03-11T05:23:41.997
> 
> 标签：iphone, ios, camera, uibutton, iphone-5

在我的 iPhone 应用程序中，我在相机上使用了叠加层。我在底部捕捉、闪光、取消上有 3 个按钮在 iPhone 3.5" 设备上都可以正常工作。我已经根据 iPhone 5 更改了所有的 Y 位置。按钮在正确的位置。但是它们都没有工作

我对每个动作都设置了刹车点，它们没有被调用。尝试了最后 3 个小时，但无法找出问题所在。

有什么帮助吗？

**编辑** 我将我所有的按钮添加到这个覆盖

```
-(id)initWithFrame:(CGRect)frame {
  if (self = [super initWithFrame:frame]) {
   }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T05:29:53.083

据我了解，您的按钮超出了父视图的范围。因此他们没有响应触摸事件。您需要确保所有按钮都在父视图的范围内。您需要增加父视图的边界区域以容纳按钮。尝试增加按钮父视图的高度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T05:38:05.863

好吧，我已经解决了这个问题..您将不得不更改相机的框架`OverlayView`..如果您添加一个`UIView`然后在分配它时更改它的框架，或者如果您正在使用`Image Picker Controller`然后更改它的框架大小。

这应该可以帮助你。

让我知道是否有任何疑问。

# python - functools partial 是如何做到的？

> ID：15331726
> 
> 赞同：276
> 
> 时间：2013-03-11T05:23:43.330
> 
> 标签：python, functional-programming, partial-application, functools

我无法理解部分函数在 functools 中的工作原理。我从[这里](https://stackoverflow.com/questions/3252228/python-why-is-functools-partial-necessary)得到以下代码：

```
>>> sum = lambda x, y : x + y
>>> sum(1, 2)
3
>>> incr = lambda y : sum(1, y)
>>> incr(2)
3
>>> def sum2(x, y):
    return x + y

>>> incr2 = functools.partial(sum2, 1)
>>> incr2(4)
5 
```

现在排队

```
incr = lambda y : sum(1, y) 
```

我知道我传递给`incr`它的任何参数都将传递`y`给`lambda`哪个将返回`sum(1, y)`ie `1 + y`。

我明白那个。但我不明白这一点`incr2(4)`。

get 如何像偏函数`4`一样传递？`x`对我来说，`4`应该替换`sum2`. `x`和之间有什么关系`4`？

* * *

## 回答 #1

> 赞同：323
> 
> 时间：2013-03-11T05:35:54.327

粗略地说，`partial`做这样的事情（除了关键字参数支持等）：

```
def partial(func, *part_args):
    def wrapper(*extra_args):
        args = list(part_args)
        args.extend(extra_args)
        return func(*args)

    return wrapper 
```

因此，通过调用`partial(sum2, 4)`您创建一个新函数（准确地说是一个可调用函数），其行为类似于`sum2`，但少了一个位置参数。那个缺失的论点总是被 代替`4`，所以`partial(sum2, 4)(2) == sum2(4, 2)`

至于为什么需要它，有多种情况。仅举一个例子，假设您必须在预期有 2 个参数的地方传递一个函数：

```
class EventNotifier(object):
    def __init__(self):
        self._listeners = []

    def add_listener(self, callback):
        ''' callback should accept two positional arguments, event and params '''
        self._listeners.append(callback)
        # ...

    def notify(self, event, *params):
        for f in self._listeners:
            f(event, params) 
```

但是您已经拥有的功能需要访问第三个`context`对象才能完成其工作：

```
def log_event(context, event, params):
    context.log_event("Something happened %s, %s", event, params) 
```

所以，有几种解决方案：

自定义对象：

```
class Listener(object):
   def __init__(self, context):
       self._context = context

   def __call__(self, event, params):
       self._context.log_event("Something happened %s, %s", event, params)

 notifier.add_listener(Listener(context)) 
```

拉姆达：

```
log_listener = lambda event, params: log_event(context, event, params)
notifier.add_listener(log_listener) 
```

带部分：

```
context = get_context()  # whatever
notifier.add_listener(partial(log_event, context)) 
```

在这三个中，`partial`是最短和最快的。（对于更复杂的情况，您可能需要一个自定义对象）。

* * *

## 回答 #2

> 赞同：137
> 
> 时间：2013-03-11T05:46:35.897

**partials**非常有用。

例如，在函数调用的“流水线”序列中（其中一个函数的返回值是传递给下一个函数的参数）。

有时，此类管道中的函数需要一个*参数*，但紧接其上游的函数会返回*两个值*。

在这种情况下，`functools.partial`可能允许您保持此功能管道完好无损。

这是一个特定的孤立示例：假设您想按每个数据点与某个目标的距离对某些数据进行排序：

```
# create some data
import random as RND
fnx = lambda: RND.randint(0, 10)
data = [ (fnx(), fnx()) for c in range(10) ]
target = (2, 4)

import math
def euclid_dist(v1, v2):
    x1, y1 = v1
    x2, y2 = v2
    return math.sqrt((x2 - x1)**2 + (y2 - y1)**2) 
```

要按与目标的距离对这些数据进行排序，您当然想做的是：

```
data.sort(key=euclid_dist) 
```

但你不能—— *sort*方法的*key*参数只接受带有*单个*参数的函数。

所以重写`euclid_dist`为一个带*单个*参数的函数：

```
from functools import partial

p_euclid_dist = partial(euclid_dist, target) 
```

`p_euclid_dist`现在接受一个参数，

```
>>> p_euclid_dist((3, 3))
  1.4142135623730951 
```

所以现在你可以通过传入 sort 方法的 key 参数的偏函数来对数据进行排序：

```
data.sort(key=p_euclid_dist)

# verify that it works:
for p in data:
    print(round(p_euclid_dist(p), 3))

    1.0
    2.236
    2.236
    3.606
    4.243
    5.0
    5.831
    6.325
    7.071
    8.602 
```

或者例如，函数的参数之一在外部循环中发生变化，但在内部循环中的迭代期间是固定的。通过使用部分，您不必在内部循环的迭代期间传递附加参数，因为修改后的（部分）函数不需要它。

```
>>> from functools import partial

>>> def fnx(a, b, c):
      return a + b + c

>>> fnx(3, 4, 5)
      12 
```

创建一个偏函数（使用关键字 arg）

```
>>> pfnx = partial(fnx, a=12)

>>> pfnx(b=4, c=5)
     21 
```

您还可以使用位置参数创建部分函数

```
>>> pfnx = partial(fnx, 12)

>>> pfnx(4, 5)
      21 
```

但这会抛出（例如，使用关键字参数创建部分然后使用位置参数调用）

```
>>> pfnx = partial(fnx, a=12)

>>> pfnx(4, 5)
      Traceback (most recent call last):
      File "<pyshell#80>", line 1, in <module>
      pfnx(4, 5)
      TypeError: fnx() got multiple values for keyword argument 'a' 
```

`multiprocessing`另一个用例：使用 python 的库编写分布式代码。使用 Pool 方法创建进程池：

```
>>> import multiprocessing as MP

>>> # create a process pool:
>>> ppool = MP.Pool() 
```

`Pool`有一个 map 方法，但它只需要一个可迭代的，所以如果你需要传入一个具有更长参数列表的函数，请将函数重新定义为部分函数，​​以修复除一个之外的所有函数：

```
>>> ppool.map(pfnx, [4, 6, 7, 8]) 
```

* * *

## 回答 #3

> 赞同：56
> 
> 时间：2017-06-28T23:20:50.807

简短的回答，`partial`为函数的参数提供默认值，否则将没有默认值。

```
from functools import partial

def foo(a,b):
    return a+b

bar = partial(foo, a=1) # equivalent to: foo(a=1, b)
bar(b=10)
#11 = 1+10
bar(a=101, b=10)
#111=101+10 
```

* * *

## 回答 #4

> 赞同：43
> 
> 时间：2016-09-20T15:59:25.240

部分可用于创建新的派生函数，这些函数具有一些预先分配的输入参数

[要查看部分在现实世界中的使用情况，请在此处](http://chriskiehl.com/article/Cleaner-coding-through-partially-applied-functions/)参考这篇非常好的博客文章

博客中的一个简单而简洁的初学者示例，涵盖了如何使用`partial`on`re.search`使代码更具可读性。 `re.search`方法的签名是：

```
search(pattern, string, flags=0) 
```

通过应用`partial`，我们可以创建多个版本的正则表达式`search`来满足我们的要求，例如：

```
is_spaced_apart = partial(re.search, '[a-zA-Z]\s\=')
is_grouped_together = partial(re.search, '[a-zA-Z]\=') 
```

现在`is_spaced_apart`和`is_grouped_together`是两个新函数派生自`re.search`它们`pattern`应用了参数（因为`pattern`是`re.search`方法签名中的第一个参数）。

这两个新函数（可调用）的签名是：

```
is_spaced_apart(string, flags=0)     # pattern '[a-zA-Z]\s\=' applied
is_grouped_together(string, flags=0) # pattern '[a-zA-Z]\=' applied 
```

这就是您可以在某些文本上使用这些部分函数的方式：

```
for text in lines:
    if is_grouped_together(text):
        some_action(text)
    elif is_spaced_apart(text):
        some_other_action(text)
    else:
        some_default_action() 
```

您可以参考上面的[链接](http://chriskiehl.com/article/Cleaner-coding-through-partially-applied-functions/)以更深入地了解该主题，因为它涵盖了这个特定示例等等。

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2018-12-15T04:07:28.787

在我看来，这是在 python中实现[柯里化的一种方式。](https://en.wikipedia.org/wiki/Currying)

```
from functools import partial
def add(a,b):
    return a + b

def add2number(x,y,z):
    return x + y + z

if __name__ == "__main__":
    add2 = partial(add,2)
    print("result of add2 ",add2(1))
    add3 = partial(partial(add2number,1),2)
    print("result of add3",add3(1)) 
```

结果是 3 和 4。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-02-11T17:32:33.877

这个答案更像是一个示例代码。以上所有答案都很好地解释了为什么应该使用部分。我将给出关于部分的观察和用例。

```
from functools import partial
 def adder(a,b,c):
    print('a:{},b:{},c:{}'.format(a,b,c))
    ans = a+b+c
    print(ans)
partial_adder = partial(adder,1,2)
partial_adder(3)  ## now partial_adder is a callable that can take only one argument 
```

上述代码的输出应该是：

```
a:1,b:2,c:3
6 
```

请注意，在上面的示例中，返回了一个新的可调用对象，它将参数 (c) 作为其参数。请注意，它也是函数的最后一个参数。

```
args = [1,2]
partial_adder = partial(adder,*args)
partial_adder(3) 
```

上述代码的输出也是：

```
a:1,b:2,c:3
6 
```

请注意， * 用于解包非关键字参数，并且根据它可以采用的参数返回的可调用对象与上述相同。

*另一个观察结果是：* 下面的示例演示了 partial 返回一个可调用对象，它将未声明的参数 (a) 作为参数。

```
def adder(a,b=1,c=2,d=3,e=4):
    print('a:{},b:{},c:{},d:{},e:{}'.format(a,b,c,d,e))
    ans = a+b+c+d+e
    print(ans)
partial_adder = partial(adder,b=10,c=2)
partial_adder(20) 
```

上述代码的输出应该是：

```
a:20,b:10,c:2,d:3,e:4
39 
```

相似地，

```
kwargs = {'b':10,'c':2}
partial_adder = partial(adder,**kwargs)
partial_adder(20) 
```

上面的代码打印

```
a:20,b:10,c:2,d:3,e:4
39 
```

当我使用模块中的`Pool.map_async`方法时，我必须使用它。`multiprocessing`您只能将一个参数传递给工作函数，因此我不得不使用它`partial`来使我的工作函数看起来像一个只有一个输入参数的可调用函数，但实际上我的工作函数有多个输入参数。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-07-17T17:05:54.837

还值得一提的是，当部分函数传递另一个我们想要“硬编码”一些参数的函数时，那应该是最右边的参数

```
def func(a,b):
    return a*b
prt = partial(func, b=7)
    print(prt(4))
#return 28 
```

但是如果我们做同样的事情，但是改变一个参数

```
def func(a,b):
    return a*b
 prt = partial(func, a=7)
    print(prt(4)) 
```

它会抛出错误，“TypeError: func() got multiple values for argument 'a'”

# widget - WooCommerce_Widget_Product_Categories 小部件删除类别

> ID：15331728
> 
> 赞同：0
> 
> 时间：2013-03-11T05:23:55.883
> 
> 标签：widget, woocommerce

我使用了 WooCommerce 产品类别小部件，但我需要从创建某个类别的列表中“删除”，我在小部件中添加了该选项，但不知道将其放在代码中的哪个位置......有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T15:47:17.277

我昨天试图这样做。这是我的解决方案。

在你的functions.php上添加这个：

```
function exclude_widget_categories($args){
    $exclude = "25"; // The IDs of the excluding categories separated by commas.
    $args["exclude"] = $exclude;
    return $args;
}

add_filter("woocommerce_product_categories_widget_args","exclude_widget_categories"); 
```

我改编了我在这里找到的这个片段：[从小部件类别列表中排除类别](http://wordpress.org/support/topic/excluding-category-from-widget)以使用 woocommerce 过滤器。

# android - 如何突出显示哪些日期来自数据库的日历日期

> ID：15331733
> 
> 赞同：6
> 
> 时间：2013-03-11T05:24:07.543
> 
> 标签：android, calendar

我有一个日期数据库，其中我有多个日期，所以我想突出显示我从数据库中获得的所有日期的背景我尝试了一些逻辑但在这里没有成功我把我的代码放进去无限循环。我想输出类似这样的东西，假设我的日期在数据库 5/3/2013 和 9/3/2013 中，那么两个日期背景应该在日历视图中突出显示。我使用了这个链接[http://www.androidhub4you.com/2012/10/custom-calendar-in-android.html](http://www.androidhub4you.com/2012/10/custom-calendar-in-android.html)这是我的代码：

在 printmonth() 函数中，我进行了更改

```
public class CalendarActivity extends Activity implements OnClickListener {
private static final String tag = "CalendarActivity";
private TextView currentMonth;
private Button selectedDayMonthYearButton;
private ImageView prevMonth;
private ImageView nextMonth;
private GridView calendarView;
private GridCellAdapter adapter;
private Calendar _calendar;
@SuppressLint("NewApi")
private int month, year;

@SuppressLint({ "NewApi", "NewApi", "NewApi", "NewApi" })
private final DateFormat dateFormatter = new DateFormat();
private static final String dateTemplate = "MMMM yyyy";
int i;
String valuofday;
int stryear;
DB_Database db;
String strmonthvalueofdatabase;
String[] strdate;
String value;
ArrayList<String> arraylist = new ArrayList<String>();

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.my_calendar_view);
    db = new DB_Database(this);

    _calendar = Calendar.getInstance(Locale.getDefault());
    month = _calendar.get(Calendar.MONTH) + 1;
    year = _calendar.get(Calendar.YEAR);
    // Log.d(tag, "Calendar Instance:= " + "Month: " + month + " " +
    // "Year: "
    // + year);

    selectedDayMonthYearButton = (Button) this
            .findViewById(R.id.selectedDayMonthYear);
    selectedDayMonthYearButton.setText("Selected: ");

    prevMonth = (ImageView) this.findViewById(R.id.prevMonth);
    prevMonth.setOnClickListener(this);

    currentMonth = (TextView) this.findViewById(R.id.currentMonth);
    currentMonth.setText(DateFormat.format(dateTemplate,
            _calendar.getTime()));

    nextMonth = (ImageView) this.findViewById(R.id.nextMonth);
    nextMonth.setOnClickListener(this);

    calendarView = (GridView) this.findViewById(R.id.calendar);

    // Initialised
    adapter = new GridCellAdapter(getApplicationContext(),
            R.id.calendar_day_gridcell, month, year);
    adapter.notifyDataSetChanged();
    calendarView.setAdapter(adapter);
}

/**
 * 
 * @param month
 * @param year
 */
private void setGridCellAdapterToDate(int month, int year) {
    adapter = new GridCellAdapter(getApplicationContext(),
            R.id.calendar_day_gridcell, month, year);
    _calendar.set(year, month - 1, _calendar.get(Calendar.DAY_OF_MONTH));
    currentMonth.setText(DateFormat.format(dateTemplate,
            _calendar.getTime()));
    adapter.notifyDataSetChanged();
    calendarView.setAdapter(adapter);
}

@Override
public void onClick(View v) {
    if (v == prevMonth) {
        if (month <= 1) {
            month = 12;
            year--;
        } else {
            month--;
        }
        // Log.d(tag, "Setting Prev Month in GridCellAdapter: " + "Month: "
        // + month + " Year: " + year);
        setGridCellAdapterToDate(month, year);
    }
    if (v == nextMonth) {
        if (month > 11) {
            month = 1;
            year++;
        } else {
            month++;
        }
        // Log.d(tag, "Setting Next Month in GridCellAdapter: " + "Month: "
        // + month + " Year: " + year);
        setGridCellAdapterToDate(month, year);
    }

}

@Override
public void onDestroy() {
    // Log.d(tag, "Destroying View ...");
    super.onDestroy();
}

// Inner Class
public class GridCellAdapter extends BaseAdapter implements OnClickListener {
    private static final String tag = "GridCellAdapter";
    private final Context _context;
    private final List<String> list;
    private static final int DAY_OFFSET = 1;
    private final String[] weekdays = new String[] { "Sun", "Mon", "Tue",
            "Wed", "Thu", "Fri", "Sat" };
    private final String[] months = { "January", "February", "March",
            "April", "May", "June", "July", "August", "September",
            "October", "November", "December" };
    private final int[] daysOfMonth = { 31, 28, 31, 30, 31, 30, 31, 31, 30,
            31, 30, 31 };
    private int daysInMonth;
    private int currentDayOfMonth;
    private int currentWeekDay;
    private Button gridcell;
    private TextView num_events_per_day;
    private final HashMap<String, Integer> eventsPerMonthMap;
    private final SimpleDateFormat dateFormatter = new SimpleDateFormat(
            "dd-MMM-yyyy");

    // Days in Current Month
    public GridCellAdapter(Context context, int textViewResourceId,
            int month, int year) {
        super();
        this._context = context;
        this.list = new ArrayList<String>();
        // Log.d(tag, "==> Passed in Date FOR Month: " + month + " "
        // + "Year: " + year);
        Calendar calendar = Calendar.getInstance();
        setCurrentDayOfMonth(calendar.get(Calendar.DAY_OF_MONTH));
        setCurrentWeekDay(calendar.get(Calendar.DAY_OF_WEEK));
        stryear = calendar.get(Calendar.YEAR);
        // Log.d(tag, "New Calendar:= " + calendar.getTime().toString());
        // Log.d(tag, "CurrentDayOfWeek :" + getCurrentWeekDay());
        // Log.d(tag, "CurrentDayOfMonth :" + getCurrentDayOfMonth());
        printMonth(month, year);

        eventsPerMonthMap = findNumberOfEventsPerMonth(year, month);
    }

    private String getMonthAsString(int i) {
        return months[i];
    }

    private String getWeekDayAsString(int i) {
        return weekdays[i];
    }

    private int getNumberOfDaysOfMonth(int i) {
        return daysOfMonth[i];
    }

    public String getItem(int position) {
        return list.get(position);
    }

    @Override
    public int getCount() {
        return list.size();
    }

    /**
     * Prints Month
     * 
     * @param mm
     * @param yy
     */
    private void printMonth(int mm, int yy) {
        // Log.d(tag, "==> printMonth: mm: " + mm + " " + "yy: " + yy);
        // The number of days to leave blank at
        // the start of this month.

        int trailingSpaces = 0;
        int daysInPrevMonth = 0;
        int prevMonth = 0;
        int prevYear = 0;
        int nextMonth = 0;
        int nextYear = 0;

        int currentMonth = mm - 1;
        String currentMonthName = getMonthAsString(currentMonth);
        daysInMonth = getNumberOfDaysOfMonth(currentMonth);

        // Log.d(tag, "Current Month: " + " " + currentMonthName +
        // " having "
        // + daysInMonth + " days.");

        // Gregorian Calendar : MINUS 1, set to FIRST OF MONTH
        GregorianCalendar cal = new GregorianCalendar(yy, currentMonth, 1);
        // Log.d(tag, "Gregorian Calendar:= " + cal.getTime().toString());

        if (currentMonth == 11) {
            prevMonth = currentMonth - 1;
            daysInPrevMonth = getNumberOfDaysOfMonth(prevMonth);
            nextMonth = 0;
            prevYear = yy;
            nextYear = yy + 1;
            // Log.d(tag, "*->PrevYear: " + prevYear + " PrevMonth:"
            // + prevMonth + " NextMonth: " + nextMonth
            // + " NextYear: " + nextYear);
        } else if (currentMonth == 0) {
            prevMonth = 11;
            prevYear = yy - 1;
            nextYear = yy;
            daysInPrevMonth = getNumberOfDaysOfMonth(prevMonth);
            nextMonth = 1;
            // Log.d(tag, "**--> PrevYear: " + prevYear + " PrevMonth:"
            // + prevMonth + " NextMonth: " + nextMonth
            // + " NextYear: " + nextYear);
        } else {
            prevMonth = currentMonth - 1;
            nextMonth = currentMonth + 1;
            nextYear = yy;
            prevYear = yy;
            daysInPrevMonth = getNumberOfDaysOfMonth(prevMonth);
            // Log.d(tag, "***---> PrevYear: " + prevYear + " PrevMonth:"
            // + prevMonth + " NextMonth: " + nextMonth
            // + " NextYear: " + nextYear);
        }

        // Compute how much to leave before before the first day of the
        // month.
        // getDay() returns 0 for Sunday.
        int currentWeekDay = cal.get(Calendar.DAY_OF_WEEK) - 1;
        String strcurrentweekdat = Integer.toString(currentWeekDay);
        Log.v("currentweekdays", strcurrentweekdat);
        trailingSpaces = currentWeekDay;

        // Log.d(tag, "Week Day:" + currentWeekDay + " is "
        // + getWeekDayAsString(currentWeekDay));
        // Log.d(tag, "No. Trailing space to Add: " + trailingSpaces);
        // Log.d(tag, "No. of Days in Previous Month: " + daysInPrevMonth);

        if (cal.isLeapYear(cal.get(Calendar.YEAR)) && mm == 1) {
            ++daysInMonth;
        }

        // Trailing Month days
        for (int i = 0; i < trailingSpaces; i++) {
            // Log.d(tag,
            // "PREV MONTH:= "
            // + prevMonth
            // + " => "
            // + getMonthAsString(prevMonth)
            // + " "
            // + String.valueOf((daysInPrevMonth
            // - trailingSpaces + DAY_OFFSET)
            // + i));
            list.add(String
                    .valueOf((daysInPrevMonth - trailingSpaces + DAY_OFFSET)
                            + i)
                    + "-GREY"
                    + "-"
                    + getMonthAsString(prevMonth)
                    + "-"
                    + prevYear);

        }
        String strcurrentmonth = getMonthAsString(currentMonth);
        Log.v("strcurrentmonth", strcurrentmonth);

        String strcurrentyear = Integer.toString(stryear);
        Log.v("strcurrentmonth", strcurrentyear);

        // for database file

        SQLiteDatabase sqlitedatabase = db.getReadableDatabase();
        Cursor cursor = sqlitedatabase.query(DB_Database.REPORT, null,
                null, null, null, null, null);

        int hilihgtedDate = 0;

        // get array of hilighted dates...
        ArrayList<String> arraylist = new ArrayList<String>();

        // get array of hilighted dates...
        cursor.moveToFirst();
        do {
            arraylist.add(cursor.getString(cursor
                    .getColumnIndex(DB_Database.REPORT_MEDICINE_DATE)));
            hilihgtedDate++;
        } while (cursor.moveToNext() == true);

        // now that you have the dates to be hilighted, create the month
        // view as you were doing previously,
        // Trailing Month days
        for (int i = 0; i < trailingSpaces; i++) {
            Log.d(tag,
                    "PREV MONTH:= "
                            + prevMonth
                            + " => "
                            + getMonthAsString(prevMonth)
                            + " "
                            + String.valueOf((daysInPrevMonth
                                    - trailingSpaces + DAY_OFFSET)
                                    + i));
            list.add(String
                    .valueOf((daysInPrevMonth - trailingSpaces + DAY_OFFSET)
                            + i)
                    + "-GREY"
                    + "-"
                    + getMonthAsString(prevMonth)
                    + "-"
                    + prevYear);
        }

        int k = 0;
        // Current Month Days
        for (i = 1; i <= daysInMonth; i++) {

            // prevents un-ncesessart splitting steps...
            if (k <= hilihgtedDate) {
                /*
                 * checks if current date is equal to 1st hilighted date...
                 * if yes, then hilight the date and get the next hilihgted
                 * date, if no, then just add that date
                 */
                Log.v("string arraylist", arraylist.get(i));
                String[] splitstrdate = arraylist.get(k).split("/");

                String splitstrday = splitstrdate[0];
                Log.v("splitstrday", splitstrday);
                int intsplitstrday = Integer.parseInt(splitstrday);

                String splitstrmonth = splitstrdate[1];
                int intmonth = Integer.parseInt(splitstrmonth);

                int newintvalue = intmonth - 1;
                String splitstryear = splitstrdate[2];
                int intsplitstryear = Integer.parseInt(splitstryear);
                for (i = 0; i < newintvalue; i++) {
                    String strone = Integer.toString(newintvalue);
                    strone = months[i];
                    Log.v("strone", strone);
                }
                Log.v("month value", months[i].toString());
                String strentermonth = months[i].toString();

                if (i == intsplitstrday && strcurrentmonth == strentermonth
                        && year == intsplitstryear) {
                    list.add(String.valueOf(i) + "-BLUE" + "-"
                            + getMonthAsString(currentMonth) + "-" + yy);
                    k++;
                } else {
                    list.add(String.valueOf(i) + "-WHITE" + "-"
                            + getMonthAsString(currentMonth) + "-" + yy);
                }
            } else {
                /*
                 * There are no more hilighted dates, so no need to split
                 * the date and do the checking, simply write the dates as
                 * they are...
                 */
                list.add(String.valueOf(i) + "-WHITE" + "-"
                        + getMonthAsString(currentMonth) + "-" + yy);
            }
        }

        // Leading Month days
        for (int i = 0; i < list.size() % 7; i++) {
            Log.d(tag, "NEXT MONTH:= " + getMonthAsString(nextMonth));
            list.add(String.valueOf(i + 1) + "-GREY" + "-"
                    + getMonthAsString(nextMonth) + "-" + nextYear);
        }

    }

    /**
     * NOTE: YOU NEED TO IMPLEMENT THIS PART Given the YEAR, MONTH, retrieve
     * ALL entries from a SQLite database for that month. Iterate over the
     * List of All entries, and get the dateCreated, which is converted into
     * day.
     * 
     * @param year
     * @param month
     * @return
     */

    private HashMap<String, Integer> findNumberOfEventsPerMonth(int year,
            int month) {
        HashMap<String, Integer> map = new HashMap<String, Integer>();

        return map;
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View row = convertView;
        if (row == null) {
            LayoutInflater inflater = (LayoutInflater) _context
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            row = inflater.inflate(R.layout.screen_gridcell, parent, false);
        }

        // Get a reference to the Day gridcell
        gridcell = (Button) row.findViewById(R.id.calendar_day_gridcell);
        gridcell.setOnClickListener(this);
        // ACCOUNT FOR SPACING

        // Log.d(tag, "Current Day: " + getCurrentDayOfMonth());
        String[] day_color = list.get(position).split("-");
        Log.v("string value", day_color[1]);
        // Log.v("day",valuofday);

        String theday = day_color[0];
        String themonth = day_color[2];
        String theyear = day_color[3];

        if ((!eventsPerMonthMap.isEmpty()) && (eventsPerMonthMap != null)) {
            if (eventsPerMonthMap.containsKey(theday)) {
                num_events_per_day = (TextView) row
                        .findViewById(R.id.num_events_per_day);
                Integer numEvents = (Integer) eventsPerMonthMap.get(theday);
                num_events_per_day.setText(numEvents.toString());
            }
        }
        // Set the Day GridCell
        gridcell.setText(theday);

        gridcell.setTag(theday + "-" + themonth + "-" + theyear);

        // Log.d(tag, "Setting GridCell " + theday + "-" + themonth + "-"
        // + theyear);
        Log.v("str daycolor", day_color[1]);

        if (day_color[1].equals("GREY")) {
            gridcell.setTextColor(getResources()
                    .getColor(R.color.lightgray));
        }
        if (day_color[1].equals("WHITE")) {
            gridcell.setTextColor(getResources().getColor(
                    R.color.lightgray02));
        }
        if (day_color[1].equals("BLUE")) {
            gridcell.setBackgroundColor(getResources().getColor(
                    R.color.orrange));
        }
        return row;
    }

    @Override
    public void onClick(View view) {
        String date_month_year = (String) view.getTag();
        selectedDayMonthYearButton.setText("Selected: " + date_month_year);
        // Log.e("Selected date", date_month_year);
        try {
            Date parsedDate = dateFormatter.parse(date_month_year);
            // Log.d(tag, "Parsed Date: " + parsedDate.toString());
        } catch (ParseException e) {
            e.printStackTrace();
        }
    }
    public int getCurrentDayOfMonth() {
        return currentDayOfMonth;
    }

    private void setCurrentDayOfMonth(int currentDayOfMonth) {
        this.currentDayOfMonth = currentDayOfMonth;
    }

    public void setCurrentWeekDay(int currentWeekDay) {
        this.currentWeekDay = currentWeekDay;
    }

    public int getCurrentWeekDay() {
        return currentWeekDay;
    }

} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T09:15:12.973

在您的`for`循环中，您重新启动了 variable 的值`i`。它应该看起来像这样：

```
int j = 0;
for (; j < newintvalue; j++) {
    String strone = Integer.toString(newintvalue);
    strone = months[j];
    Log.v("strone", strone);
}
Log.v("month value", months[j].toString());
String strentermonth = months[j].toString(); 
```

# c - 指针和数组在内存方面的区别

> ID：15331734
> 
> 赞同：1
> 
> 时间：2013-03-11T05:24:14.167
> 
> 标签：c, memory

```
char* pointer;
char array[10]; 
```

我知道第二个内存已经分配在缓冲区中。但是，我不知道指针在内存分配方面的工作原理。在程序员使用 malloc 或 calloc 分配指针之前，指针最初占用多少空间？另外，如果我像这样初始化它

```
char* pointer;
pointer = "Hello World!"; 
```

如果在使用一些随机字符串大小初始化之前没有分配内存，那么这是如何初始化的？不会有任何错误吗？

我只是机械地使用指针和数组进行编程，而并不真正了解它在计算机内部的工作原理。而且，我认为我应该完全理解这一点，以便更好地进行编程练习。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T05:51:47.043

指针只是存储一个变量的地址。即，如果您说 char* 它存储一个字符的地址。像 int i=9; 表示 sizeof(int) 的内存被保留并在您的程序中标记为“i”。像明智的 char* c; 表示 size(char*) 的内存被保留并标记为“c”；在 c="你好"; "h","e","l","l","o" 分配了单独的“连续”内存。并且指针 c 指向第一个字符“H”。

考虑在内存中 HELLO 存储在字符串“India”之前。

“你好，印度。”

对于 char *c="HELLO"; c[5] 返回 I. for char c[5]="HELLO"; c[5] 是数组越界错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T05:38:59.610

`char array[10]`, 它将在您声明它的函数的堆栈帧上保留 10 个字节的内存。

而在`char *ptr = "hello"`ptr 中，将以`4 bytes`32 位的形式在堆栈上获取内存`O.S`，`"hello"`而字符串文字也将存储在`non-bss`您的可执行文件的一部分中，并且 ptr 从堆栈帧中指向它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T05:27:46.357

1.  本声明：

    ```
    char *pointer; 
    ```

    为指针值保留`sizeof(char *)`字节。没有分配其他内存。

2.  本声明：

    ```
    char array[10]; 
    ```

    为数组保留 10 个字节。

3.  在这种情况下：

    ```
    char *pointer;
    pointer = "Hello World!"; 
    ```

    您仍然有一个指针（`sizeof(char *)`大小）指向内存中某处的字符串文字 - 没有其他分配发生。字符串文字的存储由您的工具链在编译时计算。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T05:51:29.640

指针和数组是完全不同的东西。两者之间的任何相似和混淆都是 C 语言的产物。

指针是一个变量，它保存另一个变量的位置。数组（在 C 中）是相同类型的值的集合，在内存中连续分配。

数组通过算术访问指向基元素的指针，`[0]`. 如果对引用数组的表达式求值，则出现的值是指向 element 的指针`[0]`。

```
int array[10];
int *p = array;     /* array expression yields pointer to array[0] */
int *q = &array[0]; /* q also points to same place as p */ 
```

C 中的数组表示法是一个假的，它实际上与指针一起工作。语法`E1[E2]`的含义与`*(E1 + E2)`（假设 E1 和 E2 有足够的括号，我们不必被关联性和优先级分心。）当我们通过 获取元素的地址时`&E1[E2]`，这与`&*(E1 + E2)`. 地址和取消引用“取消”离开`E1 + E2`。因此，这些也是等价的：

```
int *r = array + 3;
int *q = &array[3]; 
```

因为`array[i]`和`pointer[i]`都是有效的语法，处于新手阶段的人（误认为语法是语义）得出的结论是数组和指针在某种程度上是同一回事。

花一些时间用汇编语言编程。在汇编语言中，您可能会定义一些像这样的存储：

```
 A: DFS 42          ;; define 42 words, labelled as A. 
```

然后像这样使用它：

```
 MOV R13, A         ;; address of A storage is moved into R13
 MOV R1, [R13 + 3]  ;; load fourth word, A[3] 
```

R13 指向存储。这并不意味着 A*是*一个指针。A 是存储的*名称*。当然，要使用存储，我们需要它的*有效地址*，因此对 A 的引用可以解决这个问题。当代码被汇编和链接时，该`MOV`指令最终会将一些数字地址加载到 R13 中。

C 只是一种高级汇编语言。数组就像命名存储，它解析为其有效地址（作为指针数据类型）。

数组并不总是解析到它们的有效地址。`sizeof a`以字节为单位计算数组的大小`a`，而`sizeof p`计算指针数据类型的大小`p`。

另一个区别是数组的名称不能引用该数组以外的任何地方，而我们可以为指针赋值：

```
array++;           /* invalid */
array = &array[0]; /* invalid */
p = &array2[0];    /* valid */
p++;               /* valid: point to the next element in array2 */ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T05:36:03.760

指针占用描述内存位置所需的任何空间。通常（但不总是），指针的大小与处理器/操作系统/程序模式的位大小相同（例如，64 位操作系统上的 64 位程序为 8 个字节，在 64 位操作系统上为 4 个字节32 位程序等）。您可以使用

```
sizeof (void *) 
```

如果是

```
char* pointer;
pointer = "Hello World!"; 
```

您将在 R/W 内存中分配一个指针，加上 R/O 内存中的字符串空间（13 个字节，包括尾随的空字节），如果内存中的下一个对象对齐得比一个字节更好，则可能更多边界）。请注意，相同的 R/O 空间将被分配给

```
printf("Hello World!"); 
```

所以这实际上与指针无关。事实上，大多数优化编译器会注意到这两个字符串完全相同，并且只在 R/O 内存中分配一次。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-11T05:36:39.190

> 我不知道指针在内存分配方面的工作原理。在程序员使用 malloc 或 calloc 分配指针之前，指针最初占用多少空间？

指针本身只是一种数据类型，如 int、char...等。它指向一个内存地址（或 NULL）。

它可以是 malloc，成为指向您要求的内存块的指针。

你很可能误认为指针 = malloc，它不是。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-11T05:37:59.717

当您在 c 中定义指针时，例如 char *c; 或 int *i 它将分别保留等于 sizeof(char *) 和 sizeof(int *) 的内存。

但是实际保留的内存取决于您的系统/操作系统，如果是 64 位，则保留 8 个字节，如果是 32 位，则保留 4 个字节。

如果声明 char *c = "Hello world";

字符串“Hello world”可以存储在内存中的任何位置，但这里 c 指向字符串的第一个字符“H”。

# c - C 到 MIPS 转换

> ID：15331737
> 
> 赞同：-6
> 
> 时间：2013-03-11T05:24:29.170
> 
> 标签：c, compiler-construction, mips

谁能帮我将下面的 C 代码转换为 MIPS 代码？我应该使用递归并得到 21 - 2 作为最终答案。谢谢！

```
/*
x is a pointer to a linked list node and is not null.
Return the min value stored in the linked list.

Assume each node is stored in memory as an int (value) followed by a pointer to the next node (next), each a word wide.
You must write it with recursion.  */

int findMin(node *x) {
    if(x->next == NULL)
        return x->value;
    else {
        int min = findMin(x->next);
        if(min < x->value) 
            return min;
        else
            return x->value;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T05:29:53.807

给你：

```
mips-linux-gnu-gcc -S -o foo.asm foo.c 
```

# android - jsonarray 上的 NullPointer 异常

> ID：15331741
> 
> 赞同：0
> 
> 时间：2013-03-11T05:24:42.807
> 
> 标签：android, json, nullpointerexception

```
FATAL EXCEPTION: main
java.lang.NullPointerException
at org.json.JSONTokener.nextCleanInternal(JSONTokener.java:116)
at org.json.JSONTokener.nextValue(JSONTokener.java:94)
at org.json.JSONArray.<init>(JSONArray.java:87)
at org.json.JSONArray.<init>(JSONArray.java:103)
at com.example.accountmanager.MainActivity.onClick(MainActivity.java:132)
at android.view.View.performClick(View.java:3644)
at android.view.View$PerformClick.run(View.java:14313)
at android.os.Handler.handleCallback(Handler.java:605)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4514)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:993)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:760)
at dalvik.system.NativeStart.main(Native Method) 
```

代码

```
package com.example.accountmanager;

public class MainActivity extends Activity implements OnClickListener {

    TextView sign;
    EditText user, pwd;
    Button ok, exit;
    InputStream is;
    String result;
    StringBuilder sb;
    public static String uName;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        user = (EditText) findViewById(R.id.txtUser);
        pwd = (EditText) findViewById(R.id.txtPass);
        ok = (Button) findViewById(R.id.btnOk);

        exit = (Button) findViewById(R.id.btnExit);
        sign = (TextView) findViewById(R.id.txtSignUp);
        ok.setOnClickListener(this);
        exit.setOnClickListener(this);
        sign.setOnClickListener(this);
    }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        switch (v.getId()) {

        case R.id.btnExit:
            finish();
            break;

        case R.id.txtSignUp:
            Intent intent = new Intent(MainActivity.this, Register.class);
            startActivity(intent);
            break;

        case R.id.btnOk:
            Toast.makeText(this, user.getText() + "    " + pwd.getText(),
                    Toast.LENGTH_SHORT).show();
            ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
            nameValuePairs.add(new BasicNameValuePair("username", user
                    .getText().toString()));
            nameValuePairs.add(new BasicNameValuePair("password", pwd.getText()
                    .toString()));
            nameValuePairs.add(new BasicNameValuePair("status", "Login"));
            try {
                HttpClient httpclient = new DefaultHttpClient();
                HttpPost httppost = new HttpPost(
                        "http://www.mpos.webuda.com/Login.php");
                httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                HttpResponse response = httpclient.execute(httppost);
                HttpEntity entity = response.getEntity();
                is = entity.getContent();
            } catch (Exception e) {
                Toast.makeText(this, "Error", Toast.LENGTH_SHORT).show();
                // Log.e("log_tag", "Error in http connection" + e.toString());
            } // convert response to string
            try {
                BufferedReader reader = new BufferedReader(
                        new InputStreamReader(is, "iso-8859-1"), 8);
                sb = new StringBuilder();
                sb.append(reader.readLine() + "\n");
                String line = "0";
                // int count=0;
                while ((line = reader.readLine()) != null) {
                    sb.append(line + "\n");
                    // Toast.makeText(this, line, Toast.LENGTH_SHORT).show();
                }
                /*
                 * if(count==0||line==null) Toast.makeText(this, "no record",
                 * Toast.LENGTH_SHORT).show();
                 */
                is.close();
                result = sb.toString();
            } catch (Exception e) {
                // Log.e("log_tag", "Error converting result "+e.toString());
            }
            // paring data
            String username = "",
            userType = "",
            password = "";
            try {
                // This is the line where the error is pointing to.
                JSONArray jArray = new JSONArray(result);
                JSONObject json_data = null;
                for (int i = 0; i < jArray.length(); i++) {
                    json_data = jArray.getJSONObject(i);
                    userType = json_data.getString("U_TYPE");
                    password = json_data.getString("U_PASS");
                    username = json_data.getString("U_NAME");
                }
                if (password.equals(pwd.getText().toString())) {
                    uName = username;
                    Toast.makeText(this, "Login Successful", Toast.LENGTH_SHORT)
                            .show();
                    if (userType.equalsIgnoreCase("admin")) {
                        Intent i = new Intent(MainActivity.this, Options.class);
                        startActivity(i);
                    } else {
                        Intent userIntent = new Intent(MainActivity.this,
                                se.anyro.nfc_reader.TagViewer.class);
                        userIntent.putExtra("uName", username);
                        startActivity(userIntent);
                    }
                } else
                    Toast.makeText(this, "Invalid Password", Toast.LENGTH_SHORT)
                            .show();
            } catch (JSONException e1) {
                Toast.makeText(getBaseContext(), "Invalid Username/Password",
                        Toast.LENGTH_LONG).show();
            } catch (ParseException e1) {
                e1.printStackTrace();
            }
        }
    }
} 
```

当我在我的 lg optimus p500 上运行此代码时，应用程序运行良好，但是当我在我的 s3 i9300 上运行它时，我不知道为什么我在代码中出现错误，我收到此错误并且不知道如何解决这请帮忙。下面是我的源代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T05:36:48.940

首先，将您的 http 结果放入 JSONObject ---

```
JSONObject jsonResult = new JSONObject(result); 
```

然后从 JSON 对象中获取数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-07T09:12:55.977

问题是因为您的“结果”在此处包含 NULL：

```
JSONArray jArray = new JSONArray(result); 
```

肯定发生了，因为 UI 线程中不允许网络操作，并且您的下载代码在没有回退的情况下崩溃并在结果中返回 NULL。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-11T05:35:16.723

阅读：[http ://www.androiddesignpatterns.com/2012/06/app-force-close-honeycomb-ics.html](http://www.androiddesignpatterns.com/2012/06/app-force-close-honeycomb-ics.html)

由于 Honeycomb 及更高版本的检查更严格，您无法在 UI 线程上进行网络操作。按照建议，使用 AsyncTask 进行网络操作。

# neural-network - 八度音程中的 poslin() 函数没有给出所需的输出

> ID：15331744
> 
> 赞同：0
> 
> 时间：2013-03-11T05:25:07.327
> 
> 标签：neural-network, octave

我对 octave 中的 poslin() 函数有点困惑。如果我让步`poslin(-1)`，输出就是我想要的`0`；对于`poslin(n)`，输出为`n`。但是，如果我屈服`poslin( [ 3 ; -1])`；结果不是`[3 ; 0]`；这有点意料之中，因为 poslin() 函数的输入不是标量，而是向量。现在，如果是这样；如何`[3 ; -1] to [3 ; 0]`使用 poslin() 函数进行转换。任何建议都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T04:01:44.490

您可以轻松定义自己的矢量化 poslin，例如`poslin = @(x) x .* (x > 0)`

# css - jQuery 选项卡内容溢出 + heightStyle 和刷新中断选项卡

> ID：15331759
> 
> 赞同：1
> 
> 时间：2013-03-11T05:26:28.773
> 
> 标签：css, jquery-ui-tabs

我在[我的站点上](http://hr.barton.s483.sureserver.com/tool_new1b.php)垂直使用 jQuery-UI 选项卡，直到我开始在选项卡面板中加载内容并发现父选项卡面板 div 不随内容增长，例如选项卡“静态信息”之前，都没有问题。**我可以通过将父 div 类 CSS 设置为overflow: auto**来“解决”这个问题，然后在父 div 上创建一个垂直滚动条。但是，如果父 div 会随着子内容一起增长，我真的更喜欢。我确实尝试了几个 clearfix 选项，包括：

`$( ".tabs" ).tabs().addClass( "ui-helper-clearfix" );`

初始化文档时，但没有一个 clearfixes 有任何区别。在寻求解决方案时，我确实尝试调整 heightStyle 和 tab refresh 以查看其中任何一个是否会有所作为。我发现这什么​​也没做：

`$( ".tabs" ).tabs({ heightStyle: "fill" });` 我也尝试了“内容”和“自动”，但也没有运气。

但是，当我尝试 api.jquery.com/tabs 中记录的替代方法时：

```
var heightStyle = $( ".tabs" ).tabs( "option", "heightStyle" );

$( ".selector" ).tabs( "option", "heightStyle", "fill" ); 
```

标签布局完全崩溃了。内容都在那里，但 ul 列表位于页面顶部，没有选项卡，然后是所有面板内容。我得到了相同的结果：

`$( ".tabs" ).tabs( refresh );`

我确实验证了我的 jQuery UI 是否正常工作（例如，我尝试过

```
$( ".tabs" ).tabs({ event: "mouseover" }); which worked fine. 
```

这看起来应该很简单，但是我已经用 CSS 达到了一个相对的死胡同，我不明白 jQuery 发生了什么——为什么它会因 heightStyle 和刷新而中断。非常感谢任何关于让我的内容表现出来的想法或建议......谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T08:55:42.540

从以下调整：

```
#tabs-left > div {
    height: 35em;
} 
```

到：

```
#tabs-left > div {
    min-height: 35em;
} 
```

# perl - Perl：匹配模式后如何打印下一行？

> ID：15331762
> 
> 赞同：3
> 
> 时间：2013-03-11T05:26:55.817
> 
> 标签：perl, pattern-matching

我想在匹配模式或行后打印特定数据。我有一个这样的文件：

```
#******************************    
List : car  
Design: S  
Date: Sun 10:10  
#******************************

b-black  
g-green
r-red  

Car Type              No.           color  
#-------------------------------------------    
N17              bg099            g  
#-------------------------------------------    
Total 1 car  

#****************************** 
List : car  
Design: L  
Date: Sun 10:20  
#******************************

b-black  
g-green
r-red  

Car Type            No.            color   
#-------------------------------------------    
A57            ft2233            b  
#-------------------------------------------    
Total 1 car  

#******************************    
List : car  
Design: M  
Date: Sun 12:10  
#******************************    

b-black  
g-green
r-red  

Car Type           No.             color  
#-------------------------------------------    
L45            nh669             g   
#-------------------------------------------    
Total 1 car  

#. .    
#. .     
#.    
#. 
```

例如，我想在 N17 和 bg099 行“Type....”和虚线“------”之后打印数据。我已经尝试过了，但它无法正常工作。

```
my @array;    

While (@array = <FILE>) {    

foreach my $line (@array) {    

if ($line =~ m/(Car)((.*))/) {      

my $a = $array[$i+2];    
push (@array, $a);    
}  

if ($array[$i+2] =~ m/(.*)\s+(.*)\s+(.*)/) {    
my $car_type = "$1";      
print "$car_type\n";      
}      
}    
} 
```

预期输出：

```
Car Type            No.  
   N17             bg099  
   A57             ft2233    
   L45             nh669  
   ..              ..  
   .               . 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T05:58:16.707

```
while (<FILE>) { #read line by line
    if ($_ =~ /^Car/) { #if the line starts with 'Car'
        <FILE> or die "Bad car file format"; #read the first line after a Car line, which is '---', in order to get to the next line
        my $model = <FILE>; #assign the second line after Car to $model, this is the line we're interested in.

        $model =~ /^([^\s]+)\s+([^\s]+)/; #no need for if, assuming correct file format #capture the first two words. You can replace [^\s] with \w, but I prefer the first option.
        print "$1 $2\n";
    }
} 
```

或者，如果您更喜欢更紧凑的解决方案：

```
while (<FILE>) { 
    if ($_ =~ /^Car/) { 
        <FILE> or die "Bad car file format"; 
        print join(" ",(<FILE> =~ /(\w+)\s+(\w+)/))."\n";
    } 
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-11T06:23:13.383

这是另一种选择：

```
use strict;
use warnings;

print "Car Type\tNo.\n";

while (<>) {
    if (/#-{32}/) {
        print "$1\t$2\n" if <> =~ /(\S+)\s+(\S+)/;
        <>;
    }
} 
```

输出：

```
Car Type    No.
N17 bg099
A57 ft2233
L45 nh669 
```

用法：`perl script.pl inFile [>outFile]`

Edit: Simplified

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T05:57:21.987

我让您的代码可以进行一些小的调整。它仍然不完美，但它有效。

*   “while”应该是小写的。
*   你永远不会增加 $i。
*   你重用@array 的方式充其量是令人困惑的，但如果你只输出 $a 你会得到你的汽车数据。

代码：

```
$file_to_get = "input_file.txt";
open (FILE, $file_to_get) or die $!;

my @array;

while (@array = <FILE>) {
    $i = 0;

    foreach my $line (@array) {

        if ($line =~ m/(Car)((.*))/) {
            my $a = $array[$i+2];
            push (@array, $a);
            print $a;
        }

        $i++;
    }
}
close(FILE); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-11T09:50:05.103

Something like this:

```
while (my $line = <>) {
    next unless $line =~ /Car\s+Type/;
    next unless $line = <> and $line =~ /^#----/;
    next unless $line = <>;
    my @fields = split ' ', $line;
    print "@fields[0,1]\n";
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-11T05:59:22.917

```
perl -lne 'if(/Type/){$a=<>;$a=<>;$a=~m/^([^\s]*)\s*([^\s]*)\s/g; print $1." ".$2}' your_file 
```

测试：

```
> perl -lne 'if(/Type/){$a=<>;$a=<>;$a=~m/^([^\s]*)\s*([^\s]*)\s/g; print $1." ".$2}' temp
N17 bg099
A57 ft2233
L45 nh669 
```

如果你想使用 awk，你可以这样做：

```
> awk '/Type/{getline;if($0~/^#---*/){getline;print $1,$2}}' your_file
N17 bg099
A57 ft2233
L45 nh669 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-11T06:19:32.490

一个**外壳**单线做同样的事情

```
echo "Car Type            No.  "; \
    grep -A 2 Type data.txt \
    | grep -v -E '(Type|-)' \
    | grep -o -E '(\w+ *\w+)' 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-09-28T22:19:38.807

Solution using Perl flip-flop operator. Assumption from the input that you always have Total line at the end of the block of interest

```
perl -ne '$a=/^#--/;$b=/^Total/;print if(($a .. $b) && !$a && !$b);' file 
```

# php - 为什么它总是在 php 中使用 headers 来发送电子邮件

> ID：15331764
> 
> 赞同：0
> 
> 时间：2013-03-11T05:27:11.613
> 
> 标签：php, http-headers

我的问题是为什么人们在 php 中使用带有电子邮件发送的标头。我知道我们可以在浏览器呈现内容之前向它发送一些信息。但是当我们在电子邮件正文上显示图像时，我注意到它使用了 php 标头。我们不能没有标题吗？因为那是在网络浏览器上渲染 html。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T05:53:41.587

你需要告诉浏览器我们正在渲染什么类型的内容..例如它是纯文本、html页面、pdf文件等......所以当我们想要在我们的电子邮件正文中包含html时，我们需要告诉浏览器它以便可以妥善处理

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T05:57:25.997

不可以。发送电子邮件必须包含`from`标题。[它在php.net](http://php.net/manual/en/function.mail.php)中写得很好

```
When sending mail, the mail must contain a From header. This can be set with the additional_headers parameter, or a default can be set in php.ini.

Failing to do this will result in an error message similar to Warning: mail(): "sendmail_from" not set in php.ini or custom "From:" header missing. The From header sets also Return-Path under Windows. 
```

`php.ini`如果您不想使用额外的标题，您可以设置它。

# jquery - 页面上具有多个相同表单的验证和表单功能

> ID：15331770
> 
> 赞同：0
> 
> 时间：2013-03-11T05:28:03.270
> 
> 标签：jquery, forms, validation

我在这里哪里做错了？

我在一个页面上有多个相同的表单。我有这个代码，除了天数计算外，它只适用于第一种形式：

```
 var options = { 
                            url: 'http://www.mysite.com/wp-admin/admin-ajax.php',
                            //target:'html',   // target element(s) to be updated with server response 
                            type: 'POST',
                            success:  function(e) {
                                   $(this).parent().parent('.modal.in').modal('hide');
                                   $('.formmodal').modal('hide');
                                   $('#thanks').modal('show');
                                  return false; 
                            },
                            clearForm: true,
                            error:  function(e) {
                                   $('#nope').modal('show');
                                  return false; 
                            },
                            resetForm: true,
                            data: {
                                    action: 'submit_package_form'
                            }
    };
    function calcDates() {
            $('.pkdate').on('change', function(e) {

                    var dstart = new Date($('#arrive').datepicker('getDate'));
                    var dend = new Date($('#leave').datepicker('getDate'));
                    var diff = 0;
                    if (dstart && dend) {
                        diff = Math.floor((dend.getTime() - dstart.getTime()) / 86400000); // ms per day
                        if(diff > 0){
                            $(this).parent().parent().find('#nights').val(diff);
                        }
                    }

           });
    }
    $(".form").each(function() {
        var validator = $(this).validate({
            onsubmit: true,
            errorClass: "alert-error",
            validClass: "success",
            rules: {
                   name: "required",
                   email: {
                           email:true, 
                           required:true
                   },
                   address: "required",
                   postcode: "required",
                   city: "required",
                   telephone: "required",
                   arrive: "required",
                   leave: "required",
                   nights: "required",
                   travelers: "required",
                   singles: "required",
                   doubles: "required",
                   fee: "required"
            },
            submitHandler: function(form) {
                    $(form).ajaxSubmit(options); 
            }
       });
       $('.rensa').click(function() {
                    validator.resetForm();
                    $('.extrab, .extrat').remove();
                    $('label.alert-error').hide();
                    $('.alert-error').removeClass("alert-error");
                    $('.alert-error').css('display','none');
                    $('.alert-error').remove();
       });
       calcDates(this);
    }); 
```

我需要这个适用于页面上的所有表单。我已经尝试在 each 中移动 calcDates 函数，但这并没有什么不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T05:45:33.743

您有几个上下文问题，并且似乎在页面中重复 ID。`ID`根据定义必须是唯一的。

从`calcDates`您在`each`using中调用它开始，`calcDates(this);`但函数声明没有设置参数。

没有看到 html 有点棘手，但可以按照以下方式对其进行修改：

```
/* add argument to function */
function calcDates(form) {
  /* using $form.find() to isolate instances*/
  var $form=$(form);/* you are  passing "this" within the form `each loop  */  
       $form.find('.pkdate').on('change', function(e) {
                 /* change repeating ID's to class with same name*/
                var dstart = new Date($form.find('.arrive').datepicker('getDate'));
                var dend = new Date($form.find('.leave').datepicker('getDate'));
                var diff = 0;
                if (dstart && dend) {
                    diff = Math.floor((dend.getTime() - dstart.getTime()) / 86400000); // ms per day
                    if(diff > 0){
                        $form.find('.nights').val(diff);
                    }
                }

       });
  } 
```

另一个问题在这里： `$('.rensa').click(function() {`

由于它处于`each`循环中，因此它将为循环的每一次传递创建一个新的 clisk 处理程序......**在集合中的每个元素上**。这会在每个元素上创建复合 clcik 处理程序

您需要使用与上述相同的概念以及所有错误元素来隔离`$('.rensa')`单个表单的实例`find()`

# jquery - 试图切换复选框选中属性的值

> ID：15331775
> 
> 赞同：0
> 
> 时间：2013-03-11T05:28:26.500
> 
> 标签：jquery, checkbox

我正在尝试针对具有“复选框”类的各种块，它们都包含一个标签和一个复选框类型的输入。当单击 .checkbox 区域内的任意位置（输入除外）时，“选中”值被切换，当单击输入时，该值保持不变。有人可以向我解释为什么会这样（为什么单击输入时，值不会切换）？

## HTML

```
<div class="checkbox">
    <label for="a">a</label>
    <input type="checkbox" name="a" checked>
</div>
<div class="checkbox">
    <label for="b">b</label>
    <input type="checkbox" name="b">
</div> 
```

## jQuery

```
function toggleProp(el) {
    $(el).prop("checked", !el.prop("checked"));
}

$(".checkbox").click(function () {
    toggleProp($(this).find("input"));
}); 
```

## [活生生的例子](http://codepen.io/varemenos/full/oBEpg)

**编辑：**

*   它应该做什么：

    > 单击 .checkbox 区域内的任意位置，输入的选中属性的值应该已从 true 切换为 false，反之亦然。

*   它能做什么：

    > 单击除 (!) 之外的 .checkarea 区域内的任意位置会切换值。单击输入时，值保持不变，这是不想要的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T06:37:08.267

找到了。

我还必须添加这部分：

```
$(".checkbox input").click(function(e) {
    e.stopPropagation();
}); 
```

这样，当点击输入时，它不会触发其父级的点击事件

# vim - 是否可以在 vim 的特定行上打开一个新选项卡？

> ID：15331780
> 
> 赞同：5
> 
> 时间：2013-03-11T05:28:53.153
> 
> 标签：vim

我尝试了以下两种方法均未成功。

```
tabnew Foo.java +30
tabnew Foo.java:30 
```

第一个给出错误消息，而 Vim 在第二种情况下打开时将整个字符串解释为文件名。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T05:39:40.907

你需要稍微颠倒一下参数，试试这个：

```
tabnew +30 Foo.java 
```

# android - 从活动中获取多个值并在edittext中设置它们

> ID：15331781
> 
> 赞同：1
> 
> 时间：2013-03-11T05:29:01.353
> 
> 标签：android

我从列表 Activity 中获取多个选定项目。现在如何设置该字符串数组来编辑文本。我想在 edittext 中显示多个值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T05:31:13.043

尝试这个

```
for(int i=0;i<strarray.length;i++)
{
youredittext.append(strarray[i]+"\n");
} 
```

# mysql - 每次从 MS Access 发生任何更改时，将数据从 MS Access 数据库传输到 Mysql 数据库

> ID：15331784
> 
> 赞同：1
> 
> 时间：2013-03-11T05:29:03.753
> 
> 标签：mysql, database, ms-access

我想问一下，每次 MS Access 有任何更改时，是否有任何方法可以将数据从 MS Access 数据库传输到 Mysql 数据库。？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T05:35:47.630

在 mysql 论坛中查看[此论坛主题。](http://forums.mysql.com/read.php?65,505788,505788#msg-505788)它们以很多不同的方式联系起来，比如

*   [Access-MySQL 转换器](http://www.softgalaxy.net/access-mysql/index.html#features)
*   [用于访问和 MySQL 的 DBSync](http://www.dbconvert.com/convert-access-to-mysql-sync.php)
*   [数据库加载](http://www.dbload.com/)
*   [MS 访问 MySQL 数据库转换器](http://www.recoverybull.com/recoverybull/msaccess-mysql-db.html)
*   [访问 MySQL](http://www.convert-in.com/acc2sql.htm)
*   [飞速](http://www.activedbsoft.com/overview-migrate-mysql.html)
*   [转换为 MySQL](http://www.spectralcore.com/fullconvert/tutorials/convert-to-mysql.php)

……还有更多。

[SQLyog](https://www.webyog.com/product/sqlyog)也有一个 Access 导入，它可以同步。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T10:06:37.413

如果您使用的是 Access 2010，您可能需要查看类似于 SQL/MySQL 中的触发器的[数据宏。](http://blogs.office.com/b/microsoft-access/archive/2009/08/13/access-2010-data-macros-similar-to-triggers.aspx)这将允许您更好地控制记录更改时发生的情况，但如果您只想要直接的数据同步，那么 Bjoern 的工具可能更有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T05:32:02.410

尝试以下操作将数据从 MS ACCESS 导出为 CSV 格式，然后将其导入 MYSQL

*   对仅包含所需列的表进行查询，然后保存。
*   选择查询，然后进入文件->导出（选择另存为
    “文本*.txt、*cvs等”）并按照提示操作

我希望这会有所帮助

# perl - 基于Sqlite的DBI::CSV实现

> ID：15331791
> 
> 赞同：4
> 
> 时间：2013-03-11T05:29:40.893
> 
> 标签：perl, sqlite, dbd

我经常处理文本文件，以“SQL 方式”将一个文件与另一个文件进行比较。

`DBD::CSV`显然是一个不错的选择，因为我可以在文本表上使用 SQL 语法的强大功能。但是，我处理的是巨大的文本文件，`DBD::CSV`在性能方面毫无用处。

因此，我开始编写一个将 csv 文件转换为 sqlite DB 的模块，然后返回`DBI::sqlite`我可以使用的对象。问题是，将文本文件转换为 sqlite 表也不是很有效，因为我无法从 perl 运行 sqlite 命令行来快速加载 CSV 文件（使用 .load）。所以我必须`Insert into`根据文本表创建一个巨大的字符串并执行它（逐行执行插入在性能方面非常低效，所以我更喜欢执行一个大插入）。我愿意避免这种情况，寻找一种使用 perl 将 csv 加载到 sqlite 的单行器。

还有一件事，我使用以下函数很好地执行和打印 SQL 查询：

```
sub sql_command {
my ($self,$str) = @_;
my $s = $self->{_db}->prepare($str) or die $!;
$s->execute() or die $!;
my $table;
push @$table, [ map { defined $_ ? $_ : "undef" } @{$s->{'NAME'}}];
while(my $row = $s->fetch) {
    push @$table, [ map{ defined $_ ? $_ : "undef" }@$row ];
}
box_format($table);
return box_format($table);;
}

sub box_format {
my $table = shift;
my $n_cols = scalar @{$table->[0]};

my $tb = Text::Table->new(\'| ', '', (\' | ','')x($n_cols-1), \' |+');
$tb->load(@$table);
my $rule = $tb->rule(qw/- +/);
my @rows = $tb->body();
return $rule, shift @rows, $rule, @rows, $rule
    if @rows;
} 
```

该`sql_command`子程序大约需要 1 分钟才能执行（在 6.5 MB 文件上），在我看来，这比我预期的要长得多。有没有人有更有效的解决方案？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T11:24:34.997

[Text::CSV_XS](https://metacpan.org/module/Text::CSV_XS) is extremely fast, using that to handle the CSV should take care of that side of the performance problem.

There should be no need for special bulk insert code to make DBD::SQLite performant. An insert statement with bind parameters is very fast. The main trick is to turn off AutoCommit in DBI and do all the inserts in a single transaction.

```
use v5.10;
use strict;
use warnings;
use autodie;

use Text::CSV_XS;
use DBI;

my $dbh = DBI->connect(
    "dbi:SQLite:dbname=csvtest.sqlite", "", "",
    {
        RaiseError => 1, AutoCommit => 0
    }
);

$dbh->do("DROP TABLE IF EXISTS test");

$dbh->do(<<'SQL');
CREATE TABLE test (
    name        VARCHAR,
    num1        INT,
    num2        INT,
    thing       VARCHAR,
    num3        INT,
    stuff       VARCHAR
)
SQL

# Using bind parameters avoids having to recompile the statement every time
my $sth = $dbh->prepare(<<'SQL');
INSERT INTO test
       (name, num1, num2, thing, num3, stuff)
VALUES (?,    ?,    ?,    ?,     ?,    ?    )
SQL

my $csv = Text::CSV_XS->new or die;
open my $fh, "<", "test.csv";
while(my $row = $csv->getline($fh)) {
    $sth->execute(@$row);
}
$csv->eof;
close $fh;

$sth->finish;    
$dbh->commit; 
```

This ran through a 5.7M CSV file in 1.5 seconds on my Macbook. The file was filled with 70,000 lines of...

```
"foo",23,42,"waelkadjflkajdlfj aldkfjal dfjl",99,"wakljdlakfjl adfkjlakdjflakjdlfkj" 
```

It might be possible to make it a little faster using bind columns, but in my testing it slowed things down.

# php - 在 Zend Framework 2 中传递值以查看

> ID：15331792
> 
> 赞同：2
> 
> 时间：2013-03-11T05:29:44.993
> 
> 标签：php, controller, zend-framework2

我正在尝试将我们现有的应用程序从 Zend Framework 1 转换为 Zend Framework 2，但遇到了一些麻烦。

在原始应用程序中，我的控制器中有以下内容

```
function init()
{
    $this->initialize_values();
} 
```

我所有的控制器都扩展了一个基类，其中包含该功能，如此处所示。

```
protected function initialize_values()
{

    $this->_db = Zend_Registry::get('dbAdapter');
    $this->_current_user = new User(&$this->_db);

    $this->_auth = Zend_Auth::getInstance();
    if($this->_auth->hasIdentity())
    {
        $this->_current_user = unserialize($_SESSION['current_user']);
        $this->view->current_user = $this->_current_user;
    }
} 
```

除了设置视图值的最后一行之外，我已经复制了所有功能。

在我为 ZF2 找到的所有示例中，它们似乎都返回了一个数组或一个视图模型。我没有看到将值传递给未附加到操作函数的视图的方法。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-11T06:01:16.597

那是因为由您来创建`new ViewModel()`并将其返回给调用脚本。根据您从控制器返回的内容，将调用适当的渲染器。

例如，如果我要返回一个 html 块，我会使用

```
return new ViewModel(array('results' => $results)); 
```

在我的控制器操作结束时。但是，如果我想提供 JSON 输出，我会返回

```
return new JsonModel($results); 
```

在您的情况下，您可以准备视图模型并将其存储在受保护的变量中，然后向其中添加变量，如下所示：

```
// in your constructor
$this->_view = new ViewModel();

// in your initialize values method
$this->_view->setVariable($name, $value); 
```

然后准备输出时：

```
// in your controller action
return $this->_view; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-02T15:33:35.080

我有一个加载主 layout.phtml 的应用程序模块。我添加了以下代码，它对我有用（ZF 2.2.2）。

onBootstrap(MvcEvent $e) 中的应用程序/Module.php：

```
$auth = new AuthenticationService();
$authenticated = false;
if ($auth->hasIdentity()) {
    $authenticated = true;
}
$viewModel = $e->getViewModel();
$viewModel->setVariable('authenticated', $authenticated); 
```

在 layout.phtml 中：

```
<?php
if ($this->authenticated === true) { ?>
    <li class="active"><a href="<?php echo $this->url('logout') ?>"><?php echo $this->translate('Logout') ?></a></li>
<?php } else { ?>
    <li class="active"><a href="<?php echo $this->url('login') ?>"><?php echo $this->translate('Login') ?></a></li>
    <li class="active"><a href="<?php echo $this->url('register') ?>"><?php echo $this->translate('Sign Up') ?></a></li>
<?php } ?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T08:32:46.280

您需要做的就是将所有视图变量存储到一个数组中并返回该数组。除非您需要其他功能，否则您不需要任何类或策略，例如 ViewModel 或 JsonModel。

因此，只要控制器中的 Action 函数返回数组，就可以将这些值传递给视图。

像这样：

```
public function indexAction()
{
  $current_user = $this->getSession();
  return array(
      'current_user' => $current_user          
  );
} 
```

要真正使用 ZF2，请使用 ServiceManagers 和 ServiceLocators 而不是 Zend_Registry。您可以通过创建一个名为 getServiceConfig() 的函数在 Module.php 文件中分配服务管理器（如果它尚不存在）。它应该看起来有点像这样。

```
public function getServiceConfig()
{
  'factories' => array(
     'session' => function ($sm){
        return new Session($sm->get('Zend/Db/Adapter/Adapter'));
     }
   )
} 
```

我还会考虑通过带有 service_manager 的全局配置/自动加载文件中的 database.local.php 文件添加您的数据库适配器。

像这样：

```
<?php
$Params = array(
'database'  => 'YOUR DATABASE',
'username'  => 'YOUR USERNAME',
'password'  => 'YOUR PASSWORD',
'hostname'  => 'YOUR HOSTNAME',
);

return array(
 'service_manager' => array(
 'factories' => array(
     'Zend\Db\Adapter\Adapter' => function ($sm) use ($Params) {
         return new Zend\Db\Adapter\Adapter(array(
             'driver'    => 'pdo',
             'dsn'       => 'mysql:dbname='.$Params['database'].';host='.$Params['hostname'],
             'database'  => $Params['database'],
             'username'  => $Params['username'],
             'password'  => $Params['password'],
             'hostname'  => $Params['hostname'],
         ));
     }, 
```

毕竟，您可以简单地获取您的 Session 类或任何您将使用的简单函数，该函数将使用 Controller 中的 ServiceLocator。

```
protected $session;
public function getSession()
{
   if($this->session == null)
   {
      $sl = $this->getServiceLocator();
      $this->session = $sl->get('session');
   }
   return $this->session;
} 
```

# php - android multipart php发布错误

> ID：15331796
> 
> 赞同：2
> 
> 时间：2013-03-11T05:30:03.997
> 
> 标签：php, android, http-post, multipart

我正在尝试将文件从android上传到服务器。我使用php作为服务器。这不起作用，我找不到原因。请帮我。

```
HttpClient client = new DefaultHttpClient(); 
            HttpPost post = new HttpPost("http://ganji.snucse.org/upload.php");
            MultipartEntity reqEntity = new MultipartEntity();  
            reqEntity.addPart("imageFile", new FileBody(img1_file));
            try {
                reqEntity.addPart("imageTitle", new StringBody("imageTitle"));
            } catch (UnsupportedEncodingException e) {
                e.printStackTrace();
            }
             post.setEntity(reqEntity);

            try {
                HttpResponse response = client.execute(post);
            } catch (ClientProtocolException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
```

这是java代码和

```
 1 <?php
  2
  3 $uploaddir = './uploads/';
  4 $file = basename($_FILES['imageFile']['imageTitle']);
  5 $uploadfile = $uploaddir.$file;
  6
  7
  8 echo 'Debugging Info:';
  9 print_r($_FILES);
 10
 11 print "</pre>";
 12
 13 ?> 
```

这是php代码

这行不通。我不明白为什么。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T05:42:58.890

我在工作版本中的唯一区别是：

```
$file = file_get_contents($_FILES['imageFile']['tmp_name'])); 
```

# jquery - 带有咖啡脚本的 JQuery .on() 函数

> ID：15331797
> 
> 赞同：0
> 
> 时间：2013-03-11T05:30:13.777
> 
> 标签：jquery, coffeescript

我是 stackoverflow 的新手，想知道您是否可以使用 coffescript 帮助我使用 .on() 函数。我很想迁移 .live() 因为我想要一切都应该是

```
$('#employee-select')

  .live('click', () ->
    if (!$('#employee-search-panel').is(':visible'))
      employeeLiveSearch()
      $('#employee-search-panel').slideDown()
    else
      $('#employee-search-panel').slideUp()
    end

  ) 
```

我想出的是

```
$(document)

  .on('click', '#employee-select',() ->
    if (!$('#employee-search-panel').is(':visible'))
      employeeLiveSearch()
      $('#employee-search-panel').slideDown()
    else
      $('#employee-search-panel').slideUp()
    end

  ) 
```

我的问题是....这是正确的解决方案吗？做文档，然后在“点击”旁边添加选择器？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T05:38:07.900

是的，这是正确的..但是在性能方面，使用文档中可用的静态父元素总是比使用文档本身更好..

```
 $(document) .on('click', '#employee-select',function(){ //<--- replace document with closest static parentelement
   if (!$('#employee-search-panel').is(':visible'))
     employeeLiveSearch()
     $('#employee-search-panel').slideDown()
  else
     $('#employee-search-panel').slideUp()
  end

}) 
```

[链接](http://jq4you.blogspot.com/2013/02/jquery-direct-and-delegate-on-event.html)以阅读有关`on`事件的更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T05:40:03.967

这在您编写时似乎是正确的，这就是`delegate the event to the existing parent item`页面中的方式。

尽管您可以尝试委托`closest existing parent`在 dom 初始化期间可用的对象。

就像持有`'#employee-select'`( *`parent of this elem`*) 一样：

```
$('parent of this').on('click', '#employee-select',() -> 
```

虽然`(document)`是页面中所有 elem 的父级，所以它绝对可以正常工作。

```
$(document).on('click', '#employee-select',() -> 
```

# ios - iPhone 崩溃日志 - 已用 CPU 时间是多少

> ID：15331802
> 
> 赞同：0
> 
> 时间：2013-03-11T05:30:39.300
> 
> 标签：ios, iphone

在 iPhone 崩溃日志中，我看到以下信息。

异常类型：00000020 异常代码：0x8badf00d 突出显示的线程：0

应用程序特定信息：iOSMyApp[2687] 有超过允许时间的活动断言：{（标识符：暂停进程：iOSMyApp[2687] allowedBackgroundDuration：10.000000 原因：暂停所有者 pid：15 preventSuspend preventThrottleDownCPU preventThrottleDownUI）}

**已用总 CPU 时间（秒）：10.060（用户 10.060，系统 0.000），100% CPU 已用应用程序 CPU 时间（秒）：7.785，77% CPU**

我了解已用应用程序 CPU 时间包括应用程序使用的总 CPU 时间，包括设备资源的等待时间。

**但是这个 7.785 秒是多少？**

这是渲染屏幕 UI 所花费的时间吗？或者这是从 applicationDidFinishWithLaunchingOptions 方法返回所需的时间吗？

我有这个疑问是因为苹果接受了应用程序启动时间直到 20 秒（大约是因为苹果没有定义固定指标）。但是 7.785 秒为什么我们得到崩溃日志？

请帮助我理解这个价值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T07:25:46.947

提到的时间是从 applicationDidFinishWithLaunchingOptions 方法返回所花费的时间。

参考了这些链接并获得了此信息。

[使用 iOS 5 启动时应用程序崩溃 - 无法重现](https://stackoverflow.com/questions/10036531/app-crashes-on-startup-with-ios-5-cannot-reproduce) [iPhone 4 与 iPhone 5 TestFlight 问题](https://stackoverflow.com/questions/14779475/iphone-4-vs-iphone-5-testflight-issue) [无法在 iOS 6 上启动调试 IPA，它在 iOS 5 上完美运行](https://stackoverflow.com/questions/12970671/unable-to-start-debug-ipa-on-ios-6-it-runs-perfectly-on-ios-5)

# javascript - 在其他网站上展示用户公开资料的推荐方式是什么？

> ID：15331808
> 
> 赞同：0
> 
> 时间：2013-03-11T05:31:23.173
> 
> 标签：javascript, jquery

我将用户公共个人资料作为一项功能。我需要为用户提供一些他可以集成到其他网站并向公众展示他的个人资料的代码。基本上我的想法是有一个脚本，在其他网站上嵌入可点击的图像，如果有人点击它，他会被带到新标签或新窗口中的用户个人资料。

我不知道有任何其他类似方式的应用程序。任何示例也将非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T05:38:33.573

您可以使用目标属性。目标[MDN 锚目标](https://developer.mozilla.org/en-US/docs/HTML/Element/a)

> 此属性指定显示链接资源的位置。在 HTML4 中，这是框架的名称或关键字。在 HTML5 中，它是浏览上下文（例如选项卡、窗口或内联框架）的名称或关键字。以下关键字具有特殊含义：

1.  `_self`：将响应加载到与当前框架相同的 HTML4 框架（或 HTML5 浏览上下文）中。如果未指定该属性，则此值为默认值。
2.  `_blank`：将响应加载到新的未命名 HTML4 窗口或 HTML5 浏览上下文中。
3.  `_parent`：将响应加载到当前框架的 HTML4 框架集父级或当前框架的 HTML5 父级浏览上下文中。如果没有父级，则此选项的行为方式与 _self 相同。
4.  `_top`: 在 HTML4 中：将响应加载到完整的原始窗口中，取消所有其他帧。在 HTML5 中：将响应加载到顶级浏览上下文（即作为当前浏览上下文的祖先且没有父级的浏览上下文）。如果没有
5.  `parent`, 此选项的行为方式与 _self 相同。

    ```
     <a href="profile-link" target="_blank" rel="nofollow"><img src='image-link' /></a> 
    ```

用于`rel="nofollow"`保护用户免受垃圾邮件的侵害。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T05:35:34.883

你可以让他复制粘贴html。

就像是：

```
<a href="profile-link" target="_blank" rel="nofollow" ><img src='image-link' /></a> 
```

target="_blank" 在新窗口或选项卡中打开链接的文档 [https://developer.mozilla.org/en-US/docs/HTML/Link_types](https://developer.mozilla.org/en-US/docs/HTML/Link_types)

rel="nofollow" 表示内容链接到未经认可的文档，例如付费链接。 [https://developer.mozilla.org/en-US/docs/HTML/Element/a#Attributes](https://developer.mozilla.org/en-US/docs/HTML/Element/a#Attributes)

# push-notification - 'UIIApplication' 没有可见的@interface 声明选择器'allocsharedApplication'

> ID：15331809
> 
> 赞同：1
> 
> 时间：2013-03-11T05:31:28.033
> 
> 标签：push-notification

我试过这段代码：

```
NSCalendar * calendar = [NSCalendar autoupdatingCurrentCalendar];
NSDateComponents * dateComponents = [[NSDateComponents alloc] init];
[dateComponents setDay:11];
[dateComponents setMonth:3];
[dateComponents setYear:2013];
[dateComponents setHour:6];
[dateComponents setMinute:00];
NSDate * date = [calendar dateFromComponents:dateComponents];
UILocalNotification * localNotification = [[UILocalNotification alloc] init];
[localNotification setFireDate:date];
[localNotification setTimeZone:[NSTimeZone defaultTimeZone]];
[localNotification setAlertBody:@"E' il primo di ottobre"];
[localNotification setAlertAction:@"Apri applicazione"];
[localNotification setSoundName:UILocalNotificationDefaultSoundName];
[localNotification setApplicationIconBadgeNumber:17];
NSArray * oggetti = [NSArray arrayWithObjects:@"Mangiare", @"Bere", nil];
NSArray * chiavi = [NSArray arrayWithObjects:@"azione1", @"azione2", nil];
NSDictionary * dictionary = [[NSDictionary alloc] initWithObjects:oggetti forKeys: chiavi];
[localNotification setUserInfo:dictionary];
[[application allocsharedApplication] scheduledLocalNotifications:localNotification]; 
```

最后一行给了我这个错误：“'UIIApplication' 没有可见的@interface 声明选择器'allocsharedApplication'”。！？！？！？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T13:37:18.757

最后一行是错误的。正确的是：

```
[application scheduleLocalNotifications:localNotification]; 
```

# linux - 自动快照并自动创建 AMI

> ID：15331811
> 
> 赞同：1
> 
> 时间：2013-03-11T05:31:42.253
> 
> 标签：linux, ubuntu, amazon-web-services, amazon-ec2

我有几个在生产模式下运行的基于 ubuntu 的 ec2 实例。我的问题是，当流量增加时，我会手动启动实例，从 github 更新代码。

现在我必须配置自动缩放，以便每当 API 启动新实例时，它都会启动最新的 AMI 并附加到负载均衡器，否则我必须手动提取代码。

在这里更清楚地说是我打算做的事情。

1.  每天对实例进行定期快照。
2.  从快照中创建一个 AMI 并保留它。
3.  在创建快照时，不应有任何停机时间。
4.  在 Auto Scaling 配置中，它应该启动最新的 AMI 并将其附加到负载均衡器

请帮帮我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T19:14:09.300

与其重新构建 AMI 并定期更改它，不如构建一个 AMI，它会在启动时自动从您的代码存储库中提取，之后可能会定期提取。这假设您的 AMI 中唯一的区别是代码。

例如，如果您使用 SVN，您可以使用 tag/latest 标记您最新的生产版本，并始终从该路径中提取。现在您有一个 AMI，它在启动时始终具有最新代码。您甚至可以每 5 分钟运行一次 cron 作业，以查看签出的标签和修订与您的 SVN 服务器报告的最新内容。如果这种情况发生了变化，它会自行终止，并且自动缩放会启动替换；或者它只是进行 svn 更新并获取最新的更改并不断更新。

有人担心构建会导致您的实例无法正常运行，但您应该能够在单元和集成测试中发现这一点。

这个怎么做？许多选项，但最好使用您的操作系统启动脚本。有很多方法可以自动访问您的代码存储库。我确定还有其他有关此的 StackOverflow 问题。

# spring - 使用@Named 注释但未在@Named 中指定任何字符串的bean 的名称？

> ID：15331813
> 
> 赞同：2
> 
> 时间：2013-03-11T05:32:14.790
> 
> 标签：spring, dependency-injection, annotations

假设我有一个使用 @Named 注释注入的 bean。例如，

```
@Named
public class MyBean {} 
```

运行时 bean 的名称是什么？我搜索了网络，但找不到答案。也不知道怎么调试才能找到名字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T05:42:15.693

bean 的名称将是类名。

示例：类 CustomerService 将被命名为 customerService

# c# - 如何将双字节字符串转换为单字节字符串？

> ID：15331818
> 
> 赞同：1
> 
> 时间：2013-03-11T05:32:50.733
> 
> 标签：c#, textbox

我是 C# 的新手。
我有一个`Textbox`，它被允许接受`double_byte`字符串，它用于输入/显示**Date Value**。现在我遇到了一个问题，我不知道如何解决。我搜索了一下，找不到任何解决方案。
当我写`Double_Byte`Characters( **２０１２／１２／３１** ) 时，我想将此值更改为 TextBox 的 ( **2012/12/31** )`Leave_Event`或`Text_Changed`此 TextBox 的 Event 。那么，我该如何解决这个问题。

**编辑**-> 我的解决方案是窗口应用程序。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T06:02:17.737

您应该能够使用`Encoding.Default`将`double_byte`字符串转换为`single_byte`字符串

```
 string singleByteString = Encoding.Default.GetString(Encoding.Default.GetBytes(inputText)); 
```

测试：

```
 private void button1_Click(object sender, EventArgs e)
    {
        string inputText = textBox1.Text;
        string singleByteString = Encoding.Default.GetString(Encoding.Default.GetBytes(inputText));

        textBox2.Text = singleByteString;
        textBox3.Text = inputText;
    } 
```

结果：

![在此处输入图像描述](../Images/906b63d630a7270b37f1f70222d90d7c.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T07:36:07.327

感谢您的所有回答和兴趣。
我为此搜索了一个解决方案，但没有找到任何答案。最后，我从同事那里得到了一个很好的答案。因此，我分享这个问题的答案。

1.  添加参考 Microsoft.VisualBasic
2.  编写这样的代码（像[sa_ddam213 的答案](https://stackoverflow.com/a/15332144/507860)一样测试）-

```
 using Microsoft.VisualBasic;

private void button1_Click(object sender, EventArgs e)
{
      string inputText = textBox1.Text;
      string singleByteString =  Strings.StrConv(inputText, VbStrConv.Narrow, 0);

      textBox2.Text = singleByteString;
      textBox3.Text = inputText;
}
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-11T05:45:52.337

当您在数据库中发送文本框值时，将其解析为日期。

确保将该文本框的 x 值作为 DateTime 数据类型存储在数据库中。

解析可以如下进行>

```
double d = double.Parse(txtDate.text);
DateTime conv = DateTime.FromOADate(d); 
```

或者最简单的方式使用>>

```
DateTime.Parse(txtDate.Text); 
```

希望这会帮助你。

# iphone - 隐藏实例变量语义问题的本地声明

> ID：15331820
> 
> 赞同：0
> 
> 时间：2013-03-11T05:33:07.563
> 
> 标签：iphone, ipad, xcode4.5, appdelegate

我需要访问所有 ViewControllers 中的 appDelegate 变量。所以当我需要它时，我正在写

```
 AppDelegate  *appDelegate=(AppDelegate *)[[UIApplication sharedApplication]delegate];
     appDelegate.name=x;  //warning :Local declaration of appDelegate hides instance variable. 
```

我在方法中必要的地方访问 appDelegate 变量。但是我收到很多警告..我怎样才能避免它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:26:01.380

更改此行

```
AppDelegate  *appDelegate=(AppDelegate *)[[UIApplication sharedApplication]delegate]; 
```

至

```
appDelegate=(AppDelegate *)[[UIApplication sharedApplication]delegate]; 
```

# android - 在点击写入和软键盘打开和编辑文本移动到上方并重叠谷歌地图时，不会出现在谷歌地图片段下方的编辑文本框

> ID：15331821
> 
> 赞同：3
> 
> 时间：2013-03-11T05:33:20.497
> 
> 标签：android, google-maps, android-edittext

我有一项活动，其中包含一个谷歌地图片段布局和下面的编辑文本。当我在编辑文本中输入一些文本时，软键盘将打开，edittext 将上升并与谷歌地图重叠。但是edittext没有出现，变黑了。当我从软键盘按回车时，它会显示出来。

这是布局：

```
 <?xml version="1.0" encoding="utf-8"?>
<!-- This can go anywhere in your layout (see other demos for some examples). -->
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/RelativeLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <RelativeLayout
        android:id="@+id/mapLay"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="170dp" >

        <fragment
            android:id="@+id/map"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            class="com.google.android.gms.maps.SupportMapFragment" />
    </RelativeLayout>

    <RelativeLayout
        android:id="@+id/RelativeLayout5"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:background="@drawable/drop_up_bg"
        android:paddingBottom="10dp"
        android:paddingTop="20dp" >

        <RelativeLayout
            android:id="@+id/RelativeLayout2"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_centerHorizontal="true"
            android:layout_marginLeft="20dp"
            android:layout_marginRight="20dp" >

            <RelativeLayout
                android:id="@+id/RelativeLayout6"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_centerVertical="true" >

                <TextView
                    android:id="@+id/textViewTitle"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginBottom="5dp"
                    android:text="@string/map"
                    android:textColor="#000000"
                    android:textSize="16sp"
                    android:textStyle="bold" />

                <ImageView
                    android:id="@+id/imageViewLine"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignRight="@id/textViewTitle"
                    android:layout_below="@id/textViewTitle"
                    android:background="@drawable/black_line" />
            </RelativeLayout>

            <Button
                android:id="@+id/buttonAtras"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentRight="true"
                android:background="@drawable/atra_btn" />
        </RelativeLayout>

        <RelativeLayout
            android:id="@+id/RelativeLayout3"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_below="@id/RelativeLayout2"
            android:layout_centerHorizontal="true"
            android:layout_marginLeft="20dp"
            android:layout_marginRight="20dp"
            android:layout_marginTop="5dp" >

            <EditText
                android:id="@+id/editTextMsg"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:background="@drawable/text_stripe"
                android:gravity="top"
                android:paddingBottom="20dp"
                android:paddingLeft="10dp"
                android:paddingRight="10dp"
                android:paddingTop="10dp" >
            </EditText>
        </RelativeLayout>

        <Button
            android:id="@+id/buttonFb"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_below="@+id/RelativeLayout3"
            android:layout_marginRight="5dp"
            android:background="@drawable/fbbtn" />

        <Button
            android:id="@+id/buttonTweet"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/RelativeLayout3"
            android:layout_toLeftOf="@+id/buttonFb"
            android:background="@drawable/tweetbtn" />

        <Button
            android:id="@+id/buttonMail"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/RelativeLayout3"
            android:layout_toLeftOf="@+id/buttonTweet"
            android:background="@drawable/mailbtn" />
    </RelativeLayout>

</RelativeLayout> 
```

# python - 仅解析部分 HTML 数据

> ID：15331824
> 
> 赞同：-1
> 
> 时间：2013-03-11T05:33:40.903
> 
> 标签：python, beautifulsoup

我正在使用 BeautifulSoup 使用以下代码解析网站。我能够解析网站并打印数据，当前输出是@http: [//pastie.org/6448357](http://pastie.org/6448357)，但是我只想打印链接中的一部分数据，预期输出是[@http:// paste.org/6448362](http://pastie.org/6448362)谁能提供关于如何做到这一点的意见？

```
from bs4 import BeautifulSoup as bs
import argparse
import urllib
import urllib2
import getpass
import re
import requests

def update (url):
    print url
    req = urllib2.Request(url=url)
    try:
        f = urllib2.urlopen(req)
        txt = f.read()
        soup = bs(txt)
        print soup
        f.close()

def main ():
    #For logging
    print "test"
    parser = argparse.ArgumentParser(description='This is the update.py script created by test')
    parser.add_argument('-u','--url',action='store',dest='url',default=None,help='<Required> url link',required=True)
    results = parser.parse_args()# collect cmd line args
    url = results.url
    #print url
    update(url)
if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T05:47:50.617

[我无法评论我不知道为什么..：P]

我没有使用beautifulsoup，但通常当我必须从整个网页中检索某些部分时，我只是寻找围绕重要数据的唯一标识符..

例如在您的情况下`{|`，并且是`|}`唯一发生的。

因此，只需阅读整个页面并找到您的数据：

```
site=urllib2.urlopen(url1) 
a=site.read()
c1=a.find('{|')
c2=a.find('|}')
c=c1
while(c<c2):
    print a[c]
    c+=1 
```

# c++ - 通过交换 RGB 进行颜色操作

> ID：15331832
> 
> 赞同：0
> 
> 时间：2013-03-11T05:34:49.513
> 
> 标签：c++, opencv

我的任务是交换图像的颜色。将蓝色变为红色，将红色变为绿色，将绿色变为蓝色。我尝试了 3 种方法，但都失败了。以下是三种方法。

拆分 RGB 以获取它们的值并交换它们。我得到的只是一张 BW 图像。

```
#include <iostream>
#include <cv.h>
#include <highgui.h>
#include "rgb.h"

using namespace std;

int main()
{
  char infname[256];

  cout << "Enter input image  : ";
  cin >> infname;

  IplImage *img = cvLoadImage(infname, 0);
  RgbImage pic(img);
  int H = img->height;
  int W = img->width;

IplImage* channelRed = cvCreateImage(cvGetSize(img), 8, 1);
IplImage* channelGreen = cvCreateImage(cvGetSize(img), 8, 1);
IplImage* channelBlue = cvCreateImage(cvGetSize(img), 8, 1);

IplImage* blue = cvCreateImage(cvGetSize(img), 8, 1);
IplImage* green = cvCreateImage(cvGetSize(img), 8, 1);
IplImage* red= cvCreateImage(cvGetSize(img), 8, 1);

cvSplit(img, channelBlue, channelGreen, channelRed, NULL);

cvThreshold(channelBlue, blue, 20, 255, CV_THRESH_BINARY);
cvThreshold(channelGreen, green, 20, 255, CV_THRESH_BINARY);
cvThreshold(channelRed, red, 20, 255, CV_THRESH_BINARY);

cvShowImage("original", img);

cvShowImage("blue", blue);
cvShowImage("green", green);
cvShowImage("red", red);
cvWaitKey(0);
return 0;
} 
```

2，直接交换RGB值，只需输出[j][i].r = pic[j][i].g

```
#include <iostream>
#include <cv.h>
#include <highgui.h>
#include "rgb.h"

using namespace std;

int main(){
    IplImage *img = NULL, *out = NULL;
    img = cvLoadImage("rgb.jpg");
    RgbImage pic(img);
    RgbImage outpic(out);
    int H = img -> height;
    int W = img -> width;

    for(int j=0;j<H;j++){
        for(int i=0;i<W;i++){
            pic[j][i].r = outpic[j][i].g;
            pic[j][i].g = outpic[j][i].b;
            pic[j][i].b = outpic[j][i].r;
        }
    }

    cvNamedWindow("image", CV_WINDOW_AUTOSIZE);
    cvShowImage("image", img);
    cvNamedWindow("Output", CV_WINDOW_AUTOSIZE);
    cvShowImage("Output", out);

    cvWaitKey(0);
    cvReleaseImage(&img);

} 
```

最后，创建一个大小相同的蓝色、红色和绿色滤镜图像，在感兴趣的通道中填充 255，在其他通道中填充为零，以获得 RGB 值并将它们相互连接。我得到的只是 3 张填充蓝色、红色和绿色的图像。并制作输入图像BW。

```
#include <iostream>
#include <cv.h>
#include <highgui.h>
#include "rgb.h"
#include <cmath>
using namespace std;

int main()
{
  char infname[256];

  cout << "Enter input image  : ";
  cin >> infname;

  IplImage *img = cvLoadImage(infname, 0);
  RgbImage pic(img);
  int H = img->height;
  int W = img->width;

IplImage* redfilter = cvCreateImage(cvGetSize(img),8,3);
IplImage* greenfilter = cvCreateImage(cvGetSize(img),8,3);
IplImage* bluefilter = cvCreateImage(cvGetSize(img),8,3);

for (int y=0;y<H;y++)
for (int x=0;x<W;x++) {
   CV_IMAGE_ELEM(redfilter,unsigned char, y, 3*x + 0) = 0;
   CV_IMAGE_ELEM(redfilter,unsigned char, y, 3*x + 1) = 0;
   CV_IMAGE_ELEM(redfilter,unsigned char, y, 3*x + 2) = 255;
 }

for (int y=0;y<H;y++)
for (int x=0;x<W;x++) {
   CV_IMAGE_ELEM(greenfilter,unsigned char, y, 3*x + 0) = 0;
   CV_IMAGE_ELEM(greenfilter,unsigned char, y, 3*x + 1) = 255;
   CV_IMAGE_ELEM(greenfilter,unsigned char, y, 3*x + 2) = 0;
 }

for (int y=0;y<H;y++)
for (int x=0;x<W;x++) {
   CV_IMAGE_ELEM(bluefilter,unsigned char, y, 3*x + 0) = 255;
   CV_IMAGE_ELEM(bluefilter,unsigned char, y, 3*x + 1) = 0;
   CV_IMAGE_ELEM(bluefilter,unsigned char, y, 3*x + 2) = 0;
 }

cvShowImage("original", img);
cvShowImage("red", redfilter);
cvShowImage("green", greenfilter);
cvShowImage("blue", bluefilter);

cvWaitKey(0);

return 0;
} 
```

我知道所有这些方法都是错误的。请指导我如何交换输入图像的颜色。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T06:12:55.673

在第一个程序中， cvThreshold() 按预期返回一个黑白图像。

> CV_THRESH_BINARY：dst(x,y) = maxValue，如果 src(x,y)>threshold 0，否则

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T05:49:29.167

```
 pic[j][i].r = outpic[j][i].g;
        pic[j][i].g = outpic[j][i].b;
        pic[j][i].b = outpic[j][i].r; 
```

这在我看来是倒退的。 `pic`是加载的图像。你不应该分配给`outpic`吗？

# c++ - 错误：没有匹配的调用函数

> ID：15331839
> 
> 赞同：0
> 
> 时间：2013-03-11T05:35:48.640
> 
> 标签：c++

任何机构都可以帮我解决这个问题。我有一个类在其地图容器`Comm`中存储另一个类的元素：`Info`

```
 #include<map>
using namespace std;
class En
{

};

class Info
{
public:
    const En * en;
    bool read;
    bool write;
    bool done;
    Info(
            En * en_,
            bool read_,
            bool write_,
            bool done_
            )
    :
        en(en_),
        read(read_),
        write(write_),
        done(done_)
    {}

    Info(const Info& info_)
    :
        en(info_.en),
        read(info_.read),
        write(info_.write),
        done(info_.done)
    {}

};

class Comm
{
    std::map<const En*,Info> subscriptionList;
public:
void  subscribeEn(Info value)
{
    //none of the below works
//  subscriptionList[value.en] = Info(value);
    subscriptionList[value.en] = value;
}
};

int main()
{

//  En * en;
//  bool read;
//  bool write;
//  bool Done;
//  Comm comm;
//  Info Info_(en,read,write,Done);
//  comm.subscribeEn(Info_);
//  return 1;

} 
```

但我在编译时收到以下错误：

```
In file included from /usr/include/c++/4.7/map:61:0,
                 from test.cpp:1:
/usr/include/c++/4.7/bits/stl_map.h: In instantiation of ‘std::map<_Key, _Tp, _Compare, _Alloc>::mapped_type& std::map<_Key, _Tp, _Compare, _Alloc>::operator[](const key_type&) [with _Key = const En*; _Tp = Info; _Compare = std::less<const En*>; _Alloc = std::allocator<std::pair<const En* const, Info> >; std::map<_Key, _Tp, _Compare, _Alloc>::mapped_type = Info; std::map<_Key, _Tp, _Compare, _Alloc>::key_type = const En*]’:
test.cpp:47:27:   required from here
/usr/include/c++/4.7/bits/stl_map.h:458:11: error: no matching function for call to ‘Info::Info()’
/usr/include/c++/4.7/bits/stl_map.h:458:11: note: candidates are:
test.cpp:28:2: note: Info::Info(const Info&)
test.cpp:28:2: note:   candidate expects 1 argument, 0 provided
test.cpp:15:2: note: Info::Info(En*, bool, bool, bool)
test.cpp:15:2: note:   candidate expects 4 arguments, 0 provided 
```

如果你让我知道我为什么会得到这个以及如何解决它，我将不胜感激。谢谢你

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T06:34:42.323

我相信，问题就在这里：

```
class Comm
{
    std::map<const En*,Info> subscriptionList;
public:
    void  subscribeEn(Info value)
    {
        //none of the below works
        //  subscriptionList[value.en] = Info(value);
        subscriptionList[value.en] = value;
    }
}; 
```

我想，这`std::map`首先实例化一对，`const En*`然后`Info`对这对的字段进行赋值。您没有提供无参数构造函数`Info`，这就是编译器抱怨的原因。

您可以通过将以下内容添加到 Info 类来解决此问题：

```
// Default, parameterless constructor
Info()
{
    // Some default values
    en = NULL; // or nullptr in C++11
    read = false;
    write = false;
    done = false;
} 
```

另一种解决方案是更改 std::map 的定义，使其包含指向 Info 的指针而不是其实例：

```
std::map<const En *,Info *> subscriptionList; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T05:37:15.717

的大写错误`done`：

```
bool Done;
Info Info_(en,read,write,done); 
```

通常小写或驼峰式用于变量名。

# c# - 如何从 Windows Phone 7 的 xml url 显示视频？

> ID：15331840
> 
> 赞同：0
> 
> 时间：2013-03-11T05:35:53.667
> 
> 标签：c#, windows-phone-7, xml-parsing, linq-to-xml

嗨，我正在使用下面给出的 xml 文件，我如何从 xml 文件中获取视频？

```
 <videourl>
      <iframe src="http://player.vimeo.com/video/52375409?fullscreen=0" width="500"   height="298" frameborder="0"></iframe>
     </videourl> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T05:55:38.200

获取视频网址

```
XElement rootElement = XElement.Load("Xml.xml");
string url=(string)rootElement.Elements("iframe").Single().Attribute("src").Value; 
```

# java - 如何返回字符串数组列表中某些项目的数量？

> ID：15331845
> 
> 赞同：-1
> 
> 时间：2013-03-11T05:36:17.640
> 
> 标签：java, arrays, arraylist

所以我正在尝试制作一个简单的程序，它有一个模拟大学课程的数组。您可以将学生添加到班级（称为 IOOP），获取他们的名字和姓氏、排名、测验分数、测验平均数、期末考试平均数等。该数组将学生作为其项目，其中一种方法称为 printFinalExamDetails。我的教授希望我们不仅显示整个班级的平均期末考试分数（我已经编码），而且还显示大一、大二、大三和大四的平均期末考试分数。我的代码现在看起来像这样：

```
public void printFinalExamDetails ( ) { 
    double sum, counter; sum = 0;
    for (Student x : students ) 
    {
        sum = sum + x.getFinalExamScore();
        counter = students.size();
        System.out.println (x.getFirstName()  +  " " + x.getLastName( ) + ": " + x.getFinalExamScore( ) );
        System.out.println ("The average final exam score is: " + sum/counter + ".");

        String standing = x.computeStanding();
        if(standing.equals("freshman"))
        System.out.println ("The average final exam score for the freshmen is: " + sum/counter + ".");

        if(standing.equals("sophomore"))
        System.out.println("The average final exam score for the sophomore is: " + sum/counter + ".");

      }
} 
```

现在我担心一次又一次地使用 counter 会使用全班的大小，而不仅仅是新生/sophs/juniors/seniors，如果我使用students.size()，它会打印数组中的所有学生，不仅仅是新生。谁能给我一些关于如何编码的提示？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T05:55:14.397

据我了解，问题在于您有一个变量代表班级中的学生人数（`counter`，可以使用更好的名称），并且您担心因为它是整个班级的总和，所以您不会能够准确地平均仅具有特定排名的学生的分数。

那么，解决方案是遍历您的学生列表并单独计算您拥有多少新生、二年级学生等，或者更改为更好的数据结构，以便更容易确定每个班级的规模。

由于这是一个家庭作业问题，我不会给你代码，但前者可以通过一个简单的`for`循环来完成。只需遍历所有学生并计算每个班级有多少人。你可以总结他们的分数，而你在它。

也许使用它最有效的方法是将 Student 的数据结构更改为 HashMap。您可以将键设置为学生班级地位的字符串，然后将值设置为该班级中每个学生的 ArrayList。这样，您可以更轻松地获得所需班级的学生，并能够通过 确定每个班级的学生人数`map.values().getSize()`。

# java - 创建对象时“无法从静态上下文引用的非静态变量”

> ID：15331846
> 
> 赞同：32
> 
> 时间：2013-03-11T05:36:24.260
> 
> 标签：java, oop, inner-classes

我编写了以下代码来测试 Java 中类和对象的概念。

```
public class ShowBike {
    private class Bicycle {
        public int gear = 0;
        public Bicycle(int v) {
            gear = v;
        }
    }

    public static void main() {
        Bicycle bike = new Bicycle(5);
        System.out.println(bike.gear);
    }
} 
```

为什么这会在编译过程中给我以下错误？

```
ShowBike.java:12: non-static variable this cannot be referenced from a static context
        Bicycle bike = new Bicycle(5);
                       ^ 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-03-11T05:39:23.653

做`ShowBike.Bicycle`静态的。

```
public class ShowBike {

    private static class Bicycle {
        public int gear = 0;
        public Bicycle(int v) {
            gear = v;
        }

    }

    public static void main() {
        Bicycle bike = new Bicycle(5);
        System.out.println(bike.gear);
    }
} 
```

在 Java 中有[两种类型的嵌套类](http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html)：“静态嵌套类”和[“内部类”](http://docs.oracle.com/javase/tutorial/java/javaOO/innerclasses.html)。如果没有`static`关键字，它是一个内部类，您将需要一个实例`ShowBike`来访问`ShowBike.Bicycle`：

```
ShowBike showBike = new ShowBike();
Bicycle bike = showBike.new Bicycle(5); 
```

* * *

静态嵌套类和普通（非嵌套）类在功能上几乎相同，只是分组方式不同。但是，当使用静态嵌套类时，不能将它们的定义放在单独的文件中，这将导致单个文件包含大量的类定义。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-11T05:39:33.293

Bicycle 是一个内部类，因此您需要外部类实例来创建内部类实例，例如：

```
ShowBike sBike = new ShowBike();
Bicycle bike = sBike.new Bicycle(5); 
```

或者您可以简单地声明`Bicycle` 类`static`以使您当前的方式工作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-11T05:39:31.303

main 方法不能访问其类的非静态成员。

顺便说一句，类应该以名词命名，而不是动词。所以一个更好的方法是：

```
private class Bicycle {
    public int gear = 0;

    public Bicycle(int v) {
        gear = v;
    }

    public void showGear() {
        System.out.println(gear);
    }

    public static void main(String[] args) {
        Bicycle bike = new Bicycle(6);
        bike.showGear(); // Notice that the method is named after a verb
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-11T05:42:04.477

您需要在内部类的状态下创建外部类对象。或者您需要将内部类设为静态。所以对于内部类不需要对象。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-11T05:39:50.590

您的 Bicycle 类不是静态的，因此不能在非静态方法中使用。如果要在 main 方法中使用，请将其更改为

```
private static class Bicycle 
```

# ruby-on-rails - Rails：nil:NilClass 的未定义方法“*”

> ID：15331847
> 
> 赞同：2
> 
> 时间：2013-03-11T05:36:33.160
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, math

我是 Rails 的新手，想在模型中做基本的数学运算，以从一些数学运算中获得售价。我正在产品模型中写一个简单的方程。就这个：

```
 def selling_price
  foodio_price + (foodio_price*@@tax) + @@dc
 end 
```

但它为 nil:NilClass 提供了错误未定义的方法“*”。它不识别 * 用于乘法以及 + 用于求和。谁能告诉这里有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T05:54:25.377

该函数中的一个变量（如`foodio_price`or `@@tax`）是`nil`. `nil`Ruby中的一切都是一个对象，甚至包括`null`. 的每个实例都`nil`继承自类`NilClass`。因此，`nil:NilClass`指的`nil`是类型为 的实例`NilClass`。

`nil`要调试此问题，您可以通过添加`puts`语句 来检查这些值中的哪一个（或三个） 。

* * *

我的猜测是`@@tax`和`@@dc`都是`nil`。您很少需要在 Rails 中使用这些类变量。我建议只将`tax`and声明`dc`为常量，所以像

```
TAX = 0.09
DC = 0.10 
```

在你的类文件的某个地方。

* * *

对于`nil`参数的默认值`foodio_price`

```
def selling_price foodio_price
  if foodio_price.nil? return 0.0
  foodio_price + (foodio_price*@@tax) + @@dc
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T05:38:28.270

错误是说 foodio_price 是来自 NilClass 类的对象

在伪代码中，foodio_price = nil

您的变量 foodio_price 没有被实例化（还没有任何价值）

你应该试试这个

```
def selling_price(foodio_price)
  foodio_price + (foodio_price*@@tax) + @@dc
end 
```

在你的代码的其他地方，你调用函数的地方`selling_price`，你将参数传递给它`foodio_price`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T06:33:53.963

有效。将我的模型更改为：

```
 def selling_price
  self.foodio_price  ||= 0.0  
  foodio_price + (foodio_price*@@tax) + @@dc
 end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T06:39:41.477

```
foodio_price + ((foodio_price || 1)*(@@tax || 1|) + (@@dc || 0) 
```

尝试这个

# c - 如何在不使用递归的情况下将链接列表复制到另一个列表中

> ID：15331848
> 
> 赞同：0
> 
> 时间：2013-03-11T05:36:37.773
> 
> 标签：c, data-structures, linked-list

我正在研究数据结构和链表，但我没有得到如何在没有递归的情况下制作链表副本的概念。有人可以解释一下吗。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T06:12:14.700

一个简单的迭代逻辑的伪代码是：

1.  从原始列表的开头开始，`origHead`。
2.  设置一个临时指针指向原始列表的头部，`tempNode = origHead`.
3.  如果`tempNode`= `NULL`，则转到第 17 步。
4.  如果`tempNode != origHead`，则转到第 10 步。
5.  为复制列表的头部分配内存，`copyListHead`.
6.  设置`copyListHead->next`为`NULL`。
7.  设置一个临时指针指向复制列表的头部，`copyListTempNode = copyListHead`.
8.  `tempNode = tempNode->next`.
9.  转到第 3 步。
10.  为节点分配内存`newCopyNode`。
11.  复制`tempNode->data`到`newCopyNode->data`.
12.  设置`newCopyNode->next`为 NULL。
13.  指向。`copyListTempNode->next`_`newCopyNode`
14.  `copyListTempNode = newCopyNode`.
15.  `tempNode = tempNode->next`.
16.  转到第 3 步。
17.  停止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T06:09:27.457

**这个怎么运作**

1.  声明两个指针：一个`dst`指针，它将是最终的函数结果，以及`next`指向指针的指针，它始终保存将接收下一个节点分配的指针的*地址*。`next`指针指向指针最初保存 的地址`dst`。

2.  虽然我们仍有要复制的节点 ( `src != NULL`)，但请执行以下操作：

    *   分配一个新节点，将结果指针分配给`*next`.
    *   将节点数据从 复制`src`到`*next`。
    *   分配`next`来保存`node->next`我们刚刚分配的成员的地址。该成员可以使用`&(*next)->next`.
    *   将输入源指针前进到其下一个节点：`src = src->next`.
    *   重复（2）。
3.  一旦完成，总是`*next`的值`NULL`。这确保添加到列表中的最终节点（如果有）具有`NULL`它的`next`指针。如果根本没有节点添加到列表中（例如，何时`src`调用`NULL`我们的函数），则会将 的值设置`dst`为 NULL，因为它是`dst`当前保存在 中的地址`next`。

4.  将 的值`dst`作为函数结果返回。

该算法的代码如下所示：

```
typedef struct Node
{
    int data;
    struct Node *next;
} Node;

Node* CopyList(const Node* src)
{
    Node *dst = NULL, **next = &dst;
    while (src)
    {
        // allocate new node
        *next = malloc(sizeof(**next));
        if (*next)
        {
            // copy_node() for complex duplication
            (*next)->data = src->data; 

            // reposition our next-link to the address of ptr->next
            //  of the node we just added.
            next = &(*next)->next;

            // and finally, advance the source pointer
            src = src->next;
        }
        else
        {
            perror("Failed to allocate node.");
            exit(EXIT_FAILURE);
        }
    }
    *next = NULL;
    return dst;
} 
```

注意：这也是从串行输入文件构建前向链接列表的好方法。它确保头部只初始化一次，并且每个后续节点总是附加到最后一个节点的`next`指针。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T05:40:37.177

没有递归 === 使用迭代。P码：

```
LinkedList *l1 = (the_head), *l2 = copy_node(l1);
for (tmp l1->next; tmp != NULL; tmp = tmp->next, l2 = l2->next) {
    l2->next = copy_node(tmp);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T05:40:49.223

完全没有理由为此使用递归——简单的迭代效果很好。复制一个节点。如果指向下一个节点的指针不为空，则对下一个节点重复该过程（并将`next`刚刚复制的节点中的链接设置为指向您复制的下一个节点）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T05:45:03.397

将链表复制到空列表的简单方法是使用递归，如下所示，

```
struct Node {
    int value;
    Node* next;
};

Node* copy_list(Node* list) {
    if (list == NULL) return NULL;

    Node* result = new Node;
    result->value = list->value;
    result->next = copy_list(list->next);
    return result;
} 
```

但是如果你不想使用递归，那么你必须手动复制每个不为空的列表，方法是使用循环，直到你得到 (node)->next = NULL 作为检查。

# kendo-ui - 隐藏和显示剑道ui网格列

> ID：15331851
> 
> 赞同：1
> 
> 时间：2013-03-11T05:36:46.897
> 
> 标签：kendo-ui

有什么方法可以显示和隐藏列 onEdit 和 Add 模式。如示例代码中所示。我想在添加和编辑模式下显示单价并在查看模式下隐藏。请指教。但是下面会缩小网格。我想让它仍然是 100%。如果用户单击取消，我应该使用什么事件。

```
@model IEnumerable<Kendo.Mvc.Examples.Models.ProductViewModel>

@(Html.Kendo().Grid(Model)    
    .Name("Grid")
    .Columns(columns =>
    {
        columns.Bound(p => p.ProductID);
        columns.Bound(p => p.ProductName);
        columns.Bound(p => p.UnitPrice);

    })
    .Groupable()
    .Pageable()
    .Sortable()
    .Scrollable()
    .Filterable()
    .DataSource(dataSource => dataSource
        .Ajax()
        .Read(read => read.Action("Products_Read", "Grid"))
    )
     .Events(ev => ev.DataBound("onDataBound").Edit("onEdit"))
)

<script type="text/javascript">

function onEdit(e) {
var grid = $('#Product').data('kendoGrid');
        if (!e.model.isNew()) {
            grid.showColumn(2);
        }
        else
        {
            grid.showColumn(2);
        }

function onDataBound(e) {
    var grid = $('#Product').data('kendoGrid');
    grid.hideColumn(2);
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T13:50:06.347

实际上在`popup`模式中隐藏的原始列`grid`没有隐藏。如果你删除你的`onEdit`功能就足够了。您甚至可以在列初始化中删除`dataBound`并将其设置为：`hidden`

```
@model IEnumerable<Kendo.Mvc.Examples.Models.ProductViewModel>

@(Html.Kendo().Grid(Model)    
    .Name("Grid")
    .Columns(columns =>
    {
        columns.Bound(p => p.ProductID);
        columns.Bound(p => p.ProductName);
        columns.Bound(p => p.UnitPrice).Hidden( true );

    })
    .Groupable()
    .Pageable()
    .Sortable()
    .Scrollable()
    .Filterable()
    .DataSource(dataSource => dataSource
        .Ajax()
        .Read(read => read.Action("Products_Read", "Grid"))
    )
) 
```

检查[http://jsfiddle.net/OnaBai/B2Ses/](http://jsfiddle.net/OnaBai/B2Ses/)该列如何`Freight`在列模式下隐藏但在弹出窗口中可见（用于编辑和创建）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-24T20:24:59.920

对于具有 .HtmlAttributes 功能的其他网格属性（工具栏等），您可以使用：

```
.ToolBar(toolbar => toolbar.Custom().Name("New item").HtmlAttributes(style = ViewData["isThisPropertyAllowed"] })) 
```

并在控制器中使用例如：

```
ViewData["isThisPropertyAllowed"] =  (User.IsInRole("ADMIN")?"":"display:none"); 
```

# qt - 码头的Qt调整大小事件

> ID：15331854
> 
> 赞同：5
> 
> 时间：2013-03-11T05:36:55.153
> 
> 标签：qt, resize, signals, dock, qdockwidget

有没有办法捕捉 Qt 中码头的调整大小事件？我需要能够检测到扩展坞何时调整大小（而不仅仅是其位置或“功能”发生变化时）。看起来 QDockWidget 没有“调整大小”的信号。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-11T07:55:44.263

如果您不希望子类化以获得调整事件控制，您可以[安装EventFilter](http://qt-project.org/doc/qt-4.8/qobject.html#installEventFilter)

小例子看起来像（`MainWindow.h`）：（MainWindow 持有 DockWidget Here）

```
protected:
  bool eventFilter(QObject *obj, QEvent *event); 
```

在 ( `MainWindow.cc`) 中：

```
MainWindow::MainWindow(QWidget* parent)
    : QWidget(parent) {
  ui_.setupUi(this);
  ui_.dockWidget->installEventFilter(this);
}

bool MainWindow::eventFilter(QObject *obj, QEvent *event) {
  if (event->type() == QEvent::Resize && obj == ui_.dockWidget) {
      QResizeEvent *resizeEvent = static_cast<QResizeEvent*>(event);
      qDebug("Dock Resized (New Size) - Width: %d Height: %d",
             resizeEvent->size().width(),
             resizeEvent->size().height());
  } 
  return QWidget::eventFilter(obj, event);
} 
```

# c++ - 为什么 c++ 代码必须包含在函数中？

> ID：15331859
> 
> 赞同：8
> 
> 时间：2013-03-11T05:37:28.263
> 
> 标签：c++, python

作为来自 python 的 c++ 新手，我不确定为什么 c++ 不允许函数之外的代码（在全局命名空间中？）。在调用 main() 或什至声明其他函数之前进行一些初始化似乎很有用。（我不是想与编译器争论，我只是想知道以这种方式实现它背后的思考过程。）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-11T05:39:26.153

当你运行一个 python 程序时，解释器会从上到下运行它。在 C++ 中，这不会发生。编译器将所有函数构建成机器代码的小块，然后链接器将它们连接起来。在运行时，操作系统调用你的`main`函数，一切都从那里开始。在这种情况下，函数之外的代码是没有意义的——它什么时候运行？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T06:04:31.757

这可以被认为是 C++ 和 Python 之间的风格差异。但是，它也有很好的理由。在 C 和 C++ 中，有一个非常明确和具体的地方是你的代码执行的开始，那就是`main()`函数的开始（当然，这只是一个近似值，但我们现在可以忽略它。 ) 实际上，C/C++ 程序以函数开始和结束`main()`——在我看来——当你想了解程序的实际作用时，它很有帮助。程序的高层流程更加清晰。将此与替代方案进行对比；代码分散在整个文件中以及函数之间。

即使在一个组织良好且非平凡的 Python 程序中，你也将你的主体代码放在一个. 下`if __name__ == "__main__":`，不是吗？

现在介绍一些更高级的东西。`main()`有一些方法可以在调用函数之前运行代码。这是其中之一：

```
#include <iostream>
using namespace std;

bool RunBeforeMain ()
{
    cout << "Before main()!" << endl;
    return true;
}

// This variable here causes the above function to be called
bool ignore_this_variable = RunBeforeMain ();

int main ()
{
    cout << "Start of main()" << endl;
    return 0;
} 
```

此外，所有全局变量的构造函数和`static`类的所有成员以及一些依赖于平台的东西都在之前运行`main()`。类似地，有一些方法可以让代码在`main()`完成后运行。这些通常是在`main()`开始之前构造的对象的析构函数，以及向该函数注册的`atexit()`函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T05:41:58.237

main() 是程序的访问点。因此，您要编写的任何代码都需要从那时起具有执行顺序。

静态变量在 main() 执行之前启动，因此您可以在此之前启动您需要的任何变量。

但是如果你想运行启动程序状态的代码，你应该在程序的开头就这样做，并滥用静态变量并做一些构造函数。

# android - Starmicronics Android SDK 库无法运行

> ID：15331871
> 
> 赞同：0
> 
> 时间：2013-03-11T05:38:35.467
> 
> 标签：android, sdk, android-manifest

几天来我一直在尝试解决此问题，但仍然无法解决...请有人可以帮助我。

我目前正在尝试开发一个与starmicronic 应用程序具有相同功能的应用程序。您可以在下面找到 SDK。

[http://www.starmicronics.com/support/ZipFile.aspx?sat2=195](http://www.starmicronics.com/support/ZipFile.aspx?sat2=195)

一开始我只是将 Jar Library StarIOPort3.1.Jar 复制到工作区，然后导入到 Main.java

我试图将此功能复制到我的主类中，但起初我错过了在清单设置中添加互联网权限。添加互联网权限后，我仍然得到 E/AndroidRuntime(776) 的运行时异常：java.lang.IllegalStateException：无法执行活动的方法。

但它适用于 Star SDK……但不适用于我的版本。

```
public void PortDiscovery(View view)
{
    List<PortInfo> BTPortList;
    List<PortInfo> TCPPortList;
    final EditText editPortName;

    final ArrayList<PortInfo> arrayDiscovery;
    ArrayList<String> arrayPortName;

    arrayDiscovery = new ArrayList<PortInfo>();
    arrayPortName = new ArrayList<String>();

    try {

        BTPortList  = StarIOPort.searchPrinter("BT:");
        TCPPortList = StarIOPort.searchPrinter("TCP:");

        for (PortInfo portInfo : BTPortList) {
              arrayDiscovery.add(portInfo);
        }

        for (PortInfo portInfo : TCPPortList) {
            arrayDiscovery.add(portInfo);
        }

        arrayPortName = new ArrayList<String>();

        for(PortInfo discovery : arrayDiscovery)
        {
            String portName;

            portName = discovery.getPortName();

            if(discovery.getMacAddress().equals("") == false)
            {
                portName += "\n - " + discovery.getMacAddress();
                if(discovery.getModelName().equals("") == false)
                {
                    portName += "\n - " + discovery.getModelName();
                }
            }

            arrayPortName.add(portName);
        }

    } catch (StarIOPortException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    editPortName = new EditText(this);

    new AlertDialog.Builder(this)
    .setIcon(R.drawable.icon) 
    .setTitle("Please Select IP Address or Input Port Name") 
    .setView(editPortName) 
    .setPositiveButton("OK", new DialogInterface.OnClickListener()
    {
        public void onClick(DialogInterface dialog, int button)
        {
            EditText portNameField = (EditText)findViewById(R.id.editText_PortName);
            portNameField.setText(editPortName.getText());
            SharedPreferences pref = getSharedPreferences("pref", MODE_WORLD_READABLE | MODE_WORLD_WRITEABLE);
            Editor editor = pref.edit();
            editor.putString("portName", portNameField.getText().toString());
            editor.commit();
        }
    })
    .setNegativeButton("Cancel", new DialogInterface.OnClickListener()
    {
        public void onClick(DialogInterface dialog, int button)
        {
        }
    })
    .setItems(arrayPortName.toArray(new String[0]), new DialogInterface.OnClickListener()
    {
        public void onClick(DialogInterface dialog, int select)
        {
            EditText portNameField = (EditText)findViewById(R.id.editText_PortName);
            portNameField.setText(arrayDiscovery.get(select).getPortName());

            SharedPreferences pref = getSharedPreferences("pref", MODE_WORLD_READABLE | MODE_WORLD_WRITEABLE);
            Editor editor = pref.edit();
            editor.putString("portName", portNameField.getText().toString());
            editor.commit();
        }
    })
    .show();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T07:36:22.760

好的，如果您查看堆栈跟踪中的其他异常，您会发现它获得了 NetworkOnMainThreadException。这意味着您需要在开始搜索打印机的代码之前离开主 UI 线程。您可以创建线程或使用任务。

[这个 SO question](https://stackoverflow.com/questions/9671546/asynctask-android-example)的答案有一个很好的例子，其中包含一个简单的任务，您可以根据自己的目的进行调整。所以为了更清楚，我认为调用 PortDiscovery() 方法的代码需要在任务中。

Android 给出此异常的原因是尝试网络操作可能需要几分钟然后失败。这会在这段时间内锁定整个 UI，因此不是一个好的做法。

根据[这篇文章](https://stackoverflow.com/questions/5150637/networkonmainthreadexception)，这个异常是在 Android 3.0 中引入的。您提到的 Starmicronics 网站上的 Android 项目的默认构建目标为 7（即 Android 2.1）。可能是新的示例 Eclipse 项目具有更高的构建目标，或者运行配置在模拟器中运行在更高版本的 Android 上。您可以在 project.properties 和 default.properties 文件中进行检查。

# ruby-on-rails - 错误 I18n::InvalidLocaleData

> ID：15331873
> 
> 赞同：6
> 
> 时间：2013-03-11T05:38:56.473
> 
> 标签：ruby-on-rails, internationalization

我想使用 I18n，我已经开始了解如何做到这一点，`railscast`但事情变得疯狂，我不知道错误在哪里，尝试检查格式，尝试了几种方法但仍然无法完成。

我的**`en.yml`**

```
en:
  category:
    index:
      title: "Listing Categories"
      name: "Name"
      is_active: "Is Active" 
```

我的**`view`**

```
<%= t 'category.index.title' %> 
```

但是返回`I18n::InvalidLocaleData in Categories#index`和`can not load translations from /home/lenovo/cost_control/config/locales/en.yml, expected it to return a hash, but does not`

我试了一下我**`en.yml`**的：

```
en:
  title: "Listing Categories" 
```

并且可以完美地工作，但是当我添加更多行时，只需将这些错误返回给我。对不起，我在 Rails 上还没有那么先进，谢谢你们的帮助：D 真的。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-11T06:26:19.057

看来您的 YAML 已损坏。你不是用制表符代替空格吗？

您可以使用[YAMLlint](http://yamllint.com/)检查 YAML 的有效性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-04T07:47:30.173

Ilya 推荐的验证器看起来很基础，但不是很好

找到了这个更好的[https://codebeautify.org/yaml-validator](https://codebeautify.org/yaml-validator)

# php - 我正在尝试将 newproduct mysql 表中的产品名称显示到组合框中。以下代码正在执行，但显示为空白

> ID：15331874
> 
> 赞同：0
> 
> 时间：2013-03-11T05:38:56.757
> 
> 标签：php, html, sql, forms, phpunit

```
**<html>
<body>
<form name="call">
     <select name="category">
<option>Select a category</option>
<?php
 mysql_connect("localhost","root","");
 mysql_select_db("shenvel");
 $category = "SELECT productname FROM newproduct";
 //retrieving product name alone from newproduct
 $query_result = mysql_query($category);
 while($result = mysql_fetch_assoc($query_result))
{
    ?>
        <option value = "<?php echo $result['productname']?>"><?php echo $result['productname']?></option> 
```

//上面的代码显示一个空白的组合框作为输出。
**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T05:45:53.330

使用更改获取记录`mysql_fetch_array()`

```
while($result = mysql_fetch_array($query_result))
{
   *********
} 
```

试试看。。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T05:46:23.460

尝试这个

```
<select name="category">
<option>Select a category</option>
<?php
  mysql_connect("localhost","root","");
  mysql_select_db("shenvel");
  $category = "SELECT productname FROM newproduct";

  $query_result = mysql_query($category);
  while($result = mysql_fetch_array($query_result))
  {
 ?>
    <option value = "<?php echo $result['productname']; ?>"><?php echo $result['productname']; ?></option>  
  <?php
  }
  ?>
  </select> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T05:47:29.963

尝试这个：

```
<html>
<body>
<form name="call">
     <select name="category">
<option>Select a category</option>
<?php
 mysql_connect("localhost","root","");
 mysql_select_db("shenvel");
 $category = "SELECT productname FROM newproduct";
 //retrieving product name alone from newproduct
 $query_result = mysql_query($category);
 while($result = mysql_fetch_array($query_result))
{
    ?>
        <option value = "<?php echo $result['productname']?>"><?php echo $result['productname']?></option> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-11T05:48:29.320

您的 while 循环正在第一个`<?php ... ?>`片段中完全执行。您用于 while 循环的语法不会跨多个 php 代码片段执行。

尝试回显您的选项 HTML 代码，因此只有一个 php 代码片段。

```
<html>
<body>
<form name="call">
<select name="category">
  <option>Select a category</option>
  <?php
    mysql_connect("localhost","root","");
    mysql_select_db("shenvel");
    $category = "SELECT productname FROM newproduct";
    //retrieving product name alone from newproduct
    $query_result = mysql_query($category);
    while ($result = mysql_fetch_assoc($query_result)) {
      echo '<option value = "',  $result['productname'], '">', $result['productname'], '</option>';
    }
  ?> 
```

# python - 在python中创建知道其他朋友的朋友的字典

> ID：15331877
> 
> 赞同：2
> 
> 时间：2013-03-11T05:39:10.707
> 
> 标签：python, python-3.x, social-networking, dictionary

在任何一群人中，都有很多对朋友。假设分享朋友的两个人本身就是朋友。（是的，这在现实生活中是一个不切实际的假设，但让我们仍然这样做）。换句话说，如果 A 和 B 是朋友，B 和 C 是朋友，那么 A 和 C 也一定是朋友。使用这个规则，我们可以将任何一组人划分为朋友圈，只要我们对组中的友谊有所了解。

编写一个带有两个参数的函数 networks()。第一个参数是组中的人数，第二个参数是定义朋友的元组对象列表。假设人们由数字 0 到 n-1 标识。例如，元组 (0, 2) 表示人 0 是人 2 的朋友。该函数应打印将人划分为朋友圈的情况。下面显示了该函数的几个示例运行：

```
>>>networks(5,[(0,1),(1,2),(3,4)])#execute 
```

社交网络 0 是 {0,1,2}

社交网络 1 是 {3,4}

老实说，我对如何启动这个程序非常迷茫，任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T06:44:30.910

可以用来解决此问题的一种有效数据结构是 a `disjoint set`，也称为`union-find`结构。不久前，我写了一个作为[另一个答案](https://stackoverflow.com/a/14000584/1405065)。

这是结构：

```
class UnionFind:
    def __init__(self):
        self.rank = {}
        self.parent = {}

    def find(self, element):
        if element not in self.parent: # leader elements are not in `parent` dict
            return element
        leader = self.find(self.parent[element]) # search recursively
        self.parent[element] = leader # compress path by saving leader as parent
        return leader

    def union(self, leader1, leader2):
        rank1 = self.rank.get(leader1,1)
        rank2 = self.rank.get(leader2,1)

        if rank1 > rank2: # union by rank
            self.parent[leader2] = leader1
        elif rank2 > rank1:
            self.parent[leader1] = leader2
        else: # ranks are equal
            self.parent[leader2] = leader1 # favor leader1 arbitrarily
            self.rank[leader1] = rank1+1 # increment rank 
```

以下是如何使用它来解决您的问题：

```
def networks(num_people, friends):
    # first process the "friends" list to build disjoint sets
    network = UnionFind()
    for a, b in friends:
        network.union(network.find(a), network.find(b))

    # now assemble the groups (indexed by an arbitrarily chosen leader)
    groups = defaultdict(list)
    for person in range(num_people):
        groups[network.find(person)].append(person)

    # now print out the groups (you can call `set` on `g` if you want brackets)
    for i, g in enumerate(groups.values()):
        print("Social network {} is {}".format(i, g)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T15:53:05.723

```
def networks(n,lst):
groups= []
for i in range(n)
    groups.append({i})
for pair in lst:
    union = groups[pair[0]]|groups[pair[1]]
    for p in union:
        groups[p]=union
sets= set()
for g in groups:
    sets.add(tuple(g))
i=0
for s in sets:
    print("network",i,"is",set(s))
    i+=1 
```

如果有人在乎，这就是我一直在寻找的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T04:36:48.247

这是一个基于[图中连接组件](http://en.wikipedia.org/wiki/Connected_component_%28graph_theory%29#Algorithms)的解决方案（由[@Blckknght](https://stackoverflow.com/questions/15331877/creating-dictionaries-of-friends-that-know-other-friends-in-python#comment21653619_15332668)建议）：

```
def make_friends_graph(people, friends):
    # graph of friends (adjacency lists representation)
    G = {person: [] for person in people} # person -> direct friends list
    for a, b in friends:
        G[a].append(b) # a is friends with b
        G[b].append(a) # b is friends with a
    return G

def networks(num_people, friends):
    direct_friends = make_friends_graph(range(num_people), friends)
    seen = set() # already seen people

    # person's friendship circle is a person themselves 
    # plus friendship circles of all their direct friends
    # minus already seen people
    def friendship_circle(person): # connected component
        seen.add(person)
        yield person

        for friend in direct_friends[person]:
            if friend not in seen:
                yield from friendship_circle(friend)
                # on Python <3.3
                # for indirect_friend in friendship_circle(friend):
                #     yield indirect_friend

    # group people into friendship circles
    circles = (friendship_circle(person) for person in range(num_people)
               if person not in seen)

    # print friendship circles
    for i, circle in enumerate(circles):
        print("Social network %d is {%s}" % (i, ",".join(map(str, circle)))) 
```

例子：

```
networks(5, [(0,1),(1,2),(3,4)])
# -> Social network 0 is {0,1,2}
# -> Social network 1 is {3,4} 
```

# android - 如何在 Android 的网格视图中添加行分隔符？

> ID：15331878
> 
> 赞同：3
> 
> 时间：2013-03-11T05:39:13.110
> 
> 标签：android, gridview, shelve

我想在 GridView 中添加行分隔符。基本上我正在制作一个架子应用程序，其中架子看起来像这样：

![在此处输入图像描述](../Images/d5cda241b7cd2f3d4819618953ab2af1.png)

因此，列数会随着设备分辨率以及方向的变化而变化。我如何实现这一目标？有什么技巧吗？

我看过[Romain Guy 的书架](https://code.google.com/p/shelves/)。但是他有一些不同的策略，因为不需要行分隔符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T05:45:04.027

从谷歌代码尝试这个项目并浏览查看源代码：

[https://code.google.com/p/shelves/source/browse/#svn%2Ftrunk](https://code.google.com/p/shelves/source/browse/#svn%2Ftrunk)

谷歌代码中的项目主页：

[https://code.google.com/p/shelves/](https://code.google.com/p/shelves/)

它已经在下面的堆栈溢出中讨论过：

[背景滚动与gridview中的项目](https://stackoverflow.com/questions/6734635/background-scrolling-with-item-in-gridview/9757501#9757501)

# c# - 重新发送 HTTP 标头

> ID：15331884
> 
> 赞同：0
> 
> 时间：2013-03-11T05:39:34.243
> 
> 标签：c#, http, video-streaming

我有申请。它向我的代理类发送请求。代理必须解析 http 标头字符串（我这样做了）并将其请求重新发送到服务器以获取视频。

首先，mediacomponent 连接到代理：

```
var uri = new Uri("http://127.0.0.1:2233/files/1.mp4");
videoPlayer.Source = uri;
Play(); 
```

代理获取http头字符串

```
"GET /files/1.mp4 HTTP/1.1\r\nCache-Control: no-cache\r\nConnection: Keep-Alive\r\nPragma: getIfoFileURI.dlna.org\r\nAccept: */*\r\nUser-Agent: NSPlayer/12.00.7601.17514 WMFSDK/12.00.7601.17514\r\nGetContentFeatures.DLNA.ORG: 1\r\nHost: 127.0.0.1:2233\r\n\r\n" 
```

我更换主机：

```
"GET /files/1.mp4 HTTP/1.1\r\nCache-Control: no-cache\r\nConnection: Keep-Alive\r\nPragma: getIfoFileURI.dlna.org\r\nAccept: */*\r\nUser-Agent: NSPlayer/12.00.7601.17514 WMFSDK/12.00.7601.17514\r\nGetContentFeatures.DLNA.ORG: 1\r\nHost: myserver.ru\r\n\r\n" 
```

现在代理必须从服务器获取视频。我必须做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T06:02:11.383

使用 .NET 时，您不必手动创建 HTTP 消息本身。相反，使用[System.Net.Http 命名空间](http://msdn.microsoft.com/en-us/library/hh193585.aspx)中的类来形成和发送 HTTP 消息并处理响应。

例如，向 URL 发送 HTTP GET 消息可以很简单：

```
var uri = new Uri("http://www.foobar.com/");
var client = new HttpClient();
string body = await client.GetStringAsync(uri); 
```

请注意，这种通用方法将在给定的 URI 处下载资源的全部内容。在您的情况下，您可能不想在开始播放/处理/存储之前等待整个视频下载。在这种情况下，您可能希望使用`HttpClient.ReadAsStream()`将返回一个流的方法，您可以从中读取，直到流关闭。

# javascript - 在 url.pathname() 中解析路径名

> ID：15331887
> 
> 赞同：0
> 
> 时间：2013-03-11T05:39:40.980
> 
> 标签：javascript, node.js, url, split

我有一个网址如下

```
localhost:1340/promotionDetails/pwd1/pwd2?promotion_id=PROM008765 
```

我使用 url 模块来解析下面路径名的 url 是代码

```
var url=require('url').parse('http://localhost:1340/promotionDetails/pwd1/pwd2?  promotion_id=PROM008765', true).pathname
console.log(url); 
```

我得到的输出是

```
/promotionDetails/pwd1/pwd2 
```

我使用 split 函数从路径中获取 pwd1 和 pwd2。我想知道是否有任何其他方法可以在不使用 split 函数的情况下获取 pwd1 和 pwd2。任何帮助都会非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:58:54.707

您可以使用正则表达式来获取 url 目录而不使用拆分。

```
var myurl = "localhost:1340/promotionDetails/pwd1/pwd2?promotion_id=PROM008765";
var match = myurl.match(/[^/?]*[^/?]/g);
/* matches everything between / or ?
[ 'localhost:1340',
  'promotionDetails',
  'pwd1',
  'pwd2',
  'promotion_id=PROM008765' ]
*/
console.log(match[2]);//pwd1
console.log(match[3]);//pwd2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-28T10:19:33.617

更新 2019 ES6 答案：

您可以使用正则表达式来获取 url 目录而不使用拆分。

```
const myurl = "localhost:1340/promotionDetails/pwd1/pwd2?promotion_id=PROM008765";     
const filteredURL = myurl.match(/[^/?]*[^/?]/g).filter((urlParts) => {
    return urlParts !== 'promotionDetails' && urlParts !== 'localhost:1340'
})

const [pwd1, pwd2] = filteredURL;

console.log(pwd1)
console.log(pwd2) 
```

# matlab - 如何使用椭圆计算透视变换

> ID：15331889
> 
> 赞同：1
> 
> 时间：2013-03-11T05:39:55.243
> 
> 标签：matlab, opencv, image-processing, computer-vision

我对 3D 图像处理非常陌生。我正在我的项目中寻找圆的透视角。一个有一组白色圆圈的盘子，使用这些圆圈我想找到那个盘子的旋转角度（3D）。

为此，我已经完成了相机校准部分并获得了相机误差参数。下一步我已经捕获了图像并应用了 sobel 边缘检测。

之后我对椭圆拟合算法有点困惑。我在椭圆拟合中看到了很多算法。哪一种是最好的方法和快速的方法？

完成椭圆拟合后，我不知道如何进一步进行？如何使用该椭圆计算旋转和平移矩阵？

你能告诉我哪种算法更合适和更容易。我需要一些 matlab 代码来理解概念。

提前致谢

对不起我的英语不好。

![在此处输入图像描述](../Images/3e9039f8a0e665c0e2e7d8111682771c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-20T23:03:06.093

首先，找到椭圆/圆心（例如描述的其他评论中的 Eddy_Em）。

然后您可以参考张的经典论文 [https://research.microsoft.com/en-us/um/people/zhang/calib/](https://research.microsoft.com/en-us/um/people/zhang/calib/) 如果某些相机参数已知，例如中心，您可以从单个图像估计相机位姿的投影。请注意，该方法不适用于正面记录，即透视效果越多，您的估计就越准确。该算法相当简单，您需要一个 SVD 和一些叉积。

# c# - 成员上的多个线程更改不会反映在主线程中

> ID：15331897
> 
> 赞同：0
> 
> 时间：2013-03-11T05:40:37.643
> 
> 标签：c#, .net, multithreading, c++-cli

我可以在这里听取社区的意见吗？我有一个应用程序，其中有多个线程访问（this）类的成员，该类调用了线程本身。问题是，当新线程在 LinkedList 成员中添加元素时，我可以看到 LinkedList 的计数由于添加元素而增加到 1，但是在主线程中，新线程所做的更改并未反映. 我什至将当前对象的引用传递给 ParameterizedThreadStart，但它仍然无法正常工作。

**插图：**

```
ParameterizedThreadStart^ pReceiveProc = gcnew ParameterizedThreadStart(this, &ActualClass::Receive);
Thread^ pReceiveThread = gcnew Thread(pReceiveProc);
pReceiveThread->Start(this); // passed the current instance 
```

**线程方法：**

```
void Receive(Object^ pObj) {
    ActualClass^ l_Cls = dynamic_cast<ActualClass^>(pObj);
    l_Cls->MyLinkList->AddLast("test");
    Console::WriteLine("{0}", l_Cls->MyLinkList->Count); //outputs 1
} 
```

**但是如果我从主线程访问 MyLinkList ：**

```
void MethodMainThread(){
    Console::WriteLine("{0}", MyLinkList->Count); //outputs 0
} 
```

静态成员解决方案不是一种选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T05:54:44.323

最可能的是，您的辅助线程被抢占，您的主线程检查计数，然后辅助线程添加一个对象，尝试使用信号，并让主线程等待辅助线程完成其操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T05:48:42.860

您不能像那样在线程之间共享数据。一个简单的方法是使用'lock'语句。这很简单，[这里](http://msdn.microsoft.com/en-us/library/c5kehkcz%28v=vs.71%29.aspx)有一个很好的解释。

# report - 在活动报表中的报表开始之前调用数据初始化（数据动态）

> ID：15331898
> 
> 赞同：0
> 
> 时间：2013-03-11T05:40:47.290
> 
> 标签：report, activereports, componentone

根据活动报告文档，首先调用报告启动和数据初始化。Report start 中对 Data source 的任何引用都将调用 Data Initialize 事件。我正在修改现有报告；令我惊讶的是，顺序颠倒了。我有一个现有的逻辑来获取数据初始化事件中的节点数（我的数据源是 xml）；仅仅因为事件触发顺序相反，我总是得到 0 作为计数。

我正在使用 .NET 2.0 的活动报告（我认为版本是 4\. ***）。由于我不支持设计器，因此我有设计器 xml 和代码。

请建议什么可以强制事件序列正确顺序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T07:01:53.710

可能没有足够的信息让我们在这里为您提供帮助。我们至少需要查看报告代码，但如果您可以进行一些调试以了解有关导致问题的特定代码的更多详细信息，那就更好了。

我实际上不确定这种特定情况下的事件顺序，但要排除故障，您可以尝试使用新的空白报告来验证这种情况下的事件顺序，并一次移动一段代码以找出哪一行代码导致事件顺序发生变化。

# jsp - 无法使用 JSP 表达式语言显示 ArrayList 值

> ID：15331901
> 
> 赞同：0
> 
> 时间：2013-03-11T05:41:01.153
> 
> 标签：jsp, el

我无法使用表达式语言显示 ArrayList 的值。以下是我在 Servlet 中使用的代码片段 我正在使用代码并将 ArrayList 置于会话中

```
 List list=new ArrayList();
        list.add("10/3/2013");
        list.add("sample.txt");
        list.add("error at line 45");
        HttpSession session=request.getSession();
        session.setAttribute("list",list);
        response.sendRedirect("diaplayDetails.jsp"); 
```

在 displayDetails.jsp 中包含以下代码

```
 Error File Details Are :
         ${list[0]}
         ${list[1]} 
         ${list[2]} 
```

但我没有得到数组列表值。

请帮我解决这个问题。

谢谢

拉吉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T06:13:22.820

将 JSP 中的对象向下转换为`list`“List”类这背后的原因，在 Session 对象中，我们存储`Object`了访问特定对象所需的向下转换

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T12:21:49.510

如果你使用 JSTL，试试这个：

```
<c:forEach items="${list}" var="elem">
    <c:out value="${elem}" />
</c:forEach> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-08T13:59:07.517

您只是忘记在 EL 中提供范围。正确的语法应该如下所示：

```
Error File Details Are:
${sessionScope.list[0]}
${sessionScope.list[1]}
${sessionScope.list[2]} 
```

sessionScope 是 EL 隐式对象之一。所有这些范围隐式对象都用于在 JSP 需要搜索您的属性键的范围内查找。在您的情况下，它是“列表”。所以：`sessionScope`- 在你设置你的属性的范围内，`list`- 你的属性的键名，`[0]`- 你的属性的值部分内的索引。

请记住，您仅使用范围来获取属性。您应该使用参数`pageContext`或`param`隐式对象。

[更多关于表达式语言和隐式对象。](https://docs.oracle.com/javaee/5/tutorial/doc/bnahq.html)

# iframe - 找不到框架的 Selenium Webdriver 问题

> ID：15331902
> 
> 赞同：1
> 
> 时间：2013-03-11T05:41:03.603
> 
> 标签：iframe, selenium, frame, selenium-webdriver

有人可以帮我弄清楚在选择登录后如何让 Selenium Webdriver 找到框架吗？

[https://www.guaranteedrate.com/agent/visitors](https://www.guaranteedrate.com/agent/visitors) 点击登录发送密钥到用户名

@测试

```
public void fail() throws InterruptedException {

        driver.findElement(By.linkText("Sign In")).click();
            driver.switchTo().window("GB_window");
            driver.switchTo().frame(0);                driver.findElement(By.id("username")).sendKeys("testgr100@gmail.com");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T14:55:32.590

你能试试这个并告诉我它是否有效吗？我怀疑您遇到的只是 Firefox 的怪异现象，而 JavaScriptExecutor 会绕过它。

```
public void setEmailAddrOnFieldInSubFrame() {
    driver.findElement( By.linkText("Sign In") ).click();
    driver.switchTo().window("GB_window");
    driver.switchTo().frame(0);
    WebElement element = driver.findElement( By.id("username") );
    JavascriptExecutor executor = (JavascriptExecutor)driver;
    executor.executeScript( "arguments[0].value='testgr100@gmail.com';", element );

    //cleanup frame position by switching back to previous window
    driver.switchTo().defaultContent(); // always do this cleanup just in case
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-26T08:17:56.483

好吧，如果该应用程序可以在 Firefox 上运行，那么只需右键单击即可。在上下文菜单中，您将首先通过查看此框架选项来确定元素是否在框架下。一旦你确认这一点，然后检查元素。在萤火虫中缓慢滚动顶部，您将找到该元素所在的 iframe 标签。通过这种方式，您将了解该名称。如果您想知道所有 iframe 的数量及其名称，请使用 driver.findElements(By.tag("iframe"))。这将返回具有标签的 webelements 列表，然后您可以一一迭代并使用 getAttribute("name")。请注意，仅当 iframe 实际具有名称时才会返回名称，否则将返回空。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T05:51:35.350

我想在点击登录后，你会被带到一个框架，那就是注册表。

您要尝试的是先切换到窗口（GB_Window）。

尝试删除切换到窗口调用并切换到框架并尝试您的操作

编辑代码后，使用它

```
 driver.findElement(By.linkText("Sign In")).click();
    driver.switchTo().frame(0);
    driver.findElement(By.id("username")).sendKeys("testgr100@gmail.com"); 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T06:33:30.637

试试下面的代码。它对我有用。在找到用户名元素之前有两个框架。第一帧是 GB_frame，第二帧在 html 源代码中没有给出任何名称。所以我`frame(0)`在第二个中使用了 index ( )。

```
@Test

public void fail() throws InterruptedException {    

        driver.findElement(By.linkText("Sign In")).click();
        //switch to frames inside the webpage
        driver.switchTo().frame("GB_frame"); //1st frame
           driver.switchTo().frame(0); //2nd frame              
              driver.findElement(By.id("username")).sendKeys("testgr100@gmail.com");
} 
```

# java - 每次调用 ActionListener 时，如何明显更改 JScrollPane 的内容？

> ID：15331910
> 
> 赞同：3
> 
> 时间：2013-03-11T05:41:45.737
> 
> 标签：java, swing, jscrollpane, actionlistener

我希望这个 JScrollPane 每次调用 Action Listener 时都将其列表更改为完全不同的列表。我不完全确定如何去做。我尝试更改 JList，重新绘制 ScrollPane 并重新验证它，但它并没有带来预期的效果。我写了一个可编译的小程序，在这里解释了我的问题：

```
import javax.swing.*;
import javax.swing.border.TitledBorder;
import java.awt.*;
import java.awt.event.*;
import java.sql.SQLException;

@SuppressWarnings("serial")
public class TestFrame extends JFrame {
public final Dimension SCROLL_PANE_DIMENSION = new Dimension(200, 100);
private JComboBox<String> comboNames;
private JPanel panel = new JPanel();
private JList<String> availableList;
private JScrollPane theScrollPane;
private boolean string1Used = true;
String[] strings = { "Aaardvark", "Adam", "Alms" };
String[] strings2 = { "Bad", "Bugs", "Bunny" };

public static void main(String[] args){
    try {
        TestFrame frame = new TestFrame();
        frame.setVisible(true);
    } catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

public TestFrame() throws SQLException {
    String[] comboStrings = { "Doesn't", "matter", "here" };

    this.setSize(300,200);

    availableList = new JList<String>(strings);

    theScrollPane = new JScrollPane(availableList);

    theScrollPane = new JScrollPane(availableList);
    theScrollPane.setPreferredSize(SCROLL_PANE_DIMENSION);
    theScrollPane.setSize(SCROLL_PANE_DIMENSION);
    theScrollPane.setBorder(BorderFactory.createTitledBorder(
            BorderFactory.createEtchedBorder(), "Sub Conditions",
            TitledBorder.CENTER, 0));

    availableList.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
    availableList.setSelectedIndex(0);
    availableList.setVisibleRowCount(5);
    availableList.setSize(SCROLL_PANE_DIMENSION);

    comboNames = new JComboBox<String>(comboStrings);

    comboNames.addActionListener(new ConditionComboListener());

    panel = new JPanel();

    this.add(panel);

    panel.add(comboNames);
    panel.add(theScrollPane);

}

private class ConditionComboListener implements ActionListener {

    @Override
    public void actionPerformed(ActionEvent arg0) {
        refreshSubConditionList();
    }

    private void refreshSubConditionList() {
        if (string1Used) {
            System.out.println("Switching to Strings2");
            availableList = new JList<String>(strings2);
            string1Used = false;
        } else{
            System.out.println("Switching to Strings");
            availableList = new JList<String>(strings);
            string1Used = true;
        }
        theScrollPane = new JScrollPane(availableList);
        theScrollPane.revalidate();
        theScrollPane.repaint();
    }

}

} 
```

在此示例中，我希望 JScrollPane 内的列表在每次更改 JComboBox 中的内容时在数组 strings1 和 strings2 之间切换。我还希望此更改在我更改组合框中的内容后立即可见，而不是稍后。正如您从编译后的代码中看到的那样，它并不完全是这样。我究竟做错了什么？为什么当我想要它时它不改变列表？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-11T05:55:41.843

创建新的滚动窗格不会将滚动窗格添加到面板中。

无论如何，没有必要继续创建新的滚动窗格。只需更改滚动窗格中显示的组件：

```
//theScrollPane = new JScrollPane(availableList);
//theScrollPane.revalidate();
//theScrollPane.repaint();
theScrollPane.setViewportView(availableList); 
```

# java - 杀死进程和 System.exit(0) 的区别；

> ID：15331923
> 
> 赞同：2
> 
> 时间：2013-03-11T05:42:56.287
> 
> 标签：java, android, process

和有什么区别

```
int id= android.os.Process.myPid();
android.os.Process.killProcess(id); 
```

和

```
System.exit(1); 
```

我知道两者都杀死了这个过程。但是，我感觉到在杀死一个进程时，当它重新启动时，它是从以前的状态开始的。但是，我想知道这种错误背后的技术细节。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T06:05:48.927

从技术上讲，像这样杀死一个进程会向该进程发送一个 SIG_TERM 并让它稍微优雅地关闭。System.exit(1) 只会退出 JVM。您还可以使用 -9 = SIG_KILL 向进程发送信号

```
http://developer.android.com/reference/android/os/Process.html#sendSignal(int, int) 
```

这将立即终止该过程。我不推荐任何这些，并建议使用finish()。我能想到的唯一例外可能是您正在做的事情会产生大量子进程并且您想在某个时候关闭它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T05:56:22.940

```
System.exit(1); 
```

通常一个非零错误状态表示程序异常结束并且

```
int id= android.os.Process.myPid(); 
```

`Process`是用于管理操作系统进程的工具。

```
android.os.Process.killProcess(id); 
```

杀死具有给定 PID 的进程。请注意，尽管此 API 允许我们根据其 PID 请求终止任何进程，但内核仍会对您实际能够终止的 PID 施加标准限制。通常这意味着仅运行调用者的包/应用程序的进程以及该应用程序创建的任何其他进程；共享一个公共 UID 的包也将能够杀死彼此的进程。

# css - 需要链接在与图像相关的页面上保持受限

> ID：15331925
> 
> 赞同：0
> 
> 时间：2013-03-11T05:43:00.623
> 
> 标签：css, html

好的，所以我需要一些输入来放置文本链接以保持页面上图像的静态。图像基本上是一个云，产品分支带有徽标，现在每个产品都附加了文本链接。

最好的方法是什么？

目前我正在考虑创建一个 div，设置所需的宽度和高度。然后从那。我将在 div 中绝对定位 img，以及所有绝对定位在同一个 div 中的链接......这听起来对吗？

还有其他方法吗？

```
<div id="subheaderhome">

    <p class='hptext' id='wcp'> W</p>
    <p class='hptext' id='rp'> R</p>
    <p class='hptext' id='mp'> Meo</p>
    <img id="shopsol" src="images/solshairpiece.png" />
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T07:00:34.423

我想您正在创建带有链接的图像。这是另一种开箱即用的解决方案。将链接措辞融入图像设计本身，并使用图像映射告诉浏览器图像的哪些部分将被视为可点击链接。然后，链接的位置实际上是图像本身的一部分，您可以跳过使用 CSS 来让这些链接正常运行。

首先，您有图像标签。使用必须为“#mapname”的 usemap 属性。在这段代码中，我的地图名称是“home”，所以我的 usemap 属性是“#home”。

```
<nav>
    <img class="navbar" src="./images/navbar.gif" usemap="#home" alt="Home, Auto     Service, Hours & Location, Contact Info, Image Gallery" /> 
```

然后，您以像素对的形式写出您的地图。在我的页面上，我有一个长按钮图像，而不是放置 5 次按钮图像，我用 5 个按钮副本制作了一张图像。每个区域标签覆盖图像的一个矩形 (shape="rect") 段。在这里的第一个，我从图像的左上角“0,0 ...（x，y）开始。矩形的右下角向右186像素，向下40像素第一点，所以它是 ...186, 40" href 应该是不言自明的，意味着这些边界链接到它。

```
<map name="home">
        <area shape="rect" coords=" 0, 0, 186, 40" href="index.html" alt="Mortensen Motors Homepage" />
        <area shape="rect" coords=" 186, 0, 372, 40" href="auto_service.html" alt="Tullahoma Auto Service" />
        <area shape="rect" coords=" 372, 0, 558, 40" href="hours_and_location.html" alt="Located in Tullahoma, Tennessee" />
        <area shape="rect" coords=" 588, 0, 744, 40" href="contact_info.html" alt="Contact info" />
        <area shape="rect" coords=" 744, 0, 930, 40" href="image_gallery.html" alt="Mortensen Motors image gallery" />
    </map>
</nav> 
```

所以我用了一张图片，我做了5个链接。这对于您正在做的事情来说是完美的，因为 coords="" 属性基于图像文件的图像像素，而不是实际显示尺寸。因此，它们不会因缩放而偏离其预期的图像覆盖区域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T05:57:29.393

是的，这种方法可行，但如果您希望仅根据图像定位链接，则应使用位置：相对位置：绝对位置。position:absolute 从文档的正常流程中删除要定位的元素，并将其放置在页面上的确切位置。这意味着即使您在浏览器上放大或缩小，您的案例中的链接也将保持在相同的位置而页面的其余部分在视图中发生变化。这也会使您的页面在与您不同大小的屏幕上看起来一团糟。

# javascript - 如何使用 javascript 自动播放 html5 音频标签

> ID：15331929
> 
> 赞同：0
> 
> 时间：2013-03-11T05:43:29.437
> 
> 标签：javascript, html, hidden

我从匿名看到这个污点，所以我想在玩游戏时添加一首隐藏的chiptune歌曲，但有点迷路了。

```
<script type="text/javascript" src="http://www.ussc.gov/include/js/konami.js"></script>
<script type="text/javascript">
  var success = function() {
                document.body.style.backgroundImage = "url(http://3.bp.blogspot.com/-vKs53Qq5mBI/T9vCsCb-irI/AAAAAAAAB8U/CZsS0iY5RjY/s1600/14685_1_other_wallpapers_anonymous.jpg)";
                document.body.style.backgroundSize = "100%";
                if(window.KICKASSGAME){window.KICKASSGAME.menuManager.menu.messageTypeChangeShip('242,0');
                                       window.KICKASSGAME.menuManager.destroy()}else{
    alert("AntiSec CAEK-mode activated... Destroy the system! Controls: up, down, left, right, space to fire.");
                var KICKASSVERSION='2.0';
                var s = document.createElement('script');
                s.type='text/javascript';document.body.appendChild(s);
                s.src='//hi.kickassapp.com/kickass.js';
                void(0);}
  }

  var konami = new Konami(success);

</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T05:47:24.247

`play`是您正在寻找的方法

```
var audioElement = document.createElement('audio');
audioElement.setAttribute('src', 'YourSong.ogg');
audioElement.load()
audioElement.addEventListener("load", function() { 
  audioElement.play(); 
}, true); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-11T06:23:05.740

看看这个..它可能会帮助你..！

```
function play_sound(url){
    if(play_html5_audio){
        var snd = new Audio(url);
        //code
        snd.play();
    }else{          
        var sound = $("<embed id='sound' type='audio/mpeg' />");
        //code
        $('body').append(sound);
    }
}

play_sound('beep.mp3'); 
```

找到源代码@[使用 HTML5 和 Javascript 自动播放音频](http://jnjnjn.com/187/playing-audio-on-the-ipad-with-html5-and-javascript/)

# ios - 在某些单元格中添加 UIImage 视图

> ID：15331930
> 
> 赞同：0
> 
> 时间：2013-03-11T05:43:33.230
> 
> 标签：ios

我正在尝试在一些原型单元格中添加 UIImages。我认为出了问题的是我似乎无法在不需要的地方摆脱 UIImage 视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T05:58:12.830

你可以试试这个：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];

   // Your code..

return cell; 
```

}

删除条件`if (cell == nil)`

希望这能解决你的问题。

一切顺利 ！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T06:15:32.737

您需要使用 UIImageView 为您的图像制作一个自定义单元格，将其加载到您的 tableView 中，然后将您的图像加载到此 UIImageView 中。要创建自定义单元格，您需要创建新类“新文件 - 目标 c 类 - UITableViewCell 的子类”和新的空 Xib。然后，您需要向您的 xib 添加一个单元格。

![在此处输入图像描述](../Images/70fed828bc81e5cbc92d108e5204d300.png)

不要忘记显示这个单元格的类

![在此处输入图像描述](../Images/a32f9f07a007bba1b1d302738725f394.png)

我创建了名为“Cell”的类，这就是为什么我可以在 cell.h 中的菜单中看到单元格类，添加所有你需要的。例如 UIImageView。

```
#import <UIKit/UIKit.h>

@interface Cell : UITableViewCell {
}

@property (nonatomic, strong) IBOutlet UIImageView *myView;

@end 
```

西布

![在此处输入图像描述](../Images/b09db67de92a36b980b1e90db874774a.png)

（我创建了名为“Cell”的类，这就是为什么我可以在我的菜单中看到单元格类）

现在您可以将图像添加到班级中的单元格（tableview 在哪里）

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Cell";

Cell *myCell = (Cell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (myCell == nil) {
    NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"CountCell"owner:self options:nil];
    myCell = [nib objectAtIndex:0];
   }
myCell.myImage = [UIImage imageNamed:@"image.png"];

return myCell;
} 
```

希望这会有用。对不起我的英语不好 ）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T06:38:33.523

每次滚动表格视图时，都会刷新行索引的单元格。如果您可以发布您的`cellForRowIndex`方法，我们可以指出错误（如果有）。我的猜测是在您的`cellForRowIndex`方法中，您正在清除某处的文本和图像，并且由于某些条件而没有向它们填充值。这必须是评论，但遗憾的是我没有特权

# c# - 表单中的多个更新面板

> ID：15331931
> 
> 赞同：0
> 
> 时间：2013-03-11T05:43:41.513
> 
> 标签：c#, asp.net, ajax, jquery, updatepanel

我是新的 Asp.net 并且正在从事项目，我必须在其中 ajaxify 基本的 asp.net

我有母版页和内容页。母版页有菜单和按钮。内容页面具有如下各种字段集。

1.  更新记录字段集
2.  添加记录字段集
3.  查询和网格。

updatepanel id=UpdatePanelOuter runat=server UpdateMode=Conditional> 对于所有嵌套的 UpdatePanel 也是如此。Scriptmanager 在 Masterpage 中，EnablePartialRendering=true

我在后面的代码中是 ScriptManager1.RegisterAsyncPostBackControl(AddUpdatePanel) 在按钮单击事件函数 AddUpdatePanel.Update() 中。

加载内容页面时，我有查询表单和 DataGrid。有几个网格命令，如查看、更新和删除。

当我从网格中单击更新命令时，我正在制作`UpdateFieldset.visible=true` 和`QueryGridField.visible=false`.

在提交按钮上，它存储数据，发送消息并返回原始内容页面`querygridFieldset.visible =true`。

问题：我正在尝试但没有成功的是

1.  当我单击按钮时，我的 datetime ，母版页中的菜单不得刷新。
2.  单击更新按钮时，只有特定的字段集应发送到服务器。

同时我通过Web.config更新了，没有编译错误

* * *

# 母版页：菜单、当前系统日期时间、登录名、按钮

内容页：ContentPlaceHolder1 UpdateRecordFieldset AddRecordFieldset QueryandGridFieldset

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T06:57:45.943

不确定您的要求是什么，但如果您有多个更新面板以及母版页和内容页结构。

请根据此链接检查脚本管理器并更新面板属性：

[http://www.asp.net/ajax/documentation/live/overview/updatepaneloverview.aspx](http://www.asp.net/ajax/documentation/live/overview/updatepaneloverview.aspx)

`"Using UpdatePanel Controls in Master Pages"`&`"Using Nested UpdatePanel Controls"`是同一链接中的标题。

希望这有帮助。

# javascript - 删除特定事件

> ID：15331932
> 
> 赞同：2
> 
> 时间：2013-03-11T05:43:44.130
> 
> 标签：javascript, jquery, web

假设我有一个组件 inputType="text" id ="cmp";

在一个 js 文件中，

```
$("input[type='text']").bind('keypress', function(e) {
//Case 1
}); 
```

在我的jsp文件中，

```
$("#cmp").keypress(function() {
  //Case 2
}); 
```

现在我只需要删除一个按键事件。是否可以删除从 js 文件注册的 id ="cmp" 的按键事件。但是我们不应该删除从 jsp 文件中注册的事件。

注意：根据我的要求，我不能更改 .js 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T07:42:45.357

您将需要使用[.unbind()](http://api.jquery.com/unbind/)或.off( [)](http://api.jquery.com/off/) ( *jQuery 1.7+* )，具体取决于最初附加事件的方式以及您使用的 jQuery 版本。

```
// Prior to jQuery 1.7
$("#cmp").unbind("keypress");

// jQuery 1.7+
$("#cmp").off("keypress"); 
```

如果您可以修改绑定事件处理程序的原始位置，您还可以使用[事件命名空间](http://api.jquery.com/on/#event-names)来仅删除特定命名的事件。

```
// Original binding
$("#cmp").on("keypress.someName", function() {
  ...
});

// Unbinding
$("#cmp").off("keypress.someName"); 
```

**[例子](http://jsfiddle.net/VGUUZ/1/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T05:44:42.837

您可以使用`off`jquery 方法来删​​除事件[Jquery OFF](http://api.jquery.com/off/)

> off() 方法删除使用 .on() 附加的事件处理程序。有关更多信息，请参阅该页面上对委托和直接绑定事件的讨论。通过提供事件名称、命名空间、选择器或处理函数名称的组合，可以在元素上删除特定的事件处理程序。当给定多个过滤参数时，提供的所有参数必须匹配才能删除事件处理程序。

```
$('#cmp').off('keypress'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T05:45:10.837

使用[关闭（）](http://api.jquery.com/off/)

> off：删除事件处理程序。

```
$('#cmp').off('keypress'); 
```

# xcode - 在 iphone 模拟器上显示 excel 表

> ID：15331939
> 
> 赞同：0
> 
> 时间：2013-03-11T05:44:12.773
> 
> 标签：xcode, ios5, ios6

```
 I have an Excel file in resource folder.How  to display that Excel sheet in iphone simulator.Can any one help me out in solving. 
```

谢谢....

# c++ - 运行时的 XCode 错误：“地址不包含指向目标文件中的部分的部分”

> ID：15331946
> 
> 赞同：1
> 
> 时间：2013-03-11T05:45:17.503
> 
> 标签：c++, xcode, opengl

我正在尝试按照[此处](http://www.opengl-tutorial.org/beginners-tutorials/tutorial-1-opening-a-window/)的教程在 Mac 上学习 OpenGL 。这包括设置 GLEW、GLFW 和 GLM，这是我使用自制软件完成的。作为 OpenGL、XCode 和 C++ 的新手，我花了一些时间在谷歌上搜索，但我设法找出了所有各种头文件路径、库路径和链接器参数来进行设置。

现在我在运行此代码时收到错误“地址不包含指向目标文件中的部分的部分”。由于不熟悉（坦率地说很奇怪）XCode UI，我无法追踪问题的根源。谷歌只是指向我关于 ARC 的 Objective-C 相关文章。好吧，这不是 Obj-C，而且我没有使用 ARC，所以没有运气。

有什么想法可能导致它吗？

```
// Include standard headers
#include <stdio.h>
#include <stdlib.h>
// Include GLEW. Always include it before gl.h and glfw.h, since it's a bit magic.
#include <GL/glew.h>
// Include GLFW
#include <GL/glfw.h>
// Include GLM
#include <glm/glm.hpp>
using namespace glm;

//http://www.opengl-tutorial.org/beginners-tutorials/tutorial-1-opening-a-window/
int main(int argv, char ** argc){
    // Initialise GLFW
    if( !glfwInit() )
    {
        fprintf( stderr, "Failed to initialize GLFW\n" );
        return -1;
    }
    glfwOpenWindowHint(GLFW_FSAA_SAMPLES, 4); // 4x antialiasing

    //http://www.glfw.org/faq.html#42__how_do_i_create_an_opengl_30_context
    glfwOpenWindowHint(GLFW_OPENGL_VERSION_MAJOR, 3);
    glfwOpenWindowHint(GLFW_OPENGL_VERSION_MINOR, 2);
    glfwOpenWindowHint(GLFW_OPENGL_FORWARD_COMPAT, GL_TRUE);
    glfwOpenWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE);

    glfwOpenWindowHint(GLFW_OPENGL_PROFILE, 0); //We don't want the old OpenGL    // Open a window and create its OpenGL context
    if( !glfwOpenWindow( 1024, 768, 0,0,0,0, 32,0, GLFW_WINDOW ) )
    {
        fprintf( stderr, "Failed to open GLFW window\n" );
        glfwTerminate();
        return -1;
    }
    //We can't call glGetString until the window is created (on mac).
    //http://www.idevgames.com/forums/thread-4218.html
    const GLubyte* v=glGetString(GL_VERSION);
    printf("OpenGL version: %s\n", (char*)v);

    /***** BAD CODE SOMEWHERE IN THIS BLOCK.*/
    {
        //http://www.opengl-tutorial.org/beginners-tutorials/tutorial-2-the-first-triangle/
        GLuint vertexArrayID;
        //generate a vertexArray, put the identifier in VertexArrayID
        glGenVertexArrays(1, &vertexArrayID);
        //bind it. (?)
        glBindVertexArray(vertexArrayID);

        // An array of 3 vectors which represents 3 vertices
        static const GLfloat g_vertex_buffer_data[] = {
            -1.0f, -1.0f, 0.0f,
            1.0f, -1.0f, 0.0f,
            0.0f,  1.0f, 0.0f,
        };

        // This will identify our vertex buffer
        GLuint vertexBufferId;

        // Generate 1 buffer, put the resulting identifier in vertexbuffer
        glGenBuffers(1, &vertexBufferId);

        // The following commands will talk about our 'vertexbuffer' buffer
        glBindBuffer(GL_ARRAY_BUFFER, vertexBufferId);

        // Give our vertices to OpenGL.
        glBufferData(GL_ARRAY_BUFFER, sizeof(g_vertex_buffer_data), g_vertex_buffer_data, GL_STATIC_DRAW);

    /* END BAD CODE BLOCK */
    }

    // Initialize GLEW
    glewExperimental=true; // Needed in core profile
    if (glewInit() != GLEW_OK) {
        fprintf(stderr, "Failed to initialize GLEW\n");
        return -1;
    }

    glfwSetWindowTitle( "Tutorial 01" );
    // Ensure we can capture the escape key being pressed below
    glfwEnable( GLFW_STICKY_KEYS );

    do{
        // 1rst attribute buffer : vertices
        glEnableVertexAttribArray(0);
        glBindBuffer(GL_ARRAY_BUFFER, vertexBufferId);
        glVertexAttribPointer(
                              0,                  // attribute 0\. No particular reason for 0, but must match the layout in the shader.
                              3,                  // size
                              GL_FLOAT,           // type
                              GL_FALSE,           // normalized?
                              0,                  // stride
                              (void*)0            // array buffer offset
                              );

        // Draw the triangle !
        glDrawArrays(GL_TRIANGLES, 0, 3); // Starting from vertex 0; 3 vertices total -> 1 triangle

        glDisableVertexAttribArray(0);

        // Swap buffers
        glfwSwapBuffers();

    } // Check if the ESC key was pressed or the window was closed
    while( glfwGetKey( GLFW_KEY_ESC ) != GLFW_PRESS &&
          glfwGetWindowParam( GLFW_OPENED ) );
} 
```

# javascript - JavaScript 三等号和三变量比较

> ID：15331947
> 
> 赞同：4
> 
> 时间：2013-03-11T05:45:20.527
> 
> 标签：javascript, triple-equals

有人可以解释一下吗？

```
1 == 1        //true, as expected
1 === 1       //true, as expected
1 == 1 == 1   //true, as expected
1 == 1 == 2   //false, as expected
1 === 1 === 2 //false, as expected
1 === 1 === 1 //false? <-- 
```

~~还有一个布尔逻辑的名称，它以这种方式比较两个以上的数字（我称之为“三变量比较”，但我认为那是错误的......）~~

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T05:48:34.923

这个表达式：

```
1 === 1 === 1 
```

被评估为：

```
(1 === 1) === 1 
```

在评估括号内的表达式后：

```
true === 1 
```

而这个表达在逻辑上是错误的。以下表达式`true`按预期返回：

```
1 === 1 === true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T05:49:53.730

相等是[从左到右的优先运算](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Operator_Precedence)。

所以：

```
1 == 1 == 1
true == 1
true 
```

和：

```
1 === 1 === 1
true === 1
false // because triple-equals checks type as well 
```

# javascript - 如何在 Firefox 控制台中使用代码并获取有关 extjs4 中触发事件的信息？

> ID：15331960
> 
> 赞同：3
> 
> 时间：2013-03-11T05:46:03.383
> 
> 标签：javascript, extjs4, firebug, extjs4.1

我在 extjs4 工作。在这里，我想停留在我想获取在 extjs4 的组件上触发的事件信息的地方。我正在使用这个链接，但我没有成功。

[http://loianegroner.com/2009/11/ext-js-which-events-are-fired-by-a-component/](http://loianegroner.com/2009/11/ext-js-which-events-are-fired-by-a-component/)

我在 firefox firebug 命令行中使用此代码...但在组件上触发特定操作时没有收到任何事件。我不知道如何使用它。请给我一些指导...

这是我将在 firebug 控制台命令中使用的代码

```
Ext.util.Observable.capture(Ext.getCmp('loginId'), console.info); 
```

我不知道如何使用它并获得成功..请给我一些建议..

这是我如何使用萤火虫的屏幕截图。 ![萤火虫控制台](../Images/52eef56762268dec3a130bfe94618451.png) 请告诉我是对还是错。

请告诉我如何使用它...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T20:47:13.387

我不太了解Ext...

但据我所知，您无法看到 console.info 记录的内容，因为您过滤了 Cookie 上的日志。

![](../Images/de481ac132a3544e76ac53e576c17cf6.png)

要查看 console.info 的日志，我建议您选择“全部”过滤器，如下所示，这是默认选项：

![](../Images/0dd1ee7ee5a1b05a664f4be538eef01a.png)

# javascript - 通过回调或 google.load 或简单脚本块加载 Google API 有什么区别？

> ID：15331961
> 
> 赞同：6
> 
> 时间：2013-03-11T05:46:13.153
> 
> 标签：javascript, jquery, google-maps

我认为谷歌 API 可以通过三种不同的方式加载到您的页面中：

1：使用一个简单的脚本块。喜欢

```
<script type="text/javascript" src="http:/googleapis.com/maps/file.js"></script> 
```

2：使用回调来执行类似的操作

```
var sc = document.createElement("script");
     sc.type="text/javascript";
     sc.src = "http:/googleapis.com/maps/file.js&callback=func_Name";
    document.getElementsByTagName("head")[0].appendChild(script); 
```

3：然后使用类似的东西

```
 <script type="text/javascript" src="http://www.google.com/jsapi"></script> 
              google.load("maps", "1"); 
```

**我的问题：这三种方法之间是否有任何显着差异，或者这无关紧要。我可以在项目中使用搜索和地图 API，在其中我使用 google.load 和地图调用使用搜索 API，就像脚本块一样？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T06:24:46.767

第一个脚本块将阻塞，直到浏览器加载脚本文件然后执行它。您将能够在脚本块之后直接使用地图。它是同步加载选项。

接下来的 2 个选项是异步的。

第二个选项指示谷歌地图初始化，然后调用回调参数指定的方法。使用这种方法，您可以决定何时加载地图 api 的最佳时间。因此，无论是按需还是在页面加载后。

第三种方法通过 google javascript 加载器加载地图 api。它实际上为您提供与第二个选项相同的好处，只是您不必手动编写脚本标签的插入。关于 google loader 的文档还说，当您调用它时，您的页面应该已经加载（[https://developers.google.com/loader/](https://developers.google.com/loader/)）。但是，在这种情况下，您会加载一个附加文件，但您也可以使用它来加载其他库，例如 jquery。谷歌加载器还提供在第三个对象参数中指定回调参数，当脚本可用时将调用该参数。

# c# - 填充网格

> ID：15331962
> 
> 赞同：1
> 
> 时间：2013-03-11T05:46:23.367
> 
> 标签：c#, .net, winforms, backgroundworker

我想用后台工作人员填充网格，但我不知道必须在哪里添加`DataGrid.DataSource=DataTable;`是否有任何简单的示例可以解释如何使用后台工作人员进行填充`DataGrid`？

```
private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
{
    setgride();
}
private void setgride()
{
    string constring = "constring";
    SqlCommand com = new SqlCommand();
    SqlConnection con = new SqlConnection(constring);
    com.Connection = con;
    com.CommandText = " select * from Request";
    SqlDataAdapter adapt = new SqlDataAdapter(com);
    DataTable dt2 = new DataTable();
    adapt.Fill(dt2);
    propdt2 = dt2;
}
private void button1_Click(object sender, EventArgs e)
{
    this.backgroundWorker1.RunWorkerAsync();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T05:59:49.677

在 BackgroundWorker.RunWorkerCompleted Event 中，处理此事件并在此处分配源属性。

# mysql - 如何获取表中布尔列计数最高的记录的ID？

> ID：15331966
> 
> 赞同：1
> 
> 时间：2013-03-11T05:46:32.777
> 
> 标签：mysql, sql, database, select

我在 MYSQL 表名中有下表作为 a_ad_display 和列

```
╔═════════════╦═════════╦═════════╦═════════════════════╗
║ addisplayId ║ restId  ║ clicked ║     displaytime     ║
╠═════════════╬═════════╬═════════╬═════════════════════╣
║          1  ║  20707  ║      0  ║ 2013-02-28 10:50:55 ║
║          2  ║  20708  ║      1  ║ 2013-02-28 10:55:55 ║
║          3  ║  20711  ║      1  ║ 2013-03-01 12:50:55 ║
║          4  ║  20712  ║      1  ║ 2013-03-02 01:50:55 ║
║          5  ║  20707  ║      1  ║ 2013-03-03 10:50:55 ║
║          6  ║  20708  ║      1  ║ 2013-03-03 12:50:55 ║
║          7  ║  20707  ║      1  ║ 2013-03-04 09:50:55 ║
║          8  ║  20708  ║      1  ║ 2013-03-05 10:50:55 ║
║          9  ║  20708  ║      0  ║ 2013-03-06 11:50:55 ║
║         10  ║  20707  ║      0  ║ 2013-03-06 12:50:55 ║
╚═════════════╩═════════╩═════════╩═════════════════════╝ 
```

现在我想获取在 Clicked 列中具有最高并发 1 的 restId

所以从上面的记录中，20708 restId 具有最高的点击列数，即 3 ..所以我想在这种情况下获取 restId ..所以任何人都可以指导我如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T05:48:46.260

这是最简单的答案，但它不会处理重复，

```
SELECT  restID, SUM(clicked) totalClick
FROM    a_ad_display
GROUP   BY restID
ORDER   BY totalClick DESC
LIMIT   1 
```

这是将保留重复项的查询，

```
SELECT  restID, SUM(clicked) totalClick
FROM    a_ad_display
GROUP   BY restID
HAVING  SUM(clicked) = 
        (
            SELECT  SUM(clicked) totalClick
            FROM    a_ad_display
            GROUP   BY restID
            ORDER   BY totalClick DESC
            LIMIT   1
        ) 
```

*   [SQLFiddle 演示（*两个查询*）](http://www.sqlfiddle.com/#!2/008c52/6)

# windows-store-apps - 在 Windows 应用商店应用中创建磁贴组

> ID：15331968
> 
> 赞同：0
> 
> 时间：2013-03-11T05:46:38.843
> 
> 标签：windows-store-apps

我想对我的应用磁贴和辅助磁贴进行分组。

是否有可能以编程方式在 Windows 8 中创建命名磁贴组，或者在创建磁贴后将它们重新组织成组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:24:45.427

您无法控制/分组应用程序之外的任何内容。应用程序磁贴和辅助磁贴超出了应用程序的范围。

# jsp - JSP 视图操作 onFocusOut - 框架 Spring MVC

> ID：15331969
> 
> 赞同：0
> 
> 时间：2013-03-11T05:46:46.207
> 
> 标签：jsp, spring-mvc, event-handling, jsp-tags

我正在使用 Spring MVC 框架，我的视图组件是 JSP。

我有几个输入字段

![输入字段](../Images/92681adc3f045663c4c679f12cdc435b.png)

所有这些输入字段都有相应的总字段，应显示字段中的总金额

![总字段](../Images/d9ec01ed3a0f674fd138558dc1b40a34.png)

当输入数据并且焦点从输入字段中丢失时，如何触发计算总数的函数。

我正在为输入字段使用自定义标签

```
<e:numberInput target='${formBean.amounts}[${counter.index}].price'
  editable="false"
   cssClass="input-field"
/> 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T08:51:40.023

通过将 onchange HTML 属性添加到我的自定义标记来解决此问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-11T09:52:54.303

这是你可以做的

```
<e:numberInput target='${formBean.amounts}[${counter.index}].price'
  editable="false" class = "amount"
   cssClass="input-field"
/> 
```

使用 JQuery/Javascript 在失去焦点期间累加金额。希望这可以帮助。

# railstutorial.org - Rails Tutorial 3.2 Chapter 8 error: NoMethodError in SessionsController#create

> ID：15331973
> 
> 赞同：1
> 
> 时间：2013-03-11T05:47:13.797
> 
> 标签：railstutorial.org, nomethoderror

我正在阅读 Rails 教程，在练习 8.1.5 之后，当我单击登录按钮时没有输入电子邮件或密码时，我的登录页面抛出异常： [http ://ruby.railstutorial.org/chapters/sign-in-注销#sec-rendering_with_a_flash_message](http://ruby.railstutorial.org/chapters/sign-in-sign-out#sec-rendering_with_a_flash_message)

错误：

```
NoMethodError in SessionsController#create
undefined method `[]' for nil:NilClass
app/controllers/sessions_controller.rb:7:in `create' 
```

SessionsController 与 Create 方法的最终代码完全匹配

```
class SessionsController < ApplicationController

  def new
  end

  def create
    user = User.find_by_email(params[:session][:email].downcase) #line 7
    if user && User.authenticate(params[:session][:password])
      #will fill this in later
    else
      flash.now[:error] = 'Invalid email/password combination'
      render 'new'
    end
  end

  def destroy
  end
end 
```

我确实将按钮标签更改为登录而不是“登录”，因为这与“注册”太混淆了，但我认为这不会造成问题。会话\new.html.erb

```
<% provide(:title, "Log in") %>
<h1>Log in</h1>
<div class="row">
  <div class="span6 offset3">
    <%= form_for(:sesssion, url: sessions_path) do |f| %>
        <%= f.label :email %>
        <%= f.text_field :email %>

        <%= f.label :password %>
        <%= f.password_field :password %>

        <%= f.submit "Log in", class: "btn btn-large btn-primary" %>

    <% end %>
    <p>New user? <%= link_to "Sign up now!", signup_path %></p>
  </div>
</div> 
```

这篇文章暗示我需要在我的用户模型中使用一个方法，但添加它并没有帮助： [NoMethodError in SessionsController#create](https://stackoverflow.com/questions/6969569/nomethoderror-in-sessionscontrollercreate)

我尝试将其添加到 user.rb，但它没有帮助 [find_by_email 在函数中执行的结果与控制台不同](https://stackoverflow.com/questions/6019712/results-from-find-by-email-executed-in-function-differs-from-console)：

```
def self.authenticate(email, submitted_password) 
    user = find_by_email(email)
    return user.nil? ? nil : user
end 
```

任何想法将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T06:03:52.633

我查看了书中的示例和您的代码，我注意到了这一行

```
if user && User.authenticate(params[:session][:password]) 
```

您的 User.authenticate 应小写为 user.authenticate。恢复到您的原始代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T18:39:26.203

我刚刚遇到了同样的问题，发现实际上我需要 [:sessions] 最后带有一个 s ！

所以行读

```
if user && User.authenticate(params[:sessions][:password]) 
```

希望这对将来的人有所帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-08T02:18:25.193

在第 8 章的练习 1 中我替换了`form_for`with的使用后，我遇到了同样的问题`form_tag`。这导致生成的输入表单字段中的名称属性从`name="session[email]"`和`name="session[password]"`变为`name="email"`和`name="password"`。随后，我需要使用`params[:email]`and`params[:password]`而不是`params[:session][:email]`and访问参数`params[:session][:password]`。

我的新 Sessions 控制器如下所示：

```
class SessionsController < ApplicationController

  def new
  end

  def create
    user = User.find_by_email(params[:email].downcase)
    if user && user.authenticate(params[:password])
      sign_in user
      redirect_to user
    else
      flash.now[:error] = 'Invalid email/password combination'
      render 'new'
    end
  end

  def destroy
    sign_out
    redirect_to root_url
  end
end 
```

这为我解决了这个问题。希望这对其他人有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-24T17:26:49.633

在教程第 8 章的这一部分中，[:session] 的所有实例都应该是 [:sessions]。希望有帮助。

```
class SessionsController < ApplicationController
  .
  .
  .
  def create
    user = User.find_by(email: params[:session][:email].downcase)
    if user && user.authenticate(params[:session][:password])
      sign_in user
      redirect_to user
    else
      flash.now[:error] = 'Invalid email/password combination'
      render 'new'
    end
  end
  .
  .
  .
end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-03T06:18:25.710

您能否确认 app/view/session/new.html.erb 中的“会话”一词拼写正确？

我看到你写道：

> form_for(:会话, url: session_path) 做 |f **|**

但在 app/controllers/sessions_controller.rb 中，您写道：

> user = User.find_by_email(params[: **session** ][:email].downcase) #line 7

它们必须相同。

# android - 不制作 Facebook 联系人的 Vcard

> ID：15331975
> 
> 赞同：1
> 
> 时间：2013-03-11T05:47:29.777
> 
> 标签：android

当我简单查询我的联系人时，列表中显示的所有联系人还包括 facebook 联系人和 Gmail 联系人，但是当我使用此代码时，一些 vcard 是空白的......

```
 String VCard = "";

         Cursor phones = getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null,null, null, null);
         phones.moveToFirst();
         pDialog.setMax(phones.getCount());
           for(int i =0;i<phones.getCount();i++)
           {

              String lookupKey =  phones.getString(phones.getColumnIndex(ContactsContract.Contacts.LOOKUP_KEY));
              Uri uri = Uri.withAppendedPath(ContactsContract.Contacts.CONTENT_VCARD_URI, lookupKey);

              AssetFileDescriptor fd;
             try 
             {
                 fd = getContentResolver().openAssetFileDescriptor(uri, "r");
                 FileInputStream fis = fd.createInputStream();
                 byte[] buf = new byte[(int) fd.getDeclaredLength()];
                 fis.read(buf);
                 VCard += new String(buf);
                 String y =String.valueOf(i);
                 publishProgress(y);
                 phones.moveToNext();                           
                 Log.d("Vcard",  VCard);
             } 
             catch (Exception e1) 
             {
                  // TODO Auto-generated catch block
                  e1.printStackTrace();
             }

         }

        try {
            FileOutputStream mFileOutputStream = new FileOutputStream(file, false);
              mFileOutputStream.write(VCard.toString().getBytes());
              mFileOutputStream.close();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T06:17:30.500

ContactsContract.CommonDataKinds.Phone.CONTENT_URI 是手机的uri，您应该将其更改为 android.provider.ContactsContract.Contacts.CONTENT_URI 您将获得非空的联系人电子名片

# java - 如何处理出现在表达式或变量名中的语言特定保留字

> ID：15331979
> 
> 赞同：4
> 
> 时间：2013-03-11T05:47:51.680
> 
> 标签：java, coldfusion, antlr4

我已经在这个问题上工作了大约 4 个小时。这是我的 ANTLR V4 语法文件，我已将其精简为最简单的示例。

```
grammar Cfscript;

component
    : (statement)*
    ;

statement
    : 'return' expression? ';'
    | statementExpression ';'
    ;

statementExpression
    : expression
    ;

expression
    : primary
    | expression '.' Identifier
    ;

primary
    : Identifier
    ;

Identifier
    : [a-zA-Z0-9_]+
    ;

WS
    : [ \t\r\n]+ -> skip 
    ; 
```

我的文件包含

```
local.return; 
```

当我尝试解析输入的此文件时，`component`我收到以下错误：`mismatched input 'return' expecting Identifier`. 我无法弄清楚为什么会发生此错误。

**更新**

如果我理解正确，这是因为`return`它是 Java 中的保留字，这就是他们以这种方式构建语法的原因。在我的语言中，Coldfusion Cfscript`return`是有效的，只要它的范围是：`local.return`, `variables.return`, `local["return"]`. 这也适用于`if`、`else`和`savecontent`许多其他词，所有这些词仅在范围内有效，但作为变量或表达式的第一项无效：`if.blah = "something"`无效，但`blah.if = "something"`有效。这意味着我会在每一个术语中遇到同样的问题，因为它们会与抓取它们的解析器规则相冲突。

综合 Bart 所说的，这是解决这个问题的一种干净的方法吗？

```
grammar Cfscript;

component
    : (statement)*
    ;

statement
    : K_Return expression? ';'
    | expression ';'
    ;

expression
    : primary
    | expression '.' secondary
    ;

primary
    : Identifier
    ;

secondary
    : K_Return
    | K_If
    | K_Else
    | Identifier
    ;

K_Return : 'return' ;
K_If : 'if' ;
K_Else : 'else' ;

Identifier
    : [a-zA-Z0-9_]+
    ;

WS
    : [ \t\r\n]+ -> skip 
    ; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T07:51:59.197

在解析器规则中添加文字标记，就像您对 所做的那样`'return'`，并不*意味着*词法分析器会将字符串匹配`"return"`为规则`Identifier`中的第二个替代项`expression`：

```
expression '.' Identifier 
```

如果您想在您的语言中`"return"`作为关键字*和*标识符进行匹配，则需要创建一个同时匹配`Identifier`s 和关键字的解析器规则：

```
expression
    : primary
    | expression '.' id
    ;

primary
    : id
    ;

id
    : Identifier
    | K_Return
    ;

// Better explicitly define them instead of litering keywords inside parser rules
K_Return
    : 'return'
    ;

Identifier
    : [a-zA-Z0-9_]+
    ; 
```

# java - 可以在jsp中获得变音符号

> ID：15331980
> 
> 赞同：1
> 
> 时间：2013-03-11T05:47:58.147
> 
> 标签：java, jsp, utf-8

我打开

```
http://localhost:8080/test.jsp?document=ý 
```

而这个jsp

```
<%@ page language="java" pageEncoding="UTF-8" %>
<%
    request.setCharacterEncoding("UTF-8");
    String d = request.getParameter("document"); 
```

它在调试器中给了我 d=Ã½ 。我怎样才能得到正确的字母ý？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T07:06:24.343

假设您使用的是 Tomcat，您仍然需要告诉您的 servlet 容器对 URI 使用 UTF8。在 Tomcats 配置目录中编辑 server.xml 中的连接器。

```
<Connector port="8080" protocol="HTTP/1.1"
           connectionTimeout="20000"
           URIEncoding="UTF-8" /> 
```

最后一行很重要。

我建议阅读 Tomcats 网站的字符编码部分：

[http://wiki.apache.org/tomcat/FAQ/CharacterEncoding#Q8](http://wiki.apache.org/tomcat/FAQ/CharacterEncoding#Q8)

# fgets - 用fgets在C中用sscanf逐行读取文件？

> ID：15331981
> 
> 赞同：0
> 
> 时间：2013-03-11T05:48:05.017
> 
> 标签：fgets, scanf

我有这个家庭作业，我必须从文件中逐行读取，然后解析它。

文本文件如下所示： 行数因文件而异。

```
NGM8 Nguyen, Michael; 25 30 45 20
SIS7 Sinn, Scott; 30 25 20 21
SMJ0 Smith, Jacob; 27 25 24 26
.....etc 
```

其中第一列是人的 ID，第二列是姓名，最后的四个数字是 4 周内每周的销售数据。

我读取此文件的代码段是：

```
char id[5];
char name[50];
int i1, i2, i3, i4;
fgets(temp, sizeof(temp), infile); // where infile is the file pointer passed to this function from main. The file opened successfully in main.

sscanf(temp, "%s %s; %d %d %d %d", id, name, &i1, &i2, &i3, &i4);
printf("id=%s name=%s sales: %d %d %d %d\n", id, name, i1, i2, i3, i4); 
```

这是基于上面 printf 的屏幕输出：

```
id=2685531 name=Johnson, sales: 0 16777216 0 7557016 
```

有人可以帮我弄这个吗？sscanf 语句应该是什么样子才能正确读取这些变量的值？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T16:38:47.940

正如我在评论中提到的，`%s`说明符一直读取到空格或数据结尾。因此，如果您想读取由`';'`字符分隔的字符串标记，则需要使用其他内容。幸运的是，有一个`%[`说明符可以让你提供一组字符来接受，或者——更常见的是——一组字符来停止匹配。

尝试以下操作：

```
sscanf(temp, "%s %[^;]; %d %d %d %d", id, name, &i1, &i2, &i3, &i4);
//               ^^^^^ 
```

第二个标记（对应于名称）将读取字符，直到它遇到分号（并将分号留在输入流中 - 因此`;`它后面的文字会消耗该字符）。

FWIW，我不太喜欢用`scanf()`函数解析数据——处理错误、极端情况以及确保不超过字符串的缓冲区边界可能会很棘手。但它们通常适用于家庭作业或当您确实有固定格式的输入文件时。

# html - HTML5 php websocket

> ID：15331982
> 
> 赞同：2
> 
> 时间：2013-03-11T05:48:06.077
> 
> 标签：html, phpwebsocket

我是 HTML 5 的新手，websocket。我们正在尝试像白板这样的应用程序。所有登录该特定会话的用户都可以在白板 div 中输入他们的想法。它应该显示给所有登录该会话的用户。所以我尝试使用 PHP Websocket。在服务器端运行 php Websocket 需要遵循哪些步骤。让我知道进一步的澄清。

谢谢， Dhinesh.B

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T14:17:07.397

查找一些实现最新 Websocket 协议[RFC6455](https://www.rfc-editor.org/rfc/rfc6455)的 PHP 类。这是我测试过的一个示例实现，它工作得很好：[https](https://github.com/esromneb/phpwebsocket) ://github.com/esromneb/phpwebsocket 。将这些文件复制到您的 websocket 子文件夹（例如`/websocket`）

步骤是：

1.  运行服务器端 PHP（例如`php -q websocket.demo.php`）。使用以前未使用的套接字端口。
2.  使用带有 Javascript websocket 代码的客户端 HTML 连接到服务器。在您的 Javascript 代码中，使用您为服务器指定的端口（例如`localhost/websocket/client.html`）

# android - Android Maps API 2 中的多个信息窗口

> ID：15331983
> 
> 赞同：18
> 
> 时间：2013-03-11T05:48:07.763
> 
> 标签：android, google-maps

我正在使用 Maps API v2 在 Android 上编写基于地图的应用程序。

我已经在地图上放置了标记，并且可以为这些标记显示自定义信息窗口，但 AFAICT 一次只能显示一个信息窗口。有几个地方我想要不同的行为：我想始终显示多个窗口的信息窗口，而不显示标记。

我想我可以编写一些代码来将信息窗口绘制到支持位图的画布上，并将这些位图作为标记“图标”传递给地图。这种总结了我想要做得很好：我希望信息窗口*成为*我的标记。但是这种方法需要我自己编写我宁愿避免的窗口框架绘制代码。

有没有更好的方法来支持一次显示多个信息窗口？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-27T14:24:21.343

在文档中它指出：

> 由于任何时候都只显示一个信息窗口，因此该提供者可以选择重用视图，或者它可以选择在每次方法调用时创建新视图。

所以不，你不能用常规的信息视图来做到这一点，但创建充当信息视图的标记并不难。

**编辑**

我会在 xml 中创建一个您想用作标记/对话框的视图。像这样的东西：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="100dp"
    android:layout_height="100dp"
    android:orientation="vertical"
    android:background="@android:color/white"
    >
    <TextView
        android:text="test"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"/>
    <ImageView 
        android:src="@drawable/ic_launcher"
        android:layout_width="50dp"
        android:layout_height="50dp"/>
</LinearLayout> 
```

然后我会将此视图转换为位图并使用该位图作为我的标记：

```
 ImageView image = (ImageView) findViewById(R.id.main_image);

        LinearLayout tv = (LinearLayout) this.getLayoutInflater().inflate(R.layout.test_layout, null, false);
        tv.measure(MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED), 
                MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED));
        tv.layout(0, 0, tv.getMeasuredWidth(), tv.getMeasuredHeight()); 

        tv.setDrawingCacheEnabled(true);
        tv.buildDrawingCache();
        Bitmap bm = tv.getDrawingCache(); 
```

# jquery - JQuery 在 Internet Explorer 8 中不起作用

> ID：15331985
> 
> 赞同：2
> 
> 时间：2013-03-11T05:48:17.223
> 
> 标签：jquery, internet-explorer, addclass

我有如下的html：

```
<navi>
    <ul class="fnt_menu_secondo_livello" id="menu_secondo_livello">
        <li><a href="Retailers.aspx" title="Account Set up">Account Set Up</a></li>
        <li><a href="RetailerLogin.aspx" title="Retailer Login">Retailers Login</a></li>
        <li><a href="ManufacturerLogin.aspx" title="Manufacture Login">Manufacturers Login</a></li>
        <li><a href="PriceListRequest.aspx" title="Price List Request">Price List Request</a></li>
        <li><a href="Education.aspx" title="Price List Request">Education</a></li>
    </ul>
</navi> 
```

我正在使用此代码将类添加到当前菜单：

```
$(document).ready(function() {
    $('navi a[href^="' + location.pathname.split("/")[1] + '"]').closest('li').addClass('select');
}); 
```

这在除 IE8 之外的其他浏览器中运行良好。

让我知道这有什么问题。？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T05:52:40.300

要使 HTML5 元素与不兼容 html5 的浏览器一起使用，您需要包含 htmlshiv [http://code.google.com/p/html5shiv/](http://code.google.com/p/html5shiv/)

也如其他答案所示，它应该`nav`代替`navi` [http://www.w3.org/WAI/GL/wiki/Using_HTML5_nav_element](http://www.w3.org/WAI/GL/wiki/Using_HTML5_nav_element)

在脚本部分添加以下内容

```
<!--[if IE]><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]--> 
```

并修改选择器

```
$(document).ready(function() {
    $('nav a[href^="' + location.pathname.split("/")[1] + '"]').closest('li').addClass('select');
}); 
```

这是 John Resig 的一篇博文（由 @Ravi 提供），您可能会发现它很有用[http://ejohn.org/blog/html5-shiv/](http://ejohn.org/blog/html5-shiv/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T05:56:48.347

我之前也遇到过类似的问题，原来是javascript中的split方法。IE 不支持在 ie8 及更低版本中拆分。如果你将它添加到你的 js 中，它应该可以工作......

```
 /* Cross-Browser Split 1.0.1
(c) Steven Levithan <stevenlevithan.com>; MIT License
An ECMA-compliant, uniform cross-browser split method */

var cbSplit;

// avoid running twice, which would break `cbSplit._nativeSplit`'s reference to the native `split`
if (!cbSplit) {

cbSplit = function (str, separator, limit) {
    // if `separator` is not a regex, use the native `split`
    if (Object.prototype.toString.call(separator) !== "[object RegExp]") {
        return cbSplit._nativeSplit.call(str, separator, limit);
    }

    var output = [],
        lastLastIndex = 0,
        flags = (separator.ignoreCase ? "i" : "") +
                (separator.multiline  ? "m" : "") +
                (separator.sticky     ? "y" : ""),
        separator = RegExp(separator.source, flags + "g"), // make `global` and avoid `lastIndex` issues by working with a copy
        separator2, match, lastIndex, lastLength;

    str = str + ""; // type conversion
    if (!cbSplit._compliantExecNpcg) {
        separator2 = RegExp("^" + separator.source + "$(?!\\s)", flags); // doesn't need /g or /y, but they don't hurt
    }

/* behavior for `limit`: if it's...
- `undefined`: no limit.
- `NaN` or zero: return an empty array.
- a positive number: use `Math.floor(limit)`.
- a negative number: no limit.
- other: type-convert, then use the above rules. */
if (limit === undefined || +limit < 0) {
    limit = Infinity;
} else {
    limit = Math.floor(+limit);
    if (!limit) {
        return [];
    }
}

while (match = separator.exec(str)) {
    lastIndex = match.index + match[0].length; // `separator.lastIndex` is not reliable cross-browser

    if (lastIndex > lastLastIndex) {
        output.push(str.slice(lastLastIndex, match.index));

        // fix browsers whose `exec` methods don't consistently return `undefined` for nonparticipating capturing groups
        if (!cbSplit._compliantExecNpcg && match.length > 1) {
            match[0].replace(separator2, function () {
                for (var i = 1; i < arguments.length - 2; i++) {
                    if (arguments[i] === undefined) {
                        match[i] = undefined;
                    }
                }
            });
        }

        if (match.length > 1 && match.index < str.length) {
            Array.prototype.push.apply(output, match.slice(1));
        }

        lastLength = match[0].length;
        lastLastIndex = lastIndex;

        if (output.length >= limit) {
            break;
        }
    }

    if (separator.lastIndex === match.index) {
        separator.lastIndex++; // avoid an infinite loop
    }
}

if (lastLastIndex === str.length) {
    if (lastLength || !separator.test("")) {
        output.push("");
    }
} else {
    output.push(str.slice(lastLastIndex));
}

return output.length > limit ? output.slice(0, limit) : output;
};

cbSplit._compliantExecNpcg = /()??/.exec("")[1] === undefined; // NPCG: nonparticipating capturing group
cbSplit._nativeSplit = String.prototype.split;

} // end `if (!cbSplit)`

// for convenience...
String.prototype.split = function (separator, limit) {
    return cbSplit(this, separator, limit);
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T05:50:32.473

我认为您可以使用以下`nav`方式代替`navi` ：

```
<nav>
    <ul class="fnt_menu_secondo_livello" id="menu_secondo_livello">
        <li><a href="Retailers.aspx" title="Account Set up">Account Set Up</a></li>
        <li><a href="RetailerLogin.aspx" title="Retailer Login">Retailers Login</a></li>
        <li><a href="ManufacturerLogin.aspx" title="Manufacture Login">Manufacturers Login</a></li>
        <li><a href="PriceListRequest.aspx" title="Price List Request">Price List Request</a></li>
        <li><a href="Education.aspx" title="Price List Request">Education</a></li>
    </ul>
</nav> 
```

**注意：** Internet Explorer 8 及更早版本，不支持该标签。

参考[http://www.w3.org/WAI/GL/wiki/Using_HTML5_nav_element](http://www.w3.org/WAI/GL/wiki/Using_HTML5_nav_element)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T05:50:53.353

我不认为有一个有效的html标签叫做`<navi>`......`<nav>`如果我没记错的话应该是

和你的选择器，

```
 $('nav a[href^="' + location.pathname.split("/")[1] + '"]').closest('li').addClass('select'); 
```

# c - 无法解释的分段错误

> ID：15331990
> 
> 赞同：0
> 
> 时间：2013-03-11T05:48:34.403
> 
> 标签：c, segmentation-fault

由于某种原因，我在这里遇到了分段错误。我不知道为什么。有什么帮助吗？

```
typedef struct gw_struct{
    int pop;
    int col;
    int row;
    struct district ***gw;
    struct person **people;
};

typedef struct gw_struct *GW; 
```

然后在一个函数中......

```
GW world;
struct district ***array = malloc(nrows*sizeof(struct district**));
    int i, j;
for (i = 0; i < nrows; i++)
{
    array[i] = malloc(ncols*sizeof(struct district*));
    for (j = 0; j<ncols; j++)
    {
            array[i][j] = malloc(sizeof(struct district));
    }
}   

world->gw = array; //this is the line that gives the seg fault 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T05:51:08.543

您的代码没有初始化`world`，因此当您尝试在该行中取消引用它时，它可能会指向某个地方的杂草。确保在使用变量之前对其进行初始化。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-10-30T02:35:54.963

您的问题在第一行`GW world;`，这在内存中没有正确引用。

这应该有效：

```
GW *world;
struct district ***array = malloc(nrows*sizeof(struct district**));
    int i, j;
for (i = 0; i < nrows; i++)
{
    array[i] = malloc(ncols*sizeof(struct district*));
    for (j = 0; j<ncols; j++)
    {
            array[i][j] = malloc(sizeof(struct district));
    }
}   

world->gw = array; //this is the line that gives the seg fault 
```

您的 World 变量声明需要是一个指针，这将正确引用您在内存中初始化的结构，并允许您进行分配。