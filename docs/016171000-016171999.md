# StackOverflow 问答 16171000-16171999

# selenium - 如何使用 Selenium ID 验证整个网站

> ID：16171007
> 
> 赞同：0
> 
> 时间：2013-04-23T13:46:21.637
> 
> 标签：selenium, selenium-ide

我想验证网站的所有页面是否满足以下条件：

```
assertElementPresent --> div.box
assertElementPresent --> #footer
assertElementNotPresent --> msg-error 
```

换句话说，它有一个页眉、一个页脚，并且没有任何错误消息。

好吧，我可以使用 Selenium ID 来做到这一点，但是逐个链接或逐个命令添加这些命令。我想知道，是否有任何方法可以为整个网站配置这 3 个命令，而不是每个链接一个一个添加。

希望很清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-06T16:18:40.043

每次导航后，这些命令很可能需要放入您的脚本中。

我可以建议的最好的事情是，当您录制脚本时，在您录制的每个链接导航之后放置一个“等待标题”命令。这样，您应该能够在文本编辑器中打开脚本本身，然后在等待标题时进行查找和替换。所以例如

```
<tr>
    <td>clickAndWait</td>
    <td>css=link</td>
    <td></td>
</tr>
<tr>
    <td>waitForTitle</td>
    <td>page title</td>
    <td></td>
</tr> 
```

然后查找并替换：

```
<tr>
    <td>waitForTitle</td> 
```

和

```
<tr>
    <td>assertElementPresent</td>
    <td>div.box</td>
    <td></td>
</tr>
<tr>
    <td>assertElementPresent</td>
    <td>#footer</td>
    <td></td>
</tr>
<tr>
    <td>assertElementPresent</td>
    <td>msg-error</td>
    <td></td>
</tr>
<tr>
    <td>waitForTitle</td> 
```

# activesync - 在 ActiveSync 中为电子邮件设置标志

> ID：16171010
> 
> 赞同：0
> 
> 时间：2013-04-23T13:46:36.230
> 
> 标签：activesync

尝试使用 ActiveSync 为电子邮件设置状态标志。以下是我的要求。我收到状态 6。我的请求有什么问题？

**要求**

```
<Sync xmlns="AirSync:" xmlns:email="Email:" xmlns:tasks="Tasks:" >
 <Collections>
     <Collection>
         <SyncKey>648263900</SyncKey>
         <CollectionId>11</CollectionId>
         <GetChanges>0</GetChanges>
         <Commands>
             <Change>
                 <ServerId>11:2</ServerId>
                 <ApplicationData>
                      <email:Flag>
                         <email:Status>1</email:Status>
                         <email:FlagType>Follow Up</email:FlagType>
                         <tasks:StartDate>113-04-23T05:30:00.000Z</tasks:StartDate>
                         <tasks:UTCStartDate>113-04-23T05:30:00.000Z</tasks:UTCStartDate>
                         <tasks:DueDate>113-04-26T05:30:00.000Z</tasks:DueDate> 
                         <tasks:UTCDueDate>113-04-26T05:30:00.000Z</tasks:UTCDueDate>
                     </email:Flag>
                 </ApplicationData>
             </Change>
         </Commands>
     </Collection>
 </Collections> 
```

**我收到的回复**

```
 <?xml version="1.0"?>
<!DOCTYPE ActiveSync PUBLIC "-//MICROSOFT//DTD ActiveSync//EN" "http://www.microsoft.com/">
<Sync xmlns="AirSync:">
    <Collections>
        <Collection>
            <SyncKey>648263900</SyncKey>
            <CollectionId>11</CollectionId>
            <Status>1</Status>
            <Responses>
                <Change>
                    <ServerId>11:2</ServerId>
                    <Status>6</Status>
                </Change>
            </Responses>
        </Collection>
    </Collections>
</Sync> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-26T11:35:34.923

更改电子邮件：FlagType 从`Follow Up`为`for Follow Up`。

并添加`</Sync>`在最后添加。

尝试：

```
<?xml version="1.0" encoding="utf-8"?>
<Sync xmlns="AirSync:" xmlns:email="Email:" xmlns:tasks="Tasks:" >
 <Collections>
     <Collection>
         <SyncKey>648263900</SyncKey>
         <CollectionId>11</CollectionId>
         <GetChanges>0</GetChanges>
         <Commands>
             <Change>
                 <ServerId>11:2</ServerId>
                 <ApplicationData>
                      <email:Flag>
                         <email:Status>1</email:Status>
                         <email:FlagType>for Follow Up</email:FlagType>
                         <tasks:StartDate>113-04-23T05:30:00.000Z</tasks:StartDate>
                         <tasks:UTCStartDate>113-04-23T05:30:00.000Z</tasks:UTCStartDate>
                         <tasks:DueDate>113-04-26T05:30:00.000Z</tasks:DueDate> 
                         <tasks:UTCDueDate>113-04-26T05:30:00.000Z</tasks:UTCDueDate>
                     </email:Flag>
                 </ApplicationData>
             </Change>
         </Commands>
     </Collection>
 </Collections>
</Sync> 
```

查看更多：[MS-ASEMAIL](http://msdn.microsoft.com/en-us/library/ee218806%28v=exchg.80%29.aspx)

# windows-phone-8 - 我可以在诺基亚 Lumia 620 中自由部署 windows phone 应用吗

> ID：16171017
> 
> 赞同：0
> 
> 时间：2013-04-23T13:46:57.390
> 
> 标签：windows-phone-8

我有windows phone 8，我想开发应用程序并自由部署。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T15:09:05.190

是的，最多允许在您的手机中安装 10 个开发者应用程序或未签名的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-30T13:58:43.777

可以将任意数量的未签名 xap 文件加载到 Windows Phone 设备上，前提是它已完全解锁（互操作解锁）。如何让您的设备达到该状态是一个挑战。到目前为止，只有三星 ATIV S 被解锁到 Windows Phone 8 的那个级别。

完全解锁手机后，您实际上可以自由支配您的设备，从而能够完全访问注册表或文件系统等组件。

三星和 LG 都在他们的手机上提供了后门诊断工具，便于进行所需的注册表更改以完全解锁他们的手机。尚未发现其他品牌是否提供此类功能。

如果您是一名软件开发人员，您可能希望在 ATIV S 消失之前获得它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-18T05:22:27.120

我假设您想要做的是旁加载应用程序。为此，您需要先开发者解锁您的 lumia620，这显然会花费您。请查看开发者解锁手机与微软的价格。

除此之外，如果不是通过应用商店，就不可能自由加载应用程序。

希望我的回答对你有所帮助。

# apache - 使用ip白名单的条件proxypass ajp规则

> ID：16171018
> 
> 赞同：0
> 
> 时间：2013-04-23T13:46:59.593
> 
> 标签：apache, conditional, config, ajp, proxypass

我已经成功创建了一个可以正常工作的 ProxyPass ajp 规则，但是现在我想使用 ip-whitelist 来限制某些 url 的访问。换句话说，当某人来自不在白名单上的 IP 时，请求不应被代理通过（理想情况下，应该发出某种访问被拒绝）

我无法控制我代理传递到的机器，所以我不能将 ip-whitelist 放在该机器的配置上。这就是为什么我试图在具有 proxypass 规则的同一台机器上配置它。

使用“允许来自”规则定义 <Location /path> 不起作用，因为该请求仍然是通过代理传递的。我想这只是意味着 proxypass 规则先于位置规则。

我试图通过根据远程地址设置一个环境变量来解决它*（因为那样我可以将非白名单 ips 代理到不存在的 url - 不漂亮，但它会实现目标）*，但似乎 proxypass规则不适用于环境变量。像这样简单的事情：

```
SetEnv custom_proxypath=/
ProxyPass %{ENV:custom_proxypath} ajp://10.50.40.21:8009/
ProxyPassReverse %{ENV:custom_proxypath} ajp://10.50.40.21:8009/ 
```

不起作用。尽管

```
ProxyPass / ajp://10.50.40.21:8009/
ProxyPassReverse / ajp://10.50.40.21:8009/ 
```

完美运行。

我别无选择。有没有其他人建议如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-05T03:06:15.137

我今天学到了这个...... SetEnv 在请求周期中的应用比 ProxyPass*晚*，所以它没有及时设置。但是，SetEnvIf 应用得足够早，使用 RewriteCond/RewriteRule 设置的环境变量也是如此。您应该能够将其重构为始终为 true 的 SetEnvIf，这样就可以解决问题。

# c++ - 迭代器和 STL 容器

> ID：16171020
> 
> 赞同：2
> 
> 时间：2013-04-23T13:47:02.923
> 
> 标签：c++, templates, stl

我需要制作一些特定的构造函数来获取两个迭代器：开始迭代器和结束迭代器。

我有一些代码及其作品：

```
#include <iostream>
#include <vector>

using namespace std;

template<typename T>
class A
{
public:
    T a[10];
    typename std::vector<T>::iterator itStart, itEnd;
    A(typename vector<T>::iterator itStart, typename vector<T>::iterator itEnd):itStart(itStart),itEnd(itEnd){}

    void see()
    {
        int i=0;
        while(itStart != itEnd)
        {
            cout<<*itStart<<endl;
            a[i] = *itStart;
            itStart++;
            i++;
        }
    }
};

template <typename Iterator>
double Sum( Iterator begin, Iterator end );

int main()
{
    cout << "Hello world!" << endl;
    vector<int> v;
    v.push_back(1);
    v.push_back(1);
    v.push_back(2);
    v.push_back(3);

    class A<int> a(v.begin(),v.end());
    a.see();
    return 0;
} 
```

但我想让构造函数参数适用于所有 STL 容器（如 Set、List、Map 等）和普通数组（普通指针）。那么我可以用通用模板的方式制作它吗？像这样的东西：

```
template<typename T>
class A
{
public:
    iterator<T> itStart, itEnd;
    A(iterator<T> itStart, iterator<T> itEnd):itStart(itStart),itEnd(itEnd){}

    void see()
    {
        while(itStart != itEnd)
        {
            cout<<*itStart<<endl;
            itStart++;
        }
    }
}; 
```

我知道上面的代码是错误的，但我想解释一下我的想法。

当然我可以重载构造函数，但我太懒了。STL 容器太多。有一些模板方法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:55:04.710

显然，您需要使迭代器类型成为您的类的模板参数

```
template<class T, class Iter>
class A
{
   Iter first, last;
   A(Iter first, iter last):first(first), last(last){}
}; 
```

但是现在显式指定模板参数变得不舒服

```
A<int, vector<int>::iterator > a; 
```

为避免这种情况，只需创建一个工厂函数

```
 template<class T, class Iter>
   A<T, Iter> make_A(Iter first, iter last)
   {
       return A<T, Iter>(first, last);  
   } 
```

现在，您可以使用该函数，而不是直接创建 A 的对象

```
 auto my_A =  make_A<int>(v.begin(), v.end()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:59:00.957

查看 STL 的其中一项内容，例如[`std::fill`](http://en.cppreference.com/w/cpp/algorithm/fill)：

```
template< class ForwardIt, class T >
void fill( ForwardIt first, ForwardIt last, const T& value ); 
```

我们可以受到启发：

```
template<typename ITR, typename T>
class A
{
  A(ITR itStart, ITR itEnd):itStart(itStart),itEnd(itEnd){}
  ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T14:29:14.367

也许您可以利用输入序列 (iseq) 的概念。

输入序列由一对迭代器（开始和结束）表示。

当然，您需要创建所有接受 iseq 而不是一对迭代器的 STL 算法的重载。

然后您的示例可以只使用 for_each （重载以接受 iseq）。

示例代码可在 TC++PL 第 3 版 (Stroustrup) 第 18.3.1 节中找到。

# android - 没有 JIT 的 Android 设备

> ID：16171035
> 
> 赞同：8
> 
> 时间：2013-04-23T13:48:08.723
> 
> 标签：android, performance, device, jit

我正在通过开发者网站关注[性能提示。](http://developer.android.com/training/articles/perf-tips.html)提到了没有 JIT 的 android 设备。但我搜索了 jit-less 设备，但找不到一个广泛的列表。

> 带有和不带有 JIT 的设备之间也存在巨大差异：带有 JIT 的设备的最佳代码并不总是适合没有 JIT 的设备的最佳代码。

或者

> 在没有 JIT 的设备上，确实通过具有确切类型而不是接口的变量调用方法稍微更有效

问题是哪些设备没有 JIT，哪些设备有？在主要针对 jit 设备进行编程时，最佳思维是什么，或者它并不重要？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-23T13:56:17.667

基于[这篇文章](http://android-developers.blogspot.com/2010/05/dalvik-jit.html)，JIT 被添加到 Android 2.2 (Froyo) 中的 Dalvik VM 中。这意味着 Cupcake (1.5)、Donut (1.6) 和 Eclair (2.1) 没有它。[Android Dashboard](http://developer.android.com/about/dashboards/index.html)告诉我，只有不到 2% 的设备没有 JIT。

就个人而言，我不会花一分钟时间考虑没有 JIT 的设备。一方面，那些旧设备无论如何都会有更小的屏幕和更少的资源，并且不是我的应用程序的目标。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T13:55:49.643

从命令提示符转到 android sdk 平台工具。从那里

```
adb shell
dalvikvm -h 
```

在该行的底部会写下 Configured with: ..... jit.........

# python - 动态模型MultipleChoiceField

> ID：16171036
> 
> 赞同：0
> 
> 时间：2013-04-23T13:48:13.253
> 
> 标签：python, django, django-models

我有一个包含不同工作类型及其 ID 的数据表。我希望所有类型都显示为 broswer 中的 mMltipleChoiceField ，所以我尝试了

```
 keyword=forms.ModelMultipleChoiceField(required=False, queryset=JobGenre.objects.all()) 
```

它不会显示工作类型，而是在所有选项中显示“JobGenre.object”。在这种情况下我应该怎么做？

我从选择工作类型中得到的错误：'而且我必须至少选择一个选项，似乎 required=False 也不起作用

```
 ValueError at /register/
  Cannot assign "[<JobGenre: rengøring>]": "Worker.keyword" must be a "JobGenre" instance.

 Request Method:

 POST
 Request URL:

 http://127.0.0.1:8000/register/

 Django Version:

  1.4.3 
```

异常类型：

值错误

```
 Exception Value:

 Cannot assign "[<JobGenre: rengøring>]": "Worker.keyword" must be a "JobGenre" instance. 

 Exception Location:

 C:\Python27\lib\site-packages\django\db\models\fields\related.py in __set__, line 366

 Python Executable:

 C:\Python27\python.exe

 Python Version:

 2.7.3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T13:54:24.480

您`__unicode__`对 JobGenre 有定义吗？

```
class JobGenre(models.Model):

    name = models.CharField()

    def __unicode__(self):
        return self.name 
```

# android - 使用 SyncAdapter- Calendar API Android 插入新日历

> ID：16171040
> 
> 赞同：3
> 
> 时间：2013-04-23T13:48:29.637
> 
> 标签：android, sync, android-calendar

我正在尝试使用 Android Calendar Provider API 将新日历添加到我的 Google 帐户。
正如[API](http://developer.android.com/guide/topics/providers/calendar-provider.html)中所写，您必须实现 SyncAdapter 才能创建新日历。

所以，如果我理解正确，我“只是”必须在 CalendarContract.Calendars 表中使用我的同步适配器添加一个新条目——但我不知道该怎么做。

不幸的是，我找不到任何有关如何创建新日历的示例。（是的，已经用谷歌搜索了很多）。

即使朝着正确的方向迈出一步，我也会感激不尽。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-01T19:56:38.400

目前这是不可能的。我尝试了不同的方法，包括 SyncAdapter，投入了大量时间但没有任何运气。检查这个答案：[https ://stackoverflow.com/a/19734278/237232](https://stackoverflow.com/a/19734278/237232)

# java - 使用 .getClass() 是否被视为糟糕的设计？

> ID：16171041
> 
> 赞同：4
> 
> 时间：2013-04-23T13:48:29.693
> 
> 标签：java, oop

我目前正在实现一个函数，使用超类作为参数。

例如：

```
private void foo(Parent parent) {
    if(parent.getClass() == Child1.class) {
        Child1 c1 = (Child1) parent;
        System.out.println(c1.getChild1Attribute());
    }
    else if(parent.getClass() == Child2.class) {
        Child2 c2 = (Child2) parent;
        System.out.println(c1.getChild2Attribute());
    }
    else if(parent.getClass() == Parent.class) {
        System.out.println(parent.getParentAttribute());
    }
} 
```

这是一个坏主意吗？

我在这里读过一些帖子说使用`getClass()`or`instanceof`是不好的设计：

*   [为什么子类中的 super.getClass() 返回子类名称](https://stackoverflow.com/questions/9790210/why-super-getclass-in-a-subclass-returns-subclass-name)
*   [如何确定对象的类（在 Java 中）？](https://stackoverflow.com/questions/541749/how-to-determine-an-objects-class-in-java)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T13:51:17.340

这不一定是一个糟糕的设计，但它表明可能正在发生一些错误。

您的具体情况看起来很糟糕，因为似乎单个方法可以识别多个类。这可能表明您错过了过载的可能性，或者有机会使用多种调度模式之一：

```
// Three overloads - one per target class
private void foo(Parent obj) {
}
private void foo(Child1 obj) {
}
private void foo(Child2 obj) {
} 
```

常见的多重调度模式之一是[*访问者模式*](http://en.wikipedia.org/wiki/Visitor_pattern)，看看它是否适用于您正在解决的问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-23T13:50:45.870

是的，这是糟糕的设计。

相反，您应该在超类中创建一个抽象方法并在每个子类中覆盖它以执行所需的操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T13:52:41.037

是的，这是糟糕设计的标志。这将处理不同类的复杂性放在一个类中，而不是将相关知识封装在适当的类本身中。当您向层次结构中添加更多类时，这会受到影响，因为编译器不会提醒您为`foo`.

更好的版本是

```
private void foo(Parent parent){
    System.out.println(parent.getFooParentAttribute());
} 
```

然后`getFooParentAttribute`在每个类上实现。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-23T13:52:38.113

**首选`instanceof`方法**

[**乔什·布洛赫谈设计**](http://www.artima.com/intv/bloch17.html)

> 我赞成 instanceof 方法的原因是，当您使用 getClass 方法时，您会受到限制，即对象只能与同一类、相同运行时类型的其他对象相等。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T13:58:05.783

您的方法按原样存在两个问题。首先，假设您添加一个新的子类`Parent`, `Child3`。您的任何案例都不涵盖此内容，因此它根本不打印任何内容。如果您添加了 , 的新子类，情况也是`Child1`如此`ChildOfChild1`。那也不会被覆盖。

如果您`instanceof`改为使用，则 then`ChildOfChild1`将显示为 的实例，`Child1`并且`Child3`将是 . 的实例`Parent`。

但通常，您想要完全避免这种模式的原因是所有这些情况都可能令人惊讶。通常更好的是写

```
void foo(Parent p) {...} 
```

并将通用代码放在那里，然后对于任何特殊情况，创建一个

```
void foo(Child1 c) {...} 
```

这使得正在发生的事情更清楚：如果您看到这两个方法，您就会知道`Child1`（及其子类）有一些特殊的代码，而`Parent`任何其他子类都以相同的方式处理。

# css - background:url(../images/nameofimage.jpg); 有什么区别？和背景：url（图像/nameofimage.jpg）；？

> ID：16171042
> 
> 赞同：1
> 
> 时间：2013-04-23T13:48:32.533
> 
> 标签：css

我十有八九会写：

```
background:url(../images/nameofimage.jpg); 
```

但是，我刚刚遇到了一个问题，我的 CSS 仅在语法为：

```
background:url(images/nameofimage.jpg); 
```

我几乎可以肯定，在我突然需要在 CSS 中添加句点和斜杠之前遇到过这种情况。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T13:55:40.330

假设你有一个这样的目录结构：

```
~ Root
 - Styles
  * site.css
 - Images
  * nameofimage.jpg 
```

然后它不可能写在你的 style.css 中 `background:url(images/nameofimage.jpg);`，因为你搜索`~/styles/images/nameofimage.jpg`并且这个文件没有退出。

当你写`background:url(../images/nameofimage.jpg);`你回去一个文件夹然后搜索`images/nameofimage.jpg`所以它去文件`~images/nameofimage.jpg`。

您可以在`../`文件夹中浏览回来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T13:51:38.517

当您说`background:url(../images/nameofimage.jpg);`这意味着您指向父目录图像目录时。

当您说`background:url(images/nameofimage.jpg);`这意味着您指向同一文件夹中的图像目录（您的 css 所在的文件夹）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T13:49:59.620

`'../'`意味着你上一个目录

# c++ - WINAPI 你自己的键盘 onPress 和 onReleased

> ID：16171043
> 
> 赞同：0
> 
> 时间：2013-04-23T13:48:35.330
> 
> 标签：c++, keyboard, window

目前，我正在创建自己的函数 onPress 和 onRelease。但是，我的 onRelease 函数有问题。显然，即使我没有释放键盘，我的 onRelease 也会继续触发。

我怀疑这与 CPU 内部的周期数有关，但我不确定这个理论。不知何故，也许循环比我的帧慢，那为什么 PeerMessage 返回 false？因为没有触发任何事件。

解决方案： **在 WinProc 函数下创建一个名为 WM_KEYUP 的新案例。一旦用户离开按钮，此事件将触发。它有助于解决CPU内部发出的周期数。**

*注意：我已经更新了我的代码细节。

描述。窗口编程我有两个存储我的键盘数据的 std::array 1) InputCurr 2) InputPrev

```
std::array<char, 256> inputPrev;
std::array<char, 256> inputCurr;

While(TRUE) {
    std::copy(InputCurr.begin(), InputCurr.end(), InputPrev.begin());
    inputCurr.fill(0);

    while(PeekMessage (&uMsg, NULL, 0, 0, PM_REMOVE))
    {
        TranslateMessage (&uMsg);
        DispatchMessage (&uMsg);
    }

    if(onReleased(x030))  //Button 0
    //do something
}

char onReleased(char key)
{
    return (inputCurr[key] && !inputPrev[key])? 1 : 0;
}

void VEInputMessage(WPARAM key)
{
    inputCurr[key]= 1;  //Set to true of the keyboard key
}

LRESULT CALLBACK WinProc(HWND hWnd, UINT msg, WPARAM wParam, LPARAM lParam) 
{
    HDC dc;           /* device context */
    PAINTSTRUCT ps;   /* the paint struct */
    RECT rect;

    UNREFERENCED_PARAMETER(rect);

    switch (msg)
    {
    /* when the window is created */
    case WM_CREATE:
        break;

    /* when the rectangle is drawn */
    case WM_LBUTTONDOWN:
            break;

    case WM_MOUSEMOVE:
        break;

    case WM_PAINT:
        dc = BeginPaint(hWnd, &ps);
        EndPaint(hWnd, &ps);
        break;

    /* When it's time for the window to be closed and removed */
    case WM_DESTROY:
        PostQuitMessage(0);
        break;

    case WM_KEYDOWN:
        VEINPUT::VEInputMessage(wParam);  //Updated the input key 
        if(wParam == AEVK_ESCAPE)
            PostQuitMessage(0);
        break;

    default:
        return DefWindowProc(hWnd, msg, wParam, lParam);
    }
    return 0;
} 
```

# codeigniter - 数据可用于 codeigniter 中的所有视图

> ID：16171046
> 
> 赞同：16
> 
> 时间：2013-04-23T13:48:39.383
> 
> 标签：codeigniter

我有一个变量，包含应该存在于整个站点中的数据。我没有将这些数据传递给每个控制器的每个视图，而是想知道是否有一种方法可以使这些数据可用于站点中的每个视图。

钯。将此数据存储为会话变量/ci 会话 cookie 不是一种选择。

非常感谢。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-23T14:07:06.747

创建一个`MY_Controller.php`文件并将其保存在 application/core 文件夹中。在其中，类似：

```
class MY_Controller extends CI_Controller {

   public $site_data;

   function __construct() {
       parent::__construct();
       $this->site_data = array('key' => 'value');
   }
} 
```

在整个控制器中，视图`$this->site_data`现在都可用。请注意，要使其正常工作，所有其他控制器都需要扩展`MY_Controller`而不是`CI_Controller`.

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-04-23T14:14:08.190

您需要扩展 CI_Controller 以创建基本控制器：

[https://www.codeigniter.com/user_guide/general/core_classes.html](https://www.codeigniter.com/user_guide/general/core_classes.html)

核心/MY_Controller.php

```
<?php

class MY_Controller extend CI_Controller {

     public function __construct() {
         parent::__construct();

         //get your data
         $global_data = array('some_var'=>'some_data');

         //Send the data into the current view
         //http://ellislab.com/codeigniter/user-guide/libraries/loader.html
         $this->load->vars($global_data);

     }  
} 
```

控制器/welcome.php

```
 class Welcome extend MY_Controller {
      public function index() {
          $this->load->view('welcome');
      }
 } 
```

意见/welcome.php

`var_dump($some_var);`

注意：要在您的函数或控制器中获取此变量，您可以使用`$this->load->get_var('some_var')`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-08-20T22:17:59.243

在**application/config/autoload.php中设置**

```
$autoload['libraries'] = array('config_loader'); 
```

创建**应用程序/库/Config_loader.php**

```
defined('BASEPATH') OR exit('No direct script access allowed.');

class Config_loader
{
    protected $CI;

    public function __construct()
    {
        $this->CI =& get_instance(); //read manual: create libraries

        $dataX = array(); // set here all your vars to views

        $dataX['titlePage'] = 'my app title';
        $dataX['urlAssets'] = base_url().'assets/';
        $dataX['urlBootstrap'] = $dataX['urlAssets'].'bootstrap-3.3.5-dist/';

        $this->CI->load->vars($dataX);
    }
} 
```

对你的**看法**

```
<title><?php echo $titlePage; ?></title>
<!-- Bootstrap core CSS -->
<link href="<?php echo $urlBootstrap; ?>css/bootstrap.min.css" rel="stylesheet">
<!-- Bootstrap theme -->
<link href="<?php echo $urlBootstrap; ?>css/bootstrap-theme.min.css" rel="stylesheet"> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-16T13:28:07.837

如果这不是变量（值不断变化），那么我建议在应用程序目录的 config 目录下的 constant.php 文件中创建一个常量，如果它是一个不断变化的变量，那么我建议在应用程序文件夹下的核心文件夹（如果不存在，请继续创建文件夹“核心”）。需要对此处提到的其他控制器进行一些更改：使用“CI_Controller”类扩展您的新控制器。例子

**open-php-tag if ( !defined('BASEPATH')) exit('不允许直接脚本访问'); 类 LD_Controller 扩展 CI_Controller { } close-php-tag**

这里**LD_**是我的自定义关键字，如果要更改，可以在 config.php 文件中的第 112 行下更改它，如下所示： $config['subclass_prefix'] = 'LD_'; 并在所有控制器中将此类扩展为“class Mynewclass extends LD_Controller.. 在 LD_controller 中，您必须编写要定义变量/值数组的方法，并在整个应用程序中调用该数组，如下所示: 定义变量 : var $data = array(); 通过 Model 类从 db 获取值的方法：

```
function getbooks()
{
   $books =   $this->mybooks_model->getbooks(); //array of records
   $this->data = array('books'=>$books);
} 
```

* * *

在视图中调用此变量： print_r($this->data['books']);); 你会得到所有的数组值......在这里我们必须确保至少需要传递一个“$data”参数，如果没有问题，你可以将这个 $data 参数定义到视图中，如下所示：$this->加载->查看（'我的书店'，$数据）；

然后它工作得非常好，，，喜欢分享......有一个有趣的工作朋友

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T14:27:14.980

您可以使用 $this->load->vars('varname', $data);[ or load data at 1st view only] onse 并在此之后的任何加载视图中使用

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-18T18:47:16.073

在控制器中使用会话

`$this->session->set_userdata('data');`

然后将它们显示在您的视图中

`$this->session->userdata('data');`

或者在基本视图文件中包含一个页面，例如 index.php

`include "page.php";`

然后在 page.php 中，

添加`$this->session->userdata('data');`到任何元素或 div

然后这将显示在您的所有视图中

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-11-15T16:04:50.010

您可以使用 MY_loader 覆盖视图加载器。我在遗留系统上使用它来将 csrf 令牌添加到页面中，其中视图中的某些表单不使用内置表单生成器。这样，您不必追溯更改所有控制器以从 CI_Controller 调用 MY_Controller。

将以下内容另存为 application/core/MY_Loader.php

```
<?php
class MY_Loader extends CI_Loader {
    /**
     * View Loader
     *
     * Overides the core view function to add csrf token hash into every page.
     *
     * @author   Tony Dunlop
     *
     * @param   string  $view   View name
     * @param   array   $vars   An associative array of data
     *              to be extracted for use in the view
     * @param   bool    $return Whether to return the view output
     *              or leave it to the Output class
     * @return  object|string
     */
    public function view($view, $vars = array(), $return = FALSE)
    {
        $CI =& get_instance();
        $vars['csrf_token'] = $CI->security->get_csrf_hash();
        return $this->_ci_load(array('_ci_view' => $view, '_ci_vars' => $this->_ci_prepare_view_vars($vars), '_ci_return' => $return));
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-06-23T16:32:09.957

我阅读了所有答案，但恕我直言，最好的方法是通过钩子：

1.  创建钩子，让我们获取新消息，例如：

    ```
    class NewMessages {
        public function contact()
        {
            // Get CI instance CI_Base::get_instance();
            $CI = &get_instance(); // <-- this is contoller in the matter of fact
            $CI->load->database();

            // Is there new messages?
            $CI->db->where(array('new' => 1));
            $r = $CI->db->count_all_results('utf_contact_requests');

            $CI->load->vars(array('new_message' => $r));
        }
    } 
    ```

2.  将其附加到某些流点，例如“post_controller_constructor”。这样，每次实例化任何控制器时都会加载它。

    ```
    $hook['post_controller_constructor'][] = array(
        'class'    => 'NewMessages',
        'function' => 'contact',
        'filename' => 'NewMessages.php',
        'filepath' => 'hooks',
        'params'   => array(),
    ); 
    ```

3.  现在，我们可以在每个视图或模板中访问我们的变量 $new_message。

就这么简单:)

# sql - 查找没有匹配条件的记录

> ID：16171048
> 
> 赞同：3
> 
> 时间：2013-04-23T13:48:43.923
> 
> 标签：sql, sql-server, tsql, group-by

我知道这个标题是模棱两可的，这个问题之前可能已经被问过，但我不知道如何总结我的问题以便能够搜索它或写一个更好的标题！这可能很简单，但它不断出现，我无法理解它。所以这里有一个例子：

假设我有这张桌子`Lunch`：

![谁中午吃了什么？](https://i.stack.imgur.com/qMhqA.png)

如果我想查询午餐时吃苹果的每个人，这很容易，我只需使用

```
SELECT [Name] FROM [Lunch] WHERE [Lunch Item] = 'Apple' GROUP BY [Name] 
```

但是，如果我想得到一份午餐没有苹果的人的名单怎么办？如果我使用

```
SELECT [Name] FROM [Lunch] WHERE [Lunch Item] <> 'Apple' GROUP BY [Name] 
```

结果仍将包括确实有苹果的人，因为他们也有其他不是苹果的东西。

正如我所说，我觉得这一定是一个简单的查询，但我不知道语法是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T13:50:53.140

我更喜欢使用聚合来解决这些问题：

```
select [name]
from lunch
group by name
having sum(case when [lunch item] = 'Apple' then 1 else 0 end) = 0; 
```

这种结构是相当普遍的。如果你想要一个有苹果和葡萄但没有橙子的人，你可以这样做：

```
select [name]
from lunch
group by name
having sum(case when [lunch item] = 'Apple' then 1 else 0 end) > 0 and
       sum(case when [lunch item] = 'Oranges' then 1 else 0 end) > 0 and
       sum(case when [lunch item] = 'Grapes' then 1 else 0 end) = 0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T13:50:56.080

如果你有一张供人使用的桌子：

```
SELECT  *
FROM    people
WHERE   name NOT IN
        (
        SELECT  name
        FROM    lunch
        WHERE   lunchItem = 'apple'
        ) 
```

如果您不这样做：

```
SELECT  name
FROM    lunch
EXCEPT
SELECT  name
FROM    lunch
WHERE   lunchItem = 'apple' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T13:52:37.397

这是第三种方法，因为为什么不呢！

```
SELECT DISTINCT Name 
FROM Lunch L
WHERE NOT EXISTS (SELECT 1 FROM Lunch WHERE Name = L.Name AND [Lunch Item] = 'Apple') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-23T13:53:36.980

使用`NOT EXISTS`方法

```
SELECT  *
FROM    Lunch a
WHERE   NOT EXISTS
(
    SELECT  1
    FROM    Lunch b
    WHERE   a.Name = b.Name AND
            b.Item = 'Apple'
) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-23T13:51:58.753

如果您想使用 group by 子句，请使用类似的内容。如果您只想要人员列表，还有许多其他方法。

```
SELECT [Name]
FROM [Lunch]
GROUP BY [Name]
HAVING SUM(CASE WHEN [Lunch Item] = 'Apple' then 1 else 0 end) = 0 --people who had a total amount of 0 apples for lunch 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-23T13:55:34.047

使用`NOT IN`运算符排除所有拥有苹果的人。

```
SELECT * FROM Lunch
WHERE Name NOT IN ( SELECT Name
                    FROM Lunch
                    WHERE LunchItem ="Apple"
                   ) 
```

我不认为`GROUP BY`条款是必需的。

# android - Android Google Maps Activity 无法启动

> ID：16171052
> 
> 赞同：1
> 
> 时间：2013-04-23T13:49:00.057
> 
> 标签：android, android-layout, android-intent, google-maps-android-api-2

我正在开发一个 Android 应用程序，当从列表中选择一个旅游时，它应该启动一个 MapView。但是，每次我尝试通过 Intent 打开此 MapView 时，该应用程序似乎都会崩溃......

这是我的代码：

MainActivity.java：

```
public class MainActivity extends Activity {
    public final static String SELECTED_TOUR = "com.me.tourapp.TOUR";
    public static TourListAdapter tourListAdapter;
    private static int selectedTour;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        ...
    }

    public void startTour(View view) {
        Intent intent = new Intent(view.getContext(), TourMapActivity.class);
        intent.putExtra(SELECTED_TOUR, selectedTour);
        startActivity(intent);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        ...
    }

} 
```

TourMapActivity.java:

```
public class TourMapActivity extends Activity {

    @SuppressLint("NewApi")
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_tour_map);
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
            getActionBar().setDisplayHomeAsUpEnabled(true);
        }

        //check if tour is passed via intent (test):
        Intent intent = getIntent();
        int tourIndex = Integer.parseInt(intent.getStringExtra(MainActivity.SELECTED_TOUR));
        Toast.makeText(getApplicationContext(), "the tour: "+ tourIndex, Toast.LENGTH_LONG).show();
    }
} 
```

activity_tour_map.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <fragment
        android:id="@+id/map"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        class="com.google.android.gms.maps.MapFragment" />

</LinearLayout> 
```

以及清单中的一些片段：

```
<permission
    android:name="com.me.tourapp.permission.MAPS_RECEIVE"
    android:protectionLevel="signature"/>
<uses-permission android:name="com.me.tourapp.permission.MAPS_RECEIVE"/>
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>

<uses-library android:name="com.google.android.maps" />

<meta-data
        android:name="com.google.android.maps.v2.API_KEY"
        android:value="AIzaSyBqs_*****"/> 
```

我还将 android-support-v4.jar 包含到 java 构建路径中，并安装并导入了 google play 服务...

我只是不知道我在哪里犯了错误......

编辑：我添加了 logcat：

```
E/AndroidRuntime(28248): FATAL EXCEPTION: main
E/AndroidRuntime(28248): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.hansvn.plaktour/com.hansvn.plaktour.TourMapActivity}: android.view.InflateException: Binary XML file line #7: Error inflating class fragment
E/AndroidRuntime(28248):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2100)
E/AndroidRuntime(28248):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2125)
E/AndroidRuntime(28248):    at android.app.ActivityThread.access$600(ActivityThread.java:140)
E/AndroidRuntime(28248):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1227)
E/AndroidRuntime(28248):    at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(28248):    at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime(28248):    at android.app.ActivityThread.main(ActivityThread.java:4898)
E/AndroidRuntime(28248):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(28248):    at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime(28248):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
E/AndroidRuntime(28248):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
E/AndroidRuntime(28248):    at dalvik.system.NativeStart.main(Native Method)
E/AndroidRuntime(28248): Caused by: android.view.InflateException: Binary XML file line #7: Error inflating class fragment
E/AndroidRuntime(28248):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:704)
E/AndroidRuntime(28248):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
E/AndroidRuntime(28248):    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
E/AndroidRuntime(28248):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
E/AndroidRuntime(28248):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
E/AndroidRuntime(28248):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:308)
E/AndroidRuntime(28248):    at android.app.Activity.setContentView(Activity.java:1924)
E/AndroidRuntime(28248):    at com.hansvn.plaktour.TourMapActivity.onCreate(TourMapActivity.java:16)
E/AndroidRuntime(28248):    at android.app.Activity.performCreate(Activity.java:5206)
E/AndroidRuntime(28248):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1083)
E/AndroidRuntime(28248):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2064)
E/AndroidRuntime(28248):    ... 11 more
E/AndroidRuntime(28248): Caused by: android.support.v4.app.Fragment$InstantiationException: Unable to instantiate fragment com.google.android.gms.maps.SupportMapFragment: make sure class name exists, is public, and has an empty constructor that is public
E/AndroidRuntime(28248):    at android.support.v4.app.Fragment.instantiate(Fragment.java:401)
E/AndroidRuntime(28248):    at android.support.v4.app.Fragment.instantiate(Fragment.java:369)
E/AndroidRuntime(28248):    at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:272)
E/AndroidRuntime(28248):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:676)
E/AndroidRuntime(28248):    ... 21 more
E/AndroidRuntime(28248): Caused by: java.lang.ClassNotFoundException: com.google.android.gms.maps.SupportMapFragment
E/AndroidRuntime(28248):    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
E/AndroidRuntime(28248):    at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
E/AndroidRuntime(28248):    at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
E/AndroidRuntime(28248):    at android.support.v4.app.Fragment.instantiate(Fragment.java:391)
E/AndroidRuntime(28248):    ... 24 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T14:28:44.840

您将 API V2 与 Google Maps 的 API V1 混为一谈。所以首先决定你要使用哪个 API。

接下来，如果您决定使用 API V2（正如您的大多数代码所显示的那样），则删除此行：

```
<uses-library android:name="com.google.android.maps" /> 
```

它是 API V1 的一部分，不需要在 V2 中。

您需要决定的第二件事是`minAPI`您的应用程序的级别。如果您将应用程序编写到 API 级别 < 11，那么您应该在 XML 中使用 SupportMapFragment，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<fragment
    android:id="@+id/map"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    class="com.google.android.gms.maps.SupportMapFragment" /> 
```

并且您的活动应该扩展`FragmentActivity`，这是您应该使用 `the google-support-v4`包的情况，因为`FragmentActivity`它是该包的一部分。

**更新：** 从您的 logcat 输出：

```
 Caused by: android.content.ActivityNotFoundException: Unable to find explicit activity class {com.me.tourapp/com.me.tourapp.TourMapActivity}; have you declared this activity in your AndroidManifest.xml? 
```

这意味着您尚未在清单文件中声明您的 Activity TourMapActivity，这就是您的错误的原因。

**UPDATE2：** 这个错误：

```
Caused by: android.support.v4.app.Fragment$InstantiationException: Unable to instantiate fragment com.google.android.gms.maps.SupportMapFragment: make sure class name exists, is public, and has an empty constructor that is public. 
```

`SupportMapFragment`正如错误中所说的那样，由于找不到类这一事实而派生。这意味着您没有`google-play-services`以正确的方式引用该库，因为此类是该库的一部分。请阅读我写的关于如何正确引用它的这篇博文的前 3 个步骤：

[谷歌地图 API V2](http://blog-emildesign.rhcloud.com/?p=435)

# java - 我需要一排矩形，如何自动命名它们的变量？

> ID：16171058
> 
> 赞同：1
> 
> 时间：2013-04-23T13:49:14.840
> 
> 标签：java, object, loops

也许这是一个有点模糊的问题，但我只是在学习 Java 和编程（使用斯坦福视频），我需要制作一排矩形来构建金字塔。但是当我在循环中执行此操作时，所有矩形都获得相同的变量名称，它们只是“改变”位置，而我只得到一个矩形。那么如何在循环中以不同的方式命名矩形并添加它们，因为手动制作它们需要很长时间。

我的代码：

 `````
private void BuildingRow() {
    int Q = BRICK_QUANTITY;
    double length;              // length from row beginning spot           
    length = RowStartSpot(Q);
    for (int i = 0; i < Q; i++)
    {
        GRect brick = new GRect(length, height - BRICK_HEIGHT, BRICK_WIDTH, BRICK_HEIGHT);
        add(brick);
    } 
````  `* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:53:12.010

创建一个矩形数组并使用`for`循环填充它。矩形的名称将是它在数组中的位置。例如，如果您的矩形数组被调用`myRectangles`，那么您的第一个矩形是`myRectangles[0]`等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T13:53:47.047

您需要将它们添加到某种列表中，以便将来可以访问它们：

```
List<GRect> listOfBricks = new ArrayList<GRect>();
for (int i = 0; i < Q; i++){
    GRect brick = new GRect(length, height - BRICK_HEIGHT, BRICK_WIDTH, BRICK_HEIGHT);
    listOfBricks.add(brick);
} 
```

然后，访问每块砖：

```
listOfBricks.get(index); 
`````

# wpf - 工具提示中的 WPF 数据上下文

> ID：16171059
> 
> 赞同：3
> 
> 时间：2013-04-23T13:49:24.337
> 
> 标签：wpf, data-binding, binding, tooltip, datacontext

我正在尝试绑定 ListBoxItem 的工具提示。我在我的 ControlTemplate 中定义了这个：

```
<ControlTemplate TargetType="{x:Type ListBoxItem}">
    <ControlTemplate.Resources>
        <conv:IconConverter x:Key="IconConverter" />
        <conv:FirstImageConverter x:Key="FirstImageConverter"/>
        <conv:DebugConverter x:Key="dbg"/>
    </ControlTemplate.Resources>
<Border ...>
    <StackPanel>
        <Image MaxHeight="160" Stretch="UniformToFill" Source="{Binding Icon,Converter={StaticResource IconConverter},ConverterParameter=128}" Height="128"/>
        <TextBlock x:Name="lblName" Text="{Binding Name}" />
    </StackPanel>
    <Border.ToolTip>
        <DockPanel LastChildFill="True" Margin="2" MaxWidth="800" 
        DataContext="{Binding Images,Converter={StaticResource FirstImageConverter}}" 
        IsEnabled="{Binding Images,Converter={StaticResource FirstImageConverter},ConverterParameter=enabled}">
            <TextBlock DockPanel.Dock="Bottom" Width="Auto" MaxWidth="600"  Text="{Binding Caption}" Height="Auto" />
            <Image x:Name="imgFullSize" DockPanel.Dock="Top" Stretch="None" Width="Auto" Source="{Binding Filename,Converter={StaticResource IconConverter}}"/>
        </DockPanel>
    </Border.ToolTip> 
```

是的，我收到一个绑定错误：`System.Windows.Data Error: 3 : Cannot find element that provides DataContext. BindingExpression:Path=Images; DataItem=null; target element is 'DockPanel' (Name=''); target property is 'DataContext' (type 'Object')`

我的 ListBoxItem 的 datacontext 确实包含 images 属性，因为它包含正确显示的 name 和 icon 属性。我也尝试过使用`TooltipService.ToolTip`而不是`Border.ToolTip`，但没有效果。有什么区别，为什么我的绑定不起作用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T14:08:07.347

最终通过将工具提示更改为此解决了这个问题：

```
...
<Border.ToolTip>
    <ToolTip DataContext="{Binding PlacementTarget.DataContext.Images, RelativeSource={RelativeSource Self}}" Visibility="{Binding PlacementTarget.DataContext.Images, RelativeSource={RelativeSource Self},Converter={StaticResource FirstImageConverter},ConverterParameter=visible}">
        <DockPanel LastChildFill="True" Margin="2" MaxWidth="800">
            ... 
```

感谢@Rachel 引导我找到答案。

# scala - 这个 apply 方法定义正确吗？

> ID：16171062
> 
> 赞同：0
> 
> 时间：2013-04-23T13:49:28.650
> 
> 标签：scala

当我在下面运行代码时，未调用 apply 方法：

爪哇：

```
public class Driver {

    public static void main(String args[]){

        new parallel.TestData();
    }

} 
```

斯卡拉：

```
package parallel

class TestData {
    def apply() = {
      println("in apply method ")
    }
} 
```

如果我使用：

```
new parallel.TestData().apply(); 
```

那么apply方法被正确调用，但是apply（）方法不应该从上面的代码中隐式调用吗？应用方法是否未正确实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T14:00:30.610

*在 Scala 中，构造函数*和*应用*方法是有区别的。您似乎希望 apply 方法像构造函数一样工作。但是，构造函数是一个名为`def this(...)`. 因此，您没有定义构造函数。

apply 方法可以像任何其他方法一样使用名称来调用 ( `.apply()`) 或使用括号 ( `()`)。创建类的新实例后，您仍然需要调用 apply 方法。

因此，您可以**创建类的新实例并调用`apply`**：

```
new parallel.TestData()()
//                   ^  ^---- apply method
//                   |------- constructor 
```

或者你可以**实现一个对象而不是一个类**：

```
object TestData {
    def apply() = {
      println("in apply method ")
    }
}
parallel.TestData() 
```

**更新**：从 Java 调用 Scala 代码时，您必须坚持第一种方法。由于 Java 没有为 apply 方法添加语法糖，因此您可以选择显式调用：`new parallel.TestData().apply()`.

# neo4j - 递归 neo4j 查询

> ID：16171064
> 
> 赞同：4
> 
> 时间：2013-04-23T13:49:29.850
> 
> 标签：neo4j, cypher

我有一个图表，其中包含无限级别的类别和子类别以及子子类别。如何在一个密码查询中获取所有这些分层数据？

我目前有这个查询：

```
START category=node:categoryNameIndex(categoryName = "category") 
MATCH path = category <-        [rel:parentCategory] - subcategory 
RETURN category, collect(subcategory); 
```

这给了我以下结果：

```
| category                                                                                               | collect(subcategory)                                                                                                                                                                                           |
==> +-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
==> | Node[26]{categoryName:"Test2",categoryDescription:"testDesc",imageUrl:"testUrl",imageName:"imageName"} | [Node[25]{categoryName:"Test1",categoryDescription:"testDesc",imageUrl:"testUrl",imageName:"imageName"}]                                                                                                       |
==> | Node[1]{categoryName:"Test1",categoryDescription:"testDesc",imageUrl:"testUrl",imageName:"imageName"}  | [Node[26]{categoryName:"Test2",categoryDescription:"testDesc",imageUrl:"testUrl",imageName:"imageName"},Node[2]{categoryName:"Test2",categoryDescription:"testDesc",imageUrl:"testUrl",imageName:"imageName"}] | 
```

我正在使用 node-neo4j。我将以 json 格式举例说明我想要的内容。

```
[{
    "categoryName": "Test2",
    "categoryDescription": "testDesc",
    "imageUrl": "testUrl",
    "children": [{
        "categoryName": "Test1",
        "categoryDescription": "testDesc",
        "imageUrl": "testUrl",
        "children" :  [{
            "categoryName": "Test1",
            "categoryDescription": "testDesc",
            "imageUrl": "testUrl"
        }]
    }]
}] 
```

我这可能吗？我知道我总是可以通过编程或使用多个查询来完成它。但如果它可以在单个查询中完成，那将非常有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T14:10:32.063

`*`您可以通过在关系类型之后添加 a 来匹配任意深度的路径：

```
START category=node:categoryNameIndex(categoryName = "category") 
MATCH path = category <-[rel:parentCategory*]- subcategory 
RETURN category, collect(subcategory); 
```

或者，您还可以指定最小和/或最大路径长度：

```
START category=node:categoryNameIndex(categoryName = "category") 
MATCH path = category <-[rel:parentCategory*2..5]- subcategory 
RETURN category, collect(subcategory); 
```

请参阅此处的参考：

[http://docs.neo4j.org/chunked/milestone/query-match.html#match-variable-length-relationships](http://docs.neo4j.org/chunked/milestone/query-match.html#match-variable-length-relationships)

# javascript - 如何使 JSTL 编写的元素的 id 可用于脚本？

> ID：16171065
> 
> 赞同：1
> 
> 时间：2013-04-23T13:49:35.693
> 
> 标签：javascript, jquery, jsp, twitter-bootstrap, jstl

我正在使用 Twitter-Bootstrap 可编辑和 Java Servlet 后端开发一个 Web 应用程序。使用 JSTL 渲染表格数据，并且连接可编辑的数据表单不起作用。JS 开发者控制台，显示未定义，因此它无法识别在 JSTL 的 foreach 中生成的元素 ID。试图在文档准备好时包装可编辑的 JS 调用，但不起作用。我想问题是如何使 JSTL 编写的元素的 id 可用于脚本。

```
<%--
    Document   : index
    Created on : 20/Abr/2013, 23:52:35
    Author     : Arthur
--%>
<%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>

<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="">
        <meta name="author" content="">

        <!-- Bootstrap CSS-->
        <link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
        <!-- Bootstrap DatePicker CSS-->
        <link href="css/datepicker.css" rel="stylesheet" media="screen">
        <!-- Bootstrap Editable CSS-->
        <link href="css/bootstrap-editable.css" rel="stylesheet" media="screen">
        <!-- JQUERY -->
        <script src="js/jquery-1.9.1.min.js"></script>
        <!-- Bootstrap JS-->
        <script src="js/bootstrap-2.0.2.js"></script>
        <!-- Bootstrap DatePicker JS-->
        <script src="js/bootstrap-datepicker.js"></script>
        <!-- Bootstrap EdiTable JS-->
        <script src="js/bootstrap-editable.js"></script>
        <script type='text/javascript'>//<![CDATA[ 
            $(window).load(function(){
                $('.dropdown-toggle').dropdown();
            });//]]>  
        </script>

        <style>
            body {
                padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
                padding-bottom: 40px;
                background-color: #f5f5f5;
            }

        </style>
        <title>.:StaffGest:.</title>
    </head>
    <body>
        <!--        <div class="navbar navbar-inverse navbar-fixed-top">-->
        <div class="navbar navbar-inverse navbar-fixed-top">
            <div class="navbar-inner">
                <div class="container">
                    <a class="btn btn-navbar" data-toggle="collapse" data-target=".navbar-inverse-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </a>
                    <a class="brand" href="#">.:StaffGest:.</a>
                    <div class="nav-collapse collapse navbar-inverse-collapse">
                        <ul class="nav">
                            <li class="active"><a href="index.jsp">Home</a></li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Funcionários<b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    <li><a href="#">Novo</a></li>
                                    <li><a href="#">Editar</a></li>
                                    <li><a href="#">Apagar</a></li>
                                    <li class="divider"></li>
                                    <li class="nav-header">Pesquisar</li>
                                    <li><a href="#">Pesquisar Funcionário</a></li>
                                    <li><a href="#">Listar Todos</a></li>
                                </ul>
                            </li>
                            <li><a href="#">Link</a></li>
                            <li><a href="#">Link</a></li>
                        </ul>
                    </div><!-- /.nav-collapse -->
                </div>
            </div><!-- /navbar-inner -->
        </div><!-- /navbar -->

        <div class="container">
            <h1>Lista Funcionários:</h1>
            <table class="table">  
                <thead>  
                    <tr>  
                        <th>Nome</th>  
                        <th>Apelido</th>  
                        <th>Data Nascimento</th>  
                        <th>Email</th>  
                    </tr>  
                </thead>  
                <tbody>  
                    <c:forEach items="${list}" var="employee">
                        <tr> 
                            <td><a href="#" id="firstName" name="firstName"data-type="text" data-pk="${employee.id}" data-url="employee.do" data-original-title="Nome">${employee.firstName}</a></td>  
                            <td><a href="#" id="lastName" name="lastName" data-type="text" data-pk="${employee.id}" data-url="/post" data-original-title="Nome">${employee.lastName}</td> 
                            <td><a href="#" id="dob" name="dob" data-type="text" data-pk="${employee.id}" data-url="/post" data-original-title="Nome"><fmt:formatDate value="${employee.dob}" pattern="MM/dd/yyyy"/></td> 
                            <td><a href="#" id="email" name="email" data-type="text" data-pk="${employee.id}" data-url="/post" data-original-title="Nome">${employee.email}</td> </tr> 
                        </c:forEach>

                </tbody>  
            </table>  
        </div> <!-- /container -->
        <script> 
                $('#firstName').editable({
                });
                $('#lastName').editable({
                });
                $('#dob').editable({
                });
                $('#email').editable({
                });
        </script>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:55:14.650

这是你的错误：

```
<c:forEach ...>
    <a id="firstName" ...>  
    <a id="lastName" ...>  
    <a id="dob" ...>  
    <a id="email" ...>  
</c:forEach> 
```

多个相同的元素在 HTML 中`id`是[非法的。](http://validator.w3.org)HTML DOM 和 JS 中的行为未指定。

根据例如迭代索引或迭代项的 ID 给他们一个唯一的 ID，或者更好的是，如果他们需要在 中表现相同`editable()`，只需相同的类名：

```
<c:forEach ...>
    <a class="editable" ...>  
    <a class="editable" ...>  
    <a class="editable" ...>  
    <a class="editable" ...>  
</c:forEach> 
```

这样你就可以保持你的 JS [DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)：

```
<script> 
    $('.editable').editable({
    });
</script> 
```

# java - Java - ScrollPaneLayout - 自定义垂直滚动条背景、滑块和箭头

> ID：16171066
> 
> 赞同：1
> 
> 时间：2013-04-23T13:49:36.400
> 
> 标签：java, swing, jscrollpane, jscrollbar

我正在尝试构建一个更具体的自定义 JScrollPane，如下面的设计图片所示。

我在执行以下任务时遇到问题：

**自定义垂直滚动条背景、滑块和箭头**：我在自定义滚动条时遇到问题 - 更具体地说：

*   将垂直滚动条背景更改为黄色
*   将滚动条滑块颜色更改为另一种颜色
*   创建 JScrollPane 边框以在边框上包含半径边缘
*   将滚动条箭头颜色更改为另一种颜色

![测试](https://i.stack.imgur.com/FotQR.png)

对于边界，我成功地将其更改为黄色。这是代码：

```
class MyScrollPane extends JScrollPane {

    public MyScrollPane(Component view) {
        super(view, VERTICAL_SCROLLBAR_ALWAYS, HORIZONTAL_SCROLLBAR_ALWAYS);        
        this.setLayout(new MyLayout());        
        setBackground(Color.red);
    }
} 
```

.

```
class MyLayout extends ScrollPaneLayout {

    public MyLayout() {
        super();
    }

    public void layoutContainer(Container parent) {
        super.layoutContainer(parent);        
        vsb.setSize(vsb.getWidth() , vsb.getHeight()); // drift
        vsb.setBorder(new LineBorder(Color.YELLOW));        
    }  
} 
```

关于背景我没有成功 - 例如以下不起作用：

```
vsb.setBackground(Color.red); 
```

任何想法/想法都会非常有帮助，因为我已经被困了好几天了。

# ios - 从 UIAlertView 获取文本

> ID：16171073
> 
> 赞同：3
> 
> 时间：2013-04-23T13:49:53.763
> 
> 标签：ios, objective-c, uialertview

似乎缺少一些东西，但下面的代码正在为两者生成值`nil`（即使它正确启动了正确的警报类型并且不指示任何警告或错误）。这种实现可能有什么问题？`title``title1``UIAlertView`

```
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"High Score" message:(NSString *)scoreMessage delegate:nil cancelButtonTitle:@"OK" otherButtonTitles: nil];
alert.alertViewStyle= UIAlertViewStylePlainTextInput;
UITextField *title1 = [alert textFieldAtIndex:0];
[alert show];
title1= [alert textFieldAtIndex:0];
NSString *title = title1.text;
NSLog(@"The name is %@",title);
NSLog(@"Using the Textfield: %@",[[alert textFieldAtIndex:0] text]); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-23T14:15:22.353

在代码中的某处显示警报并从中设置视图控制器作为 UIAlertView 的委托。然后实现委托以接收事件。

```
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"High Score" message:@"Score Message" delegate:self cancelButtonTitle:@"OK" otherButtonTitles: nil];
alert.alertViewStyle= UIAlertViewStylePlainTextInput;
[alert show]; 
```

实现委托方法

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex{
   UITextField *textField = [alertView textFieldAtIndex:0];
   NSString *title = textField.text;
   NSLog(@"The name is %@",title);
   NSLog(@"Using the Textfield: %@",[[alertView textFieldAtIndex:0] text]);
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-23T14:02:20.807

`[alert show]`在用户可以在文本字段中输入任何文本之前立即返回。您需要在警报被解除*后*`delegate`通过设置和实施来获取文本`alertView:clickedButtonAtIndex:`（例如，还有其他几种可能性）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-10T05:14:23.537

在 iOS 8 中 UIAlertview 已被弃用。使用 UIAlertController 代替它。

```
UIAlertController *alert = [UIAlertController alertControllerWithTitle:@"Add Fruit" message:@"Type to add a fruit" preferredStyle:UIAlertControllerStyleAlert];
[alert addTextFieldWithConfigurationHandler:^(UITextField *textField){
    textField.placeholder = @"Fruit";
}];

UIAlertAction *okAction = [UIAlertAction actionWithTitle:@"OK"
                                               style:UIAlertActionStyleDefault
                                             handler:^(UIAlertAction *action) {
                                                 UITextField *textFiel = [alert.textFields firstObject];
                                                 [fruits addObject:textFiel.text];
                                             }];
[alert addAction:okAction];

[self presentViewController:alert animated:YES completion:nil]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T14:08:07.597

**您需要等待委托回调`alertView:clickedButtonAtIndex`**来获取文本 - 保留对文本字段的引用并显示警报，将其设置`delegate`为`self`. 当调用该方法时，用户按下按钮表示他们已完成输入文本，因此现在从文本字段中获取文本可能是安全的。

# c# - 在Servers中部署SignalR HelloWorld，一个好一个不行

> ID：16171075
> 
> 赞同：1
> 
> 时间：2013-04-23T13:49:55.913
> 
> 标签：c#, asp.net

我刚刚在服务器上部署了 SingalR 示例（使用 jquery.signalR-1.0.1.js），参考 [https://github.com/SignalR/SignalR/wiki/QuickStart-Hubs](https://github.com/SignalR/SignalR/wiki/QuickStart-Hubs)

在 QA Server 上运行良好，我可以正确广播消息。但在 UAT 服务器中，执行时总是显示错误：

```
var chat = $.connection.chat; 
```

抛出聊天无法识别的错误，我刚刚检查了两台服务器，都是 winServer2008R2，IIS7.5，相同的应用程序池设置，安装了 .Net 框架 4。

不知道该怎么做才能弄清楚我的 UAT 服务器发生了什么。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T03:44:10.883

终于解决了这个问题。在 QA 中，它是 Win2008R2 SP1，但在 UAT 中，它是 Win2008R2。安装此补丁后 [http://support.microsoft.com/kb/980368/](http://support.microsoft.com/kb/980368/)

有用！这是**一个可用的更新，它使某些 IIS 7.0 或 IIS 7.5 处理程序能够处理 URL 不以句点结尾的请求。**

从我的美国同事那里得到了帮助，非常感谢他。

# r - 将字符变量列转换为向量

> ID：16171076
> 
> 赞同：1
> 
> 时间：2013-04-23T13:49:57.027
> 
> 标签：r, vector, character-encoding

有一个包含 4 列值的 .csv：

```
data<-read.csv("C:\\Users\\mtatange\\Desktop\\Dataset.csv")
A         B        C        D   
1         1       NA        1   
2         2        4        1   
3         3        6        4   
4        NA        8        5

data$E<-do.call(paste,c(data[c("A","B","C","D")], sep=""))
data
A         B        C        D       E        
1         1       NA        1      11NA1 
2         2        4        1      2241
3         3        6        4      3364 
4        NA        8        5      4NA85

summary(data)
E
Length: 4
Class: Character
Mode: Character 
```

我需要列“E”作为向量，它不能作为字符变量保留。我试过了：

```
data$E[is.na(a$E)]<-0 
```

但这仍然将列作为字符变量。如何将列转换为向量变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T14:01:47.460

摆脱 NA 的第一个..：

```
df[ is.na(df) ] <- 0
df$E <- apply(df,1,function(x) as.numeric(paste0(x , collapse="")))
  A B C D    E
1 1 1 0 1 1101
2 2 2 4 1 2241
3 3 3 6 4 3364
4 4 0 8 5 4085

apply(df , 2 , class )
        A         B         C         D         E 
"numeric" "numeric" "numeric" "numeric" "numeric" 
```

* * *

上面的解决方案为您提供了思路。或者，一种（相对）更快的方法是：

```
df[ is.na(df) ] <- 0
df$E <- as.numeric(do.call(paste0, df)) 
```

NA的更换非常快。在 MBP 笔记本电脑上对具有 300,000 行的 3 列表进行的测试中......

```
df <- data.frame( a = sample(c(1:9,NA) , 3e5 , repl = TRUE ) , b = sample(c(1:9,NA) , 3e5 , repl = TRUE ) , c = sample(c(1:9,NA) , 3e5 , repl = TRUE )  )   
sum(is.na(df))
[1] 90118

system.time( (df[is.na(df)] <- 0 ) )
  user  system elapsed 
 0.250   0.021   0.269 
nrow(df)
 [1] 300000 
```

# audio - 如何设置动态时间规整窗口调整？

> ID：16171078
> 
> 赞同：1
> 
> 时间：2013-04-23T13:49:57.990
> 
> 标签：audio, signal-processing, dynamic-programming

我正在使用 DTW（动态时间扭曲）代码。有人碰巧知道我应该如何设置调整窗口的大小吗？（全局路径约束）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T21:59:36.320

交叉验证

获取一些标记数据，将翘曲窗口设置为零，测量留一法的准确性

然后不断增加翘曲窗口大小，直到精度变差。

请参见下面论文的图 5 和图 6

埃蒙

加利福尼亚州拉塔纳马哈塔纳和基奥。E.（2004 年）。你所知道的关于动态时间扭曲的一切都是错误的。第三次挖掘时序数据研讨会，与第十届 ACM SIGKDD 知识发现和数据挖掘国际会议 (KDD-2004) 相结合，2004 年 8 月 22 日至 25 日 - 华盛顿州西雅图 [http://www.cs.ucr。 edu/~eamonn/DTW_myths.pdf](http://www.cs.ucr.edu/~eamonn/DTW_myths.pdf)

# javascript - javascript: html5 获取和设置数据-*

> ID：16171083
> 
> 赞同：0
> 
> 时间：2013-04-23T13:50:00.387
> 
> 标签：javascript, jquery, html, jquery-data

我用过

```
var activeFilter = $('<li></li>').data('input-id', 'mycustomId');
$('#container').append(activeFilter); 
```

现在我需要从已知<ul> 中的多个<li> 元素中获取特定的<li> 元素。

然而，明显的选择器不起作用。

```
var existing = $('li[data-input-id=mycustomId]');
alert(existing.length); 
```

有用的链接： [.prop() vs .attr()](https://stackoverflow.com/questions/5874652/prop-vs-attr) [如何获取、设置和选择具有数据属性的元素？](https://stackoverflow.com/questions/13275812/how-to-get-set-and-select-elements-with-data-attributes/13276132#13276132)

***概括：***

**`.prop()`**设置/获取 DOM 属性.. 例如 className

**`.attr()`**设置/获取标签属性.. 例如类，从而使选择器成为**`$('obj[class=xxx]')`**可能。

**`.data()`**设置/获取 jQuery 内部缓存属性并且不映射到属性或属性。

*但是*，在 html5 中设置**`.attr()`**并包含前缀**`"data-"`**的属性可以正确访问**`.data()`**，但不是 VICE VERSA！

[http://jsfiddle.net/wjEvM/](http://jsfiddle.net/wjEvM/)

在调试器中没有列出属性 data-input-id，但可以通过

```
$('#container li:firstchild').data('input-id'); 
```

问题是我如何获得（我必须使用哪个选择器）具有给定数据集值的 li（对象 ie），例如`obj.getChildWithData('data-id', 'mycustomId');` 在循环中检查每个 li 的数据集的 OTHER THAN。或者使用*愚蠢*的 document.querySelectorAll，因为它不能满足需要。

如果它应该这样工作，请解释是否适用。将 data-* 属性设置为属性不允许我使用 html5 推荐的 .data() 。所以我想把它做好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T13:54:31.097

您在此处使用属性选择器，如果您将 HTML5 数据设置为：

```
activeFilter.attr('data-input-id', 'mycustomId'); 
```

但是，您应该使用正确的合成器来访问它：

```
$('#container li:firstchild').data('inputId'); 
```

要回复您的评论，您可以使用 .filter() 检索它：

```
var existing = $('li').filter(function(){return $(this).data('inputId') === "mycustomId"}); 
```

[看演示](http://jsfiddle.net/Ayg6K/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:55:57.470

不幸的是，对于您的方法，jQuery 不会`.data()`在 DOM 节点的`data`属性中存储数据集（请参阅[此问题](https://stackoverflow.com/questions/2446098/how-does-jquery-store-data-with-data)）。

相反，您需要使用 设置它[`.attr()`](http://api.jquery.com/attr/#attr-attributeName-value)，然后您可以使用`$('li[data-input-id=mycustomId]')`：

```
$('<li></li>').attr('data-input-id', 'mycustomId'); 
```

# javascript - Internet Explorer 文本输入 onkeyup char 13

> ID：16171084
> 
> 赞同：0
> 
> 时间：2013-04-23T13:50:04.403
> 
> 标签：javascript, html, internet-explorer

当我们按下输入框上的输入按钮时，如果页面中有按钮元素，则似乎没有为 IE8/IE9（我不知道 10）调用 onkeyup 事件。

```
<html>
<head>
<script>
function onku(id, e) {
    var keyC = 0;
    keyC = e.keyCode ? e.keyCode : e.charCode;
    document.getElementById("mydiv").innerHTML += keyC + "<br>";
}
</script>
</head>
<body>
<button type="submit" >Test Button</button>
<input type="text" maxlength="5" onkeyup="onku(id, event);">
<br>
<div id="mydiv"><div>
</body>
</html> 
```

所以对于每个输入 onku() 都会被调用，但不会在 ENTER （ keyC = 13 ）上调用。现在，如果我删除

```
<button type="submit" >Test Button</button> 
```

按钮，它会触发。任何人都知道为什么？

没有其他浏览器有这个问题。

jsfiddle：http: [//jsfiddle.net/ssmpM/](http://jsfiddle.net/ssmpM/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:08:15.433

我只需要删除`type="submit"`它就可以了。

# jquery - 使用 jquery 循环 asp 中继器项目

> ID：16171085
> 
> 赞同：2
> 
> 时间：2013-04-23T13:50:15.743
> 
> 标签：jquery, asp.net

任何人都可以帮助如何使用 Jquery 在转发器中循环项目。我有这个代码

```
<asp:Repeater runat="server" ID="rptData">
  <HeaderTemplate>
    <div style="border: 1px solid #c4c4c4; width: 98%; font:8px;">
        <table cellpadding="4px" id="tbValue" width="100%" style="margin:0;">
            <tr>
                <td width="30%" style="background-color: #CCC;">Qty</td>
                <td width="60%" style="background-color: #CCC;">Description</td>
                <td width="60%" style="background-color: #CCC;">ID</td>
            </tr>
  </HeaderTemplate>
  <ItemTemplate>
    <tr style="background: #fff" <%# If(Container.ItemIndex Mod 2=0 , "class='odd'", "") %>>
        <td>
            <asp:TextBox ID="txtQuantity" runat="server" CssClass="textbox" />
        </td>
        <td>
            <asp:Label ID="lblDesc" runat="server" Text='<%# Eval("Description")%>' CssClass="LabelInfo" />
        </td>
        <td>
            <asp:Label ID="lblId" runat="server" Text='<%# Eval("Kit_ID")%>' />
        </td>
    </tr>
  </ItemTemplate>
  <FooterTemplate>
    </table>
    </div>
  </FooterTemplate>
</asp:Repeater>
<asp:Button ID="btnSubmit" runat="server" Text="Submit" CssClass="button" Width="150px" style="margin: 1.5em 2em 0 0;" /> 
```

我想要做的是，在按钮单击中，我想获取转发器中的每个 txtqty 并检查值是否等于 10。如果等于 10 - 我将获得 lbldesc 的值，如果小于 10，我将获得lblId 值

输出应该是 -Equal tom 10

```
DESCRIPTION    - QUANTITY
Itemxxx        – 10 
Itemwww        – 10 

ID - QUANTITY
1  – 7 
2  – 2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T14:51:14.100

首先，`#lbldesc`在使用中继器时，您不能像在 jquery 中那样直接使用 id 访问字段，因为 asp 将其自己的唯一值分配给中继器生成的每个字段。

也就是说，您仍然可以选择获取数据并使用它，使用 css 类可以实现这一点：

将类分配给两者`lbldesc`:`lblId`假设给出了相同的类，现在您可以像这样在 jquery 中轻松地循环它们：

```
$('#btnSubmit').click(function(){
     var equalToTen = new Array();
        var notEqualToTen = new Array();

        $('.textbox').each(function () {
            if (Number($(this).val()) > 10) {
                equalToTen.push($(this).closest('tr').find('.lbldesc').html());
            }
            else {
                notEqualToTen.push($(this).closest('tr').find('.lblId').html());
            }
        });

        for (var i = 0; i < equalToTen.length; i++) {
            alert("I am equal to 10: " + equalToTen.pop());
        }

        for (var i = 0; i < notEqualToTen.length; i++) {
            alert("I am not equal to 10: " + notEqualToTen.pop());
        }
}); 
```

**注意：**数组和循环仅作为示例。
希望这能回答你的问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T14:00:05.377

```
$('#btn').on('click',function(){
  $('#txtQuantity').each(function () 
   {
      var val;
      if($(this).val()==10)
      {
        val=$(this).closest('tr').find('#lblDesc').text();
      }
      else
      {
        val=$(this).closest('tr').find('#lblId').text();
      }
   });

 }); 
```

这是一个简单的 Jquery 代码，可以满足您的需要。

**编辑：上面的代码已被编辑**

快乐编码:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T14:02:15.597

可能是这样的

```
<script>
$(document).ready(function() {
$(buttonselector).on('click',function(){ 
  $('.textbox').each(function(){
      if($(this).val() == 10){
         $(outputselector).html($(this).next('#lbldesc').html());
      }
      else{
       $(outputselector).html($(this).next('#lblId').html());
      }
  });

})
});
</script> 
```

尽管那些#net 控制器使这个丑陋的 id 更好地给 lbldesc 和 lblId 一个 css 类并使用 css 类作为选择器

# command-line - 仅使用命令行将从 VirtualDubMod 读取的视频保存到文件？

> ID：16171086
> 
> 赞同：0
> 
> 时间：2013-04-23T13:50:16.497
> 
> 标签：command-line, avi, avisynth, virtualdub

我想在服务器上使用 Avisynth 编译几个视频剪辑。我生成 .avs 文件并让 VirtualDubMod 读取该文件。

如何仅使用命令行将从 VirtualDubMod 读取的视频保存到 avi 文件？如果我打开 VirtualDubMod，那么我可以选择另存为，但我把它放在服务器上，所以没有可用的 GUI，它应该是自动的。

编辑：

在看了更多之后，我发现[了这个](http://avisynth.org/mediawiki/index.php?title=Save&redirect=no)。这是推荐的方法吗？

# javascript - Javascript 在 IE 中不起作用 - 事件和/或阻止默认点击不起作用

> ID：16171091
> 
> 赞同：0
> 
> 时间：2013-04-23T13:50:34.667
> 
> 标签：javascript, internet-explorer, preventdefault

是的，我是一个菜鸟，但我已经无能为力了，因为我已经尝试了我能想到的一切。这在 IE 以外的浏览器（包括 IE9）中运行良好，我不确定该函数是否失败或者它是否有效但“return false”机制失败。我已经用手写的方式把它写出来，试图修复它：

我在页面上有一个蓝色边框的框，顶部有一排文件夹选项卡。每个选项卡都与 div 中的内容相关联，其中显示是“隐藏”的，除了一个。外部 javascript 更改选项卡的外观，使适当的看起来像在前面，并且还更改了框的内容。

```
 function changeText(e) {
    e = e || window.event;
    var content = document.getElementById('bb');
    var a1 = document.getElementById('a1');
    var a2 = document.getElementById('a2');
    var a3 = document.getElementById('a3');
    var c1 = document.getElementById('c1');
    var c2 = document.getElementById('c2');
    var c3 = document.getElementById('c3');
    var content1 = document.getElementById('content1');
    var content2 = document.getElementById('content2');
    var content3 = document.getElementById('content3');
    if (!e.target) {
         e.target = e.srcElement || document;
    }

    if (e.target.id == 'a1') {
        c1.className = 'bbta bbt';
        c2.className = 'bbtina bbt';
        c3.className = 'bbtina bbt';
        content1.className = 'display_block';
        content2.className = 'display_none';
        content3.className = 'display_none';
        if (e.preventDefault) {
           e.preventDefault(); // other older browsers
        } else {
            e.returnValue = false; // IE8 and below
        }
    } else if (e.target.id == 'a2') {
        var head = document.getElementsByTagName("head")[0];  
        head.innerHTML += "<style type='text/css'>p.style11{color: #020;  text-decoration: none; font-weight: 300;} p.style11 a:link, p.style11 a:visited {color: #020;  text-decoration: underline; font-weight: 300;}p.style11 a:hover, p.style11 a:active {color: #0C436A;  text-decoration: none; font-weight: 300;}</style>";
        c1.className = 'bbtina bbt';
        c2.className = 'bbta bbt';
        c3.className = 'bbtina bbt';
        content1.className = 'display_none';
        content2.className = 'display_block';
        content3.className = 'display_none';
        if (e.preventDefault) {
           e.preventDefault(); // other older browsers
        } else {
            e.returnValue = false; // IE8 and below
        }
        return false;
    } else if (e.target.id == 'a3') {
        var head = document.getElementsByTagName("head")[0];
        head.innerHTML += "<style type='text/css'>p.style11{color: #020;  text-decoration: none; font-weight: 300;} p.style11 a:link, p.style11 a:visited {color: #020;  text-decoration: underline; font-weight: 300;}p.style11 a:hover, p.style11 a:active {color: #0C436A;  text-decoration: none; font-weight: 300;}</style>";
        c1.className = 'bbtina bbt';
        c2.className = 'bbtina bbt';
        c3.className = 'bbta bbt';
        content1.className = 'display_none';
        content2.className = 'display_none';
        content3.className = 'display_block';
        if (e.preventDefault) {
           e.preventDefault(); // other older browsers
        } else {
            e.returnValue = false; // IE8 and below
        }
    }
}

window.onload = function () {
    var bluebox = document.getElementById ('bb_holder');
    var tab = bluebox.querySelectorAll('div.bbt');
    for (var i=0; i < tab.length; i++) {
        tab[i].addEventListener('click', changeText, false);
    }
}; 
```

# ios - NSUserDefaults 返回（空）

> ID：16171092
> 
> 赞同：0
> 
> 时间：2013-04-23T13:50:37.280
> 
> 标签：ios, xcode, nsmutablearray, nsuserdefaults

我是一个新手，`NSUserDefaults`并且正在努力理解一些我认为对于大多数阅读本文来说可能很简单的东西。

`NSUserDefaults`如果它存在于以下代码中，我正在尝试检索一个可变的字符串数组：

```
NSMutableArray *globalAppsArray;

if([[NSUserDefaults standardUserDefaults] objectForKey:@"globalAppsArray"] != nil)
{
    NSLog(@"Array found. Contents: %@", globalAppsArray);        
}
else
{
    globalAppsArray = [[NSMutableArray alloc] initWithCapacity:0];
} 
```

在向其中添加任何新数据后，我想保存它：

```
[[NSUserDefaults standardUserDefaults] setObject:globalAppsArray forKey:@"globalAppsArray"];
[[NSUserDefaults standardUserDefaults] synchronize]; 
```

当我重新启动应用程序时，发现可变数组正常，但内容为`null`.

有人可以告诉我我错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T13:54:46.767

它应该是这样的：

```
NSMutableArray *globalAppsArray = [[NSUserDefaults standardUserDefaults] objectForKey:@"globalAppsArray"];

if(globalAppsArray != nil)
{
    NSLog(@"Array found. Contents: %@", globalAppsArray);
}
else
{
    globalAppsArray = [[NSMutableArray alloc] initWithCapacity:0];
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T13:53:53.423

检查您的代码一次，

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
NSMutableArray *globalAppsArray = [[defaults objectForKey:@"globalAppsArray"] mutableCopy];
if(globalAppsArray)
    NSLog(@"Array found. Contents: %@", globalAppsArray);
else
    globalAppsArray = [NSMutableArray array]; 
```

# c - select() 后关闭套接字

> ID：16171094
> 
> 赞同：0
> 
> 时间：2013-04-23T13:50:40.457
> 
> 标签：c, sockets, select, irc

我正在编写一个 IRC 客户端，我想实现一个“/server”命令来将我的客户端的连接切换到另一个服务器。在初始化新连接之前，我想关闭 sockect 的 fd，但 close() 调用失败。谁能告诉我为什么？这是我的代码：

```
/* Main execution loop */
FD_ZERO(&irc->rdfs);
FD_SET(STDIN_FILENO, &irc->rdfs);
FD_SET(irc->socket_fd, &irc->rdfs);
if ((select(irc->socket_fd + 1, &irc->rdfs, NULL, NULL, NULL)) == -1)
{
  if ((close(irc->socket_fd)) == -1)
    exit(usage(CLOSE_ERROR));
  exit(usage(SELECT_ERROR));
}
if (FD_ISSET(STDIN_FILENO, &irc->rdfs))
{
  fgets(irc->buffer, SIZE - 1, stdin);
  {
    p = strstr(irc->buffer, RET);
    if (p != NULL)
      *p = 0;
    else
      irc->buffer[SIZE - 1] = 0;
  }
  write_on_server(irc, irc->buffer); /* The function where I call switch_server() in */
}
else if (FD_ISSET(irc->socket_fd, &irc->rdfs))
{
  if ((read_on_server(irc)) == 0)
    exit(usage(SERVER_DISCONNECT));
  puts(irc->buffer);
} 
```

这是我试图关闭套接字的 fd 的地方：

```
void            switch_server(t_irc *irc)
{
if ((close(irc->socket_fd)) == -1) /* This is the close which fail */
    exit(EXIT_FAILURE);
}

void            write_on_server(t_irc *irc, const char * buffer)
{
if (!(strncmp("/server", buffer, strlen("/server"))))
  switch_server(irc);
else
  if ((send(irc->socket_fd, buffer, strlen(buffer), 0)) < 0)
   {
     if ((close(irc->socket_fd)) == -1)
       exit(usage(CLOSE_ERROR));
     exit(usage(CLIENT_SEND_ERROR));
   }
} 
```

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:57:41.740

如果您想知道系统调用为何`close()`失败，请使用`perror()`将错误消息打印到 stderr，或`strerror(errno)`将错误代码转换为字符串并以其他方式输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T23:16:38.177

几乎可以肯定套接字 FD 是无效的。你需要调用 perror()*和*select() 失败。

# r - 合并每周系列时，merge.xts 会产生错误的结果

> ID：16171095
> 
> 赞同：3
> 
> 时间：2013-04-23T13:50:44.443
> 
> 标签：r, xts, quantmod

我正在尝试合并两个 xts 对象。一个是使用data.frame生成`quantmod`的，另一个是手动使用的。`xts()`

```
> class(rets.weekly)
[1] "xts" "zoo"
> class(result.weekly.xts)
[1] "xts" "zoo"
> tail(rets.weekly)
                    ret
2013-03-22  0.002231087
2013-03-26 -0.007846839
2013-04-06 -0.007501789
2013-04-12  0.001569891
2013-04-20 -0.023628035
2013-04-21  0.005055358
> tail(result.weekly.xts)
           prediction.date  standard.Deviation
2013-03-22 "2013-03-22"     "0.01681222"      
2013-03-26 "2013-03-26"     "0.01578790"      
2013-04-06 "2013-04-06"     "0.01578170"      
2013-04-12 "2013-04-12"     "0.01556793"      
2013-04-20 "2013-04-20"     "0.01504504"      
2013-04-21 "2013-04-21"     "0.01696417"      
> tail(merge.xts(result.weekly.xts , rets.weekly))
           prediction.date standard.Deviation          ret
2013-04-07              NA                 NA -0.007501789
2013-04-12              NA         0.01556793           NA
2013-04-13              NA                 NA  0.001569891
2013-04-20              NA         0.01504504           NA
2013-04-21              NA         0.01696417 -0.023628035
2013-04-22              NA                 NA  0.005055358
Warning message:
In merge.xts(result.weekly.xts, rets.weekly) : NAs introduced by coercion
> tail(merge.zoo(result.weekly.xts , rets.weekly))
<< R QUIT>> 
```

如您所见，日期是相同的。两个集合都是`xts`对象。调用`merge.xts`产生了不正确的输出。我不知道这些日期是从哪里来的。尝试使用`merge.zoo`R 合并时，会退出（蓝屏样式）。

```
> sessionInfo()
R version 2.15.3 (2013-03-01)
Platform: i386-w64-mingw32/i386 (32-bit)

locale:
[1] LC_COLLATE=Hebrew_Israel.1255  LC_CTYPE=Hebrew_Israel.1255    LC_MONETARY=Hebrew_Israel.1255 LC_NUMERIC=C                   LC_TIME=Hebrew_Israel.1255    

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] quantmod_0.4-0 TTR_0.22-0     xts_0.9-3      zoo_1.7-9      Defaults_1.1-1

loaded via a namespace (and not attached):
[1] grid_2.15.3     lattice_0.20-13 tools_2.15.3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T14:09:51.357

这是一个长期存在的时区错误。时区没有被传递给`as.Date`它应该在的调用。大约一个月前，我通过电子邮件为它提交了一个补丁。在 xts/R/index.R 中，第 29:31 行，当前为：

```
if(value[[1]] == "Date")
  #return( as.Date(.index(x)/86400) )
  return( structure(.index(x) %/% 86400, class="Date")) 
```

应该改为

```
if(value[[1]] == "Date")
  as.Date(as.POSIXct.numeric(attr(x, "index"), origin=as.Date('1970-01-01')), 
          tz=indexTZ(x)) 
```

此外，`xts:::as.POSIXct.numeric`应该更新以匹配基础 R。

# excel - 提取函数结果的行号

> ID：16171100
> 
> 赞同：0
> 
> 时间：2013-04-23T13:50:56.970
> 
> 标签：excel

如果你愿意的话，我有一个简单的表格，上面有 5 个名字和 5 个等级。在另一列中，我使用 LARGE 函数对成绩进行排序。现在有没有办法知道每个“有序”等级的行以获得类似的东西？

```
White      23        31       5
Red        15        23       1
Green      23        23       3
Blue       18        18       4
Grey       31        15       2 
```

我无法计算的那一列是最后一列！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T14:18:15.360

如果你想对这些成绩进行排名，你应该使用 rank() 函数。不大（）。

```
=RANK(D2,$D$2:$D$6,1) 
```

![排名示例](https://i.stack.imgur.com/4j3yh.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T14:19:15.567

你可以试试这个

```
=MATCH(LARGE(B1:B5,1),B1:B5,0) 
```

结果是多行...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T17:06:15.093

在单元格 D1 中放置`=INDEX($A$1:$A$5,MATCH(C1,$B$1:$B$5,0))`

然后在单元格 D2 中放入`=IF(D1<>INDEX($A$1:$A$5,MATCH(C2,$B$1:$B$5,0)),INDEX($A$1:$A$5,MATCH(C2,$B$1:$B$5,0)),INDEX($A$1:$A$5,MATCH(C2,$B$1:$B$5,0)+MATCH(C2,INDIRECT("$B$"&MATCH(C2,$B$1:$B$5,0)+1&":$B$5"),0)))`

`Grades`当存在重复时，这也将起作用

但我强烈建议使用`Sort`如下：

![前](https://i.stack.imgur.com/uzDhw.jpg) ![后](https://i.stack.imgur.com/DMkSU.jpg)

*****另外： ***** 这里是对上述公式的解释。

要获取包含我们要查找的数字（C 列中的数字）的行，您需要使用`Match()`函数。我们`=MATCH(C1,B1:B5,0)`输入`D1`：

![匹配](https://i.stack.imgur.com/ddrEZ.jpg)

这是在做什么：正在寻找 in 中的值`C1`，这是`31` 它正在寻找 in `Range("B1:B5")`，而 0 表示完全匹配。

因此，当寻找匹配时，`C1`我们`31`得到 5。这告诉我们 31 在`Row 5`

现在，要获得`Column A`on的值，`Row 5`我们使用`INDEX()`如下函数：

我们添加`=MATCH(C1,B1:B5,0)`到`D1``=INDEX(A1:A5,MATCH(C1,B1:B5,0))`

![指数](https://i.stack.imgur.com/OOrwm.jpg)

这将寻找`Range("A1:A5")`（`Row 5`这是因为 `=MATCH(C1,B1:B5,0)`= 5），结果将是`Grey`

现在如果我们把这个公式往下拉，我们会发现第一个问题：

![问题](https://i.stack.imgur.com/7o8b8.jpg)

这是我们的 2 个问题：

```
1)  We get an `N/A` error in the last row. 
2)  Although `Green` is only in `Range("A1:A5")` one time we see it twice
    even though it would seem that `White` should be twice. 
```

这些是原因，因为：

```
1) We need to add `$` to the range that will remain the same so when we drag down
   the formula is won't shift the range. As is the formula in `D5` is
   `=INDEX(A5:A9,MATCH(C5,B5:B9,0))` and we receive the error *because*
   `Range("A5:A9")` does not contain `15`, but the issue is we meant
    to look in `Range("A1:A5")` 
```

所以我们将公式更改为：`=INDEX($A$1:$A$5,MATCH(C1,$B$1:$B$5,0))` 请注意，我们没有在公式中使用`$`on ，因为我们***希望***这个值随着我们向下移动而改变。`C1`

 *![修复一个](https://i.stack.imgur.com/ADzQJ.jpg)

但是当它们不应该存在时，我们仍然存在双重值的问题。

因为`D1`是第一个单元格，我们不会更改其中的公式。因为任何等于最大值的东西都只是与之相关联，我看不出有任何理由说明平局的顺序很重要。

相反，我们将开始`D2`并输入`=IF(D1<>INDEX($A$1:$A$5,MATCH(C2,$B$1:$B$5,0)),INDEX($A$1:$A$5,MATCH(C2,$B$1:$B$5,0)),INDEX($A$1:$A$5,MATCH(C2,$B$1:$B$5,0)+MATCH(C2,INDIRECT("$B$"&MATCH(C2,$B$1:$B$5,0)+1&":$B$5"),0)))`

这样做是检查 的值`=INDEX($A$1:$A$5,MATCH(C2,$B$1:$B$5,0))` 是否不等于上面行中的值。（作为一个排序列表意味着所有双精度值将在彼此之上）如果它***不***一样，则使用该值，但如果它相同，我们需要做更多的工作。

如果值不相同，我们使用公式`INDEX($A$1:$A$5,MATCH(C2,$B$1:$B$5,0)+MATCH(C2,INDIRECT("$B$"&MATCH(C2,$B$1:$B$5,0)+1&":$B$5"),0)))`

现在来解释它，我将使用我们的双值示例。在`D3`我们找到公式：`=IF(D2<>INDEX($A$1:$A$5,MATCH(C3,$B$1:$B$5,0)),INDEX($A$1:$A$5,MATCH(C3,$B$1:$B$5,0)),INDEX($A$1:$A$5,MATCH(C3,$B$1:$B$5,0)+MATCH(C3,INDIRECT("$B$"&MATCH(C3,$B$1:$B$5,0)+1&":$B$5"),0)))`

因为我们知道这`INDEX($A$1:$A$5,MATCH(C3,$B$1:$B$5,0))`将等于上面的单元格`White`（`if false``INDEX($A$1:$A$5,MATCH(C3,$B$1:$B$5,0)+MATCH(C3,INDIRECT("$B$"&MATCH(C3,$B$1:$B$5,0)+1&":$B$5"),0))`

我们知道在这种情况下`MATCH(C3,$B$1:$B$5,0)`包含第一个实例的行是行，所以我们需要在 Under 行中查找 23 。所以我们使用which is equal to因为我们将 a 添加到第一个匹配or的行中。`C3``23``Row 1``Row 1``MATCH(C3,INDIRECT("$B$"&MATCH(C3,$B$1:$B$5,0)+1&":$B$5"),0)``MATCH("23", B2:B4,0)``1``23``C3`

现在将返回我们`2`as 的值，该值`23`在 的第二行中，`Range("A2:A5")`在`Red`该范围内，如下所示：`Row 1``Blue``Row 3`

![第 2 行](https://i.stack.imgur.com/T17lc.jpg)

但我们不希望`Row 2`我们知道`23`与`Green`和 相关`Green`的，`Row 3`所以我们将最后找到值的行`23`（`1`或`MATCH(C3,$B$1:$B$5,0)`）添加到我们当前找到它的行（`2`）并获取`Row 3`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T04:37:09.053

这是基于[此链接](http://dailydoseofexcel.com/archives/2011/11/29/finding-the-2nd-3rd-4th-match/)中概述的方法的公式方法。这种方法的最终布局如下所示。

![电子表格布局](https://i.stack.imgur.com/ihc1b.png)

我假设有 1 个标题行，我使用 2 个辅助列（D 和 E）。虽然可以将其他行添加到标题中，但表格必须从 A 列开始，以便 E 列中的公式正常工作。

尽管可以通过将辅助列合并到 F 列的公式中来消除辅助列，但我不建议这样做：生成的公式将很难维护。

**需要的公式**

```
 Cell C2: =LARGE(B:B,ROW(A2)-ROW($A$1))  [Copy down to bottom of data]

  Cell D2: =MATCH(C2,B:B,0)               [Copy down to bottom of data]

  Cell E2: =D2

  Cell E3: =IF(D3<>D2,D3,E2+MATCH(C3,INDIRECT("B"&(E2+1)&":B"&COUNTA(A:A)),0))
           [Copy down to bottom of data]

  Cell F2: =OFFSET($A$2,E2-ROW($A$2),0)   [Copy down to bottom of data] 
```

**答案说明**

有四个步骤可以得到答案：

*   将成绩从最高到最低排序（如您在示例数据中所示）

*   为已排序的成绩创建行号的部分排序

*   获取重复成绩的行号

*   使用该顺序显示每个排序等级的名称

**将成绩从高到低排序**

![成绩排序功能](https://i.stack.imgur.com/2IdXr.png)

正如您所做的那样，我的排序使用该`LARGE`函数，该函数返回范围或数组中的第 n 个最大值。如图所示，`LARGE`单元格中的函数`C2`采用 B 列中的成绩。“n”的`LARGE`计算方式为当前行数减去标题中的行数，在本例中为单元格的 1 行`A1`。当公式被复制下来时，“n”从 1 到 2 到 3 等等。

**部分排序成绩行号**

![用于获取已排序名称的等级行号的公式，带有重复项](https://i.stack.imgur.com/9gOLr.png)

下一步是确定对应于已排序成绩的未排序成绩的行号。

为此，我使用该`MATCH`函数来查找每个已排序成绩在 B 列中未排序成绩列表中的位置。`MATCH`接受三个参数——要匹配的值、进行匹配的范围，以及可选的，匹配的类型，值为 0 或 FALSE 表示完全匹配 - 并返回一个索引号，它表示在查找范围内找到匹配项的位置（1 表示匹配范围中的第一行，2 表示第二行， ETC。）。

在`D2`上面显示的单元格公式中，`MATCH`31 级的函数返回 6，因为 31 位于 B 列的第六行。

单元格的结果`D4`显示了为什么只能使用此公式获得部分排序。当我们尝试查找第二个成绩为 23 的行时，该公式返回一个值 2，它对应于第一个 23 实例的行。这是因为`MATCH`将始终返回它找到的第一个匹配 23 ，在第 2 行！

**获取重复成绩的正确行号**

![获得重复成绩的正确行号的公式](https://i.stack.imgur.com/GxAmg.png)

下一步是为 D 列中的重复行号获取正确的行引用。完成此操作的公式显示在表 E 列的前三个单元格中。

在 E 栏中必须处理三种情况：

1.  对于最高等级的第一个（也可能是唯一一个）实例，可以只使用在 cell 中计算的行号`D2`。

2.  第二种情况处理剩余成绩的行引用的第一个实例。对于这些，可以再次使用在 D 列中计算的行数（通过E 列公式中的语句`TRUE`分支）。`IF`例如，在单元格中`E2`——对应于 23 年级的第一个实例——`D3`可以使用单元格中的行号。

3.  最后一种情况是重复成绩的行。在这里，`MATCH`对于 B 列中的每个重复项，使用一个不包括该成绩的先前匹配项的滑动范围重新计算。例如，对于 C 列中的重复成绩 23，匹配在范围 上`B3:B6`，而不是在`B2:B6`D 列计算中使用的范围。

**按排序顺序显示名称**

![显示按等级排序的名称的公式](https://i.stack.imgur.com/4MLSa.png)

最后一步很简单：获取与排序等级对应的名称。这里使用了OFFSET函数；它的参数是一个单元格引用以及从该引用中找到所需值的行数和列数。*

# java - 如何在java中验证文本字段

> ID：16171102
> 
> 赞同：0
> 
> 时间：2013-04-23T13:51:00.970
> 
> 标签：java, swing, user-interface, jtextfield

您好，我需要一些帮助来验证我的 gui 中的文本字段。我的教授给了我如何做的提示，但它冻结了我的程序。我尝试了其他方法，但是如果我输入文本，则下一个窗口不会显示。

```
import javax.swing.*;
import java.awt.GridLayout;
import java.awt.HeadlessException;
import java.awt.event.*;

//import statements here
public class UserWindow extends JFrame
{

    private JTextField nameField, ageField, creditCardField;
    private JButton backButton, nextButton;

    public UserWindow()
    {
        super("Please enter your information");

        setSize(700,400);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setLocationRelativeTo(null);
        setLayout(new GridLayout(4,2));

        buildPanel();
        setVisible(true);

    }

    private void buildPanel(){

        nameField = new JTextField(10);
        ageField =  new JTextField(2);
        creditCardField = new JTextField(10);

        backButton = new JButton("Back");
        nextButton = new JButton("Next");
        nextButton.addActionListener(new NextButton());
        backButton.addActionListener(new BackButton());

        JLabel NameLabel =  new JLabel("Please enter your name");

        JLabel ageLabel = new JLabel("Enter your age");

        JLabel creditCardLabel = new JLabel("Enter your credit card number");

        JPanel panel1 = new JPanel();
        JPanel panel2 = new JPanel();
        JPanel panel3 = new JPanel();
        JPanel panel4 = new JPanel();
        JPanel panel5 = new JPanel();
        JPanel panel6 = new JPanel();
        JPanel panel7 = new JPanel();
        JPanel panel8 = new JPanel();

        add(panel1);
        add(panel2);
        add(panel3);
        add(panel4);
        add(panel5);
        add(panel6);
        add(panel7);
        add(panel8);

        panel1.add(NameLabel);
        panel2.add(nameField);
        panel4.add(ageField);
        panel6.add(creditCardField);
        panel3.add(ageLabel);
        panel5.add(creditCardLabel);    
        panel7.add(backButton);
        panel8.add(nextButton);

    }//end of panel building

    //action listeners for fields/buttons

    private class NextButton implements ActionListener{
        public void actionPerformed(ActionEvent e){
            String str;
            int age;
            str = nameField.getText();

            if (str.equals("")){
                JOptionPane.showMessageDialog(null,"Please enter your name.");

                while(true){
                    nameField.requestFocusInWindow();
                    if(!str.equals(""))
                        break;
                }
            }

            if(e.getSource() == nextButton)
                new MovieSelection();
            setVisible(false);

        }
    }
    private class BackButton implements ActionListener{
        public void actionPerformed(ActionEvent e){

            if (e.getSource() == backButton)
                setVisible(false);
            new SelectUserWindow();
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T13:59:58.157

`str`如果它最初是空字符串，则永远不会分配新值。

我认为你需要类似的东西

```
str = nameField.getText(); 
```

在你的`while(true)`循环里面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T22:03:32.273

它很冷，因为你有这个：

```
if (str.equals("")){
     JOptionPane.showMessageDialog(null,"Please enter your name.");
     while(true){ //<- Runs forever
          nameField.requestFocusInWindow();
          if(!str.equals(""))
               break;
     }
} 
```

AcId 是正确的，他说您`str`在进入循环（或`if`）后从不分配任何值。这意味着你永远不会改变的值，`str`它永远不会*不*等于`""`，它将永远在循环中运行。循环与用户界面在同一个线程中运行，因此用户界面将没有时间做任何其他事情（因此它被冻结）。

在这种情况下让循环永远运行是没有意义的。似乎您正试图让 GUI 忙于等待用户输入名称。**不要那样做**。而是检查用户是否输入了某些内容，如果没有，则提醒用户并等待用户再次单击该按钮。

所以删除循环并使用一个简单的`if-else`语句。

```
if (str.equals("")){  //User have not entered anything. 
    JOptionPane.showMessageDialog(null,"Please enter your name.");
    nameField.requestFocusInWindow();
    //Do NOT loop here.
}
else { 
    //Do everything you need to do when the user have entered something
} 
```

# retina.js - 使用retina.js 脚本。非视网膜图像根本不显示

> ID：16171103
> 
> 赞同：1
> 
> 时间：2013-04-23T13:51:01.927
> 
> 标签：retina.js

我正在尝试使用retina.js 脚本。如果我理解正确，当没有@2x 版本的图像时，应该显示常规图像。不过，这不是我正在发生的事情。常规版本显示一秒钟然后消失。但是，我确实拥有@2x 版本的图像*已*正确替换。

就像脚本在寻找 @2x 版本一样，如果没有找到，它什么也不显示。这是它应该工作的方式吗？我需要更改脚本中的某些内容吗？我不想或不一定需要拥有我所有图形的@2x 版本。

我在 iPad3 和 iPhone4S 上进行测试

# php - 挣扎于 php 正则表达式

> ID：16171104
> 
> 赞同：1
> 
> 时间：2013-04-23T13:51:05.627
> 
> 标签：php, regex, preg-match-all

我正在为我想象的 preg_match_all() 调用的一个非常简单的正则表达式而苦苦挣扎。我正在寻找模仿维基媒体风格的内部链接系统，它将像这样的 [[link]] 变成一个链接。

我正在寻找一个正则表达式，它将在字符串中搜索 [[foobar]] 的任何示例并将“foobar”返回给我。foob​​ar 应该真的很狂野。

我尝试了以下方法：

```
<?php
 $content = "Lorem ipsum dolor [[sit]] amet, consectetur adipiscing [[elit]].";
 $links = preg_match_all("[[*]]",$content,$matches);
 print_r($matches);
?> 
```

我什么都得不到。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T13:53:21.227

`*`单独并不意味着什么。它是一个量词，它需要与其他东西一起使用。在这种情况下，一个点`.`就可以（意思是“任何事情”）。此外，您可以使用[惰性量词](http://www.regular-expressions.info/repeat.html)而不是贪婪的量词来在遇到`]]`.
所以...

```
$links = preg_match_all("/\[\[(.*?)]]/",$content,$matches); 
```

**编辑：**
您必须转义，`[`因为它们标志着[字符类](http://www.regular-expressions.info/charclass.html)的开始。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T13:54:05.010

```
preg_match_all("/\[\[([^\]]*?)\]\]/i",$content,$matches); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T13:53:34.780

使用以下模式`/\[\[(.*)\]\]/U`：

```
$content = "Lorem ipsum dolor [[sit]] amet, consectetur adipiscing [[elit]].";
$links = preg_match_all("/\[\[(.*)\]\]/U",$content,$matches);
print_r($matches); 
```

解释。正则表达式需要以分隔符开始和结束，即`/`. 方括号`[`必须在正则表达式中转义，例如`\[`. 括号之间的内容必须在一个捕获组内`(.*)`。最后使用 ungreedy 修饰符`U`来确保只捕获最近括号之间的内容。（删除以查看其功能）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-23T13:54:21.137

您需要转义`[`as`\[`然后将整体表达式与 un-greedy flag 匹配`U`。

```
$content = "Lorem ipsum dolor [[sit]] amet, consectetur adipiscing [[elit]].";
$links = preg_match_all("/\[\[(.*)]]/U",$content,$matches);
print_r($matches);

Array(
    [0] => Array (
        [0] => [[sit]]
        [1] => [[elit]]
    )
    [1] => Array (
        [0] => sit
        [1] => elit
    )
) 
```

**编辑**：用户 ridgerunner 指出使用`/U`修饰符被认为是不好的做法，因为它会使所有匹配的量词变得贪婪，包括不贪婪的量词。建议的匹配代码`(.*?)`不是上面发布的内容，它会产生相同的等效答案。

```
$links = preg_match_all("/\[\[(.*?)]]/",$content,$matches); 
```

# linux - 在给它输入后在后台运行 node.js 进程

> ID：16171105
> 
> 赞同：0
> 
> 时间：2013-04-23T13:51:07.437
> 
> 标签：linux, node.js, shell

我有这个 node.js 服务器，一旦生成，它就需要来自标准输入的一些输入。输入不应该立即给出：我需要在给出它们之前等待一些事件（例如来自某人的连接）。如果我发出命令并关闭 shell，服务器就会自行关闭。我想将输入提供给服务器并关闭我的 shell（有效地让服务器保持运行）。

例如，我知道要在后台运行一个进程，我需要这样做`node my_server.js &`，但这会阻止来自命令行的输入。我想给出这个输入，然后把它放在后台。像这样的模块`forever`会自动将其置于后台，而无需让我通过标准输入提供输入。

此外，将脚本置于后台会在关闭 shell 时杀死服务器。

有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T14:06:33.917

我在 Ubuntu 12.04 中使用 gedit 做了一个快速测试，它工作正常。

像“node app.js arg1 arg2”一样启动您的节点应用程序，但是您想要并按Enter键启动程序。然后在程序开始运行后按 CTRL-z。这使您返回终端，但在后台停止该过程。要让它现在在后台运行，只需“bg”并按 Enter。这将使进程现在继续运行，但在后台运行。

您可以确认您仍然使用命令“ps -ef | grep node”，它应该显示您的程序仍在运行。

但是，这仍然会将节点进程附加到终端窗口，因此当您关闭终端窗口时，它将关闭该进程。但我认为这会让您快速轻松地获得大部分您似乎正在寻找的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T14:06:54.603

您要求任何建议，所以这里是：使您的服务器能够在没有用户交互的情况下启动。最简单的方法可能是创建一个包含服务器所需输入的文件，然后像这样启动它：

```
node my_server.js < my_input.txt & 
```

如果所需的输入取决于服务器输出的内容（哎哟），请使用`expect(1)`. 如果可能的话，颠覆整个事情并使用一个模块，比如`commander`从命令行而不是标准输入获取输入。

# windows - Windowsinstaller 中的 Autogen guid (*) 导致 ICE08 错误

> ID：16171106
> 
> 赞同：1
> 
> 时间：2013-04-23T13:51:07.670
> 
> 标签：windows, build, installation, wix, windows-installer

我的 wxs 文件中的两个组件标签如下

```
<Component Id="Comp.Comp1" Guid="*" >
<Condition><![CDATA[VersionNT < 602]]></Condition>
<File Id="File1" Source="$(Dir1)\TestFile.dll" />
 </Component>

<Component Id="Comp.Comp2" Guid="*" >
<Condition><![CDATA[VersionNT >= 602]]></Condition>
<File Id="File2" Source="$(Dir2)\TestFile.dll" />
 </Component> 
```

但是我收到如下错误

```
ICE08: Component: Comp.Comp2 has a duplicate GUID: {2963D8E7-CBEC-50C8-AF4B-65E895FE3283} 
```

即使我给了一个自动生成的 guid 值“*”，我是如何得到这个错误的

谢谢，

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T14:48:22.280

元素的 star-GUID`Component`根据文件的目标位置计算出稳定的 GUID。GUID的**稳定性**对于未来的更新（尤其是修补）至关重要。它在许多情况下都很好用，但将文件放入完全相同的位置的互斥组件不是一个。在这种情况下，您需要显式设置至少一个`Component/@Guid`s.

在上述情况下，您可以执行以下操作：

```
<Component Id="Comp.Comp1" Guid="*" >
    <Condition><![CDATA[VersionNT < 602]]></Condition>

    <File Id="File1" Source="$(Dir1)\TestFile.dll" />
</Component>

<Component Id="Comp.Comp2" Guid="PUT-GUID-HERE">
    <Condition><![CDATA[VersionNT >= 602]]></Condition>

    <File Id="File2" Source="$(Dir2)\TestFile.dll" />
</Component> 
```

从技术上讲，您可以在这种情况下抑制 ICE08 错误，因为组件是互斥的，但我个人会在抑制 ICE 之前执行上述操作。恕我直言，最好是不同的文件最终具有不同的 GUID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T14:01:54.137

您没有显示此片段的上下文（目录元素），但对我来说，您似乎将相同的文件名安装到同一目录两次。这是违反组件规则的。“来源”不同，但条件相同：!VersionNT >= 602。

# doxygen - Doxygen - 将 doxygen 与 gswin64c.exe 一起使用

> ID：16171112
> 
> 赞同：4
> 
> 时间：2013-04-23T13:51:15.687
> 
> 标签：doxygen

我在哪里配置 doxygen 以使用 64 位版本的 ghostscript？默认情况下，doxygen 似乎调用 gswin32c.exe 而不是 gswin64c.exe。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-19T14:21:15.463

懒惰的解决方案：将gswin32c.exe复制到gswin64c.exe。抱歉，我很着急，找不到合适的解决方案，也不想安装 32 位 ghostscript。

# java - 如何从我的代码中删除重复项

> ID：16171125
> 
> 赞同：11
> 
> 时间：2013-04-23T13:51:37.443
> 
> 标签：java, refactoring

我有两种类似的方法。其中一个打印一些东西，其中一个保存一些东西。如您所见，有很多重复的代码。我应该如何重构它并删除这个重复？

```
public static void printSomething(List<String> list) {
    for (String item : list) {
        if (item.contains("aaa")) {
            System.out.println("aaa" + item);
        }
        if (item.contains("bbb")) {
            System.out.println("bbb" + item);
        } else {
            System.out.println(item);
        }
    }
}

public static Map<String, String> getSomething(List<String> list) {
    Map<String, String> map = new HashMap<String, String>();
    for (String item : list) {
        if (item.contains("aaa")) {
            map.put("aaa", item);
        }
        if (item.contains("bbb")) {
            map.put("bbb", item);
        } else {
            //do nothing
        }
    }
    return map;
} 
```

更新：

当方法不完全相似时，代码已更新以解决问题

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T13:57:19.637

`println`假设of`"aaa"`和出现的顺序`"bbb"`无关紧要，您可以将实现替换`printSomething`为

```
public static void printSomething(List<String> list) {
  Map<String, String> map = getSomething(list);
  for(Map.Entry<String, String> entry : map) {
    System.out.println(entry.getKey() + entry.getValue());
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T14:02:22.763

具有方法 action(T t) 的通用接口操作可以减少代码。

```
public interface Action<E> {
        void action(E e);
} 
```

例子：

```
public static void forEach(List<String> list, Action <String> action) {
    for(String s : list){
           action.action(s);

} 
```

现在你只需要 2 种不同的 Action 实现。

如果您不想创建类，可以使用匿名类型。

**如果你知道 c#，这类似于 lambdas。**

编辑：

使用匿名类型：

```
public static Map<String, String> getSomething(List<String> list) {
    final Map<String, String> map = new HashMap<String, String>();
    forEach(list, new Action<String>() {
        @Override
        public void action(String e) {
            if (e.contains("aaa")) {
                map.put("aaa", e);
            }
            if (e.contains("bbb")) {
                map.put("bbb", e);
            } else {
                // do nothing
            }
        }
    });
    return map;
} 
```

创建类：

```
public static Map<String, String> getSomething2(List<String> list) {
    final Map<String, String> map = new HashMap<String, String>();
    forEach(list, new ListToMapAction(map));
    return map;
}

public class ListToMapAction implements Action<String> {

    Map<String, String> map;

    public ListToMapAction(Map<String, String> map) {
        this.map = map;
    }

    @Override
    public void action(String e) {
        if (e.contains("aaa")) {
            map.put("aaa", e);
        }
        if (e.contains("bbb")) {
            map.put("bbb", e);
        } else {
            // do nothing
        }
    }

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T13:55:55.713

在具有一流函数的编程语言中，您将传递一个函数作为参数，指示您想要在循环内执行的操作（例如，请参见下面的更新）。Java 将在版本 8 中包含 lambda，但它们并不能胜任这项工作。

在 Java 的当前状态下，您将不得不接受一些更丑陋的事情——例如，向方法传递一个额外的参数；或者您可以传递实现接口的匿名内部类，但恕我直言，这比我将要建议的更丑陋：

```
static void printSomething(List<String> list, boolean print) 
```

如果`print`是`true`则在循环内打印，否则添加到`Map`. 当然，您必须`if`在循环内添加几个 s 来检查这个条件，并且在开始时，额外添加一个`if`来确定是否`Map`要初始化 s。无论哪种方式，该方法都返回 a `Map`，但`Map`可以`null`用于打印案例。这就是我的意思：

```
static Map<String, String> processSomething(List<String> list, boolean print) {

    Map<String, String> map = null;
    if (!print)
        map = new HashMap<String, String>();

    for (String item : list) {
        if (item.contains("aaa")) {
            if (print)
                System.out.println("aaa" + item);
            else
                map.put("aaa", item);
        }
        if (item.contains("bbb")) {
            if (print)
                System.out.println("bbb" + item);
            else
                map.put("bbb", item);
        } else if (print) {
            System.out.println(item);
        }
    }

    return map;

} 
```

**更新**

例如，在 Python 中 - 它允许将函数作为参数传递，这就是您以优雅的方式解决问题的方式：

```
def processSomething(lst, func):
    result = None
    for item in lst:
        if 'aaa' in item:
            result = func(item, 'aaa', result)
        elif 'bbb' in item:
            result = func(item, 'bbb', result)
        else:
            result = func(item, '', result)
    return result

def printer(item, key, result):
    print key + item

def mapper(item, key, result):
    if not result:
        result = {}
    if key:
        result[key] = item
    return result 
```

看看它怎么运作：

```
processSomething(['aaa', 'bbb', 'ccc'], printer)
=> aaaaaa
   bbbbbb
   ccc

processSomething(['aaa', 'bbb', 'ccc'], mapper)
=> {'aaa': 'aaa', 'bbb': 'bbb'} 
```

# ruby-on-rails - 使用 CanCan 测试哈希键的值

> ID：16171128
> 
> 赞同：0
> 
> 时间：2013-04-23T13:51:44.163
> 
> 标签：ruby-on-rails, ruby, hash, cancan

我有一个带有序列化哈希的 UserProfile 模型，它定义了各种隐私选项：

```
class UserProfile < ActiveRecord::Base
  attr_accessible :bio, :first_name, :last_name, :location, :website_url, :vanity_url, :avatar
  belongs_to :user
  has_one :avatar
  before_create :default_privacy

  PRIVACY_SETTINGS = [:public, :app_global, :contacts, :private]
  serialize :privacy_options, Hash

  private

  def default_privacy
    return if self.privacy_options
    self.privacy_options = {:personal => :app_global, :contacts => :app_global, :productions => :app_global}
  end

end 
```

我正在使用 CanCan 授权访问用户配置文件，如下所示：

```
class Ability
  include CanCan::Ability

  def initialize(user)
    user ||= User.new # guest user (not logged in)
    can :create, UserProfile
    can :read, UserProfile, :privacy_options[:personal].eql?(:public)
    if user.role? :user
      can :read, UserProfile, privacy_options[:personal].eql?(:cp_global)
      can :update, UserProfile, :user_id => user.id
    end
  end

end 
```

但是，以下单元测试会产生`test_user_can_only_read_profile_with_personal_scope_set_to_public(AbilityTest): TypeError: can't convert Symbol into Integer`：

```
require 'test_helper'

class AbilityTest < ActiveSupport::TestCase

  def setup
    @up = user_profiles(:joes_user_profile)
    @ability = Ability.new(@user)
  end

  test "user can only read profile with personal scope set to public" do
    assert @ability.can?(:read, @up)
    @up.personal_privacy = :private
    @up.save
    refute @ability.can?(:read, @up)
  end
end 
```

我对 Ruby 和 Rails 很陌生。在能力模型中测试 privacy_options 键值的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T14:31:25.297

替换这个：

```
can :read, UserProfile, :privacy_options[:personal].eql?(:public) 
```

有了这个 ：

```
can :read, UserProfile do |profile| 
  profile.privacy_options[:personal] == :public 
end 
```

问题是：

*   `:privacy_options[:personal]`是符号的无效语法
*   CanCan 需要选项哈希或块作为方法的（可选）参数（有关更多信息，`can`请参阅[使用块定义能力）](https://github.com/ryanb/cancan/wiki/Defining-Abilities-with-Blocks)

作为旁注，如果可能的话，您不应该将您的隐私选项序列化为哈希 - 正如 Cancan 的文档所述，仅在加载实际记录时才使用块条件。如果您希望能够对集合设置授权，则需要一个哈希条件（可以转换为[关系](http://railscasts.com/episodes/239-activerecord-relation-walkthrough?view=asciicast)），这反过来又要求您的条件以属性为目标（或至少可以通过 SQL 查询表达的东西)

# git - 删除 git 对象目录？

> ID：16171129
> 
> 赞同：0
> 
> 时间：2013-04-23T13:51:45.283
> 
> 标签：git, github, git-commit

我将几百兆字节的图像从我的生产环境复制到我的开发环境中。即使我将它们放在`.gitignore`( `public/uploads/`) 中并且它们不受版本控制（我检查过`git ls-tree -r master --name-only`），我对 GitHub 的最后一次提交也是巨大的（几百兆字节）。

我看到几百兆字节似乎在以下目录中：`.git/objects/`在名为 from `00`to的子文件夹中`ff`。我在 GitHub 上看不到`.git`目录（我提交的地方），但由于其中有大量数据，我想这一定是提交 > 100 MB 的原因。我可以简单地删除下的子文件夹，`.git/objects`或者如何摆脱我不想在版本控制下拥有的数百 MB 图像？

# php - 如何在php中增加最大执行时间

> ID：16171132
> 
> 赞同：233
> 
> 时间：2013-04-23T13:51:58.053
> 
> 标签：php, ini, execution-time

我想增加php 的*最大执行时间*`php.ini`，而不是通过更改文件。

我想从我的 php 文件中增加它。

这可能吗？

* * *

## 回答 #1

> 赞同：513
> 
> 时间：2013-04-23T13:55:30.533

```
ini_set('max_execution_time', '300'); //300 seconds = 5 minutes
ini_set('max_execution_time', '0'); // for infinite time of execution 
```

把它放在你的 PHP 脚本的顶部，让你的脚本松散！

取自[使用 ini_set() 增加 PHP 脚本执行时间限制](http://davidwalsh.name/increase-php-script-execution-time-limit-ini_set)

* * *

## 回答 #2

> 赞同：161
> 
> 时间：2013-04-23T14:00:10.880

`safe_mode`如果关闭，请使用以下语句

```
set_time_limit(0); 
```

* * *

## 回答 #3

> 赞同：64
> 
> 时间：2013-04-23T13:56:33.660

使用 PHP 函数

```
void set_time_limit ( int $seconds ) 
```

最大执行时间，以秒为单位。如果设置为零，则不施加时间限制。

> 当 PHP 在安全模式下运行时，此功能无效。除了关闭安全模式或更改 php.ini 中的时间限制之外，没有其他解决方法。

* * *

## 回答 #4

> 赞同：35
> 
> 时间：2013-04-23T13:54:09.603

你可以试试[`set_time_limit(n)`](http://php.net/manual/en/function.set-time-limit.php)。但是，如果您的 PHP 设置在安全模式下运行，您*只能*从`php.ini`文件中更改它。

# c# - 数据表部分排序高效

> ID：16171135
> 
> 赞同：0
> 
> 时间：2013-04-23T13:51:59.677
> 
> 标签：c#

需要`datatable`按部分条件订购。有一个`datatable`这样的：

```
[0]: P01,10,01; 
[1]: P01,10,02;
     ... 
[n]: P03,10,01;
     ... 
[m]: P03,10,02; 
```

我需要做的是`datatable`按部分数据排序；示例：当第一行是奇数时，它必须按降序排列，而一对必须按升序排列。返回的值必须如下所示：

```
[0]: P02,10,01; 
[1]: P02,10,02;
     ... 
[n]: P03,10,03;
     ... 
[m]: P03,10,02; 
```

我知道排序`datatable`和默认数据视图可以做到这一点。
我怎样才能对这些数据进行排序`datatable`？

# sas - SAS - 如何从数据集中获取最后的“n”个观察结果？

> ID：16171136
> 
> 赞同：7
> 
> 时间：2013-04-23T13:52:07.380
> 
> 标签：sas, dataset

如何仅使用原始数据集的最后 n 个观察值从另一个数据集创建 SAS 数据集。当您知道 n 的值时，这很容易。如果我不知道'n'怎么办？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T14:01:13.517

这假设您有一个宏变量，表示您想要多少个观察值。NOBS 会告诉您当前数据集中的观察次数，而无需阅读全部内容。

```
%let obswant=5;
data want;
set sashelp.class nobs=obscount;
if _n_ gt (obscount-&obswant.);
run; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-29T09:11:09.117

如果数据集很大，您可能不想读取整个数据集。相反，您可以尝试先读取数据集中的观察总数的构造。因此，如果您想获得最后的观察结果：

```
data t;
  input x;
datalines;
1
2
3
4
;

%let dsid=%sysfunc(open(t));
%let num=%sysfunc(attrn(&dsid,nlobs));
%let rc=%sysfunc(close(&dsid));
%let number = 2;

data tt;
set t (firstobs =  %eval(&num.-&number.+1));
run; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-23T14:47:56.127

使用 Joe 的宏变量示例来指定您想要的观察次数，这是另一个答案：

```
%let obswant = 10;
data want;
   do _i_=nobs-(&obswant-1) to nobs;
      set have point=_i_ nobs=nobs;
      output;
      end;
   stop;  /* Needed to stop data step */
run; 
```

这应该会表现得更好，因为它只读取您想要的特定观察结果。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-23T16:20:45.633

为了多样化，这是另一种方法（不一定更好）

```
%let obswant=5;

proc sql noprint;
select nlobs-&obswant.+1 into :obscalc
from dictionary.tables
where libname='SASHELP' and upcase(memname)='CLASS';
quit;

data want;
set sashelp.class (firstobs=&obscalc.);
run; 
```

# r - 奇怪的 lapply 有问题我无法理解

> ID：16171138
> 
> 赞同：1
> 
> 时间：2013-04-23T13:52:11.160
> 
> 标签：r, loops, match, lapply

我有一个`list`长度为 2 的“hhvrs”，带有名称和值。这两个列表元素的名称是年份“1920”和“1929”。

```
$`1920`
      Nykvarn - 147 - 211920       Nykvarn - 262 - 211920 ...
                    1.235629                     1.013191 ...
$`1929`
        Långed - 125 - 11929         Långed - 126 - 11929 ...
                    1.316499                     1.026785 ... 
```

我还有一个`data.frame`由 1920 年和 1929 年两年组成的“数据”。请参阅`dput`这篇文章的底部。
然后我想否定匹配名称（即不包括`list`上面存在的那些名称）。换句话说，我想将名称保留在我的数据框中的最后一列`uniquezCorrectCG`中，这些名称不存在于`list`上面。然后，我想计算每个公司的效率，而列表中没有出现名称。

这是我的代码：

```
hhvrsu=lapply(unique(data$year),function(x){
library(Benchmarking)
datat=data[data$year==x,]
datat2=datat[!(datat$uniquezCorrectCG %in% names(hhvrs[[x]])),]  

#
y <- datat2[,"Ouput_ton",drop=FALSE]
rownames(y)=paste(datat2[,5],"-",datat2[,4])

#inputs
  x=with(datat2,
    cbind(Labour_input_1000_hour,
          Capital_input_1000_sek,
          Electric_input_Mwh,
          Rawmaterial_input_M3))

rownames(x)=paste(datat2[,5],"-",datat2[,4],"-",datat2[,3])
e <- dea(x,y,RTS="vrs")
return(e$eff) }            
)    
names(hhvrsu)=unique(data$year) 
```

但这失败了。例如，公司`Långed - 125 - 11929`年份 1929 仍然存在于我的代码的输出中，但它应该被删除，因为`Långed - 125 - 11929`它存在于上面的列表中......

```
head(hhvrsu[["1929"]])

Billingsfors - 123 - 11929 Billingsfors - 124 - 11929       Långed - 125 - 11929       Långed - 126 - 11929       Långed - 127 - 11929 
                 0.9975506                  1.0000000                  1.0000000                  1.0000000                  1.0000000 
    Hånsfors - 183 - 21929 
                 0.9928677 
```

但是`it still works if i do it manually`：

```
datat=data[data$year==1929,]

  datat2=datat[!(datat$uniquezCorrectCG %in% names(hhvrs[["1929"]])),]  

  #
  y <- datat2[,"Ouput_ton",drop=FALSE]
  rownames(y)=paste(datat2[,5],"-",datat2[,4])

  #inputs
  x=with(datat2,cbind(Labour_input_1000_hour,Capital_input_1000_sek,Electric_input_Mwh,Rawmaterial_input_M3))

  rownames(x)=paste(datat2[,5],"-",datat2[,4],"-",datat2[,3])

  e <- dea(x,y,RTS="vrs")

head(e$eff)
Billingsfors - 123 - 11929 Billingsfors - 124 - 11929     Hånsfors - 183 - 21929    Hällefors - 237 - 21929     Grycksbo - 350 - 21929 
                 0.9984071                  1.0000000                  1.0000000                  0.5863832                  0.9813024 
     Brättne - 100 - 31929 
                 0.9915349 
```

在上面的 e$eff`Långed - 125 - 11929`中被删除了！

`EDIT`：

如果我把它放在`as.character(x)`下面而不是简单地`x`

```
hhvrsu=lapply(unique(data$year),function(x){
    library(Benchmarking)
    datat=data[data$year==x,]
    datat2=datat[!(datat$uniquezCorrectCG %in% names(hhvrs[[**as.character(x)**]])),]  

    #
    y <- datat2[,"Ouput_ton",drop=FALSE]
    rownames(y)=paste(datat2[,5],"-",datat2[,4])

    #inputs
      x=with(datat2,
        cbind(Labour_input_1000_hour,
              Capital_input_1000_sek,
              Electric_input_Mwh,
              Rawmaterial_input_M3))

    rownames(x)=paste(datat2[,5],"-",datat2[,4],"-",datat2[,3])
    e <- dea(x,y,RTS="vrs")
    return(e$eff) }            
    )    
    names(hhvrsu)=unique(data$year) 
```

有什么建议么？

输出：

```
dput(hhvrs)
structure(list(`1920` = structure(c(1.23562876282578, 1.01319073788091, 
1.55783496400001, 1.06191988898698, 1.12744927131341, 1.08504615635299, 
1.25725741409574, 2.03370195312046, 1.00667697472372, 1.00260726981462, 
1.3050604346423, 1.3594555255334, 1.55671945006842, 1.0072581093466, 
1.65164991096899, 2.47385616808447, 1.18471196771314, 1.24186522915967, 
1.65133103063843, Inf, 1.16498198151401, 1.07017484481922), .Names = c("Nykvarn - 147 - 211920", 
"Nykvarn - 262 - 211920", "Tumba - 68 - 381920", "Byske - 294 - 451920", 
"Långed - 127 - 571920", "Väja - 270 - 691920", "Ljusfors - 141 - 731920", 
"Skärblacka - 370 - 731920", "Sätra - 152 - 781920", "Krokfors - 129 - 871920", 
"Åsen - 207 - 1011920", "Åsen - 208 - 1011920", "Lagerfors - 225 - 10121920", 
"Lindefors - 243 - 10281920", "Munksjö - 253 - 10281920", "Qvill - 211 - 10431920", 
"Esseltewell - 375 - 10521920", "Esseltewell - 376 - 10521920", 
"Ulriksfors - 205 - 10541920", "Sellnäs - 352 - 10541920", "Vivstavarv - 314 - 10751920", 
"Älvsborg - 369 - 10791920")), `1929` = structure(c(1.31649939189229, 
1.02678542256861, 1.50667886828221, 1.06101596031178, 1.00477142430659, 
Inf, 1.00038550231904, 1.10347307305662, 1.53782048667181, 1.80890790261425, 
1.06103833744605, 1.00036736526695, 1.01053736983199, 1.01119078294682, 
1.00295000872313, 1.01778128036389, 1.22049428994262, 1.15078822074877, 
1.00346763843347, 1.2192497185324, 1.03195112444193, 1.71491513543284, 
1.00168840525869, 1.00575972592046, 1.105483053952, 1.00427057272637, 
1.94482017228275, 1.00388363163126), .Names = c("Långed - 125 - 11929", 
"Långed - 126 - 11929", "Långed - 127 - 11929", "Hällefors - 234 - 21929", 
"Göteborg-Dals - 156 - 91929", "Papyrus - 280 - 231929", "Sofiehem - 330 - 271929", 
"Tollare - 66 - 361929", "Tumba - 68 - 381929", "Alstermo - 4 - 491929", 
"Billerud - 106 - 571929", "Fengersfors - 135 - 711929", "Gamlestaden - 153 - 821929", 
"Gransholm - 228 - 851929", "Åsen - 207 - 1011929", "Nykvarn - 262 - 1101929", 
"Haga - 24 - 10041929", "Ljusne - 218 - 10181929", "Husum - 232 - 10251929", 
"Munksjö - 253 - 10281929", "Pauliström - 239 - 10311929", "Qvill - 211 - 10431929", 
"Esseltewell - 375 - 10521929", "Ställdalen - 356 - 10531929", 
"Kvarnsveden - 343 - 10541929", "Skutskär - 345 - 10541929", 
"Sellnäs - 352 - 10541929", "Vivstavarv - 314 - 10751929"))), .Names = c("1920", 
"1929")) 
```

`Dput data.frame`

```
dput( data[data$year==1929,][1:5,])

structure(list(company_code = c(1L, 1L, 1L, 1L, 1L), company_name = c("AB Billingsfors-Långed", 
"AB Billingsfors-Långed", "AB Billingsfors-Långed", "AB Billingsfors-Långed", 
"AB Billingsfors-Långed"), year_cg_code = c(11929L, 11929L, 11929L, 
11929L, 11929L), plant_code = 123:127, plant_name = c("Billingsfors", 
"Billingsfors", "Långed", "Långed", "Långed"), plant_location = c("Billingsfors", 
"Billingsfors", "Dals Långed", "Dals Långed", "Dals Långed"), 
    plant_location_by_municipal = c("Bengtsfors", "Bengtsfors", 
    "Bengtsfors", "Bengtsfors", "Bengtsfors"), year = c(1929L, 
    1929L, 1929L, 1929L, 1929L), Output_value_1000_sek = c(720L, 
    2304L, 531L, 3040L, 2079L), Labour_cost_1000_sek = c(102L, 
    348L, 93L, 199L, 225L), Capital_cost_1000_sek = c(108L, 468L, 
    126L, 304L, 180L), Electricity_cost_1000_sek = c(130L, 90L, 
    10L, 120L, 40L), Raw_material_cost_1000_sek = c(174L, 744L, 
    177L, 1824L, 1080L), Output_price_1_sek.ton = c(220L, 220L, 
    220L, 220L, 220L), Output_price__sek.ton = c(196L, 196L, 
    196L, 196L, 196L), Labour_price_sek.hour = c(1, 1.208333333, 
    2.657142857, 1.093406593, 2.083333333), Capital_price_interest.rate = c(4.556666667, 
    4.556666667, 4.556666667, 4.556666667, 4.556666667), Motive_Power_pricekr.MwH = c(43.10344828, 
    67.61833208, 31.54574132, 93.45794393, 45.14672686), Electricity_price_kr.MwH = c(24.34456929, 
    24.19354839, 13.88888889, 25.26315789, 22.22222222), Raw_Material_price_kr.m3 = c(14.5, 
    15.5, 11.8, 19, 12), Mean_raw.material_price = c(14.3, 14.3, 
    14.3, 14.3, 14.3), Output_capacity_ton = c(6000L, 12000L, 
    3000L, 9500L, 9000L), Ouput_ton = c(3272L, 10472L, 2413L, 
    13818L, 9450L), Labour_input_1000_hour = c(102L, 288L, 35L, 
    182L, 108L), Capital_input_1000_sek = c(2853L, 1975L, 219L, 
    2634L, 878L), Motive_Power_Mwh = c(3016L, 1331L, 317L, 1284L, 
    886L), Electric_input_Mwh = c(5340, 3720, 720, 4750, 1800
    ), Rawmaterial_input_M3 = c(12000, 48000, 15000, 96000, 90000
    ), Capacity_Utilization = c(54.53333333, 87.26666667, 80.43333333, 
    145.4526316, 105), Labour_cost_share = c(14.16666667, 15.10416667, 
    17.51412429, 6.546052632, 10.82251082), Capital_cost_share = c(15, 
    20.3125, 23.72881356, 10, 8.658008658), Electricity_cost_share = c(18.05555556, 
    3.90625, 1.883239171, 3.947368421, 1.924001924), Raw_Material_cost_share = c(24.16666667, 
    32.29166667, 33.33333333, 60, 51.94805195), Labour_productivity = c(1.433165382, 
    1.624502304, 3.080154233, 3.392008925, 3.909230144), Capital_productivity = c(4.8, 
    22.1, 45.8, 21.9, 44.8), Power_productivity = c(0.24, 1.73, 
    1.68, 2.37, 2.35), Electricity_productivity = c(0.303469526, 
    1.39421497, 1.659846295, 1.440769899, 2.60017364), Raw.material.productivity = c(1.439189112, 
    1.151527229, 0.849086388, 0.759730866, 0.554210966), uniquezCorrect = c("Billingsfors - 123", 
    "Billingsfors - 124", "Långed - 125", "Långed - 126", "Långed - 127"
    ), uniquezCorrectCG = c("Billingsfors - 123 - 11929", "Billingsfors - 124 - 11929", 
    "Långed - 125 - 11929", "Långed - 126 - 11929", "Långed - 127 - 11929"
    )), .Names = c("company_code", "company_name", "year_cg_code", 
"plant_code", "plant_name", "plant_location", "plant_location_by_municipal", 
"year", "Output_value_1000_sek", "Labour_cost_1000_sek", "Capital_cost_1000_sek", 
"Electricity_cost_1000_sek", "Raw_material_cost_1000_sek", "Output_price_1_sek.ton", 
"Output_price__sek.ton", "Labour_price_sek.hour", "Capital_price_interest.rate", 
"Motive_Power_pricekr.MwH", "Electricity_price_kr.MwH", "Raw_Material_price_kr.m3", 
"Mean_raw.material_price", "Output_capacity_ton", "Ouput_ton", 
"Labour_input_1000_hour", "Capital_input_1000_sek", "Motive_Power_Mwh", 
"Electric_input_Mwh", "Rawmaterial_input_M3", "Capacity_Utilization", 
"Labour_cost_share", "Capital_cost_share", "Electricity_cost_share", 
"Raw_Material_cost_share", "Labour_productivity", "Capital_productivity", 
"Power_productivity", "Electricity_productivity", "Raw.material.productivity", 
"uniquezCorrect", "uniquezCorrectCG"), row.names = 6:10, class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T14:56:42.463

我会做的有点不同（根本不使用`lapply`）。我会先用如下方式`stack`构造一个：`data.frame``hhvrs`

```
my.df <- stack(hhvrs)[, c("ind"), drop = FALSE]
names(my.df) <- c("year")
my.df <- transform(my.df,  uniquezCorrectCG = rownames(my.df))
rownames(my.df) <- NULL 
```

现在检查那些在`year`和`uniquezCorrectCG`中存在`data`但在 中**不** `my.df`存在的条目。

```
data[!duplicated(rbind(my.df, data[, c("year", 
            "uniquezCorrectCG")]))[-seq_len(nrow(my.df))], ] 
```

# makefile - Silabs USB TO UART Debian 构建错误

> ID：16171139
> 
> 赞同：2
> 
> 时间：2013-04-23T13:52:15.567
> 
> 标签：makefile, serial-port, usb, installation, uart

我在为我的 Silabs USB 到 UART 桥接器安装驱动程序时遇到问题。

我从这里下载我的驱动程序： [http ://www.silabs.com/products/mcu/Pages/USBtoUARTBridgeVCPDrivers.aspx](http://www.silabs.com/products/mcu/Pages/USBtoUARTBridgeVCPDrivers.aspx)

我正在运行 Ubuntu 12.04 32 位内核 Linux 3.5.0-27-generic

说明说 make (你的 cp2010x 驱动程序)

```
cp cp2010x.ko to /libmodules/<kernel>/kernel/driver/usb/serial
insmod /libmodules/<kernel>/kernel/driver/usb/serial/usbserial.ko
insmod xp2010x.ko 
```

但是，当我尝试调用 make 时出现此错误：

```
root@grace:/home/admin/Desktop/usb# make
make -C /lib/modules/3.5.0-27-generic/build M=/home/admin/Desktop/usb modules
make[1]: Entering directory `/usr/src/linux-headers-3.5.0-27-generic'
  CC [M]  /home/admin/Desktop/usb/cp210x.o
/home/admin/Desktop/usb/cp210x.c:164:12: error: ‘usb_serial_probe’ undeclared here (not in a function)
/home/admin/Desktop/usb/cp210x.c:165:16: error: ‘usb_serial_disconnect’ undeclared here (not in a function)
/home/admin/Desktop/usb/cp210x.c: In function ‘cp210x_init’:
/home/admin/Desktop/usb/cp210x.c:989:2: error: implicit declaration of function ‘usb_serial_register’ [-Werror=implicit-function-declaration]
/home/admin/Desktop/usb/cp210x.c:996:3: error: implicit declaration of function ‘usb_serial_deregister’ [-Werror=implicit-function-declaration]
cc1: some warnings being treated as errors
make[2]: *** [/home/admin/Desktop/usb/cp210x.o] Error 1
make[1]: *** [_module_/home/admin/Desktop/usb] Error 2
make[1]: Leaving directory `/usr/src/linux-headers-3.5.0-27-generic'
make: *** [all] Error 2 
```

我是 Linux 新手。我用谷歌搜索了很多错误，但找不到任何有效的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-30T19:51:56.480

根据[这个论坛帖子](http://www.raspberrypi.org/phpBB3/viewtopic.php?f=28&t=42876)，这些驱动程序实际上是自 2009 年 3 月以来内核的一部分。您可以在 drivers/usb/serial/cp210x.c 中看到该文件（[这里是](https://git.kernel.org/cgit/linux/kernel/git/stable/linux-stable.git/tree/drivers/usb/serial/cp210x.c)最新稳定版本中文件的链接核心）。

# javascript - 如何使用 loadDataWithBaseURL() 方法从 SDCARD 加载 JS 和 CSS

> ID：16171140
> 
> 赞同：4
> 
> 时间：2013-04-23T13:52:22.993
> 
> 标签：javascript, android, android-webview, android-sdcard

我在 SDCARD 上有一个 .html、.js、.css 文件，在我的情况下，html 文件内容是加密形式。我正在按以下步骤加载 html 文件：

1.  读取文件内容
2.  解密所有内容
3.  使用以下行将所有内容加载到 webview 中：

    ```
    webView.loadDataWithBaseURL(relativePath, decFileContent, "text/html", 
                    "utf-8", null ); 
    ```

    这里`relativePath = "file:///mnt/sdcard/MyFolder/"`

*怎么了？*

它成功加载了解密的内容，但是没有加载分别保存在以 JS/ 和 CSS/ 命名的 relativePath 文件夹中的 js 和 css 文件。它给出了以下错误对话框

> “抱歉！您的应用程序不支持本地存储错误：SECURITY_ERR:DOM Exception 18”

此外，我搜索了上述错误和可能的类似链接是[1](https://stackoverflow.com/questions/11754288/using-webviews-loaddatawithbaseurl-not-loading-images-from-sdcard)和[2](https://stackoverflow.com/questions/9758756/android-not-allowed-to-load-local-resourcefile-android-asset) ，以回答他们建议**从 assets 文件夹**加载 js 和 css 的这些问题。就我而言，我不想从资产加载它们，**我想从 SDCARD 加载它们**。有人知道如何实现这一目标吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T13:58:23.223

给出 HTML 文件的完整路径，而不仅仅是 relativePath 中的目录路径。

或者你也可以使用 loadUrl

[http://developer.android.com/reference/android/webkit/WebView.html#loadUrl%28java.lang.String%29](http://developer.android.com/reference/android/webkit/WebView.html#loadUrl%28java.lang.String%29)

# regex - 文件中的 SED 更改值

> ID：16171142
> 
> 赞同：0
> 
> 时间：2013-04-23T13:52:24.570
> 
> 标签：regex, sed

再次询问有关 SED 的问题。所以我有日志文件：

```
#######################################
################start host1############
#######################################
##java serv
host1,def,java,es,dev L2,0,dev w,fr
host1,def,java,es,dev L3,0,dev w,fr
host1,def,java,es,dev M1,0,dev w,fr
host1,def,java,es,dev M4,0,dev w,fr
host1,def,java,es,dev N1,0,dev w,fr
host1,def,java,es,dev M5,0,dev w,fr

##c++ serv
host1,def,ESServer,es,dev L2,0,dev w,fr
host1,def,ESServer,es,dev L3,0,dev w,fr
host1,def,ESServer,es,dev M1,0,dev w,fr
host1,def,ESServer,es,dev M4,0,dev w,fr
host1,def,ESServer,es,dev N1,0,dev w,fr
host1,def,ESServer,es,dev M5,0,dev w,fr
#######################################
################end host1##############
#######################################

#######################################
################start host2############
#######################################
##java serv
host2,def,java,es,dev L2,0,dev w,fr
host2,def,java,es,dev L3,0,dev w,fr
host2,def,java,es,dev M1,0,dev w,fr
host2,def,java,es,dev M4,0,dev w,fr
host2,def,java,es,dev N1,0,dev w,fr
host2,def,java,es,dev M5,0,dev w,fr

##c++ serv
host2,def,ESServer,es,dev L2,0,dev w,fr
host2,def,ESServer,es,dev L3,0,dev w,fr
host2,def,ESServer,es,dev M1,0,dev w,fr
host2,def,ESServer,es,dev M4,0,dev w,fr
host2,def,ESServer,es,dev N1,0,dev w,fr
host2,def,ESServer,es,dev M5,0,dev w,fr
#######################################
################end host2##############
####################################### 
```

如何在“host1”部分、标签“java”和“c++”中的 L2 符号后将值从 0 更改为 1？这个变体对我不起作用：

```
 sed  '/start host1/,/end host1/s/,L2,0,/L2,1,/g' file 
```

还有一个问题。如何仅在 java 标记和“host1”部分的 c++ 标记中更改此值。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T14:03:51.583

你可以试试这个，

```
sed '/start host1/,/end host1/{s/\(host1,def,java,es,dev \)L2,0/\1L2,1/g}' file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T14:03:58.707

像这样让你开始的东西：

```
awk -F, -vOFS=',' '/host1,def,java,es,dev L2/{$6=1}1' input 
```

# c# - 如何检查数据库可用性

> ID：16171144
> 
> 赞同：26
> 
> 时间：2013-04-23T13:52:37.117
> 
> 标签：c#, .net, sql, sql-server, connection

我有以下代码来测试数据库连接，它会定期运行以测试数据库可用性：

```
private bool CheckDbConn()
{
   SqlConnection conn = null;
   bool result = true;

   try
   {
       conn = DBConnection.getNewCon();
       ConnectionState conState = conn.State;

       if (conState == ConnectionState.Closed || conState == ConnectionState.Broken)
       {
          logger.Warn(LogTopicEnum.Agent, "Connection failed in DB connection test on CheckDBConnection");
          return false;
       }             
   }
   catch (Exception ex)
   {
      logger.Warn(LogTopicEnum.Agent, "Error in DB connection test on CheckDBConnection", ex);
      return false; // any error is considered as db connection error for now
   }
   finally
   {
      try
      {
         if (conn != null)
         {
            conn.Close();
         }
      }
      catch (Exception ex)
      {
         logger.Warn(LogTopicEnum.Agent, "Error closing connection on CheckDBConnection", ex);
         result = false;
      }
   }
   return result;
} 
```

和：

```
static public SqlConnection getNewCon()
{
    SqlConnection newCon = new SqlConnection();
    newCon.ConnectionString = DBConnection.ConnectionString; // m_con.ConnectionString;
    newCon.Open();
    return newCon;
} 
```

我的问题是：这会按预期工作吗？

具体来说，我担心`ConnectionState`. 状态是否可能是：正在连接（因为`Open()`是同步的）？

在这种情况下我该怎么办？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-04-23T13:56:37.333

你可以这样试试。

```
 public bool IsServerConnected()
    {
        using (var l_oConnection = new SqlConnection(DBConnection.ConnectionString))
        {
            try
            {
                l_oConnection.Open();
                return true;
            }
            catch (SqlException)
            {
                return false;
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-23T13:58:15.840

[`SqlConnection`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.open.aspx)`SqlException`当它无法连接到服务器时会抛出一个。

```
public static class SqlExtensions
{
    public static bool IsAvailable(this SqlConnection connection)
    {
        try
        {
            connection.Open();
            connection.Close();
        }
        catch(SqlException)
        {
            return false;
        }

        return true;
    }
} 
```

用法：

```
using(SqlConnection connection = GetConnection())
{
    if(connection.IsAvailable())
    {
        // Success
    }
} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-04-23T14:03:34.100

您的代码看起来不错，但您确实需要使用 IDisposable 模式，以及一些命名约定：

```
private bool CheckDbConnection(string connectionString)
{
    try
    {
        using(var connection = new SqlConnection(connectionString))
        {
            connection.Open();
            return true;
        }
    }
    catch (Exception ex)
    {
        logger.Warn(LogTopicEnum.Agent, "Error in DB connection test on CheckDBConnection", ex);
        return false; // any error is considered as db connection error for now
    }
} 
```

并且`connection.Close()`不应该扔。只需使用该`using`块，您就可以了。

无需测试`Close`状态，因为您刚刚打开它。
[更多关于`Broken`状态：](http://msdn.microsoft.com/en-us/library/system.data.connectionstate.aspx)

> Broken 与数据源的连接已断开。这只能在打开连接后发生。处于这种状态的连接可能会关闭然后重新打开。（此值保留用于产品的未来版本。）

所以真的，不需要测试。

`Connecting`如果您在多线程上下文中并且您的连接实例是共享的，则该状态可能会被捕获。但这不是你的情况。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2021-01-30T05:53:01.243

如果调用，此代码不会阻止 UI。

```
public static class DatabaseExtensions
{
    public static async Task<bool> IsConnectionViable(this string connectionStr)
    {
        await using var sqlConn = new SqlConnection(connectionStr);
        return await sqlConn.IsConnectionViable();
    }

    public static async Task<bool> IsConnectionViable(this SqlConnection connection)
    {
        var isConnected = false;

        try
        {
            await connection.OpenAsync();
            isConnected = (connection.State == ConnectionState.Open);
        }
        catch (Exception)
        {
            // ignored
        }

        return isConnected;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-21T21:30:24.660

此代码适用于 Mysql。

```
public class Program
{
string connection = "SERVER=localhost; user id=root; password=; database=dbname";
private void Form1_Load(object sender, System.EventArgs e)
{
checkifconnected();
}

private void checkifconnected()
{
MySqlConnection connect = new MySqlConnection(connection);
try{
connect.Open();
MessageBox.Show("Database connected");
}
catch
{
MessageBox.Show("you are not connected to database");
}
}

public static void Main()
{

}
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-05T01:51:48.983

我正在使用@Ramesh Durai的解决方案，但发现至少在我的设置中（应用程序启动后定期调用/测试应用程序；使用.Net 3.5和Sql Server 2012数据库）使`IsConnected()`数据库脱机后的第一次调用正在返回`true`. 但是，它在`ExecuteScalar()`下面的行中抛出了预期的异常：

```
public bool IsConnected() {
    using (var conn = new SqlConnection(DBConnection.ConnectionString)) {
        using (var cmd = New SqlCommand("SELECT 1", conn)) {
            try {
                conn.Open();
                cmd.ExecuteScalar();
                return true;
            } catch (SqlException) {
                return false;
            }
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-07-18T20:22:34.390

实际上，在 Visual Studio 中，连接类具有 sonnectionstate 属性。

当连接状态改变时，会触发连接状态改变事件。

您可能想查看这篇文章。

[https://msdn.microsoft.com/en-us/library/aa326268(v=vs.71).aspx](https://msdn.microsoft.com/en-us/library/aa326268(v=vs.71).aspx)

# neural-network - 如何处理神经网络中的实数？

> ID：16171151
> 
> 赞同：2
> 
> 时间：2013-04-23T13:52:44.090
> 
> 标签：neural-network

我一直在玩神经网络。我从近似 XOR 函数开始，没有太多问题。但是，然后我攻击了逼近 sqrt 函数的问题。

问题是输入和输出可以是任何实数，而不仅仅是]0,1[中的数字

有没有办法在神经网络中处理它，以便它可以直接输出实数？

或者我是否必须将输入和输出数据标准化为 ]0,1[ 范围？这不是精度损失吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T16:45:12.390

您可以在输出层中选择另一个激活函数，例如 g(a) = a (identity)。但是，您应该有一个带有非线性激活函数（tanh、logistic）的隐藏层来逼近非线性函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-03T14:36:38.327

最后，我发现最合理和通用的解决方案是对输入进行规范化，然后对输出进行非规范化。

用户必须设置输入/输出范围，然后一切正常。

这是大多数神经网络框架所做的。

# ruby-on-rails - 使用 stringIO 载波 gem 上传的 base64 图像在 Rails 中上传时损坏

> ID：16171152
> 
> 赞同：0
> 
> 时间：2013-04-23T13:52:44.503
> 
> 标签：ruby-on-rails, ruby-on-rails-3, carrierwave

这就是我正在做的事情：

在控制器中：-

```
 dataurl = params[:dataURL]
    io = FilelessIO.new(Base64.decode64(dataurl))
    io.original_filename = "foobar.jpeg"
    io.content_type = "image/jpeg"
    p = SketchilyTest.new
    p.image = io
    p.save 
```

模型：-

```
class FilelessIO < StringIO
    attr_accessor :original_filename
    attr_accessor :content_type
end
class SketchilyTest < ActiveRecord::Base
  attr_accessible :desc, :image
  mount_uploader :image, BaseSixtyfourEncodedUploader

end 
```

BaseSixtyfourEncodedUploader 是一个简单的carrierwave gem 上传器

问题是我没有收到任何错误并且图像被上传但它已损坏。

当我试图在浏览器中打开它时，我收到了这个错误：

```
The image “http://localhost:3000/uploads/sketchily_test/image/41/foobar.jpeg” cannot be displayed because it contains errors. 
```

另请注意，我能够从我的数据库中的 base64_encoded 数据重新生成图像。但无法将其保存为带有载波的 jpeg 图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T15:05:04.913

图像表示为：

```
data:image/jpeg;base64,/9jblablablabla 
```

使用正则*表达式*获取值 `data:image/jpeg`和`/9jblablablabla`

`image/jpeg`将是您的*文件类型*

`/9jblablablabla`将是图像的*表示*。

解码错误的源可能会导致图像文件损坏。然后，您可以使用 FileTemp 创建和保存文件。希望它也能帮助别人..

[http://www.ruby-doc.org/stdlib-1.9.3/libdoc/tempfile/rdoc/Tempfile.html](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/tempfile/rdoc/Tempfile.html)

# linux - Bash CSV 排序和唯一性

> ID：16171153
> 
> 赞同：1
> 
> 时间：2013-04-23T13:52:49.773
> 
> 标签：linux, bash, sorting, awk, unique

Linux 问题：我有`data.csv`包含以下字段和值的 CSV 文件

```
KEY,LEVEL,DATA
2.456,2,aaa
2.456,1,zzz
0.867,2,bbb
9.775,4,ddd
0.867,1,ccc
2.456,0,ttt 
... 
```

该字段`KEY`是一个浮点值，`LEVEL`而是一个整数。我知道第一个字段和第二个字段可以有重复的值，但如果你把它们放在一起，你会有一对独特的。

我想要做的是根据列对文件进行排序`KEY`，然后对于下的每个唯一值，`KEY`只保留下具有较高值的​​行`LEVEL`。排序不是问题：

```
$> sort -t, -k1,2 data.csv  # fields: KEY,LEVEL,DATA
0.867,1,ccc
0.867,2,bbb
2.456,0,ttt
2.456,1,zzz
2.456,2,aaa
9.775,4,ddd
... 
```

但是我怎样才能过滤行以便我得到我想要的，即：

```
0.867,2,bbb
2.456,2,aaa
9.775,4,ddd
... 
```

有没有办法使用 , 等命令行工具来做到`sort`这`uniq`一点`awk`？提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T14:05:19.233

试试这一行：

```
your sort...|awk -F, 'k&&k!=$1{print p}{p=$0;k=$1}END{print p}' 
```

输出：

```
kent$  echo "0.867,1,bbb
0.867,2,ccc
2.456,0,ttt
2.456,1,zzz
2.456,2,aaa
9.775,4,ddd"|awk -F, 'k&&k!=$1{print p}{p=$0;k=$1}END{print p}'
0.867,2,ccc
2.456,2,aaa
9.775,4,ddd 
```

这个想法是，因为您的文件已经排序，只需从顶部遍历文件/输入，如果第一列 ( ) 更改，则打印最后一行，即last`KEY`的最大值`LEVEL``KEY`

尝试使用您的真实数据，它应该可以工作。

整个逻辑（根据您的排序）也可以由 awk 在单个进程中完成。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T14:06:29.473

利用：

```
$> sort -r data.csv | uniq -w 5 | sort 
```

鉴于您的花车格式为“0.000”-“9.999”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T14:06:24.450

Perl 解决方案：

```
perl -aF, -ne '$h{$F[0]} = [@F[1,2]] if $F[1] > $h{$F[0]}[0]
               }{
               print join ",", $_, @{$h{$_}} for sort {$a<=>$b} keys %h' data.csv 
```

请注意，结果与您请求的结果不同，第一行包含`bbb`，而不是`ccc`。

# html - HTML 强制刷新

> ID：16171161
> 
> 赞同：2
> 
> 时间：2013-04-23T13:53:12.007
> 
> 标签：html, css, asp.net-mvc-4

我刚刚完成了一个已经上线一年多的网站的重新设计/重新设计。新的 html，新的 css，新的图像。

如何强制所有访问者刷新他们的缓存，这样他们就不会尝试查找去年的资产并得到一个损坏的页面？

我读过有关 META 刷新的信息，但这似乎不是正确的解决方案。这是我唯一的选择吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T14:09:41.997

只需将查询字符串添加到包含中，浏览器就会认为它是一个新文件，您不必更改名称，甚至不必一次在所有页面上更新它。

例子

```
 <script type="text/javascript" src="myfile.js?v=123"></script>
   <link href="cssfile.css?v=321" rel="stylesheet" type="text/css" /> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-23T13:55:30.610

最简单的方法是更改​​ CSS 文件的名称并引用新文件。

# c# - 全局appBar，为特定页面添加其他按钮到这个appbar

> ID：16171165
> 
> 赞同：0
> 
> 时间：2013-04-23T13:53:25.263
> 
> 标签：c#, windows-phone-8, appbar, application-bar

我在 App.xaml.cs 中添加了一个带有 3 个按钮的 appbar 以将其放在每个页面上，但我有一个页面，我想在其中添加另一个按钮。

我所做的是，我从 App.xaml.cs 中获得带有 3 个默认按钮的 appbar，然后添加我的另一个按钮。问题是当它被添加并且当我改变页面时，我添加的按钮保持可见......因此，这是对象引用的问题，因为每个页面都引用相同的应用栏。

我想知道是否可以只为带有 4 个按钮的页面复制此应用栏...（Icloneable？但我不知道如何：/）你怎么看？我还应该提到一些按钮使用导航转到另一个页面。

这是我的代码：

应用程序.xaml.cs

```
private ApplicationBar _appBar;
public ApplicationBar AppBar { get { return _appBar; } } //property called in other page

//Method called in the constructor
private void BuildLocalizedApplicationBar()
    {
        // Set the page's ApplicationBar to a new instance of ApplicationBar.
        _appBar = new ApplicationBar();

        // Create a new button and set the text value to the localized string from AppResources.
        var appBarButtonScan = new ApplicationBarIconButton(new Uri("/Assets/AppBar/White/appbar.qr.png", UriKind.Relative));
        appBarButtonScan.Click += AppBarButtonScanOnClick;
        appBarButtonScan.Text = AppResources.Scan;

        var appBarButtonSearch = new ApplicationBarIconButton(new Uri("/Assets/AppBar/White/appbar.search.png", UriKind.Relative));
        appBarButtonSearch.Click += AppBarButtonSearchOnClick;
        appBarButtonSearch.Text = AppResources.Search;

        var appBarButtonFacebook = new ApplicationBarIconButton(new Uri("/Assets/AppBar/White/appbar.facebook.png", UriKind.Relative));
        appBarButtonFacebook.Click += AppBarButtonFacebookOnClick;
        appBarButtonFacebook.Text = AppResources.MyAccount;

        _appBar.Buttons.Add(appBarButtonScan);
        _appBar.Buttons.Add(appBarButtonSearch);
        _appBar.Buttons.Add(appBarButtonFacebook);

        // Create a new menu item with the localized string from AppResources.
        ApplicationBarMenuItem appBarMenuSettings = new ApplicationBarMenuItem(AppResources.SettingsTitle);
        _appBar.MenuItems.Add(appBarMenuSettings);
    } 
```

在我想要另外一个按钮的页面中：

```
private void BuildLocalizedApplicationBar()
    {
        App _app = Application.Current as App; //in my page, it's an attribute that I initialize in my constructor.
        ApplicationBar = _app.AppBar; //get the appbar with 3 buttons from App.xaml.cs

        // Create new buttons and set the text value to the localized string from AppResources.
        ApplicationBarIconButton appBarButtonTagPlace = new ApplicationBarIconButton(new Uri("/Assets/AppBar/White/appbar.heart.outline.png", UriKind.Relative));
        appBarButtonTagPlace.Text = AppResources.TagThisPlaceTitle;
        appBarButtonTagPlace.Click += AppBarButtonTagPlaceOnClick;

        ApplicationBar.Buttons.Add(appBarButtonTagPlace);
    } 
```

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T15:44:08.220

离开具有额外按钮的页面时，您可以删除该按钮。

```
protected override void OnNavigatingFrom(NavigatingCancelEventArgs e)
{
    ApplicationBar.Buttons.Remove(appBarButtonTagPlace);
    base.OnNavigatedFrom(e);
} 
```

# python - 为什么在 python 范围 (0,x**2+1) 中非常慢？

> ID：16171167
> 
> 赞同：-3
> 
> 时间：2013-04-23T13:53:29.760
> 
> 标签：python

这是我的代码

```
def(x):
    for i in range (0,x**2+1):
        ... 
```

但是我发现它很慢！谁能告诉我原因，谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T13:54:49.037

在 Python 2.x 中：`range`创建直到 stop 参数的所有数字的列表（在您的情况下看起来很大）。

您可以尝试使用`xrange`而不是创建迭代器而不是列表。

# performance - 纯数据存储的 geom.Point 有多快？

> ID：16171170
> 
> 赞同：0
> 
> 时间：2013-04-23T13:53:35.480
> 
> 标签：performance, actionscript-3, point

我将需要存储大量的 x/y 位置对。现在我不确定是否对这些使用 Flash geom.Point-class，因为性能对我的应用程序很重要，而且我不会使用任何 Point-class 的方法。所以我想知道性能是否会受益于我创建和使用只有 x 和 y 属性的自定义类，或者我是否也可以只使用 geom.Point 而不会降低性能？

或者换句话说：geom.Point 的许多方法（我不会调用）的纯粹存在是否会影响它的实例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:24:08.370

It would most certainly be quicker creating a small class to store x and y values as the overhead from the Point class will have an effect on the speed of the program. By writing your own class you can also take advantage of writing your own functions to handle simple data manupulation (adding/subtracting/multiplying) rather than having to do `x1 + x2` and `y1 + y2`.

For an example try making a blank project with nothing but a timer and a loop and time how long it takes to create 10 million (for example) `Point`s and store them in an array, and how long it takes to create 10 million of your own class with only x and y member variables.

# android - 尝试开始视频录制时出现空指针异常

> ID：16171175
> 
> 赞同：0
> 
> 时间：2013-04-23T13:53:47.180
> 
> 标签：android, camera, nullpointerexception

我正在尝试使用我的应用程序录制视频，但是当我单击录制按钮时，它会在`Camera.Parameters params = mCamera.getParameters();`. 我搜索了很多，但找到了一种解决方案，例如`camera.open()`但在我的情况下也不起作用。我的手机有后置摄像头，所以我也尝试了 camera.open(0) 或 camera.open(1) 但没有任何帮助。

这是我的代码供您参考。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    //mCamera = Camera.open(0);
     if (mCamera == null) {
    mCamera = getCameraInstance();
    // Create preview view and set it as the content of our activity.
    mPreview = new CameraPreview(this, mCamera);
    } else {
        mCamera.release();
        mCamera = getCameraInstance();

        mPreview = new CameraPreview(this, mCamera);     
        }
      int i = R.id.videoFrameView;
        Object o = this.findViewById(i);
        final FrameLayout preview = (FrameLayout) o;            

        preview.addView(mPreview);
        //mCamera = Camera.open(1);
        Camera.Parameters params = mCamera.getParameters();
   // Here i am getting nullpointer exception. 
        params.set("cam_mode", 1);
        mCamera.setParameters(params);

        sizes = params.getSupportedPreviewSizes(); 
```

这是我的logacat。

```
04-23 19:21:27.642: E/AndroidRuntime(25598): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.aml.videoaml/com.aml.videoaml.RecordActivity}: java.lang.NullPointerException
04-23 19:21:27.642: E/AndroidRuntime(25598):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2077)
04-23 19:21:27.642: E/AndroidRuntime(25598):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2104)
04-23 19:21:27.642: E/AndroidRuntime(25598):    at android.app.ActivityThread.access$600(ActivityThread.java:134)
04-23 19:21:27.642: E/AndroidRuntime(25598):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1247)
04-23 19:21:27.642: E/AndroidRuntime(25598):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-23 19:21:27.642: E/AndroidRuntime(25598):    at android.os.Looper.loop(Looper.java:154)
04-23 19:21:27.642: E/AndroidRuntime(25598):    at android.app.ActivityThread.main(ActivityThread.java:4624)
04-23 19:21:27.642: E/AndroidRuntime(25598):    at java.lang.reflect.Method.invokeNative(Native Method)
04-23 19:21:27.642: E/AndroidRuntime(25598):    at java.lang.reflect.Method.invoke(Method.java:511)
04-23 19:21:27.642: E/AndroidRuntime(25598):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:809)
04-23 19:21:27.642: E/AndroidRuntime(25598):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:576)
04-23 19:21:27.642: E/AndroidRuntime(25598):    at dalvik.system.NativeStart.main(Native Method)
04-23 19:21:27.642: E/AndroidRuntime(25598): Caused by: java.lang.NullPointerException
04-23 19:21:27.642: E/AndroidRuntime(25598):    at com.aml.videoaml.RecordActivity.onCreate(RecordActivity.java:63)
04-23 19:21:27.642: E/AndroidRuntime(25598):    at android.app.Activity.performCreate(Activity.java:4479)
04-23 19:21:27.642: E/AndroidRuntime(25598):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1050)
04-23 19:21:27.642: E/AndroidRuntime(25598):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2041)
04-23 19:21:27.642: E/AndroidRuntime(25598): 
```

我不明白我的代码有什么问题，请给我任何参考或提示。
谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:01:00.210

如果由于某种原因未释放相机或应用程序崩溃，则您可能无法打开相机。我不确定您的情况，但您也可以考虑这种可能性。在这种情况下，重新启动设备将起作用。

# sql - SQL Server char 和 nchar 列的搜索方式不同

> ID：16171177
> 
> 赞同：1
> 
> 时间：2013-04-23T13:53:52.450
> 
> 标签：sql, sql-server-2008

我们有一个奇怪的问题。我们正在升级 JDE，并且数据库架构正在发生变化 - 一些 char 列正在更改为 nchar 类型。但是，我们发现某些搜索不再有效，并且我们发现这在我们的 SQL Server 2008 数据库中是一致的：

在我测试的数据库中，ItemNumber 列是一个 char(25) 并且具有不同长度的内容。

```
SELECT * FROM TableName WHERE ItemNumber LIKE '%S' 
```

返回一堆行。但是，如果我们将列更改为 nchar(25)，则该查询现在只返回那些 ItemNumber 值以“S”结尾*且*长度为 25 个字符的行，因此现在似乎（可能正确）采用尾随空格考虑到 - 如果您将通配符值更改为“%S”，它会找到以“S”结尾的 24 个字符项目编号。

显然，这对我们来说是一个相当大的问题，因为 *S 搜索在 JDE 中不再起作用，因为底层数据库调用现在需要修剪每个 nchar 列。这是一个已知问题，还是我们需要更改的某个设置？

*附加信息* 我们无法控制所使用的列类型，也无法更改生成的基础 SQL，因为这是我们的 ERP 系统及其升级的一部分。我们已经记录了与 Oracle 的通话，但据我所知，他们没有看到这一点，也无法复制它（但我们不知道他们在什么情况下尝试这样做），再加上它在我们的其他数据库/服务器上发生的事情让我想知道它是否不是某个晦涩的设置。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T14:11:37.803

从[LIKE (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms179859.aspx)的文档中：

> 当您将 Unicode 数据（nchar 或 nvarchar 数据类型）与 LIKE 一起使用时，尾随空格很重要；但是，对于非 Unicode 数据，尾随空格并不重要。

我用下表重现了您的问题：

```
DECLARE @t TABLE(x NCHAR(25));
INSERT @t SELECT N'nanaS';
SELECT x FROM @t WHERE x LIKE N'%S'; 
```

结果：

```
(0 row(s) affected) 
```

但是，如果您`NVARCHAR`改为使用，则不会出现此问题：

```
DECLARE @t TABLE(x NVARCHAR(25));
INSERT @t SELECT N'nanaS';
SELECT x FROM @t WHERE x LIKE N'%S'; 
```

结果：

```
x
-----
nanaS 
```

但是，即使`NVARCHAR`在`WHERE`子句中转换为，原始表也没有产生预期的结果：

```
DECLARE @t TABLE(x NCHAR(25));
INSERT @t SELECT N'nanaS';
SELECT x FROM @t WHERE CONVERT(NVARCHAR(25),x) LIKE N'%S'; 
```

结果：

```
(0 row(s) affected) 
```

因此，一个潜在的解决方法是首先使用正确的数据类型（并且始终为 Unicode strings 加上前缀`N'properly'`。如果您无法使数据类型正确，您可以使用`RTRIM()`Aushin 发布的解决方法，但请记住 HLGEM 的评论也是。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T13:57:43.947

编辑：我在下面的解释是基于对您的问题的误读。虽然 RTRIM 可以工作，但我没有意识到您使用的不是 nvarchar 而是 char。Aaron 和 Gordon 提供了更好的见解。

```
SELECT * FROM TableName WHERE RTRIM(ItemNumber) LIKE N'%S' 
```

> 这是因为对于 nvarchar(25)，“S”的最后一个字符是 S。
> 
> 对于 nchar(25)，'S' 实际上是 'S' + 24 个空格。所以你的最后一个字符是一个空格。

# javascript - dropbox.js，未执行成功登录代码

> ID：16171180
> 
> 赞同：1
> 
> 时间：2013-04-23T13:53:54.043
> 
> 标签：javascript, oauth, dropbox

所以我在玩 dropbox.js。在 github 上的入门指南中，用于登录的代码片段是：

```
client.authenticate(function(error, client) {
  if (error) {
    // Replace with a call to your own error-handling code.
    //
    // Don't forget to return from the callback, so you don't execute the code
    // that assumes everything went well.
    return showError(error);
  }

  // Replace with a call to your own application code.
  //
  // The user authorized your app, and everything went well.
  // client is a Dropbox.Client instance that you can use to make API calls.
  doSomethingCool(client);
}); 
```

背景：我正在使用 Dropbox.Drivers.Redirect 驱动程序，因此在调用 client.authenticate() 时，用户会被带到 Dropbox 登录页面，登录，授权我的应用程序，然后被重定向回整个页面过程开始于。

但是，在登录 Dropbox 并重定向回我的页面后，我的 doSomethingCool() 方法（或者实际上，传递给 authenticate() 的回调的任何部分）都被完全忽略了。

但是，如果在调用 authenticate() 时用户*已经*登录到 Dropbox，则 dropbox.js 不会将它们传送到 dropbox.com（我猜它只是在内部验证当前会话是否有效），而是回调（和doSomethingCool()) 确实被执行了！

我想要做的实际事情是：在我的页面上，用户正在为 web 应用程序选择一种支持存储的方法。一旦他们登录 Dropbox 并被重定向回我的页面，我实际上希望他们转到应用程序的主要部分，而不是这个小选择器屏幕。Dropbox 登录后似乎没有指定不同返回地址的方法，所以我打算在 authenticate() 的回调中使用 window.location.replace 手动完成。但它不起作用:(

一种替代方法是在调用 client.authenticate() 之前使用 AJAX 向我的域发送一个标志 - 以指示用户在 OAuth 流中。然后，当我的服务器再次请求我的选择器屏幕时（通过 Dropbox 登录后的重定向），自动重定向到主应用程序。但这有点乱（不是吗？）

# php - Magento 不会运行我的安装脚本

> ID：16171183
> 
> 赞同：0
> 
> 时间：2013-04-23T13:54:03.933
> 
> 标签：php, magento, zend-framework, installation

好的，所以我正在尝试使用我的模块向注册中添加一个字段。显然我必须添加一个属性。所以我的“安装脚本”实际上只是对客户实体的升级。但是，该模块已启用，但是当我刷新前端时，它不会运行我的安装脚本。我在前面放了一个骰子，看看它是否能击中它而不是它。

我检查了大约 7 个其他堆栈溢出问题，每个错误都非常明显。诸如配置与它所在的文件夹不匹配之类的东西。使用 customer_setup 作为名称。设置文件中的错误。我一遍又一遍地查看我的代码，我知道我错过了一些小东西。某处的一些错字......但我现在浪费了太多时间，所以我把它交给你们伟大的人。

配置文件

```
<config>
    <modules>
        <BlizzardLabs_Customer>
            <version>0.1.0</version>
        </BlizzardLabs_Customer>
    </modules>
    <global>
        <fieldsets>
            <customer_account>
                <flavour>
                  <create>1</create>
                  <update>1</update>
                </flavour>
            </customer_account>
        </fieldsets>
        <resources>
            <blizzardlabs_customer_setup>
                <setup>
                    <module>BlizzardLabs_Customer</module>
                    <class>BlizzardLabs_Customer_Model_Entity_Setup</class>
                </setup>
            </blizzardlabs_customer_setup>
        </resources>
    </global>
</config> 
```

BlizzardLabs/Customer/Model/Entity/Setup.php

```
class BlizzardLabs_Customer_Model_Entity_Setup extends Mage_Customer_Model_Entity_Setup {

  public function getDefaultEntities() {
    $entities = parent::getDefaultEntities();

    // Add flavour to customer attributes
    $entities['customer']['attributes']['flavour'] = array(
        'label' => 'Ice Cream Flavour',
        'visible' => true,
        'required' => true,
    );

    return $entities;
  }

} 
```

BlizzardLabs/Customer/sql/blizzardlabs_customer_setup/mysql4-install-0.1.0.php

```
Mage::log('Installing BlizzardLabs_Customer');

$installer = $this;
$installer->startSetup();
$installer->addAttribute('customer', 'flavour', array(
    'label' => 'Ice Cream Flavour',
    'type' => 'varchar',
    'input' => 'text',
    'visible' => true,
    'required' => true,
    'position' => 1,
));

$attrs = array('flavour');

foreach ($attrs as $item) {
  $attr = Mage::getSingleton('eav/config')->getAttribute('customer', $item);
  $attr->setData('used_in_forms', array('adminhtml_customer','customer_account_edit','customer_account_create'))->save();
}

$installer->endSetup();

echo "information added to database"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T14:43:00.867

所以我想通了。我不确定这是否是版本问题，但为了彻底，我使用的是 magento 1.13。

这是我的问题：

```
<blizzardlabs_customer_setup>
</blizzardlabs_customer_setup> 
```

需要：

```
 <blizzardlabscustomer_setup>  
  </blizzardlabscustomer_setup> 
```

我当然不得不编辑我的文件夹以匹配这个。所以新的路径是`/BlizzardLabs/Customer/sql/blizzardlabscustomer_setup/<file_name>`。

此外，为了后代，使用“customer_setup”将不起作用，因为这会与 Magento 基类发生冲突并且不会运行安装脚本。

我不确定这是 magento 版本问题还是旧问题，但在 _setup 之前不能有任何下划线。谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T14:34:17.947

```
BlizzardLabs/Customer/sql/mysql4-install-0.1.0.php 
```

这不应该是（至少在我写过的每个模块中）

```
BlizzardLabs/Customer/sql/customer_setup/mysql4-install-0.1.0.php 
```

或者也许（以上可能与 mage_customer 冲突）

```
BlizzardLabs/Customer/sql/blizzardlabs_customer_setup/mysql4-install-0.1.0.php 
```

# joomla - Joomla Hit 模块 CSS

> ID：16171187
> 
> 赞同：0
> 
> 时间：2013-04-23T13:54:11.347
> 
> 标签：joomla, count, hit

所以我将此模块用于 Joomla 网站： [http ://extensions.joomla.org/extensions/site-management/analytics/visitors/20925](http://extensions.joomla.org/extensions/site-management/analytics/visitors/20925)

我想知道如何编辑它的CSS？它在模块周围设置了一个边框，我也想摆脱“创建者”文本。我似乎无法在任何地方找到要编辑的 CSS 文件。将不胜感激任何帮助谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T14:24:56.293

您需要在第**29**行的**default.php中查找以下内容**

 **```
.hitcounter_container {
    background-color: #FFFFFF;
    border: 1px solid #DADADA;
    padding: 10px;
} 
```

`border: 1px solid #DADADA;`并从中删除。

至于删除“创建者”文本，请确保在我回答如何删除之前允许您删除它。**

# html - 混合应用程序性能细节

> ID：16171195
> 
> 赞同：1
> 
> 时间：2013-04-23T13:54:26.973
> 
> 标签：html, performance, native, hybrid

我已经阅读了许多文章、博客、论坛讨论等，表达了基于 HTML5 的应用程序在超过一定的复杂性阈值时变得缓慢并且容易崩溃的观点或观察。然而，我还没有找到任何关于“慢”或“复杂”的具体信息。一个应用程序在什么时候变得足够复杂以至于它作为混合应用程序运行比作为原生应用程序运行得更慢？从这个意义上说，是什么让应用程序变得复杂？这可以解决吗？

我的公司正在为我们的第一个应用程序选择原生应用程序还是混合应用程序，如果没有更好地理解这意味着什么，很难确定提议的应用程序是否足够复杂以排除混合开发。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-03T15:37:39.287

没有什么灵丹妙药可以有基准或阈值来判断应用程序决定混合或原生应用程序的速度或复杂程度。在我看来，您和您的利益相关者必须根据您的要求和情况为应用程序定义此阈值。

有一个关于它的优秀博客，（我希望该博客的第二部分很快就会出现......），它试图从更具战略性的角度回答上述问题，不仅是您描述的参数，还有一系列在你说一个或另一个之前，你必须确定的其他方面。

文章描述了以下内容，但您可以添加或减去更多内容。

领导力 可用性 绩效 可维护性 适应性 预算 上市时间 技能和资源

以下是链接

[https://pixyflux.wordpress.com/2015/09/03/how-much-native-binary-vs-spectrum/](https://pixyflux.wordpress.com/2015/09/03/how-much-native-binary-vs-spectrum/)

# assembly - 检查 16 位值并返回奇偶校验的过程

> ID：16171198
> 
> 赞同：0
> 
> 时间：2013-04-23T13:54:38.630
> 
> 标签：assembly, cpu-registers

我正在使用[sms32v50 模拟工具](http://www.softwareforeducation.com/sms32v50/)。

我需要检查 16 位值的奇偶校验（在 2 个寄存器中给出）。我应该得到奇数或偶数位，以 Signflag 形式返回。这应该是一个程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T13:39:38.060

sms32v50 asm语言表面上看起来很像8086，但实际上在很多方面都不同。在这种情况下，最重要的区别是它没有奇偶校验标志，因此没有捷径。

所以这就是它的样子（未经测试）

```
XOR AL, BL    ; assuming AL, BL are inputs
PUSH AL
POP BL
SHL BL
SHL BL
SHL BL
SHL BL
XOR AL, BL
PUSH AL
POP BL
SHL BL
SHL BL
XOR AL, BL
PUSH AL
POP BL
SHL BL
XOR AL, BL
; parity is now in sign flag (and the sign bit of AL) 
```

奇偶校验计算只是“将所有位相异或”。这里的想法是可以重新分配这样的 xor 以使其更加并行。另一种方式，并行执行较少，可能如下所示：（未测试）

```
XOR AL, BL
MOV CL, 8
_looptop:
PUSH AL
POP BL
SHL BL
XOR AL, BL
SUB CL, 1
JNZ _looptop 
```

或者使用查找表：（未测试）

```
JMP code
DB 0
DB -1
DB -1
DB 0
DB -1
DB 0
DB 0
DB -1
DB -1
DB 0
DB 0
DB -1
DB 0
DB -1
DB -1
DB 0
code:
XOR AL, BL
PUSH AL
POP BL
SHR BL
SHR BL
SHR BL
SHR BL
XOR AL, BL
AND AL, 15
ADD AL, 2   ; this 2 here assumes that the JMP to code is at 0,
            ; so you may need to add more to it
MOV AL, [AL]
OR AL, AL ; this is just to update the sign flag 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T07:16:32.740

这是完整的工作代码，非常感谢哈罗德！他几乎完成了所有这一切！

```
-----------------------

MOV AL,03   ; register a, 1\. part of input
MOV BL,03   ; register b, 2\. part of input

; --------------
; For visual control, saving the inputs (temporary)
; --------------
PUSH AL
POP CL
PUSH BL
POP DL

; --------------
; Paritytest
; --------------
XOR AL, BL  ; compare exclusive OR the both registers
PUSH AL     ; A save temporary
POP BL      ; A is taken back in B
SHL BL      ; B is moved to the left, MSB get lost
SHL BL      ; B is moved to the left, MSB get lost
SHL BL      ; B is moved to the left, MSB get lost
SHL BL      ; B is moved to the left, MSB get lost
XOR AL, BL  ; compare exclusive OR the both regsiters
PUSH AL     ; A temporary saved
POP BL      ; A is taken in B
SHL BL      ; B is moved to the left, MSB get lost
SHL BL      ; B is moved to the left, MSB get lost
XOR AL, BL  ; vergleiche exklusive ODER die beiden register
PUSH AL     ; A zwischenspeichern
POP BL      ; A wird in B zurueckgeholt
SHL BL      ; B wird nach links geschoben, MSB geht absichtlich verloren
XOR AL, BL  ; signflag is now set, if odd.

END 
```

# c - 从浮点数转换为整数时，浮点数结果如何四舍五入？

> ID：16171199
> 
> 赞同：0
> 
> 时间：2013-04-23T13:54:41.157
> 
> 标签：c, type-conversion

从浮点数转换为整数时，浮点数结果如何四舍五入？

有时我在整数变量之间进行了一些复杂的算术运算（包括乘法、除法等），并将结果再次转换为 int。

例子：

```
result = (int) ((int1 + int2) * int3 / int4); 
```

有时结果会舍入到最接近的整数，有时会舍入到下一个整数，即使浮点结果更接近于上一个整数，有时结果会向上或向下舍入 2 个整数（即，如果结果是-150.69 可能发生结果 = -149)。

从 float 到 int 的转换有一些规律，还是取决于具体情况？

提前致谢。

* * *

例子：

```
int1 = 31;
int2 = -1366;
int3 = 50;
int4 = 1000; 
```

结果应该是-66.75，但返回的是-65。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:59:47.643

在您的代码中，除非`int1`through`int4`实际上是浮点数，否则您没有任何浮点类型，因此您的问题与您的代码无关。

至于问题本身，浮点到整数的转换总是通过截断（丢弃小数部分）进行。对于舍入，标准库有许多函数，如`floor`、`ceil`、`round`等，可以执行不同类型的舍入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T14:04:31.803

任何 C 书籍都会向您解释“转换法则”。有很多“谷歌”材料可用

看看这个 [http://www.cs.wfu.edu/~torgerse/Kokua/More_SGI/007-0701-150/sgi_html/ch05.html](http://www.cs.wfu.edu/~torgerse/Kokua/More_SGI/007-0701-150/sgi_html/ch05.html)

# visual-studio - Faster ResolveAssemblyReference 任务

> ID：16171204
> 
> 赞同：2
> 
> 时间：2013-04-23T13:54:49.593
> 
> 标签：visual-studio, msbuild

我想更快地构建我的解决方案。从 VS 输出窗口我看到[ResolveAssemblyReference 任务](http://msdn.microsoft.com/en-us/library/vstudio/9ad3f294.aspx)需要很多时间。

我怎样才能让它更快？也许我应该为 Assembly Reference Resolve 任务指定路径。

我的解决方案中的所有程序集都在一个文件夹中。所以这应该是一个快速的操作。

我认为这对许多情况都有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T16:16:52.760

正如您在在线文档中阅读的那样，该`ResolveAssemblyReference`任务用于确定依赖项列表。从在线文档：

> *确定依赖于指定程序集的所有程序集。这包括二阶和**n 阶**依赖项。*

为了提高您当前的构建性能，您可以执行以下两件事：

1.  减少依赖
2.  将 GAC 程序集引用的 Copy Local 设置为“False”

## 减少依赖

由于该任务可以搜索“n 阶”的依赖关系，因此减少依赖关系是您的最佳选择。解决方案/项目的依赖项越多，任务运行的速度就越慢。

## 将 GAC 程序集引用的 Copy Local 设置为“False”

您可以做的另一件事是确保将[Copy Local](http://msdn.microsoft.com/en-us/library/vstudio/t1zz5y8c%28v=vs.100%29.aspx)值设置为您**知道**将在 GAC 中的`false`任何程序集引用。这不会为评估过程节省太多时间，但可以确保 Visual Studio 不会花时间将程序集复制到已通过 GAC 访问的 bin 中。请记住，如果目标机器（将使用应用程序/库/等）在其 GAC 中没有某个程序集

# settings - 多少设置屏幕是标准的

> ID：16171206
> 
> 赞同：1
> 
> 时间：2013-04-23T13:54:51.280
> 
> 标签：settings, screenshot

图片显示了我的 HTC One X 上的设置页面。

其中有多少是标准的 Android GUI 组件？

我该如何制作一个看起来有点像这样的应用程序？

我正在寻找的主要功能是：

1) 文本较小的部分
2) 单击一行以转到另一个详细活动 3) 图片 4) 在线上的开/关控件

[http://i37.tinypic.com/1xzei0.png](http://i37.tinypic.com/1xzei0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T14:22:49.327

这些东西一般都是使用 PreferenceFragment 构建的，或者是旧的 PreferenceActivity：http:
[//developer.android.com/reference/android/preference/PreferenceFragment.html](http://developer.android.com/reference/android/preference/PreferenceFragment.html)

很多这些东西已经为你实现了，比如你可以通过点击进入的单独的 PreferenceScreen 屏幕，每个项目下较小的摘要文本等。开关是这个类：http:
[//developer.android.com/reference/ android/preference/SwitchPreference.html](http://developer.android.com/reference/android/preference/SwitchPreference.html)

还有很多其他的，包括弹出选项列表或带有特定类型输入的编辑文本的对话框，或者只是首选项本身，您可以在其上设置自己的点击侦听器。

# ruby-on-rails - Rails Carrierwave 更改上传的文件名

> ID：16171211
> 
> 赞同：0
> 
> 时间：2013-04-23T13:54:55.687
> 
> 标签：ruby-on-rails, carrierwave

如何更改控制台上传的文件名而不更改数据库中的记录？

例如：

```
Photo.first.image.file 
 => #<CarrierWave::SanitizedFile:0x007fdeabefbd98 @file="/.../public/uploads/app/2/photo/3_venice.jpeg", @original_filename=nil, @content_type=nil> 

Photo.first.image.file.exists?
=> false

Photo.first.image.file.file
=> "/.../public/uploads/app/2/photo/3_venice.jpeg" 
```

我的最终目标是找到具有一些依赖名称的文件，例如（没有第一个符号，模型 ID - 3）：`venice.jpeg`

并将其重命名为所需的名称：`3_venice.jpeg`

是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T15:45:22.607

我的解决方案:)

```
Photo.find_each do |p|
    File.rename((p.image.file.file.split('/')[0...-1].join('/')+'/'+p.image.file.file.split('/').last.split('_')[1..-1].join('_')), p.image.file.file) if p.image.file.exists? == false
end 
```

# amazon-ec2 - 如果 VM 机器正在运行并且没有活动，亚马逊是否会收费

> ID：16171214
> 
> 赞同：-1
> 
> 时间：2013-04-23T13:55:02.763
> 
> 标签：amazon-ec2

这个问题不是很复杂。我想使用 Amazon EC2 虚拟机。在大多数情况下，这台机器只会有空闲活动，即什么也不做。在这种情况下，亚马逊将如何收费？因为一方面它正在运行，但另一方面它不使用 CPU。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T14:00:18.167

您需要为实例处于“运行”状态的每一小时付费。CPU 有多忙并不重要。

但是，当什么都没有发生时，您可能不会产生任何 I/O 或带宽成本。

# java - 单击按钮时运行命令行代码

> ID：16171216
> 
> 赞同：0
> 
> 时间：2013-04-23T13:55:05.927
> 
> 标签：java, swing, file-io, jbutton, processbuilder

我正在开发一个 Java 程序，我想在用户单击按钮时执行一些命令行代码。我必须编写代码来执行我的命令行代码和按钮代码，但我现在不知道如何将两者结合起来：我的按钮代码如下所示：

```
 private JButton setup;
public ProgramGUI(){
    UsedHandler handler = new UsedHandler();
    setup.addActionListener(handler);

}
private class UsedHandler implements ActionListener{

    @Override
    public void actionPerformed(ActionEvent event) {
        if(event.getSource()==setup)
            JOptionPane.showMessageDialog(null, "Everything fine!");
    }
} 
```

这就是我的命令行代码：

```
 try {
            Runtime rt = Runtime.getRuntime();
            //Process pr = rt.exec("cmd /c dir");
            Process pr = rt.exec("c:\\helloworld.exe");

            BufferedReader input = new BufferedReader(new InputStreamReader(pr.getInputStream()));

            String line=null;

            while((line=input.readLine()) != null) {
                System.out.println(line);
            }

            int exitVal = pr.waitFor();
            System.out.println("Exited with error code "+exitVal);

        } catch(Exception e) {
            System.out.println(e.toString());
            e.printStackTrace();
        } 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T14:06:19.997

为防止命令行代码占用大量时间而阻塞AWT，需要多线程。

```
private class UsedHandler implements ActionListener, Runnable {
    private JButton setup;
    private Executor executor = Executors.newSingleThreadExecutor();

    @Override
    public void actionPerformed(ActionEvent event) {
        if (event.getSource() == setup) {
            executor.execute(this);
        }
    }

    @Override
    public void run() {
        try {
            Runtime rt = Runtime.getRuntime();
            Process pr = rt.exec("c:\\helloworld.exe");
            BufferedReader input = new BufferedReader(
                    new InputStreamReader(pr.getInputStream()));
            String line = null;
            while ((line = input.readLine()) != null)
                System.out.println(line);
            int exitVal = pr.waitFor();
            System.out.println("Exited with error code " + exitVal);
        } catch (Exception e) {
            System.out.println(e.toString());
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T14:02:10.710

将您的 exec 代码放入一个方法中，并从您的按钮执行的操作中调用它

```
public void yourProcess() {
try {
        Runtime rt = Runtime.getRuntime();
        //Process pr = rt.exec("cmd /c dir");
        Process pr = rt.exec("c:\\helloworld.exe");

        BufferedReader input = new BufferedReader(new InputStreamReader(pr.getInputStream()));

        String line=null;

        while((line=input.readLine()) != null) {
            System.out.println(line);
        }

        int exitVal = pr.waitFor();
        System.out.println("Exited with error code "+exitVal);

    } catch(Exception e) {
        System.out.println(e.toString());
        e.printStackTrace();
    }
} 
```

然后使用方法

```
 @Override
public void actionPerformed(ActionEvent event) {
    if(event.getSource()==setup){
        yourProcess();
        JOptionPane.showMessageDialog(null, "Everything fine!");
    }
} 
```

# android - jfeinstein10的slidingmenu如何使用按钮调出右侧菜单

> ID：16171218
> 
> 赞同：1
> 
> 时间：2013-04-23T13:55:11.447
> 
> 标签：android, menu, slidingmenu

使用jfeinstein10的slidingmenu，如何使用按钮调出右侧菜单（我想要两种方法来召唤左右菜单。我使用onclickevent和toggle来调出左侧菜单。但我不知道如何带出带有按钮的右侧菜单）。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:02:50.853

假设*右菜单*表示该库可用的二级菜单，您可以使用：

`SlidingMenu.showSecondaryMenu(boolean animate)`

`SlidingMenu.showMenu(boolean animate`如果它是您要显示的其他菜单，您也有。

作为参考，您可以查看此[库](https://github.com/jfeinstein10/SlidingMenu/blob/master/library/src/com/jeremyfeinstein/slidingmenu/lib/SlidingMenu.java)的源代码。

编辑：自从发布问题和答案以来发生了很多事情，因此可能需要一个指向 NavigationDrawer 的链接：[https ://developer.android.com/design/patterns/navigation-drawer.html](https://developer.android.com/design/patterns/navigation-drawer.html)

# vba - vba：测试形状是否包含文本框

> ID：16171219
> 
> 赞同：2
> 
> 时间：2013-04-23T13:55:14.630
> 
> 标签：vba, excel, shapes

我想在 Excel 文件的图表中循环所有形状。这原则上适用于

```
Dim currChart As Chart
Set currChart = Sheets("Diagramm 1")

Dim sShapes As Shape
For Each sShapes In currChart.Shapes

        Debug.Print sShapes.name
        Debug.Print sShapes.TextFrame.Characters.Text

Next sShapes 
```

但是，`TextFrame`并非所有类型的形状都知道该属性。因此我想测试一个形状是否有一个文本框。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T16:42:50.653

我假设您需要知道形状对象中是否有文本。因此尝试将此代码放入您的循环中`For...Next`：

```
Debug.Print sShapes.Name
'to check if there is textframe
'but mostly there is
If Not sShapes.TextFrame Is Nothing Then

    'to check if there is text within textframe
    If sShapes.TextFrame2.HasText Then

        Debug.Print sShapes.TextFrame.Characters.Text
    End If
End If 
```

我希望这是你正在寻找的。

# c# - 当 AggregateException.InnerExceptions.Count > 1 时，是否有人遇到过这种情况？

> ID：16171221
> 
> 赞同：8
> 
> 时间：2013-04-23T13:55:17.297
> 
> 标签：c#, .net, exception-handling

我想知道，有没有人遇到过病例，当`AggregateException.InnerExceptions.Count`> 1？

例如，TPL 将在任务主体中引发的异常包装在`AggregateException`. 但我从未见过有不止一个内在例外的情况。

如何使用 TPL 实现这一点？
如何使用*任何*FCL（或另一个广泛使用的库）类来实现这一点（示例将很有用）？

我知道，有*可能*建立这样的实例`AggregateException`，但问题是关于实践。我问这个，因为我想了解，什么是最好的处理方式`AggregateException`。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T14:01:14.917

典型的情况是一个任务依赖于多个任务，并且其中多个任务引发异常。例如：

```
var t1 = Task.Factory.StartNew( () => { throw new Exception(); } );
var t2 = Task.Factory.StartNew( () => Console.WriteLine("Innocuous") );
var t3 = Task.Factory.StartNew( () => { throw new Exception(); } );

// Output: 2
var t4 = Task.WhenAll(t1, t2, t3)
             .ContinueWith(t => Console.WriteLine(t.Exception.InnerExceptions.Count), 
                           TaskContinuationOptions.OnlyOnFaulted); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T14:13:51.860

正如 Ani 所说，这些`AggregateExceptions`可以通过多个连续`Task`的 s 使用延续来观察异常来创建。

```
Task t1 = Task.Factory.StartNew(() => { throw new Exception(); });
Task t2 = Task.Factory.StartNew(() => { throw new Exception(); });
Task t3 = Task.WhenAll(t1, t2)
    .ContinueWith(t => t.Exception.InnerExceptions.Count(), 
    TaskContinuationOptions.OnlyOnFaulted); 
```

通常你会`AggregateException`在一个延续中处理。`Task`延续可以通过前面任务的异常属性来查明前面是否抛出了异常。以下将 a 的结果打印`NullReferenceException`到控制台

```
Task task1 = Task.Factory.StartNew (() => { throw null; });
Task task2 = task1.ContinueWith (ant => Console.Write(ant.Exception()); 
```

如果`task1`抛出异常并且该异常未被继续捕获/查询，则它被视为未处理并且应用程序终止。`Status`使用延续，通过关键字确定任务的结果就足够了

```
asyncTask.ContinueWith(task =>
{
    // Check task status.
    switch (task.Status)
    {
        // Handle any exceptions to prevent UnobservedTaskException.             
        case TaskStatus.RanToCompletion:
            if (asyncTask.Result)
            {
                // Do stuff...
            }
            break;
        case TaskStatus.Faulted:
            if (task.Exception != null)
                mainForm.progressRightLabelText = task.Exception.Flatten().Message;
            else
                mainForm.progressRightLabelText = "Operation failed!";
        default:
            break;
    }
} 
```

在上面我只期望一个例外 - 以确保这是我可以调用的情况[`Flatten()`](http://msdn.microsoft.com/en-us/library/system.aggregateexception.flatten.aspx)。如果您期望其他类型的异常，您可以根据需要遍历`InnerException`s。

我希望这有帮助。

# xpages - 如何将面板绑定到现有的文档数据源或新创建的文档？

> ID：16171222
> 
> 赞同：1
> 
> 时间：2013-04-23T13:55:19.960
> 
> 标签：xpages, xpages-ssjs

在绑定到其 onw 文档数据源（“父级”）的 xpage 中，我有一个重复控件显示一些视图数据（包含相关文档或“响应”）以及一个用于创建新“响应”文档的按钮. 响应的数据显示在同一页面上的单独面板中，该面板仅在从重复中选择响应或创建新响应时可见。文档数据源绑定到围绕“动态”响应文档面板的面板，如下所示：

```
<xp:panel id="panelFlDs">
    <xp:this.data>
        <xp:dominoDocument var="dsDocFileLink" formName="fmFileLink"
            ignoreRequestParams="true">
            <xp:this.documentId><![CDATA[#{javascript:viewScope.get("unidFileLink")}]]></xp:this.documentId>
        </xp:dominoDocument>
    </xp:this.data>
    <xp:panel id="panelFlForm">
        <xp:this.rendered><![CDATA[#{javascript:viewScope.get("showDialogFileLink")=="1"}]]></xp:this.rendered>
        <xc:ccFormFileLink></xc:ccFormFileLink>
    </xp:panel>
</xp:panel> 
```

如您所见，我正在尝试将我的数据源绑定到使用 viewScope 传递的 docUnid。这适用于现有文档，也适用于新文档（请注意，见下文），我只需在显示面板之前删除 viewScope 变量。对于新的响应，我还使用与中相同的按钮代码设置了一些从父级继承的字段值

```
dsDocFileLink.replaceItemValue("flType", "flTypeFile");
dsDocFileLink.replaceItemValue("glBlockID", dsDocFileLinkBlock.getItemValueString("glBlockID"));
dsDocFileLink.replaceItemValue("histCreatedOn", @Now()); 
```

等等

需要注意的是，我不能连续创建两个新文档：第二个和所有后续新文档似乎使用与第一个相同的数据源：它们的可编辑字段显示先前编辑的新文档中的值。

[我尝试按照 Sven Hasselbachs 的出色示例（此处](https://stackoverflow.com/questions/14584141/xpages-save-data-source-and-new-doc-changes-previous-doc/14585187#14585187)和[此处](http://hasselba.ch/blog/?p=442)）创建新的数据源对象（并清除旧的对象），但正如 Sven 在他的博客条目中指出的那样，我无法立即使用我新创建的数据源。因此我可以创建一个新的 ds，但我不能按照我计划的方式使用继承，因为数据源尚不可用。

在我尝试重新处理所有内容并使用具有默认值等的可编辑字段在数据源级别开始继承之前：这甚至是我的任务的正确方法，还是我应该在某个地方再转一圈？

**编辑：**我只是尝试不继承，即创建一个新的响应，填写一些值，然后保存并关闭（备注：“关闭”隐藏响应数据面板），然后创建第二个新响应。结果：第二个响应再次包含我为第一个填写的值。我的创建修改创建按钮现在看起来像这样：

```
var panelFlDs:com.ibm.xsp.component.UIPanelEx = getComponent("panelFlDs");
var ds = new com.ibm.xsp.model.domino.DominoDocumentData();
ds.setVar("dsDocFileLink");
ds.setFormName("fmFileLink");
panelFlDs.getData().clear();
panelFlDs.addData(ds);
viewScope.remove("unidFileLink");
viewScope.put("showDialogFileLink", "1"); 
```

此致

洛萨

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T14:27:04.133

进入重复控件的数据源的所有属性。其中有一个“范围”设置。默认为 viewScope。将其更改为 requestScope，这样它就不会保留您创建的第一个文档。那么每次都应该是一个新的文件。

# html - 除 Opera 外，每个浏览器上的图像链接都少了几个像素

> ID：16171223
> 
> 赞同：-1
> 
> 时间：2013-04-23T13:55:20.470
> 
> 标签：html, css, cross-browser

[我正在处理的网站](http://jsfiddle.net/Jxrw7/2)有问题。

顶部徽标似乎与顶部有某种边距，即使我已专门将其设置为没有边距并且其父徽标没有填充。

```
body{
    margin: 0;
    padding: 0;

    min-width: 320px;

    background-image: url('../images/templates/background.png');

    font-family: 'Open Sans';
    font-size: 12px;
    color: #303030;
} 
```

这是我测试的不同浏览器的图像：

![奇数边距](https://i.imgur.com/bnbf8aj.png)

如您所见，似乎只有 Opera 可以正常工作。现在有什么问题吗？还是浏览器的问题？

如果这是浏览器的问题，解决该问题的最简单方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T14:00:48.490

这是导致您的问题的 main.css 中的第 98 行。

```
.menuAvatar {
vertical-align: middle; // THIS LINE
margin: 0 5px 0 -15px;
} 
```

删除垂直对齐后，图像会正确对齐。您可以找到不同的方式来完成您正在使用的`vertical-align`for，或者您可以使用以下方式进行补偿。

```
.menuAvatar {
vertical-align: middle;
margin: -3px 5px 0 -15px;
} 
```

我将 -3px 添加到 margin-top 以强制它在 Chrome 中重新对齐。（未在 Firefox 和其他人中测试）。

或者使用它来避免负边距。

```
.menuAvatar {
vertical-align: top; 
margin: 0 5px 0 -15px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T14:01:26.577

在第 98 行`main.css`，您有以下规则：

```
.menuAvatar{
    vertical-align: middle;
    margin: 0 5px 0 -15px;;
} 
```

我建议设置`vertical-align`为`top`，结果是：

```
.menuAvatar{
    vertical-align: top;
    margin: 0 5px 0 -15px;
} 
```

# java - Cloud 端点 api 中的函数 User.getUserId() 为非 null 的用户对象返回 null

> ID：16171225
> 
> 赞同：12
> 
> 时间：2013-04-23T13:55:27.517
> 
> 标签：java, android, google-cloud-endpoints

我在获取云端点方法的用户 ID 时遇到问题。我在我的 android 客户端中使用了 oauth2 身份验证并将凭据传递给我的服务。下面与我的方法类似（简化以使其更清晰）。

我注意到python 的[issue 8848](https://code.google.com/p/googleappengine/issues/detail?id=8848#makechanges)似乎与这个问题非常相似。

java api中也存在同样的问题吗？方法

```
public SuccessCode doSomething(WireFormat wire, User user){
    log.info("User id: "+user.getUserId());
    log.info("Federated identity: "+user.getFederatedIdentity());
    log.info("Email address: "+user.getEmail());
} 
```

即使 android 客户端中的凭据已执行 oauth2 身份验证，联合身份和 userId 也会显示 null。电子邮件地址正确显示在日志中。顺便说一句，这一切都在部署的应用程序上。

有人对什么是错的有任何其他建议吗？该问题的任何已知解决方法？我已按照[https://developers.google.com/appengine/docs/java/endpoints/consume_android#making-authenticated-calls](https://developers.google.com/appengine/docs/java/endpoints/consume_android#making-authenticated-calls)中建议的方法设置我的 android 客户端。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T17:59:50.787

您是正确的，问题 8848 是相同的原因。根本问题与语言无关，会影响两个运行时。目前，您不应该期望`User`通过 Endpoints 中的方法参数传入的对象中填充的用户 ID 字段。

一个超级次优的解决方法是将`User`对象持久化到数据存储并读回。重新读取的对象将包含用户 ID。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-03-01T03:49:41.143

我在问题中遵循了相同的文档参考，并且遇到了同样的问题。

最后通过执行以下操作使端点与 OAuth2 一起工作：

我更新到了 Google Play 服务的更新；现在是第 15 版（Android SDK）。

端点文档已更新为声明您应该为您的应用程序启用 Google Plus API，即使您只是将 userinfo.email 范围用于您的应用程序引擎端点。我是通过 Cloud Console 完成的。

此外，最后，有一条新说明指出 OAuth2 在模拟器中不起作用。我证实了这一点。即使指向生产应用程序引擎，我仍然会从 Android 模拟器中收到 null 用户错误。所以我仍然只能从真实设备测试端点。

我能够确认我需要上述所有三个步骤。

# python - python - OpenCV filter2D cvmat 和 numpy 差异

> ID：16171226
> 
> 赞同：0
> 
> 时间：2013-04-23T13:55:28.447
> 
> 标签：python, opencv

我一直在将 Gabor 内核用于计算机视觉项目，但是，当我使用旧的 cv.Filter2D 函数过滤内核时，我得到了奇怪的结果。输入是一个 numpy 数组，因为我更喜欢使用更新、更简洁的代码，并且我通过 cv.fromarray() 方法将 numpy 数组更改为 cvmat。内核仅在整个过程中被视为 cvmat。

但是，当我使用 cv2.filter2D 运行相同的程序并使用 numpy 数组 src 图像作为输入，并更改我的内核生成代码以给我一个作为 numpy 数组的内核时，我得到的只是我预期的与结果匹配的结果我开始使用 C++ 函数。

谁能向我解释为什么 2 个过滤器功能有这种差异？

# json - D3.js - 从 csv 数据构建一个力导向的分层树

> ID：16171227
> 
> 赞同：3
> 
> 时间：2013-04-23T13:55:30.390
> 
> 标签：json, csv, d3.js, tree, force-layout

所以我正在尝试使用 D3.js 创建一个分层树图。它应该可以在 QtWebView 之上工作，到目前为止，一切都很好：它可以工作。现在我需要处理应用程序的数据处理位。我的数据以 CSV 格式存储（不是我的选择，我对此也没有任何意见），如下所述。

我的问题是：*如何从此 CSV 输出 JSON*？

几天来我一直在四处寻找示例，但我被困住了。我只是想知道是否有人可以为我指明正确的方向，因为我只是获得有关如何使用 JSON 格式的数据生成树的示例，以及人们谈论如何使用插件通过 Qt 输出 JSON。

我在读取/写入 CSV/JSON 文件时没有问题。我只需要知道如何制作一个算法，让我从这些数据中输出 JSON。

这是我的示例 CSV 文件（node_type 和 node_size 仅用于展示）：

```
node_id，名称，node_size，node_type，parent_node
1,节点1,122,4,17
2、节点2、127、4、20
3、节点3、64、2、5
4、节点4、147、5、14
5、节点5、146、5、12
6、节点6、57、4、10
7、节点7、149、1、20
8、节点8、141、6、10
9、节点9、65、5、10
10,节点10,108,2,10
11、节点11、97、6、2
12,节点12,102,2,5
13、节点13、79、6、3
14,node14,90,2,2
15,节点15,129,1,8
16、节点16、76、1、8
17、节点17、68、6、13
18、节点18、53、5、7
19,节点19,112,6,20
20,节点20,147,5,6

```

编辑：我尝试了 Pablo Navarro 的提示，并为 D3.js 生成了以下脚本来处理。它没有产生任何错误，但没有显示任何内容。谁能暗示为什么？

EDIT2：修复了代码中的错字。

```
 var width = 960, height = 500;
    var color = d3.scale.category20();
    var svg = d3.select("body").append("svg")
        .attr("width", width)
        .attr("height", height);
    var nodesArray = [], edgesArray = [];

    d3.csv('nodes.csv', function(data) {
        for (var k = 0, n = data.length; k < n; k += 1) {
            nodesArray.push({name: data[k].name, size: data[k].node_size, id: data[k].node_id}),
            edgesArray.push({source: data[k].node_id, target: data[k].parent_node});       
        }
    });

    var force = d3.layout.force()
       .nodes(nodesArray)
       .links(edgesArray)
       .size([width, height])
        .start();

    var link = svg.selectAll(".link")
        .data(edgesArray)
        .enter().append("line")
        .attr("class", "link")
    var node = svg.selectAll(".node")
        .data(nodesArray)
        .enter().append("circle")
        .attr("class", "node")
        .attr("r", nodesArray.size) 
```

EDIT3：我认为可能会产生重大影响的一个小细节：我在本地调用它，并且在本地我不是指在“本地主机”网络服务器中，而是在*文件*中。从我在[Jerome Crukier 的教程](http://www.jeromecukier.net/blog/2012/05/28/manipulating-data-like-a-boss-with-d3/)中读到的内容：

> 这将不再适用于本地文件系统（即在浏览器中打开文件）。生成的文件只能在本地的网络服务器上运行（即页面有一个 url）。

我不确定我的代码是否正是这种情况，但再一次，如果有人有任何见解，将不胜感激。

编辑4：

好吧，在网上搜索了一番之后，我不得不承认我不知道如何使用 Google 和 Stackoverflow：具有讽刺意味的是，我[在这里](https://stackoverflow.com/questions/11088303/how-to-convert-to-d3s-json-format/11089330#11089330)找到了我需要知道的一切，由 mbostock（来自 D3.js）自己解释。我现在明白了，我不知道自己真正在寻找什么，但不知何故我找到了。

关于这个（仍然悬而未决的）问题，现在不太确定该怎么做。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T15:52:28.210

您可以使用 csv 文件。为了显示一棵树，您需要为节点创建一个数组，为边创建另一个数组：

```
d3.csv('url.csv', function(data) {

    var nodes = [], edges = [];

    for (var k = 0, n = data.length; k < n; k += 1) {
        nodes.push({name: data[k].name, size: data[k].size, id: data[k].id}),
        edges.push({source: data[k].id, target: data[k].parent});       
    }
}); 
```

使用这种结构，您将能够使用强制布局，或将节点、边数组转换为树结构。

# sql - Rails 子查询/嵌套连接上的多对多关联

> ID：16171232
> 
> 赞同：0
> 
> 时间：2013-04-23T13:55:33.330
> 
> 标签：sql, ruby-on-rails-3, activerecord, arel

我有两个模型，Item 和 Tag，它们通过一个名为 ItemTag 的模型具有多对多关系。我希望用户能够找到所有具有给定tags.tag_name 集的所有项目。因此，表格如下所示：

* * *

## 项目

ID

...

* * *

## items_tags

ID

item_id

tag_id

...

* * *

## 标签

ID

标签名

...

假设我在数据库中有以下 item / tag_name 组合（尽管 items_tags 连接表）

第 1 项：“红色”、“黄色”、“蓝色”

第 2 项：“红色”、“黄色”、“橙色”

第 3 项：“红色”、“橙色”、“紫色”

用户想要获取与 Tag.tag_names "red" 和 "yellow" 关联的所有项目（显然应该返回项目 1 和项目 2）。我如何在 Rails3 中构建它？我的假设是 SQL 语句需要：

1：连接items_tags和tags，获取所有与tag_name为“red”的tag关联的items_tags行

2：再次将该结果集与 tags 表连接，将结果集缩小到与 tag_name "yellow" 的标签关联的那些行

3：将item与最终结果集join，得到两个tag关联的item列表

请注意，选择的 tag_names 的数量是任意的。用户可以选择 1..n tag_names 作为条件，所以我需要能够动态地构造这个查询，最好不必使用原始 SQL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T21:54:33.840

首先，您需要在模型中设置关联。

项目

```
has_many :item_tags
has_many :tags, :through => item_tags 
```

item_tags

```
belongs_to :item
belongs_to :tag 
```

标签

```
has_many :item_tags
has_many :items, :through => item_tags 
```

然后在你的控制器中你可以这样做：

```
red_tag_items = Tag.find_by_name('red').items
yellow_tag_items = Tag.find_by_name('yellow').items

red_yellow_tag_items = red_tag_items & yellow_tag_items 
```

必须有更有效的方法来做到这一点。很想知道。:)

# python - 在 Python 中创建假进程

> ID：16171245
> 
> 赞同：2
> 
> 时间：2013-04-23T13:55:59.330
> 
> 标签：python, linux

我目前正在为测试目的开发存根。使用 Python 我需要创建一个具有特定名称（“mysoft”）和特定 pid（“1234”）的进程

我的最终目的是能够在终端上运行命令“pgrep mysoft”并获得我设置的 PID (1234)。

这个过程不需要做任何事情，它只需要存在。

我查看了 subprocess 模块，但我认为这不是我所需要的。你怎么看 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T15:15:37.110

要运行名为 mysoft 的进程，

*   创建一个名为 mysoft 且不带 .py 扩展名的 python。
*   在该文件中创建一个无限的while循环或类似的东西，以某种方式运行很长时间。或者放一条线，如`raw_input("enter something")`. 它会等到你输入。
*   使文件可执行`chmod 775 [filename]`
*   该文件的第一行应该是`#!/usr/bin/python`. 根据您的 python 路径更改此行。
*   把这个文件系统路径。或者将此文件路径添加到系统路径。（例如 /home/[user]/bin/）
*   现在，键入 mysoft。它将开始。

当您想终止此进程时，您需要手动终止它。据我所知，无法将 pid 设置为进程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T13:58:30.513

您不能创建具有特定 PID 的进程。PID 由操作系统分配。

# asp.net - SignalR 连接相关基本查询

> ID：16171248
> 
> 赞同：0
> 
> 时间：2013-04-23T13:56:02.550
> 
> 标签：asp.net, signalr

我是 Signalr 的新手，正在尝试学习它。有人说**通过该连接（集线器和持久连接）为您提供了两种编程模型。**

谁能告诉我什么是**信号集线器和持久连接** 它们之间的区别是什么？

为什么应该使用持久连接以及何时应该使用集线器

当我使用信号器时，我创建了一个扩展集线器而不是持久连接的类。所以我只是想很好地了解什么是持久连接以及何时扩展它？如果可能，与患者讨论。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T15:54:11.033

要提高速度，请阅读我们的文档。 [SignalR Wiki](https://github.com/SignalR/SignalR/wiki) [SignalR 教程](http://www.asp.net/signalr/overview/guide-to-the-api/hubs-api-guide-server)

# ms-access - 防止 Autoexec 宏在压缩和修复后运行

> ID：16171256
> 
> 赞同：3
> 
> 时间：2013-04-23T13:56:18.613
> 
> 标签：ms-access, macros, ms-access-2007, compact-database

看起来很简单的事情，但我无法在任何地方找到答案。

每次我压缩和修复时，我的 Autoexec 宏都会再次运行。有没有办法阻止它在这里运行，因为压缩的部分原因是在 Autoexec 删除了很多行之后再次减小文件大小。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T14:07:34.890

当您不希望它作为自动执行宏运行时，您可以重命名该宏。

```
DoCmd.Rename "disableAutoExec", acMacro, "AutoExec" 
```

当您确实希望它充当自动执行宏时 ，将其重命名为*AutoExec 。*

如果该建议不令人满意，您可以使用宏检查文件*disableAutoExec.txt*是否存在，并且在该文件存在时不执行任何操作。

*当您确实希望AutoExec*执行其设置的所有操作时，请删除该文件。

或者，您可以将标志值存储在表中，而不是将文件作为标志来控制*AutoExec是否应该继续。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-01T08:43:31.650

一个旧的（至少在 MS Access 2010 和之前）是在打开数据库时按住 shift 键

# javascript - 使用 Javascript 发送带有链接的内容

> ID：16171262
> 
> 赞同：0
> 
> 时间：2013-04-23T13:56:42.980
> 
> 标签：javascript, jquery, html, node.js, jsonp

我有一个 html 表单，其中包含用于添加新用户的输入字段。将用户添加到我的数据库后，使用我的 adduser.js 文件中的 sendmail() 函数将邮件发送给她/他。按照我的标准发送的邮件。但问题是我想在正文内容中添加一个超链接。我的线路是这样的：

```
 sendMail(result.email, DbConfig.mailConfig.subject, "Dear" + " " + req.body.txtFirstName + req.body.txtLastName + ",\n Welcome to, COMPANY NAME " + txt.link('http://www.website.in') + "Your Login details are below: \n User name:" + req.body.txtLoginId + " \n Password:" + result.pwd) 
```

但它没有像我预期的那样工作。我邮件中的结果是

```
Dear user.
Welcome to,COMPANY NAME<ahref="www.website.in"></a>. 
```

它是这样来的。但是链接重定向到指定的目标。我的期望是：

```
Dear user.
Welcome to,COMPANY NAME.(on click of company name it redirects to targeted link). 
```

我怎样才能做到这一点。我尝试在我的 JS 中直接使用标签。在我的情况下，它也可以正常工作。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:22:37.410

Assuming that the sendMail function is working correctly, you'll need to specify the "content type" of the email in the headers. I'm unfamiliar the particular function that you're using but PHP's 'mail' function is formatted similarly and takes a fourth parameter for additional headers.

I imagine it might work something like:

```
var headers = 'Content-type: text/html; charset=iso-8859-1' + "\r\n";
var message = "Dear" + " " + req.body.txtFirstName + req.body.txtLastName + ",\n Welcome to, COMPANY NAME " + txt.link('http://www.website.in') + "Your Login details are below: \n User name:" + req.body.txtLoginId + " \n Password:" + result.pwd;

sendMail(result.email, DbConfig.mailConfig.subject, message, headers) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T14:18:57.470

一种方法是node 上的[emailjs](https://github.com/eleith/emailjs)。我冒昧地粘贴了他们的例子：

```
$ npm install emails;
//app.js:
var email   = require("./path/to/emailjs/email");
var server  = email.server.connect({
   user:    "username", 
   password:"password", 
   host:    "smtp.gmail.com", 
   ssl:     true
});

var message = {
   text:    "i hope this works", 
   from:    "you <username@gmail.com>", 
   to:      "someone <someone@gmail.com>, another <another@gmail.com>",
   cc:      "else <else@gmail.com>",
   subject: "testing emailjs",
   attachment: 
   [
      {data:"<html>i <i>hope</i> this works!</html>", alternative:true},
      {path:"path/to/file.zip", type:"application/zip", name:"renamed.zip"}
   ]
};

// send the message and get a callback with an error or details of the message that was sent
server.send(message, function(err, message) { console.log(err || message); });

// you can continue to send more messages with successive calls to 'server.send', 
// they will be queued on the same smtp connection

// or you can create a new server connection with 'email.server.connect' 
// to asynchronously send individual emails instead of a queue 
```

# jquery - 在 jQuery Ui Accordion 中禁用拖放

> ID：16171263
> 
> 赞同：0
> 
> 时间：2013-04-23T13:56:45.630
> 
> 标签：jquery, accordion

我正在编写一段不是我的代码并且非常（非常）长的代码。无论如何，它使用了 jQuery UI 手风琴，并让拖放元素成为可能。

我有点迷失在代码中，找不到禁用拖放可能性的方法。

有人有想法吗？

# javascript - 单选按钮并将其值存储到 javascript 变量中

> ID：16171264
> 
> 赞同：-1
> 
> 时间：2013-04-23T13:56:45.467
> 
> 标签：javascript, jquery

如何将脚本函数的返回值分配给 html 正文中的 javascript 变量？？？这将返回选定的变量，所以我如何将它分配给我的 html 正文中的变量

```
<body>
<form action="somepage.php" method="post" >
            <table cellpadding=50px>
                <tr>
                    <td>
                        <input type="radio" name="option" value="opt1" id="op1"></input>
                    </td>
                    <td>
                        <input type="radio" name="option" value="opt2" id="op2"></input>
                    </td>
                </tr>
                <tr>
                    <td>
                        <input type="radio" name="option" value="opt3" id="op3"></input>
                    </td>
                    <td>
                        <input type="radio" name="option" value="opt4" id="op4"></input>
                    </td>
                </tr>
            </table>
            <input type="button"  name="click" value="Click" onclick="get_value()">
            <input type="submit"  name="submit" value="submit">
            </form>
<script>
            function get_value() {
                var x=document.getElementsByTagName("input");
                for (var i=0;i<x.length;i++) {
                    if (x[i].checked==true) {
                        selected=x[i].value;
                        return selected;
                    }
                }
            }
        </script>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T14:06:46.433

在开始编写代码之前，您首先需要了解事物是如何协同工作的。

*   Web 浏览器向服务器请求 PHP 文件。

*   该文件首先由 PHP（在服务器端）执行，将其转换为没有任何 PHP 代码的 HTML 片段

*   然后将生成的文本（最终可能包含 javascript 或 css）发送回浏览器。

*   最后，浏览器解析它（在客户端）以将其转换为元素树，并解析和执行最终包含在 HTML 中的 javascript 和 css 片段。

无法将 javascript 的返回值放入 PHP 中，因为 PHP 是在 javascript 之前执行的，并且是单独执行的。

而且由于您没有使用 HTML5，因此以这种方式声明脚本：

```
<script type="text/javascript"></script> 
```

# sql - SQL 可以在嵌套 SELECT 的 WHERE 中使用 CASE 吗？

> ID：16171266
> 
> 赞同：0
> 
> 时间：2013-04-23T13:56:51.887
> 
> 标签：sql, case

我正在尝试将某些记录放入第二个查询的子集中。我不断收到的错误是：“表别名多次使用：Eqanswer - SQL 语句中的错误位置是：199（行：3 列：22）”这只是最后一条消息，我错过了明显的答案解决它，但我真的很想知道这是否可行。

```
 SELECT 
        e.entityid, e.entitynum, e.entityrole, eq.memotext, eq.fieldnum
    FROM 
        ( SELECT 
            DISTINCT entitynum 
          FROM Eqanswer, entities
                LEFT JOIN Eqanswer 
                    ON (Eqanswer.entitynum = entities.entitynum) 
          WHERE 
                entities.partyID LIKE
                    CASE 
                        WHEN (entities.partyID LIKE '%Joe%' 
                            OR entities.partyID LIKE '%Bob%' 
                            OR entities.partyID LIKE '%Bill%') 
                        THEN
                            (eqanswer.entityrole = 'F_TL' 
                            AND (CONVERT(eqanswer.memotext, sql_date)=curDate() -5 ))
                        ELSE
                            (eqanswer.entityrole = 'F_TL' AND eqanswer.fieldnum = 160 
                            AND (CONVERT(eqanswer.memotext,sql_date) = CurDate() -1 ))
                        END  
        ) AS bs  

        LEFT JOIN Entities e ON (bs.entitynum = e.entitynum)
        LEFT JOIN Eqanswer eq ON (bs.entitynum = eq.entitynum)
    WHERE((eq.entityrole = 'R_CKLIST' AND eq.fieldnum in (8,9,10,11,34,35))
    OR (eq.entityrole = 'F_TL' AND eq.fieldnum in (104,112,158,160))
    OR (eq.entityrole = 'C_REVIEW' AND eq.fieldnum = 69))
    ORDER BY e.entitynum 
```

我已经尝试了以下两种方法：

```
 SELECT 
    e.entityid, e.entitynum, e.entityrole, eq.memotext, eq.fieldnum
    FROM ( SELECT 
        DISTINCT entitynum 
            FROM Eqanswer, entities
            LEFT JOIN Eqanswer 
                ON (Eqanswer.entitynum = entities.entitynum) 
      WHERE 
            entities.partyID 
                CASE 
                    WHEN (entities.partyID LIKE '%Joe%' 
                        OR entities.partyID LIKE '%Bob%' 
                        OR entities.partyID LIKE '%Bill%') 
                    THEN
                        (eqanswer.entityrole = 'F_TL' 
                        AND eqanswer.fieldnum = 160
                        AND (CONVERT(eqanswer.memotext, sql_date)=curDate() -5 ))
                    ELSE
                        (eqanswer.entityrole = 'F_TL' AND eqanswer.fieldnum = 160 
                        AND (CONVERT(eqanswer.memotext,sql_date) = CurDate() -1 ))
                    END  
    ) AS bs  

    LEFT JOIN Entities e ON (bs.entitynum = e.entitynum)
    LEFT JOIN Eqanswer eq ON (bs.entitynum = eq.entitynum)
    WHERE((eq.entityrole = 'R_CKLIST' AND eq.fieldnum in (8,9,10,11,34,35))
    OR (eq.entityrole = 'F_TL' AND eq.fieldnum in (104,112,158,160))
    OR (eq.entityrole = 'C_REVIEW' AND eq.fieldnum = 69))
    ORDER BY e.entitynum 
```

和

```
 SELECT e.entityid, e.entitynum, e.entityrole, e.thestatus, eq.memotext, eq.dateentered, eq.datechgd, eq.fieldnum, e.docloc 
    FROM (SELECT DISTINCT eqanswer.entitynum FROM eqanswer
      LEFT JOIN entities ON (Eqanswer.entitynum = entities.entitynum) 
      WHERE entities.partyID
          CASE WHEN (entities.party3ID LIKE '%Joe%' 
                    OR entities.party3ID LIKE '%Bob%' 
                    OR entities.party3ID LIKE '%Bill%') 
                    THEN
          CASE WHEN  (eqanswer.entityrole = 'F_TL' 
             AND eqanswer.fieldnum = 160 
             AND (CONVERT(eqanswer.memotext, sql_date)=curDate() -5 ))
             THEN 1 ELSE 0 END
          ELSE
          CASE WHEN (eqanswer.entityrole = 'F_TL' 
             AND eqanswer.fieldnum = 160 
             AND (CONVERT(eqanswer.memotext,sql_date) = CurDate() -1 ))
          THEN 1 ELSE 0 END
          END = 1
      ) AS bs  
   LEFT JOIN Entities e ON (bs.entitynum = e.entitynum)
   LEFT JOIN Eqanswer eq ON (bs.entitynum = eq.entitynum)
   WHERE((eq.entityrole = 'R_CKLIST' AND eq.fieldnum in (8,9,10,11,34,35))
   OR (eq.entityrole = 'F_TL' AND eq.fieldnum in (104,112,158,160))
   OR (eq.entityrole = 'C_REVIEW' AND eq.fieldnum = 69))
   ORDER BY e.entitynum 
```

两者都抛出错误，但这就像语法错误（我的错）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T14:01:33.367

你*真的*有`Eqanswer`两次：

```
FROM Eqanswer, entities
LEFT JOIN Eqanswer 
```

**编辑**

好的，这个子选择在很多地方都是错误的：（我会将我的评论添加为字符串，而不是评论，以使它们更加突出）

```
SELECT  entitynum 
FROM Eqanswer, entities
LEFT JOIN Eqanswer             'this is the duplicate table name'
    ON (Eqanswer.entitynum = entities.entitynum) 
WHERE entities.partyID LIKE    
    'LIKE implies that partyID AND the CASE expression are both strings'
    CASE 
        WHEN (entities.partyID LIKE '%Joe%' 
                        OR entities.partyID LIKE '%Bob%' 
                        OR entities.partyID LIKE '%Bill%') 
        THEN (eqanswer.entityrole = 'F_TL' 
             AND (CONVERT(eqanswer.memotext, sql_date)=curDate() -5 ))
             'but THIS is a boolean expression'
        ELSE (eqanswer.entityrole = 'F_TL' 
             AND eqanswer.fieldnum = 160 
             AND (CONVERT(eqanswer.memotext,sql_date) = CurDate() -1 ))
             'and THIS too'
    END  
) AS bs 
```

因此，LIKE 对具有未知数据类型的列进行操作，并且 CASE 会导致布尔表达式。最有可能的是，该行`entities.partyID LIKE`只是一个复制和粘贴错误（希望如此）。让我们忽略它。

由于 CASE 子句，您不能返回布尔表达式。因此，您需要重写 CASE 以返回一个整数，并比较该值以匹配您预期的 WHERE 条件。

大概是这样的：

```
WHERE 
    CASE 
        WHEN (entities.partyID LIKE '%Joe%' 
                        OR entities.partyID LIKE '%Bob%' 
                        OR entities.partyID LIKE '%Bill%') 
        THEN
            CASE WHEN  (eqanswer.entityrole = 'F_TL' 
                 AND (CONVERT(eqanswer.memotext, sql_date)=curDate() -5 ))
            THEN 1 ELSE 0 END
        ELSE
            CASE WHEN (eqanswer.entityrole = 'F_TL' 
                 AND eqanswer.fieldnum = 160 
                 AND (CONVERT(eqanswer.memotext,sql_date) = CurDate() -1 ))
            THEN 1 ELSE 0 END
    END = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T14:07:09.457

```
SELECT 
        e.entityid, e.entitynum, e.entityrole, eq.memotext, eq.fieldnum
    FROM 
        ( SELECT 
            DISTINCT entitynum 
         /* THIS NEEDS TO BE CHANGED {Eqanswer} used 2 times without any alias */
          FROM Eqanswer, entities
                LEFT JOIN Eqanswer 
                    ON (Eqanswer.entitynum = entities.entitynum) 
          WHERE 
                entities.partyID LIKE  /* why you need this ?? */
                    CASE 
                        WHEN (entities.partyID LIKE '%Joe%' 
                            OR entities.partyID LIKE '%Bob%' 
                            OR entities.partyID LIKE '%Bill%') 
                        THEN
                            (eqanswer.entityrole = 'F_TL' 
                            AND (CONVERT(eqanswer.memotext, sql_date)=curDate() -5 ))
                        ELSE
                            (eqanswer.entityrole = 'F_TL' AND eqanswer.fieldnum = 160 
                            AND (CONVERT(eqanswer.memotext,sql_date) = CurDate() -1 ))
                        END  
        ) AS bs  

        LEFT JOIN Entities e ON (bs.entitynum = e.entitynum)
        LEFT JOIN Eqanswer eq ON (bs.entitynum = eq.entitynum)
    WHERE((eq.entityrole = 'R_CKLIST' AND eq.fieldnum in (8,9,10,11,34,35))
    OR (eq.entityrole = 'F_TL' AND eq.fieldnum in (104,112,158,160))
    OR (eq.entityrole = 'C_REVIEW' AND eq.fieldnum = 69))
    ORDER BY e.entitynum 
```

# .net - LINQ to SQL 继承 InvalidOperationException

> ID：16171267
> 
> 赞同：0
> 
> 时间：2013-04-23T13:56:53.003
> 
> 标签：.net, linq, orm

尝试了解 LINQ 和继承映射时，执行 connectionstring 行时，我在 DBContext.cs 中遇到异常：

`Could not retrieve Table for inheritance subtype 'Movie, try Table of 'Media' instead`

**DBContext.cs**

```
[Database]
public class DBContext : DataContext
{
    public DBContext() : base(System.Configuration.ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString){ }

    public Table<Member> members;
    public Table<Media> media;
    public Table<Movie> movies;
    public Table<Game> games;
    public Table<Track> tracks;
    public Table<Album> albums;
  //  public Table<Loaned> loaned;
} 
```

**媒体.cs**

```
[Table(Name="media")]
[InheritanceMapping(Code = 1, Type = typeof(Movie), IsDefault=true)]
[InheritanceMapping(Code = 2, Type = typeof(Game))]
[InheritanceMapping(Code = 3, Type = typeof(Album))]
[InheritanceMapping(Code = 4, Type = typeof(Track))]
public class Media
{
    [Column(IsPrimaryKey=true)]
    public string itemId;

    [Column]
    public string title { get; set; }

    [Column]
    public string price { get; set; }

    [Column(IsDiscriminator=true)]
    public int itemType { get; set; }
} 
```

**电影.cs**

```
public class Movie : Media
{
    [Column]
    public int year { get; set; }
} 
```

这是调用它的代码：

```
 public static void GetAll()
    {
        using (DBContext db = new DBContext())
        {
            IEnumerable<Media> media = from m in db.media select m;
        }
    }
} 
```

我有一种感觉，我错过了一些讨厌的映射属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T15:01:31.270

看来我没有注意 LINQ 的`single table inheritance`. 我删除了所有，但：

```
public Table<Member> members;
public Table<Media> media; 
```

现在它起作用了。我将每个媒体项目放在自己的表格中，这是不受支持的。

# java - 在 Java 中将 HTML 解析为 Hashmap

> ID：16171271
> 
> 赞同：0
> 
> 时间：2013-04-23T13:57:06.163
> 
> 标签：java

我正在尝试使用 google voice api 制作一个 java 应用程序，以及一种获取 SMS 数据和 convos 的方法返回一个像这样的整个 html 页面

[http://pastebin.com/tjZeHERa](http://pastebin.com/tjZeHERa)

我编写了一个 SMSMessage 类，它将 HTML 作为字符串接收，并将解析标签之间的第一条消息数据，但它使用 arrayList 而不是 Hashmap。

```
package gv;
import java.util.*;
import java.util.regex.*;

public class SMSMessage {

   protected String id;
   protected String phoneNumber;
   protected String displayNumber;
   protected String message;
   protected String startTime;
   protected String displayStartDateTime;
   protected boolean isRead;
   protected String messageText;

public SMSMessage(String x){

    parse(TruncateFirstMessage(x));
    parseresponse(x);

}
    public String TruncateFirstMessage(String xml){

       int firstbracket = xml.indexOf("{");
       //int secondbracket = xml.indexOf("{", firstbracket - 1);
       int thirdbracket = xml.indexOf("}");
       int fourthbracket = xml.indexOf("}", thirdbracket - 1);
        return xml.substring(firstbracket, fourthbracket);   
    }
    private void parseresponse(String init){
        String trimmeds1 = init.substring(init.indexOf("<html><![CDATA[)"));
        String trimmeds2 = init.substring(trimmeds1.indexOf(phoneNumber));
        Scanner s = new Scanner(trimmeds1);

    }

    private  void parse(String init){

        Scanner s = new Scanner(init);
        ArrayList<String> parsed = new ArrayList<String>();
        s.useDelimiter("[},:{]");
        String temp1 = "";
        int count = 0;
            while (s.hasNext()){

              String n = s.next();
                if (!n.equals("")){
                     count++;
                    String removequotes = n.replace("\"", "");

                      parsed.add(removequotes);  }
                }
            id = parsed.get(3);
            phoneNumber = parsed.get(5);
            displayNumber = parsed.get(7);
            startTime = parsed.get(9);
            displayStartDateTime = parsed.get(11) + ":" + parsed.get(12);
            isRead = Boolean.parseBoolean(parsed.get(21));
            messageText = parsed.get(29);

          }

    public String toString(){

        return getClass().getSimpleName() + " [ " + "id = " + id + ", phoneNumber = " + phoneNumber + ", isRead = " + isRead + ", messageText = " + messageText + ", displayStartDateTime = " + displayStartDateTime + " ]";

    }
} 
```

this will return a pretty long arrayList, like [messages, 0609dc2d10f365600fc48372fe3122a7ba3147fa, id, 0609dc2d10f365600fc48372fe3122a7ba3147fa, phoneNumber, +17654260681, displayNumber, (765) 426-0681, startTime, 1365514638712, displayStartDateTime, 4/9/13 9, 37 AM, displayStartTime, 9, 37 AM, relativeStartTime, 40 分钟前, 注意, , isRead, true, isSpam, false, isTrash, false, star, false, messageText, hi, labels, [inbox, sms, all], type, 11, children, ]

然后我得到一个特定的元素并将其分配给一个字段。

如何用键为“relativeStartTime”且值为下一个 int 的 HashMap 替换 arrayList？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T14:09:33.760

这很可爱。

首先，它不是 HTML，而是 XML。

其次，您想要的数据是 JSON 格式的。

所以你有一个包含 JSON 数据的 XML 有效负载。奇妙。

您应该做的是去除 XML 标记，留下完整的 JSON 有效负载。然后通过 Internet 上可用的众多 JSON 解析器之一运行 JSON 有效负载。您也可以使用 XML 解析器来完成此任务，但它足够简单的 XML，您可能也不需要学习其中一个工具包。

JSON 解析器快速且易于使用，并且几乎可以为您提供所需的内容。

# r - 带组的 R 系列图

> ID：16171276
> 
> 赞同：0
> 
> 时间：2013-04-23T13:57:18.117
> 
> 标签：r, plot, series

我是 R 的新手。我有一个包含 4 列的 csv 文件。一个是游戏名称，第二个是安装的房间，月份，最后一个是玩了多少次。你们能帮我创建一个系列情节，说明每个游戏在几个月内玩了多少次吗？谢谢！

数据：

```
 game   Room    Month   Timesplayed
     A        IND         1         5
     A        FOR         1         6
     A        TYH         1         4
     B        IND         1         3
     B        FOR         1         2
     C        TYH         1         1
     C        IND         1         4
     E        IND         1         2
     E        FOR         1         1
     F        KUY         1         2
     F        TYH         1         5
     F        FOR         1         6
     F        IND         1         3
     A        IND         2         2
     A        FOR         2         1
     A        TYH         2         0
     B        IND         2         7
     B        FOR         2         10
     C        TYH         2         4
     C        IND         2         2
     E        IND         2         3
     E        FOR         2         5
     F        KUY         2         6
     F        TYH         2         7         
     F        FOR         2         2
     F        IND         2         1
     A        IND         3         9
     A        FOR         3         0
     A        TYH         3         3
     B        IND         3         4
     B        FOR         3         2
     C        TYH         3         1
     C        IND         3         7
     E        IND         3         9
     E        FOR         3         4
     F        KUY         3         3
     F        TYH         3         6
     F        FOR         3         2
     F        IND         3         2 
```

我尝试了 plot.ts(percent2)，但它显​​示 Erro em plotts(x = x, y = y, plot.type = plot.type, xy.labels = xy.labels, : 不能将超过 10 个系列绘制为“多个"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:15:07.677

如果您的数据框是`df`并使用您的列“游戏、月份和时间播放”，您可以尝试`ggplot(df, aes(x = Month, y = Timesplayed, fill=game)) + geom_bar(stat="identity")`

更多信息：[http ://docs.ggplot2.org/current/geom_bar.html](http://docs.ggplot2.org/current/geom_bar.html)

# fiddler - Fiddler - 将 http 请求隧道化到端口 443

> ID：16171277
> 
> 赞同：76
> 
> 时间：2013-04-23T13:57:18.320
> 
> 标签：fiddler

我有 Fiddler 来解密 https 流量。效果很好。

[http://fiddler2.com/documentation/Configure-Fiddler/Tasks/DecryptHTTPS](http://fiddler2.com/documentation/Configure-Fiddler/Tasks/DecryptHTTPS)

但是有些请求显示为“到”端口 443 的“隧道”。这些请求的协议也显示为 HTTP 而不是 HTTPS。我没有看到这些请求的解密内容。

![在此处输入图像描述](https://i.stack.imgur.com/j1ssd.png)

在响应详细信息窗格中，如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/2dRZT.png)

有人可以让我知道如何让提琴手解密这些隧道请求。如果你能提供一些关于这种情况下发生的事情的细节，也很感激。

干杯。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-04-23T15:41:06.420

你应该从阅读这个线程开始，它解释了 HTTP CONNECT 隧道是什么：[https ://groups.google.com/forum/#!topic/httpfiddler/RCkzE3HhhxY](https://groups.google.com/forum/#!topic/httpfiddler/RCkzE3HhhxY)

由于您已启用解密，如果您在 Fiddler 中没有看到任何 HTTPS 流量，则您要么启用了过滤器（单击帮助 > 过滤器故障排除），要么您尚未将 Windows 配置为信任 Fiddler 根证书，因此您的客户端正在中止一旦他们看到（不受信任的）Fiddler 证书，就立即连接。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-08-28T17:38:53.830

从 IOS 10 开始，还有一个额外的步骤。您需要信任证书。设置 -> 常规 -> 关于 -> 证书信任设置

[https://textslashplain.com/2016/07/27/using-fiddler-with-ios-10-and-android-7](https://textslashplain.com/2016/07/27/using-fiddler-with-ios-10-and-android-7)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-12T23:14:13.893

某些版本的 Fiddler 处理程序比其他版本更好。在我的工作场所，我们需要通过 Fiddler 路由外部设备。遵循完全相同的设置和 Fiddler 选项，我们有四台 PC 和两台设备。对于任一设备，两个 PC Fiddler 实例每次都无法成功建立隧道。两个 PC Fiddler 实例在任一设备上都能完美运行。PC 之间的共同点是 Fiddler 版本： Fiddler 4.4.9.2：隧道在两台 PC 上都适用于两个外部设备 Fiddler 4.4.9.7：在两台 PC 上，两个外部设备的隧道都失败

另请注意，Win8 应用程序还有进一步的设置，以避免卡住隧道。您可能需要点击“Win8 Config”按钮，确保您的应用程序被检查为环回豁免，重新启动 Fiddler ......不幸的是，这是我迄今为止只见过一次的东西，您可能仍然会卡在隧道上，直到您关闭 HTTPS 解密设置并重新打开它们。即使您信任证书然后重新启动 Fiddler。我无法解释那个，但我回到了与我开始时完全相同的设置，它刚刚开始工作。

最后，如果您正在使用 appxmanifest 开发自己的 Win8 应用程序，那么打开诸如 privateNetworkClientServer 之类的功能以帮助启用某些 Fiddler 测试场景也不会有什么坏处。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-31T11:35:43.583

我想现在回答这个问题已经很晚了，我的回答可能不会直接解决这个问题，但我认为它会解决主要动机。

因此，如果您正在监视的是 Web 应用程序，基本上`Google Chrome`可以让您查看如下`Websockets`所示`Network->Websockets`。 [![在此处输入图像描述](https://i.stack.imgur.com/VMw4F.png)](https://i.stack.imgur.com/VMw4F.png)

# macos - Mac OS X Quartz CGWindowListCreateImage 在 1366x768 分辨率上打乱图像

> ID：16171283
> 
> 赞同：1
> 
> 时间：2013-04-23T13:57:36.853
> 
> 标签：macos, resolution, quartz-graphics, distortion

我在 Mac OS X 上的 C++ 项目中实现了以下代码，用于捕获桌面屏幕：

```
int ScreenCaptureRoutines::CaptureImage(int width, int height)
{
  CGRect captureRect;

  captureRect.origin.x = 0;
  captureRect.origin.y = 0;
  captureRect.size.width = width;
  captureRect.size.height = height;

  CGImageRef img = CGWindowListCreateImage(captureRect, kCGWindowListOptionOnScreenOnly, kCGNullWindowID, kCGWindowImageDefault);

  if(img == NULL)
  {
      fprintf(stderr, "CGWindowListCreateImage failed\n!");
      return -1;
  }

  /* get pixels */
  CGDataProviderRef provider = CGImageGetDataProvider(img);
  CFDataRef dataRef = CGDataProviderCopyData(provider);
  uint8_t* pixels = (uint8_t*)CFDataGetBytePtr(dataRef);

  BitmapUtility::SaveBitmapToFile(pixels, width, height, 32, "/Users/Main/test32.bmp");
} 
```

该代码适用于 1024x768、1280x1024、1280x960、1280x768 等分辨率，但它完全打乱了 1366x768 的图像。

这是用于保存像素的 SaveBitmapFile 方法：

```
void BitmapUtility::SaveBitmapToFile(u8* pBitmapBits, long lWidth, long lHeight, unsigned short wBitsPerPixel, char* lpszFileName)
{
     BITMAPINFOHEADER bmpInfoHeader = {0};
     bmpInfoHeader.biSize = sizeBITMAPINFOHEADER;
     bmpInfoHeader.biBitCount = wBitsPerPixel;
     bmpInfoHeader.biClrImportant = 0;
     bmpInfoHeader.biClrUsed = 0;
     bmpInfoHeader.biCompression = BI_RGB;
     bmpInfoHeader.biHeight = lHeight;
     bmpInfoHeader.biWidth = lWidth;
     bmpInfoHeader.biPlanes = 1;
     bmpInfoHeader.biSizeImage = lWidth* lHeight * (wBitsPerPixel / 8);

     BITMAPFILEHEADER bfh = {0};
     bfh.bfType=0x4D42;
     bfh.bfOffBits = sizeBITMAPINFOHEADER + sizeBITMAPFILEHEADER;
     bfh.bfSize = bfh.bfOffBits + bmpInfoHeader.biSizeImage;

     //Creating bitmap file
     int fileDescriptor = open(lpszFileName, O_CREAT | O_WRONLY);
     if (fileDescriptor == -1)
     {
        //returning if error encountered when opening file
        return;
     }

     ByteBufferOutputStream bufferInfoHeader;

     bufferInfoHeader.write(&bmpInfoHeader.biSize, 4);
     bufferInfoHeader.write(&bmpInfoHeader.biWidth, 4);
     bufferInfoHeader.write(&bmpInfoHeader.biHeight, 4);
     bufferInfoHeader.write(&bmpInfoHeader.biPlanes, 2);
     bufferInfoHeader.write(&bmpInfoHeader.biBitCount, 2);
     bufferInfoHeader.write(&bmpInfoHeader.biCompression, 4);
     bufferInfoHeader.write(&bmpInfoHeader.biSizeImage, 4);
     bufferInfoHeader.write(&bmpInfoHeader.biXPelsPerMeter, 4);
     bufferInfoHeader.write(&bmpInfoHeader.biYPelsPerMeter, 4);
     bufferInfoHeader.write(&bmpInfoHeader.biClrUsed, 4);
     bufferInfoHeader.write(&bmpInfoHeader.biClrImportant, 4);

     ByteBufferOutputStream bufferFileHeader;

     bufferFileHeader.write(&bfh.bfType, 2);
     bufferFileHeader.write(&bfh.bfSize, 4);
     bufferFileHeader.write(&bfh.bfReserved1, 2);
     bufferFileHeader.write(&bfh.bfReserved2, 2);
     bufferFileHeader.write(&bfh.bfOffBits, 4);

     //Writing bitmap to file
     ssize_t bytesWritten = write(fileDescriptor, bufferFileHeader.get()->getData(), sizeBITMAPFILEHEADER);
     bytesWritten = write(fileDescriptor, bufferInfoHeader.get()->getData(), sizeBITMAPINFOHEADER);
     bytesWritten = write(fileDescriptor, pBitmapBits, bmpInfoHeader.biSizeImage);

     //Closing bitmap file
     close(fileDescriptor);
 } 
```

SaveBitmapToFile 方法仅用于测试，在实际场景中，我实际上是通过 libavcodec 传递捕获的像素以将帧转换并保存为 FLV 格式，但最终结果是相同的，图像被打乱了。

有谁知道为什么代码不适用于 1366x768（或其他非标准 4:3 或 16:9 分辨率）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-30T11:27:57.730

首先，您应该尝试在捕获后立即将 CGImageRef 渲染到屏幕，以确保数据有效。

看一下捕获的 bmp 文件。如果图像看起来像伪随机噪声，则您的像素格式错误。您需要调用**CGImageGetWidth**、**CGImageGetHeight**和**CGI​​mageGetBitsPerPixel （以及**[CGImage.h](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CGImage/Reference/reference.html)中的其他函数）以确保像素格式正确。

如果您仍然可以辨认出一些像素，但行未对齐，则您的字节步长是错误的。1024 和 1280 是 32、64 和 128 的倍数。另一方面，1366 的 2 除数的最大幂是 2。驱动程序通常使用 64 字节对齐的像素步长，因为这是常见的高速缓存行大小。步幅等于宽度 + 零填充。调用**CGImageGetBytesPerRow**获取从上一行起始地址到下一行起始地址的字节偏移量。

用大步写图像的伪代码：

```
ptr = pixels
bytesPerRow = CGImageGetBytesPerRow()
bytesPerPixel = (CGImageGetBitsPerPixel() + 7) / 8

for row = 0 to height:
    write(ptr, width*bytesPerPixel)
    ptr += bytesPerRow 
```

# python-2.7 - 使用python pandas，在由几列分组的列中查找元素的计数

> ID：16171284
> 
> 赞同：1
> 
> 时间：2013-04-23T13:57:37.373
> 
> 标签：python-2.7, pandas

如何使用 python pandas 在由几列分组的列中找到元素的计数？

我有以下 csv 文件结构：

```
'Country'     'City'     'Year'  'Month'   'Value'    'Street_Code'
 USA          New York    1971     jan        0.0        1
 USA          New York    1971     feb       23.5        1
 USA          New York    1971     mar       10.2        1
 USA          Florida     1971     jan        0.0        1
 USA          Florida     1971     feb        0.0        1
 USA          Florida     1971     mar        0.0        1
 USA          New York    1971     jan        0.0        2
 USA          New York    1971     feb        15.0       2
 USA          New York    1971     mar        7.6        2
 USA          Florida     1971     jan        0.0        2
 USA          Florida     1971     feb        0.0        2
 USA          Florida     1971     mar        2.3        2 
```

我想`'value'`通过分组来计算零（0.0）的数量`'Country'`, `'City'`, `'Year'`& `'Street Code'`。

到目前为止，我已经尝试过了；

```
import pandas as pd
data = pd.read_csv('country_details.csv')
count_data = data[data['Value'] == 0.0] # I'm filtering the data. I don't think this is the right way of doing it
grouped = count_data.groupby(['Country','Year','Month','Street_Code']) # I'm stuck here 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T14:19:33.670

您的过滤几乎是正确的，但您需要引用列名，在本例中为“值”。

尝试：

```
import pandas as pd
import StringIO

csv = StringIO.StringIO("""Country,City,Year,Month,Value,Street_Code
USA,NewYork,1971,jan,0.0,1
USA,NewYork,1971,feb,23.5,1
USA,NewYork,1971,mar,10.2,1
USA,Florida,1971,jan,0.0,1
USA,Florida,1971,feb,0.0,1
USA,Florida,1971,mar,0.0,1
USA,NewYork,1971,jan,0.0,2
USA,NewYork,1971,feb,15.0,2
USA,NewYork,1971,mar,7.6,2
USA,Florida,1971,jan,0.0,2
USA,Florida,1971,feb,0.0,2
USA,Florida,1971,mar,2.3,2""")

data = pd.read_csv(csv)

datasub = data[data['Value'] == 0.0]

print datasub.groupby(['Country','Year','Month','Street_Code'])['Value'].count()

Country  Year  Month  Street_Code
USA      1971  feb    1              1
                      2              1
               jan    1              2
                      2              2
               mar    1              1 
```

# python - Python，如何在作为重载方法的类的一部分的字典对象上使用 __setattr__？

> ID：16171289
> 
> 赞同：4
> 
> 时间：2013-04-23T13:57:44.913
> 
> 标签：python, python-2.7, setattr

如下面的代码所示，为什么我不能`__setattr__`在作为重载方法的类的一部分的 dict 上设置值？我预计这`b.hello`不会存在。

```
class MyClass():

    datastore = {}

    def __init__(self):
        self.datastore = {}

    def __getattr__(self, key):
        return self.datastore[key]

    def __setattr__(self, key, value):
        self.datastore[key] = value

a = MyClass()
b = MyClass()

a.hello = "err"

print a.hello # err
print b.hello # err 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T14:20:01.707

`b.hello`打印您的字符串“err”，因为`datastore`它是类本身的属性，而不是类对象的属性。因此，当你在 中初始化它时`a`，`b`也可以访问它。

因此，`datastore = {}`从类中删除。

此外，来自 Python[文档](http://docs.python.org/2/reference/datamodel.html#object.__setattr__)：

> 如果`__setattr__()`要分配给实例属性，它不应该简单地执行`self.name = value`——这会导致对自身的递归调用。相反，它应该在实例属性字典中插入值，例如`self.__dict__[name] = value`. 对于新式类，它应该调用具有相同名称的基类方法，而不是访问实例字典，例如 `object.__setattr__(self, name, value)`.

因此，将您的代码更改为：

```
class MyClass(object): # Use new style classes
    def __init__(self):
        object.__setattr__(self, 'datastore', {}) # This prevents infinite recursion when setting attributes

    def __getattr__(self, key):
        return self.datastore[key]

    def __setattr__(self, key, value):
        self.datastore[key] = value

a = MyClass()
b = MyClass()

a.hello = "err"

print a.hello # Works
print b.hello # Gives an error 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T01:11:07.797

我先解释一下为什么会出现这种情况：

```
class MyClass():

    datastore = {}

    def __init__(self):
        self.datastore = {} # calls __setattr__ 
```

如您所见，您的第一个变量定义`__init__`最终调用`__setattr__`

```
 def __setattr__(self, key, value):
        self.datastore[key] = value 
```

该实例还没有该`datastore`属性，因为它仍在定义过程中。所以这条线`self.datastore[key] = value`首先尝试`datastore`在实例`__dict__`中查找但找不到它！然后它在类树中查找一个级别，它确实找到了它，作为一个类属性！

记住这一点：

```
class MyClass():

    datastore = {} 
```

一开始这很令人困惑，因为您有一个实例变量和一个同名的类变量，您不应该**同时**拥有这两个变量。

所以你可以改变你`__init__`的：

```
object.__setattr__(self, 'datastore', {}) 
```

就像@Dhara 建议的那样，或者您可以使用我推荐的更通用的方法：

```
super(MyClass, self).__setattr__('datastore', {}) 
```

后一个选项仅适用于您应该使用的新型类（各方面都更好！）！只需添加`object`为超类

```
class MyClass(object): # In Py3k you don't need to since all classes are newstyle 
```

需要注意的一件事：

```
 def __setattr__(self, key, value):
        self.datastore[key] = value 
```

仅在您设置字典的键而不是实例的属性时才有效。小心不要做类似的事情

```
 def __setattr__(self, key, value):
        self.datastore = {} # for example 
```

因为这将导致无限递归，如果您想`__setattr__`使用以前的相同技巧做类似的事情：

```
 def __setattr__(self, key, value):
        super(MyClass, self).__setattr__('datastore', {}) 
```

最终结果应如下所示：

```
class MyClass(object):

    def __init__(self):
        super(MyClass, self).__setattr__('datastore', {})

    def __getattr__(self, key):
        return self.datastore[key]

    def __setattr__(self, key, value):
        self.datastore[key] = value

a = MyClass()
b = MyClass()
a.hello = "err"
print a.hello
print b.hello 
```

# c# - 取消注册 DelegateCommand / 获取使用的 DelegateCommands 列表

> ID：16171292
> 
> 赞同：0
> 
> 时间：2013-04-23T13:57:53.197
> 
> 标签：c#, wpf, delegates

它认为可以注销 a`DelegateCommand`但如何？谷歌搜索时我没有找到任何有用的例子。

我的第二个问题是可以检索应用程序使用的事件/委托命令的完整列表吗？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:30:31.850

通过以下方式取消注册`-=`：

```
myEvent += (MyDelegateHandler)myDelegateFunction; 
```

并注销：

```
myEvent -= (MyDelegateHandler)myDelegateFunction; 
```

您可以通过 GetInvocationList 枚举所有代表

```
foreach(Delegate d in myEvent.GetInvocationList())
{
    myEvent -= (MyDelegateHandler)d;
} 
```

# jquery - jQuery循环遍历表格行和单元格，选中复选框，然后连接

> ID：16171300
> 
> 赞同：23
> 
> 时间：2013-04-23T13:58:11.173
> 
> 标签：jquery

我有一个多行的表。表格中有几列带有复选框。我需要遍历每个复选框，在其中选中将来自该特定单元格的输入连接/连接到来自同一行的其他输入。

你可以在这里看到一个小提琴：http: [//jsfiddle.net/QS56z/10/](http://jsfiddle.net/QS56z/10/)

除了循环遍历行之外，我如何才能循环遍历每一个，`<td>`一旦我有了这个`<td>`，我如何查找名称以`x`该 td 开头的输入。一旦找到将输入从该输入连接/连接到行中的输入。

我希望这是有道理的。

本质上：我想将（家庭）加入（大小）到（等级），家庭和等级在同一行，并且每行有几个大小。每个结果都必须写入当前正在处理的 TD。

我已经到了这一点，但被卡住了：

```
function createcodes(){
    alert('running');
    //run through each row
    $('.authors-list tr').each(function(){
         //processing this row
            //how to process each cell(table td) where there is checkbox
        $($(this).find('input[name^="line"]').val(

            $('$(this).find('input[name^="family"]'').val() + ' ' + // common input(family) on row, use for all table cells(td)
            $('#$(this).find('input[name^="size"]'').val() + ', ' + // this cells input called size, unique to this cell only
            $('#$(this).find('input[name^="grade"]'').val() // common input(grade) on row, use for all table cells(td)
          );
          // end of cell row processing
      });
        //end of rows processing
} 
```

一如既往地感谢。

[http://jsfiddle.net/QS56z/10/](http://jsfiddle.net/QS56z/10/)

我的html是：

```
<table class="authors-list" border=1 id="ordertable">
 <tr>
     <td ><input type="text" id="product1" name="product1" class="rounded" value="38114CR"></td>
     <td ><input type="text" size='5' id="qty1" name="qty1" class="rounded" value="10"/></td> 
     <td class="tdcheckbox">
      <input type="checkbox"  id="h09_1" name="h09_1" checked class="rounded"/>
      <input type="text"  id="line_1_09" name="line_1_09" >
      <input type="text"  id="size_1_09" name="size_1_09" value="09">

    </td> 
     <td class="tdcheckbox">
      <input type="checkbox"  id="h12_1" name="h12_1" class="rounded"/>
      <input type="text"  id="line_1_12" name="line_1_12" value="">
      <input type="text"  id="size_1_12" name="size_1_12" value="12">
    </td> 
     <td class="tdcheckbox">
      <input type="checkbox"  id="h15_1" name="h15_1" checked class="rounded"/>
      <input type="text"  id="line_1_15" name="line_1_15" >
      <input type="text"  id="size_1_15" name="size_1_15" value="15">
    </td> 
    <td><input type="text" name="cubespercheck_1" id="cubespercheck_1" value="0" size=5></td>
    <td><input type="text" name="skufamily_1" id="skufamily_1" value="38114"></td>
    <td><input type="text" name="skugrade_1" id="skugrade_1" value="cr"></td>
 </tr>
</table>
<input type="button" id="continue" value="continue"> 
```

请记住有多行。谢谢。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-04-23T14:11:34.637

**更新**

我已经更新了你的演示：http: [//jsfiddle.net/terryyounghk/QS56z/18/](http://jsfiddle.net/terryyounghk/QS56z/18/)

另外，我已将两个更改`^=`为`*=`. 请参阅[http://api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)

并注意`:checked`选择器。请参阅[http://api.jquery.com/checked-selector/](http://api.jquery.com/checked-selector/)

```
function createcodes() {

    //run through each row
    $('.authors-list tr').each(function (i, row) {

        // reference all the stuff you need first
        var $row = $(row),
            $family = $row.find('input[name*="family"]'),
            $grade = $row.find('input[name*="grade"]'),
            $checkedBoxes = $row.find('input:checked');

        $checkedBoxes.each(function (i, checkbox) {
            // assuming you layout the elements this way, 
            // we'll take advantage of .next()
            var $checkbox = $(checkbox),
                $line = $checkbox.next(),
                $size = $line.next();

            $line.val(
                $family.val() + ' ' + $size.val() + ', ' + $grade.val()
            );

        });

    });
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-23T14:01:42.977

尝试这个：

```
function createcodes() {

    $('.authors-list tr').each(function () {
        //processing this row
        //how to process each cell(table td) where there is checkbox
        $(this).find('td input:checked').each(function () {

             // it is checked, your code here...
        });
    });
} 
```

# vb.net - 输入有效条目后在DataGridView单元格中输入无效条目时，如何获取当前单元格值？

> ID：16171302
> 
> 赞同：0
> 
> 时间：2013-04-23T13:58:17.707
> 
> 标签：vb.net, datagridview, datagridviewtextboxcell

我有一个具有 TextBox 列的 DataGridView 控件。在 DataGridView.CellValidating 事件中，我使用以下代码来验证条目是否为可接受的日期：

```
dgvStartingGrid.EndEdit()
Dim dteStartTime As DateTime
If Not Date.TryParse(dgvStartingGrid.CurrentRow.Cells(4).Value, dteStartTime) Then
    MessageBox.Show("Please enter a starting time in one of the following formats:" & vbCrLf & _
    vbCrLf & "- MM/DD/YY HH:MM:SS (24 Hour Format)" & vbCrLf & "- HH:MM:SS (24 Hour Format)" & _
    vbCrLf & "- HH:MM:SS (AM/PM) (12 Hour Format)", "Start Time Entry Error")
    e.Cancel = True
End If 
```

第一次编辑单元格时，此代码可以正常工作。

我遇到的问题是，如果我输入一个有效日期，然后在 CellValidating 事件中返回单元格并输入一个无效日期，它会跳过这个 If...End If 块，因为它显示当前单元格值是旧的有效日期，而不是当前单元格中的无效条目。

如何提交或获取当前驻留在 DataGridView 单元格中的无效值？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:12:14.827

请改用 CellValidated 事件。

在替换新单元格值之前调用 CellValidating 事件

# c# - C# - 处理异常并停止执行

> ID：16171309
> 
> 赞同：1
> 
> 时间：2013-04-23T13:58:29.480
> 
> 标签：c#, exception, web, service, exception-handling

假设我有两个班级。这是第一类称为**Internet**的相关代码：

```
public void doRequest()
{
     string URL = "http://localhost:4000/HomePage.aspx";
     HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(URL);
     request.Method = "POST";
     request.ContentType = "application/x-www-form-urlencoded";
     request.BeginGetRequestStream(new AsyncCallback(GetRequestStreamCallback), request);
}

public void GetRequestStreamCallback(IAsyncResult callbackResult)
{
     HttpWebRequest myRequest = (HttpWebRequest)callbackResult.AsyncState;
     Stream postStream = myRequest.EndGetRequestStream(callbackResult);
     byte[] byteArray = Encoding.UTF8.GetBytes("Test Message");
     postStream.Write(byteArray, 0, byteArray.Length);
     postStream.Close();
     myRequest.BeginGetResponse(new AsyncCallback(GetResponsetStreamCallback), myRequest);
}

public void GetResponsetStreamCallback(IAsyncResult callbackResult)
{
     HttpWebRequest request = (HttpWebRequest)callbackResult.AsyncState;
     HttpWebResponse response = null;
     try
     {
          response = (HttpWebResponse)request.EndGetResponse(callbackResult);
          StreamReader httpWebStreamReader = new StreamReader(response.GetResponseStream());
          string result = httpWebStreamReader.ReadToEnd();
      }
      catch (WebException)
      {
          Deployment.Current.Dispatcher.BeginInvoke(() => MessageBox.Show("Error: Could not reach the web service"));
      }
} 
```

此代码由名为 MainPage.xaml.cs 的类调用：

```
private void Button_LogIn_Click(object sender, RoutedEventArgs e)
{
     Internet net = new Internet();
     bool check = net.checkInternet();
     if (check.Equals(false))
     {
     }
     else
     {
         net.doRequest();
         ClientServiceSoapClient web_service = new ClientServiceSoapClient();
         web_service.LogInCompleted += new System.EventHandler<LogInCompletedEventArgs>(LogInComplete);
         web_service.LogInAsync(TextBox_Username.Text, TextBox_Password.Password);
      }
} 
```

我想要的是，如果在doRequest方法调用中发生异常，则处理异常（**Internet**类末尾的WebException），然后停止执行其后的代码（ClientServiceSoapClient web_service ....）。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T13:59:50.253

您可以在此处使用关键字[return](http://msdn.microsoft.com/en-GB/library/1h3swy84.aspx)（将返回 void）。我实际上已经使用了两次，你有一个空的 if 语句，所以我重新调整了一点。

```
 private void Button_LogIn_Click(object sender, RoutedEventArgs e)
        {
            Internet net = new Internet();
            bool check = net.checkInternet(); 

            if (check.Equals(false))
                  return;

                try
                {
                    await net.doRequest(); //UPDATED THIS LINE
                    ClientServiceSoapClient web_service = new ClientServiceSoapClient();
                    web_service.LogInCompleted += new System.EventHandler<LogInCompletedEventArgs>(LogInComplete);
                    web_service.LogInAsync(TextBox_Username.Text, TextBox_Password.Password);
                }
                catch
                {
                    //do not throw an error, instead just use the return keyword!
                    return;
                }   
        } 
```

但是，您使用的异步方法对我来说没有意义！如果您需要在继续之前验证结果，则不应异步调用它，它应该串行完成。或者，查看[await](http://msdn.microsoft.com/en-gb/library/vstudio/hh191443.aspx)关键字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-06-16T19:46:10.343

标题要求停止执行并且不从函数返回。因此，如果您不在 main 函数中，并且您不想抛出异常然后在 main 中再次捕获它，您可以使用 Environment.Exit() 和退出代码.. [https://msdn.microsoft。 com/en-us/library/ms681382(v=vs.85)](https://msdn.microsoft.com/en-us/library/ms681382(v=vs.85))

```
Environment.Exit(ERROR_INVALID_COMMAND_LINE) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T14:06:32.580

```
try
{
    net.doRequest();
}
catch(Exception e)
{
    if(e is WebException)
    {
        //handle appropriately
        return; //will exit the method
    }
    else
        throw; //good idea to throw unexpected exceptions anyway
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-23T14:01:12.753

您可以捕获异常，对其进行处理，然后重新抛出它，这样该方法中的其他代码就不会被执行。

```
try{
   ...    
}catch(Exception ex){
   // do something with ex
   throw;
} 
```

# .net - Perl 模块到 VBA

> ID：16171313
> 
> 赞同：1
> 
> 时间：2013-04-23T13:58:39.963
> 
> 标签：.net, perl, vba, dll

我编写了一个 perl 模块，用于我的几个脚本。它只导出一个返回数组的函数（但使用更多）。我现在需要从 VBA 中使用它（即获取返回数组或数组本身的函数）。
我尝试了不同的解决方案。
我找到了一个有效的。我使用来自 ActiveState PDK 的 PerlNet 创建了一个 .NET dll，并将其导入到 Visual Studio 2010 下。
[http://www.codeproject.com/Articles/16518/Quick-Introduction-to-PerlNET](http://www.codeproject.com/Articles/16518/Quick-Introduction-to-PerlNET)
[http://community.activestate.com/常见问题解答/分发-perlrt-dll-y](http://community.activestate.com/faq/distributing-perlrt-dll-y)

但它不是免费的解决方案。不幸的是，我没有budjet。

有没有人有某种解决方案？

谢谢，

雅各布

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T19:18:32.317

如果你宁愿花时间而不是金钱，你可以从[perlembed](http://perldoc.perl.org/perlembed.html "永久保留")开始你的研究。Strawberry Perl 应该为您提供编译另一个（嵌入式）perl 副本所需的所有工具。

# c++ - 编译 64 位时出现问题 (0xc000007b)

> ID：16171316
> 
> 赞同：1
> 
> 时间：2013-04-23T13:58:51.700
> 
> 标签：c++, windows, x86-64

我正在开发一个使用 MS Kinect SDK 和 facetracker 的 Kinect 项目。该代码在 Win32 上编译和运行完美，但我试图让它在 x64 中运行。我正在使用 Visual Studio，我创建了这个 x64 构建并将所有库位置更新为 amd64 并且它编译正确。当我尝试运行 x64 调试时，我收到以下警告： ![警告](https://i.stack.imgur.com/HKvcD.png)

VS2012 输出如下：

```
'KinectMain.exe' (Win32): Loaded 'C:\Users\Jacko\Documents\GitHub\KinectMain\x64\Debug\KinectMain.exe'. Symbols loaded.
'KinectMain.exe' (Win32): Loaded 'C:\Windows\System32\ntdll.dll'. Symbols loaded.
'KinectMain.exe' (Win32): Loaded 'C:\Windows\System32\kernel32.dll'. Symbols loaded.
'KinectMain.exe' (Win32): Loaded 'C:\Windows\System32\KernelBase.dll'. Symbols loaded.
'KinectMain.exe' (Win32): Loaded 'C:\Windows\System32\user32.dll'. Symbols loaded.
'KinectMain.exe' (Win32): Loaded 'C:\Windows\System32\gdi32.dll'. Symbols loaded.
'KinectMain.exe' (Win32): Loaded 'C:\Windows\System32\lpk.dll'. Symbols loaded.
'KinectMain.exe' (Win32): Loaded 'C:\Windows\System32\usp10.dll'. Symbols loaded.
'KinectMain.exe' (Win32): Loaded 'C:\Windows\System32\msvcrt.dll'. Symbols loaded.
'KinectMain.exe' (Win32): Loaded 'C:\Windows\System32\Kinect10.dll'. Cannot find or open the PDB file.
'KinectMain.exe' (Win32): Loaded 'C:\Windows\System32\winmm.dll'. Symbols loaded.
'KinectMain.exe' (Win32): Loaded 'C:\Windows\System32\advapi32.dll'. Symbols loaded.
'KinectMain.exe' (Win32): Loaded 'C:\Windows\System32\sechost.dll'. Symbols loaded.
'KinectMain.exe' (Win32): Loaded 'C:\Windows\System32\rpcrt4.dll'. Symbols loaded.
'KinectMain.exe' (Win32): Loaded 'C:\Windows\System32\ole32.dll'. Symbols loaded.
'KinectMain.exe' (Win32): Loaded 'C:\Windows\System32\oleaut32.dll'. Symbols loaded.
'KinectMain.exe' (Win32): Loaded 'C:\Windows\System32\msvcp100.dll'. Symbols loaded.
'KinectMain.exe' (Win32): Loaded 'C:\Windows\System32\msvcr100.dll'. Symbols loaded.
'KinectMain.exe' (Win32): Loaded 'C:\Windows\System32\setupapi.dll'. Symbols loaded.
'KinectMain.exe' (Win32): Loaded 'C:\Windows\System32\cfgmgr32.dll'. Symbols loaded.
'KinectMain.exe' (Win32): Loaded 'C:\Windows\System32\devobj.dll'. Symbols loaded.
'KinectMain.exe' (Win32): Loaded 'C:\Windows\System32\winusb.dll'. Symbols loaded.
'KinectMain.exe' (Win32): Loaded 'C:\Windows\System32\crypt32.dll'. Symbols loaded.
'KinectMain.exe' (Win32): Loaded 'C:\Windows\System32\msasn1.dll'. Symbols loaded.
'KinectMain.exe' (Win32): Loaded 'C:\Windows\System32\d2d1.dll'. Symbols loaded.
'KinectMain.exe' (Win32): Loaded 'C:\Program Files\Microsoft SDKs\Kinect\Developer Toolkit v1.7.0\Redist\x86\FaceTrackLib.dll'. Cannot find or open the PDB file.
'KinectMain.exe' (Win32): Unloaded 'C:\Program Files\Microsoft SDKs\Kinect\Developer Toolkit v1.7.0\Redist\x86\FaceTrackLib.dll'
The program '[0x17D0] KinectMain.exe' has exited with code -1073741701 (0xc000007b). 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T14:02:44.827

加载`...\x86\FaceTrackLib.dll`看起来很可疑。如果这是一个 64 位程序，您不应该加载 x64 或 amd64 或 x86_64 或其他任何称为 DLL 的东西吗？查看您的机器或安装媒体，看看是否有另一个可能是 64 位的 FaceTrackLib.dll。

微软在此处的文档证实了这一点：http: [//msdn.microsoft.com/en-us/library/jj130970.aspx](http://msdn.microsoft.com/en-us/library/jj130970.aspx)

# java - 无法使用 Eclipse 启动 Tomcat：“地址已在使用中”

> ID：16171318
> 
> 赞同：7
> 
> 时间：2013-04-23T13:58:53.420
> 
> 标签：java, eclipse, jsp, servlets

我无法启动我的 tomcat 服务器。我几乎尝试了一切。作为服务器位置，切换位置没有帮助。我在 Windows 8 上。

在这里，我发布了我的控制台错误：

```
org.apache.catalina.core.AprLifecycleListener 初始化
 INFO：基于 APR 的 Apache Tomcat Native 库，可在
 在 java.library.path 上找不到生产环境：
 C:\Program Files\Java\jdk1.7.0_21\bin;C:\Windows\Sun\Java\bin;C:\Windows\system32;C:\Windows;C:/Users/Krzys/Desktop/eclipse-jee -juno-SR2-win32-x86_64/eclipse/jre/bin/server;C:/Users/Krzys/Desktop/eclipse-jee-juno-SR2-win32-x86_64/eclipse/jre/bin;C:/Users/Krzys /Desktop/eclipse-jee-juno-SR2-win32-x86_64/eclipse/jre/lib/amd64;;C:\Users\Krzys\Desktop\eclipse-jee-juno-SR2-win32-x86_64\eclipse;;.
 kwi 2013 年 3 月 23 日下午 3:53:21 org.apache.tomcat.util.digester.SetPropertiesRule 开始
 警告：[SetPropertiesRule]{Server/Service/Engine/Host/Context} 设置
 属性 'source' 到 'org.eclipse.jst.jee.server:Lab5' 没有找到匹配的属性。
 kwi 2013 年 2 月 23 日下午 3:53:21 org.apache.coyote.AbstractProtocol 初始化
 信息：初始化 ProtocolHandler ["http-bio-8080"]
 kwi 2013 年 2 月 23 日下午 3:53:21 org.apache.coyote.AbstractProtocol 初始化
 严重：无法初始化与 ProtocolHandler [“http-bio-8080”] 关联的端点
 java.net.BindException：地址已在使用中：JVM_Bind <null>:8080
    在 org.apache.tomcat.util.net.JIoEndpoint.bind(JIoEndpoint.java:406)
    在 org.apache.tomcat.util.net.AbstractEndpoint.init（AbstractEndpoint.java:610）
    在 org.apache.coyote.AbstractProtocol.init（AbstractProtocol.java:429）
    在 org.apache.coyote.http11.AbstractHttp11JsseProtocol.init（AbstractHttp11JsseProtocol.java:119）
    在 org.apache.catalina.connector.Connector.initInternal(Connector.java:981)
    在 org.apache.catalina.util.LifecycleBase.init（LifecycleBase.java:102）
    在 org.apache.catalina.core.StandardService.initInternal(StandardService.java:559)
    在 org.apache.catalina.util.LifecycleBase.init（LifecycleBase.java:102）
    在 org.apache.catalina.core.StandardServer.initInternal(StandardServer.java:814)
    在 org.apache.catalina.util.LifecycleBase.init（LifecycleBase.java:102）
    在 org.apache.catalina.startup.Catalina.load(Catalina.java:633)
    在 org.apache.catalina.startup.Catalina.load(Catalina.java:658)
    在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    在 java.lang.reflect.Method.invoke(Method.java:601)
    在 org.apache.catalina.startup.Bootstrap.load(Bootstrap.java:281)
    在 org.apache.catalina.startup.Bootstrap.main（Bootstrap.java:455）
引起：java.net.BindException：地址已在使用：JVM_Bind
    在 java.net.DualStackPlainSocketImpl.bind0（本机方法）
    在 java.net.DualStackPlainSocketImpl.socketBind(DualStackPlainSocketImpl.java:96)
    在 java.net.AbstractPlainSocketImpl.bind(AbstractPlainSocketImpl.java:376)
    在 java.net.PlainSocketImpl.bind(PlainSocketImpl.java:175)
    在 java.net.ServerSocket.bind(ServerSocket.java:376)
    在 java.net.ServerSocket.<init>(ServerSocket.java:237)
    在 java.net.ServerSocket.<init>(ServerSocket.java:181)
    在 org.apache.tomcat.util.net.DefaultServerSocketFactory.createSocket(DefaultServerSocketFactory.java:49)
    在 org.apache.tomcat.util.net.JIoEndpoint.bind(JIoEndpoint.java:393)
    ... 17 更多

 kwi 2013 年 2 月 23 日下午 3:53:21 org.apache.catalina.core.StandardService initInternal
 严重：无法初始化连接器 [连接器 [HTTP/1.1-8080]]
 org.apache.catalina.LifecycleException：无法初始化组件 [连接器 [HTTP/1.1-8080]]
    在 org.apache.catalina.util.LifecycleBase.init（LifecycleBase.java:106）
    在 org.apache.catalina.core.StandardService.initInternal(StandardService.java:559)
    在 org.apache.catalina.util.LifecycleBase.init（LifecycleBase.java:102）
    在 org.apache.catalina.core.StandardServer.initInternal(StandardServer.java:814)
    在 org.apache.catalina.util.LifecycleBase.init（LifecycleBase.java:102）
    在 org.apache.catalina.startup.Catalina.load(Catalina.java:633)
    在 org.apache.catalina.startup.Catalina.load(Catalina.java:658)
    在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    在 java.lang.reflect.Method.invoke(Method.java:601)
    在 org.apache.catalina.startup.Bootstrap.load(Bootstrap.java:281)
    在 org.apache.catalina.startup.Bootstrap.main（Bootstrap.java:455）
    引起：org.apache.catalina.LifecycleException：协议处理程序初始化失败
    在 org.apache.catalina.connector.Connector.initInternal(Connector.java:983)
    在 org.apache.catalina.util.LifecycleBase.init（LifecycleBase.java:102）
    ... 12 更多
原因：java.net.BindException：地址已在使用：JVM_Bind <null>:8080
    在 org.apache.tomcat.util.net.JIoEndpoint.bind(JIoEndpoint.java:406)
    在 org.apache.tomcat.util.net.AbstractEndpoint.init（AbstractEndpoint.java:610）
    在 org.apache.coyote.AbstractProtocol.init（AbstractProtocol.java:429）
    在 org.apache.coyote.http11.AbstractHttp11JsseProtocol.init（AbstractHttp11JsseProtocol.java:119）
    在 org.apache.catalina.connector.Connector.initInternal(Connector.java:981)
    ... 13 更多
引起：java.net.BindException：地址已在使用：JVM_Bind
    在 java.net.DualStackPlainSocketImpl.bind0（本机方法）
    在 java.net.DualStackPlainSocketImpl.socketBind(DualStackPlainSocketImpl.java:96)
    在 java.net.AbstractPlainSocketImpl.bind(AbstractPlainSocketImpl.java:376)
    在 java.net.PlainSocketImpl.bind(PlainSocketImpl.java:175)
    在 java.net.ServerSocket.bind(ServerSocket.java:376)
    在 java.net.ServerSocket.(ServerSocket.java:237)
    在 java.net.ServerSocket.(ServerSocket.java:181)
    在 org.apache.tomcat.util.net.DefaultServerSocketFactory.createSocket(DefaultServerSocketFactory.java:49)
    在 org.apache.tomcat.util.net.JIoEndpoint.bind(JIoEndpoint.java:393)
    ... 17 更多

 kwi 2013 年 2 月 23 日下午 3:53:21 org.apache.coyote.AbstractProtocol 初始化
 信息：初始化 ProtocolHandler ["ajp-bio-8009"]
 kwi 2013 年 2 月 23 日下午 3:53:21 org.apache.coyote.AbstractProtocol 初始化
 严重：无法初始化与 ProtocolHandler [“ajp-bio-8009”] 关联的端点
 java.net.BindException：地址已在使用中：JVM_Bind <null>:8009
    在 org.apache.tomcat.util.net.JIoEndpoint.bind(JIoEndpoint.java:406)
    在 org.apache.tomcat.util.net.AbstractEndpoint.init（AbstractEndpoint.java:610）
    在 org.apache.coyote.AbstractProtocol.init（AbstractProtocol.java:429）
    在 org.apache.catalina.connector.Connector.initInternal(Connector.java:981)
    在 org.apache.catalina.util.LifecycleBase.init（LifecycleBase.java:102）
    在 org.apache.catalina.core.StandardService.initInternal(StandardService.java:559)
    在 org.apache.catalina.util.LifecycleBase.init（LifecycleBase.java:102）
    在 org.apache.catalina.core.StandardServer.initInternal(StandardServer.java:814)
    在 org.apache.catalina.util.LifecycleBase.init（LifecycleBase.java:102）
    在 org.apache.catalina.startup.Catalina.load(Catalina.java:633)
    在 org.apache.catalina.startup.Catalina.load(Catalina.java:658)
    在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    在 java.lang.reflect.Method.invoke(Method.java:601)
    在 org.apache.catalina.startup.Bootstrap.load(Bootstrap.java:281)
    在 org.apache.catalina.startup.Bootstrap.main（Bootstrap.java:455）
 引起：java.net.BindException：地址已在使用：JVM_Bind
    在 java.net.DualStackPlainSocketImpl.bind0（本机方法）
    在 java.net.DualStackPlainSocketImpl.socketBind(DualStackPlainSocketImpl.java:96)
    在 java.net.AbstractPlainSocketImpl.bind(AbstractPlainSocketImpl.java:376)
    在 java.net.PlainSocketImpl.bind(PlainSocketImpl.java:175)
    在 java.net.ServerSocket.bind(ServerSocket.java:376)
    在 java.net.ServerSocket.(ServerSocket.java:237)
    在 java.net.ServerSocket.(ServerSocket.java:181)
    在 org.apache.tomcat.util.net.DefaultServerSocketFactory.createSocket(DefaultServerSocketFactory.java:49)
    在 org.apache.tomcat.util.net.JIoEndpoint.bind(JIoEndpoint.java:393)
    ... 16 更多

 kwi 2013 年 2 月 23 日下午 3:53:21 org.apache.catalina.core.StandardService initInternal
 严重：无法初始化连接器 [连接器 [AJP/1.3-8009]]
 org.apache.catalina.LifecycleException：无法初始化组件 [连接器 [AJP/1.3-8009]]
    在 org.apache.catalina.util.LifecycleBase.init（LifecycleBase.java:106）
    在 org.apache.catalina.core.StandardService.initInternal(StandardService.java:559)
    在 org.apache.catalina.util.LifecycleBase.init（LifecycleBase.java:102）
    在 org.apache.catalina.core.StandardServer.initInternal(StandardServer.java:814)
    在 org.apache.catalina.util.LifecycleBase.init（LifecycleBase.java:102）
    在 org.apache.catalina.startup.Catalina.load(Catalina.java:633)
    在 org.apache.catalina.startup.Catalina.load(Catalina.java:658)
    在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    在 java.lang.reflect.Method.invoke(Method.java:601)
    在 org.apache.catalina.startup.Bootstrap.load(Bootstrap.java:281)
    在 org.apache.catalina.startup.Bootstrap.main（Bootstrap.java:455）
    引起：org.apache.catalina.LifecycleException：协议处理程序初始化失败
    在 org.apache.catalina.connector.Connector.initInternal(Connector.java:983)
    在 org.apache.catalina.util.LifecycleBase.init（LifecycleBase.java:102）
    ... 12 更多
原因：java.net.BindException：地址已在使用：JVM_Bind <null>:8009
    在 org.apache.tomcat.util.net.JIoEndpoint.bind(JIoEndpoint.java:406)
    在 org.apache.tomcat.util.net.AbstractEndpoint.init（AbstractEndpoint.java:610）
    在 org.apache.coyote.AbstractProtocol.init（AbstractProtocol.java:429）
    在 org.apache.catalina.connector.Connector.initInternal(Connector.java:981)
    ... 13 更多
引起：java.net.BindException：地址已在使用：JVM_Bind
    在 java.net.DualStackPlainSocketImpl.bind0（本机方法）
    在 java.net.DualStackPlainSocketImpl.socketBind(DualStackPlainSocketImpl.java:96)
    在 java.net.AbstractPlainSocketImpl.bind(AbstractPlainSocketImpl.java:376)
    在 java.net.PlainSocketImpl.bind(PlainSocketImpl.java:175)
    在 java.net.ServerSocket.bind(ServerSocket.java:376)
    在 java.net.ServerSocket.(ServerSocket.java:237)
    在 java.net.ServerSocket.(ServerSocket.java:181)
    在 org.apache.tomcat.util.net.DefaultServerSocketFactory.createSocket(DefaultServerSocketFactory.java:49)
    在 org.apache.tomcat.util.net.JIoEndpoint.bind(JIoEndpoint.java:393)
    ... 16 更多

 kwi 2013 年 2 月 23 日下午 3:53:21 org.apache.catalina.startup.Catalina 加载
 INFO：初始化在 1271 毫秒内处理
 kwi 2013 年 2 月 23 日下午 3:53:21 org.apache.catalina.core.StandardService startInternal
 信息：启动服务 Catalina
 kwi 2013 年 3 月 53 日下午 3:53:21 org.apache.catalina.core.StandardEngine startInternal
 信息：启动 Servlet 引擎：Apache Tomcat/7.0.39
 kwi 2013 年 2 月 23 日下午 3:53:23 org.apache.catalina.startup.HostConfig deployDirectory
 信息：部署 Web 应用程序目录 C:\Users\Krzys\Desktop\eclipse-jee-juno-SR2-win32-x86_64\eclipse\apache-tomcat-7.0.39\webapps\docs
 kwi 2013 年 2 月 23 日下午 3:53:23 org.apache.catalina.startup.HostConfig deployDirectory
 信息：部署 Web 应用程序目录 C:\Users\Krzys\Desktop\eclipse-jee-juno-SR2-win32-x86_64\eclipse\apache-tomcat-7.0.39\webapps\examples
 kwi 2013 年 2 月 23 日下午 3:53:24 org.apache.catalina.core.ApplicationContext 日志
 信息：上下文侦听器：上下文初始化（）
 kwi 2013 年 2 月 23 日下午 3:53:24 org.apache.catalina.core.ApplicationContext 日志
 信息：SessionListener：contextInitialized()
 kwi 2013 年 2 月 23 日下午 3:53:24 org.apache.catalina.core.ApplicationContext 日志
 信息：ContextListener：attributeAdded（'org.apache.jasper.compiler.TldLocationsCache'，'org.apache.jasper.compiler.TldLocationsCache@737d54dd'）
 kwi 2013 年 2 月 23 日下午 3:53:24 org.apache.catalina.startup.HostConfig deployDirectory
 信息：部署 Web 应用程序目录 C:\Users\Krzys\Desktop\eclipse-jee-juno-SR2-win32-x86_64\eclipse\apache-tomcat-7.0.39\webapps\host-manager
 kwi 2013 年 2 月 23 日下午 3:53:24 org.apache.catalina.startup.HostConfig deployDirectory
 信息：部署 Web 应用程序目录 C:\Users\Krzys\Desktop\eclipse-jee-juno-SR2-win32-x86_64\eclipse\apache-tomcat-7.0.39\webapps\manager
 kwi 2013 年 2 月 23 日下午 3:53:24 org.apache.catalina.startup.HostConfig deployDirectory
 信息：部署 Web 应用程序目录 C:\Users\Krzys\Desktop\eclipse-jee-juno-SR2-win32-x86_64\eclipse\apache-tomcat-7.0.39\webapps\ROOT
 2013 年 2 月 23 日下午 3:53:24 org.apache.catalina.startup.Catalina 开始
 信息：服务器启动时间为 3028 毫秒 kwi 23, 2013 3:53:24 PM
 org.apache.catalina.core.StandardServer 等待
 严重：StandardServer.await：创建 [localhost:8080]：
 java.net.BindException：地址已在使用中：JVM_Bind
    在 java.net.DualStackPlainSocketImpl.bind0（本机方法）
    在 java.net.DualStackPlainSocketImpl.socketBind(DualStackPlainSocketImpl.java:96)
    在 java.net.AbstractPlainSocketImpl.bind(AbstractPlainSocketImpl.java:376)
    在 java.net.PlainSocketImpl.bind(PlainSocketImpl.java:175)
    在 java.net.ServerSocket.bind(ServerSocket.java:376)
    在 java.net.ServerSocket.<init>(ServerSocket.java:237)
    在 org.apache.catalina.core.StandardServer.await（StandardServer.java:427）
    在 org.apache.catalina.startup.Catalina.await(Catalina.java:766)
    在 org.apache.catalina.startup.Catalina.start(Catalina.java:712)
    在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    在 java.lang.reflect.Method.invoke(Method.java:601)
    在 org.apache.catalina.startup.Bootstrap.start（Bootstrap.java:322）
    在 org.apache.catalina.startup.Bootstrap.main（Bootstrap.java:456）

 kwi 2013 年 2 月 23 日下午 3:53:24 org.apache.coyote.AbstractProtocol 暂停
 信息：暂停 ProtocolHandler ["http-bio-8080"]
 kwi 2013 年 2 月 23 日下午 3:53:24 org.apache.coyote.AbstractProtocol 暂停
 信息：暂停协议处理程序 [“ajp-bio-8009”]
 kwi 2013 年 2 月 23 日下午 3:53:24 org.apache.catalina.core.StandardService stopInternal
 信息：停止服务 Catalina
 kwi 2013 年 2 月 23 日下午 3:53:24 org.apache.catalina.core.ApplicationContext 日志
 信息：SessionListener：contextDestroyed()
 kwi 2013 年 2 月 23 日下午 3:53:24 org.apache.catalina.core.ApplicationContext 日志
 信息：ContextListener：contextDestroyed()
 kwi 2013 年 2 月 23 日下午 3:53:24 org.apache.coyote.AbstractProtocol 停止
 信息：停止 ProtocolHandler ["http-bio-8080"]
 kwi 2013 年 3 月 23 日下午 3:53:24 org.apache.coyote.AbstractProtocol 销毁
 信息：销毁 ProtocolHandler ["http-bio-8080"]
 kwi 2013 年 2 月 23 日下午 3:53:24 org.apache.coyote.AbstractProtocol 停止
 信息：停止 ProtocolHandler ["ajp-bio-8009"]
 kwi 2013 年 3 月 23 日下午 3:53:24 org.apache.coyote.AbstractProtocol 销毁
 信息：销毁 ProtocolHandler ["ajp-bio-8009"]

```

* * *

在 Tomcat 停止后，我在控制台中收到此错误：

```
kwi 2013 年 4 月 23 日下午 4:27:38 org.apache.catalina.startup.Catalina stopServer
 严重：Catalina.stop：
 java.net.ConnectException：连接：本地计算机上的地址无效，或者远程计算机上的端口无效
    在 java.net.DualStackPlainSocketImpl.connect0（本机方法）
    在 java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:69)
    在 java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)
    在 java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200)
    在 java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)
    在 java.net.PlainSocketImpl.connect(PlainSocketImpl.java:157)
    在 java.net.SocksSocketImpl.connect(SocksSocketImpl.java:391)
    在 java.net.Socket.connect(Socket.java:579)
    在 java.net.Socket.connect(Socket.java:528)
    在 java.net.Socket.<init>(Socket.java:425)
    在 java.net.Socket.<init>(Socket.java:208)
    在 org.apache.catalina.startup.Catalina.stopServer(Catalina.java:499)
    在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    在 java.lang.reflect.Method.invoke(Method.java:601)
    在 org.apache.catalina.startup.Bootstrap.stopServer（Bootstrap.java:371）
    在 org.apache.catalina.startup.Bootstrap.main（Bootstrap.java:458）

```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-23T14:01:01.100

默认情况下，Tomcat 配置为在端口上启动，`8080`但您已经将某些东西绑定到该端口。它很可能是 Tomcat Web 服务器的另一个实例。

`Address already in use: JVM_Bind :8080`在日志中意味着您的机器已经有服务监听端口`8080`。使用[`netstat`](http://en.wikipedia.org/wiki/Netstat)（命令行工具）或[TCP View](http://technet.microsoft.com/en-gb/sysinternals/bb897437)（图形工具）找到它，将其关闭，然后重新启动 Tomcat。它应该克服那个错误。

或者，通过双击*Servers*`Tomcat vx.x Server at localhost`选项卡中的行并将窗口右侧显示的*所有*端口更改为不同的端口，将 Eclipse 中的 Tomcat 配置为在不同的端口上启动。

 *** * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-25T13:36:18.027

只需更改所有端口，例如：Tomcat 管理端口、Http/1.1 和 Ajp/1.3

示例 Tomcat 管理端口：8005 更改为 8004，Http/1.1：8080 更改为 8081，Ajp/1.3：8009 更改为 8008。

![在此处输入图像描述](https://i.stack.imgur.com/xsSO2.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-09T10:38:19.223

我和你有同样的问题，我在重启我的电脑后解决了这个问题。希望它有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-16T19:03:18.017

它表示端口号 8009 已被操作系统上运行的其他进程占用。

如果需要在 8009 上运行的服务，您可以将 server.xml 中的连接器配置更改为如下所示：

> 连接器端口="8089" 协议="AJP/1.3" redirectPort="8443"

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-28T13:00:48.590

如果您确定使用该端口的实例是另一个 tomcat 并且您无法将其关闭。强制关闭 java 运行时可能会有所帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-12-02T21:48:56.057

简单地..

开始 > 搜索“服务”，您将看到 tomcat 服务正在运行，停止它。

现在重新运行你的项目，希望你不会遇到任何困难**

# javascript - 删除 Javascript 中的所有反斜杠

> ID：16171320
> 
> 赞同：14
> 
> 时间：2013-04-23T13:59:04.920
> 
> 标签：javascript, web-scraping, slash

如何删除 JavaScript 字符串中的所有反斜杠？

```
var str = "one thing\\\'s for certain: power blackouts and surges can damage your equipment."; 
```

我想要像这样的输出

```
one thing's for certain: power blackouts and surges can damage your equipment. 
```

更新：

我在 JavaScript 的帮助下从页面中抓取数据并显示在花哨的弹出窗口上。

请帮助我

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-04-23T14:00:23.567

使用一个简单的正则表达式来解决它

```
str = str.replace(/\\/g, '') 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/cW62s/)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2017-09-12T10:10:20.997

这是根据标题的答案，因为标题是“**删除 Javascript 中的所有斜杠**”*而不是反斜杠*。因此，这是从 JavaScript 中的字符串中删除所有斜杠的代码。

```
str = '/mobiles-phones/.png';
str.replace(/\//g, "")//output would be "mobiles-phones.png"; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-23T14:01:39.090

正则表达式很棒`str.replace(/\\/g,'')`

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-04-23T14:00:55.130

[如何在 JavaScript 中进行字符串替换以将“9.61”转换为“9:61”？](https://stackoverflow.com/questions/2145988/string-replace-in-jquery)

```
var str = "one thing\\\'s for certain: power blackouts and surges can damage your equipment.";

str.replace("\", ""); 
```

# c# - NUnit 顺序属性与值中的数组

> ID：16171321
> 
> 赞同：4
> 
> 时间：2013-04-23T13:59:06.560
> 
> 标签：c#, arrays, nunit, sequential

如何将`string[][]`数组传递给 ValuesAttribute？

我有：

```
public string[][] Array1 = new[] {new[] {"test1", "test2"}};
//...
[Test, Sequential]
public void SomeTest(
    [Values("val1", "val2", "val3")] string param1, 
    [Values(Array1, Array2, Array3)] string[][] param2) { //... } 
```

我有`Cannot access non-static field "Array1" in static context`。比我`Array1`用`static`关键字标记，比我得到`An attribute argument must be a constant expression...`的比我用关键字标记它，`readonly`我仍然有`An attribute argument must be a constant expression...`

这里有什么方法可以传递多个数组吗？（除了相关的丑陋`string[][][]`和通过`param2`索引）`array[][]``array[][][]`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T18:53:27.590

有可能的。但是您需要使用[TestCaseSourceAttribute](http://www.nunit.org/index.php?p=testCaseSource&r=2.6.2)而不是`Sequential`and `Values`。

看一个例子：

```
object[][] testCases = new[] {

    // test case 1
    new object[] {
        "val1",
        new[] { "test11", "test12" }
    },

    // test case 2
    new object[] {
        "val2",
        new[] { "test21", "test22" }
    },

    // test case 3
    new object[] {
        "val3",
        new[] { "test31", "test32", "test33", "test34" }
    }
};

[Test]
[TestCaseSource("testCases")]
public void SomeTest(string param1, string[] param2)
{
    ...
} 
```

这里的另一个好处是：测试用例组织得更好，并且可以在多个测试中轻松重用。

# c# - 默认情况下不触发扩展 TreeView 事件

> ID：16171326
> 
> 赞同：1
> 
> 时间：2013-04-23T13:59:24.280
> 
> 标签：c#, asp.net, event-handling, custom-controls

我已经扩展了 TreeView 控件，以创建我自己的具有更多功能的版本。

在 Visual Studio 的“设计视图”中，我可以单击一个控件，在“属性”面板中查看其事件，然后双击一个事件旁边的事件，这会将我带入代码隐藏并为该事件创建一个空的处理程序。

我遇到的问题是，除非我在事件中明确声明以下内容，否则我的“CustomTreeView”控件实际上不会触发此处理程序`'Page_Load'`：

```
CustomTreeView1.SelectedNodeChanged += new EventHandler(CustomTreeView1_SelectedNodeChanged); 
```

所以我可以*让它*工作，但我想知道为什么我必须这样做，以及我如何能够通过让它自动发生来绕过它。

**更新 1**：我刚刚从头开始使用包含 Web 应用程序和控件库项目的新解决方案，以可能的最基本方式扩展 TreeView 并测试事件。它们按预期工作，无需额外的连线代码。我认为这个解决方案总体上出了点问题。

**更新 2**：我有一个解决方案 - Visual Web Developer Express 2010 在响应添加的事件处理程序的方式上非常受欢迎。有时，我在属性面板中双击事件名称，即使它在我的代码隐藏中创建了一个处理程序，它也根本不会更新 aspx 页面中的标记。其他时候，它会将所有小写的事件名称添加到标签中，这意味着它在运行时会丢失。我会检查是否有我缺少的补丁。

**更新 3**：VWD 现在在更多方面表现得非常奇怪 - 通过智能标记对 GUI 向导中的 SqlDatasource 所做的更改不会保存到底层标记代码中。我将此问题归结为安装损坏。

# ruby-on-rails - Rails 设计视图未呈现

> ID：16171328
> 
> 赞同：0
> 
> 时间：2013-04-23T13:59:27.733
> 
> 标签：ruby-on-rails, devise

我正在尝试将 Devise 集成到我的 Rails 应用程序中，但遇到了麻烦。

我想在我的页面中呈现用户注册表单：

我跑`rails generate devise:views`了，得到了：

```
 invoke  Devise::Generators::SharedViewsGenerator
  create    app/views/devise/shared
  create    app/views/devise/shared/_links.erb
  invoke  form_for
  create    app/views/devise/confirmations
  create    app/views/devise/confirmations/new.html.erb
  create    app/views/devise/passwords
  create    app/views/devise/passwords/edit.html.erb
  create    app/views/devise/passwords/new.html.erb
  create    app/views/devise/registrations
  create    app/views/devise/registrations/edit.html.erb
  create    app/views/devise/registrations/new.html.erb
  create    app/views/devise/sessions
  create    app/views/devise/sessions/new.html.erb
  create    app/views/devise/unlocks
  create    app/views/devise/unlocks/new.html.erb
  invoke  erb
  create    app/views/devise/mailer
  create    app/views/devise/mailer/confirmation_instructions.html.erb
  create    app/views/devise/mailer/reset_password_instructions.html.erb
  create    app/views/devise/mailer/unlock_instructions.html.erb 
```

`land.html.haml`

```
= render 'devise/registrations/new' 
```

但我收到一个错误：

```
Missing partial devise/registrations/new with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :raw, :ruby, :jbuilder, :coffee, :haml]}. Searched in:
  * ".../app/views"
  * ".../.rvm/gems/ruby-2.0.0-p0@startupcrawler/gems/devise-1.5.4/app/views" 
```

这也不起作用。

```
= render 'users/registrations/new' 
```

我配置错了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T14:27:30.220

要渲染一个部分，比如说`users/registrations/view`，相应的文件应该`_new.html.erb`在`app/views/devise/registrations`文件夹中命名。但是，仅仅这样做不会使您的表单在您的登录页面中工作，因为它无法访问资源名称和设计映射。

相反，我认为您可以按照此处的说明[https://github.com/plataformatec/devise/wiki/How-To:-Display-a-custom-sign_in-form-anywhere-in-your-app](https://github.com/plataformatec/devise/wiki/How-To:-Display-a-custom-sign_in-form-anywhere-in-your-app)放置表格在您的页面中。虽然那里的说明适用于登录表格，但它们也适用于注册表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T14:01:39.240

它是 = 渲染“设计/注册/新”

你错过了一个's'

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-25T20:54:16.773

使用 :template 就像在 haml = render :template => 'devise/registrations/new'

# facebook - Open Graph Search - 如何发布自定义操作，以便 Facebook 用户可以通过新的 Graph Search 找到它们

> ID：16171329
> 
> 赞同：5
> 
> 时间：2013-04-23T13:59:27.940
> 
> 标签：facebook, facebook-graph-api, search

我正在开发一个仍处于沙盒模式的 Open Graph Facebook 应用程序。我的测试用户是我的朋友，他们通过应用程序发布了相当多的操作，当我使用`https://graph.facebook.com/me/friends?fields=<namespace>:<action>`. 我的目的是通过新的 Facebook Graph Search 使这些自定义操作和与它们相关的对象可见。

我找不到通过新的图形搜索查看这些相同操作或对象的方法。您知道搜索文本应该是什么，或者我应该在我的应用程序中做什么以使它们可见吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-07T07:49:16.140

我最近也在调查同样的事情。我的最终结果是，通过常规图形搜索界面可用的可用动作/动词仅限于 facebook 提供的内容。我发现没有办法让我的自定义动作/动词出现。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-30T10:07:04.353

尝试`FQL`：

```
https://graph.facebook.com/fql?q=SELECT uid, name FROM user WHERE uid IN (SELECT uid1 FROM friend WHERE uid2 = me() ) AND is_app_user&access_token=|ACCES_TOKEN| 
```

它将列出所有使用您的应用程序的朋友。

# python - supervisord 在 vi rtualenv 文件夹中找不到命令

> ID：16171338
> 
> 赞同：6
> 
> 时间：2013-04-23T13:59:45.440
> 
> 标签：python, virtualenv, supervisord

我的`supervisord.conf`包含一堆这样的程序：

```
[program:gtaskqueue_puller_1]
directory=/root/scripts/gtaskqueue_puller
command=venv/bin/gtaskqueue_puller "foo"
autostart=true
autorestart=true

[program:gtaskqueue_puller_2]
directory=/root/scripts/gtaskqueue_puller
command=venv/bin/gtaskqueue_puller "bar"
autostart=true
autorestart=true 
```

但有时当我重新启动supervisord时，我得到

```
can't find command venv/bin/gtaskqueue_puller 
```

但是当我`cd`进入目录并运行相同的命令时，它按预期工作。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-08-15T17:34:58.530

即使设置了目录，有时主管也找不到具有相对路径的命令。

所以使用：

```
[program:gtaskqueue_puller_1]
directory=/root/scripts/gtaskqueue_puller
command=/root/scripts/gtaskqueue_puller/venv/bin/gtaskqueue_puller "foo"
autostart=true
autorestart=true

[program:gtaskqueue_puller_2]
directory=/root/scripts/gtaskqueue_puller
command=/root/scripts/gtaskqueue_puller/venv/bin/gtaskqueue_puller "bar"
autostart=true
autorestart=true 
```

而不是：

```
[program:gtaskqueue_puller_1]
directory=/root/scripts/gtaskqueue_puller
command=venv/bin/gtaskqueue_puller "foo"
autostart=true
autorestart=true

[program:gtaskqueue_puller_2]
directory=/root/scripts/gtaskqueue_puller
command=venv/bin/gtaskqueue_puller "bar"
autostart=true
autorestart=true 
```

# asp.net - Chrome 开发者工具中的标签页缺失

> ID：16171356
> 
> 赞同：0
> 
> 时间：2013-04-23T14:00:24.490
> 
> 标签：asp.net, google-chrome, rest, web

我需要为我正在处理的项目调试一个 asp.net/json Web 服务，但该项目不起作用，并且需要使用 Chrome 开发人员工具。

当我打开开发者工具时，我唯一的面板按钮是元素面板，它是灰色的。我没有资源、网络、脚本、时间线、配置文件、审核或控制台面板按钮。

我有 Chrome 26.0.1410.64 m。由于我遇到的问题，我还安装了[Chrome 28.0.1486.0 canary](https://www.google.com/intl/en/chrome/browser/canary.html)。当我第一次安装 canary 时，面板按钮在那里，然后它们就消失了。

我已经搜索了一个解决方案，但没有找到任何可以解释我为什么缺少这个功能的东西。

我安装了以下扩展：

*   高级 REST 客户端 3.1.2
*   显然是 9.3366.554.201
*   谷歌文档 .5
*   HTML 验证器 1.3.3
*   RSS 订阅扩展（由 Google 提供）2.2.2
*   速度追踪器（由 Google 提供）0.27

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T14:26:36.630

发现问题，很意外。按钮在那里，但我使用的主题使它们看起来是白底白字。我改变了主题，现在它们是可见的。但是，图标图形不显示。

# java - 图：只访问那些最大化效用函数的节点

> ID：16171357
> 
> 赞同：1
> 
> 时间：2013-04-23T14:00:27.690
> 
> 标签：java, algorithm, graph, graph-theory

起初我遇到了来自不同领域的问题，但现在它被简化并转换为图表。

图是

*   双向
*   全连接
*   每个顶点都有正成本
*   每条边都有负成本
*   开始和结束顶点相同

我只需要遍历那些最大化总效用成本的节点。

**这听起来像任何众所周知的图形问题吗？**

例子：

```
V = {A, B, C}

vertex points = {0, 6, 5}

edge cost = {[A,B]=-8, [A,C]=-2, [B,C]=-10} 
```

所以解决方案：只访问顶点`C`并返回。总共会给1分。

如果顶点被访问，它的点变为0。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T16:08:34.423

这就是所谓的领奖旅行商问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T16:50:03.323

我认为这对于一般图来说应该是 NP-hard，因为它可以重新表述为最长路径问题。为了看看如何，我们改变了边和顶点的成本。

让`c(e)`是边的成本`e`，让`e = {u,v}`和分别`c(u), c(v)`是顶点`u`和的成本`v`。将每条边的新成本设置为`c_new(e) = c(e) + 1/2*(c(u)+c(v))`。这背后的直觉是，在从顶点到自身的循环中，您使用与通过的每个顶点相关的 2 条边，因此您只能计算每条边的顶点成本的一半；将其视为在到达时支付一半成本，在离开顶点时支付另一半。

更改边的成本后，您可以忽略顶点成本，因为它们现在将被考虑在边的成本中。您的问题现在变成了找到一条使其边缘权重之和最大化的简单路径，这就是称为最长路径问题的 NP-hard 问题。

# asp.net - 为什么用于兼容性的元标记在 asp.net 页面中不起作用

> ID：16171359
> 
> 赞同：0
> 
> 时间：2013-04-23T14:00:27.983
> 
> 标签：asp.net

```
 <title>::.ACCRMS .::</title>
    <%-- <meta http-equiv="X-UA-Compatible" content="IE=7"/>--%>
    <link href="../Styles/ACACommon.css" type="text/css" rel="stylesheet" />
    <link href="../Styles/MenuStyle.css" type="text/css" rel="stylesheet" />
    <link href="../Styles/CalendarControl.css" type="text/css" rel="stylesheet" />
    <meta http-equiv="X-UA-Compatible" content="IE=8"/> 
```

我必须让 IE8 在兼容性视图中工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:10:04.870

要告诉 IE 8 在兼容性视图中显示页面，请告诉它该页面不是为 IE 8 构建的：

```
<meta http-equiv="X-UA-Compatible" content="IE=7" /> 
```

在您的代码中，您已经注释掉了这个元标记，并且有一个告诉 IE 该页面*是*为 IE 8 构建的。

# r - R最大似然算法

> ID：16171361
> 
> 赞同：0
> 
> 时间：2013-04-23T14:00:29.643
> 
> 标签：r, time-series

我必须从头开始构建最大似然估计器，不允许内置 mle 函数。我正在最大化一个随机变量，但不是平均值或方差，我有另一个参数（来自移动平均（1）过程的贝塔）。所以这是我构建的代码，但它告诉我“优化”函数找不到初始值。我在矩阵中有观察结果。行是不同的观察，列是不同的模拟（这就是为什么我在开始时有一个循环，从 1 运行到 R=10000）。非常感谢帮助:)

```
for (i in 1:R) {
llh_regr <- function (β, y, z) {
  kappa <- -((N-1)*log(pi*2)+(N-1)*log(1))/2
  residuals <- (y-c-β*z)
  loglik <- kappa-(1/2)*crossprod(residuals, residuals)
  return(loglik)
                               }

targetfunction <- function(β) {
  return(-llh_regr(β, y = x[,1], z = u_lag[,1]))
         }
  B[1,i] <- optim(runif(1), targetfunction)
} 
```

# yii - Yii ajax 验证 - 总是。为什么？

> ID：16171367
> 
> 赞同：0
> 
> 时间：2013-04-23T14:00:44.637
> 
> 标签：yii

我真的在这里变得一无所知：

CActiveForm enableAjaxValidation 设置为 FALSE。

```
<?php $form=$this->beginWidget('CActiveForm', array(
    'id'=>'team-form',
        'enableAjaxValidation'=>false,
        'enableClientValidation'=>true,
        'clientOptions'=>array(
            'validateOnSubmit'=>true,

    ),
        'htmlOptions' => array('enctype' => 'multipart/form-data'),
)); ?> 
```

在控制器上，我注释了这一行：

```
//$this->performAjaxValidation(array($model,$member)); 
```

尽管如此，每次我通过这些字段时，我都会收到在模型上设置的规则消息，所以确实是在进行 ajax 验证。

为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T14:44:13.980

`clientValidation`看起来几乎一样`ajaxValidation`，看看你的 broswer 网络控制台，你会看到没有 ajax 调用（除非你提交表单，因为你设置`validateOnSubmit`为 true）。

**编辑**：当您使用时`clientValidation`，Yii 将根据您在模型中声明的规则添加 javascript 来验证您的表单属性。就像是 ：

```
jQuery('#model-form').yiiactiveform({
  // ...
    'clientValidation':function(value, messages, attribute) {
       if(jQuery.trim(value)=='') {
         messages.push("Required attribute.");
       }
    },
  // ...
}); 
```

# javascript - Tabletop.js 看不到 Google 电子表格数据

> ID：16171369
> 
> 赞同：1
> 
> 时间：2013-04-23T14:00:47.773
> 
> 标签：javascript

我正在尝试让[tabletop.js](https://github.com/jsoma/tabletop)第一次工作。Tabletop.js 允许您使用 Google 电子表格作为网页的数据源。

当我运行我的代码时，它[在 github 上](https://github.com/lisawilliams/tabletop-js)

我收到以下错误：

> 获取 [https://spreadsheets.google.com/feeds/worksheets/0AppPPX-L4ABKdExWaVBqWFFuV](https://spreadsheets.google.com/feeds/worksheets/0AppPPX-L4ABKdExWaVBqWFFuV) .../basic?alt=json-in-script&callback=Tabletop.callbacks.tt136672522586174055 400（错误请求）tabletop.js:184

Tabletop.js 第 184 行内容如下：

```
 document.getElementsByTagName('script')[0].parentNode.appendChild(script); 
```

谷歌电子表格是公开的，就在这里：

[https://docs.google.com/spreadsheet/ccc?key=0AppPPX-L4ABKdExWaVBqWFFuVnFYU0Y1OHUwc0dNb3c#gid=0](https://docs.google.com/spreadsheet/ccc?key=0AppPPX-L4ABKdExWaVBqWFFuVnFYU0Y1OHUwc0dNb3c#gid=0)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T11:17:54.093

我想让你知道，我从 tabletop.js 的开发人员 Jonathan Soma 那里得到了我的问题的答案。这是他的解决方案的链接：[https ://twitter.com/dangerscarf/status/326878697284067329](https://twitter.com/dangerscarf/status/326878697284067329)

事实证明，通过“共享”按钮公开电子表格与通过 Google Docs/Drive 中的“文件”菜单“发布到网络”是不同的。您必须同时做这两件事（公开电子表格并将其发布到网络）才能使其正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T14:36:57.070

我打赌它在你的 URL 中有一个错误。

[https://github.com/jsoma/tabletop](https://github.com/jsoma/tabletop)

特别是它说：

在 Google 文档中，转到文件菜单并选择发布到网络。随意摆弄，然后单击开始发布。将出现一个 URL，例如[https://docs.google.com/spreadsheet/pub?hl=en_US&hl=en_US&key=0AmYzu_s7QHsmdDNZUzRlYldnWTZCLXdrMXlYQzVxSFE&output=html](https://docs.google.com/spreadsheet/pub?hl=en_US&hl=en_US&key=0AmYzu_s7QHsmdDNZUzRlYldnWTZCLXdrMXlYQzVxSFE&output=html)

收到！理论上，您对 key= 和 & 之间的部分感兴趣，但如果您愿意，您可以使用整个内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T14:51:12.907

我没有证据证明这一点，但是在 Google 电子表格键中包含破折号可能会在 Tabletop 端（编辑：或 Google 端）搞砸一些东西。我的所有键都没有破折号，将我的一个电子表格替换为您的代码会给出正确的响应。

我正在查看 Tabletop 的代码，但现在，创建另一个 Google 电子表格并希望它的键中没有破折号可能是值得的。

# c# - 通过 HTTPS 公开 WCF 数字签名服务

> ID：16171381
> 
> 赞同：1
> 
> 时间：2013-04-23T14:01:07.900
> 
> 标签：c#, .net, wcf, wcf-binding

根据规范，我必须通过数字签名的 HTTPS 公开服务。

我已经在 IIS 和 web.config 上配置了 HTTPS 服务，并且该部分正在工作。
我正在使用 basicHttpBinding 'cos 服务必须使用 SOAP 1.1

网络配置：

```
 <services>
        <service name="Namespace.MyService"
                 behaviorConfiguration="TestServiceBehaviour">

            <endpoint address="https://url/TestService.svc"
                      binding="basicHttpBinding"
                      bindingConfiguration="TestServiceBinding"
                      contract="Namespace.IMyService" />
        </service>

    </services>

    <bindings>
        <basicHttpBinding>
            <binding name="TestServiceBinding">
                <security mode="Transport">
                    <transport clientCredentialType="None" />
                </security>
            </binding>
        </basicHttpBinding>
    </bindings>

    <behaviors>
        <serviceBehaviors>
            <behavior name="TestServiceBehaviour">
                <serviceMetadata httpsGetEnabled="True"/>
                <serviceDebug includeExceptionDetailInFaults="True"/>
            </behavior>
        </serviceBehaviors>

        <endpointBehaviors>

        </endpointBehaviors>
    </behaviors> 
```

但我坚持签署部分。

netTcpBinding 可以使用 Sign 作为 protectionLevel。
是否可以使用 basicHttpBinding 做类似的事情？

# java - 二进制表达式树，emptyStackException (java)

> ID：16171383
> 
> 赞同：0
> 
> 时间：2013-04-23T14:01:09.180
> 
> 标签：java, tree, expression, binary-tree

我编写了一个代码，它从给定的字符串表达式创建一个二进制表达式树：

```
public ExprIF buildExpressionTree(String s)
{
    for(int i = 0; i<s.length(); i++)
    {
        if(Character.isDigit(s.charAt(i)) || isOperator(s.charAt(i)))//containOp(s,i))
        {
            treeRoot = new Expr(s.charAt(i)); 
            stack.push(treeRoot);
        }           
        else if(s.charAt(i) == '(')
        {
            //do nothing
        }   
        else
        {
            rightSubTree = stack.pop();
            treeRoot = stack.pop();
            leftSubTree = stack.pop();
            treeRoot.setLeft(leftSubTree);
            treeRoot.setRight(rightSubTree);
            stack.push(treeRoot);
        }           
    }
    return stack.pop();
} 
```

当我在纸上测试它时，它运行良好。问题是这个错误：

```
Exception in thread "main" java.util.EmptyStackException
    at java.util.Stack.peek(Stack.java:102)
    at java.util.Stack.pop(Stack.java:84)
    at builder.TreeBuilder.buildExpressionTree(TreeBuilder.java:49)
    at builder.TreeBuilder.build(TreeBuilder.java:29)
    at Main.main(Main.java:12) 
```

这个错误的原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:35:39.730

对于您提供的输入，您的代码只是忘记处理空格。

解决方案1：添加以下代码以删除所有空格。

```
s = s.replaceAll("\\s", ""); 
```

解决方案2：更换

```
}

else
{
rightSubTree = stack.pop();
/* ... ... */ 
```

经过

```
} else if (c == ')'){
    rightSubTree = stack.pop();
    /* ... ... */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T14:19:31.210

你的问题是你提供的输入字符串，它有空格，所以循环的第三次迭代得到一个空格字符并移动到最后一个`else`语句。此时堆栈为空，因此您得到`StackEmptyException`. 尝试使用**((1+2)*3)**输入字符串。

`else`在您的逻辑中，最后一次执行时您至少必须有 3 个元素（两位数和一个操作数） 。

代码中的另一个问题是不考虑')'右大括号，因此输入**“((1+2)*3)”** `else`语句将看到以下堆栈条目：

```
[1, +, 2]
[), *, 3] 
```

您还需要跳过')'，最好编写一个检查跳过字符的方法：

```
private boolean skip(char c)
    {
        return c==')' || c=='(' || c==' ';
    } 
```

现在在`else if`更改逻辑中：

```
else if(skip(s.charAt(i))
        {
            //do nothing, its a skip character
        } 
```

# java - 在 Liferay 搜索容器中显示来自不同数据库表的数据：Liferay

> ID：16171384
> 
> 赞同：2
> 
> 时间：2013-04-23T14:01:10.930
> 
> 标签：java, database, liferay, liferay-6

我一直在 liferay 中使用搜索容器来显示表格中的数据。效果很好！！这是一段代码：

```
<% 
List<testapp> pendingApprovals = ActionClass.getPendingLeaveApplications();
%>
<liferay-ui:search-container delta="20" emptyResultsMessage="No Results Found">
    <liferay-ui:search-container-results total="<%= pendingApprovals.size() %>"
       results="<%= ListUtil.subList(pendingApprovals , searchContainer.getStart(), searchContainer.getEnd()) %>" />

    <liferay-ui:search-container-row keyProperty = "empId" modelVar="search"
        className="com.test.mis.portal.model.testapp">
        <liferay-ui:search-container-column-text name='Leave Duration' value = '<%=String.valueOf(search.getLeaveDuration())%>'   href="" />
    </liferay-ui:search-container-row>

    <liferay-ui:search-iterator/>
</liferay-ui:search-container> 
```

使用上面的代码，我根据某些条件显示来自 testapp 表的数据。在同一代码中，我想添加一行并显示数据。该行的数据应该来自另一个表。简而言之，我想使用来自两个不同数据库表的搜索容器显示数据。有可能吗？我的要求是数据来自两个不同的表

带有要求的已编辑部分我有一些字段的员工表我有另一个表离开一些字段。empId 在映射到 Employee 表的 Leave 表中。

我有一个搜索容器，仅当休假待处理时才显示休假表中的数据我只想显示员工表中与休假表匹配并满足上述条件的字段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T07:24:55.577

可能有很多种方法，这里我列出一些我很容易想到的方法：

1.  一种方法是修改`TestAppImpl`通过 ServiceBuilder 生成的模型以包含您的依赖项，如下所示：

    ```
    public class TestAppImpl extends TestAppBaseImpl {

        private List<OtherTableData> otherTableDataList;

        private OtherTableData otherTableData;

        // if want to retrieve a list of rows
        public List<OtherTableData> getOtherTableDataList() {

            // call a custom method created in the OtherTableDataLocalService
            // testAppId variable is available to TestAppImpl
            List<OtherTableData> otherDataList = OtherTableDataLocalServiceUtil.getOtherDataListByTestAppId(testAppId);

            return otherDataList;
        }

        // if want to retrieve just one row
        public OtherTableData getOtherTableData() {

            // call a custom method created in the OtherTableDataLocalService
            // testAppId variable is available to TestAppImpl
            OtherTableData otherData = OtherTableDataLocalServiceUtil.getOtherDataByTestAppId(testAppId);

            return otherData;
        }
    } 
    ```

    在上述更改之后，您将不得不重建您的服务。

    现在在 JSP 中你可以使用：

    ```
    <liferay-ui:search-container-column-text name='Other table data name' value='<%=search.getOtherTableData().getName() %>' href="" /> 
    ```

2.  否则，如果您不想更改`TestAppImpl`JSP 中的 then ，您可以使用：

    ```
    <liferay-ui:search-container-column-text>

    <%
    List<OtherTableData> otherDataList = OtherTableDataLocalServiceUtil.getOtherDataListByTestAppId(search.getTestAppId());

    for (OtherTableData tempData : otherDataList) {
    %>

        <%=tempData.getName() %>
        <%=tempData.getDescription() %>
        <%=tempData.getData() %>

    <%
    }
    %>

    </liferay-ui:search-container-column-text> 
    ```

3.  上述第 2 点的变体：

    ```
    <liferay-ui:search-container-column-jsp
        name="otherDataFetch"
        path="/html/portlet/testApp/other_data.jsp"
    /> 
    ```

    在`other_data.jsp`我们可以有以下代码：

    ```
    <%
    ResultRow row = (ResultRow)request.getAttribute(WebKeys.SEARCH_CONTAINER_RESULT_ROW);

    TestApp search = (TestApp) row.getObject();

    List<OtherTableData> otherDataList = OtherTableDataLocalServiceUtil.getOtherDataListByTestAppId(search.getTestAppId());

    for (OtherTableData tempData : otherDataList) {
    %>

        <%=tempData.getName() %>
        <%=tempData.getDescription() %>
        <%=tempData.getData() %>

    <%
    }
    %> 
    ```

希望这是您正在寻找的东西，或者至少它可能会给您一个前进的提示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-29T07:18:55.340

您的问题有两个方面：

1.  能够通过使用employeeId 外键从表Leave 和Employee 中检索数据。您不需要自定义查询，这是一项非常简单的任务，我只是指出来。
2.  在搜索容器中显示无法从一个数据/表中检索到的数据。如您所见，名为“className”的“liferay-ui:search-container-row”属性可以取一个类名的值。关于这一点，我可以看到两种方法：

a) 检索每个 Leave 表的结果，并按员工 ID 和待处理状态过滤掉。然后在每一行中，使用employeeId 再次取回Employee 实例（通过EmployeeLocalServiceUtil.getEmployee(empId)），然后获取Employye 属性，如员工姓名等。这将需要您亲自处理jsp 文件

b) 创建一个自定义类（比如 EmployeePendingLeaves），并将其用作 searchContainer 的模型类。不要将它包含在您的数据库模型中。只需创建一个扫描 Employee 和 Leave 表的函数，并为每个结果行创建一个 EmployeePendingLeaves 实例。它应该对每一行的列都有一个变量/属性

# android - 屏幕像素分辨率可绘制选择器

> ID：16171390
> 
> 赞同：0
> 
> 时间：2013-04-23T14:01:17.357
> 
> 标签：android, resources, drawable

虽然 Android drawables 对多屏的支持是一个非常强大的工具，尤其是它的 drawable-sw???dp 选择器，但我缺少一个非常重要的功能，那就是支持像素选择器中的屏幕大小（它可以实现为 drawable-sw? ??px）。

想象一下，您有一个应用程序，您希望将一些图形元素缩放到屏幕大小的 N%。如果您在 dpi 中使用基于屏幕尺寸的目录，您的图像在 hdpi 屏幕上会模糊，如果您使用基于 dpi 的目录，它们在大屏幕上会模糊。

当然，您可以将这些drawable 放入drawables-sw320dp-hdpi、drawables-sw320dp-mdpi 等，但这会导致所提供的各种图像版本（和APK 大小）和所需测试环境的爆炸式增长。

目前，我正在通过将此类可绘制对象放在资产文件夹中并以编程方式选择它们来解决此问题，但这当然不是一个理想的解决方案，并且从资产加载可绘制对象并不是在任何地方都能完美地工作。

请问您如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:06:34.390

在将图形放入项目之前缩放图形，然后将它们放入方便的文件夹中。例如，假设你有一个 bg.jpg，制作 4 个版本，分别为 700x100、600x80、500x60、400x50，然后分别放置 drawable-xhdpi、drawable-hdpi、drawable-mdpi、drawable-ldpi。如果它不起作用，请尝试使用矢量图形，每次缩放时都会预先计算它们的像素。最后，您可以使用 Matrix 类进行扩展，但它们可能很难学习和使用。

# sqlite - 无法加载文件或程序集 System.Data.SQLite

> ID：16171393
> 
> 赞同：0
> 
> 时间：2013-04-23T14:01:34.233
> 
> 标签：sqlite, exception, load, assemblies, system.data.sqlite

我有一个使用 SQLite3 数据库文件来存储和读取数据的工作 Windows 窗体应用程序 (C# .NET 4)。

当我在除开发机器之外的任何机器上部署应用程序时，我得到一个异常：“System.IO.FileNotFoundException：无法加载文件或程序集”

我尝试更改各种设置，手动加载 dll（Assembly.LoadFile 以及 Assembly.LoadFrom）并将 dll 文件放在 exe 旁边。此外，我尝试在 x86 和 x64 以及不同的目标平台下运行该应用程序。

我试过使用[无法加载程序集 System.Data.SQLite.dll](https://stackoverflow.com/questions/8904392/could-not-load-assembly-system-data-sqlite-dll) 都没有运气。

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T19:06:01.083

您还需要将 System.Data.SQLite.Linq.dll 和 System.Data.SQLite.DLL 复制到部署的 exe 文件夹中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T10:54:44.277

“System.Data.SQLite.dll”需要“msvcr100.dll”，这是它的依赖项之一。仅当您安装了最新的“Microsoft Visual C++ Redistributable”或内部提供此功能的任何其他产品时才可用。

例如，VS2010 会默认安装 C++ Redistributable。如果您不想在所有 PC 上安装 VC++ 2010 Redist，可以尝试将“msvcr100.dll”粘贴到应用程序 bin 文件夹中并分发。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-11-18T15:05:23.733

我在将我的应用程序从**.NetFramework**移动到**.NetCore**时遇到了同样的问题。**[后来从http://system.data.sqlite.org/index.html/artifact/99229e8a9f2b2617](http://system.data.sqlite.org/index.html/artifact/99229e8a9f2b2617)**下载了支持 .NetCore 的 .NetStandard2.0 sqlite 版本解决了这个问题。最好尝试下载并查看是否可行。还要检查内部异常（如果有）并解决它们

 *** * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T06:50:08.463

您使用的是什么版本的 Visual Studio？也许您的答案在于[带有 VS 2010 的 SQLite](https://stackoverflow.com/questions/5047772/sqlite-with-vs-2010) ...**

# php - 检查是否使用 CDataColumn 的 value 属性设置了关系

> ID：16171394
> 
> 赞同：0
> 
> 时间：2013-04-23T14:01:38.883
> 
> 标签：php, yii

我知道可以在 CDataColumn 的 value 属性内使用一种条件语句，如 CDataColumn[的“value”内的问题条件语句中所述。](https://stackoverflow.com/questions/3873022/conditional-statements-inside-of-value-for-cdatacolumn)我想知道是否有一种方法可以在尝试显示模型之前检查模型是否确实设置了值。我的问题出现了，因为我的模型 Source 有一个可选关系“国家”，不一定要为 Source 的所有实例设置。因此，当我在 Source CDataColumn 中访问国家/地区名称时，我得到了 PHP

> 试图获取非对象的属性

.. 如果该网格中的任何来源没有设置其国家/地区。一世

有什么方法可以检查关系是否设置在列的“值”属性内？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T14:20:21.743

你应该试试这个（你应该`name`用需要的属性替换）：

```
array(
  'name'=>'country',
  'value'=>'(isset($data->country)) ? $data->country->name : ""',
), 
```

您还可以在 Source 模型中使用 getter，例如：

```
public function getCountryName()
{
  // I assume country_id is the foreign key
  if (isset($this->country_id) && isset($this->country))
    return $this->country->name;

  return '';
} 
```

有了这个 getter，你只需要将它添加到你的 gridview 列中：

```
 'countryName', 
```

# c++ - 为什么这个简单的 c++11 线程示例在使用 clang 3.2 编译时会失败？

> ID：16171401
> 
> 赞同：3
> 
> 时间：2013-04-23T14:01:47.750
> 
> 标签：c++, multithreading, c++11, clang

我无法弄清楚我在这里做错了什么。这个非常短的程序：

```
#include <iostream>
#include <string>
#include <atomic>
#include <thread>
using namespace std;

int
main(int argc, char ** argv)
{
        thread foo( []() { 
                cout << "Hello World" << endl;
                return 0; 
        } );
        foo.join();

        return 0;
} 
```

编译时完美运行`gcc (4.7.2)`：

```
 $ g++ -ggdb -std=c++11 -pthread -o clang_thread_test clang_thread_test.cpp 
 $ ./clang_thread_test 
Hello World 
```

但是，使用它编译时`clang (3.2; x86_64-pc-linux-gnu; thread model: posix)`无法执行：

```
 $ clang++ -ggdb -std=c++11 -pthread -o clang_thread_test clang_thread_test.cpp 
 $ ./clang_thread_test 
pure virtual method called
terminate called without an active exception
Aborted 
```

这有什么已知的原因吗？我发现的唯一东西与丢失`-pthread switch`或未使用有关`libc++`。据我所知，后者仅与苹果系统相关。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-22T19:56:14.017

确认这有效：

```
clang++ --std=c++11 -pthread -D__GCC_HAVE_SYNC_COMPARE_AND_SWAP_1 -D__GCC_HAVE_SYNC_COMPARE_AND_SWAP_2 -D__GCC_HAVE_SYNC_COMPARE_AND_SWAP_4 -D__GCC_HAVE_SYNC_COMPARE_AND_SWAP_8 
```

[http://gcc.gnu.org/bugzilla/show_bug.cgi?id=53841](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=53841)

chrono 线程错误修复：

```
linux error: no matching constructor for initialization of 'duration' 
```

使用建议的修复：

```
- const chrono::nanoseconds __delta = __atime - __c_entry;
- const __clock_t::time_point __s_atime = __s_entry
+ __delta; + const auto __delta = __atime - __c_entry;
+ const auto __s_atime = __s_entry
+ __delta; in file condition_variable 
```

# css - 当孩子悬停在父菜单项上时更改背景

> ID：16171403
> 
> 赞同：0
> 
> 时间：2013-04-23T14:01:57.673
> 
> 标签：css, wordpress, menu, html-lists, frontend

我正在开发一个 WordPress 网站，当我构建一个两层深菜单时，父元素会在子元素悬停时突出显示默认的蓝色。在此期间我可以做些什么来更改父元素的背景？

[例如，请参见此图像](https://i.imgur.com/TX5HuXV.png) ![菜单图片](https://i.stack.imgur.com/4qCtr.png)

```
#access .dropdown-menu li:hover > .sub-menu { visibility: visible; } 
#access .dropdown:hover > .dropdown-menu { display: block; } 
#access .dropdown-menu .dropdown-menu { background: rgba(25,25,25,0.8); } 
#access .dropdown-menu .dropdown-menu { left: 100%; top: 0; border-top: none; background: rgba(25,25,25,0.8); } 
#access .dropdown-menu .dropdown-menu li a { color: #fff; text-decoration: none; } 
#access .dropdown-menu .dropdown-menu li a:hover { color: #7ac143; }` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:10:08.580

触发`li:hover`子菜单而不是父菜单 ( `.dropdown-menu`)。

```
#access.dropdown-menu > .sub-menu li:hover { visibility: visible; display: block; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T21:11:11.623

因此，您想在子项悬停时更改父项的颜色。不幸的是，CSS 中没有祖先（父）选择器。如果您必须实现这一点，则必须使用 Javascript。

```
$("#access .dropdown-menu .dropdown-menu li").hover(function() {
   $(this).parents("#access > .dropdown-menu > li").css('background', 'red');
}, function() {
   $(this).parents("#access > .dropdown-menu > li").css('background', 'blue');
}); 
```

有一些非常巧妙的方法可以使用 CSS 实现这一点，但我真的不建议这样做。这个不干净。[孩子悬停时更改父母](https://stackoverflow.com/questions/8622611/when-hovering-a-css-list-item-change-the-parent-items-css)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-29T00:43:17.060

一个简化的工作 jQuery 解决方案：

[http://jsbin.com/ojikix/1/edit](http://jsbin.com/ojikix/1/edit)

# list - 从 2 个表中获取属性到 1 个数据源

> ID：16171404
> 
> 赞同：1
> 
> 时间：2013-04-23T14:01:58.433
> 
> 标签：list, windows-phone-7, listview, data-binding

我需要从 2 个表中将 2 个数据放入 1 个数据源

评分 user_idtribe_id score_mark

部落tribe_id 部落名称

我需要 score_mark 和tribe_name，但是，到目前为止，我只能从 Score 对象中获取 score_mark，并从 Tribe 对象中获取相关的tribe_name

```
 var scores_by_userID_query = from Score score in appDB.Scores where score.user_id.Equals(userID) select score;
    ScoresByUserID = new ObservableCollection<Score>(scores_by_userID_query);

    TribesByScore = new ObservableCollection<Tribe>();
    if(ScoresByUserID != null)
    {
        foreach(Score score in ScoresByUserID)
        {
            var tribes_by_Score_query = from Tribe tribe in appDB.Tribes where tribe.tribe_id.Equals(score.tribe_id) select tribe;
            Tribe tribe_obj = tribes_by_Score_query.FirstOrDefault();
            TribesByScore.Add(tribe_obj);
        }
    } 
```

但是，这是 2 个数据源。

我试图创建一个新类并将属性加载到 List 中，但无法工作..如何将数据绑定到 xaml？

有什么资料可以读吗？

# oracle - 如何在 Oracle 中的数据集上链接计算和转换块？

> ID：16171405
> 
> 赞同：3
> 
> 时间：2013-04-23T14:02:00.303
> 
> 标签：oracle, database-design

多年来，我一直是跨多个平台的数据库开发人员，但这是我在 Oracle 的第一份繁重的工作。一个星期以来，我一直试图弄清楚如何将一组结构从 SQL Server 移动到 Oracle，而每条路径似乎都以一堵墙结束。

在 SQL Server 中，我有一个查询，它获取一组记录并进行一些简单的计算，然后将结果转置到一个临时表，其中第二个查询获取临时表并执行一些相当复杂的计算和列的重新分组。这些过程包含在第三个查询中，该查询使用不同的参数集（用户输入）调用第二个查询，以构建图形包的数据块。

那么，问题是——Oracle 中这样的链的“最佳实践”是什么？

这里使用Oracle的人说“正确的方法”是建立一个表并将数据放入表中然后传递。这肯定是错误的——我不敢相信我必须建立和维护一个空表数据库来保存各种计算的中间结果。

我认为`sys_refcursor`这是完美的并以这种方式构建了第一个查询（我不关心必须将 SQL 构建为字符串然后执行，但我可以忍受它）。但是当我进行第二个查询时，我无法将其加载/操作`sys_refcursor`为表，而是必须循环将每个值分配给一个变量，然后在计算后将这些值重新连接到一个`sys_refcursor`到转到下一步。这肯定是错的。

我最终承认我可以接受一些我会根据需要启动然后在完成时丢弃的表对象。但是现在我找不到任何指向后期实例化的材料。看来我仍然必须单独构建表格并将其作为工件留在结构中。

那么 - Oracle 中将数据集上的计算和转换块链接在一起的最佳方法是什么？我只是没有找到正确的文档吗？还是我走错了路？或者我是否需要将 Oracle 视为一种过程语言，只需将数据加载到一个数组中（你能构建一个数组吗？），然后，当我完成后，将它推回一个`sys_refcursor`以释放到调用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T14:56:05.180

有很多方法可以在 PL/SQL 中实现 ETL 过程。

`pipeline table function`最接近你写的 -[这是一个很好的教程](http://www.oracle-base.com/articles/misc/pipelined-table-functions.php)。

您还可以使用`dbms_scheduler`( [doc](http://docs.oracle.com/cd/B28359_01/appdev.111/b28419/d_sched.htm) ) 创建一系列操作。

但就个人而言，我更像是一个*简单的愚蠢*的kynda 家伙，所以我给你的建议是在 pl/sql 中编写一个简单的包。

你可能会觉得有用的书

[Oracle® 数据库数据仓库指南](http://docs.oracle.com/cd/B28359_01/server.111/b28313/toc.htm)

[PL/SQL 语言参考 - 调整 PL/SQL 应用程序以提高性能](http://docs.oracle.com/cd/B28359_01/appdev.111/b28370/tuning.htm#i48876)

# html - 将包含动态大小的输入元素的内联标签定位到表单中

> ID：16171407
> 
> 赞同：1
> 
> 时间：2013-04-23T14:02:04.460
> 
> 标签：html, css, positioning

我有一个表单，其中包含一些输入标签到标签标签中。输入显示在标签下方。我希望根据表单的宽度动态调整输入/标签的大小。问题是如果我告诉标签占据表单宽度的 100%，最后一个输入标签进入下面的行。

这是我的代码示例：

```
 <form action="">
        <label>Label1:<br>
            <input type="text"></label>
        <label>Label2:<br>
            <input type="text"></label>
    </form> 
```

这是一些CSS：

```
 form {
        width:60%;
        border:1px solid indigo;
    }
    label{
        display:inline-block;
        margin:0;
        width:50%;
    }
    input{
        width:100%
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T14:06:58.000

标签元素之间的空白占用空间，防止元素并排出现。注释掉它，它的工作原理：

[http://tinker.io/5e4b9](http://tinker.io/5e4b9)

```
<form action="">
    <label>Label1:<br>
        <input type="text"></label><!--
    --><label>Label2:<br>
        <input type="text"></label>
</form> 
```

# python - 如何在 Ironpython 中使用请求？

> ID：16171415
> 
> 赞同：1
> 
> 时间：2013-04-23T14:02:34.347
> 
> 标签：python, com, ironpython, python-requests

我正在尝试运行一个用 python 2.7 编写的脚本，使用我在我的 Windows 机器上安装的一些库 - 其中包括 numpy scipy、scikit、requests 等。

现在我需要使用一个 COM 对象 dll，所以我正在编写一个 IronPython 脚本来加载该 dll。但是，当我尝试使用或导入 python 2.7 代码时，出现导入错误：

> ImportError：没有名为请求的模块

如何使用我用 IronPython 编写的 python 2.7 代码？我可以通过系统命令使用 python 2.7 解释器运行脚本，但这意味着浪费大量时间。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T21:31:40.810

IronPython 是用 C# 编写的，因此您不能（轻松）在其上使用 cPython 的 C 扩展。Microsoft .Net 环境有一个[numpy 和 scipy 端口。](https://pytools.codeplex.com/wikipage?title=NumPy%20and%20SciPy%20for%20.Net)

对于纯 python 包和模块，附加到 sys.path 允许您进行导入。你有`python setup.py install`自己的代码吗？否则它不会在安装站点包中，您应该将项目目录添加到 sys.path。

请求还有一个问题，支持的编码问题 ( [https://ironpython.codeplex.com/workitem/4565](https://ironpython.codeplex.com/workitem/4565) ) 阻止了它的工作。这个问题已经公开了很长时间。

如果您可以更具体地了解您的代码和设置，其他人可能会提出更多建议。

# python - 使用xcode 4读取c源码

> ID：16171421
> 
> 赞同：1
> 
> 时间：2013-04-23T14:02:48.340
> 
> 标签：python, macos, xcode4

全部

我想使用 Xcode 4 探索 python 源。将项目文件添加到“命令行工具”空白项目后，我开始阅读。

但是除了像其他IDE一样的编辑区域之外，我找不到符号列表（如函数，符号）栏，如eclipse或pycharm ..

有没有办法做到这一点？

![像下面的图片](https://i.stack.imgur.com/dWkXD.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T14:06:44.527

`Ctrl`您可以通过单击 Xcode 中编辑器上方的弹出菜单（或使用键盘快捷键+ `6`）在当前文件中找到类似的符号列表。您还可以通过在菜单显示后开始输入来过滤此列表。

![截屏](https://i.stack.imgur.com/1k8x6.png)

Xcode 没有像 PyCharm 这样的专用面板。有一个检查器面板用于查看当前项目/工作区 ( + ) 中的*所有*符号，但无法过滤它以仅显示当前文件中的符号。`Cmd``2`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T14:45:46.273

左侧面板的第二个选项卡还为您提供了一个项目范围的符号列表，可以分层显示或作为平面列表显示。使用底部控件，您可以进一步过滤符号列表。

# wpf - 如何使元素引用 XAML 中的 StaticResource 故事板（而不是引用元素的故事板）

> ID：16171422
> 
> 赞同：3
> 
> 时间：2013-04-23T14:02:50.437
> 
> 标签：wpf, xaml, animation, mvvm, storyboard

我正在阅读 MSDN 动画教程，它描述了将情节提要应用于元素的以下步骤：

1.  创建故事板；
2.  用属性指定其目标元素名称`TargetName`；
3.  （指定目标属性）；
4.  （添加事件触发器启动动画）；

我看到了一个概念问题，我的困难来源于这个问题，就是这样：

> 我在情节提要和元素之间存在一对一的关系，这种关系在情节提要中定义。然后，我如何创建一个故事板，并有条件地将其应用于多个元素，从元素本身触发动画（我想是通过绑定/触发器）。

我的预期用例是模仿一个 LED 面板（椭圆堆叠面板），其中每个 LED 可以处于四种逻辑状态之一：开、关、快速闪烁和慢速闪烁（非常像以太网路由器那样）。然后，我将创建动画`BlinkingSlow`和`BlinkingFast`，然后当我的 ViewModel 进入相应的逻辑状态时触发它。然后我可以只关心 ViewModel 中的行为，让 View 自己处理，适当地触发和重用一些 StaticResource Storyboard。

```
<Window
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:System="clr-namespace:System;assembly=mscorlib"
        xmlns:local="clr-namespace:blinking"
        x:Class="blinking.MainWindow"
        Title="MainWindow"
        Background="{x:Null}"
        WindowStartupLocation="CenterScreen">

    <Window.Resources>
        <System:Double x:Key="Diameter">40</System:Double>
        <Color x:Key="RedOn">Red</Color>
        <Color x:Key="RedOff">#FF570000</Color>
        <Storyboard x:Key="BlinkSlow" RepeatBehavior="Forever">
            <ColorAnimationUsingKeyFrames
                    Storyboard.TargetProperty="(Shape.Fill).(SolidColorBrush.Color)"
                    Storyboard.TargetName="led4"
                    AutoReverse="True"
                    RepeatBehavior="Forever">
                <DiscreteColorKeyFrame KeyTime="0" Value="{StaticResource RedOn}"/>
                <DiscreteColorKeyFrame KeyTime="0:0:0.5" Value="{StaticResource RedOn}"/>
                <EasingColorKeyFrame KeyTime="0:0:0.5" Value="{StaticResource RedOff}"/>
                <DiscreteColorKeyFrame KeyTime="0:0:1" Value="{StaticResource RedOff}"/>
            </ColorAnimationUsingKeyFrames>
        </Storyboard>       
    </Window.Resources>

    <Window.Triggers>
        <EventTrigger RoutedEvent="FrameworkElement.Loaded">
            <BeginStoryboard Storyboard="{StaticResource BlinkSlow}"/>
        </EventTrigger>
    </Window.Triggers>

    <StackPanel x:Name="leds_container" Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0,20,4,0">
        <Ellipse x:Name="led1" Width="{StaticResource Diameter}" Height="{StaticResource Diameter}" Fill="#FFF90F0F" Margin="20,0,0,0"/>
        <Ellipse x:Name="led2" Width="{StaticResource Diameter}" Height="{StaticResource Diameter}" Fill="#FFF90F0F" Margin="20,0,0,0"/>
        <Ellipse x:Name="led3" Width="{StaticResource Diameter}" Height="{StaticResource Diameter}" Fill="#FFF90F0F" Margin="20,0,0,0"/>
        <Ellipse x:Name="led4" Width="{StaticResource Diameter}" Height="{StaticResource Diameter}" Fill="#FFF90F0F" Margin="20,0,0,0"/>
    </StackPanel>
</Window> 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T15:02:57.147

您可以为此使用样式触发器。

像你已经做的那样在资源部分创建你的故事板，但没有目标名称。

然后为包含 DataTrigger 的椭圆创建样式，启动当前状态所需的动画。

例如：

```
<Window.Resources>
    <!--
    Other declarations
    -->
    <Style TargetType="{x:Type Ellipse}">
        <Style.Triggers>
            <DataTrigger Binding="{Binding Path=State, Mode=OneWay}" Value="BlinkSlow">
                <DataTrigger.EnterActions>
                    <BeginStoryboard Storyboard="{StaticResource BlinkSlow}" />
                </DataTrigger.EnterActions>
            </DataTrigger>
            <!--
            Add DataTrigger for your other states too.
            -->
        </Style.Triggers>
    </Style>
</Window.Resources> 
```

# css - 具有内联样式 CSS 的表格上的备用行颜色

> ID：16171426
> 
> 赞同：9
> 
> 时间：2013-04-23T14:02:56.187
> 
> 标签：css, inline-styles

我想改变表格的背景颜色以增加可读性。谷歌搜索了一下后，我找到了我需要的代码。

```
tr:nth-child(even) {
    background-color: #000000;
} 
```

我的解决方案中的问题是，我无法访问 head 标签，我想用内联样式 CSS 来实现它，但它不起作用。

```
<tr style="nth-child(even) background-color: #000000;"> 
```

想法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-09-04T19:01:42.127

我也有类似的情况。我通过在我的桌子之前放置一个样式部分来解决它：

```
<style>
    table#some_table_id tr:nth-child(even) { background-color:#dddddd; }
</style>
<table id="some_table_id">
    <!-- table markup removed -->
</table> 
```

不是最优雅的解决方案，但它适用于我（在 Google Chrome 29.0.x 中）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-23T14:05:00.283

内联样式是每个元素的，因此您必须将适当的样式注入到每个其他元素的`style`属性中。`tr`如果您还没有动态生成这些行，并且您不能使用 JavaScript 来注入这些样式，那么您将不得不手动将属性应用于每个`tr`元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T14:27:06.160

除了 BoltClock 答案，如果你可以使用 jQuery，你可以尝试这样的事情：

```
$('tr:nth-child(even)').css("background", "red"); 
```

这会在您的标记中自动插入内联样式。

[一个工作小提琴](http://jsfiddle.net/6fK98/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-08-23T16:35:22.457

所以，我实际上是在使用 React ......我想要一个表格来显示交替颜色的行。该代码使用了很多内联样式，并且 css 存在一些有趣的语法差异，但我想我会分享一段代码。

我正在通过报告的一组行进行映射：

`<tbody> <tr key={line.number} style={(line.number % 2) ? { backgroundColor: 'someColor' } : null}> ...code table column data here... </tr> </tbody>`

我确实发现我无法使用此代码；不是因为它不起作用。由于有些行被跳过，我仍然会得到相邻的相同颜色的行。如果我碰巧弄清楚了，我会更新。现在，我想我只会使用边框。

-L-

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2018-03-15T19:28:20.373

这就是你要找的，希望对你有帮助。

```
 tr:nth-child(even) {
        background-color: black;
        color: white;
    }

    tr:nth-child(odd) {
        background-color: #0000335f;
    }
```

```
 <table class="table">
      <tbody>
        <tr>
          <td>1</td>
          <td>2</td>
          <td>3</td>
          <td>4</td>
          <td>5</td>
        </tr>
        <tr>
          <td>text1</td>
          <td>text2</td>
          <td>text3</td>
          <td>text4</td>
          <td>text5</td>
        </tr>
      </tbody>
    </table>
```

# wpf - 禁用 wpf DataGrid 控件的内置降序排序

> ID：16171427
> 
> 赞同：0
> 
> 时间：2013-04-23T14:03:03.280
> 
> 标签：wpf, datagrid

我正在使用 WPF 数据网格，需要让用户仅按升序对列进行排序，而不允许降序。

有没有简单的方法可以做到这一点？

最简单的方法是使用集合视图源实现我自己的排序，并在列标题上监听鼠标单击事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:29:45.087

好，我知道了 ...

只需处理 DataGrid 的**排序**事件：

```
 private void DataGrid_OnSorting(object sender, DataGridSortingEventArgs e)
    {
        e.Column.SortDirection = ListSortDirection.Ascending;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T14:30:01.133

您也可以使用行为来获得它。因为在这种情况下最好使用行为。

这就是你要做的：

首先将 SortOnlyAscending.cs 类添加到您的项目中。

```
public class SortOnlyAscending:Behavior<DataGrid> 
{
    protected override void OnAttached()
    {
        AssociatedObject.Sorting += AssociatedObject_Sorting;
        base.OnAttached();
    }

    protected override void OnDetaching()
    {
        AssociatedObject.Sorting -= AssociatedObject_Sorting;
        base.OnDetaching();
    }

    private void AssociatedObject_Sorting(object sender, DataGridSortingEventArgs e)
    {
        e.Column.SortDirection = ListSortDirection.Ascending;
    }
} 
```

然后在 .xaml 中，您将像这样将此行为添加到您的 DataGrid 中：

```
 <DataGrid>
        <i:Interaction.Behaviors>
           <local:SortOnlyAscending/>
        </i:Interaction.Behaviors>
   </DataGrid> 
```

此外，您还必须将两个命名空间添加到您的 .xaml 以使用您的行为。我的项目名称是 WpfApplication1，所以你可以随意更改它。

```
 xmlns:local ="clr-namespace:WpfApplication1" 
 xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity" 
```

而已。您还需要 System.Windows.interactivity.dll 来使用 Behavior 类。您也可以从 NUget Package Manager 下载它。这是[链接](http://nuget.org/packages/Blend.Interctivity.WPF.v4.0/1.0.3)。

# c# - 重复数据删除

> ID：16171429
> 
> 赞同：3
> 
> 时间：2013-04-23T14:03:07.937
> 
> 标签：c#, duplicates, backup

我想将我所有的 ms office、pdf、html、xml 文件增量备份到共享网络。我将读取 5mb 块的文件，我还将对该数据执行 MD5 以考虑去重复因素。我的问题是说特定文件在上传后被修改，现在我想增量备份更改的数据，如果我考虑相同的分块大小，那么所有块看起来都不同，我需要再次上传它们。那么有没有更好的去重方法，还是知道所有指定文件的结构（原始读取）然后处理去重会更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-05-20T15:37:24.673

重复数据删除有多种方法。必须知道文件的内部结构可能是最不吸引人的选择——至少对我来说是这样。我们做了与您要求的类似的事情，并围绕它构建了一个产品。

一些观察；首先，您可能已经听够了，考虑到问题的年龄，MD5 不是您最好的朋友。在这些类型的应用程序中使用的碰撞概率太高。我们选择了 SHA-1，还有很多其他做类似工作的产品。

您认识到数据的简单“分块”的问题......在文件早期插入的情况下可能必须重写所有后续块。

首先，您可能会认识到，在某个大小阈值以下，这无关紧要。更改后的较小文件的 IO 可能只是您吸收的内容。

但是，对于较大的文件，如果只有一小部分更改，则不必重写所有数据会很好......并且对于许多大的可写文件，大型静态数据集中的小更改正是发生的事情。例如，具有内部数据库结构的文件。

如果可以将其视为技巧，则技巧是识别静态数据范围。这相当于计算您识别的数据的哈希值。

例如，想象一下在您浏览文件时逐字节计算滚动哈希。如果您的散列函数是合理分布的，则每个新字节都会产生一个散列值，该散列值与前一个字节的贡献相当随机。

*识别*散列仅意味着散列值位于您任意选择的某个值的子集中……您已决定代表*哨兵*散列。例如，您可能会识别出所有除以常数值的哈希值。

当您识别出哈希时，您会捕获文件中该字节的偏移量，并将滚动哈希重置为其初始状态。在文件的末尾，您将累积一个偏移量列表。

现在，这些偏移量之间的相对距离将由您对哈希识别器的选择性控制。例如，如果您选择识别`hash % 32 == 0`，那么您将在彼此之间相对较小的距离处有很多偏移量。如果你有`hash % 65536 == 0`，你将拥有更少、更宽的偏移量。每个偏移之间的距离是可变的……有些会很小，有些会很大。**注意：**大块是非常可压缩的。

这些偏移量将成为断点……您将存储从偏移量到偏移量的块。在存储块之前，您将计算该块的哈希（SHA-1 哈希，而不是运行哈希）。如果您已经在存储中获得了该块，则无需再次存储它。在您的存储中，文件成为块列表。块最初可能来自一个文件，但也会被识别为出现在其他文件中。去重！

您应用于运行哈希的选择性不仅控制块大小，而且还控制您在大文件中捕获“小变化”的能力。

在这一点上，区分*运行*散列和*滚动*散列很重要。非常重要的是，当您在文件中滚动很长时间时，您正在计算的是对 的散列`last n bytes`，其中*n*是滑动框架的宽度。我们**没有**计算从偏移量到偏移量的哈希值。我们试图找到我们识别的*n*字节标记。

n 的大小也很重要。您将计算 0 到 n-1、1 到 n、2 到 n+1 等的哈希值。如果您考虑一下，*n*表示将存在的最小块大小（除了 end-of-紧跟在哨兵之后的文件）。

所以，在这一点上，你必须在想，*“Holey，这是很多散列！”* ，你是对的；但它并没有你想象的那么糟糕。选择正确的滚动哈希算法非常重要。有一种算法非常适合这种情况。我们使用的称为 Rabin-Karp 滚动哈希，它使用[Rabin 指纹](https://en.wikipedia.org/wiki/Rabin_fingerprint)来发现标记偏移量，它的美妙之处在于添加一个字节的贡献和删除一个字节的贡献是微不足道的、廉价的算术。

滚动哈希很重要（与运行哈希相反）的原因是更改检测。假设一个已识别的标记偏移发生在更改之前……然后另一个已识别的标记发生在更改之后。只有这两个偏移量之间的块将被存储。更改前的部分和更改后的部分将被预先存储。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-05T06:42:51.113

您可以检查 rsync 及其算法。

否则，您可能必须执行类似于 datadomain 的操作。校验和可变块大小，以便可以独立于给定文件中的偏移量来识别数据段。请在网上搜索以查看他们的专利等。这里不可能给出全文。

# node.js - 如何使用 node-gyp 安装 node_modules？

> ID：16171430
> 
> 赞同：0
> 
> 时间：2013-04-23T14:03:15.020
> 
> 标签：node.js, opencv, node-gyp

我正在尝试安装[node-opencv](https://github.com/peterbraden/node-opencv)。该 repo 已成功构建。我希望将 opencv 项目安装为 node_module global 。

**那可能吗 ？**

我是节点世界的新手。

* * *

**' *node-gyp rebuild* ' 和 ' *npm install* ' 一样吗？**

*因为构建了 node-opencv 的 repo，但我的项目仍然在寻找 HTTP 的依赖项*

> 回答：Jonathan Lonowski 在他的评论中。请阅读评论。真的很有帮助

* * *

我的项目中有opencv作为依赖项。我已经构建了opencv的repo但是我的项目仍然在为opencv依赖项进行http调用。

**我希望使用构建存储库。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T14:30:39.967

> 我希望将 opencv 项目作为 node_module 全局安装。那可能吗？

`-g`使用or`--global`选项安装的“全局”软件包不适[用于`require()`](https://npmjs.org/doc/folders.html)：

> *   如果你要去的话，**在本地**安装`require()`它。
> *   如果要在命令行上运行它，请**全局**安装它。

但是，您可以将它们*本地*安装到父目录。只要可以按照[文件夹](http://nodejs.org/api/modules.html#modules_loading_from_node_modules_folders)[描述的规则`node_module`](http://nodejs.org/api/modules.html#modules_loading_from_node_modules_folders)找到该位置，就可以要求它：

> 例如，如果文件位于`'/home/ry/projects/foo.js'`called `require('bar.js')`，则节点将按以下顺序查找以下位置：
> 
> *   `/home/ry/projects/node_modules/bar.js`
> *   `/home/ry/node_modules/bar.js`
> *   `/home/node_modules/bar.js`
> *   `/node_modules/bar.js`

* * *

> 我已经构建了 opencv 的 repo 但是我的项目仍然在为 opencv 依赖进行 http 调用。

为此，如果您能详细说明您是如何安装该软件包的，包括您如何将其指定为依赖项，将会有所帮助。

但是，只有在请求时才需要对包进行进一步的 HTTP 请求：

```
# download and build the latest version
npm install opencv

# it should remain at that version until you request an update
npm update opencv 
```

# android - Android socket连接空指针异常

> ID：16171431
> 
> 赞同：0
> 
> 时间：2013-04-23T14:03:19.803
> 
> 标签：android, sockets, nullpointerexception, connection

我的套接字连接有问题。它说这一行中有一个空指针异常：

```
Socket client = new Socket(ip,8000); 
```

但是IP没问题，端口应该没问题！

这是完整的代码：

```
public class socket { 

public static void out(String out, Context context){

    final String PREFS_NAME = "SAVEDIP";
    final String PREF_IP = "";
    String ip = null;
    SharedPreferences pref = context.getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE);
    ip = pref.getString(PREF_IP, "");
    Log.e("IP", ip);

    try {
        Socket client = new Socket(ip,8000);    
        //PrintWriter output = new PrintWriter(client.getOutputStream(), true);
        //BufferedReader in = new BufferedReader(new InputStreamReader(client.getInputStream()));
        //output.println(out);
        Toast.makeText(context, "OK", Toast.LENGTH_SHORT).show();
        //output.close();
        //in.close();
        client.close();
    } catch (UnknownHostException e) {
        Log.e("TAG", "UnknowHostExeption");
        e.printStackTrace();
    } 
    catch (IOException e) {
        Log.e("TAG", "IOExeption");
        e.printStackTrace();
    }
} 
```

}

我正在传递上下文和文本：

```
c = getApplicationContext();
socket.out("exit", c); 
```

我得到的错误如下：

```
 04-23 15:58:30.577: E/TAG(26540): IOExeption
04-23 15:58:30.577: W/System.err(26540): java.net.SocketException: The operation timed out
04-23 15:58:30.577: W/System.err(26540):    at org.apache.harmony.luni.platform.OSNetworkSystem.connectStreamWithTimeoutSocketImpl(Native Method)
04-23 15:58:30.577: W/System.err(26540):    at org.apache.harmony.luni.platform.OSNetworkSystem.connect(OSNetworkSystem.java:115)
04-23 15:58:30.577: W/System.err(26540):    at org.apache.harmony.luni.net.PlainSocketImpl.connect(PlainSocketImpl.java:244)
04-23 15:58:30.577: W/System.err(26540):    at org.apache.harmony.luni.net.PlainSocketImpl.connect(PlainSocketImpl.java:219)
04-23 15:58:30.577: W/System.err(26540):    at java.net.Socket.startupSocket(Socket.java:781)
04-23 15:58:30.577: W/System.err(26540):    at java.net.Socket.tryAllAddresses(Socket.java:194)
04-23 15:58:30.577: W/System.err(26540):    at java.net.Socket.<init>(Socket.java:258)
04-23 15:58:30.587: W/System.err(26540):    at java.net.Socket.<init>(Socket.java:222)
04-23 15:58:30.587: W/System.err(26540):    at com.example.andremote.socket.out(socket.java:28)
04-23 15:58:30.587: W/System.err(26540):    at com.example.andremote.Remote$11.onClick(Remote.java:175)
04-23 15:58:30.587: W/System.err(26540):    at android.view.View.performClick(View.java:2408)
04-23 15:58:30.597: W/System.err(26540):    at android.view.View$PerformClick.run(View.java:8817)
04-23 15:58:30.597: W/System.err(26540):    at android.os.Handler.handleCallback(Handler.java:587)
04-23 15:58:30.597: W/System.err(26540):    at android.os.Handler.dispatchMessage(Handler.java:92)
04-23 15:58:30.597: W/System.err(26540):    at android.os.Looper.loop(Looper.java:143)
04-23 15:58:30.597: W/System.err(26540):    at android.app.ActivityThread.main(ActivityThread.java:4914)
04-23 15:58:30.607: W/System.err(26540):    at java.lang.reflect.Method.invokeNative(Native Method)
04-23 15:58:30.607: W/System.err(26540):    at java.lang.reflect.Method.invoke(Method.java:521)
04-23 15:58:30.607: W/System.err(26540):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
04-23 15:58:30.607: W/System.err(26540):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
04-23 15:58:30.607: W/System.err(26540):    at dalvik.system.NativeStart.main(Native Method) 
```

请告诉我我在哪里做错了，我找不到solotiun！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:11:02.533

显然在这条线上

```
ip = pref.getString(PREF_IP, ""); 
```

在右侧返回空值，因此您的 ip 变量仍然为空值或无效值，因此当您将其作为参数传递给 Socket 构造函数时，因为您的 ip 变量（主机名）无效，它会产生 IOException。尝试检查您的 ip 变量是否为 null 或在将其传递给 Socket 构造函数之前。

# angularjs - 使用 AngularJS 打开新标签

> ID：16171433
> 
> 赞同：19
> 
> 时间：2013-04-23T14:03:26.157
> 
> 标签：angularjs

我需要知道，如何使用 Angular 在新选项卡/窗口中打开链接。我有一个常规网站，当用户单击“已注册”按钮时，我需要打开一个带有登录页面的新标签。

我应该使用 $location 来映射路径吗？最佳实践？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-10-27T16:47:04.503

您可以使用 Angular 的[窗口](http://docs.angularjs.org/api/ng.%24window)服务。要在新标签中打开“网址”，

```
$window.open('url'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T17:43:40.423

如果您想打开一个新选项卡，我建议让您的[$routeProvider](http://docs.angularjs.org/api/ng.$routeProvider)有一个“/login”路由，并且只需将您的按钮链接到“/login”，但是，请记住，如果您愿意，您将重新加载整个应用程序打开新选项卡时将登录页面保留在应用程序中。

您可以将它与类似的东西结合起来[打开](https://stackoverflow.com/questions/6303964/open-an-url-in-a-new-tab-when-click-a-button)一个与应用程序分开的小登录窗口，并监听窗口关闭并处理响应。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-19T13:44:38.070

确保按钮类型也不是“提交”类型，否则根本不起作用。

# ios - 使用 TPKeyboardAvoiding 类时 UITextField 弹出太高

> ID：16171435
> 
> 赞同：1
> 
> 时间：2013-04-23T14:03:30.940
> 
> 标签：ios, iphone, objective-c, ipad, uitextfield

我正在使用[`TPKeyboardAvodingScrollView`课程](https://github.com/michaeltyson/TPKeyboardAvoiding)来确保键盘永远不会弹出`UITextField`. 然而，当我点击`UITextField`文本字段上升但太高时，iPhone 上有一些奇怪的错误：

![在此处输入图像描述](https://i.stack.imgur.com/kw8wt.png)

在 GitHub 链接上，注释是这样说的：

> 笔记
> 
> 这些类当前调整 contentInset 参数以避免内容在键盘下方移动。这样做，而不是调整框架，是为了解决一个 iOS 错误，该错误会导致在稳定下来之前视图向上跳跃的抖动动画。为了促进这种变通方法，contentSize 至少保持与视图框架的大小相同。

也许与此有关，我只是不确定如何解决此问题。

我已经尝试更改此行：

```
[self setContentOffset:CGPointMake(self.contentOffset.x, 
                                   [self idealOffsetForView:firstResponder withSpace:[self keyboardRect].origin.y - self.bounds.origin.y]) 
```

与（添加+100）：

```
[self setContentOffset:CGPointMake(self.contentOffset.x, 
                                   [self idealOffsetForView:firstResponder withSpace:[self keyboardRect].origin.y - self.bounds.origin.y+100]) 
```

但这不是一个好方法，因为这在 iPad 上不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T14:11:31.493

最近遇到了同样的问题。对我来说，解决方案是修改 -(CGFloat)idealOffsetForView:(UIView *)view withSpace:(CGFloat)space 方法。这是它在我的项目中的外观：

```
-(CGFloat)idealOffsetForView:(UIView *)view withSpace:(CGFloat)space {

// Convert the rect to get the view's distance from the top of the scrollView.
CGRect rect = [view convertRect:view.bounds toView:self];

// Set starting offset to that point
CGFloat offset = rect.origin.y;

if ( view.bounds.size.height < space ) {
    // Center vertically if there's room
    offset -= floor((space-view.bounds.size.height)/2.0);
}
if ( offset + space > self.contentSize.height ) {
    // Clamp to content size
    offset = self.contentSize.height - space;
}

if (offset < 0) offset = 0;

return offset;
} 
```

更改是从条件块中删除第一条路径： if ( self.contentSize.height - offset < space ) 并只留下“else”路径。

# ms-access - 访问导出为电子表格错误 - 3436 创建文件失败

> ID：16171439
> 
> 赞同：1
> 
> 时间：2013-04-23T14:03:45.257
> 
> 标签：ms-access, ms-access-2007, ms-access-2010

我正在尝试在从 Access 导出的 Excel 电子表格的文件名中添加时间戳。

这是我的代码：

```
Private Sub Command31_Click()

Dim timeStamp As String
Dim XLfilePath As String

timeStamp = Now
XLfilePath = "C:\Folder\FileName - " & timeStamp & ".xls"

Debug.Print XLfilePath

DoCmd.TransferSpreadsheet acExport, , "MyAccessTable", XLfilePath, True

End Sub 
```

出于某种原因，我收到以下错误：

```
Run-time error 3436
Failure creating file 
```

对此有点困惑，因为`Debug.Print`表明`XLfilePath`变量正在持有：

```
C:\Folder\FileName - 23/04/2013 15:00:22.xls 
```

...这是我所期望的。

`C:\Folder\`确实已经存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T14:21:56.953

这可能不是一个有效的文件名。代替

```
timeStamp = Now 
```

尝试：

```
timeStamp = Format(Now,"YYYYMMDD HHMMSS") 
```

我相信这是在文件名中存储日期的公认标准。此外，在 Windows 资源管理器中查看文件夹时，您的文件默认按日期排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-11T23:57:17.153

我正在使用 DoCmd.TransferSpreadsheet acExport, , "Export Bid", strFileName, True 并得到不同的结果，包括运行时错误 3436、创建文件的安静失败、有时会通过压缩/修复消失，有时不会。在我看来是马车。2013 年 7 月 使用 Office 2010

# jquery - Cakephp：Ajax-request 转到指定另一个 url 时调用它的操作

> ID：16171445
> 
> 赞同：0
> 
> 时间：2013-04-23T14:04:00.223
> 
> 标签：jquery, routing, cakephp-2.0

我很抱歉这个不准确的标题，但我无法在没有显示一些代码的情况下描述我的问题。

我有一个动作 - edit_one - 在 routes.php 中定义如下：

```
Router::connect('/edit_one/:ad_id', array('controller' => 'ads', 'action' => 'edit_one')); 
```

如您所见，它需要一个参数 - ad_id。

我在 edit_one 视图中有一个 jQuery-ajax 函数，如下所示：

```
$.ajax({
        url: "delete_from_facebook",
        type: "POST",
        data: data,
        success: function (res) {
            console.log(res);
       }
       }); 
```

url 'delete_from_facebook' 在 routes.php 中定义如下：

```
Router::connect('/delete_from_facebook', array('controller' => 'ads', 'action' => 'deleteFromFacebook')); 
```

Controller 中的 deleteFromFacebook 函数：

```
public function deleteFromFacebook() {
    $this->autorender = false;
    try {

        $this->log($this->request->data, 'debug');
        $response = $this->fb_handler->deletePhotoFromFacebook($this->fb, $this->request->data['id']);
        $this->log($response, 'debug');

        return new CakeResponse(array('body' => json_encode($response)));
    } catch (FacebookApiException $fbe) {
        $this->showFacebookAPIException($fbe);
    } catch (Exception $e) {
        $msg = __('An error has occured while uploading images. Please try again.');
        $this->showException($e, $msg);
    }
} 
```

我的问题是，如果 url 是相对的，ajax 请求将始终发布到 edit_one 操作。如果提供的 url 是绝对的，它将发布到 deleteFromFacebook 函数。

我知道这其中的原因。这是因为 edit_one 操作需要一个参数。我已经尝试过了，然后 ajax-request 到了正确的位置。我正在使用视图中的相同 ajax 请求来制作广告，该广告在 routes.php 中定义，如下所示：

```
Router::connect('/add', array('controller' => 'ads', 'action' => 'add')); 
```

从路由中可以看出，add.ctp 和 edit_one.ctp 在同一个文件夹中。相对路径应该同样适用于两者。

我必须有参数，我必须使用相对路径。我该怎么做才能让 ajax 请求发布到正确的位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:29:54.897

向哪个 url 发出 ajax 请求完全取决于您的 jquery 代码。它与 CakePHP 路由无关。停止在您的 jquery 代码中使用相对 url，您的问题就消失了。一种常见的明智方法是将应用程序的基本路径放在 js var 中，然后将该 var 附加到 js 代码中使用的所有 url 字符串中。例如。

```
//At the top of a js file load in all your pages or in all page <head>
var baseUrl = "/";  // OR "/subfolder/"

$.ajax({
        url: baseUrl + "delete_from_facebook",
        type: "POST",
        data: data,
        success: function (res) {
            console.log(res);
       }
}); 
```

# c# - “为 lambda 声明提供的参数数量不正确”

> ID：16171451
> 
> 赞同：4
> 
> 时间：2013-04-23T14:04:37.440
> 
> 标签：c#, expression, expression-trees, func

当我有了这个，

```
public static object Create()
{
    return new object();
} 
```

这有效：

```
var m = typeof(Class).GetMethod("Create");
var e = Expression.Call(m);
Func<object> f = Expression.Lambda<Func<object>>(e).Compile(); 
```

但是当我有了这个，

```
public static object Create(Type t)
{
    return new object();
} 
```

这失败了：

```
var m = typeof(Class).GetMethod("Create");
var e = Expression.Call(m, Expression.Parameter(typeof(Type)));
var t = Expression.Parameter(typeof(Foo));
Func<object> f = Expression.Lambda<Func<object>>(e, t).Compile(); 
```

我得到*System.Core.dll 中出现“System.ArgumentException”类型的未处理异常。附加信息：为 lambda 声明提供的参数数量不正确*。该参数`t`只是一个虚拟类型的表达式`Foo`。我认为这无关紧要。我在这里哪里出错了？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-23T14:11:31.977

问题是你已经说过你想使用一个参数 - 但你实际上并没有提供任何地方来指定它。您正在创建两个`ParameterExpression`不同类型的 s，然后尝试将结果转换为`Func<object>`- 根本没有任何参数。你想要这样的东西：

```
var m = typeof(Class).GetMethod("Create");
var p = Expression.Parameter(typeof(Type), "p");
var e = Expression.Call(m, p);
Func<Type, object> f = Expression.Lambda<Func<Type, object>>(e, p).Compile(); 
```

Note that the same `ParameterExpression` is used in the argument list for both the`Expression.Call` method and the `Expression.Lambda` methods.

# android - 跨 appWidget 重新启动维护变量？

> ID：16171452
> 
> 赞同：0
> 
> 时间：2013-04-23T14:04:38.883
> 
> 标签：android, service, android-appwidget

我有一个 android`Activity`扩展`AppWidgetProvider`，我想在其中计算`onReceive()`被调用的次数。问题是，Logcat 中每隔一段时间就会有一个条目说`"No longer want blah.foo.bar.baz"`，不久之后会有一个条目说`"Scheduling restart of crashed service blah.foo.bar.baz"`. Android 会杀死然后重新启动我的进程，这会导致我的所有变量都初始化为默认值。`SharedPreferences`我能想到的保持变量状态的唯一方法是在Android“不再需要..”时将它们写入磁盘，然后在“计划重启..”时将它们读回。还有其他方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T14:47:30.177

> 问题是，Logcat 中每隔一段时间就会有一个条目说“不再需要 blah.foo.bar.baz”，不久之后有一个条目说“正在安排重新启动崩溃的服务 blah.foo.bar.baz”。Android 会杀死然后重新启动我的进程，这会导致我的所有变量都初始化为默认值。

这是完全正常的。

> 我能想到的保持变量状态的唯一方法是在Android“不再需要..”时使用SharedPreferences将它们写到磁盘，然后在“计划重启..”时将它们读回。

那是行不通的，因为您无法在这些时间点获得控制权。

> 还有其他方法可以做到这一点吗？

在数据更改（数据库、`SharedPreferences`. 或文件）时保留您的数据。需要时读入数据。

# visual-studio-2008 - 为什么 DataGridView 没有属性？（C# Windows 窗体，MS Visual Studio 2008）

> ID：16171462
> 
> 赞同：0
> 
> 时间：2013-04-23T14:05:04.670
> 
> 标签：visual-studio-2008, datagridview

我有一个 Windows 窗体应用程序，其中我的窗体使用标签页控件。我刚刚添加了新的标签页，并将 DataGridView 控件放到新页面上。当我选择控件并查看我的属性选项卡时，它是空白的！为什么会这样？我没有为控件设置任何数据源，因为我将在运行时将它连接到 LINQ 查询对象。

谢谢你的帮助！

罗伯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:14:03.360

我不知道原因是什么，但是我关闭了 VS 2008 并重新打开它，并且数据网格视图控件具有它的属性。

# iphone - iOS Lite 到付费，迁移核心数据

> ID：16171463
> 
> 赞同：1
> 
> 时间：2013-04-23T14:05:05.963
> 
> 标签：iphone, xcode, ios6

我一直在按照本指南在两个应用程序之间迁移核心数据，一个是免费的，一个是付费的。

[http://mobileorchard.com/lite-to-paid-iphone-application-data-migrations-with-custom-url-handlers/](http://mobileorchard.com/lite-to-paid-iphone-application-data-migrations-with-custom-url-handlers/)

我遇到了一个问题。我可以获得免费版本以启动付费版本，但升级数据未添加到 URL。当我打印出 fileData 的内容时（空）。

# php - 以不区分大小写的方式实例化一个类

> ID：16171467
> 
> 赞同：4
> 
> 时间：2013-04-23T14:05:14.380
> 
> 标签：php, oop

我面临一个问题。我在一个变量中有我的类名，我需要实例化它，但我无法知道我的变量与类的大小写完全相同。

例子：

```
//The class I'm fetching is named "App_Utils_MyClass"
$var = "myclass";
$className = "App_Utils_".$var;
$obj = new $className(); 
```

我怎样才能使这项工作？

附加信息：

*   我`class_exists()`在这个片段之前有一个检查（不区分大小写），以确保我想要的类确实存在。
*   类名总是正确的驼峰式（例如`MySuperAwesomeClass`）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T14:11:04.867

与流行的看法相反，PHP 中的函数名不区分大小写，对于类构造函数也是如此。你`case`应该已经工作了。尝试这个

```
<?php
class TestClass {
    var $testValue; 
}

$a=new testclass();
$b=new TestClass();
$c=new TESTCLASS();
print_r($a);
print_r($b);
print_r($c);

?> 
```

根据[PHP 手册](http://php.net/manual/en/functions.user-defined.php)

> 注意：函数名称不区分大小写，尽管在函数声明中出现时调用函数通常是一种很好的形式。

这也适用于您的类方法。

**解决方法/命名这些类的更好方法**

以下内容将确保类名始终与您定义的完全相同，无论是哪个`case`用户输入的

```
<?php       
class TestClass {
    var $testValue; 
}

$userEnteredValue="testCLASS";
$myClasses=get_declared_classes();
$classNameIndex=array_search(strtolower($userEnteredValue), array_map('strtolower', $myClasses));
if($classNameIndex!==FALSE)
{
    $classNameShouldBe=$myClasses[$classNameIndex];
      echo $classNameShouldBe;
}
else
{
    echo "This class is undefined";
}

?> 
```

# php - 解码字符串中的符号

> ID：16171471
> 
> 赞同：2
> 
> 时间：2013-04-23T14:05:21.120
> 
> 标签：php, encoding

`echo $name`给我`Mount Kimbie &mdash; Carbonated`。

我怎么得到`Mount Kimbie — Carbonated`？

&mdash、引号和其他东西应该被解码为常规符号。

`htmlspecialchars_decode($name)`和都试过了`html_entity_decode($name)`，都不行。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-23T14:10:56.330

您可能缺少 charset 参数：

```
html_entity_decode($name, 0, "UTF-8"); 
```

根据 PHP 版本，假定为 Latin-1，它不包含`mdash`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T14:07:54.247

`html_entity_decode()`对我有用吗？**编辑：**这使用您的 PHP 版本默认字符集，对我来说是 UTF-8。您的默认字符集可能不支持`&mdash;`

请注意，它返回字符串并且不编辑字符串本身，因此请尝试：

```
$name = html_entity_decode($name);
echo $name; 
```

# google-chrome - 'fileSystem' 仅允许用于打包的应用程序，这是一个旧的打包应用程序

> ID：16171474
> 
> 赞同：11
> 
> 时间：2013-04-23T14:05:28.677
> 
> 标签：google-chrome, google-chrome-extension, google-chrome-app

我需要在 manifest.js 中使用 fileSystem 权限，这样我就可以从我的 Chrome 扩展程序中读取/写入文件。

当我使用“加载解压的扩展程序”按钮加载我的扩展程序时，Chrome 显示：

```
'fileSystem' is only allowed for packaged apps, and this is a legacy packaged app. 
```

所以对于 Chrome，我的扩展是一个**遗留的打包应用程序**。

我的问题是如何在技术上将“**遗留打包应用程序**”转换为“**打包应用程序**”，以便我可以测试文件系统 API？

这是我的清单：

```
{
 "name": "MyApp",
 "version": "1.0",
 "manifest_version": 2,
  "app": {
  "launch": {
  "local_path": "index.html"
  }
 },
 "icons": {
 "128": "favicon.ico"
 },
  "permissions" : [
    "fileSystem"
  ]
} 
```

事实上，我已经在使用`"manifest_version": 2`.

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-24T14:48:55.087

打包的应用程序在清单的“应用程序”部分具有不同的结构。您的 manifest.json 将类似于：

```
{
  "name": "MyApp",
  "version": "1.0",
  "manifest_version": 2,
  "app": {
    "background": {
      "scripts": [
        "main.js"
      ]
    }
  },
  "icons": {
    "128": "favicon.ico"
  },
  "permissions": [
    "fileSystem"
  ]
} 
```

并且您还需要一个后台脚本（在此示例中为“main.js”），当用户单击应用程序图标时，它会打开您的 index.html：

```
chrome.app.runtime.onLaunched.addListener(function() {
  chrome.app.window.create('index.html', {
    bounds: {
      width: 500,
      height: 300
    }
  });
}); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-23T15:06:24.393

将此添加到您的清单中：

```
"manifest_version": 2, 
```

# javascript - 如何在不更新主数组中的数组对象数量的情况下更新 Knockout 中的映射内部数组？

> ID：16171476
> 
> 赞同：0
> 
> 时间：2013-04-23T14:05:32.427
> 
> 标签：javascript, jquery, knockout.js, mapping

我正在开发一个通过 AJAX 自动更新股票价格的股票观察网站。有了这个，我决定使用 knockout.js 来在变量更新时自动更新站点的 UI。

我的初始列表（在加载网页时）有以下示例 JSON 对象，它是从我的数据库中提取的，以确保所有公司都被拉出。对于这个例子，我有 4 家公司：

```
var companiesData = 
[
  {  
     "Date":"2013-04-19",
     "company":"AAA", 
     "close":1.68,
     "open":1.8
  },
  {  
     "Date":"2013-04-19",
     "company":"BBB", 
     "close":13.68,
     "open":12.8
  },
  {  
     "Date":"2013-04-19",
     "company":"CCC", 
     "close":21.68,
     "open":21.6
  },
  {  
     "Date":"2013-04-19",
     "company":"DDD", 
     "close":19.68,
     "open":17.8
  }
] 
```

我创建了一个 observableArray 对象并将其分配给 viewModel，如下所示：

```
var viewModel = {
    companies = ko.observableArray(companiesData)
}

ko.applyBindings(viewModel); 
```

然后我有一个 Ajax 函数，它提取更新的代码数据，其中仅包含那些已更新的公司和已更新的数据。请注意，我正在使用第三方 API 来提取更新的数据，因此我无法控制格式。假设只有 AAA 和 BBB 公司得到了更新：

```
var updatedCompaniesData = 
[
  {  
     "company":"AAA", 
     "close":1.90
  },
  {  
     "company":"BBB", 
     "close":15.08
  }
] 
```

当我用 updatedCompanies 更新 observableArray 时，整个 observableArray 被 updatedCompanies 替换，只返回 2 而不是 4，并且缺少属性。我在文档中读到

## observableArray 跟踪数组中的对象，而不是这些对象的状态

因此我了解到，由于我只需要更新具有新数据的特定公司，但需要保留尚未更新的旧公司，因此我需要将每个公司的每个属性都设为 observable。所以我为此使用了映射插件，并为我的数组分配了一个键属性。这样，KO 将只查找密钥并更新其他属性（打开、关闭、日期），而不是删除公司并重新添加更新的公司。我还使用它的 create 方法在每个数组中添加了 ko.computed 函数。

```
ko.mapping.fromJS(companiesData, {
    key: function(comp) {
        return ko.utils.unwrapObservable(comp.company);
},
create: function(comp) {
    return new Company(comp.data);
}
}, viewModel.companies); 
```

我的问题是，如何更新每家公司的属性（只是价格、开盘价、收盘价），而不是 observableArray？更新 observableArray 本身会“重新加载”公司的数量。这样做的“淘汰”方式是什么？

我找到了更新选项，但我不确定如何在这种情况下使用它，因为我的 JSON 对象中没有数组名称。

[来自 Knockout 映射插件文档](http://knockoutjs.com/documentation/plugins-mapping.html)

```
var mapping = {
'name': {
    update: function(options) {
        return options.data + 'foo!';
        }
    }
} 
```

另一个问题是，如果我不打算修改公司的数量，而只是打算更新每个公司在该数组中的属性，我是否必须使用 observableArray？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T14:21:57.127

对，放弃最后一个答案。浏览了映射插件本身的代码后，它只是不是为了更新可观察数组中的单个项目而设计的，据我所知，它将删除不在更新数据中的任何数组项目。

因此，鉴于此，您不想使用映射插件来更新数据，只需对每个循环使用一个简单的：

```
ko.utils.arrayForEach(updatedCompaniesData, function (updatedCompany) {
    var company = ko.utils.arrayFirst(viewModel.companies(), function (item) {
        return item.Name() === updatedCompany.company;
    });

    if (company) {
        company.ClosingPrice(updatedCompany.close);
    }
}); 
```

工作[jsFiddle](http://jsfiddle.net/manzanotti/w2cJ4/7/)。

# maven-2 - 如何根据 exec-maven-plugin 的结果终止我的 maven 构建？

> ID：16171482
> 
> 赞同：2
> 
> 时间：2013-04-23T14:05:51.910
> 
> 标签：maven-2

我正在使用 exec-maven-plugin 运行 Windows 批处理脚本。批处理脚本在与我的 Maven 构建不同的进程中运行。当我的批处理脚本抛出错误时，如何停止我的 Maven 构建并返回错误响应？

请在下面找到 maven exec 插件版本详细信息：

```
<groupId>org.codehaus.mojo</groupId>
<artifactId>exec-maven-plugin</artifactId>
<version>1.1.1</version> 
```

另外，我正在使用 maven 2.2.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:04:16.680

为了使 exec-maven-plugin 构建失败，您必须从您正在调用的 jar 中抛出异常。该插件不会基于非零返回码使构建失败。

# mysql - 需要有关 Mysql 触发器的帮助

> ID：16171483
> 
> 赞同：0
> 
> 时间：2013-04-23T14:05:53.893
> 
> 标签：mysql, triggers

我正在尝试编写一个 mysql 触发器来根据同一个表中其他字段的值更新一个字段。

我有一个包含 3 个复选框字段的表，即 checkbox_1、 checkbox_2、 checkbox_3 。我有另一个字段，即第 4 个字段，我需要根据 checkbox1/2/3 值中存在的值更新“status_status”字段。如果所有复选框的值都是 1，我想将字段 status_status 更新为 1。下面是我想要做的。

```
delimiter $$
create trigger emp_final_status
after update on tester.status_master
for each row
begin
if checkbox_1 = '1' and checkbox_2= '1' and checkbox_3= '1'
 then
update tester.status_master set status_status=1;
END IF;
END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:43:31.577

当引用正在更新的行的字段时，使用 OLD 引用更改前的值，使用 NEW 引用更改后的值：

```
delimiter $$
create trigger emp_final_status
BEFORE update on tester.status_master
for each row
begin
if NEW.checkbox_1 = '1' and NEW.checkbox_2= '1' and NEW.checkbox_3= '1'
 then
   set NEW.status_status=1;
END IF;
END 
```

我还将触发器从 AFTER 更改为 BEFORE。在 BEFORE 触发器中，您可以影响更新的值。

我在条件内更改了您的代码。在那里，您的原始代码是：

```
 update tester.status_master set status_status=1; 
```

这是一个`update`没有`where`子句的语句，这意味着，您正在请求表`set status_status=1`中的**所有行**！

相反，您只想更改当前正在处理的一行：

```
 set NEW.status_status=1; 
```

# delphi - ActiveX 没有引发 EOleException

> ID：16171484
> 
> 赞同：2
> 
> 时间：2013-04-23T14:05:58.513
> 
> 标签：delphi, exception, activex

我在单独的项目中在 Delphi XE2 中制作了两个 activex 组件。其中一个组件运行良好，它抛出的每个异常都被屏蔽为 EOleException。在另一个 activex 组件上，异常没有被屏蔽，它们作为它们的原始类型被抛出。客户端是一个delphi XE 程序。

当 activex 组件抛出原始异常时，该组件对任何其他方法的下一次调用会在不应发生的地方抛出访问冲突异常，例如使用值设置本地字符串变量。这是一种非常奇怪的行为。

我比较了两个项目的 .ridl 文件、编译选项、.dproj 文件，都找不到罪魁祸首。

有人知道这种差异/奇怪行为的原因吗？

谢谢

编辑：一些代码

有效的组件 1（屏蔽 EOleException 的所有异常）

```
TspdMyClassX = class(TActiveXComponent, MyInterface) 
```

...

```
initialization

TActiveXComponentFactory.Create(
    ComServer,
    TspdMyClassX,
    CLASS_spdMyClassX,
    1,
    '',
    0,
    tmBoth); 
```

其他不抛出EOleException的组件接口不同，但其余代码相同（初始化，父类TActiveXComponent）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T17:11:48.490

在我看来，问题出在 delphi XE2 生成的 .ridl / .tlb 文件上。我使用 delphi 7 重新设计了组件，然后在 delphi xe2 中打开了项目，并且只在其中编译/构建（.ridl 中没有编辑，delphi xe2 中的 TLB 没有变化）。EOleException 正确屏蔽了所有异常，问题已解决

# c# - 从其他角色更改 ServiceConfiguration.csfg

> ID：16171485
> 
> 赞同：1
> 
> 时间：2013-04-23T14:06:11.673
> 
> 标签：c#, azure, azure-configuration

我在我的天蓝色部署中有几个角色，其中一个是有点“管理员”的角色，它提供了一个 Web 界面来查看跟踪和异常日志等。

在我的角色中，我使用 dafault azure dianostic 工具。我在每个角色的 onstart 方法（sheduledtransferperiod、loglevelfilter 等）中设置了一个初始配置。我的目标是在我的 adminrole 中提供 Web 界面，以更改其他角色的这些值。为此，我将这些值移至 serviceConfiguration 文件，并且我想从其他角色更改这些值。（就像我可以使用 DeploymentDiagnosticManager 开始按需传输一样）。我怎样才能做到这一点？

我知道，有机会在天蓝色的管理门户上执行此操作，但我不想提供对此的访问权限。

谢谢你的帮助。

吨

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T14:15:26.083

您需要做的是通过调用操作[`Service Management API`](http://msdn.microsoft.com/en-us/library/windowsazure/ee460799.aspx)来获取配置数据。[`Get Deployment`](http://msdn.microsoft.com/en-us/library/windowsazure/ee460804.aspx)由于配置文件是一个 XML 文件，您可以只解析该 XML 文件并以在门户上完成的方式呈现它。您想要做的一件事是只公开与诊断相关的键/值对，而不是全部。用户更改值后，您可以重新创建配置文件并调用[`Change Deployment Configuration`](http://msdn.microsoft.com/en-us/library/windowsazure/ee460809.aspx)操作。这将更新配置文件。

# css - 为 p:panel 设置背景图像

> ID：16171487
> 
> 赞同：2
> 
> 时间：2013-04-23T14:06:15.730
> 
> 标签：css, jsf, primefaces, panel

我正在尝试使用以下代码显示带有背景图像的面板。

```
 <p:panel id="upperpanel" style="background-image: url(../img/login-bg.jpg)" > 
```

我也尝试过使用

```
 <p:panel id="upperpanel" style="background-image: url(/user/test/img/login-bg.jpg)" > 
```

在这两种情况下，我都没有显示背景图像。我也尝试使用不同的图像。没有运气。当我在面板中添加 ah:graphicImage 组件时，图像可以正确显示。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T14:14:18.703

```
style="background-image: url('../img/login-bg.jpg'); 
```

要去上班了。也`!important`没有必要提供 style 属性的内部，因为您在其中定义的任何 css 规则`style`已经覆盖了其他具有相同名称的 css 属性。在文件`!important`中使用时会很有用。`.css`

# openxml - OpenXML - 到 Word 文档的 Infopath RichText 框给出格式错误

> ID：16171488
> 
> 赞同：0
> 
> 时间：2013-04-23T14:06:17.137
> 
> 标签：openxml, infopath

我已经在 InfoPath 表单中设置了富文本框，我的程序通过 Infopath XML 解析如下：

```
XPathNavigator formNameNode = root.SelectSingleNode("/my:myFields/my:Responses/my:Q1", nsMgr);
string response1 = formNameNode.InnerXml; 
```

然后使用以下代码打开一个 word 文档并获取一个名为 response1 的纯文本内容控件：

```
 using (WordprocessingDocument myDoc =
WordprocessingDocument.Open(ms, true))
    {
        MainDocumentPart mainPart = myDoc.MainDocumentPart;

    List<OpenXmlElement> sdtList = InfoPathToWord.GetContentControl(mainPart.Document, "response1");
            InfoPathToWord.AddRichText(0, response1, ref mainPart, ref sdtList);
} 
```

然后代码调用 InfoPathToWord.AddRichText 如下：

```
public static void AddRichText(int id, string rtfValue,
          ref MainDocumentPart mainPart, ref List<OpenXmlElement> sdtList)
        {
            if (sdtList.Count != 0)
            {
                id++;
                string altChunkId = "AltChunkId" + id;
                AlternativeFormatImportPart chunk =
                  mainPart.AddAlternativeFormatImportPart(
                  AlternativeFormatImportPartType.Xhtml, altChunkId);

                using (MemoryStream ms = new MemoryStream(System.Text.Encoding.Default.GetBytes(rtfValue)))
                {
                    chunk.FeedData(ms);
                    ms.Close();
                }

                AltChunk altChunk = new AltChunk();
                altChunk.Id = altChunkId;

                InfoPathToWord.ReplaceContentControl(sdtList, altChunk);
            }
        } 
```

最后 altChunk 替换了“response1”

```
 public static void ReplaceContentControl(
      List<OpenXmlElement> sdtList, OpenXmlElement element)
    {
        if (sdtList.Count != 0)
        {
            foreach (OpenXmlElement sdt in sdtList)
            {
                OpenXmlElement parent = sdt.Parent;
                parent.InsertAfter(element, sdt);
                sdt.Remove();
            }
        }
    } 
```

问题是它替换了文本，但格式不正确并显示“？” 输出文本中的字符。不确定它是否是由于编码引起的，我也尝试过`System.Text.Encoding.UTF8.GetBytes(rtfValue), System.Text.Encoding.ASCII.GetBytes(rtfValue)`，但这似乎没有帮助。

请有人告诉我我做错了什么。

提前致谢。

马夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-11T16:49:06.497

我正在使用正则表达式在保存之前清理字符串。

html = Regex.Replace(html, "/[\x00-\x08\x0B\x0C\x0E-\x1F\x80-\x9F]/u", "") ' 允许制表符和其他可打印字符

Dim ms As New MemoryStream(System.Text.Encoding.UTF8.GetBytes(html)) ' 创建替代格式导入部分。将 formatImportPart 调暗为 AlternativeFormatImportPart = mainDocPart.AddAlternativeFormatImportPart("application/xhtml+xml", altChunkId)

[正则表达式从字符串中删除所有特殊字符？](https://stackoverflow.com/questions/3303420/regex-to-remove-all-special-characters-from-string/19911392#19911392)

更新...经过严格测试后，我在 docx 中发现 InfoPath RTF 存在太多字符编码问题。

# jquery - jQuery向下滑动div - 超过它时消失

> ID：16171490
> 
> 赞同：1
> 
> 时间：2013-04-23T14:06:23.097
> 
> 标签：jquery

我做了一个下拉菜单，其中包含下拉菜单中的选项。

我正在使用以下 jQuery

```
$(document).ready(function() {
    $(".menu_item").hover(function() {
        $(".menu_options").slideDown(400);
    }, function() {
        $(".menu_options").slideUp(400);
    });
}); 
```

我遇到的问题是，当它向下滑动并且我继续向下滑动的 div 时它消失了 - 这是设置的屏幕截图

![截屏](https://i.stack.imgur.com/6COkp.png)

该区域的 HTML 是

```
<div class="menu">
            <div class="menu_item" id="1">
                Landlord Packages
            </div>
            <div class="spacer"></div>
            <div class="menu_item">
                Single Items
            </div>
            <div class="menu_options" id="1"></div>
        </div> 
```

预先感谢您的帮助 ：-）

JSFiddle 脚本[http://jsfiddle.net/pCTXq/](http://jsfiddle.net/pCTXq/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T14:11:32.943

尝试

```
$(document).ready(function() {
    $(".menu_item, .menu_options").hover(function() {
        $(".menu_options").stop(true, true).slideDown(400);
    }, function() {
        $(".menu_options").stop(true, true).delay(10).slideUp(400);
    });
}); 
```

这应该做你需要的。

我的小提琴：http: [//jsfiddle.net/MCvsd/54/](http://jsfiddle.net/MCvsd/54/)

编辑：您提供的小提琴，更新：http: [//jsfiddle.net/pCTXq/1/](http://jsfiddle.net/pCTXq/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T14:16:13.833

嵌套是一种方式，但如果您仍然不想使用嵌套，您可以执行以下操作

```
$(document).ready(function() {
    $(".menu_item").hover(function() {
        $(".menu_options").slideDown(400);
    });
    $(".menu_options").mouseleave(function () {
        $(".menu_options").slideUp(400);
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T14:11:12.217

这里的问题是您正在观看悬停以向下`.menu_item`滑动`.menu_options`，但由于`.menu_options`在 之外`.menu_item`，将鼠标移动到`.menu_options`将隐藏它。

你可以通过`.menu_options`在每个`.menu_item`div 中嵌套你的来解决这个问题。最好有一个 JSfiddle 或 codepen（使用你的 css）来解决这个问题。

```
<div class="menu">

  <div class="menu_item" id="1">
      Landlord Packages
  </div>

  <div class="spacer"></div>

  <div class="menu_item">
      Single Items
     <div class="menu_options" id="1"></div>
  </div>
</div> 
```

# python - IIS 中的 Tastypie 返回 HTML 而不是 JSON

> ID：16171503
> 
> 赞同：1
> 
> 时间：2013-04-23T14:06:51.813
> 
> 标签：python, ajax, django, iis, tastypie

当向 Tastypie (Django) 发出 POST 以将新的“项目”对象添加到我的数据库时，以下代码在 IIS 之外以调试模式正常工作。

```
$.ajax({
    url: "http://webserver.com/api/v1/project/",
    type: "POST",
    data: jsonProject
    ...
    success: do something with the response object 
```

注意：我在 Tastypie 中使用“always_return_data = True”将新创建的对象返回给客户端。

但是，当我将相同的代码发布到 IIS 并运行应用程序时，Tastypie 返回以下 HTML，并在末尾附加了 JSON 对象。有没有人对为什么会发生这种情况有任何理论，更重要的是，如何防止 IIS 预先添加这个 HTML？

```
"<head><title>Document Moved</title></head><body><h1>Object Moved</h1>This document may be found <a HREF="http://localhost/api/v1/project/14/">here</a></body>{"id": 14, "name": "New Project", "resource_uri": "/api/v1/project/14/", "slug": "new-project", "start_date": null, "status": 0}" 
```

我可以通过拆分标签上的响应来解决问题，但至少可以说这不是一个非常优雅的黑客攻击。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T16:09:57.797

每次您创建新资源时， Tastypie 都会返回一个`Location`标头，指向它（这是`http://localhost/api/v1/project/14/`您在响应中看到的 url）。

我不确定您是如何在 IIS 上运行 django，但我怀疑您的问题可能与此处描述的问题不同： [W7 Pro IIS 7.5 overwrites PHP Location: Header (solved)](https://stackoverflow.com/questions/12074730/w7-pro-iis-7-5-overwrites-php-location-header-solved)

# tfs - TFS 搁置是与存储库版本相关的差异，还是它们是搁置的整个文件？

> ID：16171506
> 
> 赞同：1
> 
> 时间：2013-04-23T14:06:58.390
> 
> 标签：tfs, shelve

架子上的整个文件是否`TFS`都已更改，或者架子与特定版本的存储库相比是否有差异？如果它是第一个，那么它可以随时应用于任何版本。如果是第二个，它只能应用于特定版本的 repo。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T15:38:33.390

我不确定您的问题到底是什么，因为它们的内部表示应该是实现细节。但它们是完整的文件，存储为针对它们修改的版本的更改。

从 TFS 2012 开始，可以在 unshelve 上执行 3 路合并，使用搁置更改的未修改版本作为共同祖先。

# c++ - std::shared_ptr 和 boost::shared_ptr 区别

> ID：16171510
> 
> 赞同：0
> 
> 时间：2013-04-23T14:07:09.377
> 
> 标签：c++, boost, c++11, shared-ptr

我有以下代码：

```
// interface.h
#ifndef INTERFACE_H
#define INTERFACE_H    

#include <memory>    
class IInterface {
public:
    virtual ~IInterface() = 0;
    virtual void doSomething() = 0;
};
inline IInterface::~IInterface() {}

typedef std::shared_ptr< IInterface > IIntPtr;    
IIntPtr makeInterface();    
#endif // INTERFACE_H

// impl.cpp
#include "interface.h"

class Interface : public IInterface { public:
    Interface() {}
    ~Interface() {}
    void doSomething() {} };

IIntPtr makeInterface() { return IIntPtr( new Interface() ); }

// main.cpp
#include "interface.h"
using namespace std;

int main()
{
    auto p = makeInterface();
    p->doSomething();
} 
```

现在：如果我使用`typedef std::shared_ptr< IInterface > IIntPtr;`一切都很好，但如果我使用`typedef boost::shared_ptr< IInterface > IIntPtr;`我有一些编译器错误：

*   编译器错误 C2027：类型在定义之前不能使用。要解决该错误，请确保在引用之前完全定义类型。
*   编译器错误 C2079：“标识符”使用未定义的类/结构/联合“名称”
*   编译器错误 C2440：编译器无法从“type1”转换为“type2”。

我正在使用 msvc10，但代码必须使用 msvc9.0 编译，所以我必须使用 Boos.SmartPtr

我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-30T22:42:26.703

OP 在评论中回答了他自己的问题：他`#include <boost/shared_ptr.hpp>`在尝试 Boost 版本时忘记了。

# android - Android：打开和关闭 SQLite 数据库

> ID：16171512
> 
> 赞同：3
> 
> 时间：2013-04-23T14:07:10.100
> 
> 标签：android, database, sqlite, android-sqlite

我正在开发和经常使用访问本地数据库的 android 应用程序。这个数据库可以从不同的therads访问，所以我对数据库有一个协调问题。我使用以下`open()`和`close()`方法。

```
public void open(){ 
    mDb=mDbHelper.getWritableDatabase();
}

public void close(){
        mDb.close();
} 
```

所以，通常，当我需要访问数据库进行一些操作时，我打开数据库，然后执行一些操作，最后关闭数据库。我通常用于此目的的代码如下：

```
 try {
        dbManager.open();
                    // database operation
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }finally{
        try {
            dbManager.close();
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    } 
```

但是，如果这段代码是从不同的线程（假设线程 A 和线程 B）中使用的，则可能会出现以下情况：

```
A thread: performs open()
B thread: perfroms open()
A thread: perfroms some operation
A thread: performs close()
B thread: try to perform some operation but it fails! 
```

因此，我能猜到我`open()`在应用程序启动和`close()`应用程序停止时执行的唯一解决方案。我不确定这是否是一个好的解决方案？

实际上，`getWritableDatabase()`方法的文档（从 my 调用`open()`）说：

```
Make sure to call close() when you no longer need the database 
```

那么，任何人都可以建议我一个替代解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T15:12:44.277

您可以使用单例实例，通常您可以不关闭数据库（但保持事务关闭）。有一些资料：

[Android SQLite DB 何时关闭](https://stackoverflow.com/questions/4557154/android-sqlite-db-when-to-close)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T14:25:02.440

创建一个包装类，添加一个原子整数成员，每次打开数据库时增加成员，关闭它时减少成员，如果成员为零，则实际关闭数据库。

# c# - Windows 窗体应用程序中的 SQLException

> ID：16171514
> 
> 赞同：1
> 
> 时间：2013-04-23T14:07:15.223
> 
> 标签：c#, winforms, sqlexception

首先，请允许我向 StackOverFlow 的每一个人和所有用户转达我的问候和尊重。你们在帮助像我们这样的人方面做得很好。谢谢你。

现在我的问题是：我正在构建一个 winforms 应用程序，用于学习目的，它：1）连接到数据库并根据查询检索结果。2) 查询由以下任一方式生成： * 用户单击应用程序的各种控件或 * 用户自己编写查询然后执行它。3) 结果显示在结果框中。

我得到一个 SQLException "Incorrect syntax near'," 生成的语法是正确的，因为：1) 我复制了生成的查询并在 SQL Management Studio 中执行了它。它在那里完美地执行。2）我尝试手动编写查询然后执行它，但它仍然抛出相同的执行。

请注意，在应用程序开发的第一阶段，它只有三个控件，一个 DataGridView 控件、一个 TextBox 控件和一个 Button 控件。在那个阶段，我成功地生成了结果并展示了它们。在我添加了额外的功能后，应用程序停止了工作。我不明白为什么。我使用的是我在开发的第一阶段使用的相同代码，实际上它是相同的应用程序。因此，我使用前面提到的三个基本控件创建了另一个应用程序，并复制了主要应用程序生成的查询，然后在第二个应用程序中执行它。它在那里工作。

在当前阶段，如果我使用生成的查询或者我自己编写查询然后执行它，应用程序会抛出相同的执行。这是我的代码。当用户单击“执行”按钮时，将调用 LoadData 方法。

```
try
{

    string ConnectString = "Data Source=(local); Initial Catalog=AdventureWorks2008;User ID=; Password=;Integrated Security=SSPI";
    ConnectionObj.ConnectionString = ConnectString;//ConnectionObj is SQLConnection object defined in the same class as Loaddata()
    ConnectionObj.Open();
    ColumnNames = string.Empty;//ColumnNames is a String type defined in the same class as Loaddata()

    foreach (string Name in ColumnNamesCheckedListBox.CheckedItems)//ColumnNamesCheckedListBox is a CheckedListBox control which lets user select ColumnNames from the corresponding table
    {
        ColumnNames = ColumnNames + Name + ", ";
    }
    int Length = ColumnNames.Length;
    Length = Length - 2;//To remove the extra "," and "<space>" at the end of ColumnNames
    string TempQuery = ColumnNames.Remove(length);

    //User may use the query formed by the application or she may write her own query, hence using "string PossibleQuery"
    //SelectQueryDropDownList is a ComboBox control holding the items "Select" "Update" "Insert" and "Delete". Used to generate the DML clause in the query
    //Database_TreeView is a TreeView control that holds all the table names in the database. This is used to generate the "FROM" clause in the query
    //QueryBox is a TextBox control that displays the generated query and if required lets the user write her own query manually

    string PossibleQuery = SelectQueryDropDownList.SelectedItem.ToString() + TempQuery + " From " + Database_TreeView.SelectedNode.Name.ToString();
    QueryBox.TempQuery = PossibleQuery;
    string FinalQuery = QueryBox.Text; //incase the user modified the query at QueryBox manually

    SqlDataAdapter DA = new SqlDataAdapter(FinalQuery, ConnectString);
    SqlCommandBuilder CommandBuilder = new SqlCommandBuilder(DA);
    DataTable Table = new System.Data.DataTable();

    //EXCEPTION OCCURS AT THIS STATEMENT
    DA.Fill(Table);

    BindingSource Source = new BindingSource();
    Source.DataSource = Table;
    ResultBox.DataSource = Source;//ResultBox is a DataGridView control to display the results of the the query after execution (if any)
}
catch (Exception e)
{
MessageBox.Show(e.Message+"\nPlease try again","Error",MessageBoxButtons.OK);
}
finally
{
ConnectionObj.Close();
} 
```

这是屏幕截图：这是我的应用程序生成的查询。 [http://i60.photobucket.com/albums/h31/spiderclaws/Stack%20Over%20Flow/1ScreenShot2013-04-23at54453PM.png](http://i60.photobucket.com/albums/h31/spiderclaws/Stack%20Over%20Flow/1ScreenShot2013-04-23at54453PM.png)

这显示了生成的异常。 [http://i60.photobucket.com/albums/h31/spiderclaws/Stack%20Over%20Flow/2ScreenShot2013-04-23at54550PM.png](http://i60.photobucket.com/albums/h31/spiderclaws/Stack%20Over%20Flow/2ScreenShot2013-04-23at54550PM.png)

请帮帮我。谢谢。问候， Gogol Prasad (Spiderclaws@gmail.com) PS-请原谅我写了这么长的帖子。我想让每个人都清楚。

[编辑]这是所要求的信息：请注意，我正在根据屏幕截图查询 Person.BusinessEntityContact ......

```
FinalQuery=Select BusinessEntityID, PersonID, ContactTypeID From Person.BusinessEntityContact

StackTrace info:
at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning()
   at System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at System.Data.SqlClient.SqlDataReader.ConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, DbAsyncResult result)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.System.Data.IDbCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.Common.DbDataAdapter.FillInternal(DataSet dataset, DataTable[] datatables, Int32 startRecord, Int32 maxRecords, String srcTable, IDbCommand command, CommandBehavior behavior)
   at System.Data.Common.DbDataAdapter.Fill(DataTable[] dataTables, Int32 startRecord, Int32 maxRecords, IDbCommand command, CommandBehavior behavior)
   at System.Data.Common.DbDataAdapter.Fill(DataTable dataTable)
   at ADOBasicsWinFormsApp.Form1.loaddata() in C:\Users\Gogol\Documents\Visual Studio 2010\Projects\ADOBasicsConsoleApp\ADOBasicsWinFormsApp\Form1.cs:line 684 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T14:24:31.787

Looking at your image seems that a space is missing between SELECT and the first field

So add a space between the SelectedItem and TempQuery

```
 string PossibleQuery = SelectQueryDropDownList.SelectedItem.ToString() + " " +
                        TempQuery + " From " + Database_TreeView.SelectedNode.Name.ToString(); 
```

(I assume that SelectQueryDropDownList contains the word SELECT)

Apart from that I would suggest to use a StringBuilder to construct your column names

```
StringBuilder cols = new StringBuilder()
// A check here is required to avoid empty selections
foreach (string Name in ColumnNamesCheckedListBox.CheckedItems)
   cols.Append(Name + ",");
if(cols.Length > 0) cols.Length -= 2;
string TempQuery = cols.ToString(); 
```

Also the SqlConnection object created at the start of the method is not passed in to your DataAdapter and never used elsewhere, the SqlDataAdapter receive your connectionstring and so it manages the connection itself, meaning it opens the connection and it closes the connection. So you could remove it.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T14:14:12.830

这里是

```
int length = ColumnNames.Length;
length = length - 2;
string TempQuery = ColumnNames.Remove(length); 
```

将局部`Length`变量更改为小写`l`。

或者您可以重写它以摆脱局部变量：

```
string TempQuery = ColumnNames.Remove(ColumnNames.Length - 2); 
```

# jquery - 页面刷新后重新加载最后一个活动选项卡（引导程序）

> ID：16171515
> 
> 赞同：2
> 
> 时间：2013-04-23T14:07:19.780
> 
> 标签：jquery, asp.net-mvc, twitter-bootstrap, tabs

我正在构建一个 MVC 应用程序，在我看来，我使用引导选项卡。现在，我想要的是在刷新页面或从控制器重定向到它之后重新加载最后一个活动选项卡。关于如何以最简单的方式做到这一点的任何帮助？这是我的代码：

```
<div id="tabs">
    <ul class="nav nav-tabs">
        <li class="active">
            <a href="#Stages" data-toggle="tab">Stages</a>
        </li>
        <li>
            <a href="#Activities" data-toggle="tab">Activities</a>
        </li>
        <li>
            <a href="#History" data-toggle="tab">History</a>
        </li>       
    </ul>

    <div class="tab-content">
        <div class="tab-pane active" id="Stages">                
            @Html.Partial("_Stages", Model.stages)
        </div>
        <div class="tab-pane" id="Activities">
            @Html.Partial("_Activities", Model.activities)
        </div>
        <div class="tab-pane" id="History">
            @Html.Partial("_History", Model.history)
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:04:23.153

1.  尝试`location.href.hash`在客户端检查并相应地操作选项卡选择。

2.  否则，您将不得不使用一些导航/历史客户端库，例如`nav.js`或`sammy.js`. 这可以使用哈希路径在浏览器历史堆栈中注册选项卡点击。使用 URL 哈希，您可以操作选项卡选择

3.  可以参考[Sammy 实现](https://stackoverflow.com/questions/16192788/how-to-retain-an-injected-partial-view-after-page-refresh-in-asp-net-mvc/16193175#16193175)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-19T22:22:24.187

**[TwitterBootstrapMVC](https://www.twitterbootstrapmvc.com/)**允许通过扩展方法传递活动选项卡编号：

```
using (var tabs = Html.Bootstrap().Begin(new Tabs("TabsId").ActiveTab(2)))
{
    @tabs.Tab("Tab 1")
    @tabs.Tab("Tab 2")
    @tabs.Tab("Tab 3")

    using (tabs.BeginPanel())
    {
        <p>Contents of tab 1</p>
    }
    using (tabs.BeginPanel())
    {
        <p>Contents of tab 2</p>
    }
    using (tabs.BeginPanel())
    {
        <p>Contents of tab 3</p>
    }
} 
```

因此，如果您的模型中有关于您想要使用的选项卡的信息，您可以使用它。

# xml - 如何将 xml root 拆分为两个分支-第一个分支中只有一个特定子级，第二个分支中只有一个特定子级

> ID：16171517
> 
> 赞同：0
> 
> 时间：2013-04-23T14:07:26.447
> 
> 标签：xml, xslt, transform, transformation

这个问题和我之前的一样。这次我有一个文件：

```
<config width="100" height="200">
    <parameter name="account number" country="UK">
        12345678901234567890123456
    </parameter>
    <parameter name="client code" codeType="xa">
        UK0112
    </parameter>
    <parameter name="email-address" accepts="yes">
        john.sparrow@rex.co.uk
    </parameter>
    <parameter name="postal-code" country="UK">
        W1A 1HQ
    </parameter>
    <parameter name="additional parameters" mode="on">
        <parameter name="preferences" type="internal">
            Not applicable
        </parameter>
        <parameter name="issues" type="internal">
            None
        </parameter>
        <parameter name="complaints" type="internal">
            None
        </parameter>
        <parameter name="approbation" type="external">
            X11
        </parameter>
    </parameter>
</config> 
```

这次我想解开一个名为“问题”的任意孩子并将其放入单独的分支中，就像这样

```
<configs>
    <config width="100" height="200">
        <parameter name="account number" country="UK">
            12345678901234567890123456
        </parameter>
        <parameter name="client code" codeType="xa">
            UK0112
        </parameter>
        <parameter name="email-address" accepts="yes">
            john.sparrow@rex.co.uk
        </parameter>
        <parameter name="postal-code" country="UK">
            W1A 1HQ
        </parameter>
        <parameter name="additional parameters" mode="on">
            <parameter name="preferences" type="internal">
                Not applicable
            </parameter>
            <parameter name="complaints" type="internal">
                None
            </parameter>
            <parameter name="approbation" type="external">
                X11
            </parameter>
        </parameter>
    </config>
    <config width="100" height="200">
        <parameter name="issues" type="internal">
                None
        </parameter>
    </config>
<configs> 
```

子项及其父项的选择是硬编码的（参数/参数）并基于属性名称（问题）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:17:47.257

这是一种方法。

**当这个 XSLT：**

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output omit-xml-declaration="yes" indent="yes"/>
  <xsl:strip-space elements="*"/>

  <xsl:template match="@*|node()">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="/*">
    <configs>
      <xsl:copy>
        <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
      <config width="{@width}" height="{@height}">
        <xsl:apply-templates select="*/parameter[@name = 'issues']"/>
      </config>
    </configs>
  </xsl:template>

  <xsl:template match="parameter[@name = 'additional parameters']">
    <xsl:copy>
      <xsl:apply-templates
        select="@*|node()[not(self::parameter[@name = 'issues'])]"/>
    </xsl:copy>
  </xsl:template>
</xsl:stylesheet> 
```

**...针对提供的 XML 应用：**

```
<config width="100" height="200">
  <parameter name="account number" country="UK">
        12345678901234567890123456
    </parameter>
  <parameter name="client code" codeType="xa">
        UK0112
    </parameter>
  <parameter name="email-address" accepts="yes">
        john.sparrow@rex.co.uk
    </parameter>
  <parameter name="postal-code" country="UK">
        W1A 1HQ
    </parameter>
  <parameter name="additional parameters" mode="on">
    <parameter name="preferences" type="internal">
            Not applicable
        </parameter>
    <parameter name="issues" type="internal">
            None
        </parameter>
    <parameter name="complaints" type="internal">
            None
        </parameter>
    <parameter name="approbation" type="external">
            X11
        </parameter>
  </parameter>
</config> 
```

**...产生了想要的结果：**

```
<configs>
  <config width="100" height="200">
    <parameter name="account number" country="UK">
        12345678901234567890123456
    </parameter>
    <parameter name="client code" codeType="xa">
        UK0112
    </parameter>
    <parameter name="email-address" accepts="yes">
        john.sparrow@rex.co.uk
    </parameter>
    <parameter name="postal-code" country="UK">
        W1A 1HQ
    </parameter>
    <parameter name="additional parameters" mode="on">
      <parameter name="preferences" type="internal">
            Not applicable
        </parameter>
      <parameter name="complaints" type="internal">
            None
        </parameter>
      <parameter name="approbation" type="external">
            X11
        </parameter>
    </parameter>
  </config>
  <config width="100" height="200">
    <parameter name="issues" type="internal">
            None
        </parameter>
  </config>
</configs> 
```

* * *

**编辑：OP 建议新创建`<config>`的包含元素`<parameter name="issues" type="internal">`应该复制原始元素的*所有属性。*`<config>`**

在这种情况下，应该简单地改变：

```
<config width="{@width}" height="{@height}">
  <xsl:apply-templates select="*/parameter[@name = 'issues']"/>
</config> 
```

...到：

```
<config>
  <xsl:apply-templates select="@*|*/parameter[@name = 'issues']"/>
</config> 
```

...这意味着整个新解决方案将是：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output omit-xml-declaration="yes" indent="yes"/>
  <xsl:strip-space elements="*"/>

  <xsl:template match="@*|node()">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="/*">
    <configs>
      <xsl:copy>
        <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
      <config>
        <xsl:apply-templates select="@*|*/parameter[@name = 'issues']"/>
      </config>
    </configs>
  </xsl:template>

  <xsl:template match="parameter[@name = 'additional parameters']">
    <xsl:copy>
      <xsl:apply-templates
        select="@*|node()[not(self::parameter[@name = 'issues'])]"/>
    </xsl:copy>
  </xsl:template>
</xsl:stylesheet> 
```

# python - 如何让 minepy.MINE 跑得更快？

> ID：16171519
> 
> 赞同：0
> 
> 时间：2013-04-23T14:07:30.260
> 
> 标签：python, python-2.7

我有一个 2500*2500 的数值矩阵。为了计算每对向量的 MIC（最大信息系数），我使用 minepy.MINE，但这需要很长时间，我可以让它更快吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T15:16:03.413

首先，使用最新版本的 minepy。其次，您可以使用较小的“alpha”参数值，例如 0.5 或 0.45。这样，尽管具有特征矩阵精度，您仍将减少计算时间。

戴维德

# c - 从 C 源代码调用汇编例程

> ID：16171522
> 
> 赞同：3
> 
> 时间：2013-04-23T14:07:40.930
> 
> 标签：c, linux, assembly, nasm, linker-errors

我有这个简单的 C 源代码：

```
#include <stdio.h>

extern int Sum(int,int);

int main()
{
  int a,b,s;
  a=1 , b=2;
  s = Sum(a,b);
  return 0;
} 
```

我有这个定义函数 _Sum 的 s.asm ：

```
global _Sum

     _Sum:

        push    ebp             ; create stack frame
        mov     ebp, esp
        mov     eax, [ebp+8]    ; grab the first argument
        mov     ecx, [ebp+12]   ; grab the second argument
        add     eax, ecx        ; sum the arguments
        pop     ebp             ; restore the base pointer
        ret 
```

现在，我使用以下方法编译了 .asm：

```
nasm s.asm -f elf -o s.o 
```

并使用以下方法编译和链接 .c 文件：

```
gcc s.o test.o -o testapp 
```

这是结果：

```
/tmp/ccpwYHDQ.o: In function `main':
test.c:(.text+0x29): undefined reference to `Sum'
collect2: ld returned 1 exit status 
```

那么问题是什么？

我正在使用 Ubuntu-Linux

任何帮助将不胜感激，谢谢

[已解决]：我用 nm 检查了 test.o 文件，它预计会找到符号“Sum”而不是“_Sum”，因此更改解决了问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T14:14:18.157

在典型的汇编器中，标签默认是本地的。要告诉汇编器使它们对外部例程可见，您必须添加一个声明，例如：

```
.globl _Sum 
```

此外，在 C 中正确声明例程。这不是链接错误的原因，但可能导致其他问题：

```
extern int Sum(int, int); 
```

为了完整起见，感谢评论者：不要覆盖您的目标文件。您可以组装、编译和链接：

```
nasm s.asm -f elf -o s.o
gcc test.c s.o -o test 
```

（这会将可执行文件命名为“test”，您可能必须使用“./test”执行它，以区分目录中的“test”和“test”命令。选择另一个名称可能会更开心。）

出于教育目的：如果您`nm`的系统上有该工具，请执行命令`nm s.o`。它可能会向您显示以下内容：

```
00000000 t _Sum 
```

`t`表示代码部分中的`_Sum`本地标签。（代码部分也称为文本部分，因此是 t。）添加`.globl`声明并组装新源代码后，应改为`nm s.o`显示大写字母。`T`大写表示标签在外部可见。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-23T14:28:58.023

据我从您的问题中可以看出，您`s.o`用 C 程序覆盖了来自汇编程序的目标文件。所以你不再有汇编程序了。

你可能应该写

生成`s.o`目标文件

```
 nasm s.asm -f elf -o s.o 
```

生成`test.o`（您的命令创建了另一个）

```
 gcc test.c -c 
```

链接应用程序

```
 gcc s.o test.o -o testapp 
```

（我选择 testapp 作为输出二进制文件，因为`test`它通常是一个非常糟糕的程序名称，它与 Unix 命令冲突`test`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T14:52:42.103

最好在 c 文件中声明 asm inline。这是我自己的代码中的一个示例：

```
bool KxMutex::tryLock_i()
{
#ifdef KX_MUTEX_ASM
   int oldLock;
#if defined(__GNUC__) && (defined(__i386__) || defined(__x86_64__))
   asm volatile (
     "movl $1,%%eax\n\t"
     "xchg %%eax,%0\n\t"
     "movl %%eax,%1\n\t"
     : "=m" (mLock), "=m" (oldLock)
     :
     : "%eax", "memory"
   );
#elif defined(__GNUC__) && (defined(__ppc__))
   int newLock = 1;
   asm volatile (
     "\n1:\n\t"
     "lwarx  %0,0,%1\n\t"
     "cmpwi  0,%0,0\n\t"
     "bne-   2f\n\t"
     "stwcx. %2,0,%1\n\t"
     "bne-   1b\n\t"
     "isync\n"
     "2:\n\t"
     : "=&r" (oldLock)
     : "r" (&mLock), "r" (newLock)
     : "cr0", "memory"
  );
#endif
   return ( oldLock == 0 );
#else // !KX_MUTEX_ASM
   return ( pthread_mutex_trylock( (pthread_mutex_t*)this ) ? false : true );
#endif // !KX_MUTEX_ASM
} 
```

有很多优点：

1.  您不必自己管理堆栈帧、返回值等。
2.  编译器可以在必要时内联函数，因为它控制调用约定
3.  您可以直接在 .asm 代码中引用 c 语言符号
4.  使用相同的 c 宏和定义控制不同平台的不同版本的 ASM 更容易。
5.  所有 c 和 c++ 函数修饰符都有效 - extern、static、inline 等。
6.  编译器仍然可以对你的函数参数进行类型检查，检查函数是否被正确调用等。
7.  您可以根据需要使用 const 保护您的变量。

# c++ - U++ 和“TheIDE”致命错误：7CtrlLib/CtrlLib.h: No such file or directory

> ID：16171524
> 
> 赞同：0
> 
> 时间：2013-04-23T14:07:50.167
> 
> 标签：c++, testing, user-interface, compilation

尝试在 U++ 中编译测试示例但编译失败，显示此错误：

```
----- helloworld（MAIN GCC DEBUG SHARED DEBUG_FULL BLITZ LINUX POSIX）main.cpp /home/testbed/upp/uppsrc/helloworld/main.cpp:1:30：致命
错误：7CtrlLib/CtrlLib.h：没有这样的文件或目录编译
终止。helloworld: 1 个内置文件 (0:00.34), 342 毫秒 /
文件，持续时间 = 345 毫秒

有错误。(0:00.36)

```

做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:11:33.213

编译器似乎找不到该文件`7CtrlLib/CtrlLib.h`。您是否错过了包含文件夹中的此文件？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T15:55:15.177

> `main.cpp:1:30: fatal error: 7CtrlLib/CtrlLib.h: No such file or directory`

这似乎在 main.cpp 第一行的#include 中的代码中有错字。'7' 不应该在那里。如果没有这样的输入错误，请从编译中发布完整的详细输出（检查 Setup -> Be Verbose && 再次编译）。

# python - 使用 Python 删除文本文件中以特定字符开头的行

> ID：16171527
> 
> 赞同：2
> 
> 时间：2013-04-23T14:07:55.847
> 
> 标签：python

我有一个烦人的输出文件，如下所示：

```
*** Warning: OpenMpAssembler::assemble_interior_facets is untested.
*** Warning: Form::coloring does not properly consider form type.
Coloring mesh.
*** Warning: Form::coloring does not properly consider form type.
Coloring mesh.
*** Warning: Form::coloring does not properly consider form type.
Solving linear system of size 108360 x 108360 (PETSc Krylov solver).
Solving linear system of size 36120 x 36120 (PETSc Krylov solver).
*** Warning: Form::coloring does not properly consider form type.
*** Warning: Form::coloring does not properly consider form type.
*** Warning: Form::coloring does not properly consider form type.
*** Warning: Form::coloring does not properly consider form type.
   0/240 +0.000000e+00 -1.146247e-08 +0.000000e+00 +1.913417e-03 +0.000000e+00     +0.000000e+00
*** Warning: OpenMpAssembler::assemble_interior_facets is untested.
*** Warning: Form::coloring does not properly consider form type.
*** Warning: Form::coloring does not properly consider form type.
Solving linear system of size 108360 x 108360 (PETSc Krylov solver).
Solving linear system of size 36120 x 36120 (PETSc Krylov solver).
*** Warning: Form::coloring does not properly consider form type.
*** Warning: Form::coloring does not properly consider form type.
*** Warning: Form::coloring does not properly consider form type.
*** Warning: Form::coloring does not properly consider form type.
   1/240 +5.000000e-05 -2.024630e-08 -3.666293e-08 +1.913417e-03 +1.073840e-10    +3.479053e-21
*** Warning: OpenMpAssembler::assemble_interior_facets is untested.
*** Warning: Form::coloring does not properly consider form type.
*** Warning: Form::coloring does not properly consider form type.
Solving linear system of size 108360 x 108360 (PETSc Krylov solver).
Solving linear system of size 36120 x 36120 (PETSc Krylov solver).
*** Warning: Form::coloring does not properly consider form type.
*** Warning: Form::coloring does not properly consider form type.
*** Warning: Form::coloring does not properly consider form type.
*** Warning: Form::coloring does not properly consider form type.
   2/240 +1.000000e-04 -3.529024e-08 -3.825476e-08 +1.913417e-03 +1.077877e-10 +2.308941e-20 
```

清单还在继续，我只是想提取

```
0/240 +0.000000e+00 -1.146247e-08 +0.000000e+00 +1.913417e-03 +0.000000e+00 +0.000000e+00
1/240 +5.000000e-05 -2.024630e-08 -3.666293e-08 +1.913417e-03 +1.073840e-10 +3.479053e-21
2/240 +1.000000e-04 -3.529024e-08 -3.825476e-08 +1.913417e-03 +1.077877e-10 +2.308941e-20 
```

我如何在 Python 中做到这一点？基本上我想忽略以***、着色和求解开头的行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T14:16:27.593

```
f=open('annoying.txt','r')
input_stream=f.read()
output_stream=""
input_stream_lines=input_stream.split("\n")
for line in input_stream_lines:
    if "***" in line or "Solving" in line or "Coloring" in line:
            pass
    else:
            output_stream=output_stream+line+"\n"
g=open('output.txt','w')
g.write(output_stream) 
```

假设您的文本在一个名为烦恼.txt 的文件中，并在文件 output.txt 中输出（过滤结果）

**编辑**

if 条件可以更改为：

```
if line.startswith("***") or line.startswith("Solving") or line.startswith("Coloring"): 
```

**编辑2**

如果换行符是分隔符，你也可以这样做

```
input_stream_lines=f.readlines() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T14:14:58.233

该[`startswith`](http://docs.python.org/2/library/stdtypes.html#str.startswith)方法可以帮助您：

> *海峡*_ **startswith** ( *prefix* [, *start* [, *end* ]])
> 如果字符串以前缀开头，则返回 True，否则返回 False。prefix 也可以是要查找的前缀元组。使用可选开始，测试从该位置开始的字符串。使用可选结束，停止在该位置比较字符串。

下面是一个示例代码，它显示了一个循环遍历文本文件的行，只打印那些不以“ `***`”和“ `Solving`”开头的行：

```
for l in open("myfile.txt").readlines():
  if not l.startswith("***") and not l.startswith("Solving"): print(l) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T14:21:30.790

```
with open("input.txt") as f:
    for line in f:
        if not (line.startswith("***") or line.startswith("Solving")):
            print line 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T14:23:02.003

```
import re

with open('log.txt', 'r') as f:
    for line in f:
        if not re.match("^\*\*\*", line):
            print line, 
```

Edit: Too Slow

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T14:18:35.893

如果您只想要一个单行将其过滤到不同的文件中，只需使用 grep：

```
grep -ve "^(Solving\|\*\*\*)" input.txt > output.txt 
```

或者，`startswith`按照其他答案指出的那样进行调查。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-23T14:19:25.350

用这个：

```
import re
f = open('badfile.txt', 'r')
result = 0
for line in f.readlines():
    r = re.search(r'^\*\*\*|^Solving')
    if r:
        continue
    result += line + '\n'
print result 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-23T14:21:51.763

这看起来像 FEniCS 输出。您可以通过声明来抑制不需要的消息：

```
set_log_level(ERROR) 
```

在你的代码中。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-23T14:45:37.693

你可以这样做：

```
import re
from itertools import ifilter

with open('/tmp/annoying.txt','r') as f:
     for line in ifilter(lambda x: re.match(r'\s+\d+',x),f):
         print line.strip() 
```

印刷：

```
0/240 +0.000000e+00 -1.146247e-08 +0.000000e+00 +1.913417e-03 +0.000000e+00     +0.000000e+00
1/240 +5.000000e-05 -2.024630e-08 -3.666293e-08 +1.913417e-03 +1.073840e-10    +3.479053e-21
2/240 +1.000000e-04 -3.529024e-08 -3.825476e-08 +1.913417e-03 +1.077877e-10 +2.308941e-20 
```

# sql - 不同数据类型的两个字段的 PIVOT

> ID：16171529
> 
> 赞同：0
> 
> 时间：2013-04-23T14:08:07.427
> 
> 标签：sql, performance, sql-server-2008, pivot

我有一个实体 ID 和属性标识符的窄表。对于每一行，都有一个数值或一个字符串。我想转出数据，但这对于不同类型的值字段很困难。

目前，我正在将数值转换为文本，然后再次转换为数字。这导致了格式化问题，我担心它效率低下。这些数据将被大量用于计算，这意味着大量的转换（更不用说精度损失、可维护性差等）。

我们以这种方式构建表的原因是它允许存储数据的灵活性。并非所有实体都具有所有属性，未来我们可能会添加更多属性。我们不希望表更改影响下游代码。此外，我们实际上并不是在每一行中存储属性名称，而是一个整数 ID。出于本示例的目的，我使用了字符串而不是数字 ID，以便于编码/理解。

转出不同数据类型的字段的正确方法是什么？

这是当前表结构的示例：

```
declare @temp table
(
    EntityID int,
    AttributeName varchar(500),
    NumberValue float,
    StringValue varchar(500),
    IsText bit
)

insert into @temp (EntityID,AttributeName,NumberValue,StringValue,IsText)
select 1,'Year',1776,null,0

insert into @temp (EntityID,AttributeName,NumberValue,StringValue,IsText)
select 1,'Note',null,'The year our country declared independence',1

insert into @temp (EntityID,AttributeName,NumberValue,StringValue,IsText)
select 2,'Year',1988,null,0

insert into @temp (EntityID,AttributeName,NumberValue,StringValue,IsText)
select 2,'Note',null,'The year Die Hard was released',1

select 
EntityID, YearNum=convert(float, [Year]), Note
from
(
select 
    EntityID,
    AttributeName,
    Value=Case when IsText=1 then StringValue else convert(varchar(500), NumberValue) end
from 
    @temp
) A
pivot
(
    Max(Value) for AttributeName in
    (
        [Year],
        Note
    )
) P 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T14:16:44.160

`PIVOT`抛开设计问题不谈，除非您希望查询返回动态数量的列，否则我并没有真正看到使用的必要性。否则，你可以这样做：

```
SELECT  EntityID,
        MAX(CASE WHEN AttributeName = 'Year' THEN NumberValue END) YearNum,
        MAX(CASE WHEN AttributeName = 'Note' THEN StringValue END) Note
FROM @temp
GROUP BY EntityID 
```

# javascript - 如何自动提取Javascript程序的软件架构？

> ID：16171531
> 
> 赞同：3
> 
> 时间：2013-04-23T14:08:09.673
> 
> 标签：javascript, architecture, doxygen

通常，当我尝试根据其源代码了解有关程序的更多信息时，我会尝试在其上运行`doxygen`并提取文档和它的全局体系结构（类层次结构、模块、包、调用堆栈……）。它确实有很大帮助。另一种方法是在源代码上运行静态分析器，例如`cppcheck`(C/C++)、clang 静态分析器 (c/c++) 或`pmd`(Java)、`pylint`(Python)，并查看输出。

我最近不得不看一个 Javascript 程序，我有点失望，因为我没有找到任何工具可以对其进行良好的静态分析，也没有找到提取软件架构的工具（我发现了几个试图将 Javascript 转换为Doxygen 接受的一种语言，但没有一种能够正常工作并提取有价值的东西）。所以，我想知道我在寻找这些工具时是否遗漏了什么。有人可以给我指出有关 Javascript 自动分析的有趣工具吗？或者，至少，向我解释为什么这很困难（或不可能）。

**注意**：我说的不是[Google Dart](http://code.google.com/p/dart/)，而是通常的 Javascript (ECMAScript)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-16T07:42:18.643

前面已经讨论[过](https://stackoverflow.com/questions/534601/are-there-any-javascript-static-analysis-tools)JavaScript 的静态分析工具。对于架构重建任务，您可以进一步考虑[JS/UML](http://jsuml.gaertner-network.de/)、[IntelliJ IDEA](https://www.jetbrains.com/idea/webhelp/working-with-diagrams.html)、[Visustin](http://www.aivosto.com/visustin.html)和[Code Visual to Flowchart](http://www.fileguru.com/Code-Visual-To-Flowchart/info)。

# redhawksdr - 如何向 redhawksdr 添加新的 IDL

> ID：16171539
> 
> 赞同：0
> 
> 时间：2013-04-23T14:08:36.523
> 
> 标签：redhawksdr

我想使用 IDE 将新的 IDL 文件添加到 Redhawk SDR 项目，但我找不到任何有关如何执行此操作的文档。我创建了一个新的 SCA IDL 项目并添加了 IDL 文件。它似乎可以编译并生成 .h 文件，但是如何让它生成 Servant 和 Client .h 文件，然后将它们包含在我的组件项目中？另外，当我生成仆人端 .h 时，是否可以生成模板 impl 文件？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T23:52:31.843

我不确定是否可以从 IDE 安装 IDL 项目。一种方法是转到 IDL 项目目录并运行：

```
$ ./reconf
$ ./configure
$ make
$ make install 
```

注意：如果用户没有 $OSSIEHOME 目录的写权限，安装命令必须以 root 身份运行：

```
$ sudo make install 
```

这将构建并安装您的 IDL 和 IDL 库到 $OSSIEHOME。完成后，IDE 应该会找到您的新 IDL，并允许您使用此 IDL 将端口添加到组件或设备。由于 REDHAWK 不知道任何关于您的 IDL 的具体信息，因此代码生成显然只是存根。

# linux - 分段错误：0x0000000000000001 in ?? () 试图在 Linux 下编译/链接

> ID：16171540
> 
> 赞同：6
> 
> 时间：2013-04-23T14:08:36.897
> 
> 标签：linux, gcc, segmentation-fault

我有一套用“C”编写的软件。这通常使用 acc 编译并在 UNIX Solaris 系统上运行，但我的任务是让它在 x86_64 机器上的 Linux 下运行。

我对 gcc 或 Linux 不是特别熟悉，但我已经设法通过最少的更改来编译代码，以删除在 Solaris 下不存在的警告。我正在使用以下编译命令（从脚本调用，因此是环境变量）：

```
/usr/bin/gcc -L/tmp/lib -L/tmp/usr/lib -c -fPIC -g -I$WORKING_DIR $INCLUDE $WORKING_DIR/$FILE 
```

然后使用以下命令将大部分源代码放置在共享 (.so) 库中，也可以通过脚本：

```
ld $GLOSS_SUB_DIR/$REL_DIR/obj/$PREFIX*".o" -G -o $GLOSS_SUB_DIR/$REL_DIR/lib/$LIB$NEW_MIN_VER_NO 
```

名为“gsproc”的可执行文件的示例生成文件如下：

```
CONTROL_NO = $(shell awk 'BEGIN{FS=","} /control/ {printf "%s%s", $$3,$$4} END{}' $$GLOSS_DIR/subenv_list)

CTRL_PATH = $(GLOSS_DIR)/control/$(CONTROL_NO)

OBJECTS = $(CTRL_PATH)/nolib/gsproc.o  \
          $(CTRL_PATH)/nolib/w_bkg_shared.o

LIBS    = -lcontrolw \
          -lsharew \
          -lsybdb64

gsproc: $(OBJECTS)
     gcc -shared -fPIC -o $(TMP_DIR)/gsproc \
         -L $(SYBASE)/$(SYBASE_OCS)/devlib \
          $(OBJECTS) $(LIBS) -lm -lc –lnsl 
```

我已经成功地编译并链接了所有代码，但是现在每个可执行文件在启动时都会立即崩溃，并出现分段错误和核心转储。我从 gdb 得到的只是：

```
GNU gdb (GDB) Red Hat Enterprise Linux (7.2-50.el6)
Copyright (C) 2010 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "x86_64-redhat-linux-gnu".
For bug reporting instructions, please see:
<http://www.gnu.org/software/gdb/bugs/>...
Reading symbols from /gloss_env/GLSLAZ_TST2/control/C2.0.0/bin/gsproc...done.
(gdb) run
Starting program: /gloss_env/GLSLAZ_TST2/control/C2.0.0/bin/gsproc 

Program received signal SIGSEGV, Segmentation fault.
0x0000000000000001 in ?? () 
```

所以看起来问题不在于代码。大概我的编译器或链接器选项有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-03-28T07:14:37.500

这个 Makefile 规则 / gcc 命令

```
gsproc: $(OBJECTS)
     gcc -shared -fPIC -o $(TMP_DIR)/gsproc \
         -L $(SYBASE)/$(SYBASE_OCS)/devlib \
          $(OBJECTS) $(LIBS) -lm -lc –lnsl 
```

创建一个共享对象 namde gsproc（没有普通的 lib 前缀和 .so 后缀）。在许多操作系统中，可执行文件和库是相同的文件格式，其副作用是您可以尝试将共享库作为可执行文件运行。但结果通常是你所看到的，即时崩溃等。

# html - 响应式电子邮件表不断中断 - 是什么原因造成的？

> ID：16171544
> 
> 赞同：4
> 
> 时间：2013-04-23T14:08:51.560
> 
> 标签：html, css, html-email

我正在处理一个 HTML 电子邮件，该电子邮件在我需要支持的多个电子邮件客户端/浏览器组合中完美运行，以解决这个我无法弄清楚的问题。我有一个宽的表格`600px`（这是电子邮件的宽度），其中还有另一个表格，它由顶部和底部的“曲线”图像组成，中间有一些文本。由于这封电子邮件是响应式的，当浏览器窗口变小时，内部灰色表格就会“中断”。我知道这一点是因为我正在使用 Litmus 来测试多种浏览器/电子邮件客户端组合。

注意：这仅在电子邮件“调整大小”时发生，即仅在移动电子邮件客户端上发生。如果你看下面的小提琴，我正在谈论的部分是开始的内部灰色框`The Victims of Fraud...`。这个盒子（调整大小时）不会很好玩。我已经尝试了我能想到的一切，使用填充、删除填充、嵌套表以及介于两者之间的所有内容。这让我疯狂。

为了明白我的意思，打开小提琴然后`HTML`缩小窗口。

这是一个尝试说明我的意思的小提琴：http: [//jsfiddle.net/39gzj/2/](http://jsfiddle.net/39gzj/2/)

更新：如果您查看使用 Firebug / Chrome 开发人员设置，您会看到由于某种原因，该表已将这种魔法`2px`添加到内部灰色表中。这是我需要根除的！

更新2：再次尝试评论中发布的内容，但这又不起作用。

[http://jsfiddle.net/39gzj/2/](http://jsfiddle.net/39gzj/2/)

更新 3 - 我什至尝试使用媒体查询来显式调整这个中间框的大小，但它仍然不起作用。这是更新的小提琴；[http://jsfiddle.net/39gzj/5/](http://jsfiddle.net/39gzj/5/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T11:59:04.043

对，所以我终于设法解决了这个问题，但需要使用媒体查询来修复中间行的“中断”。这就是我所做的；

使用媒体查询明确调整每一行的大小！所以现在，图像可以正确调整大小，但是一旦它达到移动视口大小，它就会迅速缩小到您可以在 CSS 中看到的正确大小（最大 300 像素）。这是更新的[小提琴](http://jsfiddle.net/39gzj/6/)

这是有效的媒体查询：

```
@media only screen and (min-width:300px) and (max-width: 500px) { /* MOBILE CODE */
    *[id=mobile] {
        width:300px!important;
    }
} 
```

我知道这并不是回答这个问题的正确方法，因为我还没有解决最初的问题（为什么桌子坏了）所以不知道 mods 想用我放在那里的这个赏金做什么。

编辑：正如评论中有用地指出的那样，如果屏幕尺寸低于`300px`电子邮件将自动再次变为正常尺寸，这可以通过更改媒体查询再次解决，但如前所述，此答案目前专门为电子邮件客户解决问题/我需要支持的浏览器组合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-29T15:36:56.383

如果您将用于间距的静态宽度列拉出并将边距应用于子表以完成间距，那么所有内容都应该正确排列。我想间距列是你焦虑的根源。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-29T18:38:24.917

您是否尝试过使用最小宽度。限制它将缩小到的大小。我会假设如果它收缩它应该只收缩到它破裂之前的点。我对吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T14:57:35.013

尝试像这样设置您的表：

```
<table width="100%" border="0" cellpadding="0" cellspacing="0" bgcolor="#cccccc" style="border-radius: 5px; padding:30px;">
  <tr>
    <td>
text here. Put this inside a container with any media queries, should always stretch to full width.
    </td>
  </tr>
</table> 
```

# android - Android返回键/按钮，如何完美使用？

> ID：16171548
> 
> 赞同：3
> 
> 时间：2013-04-23T14:09:02.150
> 
> 标签：android

我正在开发一个应用程序，它可以从互联网上下载东西并显示，更像是网络浏览器。你越深入，后面的钥匙栈就会被填满。所以现在当你按下返回键时，它会从列表中加载最后一个 URL，然后一直到第一个访问的 URL，最后一次按下返回键，应用程序就会关闭。

但是有一个问题，假设你浏览了很长时间，后键列表中有这么多的 URL。现在您想关闭应用程序，但您必须按住返回键直到最后一个 URL，然后它将关闭。这不是一个好主意，我的意思是它非常烦人。如果我想关闭应用程序，必须单击一下。所以我想出了一个想法来放置一个退出按钮，但它对于 android 来说仍然是一个糟糕的设计。

我想知道你们是否有更好的方法可以建议，那将非常好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T14:21:09.083

一个建议：您可以在后退按钮上创建一个 onLongPress 事件。这通常在很多硬件/软件应用程序中完成，所以很多人应该凭直觉尝试。如果用户按一次返回按钮，这将返回，如果他在返回按钮上停留的时间更长，这将关闭应用程序，或者在确认对话框中要求他确认应用程序关闭。

因此，就您而言，您将拥有：

```
@override
public boolean onKeyLongPress(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) 
    {
        // close the app
        return true;
    }
    return super.onKeyLongPress(keyCode, event);
} 
```

更好的是，你可以实现这个，并添加一个菜单，当用户点击菜单按钮时，他会看到退出图标，然后像这样退出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T14:14:52.677

我认为退出`Button`并不总是一个糟糕的选择，特别是当你需要这样的东西时。但是您可以考虑另一种解决方案-

`onbackpress`通常退出`webview`并添加一个`backbutton`like `webbrowsers`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T14:36:03.763

恕我直言，关闭应用程序的任何解决方法对于 Android 来说都是糟糕的想法和糟糕的设计实践。如果用户想立即退出应用程序，他将使用主页按钮，而不是返回按钮，这就是主页按钮的用途，这就是它存在的原因。

再次这是我的观点，但我相信这种类型的应用程序（你提到的网络浏览器，类型的东西）的一个好的设计是，例如用户想要从导航树的开头启动浏览器，你使用向上按钮（如评论之一[http://developer.android.com/guide/topics/ui/actionbar.html#Home](http://developer.android.com/guide/topics/ui/actionbar.html#Home)中的建议）将您的应用程序带入初始状态。您可以使用带有 CLEAR_TOP 标志的意图来删除任何现有的 Backstack。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T14:46:14.180

我认为 Milos 的回答是最好的方法......您也可以将“退出”选项添加为菜单上的一个项目，请检查：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.your_option_menu, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case R.id.exit:
        // CLose your app
        finish();
        return true;
    }
    return false;
} 
```

这是菜单的布局：your_option_menu.xml

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/exit"
          android:icon="@android:drawable/ic_menu_exit"
          android:title="@string/Exit" />
</menu> 
```

# c++ - 如何遍历 CListCtrl 的元素？

> ID：16171549
> 
> 赞同：3
> 
> 时间：2013-04-23T14:09:03.567
> 
> 标签：c++, mfc, clistctrl

**简要说明：**
我得到了一个`CTreectrl`存储对象的类的实例，当对象选择对象的对象列表报告显示为该对象。
我需要调整派生自的 MyListCtrl 类实例的**列的宽度，**`CListCtrl`以便用户可以在不调整列大小的情况下看到该列中的数据。

**我如何处理我的任务：**
我实现了从树中选择对象时调用的方法 InitColumnWidth

```
 void COwnListCtrl::InitColumnWidth ( unsigned const * defwidth, BOOL chars )
        {
            /* find the largest string in each column and set column width accordingly
            so that user no longer need to manually adjust columns width */

            RECT r;
            GetClientRect ( & r );
            int* arrOfMaxColumnWidth = new int[NumCol]; // array where max length for columns will be stored
            for (int i = 0; i < NumCol; ++i)
                arrOfMaxColumnWidth[i] = 0; // initialize
            tstring dataInColumn;
            double Scale = ( defwidth && chars ) ? GetCharAveWidth ( * GetFont () ) : ( r.right * 0.01 );
            int numberOfVisitedItems = 0;
            do
            {
                dataInColumn = _T(""); // initialize
                for (int col = 0; col < NumCol; ++col)
                {
                    //DWORD const itemData = this->GetItemData(numberOfVisitedItems);

                    dataInColumn = this->GetSubItemString(this->GetItemData(numberOfVisitedItems), col); 
                /* 1-st varaint returns only first row of the list 
           because GetItemData always returns zero, but I need to visit all rows */
                    dataInColumn = this->GetSubItemString(numberOfVisitedItems, col); 
   /* 2-nd variant, works for most objects from CTreeCtrl, but for a few of them assertion is raised, system reports on the corrupted heap and application terminates*/
                    if (dataInColumn.length() > arrOfMaxColumnWidth[col])
                        arrOfMaxColumnWidth[col] = dataInColumn.length();
                }
                ++numberOfVisitedItems;
            }
            while(dataInColumn.length() != 0); /* do{} while loop is used to get number of rows in the table
                                       as long as an empty string is read, which means that all rows were read*/
            for (int col = 0; col < NumCol; ++col)
                int tmp = ColWidth[col] = arrOfMaxColumnWidth[col] * Scale;
            ColWidth[0] = 100; 
```

需要帮忙！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T01:39:20.577

使用它（用`for (int col = 0; col < NumCol; ++col)`下面的代码替换你的）：

```
for (int col = 0; col < NumCol; ++col)
{
    int len = 0;
    for(int row = 0; this->GetItemCount(); ++row)
    {
        CString item = this->GetItemText(row, col);
        if(item.GetLength() > len) len = item.GetLength();
    }
    if (len > arrOfMaxColumnWidth[col])
        arrOfMaxColumnWidth[col] = len; // should you multiple it to Scale?
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-30T14:27:26.380

No need to reinvent the wheel. If you just want to resize the columns to fit the text try:

```
for (int i = 0; i < NumCol; ++i)
    ListView_SetColumnWidth( m_hWnd, i, LVSCW_AUTOSIZE ); 
```

# c++ - 告诉 gcc 优化器值在全局函数中发生了变化

> ID：16171550
> 
> 赞同：1
> 
> 时间：2013-04-23T14:09:06.783
> 
> 标签：c++, gcc

这是一个简单的代码

```
void GlobalAlterA(A *a) { a->m = 1; }
struct A { int n, int m; };
struct Z: public A { void AlterA() { GlobalAlterA(this); } };
struct Y: public Z {};
struct X: public Y 
{
    int AsValue()
    {
       switch (n)
       {
           case 0: return m;
           default: AlterA(); return m;
       }
    }
}; 
```

现在，这段代码的问题是 gcc 优化器丢弃了除“return m”之外的所有 AsValue() 代码，因为我想，它看不到 GlobalAlterA() 主体，也不知道 AlterA() 可以改变“m”成员。

除了关闭代码特定部分的优化之外，有没有办法解决这个问题？例如 volatile 说明符等技巧。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T15:18:33.600

这已经被优化器假设了，所以你不能告诉它假设它已经假设的东西。

但是，如果您*认为*您正在更改值，但实际上正在遇到未定义的行为（例如，因为您`m`通过类型双关指针进行修改或`union`滥用），那么优化器完全可以假设`m`没有更改。最好的解决办法当然是删除那个 UB，或者（如果失败了）至少对优化器隐藏它。

# python - 如何通过连接继承从 SQLalchemy 中的父实例转换子实例

> ID：16171551
> 
> 赞同：1
> 
> 时间：2013-04-23T14:09:10.843
> 
> 标签：python, sqlalchemy

给定 SQLAlchemy 中的简单连接继承，将超类的实例“转换”为子类的最简单方法是什么？

显而易见的方法是检查超类上的鉴别器，然后基于适当的子类运行查询。但似乎应该有一种更简单的方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:59:40.003

我没有找到一种方法来转换现有的父实例，但 SQLalchemy 确实有[“with_polymorphic”](http://docs.sqlalchemy.org/en/latest/orm/inheritance.html#basic-control-of-which-tables-are-queried)，它可以在许多地方使用，以根据鉴别器返回具有父子属性组合的 glommed 对象。

所以，我补充说：

```
"with_polymorphic": "*" 
```

到我父母的班级`__mapper_args__`，现在对父母的查询返回具有其恰好是哪个子班级的属性和值的对象。

这是最好的也是唯一的方法吗？

# tsql - 查询重命名表

> ID：16171555
> 
> 赞同：0
> 
> 时间：2013-04-23T14:09:20.480
> 
> 标签：tsql, sql-server-2005

在 SQL Server 2005 中，我希望使用通配符重命名很多表，例如，表名是：

```
OrderItem
OrderItems
OrderItemss 
```

我希望将它们重命名为：

```
OrderItem2
OrderItems2
OrderItemss2 
```

这可以使用通配符来完成，所以我不必指定完整的表名吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T14:16:41.380

您可以使用系统表来选择与您的模式匹配的所有表名，例如'OrderItem%'，或更复杂的。然后使用动态 sql 使用`exec SP_RENAME 'old_name' 'new_name'`.

但是，这不会对查询表的存储过程生效。重命名完成后，需要重新编译这些存储过程。

**解决方案 Sql**

好的，这是完整的代码。它基于表名以“OrderItem”开头，并且它们都应具有后缀“2”的原始名称。在重命名它们之前，我创建了一个表变量来保存找到的表。如果您“取消注释” select 语句并且只执行该语句，您可以看到选择要重命名的表，以及它们将重命名的表。**请注意**，我只从 dbo 模式中选择表。

```
declare @OldTableName nvarchar(max)
declare @NewTableName nvarchar(max)
declare @SqlStmt nvarchar(max)

declare @Tables table
(
    OldTableName nvarchar(max),
    NewTableName nvarchar(max)
)

insert into @Tables (OldTableName, NewTableName)
select
    name as OldTableName ,
    name + '2' as NewTableName
from sys.tables
where name like 'OrderItem%'
    and schema_id = SCHEMA_ID('dbo')

-- select * from @Tables

declare cur cursor for
select OldTableName,
NewTableName
from @Tables

open cur
while (1=1)
begin

    fetch next from cur into @OldTableName, @NewTableName

    if @@FETCH_STATUS <> 0
        break

    set @SqlStmt = N'sp_rename ''' + @OldTableName + ''', ''' + @NewTableName + ''''

    exec sp_executesql @SqlStmt

end

close cur
deallocate cur 
```

**新 2013 年 4 月 24 日**

包含架构名称且不仅在`dbo`架构中查找的 Select 语句

```
select
    s.name + '.' + t.name as OldTableName,
    t.name + '2' as NewTableName
from sys.tables as t
inner join sys.schemas as s on t.schema_id = s.schema_id
where t.name like 'OrderItem%' 
```

**添加**

查找`sys.tables`所有表（请记住仅选择要重命名的架构中的那些）。将名称连同您给它们的新表名称一起插入到临时表中，然后遍历它们中的每一个，通过调用生成一个 sql 字符串，`sp_rename`并使用`exec sp_executesql 'SQL STMT'`来进行实际执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-21T21:40:32.937

就是这么简单：

```
DECLARE @SQL nvarchar(max);

SELECT
   @SQL = Coalesce(@SQL + Char(13) + Char(10), '') + 'EXEC sp_rename '''
   + Replace(QuoteName(TABLE_SCHEMA) + '.' + QuoteName(TABLE_NAME), '''', '''''')
   + ''', ''' + Replace(TABLE_NAME + '2', '''', '''''') + ''';'
FROM INFORMATION_SCHEMA.TABLES T
WHERE
   T.TABLE_TYPE = 'BASE TABLE'
   AND T.TABLE_NAME LIKE 'OrderItem%'
;

EXEC (@SQL); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T14:20:12.457

您可以通过以下查询获取所有用户表的列表，这些表按您需要的内容过滤：

```
select name from sysobjects where type = 'U' and name like 'user%' 
```

然后使用`sp_executesql`和游标对查询结果执行动态 SQL ( [MSDN](http://msdn.microsoft.com/en-us/library/ms188001.aspx) ) 以执行实际重命名。

希望有帮助。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-23T16:11:07.517

首先在你的数据库中找到表的数量（我有3个）并将这段代码放在一个存储过程中，它也可以放参数！！

```
 `alter procedure [dbo].[changetableName]
  as
  declare @sql varchar(8000), @table varchar(1000), @oldTable varchar(1000),  
  @newTable     
  varchar(1000);
  declare @Inc integer;
  set @Inc=1;

  set @oldTable = '%OrderItem%'
  set @newTable = 'OrderItem_n'

  while exists(SELECT object_id, t.name AS table_name FROM sys.tables AS t where
  t.name Like @oldTable) and (@Inc<=3)
   begin

    select @table = name from sys.tables 
   where object_id in(select object_id from sys.tables as t where t.name like 
        @oldTable )

 set @sql = 'sp_rename ' + @table + ' , ' + @newTable + CONVERT(varchar(2),@Inc) 

    exec(@sql)
   SET @Inc = @Inc + 1;
  select @sql
  end` 
```

# model-view-controller - StringLength 在 MVC4.0 中无法按预期工作

> ID：16171556
> 
> 赞同：2
> 
> 时间：2013-04-23T14:09:20.853
> 
> 标签：model-view-controller, data-annotations

我`@Html.EditorFor`在 MVC 4 中有一个控件，对于字符串长度验证，我使用`[StringLength(10)]`了模型属性初始化顶部的属性，即上述控件。它的作用是每当用户输入超过 10 个字符时，它会给出一条消息，指出它不能超过定义的限制。

但是，它并不禁止用户输入超过定义的限制。可以在 MVC 中使用 DataAnnotations 来完成吗？

注意：我不想在这里使用任何 onKeypress 事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-08T13:43:45.283

你可以给你的编辑@maxlength=10 例如

```
 @Html.EditorFor(model => model.str, new {  @maxlength=10 }) 
```

这样，您可以限制用户表单插入超过 10 个字符。

我希望这能帮到您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T15:48:15.587

似乎使用 TextBoxfor 是最简单的方法：

```
@Html.TextBoxFor(model => model.MyField, new {maxlength = 10}) 
```

根据[这个问题](https://stackoverflow.com/questions/11262923/limiting-the-length-of-characters-in-a-textbox-while-using-razors-html-editfor)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-17T06:59:37.507

您需要在相关视图中编写验证代码@Html.ValidationMessageFor（如edit.cshtml）：

```
 <div class="editor-field">
          @Html.EditorFor(model => model.str)
          @Html.ValidationMessageFor(model => model.str)
        </div> 
```

因此，它会自动查找您的验证属性并在您的视图页面中显示一些错误消息。您可以查看这篇文章：[向模型添加验证](http://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4/adding-validation-to-the-model)

# android - 在点击监听器上设置滑动菜单

> ID：16171562
> 
> 赞同：1
> 
> 时间：2013-04-23T14:09:47.877
> 
> 标签：android, menu, onclicklistener, slidingmenu

在这个程序中，我实现了[滑动菜单库](https://github.com/jfeinstein10/SlidingMenu)。我现在遇到的问题是为这些菜单设置点击监听器。

该库要求菜单是不同的布局，或者至少这是我实现它的方式。我现在想要实现的是对这些菜单选项实现各种 onClick 侦听器。

该程序看起来像这样（它的一小部分）：

**菜单.xml**

```
 <RelativeLayout android:id="@+id/ask_a_question"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="15dp"
        android:layout_marginBottom="5dp"
        android:onClick="getQuestion">

        <TextView android:layout_alignParentLeft="true"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/ask_a_question"
            android:textColor="#ffffff"
            android:layout_marginLeft="15dp"
            android:layout_centerVertical="true"/>

        <ImageView android:layout_alignParentRight="true"
            android:contentDescription="@string/ask_a_question"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/question"
            android:layout_marginRight="15dp"/>

    </RelativeLayout> 
```

在它的**MainActivity.java**程序看起来像这样：

```
public void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        setBehindContentView(R.layout.menu);

        getSlidingMenu().setBehindOffset(100);

        ask_a_question = (RelativeLayout)findViewById(R.id.ask_a_question);
        ask_a_question.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                getQuestion();
            }
        });
        login = (Button)findViewById(R.id.log_in_button);
        login.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
            startActivity(new Intent("com.example.btshome.LOGINACTIVITY"));
            }
        });
    }

    public Intent getQuestion()
    {
        Intent i = new Intent("com.example.btshome.ASKPAGE");
        startActivity(i);
        return null;
    } 
```

返回以下错误：

```
04-23 19:43:30.030: E/AndroidRuntime(845): FATAL EXCEPTION: main
04-23 19:43:30.030: E/AndroidRuntime(845): android.content.ActivityNotFoundException: No Activity found to handle Intent { act=com.example.btshome.ASKPAGE }
04-23 19:43:30.030: E/AndroidRuntime(845):  at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1545)
04-23 19:43:30.030: E/AndroidRuntime(845):  at android.app.Instrumentation.execStartActivity(Instrumentation.java:1416)
04-23 19:43:30.030: E/AndroidRuntime(845):  at android.app.Activity.startActivityForResult(Activity.java:3351)
04-23 19:43:30.030: E/AndroidRuntime(845):  at android.app.Activity.startActivityForResult(Activity.java:3312)
04-23 19:43:30.030: E/AndroidRuntime(845):  at android.app.Activity.startActivity(Activity.java:3522)
04-23 19:43:30.030: E/AndroidRuntime(845):  at android.app.Activity.startActivity(Activity.java:3490)
04-23 19:43:30.030: E/AndroidRuntime(845):  at com.example.btshome.MainActivity.getQuestion(MainActivity.java:47)
04-23 19:43:30.030: E/AndroidRuntime(845):  at com.example.btshome.MainActivity$1.onClick(MainActivity.java:30)
04-23 19:43:30.030: E/AndroidRuntime(845):  at android.view.View.performClick(View.java:4084)
04-23 19:43:30.030: E/AndroidRuntime(845):  at android.view.View$PerformClick.run(View.java:16966)
04-23 19:43:30.030: E/AndroidRuntime(845):  at android.os.Handler.handleCallback(Handler.java:615)
04-23 19:43:30.030: E/AndroidRuntime(845):  at android.os.Handler.dispatchMessage(Handler.java:92)
04-23 19:43:30.030: E/AndroidRuntime(845):  at android.os.Looper.loop(Looper.java:137)
04-23 19:43:30.030: E/AndroidRuntime(845):  at android.app.ActivityThread.main(ActivityThread.java:4745)
04-23 19:43:30.030: E/AndroidRuntime(845):  at java.lang.reflect.Method.invokeNative(Native Method)
04-23 19:43:30.030: E/AndroidRuntime(845):  at java.lang.reflect.Method.invoke(Method.java:511)
04-23 19:43:30.030: E/AndroidRuntime(845):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
04-23 19:43:30.030: E/AndroidRuntime(845):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
04-23 19:43:30.030: E/AndroidRuntime(845):  at dalvik.system.NativeStart.main(Native Method) 
```

清单页面：

```
<application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.btshome.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity android:name=".LoginActivity"
            android:label="@string/app_name">
            <intent-filter>
                <action android:name="com.example.btshome.LOGINACTIVITY"/>
                <category android:name="android.intent.category.DEFAULT"/>
            </intent-filter>
        </activity>

        <activity android:name=".SignUp"
            android:label="@string/app_name">
            <intent-filter>
                <action android:name="com.example.btshome.SIGNUP"/>
                <category android:name="android.intent.category.DEFAULT"/>
            </intent-filter>
        </activity>

        <activity android:name=".LoginPage"
            android:label="@string/app_name">
            <intent-filter>
                <action android:name="com.example.btshome.LOGINPAGE"/>
                <category android:name="android.intent.category.DEFAULT"/>
            </intent-filter>
        </activity>

        <activity
            android:name=".QuestionAsking"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="com.example.btshome.ASKPAGE" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

    </application> 
```

我在单击时实现此菜单项的方法是否良好？或者这是一个不好的方法，因为我必须在我的所有页面上都提供滑动菜单。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T14:17:49.203

您的清单文件中可能没有`ASKPAGE`Activity 。

在 AndroidManifest.xml 的`application`标签内，添加：

```
<activity android:name=".ASKPAGE"> 
```

编辑：

您的`getQuestion()`方法应如下所示：

```
public Intent getQuestion()
{
    Intent i = new Intent("com.example.btshome.ASKPAGE"); // Set an action in constructor
    i.setClass(MainActivity.this, QuestionAsking.class);  // Set an Activity class
    startActivity(i);
    return null;
} 
```

只是一个说明 - 我希望你看到你总是`null`以这种方法返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T14:26:02.957

您必须在至少一个将处理您的意图的活动中明确声明一个意图过滤器。有关更多信息，您可以[在此处查看](http://developer.android.com/guide/components/intents-filters.html)。例如，您应该执行以下操作：

```
 <activity
            android:name="com.example.btshome.LoginActivity">

            <intent-filter>
                <action android:name="com.example.btshome.LOGINACTIVITY" />>

                <category android:name="com.example.btshome />
</activity> 
```

# ckeditor - 当仅更改其中一个实例时，所有实例的 Ckeditor onchange 触发器

> ID：16171566
> 
> 赞同：2
> 
> 时间：2013-04-23T14:09:58.723
> 
> 标签：ckeditor, fckeditor

我正在使用 ckeditor inline 使用此代码将一些用户可编辑的行添加到表中（该函数每行调用一次，参数是我想要的每种类型的可编辑列的 Id）。忽略多余的数组构建。

```
function activare_campuri_editabile_extinse(pu, adaos, cota, cant, cant_doc, pv) {      
var campuri_editabile = [ pu, adaos, cota, cant, cant_doc , pv];

$j.each(campuri_editabile, function(index) {
    var ce = this; 
    editor = CKEDITOR.inline( $j('#' + this).attr('id'), {          
        enterMode : CKEDITOR.ENTER_BR,
        on: {
            blur: function( event ) {
                var data = event.editor.getData();
                if(ce.split('_')[0] == 'pu' || ce.split('_')[0] == 'pv') {
                    $j('#'+ce).text(formatare_cu_virgula(data));
                }
                if(ce.split('_')[0] == 'pu') {                      
                    verificare_modificare_pret('#' + ce, data, 'select_gestiune_primitoare' );
                }
            },
            focus: function ( event ) {
                var data = event.editor.getData();
                if(ce.split('_')[0] == 'pu' || ce.split('_')[0] == 'pv') {  
                    $j('#'+ce).text(deformatare_cu_virgula(data));
                }
            },      
            change: function( event ) {
                if(event.editor.checkDirty() == true) {                     
                    var data = event.editor.getData();
                    if(ce.split('_')[0] == 'pu' || ce.split('_')[0] == 'pv' || ce.split('_')[0] == 'cota') {
                        corelare_valori_tabel(ce,'adaos', 'extins', data);
                    }
                    if(ce.split('_')[0] == 'adaos') {
                        corelare_valori_tabel(ce,'pret_vanzare', 'extins', data);
                    }
                    if(ce.split('_')[0] == 'cant') {                                                    
                        corelare_valori_tabel(ce, 'cantitate', 'extins', data);
                    }
                    event.editor.resetDirty();
                }                   
            }          
        }
    } );
    editor.config.keystrokes = [[ 13, 'doNothing']];
    editor.resetDirty();
    });
} 
```

onchange 函数旨在修改行中的某些单元格以保持数据的完整性（使用此示例：设置加价百分比，以便在增值税或进项价格发生变化时销售价格保持不变，等等） . 问题是当一个编辑器实例的一个 onchange 事件触发时，它们都会触发。并且查看两个或多个表格单元格如何以两种方式链接（更改标记将更改售价，而更改售价将更改标记）结果是完全混乱的。

使用 checkDirty 和 resetDirty 方法时我做错了什么吗？还是我错过了什么？（在 ckEditor 4.01 上运行 onchange 插件 1.7）

我设法通过为直接启用了 ckeditor 的元素添加 onkeyup 处理程序来解决这个问题。因此，我没有通过 CKEDITOR 添加 onchange 事件，而是直接向数组中的每个元素添加了 onkeyup 事件。

# c - 验证远程网站的 SSL 证书

> ID：16171571
> 
> 赞同：0
> 
> 时间：2013-04-23T14:10:11.717
> 
> 标签：c, openssl, x509

我有一个用 C 语言编写的 OpenSSL 客户端（多线程）。这个客户端连接到许多 HTTPS 网站，并像典型的浏览器一样执行操作。为确保客户端连接到真实的 Web 服务器，我已将其设置为使用 ca-certificates.crt 和典型的 SSL_CTX_load_verify_locations (ctx, "ca-certificates.crt" , NULL) 方法。

为了生成“ca-certificates.crt”文件，我安装了 mono / mozroots 并执行了以下操作：

```
mozroots --pkcs7 moz.p7b
openssl pkcs7 -inform DER -in moz.p7b -print_certs -out ca-certificates.crt 
```

到目前为止，事情正在按预期运行，并且使用：

```
SSL_CTX_set_verify(ctx, SSL_VERIFY_PEER, NULL);
SSL_CTX_set_verify_depth(ctx, 4); 
```

其次是 SSL_get_verify_result(ssl); 如果我连接到一些“不真实”的 HTTPS 网站，则会产生警报。

我的 OpenSSL 客户端目前并行处理大约 100 个网站，并且通过进一步优化，我希望能够实现更多

我想进一步优化我的客户，以便我可以：

1.  我认为 openssl 会调用一些底层方法来执行磁盘 I/O 以使用“ca-certificates.crt”，对吗？有没有办法将这个“ca-certificates.crt”加载到内存中，并使用一些openssl api来访问这个内存位置？它不会让我的客户更快一点吗？

2.  典型的网络浏览器如何访问“信任库”？我认为他们使用一些更有效的方法访问内存中的“信任库”？我对吗？有人可以在这里给我一些关于如何做的好建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:26:47.860

请查看如何验证远程 SSL 证书的精彩教程：[https://github.com/iSECPartners/ssl-conservatory/blob/master/openssl/everything-you-wanted-to-know-about-openssl。 pdf](https://github.com/iSECPartners/ssl-conservatory/blob/master/openssl/everything-you-wanted-to-know-about-openssl.pdf)

在同一个 gitHub 存储库中还有一个演示应用程序可用：[https ://github.com/iSECPartners/ssl-conservatory/tree/master/openssl](https://github.com/iSECPartners/ssl-conservatory/tree/master/openssl)

希望对你有帮助！

# logging - 从 weblogic 管理控制台设置 gc 详细日志

> ID：16171573
> 
> 赞同：2
> 
> 时间：2013-04-23T14:10:14.660
> 
> 标签：logging, garbage-collection, weblogic

如何
`-XX:PrintGCDetails`
使用 weblogic 管理控制台设置垃圾收集详细日志。而不是使用命令提示符。我可以使用命令提示符进行设置，但我的应用程序想要使用 UI。请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:32:21.807

您可以在这里找到答案，例如：[WebLogic Server Performance and Tuning: Part I - Tuning JVM](https://blogs.oracle.com/imc/entry/weblogic_server_performance_and_tuning)

简而言之，转到`Environment`> `Servers`> `"Your Server Name"`> `Configuration`> `Server Start`> `Arguments`。

# php - 使用 CI DataMapper ORM 连接不同数据库中的表

> ID：16171576
> 
> 赞同：1
> 
> 时间：2013-04-23T14:10:17.870
> 
> 标签：php, mysql, join, codeigniter-2, codeigniter-datamapper

我确实搜索了解决方案，但没有发现任何帮助。[这个](https://stackoverflow.com/questions/5448506/connecting-to-mulitple-databases-with-dmz-datamapper)问题是关于使用带有数据映射器的多个数据库，但我已经使用了这种方法。

用户模型：

```
class User extends DataMapper {
    var $prefix = "app_";

    var $db_params = 'default';
... 
```

公司型号：

```
class Company extends DataMapper {
    var $prefix = "tbl_";

    var $db_params = 'super';
... 
```

我有上述型号。它们与用户拥有一个公司和公司拥有许多用户相关。当我创建公司时，将自动创建一个用户并成功建立关系。

但是，当我尝试删除公司或尝试访问用户的相关公司时。DataMapper 在错误的位置查找用户表。

我收到以下错误：

```
A Database Error Occurred

Error Number: 1146

Table 'a1210alf.app_users' doesn't exist

SELECT `tbl_companies`.* FROM (`tbl_companies`) LEFT OUTER JOIN `app_users` app_users ON `tbl_companies`.`id` = `app_users`.`company_id` WHERE `app_users`.`id` = 4 
```

在我的 CI 配置中，我对两个数据库“默认”和“超级”有两种不同的设置。我在模型中设置了正确的一个。表 app_users 确实存在，所需的所有字段都在那里。不知道我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-04T12:12:03.823

我现在使用这个解决方案有一段时间了。无论如何，它仍然没有“崩溃”..所以我想这是正确的方法。

首先，我创建了一个扩展“DataMapper”的“BaseModel”。构造函数如下所示：

```
/**
 * Constructor: calls parent constructor
 */
function __construct($id = NULL, $db = NULL)
{
    if ($db != NULL && $this->db_params == '') {    
        // use these params as default
        $this->db_params = array_merge(array( 
            'dbdriver'  => 'mysql',
            'pconnect'  => true,
            'db_debug'  => true,
            'cache_on'  => false,
            'char_set'  => 'utf8',
            'cachedir'  => '',
            'dbcollat'  => 'utf8_general_ci',
            'autoinit'  => true,
            'stricton'  => false,
        ), $db);
    }
    elseif($this->db_params == '') {
        $CI =& get_instance();
        $cid = $CI->session->userdata('cid');
        if($cid != false || $cid != '') {
            $userDB = new Database();
            $userDB->get_where(array('company_id'=>$cid));
            if($userDB->exists()) {
                $this->db_params = array(
                    'hostname'      => $userDB->dbhost,
                    'database'      => $userDB->dbname,
                    'username'      => $userDB->dbuser,
                    'password'      => $userDB->dbpass,
                    'dbdriver'  => 'mysql',
                    'pconnect'  => true,
                    'db_debug'  => true,
                    'cache_on'  => false,
                    'char_set'  => 'utf8',
                    'cachedir'  => '',
                    'dbcollat'  => 'utf8_general_ci',
                    'autoinit'  => true,
                    'stricton'  => false,
                );
            }
        }
    }
    parent::__construct($id);
} 
```

现在，如果您创建一个用户实例，我们应该在`$u = new User(NULL, $this->udb);`哪里`$this->udb`加载主控制器中的连接参数。

这样模型每次都会得到正确的参数。如果需要相关对象，BaseModel 知道从哪里获取正确的参数。

我只关心它是否有效：p

注意：不需要`var $db_params = 'default';`在每个模型中设置。如果这样做，它将覆盖您在 BaseModel 的构造函数中设置的参数。

也许这对某人有用。但这是一个特例，如果您使用 CodeIgniter + Datamapper，我不鼓励任何人以这种方式设计他们的数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-04T11:14:13.390

我认为您无法解决不同数据库之间的关系。你必须用你自己的逻辑来模拟这个。

# c# - 试图在 XNA 程序中做图像菜单并卡在构造函数错误

> ID：16171577
> 
> 赞同：-1
> 
> 时间：2013-04-23T14:10:22.017
> 
> 标签：c#, .net, xna, windows-phone-8, xna-4.0

这是 ImageMenuGame.cs 的代码。尝试在 Xna 中做菜单，练习游戏开发，它显示错误为构造函数错误。我是 XNA 的新手。还将屏幕截图与代码一起粘贴。提前致谢。![在此处输入图像描述](https://i.stack.imgur.com/2NPzn.jpg)

```
namespace ImageMenu
{
    /// <summary>
    /// This is the main type for your game
    /// </summary>
    /// 

    public class ImageMenuGame : Microsoft.Xna.Framework.Game
    {
        GraphicsDeviceManager graphics;
        SpriteBatch spriteBatch;

        SpriteFont font;

        Texture2D texImageMenuItem;

        List<ImageMenuItem> Menu;

        int TotalMenuItems = 4;

        int index = 0;

        int currentIndex;

        public ImageMenuGame()
        {
            graphics = new GraphicsDeviceManager(this);
            Content.RootDirectory = "Content";

            // Frame rate is 30 fps by default for Windows Phone.
            TargetElapsedTime = TimeSpan.FromTicks(333333);

            // Extend battery life under lock.
            InactiveSleepTime = TimeSpan.FromSeconds(1);
        }

        /// <summary>
        /// Allows the game to perform any initialization it needs to before starting to run.
        /// This is where it can query for any required services and load any non-graphic
        /// related content.  Calling base.Initialize will enumerate through any components
        /// and initialize them as well.
        /// </summary>
        protected override void Initialize()
        {
            // TODO: Add your initialization logic here

            Menu = new List<ImageMenuItem>();

                base.Initialize();
        }

        /// <summary>
        /// LoadContent will be called once per game and is the place to load
        /// all of your content.
        /// </summary>
        protected override void LoadContent()
        {
            // Create a new SpriteBatch, which can be used to draw textures.
            spriteBatch = new SpriteBatch(GraphicsDevice);

            // TODO: use this.Content to load your game content here
            texImageMenuItem = Content.Load<Texture2D>("Imageitem");
            font = Content.Load<SpriteFont>("gameFont");

            int X = 150;
            int Y = 240;

            for (int i = 0; i < TotalMenuItems; i++)
            {

                ImageMenuItem item = new ImageMenuItem(new Vector2(X + i * (texImageMenuItem.Width + 20), Y), texImageMenuItem, spriteBatch);
                item.Index = index++;

                Menu.Add(item);

            }

        }

        /// <summary>
        /// UnloadContent will be called once per game and is the place to unload
        /// all content.
        /// </summary>
        protected override void UnloadContent()
        {
            // TODO: Unload any non ContentManager content here
        }

        /// <summary>
        /// Allows the game to run logic such as updating the world,
        /// checking for collisions, gathering input, and playing audio.
        /// </summary>
        /// <param name="gameTime">Provides a snapshot of timing values.</param>
        protected override void Update(GameTime gameTime)
        {
            // Allows the game to exit
            if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed)
                this.Exit();

            // TODO: Add your update logic here
            Vector2 tapPosition = new Vector2();
            TouchCollection touches = TouchPanel.GetState();

            if (touches.Count > 0 && touches[0].State == TouchLocationState.Pressed)
            {

                tapPosition = touches[0].Position;
                foreach(ImageMenuItem item in Menu)
                {
                    item.Update(gameTime, tapPosition);
                    if (item.Tap)
                    {
                        currentIndex = item.Index;

                    }

                }

            }

                      base.Update(gameTime);
        }

        /// <summary>
        /// This is called when the game should draw itself.
        /// </summary>
        /// <param name="gameTime">Provides a snapshot of timing values.</param>
        protected override void Draw(GameTime gameTime)
        {
            GraphicsDevice.Clear(Color.CornflowerBlue);

            // TODO: Add your drawing code here
            spriteBatch.Begin();
            foreach (ImageMenuItem item in Menu)
            {
                item.Draw(gameTime);
            }

            spriteBatch.DrawString(font, "CurrentIndex: " + currentIndex.ToString(), new Vector2(0,0), Color.White);

            spriteBatch.End();

            base.Draw(gameTime);
        }
    }
} 
```

//ImageMenuItem.cs

```
namespace ImageMenu
{
    /// <summary>
    /// This is a game component that implements IUpdateable.
    /// </summary>
    public class ImageMenuItem : Microsoft.Xna.Framework.GameComponent
    {
        SpriteBatch spriteBatch;

        Texture2D texture;

        public Vector2 Position;

        public Vector2 Origin;

        public bool Tap;

        float timer = 0;

        const float MinScale = 0.8f;

        const float MaxScale = 1;

        float scale = 0.8f;

        public int index = 0;

        public Rectangle Bound
        {
            get
            {
                return new Rectangle(
                    (int) (Position.X - Origin.X * scale),
                    (int) (Position.Y - Origin.Y * scale),
                    (int) (texture.Width * scale),
                    (int) (texture.Height * scale));            
            }
        }

        public ImageMenuItem(Game game, Vector2 Location, Texture2D Texture, SpriteBatch SpriteBatch)
            : base(game)
        {
            // TODO: Construct any child components here

           {
               Position = Location;
               texture = Texture;
               spriteBatch = SpriteBatch;

               Origin = new Vector2 (texture.Width / 2, texture.Height / 2);
           }

        }

        /// <summary>
        /// Allows the game component to perform any initialization it needs to before starting
        /// to run.  This is where it can query for any required services and load content.
        /// </summary>
        public override void Initialize()
        {
            // TODO: Add your initialization code here

            base.Initialize();
        }

        /// <summary>
        /// Allows the game component to update itself.
        /// </summary>
        /// <param name="gameTime">Provides a snapshot of timing values.</param>
        /// 

  //  public override void Update(GameTime gameTime)
    //    {
            // TODO: Add your update code here
       //         base.Update(gameTime);
    //    }

            public void Update(GameTime gameTime, Vector2 tapPosition)
            {
            // if the tapped position within the text menu item bound,
            // set Tap to true and trigger the OnTap event
            Tap = Bound.Contains((int)tapPosition.X,
            (int)tapPosition.Y);
            // Accumulate the game elapsed time
            timer += (float)gameTime.ElapsedGameTime.TotalMilliseconds;

                 base.Update(gameTime);
            }
            public void Draw(GameTime gameTime)
            {

                if (Tap)
                {
                    if (scale <= MaxScale && timer > 200)
                    {
                        scale += 0.1f;

                        }
                        spriteBatch.Draw(texture, Position, null, Color.Red, 0f, Origin, scale, SpriteEffects.None, 0f);
                }
                    else
                    {

                        if (scale > MinScale && timer > 200)
                        {
                            scale -= 0.1f;

                        }
                            spriteBatch.Draw(texture, Position, null, Color.White, 0f, Origin, scale, SpriteEffects.None, 0f);

                    }

                }

        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T14:16:27.863

看起来您还没有为`ImageMenuItem`...提供构造函数

如果你想让你的代码工作，定义一个构造函数

```
public class ImageMenuItem {

    public ImageMenuItem(Vector2 vec, Texture2D tex, SpriteBatch sb){
    //assign
    }
} 
```

**编辑**

`Game`您定义了一个未设置的附加参数

```
public ImageMenuItem(Game game, Vector2 Location, Texture2D Texture, SpriteBatch SpriteBatch)
                     ^^^^^^^^ 
```

你必须传递一个游戏对象，试试

```
ImageMenuItem item = new ImageMenuItem(this, new Vector2(X + i * (texImageMenuItem.Width + 20), Y), texImageMenuItem, spriteBatch); // this is your Game 
```

# c# - 如何通过 C# 压缩 PowerPoint 中的图像？

> ID：16171584
> 
> 赞同：1
> 
> 时间：2013-04-23T14:10:40.857
> 
> 标签：c#, reporting-services, powerpoint

我正在使用 C# 在屏幕外生成一堆 SSRS 报告，然后为每个报告获取创建的图像并将它们粘贴到 PowerPoint 演示文稿中，有效地将所有报告整理到一个包中。虽然这很好用，但它会产生 23mb 的文件大小，仅用于 26 页的演示文稿。（我知道使用高 dpi 部分导致了这个怪物数量，但事实证明这是创建所需清晰度的图像所必需的）。

但是，当我在 PowerPoint 中手动保存此演示文稿时，文件大小会减小到大约 13mb。（这是压缩图片选项目标输出设置为 96dpi）。有没有办法可以命令 Powerpoint 从我的代码中以较低的分辨率保存所有图像，以便生成的文件更小？

`.Save()`（目前，在我的整个过程中，文件仅在被 SlidePart命令调用时被保存。）

## 更多信息

我正在以 600dpi 的屏幕外生成图像。当使用较低的分辨率时，打印时图像质量会下降，并且字母之间开始出现随机模糊伪影（我假设是由于某种形式的抗锯齿）

这会导致创建的图像在粘贴到 PowerPoint 时为 121 厘米 x 171 厘米，缩放比例为 16%。但是，一旦我在 PowerPoint 中查看此演示文稿并随后保存它，它会将图像大小缩小到 100% 比例的幻灯片大小，而不会降低质量。

我想问题是，我怎样才能指示我的程序执行这种调整大小的转换？我正在使用的代码如下

```
private void ReplaceSlideImage(SlidePart slidePart, byte[] imageData, int imageWidth, int imageHeight, ImagePartType imageType)
{
  // The ratio of the image size to the slide size
  // Set to 1.0 to make the image fill the slide, or < 1.0 to leave a border
  const double IMAGE_SCALE_FACTOR = 1.0;

  Slide theSlide = slidePart.Slide;
  double slideAspectRatio = 0.0;
  double imageAspectRatio = 0.0;

  System.IO.MemoryStream imageStream = null;

  // Look for the first embedded image on the slide.
  Drawing.Blip blip = theSlide.Descendants<Drawing.Blip>().FirstOrDefault();

  if (blip != null)
  {
    // Add the new image part.
    ImagePart newImagePart = slidePart.AddImagePart(imageType);

    imageStream = new MemoryStream(imageData);
    newImagePart.FeedData(imageStream);
    blip.Embed = slidePart.GetIdOfPart(newImagePart);

    // Scale the image to fit the slide
    SlideSize slideSize = m_file.PresentationPart.Presentation.Descendants<SlideSize>().First();
    Transform2D imageTransform = slidePart.Slide.Descendants<Transform2D>().First();

    slideAspectRatio = (double)slideSize.Cx / (double)slideSize.Cy;
    imageAspectRatio = (double)imageWidth / (double)imageHeight;

    if (imageAspectRatio > slideAspectRatio)
    {
      imageTransform.Extents.Cx = (Int64)(slideSize.Cx * IMAGE_SCALE_FACTOR);
      imageTransform.Extents.Cy = (Int64)(slideSize.Cx * IMAGE_SCALE_FACTOR / imageAspectRatio);
    }
    else
    {
      imageTransform.Extents.Cy = (Int64)(slideSize.Cy * IMAGE_SCALE_FACTOR);
      imageTransform.Extents.Cx = (Int64)(slideSize.Cy * IMAGE_SCALE_FACTOR * imageAspectRatio);
    }

    // Recentre the image to the middle of the slide 
    imageTransform.Offset.X = (slideSize.Cx / 2) - (imageTransform.Extents.Cx / 2);
    imageTransform.Offset.Y = (slideSize.Cy / 2) - (imageTransform.Extents.Cy / 2);

    theSlide.Save();

    // Dispose of the image stream
    imageStream.Dispose();
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T15:06:03.130

吃馅饼。吃馅饼。选一个。;-)

你是说你需要高 DPI 图像来保持质量。然后你问如何让 PowerPoint 降低 DPI。

您的问题尚不清楚，但听起来您可能对图像的初始分辨率有一些控制。如果是这样，为什么不在将它们插入 PowerPoint 之前以所需的 DPI 生成它们呢？

如果这不切实际，您可以设置一些注册表项来覆盖 PowerPoint 的默认压缩。请注意，您必须在启动 PowerPoint 之前进行 reg 更改，否则它们将无效。

这解释了如何打开/关闭默认压缩：PowerPoint 2007 和 2010 使图片模糊，丢失 GIF 动画 [http://www.pptfaq.com/FAQ00862_PowerPoint_2007_and_2010_make_pictures_blurry-_loses_GIF_animation.htm](http://www.pptfaq.com/FAQ00862_PowerPoint_2007_and_2010_make_pictures_blurry-_loses_GIF_animation.htm)

每个演示文稿都存储压缩 DPI 和是否丢弃图像数据。破解一个 PPTX 打开并查看 PPTX/ZIP 文件中 ppt 文件夹中的 presProps.xml。

# javascript - Jasmine 的 JavaScript 代码覆盖率

> ID：16171589
> 
> 赞同：43
> 
> 时间：2013-04-23T14:11:00.320
> 
> 标签：javascript, code-coverage, jasmine

我们计划在我们的项目中引入 JavaScript 单元测试，到目前为止，Jasmine 似乎是 JavaScript 更好的 BDD 单元测试框架之一。现在我想知道我们如何监控 JavaScript 代码的代码覆盖率。有没有我们可以使用的工具/插件？我们是一家微软商店，使用 .NET/MVC 4。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-04-24T06:29:51.000

有[伊斯坦布尔](https://github.com/gotwarlost/istanbul)代码覆盖率工具。而且，由于[伊斯坦布尔/Jasmine 有一个 grunt 插件，](https://github.com/maenu/grunt-template-jasmine-istanbul)它应该可以与 Jasmine 一起使用。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-09-18T17:50:50.240

快速谷歌搜索会发现这篇[博客文章](http://blog.johnryding.com/post/46757192364/javascript-code-coverage-with-phantomjs-jasmine-and)评估了一系列选项：[Istanbul](http://gotwarlost.github.io/istanbul/)、[Karma](http://karma-runner.github.io/)、[Blanket.js](http://blanketjs.org/)和[JSCover](http://tntim96.github.io/JSCover/)。

对于 Rails，[jasmine-coverage](https://github.com/firstbanco/jasmine-coverage)（基于[JSCoverage](http://siliconforks.com/jscoverage/manual.html)）gem 为您提供了一个 Rake 任务，可以生成不同格式的输出

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-06T13:44:05.547

可能有点晚了，但如果测试覆盖率很重要，你也可以试试[mocha](https://mochajs.org/)，它内置了对测试覆盖率的支持，声誉也很好，语法接近 jasmine，集成度很好（grunt、karma、. ..)

# python - 将 HTML 页面解析为 CSV - python

> ID：16171595
> 
> 赞同：0
> 
> 时间：2013-04-23T14:11:11.427
> 
> 标签：python, python-2.7, html-parsing

我正在尝试将我从网站解析的所有数据传输到 csv 文件中，但我遇到了几个问题：

1.即使我添加了字符编码，它仍然在excel中打印为HTML而不是纯文本：

例如

```
<option redirectvalue="/partfinder/Asus/All In One/E Series/ET10B">ET10B</option> 
```

2.它打印在一列而不是所有行

到目前为止，这是我的代码：

```
import string, urllib2, urlparse, csv, sys, codecs, cStringIO
from urllib import quote
from urlparse import urljoin
from bs4 import BeautifulSoup
from ast import literal_eval

class UnicodeWriter:
    """
    A CSV writer which will write rows to CSV file "f",
    which is encoded in the given encoding.
    """

    def __init__(self, f, dialect=csv.excel, encoding="utf-8", **kwds):
        # Redirect output to a queue
        self.queue = cStringIO.StringIO()
        self.writer = csv.writer(self.queue, dialect=dialect, **kwds)
        self.stream = f
        self.encoder = codecs.getincrementalencoder(encoding)()

    def writerow(self, row):
        self.writer.writerow([s.encode("utf-8") for s in row])
        # Fetch UTF-8 output from the queue ...
        data = self.queue.getvalue()
        data = data.decode("utf-8")
        # ... and reencode it into the target encoding
        data = self.encoder.encode(data)
        # write to the target stream
        self.stream.write(data)
        # empty queue
        self.queue.truncate(0)

    def writerows(self, rows):
        for row in rows:
            self.writerow(row)

changable_url = 'http://www.asusparts.eu/partfinder/Asus/All%20In%20One/E%20Series'
page = urllib2.urlopen(changable_url)
base_url = 'http://www.asusparts.eu'
soup = BeautifulSoup(page)

selects = []
redirects = []
model_info = []

#Opening csv writer
c = UnicodeWriter(open(r"asus_stock.csv", "wb"))
#Object reader
cr = UnicodeWriter(open(r"asus_stock.csv", "rb"))

print "FETCHING OPTIONS"
select = soup.find(id='myselectListModel')
selects.append(select)

for item in selects:
    print item.get_text()

options = select.findAll('option')

for option in options:
    if(option.has_attr('redirectvalue')):
       redirects.append(option['redirectvalue'])

for r in redirects:
    rpage = urllib2.urlopen(urljoin(base_url, quote(r)))
    s = BeautifulSoup(rpage)
    #print s

    #Fetching the main title for each specific model and printing it out
    print "FETCHING MAIN TITLE"
    maintitle = s.find(id='puffBreadCrumbs')
    model_info.append(maintitle)
    print maintitle.get_text()

    datas = s.find(id='accordion')

    a = datas.findAll('a')

    content = datas.findAll('span')

    print "FETCHING CATEGORY"
    for data in a:

        if(data.has_attr('onclick')):
            arguments = literal_eval('(' + data['onclick'].replace(', this', '').split('(', 1)[1])
            #model_info.append(arguments)
            print arguments #arguments[1] + " " + arguments[3] + " " + arguments[4] 

    # Retrieves Part number and Price        
    print "FETCHING DATA"
    for complete in content:

        if(complete.has_attr('class')):
            #model_info.append(complete['class'])

            print complete.get_text()

    print "FETCHING IMAGES"
    img = s.find('td')

    images = img.findAll('img')
    model_info.append(images)
    print images

c.writerows(selects) 
```

我怎样才能使它打印出来

> 1-文本而不是 HTML
> 
> 2 行而不是一列

**[编辑]** 这就是我希望 CSV 文件的显示方式和返回值的示例

```
"Brand Name"  "CategoryID"  "ModelID"    "Family"            "Name"                  "Part Number"  "Price"  "Image src"
    Asus    |   AC Adapter  |  ET1602  |  E Series | Power Cord 3P L:80CM,UK(B) |    14G110008350   |14.77  |  image src 
```

**[新编辑]**

这些是打印值的输出：

```
print "FETCHING OPTIONS"
select = soup.find(id='myselectListModel')
selects.append(select)

for item in selects:
    print item.get_text() 
```

产量：

```
ET10B ET1602 ET1602C etc.. 
```

获取主标题：

```
print "FETCHING MAIN TITLE"
maintitle = s.find(id='puffBreadCrumbs')
model_info.append(maintitle)
print maintitle.get_text() 
```

产量：

> 华硕 - 多合一 - E 系列 - ET10B

获取类别

```
datas = s.find(id='accordion')

a = datas.findAll('a')

content = datas.findAll('span')

print "FETCHING CATEGORY"
for data in a:

    if(data.has_attr('onclick')):
        arguments = literal_eval('(' + data['onclick'].replace(', this', '').split('(', 1)[1])
        #model_info.append(arguments)
        print arguments 
```

产量：

```
FETCHING CATEGORY
('Asus', 'AC Adapter', 'ET10B', '6941', 'E Series')
('Asus', '04G265003580')
('Asus', '14G110008340')
('Asus', 'Bracket', 'ET10B', '7138', 'E Series')
('Asus', 'Cable', 'ET10B', '6983', 'E Series')
('Asus', 'Camera', 'ET10B', '6985', 'E Series')
('Asus', 'Cooling', 'ET10B', '6999', 'E Series')
('Asus', 'Cover', 'ET10B', '6984', 'E Series') 
etc.. 
```

获取名称：

```
print "FETCHING NAME"
name = s.find('b').get_text()
print name 
```

产量：

> 电源适配器 65W19V 3PIN

获取零件编号和价格

```
print "FETCHING PART NUMBER AND PRICE (inc. VAT)"
for complete in content:

   if(complete.has_attr('class')):
        #model_info.append(complete['class'])
        print complete.get_text() 
```

产量：

```
FETCHING PART NUMBER AND PRICE (inc. VAT)
Part number: 04G265003580

Remote stock
38.09:- EUR 
```

获取图像

```
print "FETCHING IMAGES"
img = s.find('td')

images = img.findAll('img')
model_info.append(images)
print images 
```

产量：

```
FETCHING IMAGES
[<img alt="" src="/images/Articles/thumbs/04G265003580_thumb.jpg"/>] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:16:06.687

您需要`selects`进一步处理列表；与其将整个列表写入 CSV 文件，不如仅将`option`标签写入 CSV 文件：

```
for select in selects:
    c.writerow([opt.string for opt in select.find_all('option')]) 
```

# log4net - Log4Net 数据库存储 - 所有字段都包含消息值

> ID：16171599
> 
> 赞同：0
> 
> 时间：2013-04-23T14:11:23.667
> 
> 标签：log4net

我使用 AdoNetAppender 激活 log4net 以将日志存储在 Sql Server 数据库中。

执行后，我看到所有参数（日期时间除外）都填满了消息值。

我确实在代码中自己创建了适配器（没有 xml 配置），所以我假设我可能忘记调用一种方法来使模式映射工作？

```
 var root = ((Hierarchy)LogManager.GetRepository()).Root;

    root.AddAppender(this.CreateDBAppender());
    root.Repository.Configured = true;

    this.log = LogManager.GetLogger("MyLogger");

private IAppender CreateDBAppender()
{
    ...
    RawLayoutConverter layoutConverter = new RawLayoutConverter();

    var databaseAppender = new AdoNetAppender
    {
        Name = "MyLogger",
        ConnectionString = "...",
        CommandText = @"INSERT INTO [Log] ([DateTime], [Exception], [Host], [Level], [Logger], [Message], [Severity], [Thread]) 
                                        VALUES (@logdate, @exception, @host, @level, @logger, @message, @severity, @thread)",
        CommandType = System.Data.CommandType.Text,
        ConnectionType = "System.Data.SqlClient.SqlConnection"
    };

    databaseAppender.AddParameter(new AdoNetAppenderParameter
        {
            ParameterName = "@logdate",
            DbType = System.Data.DbType.DateTime,
            Layout = new RawTimeStampLayout()
        });

    databaseAppender.AddParameter(new AdoNetAppenderParameter
    {
        ParameterName = "@message",
        DbType = System.Data.DbType.String,
        Size = 4000,
        Layout = (IRawLayout)layoutConverter.ConvertFrom(new PatternLayout
        {
            ConversionPattern = "%m"
        })
    });

    databaseAppender.AddParameter(new AdoNetAppenderParameter
        {
            ParameterName = "@host",
            DbType = System.Data.DbType.String,
            Size = 50,
            Layout = (IRawLayout)layoutConverter.ConvertFrom(new PatternLayout
                {
                    ConversionPattern = "%property{host}"
                })
        });

    databaseAppender.AddParameter(new AdoNetAppenderParameter
        {
            ParameterName = "@level",
            DbType = System.Data.DbType.String,
            Size = 50,
            Layout = (IRawLayout)layoutConverter.ConvertFrom(new PatternLayout
                {
                    ConversionPattern = "%level"
                })
        });

    //// more parameters ...

    databaseAppender.ActivateOptions();
    return databaseAppender;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T15:04:34.950

我弄清楚是怎么回事。我总是收到消息的原因是因为它使用了 PatternLayout 类中配置的默认 ConversionPattern

```
public const string DefaultConversionPattern = "%message%newline"; 
```

看起来在代码中设置 ConversionPattern 属性没有任何影响。您需要通过 PatternLayout 类的构造函数提供模式。

```
 databaseAppender.AddParameter(new AdoNetAppenderParameter
        {
            ParameterName = "@level",
            DbType = System.Data.DbType.String,
            Size = 50,
            Layout = (IRawLayout)layoutConverter.ConvertFrom(new PatternLayout("%-5p"))
        }); 
```

# php - 如果站点出现错误，如何清除缓存

> ID：16171601
> 
> 赞同：3
> 
> 时间：2013-04-23T14:11:26.643
> 
> 标签：php, caching

标题可能有点糟糕或具有误导性，但这是我的问题：

有没有一种好方法可以确保如果有人过去访问过我的网站，然后在一段时间后重新访问它，旧内容将不会显示而新内容会在那里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T14:13:28.570

我在我的 php 中添加了这样的内容 - 在你写出其他任何内容之前一定要发送标题......

```
 header("Cache-Control: no-cache, must-revalidate"); 
  header("Expires: Sat, 26 Jul 1997 05:00:00 GMT"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T14:27:38.623

可能显示旧内容的原因是它已被缓存。并且用户的浏览器可能会从缓存中获取内容。如果它没有被缓存，那么用户每次在浏览器中打开网站时都会得到新的内容。

我猜你想有一个选项来强制用户的浏览器显示更新的页面，即使浏览器在缓存中有页面。该页面仍可能被缓存，但是当您有新版本时，您希望用户看到新版本。

我建议考虑以下方法。您可以在站点的页面 URL 中添加参数，并在内容更改时更改此参数。例如：

[http://example.com/code.js?version=22](http://example.com/code.js?version=22)

我将这种方法用于 CSS 和 JS 文件。通常它们应该被缓存很长时间，可能是几周或几个月。但是当文件更新时，用户应该得到新版本。

这与正常的缓存控制无关。但是当您希望文件和页面被缓存并控制何时应该更新它们时，可以解决任务。

请让我知道，如果你有任何问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T14:15:43.330

使用 http 标头条目来关闭缓存：

```
<head>
    <meta http-equiv="Expires" content="0" />
    <meta http-equiv="Cache-Control" content="no-store, no-cache, must-revalidate" />
    <meta http-equiv="Cache-Control" content="post-check=0, pre-check=0" />
    <meta http-equiv="Pragma" content="no-cache" />
</head> 
```

# json - 日期字段为空时的Struts Json插件日期转换

> ID：16171608
> 
> 赞同：0
> 
> 时间：2013-04-23T14:11:36.100
> 
> 标签：json, struts2, struts2-json-plugin

我有 Json 插件无法将我的空字符串转换为空日期对象的问题。在 spring mvc 中，我的控制器中有 initbinder 来处理这个问题。如何使用 struts json 插件实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T02:32:50.987

我更改了 JS 前面的代码，如果日期字段为空，则将我的 json 响应设置为 null，这解决了我的问题

谢谢

# java - 动态更新 swing JXMapKit 中的标记

> ID：16171611
> 
> 赞同：2
> 
> 时间：2013-04-23T14:11:47.730
> 
> 标签：java, swing, jxmapkit

我正在寻找一种以编程方式将航点添加到使用`JXMapKit`（在 Java Swing 工具包上运行）显示的地图的方法。我想在列表中提供地理坐标列表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T20:02:31.080

您必须提供`Waypoints`通过 a`WaypointPainter`并将此绘制器传递给 JXMapViewer。默认情况下`WaypointPainter`接受 a `Set<Waypoint>`，所以我们可以`WaypointPainer`用我们自己的接受 a 的类来扩展`List`。

```
import org.jdesktop.swingx.JXMapKit;
import org.jdesktop.swingx.JXMapViewer;
import org.jdesktop.swingx.mapviewer.DefaultWaypoint;
import org.jdesktop.swingx.mapviewer.Waypoint;
import org.jdesktop.swingx.mapviewer.WaypointPainter;

import javax.swing.*;
import java.util.ArrayList;
import java.util.HashSet;
import java.util.List;

class CustomPainter extends WaypointPainter<JXMapViewer> {
    public void setWaypoints(List<? extends Waypoint> waypoints) {
        super.setWaypoints(new HashSet<Waypoint>(waypoints));
    }
}

public class Waypoints {
    public static void main(String[] args) {
        List<DefaultWaypoint> waypoints = new ArrayList<DefaultWaypoint>();
        waypoints.add(new DefaultWaypoint(51.5, 0));

        JXMapKit jxMapKit = new JXMapKit();
        jxMapKit.setDefaultProvider(JXMapKit.DefaultProviders.OpenStreetMaps);
        CustomPainter painter = new CustomPainter();
        painter.setWaypoints(waypoints);
        jxMapKit.getMainMap().setOverlayPainter(painter);

        final JFrame frame = new JFrame();
        frame.add(jxMapKit);
        frame.setSize(300, 300);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setLocationRelativeTo(null);
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                frame.setVisible(true);
            }
        });
    }
} 
```

# c++ - 使用 websocketpp 库连接到 c++ websocket 服务器

> ID：16171612
> 
> 赞同：2
> 
> 时间：2013-04-23T14:11:48.933
> 
> 标签：c++, websocket++

我在 Ubuntu 上工作，我正在用 c++ 编写一个使用 websocket++ 库的服务器，它非常适合来自浏览器的传入 websocket 连接（我在那里使用了 javascript）。

现在我想做一些性能测试并连接很多自动化的“假”客户端。

为此，我想编写一个可以多次启动并连接到该服务器的程序。为此，我尝试了以下代码：

```
#include "websocketpp/src/roles/client.hpp"
#include "websocketpp/src/websocketpp.hpp"

#include <boost/asio.hpp>
#include <boost/bind.hpp>
#include <boost/thread.hpp>

#include "FakeClient.h"

using boost::asio::ip::tcp;
using websocketpp::client;

FakeClient::FakeClient()
{
    thisPointer = boost::shared_ptr<FakeClient>(this);

    client endpoint(thisPointer);

    endpoint.alog().unset_level(websocketpp::log::alevel::ALL);
    endpoint.elog().unset_level(websocketpp::log::elevel::ALL);

    endpoint.elog().set_level(websocketpp::log::elevel::RERROR);
    endpoint.elog().set_level(websocketpp::log::elevel::FATAL);

    endpoint.connect("ws://localhost:9001/");

    boost::thread t(&FakeClient::run, *this);

    t.join();
}

void FakeClient::run()
{
    while(true)
    {
        // send stuff here
        usleep(100);
    }
} 
```

现在，当服务器启动并且假客户端尝试连接时，我只收到以下错误：

```
2013-04-23T16:00:02 [2] fail_on_expire timer expired with message: Timeout on WebSocket handshake 
```

但是，当服务器未启动时，不会出现错误消息，因此肯定会发生某种连接。但我无法弄清楚我做错了什么。甚至可以通过 websocket++ lib 轻松连接 2 个二进制程序吗？

为了获得最佳性能测试结果，我猜应该使用 websockets 来在服务器和假客户端之间进行通信。

谢谢您的帮助，

孔斯基

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-23T18:40:04.553

WebSocket++ 作者在这里。WebSocket++ 绝对能够自言自语。我创建了一些示例来演示如何执行此操作。看看以下两个（注意：这些示例使用最新的 0.3.x 版本的库）。

Telemetry Client：此客户端连接到指定的 WebSocket 服务器并每秒发送一次消息。 [https://github.com/zaphoyd/websocketpp/blob/experimental/examples/telemetry_client/telemetry_client.cpp](https://github.com/zaphoyd/websocketpp/blob/experimental/examples/telemetry_client/telemetry_client.cpp)

打印服务器：此服务器侦听连接并打印接收到的任何消息。 [https://github.com/zaphoyd/websocketpp/blob/experimental/examples/print_server/print_server.cpp](https://github.com/zaphoyd/websocketpp/blob/experimental/examples/print_server/print_server.cpp)

# mongodb - 如何将生产流星 js 数据库与开发同步？

> ID：16171613
> 
> 赞同：3
> 
> 时间：2013-04-23T14:11:50.410
> 
> 标签：mongodb, meteor, data-synchronization

我刚刚进入 Meteor，对 MongoDB 也同样陌生。我习惯于同步 MySQL dbs（生产与开发）以使用近乎实时的数据运行新功能的测试。目前，我不知道如何用流星做到这一点。

从这个（[http://docs.meteor.com/#meteormongo](http://docs.meteor.com/#meteormongo)）我收集到我可以使用 mongoDB shell 来处理我的本地数据库，但是通过查看[http://docs.mongodb.org/manual/mongo/](http://docs.mongodb.org/manual/mongo/)，我还没有弄清楚这是否是我应该遵循的为 Meteor 同步内容的路径。

有没有人设置了一个相对简单的程序来同步 Meteor JS 数据库，或者你能指出我可能帮助我加快速度的资源吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T14:41:49.430

不确定我是否理解这个问题，但是：

1.  `MONGO_URL`您可以通过设置环境变量来选择您正在使用的数据库
2.  您可以从一个数据库[转储](http://docs.mongodb.org/manual/reference/mongodump/)数据并将其加载到另一个数据库（如果这是您想要做的）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-13T01:36:46.373

我编写了一个用于下载 Production Meteor DB 的快速脚本。[流星下载](https://github.com/AlexeyMK/meteor-download)。简单如`./download.sh origin.meteor.com`

它还没有提供 2 路同步，但如果你愿意的话，这应该不会有太大的机会。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-15T00:29:28.143

# 查看[mongo-sync](https://github.com/sheharyarn/mongo-sync)

* * *

这是我为自己编写的脚本，当我不得不不断地将本地`MongoDB`数据库复制到我的生产数据库中或从我的生产数据库中复制出一个项目时（我知道这很愚蠢）。

将数据库详细信息放入 中后`config.yml`，您可以使用两个简单的命令开始同步：

```
./mongo-sync push       # Push DB to Remote
./mongo-sync pull       # Pull DB to Local 
```

*如果您在某个项目中使用它，最好添加`config.yml`到`.gitignore`*

* * *

![mongo-同步演示 gif](https://i.imgur.com/hg6hwLk.gif)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-23T15:22:44.660

有几种有趣的方法可以做到这一点。

我想到的第一种方法是使用副本。

您将拥有一个开发服务器数据库；我指的是专用于容纳开发数据库（例如 AWS 上的云实例）的整个服务器。一旦您希望替换该开发实例，您只需从您的活动集中取出一个成员并将其作为独立实例启动，以替换您的开发实例。

另一种方法是将`mongod`目录复制到某个地方并启动`mongod`. 最简单的方法，但可能不是最好的，特别是如果您有一个大型分布式数据库。

另一种方法是使用`mongodump`将数据从数据库中转储出来并将其还原到您的开发机器上。

后两种是很常用的方法，第一种是我脑子里一直在想的一种。

# java - 如何最大化连接数？

> ID：16171617
> 
> 赞同：0
> 
> 时间：2013-04-23T14:12:05.887
> 
> 标签：java, tomcat

我使用服务器 Tomcat + HttpServlet + hibernate。我测试了服务器的性能，为此，我创建了一个模拟运行 500 个客户端的应用程序，每个客户端以周期性地重复 HTTP 请求到服务器。 **当客户端数量达到 350 时，我开始收到错误**

`org.apache.http.conn.HttpHostConnectException: Connection to http://192.168.0.122:8080 refused`

请告诉我，我该如何解决这个问题？- 将客户数量增加到 5,000

# scala - scalaz 蹦床和 IO

> ID：16171618
> 
> 赞同：2
> 
> 时间：2013-04-23T14:12:06.803
> 
> 标签：scala, scalaz, scalaz7

这个问题与另一个[问题](https://stackoverflow.com/questions/16138096/how-to-use-io-with-scalaz7-iteratees-without-overflowing-the-stack)有关，但简化为一个更简单的情况：

我假设以下进口：

```
import scalaz._, Scalaz._
import Free._, effect._ 
```

我有以下生成器：

```
val fromOneIO: () => IO[Int] = {
  var i = 0; () => { i += 1; IO(i) }
} 
val fromOne: () => Int = {
  var i = 0; () => { i += 1; i }
} 
```

以及以下非尾递归定义：

```
def rec(i: Int): Int = {
  if (i == 0) {
    fromOne()
  } else {
    rec(i - 1) + fromOne()
  }
}
def rec1(i: Int): Trampoline[Int] = {
  if (i == 0) {
    Return(fromOne())
  } else {
    suspend {
      for {
        a <- rec1(i - 1)
        b <- Return(fromOne()): Trampoline[Int]
      } yield a + b
    }
  }
}
def recio(i: Int): Trampoline[IO[Int]] = {
  if (i == 0) {
    Return(fromOneIO())
  } else {
    suspend {
      for {
        ioa <- recio(i - 1)
        iob <- Return(fromOneIO()): Trampoline[IO[Int]]
      } yield {
        for (a <- ioa; b <- iob) yield a + b
      }
    }
  }
} 
```

结果是：

```
rec(100) // overflows for arg 10000
rec1(10000).run // works
recio(10000).run.unsafePerformIO() //overflows 
```

如何设法使 IO map/flatMap 也被蹦床？看来我在第二个内部创建了其他嵌套堆栈以供理解。我是否需要编写一个`TrampolineT`将使用`unsafePerformIO`提取的 io 值并将其重新包装为挂起的代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T13:39:13.430

所以[`IO(_)`](https://github.com/scalaz/scalaz/blob/series/7.0.x/effect/src/main/scala/scalaz/effect/IO.scala#L136)已经被[蹦床](https://github.com/scalaz/scalaz/blob/series/7.0.x/effect/src/main/scala/scalaz/effect/IO.scala#L221)了，值得。除了 folone 的建议之外，我还可以通过更改第二个来避免溢出，*如下*所示：

```
val s = for (a <- ioa; b <- iob) yield a + b
val s1 = s.unsafePerformIO()
IO(s1) 
```

或者像这样：

```
IO(for (a <- ioa; b <- iob) yield a + b).flatMap(identity) 
```

也`IO(_)`接受一个按名称参数，所以`IO(expr)`和`val e = expr; IO(e)`不一样。这会溢出！

```
val s = for (a <- ioa; b <- iob) yield a + b
IO(s.unsafePerformIO()) 
```

因此，尽管这不是一个非常令人满意的答案，但似乎在可能的情况下使用应用程序或包装在另一个应用程序中`IO`并展平将是解决堆栈问题的解决方法。

# mysql - mysql 函数成功执行但在查询状态时找不到

> ID：16171623
> 
> 赞同：0
> 
> 时间：2013-04-23T14:12:37.777
> 
> 标签：mysql

我有一个mysql循环查询如下：

```
DELIMITER $$    

DROP function IF EXISTS getTestAccounts $$;

CREATE FUNCTION getTestAccounts(endTime INT) RETURNS INT
BEGIN
    DECLARE x,y INT;
    DECLARE c1,result varchar(255);
    SET c1 = '';
    SET result = '';
    SET x = endTime;
    SET y = 4;
    sloop:LOOP
       SELECT count(*) INTO c1 FROM `accounts` where `lifeEnd` <= x;
       IF y > 0 THEN
          SET x = x-3600;
          SET y = y - 1;
          SET result = CONCAT(result,c1,',');
          ITERATE sloop;
       ELSE
           LEAVE sloop;
       END IF;  
    END LOOP;
    RETURN result;
END  $$
DELIMITER ; 
```

它执行成功。在制作一个

```
SELECT getTestAccounts(1368193391) 
```

它显示`db.getTestAccounts does not exist`

为了交叉检查这个我用

```
SHOW FUNCTION STATUS; 
```

它列出了很久以前创建的所有函数，但没有列出当前函数......

花了将近一天的时间不知道错误发生在哪里.....谁能告诉我为什么它没有在数据库中创建...谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:50:36.620

你的问题：

```
DROP function IF EXISTS getTestAccounts $$; 
```

删除行尾的分号，它应该可以工作。

但是，当按现在的方式执行脚本时，您应该会收到错误消息。

# java - 从 IFeatureClass 转换为 ISchemaLock (ARCGIS)

> ID：16171625
> 
> 赞同：0
> 
> 时间：2013-04-23T14:12:39.820
> 
> 标签：java, arcgis

我在 Eclipse 中使用 ARCGIS Java SDK 进行编程。

我需要将**IFeatureClass**转换为**ISchemalock**。这个演员表应该是允许的。有一个这个演员的例子：http: [//resources.esri.com/help/9.3/arcgisengine/java/doc/b22267cb-642c-11dc-9ca3-0b35f906bb2e.htm](http://resources.esri.com/help/9.3/arcgisengine/java/doc/b22267cb-642c-11dc-9ca3-0b35f906bb2e.htm)

但是，当我尝试在我的代码中执行此转换时，会出现异常：

*线程“主”java.lang.ClassCastException 中的异常：com.esri.arcgis.geodatabase.IFeatureClassProxy 无法转换为 com.esri.arcgis.geodatabase.ISchemaLock*

你能在 IFeatureClass 上做这个演员吗？这是执行此操作的代码：

```
//Attempt to acquire an exclusive schema lock on the feature class.
ISchemaLock schemaLock = (ISchemaLock)featureClass; 
```

如果您能在您的一个程序中尝试这行简单的代码，我将不胜感激。

让我知道...

# vb.net - LINQ where clauses with different fields

> ID：16171626
> 
> 赞同：0
> 
> 时间：2013-04-23T14:12:40.730
> 
> 标签：vb.net, linq, where

I'm trying to change on which field the Where clause will be applied depending on a Boolean value received by the function. So far I have this:

```
Public Function SomeFunction(ByVal value As String, Optional bValueIsString As Boolean = False) As JsonResult
    ...
    Dim q = (From t In table
                 Where If(bValueIsString, t.Desc=value, t.Id=value)
                 Select New With {.Id,
                                  .LongDescription,
                                  .Desc)})
    ...
End Function 
```

But I keep receiving:

```
Conversion from string "someString" to type 'Integer' is not valid. 
```

.. when I set bValueIsString to true.

-

I know about ScottGu's Dynamic LINQ Library, but I would rather not use any external component if possible..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T14:24:22.150

This is because operands two and three to the IF function must have the same type, or be implicitly convertible, so that they may be automatically converted. In this case, the operands are being converted to integers, and `value` doesn't contain a valid value for the conversion. Changing your code to explicitly compare strings should fix the issue:

```
If(bValueIsString, t.Desc=value, t.Id.ToString()=value) 
```

See the comments on [this answer](https://stackoverflow.com/a/7246094/1046207) for further reading.

# hibernate - session.close() 连接后仍然与数据库处于活动状态

> ID：16171627
> 
> 赞同：3
> 
> 时间：2013-04-23T14:12:51.253
> 
> 标签：hibernate, dbconnection, hibernate-session

我正在使用swing和hibernate。现在对于检索连接，我正在使用`sessionFactory.openSession()`. 完成数据库活动后，我将关闭同一会话`session.close()`。现在的问题是，当我继续使用我的应用程序时，经过一些调用，应用程序抛出异常

```
40503 [AWT-EventQueue-0] WARN org.hibernate.cfg.SettingsFactory - Could not obtain connection to query metadata
java.sql.SQLException: Io exception: Connection refused(DESCRIPTION=(TMP=)(VSNNUM=169869568)(ERR=12519)(ERROR_STACK=(ERROR=(CODE=12519)(EMFI=4))))
    at oracle.jdbc.dbaccess.DBError.throwSqlException(DBError.java:134)
    at oracle.jdbc.dbaccess.DBError.throwSqlException(DBError.java:179)
    at oracle.jdbc.dbaccess.DBError.throwSqlException(DBError.java:334)
    at oracle.jdbc.driver.OracleConnection.<init>(OracleConnection.java:418)
    at oracle.jdbc.driver.OracleDriver.getConnectionInstance(OracleDriver.java:521)
    at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:325)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at org.hibernate.connection.DriverManagerConnectionProvider.getConnection(DriverManagerConnectionProvider.java:133)
    at org.hibernate.cfg.SettingsFactory.buildSettings(SettingsFactory.java:113)
    at org.hibernate.cfg.Configuration.buildSettingsInternal(Configuration.java:2863)
    at org.hibernate.cfg.Configuration.buildSettings(Configuration.java:2859)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1870) 
```

在使用应用程序时，我使用以下查询监控活动数据库连接

```
select count(*) from v$session 
```

我知道连接数正在增加，并且在一些连接后数据库停止提供新的连接数。

我不知道如何使用休眠关闭与数据库的连接，因为`session.close()`这样做没有用。

# unit-testing - 单元测试具有“withFormat”和 html 内容类型的控制器会给出空响应，除非显式调用“render”

> ID：16171629
> 
> 赞同：2
> 
> 时间：2013-04-23T14:12:56.330
> 
> 标签：unit-testing, grails

在 Grails 2.1.1 应用程序中，我正在尝试对使用“withFormat”将响应呈现为 HTML 或 JSON 的控制器进行单元测试。然而，对 HTML 内容类型的响应总是会在我的测试中产生一个空响应，除非我将它包装在一个闭包中并显式调用“render”。对于 JSON，它会发回预期的响应。

控制器：

```
import grails.converters.JSON

class TestController {
def formatWithHtmlOrJson() {
    withFormat {
        html someContent:"should be HTML" 
        json {render new Expando(someContent:"should be JSON")  as JSON}
    }
} 
```

测试：

```
@TestFor(TestController)
class TestControllerTests {
    void testForJson() {
        response.format = "json"
        controller.formatWithHtmlOrJson()
        println("resp: $response.contentAsString")
        assert response.json.properties.someContent == "should be JSON"
    }

    void testForHtml() {
        response.format = "html"
        controller.formatWithHtmlOrJson()
        println("resp: $response.contentAsString")
        // fails here, response is empty
        assert response.text
        //never gets this far
        assert response.contentAsString.contains("HTML")
    }
} 
```

如上所述，对于 JSON，这是可行的，但对于 HTML，我总是得到一个空响应，除非我将 html 检查包装在一个闭包中并显式调用渲染，如下所示：

```
withFormat {
    html {
        render someContent:"should be HTML" 
    } 
```

文档建议我不需要这样做，例如：

```
withFormat {
    html bookList: books
    js { render "alert('hello')" }
    xml { render books as XML }
} 
```

来自[http://grails.org/doc/2.2.x/ref/Controllers/withFormat.html](http://grails.org/doc/2.2.x/ref/Controllers/withFormat.html)

令人沮丧的是，关于测试的 grails 文档提到了 withFormat 的使用，但只给出了测试 xml/json 的示例，而没有给出 html 响应的示例。

[http://grails.org/doc/latest/guide/testing.html#unitTestingControllers](http://grails.org/doc/latest/guide/testing.html#unitTestingControllers)

谁能解释这种差异，或者我如何在测试中解决它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T15:10:11.093

终于想通了。

在文档（[http://grails.org/doc/latest/guide/testing.html#unitTestingControllers ）中，它提到了在](http://grails.org/doc/latest/guide/testing.html#unitTestingControllers)*测试返回地图的操作*下测试控制器响应的这种方式 ：

```
import grails.test.mixin.*
@TestFor(SimpleController)
class SimpleControllerTests {

    void testShowBookDetails() {
        def model = controller.showBookDetails()
        assert model.author == 'Alvin Plantinga' 
    }
} 
```

同样的方法适用于使用*withFormat*的控制器方法。

所以对于我上面的原始示例：

```
withFormat {
    html someContent:"should be HTML" 
... 
```

测试变为：

```
void testForHtml() {
    response.format = "html"
    def model = controller.formatWithHtmlOrJson()
    assert model.someContent == "should be HTML"
} 
```

该文档有点令人困惑，因为*withFormat*部分没有提到这种方法。

值得注意的是，如果其他人遇到这种情况，如果 html 块在闭包内，则不会返回映射，而是返回映射条目的值，因此对于控制器代码：

```
withFormat{
    html{
        someContent:"should be HTML" 
    }... 
```

测试检查变为：

```
 assert model == "should be HTML" 
```

或者，如果您可以修改控制器代码，则在地图中返回结果可让您使用点符号来检查元素值。对于此代码：

```
 withFormat {
    html {
        [someContent:"should be HTML"] 
    }.... 
```

测试检查是：

```
assert model.someContent == "should be HTML" 
```

另外值得注意的是，在我的原始示例中，**没有**对 HTML 类型使用闭包，您**不能**将值作为映射返回 - 这会导致编译错误。

```
//Don't do this, won't compile
    withFormat {
        html [someContent:"should be HTML"]         
    ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T15:59:14.337

尝试

```
withFormat {
    html {
        println("html")
        [new Expando(test:"html")]
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T04:52:48.040

文档中提供的建议不使用 a`closure`并且具有这种措辞“ *Grails 搜索名为 grails-app/views/book/list.html.gsp 的视图，如果未找到则回退到 grails-app/views/book/list .gsp* ”。

当您使用 a`closure`时，`html`我们必须将 a 返回`model`到操作或`render`内容。因为在这种情况下，您正在使用`html` `closure`必须呈现的内容。

使用闭包（您的用例已通过）

```
withFormat{
   html {
      test: "HTML Content" //This will not render any content
      render(test: "HTML Content") //This has to be used
   }
} 
```

# java - 声明 int 的最大值

> ID：16171631
> 
> 赞同：-1
> 
> 时间：2013-04-23T14:13:06.263
> 
> 标签：java, int

我正在设计一个程序来在 JPanel 内绘制随机框，有没有办法声明整数最大值？该程序说它必须是随机的高度和宽度，但我必须留在 JPanel 的范围内。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T15:45:59.653

```
Integer.MAX_VALUE 
```

当然，除非您尝试设置自定义最大值。然后你需要阅读 Random 文档来做这样的事情。

```
public class TestingStuff {
  public final int MAX;

  TestingStuff() {    
    Random r = new Random();
    MAX = r.nextInt(Math.abs(r.nextInt()));
    System.out.println(MAX);
  }

  public static void main(String args[]) {
    TestingStuff t = new TestingStuff();    
  }
} 
```

在创建它时，我在将 MAX 声明为静态并对其进行初始化时遇到了问题。似乎您可以将其设为静态或最终的。

# osqa - 像 OSQA 这样的 Python 问答脚本

> ID：16171632
> 
> 赞同：1
> 
> 时间：2013-04-23T14:13:07.870
> 
> 标签：osqa

有没有人在 Python 中的问答脚本上有一些网址，这些网址仍然存在并得到维护。OSQA 似乎已经死了。

我听说 Quora-Python 的克隆，但它也死了。

任何帮助将不胜感激。

# wcf - 如果输入具有所需属性的空节点，则返回 WCF 捕获错误

> ID：16171634
> 
> 赞同：1
> 
> 时间：2013-04-23T14:13:13.397
> 
> 标签：wcf, unity-container, wcf-binding, wcf-behaviour

我创建了一个使用 Unity/Unity.WCF/Unity.Interceptors 进行故障处理的 WCF 服务。

现在，如果我执行 SOAP 请求并且不在请求中包含所需的节点 - 服务方法执行 - 我抛出异常并且我的拦截器将其变成 SOAP 错误。

例子：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:v10="http://services.....nl/.../Schemas/v10">
   <soapenv:Header/>
   <soapenv:Body>
      <v10:TheRequestObject>
      </v10:TheRequestObject>
   </soapenv:Body>
</soapenv:Envelope> 
```

我可以使用调试器单步执行服务调用 - 在验证请求对象时抛出异常，并且我的拦截器将其变成 SOAP 错误：

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
   <s:Body>
      <s:Fault>
         <faultcode>s:Client</faultcode>
         <faultstring xml:lang="nl-NL">Error msg</faultstring>
         <detail> ...
         </detail>
      </s:Fault>
   </s:Body>
</s:Envelope> 
```

现在 - 我们的测试人员为所需参数提供了一个空节点，如下所示：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:v10="http://services.....nl/.../Schemas/v10">
   <soapenv:Header/>
   <soapenv:Body>
      <v10:WagenlijstRequest>
         <v10:RequiredInteger></v10:RequiredInteger>
      </v10:WagenlijstRequest>
   </soapenv:Body>
</soapenv:Envelope> 
```

并且该服务返回以下错误消息：

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
   <s:Body>
      <s:Fault>
         <faultcode xmlns:a="http://schemas.microsoft.com/net/2005/12/windowscommunicationfoundation/dispatcher">a:InternalServiceFault</faultcode>
         <faultstring xml:lang="nl-NL">The server was unable to process the request due to an internal error.  For more information about the error, either turn on IncludeExceptionDetailInFaults (either from ServiceBehaviorAttribute or from the &lt;serviceDebug> configuration behavior) on the server in order to send the exception information back to the client, or turn on tracing as per the Microsoft .NET Framework SDK documentation and inspect the server trace logs.</faultstring>
      </s:Fault>
   </s:Body>
</s:Envelope> 
```

问题是 - 这个请求永远不会到达我的服务，所以我不能对这个错误消息做任何事情。我如何影响这里发生的事情？

这让我想起了 MVC 中的一些模型绑定——我可以影响绑定行为吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T10:22:58.367

好，我知道了。这是您需要做的：

*   阅读这篇文章：http: [//msdn.microsoft.com/en-us/magazine/cc163302.aspx](http://msdn.microsoft.com/en-us/magazine/cc163302.aspx)
*   创建操作属性并将其放置在服务中的方法之上
*   用类似的东西实现 IOperationBehavior

    public void ApplyDispatchBehavior（OperationDescription operationDescription，DispatchOperation dispatchOperation） { dispatchOperation.Formatter = new ExceptionHandlingFormatter(); }

*   创建实现 IDispatchMessageFormatter 的格式化程序并执行以下操作：

    ```
    public void DeserializeRequest(Message message, object[] parameters)
    {
        var serializer = new XmlSerializer(typeof(WagenlijstRequest), "http://services.prorail.nl/OVGS/Schemas/v10");

        try
        {
            // Attempts to deserialize the object given the message body
            var result = serializer.Deserialize(message.GetReaderAtBodyContents());
            parameters[0] = new SomeRequest(result as AnotherType);
        }
        catch (Exception e)
        {
            // In case of an exception - wraps the exception in a Dutch one + logs it
            var exception = new RequestDeserializationException(e);
            this.log.Fatal(string.Format("Error while deserializing the following request:\r\n{0}\r\nException:\r\n{1}", message, exception), exception);
            throw new SomeFaultType(exception).AsFaultException();
        }
    }

    public Message SerializeReply(MessageVersion messageVersion, object[] parameters, object result)
    {
        return Message.CreateMessage(messageVersion, string.Empty, result);
    } 
    ```

归结为能够将我的自定义反序列化行为应用于操作。该行为反序列化，但使用 try catch 将异常包装在带有荷兰语消息的异常中。

# c# - 使用 LINQ 关闭与 DB 的连接？

> ID：16171635
> 
> 赞同：2
> 
> 时间：2013-04-23T14:13:16.997
> 
> 标签：c#, asp.net, sql-server-2008, linq-to-sql

我有一些代码可以使用 LINQ 自动删除和更新数据库。

```
KezberPMDBDataContext db = new KezberPMDBDataContext();
if (!db.DatabaseExists())
{
    db.DeleteDatabase();
}
db.CreateDatabase(); 
```

但是，它有时会由于打开的连接而失败。在 SQL Management Studio 中，我可以强制它终止连接，但我在 LINQ 中看不到这样的选项。

有谁知道这样做的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T14:15:40.867

DataContext 应始终“销毁”或处置，因此最好在 using 语句中使用 Context 对象：

```
 using(KezberPMDBDataContext db = new KezberPMDBDataContext())
 {
    if (!db.DatabaseExists())
    {
        db.DeleteDatabase();
    }
    db.CreateDatabase();
  } 
```

这将在使用后自动处理上下文。

要直接处理它，请调用该方法：

```
 db.Dispose(); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-09-10T05:55:45.707

您可以使用一些代码来关闭 LINQ 中 sql server 的当前连接

```
DBDataContext db= new DBDataContext (); 
```

完成您的操作后，您可以处理数据库

```
db.Dispose(); 
```

# html - 拆分菜单以允许单独的悬停颜色

> ID：16171636
> 
> 赞同：0
> 
> 时间：2013-04-23T14:13:19.867
> 
> 标签：html, css

我在拆分菜单以允许我为菜单的每个按钮提供其自己独特的颜色和悬停颜色时遇到问题。到目前为止，这段代码只允许我设置影响所有菜单选择的通用颜色。如果有人能告诉我要更改/添加到我的代码中的内容，以便为每个选择提供它自己的颜色，我将不胜感激。

我已经使用我正在使用的代码创建了一个到 Jsbin 的链接，因此您可以看到“实时”菜单 - 这可能会更好地让您了解它是如何工作的。这是链接：http: [//jsbin.com/ivoqoh/1/edit](http://jsbin.com/ivoqoh/1/edit)

同样，我的目标是为每个单独的菜单选项（第 1 页、第 2 页等）提供独特的颜色和悬停颜色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:24:05.073

You are affecting all of the menu items because you are using a class as a style. To effect menu items individually you need to assign a unique ID to each element. In your case it would be best to wrap a div around each link and give the divs unique IDs so that you can change styles like the back ground not just the style for the links themselves. In your CSS document you can then stylize each div individually and the style will cascade down into its children (your tags).

Example:

```
<div id="firstMenuItem"><a href... /></div> 
```

CSS

```
#firstMenuItem {
    background-color:#111111;
} 
```

To achieve responding to user events in real time on the web requires the use of JavaScript. Essentially what you want to say in this language is, "when the user mouses over a particular div, change the background color of the menu button."

Since you would like to do the same type of process repetitively with different DOM objects and colors, then you would benefit by writing a function and passing arguments in for the value of the div you would like to change and the color you would like to change it to.

```
<script type="JavaScript/text">

changeMenuBackground(currentDivID, desiredColor) {

// get the current div element
var div = getElementById(currentDivID);

div.style.backgroundColor = desiredColor;

}
<\script> 
```

There are two moments in the user interaction when the background color of the div needs to change. The first is when the user has the mouseOver the button and the second is when the mouse leaves the button (in us known as mouseOut). To every div that you want to change the background to you would have to change the background to the nw color on mouseOver and on mouseOut.

Example

```
<div id="firstMenuItem" onmouseover="changeMenuBackground(#firstMenuItem,#333333);" onmouseout="changeMenuBackground(#firstMenuItem,#111111);"><a href="...." /><\div> 
```

There are many different ways to achieve what you want to do, but all of them require the use of JavaScript. This way should do just fine, although you may be able to make it more efficient when tailored to your specific code. Insert the script tags just beneath your CSS styles or CSS sheets but before the body of you page. You must supply the div id preceded by the # symbol and the color you wish to change to for every div in the format i specified above for this function to work.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T14:24:29.783

You may insert color by just add "color" command in your input or use css to set color.

HTML:

```
<a href="#slide-panel-1">Page 1</a>
<input type="radio" name="radio-set" id="slide-control-2" color="put your color"/> 
```

or CSS:

```
.radio-set
{
background-color: "your color";
color: "your color";
} 
```

Hope it help

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-29T12:53:35.647

您需要全部添加类，然后设置配色方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T16:39:36.570

到目前为止，这里发布的所有答案都给出了答案，而且都是有效的。几乎，如果您希望每个单独的元素都有自己的特殊颜色，您需要为每个元素应用唯一的 ID，然后针对该特定 ID 应用 CSS。

您已经使用锚标记 ( `<a>`) 定义了菜单项，如下所示：

```
<a href="#slide-panel-2">Page 2</a> 
```

要专门设置第 2 页的样式，您需要向第 2 页添加一个 ID：

```
<a href="#slide-panel-1" id="two">Page 2</a> 
```

然后为第 2 页明确应用样式：

```
#two {
  color: #ffffff;
  background-color: #000000;
} 
```

您需要对每个页面执行相同的操作。[在此处](http://jsbin.com/ivoqoh/3/edit)查看对您的 JSBin 的更新。

# java - Java反射：如何从对象中获取字段值，不知道它的类

> ID：16171637
> 
> 赞同：40
> 
> 时间：2013-04-23T14:13:21.220
> 
> 标签：java, reflection

比如说，我有一个方法可以返回`List`带有一些对象的自定义。他们归还`Object`给我。我需要从这些对象中获取某个字段的值，但我不知道对象的类。

有没有办法通过反射或其他方式做到这一点？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-04-23T14:38:28.967

假设一个简单的案例，您的字段是`public`：

```
List list; // from your method
for(Object x : list) {
    Class<?> clazz = x.getClass();
    Field field = clazz.getField("fieldName"); //Note, this can throw an exception if the field doesn't exist.
    Object fieldValue = field.get(x);
} 
```

但这很丑陋，我忽略了所有的 try-catch，并做了一些假设（公共领域、可用的反射、好的安全管理器）。

如果您可以更改您的方法以返回 a `List<Foo>`，这将变得非常容易，因为迭代器可以为您提供类型信息：

```
List<Foo> list; //From your method
for(Foo foo:list) {
    Object fieldValue = foo.fieldName;
} 
```

或者，如果您正在使用泛型不可用的 Java 1.4 接口，但您知道应该在列表中的对象的类型......

```
List list;
for(Object x: list) {
   if( x instanceof Foo) {
      Object fieldValue = ((Foo)x).fieldName;
   }
} 
```

不需要反思:)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-23T15:12:11.930

我强烈建议使用 Java 泛型来指定该列表中的对象类型，即。`List<Car>`. 如果你有汽车和卡车，你可以使用像这样的通用超类/接口`List<Vehicle>`。

但是，您可以使用 Spring 的 ReflectionUtils 使字段可访问，即使它们是私有的，如下面的可运行示例：

```
List<Object> list = new ArrayList<Object>();

list.add("some value");
list.add(3);

for(Object obj : list)
{
    Class<?> clazz = obj.getClass();

    Field field = org.springframework.util.ReflectionUtils.findField(clazz, "value");
    org.springframework.util.ReflectionUtils.makeAccessible(field);

    System.out.println("value=" + field.get(obj));
} 
```

运行它有一个输出：

> 值=[C@1b67f74
> 值=3

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-23T14:33:00.017

如果您知道该字段所在的类，则可以使用反射访问它。这个例子（它在 Groovy 中，但方法调用是相同的）为类 Foo 获取一个 Field 对象，并为 object 获取它的值`b`。它表明您不必关心对象的确切具体类，重要的是您知道该字段所在的类，并且该类是对象的具体类或超类。

```
groovy:000> class Foo { def stuff = "asdf"}
===> true
groovy:000> class Bar extends Foo {}
===> true
groovy:000> b = new Bar()
===> Bar@1f2be27
groovy:000> f = Foo.class.getDeclaredField('stuff')
===> private java.lang.Object Foo.stuff
groovy:000> f.getClass()
===> class java.lang.reflect.Field
groovy:000> f.setAccessible(true)
===> null
groovy:000> f.get(b)
===> asdf 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-03T17:45:40.363

```
public abstract class Refl {
    /** Use: Refl.<TargetClass>get(myObject,"x.y[0].z"); */
    public static<T> T get(Object obj, String fieldPath) {
        return (T) getValue(obj, fieldPath);
    }
    public static Object getValue(Object obj, String fieldPath) {
        String[] fieldNames = fieldPath.split("[\\.\\[\\]]");
        String success = "";
        Object res = obj;
        for (String fieldName : fieldNames) {
            if (fieldName.isEmpty()) continue;
            int index = toIndex(fieldName);
            if (index >= 0) {
                try {
                    res = ((Object[])res)[index];
                } catch (ClassCastException cce) {
                    throw new RuntimeException("cannot cast "+res.getClass()+" object "+res+" to array, path:"+success, cce);
                } catch (IndexOutOfBoundsException iobe) {
                    throw new RuntimeException("bad index "+index+", array size "+((Object[])res).length +" object "+res +", path:"+success, iobe);
                }
            } else {
                Field field = getField(res.getClass(), fieldName);
                field.setAccessible(true);
                try {
                    res = field.get(res);
                } catch (Exception ee) {
                    throw new RuntimeException("cannot get value of ["+fieldName+"] from "+res.getClass()+" object "+res +", path:"+success, ee);
                }
            }
            success += fieldName + ".";
        }
        return res;
    }

    public static Field getField(Class<?> clazz, String fieldName) {
        Class<?> tmpClass = clazz;
        do {
            try {
                Field f = tmpClass.getDeclaredField(fieldName);
                return f;
            } catch (NoSuchFieldException e) {
                tmpClass = tmpClass.getSuperclass();
            }
        } while (tmpClass != null);

        throw new RuntimeException("Field '" + fieldName + "' not found in class " + clazz);
    }

    private static int toIndex(String s) {
        int res = -1;
        if (s != null && s.length() > 0 && Character.isDigit(s.charAt(0))) {
            try {
                res = Integer.parseInt(s);
                if (res < 0) {
                    res = -1;
                }
            } catch (Throwable t) {
                res = -1;
            }
        }
        return res;
    }
} 
```

它支持获取字段和数组项，例如：

```
System.out.println(""+Refl.getValue(b,"x.q[0].z.y")); 
```

点和大括号没有区别，它们只是分隔符，空字段名被忽略：

```
System.out.println(""+Refl.getValue(b,"x.q[0].z.y[value]"));
System.out.println(""+Refl.getValue(b,"x.q.1.y.z.value"));
System.out.println(""+Refl.getValue(b,"x[q.1]y]z[value")); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-05-13T08:37:29.093

还有另一种方法，我在我的项目中遇到了同样的情况。我这样解决了

`List<Object[]> list = HQL.list();`

在上面的休眠查询语言中，我知道我的对象在哪个地方，所以我所做的是：

```
for(Object[] obj : list){
String val = String.valueOf(obj[1]);
int code =Integer.parseint(String.valueof(obj[0]));
} 
```

通过这种方式，您可以轻松获得混合对象，但您应该提前知道您在哪个位置获得了什么值，或者您可以通过打印要知道的值来检查。抱歉英语不好我希望这有帮助

# database - 如何打印出非质数？PL/SQL

> ID：16171638
> 
> 赞同：-3
> 
> 时间：2013-04-23T14:13:21.733
> 
> 标签：database, oracle, plsql

此代码用于打印 1 到 30 之间的非素数。它是如何工作的，错误在哪里。

```
BEGIN  
    <<outer>>
    FOR i in 1..30
        <<inner>> 
        for k in 2..i-1 loop 
            if (mod(i, k) = 0) THEN 
                DBMS_OUTPUT.PUT_LINE(i);
                exit inner when (mod(i, k)= 0);
            end if;
        end loop inner
    end loop outer 
end; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T14:39:36.107

喝了咖啡，所以这里是一个纯 SQL 实现。

```
with data as ( select level as n# from dual 
               connect by level <= 30 )
select distinct d1.n#
from data d1 cross join data d2
where d1.n# > d2.n#
and d2.n# != 1
and mod(d1.n#, d2.n#) = 0
order by d1.n# 
```

虚伪？哎呀！

* * *

该解决方案具有与[@TYH 在 PL/SQL 解决方案中指出](https://stackoverflow.com/a/16172354/146325)的相同的低效率。这就是为什么它需要`distinct`. 可能这可以通过递归 CTE 进行优化（仅在 11gR2 中可用）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T14:44:26.957

这是一个“它是如何工作的”的答案。

外部循环处理数字 1 - 30。

内部循环执行实际的非素数处理。它真的只有在之后才开始`i = 4`（因为 1,2,3 是素数）。对于大多数非质数，循环将在 while 之后完成，`k <= 3`并打印出`i`. 对于素数，它将遍历所有小于素数的数字。就像我们在`i = 23`内部循环中一样，将通过 2,3,4...22 并在不打印任何内容的情况下完成循环。

那是我不喜欢的部分。如果你把数字分解出来（特别是因为我们只处理 1 - 30），它们可以被 2 或 3 或另一个素数整除。这是愚蠢的部分。回到我们的`i = 23`例子。我们将同时处理 mod(23, 3) 和 mod(23, 9) 和 mod(23, 18)。当然，如果 3 产生的余数比 9 和 18 也将产生余数（每个后续数字也将产生一个因数为 3 的数）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T14:43:58.213

该代码通过测试所有潜在候选人来工作，这意味着所有大于 1 且小于被审查数字的正整数。如果候选人将测试的数字除以没有余数，则该数字是复合数字并将被打印。跳过任何关于帽子号码的进一步测试。

# c - 我的字符串没有进入它的 if 语句？

> ID：16171640
> 
> 赞同：3
> 
> 时间：2013-04-23T14:13:26.693
> 
> 标签：c, if-statement, token

所以我传入了一个名为 SUB 的字符串。我使用 strcmp 将其与“SUB”进行比较。但是，它不会进入我的 if 循环。我不确定出了什么问题。这是我的一些代码：

```
char* single;
int singleLen= strlen(inputString);
char singleTemp[singleLen+1];

strcpy(singleTemp, inputString);   //to tokenize without modifying input string
single = strtok(singleTemp, " \r\n");
if (strcmp("SUB", single) == 0){
    if (size_list(stack) < 2){
        fprintf(stderr, "Not enough elements in stack.\n");
        exit(-2);
    }
    x = peek(stack);
    stack = pop(stack);
    y = peek(stack);
    stack = pop(stack);
    stack = push(stack, x-y);
    //increment PC
    PC++;       
    return stack;
} 
```

问题可能出在我的输入脚本中吗？我想我在那里的一切都是正确的——在 SUB 或任何东西之后没有多余的空格。以防万一，这是我的代码，直到它无法进入 SUB if 循环的错误。

```
CONST R0 4 ;A=4
CONST R1 0 ;B=0
CONST R2 0 ;Constant 0 comparison
CONST R4 1
PUSH R2
PUSH R0
SUB        ;ERROR OCCURS HERE
POP R3 
```

提前致谢！

编辑：哦！我发现了 MUL 的错误。这是因为我的脚本本身存在格式错误。非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T15:05:24.923

您添加的代码没有任何意义，因为整个流程是不可见的。

```
char* single;
int singleLen= strlen(inputString);
char singleTemp[singleLen+1]; 
```

大概有一个缺失`malloc()`的初始化`single`，然后是一些缺失的 I/O 读取数据以便`strlen()`调用作用于实际数据？此外，在我看来，这里不需要使用可变长度数组（*或*动态分配），只需将它们设为静态且例如 512 个字符长左右即可。

# java - Java 用户定义文件属性视图

> ID：16171642
> 
> 赞同：1
> 
> 时间：2013-04-23T14:13:29.327
> 
> 标签：java, nio, xattr

当我向文件添加新`UserDefinedFileAttributeView`属性时，Java 将这些信息存储在哪里？目录中没有其他文件，当我查看文件属性时，该文件没有任何新属性或详细信息。

我的代码：

```
String versionAttrName = "report.version";
try {           
    Path path = FileSystems.getDefault().getPath(filePath, "");
    UserDefinedFileAttributeView view = Files.getFileAttributeView(path, UserDefinedFileAttributeView.class);
    view.write(versionAttrName, Charset.defaultCharset().encode(newVersion));
} catch (IOException e) {
    System.out.println("7 - Error saving version to file! - "+ filePath + " - " + e.getMessage());
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-18T13:06:18.090

这些元数据使用文件系统的“扩展文件属性”存储（参见[维基百科](http://en.wikipedia.org/wiki/Extended_file_attributes "维基百科")）。

我找不到任何受支持的文件系统的完整列表（它肯定是特定于 JVM 的），因此您绝对应该在您计划支持的所有平台上进行测试。但是[这个](https://stackoverflow.com/questions/15319586/what-file-sytems-support-java-userdefinedfileattributeview)答案列出了一些，并且提到[了](http://web.ist.utl.pt/pedro.gloria/java.sun.com/docs/books/tutorial/essential/io/fileAttr.html#user)一些关于 Linux 的细节。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-18T06:08:05.113

这取决于您运行的平台。

根据 OpenJDK 文档：`The details of such emulation are highly implementation specific and therefore not specified.`

但是在 Windows 上的测试表明它使用 NTFS 备用数据流：

```
PS C:\test> Get-Item -Path C:\test\asdf.txt -stream *

   FileName: C:\test\asdf.txt

Stream                   Length
------                   ------
:$DATA                        0
myaltstream                1337 
```

在 linux 上，它使用扩展属性。

不确定其他人-希望这会有所帮助:)

# c++ - Qt: c++: 如何在 QTableView 中选择一行时创建一个 SIGNAL/SLOT

> ID：16171643
> 
> 赞同：8
> 
> 时间：2013-04-23T14:13:31.390
> 
> 标签：c++, qt, model, qtableview

我有一个`QTableView`工作正常，在 GUI 上显示我的模型。但是，我想创建一个“SIGNAL/SLOT”，当我从`QTableView`.

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-09-02T23:38:39.253

你可以这样做：

```
connect(ui->tableView->selectionModel(), SIGNAL(selectionChanged(const QItemSelection &, const QItemSelection &)),
             SLOT(slotSelectionChange(const QItemSelection &, const QItemSelection &))
            ); 
```

插槽将是：

```
void MainWindow::slotSelectionChange(const QItemSelection &, const QItemSelection &)
{
            QModelIndexList selection = ui->tableView->selectionModel()->selectedRows();//Here you are getting the indexes of the selected rows

            //Now you can create your code using this information
} 
```

我希望这可以帮助你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T14:42:49.480

请参阅文档 QAbstractItemView [https://qt-project.org/doc/qt-4.7/qabstractitemview.html](https://qt-project.org/doc/qt-4.7/qabstractitemview.html#signalSection)

> 无效 QAbstractItemView 已**激活**(const QModelIndex &index ) [信号]
> 
> 当用户激活 index 指定的项目时，会发出此信号。如何激活物品取决于平台；例如，通过单击或双击项目，或在项目为当前时按 Return 或 Enter 键。

并使用 QModelIndex::row()

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T14:16:34.410

使用`currentRowChanged(const QModelIndex & current, const QModelIndex & previous)`来自选择模型 ( [docs](http://qt-project.org/doc/qt-4.8/qitemselectionmodel.html#currentRowChanged) ) 的信号。

# sql - 从 SQL Server 版本 1 获取复选框名称

> ID：16171644
> 
> 赞同：1
> 
> 时间：2013-04-23T14:13:32.330
> 
> 标签：sql, vb.net, types, sql-server-2008-express

问题：我想从 SQL Server 数据库表中检索复选框的名称，并查看它是否在“if”语句中被选中。

界面：我的表单由一个列表框、一个按钮和一个复选框组成。

SQL Server 表：

```
ID   Name   cbName
 1   Rest   cbRest 
```

我想写：

```
sb = dt.rows(0)(cbName) 
    If sb.Checked() = True Then
        ListBox1.Items.Add(dt.Rows(0)(1).ToString())
    Else
        MsgBox("Nothing checked")
    End If 
```

预期的输出应该是列表框中的 Rest。当然，下一步是遍历数百个复选框，但现在我只想澄清如何使这项工作发挥作用。

现在我收到以下错误：

> 无法将“System.String”类型的对象转换为“System.Winddows.Forms.CheckBox”类型

我将 Visual Basic Express 2008 与 SQL Server 2008 Express、64 位 Windows 7 Pro 一起使用

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:39:46.640

您必须遍历所有控件并找到具有 id/name [cbRest] 的控件。一旦您掌握了控件（这是一个复选框），您就可以使用

```
If sb.Checked() = True Then
    ListBox1.Items.Add(dt.Rows(0)(1).ToString())
Else
    MsgBox("Nothing checked")
End If 
```

其中 sb 将是您找到的控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T14:59:31.397

您需要声明一个变量 (sb) 这是一个按钮的片段：

```
Dim btn As Button 
...
btn = CType(Controls("Button1"), Button) 
```

在您的情况下，您将使用 SQL 中的 cbName 值代替“Button”。

'Controls' 是持有按钮/复选框的父级。该片段与表单上的按钮一起使用。如果您有一个包含复选框的容器，请使用 container_name.Controls()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T15:00:00.060

假设您已将复选框直接添加到页面，您可以使用 名称按名称查找控件`Me.Controls.Item(controlID)`，因此在您的情况下

```
Dim sb as CheckBox = CType(Me.Controls.Item(dt.rows(0)("cbName")), CheckBox) 
```

# php - 重写 URL 并存储变量

> ID：16171646
> 
> 赞同：-2
> 
> 时间：2013-04-23T14:13:37.937
> 
> 标签：php, .htaccess

我想重写一个网址如下...

**示例输入：**

```
test.com/test/123/
test.com/test/123/456/
test.com/test/123/456/789 
```

**输出：**

```
test.com/test/
test.com/test/
test.com/test/ 
```

但我想将结尾作为变量存储在 test.com/test/ 页面上的模板中

例如

```
variable from input 1 : /123/
variable from input 2 : /123/456/
variable from input 3 : /123/456/789 
```

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T14:24:54.467

以此为起点：首先您的 .htaccess 接收 URL，然后将其发送到 php 脚本：

```
RewriteEngine On

#Skip virtual folders and files...
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

#Send the parameters to a php page
RewriteRule ^/test/(.*)/?$ http://test.com/test/index.php?route=$1 [L,QSA] 
```

然后 php 通过 $_GET 将参数作为字符串获取

```
echo $_GET['route']; // '/123/456/789' 
```

这样你就可以`explode()`分离`/`变量。

祝你好运。

# c# - 如何比较日期和时间

> ID：16171647
> 
> 赞同：-2
> 
> 时间：2013-04-23T14:13:42.820
> 
> 标签：c#, datetime

我正在使用 C# - visual studio 2010 开发一个名为提醒的应用程序。我的应用程序会提醒输入的每个事件。下面的解决方案可以正常工作，但我需要使用“datetimepicker”来表达这一点（不使用日期选择的日历）

```
MyRemindTime =dlg.MymonthCalendar.SelectionStart.AddHours(dlg.MyTimePicker.Value.Hour).AddMinutes(dlg.MyTimePicker.Value.Minute).AddSeconds(dlg.MyTimePicker.Value.Second);
timer1.Enabled = true;

private void timer1_Tick(object sender, EventArgs e)
    {
        if (MyRemindTime.CompareTo (DateTime.Now)<0)
        {
            timer1.Enabled = false;
            MessageBox.Show("Alarm");
         }
     } 
```

你能帮我如何正确表达 MyRemindTime 吗？我需要将当前日期和时间与 datetimepicker 进行比较。必须比较时间和数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T14:21:02.617

您可以获得选定的日期/时间：

```
DateTime reminderTime = myDateTimePicker.Value; 
```

并与当前时间比较：

```
if(reminderTime < Datetime.Now) 
     //reminder time has passed 
```

# iphone - 解析字符串的 Sudzc 问题

> ID：16171648
> 
> 赞同：0
> 
> 时间：2013-04-23T14:13:44.657
> 
> 标签：iphone, ios, xml, soap

我正在使用 Sudzc 来解析一个肥皂 XML。

我正在设置：

```
amount.currency = @"BRL"; 
```

它给了我以下错误：

```
validation 138 Unsupported currency specified 
```

日志猫：

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><soap:Body><soap:Fault><faultcode>soap:Server</faultcode><faultstring>validation 138 Unsupported currency specified</faultstring></soap:Fault></soap:Body></soap:Envelope> 
```

我知道wsdl很好。那么我应该在哪里寻找这个错误呢？

```
SDZPayment* service = [SDZPayment service];
    service.logging = YES;
    service.username = @"**************";
    service.password = @"****************";

    SDZAmount *amount = [SDZAmount new];
    amount.value = (long)100;
    amount.currency = @"BRL";

    SDZCard *card = [SDZCard new];
    card.cvc = @"412";
    card.number = @"21432423423"; 
    card.holderName = @"Marcus Ataide";
    card.expiryMonth = @"12";
    card.expiryYear = @"2017";
    card.brand = @"visa";
    card.issueNumber = @"10";
    card.startMonth = @"10";
    card.startYear = @"2010";

    SDZPaymentRequest *payment = [SDZPaymentRequest new];
    payment.amount = amount;
    payment.card = card;
    payment.merchantAccount = @"*************";
    payment.shopperReference = @"123456";

    // Returns SDZPaymentResult*
    /*  */
    [service authorise:self action:@selector(authoriseHandler:) paymentRequest: payment]; 
```

从网络服务：

```
<xsd:complexType name="Amount">
<xsd:sequence>
<xsd:element minOccurs="1" name="currency">
<xsd:simpleType>
<xsd:restriction base="xsd:string">
<xsd:minLength value="3"/>
<xsd:maxLength value="3"/>
</xsd:restriction>
</xsd:simpleType>
</xsd:element>
<xsd:element minOccurs="1" name="value" type="xsd:long"/>
</xsd:sequence>
</xsd:complexType> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T21:49:49.363

问题出在命名空间：

在里面，`"SDZAmount.m"`我需要改变：

```
[s appendString: [Soap serialize: self.currency]]; 
```

至：

```
[s appendFormat: @"<currency xmlns=\"http://common.services.adyen.com\">%@</currency>", [Soap serialize: self.currency]]; 
```

# javascript - jquery克隆元素在变量中被改变

> ID：16171653
> 
> 赞同：6
> 
> 时间：2013-04-23T14:13:56.070
> 
> 标签：javascript, jquery, clone

**编辑：**

现在在[jsbin.com/ivukar/10上的工作示例](http://jsbin.com/ivukar/10)

* * *

这是我正在尝试做的事情，总结为核心步骤，没有所有对您来说毫无意义的细节：

1.  从 DOM 克隆一个现有的 div 并将该克隆存储在一个变量中
2.  从 DOM 中删除该 div
3.  将克隆的 div 追加到 DOM
4.  更改 DOM 中 div 的 HTML 内容
5.  删除 div 并再次插入克隆

现在按照这些步骤，假设我们的 div 的 HTML 内容是“测试”，我希望如下：

1.  将 div 与内容“test”一起存储的变量
2.  从 DOM 中删除的 Div
3.  div 附加到 DOM，内容为“test”
4.  页面上的 Div 已更改为内容“已更改”
5.  页面上的 div 已删除。div 再次附加到正文，内容为“test”，因为它存储在变量中，不应受到 DOM 更改的影响

然而发生的事情是，一旦我对元素的 html 内容进行更改，例如使用：`$('#element').html('altered');`它也会更改变量的内容......

我不明白它为什么会这样做，因为只有在将变量附加到 DOM 时才会引用该变量，所以我不会更改变量的内容......

这是一个[JsBin](http://jsbin.com/ivukar/1)链接，所以你可以明白我的意思。

或者，这里是示例代码：

```
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
<script>
var saved = '';

function my_clone()
{
saved = $('#el').clone();
$('#output').append("<a href='#' onclick='my_remove();'>Remove version on screen</a> ----- This removes any element with the id 'el'<br>");
}

function my_remove()
{

$('#el').remove();
$('#output').append("<a href='#' onclick='my_append();'>Append clone to body</a> ----- This takes the cloned object stored in the variable 'saved' and appends it to the html body<br>");

}

function my_append()
{

$('body').append( saved );
$('#output').append("<a href='#' onclick='my_alter();'>Alter .html() of element</a>----- This alters the html of any element with the id 'el'<br>");

}

function my_alter()
{

$('#el').html('altered');
$('#output').append("<a href='#' onclick='my_remove_again();'>Remove version on screen again</a>----- This removes any element with the id 'el'<br>");

}

function my_remove_again()
{
$('#el').remove();
$('#output').append("<a href='#' onclick='my_append_again();'>Append clone to body</a> ----- This again takes the object stored in the 'saved' variable, which is separate from the DOM and should not have been affected by the html change and appends to the html body<br>");
} 

function my_append_again()
{
$('body').append( saved );
}

</script>
<style>
#el {color:red;}
</style>
</head>
<body>

<div id="el">
    <div id="various">Various</div>
    <div id="sub">Sub
        <div id="and-sub-sub">And Sub-Sub</div>
    </div>
    <div id="elements">Elements</div>
</div>

<br><br>
<div id="output">
<a href="#" onclick="my_clone();">Clone</a> ------ This stores the clone into a global variable called 'saved'<br>
</div>

</body>
</html> 
```

谁能告诉我这里哪里出错了？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T14:54:47.777

问题是您将实际的 DOM 元素分配给`saved`而不是 HTML 内容。

老套路：

```
saved = $("#el").clone().wrap('<div/>').parent().html(); 
```

您首先将克隆包装在`div`您返回其 HTML 的父级中。

更新了 JSBIN [http://jsbin.com/ivukar/4](http://jsbin.com/ivukar/4)

参考：[Get DOM element as string](https://stackoverflow.com/questions/8127091/jquery-get-dom-element-as-string)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-23T14:35:02.543

```
saved = $('#el').clone(); 
```

应该

```
saved = $('#el').clone().html(); 
```

# python - 如何使用 Portable Python 安装外部库？

> ID：16171658
> 
> 赞同：4
> 
> 时间：2013-04-23T14:14:05.567
> 
> 标签：python, numpy, installation, portability

由于管理员权限，我无法在我的机器上安装 Python，但我确实成功下载/打开了 Portable Python。我在 Windows 7 64 位机器上。我如何才能使用以前的外部库，例如 Numpy 或 Gmpy？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T04:51:50.453

easy_install 正在尝试从源代码安装。gmpy 和 gmpy2 是 C 扩展，需要存在兼容的 C 编译器和其他库（GMP；以及 gmpy2 的 MPFR 和 MPC）。在 Windows 上从源代码安装通常很困难。安装程序包括扩展的预编译版本。

一种选择是从安装程序中提取已编译的二进制文件。[7-Zip](http://www.7-zip.org/)能够打开安装程序文件，您可以提取二进制文件。在标准的 Python 安装中，提取的二进制文件只需放在 site-packages 目录中。如有必要，您可以在另一个系统上进行提取并复制文件。

您还可以使用 zipfile 模块来提取已编译的扩展名。这是一个例子。您将需要修改确切的文件位置以反映您的系统。

```
>>> import zipfile
>>> f=zipfile.ZipFile('gmpy2-2.0.0.win-amd64-py3.3.exe','r')
>>> f.namelist()
['PLATLIB/gmpy2-2.0.0-py3.3.egg-info', 'PLATLIB/gmpy2.pyd']
>>> f.extract('PLATLIB/gmpy2.pyd')
'C:\\Python33\\PLATLIB\\gmpy2.pyd' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-02T11:50:38.883

请执行下列操作：

*   找到所需包的已编译版本 - Christoph Gohlke[在这里](http://www.lfd.uci.edu/~gohlke/pythonlibs/)保存了一个优秀的集合- 下载它并将它放在一个文件夹中（比如 C:\temp）。
*   在您的 Portable Python 安装中，找到 Scripts 文件夹（通常在 Apps 文件夹下）并在那里打开命令提示符。
*   从 Scripts 文件夹中键入命令`easy_install C:\temp\numpy-MKL-1.8.0.win32-py2.7.exe`（将 exe 文件名更改为安装程序的名称）。

测试是否安装成功：

```
>>> import numpy
>>> print numpy.__version__
1.8.0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T14:34:51.130

请参考[https://groups.google.com/forum/?fromgroups#!topic/portablepython/BVQOHFNXilU](https://groups.google.com/forum/?fromgroups#!topic/portablepython/BVQOHFNXilU)

据此，对于大多数包，您应该能够轻松安装到您的 Portable Python 根文件夹中，然后在您的 Python 脚本中正常导入它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-12T00:01:09.410

对于大多数外部包，我已经能够按如下方式导入它们：

1.  从 PyPI 上的适当文件中提取包源到`.whl`安装了 Portable Python 的磁盘/棒上的自定义“包含”文件夹中。
    1.  在我的情况下，这是`F:\py\include` - 无论您选择什么，请**确保**此文件夹的路径中没有空格或特殊字符，否则 Portable Python 在添加到`PYTHONPATH`.
    2.  轮子只是 ZIP 文件；重命名`.whl`为`.zip`，Windows 资源管理器将直接打开它。
    3.  通常您想检索`.whl`其名称只是您感兴趣的包名称的子文件夹：`numpy`,`sympy`等。
2.  将此包含文件夹的路径添加到`PYTHONPATH`环境变量中：
    1.  在 Windows 资源管理器中，右键单击“计算机”并选择“属性”
    2.  这有点取决于版本，但请选择“高级系统设置”(Win7) 或“性能”或“高级”选项卡 (WinXP)。
    3.  点击“环境变量”
    4.  在“系统变量”下，查找`PYTHONPATH`. 如果它在那里，请选择它并单击“编辑”。如果没有，请单击“新建”。
    5.  如果您要添加新的，请键入`PYTHONPATH`“变量名称”。无论哪种方式，将自定义包含文件夹的路径添加到“变量值”中。如果其他路径已经存在，请用分号将您的路径与之前的任何路径分开。**不要**在分号和新路径之间放置空格！Portable Python 显然将带有前导空格的条目解释为*相对路径*，参考文件夹是 Portable Python 安装文件夹。
    6.  根据需要单击“确定”以保存设置并清除对话框。

在某些需要“正式”安装过程的情况下，这并不总是有效。我认为`sympy`是一种情况，我必须在将其转移到`F:\py\include`. 此外，我在. [_](https://stackoverflow.com/questions/30179534/how-can-i-install-h5py-with-portable-python-v2-7)`h5py``h5py``F:\py\include`

# c++ - 如何在 FAST 金融协议中实现 feed A 和 feed B 的仲裁？

> ID：16171664
> 
> 赞同：1
> 
> 时间：2013-04-23T14:14:16.713
> 
> 标签：c++, fix-protocol, low-latency, fast-protocol

我需要为[FAST](http://www.fixprotocol.org/fast)协议实施提要仲裁。问题很常见，甚至有[硬件解决方案](http://www.accelize.com/products/fpga-platform-components/finance-ip/market-data-decoders.html)由于问题广为人知，我确实认为至少应该有关于如何实现该问题的一般建议（我应该使用多少查询，多少环形缓冲区，多少读者，何时丢弃数据包等），可能有人可以指出我的一些实现。对于那些不熟悉 FAST 的人，我添加一些描述：

* * *

所有 UDP 源中的数据都在两个不同的多播 IP 上的两个相同的源（A 和 B）中传播。强烈建议客户端接收并处理这两个提要，因为可能会丢失 UDP 数据包。处理两个相同的提要允许一个在统计上降低丢包的概率。未指定消息首次出现在哪个特定提要（A 或 B）中。要仲裁这些提要，应该使用在 Preamble 或标签 34-MsgSeqNum 中找到的消息序列号。Preamble 的使用允许在不解码 FAST 消息的情况下确定消息序列号。应使用以下算法处理来自提要 A 和 B 的消息：

1.  收听提要 A 和 B
2.  根据消息的序号处理消息。
3.  如果之前已经处理过具有相同序列号的消息，则忽略该消息。

    // tcp 恢复算法进一步

* * *

所以我认为解决方案应该是这样的：

1.  为两个提要中的每一个创建专用线程和专用缓冲区。数据到达时将数据添加到缓冲区。（应该是环形缓冲区还是队列还是什么？）

2.  创建“旋转”的“阅读器”并检查两个线程是否有最后一个可用的“序列号”。一旦“序列号”可用，就需要处理下一个数据包，并且两个线程都应该在此之后丢弃它。

欢迎任何关于如何实现算法本身的建议以及可能使用哪些结构的建议。特别是可能有人可以建议无锁队列/环形缓冲区实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-21T20:53:20.457

FAST 协议通常用于市场数据流，因此数据以 UDP 数据包的形式到达，通常是多播。这些数据包是**按顺序排列**的，因此如果您需要在两个冗余馈送之间进行仲裁，您所要做的就是*处理您首先收到的来自哪个通道的下一个预期数据包*。迟到的欺骗数据包您只需丢弃。仲裁不仅减少了丢失数据包的机会（您必须在两个通道中都丢失它），而且减少了延迟，因为您总是有第二种选择，以防其中一个提要变慢。

您应该更关心解码 FAST 位。这可能很耗时。查看[CoralFIX](http://www.coralblocks.com/index.php/2014/10/fast-support-with-coralfix/)以获取有关如何从交换 XML 模板生成 FAST 解码源代码的示例。

**免责声明：**我是 CoralFIX 的开发者之一。

# java - 文件是否附加在文件字段中？

> ID：16171669
> 
> 赞同：1
> 
> 时间：2013-04-23T14:14:41.140
> 
> 标签：java, servlets, file-upload, apache-commons-fileupload

我有以下代码：

```
if (formItems != null && formItems.size() > 0) {
    // iterates over form's fields
    for (FileItem item : formItems) {
        // processes only fields that are not form fields
        if (!item.isFormField()) {
            String fileName = new File(item.getName()).getName();
            String filePath = uploadPath + File.separator + fileName;
            File storeFile = new File(filePath);

            // saves the file on disk
            item.write(storeFile);
            session.setAttribute("image", fileName);
        }
        // processes only form fields
        else {
            String fieldname = item.getFieldName();
            String fieldvalue = item.getString();
            session.setAttribute(fieldname, fieldvalue);
        }
    }
} 
```

我想先检查一个文件是否附加。如果附加，则仅上传文件。我试过这个：

```
if(item==null) 
```

但这行不通。如何检查文件是否附加？我有一个文件字段：

```
<input type="file" name="image"/> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T14:37:37.923

`item`从来`null`没有。

只需检查`FileItem#getName()`（文件名）是否为空和/或`FileItem#getSize()`（文件大小）是否等于`0`.

在您的特定情况下，使用`<input type="file" name="image"/>`，那将是：

```
if (!item.isFormField()) {
    if ("image".equals(item.getFieldName())) {
        if (item.getName() == null || item.getName().isEmpty()) {
            // No file was been selected.
        }

        if (item.getSize() == 0) {
            // No file was been selected, or it was an empty file.
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-21T18:26:43.967

你可以使用下面的代码来检查你的fileupload控件是否有任何值。`filename`是我的文件上传控件的名称

```
if ("filename".equals(item.getFieldName()) && item.getSize() > 0) {
    // your code here
} else {
    // Exception handling as no file chosen/attached
} 
```

# module - 导入的数据类型与本地定义的数据类型冲突，即使重命名也是如此

> ID：16171670
> 
> 赞同：3
> 
> 时间：2013-04-23T14:14:43.320
> 
> 标签：module, agda

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T03:27:36.327

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T16:26:42.007

It seems an Agda bug to me. You can report the bug in [http://code.google.com/p/agda/issues/list](http://code.google.com/p/agda/issues/list).

# magento - Magento 1.7 - 获取价格规则以触发捆绑内容

> ID：16171671
> 
> 赞同：0
> 
> 时间：2013-04-23T14:14:51.020
> 
> 标签：magento

在我们的 Magento 1.7.0.2 商店中，我们有一个捆绑产品，其中包含 3 个简单的产品，可以通过复选框选择。因此，客户可以选择单个简单产品、2 种产品或全部 3 种产品的任意组合，然后从 1 个捆绑包页面全部添加到购物车。我们想添加一个购物车价格规则，如果选择了所有 3 种简单产品，则应用百分比折扣。'一起购买所有 3 个并节省 10%' 类型的东西。看起来很简单，但我们无法获得触发 SKU 匹配的规则，即使我们只是检查购物车中是否存在 1 个简单的产品 SKU，即使我们选择了应该是的“包含”匹配少挑剔。这条规则是否有理由不适用于捆绑包？如果有问题，任何人都可以推荐一个解决方法吗？谢谢，詹姆斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T12:48:44.343

我们通过使用“产品类型”和“购物车价格”规则的条件对其进行排序，以查找添加的所有 3 件商品的具体价格。这有点软糖，但最终结果是一样的。

# c# - 零星的“当前不支持多个同时连接”

> ID：16171673
> 
> 赞同：1
> 
> 时间：2013-04-23T14:14:55.703
> 
> 标签：c#, asp.net, mysql, entity-framework

我有一个使用实体框架和 MySQL 数据库的 ASP.NET Web 应用程序。我正在使用动态表做一些工作，所以不得不编写原始 SQL。我需要添加一些东西来使这个代码线程安全吗？我的系统的每个用户都可以并且将非常频繁地调用此代码。它总是反对`INFORMATION_SCHEMA`那个错误。

这是我经常尝试调用`AddMessageAction`（但不是每次都）收到的错误：

```
UserActionModel:CheckTableExists ex: The underlying provider failed on Open..
4/23/2013 9:00:24 AM: UserActionModel:CheckTableExists inner ex: System.NotSupportedException: Multiple simultaneous connections or connections with different connection strings inside the same transaction are not currently supported.
   at MySql.Data.MySqlClient.ExceptionInterceptor.Throw(Exception exception)
   at MySql.Data.MySqlClient.MySqlConnection.Throw(Exception ex)
   at MySql.Data.MySqlClient.MySqlConnection.Open()
   at System.Data.EntityClient.EntityConnection.OpenStoreConnectionIf(Boolean openCondition, DbConnection storeConnectionToOpen, DbConnection originalConnection, String exceptionCode, String attemptedOperation, Boolean& closeStoreConnectionOnFailure). 
```

和代码：

```
public static class UserActionModel
{

private const string databaseName = "chat";

public static string CheckTableExists(long _userId)
{
    string tableName = null;
    List<long> tableExists;

    try
    {
        string date = DateTime.Now.ToUniversalTime().Year.ToString() + DateTime.Now.ToUniversalTime().Month.ToString("D2") + DateTime.Now.ToUniversalTime().Day.ToString("D2");

        tableName = "user_actions_" + date + "_" + _userId;

        string sql = "SELECT COUNT(*) FROM information_schema.TABLES WHERE TABLE_NAME = '" + tableName + "' AND TABLE_SCHEMA = 'archive'";

        using (var readContext = new ArchiveConnector())
        {
            tableExists = readContext.Database.SqlQuery<long>(sql).ToList();
            readContext.Database.Connection.Close();
        }

        if (tableExists.Any(tableExist => tableExist == 0))
        {
            sql = "CREATE TABLE IF NOT EXISTS `" + tableName + "` ("
                  + "`id` bigint(20) NOT NULL AUTO_INCREMENT, "
                  + "`user_id` bigint(20) NOT NULL, "
                  + "`user_device_id` bigint(20) NOT NULL, "
                  + "`coordinate_address_id` bigint(20) NOT NULL, "
                  + "`message_id` bigint(20) DEFAULT NULL, "
                  + "`created` datetime NOT NULL, "
                  + "PRIMARY KEY (`id`), "
                  + "KEY `user_id` (`user_id`), "
                  + "KEY `user_device_id` (`user_device_id`), "
                  + "KEY `coordinate_address_id` (`coordinate_address_id`), "
                  + "KEY `message_id` (`message_id`); "

            using (var writeContext = new ArchiveConnector())
            {
                writeContext.Database.ExecuteSqlCommand(sql);
                writeContext.SaveChanges();
                writeContext.Database.Connection.Close();

            }
        }
    }
    catch (Exception ex)
    {
        Logger.LogMessage("UserActionModel:CheckTableExists ex: " + ex.Message);

        if (ex.InnerException != null)
            Logger.LogMessage("UserActionModel:CheckTableExists inner ex: " + ex.InnerException);

        tableName = null;
    }

    return tableName;
}

public static void AddMessageAction(long _messageId, long _userId, long _userDeviceId, long _coordinateAddressId)
{
    try
    {
        string tableName = CheckTableExists(_userId);

        if (String.IsNullOrEmpty(tableName)) return;

        using (var dataContext = new ArchiveConnector())
        {
            string sql = "INSERT INTO " + tableName + " "
                + "(user_id, user_device_id, coordinate_address_id, message_id, created) "
                + "VALUES "
                + "(" + _userId + ", " + _userDeviceId + ", " + _coordinateAddressId + ", " + _messageId + ", NOW());";

            dataContext.Database.ExecuteSqlCommand(sql);
            dataContext.SaveChanges();
        }
    }
    catch (Exception ex)
    {
        Logger.LogMessage("UserActionModel:AddMessageAction (" + _messageId + ") ex: " + ex.Message);
    }
}
} 
```

从我的 web.config 连接字符串中删除`persist security info=True`没有任何区别（我读到这是一个可能的解决方案）。

UDPATE：从连接器 6.6.4 更新到 6.6.5。没变。UDPATE：从连接器 6.6.5 更新到 6.7.1 Alpha。没变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:47:31.813

`ArchiveConnector`的`Dispose`方法没有关闭它的 MySQL 连接。当你：

```
using (var writeContext = new ArchiveConnector()) 
```

上的连接：

```
using (var readContext = new ArchiveConnector()) 
```

仍处于打开状态，并且 MySQL 不支持同一事务上的多个连接。确保您的连接已关闭`ArchiveConnector.Dispose()`。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T17:19:18.937

我在不同的连接器上打电话给`AddMessageAction()`我`using`。不要这样做。

# javascript - 在javascript中正确使用eval？

> ID：16171678
> 
> 赞同：1
> 
> 时间：2013-04-23T14:15:09.237
> 
> 标签：javascript, eval

所以我有这个 json 对象，其中结构是可变的，具体取决于您检索数据的方式。假设对象在一种情况下看起来像这样：

```
{
  "status": "success",
  "data": {
    "users": [...]
  }
} 
```

但在另一种情况下看起来像这样：

```
{
  "status": "success",
  "data": {
    "posts": [...]
  }
} 
```

现在对于第一个示例，我动态获取数据的方式是这样的：

```
var dataLocation = 'data.users';
var responseData;
eval('responseData = response.' +dataLocation + ';'); 
```

这允许我配置它。请注意，这只是一个简单的示例，在实际代码中，只有一个函数可以解析数据，并且我会将 dataLocation 作为参数传入。

现在我的第一个问题是，不使用 eval 是否有更好的实现相同目标的愿望？

如果不是，第二个问题是我需要对 eval 语句做些什么以确保它是安全的（永远不应该从用户那里传入 dataLocation，它总是来自代码，但仍然如此）。

***更新***

根据 Bergi 的评论，我现在正在使用这个：

```
var parts = dataListLocation.split('.');

for(var x = 0; x < parts.length; x += 1) {
  responseData = responseData[parts[x]];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T14:17:02.003

您应该使用括号表示法而不是`eval`：

```
var responseData = response['data']['users']; 
```

注意：根据您的描述，您拥有的是 JavaScript 对象文字。JSON 将是编码为字符串的相同对象（`JSON.stringify`例如，使用 ）。没有“JSON 对象”之类的东西，你要么有一个 JavaScript 对象，要么有一个 JSON 字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T14:17:36.170

您可以对 JS 中的对象使用键索引器：

```
var responseData response.data['users]'; 
```

那是在摆脱`data.`我们的 dataLocation 之后

# javascript - “TypeError: $(...) is null” 怎么回事？

> ID：16171681
> 
> 赞同：4
> 
> 时间：2013-04-23T14:15:11.397
> 
> 标签：javascript, firebug, typeerror

Firebug 给出错误：

```
TypeError: $(...) is null
$('#menu img').hover( 
```

我不知道为什么。看似有问题的脚本是当光标悬停在图像上时替换图像的脚本：

```
$(document).ready(function()
{
    var storeNormalPath;
    $('#menu img').hover(
        function()
        {   
            storeNormalPath = $(this).attr('src');
            var imgArray = $(this).attr('src').split('.jpg');
            $(this).attr('src', imgArray[0]+'Hover.jpg');
        }, 
        function() 
        {   
            $(this).attr('src', storeNormalPath);
        }
        ).click (function()
        {
            //empty now
        });
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T15:06:35.083

在使用 chrome 的控制台查看您的页面后，它看起来甚至`$(document)`返回 null。 `jQuery(document)`但是，有效，这表明与 jQuery 的 $ 运算符存在冲突。

（*来源*：我会引导您回答这个问题：[$.document 为 null](https://stackoverflow.com/questions/1945310/document-is-null)）

看到您在页面标题中同时引用了**jquery-1.5.1.min.js**和**jquery.1.4.2.js**，也许这可能是冲突的原因？你试过只加载其中一个吗？

让我们知道这是否有帮助，对不起，我无法提供更多帮助。祝你好运！

# javascript - 此代码返回的 NaN

> ID：16171683
> 
> 赞同：0
> 
> 时间：2013-04-23T14:15:19.460
> 
> 标签：javascript, random, runtime-error, nan

此代码不会打印我们的 roomC，而是返回 nan 我已通过代码追溯并确定该代码

```
var minR = (Game.height * Game.width) / 300;
var maxR = (Game.height * Game.width) /150; 
```

导致 nan 发生在这里是代码的全部，任何帮助将不胜感激！

```
Game = {

mapG:{
    width: 75,
    height: 50,
    tile:{
        width: 10,
        height: 10
    }
},

width: function() {
 return this.mapG.width * this.mapG.tile.width;
},

height: function() {
  return this.mapG.height * this.mapG.tile.height;
},

start: function() {

var minR = (Game.height * Game.width) / 300;
var maxR = (Game.height * Game.width) /150;
var range = maxR - minR + 1;
var roomC = Math.floor((Math.random()*maxR)+minR);

//#3L11Tw0w0w0w0
Crafty.init(Game.width(), Game.height());
Crafty.background('rgb(6, 38, 111)');

var map =[];
for(var x = 0; x < 100; x++){
    map[x] = [];
    for(var y = 0; y < 100; y++){
       map[x][y] = x*y;
   }

  }

console.log(map[10][11]);
    //Need this to print out!
console.log(roomC);
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T14:21:26.670

错误是当您调用函数宽度和高度时。你需要这样称呼他们：

```
var minR = (Game.height() * Game.width()) / 300;
var maxR = (Game.height() * Game.width()) /150; 
```

我认为这应该可以解决问题。

# python - 使用 pybrain 对代理进行基准测试

> ID：16171685
> 
> 赞同：1
> 
> 时间：2013-04-23T14:15:23.583
> 
> 标签：python, machine-learning, pybrain

我最近开始在 python 中编写我自己的代理（不使用 pybrain 库），它已经到了我想开始运行一些适当的基准测试的地步。我想跑几个迷宫，杆平衡和山地车。

我知道 PyBrain 已经对这些环境进行了编码，是否可以通过使用某种桥接/接口将其连接到我自己的代码来与这些环境进行交互？我看到了类似 RLGlue 桥的东西，但它的状态似乎值得怀疑。

有没有人已经通过不同的桥成功使用了 PyBrain 环境？我想最简单的解决方案是将我的代码调整为 PyBrain 代理的格式并放弃桥接......但我想通过连接两者来节省时间。

谢谢

# html - 哪些是标准的 W3C 元标记？

> ID：16171686
> 
> 赞同：6
> 
> 时间：2013-04-23T14:15:25.617
> 
> 标签：html, meta-tags, w3c

[除了以下在http://www.w3.org/wiki/HTML/Elements/meta](http://www.w3.org/wiki/HTML/Elements/meta)中给出的之外，W3C 中定义的标准元标记列表是什么

```
 <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="copyright" content="© W3C" />
  <meta name="author" lang="en" content="" />
  <meta name="robots" content="Index,Follow" />
  <meta name="description"
        content="The World Wide Web Consortium (W3C) is an international community
        where Member organizations, a full-time staff,
        and the public work together to develop Web standards." />
  <meta name="keyword" content="W3C, HTML, CSS, SVG, Web standards" /> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-25T06:12:31.627

## HTML5

您只能在 HTML5 中使用以下值。如果您需要未列出的值，则必须先注册它。

### `name`价值观

*   [标准元数据名称](http://www.w3.org/TR/html5/document-metadata.html#standard-metadata-names)（在 HTML5 规范中定义）
*   [MetaExtensions （](http://wiki.whatwg.org/wiki/MetaExtensions)[根据 HTML5 规范](http://www.w3.org/TR/html5/document-metadata.html#other-metadata-names)在 WHATWG wiki 中注册）

### `http-equiv`价值观

*   [Pragma 指令](http://www.w3.org/TR/html5/document-metadata.html#pragma-directives)（在 HTML5 规范中定义）
*   [PragmaExtensions （](http://wiki.whatwg.org/wiki/PragmaExtensions)[根据 HTML5 规范](http://www.w3.org/TR/html5/document-metadata.html#other-pragma-directives)在 WHATWG wiki 中注册）

## HTML 4.01

在 HTML 4.01 中没有定义注册表，因此您可以使用任何您喜欢的值。见[http://www.w3.org/TR/html401/struct/global.html#h-7.4.4](http://www.w3.org/TR/html401/struct/global.html#h-7.4.4)：

> 本规范没有定义一组合法的元数据属性。

该规范给出了一些`name`值示例，例如：

*   `author`
*   `keywords`
*   `description`
*   `copyright`
*   `date`
*   `ROBOTS`

对于`http-equiv`价值观，例如：

*   `Expires`
*   `PICS-Label`
*   `Content-Type`

# python - Python：在命令行中添加到包含路径

> ID：16171688
> 
> 赞同：0
> 
> 时间：2013-04-23T14:15:27.527
> 
> 标签：python, unit-testing, include, include-path

有没有办法在命令行上向 python 添加包含路径？我想要做的是运行一个单元测试，它使用 lib 目录中的一些代码：

$ python -I lib/test/my-test.py

但这失败了。我可以在 my-test.py 中附加到我的路径，但这似乎不是最佳的，因为它依赖于路径。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T14:19:48.343

使用[`PYTHONPATH`环境变量](http://docs.python.org/2/using/cmdline.html#environment-variables)：

```
PYTHONPATH=lib/ python test/my-test.py 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T14:21:16.740

我不相信有一个命令行开关，但你可以设置 PYTHONPATH 环境变量来包含 lib 目录：

```
PYTHONPATH=$PYTHONPATH:`pwd`/lib/ python test/my-test.py 
```

# ios - 更改具有平滑推送过渡且没有导航控制器的视图控制器

> ID：16171690
> 
> 赞同：1
> 
> 时间：2013-04-23T14:15:38.953
> 
> 标签：ios, objective-c, animation, ios6, presentviewcontroller

我正在尝试通过平滑而漂亮的过渡从`viewcontroller`view1 更改为`viewcontroller`view2，其中 view1 在一秒钟内被 view2 推到左侧。我对我的 iPhone 应用程序中想要的内容做了一个简单的说明。

![在此处输入图像描述](https://i.stack.imgur.com/uHOsC.png)--> ![在此处输入图像描述](https://i.stack.imgur.com/NE4v6.png)--> ![在此处输入图像描述](https://i.stack.imgur.com/BSeS4.png)-->![在此处输入图像描述](https://i.stack.imgur.com/NF18Y.png)

我正在使用情节提要并为 iOS 6 及更高版本进行开发。我没有使用segues。目前，我正在使用此代码从 view1 更改为 view2，而 Xcode 中没有任何动画：

```
SecondViewController *viewTwo = [self.storyboard instantiateViewControllerWithIdentifier:@"View2"];
[self presentViewController:viewTwo animated:NO completion:nil]; 
```

我正在寻找可以替换我现有代码的代码。通过推送转换从 view1 更改为 view2 的代码

**注意**：我没有使用`NavigationControllers`！只是正常`ViewControllers`。我宁愿用代码来做到这一点。

**编辑**：我知道如果我使用导航控制器，这将很容易做到，但问题是我已经完成了故事板的构建，并且我已经使用普通视图控制器构建了所有内容。这产生了我的第二个问题：

有什么办法可以简单地将我`UIViewControllers`的工作转换为`UINavigationControllers`. 无需删除我的`UIViewController`并仅使用`UINavController`?

**回答**： 我通过在我的项目中实现导航控制器解决了我的问题。我之前完全误解了导航控制器的整个概念，但我现在已经弄清楚了。所以我的问题解决了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T17:55:31.327

为 view2 设置动画。使用此代码。

```
-(void)ViewNavigationOnLeftTabs
{
   self.view.frame=CGRectMake(420, 0,self.view.frame.size.width,self.view.frame.size.height);

    [UIView beginAnimations:@"Anim2" context:nil];
    [UIView setAnimationDuration:0.4];
    [UIView setAnimationCurve:UIViewAnimationCurveEaseIn];
    [UIView setAnimationDelegate:self];
    self.view.frame=CGRectMake(0, 0,self.view.frame.size.width,self.view.frame.size.height);
    [UIView commitAnimations];
}
-(IBAction)nextView
{
    SecondViewController *sampleV=[[SecondViewController alloc] init];
    [self.view addSubview:sampleV.view];
    [self ViewNavigationOnLeftTabs];
} 
```

在这里，我完全按照您的要求为 secondViewController 添加了过渡效果。您需要在动画期间处理背景视图（view1）。

我在我的应用程序中使用了这个代码，它对我来说工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T14:39:25.240

考虑使用容器视图控制器。这是一个教程： [http ://www.cocoanetics.com/2012/04/ contains-viewcontrollers/](http://www.cocoanetics.com/2012/04/containing-viewcontrollers/)

# c# - 为 Web 应用程序中创建的每个新登录会话创建日志文件

> ID：16171693
> 
> 赞同：1
> 
> 时间：2013-04-23T14:15:42.690
> 
> 标签：c#, asp.net, session, logging, log4net

我需要在登录后为每个用户创建一个新的日志文件。我还需要在日志文件中为每个新会话指定记录器配置。

有没有可用的解决方案。全球.asax

```

    void Application_Start（对象发送者，EventArgs e）
    {
        log4net.Config.XmlConfigurator.Configure();
        log4net.ILog 记录器 = log4net.LogManager.GetLogger(System.Reflection.MethodBase.GetCurrentMethod().DeclaringType);
        logger.Info("记录器进程开始");
        logger.Info("*************************************************** ************");
        logger.Info("项目名称：" + "报告和任务导航");
        logger.Debug("发布日期：" + DateTime.Today);
        logger.Debug("发布版本：" + ConfigurationManager.AppSettings.Get("releaseVersion"));
        logger.Info("发布日期：" + DateTime.Today);
        logger.Info("发布版本：" + ConfigurationManager.AppSettings.Get("releaseVersion"));
        logger.Debug("环境操作系统：" + Environment.OSVersion.ToString());
        logger.Debug("框架工作：" + Environment.Version);
        logger.Info("LogFileName - " + ConfigurationManager.AppSettings.Get("fileValue"));
        logger.Info("MaxSizeRollBackups -" + ConfigurationManager.AppSettings.Get("maxSizeRollBackups"));
        logger.Info("MaximumFileSize -" + ConfigurationManager.AppSettings.Get("maximumFileSize"));
        logger.Info("DatePattern - " + ConfigurationManager.AppSettings.Get("datePattern"));
        logger.Info("ConversionPattern -" + ConfigurationManager.AppSettings.Get("conversionPattern"));
        logger.Info("记录器详细信息分配成功");
        logger.Info("记录器初始化过程结束");
        logger.Info("*************************************************** ************");
        logger.Info("");

    }

    void Application_End（对象发送者，EventArgs e）
    {
        // 在应用程序关闭时运行的代码

    }

    void Application_Error（对象发送者，EventArgs e）
    {
        // 发生未处理错误时运行的代码

    }

    void Session_Start（对象发送者，EventArgs e）
    {
        // 新会话启动时运行的代码

    }

    void Session_End（对象发送者，EventArgs e）
    {
        //log4net.LogManager.ResetConfiguration();
    }

```

**编辑：**我尝试在登录成功后放置日志文件创建代码，但我无法记录登录失败数据。

登录后创建打印日志模板的任何想法也可以记录有关登录过程成功和失败场景的数据。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-05T12:43:45.183

我找到了问题的解决方案，而不是在 global.asax 中加载记录器，我使用回发加载到应用程序起始页面（登录页面）中，因此每当创建新的 sessin 时它都会创建一个新文件。

# java - 编译 JavaFX 应用程序时出错

> ID：16171695
> 
> 赞同：1
> 
> 时间：2013-04-23T14:15:45.610
> 
> 标签：java, javafx-2, javafx, fxml, scenebuilder

我是新手`java`，我正在尝试按照[教程](http://edu.makery.ch/blog/2012/11/16/javafx-tutorial-addressapp-1/)`JavaFX`在 Eclipse 上构建一个应用程序，并且完全相同，该应用程序非常简单，当我尝试编译它时，我得到了一堆我什至没有的错误理解 ：`e(fx)clipse`

```
Exception in Application start method
Exception in thread "main" java.lang.RuntimeException: Exception in Application start method
    at com.sun.javafx.application.LauncherImpl.launchApplication1(LauncherImpl.java:403)
    at com.sun.javafx.application.LauncherImpl.access$000(LauncherImpl.java:47)
    at com.sun.javafx.application.LauncherImpl$1.run(LauncherImpl.java:115)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.IllegalStateException: Location is not set.
    at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2021)
    at ch.makery.address.controler.MainApp.start(MainApp.java:29)
    at com.sun.javafx.application.LauncherImpl$5.run(LauncherImpl.java:319)
    at com.sun.javafx.application.PlatformImpl$5.run(PlatformImpl.java:206)
    at com.sun.javafx.application.PlatformImpl$4.run(PlatformImpl.java:173)
    at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
    at com.sun.glass.ui.win.WinApplication.access$100(WinApplication.java:29)
    at com.sun.glass.ui.win.WinApplication$2$1.run(WinApplication.java:67)
    ... 1 more 
```

请你能告诉我我错过了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T15:16:37.280

You have to set the location of the `FXML` file in your [loader](http://docs.oracle.com/javafx/2/api/javafx/fxml/FXMLLoader.html), be sure that you are providing the correct [PATH](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getResource%28java.lang.String%29) to your `FXML` file.

**PS:** [Netbeans](https://netbeans.org/) is the best choice for a `JavaFX` beginner, start [Here](http://docs.oracle.com/javafx/).

# proxy - 从主机访问在 VM 内的 Grunt-Proxy 服务器上运行的 AngularJS 应用程序

> ID：16171699
> 
> 赞同：2
> 
> 时间：2013-04-23T14:15:59.180
> 
> 标签：proxy, angularjs, gruntjs

在我们的开发环境中，我们在 Windows 7 主机上运行 Ubuntu 虚拟机。我们发现，如果我们将 Gruntfile 的“connect.options.hostname”更改为“0.0.0.0”，我们可以从主机中的 Internet Explorer 访问我们在 VM 中运行的 Angular 应用程序。

当我们从 Angular 访问一些 Web 服务时，为了避免跨域错误，我们设置了一个 Grunt-Proxy 服务器。这在 VM 中运行良好。从主机，任何时候应用程序尝试访问 Web 服务都会失败（因为它不在代理端口上）尝试访问端口 9000 上的服务器（服务器在端口 8888 上运行）。当我尝试在代理端口 (8050) 上访问应用程序时，我从主机收到 404 错误 - 我不确定如何继续此操作。

我的代理在 Gruntfile 中设置如下：

```
proxy: {
  proxy1: {
    options: {
      port : 8050,
      host : 'localhost',
      router : {
        'localhost/rest/*' : 'localhost:8888',
        'localhost' : 'localhost:9000'
      }
    }
  }
}, 
```

我尝试使用其中一些设置，但没有任何运气。任何帮助，将不胜感激。

# jquery - jquery交换内容使页面默认加载

> ID：16171700
> 
> 赞同：0
> 
> 时间：2013-04-23T14:16:02.087
> 
> 标签：jquery, default, onload

我需要 con1 显示活动并加载页面加载。

这是我交换内容的代码。当我们点击 con1 con2 的 id 等时，我正在使用外部 php 页面交换内容。

我想让 con1 显示页面的加载和显示活动的链接，但是当你转到页面时，它只显示我的 div，没有内容，直到点击链接。单击链接后，它会悬停显示处于活动状态并且效果很好。

这是我的代码

```
$(document).ready(function() {
    $("a.topnav").click(function() {
        $("a.topnav.active").removeClass("active");
        $(this).addClass("active");
    });
});

function swapContent(cv) {
    var url = "content.php";
    $.post(url,{contentVar: cv},function(data){
        $("#myDiv").html(data).show();
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:53:05.050

如果点击链接后一切正常，为什么不触发点击事件`$(document).ready`呢？

```
$(document).ready(function() {
    $("a.topnav").click(function() {
        $("a.topnav.active").removeClass("active");
        $(this).addClass("active");
    });

    $("#link1").click(); //trigger click
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T14:35:36.633

添加`class="active"`到页面加载时需要处于活动状态的 con1 的链接。

# html - 仅使用图像创建 HTML 电子邮件 - gmail 中的空白

> ID：16171702
> 
> 赞同：-2
> 
> 时间：2013-04-23T14:16:11.150
> 
> 标签：html, image, gmail, dreamweaver, newsletter

我通过photoshop制作并切片。我不知道我在做什么。任何帮助表示赞赏

这是html [http://pastie.org/7703074](http://pastie.org/7703074)

在gmail中时，图像上方和下方都有间隙。但是左右两边没有任何空隙。我已经尝试过样式显示块，但这无济于事

我想摆脱差距

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:06:04.017

这是一个 gmail 问题 - 请参阅[Gmail 显示图像之间的间隙](https://stackoverflow.com/questions/4890876/gmail-displaying-gaps-between-images?rq=1)

我注意到的第一件事是你的表的行没有相同的列数。你打算在你的表中有多少列？每行都应该定义那么多列。

# ruby-on-rails - Rails：带有 Ajax 和 Kaminari 的“加载更多”按钮

> ID：16171705
> 
> 赞同：7
> 
> 时间：2013-04-23T14:16:26.767
> 
> 标签：ruby-on-rails

我想用 Kaminari 创建一个“加载更多”的 ajax 分页。我正在使用这段代码：

```
class BienvenueController < ApplicationController
  def index
    @articles = Admin::Article.page(1).per(2)
    respond_to do |format|
      format.html
      format.js 
    end
  end
end

# Bienvenue#index

<div class="container"  style="min-width:<%= @width %>px">
<%= render "shared/articles" %>
<%= link_to_next_page @articles, 'Load More', :remote => true, :id=>"load_more_link" %> 
```

```
# Shared/articles

<% @articles.each do |a| %>
        <article class="<%= a.rubrique.color %>">
                <div class="sharing">
                    <%= image_tag "facebook-32.png" %>
                </div>
                <p class="color<%= a.rubrique.color %>"><i>Le <%= I18n.localize(a.created_at, :format => :long) %>  par David Perrotin</i></p>
                <h1><%= a.titre %></h1>
                <div class="excerpt">
                    <%= a.chapo.html_safe %>
                </div>
                <div class="image">
                    <%= image_tag a.mainphoto.url(:medium), :width=>"100%" %>
                </div>
                <div class="contenu">
                    <%= a.contenu.html_safe %>
                </div>
                <div class="readmore">
                    <%= link_to "Continuer la lecture", article_path(a) %>
                </div>
            </article>
        <% end %>

# index.js.erb

$('.container').append("<%= escape_javascript(render 'shared/articles')%>");
$('#load_more_link').replaceWith("<%= escape_javascript(link_to_next_page(@articles,    'Load More', :remote => true, :id=>'load_more_link'))%>"); 
```

但问题是，当我点击“加载更多”时，它总是显示两篇相同的文章，部分内容永远不会再刷新两篇文章，就像我想要的那样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-01-30T14:41:41.750

我刚刚遇到了一个可能对其他人有帮助的问题。根据您的 jQuery 版本，不要`replaceWith`在`#load_more_link`.`index.js.erb`

有一个回归（[http://bugs.jquery.com/ticket/13401](http://bugs.jquery.com/ticket/13401)），一个空的 replaceWith 什么都不做，所以在你的集合的最后一页上，`link_to_next`将是空的，使行：`$('#load_more_link').replaceWith('');`因此不会替换最后一个“更多”按钮，因此您将不断加载数据集的最后一页。

通过更新 jQuery 版本或使用`empty().html('...')`替换替换来修复。

# c#-4.0 - TeamCity“.Net Process Runner”挂起

> ID：16171710
> 
> 赞同：1
> 
> 时间：2013-04-23T14:16:33.557
> 
> 标签：c#-4.0, msbuild, continuous-integration, teamcity, msdeploy

作为 CI 的一部分，我们已经开始将我们的几个项目之一迁移到团队城市。下面是我们如何设置 teamcity 构建。我们正在尝试部署网站。

1）构建步骤1（包安装）

使用“命令行”运行器类型安装所需的包。

2) 构建步骤 2（构建）

使用 Runner 类型“Visual Studio (sln)”(Visual Studio 2010) 构建网站。

3) 构建步骤 3（部署网站）

使用“.Net Process Runner”，deployer.exe（使用 .Net Framework 4 构建的 x86）部署站点。

Deployer.exe 读取配置文件。配置文件包含我们想要推送构建的“BuildId”、“Environment”和“Servers”。

```
<buildType id="bt52">
    <env name="Debug">
        <server path="SERVER1" />
    </env>
    <env name="QA">
    <server path="SERVER2" />
    <server path="SERVER3" />
</env>
<env name="UAT">
    <server path="SERVER4" />
    <server path="SERVER5" />
</env>
</buildType> 
```

Deployer.exe 使用所需参数调用，如下所示。它读取配置并将站点部署到 Server2 和 Server3。

Deployer.exe "bt52" "QA" "siteQA" "E:\BuildAgent\work\2483052e33e5e1e8\src\diy\" msdeploy.exe

问题区域是第 3 步。

当我们使用 .Net 进程运行器作为团队城市的一部分运行 deployer.exe 时，我们看到它挂起并且有时甚至 45 分钟都没有响应。当我们尝试使用命令行脚本从构建服务器执行相同的 deployer.exe 时，会在几秒钟内执行。

> E:\TeamCity_custom_applications\deployer>Deployer.exe farm1-1 QA siteQA E:\BuildAgent\work\2483052e33e5e1e8\src\diy\ msdeploy.exe

信息

> ：处理批处理运行...信息：处理命令...msdeploy.exe -verb:sync -source:contentPath="E:\BuildAgent\work\2483052e33e5e1e8\src\diy\" -dest:contentPath="siteQA", wmsvc="SERVER2",userName="*****",password="******",authType="Basic"-skip:objectName=filePath,absolutePath=web.config -skip:objectName=dirPath ,absolutePath="bin" -enableRule:DoNotDeleteRule -allowUntrusted 信息：输出>>总更改：0（添加0，删除0，更新0，更改0参数，复制0字节）信息：错误>>（无）信息：退出代码>> 0 信息：
> 
> 处理命令 ...msdeploy.exe -verb:sync -source:contentPath="E:\BuildAgent\work\2483052e33e5e1e8\src\diy\" -dest:contentPath="siteQA",wmsvc="SERVER3",userName=" ******",password="******",authType="Basic" -skip:objectName=filePath,absolutePath=web.config -skip:objectName=dirPath,absolutePath="bin" -enableRule ：DoNotDeleteRule -allowUntrusted 信息：输出>>总更改：0（0添加，0删除，0更新，0参数更改，0字节复制）信息：错误>>（无）信息：ExitCode >> 0

信息：部署脚本完成。

我们观察到的另一件事是通过 teamcity 运行 deployer.exe 我看到站点内容被复制但仅针对 1 台服务器和 teamcity 构建状态保持在“运行”模式。我想知道是否有人可以对我如何研究这个问题提出一些见解。

**更新1：**

感谢您花时间研究它！我们最终做的是，我们没有从“cmd.exe”运行命令“msdeploy.exe”，而是将“msdeploy.exe”位置添加为环境变量，并在#服务器的循环中执行“msdeploy.exe”。这解决了挂起的问题。现在我很想知道为什么它会以这种方式运行，如果你从“cmd.exe”执行“msdeploy.exe”，它会在直接运行“msdeploy.exe”时挂起，它会成功执行。任何对此的见解将不胜感激。

**更新 2：**

我添加了使用流程资源管理器解释行为的图像。如果我们从进程资源管理器中杀死 msdeploy.exe，那么接下来对该服务器的所有部署都不会出现构建挂起的问题。请看下图

![在此处输入图像描述](https://i.stack.imgur.com/jdOhx.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T08:17:23.743

您似乎在 TeamCity 中配置了 NUnit 构建步骤，并从您的测试中调用 cmd.exe。这看起来像是测试代码的问题。如果您直接使用 NUnit 运行有问题的测试，它很可能会在没有 TeamCity 的情况下重现。

正如 Richard 所指出的，问题的根本原因很可能与 stdin/stdout 处理有关。如果你想在你的代码中修复它，你可以尝试通过显式关闭 stdin 或其他方式进行实验，尝试在其中写入一些东西等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T11:44:49.990

我们所做的解决方法是，我们观察到 msdeploy 执行和部署的时间不超过 3-5 秒（即使对于我们最大的项目，几乎 300mb 的网站）。所以我们将超时设置为 20 秒。到目前为止，自过去 1 周以来，我们还没有看到任何问题，希望它不会造成更多麻烦，但我们仍然不确定为什么会出现这种行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T03:44:10.030

老实说，听起来您遇到了重定向输入/输出流的问题。TeamCity 在完全无头的环境中运行您的应用程序，然后您反过来尝试重定向和解析`msdeploy.exe`

如果是这种情况，我建议考虑使用[MSDeploy API](http://msdn.microsoft.com/en-au/library/microsoft.web.deployment%28v=vs.90%29.aspx)而不是`msdeploy.exe`. 后者只是前者的命令行包装器，因此您可以使用所有功能。如果您需要入门帮助，可以在 IIS 博客上找到一个[示例部署应用程序。](http://blogs.iis.net/moshaikh/archive/2010/03/08/web-deploy-api-web-application.aspx)

# mysql - MySQL 服务器未在 Raspberry Pi 上启动

> ID：16171719
> 
> 赞同：5
> 
> 时间：2013-04-23T14:16:48.027
> 
> 标签：mysql, linux, raspberry-pi

我正在使用运行 Debian Linux 的 Raspberry Pi。我正在尝试安装 MySQL 服务器并运行它，这就是我所做的：

```
# sudo apt-get install mysql-server mysql-client php5-mysql 
```

没有错误。现在我重新启动了系统，然后在启动时我得到：

```
[FAIL] startpar: service(s) returned failure: mysql ... failed! 
```

我试过了

```
# sudo service mysql start
mysql: unrecognized service 
```

最后我尝试了

```
# /etc/init.d; mysql
ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2) 
```

我发现我没有名为 mysqld 的文件夹`in /var/run`。但是我读到这里的sock文件应该是第一次创建服务器时创建的？

你有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T22:10:10.987

看起来你的mysql服务器没有启动。我通常运行停止命令，然后重新启动它：

```
mysqld stop
mysql.server start 
```

同样的错误，这对我有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T16:29:59.537

```
/etc/init.d; mysql 
```

启动 mysql 服务器的*常用*方法是

```
/etc/init.d/mysqld start 
```

它失败的原因应该写入日志（通常是/var/log/mysqld.log） - 日志说什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-15T13:00:29.033

查看 /var/log/mysql/error.log

# jquery - 使用 jQuery 读取动态创建的内容

> ID：16171722
> 
> 赞同：-1
> 
> 时间：2013-04-23T14:16:57.147
> 
> 标签：jquery

当谈到 jQuery 时，我是个新手，但感谢另一个 stackoverflow 成员，我有一些代码允许用户单击单选按钮并让它添加一个表格行，其中填充了他们单击的单选按钮链接的文本。这是jQuery代码：

```
$('.addRow').click(function() {
    var tr = $(
        '<tr><td class="cat"></td>' 
        + '<td class="sel"></td>'
        + '<td><textarea name="cmo-paragraph[' + count + ']">Click to edit (id ' 
        + count 
        + ')</textarea></td></tr>'
    );

    $('.mainTable > tbody:last').one().append(tr);
    tr.find(".cat").text($(this).closest("li.category").attr("title"));
    tr.find(".sel").text($(this).closest("li.select").attr("title"));
    count++;
}); 
```

这是广播列表的片段：

```
<li class="category" value="1" title="Chronic Pain Referral">Chronic Pain Referral
    <ul>
        <li class="select" title="Chronic referral">
            <input type="radio" class="addRow" id="radio1" name="modalities" value="1">
            <label for="radio1">Chronic referral</label>
        </li>
    </ul>
</li> 
```

这将成功地每次在表格中添加一行，其中“类别”和“选择”表格单元格分别在前端填充“慢性疼痛推荐”和“慢性推荐”。

问题是我希望能够以表单形式提交此信息以保存到数据库。由于“count”变量，我可以遍历行，因此我可以捕获 textarea 数据，但当前未传递每行的“category”和“select”单元格的值。

我尝试了以下代码更改，但似乎不起作用：

```
$('.addRow').click(function() {
    var tr = $(
        '<tr><td class="cat"><input type="hidden" class="hiddenCat" name="category[' + count + ']"></td>' 
        + '<td class="sel"></td>'
        + '<td><textarea name="paragraph[' + count + ']">Click to edit (id ' + count + ')</textarea></td></tr>'
    );

    $('.mainTable > tbody:last').one().append(tr);
    tr.find(".cat").text($(this).closest("li.category").attr("title"));
    tr.find(".hiddenCat").text($(this).closest("li.category").attr("value"));
    tr.find(".sel").text($(this).closest("li.select").attr("title"));
    count++;
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T15:15:55.913

似乎我没有很好地解释我的情况，但我确实想出了我正在寻找的答案，我将分享。

```
$('.addRow').click(function() {
        var tr = $(
        '<tr><td class="cat"></td>' 
        + '<td class="sel"></td>'
        + '<td><textarea name="paragraph[' + count + ']">Click to edit (id ' + count + ')</textarea></td><td><input type="text" name="catText[' + count + ']" class="hiddenCat"></td></tr>');
        $('.mainTable > tbody:last').one().append(tr);
        tr.find(".cat").text($(this).closest("li.category").attr("title"));
        tr.find(".hiddenCat").val($(this).closest("li.category").attr("title"));
        tr.find(".sel").text($(this).closest("li.select").attr("title"));
        count++;
      }); 
```

我必须添加另一个表格单元格以放入隐藏的文本框，因为它在我最初放置的单元格中被覆盖。现在，当用户单击“慢性疼痛转诊”选项时，一个隐藏的文本框会捕获该信息，以便我可以在表单中传递该信息。

# php - php，需要 1 层以上的文件

> ID：16171724
> 
> 赞同：0
> 
> 时间：2013-04-23T14:17:00.550
> 
> 标签：php

我是 php 编程的新手，我很高兴你能抽出时间来回答这个新手问题。至于我的问题，我是否可以“要求”一个高于 1 级层次结构的文件？

我是什么意思让我们假设这是一个文件层次结构

> 文件夹->(Html, Includes, Templates)->Html->Project1->index.php

现在，我如何从这里访问包含文件夹？我知道从 HTML 文件夹中`index.php`我可以做到 `require("../includes/config.php");`，但我想从 project1 中获取它`index.php`，这可能吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T14:22:33.347

我不确定我是否理解您的问题，但如果您想引用一个文件夹，上面有 2 个文件夹而不是一个文件夹，您可以使用`../../includes/config.php`

发生了什么：本质上， `..`是父文件夹的 linux 简写。因此，通过`..`多次使用，您可以在文件夹层次结构中越来越高，直到您位于当前文件共享的父文件和您要包含的文件中。

您实际上可以使用任何有效的文件路径来包含，因此即使是硬引用（例如`/var/public/myinclude.php`）也可以工作。然而，这是非常糟糕的做法，因为它破坏了 yoru 代码的可移植性 - 如果将其移动到不同的服务器，除非该服务器相同，否则它将中断。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T14:22:54.710

`../` 只需为您需要向上的每个文件夹添加一个额外的“目录级别” 。因此，对于`project1/index.php`，您将执行以下操作：

```
require("../../includes/config.php"); 
```

# ios - MKMapView 上具有特定大小、位置和标题的矩形概览

> ID：16171726
> 
> 赞同：0
> 
> 时间：2013-04-23T14:17:04.060
> 
> 标签：ios, objective-c, geolocation, location, mkmapview

我有一个问题，涉及在`MKMapView`.

我得到了当前的用户位置（坐标），然后我想`MKMapView`在用户位置是底部中心坐标的位置上绘制一个矩形叠加层。矩形覆盖层必须宽 10 米（坐标两侧各 5 米）和 100 米高。

用户旋转`MKMApView`时旋转，因此矩形应始终指向用户前进的方向。

有人知道怎么做这个吗？我有点坚持这个。

# kinect - Kinect快速手部追踪方法

> ID：16171730
> 
> 赞同：0
> 
> 时间：2013-04-23T14:17:11.577
> 
> 标签：kinect, kinect-sdk

如何使用 kinect 跟踪快速手部运动？我已经尝试过 Openni 和 Microsoft sdk 来跟踪手。在他们两个身上，关节都有很多抖动和不准确的运动。

这是一个kinect水果忍者的示例视频：[示例视频](http://www.youtube.com/watch?v=B8Osemh24BQ)

在那段视频中，没有抖动和不准确，而且它还在跟踪快速的手部动作。

我错过了什么？是否有任何我应该研究的 kinect 硬件版本或类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T14:23:09.623

My best guess is that Fruit Ninja applies some sort of smoothing at some point. What you're seeing in that video is almost certainly not the raw data they're getting from the Kinect. The data from the Kinect will always have some kind of jitter; real-world sensor data almost always does. You'll need to smooth it - exactly how to do that depends on the application; it could be something simple like modelling a kind of damping and/or inertia on the point that's being moved by the hand (which is what I suspect Fruit Ninja is doing), or you could look at something like a [Kalman filter](http://en.wikipedia.org/wiki/Kalman_filter) for a robust (but more computationally-intensive) way to reduce the noise in your sensor readings.

# c#-4.0 - 如何在 C# 中使用 LDAP 在 Active Directory 中添加新组

> ID：16171731
> 
> 赞同：8
> 
> 时间：2013-04-23T14:17:15.473
> 
> 标签：c#-4.0, active-directory, ldap

我有使用 LDAP 和 C# 在 Active Directory 中创建新组的场景。

请提供建议

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-23T14:21:54.053

CodeProject 上的这篇文章是一个非常好的起点：

[Howto：（几乎）通过 C# 在 Active Directory 中的所有内容](http://www.codeproject.com/Articles/18102/Howto-Almost-Everything-In-Active-Directory-via-C)

要创建组，您需要：

*   绑定到要在其中创建组的容器
*   创建组并定义一些属性

代码：

```
public void Create(string ouPath, string name)
{
    if (!DirectoryEntry.Exists("LDAP://CN=" + name + "," + ouPath))
    {
        try
        {
            // bind to the container, e.g. LDAP://cn=Users,dc=...
            DirectoryEntry entry = new DirectoryEntry("LDAP://" + ouPath);

            // create group entry
            DirectoryEntry group = entry.Children.Add("CN=" + name, "group");

            // set properties
            group.Properties["sAmAccountName"].Value = name;

            // save group
            group.CommitChanges();
        }
        catch (Exception e)
        {
            Console.WriteLine(e.Message.ToString());
        }
    }
    else { Console.WriteLine(path + " already exists"); }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-07-23T17:17:54.333

有关设置组范围和组类型的一些附加信息，枚举是：

```
public enum GroupType : uint
{
    GLOBAL       = 0x2,
    DOMAIN_LOCAL = 0x4,
    UNIVERSAL    = 0x8,
    SECURITY     = 0x80000000
} 
```

SECURITY（从 ADS_GROUP_TYPE_SECURITY_ENABLED 缩写）与前 3 个枚举相结合，为您提供 6 个可能的选项，没有它，一个组将成为一个分发组。

这些值被设置为一个 int，它与安全标志一起变为负数，因此需要使用 unchecked()。或者，您可以为组合值创建一个枚举。

```
GLOBAL       | SECURITY = 0x80000002 = -2147483646
DOMAIN_LOCAL | SECURITY = 0x80000004 = -2147483644
UNIVERSAL    | SECURITY = 0x80000008 = -2147483640 
```

该值存储在“groupType”属性中：

```
var groupType = unchecked((int)(GroupType.UNIVERSAL | GroupType.SECURITY));
group.Properties["groupType"].Value = groupType;
group.CommitChanges(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T14:21:31.247

看看这个链接： http: [//msdn.microsoft.com/en-us/library/ms180903 (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms180903(v=vs.80).aspx)

我想你可能正在寻找这部分代码：

```
// Bind to the domain that this user is currently connected to.
DirectoryEntry dom = new DirectoryEntry();

// Find the container (in this case, the Consulting organizational unit) that you 
// wish to add the new group to.
DirectoryEntry ou = dom.Children.Find("OU=Consulting");

// Add the new group Practice Managers.
DirectoryEntry group = ou.Children.Add("CN=Practice Managers", "group");

// Set the samAccountName for the new group.
group.Properties["samAccountName"].Value = "pracmans";

// Commit the new group to the directory.
group.CommitChanges(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-14T04:23:18.417

我刚刚解决了 .NET Core 2.0 应用程序的这个问题 - 这是使用 .NET Core 2.0+ 的人的更新解决方案。

这利用了 NuGet 包`System.DirectoryServices.Protocols`：

```
try
{
    string adminUsername = "myAdminUser";
    string namingContext = "CN=Test123,DC=MyCompany,DC=com";
    string hostNameAndSSLPort = "192.168.123.123:636";
    string adminuser = $"CN={adminUsername},{namingContext}";
    string adminpass = "password";

    using (LdapConnection connection = new LdapConnection(hostNameAndSSLPort))
    {
        LdapSessionOptions options = connection.SessionOptions;
        options.ProtocolVersion = 3;
        options.SecureSocketLayer = true;

        connection.AuthType = AuthType.Basic;

        NetworkCredential credential = new NetworkCredential(adminuser, adminpass);
        connection.Credential = credential;
        connection.Bind();

        string rolesContext = $"CN=Roles,{namingContext}";
        string nameOfNewGroup = "MyGroup";
        string groupDN = $"CN={nameOfNewGroup},{rolesContext}";
        string dirClassType = "group";

        AddRequest addRequest = new AddRequest(groupDN, dirClassType);
        AddResponse addResponse = (AddResponse)connection.SendRequest(addRequest);
        Console.WriteLine($"A {dirClassType} with a dn of\n {groupDN} was added successfully. The server response was {addResponse.ResultCode}");
    }
}
catch (Exception e)
{
    Console.WriteLine(e.ToString());
} 
```

[微软提供的这个示例项目](https://download.microsoft.com/download/1/2/f/12fbae49-1d05-4542-87a2-9c9dfedafc0c/MS_Sample_Pack_For_SDSP.EXE)中还有很多很棒的代码示例。

# jpa - JPQL 在 ObjectDB 中不存在

> ID：16171733
> 
> 赞同：-1
> 
> 时间：2013-04-23T14:17:17.583
> 
> 标签：jpa, criteria, jpql, objectdb

我正在尝试将我的 Spring 项目从 Hibernate 迁移到 ObjectDB。在 ObjectDB 页面上，他们说 ObjectDB 与 JPA 100% 兼容。但是，我对这个 JPQL 查询有疑问：

```
SELECT e FROM Employee e WHERE e.present = false AND NOT EXISTS 
(SELECT c FROM Computer c WHERE c.employeeEntity = e) 
ORDER BY e.name 
```

使用 Hibernate，这个查询没有问题，但是 ObjectDB 抛出异常：

```
com.objectdb.o.UserException: Unexpected query token 'EXISTS' 
```

第二个问题是标准语言。这段代码：

```
In<Employee> inExpression = cb.in(root.get(Computer_.employeeEntity));
for (Long id : emplIds) {
    Employee e = new Employee(id);
    inExpression = inExpression.value(e);
}
list.add(inExpression); 
```

正在使用 Hibernate，它正在使用 ObjectDB：

```
com.objectdb.o.UserException: Unexpected query token ':l2'
at com.objectdb.o.MSG.d(MSG.java:61)
at com.objectdb.o.TKN.J(TKN.java:765)
at com.objectdb.o.QNF.B(QNF.java:894)
at com.objectdb.o.QNF.I(QNF.java:1294)
at com.objectdb.o.QNF.k(QNF.java:315)
at com.objectdb.o.QNF.H(QNF.java:1270)
at com.objectdb.o.QNF.k(QNF.java:210)
at com.objectdb.o.QNF.t(QNF.java:611)
at com.objectdb.o.QNF.t(QNF.java:605)
at com.objectdb.o.QNF.k(QNF.java:218)
at com.objectdb.o.QNF.j(QNF.java:135)
at com.objectdb.o.QRC.z(QRC.java:321)
at com.objectdb.o.QRC.v(QRC.java:212)
at com.objectdb.o.QRC.u(QRC.java:166)
at com.objectdb.o.QRM.U6(QRM.java:250)
at com.objectdb.o.MST.U6(MST.java:933)
at com.objectdb.o.WRA.U6(WRA.java:291)
at com.objectdb.o.WSM.U6(WSM.java:113)
at com.objectdb.o.STC.r(STC.java:449)
at com.objectdb.o.SHN.aj(SHN.java:489)
at com.objectdb.o.SHN.K(SHN.java:156)
at com.objectdb.o.HND.run(HND.java:132)
at java.lang.Thread.run(Unknown Source) 
```

有谁知道如何解决这些问题？

米兰

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T08:39:33.753

> com.objectdb.o.UserException：意外的查询令牌“存在”

ObjectDB 不知道`EXISTS`。请参阅[http://www.objectdb.com/java/jpa/query/jpql/comparison](http://www.objectdb.com/java/jpa/query/jpql/comparison)。

相反，您可以使用它`IS NOT NULL`来验证存在。请注意，`SELECT c FROM Computer c WHERE c.employeeEntity = e`必须返回单个实例而不是多行结果集。

这不是 ObjectDB 问题，因为它植根于 SQL / sql 方言。

见[https://stackoverflow.com/a/6808503/1549387](https://stackoverflow.com/a/6808503/1549387)

> com.objectdb.o.UserException：意外的查询令牌'：l2'

你能打印这个的堆栈跟踪吗？它看起来像一个未知的命名参数。您能否将日志记录级别发送到 FINE 或 FINEST 以查看生成的 SQL？

# ios - IOS Paypal MPL 重新初始化问题

> ID：16171737
> 
> 赞同：1
> 
> 时间：2013-04-23T14:17:28.467
> 
> 标签：ios, objective-c, paypal

我正在使用`Paypal's MPL Framework`，一切正常。我需要动态更改 Paypal 应用程序 ID（应用程序根据用户偏好使用不同的 ID）。我正在我的主页上初始化 Paypal 以遵循 Paypal 文档。

我想知道如果用户更改为其他设置，我是否可以重新初始化贝宝？！

我尝试多次调用，`[PayPal initializeWithAppID:appKey forEnvironment:e];`但似乎只有第一个键/调用有效。初始化 Paypal 后的调用我只是忽略了。

唯一的选择是要求用户杀死应用程序并再次运行它，这充其量是烦人的。

像往常一样感谢帮助。

# unit-testing - 在 Zend 控制器上运行 phpunit 时出现 openssl_encrypt() 错误

> ID：16171744
> 
> 赞同：0
> 
> 时间：2013-04-23T14:17:50.147
> 
> 标签：unit-testing, zend-framework, phpunit

我不确定这是 PHP、Zend 还是 PHPUnit 问题...

我的 PHPunit 3.5.15 与 Zend Framework 1.11.11 一起工作得很好。当我尝试调度到具有使用 openssl_encrypt 函数的方法的特定控制器时，在命令行中调用 phpunit 后出现以下错误：

```
C:\wamp\www\MyProject\tests>phpunit
PHP Fatal error:  Call to undefined function openssl_encrypt() in C:\wamp\www\MyProject\application\utils\Crypt.php on line 16 
```

在Apache和PHP中启用了所有的扩展和模块，当我在浏览器上调用控制器时，这些功能都可以正常工作。

有谁知道问题出在哪里？

# spring - Spring MVC 用户检索策略

> ID：16171747
> 
> 赞同：0
> 
> 时间：2013-04-23T14:17:58.163
> 
> 标签：spring, hibernate, model-view-controller, spring-security

我有一个使用 Hibernate 的非常常见的 Spring Web MVC 应用程序。应用程序的用户存储在一个名为 USER 的表中，还存储了用户名、密码和一些其他属性。此外，我正在使用带有 jdbc-user-service 的 Spring 安全性来保护应用程序，以便只有该表中的用户才能使用他们的用户名/密码进行访问。现在我的问题是，一旦登录，我需要经常访问这个用户对象，例如为了得到这个用户的所有订单，这个用户的地址等等。我知道如何访问与我的用户对象共享用户名的 Principal 对象，但我想知道哪个是轻松访问我的自定义用户对象的最佳策略。有几个策略，比如把它放在会话中，编写一个 findUserByUsername() 方法并在需要时调用它（我认为这会导致大量访问数据库）但我正在寻找一种更智能的方法。是否有可能注入用户对象？还是我应该把它放在会话中？如果是这样，实现这一目标的最佳方法是什么？在 Spring 框架登录事件之后我怎么能挂上？有什么建议么？谢谢保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:25:25.077

您始终可以将 UserDetails bean 限定为会话（[链接](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/beans.html#beans-factory-scopes-session)）。当然，这将是一个有状态的 bean，因此只要会话处于活动状态，您就可以自由地存储有关您的用户实体的任何信息并访问它。一趟数据库。

*注意：*用户对象（和任何相关对象）将从Hibernate Session中**分离出来。**在将值“存储”在 bean 中或在以后的处理中访问它们时，请记住这一点。

# php - 重新加载后未应用数据表列定义和重新排序

> ID：16171749
> 
> 赞同：0
> 
> 时间：2013-04-23T14:17:58.930
> 
> 标签：php, javascript, jquery, datatables

我有许多进程使用相同的数据，当用户在页面上时，这些数据会定期更新。现在我想使用数据表来显示这些数据。

我也使用 ColReorder 插件。

问题是我不明白如何强制数据表用新数据“重新加载”这个本地变量。

在“aoColums”设置中也有一堆定义，使用图像的一些数据字段等等。

我更改了 dat var 中的一些数据。试图强制数据表将其放入表中。没运气。我在要使用的 api 中找不到像样的示例或函数。

如果我尝试使用 oTable.fnClearTable() 和 oTable.fnAddData(data) 数据被加载，但不知何故 ColReorder 不适用。

```
myTable = $('#myTable').dataTable({
    "aoColumns": [ ... ],
    "aaSorting": [[1, 'asc']],
    "aaData": data,
    "sScrollY": 200,
    "sScrollX": "100%",
    "sScrollXInner": "150%",
    "bJQueryUI": true,
    "sPaginationType": "full_numbers",
    "sDom": 'R<"H"lfr>t<"F"ip>',
    "iFixedColumns": 3,
    "oColReorder": {
        "aiOrder": [ 0, 8, 2, 3, 4, 5, 6, 7, 1, 9 ]
    }
}); 
```

有任何想法吗？

**编辑** 我制作了一个有效的[jsFiddle](http://jsfiddle.net/aKuHM/4/)并解释了整个问题。看一看，去吧！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T14:42:26.857

我读到了你的问题......我对你的问题采取了另一种方法（它总是关于 dom 操作 xD）......我的答案不是最聪明的，但我认为它有效。

*   我将数据表操作放在一个函数中，并在表中添加一个 div
*   然后我调用那个函数
*   在更新时，我清空 div 并添加与表在数据表操作和填充之前相同的 html
*   然后调用函数再次绘制整个数据表，这样 ColReorder 插件就可以处理更新的数据。

PS：这里是更新的小提琴更多细节：http: [//jsfiddle.net/aKuHM/5](http://jsfiddle.net/aKuHM/5)

现在表格如下所示：

```
<div class="Example" id="Example">
<table id="myTable" class="datatable">
 <thead>
 </thead>
   <tbody>
   </tbody>
 <tfoot>
 </tfoot>
</table>
</div> 
```

并且您的 JS 加载在头部，看起来是这样的：

```
data = [
            ['cell1', 'cell2','cell3','cell4','cell5','cell6','cell17', 'cell8', 'cell9', 'cell10'],
            ['cell1', 'cell2','cell3','cell4','cell5','cell6','cell17', 'cell8', 'cell9', 'cell10'],
            ['cell1', 'cell2','cell3','cell4','cell5','cell6','cell17', 'cell8', 'cell9', 'cell10'],
        ];
        function Saludos(){
        $(function(){
            myTable = $('#myTable').dataTable({
                "aoColumns": [
                    {"sTitle":"col0", "bSearchable": false, "bVisible": true},
                    {"sTitle":"col1", "bSearchable": false, "bVisible": true},
                    {"sTitle":"col2", "bSearchable": true, "bVisible": true},
                    {"sTitle":"col3", "bSearchable": true, "bVisible": true},
                    {"sTitle":"col4", "bSearchable": true, "bVisible": true},
                    {"sTitle":"col5", "bSearchable": false, "bVisible": true},
                    {"sTitle":"col6", "bSearchable": true, "bVisible": true},
                    {"sTitle":"col7", "bSearchable": false, "bVisible": true},
                    {"sTitle":"col8", "bSearchable": true, "bVisible": true,
                        "mRender": function (data, type, row){
                            return '<b><i>'+ row[8] +'</i></b>';
                        }
                    },
                    {"sTitle":"col9", "bSearchable": false, "bVisible": false},
                ],    
                "aaSorting": [[8, 'asc']],
                "aaData": data,
                "sScrollY": 200,
                "sScrollX": "100%",
                "sScrollXInner": "150%",
                "bJQueryUI": true,
                "sPaginationType": "full_numbers",
                "sDom": 'R<"H"lfr>t<"F"ip>',
                "iFixedColumns": 3,
                "oColReorder": {
                    "aiOrder": [ 0, 8, 2, 3, 4, 5, 6, 7, 1, 9 ]
                }
            });

            $('#updatebutton').click(function(){
                updateTable();
            });
        });

        }
        Saludos();
        function updateTable(){
            data[1][8] = "even bolder";
            $('.Example').empty();
            $("#Example").html("<table id='myTable' class='datatable'><thead></thead>  <tbody></tbody><tfoot></tfoot></table>");
            Saludos();
            console.log(data);

        } 
```

# iphone - 如何制作一个图标在一个圆圈中旋转的菜单？

> ID：16171751
> 
> 赞同：3
> 
> 时间：2013-04-23T14:18:11.767
> 
> 标签：iphone, ios, uikit, caanimation

我正在尝试为我的应用程序创建一个带有几个图标的菜单。用户应该能够旋转这个菜单，使图标围绕这个圆形路径改变它们的位置，但不能自行旋转。我之前读过这个[http://www.raywenderlich.com/9864/how-to-create-a-rotating-wheel-control-with-uikit](http://www.raywenderlich.com/9864/how-to-create-a-rotating-wheel-control-with-uikit)所以我可以看到如何跟随手指运动，但我需要这个菜单触摸结束后有惯性旋转。我有两个关于如何做到这一点的问题。

第一个，用图标绕圈移动制作动画的最佳方法是什么？它应该会减慢直到停止，如果用户移动手指的速度足够快，它应该能够完成一整圈以上的动作。

其次，我如何测量手指运动结束时的速度？我尝试使用 locationInView 和 previousLocationInView 并通过它们之间的角度差乘以某个常数来旋转它。问题是，当我将手指放在一个地方一段时间并拿起它时，我仍然会得到圆圈的惯性运动，在这种情况下我根本不希望它移动。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T18:14:51.207

您想使用滚动视图。具体来说，您需要一个隐藏的滚动视图，您可以在其中将平移手势识别器从滚动视图附加到您的自定义菜单视图。然后你实现滚动视图的委托方法来重绘你的菜单。[此 WWDC 视频很好地概述了该过程。](https://developer.apple.com/videos/wwdc/2012/?id=223)这种方法的好处是您可以免费获得真正的 iOS 风格加速和减速。您无需担心手指位置或速度，只需担心滚动视图的内容偏移量。

除非您想在菜单项周围旋转手指。那是一场不一样的球赛……

理论上，可以使用与上述相同的方法将手指旋转一圈。您需要确保`directionalLockEnabled`在滚动视图上将其设置为 NO。问题是确定菜单视图旋转的计算要复杂得多。可能您希望成为模态并检查滚动视图是否`dragging`在回调中。如果它正在拖动，您将使用平移手势上的触摸来找到确切的手指位置来设置旋转。您还希望保留有关手指移动瞬时方向的数据，以便在释放触摸时...如果它没有拖动，则使用滚动视图内容偏移量对旋转应用减速效果（使用在触摸被释放之前滚动方向知道如何使用内容偏移变化）。

# php - 父子mysql

> ID：16171755
> 
> 赞同：7
> 
> 时间：2013-04-23T14:18:20.510
> 
> 标签：php, mysql, sql

假设我有一张这样的桌子：

```
=================================
| ID |  Parent_ID | Page_Name   |
=================================
| 1  |  NULL      |  Home       |
| 2  |  NULL      |  Services   |
| 3  |  2         |  Baking     |
| 4  |  3         |  Cakes      |
| 5  |  3         |  Bread      |
| 6  |  5         |  Flat Bread |
--------------------------------- 
```

我怎样才能以这种格式实际订购结果？即由父级 -> 子级 -> 子级命令，基于我只需要说最多 5 个级别？我已经研究过“嵌套集模型”，但它似乎对我的要求来说太复杂了。我不确定的是真的理解一个 SQL 查询，我可以用它来显示上面的结果，或者在这种情况下，我应该使用像 PHP 这样的服务器端语言来为我做这件事吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T14:32:50.713

**编辑**

解决 Gordons 说明的工作样本

查询计算节点路径，因为您有固定的最大树深度，并按它排序。

[SQL小提琴](http://sqlfiddle.com/#!2/23c62/26)

**MySQL 5.5.30 架构设置**：

```
create table mytable(id int, parent_id int, name varchar(100));

insert mytable(id, parent_id, name)
values (1, null, 'Home'),
(2, null, 'Services'),
(3, 2, 'Baking'),
(4, 3, 'Cakes'),
(5, 3, 'Bread'),
(6, 5, 'Flat Bread'),
(7, 1, 'Something'); 
```

**查询 1**：

```
select t0.*,
  concat(
      case coalesce(t4.Parent_ID, 0) 
        when 0 then ''
        else concat(cast(t4.Parent_ID as char), '\\')
      end,
      case coalesce(t3.Parent_ID, 0) 
        when 0 then ''
        else concat(cast(t3.Parent_ID as char), '\\')
      end,
      case coalesce(t2.Parent_ID, 0) 
        when 0 then ''
        else concat(cast(t2.Parent_ID as char), '\\')
      end,
      case coalesce(t1.Parent_ID, 0) 
        when 0 then ''
        else concat(cast(t1.Parent_ID as char), '\\')
      end,
      case coalesce(t0.Parent_ID, 0) 
        when 0 then ''
        else concat(cast(t0.Parent_ID as char), '\\')
      end,
      cast(t0.id as char)
    ) as path
from mytable t0 
    left join mytable t1 on t0.Parent_ID = t1.Id
    left join mytable t2 on t1.Parent_ID = t2.Id
    left join mytable t3 on t2.Parent_ID = t3.Id
    left join mytable t4 on t3.Parent_ID = t4.Id
order by 
  concat(
      case coalesce(t4.Parent_ID, 0) 
        when 0 then ''
        else concat(cast(t4.Parent_ID as char), '\\')
      end,
      case coalesce(t3.Parent_ID, 0) 
        when 0 then ''
        else concat(cast(t3.Parent_ID as char), '\\')
      end,
      case coalesce(t2.Parent_ID, 0) 
        when 0 then ''
        else concat(cast(t2.Parent_ID as char), '\\')
      end,
      case coalesce(t1.Parent_ID, 0) 
        when 0 then ''
        else concat(cast(t1.Parent_ID as char), '\\')
      end,
      case coalesce(t0.Parent_ID, 0) 
        when 0 then ''
        else concat(cast(t0.Parent_ID as char), '\\')
      end,
      cast(t0.id as char)
    ) 
```

**[结果](http://sqlfiddle.com/#!2/23c62/26/0)**：

```
| ID | PARENT_ID |       NAME |    PATH |
-----------------------------------------
|  1 |    (null) |       Home |       1 |
|  7 |         1 |  Something |     1\7 |
|  2 |    (null) |   Services |       2 |
|  3 |         2 |     Baking |     2\3 |
|  4 |         3 |      Cakes |   2\3\4 |
|  5 |         3 |      Bread |   2\3\5 |
|  6 |         5 | Flat Bread | 2\3\5\6 | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T14:27:48.750

你可以试试这个：

```
select t.*,
       (case when t4.parent_id is not NULL then 5
             when t4.id is not null then 4
             when t3.id is not null then 3
             when t2.id is not null then 2
             when t1.id is not null then 1
             else 0
        end) as level
from t left outer join
     t t1
     on t.parent_id = t1.id left outer join
     t t2
     on t1.parent_id = t2.id left outer join
     t t3
     on t2.parent_id = t3.id left outer join
     t t4
     on t3.parent_id = t4.id
order by coalesce(t4.parent_id, t4.id, t3.id, t2.id, t1.id, t.id),
         coalesce(t4.id, t3.id, t2.id, t1.id, t.id),
         coalesce(t3.id, t2.id, t1.id, t.id),
         coalesce(t1.id, t.id),
         t.id 
```

如果层次结构是有限的，则不需要递归查询。

order by 子句是棘手的部分。它只是按层次结构的级别排序，从最顶层开始。

原始版本适用于问题中的数据。更广泛的测试发现它并不总是有效。我相信这个版本总是有效的。

# c - 如何让编译器将头文件放入源文件中

> ID：16171760
> 
> 赞同：0
> 
> 时间：2013-04-23T14:18:35.220
> 
> 标签：c, gcc, header-files

我知道您可以通过使用 gcc 中的编译器标志将头文件放在文件顶部`-include`，但是是否可以在文件的其他头文件声明的末尾包含头文件。例如，我在 C 源文件中有以下声明。

```
#include "a.h"
#include "b.h" 
```

我愿意，成为

```
#include "a.h"
#include "b.h"
#include "inserted.h" 
```

而不是

```
#include "inserted.h"
#include "a.h"
#include "b.h" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T14:23:11.480

Use

```
-include a.h -include b.h -include inserted.h 
```

Add header protection to all `*.h` files (which should be there anyway ... ;-).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T14:40:13.510

你不能完全按照你的要求去做。没有办法告诉编译器在文件中的随机点插入头文件。但也许你可以得到一些接近的东西。

首先将inserted.h中的所有声明作为一个宏：

```
#define DECLARE_INSERTED_H \
    int gFoo = 0;          \
    void functionBar();    \ 
```

然后在你的c文件中：

```
#include a.h
#include b.h

#ifndef DECLARE_INSERTED_H
#define DECLARE_INSERTED_H
#endif // !DECLARE_INSERTED_H

DECLARE_INSERTED_H 
```

然后用 -i inserted.h 编译

# python - 将 Blob_values 传输到队列

> ID：16171767
> 
> 赞同：0
> 
> 时间：2013-04-23T14:18:49.037
> 
> 标签：python, google-app-engine, blob

我无法将 blob_name 传输到我的队列，因此我可以在那里读出信息并进行处理。Blob 的信息或内容基本上只是一个文本列表 (CSV)。我也用 blob_key 试过这个，但都导致同样的错误。

```
# I create the blob - works fine, checked in Dashboard

    file_name = files.blobstore.create(mime_type='text/comma-separated-values',_blobinfo_uploaded_filename=str(datetime.now()))
    with files.open(file_name, 'a') as f:
        f.write(low)
    files.finalize(file_name)

# Transferring the variables to the queue

    taskqueue.add(url='/filtering_brands', params={'filter_name' : filter_name, 'user' : user, 'lowkey' : file_name})

    self.redirect('/?sent=True')

class Queue(webapp2.RequestHandler):
  def post(self):

# Requesting the variables
    filter_name = self.request.get('filter_name')
    user = self.request.get('user')
    lowkey = self.request.get('lowkey')
    blob_key = files.blobstore.get_blob_key(lowkey)

# This is (apparently) the part that doesn't work
    low = blobstore.BlobReader(blob_key)

# Process the data and transfer it to an email script 
```

这是我收到的错误：

```
TypeError: object of type 'BlobReader' has no len() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T14:28:30.490

看起来您忘记了指定 blob_key 名称参数。尝试这个：

```
blob_key = files.blobstore.get_blob_key(blob_key = str(lowkey)) 
```

# php - 使用 php 表单解析用户输入

> ID：16171768
> 
> 赞同：-2
> 
> 时间：2013-04-23T14:18:49.483
> 
> 标签：php, html, parsing

看着这个，虽然我有点理解它，但我对 php 还是很陌生，我想执行类似的解析，我希望接受用户输入（数字和单词）并基于 A 进行解析。字符串元素是否是一个单词或数字 B.如果这个词是某个词.. 一个例子是

“3 dogs Collie”是表单输入，我理想的解决方案是将其拆分为 3 Dog and Collie

我还没有开始编码，因为我是 php 新手，但是我最初的想法是搜索字符串，如果元素与预定义变量匹配，例如“3”或“dog”，则提取它并将其放入新变量中

任何帮助都会非常有帮助谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T14:22:52.367

Maybe this will help you : [http://php.net/manual/en/function.explode.php](http://php.net/manual/en/function.explode.php)

```
$tab = explode(' ',$yourInputValue);
// $tab[0] -> 3
// $tab[1] -> dogs
// $tab[2] -> collie 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T14:32:23.640

这是一个可以帮助您站起来的代码：[http ://www.php.net/manual/en/function.preg-split.php](http://www.php.net/manual/en/function.preg-split.php)

```
$keywords = preg_split("/[\s]+/", "3 dogs Collie");
print_r($keywords); 
```

输出：

```
Array
(
    [0] => 3
    [1] => dogs
    [2] => Collie
) 
```

要显示 '3 Dogs and Collie'，只需使用： http: [//php.net/manual/en/function.sprintf.php](http://php.net/manual/en/function.sprintf.php)

```
$format = "%d %s and %s";
echo sprintf($format, $keywords[0], ucfirst($keywords[1]), $keywords[2]); 
```

输出：

```
3 Dogs and Collie 
```

# apache - apache 2.2.22 mod_rewrite RewriteCond，如何设置正则表达式

> ID：16171772
> 
> 赞同：-1
> 
> 时间：2013-04-23T14:18:56.277
> 
> 标签：apache, mod-rewrite

抱歉，我最初的描述太短了。

我需要做的是，在一个 base-url 上使用两种不同的条件进行两次重定向。首先是将仅包含基本 URL（如 _http://some_url.org）的请求重定向到 _http://some_other_url.org 。

```
_http://some_url.org -> _http://some_other_url.org 
```

第二个是，如果 _http://some_url.org/some_subdir 被请求，它应该被重定向到同一主机的 SSL _https://some_url.org/some_subdir 。
因此，在情况 2 中，不应将其重定向到 some_other_url.org 。

```
_http://some_url.org/some_subdir -> https_://some_url.org/some_subdir 
```

两种重写本身都不是很复杂，但我无法让它们一起工作。
所以我的问题是，我如何设置 RewriteCond （确切地说是正则表达式）来进行匹配。http->https 总是优先。

我用 RewriteCond、RewriteRule、RedirectMatch 做了几次实验，但我没有得到它。有人有想法吗？

哦，顺便说一句，这应该由 vhost-config 完成，而不是使用文档文件夹中的 .htaccess-files 完成。这是我不负责的限制:-(因为开发人员有时会清空文档文件夹。

抱歉，我不得不这样做，`_http`因为这个编辑器无法识别这个“URL”。
多谢

最好的问候，M。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T07:47:34.570

我得到了答案，感谢来自 google-groups 的 Jim

```
 RewriteRule ^/$        http://some_other_url.org [R=permanent,L,NS]    

 RewriteCond %{HTTPS} !=on [NC]  
 RewriteRule ^/(.*) https://some_url.org/$1 [R=permanent,L,NS] 
```

完美的！非常感谢吉姆。这正好解决了我的问题。

最好的问候，M。

# c# - myCustomDictionary.Values 应该返回什么类型？

> ID：16171775
> 
> 赞同：7
> 
> 时间：2013-04-23T14:19:00.903
> 
> 标签：c#, collections, dictionary, language-concepts

如果你有对象`Dictionary<k, v> myDictionary`，那么`myDictionary.Values`将是类型`Dictionary<k, v>.ValueCollection`并且`myDictionary.Keys`将是类型`Dictionary<k, v>.KeyCollection`。

我不明白为什么类型`myDictionary.Values`不是类似`IEnumerable<v>`，`IList<v>`或其他东西。

现在，考虑到这一点，如果我创建一个自定义类型的字典；`Dictionary2<k1, k2, v>`，应该`myCustomDictionary.Values`返回`IEnumerable<v>`ValueCollection 的，还是自定义实现？更重要的是，为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T14:23:28.907

请注意，`Dictionary<TKey, TValue>.ValueCollection`实际上确实实现了`ICollection<TValue>`，因此也实现了`IEnumerable<TValue>`.

之所以以这种方式*键入*属性，可能是出于性能原因：由于此类的方法不是虚拟的，因此可以在 JIT 编译期间准确解析它们，而不需要在运行时对每个方法调用进行 vtable 查找。这有效地从您在集合上调用的每个方法中删除了一个间接级别。（它还为 JIT 提供了内联这些方法调用的选项！）

当然，`ICollection<TValue>`如果需要的话，你可以隐式转换对象，所以这里没有功能损失，只是一点（微）优化。

在您的情况下，您没有理由不能 return `ICollection<TValue>`，但如果您愿意，您可以返回更具体的类型。如果这样做，则必须显式实现接口属性`IDictionary<TKey, TValue>.Values`以满足接口：

```
private ValueCollection valueCollection;

public ValueCollection Values
{
    get { return valueCollection; }
}

ICollection<TValue> IDictionary<TKey, TValue>.Values
{
    get { return valueCollection; }
} 
```

这正确地意味着，只有当类的消费者使用类型化为您的集合类型的引用时，他们才会获得任何性能优势；如果他们引用 ，则不会有性能优势`IDictionary<TKey, TValue>`，因为他们将不得不选择，但`ICollection<TValue>`无论如何都要访问您的值集合。

在我的工作中，我没有发现性能差异显着到足以保证返回比`ICollection<TValue>`. 请记住：始终进行基准测试，永远不要过早地优化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T14:23:43.263

`Dictionary<k, v>.ValueCollection`实现`IEnumerable<v>`和`Dictionary<k, v>.KeyCollection`实现`IEnumerable<k>`。这不像返回的结果是不可枚举的。

通过返回一个实现`IEnumerable`而不是键入结果的实际类，因为`IEnumerable`它们也有能力包含一些额外的功能。例如，两个集合都有一个`Count`属性，从任何`IEnumerable`.

# sqlite - 附加数据库中的外部内容 FTS4 表

> ID：16171776
> 
> 赞同：2
> 
> 时间：2013-04-23T14:19:06.183
> 
> 标签：sqlite

我需要将 FTS 添加到现有数据库中。

开始测试外部内容 FTS 表，其中 FTS 索引驻留在默认（主）数据库中。一切都令人满意，除了一些事情（例如索引重建）可能需要相当长的时间。

然后我读到了将 FTS 索引放入附加数据库的可能性。这似乎有几个好处，因此我决定试一试。然而，我所有的尝试都失败了。这里有一些例子：

**情况**

*   我们有一个带有文本列“代码”的表“帐户”，并且

*   想要为该列创建 FTS 索引并将其放入单独的数据库文件中

**Test1) ERROR: near ".": 语法错误**

```
ATTACH 'ZipFts.sdf' AS ZipFts; CREATE VIRTUAL TABLE ZipFts.account USING fts4(content=account, code);
INSERT INTO ZipFts.account(ZipFts.account) VALUES('rebuild'); 
```

**测试 2）错误：堆栈溢出（sqlite 引擎内的无限递归）**

```
ATTACH 'ZipFts.sdf' AS ZipFts; CREATE VIRTUAL TABLE ZipFts.account USING fts4(content=account, code);
INSERT INTO ZipFts.account(account) VALUES('rebuild'); 
```

**Test3）错误：没有这样的表：ZipFts.account**

```
ATTACH 'ZipFts.sdf' AS ZipFts; CREATE VIRTUAL TABLE ZipFts.ZipFts_account USING fts4(content="account", code);
INSERT INTO ZipFts_account(ZipFts_account) VALUES('rebuild'); 
```

**Test4）错误：没有这样的表：ZipFts.main.account**

```
ATTACH 'ZipFts.sdf' AS ZipFts; CREATE VIRTUAL TABLE ZipFts.ZipFts_account USING fts4(content="main.account", code);
INSERT INTO ZipFts_account(ZipFts_account) VALUES('rebuild'); 
```

有人知道这些东西是如何工作的吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:09:24.953

在 sqlite3.c 中进行一些搜索后，我发现了可能的答案。

查看函数 fts3ReadExprList() 的底部。内容表的名称在此处以 DB 名称为前缀！这解释了一切。

此外，这似乎是 zContentTbl（= 内容表的名称）的唯一重要用途。当我稍微修改 fts3ReadExprList() 函数（如下面的代码所示）时，问题就消失了。

```
 // Code inserted by @JS-->
  // Do not prefix zContentTbl with the database name. The table might reside in main database, for example.
  if( p->zContentTbl){
    fts3Appendf(pRc, &zRet, " FROM '%q' AS x", p->zContentTbl);
  }
  else
  // <--@JS
  fts3Appendf(pRc, &zRet, " FROM '%q'.'%q%s' AS x", 
  ... 
```

请注意，我没有充分测试代码。（目前我只知道创建了 FTS 索引。）

无论如何，目前，我认为这是一个 SQLite 错误，我将尝试继续进行修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T14:12:58.413

我认为这是设计的。

如果不是这样，外部内容表的基础表可能会随着数据库的附加或分离而改变。

不过，您也许可以使用无内容的 FTS 表来实现这一点。

丹肯尼迪。

# c# - 当我有实体框架时，我需要 Castle Windsor 和 PostSharp 什么？

> ID：16171781
> 
> 赞同：0
> 
> 时间：2013-04-23T14:19:25.780
> 
> 标签：c#, entity-framework, castle-dynamicproxy

我从我的数据库生成了一个模型（使用**EF**），我将代码生成策略设置为**None**，然后我创建了具有与模型中相同属性的（POCO）类，现在我的业务类与**EF**分离。（我的模型只有两个类：问题和答案。一个问题可以有更多的答案）。

这段代码很好：

```
Question q=db.Questions.First();
Answer a=q.Answers.First();
a.Title+=" modified";
q.Answers.Add(new Answer(){Text="bla bla bla"});
db.SaveChanges(); 
```

我有一点不便：

```
Question q=db.Questions.First();
Answer a=q.Answers.First();
q.Answers.Remove(a);
db.SaveChanges(); 
```

使用此代码，我有此错误：

> 无法更改关系，因为一个或多个外键属性不可为空。当对关系进行更改时，相关的外键属性将设置为空值。如果外键不支持空值，则必须定义新关系，必须为外键属性分配另一个非空值，或者必须删除不相关的对象。

但这可以通过以下方式完成：

```
Question q=db.Questions.First();
Answer a=q.Answers.First();
db.Answers.DeleteObject(a); 
```

那么，当我的 EF 足够好时，为什么我需要 Castle Windsor（动态代理）？EF 和 Castle Windsor 一样好用，它在运行时继承了我的 POCO 类。

**1) 如果我有 EF，DynamicProxy(Castle Windsor) 和 AOP(PostSharp) 有什么作用？**

2）当我可以在编译时继承我的 POCO 类时，我需要什么动态代理（带反射）？（这是可选的，可以为这个主题创建另一个问题）

对不起，我的英语不好。

# android - Android 应用内结算开发人员有效负载

> ID：16171786
> 
> 赞同：1
> 
> 时间：2013-04-23T14:19:37.343
> 
> 标签：android, in-app-billing

我想在我的 android 应用程序中实现应用程序内计费，但​​我不确定我应该如何为开发人员有效负载创建。我没有关于用户的任何信息，只有在应用程序中创建的唯一标识符来识别它。

当用户购买产品，然后卸载应用程序并重新安装时，是否可以恢复购买？如何测试它，因为我尝试测试它时没有收到任何事件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T23:24:39.813

是的，您可以在卸载应用程序后检查已完成的购买并重新安装。

所有购买的商品都存储在 Play 服务器上，尤其是在您安装的 Google Play 应用程序中。因此，在购买商品后，一旦存储了有关购买的信息，您就可以随时请求它，直到您“消费”此购买。“消费”是指重置购买信息，允许使用相同的ID进行新的购买。这仅适用于 Android 计费库的 v3，因为 v3 中的所有购买都是一次性的（您只能购买一次）并且必须“消费”才能再次购买。购买项目的标识符是您在 Google Developer Console 中定义的简单字符串。您应该登录开发者控制台，为未来的应用创建新项目，上传签名的.apk（必需），然后您必须选择项目，移动到“应用内产品” 部分，您可以在那里创建带有采购 ID 的必要采购项目。在应用程序中执行购买操作时，您应该将匹配的 purchaseID 传递给 IabHelper 对象上的 launchPurchaseFlow() 方法（这些都来自 v3 计费库）。也可以通过使用匹配的purchaseID 来接收有关购买项目的信息。

Google 官方开发者文档包含大量有关实现和使用计费库的信息：

*   [实施计费库指南](http://developer.android.com/training/in-app-billing/index.html)

*   [在开发者控制台中管理应用内产品](http://developer.android.com/google/play/billing/billing_admin.html)

*   测试应用内计费。抱歉，由于缺乏声誉，无法发布链接（仅回答中的 2 个链接），但您也可以在官方 android 文档中找到此部分。本节还包含有关使用不需要签名和上传的 .apk 或任何实际汇款的特殊 android 测试购买 ID 进行测试的信息

# python - 使用python打开文件

> ID：16171787
> 
> 赞同：-3
> 
> 时间：2013-04-23T14:19:41.757
> 
> 标签：python, tkinter

```
import tkinter as tk
from tkinter.filedialog import askopenfilename
root = tk.Tk()
# show askopenfilename dialog without the Tkinter window
root.withdraw()
# default is all file types
file_name = askopenfilename()
print(file_name) 
```

这是我试图在 python 中使用的代码，它允许我选择一个文件并返回我选择的任何文件。该程序允许我选择一个文件，但不是打开文档，而是在 Python shell 中显示文件路径。我怎样才能解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T14:24:53.333

`askopenfilename`返回文件的路径。下一步就是打开它并阅读其内容：

```
file_name = askopenfilename()
with open(file_name) as f:
    print(f.read()) 
```

请记住，`''`如果您关闭对话框，此方法将返回，因此您必须`open`仅在文件名不是空字符串时调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T14:52:13.697

如果您在 PC 上：

```
 import os
    os.startfile(file_name) 
```

这将使用用于在计算机中打开该文件类型的默认程序打开文件。

如果您在 OSX 上，那么我相信它是：

```
 import subprocess
    path_to_file = 'path/to/file'
    path_to_program = r'C:\path\to\program.exe'
    subprocess.Popen("%s %s" % (path_to_program, path_to_file)) 
```

# javascript - 添加加载附加内容的脚本后，Jquery 停止工作

> ID：16171788
> 
> 赞同：0
> 
> 时间：2013-04-23T14:19:45.457
> 
> 标签：javascript, jquery, binding, checkbox

我有**jquery**的问题。我在我的网站上添加了一个脚本，可以将其他内容加载到页面中。

问题是，在同一页面上，我还有一个绑定复选框的 javascript - 它由于`read()`功能而停止工作。我在这里收到的先前解决方案不起作用（或者我无法使它起作用）所以我决定做一个简短的例子（绑定脚本在最后）：

```
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">

  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
    <title>Ajax Rotating Includes Script</title>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
    <script type="text/javascript">
      var loadedobjects = ""
      var rootdomain = "http://" + window.location.hostname

        function ajaxpage(url, containerid) {
          var page_request = false
          if (window.XMLHttpRequest) // if Mozilla, Safari etc
            page_request = new XMLHttpRequest()
          else if (window.ActiveXObject) { // if IE
            try {
              page_request = new ActiveXObject("Msxml2.XMLHTTP")
            } catch (e) {
              try {
                page_request = new ActiveXObject("Microsoft.XMLHTTP")
              } catch (e) {}
            }
          } else return false
          page_request.onreadystatechange = function () {
            loadpage(page_request, containerid)
          }
          page_request.open('GET', url, true)
          page_request.send(null)
        }

        function loadpage(page_request, containerid) {
          if (page_request.readyState == 4 && (page_request.status == 200 || window.location.href.indexOf("http") == -1)) document.getElementById(containerid).innerHTML = page_request.responseText
        }

        function loadobjs() {
          if (!document.getElementById) return
          for (i = 0; i < arguments.length; i++) {
            var file = arguments[i]
            var fileref = ""
            if (loadedobjects.indexOf(file) == -1) { //Check to see if this object has not already been         added to page before proceeding
              if (file.indexOf(".js") != -1) { //If object is a js file
                fileref = document.createElement('script')
                fileref.setAttribute("type", "text/javascript");
                fileref.setAttribute("src", file);
              } else if (file.indexOf(".css") != -1) { //If object is a css file
                fileref = document.createElement("link")
                fileref.setAttribute("rel", "stylesheet");
                fileref.setAttribute("type", "text/css");
                fileref.setAttribute("href", file);
              }
            }
            if (fileref != "") {
              document.getElementsByTagName("head").item(0).appendChild(fileref)
              loadedobjects += file + " " //Remember this object as being already added to page
            }
          }
        }
    </script>
  </head>

  <body>    
    <div id="leftcolumn">
      <a href="javascript:ajaxpage('ajaxfiles/external.htm', 'rightcolumn');">Porsche Page</a>
      <a href="javascript:ajaxpage('ajaxfiles/external2.htm', 'rightcolumn');">Ferrari Page</a>
      <a href="javascript:ajaxpage('ajaxfiles/external3.htm', 'rightcolumn');">Aston Martin Page</a>

      <div style="margin-top: 2em">Load CSS & JS files</div>
      <a href="javascript:loadobjs('ajaxfiles/style.css', 'ajaxfiles/tooltip.js');">Load "style.css" and "tooltip.js"</a>    
    </div>    
    <div id="rightcolumn" class="qqryq"><h3>Choose a page to load.</h3></div>
    <div style="clear: left; margin-bottom: 1em"></div>
    <form>
      <input type="checkbox" name="qqryq" class="master" value="1">Wódz<BR>
      <div class="test">
        --<input type="checkbox" name="qqryq" class="slave" value="1"><BR>
        --<input type="checkbox" name="qqryq" class="slave" value="1"><BR>
        --<input type="checkbox" name="qqryq" class="slave" value="1"><BR>
        --<input type="checkbox" name="qqryq" class="slave" value="1"><BR>
      </div>
    </form>

  <script>
    $(document).ready(function () {
      $(".slave").click(function () {
        if (this.checked == true) {
          $(".master").attr('checked', this.checked);
        }
      });
    });
  </script> 
```

最后，我在添加 ajax 内容加载之前使用了脚本。然后我被告知要像这样修改它：

```
<script>
  $(document).ready(function () {
    $(".test").on('change', '.slave', function () {
      if (this.checked) $(".master").attr('checked', this.checked);
    });
  });
</script> 
```

我应该怎么做才能让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T15:21:40.300

看起来您`* /`在第一个大块的末尾有一个流浪者`<script>`，这会导致语法错误。删除它应该可以解决您的问题。

该块的结尾（大约第 57 行左右）当前是：

```
 if (fileref != "") {
          document.getElementsByTagName("head").item(0).appendChild(fileref)
          loadedobjects += file + " " //Remember this object as being already added to page
        }
      }
    } * /
</script> 
```

它应该是：

```
 if (fileref != "") {
          document.getElementsByTagName("head").item(0).appendChild(fileref)
          loadedobjects += file + " " //Remember this object as being already added to page
        }
      }
    }
</script> 
```

# c# - Windows Phone 8 中的辅助动态磁贴

> ID：16171791
> 
> 赞同：0
> 
> 时间：2013-04-23T14:19:51.707
> 
> 标签：c#, xaml, windows-phone-8

我们可以在 windows phone 应用程序中使用辅助动态磁贴吗，或者辅助磁贴将始终出现在主屏幕上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T14:25:10.833

动态磁贴显示在主屏幕上。但是，您可以通过创建自己的控件或使用[Windows Phone Toolkit](http://phone.codeplex.com/)`HubTile`中的控件在自己的应用程序中模拟动态磁贴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-19T13:44:27.290

这是我想出来的。动态磁贴是外壳控件，这意味着它们只会出现在您的外壳/主屏幕（显示所有磁贴）上，并且这些不能被视为您的应用程序中的 UI 控件。但是，您可以非常轻松地将它们的副本创建为 UI/XAML 控件并在应用程序中使用它们。这是有关如何在应用程序中创建自定义磁贴作为 XAML 控件的示例代码链接

[http://code.msdn.microsoft.com/wpapps/Windows-Phone-XAML-Create-3707b497](http://code.msdn.microsoft.com/wpapps/Windows-Phone-XAML-Create-3707b497)

# c++ - 调试从托管应用程序调用的 C++ 代码时看不到变量内容

> ID：16171797
> 
> 赞同：7
> 
> 时间：2013-04-23T14:20:06.110
> 
> 标签：c++, debugging, visual-studio-debugging, managed-c++

我有一些从托管 C++ 类库（“Rem”）调用的本机 C DLL。在“Rem”类库中，我有一个本地 C++ 类 (api) 和一个托管 C++ 类 (API)。

托管类 (API) 目前是从 C# 控制台应用程序调用的（稍后将在 Web 应用程序中使用）。

调试时，我可以很好地单步执行我的本机代码。

我的问题是，当我调试时，除了本地声明的简单类型之外，我看不到任何变量的值。

函数参数在调试器中不可用，如果我尝试将它们添加为 Watch，它只会显示“错误：标识符 'schema_name' 超出范围”（'schema_name' 是变量名）

任何结构都只在快速监视和监视窗口中显示值“{...}”。 ![在此处输入图像描述](https://i.stack.imgur.com/c2uld.png)

如果我尝试将手表添加到结构中的字段，我会得到值“错误：'entryList.numItems'不存在”

### 我试过的东西：

*   我尝试在托管 C++ 中创建控制台应用程序并从中进行调试，同样的事情。

*   我尝试取消选中 Tools->Options->Debugging->General->Managed C++ Compatibility Mode，然后我根本无法进入代码（没有为断点加载符号）

*   在 C# 控制台应用程序项目中，我进入了 Properties->Debug 并选中了“启用本机代码调试”（并取消选中它）

*   在 C++ 类库中，我进入了 Properties->Debugging->Debugger Type 并尝试了“Mixed”、“Native”、“Managed”和“Auto”。

关于我做错了什么的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T08:41:12.273

我猜您正在使用 Visual Studio 2012 Update 2。在这种情况下 - 这是 Update 2 的一个已知错误：

[https://connect.microsoft.com/VisualStudio/feedback/details/783004/children-cannot-be-evaluate-on-c-cli-after-vs2012-update-2](https://connect.microsoft.com/VisualStudio/feedback/details/783004/children-cannot-be-evaluated-on-c-cli-after-vs2012-update-2)

但要小心，卸载 Update 2 的“解决方法”会留下一个损坏的 Visual Studio，如此错误报告中所示（是的，Update 2 已损坏）：

[https://connect.microsoft.com/VisualStudio/feedback/details/785396/uninstalling-vs2012-update-2-and-repair-of-vs-results-in-atl-files-missing](https://connect.microsoft.com/VisualStudio/feedback/details/785396/uninstalling-vs2012-update-2-and-repair-of-vs-results-in-atl-files-missing)

如果您没有使用 Update 2，这可能不是正确的答案，但它可以帮助其他使用 Update 2 遇到此问题的人。

# sql-server - 如何获取 .MDF 数据库的内部 SQL Server 数据库版本号？

> ID：16171802
> 
> 赞同：0
> 
> 时间：2013-04-23T14:20:20.240
> 
> 标签：sql-server, vb.net

我想以编程方式获取 SQL Server 数据库的内部数据库版本号，以确定要使用的 SQL Server 实例。

即 SQL Server 2008 - 版本 661，SQL Server 2008 R2 - 版本 665

我发现了一篇文章：[http](http://rusanu.com/2011/04/04/how-to-determine-the-database-version-of-an-mdf-file/) ://rusanu.com/2011/04/04/how-to-determine-the-database-version-of-an-mdf-file/显示版本号的位置为文件中偏移量 0×12064 处的 DWORD 值`.mdf`。

如何以编程方式获取此信息？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:29:37.343

如果数据库已经附加：

```
CREATE TABLE #d
(
  ParentObject NVARCHAR(4000),
  [Object] NVARCHAR(4000),
  Field NVARCHAR(4000),
  VALUE NVARCHAR(4000)
);

DECLARE @sql NVARCHAR(MAX) = N'dbcc page(' + RTRIM(DB_ID()) 
  + ',1,9,3) with tableresults;'

INSERT #d EXEC sp_executesql @sql;

SELECT [Version] = VALUE FROM #d WHERE Field = N'dbi_version';

DROP TABLE #d; 
```

虽然如果数据库已经附加，那么它已经是实例的版本。如果未附加数据库，为什么不将其附加到您拥有的最新版本？仅仅因为数据库当前是 661 并不意味着它必须保持这种状态。如果您将它附加到 2008 R2 或 2012 也可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-08T21:23:49.717

这是我创建的一个存储过程，用于使用 OLE 自动化和 ADO 的 Stream 对象读取离线 .mdf。此解决方案和更多上下文也发布在此处：[https ://social.technet.microsoft.com/Forums/sqlserver/en-US/3de5b574-0751-44a2-b69f-fa0c20378359/how-to-determine-sql-server -version-of-an-mdf-file?forum=sqlsetupandupgrade](https://social.technet.microsoft.com/Forums/sqlserver/en-US/3de5b574-0751-44a2-b69f-fa0c20378359/how-to-determine-sql-server-version-of-an-mdf-file?forum=sqlsetupandupgrade)

```
CREATE /*ALTER*/ PROCEDURE spDBVersion
(
@FilePath nvarchar(500) /*Your filepath here EG 'C:\SQLData\somedatabase.mdf'*/
)
AS

DECLARE @HR int,
        @objStream int,
        @strErrorMessage Varchar(1000),
        @Source nvarchar(255),
        @Desc nvarchar(255),
        @offset bigint,
        @binary1 binary,
        @binary2 binary

SET NOCOUNT ON

SELECT @strErrorMessage='Creating ADO stream object'
EXEC @HR = sp_OACreate  'ADODB.Stream' , @objStream OUT
IF @HR <> 0 GOTO CLEANUP

SELECT @strErrorMessage='Opening ADO stream'
EXEC @HR = sp_OAMethod @objStream, 'Open'
IF @HR <> 0 GOTO CLEANUP

SELECT @strErrorMessage='Declaring ADO stream type binary'
EXEC @HR = sp_OASetProperty @objStream, 'Type', 1
IF @HR <> 0 GOTO CLEANUP

SELECT @strErrorMessage='Opening File into ADO stream'
EXEC @HR = sp_OAMethod @objStream, 'LoadFromFile', NULL , @FilePath
IF @HR <> 0 GOTO CLEANUP

SELECT @offset = 73828 --9 * 8192 + 96 + 4

SELECT @strErrorMessage='Setting offset to read file'
EXEC @HR = sp_OASetProperty @objStream, 'Position',  @offset
IF @HR <> 0 GOTO CLEANUP

SELECT @strErrorMessage = 'Reading Version number from mdf'
EXEC @HR = sp_OAMethod @objstream, 'Read', @binary1 OUT , 1
IF @HR <> 0 GOTO CLEANUP

SELECT @strErrorMessage = 'Reading Version number from mdf'
EXEC @HR = sp_OAMethod @objstream, 'Read', @binary2 OUT , 1
IF @HR <> 0 GOTO CLEANUP

SELECT @binary1 + 256 * @binary2 AS DatabaseVersion

END_ROUTINE:
RETURN

CLEANUP:
BEGIN
    EXEC sp_OAGetErrorInfo @objStream,
        @Source OUT,
        @Desc OUT;
        SELECT ErrorInSP='spDBVersion',
        HR = convert(varbinary(4),@HR),
        Source=@Source,
        Description=@Desc,
        Process=@strErrorMessage
    GOTO END_ROUTINE
END
GO 
```

此存储过程需要 OLE 自动化，因此您需要将其包装在一些重新配置语句中，假设 OLE 已禁用（可能应该如此）。

```
EXEC sp_configure 'show advanced options', 1
RECONFIGURE
GO
EXEC sp_configure 'Ole Automation Procedures', 1
RECONFIGURE
GO

exec spDBVersion 'E:\SQLData\somedatabase.mdf'

GO
EXEC sp_configure 'Ole Automation Procedures', 0
RECONFIGURE
GO
EXEC sp_configure 'show advanced options', 0
RECONFIGURE
GO 
```

# javascript - 如何将 ID 分配给 DIV 数组，例如“#page_pricing .col1 div div”

> ID：16171803
> 
> 赞同：-1
> 
> 时间：2013-04-23T14:20:20.463
> 
> 标签：javascript, html

如何将 ID 分配给 DIV 数组，例如“#page_pricing .col1 div div”

```
 <div id="page_pricing">
        <div class="col1">
            <div>
                <div id="###">
                  <h1>Express Portrait</h1>
                  <p>Need professional pictures, but don't have a lot of time? This session is for you</p>
                </div>
            </div>
        </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T16:49:40.320

它并不是真的那样工作，必须有一个容器对象（想想 html 元素）。因此，获得所需结果的最佳方法是将要放在父对象、父 div 或 span 内的数组中的 div 包装起来。因此，可以为该容器指定一个 id，您可以通过父对象的 children 属性引用您的数组。

```
<div id=parent>
  <div id=child0></div>
  <div id=child1></div>
  <div id=child2></div>
  <div id=child3></div>
</div> 
```

您可以将子数组引用为`document.getElementById('parent').children`

# ios - 在 iPad 上显示潜意识图像

> ID：16171807
> 
> 赞同：2
> 
> 时间：2013-04-23T14:20:27.427
> 
> 标签：ios, performance, ipad, uiimage

在为认知科学的研究人员开发 iPad 应用程序时，他们问我是否可以在几毫秒（10-30 毫秒）内全屏显示图像 (PNG)。

*   我的猜测是 iPad 的帧率大约是 30 fps，我可以降低到大约 33 毫秒……*有谁知道是否有可能更进一步？*
*   目前我正在使用 UIImageview 实现它并切换可见参数。*有没有更有效的方法让图像在尽可能短的时间内显示？*

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T14:36:00.843

如果您想测量对短刺激的潜意识反应，请考虑使用 iPad 以外的其他设备。

iPad 2 的原生刷新率为 60Hz，这意味着最小帧周期为 16.67ms。但是，您将很难让应用程序将“托管”内存转换为非托管缓冲区，然后将该图像缓冲区呈现给显示器，然后重复进行更改，所有这些都在 16.67 毫秒内完成。操作系统、JVM 的开销以及板载 CPU/内存的速度还不够。如果幸运的话，您可能只能从中获得 25 毫秒（或 40 赫兹）。

您*可以*通过直接使用视频来实现本机 60Hz，并让 GPU 进行繁重的加载，但是使用 MPEG，您将遇到像这样的单帧的块编码问题 - 单帧将被乱码到相邻的帧中，否则该帧将无法正确编码或解码。

有支持 120Hz 的标准 LCD 显示器，理论上最小帧周期为 8.3 毫秒。给定一个在 Linux 或 Windows 上适当编写的本机应用程序，您可能会将实际时间保持在 10 毫秒以下，并且可能低至 8.5 毫秒。当然，您需要一张原生支持 120Hz 显示速率的显卡。

如果您希望*真正*深入研究超低帧周期，您可能需要做一些硬件开发工作。有一些 OLED 面板支持 200Hz+ 刷新率，主要用于设备可能会移动（减少平移剪切问题）但您在商业产品中找不到它们的情况 - 您必须自己构建显示控制器驱动一个。这可以通过 FPGA 或功能相当强大的 ARM 处理器实现，但需要具备相当多的电子知识。

# php - 使用正则表达式解析 lighttpd.conf

> ID：16171812
> 
> 赞同：0
> 
> 时间：2013-04-23T14:20:46.590
> 
> 标签：php, regex, lighttpd

我正在编写 PHP 工具来编辑 lighttpd.conf（Lighttpd 网络服务器）。

lighttpd.conf 风格：

```
variable = value

variable = 1

variable = "value space" 
```

我可以使用上述样式，但 lighttpd.conf 也具有多级数组的数组样式：

```
variable = ("key" => (
                  "multi-key" => (
                         "subkeya" => "value",
                         "subkeyb" => "value")
                  )
           ) 
```

如何在 php 中解析并将其转换为数组？

喜欢：

```
$variable[variable] = "value";
$variable[variable] = array("key" => array("subkey" => "value"); 
```

# git - 如何将一个远程分支覆盖而不是合并到另一个分支？

> ID：16171813
> 
> 赞同：33
> 
> 时间：2013-04-23T14:20:47.097
> 
> 标签：git, branching-and-merging

我有两个分支。分期和测试版。暂存中有代码（包括文件），我根本不想要。如何使 Beta 完全覆盖 Staging，以便这些文件或代码都不会从 Staging 合并到 Beta 中。

我看到有人建议这样做：

```
git checkout staging
git merge -s ours beta 
```

但我不相信预先存在的文件会是“代码冲突”，因此不会被删除。我错了吗？如果我是对的，我将如何做到这一点？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-23T14:24:33.640

You can simple delete `staging` and re-create it based on `beta`:

```
git branch -D staging
git checkout beta
git branch staging 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-04-23T14:27:18.477

**如果您不关心**的旧历史`staging`，则可以重新创建它：

```
git checkout beta
git branch -f staging 
```

**如果您确实关心**的旧历史`staging`，那么事情会变得更有趣：

```
git checkout staging        # First, merge beta into staging so we have
git merge -s theirs beta    # a merge commit to work with.

git checkout beta           # Then, flip back to beta's version of the files

git reset --soft staging    # Then we go back to the merge commit SHA, but keep 
                            # the actual files and index as they were in beta

git commit --amend          # Finally, update the merge commit to match the
                            # files and index as they were in beta. 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-04-23T14:26:48.213

我建议你只是重命名它，以防你改变主意。

```
git branch -m staging staging_oops
git checkout beta
git branch staging 
```

如果你真的无法忍受周围有那个额外的分支：

```
git branch -D staging_oops 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-17T06:16:00.450

如果分期的历史不会成为问题，您可以简单地执行此操作。

```
git checkout staging 
git reset --hard beta 
```

请记住，在上述命令之后，staging 的历史将消失， ***staging***将拥有您的***beta***分支的工作。

# script-fu - 使用 Script-Fu，加载和保存 PNG 会丢失 alpha

> ID：16171825
> 
> 赞同：5
> 
> 时间：2013-04-23T14:21:43.747
> 
> 标签：script-fu

我正在尝试在 GIMP 中编写一个脚本，该脚本将加载一个 PNG 文件并以最大压缩率再次保存（我还计划添加其他处理步骤）。但是，以下脚本似乎破坏了 alpha 信息：

```
(define (process-png pattern)
  (let* (
      (filelist (cadr (file-glob pattern 1)))
    )
    (while (not (null? filelist))
      (begin
        (catch ()
          (let* (
              (filename (car filelist))
              (image (car (file-png-load RUN-NONINTERACTIVE filename filename)))
            )
            (begin
              (file-png-save2 RUN-NONINTERACTIVE
                  image (car (gimp-image-get-active-drawable image))
                  filename filename
                  0 9 0 0 0 0 0 0 0)
              (gimp-image-delete image)
            )
          )
        )
        (set! filelist (cdr filelist))
      )
    )
  )
) 
```

例如，[JQuery 图标](http://jquery-ui.googlecode.com/svn/tags/1.6rc5/themes/base/images/2e83ff_256x240_icons_icons.png)中的半透明像素似乎都变得完全透明，从而使所有内容都出现了别名。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-26T11:20:17.277

的文档`file-png-save2`说，`Preserve color of transparent pixels?`在您的情况下，最后一个参数设置为 0。尝试将其设置为 1，它应该可以正常工作。

# android - Sprite 在其中心缩放后不围绕其中心旋转

> ID：16171826
> 
> 赞同：0
> 
> 时间：2013-04-23T14:21:47.173
> 
> 标签：android, geometry, andengine

如果我在它的中心缩放一个精灵，然后尝试围绕它的中心旋转它，旋转不会围绕它的中心发生。

如果你需要旋转，例如一个缩放的球，它的工作方式是在 **顶部设置缩放中心，左（0,0）**设置你想要的比例，然后将旋转中心设置为中间缩放精灵，然后应用旋转修改器。

```
blaBloBliSprite.setScaleCenter(0, 0);
blaBloBliSprite.setScale(0.667f);
blaBloBliSprite.setPosition(557, CAMERA_HEIGHT / 2 - blaBloBliSprite.getHeightScaled() / 2);
blaBloBliSprite.setRotationCenter(blaBloBliSprite.getWidthScaled() / 2,
blaBloBliSprite.getHeightScaled() / 2); 
```

但我也想在其中心缩放一个精灵。

如何做到这一点？ANDengine的anchor分支会解决吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T17:09:58.700

我认为诀窍在于 setScaleCenter 没有按您期望的方式工作。如果将其设置为 0,0，它将在左上角缩放，即使在锚点中心也是如此。

尝试使用精灵宽度和高度的 1/2：

```
blaBloBliSprite.setScaleCenter(blaBloBliSprite.getWidth()/2, blaBloBliSprite.getHeight()/2 ); 
```

顺便说一句，切换到锚点中心将解决您的基本问题，因为缩放和旋转中心的默认位置是 Sprite 的中心。但即使在锚点中心 0,0 也是缩放和旋转中心的左上角。默认情况下它只是定位到中间。

# delphi - 在 Delphi 中显示捕获设备属性页 - Firemonkey

> ID：16171832
> 
> 赞同：1
> 
> 时间：2013-04-23T14:22:03.470
> 
> 标签：delphi, firemonkey

Firemonkey 在 FMX.media 中有音频视频捕获类。此处提供了一个简单捕获程序的示例：http: [//docwiki.embarcadero.com/RADStudio/XE3/en/Video_Capturing](http://docwiki.embarcadero.com/RADStudio/XE3/en/Video_Capturing)

问题是如何显示捕获设备属性页面（例如设置背光补偿、白平衡等）。没有它，框架的这一部分几乎毫无用处，因为无法设置设备属性。

谢谢，

/一个

# python - 为什么python中的搁置模块有时会创建具有不同扩展名的文件？

> ID：16171833
> 
> 赞同：15
> 
> 时间：2013-04-23T14:22:03.503
> 
> 标签：python, unix, pickle, shelve

我正在运行一个 Python 程序，它`shelve`使用`pickle`. 运行这个程序后，有时我得到一个输出文件，`a.data`但有时我得到三个输出文件`a.data.bak`，`a.data.dir`和`a.data.dat`.

这是为什么？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-26T07:45:02.960

这里有相当多的间接性。仔细跟着我。

该模块是在[模块](http://docs.python.org/library/dbm.html)`shelve`之上实现的。该模块充当 3 ^((*)不同的特定 DBM 实现的外观，它将在创建新数据库时选择第一个可用的模块，顺序如下：[`dbm`](http://docs.python.org/library/dbm.html)

1.  [`dbm.gnu`](https://docs.python.org/3/library/dbm.html#module-dbm.gnu), GNU DBM 库的 Python 模块；如果您需要它在基本`dbm`模块上提供的额外功能，您可以直接使用它（它允许您按存储顺序迭代键并“打包”数据库以释放已删除对象的空间）。
2.  [`dbm.ndbm`](https://docs.python.org/3/library/dbm.html#module-dbm.ndbm)，一个使用`ndbm`BSD DB 和 GNU DBM 库（[在 Python 编译时](https://github.com/python/cpython/blob/240bcf82a11fe7433a61da70605e924c53b88096/setup.py#L1208-L1498)选择）的代理模块。
3.  [`dbm.dumb`](https://docs.python.org/3/library/dbm.html#module-dbm.dumb)，一个纯python实现。

正是这种选择范围使`shelve`文件看起来在不同平台上增加了额外的扩展名。

该`dbm.dumb`模块是添加`.bak`,`.dat`和`.dir`扩展的模块：

> 打开一个dumbdbm 数据库并返回一个dumbdbm 对象。filename 参数是数据库文件的基本名称（没有任何特定的扩展名）。创建dumbdbm 数据库时，会创建带有`.dat`和`.dir`扩展名的文件。

当新的索引字典被提交以对数据结构进行更改时（当添加新键、删除键或调用or时），该`.dir`文件将被移至。`.bak`[`.sync()`](https://docs.python.org/3/library/dbm.html#dbm.dumb.dumbdbm.sync)[`.close()`](https://docs.python.org/3/library/dbm.html#dbm.dumb.dumbdbm.close)

这意味着*其他*三个选项`anydbm`在您的平台上不可用。

其他格式可能会给您其他扩展。该`dbm`模块可能使用或`.dir`，具体取决于该模块使用的库。`.pag``.db`

* * *

^((*) Python 2 有*四个*dbm 模块，它将默认为不推荐使用的[`dbhash`模块](https://docs.python.org/2/library/dbhash.html#module-dbhash)，而后者又构建在[`bsddb`模块](https://docs.python.org/2/library/bsddb.html#module-bsddb)之上。这些都从 Python 3 中删除。

# javascript - 将变量应用于 javascript 函数

> ID：16171834
> 
> 赞同：1
> 
> 时间：2013-04-23T14:22:03.793
> 
> 标签：javascript, html, dom

需要知道如何将变量应用于 javascript 函数。我目前正在尝试让我的代码正常工作，但它没有将我的价值识别为函数类型。

```
 <!DOCTYPE html>
<html>
<body onload="myFunction()">

<select>
    <option>1</option>
</select>
<br/>
<select>
    <option>1</option>
</select>

<script>
function myFunction()
{
    if(typeof document.body.ontouchstart == "undefined"){actionIn = "onmouseover"; actionOut = "onmouseout"}
    else{actionIn = "ontouchstart"; actionOut = "ontouchend";}
    document.write(actionIn+" "+actionOut);
    var elem = document.getElementsByTagName("SELECT");
    for (var i = 0;i < elem.length; i++){
        elem[i].actionIn = function(){this.style.background='red';}
        elem[i].actionOut = function(){this.style.background='';}
    }
}
</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T14:23:23.477

You're trying to write

```
elem[i][actionIn] = ...; 
```

# perl - 需要在 vmstat 输出的每一行中插入日期时间

> ID：16171837
> 
> 赞同：2
> 
> 时间：2013-04-23T14:22:25.373
> 
> 标签：perl, bash, ksh

我需要在每个具有价值的 vmstat 行中插入日期时间。

我可以创建这样的函数：

```
function insert_datetime {
  while read line
  do
    printf "$line"
    date '+ %m-%d-%Y %H:%M:%S'
  done
} 
```

然后调用 vmstat 如下：

```
'vmstat 3 5 | insert_datetime' 
```

但是这一行将日期时间放在每一行，包括破折号 (--) 和任何有文本的行。如何排除包含破折号和文本的行？

```
kthr    memory              page              faults              cpu 04-23-2013 10:19:49
----- ----------- ------------------------ ------------ ----------------------- 04-23-2013 10:19:49
r  b   avm   fre  re  pi  po  fr   sr  cy  in   sy  cs us sy id wa    pc    ec 04-23-2013 10:19:49
0  0 45688088 4094129   0   0   0   0    0   0  45 12172 2840  1  1 99  0  0.35   2.2 04-23-2013 10:19:49
2  0 45694135 4088082   0   0   0   0    0   0 451 56350 21818  3  1 97  0  0.73   4.5 04-23-2013 10:19:52
1  0 45694137 4088061   0   0   0   0    0   0 303 24568 951  3  1 96  0  0.82   5.1 04-23-2013 10:19:55
1  0 45694138 4087739   0   0   0   0    0   0 445 9170 1504  2  0 98  0  0.64   4.0 04-23-2013 10:19:58
4  0 45703145 4078732   0   0   0   0    0   0 335 47175 1306  4  1 95  0  1.01   6.3 04-23-2013 10:20:01 
```

我需要看起来像这样：

```
kthr    memory              page              faults              cpu
----- ----------- ------------------------ ------------ ----------------------- 
r  b   avm   fre  re  pi  po  fr   sr  cy  in   sy  cs us sy id wa    pc    ec 
0  0 45688088 4094129   0   0   0   0    0   0  45 12172 2840  1  1 99  0  0.35   2.2 04-23-2013 10:19:49
2  0 45694135 4088082   0   0   0   0    0   0 451 56350 21818  3  1 97  0  0.73   4.5 04-23-2013 10:19:52
1  0 45694137 4088061   0   0   0   0    0   0 303 24568 951  3  1 96  0  0.82   5.1 04-23-2013 10:19:55
1  0 45694138 4087739   0   0   0   0    0   0 445 9170 1504  2  0 98  0  0.64   4.0 04-23-2013 10:19:58
4  0 45703145 4078732   0   0   0   0    0   0 335 47175 1306  4  1 95  0  1.01   6.3 04-23-2013 10:20:01 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-22T04:33:10.947

为什么不直接使用 vmstat -t？它似乎正是您正在寻找的。这是一些示例输出

```
[root@web5 vmstat]# vmstat -t 1
procs -----------memory---------- ---swap-- -----io---- --system-- -----cpu------ ---timestamp---
 r  b   swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa st
 1  0  15704 193236 189628 595868    9    3    25    16   15   20 11  1 88  1  0    2013-05-22 13:32:36 JST
 0  0  15704 193212 189628 595868    0    0     0     0   22   20  0  0 100  0  0   2013-05-22 13:32:37 JST
 0  0  15704 193212 189628 595868    0    0     0     0   19   12  0  0 100  0  0   2013-05-22 13:32:38 JST
 0  0  15704 193212 189628 595868    0    0     0     0   10   11  0  0 100  0  0   2013-05-22 13:32:39 JST
 0  0  15704 193212 189628 595868    0    0     0    96   34   25  0  1 99  0  0    2013-05-22 13:32:40 JST
 0  0  15704 193212 189628 595868    0    0     0     0   10    9  0  0 100  0  0   2013-05-22 13:32:41 JST
 0  0  15704 193212 189628 595868    0    0     0     0   14   23  0  0 100  0  0   2013-05-22 13:32:42 JST 
```

在 CentOS6.3 上使用 procps 3.2.8 执行

```
[root@web5 uptime]# vmstat -V
procps version 3.2.8 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T14:47:36.767

使用`awk`：

```
vmstat 3 5 | awk '/^ *[0-9]/{$0=$0 " " strftime("%m-%d-%Y %T")};1' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T14:27:13.710

尝试：

```
function insert_datetime {
  while read line
  do
    printf "$line"
    if [[ "$line" =~ [0-9].* ]]; then 
       date '+ %m-%d-%Y %H:%M:%S'
    else
       echo
    fi
  done
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-23T15:23:10.790

sed 也可以给你答案......以更清洁和便携（跨壳）的方式：

```
vmstat 3 5 | sed '/^ *[0-9].*/s/.*/printf "&";date "+ %m-%d-%Y %H:%M:%S"/e' 
```

所有以数字开头的行都以所需格式附加日期。

# vb.net - SandCastle generate doc. from website

> ID：16171843
> 
> 赞同：0
> 
> 时间：2013-04-23T14:22:38.830
> 
> 标签：vb.net, sandcastle

I am trying to generate documentation for a WebSite, but, I don't have a project, in other words, I just go in Visual Studio and I Open a WebSite, I can't generate the XML documentation from this web project style:

![enter image description here](https://i.stack.imgur.com/H0hP4.png)

And, I see in [that](http://www.ewoodruff.us/sandcastletools/) documentation I need to put this:

```
 <system.codedom>
    <compilers>
      <compiler language="vb;vbs;visualbasic;vbscript" extension=".vb"
        compilerOptions="/docpath:C:\Publish\Docs"
        type="EWSoftware.CodeDom.VBCodeProviderWithDocs,
              EWSoftware.CodeDom, Version=1.1.0.0, Culture=neutral,
              PublicKeyToken=d633d7d5b41cbb65">
        <providerOption name="CompilerVersion" value="v2.0"/>
      </compiler>
    </compilers>
  </system.codedom> 
```

Ok, but when i put this in my web.config, and When I try to build, the compiler return a lot of errors, like that:

```
error BC30451: 'DDtoCC' is not declared. It may be inaccessible due to its protection level.
0error BC30451: 'HojetoCC' is not declared. It may be inaccessible due to its protection level.
error BC30451: 'CCtoDD' is not declared. It may be inaccessible due to its protection level.
error BC30002: Type 'SqlConnection' is not defined.
error BC30002: Type 'SqlCommand' is not defined.
error BC30002: Type 'SqlConnection' is not defined.
error BC30002: Type 'SqlCommand' is not defined.
error BC30002: Type 'SqlConnection' is not defined.
error BC30002: Type 'SqlCommand' is not defined.
error BC30002: Type 'SqlDataReader' is not defined.
error BC30002: Type 'SqlConnection' is not defined.
error BC30002: Type 'SqlCommand' is not defined.
error BC30002: Type 'SqlConnection' is not defined.
error BC30002: Type 'SqlCommand' is not defined.
error BC30002: Type 'SqlDataReader' is not defined.
error BC30002: Type 'SqlConnection' is not defined.
error BC30002: Type 'SqlCommand' is not defined.
error BC30002: Type 'SqlConnection' is not defined.
error BC30002: Type 'SqlCommand' is not defined.
error BC30002: Type 'SqlDataReader' is not defined.
error BC30002: Type 'SqlConnection' is not defined.
error BC30002: Type 'SqlCommand' is not defined.
error BC30002: Type 'SqlConnection' is not defined.
error BC30002: Type 'SqlCommand' is not defined.
error BC30002: Type 'SqlDataReader' is not defined.
error BC30002: Type 'SqlConnection' is not defined.
error BC30002: Type 'SqlCommand' is not defined.
error BC30002: Type 'SqlCommand' is not defined.
error BC30002: Type 'SqlConnection' is not defined.
error BC30002: Type 'SqlDataReader' is not defined.
error BC30002: Type 'SqlConnection' is not defined.
error BC30002: Type 'SqlCommand' is not defined.
error BC30002: Type 'SqlDataReader' is not defined.
error BC30451: 'DataDiff' is not declared. It may be inaccessible due to its protection level.
error BC30451: 'AddDiastoCC' is not declared. It may be inaccessible due to its protection level.
error BC30451: 'AddDiastoCC' is not declared. It may be inaccessible due to its protection level.
error BC30451: 'QueryDB' is not declared. It may be inaccessible due to its protection level.
error BC30451: 'AddDiastoCC' is not declared. It may be inaccessible due to its protection level.
error BC30451: 'QueryDB' is not declared. It may be inaccessible due to its protection level.
error BC30451: 'Truncate' is not declared. It may be inaccessible due to its protection level.
error BC30002: Type 'SqlConnection' is not defined.
error BC30002: Type 'SqlDataReader' is not defined.
error BC30002: Type 'SqlCommand' is not defined.
error BC30451: 'QueryDB' is not declared. It may be inaccessible due to its protection level.
error BC30002: Type 'SqlConnection' is not defined.
error BC30002: Type 'SqlCommand' is not defined.
error BC30451: 'HojetoCC' is not declared. It may be inaccessible due to its protection level. 
```

And, When I remove this, the code is compiled normaly ;x

And, I have tried to create a web project whit this code, BUt, I got the same error.. How I can generate the documentation of this web syte project ??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-11T07:40:54.940

因为 VisualBasic 编译器中存在错误（根据 Sandcastle 文档），您需要手动添加所有导入。`System`甚至像or之类的基本进口产品`Microsoft.VisualBasic`。这是我的 web.config 的示例：

```
<system.codedom>
 <compilers>
  <compiler language="vb;vbs;visualbasic;vbscript" extension=".vb" 
      compilerOptions="/docpath:C:\Sandcastle\XML /imports:System,System.Resources,System.Web,Microsoft.VisualBasic,..."
      type="EWSoftware.CodeDom.VBCodeProviderWithDocs, EWSoftware.CodeDom, 
      Version=1.1.0.0, Culture=neutral, PublicKeyToken=d633d7d5b41cbb65">
    <providerOption name="CompilerVersion" value="v4.0"/>
  </compiler>
 </compilers>
</system.codedom> 
```

当您添加所有需要的导入时，这些错误不会影响发布过程。虽然，当您发布项目时仍可能存在一些编译错误。在我的所有 for each 循环中，我都遇到了隐式分配数据类型的问题。

我不得不将我的循环更改为
`For Each i as Integer = 0 In List(Of Object)`
之后一切正常。

# c++ - 以下转换整数 -> 双精度 -> 整数从哪个数无效？

> ID：16171850
> 
> 赞同：0
> 
> 时间：2013-04-23T14:23:00.443
> 
> 标签：c++, integer, double, floating-accuracy, floating-point-precision

假设我的计算机使用 IEEE 754 浮点编码，我想知道以下函数返回 false 的最小数字是多少：

```
constexpr bool test(const unsigned long long int x)
{
    return static_cast<unsigned long long int>(static_cast<double>(x)) == x;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T14:37:38.857

IEEE-754 中a 的尾数`double`是 53 位（52 位和一个隐藏，非常技术性）。这意味着如果其中的最高位`x`高于 52 位，并且一些低位非零，则比较将失败。

您可以通过编写一段代码来发现这一点：

```
unsigned long long x = 0x1;

while(x > 0)
{
   x <<= 1ULL;
   if (!test(x+1))
   {
      cout << "x=" << hex << x << endl;
      break;

   }
} 
```

编辑：在实际测试后稍微修正了代码。

它确实`x=20000000000000`按预期打印。

或者，如果您想使用`<limits>`，您可以通过以下方式获得相同的结果：

```
numeric_limits<double> n;
cout << "digits=" << dec << n.digits << " -> " << hex << (1ULL << n.digits) << endl; 
```

# python - 数组无法正常工作，具体取决于它们的格式

> ID：16171854
> 
> 赞同：0
> 
> 时间：2013-04-23T14:23:09.520
> 
> 标签：python, arrays, numpy

我有一个函数响应不同，具体取决于我设置它作为输入的数组的方式。对于非工作方式，该功能仍然运行，但不正确

工作方式：

```
import numpy as np
array1 = ["something1", "a,b,c,9", "more", "b,c,4"]
array2 = ["something2", "4,3", "more", "1,a"]
array3 = ["something3", "z", "more", "9,1"]
array4 = ["something4", "1", "more", "z"]
real_array = np.array((array1,array2,array3,array4)) 
```

不工作方式：

```
import numpy as np
array = [["something1", "a,b,c,9", "more", "b,c,4"],["something2", "4,3", "more", "1,a"],["something3", "z", "more", "9,1"],["something4", "1", "more", "z"]]
real_array = np.array((array)) 
```

类似的不工作方式：

```
import numpy as np
import csv
array = []
reading = csv.reader(open('file.csv', 'rb'))
for row in reading:
    array.append(row)
real_array = np.array((array)) 
```

显然，不工作的方式会更容易处理数据，因为我可以将行追加到`array`，而其他方式必须手动完成。

* * *

**两个数组都是相同的......那么为什么我的函数对它们的响应不同？**

* * *

我的函数从文件中随机选择一行，然后检查第二列中的某些内容是否与**前一个选择**的最后一列中的某些内容相匹配。这里是：

```
def make_sequence(size,array):
        count = 0
        without_column = array[1::]
        np.random.shuffle(without_column)
        sequence = [without_column[0]]
        result = [without_column[0][0]]
        length = 0
        while length < size:
            np.random.shuffle(without_column)
            start = without_column[0][1].split(',')
            end = sequence[count][3].split(',')
            i = 0
            while i < len(start):
                if start[i] in end:
                    sequence.append(without_column[0])
                    result.append(without_column[0][0])
                    count += 1
                    i = len(start)
                else:
                    pass
                i += 1
            length = len(result)
        return result 
```

* * *

编辑2：应该发生什么

* * *

如果我执行此代码：

```
make_sequence(10,real_array) 
```

我希望它每次都返回一个不同的数组，并且仅由第一列组成，但如果第二个项目的起始位置是第一个的结束位置之一，则只会将项目彼此相邻放置。这是一个例子：

如果选择的第一项是array3，则下一项只能是array1或array4，其他都不能。这是因为数组 3 的第 4 列是 9,1，这意味着后面唯一的数组必须在其第 2 列中有 9 或 1。

所以如果随机选择的第一项是array3，那么如果我运行这段代码：

```
make_sequence(2,real_array) 
```

只能有以下输出可能性：

["something3","something4"]

[“某事3”，“某事1”]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:29:24.297

我找到了解决方案！如果我根本不将文件运行到 numpy 数组中，该函数就可以完美运行......这是有效的：

```
import numpy as np
import csv
array = []
reading = csv.reader(open('file.csv', 'rb'))
for row in reading:
    array.append(row)
make_sequence(10,array) 
```

如果我不将数组转换为 numpy 数组，我的函数将完美运行。

**我仍然不知道这是为什么，如果有人知道，请告诉我**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T15:53:58.560

是的，你的数组看起来和我一模一样。除了 Rob 的测试，你还可以看到

```
real_array1.shape == real_array2.shape
real_array1.dtype == real_array2.dtype 
```

两者都返回`True`

但是，您的函数使用随机行，当然每次都会返回不同的结果。如果不仔细阅读，我不确定您的代码应该做什么，但您的问题可能是您的`without_column`数组实际上是没有第一*行*的数组。

```
In [15]: without_column = real_array1[1::]

In [16]: real_array1
Out[16]: 
array([['something1', 'a,b,c,9', 'more', 'b,c,4'],
       ['something2', '4,3', 'more', '1,a'],
       ['something3', 'z', 'more', '9,1'],
       ['something4', '1', 'more', 'z']], 
      dtype='|S10')

In [17]: without_column
Out[17]: 
array([['something2', '4,3', 'more', '1,a'],
       ['something3', 'z', 'more', '9,1'],
       ['something4', '1', 'more', 'z']], 
      dtype='|S10') 
```

也许你想要的是：

```
In [19]: without_column = real_array1[:,1:]

In [20]: without_column
Out[20]: 
array([['a,b,c,9', 'more', 'b,c,4'],
       ['1', 'more', 'z'],
       ['z', 'more', '9,1'],
       ['4,3', 'more', '1,a']], 
      dtype='|S10') 
```

这是故意的吗？

* * *

当我尝试运行您的代码时，选择`size`> 1 会使 while 循环永远运行。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-23T15:07:55.560

两个数组**不**相同。非工作数组是多维数组，不是标准数组。

# unix - 从文件中 grep 模式将内容与另一个文件进行比较并替换

> ID：16171865
> 
> 赞同：1
> 
> 时间：2013-04-23T14:23:40.097
> 
> 标签：unix, sed, awk, grep

我想在一个文件中grep版本号并在另一个文件中替换它。我想在文件 1 中 grep 4.3.0.5 并在文件 2 中的 4.3.0.2 替换它。我有以下命令来获取数字，但是如何在第二个文件中剪切/替换它？

**File1 ：**
应用程序：4.3.0.5（或）应用程序：4.3.0.5-SNAPSHOT

**File2：** 编辑**前**

grid_application_distribution_url = **nexus** : **//com.abcd.efge.ce/App/4.3.0.2/tar.gz/config**

**文件2**：编辑**后**（**期望结果**：）

如果文件中的 $VERISON 没有 SNAPSHOT 这个词，那么在文件 2 中

grid_application_distribution_url = **nexus** : **//com.abcd.efge.ce/App/4.3.0.5/tar.gz/config**

如果 $VERSION 有 SNAPSHOT 那么文件 2 中的行应该是

grid_application_distribution_url = **nexus-snapshot** : **//com.abcd.efge.ce/App/4.3.0.5/tar.gz/config**

```
 VER=$(awk -F: '/^App/{sub(/ .*$/, "", $2); print $2}'/path/file1.txt)

echo $VER

if ($vER ~ /SNAPSHOT/)
/usr/bin/ssh -t -t server2.com "sub("=nexus:", ":=nexus-snapshot") /path/file2" && sub(/[^\/]+\/tar\.gz/, $VER"/tar.gz") /path/file2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T18:48:38.443

你只需要这样的东西：

```
awk -F': +' 'NR==FNR{v=$2;next} {sub(/[^/]+\/tar.gz/,v"/tar.gz")} 1' File1 File2 > tmp && mv tmp File2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T14:28:31.670

你可以试试这个：

```
VERSION=($(grep -r "App:" /path/File1| awk  '{print ($2)}'))
sed -i "s/4.3.0.2/$VERSION/" File2 
```

它将查找“4.3.0.2”并按`$VERSION`. File2 将使用此更改进行更新。

如果您希望文件保持不变，请删除标志`-i`：

```
sed "s/4.3.0.2/$VERSION/" File2 
```

您将在标准输出中获得结果。

* * *

如评论中所示，`4.3.0.2`并非每次都这样。适应格式`X.Y.Z.W`：

```
sed "s/\/[0-9][0-9]*\.[0-9][0-9]*\.[0-9][0-9]*\.[0-9][0-9]\(\/tar.gz\)/\/$VERSION\1/" File2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T14:42:56.667

这个 awk 脚本可以完成这项工作（这是对@EDMorton 上述答案的增强）：

**根据 OP 的要求将命令拆分为 2**

```
VER=$(awk -F' *: *' '/^App/{print $2}' file1)

awk -v v="$VER" '{
     split(v, arr, "-");
     sub(/[^\/]+\/tar\.gz/, arr[1]"/tar.gz");
     if (arr[2] ~ /SNAPSHOT/)
        sub("=nexus:", ":=nexus-snapshot")
}1' file2 > tmpFile

mv tmpFile > file2 
```

# javascript - 如何在 n 秒后在顶部显示通知栏并从上到下转换？

> ID：16171866
> 
> 赞同：0
> 
> 时间：2013-04-23T14:23:40.917
> 
> 标签：javascript, jquery, css

在许多移动网站中，我看到通知会在几秒钟后从上到下显示动画。目前，我不记得这些网站。我能够找到如何显示顶部通知，但无法找到如何使用 CSS 3 过渡或 javscript/jquery 对其进行动画处理。这是我找到的链接，[http://www.red-team-design.com/cool-notification-messages-with-css3-jquery](http://www.red-team-design.com/cool-notification-messages-with-css3-jquery)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T06:23:53.790

我就是这样解决问题的

```
/* JAVA SCRIPT */
setTimeout(function () {
$('.notify-bar').show().addClass('notify-bar-height-change');
},2000)
```

```
/* CSS : */
    .notify-bar{
    		background-size: 40px 40px;
    		background-image: linear-gradient(
        135deg, rgba(255, 255, 255, .05) 25%, transparent 25%,
    		transparent 50%, rgba(255, 255, 255, .05) 50%, 
         rgba(255, 255, 255, .05) 75%,
    		 transparent 75%, transparent);										
    		 box-shadow: inset 0 -1px 0 rgba(255,255,255,.4);
    		 width: 100%;
    		 border: 1px solid;
    		 color: #fff;
    		 text-shadow: 0 1px 0 rgba(0,0,0,.5);
         background-color: #4ea5cd;
    		 border-color: #3b8eb5;
         padding: 5px;
    }

    .notify-bar-height {
        height: 0;
        -webkit-transition: height 0.5s ease;
    	-moz-transition: height 0.5s ease;
    	-o-transition: height 0.5s ease;
    	-ms-transition: height 0.5s ease;
        transition: height 0.5s ease;
    }
    .notify-bar-height-change {
        height: 20px;
    }
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div class="notify-bar notify-bar-height" style="display: none">
    Intall ABC!
 </div>
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T14:30:22.147

如果您使用的是 jquery 移动库，则可以使用 $('#some_selector').slideDown(2000)。希望这可以帮助。

[类似的问题](https://stackoverflow.com/questions/8519391/jquery-mobile-collapsible-slidedown-effect)

# java - Eclipse JDT IJavaProject 获取根文件

> ID：16171870
> 
> 赞同：1
> 
> 时间：2013-04-23T14:23:57.553
> 
> 标签：java, eclipse, eclipse-jdt, abstract-syntax-tree

我有以下代码片段，它`IJavaProject`从 a返回相关内容`CompiliationUnit`：

```
IJavaProject project = compilationUnit.getJavaProject(); 
```

我需要在项目的根目录中找到一个文件，但我不知道如何找到它。如果我循环播放，`project.getAllPackageFragmentRoots()`我可以看到 src 文件夹、src 文件夹下的包和标准 JRE 类，但看不到我的根文件。

如何加载根文件夹下的文件？（最好变成一个`File`对象）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T09:33:05.983

我找到了我的解决方案：

```
 IJavaProject project = compilationUnit.getJavaProject();

    IProject p = project.getProject();
    IFile rm = p.getFile("file.xml"); 
```

真的很简单。

# php - 将数组从模型传递到控制器，并且只在控制器中使用它

> ID：16171875
> 
> 赞同：0
> 
> 时间：2013-04-23T14:24:11.580
> 
> 标签：php, arrays, session, codeigniter-2

我正在尝试自己构建一个带有会话的登录系统作为练习，但我遇到了一个我似乎无法解决的问题。

当用户登录我的测试网站时，我想从数据库中获取他的一些数据（如姓氏和电子邮件）并将其放入他的会话中。在此之前，我使用了 return true 或 false 方法并在会话中添加了一个服装条目，但现在我想添加额外的东西，我可以在其他页面上轻松访问，如用户名/电子邮件等。

我尝试了将数据从模型传递到控制器的 diff 方法，但我似乎找不到在控制器本身内部使用信息数组的方法。

我当前的代码如下所示：

这是模型

```
 $username = $this->input->post('username');
    $password = md5($this->input->post('password'));
    $query = $this->db->query("SELECT * FROM users WHERE username = '$username' AND password = '$password' LIMIT 1");
        if($query->num_rows() > 0)
        {

            foreach ($query->result() as $row)
            {
                $data[]['id'] = $row->id;
                $data[]['name'] = $row->name;
                $data[]['surname'] = $row->surname;
                $data[]['username'] = $row->username;
                $data[]['email'] = $row->email;
                $data[]['premission_level'] = $row->premission_level;
                $data[]['disabled'] = $row->disabled;
            }
        }
        return $data;
} 
```

获取数据后，它会转到此控制器：

```
 public function clogin()
{
    $this->load->model('M_login');
    $query = $this->M_login->mlogin();

    if($query == TRUE)
    {
        $data['product'] = $this->M_login->get_user_info();
        $session_data = array(
                'username' => $this->input->post('username'),
                'is_logged_in' => TRUE
                    );
        $this->session->set_userdata($session_data);
           echo '<pre>';
        print_r($data);
    }

} 
```

在此之后，我迷失了如何从数组中获取信息。数组成功传递，因为我可以使用 print_r 查看里面的内容。

PS：数组中的当前字段是用户名/姓名/姓氏/电子邮件/禁用。

先感谢您。

编辑：这就是我的数组的样子：

```
Array 
```

( [0] => 数组

```
 (
        [id] => 1
        [name] => war
        [surname] => howl
        [username] => warhowl
        [email] => someone@none.com
        [premission_level] => 1
        [disabled] => 0
    ) 
```

)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:27:47.703

您正在将行的字段插入到分隔的数组中：

```
$data[]['id'] = $row->id;
$data[]['name'] = $row->name;
... 
```

尝试：

```
$rowData = array();
$rowData['id'] = $row->id;
$rowData['name'] = $row->name;

$data[] = $rowData 
```

要不就

```
$data[] = array(
    'id'   => $row->id,
    'name' => $row->name,
    ...
); 
```

# fortran - 为 ifort 提供库的路径

> ID：16171885
> 
> 赞同：0
> 
> 时间：2013-04-23T14:24:47.390
> 
> 标签：fortran, intel-fortran

免责声明：这不是我的领域，我不知道行话。

我正在尝试在计算服务器上编译和运行一些代码。机器上安装了英特尔编译器。当我尝试使用编译代码时

```
ifort src.f -o mem 
```

一切正常。如果我尝试优化：

```
ifort -fast src.f. -o mem 
```

我首先收到消息：

```
ipo: remark #11001: performing single-file optimizations
ipo: remark #11006: generating object file /tmp/ipo_ifortYepD4m.o 
```

这似乎合乎逻辑。当我运行输出文件时，出现错误：

```
./mem: error while loading shared libraries: libgfortran.so.1: cannot open shared object file: No such file or directory 
```

我搜索`libgfortran`：

```
avityo@admin:~/prog/mn270.161> locate libgfortran
/home/MATLAB/R2011b/sys/os/glnxa64/libgfortran.so.3
/home/MATLAB/R2011b/sys/os/glnxa64/libgfortran.so.3.0.0
/opt/matlab/r2012b/sys/os/glnxa64/libgfortran.so.3
/opt/matlab/r2012b/sys/os/glnxa64/libgfortran.so.3.0.0
/usr/lib64/gcc/x86_64-suse-linux/4.3/libgfortran.a
/usr/lib64/gcc/x86_64-suse-linux/4.3/libgfortran.so
/usr/lib64/gcc/x86_64-suse-linux/4.3/libgfortranbegin.a
/usr/lib64/libgfortran.so.3
/usr/lib64/libgfortran.so.3.0.0 
```

有没有办法告诉 ifort 可用的 libgfort 库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T14:55:29.640

我同意 Vladimir 的观点，即 gfortran 和 ifort 之间存在奇怪的依赖关系。但是，ifort 似乎正在寻找 libgfortran.so。**1**你有 libgfortran.so。**3**在那里列出。您应该能够通过 将前者链接到后者`ln -s [target] [shortcut]`。那是，

```
 ln -s /usr/lib64/libgfortran.so.3 /usr/lib64/libgfortran.so.1 
```

# java - 在 Java 中转换 source 1.7 和 source < 1.7

> ID：16171886
> 
> 赞同：4
> 
> 时间：2013-04-23T14:24:48.207
> 
> 标签：java, eclipse, netbeans

我制作了一些实用程序，可以在我正在制作的几个应用程序中使用它们。大多数应用程序支持 source 1.7，但其中一些不支持（例如，Android 应用程序）。

```
ArrayList<String> list = new ArrayList<>();
String s = "hi";
switch (s) {
    case "hi": 
```

例如，低于 1.7 的 Java 版本不支持菱形运算符和切换字符串。

我希望在构建 Eclipse 或 Netbeans 项目时将源代码转换为与 1.7 以下的源代码兼容。

我能做到吗？如果是，如何？如果没有，那我应该怎么做？手动将所有源代码替换为 1.6 兼容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T14:40:13.203

AFAIK，这是不可能的。

您可以进行交叉编译，但是：

> javac 不接受低于其配置接受的源语言的目标（或编译策略）。

[https://blogs.oracle.com/abuckley/entry/versioning_in_the_java_platform](https://blogs.oracle.com/abuckley/entry/versioning_in_the_java_platform)

这篇文章来自 2009 年，但我怀疑 Java SE 7 是否改变了这种情况。

解决方案：使用您想要支持的最小 Java 版本的语法（源代码）。

使用持续集成服务器，例如 Jenkins，并为每个想要支持的 JDK 配置一个 Job（不需要交叉编译，因为您使用了一些旧 Java 版本中不可用的 API，它可能会编译但在运行时失败。）

另请注意：Oracle 的 Java SE 6 已结束生命周期，建议在大多数情况下更新到 Java SE 7（例如，当您与 Oracle 没有支持合同时）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T14:52:40.777

> 我能做到吗？

理论上是的。

> 如果是，如何？

使用 Java 7 -> Java 6 源代码翻译器。但是，我还没有听说过有这样的翻译器存在……

> 如果没有，那我应该怎么做？手动将所有源代码替换为 1.6 兼容？

这是最实用的方法，除非你能找到别人已经实现的翻译器。

# ios - 如何将 NSData 转换为 NSMultableArray

> ID：16171887
> 
> 赞同：0
> 
> 时间：2013-04-23T14:24:49.387
> 
> 标签：ios, nsdata

我有一个问题如何将 NSData 转换为 NSMultableArray

我从 JSON 接收数据，我需要将该数据设置到表视图中。怎么做？

上面是 JSON 的示例：

```
{"d":"[{\"codUf\":28,\"descricao\":\"MG\"},{\"codUf\":29,\"descricao\":\"PR\"},{\"codUf\":19,\"descricao\":\"RJ\"},{\"codUf\":25,\"descricao\":\"SP\"}]"} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T14:39:08.340

如果您使用的是 IOS 5 +，则可以使用 NSJSONSerialization，如果您也支持旧版本，则可以使用 SBJSON。

这个问题可能会对你有所帮助。

[将 JSON 解码为 NSArray 或 NSDictionary](https://stackoverflow.com/questions/10121693/decode-json-to-nsarray-or-nsdictionary)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T14:28:46.583

使用 SBJson [https://github.com/stig/json-framework/](https://github.com/stig/json-framework/)

否则你可以做

```
NSError *error = nil;
[NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingMutableContainers error:&error] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T14:30:46.460

尝试

```
NSData *responseData = ...
NSError *error = nil;
NSMutableArray *array = [NSJSONSerialization JSONObjectWithData:responseData
                                                        options:NSJSONReadingMutableContainers
                                                          error:&error]; 
```

# deployment - IaaS 和 PaaS 云系统的 UML 部署图

> ID：16171888
> 
> 赞同：8
> 
> 时间：2013-04-23T14:24:50.093
> 
> 标签：deployment, uml, cloud, paas, iaas

我想使用 UML 部署图对以下情况进行建模。

在基础设施即服务云平台（例如[Amazon EC2](http://aws.amazon.com/ec2/) ）上生成了一个小型命令和控制机器实例。这个实例反过来负责产生额外的实例，并通过[S3](http://aws.amazon.com/s3/)`NumberCruncher.py`之类的东西为它们提供控制脚本，或者如果程序足够小以适合该字段，则直接作为启动脚本参数。**在机器实例是节点**的工作假设下，我尝试使用 UML 部署图对情况进行建模的尝试 并不令人满意，原因如下。

 ***   该图似乎表明将恰好有三个数字运算器节点。是否可以在部署图中说明多个节点，就像使用[multi-object](http://office.microsoft.com/en-us/help/multi-object-shape-HP001208925.aspx)说明多个对象实例一样。如果这对节点来说是不可能的，那么这似乎是一个[长期存在的问题](http://www.omg.org/issues/issue2295.txt)
*   无论如何在部署图中显示 [部署区域/数据中心](http://aws.amazon.com/about-aws/globalinfrastructure/)的等效项？

最后：

平台即服务呢？整个**机器实例是一个节点的**想法在那时完全崩溃了。在那种情况下你到底会怎么做？将整个 PaaS 提供商视为单个节点而忘记细节？

![IaaS 节点是机器实例](https://i.stack.imgur.com/CqokR.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-10T23:03:52.977

关于你的第一个问题：

> 无论如何在部署图中显示部署区域/数据中心的等效项？

我通常为此使用Notes。

你的第二个问题：

> 平台即服务呢？整个机器实例是一个节点的想法在那时完全崩溃了。在那种情况下你到底会怎么做？将整个 PaaS 提供商视为单个节点而忘记细节？

我会说，是的，你的最后一个问题。我想您可以从部署模型及其元素的定义中获取更多细节。特别是在本段的末尾：

> 它们[节点]可以嵌套，并且可以使用通信路径连接到任意复杂的系统中。通常，节点代表硬件设备**或软件执行环境**。

和

> ExecutionEnvironments 代表应用程序组件在执行时可能需要的标准软件系统。

来源：[http ://www.omg.org/spec/UML/2.5/Beta1/](http://www.omg.org/spec/UML/2.5/Beta1/)**

# lazy-evaluation - Dynatree 带子项的初始负载

> ID：16171890
> 
> 赞同：0
> 
> 时间：2013-04-23T14:24:51.943
> 
> 标签：lazy-evaluation, children, dynatree

我在最新版本 1.2.4 中有一个延迟加载 DynaTree 并获得挑战，以提供当前选定节点的路径。我对根节点进行循环以构建树的第一级。单击其中一个根节点后，树会展开并通过延迟加载下一个元素进行选择。现在树的第三维中的元素是已知的，但是我如何在 JSON 结构中提供受影响的节点？一个简单的添加到末尾也将添加根树中的元素。

```
$(function(){
        // Attach the dynatree widget to an existing <div id="tree"> element
        // and pass the tree options as an argument to the dynatree() function:
        $("##tree").dynatree({
            clickFolderMode: 3,
            persist: false,
            autoCollapse: true,
            onActivate: function(node) {
                // A DynaTreeNode object is passed to the activation handler
                // Note: we also get this event, if persistence is on, and the page is reloaded.
                if( node.data.href ){
                    // use href and target attributes:
                    window.location.href = node.data.href;                  
                }

            },
            onLazyRead: function(node){
                node.appendAjax({url: "#intranetpath#remote/lopTreeLoader.cfc?method=getNodes",
                                   data: {"key": node.data.key, // Optional url arguments
                                          "mode": "all"

                                          },
                                   // (Optional) use JSONP to allow cross-site-requests
                                   // (must be supported by the server):
            //                      dataType: "jsonp",
                                   success: function(node) {
                                       // Called after nodes have been created and the waiting icon was removed.
                                       // 'this' is the options for this Ajax request
                                       },
                                   error: function(node, XMLHttpRequest, textStatus, errorThrown) {                                    
                                       // Called on error, after error icon was created.
                                       },
                                   cache: false // Append random '_' argument to url to prevent caching.
                                  });
            },
            children: [ // Pass an array of nodes.
                <cfloop query="qDivision">
                {   key:"#qDivision.obj_uuid#" ,
                    title: "#qDivision.f_division_name#", 
                    activate:false, 
                    expand:#qDivision.expand#, 
                    select:false, 
                    isLazy:true,
                    <cfif qDivision.clickable>
                        addClass:"boldText",
                        href: "/program.helios/lop/index.cfm?obj_uuid=#qDivision.obj_uuid#",
                    </cfif>
                    icon:"../../skin/icons/idivision.gif"}

                    <cfif qDivision.currentrow NEQ qDivision.recordcount>,</cfif>
                </cfloop>

            ]
        });
    }); 
```

如何使用指向所选节点的直接路径中的所有节点初始化树？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T20:34:34.673

子对象可能又包含一个`children`属性：

```
 children: [ // Pass an array of nodes.
                <cfloop query="qDivision">
                {   key:"#qDivision.obj_uuid#" ,
                    title: "#qDivision.f_division_name#", 
                    activate:false, 
                    children: [{title: "foo"}, ...] 
```

# iphone - 未调用 CellForRowAtIndexPath

> ID：16171899
> 
> 赞同：-3
> 
> 时间：2013-04-23T14:25:11.483
> 
> 标签：iphone, ios, objective-c, uitableview

我正在编写一个有很多视图的应用程序，我使用了滑动视图库（`ECSlidingViews`）。问题是当我用对象填充数组并用`tableView:cellForRowIndexPath:`方法中的对象填充表时，它确实会在表中显示数据，但是当我转到其他视图并返回时，数据会因为`tableView:cellForRowIndexPath:`没有被调用而消失。这是代码：

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath   
{   
NSLog(@"begin of cellForRowAtIndexPath");    
SchedualeCell *cell = (SchedualeCell *)[tableView dequeueReusableCellWithIdentifier:@"Cell"];    
Course *temp = [array objectAtIndex:indexPath.row];    
cell.nameLb.text = temp.name;    
cell.hourLb.text = [NSString stringWithFormat:@"%d",temp.hour];    
cell.startTimeLb.text = temp.startTime;    
cell.endTimeLb.text = temp.endTime;    
NSLog(@"End of cellForRowAtIndexPath");    
return cell;    
} 
```

`tableView:numberOfRowsInSection:`并`numberOfSectionsInTableView:`在我回到具有表视图的视图时被调用。

PS：`UIViewController`视图里面有表格视图，我在发布我的问题之前搜索了所有 StackOverflow。

编辑：这是我设置委托和数据源的地方

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    NSLog(@"Did Appear");
    // Do any additional setup after loading the view.
    self.view.layer.shadowOpacity = 0.75f;
    self.view.layer.shadowRadius = 10.0f;
    self.view.layer.shadowColor= [UIColor blackColor].CGColor;

    if (![self.slidingViewController.underLeftViewController isKindOfClass:[MenuViewController class]])
    {
        self.slidingViewController.underLeftViewController = [self.storyboard instantiateViewControllerWithIdentifier:@"Menu"];
    }
    [self.view addGestureRecognizer:self.slidingViewController.panGesture];

    if (array == nil)
    {
        array = [[NSMutableArray alloc]init];
    }

    table.delegate = self;
    table.dataSource = self;
    [table reloadData];

} 
```

我确实在标题中包含了委托和数据源

```
@interface MainViewController : UIViewController<UITableViewDataSource , UITableViewDelegate,addDelegate> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T14:37:08.710

首先，它不是`numberOfRowsAtSection`and `numberOfTableView`。是`numberOfSectionsInTableView`和`numberOfRowsInSection`。

**你可以做的事情：**

**1)** `NSLog`你的`numberOfRowsInSection`. 请注意，如果它是“0”，那么您`cellForRowAtIndexPath`将永远不会被调用。

**2）**如果你使用你的`UITableView`内部一些`UIView`，那么你应该添加：

```
[self.view addSubview:table]; 
```

**3）**不要忘记包括：

```
@interface yourViewController : UIViewController<UITableViewDataSource,UITableViewDelegate> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T05:27:51.133

一旦检查您是否重新构建了`tableview`in `ViewWillAppear`。有时如果我们设置出框架，`CellForRowAtIndexPath`将不会调用。

# c++ - 在子类中重载基类赋值运算符会导致模棱两可的赋值错误

> ID：16171900
> 
> 赞同：1
> 
> 时间：2013-04-23T14:25:14.013
> 
> 标签：c++, operator-overloading

我有这个基类（删除了细节）

```
template<class T>
class GPtr
{
public:
    typedef T BaseType;

    GPtr& operator=(const BaseType& rhs)
    {
        m_p = rhs.get();
        return *this;
    }
private:
    BaseType m_p;
}; 
```

然后一个子类专门化模板并添加另一个分配选项：

```
class GDrawablePtr : public GPtr<XYZ>
{
public:
    GDrawablePtr& operator=(const RootType& rhs)
    {
        GPtr::operator =(convert<BaseType::element_type>(rhs));
        return *this;
    }
/* -- only compiles if this is uncommented
    GDrawablePtr& operator=(const BaseType& rhs)
    {
        GPtr::operator =(rhs);
        return *this;
    }
*/
}; 
```

注释掉该代码后，我在分配实例时会收到有关不明确分配的编译错误。如果我取消注释它，那么即使它似乎没有做任何新的事情，编译也是成功的。

有没有办法避免重新定义原始的基本赋值运算符，这种行为的原因是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T14:37:42.463

它被称为*隐藏*：在派生类中声明一个函数会使基类中具有相同名称的任何函数都无法访问。您可以使用*using-declaration*使基类版本也可用：

```
// In GDrawablePtr
using GPtr::operator=; 
```

# java - Tomcat Tuckey UrlRewrite 到规则问题

> ID：16171904
> 
> 赞同：0
> 
> 时间：2013-04-23T14:25:24.160
> 
> 标签：java, xml, tomcat, url-rewriting, tuckey-urlrewrite-filter

我的问题是，我的 urewrite.xml 文件中有类似外观规则的问题，事实上第一条规则将起作用，但随后的类似规则将不起作用。这是一个例子：

```
<rule>
<from>Porsche-911_991-3.4_Carrera.jsp</from>
<to>cars.jsp?makeID=640&amp;modelID=3747</to>
</rule>

<rule>
<from>Test-Porsche-911_991-3.4_Carrera.jsp</from>
<to>test.jsp?makeID=640&amp;modelID=3747</to>
</rule> 
```

第一条规则有效，第二条无效，原因我不明白。如果我手动访问 test.jsp?makeID=640&modelID=3747 页面可以工作，如果我尝试 Test-Porsche-911_991-3.4_Carrera.jsp 页面不会出现，只会生成错误日志指定参数丢失。

我希望在我拔掉所有头发之前有人可以帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-15T01:05:47.353

第一条规则`Porsche-911_991-3.4_Carrera.jsp`的匹配文本 是第二条规则的匹配文本的子字符串。结果，第二个 URL 消失了。

使用[插入符号元字符](http://urlrewritefilter.googlecode.com/svn/trunk/src/doc/manual/4.0/guide.html)来区分两个 URL：

```
<rule>
  <from>^/Porsche-911_991-3.4_Carrera.jsp</from>
  <to>cars.jsp?makeID=640&amp;modelID=3747</to>
</rule>

<rule>
  <from>^/Test-Porsche-911_991-3.4_Carrera.jsp</from>
  <to>test.jsp?makeID=640&amp;modelID=3747</to>
</rule> 
```

颠倒顺序以将更具体的 URL 放在首位也可以：

```
<rule>
  <from>Test-Porsche-911_991-3.4_Carrera.jsp</from>
  <to>test.jsp?makeID=640&amp;modelID=3747</to>
</rule>

<rule>
  <from>Porsche-911_991-3.4_Carrera.jsp</from>
  <to>cars.jsp?makeID=640&amp;modelID=3747</to>
</rule> 
```

# jquery - 使用变量值作为 jquery/javascript 的对象

> ID：16171907
> 
> 赞同：0
> 
> 时间：2013-04-23T14:25:32.580
> 
> 标签：jquery, variables, object, raphael

我有类似的东西：

```
var StateName =  [obj.data('name')];
StateName.click(function(e){ etc.... 
```

所以，它给了我正确的名字（德克萨斯州），但它在控制台中说：

```
Object usa.Texas has no method 'click' 
```

如果我直接这样写：

```
usa.Texas.click(function(e){ etc.... 
```

有用...

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T15:25:31.387

正如您在评论中指出的那样， obj.data('name') 返回一个字符串。你不能像那样访问一个 JavaScript 对象，但是你可以通过传递一个字符串来访问它的属性。

你可以这样做：

```
// Get Name, split to extract the property portion
var StateName = obj.data('name').split('.')[1];

// Bind to specific state
usa[StateName].click(...... 
```

如果您需要对象的名称（美国），您可以将所有（假设）国家对象嵌套在另一个对象中。

```
// Wrap in object
var countries = {usa: { texas: jQuery() }}

// Get Name, split to extract portions
var CountryState = obj.data('name').split('.');
var Country = CountryState[0];
var State = CountryState[1];

// Bind to country / state
countries[Country][State].click(....... 
```

# javascript - Knockout.js 在 ko.observable() 写入之前修改值

> ID：16171912
> 
> 赞同：5
> 
> 时间：2013-04-23T14:26:06.477
> 
> 标签：javascript, jquery, knockout.js, number-formatting

我有一个包含许多变量的工作视图模型。

我使用 autoNumeric ( [http://www.decorplanit.com/plugin/](http://www.decorplanit.com/plugin/) ) 在文本框中进行文本格式设置。我想在计算的 observable 中使用输入字段的观察数据，但是如果带有格式的 observable 文本字段被修改，格式也会保存在变量中。

**如何只观察输入字段的值而不进行格式化？**

我认为最好的方法可能是对 observable 使用 getter/setter，并在设置值时删除格式。我在敲除的文档中找不到为 ko.observable() 编写 get/set 方法的解决方案，并且 ko.computed() 无法存储值。

*我不想使用隐藏字段或额外变量。
没有它这可能吗？*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T15:01:52.440

解决方案，见[http://knockoutjs.com/documentation/extenders.html](http://knockoutjs.com/documentation/extenders.html)

```
ko.extenders.numeric = function(target, precision) {
//create a writeable computed observable to intercept writes to our observable
var result = ko.computed({
    read: target,  //always return the original observables value
    write: function(newValue) {
        var current = target(),
            roundingMultiplier = Math.pow(10, precision),
            newValueAsNum = isNaN(newValue) ? 0 : parseFloat(+newValue),
            valueToWrite = Math.round(newValueAsNum * roundingMultiplier) / roundingMultiplier;

        //only write if it changed
        if (valueToWrite !== current) {
            target(valueToWrite);
        } else {
            //if the rounded value is the same, but a different value was written, force a notification for the current field
            if (newValue !== current) {
                target.notifySubscribers(valueToWrite);
            }
        }
    }
});

//initialize with current value to make sure it is rounded appropriately
result(target());

//return the new computed observable
return result;
}; 
```

后来

```
function AppViewModel(one, two) {
  this.myNumberOne = ko.observable(one).extend({ numeric: 0 });
  this.myNumberTwo = ko.observable(two).extend({ numeric: 2 });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T14:30:28.300

您可以为此使用 ko.computed()。您可以指定写入选项，请参阅可写计算的[observables](http://knockoutjs.com/documentation/computedObservables.html#writeable_computed_observables)

示例（取自淘汰文档）：

```
function MyViewModel() {
   this.price = ko.observable(25.99);

   this.formattedPrice = ko.computed({
       read: function () {
           return '$' + this.price().toFixed(2);
       },
       write: function (value) {
           // Strip out unwanted characters, parse as float, then write the raw data back to the underlying "price" observable
           value = parseFloat(value.replace(/[^\.\d]/g, ""));
           this.price(isNaN(value) ? 0 : value); // Write to underlying storage
       },
       owner: this
   });
}

ko.applyBindings(new MyViewModel()); 
```

# mysql - 当我将 MySQL 数据库系统与 Jena2 一起使用时，我得到了 java.lang.NoSuchMethodError

> ID：16171914
> 
> 赞同：0
> 
> 时间：2013-04-23T14:26:12.207
> 
> 标签：mysql, jena

这是我的代码

```
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.UnsupportedEncodingException;
import java.sql.SQLException;

import com.hp.hpl.jena.db.DBConnection;
import com.hp.hpl.jena.db.IDBConnection;
import com.hp.hpl.jena.rdf.model.Model;
import com.hp.hpl.jena.rdf.model.ModelFactory;
import com.hp.hpl.jena.rdf.model.ModelMaker;

public class myontoly {

     public static final String MYSQL_DB_CLASSNAME = "com.mysql.jdbc.Driver";

        public static final String MYSQL_DB_URL =

           "jdbc:mysql://localhost:3306/mysql?useUnicode=true&characterEncoding=UTF8";

        public static final String MYSQL_DB_USER = "root";

        public static final String MYSQL_DB_PASSWD = "mysql2011510";

        public static final String DB = "MySQL";

        public static void main(String[] args) {

           //     loading the JDBC driver

           try {

               Class.forName(MYSQL_DB_CLASSNAME).newInstance();

           } catch (ClassNotFoundException e) {

               // TODO Auto-generated catch block

               e.printStackTrace();

           } catch (InstantiationException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IllegalAccessException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

           //Create database connection

           IDBConnection conn = new DBConnection(MYSQL_DB_URL, MYSQL_DB_USER, MYSQL_DB_PASSWD, DB);

           //Use the connection to create a model maker

           ModelMaker maker = ModelFactory.createModelRDBMaker(conn);

           Model base = maker.createDefaultModel();

           FileInputStream inputStreamfile = null;

           File file = new File("file:./Taxonomy.owl");

           try {

               inputStreamfile = new FileInputStream(file);

           } catch (FileNotFoundException e1) {

               // TODO Auto-generated catch block

               e1.printStackTrace();

           }

           InputStreamReader in = null;

           try {

               in =new InputStreamReader(inputStreamfile, "UTF-8");

           } catch (UnsupportedEncodingException e1) {

               // TODO Auto-generated catch block

               e1.printStackTrace();

           }

           base.read(in, null);

           try {

               in.close();

           } catch (IOException e1) {

               // TODO Auto-generated catch block

               e1.printStackTrace();

           }

           base.commit();

           //Close the database connection

           try {

               conn.close();

           } catch (SQLException e) {

               // TODO Auto-generated catch block

               e.printStackTrace();

           }
        }} 
```

错误信息，我在线程“main”java.lang.NoSuchMethodError中尝试了jena 2.4、2.6.4异常：com.hp.hpl.jena.rdf.model.ModelFactory.createModelRDBMaker(Lcom/hp/hpl/jena/ db/IDBConnection;)Lcom/hp/hpl/jena/rdf/model/ModelMaker; 在 com.webservicecom.mysql.myontoly.main(myontoly.java:71))

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T14:59:50.840

那是一个非常古老的耶拿版本。[请使用当前 Jena 发行](http://jena.apache.org/download/index.html)版中的最新版本重试。

# jquery - 延迟函数jquery

> ID：16171916
> 
> 赞同：1
> 
> 时间：2013-04-23T14:26:24.260
> 
> 标签：jquery

我在菜单上有 jquery 悬停效果，它工作正常，但如果你将鼠标移动到项目上的速度快几倍，那么动画就会继续你进入该区域的次数，抱歉，如果我无法解释我的问题如我所愿，我需要的是某种延迟，因此如果您多次移动鼠标，该功能将仅触发一次，然后您等待 1 秒以再次获得效果。谢谢！

```
$(".border").hover(function(){
    if($(this).next('.sous_menu').is(':visible')){
        $('.sous_menu').closest('.border').removeClass('border').addClass('border_active');
    }else{
        $(this).toggleClass('border_active border', 500);
    }
}); 
```

[http://jsfiddle.net/xb8Ss/9/](http://jsfiddle.net/xb8Ss/9/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T14:31:20.367

你可以看看这个插件：[hoverIntent jQuery Plug-in](http://cherne.net/brian/resources/jquery.hoverIntent.html) as describe in this question [Delay jquery hover event?](https://stackoverflow.com/questions/435732/delay-jquery-hover-event?rq=1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T14:38:14.690

尝试`delay()`在切换之前添加 a 和 stop() 。这`stop()`将停止任何正在进行的动画，从而阻止几乎无穷无尽的动画。而这`delay()`将延迟它你放多少毫秒。

```
$(this).stop()delay(1000).toggleClass('border_active border', 500); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T15:12:13.003

如果我正确理解了这个问题，我相信这就是您要寻找的...

```
$(document).ready(function() {
    var canMove = true;

    $("#moveme").hover(function() {
        if(canMove) {
            canMove = false;

            $(this).css("left", "50px");
            setTimeout(function() { canMove = true; }, 1000);
        }
    }, function() {
        $(this).css("left", "10px");
    });
}); 
```

jsfiddle[在这里](http://jsfiddle.net/J5VAr/)

上面的悬停代码只会在达到 1000（1 秒）的“冷却时间”后运行。或者，您可以`canMove`在悬停退出时设置为 true，这将确保代码在每次悬停时只运行一次（即使情况已经如此）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T14:45:29.360

您可以通过添加检查器变量并在超时时对其进行更改来检查函数是否已在最后一秒执行：

```
// the first time should always be allowed
var allow = true

$(".border").hover(function(){

    // if 'allow' is false, return without doing anything
    if(!allow) {
        return;
    }

    // the function is now gonna execute, don't allow
    // other events from executing the function
    allow = false;

    // executing the function
    if($(this).next('.sous_menu').is(':visible')){
        $('.sous_menu').closest('.border').removeClass('border').addClass('border_active');
    }else{
        $(this).toggleClass('border_active border', 500);
    }

    // after a second of the execution of the function, set allow to
    // true again to allow other events from executing the function
    setTimeout(function() {
        allow = true
    }, 1000)

}); 
```

# jquery - jQuery Validate - 表单在成功时消失

> ID：16171918
> 
> 赞同：0
> 
> 时间：2013-04-23T14:26:27.897
> 
> 标签：jquery, jquery-validate

我有一个使用 jQuery Validate 进行验证的简单表单，但我遇到了一个我以前从未见过的问题。我有一个包装在容器中的表单，该容器使用验证摘要进行验证，当您在成功验证的字段之一中输入一些信息然后关闭标签时，容器的整个内容就会消失。我认为这与匹配表单所在容器的包装器属性有关。您可以在以下代码片段/jsFiddles 中看到此行为：

```
$('#form1').validate({
        wrapper: 'p',
        errorContainer: '#jserror',
        errorClass: 'jserror',
        errorLabelContainer: '#ValidationErrors',
        highlight: function(element, errorClass) {
            $(element).addClass('errorfields');
        },
        unhighlight: function(element, errorClass) {
            $(element).removeClass('errorFields');
        },
        rules : {},
        messages: {
            name: {
                required: "Name is required"
            },
            postSlug: {
                postSlug: "Can only contain numbers, letters, dashes and underscores",
                required: "Post slug is required"
            }
        }
    });// end validate 
```

表单和标题被包装在 ul/li 中，设置包装器时该内容完全消失：'li' [http://jsfiddle.net/tjans/cqXXu/41/](http://jsfiddle.net/tjans/cqXXu/41/)

表单和标题被包裹在 div 中，设置 wrapper 时内容完全消失：'div' [http://jsfiddle.net/tjans/cqXXu/44/](http://jsfiddle.net/tjans/cqXXu/44/)

表格和标题被包裹在 div 中，包装器设置为 'p'，一切正常。 [http://jsfiddle.net/tjans/cqXXu/45/](http://jsfiddle.net/tjans/cqXXu/45/)

这是一个错误，还是有解决方法/更好的语法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T14:52:00.457

您的问题是该插件也设置`display:none`在您的`errorLabelContainer`.

换一种方式试试...

**HTML**：

```
<div id="ValidationErrors" class="messageContainer validation" style="display:none;">
    <ul></ul>
</div> 
```

**验证选项**：

```
errorLabelContainer: '#ValidationErrors ul', 
```

**演示：http: [//jsfiddle.net/uWVZ9/](http://jsfiddle.net/uWVZ9/)**

* * *

这与您的问题无关，但我也会删除空`rules: {}`...这绝不是一个好主意，而且它完全是多余的，因为您的规则已经与 HTML 内联定义。

# javascript - Canviz 示例不起作用

> ID：16171919
> 
> 赞同：0
> 
> 时间：2013-04-23T14:26:35.720
> 
> 标签：javascript, graphviz

我已经下载了 Canviz（它是一个用于绘制图形的 Javascript 库）。我已经解压缩了存档。我用 Chrome 打开 index.html，这应该是一个例子。出现“加载”消息......并且永远不会消失。

请问我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-16T14:02:05.187

几个月前我在这个图书馆工作过。

您还需要安装 graphviz 才能创建 canviz 将绘制的图形。

安装后，您必须使用带有 url 参数的函数 load 来创建图形。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-24T11:22:01.187

WebBrowsers 可以选择是否启用 javascript。确保您的浏览器启用它。

这是 Mozilla 的示例：[Mozilla 示例](http://support.mozilla.org/en-US/kb/javascript-settings-for-interactive-web-pages)

# java - 有没有一种很好的方法可以用零填充整数而不将其转换为字符串？

> ID：16171921
> 
> 赞同：1
> 
> 时间：2013-04-23T14:26:39.240
> 
> 标签：java, string, format, int

我想不出更好的方法来用零填充整数而不先将其转换为字符串。有没有办法做到这一点？我发现了很多关于此的问题，但它们都需要字符串转换。我知道我们可以用这种方法找到长度：

```
int length = (num==0) ? 1 : (int)Math.log10(num) + 1; 
```

但是，这仍然需要我将其转换为字符串，然后再转换回来。当然，有更好的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T14:30:04.447

No. An`int`代表一个数学整数值，表示为 32 位。数字 0001 是 1，具有唯一的二进制表示。左填充整数不是整数。它们是字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T14:30:23.063

不可以。数字类型不能包含前导零。这是格式化文本表示的一个特征，即`Strings`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T15:31:36.973

既然你已经有了长度，我猜前导零只是为了输出，但最终你的问题得到了其他两张海报的回答。

```
int length = (num==0) ? 1 : (int)Math.log10(num) + 1;
String zeros;
for(int i=0; i<length; i++) {
  zeros = zeros.concat("0");
}
System.out.println(zeros + num); 
```

# javascript - facebook登录在ios中第一次不起作用

> ID：16171922
> 
> 赞同：2
> 
> 时间：2013-04-23T14:26:42.703
> 
> 标签：javascript, facebook, facebook-javascript-sdk, phonegap-plugins

我正在尝试将 Facebook 登录集成到我的 Sencha 应用程序中。问题是当我点击调用`promptLogin()`Facebook 功能的 facebook 登录按钮时，facebook 登录屏幕没有弹出，但同时当我暂停应用程序并恢复到相同时，它会弹出。我正在使用 Facebook-cordova-plugin 有人可以帮我解决这个问题吗？

# python - 可以从 IronPython 使用 scikit 吗？

> ID：16171923
> 
> 赞同：5
> 
> 时间：2013-04-23T14:26:43.783
> 
> 标签：python, .net, scikit-learn, ironpython, python.net

我看到可以从 IronPython 使用 numpy ：

[https://www.enthought.com/repo/.iron/](https://www.enthought.com/repo/.iron/)

是否可以在 IronPython 中安装和导入 scikit？我试图在用 scikit 用 python 2.7 编写的模块和用 IronPython 的外部 COM 对象之间进行接口...

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T14:48:27.323

IronPython 肯定不受 scikit-learn 的支持，我怀疑它是否能在不付出巨大努力的情况下工作。用于 IronPython的[NumPy 和 SciPy](https://www.enthought.com/repo/.iron/NumPySciPyforDotNet.pdf)文档描述了 SciPy 所需的移植工作，而 scikit-learn 肯定没有这样做，这也严重依赖于 Cython 生成的 C 代码（除非有人做了移植工作但没有宣传它在 scikit-learn 邮件列表中）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-23T15:01:58.307

正如@larsmans 所说，sklearn 需要最近的 numpy 和 scipy 并嵌入了一堆已编译的 C 扩展（C++ 库的包装器，例如 libsvm / liblinear 和 cython 生成的 C 扩展）。因此，我严重怀疑它是否可以直接从 IronPython 解释器 VM 运行。

您最好的选择可能是尝试使用 github.com/pythonnet 之类的东西连接 .NET VM 和运行 scikit-learn 的 CPython 解释器，甚至将两者公开为 zmq、HTTP / JSON 或 msgpack 或 protobuf 或 avro webservice .

# php - PHPUnit 模拟一个抽象类的所有方法

> ID：16171927
> 
> 赞同：6
> 
> 时间：2013-04-23T14:26:48.887
> 
> 标签：php, unit-testing, testing, mocking, phpunit

我有一个直接从 PHPUnit_Framework_TestCase 派生的 PHPUnit 测试用例。在此类的测试中，我需要为某些服务对象获取模拟。该服务对象是由抽象基类定义的类型。这个基类同时包含具体方法和抽象方法。我想得到一个完整的模拟（即所有方法都被模拟出来）。我的问题是如何做到这一点。

->getMock 给了我一个错误，因为抽象方法没有被模拟，只有具体的方法

->getMockForAbstractClass 模拟出抽象方法，但不模拟具体方法

我如何嘲笑他们？

（我使用的是 PHPUnit 3.7.13）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T14:57:27.607

只需调用`->getMock('Class');`将模拟对象上的所有方法并实现所有抽象方法。

我不太确定你哪里出错了，但既然是这样，看起来很直接，我写了一个示例。

如果它不适合你，我需要一个你正在尝试做的重现案例

## 样本

```
<?php

class mockTest extends PHPUnit_Framework_TestCase {

    // Without expectations
    public function testMocking() {
        $x = $this->getMock('MockMe');
        $this->assertNull($x->foo());
        $this->assertNull($x->bar());
    }

    // With expectations
    public function testMocking2() {
        $x = $this->getMock('MockMe');
        $x->expects($this->once())->method('foo')->will($this->returnValue(true));
        $x->expects($this->once())->method('bar')->will($this->returnValue(true));
        $this->assertTrue($x->foo());
        $this->assertTrue($x->bar());
    }

}

abstract class MockMe {

    abstract public function foo();

    public function bar() {
        return 1 + $this->foo();
    }

} 
```

## 生产

```
PHPUnit 3.7.13 by Sebastian Bergmann.

..

Time: 0 seconds, Memory: 6.25Mb

OK (2 tests, 5 assertions) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-17T09:03:06.693

如果一个或多个抽象方法不是公共的，看起来 $this->getMock(...) 将失败抽象类。

如果您不想使用派生类，可以在测试基类中添加类似这样的内容：

```
protected function getMockOfAbstractClass($originalClassName, $methods = array(), array $arguments = array(), $mockClassName = '', $callOriginalConstructor = TRUE, $callOriginalClone = TRUE, $callAutoload = TRUE) {
    if ($methods !== null) {
        $methods = array_unique(array_merge($methods,
        $this->getMethods($originalClassName, $callAutoload)));
    }
    return parent::getMock($originalClassName, $methods, $arguments, $mockClassName, $callOriginalConstructor, $callOriginalClone, $callAutoload);
}

private function getMethods($class, $autoload=true) {
    $methods = array();
    if (class_exists($class, $autoload) || interface_exists($class, $autoload)) {
        $reflector = new ReflectionClass($class);
        foreach ($reflector->getMethods( ReflectionMethod::IS_PUBLIC | ReflectionMethod::IS_ABSTRACT ) as $method) {
            $methods[] = $method->getName();
        }
    }
    return $methods;
} 
```

这改编自：[Mocking concrete method in abstract class using phpunit](https://stackoverflow.com/questions/8040296/mocking-concrete-method-in-abstract-class-using-phpunit)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-12T10:26:28.557

使用`getMockForAbstractClass`，默认情况下不会模拟具体方法。要模拟具体方法，请使用第 7 个参数 ( `$mockedMethods`)。

# javascript - 如何从我的 Javascript 中删除 null

> ID：16171930
> 
> 赞同：0
> 
> 时间：2013-04-23T14:27:04.290
> 
> 标签：javascript, html, select

所以，这是我的脚本：

```
$(function () {
   // define this here because we're changing the ID
   var $twitter = $('twitter');
   // bind to select inside iframe
    $('#iframe').on('load', function () {
      $(this).contents().find('#cds').change(function () {
         var selectVal = $(this).val();
         url = 'https://twitter.com/intent/tweet?button_hashtag=stream&text=Just enjoying ' + selectVal + ' on';
        $twitter.attr("id", url);
    }).change(); // trigger change to get initial value
  });
}); 
```

基本上，它从我的选择框中获取选定的值，并将其输出到 Twitter 链接中。问题是，当没有选择任何内容时，它会输出“null”，我想知道是否有办法检测到这一点，并回显其他内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T14:29:51.787

尝试这个：

```
var selectVal = $(this).val() || 'default value'; 
```

# android - 接收图像并保存在 database-django 视图中

> ID：16171932
> 
> 赞同：1
> 
> 时间：2013-04-23T14:27:09.757
> 
> 标签：android, django, django-views, django-models

我正在开发一个客户端是android而服务器端是django的应用程序。我通常使用发布请求将数据发送到服务器并以这种方式在服务器端接收它们，
例如`name = request.POST['name']`
我现在需要在服务器端接收图像并将其保存到数据库中。图像在客户端（android）转换为base64字符串，那么如何将该字符串转换为服务器端的图像并将其保存在数据库中？！

有什么帮助吗？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T15:52:05.163

看看一个类似的问题，在[这里](https://stackoverflow.com/questions/2323128/convert-string-in-base64-to-image-and-save-on-filesystem-in-python)找到。如果您这样做，那么您可以只保存对图像数据库的引用，或者将 base64 字符串保存到数据库中。

# java - 集中任务调度器

> ID：16171935
> 
> 赞同：0
> 
> 时间：2013-04-23T14:27:18.273
> 
> 标签：java, smartfoxserver

我们在 smartfox 扩展中使用了一个任务调度器，我们有 6 个不同的调度任务。对于每个扩展请求，smartfox 的活动线程计数会增加我们为每个 scheduleexecutor 服务设置的线程池大小的数量。看起来我们需要集中 1 个调度程序并从其他类中引用。我们只是不知道如何在不使用新线程填充活动线程池的情况下保留对它的引用并创建新任务。请让我知道如何集中调度程序并保持参考。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:51:21.567

您可以将 scheduleexecutors 替换为[Quartz 调度程序](http://quartz-scheduler.org/)- 您可以通过`org.quartz.threadPool.threadCount`config 属性设置其线程池中的最大线程数。

引用所有线程中可用的调度程序的最简单方法，例如

```
public class SchedulerWrapper {
    private static Scheduler scheduler;

    public static void addJob(JobDetail jobDetail) {
        scheduler.addJob(jobDetail, true);
    }
} 
```

# git - Git - 嵌套存储库

> ID：16171937
> 
> 赞同：2
> 
> 时间：2013-04-23T14:27:21.887
> 
> 标签：git

我有一个主项目，它的组件来自一个单独的远程仓库，也必须与主项目一起更新/推送。不一定同时（我*不*希望主项目的推送触发组件的推送），但我应该能够在需要时推送对主项目和组件所做的更改。

我怎样才能做到这一点，抽象的结构如下：

```
/root working directory of main project
    /some dir
        |
        |-> some file
        |
        |-> some file
    /component
        |
        |-> some file
        |
        |-> some file
        /subdir of component 
```

组件将与其他组件分开跟踪吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T14:28:53.750

您应该阅读有关 Git 子模块的信息：http: [//git-scm.com/book/en/Git-Tools-Submodules](http://git-scm.com/book/en/Git-Tools-Submodules) 我认为它完全符合您的需求。

# java - 如何动态生成实例名称？

> ID：16171941
> 
> 赞同：0
> 
> 时间：2013-04-23T14:27:27.543
> 
> 标签：java, android, xml-parsing, instance

我需要动态设置类实例的名称。

```
GetDataPoint "This Name has to be dinamically" = new GetDataPoint(); 
```

我需要此类 GetDataPoint 的动态实例数。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T14:33:59.463

一个例子：

```
ArrayList<GetDataPoint> data = new ArrayList<GetDataPoint>();
int amountOfData = 5;

for(int i = 0; i <= amountOfData; i++) {
data.add(new GetDataPoint());
} 
```

循环遍历数据列表以检索 GetDataPoints。

# xml - Pentaho 中的 XML CHild 节点迭代

> ID：16171950
> 
> 赞同：0
> 
> 时间：2013-04-23T14:27:58.187
> 
> 标签：xml, loops, etl, pentaho, kettle

我有一个**XML**文件，其中包含以下格式的数据：

```
<LineHeader>
  <LineItem LineNumber="1">
    <Product SKU="99991L" DespatchQuantity="70">
      <Item Type="EANCode">0821793005795</Item>
      <SKUDescription1>HTC SNAP SYST</SKUDescription1>
      <SKUDescription2 />
      <SerialNumberHeader>
        <SerialNumber>358991022404733</SerialNumber>
        <SerialNumber>358991022404808</SerialNumber>
      </SerialNumberHeader>
    </Product>
  </LineItem>
  <LineItem LineNumber="2">
    <Product SKU="37099M" DespatchQuantity="50">
      <Item Type="EANCode">0843163067660</Item>
      <SKUDescription1>RIM KEPLER SYST</SKUDescription1>
      <SKUDescription2 />
      <SerialNumberHeader>
        <SerialNumber>353933040011632</SerialNumber>
        <SerialNumber>353933042759923</SerialNumber>
      </SerialNumberHeader>
    </Product>
  </LineItem>
</LineHeader> 
```

现在我希望输出是一个具有列名和记录的文本文件，如下所示：

```
LineItem 
LineNumber  Product SKU EANCode         SKUDescription1   SerialNumber
1           99991L      821793005795    HTC SNAP SYST     358991022404808
1           99991L      821793005795    HTC SNAP SYST     358991022434987
1           99991L      821793005795    HTC SNAP SYST     358991022435505
2           37099M      843163067660    RIM KEPLER SYST   353933040011632
2           37099M      843163067660    RIM KEPLER SYST   353933042759923 
```

输出数据应如上表所示。我们如何在**pentaho**中实现循环。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-04-10T16:18:28.357

假设您希望每个序列号有一行输出（问题显示五个输出行，但我*认为*您的意思是四个）：

在`Get XML Data`步骤

`Content`标签

将循环 XPath 设置为`/LineHeader/LineItem/Product/SerialNumberHeader`

`Fields`标签

```
Name            XPath                 Element
LineNumber      ../../../LineNumber   Attribute
Product SKU     ../../SKU             Attribute
EANCode         ../../Item            Node
SKUDescription1 ../../SKUDescription1 Node
SerialNumber    .                     Node 
```

将输出

```
LineNumber Product SKU           EANCode SKUDescription1 SerialNumber
1          99991L  0821793005795 HTC     SNAP SYST       358991022404733
1          99991L  0821793005795 HTC     SNAP SYST       358991022404808
2          37099M  0843163067660 RIM     KEPLER SYST     353933040011632
2          37099M  0843163067660 RIM     KEPLER SYST     353933042759923 
```

！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T23:49:00.767

正如我所看到的，这里的基本问题是 ETL 工具旨在处理表格数据，而不是分层数据。试图做到这一点就像将一个方形钉子强行插入一个圆孔。你也许可以完成一次或两次，但它不会很漂亮，很容易坏，而且肯定不能重复使用。

在示例目录中有一个使用 StAX 输入步骤执行此操作的示例转换。它被称为“XML 输入流 (StAX) 测试 4 - Hierarchies.ktr”。但是您会注意到，PDI 人员使用 UDJC 来构建层次结构。

我已经把你的例子弄乱了一段时间，我根本找不到一种优雅的方式来做转换。我认为脚本是你最好的选择。

编辑 -

你知道，这可能是自定义控件的一个很好的应用程序。一种将 XML 文档映射到您想要的输出的表格数据的方法。我怀疑这是一个常见问题；我想知道马特公司是否有类似的计划。

# javascript - 访问指令的隔离范围与嵌入的内容

> ID：16171952
> 
> 赞同：16
> 
> 时间：2013-04-23T14:27:59.783
> 
> 标签：javascript, html, angularjs, angularjs-directive, angularjs-scope

我不确定这是否真的可行，但我本质上想要一个反向的 AngularJS 中的“&”隔离范围。这是一个[Plunkr](http://plnkr.co/edit/3xL5MrdJSfYH22ivkYJS)来演示。

基本上，我设置了一个自定义指令来提供一些可重用的 HTML。它`ng-transclude`用于允许在其中呈现一些外部内容。但是，我发现了一种情况，我想从代码的嵌入部分访问已在指令的隔离范围上设置的函数。

所以基本上我有一些看起来像：

```
<div ng-controller="MainController">

    <!-- The directive -->
    <div some-custom-directive>

        <!-- Button 1 that invokes a method within the controller scope -->
        <button id="button1" ng-click="invoke1()">Invoke from Controller</button>

        <!-- Button 2 that invokes a method on the isolate scope for the custom directive -->
        <button id="button2" ng-click="invoke2()">Invoke from Isolate Scope</button>
    </div>
</div> 
```

有谁知道这是否真的可能？

**更新**

根据@Mark Rajcok 的回答，在`$$prevSibling`上找到的`$scope`可用于从嵌入内容中访问指令的隔离范围。但是，我已经更新了上述 Plunkr 以从`ng-repeat`指令中尝试此操作，但该指令不起作用。我假设该重复中的项目不继承范围。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-23T15:11:24.443

虽然可能，但我提出的解决方案是一种 hack，因为它使用范围内部变量`$$prevSibling`.

在你被嵌入的内容中，你在被嵌入的范围内。该指令的隔离和嵌入范围是同级的。要从嵌入范围到隔离范围，您可以使用`$$prevSibling`. （要从隔离范围到转入范围，您可以使用`$$nextSibling`。）

所以，这个黑客将起作用：

```
<a href="" ng-click="$$prevSibling.action()">Invoke the Directive Action</a> 
```

要在控制器范围内调用方法，您需要指定 using `&`as @ganaraj 已经演示过：

```
<content-presenter controller-action="action()"> 
```

然后在你的指令中：

```
scope: { controllerAction: '&' },
template: ... +
   '<button ng-click="controllerAction()">Trigger Ctrl action()</button>' ... 
```

[普朗克](http://plnkr.co/edit/S1eOblM1OLpTZLKgkVU4?p=preview)

* * *

使用 ng-repeat（请参阅 Samuel 的评论），每个项目都会创建嵌入范围的子范围。在下图中，我只展示了一个`item`以保持图片更小。反转 $$prevSibling 的 $$nextSibling 棕色箭头。

![在此处输入图像描述](https://i.stack.imgur.com/sHsPW.png)

`action()`因此，从 ng-repeat 子范围获取在隔离范围上定义的方法的技巧是

```
<div ng-repeat="item in items" ng-click="$parent.$$prevSibling.action()"> 
```

* * *

**Angular v1.3+ 的更新**：

从 Angular v1.3 开始，transcluded 作用域现在是指令的isolate 作用域的子对象——它们不再是兄弟。因此，要从嵌入范围到隔离范围，请使用`$parent`.

使用 ng-repeat，每个项目仍然创建嵌入范围的子范围：

![在此处输入图像描述](https://i.stack.imgur.com/oGOjO.png)

但是`action()`要从 ng-repeat 子范围获取在隔离范围上定义的方法，我们现在使用

```
<div ng-repeat="item in items" ng-click="$parent.$parent.action()"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-02T14:37:22.777

我的理解是添加`ng-repeat`到一个元素会创建一个新的范围，以便正确绑定重复的内容。您可能需要`$parent`在该链中添加一个附加项，例如`$parent.$$nextSibling`，以便升级到与指令的隔离范围相邻的级别。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T14:50:18.393

这是一个解决您当前问题的解决方案。我不确定您要做什么。但据我所知，没有办法从外部范围调用隔离范围内的东西。当然，您可以在隔离作用域和外部作用域之间设置双向绑定变量，更改外部作用域中的变量并在隔离作用域上 $watch （这将像事件机制一样工作）......这是一个做你想做的事情的方式..如果你坚持的话。

或者，有一种机制可以从隔离作用域调用外部作用域上的函数。它有点像回调。

看到这个[http://plnkr.co/edit/5MT4vo9qXtV6nQikfEiH?p=preview](http://plnkr.co/edit/5MT4vo9qXtV6nQikfEiH?p=preview)

# iphone - 如何从目标 C 计算我的应用安装日期和设备日期之间的日期计数差异

> ID：16171955
> 
> 赞同：0
> 
> 时间：2013-04-23T14:28:05.877
> 
> 标签：iphone, ios, objective-c, ios5, nsdate

如何计算objectice C甲酸盐中**两天**之间的**日期计数差异。**

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T15:56:02.543

检查安装日期是否已注册，如果已注册则计算日期，否则请注册。

```
if([[NSUserDefaults standardUserDefaults] objectForKey:@"IDate"])
{
    NSDate *iDate = [[NSUserDefaults standardUserDefaults] objectForKey:@"IDate"];
    NSTimeInterval interval = [[NSDate date] timeIntervalSinceDate:iDate];
    int diff=interval/86400;//for converting seconds into days.
    NSLog(@"%d Days",diff);
}
else
{
    [[NSUserDefaults standardUserDefaults] setObject:[NSDate date] forKey:@"IDate"];
    [[NSUserDefaults standardUserDefaults] synchronize];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T14:55:22.843

如果您的意思是“试用时间”，然后您必须注册：我会按照以下方式进行：

```
 NSDate *installDate = [[NSUserDefaults standardUserDefaults] objectForKey:@"InstallationDate"];
    if(installDate)
    {
        // time in Seconds
        long int timePassed = [installDate timeIntervalSinceNow] * -1;
        NSLog(@"%ld", timePassed);

        // now do your calculations and compare
    }
    else // first start
    {
        [[NSUserDefaults standardUserDefaults] setObject:[NSDate date] forKey:@"InstallationDate"];
        [[NSUserDefaults standardUserDefaults] synchronize];

        NSLog(@"%@", [[NSUserDefaults standardUserDefaults] objectForKey:@"InstallationDate"]);
    } 
```

（作为丹尼帖子的补充）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T14:33:21.150

将您的设备安装日期存储在`NSUserDefaults`第一次运行时，然后使用当前日期计算。

```
NSTimeInterval diff = [date2 timeIntervalSinceDate:date1]; // in seconds 
```**

# angularjs - Angular UI Datepicker 不工作

> ID：16171959
> 
> 赞同：10
> 
> 时间：2013-04-23T14:28:17.113
> 
> 标签：angularjs, datepicker, angular-ui

我已经按照这里描述的步骤[让 Angular UI 工作](https://stackoverflow.com/questions/12822862/getting-angular-ui-to-work)和这里[如何将 AngularUI 集成到 AngularJS？](https://stackoverflow.com/questions/12472244/how-to-integrate-angularui-to-angularjs/12474114#12474114)，但无法让日期选择器弹出。

请注意，在接受的答案中的两个帖子中引用的小提琴都不起作用。

有什么建议么？这个小工具是否适用于 angular-ui 的最新版本？

更新：我的资源导入

```
<link href="/assets/jquery-ui-1.10.2.custom.min.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/angular-ui.min.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/application.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/bootstrap.min.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/home.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/project.css?body=1" media="all" rel="stylesheet" type="text/css" />
<script src="/assets/jquery.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery_ujs.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery-ui.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery-ui-1.10.2.custom.min.js?body=1" type="text/javascript"></script>
<script src="/assets/angular.min.js?body=1" type="text/javascript"></script>
<script src="/assets/angular-ui.min.js?body=1" type="text/javascript"></script>
<script src="/assets/angular-resource.min.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap.js?body=1" type="text/javascript"></script>
<script src="/assets/directives.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery.hotkeys.js?body=1" type="text/javascript"></script>
<script src="/assets/module.js?body=1" type="text/javascript"></script>
<script src="/assets/underscore-min.js?body=1" type="text/javascript"></script>
<script src="/assets/application.js?body=1" type="text/javascript"></script> 
```

模块声明：

```
angular.module('project', ['ngResource', 'ui.directives']); 
```

标签：

```
<input type="text" ng-model="date" ui-date/> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-23T14:45:39.053

它们缺少外部引用（JS 和 CSS 上都是 404）。所以这可能是由于缺少参考。这是一个[工作示例](http://plnkr.co/edit/VeutZ0?p=preview)。

请记住，AngularUI 主要包装了 jQueryUI 插件。所以你在AngularUI之前需要jQueryUI，在jQueryUI之前需要jQuery。以及 AngularUI 之前的 Angular 本身。只需确保您具有以下 CSS：

1.  jQueryUI ( [http://jqueryui.com/](http://jqueryui.com/) )
2.  AngularUI ( [http://angular-ui.github.io/](http://angular-ui.github.io/) )
3.  你的应用

这些 JS 文件按以下顺序排列：

1.  **jQuery**，因此您可以安全地加载 jQuery UI 插件 (Datapicker)
2.  **jQueryUI**，所以你 AngualrUI 可以使用它的插件（Datepicker）
3.  **Angular**，因此 AngularUI 可以访问 Angular 框架
4.  **AngualrUI**
5.  您的模块声明，引用`ui.directives`模块。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T17:06:54.877

作为一种解决方法，在我的项目中使用 angular UI 之前，我制定了以下有效的指令：

```
project.directive('datepicker', function() {

  return {
    restrict: 'E',
    transclude: true,
    scope: {
      date: '='
    },
    link: function(scope, element, attrs) {
      element.datepicker({
        dateFormat: 'dd-mm-yy',
        onSelect: function(dateText, datepicker) {
          scope.date = dateText;
          scope.$apply();
        }
      });
    },
    template: '<input type="text" class="span2" ng-model="date"/>',
    replace: true
  }

}); 
```

在html中：

```
<td><datepicker date="myDomainObj.startDate"></datepicker></td>
<td><datepicker date="myDomainObj.endDate"></datepicker></td> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-25T16:47:26.233

按顺序包含以下JS

1.  jQuery.js
2.  jquery-ui.js
3.  角-min.js

我添加了以下内容

```
<script src="http://code.jquery.com/jquery-1.10.2.js"></script>
<script src="http://code.jquery.com/ui/1.10.4/jquery-ui.js"></script> 
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.0.7/angular.min.js"> </script> 
```

在 html 代码中

```
<body ng-app="myApp" ng-controller="myController">
// some other html code 
<input type="text" ng-model="date" mydatepicker />
<br/>
 {{ date }}
 //some other html code
 </body> 
```

在 js 中，确保先为指令编写代码，然后再为控制器添加代码，否则会导致问题。

日期选择器指令：

```
var app = angular.module('myApp',[]);
app.directive('mydatepicker', function () {
return {
    restrict: 'A',
    require: 'ngModel',
     link: function (scope, element, attrs, ngModelCtrl) {
        element.datepicker({
            dateFormat: 'DD, d  MM, yy',
            onSelect: function (date) {
                scope.date = date;
                scope.$apply();
            }
        });
    }
  };
}); 
```

从上述答案中引用的指令代码。

在这个指令之后，编写控制器

```
app.controller('myController',function($scope){
//controller code
}; 
```

# reporting-services - 如何从另一个指针属性的表达式中引用仪表指针的值？

> ID：16171961
> 
> 赞同：1
> 
> 时间：2013-04-23T14:28:18.363
> 
> 标签：reporting-services

在 SSRS 报告中，我想在满足特定条件时设置仪表指针的隐藏属性。如何从 Hidden 属性的表达式中引用 Gauge Pointer 的当前值，以便不必复制 Value 的整个表达式？

这就是我的意思（伪代码）：

```
Hidden: =Code.GetHiddenPropertyBasedOnPointerValue(this.Value) 
```

我应该使用什么来代替“this.Value”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T17:25:44.863

在仪表面板的属性中，转到可见性部分。将表达式放在“根据表达式显示或隐藏”的位置。使用计算结果为 True 的 Hidden 和 False 的 Show 表达式。

# svn - Ankhsvn Subversion 迁移

> ID：16171963
> 
> 赞同：2
> 
> 时间：2013-04-23T14:28:21.927
> 
> 标签：svn, visual-studio-2008, solution, ankhsvn, working-copy

我已经获得了几个需要颠覆到新服务器的大型项目的“工作副本”。现在这就是问题所在。

```
Repository UUID '54266b8e-1acc-cf4b-8b36-8565631da9a7' 
doesn't match expected UUID 'b6ccde84-53ce-7c4c-9e5d-941e3d0c9f2b' 
```

当我尝试将工作副本提交到另一个存储库时，工作副本给了我一个错误，告诉我 GUID 与预期不匹配。我试图查找问题，但没有适合我的解决方案。

后来我尝试删除所有 .svn 文件，但这似乎并没有解决问题。

我对颠覆历史不感兴趣。我想要的只是创建一个新的存储库目录并开始对我在项目上的工作进行版本控制。我该怎么做呢？我不知道如何详细使用 AnkhSvn，也找不到任何方法来使用命令行选项。或者这是 Ankhsvn 的另一个插件？谁能帮我解决这些问题？

注意：我没有原始存储库或其设置的副本，因为看起来其他所有内容都在一年前被删除。

我在哪里/如何使用 Anksvn 命令行？我什至在哪里可以找到它？我找到了命令，但不知道在哪里使用它们。为什么我不能将它们提交到另一个存储库？所有文件都返回一个错误，它们被锁定？与整个颠覆磨难完全混淆。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T14:40:46.410

1.  删除`.svn`工作副本中的目录。

    如果工作副本是 SVN 1.6 或更早的格式，那么它的所有文件夹都包含隐藏`.svn`目录。如果是 SVN 1.7，那么工作副本`.svn`在根目录下只有一个目录。

2.  `svn add`以前的工作副本到存储库。

3.  `svn commit`.

# c# - 在 PHP cURL 请求中转换 C# HttpWebRequest

> ID：16171970
> 
> 赞同：1
> 
> 时间：2013-04-23T14:28:37.950
> 
> 标签：c#, php, curl, httpwebrequest

我是 cURL 的新手，我的第一个请求成功了，但现在我被卡住了。我在 C# 中有正确的请求，但我不知道如何在 cURL PHP 中转换第二个。

这是 HttpWebRequest：

```
var request = (HttpWebRequest)WebRequest.Create(new Uri("https://www.google.fr"));
request.Method = HttpMethod.Get;
request.Headers["X-343-Authorization-WLID"] = "v1=" + accessToken;
request.Accept = "application/json"; 
```

`accessToken`当然是一个`string`变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T14:38:40.497

这是您需要进行的三个基本 curl_setopt 调用。

```
curl_setopt($ch,CURLOPT_URL,"$website");
curl_setopt($ch,CURLOPT_ENCODING, 'application/json');
curl_setopt($ch,CURLOPT_HTTPHEADER, array("X-343-Authorization-WLID:v1=$accesstoken")); 
```

您可能想要添加 follow_location 和 return_transfer，但我不知道您在做什么。[curl_setopt](http://us2.php.net/curl_setopt)文档中列出了这两个选项。

该页面应该有足够的示例让您继续前进。

# java - 如何创建一个解释我的代码流程的图表？

> ID：16171971
> 
> 赞同：0
> 
> 时间：2013-04-23T14:28:41.393
> 
> 标签：java, ide

如果我面临理解一个新的 Java 应用程序的任务，是否有一个工具可以分析代码并为其绘制图表？

如果分析一个完整的应用程序听起来太过分了，那么可以分析少数类中的代码流怎么样？

我想知道是否有可以做到这一点的程序或IDE。因为代码的快速图表将提高我学习应用程序的能力。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T14:31:27.800

看一下这个：

[http://apwebco.com/gofpatterns/creational/Prototype.html](http://apwebco.com/gofpatterns/creational/Prototype.html)

而且，看看这个答案：

[从 Java 项目生成 UML 类图](https://stackoverflow.com/questions/6167266/generate-uml-class-diagram-from-java-project)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T14:39:37.827

我像一年前一样使用[JDeveloper来完成这样的任务。](http://www.oracle.com/technetwork/developer-tools/jdev/overview/index.html)它是一个非常复杂的 IDE，它非常适合（更大的）逆向工程。[您可以在此处](https://blogs.oracle.com/shay/entry/java_class_and_uml_modeling)阅读和查看更多信息- @Shay Shmeltzer 的博客文章

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T14:33:46.290

我认为您能做的最好的事情就是理解代码并在其前面使用 UML 图。你可能会发现很多这样的[信息](http://www.tutorialspoint.com/uml/)

# php - 如何在单击单选按钮但使用值时更改颜色

> ID：16171981
> 
> 赞同：0
> 
> 时间：2013-04-23T14:28:52.980
> 
> 标签：php, javascript, html

我有多组单选按钮，我想在单击时更改颜色。我正在使用`name`更改颜色，但是当所有单选按钮的名称相似时，它被计为一组。我需要把它们分开。

我的代码：

```
function getInputValue() {
  var radioObj = document.forms["form"]["tt"];
  for (var i=0; i<radioObj.length; i++) {
    if (radioObj[i].checked)
      return radioObj[i].value;
  }
  alert("No radio button was selected.")
}

function change_it(id) {
  var a = getInputValue();
  if(a=="Bad") {
    document.getElementById(id).style.backgroundColor = "#FFBFBF";
    return false;
  } else if(a=="Good") {
    document.getElementById(id).style.backgroundColor = "#F0FFF0";
    return false;
  }
}

<table>
<tr  id="<?php echo $row['id'];?>">
<td>
 It changes the color in here.
</td>
</tr>
</table>

<form action="#" method="get" name="form">
Group 1
<input type="radio" name="tt" id="1" onclick="change_it();" value="Bad" />Bad </input>
<input type="radio" name="tt" id="1" onclick="change_it();" value="Good" />Good</input>
Group 2
<input type="radio" name="tt" id="2" onclick="change_it();" value="Bad" />Bad </input>
<input type="radio" name="tt" id="2" onclick="change_it();" value="Good" />Good</input>
</form> 
```

我的问题是，如果我改变`name`颜色，如果我保持不变，颜色就不会再改变，`name`那么所有 4 个都算作一组。

**编辑** 我想明确表示我拥有的代码可以完美运行。我想弄清楚的是如何做到这一点，这样颜色的变化就不会停留在使用`name`属性上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T15:27:19.530

使用 a`class`对单选按钮进行分组，并将`td`您要更改的类赋予相同的类。例如：

```
<table>
    <tbody>
        <tr>
            <td class="group1">Change me!</td>
        </tr>
        <tr>
            <td class="group2">Change me!</td> <!-- This won't be changed in the below code -->
        </tr>
    </tbody>
</table>

<input type="radio" class="group1" /> 
```

jQuery：

```
 $('input[type="radio"]').on('click', function(){
    var className = "td." + $(this).attr("class");
    $(className).css( "color", "red" );
    }); 
```

# [工作小提琴](http://jsfiddle.net/tvavM/9/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T15:29:57.720

这段代码可以解决问题。我没有解决前面提到的关于使文本“tt”动态化的问题——我已经将它们硬编码为 gp1 和 gp2。现在，每个单选按钮都有自己的 ID，我还将每个单选按钮的标签放在标签标签内 - 这可以启用样式。所有样式都是通过定位标签标签来完成的。我还附加了将使用 addEventListener 处理 onclick 事件的函数，因为这样做允许我们访问`this`变量 - 它指向触发点击事件的元素。（它还允许其他未使用的功能 - 例如单个元素上的单个事件的多个处理程序以及有选择地删除所述处理程序的能力）

我还更改了 change_it 函数。它现在执行以下操作：

*   获取单选按钮的名称属性
*   获取具有相同名称的元素列表（相同单选按钮组中的项目）
*   设置`<label>`包含单击的单选按钮及其组中其他项目的标签的类名

**代码**

```
<!DOCTYPE html>
<html>
<head>
<script>
function byId(e){return document.getElementById(e);}
function newEl(tag){return document.createElement(tag);}
function newTxt(txt){return document.createTextNode(txt);}
function toggleClass(element, newStr)
{
    var index=element.className.indexOf(newStr);
    if ( index == -1)
        element.className += ' '+newStr;
    else
    {
        if (index != 0)
            newStr = ' '+newStr;
        element.className = element.className.replace(newStr, '');
    }
}
function addClass(element, newStr)
{
    var index=element.className.indexOf(newStr);
    if ( index == -1)
        element.className += ' '+newStr;
}

function removeClass(element, newStr)
{
    var index=element.className.indexOf(newStr);
    if (index != 0)
        newStr = ' '+newStr;
    element.className = element.className.replace(newStr, '');
}

function forEachNode(nodeList, func)
{
    var i, n = nodeList.length;
    for (i=0; i<n; i++)
    {
        func(nodeList[i], i, nodeList);
    }
}

window.addEventListener('load', mInit, false);

function mInit()
{
    var inputList = document.querySelectorAll("input[type='radio']");
    var i, n = inputList.length;
    for (i=0; i<n; i++)
    {
        inputList[i].addEventListener('click', change_it, false);
    }
}

function change_it()
{
    var grpName = this.getAttribute('name');
    var otherElementsInGroup = document.getElementsByName(grpName);

    forEachNode(otherElementsInGroup, nodeItemFunc);

    function nodeItemFunc(element, index, list)
    {
        if (element.checked)
            addClass(element.parentNode, 'checked');
        else
            removeClass(element.parentNode, 'checked');
    }
}

</script>
<style>
label.checked
{
    background: #fda;
}
</style>
</head>
<body>
    <form action="#" method="get" name="form">
    Group 1
    <label>Bad<input type="radio" name="gp1" id="rb1" value="Bad" /></label>
    <label>Good<input type="radio" name="gp1" id="rb2" value="Good" /></label>
    <br>
    Group 2
    <label>Bad<input type="radio" name="gp2" id="rb3" value="Bad" /></label>
    <label>Good<input type="radio" name="gp2" id="rb4" value="Good" /></label>
    </form>
</body>
</html> 
```

# jpa - 如何使用 JPA 将非实体对象存储到数据库中？（播放框架）

> ID：16171983
> 
> 赞同：2
> 
> 时间：2013-04-23T14:28:57.620
> 
> 标签：jpa, playframework, long-polling

我正在使用长轮询开发“某种”聊天应用程序。

我正在使用 Play Framework 1.2.5，并且正在尝试处理多个对话，将其信息存储在使用 JPA 的数据库中。

为了收听每个事件并将其发布到聊天中（有人加入、离开或发短信），我使用了 ArchivedEventStream<Event> 类型的对象，但由于该对象不是实体，Play Framework 找不到在数据库中适合他的类型。

目前，我制作了一个静态 HashMap，其中每个对话的模型 id 作为键，我的 ArchivedEventStream 对象带有事件。我在其中添加了@Transient 注释，以便不将我的 Map 计入数据库并规避错误。

```
@Transient
public final static HashMap<Long, ArchivedEventStream<PlayEvent>> playEvents =  new HashMap<Long, F.ArchivedEventStream<PlayEvent>>(); 
```

它暂时有效，许多人可以按照自己的流量使用自己的对话，但过了一段时间，服务器会破坏这个静态变量，产生一些 NullPointerExceptions。

有没有办法将此对象存储到我的数据库中，以便每次对话都可以访问它？

或者，我可以阻止我的服务器 Play 破坏我的变量吗？

甚至，还有其他更好的选择来解决这个问题吗？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T06:28:47.717

使用 Play 存储状态的最佳方式是在缓存中。但是，这并不能保证您的事件将始终可用（服务器重新启动，ttl...）

如果您需要这些事件永久可用，您将需要将它们保存到数据库中。您可以获取 ArchivedEventStream 实现模型，将它们存储在缓存中，并在缓存未命中时从数据库中检索它们。

# java - 带有字符“&”的 Solr 编码 URL

> ID：16171985
> 
> 赞同：2
> 
> 时间：2013-04-23T14:29:02.143
> 
> 标签：java, solr

我在使用 Solr 时遇到问题：

当我的 url 中的字符 '&' 包含 ('%26') 时，这不起作用：

```
http://localhost:8983/solr/LOREMIPSUM/select?q=shop_id:42+label_fr_str:LOL%26rows=20&indent=off

<result name="response" numFound="0" start="0"> 
```

但如果不是这样，我有 4223 个结果：

```
http://localhost:8983/solr/LOREMIPSUM/select?q=shop_id:42+label_fr_str:LOL&rows=20&indent=off

<result name="response" numFound="4223" start="0"> 
```

我有点失落。是否与请求或 Solr 的配置有关以解决它？或者这是不可能的？

**编辑 ：**

*我的 schema.xml 中定义的字段*

```
<fieldType name="text" class="solr.TextField"
    positionIncrementGap="100">
    <analyzer type="index">
        <tokenizer class="solr.WhitespaceTokenizerFactory" />
        <filter class="solr.WordDelimiterFilterFactory"
            generateWordParts="1" generateNumberParts="1" catenateWords="1"
            catenateNumbers="1" catenateAll="0" splitOnCaseChange="1" />
        <filter class="solr.LowerCaseFilterFactory" />
    </analyzer>
    <analyzer type="query">
        <tokenizer class="solr.WhitespaceTokenizerFactory" />
        <filter class="solr.WordDelimiterFilterFactory"
            generateWordParts="1" generateNumberParts="1" catenateWords="0"
            catenateNumbers="0" catenateAll="0" splitOnCaseChange="1" />
        <filter class="solr.LowerCaseFilterFactory" />
    </analyzer>
</fieldType> 
```

*现场声明：*

```
<field name="label_fr_str" type="text" indexed="true" stored="true" multiValued="false"/> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T15:52:40.587

因此，我对查询字符串进行了一些尝试，并且能够重现类似的行为。我认为问题的根源在于，如果您在参数之后为下一个参数编码与符号`q`，Solr 会将其解释为查询的一部分，而不是查询字符串参数。

根据您在评论中提供的编码示例，您将查询参数（在本例中为行）与查询本身混合。我建议将这些分开。您是否考虑使用[SolrJ](http://wiki.apache.org/solr/Solrj)客户端。我意识到您可能不想使用 SolrJ 客户端，但我认为您至少应该考虑使用它的[ClientUtils](http://svn.apache.org/viewvc/lucene/dev/branches/lucene_solr_4_2/solr/solrj/src/java/org/apache/solr/client/solrj/util/ClientUtils.java?view=markup)方法来帮助您正确构建/编码您的 url。

# scala - 在Scala中使用从Java类继承的方法

> ID：16171986
> 
> 赞同：1
> 
> 时间：2013-04-23T14:29:02.360
> 
> 标签：scala, scala-java-interop

我正在尝试编译扩展 Java 类的 Scala 类文件。这是类定义，它是最基本的。在加载时，在宿主应用程序中，对象应该使用超类的方法 'post' 将“Hello from Scala”写入宿主的输出窗口。

```
import com.cycling74.max.MaxObject;

public class FirstClass extends MaxObject{
    public FirstClass{
        post("Hello From Java");
    }
} 
```

这在应用程序中编译并运行良好。

这是我对 Scala 的翻译（老实说，我不是 100% 确定我完全理解 Scala 中的构造函数）：

```
import com.cycling74.max._

class FirstClass() extends MaxObject {
    super.post("Hello from Scala")
} 
```

但是，当我尝试使用 scalac 进行编译时，我收到以下错误：

```
dm$ scalac -cp max.jar FirstClass.scala 
FirstClass.scala:3: error: value post is not a member of com.cycling74.max.MaxObject with ScalaObject
    super.post("Hello from Scala")
              ^
one error found 
```

我不确定为什么编译器告诉我“post”不是成员函数，我确定我搞砸了 Scala 语法，但无法确定哪里出了问题。

谢谢！

编辑

这是 Max 窗口的输出，除了按如下规定更改代码外，我刚刚将 Scala 库添加到 Max 的动态加载路径中。这真让人兴奋

```
MXJ System CLASSPATH:
   /Applications/Max 6.1/Cycling '74/java/lib/jitter.jar
   /Applications/Max 6.1/Cycling '74/java/lib/jode-1.1.2-pre-embedded.jar
   /Applications/Max 6.1/Cycling '74/java/lib/max.jar
MXJClassloader CLASSPATH:
   /Applications/Max 6.1/Cycling '74/java/classes/
   /Users/dm/maxmsp/classes
   /Users/dm/maxmsp/jars/jline.jar
   /Users/dm/maxmsp/jars/scala-compiler.jar
   /Users/dm/maxmsp/jars/scala-dbc.jar
   /Users/dm/maxmsp/jars/scala-library.jar
   /Users/dm/maxmsp/jars/scala-partest.jar
   /Users/dm/maxmsp/jars/scala-swing.jar
   /Users/dm/maxmsp/jars/scalacheck.jar
   /Users/dm/maxmsp/jars/scalap.jar
Jitter initialized
Jitter Java support installed
Hello from Scala 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T14:58:31.313

假设`post`方法在`MaxObject`as..中的定义

```
public class MaxObject {        
    public static void post(java.lang.String message){
        System.out.println("printing from MaxObject.post :: " + message);
    }
} 
```

您可以直接`post`在 scala 中调用该方法 -

```
class FirstClass extends MaxObject {
    MaxObject.post("Hello from Scala")
} 
```

事实上，如果您不强制扩展`MaxObject`..，您也可以将其用作 ..

```
class FirstClass{
    MaxObject.post("Hello from Scala")
} 
```

将其消费为：

```
val fc = new FirstClass   //> printing from MaxObject.post :: Hello from Scala 
```

# .net - .NET 将多个 1/3 A4 docx 文件合并为 A4 docx 文件

> ID：16171988
> 
> 赞同：0
> 
> 时间：2013-04-23T14:29:10.320
> 
> 标签：.net, merge, label, docx

我正在构建一个用于管理序列号和产品信息的应用程序。

现在，在产品的某个步骤中，用户将打印标签以粘贴在成品的盒子上。这些标签包括产品上的数据，例如类型、规格、序列号、条形码等。

标签打印在 1/3 A4 贴纸（每张 A4 3 个）纸上。

我从一个填充了产品数据的模板 docx 文件（页面大小：99 毫米高，210 毫米宽）开始。

生成后，我得到了一堆 docx 文件。将它们合并到一个 docx 文件中没有问题，但我最终会得到一堆大小为 1/3 A4 的页面。

我想要结束的是一个 docx 文件，每页有 3 个 1/3 A4。

是什么阻止我从一个 A4 大小的模板开始，上面已经有 3 个标签并填补了这一事实，即一个系列通常适用于不同的客户，因此需要不同的模板。

有谁知道如何实现上述目标？替代解决方案也非常受欢迎，如果它可以使用 docx 以外的其他东西完成，并且使用易于编辑的模板。

谢谢阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T08:54:39.560

最后，我太快了，无法排除 Daniel Hilgarth 的做法。通过杂耍，在每个标签之间添加一些空白段落，我能够正确定位它们以便在 3x 1/3 A4 标签纸上打印。

我使用 Novacode 的 DocX 库来做到这一点。

做了一些事情：

```
 Private Sub MergeBoxDocuments(ByVal Docs As List(Of String))
        Dim FullDoc As Novacode.DocX = Novacode.DocX.Create(LocalDirs.QUE & "Test.docx")
        FullDoc.MarginBottom = 25
        FullDoc.MarginTop = 25
        FullDoc.MarginLeft = 30
        FullDoc.MarginRight = 30

        Dim Counter As Integer = 0
        For Each D As String In Docs
            Dim Doc As Novacode.DocX = Novacode.DocX.Load(D)
            For Each T As Novacode.Table In Doc.Tables
                T.Design = Novacode.TableDesign.TableGrid
                FullDoc.InsertTable(T)
                Counter += 1

                If Not Counter = 3 Then
                    FullDoc.InsertParagraph(" ")
                    FullDoc.InsertParagraph(" ")
                    FullDoc.InsertParagraph(" ")
                Else : Counter = 0 : End If
            Next
        Next
        FullDoc.Save()
    End Sub 
```

谢谢丹尼尔。

# c# - 使用 C# 将文本文件转换为 CSV 文件

> ID：16171991
> 
> 赞同：-6
> 
> 时间：2013-04-23T14:29:14.750
> 
> 标签：c#, arrays, csv

我有一个制表符分隔的 txt 文件，如下所示：

```
Well       Name       Detector      Task    Quantity
1          try1       Cam1          UNKN    0
2          try2       Cam1          UNKN    0
3          try3       Cam3          STND    1000
4          try4       Cam5          UNKN    0
5          try5       Cam6          UNKN    0
6          try6       Cam6          UNKN    0
....
92         try92      Cam4          STND    100 
```

我需要从此 TXT 文件输出一个 CSV 文件。在输出的 CSV 文件中，我需要将分隔符从 Tab 更改为分号，我只需要前两列。

我将文本文件放在一个数组中：

```
string [] source.... 
```

也跳过一些我不需要的标题行，

但现在我被困在如何继续下去。

我知道 StreamReader 和 StreamWriter，但我不知道如何使用它们来完成我的任务。

任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-23T14:36:43.993

希望这能给您带来想法，因此请尝试理解每个部分。

```
string[] lines = System.IO.File.ReadAllLines(YOUR INPUT FILE);

StringBuilder builder = new StringBuilder();

foreach (string line in lines)
{
    var temp = line.Split('\t');
    builder.AppendLine(string.Join(";", temp[0], temp[1]));
    //builder.AppendLine(string.Format("{0}; {1}", temp[0], temp[1]));
}

System.IO.File.WriteAllText(YOUR OUTPUT FILE, builder.ToString()); 
```

*   `File.ReadAllLines`: 将文件的所有行读入一个`string[]`
*   `File.WriteAllText`: 将字符串写入文件。
*   [`StringBuilder`](http://msdn.microsoft.com/en-us/library/system.text.stringbuilder.aspx): 这个类表示一个类似字符串的对象。
*   `AppendLine`：向`StringBuilder`实例添加字符串行。
*   `string.Format`：将指定字符串中的每个格式项替换为对应对象值的等效文本。[更多的](http://msdn.microsoft.com/en-us/library/system.string.format.aspx)

# c# - 在c#mvc4中将XML解析为对象/类+映射

> ID：16171998
> 
> 赞同：0
> 
> 时间：2013-04-23T14:29:26.233
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, xml-parsing, linq-to-xml

我正在做的项目是一个外联网。我需要在这个项目中调用一个与数据库通信的 web 服务。这可用作 APPserver。APPserver 和数据库之间的过程是在 Progress 中编写的。我从 web 服务收到的输出是一个包含 XML 的对象。

是否可以将 XML 文件转换为对象？例如，我有一个节点

```
<user>
    <uid></uid>
    <lastname></lastname>
    <firstname></firstname>
</user> 
```

这个用户节点可以转换为用户实体吗？

当它从关系开始时，复杂性要高得多。XML 会是什么样子，我现在还不能说。

有没有其他可能的框架/语言我可以使用，所以他们简化了这个过程？

关系的结构会发生什么以及如何处理它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T14:37:49.543

此示例来自旧版本的 .NET，但仍然适用。使用 XML 反序列化加载基于 XML 格式的对象。你可以有嵌套类。只需根据需要装饰所有类/属性以在对象被序列化时创建正确的格式，并且您将能够将 XML 反序列化为返回 Web 服务的对象。

[http://www.codeproject.com/Articles/4491/Load-and-save-objects-to-XML-using-serialization](http://www.codeproject.com/Articles/4491/Load-and-save-objects-to-XML-using-serialization)

# html - div 不随内容增长

> ID：16171999
> 
> 赞同：0
> 
> 时间：2013-04-23T14:29:33.923
> 
> 标签：html, css

我遇到了大麻烦...我无法使 div 随内容一起增长...我有这个 HTML 可以在这里修复它...但我不能这样做...有人可以帮我解决这个问题... .??

我在这里上传了链接：http: [//efdutra.com/help](http://efdutra.com/help)

我需要增长的 div，嗯.. 你会看到 Lorem Ipsum 越过页脚......：p

html有一部分：

```
 <div id="boxes">
    <div id="boxFinal">
        <div id="linksBoxFinal">
            <ul>
                <a href="#"><li>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed massa felis, accumsan eget mattis sed</li></a>
                <a href="#"><li>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed massa felis, accumsan eget mattis sed</li></a>
                <a href="#"><li>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed massa felis, accumsan eget mattis sed</li></a>
                <a href="#"><li>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed massa felis, accumsan eget mattis sed</li></a>
                <a href="#"><li>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed massa felis, accumsan eget mattis sed</li></a>
                <a href="#"><li>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed massa felis, accumsan eget mattis sed</li></a>
                <a href="#"><li>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed massa felis, accumsan eget mattis sed</li></a>
                <a href="#"><li>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed massa felis, accumsan eget mattis sed</li></a>
                <a href="#"><li>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed massa felis, accumsan eget mattis sed</li></a>
            </ul>
        </div>
        <img id="barraFinal" src="img/barraBoxFinal.png" />
    </div>
</div> 
```

这里是css：

```
 #boxes{
margin:0;
padding:0;
position:relative;
float:left;
height: 100%;
width: 100%;
overflow: none;
 }
 #boxFinal{
margin:15px 0 0 8px;
padding:0;
float:left;
position:relative;
width:100%;
max-height:100%;
overflow:inherit;
   } 
```

有人可以帮帮我吗...？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T14:45:31.757

玩弄了你的风格后，我发现很多事情都错了。首先，您不需要浮动所有剩余的东西。接下来，您需要将 lis 添加到 ul 中的锚标记周围。第三个需要去掉绝对定位`#lineBoxFinal`。如果您使用以下样式（替换现有样式），则页脚应该可以正常工作

```
//line 241
#linksBoxFinal ul {
    margin: 5px 0 35px 15px;
    z-index: 3;
}

//line 262
#barraFinal {
    position: relative;
    margin: 0 110px;
    z-index: 2;
    clear: both;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T14:34:10.100

那是因为`position:absolute`在`div[.linksBoxFinal]>ul`

那将`#linksBoxFinal ul`在您 style.css 的第 241 行

. .

试试这个：

`<ul style="position:relative;">`

（另外，删除不需要的边距底部）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T15:20:38.293

至于你关于将 li 放入锚点的问题，我相信答案是否定的。锚点不能容纳块级元素。