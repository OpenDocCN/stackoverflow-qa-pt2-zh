# StackOverflow 问答 15205000-15205999

# iteration - 负长返回？

> ID：15205001
> 
> 赞同：0
> 
> 时间：2013-03-04T15:26:19.610
> 
> 标签：iteration, long-integer, factorial

在这个迭代阶乘方程中，我通过的任何大于 39 的数字都显示为负数。为什么是这样

```
 public static void main(String[] args)
    {
        long var = formula(40);
        if(var != 0){
        System.out.print(var);
        }
        else{return;}
    }
    public static long formula(final int n) {
        if (n < 0) {
            System.err.println("No negative numbers");
            return 0;
        }
        long ans = 1;
        for (int i = 1; i <= n; i++) {
            ans *= i;
        }

        return ans;
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T15:27:46.367

这是因为一种叫做溢出的东西。某些类型可以保存的值是有限制的。如果超出整数类型值的限制，则会遇到整数溢出。这是一个关于[整数溢出](http://en.wikipedia.org/wiki/Integer_overflow)的链接，其中包含更多细节。

要点是阶乘是一个快速增长的指数函数，因此很快就会得到一个不适合长整数的值。当您看到负数时，那是因为您已超出此限制。该限制取决于平台，但对于 unsigned long int，通常约为 4,294,967,295。

使用上述限制，您将只能计算高达 12 的阶乘！，13 及以上会溢出。

# c# - 如何从 XAML 中定义的 XMLDataProvider-data 计算平均值

> ID：15205006
> 
> 赞同：2
> 
> 时间：2013-03-04T15:26:31.590
> 
> 标签：c#, xaml, data-binding, xpath, xmldatasource

我真的是 WPF 的新手，我需要你的帮助。我的应用程序允许用户检查大陆并查看包含的国家/地区。Country 有两个属性：名称和区域。问题是我需要显示所有大陆国家的平均面积。我的数据模型如下所示：

```
 <XmlDataProvider x:Key="CountryStoreDataSource" XPath="CountryStore">
            <x:XData>
                <CountryStore xmlns="">
                    <Continents Continent="Europe">
                        <Countries Country="Italy" Area="300"/>
                        <Countries Country="Iceland" Area="350"/>
                    </Continents>
                    <Continents Continent="Asia">
                        <Countries Country="China" Area="700"/>
                        <Countries Country="India" Area="650"/>
                    </Continents>
                    <Continents Continent="Africa">
                        <Countries Country="South Africa" Area="550"/>
                        <Countries Country="Egypt" Area="500"/>
                    </Continents>
                </CountryStore>
            </x:XData>
        </XmlDataProvider> 
```

我也有模板将列表框与我的数据模型连接起来：

```
 <Grid.Resources>
            <DataTemplate x:Key="countryItemTemplate">
                <Label Content="{Binding XPath=@Country}"/>
            </DataTemplate>
            <DataTemplate x:Key="areaItemTemplate">
                <Label Content="{Binding XPath=@Area}"/>
            </DataTemplate>
        </Grid.Resources> 
```

最后我有我的列表框的实现：

```
 <ListBox
                Grid.Row="1"
                ItemsSource="{Binding XPath=Countries}"
                ItemTemplate="{StaticResource countryItemTemplate}"
                Margin="0,0,0,0" />
           <ListBox
                Grid.Row="1"
                ItemsSource="{Binding XPath=Countries}"
                ItemTemplate="{StaticResource areaItemTemplate}"
                Margin="0,0,0,0"
                Grid.Column="1" 
                Name="listBoxAreas"
                /> 
```

实际上我不知道如何从 c# 代码中的列表框中获取我的值，有没有办法获取值并在 xml 中对它们进行处理？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T16:26:21.713

有趣的问题！

首先，您使用的 XPath 似乎并不完全正确。如果我理解正确，您希望显示一个带有国家/地区的列表框、一个带有区域的列表框和一个带有`Avg(areas)`.

首先，让我们简化 XPath 绑定。您应该更新您的 XmlDataSource 上的 XPath，以便您只获得一个独立于大陆的国家列表：

```
 <XmlDataProvider x:Key="CountryStoreDataSource" XPath="/CountryStore/Continents/Countries">
        <x:XData>
            <CountryStore xmlns="">
                <Continents Continent="Europe">
                    <Countries Country="Italy" Area="300"/>
                    <Countries Country="Iceland" Area="350"/>
                </Continents>
                <Continents Continent="Asia">
                    <Countries Country="China" Area="700"/>
                    <Countries Country="India" Area="650"/>
                </Continents>
                <Continents Continent="Africa">
                    <Countries Country="South Africa" Area="550"/>
                    <Countries Country="Egypt" Area="500"/>
                </Continents>
            </CountryStore>
        </x:XData>
    </XmlDataProvider> 
```

然后，设置 Grid 的 DataContext：

```
<Grid DataContext="{StaticResource CountryStoreDataSource}"  ../> 
```

之后，ListBoxes 的两个绑定都可以更新为以下内容：`ItemsSource="{Binding}"`.

* * *

现在，回到问题：显示区域的平均值。为此，您需要绑定到同一个列表并应用转换器来进行计算。
首先，让我们创建转换器，它只是解析列表并使用 LINQ 计算平均值：

```
public class AreaConverter : MarkupExtension, IValueConverter
{
    public override object ProvideValue(IServiceProvider serviceProvider)
    {
        return this;
    }

    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        if (value == null) return 0;

        //you can do this in one line, but I split it for clarity.
        var xml = value as IEnumerable<XmlNode>;
        var areas = xml.Select(x => x.Attributes["Area"].Value);
        var avg = areas.Average(a => int.Parse(a));

        return avg;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotSupportException();
    }
} 
```

之后，您可以使用此 Binding 创建 TextBlock 来保存此值：

```
 <TextBlock Text="{Binding Converter={local:AreaConverter}}" /> 
```

现在 TextBlock 应该显示平均值！

**提示**：要测试给定的 XPath，可以使用 Notepad++ 和 XML Tools 插件，该插件提供了*Evaluate XPath Expression*工具

# iphone - iPhone - 即使用户的位置服务打开，LocationManager 也不会收敛？

> ID：15205015
> 
> 赞同：0
> 
> 时间：2013-03-04T15:26:46.797
> 
> 标签：iphone, ios, ipad, core-location, cllocationmanager

有谁知道即使位置服务已打开，什么可能导致 locationManager 无法收敛到某个值？

**编辑 1 - locationManager 对某些用户工作正常，但对于其他用户，他们的位置永远不会更新。并且用户的设备（其位置永远不会更新）具有 GPS，因为这些设备是 iPhone 5、iPad3、iPhone 4 等。我想知道它们是否在该国太远并且总是在室内。所以 GPS、WiFi、手机信号塔无法到达它们？但不知何故他们上网......**

**编辑 2 - 更多说明：用户可以访问互联网，因为他们能够在我的网络服务器上创建一个新帐户。当 locationManager 收敛到一个值时，使用下面的#2，然后我的 web 服务器上的 gps 位置会更新，但这永远不会发生。用户在设备上使用应用程序的时间足以回答 10 个问题并上传他们的照片。如果用户可以访问互联网，那么 locationManager 是否没有足够的时间收敛？**

**编辑 3 - 发生了另一件奇怪的事情：在网站上创建用户帐户时，用户的 gps_lat 设置为 0。当用户使用 iPhone 上的 locationManager 在网站上更新他的 gps_lat 时，gps_lat 的更新值为 (null ）。什么可能导致 locationManager 产生 output = (null)？**

1.  我使用以下代码检查位置服务是否已打开：

`BOOL locationServicesDenied = ([CLLocationManager authorizationStatus] == kCLAuthorizationStatusDenied);`

2.  然后，当 locationManager 与此代码融合时，我会更新用户在网站上的位置：

```
-(void)locationManager:(CLLocationManager *)manager 
            didUpdateToLocation:(CLLocation *)newLocation
                   fromLocation:(CLLocation *)oldLocation 
{

    if((newLocation.horizontalAccuracy >  0.0f) && (newLocation.horizontalAccuracy < 7000.0f){
        [self update_website:self];
} 
```

但`update_website`永远不会被调用。这让我觉得`newLocation.horizontalAccuracy`永远不会低于7000。

有谁知道为什么`locationManager`即使位置服务打开也无法收敛？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T15:28:45.650

您是否设置了位置管理器的`delegate`属性并调用`startUpdatingLocation`了它？

```
[myLocationManager setDelegate:self];
[myLocationManager startUpdatingLocation]; 
```

编辑：我认为这只是发生在测试设备上。如果在用户设备上，精度完全有可能超过7000m。如果唯一用于修复的是蜂窝无线电（没有 GPS，没有 WiFi），则准确度约为 1-10k，具体取决于蜂窝塔的密度。在线用户（以太网或 WiFi）不保证他们的 WiFi 在已知（和映射）点的数据库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T01:15:28.150

如果没有错误并且 GPS 没有足够的信号来计算位置，则不会调用代理。GPS 将继续尝试获取位置，但如果设备在地下（例如），它将一无所获（除非有缓存的位置）。

你等得够久吗？即使设备有 GPS 信号但没有数据网络（WiFi/Cell），那么位置管理器也无法通过数据网络获取卫星星历。获得 GPS 位置需要更长的时间，从 2 到 10 分钟不等。辅助 GPS 速度更快，但需要数据连接。

# java - 可以在持有实例之前对未使用的私有变量进行 GC 处理吗？

> ID：15205016
> 
> 赞同：2
> 
> 时间：2013-03-04T15:26:48.473
> 
> 标签：java, garbage-collection

考虑以下类：

```
public class MemoryTest
{
  private long[] longArr; // Eclipse marks this unused

  public MemoryTest(int arrSize) {
    longArr = new long[arrSize*10];
  }

  public static void main(String[] args) {
    int numObjs = 10000;
    MemoryTest[] mts = new MemoryTest[numObjs];

    for(int i = 0; i < numObjs; i++) {
      // build a large number of objects which hold expensive, unused references
      mts[i] = new MemoryTest(i);
      //System.gc(); interestingly, uncommenting this line causes OOM earlier
      System.out.println("Built "+i+": "+Runtime.getRuntime().freeMemory()/1024+"KB");
    }

    System.out.println(Arrays.hashCode(mts)); // so elements cannot be GCed earlier
  }
} 
```

这失败了：

```
... truncated output ...
Built 5236: 62070KB
Built 5237: 61661KB
Built 5238: 61252KB
Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
    at MemoryTest.<init>(MemoryTest.java:6)
    at MemoryTest.main(MemoryTest.java:15) 
```

显然这是一个人为的例子，但我想知道 GC/JIT 编译器是否可以整理这个`longArr`没有在任何地方使用的对象。从 Java 7 开始，现在似乎还没有整理好，但是如果编译器变得更聪明或者我们以某种方式更改示例，这可能会发生，还是 JVM 合同禁止它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T15:42:20.900

即使您的代码`longArr`在编译时没有（似乎）访问任何地方，它仍然可以随时通过反射访问，这是 GC/JIT 编译器无法猜测的。

唯一可以删除的未使用变量是本地变量（它们的引用可以在分配后立即清除）。事实上，Eclipse 编译器甚至允许在编译时删除它们（请参阅首选项 > Java > 编译器 > 保留未使用的局部变量）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T15:35:48.127

**longArr**不在任何地方使用；但是您正在创建您的类**MemoryTest**的对象。这意味着属性**longArr**正在为每个对象初始化。

因此，如果对您的类的对象的引用不为空；那么不要认为有任何方法可以 GC 这个属性。**longArr**将始终通过对象绑定；所以只有当对象被 GC 时它才能被清理。

# asp.net - 使用 webmatrix 渲染页面的问题

> ID：15205019
> 
> 赞同：1
> 
> 时间：2013-03-04T15:26:51.507
> 
> 标签：asp.net, webmatrix

我是 asp.net 和 webmatrix 的新手，我正在尝试使用 asp.net 上提供的教程构建解决方案。一切正常，直到我制作了 css 文件（从教程中复制了代码）并在使用复制 css 的代码中传递了布局。我写道：@{ 布局 = "~_Layout.cshtml"; 它没有呈现我的页面并弹出错误：“在以下路径找不到布局页面“~/_Layout.cshtml”：“~/_Layout.cshtml”。”

有人知道我在做什么错吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T04:16:08.340

如果不可用，只需创建一个 Layouts 文件夹。然后将您的 _Layout.cshtml 文件放入 Layout 文件夹

```
Layout = "~/Layouts/_Layout.cshtml"; 
```

要为项目中的所有页面重用 _Layout.cshtml，请打开 _PageStart.cshtml 文件或创建一个文件并将代码粘贴到那里。

如果您不想在特定文件上使用布局，只需使用

```
@{
Layout = null;
} 
```

在页面顶部。

# sql-server - MS 访问 MS SQL ODBC 驱动程序管理器错误

> ID：15205022
> 
> 赞同：0
> 
> 时间：2013-03-04T15:27:03.323
> 
> 标签：sql-server, ms-access, vba

我目前正在使用连接到**MSSQL数据库的****MS ACCESS**前端和数据库。这是一个封闭的 MDE 数据库，早在我开始使用它之前就已部署，并且相关的源文件似乎已损坏。

 **当我在 USER1 的系统上打开它时，它会提示输入 SQL 密码并完美连接并准备就绪。在 USER2 的系统上打开时会提示

> “[Microsoft] [ODBC Driver Manager] 未找到且未指定默认驱动程序。”

其次是“没有 SEC 数据”。连接到同一数据库的不同 .MDB 可以正常工作，但它也从不提示 USER2 的用户/密码。

我已经完成了 ODBC 设置，发现没有用户的两个系统之间没有区别。

首先，访问是否有可能缓存了需要清除的登录信息，因为它没有提示 USER2 输入 SQL Server 登录信息？（但是，它使用的登录名适用于具有类似连接的另一个访问数据库。）

其次，是否专门寻找允许一个系统/用户具有连接性，但另一个不能仅使用此文件？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T18:36:32.313

我最终通过找到权限表解决了这个问题，然后重新安装到 OBDC 驱动程序。**

# batch-file - 重命名一个文件夹中的文件，然后将文件复制到该文件夹

> ID：15205023
> 
> 赞同：0
> 
> 时间：2013-03-04T15:27:03.570
> 
> 标签：batch-file, installation, copy

我是新手，请多多包涵。。。

我正在尝试创建一个批处理文件，它执行以下操作

1.  将 setup.exe 重命名`src\Research.Setup\Release`为 `install.exe`.

    ```
    CD src\Research.Setup\Release
    ren "setup.exe" "install.exe" 
    ```

2.  然后将另一个文件`setup.exe`从“src\Research.Setup\Release”复制`src\Research.SetupWrapper\Release`到“src\Research.Setup\Release”。

    ```
    Copy "src\Research.SetupWrapper\Release\setup.exe"
    "src\Research.Setup\Release\setup.exe" 
    ```

这里的副本不起作用，请有人帮忙。

我无法让批处理文件工作..任何帮助都会很棒

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T16:10:49.620

您当前的工作目录在步骤 1 中被更改。

轻松更改以使步骤 1 不使用`CD`。相反，它可能是`move src\Research.Setup\Release\setup.exe src\Research.Setup\Release\install.exe`

否则，在第 1 步之后，切换回您要从中运行第 2 步的目录。

**例子**

```
ren "src\Research.Setup\Release\setup.exe" "install.exe"
copy "src\Research.SetupWrapper\Release\setup.exe" "src\Research.Setup\Release\setup.exe" 
```

或者

```
pushd "src\Research.Setup\Release"
ren "setup.exe" "install.exe"
popd
copy "src\Research.SetupWrapper\Release\setup.exe" "src\Research.Setup\Release\setup.exe" 
```

或者

```
move "src\Research.Setup\Release\setup.exe" "src\Research.Setup\Release\install.exe"
copy "src\Research.SetupWrapper\Release\setup.exe" "src\Research.Setup\Release\setup.exe" 
```

# android - 如何检查Android应用程序是否回到前台？

> ID：15205036
> 
> 赞同：0
> 
> 时间：2013-03-04T15:27:28.287
> 
> 标签：android, android-lifecycle

在这些情况下，我必须知道我的应用程序何时回到前台：

*   启动应用
*   开始活动 A
*   家压
*   应用程序被用户带到前台。（显示了活动 A）

*   启动应用

*   开始活动 A
*   开始活动 B
*   家压
*   应用程序被用户带到前台。（显示了活动 B）

我无法用`onResume`and中的标志检查这一点`onPause`。因为这会在每次`Activity B`加载时触发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:44:10.543

我不确定这是否可行，但请尝试覆盖`onUserLeaveHint`您的`Activity`： [https://developer.android.com/reference/android/app/Activity.html#onUserLeaveHint()](https://developer.android.com/reference/android/app/Activity.html#onUserLeaveHint())

如果调用了这个，请将您的布尔字段设置`Activity`为 true。当`onResume`被调用时，检查这个布尔值。如果为真，那么您`Activity`将回到前台（不要忘记再次将此布尔值设置为假）。

顺便说一句：我喜欢你的 KlaasVaak 手柄 :)。你是不是想让人们昏昏欲睡:)

# ajax - 如何在Angular.js $http.post中指定dataType：'json'？

> ID：15205037
> 
> 赞同：14
> 
> 时间：2013-03-04T15:27:30.367
> 
> 标签：ajax, json, angularjs

我`dataType: 'json'`想像传统的 jQuery一样指定`$.ajax`。Angular.js 有可能`$http.post`吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-04T16:20:36.763

您可以使用 HTTP Config 对象来设置标头：

```
$http({
    method: 'POST',
    url: 'somewhere.xyz',
    headers: {
        'Content-type': 'application/json'
    }
}) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-04T15:32:40.663

来自[http://docs.angularjs.org/api/ng.$http](http://docs.angularjs.org/api/ng.%24http)

> 转换请求和响应 请求和响应都可以使用转换函数进行转换。默认情况下，Angular 应用这些转换：
> 
> 请求转换：
> 
> *   如果请求配置对象的 data 属性包含对象，则将其序列化为 JSON 格式。响应转换：
>     
>     
> *   如果检测到 XSRF 前缀，则将其剥离（请参阅下面的安全注意事项部分）
>     
>     
> *   **如果检测到 json 响应，则使用 JSON 解析器对其进行反序列化**

因此无需设置数据类型，它会自动完成

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-10-20T08:08:48.893

我遇到了同样的问题， `responseType:'json'`解决了

您可以使用 responseType:'json' 而不是 dataType:'json'

```
var promise = $http({
            method: 'POST',
            url: 'somewhere.xyz',
            responseType:'json'

        }); 
```

如需进一步参考 [https://docs.angularjs.org/api/ng/service/$http#methods_jsonp](https://docs.angularjs.org/api/ng/service/$http#methods_jsonp)

# compass-sass - 带有 Compass css 文件的 Rails 应用程序

> ID：15205039
> 
> 赞同：0
> 
> 时间：2013-03-04T15:27:33.840
> 
> 标签：compass-sass

我有一个非常基本的 Rails 应用程序，在其中添加了 compass 和 zurb 基础。我注意到一个问题，现在当我将更改保存到我使用 scss 的任何样式表时，我还有一个具有相同名称但 .css 而不是 .scss 添加到样式表目录的附加 css 文件。这会导致问题，因为我的布局模板然后尝试使用 application.css 文件而不是 application.scss 文件。

有没有人发生过这种情况，我怎样才能让它停止将 .css 文件添加到我的样式表目录？

在我的foundation_and_overrides.scss 文件中，内容是标准的zurb 基础内容。

但是，foundation_and_overrides.css 文件中的内容是：

[https://gist.github.com/iambca/5084463](https://gist.github.com/iambca/5084463)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T22:38:27.663

在这里发现问题：[Auto compile SCSS files in Sublime Text 2](https://stackoverflow.com/questions/11901067/auto-compile-scss-files-in-sublime-text-2)

我仍然没有解决方案，但这就是问题所在。Sublime Text 3 即将推出，所以也许这将在新版本中得到解决。

# java - 只能包含一次值的列表

> ID：15205041
> 
> 赞同：0
> 
> 时间：2013-03-04T15:27:39.577
> 
> 标签：java, list

这肯定是一个菜鸟问题，但我无法在谷歌或这里找到一个好的答案，所以我不得不问：

当我只想添加一个值时，我应该在 Java 中使用什么样的列表？

问题是我在大学（网上商店）做一个网络技术项目，我也有这个云连接。我可以向在我商店购买商品的人索取客户 ID。我想要做的是提取这些 ID 并将它们添加到列表中。但是在提取它们时，我得到了他们购买的每件商品的返回 ID，所以我想要一个可以检查的列表：“这个值已经在这个列表中，什么都不做”，或者“这个 ID 不在列表中，让我们添加身份证”

有没有一个可以做到这一点的列表，或者有一种方法可以用一个列表来做到这一点而不会变得太复杂？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T15:28:33.290

你想要一个`Set`，这是防止重复的数据结构。这是一个`Collection`所以你可以定义一个这样的函数：

```
public Collection<MyObject> foo()
{
     return new HashSet<MyObject>();
} 
```

稍后将内部返回更改为：

```
public Collection<MyObject> foo()
{
     return new ArrayList<MyObject>();
} 
```

而且您的 API 不会中断。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-19T09:14:32.490

一个 Set 只包含每个值一次。

但是，[HashSet](https://docs.oracle.com/javase/8/docs/api/java/util/HashSet.html)的问题在于元素添加的顺序会丢失。因此，如果您想保留元素的顺序，我建议使用[LinkedHashSet](https://docs.oracle.com/javase/8/docs/api/java/util/LinkedHashSet.html)。
使用 LinkedHashSet，遍历元素将按照插入的顺序返回它们。

```
public static void main(String[] args) {
    Set<String> hashSet = new HashSet<>();
    hashSet.add("first");
    hashSet.add("second");
    hashSet.add("third");
    for (String s : hashSet) {
        System.out.println(s); // no particular order
    }

    Set<String> linkedHashSet = new LinkedHashSet<>();
    linkedHashSet.add("first");
    linkedHashSet.add("second");
    linkedHashSet.add("third");
    for (String s : linkedHashSet) {
        System.out.println(s); // "first", "second", "third"
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T15:45:10.857

您将要寻找的是 a `Set`，因为 a`Set`是`Collection`不包含重复项的 a 。

您可以根据需要使用几种类型：

*   哈希集
*   链接哈希集
*   CopyOnWriteArraySet
*   枚举集
*   树集
*   并发跳过列表集

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T15:32:49.730

```
public boolean insertRecord(Programmer targetProgrammer, List programmerList) {
boolean flag = false;
 for (Programmer p : programmerList){
   if (targetProgrammer.getId() == p.getId()) {
       return true;
}
}
return flag;
}

// Then when you invoke:

Programmer target = new Programmer(1,"Dev","Java");
if (!insertRecord(target, myList)) {
 myList.add(target);
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-04T17:27:48.793

最好使用[HashSet](http://way2java.com/collections/hashset-tutorial/)，因为它可以隐式处理您的唯一 ID 问题。更好的是[SortedSet](http://way2java.com/collections/interface-sortedset/)，您可以在其中自动按排序顺序打印独特的元素。

# android - aapt：添加 google-play-services_lib 后返回代码 139

> ID：15205049
> 
> 赞同：2
> 
> 时间：2013-03-04T15:27:48.317
> 
> 标签：android, eclipse, osx-mountain-lion

当我在 Proyect Preferences --> Android->library 上使用 mac osx 添加 google-play-services form eclipse 时出现该错误。有时当我可以编译它时给我错误：Android 打包问题：resources.ap_ 不存在如果有人知道错误，请帮助我。谢谢

# c++ - LNK2019 用于静态库中的内联函数

> ID：15205050
> 
> 赞同：3
> 
> 时间：2013-03-04T15:27:48.483
> 
> 标签：c++, visual-c++, lnk2019

我正在尝试使用静态库中的内联函数，但我得到了

`error LNK2019: unresolved external symbol _ippsExp_64f@12 referenced in function "double __cdecl IppExp(double const &)" (?IppExp@@YANABN@Z)`

这是我的代码：

IppWrapper.h（项目 A）

```
#include <ippcore.h>
#include <ipps.h>
#include <ippvm.h>

inline double IppExp(const double& a)
{
   Ipp64f y;
   IppStatus s = ippsExp_64f(&a, &y, 1);
   return y;
} 
```

main.cpp（添加了 A.lib）

```
#include "IppWrapper.h"

int main() 
{
   double d = IppExp(2.3);
} 
```

`dumpbin /symbols`也没有收到我的功能。我错过了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T15:33:12.670

您的内联函数与您得到的错误无关。该错误与引用该`ippsExp_64f`函数有关。您需要将您的代码与包含此函数的代码链接起来。如果不是您的代码而是外部库，请将`.lib`文件添加到链接器源中。

# c# - 使用 html agilitypack 抓取文本

> ID：15205056
> 
> 赞同：0
> 
> 时间：2013-03-04T15:28:15.003
> 
> 标签：c#, html-agility-pack

我正在使用一个字典应用程序，它显示从英语到孟加拉语的含义。我没有很大的孟加拉语含义，但我有一个很大的英语单词。通过使用这个英语单词，我想使用谷歌翻译器翻译成孟加拉语，从而制作我的词典数据库。所以我从谷歌翻译中删除了含义。我使用了以下代码：

```
string meaning = "", bangla = "";

        HtmlWeb web = new HtmlWeb();
        HtmlAgilityPack.HtmlDocument doc = web.Load("http://translate.google.com/#en/bn/like");
        HtmlNodeCollection node = doc.DocumentNode.SelectNodes("//div[@class='gt-baf-cell gt-baf-word']");

        if (node != null)
        {
            foreach (HtmlNode n in node)
            {
                meaning = n.InnerText;
                meaning = meaning.Trim();
                MessageBox.Show(meaning);
            }
        }
        else
            MessageBox.Show("Sorry,the meaning is not found"); 
```

该元素是萤火虫工具上的**div.gt-baf-cell.gt-baf-word**。但这在这里不起作用。它显示“对不起，未找到含义”。这里有什么问题？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T15:58:06.137

我认为使用 HtmlAgilityPack 无法做到这一点

我试过这个：

```
web.UserAgent = "Mozilla/5.0 (Windows NT 6.2; WOW64; rv:19.0) Gecko/20100101 Firefox/19.0";
doc = web.Load("http://translate.google.com/#en/bn/like");
webBrowser1.DocumentText = doc.DocumentNode.OuterHtml; 
```

它给出了这个结果：http: [//jsbin.com/irijiz/1/edit](http://jsbin.com/irijiz/1/edit)

正如您所看到的，它与您在浏览器上看到的不同，这就是您的代码无法正常工作的原因。

有关更多信息和替代方案，请查看[此](https://stackoverflow.com/questions/6151668/alternative-to-google-translate-api)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T05:41:37.017

您的错误代码是 HtmlNodeCollection node = doc.DocumentNode.SelectNodes("//div[@class='gt-baf-cell gt-baf-word']");

因为 doc.DocumentNode.InnerText 不存在 div class = gt-baf-cell gt-baf-word

检查 doc.DocumentNode.InnerText。

为什么你试图找到不存在的“gt-baf-cell gt-baf-word”？

# angularjs - “list.html”和“detail.html”文件在 AngularJS 主页“连接后端”示例中的什么位置？

> ID：15205057
> 
> 赞同：1
> 
> 时间：2013-03-04T15:28:22.317
> 
> 标签：angularjs

我正在研究 AngularJS 主页示例，尤其是项目/连接后端： [http ://angularjs.org/#project-html](http://angularjs.org/#project-html)

通过打开 jsFiddle 的“ ***Edit me*** ”页面，我注意到“ `list.html`”页面被内联在主页中，如下所示：

```
 <script type="text/ng-template" id="list.html">
  etc... 
```

这是最好的方法还是有其他选择？

提前感谢您的评论。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T15:35:37.683

您在主页中看到的是`<script>`此处记录的指令的用法：[http ://docs.angularjs.org/api/ng.directive:script](http://docs.angularjs.org/api/ng.directive:script)

通过使用此指令，您可以确保应用程序的模板（部分）是预先加载的，而不是按需加载的。这会减少 HTTP 往返次数，并且 - 一般而言 - 以更少的“等待”时间获得更好的用户体验。您可以使用其他技术来预加载部分，所有这些都在此响应中描述：[https ://stackoverflow.com/a/12346901/1418796](https://stackoverflow.com/a/12346901/1418796)

但是 AngularJS 完全能够动态下载部分，因此您可以删除`<script>`标签，将部分放在您的 WWW 服务器上，并在需要时让 AngularJS 下载它们。

所以一切都取决于上下文：在开发期间，您有时会希望按需下载您的部分文件以加快周转速度。对于生产部署，您可能希望按照提到的 SO 响应中所述预加载部分。

# java - 将多个项目复制到剪贴板

> ID：15205058
> 
> 赞同：1
> 
> 时间：2013-03-04T15:28:22.770
> 
> 标签：java, copy, clipboard

出于对我的一个网站的管理目的，我一个人使用 IE - 我使用允许我访问我的剪贴板历史记录的软件 (xNeat Clipboard Manager)。我有从 MySql 填充的 PHP 页面。我希望能够单击一条记录并将该记录中的各种信息发送到我的剪贴板，以便我可以通过历史记录单独访问每个信息。

为了做到这一点，我想使用 Java 一次将多个项目发送到剪贴板。只要我在每个剪贴板复制后使用警报，我就可以让它工作 - 但如果我放弃警报，那么只有最后一个事件会进入剪贴板。显然，如果可以避免的话，我不想在警告框中单击 ok 十次，所以我正在寻找一种方法来在没有警告框的情况下完成这项工作。

下面是使用警报框的编辑版本 - 编辑的意思是它只有三个而不是十个项目。

```
function copy_clip(id,author,copyright) 
{    window.clipboardData.setData('text',copyright);
     alert(copyright);
     window.clipboardData.setData('text',author);
     alert(author);
     window.clipboardData.setData('text',id);
} 
```

最后一个不需要警报 - 只有我想在最后一个之前复制的那些需要警报。

那么我如何在没有警报的情况下完成此操作，因此只需单击一下即可填充剪贴板及其历史记录？

谢谢

# html - HTML Doctype 是第一件事？

> ID：15205063
> 
> 赞同：3
> 
> 时间：2013-03-04T15:28:38.530
> 
> 标签：html, doctype

在 doctype 声明之前有空行返回是否有效？

> `<!DOCTYPE>`声明必须是 HTML 文档中的第一件事，在标记`<html>`之前。

通过[w3schools](http://www.w3schools.com/tags/tag_doctype.asp)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T15:30:06.600

不必要; BOM、空格和注释可能会排在第一位。

[http://www.w3.org/TR/html-markup/documents.html#syntax-document-html](http://www.w3.org/TR/html-markup/documents.html#syntax-document-html)

所以是的，它必须在任何实际的 HTML 标记之前出现，但请注意，您不能真正将 doctype 放在 BOM 之前。

# java - 使用 Spring MVC 和 ajax 返回字符串时编码错误

> ID：15205066
> 
> 赞同：7
> 
> 时间：2013-03-04T15:28:44.377
> 
> 标签：java, ajax, spring-mvc, encoding

我有一个使用 Ajax 请求希伯来语字符串的网页，但该字符串返回为 '??????'

奇怪的是，当使用 JSTL 而不是 Ajax 将相同的字符串插入页面时，它会正确显示......

在我的网页中，我声明

```
<%@ page contentType="text/html" pageEncoding="UTF-8"%> 
```

那是我的控制器：

```
@RequestMapping("get_label")   
public @ResponseBody String getLabel()
{
   String str = "בדיקה";

   return str;
} 
```

我的ajax请求：

```
$.ajax({
    url:    "get_label",
    success:    function(result)
    {
        alert(result);
        $("#parameter_select label").text(result);
    }
}); 
```

任何想法我在这里做错了什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-04T15:40:17.033

这是因为 AJAX 调用默认使用浏览器的默认编码 (fe ANSI)。要覆盖它，您需要执行以下操作：

jQuery[风格](http://api.jquery.com/jQuery.ajax/)- **mimeType**：

```
$.ajax({
    url:    "get_label",
    mimeType:"text/html; charset=UTF-8",
    success:    function(result)
    {
        alert(result);
        $("#parameter_select label").text(result);
    }
}); 
```

香草 JS[风格](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest#overrideMimeType%28%29)：

```
xhr.overrideMimeType("text/html; charset=UTF-8") 
```

但另一方面，您需要确保该服务器也返回适当的响应。为此，您需要检查以下内容：

1.  添加对 web 容器（即 Tomcat）的 UTF-8 支持，并在**server.xml**中为您的**连接器**设置添加**URIEncoding="UTF-8"**；检查[此](http://struts.apache.org/release/2.0.x/docs/how-to-support-utf-8-uriencoding-with-tomcat.html)以获取更多信息。
*****   如果之前的更改没有帮助（尽管它必须这样做），还请确保该 servlet 响应的字符集也是**UTF-8**。****

 ****为此，您可以使用任一方法的显式调用：

```
@RequestMapping("get_label")
public @ResponseBody String getLabel(HttpServletResponse response)
{
    String str = "בדיקה";

    //set encoding explicitly
    response.setCharacterEncoding("UTF-8");

    return str;
} 
```

或者，这似乎更适合`@ResponseBody`Spring 3.1+：

```
@RequestMapping(value = "get_label", produces = "text/html; charset=UTF-8")
public @ResponseBody String getLabel(HttpServletResponse response)
{
    String str = "בדיקה";

    return str;
} 
```

作为结论，我想澄清一下，为了正确处理使用 UTF-8 编码的 AJAX 调用，您必须确保：

*   web-container 正确支持这一点
*   响应的字符编码是 UTF-8
*   AJAX请求字符编码也是UTF-8****

# android - 如何在夏洛克标签视图中删除填充

> ID：15205068
> 
> 赞同：1
> 
> 时间：2013-03-04T15:28:46.297
> 
> 标签：android, tabs, actionbarsherlock, customization

是否可以减少/删除选项卡中的左右填充？我怎样才能做到这一点？我已经尝试了很多，但无法弄清楚如何做到这一点。我使用带有标签导航的 sherlock 操作栏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T08:53:37.063

我终于找到了

这可以通过设置 TabView 上的 padding 和 minWidth 以及 Widget.Sherlock.Light.ActionBar.Solid.Inverse 的 backgroundStacked 来完成。

```
 <style name="GPA_Sherlock_theme" parent="@style/Theme.Sherlock.Light.DarkActionBar">        
    <item name="android:actionBarStyle">@style/ActionBar.Solid.Example</item> 
    <item name="android:actionBarTabStyle">@style/ActionBarTabStyle.Example</item>
    <item name="actionBarStyle">@style/ActionBar.Solid.Example</item> 
    <item name="actionBarTabStyle">@style/ActionBarTabStyle.Example</item>
</style>

 <style name="ActionBarTabStyle.Example" parent="@style/Widget.Sherlock.ActionBar.TabView">
     <item name="android:paddingLeft">0dp</item>        
     <item name="android:paddingRight">0dp</item>     
     <item name="android:minWidth">0dp</item> 
</style>

<style name="ActionBar.Solid.Example" parent="@style/Widget.Sherlock.Light.ActionBar.Solid.Inverse"> 
     <item name="android:backgroundStacked">@drawable/ab_stacked_solid_example</item> 
     <item name="backgroundStacked">@drawable/ab_stacked_solid_example</item> 
</style> 
```

# javascript - 传单地图在 Zoom 上使应用程序（通过 PhoneGap/Android）崩溃

> ID：15205069
> 
> 赞同：0
> 
> 时间：2013-03-04T15:28:52.757
> 
> 标签：javascript, android, cordova, webkit, leaflet

所以我在这个 html5 应用程序中使用 Leaflet.js 映射库（现在使用 OpenStreetMaps）（一个非常简单的例子，所以我怀疑是否需要发布代码。），并使用 PhoneGap（v4.2.0...我认为） . 我正在为 Android 部署/测试。它工作得很好，直到您缩放/捏缩放，在这种情况下应用程序崩溃（并非总是在不同的缩放级别上）。

我试过找出到底发生了什么（使用 abd），但无济于事，在追逐野鹅之后，我的结果尚无定论：

```
F/libc    ( 1902): Fatal signal 11 (SIGSEGV) at 0x00000000 (code=1), thread 1915 (WebViewCoreThre)
I/DEBUG   (  787): *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
I/DEBUG   (  787): Build fingerprint: 'unknown'
I/DEBUG   (  787): pid: 1902, tid: 1915, name: UNKNOWN  >>> package.mypackage <<<
I/DEBUG   (  787): signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 00000000 
```

不是很有帮助。接下来将尝试使用最新版本的Phonegap ......希望渺茫。有人有想法么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T15:50:59.187

看到这个问题：[https ://github.com/Leaflet/Leaflet/issues/909](https://github.com/Leaflet/Leaflet/issues/909)

这似乎是 Android 4.1 浏览器的问题，可以通过设置解决：

`window.L_DISABLE_3D = true;`

在包含leaflet.js 之前不使用硬件加速。它在我当前的 Sencha 2.1.1 + PhoneGap Build 应用程序中为我解决了这个问题。缩放看起来有点糟糕，但到目前为止我还没有让它崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:57:09.220

最新的 phonegap 版本是 2.5.0（参见[https://github.com/phonegap/phonegap/tags](https://github.com/phonegap/phonegap/tags)）。

您可以尝试使用未压缩脚本处理应用程序中的任何错误的下一个代码：

```
window.onerror = function (message, url, line) {
    alert(message + '\n' + url + ': ' + line + '\n' + navigator.userAgent);
    // console.log(message, url, line, navigator.userAgent);
} 
```

当您知道错误及其引发的位置时，您可以尝试使用远程控制台调试您的代码：http: [//jsconsole.com/](http://jsconsole.com/)以获取您的`console.log`消息（添加时间戳以查看真实序列）。

# iphone - 在支持 ARC 的 ios 中绘制图形的框架

> ID：15205071
> 
> 赞同：0
> 
> 时间：2013-03-04T15:29:05.183
> 
> 标签：iphone, ios, objective-c, cocos2d-iphone

我正在尝试每周绘制一个网站访问次数的图表。我需要在 iphone 应用程序的图表上显示此信息。由于我的 iphone 项目中使用了 ARC，因此我很难实施CorePlot 因为它不使用 ARC。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T15:47:41.680

您可以通过在 XCode 中选择项目文件、选择目标、转到“构建阶段”->“编译源”来`ARC off`将此标志设置为源文件来启用 CorePlot`-fno-objc-arc`

*   导航到目标 -> 构建阶段 -> 编译源
*   选择您想要的文件
*   添加编译器标志 -fno-objc-arc

如果您不喜欢上述解决方案，则可以使用[EcGraph](https://code.google.com/p/ecgraph/)

# php - 尝试在php中发送邮件时出错

> ID：15205074
> 
> 赞同：0
> 
> 时间：2013-03-04T15:29:12.133
> 
> 标签：php, email

我收到错误消息，因为无法在“本地主机”端口 25 连接到邮件服务器，...

我的 php.ini 文件的内容是

```
SMTP = localhost
smtp_port = 25 
```

我使用了以下代码

```
mail("xyz@gmail.com","test","msg","from abc@gmail.com"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T15:42:20.370

您不能从本地主机发送出站邮件。要测试邮件功能，请安装水星邮件。它应该带有 xampp。为 localhost 域创建电子邮件，例如steward@localhost。你可以使用别名。将邮件从一个收件箱发送到另一个收件箱进行测试。您需要获得许可版本的水银邮件才能发送出站邮件。

另一种选择是在远程服务器上运行您的测试。确保发件人的电子邮件被发送服务器识别。就像您无法使用您正在显示的那些设置发送 gmail 消息一样。

如果从 gmail 发送是您的目标，stackoverflow 已经为如何使用 gmail 发送邮件提供了很多答案，即使使用 codeigniter 也是如此。需要一些？

这是您的要求：使用 gmail 发送邮件：

```
 require_once "Mail.php";

    $from = "<from.gmail.com>";
    $to = "<to.yahoo.com>";
    $subject = "Hi!";
    $body = "Hi,\n\nHow are you?";

    $host = "ssl://smtp.gmail.com";
    $port = "465";
    $username = "myaccount@gmail.com";  //<> give errors
    $password = "password";

    $headers = array ('From' => $from,
      'To' => $to,
      'Subject' => $subject);
    $smtp = Mail::factory('smtp',
      array ('host' => $host,
        'port' => $port,
        'auth' => true,
        'username' => $username,
        'password' => $password));

    $mail = $smtp->send($to, $headers, $body);

    if (PEAR::isError($mail)) {
      echo("<p>" . $mail->getMessage() . "</p>");
     } else {
      echo("<p>Message successfully sent!</p>");
     }

?>  <!-- end of php tag--> 
```

在此处获取信息：[https ://stackoverflow.com/a/2748837/827224](https://stackoverflow.com/a/2748837/827224)

如果您使用 codeigniter 或任何 PHP 电子邮件类（如 PHPMailer）在 phpclasses.org 中搜索电子邮件类，您甚至可以做更多事情。一个例子是： [http ://www.phpclasses.org/blog/package/9/post/1-Sending-email-using-SMTP-servers-of-Gmail-Hotmail-or-Yahoo-with-PHP.html](http://www.phpclasses.org/blog/package/9/post/1-Sending-email-using-SMTP-servers-of-Gmail-Hotmail-or-Yahoo-with-PHP.html)

### 最后，这是一个您可以使用的类：

[http://www.phpclasses.org/package/7834-PHP-Send-e-mail-messages-Gmail-users-via-SMTP.html](http://www.phpclasses.org/package/7834-PHP-Send-e-mail-messages-Gmail-users-via-SMTP.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T15:39:56.550

很明显，在 localhost 的 25 端口上没有运行邮件服务器（或者防火墙阻止了它）。获取并安装一个邮件服务器（windows/linux/mac 有许多免费的——只要确保你的 ISP 允许它），你的脚本就会运行得很好。

我用它来测试，这非常好：[http](http://smtp4dev.codeplex.com/) ://smtp4dev.codeplex.com/ 它是一个假的电子邮件服务器，它拦截邮件并将它们转储给你在本地主机上检查和测试。

# c# - 复制/克隆动态对象？

> ID：15205077
> 
> 赞同：-1
> 
> 时间：2013-03-04T15:29:27.757
> 
> 标签：c#, .net, dynamic

我通过调用 dapper.Query(...) 获得了一个动态对象。

我想在运行时添加一个成员，但我不能。我知道 ExpandoObject 但它不需要构造函数来复制所有成员。

有没有办法可以复制动态对象的所有成员，然后添加我想要的一两个字段？

-edit- 通过变通方法解决。我在 sql ( ) 中添加了一个虚拟列，`select ..., '' [MyFieldName]`然后将 MyFieldName 分配给我的字符串值没有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:29:03.220

solved via workaround. I added a dummy column in sql (`select ..., '' [MyFieldName]`) then i had no problems assigning MyFieldName to my string value.

# javascript - 通过javascript添加元素后CSS渐变不填充容器

> ID：15205079
> 
> 赞同：0
> 
> 时间：2013-03-04T15:29:30.730
> 
> 标签：javascript, html, css

我目前正在编写一个占位符页面，该页面将通过 HTML 面板在游戏中使用，并随游戏代码动态更改。

我目前正在使用页面的搜索功能，并且在后台使用渐变时遇到问题。我正在使用 javascript 来动态填写搜索结果（稍后将通过游戏代码注入以显示正确的内容）。

当 javascript 在使用搜索框后添加填充文本（同样是占位符）时，渐变不会动态更改其端点以填充框的新宽度。它在新的空间开始了一个全新的渐变。当我打开 chrome 检查元素控制台时，它会更新渐变以填充框（该游戏仅支持 webkit，因此为什么它仅在考虑 webkit 元素的情况下构建）。

我是否能够模拟 chrome 检查元素控制台对 javascript 中的渐变的作用？

HTML

```
<section id="database-search">  
        <form action="javascript:showResults()">
            <input type="text" class="search-bar" placeholder="Search for Item..." checked="checked"></input>
        </form>
        <section id="search-results">
            <span id="search_results"></span>
        </section>
    </section> 
```

CSS

```
.database-search {
            background: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #1e1e1e), color-stop(30%, #373737), color-stop(60%, #373737), color-stop(100%, #1e1e1e));
} 
```

Javascript

```
function showResults() {
            document.getElementById('search_results').innerHTML = 'No Results Found.';
        } 
```

谢谢！编辑：发布了错误的 CSS，已更新！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T16:09:09.530

我试过你的代码。它似乎工作正常。

HTML

```
<section id="database-search">  

            <input type="text" class="search-bar" placeholder="Search for Item..." checked="checked"></input>
           <button value="click">Click</button>

        <section id="search-results">
            <span id="search_results"></span>
        </section>
    </section> 
```

JavaScript

```
$('button').click(function(e) {
    document.getElementById('search_results').innerHTML = 'No Results Found.';
}); 
```

//我使用jquery来连接事件

css

```
#database-search {
                       background: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #1e1e1e), color-stop(30%, #373737), color-stop(60%, #373737), color-stop(100%, #1e1e1e));

} 
```

小提琴：http: [//jsfiddle.net/rc5VT/1/](http://jsfiddle.net/rc5VT/1/)

如果您对您的问题有更多说明，那就太好了。

# java - 列表视图中的可点击项目

> ID：15205084
> 
> 赞同：0
> 
> 时间：2013-03-04T15:29:45.827
> 
> 标签：java, android, xml

我正在尝试使我的列表视图项目可点击；但不能让它正常工作。当我单击一个项目时，它会切换屏幕但不会切换到所需的屏幕。这是代码

```
private ListView lv;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_signup);
    lv = (ListView) findViewById(R.id.listView1);
    // Instanciating an array list (you don't need to do this, you already have yours)
    ArrayList<String> menu_Items = new ArrayList<String>();
    menu_Items.add("Fill Treatment Form");
    menu_Items.add("View Medical History");
    menu_Items.add("View Medication");
    menu_Items.add("View Diet");
    menu_Items.add("View First Aid");
    menu_Items.add("Look Up Map");
    menu_Items.add("Account Settings");
    // This is the array adapter, it takes the context of the activity as a first // parameter, the type of list view as a second parameter and your array as a third parameter
    ArrayAdapter<String> arrayAdapter =      
    new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, menu_Items);
    lv.setAdapter(arrayAdapter);

    lv.setOnItemClickListener(new android.widget.AdapterView.OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> arg0, View view, int position, long id) {

            Intent i = new Intent(getApplicationContext(), FillTreatmentActivity.class);
            startActivity(i);

        }

    });

    lv.setOnItemClickListener(new android.widget.AdapterView.OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> arg1, View view, int position, long id) {

            Intent i = new Intent(getApplicationContext(), MedicalHistoryActivity.class);
            startActivity(i);
        }
    });

    lv.setOnItemClickListener(new android.widget.AdapterView.OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> arg2, View view, int position, long id) {

            Intent i = new Intent(getApplicationContext(), MedicationActivity.class);
            startActivity(i);
        }
    });

    lv.setOnItemClickListener(new android.widget.AdapterView.OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> arg3, View view, int position, long id) {

            Intent i = new Intent(getApplicationContext(),DietActivity.class);
            startActivity(i);
        }
    });

    lv.setOnItemClickListener(new android.widget.AdapterView.OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> arg4, View view, int position, long id) {

            Intent i = new Intent(getApplicationContext(),FirstAidActivity.class);
            startActivity(i);
        }
    });

    lv.setOnItemClickListener(new android.widget.AdapterView.OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> arg5, View view, int position, long id) {

            Intent i = new Intent(getApplicationContext(),MapActivity.class);
            startActivity(i);
        }
    });

   lv.setOnItemClickListener(new android.widget.AdapterView.OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> arg6, View view, int position, long id) {

            Intent i = new Intent(getApplicationContext(),SettingsActivity.class);
            startActivity(i);
        }
    }); 
} 
```

当我单击任何列表视图项目帐户设置活动打开。我是新手，所以请不要评判我的编码:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T15:32:52.357

一个列表视图只能有一个`OnItemClickListener`，所以除了最后一个之外的所有东西都被扔掉了。这就是为什么`SettingsActivity`无论你点击哪个项目都是 openend 的原因。

要解决它，请使用一个侦听器并让这个侦听器处理不同的选项。

```
lv.setOnItemClickListener(new android.widget.AdapterView.OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> arg1, View view, int position, long id) {
        switch(position) {
           case 0:
               // start activity 1
               break;
           case 1:
               // start activity 2
               break;
           case 2:
               // start activity 3
               break;
           // more case statements

    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T15:34:32.450

为什么不添加`android:onClick="myClickMethod"`布局，`listview`然后创建一个具有相同名称的方法？在那里，您可以看到确切的视图已被按下。listView 也只有一个`onClickListener`;-)

干杯

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T15:37:48.450

尝试将 switch 语句添加到您的点击侦听器

```
private ListView lv;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_signup);
    lv = (ListView) findViewById(R.id.listView1);
    // Instanciating an array list (you don't need to do this, you already have yours)
    ArrayList<String> menu_Items = new ArrayList<String>();
    menu_Items.add("Fill Treatment Form");
    menu_Items.add("View Medical History");
    menu_Items.add("View Medication");
    menu_Items.add("View Diet");
    menu_Items.add("View First Aid");
    menu_Items.add("Look Up Map");
    menu_Items.add("Account Settings");
    // This is the array adapter, it takes the context of the activity as a first // parameter, the type of list view as a second parameter and your array as a third parameter
    ArrayAdapter<String> arrayAdapter =      
    new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, menu_Items);
    lv.setAdapter(arrayAdapter);

    lv.setOnItemClickListener(new android.widget.AdapterView.OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> arg0, View view, int position, long id) {
        switch(position){
          case 0:
        Intent i = new Intent(getApplicationContext(), FillTreatmentActivity.class);
                startActivity(i);
        break;
          case 1:
        Intent i = new Intent(getApplicationContext(), MedicalHistoryActivity.class);
            startActivity(i);
        break;
          case 2:
        Intent i = new Intent(getApplicationContext(), MedicationActivity.class);
            startActivity(i);
        break;
          case 3:
        Intent i = new Intent(getApplicationContext(),DietActivity.class);
                startActivity(i);
        break;
          case 4:
        Intent i = new Intent(getApplicationContext(),FirstAidActivity.class);
                startActivity(i);
        break;
          case 5:
        Intent i = new Intent(getApplicationContext(),MapActivity.class);
                startActivity(i);
        break;
          case 6:
        Intent i = new Intent(getApplicationContext(),SettingsActivity.class);
                startActivity(i);
        break;

        }

        }

    });
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T15:53:28.613

这是这样做的方法；我做错了。谢谢你们的帮助。和平 /

```
private ListView lv;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_signup);
    lv = (ListView) findViewById(R.id.listView1);
    // Instanciating an array list (you don't need to do this, you already have yours)
    ArrayList<String> menu_Items = new ArrayList<String>();
    menu_Items.add("Fill Treatment Form");
    menu_Items.add("View Medical History");
    menu_Items.add("View Medication");
    menu_Items.add("View Diet");
    menu_Items.add("View First Aid");
    menu_Items.add("Look Up Map");
    menu_Items.add("Account Settings");
    // This is the array adapter, it takes the context of the activity as a first // parameter, the type of list view as a second parameter and your array as a third parameter
    ArrayAdapter<String> arrayAdapter =      
    new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, menu_Items);
    lv.setAdapter(arrayAdapter);

    lv.setOnItemClickListener(new android.widget.AdapterView.OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> arg0, View view, int position, long id) {
        switch(position){
          case 0:
        Intent i = new Intent(getApplicationContext(), FillTreatmentActivity.class);
                startActivity(i);
        break;
          case 1:
        Intent j = new Intent(getApplicationContext(), MedicalHistoryActivity.class);
            startActivity(j);
        break;
          case 2:
        Intent k = new Intent(getApplicationContext(), MedicationActivity.class);
            startActivity(k);
        break;
          case 3:
        Intent l = new Intent(getApplicationContext(),DietActivity.class);
                startActivity(l);
        break;
          case 4:
        Intent m = new Intent(getApplicationContext(),FirstAidActivity.class);
                startActivity(m);
        break;
          case 5:
        Intent n = new Intent(getApplicationContext(),MapActivity.class);
                startActivity(n);
        break;
          case 6:
        Intent o = new Intent(getApplicationContext(),SettingsActivity.class);
                startActivity(o);
        break;

        }

        }

    }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T07:52:12.447

您需要在将处理所有列表的侦听器上创建。像这样的东西：

```
lv.setOnItemClickListener(new android.widget.AdapterView.OnItemClickListener() {
@Override
public void onItemClick(AdapterView arg6, View view, int position, long id) {
swith(position){
        case 1:
        Intent i = new Intent(getApplicationContext(), FillTreatmentActivity.class);
            startActivity(i);
            break;
        case 2:
        ...
        }
        }
    }); 
```

或者您可以扩展类 ArrayAdaptyer 并为每个元素实现单个侦听器

# ios - 如何在 Xcode 4.6 中运行 iOS 模拟器 4.3？

> ID：15205087
> 
> 赞同：2
> 
> 时间：2013-03-04T15:30:06.097
> 
> 标签：ios, xcode, ios4, simulator

我正在尝试在 iOS 4.x 上测试我的 iOS 应用程序。我正在使用 MAC OS X Mountain Lion(10.8.2) 和 Xcode 4.6。我尝试从 Xcode 中的“下载”选项卡安装较旧的 iOS 4 版本，但该模拟器选项不可用：[http ://cl.ly/image/412l3V3C1E3W](http://cl.ly/image/412l3V3C1E3W)

然后，我使用来自`"xcode_4.0.2_and_ios_sdk_4.3.dmg" file and now they are available inside the folder: "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs".`

我的部署目标设置为 4.0，我可以从方案中选择 iOS 模拟器。

我什至检查了是否使用命令行“xcodebuild -showsdks”正确安装了 iOS 4.x SDK，并且系统可以识别它：

```
$ xcodebuild -showsdks
OS X SDKs:
    Mac OS X 10.7                   -sdk macosx10.7
    OS X 10.8                       -sdk macosx10.8

iOS SDKs:
    iOS 4.3                         -sdk iphoneos4.3
    iOS 6.1                         -sdk iphoneos6.1

iOS Simulator SDKs:
    Simulator - iOS 4.0             -sdk iphonesimulator4.0
    Simulator - iOS 4.3             -sdk iphonesimulator4.3
    Simulator - iOS 5.0             -sdk iphonesimulator5.0
    Simulator - iOS 5.1             -sdk iphonesimulator5.1
    Simulator - iOS 6.1             -sdk iphonesimulator6.1 
```

我面临的问题是，当我运行项目时，我从模拟器中得到错误：“iOS 模拟器找不到 SDK。SDK 可能需要重新安装。”

如果我尝试从模拟器更改版本，则没有 4.3 选项： [http ://cl.ly/image/1y04201e2o08](http://cl.ly/image/1y04201e2o08)

有谁知道如何强制模拟器从 iOS 4.3 开始？

# shell - 如何根据ubuntu中的内容删除多个文件

> ID：15205090
> 
> 赞同：1
> 
> 时间：2013-03-04T15:30:08.803
> 
> 标签：shell, unix, ubuntu

我想删除所有只包含一行的文件。列出每个文件中的行数是`wc -l *txt`. 我只知道如何使用`rm`删除具有特定名称的文件而不是内容行。

任何人都可以帮忙吗？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T15:40:26.047

你可以组合`wc`成`awk`一个oneliner

```
 wc -l *.txt|awk '$1==1{print "rm "$2}' 
```

这将为`rm xxx.txt`您打印。如果要执行它，只需将输出通过管道传输到`sh`

例子：

```
kent$  wc -l *.txt                           
 1 a.txt
 1 b.txt
 2 c.txt
 2 d.txt
 1 e.txt
 7 total

kent$  wc -l *.txt|awk '$1==1{print "rm "$2}'
rm a.txt
rm b.txt
rm e.txt

kent$  wc -l *.txt|awk '$1==1{print "rm "$2}'|sh

kent$  l
total 8.0K
-rw-r--r-- 1 kent kent 4 Mar  4 16:41 c.txt
-rw-r--r-- 1 kent kent 4 Mar  4 16:41 d.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T15:37:04.527

那这个呢？

```
for i in `ls -1 $dir`
do
   if [ `wc -l $i` -eq 1 ]; then
        rm $i
   fi
done 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T15:40:42.300

这个问题的任何答案都与在 ubuntu 上没有任何关系。您可以在 Linux/*nix/bsd 上使用 bash 执行此操作，包括 cygwin（在 Windows 上）或 Mac 终端上。

```
for i in `ls`; do n1=$(wc $i | awk '{print $1}'); if [ $n1 -eq 1 ]; then rm $i; fi; done 
```

# javascript - 无法弄清楚Javascript倒计时

> ID：15205093
> 
> 赞同：0
> 
> 时间：2013-03-04T15:30:12.867
> 
> 标签：javascript

我需要帮助制作倒数计时器！

用户在文本字段中输入一个值，当一个按钮被点击时计时器开始计时。

计时器文本每秒递减一，直到达到零。

我有第一步的代码，但似乎无法让第二步工作。我知道它需要包含一个 setTimeout 和循环。

继承人到目前为止的代码：

HTML-

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

</head>
<body>

<div id="form">

<h2> COUNTDOWN</h2>

    Seconds: <input type="text" name="seconds" id="seconds" /> <input type="button" value="Start!" id="start" /> <input type="button" value="Pause" id="pause"  />
</div>

<div id="info">

</div>

<div id="countdown">

</div>

<script src="script.js"></script>
</body>
</html> 
```

JAVASCRIPT-

```
window.onload = function(){

var startButton = document.getElementById("start");

var form = document.getElementById("seconds");

var pause = document.getElementById("pause");

var secDiv = document.getElementById("countdown");

var editSec = document.createElement("h1");

startButton.onclick = function (){

editSec.innerHTML = form.value;
secDiv.appendChild(editSec);

};

}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T15:40:56.450

它是这样的：

```
var globalTime = form.value; //receive the timer from the form
var secDiv = document.getElementById("countdown");

function decreaseValue() {
  globalTime = globalTime - 1;

   secDiv.innerHTML = globalTime;
}

startButton.onclick = function (){
  setTimeout(decreasValue(),1000);
};

//clear out the timers once completed 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T15:37:10.097

您需要使用 setInterval，而不是 setTimeout。将此代码添加到 onclick 函数中：

```
editSec.id = "editSec";
window.cdint = setInterval(function(){ 
    var origVal = parseInt(document.getElementById("editSec").innerHTML);
    document.getElementById("editSec").innerHTML = origVal - 1;
    if(origVal - 1 <= 0){
        window.cdint = clearInterval(window.cdint);
    }
}, 1000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T15:37:44.107

使用[setInterval](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)

```
var time = 100;
var countdown = function(){
    secdiv.innerHTML = time;
    time--;
}
setInterval(countdown,1000); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T15:51:33.860

如果需要，您可以使用`setTimeout`：

```
startButton.onclick = function () {
    var value = parseInt(form.value);
    editSec.innerHTML = value;
    secDiv.appendChild(editSec);
    setTimeout(function () {
        editSec.innerHTML = --value < 10
            ? '<span style="color:red">' + value + '</span>'
            : value;
        if (value) {
            setTimeout(arguments.callee, 1000);
        }
    }, 1000);
}; 
```

# tridion - Tridion：循环链接组件时的组件模板问题

> ID：15205097
> 
> 赞同：1
> 
> 时间：2013-03-04T15:30:29.980
> 
> 标签：tridion, tridion-2011, tridion-content-delivery

**您好，我在循环链接组件时遇到问题。
我创建了一个带有产品项的 EmailSetup(View [UML diagram ) 组件。](http://img9.imageshack.us/img9/8859/schemadesign.jpg)
产品组件具有架构 (EmailBlockWithCode)。**
产品：

*   - 代码 = “wms_III”
*   - 物品：

*   - 密钥 = “产品密钥”
*   - 内容 = “产品内容”

*   *   - 物品：
        *   - 钥匙 = “蓝牙钥匙”
        *   - 内容 =“蓝牙内容”

**当我用代码循环这个组件时：**

```
 <products>
            <!-- TemplateBeginRepeat name="Component.Fields.Product" -->
            @@GetComponent(Field,'Product')@@
            <product name="@@Product.Code@@">   
              <!-- TemplateBeginRepeat name="Product.Fields.Item" -->
                <@@Product.Fields.Item.Key@@><![CDATA[@@Product.Fields.Item.Content@@]]></@@Product.Fields.Item.Key@@>
              <!-- TemplateEndRepeat -->
              <!-- TemplateBeginRepeat name="Product.Fields.CallToAction" -->
                @@GetComponent(Field,'CallToAction')@@
                <@@CallToAction.Fields.Item.Key@@><![CDATA[@@CallToAction.Fields.Item.Content@@]]></@@CallToAction.Fields.Item.Key@@>
              <!-- TemplateEndRepeat -->    
            </product>
         <!-- TemplateEndRepeat -->
    </products> 
```

这是函数 GetComponent

```
[TemplateCallable]
        public string GetComponent(string tcmUri, string packageVariable) {
            Assert.NotEmpty("tcmUri", tcmUri);
            Assert.NotEmpty("packageVariable", packageVariable);
            IdentifiableObject identifiableObject = m_Engine.GetObject(new TcmUri(tcmUri));

            if (identifiableObject as Component == null) {
                throw new BuildingBlockException("Given tcmUri '" + tcmUri + "' is not a Component.");
            }

            Item previousItem = m_Package.GetByName(packageVariable);
            if (previousItem != null) {
                m_Package.Remove(previousItem);
            }
            Component component = identifiableObject as Component;
            m_Package.PushItem(packageVariable, m_Package.CreateTridionItem(ContentType.Component, component));
            return "";
        } 
```

**我的输出是：**

```
<products>
        <product name="wms_III">    

        </product>
    </products> 
```

**所以我的问题是代码没有循环
遍历“项目”（键 = ProductKey；内容 = ProductContent）我找到了一个函数 IteratingOverMultivalueEmbeddedFields 但这也不会循环我的产品。代码：**

```
<!-- TemplateBeginRepeat name="Component.Fields.Product" -->
            @@GetComponent(Field,'Product')@@
       <!-- TemplateBeginRepeat name="Product.Fields" -->
  @@Field.Name@@
  <!-- TemplateBeginRepeat name="Field.Values" -->
    <!-- TemplateBeginIf cond="Field.ContentType = 'text/plain'" -->      
    @@RenderComponentField(FieldPath, TemplateRepeatIndex)@@
    <!-- TemplateEndIf -->
    <!-- TemplateBeginIf cond="Field.ContentType = 'tridion/field'" -->
      <!-- TemplateBeginRepeat name="Field.Fields" -->
        @@Field.Name@@
        <!-- TemplateBeginRepeat name="Field.Values" -->
          @@RenderComponentField(FieldPath, TemplateRepeatIndex)@@        
        <!-- TemplateEndRepeat -->
      <!-- TemplateEndRepeat -->
    <!-- TemplateEndIf -->
  <!-- TemplateEndRepeat -->
<!-- TemplateEndRepeat --> 
```

[UML 图](http://img9.imageshack.us/img9/8859/schemadesign.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T05:18:24.873

所以看起来你的 DW 函数将它们推入后，你无法访问包中的组件？

使用[DGX](http://www.sdltridionworld.com/community/extension_overview/dreamweaver_get_extension.aspx)，您的代码将大致是这样的，您是否考虑过使用它？

```
<products>
    <!-- TemplateBeginRepeat name="Component.Fields.Product" -->
    <product name="@@Get('Fields.Product[${TemplateRepeatIndex}].Code')@@">   
      <!-- TemplateBeginRepeat name="Product.Fields.Item" -->
        <@@Get('Fields.Product[${TemplateRepeatIndex}].Fields.Item.Key')@@><![CDATA[@@Get('Fields.Product[${TemplateRepeatIndex}].Fields.Item.Content')@@]]></@@Get('Fields.Product[${TemplateRepeatIndex}].Fields.Item.Key')@@>
      <!-- TemplateEndRepeat -->
      <!-- TemplateBeginRepeat name="Product.Fields.CallToAction" -->
        <@@Get('Fields.CallToAction[${TemplateRepeatIndex}].Fields.Item.Key')@@><![CDATA[@@Get('CallToAction[${TemplateRepeatIndex}].Fields.Item.Content')@@]]></@@Get('Fields.CallToAction[${TemplateRepeatIndex}].Fields.Item.Key')@@>
      <!-- TemplateEndRepeat -->    
    </product>
    <!-- TemplateEndRepeat -->
</products> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T10:47:46.503

这可能与模板的执行方式有关。最内部的重复区域首先被渲染，然后渲染器向外工作。

因此，在内部重复区域中，您还无法访问您之前获得的组件。

是的，这根本不直观，但这就是它的工作原理。

您可以做的是浏览所有链接的组件，并使用在 DWT 之前执行的 .NET TBB 中的字段名称将它们推送到包中。

[http://80000ft.blogspot.nl/2011/09/render-order-of-repeating-regions-and.html](http://80000ft.blogspot.nl/2011/09/render-order-of-repeating-regions-and.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T12:56:20.457

我通过使用此代码解决了这个问题。不是最好的，但它有效。

```
<products>
        <!-- TemplateBeginRepeat name="Component.Fields.Product" -->
            @@RenderComponentPresentation(Field, "tcm:75-72162-32")@@
        <!-- TemplateEndRepeat -->
</products> 
```

并且 renderComponentPresentation 用这个加载另一个 dwt：

```
 <product name="@@Component.Fields.Code@@">
          <!-- TemplateBeginRepeat name="Component.Fields.Item" -->
              <@@Field.Key@@><![CDATA[@@Field.Content@@]]></@@Field.Key@@>
          <!-- TemplateEndRepeat -->
          <!-- TemplateBeginRepeat name="Component.Fields.CallToAction" -->
              @@GetComponent(Field,'CallToAction')@@
              <@@CallToAction.Fields.Item.Key@@><![CDATA[@@CallToAction.Fields.Item.Content@@]]></@@CallToAction.Fields.Item.Key@@>
          <!-- TemplateEndRepeat -->    
      </product> 
```

# java - java.lang.IndexOutOfBoundsException：索引：xx，大小：xx

> ID：15205098
> 
> 赞同：1
> 
> 时间：2013-03-04T15:30:36.857
> 
> 标签：java

我正在加载一个带有逗号分隔符的 .csv 文件，方法是使用 jdom 解析器拆分数据并插入数据库。

但不知何故，我遇到了标题提到的这个错误。.csv 文件包含超过 200k 的记录。

当它读取到大约 4000 条记录时，程序抛出了这个错误。index 和 size 是相同的值，但在此之前可以成功插入所有记录。只是想知道为什么它直到几乎 4k 才遇到这个错误。

这是我的 for 循环：

```
for(int x = 0; x < FLODS.getBufferSize(); x++) 
```

但是我在互联网上进行了搜索：他们建议使用这种方法..

```
for(int x = 0; x < FLODS.getBufferSize()-1; x++) 
```

任何想法？谢谢 ：）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T15:37:52.883

`java.lang.IndexOutOfBoundsException: Index: xx, Size: xx`

一个很常见的`Exception`。这清楚地表明您正在尝试访问 的**索引**，`xx`其中（例如）的**大小**也是。永远记住，如果大小是，您只能访问索引直到。如果您尝试访问大小也是 的索引，您一定会收到此错误。`ArrayList``xx``xx``xx-1``xx``xx`

因此来自**Internet**的建议，要求您只遍历`-1`任何大小。

尽管您的`FOR`循环似乎没问题，但可能是您试图访问循环内的某个索引，该索引在某些时候`1`大于当前`x`值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T15:56:15.917

java.lang.IndexOutOfBoundsException 是一种异常类型，当某种类型的索引（例如数组、字符串或向量）超出范围时出现，因此请检查分配的内存。无需查看 for 循环之前和内部的代码就可以这么说

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-24T18:09:26.387

当您有一个嵌套的 For 循环并尝试访问第二个变量中的第一个变量时，这是一个错误。

```
for(int i = 0;i<something.size(); i++) {
     //Some manipulations here..
     for(int j = 0;j<somethingElse.size(); j++) {
          //using blah(i) instead of blah(j) causes this issue
     }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-19T11:15:22.313

```
List<WebElement> div1=driver.findElements(By.xpath(".//*[@class='art_title']"));        

for(int i=0;i<=div1.size();i++)
{           
    System.out.println(div1.get(i).getText());          
    Thread.sleep(1000);
} 
```

我将其更改为以下格式，而不是上述格式：

```
List<WebElement> div1=driver.findElements(By.xpath(".//*[@class='art_title']"));
String[] abc = new String[div1.size()];

int i= 0;

for (WebElement e : div1) 
{
        abc[i] = e.getText();
        i++;            
        System.out.println(e.getText());
} 
```

# android - 使用具有特定密码的特定调试/发布密钥构建 android 应用程序

> ID：15205103
> 
> 赞同：1
> 
> 时间：2013-03-04T15:30:54.740
> 
> 标签：android, debugging, build, keystore

我有一个 android 源代码，我也有特定的调试和发布 .keystore 文件以及它们的特定密码。如何使用 eclipse 使用此密钥库和密码构建源代码？当我尝试添加自定义调试密钥库时，它会通知“ `Keystore was tampered with, or password was incorrect`”。我在哪里可以在 eclipse 中指定密码以及如何使用这个密钥库构建应用程序？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T15:34:42.500

要在 Eclipse 中使用您的发布 .keystore 文件，请选择导出选项并将其导出为 Android 应用程序。它会在接下来的屏幕上询问您的 .keystore 文件和密码

![导出安卓应用](../Images/0ccdc693750ecb4d0f5072c309a62ebc.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T15:41:08.047

根据 Android 开发者[网站](http://developer.android.com/tools/publishing/app-signing.html)：

> 如有必要，您可以更改调试密钥库/密钥的位置/名称或提供自定义调试密钥库/密钥以供使用。但是，任何自定义调试密钥库/密钥都必须使用与默认调试密钥相同的密钥库/密钥名称和密码（如上所述）。

因此，如果您的调试密钥不使用这些名称和密码，则不能使用它：

> 密钥库名称：“debug.keystore” 密钥库密码：“android” 密钥别名：“androiddebugkey” 密钥密码：“android” CN：“CN=Android Debug,O=Android,C=US”

要使用您的发布密钥库，您可以打开 AndroidManifest.xml，单击底部的清单选项卡，然后向下滚动并单击导出向导。在这里，您可以浏览到您的发布密钥库并提供别名和密码。

# c++ - 单例的重复实例化

> ID：15205111
> 
> 赞同：0
> 
> 时间：2013-03-04T15:31:16.763
> 
> 标签：c++, singleton, mex, dynamic-library

通过 Mex 开展一个关于 C++ 和 Matlab 合作的大型项目，我们目前正与我们的一个单身人士作斗争。

该类是在预处理期间通过宏生成的，因此看起来有点奇怪。

```
class AdditionalOperation { 
private: 
    const std::string* val; 
    typedef std::map<std::string, const std::string*> StringMap; 

    static StringMap& getStringToPointerMap() 
    { 
        static StringMap map; 
        return map; 
    } 

    static boost::mutex& getMutex()
    { 
        static boost::mutex mutex; 
        return mutex; 
    } 

    AdditionalOperation(const std::string* s)
        :val(s) 
    {} 
private: 
    static std::string* none_string() 
    { 
        static std::string s = "none"; 
        static int count = 0; 
        boost::mutex::scoped_lock lock(getMutex()); 
        if(count++ == 0) { 
            getStringToPointerMap().insert(std::make_pair(s,&s)); 
        } 
        return &s; 
    } 
public: 
    static AdditionalOperation none() 
    { 
        return AdditionalOperation(none_string()); 
    } 

private: 
    static std::string* norm_string() 
    {   
        static std::string s = "norm"; 
        static int count = 0; 
        boost::mutex::scoped_lock lock(getMutex()); 
        if(count++ == 0) { 
            getStringToPointerMap().insert(std::make_pair(s,&s)); 
        } 
        return &s; 
    } 
public: 
    static AdditionalOperation norm() 
    { 
        return AdditionalOperation(norm_string()); 
    } 
private: 
    static void prepare() 
    { 
        none(); 
        norm(); 
    } 
public: 
    static AdditionalOperation fromString(std::string s) 
    { 
        static int count = 0; 
        if(count++ == 0) 
            prepare(); 
        boost::mutex::scoped_lock lock(getMutex()); 
        StringMap& map = getStringToPointerMap(); 
        StringMap::iterator location = map.find(s); 
        if(location == map.end()) { 
            throw UnknownEnumValue(s); 
        } 
        return AdditionalOperation(location->second); 
    } 

    std::string toString() const 
    { 
        return *val; 
    }

    bool operator==(const AdditionalOperation& other) const 
    { 
        return val == other.val; 
    } 

    bool operator!=(const AdditionalOperation& other) const 
    { 
        return !(*this == other); 
    } 
}; 
```

所有这些代码都是从这一行生成的（通过如上所述的宏）：

```
DECLARE_SENUM(AdditionalOperation, none, norm); 
```

这是一个很好的界面，我们希望继续使用。

我们想使用这个类作为枚举的替代品，因为我们需要将它们从字符串转换为字符串。在这个类中，我们有 2 个“枚举”成员，即 norm 和 none。

现在我们添加了一些日志记录，并确定 none_string 和 norm_string 函数内的插入操作被调用了两次，即使我们的计数器应该阻止这种情况。

我们尝试过的一些事情：

*   我们正在使用动态库，但使用 -rdynamic 并没有帮助。
*   当我们打印静态变量的地址时，我们可以清楚地看到它们不同。
*   此类位于动态库中，该动态库又与 mex 文件链接。此 mex 文件正在由另一个 mex 文件通过 dlopen 动态加载。

我们在想，由于动态库，可能该类的多个实例被声明并处于活动状态。但是我们也使用了其他类型的没有任何问题迹象的单例。

我希望它足够清楚，可以随时提供额外的信息或澄清！

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T16:13:50.937

很明显，你把问题复杂化了。

```
std::string const& to_string(MyEnum e) {
    static std::string const First = "First";
    static std::string const Second = "Second";

    switch(e) {
    case MyEnum::First: return First;
    case MyEnum::Second: return Second;
    }

    throw std::runtime_error("Unknown enum value");
} 
```

如果不是更好更快，也会起作用。

# ruby-on-rails - Ruby on Rails 通过 Dropbox 同步应用程序文件夹

> ID：15205113
> 
> 赞同：0
> 
> 时间：2013-03-04T15:31:19.553
> 
> 标签：ruby-on-rails, macos, localhost, dropbox

我一直在我的家用电脑和笔记本电脑之间通过 Dropbox 上的符号链接同步我的 /Sites 文件夹。它的 iMac 和 MACbook Pro 都具有相同的用户名、软件版本等......它的工作就像一个魅力。但是，我刚刚开始使用 RoR 进行开发，但由于与应用程序存储会话数据的方式有关，我遇到了一个问题。因此，当我尝试在应用程序目录中的 Macbook 中运行 rails 服务器时，我得到以下信息：

```
USERNAME[~/sites/rails/blog]rails s
=> Booting WEBrick
=> Rails 3.2.12 application starting in development on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server
Exiting
/Library/Ruby/Gems/1.8/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:245:in `load': /Users/USERNAME/Sites/Rails/blog/config/initializers/session_store.rb:3: syntax error, unexpected ':', expecting $end (SyntaxError)
...sion_store :cookie_store, key: '_blog_session' 
```

有没有人对如何解决这个问题有任何想法？当我启动当前计算机以使其正常时，是否有某种方法可以在某处刷新某些内容？

# ninject - Ninject 按约定使用 BindToFactory 绑定到具有类 T 的工厂接口

> ID：15205115
> 
> 赞同：2
> 
> 时间：2013-03-04T15:31:23.600
> 
> 标签：ninject, factory, ninject-extensions

我想替换这段代码：

```
Kernel.Bind<ITaskFactory<AlertTask>>().ToFactory();
Kernel.Bind<ITaskFactory<PopupTask>>().ToFactory(); 
```

像这样：

```
Kernel.Bind(scanner => scanner.FromThisAssembly().SelectAllClasses()
   .EndingWith("Task").MAGICGOESHERE().BindToFactory() 
```

我尝试创建一个 IBindingGenerator，但在尝试从 T 获取 ITaskFactory<T> 时陷入困境。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T17:55:07.500

改用这个：

```
kernel.Bind(scanner => scanner
    .FromThisAssembly()
    .SelectAllInterfaces()
    .EndingWith("Factory")
    .BindToFactory());

kernel.Bind(scanner => scanner
    .FromThisAssembly()
    .SelectAllClasses()
    .EndingWith("Task"));

var f = kernel.Get<ITaskFactory>();
var task1 = f.CreateTask<AlertTask>();
var task2 = f.CreateTask<PopupTask>();

public class AlertTask {}
public class PopupTask { }
public interface ITaskFactory
{
    T CreateTask<T>();
} 
```

# iphone - 检测何时选择了 UITabBarController 更多选项卡

> ID：15205118
> 
> 赞同：3
> 
> 时间：2013-03-04T15:31:37.257
> 
> 标签：iphone, ios, uitabbarcontroller

如何检测何时选择了特殊的更多选项卡`UITabBarController`？

`tabBarController:didSelectViewController:`告诉我何时选择了一个选项卡，包括更多选项卡。但是，我怎么知道给定`UIViewController`的实际上是更多选项卡？

起初我虽然关于使用索引，但这会假设“更多”选项卡将位于同一位置。此外，标题（“更多”）似乎是本地化的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T15:34:48.720

发布问题后立即找到它：

```
- (void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController 
{
    if (tabBarController.moreNavigationController == viewController) {
        NSLog(@"More");
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T15:45:34.127

另一种方法：

```
if (tabBarController.selectedIndex == NSNotFound) {
    // etc.
} 
```

# html - 如果为行的所有单元格设置了行跨度，则表行变为内联

> ID：15205123
> 
> 赞同：2
> 
> 时间：2013-03-04T15:31:46.470
> 
> 标签：html, html-table

这是我需要做的。

我正在创建一个网格，其中包含应该在表格中表示的小部件。每个小部件都有一个可变宽度，表示包含它的 td 的 colspan，高度为 1 或 2，应该表示该单元格的行跨度。

一切正常，直到我遇到这样一种情况，即一行的所有单元格的 colspan 为 2，而下一行可以有任何类型的单元格。下一行显示在上一行而不是下一行的旁边。

这是一个复制问题的[jsfiddle](http://jsfiddle.net/vjPMw/2/)，代码如下：

```
<table>
<tr>
    <td rowspan = "2">ONE</td>
</tr>
<tr>
    <td rowspan = "1">1</td>
    <td rowspan = "1">2</td>
    <td rowspan = "1">3</td>
    <td rowspan = "1">4</td>
</tr>
</table> 
```

这是一个错误吗？难道我做错了什么？

编辑：要清楚，我想做的是有一排小部件的高度是常规行的两倍

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T15:41:29.293

很难准确地可视化您想要什么，但也许您应该使用块元素而不是表格。表格只能用于表格数据。`rowspan`如果没有要跨越的行，该属性将无法正常工作。

```
<table>
  <tr>
   <td rowspan="2">ONE</td>
   <td>TWO</td>
 </tr>
  <tr>
   <td>1</td>
   <td>2</td>
   <td>3</td>
   <td>4</td>
 </tr>
</table> 
```

[看小提琴](http://jsfiddle.net/q2fee/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T15:43:02.633

而不是强制一个东西到两行，通常只有当你在那组行中有更多单元格时才会这样做，只需设置单元格的高度：

[http://jsfiddle.net/vjPMw/5/](http://jsfiddle.net/vjPMw/5/)

```
td {
    height: 20px;
    background-color: #eee;
}
td.doubleheight {
    height: 40px;
}

<table>
    <tr>
        <td class="doubleheight">ONE</td>
    </tr>
    <tr>
        <td rowspan = "1">1</td>
        <td rowspan = "1">2</td>
        <td rowspan = "1">3</td>
        <td rowspan = "1">4</td>
    </tr>
</table> 
```

真的，我甚至认为这是不必要的，因为单元格通常会扩展以包含其内容。也许您的情况的更完整的演示是为了。另外，我同意 Aarolama Bluenk 的观点，也许一张桌子一开始就不是正确的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-09T22:54:08.980

第一行有 1 个行跨度 = 2 的单元格，因此 html 期望下一行是“跨越”的行，但是您添加了 4 个 td 的行。我建议`<tr></tr>`在第一个之后添加空并使用它或将第一个 td 修复为：`<td rowspan="2" colspan="4">ONE</td>`

# ruby-on-rails-3 - Thin、unicorn、puma、webrick 中的并发处理

> ID：15205131
> 
> 赞同：0
> 
> 时间：2013-03-04T15:32:07.543
> 
> 标签：ruby-on-rails-3, concurrency, thin, unicorn, puma

如果我在控制器中有以下操作

```
def give_a
 print a
 a = a+1
end 
```

当一个请求到来并且收到多个请求时，每个网络服务器会发生什么？

我知道 webrick 和瘦单线程，所以我猜这意味着在当前请求完成之前不会处理请求。

在 puma 或 unicorn（可能是其他）等并发网络服务器中会发生什么如果有 2 个请求到来并且 2 个 unicorn 线程处理它们，两个响应会给出相同的`a`值吗？（在两个请求同时进入方法的情况下）

还是这一切都取决于服务器本身发生的事情以及对数据的访问是串行的？

有没有办法为并发网络服务器设置互斥体/信号量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T18:24:12.320

afaik，rails 应用程序为`YourController.new`每个请求环境生成一个。

从您发布的内容中，无法看出是什么`a`意思。当它是某个共享类变量时，它是可变状态并且可以从两个请求线程进行修改。

# xml - 嵌套 XML 文件验证

> ID：15205133
> 
> 赞同：0
> 
> 时间：2013-03-04T15:32:09.867
> 
> 标签：xml, oracle, xml-validation

我有一个嵌套了多个 xml 的 xml 数据源。我们将使用 informatica fro etl 进程将此 xml 加载到我们的 oracle 11g 数据库中。针对 SRC 验证 TRT 的最佳方法是什么。我们没有将 XML 数据加载到 stage 中，因此为了比较 SRC 是 XML 而 trgt 是 oracle 表。

# emacs - 在 Mac 上安装和使用 LISP

> ID：15205134
> 
> 赞同：3
> 
> 时间：2013-03-04T15:32:23.000
> 
> 标签：emacs, lisp, xlispstat

我已经阅读了许多有关此问题的主题，但无法结束。我希望能够使用 Emacs 和 XLispStat 在 Mac 上的 LISP 中编写代码。到目前为止，我已经用 HomeBrew 安装了 Emacs，但是在安装 XLispStat 时我卡住了。有人可以详细说明执行此操作的步骤吗？我会很感激的！

PS：这是 Lisp 的必需安装。如果在 Mac 上有更容易实现的东西，我也会尝试！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T20:32:02.670

[我在这个问题](https://stackoverflow.com/q/9608810/190887)上发布了类似的答案。短版：OS X Lisp 环境的选项是[LispBox](http://common-lisp.net/project/lispbox/)、[LispWorks 个人](http://www.lispworks.com/downloads/index.html)（瘸子软件警告）或 Emacs+SLIME（通过[quicklisp](https://github.com/quicklisp/quicklisp-slime-helper/blob/master/README.txt) / [ELPA ）](http://tromey.com/elpa/install.html)。

由于您的评论暗示您正在为可行的 Common Lisp 工具投下一个相当广泛的网络，我还要提到[CLISP](http://www.clisp.org/)似乎受到各种 OS X 端口/包管理器的支持，并且具有相当舒适的 REPL（当然，您可以在[SBCL 中使用 Linedit](http://common-lisp.net/project/linedit/)获得相同的结果）。

编辑：正如 Rainer 和 Vsevolod 下面提到的，[Clozure](http://ccl.clozure.com/download.html)和[MCLIDE](http://mclide.com/)也存在。我自己都没有使用过，所以我不能给你任何细节（尽管曾多次向我推荐过 Clozure）。

> 哦，是否有可能编写代码是一些普通的文本编辑器并在终端中以某种方式编译它？

不是我认为你的意思，但是是的，你可以`.lisp`用 Sublime 或其他什么东西写一个文件，然后`sbcl your-file-here.lisp`. 请注意，`sbcl your-file-here.lisp`使用 REPL 启动一个正在运行的 Lisp 实例会产生所有隐含的开销。如果你对 Emacs 死心塌地，你可以做的是从你的项目目录中单独运行一个 REPL，然后只是`(load "file-you-changed.lisp")`或`(ql:quickload :your-project-name)`每隔一段时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T21:15:22.120

xlispstat 可以在 Mac OS 10.8 上编译并且运行良好。它需要对挑剔的编译器进行一些小的编辑，但可以与 XQuartz 完美配合。告诉您使用其他系统的人不知道集成 xlispstat 对从事数字工作的人来说有多好。

# android - android：如何在带有随机问题和答案的问答游戏中获得正确的答案列表？

> ID：15205137
> 
> 赞同：0
> 
> 时间：2013-03-04T15:32:30.940
> 
> 标签：android, string, arraylist, multiple-choice

我正在创建一个简单的问答游戏。在这个游戏中，问题和相应的答案将随机生成。我为问题创建了一个列表*“q”*。

对于答案，我创建了各种列表，每个列表有 4 个字符串。例如，如果问题是 q 列表中的 0，则此问题的答案将在列表*"a0"*中，对吗？但是我在获取答案列表中的字符串时遇到了一些问题。我试过这个：

```
 while(true){

            Integer nxt = rng.nextInt(6);

            if (!generated.contains(nxt))
            {
                generated.add(nxt);

                textView1.setText(((ArrayList<String>) q).get(nxt));

                String x;
                x = ("a" +nxt); 

                Collections.shuffle((x));

                btn1.setText(((ArrayList<String>) x).get(0));
                btn2.setText(((ArrayList<String>) x).get(1));
                btn3.setText(((ArrayList<String>) x).get(2));
                btn4.setText(((ArrayList<String>) x).get(3));

                break;
            }
    } 
```

我创建了一个字符串*“x”*来获取正确的列表。如果*“nxt”*为 4，则按钮文本将获取列表 a4 中的字符串。

但在我的代码中，*“Collections.shuffle”*和*“setText”*试图找到列表*“x”*。它不会像我想象的那样发展。

我该如何解决？

*我的想法是检查单击按钮的字符串，并与另一个正确答案列表进行比较。这样，我可以将正确答案归因于其他 3 个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T15:37:01.277

几天前我做了一个[类似的测验应用程序（数学之王） 。](https://play.google.com/store/apps/details?id=com.troubi.kingofmath)

1.  **计算正确答案**
2.  **将正确答案添加到您的答案列表中**
3.  **计算假答案，将它们添加到答案列表中**
4.  **随机播放列表**
5.  **得到`id`正确答案的。**它在 [0, max_answers) 范围内

如果已选择答案，则检查所选 id (0, 1, 2, 3) 是否是正确答案之一。如果是，则用户选择了正确的，否则他没有。

*PS：对不起，自我推销。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T15:59:53.247

如果这段代码能够正确编译和/或运行，我会感到惊讶。您正在尝试使用 a 的内容`String`作为变量名，将该变量转换为 an`ArrayList<String>`然后访问元素。这在很多层面上都是错误的，您应该考虑再次学习一些 Java 教程。

如果您这样做或觉得您仍然可以继续，请尝试以下方法：您不应该将问题和答案存储在单独的列表中，而应一起存储在一个班级中。

```
class Question
{
    //...
    // maybe id and other stuff belonging to a question
    //...

    String questionText;

    // separate because you need to tell the correct answer apart from the wrong ones later
    // you could also just always use the first one in a set of answers.
    String correctAnswerText; 
    ArrayList<String> wrongAnswerTexts;
 } 
```

然后您可以将您的问题存储`ArrayList<Question>`在您的应用程序中并设置答案，如下所示：

```
//...
// set up ArrayList<Question> questions here
//...

int nxt = rng.nextInt(6);

//...    
// make sure your list is actually long enough for the generated index
//...

Question nextQuestion = questions.get(nxt);

//...    
// make sure the retrieved object is valid
//...    
// set the question text to nextQuestion.questionText;
//...

ArrayList<String> allAnswers = new ArrayList<String>();
allAnswers.add(nextQuestion.correctAnswerText);
allAnswers.addAll(nextQuestion.wrongAnswerTexts);

Collections.shuffle(allAnswers);

btn1.setText(allAnswers.get(0));
btn2.setText(allAnswers.get(1));
btn3.setText(allAnswers.get(2));
btn4.setText(allAnswers.get(3)); 
```

# c# - 首先使用实体 框架代码获取 InvalidOperationException

> ID：15205140
> 
> 赞同：0
> 
> 时间：2013-03-04T15:32:40.160
> 
> 标签：c#, inheritance, entity-framework-5, code-first, invalidoperationexception

我参与了一个项目，我们使用 Entity Framework Code First 将现有的 C# 代码映射到数据库。我不打算在这里重现代码本身，但我将展示一些应该涵盖相同问题的伪代码。

我正在尝试将一个类映射到具有其他类列表的数据库。我将向您展示一个示例：

```
public Class ListClass 
{
    public List<SubClassA> ListOne
    {
        get { return BaseClass.OfType<SubClassA>().Where(b => !b.BoolOne && b.BoolTwo).ToList(); }
    }

public List<SubClassA> ListTwo
    {
        get { return BaseClass.OfType<SubClassA>().Where(b => b.BoolOne && b.BoolTwo).ToList(); }
    }
}

public abstract class BaseClass
{
    public bool BoolOne {get; set;}

    #Region EF
    public GUID PrimaryKey {get; set;}
    public GUID ListClassForeignKey {get; set;}
    #EndRegion
}

public class SubClassA : BaseClass
{
    public bool BoolTwo {get; set}
}

Class SubClassB : BaseClass
{
    //Contents..
} 
```

摘要： ListClass 包含 SubClassA 的列表。BaseClass 和 SubClassA 对 ListClass 一无所知。添加 BaseClass 中的 GUID 属性以与实体框架一起使用，否则不会更改现有类。这就是我们在这个项目中使用 Fluent API 的原因：

```
class ListClassConfiguration : EntityTypeConfiguration<ListClass>
{
    public ListClassConfiguration()
    {
        HasKey(f => f.PrimaryKey);
        Property(f => f.PrimaryKey).HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity);
        HasMany(f => f.ListOne).WithOptional().HasForeignKey(f => f.ListClassForeignKey);
        HasMany(f => f.ListTwo).WithOptional().HasForeignKey(f => f.ListClassForeignKey);

    }
} 
```

在 Context-class 中，我们只需添加此配置。每当模型更改时，数据库就会被删除。我目前正在为 BaseClass 及其子类使用 TPH 映射。

当我尝试使用列表中的引用对象添加和保存 ListClass 时，我得到了这个异常：

> 无效操作异常。外键组件“ListClassForeignKey”不是“SubClassA”类型的声明属性。验证它没有被明确地从模型中排除，并且它是一个有效的原始属性。

那么，有什么建议吗？

编辑：我注意到在实际项目中，似乎有空列表。我试图删除配置类中的外键，我得到了一个没有内容的数据库表（一行中只有 NULL 值）。在此示例中，这意味着名称为“BaseClass”的 TPH 表仅为空/只有 NULL 值。这能解释一些问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T11:56:15.500

没关系，一位同事指出了 list-properties 的一个问题：只有 getter，没有 setter，它们基于 ListClass 也使用的 BaseClass 列表

# java - 带有 GridBagLayout 的 JTabbedPane

> ID：15205146
> 
> 赞同：0
> 
> 时间：2013-03-04T15:32:54.090
> 
> 标签：java, swing, applet, jtabbedpane, gridbaglayout

我理解了 JTabbedPane 和 GridBagLayout 背后的概念。但是，当我尝试同时使用两者时，我失败了。也就是说，当我使用 GBLayout 时，我的其他选项卡（每个选项卡具有不同的功能）没有显示出来。请帮忙。谢谢你。

这是我的代码：

```
 import java.awt.*;
    import javax.swing.*;

    public class Tryout extends JFrame {

    private static final long serialVersionUID = 1L;
    private     JTabbedPane tabbedPane;
    private     JPanel      panel1;
    private     JPanel      breakfast;

    public Tryout()
    {   
        JPanel topPanel = new JPanel();
        topPanel.setLayout( new BorderLayout() );
        getContentPane().add( topPanel );

        createPage1(); //Tab1
        createPage2(); //Tab2

        tabbedPane = new JTabbedPane();
        tabbedPane.addTab( "Input Form", panel1 );
        tabbedPane.addTab( "Breakfast", breakfast );
        topPanel.add( tabbedPane, BorderLayout.CENTER );
    }

    public void createPage1()
    {
        /* Works fine when I un-comment this
        panel1 = new JPanel();
        panel1.setLayout(new BorderLayout());
        panel1.add(new JLabel("Hi"), BorderLayout.NORTH); 
        */
        //Tabs not getting displayed if I add the code below with GBLayout
        JPanel panel = new JPanel(new GridBagLayout());
        this.getContentPane().add(panel);

        JLabel label = new JLabel("Form");

        JPanel tableButtonPanel = new JPanel();
        tableButtonPanel.add(new JButton("Add Thing"));
        tableButtonPanel.add(new JRadioButton("Delete Thing"));
        tableButtonPanel.add(new JButton("Modify Thing"));

        GridBagConstraints gbc = new GridBagConstraints();

        gbc.gridx = 0;
        gbc.gridy = 0;
        panel.add(label, gbc);

        gbc.gridx = 0;
        gbc.gridy = 2;
        panel.add(tableButtonPanel, gbc);

    }

    public void createPage2()
    {
        breakfast = new JPanel();
        breakfast.setLayout( new BorderLayout() );
        breakfast.add( new JButton( "North" ), BorderLayout.NORTH );
        breakfast.add( new JButton( "South" ), BorderLayout.SOUTH );
        breakfast.add( new JButton( "East" ), BorderLayout.EAST );
        breakfast.add( new JButton( "West" ), BorderLayout.WEST );
        breakfast.add( new JButton( "Center" ), BorderLayout.CENTER );
    }

public static void main(String args[]) {

        Tryout ex = new Tryout();
        ex.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        ex.setSize(750,750);
        ex.setVisible(true);
        ex.setTitle( "Recipe Tracker" );
        ex.setBackground( Color.gray );

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T15:46:30.607

问题是，在 中`createPage1`，您正在向 中添加新`JPanel`的`JFrame`：

```
this.getContentPane().add(panel); 
```

它取代了位于'位置的`topPanel`（其中包含） 。因此没有出现。`JTabbedPane``JFrame``BorderLayout.CENTER``JTabbedPane`

您可以简单地*返回*`JPanel`已创建的新内容并将其添加到您的`JTabbedPane`：

```
public JPanel createPage1() {

   JPanel panel = new JPanel(new GridBagLayout());
   // this.getContentPane().add(panel); don't do this...
   ...

   return panel;
} 
```

并添加：

```
tabbedPane.addTab("Input Form", createPage1()); 
```

# xml - 图表有 XML 标准吗？

> ID：15205148
> 
> 赞同：3
> 
> 时间：2013-03-04T15:33:03.170
> 
> 标签：xml, xslt, svg, charts, standards

我使用过许多图表和仪表板软件包，并且在软件包之间移植图表时遇到了困难。他们是否有任何用于定义图表的 XML 标准？我想在 XML 中指定一个图表，并为 data-* 属性使用 HTML5 标准：

[http://www.w3.org/TR/2010/WD-html5-20101019/elements.html#embedding-custom-non-visible-data-with-the-data-attributes](http://www.w3.org/TR/2010/WD-html5-20101019/elements.html#embedding-custom-non-visible-data-with-the-data-attributes)

例如，要生成一个简单的条形图，XML 代码可能是：

```
<chart data-source="my-chart-data.xq">
    <title>Sample Bar Chart</title>
    <type>bar-chart</type>
</chart> 
```

其中“my-chart-data.xq”将获取图表的数据。然后我想为服务器上的图表生成 SVG，或者如果浏览器不支持 SVG，我希望它生成一个图像。

我尝试使用 graph2svg 包：

[http://code.google.com/p/graph2svg/](http://code.google.com/p/graph2svg/)

这是一个非常好的架构，但是实现使用了 XSLT 2.0 数学扩展，任何开源系统都不再支持这些扩展。

如果没有现有标准，我将如何开始定义便携式图表规范的标准流程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T21:25:51.920

有一些用于 SVG 的 XSLT 库，它们为 XML 数据源定义元素和属性约定：

*   [Jeni Tennison 的 SVG Utils](http://www.jenitennison.com/xslt/utilities/svg-utils.html)
*   [XSLT Cookbook 示例代码](http://examples.oreilly.com/9780596003722/)
*   [Graph2SVG](http://code.google.com/p/graph2svg/)
*   [GraphML](http://reference.wolfram.com/mathematica/ref/format/GraphML.html)
*   [Walter Zorn 的在线函数绘图仪](http://www.walterzorn.de/en/grapher/grapher_e.htm)
*   [XGMML](http://wiki.cytoscape.org/XGMML)
*   [GXL](https://blogs.oracle.com/sundararajan/entry/graphs_gxl_dot_and_graphviz)
*   [XForms](https://www.w3.org/TR/XForms-for-HTML/) + [d3.xml](http://bl.ocks.org/lgrammel/2772585)

此外，[MXML](http://svn.apache.org/repos/asf/flex/sdk/trunk/frameworks/mx-manifest.xml)、[LZX](http://www.fredshack.com/docs/laszlo.html)、[XAML](http://www.codeproject.com/Articles/148041/Visualizing-Live-and-Historic-Stock-Data-Using-Sil)、[ODF](http://www.openoffice.org/api/docs/common/ref/com/sun/star/chart/module-ix.html)和[OOXML](http://msdn.microsoft.com/en-us/library/office/documentformat.openxml.drawing.charts.aspx) 对各种[图表组件](http://silverlight.codeplex.com/wikipage?title=Silverlight%20Toolkit%20Overview%20Part%202&referringTitle=Home)都有定义。

在 XHTML 中，HighCharts 支持将`<table>`元素作为[数据源](http://www.highcharts.com/docs/working-with-data/data-module)：

```
<table id="datatable">
    <thead>
        <tr>
            <th></th>
            <th>Jane</th>
            <th>John</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <th>Apples</th>
            <td>3</td>
            <td>4</td>
        </tr>
        <tr>
            <th>Pears</th>
            <td>2</td>
            <td>0</td>
        </tr>
        <tr>
            <th>Plums</th>
            <td>5</td>
            <td>11</td>
        </tr>
        <tr>
            <th>Bananas</th>
            <td>1</td>
            <td>1</td>
        </tr>
        <tr>
            <th>Oranges</th>
            <td>2</td>
            <td>4</td>
        </tr>
    </tbody>
</table> 
```

**参考**

*   [定制预处理 | 海图](http://www.highcharts.com/docs/working-with-data/custom-preprocessing)

*   [在 HTML 表中定义的数据 | 海图](http://www.highcharts.com/demo/column-parsed)

*   [XForms 的动态 SVG 图](http://www.svgopen.org/2010/papers/14-Dynamic_SVG_graphs_for_XForms/)

*   [GPL 简介](http://www.ibm.com/support/knowledgecenter/en/SSLVMB_20.0.0/com.ibm.spss.statistics.help/gpl_intro.htm)

# javascript - 如何替换浏览器快捷键默认值

> ID：15205150
> 
> 赞同：2
> 
> 时间：2013-03-04T15:33:05.080
> 
> 标签：javascript, jquery, browser, dom-events

根据一些[问题](https://stackoverflow.com/questions/11656887/disable-browser-shortcut-keys)，我发现可以知道如何防止组合键，但我想定义一个短键......

一种方法是在 jQuery 中使用`bind()`函数，问题是，keys 默认工作仍在工作。IE：`Ctrl+s = savepage`

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T16:04:31.327

您链接的问题并不完全是您要寻找的问题，但可以使用相同的概念。这是仅监听 Ctrl+s 的 jQuery 等效项

```
$(document).on("keydown",function(e){
    if (e.originalEvent.ctrlKey && e.which == 83/*"s"*/) {
        setTimeout(function(){ //Fix for firefox. Ref: http://stackoverflow.com/questions/14860759/cant-override-ctrls-in-firefox-using-jquery-hotkeys
            // do save stuff...
            alert("Saved!"); // if you remove alert, you can remove setTimeout
        },0);
        return false;
    }
}); 
```

[http://jsfiddle.net/SEQVD/3/](http://jsfiddle.net/SEQVD/3/)

在 Chrome、Firefox 和 IE 中测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T15:49:39.617

请确保您绑定到快捷方式的事件包含 preventDefault。在 jquery 中，这应该如下所示：

```
function event(e) {
  e.preventDefault();
} 
```

使用其他框架，这可能会有所不同，例如`e.stop()`或`e.stopEvent()`。

# php - 将 jQuery 值传递给 PHP

> ID：15205151
> 
> 赞同：1
> 
> 时间：2013-03-04T15:33:09.190
> 
> 标签：php, jquery, ajax

我正在使用 jQuery 计算两个地方之间的距离，我想传递这个值（pickup_distance）以在 PHP 中使用。

我想将此值发送到关税.fare.controller.php 以用于以下功能：

```
private static function getFare($int_terminate) {

    // Function

    if pickup_distance(<-- jQuery Value) > 5 {

        // Do Something

    }

} 
```

我怎么能这样做呢？我知道我可以通过 AJAX 做到这一点，但是对于编程来说还是很陌生的，我不太确定如何做到这一点。

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T15:36:48.627

使用 Jquery 很简单：

```
var your_var_value=1200;
$.post("your_php_script.php", {var_value: your_var_value}, function(data){
    alert("data sent and received: "+data);
}); 
```

然后在您的 PHP 脚本中，您将获得如下变量：

```
$distance=$_POST['var_value']; 
```

您在“your_php_script.php”中回显的内容作为`data`变量返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T15:37:08.127

由于 jQuery 是客户端代码而 PHP 是服务器端代码，因此必须以某种方式将变量传递给服务器。

有一些不错的方法可以做到这一点，目前最常见的是 GET 和 POST 变量。然后你可以在 php 中选择它们并用它做任何你想做的事情。

一个非常简单的示例是拥有一个 iframe/php 图像，只需使用 JavaScript 或 jquery 加载 src file.php?EEEE=YYY 然后获取该变量 $_GET['EEEE']

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T15:37:50.127

最好的方法是使用内置在 Ajax 功能中的 jQueries。使用 .ajax 或 .post 并将所需的参数发送到 PHP 脚本。

# paypal - 如何使用 Paypal 生成唯一的付款 URL？

> ID：15205152
> 
> 赞同：1
> 
> 时间：2013-03-04T15:33:09.803
> 
> 标签：paypal

我正在尝试弄清楚如何生成一个唯一的支付令牌，我可以将用户重定向到该令牌，以便他们可以支付数字商品的费用。

我认为[Button Manager SDK](https://www.x.com/developers/paypal/products/button-manager)是我所需要的。但是，我看不到如何设置接收者电子邮件？对于特定项目，有一个不同的接收器，我想动态设置它。

但是，似乎我只需要将我的凭据设置为接收者。我想为不同的项目使用多个接收器，而不是一个 sdk 配置文件。

我目前使用的只是一个 HTML Paypal 按钮，但我宁愿动态创建一个唯一的 URL 来重定向用户以阻止用户篡改东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:35:51.117

您是否考虑过 Express Checkout API？-- （也许使用 SOLUTIONTYPE=Sole 来允许客人结帐？）

我相信这是完成这项工作的更好工具；令牌重定向是 EC 的核心特性。

# google-maps-api-3 - 从 API 标记链接回 Google

> ID：15205153
> 
> 赞同：0
> 
> 时间：2013-03-04T15:33:10.333
> 
> 标签：google-maps-api-3

我正在使用 Google Maps API v3 生成一些小地图。我在一个隐藏控件的小地图中有一个自定义标记。这很好用。现在，我想添加一个链接，以便单击此标记将打开选择此位置的完整 Google 地图。似乎很明显。

我正在创建这样的标记。

```
var pin = new google.maps.LatLng(myLat,myLong);
var marker = new google.maps.Marker({
   position: pin,
   map: map,
   title:"Hello World"
}); 
```

这似乎应该很明显，我错过了什么？我需要自己构建链接并分配吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T16:45:18.890

这应该有效（未经测试）：

```
var pin = new google.maps.LatLng(myLat,myLong);
var marker = new google.maps.Marker({
   position: pin,
   map: map,
   title:"Hello World"
});
google.maps.addListener(marker, "click", function() {
   window.location = "https://maps.google.com/maps?ll="+pin.toUrlValue;
}); 
```

[工作示例（基于现有示例，而不是来自上述代码）](http://www.geocodezip.com/v3_MW_example_map3_redirectOnClick.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T18:42:42.670

最终找到了答案：

```
google.maps.event.addListener(marker, 'click', function() {
    window.open("https://maps.google.com/maps?ll="+pin.toUrlValue(),'_blank');
}); 
```

# jquery - 如何将 jquery 和视图助手添加到 zend 框架应用程序？

> ID：15205156
> 
> 赞同：0
> 
> 时间：2013-03-04T15:33:15.973
> 
> 标签：jquery, zend-framework

我需要在我的应用程序中添加一个视图助手手册说要添加该行 `$view->addHelperPath("ZendX/JQuery/View/Helper", "ZendX_JQuery_View_Helper");`
但是如果我只是从控制器返回数组，我应该将它添加到哪里？

谢谢， 奥弗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T04:38:14.260

`$view`是控制器的视图对象

代码应该是这样的

```
$view = new Zend_View();
$view->addHelperPath('ZendX/JQuery/View/Helper/', 'ZendX_JQuery_View_Helper');

$viewRenderer = new Zend_Controller_Action_Helper_ViewRenderer();
$viewRenderer->setView($view);
Zend_Controller_Action_HelperBroker::addHelper($viewRenderer); 
```

如果您在整个应用程序中都需要它们，您可以在引导文件中注册它们。查看 ZF 手册[zendx.jquery.view](http://framework.zend.com/manual/1.12/en/zendx.jquery.view.html)了解更多信息。

# android - 使用共享用户 ID 时的 INSTALL_FAILED_SHARED_USER_INCOMPATIBLE

> ID：15205159
> 
> 赞同：37
> 
> 时间：2013-03-04T15:33:48.327
> 
> 标签：android

我正在开发将共享数据库的 Android 应用程序。为此，我`android:sharedUserId`在两个应用程序的清单文件中都使用了。当我在添加后尝试运行应用程序时，`sharedUserId`它会在控制台中显示以下错误。

```
[2013-03-04 19:37:32 - MainActivity] Installation error: INSTALL_FAILED_SHARED_USER_INCOMPATIBLE
[2013-03-04 19:37:32 - MainActivity] Please check logcat output for more details.
[2013-03-04 19:37:32 - MainActivity] Launch canceled! 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-03-26T13:11:47.190

我按照以下步骤操作：

1.  删除现有应用程序（如果已安装）
2.  从 android 清单中删除了共享用户 ID
3.  构建应用程序。
4.  现在再次输入共享用户 ID
5.  再构建应用程序 1 次

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-02-16T10:20:10.807

这意味着您的应用程序的某些内容未正确卸载。此步骤有助于从内部命令强制卸载：

1.  使用 USB 将手机连接到 PC
2.  从您的外壳启动：

```
 $ adb shell
    shell@android:/ $ su
    shell@android:/ # pm list packages | grep <part of package>
    package:com.android.providers.applications
    package:com.android.providers.calendar
    package:com.android.providers.contacts
    package:com.android.providers.downloads
    ...
    shell@android:/ # pm uninstall <package>
    shell@android:/ # exit
    shell@android:/ $ exit
    $ 
```

基本上，你登录到 android shell，成为超级用户，找到有问题的包，然后卸载它

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-02-13T16:03:58.203

就我而言，这两个应用程序使用不同的签名进行了签名。使用相同的签名解决我的问题

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-11-09T21:22:49.173

我的解决方案是选择“Build > Clean Project”菜单选项。这花了很长时间，但应用程序在完成后部署。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-12-16T10:16:47.593

尽管您已接受答案，但我也想谈谈我遇到此错误的情况。我的项目是一个启动器，它恰好使用了一些系统授权，例如 Manifest.xml 有两个项目：

```
<uses-permission android:name="android.permission.STATUS_BAR" />
 or
<uses-permission android:name="android.permission.WRITE_SECURE_SETTINGS" /> 
```

和控制台注销：

```
Error using StatusBarManagerService - java.lang.SecurityException on android.permission.STATUS_BAR 
```

最后，我的同事使用“平台调试密钥”给了我一个提示，我不确定这是否适合您，但对于此类问题的其他人来说是可能的。下图是我的解决方案： [来自项目结构的屏幕截图](https://i.stack.imgur.com/8oDis.png) 您可能还会注意到“Flavors”和“Build Types”的“Signing Config”，您可以选择“Signing”的“Name:”。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-05-16T13:43:19.800

就我而言，我有两种构建变体（一种特定于设备，一种通用）。

出现此错误时，我正在模拟器上运行特定于设备的构建。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-08-02T16:38:52.587

我做了一个稍微不同的方法。

我的工作涉及使用修改后的 Android 操作系统和修改后的 adb 工具。我正在与另一个团队的另一个应用程序（app2）“共享用户”的应用程序（app1）。为了让 Android Studio 调试器正常工作，我必须按顺序执行以下步骤：

1.  使用 Build (from Android Studio Menu) -> Generate Signed APK
2.  使用 (app1 和 app2) 使用的密钥存储信息构建 apk (app1) 的调试版本
3.  使用adb卸载之前的apk
4.  使用 adb 安装签名的 debug-apk
5.  使用 adb 在调试模式下启动应用程序
6.  将 Android Studio 调试器连接到应用

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-02-22T16:52:03.790

我遇到了同样的问题。我尝试了一切，但不幸的是，没有什么对我有用。因为它是一个测试设备，所以毫不犹豫地恢复出厂设置。哎呀。烂也没用。**Invalidate Cache/Restart**最终成功了。看起来这是一个 Android Studio 3.5 错误。

谢谢。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-03-05T17:27:43.037

我正在使用模拟器，我的解决方案是选择“AVD Manager”并从我的模拟器设备中**擦除所有数据。**安装该应用程序后。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-04-12T14:12:52.633

只需从移动设备中删除现有应用程序并使用运行重新安装。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-11-04T07:02:38.243

我的问题是通过三星安全文件夹安装了该应用程序的第二个实例！我也在那里卸载了它，我的问题就消失了。

# java - 重构重复和高度耦合的代码

> ID：15205161
> 
> 赞同：2
> 
> 时间：2013-03-04T15:33:52.817
> 
> 标签：java, design-patterns, refactoring

我有三个具体的课程-

```
public class ClassA{
    public C1 processA(C1 c1){
        //lots of ugly code that copies
        //one field to another
        //return c1
    }
    public List<C1> processA(List<C1> c1s){
        //iterate over c1s
            //call process(c1)
            //add returned value to list

        //return list
    }
}

public class ClassB{
    public C2 processB(C2 c2, C3 c3){
        //lots of ugly code that copies
        //one field to another
        //return c2
    }
    public List<C2> processB(List<Pair<C2, C3> pairs){
        //iterate over pairs
            //call process(c2, c3)
            //add returned value to list

        //return list
    }
}

public class ClassC{
    public C4 processC(C4 c4, C5 c5, C1 c1){
        //lots of ugly code that copies
        //one field to another
        //return c4
    }
    public List<C4> processC(List<Triple<C4, C5, C1> triples){
        //iterate over triples
            //call process(c4, c5, c1)
            //add returned value to list

        //return list
    }
} 
```

我想删除 process(List...) 方法中的重复。我不关心 processA(C1)、processB(C2,C3)、processC(C4,C5,C1) 方法，它们将保持不变。在重构此代码时我有哪些选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T15:53:07.617

除了代码重复之外，我还看到代码的另外两个问题，您可以解决这些问题以消除重复的代码气味：

1.  几个类的紧密耦合。虽然我不能在不了解这些类的域及其实际描述性名称的情况下确认这一点，但看到 C1-C5 的相关性足以使属性复制成为有效操作，我认为一个好的起点是重新考虑这些类的设计。例如，是否可以组合它们以[使](http://en.wikipedia.org/wiki/Class_diagram#Composition)C1-C5 共享的属性始终可以存储在新的 bean 类中？
2.  做同一件事的多种方式，或者，在传统的 OOD 术语中，它缺乏“关注点分离”。这些类不仅关心转换（C3 到 C2 等），而且还收集对集合进行操作的结果。考虑将后者的关注点分开，也许只是让客户端使用更通用的集合解决方案，例如[apache 集合的 Collections.collect()](http://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections/CollectionUtils.html#collect%28java.lang.Iterable,%20org.apache.commons.collections.Transformer,%20R%29)。因为 A 类和 B 类试图为用户做多件事，所以你有多个用于单个项目和集合的方法。（有趣的是，在像 scala 或 groovy 这样的函数式语言中，通用集合解决方案会更加优雅和简洁，从而减少对此类便捷方法的需求。）

# sql - JDBC - 结果集为假

> ID：15205164
> 
> 赞同：0
> 
> 时间：2013-03-04T15:34:02.530
> 
> 标签：sql, oracle, jdbc

我有以下问题。我正在使用 JDBC 并进行查询。但是 qry 不起作用。如果我让打印出 rs.next() 它返回 false。

相同的 qry 适用于 SQL-Developer 本身，只是不适用于 JDBC。问：

```
ResultSet rs = stmt.executeQuery("select account_id, oper_type, new_value from action where account_id = 1");
        //ResultSet rsAccount = stmt.executeQuery("select account_id from accounts");
        System.out.println("Accounts Update");
        System.out.println(rs.next());
        if(rs.next() == true){
            System.out.println("Not null");
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T16:04:40.233

好的，我“解决了”它。问题是我的项目导师忘记添加提交；在 sql 文件的末尾

# visual-c++ - C/C++：“试图读取或写入受保护的内存”异常

> ID：15205165
> 
> 赞同：0
> 
> 时间：2013-03-04T15:34:03.273
> 
> 标签：visual-c++

我的代码编译但抛出以下异常：

`An unhandled exception of type 'System, Access Violation Exception' occured Additional Information: Attempted to read or write protected memory. . .`

该错误与`s=s+a[z][r]*b[f][h]`

这里是代码的副本：

```
#include"stdafx.h"
#include"iostream"
using namespace std;
int main()
{
    int **a, **b;
    int z, r, f, h, a_r, a_c, b_r, b_c, s = 0;

    cout << "Enter the size of the matrix(nxm) :" << endl;
    cin >> a_r >> a_c;

    cout << "enter the size of the mask :" << endl;
    cin >> b_r >> b_c;

    a = (int **) malloc(10 * a_r);
    for (int i = 0; i < a_c; i++)
    {
        a[i] = (int *) malloc(10 * a_c);
    }

    b = (int **) malloc(10 * b_r);
    for (int i = 0; i < b_c; i++)
    {
        b[i] = (int *) malloc(10 * b_c);
    }

    for (int i = 0; i < a_r; i++)
    {
        for (int j = 0; j < a_c; j++)
        {
            a[i][j] = i + j;
        }
    }

    for (int i = 0; i < b_r; i++)
    {
        for (int j = 0; j < b_c; j++)
        {
            b[i][j] = i + j;
        }
    }

    int k = 1, d = 1;
    for (int i = 0; i < a_r; i++)
    {
        for (int j = 0; j < a_c; j++)
        {
            for (int n = -1; n <= 1; n++)
            {
                for (int e = -1; e <= 1; e++)
                {
                    z = i + n;
                    r = j + e;
                    f = k + n;
                    h = d + e;
                    if (z < 0 || z > a_r || r < 0 || r > a_c)
                    {
                        s = s + 0;
                    } else {
                        s = s + a[z][r] * b[f][h]; // runtime error occurs here
                    }
                }
            }
            a[i][j] = s;
            s = 0;
        }
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T15:54:19.303

Here is one problem:

```
 if (z < 0 || z > a_r || r < 0 || r > a_c) 
```

This should read:

```
 if (z < 0 || z >= a_r || r < 0 || r >= a_c) 
```

Otherwise you're potentially accessing out-of-bounds elements.

# javascript - 是否可以将具有相同键的多个 javascript 对象添加到关联数组？

> ID：15205166
> 
> 赞同：3
> 
> 时间：2013-03-04T15:34:12.000
> 
> 标签：javascript, associative-array, single-page-application

我正在开发一个后端带有 RESTful api 的 Javascript Web 应用程序 (SPA)。在我的客户端数据上下文中，我想将对象添加到我的模型图中，然后将整个图一次发送到服务器。

假设以下示例：

我的模型中有一个`Person`对象，它本身有一个 say 数组`PhoneNumbers`作为属性。现在我`Person`从 api 加载一个用于编辑并将其映射到我的模型。假设我想将一些电话号码对象添加到我的`PhoneNumbers`. 为此，我将每个数字（例如`{"id": 0, "number": 6536652226}`id 为零）添加到我的客户端模型中，并在用户单击保存时将整个图形发送到服务器。在服务器中，我将 id 为零的对象（新对象）添加到具有自动递增 id 的数据库中。

我正在根据教程做我的项目。他们做这样的事情来将对象添加到上下文中：

```
 var items = {},
                    // returns the model item produced by merging json obj into context
                    mapJsonToContext = function (json) {
                        var id = mapper.getJsonId(json);
                        var existingItem = items[id];
                        items[id] = mapper.fromDto(json, existingItem); //returns the mapped obj
                        return items[id];
                    },
                    add = function (newObj) {
                    items[newObj.id()] = newObj;
                    } 
```

问题是，如果我使用这种方法，我将无法通过 id 删除客户端中新添加但尚未保存的项目，因为所有 id 都为零！

有什么建议可以解决这个问题，还是我需要一种完全不同的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T15:59:08.917

首先，我发现了两个小误解：

1）忘记“关联数组”。数值数组是你唯一拥有的数组；其他构造只是“对象”（这不是 PHP）。

2) 如果是 JSON，它是一个**字符串**，而不是一个对象。

除此之外，您当然可以使用任意值来表示“新”（尽管我可能会使用`null`而不是`0`），只要您不使用这样的值来唯一标识尚未添加的项目。例如，这很好：

```
[
    {"id": 0, "number": "6536652226"},
    {"id": 0, "number": "9876543210"},
    {"id": 0, "number": "0123456789"}
] 
```

这不是：

```
// WRONG!!!!
{
    0: "6536652226",
    0: "9876543210",
    0: "0123456789"
} 
```

}

当然，如果他们仍然没有 ID，您将无法通过 ID 找到号码。您需要选择：

*   从数据库中检索生成的 ID 并更新您的本地数据
*   按编号删除

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T15:57:53.443

`localId`在新创建的客户端对象上创建一个属性，并在协调服务器返回的数据时将其用作您的键。显然，服务器必须将其返回`localId`给您。

# forms - 通过 oracle 应用程序服务器终止非活动表单会话

> ID：15205167
> 
> 赞同：0
> 
> 时间：2013-03-04T15:34:12.453
> 
> 标签：forms, oracle, host, taskkill

我正在尝试在 Oracle 表单中使用主机命令。我从用户那里获取进程 ID 作为输入，然后单击“确定”，表单应该终止与进程 ID 相关的会话。

PS：用户将只输入非活动的 frmweb.exe 进程 ID。

```
cmd := 'CMD /C taskkill /F /FI /pid 'process which is got as input' /IM frmweb.exe';
host(cmd) 
```

我还尝试通过将上述命令写入应用程序服务器中的 .bat 文件。尝试执行 bat 文件时，它可以正常工作。但是，当尝试通过双击应用程序服务器来运行 bat 文件时，会话被终止。

1.  在执行上述操作时，我无法终止该进程。
2.  我也想知道host命令是否成功。

您能否帮助我并指导我继续进行。Orakill 和 alter session 正在工作，但我不想使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-16T10:52:33.333

我尝试将命令执行写入文本以进行调试，并且能够找到解决方案。

```
cmd := 'CMD /C taskkill /F /FI /pid 'process which is got as input' /IM frmweb.exe>>output.txt'; 
```

在命令末尾写入了一些特殊字符，因此从 Oracle Forms 调用时命令失败。特殊字符是由于 Oracle Forms 代码中的拼写错误。

# javascript - 记住从搜索模块选择列表中选择的选项

> ID：15205176
> 
> 赞同：0
> 
> 时间：2013-03-04T15:34:36.787
> 
> 标签：javascript, forms, select, jquery-plugins, cookies

我有一个搜索表单，有多个选择列表。我需要记住用户的最后选择，并在下一页将其设置为“默认”值。我正在使用 Jquery Cookie 插件，但它只记住一个列表的一个选择。我怎样才能记住所有的选择？这是一个示例形式：

```
 <form action="/component/sobipro/" method="post" id="XTspSearchForm141" >
    <input type="submit" id="XTtop_button" name="search" value="Search" class="button" onclick="this.form.sp_search_for.focus();extSearchHelper141.extractFormValues();"/>
    <select id="XTfield_localita" name="field_localita" class="XTSPSearchSelect" >
    <option value=""> --- Seleziona Località  --- </option>
    <optgroup label="Italy">
    <option value="localita_option_1">Rome</option>
    </optgroup>
    <optgroup label="France">
    <option value="localita_option_2">Paris</option>
    </optgroup>
    </select>
    <select id="XTfield_stile" name="field_stile" class="XTSPSearchSelect" >
<option value=""> --- Seleziona Stile  --- </option>
    <option value="stile_option_1">Arte</option>
    <option value="stile_option_2">Business</option>
    </select>
    </form> 
```

这是脚本：

```
<script text= type='text/javascript'> 

jQuery(function() {

    jQuery('XTspSearchForm141').submit(function(e) {
         if (jQuery.cookie('my_cookie') ) { jQuery.cookie( 'my_cookie', null) }
        jQuery.cookie('my_cookie', 'my_value', { expires: 30 });
    });
});

</script>

<script text= type='text/javascript'> 

var $c = jQuery.noConflict();
//checks if the cookie has been set
if($c.cookie('remember_select') != null) {
// set the option to selected that corresponds to what the cookie is set to
$c('.XTSPSearchSelect option[value="' + $c.cookie('remember_select') + '"]').attr('selected', 'selected');
}
// when a new option is selected this is triggered
$c('.XTSPSearchSelect').change(function() {
// new cookie is set when the option is changed
$c.cookie('remember_select', $c('.XTSPSearchSelect option:selected').val(), { expires: 90, path: '/'});
});

</script> 
```

有任何想法吗？

# c# - 将 for 循环转换为 LINQ

> ID：15205178
> 
> 赞同：1
> 
> 时间：2013-03-04T15:34:42.043
> 
> 标签：c#, linq, try-catch

如果我有以下工作代码：

```
List<MyClass> results = new List<MyClass>();

for(int i = 0; i < source.Count; i++)
  try{ results.Add(Fetch(source[i])); }
  catch(Exception ex){ results.Add(new MyClass("poof!")); }
...
public MyClass Fetch(Object source){ ... } 
```

并且想将其重新制作成 LINQ，我该如何管理*try-catch*？如果我把它放在下面的表达式周围，它不会让我大吃一惊。我的建议是迁移到该方法中，但我不确定这是多么优化/推荐。一个人能说出来还是取决于场景的具体情况？

```
IEnumerable<String> strings = source.Select(e => Fetch(e));

public MyClass Fetch(Object source){ try{ ... } catch(){ ... } } 
```

像这样的伪代码会很酷。我正在考虑这种方法`.First()`，它是更强大的兄弟`.FirstOrDefault()`，但具有额外的容量。

```
IEnumerable<String> strings = source.Select(e => Fetch(e)).Excepted(...); 
```

我走远了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T15:38:01.433

您最好的选择是将`try / catch`块移动到一个单独的方法中并将该方法用作选择器。

```
public MyClass FetchOrDefault(object source){ 
  try { 
    return Fetch(source);
  } catch (Exception ex) { 
    return new MyClass("poof");
  }
}

// Method call syntax
var e = source.Select(x => x.FetchOrDefault(x));

// LINQ syntax
var e = from x in source select FetchOrDefault(x); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T15:40:41.743

您将获得与原始代码相同的行为

```
List<String> results = source.Select(e => { try
                                            {
                                                return Fetch(e);
                                            }
                                            catch(Exception)
                                            {
                                                 return MyClass("poof");
                                            }
                                          }).ToList(); 
```

但我认为你应该重新考虑以这种方式使用 try/catch。它具有严重的性能成本，并且不打算处理非异常情况。最好先检查是否`e`可以获取并执行类似的操作

```
List<String> results = source.Where(e => IsFetchable(e))
                             .Select(e => Fetch(e))
                             .ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T15:41:26.463

最简单的解决方案是只做你已经做过的事情，即你可以包含代码块。

```
IEnumerable<String> strings = source.Select(e =>
{
try
  {
    return Fetch(e);
  }
catch
 {
    return new MyClass("poof");
 }
}
); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T15:41:33.860

我不认为你将能够创建你的`Excepted`类，但你可以创建一个`Select`带有两个选择器的方法，一个用于错误情况：

```
public static IEnumerable<TResult> Select<TSource, TResult>(this IEnumerable<TSource> source,
    Func<TSource, TResult> selector, Func<TSource, TResult> secondarySelector)
{
    foreach (var item in source)
    {
        TResult nextValue;
        try
        {
            nextValue = selector(item);
        }
        catch
        {
            nextValue = secondarySelector(item);
        }

        yield return nextValue;
    }
} 
```

然后它将允许您执行以下操作：

```
var results = source.Select(item => Fetch(item)
    , item => new MyClass("poof!"))
    .ToList(); 
```

如果合适的话，您的辅助选择器也可以将异常作为参数。

# user-management - XWiki 忽略 XWikiAllGroup 的全局编辑权限

> ID：15205186
> 
> 赞同：0
> 
> 时间：2013-03-04T15:35:16.163
> 
> 标签：user-management, rights, xwiki

我们在 4.5 版中使用 XWiki，我想默认为每个用户设置编辑权限。但是通过管理面板对 XWikiAllGroup 全局设置编辑权限不会生效。我仍然需要在每个空间上明确添加编辑权限。这是一个错误还是我误解了 XWikis 权限管理中的任何内容？

谢谢！

海因

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T07:16:23.760

当您在 xwiki 中创建任何空间时，您需要为不同的组设置写入权限。这里有一些关于 xwiki 权限的事情我想告诉你.. 1> 每当用户第一次登录时，他就会进入 XWikiAllGroup，因为这个组默认拥有注册用户的权限，你可以删除并授予其他组.

2>您可以创建自己的组并根据您的要求授予用户权限。这是其中最好的部分。您需要去空间并设置组权限。

始终将用户保留在一个组中以避免任何并发症。

# javascript - 如何在 Javascript 中正确更新购物车总数？

> ID：15205188
> 
> 赞同：0
> 
> 时间：2013-03-04T15:35:22.830
> 
> 标签：javascript, performance, shopping-cart

我正在寻找一些 Javascript，它将：

*   更新所选产品的购物车总数（下拉菜单）和输入的数量

（*安全性将由后端 PHP 处理。我在过去三天里尝试过这个，但显然我的代码太糟糕了，我很惭愧再次在这里重新发布它）

* * *

我的想法：
- 创建一个购物车对象 - 创建一个
函数来重新计算发生的任何更改的总数
（我想不出任何其他需要的东西，因为 javascript 只是将它传递给 PHP 脚本以进行检查）

有谁知道一些 javascript 可以完成我寻求的工作？我的想法正确吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T16:14:25.873

下面是使用显示模块模式构建的示例购物车 javascript 对象。

```
var shoppingCart = function () {
        var obj = {}, items = [];

        obj.AddItem = function (itemNo, quantity, price) {
            var item = {};
            item.itemNo = itemNo;
            item.quantity = quantity;
            item.price = price;
            items.push(item)
        };

        obj.GetAllItems = function () {
            return items;
        };

        obj.GetItemByNo = function (item) {
            for (var i = 0; i < items.length; i++) {
                if (items[i].itemNo === item)
                    return item[i];
            }
            return null;
        };

        obj.CalculateTotal = function () {
            var total = 0;
            for (var i = 0; i < items.length; i++) {
                total = total + (items[i].quantity * items[i].price);
            }
            return total;
        };

        return obj;
    };
    var cart = new shoppingCart(); 
```

使用 AddItem 方法添加项目，包括在 UI 中有用的其他属性。

```
shoppingcart.AddItem(2,4,2.4); 
```

获取购物车中的商品列表

```
var items =  shoppingcart.GetAllItems(); 
```

计算购物车中商品的总价

```
var total = shoppingcart.CalculateTotal(); 
```

请注意，我已在此处输入此代码，因此可能包含拼写错误，并且我建议在添加商品之前将价格和数量的数据类型验证为数字。

# javascript - 如何使用jquery将一个部门附加到一个部门

> ID：15205191
> 
> 赞同：0
> 
> 时间：2013-03-04T15:35:34.703
> 
> 标签：javascript, jquery

`.append()`我正在尝试使用jquery将一个部门附加到一个部门。但是我的代码没有附加除法。

我的代码是：

```
 for(var k = 0,len=data.shareInfo.length;k<len;k += 1){
    var newcommhtml = '<div id="S0'+thecid+'" class="snew">';
    newcommhtml = newcommhtml + '<div class="author-image"><img src="data:image/jpeg;base64,'+data.shareInfo[k].senderPicture+'" alt="'+data.shareInfo[k].uname+'" width="100%" height="100%" class="ava"></div><span>'+data.shareInfo[k].uname+' shared the image '+data.shareInfo[k].imname+'</span>';
    newcommhtml = newcommhtml + '<div class="s-content"><div class="s-message"><span>'+nl2br(data.shareInfo[k].message+'</span></div><div class="shpicture">');
    newcommhtml = newcommhtml + '<img src="data:image/jpeg;base64,'+data.shareInfo[k].image+'" alt="'+data.shareInfo[k].imname+'" width="100%" height="100%" data-id="'+data.shareInfo[k].id+'" data-alid="'+data.shareInfo[k].alid+'" data-shareid="'+data.shareInfo[k].shareId+'">';
    newcommhtml = newcommhtml + '</div></div>';
    var thelm = "#S0"+thecid;
    $('#spscrl').append(newcommhtml);
    $(thelm).hide().fadeIn('slow');
    var newcommhtml=null;
    newcommhtml ='<div class="SPcommentbox">';
    newcommhtml = newcommhtml + '<div class="comment"><div class="commenter-image">';
    newcommhtml = newcommhtml +'</div><div class="commentername">';
    newcommhtml = newcommhtml +'</div><div class="addcomment"><input type ="text" placeholder="Write a comment..." class="commentbox"></input></div></div>';
    var selector='#S'+thecid;
    $(selector).append(newcommhtml);
    thecid++;
    } 
```

该代码将能够附加`divs`到`#spscrl`. 但它无法附加到`selector` `(#S+thecid)`，如果我尝试使用它添加`class`，`.snew`它会附加`division`. **请注意，**我正在使用 jQuery 添加 div ...

请任何人帮我解决这个问题...谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T15:39:57.860

您将 ID 设置`newcommhtml`为`S0`+ `theCid`，因此首先是 's'，*然后是零*，然后是 的内容`theCid`。稍后，您尝试重新创建该 ID，**但忘记了零**！这可以解释为什么这种方法第一次有效，但第二次无效。

所以改变：

```
var selector='#S'+thecid; 
```

进入：

```
var selector='#S0'+thecid; // THE ZERO! 
```

但是如果没有看到`theCid`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T15:40:34.830

你`selector`的变量是错误的。

此外，您还可以使用更多调整来提高代码的可读性，例如使用[jQuery.each](http://api.jquery.com/jQuery.each/)进行迭代、使用`+=`运算符进行连接以及使用方法链接等`ar thelm = $(newcommhtml).hide().appendTo('#spscrl').fadeIn('slow');`

```
$.each(data.shareInfo, function(i, v) {
    var newcommhtml = '<div id="S0' + thecid + '" class="snew">';
    newcommhtml += '<div class="author-image"><img src="data:image/jpeg;base64,'
            + v.senderPicture
            + '" alt="'
            + v.uname
            + '" width="100%" height="100%" class="ava"></div><span>'
            + v.uname
            + ' shared the image ' + v.imname + '</span>';
    newcommhtml += '<div class="s-content"><div class="s-message"><span>'
            + nl2br(v.message + '</span></div><div class="shpicture">');
    newcommhtml += '<img src="data:image/jpeg;base64,' + v.image + '" alt="'
            + v.imname + '" width="100%" height="100%" data-id="' + v.id
            + '" data-alid="' + v.alid + '" data-shareid="' + v.shareId + '">';
    newcommhtml += '</div></div>';

    $('#spscrl').append(newcommhtml);

    var thelm = $(newcommhtml).hide().appendTo('#spscrl').fadeIn('slow');

    newcommhtml = '<div class="SPcommentbox">';
    newcommhtml += '<div class="comment"><div class="commenter-image">';
    newcommhtml += '</div><div class="commentername">';
    newcommhtml += '</div><div class="addcomment"><input type ="text" placeholder="Write a comment..." class="commentbox"></input></div></div>';
    $(newcommhtml).appendTo(thelm);
    thecid++;
}); 
```

无需使用`var newcommhtml`两次或使用`newcommhtml=null`；

# android - LoaderCallbacks 旋转后丢失

> ID：15205193
> 
> 赞同：0
> 
> 时间：2013-03-04T15:35:39.983
> 
> 标签：android, android-loadermanager, android-support-library, android-loader, android-configchanges

每次使用加载器时都会遇到这个问题。如果我启动我的`AsyncTaskLoader`然后旋转屏幕（没关系一次或几次）`onLoaderFinished()`不会被调用。`loadInBackground()`完成它的工作但`onLoaderFinished()`没有被调用。似乎错过了回调，但在活动中`onCreate()`我有：

```
LoaderManager lm = getSupportLoaderManager();
if (lm.getLoader(LOADER_FLIGHTS) != null) {
    lm.initLoader(LOADER_FLIGHTS, null, mFlightsLoaderCallbacks);
} 
```

回调由活动或字段实现无关紧要。就我而言，我使用字段：

```
LoaderCallbacks<SearchResult> mFlightsLoaderCallbacks = new LoaderCallbacks<SearchResult>() { 
```

有时它工作得很好，但在某些设备上我又遇到了这个麻烦。

我在 Android 错误跟踪器中进行了搜索，但没有发现任何有用的信息。

这是我的错误吗？我该如何纠正？

**编辑：**

```
private Handler mHandler = new Handler();

@Override
public void onLoadFinished(Loader<SearchResult> loader, SearchResult res) {
    mHandler.post(new Runnable() {

        @Override
        public void run() {
            dismissProgress(R.string.dlg_wait_flights);
        }
    });
    mResult = res;
    Helper.Log.d(TAG, "Loader.onLoadFinished."); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T15:54:43.563

不要将 initLoader 调用包装在 if 语句中。实际上，如果您在调用 initLoader 之前就期望加载器不为空，我什至不确定如何调用 initLoader。

# java - JTextArea 中的日语

> ID：15205194
> 
> 赞同：4
> 
> 时间：2013-03-04T15:35:44.763
> 
> 标签：java, database, jtextarea, truetype

我有一个包含日语单词的数据库。另外，我有读取这些单词并将它们放入 JTextArea 的算法。问题是我看到的是矩形而不是日本标志。但是当我从 JTA 复制这样一组矩形 (ctrl+c) 并将它们放入例如。TotalCommander 或 Winword 文件的命令输入，出现的标志正确显示。但是只在Win7下。因为我在winXP下的虚拟机上运行Eclipse，所以我有能力复制矩形也可以在winXP下命令输入TotalCommander。在我的 Java 应用程序中仍然存在矩形。这意味着在 JTA 中有关于特定标志的信息，但 JTA 无法解释此信息。

当然我已经安装了正确的字体。

我用字体尝试了很多方法：

```
textArea.setFont(new Font(blablabla)); 
```

和类似的，但没有效果。我应该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T14:26:17.790

您的 JTextArea 的问题很可能是您使用的字体不适用于 UTF-8 和日语。该字体不提供从 UTF-8 值到字符的映射表。即 0x41 在 ASCII 中，在 UTF-8 中，甚至在 SHIFT-JIS 中是字母“A”——但你只是链接的字体，将 0x41 解析为汉字字符。并且整个字体根本不包含平假名和片假名字符 - 另请参阅您从[此处](http://www.dafont.com/font-comment.php?file=japanese)获得此字体的网站上的评论部分。

> 使用 ChapMap 后，它有一个 WSIfonts TAG 并且 ＮＯＴ！支持所有的汉字它只有 90 个字符，每个字符分配 1 个字符，除了 Caps。

是中文字体，不是日文字体。但它甚至不会提供所有中文字符，并且没有包含有用的映射表 - 所以它非常没用。

尝试使用另一种字体 - 如果它包含真正的日文字符并提供适用于 UTF-8 的映射表，那么它应该可以正常工作。

您可以找到可以使用的字体，即[here](http://www.wazu.jp/gallery/Fonts_Japanese.html)

# c# - JavaScriptSerializer：无法反序列化在属性名称中使用 @ 符号的 JSON

> ID：15205197
> 
> 赞同：0
> 
> 时间：2013-03-04T15:35:52.353
> 
> 标签：c#, .net, javascriptserializer

我正在使用通过 REST 公开 API 的第 3 方服务器（因此无法更改 JSON）。它返回的 JSON 格式如下：

```
 [
         {
              "@noun":"tag",
              "@version":0,
              "@tag":"myFoo"
         }
    ] 
```

我创建了一个 C# 对象来表示这个项目

```
 public class ResponseItem
    {
        public string noun {get;set;}
        .....
    } 
```

但是，当我尝试使用 JavaScriptSerializer 反序列化此对象时，不会分配属性。序列化程序似乎无法处理名称前带有 @ 符号的属性。

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T16:23:36.017

好的，经过一番折腾，我放弃了 JavaScriptSerializer。我切换到 DataContractJsonSerializer。然后，我使用定义明确的数据协定并使用 DataMember 属性来指定名称。

IE

```
[DataContract]
public class ResponseItem
{
    [DataMember(Name="@noun")]
    public string Noun {get;set;}
    ....
} 
```

可能有更好/不同的方式，但这是可行的并且是可接受的解决方案

# c# - 类似绘画的 Windows 应用程序的设计注意事项

> ID：15205198
> 
> 赞同：1
> 
> 时间：2013-03-04T15:35:52.947
> 
> 标签：c#

我正在为用 C 编写的旧开源流体建模引擎开发新的前端。我正在使用 C# 和 WPF。应用程序网络生成需要用户绘制管道、水库、节点、罐等网络。该应用程序或多或少是一个花哨的绘画版本；）

现在我的图形设置如下。我有一个嵌入的 win-forms 面板，它有 mouseclick、mousemove 和paint 事件。鼠标单击将单击的坐标保存到单例类中的数组中，然后通过 触发绘制事件`invalidate();`。然后，paint 事件循环遍历数组并通过以下方式绘制数组中的所有节点坐标：`g.FillEllipse(x,y,20,20);` 用户可以单击节点并通过我编写的名为 的函数调出菜单`DoesPointExist(xCord, yCord);`。它遍历坐标数组，如果 xcord 和 ycord 都在单击坐标的 5px 范围内，则返回 true。一个有点过时的解决方案，但它似乎工作得很好。

到目前为止，这对我来说效果很好。但在未来，我将不得不为每个节点（或面板上的圆圈）赋予越来越多的属性。没什么花哨的，只是必须与每个节点相关联的数值，例如高程。此外，我将需要添加一个选项以在某些时候删除节点。

我可以通过将已删除行的所有值设置为 0 并在paintevents 循环中放入 if 语句以不绘制已删除点来做到这一点，或者甚至弄清楚如何摆脱行期间并将所有其他行向下移动。

我的问题是否有更智能和 OOP 类型的方式来解决这个问题？循环和数组似乎有点过时，必须有更好的方法来利用 C# 功能。我可以设置某种对象或类来简化这个过程吗？该数组很好，但到最后它将是 40-50 列。我的背景更多地基于使用 C 等较低级别语言的函数类型编程。我的程序似乎非常裸露对象和类，而不是用于全局数据的单例玻璃。

我知道给猫剥皮的方法有很多种。但重要的是，我编写的代码对于未来的工程师来说是可访问且易于修改的，因此我想在 OOP 范式中添加尽可能多的内容。我当前的代码非常实用……但不是很整洁。

绘制事件代码：

```
private void wfSurface_Paint(object sender, System.Windows.Forms.PaintEventArgs e)
    {
        Graphics g;
        Graphics h;
        g = wfSurface.CreateGraphics();
        h = wfSurface.CreateGraphics();
        epanet epa = epanet.GetInstance();
        SolidBrush black = new SolidBrush(System.Drawing.Color.Black);
        SolidBrush blue = new SolidBrush(System.Drawing.Color.Pink);
        SolidBrush green = new SolidBrush(System.Drawing.Color.Green);
        System.Drawing.Pen line = new System.Drawing.Pen(System.Drawing.Color.FromArgb(255, 0, 0, 0));

        //Loop to draw vertical grid lines
        for (int f = 50; f < 1100; f += 50)
        {
            e.Graphics.DrawLine(line, f, 0, f, 750);
        }

        //Loop to draw vertical grid lines
        for (int d = 50; d < 750; d += 50)
        {
            e.Graphics.DrawLine(line, 0, d, 1100, d);
        }

        //Loop nodes, tanks, and resevoirs
        for (int L = 1; L < index; L += 1)
        {
            g.FillEllipse(black, Convert.ToInt32(epa.newNodeArray[L, 0] - 8), Convert.ToInt32(epa.newNodeArray[L, 1] - 8), 19, 19);
            h.FillEllipse(blue, Convert.ToInt32(epa.newNodeArray[L, 0] - 6), Convert.ToInt32(epa.newNodeArray[L, 1] - 6), 15, 15);
        }

        for (int b = 1; b < resIndex; b += 1)
        {
            g.FillRectangle(green, Convert.ToInt32(epa.ResArray[b, 0] - 8), Convert.ToInt32(epa.ResArray[b, 1] - 8), 16, 16);
        }
        for (int c = 1; c < tankIndex; c += 1)
        {
            g.FillRectangle(black, Convert.ToInt32(epa.tankArray[c, 0] - 8), Convert.ToInt32(epa.tankArray[c, 1] - 8), 20, 20);
            g.FillRectangle(green, Convert.ToInt32(epa.tankArray[c, 0] - 6), Convert.ToInt32(epa.tankArray[c, 1] - 6), 16, 16);
        }
} 
```

点击事件代码：

```
private void wfSurface_MouseClick(object sender, System.Windows.Forms.MouseEventArgs e)
    {
        //Initialize epanet and save clicked coordinates to singleton class
        epanet epa = epanet.GetInstance();
        epa.xCord = e.X;
        epa.yCord = e.Y;

        //Check if point exists, if does open property window, doesn't do whatever drawing control is selected
        if (epa.DoesPointExist(e.X, e.Y, index) == false)
        {
            switch (epa.controlSelected)
            {
                case "Node":
                    epa.newSetCords(index, e.X, e.Y);
                    wfSurface.Invalidate();
                    index += 1;

                    break;

                case "Res":
                    epa.setResCords(resIndex, e.X, e.Y);
                    wfSurface.Invalidate();
                    resIndex += 1;
                    wfPanel.Cursor = Cursors.Arrow;
                    break;

                case "Tank":
                    epa.setTankCords(tankIndex, e.X, e.Y);
                    wfSurface.Invalidate();
                    tankIndex += 1;
                    break;

                case "Pointer":
                    break;

                default:
                    //epa.newSetCords(index, e.X, e.Y);
                    wfSurface.Invalidate();
                    break;
            }

        }
        else if (epa.DoesPointExist(e.X, e.Y, index) == true)
        {

            MessageBox.Show("Point Already Exists");
            if (epa.propOpen == false)
            {
                // Open control properties in right pannel
            }

        } 
```

单例类的代码：

```
public class epanet 
```

{ 私有静态 epanet 实例 = 新 epanet();

```
private epanet() { }

public static epanet GetInstance()
{
    return instance;
}

//Microsoft.Win32.SaveFileDialog save = new Microsoft.Win32.SaveFileDialog();

//Network Node Data
public int nodeIndex { get; set; }
public int newNodeIndex { get; set; }
public double xCord { get; set; }
public double yCord { get; set; }
public double x1Cord { get; set; }
public double y1Cord { get; set; }
public int selectedPoint { get; set; }
//public List<double> nodeList = new List<double>();

//Saving Data
public int fileCopyNum { get; set; }
public string filename { get; set; }
public string path { get; set; }
public string fullFileName { get; set; }

//Window Condition Data
public bool drawSurfStatus { get; set; }
public bool windowOpen { get; set; }
public bool OpenClicked { get; set; }
public bool saveASed { get; set; }
public bool newClicked { get; set; }
public bool propOpen { get; set; }

//Drawing Controls
public string controlSelected { get; set; }

//Declare Array to store coordinates
public double[,] nodeArray = new double[100000, 3];
public double[,] newNodeArray = new double[100000, 7];
public double[,] ResArray = new double[100000, 7];
public double[,] tankArray = new double[100000, 7];

public void newSetCords(int newNodeIndex, double xCord, double yCord)
{
    newNodeArray[newNodeIndex, 0] = xCord;
    newNodeArray[newNodeIndex, 1] = yCord;
    newNodeArray[nodeIndex, 2] = nodeIndex;

}

public void setResCords(int newNodeIndex, double xCord, double yCord)
{
    ResArray[newNodeIndex, 0] = xCord;
    ResArray[newNodeIndex, 1] = yCord;
    ResArray[nodeIndex, 2] = nodeIndex;

}

public void setTankCords(int newNodeIndex, double xCord, double yCord)
{
    tankArray[newNodeIndex, 0] = xCord;
    tankArray[newNodeIndex, 1] = yCord;
    tankArray[nodeIndex, 2] = nodeIndex;

}

public void setCords(int nodeIndex, double xCord, double yCord)
{
    nodeArray[nodeIndex, 0] = xCord;
    nodeArray[nodeIndex, 1] = yCord;
    //nodeArray[nodeIndex, 2] = nodeIndex;

}

public bool DoesPointExist(double xcord, double ycord, int index)
{
    int count = 1;
    bool outcome = false;        
    while (count < index)
    {            
        if (Math.Abs(xcord - newNodeArray[count, 0]) < 20)
        {
            if (Math.Abs(ycord - newNodeArray[count, 1]) < 20 )
            {                    
                outcome = true;
                selectedPoint = count;
                index = 0;                    
            }
        }
        count += 1;
    }

    return outcome;        
} 
```

正如我所说，一切正常。我只是在寻找一些关于是否有更专业的方法来做这件事的反馈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T15:48:20.587

如果您使用 C 进行过很多编程，那么您应该熟悉链表的概念。它比数组有用得多，因为它允许您在恒定时间内从列表中的任何点删除。在 C# 中，您需要研究`System.Collections.Generic.List`如何使用它。

除此之外，标准的面向对象设计是查看您的功能需求并寻找名词，这些应该成为您的类。我在您的问题中看到的最大名词是“节点”。因此，与其拥有一个顶点数组，不如拥有一个节点链表。每个节点都可以具有坐标和高程等属性，如果您需要更多属性，则可以扩展。注意，如果你发现你的 Node 类变得很麻烦，这是一个巨大的迹象，你应该把其他类分开。任何逻辑分组都应该非常连贯地呈现出来。

浏览您包含的 epanet 类。您具有处理文件的功能（文件名，是否另存为等）。这应该变成一个类（在一个单独的文件中），只是为了帮助保持文件的可维护性。您拥有的数组序列，所有相同的主要维度都定义了您的一般节点结构。将这些以及对它们进行操作的函数放入您的 Node 类中。你已经有了有效的逻辑；这对下一位读者来说并不直观。花一点时间质疑所有代码的位置，并问自己是否可以将任何逻辑分组放在一起。

如果您想将自己限制在 Winforms/GDI+，您的一般流程很好，而且您显然可以这样做，但是由于您是在 WPF 中编程，您可能希望在您的项目还很年轻的时候加紧实际使用它. [GDI+ 和 WPF 之间的 C# 过渡](https://stackoverflow.com/questions/271686/c-sharp-transition-between-gdi-and-wpf)提供了一些提示，特别是已接受答案的建议 5。网络上还有大量其他参考资料。一个快速的谷歌搜索带来了[WPF 用户控件的手动呈现](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/94ddd25e-7093-4986-b8c8-b647924251f6/)，当然还有[MSDN](http://msdn.microsoft.com/en-us/library/ms745025.aspx)。我会将 WPF 建议留给比我更了解它的其他人。

如果您还不知道要使用 GDI 还是 WPF，那么您肯定需要一个 GDIRenderer 类。理想情况下，您应该有一个 IRenderer 接口和一个实现该接口的 GDIRenderer 类，尽管我确实发现实际上，当您有第二个实现该接口的对象时，创建该接口会更方便。在任何情况下，您的渲染器类都应该将节点列表作为输入。（您目前拥有全局变量，但通常最好只让一部分代码访问它需要的内容，即避免全局变量。）在您当前的代码中，GDIRenderer 将简单地包含并注册您的 OnPaint 函数。但是通过这样做，您将所有渲染隔离到一个类中（应该在它自己的文件中）。然后，如果您决定继续使用 WPF，您可以将 GDIRenderer 替换为 WPFRenderer，它可能包含处理 OnRender 功能所需的所有代码。您想尽一切可能将业务逻辑与渲染方式分开。

# python - 在python中将字符串保存到二进制文件

> ID：15205199
> 
> 赞同：1
> 
> 时间：2013-03-04T15:36:03.377
> 
> 标签：python, string, binary, save

我想知道 Python 编程的一个非常基本的东西，因为我现在是一个非常基本的程序员）：如何将结果（列表、字符串或其他）保存到 Python 中的文件中？我一直在寻找很多，但我找不到任何好的答案。我在考虑“.write ()”方法，但是（例如）它似乎不适用于字符串，但我也不知道它应该做什么。所以，我的情况是我有二进制文件，我想编辑它，因此我发现很容易将它们转换为字符串，修改它们，现在我想将它们保存 i）回二进制文件（jpegs 图像） ii) 在我想要的文件夹中。我该怎么做？请我需要一些帮助。

**更新**

这是我要运行的脚本：

```
import os, sys

newpath= r'C:/Users/Umberto/Desktop/temporary'
if not os.path.exists (newpath):
    os.makedirs (newpath)

data= open ('C:/Users/Umberto/Desktop/Prove_Script/Varie/_BR_Browse.001_2065642654_1.BINARY', 'rb+')
edit_data= str (data.read () )
out_dir= os.path.join (newpath, 'feed', 'address')

data.close ()

# do my edits in a secon time...

edit_data.write (newpath)

edit_data.close () 
```

我得到的错误是：

```
AttributeError: 'str' object has no attribute 'write' 
```

**更新_2**

我尝试使用pickle模块序列化我的二进制文件，修改它并在最后保存它，但仍然没有让它工作......这是我迄今为止一直在尝试的：

```
import cPickle as pickle
binary= open ('C:\Users\Umberto\Desktop\Prove_Script\Varie\_BR_Browse.001_2065642654_1.BINARY', 'rb')
out= open ('C:\Users\Umberto\Desktop\Prove_Script\Varie\preview.txt', 'wb')
pickle.dump (binary, out, 1)

TypeError                                 Traceback (most recent call last)
<ipython-input-6-981b17a6ad99> in <module>()
----> 1 pprint.pprint (pickle.dump (binary, out, 1))

C:\Python27\ArcGIS10.1\lib\copy_reg.pyc in _reduce_ex(self, proto)
     68     else:
     69         if base is self.__class__:
---> 70             raise TypeError, "can't pickle %s objects" % base.__name__
     71         state = base(self)
     72     args = (self.__class__, base, state)

TypeError: can't pickle file objects 
```

我没有得到的另一件事是，如果我应该创建一个指向的文件（在我的情况下，我必须创建“out”，否则我不会为 pickle 方法提供正确的参数）或者没有必要. 希望我越来越接近解决方案。

PS：我也尝试了pickle.dumps（），但没有取得更好的结果......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-04T15:44:35.380

如果您正在打开一个二进制文件并保存另一个二进制文件，您可以执行以下操作：

```
with open('file.jpg', 'rb') as jpgFile:
    contents = jpgFile.read()

contents = (some operations here)

with open('file2.jpg', 'wb') as jpgFile:
    jpgFile.write(contents) 
```

一些评论：

*   'rb' 和 'wb' 分别表示以二进制模式读取和写入。[有关在此处](http://docs.python.org/2/tutorial/inputoutput.html#reading-and-writing-files)处理二进制文件时为什么推荐使用“b”的更多信息。
*   Python 的[with 语句](http://docs.python.org/2/reference/compound_stmts.html#the-with-statement)负责在退出块时关闭文件。

如果您需要保存列表、字符串或其他对象，并在以后检索它们，请使用其他人指出的[pickle 。](http://docs.python.org/2/library/pickle.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T15:45:39.313

您可以使用名为“pickle”的标准 python 模块。

你可以在这里阅读：[pickle 文档](http://docs.python.org/2/library/pickle.html#module-pickle)

读写任何数据结构都会很容易

```
pickle.dump(obj, file_handler) # for serialize object to file
pickle.load(file)              # for deserialize from file 
```

或者您可以序列化为字符串：pickle.dumps(..) 并从中加载：pickle.loads(...)

# vhdl - clk'event vs 上升沿（）

> ID：15205202
> 
> 赞同：43
> 
> 时间：2013-03-04T15:36:18.213
> 
> 标签：vhdl

我一直用它来检测上升沿：

`if (clk'event and clk='1') then`

但这也可以使用：

`if rising_edge(clk) then`

推荐阅读[这篇文章](http://vhdlguru.blogspot.com/2010/04/difference-between-risingedgeclk-and.html)，`rising_edge(clk)`但也有[一条评论](http://vhdlguru.blogspot.com.es/2010/04/difference-between-risingedgeclk-and.html?showComment=1359749429783#c5987704624802319840)指出这`rising_edge(clk)`可能会导致错误的行为。

我无法决定将来选择哪一个，继续`(clk'event and clk='1')`还是采用`rising_edge(clk)`。

有这两个方面的实际经验吗？有什么偏好吗？

谢谢！

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-03-04T16:11:54.010

上升沿定义为：

```
FUNCTION rising_edge  (SIGNAL s : std_ulogic) RETURN BOOLEAN IS
BEGIN
    RETURN (s'EVENT AND (To_X01(s) = '1') AND
                        (To_X01(s'LAST_VALUE) = '0'));
END;

FUNCTION To_X01  ( s : std_ulogic ) RETURN  X01 IS
BEGIN
    RETURN (cvt_to_x01(s));
END;

CONSTANT cvt_to_x01 : logic_x01_table := (
                     'X',  -- 'U'
                     'X',  -- 'X'
                     '0',  -- '0'
                     '1',  -- '1'
                     'X',  -- 'Z'
                     'X',  -- 'W'
                     '0',  -- 'L'
                     '1',  -- 'H'
                     'X'   -- '-'
                    ); 
```

如果你的时钟只从 0 到 1，从 1 到 0，那么rising_edge 将产生相同的代码。否则，您可以解释差异。

就个人而言，我的时钟只从 0 变为 1，反之亦然。我发现`rising_edge(clk)`比`(clk'event and clk = '1')`变体更具描述性。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-03-04T16:31:03.803

链接的注释不正确：“L”到“1”将产生上升沿。

此外，如果您的时钟信号从“H”转换为“1”，`rising_edge(clk)`则（正确）不会触发，而`(clk'event and clk = '1')`（错误）会触发。

诚然，这可能看起来像是一个人为的例子，但我已经看到时钟波形在真实硬件中这样做，因为其他地方出现故障。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-08-06T23:45:41.270

**实际例子：**

想象一下，您正在建模类似 I2C 总线（`SCL`需要时钟和`SDA`数据的信号），其中总线是三态的，并且两个网络都有弱上拉。您的测试台应该对 PCB 上的上拉电阻建模，其值为“H”。

```
scl <= 'H'; -- Testbench resistor pullup 
```

您的 I2C 主设备或从设备可以将总线驱动到“1”或“0”，或者通过分配“Z”将其置之不理

将“1”分配给 SCL 网络将导致事件发生，因为 SCL 的值发生了变化。

*   如果你有一行代码依赖于`(scl'event and scl = '1')`，那么你会得到一个错误的触发器。

*   如果您有一行代码依赖于 `rising_edge(scl)`，那么您将不会得到错误触发器。

继续该示例：您将“0”分配给 SCL，然后分配“Z”。SCL 网络变为“0”，然后返回“H”。

在这里，从 '1' 到 '0' 不会触发任何一种情况，但是从 '0' 到 'H' 会触发`rising_edge(scl)`条件（正确），但`(scl'event and scl = '1')`情况会错过它（不正确）。

**一般建议：**

使用`rising_edge(clk)`and`falling_edge(clk)`而不是`clk'event`所有代码。

# c# - 如何将 C++ 代码包装到具有大量 float*（表示点）的 CLI 中？

> ID：15205205
> 
> 赞同：3
> 
> 时间：2013-03-04T15:36:25.013
> 
> 标签：c#, c++, .net, c++-cli, wrapper

所以我有一个库，其中包含许多 C 风格的函数，描述为：

```
/// Finds the polygon nearest to the specified center point.
///  @param[in]     center      The center of the search box. [(x, y, z)]
///  @param[in]     extents     The search distance along each axis. [(x, y, z)]
///  @param[in]     filter      The polygon filter to apply to the query.
///  @param[out]    nearestRef  The reference id of the nearest polygon.
///  @param[out]    nearestPt   The nearest point on the polygon. [opt] [(x, y, z)]
/// @returns The status flags for the query.
dtStatus findNearestPoly(const float* center, const float* extents,
                         const dtQueryFilter* filter,
                         dtPolyRef* nearestRef, float* nearestPt) const; 
```

我想知道如何将 tham 包装在我的 CLI 包装器中以使 C# 可调用？在这里，我的主要兴趣是`const float* center`[(x, y, z)] 指针 - 如何在 C# 中形成这样的指针，如何在 C# 中将其取出？那么通常如何`float*`在 CLI 代码中使用以使其在 C# 代码中可用（输入和输出）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T22:13:41.400

跟进其他两个答案，这是一些实际代码的样子

**Poly.cpp** (C++/CLI)

```
#include "stdafx.h"
#include "Poly.h"

#include "findNearestPoly.h"

using namespace System;

namespace CStyleArrays
{
    public ref class Poly abstract sealed // "abstract sealed" = static
    {
    public:
        static int FindNearest(Tuple<float, float, float>^ center, Tuple<float, float, float>^ extents,
            [Runtime::InteropServices::Out] Tuple<float, float, float>^% nearestPt) {
                const float pCenter[] = { center->Item1, center->Item2, center->Item3};
                const float pExtents[] = { extents->Item1, extents->Item2, extents->Item3};
                float pNearestPt[3];

                int retval = findNearestPoly(pCenter, pExtents, nullptr /*filter*/, nullptr /*nearestRef*/, pNearestPt);
                // if (retval == success)
                {
                    nearestPt = Tuple::Create(pNearestPt[0], pNearestPt[1], pNearestPt[2]);
                }

                return retval;
        }

        static int FindNearest(cli::array<float>^ center, cli::array<float>^ extents, cli::array<float>^% nearestPt) {
        if ((center->Length != 3) || (extents->Length != 3) || (nearestPt->Length != 3))
            throw gcnew ArgumentOutOfRangeException();

            const pin_ptr<float> pinCenter = &center[0]; // "... if any element of an array is pinned, then the whole array is also pinned ..."
            const float* pCenter = pinCenter;
            const pin_ptr<float> pinExtents = &extents[0];
            const float* pExtents = pinExtents;
            const pin_ptr<float> pinNearestPt = &nearestPt[0];
            float* pNearestPt = pinNearestPt;

        return findNearestPoly(pCenter, pExtents, nullptr /*filter*/, nullptr /*nearestRef*/, pNearestPt);
        }
    };
} 
```

示例 C# 将是

```
namespace TestCStyleArrays
{
    class Program
    {
        static void Main(string[] args)
        {
            {
                var center = Tuple.Create(0f, 1f, 2f);
                var extents = Tuple.Create(10f, 20f, 30f);
                Tuple<float, float, float> nearestPt;
                CStyleArrays.Poly.FindNearest(center, extents, out nearestPt);
            }

            {
                var center = new[] { 0f, 1f, 2f };
                var extents = new[] { 10f, 20f, 30f };
                var nearestPt = new float[3];
                CStyleArrays.Poly.FindNearest(center, extents, ref nearestPt);
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T21:14:28.133

要添加到@Serious 的帖子，示例函数原型可能是：

```
dtStatus findNearestPoly(array<float> ^center, 
                         array<float> ^extents, 
                         array<dtQueryFilter> ^filter,
                         [out] dtPolyRef %nearestRef,
                         [out] array<float> ^%nearestPt) const; 
```

对于此示例，我假设 dtQueryFilter、dtStatus 和 dtPolyRef 是枚举或其他一些可直接传递的类型。如果它们是类，则需要创建一个合适的 ref 类，并且引用将包含`^`指针。

然后，要使用数组数据，您需要使用`pin_ptr`GC 锁定它们：

```
pin_ptr<float> ppf = &center[0];
float *pCenter = ppf; 
```

注意，要使用 [out] 参数，您必须：

```
using namespace System::Runtime::InteropServices; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T15:57:50.370

使用简单的**cli::array<float>**或**Tuple<float,float,float>** ：http : [//msdn.microsoft.com/en-us/library/dd383822.aspx](http://msdn.microsoft.com/en-us/library/dd383822.aspx)

**元组是在****mscorlib**程序集中定义的，因此在这两种情况下您都不会提取任何额外的依赖项。

# c# - 不安全代码块后变量丢失

> ID：15205206
> 
> 赞同：0
> 
> 时间：2013-03-04T15:36:26.537
> 
> 标签：c#, pointers, unsafe

我有一个非常奇怪的问题。这是我的代码：

```
<declare E,JV>

<perform some actions with E>
JV.Math_Mul(E); 
```

////

```
public new void Math_Mul(Matrix a)
    {

        double[,] vC = new double[a.ColCount, this.RowCount];

        externExtensions.MatMul(vC,a.Values ,this.Values, a.RowCount, this.ColCount, a.ColCount);
        Values = vC;

        CopyB(B.Values,vC);
     }

    static unsafe void CopyB(double[,] B, double[,] val)
    {
        int Col = val.GetLength(1);
        int j = 0;
        fixed (double* pA = B, pB = val)
        {
            for (int i = 0; i < val.Length; i++)
            {
                if (i != j * Col)
                    pA[i-j] = pB[i];
                else
                    j++;

            }
        }
    } 
```

在执行 CopyB 函数后，E 发生了一些事情（这很奇怪，因为它不是 CopyB 的参数）并且 VS 2012 告诉我：无法获取本地或参数“E”的值，因为它在该指令指针处不可用，可能是因为它已被优化掉。代码优化已关闭，此代码运行良好，直到我制作了 CopyB。那么，问题是什么？E会发生什么，我该怎么办？

PS CopyB 用于在乘法后更快地解析矩阵，这是我的数学工具的一部分，我使用块矩阵。

我将非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T16:28:49.717

让我们简化您的问题：

> 我正在调试器中查看此代码。

```
static void Foo(int a, int b)
{
  DoSomething(a);
  DoSomethingElse(b);
} 
```

> 有时，在运行后尝试`a`在调试器中查看时，`DoSomething`我会收到消息*“无法获取本地或参数 'a' 的值，因为它在此指令指针处不可用，可能是因为它已被优化掉。”* 这是什么意思？

形式参数是一个*变量*，这意味着它必须作为*存储位置*来实现。由于形式参数的生命周期很短，因此可以在*短期池上*分配该存储位置。这意味着抖动将使其成为*堆栈位置*或*寄存器*。

假设它是一个寄存器。寄存器在 x86 领域是一种稀缺资源，因此抖动可能希望将该寄存器用于`DoSomethingElse`. 它知道它可以安全地这样做，因为它知道后面的任何内容都没有`DoSomethingElse`引用`a`; `a`现在就抖动而言“已死”，因此它的寄存器可用于其他用途。

调试器知道寄存器不再有意义，`a`所以它不会让你误以为寄存器的值是`a`. 该值消失了，因为它的存储现在被用于其他用途。

> 所以这就解释了为什么当我添加一个新的方法调用时调试器的行为发生了变化？

是的。在您的原始程序中，抖动不需要重新使用寄存器，因此它在整个方法调用中具有其原始值。

您的实际场景只是该场景的一个更复杂的版本，涉及*三种*方法。抖动可能会重新使用代表您的变量的寄存器`E`来做其他事情。

# cross-compiling - 防止 SCons 寻找标准工具

> ID：15205210
> 
> 赞同：7
> 
> 时间：2013-03-04T15:36:33.230
> 
> 标签：cross-compiling, scons

我目前正在设置 SCons 以使用 Windows 作为主机操作系统进行交叉编译。我正在`Environment`为交叉编译器构建一个自定义，但 SCons 坚持在我每次启动它时查找 Visual Studio（并打印一条警告说它找不到它，因为我没有安装它）。我可以阻止它寻找我知道我不会使用的标准工具吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T16:53:08.687

至少有2种方法，第一种方法最简单，尝试创建指定编译器的环境，如下：

```
env = Environment(CC = '/path/to/the/compiler') 
```

您可能还需要为链接器和其他工具添加路径。然后 SCons 不应该搜索它们。

[另一种方法是使用SCons 手册页的](http://www.scons.org/doc/HTML/scons-man.html)**CONFIGURATION FILE REFERENCE**部分中提到`tools`的函数参数为交叉编译器创建工具定义，其中提到了以下内容：`Environment()`

 **> 此外，可以将一组用于初始化环境的特定工具指定为可选的关键字参数：
> 
> `env = Environment(tools = ['msvc', 'lex'])`
> 
> 可以使用 toolpath 参数指定非内置工具：
> 
> `env = Environment(tools = ['default', 'foo'], toolpath = ['tools'])`
> 
> ...
> 
> 工具列表的各个元素本身也可以是 (toolname, kw_dict) 形式的双元素列表。SCons 如上所述搜索工具名称规范文件，并将必须是字典的 kw_dict 作为关键字参数传递给工具的生成函数。generate 函数可以使用参数通过以不同方式设置环境或更改其初始化来修改工具的行为。

*工具/my_tool.py：*

```
def generate(env, **kw):
  # Sets MY_TOOL to the value of keyword argument 'arg1' or 1.
  env['MY_TOOL'] = kw.get('arg1', '1')
def exists(env):
  return 1 
```

*S构造：*

```
env = Environment(tools = ['default', ('my_tool', {'arg1': 'abc'})],
                  toolpath=['tools']) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-03T19:03:21.863

你可以禁止这样的警告

```
env.SetOption('warn', 'no-visual-c-missing') 
```

例如，要交叉编译 ARM Cortex-M 微控制器，我正在这样做

```
cross = 'arm-none-eabi-'
toolchain = {
    'CC': cross + 'gcc',
    'CXX': cross + 'g++',
    'AR': cross + 'ar',
    'AS': cross + 'gcc',
    'OBJCOPY': cross + 'objcopy',
    'SIZE': cross + 'size',
    'PROGSUFFIX': '.elf',
}

env = Environment(tools=('gcc', 'g++', 'gnulink', 'ar', 'as'), ENV=os.environ)
env.SetOption('warn', 'no-visual-c-missing')
env.Replace(**toolchain) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-23T08:16:34.070

考虑重新定义[DefaultEnvironment](https://www.scons.org/doc/3.0.0/HTML/scons-user.html#idm139977756074448)而不是定义`Environment`.

> 到目前为止，我们介绍的所有 Builder 函数，如 Program 和 Library，实际上都使用默认构造环境，其中包含 SCons 默认配置的各种编译器和其他工具的设置，或者知道并在您的系统上发现. 默认构建环境的目标是使许多配置“正常工作”，以使用现成的工具构建软件，而配置更改最少。

这样，*SCons*就不会尝试根据常见用法进行预测并将其应用到您的项目中。例如：

```
PATH = {'PATH' : ['C:/cygwin/bin']}
env = Environment(ENV=PATH)
env.Program('helloworld.c++') 
```

将根据它认为最有可能的情况做出假设，并在求助于它在 PATH 中找到的任何内容之前尝试找到*Visual Studio ，而：*

```
PATH = {'PATH' : ['C:/cygwin/bin']}
env = DefaultEnvironment(ENV=PATH)
env.Program('helloworld.c++') 
```

不会做这样的假设，并直接转到它在 PATH 中找到的任何内容，而不寻找*Visual Studio*。**

# screen-resolution - Tinyscrollbar 不适用于拖动

> ID：15205211
> 
> 赞同：3
> 
> 时间：2013-03-04T15:36:35.880
> 
> 标签：screen-resolution, overlapping, tinyscrollbar

我在网站上的几个部分中使用了 tinyscrollbar 插件。到目前为止，它工作得很好。但现在由于某种原因，滚动可用鼠标滚轮但不能用拖放滑块..

我使用的分辨率是 1360x768，但我在 1920x1080 中对其进行了测试，并且拖动工作正常！如果问题是滑块上的重叠元素，我会检查萤火虫，但我什么也看不到..

我没有发布任何代码，因为我没有对 tinyscrollbar.js 进行任何更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-14T22:34:35.260

如果您升级到 Windows 8，则会出现一个错误，即它只注册屏幕触摸而不是屏幕和鼠标……所以您需要解决这个问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-23T14:03:12.610

检查滚动条元素的 z-index 将其放置在其他所有元素的顶部（为此目的，任意高的 z-index 都可以），因为这有时会出现在自定义滚动视口后面，这意味着当您拖动滚动条时你点击了错误的元素。

# sql-server-2012 - 具有多个参数的 MS Query

> ID：15205212
> 
> 赞同：1
> 
> 时间：2013-03-04T15:36:41.407
> 
> 标签：sql-server-2012, ms-query, excel-2013

我有这个 SQL 查询，我想要 Excel 2013 表/表中的结果

```
SELECT 
  [MS Part Number], [Item Name], SUM([Aantal]) AS Aantal, [Prijs]
FROM 
  (
    SELECT 
      [MS Part Number], [Item Name], SUM([Aantal]) AS Aantal, [Prijs]
    FROM 
      vwSPLAInformatie
    WHERE 
      (DATEPART(YEAR, fakdat) = '2013') 
      AND (DATEPART(QUARTER, fakdat) = '1')
      AND docnumber LIKE '%kwartaal%'
    GROUP BY 
      [MS Part Number], [Item Name], [Aantal], [Prijs]
    UNION ALL
    SELECT 
      [MS Part Number], [Item Name], SUM([Aantal]) AS Aantal, [Prijs]
    FROM 
      vwSPLAInformatie
    WHERE 
      (DATEPART(YEAR, fakdat) = '2013') 
      AND (DATEPART(MONTH, fakdat) = '1')
      AND NOT docnumber LIKE '%kwartaal%'
    GROUP BY 
      [MS Part Number], [Item Name], [Aantal], [Prijs]
  ) AS Basis
GROUP BY 
  [MS Part Number], [Item Name], [Prijs] 
```

它工作得很好，唯一的是我有 4 个参数要连接到 Excel 中的 3 个单元格值。（年 = 2013）（季度 = 1）（月 = 2）。但是当我将查询调整为以下内容时：

```
 WHERE (DATEPART(YEAR, fakdat) = '?') 
```

我在 Excel 中选择了显示 2013 的单元格，所以基本上它应该可以工作，但它没有。我收到以下错误：

```
[Microsoft]ODBC SQL Server][SQL Server]Conversion failed when converting the varchar value '?' to data type in. 
```

值是相同的，但它根本不起作用。我怎样才能解决这个问题？当这有效时，我会非常高兴！转发，非常感谢。

# c# - 在c#中动态调用方法

> ID：15205213
> 
> 赞同：4
> 
> 时间：2013-03-04T15:36:44.223
> 
> 标签：c#, reflection, delegates

我希望能够存储函数引用并忽略参数，直到它实际被使用。

这是我希望它看起来的样子：

```
StoreType f=MyFunction;
.......
var r=f.Invoke(arg1,arg2,arg3) as ReturnType; 
```

这有点像 Action 和 Func，但它们是强类型的，我希望能够声明和使用这种类型，而无需精确知道函数将采用多少参数和什么类型。

我如何在 C# 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T20:33:52.533

您可以使用较旧的`delegate`语法。

`public delegate ReturnType MyFunction(string arg1, int arg2, ...);`

`var result = MyFunction.Invoke(arg1, arg2, ...);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T15:43:37.080

For the argument count, just pass an array of object containing the arguments.

```
f.Invoke(new object[]{ arg1, args2, args3, ... }); 
```

For the type use the method

```
Convert.ChangeType(objectToConvert, destinationType); 
```

Should work for me :)

# javascript - ember 属性和 javascript 链接

> ID：15205220
> 
> 赞同：2
> 
> 时间：2013-03-04T15:37:06.003
> 
> 标签：javascript, ember.js

查看 ember.js 文档（[http://emberjs.com/guides/object-model/computed-properties/](http://emberjs.com/guides/object-model/computed-properties/)）我了解如何使用属性，但之前没有在对象声明中运行过链式方法。

在我看来，该`property`方法应该立即被调用，但事实并非如此。

```
Person = Ember.Object.extend({
  // these will be supplied by `create`
  firstName: null,
  lastName: null,

  fullName: function() {
    var firstName = this.get('firstName');
    var lastName = this.get('lastName');

   return firstName + ' ' + lastName;
  }.property('firstName', 'lastName')
});

var tom = Person.create({
  firstName: "Tom",
  lastName: "Dale"
});

tom.get('fullName') // "Tom Dale" 
```

如果我制作一个小的 js 片段，这里似乎什么都做不了。 [http://jsfiddle.net/xXStr/](http://jsfiddle.net/xXStr/)

```
var a = {
    what: function() {
        alert ("oh yeah");
    },
    bar: function() {
        alert ("bar");
        return this;
    }.what()
}
a.bar(); 
```

对象声明中的链式方法如何工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T18:04:21.623

If you look inside the [Ember source](https://github.com/emberjs/ember.js/blob/master/packages/ember-runtime/lib/ext/function.js), you will find that the `Function` prototype is extended to include a `property` method.

```
Function.prototype.property = function() {
  var ret = Ember.computed(this);
  return ret.property.apply(ret, arguments);
}; 
```

[Looking deeper](https://github.com/emberjs/ember.js/blob/v1.0.0-rc.1/packages/ember-metal/lib/computed.js), we see that `Ember.computed` returns an instance of `Ember.Computed`.

```
Ember.computed = function(func) {
  var args;

  if (arguments.length > 1) {
    args = a_slice.call(arguments, 0, -1);
    func = a_slice.call(arguments, -1)[0];
  }

  var cp = new ComputedProperty(func);

  if (args) {
    cp.property.apply(cp, args);
  }

  return cp;
};

// ...

function ComputedProperty(func, opts) {
  this.func = func;
  this._cacheable = (opts && opts.cacheable !== undefined) ? opts.cacheable : true;
  this._dependentKeys = opts && opts.dependentKeys;
}

Ember.ComputedProperty = ComputedProperty; 
```

Thus, whenever you write

```
foo: function() {
  return this.get('bar')
}.property('bar') 
```

you are actually creating an anonymous function and then immediately invoking its `property` method, returning an instance of `Ember.ComputedProperty`. This is what gets assigned to the `foo` property.

# javascript - 在没有 jQuery 的情况下，如何在 IE7 中使用 window.showModelessDialog() 仅为父窗口启用滚动？

> ID：15205226
> 
> 赞同：1
> 
> 时间：2013-03-04T15:37:12.697
> 
> 标签：javascript, internet-explorer-7

我希望 JavaScript 打开一个弹出窗口来修改通过复选框选择的某些行的数据。这些行存在于父窗口中。

我无法在父窗口中仅启用滚动控件。我目前正在使用`window.showModelessDialog()`，它启用了所有的父控件。我只需要卷轴。

我的应用程序打算在 IE7 上运行，我不能使用 jQuery。

# android - 隐藏状态栏不适用于所有设备

> ID：15205229
> 
> 赞同：3
> 
> 时间：2013-03-04T15:37:19.343
> 
> 标签：android, statusbar

为了隐藏我的应用程序中的状态栏，我尝试了几件事。它似乎有效，但一些用户抱怨他们仍然看到状态栏。因此，看起来我使用的所有正确解决方案都没有涵盖所有设备/设置。

以下是我已经添加到项目中的内容：

在`AndroidManifest`：

```
android:theme="@android:style/Theme.Translucent.NoTitleBar.Fullscreen" 
```

在`onCreate()`方法中：

```
requestWindowFeature( Window.FEATURE_NO_TITLE );
getWindow().setFlags( WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN );
getWindow().getDecorView().requestLayout(); 
```

现在，这对我的几乎所有用户都有效。但是他们中的一些人仍然可以看到状态栏，即使是 Galaxy S2 和 S3 用户（不是全部！）。

还有其他我可以尝试的选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:26:39.537

尝试仅使用 Java 代码`onCreate()`而不使用`android:theme="@android:style/Theme.Translucent.NoTitleBar.Fullscreen"`.

将 Java 代码放在您的开头`onCreate()`：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

# ssl - 如何使用 Selenium 检测页面上的 SSL 已损坏

> ID：15205230
> 
> 赞同：1
> 
> 时间：2013-03-04T15:37:22.763
> 
> 标签：ssl, selenium, https, selenium-webdriver, saucelabs

由于第三方脚本加载了非 HTTPS 资源（最初它们很好，但它们偶尔会改变），我们偶尔会在页面中看到 SSL 证书受损。我们想每天测试这些页面是否有损坏的 SSL。

我们尝试了一种方法，试图捕获一条弹出消息，该消息表明我们在页面上有不安全的内容。但是，我们一直未能通过 selenium 模拟弹出消息。selenium 似乎已自动禁用任何弹出窗口。虽然我们已经确定了一种 Selenium 方法来禁用弹出窗口的抑制（disable-popup-handler），但即使使用此方法我们也无法成功看到弹出窗口。

有没有人找到使用 Selenium 检测损坏的 SSL 页面的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T15:43:28.593

You need to load a browser profile (with WebDriver) that doesn't have the setting for popup blocker enabled (using the Profile class and giving it the right properties). Then, you will get the Windows popup message concerning the SSL cert. If , for some reason, you cannot control the popup using WebDriver (because its limited to Action control only within the browser content window) then you can use Sikuli API to handle the dialog and export the cert to the "Downloads" dir and then copy the file to expected location for inspection. Unfortunately, if you use Sikuli, that will make your automation script sequential and not work via a RemoteWebDriver grid server and so you wont be able to run parallel tests. Hopfully, WebDriver gives you access to the dialog and so you will be able to run with RemoteWebDriver because that is the best way to go when running scripts, even if you run a browser locally.

# visual-studio-2012 - 是否可以使用 InstallShield LE (VS2012) 为 Office 2010 加载项创建“所有用户”安装程序？

> ID：15205231
> 
> 赞同：0
> 
> 时间：2013-03-04T15:37:27.737
> 
> 标签：visual-studio-2012, installation, installshield, office-addins

我使用与 VS2012 捆绑的 InstallShield LE 产品为我的 Office 2010 插件创建了安装程序。不完全是最愉快的经历。

无论如何，它会在用户帐户下安装加载项。我想选择为“所有用户”安装。我看不到如何在 InstallShield LE 中执行此操作，但我不清楚我是找不到该选项，还是该 crippleware 版本不支持它，或者根本不可能。

欢迎任何指点...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T00:30:15.010

通过更改正在创建/设置的注册表项，我能够将我的安装程序从每个用户的安装程序更改为所有用户的安装程序。

但是，仍然找不到在安装时让用户选择的方法。

# mysql - Update on game statistic. SQL

> ID：15205235
> 
> 赞同：0
> 
> 时间：2013-03-04T15:37:36.037
> 
> 标签：mysql, sql

I have an csv importer for 3 files so that my game statistics can be updated quickly. After a while I realised it was inserting the same data into multiple columns in the database.

I am trying to update data inside one of the tables using an `UPDATE` statement.

The five columns I need fixed are `data1, data2, data3, hits, totalnum.`

If the user is a valid player then I need hits and totalnum set to 0.
If they are not a valid player than I need `data1, data2` and `data3` set to 0.

To check users valid I need to access users table and lookup the users details and check the is_valid column.

I may have to do 2 queries for this, 1 for valid users and 1 for non-valid users.

What I have so far doesn't check users table and i don't know how to do this.

```
UPDATE game_stats
SET data1 = 0,
data2=0,
data3=0
WHERE data1 <= 1 AND data2 <= 1 AND data3 <= 1 
```

> Users table
> Id, fname, lname, is_valid, details
> 
> Game_stats
> Id, userid, data1, data2, data3, hits, totalnum

Please could someone help me do this?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T15:42:51.737

This should sort out the valid users

```
UPDATE game_stats gs
SET gs.data1 = '0', gs.data2= '0', gs.data3= '0'
WHERE exists
(SELECT u.id
FROM users u 
WHERE u.is_valid='true' AND
u.id = gs.userid) 
```

This should sort out non-valid users

```
UPDATE game_stats gs
SET gs.hits = '0', gs.totalnum = '0'
WHERE exists
(SELECT u.id
FROM users u
WHERE u.is_valid !='true' AND
u.id = gs.userid) 
```

Hope that helps

# c# - VSTO Outlook：获取选定的附件

> ID：15205237
> 
> 赞同：3
> 
> 时间：2013-03-04T15:37:38.693
> 
> 标签：c#, vsto, outlook-addin

我正在尝试对 Outlook 2010 中的选定附件执行操作。我在 VS2012 中创建了一个 Outlook VSTO 项目。

这是用于在附件功能区上添加按钮的 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<customUI xmlns="http://schemas.microsoft.com/office/2009/07/customui" onLoad="Ribbon_Load">
  <ribbon>
    <contextualTabs>
      <tabSet idMso="TabSetAttachments">
        <tab idMso="TabAttachments">
          <group label="MyGroup" id="MyAttachmentGroup">
            <button id="AttachButton"
                size="large"
                label="Do something"
                imageMso="HappyFace"
                onAction="DoSomething" />
          </group>
        </tab>
      </tabSet>
    </contextualTabs>
  </ribbon>
</customUI> 
```

这是 ThisAddIn.cs 中的代码

```
protected override Microsoft.Office.Core.IRibbonExtensibility CreateRibbonExtensibilityObject()
{
    return new ProcessAttachment(this);
} 
```

这是 ProcessAttachment 类：

```
[ComVisible(true)]
public class ProcessAttachment : Office.IRibbonExtensibility
{
    private Office.IRibbonUI ribbon;
    private ThisAddIn plugin;

    public ProcessAttachment(ThisAddIn plugin)
    {
        this.plugin = plugin;
    }

    public void Ribbon_Load(Office.IRibbonUI ribbonUI)
    {
        this.ribbon = ribbonUI;
    }

    public void DoSomething(Office.IRibbonControl control)
    {
        var explorer = plugin.Application.ActiveExplorer();
        var selection = explorer.Selection;

        if (selection.Count > 0)   
        {
            object selectedItem = selection[1];
            var mailItem = selectedItem as Outlook.MailItem;
            //How to get selected attachment?
        }
    }
} 
```

如何在此处获取选定的附件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T08:35:52.457

我是这样解决的：（这段代码只是一个例子，需要改进）

```
public void DoSomething(Office.IRibbonControl control)
{
    var window = plugin.Application.ActiveWindow();
    var attachsel = window.AttachmentSelection();

    int? index = null;
    if (attachsel.count > 0)
    {
        var attachment = attachsel[1];
        index = attachment.Index;
    }

    var explorer = plugin.Application.ActiveExplorer();
    var selection = explorer.Selection;

    if ((selection.Count > 0) && (index != null))   
    {
        object selectedItem = selection[1];
        var mailItem = selectedItem as Outlook.MailItem;
        foreach (Outlook.Attachment attach in mailItem.Attachments)
        {
            if (attach.Index == index)
            {
                attach.SaveAsFile(Path.Combine(@"c:\temp\", attach.FileName));
            }
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-10T12:33:06.723

[https://msdn.microsoft.com/en-us/library/office/ee692172(v=office.14).aspx#OfficeOLExtendingUI_AttachmentContextMenu](https://msdn.microsoft.com/en-us/library/office/ee692172(v=office.14).aspx#OfficeOLExtendingUI_AttachmentContextMenu)

使用上下文，即。来自 control.Context 的 AttachmentSelection 就是这种情况。

```
AttachmentSelection ats = (AttachmentSelection)control.Context;

ats[1] <- your selected attachment 
```

# laravel - 在 Laravel 4 中调用控制器

> ID：15205239
> 
> 赞同：38
> 
> 时间：2013-03-04T15:37:41.323
> 
> 标签：laravel, laravel-4

在 Laravel 3 中，您可以使用 Controller::call 方法调用控制器，如下所示：

`Controller::call('api.items@index', $params);`

我查看了 L4 中的 Controller 类，发现这个方法似乎取代了旧方法：callAction()。虽然它不是静态方法，但我无法让它工作。可能不是正确的方法吗？

我如何在 Laravel 4 中做到这一点？

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2013-06-29T22:37:11.730

您可以使用 IoC。

试试这个：

```
App::make($controller)->{$action}(); 
```

例如：

```
App::make('HomeController')->getIndex(); 
```

你也可以提供参数：

```
App::make('HomeController')->getIndex($params); 
```

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2013-03-05T20:16:06.843

如果我理解正确，您正在尝试构建一个以 API 为中心的应用程序，并希望在您的 Web 应用程序内部访问该 API，以避免发出额外的 HTTP 请求（例如使用 cURL）。那是对的吗？

您可以执行以下操作：

```
$request = Request::create('api/items', 'GET', $params);
return Route::dispatch($request)->getContent(); 
```

请注意，您需要使用通常用于从外部访问 API 的 uri 路由，而不是指定 controller@method 目标。

更好的是，您现在可以指定请求应响应的 HTTP 动词。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-11-25T18:35:27.597

就像 Neto 所说，您可以使用：

```
App::make('HomeController')->getIndex($params); 
```

但是要发送例如带有额外数据的 POST，您可以在之前使用“合并”方法：

```
$input = array('extra_field1' => 'value1', 'extra_field2' => 'value2');
Input::merge($input);

return App:make('HomeController')->someMethodInController(); 
```

这个对我有用！

再见

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-19T04:24:55.927

这不是最好的方法，但您可以创建一个函数来做到这一点：

```
function call($controller, $action, $parameters = array())
{
    $app = app();
    $controller = $app->make($controller);
    return $controller->callAction($app, $app['router'], $action, $parameters);
}

Route::get('/test', function($var = null) use ($params)
{
    return call('TestController', 'index', array($params));
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-10T12:46:36.353

Laurent 的解决方案有效（尽管您需要一个前导`/`并且`$params`您传递给`Request::create`的是 GET 参数，而不是 Laravel 处理的那些（必须将它们`api/items/`放在示例中）。

我不敢相信没有更简单的方法可以做到这一点（并不是说这很难，但对我来说它看起来有点骇人听闻）。基本上，**Laravel 4 没有提供一种简单的方法来使用回调函数将路由映射到控制器？**严重地？这是世界上最常见的事情...

我必须在我的一个项目上这样做：

```
Route::controller('players', 'PlayerController');

Route::get('player/{id}{rest?}', function($id)
{
    $request = Request::create('/players/view/' . $id, 'GET');
    return Route::dispatch($request)->getContent();
})
->where('id', '\d+'); 
```

希望我遗漏了一些明显的东西。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-16T10:23:16.040

```
$request = Request::create('common_slider', 'GET', $parameters);
return  Controller::getRouter()->dispatch($request)->getContent(); 
```

对于 laravel 5.1

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-10-25T09:30:51.987

这是一个老问题。但也许有用。有没有别的办法。

在您的控制器中：您可以将函数声明为 public static

```
public static function functioNAME(params)
{
    ....
} 
```

然后在 Routes 文件或视图中：

```
ControllerClassName::functionNAME(params); 
```

# ffmpeg - 碎片化的 mp4 javascript 转换

> ID：15205242
> 
> 赞同：2
> 
> 时间：2013-03-04T15:37:47.977
> 
> 标签：ffmpeg, mp4

我想知道是否有一种方法可以通过 javascript 将常规 mp4 转换为分段 mp4。（就像 mp4box 一样）它是否足够高效（不应该是一项复杂的任务）？有没有人写过这样的东西？让它更难，它可以在飞行中吗？这意味着我不会从服务器下载整个 mp4，而是分部分下载并将其转换为与分段 mp4 和 mpeg-dash 兼容的片段 - 我正在努力克服不必使用 2 种不同文件类型来播放视频的问题或者提前在我所有的图书馆上做 mp4box。

无论如何，是否可以从具有不同容器（mov、flv 等）的 h.264 兼容文件转换为没有服务器的碎片？意思是用javascript在浏览器中以某种方式做到这一点？

感谢您的帮助，尤格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T03:25:40.557

我正在研究类似的东西（这导致我来到这里），但到目前为止还没有任何线索。但是，以下是我的发现：

百老汇： [https ://github.com/mbebenita/Broadway](https://github.com/mbebenita/Broadway)

这个想法是您可以使用 FFMPEG 源库编写 C/C++，然后使用 Emscripten 将您的 C/C++ 编码编译成 Javascript。我还没有开始使用这种方法，不确定这是否有效。如果你确实让我知道。

# javascript - HTML5 移动样板 Coffeescript 调用

> ID：15205248
> 
> 赞同：-7
> 
> 时间：2013-03-04T15:38:08.700
> 
> 标签：javascript, coffeescript, html5boilerplate

如何在 Coffeescript 中编写这些 JS 调用？

iPhone 比例错误修复

```
MBP.scaleFix(); 
```

隐藏网址栏

```
MBP.hideUrlBar(); 
```

快速按钮（仅当您只针对 webkit 浏览器时才使用此按钮，我们仍在测试跨浏览器支持）

```
new MBP.fastButton(document.getElementById('myBtn'), function() {alert("clicked")}); 
```

自动增长文本区域

```
new MBP.autogrow(document.getElementById('myTextarea'), 14); // 14 -- line height 
```

[https://github.com/h5bp/mobile-boilerplate/wiki/JavaScript-Helper](https://github.com/h5bp/mobile-boilerplate/wiki/JavaScript-Helper)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T16:26:55.483

他们大多保持不变。

### iPhone 比例错误修复

```
MBP.scaleFix() 
```

### 隐藏网址栏

```
MBP.hideUrlBar() 
```

### 快速按钮

```
new MBP.fastButton document.getElementById('myBtn'), -> alert "clicked" 
```

### 自动增长文本区域

```
new MBP.autogrow document.getElementById('myTextarea'), 14 
```

# php - php textarea验证表单刷新无法按要求工作

> ID：15205252
> 
> 赞同：0
> 
> 时间：2013-03-04T15:38:18.467
> 
> 标签：php, html, css

这个 html 代码

```
<div class="textarea_box"> <strong><span>*</span> Tooltip Message to be displayed:</strong>
            <?php $class = 'correct';if (isset($flag) && ($flag == 4)){$class = 'wrong';}$content = isset($disp_msg) ? $disp_msg : "";?>
            <textarea name="txtDispMsg" cols="1" rows="1" class="<?php echo $class; ?>"><?php echo $content;?></textarea>
</div> 
```

这是CSS代码

```
#Form1 textarea .wrong {
border:2px solid #F00;
} 
```

一切都很好，除非出现错误，它不会使 textarea 边框变为红色（即 #F00） 可能有什么问题？伙计们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T15:40:03.243

删除选择器中的空格，`#Form1 textarea .wrong`应该是`#Form1 textarea.wrong`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T15:41:06.690

您的 CSS 说在 textarea 中查找具有“错误”类的元素，而它应该查找具有“错误”类的 textarea

```
#Form1 textarea.wrong { ... } 
```

# css - FadeToggle 扩展了整个列表

> ID：15205257
> 
> 赞同：0
> 
> 时间：2013-03-04T15:38:41.593
> 
> 标签：css, list, toggle, expand

当我切换下拉菜单时，整个列表都会展开。我一直试图弄清楚如何仅扩展所选列表，但不知道问题出在哪里。

JSFiddle [http://jsfiddle.net/Cx4CK/6/](http://jsfiddle.net/Cx4CK/6/)

**HTML**

```
<ul>
<li><h1>Applications</h1>
    <ul>
    <li>One</li>
    <li>Two</li>
    </ul>
</li>
<li><h1>Forum</h1>
    <ul>
    <li>One</li>
    <li>Two</li>
    </ul>
</li>
<li><h1>Guilds</h1>
    <ul>
    <li>One</li>
    <li>Two</li>
    </ul>
</li>
<li><h1>Imageboards</h1>
    <ul>
    <li>One</li>
    <li>Two</li>
    </ul>
</li>
<li><h1>Projects</h1>
    <ul>
    <li>One</li>
    <li>Two</li>
    </ul>
</li>
</ul> 
```

**CSS**

```
.navigation ul li h1 {
    background : #000000;
    border-right : 3px solid #ffffff;
    color : #ffffff;
    display : table;
    float : right;
    font-size : 28px;
    font-weight : 100;
    margin : 0;
    margin-bottom : 3px;
    padding : 6px;
}
.navigation ul li h1:hover {
    border-right : 3px solid #f43058;
    color : #f43058;
}
/* Positioning */
.navigation {
    font-family : 'Open Sans Condensed', sans-serif;
    margin : 12px;
    position : fixed;
    right : 0;
    top : 0;
}
.navigation ul {
    font-size : 20px;
    margin : 0;
    padding : 0;
    text-align : right;
}
.navigation ul li {
    clear : right;
    color : #ffffff;
    float : right;
    list-style-type : none;
}
/* Second Level */
.navigation ul li:hover ul {
    display : block;
}
.navigation ul li ul li {
    background : #000000;
    border-right : 3px solid #ffffff;
    color : #ffffff;
    display : table;
    font-size : 18px;
    margin-bottom : 3px;
    padding : 6px;
}
.navigation ul li ul li:hover {
    border-right : 3px solid #f43058;
    color : #f43058;
} 
```

**jQuery**

```
jQuery(document).ready(function () {

    var subMenu = jQuery("ul li ul li");
    var linkClick = jQuery("ul li").filter(":has(ul)");

    subMenu.hide();

    linkClick.click(function (e) {
        e.preventDefault();
        subMenu.fadeToggle("fast");
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T15:41:35.670

通过更换

`subMenu.fadeToggle("fast");`

在

`$(this).find('ul li').fadeToggle("fast");`

因为你想要被点击元素的子元素。不是每个元素。

更新小提琴：http: [//jsfiddle.net/Cx4CK/7/](http://jsfiddle.net/Cx4CK/7/)

# javascript - TitaniumStudio 不更新新文件

> ID：15205259
> 
> 赞同：1
> 
> 时间：2013-03-04T15:38:47.487
> 
> 标签：javascript, iphone, ios, titanium

我正在使用 TitaniumStudio（不是我的选择）构建一个应用程序，并且有一些非常奇怪和烦人的行为。我可以编辑文本和不同的 javascript 文件，这将更新应用程序的外观，但是如果我用新图像替换图像，用新图像替换视频，或者用新图像替换音频剪辑，我运行时的图像模拟器，和旧的一样。我想它正在某处缓存旧图像，这导致了这种行为，但我一直在寻找试图找到的地方和找不到的地方。有谁知道这可能是什么原因造成的？

我正在从 Titanium 为 iOS 构建

钛 SDK 3.0.2.GA

该项目还使用合金和咖啡

我也尝试过删除钛创建的构建文件夹。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T15:44:44.883

在这种情况下，我更喜欢以下内容。有时我 - 但是 - 需要重新启动工作室（有时甚至是我的 Mac）

1.  退出工作室
2.  手动删除构建文件夹
3.  打开 iOS 模拟器并删除应用程序
4.  关闭模拟器
5.  启动工作室
6.  Studio 中的项目清理
7.  在模拟器上再次运行应用程序。

如果这不起作用，请尝试重置模拟器。使用苹果图标旁边的“iOS-Simulator”菜单，您可以在那里重置内容和设置。

# hadoop - Apache Hadoop 配置选项

> ID：15205260
> 
> 赞同：3
> 
> 时间：2013-03-04T15:38:51.507
> 
> 标签：hadoop

作为 Hadoop 应用程序的新开发人员，我正在努力掌握一个`Map/Reduce`或一个`Oozie`或一个 `Sqoop`工作的无数配置选项。推荐的书籍或网站都没有全面处理这个问题。您将看到更多 Hadoop 生态系统中的任何新工具。我想问了解工作配置选项的最佳方式/资源是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T17:48:17.817

我阅读了 hadoop：权威指南，它对我非常有用。

此外，在读取[hadoop 中的任何配置属性时](http://hadoop.apache.org/docs/stable/cluster_setup.html#Site+Configuration)，您必须将其与 hadoop 的相应元素相关联。

就像任何以开头`mapred.map`的属性都用于设置映射器任务的属性一样 `mapred.reduce`，reducer 也是如此。

通过这种方式，您可以轻松理解和记住这些属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-18T13:25:30.237

在这里，您拥有 Hadoop 的所有配置：

[https://hadoop.apache.org/docs/r2.5.1/hadoop-project-dist/hadoop-common/core-default.xml](https://hadoop.apache.org/docs/r2.5.1/hadoop-project-dist/hadoop-common/core-default.xml)

此外，如果您想查看当前配置是什么以及它来自哪里，请运行以下命令：

```
$ hadoop org.apache.hadoop.conf.Configuration 
```

# javascript - 使用重置按钮重置下拉列表中的 Select2 值

> ID：15205262
> 
> 赞同：63
> 
> 时间：2013-03-04T15:39:13.753
> 
> 标签：javascript, html, forms, jquery-select2

将所选项目重置为默认值的最佳方法是什么？我正在使用*Select2*库，当使用普通按钮时`type="reset"`，下拉列表中的值不会重置。

因此，当我按下按钮时，我希望再次显示“全部”。

**jQuery**

```
$("#d").select2(); 
```

**html**

```
<select id="d" name="d">
  <option selected disabled>All</option>
  <option value="1">1</option>
  <option value="2">2</option>
  <option value="3">3</option>
</select> 
```

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-03-05T13:37:19.733

我会尝试这样的事情：

```
$(function(){
    $("#searchclear").click(function(){
        $("#d").select2('val', 'All');
    });
}); 
```

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2013-03-19T16:49:15.300

您还可以使用重置 select2 值

```
$(function() {
  $('#d').select2('data', null)
}) 
```

或者，您可以`'allowClear': true`在调用 select2 时通过，它将有一个 X 按钮来重置其值。

* * *

## 回答 #3

> 赞同：49
> 
> 时间：2016-10-08T23:10:35.267

# 4.0版

```
$('#d').val('').trigger('change'); 
```

从现在开始，根据调试模式中抛出的已弃用消息，这是正确的解决方案：“该`select2("val")`方法已被弃用，将在以后的 Select2 版本中删除。`$element.val()`改用”

* * *

## 回答 #4

> 赞同：32
> 
> 时间：2014-01-08T01:42:32.987

根据[此处](http://ivaynberg.github.io/select2/index.html)记录的最新版本（select2 3.4.5） ，它很简单：

```
 $("#my_select").select2("val", ""); 
```

* * *

## 回答 #5

> 赞同：20
> 
> 时间：2015-05-26T07:00:46.793

你可以使用：

```
$("#d").val(null).trigger("change"); 
```

这很简单，而且工作正常！如果与重置按钮一起使用：

```
$('#btnReset').click(function() {
    $("#d").val(null).trigger("change"); 
}); 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2013-10-31T21:40:58.300

最好的方法是：

```
$('#e1.select2-offscreen').empty(); //#e1 : select 2 ID
$('#e1').append(new Option()); // to add the placeholder and the allow clear 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2014-11-08T04:47:57.487

我看到三个问题：

1.  Select2 控件的显示在其值因表单重置而更改时不会刷新。
2.  “全部”选项没有`value`属性。
3.  “全部”选项被禁用。

首先，我建议您使用该`setTimeout`功能确保表单重置完成后执行代码。

单击按钮时，您可以执行代码：

```
$('#searchclear').click(function() {
    setTimeout(function() {
        // Code goes here.
    }, 0);
}); 
```

或者当表单被重置时：

```
$('form').on('reset', function() {
    setTimeout(function() {
        // Code goes here.
    }, 0);
}); 
```

*至于使用什么代码：*

由于禁用了“全部”选项，因此表单重置不会使其成为选定值。因此，您必须将其显式设置为选定值。方法是使用 Select2 "val" 函数。并且由于“All”选项没有`value`属性，所以它的值和它的文本一样，都是“All”。因此，您应该在所选答案中使用 thtsigma 给出的代码：

```
$("#d").select2('val', 'All'); 
```

如果要将属性`value=""`添加到“全部”选项，则可以使用 Daniel Dener 给出的代码：

```
$("#d").select2('val', ''); 
```

如果没有禁用“全部”选项，那么您只需要强制 Select2 刷新，在这种情况下您可以使用：

```
$('#d').change(); 
```

注意：Lenart 的以下代码是一种清除选择的方法，但不会导致选择“全部”选项：

```
$('#d').select2('data', null) 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2013-10-22T10:53:29.657

如果您有一个填充的选择小部件，例如：

```
<select>
    <option value="1">one</option>
    <option value="2" selected="selected">two</option>
    <option value="3">three</option>
    ... 
```

您需要说服 select2 在重置时恢复最初选择的值，类似于原生表单的工作方式。为此，首先重置原生表单，然后更新 select2：

```
$('button[type="reset"]').click(function(event) {
    // Make sure we reset the native form first
    event.preventDefault();
    $(this).closest('form').get(0).reset();
    // And then update select2 to match
    $('#d').select2('val', $('#d').find(':selected').val());
} 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2020-02-18T23:23:52.380

就这样:)

```
$('#form-edit').trigger("reset");
$('#form-edit').find('select').each(function(){
  $(this).change();
}); 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2015-08-29T17:20:04.167

我发现效果很好的如下：

如果您有一个占位符选项，例如“All”或“-Select-”，它是第一个选项，那就是您想要在“重置”时将值设置为，您可以使用

```
$('#id').select2('val',0); 
```

0 本质上是您希望在重置时将其设置为的选项。如果要将其设置为最后一个选项，则获取选项的长度并将其设置为该长度 - 1。基本上使用您想要将 select2 值设置为重置时的任何选项的索引。

如果您没有占位符并且只想在字段中不显示任何文本，请使用：

```
$('#id').select2('val',''); 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-05-04T20:47:44.050

要实现通用解决方案，为什么不这样做：

```
$(':reset').live('click', function(){
    var $r = $(this);
    setTimeout(function(){ 
        $r.closest('form').find('.select2-offscreen').trigger('change'); 
    }, 10);
}); 
```

这样：您不必为应用程序上的每个 select2 创建新逻辑。

而且，您不必知道默认值（顺便说一句，它不必是`""`甚至第一个选项）

最后，将值设置为`:selected`并不总是实现真正的重置，因为当前*选择*的对象很可能已经在客户端以编程方式设置，而默认操作`form select`是将输入元素值返回给服务器发送的值。

**编辑：** 或者，考虑到不推荐使用的状态`live`，我们可以将第一行替换为：

```
$('form:has(:reset)').on('click', ':reset', function(){ 
```

或者更好：

```
$('form:has(:reset)').on('reset', function(){ 
```

**PS：**我个人觉得resetting on reset，以及原select附带的触发`blur`和`focus`事件，是select2中最显眼的一些“缺失”功能！

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-11-01T15:43:44.030

Select2 使用特定的 CSS 类，因此重置它的简单方法是：

```
$('.select2-container').select2('val', ''); 
```

如果您在同一个表单中有多个 Select2，那么您的优势在于，所有这些都将使用这个单个命令进行重置。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-05-24T09:46:10.900

有时我想重置 Select2 但我不能没有 change() 方法。所以我的解决方案是：

```
function resetSelect2Wrapper(el, value){
    $(el).val(value);
    $(el).select2({
        minimumResultsForSearch: -1,
        language: "fr"
    });
} 
```

使用 ：

```
resetSelect2Wrapper("#mySelectId", "myValue"); 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-06-30T10:20:25.037

如果要在编辑页面中重置表单，可以将此按钮添加到表单

```
<button type="reset" class="btn btn-default" onclick="resetForm()">Reset</button> 
```

并像这样编写您的 JS 代码：

```
function resetForm() {
    setTimeout(function() {
        $('.js-select2').each(function () {
            $(this).change();
            /* or use two lines below instead */
            // var oldVal = $(this).val();
            // $(this).select2({'val': oldVal});
        });
    }, 100);
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-09-13T09:25:42.010

对我来说，它仅适用于这些解决方案中的任何一个

```
$(this).select2('val', null); 
```

或者

```
$(this).select2('val', ''); 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2018-01-06T20:28:47.170

```
 // Store default values
    $('#filter_form [data-plugin="select2"]').each(function(i, el){
        $(el).data("seldefault", $(el).find(":selected").val());
        });

    // Reset button action
    $('#formresetbtn').on('click', function() {
        $('#filter_form [data-plugin="select2"]').each(function(i, el){
            $(el).val($(el).data("seldefault")).trigger('change');
            });
        }); 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-11-30T12:09:12.647

很多很好的答案，但最新版本对我没有用。如果您想要一个适用于所有 select2 的通用解决方案，那么这非常有效。

版本 4.0.13 已测试

```
$(document).ready(function() {
    $('form').on('reset', function(){
        console.log('triggered reset');
        const $r = $(this);
        setTimeout(function(){
            $r.closest('form').find('.select2-hidden-accessible').trigger('change');
        }, 10);
    });
}); 
```

* * *

## 回答 #18

> 赞同：-1
> 
> 时间：2020-11-19T13:08:32.450

删除所有选项值

```
$("#id").empty(); 
```

# r - 通过 RStudio 使用 XeLaTeX fontspec 包时，knitr 缓存失败

> ID：15205263
> 
> 赞同：2
> 
> 时间：2013-03-04T15:39:18.800
> 
> 标签：r, latex, knitr, rstudio, fontspec

我在 RStudio 中使用 knitr 和 XeLaTeX。我使用块缓存，这样每次编译文档时都不必重新运行某些代码。`fontspec`这个最小的例子表明，如果加载了包，缓存似乎被破坏了。

```
\documentclass{article}
\usepackage{fontspec} % Appears to somehow conflict with caching.

\begin{document}

<<pre_load, cache=TRUE>>=
library(tikzDevice)
options(tikzDefaultEngine="xetex")
@

\section{Test}
<<test_block, dev='tikz', dependson='pre_load'>>=
plot(1:10,main='Test')
@

\end{document} 
```

第一次将此文档编译为 PDF 时，它会起作用，因为没有使用缓存。但是，如果对块进行了更改`test_block`，并且第二次运行代码，它将失败。例如，*编译成 PDF 一次后*，将`test_block`块更改为：

```
<<test_block, dev='tikz', dependson='pre_load'>>=
plot(1:10,main='Test Modified')
@ 
```

现在，编译为 PDF 失败并出现以下错误：

```
! 
 ********************************************
 * XeTeX is required to compile this document.
 * Sorry!
 ********************************************.
\RequireXeTeX ...********************************}
                                                  \endgroup \fi 
l.18 \RequireXeTeX 
```

此错误表示`options(tikzDefaultEngine="xetex")`尚未设置。有趣的是，如果`fontspec`未加载包，则不会发生此错误。

我的问题是：这是一个错误，还是我的代码有问题？

我正在通过RStudio（0.97.246）（通过浏览器通过RStudio Server访问）在R（R正在开发（不稳定）（2012-11-10 r61101））上使用tikzDevice（0.6.3）使用knitr（1.1），它本身就是在 Ubuntu (12.04.2 LTS) 上运行。我的 LaTeX2e 的日期为 <2009/09/24>。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T20:38:39.407

不要放入`options(tikzDefaultEngine="xetex")`缓存的块，因为它具有无法缓存的副作用，因此第二次编译文档时，将跳过此选项。阅读网站[缓存页面中的重要说明](http://yihui.name/knitr/demo/cache/)部分`knitr`。

请注意，您也不需要`library(tikzDevice)`；这个包会在你设置的时候自动加载`dev='tikz'`。

在大多数情况下，您应该缓存绘图块，因为创建 TikZ 图形很慢。

```
\documentclass{article}
\usepackage{fontspec} % Appears to somehow conflict with caching.

\begin{document}

<<pre_load>>=
options(tikzDefaultEngine="xetex")
@

\section{Test}
<<test_block, dev='tikz'>>=
plot(1:10,main='Test')
@

\end{document} 
```

# sqlite - ORDERBY 中的 WebSQL 排序规则

> ID：15205264
> 
> 赞同：1
> 
> 时间：2013-03-04T15:39:26.020
> 
> 标签：sqlite, sql-order-by, collation, web-sql

请问有人知道如何在 WEB SQL SELECT 语句中强制执行特定的排序规则吗？我对访问不区分大小写的捷克排序规则感兴趣。

例如。跑步

```
SELECT * FROM employee ORDER BY name COLLATE CZECH 
```

应该可以在 Sqlite 中工作，但不能在 Chrome 中的 WebSQL 实现中工作。我想ICU完全不见了？

感谢您的澄清。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:27:37.167

WebSQL 规范没有指定如何配置 SQLite，因此除了标准的三个`BINARY`,`NOCASE`和之外，您不能依赖任何排序规则`RTRIM`可用。

# javascript - JSON.stringify() 只允许一个值参数。如何在一个大括号下添加更多要字符串化的参数？

> ID：15205267
> 
> 赞同：11
> 
> 时间：2013-03-04T15:39:34.303
> 
> 标签：javascript, json, node.js

```
http.get(options, function(res){
            fs.appendFile('log.txt', JSON.stringify(res.headers, null, 4));
}) 
```

我有一个关于`JSON.stringify()`功能的问题。

我了解到，简单地使用*实际上*`res.headers`并不输出为 JSON 格式。

 *目前，我只能在 JSON.stringify() 中使用一种 res.xxxxx 方法。有问题的代码粘贴在上面。我如何能够使用多个值？目前，我只能`res.headers`输入`value`参数。我还想使用`res.statusCode`和我自己的对象，所有对象都在一个大括号 {} 下进行字符串化。

JSON.Stringify 的参数如下：`JSON.stringify(value, [replacer], [space]);`

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-04T15:43:38.877

您需要创建一个新的 js 对象并将 res.headers 放入其中。

```
var obj = {};
obj.headers = res.headers;
obj.somethingelse = somethingelse;
var string = JSON.stringify(obj); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T15:44:05.183

JSON 始终是单个值。所以输出输出`JSON.stringify`总是只能是一个值。将输入也设为单个值也是有意义的。这就像问*为什么我的函数不能返回两件事？*您可以让它返回一些复合值，但这意味着您仍然返回单个（复合）值。这里的解决方案是相同的，编写您的输入。

```
var reply = {
    code: res.statusCode,
    headers: parse_http_headers(res.headers),
    etc: /* etc */
};
log(JSON.stringify(reply)); 
```

请注意，您必须`parse_http_headers`自己编写。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-04T15:42:41.487

您可以随时将您想要的额外内容添加到 headers 对象...

```
res.headers.statusCode = res.statusCode
JSON.stringify(res.headers, null, 4); 
```

`res`我不知道如果你改变节点中的对象是否有任何不好的副作用。如果您担心这一点，您可能需要考虑创建 headers 对象的浅表副本。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-04T15:46:25.800

`headers`您还可以对对象的一部分进行字符串化：

```
JSON.stringify(res, …) 
```

如果您只想对对象的某些部分进行字符串化，您可以

*   `replacer`用函数过滤它们，
*   `delete`之前的一切，
*   或构建一个要字符串化的新对象：

    ```
    JSON.stringify({
        heads: res.headers,
        …
    }, …) 
    ```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-04T15:51:52.833

如果您想展平多个对象，可以使用此功能。

```
function merge() {
  var out = {};
  insert = function(e) {
    for (var i in e) {
      if (Object.prototype.hasOwnProperty.call(e, i))
          out[i] = e[i];
    }
  };

  for (var i = 0; i < arguments.length; i++) {
    insert(arguments[i]);  
  }

  return out; 
}

var a = {'a': 'aa'};
var b = {'b': 'bb', 'bbb': 'bbbb'};
var c = {'c': 'cc'};

var combined = merge(a,b,c); 
```*

# c++ - 在地图中擦除时崩溃（C++）

> ID：15205270
> 
> 赞同：-2
> 
> 时间：2013-03-04T15:39:46.407
> 
> 标签：c++, stl

这是始终崩溃的代码的一部分。我无法理解这次崩溃的原因。我所做的只是在循环中设置一些指针。如果我评论这个循环，一切都会好的。很奇怪..底部的代码是崩溃发生的地方。我不知道调用什么析构函数以及为什么我的程序崩溃了。

```
 typedef std::set<IDrawable**> TDrawableList;
        typedef std::map<std::string, TDrawableList> THashLoad;
//  ...
    THashLoad::iterator itLoad =  gpMapRenderer->m_unloadedCells.find(file.substr(6, file.length()));
        if (itLoad != gpMapRenderer->m_unloadedCells.end())
        {
                TDrawableList::iterator itCells = itLoad->second.begin();
                TDrawableList::iterator itCellsEnd = itLoad->second.end();
                for (; itCells != itCellsEnd; ++itCells)
                {
                        **itCells = (IDrawable*)itHashPics->second.pImg;
                }

                gpMapRenderer->m_unloadedCells.erase(itLoad);  // < --- CRASH
        }
    // ... 
    // _construct.h
    // ...
template <class _Tp>
inline void _Destroy(_Tp* __pointer) {
# if _MSC_VER >= 1010
  __pointer;
# endif    // _MSC_VER >= 1000
# ifdef _STLP_TRIVIAL_DESTRUCTOR_BUG
  typedef typename __type_traits<_Tp>::has_trivial_destructor _Trivial_destructor;
  __destroy_aux(__pointer, _Trivial_destructor());
# else
#  if ( defined (__BORLANDC__) && ( __BORLANDC__ < 0x500 ) )
    __pointer->_Tp::~_Tp();
#  else
    __pointer->~_Tp(); // < ---- CRASH
#  endif
# endif
# ifdef _STLP_DEBUG_UNINITIALIZED
        memset((char*)__pointer, _STLP_SHRED_BYTE, sizeof(_Tp));
# endif
} 
```

PS我的程序是单线程的。

谢谢你。

更新：

```
class IDrawable
{
public:
    virtual ~IDrawable() {};

    virtual void Draw(const CIwSVec2& pos) = 0;
    virtual void Draw(const CIwSVec2& pos, const CIwSVec2& size) { IwAssert(IDRAWABLE, "Not Implemented");};
}; 
```

所以这是我添加到 m_unloadedCells 的方法：

```
void MapRenderer::AddCellToUnloadedList(const std::string& filename, IDrawable** pElement)
{
    THashLoad::iterator itLoad = m_unloadedCells.find(filename);
    if (itLoad != m_unloadedCells.end())
        itLoad->second.insert(pElement);
    else
    {
        std::set<IDrawable**> _set;
        _set.insert(pElement);
        m_unloadedCells.insert(make_pair(filename, _set));
    }
} 
```

在代码中的某处：

```
AddCellToUnloadedList(filenameToLoad, &itHashCells->second[index].drawingElement[i].pDrawable) 
```

它哈希单元：

```
typedef std::map<int, std::vector<Cell2> > THashCells;
THashCells itHashCells; 
```

单元格2：

```
enum eDrawableType
{
    DTYPE_Sprite = 0,
    DTYPE_Animation
};

struct DrawingElement
{
    eDrawableType type;
    IDrawable* pDrawable;
};

struct Cell2
{
    Cell2()
    {
        drawingElement.reserve(10);
    }

    int location;
    int x, y;

    std::vector<DrawingElement> drawingElement;

    MinimapTileInfo minimap_tile_info[10];
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:58:39.527

问题似乎出在这一行：

```
**itCells = (IDrawable*)itHashPics->second.pImg; 
```

不在擦除（）中。试着把它评论出来看看。
我认为问题是您初始化指向 2 个向量内的数据结构的指针，尽管我看到您在 Cell2 中保留了 10 个元素，但不清楚您是否没有超过 10 个元素或在 itHashCells 中保留足够的元素。因此，如果您在任何该向量中插入足够的元素以使它们重新分配使 gpMapRenderer->m_unloadedCells 中的指针无效的空间

我建议花时间重构你的代码，尽量避免使用指向指针的指针，或者至少使用不会使它们无效的数据结构。当前状态下的代码是不可维护的。

您也可以重写此代码：

```
void MapRenderer::AddCellToUnloadedList(const std::string& filename, IDrawable** pElement)
{
    THashLoad::iterator itLoad = m_unloadedCells.find(filename);
    if (itLoad != m_unloadedCells.end())
        itLoad->second.insert(pElement);
    else
    {
        std::set<IDrawable**> _set;
        _set.insert(pElement);
        m_unloadedCells.insert(make_pair(filename, _set));
    }
} 
```

像这样：

```
void MapRenderer::AddCellToUnloadedList(const std::string& filename, IDrawable** pElement)
{
    m_unloadedCells[ filename ].insert( pElement );
} 
```

我认为它更具可读性，至少与原版一样有效。

# ms-access - ms 访问输入掩码 MM/DD/YYYY

> ID：15205278
> 
> 赞同：0
> 
> 时间：2013-03-04T15:40:05.140
> 
> 标签：ms-access

您好我在英国工作，正在创建一个 MS Access 应用程序。我有一个文本字段，它将根据这种格式获取日期：MM/DD/YYYY。

但是，由于我在英国，它使用 DD/MM/YYYY 的短日期格式。如何确保它使用 MM/DD/YYYY？如果在美国打开应用程序，它会自动执行此操作吗？还是我必须提供输入掩码和一些 VB 代码才能对其进行排序？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T21:33:00.717

对其进行排序 - 如果您创建一个文本字段，然后将其格式更改为 MM/DD/YYYY - 这将更改您输入的任何美国格式 - 例如，您输入的英国格式 (DD/MM/YYYY) 为 12/03 /2012 这将更改为 2012 年 3 月 12 日。

这解决了我的问题，但如果您希望比较两个日期值或其他内容，可能会出现其他问题。希望这可以帮助...

# java - 核心jsf中outputPanel的等效组件

> ID：15205279
> 
> 赞同：2
> 
> 时间：2013-03-04T15:40:05.470
> 
> 标签：java, jsf

我面临一种情况，我必须使用组件包装器，或者与 primefaces 中的“outputPanel”相同的东西。你知道任何 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T15:47:44.690

由于您要求使用等效的组件包装器，因此我建议使用具有列值为 1 的 panelGrid。

```
<h:panelGrid id="grid" columns="1">
</h:panelGrid> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T19:09:18.647

> *我需要从其中的命令链接触发的 ajax 操作重新渲染 DataTable*

只需引用数据表本身。

```
<h:form id="form">
    <h:dataTable id="table" ...>
        <h:column>
            <h:commandLink ...>
                <f:ajax ... render=":form:table" />
            </h:commandLink>
        </h:column>
    </h:dataTable>
</h:form> 
```

或者，如果您出于某种不清楚的原因真的坚持，那么简单的 JSF 等价物`<p:outputPanel>`就是`<h:panelGroup>`.

```
<h:form id="form">
    <h:panelGroup id="group">
        <h:dataTable ...>
            <h:column>
                <h:commandLink ...>
                    <f:ajax ... render=":form:group" />
                </h:commandLink>
            </h:column>
        </h:dataTable>
    </h:panelGroup>
</h:form> 
```

# c# - 为什么在 XAML 中绑定 MainWindow 数据上下文与使用 this.datacontext=this 在代码隐藏中绑定的行为不同？

> ID：15205280
> 
> 赞同：14
> 
> 时间：2013-03-04T15:40:07.827
> 
> 标签：c#, wpf, xaml, data-binding

当我了解 WPF 和其他东西时，我正在尝试使用数据绑定将 ObservableCollection 绑定到 DataGrid 的 ItemsSource。

在代码隐藏中，我可以使用`this.DataContext = this;`或设置 DataContext `bloopDataGrid.DataContext = this;`。这很好，花花公子。

我想我可以尝试类似的东西

```
<Window.DataContext>
    <local:MainWindow/>
</Window.DataContext> 
```

在我的主窗口中，但这会导致堆栈溢出异常，如[本问题](https://stackoverflow.com/q/14152222/1751715)所述。好吧，这有点道理。

在阅读[了这个](https://stackoverflow.com/a/12848253/1751715)和其他说要`DataContext="{Binding RelativeSource={RelativeSource Self}}"`在窗口的 XAML 代码中尝试的问题/答案之后，我认为我*实际上可以做到这一点*。显然我**不能**。或者至少，IDE 允许我并且它在语法上是正确的，但没有做我想要的（即，确切地做了什么`this.DataContext = this;`）。

然后我读[了这篇](https://stackoverflow.com/a/10510858/1751715)关于使用的文章`"{Binding ElementName=, Path=}"`并尝试像这样使用它：

```
<DataGrid
    Name="bloopDataGrid"
    Grid.Row="1"
    ItemsSource="{Binding ElementName=testWin, Path=OutputCollection}">
</DataGrid> 
```

这也行不通。也许不是出于同样的原因，但我无法弄清楚它的问题。

奇怪的是，我无法复制[Rachel Lim 的博客文章](http://rachel53461.wordpress.com/2012/07/14/what-is-this-datacontext-you-speak-of/)中显示的重新绑定示例。

**XAML：**

```
<Window
    x:Class="DataBinding.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow"
    Height="350"
    Width="525"
    x:Name="testWin">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition />
            <RowDefinition />
        </Grid.RowDefinitions>

        <Label Grid.Row="0" Content="{Binding text}">   
        </Label>

        <DataGrid
            Name="bloopDataGrid"
            Grid.Row="1"
            ItemsSource="{Binding Path=OutputCollection}">
        </DataGrid>
    </Grid>
</Window> 
```

**C＃：**

```
using System;
using System.Collections.ObjectModel; //For ObservableCollection<T>
using System.Windows;

namespace DataBinding
{
    public partial class MainWindow : Window
    {
        public String text { get; set; }
        public ObservableCollection<testStruct> OutputCollection { get; set; }

        public struct testStruct
        {
            public testStruct(String x, String y) : this()
            {
                Col1 = x;
                Col2 = y;
            }
            public String Col1 { get; set; }
            public String Col2 { get; set; }
        }

        public MainWindow()
        {
            InitializeComponent();

            testA t1 = new testA();
            this.DataContext = this;
            //this.DataContext = t1;
            //bloopDataGrid.DataContext = this;
            text = "bound \"this\"";
            t1.text = "bound a class";

            OutputCollection = new ObservableCollection<testStruct>();
            OutputCollection.Add(new testStruct("1", "2"));
            OutputCollection.Add(new testStruct("3", "4"));
        }

        public class testA
        {
            public String text { get; set; }
        }

    }
} 
```

上面的代码是我用来测试的，目前正在使用正确给我的代码隐藏版本

![在代码隐藏中](../Images/934d63d3bd2310a521ed7beba60c58ab.png)

我做错了什么，这使我无法获得与上图相同的结果，而是使用 XAML 进行 DataContext 处理？我没有正确连接点吗？...我错过了一些点吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-04T15:44:59.573

```
<Window.DataContext>
    <local:MainWindow/>
</Window.DataContext> 
```

不一样

```
this.DataContext = this; 
```

第一个是创建`MainWindow`类的一个新实例并将其分配给 的`DataContext`属性`Window`，而第二个是将完全相同的实例分配`Window`给它的`DataContext`属性。

为了在 XAML 中实现这一点，您需要使用[`RelativeSource`](http://msdn.microsoft.com/en-us/library/system.windows.data.relativesource%28v=vs.100%29.aspx)绑定：

```
<Window DataContext="{Binding RelativeSource={RelativeSource Self}}">
</Window> 
```

**编辑：**

在 XAML 中定义和在后面的代码中定义之间的行为差​​异`DataContext`是由于在构造函数完成执行时实际解析 XAML，因为`Dispatcher`在执行它之前等待用户代码（在窗口的构造函数中）完成待处理的操作。

这会导致这些不同时刻的实际属性值不同，并且由于没有`INotifyPropertyChanged`，WPF 无法更新 UI 以反映新值。

您自己`could`实现`INotifyPropertyChanged`，`Window`但我建议为此创建一个 ViewModel，因为我不喜欢将`INotifyPropertyChanged`（这更像是一个 ViewModel 概念）与`DependencyObject`派生类（UI 元素）混合的事实。

# android - 在用户的位置上显示自定义标记

> ID：15205282
> 
> 赞同：0
> 
> 时间：2013-03-04T15:40:24.287
> 
> 标签：android, android-mapview, android-overlay

我正在使用`Google Maps v2 Android MapView`. 用户位置的标记是一个*蓝色圆圈*。我想将其更改为我的`drawable`.

这可能吗？

我知道我可以添加这样的标记，但这不适用于用户自己的位置：

```
this.marker = BitmapDescriptorFactory.fromResource(R.drawable.marker);
this.map.addMarker(new MarkerOptions().position(position).title(name)
                .draggable(false).icon(this.marker)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:00:49.123

是的，您可以添加自定义标记以显示用户当前位置....但您需要使用 locationListener 计算您自己的纬度和经度，并在地图上显示该位置，如下所示：

```
public void setCurretnLocMarker(loc) {

        LatLng mLatLng=new LatLng(loc.getLatitude(), loc.getLongitude());
        getMap().animateCamera(CameraUpdateFactory.newLatLng(mLatLng));

        getMap().addMarker(new MarkerOptions().position(mLatLng).title(mLatLng.toString()).draggable(false));
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T16:07:04.130

我想到的方法是这样的。

1）你有当前位置的latlng ...添加带有自定义drawable的标记。2）禁用googlemap上的当前位置..禁用它认为调用是

```
mGoogleMapObject.setLocationEnable(false); 
```

而已。

# asp.net - 具有不同应用程序的多个用户帐户的 ASP.Net 成员资格

> ID：15205284
> 
> 赞同：0
> 
> 时间：2013-03-04T15:40:27.887
> 
> 标签：asp.net, asp.net-mvc, asp.net-membership

我正在创建一个 ASP.NET 网站并打算拥有多个“应用程序”，每个应用程序都有自己的一组用户。实际上，我需要一种方法来让人们可以注册不同的组，因此可以在“ApplicationA”中创建“UserA”，也可以在“ApplicationB”中创建“UserA”。我*不*希望在所有应用程序中都创建 UserA，用户必须感觉好像他们正在为每个应用程序创建单独的用户帐户。

我*想*我可以使用 ASP.NET 的 Membership 提供程序和 Applications 表来做到这一点，但我很难找到关于如何做到这一点的好教程（搜索“应用程序”只会让我了解如何创建 ASP.NET 应用程序，而不是 Applications 表与 ASP.NET Membership 的关系）。谁能在这里指出我正确的方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T01:31:15.613

是的，您可以为您声明的应用程序使用 ASP.Net Membership。

请使用新的[ASP.Net Universal Provider](http://www.hanselman.com/blog/IntroducingSystemWebProvidersASPNETUniversalProvidersForSessionMembershipRolesAndUserProfileOnSQLCompactAndSQLAzure.aspx)。（生成 aspnet_xxx 表的成员资格是旧的。）

还要确保在 web.config 中设置以下内容 -

1.  `applicationName`为每个应用程序设置（在成员资格、角色管理器中）。
2.  放`machineKey`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T15:59:25.413

这是架构： [http ://superpatrick.files.wordpress.com/2007/11/aspnet_membership_schema_updated.png](http://superpatrick.files.wordpress.com/2007/11/aspnet_membership_schema_updated.png)

这是有关会员资格的一些信息 [http://www.asp.net/web-forms/tutorials/security/membership/creating-the-membership-schema-in-sql-server-vb](http://www.asp.net/web-forms/tutorials/security/membership/creating-the-membership-schema-in-sql-server-vb)

# java - 从 mongo 结果中检索 int 的最简单方法？

> ID：15205292
> 
> 赞同：9
> 
> 时间：2013-03-04T15:41:02.617
> 
> 标签：java, mongodb

我正在从 mongo 光标对象中提取一个 int，如下所示：

```
DBObject mapObj = cursor.next();
int autostart = (int) (double) (Double) mapObj.get("autostart"); 
```

我必须三次转换才能将其变为整数似乎很奇怪，有没有更好的方法？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-05T04:09:33.133

我认为你真正想要的是这样的：

```
DBObject mapObj = cursor.next();
int autostart = ((Number) mapObj.get("autostart")).intValue(); 
```

不转换为字符串，如果该值从原始 Integer 值转换为 Double 或 Long（可能会丢失精度），则它是安全的。Double、Long 和 Integer 都扩展了 Number。

HTH 罗布

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-04T15:43:18.567

Also, you can do it this way:

`int autostart = Integer.valueOf(mapObj.get("autostart").toString());`

Regarding your last comment:

If you want double, use this:

`int autostart = Double.valueOf(mapObj.get("autostart").toString());`

But what is the sense in that? You could rather have :

`double autostart = Double.valueOf(mapObj.get("autostart").toString());`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-04T15:42:50.433

是的，你只需要一个演员表。

```
double autostart = (Double) mapObj.get("autostart"); 
```

# image-processing - 在没有插值的情况下聚合相邻像素 Python / GDAL 和 Numpy

> ID：15205298
> 
> 赞同：1
> 
> 时间：2013-03-04T15:41:12.457
> 
> 标签：image-processing, numpy, python-2.7, gdal

假设我们有一个 2000 x 2000 像素的图像，像素大小为 10 x 10 米。像素值也是介于 0.00 - 10.00 之间的浮点数。这是图A。

我想通过从左上角开始在非重叠块中空间聚合四个相邻像素，将图像 A 的大小调整为其尺寸的四分之一（即 1000 x 1000 像素），像素大小为 20 x 20 米（图像 B）图像的一角，而图像 B 中每个像素的值将是它们的算术平均值的结果。

我使用stackoverflow的几个来源编写了以下代码；但是由于某种原因，我不理解生成的图像（图像 B）并不总是正确编写，并且我想进一步处理它的任何软件（即 ArcGIS、ENVI、ERDAS 等）都无法读取它。

我将不胜感激任何帮助

最好的问候迪米特里斯

```
import time 
import glob
import os
import gdal
import osr
import numpy as np

start_time_script = time.clock()

path_ras='C:/rasters/'

for rasterfile in glob.glob(os.path.join(path_ras,'*.tif')):
rasterfile_name=str(rasterfile[rasterfile.find('IMG'):rasterfile.find('.tif')])

print 'Processing:'+ ' ' + str(rasterfile_name)

ds = gdal.Open(rasterfile,gdal.GA_ReadOnly)
ds_xform = ds.GetGeoTransform()

print ds_xform

ds_driver = gdal.GetDriverByName('Gtiff')
srs = osr.SpatialReference()
srs.ImportFromEPSG(26716)

ds_array = ds.ReadAsArray()

sz = ds_array.itemsize

print 'This is the size of the neighbourhood:' + ' ' + str(sz)

h,w = ds_array.shape

print 'This is the size of the Array:' + ' ' + str(h) + ' ' + str(w)

bh, bw = 2,2

shape = (h/bh, w/bw, bh, bw)

print 'This is the new shape of the Array:' + ' ' + str(shape)

strides = sz*np.array([w*bh,bw,w,1])

blocks = np.lib.stride_tricks.as_strided(ds_array,shape=shape,strides=strides)

resized_array = ds_driver.Create(rasterfile_name + '_resized_to_52m.tif',shape[1],shape[0],1,gdal.GDT_Float32)
resized_array.SetGeoTransform((ds_xform[0],ds_xform[1]*2,ds_xform[2],ds_xform[3],ds_xform[4],ds_xform[5]*2))
resized_array.SetProjection(srs.ExportToWkt())
band = resized_array.GetRasterBand(1)

zero_array = np.zeros([shape[0],shape[1]],dtype=np.float32)

print 'I start calculations using neighbourhood'
start_time_blocks = time.clock()

for i in xrange(len(blocks)):
    for j in xrange(len(blocks[i])):

        zero_array[i][j] = np.mean(blocks[i][j])

print 'I finished calculations and I am going to write the new array'

band.WriteArray(zero_array)

end_time_blocks = time.clock() - start_time_blocks

print 'Image Processed for:' + ' ' + str(end_time_blocks) + 'seconds' + '\n'

end_time = time.clock() - start_time_script
print 'Program ran for: ' + str(end_time) + 'seconds' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:44:19.740

```
import time 
import glob
import os
import gdal
import osr
import numpy as np

start_time_script = time.clock()

path_ras='C:/rasters/'

for rasterfile in glob.glob(os.path.join(path_ras,'*.tif')):
rasterfile_name=str(rasterfile[rasterfile.find('IMG'):rasterfile.find('.tif')])

print 'Processing:'+ ' ' + str(rasterfile_name)

ds = gdal.Open(rasterfile,gdal.GA_ReadOnly)
ds_xform = ds.GetGeoTransform()

print ds_xform

ds_driver = gdal.GetDriverByName('Gtiff')
srs = osr.SpatialReference()
srs.ImportFromEPSG(26716)

ds_array = ds.ReadAsArray()

sz = ds_array.itemsize

print 'This is the size of the neighbourhood:' + ' ' + str(sz)

h,w = ds_array.shape

print 'This is the size of the Array:' + ' ' + str(h) + ' ' + str(w)

bh, bw = 2,2

shape = (h/bh, w/bw, bh, bw)

print 'This is the new shape of the Array:' + ' ' + str(shape)

strides = sz*np.array([w*bh,bw,w,1])

blocks = np.lib.stride_tricks.as_strided(ds_array,shape=shape,strides=strides)

resized_array = ds_driver.Create(rasterfile_name + '_resized_to_52m.tif',shape[1],shape[0],1,gdal.GDT_Float32)
resized_array.SetGeoTransform((ds_xform[0],ds_xform[1]*2,ds_xform[2],ds_xform[3],ds_xform[4],ds_xform[5]*2))
resized_array.SetProjection(srs.ExportToWkt())
band = resized_array.GetRasterBand(1)

zero_array = np.zeros([shape[0],shape[1]],dtype=np.float32)

print 'I start calculations using neighbourhood'
start_time_blocks = time.clock()

for i in xrange(len(blocks)):
    for j in xrange(len(blocks[i])):

        zero_array[i][j] = np.mean(blocks[i][j])

print 'I finished calculations and I am going to write the new array'

band.WriteArray(zero_array)

end_time_blocks = time.clock() - start_time_blocks

print 'Image Processed for:' + ' ' + str(end_time_blocks) + 'seconds' + '\n'

end_time = time.clock() - start_time_script
print 'Program ran for: ' + str(end_time) + 'seconds' 
```

# jquery - JQuery SlideToggle 宽度扩展

> ID：15205300
> 
> 赞同：0
> 
> 时间：2013-03-04T15:41:16.223
> 
> 标签：jquery, width, slidetoggle

大家好，

我的 JQuery 有问题。当我将鼠标悬停在每个选项卡区域上并水平移动时，.panel 似乎失去了它的宽度属性，并且当它向上滑动时要么扩大要么缩小。有任何想法吗？

[http://jsfiddle.net/jfarr07/5nEXB/](http://jsfiddle.net/jfarr07/5nEXB/)

jQuery

```
<script>
$(function()
{
    $("li.nav").hover(function()
    {
        var x = $(this).offset().left;
        var y = $(this).offset().top;
        //var w = $(this).width();
        var totalWidth = $(this).width();
        totalWidth += parseInt($(this).css("padding-left"), 10) + parseInt($(this).css("padding-right"), 10); //Total Padding Width
        totalWidth += parseInt($(this).css("margin-left"), 10) + parseInt($(this).css("margin-right"), 10); //Total Margin Width
        totalWidth += parseInt($(this).css("borderLeftWidth"), 10) + parseInt($(this).css("borderRightWidth"), 10); //Total Border Width
        var h = $(this).height();

        //$("#navigation").find(".panel").stop().slideToggle("fast");
        $("#navigation").find(".panel").animate({
            top: y,
            left : x
        }, 0 ).css({'width' : totalWidth,
            '40px' : h,
            'position' : 'absolute'}).slideDown(200).css('display','block');

    }, function() {
        $("#navigation").find(".panel").stop().slideUp("fast");
    });
}); 
```

CSS

```
body, html {
padding:0;
margin:0;
background:url(../../Portfolio/images/wood2.png);
}

a:link {
text-decoration:none;
color:#000;
font-family:open-sans, HelveticaNeue, Helvetica Neue Condensed Bold, Helvetica Neue, serif;
-webkit-transition:all 0.4s ease;
-moz-transition:all 0.4s ease;
-ms-transition:all 0.4s ease;
-o-transition:all 0.4s ease;
transition:all 0.4s ease;
}

a:visited {
color:#000;
}

a:hover {
color:#FFF;
    -webkit-transition:all 0.4s ease;
-moz-transition:all 0.4s ease;
-ms-transition:all 0.4s ease;
-o-transition:all 0.4s ease;
transition:all 0.4s ease;
}

#navigation {
width:auto;
height:40px;
background:rgba(255, 255, 255, .45);
min-width:700px;
}

ul#nav {
display:inline;
list-style-type:none;
overflow:auto;
padding:0;
margin:0;
}

li.nav {
display:inline-block;
margin:0px 0px 0px 0px;
padding:0px 0px 0px 0px;
position:relative;
height:30px;
float:left;
border-bottom:none;
}

ul li.nav a {
display:block;
padding-top:10px;
padding-bottom:10px;
padding-left:30px;
padding-right:30px;
}

* html ul li a {
width: 1%;
}

.panel {
position:absolute;
background:#363;
background-size:100%;
height:40px;
display:none;
width:100%;
} 
```

HTML

```
<div id="navigation">
    <div class="panel"></div>
    <ul id="nav">
        <li class="nav"><a href="#">HOME</a></li>
        <li class="nav"><a href="#">OUR STORY</a></li>
        <li class="nav"><a href="#">GALLERY</a></li>
        <li class="nav"><a href="#">GIFT REGISTRY</a></li>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T15:51:40.160

问题在于 .panel 中的使用重叠。您在按时间顺序重叠的过渡事件中使用相同的元素。

当您离开一个选项卡时， .panel 设置为它用于下一个选项卡的宽度。

您要么需要在离开选项卡时立即隐藏面板，要么为每个选项卡使用单独的面板。

更新：这是一个例子。

[http://jsfiddle.net/5nEXB/1/](http://jsfiddle.net/5nEXB/1/)

```
.panel {z-index: -1;}

<div id="navigation">
    <div class="panel"></div>
    <ul id="nav">
        <li class="nav">
            <div class="panel"></div><a href="#">HOME</a>

        </li>
        <li class="nav">
            <div class="panel"></div><a href="#">OUR STORY</a>

        </li>
        <li class="nav">
            <div class="panel"></div><a href="#">GALLERY</a>

        </li>
        <li class="nav">
            <div class="panel"></div><a href="#">GIFT REGISTRY</a>

        </li>
    </ul>
</div>

$(function () {
    $("li.nav").hover(function () {
        $(this).find(".panel").slideDown();
    }, function () {
        $(this).find(".panel").slideUp();
    });
}); 
```

如果您不想将所有这些 .panel div 放入您的 HTML 中，您可以在悬停时使用 jQuery 将它们放在前面。

如果出于某种原因，您想坚持原来的方法，您可以立即隐藏：http: [//jsfiddle.net/5nEXB/2/](http://jsfiddle.net/5nEXB/2/)

# drupal - 如何使用一种内容类型作为另一种内容类型的选项

> ID：15205301
> 
> 赞同：0
> 
> 时间：2013-03-04T15:41:19.400
> 
> 标签：drupal, drupal-7, drupal-views, taxonomy, drupal-taxonomy

我试图找到一种方法来使用一种内容类型的字段作为另一种内容类型的选项列表。

例如，我正在尝试为特定产品类别构建图像滑块。所以一方面我会有一个包含所有类别的内容类型“产品类别”，另一方面我会有一个包含图像、标题、替代文本和选择的“产品照片”内容类型包含所有产品类别的下拉列表（直接从“产品类别”内容加载）。

这样，我也可以将“产品类别”添加到主“基本页面”内容页面，并将其用于构建照片滑块的视图，从而非常容易将概览页面添加到我的网站一个特定的产品类别，同时仍然保持一切动态（所以一旦网站启动并运行，我就不必摆弄我的观点）。

这里有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T15:14:06.620

使用分类法是 Drupal 中表示简单或嵌套分类的常用解决方案。

分类词汇非常灵活，也可以与[分类菜单](http://drupal.org/project/taxonomy_menu)或类似模块结合使用来处理面包屑、菜单条目或权限。

但是您应该知道，默认情况下，每个分类术语都有自己的附加菜单条目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T15:05:34.523

分类学绝对是要走的路。这是一个 Drupal 6 演练，但[http://www.youtube.com/watch?v=iBdVW7fC2Tg](http://www.youtube.com/watch?v=iBdVW7fC2Tg)上的示例应该会有所帮助。分类学+视图+ Pathauto，你很高兴。

# c++ - C++ 接口错误，非静态成员引用必须相对于特定对象

> ID：15205302
> 
> 赞同：2
> 
> 时间：2013-03-04T15:41:19.657
> 
> 标签：c++, interface

我有一个接口，但我不能使用它，因为方法应该是静态的……或者其他解决方案……据我所知，它们不能是静态的……：

定义了它使用的函数的图形库：

```
GraphicsLibrary.h
    virtual void drawText(const std::string& text, const Point& pt, unsigned char r, unsigned char g, unsigned char b); 
```

这里只是为了说清楚，OpenGL是从GraphicsLibrary派生的：

```
OpenGL.h
class OpenGL : public GraphicsLibrary 
```

OpenGL.cpp 使用来自 GraphicsLibrary 的虚函数，在括号中它“做”了一些事情..：

```
OpenGL.cpp 
void GraphicsLibrary::drawText(const std::string& text, const Point &pt, unsigned char r, unsigned char g, unsigned char b)
{
//does things
} 
```

然后我的主要我使用该方法......但它给出了一个错误

```
MyMain
OpenGL::drawText(toString(mousePos_world), drawPosition, 255, 0, 0); 
```

错误：非静态成员引用必须相对于特定对象

* * *

我应该如何解决这个问题？我读到我应该将函数设为静态，但我认为我不能......对吗？或者大多数人说，想想为什么你用其他类的方法来构建类，但那是因为我有一个接口......！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T15:42:53.577

您需要创建一个`OpenGL`类的实例：

```
OpenGL ogl;
ogl.drawText(...); 
```

您的函数`drawText`是该类的成员函数，这意味着它必须在该类的对象上调用。对象是特定类的实例。

然后在那个对象上你可以调用你的函数。

如果你不想创建一个实例，那么你应该创建你的函数`static`，你可以像这样调用它： `OpenGL::drawText(...);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T15:43:10.213

你只需要一个实例`OpenGL`来调用它。具体来说，你如何做到这一点取决于`OpenGL`你没有提供的信息，但它看起来像这样：

```
OpenGL gl;
gl.drawText(toString(mousePos_world), drawPosition, 255, 0, 0); 
```

您试图调用`drawText`它，就好像它是一个静态成员函数（使用`::`）。由于`drawText`不是静态的，因此您需要一个对象来调用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T15:43:31.823

You should create your graphic library object.

```
std::unique_ptr<GraphicsLibrary> pGL(new OpenGL); //or shared_ptr
pGL->drawText(...); 
```

# php - 奇怪的三元运算符

> ID：15205311
> 
> 赞同：0
> 
> 时间：2013-03-04T15:41:49.290
> 
> 标签：php

```
<?php echo (isset($var)) ?: $var; ?> 
```

这个语法正确吗？如果 $var 不会被设置，空字符串或 null 会显示什么？用这个可以吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T15:46:20.983

这个：

```
<?php echo (isset($var)) ?: $var; ?> 
```

做同样的事情：

```
<?php
 if (isset($var)) {
  // do nothing
 } else {
  echo $var;
 }
?> 
```

因此，如果变量为空/空/等，则您正在尝试显示变量...

如果函数：

```
<?php $k= (cond ? do_if_true : do_if_false); ?> 
```

`$k`可能是新变量,`echo`等
`cond`- `isset`, `$z==$y`, 等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T15:47:27.940

语法正确，用法不正确。在这里说：

```
$var = something();
echo $var ?: 'false'; 
```

这相当于：

```
$var = something();
if ($var) {
    echo $var;
} else {
    echo 'false';
} 
```

或简写`$var ? $var : 'false'`。

您的示例毫无意义，因为它输出`isset($var)`( `true`) if`$var` *设置*的结果，`$var`否则。

您需要`echo isset($var) ? $var : null`or `if (isset($var)) echo $var`，并且没有捷径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T15:47:07.623

代码没有意义，生成通知或回显 1，您无法打印未设置的 $var

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T15:48:10.190

语法很好。

如果 $var 被设置，那么它会输出，如果没有，它会抛出一个关于未设置的 $var 回显的通知。

如果你的 error_reporting 设置为 E_NONE 那么你只会看到一个白屏，如果设置了 $var 然后你会看到 $var 的值

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-04T15:48:29.057

这将回显 $var 任何一种方式。

> 从 PHP 5.3 开始，可以省略三元运算符的中间部分。表达式 expr1 ?：如果 expr1 的计算结果为 TRUE，则 expr3 返回 expr1，否则返回 expr3。

因此，如果设置了 $var，它会回显 $var（因为它的计算结果为 TRUE），如果它没有设置为任何值或计算结果为 false，那么您手动要求它回显 $var。

理想情况下，您想要：

```
(condition  ?  if_true_then_do_this : if_false_then_do_this) 
```

简而言之，这变成

```
 (condition ? ? false) 
```

并且由于您在这两个地方都指定了 $var，因此无论哪种方式，您都会得到 $var。你要这个：

```
echo ($var?:"null"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-04T15:48:41.290

不，这个语法不正确。
在回显时，**所有**变量都必须设置**并正确格式化**。
否则意味着开发人员不知道他们的变量来自哪里以及它们包含什么 - 一条直接的注入之路。

所以，正确的语法是

```
<?=$var?> 
```

至于三元组——我不喜欢它们。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-04T16:04:50.337

```
<?php (isset($var)) ? echo "" : echo $var; ?> 
```

你可以用这个。

# jquery - 向下滚动 100% 屏幕高度后更改 CSS 类

> ID：15205313
> 
> 赞同：1
> 
> 时间：2013-03-04T15:41:52.250
> 
> 标签：jquery, css, scroll

我正在制作一个单页网站，我想在第二部分显示导航菜单直到结束。我发现了这个问题： [Change CSS class after scrolling 1000px down](https://stackoverflow.com/questions/12470645/change-css-class-after-scrolling-1000px-down)

...我使用**AlienWebguy的答案**

```
$(document).scroll(function() {
    $('#menu').toggle($(this).scrollTop()>1000)
});​ 
```

但我不想做1000px。我想使用它 100% 的屏幕，它可以随着不同的平台或分辨率而改变。

你知道我能做什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T15:45:02.867

用这个：

```
$(document).scroll(function() {
    var windowHeight = $(window).height();
    $('#menu').toggle($(this).scrollTop()>windowHeight)

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T15:45:27.533

您可以替换`1000`为`$(window).height()`

如：

```
$(document).scroll(function() {
    $('#menu').toggle($(this).scrollTop()>$(window).height())
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T15:56:37.263

你可以使用它：

```
$(document).on("scroll", function(){
    if($(document).scrollTop() >= ($(document).height() - $(window).height())){
        //here, you're at the bottom of the page
        console.log("BOTTOM");
    } else {
        //here, you're not arrived yet
    }
}); 
```

理论上，它适用于每种屏幕尺寸。

# tomcat - 在 Ubuntu 上重生 Tomcat 的 Upstart 脚本

> ID：15205314
> 
> 赞同：1
> 
> 时间：2013-03-04T15:41:53.460
> 
> 标签：tomcat, ubuntu, upstart, foreman

我正在使用`foreman export upstart /etc/init`设置一个 tomcat 应用程序服务器，以便可以在 Ubuntu 中监控和维护可用性。

但有一些挑战，我想就以下问题提出一些建议：

1) 在`sudo service tomcat start`使用`kill <pid>`... 所需的端口尚未发布。克服这个问题的解决方法是什么？

```
SEVERE: Failed to initialize end point associated with ProtocolHandler ["http-nio-8443"]
8 java.net.BindException: Address already in use
9       at sun.nio.ch.Net.bind0(Native Method)
43 Caused by: java.net.BindException: Address already in use
44      at sun.nio.ch.Net.bind0(Native Method) 
```

2）我`initctl list | grep tomcat`用来找出`pid`（在这种情况下为3518）并终止进程：

```
$ initctl list | grep tomcat
  tomcat start/running
  tomcat-web-1 start/running, process 3518
  tomcat-web start/running 
```

是否有可能杀死 tomcat-web-1 实际上是测试 Upstart 重生能力的错误方法？

3）另一个挑战是，如果我只这样做一两次，我很快就会遇到内存问题：

```
376 Error occurred during initialization of VM
377 Could not reserve enough space for object heap 
```

4) 最后，默认脚本似乎只为错误的退出条件处理重生。但是机器重启不算作其中之一，那么应该如何`foreman export upstart /etc/init`增强导出来处理这种情况呢？

我想知道是否有其他人之前遇到过类似的挑战和/或有解决方法？

* * *

更新#1（2013 年 3 月 4 日）：

要完成 (4)，我只需要编辑 appname.conf 文件的`start on`语句以包含`start on (... OR runlevel [2345])`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T02:50:30.440

在 Step2 中，列出的所有三个结果实际上都是 unix 进程。它们都不是tomcat java webserver。所以你正在杀死其中一个进程，它可以帮助你监管实际的 tomcat/java 进程，当它恢复时..它会尝试再次启动 tomcat。运行tomcat的端口从未被释放，内存仍在使用，因为您从未关闭原始tomcat！因此你体验（1）和（3）。

识别 java 进程的更好/更简单的方法是查看它的实用程序，例如 System Monitor。您将看到一个名为“java”的进程，并且该进程 ID 将在此处列出。现在为该 pid 发出一个 kill 指令，它将向您演示工头 + upstart 重生工作正常。

# validation - symfony2 回调和自定义验证约束之间的区别

> ID：15205318
> 
> 赞同：9
> 
> 时间：2013-03-04T15:42:14.053
> 
> 标签：validation, symfony, entity

据我了解，**[回调](http://symfony.com/doc/master/reference/constraints/Callback.html)**是一种约束，您可以自定义并设置为任何字段以进行任何类型的验证。

自**[定义验证约束](http://symfony.com/doc/master/cookbook/validation/custom_constraint.html)**覆盖基本约束类（在任何字段上创建任何类型的验证）

我只是不确定有什么区别，为什么我要使用一个而不是另一个？是否也有任何性能差异？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T16:18:56.997

我没有对表单组件进行太多研究以了解任何性能差异，但除此之外，为什么你应该选择一个而不是另一个：

### 回调

*   它旨在定制整个验证过程，而不仅仅是约束。例如，您可以设置错误需要显示的位置；
*   目标**始终**是一个类，你不能在属性上使用它；
*   您不能重复使用它，它仅在该类/实体上可用。

### 自定义验证器约束

*   您可以在任何地方重用它（正如@MrGlass 所说，您甚至可以使用服务作为约束）；
*   它可以用于类和属性目标；
*   您**只能**自定义失败时的操作，而不能自定义失败后的操作。

# c# - Xpath 也父子包含特定值

> ID：15205319
> 
> 赞同：0
> 
> 时间：2013-03-04T15:42:14.093
> 
> 标签：c#, xpath

我有一个html结构如下

```
 <tr valign="middle" align="left">
  <td>&nbsp;</td>
  <td class="table_row"><div align="left"></div></td>
  <td class="table_row"><div align="right" class="news_headline_txt">&nbsp;</div></td>
  <td class="table_row"><div align="right">28.02.2013</div></td>
  <td class="table_row"><div align="right"><a onClick="window.open('show.php?id=id_9000')" href="javascript:;"></a></div></td>
  <td>&nbsp;</td>
</tr> 
```

我可以得到如下的 onclick 值

```
"//a[contains(@onclick, 'id_')]/@href 
```

但是当我得到 onclick 值时，我想匹配 tr 的第三个 td 值`<td class="table_row"><div align="right">28.02.2013</div></td>`包含**02.03**

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T15:54:04.360

因此，您想找到一个具有特定位置的 td 的 TR，然后在其中找到锚点：

```
//tr[td[position()=4][contains(text(), '02.03')]]//a[contains(@onclick, 'id_')]/@href 
```

您还可以使用`sibling`轴：

```
//td[position()=4][contains(text(), '02.03')]/following-sibling:td//a[contains(@onclick, 'id_')]/@href 
```

请注意，位置检查是针对 4th 的，因为行的开头`td`有一个空白填充。`td`

# android - 定向后预测屏幕尺寸

> ID：15205320
> 
> 赞同：0
> 
> 时间：2013-03-04T15:42:15.177
> 
> 标签：android, android-layout, android-framework

我试图弄清楚在我的应用程序开始时纵向和横向的屏幕尺寸。

我可以得到真正的显示尺寸`Display.getRealSize()`，然后计算导航栏的高度，以防万一。

但是，在具有`600dp`或更少导航栏的设备中，导航栏可能具有不同的高度（取决于方向），甚至可能在横向模式下向右移动。

我的应用程序在开始时需要知道这些参数（应用程序连接到在连接时接收这些维度的云服务器 - 所以我真的需要在应用程序开始做事之前知道这些）。

我目前的解决方案是这样的：

```
Resources res = Resources.getSystem();
id = res.getIdentifier("navigation_bar_height", "dimen", "android");
int navigation_bar_height = res.getDimensionPixelSize(id); 
```

虽然这可行，但使用 android 的内部资源从来都不是一个好习惯。

在旋转设备*之前*，还有其他方法可以了解不同方向的屏幕尺寸吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T06:29:24.817

要获取设备的尺寸。请尝试以下代码

```
 DisplayMetrics dm = new DisplayMetrics();
    getWindowManager().getDefaultDisplay().getMetrics(dm);
    final int height=dm.heightPixels;
    final int width=dm.widthPixels; 
```

# ruby-on-rails - 基于日期时间字段中的日期的唯一性验证

> ID：15205321
> 
> 赞同：0
> 
> 时间：2013-03-04T15:42:15.410
> 
> 标签：ruby-on-rails, validation, datetime

在 MyModel 中，我正在验证这样的`:file_id`字段：

```
validates :file_id, :uniqueness => {:scope  => :date_uploaded} 
```

该字段`:date_uploaded`是日期时间字段。

有没有办法在`:scope`上面指定我希望`:file_id`仅在日期时间的日期部分中是唯一的`:date_uploaded`？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-22T23:35:21.970

刚遇到类似的问题。我们想记录事件的日期时间，但只想验证日期的唯一性。最终在 model.rb 文件中执行了 before_create 方法：

```
before_create :check_date_uniqueness

def check_date_uniqueness
   if Model.where(:datetime => self.datetime.to_date.beginning_of_day..self.datetime.to_date.end_of_day).exists?
     return false
   else
     return true
   end
end 
```

根据您的特定模型，这样的东西可能是内置验证的 rails 的一个很好的替代方案。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-10T13:27:16.373

我找不到这样做的方法，所以我最终将`datetime`字段更改为`date`字段。

我知道，这不是最想做的事情，因为它剥夺了将日期转换为不同时区的能力，但在我的情况下仍然有效。

# c# - 将 ListBox 内的控件绑定到 ListBox 源以外的源

> ID：15205328
> 
> 赞同：0
> 
> 时间：2013-03-04T15:42:21.963
> 
> 标签：c#, windows-phone-7, binding

我`ListBox`绑定了一个源，该源为内部控件的文本属性提供数据。现在我想将`Foreground`我的文本框的属性绑定到一个不同的源，而不是主 ListBox 绑定的源！

我的列表框绑定到 ObservableCollection，我希望我的 textblock Foreground 属性绑定到位于 ViewModel 中的 textColor

```
public SolidColorBrush textColor
{
    get { return new SolidColorBrush(Colors.Red); }
} 
```

两人都在`ViewModel`上课。我尝试使用`Foreground="{Binding textColor}"`，但似乎 XAML 根本看不到它，我应该在页面中执行任何操作以便它可以看到它，还是因为父级 ( `ListBox`) 使用不同的源？

**编辑 ：**

更多细节：

我有一个`DataContext.cs`类，我在其中定义了我的表。我有一`ViewModel.cs`门课，里面有这些

```
public class CViewModel : INotifyPropertyChanged
{
    private CDataContext myDB;

    public CViewModel(string DBConnectionString)
    {
        myDB = new CDataContext(DBConnectionString);
    }

    private ObservableCollection<Groups> _allGroups;
    public ObservableCollection<Groups> AllGroups
    {
        get { return _allGroups; }
        set
        {
            _allGroups = value;
            NotifyPropertyChanged("AllGroups");
        }
    }

    public string textColor
    {
        get { return "Tomato"; }
    }
} 
```

然后我有我的 XAML 文件`MainPage.xaml`：

```
....
<Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
    <ListBox Margin="0,8,0,0"  toolkit:TiltEffect.IsTiltEnabled="True" x:Name="list" ItemsSource="{Binding AllGroups}" HorizontalAlignment="Center"  BorderThickness="4">
        <ListBox.ItemTemplate>
            <DataTemplate>
                <Grid Background="Orange" Width="125" Height="125" Margin="6" Tap="Counterlist_OnTap">
                    <TextBlock Name="gname" Foreground="White" Text="{Binding Name}" VerticalAlignment="Center" HorizontalAlignment="Center" TextAlignment="Center" TextWrapping="Wrap"/>
                    <TextBlock Name="ccl" Margin="0,0,0,-5" Foreground="{Binding textColor}" Text="{Binding Count}" FontSize="26" VerticalAlignment="Bottom" HorizontalAlignment="Left" />
                </Grid>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox>
</Grid>
.... 
```

我还在后面的代码中设置`DataContext`了我的`MainPage`to ：`ViewModel`

```
this.DataContext = App.ViewModel; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T18:01:45.907

您所要做的就是声明一个静态类（例如，具有每个实例访问权限的单例）并显式设置属性绑定以查看该类而不是父绑定模型。

**底线：**只需`Source`通过`StaticResource`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T20:49:59.873

该`textColor`属性是 的一部分，而`CViewModel`不是`Groups`作为 ItemTemplate 中数据上下文的对象。

在 ItemTemplate 中，您可以使用以下 Element 绑定访问父 ViewModel：

```
<TextBlock Name="ccl" Margin="0,0,0,-5"
           Foreground="{Binding ElementName=ContentPanel, Path=DataContext.textColor}"
           Text="{Binding Count}" FontSize="26"
           VerticalAlignment="Bottom" HorizontalAlignment="Left" /> 
```

# c# - Visual C# 和 Microsoft Access 2007

> ID：15205335
> 
> 赞同：0
> 
> 时间：2013-03-04T15:42:48.423
> 
> 标签：c#, ms-access

[![看到这张图片](../Images/6ed5a2e9bbc4f928a3d5962e4a4e139c.png)](https://i.stack.imgur.com/BJbYU.jpg)

`DataGridView`正在更新，但没有`Contacts.accdb`改变。

我想改，你能帮忙吗？

解决了 ：

```
private void Form1_Load(object sender, EventArgs e)
{
    this.contactsTableAdapter.Fill(this.contactsDataSet.Contacts);
    dataGridView1.DataSource = contactsDataSet.Contacts;
    try
    {
        DataRow row = contactsDataSet.Contacts.NewRow();
        row[0] = contactsDataSet.Contacts.Rows.Count + 1;
        row[1] = "Dsatasdasfo";
        row[2] = "Maisgfdgdfuradze";
        row[3] = 596110800;
        row[4] = "Tserefgdfgdteli Ave, Building 10";
        contactsDataSet.Contacts.Rows.Add(row);
    }
    catch (ConstraintException error)
    {
        MessageBox.Show(error.Message,"Error",MessageBoxButtons.OK,MessageBoxIcon.Warning);
    }
    finally
    {
        contactsTableAdapter.Adapter.Update(contactsDataSet.Contacts);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T15:52:28.600

您不会将更改保留回代码中的数据库，您需要调用：

```
ContactsDataAdapter.Update() 
```

# c# - WCF Windows 服务中的当前 OperationContext 为空

> ID：15205337
> 
> 赞同：9
> 
> 时间：2013-03-04T15:42:50.137
> 
> 标签：c#, wcf, callback, operationcontext

我正在尝试使用 WCF 设置发布/订阅系统，并且 WCF 服务器位于 Windows 服务中。绑定是 net.TCP。该服务向客户端提供“订阅”方法，以便客户端可以将回调处理程序注册到将从链接到服务器的 DLL 引发的事件。在订阅方法中，我尝试使用 OperationContext.Current.GetCallbackChannel 方法获取回调通道。当我尝试这样做时，OperationContext.Current 属性返回 NULL。

谁能告诉我在什么情况下这个属性会返回 null？我错过了设置吗？我将在下面包含服务代码和接口代码。我在 Visual Studio 2012 中使用 c# 并以框架 4.5 为目标。

服务：

```
namespace WService
{
[ServiceBehavior(InstanceContextMode = InstanceContextMode.PerSession)]
public class WcfPublisherService : IWcfPublisherContract
{
    IOALogic logic = new OAControlExample();
    IWcfSubscriberContract _callback = null;

    public void Subscribe()
    {
        _callback = OperationContext.Current.GetCallbackChannel<IWcfSubscriberContract>();
        logic.BarriersChanged += logic_BarriersChanged;
    }

    public void UnSubscribe()
    {
        logic.BarriersChanged -= logic_BarriersChanged;
    }

    void logic_BarriersChanged(object sender, BarriersChangedEventArgs e)
    {
        _callback.BarriersChanged(e.BarrierLines);
    }
}
} 
```

界面：

```
namespace WService
{
[ServiceContract(SessionMode = SessionMode.Required, CallbackContract = typeof(IWcfSubscriberContract))]
public interface IWcfPublisherContract
{
    [OperationContract(IsOneWay=false, IsInitiating=true)]
    void Subscribe();
    [OperationContract(IsOneWay = false, IsTerminating=true)]
    void UnSubscribe();
}

public interface IWcfSubscriberContract
{
    [OperationContract(IsOneWay = true)]
    void BarriersChanged(BarrierLines barrierLines);
}
} 
```

客户：

```
namespace TestClient
{
public partial class Form1 : Form
{
    WcfPublisherService myService
        = new WcfPublisherService();

    ServiceCallback serviceCallback = new ServiceCallback();

    public Form1()
    {
        InitializeComponent();
        serviceCallback.NewMessage += serviceCallback_NewMessage;
    }

    private delegate void serviceCallback_NewMessageDelegate(object sender, NewMessageEventArgs e);
    void serviceCallback_NewMessage(object sender, NewMessageEventArgs e)
    {
        if (textBox1.InvokeRequired)
        {
            textBox1.Invoke(new serviceCallback_NewMessageDelegate(serviceCallback_NewMessage), new object[] {sender, e});
        }
        else
        {
            if (textBox1.Text.Trim().Length > 1)
            {
                textBox1.Text += Environment.NewLine;
            }
            textBox1.Text += e.Msg;
        }
    }

    private void button1_Click(object sender, EventArgs e)
    {
        myService.Subscribe();
    }

    private void button2_Click(object sender, EventArgs e)
    {
        myService.UnSubscribe();
    }
}

[CallbackBehaviorAttribute(UseSynchronizationContext = false)]
class ServiceCallback : IWcfSubscriberContract
{
    public delegate void NewMessageEventHandler(object sender, NewMessageEventArgs e);
    public event NewMessageEventHandler NewMessage;
    protected virtual void OnNewMessage(string msg)
    {
        if (NewMessage != null)
        {
            NewMessage(this, new NewMessageEventArgs(msg));
        }
    }

    public void BarriersChanged(OA.BarrierLines barrierLines)
    {
        OnNewMessage("new barrier lines");
    }
}

public class NewMessageEventArgs : EventArgs
{
    public NewMessageEventArgs(string msg)
    {
        this.Msg = msg;
    }
    public string Msg { get; set; }
}
} 
```

****** *** ** *** ** ***** 新编辑 ***** ** *** ** *** ** *** ** *** **** 感谢 SalientBrain 的建议，我对我的项目进行了相当大的更改，因为我意识到即使没有连接客户端，服务也必须长时间运行并持续运行，因此我将其更改为单例。即便如此，我原来的问题仍然存在。SalientBrain 已要求查看我的配置文件，因此我将其与所有其他相关文件一起包含在下面。我已将其剥离以节省空间，但我认为我没有删除任何重要的东西。错误发生在 PulisherService 类的 Subscribe 方法中。我希望这是我在配置文件中所做的一些愚蠢的事情。好吧，这里是：**

 **配置：

```
 <configuration>
    <startup> 
        <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" />
    </startup>
    <system.serviceModel>
        <behaviors>
            <serviceBehaviors>
                <behavior name="WService.WCFPublisherServiceBehavior">
                    <serviceMetadata httpGetEnabled="false" httpsGetEnabled="false" />
                    <serviceDebug includeExceptionDetailInFaults="false" />
                </behavior>
            </serviceBehaviors>
        </behaviors>
        <services>
            <service behaviorConfiguration="WService.WCFPublisherServiceBehavior"
                name="WService.WcfPublisherService">
                <endpoint address="" binding="netTcpBinding" bindingConfiguration=""
                    name="NetTcpBindingEndpoint" contract="WService.IWcfPublisherContract">
                    <identity>
                        <dns value="localhost" />
                    </identity>
                </endpoint>
                <endpoint address="mex" binding="mexTcpBinding" bindingConfiguration=""
                    name="MexTcpBindingEndpoint" contract="IMetadataExchange" />
                <host>
                    <baseAddresses>
                        <add baseAddress="net.tcp://localhost:8523/Publisher" />
                    </baseAddresses>
                </host>
            </service>
        </services>
    </system.serviceModel>
</configuration> 
```

Wcf合同：

```
 namespace WService
{
    [ServiceContract(SessionMode = SessionMode.Allowed, CallbackContract = typeof(IWcfSubscriberContract))]
    public interface IWcfPublisherContract
    {
        [OperationContract(IsOneWay=false)]
        void Subscribe(string key);
        [OperationContract(IsOneWay = false)]
        void UnSubscribe(string key);
    }

    public interface IWcfSubscriberContract
    {
        [OperationContract(IsOneWay = true)]
        void BarriersChanged(BarrierLines barrierLines);
    }
} 
```

Wcf 服务：

```
 namespace WService
{
    [ServiceBehavior(InstanceContextMode = InstanceContextMode.Single, ConcurrencyMode = ConcurrencyMode.Multiple)]
    public class WcfPublisherService : IWcfPublisherContract
    {
        private static WcfPublisherService _instance = null;
        private IOALogic _logic = null;
        private Dictionary<string, IWcfSubscriberContract> _callbacks
            = new Dictionary<string, IWcfSubscriberContract>();
        private ReaderWriterLock _callbacksLock = new ReaderWriterLock();

        private WcfPublisherService() { }

        public static WcfPublisherService TheInstance()
        {
            if (_instance == null)
            {
                _instance = new WcfPublisherService();
            }
            return _instance;
        }

        public void StopWcf()
        {
            _logic.StopRequest();
        }

        public void StartWcf(IOALogic logic)
        {
            _logic = logic;
            _logic.BarriersChanged += logic_BarriersChanged;
            ThreadPool.QueueUserWorkItem(new WaitCallback(StartWork), null);
        }

        public void StartWork(object state)
        {
            _logic.Run();
        }

        public void Subscribe(string key)
        {
            OperationContext context = OperationContext.Current;
            // The above line returns null ***********************************************
            _callbacksLock.AcquireWriterLock(2000);
            if (_callbacksLock.IsWriterLockHeld)
            {
                _callbacks.Add(key, context.GetCallbackChannel<IWcfSubscriberContract>());
                // The above line throws a null execption because context is null  ********
                _callbacksLock.ReleaseWriterLock();
            }
        }

        public void UnSubscribe(string key)
        {
            _callbacksLock.AcquireWriterLock(2000);
            if (_callbacksLock.IsWriterLockHeld)
            {
                _callbacks.Remove(key);
                _callbacksLock.ReleaseWriterLock();
            }
        }

        void logic_BarriersChanged(object sender, BarriersChangedEventArgs e)
        {
            _callbacksLock.AcquireReaderLock(1000);
            if (_callbacksLock.IsReaderLockHeld)
            {
                try
                {
                    foreach (IWcfSubscriberContract callback in _callbacks.Values)
                    {
                        callback.BarriersChanged(e.BarrierLines);
                    }
                }
                finally
                {
                    _callbacksLock.ReleaseReaderLock();
                }
            }
        }
    }
} 
```

Windows服务：

```
 namespace WService
{
    public partial class WService : ServiceBase
    {
        internal static ServiceHost _serviceHost = null;
        internal static IOALogic _logic = new OAControlExample();

        public WService()
        {
            InitializeComponent();
        }

        protected override void OnStart(string[] args)
        {
            if (_serviceHost != null)
            {
                _serviceHost.Close();
            }

            _serviceHost = new ServiceHost(WcfPublisherService.TheInstance());
            WcfPublisherService.TheInstance().StartWcf(_logic);
            _serviceHost.Open();
        }

        protected override void OnStop()
        {
            if (WcfPublisherService.TheInstance() != null)
            {
                WcfPublisherService.TheInstance().StopWcf();
            }
            if (_serviceHost != null)
            {
                _serviceHost.Close();
                _serviceHost = null;
            }
        }
    }
} 
```

测试表格：

```
 namespace TestClient
{
    public partial class Form1 : Form
    {
        ServiceCallback serviceCallback = new ServiceCallback();

        public Form1()
        {
            InitializeComponent();

            serviceCallback.NewMessage += serviceCallback_NewMessage;
        }

        private delegate void serviceCallback_NewMessageDelegate(object sender, NewMessageEventArgs e);
        void serviceCallback_NewMessage(object sender, NewMessageEventArgs e)
        {
            if (textBox1.InvokeRequired)
            {
                textBox1.Invoke(new serviceCallback_NewMessageDelegate(serviceCallback_NewMessage), new object[] {sender, e});
            }
            else
            {
                if (textBox1.Text.Trim().Length > 1)
                {
                    textBox1.Text += Environment.NewLine;
                }
                textBox1.Text += e.Msg;
            }
        }

        private void button1_Click(object sender, EventArgs e)
        {
            serviceCallback.Subscribe();
        }

        private void button2_Click(object sender, EventArgs e)
        {
            serviceCallback.Unsubscribe();
        }
    }
} 
```

测试回调类：

```
 namespace TestClient
{
    [CallbackBehaviorAttribute(UseSynchronizationContext = true)]
    class ServiceCallback : IWcfSubscriberContract
    {
        WcfPublisherService myService
            = WcfPublisherService.TheInstance();
        string callbackKey = Guid.NewGuid().ToString();

        public delegate void NewMessageEventHandler(object sender, NewMessageEventArgs e);
        public event NewMessageEventHandler NewMessage;
        protected virtual void OnNewMessage(string msg)
        {
            if (NewMessage != null)
            {
                NewMessage(this, new NewMessageEventArgs(msg));
            }
        }

        public void Subscribe()
        {
            try
            {
                myService.Subscribe(callbackKey);
            }
            catch (Exception ex)
            {
                OnNewMessage("exception: " + ex.Message);
            }
        }

        public void Unsubscribe()
        {
            try
            {
                myService.UnSubscribe(callbackKey);
            }
            catch (Exception ex)
            {
                OnNewMessage("exception: " + ex.Message);
            }
        }

        public void BarriersChanged(OAInterface.BarrierLines barrierLines)
        {
            OnNewMessage("new barrier lines");
        }
    }

    public class NewMessageEventArgs : EventArgs
    {
        public NewMessageEventArgs(string msg)
        {
            this.Msg = msg;
        }
        public string Msg { get; set; }
    }
} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-07T11:54:43.363

正如评论中所讨论的，如果您直接创建服务类型的实例 - 而不是 WCF 代理/客户端通道 - 然后在其上调用方法，则没有 OperationContext。当您的操作在服务中运行时，WCF 会提供一个 OperationContext 实例。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-07T12:03:22.717

在客户端代码中，既没有创建代理也没有创建通道工厂。服务类实例被创建为类库。

您应该使用以下代码的服务

```
 ServiceCallback serviceCallback = new ServiceCallback();
 InstanceContext instanceContext = new InstanceContext(serviceCallback);

 var pubsubProxy = new PubSubProxy.WcfPublisherContractClient(instanceContext);
 pubsubProxy.Subscribe(); 
```

并且在服务运行时，会创建 OperationContext，您可以访问 OperationContext.Current

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-05-01T10:47:48.623

我遇到过这个问题并且没有解决方案有效，最重要的是如果你正在使用

```
async await 
OperationContext.Current; will be null 
```

我的用法是让 Ip 在任何等待的呼叫之前像这样使用它

```
var clientIpAddress = System.Web.HttpContext.Current?.Request?.UserHostAddress; 
```

在异步服务操作中的第一个 await 语句之后，OperationContext.Current 可能为 null，因为方法体的其余部分可能在不同的线程上运行（并且 OperationContext 不会在线程之间流动

**因此，要获得它，您可以在任何可等待的操作之前编写代码**

可能会帮助某人:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-17T19:31:48.223

我有一个类似的问题：在我的情况下，当在构造函数中`InstanceContextMode`设置为时。但是，它在服务/类方法中可用。`Single``WebOperationContext.Current``null`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-30T13:36:22.883

就我而言，这是我愚蠢的...

我试图设置

```
 callback = OperationContext.Current.GetCallbackChannel<IWcfSubscriberContract>(); 
```

在 CALLBACK 函数中，而不是服务器端函数......当在回调函数中时 - 显然没有当前上下文。**

# html - 如何在 Yii CMenu 标签中添加原始 HTML

> ID：15205345
> 
> 赞同：11
> 
> 时间：2013-03-04T15:43:10.277
> 
> 标签：html, yii, cmenu

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-04T16:17:36.233

您必须将[`encodeLabel`](http://www.yiiframework.com/doc/api/1.1/CMenu#encodeLabel-detail)属性设置[`CMenu`](http://www.yiiframework.com/doc/api/1.1/CMenu)为`false`

```
<?php
$this->widget('zii.widgets.CMenu', array(
    'encodeLabel' => false,
    'htmlOptions' => array('class' => 'nav'),
    'items' => array(
        array(
            'label' => 'Home',
            'url' => array('/site/index'),
        ),
        array(
            'label' => 'Dropdown <b class="caret"></b>',
            'url' => '#',
            'submenuOptions' => array('class' => 'dropdown-menu'),
            'items' => array(
                array(
                    'label' => 'Submenu Item 1',
                    'url' => array('/user/create'),
                ),
                array(
                    'label' => 'Submenu Item 1',
                    'url' => array('/user/list'),
                ),
            ),
            'itemOptions' => array('class' => 'dropdown'),
            'linkOptions' => array('class' => 'dropdown-toggle', 'data-toggle' => 'dropdown'),
        ),
    ),
));
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-30T14:34:40.670

我的解决方案是创建 CMenu 扩展：

**布局/main.php**

```
'submenuOptions'=>array('class'=>'dropdown-menu'),
'itemOptions'=>array('class'=>'dropdown'),
'linkOptions'=>array('class'=>'dropdown-toggle', 'data-toggle'=>'dropdown'),
// Dropdown arrow toggle
'dropdownArrow'=>true, 
```

**ext/widgets/BootstrapCMenu.php**

```
class BootstrapCMenu extends CMenu {

protected function renderMenuItem($item)
{
    if(isset($item['url']))
    {
        $item['label'] .= ($item['dropdownArrow']) ? ' <b class="caret"></b>' : '';
        $label=$this->linkLabelWrapper===null ? $item['label'] : CHtml::tag($this->linkLabelWrapper, $this->linkLabelWrapperHtmlOptions, $item['label']);
        return CHtml::link($label,$item['url'],isset($item['linkOptions']) ? $item['linkOptions'] : array());
    }
    else
        return CHtml::tag('span',isset($item['linkOptions']) ? $item['linkOptions'] : array(), $item['label']);
}

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-06T19:57:03.070

在 Yii 2.0 中，要在导航栏菜单中添加字形图标，您可以按照以下信息进行操作。

在 vendor\yiisoft\yii2-bootstrap\Nav.php 中编辑`renderItem`函数下面的代码：

```
 if(isset($item['icons']))
        $label=Html::tag('span', '', ['class' => 'glyphicon glyphicon-'.$item['icons']]).$label; 
```

现在，您可以直接使用代码中的任何图标，`icons`选项为

```
 <?php 
$this->widget( 'zii.widgets.CMenu', array(
'items' => array(
    array(
        'label' => 'Home', 
        'url' => array( '/site/index' ), 
        'icons'=> 'home',
    ),
    array( 
        'label' => 'Dropdown <b class="caret"></b>', 
        'url' => '#',
        'submenuOptions' => array( 'class' => 'dropdown-menu' ),
        'items' => array( 
            array( 
                'label' => 'Submenu Item 1', 
                'url' => array( '/user/create' ), 
            ),
            array( 
                'label' => 'Submenu Item 1', 
                'url' => array( '/user/list' ), 
            ),
        ),
        'itemOptions' => array( 'class' => 'dropdown' ),
        'linkOptions' => array( 'class' => 'dropdown-toggle', 'data-toggle' => 'dropdown' ),
    ),
    'htmlOptions' => array( 'class' => 'nav' ),
)); ?> 
```

即使在旧版本的 yii 中，您也可以进行相应的更改。

# ruby-on-rails - form returned from AJAX request is not recognized as 'remote' when submitted

> ID：15205346
> 
> 赞同：0
> 
> 时间：2013-03-04T15:43:13.583
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3, ujs

In my rails3 application, a user can add an item to a list by clicking an "add item" link. Clicking this link makes AJAX call to grab the new_item form. That part I have working. The problem is that when I submit the new_item form, it doesn't seem to be recognized as a "remote" form even though I've specified :remote => true. It's clear that I need to re-initialize the UJS or something after the new_item form is returned from the server and injected into the page, but I don't know how?

Here's my code:

**_new.html.haml (new item form)**

```
= form_for [@list, @item], :remote => true, :html => {:class => 'form-inline'} do |f|
  .input-append
    = f.text_field "name", :class => 'input-large', :placeholder => "Add item to this list"
    %button#picture.btn
      %span.icon-camera
    %button#link.btn{:style => "font-size: 10px;"} 
      http://
  #link-field.field.margin.hidden-field-margin
    = f.text_field "link", :placeholder => "http://www.link.com", :style => "width: 325px"
  #picture-field.field.margin.hidden-field-margin
    = f.file_field "picture"
    = f.hidden_field "picture_cache"
  .clearfix
  = f.submit "Add Item", :class => 'btn', :id => "add-item" 
```

**lists.js.coffee**

```
# this retrieves the new item form and places it in-line in the page        
$("#new_list")
    .bind "ajax:success", (evt, xhr, settings) -> 
        $("#list-item").html(xhr)

# when the new item form (returned from the server) is submitted here, it doesn't appear to be submitted via AJAX
$("#new_item #add-item")
    .live "ajax:success", (evt, xhr, settings) ->
        alert "this request worked" 
```

**items_controller.rb**

```
class ItemsController < ApplicationController
  respond_to :html, :xml, :json
  def create
    @list = List.find(params[:list_id])
    @item = @list.items.create!(params[:item])
    if @item.save
      respond_with do |f|
        f.html do
          if request.xhr?
            f.json { render :json => {:result => "ok"}}
          else
            redirect_to @list, :notice => "Item was successfully created."
          end
        end
      end
    end
  end
end 
```

When I submit the new_item form I get an error in the JS console which looks like this... I have a create.js.erb template which is just blank, but it's not looking for this and clearly not recognizing the request as an ajax request. How do i get the form returned from the server to be 'ujs' enabled again for lack of a better word?

```
Template is missing

Missing template items/create, application/create with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee, :haml]}. Searched in: * "/Users/aressidi/Projects/intralist/app/views" * "/Users/aressidi/.rvm/gems/ruby-1.9.3-p194/gems/devise-2.1.2/app/views" 
```

**Edit - here's the updated controller code that allows the alert to be triggered.**

```
class ItemsController < ApplicationController
  respond_to :html, :xml, :json
  def create
    @list = List.find(params[:list_id])
    @item = @list.items.create!(params[:item])
    if @item.save
      respond_with do |f|
        f.html do
          if request.xhr?
            render :json => {:result => "ok"}
          else
            redirect_to @list
          end
        end
      end
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T16:18:37.893

Plain`:remote => true`发出一个接受`application/javascript, */*`（或类似的东西）的请求。但是您的控制器不响应 javascript，因此它会尝试呈现 html 模板。

尝试强制`json`形式：

```
= form_for [@list, @item], :remote => true, :html => {:class => 'form-inline', 'data-type' => 'json'} do |f| 
```

# java - draw a custom drawable without any size in Android

> ID：15205351
> 
> 赞同：0
> 
> 时间：2013-03-04T15:43:32.397
> 
> 标签：java, android, drawable

I'm trying to draw a drawable background with a path. But i getting to one point where i can't draw because i need the size of the object that will receive the background. Is there a function to find the size of the specific view that i will draw on ?

```
public class CustomDrawableEditText extends Drawable{
private Context context;
public CustomDrawableEditText(Context context) {
    // TODO Auto-generated constructor stub
    this.context = context;
}
@Override
public void draw(Canvas canvas) {
    // TODO Auto-generated method stub
    Path path = new Path();
    Paint paint = new Paint();
    path.moveTo(0, 0);
    path.lineTo(10, 0);
    path.moveTo(0, 0);
    path.lineTo(0, Y);
    path.lineTo(10,  Y);
    path.moveTo( X, 0);
    path.lineTo( X-10, 0);
    path.moveTo( X, 0);
    path.lineTo( X,  X);
    path.lineTo( X-10,  X);
    paint.setColor(context.getResources().getColor(R.color.orange));
    paint.setStrokeWidth(2);
    paint.setStyle(Paint.Style.STROKE);
    canvas.drawPath(path, paint);
}

private int getY() {
    final Resources res = context.getResources();
    final float scale = res.getDisplayMetrics().density;
    return (int) (res.getDimension(R.dimen.dim4) * scale + 0.5f);
}
@Override
public int getOpacity() {
    // TODO Auto-generated method stub
    return 0;
}

@Override
public void setAlpha(int alpha) {
    // TODO Auto-generated method stub

}

@Override
public void setColorFilter(ColorFilter cf) {
    // TODO Auto-generated method stub

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:25:06.480

调用`Drawable.getBounds()`or`Drawable.copyBounds(Rect rect)`方法。

这两个方法应该返回要绘制`View`的边界（当 a`View`的大小发生变化时，它会调用（应该调用）`Drawable.setBounds`每个`Drawable`具有适当参数值的方法）。然后，您自己的 custom-Drawable 可以通过调用或检索此值。`View``Drawable``Drawable.getBounds()``Drawable.copyBounds(Rect rect)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T15:46:10.477

要获取[View](http://developer.android.com/reference/android/view/View.html)的大小，您可以调用`getWidth()`和`getHeight()`. 请注意，您可能也对`getMeasuredWidth()`和感兴趣`getMeasuredHeight()`。

确保在视图**的布局过程之后**调用这些方法。

# jquery - 复选框未选中

> ID：15205360
> 
> 赞同：0
> 
> 时间：2013-03-04T15:43:50.777
> 
> 标签：jquery, html, checkbox

看看这个 jsFiddle，我的复选框永远不会得到`checked`属性。这是一个非常简单的测试，但我无法让警报显示`true`。

[http://jsfiddle.net/ZLpHv/](http://jsfiddle.net/ZLpHv/)

```
<input type="checkbox" id="checky" />

$(document).ready(function() {
    $("#checky").click(function() {
       alert($(this).is("checked")); 
    });
}); 
```

为什么`false`在这两种情况下都会显示警报？为什么该`checked`属性永远不会设置在复选框上？我在这里做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-04T15:45:30.200

它实际上是：

```
$(this).is(":checked") 
```

即使使用键盘检查，绑定更改事件也可以使其工作：

```
$(document).ready(function() {
    $("#checky").on('change', function() {
       alert($(this).is(":checked")); 
    });
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-04T15:45:36.473

其实是：`alert($(this).is(":checked"));`

演示：http: [//jsfiddle.net/AdFEf/](http://jsfiddle.net/AdFEf/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-04T15:46:15.157

你忘记了“：”。

```
alert($(this).is(":checked")); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-04T15:58:18.393

```
$(function() {
   //checkbox
   $("#terms").click(function(){
       //if this...
       //alert("this")...
       if($("#terms").is(':checked'))
       {              
          alert("im checked");
       }
   });
   //button
   $("#buttonID").click(function(e){
       if(!$("#terms").is(':checked'))
       {
           alert("you did not check the agree to terms..."); 
           e.preventDefault();
       }
   });
 } 
```

你可以用这个它对我有用

# php - php - 如果数组具有相同的值，则删除它们的索引

> ID：15205369
> 
> 赞同：0
> 
> 时间：2013-03-04T15:44:19.590
> 
> 标签：php, arrays, unique

我怎样才能使这样一个数组的值唯一。

`Array ( [0] => Array ( [0] => wallet [1] => pen [2] => perfume [3] => pen) )`

由于有两次笔，我希望以这种方式将其删除：

`( [0] => Array ( [0] => wallet [1] => pen [2] => perfume) )`

或者

`( [0] => Array ( [0] => wallet [1] => perfume [2] => pen) )`

我希望它适用于任何长度。

感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T15:55:41.830

两次使用[array_flip](http://www.php.net/manual/en/function.array-flip.php)怎么样：

```
$arr = Array(0 => wallet, 1 => pen, 2 => perfume, 3 => pen);
$arr = array_flip(array_flip($arr));
print_r($arr); 
```

**输出：**

```
Array
(
    [0] => wallet
    [3] => pen
    [2] => perfume
) 
```

如果要重新编号索引，请在后面添加此线：

```
$arr = array_values($arr); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T15:46:40.937

如果您只想选择一个唯一值，则需要传递要比较值的数组，我假设您传递了主数组，您需要传递发现问题的数组，在您的情况下是索引`0`一个数组的

```
$result = array_unique($input[0]); 
```

`$input`将有一个唯一值数组，因此 pen 不会是 2

如果您需要删除数组中的任何重复值，您可以这样做。

```
$input[0] = array_unique($input[0]); 
```

如果您需要重置索引，您可以使用它

```
$new_index = array_values($input[0]);
print_r($new_index); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T16:19:42.727

这是多维度阵列的解决方案

```
$res  = array();
foreach($your_array as $key=>$val){
  $res[$key] = array_unique($val);
}

echo "<pre>";
print_r($res); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T15:50:24.670

```
$tmp = array ();

foreach ($array as $row) 
             array_push($tmp,array_unique($row)); 
```

# java - ClassNotFoundException：org.dom4j.DocumentException

> ID：15205370
> 
> 赞同：5
> 
> 时间：2013-03-04T15:44:23.980
> 
> 标签：java, eclipse, classnotfoundexception, dom4j

我正在尝试调试（Eclipse 上的 F11）我继承的 java GUI 应用程序，但是当应用程序在 Eclipse IDE 之外运行良好（减去我需要应用的微小修复）时，从 Eclipse 启动时会产生以下异常（F11或 Ctrl+F11）：

```
Exception in thread "AWT-EventQueue-0" java.lang.NoClassDefFoundError: org/dom4j/DocumentException
    at com.example.myapp.LoginWindow.buildHibernateConfig(LoginWindow.java:178)
    at com.example.myapp.LoginWindow.actionPerformed(LoginWindow.java:141)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:1995)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2318)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:387)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:242)
    at javax.swing.AbstractButton.doClick(AbstractButton.java:357)
    at javax.swing.plaf.basic.BasicRootPaneUI$Actions.actionPerformed(BasicRootPaneUI.java:191)
    at javax.swing.SwingUtilities.notifyAction(SwingUtilities.java:1639)
    at javax.swing.JComponent.processKeyBinding(JComponent.java:2859)
    at javax.swing.KeyboardManager.fireBinding(KeyboardManager.java:267)
    at javax.swing.KeyboardManager.fireKeyboardAction(KeyboardManager.java:216)
    at javax.swing.JComponent.processKeyBindingsForAllComponents(JComponent.java:2936)
    at javax.swing.JComponent.processKeyBindings(JComponent.java:2928)
    at javax.swing.JComponent.processKeyEvent(JComponent.java:2822)
    at java.awt.Component.processEvent(Component.java:6074)
    at java.awt.Container.processEvent(Container.java:2039)
    at java.awt.Component.dispatchEventImpl(Component.java:4660)
    at java.awt.Container.dispatchEventImpl(Container.java:2097)
    at java.awt.Component.dispatchEvent(Component.java:4488)
    at java.awt.KeyboardFocusManager.redispatchEvent(KeyboardFocusManager.java:1856)
    at java.awt.DefaultKeyboardFocusManager.dispatchKeyEvent(DefaultKeyboardFocusManager.java:722)
    at java.awt.DefaultKeyboardFocusManager.preDispatchKeyEvent(DefaultKeyboardFocusManager.java:1000)
    at java.awt.DefaultKeyboardFocusManager.typeAheadAssertions(DefaultKeyboardFocusManager.java:865)
    at java.awt.DefaultKeyboardFocusManager.dispatchEvent(DefaultKeyboardFocusManager.java:686)
    at java.awt.Component.dispatchEventImpl(Component.java:4532)
    at java.awt.Container.dispatchEventImpl(Container.java:2097)
    at java.awt.Window.dispatchEventImpl(Window.java:2489)
    at java.awt.Component.dispatchEvent(Component.java:4488)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:668)
    at java.awt.EventQueue.access$400(EventQueue.java:81)
    at java.awt.EventQueue$2.run(EventQueue.java:627)
    at java.awt.EventQueue$2.run(EventQueue.java:625)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:98)
    at java.awt.EventQueue$3.run(EventQueue.java:641)
    at java.awt.EventQueue$3.run(EventQueue.java:639)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:638)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:269)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:184)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:174)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:122)
Caused by: java.lang.ClassNotFoundException: org.dom4j.DocumentException
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    ... 47 more 
```

我对此的初步搜索发现[可能缺少 dom4j 库](http://www.mkyong.com/hibernate/hibernate-error-initial-sessionfactory-creation-failed-java-lang-noclassdeffounderror-orgdom4jdocumentexception/)，但将其添加到 pom.xml：

```
 <dependency>
        <groupId>net.sourceforge.saxon</groupId>
        <artifactId>saxon</artifactId>
        <version>9.1.0.8</version>
    </dependency>        
   <dependency>
        <groupId>dom4j</groupId>
        <artifactId>dom4j</artifactId>
        <version>1.6.1</version>
    </dependency>
    </dependencies> 
```

没有**解决**问题。

知道为什么我会收到此异常（**仅在从 Eclipse 启动时**）以及如何解决此问题？

顺便说一句，`saxson`添加依赖项只是因为尝试使用[最新的 dom4j](http://search.maven.org/#artifactdetails%7Cdom4j%7Cdom4j%7C20040902.021138%7Cjar)在构建时导致无法解决的依赖项。但是由于我降级到`dom4j 1.6.1`我可以消除 saxon 依赖，所以 pom.xml 文件现在只包含：

```
 <dependency>
        <groupId>dom4j</groupId>
        <artifactId>dom4j</artifactId>
        <version>1.6.1</version>
    </dependency>
    </dependencies> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-20T16:15:31.993

兄弟，你需要导入所有的 jar 文件来运行你的程序。这些是运行项目所必需的

Poi-3.10-Final.jar

Poi-ooxml-3.10-Final.jar

Poi-ooxml-schemas-3.10.jar

xmlbeans-2.30.jar

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T13:20:04.990

我将转到 Eclipse“调试”视图并获取 Eclipse 用于运行您的程序的实际命令。您应该在程序启动后立即暂停程序，然后右键单击“调试”视图中的第二行，然后选择属性。您将看到一个名为“进程属性”的窗口，可以从中复制 Eclipse 生成的命令以运行您的程序。您可以将命令粘贴到终端中，然后查看 Java 如何解析类路径。通过添加 -verbose 参数查看实际加载了哪些 jar。

编辑 - 为了清楚起见，当我说“调试视图”时，我的意思是

```
"Main Menu"->"Window"->"Show View"->"Debug" 
```

# c# - 如何将下拉控件绑定到 ASP.NET 中的数据源

> ID：15205380
> 
> 赞同：7
> 
> 时间：2013-03-04T15:44:48.627
> 
> 标签：c#, asp.net, data-binding

我是 C# 新手。

我有一个创建 HR 系统的项目，我创建了一个页面来添加员工，但主管要求我创建一个下拉列表，在添加新员工时显示部门。

我不知道如何开始，我应该先做什么。我已经从工具中添加了一个下拉列表，但我不知道如何选择数据源以及它的名称和值。我应该选择部门表还是员工表？

```
public partial class _Default : Page
{

    private String strcon = ConfigurationManager.ConnectionStrings["hr"].ConnectionString;

    protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)

            bindgrideview();
    }
    protected void bindgrideview()
    {
        SqlConnection strcon1 = new SqlConnection(strcon);
        strcon1.Open();
        string ADDStr = "SELECT F_name , L_name , salary FROM Employee ";
        SqlCommand ADDCmd = new SqlCommand(ADDStr, strcon1);
        DataTable table = new DataTable();

        SqlDataAdapter adapter = new SqlDataAdapter(ADDCmd);

        adapter.Fill(table);
        GridView1.DataSource = table;
        GridView1.DataBind();

    }

    protected void Button1_Click(object sender, EventArgs e)
    {
        string F_name = TextBox1.Text;
        string L_name = TextBox2.Text;
        int status = 1;
        string salarystr = TextBox3.Text.ToString();
        int salary = Int32.Parse(salarystr);
        SqlConnection strcon1 = new SqlConnection(strcon);
        strcon1.Open();
        string ADDStr = "ADDEMP";
        SqlCommand ADDCmd = new SqlCommand(ADDStr, strcon1);
        ADDCmd.CommandType = CommandType.StoredProcedure;
        ADDCmd.Parameters.AddWithValue("@F_name", F_name);
        ADDCmd.Parameters.AddWithValue("@L_name", L_name);
        ADDCmd.Parameters.AddWithValue("@status", status);
        ADDCmd.Parameters.AddWithValue("@salary", salary);

        ADDCmd.ExecuteNonQuery();
        bindgrideview();
        TextBox1.Text = "";
        TextBox2.Text = "";
    } 
```

这是我页面的屏幕截图：http: [//store2.up-00.com/Nov12/YXb11858.png](http://store2.up-00.com/Nov12/YXb11858.png)

这是最终代码没有错误，但下拉列表没有项目:(

```
public partial class _Default : Page
{

    private String strcon = ConfigurationManager.ConnectionStrings["hr"].ConnectionString;

    protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)

            bindgrideview();
    }
    protected void bindgrideview()
    {
        SqlConnection strcon1 = new SqlConnection(strcon);
        strcon1.Open();
        string ADDStr = "SELECT F_name , L_name , salary FROM Employee ";
        SqlCommand ADDCmd = new SqlCommand(ADDStr, strcon1);
        DataTable table = new DataTable();

        SqlDataAdapter adapter = new SqlDataAdapter(ADDCmd);

        adapter.Fill(table);
        GridView1.DataSource = table;
        GridView1.DataBind();

    }

    protected void Button1_Click(object sender, EventArgs e)
    {
        string F_name = TextBox1.Text;
        string L_name = TextBox2.Text;
        int status = 1;
        string salarystr = TextBox3.Text.ToString();
        int salary = Int32.Parse(salarystr);
        SqlConnection strcon1 = new SqlConnection(strcon);
        strcon1.Open();
        string ADDStr = "ADDEMP";
        SqlCommand ADDCmd = new SqlCommand(ADDStr, strcon1);
        ADDCmd.CommandType = CommandType.StoredProcedure;
        ADDCmd.Parameters.AddWithValue("@F_name", F_name);
        ADDCmd.Parameters.AddWithValue("@L_name", L_name);
        ADDCmd.Parameters.AddWithValue("@status", status);
        ADDCmd.Parameters.AddWithValue("@salary", salary);

        ADDCmd.ExecuteNonQuery();
        bindgrideview();
        TextBox1.Text = "";
        TextBox2.Text = "";
        TextBox3.Text = "";
    }
    protected void bindDepartments()
    {
        SqlConnection strcon1 = new SqlConnection(strcon);
        strcon1.Open();
        string ADDStr = "SELECT ID,department_name FROM Department ";
        SqlCommand ADDCmd = new SqlCommand(ADDStr, strcon1);
        DataTable table = new DataTable();

        SqlDataAdapter adapter = new SqlDataAdapter(ADDCmd);

        adapter.Fill(table);

        DropDownList1.DataSource = table;
        DropDownList1.DataValueField = "ID";
        DropDownList1.DataTextField = "department_name";
        DropDownList1.DataBind();

    }

} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-04T15:50:03.410

由于您的代码适用于检索`Employees`信息。从数据库中，您将检索`Departments`信息。从您的部门表中。

```
protected void bindDepartments()
{
    SqlConnection strcon1 = new SqlConnection(strcon);
    strcon1.Open();
    string ADDStr = "SELECT DepartmentId,DepartmentName FROM Departments ";
    SqlCommand ADDCmd = new SqlCommand(ADDStr, strcon1);
    DataTable table = new DataTable();

    SqlDataAdapter adapter = new SqlDataAdapter(ADDCmd);

    adapter.Fill(table);

    ddlDepartments.DataSource = table;
    ddlDepartments.DataValueField = "DepartmentId"; //The Value of the DropDownList, to get it you should call ddlDepartments.SelectedValue;
    ddlDepartments.DataTextField = "DepartmentName"; //The Name shown of the DropDownList.
    ddlDepartments.DataBind();

} 
```

# compass-sass - yeoman / sass 导入文件

> ID：15205385
> 
> 赞同：0
> 
> 时间：2013-03-04T15:45:18.877
> 
> 标签：compass-sass, sass, yeoman

我正在使用 yeoman，我想从凉亭组件导入本机 css。

在我的 main.scss 中，我正在执行以下操作：

`@import "../components/select2/select2.css";`

这工作正常，直到我正在构建我的项目。我遇到一个问题，说我的导入文件不可用。

你遇到过同样的问题吗？你是怎么修的？我正在运行 yeoman 1.0.0-beta.3

# c# - 从 PostAsJsonAsync 获取响应

> ID：15205389
> 
> 赞同：33
> 
> 时间：2013-03-04T15:45:27.983
> 
> 标签：c#, asp.net-mvc-4, asp.net-web-api

我有这行代码

```
var response = new HttpClient().PostAsJsonAsync(posturi, model).Result; 
```

Called WebAPI 控制器返回一个 bool 以确保对象已保存，但我如何返回该 bool 响应？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-03-04T15:50:22.737

继续从内容中获取：

```
var httpClient = new HttpClient();
var response = httpClient.PostAsJsonAsync(posturi, model).Result;
bool returnValue = response.Content.ReadAsAsync<bool>().Result; 
```

但是，这确实是一种快速获得结果的幼稚方法。`PostAsJsonAsync`并且`ReadAsAsync`不是这样设计的，它们旨在支持`async await`编程，所以你的代码应该是：

```
var httpClient = new HttpClient();
var response = await httpClient.PostAsJsonAsync(posturi, model);
bool returnValue = await response.Content.ReadAsAsync<bool>(); 
```

`200 OK`此外，您应该使用 HTTP 代码通过返回来确定保存是否成功，而不是使用标志来检查对象是否已保存。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2014-03-23T18:40:41.947

接受的答案在技术上是正确的，但会阻止当前线程调用`.Result`. 如果您使用的是 .NET 4.5 或更高版本，则几乎在所有情况下都应避免这种情况。相反，使用等效的异步（非阻塞）版本：

```
var httpClient = new HttpClient();
var response = await httpClient.PostAsJsonAsync(posturi, model);
bool returnValue = await response.Content.ReadAsAsync<bool>(); 
```

请注意，包含上述代码的方法需要标记`async`，并且本身应该被`await`编辑。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-05-03T08:58:15.230

由于它是异步操作，因此不会立即执行`.Result`错误

相反，您需要通过以下方式异步执行：

```
 var httpClient = new HttpClient()

    var task = httpClient.PostAsJsonAsync(posturi, model)
                         .ContinueWith( x => x.Result.Content.ReadAsAsync<bool>().Result);

    // 1\. GETTING RESPONSE - NOT ASYNC WAY
    task.Wait(); //THIS WILL HOLD THE THREAD AND IT WON'T BE ASYNC ANYMORE!
    bool response = task.Result

    // 2\. GETTING RESPONSE - TASK ASYNC WAY (usually used in < .NET 4.5 
    task.ContinueWith( x => {
                              bool response = x.Result
                          });

    // 3\. GETTING RESPONSE - TASK ASYNC WAY (usually used in >= .NET 4.5 
    bool response = await task; 
```

注意：我只是在这里写了它们，所以我没有实际测试它们，但或多或​​少这就是你想要的。

我希望它有帮助！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-04T15:47:50.820

如果您调用通用版本，它应该给您返回布尔值：

```
var response = new HttpClient().PostAsJsonAsync<bool>(posturi, model).Result; 
```

至少根据[文档](http://msdn.microsoft.com/en-us/library/hh944521%28v=vs.108%29.aspx)。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-07-16T13:47:07.797

我使用 HttpStatusCode 检查结果。

```
 public HttpStatusCode PostStaffPositions(Foo foo)
    {
        string uri = myapiuri;

        using (HttpClient httpClient = new HttpClient())
        {
            var response = httpClient.PostAsJsonAsync(uri, foo).Result;
            return response.StatusCode;
        }
    } 
```

然后在 Controller 中像这样检查它：

```
 HttpStatusCode update = staffrest.PostStaffPositions(foo);
            if (update == HttpStatusCode.OK)
            {
               //Update Succeed
            }
            else
            {
                //Update Failed
            } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-07-19T04:21:24.433

现在是 2021 年 7 月，我正在使用 .net 5（即 .net core 5）。

我在 System.Net.Http 中没有看到上述任何通用方法。现在代码看起来像这样（经过测试）：

```
 using (var client = new HttpClient())
        {
            client.BaseAddress = new Uri("https://localhost:44330/api/Book/Add");
            var response = client.PostAsJsonAsync(client.BaseAddress,
                JsonSerializer.Serialize(_teamSummaries));
            MessageBox.Show(@"Result is " + JsonSerializer.Serialize(response));
            var returnValue = response.Result.Content.ReadAsStringAsync();
            MessageBox.Show(@"Return value is " + returnValue.Result);
        } 
```

还有ReadAsStringAsync、ReadAsByteArrayAsync、ReadAsStream、ReadFromJsonAsync、ReadFromJsonAsync（此方法返回Task）。

但从文字意思是“ReadFromJsonAsync”，我认为T不是上面提到的bool，而是一个包含bool成员的类。如果您想退回书籍之类的东西，请尝试一下。

另一方面，由于服务器上的代码如下所示（.net 5）：

```
 [HttpPost]
    [Route("Add")]
    public async Task<ActionResult<IEnumerable<Book>>> Add(string value)
    {
        var all = await _dbCollection.FindAsync(Builders<Book>.Filter.Empty);
        return Ok("Everything is ok.");
    } 
```

所以，如果我们想通过 bool 返回 true，我们应该返回 Ok(...)。如果我们想通过 bool 返回 false，我们应该返回别的东西。还有 20 多种其他类型的结果，其中包含更多信息，而不仅仅是“错误”。

# deployment - maven 站点插件无法加载 mojo

> ID：15205395
> 
> 赞同：1
> 
> 时间：2013-03-04T15:45:39.950
> 
> 标签：deployment, maven-2, ear, build-error

我正在尝试部署我的 maven ear 项目，但在执行时遇到此**错误**，mvn install in the pom proyect（我的 IDE 是 eclipse）

```
C:\temp\eat>mvn clean install -e
+ Error stacktraces are turned on.
[INFO] Scanning for projects...
[INFO] Reactor build order:
[INFO]   eat application
[INFO]   eat utility module
[INFO]   eat EJB module
[INFO]   eat Web module
[INFO]   eat EAR module
[INFO]   eat integration tests module
[INFO] ------------------------------------------------------------------------
[INFO] Building eat application
[INFO]    task-segment: [clean, install]
[INFO] ------------------------------------------------------------------------
[INFO] [clean:clean {execution: default-clean}]
-----------------------------------------------------
this realm = app0.child-container[org.apache.maven.plugins:maven-site-plugin:2.0
-beta-7]
urls[0] = file:/C:/Users/luis.cabezas/.m2/repository/org/apache/maven/plugins/ma
ven-site-plugin/2.0-beta-7/maven-site-plugin-2.0-beta-7.jar
urls[1] = file:/C:/Users/luis.cabezas/.m2/repository/org/codehaus/plexus/plexus-
utils/1.1/plexus-utils-1.1.jar
Number of imports: 10
import: org.codehaus.classworlds.Entry@a6c57a42
import: org.codehaus.classworlds.Entry@12f43f3b
import: org.codehaus.classworlds.Entry@20025374
import: org.codehaus.classworlds.Entry@f8e44ca4
import: org.codehaus.classworlds.Entry@92758522
import: org.codehaus.classworlds.Entry@ebf2705b
import: org.codehaus.classworlds.Entry@bb25e54
import: org.codehaus.classworlds.Entry@bece5185
import: org.codehaus.classworlds.Entry@3fee8e37
import: org.codehaus.classworlds.Entry@3fee19d8

this realm = plexus.core
urls[0] = file:/C:/apache-maven-2.2.1/bin/../lib/maven-2.2.1-uber.jar
Number of imports: 10
import: org.codehaus.classworlds.Entry@a6c57a42
import: org.codehaus.classworlds.Entry@12f43f3b
import: org.codehaus.classworlds.Entry@20025374
import: org.codehaus.classworlds.Entry@f8e44ca4
import: org.codehaus.classworlds.Entry@92758522
import: org.codehaus.classworlds.Entry@ebf2705b
import: org.codehaus.classworlds.Entry@bb25e54
import: org.codehaus.classworlds.Entry@bece5185
import: org.codehaus.classworlds.Entry@3fee8e37
import: org.codehaus.classworlds.Entry@3fee19d8
----------------------------------------------------
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD ERROR
[INFO] ------------------------------------------------------------------------
[INFO] Internal error in the plugin manager executing goal 'org.apache.maven.plu
gins:maven-site-plugin:2.0-beta-7:attach-descriptor': Unable to load the mojo 'o
rg.apache.maven.plugins:maven-site-plugin:2.0-beta-7:attach-descriptor' in the p
lugin 'org.apache.maven.plugins:maven-site-plugin'. A required class is missing:
org/apache/maven/doxia/tools/SiteToolException
org.apache.maven.doxia.tools.SiteToolException
[INFO] ------------------------------------------------------------------------
[INFO] Trace
org.apache.maven.lifecycle.LifecycleExecutionException: Internal error in the pl
ugin manager executing goal 'org.apache.maven.plugins:maven-site-plugin:2.0-beta
-7:attach-descriptor': Unable to load the mojo 'org.apache.maven.plugins:maven-s
ite-plugin:2.0-beta-7:attach-descriptor' in the plugin 'org.apache.maven.plugins
:maven-site-plugin'. A required class is missing: org/apache/maven/doxia/tools/S
iteToolException
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(Defa
ultLifecycleExecutor.java:698)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalWithLi
fecycle(DefaultLifecycleExecutor.java:556)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(Defau
ltLifecycleExecutor.java:535)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHan
dleFailures(DefaultLifecycleExecutor.java:387)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegmen
ts(DefaultLifecycleExecutor.java:348)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLi
fecycleExecutor.java:180)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:328)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:138)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:362)
    at org.apache.maven.cli.compat.CompatibleMain.main(CompatibleMain.java:60)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl. java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)
    at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)
    at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)
    at org.codehaus.classworlds.Launcher.main(Launcher.java:375)
Caused by: org.apache.maven.plugin.PluginManagerException: Unable to load the mo
jo 'org.apache.maven.plugins:maven-site-plugin:2.0-beta-7:attach-descriptor' in
the plugin 'org.apache.maven.plugins:maven-site-plugin'. A required class is mis
sing: org/apache/maven/doxia/tools/SiteToolException
    at org.apache.maven.plugin.DefaultPluginManager.getConfiguredMojo(Defaul
tPluginManager.java:669)
    at org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPlugi
nManager.java:468)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(Defa
ultLifecycleExecutor.java:694)
  ... 17 more
Caused by: org.codehaus.plexus.component.repository.exception.ComponentLookupExc
eption: Unable to lookup component 'org.apache.maven.plugin.Mojoorg.apache.maven
.plugins:maven-site-plugin:2.0-beta-7:attach-descriptor', it could not be created at      org.codehaus.plexus.DefaultPlexusContainer.lookup(DefaultPlexusContai
ner.java:335)
    at org.codehaus.plexus.DefaultPlexusContainer.lookup(DefaultPlexusContainer.java:440)
    at org.apache.maven.plugin.DefaultPluginManager.getConfiguredMojo(Defaul
tPluginManager.java:652)
    ... 19 more
Caused by: org.codehaus.plexus.component.factory.ComponentInstantiationException
: Could not instanciate component: role: 'null', implementation: 'org.apache.mav
en.plugins.site.SiteDescriptorAttachMojo'
    at org.codehaus.plexus.component.factory.java.JavaComponentFactory.makeE
xception(JavaComponentFactory.java:77)
    at org.codehaus.plexus.component.factory.java.JavaComponentFactory.newIn
stance(JavaComponentFactory.java:62)
    at org.codehaus.plexus.DefaultPlexusContainer.createComponentInstance(De
faultPlexusContainer.java:1464)
    at org.codehaus.plexus.component.manager.AbstractComponentManager.create
ComponentInstance(AbstractComponentManager.java:93)
    at org.codehaus.plexus.component.manager.PerLookupComponentManager.getCo
mponent(PerLookupComponentManager.java:48)
    at org.codehaus.plexus.DefaultPlexusContainer.lookup(DefaultPlexusContai
ner.java:331)
    ... 21 more
Caused by: java.lang.NoClassDefFoundError: org/apache/maven/doxia/tools/SiteTool
Exception
    at java.lang.Class.getDeclaredConstructors0(Native Method)
    at java.lang.Class.privateGetDeclaredConstructors(Class.java:2389)
    at java.lang.Class.getConstructor0(Class.java:2699)
    at java.lang.Class.newInstance0(Class.java:326)
    at java.lang.Class.newInstance(Class.java:308)
    at org.codehaus.plexus.component.factory.java.JavaComponentFactory.newIn
stance(JavaComponentFactory.java:44)
    ... 25 more
Caused by: java.lang.ClassNotFoundException: org.apache.maven.doxia.tools.SiteTo
olException
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at org.codehaus.classworlds.RealmClassLoader.loadClassDirect(RealmClassL
oader.java:195)
    at org.codehaus.classworlds.DefaultClassRealm.loadClass(DefaultClassReal
m.java:255)
    at org.codehaus.classworlds.DefaultClassRealm.loadClass(DefaultClassReal
m.java:274)
    at org.codehaus.classworlds.RealmClassLoader.loadClass(RealmClassLoader.
java:214)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    ... 31 more
[INFO] ------------------------------------------------------------------------
[INFO] Total time: < 1 second
[INFO] Finished at: Mon Mar 04 16:01:47 CET 2013
[INFO] Final Memory: 4M/15M 
```

**这是我的父母.pom**

```
<modelVersion>4.0.0</modelVersion>
<groupId>com.eat</groupId>
<artifactId>eat</artifactId>
<version>1.0.0-SNAPSHOT</version>
<packaging>pom</packaging>
<name>eat application</name>
<build>
 <pluginManagement>
 <plugins>
  <plugin>
   <groupId>org.apache.maven.plugins</groupId>
   <artifactId>maven-compiler-plugin</artifactId>
   <version>2.0.2.SP1</version>
   <configuration>
<source>${java.version}</source>
<target>${java.version}</target>
   </configuration>
 </plugin>
<plugin>
 <groupId>org.apache.maven.plugins</groupId>
 <artifactId>maven-resources-plugin</artifactId>
 <version>2.4.1</version>
</plugin>
<plugin>
<groupId>org.apache.maven.plugins</groupId>
 <artifactId>maven-surefire-plugin</artifactId>
 <version>2.4.3</version>
 <configuration>
<excludedGroups>${tests.excludedGroups}</excludedGroups>
 </configuration>
</plugin>
</plugins>
</pluginManagement>
</build>
<modules>
<module>eat-util</module>
<module>eat-ejb</module>
<module>eat-web</module>
<module>eat-ear</module>
<module>eat-tests</module>
</modules> 
```

**耳朵.pom**

```
 <parent>
 <artifactId>eat</artifactId>
 <groupId>com.eat</groupId>
 <version>1.0.0-SNAPSHOT</version>
</parent>
 <groupId>com.eat</groupId>
 <artifactId>eat-ear</artifactId>
 <version>1.0.0-SNAPSHOT</version>
 <packaging>ear</packaging>
 <name>eat EAR module</name>
<build>
  <finalName>eat-ear</finalName>
  <plugins>
    <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-ear-plugin</artifactId>
    <version>2.3.2</version>
    <configuration>
            <version>5</version>
        <defaultLibBundleDir>lib</defaultLibBundleDir>
        <earSourceExcludes>**/application.xml, **/jboss-app.xml</earSourceExcludes>
        <generateApplicationXml>true</generateApplicationXml>
        <jboss>
          <version>4.2.3</version>
           <loader-repository>seam.jboss.org:loader=eat-ear.ear</loader-repository>
        </jboss>
        <modules>
         <webModule>
          <groupId>com.eat</groupId>
          <artifactId>eat-web</artifactId>
          <contextRoot>/eat</contextRoot>
          <bundleFileName>eat-web.war</bundleFileName>
        </webModule>
        <ejbModule>
         <groupId>com.eat</groupId>
         <artifactId>eat-ejb</artifactId>
         <bundleFileName>eat-ejb.jar</bundleFileName>
        </ejbModule>
          </modules>
        </configuration>
    </plugin>
</plugins>
</build> 
```

**战争.pom**

```
<parent>
    <artifactId>eat</artifactId>
    <groupId>com.eat</groupId>
    <version>1.0.0-SNAPSHOT</version>
  </parent>
  <groupId>com.eat</groupId>
  <artifactId>eat-web</artifactId>
  <packaging>war</packaging>
  <version>1.0.0-SNAPSHOT</version>
  <name>eat Web module</name> 
```

**ejb.pom**

```
<modelVersion>4.0.0</modelVersion>
  <parent>
    <artifactId>eat</artifactId>
    <groupId>com.eat</groupId>
    <version>1.0.0-SNAPSHOT</version>
  </parent>
  <groupId>com.eat</groupId>
  <artifactId>eat-ejb</artifactId>
  <version>1.0.0-SNAPSHOT</version>
  <packaging>ejb</packaging>
  <name>eat EJB module</name>
<build>
<plugins>
  <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-ejb-plugin</artifactId>
    <version>2.2</version>
    <configuration>
    <ejbVersion>3.0</ejbVersion>
   </configuration>
</plugin>
</plugins>
</build> 
```

我不知道这是否足够的信息。如果不是，请告诉我。

谢谢。

# html - 如何将多个选择框选择传递回 HTML 表单？

> ID：15205396
> 
> 赞同：0
> 
> 时间：2013-03-04T15:45:42.153
> 
> 标签：html, forms, perl, html-select

我正在使用带有 HTML 的 Perl（和 Dancer）来创建一个表单。在我的表单上，我有一些这样的字段：

```
<input type="text" name="keywords" id="keywords" value="<% keywords | html %>"/>

<select multiple="multiple" id="sentences" name="sentences" size="3"/>
    <% IF list_of_sentences %>
         <% FOREACH sentence IN list_of_sentences %>
              <option value=<% sentence %>/>
         <% END %>
    <% END %>
</select> 
```

当然，这些是在他们自己的部门内部，周围还有更多代码，但这些是我所拥有的基本内容。

这些是`main.tt`与使用交互的，`myApp.pm`并且有来回传递的参数（例如`keywords`和`list_of_sentences`这里）。代码设置了两个 div，一个带有表单，另一个纯粹用于显示输出。提交表单后，输出显示正确，但不保留选择字段选择。

因此，我想要做的是使“多项选择”中的选定选项保持选中状态。

例如，在我的“输入”关键字字段中，我保留了该值，因为它已使用using从`.pm`文件传回。这适用于 html 代码。我尝试使用 对多重选择执行相同的操作，但这会返回一个空白字段。`param("keywords")``template 'main' ...``value="<% keywords | html %>"``param("sentences")`

冒险猜测这个问题是因为有不止一个选项，也许是因为我从`.pm`文件中获取选项开始，但我还没有找到解决方案，所以欢迎任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T16:22:59.087

您想`selected="selected"`在 option 元素上使用该属性。我建议同时传递句子的名称和标志，说明选项是否应处于选定状态。例如：

```
<% IF list_of_sentences %>
  <% FOREACH sentence IN list_of_sentences %>
    <option value="<% sentence.value %>"<% IF sentence.is_selected %> selected="selected"<% END %> />
  <% END %>
<% END %> 
```

并为您的句子使用以下数据结构：

```
{ value => $value, is_selected => 0|1 } 
```

# c# - 找不到请求的 .Net Framework 数据提供程序。(SqlClient)

> ID：15205400
> 
> 赞同：7
> 
> 时间：2013-03-04T15:46:01.277
> 
> 标签：c#, sql-server, asp.net-mvc, visual-studio, entity-framework

我正在尝试使用 SQL Server (2005) 中的 DB first 迁移来设置一个简单的 ASP.NET MVC 4 webapp。我已经在数据库中创建了表，并使用 Entity Framework 在代码中创建了对象。我可以使用这些对象访问数据。

当我尝试`WebSecurity.InitializeDatabaseConnection("FLMREntities", "UserProfile", "UserId", "UserName", true);`在 Global.asax.cs 文件中使用初始化 WebSecurity 时出现问题。我尝试使用模板附带的 InitializeSimpleMembershipAttribute 过滤器并遇到同样的问题。我收到错误消息：

```
Unable to find the requested .Net Framework Data Provider. It may not be installed. 
```

这是相关的连接字符串：

```
<add name="FLMREntities"
     connectionString="metadata=res://*/Models.FLMR.csdl|res://*/Models.FLMR.ssdl|res://*/Models.FLMR.msl;
                    provider=System.Data.SqlClient;
                    provider connection string=&quot;data source=notes.marietta.edu;
                        initial catalog=muskwater;
                        user id=muskwater;password=********;
                        MultipleActiveResultSets=True;
                        App=EntityFramework&quot;" 
     providerName="System.Data.EntityClient" /> 
```

此外，我在数据库中创建了成员表以匹配模板创建的内容。如果我将 Initialize 调用中的最后一个参数更改为 false（这样它就不会尝试自动创建表），它会返回它找不到 UserProfile 表。我还尝试了名称的变体，例如 [dbo].[UserProfile]。

我需要的只是一个简单的帐户模型，以允许用户登录并允许某些用户查看更多内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-16T13:30:27.287

我有一个类似的问题，我做了什么：我修改了默认连接。我已经有一个 edmx 模型的连接字符串，如下所示：

```
<add name="ChemicalReporterEntities" connectionString="metadata=res://*/ChemicalDB.csdl|res://*/ChemicalDB.ssdl|res://*/ChemicalDB.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=.\SQLExpress;initial catalog=ChemicalReporter;integrated security=True;MultipleActiveResultSets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" /> 
```

但我不能将它与 SimpleMemebrship 提供程序一起使用。因此，在 Visual Studio 中，我打开了服务器资源管理器 > 数据连接，选择了我的连接，右键单击，属性，然后我从那里复制了连接字符串并将其粘贴到 defaultConnection：

```
<add name="DefaultConnection" connectionString="Data Source=.\SQLExpress;Initial Catalog=ChemicalReporter;Integrated Security=True;MultipleActiveResultSets=True;Application Name=EntityFramework" providerName="System.Data.SqlClient" /> 
```

之后，我将 WebSecurity.InitializeDatabaseConnection 更改为使用 DefaultConnection。

```
WebSecurity.InitializeDatabaseConnection("DefaultConnection", "UserProfile", "UserId", "UserName", true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T16:49:30.047

这可能是[this](https://stackoverflow.com/questions/9591038/unable-to-find-the-requested-net-framework-data-provider-it-may-not-be-install)的副本。

根据我对这个问题的记忆，您需要确保已注册 sqldata 提供程序。有时，在您的 machine.config 中有一个重复的条目需要删除，如果我没记错的话，可能有一个错误的条目需要删除。看看[这个 msdn 帖子](http://social.msdn.microsoft.com/Forums/en-US/vseditor/thread/7b4f353b-77fd-427c-976b-5968abc88c13/)，这个信息大约在页面的中间。

到另一个 SO 的链接有一些可能会有所帮助的链接。如果这最终没有被标记为重复问题，我也可以在此处添加它们，或者做任何合适的事情。

您正在寻找的部分看起来与我认为的类似：

```
<system.data>
  <DbProviderFactories>
    <add name="SqlClient Data Provider"
     invariant="System.Data.SqlClient" 
     description=".Net Framework Data Provider for SqlServer" 
     type="System.Data.SqlClient.SqlClientFactory, System.Data, 
     Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"
    />
  </DbProviderFactories>
</system.data> 
```

根据您在评论中提供的信息，您的 machine.config 中似乎缺少此信息。除非我弄错了（可能），否则这意味着 SQL Provider 没有在您的机器上注册。您需要将上述部分添加到您的 web.config 中。您还需要确保在您的项目中引用了 System.Data.SqlClient。

如果你的目标机器上没有安装它，你将需要做更多的工作来安装它。我希望我可以为您提供更多帮助，但是当我这样做时，它是针对 SqlServerCE 的，所以我使用的文件有很大不同。

祝你好运！

编辑：一条关键信息是版本需要与您正在使用的文件匹配。在 type="blabh..blah..blah..Version=2.0.0.0, blah blah" 中，它需要是您正在使用的文件的版本，因此右键单击您的文件并获取文件版本。如果失败，请尝试版本的变体。我相信我的文件是 2.0.0.1 但 Version=2.0 是我这样做的时候起作用的。只需根据您的版本号尝试几个不同的版本（例如 2.0、2.0.0、2.0.0.1）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-03T00:28:25.450

只是想在这里插话，我遇到了这个问题，通过查看我的 machine.config 来查找我正在运行的目标 .NET 版本......在结构中：

确保您的目标数据提供者在其中正确输入，每个提供者只有一个（我已经看到重复导致问题），以及确保它是有效的 XML，并且您只有一个 DBProviderFactories 条目。就我而言，我在最初的条目之后有一个条目（基本上是两个条目，一个是我的提供者，一个是空白的），而空白导致了所有问题。

希望这可以帮助有同样问题的人:)

# reporting-services - SSRS 2008：用户没有所需的权限

> ID：15205402
> 
> 赞同：9
> 
> 时间：2013-03-04T15:46:04.147
> 
> 标签：reporting-services, permissions, ssrs-2008, user-permissions

![在此处输入图像描述](../Images/4070328c2ea8840043797ecb2c7e99b6.png)

我已经研究了以下现有的 SO 问题及其引用的链接：

[用户 '' 没有所需的权限，Windows 8 上的 SSRS 2008](https://stackoverflow.com/questions/14433068/user-does-not-have-required-permissions-ssrs-2008-on-windows-8)

[SQL Server R2 SSRS 上的 Reporting Services 权限](https://stackoverflow.com/questions/3389040/reporting-services-permissions-on-sql-server-r2-ssrs)

[SQL Server 报告服务 - 服务管理器错误 - 用户没有所需的权限](https://stackoverflow.com/questions/3877527/sql-server-reporting-service-service-manager-error-user-does-not-have-requir)

![在此处输入图像描述](../Images/68e475934c8474f5788e9147b7cc6cdd.png)

![在此处输入图像描述](../Images/3b245c92766c1c893647cce3f551f99a.png)

我已经采取了这些建议的解决方案已经概述的步骤，但即使在所有这些之后，还注销并重新登录，一切都没有改变。事实上，在我开始之前，我的用户名已经被列为系统管理员。

其中一种解决方案（[http://thecodeattic.wordpress.com/category/ssrs/](http://thecodeattic.wordpress.com/category/ssrs/)）还提到了“文件夹设置”区域，您可以在其中为用户指定角色 - “内容管理器”、“发布者”、“浏览器” “报表生成器”和“我的报表” - 但我看不到任何地方导航到此部分的方法。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-26T18:52:04.110

SSRS 在 Web GUI 中有 2 个可用的安全/角色部分：文件夹设置和站点设置。到达每个地方的导航路径有点奇怪。

对于文件夹设置，登录到报表服务器（默认为 /Reports）。在 SSRS 2012 中，顶部工具栏中有一个名为“文件夹设置”的按钮。我*相信*这个链接在 2008 年是一样的，但是我们迁移已经有一段时间了。

在此处添加用户权限允许指定用户运行报告。在这里，您应该添加您自己的用户帐户，以及用于运行报告的帐户。就我而言（Web 应用程序），这是我的 IIS 应用程序池标识（IIS AppPool\DefaultAppPool）。

站点设置控制谁可以登录报表服务器并访问更多报表元数据。您会看到 2 个角色是系统管理员和系统用户，因此这些都是真正受信任的用户。除了授予自己管理员权限外，您只需向执行“管理事务”（例如部署报告）的用户帐户授予权限。在我的情况下，我有一个本地用户帐户，我的 Web 应用程序模拟该帐户以部署或删除报告。用户 (ReportViewer) 不需要此访问权限。

我怀疑您所缺少的只是文件夹设置（例如“运行报告的权限”）设置，当您登录到报告服务器时，可以从第一页访问这些设置。

如果您没有看到该链接，请尝试直接 URL：http: [//MYREPORTSERVER.COM/Reports/Pages/Folder.aspx ?ItemPath=%2f&SelectedTabId=PropertiesTab](http://MYREPORTSERVER.COM/Reports/Pages/Folder.aspx?ItemPath=%2f&SelectedTabId=PropertiesTab)

（仅在 2012 年测试）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-02T11:51:18.740

以“管理员身份”运行浏览器 (IE) 很重要。另一个重要的位是去`http://localhost/reports`，不是`http://SERVERNAME/reports`！

然后单击该“文件夹设置”链接。比按照上面帖子中的说明进行操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-15T13:13:28.410

我自己在 SSRS 2014 用户访问设置中遇到了同样的问题。在我的情况下，我为公司的每个部门都有一个文件夹 - 很多！

经过一番挖掘（好吧，挖掘并实际授予/撤销自己的用户权限）后，我意识到：

1）我必须在根 HOME 文件夹设置中添加每个用户（仅具有“浏览器”角色）

2）这样做将授予该用户访问每个文件夹中每个报告的权限！这到底是怎么回事，微软？！？

3）我必须编辑该用户**不应**拥有权限的每个文件夹并手动删除这些用户中的每一个，以便该特定用户最终将仅拥有他们所属的一个文件夹（又名部门）的权限至。

是否有人找到了一种更好/更快的方法来实现这一点，而无需从所有其他文件夹中删除用户的所有额外、巨大、痛苦、令人沮丧的手动工作，除了用户应该只能访问的唯一文件夹？

如果我只将用户添加到该文件夹​​ - 不将其添加到 HOME 文件夹安全性中 - 那么该用户将收到与 OP 描述中相同的错误消息。

我想我记得，在 SSRS 2005 的日子里，SSRS ReportManager 管理员用户能够编辑/修改这个所谓的配置文件。我在 SSRS 2014 报告管理器中的任何地方都找不到

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-01-06T17:01:01.137

一个技巧是以管理员模式运行 Internet Explorer 11。然后你可以添加你的 windows 用户。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-20T14:59:59.057

此外，在 InPrivate IE 选项卡中访问 URL 将引发权限错误。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-10-03T13:35:12.957

这对我来说可以将我的域帐户添加到本地实例：

1.  在计算机管理中创建本地管理员用户
2.  以管理员身份下载并启动 Edge-Chrome ( [https://www.microsoftedgeinsider.com/en-us/](https://www.microsoftedgeinsider.com/en-us/) )
3.  单击地址栏右侧的个人资料图片，确保您以访客身份浏览
4.  启动报告站点，例如[http://yourpc/reports](http://yourpc/reports)
5.  点击网页右上角的齿轮，选择“站点设置”
6.  单击左侧菜单上的“安全”并将用户帐户添加到管理员
7.  重启运气

这可能适用于其他浏览器，但尚未尝试过。

***编辑：****您还需要将域用户添加到默认文件夹。*

# css - CSS3：像 qube 一样的 div

> ID：15205406
> 
> 赞同：0
> 
> 时间：2013-03-04T15:46:20.747
> 
> 标签：css, webkit, css-transitions

我想创建 2 个像这张图片一样的 div

![2个这样的div](../Images/8121a15ae992321bf4b39c20bb735426.png)

我已经为 div 1 尝试过这个，但它看起来不太好。你能帮我吗？

```
.div1 { 
-webkit-transform:perspective(2500px) rotate3d(1, 0, 0, 46deg);
-webkit-transform-origin:100% 0%;
-webkit-transform-style:preserve-3d;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T17:06:36.040

`transform-style:preserve-3d;`是您在嵌套 3D 转换元素并且想要创建逼真的 3D 外观时使用的东西（在这种情况下，您将其应用于父元素）。你在这里不需要它。

你想要的效果其实很简单实现：

# [*演示*](http://codepen.io/thebabydino/pen/kjpcD)

**HTML**：

```
<div class='parent'>
  <div class='div1'>div1</div>
  <div class='div2'>div2</div>
</div> 
```

相关**CSS**：

```
.parent { perspective: 20em; }
.div1 {
  transform: rotateX(30deg);
  transform-origin: 0 100% 0;
} 
```

# attributes - 厨师包括食谱覆盖属性

> ID：15205407
> 
> 赞同：14
> 
> 时间：2013-03-04T15:46:20.900
> 
> 标签：attributes, include, overriding, chef-infra

当您在另一个配方中包含一个配方时，您如何覆盖属性。

看起来包含配方使用了默认属性，而不是之前在 run_list 中运行的配方的属性。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-27T18:59:43.673

创建包装说明书时，通常会覆盖属性。

假设，你有这样的 my_web_server 食谱`my_web_server/recipes/default.rb`：

```
include_recipe "apache2" 
```

并且您想覆盖 apache2 食谱中的属性 default_site_enabled。然后您的文件`my_web_server/attributes/default.rb`应如下所示：

```
override['apache']['default_site_enabled'] = true 
```

并且不要忘记指定依赖`my_web_server/metadata.rb`项：

```
depends "apache2" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-02T05:20:42.583

我经常使用角色来覆盖属性。

假设我有两本食谱，一本用于我的 sweet_rails_app，一本用于安装/配置 apache，另一本用于安装我的应用程序。

在我的 sweet_rails_app_cookbook 中，我可能有：

```
# coding: UTF-8
# Cookbook Name:: sweet_rails_app
# Recipe:: default
include_recipe 'apache_passenger_cookbook::default'
... # recipe code 
```

两个说明书中的所有属性都设置为任一说明书中的默认级别。

```
# coding: UTF-8
name 'sweet_rails_app'
description 'Deploys Sweet Rails App'

run_list "recipe[sweet_rails_app_cookbook]"

base_dir = '/opt/sweet_rails_app'

override_attributes(
  sweet_rails_app: {
    base_dir: base_dir,
    ... # more override attributes
  },
  apache_passenger: {
    document_root: base_dir
  }
) 
```

然后角色就是我需要添加到节点的 run_list 的全部内容。这还有一个额外的好处，那就是控制两个食谱的执行顺序。

# foreign-key-relationship - 外键约束 - Pentaho

> ID：15205410
> 
> 赞同：0
> 
> 时间：2013-03-04T15:46:27.197
> 
> 标签：foreign-key-relationship, etl, pentaho

我将 Pentaho 用于我的 ETL 过程，并且在将平面文件插入具有主键和外键关系的表中时遇到问题。具有 Microsoft Excel 输入、添加常量和表输出转换的转换相当简单。我得到的错误是“INSERT 语句与 FOREIGN KEY 约束冲突”。我相信您可以使用插入/更新输出转换，但性能很糟糕。请提供有关如何解决的建议。

primary_key = Staff_key
foreign_key = Staff_profil_key

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T17:25:22.667

表输出转换具有忽略插入错误的选项。您可以选中此选项以忽略约束。此选项不能与批量更新一起使用，从而影响性能。

# javascript - HTC One X KeyCode 总是返回零

> ID：15205412
> 
> 赞同：2
> 
> 时间：2013-03-04T15:46:30.433
> 
> 标签：javascript, android, dom-events, htc-android

`textbox`在将文本发送给第三方进行操作之前，我需要验证输入到使用 JavaScript 中的文本。

为此，我使用`browserEvent.keyCode`参数`keycode`将按键事件发送到浏览器，然后验证代码以说明它是否允许`textbox`。

这适用于我测试过的所有设备，除了 HTC One X 上的 Chrome。

我发现各种 Android 和 iOS 设备之间存在令人讨厌的差异，但它们都返回了我可以使用的东西。然而，HTC One X`0`会随着每次按键而返回，除了`Backspace`和`Enter`键，它们分别返回`8`和`13`。

我已经尝试过`event.keyCode`,`event.charCode`以及`event.which`,和代码，并且所有内容都`browserEvent.keyCode`以.`browserEvent.charCode``browserEvent.which``0`

基本上，我被困住了。有谁有想法吗

1.  为什么`keycode`总是`0`在这个设备上返回，以及
2.  我怎么能检测到`keycode`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T11:29:12.723

虽然它没有回答直接的问题，但我使用了 Lukas Knuth 给我的一些想法来解决它。

现在的过程是 0 的键码被捕获并传递给一个函数，该函数通过一些正则表达式验证运行输入框的内容。如果验证失败，则从输入框中删除最后一个字符。

如果有人遇到这个问题，希望为 HTC One X 提供通过 0 作为键码的解决方案，我深表歉意，经过几天的研究和实验，我找不到解决方案，所以我转而解决了这个问题。

# java - 如何根据设置本地化程序的文本？

> ID：15205415
> 
> 赞同：0
> 
> 时间：2013-03-04T15:46:48.140
> 
> 标签：java, localization

例如，我有一个`Language`类，它将包含 type 的常量属性`String`，它将在整个程序中用于打印`x`或`y` `Strings`基于启动程序时的设置。

我怎么能这样做？我使用`Enum`过，但我缺乏使用它们的经验并且未能正确应用它们；尝试了不同的类，它们继承`Language`并且必须指定每个类的值`String`，但这看起来像是自制的`Enum`。

作为一个优点，我希望有一个包含每个`String`内容的 XML 文件，但我完全不知道在 java 中获取 XML 文件的值（我可能知道如何分别执行它们）。如果可能的话，一个小例子或文档。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T15:51:53.967

您可以使用属性文件，即将它们命名为 en-GB.properties、en-US.properties 等，文件如下所示：

en-GB.properties

```
file=File
edit=Edit 
```

它-IT.properties

```
file=File
edit=Modifica 
```

'=' 符号之前的字符串是属性名称，它之后的字符串是属性值，这是访问它的代码：

```
 Properties prop = new Properties();

    try {
        //load a properties file
        prop.load(new FileInputStream("it-IT.properties"));

        //get the property value and print it out
        System.out.println(prop.getProperty("file"));  //prints "File"
        System.out.println(prop.getProperty("edit"));//prints "Modifica"

    } catch (IOException ex) {
        ex.printStackTrace();
    } 
```

希望这可以帮助

# sql - 如何在 SQL Server 中的多列中选择所有非数字值？

> ID：15205420
> 
> 赞同：3
> 
> 时间：2013-03-04T15:47:09.917
> 
> 标签：sql, sql-server, unpivot

我有一张桌子`Prices`

```
ID Price_1 Price_2 Price_3

P1 10      11      12
P2 13      14      15
P3 aa      16      bb
P4 19      cc      20 
```

* * *

从上面可以看出，列中的一些值`Price_1`可能`Price_2`不是`Price_3`数字。

我想要的是首先找到所有这些`non-numeric values`然后给出一个摘要（`concatenate`一个id的所有非数字值和列）

所以对于上面的例子，我想要的是

```
ID   Bad_Columns      Bad_Values
P3   Price_1,Price_3  aa,bb
P4   Price_2          cc 
```

* * *

我应该如何编写这个查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T15:56:35.770

你可以这样做：

```
WITH CTE AS
(   SELECT  ID, Value, ColumnName
    FROM    Prices
            UNPIVOT
            (   Value
                FOR ColumnName IN ([Price_1], [Price_2], [Price_3])
            ) upvt
    WHERE   ISNUMERIC(Value) = 0
)
SELECT  ID,
        BadColumns = STUFF((SELECT  ', ' + ColumnName 
                            FROM    CTE
                            WHERE   CTE.ID = t.ID
                            FOR XML PATH(''), TYPE
                        ).value('.', 'NVARCHAR(MAX)'), 1, 2, ''),
        BadValues = STUFF(( SELECT  ', ' + Value 
                            FROM    CTE
                            WHERE   CTE.ID = t.ID
                            FOR XML PATH(''), TYPE
                        ).value('.', 'NVARCHAR(MAX)'), 1, 2, '')
FROM    (SELECT DISTINCT ID FROM CTE) t 
```

第一部分 UNPIVOT 将您的查询作为行获取列，然后第二部分将“坏”行连接成一列。

**[SQL Fiddle 示例](http://www.sqlfiddle.com/#!3/2f3a3/6)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T15:59:34.157

我会建议：

```
select p.*
from ((select id, price_1 as price, 'price_1' as col) union all
      (select id, price_2 as price, 'price_2' as col) union all
      (select id, price_3 as price, 'price_3' as col)
     ) p
where is_numeric(price) = 0 and price is not null 
```

如果您真的希望它们采用您拥有的格式，只需执行以下操作：

```
select id,
       stuff((case when isnumeric(price_1) = 1 then ',Price_1' else '' end) +
             (case when isnumeric(price_2) = 1 then ',Price_2' else '' end) +
             (case when isnumeric(price_3) = 1 then ',Price_3' else '' end)
            ), 1, 1, '') as Bad_Columns,
       stuff((case when isnumeric(price_1) = 1 then ','+Price_1 else '' end) +
             (case when isnumeric(price_2) = 1 then ','+Price_2 else '' end) +
             (case when isnumeric(price_3) = 1 then ','+Price_3 else '' end)
            ), 1, 1, '') as Bad_Values
from p
where isnumeric(price_1) = 0 or isnumeric(price_2)= 0 or isnumeric(price_3) = 0 
```

我不使用的原因`unpivot`是因为它假设列类型是兼容的。如果要将其扩展到更多列，请使用 Excel 生成代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T15:57:35.757

您可以使用以下内容对数据进行*反透视*，然后使用以下方法连接值`FOR XML PATH`：

```
;with cte as
(
  select id, col, data
  from
  (
    select t.id,
      c.col,
      case c.col
        when 'Price_1' then Price_1
        when 'Price_2' then Price_2
        when 'Price_3' then Price_3
      end as data
    from yourtable t
    cross join
    (
      select 'Price_1' as col
      union all select 'Price_2'
      union all select 'Price_3'
    ) c
  ) src
  where isnumeric(data) = 0
)
select distinct c1.id,
  stuff((select ', ' + col
         from cte c2
         where c1.id = c2.id
         FOR XML PATH (''))
          , 1, 1, '')  AS Bad_columns,
  stuff((select ', ' + data
         from cte c2
         where c1.id = c2.id
         FOR XML PATH (''))
          , 1, 1, '')  AS Bad_Values
from cte c1 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/957cd/11)。

这也可以使用以下`unpivot`函数编写：

```
;with cte as
(
  select id, col, data
  from yourtable
  unpivot
  (
    data
    for col in ([Price_1], [Price_2], [Price_3])
  ) unpiv
  where isnumeric(data) = 0
)
select distinct c1.id,
  stuff((select ', ' + col
         from cte c2
         where c1.id = c2.id
         FOR XML PATH (''))
          , 1, 1, '')  AS Bad_columns,
  stuff((select ', ' + data
         from cte c2
         where c1.id = c2.id
         FOR XML PATH (''))
          , 1, 1, '')  AS Bad_Values
from cte c1 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/957cd/12)。结果是：

```
| ID |       BAD_COLUMNS | BAD_VALUES |
---------------------------------------
| P3 |  Price_1, Price_3 |     aa, bb |
| P4 |           Price_2 |         cc | 
```

# ruby - 如何在ruby中获取页面的所有资源

> ID：15205421
> 
> 赞同：0
> 
> 时间：2013-03-04T15:47:12.647
> 
> 标签：ruby, http

ruby、httparty、rest-client等有很多http请求工具，但大多只获取页面本身。是否有一种工具可以像浏览器一样获取页面的 html、javascript、css 和图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:30:58.213

想到[Anemone ，但它的设计目的不是单页。](http://anemone.rubyforge.org/)如果你有时间设置它，它是有能力的。

使用像 Nokogiri 这样的 HTML 解析器来检索页面的内容并不难。您可以遍历感兴趣的标签，获取它们的“SRC”或“HREF”参数并请求这些文件，将它们的内容存储在磁盘上。

一个使用 Nokogiri 和 OpenURI 的简单、未经测试和即时编写的示例是：

```
require 'nokogiri'
require 'open-uri'

html = open('http://www.example.com').read
File.write('www.example.com.html', html)
page = Nokogiri::HTML(html)
page.search('img').each do |img|
  File.open(img['src'], 'wb') { |fo| fo.write open(img['src']).read }
end 
```

获取 CSS 和 JavaScript 有点困难，因为您必须确定它们是嵌入在页面中还是资源，需要从它们的源中检索。

仅下载 HTML 和内容很容易。创建一个独立的页面版本并从本地缓存中读取内容要困难得多。您必须重写所有“SRC”和“HREF”参数以指向磁盘上的文件。

如果你希望能够在本地缓存一个站点，那就更糟糕了，因为你必须重新调整页面中的所有锚点和链接以指向本地缓存。此外，您必须编写一个完整的站点蜘蛛，它足够聪明以留在站点内，不遵循冗余链接，服从站点的 ROBOTS 文件，并且不消耗您或他们的所有带宽并让您被禁止或起诉。

随着任务的增长，您还必须考虑如何组织所有文件。将一页的资源存储在一个文件夹中是草率的，但这是一种简单的方法。将两个页面的资源存储在一个文件夹中会成为一个问题，因为您可能会遇到不同图像、脚本或 CSS 的文件名冲突。那时你必须使用多个文件夹，或者切换到使用数据库来跟踪资源的位置，并用唯一标识符重命名它们，然后将它们重写回你保存的 HTML，或者编写一个可以解决这些请求的应用程序和返回正确的内容。

# c# - LINQ GroupBy 抛出错误

> ID：15205425
> 
> 赞同：3
> 
> 时间：2013-03-04T15:47:21.573
> 
> 标签：c#, linq, join, lambda, linq-to-entities

```
 var devSum = repository.Devices
                    .Where(dev => dev.Id == deviceId)
                    .Join(repository.ManagementGroups, device => device.ManagementGroupId, mGroup => mGroup.Id, (device, mGroup) => new { device, mGroup.Name })
                    .Join(repository.DataGroups, device_mGroup => device_mGroup.device.DataGroupId, dGroup => dGroup.Id, (device_mGroup, dGroup) => new { device_mGroup.device, managerName = device_mGroup.Name, dataName = dGroup.Name })
                    .Join(repository.DeviceTypes, d => d.device.TypeId, t => t.Id, (d, t) => new { d.device, d.dataName, d.managerName, TypeName = t.Name })
                    .SingleOrDefault(); 
```

嗨，我有上面的查询加入了几个表，一切正常。然后我意识到一些外键可能是空的。

我研究了`GroupBy`and的用法`DefaultIfEmpty`，它们听起来很有希望，所以我尝试将第一个更改`Join`为`GroupJoin`on 但这引发了错误：

```
 var devSum = repository.Devices
                    .Where(dev => dev.Id == deviceId)
                    .GroupJoin(repository.ManagementGroups, device => device.ManagementGroupId, mGroup => mGroup.Id, (device, mGroup) => new { device, mGroup.Name })
                    .Join(repository.DataGroups, device_mGroup => device_mGroup.device.DataGroupId, dGroup => dGroup.Id, (device_mGroup, dGroup) => new { device_mGroup.device, managerName = device_mGroup.Name, dataName = dGroup.Name })
                    .Join(repository.DeviceTypes, d => d.device.TypeId, t => t.Id, (d, t) => new { d.device, d.dataName, d.managerName, TypeName = t.Name })
                    .SingleOrDefault();

'AnonymousType#1' does not contain a definition for 'Name' and no extension method 'Name' accepting a first argument of type 'AnonymousType#1' could be found (are you missing a using directive or an assembly reference?) 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T15:57:16.683

`mGroup`行中`(device, mGroup) => new { device, mGroup.Name }`实际上代表了整个集合。你需要做一个`Select`：

```
(device, mGroup) => new { Device = device, NameGroup = mGroup.Select(m => m.Name) } 
```

查看 GroupJoin 上的[MSDN](http://msdn.microsoft.com/en-us/library/bb534297.aspx)页面了解更多信息。

# python - Python文件没有打开文件？

> ID：15205426
> 
> 赞同：-1
> 
> 时间：2013-03-04T15:47:21.800
> 
> 标签：python, exception, text

所以我有这段代码，我试图让它打开一个文件。但是，代码的异常部分总是被执行。

```
def main():
    #Opens up the file
    try:
        fin = open("blah.txt")
        independence = fin.readlines() 
        fin.close()
        independence.strip("'!,.?-") #Gets rid of the punctuation 
        print independence
        #Should the file not exist
    except:
        print 'No, no, file no here'

if __name__ == "__main__":
    main() 
```

我检查了文件名是否拼写正确，并且是正确的，并且该文件与python文件位于同一目录中，并且我以前使用过此代码。为什么它不起作用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T15:50:18.930

`independence`是一个字符串列表。您不能在列表中调用 strip 。尝试这个：

```
def main():
    fin = open('blah.txt', 'r')
    lines = fin.readlines() 
    fin.close()
    for line in lines:
        print line.strip("'!,.?-")

if __name__ == '__main__':
    try:
        main()
    except Exception, e:
        print '>> Fatal error: %s' % e 
```

# ruby - 如何让我的自定义 Rake 任务 *args 像内置 Rake 任务 *args 一样工作？

> ID：15205428
> 
> 赞同：2
> 
> 时间：2013-03-04T15:47:29.997
> 
> 标签：ruby, rake, albacore

我有一个自定义 rake 任务，作为一种方法实现，它位于该方法的“上方” `task`。它与自定义配置对象一起使用，使整个事物更具声明性。这里是。

```
def robocopy(*args, &block)
  config = RobocopyConfiguration.new
  block.call config

  body = proc { 
    system "robocopy #{config.make_parameters.join ' '}"
  }

  Rake::Task.define_task *args, &body
end

class RobocopyConfiguration
  attr_accessor :source, :destination, :files
  attr_reader :mirror

  def mirror
    @mirror = true
  end

  def make_parameters
    parameters = [ @source, @destination ]
    parameters << @files.flatten if @files
    parameters << '/MIR' if @mirror
    parameters
  end
end 
```

您可以将其声明为具有名称和依赖项的普通 rake 任务。

```
robocopy :copy => [ :build ] do |cmd|
  cmd.source = File.expand_path File.dirname __FILE__
  cmd.destination = '//some/default/network/share'
  cmd.mirror
end 
```

但是，一旦您添加参数，事情就会开始爆炸。

```
robocopy :copy, [ :destination ] => [ :build ] do |cmd, args|
  args.with_defaults(:destination => '//some/default/network/share')

  cmd.source = File.expand_path File.dirname __FILE__
  cmd.destination = args[:destination]
  cmd.mirror
end

cmd> rake copy['//some/network/share']
rake aborted!
undefined method `with_defaults' for nil:NilClass 
```

我怀疑`*args`没有变成[`TaskArguments`](http://rake.rubyforge.org/Rake/TaskArguments.html)，所有特殊方法，它们正在被立即用于 custom `block.call`。而且我无法完全弄清楚[将](http://rake.rubyforge.org/Rake/TaskManager.html#method-i-define_task)它们转变为正确类型的论点的调用。

# ios - 使用 Facebook Open Graph 发布操作

> ID：15205430
> 
> 赞同：1
> 
> 时间：2013-03-04T15:47:32.537
> 
> 标签：ios, facebook, facebook-opengraph

我正在努力尝试将 Facebook Open Graph 实现到我的 iOS 应用程序中。在 iOS 代码方面，一切似乎都运行良好，并且我收到了 Open Graph 操作已发布的自动确认消息。

奇怪的是，即使我在服务器上编辑 .html 对象，在 facebook 上发布的对象也不会改变。我总是一次又一次地得到同一个对象。有谁知道这怎么可能？

这就是我的对象的样子：

```
<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# object: http://ogp.me/ns/object#">

    <title>Group App</title>
     <meta property="og:title" content="Test" />
    <meta property="og:image" content="http://www.groupapp.org/ita/attuale/icona.png" />
    <meta property="og:determiner" content="" />
    <meta property="fb:app_id" content="172461289531661" />
    <meta property="og:url" content="https://itunes.apple.com/us/app/ruzzle/id504265646?mt=8" />
    <meta property="og:type" content="groupappitalia:object" /> 
```

基本上，我编辑标题、图片和网址；但没有任何改变。总是得到相同的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T15:53:01.803

```
<meta property="og:url" content="https://itunes.apple.com/us/app/ruzzle/id504265646?mt=8" /> 
```

那是您的 OG 对象的实际地址。很自然，这也是 Facebook 从中检索 Open Graph 信息的地方，因为这就是 Open Graph 的工作方式。

因此，您必须更改该 URL 的属性，而不是您自己的页面，才能使这些更改反映在 Facebook 上。

# php - jQuery Mobile：如何正确提交表单数据

> ID：15205437
> 
> 赞同：13
> 
> 时间：2013-03-04T15:47:48.593
> 
> 标签：php, javascript, jquery, cordova, jquery-mobile

这是一个 jQuery Mobile 问题，但它也与纯 jQuery 有关。

如何在没有页面转换的情况下将表单数据发布到设置为表单操作属性的页面。我正在构建 phonegap 应用程序，我不想直接访问服务器端页面。

我尝试了几个示例，但每次表单都将我转发到目标 php 文件。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-04T15:57:17.540

## 介绍

这个例子是使用 jQuery Mobile 1.2 创建的。如果您想查看最近的示例，请查看这篇[**文章**](http://www.gajotres.net/how-to-correctly-submit-form-data-in-jquery-mobile/)或更复杂[**的**](http://www.gajotres.net/complex-jquery-mobile-authorization-example/)文章。您会发现 2 个工作示例进行了详细解释。如果您有更多问题，请在文章评论部分提出。

表单提交是一个常见的 jQuery Mobile 问题。

实现这一目标的方法很少。我将列出其中的几个。

## 示例 1：

如果您使用 phonegap 应用程序并且不想直接访问服务器端 php，这是最好的解决方案。如果您想创建 phonegap iOS 应用程序，这是一个正确的解决方案。

**索引.html**

```
<!DOCTYPE html>
<html>
<head>
    <title>jQM Complex Demo</title>
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0"/>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <style>
        #login-button {
            margin-top: 30px;
        }        
    </style>
    <script src="http://www.dragan-gaic.info/js/jquery-1.8.2.min.js"></script>    
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
    <script src="js/index.js"></script>
</head>
<body>
    <div data-role="page" id="login" data-theme="b">
        <div data-role="header" data-theme="a">
            <h3>Login Page</h3>
        </div>

        <div data-role="content">
            <form id="check-user" class="ui-body ui-body-a ui-corner-all" data-ajax="false">
                <fieldset>
                    <div data-role="fieldcontain">
                        <label for="username">Enter your username:</label>
                        <input type="text" value="" name="username" id="username"/>
                    </div>                                  
                    <div data-role="fieldcontain">                                      
                        <label for="password">Enter your password:</label>
                        <input type="password" value="" name="password" id="password"/> 
                    </div>
                    <input type="button" data-theme="b" name="submit" id="submit" value="Submit">
                </fieldset>
            </form>                              
        </div>

        <div data-theme="a" data-role="footer" data-position="fixed">

        </div>
    </div>
    <div data-role="page" id="second">
        <div data-theme="a" data-role="header">
            <h3></h3>
        </div>

        <div data-role="content">

        </div>

        <div data-theme="a" data-role="footer" data-position="fixed">
            <h3>Page footer</h3>
        </div>
    </div>
</body>
</html> 
```

**检查.php：**

```
<?php
    //$action = $_REQUEST['action']; // We dont need action for this tutorial, but in a complex code you need a way to determine ajax action nature
    //$formData = json_decode($_REQUEST['formData']); // Decode JSON object into readable PHP object

    //$username = $formData->{'username'}; // Get username from object
    //$password = $formData->{'password'}; // Get password from object

    // Lets say everything is in order
    echo "Username = ";
?> 
```

**index.js：**

```
$(document).on('pagebeforeshow', '#login', function(){  
        $(document).on('click', '#submit', function() { // catch the form's submit event
        if($('#username').val().length > 0 && $('#password').val().length > 0){
            // Send data to server through ajax call
            // action is functionality we want to call and outputJSON is our data
                $.ajax({url: 'check.php',
                    data: {action : 'login', formData : $('#check-user').serialize()}, // Convert a form to a JSON string representation
                        type: 'post',                   
                    async: true,
                    beforeSend: function() {
                        // This callback function will trigger before data is sent
                        $.mobile.showPageLoadingMsg(true); // This will show ajax spinner
                    },
                    complete: function() {
                        // This callback function will trigger on data sent/received complete
                        $.mobile.hidePageLoadingMsg(); // This will hide ajax spinner
                    },
                    success: function (result) {
                            resultObject.formSubmitionResult = result;
                                        $.mobile.changePage("#second");
                    },
                    error: function (request,error) {
                        // This callback function will trigger on unsuccessful action                
                        alert('Network error has occurred please try again!');
                    }
                });                   
        } else {
            alert('Please fill all nececery fields');
        }           
            return false; // cancel original event to prevent form submitting
        });    
});

$(document).on('pagebeforeshow', '#second', function(){     
    $('#second [data-role="content"]').append('This is a result of form submition: ' + resultObject.formSubmitionResult);  
});

var resultObject = {
    formSubmitionResult : null  
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-25T02:29:37.837

我遇到了同样的问题，我从 index.html 调用另一个 .php 页面。.php 页面正在保存和检索数据并绘制饼图。但是我发现当添加饼图绘制逻辑时，页面根本不会加载。罪魁祸首是从我的 index.html 调用 .php 页面的行：

```
<form action="store.php" method="post"> 
```

如果我将其更改为：

```
<form action="store.php" method="post" data-ajax="false"> 
```

，它会正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-03T01:25:15.863

关于使用 PHP 和发布数据

使用 是标签`data-ajax = "false"` 上的最佳选择。`<form>`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-11-17T23:19:10.637

问题是 JQuery Mobile 使用 ajax 提交表单。对此的简单解决方案是禁用 ajax 并将表单作为普通表单提交。

简单的解决方案：form action="" method="post" data-ajax="false"

# php - php群示例

> ID：15205438
> 
> 赞同：-2
> 
> 时间：2013-03-04T15:47:48.720
> 
> 标签：php, linux

在 php.net 中，有人评论说“在某些情况下，当每秒超过 20 个请求尝试对同一个文件执行独占群发时，脚本会卡住”。

我知道这是真的，因为我的应用程序卡住了，当我从应用程序中删除羊群时，我的脚本工作正常。

我尝试重现“在某些情况下，当每秒超过 20 个请求尝试对同一个文件执行独占群发时，脚本卡住”的示例。但没有运气。

有人可以写一个相同的例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:02:02.303

[`xargs`](http://linux.die.net/man/1/xargs)或者[`parallel`](http://linux.die.net/man/1/parallel)是你的朋友。编写一个小 php 脚本来锁定您的文件。然后通过 xargs 执行 X 次，看看它是否会关闭你的 httpd 服务器。

在 SO 上还找到了这个 bash 脚本：[Run parallel multiple commands at once in the same terminal](https://stackoverflow.com/questions/10909685/run-parallel-multiple-commands-at-once-in-the-same-terminal)

# css - Css垂直菜单：悬停模式下的背景颜色问题

> ID：15205440
> 
> 赞同：0
> 
> 时间：2013-03-04T15:47:58.747
> 
> 标签：css, menu

我的 CSS 垂直菜单存在设计问题。

它可以工作，但是当我将鼠标悬停在某个类别上时，它没有我想要的效果

下面，您将看到一个简单的垂直菜单，当您将鼠标悬停在主类别上时会出现该菜单

但是我想要一个小效果：当鼠标悬停在一个类别上时，我想添加一个背景颜色（黑色）。

它可以正常工作，但我希望背景的高度和宽度能够与文本的高度和宽度完全相同。目前，我不知道为什么；背景的高度大于我的文本的高度。这是一些关于它现在的状态以及我想成为的样子的图片。

现在怎么样了： ![我怎么下雪了](../Images/4a97259698e6f69300525466d5343adb.png)

我希望它是怎样的： ![我希望它是怎样的](../Images/926255a4bd0c327549c879fea3f2ec58.png)

这是我的代码 Html 代码

```
<div id="menu">
                    <ul id="MenuDeroulant">
                        <li style="margin-left:-10px;"><a href="#" style="">Main categorie</a>
                            <ul>            
                                <li><a href="" >Subcat 1</a></li>
                                <li><a href="" >Subcat 2</a></li>

                            </ul>
                        </li>
                    </ul> 
```

这是我的CSS代码：

```
 #MenuDeroulant
{
    margin: 0;
    padding: 0
}
#MenuDeroulant li
{    
    float: left;
    list-style: none;
}
#MenuDeroulant li a
{    
    display: block;
    padding: 0px 0px;
    text-decoration: none;
    color: #000; 
    white-space: nowrap;
    text-align:center;
}

#MenuDeroulant li a:hover
{    
    background: #000;
    color: #FFF;
} 

#MenuDeroulant li ul
{   visibility: hidden;
    padding: 0px 0px;
}

#MenuDeroulant li ul li
{    
    float: none;
    display: inline;
}

#MenuDeroulant li ul li a
{    
width: auto;
padding: 0px 0px;
} 

#MenuDeroulant li ul li a:hover
{    
background: #0000;
padding: 0px 0px;
} 
```

提前感谢您的帮助，祝您有美好的一天，

安塞尔姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T18:06:01.560

您可以向菜单超链接添加一个类，为它们提供一个 margin-bottom:3px ，它应该会增加容器中的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T15:51:15.813

用于`width:100%`您的所有`<li>`或`li a`元素，并为您的`<ul>`. 这将解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T16:09:16.410

使用该 CSS，您的嵌套 ul 将永久隐藏。你需要类似的东西

```
#MenuDeroulant li:hover ul {
visibility:visible;
} 
```

显示嵌套的菜单项，然后可能显示：inline on #MenuDeroulant li ul li a

# oracle - Oracle比较两个日期

> ID：15205442
> 
> 赞同：0
> 
> 时间：2013-03-04T15:48:10.120
> 
> 标签：oracle, function, plsql

我有 oracle 查询我想比较两个日期它工作正常但是当我把它放在 oracle 函数中并将日期作为参数传递时我得到这个错误：

```
ORA-01843: not a valid month
ORA-06512: at line 8
Process exited. 
```

这是我的功能：

```
Create or Replace 
FUNCTION GET_MAX_VALUE 
(
  PLAN_DATE IN DATE  
, LOC IN NUMBER  
, RES IN NUMBER  
, TIS IN NUMBER  
) RETURN NUMBER AS 
units number;
return_val number;
BEGIN
  select ts.booked_units into units from tsm_transaction_tbl ts
  where ts.location_id=loc and ts.resource_id=res and ts.ts_id=tis and ts.trans_date=to_date(plan_date,'mm/dd/yyyy');

  RETURN units;
END GET_MAX_VALUE; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T15:50:13.253

删除围绕变量的`to_date`函数。`plan_date`

您已经`plan_date`作为`DATE`类型变量传递。无需使用`to_date`函数将其转换为日期。

说到`to_date`函数，它用于将字符串（varchar2 类型）转换为`date`我们想要的格式的类型。您可以在[此处](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions183.htm)`to_date`阅读有关Oracle 网站上的功能的更多信息。

您的代码可以如下所示：

```
Create or Replace 
FUNCTION GET_MAX_VALUE 
(
  PLAN_DATE IN DATE  
, LOC IN NUMBER  
, RES IN NUMBER  
, TIS IN NUMBER  
) RETURN NUMBER AS 
units number;
return_val number;
BEGIN
  select ts.booked_units into units from tsm_transaction_tbl ts
  where ts.location_id=loc
  and ts.resource_id=res
  and ts.ts_id=tis
  and ts.trans_date = plan_date;

  RETURN units;
END GET_MAX_VALUE; 
```

# iphone - 无法读取数据 sqlite iOS 6

> ID：15205446
> 
> 赞同：0
> 
> 时间：2013-03-04T15:48:18.113
> 
> 标签：iphone, database, sqlite, ios6

我正在使用 macbook pro，我的程序运行良好。当我去我的 iMac 时，我尝试运行它，它在调试器区域 ( `NSSearchPathForDirectoriesInDomains`) 上给了我这个错误：`Unable to read data`。

我在正确的文件夹中有正确的 sqlite 文件，我检查了很多次。我在旧版本的应用程序中使用了相同的 sqlite 文件，它可以正常工作。不能在 iMac 上运行的同一个项目在我的 macbook pro 上运行。

我在 iphone 模拟器上进行了重置，我清理了我的构建并且总是发生相同的情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T18:24:44.510

我删除了`sqlite3_finalize(statement);`我的 sqlite 方法中的所有内容，现在我可以访问另一台计算机上的数据库。

我的问题，为什么我可以在我的 macbook pro 上使用`sqlite3_finalize(statement);`?

如果我不使用它，在执行一些 SELECT 之后，我将无法在数据库中插入任何内容。

*更新*

我改变了`sqlite3_finalize`它`sqlite3_reset`，它工作得很好。现在我可以在做一些 SELECT 后插入

# scala - Play Framework Modules：特定于模块的资产

> ID：15205448
> 
> 赞同：0
> 
> 时间：2013-03-04T15:48:21.717
> 
> 标签：scala, playframework, playframework-2.0

我是玩框架的新手，我正在尝试将我的应用程序分成多个更小的模块。例如，我想要一个`header`模块和一个`sidebar`模块。

现在，我已经创建了这些模块和一个`page`模块，它将把每个模块渲染到正确的位置。

下面是一个模块代码示例：

```
package controllers

import play.api.templates._

object SidebarService {

  def getHTML() : Html = {
    views.html.sidebar(name = "variable", repeat = 5)
  }
} 
```

请注意，它正在返回一个`Html`对象。

这是一个`page`模块的例子

```
package controllers

import play.api._
import play.api.mvc._

object Application extends Controller {

  def index = Action {
    var sideBar = SidebarService.getHTML()
    Ok(views.html.index(sideBar)("Your new application is ready."))
  }

} 
```

这很好用，但我对如何让模块特定的资产包含在模块中有点困惑`page`，例如`sidebar`模块具有特定的 css 和 javascript 文件，这些文件将被“包含”（并缩小）在模块的`<head>`标签中`page`。首先，我是否朝着模块化的正确方向前进？其次，我怎样才能完成特定于模块的资产？

任何指针都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T10:00:27.097

关于包含特定于模块的资产，我想您总是可以执行以下操作：

```
package controllers

import play.api.templates._

object SidebarService {

  def getAssets : Html = {
    // your <link> and <script> tags here
  }

  def getBody : Html = {
    views.html.sidebar(name = "variable", repeat = 5)
  }
} 
```

我想你会用抽象方法和抽象方法来制作类似`PageService`特征的东西。您的模块化方法似乎还可以。为了使页面具有任意数量的模块，我想我不仅将作为参数传递给，而且可能将 a包含由字符串（或符号或任何其他您想要的东西）键标识的各种模块，例如. 这样，在视图中，您可以获取您正在使用的模块的所有资产，并通过您定义的键进行查找，以了解在每个占位符中绘制什么。`getAssets``getBody``views.html.index``sideBar``Map[String, PageService]``Map("header" -> HeaderService, "sidebar" -> SidebarService)`

# javascript - java.sql.Date 的 JavaScript 正则表达式

> ID：15205456
> 
> 赞同：1
> 
> 时间：2013-03-04T15:49:11.280
> 
> 标签：javascript

在我的应用程序中，所有日期都使用 java.util.Date 格式保存：

```
YYYY-mm-DD (year, month, day) 
```

所以 1988-05-13 是一个有效的日期。所以我认为只有数字是有效的，月份是 [1:12]，天是 [1:30] 例如这是我用于登录的正则表达式

```
/^[a-z]([0-9a-z_])+$/i 
```

我应该使用哪个 JavaScript 正则表达式来检查这个日期？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T15:58:37.920

让我们[`Date.parse()`](http://www.ecma-international.org/ecma-262/5.1/#sec-15.9.6)为您完成艰苦的工作：

```
function isValidDate(str){
    return !isNaN(Date.parse(str));
} 
```

`Date.parse(str)``NaN`如果 `str`不是有效日期，将返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T15:52:30.270

像这样的东西：

```
/^\d\d\d\d-\d\d-\d\d$/ 
```

将检查正确的格式 - 但它不会检查月份和日期的有效范围。我认为没有办法用正则表达式做到这一点。

# c# - 从调用方法中获取参数名称

> ID：15205457
> 
> 赞同：2
> 
> 时间：2013-03-04T15:49:20.063
> 
> 标签：c#, .net

我有一个使用 C# .NET 2.0 的项目（不能使用更高版本）。我想在第一个调用的方法中获取方法的参数名称。如果我从 MyMethodsClass 调用一个方法，我想接收一个字符串，指示哪个参数无效，遵循 MyCheckClass 类的 isValid 方法中指示的一些条件。

使用以下代码，我得到一个返回“请检查 5 参数”的字符串，以防我调用 myMehtod(5,1,1)。但我想获得，“请检查 a 参数”。

我怎么能那样做？谢谢！

```
public MyMethodsClass {

    public string myMethod (int a, int b, int c) {

        return MyCheckClass.isValid(a,b,c);
    }

    public string myMethod2 (int d, int e) {
        return MyCheckClass.isValid(d,e);
    }

}

//Other file
public class MyCheckClass {

    public static string isValid (params object[] parameters) {

            StringBuilder result= new StringBuilder();          
            for (int i = 0; i < parameters.Length; i++)
            {
                object p = parameters[i];
                //Some checks...
                if (p == null || p.Equals("") || p != 5)
                {                    
                    result.Append("Please check the " + p + " parameter");
                }
            }
            return result.toString();               
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T15:55:39.743

你把你已经知道怎么做的两件事结合起来。

1.  [如何找到调用当前方法的方法？](https://stackoverflow.com/questions/171970/how-can-i-find-the-method-that-called-the-current-method)
2.  [如何在 C# 中获取方法参数的名称？](https://stackoverflow.com/questions/214086/how-can-you-get-the-names-of-method-parameters-in-c/214108#214108)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T15:53:59.863

这两行应该可以为您完成工作，也许需要适应但应该可以工作^^

```
 MethodInfo info = typeof (MyMethodsClass).GetMethod("MethodName");
        string name = info.GetParameters()[indexOfTheFaultyOne].Name; 
```

# c++ - visual studio .cu 文件显示语法错误但编译成功

> ID：15205458
> 
> 赞同：4
> 
> 时间：2013-03-04T15:49:21.083
> 
> 标签：c++, visual-studio, syntax, cuda

我有以下文件：

```
// Main.cpp
#include "kernel_util.cuh"

int main()
{
    call_kernel();
}

// kernel_util.cuh
#ifndef KERNEL_UTIL
#define KERNEL_UTIL

#include <cuda_runtime.h>

void call_kernel();

#endif

// kernel_util.cu
#include "kernel_util.cuh"
#include "kernel.curnel"

#define thread 16

void call_kernel() {

    dim3 blocks( ( width + thread - 1 ) / thread, ( height + thread - 1 ) / thread );

    dim3 threads( thread, thread );

    kernel<<<blocks, threads>>>();
}

// kernel.curnel
#ifndef KERNEL
#define KERNEL

#include <cuda_runtime.h>

__global__ void kernel() {

}

#endif 
```

我安装了带有 64 位编译器和 CUDA 5.0 工具包的 Visual Studio 2010。上面的代码编译成功但是行

```
kernel<<<blocks, threads>>>(); 
```

3rd`<`给出“expected an expression”错误，但代码编译没有问题并达到内核函数。

配置属性：

*   cpp 文件项类型 c/c++ 编译器
*   cu 文件项类型 cuda c/c++
*   cuh 文件项类型 不参与构建
*   curnel 文件项类型 不参与构建

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T15:59:37.737

IDE (MSVC++) 和它用于 IntelliSense 的编译器前端（自动完成建议和“不正确”代码下的红线）对 CUDA 及其特殊语法一无所知。VS 有一些方法可以理解大多数 CUDA 代码，但是在`<<< >>>`CUDA 中选择块/线程是非常不幸的，C++ 编译器前端无法理解（至少，它需要对解析器进行非常广泛的修改）。

总而言之，你必须忍受下面的红色波浪线`<<< >>>`。

# unit-testing - 在 .Net 中进行端到端测试的任何好的资源？

> ID：15205464
> 
> 赞同：2
> 
> 时间：2013-03-04T15:49:45.363
> 
> 标签：unit-testing, tdd, integration-testing, bdd

我一直在尝试采用 TDD，更具体地说是 BDD。我知道所有花哨的术语，我知道应该做什么，但我没有任何指导/人来帮助我。这就像在没有教练的情况下学习驾驶，你不知道你是否正确换档等:)

我刚刚阅读了 Steve Freeman 和 Nat Pryce 的《Growing Object-Oriented Software Guided By Tests》一书，虽然这是一本很棒的书，而且我掌握了很多概念，但是这些示例是用 Java 编写的，对我来说太难了。作为一个 .Net 人，我跳过了大部分代码，因为这对我来说更像是一种噪音。

我希望对于.Net 的人来说会有一些等效的书籍/材料。如果它使用 ASP.Net MVC，我会更喜欢。

如果有任何书展示了如何使用这些技术构建现实世界的应用程序，而不仅仅是一个计算器示例；请与我分享。

我会很感激。

谢谢

# wpf - 绑定 RadioButtonList

> ID：15205465
> 
> 赞同：-2
> 
> 时间：2013-03-04T15:49:50.437
> 
> 标签：wpf, listbox, radio-button

有人能帮我吗？我想在 ListBox 的 Datatemplate 中绑定 RadioButtons 列表，但它不充当 RadioButtonList，即它可以同时选择多个 RB。我在网上看了但找不到正确的答案 感谢您的帮助

我的xml如下

```
 <ItemsControl x:Name="itcPayTypes" DockPanel.Dock="Top" BorderThickness="0">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <StackPanel Orientation="Horizontal" />
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                        <StackPanel Orientation="Horizontal">
                            <RadioButton Content="{Binding PayTypeName}"  Click="RadioButton_Click_1"/>
                        </StackPanel>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:11:27.530

嗨，为所有 RadioButtons 设置相同的 GroupName。我希望这将有所帮助。

```
<StackPanel Orientation="Horizontal">
     <RadioButton Content="{Binding PayTypeName}" GroupName="abc" Click="RadioButton_Click_1"/>
</StackPanel> 
```

# javascript - 弹跳球 5 次 jquery/javascript 初学者级别

> ID：15205466
> 
> 赞同：2
> 
> 时间：2013-03-04T15:49:53.577
> 
> 标签：javascript, jquery, jquery-animate

我对 js 和 jQuery 很陌生，想实现一个在这里讨论过很多次的简单动画：一个弹跳球。但是，我没有找到具体问题的答案，因为已经讨论的主题要复杂得多。

我想要一个非常简单的动画：五次弹跳并与第六次保持在地面上。到目前为止，我已经实现了这一目标。但是对于五次反弹，我想将反弹距离减少初始距离的 20%。假设距离为 100，它应该先反弹到 80，然后再反弹到 60……到 20 到 0。

[你可以在这里](http://jsfiddle.net/sfiddle/2EKCX/1/)看到我的尝试。

或者只是这里的js代码：

```
$(function() {

    var time = 500;
    var bounces = 5;

    function bounceDown(){
      $(".ball").animate({top: 200}, time, function(){
        bounceUp();
      });
    };

    function bounceUp() {
      $(".ball").animate({top: 100}, time);
    };

    function shadowUp(){
      $(".shadow").animate({width: 100, height: 10, left: 85, top: 245, opacity: 1}, time,    
    function(){
        shadowDown();
      });
    };

    function shadowDown() {
      $(".shadow").animate({width: 0, height: 0, left: 130, top: 225, opacity: 0}, time);
    };     

    function finalDown(){
        $(".ball").animate({top: 200}, time);
    };

    function finalShadow(){
        $(".shadow").animate({width: 100, height: 10, left: 85, top: 245, opacity: 1}, time);    
    };

    $(".button").on("click", function(){
      for (var i = 0; i < bounces; i++){
        setTimeout(function(){
          bounceDown();
          shadowUp();      
        }, time*2*i);
        setTimeout(function(){
          finalDown();
          finalShadow();
      }, 5000);
      };               
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T16:00:30.140

您可以声明您的初始`top_bounce`值：

```
var top_bounce = 100; 
```

然后将您的`bounceUp`功能更改为：

```
function bounceUp() {
  $(".ball").animate({top: top_bounce}, time);
    top_bounce = top_bounce + 20;
}; 
```

就像你可以在这里看到的：http: [//jsfiddle.net/darkajax/5wASf/](http://jsfiddle.net/darkajax/5wASf/)

关于您评论中提到的“奖金问题”，它会是类似的，声明一个变量，如：`var shadow_size = 0;`然后你的函数如：

```
function shadowDown() {
        console.log(shadow_size);
      $(".shadow").animate({width: shadow_size*100, height: shadow_size*10, left: 110, top: 225, opacity:  0}, time);
        shadow_size += 0.2;

    }; 
```

你可以看到小提琴更新了，你也只需要做一些类似的事情`left`就可以让它看起来居中

# java - 在 Play 2.0.4 中强制对上传文件的文件名进行正确的字符集编码

> ID：15205467
> 
> 赞同：0
> 
> 时间：2013-03-04T15:49:53.583
> 
> 标签：java, file-upload, playframework-2.0, windows-server-2008, forms

我对上传文件名称中的非拉丁字符有烦人的问题。我使用的上传方法与[Play 的文档](http://www.playframework.com/documentation/2.0.4/JavaFileUpload)（由 DB 操作扩展）中的上传方法非常相似，并且在 unix 机器上运行`dist`vrsion 时，一切正常。在 Windows（生产服务器）中，非拉丁字符被损坏，例如：

```
return ok(uploadFile.getFilename()); 
```

给我：`zaÅ¼Ã³Å‚Ä‡_gÄ™Å›la_jaÅºÅ„.png`而不是`zażółć_gęśla_jaźń.png`

如何避免这种情况和/或强制读取和写入文件名始终使用相同的编码？

**编辑**

我刚刚发现，当使用`play start`（而不是`dist`+ `start.bat`）文件名启动应用程序时，文件名写得正确......这让我更加困惑 oO

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T18:49:57.900

The working solution is forcing it while starting the jar in the start.bat script by adding param:

```
-Dfile.encoding=utf-8 
```

# java - jboss 5.1 上的 el-api 2.2

> ID：15205469
> 
> 赞同：2
> 
> 时间：2013-03-04T15:50:02.873
> 
> 标签：java, jsf, el, jboss5.x

我想在 jboss 5.1 上使用 el-api 2.2。我不能使用 el-jboss，因为它与 BigDecimal 类型的 JSF 验证冲突。我已经在我的项目中集成了 el-api 2.2，并且在 tomcat 上它运行顺利。当我尝试在 Jboss 上部署时，我觉得他正在从他的公共 lib 目录而不是我的 jar 加载 el-api 1.0，因为我获得了以下堆栈跟踪：

```
javax.faces.FacesException: java.lang.NoSuchMethodError: javax.el.ELResolver.invoke(Ljavax/el/ELContext;Ljava/lang/Object;Ljava/lang/Object;[Ljava/lang/Class;[Ljava/lang/Object;)Ljava/lang/Object;
at javax.faces.component.UIComponentBase$AttributesMap.get(UIComponentBase.java:1593)[...] 
```

我的 web.xml 配置正确（这是我在谷歌上的第三天......）

```
<context-param>
    <param-name>com.sun.faces.expressionFactory</param-name>
    <param-value>com.sun.el.ExpressionFactoryImpl</param-value>
</context-param>

<context-param>
    <param-name>org.jboss.jbossfaces.WAR_BUNDLES_JSF_IMPL</param-name>
    <param-value>true</param-value>
</context-param> 
```

我知道覆盖与 Jboss 捆绑的库会起作用，但我不能将此技术用于生产服务器

# hibernate - Hibernate / Postgresql - 协议版本 3/2 准备好的语句/参数

> ID：15205477
> 
> 赞同：2
> 
> 时间：2013-03-04T15:50:21.850
> 
> 标签：hibernate, postgresql

使用协议版本 3 向我的 Postgres db (9.2.3) 发出以下休眠 hql：

```
select  count(*)  , obj1.type , (obj1.creationTime + :p1 )  
from fr.xxx.WorkflowPojo obj1 
group by obj1.type  , (obj1.creationTime + :p1 )  
order by  (obj1.creationTime + :p1 ) asc 
```

得到：`ERROR: column "workflow.creation_time" must appear in the GROUP BY clause or be used in an aggregate function`

虽然我对协议版本 2 也不例外

在 pgAdmin 中，以下请求是可以的，所以我想这不是 PgSql 问题：

```
PREPARE test2(varchar) as 
select  count(*)  , 
workflow.optype, (workflow.creation_time + $1::integer )
from workflow
group by workflow.optype, (workflow.creation_time + $1::integer )
order by  (workflow.creation_time + $1::integer ) asc 
```

如果我想使用 PostgreSQL 协议版本 3，任何人都知道如何解决这个问题？

**编辑：**感谢克雷格的帮助。这是我从 postgreSQL 的角度得到的：

版本 3：

```
 STATEMENT:  select count(*) as col_0_0_, workflowdd0_.optype as col_1_0_,       workflowdd0_.creation_time+$1 as col_2_0_ 
    from workflow_ddc workflowdd0_ 
    group by workflowdd0_.optype , workflowdd0_.creation_time+$2 
    order by workflowdd0_.creation_time+$3 
```

版本 2：

```
 LOG:  statement: select count(*) as col_0_0_, workflowdd0_.optype as col_1_0_, workflowdd0_.creation_time+3600 as col_2_0_ 
    from workflow_ddc workflowdd0_ 
    group by workflowdd0_.optype , workflowdd0_.creation_time+3600 
    order by workflowdd0_.creation_time+3600 asc 
```

从休眠的角度来看：

```
 Hibernate: select count(*) as col_0_0_, workflowdd0_.optype as col_1_0_, workflowdd0_.creation_time+? as col_2_0_ 
    from workflow_ddc workflowdd0_ 
    group by workflowdd0_.optype , workflowdd0_.creation_time+? 
    order by workflowdd0_.creation_time+? asc 
```

使用版本 3 服务器端准备好的语句，它在任何地方用 $1 $2 $3 $4 替换 $1 ...使用版本 2，它替换字符串客户端。

也许这是一个 jdbc 驱动程序错误？恕我直言，它应该在任何地方都保持 1 美元...

谢谢克里斯托夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T12:55:50.247

这看起来像是 JDBC API 限制加上 PostgreSQL 对`GROUP BY`子句相当严格。

关键的区别在于您的手动 PgAdmin 测试使用*单个*参数并在查询中使用它两次。相比之下，Hibernate 查询将值作为*两个单独*的参数传递两次。有时`PREPARE`PostgreSQL 不能证明`$1`总是相等`$2`的，即使在实践中你知道它们会，所以 PostgreSQL 拒绝计划查询。

## 问题演示

演示设置：

```
CREATE TABLE somedemo( x integer, y integer );
INSERT INTO somedemo(x,y) SELECT a,a from generate_series(1,15) a; 
```

演示 1，文本替换，工作正常：

```
SELECT x, (y+1) FROM somedemo GROUP BY x, y+1; 
```

Demo 2，单参数，工作正常，因为 Pg 可以证明`(y+$1)`在一个地方总是等于`(y+$1)`在另一个地方：

```
PREPARE preptest1(integer) AS select x, (y+$1) from somedemo GROUP BY x, y+$1;
EXECUTE preptest1(1); 
```

Demo 3，两个参数。失败是因为 Pg 无法证明它`(y+$1)`等于`(y+$2)`时间`PREPARE`：

```
regress=> PREPARE preptest2(integer,integer) AS SELECT x, (y+$1) FROM somedemo GROUP BY x, y+$2;
ERROR:  column "somedemo.y" must appear in the GROUP BY clause or be used in an aggregate function
LINE 1: PREPARE preptest2(integer,integer) AS SELECT x, (y+$1) FROM ...
                                                         ^ 
```

这在您强制协议级别 2 时有效，因为 JDBC 驱动程序替换了服务器端的参数。

## 其他语言如何处理这个

在 Python+psycopg2 或其他具有更复杂数据库驱动程序的语言中，我将使用命名或位置参数来处理这个问题：

```
$ python
Python 2.7.3 (default, Aug  9 2012, 17:23:57) 
>>> import psycopg2
>>> conn = psycopg2.connect('')
>>> curs = conn.cursor()
>>> curs.execute("SELECT x, (y+%(parm)s) FROM somedemo GROUP BY x, y+%(parm)s", { 'parm': 1 })
>>> curs.fetchall()
[(15, 16), (3, 4), (12, 13), (14, 15), (10, 11), (11, 12), (8, 9), (5, 6), (13, 14), (1, 2), (2, 3), (4, 5), (7, 8), (9, 10), (6, 7)]
>>> 
```

不幸的是，看起来 JDBC 只支持 ; 中的命名参数`CallableStatement`。我们再次看到 Java 遗留问题的痛苦来咬我们。

## 为什么修复它并不简单

为了处理这个服务器端，PostgreSQL 将不得不延迟计划这些语句，直到它获得参数，然后将其作为常规的临时查询执行。尽管引入准备好的语句重新计划已经奠定了一些基础，但目前尚不支持这样做。

目前尚不清楚我们将如何在 JDBC 驱动程序端透明地处理它。即使我们延迟发送准备好的语句直到我们得到第一组参数，我们也不知道“$1”总是等于“$2”（并且可以组合），因为它们在第一次执行时是相等的。 ..

Hibernate 无法解决这个问题；它知道这`:p1`在所有三个地方都是同一个参数，但它无法通过 JDBC 位置参数接口的限制告诉 PostgreSQL。它可以将所有参数替换到查询文本中，但这几乎总是错误的做法，这是一个相当不寻常的极端情况。

我看到的唯一可靠的解决方法是让 PgJDBC 使用命名或序数参数（如`?:p1`or ）扩展 JDBC `?:1`。然后可以扩展 Hibernate 的 PostgreSQL 方言以支持它们。为了避免兼容性问题，需要设置连接参数才能启用扩展参数语法。这一切看起来都很痛苦，所以我宁愿等到 JDBC 规范添加真正的命名参数支持（即：不要屏住呼吸，你的孙子可能会活着看到它发生）或者只是解决这个问题。

## 解决方法

我怀疑最好的选择是使用子查询来生成具有生成值的虚拟表，然后在外部查询中对其进行分组。执行此操作的 SQL 如下所示：

```
SELECT x, y_plus FROM (
  SELECT x, (y+?) FROM somedemo
) temptable(x,y_plus)
GROUP BY x, y_plus; 
```

此措辞只需要对参数的一次引用。将其翻译成 HQL 留给读者作为练习；-)。

PostgreSQL 的查询优化器通常会将其转换为与简单字符串替换形式一样高效的计划，如下所示：

```
regress=> PREPARE preptest5(integer) AS SELECT x, y_plus FROM (SELECT x, (y+$1) FROM somedemo) temptable(x,y_plus) GROUP BY x, y_plus;
regress=> explain EXECUTE preptest5(1);

                          QUERY PLAN                           
---------------------------------------------------------------
 HashAggregate  (cost=1.26..1.45 rows=15 width=8)
   ->  Seq Scan on somedemo  (cost=0.00..1.19 rows=15 width=8)
(2 rows)

regress=> explain SELECT x, y+1 FROM somedemo GROUP BY x, y+1;
                          QUERY PLAN                           
---------------------------------------------------------------
 HashAggregate  (cost=1.26..1.45 rows=15 width=8)
   ->  Seq Scan on somedemo  (cost=0.00..1.19 rows=15 width=8)
(2 rows) 
```

对于非性能关键的临时或不经常使用的功能，您可以通过编写在 CTE VALUES 子句中传递参数*一次的本机查询来解决此问题，例如：*

```
PREPARE preptest3(integer) AS 
WITH params(a) AS (VALUES($1)) 
SELECT x, (y+a) FROM somedemo CROSS JOIN params GROUP BY x, y+a;

EXECUTE preptest3(1); 
```

不用说这很笨拙，可能表现得不是特别好，但它适用于您必须在许多不同上下文中引用参数的情况。

如果您不能使用前面从 HQL 中列出的子查询表方法，那么 hacky CTE 的更好替代方法是将查询包装在 SQL 函数中并从 JDBC 调用该函数，例如：

```
-- Define this in your database schema or run it on app startup:
CREATE OR REPLACE FUNCTION test4(integer) RETURNS TABLE (x integer, y integer) AS $$
    SELECT x, (y+$1) FROM somedemo GROUP BY x, y+$1;
$$ LANGUAGE sql;

-- then in JDBC prepare a simple "SELECT * FROM test4(?)", resulting in:

PREPARE preptest4(integer) AS SELECT * FROM test4($1);

EXECUTE preptest4(1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-03T15:34:33.610

作为记录，最新版本的 postgresql 放弃了对协议 V2 的支持。可以使用参数 preferQueryMode 来强制 jdbc 驱动程序发送值“内联”，而不是命名参数

# r - 同时对向量及其元素进行操作的函数如何在 R 中工作？

> ID：15205480
> 
> 赞同：1
> 
> 时间：2013-03-04T15:50:24.657
> 
> 标签：r

举个例子：

```
boltzmann <- function(x, t=0.1) { exp(x/t) / sum(exp(x/t)) }
z=rnorm(10,mean=1,sd=0.5)
exp(z[1]/t)/sum(exp(z/t))
[1] 0.0006599707
boltzmann(z)[1]
[1] 0.0006599707 
```

似乎`exp`在`boltzmann`函数中对元素和向量进行操作，并且知道何时做正确的事情。是否`sum`“展开”输入向量并将表达式应用于值？有人可以解释这在 R 中是如何工作的吗？

编辑：感谢您对 R n00b 的所有评论、澄清和耐心。总之，这个工作的原因对于来自其他语言的我来说并不是很明显。以python为例。您将首先计算总和，然后计算向量中每个元素的值。

```
denom = sum([exp(v / t) for v in x])
vals = [exp(v / t) / denom for v in x] 
```

而 R`sum(exp(x/t))`可以内联计算。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T15:57:32.570

这在[R 简介](http://cran.r-project.org/doc/manuals/R-intro.html)，[第 2.2 节：向量算术](http://cran.r-project.org/doc/manuals/R-intro.html#index-Recycling-rule-19)中进行了解释。

> 向量可以在算术表达式中使用，在这种情况下，操作是逐个元素执行的。出现在同一表达式中的向量不必都具有相同的长度。如果不是，则表达式的值是一个与表达式中出现的最长向量具有相同长度的向量。表达式中较短的向量会根据需要（可能是部分地）*循环使用，直到它们与最长向量的长度相匹配。*特别是简单地重复一个常数。因此，通过上述任务，命令
> 
> ```
> x <- c(10.4, 5.6, 3.1, 6.4, 21.7)
> y <- c(x, 0, x)
> v <- 2*x + y + 1 
> ```
> 
> 生成一个长度为 11 的新向量 v，该向量通过逐个元素相加构成，2*x 重复 2.2 次，y 仅重复一次，1 重复 11 次。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T15:58:50.960

如果您分别评估分子和分母，这可能会更清楚：

```
x = rnorm(10,mean=1,sd=0.5)
t = .1
exp(x/t)
# [1] 1.845179e+05 6.679273e+03 4.379369e+06 1.852623e+06 9.960374e+02
# [6] 1.359676e+09 6.154045e+03 1.777027e+01 1.070003e+04 6.217397e+04
sum(exp(x/t))
# [1] 2984044296 
```

由于分子是长度为 10 的向量，分母是长度为 1 的向量，除法返回长度为 10 的向量。

由于您有兴趣将其与 Python 进行比较，请想象以下两条规则已添加到 Python 中（顺便提一下，这些规则类似于 中的数组的用法`numpy`）：

1.  如果您将列表除以一个数字，它会将列表中的所有项目除以该数字：

    ```
    [2, 4, 6, 8] / 2
    # [1, 2, 3, 4] 
    ```

2.  Python 中的函数`exp`是“矢量化的”，这意味着当它应用于列表时，它将应用于列表中的每个项目。但是， sum 仍然按您期望的方式工作。

    ```
    exp([1, 2, 3]) => [exp(1), exp(2), exp(3)] 
    ```

在这种情况下，想象一下如何在 Python 中评估此代码：

```
t = .1
x = [1, 2, 3, 4]
exp(x/t) / sum(exp(x/t)) 
```

它将遵循以下简化，使用这两个简单的规则：

```
exp([v / t for v in x]) / sum(exp([v / t for v in x]))
[exp(v / t) for v in x] / sum([exp(v / t) for v in x]) 
```

现在你明白它是怎么知道区别的了吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T15:58:10.600

向量化在 R 中有几个稍微不同的含义。

它可能意味着接受一个向量输入，转换每个元素，并返回一个向量（就像`exp`做的那样）。

它也可能意味着接受向量输入并计算一些汇总统计量，然后返回一个标量值（就像这样`mean`做）。

`sum`符合第二种行为，但也有第三种向量化行为，它将创建跨输入的汇总统计。`sum(1, 2:3, 4:6)`例如，尝试。

# ldap - 如何使用 Go 与 LDAP 协议

> ID：15205481
> 
> 赞同：23
> 
> 时间：2013-03-04T15:50:24.630
> 
> 标签：ldap, go

如何使用 Go 直接调用和管理**Ldap**协议？有包吗？还是我必须使用 udp 和 tcp？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-09T00:10:22.377

There is no LDAP library in the Go standard libraries, but a quick Google search reveals several you could try:

*   [https://github.com/mmitton/ldap](https://github.com/mmitton/ldap)
*   [https://github.com/tonnerre/go-ldap](https://github.com/tonnerre/go-ldap)

This second one is actually a fork of the first one. On github you can always view the open issues, last update and forking network ([https://github.com/mmitton/ldap/network](https://github.com/mmitton/ldap/network)) to get a pretty good sense of which library you should use when there is a lot of forking.

If you need a library for something omitted in the Go standard libraries there are several good places to look:

*   Always start with a quick Google search
*   Checkout: [http://go-lang.cat-v.org/pure-go-libs](http://go-lang.cat-v.org/pure-go-libs) / [http://go-lang.cat-v.org/library-bindings](http://go-lang.cat-v.org/library-bindings)
*   And: [http://godoc.org/](http://godoc.org/)
*   And: [http://code.google.com/p/go-wiki/wiki/Projects](http://code.google.com/p/go-wiki/wiki/Projects)

If all of those fail you and you don't feel up to creating your own implementation, keep in mind you can always use [cgo](http://golang.org/cmd/cgo/) to call C code (such as one of the many C LDAP libraries for example) from Go.

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-09-04T06:12:49.613

我想我应该在这里加上我的十美分。这是一个旧帖子，但仍然在这里

在使用上面 voidlogic 提到的库之后，我使用了[https://github.com/mavricknz/ldap库。](http://github.com/mavricknz/ldap)`mmitton/ldap`mmitton lib 的问题在于它在过滤器中不能很好地处理转义字符。

```
The test filter: (&(objectClass=user)(cn=wickd(bracketTest )))

Escaped Filter:  (&(objectClass=user)(cn=wickd\28bracketTest \29)) 
```

即使使用转义过滤器，`MMitton library`刚刚返回过滤器编译错误。加载了 Mavricknz 库，它工作了。甚至自带EscapeFilter功能！光彩！

无论如何......我想我应该为那些和我有同样挣扎的人发布这个:)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-08-22T13:16:17.613

我开始编写一个帮助程序库来构建能够使用 LDAP 协议的服务器软件。包括一些使用示例。

*   [https://github.com/vjeantet/ldapserver](https://github.com/vjeantet/ldapserver)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-03-02T22:31:25.307

此外，对于它的服务器端，我不久前写了这个包（在 Go 中）： [https ://github.com/bradleypeabody/godap](https://github.com/bradleypeabody/godap)

它不是一个完整的 LDAP 服务器，但可以很好地在另一个数据源之上实现身份验证（我无法找到任何其他解决的项目）。

它做了很多“直接管理 Ldap 协议”:)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-12-17T12:29:42.990

有关简单的高级 ldap 客户端，请参阅[go-ldap-client](https://github.com/jtblin/go-ldap-client)、[go docs](https://godoc.org/github.com/jtblin/go-ldap-client)。

[https://godoc.org/?q=ldap](https://godoc.org/?q=ldap)上的大多数选项 只是另一个选项的分支，它们中的大多数都太低级或太有限（例如，不返回导致问题难以解决的错误）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-07-25T20:49:13.270

如果您想在您的网页上提供基于 LDAP 的身份验证，您可能会喜欢我创建的解决方案：`go-ldapc`是一个 LDAP 身份验证客户端模块，只有一个 API。

它在[github - sona-tar/go-ldapc 上](https://github.com/sona-tar/go-ldapc)。

# iphone - 如何将 NSObject 分配给 UILabel

> ID：15205484
> 
> 赞同：0
> 
> 时间：2013-03-04T15:50:34.110
> 
> 标签：iphone, ios

我有一个对象 - `NSObject`，从 NSDictionary 分配的结构为：

```
{
    author = "abc";
    content = "xyz";
    img = "1.gif";
    title = "bla bla"
} 
```

所以我改为`DetailViewController`，如何分配值-> `UILabel`，我分配了 Assume

DetailViewController.h, @property(strong ,nonatomic) UILabel *bookTitle;

如何分配字段 Title của NSObject -> bookTitle ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T16:10:40.090

做这个：

```
controller.bookTitle = data[@"title"]; 
```

where`controller`是对您的引用，`DetailViewController`并且`data`是`NSDictionary`对数据的引用。

# asp.net-mvc-3 - 如果我的列表在 ViewBag 中，如何让我的下拉列表保留所选项目？

> ID：15205491
> 
> 赞同：0
> 
> 时间：2013-03-04T15:50:44.880
> 
> 标签：asp.net-mvc-3

如果我的列表在 ViewBag 中，如何让我的下拉列表保留所选项目？

这第一个 DropdownList 工作正常：

```
 @Html.DropDownList("searchString", Model.Enrollments.FirstOrDefault().WeekDays.Select(s => new SelectListItem { Text = s.ToString(), Value = s.ToString(), Selected = s.ToString().Equals(selectedItemFromList) })) 
```

现在我想要另一个 DropdownList 但不是从模型中获取列表，而是从视图包中获取它，如下所示：

```
@Html.DropDownList("searchString", new SelectList(ViewBag.someList, "text"), "select an item").. Again this works but I want the format like the first Dropdownlist that retains te selected value…something like this…

@Html.DropDownList("searchString", ViewBag.someList.Select(t=> new SelectListItem{ Text= t.ToString(),Value =t.ToString(),Selected =t.ToString().Equals(selectedItemFromList)})) 
```

这不起作用，因为我是从我怀疑的 viewbag 中获取我的列表的。有没有办法使用 ViewBag 来保留我选择的列表项，就像第一个示例一样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T15:59:26.560

更好的方法是`ViewBag`在控制器动作中初始化......

控制器

```
ViewBag.someList = Model.Enrollments.FirstOrDefault().WeekDays
                   .Select(s => new SelectListItem 
                   { 
                        Text = s.ToString(), 
                        Value = s.ToString(), 
                        Selected = s.ToString().Equals(selectedItemFromList)
                   } 
```

看法

```
@Html.DropDownList("someList", ViewBag.someList as SelectList, "select one") 
```

您可以在控制器端初始化选定的值。

[在这里](http://blogs.msdn.com/b/rickandy/archive/2012/01/09/cascasding-dropdownlist-in-asp-net-mvc.aspx)查看示例...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T01:49:12.393

该解决方案与我的解决方案相同，只是您的解决方案是在控制器而不是视图中实现的。我能够显示我的列表，但我想要的是一种在重新访问视图时保持列表中选定项目的方法。我的列表不是模型属性。我在控制器中创建了它，然后通过 viewbag 将它发送到视图。我展示的第一个示例是将列表作为模型属性访问。访问新列表查看 viewbag。我希望它像我的第一个列表一样配置，可以正常工作。自从我的原始帖子以来，我找到了解决方案。

由于我需要视图中的解决方案，最终做到了：

```
@Html.DropDownList("theString", listofinstructors.Select(tch => new SelectListItem { Text = tch.ToString(), Value = tch.ToString(), Selected = tch.ToString().Equals(somethingSelected) })) 
```

# php - Wordpress 干扰子目录 php 脚本

> ID：15205492
> 
> 赞同：2
> 
> 时间：2013-03-04T15:50:46.440
> 
> 标签：php, wordpress

我在 root 中安装了 wordpress。在一个子目录中，我有一组 PHP 脚本（一个简单的登录系统）

相同的脚本集合可以在我的另一台服务器（根目录中没有 wordpress）上完美运行。但是，它们不适用于此服务器。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T15:53:07.923

尝试在您的子文件夹中创建一个`.htaccess`文件并将其放入：

```
RewriteEngine Off 
```

* * *

## 作为补充，请注意：

> 如果您使用的是 Wordpress，请务必保护自己免受黑客攻击，保护您的网站和主机免受黑客攻击的一个步骤是永远不要在根目录中安装 wordpress，尝试为它创建一个子文件夹

# scala - Scala - 简单的契约设计

> ID：15205495
> 
> 赞同：7
> 
> 时间：2013-03-04T15:51:05.653
> 
> 标签：scala

我厌倦了 Java 的冗长，所以我将 Scala 作为个人项目来学习。我喜欢我所看到的很多东西，但想知道是否有一种方法可以**有效地**在方法上实现一些简单的契约。我不是（必然）在完整的 DbC 之后，但有没有办法： -

1.  表示参数或类字段是必需的，即不能为空。如果存在 OPTIONAL 值，Option 的东西似乎清楚地表明了，但我想指定类不变量（需要 x），并且还要简洁地指定需要一个参数。我知道我可以做“如果”抛出某种异常，但我想要这个非常常见的用例的语言功能。我喜欢我的接口紧凑，我不喜欢防御性编程。

2.  是否可以定义简洁高效的（运行时性能）范围类型，例如“NonNegativeInt” - 我想说一个参数> = 0。或者在一个范围内。PASCAL 有这些类型，我发现它们非常适合传达意图。这是 C、C++、Java 等的一大缺点。当我说**简洁**时，我的意思是我想像普通 int 一样轻松地声明这种类型的变量，而不必在堆上新建每个实例。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-04T16:01:09.000

对于第（1）点，`Option`确实应该足够了。这是因为虽然 scala 支持 null 值，但它主要是为了与 Java 兼容。Scala 代码不应该包含 null 值，并且它应该被限制在非常本地化的地方，并尽快转换为一个选项（好的 scala 代码永远不会让 null 值传播）。所以在惯用的 scala 中，如果一个字段或参数**不是**类型`Option`，这实际上意味着它是必需的。

现在，还有（实验性的，据我所知从未完全支持）`NotNull`特征。请参阅[NotNull 特征在 2.8 中如何工作以及是否有人实际使用它？](https://stackoverflow.com/questions/2335496/how-does-the-notnull-trait-work-in-2-8-and-does-anyone-actually-use-it)

对于第 (2) 点，scala 2.10 引入了[值类](http://docs.scala-lang.org/sips/pending/value-classes.html)。使用它们，您可以定义自己的包装类`Int`而无需运行时开销，并按照您认为合适的方式实现其运算符。唯一可以进行运行时检查的地方是从正常转换`Int`为您的`NonNegativeInt`（如果 int 为负数则抛出异常）。请注意，每次创建 new 时都会执行此检查`NonNegativeInt`，这也意味着每次执行操作时都会执行此检查，因此会产生非空运行时影响。但是 Pascal 处于同样的情况（范围检查是在 Pascal 中在运行时执行的）所以我想你可以接受。

**更新**：这是`NonNegativeInt`（此处重命名为`UInt`）的示例实现：

```
object UInt {
  def apply( i: Int ): UInt = {
    require( i >= 0 )
    new UInt( i )
  }
}
class UInt private ( val i: Int ) extends AnyVal {
  override def toString = i.toString
  def +( other: UInt ) = UInt( i + other.i)
  def -( other: UInt ) = UInt( i - other.i)
  def *( other: UInt ) = UInt( i * other.i)
  def /( other: UInt ) = UInt( i / other.i)
  def <( other: UInt ) = i < other.i
  // ... and so on
} 
```

以及 REPL 中的一些示例用法：

```
scala> UInt(123)
res40: UInt = 123

scala> UInt(123) * UInt(2)
res41: UInt = 246

scala> UInt(5) - UInt(8)
java.lang.IllegalArgumentException: requirement failed
        at scala.Predef$.require(Predef.scala:221)
        at UInt$.apply(<console>:15)
        ... 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-04T16:02:35.067

你说的是`null`什么？

说真的，在你的系统边界设置栏`null`，在那里它会接触到你没有编写的代码。在该边界处，您确保所有可为空的值都转换为`Option`.

同样，不要使用异常。和 一样`null`，把他们拦在门口。将它们变成`Either`或使用 ScalaZ `Validation`。

至于依赖类型（类型与特定值或值的子集（例如自然数）交互或依赖于该类型），则工作量更大。但是，[Spire](https://github.com/non/spire)有一个`Natural`类型。它可能不是您想要的，因为它是任意精度，但它确实强加了自然数的非负方面。

**附录**

`Option`Scala 标准库本身以工厂的形式轻松地实现了从可为空值到的转换`Option`。以机智：

```
scala>     val s1 = "Stringy goodness"
s1: String = Stringy goodness

scala>     val s2: String = null
s2: String = null

scala>     val os1 = Option(s1)
os1: Option[String] = Some(Stringy goodness)

scala>     val os2 = Option(s2)
os2: Option[String] = None 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-02-10T04:37:42.557

Scala 标准库内置了这些类型的断言机制：`assert`、`assume`、`required`和`ensuring`方法。后两者特别允许您以按合同设计的方式编写前置条件和后置条件。自然数除法的简单例子：

```
def divide(x: Int, y: Int): Int = {
  require(x > y, s"$x > $y")
  require(y > 0, s"$y > 0")

  x / y
} ensuring (_ * y == x) 
```

如果不满足要求，调用将抛出一个异常消息，并将插入的字符串显示为异常消息`require`。如果给定条件不成立，调用将引发异常`IllegalArgumentException`。`ensuring`

更多详情请访问：[https ://madusudanan.com/blog/scala-tutorials-part-29-design-by-contract/](https://madusudanan.com/blog/scala-tutorials-part-29-design-by-contract/)

还有一个工具可以对用这种风格编写的 Scala 子集进行形式验证：[https ://github.com/epfl-lara/stainless](https://github.com/epfl-lara/stainless)

# jquery - JQuery Validator 查找上一个元素

> ID：15205504
> 
> 赞同：0
> 
> 时间：2013-03-04T15:51:42.310
> 
> 标签：jquery, jquery-validate

我遇到了一个小的 jquery 代码问题。我正在尝试将错误消息插入跨度，但我认为我无法正确定位跨度。

这是我的html代码...

```
<div>İsim <span style="font-size:9px;color:red"></span></div><div style="line-height: 3px">&nbsp;</div><div><input type="text" id="txt_isim" onkeypress="$('#txt_isim_4').val($('#txt_isim').val());" onKeyUp="$('#txt_isim_4').val($('#txt_isim').val());" style="width: 200px" class="blue_input required" minlength="3" /></div><div style="line-height: 6px">&nbsp;</div> 
```

这是jQuery代码

```
<script>
    $(document).ready(function () {
        $("#txt_isim").validate({
            submitHandler: function () {
                return false;
            },
            errorPlacement: function (error, element) {
                error.appendTo(element.prev().parent("span"));
            }
        });
    });
</script> 
```

我正在尝试验证“txt_isim”并在跨度中显示错误消息。但我想我无法使用 PREV() 和 PARENT() 函数找到跨度。我的代码有什么问题？

注意：如果我给一个 ID 跨度并放入 $('#id_span')，它会完美运行。但我需要在没有 ID 的情况下这样做。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T16:00:35.523

你可以试试这个：

```
<script>
    $(document).ready(function () {
        $("#txt_isim").validate({
            submitHandler: function () {
                return false;
            },
            errorPlacement: function (error, element) {
                error.appendTo(element.parent().prev().prev().children('span'))
            }
        });
    });
</script> 
```

小提琴：http: [//jsfiddle.net/Hkkyp/1/](http://jsfiddle.net/Hkkyp/1/)

但这不是安全的方式，因为它取决于您的 html 结构，并且如果您在 div 之间添加例如另一个元素，它将不再起作用。

我更愿意为您的跨度添加一个类，而不是使用类选择器添加您的消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T16:14:53.470

在您的情况下，我建议您为与单个字段相关的多个部分创建一个容器元素

```
<div class="field">
    <div>Isim 
        <span class="error-handler" style="font-size:9px;color:red"></span>
    </div>
    <div style="line-height: 3px">&nbsp;</div>
    <div>
        <input type="text" id="txt_isim" onkeypress="$('#txt_isim_4').val($('#txt_isim').val());" onKeyUp="$('#txt_isim_4').val($('#txt_isim').val());" style="width: 200px" class="blue_input required" minlength="3" />
    </div>
    <div style="line-height: 6px">&nbsp;</div>
</div> 
```

然后在`errorPlacement`

```
error.appendTo(element.closest('.field').find(".error-handler")) 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/t3vfj/)

# c# - 在 asp.net 中动态生成任何滑块

> ID：15205507
> 
> 赞同：0
> 
> 时间：2013-03-04T15:51:47.283
> 
> 标签：c#, jquery, asp.net, anythingslider

我正在开发一个需要在动态基础上生成任何东西滑块[http://css-tricks.com/examples/AnythingSlider的项目。](http://css-tricks.com/examples/AnythingSlider)我的意思是值存储在数据库中，我想根据数据库中的值一次生成多个滑块。

我能够生成实际代码，但尽管每件事都是正确的，但我无法使其正常工作。我对 jQuery 有点陌生，所以可能只是在不正确的时间调用事件的问题。

以下是生成的字符串

```
 <ul id='3'>
                <li>
                    <div class='div_slider_content'>
                    <table>
                    <tr><td><img src='PackImages/img1.jpg' width='160px' height='120px'></img></td></tr>
                    <tr><td><a href='~/PackageDetailsPage.aspx?name=This_is_a_Title&i=3'>Read More</a></td></tr>
                    </table>
                    </div>
                </li>
            </ul>
          <ul id='4'>
                <li>
                    <div class='div_slider_content'>
                    <table>
                    <tr><td><img src='PackImages/Img2.jpg' width='160px' height='120px'></img></td></tr>
                    <tr><td><a href='~/PackageDetailsPage.aspx?name=This_is_another_Title&i=4'>Read More</a></td></tr>
                    </table>
                    </div>
                </li>
            </ul>

<script type="text/javascript">
 $(document).ready(function(){
$('#3').anythingSlider({ 
    width: 234, 
    height: 150, 
    buildNavigation: false, 
    enableNavigation: false, 
    autoplay: false, 
    startStopped: true, 
    showMultiple: true
    });
$('#4').anythingSlider({ 
    width: 234, 
    height: 150, 
    buildNavigation: false, 
    enableNavigation: false, 
    autoplay: false, 
    startStopped: true, 
    showMultiple: true});
});
});
</script> 
```

所有这些结构都写在 Literal Control 中，并在 Page Load 事件上添加到控件中。请帮忙^^

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T05:23:28.893

[正如我在CSS-Tricks](http://css-tricks.com/forums/discussion/11438/anything-slider-database-id-link-rather-than-slide-link#Item_12)的论坛帖子中提到的那样。上面的代码显示了两个滑块，每个滑块一个面板。当仅存在一个面板时，AnythingSlider 设置为不添加导航箭头或导航选项卡。所以添加额外的面板来验证滑块是否正常工作。

# powershell - Powershell 输出文件缺少 SamAccountName 结果

> ID：15205508
> 
> 赞同：0
> 
> 时间：2013-03-04T15:51:51.737
> 
> 标签：powershell

powershell 新手，我不知道为什么输出文件中的 SamAccountName 列是空的。而 IsDisabled 列具有帐户状态结果。

```
Import-Csv $filename | Foreach-Object{

    $user = ([ADSISEARCHER]"(samaccountname=$($_.SamAccountName))").FindOne()

    if($user)
    {
        New-Object -TypeName PSObject -Property @{
            SamAccountName = $user.SamAccountName
            IsDisabled = $user.GetDirectoryEntry().InvokeGet('AccountDisabled')
        }
    }
    else
    {
            Write-Warning "Can't find user '$($_.SamAccountName)'"
    }
} | Export-Csv $filename 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:02:49.987

您必须将第 6 行更改为：

```
SamAccountName = $user.Properties.samaccountname 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:08:11.373

IIRC 这是一个已知问题（错误），具有区分大小写的 ldap 属性名称。为避免这种情况，您可以使用哈希表语法而不用担心大小写：

```
$user.Properties['SAMACCOUNTNAME'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T16:31:50.327

您需要将 sAMAccountName 指定为要返回的属性之一。此外，您可以指定 userAccountControl 属性并测试 ADS_UF_ACCOUNTDISABLE 位以查看用户帐户是否已禁用。这将避免绑定到每个用户对象以测试是否禁用的开销。这是一个简短的示例脚本：

```
param(
  [String[]] $sAMAccountName
)

$ADS_UF_ACCOUNTDISABLE = 2

$sAMAccountName | foreach-object {
  $searcher = [ADSISearcher] "(sAMAccountName=$($_))"
  $searcher.PropertiesToLoad.AddRange(@("samaccountname","useraccountcontrol"))
  $result = $searcher.FindOne()
  if ( $result ) {
    $samName = $result.Properties["samaccountname"][0]
    $disabled = ($result.Properties["useraccountcontrol"][0] -band
      $ADS_UF_ACCOUNTDISABLE) -ne 0
    new-object PSObject -property @{
      "Name" = $samName
      "Disabled" = $disabled
    }
  } else {
    write-warning "Can't find user $_"
  }
} 
```

账单

# c# - 如何检索信用卡类型的值

> ID：15205511
> 
> 赞同：0
> 
> 时间：2013-03-04T15:51:56.120
> 
> 标签：c#, asp.net

我需要做的是客户验证器。我在后面的代码中的代码需要同时查看信用卡类型和信用卡号。我不知道该怎么做。

```
 <asp:DropDownList ID="ddlCCType" runat="server">
       <asp:ListItem Value="None">Select Card Type</asp:ListItem>
       <asp:ListItem Value="Visa">Visa</asp:ListItem>
       <asp:ListItem Value="Amex">Amex</asp:ListItem>
       <asp:ListItem Value="Mastercard">Mastercard</asp:ListItem>
    </asp:DropDownList>

    <asp:TextBox ID="txtCardNum" runat="server" Width="200px"></asp:TextBox>

    <asp:CustomValidator runat="server" id="cusCustom" controltovalidate="txtCardNum" onservervalidate="txtCard_ServerValidate" errormessage="The credit card is incorrect." /> 
```

我有下面的代码，但不确定如何检索信用卡类型的值。e.Value 只会返回信用卡号的值。

```
 protected void txtCard_ServerValidate(object sender, ServerValidateEventArgs e)
    {
      if(e.Value.Length == 8)
       ......
       e.IsValid = true;
      else
       e.IsValid = false;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T16:04:16.177

这个想法是根据卡号的范围来验证卡号的品牌。你知道： - Visa 卡以 4 开头 - AmEx 卡以 37 开头（或 34，不再确定） - Mastercard 卡以 5 开头

如果您更改列表中项目的值，使其反映卡范围，您可以验证卡号是否以所选项目的值开头。

哔叽

# mysql - MAMP - 在我的本地主机上突然出现 404

> ID：15205516
> 
> 赞同：1
> 
> 时间：2013-03-04T15:52:17.560
> 
> 标签：mysql, apache, mamp

我有一个非常简单的 MAMP 设置，我的文件夹`index.php`和相关文件都在我的`htdocs`文件夹中。昨晚我进展顺利，能够通过输入`localhost/index.php`. 现在，突然之间，当我尝试连接到我的本地主机文件夹或其子目录中的任何页面时，我得到 404（在此服务器上找不到文件）。

更重要的是，当我只输入 localhost 时，它会显示一些目录，但不会显示我的任何 .php 文件，即使它们在我`ls`在命令行中执行时显示。

我的 MAMP 应用程序显示我已连接到我的 Apache/MySQL 服务器。我仍然可以访问 localhost/MAMP 主页。但由于某些淫秽的原因，突然间我的 php 文件无法访问。我没有改变他们里面的任何东西！这是怎么回事？

编辑：原来我需要更改我的 php 文件的权限——它们被设置为只对 sudo 进行读写，而对其他所有人都是只读的。我运行`chmod 777`了适用的文件，一切恢复正常，但这引出了几个问题：

*   为什么它在我没有修改文件权限的情况下更早地工作然后改变了？
*   为什么我必须使其可写以供其他用户以管理员用户身份在我的本地主机上访问它？
*   如果我要在野外部署此代码（我知道 MAMP 在野外并不经常使用，但仍然如此），我会怎么做？创建这些权限不会导致严重的安全漏洞吗？

编辑 2：Aaaaaand 现在它不再工作了。同样，没有对文件首选项等进行任何更改，只是对实际的 php 文件本身进行了一些调整。我没有在系统偏好设置中的共享设置下启用任何共享...这种行为真的开始变得令人沮丧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-21T20:58:10.930

打开 Activity Monitor 并确保 Apache 和 MySQL 的所有实例都已关闭。有时，MAMP 倾向于实际上并没有退出这些进程，并且下次启动它时它们仍在运行，并且通常会出现问题（技术解释如何？）。

确保没有任何其他进程出于任何原因尝试使用 localhost。我在安装 POW 时遇到了这个问题。POW 进程停止响应，最终干扰了 MAMP 的 Apache。

确保 MAMP 的设置没有以某种方式改变。我已经看到 MAMP 似乎没有理由恢复自定义文档根目录，这可能会导致这种情况。

我什至会在打开您的系统偏好设置之前说，并确保您的 Mac 自己的内置 Apache 已关闭。您将能够在“共享”部分看到这一点（不过，它看起来像是在 Mavericks 中被移动了）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-12T21:35:43.750

确保您没有使用 Sidestep 通过 VPN 或 SSH 路由流量。在回到我在咖啡店工作时使用 MAMP 构建的旧项目后，我遇到了这个问题。

# java - 在 Java Swing 中编码时的延迟

> ID：15205519
> 
> 赞同：1
> 
> 时间：2013-03-04T15:52:24.363
> 
> 标签：java, swing, user-interface

我正在使用 Java Swing 编写一个 GUI 应用程序。我只有一个问题，那就是我编写了一个大函数，在单击按钮时会执行该函数。首先，我将标签的值设置为“生成报告..”，然后在函数的“返回”部分之前，我将标签的值设置为“完成生成报告”。实际发生的是标签的第一个设置没有生效。它们都在我完成函数调用后生效，因此最终结果只显示“完成生成报告”。

这是我正在使用的java代码：

```
 protected void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton2ActionPerformed
        // TODO add your handling code here:

    try
    {
         jLabel6.setText("Generating Report");
         jProgressBar1.setVisible(true);
       generateReport(BillImportId.getText()); // This will take around 30 seconds to finish
    }
    catch (Exception e)
    {
      System.out.println("Exception occured: " + e);
    }
    }//GEN-LAST:event_jButton2ActionPerformed 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T15:54:56.937

将调用移动`generateReport`到 a 的方法`doInBackground`中`SwingWorker`。使用方法`process`和`done`更新您的 UI 元素。

还可以查看[“Swing 中的并发”](https://stackoverflow.com/tags/swing/info)

# excel - Excel 宏：将 1 个工作表另存为 CSV，同时保留 xlsm

> ID：15205522
> 
> 赞同：1
> 
> 时间：2013-03-04T15:52:40.160
> 
> 标签：excel, export-to-excel, vba

我正在尝试在 Excel 2007 中创建一个宏，以便当我在 Sheet2（运行按钮所在的位置）上时 - 宏从 Access 读取指定的表并将数据复制到下一张表（sheet3）上。然后仅将 Sheet3 保存到 CSV 文件，宏将我返回到 Sheet2 并从 xlsm 文件中删除 Sheet3 数据 - 如果可能，这些步骤在后台完成，运行宏的人看不到。我尝试了类似帖子中的其他提示，但无济于事。我正在尝试定制一个录制的宏 - 但它将 xlsm 保存为 csv 文件并关闭 xlsm。宏 (PleaseWork.xlsm) 保存在我的文档中，我希望将 working.csv 保存在我的桌面上。请在力所能及的地方提供帮助。

```
With ActiveSheet.ListObjects.Add(SourceType:=0, Source:=Array(Array( _
    "ODBC;DSN=MS Access Database;DBQ=CorrectPath\access_dbs\Copy of fldsdb.mdb;Default" _
    ), Array( _
    "Dir=CorrectPath\access_dbs;DriverId=25;FIL=MS Access;MaxBufferSize=2048;Page" _
    ), Array("Timeout=5;")), Destination:=Range("$A$1")).QueryTable
    .CommandText = Array( _
    "SELECT table.table_identifier" & Chr(13) & "" & Chr(10) & "FROM table.table" _
    )
    .RowNumbers = False
    .FillAdjacentFormulas = False
    .PreserveFormatting = True
    .RefreshOnFileOpen = False
    .BackgroundQuery = True
    .RefreshStyle = xlInsertDeleteCells
    .SavePassword = False
    .SaveData = True
    .AdjustColumnWidth = True
    .RefreshPeriod = 0
    .PreserveColumnInfo = True
    .ListObject.DisplayName = "Table_Query_from_MS_Access_Database"
    .Refresh BackgroundQuery:=False
End With
Selection.Copy
Range("B1").Select
Columns("B:B").Select
Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
    :=True, Transpose:=False
Columns("B:B").EntireColumn.AutoFit
Columns("A:A").Select
Selection.Delete Shift:=xlToLeft
Range("A10").Select
ChDir "Desktop"
ActiveWorkbook.SaveAs Filename:= _
    "...\working.csv", FileFormat _
    :=xlCSV, CreateBackup:=False
Sheets("Sheet2").Select
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:29:53.407

```
Sheets("Sheet3").Select
With ActiveSheet.ListObjects.Add(SourceType:=0, Source:=Array(Array( _
"ODBC;DSN=MS Access Database;DBQ=CorrectPath\access_dbs\Copy of fldsdb.mdb;Default" _
), Array( _
"Dir=CorrectPath\access_dbs;DriverId=25;FIL=MS Access;MaxBufferSize=2048;Page" _
), Array("Timeout=5;")), Destination:=Range("$A$1")).QueryTable
.CommandText = Array( _
"SELECT desired_table.desired_table_cd" & Chr(13) & "" & Chr(10) & "FROM desired_table desired_table" _
)
.RowNumbers = False
.FillAdjacentFormulas = False
.PreserveFormatting = True
.RefreshOnFileOpen = False
.BackgroundQuery = True
.RefreshStyle = xlInsertDeleteCells
.SavePassword = False
.SaveData = True
.AdjustColumnWidth = True
.RefreshPeriod = 0
.PreserveColumnInfo = True
.ListObject.DisplayName = "Table_Query_from_MS_Access_Database"
.Refresh BackgroundQuery:=False
End With
Application.Sheets("Sheet3").Select
Application.Sheets("Sheet3").Copy
Application.DisplayAlerts = False
ActiveWorkbook.SaveAs Filename:="...\working", FileFormat:=xlCSV, _
CreateBackup:=False
ActiveWorkbook.Save
ActiveWindow.Close
Windows("PleaseWork.xlsm").Activate
Worksheets("Sheet3").Range("A1:G65336").ClearContents
Sheets("Sheet2").Select
End Sub 
```

# knitr - 使用knitr错误编译pdflatex

> ID：15205525
> 
> 赞同：0
> 
> 时间：2013-03-04T15:52:49.723
> 
> 标签：knitr, lyx

我已经安装了 Lyx 2.0.5 并安装了在 Win 7.0 和 R Ver 2.15 中运行的 Miktex 2.9

我用简单的代码在 R 中安装了 knitr

```
 <<>>=
    1+1
    @ 
```

并且可以使用 View DVI 在 Yak 中生成文件

当我尝试使用栏上的“眼睛”来生成 PDF（pdflatex）时，我收到以下消息。

![在此处输入图像描述](../Images/8cec39a0ed52daff5c107e1298877e98.png)

谁能给我一些想法可能是什么问题

谢谢

# c# - Windows 窗体 C# 通过代码更改用户控件

> ID：15205530
> 
> 赞同：5
> 
> 时间：2013-03-04T15:53:17.850
> 
> 标签：c#, winforms, user-controls

我有一个 windows 窗体，我不想让任何其他 windows 窗体只有一个 windows 窗体和不同的用户控件我如何在用户控件之间进行更改，例如隐藏一个并以编程方式显示另一个用户控件？

* * *

```
private void Btt_info_Click(object sender, EventArgs e)
{
    Frm_Main frm_main = new Frm_Main();
    frm_main.Controls["panel1"].Controls.Clear();
    UC_Info uc_info = new UC_Info();
    frm_main.Controls["panel1"].Controls.Add(uc_info);
} 
```

我添加了这个，但它不起作用

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-04T16:05:28.917

添加一个容器控件（如果我没记错的话，工具箱中有一个容器部分？），就像一个面板。为您想要动态切换的内容创建用户控件。所以像一个'HomePage'用户控件和一个'LoginPage'用户控件。将要显示的用户控件动态添加到容器中。如果需要，将其从容器中删除并添加不同的用户控件：

```
Panel myPanel = new Panel();
LoginPage ctlLoginPage = new LoginPage();
HomePage ctlHomePage = new HomePage();

//add the loginpage to the panel first
myPanel.Controls.Add(ctlLoginPage);

...do stuff...

//remove whatever control is currently in the Panel
myPanel.Controls.Clear();
//add the other control, the HomePage control instead now
myPanel.Controls.Add(ctlHomePage);

..do other stuff... 
```

我通常这样做是为了让表单本身保持打开状态，以添加可能在不同“页面”之间共享的通用控件和内容。

编辑：请注意，我通常会在设计器中添加面板，而不是在代码中动态创建它。这只是一个例子。

编辑：您的主窗体和用户控件之间的交互可以通过几种不同的方式来处理，我并不是说这些都是正确的方法。

*   您在 Mainform 上为 Panel 创建一个静态属性，以便您可以随时访问它来交换控件。

在此示例中，我还将为其添加一个静态方法

```
enum PanelControlsEnum {HomePage, LoginPage};
public static Panel MyContainerPanel {get;set;}
public static void SwitchPanelControls(PanelControlsEnum selControl){
  ..put your switch panels code here..
} 
```

然后在您的用户控件中调用预定义的方法，例如：

```
MainForm.SwitchPanelControls(PanelControlsEnum.HomePage); 
```

*   另一种方法是在主窗体上而不是在窗体内绑定按钮单击事件。

像这样：

```
HomePage ctlHomePage = new HomePage();
ctlHomePage.Click += MyClickEvent;
myPanel.Controls.Add(ctlHomePage) 
```

...

```
private void MyClickEvent(object sender, RoutedEventArgs e)
{
  ..switch user control code here...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T16:03:18.537

创建一个返回 UserControl 对象的方法。然后将条件放入该方法中，以确定您要在特定条件下加载哪个控件，然后放入主表单代码中。

```
UserControl control = GetControlFromMyMethod();
form1.Controls.Add(control); 
```

其中 'control' 是您的方法返回的控件。

要删除现有的，您必须遍历 form1.Controls 并找出控件并调用“删除”。

更新：Mike C 有一个更好的想法，即添加一个面板并在面板上加载您想要的控件，因为这样很容易删除您的控件，然后您不必遍历表单控件来找到它然后将其删除。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-11T09:42:48.460

试试这个：

```
this.Controls.Clear();
usercontrol load = new usercontrol ();
this.Controls.Add(load);
load.Show(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-30T18:08:06.557

你可以试试[这个](http://www.dountsis.com/articles/dot-net/how-to-use-user-controls-to-create-mdi-winform-applications.php) 它肯定会帮助你，因为它确实帮助了我很多它简短而直接的希望这会有所帮助

# java - Java正则表达式获取括号之间的值

> ID：15205531
> 
> 赞同：0
> 
> 时间：2013-03-04T15:53:17.883
> 
> 标签：java, regex

从 [[text]] 获取值的正则表达式。我试过正则表达式

```
 "((?<=[[)*(?=]])*)+"  the value between [[ ]] is not obtained. 
```

例如，从字符串 [[text]] 中，我们应该获取文本。

```
Pattern pat = Pattern.compile("((?<=\\[[)*(?=\\]])*)");
Matcher matcher = pat.matcher("[[text]]");
String next ="";
while(matcher.find()) {
  next = matcher.group(0);
break;
}
System.out.println(next); //next should be text 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T15:55:45.420

`[]`将括号用作正则表达式中的实际字符时，您需要转义括号。您还需要添加一些内容来实际捕获括号之间的内容。如果您`.*`确定该值不能包含`]`.

```
((?<=\[\[)([^\]]*)(?=\]\]))+ 
```

除非您明确需要从匹配中排除这些限制器，否则甚至不需要使用回溯和前瞻。这也可以：

```
 \[\[([\]]*\]\] 
```

显然，当您将它们放入字符串时，您需要添加额外的内容`\`来转义`\`字符串……它们只是这样更具可读性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T15:57:41.043

如果你不想进入`regex`，`String.replaceAll`也可以帮助你。

```
String s2 = s.replaceAll("\\[", "").replaceAll("\\]", ""); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T15:57:50.487

```
"(?<=\\[\\[)[^\\]]*" 
```

这应该适合你

# zend-framework - 通常在一个框架中制作多少个控制器？

> ID：15205532
> 
> 赞同：0
> 
> 时间：2013-03-04T15:53:22.937
> 
> 标签：zend-framework, model-view-controller, frameworks, controller

我想知道是否有任何关于在任何基于 Web 的框架中制作控制器数量的指南。我知道这取决于要求。但是，如果您仍然考虑一个包含注册、登录、用户身份验证、发送电子邮件、用户配置文件编辑等的基本应用程序。您如何决定控制器？

如果有很多通用功能，你会制作一个不同的控制器来容纳它们吗？Zend 等一些框架建议为此创建帮助文件！您是否为不同的功能创建帮助文件类别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T20:49:26.737

查看路由，我们对 Zend 框架中将有多少控制器甚至操作有某种指导。尽管我们必须记住，我们可以做很多事情以一种方式（变得更少）或另一种方式（拥有更多）来改变这一点。

ZF 中路由的基本和一般规则是有一个与控制器和动作匹配的链接路径。

```
www.yourdomain.com/controller/action 
```

路由将分派到相应的控制器，并与它一起到指定的操作。当我们遵循这个基本规则时，我们最终会得到一些与我们希望看到的路径数量相匹配的控制器。

您基本上可以为您的网站的每一项功能创建一个根路径，并最终获得尽可能多的控制器（通过一个操作），或者甚至将所有内容组合在一个路径中，因此一个控制器，但有尽可能多的操作。

最终，您将并且应该将您网站的通用功能组合到一个路径和控制器中，例如将与用户管理（注册、配置文件编辑）相关的所有内容组合到一个`/user`路径和 UserController 中。

至于您的示例，我认为用户身份验证不会有自己的控制器，而是发生在登录控制器或该控制器使用的模型中。

**更新**

控制器及其操作解释请求并且应该只委托给其他方法。将这些方法保留在它们自己的类中可能是有益的。如何构建这些方法和类取决于您。Zend 方法是将它们保存在您自己的应用程序库中，例如，发送电子邮件应该由您自己的应用程序库中的一个单独的类来保存和执行（在 Zend 类旁边并且可能是对其进行扩展）。

如果你有一个联系页面，你可以有一个`/contact`与 ContactController 的链接。indexAction 将委托所有内容来呈现表单页面。表单可能有一个`/contact/submit`提交按钮的链接，相应的 submitAction 将连接您的电子邮件库类并发送电子邮件。submitAction 最终可能会调用类似`_redirect('/submit/thankyou')`or的东西`/submit/error`。正如您现在可能猜到的那样，将会有一个thankyouAction 负责呈现一个感谢页面或一个errorAction 来让用户知道有一个错误。

# javascript - 如何在正则表达式中转义星号？

> ID：15205536
> 
> 赞同：31
> 
> 时间：2013-03-04T15:53:46.133
> 
> 标签：javascript, regex, escaping

我想使用模式`*1*`。我试过`\*1\*`了，但它不起作用。问题出在哪里？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-04T15:55:48.713

你必须用反斜杠转义它：

```
/\*1\*/ 
```

否则，`*`RegExp 中的未转义将意味着：匹配 0 个或多个前面的字符组。

更新：

如果您使用`RegExp`构造函数，请这样做：

```
new RegExp("\\*1\\*") 
```

您必须对反斜杠进行双重转义，因为它们需要在字符串本身中进行转义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T15:55:37.363

需要使用反斜杠`\`作为正则表达式中的转义字符。

# javascript - 如何使用 jQuery 在可见和隐藏之间切换（切换、交替）元素？

> ID：15205537
> 
> 赞同：0
> 
> 时间：2013-03-04T15:53:47.603
> 
> 标签：javascript, html, jquery

我正在尝试这样做，以便如果您单击“测试标题”它会隐藏测试内容，然后如果您单击“测试标题”它会再次显示它。

[http://jsfiddle.net/ahaz86/4asqs/](http://jsfiddle.net/ahaz86/4asqs/)

目前，我的代码将隐藏测试内容。我想要发生的是让测试内容在可见和隐藏之间切换。

HTML：

```
<div class="content_list_container">
<div class="content_list_title" align="left">test header</div>
<div class="content_list_menu_items">
<ul>
    test
</ul>
</div>
</div> 
```

jQuery：

```
$(document).ready(
    function() {
        $(".content_list_title").click(
            function() {
                $(this).toggleClass("selected");  
                $(this).next(".content_list_menu_items").hide();
            }
        );
    }
); 
```

已尝试使用 .toggle() 方法，但它似乎不适用于我的网站。有没有办法使用 show() 和 hide() 方法来做到这一点，即使它并不理想？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T15:55:46.380

您可以`toggle`使用方法代替`hide`：

```
jQuery(this).next(".content_list_menu_items").toggle(); 
```

# javascript - phantom.js 的截图保存在哪里？

> ID：15205538
> 
> 赞同：7
> 
> 时间：2013-03-04T15:53:51.770
> 
> 标签：javascript, phantomjs

在我的 Mac 上通过 Homebrew 安装后刚开始使用 Phantom.js。

我正在尝试通过[https://github.com/ariya/phantomjs/wiki/Quick-Start保存网站截图的示例](https://github.com/ariya/phantomjs/wiki/Quick-Start)

```
var page = require('webpage').create();
page.open('http://google.com', function () {
    page.render('google.png');
    phantom.exit();
}); 
```

但是我在任何地方都看不到图像。它们会与 .js 文件位于同一目录中吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-04T16:12:14.200

PhantomJS 通常将图像渲染到与您正在运行的脚本相同的目录中。所以是的，它应该与您使用 PhantomJS 运行的 JavaScript 文件位于同一目录中。

**编辑**

看起来那个特定的例子是有缺陷的。问题是`page.render(...);`渲染页面需要一些时间，但是您`phantom.exit()`在它完成渲染之前调用。通过这样做，我能够获得预期的输出：

```
var page = require('webpage').create();
page.open('http://google.com', function () {
    page.render('google.png');
    setTimeout(function() { phantom.exit(); }, 5000) // wait five seconds and then exit;
}); 
```

不幸的是，这并不理想，所以我能够想出更好的头发。我说“头发”，因为我基本上是在轮询以查看页面何时完成渲染：

```
var done = false; //flag that tells us if we're done rendering

var page = require('webpage').create();
page.open('http://google.com', function (status) {
    //If the page loaded successfully...
    if(status === "success") {
        //Render the page
        page.render('google.png');
        console.log("Site rendered...");

        //Set the flag to true
        done = true;
    }
});

//Start polling every 100ms to see if we are done
var intervalId = setInterval(function() {
    if(done) {
        //If we are done, let's say so and exit.
        console.log("Done.");
        phantom.exit();
    } else {
        //If we're not done we're just going to say that we're polling
        console.log("Polling...");
    }
}, 100); 
```

上面的代码有效，因为回调没有立即执行。因此轮询代码将启动并开始轮询。然后当回调执行时，我们检查页面的状态（如果我们能够成功加载页面，我们只想渲染）。然后我们渲染页面并将我们的轮询代码正在检查的标志设置为`true`. 所以下次轮询代码运行时，标志是`true`，所以我们退出。

这似乎是 PhantomJS 运行`webpage#render(...)`调用方式的问题。我怀疑这是一个非阻塞调用，但根据[本期](http://code.google.com/p/phantomjs/issues/detail?id=552)作者的说法，这是一个阻塞调用。如果我不得不冒险猜测，也许渲染的行为是一个阻塞调用，但是执行渲染的代码可能会将数据移交给另一个线程，该线程处理将数据持久化到磁盘（所以这部分可能是非-阻塞呼叫）。不幸的是，当执行回到主脚本并执行时，这个调用可能仍在执行`phantom.exit()`，这意味着前面提到的异步代码永远没有机会完成它正在做的事情。

我能够在 PhantomJS 论坛上找到一篇与[您所描述](https://groups.google.com/forum/?fromgroups=#!topic/phantomjs/E6jvdySwrss)的内容有关的帖子。我看不到任何已提交的问题，因此，如果您愿意，可以继续发布一个。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-12T23:03:33.303

我和这篇文章的作者有同样的问题，没有一个代码示例对我有用。让 Phantom.js 文档中的第二个示例不起作用，有点让人迷失方向。在 Snow Leopard 上使用 Home Brew 安装。

我找到了一个[工作示例](http://www.sitepoint.com/headless-webkit-and-phantomjs/)

```
var page = require("webpage").create();
var homePage = "http://www.google.com/";
page.settings.javascriptEnabled = false;
page.settings.loadImages = false;
page.open(homePage);
page.onLoadFinished = function(status) {
  var url = page.url;
  console.log("Status:  " + status);
  console.log("Loaded:  " + url);
  page.render("google.png");
  phantom.exit();
}; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-10-05T09:04:24.047

对于来这里寻找保存 PhantomJS 或 CasperJS 屏幕截图的目录的人来说，这只是一个快速帮助：默认情况下它在 scripts 目录中。但是，您确实有控制权。

如果您想控制它们的保存位置，您可以像这样更改文件名：

```
page.render('screenshots/google.jpg'); // saves to scriptLocation/screenshots/
page.render('/opt/google.jpg'); // saves to /screenshots (in the root) 
```

或者，如果您使用 CasperJS，您可以使用：

```
casper.capture('/opt/google.jpg',
        undefined,
        { // imgOptions
            format: 'jpg',
            quality: 25
        }); 
```

希望这可以为某人省去麻烦！

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-07-27T20:16:22.747

我不确定是否发生了变化，但[http://phantomjs.org/screen-capture.html](http://phantomjs.org/screen-capture.html)上的示例对我来说效果很好：

```
var page = require('webpage').create();
page.open('http://github.com/', function() {
  page.render('github.png');
  phantom.exit();
}); 
```

我正在运行 phantomjs-2.1.1-windows。

但是，最初导致我进入该线程的原因是图像文件从未像原始问题一样在我的磁盘上创建。我认为这是某种安全问题，所以我登录到虚拟机并开始将所有内容放在同一个目录中。我正在使用批处理文件启动 phantomjs.exe，并将我的 .js 文件作为参数传入。将所有文件都放在我的 VM 上的同一目录中，效果很好。通过反复试验，我发现我的批处理文件必须与我的 .js 文件位于同一目录中。现在我的主机上也一切正常。

所以总而言之......这对我来说可能是一个与安全相关的问题。无需添加任何类型的超时。

我对原始问题的回答是，如果您正确设置了所有内容，该文件将与 phantomjs.exe 运行的 .js 文件位于同一目录中。我尝试为图像文件指定一个完全限定的路径，但这似乎不起作用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-11-26T20:34:57.820

根本原因是即使在 onLoadFinished() 事件期间，page.render() 可能还没有准备好渲染图像。在 page.render() 成功之前，您可能需要等待几秒钟以上。我发现在 PhantomJS 中渲染图像的唯一可靠方法是重复调用 page.render() 直到该方法返回 true，表明它成功渲染了图像。

解决方案：

```
var page = require("webpage").create();
var homePage = "http://www.google.com/";

page.onLoadFinished = function(status) {
  var rendered, started = Date.now(), TIMEOUT = 30 * 1000; // 30 seconds
  while(!((rendered = page.render('google.png')) || Date.now() - started > TIMEOUT));
  if (!rendered) console.log("ERROR: Timed out waiting to render image.")
  phantom.exit();
};

page.open(homePage); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-15T09:21:05.390

[从rasterize.js 示例](https://github.com/ariya/phantomjs/blob/master/examples/rasterize.js)中窃取，它比我接受的答案更可靠。

```
var page = require('webpage').create();

page.open('http://localhost/TestForTest/', function (status) {
    console.log("starting...");
    console.log("Status: " + status);

    if (status === "success") {
        window.setTimeout(function () {
            page.render('myExample.png');
            phantom.exit();
        }, 200);
    } else {
        console.log("failed for some reason.");
    }
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-04-28T20:54:51.250

这里有很多好的建议。我想补充的一件事：

我正在运行一个 phantomjs docker 映像，默认用户是“phantomjs”，而不是 root。因此，我试图写入一个我没有权限的位置（它是 docker 主机上的密码）......

```
> docker run -i -t -v $(pwd):/pwd --rm wernight/phantomjs touch /pwd/foo.txt
touch: cannot touch '/pwd/foo.txt': Permission denied 
```

上面的代码都运行没有错误，但如果他们没有写入目的地的权限，那么他们将默默地忽略请求......

因此，例如，采用@vivin-paliath 的代码（当前接受的答案）：

```
var done = false; //flag that tells us if we're done rendering

var page = require('webpage').create();
page.open('http://google.com', function (status) {
    //If the page loaded successfully...
    if(status === "success") {
        //Render the page
        page.render('google.png');
        console.log("Site rendered...");

        //Set the flag to true
        done = true;
    }
});

//Start polling every 100ms to see if we are done
var intervalId = setInterval(function() {
    if(done) {
        //If we are done, let's say so and exit.
        console.log("Done.");
        phantom.exit();
    } else {
        //If we're not done we're just going to say that we're polling
        console.log("Polling...");
    }
}, 100); 
```

并以默认用户身份运行它会产生：

```
docker run -i -t -v $(pwd):/pwd -w /pwd --rm wernight/phantomjs phantomjs google.js 
Polling...
Polling...
Polling...
Polling...
Polling...
Polling...
Polling...
Polling...
Polling...
Polling...
Polling...
Polling...
Site rendered...
Done. 
```

但是没有`google.png`也没有错误。只需添加`-u root`到 docker 命令即可解决此问题，然后我就可以`google.png`在 CWD 中找到它。

为了完整起见，最后的命令：

> docker run -u root -i -t -v $(pwd):/pwd -w /pwd --rm wernight/phantomjs phantomjs google.js

# mysql - MySQL外键约束允许空值不起作用

> ID：15205540
> 
> 赞同：0
> 
> 时间：2013-03-04T15:53:56.510
> 
> 标签：mysql, foreign-keys

我似乎无法弄清楚为什么我的外键约束不起作用。这是我的表架构：

```
CREATE TABLE `templates_textboxes` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `template_id` int(10) unsigned DEFAULT NULL,
  `textbox_id` int(10) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `templates_textboxes_to_templates_idx` (`template_id`),
  KEY `templates_textboxes_to_textboxes_idx` (`textbox_id`),
  CONSTRAINT `templates_textboxes_to_templates` FOREIGN KEY (`template_id`) REFERENCES `templates` (`id`) ON DELETE CASCADE ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=6 DEFAULT CHARSET=latin1$$

CREATE TABLE `textboxes` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `content` text NOT NULL,
  `columns` tinyint(1) unsigned NOT NULL DEFAULT '1',
  `width` int(5) unsigned NOT NULL DEFAULT '0',
  `height` int(5) unsigned NOT NULL DEFAULT '0',
  `x` int(5) unsigned NOT NULL DEFAULT '0',
  `y` int(5) unsigned NOT NULL DEFAULT '0',
  `z` int(5) unsigned NOT NULL DEFAULT '500',
  PRIMARY KEY (`id`),
  CONSTRAINT `textboxes_to_templates_textboxes` FOREIGN KEY (`id`) REFERENCES `templates_textboxes` (`textbox_id`) ON DELETE CASCADE ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=21 DEFAULT CHARSET=utf8$$ 
```

当我在 PHP 中创建文本框时，首先我插入文本框以获取 ID，然后在匹配表 templates_textboxes 中插入一行，其中包含模板 ID 和新文本框 ID。我已经阅读了我可以在这里找到的关于允许空值的外键的每一篇文章，它所说的只是将外键列 (templates_textboxes.textbox_id) 设置为允许空值。我试过了，当我尝试插入文本框时，出现以下错误：

```
错误号：1452
无法添加或更新子行：外键约束失败（`pitchperfect`.`textboxes`, CONSTRAINT `textboxes_to_templates_textboxes` FOREIGN KEY (`id`) REFERENCES `templates_textboxes` (`textbox_id`) ON DELETE CASCADE ON UPDATE NO ACTION）插入“文本框”（“内容”、“列”、“宽度”、“高度”、“x”、“y”、“z”）值（“”、“1”、“400”、“300” , '133', '93', '500')

```

我想要完成的是从主题到模板及其资产（templates_textboxes -> textboxes）的级联删除链。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:02:22.997

由于`textboxes.id`is 尚未定义并且 is `AUTO_INCREMENT`，该值必须首先存在于`templates_textboxes.textbox_id`. 这就是约束失败的原因。

# asp.net - ASP.net MVC 4 全局授权过滤器强制登录 AllowAnonymous 操作

> ID：15205545
> 
> 赞同：19
> 
> 时间：2013-03-04T15:54:06.870
> 
> 标签：asp.net, asp.net-mvc-4, asp.net-membership

在我的 .NET MVC 4 中，我添加了一个全局过滤器以保护我的控制器。这是使用以下方法完成的：

```
public static void RegisterGlobalFilters(GlobalFilterCollection filters)
{
   filters.Add(new HandleErrorAttribute());
   filters.Add(new System.Web.Mvc.AuthorizeAttribute());
} 
```

这是从我的 Global.cs 类中调用的。

我的 Web.config 文件包含一个标准配置：

```
<authentication mode="Forms">
     <forms loginUrl="~/Account/Login" timeout="2880" />
</authentication> 
```

我的登录操作被装饰`[AllowAnonymous]`以允许匿名用户登录。

到目前为止一切顺利，一切正常。这是我的登录操作：

```
[AllowAnonymous]
public ActionResult Login(string returnUrl)
{
    ViewBag.ReturnUrl = returnUrl;
    return View();
} 
```

现在，我想添加一个重置密码页面，就像登录页面一样，匿名用户也应该可以使用它。我创建了我的动作（在登录动作的同一控制器下）并用`[AllowAnonymous]`装饰装饰它：

```
[AllowAnonymous]
public ActionResult ResetPasswordForUser(string message = "")
{
    ViewBag.message = message;
    return View();
} 
```

然后创建了相应的视图。

我将此链接添加到我的登录页面：

```
@Html.ActionLink("Forgot your password?", "ResetPasswordForUser", "Account") 
```

在运行时，当我使用匿名用户单击此链接时，我确实到达了 ResetPasswordForUser 操作，但是当返回视图时，登录操作被调用，我永远无法真正到达所需的视图。出于某种原因，即使我使用了 [AllowAnonymous] 装饰，我的请求也会被拦截。

我在这里错过了什么吗？

提前致谢

**更新1：**

根据 Darin Dimitrov 请求添加我的 ResetPasswordForUser 视图：

```
@using TBS.Models
@model TBS.ViewModels.ResetPasswordForUserViewModel

@{
    ViewBag.Title = "Reset Password";
}

@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)

    <table class="edit-table rounded bordered" style="width: 400px">
        <tr>
            <td class="label-td">
                @Html.LabelFor(m => m.Username)
            </td>
            <td>

                @Html.TextBoxFor(m => m.Username)
                @Html.ValidationMessageFor(model => model.Username)
            </td>
        </tr>
        <tr>
            <td class="label-td">
                @Html.LabelFor(m => m.Password)
            </td>
            <td>
                @Html.Password("Password")
                @Html.ValidationMessageFor(model => model.Password)
            </td>
        </tr>
        <tr>
            <td colspan="2" style="text-align: center">
                <input type="submit" value="Reset" />
            </td>
        </tr>
    </table>
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-28T21:29:43.533

视图使用的 _Layout 文件是否有可能`ResetPasswordForUser`在您的控制器（例如，在菜单中？）中调用一个尚未用 装饰的动作`AllowAnonymous`？

这将导致这种行为。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T04:01:52.823

听起来您的布局中可能有一个非匿名的 @Html.Action 或 Html.RenderAction，这会导致您的页面重定向到登录。

编辑：删除旧答案，因为它不正确，对任何来看它的人都没有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T02:19:15.837

我不知道添加全局授权过滤器是否与 AllowAnonymous 冲突。我设置项目的方式是拥有一个在控制器级别设置 [Authorize] 属性的基本控制器。

我所有的控制器都继承自这个 BaseController，除了需要匿名访问的控制器，通常是我的 AccountController 和我的 MarketingController。那些只是从 Controller 继承，然后我可以在 Action 级别设置 [Authorize]。

# javascript - 出现错误 -> 意外令牌}

> ID：15205546
> 
> 赞同：1
> 
> 时间：2013-03-04T15:54:10.613
> 
> 标签：javascript, android, html, cordova, syntax

我收到标题中所述的错误。

这是html代码

```
<!DOCTYPE HTML>
<html>
    <head>
        <title> PhoneGap </title>
        <script type="text/javascript" charset="utf-8" src="cordova-2.3.0.js"></script>
        <script type="text/javascript" charset="utf-8" src="fileopener.js"></script>
    </head>
    <body>
         <h1>PDF Open Tester</h1>
         <a href="#" onclick="window.plugins.fileOpener.open("/sdcard/Course Content Files/1.pdf");">open</a>
    </body>
</html> 
```

这是fileopener.js

```
function FileOpener() {
};

FileOpener.prototype.open = function(url) {
    cordova.exec(null, null, "FileOpener", "openFile", [url]);
};

if(!window.plugins) {
    window.plugins = {};
}
if (!window.plugins.fileOpener) {
    window.plugins.fileOpener = new FileOpener();
} 
```

错误是什么？我的假设是错误不在cordova javascript文件中。

**从评论**编辑：****

 **我也得到了进一步的错误

```
Uncaught TypeError: Cannot read property 'fileOpener' of undefined. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T16:21:43.987

### 应OP的要求移植评论以回答：

HTML 标记中的引用有问题。属性的`onclick`外引号是双引号，但双引号也被用于`.open()`方法调用内的字符串。将一个或另一个更改为单引号。由于您已经在 HTML 属性中使用双引号，因此最好在方法调用字符串中使用单引号。

```
<a href="#" onclick="window.plugins.fileOpener.open('/sdcard/Course Content Files/1.pdf');">open</a> 
```

最好的策略是避免将`onclick`标记完全放在内部，而是使用适用于 PhoneGap 应用程序的任何方法将事件绑定到代码中。**

# asp.net - 防止页面被重定向

> ID：15205548
> 
> 赞同：0
> 
> 时间：2013-03-04T15:54:15.270
> 
> 标签：asp.net

我想知道是否有人知道防止页面被重定向的方法？我想在页面离开时捕获一个事件，然后在后面运行一些代码。如果后面的代码符合某些条件，则允许重定向，否则取消它。我知道其中一些可以通过 Javacript 完成，但我遇到的问题实际上是停止重定向。这是我所拥有的：

JavaScript：

```
<script type="text/javascript">
   window.onbeforeunload = confirmExit;

   function clickButton(getId) {
            var getBtn = document.getElementById(getId)
            getBtn.click()
        } 

   function confirmExit(e) {
       var btnId = document.getElementById("<%=btnConfirmExit.ClientId %>").id
       clickButton(btnId)
    }
 </script> 
```

后面的代码：

```
Protected Sub btnConfirmExit_click(ByVal sender As Object, ByVal e As EventArgs) Handles btnConfirmExit.Click
    'if something, cancel request

    'else
     ' let it go
end Sub 
```

如果尝试使用：

```
Page.Response.End() 
```

但这无济于事。有人有想法么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:04:57.580

如果您使用的是经典的 postBacks，则浏览器已经开始请求和侦听新页面，并且没有“没关系”的 HTTP 响应。即使你在某些情况下让它在某些浏览器上工作，它也会不一致且不可靠。

如果您必须在服务器端进行此验证/处理，我认为您想考虑使用 AJAX 请求。

我不是他们的粉丝，但在最坏的情况下，肮脏和肮脏且无需更改太多代码，您可以使用更新面板。在这里阅读：

更新信息： http: [//msdn.microsoft.com/en-us/library/bb398864 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/bb398864(v=vs.100).aspx)

较旧的链接，但很好的概述： [http ://www.asp.net/ajax/documentation/live/overview/updatepaneloverview.aspx](http://www.asp.net/ajax/documentation/live/overview/updatepaneloverview.aspx)

# c# - 查询嵌套递归对象的性能问题

> ID：15205555
> 
> 赞同：3
> 
> 时间：2013-03-04T15:54:25.607
> 
> 标签：c#, performance, linq-to-sql, linq-to-entities

我想知道从对象的嵌套层次结构中选择的最佳方法是什么？假设我们有一个类`MyRecursiveObject`如下：

```
 public class MyRecursiveObject
 {
   public Int64 Id { get; set; }
   public MyRecursiveObject Parent { get; set; }
 } 
```

如何在选择 MyRecursiveObject 实例的所有父 ID 时达到最佳性能？

任何建议都受到高度赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T16:18:39.313

LinqToSql 不支持任意深度的行走树。您应该使用 TSQL While 循环编写一个 sql 函数来生成结果，并从 linqtosql 调用该 sql 函数。

就像是：

```
DECLARE @MyNodeID int
SET @MyNodeID = 42
  -- we're looking for the path from this ID back up to the root
  -- we don't know the length of the path.

DECLARE @MyTable TABLE
(
  int ID PRIMARY KEY,
  int ParentID,
)

DECLARE @ID int
DECLARE @ParentID int

SELECT @ID = ID, @ParentId = ParentId
FROM MyRecursiveObject
WHERE ID = @MyNodeID

WHILE @ID is not null
BEGIN

  INSERT INTO @MyTable (ID, ParentID) SELECT @ID, @ParentID

  SET @ID = null

  SELECT @ID = ID, @ParentId = ParentID
  FROM MyRecursiveObject
  WHERE ID = @ParentID

END

SELECT ID, ParentID FROM @MyTable  --results 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T15:59:05.170

您可以使用简单的循环而不是递归：

```
public IEnumerable<long> GetAllParentIdsOf(MyRecursiveObject obj)
{
    MyRecursiveObject child = obj;

   while (child.Parent != null)
   {
       child = child.Parent;
       yield return child.Id;
   }
} 
```

样本：

```
MyRecursiveObject obj = new MyRecursiveObject {    
    Id = 1,
    Parent = new MyRecursiveObject {
        Id = 2,
        Parent = new MyRecursiveObject { Id = 3 }
    }
};

GetAllParentIdsOf(obj).ToList().ForEach(Console.WriteLine);

// 2
// 3 
```

# javascript - Javascript点击功能在正确的父母中没有反应

> ID：15205556
> 
> 赞同：0
> 
> 时间：2013-03-04T15:54:35.957
> 
> 标签：javascript, jquery

我有这个将 div 动画化为父 div 的 javascript。

**Javascript**

```
$(document).ready(function() {
    $("a").click(function() {
        var $righty = $(this).next();
        $righty.animate({
            right: parseInt($righty.css('right'),10) == 0 ?
            -$righty.outerWidth() :
            0
        });
    });
}); 
```

**HTML**

```
 <div id="home" class="page">                
        <div id="page1">                
            <a href="#">Inside Div</a>
        </div>

        <a href="#">Outside Div</a>

        <div id="page2" class="page">
            content 
        </div>                     
   </div> 
```

我希望`<a>`标签住在`page1`div 中。截至目前，Javascript 仅在`<a>`标签位于`<div id="page1">`. 如果这是非常基本的，我深表歉意，因为我是 Javascript 新手。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T15:58:39.743

为您的 a 标签使用选择器，而不仅仅是 a。就像一个类或一个id。您不希望这种情况发生在*每个 a 标签*上，对吗？

此外，righty 正在获得 NEXT ......好吧，您想要点击的标签旁边没有任何内容。

你想做 $(this).parent().next(); - 不，请参阅下面的编辑。我猜，因为你从来没有告诉我们你想要什么，确切地说。

编辑：这可能根本没有帮助。只知道你不能在 div 中有 a 标签，然后调用 .next() - 它没有兄弟姐妹。.next() 命中下一个兄弟。不像它在页面上的视觉显示那样，而是因为它存在于 DOM 树中......你需要在 div 中有一个兄弟姐妹，以便使用 .next() 抓取 a 标签......你不需要. 那有意义吗？你到底想制作什么动画？

编辑编辑：当单击具有给定类或 id 的给定标签时，告诉我您想要动画的标签的 id 或类，我将向您展示如何操作。

编辑 编辑 编辑：如果您只想在单击 page1 > a 时使 page2 动画，请执行以下操作：

```
$('#page1 a').click(function(){ $('#page2').animate(...put animation stuff here...) }); 
```

# javascript - 动态创建的隐藏输入未出现在 iPad 上

> ID：15205563
> 
> 赞同：0
> 
> 时间：2013-03-04T15:55:12.823
> 
> 标签：javascript, jquery, ipad

在我的一个网页上，用户可以在表格中添加一行来代替占位符。添加的行的 html 包含许多隐藏的输入字段。在所有桌面浏览器上，这都可以正常工作，但在我的 iPad（可能还有其他移动设备）上，隐藏的输入没有被添加到页面中，因此在我查看源代码时会丢失。

有谁知道为什么会发生这种情况以及可以做些什么？谢谢你的帮助。

供参考

添加到页面的 html 存储在 javascript 变量中，类似于这样。

```
new_row_html = '<tr>';
new_row_html += '<td>Cell 1</td>';
new_row_html += '<td>Cell 2</td>';
new_row_html += "</tr>";
new_row_html += '<input id="hid_1_id" name="hid_1" type="hidden" value="" />';
new_row_html += '<input id="hid_2_id" name="hid_2" type="hidden" value="" />'; 
```

然后我使用 jQuery 的 replaceWith() 方法将占位符替换为新的 html

# c# - 如何在 MySql 数据库中调用多个存储过程

> ID：15205567
> 
> 赞同：1
> 
> 时间：2013-03-04T15:55:25.923
> 
> 标签：c#, mysql, sql-server-2008

我能够让这个程序与一个存储过程一起工作。是否可以在 C# 中从 MYSQL 调用多个存储过程？如果是这样，最有效的方法是什么？这是我的代码片段，展示了我到目前为止所做的事情：

```
public static string RunSQL()
{
    // Here is where it is connecting to local host.
    string connStr = "server=localhost;user=xxxx;"
                     + "database=xxxx;port=3306;password=xxx;"
                     + "Allow User Variables=True";
    MySqlConnection conn = new MySqlConnection(connStr);

    // Here is where the connection gets opened.
    conn.Open();

    // Here I call the CN_renumber stored procedure.
    MySqlCommand CN_renumber = new MySqlCommand("CN_renumber", conn);
    CN_renumber.CommandType = System.Data.CommandType.StoredProcedure;

    object result = CN_renumber.ExecuteNonQuery();

    // Disconnect from local host.
    conn.Close();

    return result.ToString();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:02:30.323

您可以`MySQLCommand`多次重复使用您的对象，但在此之前您应该确保调用`myCommand.Parameters.Clear();`，然后再次分配新`Stored Procedure`名称。

有用的问题与示例[here](https://stackoverflow.com/a/670419/461564)

# maven - 为什么 jsf-impl 的 pom 不包含对 jsf-api 的依赖

> ID：15205568
> 
> 赞同：1
> 
> 时间：2013-03-04T15:55:28.143
> 
> 标签：maven, jsf-2, dependencies

我是 maven 新手，有些依赖项我无法理解。JSF 实现依赖于 JSF API，即使在 jsf 执行的 POM 中（即：[https](https://maven.java.net/index.html#nexus-search;quick~jsf-impl) ://maven.java.net/index.html#nexus-search;quick~jsf-impl ）我找不到任何依赖项到 JSF api。我在这里想念什么？

谢谢你。

# android - 在布局文件中隐藏警告

> ID：15205569
> 
> 赞同：1
> 
> 时间：2013-03-04T15:55:28.983
> 
> 标签：android, eclipse, android-layout, android-lint

我更新了 Eclipse 和 SDK，现在在每个 xml 文件中，TextViews 都有警告“考虑通过指定 android:textIsSelectable="true" 来选择文本值”。

是否可以隐藏警告，我讨厌让我的项目带有很多黄色感叹号。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T15:58:31.923

转到项目的属性。转到 Android Lint 首选项。搜索 SelectableText 并将严重性更改为忽略。

您也可以在所有项目的 Eclipse 首选项中执行此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T17:30:24.267

这个警告是有充分理由的。通过禁用它，您基本上忽略了 Android 的用户界面指南，并且您没有充分利用应用程序用户界面的潜力。因此，查看每个文本视图并将此属性显式设置为 false 或 true 将提高您的应用程序的质量。

# asp.net - 了解 POST 请求中的重视图状态以解析 ASP.NET 网页

> ID：15205572
> 
> 赞同：0
> 
> 时间：2013-03-04T15:55:38.300
> 
> 标签：asp.net, html-parsing, viewstate

这是给我带来一些麻烦的网站：http: [//fd1-www.leclercdrive.fr/097701/courses/pgeWMEL009_Courses.aspx](http://fd1-www.leclercdrive.fr/097701/courses/pgeWMEL009_Courses.aspx)

对于我在这家商店中选择的每种产品，我都会注册完整的 POST 请求，以便每天检索页面。这可以正常工作一段时间，但几天/几周后，请求给了我一个错误。唯一的区别在于请求的重视图状态。

我想了解视图状态中的哪些更改使其无法使用。当我将不再使用的旧视图状态与最近的视图状态进行比较时，它给了我正确的结果，几乎没有变化，但我无法正确解密。有什么想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T16:27:09.123

您可以在此处解码您的视图状态。如果你没有加密它。

[http://ignatu.co.uk/ViewStateDecoder.aspx](http://ignatu.co.uk/ViewStateDecoder.aspx)

# java - 在 DWR 上管理复杂的对象类型

> ID：15205576
> 
> 赞同：1
> 
> 时间：2013-03-04T15:55:42.180
> 
> 标签：java, javascript, dwr

我读了转换器部分

[http://directwebremoting.org/dwr/documentation/server/configuration/dwrxml/converters/bean.html](http://directwebremoting.org/dwr/documentation/server/configuration/dwrxml/converters/bean.html)

但我找不到确切的解决方案。

我可以这样管理我的豆子吗

```
public class User(){

    public int id;

    public String name;    

    public List<Car> cars;

   public Bag aBag;

}

public class Car {
     int rgbcolor;
     String model;
}

public class Bag {
     int price;
      String brand;
} 
```

我的意思是，如果我的 bean 包含作为其他对象类型的字段，我应该怎么做，我应该手动填充这些值吗？或者是否可以使用自定义或标准转换器来管理这些 bean？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T05:30:59.307

**您可以在dwr.xml**中使用如下自定义转换器

 **```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE dwr PUBLIC
"-//GetAhead Limited//DTD Direct Web Remoting 3.0//EN"
"http://getahead.org/dwr/dwr30.dtd">
<dwr>
  <allow>
    <create creator="spring" javascript="TestController">
        <param name="beanName" value="TestController"/>
    </create>
    <convert converter="bean" match="com.test.Car" javascript="car"/>
  </allow>
</dwr> 
```**

# google-tv - 在 gtv 上通过 wifi 使用端口 8000 和 9987

> ID：15205582
> 
> 赞同：0
> 
> 时间：2013-03-04T15:55:50.887
> 
> 标签：google-tv

我正在使用一个通过 wifi 使用端口 8000 和 9987 与 Android 设备通信的应用程序。它适用于除我的 Google TV 之外的所有设备。

这是我尝试使用 Java 控制台时得到的部分内容

```
...
Connecting to: http://192.168.2.9:8000/_version?version=71  
It did not work.java.net.ConnectException: Connection refused: connect  
java.net.ConnectException: Connection refused: connect  
... 
```

那是gtv的正确IP。

可以做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T16:23:56.717

从您的描述中不清楚服务器组件是在 GTV 设备上运行还是在客户端上运行。此外，您不能假设您的应用程序始终可以使用任何特定的端口号。它们可以被其他应用程序使用。您需要在设计时假设您可能无法绑定到特定的端口号。您可以尝试从默认端口号开始的一系列端口号，但请确保您有某种方法来唯一标识绑定到端口的进程。或者您可以设计一个网络广播发现协议，告诉您的客户端应用程序绑定在哪个端口。

我们在 GTV 设备上使用了 8080 之类的端口号，因此可以使用这样的端口号。

# perl - 将子进程中执行的进程的值返回给父进程

> ID：15205584
> 
> 赞同：2
> 
> 时间：2013-03-04T15:55:51.510
> 
> 标签：perl, fork

我正在寻找一种解决方案，它允许我将在子进程中执行的进程的值返回给父进程。目前我尝试这个但不知道在哪里挂钩返回值：

```
use Proc::ProcessTable;
use POSIX qw(:signal_h :errno_h :sys_wait_h);
$SIG{CHLD} = \&REAPER;

for my $count (1..10) {  # start a few demo childs
 if (fork () == 0) {
  &startChild;
  exit 0;
 }     
}

do  {
 print "Working\n";
 sleep 1;
} while (chkChildProcess());

sub startChild {
  print "Starting Child $$\n";
  system("date"); #==>Need to get the output of "date" back to parent
  sleep 2 + rand 7; 
  print "End  Child $$\n";
}

sub chkChildProcess {
 for my $p (@{new Proc::ProcessTable->table}){
  if ($p->ppid == $$){
   $curPID{$$}=$p->pid;
   return 1;
  }
 }
 return undef;
}

sub REAPER {
my $pid;
$pid = waitpid(-1, &WNOHANG);
if ($pid == -1) {
 # no child waiting.  Ignore it.
} elsif (WIFEXITED($?)) {
 print "Process $pid exited.\n";
} else {
 print "False alarm on $pid.\n";
}
$SIG{CHLD} = \&REAPER;          # in case of unreliable signals
} 
```

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T16:13:38.380

看起来您可能想要使用[Parallel::ForkManager](http://p3rl.org/Parallel%3a%3aForkManager)，通过完成方法的 data_structure_reference 参数从子级返回值到父级中的 run_on_finish 回调。

要捕获输出，最简单的方法是使用[IPC::System::Simple](http://p3rl.org/IPC%3a%3aSystem%3a%3aSimple)的 capture 或 capturex。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-04T17:01:50.640

为解决这个问题而提出的`bg_eval`和`bg_qx`方法。[`Forks::Super`](http://search.cpan.org/perldoc?Forks%3a%3aSuper)

```
use Forks::Super 'bg_eval';

my @result;
for my $count (1 .. 10) {

    $result[$count] = bg_eval {
        my $date = `date`;
        sleep 2 + rand 7;
        return $date;
    };
}

print "$result[$_]\n" for 1..10; 
```

之后的块在`bg_eval`后台进程中异步运行。后台进程完成后，变量`$result[$count]`将填充结果。

当您 print`$result[$_]`时，会发生以下两种情况之一。如果与该变量关联的后台进程完成，它将包含其返回值。如果后台进程没有完成，它将等待进程完成，然后在该值中提供返回值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T16:09:41.527

你可以使用[threads::shared](http://perldoc.perl.org/threads/shared.html)而不是fork，创建一个共享变量，锁定它并写入它。请记住，锁定非常慢！

另请参阅perlmonks 上的[这篇](http://www.perlmonks.org/?node_id=579444)文章，了解为什么需要锁定变量。

# java - 选择哪种数据类型或数据结构来计算 100 的阶乘？

> ID：15205587
> 
> 赞同：6
> 
> 时间：2013-03-04T15:56:08.700
> 
> 标签：java, c, data-structures

我想写一个程序来评估给定整数的阶乘。

遵循基础知识，我在 java 中编写了以下代码：

```
long fact(int num){
if(num == 1)
 return 1;
else
 return num*fact(num-1);
} 
```

但后来我意识到，对于许多整数输入，结果可能不是我们想要的结果，因此对于测试，直接将输入设为 100。

我的怀疑是正确的，因为我得到的结果是“0”（因为结果可能超出了 long 的范围）。

所以，我只是好奇并渴望知道如何让我的程序适用于输入<=150。

我将不胜感激任何 C 编程语言或 Java 的有效解决方案。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-04T15:57:08.303

**BigInteger**是您的课程。它可以存储看似**任意大小****的整数**。

 **```
 static BigInteger fact(BigInteger num) {
        if (num.equals(BigInteger.ONE))
            return BigInteger.ONE;
        else
            return num.multiply(fact(num.subtract(BigInteger.ONE)));
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-04T16:00:38.810

如果您不是在使用简单的阶乘计算方法，那么您应该对这个问题进行一些研究。以下是计算阶乘的一些算法的一个很好的概述：[http ://www.luschny.de/math/factorial/conclusions.html](http://www.luschny.de/math/factorial/conclusions.html)

但就像其他答案所暗示的那样，您当前的问题是您需要使用大量实现（例如 BigInt）而不是固定大小的整数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-04T15:58:43.970

在 C 语言中，可以使用数组来存储大数的阶乘。
我的参考：[*计算任意大数的阶乘，显示所有数字*](https://stackoverflow.com/questions/1966077/calculate-the-factorial-of-an-arbitrarily-large-number-showing-all-the-digits?answertab=votes#tab-top)。这是很有帮助的帖子。
我对代码进行了一些小改动以转换为 C。

```
int max = 5000;
void factorial(int arr[], int n){//factorial in array
    if (!n) return;
    int carry = 0;
    int i=max-1;
    for (i=max-1; i>=0; --i){
        arr[i] = (arr[i] * n) + carry;
        carry = arr[i]/10;
        arr[i] %= 10;
    }
    factorial(arr,n-1);
}
void display(int arr[]){// to print array
    int ctr = 0;
    int i=0;
    for (i=0; i<max; i++){
        if (!ctr && arr[i])      
            ctr = 1;
        if(ctr)
            printf("%d", arr[i]);
    }
}
int main(){
    int *arr = calloc(max, sizeof(int));
    arr[max-1] = 1;
    int num = 100;
    printf("factorial of  %d is: ",num);
    factorial(arr,num);
    display(arr);
    free(arr);
    return 0;
} 
```

它的工作量为 100！见：[这里](http://codepad.org/8PMbUnNW)

我想给你两个更有用的帖子的链接。
1）[*如何处理任意大整数*](https://stackoverflow.com/questions/310276/how-to-handle-arbitrarily-large-integers)建议`GPU MP`
2）[*C++ 程序计算大阶乘*](https://stackoverflow.com/questions/2731459/c-program-to-calculate-large-factorials)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T15:58:42.323

在java中，你有可以存储任意大整数的BigInteger。不幸的是，在`C`. 您要么必须使用第三方库，要么自己实现大整数。典型的方法是拥有一个动态分配的数组，该数组将给定数字的每个数字存储在某个数字系统中（通常选择大于 10 的基数，以便减少所需的数字总数）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-04T16:17:24.180

一个十进制（以 10 为底）数字大约需要 3.3 位（确切地说：log(10)/log(2)）。100！大约是 158 位长，所以你需要 158 * 3.3 = 520 位。

C 中肯定没有内置类型可以做到这一点。如果您希望阶乘计算中的每个数字都“存在”，则需要某种形式的特殊库。

使用`double`会给你一个近似的结果（假设这`double`是一个 64 位浮点值，它与 IEEE-754 兼容，或具有类似的范围 - IEEE-754`double`格式将给出大约 16 个十进制数字（52 位精度，除以log(10)/log(2) 像上面一样）。我相信这个值有超过 16 位，所以你不会得到一个确切的值，但它会计算一些在 10 位或更多位内的数字.**

# java - 将 CheckBox 数据放入 Bundle

> ID：15205591
> 
> 赞同：0
> 
> 时间：2013-03-04T15:56:17.530
> 
> 标签：java, android, forms, scope, bundle

我以前做过。这不是火箭科学。一个包含完美形式的美丽活动。一个`EditText`这里……一个`Spinner`那里。但这次有`CheckBox`'es。

这应该很简单：设置`onClick()`XML 中声明的方法，获取视图的 ID...

...事情是，我一直在使用 a`Bundle`将表单中的所有数据收集在一起并发送给我`IntentService`以放入 SQLite 数据库。

```
/**
 * Called when the user changes the state of any CheckBox
 * @param view  The View that was checked/unchecked  */
public void onCheckBoxChng(View view) {
    // Is the view now checked?
    boolean checked = ((CheckBox) view).isChecked();
    String mField = new String();
    // Check which checkbox was clicked
    switch(view.getId()){
    case R.id.dlg_add_ply_chk1:
        mField = "Platinum";
        break;
    case R.id.dlg_add_ply_chk2:
        mField = "Gold";
        break;
    case R.id.dlg_add_ply_chk3:
        mField = "Silver";
        break;
    case R.id.dlg_add_ply_chk4:
        mField = "Bronze";
        break;
    case R.id.dlg_add_ply_chk5:
        mField = "HQ";
        break;
    case R.id.dlg_add_ply_chk6:
        mField = "Aurora-1";
        break;
    }
    if (checked) {
        setBundleChk(mField,1);
    } else {
        setBundleChk(mField,0);
    }
}

/**
 * Set the boolean fields in mBdlgForm based on user action on the checkboxes
 * 
 * @param   Field   The field name to change
 * @param   State   The state to set (<code>true</code> or <code>false</code> */
private void setBundleChk(String Field, int State){
    if (BuildConfig.DEBUG) {
        Log.i(Constants.TAG_ACTDLGADDPLYR,
                "setBundleChk(Field, State) called with: "+Field+", and "+State);
        Log.i(Constants.TAG_ACTDLGADDPLYR, "setBundleChk(): mBdlgForm Keys :");
        for (String key: mBdlgForm.keySet()){
            Log.d (Constants.TAG_FRGACTPLAYERS, "mBdlgForm."+key);
        }
    }
    if (State == 1) {
        mBdlgForm.putBoolean(Field, true);
    } else {
        mBdlgForm.putBoolean(Field, false);
    }
} 
```

小菜一碟，对吧？

问题是，虽然`Bundle`' 范围是整个活动，但在我从回调调用的任何函数中的 'es NOR的`onClick()`回调中都看不到它......`CheckBox``onClick()`

...请告诉我...我错过了什么？

即使在实施“Activity.this.method()”之后，我仍然会收到以下 Logcat 消息：

```
 03-04 20:09:32.349: E/AndroidRuntime(641): FATAL EXCEPTION: main
03-04 20:09:32.349: E/AndroidRuntime(641): java.lang.IllegalStateException: Could not execute method of the activity
03-04 20:09:32.349: E/AndroidRuntime(641):  at android.view.View$1.onClick(View.java:3591)
03-04 20:09:32.349: E/AndroidRuntime(641):  at android.view.View.performClick(View.java:4084)
03-04 20:09:32.349: E/AndroidRuntime(641):  at android.widget.CompoundButton.performClick(CompoundButton.java:100)
03-04 20:09:32.349: E/AndroidRuntime(641):  at android.view.View$PerformClick.run(View.java:16966)
03-04 20:09:32.349: E/AndroidRuntime(641):  at android.os.Handler.handleCallback(Handler.java:615)
03-04 20:09:32.349: E/AndroidRuntime(641):  at android.os.Handler.dispatchMessage(Handler.java:92)
03-04 20:09:32.349: E/AndroidRuntime(641):  at android.os.Looper.loop(Looper.java:137)
03-04 20:09:32.349: E/AndroidRuntime(641):  at android.app.ActivityThread.main(ActivityThread.java:4745)
03-04 20:09:32.349: E/AndroidRuntime(641):  at java.lang.reflect.Method.invokeNative(Native Method)
03-04 20:09:32.349: E/AndroidRuntime(641):  at java.lang.reflect.Method.invoke(Method.java:511)
03-04 20:09:32.349: E/AndroidRuntime(641):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
03-04 20:09:32.349: E/AndroidRuntime(641):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
03-04 20:09:32.349: E/AndroidRuntime(641):  at dalvik.system.NativeStart.main(Native Method)
03-04 20:09:32.349: E/AndroidRuntime(641): Caused by: java.lang.reflect.InvocationTargetException
03-04 20:09:32.349: E/AndroidRuntime(641):  at java.lang.reflect.Method.invokeNative(Native Method)
03-04 20:09:32.349: E/AndroidRuntime(641):  at java.lang.reflect.Method.invoke(Method.java:511)
03-04 20:09:32.349: E/AndroidRuntime(641):  at android.view.View$1.onClick(View.java:3586)
03-04 20:09:32.349: E/AndroidRuntime(641):  ... 12 more
03-04 20:09:32.349: E/AndroidRuntime(641): Caused by: java.lang.NullPointerException
03-04 20:09:32.349: E/AndroidRuntime(641):  at net.clmitchell.ewtraker.pPlayers.ActDlgAddPlyr.setBundleChk(ActDlgAddPlyr.java:260)
03-04 20:09:32.349: E/AndroidRuntime(641):  at net.clmitchell.ewtraker.pPlayers.ActDlgAddPlyr.onCheckBoxChng(ActDlgAddPlyr.java:231)
03-04 20:09:32.349: E/AndroidRuntime(641):  ... 15 more 
```

最后标识的两行分别是：

```
if (checked){ActDlgAddPlyr.this.setBundleChk(mField,1);}

for (String key: ActDlgAddPlyr.this.mBdlgForm.keySet()){ 
```

下面是第二种方法：

```
 /** 
 * Set the boolean fields in mBdlgForm based on user action on the checkboxes
 * 
 * @param   Field   The field name to change
 * @param   State   The state to set (<code>true</code> or <code>false</code> */
private void setBundleChk(String Field, int State){
    if (BuildConfig.DEBUG) {
        Log.i(Constants.TAG_ACTDLGADDPLYR, "setBundleChk(Field, State) called with: "+Field+", and "+State);
        Log.i(Constants.TAG_ACTDLGADDPLYR, "setBundleChk(): mBdlgForm Keys :");
        for (String key: ActDlgAddPlyr.this.mBdlgForm.keySet()){
            Log.d (Constants.TAG_FRGACTPLAYERS, "mBdlgForm."+key);
        }
    }
    if(State == 1){ActDlgAddPlyr.this.mBdlgForm.putBoolean(Field, true);}
    else{ActDlgAddPlyr.this.mBdlgForm.putBoolean(Field, false);}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:01:21.270

试试这个： -

```
Activity.this.setBundleChk(mField,1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T14:18:20.567

当`NullPointerException`您尝试将选中状态添加到`Bundle`. 您是否正确初始化了`Bundle`?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T14:39:42.373

onClick xml 属性应该可以正常工作。我用了几次没有任何问题。

我假设您的 xml 将此属性设置为`onCheckBoxChng`：

只要确保将 声明`public void onCheckBoxChng(View view)`为您的活动的正确方法（不是静态方法，也不是您的内部类的方法`Activity`等）。当它被调用时，`this`你的`onCheckBoxChng`方法中的 应该是`Activity`你期望的，托管这些`CheckBox`es 的那个。

根据堆栈跟踪，您似乎`onCheckBoxChng`实际上被调用了，但是，该`onCheckBoxChng`方法引发了一个异常，这是由`setBundleChk`.

在你的方法中，第 260 行有什么代码`setBundleChk`？如果是，`String key: ActDlgAddPlyr.this.mBdlgForm.keySet()`那么它看起来像`mBdlgForm`is `null`。它`mBdlgForm` `Bundle`在那里，它可以“看到”。它只是`null`。`mBdlgForm`确保在处理任何 onclick 之前分配适当的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T04:08:59.947

问题解决了。宝贵的经验教训：

1.  在用户触摸 CheckBox 的那一刻尝试获取 CheckBox 数据是错误的；我需要信任 Android 操作系统并在用户使用经过验证的真实技术按下“保存”按钮后收集数据。
2.  在某些情况下使用“android:onClick”很有用，但必须确定这种方法何时合适。
3.  您可以在 Activity 中使用 Intent ANYWHERE，而不仅仅是与另一个 Activity 进行通信。在这种情况下，Intent 类拯救了我的培根：将方法声明为侦听器将其与 Activity 中的几乎所有内容隔开，但 INENT；我能够获取我的 Activity 的现有 Intent，将用户输入添加到其中，然后从我将运行实际 INSERT 的位置访问并验证该数据：

    // 获取当前Activity的Intent

    意图 iNewPlyr = getIntent();

    // 将包含用户输入的包放入 Intent

    iNewPlyr.putExtras(mB);

    // 处理并插入来自其他地方的数据

    证实（）;

我感谢所有加入的人……愿你所有的股票期权价值翻三倍！

# javascript - RequireJS 不等待模块加载？

> ID：15205595
> 
> 赞同：6
> 
> 时间：2013-03-04T15:56:28.040
> 
> 标签：javascript, requirejs, amd

我在尝试仅加载我的应用程序需要的模块时遇到问题。该模块列表会有所不同，如下所示。

此代码内联在动态页面中：

```
<script data-main="js/main" src="js/require.js"></script>
<script>
  //APPROACH #1
  (function(){

     <% foreach(DashBoardItem item in AvailableItems){ %>
          require('js/dashboard/<%= item.Name.ToLower() %>').init(<%= CurrentUser.ID %>);  
     <% } %>

  }());
</script> 
```

这个想法是产生类似的东西：

```
<script>
 //APPROACH #1
 (function(){
    require('js/dashboard/sales').init(123);
    require('js/dashboard/inventory').init(123);
    require('js/dashboard/deadlines').init(123);
  }());
</script> 
```

我不确定这是否可行或是否可以这样做，因为上述方法会导致错误

> 尚未为上下文加载模块名称“js/dashboard/sales”：_。使用要求（[]）

我尝试生成这个：

```
<script>
   //APPROACH #2
   require(['js/dashboard/sales', 'js/dashboard/inventory', 'js/dashboard/deadlines' ],
           function(sales, inventory, deadlines){
              sales.init(123);
              inventory.init(123);
              deadlines.init(123);
           });
</script> 
```

但这失败了，因为显然 RequireJS 不会等待模块加载，而这三个回调参数 ( `sales`, `inventory`, `deadlines`) 将`undefined`在它执行时出现。

我会完全错了吗？如何将不同的所需模块列表从服务器端传递到客户端 JS？

**更新 - 固定**

我的问题是我的模块（销售、库存、截止日期）被错误地声明了。感谢**@anoopelias**下面的评论，我意识到我已经使用`require(...)`而不是`define(...)`在其中。所以他们就像：

```
//example of WRONG sales.js module
require(['jquery', 'other-module'], function($, otherModule){
  //do stuff, return some object instance
}); 
```

一旦我像下面这样修复，我可以从上面使用*APPROACH #2*并且效果很好。

```
//example of correct sales.js module
define(['jquery', 'other-module'], function($, otherModule){
  //do stuff, return some object instance
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-30T08:43:06.593

仅作记录，对于方法＃1，您只是忘记了模块周围的 [] ：

```
 <% foreach(DashBoardItem item in AvailableItems){ %>
      require(['js/dashboard/<%= item.Name.ToLower() %>']).init(<%= CurrentUser.ID %>);  
 <% } %> 
```

除非你的 js/main 不需要这个模块，否则 requirejs 会抱怨。即使您将它们包含在您的 js/main 中，您也必须“等待”main 完成加载（因此将 foreach 嵌套在 js/main 的 require 调用中）

# python - 像命令行模拟器一样使用 python 子进程模块

> ID：15205597
> 
> 赞同：2
> 
> 时间：2013-03-04T15:56:35.797
> 
> 标签：python, subprocess

我正在用 Python 为命令行应用程序编写一个测试框架。应用程序将创建目录，调用当前目录中的其他 shell 脚本，并将输出到 Stdout。

我试图将 {Python-SubProcess, CommandLine} 组合视为等同于 {Selenium, Browser}。第一个组件在第二个组件上*播放*一些东西并*检查*输出是否符合预期。我面临以下问题

1.  Popen 构造接受一个命令并在该命令完成后返回。我想要的是该过程的实时句柄，因此我可以运行进一步的命令+验证，并最终在完成后关闭外壳
2.  我可以编写一些基础设施代码来实现这一点，因为我们有很多需要像这样测试的命令行应用程序。

这是我正在运行的示例代码

```
 p = subprocess.Popen("/bin/bash", cwd = test_dir)
 p.communicate(input = "hostname") --> I expect the hostname to be printed out
 p.communicate(input = "time") --> I expect current time to be printed out 
```

但该过程挂起，或者可能是我做错了什么。另外，我如何“获取”该子流程的输出，以便我可以*断言*某些东西存在？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T17:18:34.750

`subprocess`您可能会发现 Python sh 库非常有用，而不是使用 plain ：

[http://amoffat.github.com/sh/](http://amoffat.github.com/sh/)

这是一个如何使用 sh 构建异步交互循环的示例：

[http://amoffat.github.com/sh/tutorials/2-interacting_with_processes.html](http://amoffat.github.com/sh/tutorials/2-interacting_with_processes.html)

解决这个问题的另一个（旧）库是 pexpect：

[http://www.noah.org/wiki/pexpect](http://www.noah.org/wiki/pexpect)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T16:01:07.387

`subprocess.Popen`允许您在启动进程后继续执行。`Popen`对象暴露`wait()`，以及在子进程运行时与子进程通信的`poll()`许多其他方法。这不是你需要的吗？

有关详细信息，请参阅[Popen 构造函数](http://docs.python.org/2/library/subprocess.html#subprocess.Popen)和`Popen`对象描述。

这是一个在 Unix 系统上运行 Bash 并执行命令的小示例：

```
from subprocess import Popen, PIPE
p = Popen (['/bin/sh'], stdout=PIPE, stderr=PIPE, stdin=PIPE)
sout, serr = p.communicate('ls\n')
print 'OUT:'
print sout
print 'ERR:'
print serr 
```

**UPD：** `communicate()`等待进程终止。如果您不需要，您可以直接使用适当的管道，尽管这通常会给您带来相当难看的代码。

**UPD2：**您更新了问题。是的，您不能`communicate`为一个进程调用两次。您可以在一次调用中提供所有需要执行的命令`communicate`并检查整个输出，或者使用管道（`Popen.stdin`, `Popen.stdout`, `Popen.stderr`）。如果可能，我强烈推荐第一个解决方案（使用`communicate`）。

否则，您将不得不输入命令并等待一段时间以获得所需的输出。您需要的是非阻塞读取，以避免在没有内容可读取时挂起。[这](https://stackoverflow.com/questions/375427/non-blocking-read-on-a-subprocess-pipe-in-python)是一个如何使用线程在管道上模拟非阻塞模式的方法。对于这样一个微不足道的目的，代码很丑陋而且异常复杂，但这就是它的完成方式。

另一种选择可能是使用`p.stdout.fileno()`for `select.select()`call，但这在 Windows 上不起作用（在 Windows 上`select`仅对源自 WinSock 的对象进行操作）。如果您不在 Windows 上，您可以考虑它。

# python - Python 列表：如何在列表中搜索另一个元素或重复项

> ID：15205598
> 
> 赞同：1
> 
> 时间：2013-03-04T15:56:36.470
> 
> 标签：python

我有一个列表说`p = [1,2,3,4,2]` 是否有任何方法可以返回 bool 值`True`，如果它包含仅使用 find、索引、切片、len() 等方法而不是 dict、tuple 等方法的重复项。

我使用了这段代码：

```
for e in p: 
   duplicate = p.find(e, e+1) 
   if duplicate in p: 
       return True 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T16:05:20.937

这是简单的方法：

```
return len(p) != len(set(p)) 
```

一种不使用的效率较低的方法`set`：

```
for i in range(len(p)):
   if p[i] in p[i+1:]:
      return True
return False 
```

第二种方法不是很惯用，但是除了最基本的语言特性（包括元组）之外，它避免了所有的特性。

这是另一种方法：

```
while p:
   e = p.pop()
   if e in p:
      return True
return False 
```

这很简单，但确实会修改列表。

我要演示的最后一种方法是：

```
s = sorted(p)
for i in range(1, len(s)):
   if s[i] == s[i - 1]:
      return True
return False 
```

这是通过排序`p`然后比较每对连续元素来实现的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-04T16:04:59.373

你也可以使用[`list.count`](http://docs.python.org/2/tutorial/datastructures.html#more-on-lists)：

```
def has_duplicates(p):
    for e in p:
        if p.count(e) > 1:
            return True
    return False 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-04T16:05:11.107

```
>>> p = [1, 2, 3, 4, 2]
>>> len(set(p)) == len(p)
False 
```

您可以在[Python 文档中找到](http://docs.python.org/2/index.html)[有关集合的更多信息](http://docs.python.org/2/library/sets.html)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-04T16:18:52.277

使用 collections.Counter

```
>>> import collections
>>> p
[1, 2, 3, 4, 2]
>>> if collections.Counter(p).most_common()[0][1] > 1: 
...     print('duplicate found')
... 
duplicate found
>>> if collections.Counter(set(p)).most_common()[0][1] > 1: 
...     print('duplicate found')
... 
>>> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-04T16:03:53.473

如果你必须这样做，你可以这样做：

```
def has_duplicates(lst):
    for i, e in enumerate(lst[::-1]):
        if lst.index(e) != len(lst) - i - 1:
            return True
    return False 
```

这以相反的顺序遍历列表（因为`index`从列表的开头搜索）。但最好这样做：

```
def has_duplicates(lst):
    return len(set(lst)) != len(lst) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-04T16:06:28.773

这是一个非常简单的方法。对于非常大的列表，它可能会很慢。

```
def has_duplicates(lst):
    for e in lst:
        lst = lst[1:]
        if e in lst: return True
    return False 
```

# php - 调整大小的图像上传

> ID：15205601
> 
> 赞同：1
> 
> 时间：2013-03-04T15:56:45.910
> 
> 标签：php, image, upload, resize

我有一个上传脚本，效果很好，但我希望它上传两次，一种是原始格式，另一种是 thubm 大小。

我在 google 和 stackoverflow 上做了 allready 搜索，我尝试了 allready 的东西，但我没有得到它的工作。

我的上传脚本

```
 // If you want to ignore the uploaded files, 
    // set $demo_mode to true;

$demo_mode = false;
$upload_dir = 'uploads/';
$allowed_ext = array('jpg','jpeg','png','gif');

include('./../includes/core.php');

if(strtolower($_SERVER['REQUEST_METHOD']) != 'post'){
    exit_status('Error! Wrong HTTP method!');
}

if(array_key_exists('pic',$_FILES) && $_FILES['pic']['error'] == 0 ){

    $pic = $_FILES['pic'];

    if(!in_array(get_extension($pic['name']),$allowed_ext)){
        exit_status('Alleen '.implode(',',$allowed_ext).' bestanden zijn toegestaan');
    }   

    if($demo_mode){

        // File uploads are ignored. We only log them.

        $line = implode('       ', array( date('r'), $_SERVER['REMOTE_ADDR'], $pic['size'], $pic['name']));
        file_put_contents('log.txt', $line.PHP_EOL, FILE_APPEND);

        exit_status('Uploads are ignored in demo mode.');
    }

    // Move the uploaded file from the temporary 
    // directory to the uploads folder:

    $name = $pic['name'];
    $sname = hashing($name);
    $datum = date("d-m-Y"); 
    if(move_uploaded_file($pic['tmp_name'], $upload_dir.$sname)){
        mysql_query("INSERT INTO foto VALUES ('','".$pic['name']."','".$sname."', '".$datum."', '0')");
        exit_status('Bestand succesvol geupload');
    }

}

exit_status('Er is iets mis gegaan!');

// Helper functions

function exit_status($str){
    echo json_encode(array('status'=>$str));
    exit;
}
function hashing($naam){
    $info = pathinfo($naam);
    $ext  = empty($info['extension']) ? '' : '.' . $info['extension'];
    $hash = basename($naam, $ext);
    $hash = $hash . genRandomstring();
    $hash = md5($hash);
    $hash = $hash . '-' . genRandomstring();
    return  $hash . $ext;
}
function genRandomString() {
$length = 5;
$string = "";
$characters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-+!@"; // change to whatever characters you want
while ($length > 0) {
    $string .= $characters[mt_rand(0,strlen($characters)-1)];
    $length -= 1;
}
return $string;
}

function get_extension($file_name){
    $ext = explode('.', $file_name);
    $ext = array_pop($ext);
    return strtolower($ext);
}
?> 
```

如果有人可以帮助我？我会很高兴，因为我已经尝试了一个星期，我可以把它拿出来。

谢谢，克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:20:06.917

如前所述，您无需上传两次，上传后复制并调整图像大小，如下所示：

```
 $pathToImages = "path/to/images"
    $pathToThumbs = "path/to/thumbs"
    $fname = "image-file-name";
    $new_fname = "thumb-file-name";
    $img = imagecreatefromjpeg( "{$pathToImages}{$fname}" );
    $width = imagesx( $img );
    $height = imagesy( $img );
    $thumbWidth = //someValue//;
    $thumbHeight = //someValue//;

// calculate thumbnail size
    $new_height = floor($height * ($thumbWidth/$width));
    $new_width = $thumbWidth;

    // create a new temporary image
    $tmp_img = imagecreatetruecolor($thumbWidth, $thumbHeight);

    // copy and resize old image into new image 
    imagecopyresized( $tmp_img, $img, 0, 0, 0, 0, $new_width,$new_height, $width, $height );

    // save thumbnail into a file
    imagejpeg( $tmp_img, "{$pathToThumbs}{$new_fname}" ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T16:06:10.850

1.  您将图像上传*一次*，这就是您所需要的，然后使用它来创建第二个缩略图文件。
2.  尝试查看[GD 文档](http://www.php.net/manual/en/ref.image.php)。

# java - 使用可比和比较器接口

> ID：15205604
> 
> 赞同：0
> 
> 时间：2013-03-04T15:56:55.730
> 
> 标签：java, collections

可比较接口和比较器接口有什么区别，应该在什么条件下使用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T16:00:32.963

如果您拥有排序对象，您可以选择在其中实现 Comapreble 或将逻辑分离到不同的比较器中。如果您正在使用第三方对象并且不想扩展它们以添加比较逻辑，则使用 Comparator。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T16:02:06.197

Comparable 是定义对象自然排序的接口。例如，String 按照字典顺序实现 Comparable，Integers 按照数字顺序实现 Comparable。如果一个类具有可比性，这将是应用于其实例的默认顺序（例如，在二分查找、排序或 SortedMap 中）。

比较器定义了一个独立的比较机制，它有时可以替代元素的自然排序。例如，您可以对字符串使用不同的排序逻辑，并将其用于对字符串数组进行排序。

# asp.net - json 对象和 Web 方法无效的 Web 服务调用缺失值参数

> ID：15205606
> 
> 赞同：0
> 
> 时间：2013-03-04T15:57:05.363
> 
> 标签：asp.net, ajax, json, jquery, webmethod

我有 Jquery 可排序 UI 我有 Web 服务来在用户更新提醒订单时更新提醒顺序 我知道将 json 数据传递给 Web 服务是有问题但无法解决

> 错误：无效的 Web 服务调用缺少值参数： System.Web.Script.Services.RestHandler.InvokeMethod（HttpContext 上下文，WebServiceMethodData methodData，
> System.Web.Script.Services.WebServiceMethodData.CallMethod（对象目标，IDictionary 2 参数）的 rlist `2 parameters) at System.Web.Script.Services.WebServiceMethodData.CallMethodFromRawParams(Object target, IDictionary`IDictionary`2 rawParams) 在 System.Web.Script.Services.RestHandler.ExecuteWebServiceCall(HttpContext context, WebServiceMethodData methodData)

```
 Web Services 
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Web;
    using System.Web.Services;
    using Compudata_ProjectManager.CodeFile.BOL;
    using System.Data.SqlClient;
    using System.Web.Script.Services;

    namespace Compudata_ProjectManager.WebServices
    {
        /// <summary>
        /// Summary description for remindersWebService
        /// </summary>
        [WebService(Namespace = "http://tempuri.org/")]
        [WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
        [System.ComponentModel.ToolboxItem(false)]
         [ScriptService]
        // To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line. 
        // [System.Web.Script.Services.ScriptService]
        public class remindersWebService : System.Web.Services.WebService
        {

            public class ReminderDTO
            {
                public int Id { get; set; }
                public int Order { get; set; }
            }

            [WebMethod]
            [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
            public string UpdateOrder(List<ReminderDTO> rList)
            {
                //CompuData_ProjectManagerConfiguration.DbconnctionString;

                using (SqlConnection connectionString = new SqlConnection(CompuData_ProjectManagerConfiguration.DbconnctionString))
                {

                    foreach (var r in rList)
                    {
                        string sSQL = "UPDATE [TaskManagementSystem_DB].[dbo].[Reminders] SET [reminderOrder] = " +  r.Order.ToString() + "where reminderID = " + r.Id;

                        SqlCommand cmd = new SqlCommand(sSQL, connectionString);

                        try
                        {
                            cmd.ExecuteNonQuery();
                        }
                        catch (SqlException)
                        {
                            return "falied";
                        }

                    }
                    return "save";
                }
            }
        }
    }

javascript 

    $(function () {
        $("#sortable").sortable({
            placeholder: "vacant",
            update: function (e, ui) {
                //process each li

                //create vars
                var orderArray = [];
                var wrap = {};
                $("#sortable li").each(function () {

                    //build ReminderObject
                    var reminderObject = {
                        Id: $(this).attr("id"),
                        Order: $(this).find("input[type='hidden']").val()
                    };

                    //add object to array 
                    orderArray.push(reminderObject);

                });

                wrap.d = orderArray

                //pass to server 
                $.ajax({
                    type: "POST",
                    url: "../WebServices/remindersWebService.asmx/UpdateOrder",
                    data: JSON.stringify(wrap),
                    processData: false,
                    contentType: "application/json; charset=utf-8",
                    success: function (data) {
                        if (data.d === "saved") {
                            document.write("Save ok");
                        } else {
                            document.write("Save failed");
                        }
                    },
                    error: function (xhr, status, error) {
                        var err = eval("(" + xhr.responseText + ")");
                        console.log(err.StackTrace);
                        alert(err.Message);
                    }
                });

            } //end of update function 
        });
        $("#sortable").disableSelection();

        $("input[type=checkbox]").on("click", function () {
            $(this).nextAll().toggleClass("hidden");
        });

    });

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:01:22.170

尝试发送`Id`和`Order`作为预期的整数。

```
var reminderObject = {
    Id: parseInt($(this).attr("id"), 10),
    Order: parseInt($(this).find("input[type='hidden']").val(), 10)
}; 
```

也更改`wrap.d = orderArray`为`wrap.rList = orderArray`as`rList`是预期的参数。

# javascript - 调整窗口大小时调用函数

> ID：15205609
> 
> 赞同：32
> 
> 时间：2013-03-04T15:57:14.640
> 
> 标签：javascript, jquery, window-resize

每当调整浏览器窗口的大小时，如何调用此（或任何）JS 函数再次运行？

```
<script type="text/javascript">
 function setEqualHeight(e) {
     var t = 0;
     e.each(function () {
         currentHeight = $(this).height();
         if (currentHeight > t) {
             t = currentHeight
         }
     });
     e.height(t)
 }
 $(document).ready(function () {
     setEqualHeight($(".border"))
 })
</script> 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-03-04T15:58:48.903

您可以使用窗口`onresize`事件：

```
window.onresize = setEqualHeight; 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-03-04T15:59:14.973

您可以订阅该`window.onresize`活动（[请参阅此处](https://developer.mozilla.org/en-US/docs/DOM/window.onresize)）

```
window.onresize = setEqualHeight; 
```

或者

```
window.addEventListener('resize', setEqualHeight); 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-03-04T16:03:12.687

这段代码将添加一个计时器，该计时器在窗口调整大小后 200 毫秒后调用 resize 函数。这将减少方法的调用。

```
var globalResizeTimer = null;

$(window).resize(function() {
    if(globalResizeTimer != null) window.clearTimeout(globalResizeTimer);
    globalResizeTimer = window.setTimeout(function() {
        setEqualHeight();
    }, 200);
}); 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2013-03-04T16:01:43.490

你使用jquery，所以使用[`.resize()`](http://api.jquery.com/resize/)方法绑定它。

```
$(window).resize(function () {
    setEqualHeight( $('#border') );
}); 
```

# memory - 以编程方式告诉我的 VB6 应用程序正在使用多少内存？

> ID：15205610
> 
> 赞同：3
> 
> 时间：2013-03-04T15:57:15.327
> 
> 标签：memory, vb6, instrumentation

我有一个用 VB6 编写的程序，我希望它能够知道它本身正在使用多少内存。

谷歌搜索了一下只让我找到了“GlobalMemoryStatusEx”Windows API 函数，但这似乎不是我想要的：它可以用来提供有关计算机整体内存的信息，而我想要关于当前流程本身。

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T17:00:36.813

您可以使用以下[`GetProcessMemoryInfo()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683219%28v=vs.85%29.aspx)功能：

声明：

```
Public Type PROCESS_MEMORY_COUNTERS
  cb As Long
  PageFaultCount As Long
  PeakWorkingSetSize As Long
  WorkingSetSize As Long
  QuotaPeakPagedPoolUsage As Long
  QuotaPagedPoolUsage As Long
  QuotaPeakNonPagedPoolUsage As Long
  QuotaNonPagedPoolUsage As Long
  PagefileUsage As Long
  PeakPagefileUsage As Long
End Type

Public Declare Function OpenProcess Lib "kernel32" (ByVal dwDesiredAccess As Long, ByVal bInheritHandle As Long, ByVal dwProcessID As Long) As Long
Public Declare Function GetCurrentProcess Lib "kernel32" () As Long
Public Declare Function GetProcessMemoryInfo Lib "PSAPI.DLL" (ByVal hProcess As Long, ppsmemCounters As PROCESS_MEMORY_COUNTERS, ByVal cb As Long) As Long
Public Declare Function CloseHandle Lib "kernel32" (ByVal hObject As Long) As Long 
```

调用代码：

```
Dim tPMC As PROCESS_MEMORY_COUNTERS

'ProcessHandle = OpenProcess(PROCESS_QUERY_INFORMATION Or PROCESS_VM_READ, 0, ProcessID)
ProcessHandle = GetCurrentProcess()

If (GetProcessMemoryInfo(ProcessHandle, tPMC, Len(tPMC)) <> 0) Then
  PageFaultCount = Format(tPMC.PageFaultCount, "#,###")
  WorkingSetSize = FormatFileSize(tPMC.WorkingSetSize)
  PageFileUsage = FormatFileSize(tPMC.PagefileUsage)
End If

CloseHandle ProcessHandle 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T16:04:47.647

在[这个论坛帖子](http://www.vbforums.com/showthread.php?433122-Individual-Process-Memory-Usage)中，有一个涉及`tasklist.exe`shell 命令的建议，它会打印出所有正在运行的进程以及内存使用情况。我不确定性能..

# ruby-on-rails - ruby on rails MVC 框架项目中的 API 调用在哪里？

> ID：15205613
> 
> 赞同：9
> 
> 时间：2013-03-04T15:57:23.770
> 
> 标签：ruby-on-rails, api

我在 Ruby on Rails 中有一个带有 mvc 框架的应用程序。截至目前，我在控制器中有 API 调用，但不认为这是适合他们的地方。我的所有 API 调用都应该放入什么样的文件？谢谢

```
def getDetails(id)
 api_response = HTTParty.get(base_uri, :query => {:DID => id, :DeveloperKey => devKey})
 @json_hash = api_response.parsed_response
 return @json_hash
end 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-04T16:40:47.620

对外部服务（第 3 方）的 API 调用并不特定于您的应用，因为每个人都可以使用它们的服务（理论上）。据我了解，这些功能都在`lib/`目录中，因为它们不是特定于应用程序的。理想情况下，您可以从您`lib`的项目中提取代码，并将其放入`lib/`另一个项目中的其他人的代码中，它仍然可以正常工作。

把调用放在`lib/`. 如果需要，您可以根据控制器中返回的数据创建模型。

它看起来像这样：

应用程序/控制器/

```
class YourController < ApplicationController

  def getDetails
   # keep in mind, api call may fail so you may want surround this with a begin/rescue
   api_response = YourApiCall.new.get_details(params[:id])
   # perhaps create a model
   @model = SomeModel.new(fname: api_response[:first_name], lname: api_response[:last_name])
    # etc...
  end
end 
```

库/

```
require 'HTTParty'

Class YourApiCall
  def get_details(id)
    HTTParty.get(base_uri, :query => {:DID => id, :DeveloperKey => devKey})
    @json_hash = api_response.parsed_response
    return @json_hash
  end
end 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-12-07T16:09:48.057

这个很晚了，但我想我会添加我的 2p/2c。

除了控制器代码之外，我喜欢尝试让我的控制器保持清洁，我根据请求类型和参数将其松散地定义为程序流代码。例如，为请求类型选择正确的模板或根据用户是否登录选择正确的调用方法。

在计算响应时，我不喜欢在控制器中乱扔大量操纵模型和设置实例参数的代码。这很难测试，甚至更难重复使用。我更喜欢推迟到另一个对象并将单个值对象返回给模板。

有时我可以遵循一个模型：也许这是一个简单的查找，我只是将一个模型发送到模板，或者一个模型数组。

也许我在模型中实现了一个有用的方法来返回适当的值或值对象。

然而，有时我正在做一些不使用模型的事情，或者使用多个模型，或者感觉它实际上不应该使模型混乱。在这种情况下，控制器和模型都不是代码的合适位置。

lib 目录也感觉不对。我倾向于将 lib 目录视为包含我还没有费心变成宝石的代码的地方。如果我正在编写的代码仅在应用程序的上下文中才有意义，那么它就不适合。

所以我转向服务对象。在“应用程序”文件夹下，我有一个“服务”文件夹，其中包含封装单个站点行为块的小型功能类。（或者有时，协调几个其他服务为控制器提供一个简单的接口。）

这让我可以精简我的控制器和模型，并为放置需要联系 API 的代码提供了一个完美的地方。

如果您想更进一步，您可以将 API 本身包装在一个包装类（或一组类）中，并将它们保存在 lib 目录中（以便以后转换为 gem）。然后，服务对象将执行使用适当的值（从控制器传递）调用 API 包装器的任务，并使用模板可以干净地询问的内容进行响应。

当然，您可以比这更进一步并添加更多层。例如，表示层可以位于服务对象（提供通用值）和特定视图的格式数据之间。（也许您想同时提供网页和 RSS 提要，例如，它们需要不同的日期格式。）

但你明白了。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-04T16:24:56.763

根据我的编码风格（以及对 MVC 的理解），外部调用将被放置在“无表”模型中。[RailsCasts 193](http://railscasts.com/episodes/193-tableless-model)谈到了这个概念，Rails 4 支持不那么笨重的语法。如果您需要对代码进行任何操作，模型似乎是放置这些的合乎逻辑的地方。将这些方法移到控制器中会起作用，但随着应用程序的增长可能会产生问题。

外部 API 调用的另一个考虑因素实际上是将它们存储在数据库中，那时它肯定应该在模型中，所以（对我来说）很清楚这些确实应该在模型中。

# android - 使用 USB 将 Android 连接到 Rambo

> ID：15205622
> 
> 赞同：2
> 
> 时间：2013-03-04T15:57:49.930
> 
> 标签：android, usb, arduino

我尝试将我的 archos Titanium HD 连接到我的 RAMBo ( [http://reprap.org/wiki/Rambo](http://reprap.org/wiki/Rambo) )。目前我可以连接到设备并找到 USB_DIR_IN 但是当我从连接中读取时我得到空值。我究竟做错了什么？

```
public void onReceive(Context context, Intent intent) {
            EditText myfield = (EditText) findViewById(R.id.editText1);
            String action = intent.getAction();
            if (ACTION_USB_PERMISSION.equals(action)) {
                synchronized (this) {
                    UsbDevice device = (UsbDevice)intent.getParcelableExtra(UsbManager.EXTRA_DEVICE);

                    if (intent.getBooleanExtra(UsbManager.EXTRA_PERMISSION_GRANTED, false)) {
                        if(device != null){

                            myfield.setText(myfield.getText()+"start connection");
                            UsbInterface intf = device.getInterface(0);

                            UsbManager mUsbManager=(UsbManager) getSystemService(Context.USB_SERVICE);
                            UsbDeviceConnection connection = mUsbManager.openDevice(device); 

                            if(connection.claimInterface(intf, forceClaim)){

                                for(int i=0;i<intf.getEndpointCount();i++){
                                    UsbEndpoint endpoint = intf.getEndpoint(i); 

                                    if(endpoint.getDirection()== UsbConstants.USB_DIR_IN){
                                        myfield.setText(myfield.getText()+"endpoint zum lesen:"+i);

                                        int ret=connection.bulkTransfer(endpoint, mybytes, 20, TIMEOUT);

                                        myfield.setText(myfield.getText()+"ret"+ret+" "+Arrays.toString(mybytes)+"first read");

                                    }
                                    else if(endpoint.getDirection()==UsbConstants.USB_DIR_OUT){

                                        myfield.setText(myfield.getText()+"endpoint zum schreiben"+i);
                                    }
                                    else{
                                        myfield.setText(myfield.getText()+"irgendein endpoint");

                                    }
                                }
                            }
                            else{

                                myfield.setText(myfield.getText()+"verbindung nicht möglich");
                            }

                          //call method to set up device cmmunication
                       }
                    } 
                    else {
                        myfield.setText("Permission denied");
                        //Log.d(TAG, "permission denied for device " + device);
                    }
                }
            }
        }
    }; 
```

# c# - 处理 WPF TabItems Visibility 属性

> ID：15205626
> 
> 赞同：7
> 
> 时间：2013-03-04T15:57:53.580
> 
> 标签：c#, wpf, visibility, tabitem

我一直在阅读`Visibility.Collapsed`关于`TabItems`. 当`Visibility`设置为`Collapsed`时，`TabItem`标题被隐藏，但内容仍然可见。

我也尝试过[这里](http://www.hardcodet.net/2009/06/finding-elements-in-wpf-tree-both-ways)提到的以下方法，但没有运气。

有没有办法让里面的内容`TabItems`隐藏起来，并选择可见的选项卡。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-04T16:25:46.170

你不需要这些。从概念上讲， a`TabControl`只是 a 的图形表示，其中每个视图模型由一个选项卡项表示，并且在给定时间`ObservableCollection<ViewModel>`只有 1个：`SelectedItem`

```
<Window x:Class="WpfApplication4.Window12"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Window12" Height="300" Width="300">
    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
    </Window.Resources>
        <TabControl ItemsSource="{Binding Items}" SelectedItem="{Binding SelectedItem}">
            <TabControl.ItemContainerStyle>
                <Style TargetType="TabItem">
                    <Setter Property="IsEnabled" Value="{Binding IsEnabled}"/>
                    <Setter Property="Visibility" Value="{Binding IsVisible, Converter={StaticResource BoolToVisibilityConverter}}"/>
                    <Setter Property="Header" Value="{Binding Title}"/>
                </Style>
            </TabControl.ItemContainerStyle>
        </TabControl>
</Window> 
```

代码背后：

```
using System.Windows;
using BaseFramework.MVVM;
using System.Collections.ObjectModel;

namespace WpfApplication4
{
    public partial class Window12 : Window
    {
        public Window12()
        {
            InitializeComponent();
            DataContext = new TabbedViewModel()
                          {
                              Items =
                                  {
                                      new TabViewModel() {Title = "Tab #1", IsEnabled = true, IsVisible = true},
                                      new TabViewModel() {Title = "Tab #2", IsEnabled = false, IsVisible = true},
                                      new TabViewModel() {Title = "Tab #3", IsEnabled = true, IsVisible = false},
                                  }
                          };
        }
    } 
```

视图模型：

```
 public class TabbedViewModel: ViewModelBase
    {
        private ObservableCollection<TabViewModel> _items;
        public ObservableCollection<TabViewModel> Items
        {
            get { return _items ?? (_items = new ObservableCollection<TabViewModel>()); }
        }

        private ViewModelBase _selectedItem;
        public ViewModelBase SelectedItem
        {
            get { return _selectedItem; }
            set
            {
                _selectedItem = value;
                NotifyPropertyChange(() => SelectedItem);
            }
        }
    }

    public class TabViewModel: ViewModelBase
    {
        private string _title;
        public string Title
        {
            get { return _title; }
            set
            {
                _title = value;
                NotifyPropertyChange(() => Title);
            }
        }

        private bool _isEnabled;
        public bool IsEnabled
        {
            get { return _isEnabled; }
            set
            {
                _isEnabled = value;
                NotifyPropertyChange(() => IsEnabled);
            }
        }

        private bool _isVisible;
        public bool IsVisible
        {
            get { return _isVisible; }
            set
            {
                _isVisible = value;
                NotifyPropertyChange(() => IsVisible);
            }
        }
    }
} 
```

然后，它只是继承`TabViewModel`每个选项卡的问题（在每个选项卡内部创建适当的逻辑），并`DataTemplate`为这些派生类中的每一个`app.xaml`或其他东西提供适当的。

每当您想从视图中删除选项卡项时，您都可以操作 ViewModel，而不是操作视图。这是所有事情的 WPF 方法。它消除了在代码中操作复杂对象（UI 元素）的需要，从而简化了一切。每当你设置

`TabbedViewModel.SelectedItem.IsVisible = false;`，请确保您还这样做：

`TabbedViewModel.SelectedItem = TabbedViewModel.Items.First(x => x.IsVisible && x.IsEnabled);`

这将防止您陷入将不可见的选项卡项作为选定项的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T16:07:43.710

您好，只需从 TabControl 添加和删除 TabItems，而不是设置可见性。打开和关闭可见性还有一个问题，当您滚动或最小化或调整 TabControl 大小时，它会出现异常，例如超出索引。

# android - Android 4.2.1 / 4.2.2 通知在静音模式下振动

> ID：15205627
> 
> 赞同：0
> 
> 时间：2013-03-04T15:58:03.830
> 
> 标签：android, android-4.2-jelly-bean, android-notifications, android-vibration

在 Android 4.2.1 之前，以下代码工作得很好

```
notification.audioStreamType = AudioManager.STREAM_RING;
notification.flags = notification.flags | Notification.FLAG_INSISTENT
        | Notification.FLAG_ONGOING_EVENT;
notificationManager.notify(ID_NOTIFICATION_SOUND, notification); 
```

振动是单独进行的，具体取决于偏好设置的状态。

```
vibrator = (Vibrator) context.getSystemService(Context.VIBRATOR_SERVICE);
vibrator.vibrate(vibr_pattern1, 0); 
```

现在，在 Android 4.2.1+ 中，即使手机设置为静音（无振动）并设置为振动模式，即使应用程序的振动设置设置为关闭，也始终存在振动。有趣的是，手机处于正常模式时没有振动。

如前所述，在 4.2.1 之前一切正常。

有人可以帮忙吗？谷歌在这里改变了什么？它与[此错误报告](http://code.google.com/p/android/issues/detail?id=39592)有关吗？

问候，
安德烈亚斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:22:13.703

我这样修复它：

```
//vibration workaround for android 4.2.1+
notification.vibrate = new long[]{0,0};
//end workaround 
```

我手动添加“无振动”，如果用户选择振动，它是用一个`Vibrator`物体完成的。如果没有，上面的代码会让一切保持安静。如前所述，这在 4.2.1+ 之前不是必需的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-24T18:14:55.237

我知道这是旧的。但是对于一些正在寻找答案的人。你可以试试这个。

```
AudioManager audio = (AudioManager) this.getSystemService(Context.AUDIO_SERVICE);
     Vibrator v = (Vibrator) this.getSystemService(Context.VIBRATOR_SERVICE);
    switch( audio.getRingerMode() ){
    case AudioManager.RINGER_MODE_NORMAL:
        try {
            Uri notification = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);
            Ringtone r = RingtoneManager.getRingtone(getApplicationContext(), notification);
            r.play();
            v.vibrate(500);
        } catch (Exception e) {
            e.printStackTrace();
        }
       break;
    case AudioManager.RINGER_MODE_SILENT:
       break;
    case AudioManager.RINGER_MODE_VIBRATE:
         v.vibrate(500);
       break;
    } 
```

# git - Git cvsexportcommit 并添加新文件

> ID：15205631
> 
> 赞同：0
> 
> 时间：2013-03-04T15:58:16.157
> 
> 标签：git, cvs

我对 perl 了解不多，并且在将功能添加到 git-cvsexportcommit.perl 以在切换到 cvs 时添加在 git 项目上创建的新文件时遇到了麻烦。我总是收到一个错误，例如

```
cvs status: nothing known about `private/includes/suiviAnnuelpdf.php'
Huh? Status 'Unknown' reported for unexpected file 'no file suiviAnnuelpdf.php' 
```

你有什么主意吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:29:25.457

我不知道您是否找到了解决方案，但我刚刚这样做并遇到了类似的问题（我的文件是我在 Git 迁移之前的一次提交中从 CVS 中删除的文件）。问题是我没有对我的 Git 存储库提交任何更改，因此 cvsexportcommit 试图重播最后一次更改，即删除此文件。CVS 抱怨它对文件一无所知（我删除它太正确了）。

为了将来参考，这是我刚刚用来从 Git 存储库向 CVS 发送提交的内容。您将需要一个准备好的 CVS 沙箱，我将调用它`foo-CVS`和我将调用的 git 存储库`foo`。

```
cd /tmp
cvs co -d foo-CVS foo
git clone /my/foo.git
cd foo
<DO THE CHANGE on file.txt>
git add file.txt
git commit file.txt
git cvsexportcommit -w ../foo-CVS -v -u HEAD
cd ../foo-CVS
cvs commit -F .msg file.txt 
```

该命令也可以为您执行提交，但我觉得最好阅读一下 CVS 中的更改，直到我完全信任该过程。

# asp.net - 将动态用户控件添加到 Asp 表

> ID：15205638
> 
> 赞同：2
> 
> 时间：2013-03-04T15:58:36.583
> 
> 标签：asp.net, vb.net, user-controls, celltable

我正在尝试使用数据集中的一些数据将**输入复选框类型**和**asp 文本框**动态添加到 Asp Tablecell。我读过几篇关于这个的文章，但没有一个人想要达到这个组合。

这是我正在使用的代码（其中*ds*是数据集，*tblMeasuredChar*是 Asp 表）：

```
 If ds.Tables(0).Rows.Count > 0 Then

        For Each dr As DataRow In ds.Tables(0).Rows
            Dim tr As New TableRow()

            'defining input
            Dim tc As New TableCell()
            tc.Text = "<input type=" & Chr(34) & "checkbox" & Chr(34) & " name=" & Chr(34) & "chkMeasuredChars" & Chr(34) & " value=" & Chr(34) & dr("id") & Chr(34) & "/>" & dr("description")

            'defining unique textbox
            Dim txtbx As New TextBox()
            txtbx.ID = "tbMeasuredChars" & dr("id")
            'add it to the cell
            tc.Controls.Add(txtbx)

            'add the cell to the row
            tr.Controls.Add(tc)

            tblMeasuredChar.Rows.Add(tr)
        Next
    End If 
```

问题是只显示了我添加到 TableRow 的最后一个“东西”。我必须使用这种类型的输入，不可能使用一些 asp 复选框。是否可以将用户控件添加到已经有其他文本的 TableCell 中？

我已经尝试添加 TableCell 像*tr.Cells.Add(tc)*和其他一些组合，但结果仍然相同。将控件添加到单元格会使复选框（以及早期定义的所有内容）消失。

谢谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T19:38:03.293

您应该使用[`Literal`控件](http://msdn.microsoft.com/en-us/library/system.web.ui.literalcontrol.aspx?)，而不是使用`.Text`属性。像这样：

```
If ds.Tables(0).Rows.Count > 0 Then

    For Each dr As DataRow In ds.Tables(0).Rows
        Dim tr As New TableRow()

        'defining input
        Dim tc As New TableCell()
        tc.Controls.Add(New LiteralControl("<input type=" & Chr(34) & "checkbox" & Chr(34) & " name=" & Chr(34) & "chkMeasuredChars" & Chr(34) & " value=" & Chr(34) & dr("id") & Chr(34) & "/>" & dr("description")))

        'defining unique textbox
        Dim txtbx As New TextBox()
        txtbx.ID = "tbMeasuredChars" & dr("id")
        'add it to the cell
        tc.Controls.Add(txtbx)

        'add the cell to the row
        tr.Controls.Add(tc)

        tblMeasuredChar.Rows.Add(tr)
    Next
End If 
```

听起来这可以很好地满足您的需求，因为它不像普通的 ASP.NET serv 控件，它基本上只是静态 HTML 文本。从上面链接的文档中：

> ASP.NET 将不需要服务器端处理的所有 HTML 元素和可读文本编译到此类的实例中。例如，在其开始标记中不包含 runat="server" 属性/值对的 HTML 元素被编译为 LiteralControl 对象。

所以你的文本基本上已经被编译成文字控件了。我认为这只会解决您遇到的显示问题，同时使用`.Text`属性和`.Controls`集合。

# wordpress - Buddypress 添加更改头像链接

> ID：15205642
> 
> 赞同：0
> 
> 时间：2013-03-04T15:58:41.737
> 
> 标签：wordpress, buddypress

我已经允许用户以管理员身份在插件设置中上传头像。在用户个人资料编辑页面中，我没有看到更改头像链接，但我可以访问它`/members/myname/profile/change-avatar/`并且我可以毫无问题地上传头像。

我也编辑了`/wp-content/plugins/buddypress/bp-themes/bp-default/members/single/profile/edit.php`并尝试添加 `<a href="<?php echo bp_loggedin_user_domain() ?>profile/change-avatar">Change Avatar</a>`，但我在编辑个人资料页面中没有看到任何变化。

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-07T00:52:22.560

首先，您应该从创建 Buddypress 子主题开始。与 Wordpress 子主题类似，它们允许您自定义所需的内容，但是，当您更新 Buddypress 插件时，这些更改不会丢失。

有关这方面的信息，请参阅[构建 BP 默认主题的子主题](http://codex.buddypress.org/themes/building-a-buddypress-child-theme/)。

然后继续更新您的子主题文件，如果您仍然遇到同样的问题，请回到这里。

# ipad - “当前仪器不允许附加”仪器 4.5

> ID：15205644
> 
> 赞同：2
> 
> 时间：2013-03-04T15:58:43.167
> 
> 标签：ipad, ios6, mobile-safari, xcode4.5

我想将我的 iPad Safari 与安装了 Xcode 4.5.2 的 Instrument 4.5 连接起来。我正在从仪器文件菜单中选择分配 - >新建 - >为跟踪文档-ios -All -Allocations选择一个模板。当我选择设备并选择附加进行处理时，然后得到一个灰色的“当前仪器不允许附加”菜单项。

任何面临同样问题的人，有什么解决方案。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-08T15:20:43.230

我认为只有一些`Instruments`' 工具允许发布后附件。例如，“采样器”仪器允许它。

尝试仅将该乐器添加到空白模板中。您可以从“库”按钮添加它。看看是不是这样贴的。

# wix - RemotePayload：系统找不到类型为“”的文件“”

> ID：15205646
> 
> 赞同：3
> 
> 时间：2013-03-04T15:58:44.437
> 
> 标签：wix, burn

转向 WiX 3.6，我正在尝试利用刻录功能来简化所需部分的潜在下载/安装，例如特定的 VC++ 运行时。

我从一些“test.wxs”开始，见下文，这对于candle.exe来说是可以的：

```
$ candle test.wxs
Windows Installer Xml Compiler version 3.6.3303.0
Copyright (C) Outercurve Foundation. All rights reserved.

test.wxs 
```

但是 light.exe 对此感到窒息：

```
$ light test.wixobj -ext WixBalExtension
Windows Installer Xml Linker version 3.6.3303.0
Copyright (C) Outercurve Foundation. All rights reserved.

light.exe : error LGHT0103 : The system cannot find the file '' with type ''. 
```

有人可以帮助解决这个（相当神秘的）错误消息吗？

它似乎与 RemotePayload 有关，因为带有本地文件的修改版本可以正常工作。但是，如果需要，我想节省包大小并将下载保留在目标机器上。

“test.wxs”的完整内容是：

```
<?xml version="1.0" encoding="UTF-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
    <Bundle Version="1.0.0.0" 
            UpgradeCode="e349236d-6638-48c5-8d8b-db47682b9aeb">
        <BootstrapperApplicationRef Id="WixStandardBootstrapperApplication.RtfLicense" />
        <Chain>
            <!-- C++ Runtime -->
            <ExePackage Name="vcredist_x64.exe"
                        DownloadUrl="http://www.microsoft.com/en-us/download/confirmation.aspx?id=2092" >
                <RemotePayload CertificatePublicKey="F321408E7C51F8544B98E517D76A8334052E26E8" 
                               CertificateThumbprint="D57FAC60F1A8D34877AEB350E83F46F6EFC9E5F1" 
                               Description="Microsoft Visual C++ 2008 Redistributable Setup" 
                               Hash="13674C43652B941DAFD2049989AFCE63CB7C517B" 
                               ProductName="Microsoft Visual C++ 2008 Redistributable" 
                               Size="4961800" 
                               Version="9.0.30729.17" />
            </ExePackage>
        </Chain>
    </Bundle>
</Wix> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T07:25:55.810

我自己的问题的部分答案：如果我将属性 Compressed="no" 添加到 ExePackage 元素，错误消息就会消失。

关于“压缩”属性的文档说：*“包有效负载应该嵌入容器中还是作为外部有效负载保留”*，其值可以是“是”、“否”或“默认”。

使用“是”或“默认”会触发错误消息。使用“否”不会。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-18T18:17:03.227

我在使用另一个包（.NET 框架）和 Wix 3.7 时遇到了同样的问题。我使用 Wix 源代码找到合适的包名称和注册表项进行测试，然后将相关位粘贴到我的安装程序中。然后，我故意设置 'Compressed="yes"' 因为我想将文件嵌入到我的安装程序中，而不是下载它。

在[此邮件列表线程](http://www.mail-archive.com/wix-users@lists.sourceforge.net/msg57301.html)中发布了与您类似的报告：

> > > Benjamin Mayrargue：如果一个 ExePackage 有一个 DownloadUrl 并且 Compressed 设置为 yes，则灯失败并出现错误 LGHT0103：系统找不到类型为 '' 的文件 ''。
> > 
> > Markus Wehrle：好的，我明白了。如果您想将 ExePackage 压缩到 bootstrapper.exe (compressed="yes") 中，您需要使用“Source”属性指定它。因为它会在编译期间被压缩到你的 boostrapper 中，所以你不能声明一个 DownloadUrl。如果您指定compressed="no"，您的ExePackage 会在安装boostrapper 期间从DownloadUrl 下载。
> 
> Rob Mensching：更具体地说，您不能在 ExePackage 元素上同时使用 RemotePayload 元素和 Compressed='yes'。这没有意义，这里的错误是编译器没有在这里给你一条错误消息。

所以是的，您已经正确地确定了问题的相同解决方法。

顺便说一句，该[`Compressed`](http://wix.sourceforge.net/manual-wix3/wix_xsd_exepackage.htm)属性指定“包有效负载应嵌入容器中还是作为外部有效负载保留”。该外部负载可以是`RemotePayload`磁盘上的一个文件或另一个文件，但典型的设置是单个引导加载程序，其中嵌入了所有资源。

使用`yes`Compression 属性将允许安装您的应用程序和 VC++ 运行时，即使用户的 Internet 连接速度较慢或不存在。从您的安装程序中删除`DownloadUrl`and `RemotePayload`，并将它们替换为`Compressed="yes"`如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
  <Bundle Version="1.0.0.0"
          UpgradeCode="e349236d-6638-48c5-8d8b-db47682b9aeb">
    <BootstrapperApplicationRef Id="WixStandardBootstrapperApplication.RtfLicense" />
    <Chain>
      <!-- C++ Runtime -->
      <ExePackage Name="vcredist_x64.exe"
                  Compressed="yes">
      </ExePackage>
    </Chain>
  </Bundle>
</Wix> 
```

然后下载 vcredist_x64.exe 文件（您自己下载一次）并将其放在您的 test.wxs 文件旁边。如果您希望它位于不同的位置，请调整“名称”。请注意，这会将生成的引导程序的大小增加大约 vcredist_x64.exe 的大小，因此如果您的用户将下载您的安装程序，这不是一个好主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-22T02:58:32.463

在我的情况下，由于文件名/目录路径超过 255 个字符而引发了错误。该文件存在但编译器声明该文件不存在。

# php - 显示日期的 SQL 语法

> ID：15205649
> 
> 赞同：0
> 
> 时间：2013-03-04T15:58:52.430
> 
> 标签：php, sql

我试图让我的文章获取它有多少评论，并显示数量。这是代码：

```
<?php
$amount_get = mysql_query("SELECT * FROM comment WHERE id='" . mysql_real_escape_string($_GET['articleid']) . "'"); 
$comments = mysql_num_rows($amount_get);

$grab = mysql_query("SELECT id, news_title, news_content, news_date, news_author FROM articles ORDER BY id DESC LIMIT 5");

while($row = mysql_fetch_array($grab)){
?>

<div class="pane">
    <li>               
        <h2><?php echo $row['news_title'] ?></h2>
        <div class="meta">
            <span class="color"> &bull; </span>
            <?php echo $row['news_date'] ?>
            <span class="color"> &bull; </span>
          </div>

          Comments: <?php echo $comments ?> 
```

但由于某种原因，它保持在“0”。这是它的样子：![在此处输入图像描述](../Images/2c4d0a2b765a05119bcb1a8393650185.png)

我的列是 id、articleid、name、comment、date & ip。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:01:50.273

您的 where 子句正在寻找 id = articleid。

你想要的是articleid = articleid。

```
$amount_get = mysql_query("SELECT * FROM comment WHERE articleid='" . mysql_real_escape_string($_GET['articleid']) . "'"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T16:05:14.767

看起来 SQL 有问题。检查您的 articleid GET 变量。它也不应该对每篇文章的评论进行不同的查询和 mysql_num_rows，因为每篇文章可能包含不同数量的评论。

尝试这个：

```
SELECT 
  articles.id, news_title, news_content, news_date, news_author 
  (SELECT COUNT(*) FROM comment WHERE comment.id=articles.id) as comments
FROM articles 
ORDER BY id DESC LIMIT 5 
```

这将为您提供前 5 篇文章及其相关评论计数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T16:07:37.253

您可以只使用一个查询。

```
$grab = mysql_query(
"SELECT a.id, a.news_title, a.news_content, a.news_date, a.news_author, count(*) as comment_count
FROM articles a 
LEFT JOIN comment c ON c.articleid = a.id 
ORDER BY a.id DESC LIMIT 5 GROUP BY a.id"); 
```

然后代替

```
Comments: <?php echo $comments ?> 
```

做：

```
Comments: <?php echo $row['comment_count']; ?> 
```

让我知道查询是否有效，我不确定 Group by 是否正确放置在那里。

# javascript - 如何从浏览器中获取历史记录等信息并将它们放置在 div 元素中

> ID：15205651
> 
> 赞同：0
> 
> 时间：2013-03-04T15:59:03.483
> 
> 标签：javascript, jquery, html, css

我是编程新手。我想知道是否可以获得我们通常在浏览器中添加的收藏夹或历史记录。

示例：假设我想在 div 元素中显示我在浏览器中拥有的收藏夹作为网站或 url 的链接。或者，也许我想获取 youtube 的视频缩略图并将其显示在 div 中。

如果不是这种情况下最常用的语言，是否可以使用 javascript 来做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T16:08:46.827

如果这样的事情是可能的，我很确定它会被利用来侵犯左右和中心的用户隐私。

您可以使用 JavaScript`window.history`函数自动从页面前后导航或导航到历史记录的特定部分，但这仅限于用户打开的当前选项卡或浏览器窗口（如果不支持选项卡）。

请参阅[https://developer.mozilla.org/en/docs/DOM/Manipulating_the_browser_history](https://developer.mozilla.org/en/docs/DOM/Manipulating_the_browser_history)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T16:02:56.593

这是不可能的。也许如果你写一个浏览器相关的插件、扩展或插件，不管他们怎么称呼它。

**铬：http:** [//developer.chrome.com/extensions/bookmarks.html](http://developer.chrome.com/extensions/bookmarks.html)

**火狐：** [https ://developer.mozilla.org/en-US/docs/Places_Developer_Guide#Identifying_Items_in_the_Bookmark_System](https://developer.mozilla.org/en-US/docs/Places_Developer_Guide#Identifying_Items_in_the_Bookmark_System)

# sql - Postgres 列链接

> ID：15205656
> 
> 赞同：0
> 
> 时间：2013-03-04T15:59:12.393
> 
> 标签：sql, postgresql, triggers, constraints

**上下文**：PostgreSQL 数据库，带有一个`steps`包含列`subtype`和`type`（整数）的表

**需要**：如果在新记录插入时列值不等于“4”，则将列值设置`subtype`为 NULL 。`type`

这样做的好方法？约束？扳机 ？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T07:48:34.653

首先要做的是添加一个约束：

```
CHECK (type = 4 OR subtype IS NULL) -- if type is 4, sub type may or may not be null
                                    -- if type is not 4, sub type must be null 
```

然后，如果您需要，您可以编写一个简单的触发器来设置它，但总的来说，如果有必要，您最好在必要时引发应用程序错误，而不是使用触发器，因为通知应用程序它将得到的不是它保存的通常是一个好的事物。

# spring - 应用程序在启动时未正确初始化，找不到工厂：javax.faces.context.FacesContextFactory

> ID：15205667
> 
> 赞同：1
> 
> 时间：2013-03-04T15:59:42.113
> 
> 标签：spring, jsf-2, richfaces, spring-webflow

嗨，我有一个使用 myfaces 2.1.10 运行的 spring richfaces 项目，但我想更改为 Mojarra 2.1.19，但应用程序给了我错误：

```
SEVERE [javax.faces] (MSC service thread 1-4) Application was not properly initialized at startup, could not find Factory: javax.faces.context.FacesContextFactory. Attempting to find backup.
ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/projvehimerc]] (MSC service thread 1-4) StandardWrapper.Throwable: java.lang.IllegalStateException: Could not find backup for factory javax.faces.context.FacesContextFactory. 
```

我想使用 jboss-jsf-api_2.1_spec，我的 pom.xml：

```
<properties>
    <!-- [WARNING] Using platform encoding (UTF-8 actually) to copy filtered resources, i.e. build is platform dependent! -->
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <spring.version>3.1.3.RELEASE</spring.version>
    <hibernate.version>4.1.8.Final</hibernate.version>
    <org.richfaces.bom.version>4.3.0.Final</org.richfaces.bom.version>
    <spring.security.version>3.1.3.RELEASE</spring.security.version>
</properties>
<dependencyManagement>
    <dependencies>
        <dependency>
            <groupId>org.richfaces</groupId>
            <artifactId>richfaces-bom</artifactId>
            <version>${org.richfaces.bom.version}</version>
            <scope>import</scope>
            <type>pom</type>
        </dependency>
        <dependency>
            <groupId>org.jboss.spec.javax.faces</groupId>
            <artifactId>jboss-jsf-api_2.1_spec</artifactId>
            <version>2.1.19.Final</version>
        </dependency>
        <dependency>
            <groupId>org.jboss.spec.javax.servlet</groupId>
            <artifactId>jboss-servlet-api_3.0_spec</artifactId>
            <version>1.0.2.Final</version>
        </dependency>
    </dependencies> 
```

我的 web.xml，3.0 版：

```
 <?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" 
 xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" version="3.0">

<display-name>richfaces-application</display-name>
<!-- Listener para crear el Spring Container compartido por todos los 
Servlets y Filters (WebApplication Context)-->
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
        classpath*:META-INF/spring/spring-master.xml
        WEB-INF/spring/spring-security.xml
    </param-value>
</context-param>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
<!-- For JSF -->
    <listener>
        <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
    </listener>

<!-- Jboss not use it bundle integrated JSF -->
    <context-param>
        <param-name>org.jboss.jbossfaces.WAR_BUNDLES_JSF_IMPL</param-name>
        <param-value>true</param-value>
    </context-param>

<!-- Spring JavaServiceFaces framework ApacheMyfaces  
    <listener>
        <listener-class>org.apache.myfaces.webapp.StartupServletContextListener</listener-class>
    </listener>

-->
<!-- Spring Security, for all -->
    <filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>springSecurityFilterChain</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

<!-- RichFaces Framework -->
    <!-- For control of skins -->
    <context-param>
        <param-name>org.richfaces.enableControlSkinning</param-name>
        <param-value>true</param-value>
    </context-param>

     <context-param>
         <param-name>org.richfaces.skin</param-name>
         <param-value>blueSky</param-value>
     </context-param>

<!-- Servlet for Dispatcher of flows -->
<servlet>
    <servlet-name>transportes</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>WEB-INF/spring/transportes-servlet.xml</param-value>
    </init-param>
     <load-on-startup>1</load-on-startup> 
</servlet>
<servlet-mapping>
        <servlet-name>transportes</servlet-name>
        <url-pattern>/flows/*</url-pattern>
</servlet-mapping>

<!-- Servlets for JSF-->
    <servlet>
        <servlet-name>faces</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>faces</servlet-name>
        <!--  <url-pattern>*.xhtml</url-pattern> -->
        <url-pattern>/faces/*</url-pattern>
    </servlet-mapping>
    <!-- Use JSF view templates saved as *.xhtml, for use with Facelets -->
    <context-param>
        <param-name>javax.faces.DEFAULT_SUFFIX</param-name>
        <param-value>.xhtml</param-value>
    </context-param>

<!-- Set the PROJECT_STAGE to 'Development' to receive constructive error messages during development.
Change the PROJECT_STAGE to 'Production' when putting the application into production -->
    <context-param>
        <param-name>javax.faces.PROJECT_STAGE</param-name>
        <param-value>Development</param-value>
    </context-param>
<!-- Page That control SpringWeb -->
    <welcome-file-list>
        <welcome-file>index.jsf</welcome-file>
    </welcome-file-list>
</web-app> 
```

缺少什么？，谢谢。

# c# - 将第三方 DLL 打包到 Windows 服务中

> ID：15205668
> 
> 赞同：0
> 
> 时间：2013-03-04T15:59:49.817
> 
> 标签：c#, windows, dll, service, installation

我正在为我的大学编写一个 Windows 服务，并且我正在使用一个第三方库来帮助安排日程。如何将此 DLL 打包到我的服务中，以便只需要在服务器上部署和安装 .exe 文件？我不希望每次都将 DLL 复制到与 .exe 相同的目录中。谢谢！

# hibernate - 自定义实体映射是否能够配置父属性？

> ID：15205669
> 
> 赞同：0
> 
> 时间：2013-03-04T15:59:50.477
> 
> 标签：hibernate, jakarta-ee, orm, persistence

我正在开发一个提供生成模型的框架。这个模型从这个框架扩展了一个类。

```
// Framework
Class Parent {
 private short version;
}

// Generated
Class Child extends Parent {
 private <type> attribute;
} 
```

我想允许用户激活提供自定义实体映射的乐观锁定。*custom-orm-psql.xml*通过*persistence.xml*链接。

```
<entity class="package.Child" metadata-complete="false">
    <attributes>
        <version name="version" />
    </attributes>
</entity> 
```

我可以因为无法激活乐观锁定而更改父属性映射吗？它正在使用`@Version`属性上的注释`version`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T01:33:03.593

是的，您可以更改映射的父类定义。确保 Parent 类上面有注释 @MappedSuperclass 。那么子类可以继承父类的所有映射信息。

# jquery - 数据表内联编辑

> ID：15205675
> 
> 赞同：1
> 
> 时间：2013-03-04T16:00:10.870
> 
> 标签：jquery, jquery-datatables

如何对单个页面上的多个表使用内联编辑？我正在生成带有循环的表，每个表都有不同的 id 和相同的类。当我将数据表和 makeEditable 函数与表类绑定时，我只使用第一个表进行内联编辑。如果我在 jquery 的每个循环中使用表 ID，它会给我一个警告。如何解决这个问题？

# sql - WHERE 过滤何时发生？

> ID：15205676
> 
> 赞同：9
> 
> 时间：2013-03-04T16:00:22.917
> 
> 标签：sql, sql-server

如果我有这样的查询：

```
SELECT
    A.ID,
    A.Name,
    A.Type,
    B.FirstName,
    B.LastName,
    B.DateOfBirth,
    C.OfficeName
FROM A
    INNER JOIN B ON A.ContactID = B.ID
    INNER JOIN C ON B.OfficeID = C.ID
WHERE
    A.Type = 1 
```

何时应用 A.Type = 1 过滤器？是在连接之后，还是查询查找“A”，确定它是否通过过滤器，如果通过，则只连接到 B 和 C？

希望这是有道理的。谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-04T16:11:09.733

首先，以下是 SQL 操作顺序：

*   FROM 子句
*   WHERE 子句
*   GROUP BY 子句
*   HAVING 子句
*   选择子句
*   ORDER BY 子句

在一个简单的查询中，过滤发生在`FROM`子句之后（*在这部分找到连接*）。您上面的查询所做的是主要将表与定义它们关系的链接列连接起来。设置记录后（*连接的结果*），`WHERE`然后执行子句以过滤掉`Type`is 等于 1 的位置。

* * *

这是另一个使用的例子`LEFT JOIN`，

第一个查询：

```
SELECT  A.ID,
        A.Name,
        A.Type,
        B.FirstName,
        B.LastName,
        B.DateOfBirth
FROM    A
        LEFT JOIN B 
            ON  A.ContactID = B.ID AND
                B.LastName = 'Michaels' 
```

与第二个查询：

```
SELECT  A.ID,
        A.Name,
        A.Type,
        B.FirstName,
        B.LastName,
        B.DateOfBirth
FROM    A
        LEFT JOIN B ON  A.ContactID = B.ID
WHERE   B.LastName = 'Michaels' 
```

第一个查询返回 table 中的所有记录`A`。什么`B.LastName = 'Michaels'`是在表`B`将与表连接之前`A`，它会过滤掉所有`LastName`等于的记录`Michaels`。因此，`A`在 Table 上的过滤记录上没有匹配的 table 中的记录将在 Table的列上`B`具有*NULL*`B`值。

第二个查询将不会产生与第一个查询相同的结果，并且执行完全相同的结果，`INNER JOIN`因为在连接记录后，将对结果执行另一个过滤，并且只获取`LastName`等于*Michaels*的记录。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-04T16:03:24.963

逻辑上——在`join`s 之后，物理上——取决于优化器。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-04T16:10:22.367

根据[MSDN](http://msdn.microsoft.com/en-us/library/ms189499.aspx)。
检查标题**为 SELECT 语句的逻辑处理顺序的部分**

> 1.  从
> 2.  在
> 3.  加入
> 4.  在哪里
> 5.  通过...分组
> 6.  WITH CUBE 或 WITH ROLLUP
> 7.  拥有
> 8.  选择
> 9.  清楚的
> 10.  订购方式
> 11.  最佳

在此列表之前的段落末尾有一个重要说明。

> 请注意，语句的实际物理执行由查询处理器确定，并且顺序可能与此列表不同。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-04T16:06:54.687

要回答这个问题，您确实需要查看执行计划。在您提到的情况下，在 where 子句中有可搜索参数（SARG）的情况下，过滤器很可能会在连接之前与您的访问方法一起应用，即索引、表扫描等。

采用

> 查询菜单 -> 包括实际执行计划

或者

> 查询菜单 -> 显示预计执行计划

去看一眼。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-04T16:12:14.910

Where 子句将在连接之前应用，即它将返回 A 的所有行以及 B 和 C 中的相应行取决于连接条件和类型 = 1

# javascript - iOS Web 应用程序 - 仅在添加到主屏幕时才显示内容？

> ID：15205680
> 
> 赞同：3
> 
> 时间：2013-03-04T16:00:33.227
> 
> 标签：javascript, ios, web-applications

我以前见过对此的“解决方案”，但有一个重大缺陷！

这就是我想要实现的目标；

我有一个需要用户登录才能使用的网络应用程序。出于各种原因，我不希望它仅通过主屏幕在常规 Safari 中使用（从美学上讲，它仅在全屏时才真正“起作用”）。

因此，当用户浏览该站点时，它应该检测它是通过主屏幕（在这种情况下显示登录页面）还是常规 safari（在这种情况下显示一个启动屏幕，邀请查看者将其添加到他们的主屏幕）。

我可以成功检测到它是通过主屏幕打开还是现在（使用 window.navigator.standalone）打开，但是我遇到的所有解决方案都涉及将用户重定向到另一个页面，如果它没有通过主屏幕打开。这样做的问题是用户将书签（或添加到主屏幕）错误的页面。据我所知，没有办法指定要添加到主屏幕的不同页面。

我尝试了以下方法，但似乎不起作用；

```
/* Added to login page head */
$(document).ready()
        if (window.navigator.userAgent.indexOf('iPhone') != -1) {
            if (window.navigator.standalone == true) {
                initialize();
            }else{
                $('.container').load('/install.cfm')
            }
        }else{
            $('.container').load('/install.cfm')
        } 
```

编辑：根据@scunliffe 的评论，我现在尝试了以下方法，这也不起作用（在脚本执行之前加载了jQuery，所以这不应该是问题）；

```
if (window.navigator.userAgent.indexOf('iPhone') != -1) {
            if (window.navigator.standalone == true) {
                $('#logindiv').show;
            }else{
                $('#installdiv').show;
            }
        }else{
            $('#installdiv').show;
        } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-04T16:15:19.610

你能改变你的逻辑，让登录页面成为默认页面，但如果用户在 iphone/iOS 设备上？如果**不**独立运行，他们会收到一条消息吗？

```
$(document).ready(function(){
    if(navigator.userAgent.indexOf('iPhone') != -1){//test for other iOS devices?
        if(window.navigator.standalone == true){
            //do stuff!
            initialize();
        } else {
            //show message telling user to add to their home screen...
        }
    } else {
        //show message that this must be run on device X/Y/Z...
    }
}); 
```

**更新：**

根据您更新的示例，您只需修改代码以将显示/隐藏作为方法调用。

```
$(document).ready(function(){
  if(window.navigator.userAgent.indexOf('iPhone') != -1){
    if(window.navigator.standalone == true){
      $('#logindiv').show();
    } else {
        $('#installdiv').show();
    }
  } else {
    $('#installdiv').show();
  }
}); 
```

和

```
<div id="logindiv">
  ...stuff to login here...
</div>
<div id="installdiv">
  ...note to install here...
</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T19:02:24.460

您可以尝试`hash-trick`“添加到主屏幕”中使用的示例，这里是[示例](https://github.com/cubiq/add-to-homescreen/blob/master/examples/hash-trick/index.html)

基本上，它会检查 URL 末尾是否有哈希，如果有，则表示它已添加到主屏幕，如果没有，则它可以运行脚本，然后将哈希添加到 URL。因此，当他们将链接添加到主屏幕时，下次他们打开 Web 应用程序时，屏幕上就会显示哈希值。这是一种混乱的方式，但它确实有效。

# c - 作为 printf 中的格式说明符，“%.*s”是什么意思？

> ID：15205685
> 
> 赞同：3
> 
> 时间：2013-03-04T16:00:41.023
> 
> 标签：c

谁能告诉我这是什么意思：`"%.*s"`

例如，它在这里使用：

```
 sprintf(outv->deliveryAddressCity, 
          "%.*s",
          sizeof(outv->deliveryAddressCity)-1,
          mi->deliveryAddressCity); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-04T16:02:36.490

`%.*s`表示*从以下缓冲区打印前 X 个字符*。在这种情况下，从 打印第一个`sizeof(outv->deliveryAddressCity) - 1`字符`mi->deliveryAddressCity`，防止超出 的范围`outv->deliveryAddressCity`。

一个更短的例子：

```
printf("%.*s", 4, "hello world"); 
```

会打印`hell`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T16:03:34.517

也许你可以通过这个例子得到它：

```
printf("%.*s", 3, "abcdef"); 
```

打印“abc”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-04T16:04:02.933

[`.*`精度未在格式字符串中指定，而是作为必须格式化的参数之前的附加整数值参数。](http://www.cplusplus.com/reference/cstdio/printf/)

所以在你的情况下，字符串的大小是`sizeof(outv->deliveryAddressCity )-1`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-04T16:05:15.243

宽度和精度格式参数可以省略，或者它们可以是嵌入格式字符串中的固定数字，或者在格式字符串中由星号“*”指示时作为另一个函数参数传递。例如 printf("%*d", 5, 10) 将导致打印 "10"，总宽度为 5 个字符，而 printf("%.*s", 3, "abcdef") 将导致“abc”正在打印。

（在搜索引擎上很容易找到它......）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-04T16:06:49.993

当您有一个非空终止的字符串并且长度存储在其他地方时，它最常使用。

例如：

```
{
    char* regular_string = "Hello World";  // This string has a null-Terminator.

    char untermed_string[11];
    int len;

    // Specifically make untermed string so it is NOT null-terminated.
    memcpy(untermed_string, regular_string, 11);
    len = 11;

    printf("The string is %.*s\n", len, untermed_string); // This will still print the proper data!
    printf("The start of the string is %.*s\n", 5, untermed_string); // This will only print "Hello".
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-04T16:03:10.197

这是一个格式说明符，它从堆栈中获取 2 个值，第一个是大小，第二个是值。

.-notation：atleast-length.maxlength（所以“.*”表示：最大 * 个字符）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-04T16:15:15.967

它可以帮助您打印字符串的一部分。您可以指定打印字符串的长度。示例：printf("%.*s", 5,,"rahul subedi") 输出：rahul

# java - 是否可以在两个或多个不同的端口上运行相同的 tomcat？

> ID：15205686
> 
> 赞同：-1
> 
> 时间：2013-03-04T16:00:44.760
> 
> 标签：java, tomcat

单个tomcat实例可以在两个不同的端口上运行吗？例如说我只有一个 tomcat 在运行，那么我可以在浏览器中输入 localhost:8080 和 localhost:8181 并让它工作吗？

如果是，请告诉我程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:02:48.797

一个更好的解决方案是一个额外的网络服务器，比如重定向到 tomcat 服务器的 apache。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T16:04:22.193

您可以编辑 server.xml 以创建其他连接器元素：

```
<Connector port="8081"
maxThreads="150" minSpareThreads="25" maxSpareThreads="75"
enableLookups="false" redirectPort="8443" acceptCount="100"
debug="0" connectionTimeout="20000"
disableUploadTimeout="true" /> 
```

例如。

不过，我可能倾向于通过 NAT 或负载均衡器来解决这个问题。

# device-driver - WDF 安装程序问题

> ID：15205691
> 
> 赞同：0
> 
> 时间：2013-03-04T16:00:58.737
> 
> 标签：device-driver, kmdf, wdf

我在运行 KMDF 1.5 的 32 位 Vista 机器上安装 KMDF 1.9 驱动程序时遇到问题。我希望 coinstaller 应该将 Vista 机器更新到 KMDF 1.9。但事实并非如此。

我错过了什么？

```
[Version]
Signature = "$WINDOWS NT$"
Class = MYDevice
ClassGuid = {xxxxxxxx-yyyy-zzzz-cccc-dddddddddddd}
Provider = %MyCompany%
DriverVer = 03/04/2013,1.0.0.0
CatalogFile = mydevice.cat

; =================== Class section ===================
[ClassInstall32]
Addreg = MydeviceClassReg     

[MydeviceClassReg]
HKR,,,0,%ClassName%
HKR,,Icon,,-5

[DestinationDirs]
DefaultDestDir = 12

; ================== Device section ===================
[Manufacturer]
%MyCompany% = MyCompany,NTx86,NTamd64

[MyCompany.NTx86]
%DeviceDesc% = mydevice, USB\VID_xxxx&PID_yyyy&REV_zzzz&MI_aa

[MyCompany.NTamd64]
%DeviceDesc% = mydevice, USB\VID_xxxx&PID_yyyy&REV_zzzz&MI_aa

[mydevice]
CopyFiles = mydevice.Files

[mydevice.Files]
mydevice.sys

[SourceDisksNames.x86]
1 = %Disk_Description%,,,\x86

[SourceDisksNames.amd64]
1 = %Disk_Description%,,,\amd64

[SourceDisksFiles]
mydevice.sys  = 1,,

[mydevice.Services]
Addservice = mydevice, 0x00000002, mydevice.AddService

[mydevice.AddService]
DisplayName    = %ClassName%
ServiceType    = 1  ; SERVICE_KERNEL_DRIVER
StartType      = 3  ; SERVICE_DEMAND_START
ErrorControl   = 1  ; SERVICE_ERROR_NORMAL
ServiceBinary  = %12%\mydevice.sys

; =========== WDF Coinstaller installation =============
[DestinationDirs]
CoInstallers_CopyFiles = 11

[mydevice.Dev.NT.Coninstallers]
Addreg = Coinstaller_Addreg
CopyFiles = CoInstallers_CopyFiles

[CoInstallers_CopyFiles]
winusbcoinstaller2.dll
WdfCoInstaller01009.dll

[SourceDisksFiles.NTx86]
winusbcoinstaller2.dll = 1
WdfCoInstaller01009.dll = 1

[SourceDisksFiles.NTamd64]
winusbcoinstaller2.dll = 2
WdfCoInstaller01009.dll = 2

[CoInstallers_AddReg]
HKR,,CoInstallers32,0x00010000,"winusbcoinstaller2.dll","WdfCoInstaller01009.dll"

[mydevice.Wdf]
KmdfService = mydevice, mydevice_wdfsect

[mydevice_wdfsect]
KmdfLibraryVersion = 1.9

; ======================= Strings ======================
[Strings]
MyCompany        = "MyCompany"
Disk_Description = "My Device Installation Disk"
ClassName        = "MYDEV"
DeviceDesc       = "My Device" 
```

setupapi.dev.log 说：

```
!!!  dvi: Device not started: Device has problem: 0x27: CM_PROB_DRIVER_FAILED_LOAD. 
```

在已经获得 KMDF 1.9 的 Win7 上一切正常

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T17:37:55.607

这不是共安装程序的问题。您的日志告诉您设备无法启动。安装本身在此之前完成。调试您的驱动程序。

# .net - 上下文不包含 ExecuteStoreCommand 的定义

> ID：15205692
> 
> 赞同：0
> 
> 时间：2013-03-04T16:01:02.390
> 
> 标签：.net, entity-framework, entity-framework-4, entity-framework-5

我正在尝试对我的数据模型执行查询，`context.ExecuteStoreCommand`但我不断收到错误消息：

```
<object context> does not contain a definition for 'ExecuteStoreCommand' ... 
```

我以前在一个旧项目中使用过它，但我看不到我缺少什么。我有对 EntityFramework、System.Data、System.Data.Entity 的项目引用。[MSDN 文档](http://msdn.microsoft.com/en-GB/library/system.data.objects.objectcontext.executestorecommand.aspx)说 ObjectContext 是 System.Data.Object的一部分，但我不能直接引用它，也不需要在我以前使用过它的地方引用它。我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T16:01:02.390

回答我自己的问题：

我最初使用 ExecuteStoreCommand 的代码位于 EF4 项目中，其中代码生成策略设置为“默认”，这会导致创建 ObjectContext。读到[这里](https://stackoverflow.com/a/12654180/543538)，似乎 VS2012 上的 EF5 默认为数据模型创建了一个 DbContext。

我找到了解决这个问题的两种方法。

1 - 通过更改代码生成策略从 DbContext 更改为 ObjectContext。[这个问题](https://stackoverflow.com/questions/12082546/is-there-an-objectcontext-generator-for-entity-framework-5-0)显示了如何做到这一点。`<object context>.ExecuteStoreCommand()`然后就可以使用了。

2 - 对 DbContext 执行 SQL 命令，例如：

`<db context>.Database.SqlQuery(typeof(myTable), "SELECT * FROM myTable")`

# linux - Kbuild - 包括来自外部目录的源文件

> ID：15205693
> 
> 赞同：0
> 
> 时间：2013-03-04T16:01:04.713
> 
> 标签：linux, makefile, kbuild

我有一些源代码，我想用于内核模块和用户空间程序。我只想在我的源代码树中维护该代码的一个副本。我正在考虑将共享源文件放在共享文件夹中（内核树之外），让 kbuild 从外部目录构建这些文件，并在模块目录中生成 .o 文件。有没有使用 kbuild 包含来自外部目录的源文件的好方法？

我的目标目录看起来像这样：

```
+ linux
| + drivers
|   + foo
|     + Makefile
|     + foomain.c
|     + foomain.o
|     + shared.o
+ shared
| + shared.c
+ bar
  + Makefile
  + barmain.c
  + barmain.o
  + shared.o 
```

虽然可以将 shared.c 作为构建过程的一部分复制到 foo 目录中，但这似乎是一个丑陋的解决方案，我想知道是否有更好的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T03:12:42.807

我认为这是可能的。

在shared目录下创建一个Makefile，可以支持为内核模块foo构建shared.o和为用户空间应用bar构建shared.o。

这意味着要在 Makefile 中创建两个不同的构建目标，这两个目标可以具有相同的名称，但需要使用 KERNEL_BUILD 等宏来区分它们。

# c# - 如何在 Javascript 中附加到 COM 事件

> ID：15205700
> 
> 赞同：0
> 
> 时间：2013-03-04T16:01:19.240
> 
> 标签：c#, javascript, events, com

我已按照[此示例](http://www.codeproject.com/Articles/35532/C-COM-Object-for-Use-In-JavaScript-HTML-Including)创建要在 javascript 中使用的 COM 事件。但是，我不喜欢最终的附加代码？

```
<script for="myComComponent" event="MyFirstEvent(args)" language="javascript">
    function myComComponent::MyFirstEvent(args) {
        alert('event');
    }
</script> 
```

我想要的是能够做一些更像

```
//in the onload
myComComponent.MyFirstEvent = myJavascriptHandler;

//function setup
function myJavascript(args){
    alert('event');
} 
```

这适用于使用 的旧 C++ COM 事件`IDispatch`，但不适用于新的 C# 代码。有没有办法将事件挂钩`onLoad`？我只是想避免将 javascript 放在 HTML 中...

编辑：

我试过

```
myComComponent.addEventListener("MyFirstEvent", myJavascriptHandler, true); 
```

这应该与点表示法相同，这会引发不支持该事件的异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T16:12:56.803

我们这样做：

```
myComComponent.attachEvent("MyFirstEvent", myJavascriptHandler); 
```

这很有效，无需将代码放在 HTML 中，而且相当干净。

# ios - 使用 Appledocs 生成文档

> ID：15205704
> 
> 赞同：8
> 
> 时间：2013-03-04T16:01:24.663
> 
> 标签：ios, objective-c, xcode, documentation-generation, code-documentation

我为我的问题的简单性道歉，但我试图使用 Appledocs 生成文档（[https://github.com/tomaz/appledoc#quick-install](https://github.com/tomaz/appledoc#quick-install)）

我不确定如何设置它。我这样做的方式是：

*   我克隆了 github 存储库，然后在终端中使用安装脚本*（我使用 appledocs --help 确认这一点）*安装了 appledocs 。

但是，现在我如何实际使用它，因为我在 xcode 中有我的项目：

*   如何生成文档文件
*   它是在哪里生成的？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-04T16:08:58.750

我一直在做的就是在我的项目中添加一个可以生成文档的新目标。您可以转到您的项目构建阶段并单击“添加目标”。在 Other 下选择 Aggregate 并为其命名（例如 ProjectDocumentation）。

仍然在构建阶段选项卡上，转到“添加构建阶段”并单击“添加运行脚本”。您现在可以粘贴以下内容并将其调整为您自己的设置：

```
/usr/local/bin/appledoc \
--project-name HereProjectName \
--project-company "HereProjectCompany" \
--company-id com.companyName \
--keep-undocumented-objects \
--keep-undocumented-members \
--search-undocumented-doc \
--exit-threshold 2 \
--ignore .m \
--output "AppleDoc" . 
```

我使用忽略 *.m 因为我只在我的头文件中编写文档。我的 *.m 文件中的文档仅供我自己使用（因此是私人的）。当您构建此目标时，文档将生成为 XCode 文档集。这可以通过 alt 键单击类名来访问。查看[AppleDoc 网站](http://gentlebytes.com/appledoc-docs-comments/)以获取注释语法。

有关命令行选项的说明，请查看 appledoc --help 命令。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T17:29:00.290

例如，像这样，它是一个有效的标头，其中包含最新 Appledoc 的源代码文档。

```
//
//  GSUserDefaults.h
//
//  Created by Gabor Szabo on 30/01/2013.
//
//

#import <Foundation/Foundation.h>

/*!
 @discussion This class manages the user defaults on the device with some extra convenient methods.

 ## Version information

 __Version__: 1.0

 __Found__: 2013-01-30

 __Last update__: 2013-01-30

 __Developer__: Gabor Szabo, TMTI Ltd.

 */

#pragma mark - Interface

@interface GSUserDefaults : NSObject {

}

#pragma mark - Class Methods

#pragma mark - Getters

/// @name Getter methods

/*!
 @abstract Returns the value for the key.
 @discussion It reads the values from the `NSUserDefaults`.
 @param key The key, it must be not `nil`.
 @return The value object for the key.
 @exception NSException Thrown when the key is `nil`.
 @since 1.0+
 */
+ (id)valueForKey:(NSString *)key;

/*!
 @abstract Returns a value collection for the keys.
 @discussion It reads the values from the `NSUserDefaults`.
 @param keys The set of keys, which are affected.
 @return The value collection for the desired keys.
 @exception NSException Thrown when the key is `nil`.
 @since 1.0+
 */
+ (NSDictionary *)valuesForKeys:(NSSet *)keys;

#pragma mark - Setters

/// @name Setter methods

/*!
 @abstract Sets a value for the selected key.
 @discussion The value always will be overridden. It sets the value to the `NSUserDefaults`.
 @param value The value object, it can be `nil`, in case of `nil` the key will be removed from the `NSUserDefaults`.
 @param key The key for the value, it cannot be `nil`.
 @exception NSException Thrown when the key is `nil`.
 @since 1.0+
 */
+ (void)setValue:(id)value forKey:(NSString *)key;

/*!
 @abstract Sets `nil` values for the selected keys.
 @discussion The value always will be overridden. It removs the from the `NSUserDefaults`.
 @param keys The set of keys, which are affected.
 @since 1.0+
 */
+ (void)setNilValueForKeys:(NSSet *)keys;

/*!
 @abstract Sets a default value for the selected keys.
 @discussion It the key already exists, it won't be overridden, if the value was `nil` for the key, the key gets the value. It sets the values to the `NSUserDefaults`.
 @param defaultValue The value object, it could be `nil`, in case of the `nil` just nothing will happen, the keys won't be removed.
 @param keys The set of keys, which are affected.
 @since 1.0+
 */
+ (void)setDefaultValue:(id)defaultValue forKeys:(NSSet *)keys;

/*!
 @abstract Sets the value for the selected keys.
 @discussion The values always will be overridden, if the value was `nil` for the key, the key gets the value. It sets the values to the `NSUserDefaults`.
 @param value The value object, it can be `nil`, in case of `nil` the key will be removed from the `NSUserDefaults`.
 @param keys The set of keys, which are affected.
 @since 1.0+
 */
+ (void)setValue:(id)value forKeys:(NSSet *)keys;

@end 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-04T16:10:45.193

推荐的方法是`clone GitHub project and compile the tool from Xcod`e。由于克隆 GitHub 项目将创建到主存储库的链接，它也大大简化了未来的升级。要安装，请在终端中键入以下内容：

```
git clone git://github.com/tomaz/appledoc.git 
```

这将创建 appledoc 目录。您可以在其中找到 appledoc.xcodeproj Xcode 项目；打开它并编译 appledoc 目标 - 这应该是开箱即用的，但是您的系统必须满足最低系统要求，见下文。我建议您将生成的 appledoc 可执行文件从构建目录复制到路径中的目录之一 (echo $PATH) 以使其易于访问。

可选：Appledoc 是独立的，包含必要的模板文件。如果您想将这些默认值从 Templates 子目录修改为预期位置之一：

```
~/Library/Application Support/appledoc
~/.appledoc 
```

欲了解更多信息，[请访问](https://github.com/tomaz/appledoc)

# objective-c - 尝试将 NSString 解析为 NSDate 时出错

> ID：15205705
> 
> 赞同：2
> 
> 时间：2013-03-04T16:01:24.637
> 
> 标签：objective-c

我完全是新手，所以如果我在这里做了一些可怕的事情，请原谅我。

我试图以我在示例中指定的格式获取用户生日，但在该`scanf`部分中出现错误： `format specified type char * but the argument has type NSString`

我该如何解决？这是我的代码：

```
 int main(int argc, const char * argv[])
{

    @autoreleasepool {

        NSString *input;

        NSLog(@"Please enter your birthday, for example: 09-01-1984");

        scanf("%s", &input);

        NSDate *today = [NSDate date];

        NSDate *bDay = [NSDate dateWithNaturalLanguageString:input];

        NSLog(@"%lu", [bDay elapsedDays:today]);

    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T16:04:21.200

`sscanf()`是 C 库`NSString`的一部分，也是 Foundation Objective-C 框架的一部分，你不能像那样混合它们。

试试这个：

```
int main(int argc, const char * argv[])
{
    @autoreleasepool {
        char input[80];
        NSLog(@"Please enter your birthday, for example: 09-01-1984");
        scanf("%s", input);
        NSDate *today = [NSDate date];
        NSDate *bDay = [NSDate dateWithNaturalLanguageString:[NSString stringWithUTF8String:input]];
        NSLog(@"%lu", [bDay elapsedDays:today]);
    }
    return 0;
} 
```

# html - 如何在固定高度的div中垂直居中可变高度的div

> ID：15205707
> 
> 赞同：0
> 
> 时间：2013-03-04T16:01:36.180
> 
> 标签：html, css

我正在尝试创建一个产品图像 div，我已经尝试了几乎所有方法，仍然无法解决一个小问题，我只想将我的图像垂直居中在一个固定高度的框中，图像的大小在每个新产品图像中都会有所不同. 这是我的代码 HTML：

```
<div class="main-pic">
 <ul>
     <li><img src="images/extra/laptop.jpg"></li>
     <li><img src="images/extra/laptop1.jpg"></li>
     <li><img src="images/extra/laptop2.jpg"></li>
     <li><img src="images/extra/laptop3.jpg"></li>
     <li><img src="images/extra/laptop4.jpg"></li>
     <li><img src="images/extra/laptop5.jpg"></li>
 </ul>
</div> 
```

CSS：

```
.main-pic{width:430px;height:430px;border:1px solid black;margin:20px auto;display:block;float:none;overflow:hidden;}
.main-pic ul{width:10000px;}
.main-pic ul li{width:430px;height:430px;float:none;display:block;margin:-25% auto auto;position:relative;top:50%;}
.main-pic ul li img{max-width: 400px;height:auto;max-height: 400px;width: auto;} 
```

仅供参考，我已经尝试过`verical-align:middle; display:table`，`table-cell` 可能是我一直在以错误的方式使用它们......请帮助我:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:13:15.687

要在固定高度的父元素中垂直居中元素，请将它们的`vertical-align: middle`. 添加一个显示为 an 的附加元素，其高度`inline-block`为零`width`且全高。

示例 HTML：

```
<div class="container">
    <div class="height"></div>
    <img ...>
    <img ...>
</div> 
```

示例 CSS：

```
.container {
    height: 300px;
}
.height {
    display: inline-block;
    height: 100%;
    vertical-align: middle;
    width: 0;
}
.container > img {
    vertical-align: middle;
} 
```

[JS Bin](http://jsbin.com/ozijet/1/edit)演示

如果您知道容器的高度，您也可以将其设置`line-height`为相同的值，而不是使用`div.height`.

# asp.net - ASP.Net 绕过 ReleaseStateRequest 事件 - 如何？

> ID：15205708
> 
> 赞同：0
> 
> 时间：2013-03-04T16:01:36.877
> 
> 标签：asp.net, event-handling, httpmodule

在 forums.asp.net 上问过这个问题，但没有人接受，所以我想我会在这里尝试。

我们有一个注册 BeginRequest、ReleaseRequestState 和 EndRequest 的 HttpModule。该模块的主要目的是，当我们提供常规 html 页面时，我们需要一个钩子来重写和加密生成的 html 中 href 上的查询字符串。过滤附加在我们模块的 ReleaseRequestState 事件处理程序中 (context.Response.Filter = new MyFilter(...);)。

但是当我们运行一个将生成 xml 文档的页面时，ReleaseRequestState 事件处理程序似乎根本不会触发 - 只有 BeginRequest 和 EndRequest。

经过大量谷歌搜索，我发现帖子说 HttpApplication.CompleteRequest() 将绕过很多事件链并直接转到 EndRequest，但我们没有在任何地方调用 CompleteRequest()。所以我在想还有其他的东西可以调用它，或者其他绕过 ReleaseRequestState 的方法。

当我们设置生成报告 xml 时，我们执行 Response.Clear(); 然后在 Response.OutputStream 上创建一个 XmlWriter。这些中的任何一个都会导致一些较低的东西绕过 ReleaseRequestState 事件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:12:07.833

因为您提供的是 XML 文档，所以 ASP.NET 管道是短路的 - 没有要发布的状态，因为没有执行使用它的 aspx 页面。

为了解决这个问题，您可以做的是确保您正在发布会话状态表单变量以及对 XML 文档的请求。当框架看到该变量（和/或与状态有关的其他请求参数）时，它将执行完整的状态水合/脱水事件循环。

编辑：在考虑了更多之后，我认为这`Response.Clear()`是导致状态事件不触发的调用。该方法将清除现有内容*，包括请求中包含的状态变量*。由于看起来您可能正在事件处理程序中调用`Response.Clear`，`BeginRequest`因此在后续事件中解析和设置状态之前，正在从请求中清除状态。因此，没有要释放的状态，并且正在跳过事件调用。

您是否已在 ASP.NET 源中下载/指向符号源并单步执行请求？这将有助于更好地回答这个问题。

# jquery-mobile - jquery mobile，需要刷新页面才能看到CSS的变化

> ID：15205709
> 
> 赞同：2
> 
> 时间：2013-03-04T16:01:38.533
> 
> 标签：jquery-mobile, jquery-plugins

我是 JQM 的新手，但不是没有 jquery。我正在使用在普通网页上运行良好的corner.js 插件。

所以我在html HEAD中有以下代码。

```
<script type="text/javascript">
    $(document).ready(function() {

        $('div.grid_inner').corner("round 8px").parent().css('padding', '4px').corner("round 14px");

    });
</script> 
```

我有以下 DIV

```
<div data-role="content">
            <div class="grid_outer" id="grid_outer_profile">
                <div  class="grid_inner" id="grid_inner_profile">

                    <table>
                        <tr>
                            <td><img src="<?php echo $avatarpath; ?>" /></td>
                        </tr>
                        <tr>
                            <td><?php echo $email; ?></td>
                        </tr>
                        <tr>
                            <td><?php echo $aboutme; ?></td>
                        </tr>
                    </table>
                </div>
            </div>
        </div><!-- /content --> 
```

问题是没有应用 CSS 角。不在我的桌面、我的 Android 手机或 Android Tab 上。

**只有**在我刷新它们之后才会应用它们。我试图找出是否需要强制刷新组件，但如果是这样，我不知道如何为命名的 DIV 执行此操作。或者，也许我从根本上做错了什么？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T16:05:09.420

jQuery Mobile 是面向页面的，并实现了自己的文档加载策略。您必须绑定到[pageinit](http://jquerymobile.com/demos/1.2.0/docs/api/events.html)事件而不是`ready:`

```
$(document).on("pageinit", function(e) {
    $("div.grid_inner", e.target)
        .corner("round 8px")
        .parent().css("padding", "4px").corner("round 14px");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T16:05:09.590

工作示例：http: [//jsfiddle.net/Gajotres/8pG6c/](http://jsfiddle.net/Gajotres/8pG6c/)

**准备好文件**是你的问题。通常不应该使用它，**`jQuery Mobile`**因为它可以（并且通常确实）在**`jQuery Mobile`**页面准备好之前触发。

可以使用正确的**`jQuery Mobile`**页面事件来修复它，在您的情况下使用：

```
$(document).on('pagebeforeshow', '#page-id', function(){  
    $('div.grid_inner').corner("round 8px").parent().css('padding', '4px').corner("round 14px");
}); 
```

**`page-id`**是显示网格的页面的 id，在我的示例中是**`#index`**.

通常的方法是使用**`pageinit`**事件，但在您的情况下，更好的解决方案是**`pagebeforeshow`**. **`pageinit`**每个加载的页面仅触发一次事件（除非手动刷新页面）。

如果您想了解有关此主题的更多信息，请查看我的其他**[文章](http://www.gajotres.net/document-onpageinit-vs-document-ready/)**，更透明的是我的个人博客。或者在**[这里](https://stackoverflow.com/a/14469041/1848600)**找到它。

# javascript - ASP.NET - 如何动态调整 Javascript 模态窗口的大小

> ID：15205713
> 
> 赞同：1
> 
> 时间：2013-03-04T16:01:46.470
> 
> 标签：javascript, asp.net, modal-dialog

我有一个带有按钮的 ASP.net 页面，该按钮可在单击时创建模式窗口：

```
Dim sURL As String = System.Configuration.ConfigurationManager.AppSettings("APP_Path") & "Detail.aspx"
btnDone.Attributes.Add("onclick", "javascript:window.showModalDialog('" & sURL & "',null,'status:no;dialogWidth:auto;dialogHeight:auto;dialogHide:true;help:no;scroll:yes;center:yes');return false;") 
```

我没有使用 jQuery。这是启动一个全新的 .aspx 页面，而不是当前页面中的新层。

模态窗口中的数据是绑定到数据表的数据网格。它可以包含 5 行到 50 行 - 直到运行时才能知道数据表何时创建和绑定。

```
<asp:DataGrid ID="grdHeader" runat="server" Width="100%" CssClass="grdGrid"
Font-Size="12px" Allowpaging="false" GridLines="None" AutoGenerateColumns="true"
Font-Names="Verdana" CellPadding="0" ShowHeader="false"></asp:DataGrid> 
```

后面的代码：

```
Dim dvHeader as DataView
Dim dtHeader as DataTable

dvHeader = dtHeader.DefaultView
grdHeader.DataSource = dvHeader
grdHeader.DataBind() 
```

我希望模态窗口的大小适合正在显示的数据，没有滚动条。我确信我可以通过 Javascript 做到这一点，但 Javascript 真的不是我的强项。

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T21:21:34.857

在弹出窗口的主体中添加一个 onload 事件并让它调用以下函数：

```
function resizeWindow()
{
    var containerElement = document.getElementById('<%=grdHeader.ClientID%>');
    window.resizeTo(containerElement.offsetWidth, containerElement.offsetHeight);
} 
```

Unfortunately offsetHeight doesn't take into account the height of elements in the browser (such as bookmark bars, url bars, etc.) so you do need to add some concrete amount to make sure all of the data is displayed. I think this might be the only way you can do what you hope to do, though, short of estimating the height of the window based on the number of rows in your data source (i.e. 25 rows x 25 pixels per row = 625 pixels)

**Edit:** Just a note, you are using showModalDialog to essentially open a new window. The above function will not work unless you use window.open(...) to open the window, which would be the best option anyway since you aren't actually making a true modal dialog.

# google-analytics - GA 内容实验返回 403 和搜索流量

> ID：15205717
> 
> 赞同：0
> 
> 时间：2013-03-04T16:02:01.090
> 
> 标签：google-analytics, internet-explorer-9, google-experiments

我在我的网站上安装了 GA 内容实验代码，并注意到我的服务器/网站针对使用 IE 9（64 位版本）的搜索流量返回“403 错误/禁止”消息。

当 IE 9 用户单击 Google 搜索结果页面中的链接时，内容实验代码正在尝试重定向用户 - 但用户收到 403 错误，而不是测试/变体页面。

错误仅出现在 IE 9 和搜索流量中（据我所知）。其他浏览器（Mozilla 和 Chrome）可以正常处理搜索流量。

什么是正确的方法/解决方法？

* * *

更新：我对 64 位和 32 位计算机进行了更多测试，看起来可能存在更大的问题。

赢 7 / 64 位

*   好的 - 铬 (V: 25.0.1364.97 m)
*   好的 - Mozilla Firefox (V: 19)
*   403 错误 - Opera (V: 12.14)
*   403 错误 - IE9 (V: 9.0.8112.16421)

赢 7 / 32 位

*   403 错误 - Safari (V: 5.1.7)
*   403 错误 - Mozilla Firefox (V: 13.0.1)
*   403 错误 - Chrome (V: 26.0.1410.19 beta-m)
*   403 错误 - IE9 (V: 9.0.8112.16421)
*   403 错误 - Opera (V: 11.61)

平板电脑

*   好的 - Safari
*   403 错误 - 铬

安卓手机（Galaxy Nexus）

*   好的 - 安卓浏览器
*   403 错误 - 铬
*   403 错误 - 歌剧

错误是标准的 403 消息：

Forbidden
您无权访问此服务器上的 / *XYZ*。
此外，在尝试使用 ErrorDocument 处理请求时遇到 404 Not Found 错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T13:49:47.433

已解决：我的托管公司告诉我，他们有一些“安全功能”，可以阻止 GA 内容实验代码。他们将内容实验代码“列入白名单”，现在一切正常。

# javascript - jQuery折叠表？

> ID：15205721
> 
> 赞同：0
> 
> 时间：2013-03-04T16:02:12.740
> 
> 标签：javascript, jquery

我正在运行 MyBB 论坛软件，并且能够在不破坏功能的情况下加载 jQuery。板子本身已经有折叠功能，但我想在jquery中做，或者给它添加一个漂亮的jquery效果，更流畅。

[http://craftedbyfrank.com](http://craftedbyfrank.com)

在单击 [+] 和 [-] 图像的那一刻，表格折叠并显示。

我正在尝试以下但没有运气。

```
 <script type="text/javascript">                                         
  $(document).ready(function() {
  $("tr.thead").click(function () { 
  $("tr.thead.img", $(this).parent()).slideToggle("fast");
   });

});
</script> 
```

我加载了 jQuery 1.9

感谢所有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:28:20.463

看起来你正在与另一个图书馆发生冲突。尝试使用“jQuery”而不是“$”。

这是可行的，尽管由于现有代码，我看到了双重操作：

```
jQuery('.expcolimage').click(function () { 
  jQuery(this).parents('table').find('tbody').slideToggle();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T16:28:44.140

```
<script type="text/javascript">                                         
  $(document).ready(function() {
  $("tr.thead").click(function () { 
  $(this).find('td').slideToggle("fast");
   });

});
</script> 
```

# javascript - 在排序中使用选择值作为 Json Var

> ID：15205723
> 
> 赞同：0
> 
> 时间：2013-03-04T16:02:15.330
> 
> 标签：javascript, function, sorting, drop-down-menu

我正在尝试将选择下拉列表中的值用作 Json 过滤函数的变量。当我硬编码 a.(name) 的值时，它可以工作，但是当我尝试使用下拉列表中的键名 var 时，它返回未定义。

```
function sortJson(a, b)
{
    //get sorting dropdown value for key
    var keyname = $('#sortByKey').val();// I want to dynamically set the keyname from dropdown. It traces correctly, so I am getting the value I want.

    if (a.keyname == b.keyname)//works when i hardcode a.name, or a.id etc...
    {
        return 0;
    }
    return a.keyname > b.keyname ? 1 : -1;
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T16:04:39.733

你只需要写：

> 一个[键名]

代替

> a.keyname

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T16:06:20.997

要使用 keyName 指定的名称引用变量的属性，请使用括号语法作为建议的另一个答案：

```
a[keyname] 
```

如果 keyname 是 key，这相当于 a.key，但允许您使用动态字符串。

a.keyname 尝试查找不存在的 a 上的 keyname 属性。

# javascript - 重流和重绘的替代方案

> ID：15205725
> 
> 赞同：0
> 
> 时间：2013-03-04T16:02:17.617
> 
> 标签：javascript, html, css, repaint, reflow

我[在 SO](https://stackoverflow.com/questions/2549296/whats-the-difference-between-reflow-and-repaint)和其他地方读过，重新绘制和重新流动对于浏览器执行来说是昂贵的。

我很好奇 CSS/JS 替代 re-paint/`display:none`和 re-flow/`visibility:hidden`对浏览器的计算要求不高。

为了清楚起见，如果我错了，请纠正我，一个常见的回流场景是当您设置`display:none`要切换显示的元素时，例如下拉菜单。重排意味着浏览器首先“流动”，即显示，元素和下面的**所有**内容作为**可见**内容，但随后必须重新流动所有内容，因为需要隐藏下拉菜单。

关于回流和重绘的性能冲击是否真的是人们需要关心的事情，也欢迎评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T16:10:47.723

我认为您误解了该声明。

如果您正在动态生成元素，请考虑以下两个场景：

1.  生成一个元素，将其添加到 DOM。重复。
2.  首先创建一个 DOMDocumentFragment。将元素添加到片段。重复。将片段添加到 DOM。

方法 1 将为您添加的每个元素重新绘制。方法 2 最后只会进行一次重绘。如果要添加的元素数量很少，方法 1 可能很好。如果要添加许多节点，方法 2 会快得多。

这就是*重绘很贵*的意思。

* * *

也许这是一种看待它的好方法：

重新绘制的基本成本为 100。创建一个 DOM 元素并附加它的成本为 1。如果您为 7 个元素执行方法 1，您的成本将为 (1 + 100) * 7 = 707。如果您是执行方法 2 您的成本将是：1 * 7 + 100 = 107。这要低得多。这些数字仅用于说明。它可能比这更多，但我认为这是查看重绘性能的一种很好且简单的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T17:44:36.380

没有简单的公式。首先，每个浏览器都有自己的方式来处理重排和重绘。通常，浏览器会尽量推迟重排，因为您知道，它们可能非常昂贵。

一般来说，请记住以下操作总是会触发重排：

*   通过添加、删除或移动节点来更改 DOM 树。
*   更改 CSS 计算属性，例如`offsetWidth`
*   `getComputedStyle`使用（或`currentStyle`在旧 IE 上）读取计算的 CSS 值

（请参阅[DOM 环境中何时发生回流？](https://stackoverflow.com/questions/510213/when-does-reflow-happen-in-a-dom-environment)。）

设置样式通常会导致重排，但如果更改不会影响其他元素的位置或尺寸，浏览器会尽量避免它^([需要引用])。

有关回流的一些乐趣，请参阅[它会回流吗？](http://www.phpied.com/the-new-game-show-will-it-reflow/)

# linux - 在调用 pthread_attr_setstacksize 后，如何确定可以使用多少堆栈？

> ID：15205734
> 
> 赞同：1
> 
> 时间：2013-03-04T16:02:55.587
> 
> 标签：linux, pthreads, posix, nptl

我正在尝试调试一些有关堆栈使用的代码。我制作了以下测试程序（只是作为一个例子来弄清楚 pthread 库是如何工作的）：

```
#include <string.h>
#include <pthread.h>
#include <stdlib.h>
#include <assert.h>
#include <limits.h>
#include <stdio.h>

static void *threadFunc1(void *arg)
{
    char arr[5000];
    printf("Hello fromt threadFunc1 address of arr:%p\n", &arr);
    return;
}

static void *threadFunc2(void *arg)
{
    char arr[10000];
    printf("Hello fromt threadFunc2 adress of arr:%p\n", &arr);
    return;
}

int main(int argc, char *argv[])
{
   pthread_t t1,t2;
   pthread_attr_t thread_attr;
   void *res;
   int s;
   size_t tmp_size=0;
   s=pthread_attr_init(&thread_attr);
   assert(s==0);
   s=pthread_attr_setstacksize(&thread_attr , PTHREAD_STACK_MIN );
   assert(s==0);
   s=pthread_attr_getstacksize(&thread_attr , &tmp_size );
   assert(s==0);
   printf("forced stack size of pthread is:%zd\n", tmp_size);
   printf("sizeof char is %zd\n", sizeof(char));

   s = pthread_create(&t1, &thread_attr, threadFunc1, NULL);
   assert(s==0);
   sleep(1);
   s = pthread_create(&t2, &thread_attr, threadFunc2, NULL);
   assert(s==0);
   sleep(1);

   printf("Main done()\n");
   exit(0);
} 
```

当我执行它时，我得到以下输出（在我的 x86_64 Ubuntu 上）：

```
forced stack size of pthread is:16384
sizeof char is 1
Hello fromt threadFunc1 address of arr:0x7fef350d3b50
Segmentation fault (core dumped) 
```

当我进入新创建的线程时，有没有办法知道请求的 PTHREAD_STACK_MIN 还剩下多少？如果我在输入线程函数时更改 char 数组的大小，似乎限制在 7000 到 8000 之间，这不是我所期望的（在 16384 附近的某个地方）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T08:40:10.923

玩弄线程堆栈大小并没有很多“好”的东西。通常当这种事情出现时，这是因为有人试图创建数百（或数千）个线程并遇到每个进程的限制。这通常不是使用线程的好方法。示例：为到服务器的每个传入连接请求创建一个新线程。

即使这不是你问的原因，你也应该知道一些事情。

在生产（现实世界）代码中，不是一个简单的示例，您永远无法确定每个线程的特定“减少”堆栈大小是 100% 安全的。您可以在给定的堆栈大小下对其进行广泛测试，然后也许一旦您在自己的测试环境中确信它“足够大”，可能会稍微增加它（可能是 10-15%）以供生产使用。我不知道有任何特定工具可以告诉您运行时每个线程的峰值堆栈使用量。最好完全避免这种情况。

减少每个线程的堆栈大小不会直接减少内存消耗，也不会提高性能。你不是通过试验来优化你的代码。

尽可能使用本地实现选择的默认堆栈大小会更安全，直到您有真正的理由更改它。

您缺少一些原型头文件，缺少线程函数中的返回值等，以及其他一些轻微的清理。

在此处运行的代码的略微修改版本：

```
#include <stdio.h>
#include <string.h>
#include <pthread.h>
#include <stdlib.h>
#include <assert.h>
#include <unistd.h>
#include <limits.h>

static void *threadFunc1(void *arg)
{
    char arr[5000];
    printf("Hello fromt threadFunc1\n");
    return NULL;
}

static void *threadFunc2(void *arg)
{
    char arr[10000];
    printf("Hello fromt threadFunc2\n");
    return NULL;
}

int main(int argc, char *argv[])
{
   pthread_t t1,t2;
   pthread_attr_t thread_attr;
   int s = 0;
   size_t tmp_size=0;

   s = pthread_attr_init(&thread_attr);
   assert(s==0);

   s = pthread_attr_setstacksize(&thread_attr , PTHREAD_STACK_MIN + 0x1000);
   assert(s==0);

   s = pthread_attr_getstacksize(&thread_attr , &tmp_size );
   assert(s==0);

   printf("forced stack size of pthread is:%zu\n", tmp_size);

   s = pthread_create(&t1, &thread_attr, threadFunc1, NULL);
   assert(s==0);

   sleep(1);    /* not the "right" way, but ok for a quick test */

   s = pthread_create(&t2, &thread_attr, threadFunc2, NULL);
   assert(s==0);

   sleep(1);

   printf("Main done()\n");
   return 0;
} 
```

注：我用过

```
$ gcc -O0 -Wall stack_t.c -o stack_t -pthread
./stack_t 
```

如果您想尝试其他大小的堆栈，请注意某些实现要求堆栈大小是系统页面文件大小的倍数。显然，您也可以尝试大于 PTHREAD_STACK_MIN 的值，但请注意该潜在问题。

编辑：上面的示例将一个值添加到最小值作为稍微增加它的示例。您可能需要添加更多。如果 0x1000 还不够，请尝试 0x2000、0x3000 等，直到找到可行的。正如您所发现的，减少线程堆栈大小是很棘手的，并且也可能与平台相关。这就是为什么我在上面有关于它不安全的警告。

# c# - 使用 C# 与另一个程序交互

> ID：15205735
> 
> 赞同：5
> 
> 时间：2013-03-04T16:02:56.423
> 
> 标签：c#, windows, automation

我希望通过我的 C# 应用程序与其他 Windows 应用程序进行交互。这应该能够在后台完成，而用户继续做其他事情。目标应用程序不是我的，但我知道它们是什么，所以它们的 UI/等。是已知的。

我基本上是在尝试跨各种程序自动化各种任务的过程。

到目前为止，我能想到的唯一解决方案是让代码切换到相关窗口，并用鼠标执行任务。（[用这里显示的方法控制鼠标](https://stackoverflow.com/questions/7620345/c-sharp-clicking-on-a-certain-point-on-the-screen)）

当然，这种方法的缺点是它不能在后台运行并阻止用户执行其他任务。

Of course if these target applications received 'fake' mouse clicks, while still running in the background, this solution would be great. So if that's possible, please do share! Otherwise, any solution for such a problem would be brilliant.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T17:50:34.473

I just want to say that what you are doing is going to be pretty tough to make reliable without cooperation from the developers of the other applications. However, you can use Windows Messages to accomplish what you're trying to do. This is a way to send information to a window without explicit communications being set up. You'll need to use native methods to do this, but it's pretty straightforward. Be careful, however, as implementing this is not as trivial as it looks - you can get into deadlocks if you accidentally send a message to a closed (or invisible) window, for example.

对于 Stack Overflow 帖子来说，这个话题太大了，但这里有一些相关功能可以帮助您入门：

[PostMessage](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644944(v=vs.85).aspx)和[SendMessage](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644950(v=vs.85).aspx)是您可以用来向其他应用程序发送消息的主要函数。

[这篇文章](https://stackoverflow.com/questions/10407769/directly-sending-keystrokes-to-another-process-via-hooking)的答案有一些关于如何使用这些功能的基本示例。

最后，[这里](http://www.autohotkey.com/docs/misc/SendMessageList.htm)有一个 Windows 消息代码列表供参考。

# android - 下载大文件时出现“意外的流结束”

> ID：15205739
> 
> 赞同：0
> 
> 时间：2013-03-04T16:03:00.713
> 
> 标签：android, http, android-networking

我尝试使用以下 url 的片段下载一个大文件：[使用 Android 下载文件，并在 ProgressDialog 中显示进度](https://stackoverflow.com/questions/3028306/download-a-file-with-android-and-showing-the-progress-in-a-progressdialog)。但是，它仅适用于小文件。当我尝试下载一个像[这样](http://upload.wikimedia.org/wikipedia/commons/c/cd/StJohnsAshfield_StainedGlass_GoodShepherd-frame_crop.jpg)的大文件时，我得到了这个异常：

```
java.io.IOException: unexpected end of stream at libcore.net.http.FixedLengthInputStream.read(FixedLengthInputStream.java:48) 
```

有什么问题？是因为服务器关闭了长连接的连接吗？

# java - 修改对象属性

> ID：15205740
> 
> 赞同：-1
> 
> 时间：2013-03-04T16:03:02.437
> 
> 标签：java, oop, class, methods, attributes

我目前正在制作一个程序，该程序需要我制作一个方法，将 + 1 添加到现有对象日期属性的日期。问题是我不完全确定如何修改它的值，我尝试过 day = day + 1、this.day + 1 等。

所以让我们假设一个对象 date1 等于 1/1/1970 并且我运行 date1.tomorrow(); 它将对其进行修改并使其成为 1970 年 2 月 1 日。

编辑：我没有使用 java.util.Date，我创建了一个名为 Date 的构造函数，其中包含 3 个字段。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T16:05:34.673

您不能通过`Date`将整数 1 添加到对象来直接修改对象。这是因为它们属于不同的类型。我建议使用该[`Calendar`](http://docs.oracle.com/javase/6/docs/api/java/util/Calendar.html)对象；它有一个名为[`Calendar#add(int field, int amount`](http://docs.oracle.com/javase/6/docs/api/java/util/Calendar.html). 这将做你想做的事。

**编辑：**我有更详细的说明，但由于这个问题听起来像家庭作业，我只是给你上面的提示。无论如何，这应该足以为您指明正确的方向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T16:06:19.400

尝试这个：

```
Calendar c = Calendar.getInstance(); 
c.setTime(yourDate); 
c.add(Calendar.DATE, 1);
yourDate = c.getTime(); 
```

**编辑**

> 所以让我们假设一个对象 date1 等于 1/1/1970 并且我运行 date1.tomorrow(); 它将对其进行修改并使其成为 1970 年 2 月 1 日。

如果您的日期对象（例如`dt`）是 java.util.Date，则`dt.tomorrow()`除非您扩展`util.Date`您可以创建一个实用程序类/方法，否则您将无法做到这一点。例如：

```
class Foo {
....

public static Date tomorrow(java.util.Date yourDate){
Calendar c = Calendar.getInstance(); 
    c.setTime(yourDate); 
    c.add(Calendar.DATE, 1);
    return c.getTime();
} 
```

然后调用它：

```
dt = Foo.tomorrow(dt); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T16:14:51.333

如果您正在处理对这些对象`java.util.Date`使用`+`运算符的对象是无效的。

更重要的是，即使`+`运营商是合法的，使用它也没有任何意义 -`date + 1`应该添加`1`到日期或月份或年份..？

操作`java.util.Date`类的对象`Calendar`提供了几种实用方法。您可以在这里使用的其中之一是[`Calendar.add`](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html#add%28int,%20int%29).

> 根据日历的规则，在给定的日历字段中添加或减去指定的时间量。例如，要从日历的当前时间减去 5 天，可以通过调用实现：

```
add(Calendar.DAY_OF_MONTH, -5) 
```

**编辑：**

从您的编辑中可以看出您没有使用`java.util.Date`对象。现在您的`Date`对象维护了三个属性（最有可能是日期、月份和年份），您应该能够在这些字段上应用算术运算符。

但是，在操作这些字段时，您应该小心遵循与日期相关的规则（假设它们属于整数类型之一）。

例如，添加`1`日期`28/02/2013`应该更新实例的日期和月份`Date`。

# android - 发布应用后更改 Google Play 设备过滤器？

> ID：15205742
> 
> 赞同：3
> 
> 时间：2013-03-04T16:03:04.300
> 
> 标签：android, google-play

我知道我们可以设置各种过滤器来防止不兼容的设备下载应用程序。
如果设置了过滤器来阻止下载，以后可以在不上传新apk的情况下更改它吗？

我问的原因是我们的应用程序可以在大多数 Android 设备上运行，但我们有 Xperia Play 和 HTC One X+ 用户说它在启动屏幕后崩溃了。

如果我们可以在找到原因之前暂时阻止这些设备，它将阻止人们将钱花在他们无法使用的应用程序上（并给予我们低评级以反映这一点）。然后，一旦问题得到解决，我们就可以简单地移除过滤器并重新启用这些设备。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T16:09:01.100

您可以在 Play 商店控制台中手动排除设备（仅在经典布局中找到它，而不是在新布局中找到）。

它在国家列表下方的发布选项部分中标题为支持的设备。

您可以随时添加/删除设备，但新的可用性需要几个小时才能在全球范围内传播。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T16:09:19.967

您无需上传新的 apk。

登录到开发人员控制台（它现在默认使用新 UI，因此我提供了相应的步骤），然后执行以下操作：

1.  打开您的应用的页面
2.  从侧边栏转到 apk 选项卡
3.  点击`See supported devices`
4.  找到您要排除的设备，然后单击绿色复选标记。它应该变成一个红色的禁令标志。

对要排除的所有设备重复 4.

# ruby - 链接到 OS X 上的特定 Oracle 即时客户端动态库

> ID：15205743
> 
> 赞同：3
> 
> 时间：2013-03-04T16:03:08.153
> 
> 标签：ruby, xcode, macos, oracle, oci8

有一个广泛使用的 Ruby gem (ruby-oci8)，它使用 C 扩展来调用 Oracle C 库 (Oracle Instant Client)。它创建一个调用 Oracle 库 (libclntsh.dylib.11.1) 中的例程的包 (oci8lib_191.bundle)。

但是，如果使用 LDAP 来解析他们的数据库名称，就会出现问题。客户端崩溃：

```
Assertion failed: (LDAP_VALID( ld )), function ldap_first_entry, file getentry.c, line 35. 
```

Oracle 库包括它自己的 LDAP 例程。

```
nm /Applications/OracleInstantClient/libclntsh.dylib.11.1 | grep ldap_first_entry
0000000000f0fc50 T _ldap_first_entry
0000000000f15620 T _ora_ldap_first_entry 
```

但是，我已经使用 gdb 验证了当客户端崩溃时，它会在 OS X LDAP 库的代码中崩溃。

```
(gdb) bt
#0  0x00007fff8403d212 in __pthread_kill ()
#1  0x00007fff8da78af4 in pthread_kill ()
#2  0x00007fff8dabcdce in abort ()
#3  0x00007fff8dabde2a in __assert_rtn ()
#4  0x00007fff86e233e2 in ldap_first_entry ()

(gdb) info symbol 0x00007fff86e233e2
ldap_first_entry + 98 in section LC_SEGMENT.__TEXT.__text of /System/Library/Frameworks/LDAP.framework/Versions/A/LDAP 
```

因此，显然发生的事情是当捆绑包尝试调用 ldap_first_entry() 时，它与 OS X 版本链接，而不是 Oracle 内部的自定义版本 (libclntsh.dylib.11.1)。

我的第一个想法是在存在动态库时使用与链接静态库相同的技巧。也就是说，将绝对路径传递给库。但是，如您所见，这会导致错误：

```
gcc -dynamic -bundle -o oci8lib_191.bundle oci8lib.o env.o error.o oci8.o ocihandle.o connection_pool.o stmt.o bind.o metadata.o attr.o lob.o oradate.o ocinumber.o ocidatetime.o object.o apiwrap.o encoding.o oranumber_util.o thread_util.o -L. -L/usr/local/lib -L. -L/usr/local/lib -Wl,-undefined,dynamic_lookup -Wl,-multiply_defined,suppress -Wl,-flat_namespace  -L/Applications/OracleInstantClient -l/Applications/OracleInstantClient/libclntsh.dylib.11.1 -lpthread -ldl -lobjc 
ld: library not found for -l/Applications/OracleInstantClient/libclntsh.dylib.11.1 
```

该库确实存在于列出的路径中：

```
xanadu:~ wwilliam$ file /Applications/OracleInstantClient/libclntsh.dylib.11.1
/Applications/OracleInstantClient/libclntsh.dylib.11.1: Mach-O 64-bit dynamically linked shared library x86_64 
```

我也试过-rpath：

```
gcc -dynamic -bundle -o oci8lib_191.bundle oci8lib.o env.o error.o oci8.o ocihandle.o connection_pool.o stmt.o bind.o metadata.o attr.o lob.o oradate.o ocinumber.o ocidatetime.o object.o apiwrap.o encoding.o oranumber_util.o thread_util.o -L. -L/usr/local/lib -L. -L/usr/local/lib -Wl,-undefined,dynamic_lookup -Wl,-multiply_defined,suppress -Wl,-flat_namespace  -L/Applications/OracleInstantClient -Wl,-rpath,/Applications/OracleInstantClient -lclntsh -lpthread -ldl -lobjc 
```

仅供参考， DYLD_LIBRARY_PATH 已设置：

```
DYLD_LIBRARY_PATH=:/Applications/OracleInstantClient 
```

那么，如何才能保证bundle与Oracle版本的ldap_first_entry()链接呢？

我正在使用带有 Xcode 版本 4.6 (4H127) 的 OS X 10.8.2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T13:08:00.590

更新：

我与提问者一起邮寄，通过在他的应用程序顶部添加“需要'oci8'”，崩溃消失了。

根据 DYLD_PRINT_LIBRARIES=1 和 DYLD_PRINT_BINDINGS=1 输出的日志，这个问题是函数插入造成的。libclntsh.dylib 和 OS X LDAP 库导出实现不同的 _ldap_first_entry。当 OS X LDAP 库在 libclntsh.dylib 之前加载到进程内存中并且 libclntsh.dylib 中的函数尝试使用 libclntsh.dylib 中的 _ldap_first_entry 时，它错误地使用了 OS X LDAP 库中的 _ldap_first_entry。通常在 Unix（OS X 除外）上可能会发生这种情况，并且仅当库与 flat_namespace 链接时才会在 OS X 上发生。

IMO，他没有明确使用 OS X LDAP 库。他使用了一种授权模块，内部依赖于库。

其余不变。

* * *

我有个主意。但我没有测试过。

IMO，ruby 不直接使用 OS X 版本库。诸如 ruby​​-ldap 之类的扩展库使用它。如果是这样，在扩展库之前“需要'oci8'”可能会解决问题。

```
require 'oci8' # This must be before any other extension libraries using LDAP.
require 'ldap' # for example 
```

但这会导致另一个问题。当 ruby​​-ldap 库尝试使用 OS X 版本 _ldap_first_entry 时，会调用 Oracle 版本 _ldap_first_entry 并且进程崩溃。您需要自定义 oci8 以避免它。

在 ext/oci8/oci8lib.c 中更改`DLOPEN_FLAG`如下，

```
#define DLOPEN_FLAG (RTLD_NOW|RTLD_LOCAL) 
```

然后安装如下

```
gem build ruby-oci8.gemspec
gem install ruby-oci8-2.1.5.gem -- --with-runtime-check 
```

并使用它。

```
require 'oci8' # This must be before any other extension libraries using LDAP.
require 'ldap' 
```

`RTLD_LOCAL`从其他扩展库中隐藏 libclntsh.dylib 中的符号。 `RTLD_NOW`立即解析符号并防止 libclntsh.dylib 在成功加载的库中使用符号。 `--with-runtime-check`强制 ruby​​-oci8 使用 dlopen()。

我希望 OS X dlopen() 规范与 Linux 相同并且可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T21:00:10.867

您需要使用 'otool -L < path to dylib >' 转储可执行文件或 dylib 所依赖的 dylib。它们应该被构建为通过相对路径（'@executable_path/../Frameworks/*'（或@loader_path 或@rpath））而不是系统路径来访问捆绑框架。

请参阅 dyld 手册页的“动态库加载”部分：[https ://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/dyld.1.html](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/dyld.1.html)

dylib 的 install_path 用于告诉与它链接的 exec 和 dylib 在运行时应该在哪里找到它。您可以（尝试）通过 install_name_tool 命令行工具更改 dylib 的 install_path。（我说“尝试”是因为它可能会默默地失败，所以总是检查后记，看看它是否真的有效。）

# c#-4.0 - 带有链接按钮的嵌套中继器控件

> ID：15205748
> 
> 赞同：0
> 
> 时间：2013-03-04T16:03:24.277
> 
> 标签：c#-4.0, drop-down-menu, repeater, asplinkbutton

我正在尝试创建一个带有嵌套中继器和链接按钮的下拉菜单。

```
<asp:Repeater ID="Repeater1" runat="server">
            <HeaderTemplate>
                <ul>
            </HeaderTemplate>
            <ItemTemplate>
                <li>
                    <asp:LinkButton ID="LinkButton_Category" runat="server" Text='<%#Eval("cat") %>'
                    OnCommand="LinkButton_Category_Command" CommandName="Category" 
                    CommandArgument='<%#Eval("catid") %>'></asp:LinkButton>
                <asp:Repeater ID="Repeater2" runat="server">
                    <HeaderTemplate>
                        <ul>
                    </HeaderTemplate>

                    <ItemTemplate>
                        <li>
                            <asp:LinkButton ID="LinkButton_UseClass" runat="server" Text='<%#Eval("useclass") %>'
                            OnCommand="LinkButton_UseClass_Command" CommandName="UseClass" 
                            CommandArgument='<%#Eval("UcId") %>'></asp:LinkButton>
                        </li>
                    </ItemTemplate>
                    <FooterTemplate>
                        </ul>
                    </FooterTemplate>
                </asp:Repeater>
                </li>
            </ItemTemplate>
            <FooterTemplate>
                </ul>
            </FooterTemplate>
        </asp:Repeater> 
```

单击第一个链接按钮时（使用 Id - 'LinkBut​​ton_Category'），命令参数用作填充第二个链接按钮（使用 Id - 'LinkBut​​ton_UseClass'）的输入。我需要以具有上下滚动功能的下拉菜单方式实现这一点。任何帮助将不胜感激。我可以填充链接按钮，但需要滚动功能的帮助。单击的链接按钮必须保持打开状态，直到单击下一个项目。

**编辑**

使用 JQuery 实现下拉菜单的代码

```
$(document).ready(function () { 
   $("#nav li").click( function () { 
      var sibling = $(this).find("a").next(); 
      sibling.show(); 
   }, 
   function () { 
      var sibling = $(this).find("a").next(); 
      sibling.hide(); 
   });
}); 
```

![屏幕截图 - 我希望一次只有其中一个保持打开状态。 当我点击其中任何一个时，任何先前展开的列表都必须关闭。](../Images/3835d090cfa7b03170f51852f488ef3f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T17:34:10.290

我相信这就是您正在寻找的：

```
 $(document).ready(function () {
        $("#nav li").each(function (index) {
            var sibling = $(this).find("a").next();
            sibling.hide();
        });
        $("#nav li").click(function () {
            $("#nav li").each(function (index) {
                var sibling = $(this).find("a").next();
                sibling.hide();
            });
            var sibling = $(this).find("a").next();
            sibling.show();
        });
    }); 
```

**编辑**

这是中继器的输出：

```
<body>
    <form id="form1" runat="server">
    <div id="nav">
    <ul>
        <li><a href="#">Alpha</a>
            <ul>
                <li><a href="#">A</a></li>
                <li><a href="#">B</a></li>
                <li><a href="#">C</a></li>
                <li><a href="#">D</a></li>
            </ul>
        </li>
        <li><a href="#">Numeric</a>
            <ul>
                <li><a href="#">1</a></li>
                <li><a href="#">2</a></li>
                <li><a href="#">3</a></li>
                <li><a href="#">4</a></li>
            </ul>
        </li>
    </ul>
    </div>
    </form>
</body> 
```

# c++ - 断点当前不会被命中。没有与此行关联的可执行代码

> ID：15205750
> 
> 赞同：15
> 
> 时间：2013-03-04T16:03:29.910
> 
> 标签：c++, windows, visual-studio-2010, class, debugging

我在 .h 文件中有一个类：

```
class Blah
{
public:
    Blah(){}
    virtual ~Blah(){}

    void WriteMessage( bool MessageReceived )
    {
        if(MessageReceived)
        {
            cout << "Message Recieved\n";
        }
    }
}; 
```

我试图弄清楚为什么我的代码不起作用，所以我在函数内部的条件上设置了一个断点`WriteMessage()`，但是一旦我开始在调试模式下运行项目，断点就消失了，它的工具提示说：

> 断点当前不会被命中。
> 没有与此行关联的可执行代码。

我不知道为什么会这样，因为其他类的所有其他成员函数在 .h 文件中实现时都可以正常工作。这是什么原因造成的？

**编辑：**好的，根据要求，这是我正在使用的真实代码的精简版本：

**VimbaBridgeAPI.h**（.dll 的头文件）

```
#pragma once

#ifdef VIMBABRIDGEAPI_EXPORTS
#define VIMBABRIDGEAPI_API __declspec(dllexport)
#else
#define VIMBABRIDGEAPI_API __declspec(dllimport)
#endif

#include "AlCamIncludes.h"
#include "VimbaSystem.h"

////////////////////////////////////////////
//  Global Variables ///////////////////////
////////////////////////////////////////////
extern HBITMAP hbit;
extern CEdit* global_filenamehandle;

////////////////////////////////////////////
//  Global Flags ///////////////////////////
////////////////////////////////////////////
extern bool imageReady;
extern bool take_picture;

using namespace AVT::VmbAPI;

VIMBABRIDGEAPI_API void BridgedGetImage(FramePtr framepoint, VmbUchar_t** imgDat);

VIMBABRIDGEAPI_API HBITMAP ExternalFrameRecieved( const FramePtr pFrame );

//////////////////////////////////////////////////////////////////////////
//////////  MyObserver class   ///////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////
class VIMBABRIDGEAPI_API MyObserver : public IFrameObserver
{
private:
    MyObserver( MyObserver& );

    MyObserver& operator=( const MyObserver& );

    //class member variables
    //BITMAPINFO*             pbmi;
    CEdit*                  m_filenameedit;

public:

    MyObserver(CameraPtr pCamera) : IFrameObserver(pCamera) {}
    virtual ~MyObserver() {}

    void FrameReceived ( const FramePtr pFrame );
}; 
```

**注意：** IFrameObserver 不是我写的，但 FrameReceived 函数是在 IFrameObserver 类中声明的纯虚函数。他们的文档说，每当有帧进入时，他们的 API 都会调用 FrameRecieved，我必须实现该功能。我已经测试过这个函数并且它可以工作，但只有在类外部定义时（在里面我得到了我现在得到的错误）

**VimbaBridgeAPI.cpp**（对用户隐藏的代码）

```
void FrameRecieved( const FramePtr pFrame )
{
    DbgMsg(L"Frame Received\n");

    ////////////////////////////////////////////////////////////////////////
    //////////  Setup Bitmap  ////////////////////////////////////////////////
    //////////////////////////////////////////////////////////////////////////

    //// FILEHEADER ////
    BITMAPFILEHEADER* bf = new BITMAPFILEHEADER;
    bf->bfType = 0x4d42;
    bf->bfSize = 6054400 + 54 + sizeof(BITMAPINFO);
    bf->bfOffBits = 54;

    //// INFOHEADER ////
    BITMAPINFOHEADER* bih = new BITMAPINFOHEADER;
    bih->biSize = 40;
    bih->biWidth = 2752;
    bih->biHeight = -2200;
    bih->biPlanes = 1;
    bih->biBitCount = 32;
    bih->biCompression = 0;
    //bi->biSizeImage = 6054400; //not required
    bih->biXPelsPerMeter = 2835;
    bih->biYPelsPerMeter = 2835;
    bih->biClrUsed = 0;
    bih->biClrImportant = 0;

    //// INFO ////
    BITMAPINFO* pbmi = (BITMAPINFO*)alloca( sizeof(BITMAPINFOHEADER) + sizeof(RGBQUAD)*256);
    pbmi->bmiHeader.biSize = sizeof (pbmi->bmiHeader);
    pbmi->bmiHeader.biWidth = 2752;
    pbmi->bmiHeader.biHeight = -2200;
    pbmi->bmiHeader.biPlanes = 1;
    pbmi->bmiHeader.biBitCount = 8;
    pbmi->bmiHeader.biCompression = BI_RGB;
    pbmi->bmiHeader.biSizeImage = 0;
    pbmi->bmiHeader.biXPelsPerMeter = 14173;
    pbmi->bmiHeader.biYPelsPerMeter = 14173;
    pbmi->bmiHeader.biClrUsed = 0;
    pbmi->bmiHeader.biClrImportant = 0;

    //create grayscale color palette
    for(int i=0; i<256; i++)
    {
        pbmi->bmiColors[i].rgbRed = BYTE(i);
        pbmi->bmiColors[i].rgbGreen = BYTE(i);
        pbmi->bmiColors[i].rgbBlue = BYTE(i);
        pbmi->bmiColors[i].rgbReserved = BYTE(0);
    }

    //// IMAGE DATA ////
    VmbUchar_t* imageData = NULL;
    BridgedGetImage(pFrame, &imageData);

    //////////////////////////////////////////////////////////////////////////
    ////// Create image that's printed to dialog box /////////////////////////
    //////////////////////////////////////////////////////////////////////////
    HDC hdc = ::GetDC(NULL);  
    hbit = CreateDIBitmap(hdc, bih, CBM_INIT, imageData, pbmi, DIB_RGB_COLORS);

    //clean up
    DeleteObject(bf);
    DeleteObject(bih);
    DeleteObject(hdc);
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-04T16:19:02.773

我建议您首先**删除输出文件**：物理删除所有生成的 DLL、PDB 和 EXE。然后再次编译（重建）以生成文件。有时，在构建解决方案时，Visual Studio 可能会“迷路”和“忘记”覆盖输出文件。

这可能由于其他几个原因而发生：

*   调试器使用的代码与应用程序运行的代码不同
*   调试器使用的 pdb 文件与应用程序正在运行的代码不同
*   应用程序正在运行的代码已经过优化，调试信息已被剥离。
*   您在其中设置断点的代码尚未加载到进程中

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-11-07T21:35:33.943

我也遇到了这个问题，我的应用程序的上下文是 C# 中的一个主应用程序，它在我想从调试器进入的较低层中使用非托管 C++ 代码。从 C# 项目属性中，我进入了“调试”选项卡，在“启用调试器”部分下选中了“启用非托管代码调试”。

![C# 项目属性调试选项卡](../Images/668995e65bbfdf28b116a563ca4479b2.png)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-01-18T22:23:50.203

想提一下，我`"Breakpoint will not be hit..."`在将一些旧`MFC (managed--using clr support)`项目移植到`VS2015`.

对我来说解决问题的是设置这个：

`Configuration Properties\Linker\Debugging\Debuggable Assembly`

...对此：

`Yes (/ASSEMBLYDEBUG)`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-11-16T20:21:43.650

我也想加入我自己的解决方案。我有一个 C++ 项目加载一个由 C++/CLR 代码组成的 dll。结果，我不得不将启动项目的调试器类型设置为“混合”。“自动”没有检测到它需要托管支持，因为 dll 是在程序启动后手动加载的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-04-30T16:46:51.267

对我来说，答案是：

`Project Properties->C/C++->Optimization`

将优化设置为：“禁用 (/Od)”

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-22T15:59:00.637

我有同样的问题，但清理文件的公认解决方案对我不起作用。我的问题已解决，这与我的代码有关。这是我修复的详细信息，希望它为您的修复提供一些线索。

我正在做的是`CArchive` `<<`为我的结构重载运算符，但代码从未介入其中。我会设置断点，然后得到实心红色符号。一旦我开始调试器，符号就会被勾勒出来，并且上面的警告消息说：

> 当前不会命中断点。没有可执行代码与此行相关联

我的相关代码低于断点不中断的地方。

```
class Book
{
     friend CArchive& operator << (CArchive& ar, const Book & book )
     {

         ar << book.title;
         ar << "\r\n";
         ar << book.price;
         ar << "\r\n";
     }
} 
```

现在这段代码有一个明显的问题是它没有返回语句`return ar`，但编译器从未抱怨过。编译器没有抱怨的原因是我错误地使用了运算符（而不是从不使用它）

```
book *mybook = new Book(...);
ar << mybook; 
```

因为我错误地通过指针访问运算符，所以我的对象的`<<`运算符从未真正被调用过，这就是为什么编译器也没有抱怨，因为它从未被使用过。

所以首先我修复了调用代码

```
book *mybook = new Book(...);
ar << *mybook; 
```

现在运算符重载方法抱怨该`return`语句，我也修复了它。

我现在可以进入该功能。所以底线是没有设置断点，因为这段代码基本上被编译器（正确地）排除在外，因为它从未在代码中使用过。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-08-13T20:42:31.360

我试图按下`Ctrl+F5`它与您在 Visual Studio Code 中收到的错误相同。但是，一旦我进入`Debug`部分并按下初始化调试的**绿色按钮，帮助我解决了这个错误。**[![在此处输入图像描述](../Images/1f62f283c09254b5fadfb05af809b5ae.png)](https://i.stack.imgur.com/7ilCe.png)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-05-14T19:17:54.143

如果您使用的是 CLion，请尝试添加`-DCMAKE_BUILD_TYPE=Debug`到您的 CMake 选项：

[![在此处输入图像描述](../Images/6dfb42a3487f2c34f8d064016224b9e6.png)](https://i.stack.imgur.com/m66ab.png)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-01-02T19:40:59.577

我在尝试在 IntelliJ 中调试 Rust 项目时遇到了这个问题。事实证明，问题在于`.cargo/config`文件中的`rustflags`变量设置为 include `--compress-debug-sections=zlib-gabi`。这显然剥夺了 IntelliJ 激活调试器所需的信息。暂时删除该标志删除了“断点当前不会被命中”消息，并允许调试器按预期工作。

# zend-framework - 不顾一切的“未捕获的异常”

> ID：15205753
> 
> 赞同：0
> 
> 时间：2013-03-04T16:03:31.920
> 
> 标签：zend-framework, exception, error-handling, uncaught-exception

所以我的 Zend 框架一直拒绝处理异常，尽管我做了每个人在谷歌上建议的一切......所以我在这里问我可能做错了什么......

我在 app/modules/default/controllers 中设置了 ErrorController.php 文件，内容如下：

```
<?php
class ErrorController extends Zend_Controller_Action
{
    public function errorAction()
    {
        $error = $this->_getParam('error_handler');
        switch ($error->type){
            case "EXCEPTION_NO_CONTROLLER":
            case "EXCEPTION_NO_ACTION":
                $this->getResponse()->setHttpResponseCode(404);
                $this->view->title = "Page Not Found";
                $this->view->message = "404 - Oops ! You took a wrong turn...";
                break;
            default:
                $this->getResponse()->setHttpResponseCode(500);
                $this->view->title = "Unexpected Error";
                $this->view->headmessage = "500 - Oops ! Something wrong happened... ";
                $this->view->message     = $error->exception->getMessage();
                break;
        }
        $this->view->exception = $error->exception;
        // pass the request to the view
        $this->view->request   = $error->request;
    }
} 
```

在我的 index.php 中，我只包含 app/bootstrap.php，其中包含以下内容：

```
$front = Zend_Controller_Front::getInstance();
$front->throwExceptions(false);
$front->setControllerDirectory('./application/controllers');
$front->registerPlugin(new Zend_Controller_Plugin_ErrorHandler()); 
```

然而，在我调用的代码中的任何时候，例如：

```
throw new Zend_Controller_Exception('This page does not exist', 404); 
```

我收到通常令人讨厌的“致命错误：未捕获的异常 'Zend_Controller_Exception' 并带有消息'此页面不存在'”，等等等等。

有什么我做错了吗？我想知道“./application/controllers”是否正确，因为据我所知，我的 Zend 框架文件夹中没有一个“应用程序”文件夹......但我在网上找不到任何关于它的信息！并创建一个将我的 ErrorController.php 放入其中使我到目前为止无处可去...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T16:13:53.410

好吧，事实证明，我的身份验证插件与重定向冲突（我现在知道这是一个很常见的问题），所以我设法通过摆弄我的身份验证插件的规则来解决它。

值得注意的是，必须在身份验证插件中处理 404 错误重定向，方法是使用“isDispatchable”方法检查路由并“手动”将路由更改为特定的 404 页面。

Well at least that did it for me, but the important thing to know is that there is no single solution to Authentication Plugin conflicts because every authentication plugin is different, depending on the purpose of it.

# asp.net - 如何让我的 ASP.net Web 应用程序知道用户所在位置的时间？

> ID：15205755
> 
> 赞同：1
> 
> 时间：2013-03-04T16:03:47.920
> 
> 标签：asp.net, time, timezone

我正在开发一个跟踪我的组织的日程安排的 Web 应用程序。有超过 100 个不同的官方位置可以使用它。当用户登录时，用户的物理位置会保存在会话中。

应用程序上有一个用户可以单击的按钮。我有一个要求，当用户单击按钮时，应用程序必须记录它在用户物理位置的时间。

我知道将应用程序设计为在内部使用 UTC 可能是有意义的，但该程序多年来一直使用本地时间。但是，到目前为止，我看不到有人做过任何需要使用当前时间（日期除外）的事情。

我可以在我的数据库中看到每个位置都有一个应该对应于时区的“区域设置 ID”，但我知道在世界各地考虑“夏令时”和“夏令时”的方式存在差异.

考虑所有这些事情的有效方法是什么，以便当用户在 100 个位置之一登录时，当他单击按钮时，我可以知道用户的物理位置是什么时候？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T18:36:19.730

我想我已经弄清楚了。到目前为止，我至少能够在我测试过的一个位置验证此解决方案。

我提到的“本地 ID”与您可以传递给各种 .net 时区函数（例如 .net 时区函数）的字符串相同`TimeZoneInfo.ConvertTimeBySystemTimeZoneId`。这个函数似乎足以获取用户所在位置的当地时间。

你们中的一些人在评论中提出了一个很好的观点，即用户欺骗系统的动机可能如何发挥作用，但我相信我的解决方案无论如何都有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T16:08:03.783

您将无法保证它是正确的，但您可以使用 javascript（通过调用`new Date()`）检索浏览器认为的日期和时间，然后使用 AJAX 将该值发布到服务器 - 从那里做任何您需要的事情去做。

从用户的角度来看，这个日期很有可能是正确的。

# java - JXTableHeader resetSortOrder on Shift + 单击

> ID：15205756
> 
> 赞同：1
> 
> 时间：2013-03-04T16:03:51.780
> 
> 标签：java, swing, swingx, jxtable

我使用 JXTable 和 JXTableHeader 来显示可排序的表。JXTableHeader 支持一种重置排序顺序的方法，方法是按住 shift 并同时左键单击标题。问题如下： 这种重置模式是不可能的 atm，因为 Java Swing 的 BasicTableHeaderUI 将鼠标侦听器添加到 JXTableHeader，即使我将自己的侦听器添加到 JXTableHeader，BasicTableHeaderUI 也会被触发，尽管我在侦听器的 mouseClick 方法中重置了排序顺序，但BasicTableHeaderUI 立即将同一列设置为在其自己的 mouseClick 方法中排序。问题 #2，我不能在事件上使用消耗，因为 BasicTableHeaderUI 的侦听器只是忽略了标志。

如何防止以干净的方式触发 BasicTableHeaderUI 的侦听器？

解决方案：

[这](https://stackoverflow.com/questions/14437547/sort-jtable-when-mouse-released/14439616#14439616)是我采用的解决方案。我为 BasicTableHeaderUI 的 MouseListener 实现了一个包装器，并将其更改为我在 updateUI 上的包装器。我的包装器只是在特定条件下（-> resetSortOrder）忽略了包装的 MouseListener 的 mouseClick 调用。

# facebook - Spotify 应用程序：Facebook 墙贴

> ID：15205758
> 
> 赞同：-1
> 
> 时间：2013-03-04T16:03:54.897
> 
> 标签：facebook, spotify

我一直在通过 Spotify API 和网络寻找答案，但没有找到我需要的东西。我需要通过 Spotify 应用程序在某人的 Facebook 墙上发布消息或链接。

由于 Spotify 使用 Facebook 作为登录机制运行，这应该是可能的，对吧？关于使用什么电话来发表这篇文章的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:59:10.393

我敢打赌 Spotify 不提供此功能。想一想：来自 facebook 应用程序的任何帖子都会在整个网站上带有该应用程序的名称和图标。这意味着 Spotify 应用程序开发人员可以在 Facebook 上发布任何带有 Spotify 名称和品牌的内容。那是一场噩梦。

因此，鉴于该逻辑，您还必须让用户验证您自己的 Facebook 应用程序，并使用 Facebook 的[Graph API](https://developers.facebook.com/docs/reference/api/)发布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T14:51:40.487

这行不通。但是，您可以创建自己的应用程序并使用该应用程序 ID 从 Spotify 应用程序发布您自己的消息。您可以使用 Auth 模型轻松地对 Facebook 用户进行身份验证。

[http://developer.spotify.com/technologies/apps/docs/09321954e7.html](http://developer.spotify.com/technologies/apps/docs/09321954e7.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T16:26:34.097

这是我找到的解决方案：

```
auth.showAuthenticationDialog(
    'https://www.facebook.com/dialog/feed?app_id=YOUR_APP_ID&redirect_uri=http://my.domain.com&link=http://www.google.com&display=popup', //Facebook post popup
    'http://my.domain.com', //success URL
    {
        //Callback
        onSuccess : function(response) { },
        onFailure : function(error) { },
        onComplete : function() { }
    }
); 
```

如果您希望在验证帖子后正确关闭弹出窗口，facebook 弹出 URL 中的参数“redirect_uri”必须对应于方法 auth.showAuthenticationDialog() 的第二个参数。

您可以在此处找到 auth.showAuthenticationDialog() 的文档：http: [//developer.spotify.com/technologies/apps/docs/09321954e7.html](http://developer.spotify.com/technologies/apps/docs/09321954e7.html)

# lucene - 查询中的休眠搜索忽略分析器

> ID：15205761
> 
> 赞同：0
> 
> 时间：2013-03-04T16:04:02.943
> 
> 标签：lucene, hibernate-search

我正在尝试使用聚合两个字段的自定义字段桥来查询字段。典型值如下所示：

```
myField:12345%FIELDSEPERATOR%4 
```

这是 12345 和 4 的组合。它被正确索引，但是使用 hibernate 搜索查询 API，如何禁用分析器？

```
FullTextEntityManager em = getFTEM();
SearchFactory searchFactory = em.getSearchFactory();
QueryBuilder qb = searchFactory.buildQueryBuilder().forEntity(User.class).get();
Query q = qb.phrase()
            .onField("myField")
            .ignoreAnalyzer()
            .sentence("12345%SEPERATOR%4")
            .createQuery(); 
```

q 这里被解析为`myField:"12345 seperator 4"`中断搜索，即使我指定了ignoreAnalyzer。为了比较，以下生成一个工作查询

```
TermQuery tq = new TermQuery(new Term("myField", "12345%SEPERATOR%4")); 
```

结果查询：`myField:"12345%SEPERATOR%4"`

我知道我可以简单地使用 TermQuery，但我想享受 Hibernate 搜索的其他简单功能，例如 .boostedTo()。

使用内部使用 Lucene 3.1 的 Hibernate Search 3.4.2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T16:14:38.457

问题是您正在定义一个*短语*查询，您应该使用*关键字*

```
Query q = qb.keyword()
    .onField( "myField" )
    .matching( "12345%SEPERATOR%4" )
    .createQuery(); 
```

# puppet - 禁用用户定义类型中的“通知”事件传播

> ID：15205765
> 
> 赞同：3
> 
> 时间：2013-03-04T16:04:30.390
> 
> 标签：puppet

有没有办法禁用`notify`用户定义类型中的事件传播？

如果你看下面的例子：

```
 define mytype() {
      file { 'myfile': }
      exec { 'myexec': }
  }

  mytype { 'foo': notify => Service['myservice'] } 
```

如何确保`Service['myservice']`仅在`File['myfile']`更改时收到通知，而不是在`Exec['myexec']`执行时收到通知？

*我需要在定义的类型内*进行事件传播，但我只想在`File['myfile']`更改时将其传播到外部。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T17:38:47.823

关于文件和 exec 的更多细节会很好，但这是一个答案。希望能帮助到你...

您可以将文件订阅到服务，例如

```
service { 'myservice' :
            ensure => running,
            subscribe => File['myfile'],
        } 
```

# php - where子句查询mysql中的多列

> ID：15205771
> 
> 赞同：0
> 
> 时间：2013-03-04T16:04:48.767
> 
> 标签：php, mysql, where-clause, multiple-columns

[具有来自 mysql 数据库的多列的选择框](https://stackoverflow.com/questions/15204674/selectbox-with-multiple-columns-from-mysql-database)

以下代码是来自 zgr024 的中奖代码

```
 <?php 
    include '../config.php';
    $sql = "SELECT * FROM megabase";  
    $resultaat = mysql_query($sql) or die (mysql_error());  
    $domains = array();
    while ($row = mysql_fetch_array($resultaat))       
    { 
       if (!empty($row['domeinnaam1'])) $domains[] = $row['domeinnaam1'];
       if (!empty($row['domeinnaam2'])) $domains[] = $row['domeinnaam2'];
    }
?>

   <select size="1" name="domeinnaam">
<?php
    foreach ($domains as $domain)
    {
        echo "<option>$domain</option>";
    } 
?>
    </select> 
```

但是这段代码在我有以下代码的下一页上导致了一个预期的错误。

```
 <?php 

     //MySQL Database Connect
     include 'config.php';

    $domeinnaam=$_POST['domeinnaam']; 

    $data = 'SELECT * FROM megabase WHERE domeinnaam = "'.$domeinnaam.'"'; 
      $query = mysql_query($data) or die("Couldn't execute query. ". mysql_error()); 
      $data2 = mysql_fetch_array($query); 

    ?> 
```

如何更改最后一个代码以使用第一个代码：

我试过了：

```
 <?php 

         //MySQL Database Connect
         include 'config.php';

        $domeinnaam=$_POST['domeinnaam'];
       $domeinnaamquerry='domeinnaam1'.'domeinnaam2'.'domeinnaam3'.'domeinnaam4'.'domeinnaam5'.'do meinnaam6'.'domeinnaam7'.'domeinnaam8'.'domeinnaam9'.'domeinnaam10';

        $data = 'SELECT * FROM megabase WHERE $domeinnaamquerry = "'.$domeinnaam.'"'; 
          $query = mysql_query($data) or die("Couldn't execute query. ".             mysql_error()); 
          $data2 = mysql_fetch_array($query); 

        ?> 
```

但我收到以下错误：无法执行查询。“where 子句”中的未知列“$domeinnaamquery”

Okey 让它现在工作它很草率，但工作感谢大家的投入，这很有帮助。并感谢您的警告。

这是代码

```
 <?php 

      //MySQL Database Connect
      include 'config.php';

     $domeinnaam=$_POST['domeinnaam']; 

     $data = 'SELECT * FROM megabase WHERE domeinnaam1="'.$domeinnaam.'" OR domeinnaam2="'.$domeinnaam.'" OR domeinnaam3="'.$domeinnaam.'" OR domeinnaam4="'.$domeinnaam.'" OR domeinnaam5="'.$domeinnaam.'" OR domeinnaam6="'.$domeinnaam.'" OR domeinnaam7="'.$domeinnaam.'" OR domeinnaam8="'.$domeinnaam.'" OR domeinnaam9="'.$domeinnaam.'" OR domeinnaam10="'.$domeinnaam.'"    '; 
       $query = mysql_query($data) or die("Couldn't execute query. ". mysql_error()); 
       $data2 = mysql_fetch_array($query); 

     ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T16:23:36.657

尝试

```
<?php 

    //MySQL Database Connect
    include 'config.php';

    $domeinnaam=$_POST['domeinnaam']; 

    $data = "SELECT * FROM megabase WHERE domeinnaam1 = '$domeinnaam' OR domeinnaam2 = '$domeinnaam' "; 
    $query = mysql_query($data) or die("Couldn't execute query. ". mysql_error()); 
    $data2 = mysql_fetch_array($query); 

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T16:10:05.600

如果你希望一个变量在 PHP 中被解释为它的值，你不能使用单引号。

```
$foo = 'World';

echo 'Hello $foo'; // Hello $foo
echo "Hello $foo"; // Hello World 
```

因此，你想要

```
$data = "SELECT * FROM megabase WHERE $domeinnaamquerry = '".$domeinnaam."'"; 
```

尽管阅读[此](http://en.wikipedia.org/wiki/SQL_injection)和[此](http://xkcd.com/327/)以了解您为什么***真的***不想要那个。

# forms - 在 Meteor 中提交表单而不使用附加功能

> ID：15205773
> 
> 赞同：12
> 
> 时间：2013-03-04T16:04:53.783
> 
> 标签：forms, meteor, onsubmit

我想在我的 Meteor html 模板中有一个表单，并在提交时将该数据插入到我的 MongoDB 列表中。我的问题是：

*   这可能不使用额外的软件包吗？我可以添加一个 HTML 表单作为模板吗？
*   on submit 事件是否适用于最新的 Meteor？
*   我已经读到我们可以将 click 事件用于提交按钮：你能告诉我如何在我的 DOM 中查找我的输入元素的值吗？（不使用jQuery？）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-04T17:22:59.903

JQuery 包含在流星中并且非常简化，为什么要避免它？用js手动遍历dom相当长

您可以使用 javascript 提交您的表单 ajax 样式：

因此，您可以像往常一样在模板中使用普通表单 html：

```
// HTML
<form id="myform">
    <input type="text" name="firstname"/>
    <input type="text" name="lastname"/>
    <input type="text" name="email"/>
    <input type="submit" id="submit"/>
</form>

// Client JS
function submitme() {
    form = {};

    $.each($('#myform').serializeArray(), function() {
        form[this.name] = this.value;
    });

    // Do validation on 
    // form = {
    //     firstname: 'first name',
    //     lastname: 'last name', 
    //     email: 'email@email.com'
    // }

    MyCollection.insert(form, function(err) {
        if(!err) {
            alert("Submitted!");
            $('#myform')[0].reset();
        } else {
            alert("Something is wrong");
            console.log(err);
        }
    });

} 
```

您可以绑定选择按钮以在单击时插入数据：

Event map binding:

```
Template.templatename.events({
    'submit' : function(event) {
        event.preventDefault(); //prevent page refresh
        submitme();
    }
}); 
```

**If you *HATE* jQuery & cant use it at all**

```
// HTML
<form id="myform">
    <input id="firstname" type="text" name="firstname"/>
    <input id="lastname" type="text" name="lastname"/>
    <input id="email" type="text" name="email"/>
    <input type="submit" id="submit"/>
</form>

// Client JS
function submitme() {

    form = {
        firstname: firstname.value,
        lastname: lastname.value,
        email: email.value
    };

    // Do validation on 
    // form = {
    //     firstname: 'first name',
    //     lastname: 'last name',
    //     email: 'email@email.com'
    // }

    MyCollection.insert(form, function(err) {
        if (!err) {
            alert("Submitted!");

            // Empty field values
            email.value = "";
            firstname.value = "";
            lastname.value = "";
        } else {
            alert("Something is wrong");
            console.log(err);
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-12-27T03:07:18.563

Just for reference, there is a slightly cleaner way to do forms in Meteor without all the global jQuery references, which I find to be messy. It makes code a lot less error prone by scoping to the template, which is provided in the event handler. Here's an example using the form described in the other answer:

**Template code:**

```
<template name="foo">
    <form id="myform">
        <input type="text" name="firstname"/>
        <input type="text" name="lastname"/>
        <input type="text" name="email"/>
        <input type="submit" id="submit"/>
    </form>
</template> 
```

**Event handler:**

```
Template.foo.events({'submit form' : function(event, template) {
    event.preventDefault();

    firstname = template.find("input[name=firstname]");
    lastname = template.find("input[name=lastname]");   
    email = template.find("input[name=email]");

    // Do form validation

    var data = {
      firstname: firstname.value,
      lastname: lastname.value,
      email: email.value
    };

    email.value="";
    firstname.value="";
    lastname.value="";

    MyCollection.insert(data, function(err) { /* handle error */ });

}}); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-01-31T05:57:38.910

The most simple and easiest solution of all.

```
// HTML
<template name="formTemplate">
    <form>
        <input type="text" name="firstname"/>
        <input type="text" name="lastname"/>
        <input type="submit" id="submit"/>
    </form>
</template>

// JavaScript
Template.formTemplate.events({
    'submit form': function(event, template) {
        event.preventDefault(); // prevent page reload
        var firstname = event.target.firstname.value;
        var lastname = event.target.lastname.value; 
    }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-12T13:24:44.173

Wanted to share my way it's real simple:

html:

```
<form id="update-profile">
  <div class="form-group">
    <input type="text" required class="form-control" name="name" placeholder="Full Name" value="{{profile.name}}">
  </div>
  ... 
```

JS

```
Template.profileEditModal.events({
      'submit form': function (e, t) {
        e.preventDefault();
        var doc = {};

        t.$('input').each(function () {
          if (this.value) {
            doc[this.name] = this.value;
          }
        });
}); 
```

Results in nice and clean `Object {name: "...", email: "..."}`

And if you're using `SimpleSchema` do `check(doc, Schemas.updateProfile);` over ther server for validation.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-13T06:45:11.677

This isn't exactly answering your question. But here's how I'd do it.

1.  meteor add aldeed:autoform

2.  sample schema you already have...

    ```
    Books = new Mongo.Collection("books");
    Books.attachSchema(new SimpleSchema({
      title: {
        type: String,
        label: "Title",
        max: 200
      },
      author: {
        type: String,
        label: "Author"
      },
      copies: {
        type: Number,
        label: "Number of copies",
        min: 0
      },
      lastCheckedOut: {
        type: Date,
        label: "Last date this book was checked out",
        optional: true
      },
      summary: {
        type: String,
        label: "Brief summary",
        optional: true,
        max: 1000
      }
    }));
    ```

3. books.tpl.jade (from mquandalle:jade)

```
+quickForm collection="Books" id="insertBookForm" type="method" meteormethod="insertBook" 
```

4.

```
Meteor.methods({
  'insertBook': function (doc) {
      // server side validation, insert, error etc...
    }
})
```

This way you get client side validation for free, bootstrap styling for free, customise field visibility or styles if you need to. For 5 minutes of development, this is a pretty good return. I'd use the powerful packages that others have put time and thought into and build rapidly on top of that.

# iphone - Testflight 应用程序/IPA 安装要求输入密码

> ID：15205777
> 
> 赞同：0
> 
> 时间：2013-03-04T16:05:08.323
> 
> 标签：iphone, ios, testflight

我是 TestFlight 的新手。我构建了我的 IPA 并使用 TestFlight 分发它。我的大多数 Beta 测试人员都能够毫无问题地安装它，*但*少数人报告说他们被提示输入密码屏幕 - 这看起来不像 iPhone 弹出的 4 位数密码屏幕，以确保通常的安全性。请提供一些关于正在发生的事情的指导 -

我认为它与 TF 无关，只是想验证它。

提前致谢。RS

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-27T22:16:44.337

TestFlight 可能很脆弱，让他试试这些东西：[http ://help.testflightapp.com/customer/portal/articles/867631](http://help.testflightapp.com/customer/portal/articles/867631)

# axapta - 更改 Ax2012 中复选框的默认值

> ID：15205784
> 
> 赞同：3
> 
> 时间：2013-03-04T16:05:20.493
> 
> 标签：axapta, x++, microsoft-dynamics, dynamics-ax-2012, ax

对于复选框，我试图将默认值设置为选中。

我将属性中的值设置为 1
默认情况下未选中。
重新启动 AOS，进行完全编译和 CIL 生成。
仍然没有运气。

我缺少什么想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T17:13:47.160

尝试使用 FormCheckBoxControl 方法在 run 方法或 classDeclaration 中将值输入为 1。

[复选框值] = FormCheckBoxControl.checked(1);

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-09T22:00:20.463

如果控件没有直接绑定到数据源记录，而不是这样：

```
ctrl.checked(true); 
```

用这个：

```
ctrl.value(true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T16:11:51.210

如果复选框链接到 DataField，则应将默认值放在`initValues`Data Source 的方法上：

```
tableName.fieldNoYes = NoYes::Yes; 
```

如果复选框未链接到数据，您可以在表单的 run 方法（在 super() 调用之后）检查它（假设控件具有`AutoDeclaration`属性 to `Yes`.

```
CheckBoxControl.checked(true); 
```

# autohotkey - 简单的建议脚本不起作用

> ID：15205792
> 
> 赞同：0
> 
> 时间：2013-03-04T16:05:42.520
> 
> 标签：autohotkey

我对 AutoHotKey 完全陌生。

我喜欢将大写锁定设置为仅在先按下 shift 键时才继续的想法，因此我按照这些说明将以下内容复制到我的脚本中（[来自此页面](http://www.autohotkey.com/docs/misc/Remap.htm)）

```
Capslock::Ctrl 
```

它使 Capslock 成为控制键。要保留打开和关闭 Capslock 的功能，还要添加重新映射`+Capslock::Capslock`（当您按住 shift 键并按 Capslock 时，这会打开和关闭 Capslock）。

我成功地将大写锁定键用作 Ctrl 键，但是当我按下 Shift + Capslock 时，它什么也没做。

有人可以解释为什么它不工作并告诉我我需要做什么才能让它工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T18:41:45.497

当我运行以下代码时，它运行良好。

```
+Capslock::Capslock
$Capslock::Ctrl 
```

你也可以试试这个吗？

# graph - Pregel 是否允许修改图的结构？

> ID：15205807
> 
> 赞同：0
> 
> 时间：2013-03-04T16:06:43.743
> 
> 标签：graph

如果是这样，当图形需要修改时，它如何归档良好的性能？我所说的修改是添加或删除顶点或边。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-04T16:44:36.407

是的，pregel 允许修改结构。这称为突变。它在论文的第 3.4 节拓扑突变中介绍。

根据该论文，可在（[http://kowshik.github.io/JPregel/pregel_paper.pdf](http://kowshik.github.io/JPregel/pregel_paper.pdf)）获得：

> “多个顶点可能在同一个超步中发出冲突请求（例如，添加顶点 V 的两个请求，具有不同的初始值）。我们使用两种机制来实现确定性：部分排序和处理程序。
> 
> 与消息一样，在发出请求后，突变在超级步骤中生效。在该超步中，首先执行删除，在删除顶点之前删除边，因为删除顶点会隐式删除其所有出边。添加在删除之后，在边添加之前添加顶点，并且所有突变都在调用 Compute() 之前。对于大多数冲突，这种部分排序会产生确定性的结果。
> 
> 剩余的冲突由用户定义的处理程序解决。如果有多个请求在同一个超步中创建同一个顶点，那么默认情况下系统只是任意选择一个，但有特殊需求的用户可以通过在其 Vertex 子类中定义适当的处理程序方法来指定更好的冲突解决策略。相同的处理程序机制用于解决由多个顶点删除请求或多个边添加或删除请求引起的冲突。我们将解决方案委托给处理程序以保持 Compute() 的代码简单，这限制了处理程序和 Compute() 之间的交互，但在实践中并没有成为问题。”

# php - 是否可以创建一个 Dropbox 应用程序以使用 PHP 将文件从一个文件复制到另一个文件？

> ID：15205808
> 
> 赞同：0
> 
> 时间：2013-03-04T16:06:48.203
> 
> 标签：php, dropbox

我设法创建了一个 Dropbox 应用程序来将照片上传到我的 Dropbox 帐户。我想知道是否可以从我的网站执行 php 以将文件从一个文件夹复制到同一帐户中的另一个文件夹？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:14:53.403

`https://api.dropbox.com/1/fileops/copy`使用`root`,`from_path`和`to_path`参数发送 POST 请求。

[DropBox](https://www.dropbox.com/developers/core/api#fileops-copy)上的完整文档

# colorbox - 将 Cloudfront 视频流式传输到嵌入在 colorbox 中的 JWplayer

> ID：15205810
> 
> 赞同：1
> 
> 时间：2013-03-04T16:06:49.883
> 
> 标签：colorbox, jwplayer

我正在尝试将 JWplayer 设置为出现在彩盒中并播放从 CloudFront 流式传输的电影。它无法正常工作，我不确定问题出在 JWplayer、Colorbox 还是我 :-)

`<embed>`使用带有和标签的JWplayer 5 `<object>`，它工作正常。当我嵌入 JWplayer 5 时`jwplayer.setup`，颜色框的宽度和高度被转置

使用 JWplayer 6，当从 CloudFront 流式传输时，颜色框的尺寸被转置，但从 CloudFront 下载时它们是正确的。

在 Firefox 和 IE 中播放电影时还有一些其他问题，但我目前不关心这些问题。

我用来设置 JWplayer 5 和 Colorbox 的代码如下：

```
<link rel="stylesheet" href="colorbox/example1/colorbox.css">
<script src="http://ajax.microsoft.com/ajax/jQuery/jquery-1.9.1.min.js"></script>
<script src="/test/colorbox/jquery.colorbox-min.js"></script>
<script src="/test/jwplayer5/jwplayer.js"></script>
<script>
  jQuery(document).ready(function () {
    jQuery('a.cbox').colorbox({ inline:true, opacity:0.8 });
  });
</script> 
```

这是我用来嵌入 JWplayer 5 的代码：

```
<a href="#example-1" class="cbox" title="Example 1">Play movie</a>

<div style="display: none;">
  <div id="example-1"></div>
  <script type="text/javascript">
      jwplayer("example-1").setup({
      flashplayer: "/test/jwplayer5/player.swf",
      file: "dogs_600.mp4",
      streamer: "rtmp://s14flalja9b5hr.cloudfront.net/cfx/st",
      width: 480,
      height: 270,
      autostart: true
  });
  </script>
</div> 
```

我用来设置 JWplayer 6 和 Colorbox 的代码如下：

```
<link rel="stylesheet" href="colorbox/example1/colorbox.css">
<script src="http://ajax.microsoft.com/ajax/jQuery/jquery-1.9.1.min.js"></script>
<script src="/test/colorbox/jquery.colorbox-min.js"></script>
<script src="/test/jwplayer6/jwplayer.js"></script>
<script>
  jQuery(document).ready(function () {
    jQuery('a.cbox').colorbox({ inline:true, opacity:0.8 });
  });
</script> 
```

我用来嵌入 JWplayer 6 的代码如下：

```
<a href="#example-1" class="cbox" title="Example 1: Streaming from CloudFront">Streaming from CloudFront</a><div style="display: none;">
  <div id="example-1"></div>
  <script type="text/javascript">
    jwplayer("example-1").setup({
      file: "rtmp://s14flalja9b5hr.cloudfront.net/cfx/st/mp4:dogs_600.mp4",
      autostart: true,
      width: 480,
      height: 270
    });
  </script>
</div> 
```

我已经设置了几个页面来演示这些问题：

[http://www.frankcommunication.ie/test/jwplayer5-colorbox-example.htm](http://www.frankcommunication.ie/test/jwplayer5-colorbox-example.htm) [http://www.frankcommunication.ie/test/jwplayer6-colorbox-example.htm](http://www.frankcommunication.ie/test/jwplayer6-colorbox-example.htm)

我使用的确切版本是：

JWplayer 5.10.2295（许可）

JWplayer 6.2.3115（未授权）

彩盒 v1.4.3

jQuery 1.9.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-05T10:33:25.137

很抱歉花了这么长时间才解决这个问题，但我找到了我的问题的答案，并想在此处添加它，以使将来遇到相同问题的任何人受益......

我尝试按照建议使用 FancyBox，但它也有尺寸问题，所以我回到 ColorBox 并弄清楚了。

修复很简单，只需在 ColorBox 设置中将尺寸指定为 innerWidth 和 innerHeight 参数，如下所示：

```
 jQuery(document).ready(function () {
    jQuery('a.cbox').colorbox({ 
        inline:true, 
        opacity:0.8,
        innerWidth: 480,
        innerHeight: 270
    });
  }); 
```

JWplayer 嵌入代码和之前一样：

```
<a href="#example-1" class="cbox" title="Example 1">Play movie</a>

<div style="display: none;">
  <div id="example-1"></div>
  <script type="text/javascript">
      jwplayer("example-1").setup({
          flashplayer: "/test/jwplayer5/player.swf",
          file: "dogs_600.mp4",
          streamer: "rtmp://s14flalja9b5hr.cloudfront.net/cfx/st",
          width: 480,
          height: 270,
          autostart: true
      });
  </script>
</div> 
```

# c# - .NET 客户端连接到 ssl Web API

> ID：15205814
> 
> 赞同：23
> 
> 时间：2013-03-04T16:06:51.387
> 
> 标签：c#, asp.net-web-api

我有一个想与 ssl 一起使用的 ASP.NET Web API。当前服务器正在使用自签名证书，此时允许使用 http 和 https。我有一个非常基本的测试客户端，它适用于 http，但不适用于 https。我想知道如何修改下面的客户端代码，以便它可以与 https 一起使用。目前 IE、Firefox 和 Chrome 都可以使用 http 和 https（带有证书警告）连接到 Web API，所以这让我相信我不应该修改服务器上的任何内容，只需在客户端代码中。这是客户端代码：

```
static void Main(string[] args)
{
    try
    {
        if (args.Length != 1)
        {
            Console.WriteLine("Please provide a url, and only a url.");
            return;
        }

        var url = new Uri(args[0]);
        var urlAuthority = url.GetLeftPart(UriPartial.Authority);
        var urlPathQuery = args[0].Substring(urlAuthority.Length);
        HttpClient client = new HttpClient();
        client.BaseAddress = new Uri(urlAuthority);
        HttpResponseMessage response = client.GetAsync(urlPathQuery).Result;
        if (response.IsSuccessStatusCode)
            Console.WriteLine(response.Content.ReadAsAsync<string>().Result); // expecting scalar results only
        else
            Console.WriteLine("{0} ({1})", (int)response.StatusCode, response.ReasonPhrase);
    }
    catch (Exception ex)
    {
        Exception tempEx = ex;
        while (tempEx != null)
        {
            Console.WriteLine(tempEx.Message);
            tempEx = tempEx.InnerException;
        }
    }
} 
```

当我使用我的 http url 运行上述代码时，它工作正常。当我将 url 更改为 https 时，会打印以下错误：

```
One or more errors occurred.
An error occurred while sending the request.
The underlying connection was closed: Could not establish trust relationship for the SSL/TLS secure channel.
The remote certificate is invalid according to the validation procedure. 
```

我的一个问题是客户端是否必须手动向服务器发送公钥，以便它知道如何发回加密响应，或者这是否在幕后自动发生？其次，现在在看到最后一个错误之后，我想知道我是否还必须在客户端内做其他事情来忽略证书警告并相信这个证书可以继续进行？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-03-04T16:41:18.350

看看[C# Ignore certificate errors](https://stackoverflow.com/questions/2675133/c-sharp-ignore-certificate-errors) SO question。我相信您可以使用 ServicePointManager 添加证书验证处理程序来规避证书验证。不过，在您的生产环境中使用签名证书可能是个好主意。

```
ServicePointManager
    .ServerCertificateValidationCallback += 
    (sender, cert, chain, sslPolicyErrors) => true; 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2014-11-07T18:51:50.803

这对我有用。只需在调用 GetAsync 之前添加以下内容。

```
ServicePointManager.ServerCertificateValidationCallback = delegate { return true; }; 
```

这将忽略 SSL 错误。仅建议在内网环境或其他无法伪造服务器身份的封闭网络中使用。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-04T16:14:47.297

此错误消息意味着客户端在 SSL 握手期间不信任服务器证书。有些浏览器更宽容一些，会给你一个“红条”，但从代码调用会导致 401 和被拒绝的调用。

您不需要对 IIS 中的客户端证书设置做任何事情（因为我假设您没有使用客户端证书）。

此异常消息告诉您在客户端上验证时自签名证书链被拒绝。您可能要通过导出（没有私钥）自签名证书并将其作为根证书安装在客户端计算机上来解决此问题。

如果这不起作用，您需要制作一个新的 CA（证书颁发机构证书），然后生成一个与 CA 签署的新服务器证书。这个 CA 最终必须作为根证书安装在客户端计算机上。

[这是一篇很好的文章](http://www.codeproject.com/Tips/159604/SSL-MakeCert-pvk2pfx-Client-Server-Certificate-Gen)，展示了使用 makecert 和 pvk2pfx 的过程。

**编辑：** [看起来可能有一种方法](http://www.west-wind.com/weblog/posts/2011/Feb/11/HttpWebRequest-and-Ignoring-SSL-Certificate-Errors)可以配置`HttpClient`为忽略 SSL 错误。但是，我强烈建议您从一开始就尽量不要出现 SSL 错误。

# parameters - 在 Visual Basic VB.Net 2010 中使用 System.DateTime 类型作为可选参数

> ID：15205818
> 
> 赞同：2
> 
> 时间：2013-03-04T16:06:56.877
> 
> 标签：parameters, constructor, vb.net-2010, default-value, optional

我正在尝试将可选的 System.DateTime 参数传递给 VB.NET 2010 中的构造函数。

```
...
Public Sub New(Optional ByVal givendate As System.DateTime = System.DateTime.MinValue)
    ... 
```

我收到一个错误“Konstanter Ausdruck erforderlich”，翻译为“需要恒定值”。我试图用 MinValue 填充一个变量，但我必须将此变量设为只读，这在尝试将默认值传递给可选参数时会导致完全相同的问题。有没有办法将 MinValue 作为默认值传递给可选的 DateTime （实际上是 Date 类型）。谢谢你的听众。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T16:19:06.180

好吧，我同时找到了一个解决方案（感谢 vbdotnetformums.com 的人们，所以我想分享结果：

第一个可能的解决方案是将参数定义为 Object，将默认值定义为 Nothing。然后投射日期时间。

第二个更清洁的解决方案（也是我遵循的一个）是重载构造函数。

这是 IanRyder (vbdotnetforums.com) 的解决方案：

```
Public Class MyClassExample
  Public Property DateToUseInClass As DateTime

  Public Sub New()
    DateToUseInClass = System.DateTime.Now
  End Sub

  Public Sub New(ByVal GivenDate As System.DateTime)
    DateToUseInClass = GivenDate
  End Sub
End Class 
```

然后我可以实现我想要的行为：

```
Dim myVariable As New MyClassExample

Dim myVariable As New MyClassExample(DateTime.Today.AddDays(-1)) 
```

它完全按照我想要的方式工作。我希望有一天别人会从中受益。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-10T07:58:40.420

您可以将 Nothing 设置为函数参数的默认值，然后在函数中设置今天的日期时间

```
Public Sub New(Optional ByVal fDate As System.DateTime = Nothing)
        If fDate = Nothing Then
            fDate = Now
        End If
    End Sub 
```

# java - 在 JTextArea 中显示 MalformedURLException

> ID：15205824
> 
> 赞同：-1
> 
> 时间：2013-03-04T16:07:15.013
> 
> 标签：java, jtextarea, malformedurlexception

我正在研究具有多个组件的 Java 程序。我想要实现的是，任何异常都显示在 JTextArea 中，而不是控制台中。下面的代码不起作用。我能做些什么？

catch ( MalformedURLException e) { textArea.append(e); }

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:10:09.913

JTextArea 不支持 append() 方法。如果你只需要显示错误，你可以试试这个：

```
catch ( MalformedURLException e) { textArea.setText(e.toString()); } 
```

如果您需要附加消息，您可以试试这个：

```
catch ( MalformedURLException e) { textArea.setText(textArea.getText()+e.toString()); } 
```

# java - JDBC“数据库表被锁定”错误

> ID：15205825
> 
> 赞同：0
> 
> 时间：2013-03-04T16:07:17.650
> 
> 标签：java, sqlite, jdbc, locking

我正在开发一个简单的 Java 库，它将提供数据库访问。目前我正在访问 SQLite。我有一个名为 SQlite.java 的类，它只实现实例方法。下面是几个方法的实现：

```
public ResultSet retrieve(String query) {
    try {
        if (this.connection != null) {
            this.statement = this.connection.createStatement();
            return this.statement.executeQuery(query);
        }
    } catch (Exception e) {
        System.err.println("[ERROR] " + e.getMessage());
    }
    return null;
}

public ResultSet listTables() {
    try {
        return this.retrieve("SELECT name FROM sqlite_master WHERE type='table' ORDER BY name");
    } catch (Exception e) {
        System.err.println("[ERROR] " + e.getMessage());
    }
    return null;
}

public boolean hasTable(String tableName) {
    try {
        ResultSet rs = this.listTables();
        while (rs.next()) {
            if (rs.getString(1).equals(tableName)) {
                return true;
            }
        }
    } catch (Exception e) {
        System.err.println("[ERROR] " + e.getMessage());
    }
    return false;
}

public void update(String query) {
    try {
        if (this.connection != null) {
            this.statement = this.connection.createStatement();
            this.statement.executeUpdate(query);
        }
    } catch (Exception e) {
        System.err.println("[ERROR] " + e.getMessage());
    }
}

public void dropTable(String tableName) {
    try {
        if (this.hasTable(tableName)) {
            this.update("DROP TABLE " + tableName); // TEST!
        } else {
            System.err.println("[ERROR] Table '" + tableName + "' not found!");
        }
    } catch (Exception e) {
        System.err.println("[ERROR] " + e.getMessage());
    }
} 
```

当我测试 dropTable() 方法时，我得到一个异常说“数据库表被锁定”。我猜这是由于可能在 hasTable() 方法中调用的非关闭 SELECT 语句。据我所知，即使在运行检索查询时数据库表也被锁定，因此在其他人尝试选择数据时无法更新表。但是如何解决这个问题，我不确定。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T17:04:25.823

我不知道您的环境是什么，但您应该使用带有连接池的数据源，并为每个事务检索并关闭一个连接。

完美的方法可能是使用容器（Spring 或 Java EE 之一）并让他为您管理事务，这样您就不必介意正确管理 JDBC 资源。您还可以指定是否允许更新当前事务并管理其他事务属性，例如隔离。

If you absolutely want to use jdbc directly, the best practice is still to close the connection after usage. If you prefer for obscure reasons to keep your read connection alive i would advise to use 2 different users, one granted with read only access and another one for update whose connections should be systematically closed after each call. In all case you must take care of properly release connection and eventual prepared statements after usage or you will experiment dead locks and / or memory leaks.

cf. [http://javarevisited.blogspot.fr/2012/08/top-10-jdbc-best-practices-for-java.html](http://javarevisited.blogspot.fr/2012/08/top-10-jdbc-best-practices-for-java.html)

# c# - 如何在 VS 2010 中创建关系？

> ID：15205829
> 
> 赞同：1
> 
> 时间：2013-03-04T16:07:38.447
> 
> 标签：c#, visual-studio-2010, linq-to-sql, foreign-keys

如以下屏幕截图所示，我正在尝试在 NOTES.PARENT_ID 和 FILES.ID 之间创建关系。我怎样才能做到这一点？我查看了许多参考资料，例如[http://social.msdn.microsoft.com/Forums/en-US/silverlightwinphone/thread/0043364b-ba03-482c-9fd5-12ae2c7692c3/](http://social.msdn.microsoft.com/Forums/en-US/silverlightwinphone/thread/0043364b-ba03-482c-9fd5-12ae2c7692c3/)和[http://msdn.microsoft.com /en-us/library/bb384511.aspx](http://msdn.microsoft.com/en-us/library/bb384511.aspx)但无法弄清楚。

谢谢你的帮助。

![在此处输入图像描述](../Images/ed34a06e539a4a221af72d76fc8156c8.png)

**编辑：**

![在此处输入图像描述](../Images/3c3c3e6d29e964c23df14a54b02bdee0.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T16:14:54.477

使用 Linq to SQL 设计器，您可以在设计器中单击鼠标右键，然后单击添加 > 关联。

然后，您将从每个表中选择要参与关系的字段。

在您的情况下，父类将是 FILE，子类将是 NOTE。

以这种方式添加关系只会将该关系应用于 Linq to SQL 上下文。要在数据库本身中添加关系，您必须使用表设计器，可以通过在 Visual Studio 的服务器资源管理器中连接到服务器来访问它。

如果首先将关系添加到数据库中，Linq to SQL 设计器会发现这一点并自动添加关系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T16:12:11.280

这在这里解释：http: [//msdn.microsoft.com/en-us/library/ms171915.aspx](http://msdn.microsoft.com/en-us/library/ms171915.aspx)

**您必须先创建两个表的主键！**

*   创建表之间的关系

    关系是在每个表的公共列之间创建的——在本例中，是 CustomerID 列。要在客户表和订单表之间配置新关系：

    将一个 Relation 对象从 Toolbox 的 DataSet 选项卡拖到 Orders 表上。

    “关系”对话框打开。

    在父表框中，选择客户。

    在子表框中，选择订单。

    在 Columns 框中，将 Key Columns 设置为 CustomerID。

    在列框中，将外键列设置为 CustomerID。

    单击确定创建关系；两个表之间的设计器上会出现一条关系线。

    在数据菜单上，选择显示关系标签。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T16:20:53.330

如果可能的话，我会在数据库中定义这种关系。

通过在数据库中的两个表之间创建外键关系：

***(a)***您在问题中要求的关联将被自动添加

和

***(b)***数据库实际上将强制所有`NOTE`行必须与现有的`FILE`

# c# - 正则表达式到分隔符之间的大写

> ID：15205834
> 
> 赞同：1
> 
> 时间：2013-03-04T16:07:54.390
> 
> 标签：c#, regex

我正在寻找一个寻找任何`$$some_val$$`并`some_val`用大写字母替换的正则表达式。

例如输入是：-

```
<p><a href='accept/272/$$id$$'>YES</a></p>
<p>Hi $$FirstName$$ some more text $$date$$ lorem ipsum</p>
<h1>$$club$$</h1>
$$content$$ 
```

将输出：-

```
<p><a href='accept/272/$$ID$$'>YES</a></p>
<p>Hi $$FIRSTNAME$$ some more text $$DATE$$ lorem ipsum</p>
<h1>$$CLUB$$</h1>
$$CONTENT$$ 
```

目前我有以下正则表达式： -

```
var html = Regex.Replace(html, @"\$\$(.*)\$\$", m=> m.Value.ToUpper()); 
```

但它会产生不正确的结果。

```
<p><a href='accept/272/$$ID$$'>YES</a></p>
<p>Hi $$FIRSTNAME$$ SOME MORE TEXT $$DATE$$ lorem ipsum</p>
<h1>$$CLUB$$</h1>
$$CONTENT$$ 
```

因为在`SOME MORE TEXT`开始和结束 $$ 分隔符之间也是大写的。

请注意，$$ 可能会在一行中再次出现或在一行中开始/结束。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T16:11:02.883

您只需要使用非贪婪/惰性匹配量词 ( `*?`)：

```
var regex = new Regex(@"\$\$.*?\$\$");
var input = "this $$is a$$ test of the $$procedure$$";
var output =
     r.Replace(input, m=>m.Value.ToUpper()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T16:19:03.593

试试这个，它应该可以工作：

```
var html = Regex.Replace(html, @"\$\$(.\w*)\$\$", m=> m.Value.ToUpper()); 
```

我已经对其进行了测试：[http ://rubular.com/r/YRI3WrzXAu](http://rubular.com/r/YRI3WrzXAu)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T16:12:54.050

您需要使用 lazy`*?`而不是 eager `*`。`*`其本身试图尽可能多地`*?`匹配，尽可能少地匹配。

```
var html = Regex.Replace(html, @"\$\$(.*?)\$\$", m=> m.Value.ToUpper()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-04T16:23:54.297

另一种选择可能是使用前瞻断言。例如：

```
var html = Regex.Replace(html, @"\$\$(?:[^$]|\$(?!\$))*\$\$", m => m.Value.ToUpper()); 
```

这将搜索两美元，然后搜索任何不是一美元或一美元之后没有另一美元的东西。由于前瞻断言，这种情况下的贪婪无关紧要。

这比您一直使用的 dot-star 高级一点，所以如果 dot-star 适合您，那么坚持使用它可能更现实。

# c# - 职责重叠的状态机模式

> ID：15205835
> 
> 赞同：1
> 
> 时间：2013-03-04T16:07:59.740
> 
> 标签：c#, state-machine

因此，我正在使用 Unity 开发一个项目（使用 C# 脚本，尽管问题很大程度上与语言无关），并且我用一个非常简单的状态机来表示各种游戏状态。

```
public enum State
{
    Initialized,
    ShowBriefing,
    Running,
    Quitting
}; 
```

在我的 GameStateController 类中，我处理来自网络的一些命令，假设它看起来像这样：

```
if (gameState.CurrentState == GameState.State.Initialized) {
    HandleGameCommand ();
    NetworkInterface.Instance.HandlePresenceMessages ();                
} else if (gameState.CurrentState == GameState.State.ShowBriefing) {
    HandleGameCommand ();
    NetworkInterface.Instance.HandlePresenceMessages ();                
} else if (gameState.CurrentState == GameState.State.Running) { 
    HandleGameCommand ();

    if (lookTargets.Count > 0) {
        // do some stuff
    }

    NetworkInterface.Instance.HandlePresenceMessages ();
} else if (gameState.CurrentState == GameState.State.Quitting) {
    NetworkInterface.Instance.Close ();
    Application.Quit ();                
} 
```

HandleGameCommand 通常看起来像这样：

```
Messages.GameCommand gameCommand = NetworkInterface.Instance.NextMessage<Messages.GameCommand> ("game.command");

if (gameCommand != null) {

    switch (gameCommand.type) {
    case "show-briefing":
        // Show the mission briefing. Currently a NOOP.
        if (gameState.CurrentState == GameState.State.Initialized) {
            gameState.CurrentState = GameState.State.ShowBriefing;
        }

        // Do some other stuff
        break;
    case "run":
        // Set the gameState to Running and respond
        gameState.CurrentState = GameState.State.Running;       
        // Do some other stuff
        break;
    case "detect-look-at":
        if (gameState.CurrentState == GameState.State.Running) {
            lookTargets.Add (json ["target"] as string);
        }
    // And so on 
```

我的问题是 - 有什么更好的方法来做到这一点？我喜欢有一个统一的 GameCommand 处理程序，但我不喜欢我必须在 GameCommand 处理程序中使用 if-else 来检测我所处的状态。

我可以为每个状态创建单独的“HandleGameCommand()”方法——HandleGameCommand-Initialized()、HandleGameCommand-ShowBriefing()，但这似乎很草率。

我可以创建一个`Dictionary<State, List<string>>`, 并预先构建一个列表，其中列出了要为每个状态处理哪些命令。

是否有一个可靠的模式来做我想做的事情？

# asp.net-mvc - 在 asp.net mvc 3 的 AuthorizeAttribute 属性中使用的 RedirectResult 问题

> ID：15205836
> 
> 赞同：2
> 
> 时间：2013-03-04T16:08:00.933
> 
> 标签：asp.net-mvc, asp.net-mvc-3, custom-action-filter

我必须处理一个遗留应用程序，其中重定向到需要身份验证的资源不起作用。意思是通常：

```
Login?returnUrl=targetThatNeedsAuthentication 
```

甚至没有生成。

情况如下。有一个实现：

```
AuthorizeAttribute 
```

其中，像往常一样包含：

```
protected override void HandleUnauthorizedRequest(AuthorizationContext filterContext)
{
    ...
    var url = // get url of resource that requires authentication
    filterContext.Result = new NewResult(url, false);
} 
```

这里的网址是这样的：

```
/membersonly/Login?redirectUrl=http://localhos:1234/targetThatNeedsAuthentication/ 
```

这是正确生成的。该实现使用继承自 的 NewResult，`RedirectResult`具有如下构造函数：

```
public NewResult(string url, bool preserveForm) : base(url) 
```

任何想法为什么基本构造函数可能无法按预期工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T17:14:48.303

这是我在其中一个项目中使用的：

```
protected override void HandleUnauthorizedRequest(AuthorizationContext filterContext)
{
    filterContext.Result = new RedirectToRouteResult(new RouteValueDictionary 
    {
        { "action", "LogIn" },
        { "controller", "Account" },
        { "returnUrl", filterContext.HttpContext.Request.RawUrl}
    });
} 
```

然后在 AccountController 我有这样的事情：

```
public ActionResult LogIn(LogInModel modelData, string returnUrl = "")
{
  // check authorization
  ...

  if (user != null) // user is authorized
  {
    if (Url.IsLocalUrl(returnUrl))
      return Redirect(returnUrl);
    else
      // return to default authorized page
  }
} 
```

显然，您需要根据您的情况对其进行调整。

# java - 如何使用 JPA 的标准 API 构造多列“WHERE ... IN”表达式？

> ID：15205841
> 
> 赞同：7
> 
> 时间：2013-03-04T16:08:11.013
> 
> 标签：java, jpa-2.0, eclipselink, criteria-api

对于具有多列 ID 的实体，我们需要将数据库中尚未存在的所有对象持久保存在给定列表中。由于要检查的对象数量很大，并且存储中的对象数量可能非常大，因此想法是使用它们的多列私钥和“WHERE ... IN (. ..)" 使用条件 API 构造的类型语句，以便它们可以在持久化之前从列表中删除。

这是尝试执行此操作的代码：

```
 public void persistUnique(List<CdrEntity> cdrs) {
        // find all the CDRs in the collection that are already in the DB
        CriteriaBuilder criteriaBuilder = entityManager.getCriteriaBuilder();
        CriteriaQuery<CdrEntity> query = criteriaBuilder.createQuery(CdrEntity.class);
        Root<CdrEntity> cdrRoot = query.from(CdrEntity.class);
        query.select(cdrRoot).where(cdrRoot.in(cdrs));
        List<CdrEntity> nonUnique = entityManager.createQuery(query).getResultList();
        // remove nonUnique elements from crds and persist
        ...
    } 
```

但是，至少使用 EclipseLink 2.4.1，这是实际发送到数据库的内容（为了便于阅读，省略了一些输出）：

```
[EL Fine]: sql:...--SELECT SUBINDEX, ... FROM CDRS WHERE ((?, ?, ?, ?) IN ((?, ?, ?, ?), (?, ?, ?, ?), ...))
bind => [null, null, null, null, 2, 1362400759, 19415, 176, ...] 
```

本质上，在主键列的适当列名应该在的地方，添加了许多参数，然后绑定（值为 null）。除此之外，查询很好，如果前四个 ?s 被实际的列名替换，则执行所需的结果。

然而，直接调用`.in(...)`a`Root`似乎没有预期的结果。如果无法直接使用实体，我希望有某种`Expression`可以代表多个列的列，然后这些列可能是调用的接收者`.in(...)`，但我找不到任何列。

所以，问题是：如何正确地做到这一点？或者 JPA 根本不可能？或者只是 EclipseLink 中存在一个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T16:26:29.443

有趣的尝试，以及生成的奇怪 SQL，SQL 看起来左侧正确，但右侧不正确。请为此记录一个错误，这是可以支持的。（也可以在 2.5 开发版本中尝试，它可能会起作用）。

JPA Criteria API 不支持嵌套数组，所以这超出了 JPA 规范。

您可以为左侧的 id 字段创建路径表达式列表，并为此使用 CriteriaBuilder literal() 表达式，它可能会起作用。

执行此操作的 JPA 标准方法是在每个对象的 id 比较的表达式中迭代对象列表和 or()。

# xml - 计算 XML 中 <> 标记之间的字符数

> ID：15205842
> 
> 赞同：0
> 
> 时间：2013-03-04T16:08:10.983
> 
> 标签：xml, count, char, xmlstarlet

我不是 Linux 的经验丰富的用户并且有一个大问题。我需要计算 XML 文件 exept 标记中的所有字符。

例如

```
<node>
 <node1>Text</node>
</node> 
```

我的输出应该返回 4 或 Text。我试图弄清楚

> xmlstarlet

程序，但即使阅读手册后我也无法使用它。

感谢您的任何建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T16:36:08.403

```
xml sel -t -v 'string-length(/*)' file.xml 
```

应该为您提供根元素中文本内容的字符总数（*包括*空格，因此在您的示例中为 7 - 换行符、空格、T、e、x、t、换行符）。这只是文本节点中的字符，因此不包括注释或处理指令，即

```
<foo>This is a <!-- simple --> example</foo> 
```

会给你18的长度。

# java - mockito vs 密封包装

> ID：15205843
> 
> 赞同：12
> 
> 时间：2013-03-04T16:08:22.980
> 
> 标签：java, classloader, mockito, sealed, securitymanager

我正在从事一个具有严格安全限制的项目。一个要求是密封我们的罐子。

由于我们密封了 jars，我们的很多 junit-tests 都失败了，并出现以下错误：

```
java.lang.SecurityException: sealing violation: package [a.dependency.package] is sealed
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:234)
    at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    at java.lang.Class.getDeclaredMethods0(Native Method)
    at java.lang.Class.privateGetDeclaredMethods(Class.java:2427)
    at java.lang.Class.getDeclaredMethods(Class.java:1791)
    at org.mockito.cglib.core.ReflectUtils.addAllMethods(ReflectUtils.java:349)
    at org.mockito.cglib.proxy.Enhancer.getMethods(Enhancer.java:422)
    at org.mockito.cglib.proxy.Enhancer.generateClass(Enhancer.java:457)
    at org.mockito.cglib.core.DefaultGeneratorStrategy.generate(DefaultGeneratorStrategy.java:25)
    at org.mockito.cglib.core.AbstractClassGenerator.create(AbstractClassGenerator.java:217)
    at org.mockito.cglib.proxy.Enhancer.createHelper(Enhancer.java:378)
    at org.mockito.cglib.proxy.Enhancer.createClass(Enhancer.java:318)
    at org.mockito.internal.creation.jmock.ClassImposterizer.createProxyClass(ClassImposterizer.java:93)
    at org.mockito.internal.creation.jmock.ClassImposterizer.imposterise(ClassImposterizer.java:50)
    at org.mockito.internal.util.MockUtil.createMock(MockUtil.java:54)
    at org.mockito.internal.MockitoCore.mock(MockitoCore.java:45)
    at org.mockito.Mockito.spy(Mockito.java:991)
    at [...]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:27)
    at org.junit.runners.BlockJUnit4ClassRunner.runNotIgnored(BlockJUnit4ClassRunner.java:79)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:71)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

看起来问题是由 Mockito 引起的：

我们“mock”和“spy”来自一些外部密封 jar 的类，而 Mockito 生成的“mock classes”与“mocked classes”具有相同的包。

因为依赖 jar 中的包是密封的，所以被测试的 jar 无法在同一个包中创建类（URLClassLoader 会检查不同密封 jar 中没有使用同一个包）。

I tried to add a specific SecurityManager .policy file for junit testing, but I didn't found a property allowing to have classes inside a package already sealed by a dependency.

Moreover, it seems that the URLClassLoader has no option to remove sealing violation check.

The version of Mockito we use is 1.8.5\. I tried to use the latest version (1.9.5) but it didn't fix the error.

If someone has an idea...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T20:46:46.660

You can work around this by putting traits in a different package and when testing mock that trait instead of the classes in your sealed jar. That could be construed as a security concern but you can argue against that quite easily.

You could seal a jar that imports all your unsealed code and not add any behavior there. That would give your customer the security he needs, but avoid you having to deal with the restrictions in tests or other implementations where you don't have this requirement.

I'm sure you're using dependencies that are unsealed, so you just make your own testable code a dependency of the sealed jar too.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T11:16:28.270

You could consider ways to run these tests against code that's not in sealed jars. Either build unsealed jars as well, and use them to test, or unpack the jars before testing.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-20T10:25:11.433

I had to deal with `Mockito.spy` and signed jars recently.

Actually one solution would be to force the test task to unsign all the problematic jars (i.e. those signed).

* * *

With Apache **Ant** you can define a macro

```
<macrodef name="unsignjar">
    <attribute name="jarFile" />
    <sequential>
        <jar update="yes"
             jarfile="@{jarFile}.tmp">
            <zipfileset src="@{jarFile}">
                <include name="**"/>
                <exclude name="META-INF/*.SF"/>
                <exclude name="META-INF/*.DSA"/>
                <exclude name="META-INF/*.RSA"/>
            </zipfileset>
        </jar>
        <move file="@{jarFile}.tmp"
              tofile="@{jarFile}"
              overwrite="true" />
    </sequential>
</macrodef> 
```

and then call it like in the following:

```
<target name="unsign-problematic-jars">
    <unsignjar jarFile="my-signed.jar" />
</target> 
```

* * *

With Apache **Maven**, you can do as suggested in [this](https://stackoverflow.com/a/21253668/1339429) answer, so you resort to the `maven-jarsigner-plugin` plugin.

# asp.net - ASP.NET 正则表达式或

> ID：15205844
> 
> 赞同：0
> 
> 时间：2013-03-04T16:08:24.530
> 
> 标签：asp.net, regex

我正在使用正则表达式`^((IM[0-9]{8}(/)?)*|([0-9]{7}(/)?)*)$`如下

```
 <asp:RegularExpressionValidator runat="server" 
    ControlToValidate="ticket" 
    ErrorMessage="Maximo Ticket must be of the format IM99999999 or 9999999" 
    ValidationExpression="^((IM[0-9]{8}(/)?)*|([0-9]{7}(/)?)*)$">
    *
   </asp:RegularExpressionValidator> 
```

如果用户保持在一侧`|`但不允许用户使用这两种类型的表达式，则此方法有效。例如以下工作正常

*   IM12345678
*   IM12345678/IM12345687
*   1234567
*   1234567/7654321

但是我不能组合我想做的表达式。以下不能正常工作

*   IM12345678/1234567
*   1234567/IM12345678

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:36:00.780

将星星移到主组之外怎么样：`^((IM[0-9]{8}(/)?)|([0-9]{7}(/)?))*$`

# zend-framework2 - ZF2 Profiler Firebug 不可用？

> ID：15205847
> 
> 赞同：0
> 
> 时间：2013-03-04T16:08:27.177
> 
> 标签：zend-framework2

ZF1 有 Zend_Db_Profiler_Firebug 用于记录数据库查询。它非常非常有用！ZF2有类似的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T18:27:00.357

看看[BjyProfiler 模块](https://github.com/bjyoungblood/BjyProfiler)，他已经移植了 ZF1 分析器。

# entity-framework - 使用 F# 和 ASP.NET MVC 保存 EF

> ID：15205851
> 
> 赞同：5
> 
> 时间：2013-03-04T16:08:37.613
> 
> 标签：entity-framework, asp.net-mvc-4, f#

基于[Daniel Mohl 和他的书中](https://github.com/dmohl/fs-web-cloud-mobile)的优秀样本。

我有 F# 中的 ASP.NET MVC 应用程序和它的在线模板。到目前为止，我的模型、实体、控制器、存储库、视图……都非常通用且可重用，而且查询非常棒。但是我找不到一种方法来保持对 DbContext 部分的保存同样可重用。

对于查询部分，Repository.fs 的代码如下

```
namespace Melopienso.Repositories

open System
open System.Linq

module Repository =
    let get (source:IQueryable<_>) queryFn =
        queryFn source |> Seq.toList

    let getAll () =
        fun s -> query { for x in s do
                         select x }

    let find filterPredFn =
        filterPredFn
        |> fun fn s -> query { for x in s do
                               where (fn()) }

    let getTop rowCount =
        rowCount
        |> fun cnt s -> query { for x in s do
                                take cnt } 
```

......（更多代码）......

在控制器中，我通过了所有必要的东西：

```
namespace Melopienso.Controllers

open System
open System.Web.Mvc
open Melopienso.Models
open Melopienso.Repositories
open Repository
open Utils

[<HandleError>]
type CategoriesController(context:IDisposable, ?repository) =
    inherit Controller()

let fromRepository =
    match repository with
    | Some v -> v
    | _ -> (context :?> MelopiensoEntities).Categories
    |> Repository.get

new() = new CategoriesController(new MelopiensoEntities())

member this.Index () =
    getAll() |> fromRepository |> this.View

override x.Dispose disposing =
    context.Dispose()
    base.Dispose disposing

[<HttpGet>]
member this.Create () =
    this.View() 
```

......（更多代码）......

现在，保存时的问题在于如何使它像那样可重用。如果我通过 DbSet，我需要一种调用上下文的方法，我不知道如何从特定的 DbSet 中找到它（怀疑它甚至是可能的）。

如果我同时通过 DbContext 和 DbSet，我不能做类似的事情

```
use nameOfDbContext
    nameOfDbContext.NameOfDbSet.Add entity 
```

我发现硬编码任何东西的唯一选择，但这似乎并不正确。

很遗憾，但 Daniel 的优秀示例并没有以“传统”EF 方式进行节省部分并使用总线等，这很好，但我首先希望有一个基本应用程序完全工作，然后从那里使用 Async 进行改进控制器、邮箱等

任何提示将不胜感激。干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-27T15:58:21.147

为什么不能同时传递`DbContext`和`DbSet`，并使用`DbContext`保存，`DbSet`直接访问（不要尝试通过`DbContext`）进行查询等？

如果您有类型，您也可以`DbSet`从 a中获取`DbContext`，这也可能有帮助：

```
myDbContext.Set<'a>() 
```

# php - 在页面加载时运行 javascript

> ID：15205854
> 
> 赞同：0
> 
> 时间：2013-03-04T16:08:42.863
> 
> 标签：php, javascript, jquery, html

我正在使用一些代码来显示通知消息。下面的代码显示了按钮单击时的消息。有什么方法可以在页面加载时显示消息，我打算使用“类型”作为变量来在消息之间进行选择。

对此的任何帮助将不胜感激。谢谢

完整代码可在以下位置找到：

[http://www.red-team-design.com/cool-notification-messages-with-css3-jquery#comment-168574](http://www.red-team-design.com/cool-notification-messages-with-css3-jquery#comment-168574)

```
<head>
<title>Cool notification messages with CSS3 & Jquery demo - Redteamdesign</title>
<script src="../js/jquery-latest.min.js"></script>
<link rel="stylesheet" type="text/css" media="screen" href="../css/bar.css">
<script>
var myMessages = ['info','warning','error','success']; // define the messages types      
function hideAllMessages()
{
     var messagesHeights = new Array(); // this array will store height for         each
     for (i=0; i<myMessages.length; i++)
     {
              messagesHeights[i] = $('.' + myMessages[i]).outerHeight();
              $('.' + myMessages[i]).css('top', -messagesHeights[i]); //move element outside viewport     
     }
}
function showMessage(type)
{

$('.'+ type +'-trigger').click(function(){
      hideAllMessages();                  
      $('.'+type).animate({top:"0"}, 500);
});
}
$(document).ready(function(){
     // Initially, hide them all
     hideAllMessages();
     // Show message
     for(var i=0;i<myMessages.length;i++)
     {
        showMessage(myMessages[i]);
     }
     // When message is clicked, hide it
     $('.message').click(function(){              
              $(this).animate({top: -$(this).outerHeight()}, 500);
      });
      setTimeout(function(){hideAllMessages()},4000);        
});      
</script>
</head>
<body>
<div class="info message">
     <h3>FYI, something just happened!</h3>
     <p>This is just an info notification message.</p>
</div>
<div class="error message">
     <h3>Oh No!, an error ocurred</h3>
     <p>This is just an error notification message.</p>
</div>
<div class="warning message">
     <h3>Wait, I must warn you!</h3>
     <p>This is just a warning notification message.</p>
</div>
<div class="success message">
     <h3>Congrats, you did it!</h3>
     <p>This is just a success notification message.</p>
</div>
<ul id="trigger-list">
     <li><a href="#" class="trigger info-trigger">Info</a></li>
     <li><a href="#" class="trigger error-trigger">Error</a></li>
     <li><a href="#" class="trigger warning-trigger">Warning</a></li>
     <li><a href="#" class="trigger success-trigger">Success</a></li>
</ul>

</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T16:10:37.850

是的，使用：

```
window.onload = function( ){
 SomeJavaScriptCode
}; 
```

并将其放在`<head>`文档的`<script>`标签内。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T16:15:08.553

您不能有多个 body 标签。摆脱页面底部的开始正文标签。

当 body 像这样加载时，您可以调用一个函数：

```
<body onload="someFunction();"> 
```

或者只是从你的内部调用函数`$(document).ready()`

```
someFunction(); 
```

您还可以使用在元素上`trigger`模拟（或其他）：`click`

```
$('.message').trigger('click'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-04T17:36:43.037

为了满足您的特定要求（立即显示消息而无需等待按下按钮），您可以在准备功能的末尾添加它（就在 之后`setTimeout(function(){hideAllMessages()},4000);`）

```
var type="warning";
$('.'+type).animate({top:"0"}, 500); 
```

您可以将“警告”替换为“信息”、“错误”或“成功”（或您希望添加的任何其他内容）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T17:38:44.527

问题是该`showMessage()`函数实际上并没有显示消息，它只是为具有相应类的元素（如 .info-trigger）创建一个事件处理程序。我修改了那部分代码，现在就像一个魅力。:)

工作小提琴：http: [//jsfiddle.net/MC7Fu/](http://jsfiddle.net/MC7Fu/)

**附加说明：**请不要使用内联事件处理程序，例如`<body onload="someFunc()">`. 使用 Husman 推荐的一款。

```
window.onload = function( ){
 SomeJavaScriptCode
}; 
```

# android - 错误（-19,0）媒体播放器

> ID：15205855
> 
> 赞同：1
> 
> 时间：2013-03-04T16:08:43.040
> 
> 标签：android, android-mediaplayer

我正在尝试制作一个在单击按钮时播放特定声音的应用程序，我得到了 100 个静态创建的按钮，而不是在数组或任何东西中，并且我将声音正确分配给每个按钮问题是，在播放了一些按钮后它给出我这个错误我的问题是

1.  任何方式我都可以从这个混乱中切换到通用代码
2.  无论如何，无论播放多少声音，我都可以停止收到此错误，并且继续在每个按钮上工作的声音？

下面是我的代码：

```
 package com.example.buttonsdemo;

import android.media.MediaPlayer;
import android.os.Bundle;
import android.app.Activity;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.Toast;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

       Button messageButton_0 = (Button) findViewById(R.id.akali);
       final MediaPlayer mpButtonClick_0= MediaPlayer.create(this,R.raw.akali) ;
       messageButton_0.setOnClickListener(new View.OnClickListener() {

           @Override
           public void onClick(View arg0) {

              mpButtonClick_0.start();
              if(!mpButtonClick_0.isPlaying()){
                 mpButtonClick_0.stop();
                 mpButtonClick_0.release();
              }

     }  
}); 
```

100 个以上的按钮就这样继续下去，请提供任何帮助

```
Logcat:
03-04 16:21:21.925: E/MediaPlayer(5769): error (-19, 0)
03-04 16:21:21.925: E/MediaPlayer(5769): stop called in state 0
03-04 16:21:21.925: E/MediaPlayer(5769): error (-38, 0)
03-04 16:21:22.067: W/MediaPlayer(5769): mediaplayer went away with unhandled events
03-04 16:21:22.067: W/MediaPlayer(5769): mediaplayer went away with unhandled events
03-04 16:21:22.115: D/AndroidRuntime(5769): Shutting down VM
03-04 16:21:22.115: W/dalvikvm(5769): threadid=1: thread exiting with uncaught exception (group=0x40a71930)
03-04 16:21:22.145: E/AndroidRuntime(5769): FATAL EXCEPTION: main
03-04 16:21:22.145: E/AndroidRuntime(5769): java.lang.IllegalStateException
03-04 16:21:22.145: E/AndroidRuntime(5769):     at android.media.MediaPlayer._start(Native Method)
03-04 16:21:22.145: E/AndroidRuntime(5769):     at android.media.MediaPlayer.start(MediaPlayer.java:1025)
03-04 16:21:22.145: E/AndroidRuntime(5769):     at com.example.buttonsdemo.MainActivity$39.onClick(MainActivity.java:766)
03-04 16:21:22.145: E/AndroidRuntime(5769):     at android.view.View.performClick(View.java:4204)
03-04 16:21:22.145: E/AndroidRuntime(5769):     at android.view.View$PerformClick.run(View.java:17355)
03-04 16:21:22.145: E/AndroidRuntime(5769):     at android.os.Handler.handleCallback(Handler.java:725)
03-04 16:21:22.145: E/AndroidRuntime(5769):     at android.os.Handler.dispatchMessage(Handler.java:92)
03-04 16:21:22.145: E/AndroidRuntime(5769):     at android.os.Looper.loop(Looper.java:137)
03-04 16:21:22.145: E/AndroidRuntime(5769):     at android.app.ActivityThread.main(ActivityThread.java:5041)
03-04 16:21:22.145: E/AndroidRuntime(5769):     at java.lang.reflect.Method.invokeNative(Native Method)
03-04 16:21:22.145: E/AndroidRuntime(5769):     at java.lang.reflect.Method.invoke(Method.java:511)
03-04 16:21:22.145: E/AndroidRuntime(5769):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-04 16:21:22.145: E/AndroidRuntime(5769):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-04 16:21:22.145: E/AndroidRuntime(5769):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T16:32:07.083

从错误消息中可以清楚地看出，当处于错误状态时会调用`start`on 。`MediaPlayer`从您的留言中，

```
03-04 16:21:21.925: E/MediaPlayer(5769): stop called in state 0 
```

状态 0 对应`MEDIA_PLAYER_STATE_ERROR`

```
03-04 16:21:21.925: E/MediaPlayer(5769): error (-38, 0) 
```

错误编号 -38 对应于`INVALID_OPERATION`from `MediaPlayer::start`。请注意，从`INVALID_OPERATION`设置`-ENOSYS`为**-38**`errno.h`。

您可能必须调查为什么您`MediaPlayer`处于错误状态。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T16:26:59.553

您需要查看[MediaPlayer.start](http://developer.android.com/reference/android/media/MediaPlayer.html#start%28%29)和[State Diagram](http://developer.android.com/reference/android/media/MediaPlayer.html#StateDiagram)的文档。

您可能在 MediPlayer 处于其中一种无效状态（{Idle, Initialized, Stopped, Error}）时调用它，这会导致异常。

# c# - 要求翻译

> ID：15205859
> 
> 赞同：0
> 
> 时间：2013-03-04T15:53:05.410
> 
> 标签：c#, caching

有人可以向我解释一下，如果有的话，解释一下这段代码，它做了什么，为什么？特别是底线...

```
protected uint uMask;
int nBits = (int)Math.Log(BlockSize, 2);
uMask = 0xffffffff << nBits; 
```

例如，第一次迭代 BlockSize 为 8，nBits 为 3，运算后 uMask 为 4294967288。

我尝试用谷歌搜索第三行，因为我不知道如何把它变成简单的语言，我得到了代码示例，这不是我想要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T17:14:37.503

这看起来是在创建一个掩码以从更大的结构中排除位。有些数据可能存储在一个较大的值中，并且有一个最大值`Blocksize`。此代码确定该项目需要多少位，给定其在 中的最大值`Blocksize`。然后它使用这个位数来创建一个掩码。在最后一行之后，`uMask`二进制看起来像这样（假设`Blocksize`是 8 和`nBits`3：

```
1111111111111111111111111111111111111111111111111111111111111000 
```

或十六进制：

```
0xfffffffc 
```

这通常用于删除存储在数据中的一个字段，以隔离其他字段。从概念上讲，您可能在 64 位值中有用于值 A 和值 B 的位：

```
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABBB 
```

假设您想获得 A 的值。您可以执行以下操作：

```
result = value & uMask;     // Step 1: Mask off B
result = result >> nBits    // Step 2:Align A 
```

数据将如下所示：

```
Step 1:     AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA000
Step 2:     000AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 
```

除非您具有出色的数学能力，否则您将永远无法阅读十进制的掩码。

# matlab - MATLAB imshow/imagesc

> ID：15205862
> 
> 赞同：3
> 
> 时间：2013-03-04T16:08:52.927
> 
> 标签：matlab

我正在尝试使用某些参数绘制/显示图像，但它没有显示。只有轮廓。有谁知道我如何解决我的图像以显示参数和轮廓？提前致谢

```
 imshow(image,'Border','tight','InitialMagnification',100)
    colormap(gray)
    hold on

    contour(phi,[0 0],'r') 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-15T20:02:02.797

`imshow`仅显示 UINT8 类型的图像。尝试`imshow(uint8(image))`确保图像的值在 0 到 255 之间（如果需要，可以缩放）。

如果您需要扩展，请执行

```
mI = min(min(image));
mA = max(max(image));
image = 255*(image-mI)/(mA-mI);
imshow(image); 
```

# php - 我的 Facebook 应用程序加载了两次

> ID：15205866
> 
> 赞同：1
> 
> 时间：2013-03-04T16:09:01.477
> 
> 标签：php, facebook, facebook-php-sdk

**我已经使用facebook php-sdk**编写了 facebook 应用程序。我想将它集成到有趣的页面。所以当用户首先去我的应用程序时，他必须点击喜欢按钮然后使用应用程序。我使用该`var_dump()`函数来查看在应用程序加载期间变量会发生什么情况`$like_status`。起初`$like_status = false`，因为用户没有点击喜欢按钮，但是当用户点击喜欢按钮时页面重新加载并且`$like_status`变量变为`NULL`并且页面加载相同的图片而没有像标签一样的页面. 我认为我的页面重新加载了两次并且`$like_status`变量变为`NULL`. 这是我的申请链接[https://www.facebook.com/pages/Tasty-Applications/456339624439381?id=456339624439381&sk=app_570550412956864](https://www.facebook.com/pages/Tasty-Applications/456339624439381?id=456339624439381&sk=app_570550412956864). 我希望我的问题清晰易读。请我需要帮助。这是我的代码。

```
 <?php
 require_once('facebook.php');
 $app_id = 'app_id';
 $my_url = "https://apps.facebook.com/losts_app/";
 $config = array(
 'appId' => 'app_id',
 'secret' => 'app_secret',
 'fileUpload'  => true,
 'cookie' => true,
 );
 $facebook = new Facebook($config);
 $signed_request = $facebook->getSignedRequest();

$like_status = $signed_request["page"]["liked"];

$code = $_GET["code"];

if($like_status)
 {

 session_start();
 $code = $_GET["code"];

 if(empty($code))
 {     
   $dialog_url = "https://www.facebook.com/dialog/oauth?client_id=" 
   . $app_id . "&redirect_uri=" . urlencode($my_url) . "&state="
   . $_SESSION['state']."&scope=read_stream, user_photos, publish_stream";

   echo("<script> top.location.href='" . $dialog_url . "'</script>");
  }
 else {
  //here is my application main content...
  }
}
else
{

   echo('<image src="Like.jpg" />');
   // Here is content that must encourage user to like the page
}
?> 
```

# jquery - 预加载图像和 [object HTMLImageElement]

> ID：15205874
> 
> 赞同：2
> 
> 时间：2013-03-04T16:09:30.450
> 
> 标签：jquery, image, preload

我正在尝试创建预加载器，但是当我运行它时，控制台会显示：

> 加载的**[object HTMLImageElement]**共 5 个

从这行代码

```
console.log('Loaded ' + images[i] + ' of ' + images.length); 
```

但理想情况下，我希望它显示：

> “已加载 1 个，共 5 个”

我怎样才能解决这个问题？我只想将其创建为回调，以便知道某个面板中的所有图像何时加载。

```
$(panel).each(function(){

    // Find Panel
        var panelId = $(this).attr('id');
        console.log('Loading ' + panelId);  

    // Find Images
        var images = $(this).find('img');
        var path = images.attr('src');
        console.log('Total of ' + images.length + ' Images');

    // Preload Images
        for( i= 0; i < images.length; i++ ) {

            images[i] = new Image();
            images[i].src = path;
            images[i].onload = function(){
                console.log('Loaded ' + images[i] + ' of ' + images.length);
            };

        }

    // End

}); 
```

`each()`另外-在前一个面板完成检查后，如何修改我的循环以检查每个面板？

任何帮助都会很棒。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T16:12:24.120

只需声明一个计数器并随时增加它：

```
$(panel).each(function(){
        var loaded = 0; // <== The counter

    // Find Panel
        var panelId = $(this).attr('id');
        console.log('Loading ' + panelId);  

    // Find Images
        var images = $(this).find('img');
        var path = images.attr('src');
        console.log('Total of ' + images.length + ' Images');

    // Preload Images
        for( i= 0; i < images.length; i++ ) {

            images[i] = new Image();
            images[i].src = path;
            images[i].onload = function(){
                ++loaded;
                console.log('Loaded ' + loaded + ' of ' + images.length);
            };

        }

    // End

}); 
```

**不要**使用`i`，正如至少一位评论者所建议的那样（正如我在更仔细地阅读您的代码之前所建议的那样）。`i`将始终`images.length`在加载回调完成时。

您需要进行的另一项更改是在设置**之前**设置`onload`回调，而不是：**`src`**

 **```
// PROBLEM, sets up a race condition
images[i].src = path;
images[i].onload = function(){
    // ...
}; 
```

做这个：

```
images[i].onload = function(){
    // ...
};
images[i].src = path; 
```

Web 浏览器上的 JavaScript 是单线程的（除非使用 Web Worker），但*Web 浏览器不是*. 它可以很容易地检查它的缓存并查看它是否有图像并运行它的代码来触发行设置和行设置`load`之间的处理程序。它将排队处理程序以在下次 JavaScript 引擎可用时运行，但如果您的处理程序不在那里排队，它将不会排队，并且您永远不会收到事件回调。`src``onload``load`**

# javascript - 获取指定段落内的段落文本

> ID：15205875
> 
> 赞同：-5
> 
> 时间：2013-03-04T16:09:32.780
> 
> 标签：javascript, html

```
<div id="items" onclick="myfunction()">
<p id="item">a</p>
<p id="item">b</p>
<p id="item">c</p>
<p id="item">d</p>
<p id="item">e</p>
</div>

function myfunction() {
var r = document.getElementById("item").innerHTML;
alert(r);
} 
```

当我点击'a'时，弹出并显示'a'，但是当我点击b时，弹出并再次显示'a'！失踪者在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T16:16:08.950

要获取触发事件的原始元素，您应该使用以下内容：

```
<div id="items" onclick="myfunction(event);">

function myfunction(e) {
    var evt = e || window.event;
    var tar = evt.target || evt.srcElement;
    // Should probably check that the tar element is a <p> and has the specific id/class
    var val = tar.innerHTML;
    alert(val);
} 
```

[http://jsfiddle.net/GtfDf/](http://jsfiddle.net/GtfDf/)

类似地，为了正常工作和有效的 HTML，`id`需要唯一的属性。`getElementById`另一种选择是将事件绑定到每个`<p>`元素，而不是使用`id`，使用`class`。像这样：

```
<div id="items">
    <p class="item">a</p>
    <p class="item">b</p>
    <p class="item">c</p>
    <p class="item">d</p>
    <p class="item">e</p>
</div>

window.onload = function () {
    var items_div = document.getElementById("items");
    var items = items_div.querySelectorAll(".item");
    for (var i = 0; i < items.length; i++) {
        items[i].onclick = myfunction;
    }
};

function myfunction() {
    var val = this.innerHTML;
    alert(val);
} 
```

[http://jsfiddle.net/eWZyn/1/](http://jsfiddle.net/eWZyn/1/)

`getElementById`但是使用/有很多选择/替代方案`querySelectorAll`，可能会更好，也可能不会更好。

第一个示例对于从 div 添加/删除的动态项目“更好”。在我看来，第二个例子似乎更适合静态项目。我只是说，如果 div 内还有其他元素可以为 click 事件处理。无论哪种方式，我希望这些示例有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T16:16:34.720

这就是你要找的。

```
<div id="items">
<p onclick="myfunction(this)">a</p>
<p onclick="myfunction(this)">b</p>
<p onclick="myfunction(this)">c</p>
<p onclick="myfunction(this)">d</p>
<p onclick="myfunction(this)">e</p>
</div>
<script>
function myfunction(a) {
var r = a.innerHTML;
alert(r);
}
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T17:02:04.710

您可以将事件处理委托给容器 div 并使用目标（或 srcElement，在 IE 8 及更低版本中）返回单击段落的文本。innerHTML 可能不是最佳选择，因为段落可以具有跨度和其他内联 html 标记和属性以及文本。

```
<!doctype html>
<html lang="en">
<head>
<meta charset= "utf-8">
<title>test page</title>
</head>
<body>

<div>
<p>a</p>
<p>b</p>
<p>c</p>
<p>d</p>
<p>e</p>
</div>

<script>
function myfunction(e) {
    e=e||window.event;
    var who=e.target || e.srcElement;
    if(who.tagName=='P'){
        alert(who.textContent || who.innerText || '');
    }
}
onload=function(){
    document.getElementsByTagName('div')[0].onclick=myfunction;
}
</script>

</body>
</html> 
```

# android - 回收具有不同行布局的 ListView 行

> ID：15205876
> 
> 赞同：2
> 
> 时间：2013-03-04T16:09:39.010
> 
> 标签：android, android-listview, adapter

我有一个`ListView`适配器，它根据行项的类型设置了不同的布局。

如果我使用支架回收我的行，如下面的代码所示，我想我会得到一些错误，因为对于回收的行，我会得到最新的非回收行的布局，这可能不一样类型。

在这种情况下我应该避免回收行吗？我还有什么其他选择？

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View row = convertView;
    MyHolder holder = null;

    int type = getItemViewType(position);

    if(row == null)
    {           
        holder = new MyHolder();

        LayoutInflater inflater = ((Activity)mContext).getLayoutInflater();

        if(type == TYPE_1){
            row = inflater.inflate(R.layout.layout_type_1, parent, false);
        }
        else if(type == TYPE_2){
            row = inflater.inflate(R.layout.layout_type_2, parent, false);
        }               
        else {
            row = inflater.inflate(R.layout.layout_type_3, parent, false);
        }

        row.setTag(holder);
    }
    else
    {
        holder = (MyHolder)row.getTag();
    }

    /* ... */
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T16:17:09.987

总是回收行！您对`getItemViewType`(and `getViewTypeCount`) 的实现指示`ListView`何时回收哪些类型的视图，以免它们混淆。

您的代码片段看起来不错。所以，这一切都应该工作。唯一有点奇怪的部分是`if(type == TYPE_3)`. 你的意思是`if(type == TYPE_2)`？

问题是：您的代码现在有问题/异常吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T16:18:38.400

> 如果我使用支架回收我的行，如下面的代码所示，我想我会得到一些错误，因为对于回收的行，我会得到最新的非回收行的布局，这可能不一样类型。

如果您指的是`row == null`支票，那么没有问题，因为它将根据方法`ListView`赋予您权利。`convertView``getItemViewType()`

如果您再次引用`MyHolder`该类，这又不是问题，因为持有人被设置为行视图的标签，并且如果`ListView`为您提供正确的回收行视图，那么持有人标签也将在其中初始化适当的字段行的类型。而且，由于您应该`MyHolder`根据行类型处理，这不是问题，因为您将访问已初始化的字段。您的`MyHolder`类应该具有对您的三种类型的行公开的所有视图的引用，以便您可以将它们放在哪里。

所以保留回收机制。

# ruby-on-rails - Rails数据库鸡和蛋错误

> ID：15205878
> 
> 赞同：1
> 
> 时间：2013-03-04T16:09:54.750
> 
> 标签：ruby-on-rails, rails-migrations

我正在重构一个 Rails 应用程序。在一个表中，我有一个名为的列`set`，我需要将其重命名为`configuration_set`. 我已经更改了代码以应对更改并创建了一个迁移来重命名该列。

现在的问题是我无法运行迁移：

```
class AlignConfigurationValuesColumns < ActiveRecord::Migration

def self.up
  rename_column :configuration_values, :set, :configuration_set
end 
```

我收到以下错误：

```
rake aborted!
undefined method `find_by_configuration_set_and_key' for #<Class:0x7f2c7a879580> 
```

undefined 函数是在新代码上调用的动态 find_by 方法，但在执行数据库迁移之前它不存在。

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T17:07:38.160

而不是`change_column`，尝试：

```
rename_column :configuration_values, :set, :configuration_set 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:50:48.250

运行迁移会崩溃，因为动态方法`find_by_configuration_set_and_key`未定义。此动态方法将仅在迁移执行后定义，因为迁移正在将列重命名`set`为`configuration_set`.

我现在找到了一种执行迁移的方法，尽管它并不完美。

调用方法的代码`find_by_configuration_set_and_key`位于插件中。我更改了 environment.rb 以便不加载插件并允许我运行 Rails 数据库迁移。然后我把它放回去并重新启动应用程序。

这个解决方案比使用 mysql 客户端更好，但仍然是一个 hack。感谢大家的好主意和讨论。

# r - 如何将 R 数据转换为 matlab 矩阵

> ID：15205879
> 
> 赞同：11
> 
> 时间：2013-03-04T16:09:59.953
> 
> 标签：r, matlab, matrix

我在 R 中有一个大型数据矩阵。我使用包`'R.matlab'`将数据转换为 matlab 数据，如下所示：

```
writeMat(con="...filepath", x=data) 
```

我没有使用matlab的经验，所以请耐心等待：

当我将数据加载到 matlab 中时，它说我有一个 1x1 结构。

我想把它变成一个矩阵形式。我试过了：

```
data=struct2cell(x) 
```

但这看起来不太对。顺便说一句，数据是十进制数字。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-04T16:53:30.997

看起来您`data`在 R 中的变量是一个数据框。在写入 mat 文件之前先尝试将其转换为矩阵：

```
writeMat(con="...filepath", x=as.matrix(data)) 
```

您可能想要的另一种方法是在 MATLAB 中将元胞数组转换为矩阵：

```
datanum = cell2mat(data'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-13T11:55:21.400

如果您使用的是 Jupyter 笔记本。我认为您要做的是首先使用安装 R.matlab 库

```
install.packages(c('R.matlab'), repos='http://cran.us.r-project.org') 
```

然后使用实现这个库

```
library(R.matlab) 
```

之后，你可能在 R 中有一个数据框说`resi`

```
#Save in Matlab v6 format with 'writeMat'
writeMat("resi.mat", labpcexport = resi) 
```

我现在去 Matlab 并通过将结构转换为单元格然后将单元格转换为矩阵来在该特定目录中调用它

```
resi=cell2mat(struct2cell(load('resi.mat'))) 
```

我希望这会有所帮助

# javascript - 如何创建 Bootstrap 缩略图网格

> ID：15205880
> 
> 赞同：5
> 
> 时间：2013-03-04T16:10:03.197
> 
> 标签：javascript, css, layout, twitter-bootstrap, web

我有一个未知数量的拇指要显示，这里是一个 HTML 渲染的例子：

```
<div class="row-fluid">
        <ul class="thumbnails">
          <li class="span3">
            <a href="#" class="thumbnail">
              <img data-src="holder.js/260x180" alt="260x180" style="width: 260px; height: 180px;" src="mySrc">
            </a>
          </li>
          <li class="span3">
            <a href="#" class="thumbnail">
              <img data-src="holder.js/260x180" alt="260x180" style="width: 260px; height: 180px;" src="mySrc">
            </a>
          </li><li class="span3">
            <a href="#" class="thumbnail">
              <img data-src="holder.js/260x180" alt="260x180" style="width: 260px; height: 180px;" src="mySrc">
            </a>
          </li><li class="span3">
            <a href="#" class="thumbnail">
              <img data-src="holder.js/260x180" alt="260x180" style="width: 260px; height: 180px;" src="mySrc">
            </a>
          </li><li class="span3">
            <a href="#" class="thumbnail">
              <img data-src="holder.js/260x180" alt="260x180" style="width: 260px; height: 180px;" src="mySrc">
            </a>
          </li>
          <li class="span3">
            <a href="#" class="thumbnail">
              <img data-src="holder.js/260x180" alt="260x180" style="width: 260px; height: 180px;" src="mySrc">
            </a>
          </li>
          <li class="span3">
            <a href="#" class="thumbnail">
              <img data-src="holder.js/260x180" alt="260x180" style="width: 260px; height: 180px;" src="mySrc">
            </a>
          </li>
        </ul>
      </div> 
```

* * *

**结果如下：** ![截屏](../Images/fab4948cf4795b549f8f1335216cd348.png)

**问题**：由于我动态构建 UI，如何在不创建另一个的情况下避免第二行的边距`<div class="row-fluid">`

**需要更新**IE8解决方案

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-04T16:24:40.287

**假设使用:nth-child(4n)**的 LI 的父级的宽度不会改变，应该可以针对该`x`元素。

```
.row-fluid li:nth-child(4n) {
    margin: 10px;
    padding: 0;
 } 
```

有关如何为 :nth-child() 编写公式的详细信息，请参阅[规范。](http://www.w3.org/TR/selectors/#nth-child-pseudo)

一个非常基本的[Fiddle](http://jsfiddle.net/4ZJSy/)显示它正在工作。

**更新**

要使用 IE8，只需使用 jQuery（假设您正在使用它）

```
$('.row-fluid li:nth-child(4n)').css({'margin':'10px'}); 
```

我相信这应该可以解决问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-03T21:00:07.560

我有一个案例，边距是可以的，但它必须在所有行上保持一致。

您可以通过在列表开头添加空白`<li style="display:none"></li>`来实现此目的。这样，Bootstrap 将针对未显示的边距移除`<li>`。

有一个边距可能是不可接受的，但我觉得这是一个优雅的解决方案，不需要将样式混合到 js 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-03T14:51:35.153

有同样的问题，不干净，但一个快速的解决方法如下：

```
.row {
   margin-left: 0px !important;
   margin-right: 0px !important;
} 
```

# html - CSS 将 div 1 居中对齐，将 div 2 右对齐

> ID：15205888
> 
> 赞同：4
> 
> 时间：2013-03-04T16:10:28.813
> 
> 标签：html, css

请看看[http://jsfiddle.net/zygnz/1/](http://jsfiddle.net/zygnz/1/)

```
<div class="container">
        <div class="left">
            LEFT
        </div>
        <div class="right">
            RIGHT
        </div>
</div> 
```

我们可以将左侧块对齐到页面中心并在剩余位置对齐右侧..？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T16:41:42.700

如果您打算将 div 1 集中到剩余空间（容器 - div2），您可以使用 text-align:center 设置容器样式并将 div 2 向右浮动。

否则我会使用绝对位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T17:14:41.003

我为你创造了一个[小提琴](http://jsfiddle.net/ZBg7Q/)。如果您为 div 使用固定宽度，它将起作用。如果不只是用一些 javascript 重写 CSS。

**CSS：**

```
.container
{
display:block;
width:400px;
height:250px;
background-color:black; /* not necessary */
}

.center
{
width:100px;
height:240px;
background-color:white; /* not necessary */
float:left;
margin-left:150px; /*(width_of_container/2)-(width_of_center/2)*/
}

.right
{
width:100px;
height:240px;
background-color:white; /* not necessary */
float:right;
} 
```

# c# - 垃圾收集应该已删除对象，但 WeakReference.IsAlive 仍返回 true

> ID：15205891
> 
> 赞同：15
> 
> 时间：2013-03-04T16:10:35.247
> 
> 标签：c#, .net, garbage-collection, weak-references

我有一个我希望通过的测试，但垃圾收集器的行为并不像我想象的那样：

```
[Test]
public void WeakReferenceTest2()
{
    var obj = new object();
    var wRef = new WeakReference(obj);

    wRef.IsAlive.Should().BeTrue(); //passes

    GC.Collect();

    wRef.IsAlive.Should().BeTrue(); //passes

    obj = null;

    GC.Collect();

    wRef.IsAlive.Should().BeFalse(); //fails
} 
```

在此示例中，`obj`对象应该是 GC'd，因此我希望该`WeakReference.IsAlive`属性返回`false`。

似乎因为该变量被声明在与它没有被收集`obj`的相同范围内。`GC.Collect`如果我将 obj 声明和初始化移到测试通过的方法之外。

是否有人对此行为有任何技术参考文档或解释？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2016-06-01T05:07:27.853

遇到与您相同的问题-我的测试到处都通过，除了在 NCrunch 下（在您的情况下可能是任何其他仪器）。嗯。使用 SOS 进行调试会发现在测试方法的调用堆栈上保留了额外的根。我的猜测是，它们是禁用任何编译器优化的代码检测的结果，包括那些正确计算对象可达性的优化。

这里的解决方法很简单——*永远不要从执行 GC 和测试活动的方法中获得强引用*。这可以通过简单的辅助方法轻松实现。下面的更改使您的测试用例通过 NCrunch，它最初是失败的。

```
[TestMethod]
public void WeakReferenceTest2()
{
    var wRef2 = CallInItsOwnScope(() =>
    {
        var obj = new object();
        var wRef = new WeakReference(obj);

        wRef.IsAlive.Should().BeTrue(); //passes

        GC.Collect();

        wRef.IsAlive.Should().BeTrue(); //passes
        return wRef;
    });

    GC.Collect();

    wRef2.IsAlive.Should().BeFalse(); //used to fail, now passes
}

private T CallInItsOwnScope<T>(Func<T> getter)
{
    return getter();
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-04T16:37:31.330

我可以看到一些潜在的问题：

*   我不知道 C# 规范中要求限制局部变量的生命周期的任何内容。在非调试版本中，我认为编译器可以自由地省略最后一次赋值`obj`（将其设置为`null`），因为没有代码路径会导致`obj`在它之后永远不会使用的值，但我希望在非debug build 元数据将表明该变量在创建弱引用后从未使用过。在调试版本中，变量应该存在于整个函数范围内，但`obj = null;`语句实际上应该清除它。尽管如此，我不确定 C# 规范是否承诺编译器不会省略最后一条语句，但仍保留变量。

*   如果您正在使用并发垃圾收集器，则可能会`GC.Collect()`触发收集的立即开始，但收集实际上不会在`GC.Collect()`返回之前完成。在这种情况下，可能没有必要等待所有终结器运行，因此`GC.WaitForPendingFinalizers()`可能有点矫枉过正，但它可能会解决问题。

*   使用标准垃圾收集器时，我不希望对象的弱引用以终结器的方式延长对象的存在，但是当使用并发垃圾收集器时，可能会丢弃对象存在的弱引用被移动到具有需要清理的弱引用的对象队列中，并且此类清理的处理发生在与其他所有内容同时运行的单独线程上。在这种情况下，需要调用来`GC.WaitForPendingFinalizers()`实现所需的行为。

请注意，通常不应期望弱引用会因任何特定程度的及时性而失效，也不应期望在报告为真`Target`后获取`IsAlive`将产生非空引用。仅应`IsAlive`在不关心目标是否还活着但有兴趣知道引用已死的情况下使用。例如，如果一个人有一组`WeakReference`对象，可能希望周期性地遍历列表并删除`WeakReference`目标已经死亡的对象。应该为`WeakReferences`可能在收藏中保留的时间超过理想情况下的可能性做好准备；如果他们这样做，唯一的后果应该是稍微浪费内存和 CPU 时间。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-04T16:36:00.377

据我所知，调用`Collect`并不能*保证*所有资源都被释放。您只是向垃圾收集器提出建议。

您可以尝试强制它阻塞，直到所有对象都被释放：

```
GC.Collect(2, GCCollectionMode.Forced, true); 
```

我预计这可能不会在 100% 的时间内绝对有效。一般来说，我会避免编写任何依赖于观察垃圾收集器的代码，它并不是真正设计用于以这种方式使用的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-04T16:20:01.513

可能是`.Should()`扩展方法以某种方式挂在引用上吗？或者也许是测试框架的其他方面导致了这个问题。

（我将此作为答案发布，否则我无法轻松发布代码！）

我尝试了以下代码，它按预期工作（Visual Studio 2012、.Net 4 构建、调试和发布，32 位和 64 位，在 Windows 7 上运行，四核处理器）：

```
using System;

namespace Demo
{
    internal class Program
    {
        private static void Main(string[] args)
        {
            var obj = new object();
            var wRef = new WeakReference(obj);

            GC.Collect();
            obj = null;
            GC.Collect();

            Console.WriteLine(wRef.IsAlive); // Prints false.
            Console.ReadKey();
        }
    }
} 
```

当您尝试此代码时会发生什么？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-08-07T23:31:47.513

这个答案与单元测试无关，但它可能对测试弱引用并想知道为什么它们不能按预期工作的人有所帮助。

问题基本上是让变量保持活动状态的 JIT。这可以通过在非内联方法中实例化 WeakReference 和目标对象来避免：

```
private static MyClass _myObject = new MyClass();

static void Main(string[] args)
{
    WeakReference<object> wr = CreateWeakReference();

    _myObject = null;

    GC.Collect();
    GC.WaitForPendingFinalizers();
    GC.Collect();

    wr.TryGetTarget(out object targetObject);

    Console.WriteLine(targetObject == null ? "NULL" : "It's alive!");
}

[MethodImpl(MethodImplOptions.NoInlining)]
private static WeakReference<object> CreateWeakReference()
{
    _myObject = new MyClass();
    return new WeakReference<object>(_myObject);
}

public class MyClass
{
} 
```

注释掉`_myObject = null;`将阻止该对象的垃圾收集。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-08T15:54:49.247

我有一种感觉，您需要调用[GC.WaitForPendingFinalizers()](https://msdn.microsoft.com/en-us/library/system.gc.waitforpendingfinalizers(v=vs.110).aspx)，因为我希望终结器线程会更新周引用。

多年前，我在编写单元测试时遇到了问题，并回忆起这有`WaitForPendingFinalizers()`帮助，因此调用`GC.Collect()`.

该软件在现实生活中从未泄漏，但编写单元测试以证明该对象没有保持活动状态比我希望的要困难得多。（过去我们的缓存存在错误，但确实保持了它的活力。）

# regex - 使用正则表达式匹配除下划线以外的任何字符

> ID：15205896
> 
> 赞同：7
> 
> 时间：2013-03-04T16:10:48.703
> 
> 标签：regex, regex-negation

我正在尝试编写正则表达式，它将匹配一个字符串，除了带下划线的字符串。

到目前为止我有这个，`/[A-Za-z0-9]+/`但我不知道要在其中包含什么以使其不需要下划线。

更新：

应该已经更清楚地说明了这一点。我正在尝试匹配一个电子邮件地址，但不是在 _ 之后的部分中带有下划线的电子邮件地址

到目前为止，这是我总共拥有的。 `/[A-Za-z_0-9]+@[A-Za-z0-9]+\.(com|ca|org|net)/` 到目前为止的答案，不工作

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-04T16:12:41.260

`/^[^_]+$/`将匹配包含除下划线以外的任何字符的 1 个或多个字符的字符串。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-04T16:45:49.553

如果我理解您的要求 - 匹配字符串，但包含下划线的字符串除外 - 这需要正则表达式前瞻。

原因是正则表达式通常一次操作一个字符。所以如果我想知道我是否应该匹配一个字符，但前提是后面没有下划线，我需要使用前瞻。

`^((?!_)[A-Za-z0-9])+$`

`?!`是负前瞻运算符

编辑：

所以你希望@符号之前的部分最多有一个下划线，而后面的部分没有下划线？

`^[A-Za-z0-9]+_?[A-Za-z0-9]+@[A-Za-z0-9]+\.(com|ca|org|net)$`

# java - 单链表和双链表（Java）

> ID：15205898
> 
> 赞同：1
> 
> 时间：2013-03-04T16:10:55.177
> 
> 标签：java, linked-list

java.util中的LinkedList是双向链表吗？我是否需要实现我自己的单链表，或者在 java.util 中有什么类？

只是无法通过网络找到直接的答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T16:12:03.823

从[LinkedList API 文档](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedList.html)：

> 所有操作都按照双向链表的预期执行。

除非内存是个问题，否则双链表足以满足单链表所能满足的所有需求。

# java - 如何检查 Java 类是否包含 JUnit 测试？

> ID：15205904
> 
> 赞同：-1
> 
> 时间：2013-03-04T16:11:21.253
> 
> 标签：java, junit, junit4, junit3

我必须检查某个`Class<?>`对象是否包含 JUnit 测试（JUnit3 和 JUnit4）。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T16:15:29.980

对类使用 Java 反射来找出答案。

对于版本 3，该类必须扩展 TestCase。

对于版本 4，您可以扫描注释，请参阅：[如何获取成员变量的注释？](https://stackoverflow.com/questions/4453159/how-to-get-annotations-of-a-member-variable)

基本上你必须像 JUnit 一样做，也许你甚至可以重用一些现有的 JUnit 代码。

# php - MySql PHP，将1行绑定到变量中

> ID：15205905
> 
> 赞同：0
> 
> 时间：2013-03-04T16:11:24.133
> 
> 标签：php, mysql

你好，直到现在我一直在使用这个代码：

```
$query = $db->prepare("SELECT f_name, l_name FROM users WHERE user_id=1");
$query->execute();
$query->bind_result($f_name, $l_name); 
```

要将数据从表中取出并将其绑定到变量，但如果我想要一个结果，就像上面的代码（WHERE user_id=1）一样，我并不总是想使用这个代码：

```
<?php while($query->fetch):?>something HTML where I use $f_name and $l_name<?php endwhile; ?> 
```

是否有绑定结果的代码，其中唯一的结果是绑定到 1 个变量，我可以将其包含在代码中而无需 while 和 endwhile？

# c# - 接受模型表达式的属性属性

> ID：15205908
> 
> 赞同：1
> 
> 时间：2013-03-04T16:11:29.577
> 
> 标签：c#, asp.net-mvc, model-view-controller, lambda

我有一个带有属性的模型，这些属性以字符串形式相互引用。例如。

```
public MyModel
{
    [MyAttribute(BindTo = "Foo2")]
    public string Foo1 { get; set; }

    public string Foo2 { get; set; }
} 
```

这些字段名称稍后在 javascript 中用于通过名称选择器在 DOM 上相互挑选，但是有没有办法使用表达式来防止属性名称更改破坏选择器？在更复杂的模型中，它可能会被遗忘。

我想实现：

```
[MyAttribute(BindTo = m => m.Foo2)] 
```

这可能吗？我怎样才能实现它？到目前为止，我很茫然。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T16:13:40.090

不幸的是，这是不可能的。C# 属性可以接受一组非常有限的值。基本上任何可以合法放入 C#`const`值的东西加上数组的一些扩展。不允许将表达式树 lambda 作为属性参数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T16:15:53.647

不，这是不可能的。根据[文档](http://msdn.microsoft.com/en-us/library/aa288454%28v=vs.71%29.aspx)：

> 属性参数仅限于以下类型的常量值：
> 
> *   简单类型（bool、byte、char、short、int、long、float 和 double）
> *   细绳
> *   系统类型
> *   枚举
> *   object （object 类型的属性参数的参数必须是上述类型之一的常量值。）
> *   上述任何类型的一维数组

但是你可以这样做：

```
[MyAttribute(BindMethod = "GetBinding")]
public string Foo1 { get; set; }

public Expression GetBinding()
{
    Expression<Func<MyModel, string>> expr = m => m.Foo2;
    return expr;
} 
```

# authentication - 是否可以同时使用 S3 查询字符串身份验证和 HTTP 缓存？

> ID：15205912
> 
> 赞同：2
> 
> 时间：2013-03-04T16:12:05.243
> 
> 标签：authentication, amazon-s3, amazon-cloudfront, http-caching

对于使用 S3/Cloudfront 进行图像存储的 (Rails) Web 应用程序，我有以下要求：

1.  用户只能在登录后才能看到图像。如果用户将图像 URL 发送给朋友，它将不起作用。
2.  如果用户看到了一张图片，它应该被他们的浏览器缓存，这样他们就不必再次下载它。

…</p>

*   需求 1 可以通过 S3 的查询字符串身份验证 (QSA) 解决（例如 30 秒到期）。
*   需求 2 可以使用 HTTP 缓存来解决。

**是否可以同时使用它们？**

我面临的挑战是 QSA 在过期后有效地更改图像的 URL，即使完美的副本可能驻留在浏览器缓存中。

# c# - C# 对多台计算机运行 WMI 查询

> ID：15205915
> 
> 赞同：0
> 
> 时间：2013-03-04T16:12:10.913
> 
> 标签：c#, wmi

我正在尝试使用 System.Management 在 C# 中运行一个简单的 WMI 查询，但我希望它针对多台远程计算机而不仅仅是一台；一次一个或一次全部。

我有用户当前查询我们的活动目录并在文本框中返回计算机名称。

关于如何做到这一点的任何想法？我为每个循环尝试了一个，但它似乎不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T18:55:09.387

确保您实际上拥有远程访问 WMI 的适当用户权限：

[http://www.poweradmin.com/help/enableWMI.aspx](http://www.poweradmin.com/help/enableWMI.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T22:11:12.267

感谢您的帮助，愚蠢的错误，我的 for 循环在错误的位置。

# javascript - Mongoose .populate 有 2 个条件

> ID：15205923
> 
> 赞同：0
> 
> 时间：2013-03-04T16:12:32.537
> 
> 标签：javascript, mongoose

我有一个包含主队和客队变量的球队，我现在有下面的代码来显示每场比赛的主队名称，我将如何更改它以便我显示每场比赛的主队和客队所以它看起来像下面这样：

```
[
  "Team 1", "Team 2",
  "Team 3", "Team 4"
] 
```

例如，1/2 队参加一场比赛，3/4 队参加另一场比赛。

```
 app.get('/homeTeamNames', function(req, res) {
    util.log('Serving request for url [GET] ' + req.route.path);
    Match.find({}, {'hometeam': 1}).populate('hometeam', {name: 1}).exec(function(err, teams) {
      var homeNames = [];
      for(var i = 0; i < teams.length; i++) {
        homeNames.push(teams[i].hometeam.name);
      }
      res.send(homeNames);
    });
  }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T16:55:04.673

您可以像这样将多个`populate`调用链接在一起：

```
Match.find({}, {hometeam: 1, awayteam: 1})
    .populate('hometeam', {name: 1})
    .populate('awayteam', {name: 1})
    .exec(function(err, teams) { ... 
```

# json - JSON 值是有效的 JSON 吗？

> ID：15205925
> 
> 赞同：12
> 
> 时间：2013-03-04T16:12:35.727
> 
> 标签：json

JSON 值是字符串、数字、真、假、空的有效 JSON 吗？即是

```
true 
```

有效的 JSON 文档？还是必须是数组/对象？

一些验证器接受这一点（例如[http://jsonlint.com/](http://jsonlint.com/)），而另一些则不接受（例如[http://jsonschemalint.com/](http://jsonschemalint.com/)）。RFC 和 json.org 对此问题并不清楚。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-04T16:23:41.990

截至 2014 年 3 月：**是**的。[从规范](https://www.rfc-editor.org/rfc/rfc7159)：

> JSON 文本是一个序列化的值。请注意，某些先前的 JSON 规范将 JSON 文本限制为对象或数组。仅生成需要 JSON 文本的对象或数组的实现将是可互操作的，因为所有实现都将接受这些作为符合标准的 JSON 文本。

但是，**在最初提出这个问题时**，答案是：不[。原始规范说](https://www.rfc-editor.org/rfc/rfc4627)：

> JSON 文本是一个序列化的对象或数组

因此 JSON 文本中最外层的数据类型必须是对象或数组，不能是字符串、布尔值、数字或任何其他数据类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-10T03:25:30.180

是的，根据 ECMA-404 JSON 数据交换标准。

资料来源： http: [//www.ecma-international.org/publications/files/ECMA-ST/ECMA-404.pdf](http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-404.pdf)

> JSON 文本是由符合 JSON 值语法的 Unicode 代码点形成的标记序列。

下面给出 JSON 值语法：

> JSON 值可以是对象、数组、数字、字符串、true、false 或 null。

这与@quentin 引用的 RFC 直接冲突。更新后的 RFC 为 8259，其中指出：

> 请注意，某些先前的 JSON 规范将 JSON 文本限制为对象或数组。仅生成需要 JSON 文本的对象或数组的实现将是可互操作的，因为所有实现都将接受这些作为符合标准的 JSON 文本。

# git - 从 1 个文件夹中删除 Git 存储库并将该文件夹添加到另一个存储库 Git

> ID：15205927
> 
> 赞同：0
> 
> 时间：2013-03-04T16:12:39.343
> 
> 标签：git, github

我正在开发一个拥有自己的 git repo 的项目，我想保留这个项目。但是我使用了一个从 github 克隆的库。我将它克隆到我的项目的子文件夹中。所以文件夹结构是正确的。

从库中删除 repo 并将库添加到我自己的 repo 的最佳方法是什么？我需要将历史记录保留在我的项目中，但不需要保留在库中。

**编辑**

我使用 Tower 来管理 git，这显示了以下内容。我猜它在子模块中是问题所在。如何解决这个问题？

![在此处输入图像描述](../Images/928f3266683c5a1e062f7f543329e22e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T16:32:40.843

您可以删除库附带的 .git 文件夹。这将从 GitHub 中丢失该库的所有历史记录，但这似乎是您想要的。

假设 linux/osx：

```
cd /path/to/library/dir
rm -rf .git/ 
```

删除 GitHub 存储库后，只需使用普通的 git add 即可添加它：

```
cd /path/to/library/dir
git add . 
```

# matlab - 找到最小化成本函数的组合

> ID：15205928
> 
> 赞同：0
> 
> 时间：2013-03-04T16:12:40.293
> 
> 标签：matlab, combinations, minimize

我面临一个问题，我会感谢任何可以提供帮助的人。问题如下：

考虑我们有一个向量`D = [D1;D2;D3;...;DN]`和一组时间实例`TI = {t1,t2,t3,...,tM}`。`D`向量,的每个元素`Di`对应于 的一个子集`TI`。例如`D1`可以对应于时间实例`{t1,t2,t3}`和 D2 到`{t2,t4,t5}`.

我想找到与 的`D`所有元素相对应的元素组合`TI`，而不需要多次考虑其中的任何一个，同时最小化成本函数`sum(Dj)`。`Dj`是向量的元素，`D`每个元素对应一组时间实例。

让我举个例子。让我们考虑一个向量

```
D = [15;10;5;2;35;15;25;25;25;30;45;5;1;40] 
```

和一套

```
TI={5,10,15,20,25,30} 
```

每个 D 元素对应于

```
{[5 15];[5 20];[5 25];[5 30];[5 15 20];[5 20 25];[5 15 30];[5 20 25 30];[10 15];[10 20];[10 25];[10 15 20];[10 15 20 25];[10 30]} 
```

例如，D(1)=15 对应于时间实例 [5 15]。

该过程必须提出的解决方案是D（4）和D（12）的组合，即分别为2和1，具有最小的和并对应于所有时间实例。

我不得不提到，该过程必须能够处理大向量。

感谢您的每一次尝试帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T17:07:42.653

二进制权重向量 x 在每个 D_i 上放置一个权重。

令 f=[D1;D2;...;DN]。

A的j列，A_j是一个二元向量。

如果 D_j 对应于 Tk，则 A_jk 为 1，否则为零。

问题是：

```
min f^T*x  s.t.  A*x=1; 
```

然后用[bintprog](http://www.mathworks.com/help/optim/ug/bintprog.html)来解决。

```
x = bintprog(f,[],[],A,ones(M,1)) 
```

# ruby-on-rails - NoMethodError: 为 Gem::Package:Class 调用私有方法 `open' 安装 rake (10.0.3) 时发生错误，并且 Bundler 无法继续

> ID：15205933
> 
> 赞同：34
> 
> 时间：2013-03-04T16:12:53.247
> 
> 标签：ruby-on-rails, rake, bundler

我正在尝试处理从 github 同步的 ruby​​ on rails 项目。即使 rake-10.0.3 安装成功，“捆绑安装”也会失败。我是 Rails 新手，不知道如何继续。我用谷歌搜索了错误，并尝试按照解决方案的建议安装不同版本的 rake，但没有帮助。

这就是我想要做的......请帮忙。

`ruby 1.9.3p374 (2013-01-15) [i386-mingw32]`

 ````
>rails s
←[31mCould not find kaminari-0.14.1 in any of the sources←[0m
←[33mRun `bundle install` to install missing gems.←[0m

>bundle install
Fetching gem metadata from https://rubygems.org/...........
Fetching gem metadata from https://rubygems.org/..

NoMethodError: private method `open' called for Gem::Package:Class
An error occurred while installing rake (10.0.3), and Bundler cannot continue.
Make sure that `gem install rake -v '10.0.3'` succeeds before bundling.

>gem install rake -v '10.0.3'
Successfully installed rake-10.0.3
Done installing documentation for rake (1 sec).
1 gem installed

>bundle install
Fetching gem metadata from https://rubygems.org/...........
Fetching gem metadata from https://rubygems.org/..

NoMethodError: private method `open' called for Gem::Package:Class
An error occurred while installing rake (10.0.3), and Bundler cannot continue.
Make sure that `gem install rake -v '10.0.3'` succeeds before bundling. 
````  `谢谢！

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2013-03-05T13:45:19.823

您应该首先更新 Rubygems：

```
gem update --system 
```

然后更新 Bundler：

```
gem install bundler 
````

# vb.net - vb.net在DataGridView中隐藏列非常慢

> ID：15205937
> 
> 赞同：1
> 
> 时间：2013-03-04T16:13:03.700
> 
> 标签：vb.net, visual-studio-2010, .net-4.0, datagridview, doublebuffered

试图在 Windows 7 机器上隐藏 DataGridView 的 44 列需要 44 秒。我怎样才能加快速度？我使用了以下代码：

```
 'Turn on DataGridView.DoubleBuffered
 Dim myType As Type = GetType(DataGridView)
 myType.InvokeMember( _
   "DoubleBuffered", _
    BindingFlags.NonPublic Or BindingFlags.Instance Or BindingFlags.SetProperty, _
    Nothing, DataGridView1, New Object() {True})

 'hide the following columns
 Me.SuspendLayout()
 For Each col As DataGridViewColumn In DataGridView1.Columns
    col.Visible = False
 Next
 Me.ResumeLayout() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T05:37:31.310

Change your loop to this as this will iterate through the columns and make them not visible... For my test just to make sure, I added 250 columns and hid them all in about a second with this loop...

```
 For i As Integer = 0 To DataGridView1.ColumnCount - 1
   DataGridView1.Columns(i).Visible = False
 End Sub 
```

This will remove all columns if you choose to do so...

```
 For i As Integer = 0 To DataGridView1.ColumnCount - 1
   DataGridView1.Columns.Remove(DataGridView1.Columns(0).Name)
  Next 
```

And here is another way...

```
 DataGridView1.Columns.Clear() 
```

As for you double buffering your datagridview, double buffer the form as it will reduce any flickering that occurs on that form. Here are two options: 1 - set double buffer in the properties window for your form OR 2 - initialize another sub to double buffer it...

Here's the code for double buffering for your form... Put this directly under your class name...

```
 Public Sub New()
    MyBase.New()

    MyBase.DoubleBuffered = True
    ' This call is required by the designer.
    InitializeComponent()

    ' Add any initialization after the InitializeComponent() call.
 End Sub 
```

You can leave the above code if you choose to do so, this will help overall your form and the components that are sitting on it. Here is my favorite though for a datagridview to avoid any flickering what so ever including the scroll bars...

*   1 Put this at the very top of your form...

    ```
    Imports System.Reflection 
    ```

*   2 Add this to your form load...

    ```
    BufferMethod.DoubleBuffered(DataGridView1, True) 
    ```

*   3 Drop this new class at the very end of your other class (underneath End Class)

    ```
    Public NotInheritable Class BufferMethod
      Public Shared Sub DoubleBuffered(dgView As DataGridView, Setting As Boolean)
          Dim dgvType As Type = dgView.[GetType]()
          Dim propInfo As PropertyInfo = dgvType.GetProperty("DoubleBuffered", BindingFlags.Instance Or BindingFlags.NonPublic)
          propInfo.SetValue(dgView, Setting, Nothing)
      End Sub
    End Class 
    ```

Hope You Enjoy!

Regards,

MrCodexer

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-10T12:43:49.113

列的 autosizemode 属性，当设置为根据内容（如显示的单元格）自动配置时，可能会减慢整个网格的速度。它似乎在“内部”重绘。我通过仅在小网格上使用这些类型解决了我的网格问题，而对其他人则非常谨慎。我花了一段时间才弄清楚这是问题所在，因为没有发生外部绘图/事件，它看起来很慢。

# api - 可以使用 HTTP DELETE 停用记录吗？

> ID：15205938
> 
> 赞同：16
> 
> 时间：2013-03-04T16:13:05.923
> 
> 标签：api, rest, put, http-delete

我正在构建一个 RESTful API 命令来停用用户记录。使用 DELETE 来执行此操作是否符合规定，或者这应该是 PUT，因为记录正在更新为“停用”状态？还是只是口味问题？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-04T16:15:38.033

的语义`DELETE`意味着您实际上正在摆脱对象。您在这里所做的似乎是对对象状态的修改。在这种情况下，a `PUT`or`PATCH`会更合适。

最好坚持使用您正在使用的统一接口的语义（在本例中为 HTTP 动词）。如果这些与您在应用程序中实际执行的操作相匹配，那么混淆就会减少。另外，如果您稍后决定 a`DELETE`应该实际删除一条记录，而不是仅仅将其标记为“非活动”，该怎么办？现在您已经更改了 API 的行为。此外，如果您使用`DELETE`，则基本上遵循“最小意外原则”，这对于 API 来说是有益的。最好是`DELETE`实际删除，而不是假装这样做。

另一方面，如果事实证明您需要保留数据以用于历史目的，那么将记录从一个位置删除并将其移至其他位置（例如，从一个表到另一个表）是完全可以的。在这种情况下，该记录应该对未来的操作保持不可用（即，`GET`资源上的 a 应该返回 a `404`）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-04T16:18:54.140

如果在您的停用操作之后，最终用户无法再通过“GET”访问该资源，除非它再次重新激活，我没有看到使用“DELETE”的问题。否则，“PUT”更合适。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-05T19:41:23.650

如果您向其发送`DELETE`请求的 URL 上的资源在该 URI 上不再可用，那么`DELETE`是合适的。如果它仍然存在但改变了状态，那么它不是。

例如，这没关系（/friends/bob 的资源消失了；在此过程中，/formerfriends/bob 会创建一个新资源，但这是偶然的）：

```
GET /friends/bob => 200 OK
GET /formerfriends/bob => 404 Not Found
DELETE /friends/bob => 204 No Content
GET /friends/bob => 410 Gone
GET /formerfriends/bob => 200 OK 
```

这不是：

```
GET /friends/bob => 200 OK {"status"="friend"}
DELETE /friends/bob => 204 No Content
GET /friends/bob => 200 OK {"status"="formerfriend"} 
```

`PUT`使用or可以更好地处理类似的事情`PATCH`：

```
GET /friends/bob => 200 OK {"status"="friend"}
PATCH /friends/bob {"status"="formerfriend"} => 204 No Content
GET /friends/bob => 200 OK {"status"="formerfriend"} 
```

# c# - WinRT 聚焦用户控件

> ID：15205939
> 
> 赞同：0
> 
> 时间：2013-03-04T16:13:12.380
> 
> 标签：c#, wpf, xaml, windows-runtime, focus

所以我有一个用于播放视频的 UserControl。此控件显示为其他控件的覆盖。带有视频播放器的 UC 后面的控件有一个返回按钮，允许用户在 UI 中移动。问题是在播放视频时，用户仍然可以使用键盘导航到返回按钮，然后与 UI 进行交互。我需要的是这个：

播放视频时，键盘基本上应该被禁用。如果这不可能，我需要在播放视频时禁止用户按 Tab 键（或让 Tab 键执行任何操作）。

有什么想法吗？

# javascript - 在不同版本的 IE8 中，JQuery UI 选项卡未正确映射到内容 div

> ID：15205941
> 
> 赞同：0
> 
> 时间：2013-03-04T16:13:17.450
> 
> 标签：javascript, jquery, jquery-ui

我有一个网页，我也添加了 JQuery UI 选项卡。HTML 代码是由我无法控制的第三方生成的，但它主要是 JQuery 所期望的。当在我的机器上查看页面时，它可以正常工作，但是客户端机器会沿顶部呈现选项卡，但所有选项卡内容都在第一个选项卡下一个接一个地列出。所以它正在查找选项卡而不是内容 Div。我已经在 chrome 中尝试过，标签可以正常工作。

工作：IE 8.0.6001.19393 中断：IE 8.0.7601.17514

这两个会影响浏览器内容选项卡的浏览器版本有什么不同？升级浏览器不是一种选择，因为它是在公司级别设置的。

更新：如前所述，我必须对 set html 进行处理，这需要一些调整才能呈现选项卡。主要是标签链接开始不正确的 href 指向隐藏的锚点，即当它们应该是 href="#profile_1" 时 href="#profile1"。

我使用此代码在调用选项卡之前重置 url：

```
 var i = 1;
    $('#ProfileTOC ul li a').each(function () {
        $('#profile' + i).remove();
        $(this).attr('href', '#profile_' + i);
        i++;
    }); 
```

现在查看 Jquery 代码，到目前为止我发现的唯一区别是创建选项卡时它调用“islocal”，它在工作浏览器上返回 true，在损坏的浏览器上返回 false。JQuery 的原因是为工作选项卡锚使用完整的 http://* url，而损坏的浏览器仅使用完全缺少 http:// 的 #anchor url。这使得“islocal”返回 false；我认为它的地图功能似乎在做不同的事情：

```
 this.anchors = this.tabs.map(function() {
            return $( "a", this )[ 0 ];
        })
        .addClass( "ui-tabs-anchor" )
        .attr({
            role: "presentation",
            tabIndex: -1
        }); 
```

在此之后，一个浏览器具有每个锚点的完整 URL，而另一个具有相对的。如果我删除 URL 更改代码，则 URL 再次是完整路径，但显然仍然不正确。

我已经破解了 JQuery UI 代码以删除 islocal 检查并且选项卡工作，但我想知道为什么并且可能在不破解 jQuery UI 代码的情况下让它工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:37:37.967

我已经破解了 JQuery UI 代码以删除 islocal 检查。

# iphone - iOS - 开发 iPhone 应用程序以将相机视频流式传输到计算机？

> ID：15205942
> 
> 赞同：1
> 
> 时间：2013-03-04T16:13:21.520
> 
> 标签：iphone, ios, video, stream

我正在寻找一种方法来创建一个应用程序，该应用程序允许捕获的相机视频在计算机上流式传输。例如，一个人可能会在房间里走动 iPhone，而另一个人可能会在他们的计算机上流式传输该视频。有点像单向 Facetime，除了接收器在电脑上。此外，我不能只使用现有的应用程序，因为稍后我想更改程序以对传入的数据进行一些计算机视觉处理。

目前，我发现 AV Foundation 应该是视频捕获的正确选项（[来自这个问题](https://stackoverflow.com/questions/3504992/iphone-video-camera-streaming)）。但是，我很难找到可以实际流式传输这些数据的方法。特别是在 iPhone 上搜索如何创建应用程序时，经常会找到执行该任务的现有应用程序，而不是如何创建应用程序。

谁能给我一个关于如何从 iPhone 流式传输视频捕获的信息的指针？非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-26T08:37:43.150

您可以将“Wowza 媒体服务器”用于流媒体目的对于 wowza 媒体服务器 doenload ：

[Wowza 下载](http://www.wowza.com/pricing/installer)

安装 wowza 之后，现在您需要在 wowza 中设置实时设置，以达到您需要的目的：

[设置实时应用程序](http://www.wowza.com/forums/content.php?36)

对于 iOS 端，有一个库对于使用 RTMP 连接的视频流很有用你可以在

[用于流媒体的 RTMP 库](http://blog.themidnightcoders.com/index.php/2011/06/29/rtmp-communication-library-for-ios-is-available/)

库示例

[流媒体示例的 RTMP 库](https://github.com/slavavdovichenko/MediaLibDemos)

在这个从 iOS 端流式传输的好例子中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-21T10:04:16.833

我在[ANGL lib](http://angl.tv/lib/)和 Wowza 媒体服务器上取得了成功。它提供平滑的 RTMP 流。

# css - 横幅重叠子菜单 Wordpress

> ID：15205943
> 
> 赞同：0
> 
> 时间：2013-03-04T16:13:21.953
> 
> 标签：css, wordpress, menu

我刚刚将 Wordpress 升级到 3.5.1 版，它在我的网站上弄乱了一些东西，现在子菜单加载但立即隐藏在横幅后面（它们加载但很快被隐藏）。我在这里和那里尝试了一些修改，但没有（现在我可能更糟了）。

我认为它在 CSS 文件中。

以下是该网站的链接：[http](http://www.fiestacolegial.com) ://www.fiestacolegial.com和旨在显示在 MULTIMEDIA、NOTICIAS、SOBRE NOSOTROS 下方的子菜单。

这是 CSS 文件的链接：http: [//pastie.org/6381132](http://pastie.org/6381132)

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:21:38.137

问题是 jQuery 1.9 导致处理此交互的插件出现问题。

本教程应该向您展示如何使用 jQuery 1.8 版：http: [//www.wpbeginner.com/wp-themes/replace-default-wordpress-jquery-script-with-google-library/](http://www.wpbeginner.com/wp-themes/replace-default-wordpress-jquery-script-with-google-library/)

# php - 从文件夹加载项目的动态导航栏？

> ID：15205945
> 
> 赞同：0
> 
> 时间：2013-03-04T16:13:28.473
> 
> 标签：php, dynamic, navigation

好吧，所以我真的不确定这是否可能。这就是我想要做的：

我有一个名为 pages 的文件夹。它可能看起来像：

`index page2 page3`

我想要做的是使用 ul 和 il 标签在导航栏中列出文件，如下所示：

> ul
> 
> il a href="index" 索引
> 
> il a href="page2" page2
> 
> il a href="page2" page2
> 
> ul

当我使用新文件（即 page3）更新文件夹时，它也会动态添加该文件夹，如下所示：

> il a href="page3" page3

我不知道该怎么做，我尝试搜索但没有运气。

我知道这是很多要求，我只是不知道还有哪里可以问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T16:26:19.947

像这样的东西：

```
foreach (glob("foldername/*") as $path) {
  $file = basename($path);
  echo "<li><a href="$path">$file</a></li>\n";
} 
```

# mdx - MDX 余额到总计

> ID：15205947
> 
> 赞同：1
> 
> 时间：2013-03-04T16:13:33.750
> 
> 标签：mdx

在下面的示例中，我有一个产品维度，产品 ID 为 1、2、3、4..等。我想创建一个名为 Balance To Totals 的计算成员，它将汇总他们选择的所有产品并将其从总计中减去。这应该发生在他们选择的任何衡量标准上。在下面的示例中，我在行上有产品维度，在列上有两个度量。如果用户选择产品 1、4、5，那么总计的余额将是从总计中减去这三个产品的总和。有人知道我如何通过计算成员来实现这一点吗？

```
Product Id      Cost($)      Profit($)
1                80             3
4                70             4
5                50             2
BalToTotal       125            25

Grand Total      325            34 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T08:58:58.630

我刚刚在 AdventureWorks Cube 上设置了一个简单的 MDX 查询，因此您可以使用它：

```
with set [SelectedProducts] as {[Product].[Subcategory].&[26], [Product].[Subcategory].&[1]}
     member [Product].[Subcategory].[BalToTotal] as [Product].[Subcategory].defaultmember - Aggregate ([SelectedProducts])
select
{[Measures].[Internet Sales Amount], [Measures].[Reseller Order Quantity]} on 0,
{[SelectedProducts], [Product].[Subcategory].[BalToTotal], [Product].[Subcategory].defaultmember}  on 1
from [Adventure Works] 
```

输出将是：

```
 Internet Sales Amount     Reseller Order Quantity
Bike Racks        €39.360,00               2.838
Mountain Bikes    €9.952.759,56            23.351
BalToTotal        €19.366.557,66           188.189
All Products      €29.358.677,22           214.378 
```

希望这有帮助

# php - Laravel 3 和 Composer 找不到类

> ID：15205949
> 
> 赞同：2
> 
> 时间：2013-03-04T16:13:37.840
> 
> 标签：php, sql, ubuntu, laravel, laravel-3

我正在尝试`php-resque`通过`artisan`. 我相信 Laravel 是 v3.2.7。运行命令时`php artisan queue`出现错误：

**错误**

```
PHP Fatal error:  Class 'Resque' not found in /var/www/dev/application/tasks/queue.php on line 20

Fatal error: Class 'Resque' not found in /var/www/dev/application/tasks/queue.php on line 20 
```

这里似乎有什么问题？php-resque 包似乎已安装到`vendor`目录中...

**PHP** *(队列.php)*

```
class Queue_Task
{
    public function run()
    {

        // Autoload composer vendors.
        require path('composer').DS.'autoload.php';

        // You can pass arguments into the worker as payload
        $args = array('name' => 'John Smith');
        Resque::enqueue('testqueue', 'ExampleWorker', $args);

        echo "Resque job queued.\n";
        return;
    }
} 
```

* * *

**公共/index.php**

```
// --------------------------------------------------------------
// Tick... Tock... Tick... Tock...
// --------------------------------------------------------------
define('LARAVEL_START', microtime(true));

// --------------------------------------------------------------
// Indicate that the request is from the web.
// --------------------------------------------------------------
$web = true;

// --------------------------------------------------------------
// Set the core Laravel path constants.
// --------------------------------------------------------------
require '../paths.php';

// --------------------------------------------------------------
// Autoload composer vendors.
// --------------------------------------------------------------
require path('composer').'autoload.php';

// --------------------------------------------------------------
// Unset the temporary web variable.
// --------------------------------------------------------------
unset($web);

// --------------------------------------------------------------
// Launch Laravel.
// --------------------------------------------------------------
require path('sys').'laravel.php';

// --------------------------------------------------------------
// Autoload composer vendors.
// --------------------------------------------------------------
require path('composer').DS.'autoload.php'; 
```

**path.php** *片段*

```
// --------------------------------------------------------------
// The path to the composer vendors directory.
// --------------------------------------------------------------
$paths['composer'] = 'vendor'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T16:27:03.550

您缺少`DIRECTORY_SEPARATOR`作曲家路径。

# ruby - 为什么是 Module.methods() 和 respond_to？irb 中的工作方式与脚本中的不同？

> ID：15205952
> 
> 赞同：5
> 
> 时间：2013-03-04T16:13:40.223
> 
> 标签：ruby, reflection, metaprogramming, irb

我正在尝试在 Ruby 中使用反射方法，并遇到了一种我觉得非常令人惊讶的行为。

以下示例在 IRB 和调用 ruby​​ 脚本时的工作方式似乎有所不同：

示例 1：

```
def myfun; end
p respond_to?(:myfun) 
```

在 IRb 中，这表示“真”，在脚本中：“假”。

示例 2：

```
ml = methods
def myfun; end
p methods - ml 
```

在 IRb 中，这表示 [:myfun]。在脚本中：[]。

我在 1.8、1.9 MRI、JRuby 1.5.6 等下发现了这一点——所以我认为这是正常的。

为什么有区别？

我很确定'respond_to？是查看方法是否可用的方法 - 为什么在上述情况下不起作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T16:56:49.060

这个函数——“主”对象上的方法——在 ruby​​ 脚本中被定义为私有的。您可以轻松检查：

```
ml = private_methods
def myfun; end
p private_methods - ml #=> [:myfun]
p respond_to?(:myfun, true) #=> true 
```

如果你在 self 上显式调用它，你会得到一个错误：

```
self.myfun
# NoMethodError: private method ‘myfun’ called for main:Object 
```

另一方面，在 IRB 中，您的方法被定义为公共的。在引擎盖下，它看起来像这样：

```
class Object
  def irb_binding
    # this is where your entered code is evaluated
    def myfun; :ok; end # you can define methods in other methods
    self.myfun # and they are public by default
  end
end

p irb_binding # :ok 
```

IRB 可以轻松地在顶层进行评估，但它会使用该方法创建一个单独的环境，以便不共享局部变量：

```
require "irb"
foo = :ok
IRB.start
#>> foo
# NameError: undefined local variable or method `foo' for main:Object 
```

我认为公开的方法只是由于实施的巧合，这并不重要。这些方法无论如何都是暂时的。

# perl - perl中全局变量的线程安全

> ID：15205953
> 
> 赞同：3
> 
> 时间：2013-03-04T16:13:48.537
> 
> 标签：perl, perl-module

我有以下问题：

1.  perl中如何执行全局代码和初始化全局变量？
2.  如果我写使用 package_name; 在多个包中，全局代码是否每次都执行？
3.  全局变量是否以这种方式定义线程安全？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T16:22:41.943

Perl 为每个线程制作了所有代码和变量的完整副本。线程之间的通信是通过特别标记的[共享变量](https://perldoc.perl.org/threads/shared.html)（实际上它们不是共享的 - 每个线程中仍然有一个副本，但所有副本都会更新）。这是一个与许多其他语言显着不同的线程模型，因此线程安全问题是不同的 - 主要集中在对象被复制以创建一个新线程并且这些对象具有某种形式的资源到程序之外的东西时会发生什么（例如数据库连接）。

`use`据我所知，您的问题与线程无关？use 做了几件事；一是加载指定的模块并在其中运行任何顶级代码；每个模块只发生一次，而不是每个 use 语句发生一次。

# mdx - MONDRIAN MDX 查询的问题

> ID：15205964
> 
> 赞同：2
> 
> 时间：2013-03-04T16:14:17.287
> 
> 标签：mdx, olap-cube, mondrian

我需要从 MySQL 中的一个表创建一个 OLAP 视图。

我需要从表中的以下列中获取信息：

*   登录注意
*   注销注意
*   时间戳
*   用户名

所以我创建了这个蒙德里安模式：

```
<Schema name="Login">
  <Cube name="Login" visible="true" cache="true" enabled="true">
    <Table name="event_log">
    </Table>
    <Dimension visible="true" highCardinality="false" name="UserFirstName">
        <Hierarchy visible="true" hasAll="true" allMemberName="All UserFirstName">
          <Level name="UserFirstName" visible="true" column="userFirstName" type="String" uniqueMembers="true" levelType="Regular" hideMemberIf="Never">
          </Level>
        </Hierarchy>
    </Dimension>
<Dimension visible="true" highCardinality="false" name="LoginNote">
        <Hierarchy visible="true" hasAll="true" allMemberName="All LoginNote">
          <Level name="LoginNote" visible="true" column="loginNote" type="String" uniqueMembers="true" levelType="Regular" hideMemberIf="Never">
          </Level>
        </Hierarchy>
    </Dimension>
<Dimension visible="true" highCardinality="false" name="LogoutNote">
        <Hierarchy visible="true" hasAll="true" allMemberName="All UserFirstName">
          <Level name="LogoutNote" visible="true" column="logoutNote" type="String" uniqueMembers="true" levelType="Regular" hideMemberIf="Never">
          </Level>
        </Hierarchy>
    </Dimension>
    <Measure name="Users" column="userFirstName" aggregator="count" description="Users">
    </Measure> 
```

我想知道如何运行 MDX 查询以便能够在行中显示 LoginNote 和 LogoutNote 信息，并在列中显示 UserFirstName。

我能够跑

```
Select
UserFirstName.Children ON COLUMNS,
LogoutNote.Children ON ROWS
FROM Login 
```

或者

```
Select
UserFirstName.Children ON COLUMNS,
LoginNote.Children ON ROWS
FROM Login 
```

但我不能跑

```
Select
UserFirstName.Children ON COLUMNS,
{LogoutNote.Children,LoginNote.Children} ON ROWS
FROM Login 
```

因为返回错误：

> 函数“{}”的所有参数必须具有相同的层次结构。

任何帮助将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T03:27:05.397

该`{...}`符号是 的简写`Union(...)`，它将两组成员组合在一起。这些成员必须来自同一层次结构（如错误消息所述），但您包括来自不同维度/层次结构的 LogoutNote 和 LoginNote 的成员。

如果要组合层次结构，则需要`Crossjoin()`它们，创建两组的笛卡尔积。

```
SELECT
    UserFirstName.Children ON COLUMNS,
    Crossjoin(LogoutNote.Children, LoginNote.Children) ON ROWS
FROM Login 
```

我不确定这是否正是您期望的查询结果，您可能希望`NON EMPTY`在 Crossjoin() 之前添加一个以消除所有没有值的 LoginNote 和 LogoutNote 组合。

希望这能让你走上正确的道路。

# c# - Windows Server 2012 - 可以让服务器运行 EXE 文件吗？

> ID：15205967
> 
> 赞同：0
> 
> 时间：2013-03-04T16:14:31.060
> 
> 标签：c#, asp.net, windows-server-2012

我在 Windows Server 2012 上有一个无限的 Windows 主机包。我希望通过执行一个 EXE 文件（打开一个控制台，类似 CMD 的窗口）来运行一些可以在 Windows 主机上运行的游戏的游戏服务器 - 这意味着，如果您想在本地计算机上运行服务器，您只需运行此应用程序并使用您的互联网 IP。我想将我的网址用作 IP，但我的问题是：**Windows Server (2012) 可以执行文件吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T16:17:24.283

是的。有许多 * *BUT* * 和 * *IF* *。首先，几乎所有托管软件包的用途都不同。如果您的主机不是游戏托管公司将不允许您使用他们的处理能力。

# c# - 具有数据集绑定问题的 Janus GridEx

> ID：15205972
> 
> 赞同：0
> 
> 时间：2013-03-04T16:14:47.660
> 
> 标签：c#, winforms, janus

我对 Janus GridEx 有一个奇怪的问题。

网格绑定到包含 1 个表的 DataSet，该表正确显示在屏幕上。但是，每当我对网格进行更改时，它们都不会反映在我的数据集中。

这是我更新更改的地方：

```
 void janusGrid_CellEdited(object sender, ColumnActionEventArgs e)
        {
            JanusGrid.UpdateData();
            bool anyChanges = DataSet.HasChanges();
            DataSet.Tables["Components"].AcceptChanges();
        } 
```

anychanges 布尔值具有“真”。

请给我一些线索，因为我无法弄清楚我错过了什么或做错了什么......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T10:35:42.760

好的，我找到了这种行为的原因。我只需要语句“JanusGrid.UpdateData();” 对于 CellUpdated 事件，而不是 CellEdited。

# installation - 我们如何在 installshield 项目中将现有的 Web 应用程序从 .net 2.0 迁移到 4.0

> ID：15205982
> 
> 赞同：1
> 
> 时间：2013-03-04T16:15:18.060
> 
> 标签：installation, installshield, custom-action

我们有许多安装和配置 IIS 应用程序的 Installshield 项目。我们已经发布了不同应用程序的多个版本（3 个应用程序的 7 个以上版本），现在想升级以使用 .net 4.0 而不是 2.0 和 3.5。

修改“Internet 信息服务”设置，将网站/应用程序上的 ASP.NET 版本更改为 4.0.30319 并将应用程序池下的 .Net Framework 版本更改为 v4.0 后，安装程序正确创建了一个 4.0 的应用程序IIS 6 及更低版本以及 IIS 7 及更高版本将池正确设置为使用 v4.0，但升级不适用于任何目标。

升级安装正常，但虚拟目录或应用程序池的 .Net 版本保持不变。手动更改它当然可以，但这会导致更多的支持问题。

我尝试将升级更改为重大升级，但没有成功，我目前正在执行自定义操作以在安装后更改 .Net 版本，但我对 Installshield 的此功能没有太多经验。

有没有人遇到过这个问题？有没有首选的方法来实现这一目标？（自定义操作或 .Net 安装程序类，WIX 不是一个选项）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T20:54:17.120

无需花费数小时进行深入研究……一种快速的解决方案是在新安装程序中重命名应用程序池，并让重大升级创建新的并删除旧的。毕竟，如果您从 .NET 2.0 更改为 4.0，从某种意义上说，您正在创建一个不向后兼容的组件，因此应该是一个新组件。

# php - 程序无法启动，因为缺少 php5ts.dll

> ID：15205993
> 
> 赞同：1
> 
> 时间：2013-03-04T16:15:43.647
> 
> 标签：php, iis-7

我在 Windows 上有 iis 7，并从 Windows 管理器安装了 php5.3。

它不是线程安全的。

当我进入命令提示符并输入“php”时，我得到了那个错误。

这变得很麻烦，因为我无法从命令提示符（例如 Pear）安装任何东西，例如通过输入“php go-pear.phar”

我该如何解决这个问题，谢谢

# regex - (^?)* 在这个正则表达式中是什么意思？

> ID：15205994
> 
> 赞同：19
> 
> 时间：2013-03-04T16:15:52.110
> 
> 标签：regex, lua

我有这个正则表达式：

```
^(^?)*\?(.*)$ 
```

如果我理解正确，这是它所做的细分：

*   ^ - 从字符串的开头开始匹配
*   (^?)* - 我不知道，但它以 1 美元的价格存储
*   \? - 匹配一个问号
*   (.*)$ - 匹配直到字符串结尾的任何内容

那么 (^?)* 是什么意思呢？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-04T16:17:32.490

只是在`(^?)`寻找文字字符`^`。正则表达式模式中的`^`字符仅在用作模式的第一个字符或分组匹配中的第一个字符时才具有特殊含义`[]`。当在这 2 个位置之外使用时，它的`^`字面意思是在`^`输入字符串中查找字符

注意：`^`第一个和分组位置之外是否按字面解释是正则表达式引擎特定的。我对LUA不够熟悉，无法说明它的作用

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-04T20:12:27.757

Lua 没有传统的正则表达式语言，它有 Lua 模式。虽然它们看起来很像正则表达式，但 Lua 模式是一种独特的语言，它有一套更简单的规则，最重要的是缺乏分组和交替特性。

解释为 Lua 模式，该示例将使长期使用正则表达式的用户感到惊讶，因为许多细节都不同。

Lua 模式[在](http://www.lua.org/pil/20.2.html)[PiL中进行了](http://www.lua.org/pil/20.3.html)[描述](http://www.lua.org/pil/20.1.html) ，乍一看，它与传统的正则表达式非常相似，足以引起混淆。最大的区别可能是缺少交替运算符，括号仅用于标记捕获，量词（、、、和）仅适用于字符或字符类，而不是转义字符。这个例子可能没有考虑到 Lua 编写的一个重要线索是缺少应用于模式字符串中的任何（或理想情况下，所有）非字母数字字符的 Lua 模式引用字符，并且可疑使用哪些气味像传统的正则表达式来匹配单个文字。 `|``?``-``+``*``%``\``%``\?``?`

对所问问题的简单回答是：`(^?)*`不是推荐的形式，并且会匹配`^*`or `*`，捕获插入符号的存在或不存在。如果那是预期的效果，那么我会写它`(%^?)%*`以使其更清楚。

要了解为什么会出现这种情况，让我们以给出的模式并将其作为 Lua 模式进行分析。整个模式是：

```
^(^?)*\?(.*)$ 
```

交给`string.match()`，它会被解释为：

`^`将匹配锚定到字符串的开头。

`(`标志着第一次捕获的开始。

`^`不在模式或字符类的开头，因此它匹配文字`^`字符。为了清楚起见，可能应该写成`%^`.

`?`完全匹配前一个字符的零个或一个。

`)`标志着第一次捕获的结束。

`*`不是在可以量化的东西之后，因此它与文字`*`字符匹配。为了清楚起见，可能应该写成`%*`.

`\`在模式匹配自身时，它不是模式语言中的转义字符。但是，它*是*Lua 短字符串文字中的转义字符，使得后面的字符对于字符串文字解析器来说不是特殊的，在这种情况下它是没有实际意义的，因为后面的`?`在任何情况下都不是特殊的。因此，如果模式用双引号或单引号括起来，那么`\`将被字符串解析所吸收。如果写成长字符串（如`[[^(^?)*\?(.*)$]]`，反斜杠将在字符串解析器中保留下来，以出现在模式中。

`?`完全匹配前一个字符的零个或一个。

`(`标志着第二次捕获的开始。

`.`完全匹配任何字符，实际上是类的同义词`[\000-\255]`（请记住，在 Lua 中，数字转义是十进制而不是 C 中的八进制）。

`*`贪婪地匹配零个或多个前一个字符。

`)`标志着第二次捕获的结束。

`$`将模式锚定到字符串的末尾。

因此，它匹配并捕获`^`字符串开头的可选项，然后是`*`，然后`\`是未捕获的可选项，并捕获字符串的整个其余部分。`string.match`将返回两个字符串成功（其中一个或两个都可能是零长度），或`nil`失败。

**编辑：我已经修正了一些错别字，并纠正了我的答案中的一个错误，** [Egor](/users/6834680/egor-skriptunoff)在评论中注意到了这一点。我忘记了在模式中，特殊符号在无法应用的地方失去了它们的特殊性。这使得第一个星号匹配文字星号而不是错误。大部分答案都是级联的。

请注意，如果您真的想要在 Lua 中使用真正的正则表达式，可以使用一些库来提供它。也就是说，内置的模式语言非常强大。如果这还不够，那么您最好采用完整的解析器，并使用[LPeg](http://www.inf.puc-rio.br/~roberto/lpeg/)，它可以完成正则表达式所能做的一切，甚至更多。它甚至附带一个模块，该模块提供完整的正则表达式语法，该语法被翻译成 LPeg 语法以供执行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-04T16:19:52.473

在这种情况下，(^?) 指的是前面的字符串“^”，意思是 Jared 所说的文字字符 ^。查看 regexlib 以进行进一步的解密。

满足您的所有正则表达式需求：[http ://regexlib.com/CheatSheet.aspx](http://regexlib.com/CheatSheet.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-04T16:25:30.490

在我看来，表达式创建者的意图是匹配问号前的任意数量的 ^，但只想*捕获*^ 的第一个实例。但是，正如其他人所说，它可能不是一个有效的表达式，具体取决于引擎。

# c# - 拖放在 GridView 上不起作用

> ID：15205995
> 
> 赞同：1
> 
> 时间：2013-03-04T16:15:52.120
> 
> 标签：c#, windows-runtime, windows-store-apps

我正在尝试在我的代码中实现类似的功能：http: [//www.codeproject.com/Articles/536519/Extending-GridView-with-Drag-and-Drop-for-Grouping](http://www.codeproject.com/Articles/536519/Extending-GridView-with-Drag-and-Drop-for-Grouping)

我继续将该项目中的相关文件（Customized.xaml、Customized.xaml.cs、Grouped.xaml、Grouped.xaml.cs 和 GridViewEx.cs）复制到我的项目中。我已经重命名了编译所需的项目，但是我遇到了 GridView 不滚动的问题，并且项目的重新排序在触摸屏上不起作用。（奇怪的是，我仍然可以用鼠标移动项目，但是 Drop 没有一致地注册）。似乎存在某种布局问题，或者必须有原因滚动根本不起作用，拖放只能使用鼠标，而拖放功能大约有 50% 的时间使用鼠标。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T18:42:30.520

我不知道您现在是否已经解决了您的问题，但我最终弄清楚了为什么我会遇到这个问题。事实证明，您不仅必须导入 GridViewEx.cs 和相关的 Grouped.xaml 和 Grouped.xaml.cs，还必须导入“generic.xaml”中的内容。

```
<Style TargetType="local:GridViewEx">
    <Setter Property="Padding" Value="0,0,0,10" />
    <Setter Property="IsTabStop" Value="False" />
    <Setter Property="TabNavigation" Value="Once" />
    <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Auto"/>
    <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Disabled"/>
    <Setter Property="ScrollViewer.HorizontalScrollMode" Value="Enabled" />
    <Setter Property="ScrollViewer.IsHorizontalRailEnabled" Value="False" />
    <Setter Property="ScrollViewer.VerticalScrollMode" Value="Disabled" />
    <Setter Property="ScrollViewer.IsVerticalRailEnabled" Value="False" />
    <Setter Property="ScrollViewer.ZoomMode" Value="Disabled" />
    <Setter Property="ScrollViewer.IsDeferredScrollingEnabled" Value="False" />
    <Setter Property="ScrollViewer.BringIntoViewOnFocusChange" Value="True" />
    <Setter Property="IsSwipeEnabled" Value="True" />
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="local:GridViewEx">
                <Border BorderBrush="{TemplateBinding BorderBrush}"
                        Background="{TemplateBinding Background}"
                        BorderThickness="{TemplateBinding BorderThickness}">
                    <ScrollViewer x:Name="ScrollViewer"
                                        TabNavigation="{TemplateBinding TabNavigation}"
                                        HorizontalScrollMode="{TemplateBinding ScrollViewer.HorizontalScrollMode}"
                                        HorizontalScrollBarVisibility="{TemplateBinding ScrollViewer.HorizontalScrollBarVisibility}"
                                        IsHorizontalScrollChainingEnabled="{TemplateBinding ScrollViewer.IsHorizontalScrollChainingEnabled}"
                                        VerticalScrollMode="{TemplateBinding ScrollViewer.VerticalScrollMode}"
                                        VerticalScrollBarVisibility="{TemplateBinding ScrollViewer.VerticalScrollBarVisibility}"
                                        IsVerticalScrollChainingEnabled="{TemplateBinding ScrollViewer.IsVerticalScrollChainingEnabled}"
                                        IsHorizontalRailEnabled="{TemplateBinding ScrollViewer.IsHorizontalRailEnabled}"
                                        IsVerticalRailEnabled="{TemplateBinding ScrollViewer.IsVerticalRailEnabled}"
                                        ZoomMode="{TemplateBinding ScrollViewer.ZoomMode}"
                                        IsDeferredScrollingEnabled="{TemplateBinding ScrollViewer.IsDeferredScrollingEnabled}"
                                        BringIntoViewOnFocusChange="{TemplateBinding ScrollViewer.BringIntoViewOnFocusChange}">
                        <StackPanel Orientation="Horizontal">
                            <Border Width="60" x:Name="NewGroupPlaceHolderFirst" 
                                    Background="Transparent" Padding="{TemplateBinding Padding}" 
                                    Visibility="{Binding AllowNewGroup, Converter={StaticResource VisibilityConverter}, RelativeSource={RelativeSource TemplatedParent}}"/>
                            <ItemsPresenter 
                                Header="{TemplateBinding Header}" 
                                HeaderTemplate="{TemplateBinding HeaderTemplate}"
                                HeaderTransitions="{TemplateBinding HeaderTransitions}"
                                Padding="{TemplateBinding Padding}"/>
                            <Border Width="60" x:Name="NewGroupPlaceHolderLast" 
                                    Background="Transparent" Padding="{TemplateBinding Padding}" 
                                    Visibility="{Binding AllowNewGroup, Converter={StaticResource VisibilityConverter}, RelativeSource={RelativeSource TemplatedParent}}"/>
                        </StackPanel>
                    </ScrollViewer>
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

在我将此样式链接到我的 Grouped.xaml 后，它按预期工作。希望这可以帮助。