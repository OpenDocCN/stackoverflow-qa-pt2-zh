# StackOverflow 问答 15717000-15717999

# php - 使用 $.post 方法返回函数（数据）值到变量

> ID：15717000
> 
> 赞同：0
> 
> 时间：2013-03-30T09:30:55.883
> 
> 标签：php, javascript, jquery

**亲爱的编码员！**

我的代码的目的：

获取特定文件夹中列出的文件的 URL，然后将它们分配给 javascript 中的数组。

我的想象：JavaScript 函数`test.php`使用`$.post()`方法将值发送到`getURL.php`文件。在此之后，`getURL.php`使用此值获取特定文件夹中的特定文件 URL。我在`$.post()`方法`function(data)`参数中得到结果。在此之后，“数据”的结果值在 JavaScript 中是（/将被使用）。

问题：在`$.post()`方法函数内部：`function(data,status) I'm satisfied with the result of the returned value of the data parameter; the PROBLEM is that I can't assign it's value outside this function:`函数（数据，状态）`。

测试.php

```
<script src="jquery-1.9.1.js">
</script>
<script type="text/javascript">
    var imgPath; // <--He is who should get the value of "data"
    function getTargetUrl(szolg){
        $.post(
            "getURL.php",
            { x: szolg },
            function(data,status){
                alert("in function: " + data + " status: " + status);
                imgPath=data;
                alert (imgPath);
            }
        );
    }
    $(document).ready(function() {
        var a="szolg5"; //it will be "user defined", used in getURL.php
        getTargetUrl(a);
        alert(imgPath);
    });
</script> 
```

获取URL.php

```
<?php 
if(isset($_POST["x"])){
    $queryGlob='img/'.$_POST["x"].'/batch/*.jpg';
    foreach (glob($queryGlob) as $filename) {
        $imgFiles=json_encode($filename);
        $imgFiles=str_replace('\/','/',$imgFiles);
        echo $imgFiles;
    }
    //$data = str_replace('\\/', '/', json_encode(glob('img/'.$_POST["x"].'/batch/*.jpg')));
}
else{
    $imgFiles="FAIL";
    echo $imgFiles;
}
?> 
```

注意：为了测试我使用的是谷歌浏览器。

所以这就是我的猜测，希望有人能给我一个解决方案和可能的解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T09:34:30.453

该`post`调用是**异步**的，因此在您的代码中：

```
$(document).ready(function() {
    var a="szolg5"; //it will be "user defined", used in getURL.php
    getTargetUrl(a);
    alert(imgPath);
}); 
```

...在调用完成**之前**`alert`发生，因此显示. 您要做的是将一个函数传递给它将在完成时调用的函数，并将后续代码放在那里。**`post``imgPath``getTargetUrl``post`**

 **像这样的东西：

```
var imgPath; // <--He is who should get the value of "data"
function getTargetUrl(szolg, callback){
    $.post(
        "getURL.php",
        { x: szolg },
        function(data,status){
            alert("in function: " + data + " status: " + status);
            imgPath=data;
            callback();
        }
    );
}
$(document).ready(function() {
    var a="szolg5"; //it will be "user defined", used in getURL.php
    getTargetUrl(a, function() {
        alert(imgPath);
    });
}); 
```

您可以通过执行`post`操作并将数据作为参数传回来完全取消全局变量：

```
function getTargetUrl(szolg, callback){
    $.post(
        "getURL.php",
        { x: szolg },
        function(data,status){
            alert("in function: " + data + " status: " + status);
            callback(data);
        }
    );
}
$(document).ready(function() {
    var a="szolg5"; //it will be "user defined", used in getURL.php
    getTargetUrl(a, function(path) {
        alert(path);
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T09:35:41.360

No, AJAX is asynchronous meaning that the `$.post` method will return immediately. If you want to use the results of an AJAX call, the only safe place to do so is inside the success callback. Do not attempt to assign the result to global variables.

So you should put the alert **inside** the success callback.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T09:53:15.340

As explained by others the reason for this behavior is the asynchronous nature of ajax requests.

My solution will to return the ajax promise request from `getTargetUrl` and use it to register callback methods

```
function getTargetUrl(szolg){
    return $.post(
        "getURL.php",
        { x: szolg },
        function(data,status){
            alert("in function: " + data + " status: " + status);
            alert (data);
        }
    );
}
$(document).ready(function() {
    var a="szolg5"; //it will be "user defined", used in getURL.php
    getTargetUrl(a).done(function(data){
        alert('from callback' + data);
    });
}); 
```**

# java - 在Android中切换状态播放，暂停，停止

> ID：15717003
> 
> 赞同：1
> 
> 时间：2013-03-30T09:31:22.277
> 
> 标签：java, android, media-player

我正在创建一个带有两个按钮开始/暂停和停止按钮的媒体播放器，当我第一次开始播放时它工作正常。但是，当我尝试在一次停止后开始时，我需要单击启动/启动按钮两次。

我不明白这种行为。

以下是我的点击代码：

```
public void click(View view){
    int id = view.getId();

    try {
        mPlayer.setDataSource(PATH);
        mPlayer.prepare();
    } catch (IllegalStateException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    switch(id){
    case R.id.btnPlay:
        synchronized(this){

            if(!isStarted){
                btnPlay.setBackgroundResource(R.drawable.pause);
                isStarted=true;
                mPlayer.start();
                System.out.println("Play");

            } else{
                System.out.println("Pause");
                isStarted = false;
                btnPlay.setBackgroundResource(R.drawable.play);
                mPlayer.pause();
        }
    }
        return;
    case R.id.btnStop :
    synchronized(this){

        if(mPlayer!=null){
            System.out.println("Stop");
            mPlayer.stop();
            isStarted = false;
            btnPlay.setBackgroundResource(R.drawable.play);
        } 
} 
```

这是我的布局 xml 文件：

```
 <View
        android:layout_width="0dip"
        android:layout_height="0dip"
        android:layout_weight="1" />
    <Button
        android:id="@+id/btnStop"
        android:layout_width="0dip"
        android:layout_height="fill_parent"
        android:layout_margin="5dp"
        android:layout_weight="1"
        android:background="@drawable/stop"
        android:onClick="click" />

    <Button
        android:id="@+id/btnPlay"
        android:layout_width="0dip"
        android:layout_height="fill_parent"
        android:layout_margin="5dp"
        android:layout_weight="1"
        android:background="@drawable/play"
        android:onClick="click" />

    <View
        android:layout_width="0dip"
        android:layout_height="0dip"
        android:layout_weight="1" />

    <View
        android:layout_width="0dip"
        android:layout_height="0dip"
        android:layout_weight="1" />

</LinearLayout> 
```

请让我知道你的建议。

谢谢

阿曼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T09:55:56.697

Not sure if directly adressing your issue, but shouldn't you add a `break;` at the end of each switch case? Would like to put that in a comment but I don't have enough rep yet, sorry.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T10:41:37.250

我发现的问题是`mplayer.stop();` 我只是将 stop 替换为 pause 及其工作，我在你的代码中编辑得很少，看看：

*在 onCreate 内：*

```
 mPlayer = new MediaPlayer();
        mPlayer = MediaPlayer.create(ThirdActivity.this,R.raw.test);
        mPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
        mPlayer.setLooping(true); 
```

*onClick 事件*

```
@Override
    public void onClick(View v) {
        switch (v.getId()) {

        case R.id.button1:
            Log.d("^^^^^^", "flag=" + isStarted);
            Log.d("^^^^^^", "clicked");
            synchronized (this) {

                if (!isStarted) {
                    add.setBackgroundResource(R.drawable.button);
                    isStarted = true;
                    mPlayer.start();
                    System.out.println("Play");

                } else {
                    System.out.println("Pause");
                    isStarted = false;
                    add.setBackgroundResource(R.drawable.button);
                    mPlayer.pause();
                }
            }

            break;

        case R.id.button2:
            synchronized (this) {
                if (mPlayer.isPlaying()) {
                    System.out.println("Stop");
                    mPlayer.pause();
                    isStarted = false;
                    add.setBackgroundResource(R.drawable.button);
                }
            }
            break;

        default:
            break;
        }

    } 
```

甚至检查下面的链接。

[MediaPlayer：Stackoverflow 问题](https://stackoverflow.com/a/12520154/646806)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T11:34:34.110

应该`mPlayer.setDataSource(PATH);`只在`Idle`状态调用，在其他状态调用返回错误。And 应该`mPlayer.prepare();`只调用`Initialized`和`Stopped`状态。

我认为从 android 开发人员那里阅读此链接以使用媒体播放器会对您有所帮助。 [- - - 媒体播放器 - - -](http://developer.android.com/reference/android/media/MediaPlayer.html)

在您的情况下，您应该在调用 mPlayer.prepare(); 之前检查媒体播放器是否停止。并删除 mPlayer.setDataSource(PATH); 从`onClick()`.

希望这对您有所帮助。

# ios - Static cell with TextField - connect class property to viewcontroller

> ID：15717004
> 
> 赞同：0
> 
> 时间：2013-03-30T09:31:49.713
> 
> 标签：ios, objective-c, storyboard

I want to be able to have a TextField in my static cells so I'm using the `StringInputTableViewCell` class from this demo: [https://github.com/wannabegeek/PickerTableViewCell/tree/master/PickerCellDemo](https://github.com/wannabegeek/PickerTableViewCell/tree/master/PickerCellDemo)

I'm using storyboards and in my storyboard I got 2 cells that use the StringInputTableViewCell class. As you can see there is a `UITextField` property

```
@property (nonatomic, strong) UITextField *textField; 
```

in `StringInputTableViewCell.h`. On storyboards in `MyViewController` I can connect the label, etc with a property but I cannot connect the TextField since its added in code and the TextField isn't on my storyboard. So my question is how do I get that property in `MyViewController` class?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T09:40:20.530

You can make your "`StringInputTableViewCell`" a property within your "`MyViewController`", or if you're trying to populate it during "`cellForRowAtIndexPath`", you can get get access to it through an identifier or a tag.

Once you have a pointer to the "`StringInputTableViewCell`" object that's being displayed in your table, you can then access the "`textField`" property of it in your code directly.

Something like:

```
StringInputTableViewCell * stringInputCell = (StringInputTableViewCell *) cell;
if(stringInputCell)
{
    stringInputCell.textField.text = @"Surprise, I can put text in here!";
} 
```

# string - 将 400 万行数据相互匹配并按相似度对结果进行排序的最佳方法？

> ID：15717011
> 
> 赞同：3
> 
> 时间：2013-03-30T09:32:18.120
> 
> 标签：string, algorithm, comparison, similarity

我们使用 libpuzzle ( [http://www.pureftpd.org/project/libpuzzle/doc](http://www.pureftpd.org/project/libpuzzle/doc) ) 来比较 400 万张图像的相似性。

它工作得很好。

但不是使用 libpuzzle 函数进行图像与图像比较，还有另一种比较图像的方法。

**这是一些快速背景：**

Libpuzzle 为任何给定图像创建一个相当小的（544 字节）散列。这个散列又可以用来与使用 libpuzzles 函数的其他散列进行比较。有一些 API……PHP、C 等等……我们正在使用 PHP API。

比较图像的另一种方法是从给定的哈希创建向量，这是来自文档的粘贴：

> 将向量切割成固定长度的单词。例如，让我们考虑以下向量：
> 
> [ abcdefghijklmnopqrstu vwxyz ]
> 
> 词长（K）为10，可以得到以下词：
> 
> [ abcdefghij ] 在位置 0 找到 [ bcdefghijk ] 在位置 1 找到 [ cdefghijkl ] 在位置 2 找到，依此类推，直到位置 N-1
> 
> 然后，使用（单词+位置）的复合索引索引您的向量。
> 
> 即使有数百万张图像，K = 10 和 N = 100 也应该足以让很少的条目共享相同的索引。

所以，我们有矢量方法工作。它实际上比图像与图像比较好一点，因为当我们进行图像与图像比较时，我们使用其他数据来减少我们的样本量。它有点无关紧要，并且特定于应用程序我们使用什么其他数据来减少样本量，但是使用向量方法......我们不必这样做，我们可以对 400 万个哈希中的每一个进行真正的测试.

**我们遇到的问题如下：**

有 400 万张图像，每张图像有 100 个向量，这变成了 4 亿行。我们发现 MySQL 在大约 60000 张图像（60000 x 100 = 600 万行）之后往往会阻塞。

**我们使用的查询如下：**

```
SELECT isw.itemid, COUNT(isw.word) as strength
FROM vectors isw
JOIN vectors isw_search ON isw.word = isw_search.word
WHERE isw_search.itemid = {ITEM ID TO COMPARE AGAINST ALL OTHER ENTRIES}
GROUP BY isw.itemid; 
```

如前所述，即使有适当的索引，当涉及到 4 亿行时，上面的速度也相当慢。

那么，任何人都可以建议任何其他技术/算法来测试这些相似性吗？

我们愿意试一试。

**一些值得一提的事情：**

1.  哈希是二进制的。
2.  哈希总是相同的长度，544 字节。

**我们能想到的最好的是：**

1.  将图像哈希从二进制转换为 ascii。
2.  创建向量。
3.  如下创建一个字符串：VECTOR1 VECTOR2 VECTOR3 等。
4.  使用狮身人面像搜索。

我们还没有尝试上述方法，但这可能会比执行 mysql 查询产生更好的结果。

有任何想法吗？如前所述，我们愿意安装任何新服务（postgresql？hadoop？）。

最后一点，这个向量+比较方法的工作原理可以在问题[Libpuzzle索引数百万张图片中找到？](https://stackoverflow.com/questions/9703762/libpuzzle-indexing-millions-of-pictures). 我们本质上是使用 Jason 提供的精确方法（目前是最后一个答案，获得了 200+ 分）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T15:03:36.747

我选择“回答我自己的”问题，因为我们找到了一个非常有效的解决方案。

在最初的问题中，我提到我们正在考虑通过 sphinx 搜索来做到这一点。

好吧，我们继续做了，结果比通过 mysql 做的要好得多。

所以，本质上这个过程是这样的：

a) 从图像生成哈希。

b) 将此哈希“向量化”为 100 个部分。

c) binhex（二进制到十六进制）这些向量中的每一个，因为它们是二进制格式。

d）像这样存储在狮身人面像搜索中：

项目编号 | 0_vector0 1_vector1 2_vec...等

e) 使用 sphinx 搜索进行搜索。

最初……一旦我们有了这个包含 400 万条记录的 sphinxbase，每次搜索仍然需要大约 1 秒。

然后，我们在 8 个内核上为这个 sphinxbase 启用了分布式索引，现在每秒将查询大约 10 次以上的搜索。这对我们来说已经足够了。

最后一步是在我们拥有的多台服务器上进一步分发这个 sphinxbase，进一步利用我们可用的未使用的 cpu 周期。

但就目前而言，已经足够好了。我们每天添加大约 1000-2000 个“项目”，因此通过“只是新的”搜索会很快发生......在我们进行初始扫描之后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T13:58:58.440

不要在数据库中这样做，只需使用一个简单的文件。下面我展示了一个文件，其中包含两个向量`[abcdefghijklmnopqrst]`（图 1）和`[xxcdefghijklxxxxxxxx]`（图 2）中的一些单词

```
 <index>       <image>
0abcdefghij      1
1bcdefghijk      1
2cdefghijkl      1
3defghijklm      1
4efghijklmn      1
...
...
0xxcdefghij      2
1xcdefghijk      2
2cdefghijkl      2
3defghijklx      2
4efghijklxx      2
... 
```

现在对文件进行排序：

```
 <index>       <image>
0abcdefghij      1
0xxcdefghij      2
1bcdefghijk      1
1xcdefghijk      2
2cdefghijkl      1       
2cdefghijkl      2       <= the index is repeated, those we have a match
3defghijklm      1
3defghijklx      2
4efghijklmn      1
4efghijklxx      2 
```

对文件进行排序后，很容易找到具有相同索引的记录。编写一个小程序或可以在排序列表中运行并找到重复项的东西。

# events - event PageIndexChanging wasn't handled

> ID：15717013
> 
> 赞同：-2
> 
> 时间：2013-03-30T09:32:42.557
> 
> 标签：events, gridview, page-index-changed

I'm getting "The GridView 'grdFiles' fired event PageIndexChanging which wasn't handled." even if I've added the event handler:

```
protected void grdFiles_PageIndexChanging(object sender, GridViewPageEventArgs e)
    {
        GetFiles();
        grdFiles.PageIndex = e.NewPageIndex;
        grdFiles.DataBind();

    } 
```

Any ideas?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T09:50:25.527

Try this code. You need to declare a method on your code behind that handles the PageIndexChanging event.

```
protected void grdFiles_PageIndexChanging (object sender, GridViewPageEventArgs  e)
{
grdFiles.PageIndex = e.NewPageIndex;
bindGridView()
} 
```

the method bindGridView() is

```
private void bindGridView()
{
 grdFiles.DataSource=.....;
 grdFiles.DataBind();
} 
```

# android - 在后台继续上传

> ID：15717021
> 
> 赞同：1
> 
> 时间：2013-03-30T09:33:04.013
> 
> 标签：android, upload, android-webview, android-notifications

使用返回或主屏幕按钮关闭应用程序时，显示 web 视图的应用程序将关闭。返回应用程序后，它会重新加载页面。

更具体地说，此应用加载的页面包含一个上传按钮。文件上传需要一些时间，具体取决于互联网速度。如果用户开始上传并转到其他应用程序，则上传进度将丢失，并且在重新访问该应用程序时，页面将重新加载。

如何使 VebView 中的上传在后台工作。在通知区域提供“正在上传...”的通知将是一个额外的好处。建议做什么和怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T09:36:56.557

您应该在 a 中进行上传`Service`，而不是在 a 中`Activity`。（例如查找`IntentService`，上传后会自行关闭）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T11:17:06.590

![在此处输入图像描述](../Images/899b1e1b314364b9132f3a9ccfd96516.png)

这是根据您的需要编辑的服务示例代码：我创建了一项服务并使用以下方法从我的活动中调用它：

```
startService(new Intent(MainActivity.this, TempServices.class)); 
```

这是我的服务班

```
package com.example.uploadfile;

import android.app.NotificationManager;
import android.app.Service;
import android.content.Context;
import android.content.Intent;
import android.os.IBinder;
import android.support.v4.app.NotificationCompat;
import android.support.v4.app.NotificationCompat.Builder;
import android.util.Log;

public class TempServices extends Service {

    protected static final int ID = 100;
    private NotificationManager mNotifyManager;
    private Builder mBuilder;

    @Override
    public IBinder onBind(Intent intent) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        // TODO Auto-generated method stub

        mNotifyManager = (NotificationManager) getApplicationContext()
                .getSystemService(Context.NOTIFICATION_SERVICE);
        mBuilder = new NotificationCompat.Builder(this);
        mBuilder.setContentTitle("Picture Download")
                .setContentText("Download in progress")
                .setSmallIcon(R.drawable.ic_launcher);
        // Start a lengthy operation in a background thread
        new Thread(new Runnable() {
            @Override
            public void run() {
                int incr;
                // Do the "lengthy" operation 20 times
                for (incr = 0; incr <= 100; incr += 5) {
                    // Sets the progress indicator to a max value, the
                    // current completion percentage, and "determinate"
                    // state
                    mBuilder.setProgress(100, incr, false);
                    // Displays the progress bar for the first time.
                    mNotifyManager.notify(0, mBuilder.build());
                    // Sleeps the thread, simulating an operation
                    // that takes time
                    try {
                        // Sleep for 5 seconds
                        Thread.sleep(5 * 1000);
                    } catch (InterruptedException e) {
                        Log.e("error-->", "sleep failure");
                    }
                }
                // When the loop is finished, updates the notification
                mBuilder.setContentText("Download complete")
                // Removes the progress bar
                        .setProgress(0, 0, false);
                mNotifyManager.notify(ID, mBuilder.build());
            }
        }
        // Starts the thread by calling the run() method in its Runnable
        ).start();
        return super.onStartCommand(intent, flags, startId);
    }

} 
```

计算**进度**检查[这个](https://stackoverflow.com/a/3028660/1168654)链接

不要伪造在 android 清单中添加此服务：

```
<service android:name="TempServices" > 
```

# ajax - Ajax 选项卡控件包装

> ID：15717025
> 
> 赞同：0
> 
> 时间：2013-03-30T09:33:36.200
> 
> 标签：ajax, tabs

我在一个宽度为 1000 像素的页面中有 Ajax 选项卡控件，该选项卡控件包含 19 个选项卡。选项卡会覆盖指定的页面大小。如何使标签换行或具有下一个上一个按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T09:36:38.870

以下样式使选项卡换行到新行

```
 <style type="text/css">

.ajax__tab_default .ajax__tab_header /* this makes the tabs wrap*/ 
{ 
white-space: normal!important; 
} 
</style> 
```

# cakephp - 适用于 xlsx 的 CakePHP 默认布局

> ID：15717028
> 
> 赞同：1
> 
> 时间：2013-03-30T09:33:55.853
> 
> 标签：cakephp

我有一个方法可以将 riport 数据导出到我的 CakePHP 2 项目中的 xlsx 文件中。它运作良好。同时，它似乎只是忽略了我放入 View/Layouts/xlsx/default.ctp 的任何内容

在我的 routes.php 中我有

```
Router::parseExtensions('json', 'xlsx'); 
```

在我的控制器中，我有

```
public $components = array('RequestHandler'); 
```

我的 View/Riports/xlsx/export.ctp 被渲染，但 View/Layouts/xlsx/default.ctp 被忽略。

我想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T11:10:26.383

我认为你在这里不走运。从文档中；

*数据视图类不支持布局。他们假设视图文件将输出序列化的内容。*

[http://book.cakephp.org/2.0/en/views/json-and-xml-views.html#using-a-data-view-with-view-files](http://book.cakephp.org/2.0/en/views/json-and-xml-views.html#using-a-data-view-with-view-files)

但我当然可能是错的:)

# android - 语音识别在android中出现未知问题

> ID：15717029
> 
> 赞同：0
> 
> 时间：2013-03-30T09:34:08.453
> 
> 标签：android, speech-recognition, speech-to-text

我正在尝试制作一个应用程序，当使用 android tts 来电时，它会说出呼叫者的联系人姓名（你想参加吗？）。根据用户的回复，呼叫应该参加或结束。我总是在这里遇到语音识别问题（显示未知问题），我在这里给出我的代码，任何人都可以帮助我解决这个问题。从最近几天开始我就对此感到震惊，任何帮助都会很明显..

```
 public class myPhoneStateChangeListener extends PhoneStateListener
{
    speechcontact clsspcntct = new speechcontact();
    @Override
    public void onCallStateChanged(int state, String incomingNumber) {
        super.onCallStateChanged(state, incomingNumber);
        if (state == TelephonyManager.CALL_STATE_RINGING)
        {
            String phoneNumber =   incomingNumber;
            String ContactName = objUtility.getContactName2(context,phoneNumber);
                mAudioManager.getStreamVolume(AudioManager.STREAM_RING);
                mAudioManager.setStreamMute(AudioManager.STREAM_RING, true);
                speakWords(ContactName);
        }

        if(state == TelephonyManager.CALL_STATE_IDLE && ph_state==1)
        {
            mAudioManager.setStreamMute(AudioManager.STREAM_RING, false);
        }

    }
    @Override
public void onInit(int initStatus)
{
    if (initStatus == TextToSpeech.SUCCESS) {
             if(myTTS.isLanguageAvailable(Locale.ENGLISH)==TextToSpeech.LANG_AVAILABLE)
            myTTS.setLanguage(Locale.ENGLISH);
    }
    else if (initStatus == TextToSpeech.ERROR) {
        Log.d("speech log", "Sorry! Text To Speech failed...");
    }   
}

   public void speakWords(String speech)
  {
      myTTS.speak("you have call from"+speech+"do you want to    attend",TextToSpeech.QUEUE_FLUSH, null);

    new Timer().schedule(new TimerTask() {          
        @Override
        public void run()
        {
            startVoiceRecognitionActivity();     
        }
    }, 5000);

}

  public void startVoiceRecognitionActivity()
{
    Intent intent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
    intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL,RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);
    intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    intent.putExtra(RecognizerIntent.EXTRA_PROMPT, "Voice recognition Demo...");

    try 
    {
        startActivityForResult(intent, REQUEST_CODE);
    } 
    catch (ActivityNotFoundException a) 
    {
        Toast.makeText(getApplicationContext(),"Ops! Your device doesn't support Speech to Text",Toast.LENGTH_SHORT).show();
    }
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {

    if (requestCode == REQUEST_CODE && resultCode == RESULT_OK)
    {
        String spch = data.getStringExtra(RecognizerIntent.EXTRA_RESULTS);

        if (spch.contains("Yes"))    
         {
            // do smthing
         }
         else if(spch.contains("No"))
         {
            // do smething
         }
    }
    super.onActivityResult(requestCode, resultCode, data);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T16:05:26.917

I have an app that do what you want, it works fine on 2.3 to 4.0. On jelly Bean does not work. Google made changes and looks like Jelly Bean stop the voice recognition during the phone ringing.

So if you are testing on Jelly bean, try your code on another device.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T11:07:48.780

问题是您根据文档将[FLAG_ACTIVITY_NEW_TASK添加到您的意图中：](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_NEW_TASK)

> 当调用者从正在启动的活动中请求结果时，不能使用此标志。

并且您正在使用它`startActivityForResult`，删除

```
 intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK); 
```

从您的代码中解决了这个问题。

# php - 如何使我的服务器联机？

> ID：15717030
> 
> 赞同：-2
> 
> 时间：2013-03-30T09:34:16.470
> 
> 标签：php, mysql, apache, host

我不认为这是否可能，但我想将我的服务器暂时联机。问题是，我最近一直在家里的电脑上做一个 PHP 项目，我需要在他们的电脑上向我的跟随队友展示进度。不幸的是我不能去他们那里，但我希望我的网站可以。

我们还没有注册域名。它是一个安装的 APACHE v2.0 服务器，同时运行 PHP 5 和 MySQL。有什么办法我可以做到这一点。

我听说有些地方可以使用静态 IP 地址或类似的东西在 DNS 上转发端口。我正在使用华为数据卡调制解调器型号：E1550 使用 Internet 连接。不幸的是，我无法转发端口。

我可以暂时分享网站吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T21:30:00.340

为什么不在像 000webhost 这样真正好的免费主机服务上开设一个免费主机帐户，导出您的本地数据库，使用 ftp 将您的站点上传到远程主机，然后将您的数据库导出文件导入远程主机的 mysql 并共享链接到你的网站和你的朋友？我就是做这个的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T09:41:53.727

@MarkoD 说了什么，但在那之前 -

如果您有权访问路由器的固件，则从那里转发端口，而不是您的实际 PC。只需转发 Apache 正在侦听的端口，然后将 WAMP/XAMPP 置于联机状态。

一旦它上线，与你的队友分享你的 IP 和你选择的端口，他们应该能够连接。

该链接应类似于：`http://111.111.111.111:2222`。

例如，Cox Communications 不允许在端口 80 或 443 上传出数据，因此请使用 8080

`http://111.111.111.111:8080`

如果您的 ISP 有，那么只需使用 80 并删除`:xxxx`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T09:37:54.437

*   正确安装和设置 Apache
*   通过网关设置将端口 80（或其他，如果需要）转发到本地 IP
*   在 DynDns.org 或 no-ip.org 或类似网站上注册您的 IP。

[编辑：好吧，你说的是“暂时”，你可以将端口 80 转发到你的本地 IP，并对你的“ http://xxx.xxx.xxx.xxx/](http://xxx.xxx.xxx.xxx/) ”感到满意，但请注意，每当你重新启动路由器时它会改变，或重新建立连接。

# mysql - 这里有文本到数字的转换吗？

> ID：15717034
> 
> 赞同：1
> 
> 时间：2013-03-30T09:34:32.107
> 
> 标签：mysql, sql, select, types, decimal

我有一个表，其中有一列`amount`type `DEC`。
以下查询有效：
`SELECT * FROM mytable WHERE amount < '1';`

`SELECT * FROM mytable WHERE amount = '1.5';`

即即使我使用引号之类的`amount`字符值（尽管它们实际是数字），查询仍然有效。

我的问题是：
这是因为SQL Server“理解”数据类型实际上是数字并在执行sql时忽略引号`select`
还是
SQL Server首先将`amount`值转换为文本然后进行比较？所以这有一个性能转换导致的开销？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-30T09:54:00.873

Yes there is a numerical conversion happening, since the column 'amount' is defined as numerical. To test this, you can try:

```
SELECT * FROM mytable WHERE amount < '1a'; 
```

you will get the error message:

```
Msg 8114, Level 16, State 5, Line 1
Error converting data type varchar to numeric. 
```

meaning that varchar is being converted to numeric and not the other way round.

# ruby - 与“类实例方法”调用混淆

> ID：15717035
> 
> 赞同：0
> 
> 时间：2013-03-30T09:34:36.327
> 
> 标签：ruby

我正在尝试是否可以打电话`Class instance methods`。`instances of class`因此尝试了以下方法：

```
class Foo
    def show; p "hi" ; end
    def self.display ; p "hello" ; end
end
#=> nil

Foo.display
#"hello"
#=> "hello"

Foo.new.show
#"hi"
#=> "hi"

Foo.show
#NoMethodError: undefined method `show' for Foo:Class
#from (irb):7
#from C:/Ruby200/bin/irb:12:in `<main>' 
```

***但在下面的调用中，我预计与NoMethodError: undefined method `display'***相同的错误。但为什么不是这样呢？

```
Foo.new.display
#<Foo:0x538020> #=> nil
foo = Foo.new
#=> #<Foo:0x22bc438>
foo.display
#<Foo:0x22bc438> #=> nil 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T09:38:56.513

所有对象都有一个现有的方法[`display`](http://ruby-doc.org/core-2.0/Object.html#method-i-display)。

```
class Bar
end

Bar.new.methods.grep(/disp/) # => [:display]
Bar.methods.grep(/disp/) # => [:display] 
```

您的代码只是为`Foo`. 选择另一个名称（`display1`例如 ），您将看到预期的错误。

# javascript - 使用 Bootstrap 按钮复选框伪造复选框行为？

> ID：15717039
> 
> 赞同：1
> 
> 时间：2013-03-30T09:35:22.047
> 
> 标签：javascript, jquery, twitter-bootstrap, checkbox, jquery-events

我正在尝试使用 Bootstrap 的 data-toggle 属性来允许用户选择权限级别。

我[在 JSFiddle 上做了一个简单的演示](http://jsfiddle.net/28xsr/)，预期值为：

*   无：0
*   用户：1
*   管理员：2
*   用户 + 管理员 = 3

问题是计算值似乎比实际切换按钮落后一步。

我很确定这是一个非常简单的问题，但到目前为止，解决方案已经成功地避开了我。

* * *

显然，我需要在这里复制 JSFiddle 代码：

```
$(document).ready(function () {
    $('#privileges button').click(function () {
        var privileges = 0;

        //$(this).addClass('active');

        $('#privileges button').each(function () {
            if ($(this).hasClass('active')) {
                privileges += parseInt($(this).attr('value'));
            }
        });

        $('input[id="user[privileges]"]').val(privileges);
    });
}); 
```

和 HTML：

```
<label for="user[privileges]">Privileges</label>
<input id="user[privileges]" name="user[privileges]" type="text" value="0">
<div id="privileges" class="btn-group" data-toggle="buttons-checkbox" style="width: 100%;">
    <button type="button" class="btn" style="width: 50%;" value="1">User</button>
    <button type="button" class="btn" style="width: 50%;" value="2">Administrator</button>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T10:22:29.053

试试这个代码

```
$(document).ready(function () {
    $('#privileges button').click(function () {
        var privileges = 0;
        var alredySelected = $(this).hasClass('active');

        //$(this).addClass('active');

        $('#privileges button').each(function () {
            if ($(this).hasClass('active')) {
                privileges += parseInt($(this).attr('value'));
            }
        });
        if(alredySelected){
            privileges = parseInt(privileges) - parseInt($(this).val());
        } else {
            privileges = parseInt(privileges) + parseInt($(this).val());
        }

        $('input[id="user[privileges]"]').val( privileges);
    });

}); 
```

[http://jsfiddle.net/28xsr/1/](http://jsfiddle.net/28xsr/1/)

# linux - 如何在 unix 中使用 zip 命令？

> ID：15717044
> 
> 赞同：1
> 
> 时间：2013-03-30T09:35:59.067
> 
> 标签：linux, shell, command-line, zip

假设我有一个 zip 文件`Old.zip`，里面是`fileA`和`fileB`. 然后我使用: 解压缩它们`unzip Old.zip -d Old`，然后我将有一个名为 Old 的目录，其中包含 fileA 和 fileB。

现在 Old.zip 不见了，我想再次压缩它，但是如果我使用 : `zip -r New.zip Old`，`New.zip`则不同于`Old.zip`: 里面不是两个文件，而是一个目录！

```
Before:                 After:                        I want:
    Old.zip--+             New.zip--+                    New.zip--+
             +--fileA               +--Old--+                     +--fileA
             +--fileB                       +--fileA              +--fileB
                                            +--fileB 
```

有什么建议么？我应该如何正确使用 zip 命令来保持结构？我将`NOT`进入`Old`文件夹并使用`zip New.zip fileA fileB`并将其移动到父文件夹，因为我将在 shell 脚本中编写它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T09:46:55.590

尝试将`-j`（垃圾路径）选项传递给`zip`：

```
$ zip -rj New.zip Old 
```

这样，文件将在没有相对路径的情况下存储。

# sql-server-2008 - 查找表的哪些列被哪些表、存储过程、视图和函数引用

> ID：15717048
> 
> 赞同：1
> 
> 时间：2013-03-30T09:36:37.850
> 
> 标签：sql-server-2008

我正在研究由独立软件供应商开发的 C# 代码和 SQL 2008 数据库，并尝试优化代码。

有一张桌子的编号很高。列，其中许多可能显然不需要。我想知道该表的哪些列被其他表、存储过程、视图或函数引用，以便删除不需要的列。

我不是 SQL 2008 方面的专家；因此，如果有任何内置工具或查询，将不胜感激分步说明。

使用 View Dependencies，我只能找出哪些其他对象引用了该表，但它不知道该表的哪些列被其他对象引用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T11:45:11.913

选择表名，然后按 ALT+F1，它将为您提供引用到 SQL Server 中其他表和视图的列的详细信息。

此外，您可以使用以下查询进行关键字搜索。您需要在@Keyword 变量中写入所需的列名，然后下面的查询将为您提供使用该关键字的所有对象详细信息。这将对您有所帮助。

```
set nocount on 
declare @Keyword as varchar(200)
set @Keyword = 'Column name'

SELECT DISTINCT
    name, 
    CASE o.xtype 
        WHEN 'S' THEN 'System Stored Proc'
        WHEN 'F' THEN 'Foreign Key'
        WHEN 'U' THEN 'Table'
        WHEN 'V' THEN 'View'
        WHEN 'P' THEN 'Stored Proc'
        WHEN 'PK' THEN 'Primary Key'
        WHEN 'TR' THEN 'Trigger'
        WHEN 'UQ' THEN 'Unique Index'
        WHEN 'D' THEN 'Default'
        WHEN 'FN' THEN 'User Defined Function'
        ELSE 'Unknown'
    END, 
    text 
FROM
    sysobjects o left join syscomments c ON c.id = o.id
WHERE
    text LIKE '%' + @Keyword + '%' 
OR  name LIKE '%' + @Keyword + '%' 
```

# php - How do I reference a value in a nested array in PHP?

> ID：15717050
> 
> 赞同：-1
> 
> 时间：2013-03-30T09:36:44.577
> 
> 标签：php, sub-array

In PHP how to I return the value 1, 2 and 3 in the array bellow?

```
$tmpArray =
   array(
       array("one", array(1, 2, 3)),
       array("two", array(4, 5, 6)),
       array("three", array(7, 8, 9)
   )
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T09:39:41.977

```
$tmpArray[0][1] = array(1, 2, 3)
$tmpArray[0][1][0] = 1
$tmpArray[0][1][1] = 2
$tmpArray[0][1][2] = 3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T09:38:00.927

Try like this

```
foreach($tmpArray as $key => $value)
{
    foreach($value as $val)
       echo $val.'<br>';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T09:40:25.777

try this-

```
foreach($tmpArray as $key => $value)
{
  if(is_array($value)){
    foreach($value as $val)
      if(is_array($val){
        foreach($val as $v)
          echo $v."<br />";
      }
      else
        echo $val.'<br />';
  }
  else
      echo $value."<br />";
} 
```

# java - Java：Char 中的赋值

> ID：15717052
> 
> 赞同：0
> 
> 时间：2013-03-30T09:37:11.203
> 
> 标签：java, arrays, command, char

我有一个程序，我需要理解它，但我不理解它的两行。好的，所以有一维数组 - int [] 名称和两个字符 - char let1，let2。现在，有一个命令：

```
char let1 = names[i].charAt(names[i].length()-1);
char let2 = names[i+1].charAt(0); 
```

这意味着什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T09:39:30.323

`let1`被分配了的最后一个字符`names[i]`并且`let2`被分配了的第一个字符`names[i+1]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T09:39:39.847

```
char let1 = names[i].charAt(names[i].length()-1); 
```

这意味着找出数组的`string`at 索引`i`，并从中提取该字符串最后一个索引处的字符。然后将该字符值分配给变量。`String``names``String``char``let1`

```
char let2 = names[i+1].charAt(0); 
```

`i+1`这意味着从`String`数组名称中提取索引处的字符串，并从中`String`提取`character`第一个索引（`0`）。然后将该字符值分配给`char`变量`let2`。

# asp.net-mvc - MVC with WCF service design

> ID：15717053
> 
> 赞同：0
> 
> 时间：2013-03-30T09:37:13.500
> 
> 标签：asp.net-mvc, wcf

Being new to MVC, and WCF (somewhat), I'd like to ask a design question. I have an MVC application, with a simple screen. I need to call a WCF service, which returns a reply object type. To separate the WCF calls from my MVC app, I have created a `ServiceProxy` dll, which exposes a method called `RegisterWithService`, passing it an IP address.

So, MVC app, calls

```
ServiceProxy.RegisterWithService(xxx.xxx.xxx.xxx); 
```

The method then creates a `RegistrationRequest` object, and sends that to the WCF service. The reply (a `RegisterResponce` object) replies with an object.

My question is, is it OK to pass that object back to the MVC controller to deal with, or should I create some form of DTO... so that the `ServiceProxy` creates a new object type (maybe, `RegistrationDTO`, which has the same fields as the WCF reply object, and passes that back to the MVC app? That, I guess, makes the MVC non-reliant on the WCF objects... so a change in the service contract would only cause a change in the proxy class I created - leaving the MVC app segregated.

Does that seem like a good design?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T10:13:42.677

I think that 2 levels of objects are enough:

1.  Domain models (coming from your WCF service)
2.  View models (specific to the MVC application)

So you could use the service proxy interface that was generated for you when you imported the WCF service definition as repository layer. This interface will return your data contracts which will represent the domain models. The Controller will be responsible for calling various methods on this interface and mapping the domain models to view models that will be passed to the view.

For example:

```
public class HomeController: Controller
{
    private readonly IServiceProxy service;
    public HomeController(IServiceProxy service)
    {
        this.service = service;
    }

    public ActionResult Index(int id)
    {
        SomeDataContract domainModel = this.service.Get(id);
        MyViewModel model = Mapper.Map<SomeDataContract, MyViewModel>(domainModel);
        return View(model);
    }
} 
```

Of course if your application gets more complex you could introduce an additional abstraction layer and DTOs.

# algorithm - 午餐后安排犯罪案件

> ID：15717054
> 
> 赞同：-2
> 
> 时间：2013-03-30T09:37:16.093
> 
> 标签：algorithm

从事顾问预约系统工作。网上预订了许多临时约会，但没有指定访问时间，而是持续时间。然而，顾问将在周六和周日上午 9 点至下午 1 点和下午 2 点至下午 5 点访问客户

在线临时请求将指定原因和持续时间。我需要编写代码来安排这些请求，以便顾问可以登录并查看已安排的项目并将其发送给客户

> 问题是如果我发现任何超过午餐的请求持续时间，我需要在循环中忽略并检查下一个持续时间短的请求。我不确定我如何暂时跳过并处理下一次（中午计划之后）。

约翰离婚问题 60 分钟

Kumar 土地问题 100 分钟

与 Ram 讨论 60 分钟

犯罪案件`45min`

当地结算 15min

在下面的代码中，我需要跳过犯罪案件，因为它超过了午餐时间并安排了本地结算。**我仍然需要在午餐后安排犯罪案件。我怎么能做这个？**

```
 public class OnlineRequest
 {
    public string Reason { get; set; }
    public short Duration { get; set; }
    public DateTime StartTime { get; set; }
    public DateTime EndTime { get; set; }
 }

    public static string LUNCH_TIME = "1:00 P.M";
    public static string END_OF_DAY = "6:00 P.M";

   public static Dictionary<String, List<String>>
              GetSchedules(List<OnlineRequest> requests)
    {
        List<string> schedules = new List<string>();

        DateTime visitStartTime = DateTime.MinValue.Date.AddHours(9);

        int day = 1;
        List<String> eventTimeStr = new List<String>();
        Dictionary<String, List<String>> consultantData 
              = new Dictionary<String, List<String>>();
        //Here is the problem
        DateTime eventTime = visitStartTime;
        foreach (OnlineRequest req in requests)
        {
            req.StartTime = eventTime;
            string flag = getTimeDiff(req);
            if (flag.Equals(LUNCH_TIME))
            {
                eventTimeStr.Add(flag + ": LUNCH");
                eventTime = eventTime.AddMinutes(60);
            }
            else if (flag.Equals(END_OF_DAY))
            {
                eventTimeStr.Add(flag + ": GO HOME EOD");

                consultantData.Add(("Day_" + day), eventTimeStr);
                eventTimeStr = new List<String>();

                eventTime = visitStartTime;
                ++day;
            }
            else
            {
                eventTimeStr.Add(eventTime.ToString("h:mm tt") + ": " + req.Reason);
                eventTime = req.EndTime;
            }
        }
        consultantData.Add(("Day_" + day), eventTimeStr);
        return consultantData;
    }    

private static String getTimeDiff(OnlineRequest req)
    {

        DateTime startEventTime = req.StartTime;
        DateTime finishEventTime = req.StartTime.AddMinutes(req.Duration);

        DateTime visitEndTime = DateTime.MinValue.Date.AddHours(17);

        DateTime visitLunchStartTime = DateTime.MinValue.Date.AddHours(12);

        if (finishEventTime.CompareTo(visitLunchStartTime) == 0 && 
                 startEventTime.CompareTo(visitLunchStartTime) > 0)
        {
            return LUNCH_TIME;
        }
        else if (startEventTime.CompareTo(visitLunchStartTime) == 0 && 
                   finishEventTime.CompareTo(visitLunchStartTime) > 0)
        {
            return LUNCH_TIME;
        }
        else if (startEventTime.CompareTo(visitLunchStartTime) < 0 && 
               finishEventTime.CompareTo(visitLunchStartTime) > 0)
        {
            return LUNCH_TIME;
        }
        if (visitEndTime.CompareTo(finishEventTime) < 0)
        {
            return END_OF_DAY;
        }

        req.EndTime = finishEventTime;
        return "";
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T11:26:13.507

我会做这样的事情（非常糟糕的伪代码）：

```
morning = new Block(3*60, 9);
foreach (OnlineRequest req) {
    if (req.Duration < morning.getFreeTime()) {
        morning.add(req);
    }
}

afternoon = new Block(3*60, 13);
foreach (OnlineRequest req not in morning.requests) {
    if (req.Duration < afternoon.getFreeTime()) {
        afternoon.add(req);
    }
}

foreach (OnlineRequest req in morning.requests ) {
    print(morning.getStartTime(req))
}

foreach (OnlineRequest req in afternoon.requests ) {
    print(afternoon.getStartTime(req))
}

class Block {
    List requests;
    int blockSize; //minutes
    int blockStartTime;

    Block(int bS, int bst ) {
       blockSize = bs;
       blockStartTime = bst;
    }

    add(OnlineRequest req) {
        requests.add(req);
    }

    getFreeTime() {
        sum = 0;
        foreach (OnlineRequest req in requests) {
            sum += req.Duration;
        }
        return blockSize - sum;
    }

    getStartTime(OnlineRequest or) {
        sum = 0;
        foreach (OnlineRequest req in requests) {
            if ( req = or ) {
                return sum + blockStartTime;
            }
            sum += req.Duration;
        }
        return null;
    }

} 
```

# php - 在 jquery 脚本中获取页面加载的 ID

> ID：15717063
> 
> 赞同：0
> 
> 时间：2013-03-30T09:38:13.353
> 
> 标签：php, javascript, jquery

我有一个 PHP while 循环，我在其中动态生成#id。

例子 ：

```
<?php 
$i=1;
while ($row = mysqli_fetch_array($result)): 
?>

<tr>
<td class='hashtag' id='status<?php echo $i; ?>'>status value</td>
</tr>

<?php 
$i++;
endwhile: 
?> 
```

状态 ID 生成如下：status1、status2、status3 等...

我希望我的 JS 代码中的所有这些 Id 在加载时将其显示到模式对话框中。

例子 ：

```
<script type="text/javascript">

$(document).ready(function(){

$("#status1");
$("#status2");
$("#status3");
.
.
and so on as per the php while loop.

});
</script> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T09:43:18.650

您可以使用“ [Starts With](http://api.jquery.com/attribute-starts-with-selector/) ”选择器：

```
$('td[id^="status"]').each(function(index){
   alert($(this).attr("id"));
}); 
```

您可以指定选择器的范围以定位主 td

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T09:46:22.607

我会这样做：

更改您的 html

```
<td class='hashtag status'>status value</td> 
```

然后js看起来是这样的：

```
$('.status').each(function(i, el){
    // the i value previously generated in php is here i += 1 if you need it
    i += 1;

    // here is your element. do whatever you want with it:
    $(el).text('I am cell ' + i);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T09:49:59.700

```
$("td[id^='status']").each(function(el){
    console.log(this.id);
}); 
```

这将为您提供每个元素的 id。

如果您只想应用事件或插件，您可以通过 -

```
$("td[id^='status']").pluginName(); 
```

或者

```
$("td[id^='status']").on("click",function(){

}); 
```

# sql - 使用存储在数据库中的数据查找线性分类器

> ID：15717067
> 
> 赞同：1
> 
> 时间：2013-03-30T09:38:33.970
> 
> 标签：sql, database

我的任务如下：我有一个表格，`X, Y, Class` 其中包含笛卡尔坐标系中的 x 坐标、笛卡尔坐标系中的 y 坐标以及点的类，例如 1 类、2 类）。我需要找到一条线来划分平面，使不同类的点位于坐标系的两个独立部分中。这是我第一次使用线性分类器。我想知道如何只使用一个`select`查询来实现这一点 - 允许子查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T12:04:22.710

我的第一反应是，这不是 SQL 可以解决的问题，您应该查找统计/数据分析软件。支持向量机 (SVM) 提供了“最佳”这样的线路，您可以查找它。

但是，如果您有很多时间，或者很少有积分，您可以尝试蛮力方法。也就是说，浏览一个可能的行列表，看看它们的分割程度。

所以，假设一条线有一个方程`y = mx + b`。这是一组具有不同斜率的线的测试。您可以通过`y - mx + b`是正面还是负面来测试线的一侧。然后，您为每一边和每个类别汇总此信息，并使用一些逻辑来选择类别的边。

为此，我使用 SQL Server 语法：

```
with nums as (  -- get a bunch of nums
      select row_number() over (order by null) as n
      from information_schema.columns c
     ),
    m as (
     select n - 10 as m  -- from -10 to 10
     from nums
     where n <= 21
    ),
    b as (
     select n - 10 as b  -- from -10 to 10
     from nums
     where n <= 21
    )
    lines as (
     select m, b
     from m cross join b
    )
select m, b,
       (case when cat1_side1 > cat1_side2 then 'side1' else 'side2'
        end) as cat1_side,
       (case when cat1_side1 > cat1_side2 then cat1_side1 else cat1_side2
        end) as cat1_correct,
      (case when cat1_side1 > cat1_side2 then 'side2' else 'side1'
       end) as cat2_side,  -- force cat2 to the other side
      (case when cat1_side1 > cat1_side2 then cat2_side2 else cat2_side1
       end) as cat2_correct
from (select l.m, l.b, 
             sum(case when p.category = 'cat1' and p.y - (p.x*l.m + l.b) < 0
                      then 1 else 0
                 end) as cat1_side1_cnt,
             sum(case when p.category = 'cat1' and p.y - (p.x*l.m + l.b) > 0
                      then 1 else 0
                 end) as cat1_side2_cnt,
             sum(case when p.category = 'cat2' and p.y - (p.x*l.m + l.b) < 0
                      then 1 else 0
                 end) as cat2_side1_cnt,
             sum(case when p.category = 'cat2' and p.y - (p.x*l.m + l.b) > 0
                      then 1 else 0
                 end) as cat2_side2_cnt,
      from points p cross join
           lines l
      group by l.m, l.b, p.category
     ) lp
order by (cat1_correct + cat2_correct) desc 
```

请注意，此代码选择类别 1 的一侧，而这反过来又强制类别 2 的另一侧。您不能为每个选择最佳一侧，因为您的所有数据点可能都在线的一侧。

此外，这不适用于垂直线，但它很接近。

把这些放在一起，我*并不是*说这是解决这个问题的最佳方法。但是，对于少量的数据点，它实际上可能工作得很好。

# apache-camel - Is the Camel ActiveMQ producer Template thread safe?

> ID：15717076
> 
> 赞同：4
> 
> 时间：2013-03-30T09:40:11.450
> 
> 标签：apache-camel

I am trying to implement a message producer behind a REST interface. The message producer uses the request/reply pattern. When reading the documentation for the Camel producer it is noted that only one producer should be created per application.

Is the producer thread safe so that I can call the send method from multiple threads? Will it work properly when several concurrent requests are waiting for their related replies? How would it be best implemented using Spring, Tomcat and Jersey?

Thank you.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T06:35:26.540

Yes both the producer and consumer template in Apache Camel is thread safe.

And yeah the request/reply works properly. How it is implemented is a mix between the Camel routing engine, and the components that are being used.

eg REST and JMS works a bit differently. Where JMS will use separate message queues to pickup replies, which has a JMSCorrelationID that is used for correlating reply messages.

Where as REST is usually a sync call due the sync nature of HTTP. But it depends on the underlying component, as some supports async communication on the http client such as camel-jetty, camel-ahc etc.

# git - 以 cygwin 和 Github for Windows 结尾的行

> ID：15717077
> 
> 赞同：9
> 
> 时间：2013-03-30T09:40:14.637
> 
> 标签：git, cygwin, github-for-windows

我希望能够使用 Github for Windows 应用程序以及使用 Cygwin（在 Windows 上）的命令行中的 git 来处理我的 git 项目。

但是当我从一个切换到另一个时，我不断遇到行尾问题。

如果使用命令行工具，repo 没有任何更改，它将希望使用 Github 应用程序修改所有文件。如果我使用 Github 应用程序进行更改，它将再次希望使用命令行工具进行更改。

经过大量测试后，我无法使其适用于这两种工具。

什么会让它发挥作用？在我目前设置的 .gitatributes 中： * text=auto 但这没有帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T13:34:06.353

这是一个 GHfW 错误，当您的存储库配置和存储库中的数据不一致时会发生。

如果您将文件配置为转换为 CRLF 行结尾 - 例如，通过设置`core.autocrlf`为`true`，但您的存储库中有已经采用 CRLF 格式的 blob（可能是因为有人尚未设置`core.autocrlf`为 true），则可能会出现此问题。

在这种情况下，GHfW 翻译存储库中的 CRLF 与 msysgit 不同。结果，一些或所有文件看起来很脏。

我建议在整个团队中对您的 CRLF 采用一致的方法，以避免 git 工具在他们应该如何处理您的行尾时产生任何歧义。也就是说，这个错误最近在 libgit2 中得到修复，这是 GHfW 的基础库，应该很快就会进入 GHfW。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-04-10T03:00:20.543

Working on both Git Bash and Cygwin in Windows is going to make git confuse. That is:

*   clone/checkout a repo under Git Bash. During checking out, git thinks it's on Windows, so usually it uses `CRLF` to check out text files.
*   run git in Cygwin, git thinks it's on Linux and that repo had been checked out in Linux(which is actually not, according to the previous step). Therefore, when git sees `CRLF` in Cygwin, it thinks that `LF` is modified into `CRLF` so that git reports a lots files changes.

One way to fix this is to create `.gitattributes` file in repo's root and add lines like the following:

```
*.txt text eol=lf 
```

It tell git when encounter file with suffix `.txt`, using `LF` both when writing into "database(.git)" and checking out into working directory.

[reference here](http://adaptivepatchwork.com/2012/03/01/mind-the-end-of-your-line/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-29T01:59:33.940

我使用 GitHub 2.7.0.24 在我的 Windows 上克隆了一个存储库（包含带有 CRLF 的文件）。然后我想在上面使用我的cygwin的git版本2.1.4。

I edited .git/config by adding "autocrlf=true" under the [core] section. (With a real tabulation before "autocrlf=true")

Now cygwin's git says I'm up to date with no modifications.

I keep the CRLF on the files because they were created that way on the original repository.

I will not use the GitHub application anymore...

I noticed the merge conflicts are adding <<<< ==== >>>> lines with no CR, but they will be deleted when I resolve the conflicts.

# php - 如何配置 TYPO3 后端“列表”模块？

> ID：15717078
> 
> 赞同：0
> 
> 时间：2013-03-30T09:40:20.403
> 
> 标签：php, performance, profiling, typo3

我在模式列表中的 TYPO3 后端有延迟问题。

我已经检查了 TYPO3 存储库，但看起来，现有的扩展仅面向 Fron-End：

*   [http://typo3.org/extensions/repository/view/typo3profiler](http://typo3.org/extensions/repository/view/typo3profiler)
*   [http://typo3.org/extensions/repository/view/php_profiler](http://typo3.org/extensions/repository/view/php_profiler)

如果有一些工具可以分析 TYPO3 Back-End 中的代码性能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T14:31:22.347

只需使用 XHProf，请参阅这篇文章：buzz.typo3.org/people/steffen-gebert/article/profiling-typo3-with-xhprof/

# java - 调试 Java 项目时的 Netbeans IDE 和扩展手表

> ID：15717083
> 
> 赞同：2
> 
> 时间：2013-03-30T09:40:34.920
> 
> 标签：java, debugging, netbeans, ide

我正在 Netbeans IDE 中调试我的一个 java 项目。我需要知道**里面**包含一些变量，这就是我扩展一些手表的原因。扩展不是永久的，IDE 在几个步骤后取消了它，我必须单击*+*符号来恢复它。这是不舒服和耗时的。知道如何解决吗？谢谢你。

编辑：
我在 Watches 中有一个 ArrayList *noveUzly*。启动调试器后，我只看到'nove Uzly | 调试窗口中的“size = 5”。然后我单击***+***符号（查看此变量中的内容）。之后，我执行我的程序。Netbeans IDE 在几个步骤后自动关闭我的所有变量（到'nove Uzly |“size = 5”'）（例如进入for循环）。
**我想要的是？** 将 Netbeans 设置为不关闭我的扩展变量。

![在此处输入图像描述](../Images/dde8afb4a0d254c6b7f7ec0a812bd87f.png)

# lua - Corona Enterprise：如何在 Corona Enterprise Edition 中制作 zip 文件夹？

> ID：15717085
> 
> 赞同：1
> 
> 时间：2013-03-30T09:41:10.470
> 
> 标签：lua, compression, zip, static-libraries, coronasdk

是否有任何静态库可以集成到 corona 企业中以压缩文档目录中的文件夹？

我可以使用以下链接提取 zip 文件：http: [//www.keplerproject.org/luazip/examples.html](http://www.keplerproject.org/luazip/examples.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-09T14:20:30.090

您可以使用许多库：http: [//lua-users.org/wiki/CompressionAndArchiving](http://lua-users.org/wiki/CompressionAndArchiving)

由于您拥有 Corona 企业版，因此​​您应该能够将这些包含在您的项目中。

# java - 如何进行 GWT 服务器调用（GWT RPC？）

> ID：15717089
> 
> 赞同：0
> 
> 时间：2013-03-30T09:41:44.260
> 
> 标签：java, gwt, web-applications, rpc

嗨，我是新手`gwt(java based gui)`。在这里，我正在尝试进行 GWT 服务器调用。

我想将我的保存`MyBean`到我的`Database`.

后来我不得不`update,delete etc..`

有什么可能性，我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T09:46:45.137

使用 GWT 访问数据库有多种可能性，例如`RequestFactory`, `RPC`。

在开始使用服务器调用之前，请通过，

*   [GWT RPC](https://developers.google.com/web-toolkit/doc/latest/tutorial/RPC)（**使服务器异步调用**）

*   [RequestFactory](https://developers.google.com/web-toolkit/doc/latest/DevGuideRequestFactory)（**GWT-RPC 的替代方案，用于创建面向数据的服务。**）

经过这里的链接是[如何制作 RPC 的示例](http://examples.roughian.com/index.htm#Tutorials~RPC_To_Java)。

来到您的 MyBean CRUD 操作，**简而言之，简单的 RPC 结构**如下：

```
GWT Code <===> InterfaceAsync <===> Interface (Synchronous)<===> Server Code 
```

我正在尝试向您解释它自己的元素。

**同步接口（整个 RPC 的中心）：**

```
import com.google.gwt.user.client.rpc.RemoteService;
public interface BeanProcessRPCInterface extends RemoteService
{
    public Mybean processMybeanRPC(Mybean  bean);
} 
```

**A同步接口（客户端的关键部分）：**

```
import com.google.gwt.user.client.rpc.AsyncCallback;

public interface BeanProcessRPCInterfaceAsync
{
    public void processMybeanRPC (Mybean bean, AsyncCallback callback);
} 
```

在这里，您使用**`Service`实现“BeanProcessRPCInterface”的（等于servlet）**

```
public class BeanProcessRPCImpl extends 
                   RemoteServiceServlet implements BeanProcessRPCInterface
{
    private static final long serialVersionUID = 1L;

    public Mybean processMybeanRPC(Mybean  bean)
    {
       //Process your widget  here (CRUD operations)

    }

**you can override doget,doPost,doDelete....etc along with your methods 
} 
```

**在您的 web.xml 中映射上述类；**

```
 <servlet>
    <servlet-name>beanrpc</servlet-name>
    <servlet-class>com.server.BeanProcessRPCImpl</servlet-class>
  </servlet>

  <servlet-mapping>
    <servlet-name>beanrpc</servlet-name>
    <url-pattern>/beanrpc</url-pattern>
  </servlet-mapping> 
```

最后在您的 GWT 代码中。使用如下服务

**在代码中使用：**

*//注册服务。*

```
 private final BeanProcessRPCInterfaceAsync beanService = 
        GWT.create(BeanProcessRPCInterface.class);
        ServiceDefTarget endpoint = (ServiceDefTarget) service;
        endpoint.setServiceEntryPoint('beanrpc'); 
```

*使用回调请求服务器*

```
beanService.processMybeanRPC(mybean, callback);
 AsyncCallback callback = new AsyncCallback()
    {
        public void onFailure(Throwable caught)
        {
           //Do on fail
        }

        public void onSuccess(Object result)
        {
           //Process successfully done with result (result is which you
           // returned in impl class) .
        }
    }; 
```

PS .注意包结构：

**BeanProcessRPCInterfaceAsync ,BeanProcessRPCInterface**应该在 client* 包中

**MyBean**类应该在 shared* 包中

**BeanProcessRPCImpl** 应该在 server* 包中

祝你好运。

# php - 在此查询多表中加入 codeigniter 表

> ID：15717090
> 
> 赞同：3
> 
> 时间：2013-03-30T09:41:45.417
> 
> 标签：php, mysql, codeigniter

***只想在 CODEIGNITER 中加入 1 到 3 个表，怎么做***

在这个查询中，我只加入了一个表，我如何加入我的第 3、4 个表

```
 $this->db->select('*');
    $this->db->from('table1');
    $this->db->join('table1', 'table1.dep_id = table2.dep_id', 'table1.status= 1');
    $this->db->limit(1);
    $this->db->order_by("expiredate", "desc");

    return $this->db->get()->result(); 
```

我的表结构如下

表格1

```
t1_id
t1_name
t2_id
t3_id
t4_id 
```

表2

```
t2_id
t2_name 
```

表3

```
t3_id
t3_name 
```

表4

```
t4_id
t4_name 
```

我怎样才能加入我的第三和第四

提前问好...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T10:10:07.397

试试这个我认为它的工作

```
$this->db->select('table1.*,table2.t2_name,table3.t3_name,table4.t4_name');
$this->db->from('table1','table2','table3','table4');

$this->db->join('table2', 'table1.t2_id= table2.t2_id');
$this->db->join('table3', 'table1.t3_id= table3.t3_id');
$this->db->join('table4', 'table1.t4_id= table4.t4_id');

return $this->db->get()->result(); 
```

或者您可以使用 SQL 查询来获取结果....

```
$this->db->query($sql)->result(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T09:47:00.167

尝试同时加入

```
$this->db->join('table1', 'table1.t2_id = table2.t2_id', 'table1.status= 1'); 
```

同时您需要加入 table1 ，table2 中的任何一个才能加入 table3 或 4 之类的

```
$this->db->join('table3', 'table1.t3_id = table3.t3_id');
$this->db->join('table4', 'table1.t4_id = table4.t3_id'); 
```

而且你需要选择像

```
$this->db->select('table1.*,table2.*,..'); 
```

像这种方式，另一件事是如果 table1 和 table2 的任何列相同，那么您需要选择**别名**

```
$this->db->select('table1.id as tab1id,table2.id as tab2id'); 
```

在上面的 table1,2 是相同的列名“id”

# emacs - 覆盖emacs lisp函数的首选方法？

> ID：15717103
> 
> 赞同：24
> 
> 时间：2013-03-30T09:42:39.810
> 
> 标签：emacs, overriding

我已经重写并独立测试了由与 Emacs 24 捆绑的 Emacs 函数之一调用的内部函数的行为。合并 - 例如在我的`init.el`- 我的函数的行为覆盖捆绑函数的首选方法是什么？

`advice`我已经关注了vs`fset`等 的各种线程并且很困惑。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-31T01:34:14.983

@iainH 通过描述您要实现的目标以及到目前为止的目标，您往往会更快地获得有用的答案。我要求提供代码以尝试帮助您做您想做的事情，而无需覆盖任何内容。

我还是不明白为什么你不只是使用`defun`呢？我怀疑可能发生的情况是您`defun`在 init 文件中使用，但尚未加载原始函数（请参阅[autoload](http://www.gnu.org/software/emacs/manual/html_node/elisp/Autoload.html)）。一段时间后，您做了一些事情来加载具有原始定义的文件，并且您的自定义函数被原始定义覆盖。

如果这是问题所在，您有三个选项（假设您`telnet-initial-filter`要从“telnet.el”覆盖）：

1.  在定义自己的版本之前自己加载文件。

    ```
    (require 'telnet)
    (defun telnet-initial-filter (proc string)
      ...) 
    ```

2.  [仅在使用eval-after-load](http://www.gnu.org/software/emacs/manual/html_node/elisp/Hooks-for-Loading.html)机制加载文件后，才指示 Emacs 加载您的函数 。

    ```
    (eval-after-load "telnet"
      '(defun telnet-initial-filter (proc string)
         ...)) 
    ```

3.  使用建议。

其中，2个是最好的。1 也可以，但是您必须加载一个您可能永远不会在会话中使用的文件。3是最差的。任何涉及的事情`defadvice` 都应该作为最后的选择。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-08-11T16:27:20.337

只是为了让这个问题自成一体，这里是如何根据建议来做的。

```
(defadvice telnet-initial-filter (around my-telnet-initial-filter-stuff act)
  "Things to do when running `telnet-initial-filter'."
  (message "Before")
  ad-do-it
  (message "After") ) 
```

如果您想包装而不是替换现有函数（在这种情况下只需重新定义它），这显然很有用。

有关使用建议的更多信息，请参阅[手册](http://www.gnu.org/software/emacs/manual/html_node/elisp/Advising-Functions.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-02-15T15:39:17.933

有一种[“新”的建议方法](https://www.gnu.org/software/emacs/manual/html_node/elisp/Advising-Functions.html)，甚至可以在加载原始建议之前设置函数替换。

```
(defun something-fixed ()
  ...
  )
(advice-add 'original-function :override #'something-fixed) 
```

This even works in combination with `eval-buffer` of e.g. your init file.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-03-30T10:43:22.980

我发现很难推理`eval-after-load`+ `defun`。而且`defadvice`宏具有复杂的语义和文档。相反，我使用建议原语，例如`advice-add`：

```
(defun my-vc-git-print-log (files buffer &optional shortlog start-revision limit)
   ...)

(defun my-vc-git-print-log-advice (fn &rest args)
  "Uses `my-vc-git-print-log' that adds extra `--all' to `git log'."
  (apply #'my-vc-git-print-log args))

(advice-remove 'vc-git-print-log #'my-vc-git-print-log-advice)
(advice-add 'vc-git-print-log :around #'my-vc-git-print-log-advice) 
```

# git - 使用 git 后如何向公众展示更改？

> ID：15717104
> 
> 赞同：0
> 
> 时间：2013-03-30T09:42:40.990
> 
> 标签：git, version-control

我是 git 的新手。在我处理完版本和东西之后，如何将我的最终版本部署到 /var/www/html 目录？我克隆了 repo，但可能有更好的方法。谢谢！

每当我将更新推送到 /user/my-repo.git 时，我都想更新 /var/www/html （即最终用户看到的内容）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T14:50:10.337

git 的想法是做*版本控制*，部署你可以`git archive`用来制作一个 tarball/zip 文件。或者直接复制相关文件。

# iphone - UIImageView 充当按钮

> ID：15717108
> 
> 赞同：0
> 
> 时间：2013-03-30T09:43:29.480
> 
> 标签：iphone, ios4

我有一个 UIImageView 我想收到一个动作。我希望它像一个按钮。它不会设置图像，因此它将是不可见的，然后当点击时我希望它更改为图像。

我知道 IBActions 不适用于 UIImageView。我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T09:14:07.773

此代码可能是您的解决方案。请尝试一下。

```
UIButton b=[UIButton buttonWithType:UIButtonTypeCustom];
    [b setBackgroundImage:backgroundImage forState:UIControlStateNormal];
    [b addTarget:own action:@selector(buttonClicked:) 
     forControlEvents:UIControlEventTouchUpInside];
    [own.view addSubview:b]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T09:47:30.373

创建一个 UIButton，在 Interface Builder 中将按钮的类型设置为“自定义”，然后选择您的图像作为按钮的背景图像。将 IBAction 分配给按钮并使其在您的操作中不可见。

或者，

```
UIButton *button=[UIButton buttonWithType:UIButtonTypeCustom];
[button setBackgroundImage:backgroundImage 
                  forState:UIControlStateNormal];
[button addTarget:self 
           action:@selector(buttonClicked:) 
 forControlEvents:UIControlEventTouchUpInside];
[self.view addSubview:button ]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T10:45:27.180

如果你真的想使用 UIImageView 你必须设置`myImageView.userInteractionEnabled = YES;`然后添加一个手势识别器：

```
UITapGestureRecognizer *myGestureRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(imageViewTapped:)];
myGestureRecognizer.numberOfTouchesRequired = 1;
myGestureRecognizer.numberOfTapsRequired = 1;
[myImageView addGestureRecognizer:myGestureRecognizer]; 
```

否则，我建议将 UIButton 与背景图像一起使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-03T15:31:29.953

**解决方案：**

将此添加到您的视图控制器：

func makeButton(imageView: UIImageView, onPressed: Selector) {

```
 imageView.isUserInteractionEnabled = true
    let gr = UITapGestureRecognizer()
    gr.numberOfTapsRequired = 1
    gr.numberOfTouchesRequired = 1
    gr.addTarget(self, action: onPressed)
    imageView.addGestureRecognizer(gr)
} 
```

并使用以下方法调用它：

```
makeButton(myImageView, onPressed: self.buttonPressed) 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-30T09:45:49.430

为什么不像普通开发人员那样只使用 UIButton 并为其设置图像和/或使其可见和启用或不可见和禁用？

如果您的 UIButton 中没有图像，我认为您仍然可以点击该区域，然后您可以通过“ `setImage:forState:`”为其分配图像。

# jsp - JSTL 似乎不适用于 Eclipse Juno

> ID：15717110
> 
> 赞同：2
> 
> 时间：2013-03-30T09:43:42.340
> 
> 标签：jsp, jstl, tomcat7, eclipse-juno

我正在学习 JSP 并尝试使用 JSTL。我正在使用 Eclipse Juno，并按照[https://stackoverflow.com/tags/jstl/info的安装说明进行操作](https://stackoverflow.com/tags/jstl/info)

但是在尝试运行它时，它会给出错误消息：消息绝对 uri：http: [//java.sun.com/jsp/jstl/core](http://java.sun.com/jsp/jstl/core)无法在 web.xml 或使用此应用程序部署的 jar 文件中解析

和描述 服务器遇到一个内部错误，阻止它完成这个请求。

已将 javax.servlet.jsp.jstl-1.2.2.jar 和 javax.servlet.jsp.jstl-api-1.2.1.jar 放入 project/WebContent/WEB-INF/lib/ 文件夹并刷新文件夹，然后确保我也右键单击它们并单击构建路径-> 配置构建路径并确保它们都在 Web 应用程序库下。

尝试了不同版本的 JSTL，即 1.2.1 和 1.2，它们都给出了相同的错误。并且还删除了 .jar 文件并仍然给出相同的错误，所以我假设文件以某种方式没有被读取或设置不正确。

试图寻找解决方案，但似乎没有找到其他有同样问题的人......（没有人有同样的问题，或者只是不知道去哪里找。）

我尝试运行的简单 .jsp 代码如下：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1" %>
    <%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
    <%@taglib uri="http://java.sun.com/jsp/jstl/xml" prefix="x" %>
<c:import url="hotels.html" var="sf"/>
<x:parse doc="${sf}" varDom="dom"/>

<html>
<head>
    <title>Parsing hotels.html</title>
</head>
<body>
    <x:out select="$tag/img/@alt"/>
</body>
</html> 
```

有人可以帮忙...提前非常感谢。

# android - 在 SQLiteDatabase 中获取没有光标的“_id”行

> ID：15717112
> 
> 赞同：0
> 
> 时间：2013-03-30T09:43:49.363
> 
> 标签：android

我在不使用游标的情况下获取我的表（db：SQLiteDatabase）的_id“max”。我是说 ：

我必须在我的应用程序中删除我的表的所有元素，并且在我添加一个新元素之后......在这个新添加之前，我想知道我的“空”表的 _id max 是多少。

那怎么办？这是可能的 ？我在 SQLiteDatabase API 中搜索一个方法，但没有找到我的解决方案..

谢谢你的帮助=）（对不起我的英语不好^^）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T09:54:23.640

for get max num of rows in table you can use:

```
public long count() {
    return DatabaseUtils.queryNumEntries(db,'tablename');
} 
```

# ruby - xpath 挑战：如何将多个结果合并为一个结果

> ID：15717113
> 
> 赞同：3
> 
> 时间：2013-03-30T09:43:54.747
> 
> 标签：ruby, xml, xpath, nokogiri

我使用 Ruby 1.9.3p385 并使用 Nokogiri 解析 XML 文件。不太确定我使用哪个 xpath 版本，但它确实响应 v.1 语法/函数，而不是 v.2 语法。

我有这个 XML 文件：

```
<root_tag>
  <middle_tag>
    <item_tag>
      <headline_1>
        <tag_1>Product title 1</tag_1>
      </headline_1>
      <headline_2>
        <tag_2>Product attribute 1</tag_2>
      </headline_2>
    </item_tag>
    <item_tag>
      <headline_1>
        <tag_1>Product title 2</tag_1>
      </headline_1>
      <headline_2>
        <tag_2>Product attribute 2</tag_2>
      </headline_2>
    </item_tag>
  </middle_tag>
</root_tag> 
```

我想提取所有产品，为此我使用以下代码：

```
products = xml_file.xpath("/root_tag/middle_tag/item_tag/headline_1|/root_tag/middle_tag/item_tag/headline_2")

puts products.size # => 4 
```

如果您查看输出，请使用：

```
products.each_with_index do |product, i|
  puts "product #{i}:"
  puts product
end 
```

你得到这个：

```
product 0:
<headline_1>
  <tag_1>Product title 1</tag_1>
</headline_1>
product 1:
<headline_2>
  <tag_2>Product attribute 1</tag_2>
</headline_2>
product 2:
<headline_1>
  <tag_1>Product title 2</tag_1>
</headline_1>
product 3:
<headline_2>
  <tag_2>Product attribute 2</tag_2>
</headline_2> 
```

我需要我的代码将所有匹配项加入/合并到相同的结果中（因此 products.size 应该是 2）。最终输出应如下所示：

```
product 0:
<headline_1>
  <tag_1>Product title 1</tag_1>
</headline_1>
<headline_2>
  <tag_2>Product attribute 1</tag_2>
</headline_2>
product 1:
<headline_1>
  <tag_1>Product title 2</tag_1>
</headline_1>
<headline_2>
  <tag_2>Product attribute 2</tag_2>
</headline_2> 
```

我查看了整个互联网，但所有变体，例如：

```
products = xml_file.xpath("/root_tag/middle_tag/item_tag/*[self::headline_1|self::headline_2]") 
```

一切似乎都输出相同的结果。

我错过了 xpath 中的一些重要点，还是我忽略了一些东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T13:06:04.950

XPath only knows plain sequences, so there's nothing like subsequences. You will have to wrap each "product" into some XML element. Gladly we've already got such an element (`<item_tag/>`), so the code is rather simple:

```
products = doc.xpath("(//item_tag")
products.each_with_index do |product, i|
  puts "product #{i}:"
  product.children.each do |line|
    puts line
  end
end 
```

Output is (probably needs some more formatting, but I'm not used to ruby and can't help you with that):

```
product 0:

<headline_1>
        <tag_1>Product title 1</tag_1>
      </headline_1>

<headline_2>
        <tag_2>Product attribute 1</tag_2>
      </headline_2>

product 1:

<headline_1>
        <tag_1>Product title 2</tag_1>
      </headline_1>

<headline_2>
        <tag_2>Product attribute 2</tag_2>
      </headline_2> 
```

* * *

*To address all `<headline_n/>`-tags, you can also use `//*[starts-with(local-name(), 'headline')]` to make the code more flexible.*

# android - 为什么吐司在 GoogleMap 中不起作用

> ID：15717116
> 
> 赞同：0
> 
> 时间：2013-03-30T09:44:41.690
> 
> 标签：android

我试着在我的活动中烤面包。我的活动首先使用 GoogleMap 进行膨胀，如

```
protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);     
            setContentView(R.layout.activity_detail_map_view);
} 
```

然后我在`onResume()`

```
public void onResume() {
    super.onResume(); 

     //---create the BroadcastReceiver when the SMS is sent---
        smsSentReceiver = new BroadcastReceiver(){
            @Override
            public void onReceive(Context arg0, Intent arg1) {

                switch (getResultCode())
                {
                    case Activity.RESULT_OK:
                        Toast.makeText(getBaseContext(), "SMS sent",
                            Toast.LENGTH_SHORT).show();
                        break; 
```

但是它应该烤的时间，我没有看到烤面包。有什么问题？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T09:57:56.713

不要使用 getApplicationContext：试试

```
Toast.makeText(youractivity.this,"SMS Sent",Toast.LENGTH_SHORT).show(); 
```

也试试

```
Toast.makeText(context,"SMS Sent",Toast.LENGTH_SHORT).show(); 
```

# python - Linux 上的 Python 3 和 matplotlib 问题

> ID：15717119
> 
> 赞同：0
> 
> 时间：2013-03-30T09:45:26.523
> 
> 标签：python, matplotlib, python-3.3

在将 matplotlib 与 Python 3 结合使用时，我遇到了一些问题。在摆脱了[这个](https://stackoverflow.com/questions/15708226/python3-3-matplotlib-cannot-import-name-tkagg)问题之后，我遇到了一个新问题。当我尝试执行[直方图演示](http://matplotlib.org/examples/api/histogram_demo.html)时，我得到了这个[回溯](http://pastebin.ca/2345456)。

有人有想法吗？我的 matplotlib 版本是：python3-matplotlib-1.2.0-8.fc18.x86_64（即 Fedora 18 上的 1.2）。

提交的错误：

1.  [软呢帽](https://bugzilla.redhat.com/show_bug.cgi?id=929383)
2.  [Matplotlib](https://github.com/matplotlib/matplotlib/issues/1873)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T11:05:39.860

将其添加到[histogram_demo.py](http://matplotlib.org/examples/api/histogram_demo.html)的顶部，就在之前`import numpy`：

```
from matplotlib import font_manager
font_manager.USE_FONTCONFIG = False 
```

或修改[font_manager.py](https://github.com/matplotlib/matplotlib/blob/v1.2.0/lib/matplotlib/font_manager.py#L65)以永久更改该值。

就错误报告而言，我会将`USE_FONTCONFIG = True`设置报告给 Fedora 包管理器。Python 3.x 中的`subprocess`输出解码问题（或正则表达式问题）应在上游报告给[matplotlib 项目](https://github.com/matplotlib/matplotlib)。

# java - 捕获错误消息并在控制台 (IDE) 中显示

> ID：15717120
> 
> 赞同：0
> 
> 时间：2013-03-30T09:45:32.207
> 
> 标签：java, outputstream, system.out, bytearrayoutputstream, printstream

我正在使用我的 java 程序中的 Processbuilder 作为后台进程运行一个 c++ 程序（makefile）。我正在使用 .getInputStream 捕获在我的 cmd 提示符中显示的值并显示在我的控制台 (IDE) 中。

```
 input = new BufferedReader(new InputStreamReader(p.getInputStream()));

            String line;
    try {
       while((line=input.readLine()) != null) {

            System.out.println(line); 
```

这很好用。假设如果我在我的一个 c++ 文件中犯了一些错误，并且当我尝试运行 makefile 时，它​​没有捕获错误消息。在使用 "cmd.exe","start" 时，我可以在 cmd 提示符中查看错误，但它不会显示在控制台（IDE）中。

我可以知道我应该怎么做才能显示错误消息。

1) System.err 和 printstream 可以解决这个问题吗？如果可以的话，请给我看一段代码示例。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T09:55:39.547

Process has `.getErrorStream()` or you can use ProcessBuilder's `.redirectErrorStream()` as mentioned by MadProgrammer's comment and this SO Question: [Java Process with Input/Output Stream](https://stackoverflow.com/questions/3643939/java-process-with-input-output-stream)

# android - 从数据库[android-eclipse]中存储数组中的元素

> ID：15717121
> 
> 赞同：0
> 
> 时间：2013-03-30T09:45:33.520
> 
> 标签：android, database, arrays, eclipse

我想将数据库中的卡路里值存储在一个名为 x 的数组中，为此我必须在从数据库中重新训练数据的循环中实现它；但是，当我这样做时，程序会崩溃，从而导致错误。谁能告诉我问题出在哪里以及如何解决？！

```
protected String doInBackground(String... args) {
            // Building Parameters
            List<NameValuePair> params = new ArrayList<NameValuePair>();
            // getting JSON string from URL
            JSONObject json = jParser.makeHttpRequest(url_all_products, "GET", params);

            // Check your log cat for JSON reponse
            Log.d("All Products: ", json.toString());

            try {
                // Checking for SUCCESS TAG
                int success = json.getInt(TAG_SUCCESS);

                if (success == 1) {
                    // products found
                    // Getting Array of Products
                    Log.d("All Products: ", json.toString());
                    products = json.getJSONArray(TAG_PRODUCT);

                    // looping through All Products
                    for (int i = 0; i < products.length(); i++) {
                        JSONObject c = products.getJSONObject(i);

                        // Storing each json item in variable
                        String id = c.getString(TAG_PID); // also name
                        String category = c.getString(TAG_CATEGORY );
                        Double calory = c.getDouble(TAG_CALORY);

                        Log.d("After X Declaration ", calory.toString());

                        // NO NEED FOR THEM !!
                        /*
                        String unit = c.getString(TAG_UNIT );
                        String category = c.getString(TAG_CATEGORY );
                        String calory = c.getString(TAG_CALORY );
                        String carbohydrate = c.getString(TAG_CARBOHYDRATE ); */

                        // creating new HashMap
                        HashMap<String, String> map = new HashMap<String, String>();
                        x[i]=calory;
                       // Log.d("X items ", x.toString());
                        // adding each child node to HashMap key => value
                        map.put(TAG_PID, id);
                        map.put(TAG_CATEGORY, category);
                        //map.put(TAG_NAME, name);

                        // adding HashList to ArrayList
                        productsList.add(map);
                        Log.d("After X Declaration ", json.toString());
                    }
                } else {
                    // no products found
                    // Launch Add New product Activity
                    Intent i = new Intent(getApplicationContext(),
                            NewProductActivity.class);
                    // Closing all previous activities
                    i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                    startActivity(i);
                }
            } catch (JSONException e) {
                e.printStackTrace();
            }

            return null;
        } 
```

# sql-server-2008-r2 - SharePoint 2007 混合模式身份验证与 MSSQL 扭曲？

> ID：15717122
> 
> 赞同：0
> 
> 时间：2013-03-30T09:45:36.550
> 
> 标签：sql-server-2008-r2, sharepoint-2007, forms-authentication, windows-authentication, basic-authentication

我正在维护和扩展一个 SharePoint 2007 *Internet*网站，该网站具有与自定义 MSSQL 2008 数据库集成的广泛的自定义 ASP.NET 2.0 应用程序。

该应用程序使用连接到 Active Directory 的 Windows 身份验证，并且所有帐户都是 Active Directory 域控制器上的域帐户。

用户使用基于 SSL 的基本身份验证通过 Internet 浏览器从远程位置登录。

MSSQL 2008 在整个存储过程中广泛使用 SUSER_SNAME 来识别正在发出过程请求的用户并相应地修改使用的查询。

我被要求从基本身份验证切换到基于表单的身份验证。

我有以下问题：

1) 在 SharePoint 2007 中从基本身份验证切换到基于表单的身份验证有哪些危险？

2) 由于在存储过程中使用了 SUSER_SNAME，我是否还有其他问题在等着我？

3) 这样的更改是否相对较快，或者可能需要很长时间来调试系统中的故障？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T11:01:42.553

您可以使用“ **Active Directory 成员资格提供程序**”来实施此更改。请参阅此链接[Active Directory 成员资格提供商](http://technet.microsoft.com/en-us/library/cc262069%28v=office.12%29.aspx#section2)

1）Basic Authentication和Form Based authentication在安全观点上没有太大区别。

2) 使用“Active Directory 会员提供程序”不影响使用 SUSER_SNAME。

3) 程序非常简单。

# ruby-on-rails - 使用带有电子表格的 Excel 文件设计注册

> ID：15717131
> 
> 赞同：1
> 
> 时间：2013-03-30T09:46:50.700
> 
> 标签：ruby-on-rails, devise, ruby-on-rails-3.2, spreadsheet

请参阅没有设计的相同应用程序示例：[链接](https://github.com/jalagrange/excel_test_app/blob/master/app/controllers/people_controller.rb#L125)

我试过 git clone 它，当导入 excel 文件成功时。

我正在尝试设计注册从 excel 文件中获取电子邮件和密码，

这是`imports_controller.rb`

```
class ImportsController < Devise::RegistrationsController
  before_filter :resource_name

def resource_name
  :user
end

def import
end

def create  
  get_file = params[:excelfile]
    file = ImportUploader.new
    file.store!(get_file)
    book = Spreadsheet.open "#{file.store_path}"
    sheet = book.worksheet 0
    @user = []
    sheet.each 1 do |row|
      u = User.new
      u.email = row[0]
      u.password = row[1]
      u.save
      @user << u
    end
        redirect_to root_path
end 
```

`import.html.erb`

```
<%= form_tag import_path, multipart: true do %>
  <%= file_field_tag :excelfile %>
  <%= submit_tag "Import" %>
<% end %> 
```

当我尝试导入 excel 文件时

```
Started POST "/import" for 127.0.0.1 at 2013-03-30 16:23:55 +0700
Processing by ImportsController#create as HTML
  Parameters: {"utf8"=>"Γ£ô", "authenticity_token"=>"RavRmOt838/dMJ4eg1Kx4DYnWYF
TUBdqHnQIhcfkeug=", "excelfile"=>#<ActionDispatch::Http::UploadedFile:0x4e28980
 @original_filename="kkryrk.xls", @content_type="application/vnd.ms-excel", @hea
ders="Content-Disposition: form-data; name=\"excelfile\"; filename=\"kkryrk.xls
\"\r\nContent-Type: application/vnd.ms-excel\r\n", @tempfile=#<File:C:/Users/mycomp/AppData/Local/Temp/RackMultipart20130330-5724-18krlm5>>, "commit"=>"Import"}

   (1.0ms)  BEGIN
  Users Exists (2.0ms)  SELECT 1 AS one FROM `users` WHERE `users`.`emai
l` = BINARY 'email@domain.com' LIMIT 1
   (1.0ms)  ROLLBACK
Completed 500 Internal Server Error in 441ms 
```

我很困惑，因为我的应用程序没有错误，我不知道错误的位置以便回滚。

任何的想法？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T13:28:56.297

解决。我正在使用手动创建用户 [https://github.com/plataformatec/devise/wiki/How-To:-Manage-users-through-a-CRUD-interface](https://github.com/plataformatec/devise/wiki/How-To:-Manage-users-through-a-CRUD-interface)

```
def create  
  get_file = params[:excelfile]
    file = ImportUploader.new
    file.store!(get_file)
    book = Spreadsheet.open "#{file.store_path}"
    sheet1 = book.worksheet 0
    sheet1.each 1 do |row|
      email = row[0]
      temp_password = row[1]
      Pelajar.create(:email => email, :password => temp_password, :password_confirmation => temp_password)
    end
        redirect_to root_path
end 
```

# matlab - 条形图上的误差线

> ID：15717139
> 
> 赞同：3
> 
> 时间：2013-03-30T09:47:35.310
> 
> 标签：matlab

我试图得到：一个很好的组条形图。我希望每个条上都有这样的错误栏（或类似的，由您自行决定）：

![在此处输入图像描述](../Images/6f082867bcd61a60237f9f1c074c37b3.png)

我有办法：

```
ff =
             Medical eq    Patient   Hygiene   Near bed   Far bed
Direct        1.2759    0.9253    0.6092    1.0460    1.3276
Housekeeping  1.0833    0.2500    0.5833    2.1667    1.3333
Mealtimes      0        0.3000    0.7000    1.4500    0.5000
Medication    0.3694    0.7838    0.8919    1.5495    1.0541
Misc          0.1059    0.1294    0.4118    0.8000    0.8353
Personal      0.0370    0.4074    0.8148    1.2593    0.7037 
```

标准差

ee =

```
2.0411    1.1226    0.8378    1.5007    1.3776
1.3114    0.4523    0.6686    2.4058    1.1547
     0    0.7327    1.3803    2.1392    0.6070
0.7499    0.9186    1.0300    1.2844    1.3062
0.4371    0.3712    0.7605    1.0212    0.6699
0.1925    0.6939    1.6417    3.5582    1.5644 
```

相反，我得到了这个：

![在此处输入图像描述](../Images/731b7d8461279c1d3681368038f295f9.png)

通过使用：

```
bb=bar(ff'); hold all
data=repmat([1:6]'*ones(5,1)',1,1)
er=errorbar(data, ff, ee, '.') 
```

我读到我必须找到每个酒吧的中心？太疯狂了！任何解决方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-28T14:29:50.963

每个条的中心可以通过

```
x = get(get(h(i),'children'),'xdata');
barsx=mean(x,1); 
```

barx 为每个条形子集的每个第 i 个元素提供中心。

```
h=bar(bars)
for i=1:6
  x = get(get(h(i),'children'),'xdata');
  barsx(1:6,i)=mean(x,1)
end
hold all
h=errorbar(barsx,bars,barsvar) 
```

使错误具有与栏相同的颜色：

```
figure()
h=bar(bars) 
col=[0 0 1;0 1 0;1 1 0; 1 1 1; 0 0 0; 0 1 1];
colormap([0 0 1;0 1 0;1 1 0; 1 1 1; 0 0 0; 0 1 1])
hold all
for i=1:6
  x = get(get(h(i),'children'),'xdata')
  barsx=mean(x,1)
  h1=errorbar(barsx',bars(1:6,i),barsvar(1:6,i),'color',col(i,:))
  set(h1,'linestyle','none')
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T11:17:09.960

真的没那么疯狂！

您可以只使用`errorbar`您随时可用的数据。

此代码通过为每个组添加 1 和为组中的每个条添加 1/7 来计算正确的位置。

```
for i = 1:5
    j = 1:6; 
    x = -0.5 + i + 1/7 * j; 
    errorbar(x, ff(j,i), ee(j,i), '.'); 
end 
```

结果是：

![在此处输入图像描述](../Images/fce605310aac10738200b2f4fdf900ae.png)

（省略标签，但除此之外，这似乎与您要查找的内容非常相似）

# python - PATH environment variable in python

> ID：15717140
> 
> 赞同：1
> 
> 时间：2013-03-30T09:47:37.340
> 
> 标签：python, linux, macos

I'm using OS X 10.8.3.

If you open a terminal,

```
echo $PATH 
```

/usr/local/bin is there, also if you run it via sh or bash

however the python code output of:

```
import os
print os.environ.copy() 
```

lacks the /usr/local/bin path

Can anyone explain how $PATH works? is there something that extends it? why did the python script didn't print the $PATH I see in the terminal? Does it behave the same on linux distributions?

How did I encountered it? I installed a sublime 2 plugin, js2coffee, the plugin runs a subprocess (import subprocess), providing the name of an exec, js2coffee - which was in the /usr/local/bin, a path that wasn't in the python os env. In order to fix it I had to add it to the env:

```
env = os.environ.copy()
env["PATH"] = "/usr/local/bin/"

js2coffee = subprocess.Popen(
    'js2coffee',
    stdin=subprocess.PIPE,
    stdout=subprocess.PIPE,
    stderr=subprocess.PIPE,
    shell=True,
    env= env
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T11:03:14.123

Terminal windows host interactive shells, typically `bash`. Shells get initialized using a variety of profile and "rc" files, as documented in their man pages (e.g. [bash](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/bash.1.html)). That initialization will change the environment in myriad ways.

In particular, `/etc/profile` runs the [`path_helper`](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man8/path_helper.8.html) tool to add directories to the `PATH` variable.

Applications launched from the Finder, Dock, Launchpad, etc. do not run shells and don't have similar environments. They inherit a fairly basic environment from their parent process, ultimately going back to launchd. See, for example, the output of `launchctl export`. You could also use Automator, AppleScript Editor, or the third-party tool Platypus to run the `env` command from a GUI app to see what it has.

I'm not certain about what is standard for Linux shells, but the same principal applies. Programs launched from your desktop environment will inherit the environment directly. Shells will initialize their environment using various script files and may therefore have different environments.

# asp.net - 回发页面标题元描述上的 asp.net 未更新

> ID：15717142
> 
> 赞同：2
> 
> 时间：2013-03-30T09:47:45.343
> 
> 标签：asp.net, postback, meta-tags, linkbutton, page-title

asp.net 网页上有一个 asp:LinkBut​​ton。单击时，我正在更改页面标题并添加元描述，但它没有更新和反映在页面视图源中。

页面标题和元描述仅在页面不是 PostBack 时更新

这是设计使然还是使用 asp:HyperLink 以外的任何解决方法

编辑：添加代码

```
 protected void lnk_Click(object sender, EventArgs e)
    {
        HtmlMeta meta = new HtmlMeta();
        meta.Name = "description";
        meta.Content = "new descrpition";
        Page.Header.Controls.Add(meta);

        Page.Title = "new title of page";
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T10:21:28.040

我已经用 asp:linkbutton 试过了。工作正常。

设置元描述和标题并在事件中`page_load`更新它。`linkbutton's click`

看看我的代码：

```
 <asp:LinkButton ID="link" runat="server" Text="Update Meta Info" 
        onclick="link_Click"></asp:LinkButton> 
```

在这里，我将我的代码发布在后面：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        HtmlMeta meta = new HtmlMeta();
        meta.Name = "description11";
        meta.Content = "new descrpition11";
        Page.Header.Controls.Add(meta);
        Page.Title = "new title of page11";
    }
}

protected void link_Click(object sender, EventArgs e)
{
    HtmlMeta meta = new HtmlMeta();
    meta.Name = "description";
    meta.Content = "new descrpition";
    Page.Header.Controls.Add(meta);

    Page.Title = "new title of page";
} 
```

# jquery - jQuery AJAX upload progress for large text fields

> ID：15717146
> 
> 赞同：5
> 
> 时间：2013-03-30T09:48:06.660
> 
> 标签：jquery, forms, progress

Is it possible to get the upload-progress for a form with very large textfields using jQuery ajax? I think the client knows how much bytes have been sent, but when I Google I only find solutions for file-uploads using server-site code.

This is my ajax-request:

```
$.ajax({
        type: "POST",
        url: "index.php?action=saveNewPost",
        data: {textbox1: textbox1,textbox2: textbox2},
        contentType: "application/x-www-form-urlencoded;charset=UTF-8",
        success: function(){
            //
        }
    }); 
```

I was hoping there would be something like "onProgress" with a parameter containing the amount of bytes already sent...

**Found a solution**

```
$.ajax({
        xhr: function() {
            var req = $.ajaxSettings.xhr();
            if (req) {
                req.upload.addEventListener('progress', function(event) {
                    if (event.lengthComputable) {
                        $('#ajaxFeedbackDiv').html(event.loaded); // = 'test'; //event.loaded + ' / ' + event.total;
                    }
                }, false);
            }
            return req;
        },
        type: "POST",
        url: "index.php?action=saveNewPost",
        data: {textbox1: textbox1,textbox2: textbox2},
        contentType: "application/x-www-form-urlencoded;charset=UTF-8"
        }
    }); 
```

this seems to work, altough there are still

**2 problems:**

1.  the connection on my localhost is way too fast, so it's hard to see the "progress" actually working. I installed this tool [http://mschrag.github.com](http://mschrag.github.com) on a second Mac in the same network and I see that it's working perfectly.
2.  I'm not sure if this will fall-back friendly on non-XHR/HTML5-compatible browsers, i.e. just upload without progress information?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T10:03:56.410

You could achieve this with the new [`XMLHttpRequest`](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Using_XMLHttpRequest) object in HTML5 capable browsers. It supports the `progress` event that you could subscribe to and be notified of the AJAX operation.

Here's an example:

```
document.getElementById('myForm').onsubmit = function() {
    var xhr = new XMLHttpRequest();

    xhr.upload.addEventListener('progress', function(e) {
        if (e.lengthComputable) {
            var percentage = Math.round((e.loaded * 100) / e.total);
            document.getElementById('progress').innerHTML = percentage + '%';
        }
    }, false);

    xhr.open(this.method, this.action, true);
    xhr.onreadystatechange = function() {
        if (xhr.readyState == 4 && xhr.status == 200) {
            alert(xhr.responseText);
        }
    };

    xhr.send(new FormData(this));
    return false;    
}; 
```

and here's a [`live demo`](http://jsfiddle.net/cGQBM/2/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-01T15:39:18.967

Maybe you can use this jquery plugin:

[https://www.articlage.com/adrianillo/article/DataUploader](https://www.articlage.com/adrianillo/article/DataUploader)

Just add a progressbar to upload process

# ios - How to use UIPopoverBackgroundView to present a transparent popover in iOS 6

> ID：15717147
> 
> 赞同：1
> 
> 时间：2013-03-30T09:48:07.860
> 
> 标签：ios, objective-c, uiview, ios6, uipopovercontroller

I am using a `UIPopoverController` to present a `UITableViewController` in iOS 6.

I am trying to make this popover semi-transparent in order to be able to show the covered views. Other than that, I would like to have a standard popover controller with default arrows etc.

Since iOS 5 it is possible to define a custom popover background view using [UIPopoverBackgroundView](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPopoverBackgroundView_class/Reference/Reference.html#//apple_ref/occ/cl/UIPopoverBackgroundView). However, I am struggling to set up the background correctly. The code I am using to set up the background view is shown below. I would like to set **only the alpha value** and keep other properties set to their default values.

In addition, how would I need to **configure the table view controller presented inside the popover** to give its view (and all its subviews, except the text) transparency too.

Thank you!

```
configPopover.popoverBackgroundViewClass = [TransparentPopoverBackGroundView class]; 
```

**TransparentPopoverBackGroundView.m:**

```
#import "TransparentPopoverBackGroundView.h"

@implementation TransparentPopoverBackGroundView

@synthesize arrowOffset;
@synthesize arrowDirection;

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        self.alpha = 0.4;
    }
    return self;
}

+ (UIEdgeInsets)contentViewInsets {
    return UIEdgeInsetsMake(5, 5, 5, 5);
}

+ (CGFloat)arrowHeight{
    return 10.0;
}

+ (CGFloat)arrowBase{
    return 10.0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T10:10:47.300

试试这个[链接](https://github.com/ddebin/DDPopoverBackgroundView)

放

`#define DEFAULT_TINT_COLOR [UIColor blackColor];`

至

```
#define DEFAULT_TINT_COLOR [UIColor clearColor]; 
```

# ios6 - Validate text field in table view xcode

> ID：15717151
> 
> 赞同：0
> 
> 时间：2013-03-30T09:48:21.323
> 
> 标签：ios6, xcode4.5

i am new in xcode. In my project i am using table view that has multiple textfields. How to get field value from table view and also how to validate.

Please help me I am in trouble. I need to finish it asap

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T11:01:47.873

您需要弄清楚如何将文本字段的委托设置为某个对象（可能是您的视图控制器），然后您可以在进行验证的同时获取该值。

您可能希望在用户完成输入（或“编辑”）文本字段时进行验证，因此请确保处理文本字段委托方法的对象具有自己的此方法实现：（ 如果文本[`textFieldShouldEndEditing:`](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UITextFieldDelegate_Protocol/UITextFieldDelegate/UITextFieldDelegate.html#//apple_ref/occ/intfm/UITextFieldDelegate/textFieldShouldEndEditing%3a)返回“ ”`NO`字段失败，无论您想验证什么）。

# actionscript-3 - How to define mutidimensional objects in AS3?

> ID：15717152
> 
> 赞同：0
> 
> 时间：2013-03-30T09:48:23.803
> 
> 标签：actionscript-3, object, multidimensional-array

AS3 compiler does not accept object-definition, like this:

```
private var iconList:Object {
            1: {
                leftUp: 10,
                rightBottom: 40,
                downScale: 0.5
            },
            2: {
                leftUp: 50,
                rightBottom: 80,
                downScale: 0.5
            },
            3: {
                leftUp: 90,
                rightBottom: 120,
                downScale: 0.5
            }

        } 
```

How can I make a multidimensional Object()?

I am making a CSS-sprite reader in AS3, and I need to iterate through the image that I load with Loader(). For this, I would like to set up the iteration datas in an Object.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T10:21:11.780

Actually AS3 does support this, you have forgotten an equation sign.

```
private var iconList:Object = { // here
        1: {
            leftUp: 10,
            rightBottom: 40,
            downScale: 0.5
        },
        2: {
            leftUp: 50,
            rightBottom: 80,
            downScale: 0.5
        },
        3: {
            leftUp: 90,
            rightBottom: 120,
            downScale: 0.5
        }

    } 
```

# asp.net - ASP.Net 3.5 密码恢复 SMTP 设置

> ID：15717162
> 
> 赞同：1
> 
> 时间：2013-03-30T09:50:26.267
> 
> 标签：asp.net, passwords

在 ASP.Net 中 - 我正在使用内置的密码恢复向导。

是否有任何方法可以将 SMTP 身份验证添加到邮件身份验证向导 - 而无需将其添加到 web.config？或者可以在代码隐藏的某个地方注入它吗？

我的 aspx 代码如下 - 目前没有代码隐藏：

```
 <asp:PasswordRecovery ID="PasswordRecovery1" runat="server" borderStyle="None" 
        borderWidth="1px"  Font-Size="10pt" Font-Names="Verdana" onsendingmail="PasswordRecovery1_SendingMail">
    <TitleTextStyle BackColor="#6B696B" Font-Bold="True" ForeColor="#FFFFFF" />
    <MailDefinition From="info@mydomain.co.uk" Priority="High" 
        Subject="My Domain - new, temporary password" BodyFileName="forgotpassword.txt">
    </MailDefinition>
    <UserNameTemplate>
        <table border="0" cellpadding="1" cellspacing="0" 
            style="border-collapse:collapse;">
            <tr>
                <td>
                    <table border="0" cellpadding="0">

                        <tr>
                            <td align="center" colspan="2" style="font-family:Arial;font-size:Small;">
                                Enter your User Name to receive your password.</td>
                        </tr>
                        <tr>
                            <td align="right" style="font-family:Arial;font-size:Small;">
                                <asp:Label ID="UserNameLabel" runat="server" AssociatedControlID="UserName">User Name:</asp:Label>
                            </td>
                            <td>
                                <asp:TextBox ID="UserName" runat="server"></asp:TextBox>
                                <asp:RequiredFieldValidator ID="UserNameRequired" runat="server" 
                                    ControlToValidate="UserName" ErrorMessage="User Name is required." 
                                    ToolTip="User Name is required." ValidationGroup="PasswordRecovery1">*</asp:RequiredFieldValidator>
                            </td>
                        </tr>
                        <tr>
                            <td align="center" colspan="2" style="color:Red;">
                                <asp:Literal ID="FailureText" runat="server" EnableViewState="False"></asp:Literal>
                            </td>
                        </tr>
                        <tr>
                            <td align="right" colspan="2">
                                <asp:Button ID="SubmitButton" runat="server" CommandName="Submit" Text="Submit" 
                                    ValidationGroup="PasswordRecovery1" />
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>
    </UserNameTemplate>
</asp:PasswordRecovery> 
```

目前我刚刚收到消息：

> System.Net.Mail.SmtpFailedRecipientException 邮箱不可用。服务器响应是：必须经过身份验证

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T11:05:50.933

该错误意味着您的 SMTP 服务器要求您的应用程序在通过它发送电子邮件之前对其进行身份验证。

您可能正在使用`SmtpClient`引擎盖下。.NET SMTP 客户端的默认值在您的应用程序的配置文件中定义，在本例中是您的 web.config。唯一的其他地方是如果您手动管理，`SmtpClient`因为您处理 PasswordRecovery 控件的事件。

`PasswordRecovery`不公开任何属性来控制底层 SMTP 客户端。

请注意，我强烈建议不要使用`WebControls`它们，因为使用它们意味着您放弃了对应用程序的大量控制：逻辑和演示。我还要注意，您提供的标记是无效的，因为它使用了表示属性，并且`<table>`强烈建议不要使用 for layout。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-07T05:49:58.303

```
protected void Button1_Click(object sender, EventArgs e)
    {
            try
            {
            DataSet ds = new DataSet();
            using (SqlConnection con = new SqlConnection(@"Data Source=.\SQLEXPRESS;AttachDbFilename=D:\database\personal.mdf;Integrated Security=True;Connect Timeout=60;User Instance=True"))
            {
            con.Open();
            SqlCommand cmd = new SqlCommand("SELECT UserName,Password FROM Logintable Where emailid= '" + txtEmail.Text.Trim() + "'", con);
            SqlDataAdapter da = new SqlDataAdapter(cmd);
            da.Fill(ds);
            con.Close();
            }
            if(ds.Tables[0].Rows.Count>0)
            {

                            System.Net.Mail.MailMessage Msg = new System.Net.Mail.MailMessage();
                            // Sender e-mail address.
                            Msg.From = new MailAddress(txtEmail.Text);
                            // Recipient e-mail address.
                            Msg.To.Add(txtEmail.Text);
                            Msg.Subject = "Your Password Details";
                            Msg.Body = "Hi, <br/>Please check your Login Detailss<br/><br/>Your Username: " + ds.Tables[0].Rows[0]["UserName"] + "<br/><br/>Your Password: " + ds.Tables[0].Rows[0]["Password"] + "<br/><br/>";
                            Msg.IsBodyHtml = true;
                            // your remote SMTP server IP.
                            SmtpClient smtp = new SmtpClient();
                            smtp.Host = "smtp.gmail.com";
                            smtp.Port = 587;
                            smtp.Credentials = new System.Net.NetworkCredential("youremail@gmail.com", "N@@@@@@@@");
                            smtp.EnableSsl = true;
                            smtp.Send(Msg);

                            //Msg = null;
                            Label3.Text = "Your Password Details Sent to your mail";
                            // Clear the textbox valuess
                            txtEmail.Text = "";
                    }
                        else
                        {
                              lbltxt.Text = "The Email you entered not exists.";
                        }
                        }
                     catch (Exception ex)
                    {
                        Label2.Text = "Error Occured: " + ex.Message.ToString();

                    }
            }
       } 
```

# java - How to set up local project library for 0.3.0 mapsforge

> ID：15717163
> 
> 赞同：0
> 
> 时间：2013-03-30T09:50:28.793
> 
> 标签：java, android, maps

I am seeking help on the exact procedures on setting up the 0.3.0 mapsforge library. I have downloaded ALL the required classes from the 0.3.0 branch [here](https://code.google.com/p/mapsforge/source/browse/?name=0.3.0), but I am having a problem where I am unsure how to set up the resources for the rendering. Below is my logcat error:

```
03-30 17:02:23.475: E/DatabaseRenderer(17312): org.xml.sax.SAXException: No input specified.
03-30 17:02:23.475: E/DatabaseRenderer(17312):  at org.apache.harmony.xml.ExpatReader.parse(ExpatReader.java:288)
03-30 17:02:23.475: E/DatabaseRenderer(17312):  at org.mapsforge.android.maps.rendertheme.RenderThemeHandler.getRenderTheme(RenderThemeHandler.java:77)
03-30 17:02:23.475: E/DatabaseRenderer(17312):  at org.mapsforge.android.maps.mapgenerator.databaserenderer.DatabaseRenderer.getRenderTheme(DatabaseRenderer.java:66)
03-30 17:02:23.475: E/DatabaseRenderer(17312):  at org.mapsforge.android.maps.mapgenerator.databaserenderer.DatabaseRenderer.executeJob(DatabaseRenderer.java:149)
03-30 17:02:23.475: E/DatabaseRenderer(17312):  at org.mapsforge.android.maps.mapgenerator.MapWorker.doWork(MapWorker.java:73)
03-30 17:02:23.475: E/DatabaseRenderer(17312):  at org.mapsforge.android.maps.PausableThread.run(PausableThread.java:94) 
```

I'm really confused as it seems to be from this line in DatabaseRenderer:

```
private static RenderTheme getRenderTheme(JobTheme jobTheme) {
    InputStream inputStream = null;
    try {
        inputStream = jobTheme.getRenderThemeAsStream(); //THIS LINE 
```

which gets even more confusing when I look at the jobTheme class:

```
public interface JobTheme extends Serializable {
/**
 * @return an InputStream to read the render theme data from.
 * @throws FileNotFoundException
 *             if the render theme file cannot be found.
 */
    InputStream getRenderThemeAsStream() throws FileNotFoundException;
} 
```

I'm very lost on how to debug this as the method as an interface class's method. Thus how is it even possible to call it with a jobTheme object?

Would appreciate any help for this, thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-07T20:59:27.450

我集成了一个地图伪造瓷砖提供者（用作谷歌地图覆盖中的离线地图），我遇到了类似的问题。内置的`InternalRenderTheme.OSMARENDER`只是无法正常工作。

这就是我最终做的事情：

```
/**
 * For some reason, if we just use InternalRenderTheme.OSMARENDER, it fails to work (the XML parser gets a NULL
 * as the input stream).  It must be something to do with class loading in dependent libraries.
 * Anyway, this code properly opens the resource in the MapsForge jar as an input stream.
 */
static private class RenderTheme implements JobTheme
{
    static private final String path = "/org/mapsforge/android/maps/rendertheme/osmarender/osmarender.xml";

    @Override
    public InputStream getRenderThemeAsStream()
    {
        return getClass().getResourceAsStream(path);
    }
} 
```

然后我在初始化我的 tile 提供程序时进行了设置：

```
mapGenerator = new DatabaseRenderer();
mapDatabase = new MapDatabase();
mapGenerator.setMapDatabase(mapDatabase);

jobParameters = new JobParameters(new RenderTheme(), DEFAULT_TEXT_SCALE); 
```

我希望这有帮助。

# file - Using Erlang to read a whole text file into a variable, do text replacement and write modified file to new directory

> ID：15717165
> 
> 赞同：4
> 
> 时间：2013-03-30T09:50:35.327
> 
> 标签：file, erlang, full-text-search, variable-assignment

Problem: want to read content of a file (size less than 1MB) into a Erlang variable, do some text replacement and write modified contents to a new file. I am new to Erlang and want to use simple code with no error handling (use it from Erlang shell).

I have tried:

```
File = file:read_file("pbd4e53e0.html"). 
```

But when using

```
string:len(File). 
```

I get

> exception error: bad argument in function length/1 called as length({ok,<<">}) in call from string:len/1 (string.erl, line 66).

Next step is to do replacement:

```
re:replace(File, "<a href=\'pa", "<a href=\'../pa/pa", [{return, list}]). 
```

Question 1: How should I read the file into an Erlang variable?

Question 2: Is the replacement ok?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-30T10:08:56.317

对于第一个问题，[`file:read_file/1`](http://www.erlang.org/doc/man/file.html#read_file-1)返回一个 元组`{Status, Result}`，因此分配应该是这样的：

```
{ok, File} = file:read_file("pbd4e53e0.html"). 
```

其次，`File`将是二进制文件，而不是字符串，因此您需要先将其转换为字符串：

```
Content = unicode:characters_to_list(File). 
```

（您也可以提供[编码参数](http://www.erlang.org/doc/man/unicode.html#characters_to_list-2)）

然后`string:len(Content)`将按预期工作。

至于替换部分，将正则表达式与 HTML 一起使用通常是一个[非常糟糕的主意](https://stackoverflow.com/a/1732454/770830)，但从 API 的角度来看看起来还不错。

# php - Checking PCNTL extension installed in PHP

> ID：15717168
> 
> 赞同：2
> 
> 时间：2013-03-30T09:51:01.747
> 
> 标签：php, pcntl

One of background scripts in my project uses PCNTL to fork. Also, I have a requirement checker script that should be run by user before script installation. Since pcntl can be accessed only in CGI mode, both `function_exists('pcntl_fork')` and `extension_loaded('pcntl')` return `FALSE` in Web mode, so my checker shows always requirement error, as it launched via browser, even if it is enabled. Is there any method to check `pcntl` support is enabled from web mode?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T15:33:38.273

由于没有人回答，我想我应该指出您可以创建一个独立的 PHP 脚本来检查 pcntl 的存在，然后使用 PHP CLI 运行该脚本，例如使用[exec](http://php.net/manual/en/function.exec.php)或[system](http://www.php.net/manual/en/function.system.php)。

# clojure - How to connect Overtone through Light Table IDE

> ID：15717182
> 
> 赞同：2
> 
> 时间：2013-03-30T09:52:50.227
> 
> 标签：clojure, lighttable, overtone

I'm using Windows 7 64 bit, `light table 0.3.9`, and `lein 2.2.1`, but I have problems connecting to Overtone from Light Table.

```
clojure.lang.Compiler$CompilerException:
java.lang.ClassNotFoundException: overtone.live 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T21:37:57.333

出于好奇，我在我的 Windows 笔记本电脑上安装`JDK 7`并`lein 2.1.2`下载了`light table 0.3.9`.

`lein.bat new insane-noises`首先，我使用命令创建了新的 lein 项目。

然后，我打开 light table ide 并将`insane-noises`目录添加到工作区。

然后，我编辑了我的`project.clj`文件以设置正确的依赖项：

```
(defproject insane-noises "0.1.0-SNAPSHOT"
  :dependencies [ [org.clojure/clojure  "1.4.0"]
                  [overtone             "0.8.1"]]) 
```

然后，我编辑了我的`core.clj`文件：

```
(ns insane-noises.core
  (:use overtone.live))

(demo (sin-osc)) 
```

当我尝试`(demo (sin-osc))`直接从光表编辑器评估线时，它下载了所有依赖项并播放了噪音。

最后，我尝试了灯桌`instarepl`：

```
(use 'overtone.live)
(demo (sin-osc)) 
```

它再次发出同样的声音。

因此，我在 x64 Windows 7 中使用带有 light table ide 的泛音没有遇到任何问题。

检查您的依赖项。可能，您忘记将`overtone`依赖项添加到您的`project.clj`.

# php - Get the values from php formatted in Json with getJSON ajax function?

> ID：15717183
> 
> 赞同：0
> 
> 时间：2013-03-30T09:53:11.067
> 
> 标签：php, javascript, html, json

I have this javascript function code to get the values from StationInfoGenerator.php.But when I want to get the values for passengers (suchs as from, to, arrivalTime,waitingTime), I couldn't put that values to the corresponding div tags in the html page.

```
function sta_callStation() {
    $('#noOfPassengers, #infoOfPassengers, #distType,#distParams').empty();
    $.getJSON('StationInfoGenerator.php', function (station) {
        $.each(station, function (sta_key, sta_value) {
            if (sta_key == "numberOfPassengers") {
                $('#noOfPassengers').append("<strong>Number Of Passengers:       
     </strong>" + sta_value);
            }
            if (sta_key == "passengers") {
                $('#infoOfPassengers').append("<strong>Passengers Information:</strong>" + '<br/>');
                $.each(sta_key.passengers.parameters, function (i, parameters) {
                    $.each(parameters, function (par_key, par_value) {
                        $('#infoOfPassengers').append(par_key + ': ' + par_value + '  ' + '<br/>');
                    });
                });
            }
            if (sta_key == "distType") {
                $('#distType').append("<strong>Dağılım Tipi:</strong>" + sta_value);
            }
        });
    });
} 
```

Here is the html code part.In this part when I choose some station I must get the number of passengers ,passengers information, distribution type and params.For now I can get the numberOfPassengers from php.In php, all values are produced randomly.

```
<select name="selectStation" class="span12" onchange="sta_callStation();">
    <option value="noStation">Bir istasyon seçiniz.</option>
    <option value="station1">Station 1</option>
    <option value="station2">Station 2</option>
    <option value="station3">Station 3</option>
    <option value="station4">Station 4</option>
    <option value="station5">Station 5</option>
  </select>

      <div id="noOfPassengers"><strong>Number Of Passengers:</strong></div>
      <p><i class="icon-user"></i>  <i class="icon-user"></i>  <i class="icon-user"> 
  </i></p>
      <div id="infoOfPassengers"></div>
      <div id="distType"></div>
      <div id="distParams"></div> 
```

Php jsonSerialize part:

```
 public function jsonSerialize()
{
    $data = array();
    $data['from'] = $this->from;
    $data['to'] = $this->to;
    $data['arrivalTime'] = $this->arrivalTime;
    $data['waitingTime'] = $this->waitingTime;
    return $data;
} 
```

The output in the web page:

```
Number Of Passengers:5

Passengers Information: 
```

How can I show the passengers info? Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T11:35:58.030

```
function sta_callStation()
  {
    var distName;
    $('#noOfPassengers, #infoOfPassengers, #distType,#distParams').empty();

    $.getJSON('StationInfoGenerator.php', function(station){

        $.each(station, function(sta_key, sta_value) {

        if(sta_key=="numberOfPassengers") {

        $('#noOfPassengers').append("<strong>Number Of Passengers: 
 </strong>"+sta_value);

           }

        if(sta_key=="passengers")
        {

          $('#infoOfPassengers').append("<strong>Passengers Information:     
     </strong>"+'<br/>');

          $.each(station.passengers, function(i,passenger) {

           $.each(passenger, function(par_key, par_value) {

              $('#infoOfPassengers').append(par_key+': '+par_value+'  '+'<br/>');
         });
           $('#infoOfPassengers').append('<hr />');
        });

        }

        if(sta_key=="distType") 
        {

          if(sta_value=="1"){
            distName="Uniform";
          }
          if(sta_value=="2"){
            distName="Normal";
          }
          if(sta_value=="3"){
            distName="Üstel";
          }
          if(sta_value=="4"){
            distName="Geometric";
          }

        $('#distType').append("<strong>Distribution Type:</strong>"+sta_value+"<br/>"+"<strong>Distribution Name:</strong>"+distName);

      }
        if(sta_key=="distParams") 
        {

         $('#distParams').append("<strong>Distribution Parameters:</strong>"+'<br/>');

            $.each(station.distParams, function(params_key, params_value) {

              $('#distParams').append(params_key+': '+params_value+'  '+'<br/>');
              //$('#distParams').append('<hr />');
         });

        }
      });

  });
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T10:04:55.717

```
public function jsonSerialize()
{
    $data = array();
    $data['from'] = $this->from;
    $data['to'] = $this->to;
    $data['arrivalTime'] = $this->arrivalTime;
    $data['waitingTime'] = $this->waitingTime;
    return json_encode($data);
} 
```

# svn - How to get rid of this large svn revision file

> ID：15717188
> 
> 赞同：1
> 
> 时间：2013-03-30T09:53:41.133
> 
> 标签：svn

```
-rw-r–r– 1 www-data www-data 11G Mar 26 10:06 /home/repos/db/revs/121129 
```

content in this revs (121129) file is not required.

Can I truncate ">/home/repos/db/revs/121129" or edit this file directly? Will this effects other revision create after this revision. my current running rev is 121406

Please let me know how to get rid of this revision as it effecting my backup and maintenance. currently I am excluding this file from my tar backup.

Any alternative for svndumpfilter?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T10:14:34.617

不，您不能删除这样的修订文件，我自己尝试过，但最终进入了损坏的存储库。据我所知，问题在于 svn 有一个它知道的所有文件的索引，如果你提交的文件恰好与以前的文件相同，新修订版将有一个指向旧文件的指针，而不是复印件。

所以我强烈推荐你使用 svndumpfilter。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T11:11:37.707

svndumpfilter*是*删除修订的适当（也是唯一）方法。

您当前的备份过程会给您留下一个损坏/不可用的存储库。IOW，您的备份毫无用处 - 与根本没有备份相比仅差一步。

# css - 绝对 div 内的 100% div，没有宽度和固定高度

> ID：15717191
> 
> 赞同：0
> 
> 时间：2013-03-30T09:53:55.840
> 
> 标签：css, html, absolute

我需要一个绝对定位的 div 并包含两个子 div：一个带有顶部的文本，一个带有底部的背景颜色。像这样：

```
<div class="test1">
    <div class="caption">Text that determines width of parent.</div>
    <div class="bg"></div>
</div> 
```

我知道我可以在 .test1 上设置背景颜色，但我需要将此背景作为单独的 div，以便使用 jQuery 向后兼容（IE 7+）控制位置、不透明度、宽度等。

使用下面的 CSS，我可以让一切正常工作，除了文本位于 .bg div 后面。我需要上面的文字。

```
<style type="text/css">
.test1 {
    position: absolute;
    left: 100px;
    top: 100px;
}
.test1 .caption {
    float: left;
    white-space: nowrap;
}
.test1 .bg {
    height: 50px;
    background-color: #222;
}
</style> 
```

如何使 .test1 的宽度基于文本的宽度，并使 .bg div 为 100% 宽度并位于 .caption 下方？我应该重复一遍，这需要在 IE 7 及更高版本中工作。

这是一个小提琴：http: [//jsfiddle.net/kbp6r/](http://jsfiddle.net/kbp6r/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T10:03:17.693

For the positioning problem, you'll have to rely on the magic of `z-index` ;) it is applicable to elements that have a non-static position (default is `position: static`). Therefore, have you considered absolutely positioning the `.bg` element, and relatively positioning the `.caption` element?

```
.test1 .caption {
    position: relative;
    white-space: nowrap;
    z-index: 2; /* More than .bg so it will be above */
}
.test1 .bg {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 1; /* Less than .caption so it will be stacked underneath */
} 
```

In order to force the `.bg` element to be of the same dimension as `.caption`, you can use the dirty positioning trick - when an absolutely positioned element has the following properties declared:

```
top: 0;
left: 0;
bottom: 0;
right: 0; 
```

It will fill to the size of the parent container - and in this case, the size of the parent container is determined by the content in `.caption`, since you have used a relative position for it (per my recommendation).

Here is a fiddle that shows how it works: [http://jsfiddle.net/teddyrised/kbp6r/2/](http://jsfiddle.net/teddyrised/kbp6r/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T10:12:50.620

Change your html as like below.

```
<div class="test1">
   <div class="bg">
      <div class="caption">Text that determines width of parent.</div>
   </div>
</div> 
```

# html - div problems at 100% width and 100% height

> ID：15717209
> 
> 赞同：2
> 
> 时间：2013-03-30T09:56:52.903
> 
> 标签：html, css, flash, scrollbars

I'm having this problem for over a year, and still didn't find the answer. So thank you in advance for helping me out!

I have a SWF embedded in HTML (it is placed in a div) and putted width and height at 100% (to make the flash file cover the whole screen). This works fine! But if you resize your browser the flash file gets (obviously) too small to read anything.

Is it possible to stop scaling the content when it is smaller than, for example, 200px, and replace it with scrollbars?

Thanks in advance! Tom

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T09:58:32.443

只需添加到您的 CSS：

```
min-width: 200px; 
```

如果您需要限制元素的高度：

```
min-height: 200px; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T09:24:05.470

你试过这个吗.....

html

```
<div id="container">

  /* content */

</div> 
```

css

```
#container {
        width: 100%;
}

@media only screen and (max-width: 480px) {
#container {
        width: 200px;
}

} 
```

# mysql - MySQL 查询优化左连接索引存在

> ID：15717210
> 
> 赞同：1
> 
> 时间：2013-03-30T09:56:56.667
> 
> 标签：mysql, optimization, indexing

我正在努力优化 MySQL 查询。

```
select * 
from course as t1 
left join semester as t3 on t1.semester=t3.id 
where t1.visibleFrom <= '1364621522' 
and '1364621522' <= t1.visibleTo 
order by t3.begin desc, t1.name; 
```

这是通过`EXPLAIN`对课程表使用 ALL 查询来报告的。该表有几个不同的索引（visibleFrom、visibleTo、两者的组合、名称、学期）。`name`是一个 varchar 列，`begin`和`visibleFrom`是`visibleTo`也可以为空的整数。

如果我忽略加入`t3`并强制使用索引名称，它会以某种方式工作。

任何想法为什么这个查询不使用索引？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T10:21:36.137

我认为WHERE中范围限制的重要索引是visibleFrom和visibleTo两列的索引，即

```
ALTER TABLE `course` ADD INDEX ( `visibleFrom` , `visibleTo` ); 
```

如果 MySQL 没有在您的查询中使用它，我的猜测是 course 表的行数少于 ~ 100 行。因此，由于开销，MySQL 查询优化器决定不使用索引。只要课程表包含数百行，就应该使用索引。

# c# - 如何将 observablecollection 成员连接到应用程序资源 (resx) 文件

> ID：15717212
> 
> 赞同：0
> 
> 时间：2013-03-30T09:57:12.343
> 
> 标签：c#, silverlight, windows-phone-7, windows-phone-8

嘿伙计们，首先对不好的解释感到抱歉。我的任务是翻译我不久前写的一个应用程序，一般没什么特别的。

但现在我正处于一个关键点。我的应用程序的一项功能是保存历史记录。为此，我创建了一个基本类。

```
 public class GHistoryClass
    {
       public GHistoryClass(string act, string icop, string categ, string desc,)
        {
            this.m_Action = act;
            this.m_IconPath = icop;
            this.m_Description = desc;
            this.m_Category = categ;

        }
        public string m_Action { get; set; }
        public string m_Description { get; set; }
        public string m_Category { get; set; }
        public string m_IconPath { get; set; }
    } 
```

我正在保存历史，就像`ObservableCollection`在`IsolatedStorage`. 当语言改变时，我想翻译历史。

我想不通，例如如何连接`m_Action`到`localized resourses`.

任何想法将不胜感激。

**编辑**

我认为应该做的是将`AppResources`属性名称的名称保存为字符串，所以`m_Action = "AppResources.firstaction"`我的想法是将其转换为`PropertyPath`. 这是一个好主意，我如何转换`string`为`object`名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T10:03:40.927

将资源 (resx) 文件添加到项目时，最终会为每个资源生成一个属性。

```
internal class MyResources
{
    // other properties etc

    internal static string SomeLabel 
    {
        get
        {
            return ResourceManager.GetString("SomeLabel", resourceCulture);
        }
    }
} 
```

通常你会像这样使用这个资源：

```
string label = MyResources.SomeLabel; 
```

但你不必这样做。相反，您可以直接访问 ResourceManager：

```
string label = MyResources.ResourceManager.GetString(m_Action); 
```

# iphone - 按钮以 3.5 英寸格式 (Xcode) 消失。

> ID：15717215
> 
> 赞同：0
> 
> 时间：2013-03-30T09:57:58.943
> 
> 标签：iphone, ios

在`.xib file`Xcode 中，我的 App 在视图底部有一个按钮。

我在 iPhone 5 的 4 英寸大小中构建界面，但如果我在视图底部放置一个按钮，我会看到该按钮不再出现在 3.5 英寸 iPhone 模拟器中。如何确保按钮也正好在 3.5 英寸格式下并且按钮不会消失？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T11:25:01.200

如果您使用 XIB 或 Storyboard 创建 UIButton，请转到按钮的大小检查器。您可以从此处设置自动调整下边距。

![自动调整蒙版](../Images/ecc521141ff406e307ad4f0e43ed438f.png)

您也可以以编程方式进行。

# sql - 联合、例外或拦截以在选择中使用默认数据？

> ID：15717219
> 
> 赞同：2
> 
> 时间：2013-03-30T09:58:36.133
> 
> 标签：sql, sql-server, tsql, select

我有三个表，一个是默认值表。

我需要做的是选择 TableA 和 TableB 的值，并从默认值的选择中回填任何缺失值。

每个表都有一个 Key 和 Value 列。

数据示例可能如下所示：

```
DefaultTable
-------------
Key1 | Value1  
Key2 | Value2  
Key3 | Value3  
Key4 | Value4  
Key5 | Value5  

TableA
--------------
Key3 | AValue3
Key5 | AValue5

TableB
--------------
Key1 | BValue1 
```

所以我的最终数据集需要如下所示：

```
Key1 | BValue1  
Key2 | Value2  
Key3 | AValue3  
Key4 | Value4  
Key5 | AValue5 
```

我玩过各种连接，但似乎无法破解它，我们将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T10:01:01.233

您可以`LEFT JOIN`在此使用。

```
SELECT  a.Column1,
        COALESCE(b.Column2, c.Column2, a.Column2) Column2
FROM    DefaultTable a
        LEFT JOIN TableA b
            ON a.Column1 = b.Column1
        LEFT JOIN TableB c
            ON a.Column1 = c.Column1 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/e29b8/1)

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

输出

```
╔═════════╦═════════╗
║ COLUMN1 ║ COLUMN2 ║
╠═════════╬═════════╣
║ Key1    ║ BValue1 ║
║ Key2    ║ Value2  ║
║ Key3    ║ AValue3 ║
║ Key4    ║ Value4  ║
║ Key5    ║ AValue5 ║
╚═════════╩═════════╝ 
```

* * *

从此链接引用：[与postgresql的性能比较：left join vs union all](https://stackoverflow.com/questions/12420950/performance-comparison-with-postgresql-left-join-vs-union-all)（*我希望与postgresql相同`SQL Server`*）。

> 使用 LEFT JOIN 的查询最适合利用索引。例如，如果您想要一个排序的结果，那么 UNION 查询将是最慢的。或者，如果您的查询是主查询中的子查询，则 UNION 将阻止对表 [元素] 索引的任何可能利用。因此，执行此类子查询的 JOIN 或 WHERE 会很慢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T10:15:41.597

首先将您之前的两个表中的值`RIGHT JOIN`（与 相同的效果`LEFT JOIN`）合并到默认值可能更有效：

```
SELECT d.key_col
      ,COALESCE(t.value, d.value) AS value
FROM  (
    SELECT key_col, value FROM tbl_a
    UNION ALL
    SELECT key_col, value FROM tbl_b
    ) t
RIGHT  JOIN default_tbl d ON t.key_col = d.key_col; 
```

正如您在评论中提供的那样，我使用, 因为和`UNION ALL`之间不能重叠。`tbl_a``tbl_b`

[**->SQLfiddle**](http://www.sqlfiddle.com/#!3/35662/3)

# c - 如何使用系统调用在c中确定两个文件是否相同

> ID：15717221
> 
> 赞同：-3
> 
> 时间：2013-03-30T09:59:23.833
> 
> 标签：c, linux, file, system-calls, stat

我需要查看 2 个文件是否相同，所以我使用了 struct stat

```
 fdin = open(argv[0],O_RDONLY);
    statos= fstat(fdin, &stat);
    close(fdin);
    fdin = open(argv[1],O_RDONLY);
    statos1= fstat(fdin, &stat1);
    close(fdin);
    printf("file 1 is in size: %lu\n",stat1.st_ino);
    printf("file 2 is in size: %lu\n",stat.st_ino); 
```

结果

```
file 1 is in size: 9569486
file 2 is in size: 9569479 
```

为什么 st.ino 对于具有相同路径的相同文件不同？如果两个不同的文件相同，我该怎么做，我可以用系统调用检查它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T10:08:10.210

这是因为您正在打开两个不同的文件：

```
./a.out ab.txt ab.txt 
```

`argv[0]`是可执行文件，`argv[1]`是'ab.txt'。

如果您将错误检查放入代码中，那就很清楚了。

出于某种原因，您还将 inode 打印为“大小”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T10:03:01.380

`st_ino`是文件的 inode 号字段，inode 号是每个文件结构的唯一标识符。inode 结构保存 stat 调用返回的有关文件的信息。

您想要的字段是`st_size`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T10:50:57.770

您没有定义***相同文件*****对您意味着****什么***。*

 *在 Unix 或 Linux（或 Posix）上，在符合 Posix 的文件系统（如[ext4](http://en.wikipedia.org/wiki/Ext4)或[btrfs](http://en.wikipedia.org/wiki/Btrfs)但不是[FAT32](http://en.wikipedia.org/wiki/Vfat#FAT32)）内，一个文件可以没有、一个或多个文件路径。所以文件路径指的是[inode](http://en.wikipedia.org/wiki/Inode)。然后，如果两个文件路径指向同一个 inode（在同一个文件系统中），则它们引用同一个底层文件。

您可以使用[stat(2)](http://man7.org/linux/man-pages/man2/stat.2.html)系统调用来获取某个文件路径的设备（即文件系统）`st_dev`和 inode 编号`st_ino`。然后你应该比较它们。

或者，您可以想象*相同的文件*对您来说意味着具有相同内容的文件。这是一个定义不明确的定义：文件的内容可能会发生变化（因为它同时被写入 - 通过[write(2)](http://man7.org/linux/man-pages/man2/write.2.html)，通过一些[mmap(2)](http://man7.org/linux/man-pages/man2/mmap.2.html) -ing，等等...... - 由其他一些进程）阅读它。所以*严格意义上* **比较文件内容**（这是一项昂贵的操作）**没有意义**：在比较过程中，**内容可以被*其他*进程**更改。

如果您错误地忽略了文件内容可以更改的事实（因为在您读取文件的同时另一个进程正在写入文件），您可以读取两个文件并比较每个字节（同时考虑文件结尾）。像这样简单的东西：

```
 FILE *f1 = fopen(path1, "r");
 if (!f1) {  perror(path1); exit(EXIT_FAILURE);  };
 FILE *f2 = fopen(path2, "r");
 if (!f2) {  perror(path2); exit(EXIT_FAILURE);  };
 bool samefile = true;
 int c1, c2;
 while (samefile && ((c1 = getc(f1)) != EOF) || (c2 = getc(f2)) != EOF))
    if (c1 != c2) samefile = false;
 fclose (f1), fclose (f2); 
```

^(您可以通过首先比较`f1`和`f2`使用[fseek(3)](http://man7.org/linux/man-pages/man3/ftell.3.html)的大小和`ftell(3)`)

你也可以使用普通`open(2)`的and`read(2)`和`close(2)`系统调用，确保将块（例如4Kbytes）读入缓冲区（每个文件一个），并注意文件结束条件，并检查错误。

正如其他人指出的那样，您的程序明显是错误的，因为`argv[0]`它是程序的命令名称。*

# android - 如何使用 android-undergarment 库

> ID：15717228
> 
> 赞同：-1
> 
> 时间：2013-03-30T10:00:58.780
> 
> 标签：android, android-widget, slidingdrawer, slidingmenu

我正在尝试使用 android-undergarment 库来创建侧边菜单，但我似乎无法弄清楚如何将项目添加到我提供给构造函数的列表视图布局中。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T10:37:18.217

嗯，终于知道怎么做了。

```
ListView view = (ListView)mDrawerGarment.findViewById(R.id.sideMenuList);
    List<String> menuItems = new ArrayList<String>();
    menuItems.add("One");
    menuItems.add("two");
    menuItems.add("three");
    menuItems.add("four"); 
```

# amazon-s3 - 为 head 和 get 动词预签名 Amazon S3 url

> ID：15717230
> 
> 赞同：28
> 
> 时间：2013-03-30T10:01:02.333
> 
> 标签：amazon-s3, amazon

我在 Amazon S3 上托管我想使用[预签名 urls](http://docs.aws.amazon.com/AmazonS3/latest/dev/RESTAuthentication.html#RESTAuthenticationQueryStringAuth)访问的文件。

对于简单的 GET 请求，这非常有效。然而，有一些客户端首先执行 HEAD 请求（以检索文件大小）。由于 URL 中的签名包含 http 动词（GET 与 HEAD），因此头部请求失败。

客户只是这样做：

```
HEAD http://(bucketname).s3.amazonaws.com/filename?AWSAccessKeyId=(mykey)&Expires=(timestamp)&Signature=(sig)
GET http://(bucketname).s3.amazonaws.com/filename?AWSAccessKeyId=(mykey)&Expires=(timestamp)&Signature=(sig) 
```

我无法更改客户端以使用不同的 URL 作为 head 和 get。有没有办法让亚马逊使用接受 HEAD 和 GET 同一资源的签名？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2016-09-23T14:22:23.070

如果您只为第一个字节指定标头，您也可以模拟`HEAD`行为。不同之处在于您收到的是代码而不是代码。其次，全尺寸将在标题中。`GET``Range``206``200``Content-Range`

`curl -r 0-0 <URL>`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-30T21:26:53.150

不`HEAD`，`GET`需要不同的签名，因为签名输入存在细微差别。

不确定您使用什么来生成预签名的身份验证 URL，但我知道一些官方的 AWS 开发工具包可以处理这个问题，而其他的还*没有*。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-01-12T21:31:11.563

在朋友的帮助下，我找到了一个适合我的解决方案：在我的服务器上代理 HEAD 请求，并重定向 GET 请求。

当请求带有 HEAD 动词以获取文件信息时，我使用服务器上的 S3 代码获取 HEAD 信息，然后我自己将其发送回请求者。

当请求带有 GET 动词以获取文件本身时，我使用预签名 URL 执行 302 重定向。

这可以完美地处理 HEAD 和 GET，无需预先签名。我只对实际文件的 GET 请求进行预签名。

# java - 如何在 Maven 中编译 Java 枚举？

> ID：15717232
> 
> 赞同：0
> 
> 时间：2013-03-30T10:01:09.543
> 
> 标签：java, maven, maven-3, maven-plugin, jdk1.6

最近我正在使用 maven 3.x、Eclipse Juno JavaEE IDE 和 JDK 1.6.0_26。在我的项目中，我在课堂内外都使用了枚举。当我运行 clean build 时出现错误

```
[ERROR] found   : my.package.MyClass.MyEnum
[ERROR] required: my.package.MyClass.MyEnum 
```

然后我确保`my/package/MyClass.java`需要先编译所以我添加了

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-compiler-plugin</artifactId>
    <version>2.3.2</version>
    <configuration>
        <source>1.6</source>
        <target>1.6</target>
    </configuration>
    <executions>
        <execution>
            <id>default-compile</id>
            <goals>
                <goal>compile</goal>
            </goals>
            <configuration>
                <excludes>
                    <exclude>**/*.*</exclude>
                </excludes>
                <includes>
                    <include>**/MyClass.java</include>
                </includes>
            </configuration>
        </execution>
        <execution>
            <id>second</id>
            <goals>
                <goal>compile</goal>
            </goals>
            <configuration>
                <includes>
                    <include>**/*</include>
                </includes>
                <excludes>
                    <exclude>**/MyClass.java</exclude>
                </excludes>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

在那之后，希望它不会工作。这对我来说非常烦人。如果我必须在我的应用程序中使用枚举，我将如何克服它。有人试图在他们的博客中证明这是错误 java 1.6.0_26 并在 JDK 7 中修复。如果是这样，则无法迁移到 JDK 7.x。使用 Eclipse JNO Java EE 使用 maven 3.x 解决此问题的任何方法。

```
package com.formativesoft.mcserp.validator;

public class Validator {

    public enum Lang {
        EN, BN;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T11:01:31.553

您不需要编译执行噱头。如果您的枚举用于定义它的同一工件中，那么您不需要做任何特别的事情。我猜这只是一些暂时的故障。从您的 pom 配置中删除目标定义排除疯狂，从控制台对您的项目运行 mvn clean install ，几乎可以肯定您不会遇到问题。如果您这样做，请包含错误消息，以便我们进一步帮助您。

# php - PHPExcel 出错

> ID：15717237
> 
> 赞同：1
> 
> 时间：2013-03-30T10:01:33.437
> 
> 标签：php, phpexcel

我正在尝试以 excel 即 XLS 格式导出 mysql 数据库表，我尝试使用 php 代码获取 excel 格式的结果，但由于某种原因或缺少某些术语，我无法完成，这是我的 php 代码：

```
<?php

// connection with the database
$dbcon = mysql_connect("127.0.0.1","root","mim");

if($dbcon)
{
    mysql_select_db("mydb", $dbcon);
}
else
{
    die('error connecting to the database');
}

// require the PHPExcel file
require 'Classes/PHPExcel.php';

$query = "
    SELECT name
    FROM usermaster
    WHERE date between '2013-01-01' AND '2013-03-01'
";
$result = mysql_query($query) or die(mysql_error());         

// Create a new PHPExcel object
$objPHPExcel = new PHPExcel();
$objPHPExcel->getActiveSheet()->setTitle('Name');

// Loop through the result set
$row = 1;
while ($row = mysql_fetch_row($result)) {
    $col = 0;
    foreach($row as $name) {
        $objPHPExcel->getActiveSheet()->setCellValue($col.$row,$name);
        $col++;
    }
    $row++;
}

// Save as an Excel BIFF (xls) file
$objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'Excel5');

header('Content-Type: application/vnd.ms-excel');
header('Content-Disposition: attachment;filename="myFile.xls"');
header('Cache-Control: max-age=0');

$objWriter->save('php://output');
exit();

?> 
```

获得一个空白页面......任何形式的帮助都会受到赞赏和接受......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T10:50:20.000

setCellValue() 需要一个 Excel 单元格地址（例如 A1、B2、C3，其中列 ID 是字母 ID，后跟行号）作为第一个参数。您使用数字（从 0 开始）作为列 ID。

不要将初始列 ID 设置为 0，而是将其设置为“A”：

```
$row = 1;
while ($row = mysql_fetch_row($result)) {
    $col = 'A';
    foreach($row as $name) {
        $objPHPExcel->getActiveSheet()->setCellValue($col.$row,$name);
        $col++;
    }
    $row++;
} 
```

# apache - Apache Nutch 2.1 - How get complete source code

> ID：15717239
> 
> 赞同：1
> 
> 时间：2013-03-30T10:02:24.473
> 
> 标签：apache, tags, nutch, web-crawler

I am trying to write my own Nutch plugin for crawling webpages. The problem is that I need to identify if there is some special tag, e.g. on the webpage. There is some note in official documentation that this is possible using Document.getElementsByTagName("foo") but this is not working for me. Do you have any idea?

My second question is that if I identified tag above, I would like to get some other tags from this webpage where tag was identified... is there any way to store complete source code of the webpage which is crawled at some moment?

Thanks, Jan.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T12:27:29.390

If you want to extract content based on an HTML tag, you could look at the xpath-filter plugin: [http://www.atlantbh.com/precise-data-extraction-with-apache-nutch/](http://www.atlantbh.com/precise-data-extraction-with-apache-nutch/) You can write an xpath query and configure it in the plugin to extract the information you need.

Another option is to write a plugin (as you are doing at the moment) and use an HTML/XML parser to get the information out. Here's what I have done when I needed to extract some content out of a specific div:

```
 @Override
  public NutchDocument filter(NutchDocument doc, Parse parse, Text url, CrawlDatum datum, Inlinks inlinks) throws IndexingException {

        //LOG.info("filter init: ");
        Metadata metadata = parse.getData().getParseMeta();
        String fullContent = metadata.get("fullcontent");

        Document document = Jsoup.parse(fullContent); 
        Element contentwrapper = document.select("div#content").first();

        //LOG.info("fullcontent");
        //LOG.info(contentwrapper);

        // Add field
        doc.add("contentwrapper", contentwrapper.text());

        return doc;
  } 
```

# java - 如何将字符串转换为 BigInteger？

> ID：15717240
> 
> 赞同：90
> 
> 时间：2013-03-30T10:02:25.767
> 
> 标签：java, string, biginteger

我正在尝试从标准输入中读取一些非常大的数字并将它们加在一起。

但是，要添加到 BigInteger，我需要使用`BigInteger.valueOf(long);`：

```
private BigInteger sum = BigInteger.valueOf(0);

private void sum(String newNumber) {
    // BigInteger is immutable, reassign the variable:
    sum = sum.add(BigInteger.valueOf(Long.parseLong(newNumber)));
} 
```

这工作正常，但作为`BigInteger.valueOf()`唯一需要 a `long`，我不能添加大于`long`最大值（9223372036854775807）的数字。

每当我尝试添加 9223372036854775808 或更多时，我都会收到 NumberFormatException （这是完全可以预料的）。

有没有类似的东西`BigInteger.parseBigInteger(String)`？

* * *

## 回答 #1

> 赞同：150
> 
> 时间：2013-03-30T10:03:54.207

使用构造函数

> 大整数（字符串值）
> 
> 将 BigInteger 的十进制字符串表示形式转换为 BigInteger。

[Javadoc](http://docs.oracle.com/javase/6/docs/api/java/math/BigInteger.html#BigInteger%28java.lang.String%29)

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-03-30T10:07:36.583

根据[文档](http://docs.oracle.com/javase/7/docs/api/java/math/BigInteger.html)：

> **大整数（字符串值）**
> 
> 将 BigInteger 的十进制字符串表示形式转换为 BigInteger。

这意味着您可以使用 a`String`来初始化`BigInteger`对象，如以下代码段所示：

```
sum = sum.add(new BigInteger(newNumber)); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-03-30T10:12:11.283

BigInteger 有一个构造函数，您可以在其中将字符串作为参数传递。

试试下面，

```
private void sum(String newNumber) {
    // BigInteger is immutable, reassign the variable:
    this.sum = this.sum.add(new BigInteger(newNumber));
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2016-07-01T11:55:38.860

您可以直接使用带有字符串参数的 BigInteger 构造函数，而不是使用`valueOf(long)`and ：`parse()`

```
BigInteger numBig = new BigInteger("8599825996872482982482982252524684268426846846846846849848418418414141841841984219848941984218942894298421984286289228927948728929829"); 
```

那应该给你想要的价值。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-10-01T02:47:24.223

对于要将 of 转换为 of 的循环，请执行以下`array`操作：`strings``array``bigIntegers`

```
String[] unsorted = new String[n]; //array of Strings
BigInteger[] series = new BigInteger[n]; //array of BigIntegers

for(int i=0; i<n; i++){
    series[i] = new BigInteger(unsorted[i]); //convert String to bigInteger
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-04-15T12:57:40.887

如果您可能想将纯文本（不仅仅是数字）转换为 BigInteger，您将遇到异常，如果您只是尝试： new BigInteger("not a Number")

在这种情况下，您可以这样做：

```
public  BigInteger stringToBigInteger(String string){
    byte[] asciiCharacters = string.getBytes(StandardCharsets.US_ASCII);
    StringBuilder asciiString = new StringBuilder();
    for(byte asciiCharacter:asciiCharacters){
        asciiString.append(Byte.toString(asciiCharacter));
    }
    BigInteger bigInteger = new BigInteger(asciiString.toString());
    return bigInteger;
} 
```

# c# - 如何防止 AJAX 导航离开 WP7 中 WebBrowser 控件中的页面

> ID：15717243
> 
> 赞同：2
> 
> 时间：2013-03-30T10:02:55.170
> 
> 标签：c#, windows-phone-7, browser, windows-phone

我有一个页面加载到我的`webBrowser`控件上，并且我想根据某些条件阻止导航到某个 URL。然而，所有这些导航都是异步的，通过 AJAX。我曾尝试使用`e.Cancel = true;`来防止导航离开，但它仍然会导航离开。我能做些什么来防止这种导航？

```
 private void webBrowser_Navigating(object sender, Microsoft.Phone.Controls.NavigatingEventArgs e)
    {
        MessageBox.Show("Navigating"); //This gets executed during AJAX navigation, which means the Navigating event occurs even during AJAX navigations
        if (e.Uri.ToString().Contains("#!/restricted"))
        {
            MessageBox.Show("URL Found. Trying to cancel"); //This also gets executed when navigating away to that specific link. AJAX link, like ../index.php#!/restricted.php
            e.Cancel = true;
            return;
        }
     } 
```

执行后在 MessageBox 中打印`webBrowser.Source.ToString()`仍将第一个 URL 显示为 webBrowser 的源，就好像它根本没有导航一样，尽管它仍然导航走了。禁用 JavaScript 不是一种选择，因为主页的其他一些元素仍然需要 JavaScript。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-23T10:05:41.180

您可以尝试编辑页面的 JS 代码并从中删除所有 ajax 导航。

# jquery - div在IE8中不可见

> ID：15717245
> 
> 赞同：0
> 
> 时间：2013-03-30T10:03:03.680
> 
> 标签：jquery, html, css, internet-explorer, cross-browser

我正在尝试使用 css`display`属性显示一个 div。

`#divbar`和的内容`#divline`是使用 AJAX 动态设置的。

`#divbar`此代码在 Firefox 和 Chrome 中完美运行，但在 IE 8 中，即使*切换*按钮完美运行，我也无法看到内容。

**HTML：**

```
<div id="divline" style="float:left;">
    <div id="jqChart2" class="charts"></div>
</div>

<div id="divbar" style="float:left">
    <div id="jqChartb2" class="charts"></div>
</div> 
```

**jQuery :**

```
$("#toggle_button1").click(function(){
    $("#toggle_button1").css({'display':'none'});
    $("#toggle_button2").css({'display':'block'});
    $("#divline").css({'display':'block'});
    $("#divbar").css({'display':'none'});
});

$("#toggle_button2").click(function(){
    $("#toggle_button2").css({'display':'none'});
    $("#toggle_button1").css({'display':'block'});
    $("#divline").css({'display':'none'});
    $("#divbar").css({'display':'block'});
}); 
```

**CSS：**

```
#toggle_button1{
    display:block;
    width:100px;
}
#toggle_button2{
    display:none;
    width:100px;
}
#divline{
    display:block;
}
#divbar{
    display:none;
} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T10:11:21.880

我认为在以下代码中：

```
<div id="divbar" style="float:left">
<div id="jqChartb2" class="charts" >      </div>
</div> 
```

问题与

```
<div id="jqChartb2" class="charts" >      </div> 
```

请尝试其他内容而不是它例如：

```
<div id="divbar" style="float:left">
Test
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T12:59:43.590

检查您是否在 IE8 上启用了 JavaScript？

在您的 ie8 浏览器中尝试以下方式

```
Click ‘Tools’ on the menu bar’
Select ‘Internet Options’
Click the ‘Security’ tab
Click the ‘Custom Level’ button
Scroll to the ‘Scripting’ section 
Select ‘Enable’ to enable whichever JavaScript activities you want to work. 
```

# android - 在android中显示两个图像一个在另一个图像上方

> ID：15717249
> 
> 赞同：0
> 
> 时间：2013-03-30T10:03:46.753
> 
> 标签：android, android-layout

我为正在使用的每个网格都有一个自定义网格视图

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<View
    android:layout_width="fill_parent"
    android:layout_height="30sp"
    android:layout_marginTop="85sp"
    android:background="@drawable/shelf" />

<ImageView
    android:id="@+id/imgThumb"
    android:layout_width="47.5sp"
    android:layout_height="76sp"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="29sp"
    android:background="@drawable/pic1" />

<ImageView
    android:id="@+id/bookCover"
    android:layout_width="60sp"
    android:layout_height="80sp"
    android:layout_marginLeft="127sp"
    android:layout_marginTop="26sp"
    android:background="@drawable/book_cover" /> 
```

**在 Eclipse 中的图形布局之前看起来像这样** ![在此处输入图像描述](../Images/1a9bc462437e420046dde0171a689fde.png)

**但是当我在模拟器上运行它时，它看起来像** ![在此处输入图像描述](../Images/2725601a8c23f655929f93b0f69b0e35.png)

书籍封面图片不见了我是android新手请不要问题出在哪里以及如何解决

** FrameLayout 也不起作用**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T10:10:38.780

使用下面的代码

```
 <RelativeLayout
            android:id="@+id/dummy"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            >

            <ImageView
                android:id="@+id/pitch"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:background="@drawable/pic1"
                android:scaleType="fitXY" />

            <ImageView
                android:id="@+id/image1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="80sp"
                android:layout_marginTop="50sp"
                android:background="@drawable/book_cover" />
        </RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T10:07:26.810

尝试更改如下：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/shelf" >

<ImageView
    android:id="@+id/imgThumb"
    android:layout_width="47.5sp"
    android:layout_height="76sp"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="29sp"
    android:background="@drawable/pic1" />

<ImageView
    android:id="@+id/bookCover"
    android:layout_below="@id/imgThumb"
    android:layout_width="60sp"
    android:layout_height="80sp"
    android:layout_marginLeft="127sp"
    android:layout_marginTop="26sp"
    android:background="@drawable/book_cover" /> 
```

所以你的背景会显示出来。并且方向不会出现在RelativeLayout中。

# php - 在第 1 行的“-20, 20”附近使用正确的语法的错误 MySQL 服务器版本

> ID：15717256
> 
> 赞同：-3
> 
> 时间：2013-03-30T10:04:08.467
> 
> 标签：php, mysql, sql

如何修复此错误？

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 '-20, 20' 附近使用正确的语法

我网站中的相同脚本工作正常，但我上传到另一台服务器是 Windows 服务器并收到此错误。

```
<?php

//connect to database
mysql_connect('xyz.ipowermysql.com','itomi','password.');
mysql_select_db('itomi');

$max_results = 20;
$from = (($page * $max_results) - $max_results);

if(empty($_POST)) {
    $query = "SELECT * FROM `itomi` WHERE `ntitle` LIKE '".$letter."%' ORDER BY `ntitle` ASC LIMIT $from, $max_results";
} 
$result = mysql_query("SET NAMES utf8"); //the main trick
$result = mysql_query($query) or die(mysql_error());
$rows = mysql_num_rows($result);

echo "<table class='hovertable' border='1' cellpadding='0' cellspacing='0'>";
echo "<tr><th>Keyword</th><th>Title</th><th>Detail</th></tr>";

if ($rows > 0) {
    while($row = mysql_fetch_array($result)) {
        echo "<tr><td>";
        echo '<a href="detail.php?id=' . $row['id'] . '" class="style1">' .$row['ntitle'].' </a>';
        echo "</td><td>";
        echo $row['ndetails'];
        echo "</td><td>";
        echo $row['counter'];
        echo "</td></tr>";
    }
} else {
    echo "<tr><td colspan=\"5\">No results found!</td></tr>";
}

echo "</table>";

// Figure out the total number of results in DB: 
$total_results = mysql_result(mysql_query("SELECT COUNT(*) as ntitle FROM itomi ORDER BY ntitle ASC"),0);

// Figure out the total number of pages. Always round up using ceil() 
$total_pages = ceil($total_results / $max_results);

// Build Page Number Hyperlinks 
echo "<p class=\"style1\">Pages: ";

// Build Previous Link 
if($page > 1){ 
    $prev = ($page - 1); 
    echo "<a href=\"".$_SERVER['php_SELF']."?page=$prev&letter=$letter\" class=\"style1\">Previous</a> "; 
}

for($i = 1; $i <= $total_pages; $i++){ 
    if(($page) == $i){ 
        echo "$i "; 
    } else { 
        echo " "; 
    }
}

// Build Next Link 
if($page < $total_pages){ 
    $next = ($page + 1); 
    echo "<a href=\"".$_SERVER['php_SELF']."?page=$next&letter=$letter\" class=\"style1\">Next</a>"; 
} 
echo "</p>";

mysql_close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T10:06:03.143

阅读作为整个 mysql 语法错误消息的一部分的标题，您在`LIMIT`子句上传递的值小于`0`.

```
LIMIT 0~, 1~ 
```

问题是在这里引起的：

```
$from = (($page * $max_results) - $max_results) 
```

尝试这个：

```
$partVal = (($page * $max_results) - $max_results);
$from = ($partVal <= 0 ? 0 : $partVal) 
```

* * *

作为旁注，[`SQL Injection`](http://bobby-tables.com/)如果变量的值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用`PreparedStatements`，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

# php - 带有描述的 Symfony2 实体

> ID：15717258
> 
> 赞同：0
> 
> 时间：2013-03-30T10:04:13.503
> 
> 标签：php, symfony, doctrine

我有由 Doctrine 映射到数据库的 Lector 实体。代码如下所示：

```
 class Lector {
  /**
   * @ORM\Id()
   * @ORM\Column(name="id",type="integer")
   * @ORM\GeneratedValue(strategy="AUTO")
   */  
  protected $id;

  /** @ORM\Column(name="code",type="string",length=100,unique=true) */
  protected $code;

  /** @ORM\Column(type="string",length=100,nullable=true) */
  protected $firstTitle;

  ....
  } 
```

我在 Symfony 中使用了内置的 CRUD 生成器来为这些操作创建代码。但是，此生成器在生成的页面中使用列名作为字段描述，如下所示：

```
 code <textbox>
 firstTitle <textbox> 
```

我试图通过扩展注释使这些字段更易于阅读

> options={"comment" = "Lector 的内部代码"}

但这没有用。

在 Symfony 2 中，如何以某种方式对将在项目中显示的每一列进行描述（列名呈现在哪里）？

*可以编辑视图文件，并为每一列制作我想要的描述。但这不是我想要的*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T10:14:54.510

我记得：

```
{{ form_row( form.email, { 'label': 'E-Mail:' } ) }} 
```

或者

```
{{ form_label(form.task, 'Task Description') }} 
```

And symfony2 hasn't any solution for assign caption for field before render. Also you can to use form classes.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T11:13:14.983

You can also set the labels in the form type generated by symfony2.

```
$builder
    ->add('comment', 'text', array(
        'label'  => 'Lector\'s internal code',
    ))
; 
```

# java - 什么技术栈可以帮助我的应用倾听和反应？

> ID：15717262
> 
> 赞同：0
> 
> 时间：2013-03-30T10:04:54.447
> 
> 标签：java, android, http, erlang, google-cloud-messaging

简单的问题：

我可以认真探索哪些部分可以让我的应用程序监听触发方法调用/代码块的外部信号？

场景相当于许多应用程序向代理/排队系统发送信号，然后让这些其他侦听应用程序知道它们有请求，以便它们可以执行它们的方法。

gcm, websockets, http PUT/POST, TCP, ?

# java - 在二维数组中生成世界地图

> ID：15717265
> 
> 赞同：1
> 
> 时间：2013-03-30T10:05:18.490
> 
> 标签：java, arrays, map, 2d

我正在尝试用 Java 编写一个小游戏。

世界地图有 100 个位置（每个位置要么是一个国家，要么是一个海洋）。有 6 大洲有 4 到 15 个国家。该地图有 76 个国家和 24 个海洋。每个大陆都与另一个至少有 1 个国家的大陆相连。

例子：

![地图](../Images/e95a37a063f122689e47871f93d7d1dd.png)

如您所见，黄色大陆继续位于地图底部。

我正在考虑将世界地图存储在二维数组中。坏/好主意？为了构建地图，我将确定国家的大小，选择一个随机点并以随机方向填充数组以构建国家。

这是好方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T10:47:13.487

```
"Is this the good approach?" 
```

这个问题有点难以回答，因为它*非常*主观。二维数组可以工作，但如果您想稍后添加其他数据/功能，可能会受到限制。例如，如果您从一组 Colors 开始，但后来想添加 armies/whatnot，则必须更改数组*类型*，也许是自定义`Tile`对象...

如果是我的游戏，我会构建一个接口（然后是一个自定义类）来表示 WorldMap。我会定义`setCountry()`对我的游戏有意义的方法，例如 。现在最后我可能会用一个 2D 数组来支持它（至少在开始时），但是通过预先创建一个界面，你可以更容易地在以后添加功能。也许有一天您想要一个动态大小的世界，而现在您只需将 2D 数组替换为其他集合，而无需更改所有游戏逻辑。

您的“填写地图”问题是另一个悬而未决的问题，因为如果您只是随机填写，我可以看到可能执行您的连接规则的问题。

# javascript - Chrome 扩展程序：单击事件侦听器不会启动

> ID：15717266
> 
> 赞同：0
> 
> 时间：2013-03-30T10:05:19.103
> 
> 标签：javascript, jquery, google-chrome, javascript-events, google-chrome-extension

我正在开发 Chrome 扩展程序，每当我尝试向类添加“点击”事件时都会返回一个错误。

```
Error in event handler for 'undefined': Object #<NodeList> has no method 'addEventListener' TypeError: Object #<NodeList> has no method 'addEventListener' 
```

这是我的函数代码（popup.js）

```
listElements: function(elements) {
    iHTML = '';
    for (var i = 0; i < elements.length; i++) {
        ...
        ...
        iHTML += '<div class="theBtn">btn</div>';
        ...
        ...
    }

    $('popup_content').innerHTML = iHTML;

    var btnElements = document.getElementsByClassName('theBtn');
    if (btnElements.length > 0) {
        btnElements.addEventListener("click", clicked);
    }
} 
```

我也尝试了 each() ，但也没有用。相同的错误信息。它也完美地记录了“btnElements”。有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T10:23:43.730

由于您使用的是 jQuery 而不是

```
var btnElements = document.getElementsByClassName('theBtn');
if (btnElements.length > 0) {
    btnElements.addEventListener("click", clicked);
} 
```

订阅点击事件为：

```
$('.theBtn').click(clicked); 
```

`getElementsByClassName`返回 NodeList，并且您不能将事件作为`btnElements.addEventListener`. 但是，这应该有效：

```
var btnElements = document.getElementsByClassName('theBtn');
for (var i = btnElements.length; i--;) {
    btnElements[i].addEventListener("click", clicked);
} 
```

# r - 如何在 R 中使用平滑绘制参数化 3d 曲线？

> ID：15717267
> 
> 赞同：6
> 
> 时间：2013-03-30T10:05:20.047
> 
> 标签：r, 3d, plot, curve-fitting, curve

我有参数 3d 曲线的数据：

```
 t        x       y       z
0.000    3.734   2.518  -0.134    
0.507    2.604   9.059   0.919
0.861    1.532  11.584  -0.248
1.314    1.015   1.886  -0.325
1.684    2.815   4.596   3.275
1.938    1.359   8.015   2.873
2.391    1.359   8.015   2.873
.............................. 
```

我发现[scatterplot3d](http://cran.r-project.org/web/packages/scatterplot3d/index.html)和[plot3d](http://hosho.ees.hokudai.ac.jp/~kubo/Rdoc/library/rgl/html/plot3d.html)真的很酷。但我需要一个平滑的 3d 曲线。

如何在 R 中绘制它？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-30T11:55:35.493

您可以使用`spline`在点之间进行插值并平滑曲线。

```
d <- read.delim(textConnection(
"t x y z
0.000 3.734 2.518 -0.134
0.507 2.604 9.059 0.919
0.861 1.532 11.584 -0.248
1.314 1.015 1.886 -0.325
1.684 2.815 4.596 3.275
1.938 1.359 8.015 2.873
2.391 1.359 8.015 2.873"
), sep=" ")
ts <- seq( from = min(d$t), max(d$t), length=100 )
d2 <- apply( d[,-1], 2, function(u) spline( d$t, u, xout = ts )$y ) 
library(scatterplot3d)
p <- scatterplot3d(d2, type="l", lwd=3)
p$points3d( d[,-1], type="h" ) 
```

![平滑曲线](../Images/638fd790bf14f78790f83591abc05724.png)

根据@Spacedman 的评论，您还可以使用`rgl`: 这允许您以交互方式旋转场景。

```
library(rgl)
plot3d( d2, type="l", lwd=5, col="navy" )
points3d(d[,-1])
spheres3d(d[,-1], radius=.1, col="orange")
segments3d( matrix( t( cbind( d[,-1], d[,2:3], 0 ) ), nc=3, byrow=TRUE ) )
planes3d(0,0,1,0, col="yellow", alpha=.5)  # Plane z=0 
```

![在此处输入图像描述](../Images/a02a01d83608edef5471c3c962641939.png)

# c# - Image source missing while generating HTML elements dynamically in asp.net

> ID：15717268
> 
> 赞同：1
> 
> 时间：2013-03-30T10:05:26.510
> 
> 标签：c#, javascript, asp.net

I have 4 rows in DataTable dt5\. I am trying to generate certain html elements dynamically equal to number of times as the rows in dt5. Visual studio code:

```
<% for(int i = 0; i < dt5.Rows.Count; i++)
{
%>
<div id="Div1"  class="image_stack" style="margin-left:600px" runat="server" >
<img  class="stackphotos photo1" src="~/Images/3.jpg" clientidmode="static" runat="server" />
<img  class="stackphotos photo2" src="~/Images/4.jpg" clientidmode="static" runat="server"/>
<img   class="stackphotos photo3" src="~/Images/5.jpg" clientidmode="static" runat="server"/>
</div>
<br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
<% } %> 
```

I am able to generate the html but the problem is the desired html i.e (view source in mozilla) should be.... First Iteration code:

```
<div id="ContentPlaceHolder1_Div1" class="image_stack" style="margin-left:600px">
<img src="Images/3.jpg" class="stackphotos photo1" />
<img src="Images/4.jpg" class="stackphotos photo2" />
<img src="Images/5.jpg" class="stackphotos photo3" />
</div>
<br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /> 
```

but the result i am getting is (browser view source) ...

```
<div id="ContentPlaceHolder1_Div1" class="image_stack" style="margin-left:600px">
<img class="stackphotos photo1" />
<img class="stackphotos photo2" />
<img class="stackphotos photo3" />
</div>
<br /><br /><br /><br /><br /><br /><br /><br /><br /><<br /><br /> 
```

As you can see the 'src' part is missing in the code generated .WHy is src missing?

OK, it seems to be working now thanks to Code Rider. now i am trying to get the src from datatable.

```
 for (int i = 0; i < dt5.Rows.Count; i++)
     {
       string   a = dt5.Rows[0]["imageurl"].ToString();
       string b = dt5.Rows[1]["imageurl"].ToString();
       string c = dt5.Rows[2]["imageurl"].ToString();
  %> 
   <div id="Div1"  class="image_stack" style="margin-left:600px" runat="server" >
    <img id="Img1"  class="stackphotos photo1" src="<%a%>"   />
    <img id="Img2"  class="stackphotos photo2" src="<%b%>"  />
      <img id="Img3"   class="stackphotos photo3" src="<%c%>" />
 </div>
     <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
  <% } %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T10:46:56.910

i have tried this with below code. Its working fine here.

```
 <% for(int i = 0; i < 5; i++)
 {
  %> 
   <div id="Div1"  class="image_stack" style="margin-left:600px" runat="server" >
    <img id="Img1"  class="stackphotos photo1" src="11.png"   />
    <img id="Img2"  class="stackphotos photo2" src="11.png"  />
      <img id="Img3"   class="stackphotos photo3" src="11.png" />
 </div>
     <br /><br /><br /><br /><br />
  <% } %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T10:11:25.987

can you tried with below code..

```
<% for(int i = 0; i < dt5.Rows.Count; i++)
{
%>
<div id="Div1"  class="image_stack" style="margin-left:600px" runat="server" >
<img  class="stackphotos photo1" src="Images/3.jpg" clientidmode="static" runat="server" />
<img  class="stackphotos photo2" src="Images/4.jpg" clientidmode="static" runat="server"/>
<img   class="stackphotos photo3" src="Images/5.jpg" clientidmode="static" runat="server"/>
</div>
<br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
<% } %> 
```

Means just remove ~ sign before image url..

# javascript - 使用bean消息标签（i18n）在jsp中初始化输入标签（html）

> ID：15717269
> 
> 赞同：0
> 
> 时间：2013-03-30T10:05:30.197
> 
> 标签：javascript, html, jsp, jakarta-ee, javabeans

我是 JavaEE 新手，所以我仍在努力寻找自己的脚。好吧，为了使我的页面国际化，我正在尝试使用 bean 消息标签来初始化输入文本标签。

如果我对价值属性的国际化不感兴趣，我会这样做：

```
<tr>
 <td><bean:message key="form.birthdate" /><span>:</span></td>
   <td><html:text property="day" value="day" /></td>
     <td><html:text property="month" value="month" /></td>
    <td><html:text property="year" value="year" /></td>
</tr> 
```

现在，我决定使用 javascript 文件进行初始化：

```
function initialise(){
document.getElementById("day").value="<bean:message key="form.day" />";
document.getElementById("month").value="<bean:message key="form.month" />";
document.getElementById("year").value="<bean:message key="form.year" />";
 } 
```

所以我在我的jsp中调用函数initialise()：

```
<body onLoad="initialise();"> 
```

但它没有任何效果，我不知道为什么。我会非常感谢你的帮助。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T12:42:53.057

`html:text`应该生成带有属性的输入框`name`。在您的 javascript 中，您尝试通过 Id 访问此文本框。为了使它成为可能，请尝试向您的元素添加`styleId`属性。`html:text`所以它看起来像：

```
<html:text property="day" styleId="day" value="day" /> 
```

并为月份和年份做同样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T23:35:24.110

我终于发现我必须在我的 initialise() 函数中使用简单的引号以及已经提到的 styleId 属性。因此，在我的 jsp 文件中，我将拥有：

```
<script type="text/javascript>
  function initialise(){
document.getElementById("day").value='<bean:message key="form.day" />';
document.getElementById("month").value='<bean:message key="form.month" />';
document.getElementById("year").value='<bean:message key="form.year" />';
}
</script>

<tr>
<td><bean:message key="form.birthdate" /><span>:</span></td>
 <td><html:text property="day" value="day" styleId="day" /></td>
 <td><html:text property="month" value="month" styleId="month" /></td>
<td><html:text property="year" value="year" styleId="year" /></td>
</tr> 
```

# ruby-on-rails - Ruby in Rails，生产。内容不会在页面上更新，但按 F5 后会更新

> ID：15717270
> 
> 赞同：0
> 
> 时间：2013-03-30T10:05:47.630
> 
> 标签：ruby-on-rails, nginx, unicorn, production

我在 VPS 上有 nginx 和 unicorn 作为生产环境。

当我通过网站形式添加任何模型实例（文章，帖子 - 任何内容）并单击任何链接时，该分配的页面必须显示此添加的内容（例如文章或帖子列表） - 我不添加的新文章没看到。

或更新头像/照片的相同情况（我为此使用回形针宝石）。

但如果我按 F5 - 他们会立即显示。

但是，控制器中没有任何缓存的操作。

我现在不去我必须挖掘的地方......

配置：
Nginx：[http://pastebin.com/MdJq4PyP](http://pastebin.com/MdJq4PyP)
独角兽： http: [//pastebin.com/UrMuCAkB](http://pastebin.com/UrMuCAkB)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T10:55:45.353

您的 nginx 配置告诉浏览器缓存您的动态内容，这不好。您可能需要删除以下 2 行：

```
expires max;
add_header Cache-Control public; 
```

按 F5 将强制浏览器绕过自己的缓存并转到服务器再次加载内容。

# php - 如何在opencart中生成自定义页面？

> ID：15717276
> 
> 赞同：0
> 
> 时间：2013-03-30T10:06:20.030
> 
> 标签：php, opencart

我是 OpenCart eshop 的初学者。我正在为产品描述创建一个自定义页面。我已经在我的本地机器上从头开始为自定义页面创建了控制器、模型和视图文件。它的工作完美。模型、控制器和视图名称是`Custreview` 我在迁移到实时服务器后面临这个错误：

```
Warning: require() [function.require]: Filename cannot be empty in /home/demoosiz/public_html/cart/OpenCart/vqmod/vqcache/vq2-system_engine_controller.php on line 68
Warning: require() [function.require]: Filename cannot be empty in /home/demoosiz/public_html/cart/OpenCart/vqmod/vqcache/vq2-system_engine_controller.php on line 68 
Warning: require() [function.require]: Filename cannot be empty in /home/demoosiz/public_html/cart/OpenCart/vqmod/vqcache/vq2-system_engine_controller.php on line 68
Fatal error: require() [function.require]: Failed opening required '' (include_path='.:/usr/lib/php:/usr/local/lib/php') in /home/demoosiz/public_html/cart/OpenCart/vqmod/vqcache/vq2-system_engine_controller.php on line 68 
```

这是我的控制器文件...

```
<?php
class ControllerInformationCustReview extends Controller {
    private $error = array();

    public function index() {
        /*if (!$this->customer->isLogged()) {
            $this->session->data['redirect'] = $this->url->link('account/custreview', '', 'SSL');

            $this->redirect($this->url->link('account/login', '', 'SSL'));
        } */

        $this->language->load('information/custreview');

        $this->document->setTitle($this->config->get('config_name') . ' - ' . $this->language->get('heading_title'));

        $this->load->model('account/custreview');

        $this->getForm();
    } 

    public function insert() {
        $this->load->language('information/custreview');

        $this->document->setTitle($this->config->get('config_name') . ' - ' . $this->language->get('heading_title'));

        $this->load->model('account/custreview');

        if (($this->request->server['REQUEST_METHOD'] == 'POST') && $this->validateForm()) {
            $this->model_account_custreview->addReview($this->request->post);

            $this->session->data['success'] = $this->language->get('text_success');

            $this->redirect($this->url->link('information/custreview'));
        }

        $this->getForm();
    }

    private function getForm() {
        $this->data['heading_title'] = $this->language->get('heading_title');
        $this->data['entry_prefix'] = $this->language->get('entry_prefix');
        $this->data['entry_desc'] = $this->language->get('entry_desc');
        $this->data['entry_industry'] = $this->language->get('entry_industry');
        $this->data['entry_design'] = $this->language->get('entry_design');
        $this->data['entry_prefix1'] = $this->language->get('entry_prefix1');
        $this->data['entry_other'] = $this->language->get('entry_other');
        $this->data['entry_prefix2'] = $this->language->get('entry_prefix2');
        $this->data['entry_prefix3'] = $this->language->get('entry_prefix3');
        $this->data['entry_prefix4'] = $this->language->get('entry_prefix4');

        $this->data['logged'] = $this->customer->getFirstname() . ' ' . $this->customer->getLastName();

        $this->data['text_none'] = $this->language->get('text_none');
        $this->data['text_select'] = $this->language->get('text_select');

        $this->data['entry_product'] = $this->language->get('entry_product');
        $this->data['entry_author'] = $this->language->get('entry_author');
        $this->data['entry_rating'] = $this->language->get('entry_rating');
        $this->data['entry_review'] = $this->language->get('entry_review');
        $this->data['entry_good'] = $this->language->get('entry_good');
        $this->data['entry_bad'] = $this->language->get('entry_bad');

        $this->data['button_save'] = $this->language->get('continue_shop');
$this->data['button_checkout'] = $this->language->get('check_out');

        if (isset($this->error['warning'])) {
            $this->data['error_warning'] = $this->error['warning'];
        } else {
            $this->data['error_warning'] = '';
        }

        if (isset($this->session->data['success'])) {
            $this->data['success'] = $this->session->data['success'];

            unset($this->session->data['success']);
        } else {
            $this->data['success'] = '';
        }

        if (isset($this->error['product'])) {
            $this->data['error_product'] = $this->error['product'];
        } else {
            $this->data['error_product'] = '';
        }

        if (isset($this->error['product_id'])) {
            $this->data['error_product_id'] = $this->error['product_id'];
        } else {
            $this->data['error_product_id'] = '';
        }

        if (isset($this->error['author'])) {
            $this->data['error_author'] = $this->error['author'];
        } else {
            $this->data['error_author'] = '';
        }

        if (isset($this->error['text'])) {
            $this->data['error_text'] = $this->error['text'];
        } else {
            $this->data['error_text'] = '';
        }

        if (isset($this->error['rating'])) {
            $this->data['error_rating'] = $this->error['rating'];
        } else {
            $this->data['error_rating'] = '';
        }   
        if (isset($this->error['cdesc'])) {
            $this->data['error_desc'] = $this->error['cdesc'];
        } else {
            $this->data['error_desc'] = '';
        }
        if (isset($this->error['industry'])) {
            $this->data['error_industry'] = $this->error['industry'];
        } else {
            $this->data['error_industry'] = '';
        }
        if (isset($this->error['design'])) {
            $this->data['error_design'] = $this->error['design'];
        } else {
            $this->data['error_design'] = '';
        }
        if (isset($this->error['other'])) {
            $this->data['error_other'] = $this->error['other'];
        } else {
            $this->data['error_other'] = '';
        }
        if (isset($this->error['file'])) {
            $this->data['error_file'] = $this->error['file'];
        } else {
            $this->data['error_file'] = '';
        }

        $this->data['breadcrumbs'] = array();

        $this->data['breadcrumbs'][] = array(
            'text'      => $this->language->get('text_home'),
            'href'      => $this->url->link('common/home', 'SSL'),
            'separator' => false
        );

        $this->data['breadcrumbs'][] = array(
            'text'      => $this->language->get('heading_title'),
            'href'      => $this->url->link('information/custreview','SSL'),
            'separator' => ' :: '
        );

        if (!isset($this->request->get['review_id'])) { 
            $this->data['action'] = $this->url->link('information/custreview/insert');
        }

        $this->data['cancel'] = $this->url->link('information/custreview','SSL');

        if (isset($this->request->get['review_id']) && ($this->request->server['REQUEST_METHOD'] != 'POST')) {
            $review_info = $this->model_account_custreview->getReview($this->request->get['review_id']);
        }

        $this->load->model('catalog/category');

        $this->data['categories'] = $this->model_catalog_category->getCategories(0);

        $this->load->model('catalog/product');

        if (isset($this->request->post['product_id'])) {
            $this->data['product_id'] = $this->request->post['product_id'];

            $product_info = $this->model_catalog_product->getProduct($this->request->post['product_id']);

            if ($product_info) {
                $this->data['product'] = $product_info['name'];
            } else {
                $this->data['product'] = '';
            }
        } elseif (isset($review_info)) {
            $this->data['product_id'] = $review_info['product_id'];

            $product_info = $this->model_catalog_product->getProduct($review_info['product_id']);

            if ($product_info) {
                $this->data['product'] = $product_info['name'];
            } else {
                $this->data['product'] = '';
            }
        } else {
            $this->data['product_id'] = '';
        }

        if (isset($this->request->post['product_id'])) {
            $this->data['product_id'] = $this->request->post['product_id'];
        } elseif (isset($review_info)) {
            $this->data['product_id'] = $review_info['product_id'];
        } else {
            $this->data['product_id'] = '';
        }

        if (isset($this->request->post['product'])) {
            $this->data['product'] = $this->request->post['product'];
        } elseif (isset($review_info)) {
            $this->data['product'] = $review_info['product'];
        } else {
            $this->data['product'] = '';
        }

        if (isset($this->request->post['author'])) {
            $this->data['author'] = $this->request->post['author'];
        } elseif (isset($review_info)) {
            $this->data['author'] = $review_info['author'];
        } else {
            $this->data['author'] = '';
        }

        if (isset($this->request->post['text'])) {
            $this->data['text'] = $this->request->post['text'];
        } elseif (isset($review_info)) {
            $this->data['text'] = $review_info['text'];
        } else {
            $this->data['text'] = '';
        }

        if (isset($this->request->post['rating'])) {
            $this->data['rating'] = $this->request->post['rating'];
        } elseif (isset($review_info)) {
            $this->data['rating'] = $review_info['rating'];
        } else {
            $this->data['rating'] = '';
        }

        if (isset($this->request->post['cdesc'])) {
            $this->data['cdesc'] = $this->request->post['cdesc'];
        } elseif (isset($review_info)) {
            $this->data['cdesc'] = $review_info['cdesc'];
        } else {
            $this->data['cdesc'] = '';
        }
        if (isset($this->request->post['industry'])) {
            $this->data['industry'] = $this->request->post['industry'];
        } elseif (isset($review_info)) {
            $this->data['industry'] = $review_info['industry'];
        } else {
            $this->data['industry'] = '';
        }
        if (isset($this->request->post['design'])) {
            $this->data['design'] = $this->request->post['design'];
        } elseif (isset($review_info)) {
            $this->data['design'] = $review_info['design'];
        } else {
            $this->data['design'] = '';
        }
        if (isset($this->request->post['other'])) {
            $this->data['other'] = $this->request->post['other'];
        } elseif (isset($review_info)) {
            $this->data['other'] = $review_info['other'];
        } else {
            $this->data['other'] = '';
        }
        if (isset($this->request->post['file'])) {
            $this->data['file'] = $this->request->post['file'];
        } elseif (isset($review_info)) {
            $this->data['file'] = $review_info['file'];
        } else {
            $this->data['file'] = '';
        }

        if (file_exists(DIR_TEMPLATE . $this->config->get('config_template') . '/template/information/custreview.tpl')) {
            $this->template = $this->config->get('config_template') . '/template/information/custreview.tpl';
        } else {
            $this->template = 'default/template/information/custreview.tpl';
        }

        $this->children = array(
            'common/column_left',
            'common/column_right',
            'common/content_top',
            'common/content_bottom',
            'common/footer',
            'common/header'     
        );

        $this->response->setOutput($this->render());
    }

    private function validateForm() {

        /*if (!$this->request->post['product_id']) {
            $this->error['product'] = $this->language->get('error_product');
        }

        if (!$this->request->post['product_id']) {
            $this->error['product_id'] = $this->language->get('error_product_id');
        }*/

        if ((strlen(utf8_decode($this->request->post['author'])) < 3) || (strlen(utf8_decode($this->request->post['author'])) > 64)) {
            $this->error['author'] = $this->language->get('error_author');
        }
/*
        if (strlen(utf8_decode($this->request->post['text'])) < 1) {
            $this->error['text'] = $this->language->get('error_text');
        }*/

        /*if (!isset($this->request->post['rating'])) {
            $this->error['rating'] = $this->language->get('error_rating');
        }*/
        if (!isset($this->request->post['file'])) {
            $this->error['file'] = $this->language->get('error_file');
        }
        if ((strlen(utf8_decode($this->request->post['cdesc'])) < 3) || (strlen(utf8_decode($this->request->post['cdesc'])) > 1000)) {
            $this->error['cdesc'] = $this->language->get('error_desc');
        }
        if ((strlen(utf8_decode($this->request->post['industry'])) < 3) || (strlen(utf8_decode($this->request->post['industry'])) > 1000)) {
            $this->error['industry'] = $this->language->get('error_industry');
        }
        if ((strlen(utf8_decode($this->request->post['design'])) < 3) || (strlen(utf8_decode($this->request->post['design'])) > 1000)) {
            $this->error['design'] = $this->language->get('error_design');
        }
        if ((strlen(utf8_decode($this->request->post['other'])) < 3) || (strlen(utf8_decode($this->request->post['other'])) > 1000)) {
            $this->error['other'] = $this->language->get('error_other');
        }

        if (!$this->error) {
            return true;
        } else {
            return false;
        }
    }   

    public function autocomplete() {
        $json = array();

        if (isset($this->request->post['filter_name'])) {
            $this->load->model('catalog/product');

            $data = array(
                'filter_name' => $this->request->post['filter_name'],
                'start'       => 0,
                'limit'       => 20
            );

            $results = $this->model_catalog_product->getProducts($data);

            foreach ($results as $result) {
                $json[] = array(
                    'product_id' => $result['product_id'],
                    'name'       => html_entity_decode($result['name'], ENT_QUOTES, 'UTF-8'),   
                    'model'      => $result['model'],
                    'price'      => $result['price']                
                );  
            }
        }

        $this->load->library('json');

        $this->response->setOutput(Json::encode($json));
    }   
}
?> 
```

这是我的 tpl 文件：

```
<form action="<?php echo $action; ?>" method="post" enctype="multipart/form-data" id="form">
       <?php echo $entry_author; ?><br />
       <!-- <input type="text" name="author" value="<?php echo $logged; ?>" />-->
       <textarea name="author" cols="100" rows="1" name="cdesc"><?php echo $logged; ?></textarea>
    <?php if ($error_author) { ?>
              <span class="error"><?php echo $error_author; ?></span>
              <?php } ?>
     <p> <?php echo $entry_prefix; ?></p>
    <?php echo $entry_desc; ?><br/>
    <textarea name="cdesc" cols="100" rows="3"></textarea>
        <?php if ($error_desc) { ?>
              <span class="error"><?php echo $error_desc; ?></span>
              <?php } ?>
            <br/>  
    <?php echo $entry_industry; ?><br/>
    <textarea name="industry" cols="100" rows="1"></textarea>
    <?php if ($error_industry) { ?>
              <span class="error"><?php echo $error_industry; ?></span>
              <?php } ?>    
        <br/>     
    <?php echo $entry_design; ?><br/>
    <textarea name="design" cols="100" rows="4"></textarea>
    <?php if ($error_design) { ?>
              <span class="error"><?php echo $error_design; ?></span>
              <?php } ?>
     <p> <?php echo $entry_prefix1; ?></p>  
     <?php echo $entry_other; ?><br/>
    <textarea name="other" cols="100" rows="1"></textarea>
    <?php if ($error_other) { ?>
              <span class="error"><?php echo $error_other; ?></span>
              <?php } ?>
     <p><?php echo $entry_prefix2; ?></p>
    <input type="file" value="<?php echo $file; ?>" name="file">
    <?php if ($error_file) { ?>
              <span class="error"><?php echo $error_file; ?></span>
              <?php } ?>
    <p><?php echo $entry_prefix3; ?></p>
    <br/>
        <b><?php echo $entry_review; ?></b><br/>
            <textarea name="text"  rows="1"  cols="100"></textarea>
            <?php if ($error_text) { ?>
              <span class="error"><?php echo $error_text; ?></span>
              <?php } ?>
              <p><?php echo $entry_prefix4; ?></p>
    <table class="form">
       <tr>
      <div class="buttons"><a href="index.php" class="button" style="margin-left: 5px;"><span><?php echo $button_save; ?></span></a>
      <a onclick="$('#form').submit();" class="button"><span><?php echo $button_checkout; ?></span></a>
      </div>
      </tr>
      </table>
      </form> 
```

我需要创建包含公司名称、组织名称、图片上传等的自定义表单。此外，它像产品一样移动到购物车页面。我刚刚修改到我的设计 UI。我得到了这个扩展并修改了它（参考 URL [Opencart扩展名](http://www.opencart.com/index.php?route=extension/extension/info&extension_id=5556%29...i)）。进一步我为我的设计 UI 定制了它。我也在使用 web 打印 opencart 中的在线设计工具。你能帮我解决这个错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T10:59:22.310

清除您的 vqmod 缓存文件夹，如果这没有帮助 - 检查您的`system/engine/controller.php`文件，此 vqmod 缓存文件中的错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-01T15:02:37.407

清除您的 vqmod 缓存可能会对您有所帮助。如果不尝试一一删除vqmod xml，可以找到问题文件。

[http://kvcodes.com/2013/10/create-custom-admin-page-open-cart/](http://kvcodes.com/2013/10/create-custom-admin-page-open-cart/)

# jquery - jquery 函数包含不适用于 .on() 函数

> ID：15717277
> 
> 赞同：0
> 
> 时间：2013-03-30T10:06:20.727
> 
> 标签：jquery, ajax

此代码中的所有内容均正常运行，但浏览器在导入新内容后无法应用 jquery 功能

html代码：

```
<div class="id2" >  </div>

        <div style="clear: both"></div> <br/> 
```

链接

```
 <div class="read">
                <table cellpadding="0" cellspacing="0" id="table" width="100%">

            </table>
            </div> 
```

jquery代码：此代码有2个函数第一个函数插入到数据库并导入新内容第二个函数将从数据库中删除并从表中隐藏tr删除了当此内容从第一个函数导入时用户无法从表中删除的问题,, jquery 函数不起作用

/ ***删除并隐藏**** /

```
 $(document).on("click", "#backup", function(){        // when  click 'the link'  this will import new content and update databace  and i use .on() function for it
  var s = {
      "id": "backup_tables"
        };
  $.ajax({         // here will do some thing in databacse
      url : "function.php",
      type : "POST",
      data :s,
      success : function (data){
         $(".id2").stop().stop().html(data).fadeIn(1000).delay(3000).fadeOut(500);    // here the massges for user will set in the class "id2"
      },
  });

      var s = {
      "id": "backup_readlast"
        };

  $.ajax({    // hrer will add new content
      url : "function.php",
      type : "POST",
      data :s,
      success : function (data){
      $(".read table tr:last").after(data);       // here will set the new content in the end of table and it's  working ,
      $("#table tr:last").hide().fadeIn(800);      // but The problem that the import content is not applies jquery code
      },
      beforeSend : function (){

       $(".id2").html("<img scr =\"../images/loading.gif\"  alt=\"\" />");

      }
});
return false;
});
      /*** delet and hide  ****/
 $(".backupdelete").click(function(){   // here this function must be work after import new content  ,, but desn't work
           var name = $(this).attr("title");
           var s = {
      "id": "backupdelete",
      "id2" : name
        };
  $.ajax({
      url : "function.php",
      type : "POST",
      data :s,
      success : function (data){
         $(".id2").stop().stop().html(data).fadeIn(500).delay(2000).fadeOut(500);  // here the massges for user will set in the class "id2"
      },
      beforeSend : function (){
       $(".id2").html("<img scr =\"../images/loading.gif\"  alt=\"\" />");
      }
  });
$(this).closest('tr').fadeOut(500);
return false;
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T10:31:49.033

因此，在每种情况下都使用 on() ：

```
 /*** delet and hide  ****/
  $('body').on('click',".backupdelete",function () { // here this function must be work after import new content  ,, but desn't work
      var name = $(this).attr("title");
      var s = {
          "id": "backupdelete",
              "id2": name
      };
      $.ajax({
          url: "function.php",
          type: "POST",
          data: s,
          success: function (data) {
              $(".id2").stop().stop().html(data).fadeIn(500).delay(2000).fadeOut(500); // here the massges for user will set in the class "id2"
          },
          beforeSend: function () {
              $(".id2").html("<img scr =\"../images/loading.gif\"  alt=\"\" />");
          }
      });
      $(this).closest('tr').fadeOut(500);
      return false;
  }); 
```

# iphone - 尝试在从 URL 启动应用程序时执行表格单元格 segue 的问题

> ID：15717278
> 
> 赞同：0
> 
> 时间：2013-03-30T10:06:24.577
> 
> 标签：iphone, ios, url, ios6

你好 StackOverFlowers 同胞！通常使用这个宏伟的网站，我可以自己解决大多数 iOS 问题，但我不得不在这里认输，希望你能提供帮助。

我的应用程序使用 Storyboards 并从表格视图开始。点击单元格会转到关于该单元格的详细信息页面。

我已经实现了从 URL 启动应用程序所需的代码，并且还编写了代码以将 URL 字符串分开以获得我想要在应用程序启动后使用的某些值。然后将这些值与指示“应用程序由 URL 启动”的标志一起写入用户默认值。在我的 AppDelegate 我有这个方法：

```
- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation
{
NSLog(@"Launched with URL: %@", url.absoluteString);

DFSCustomURL *passedUrl = [[DFSCustomURL alloc]init];
[passedUrl saveUrlSchemeToFile:url];
passedUrl=nil;
NSLog(@"Updating URL");

[UserDefaults setURLLaunch];

return YES;
} 
```

在我的表格视图控制器中刷新表格的方法中，我有以下代码：

```
if(userDefaultValues.urlLaunch)
{
[UserDefaults disableURLLaunch];

//Get a CustomURL object for the kpiIndex value.

[self performSegueWithIdentifier:@"ViewKPIDetail" sender:[self.kpiArray objectAtIndex:0]];

} 
```

问题是，当从 URL 启动时，App Delegate 中的代码直到调用表刷新方法后才会触发。这意味着“url 启动”的标志直到表重新加载后才设置，并且直到我再次刷新表后才发生 segue。

有任何想法吗？

# ios - 在 NSMutableArray 中管理 UIControls

> ID：15717281
> 
> 赞同：0
> 
> 时间：2013-03-30T10:07:18.043
> 
> 标签：ios, xcode, nsmutablearray, uicontrol

我有一个 NSMutableArray。

我创建了一个 UIControl（比如 UISlider）并在 for 循环中将它添加到这个数组中。

```
for (int i=0; i<totalSlider; i++) {

UISlider *tmpSlider = [[UISlider alloc] initWithRect:CGRect(0,0,200,40)];

[myArray addObject: tmpSlider];

} 
```

这工作正常。我可以通过

```
UISlider *tmpSlider = [myArray objectAtIndex:j]; 
```

但是如何在保留该数组中剩余的滑块的同时单独删除和释放这些对象？

例如，这个数组中有 10 个滑块。所以我想删除索引 5 处的滑块。如何去做呢？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T10:11:24.997

首先，您已经在堆栈中创建了所有 UISlider，位于每个 UISlider 之上。

因为你的坐标是一样的`CGRect(0,0,200,40)];`

所以你只会看到其中之一。

现在，如果您想删除其中任何一个，只需使用

```
[myArray removeObjectAtIndex:5]; 
```

编辑：

[杰德回答](https://stackoverflow.com/questions/1668785/does-removeobject-release-the-object-in-an-nsmutablearray-of-objects)的摘录。

> Like NSArray, instances of NSMutableArray maintain strong references to their contents. If you do not use garbage collection, when you add an object to an array, the object receives a retain message. When an object is removed from a mutable array, it receives a release message. If there are no further references to the object, this means that the object is deallocated. If your program keeps a reference to such an object, the reference will become invalid unless you send the object a retain message before it’s removed from the array.

# google-plus - Google+ Signin callback function not found if inside a module

> ID：15717284
> 
> 赞同：3
> 
> 时间：2013-03-30T10:07:28.087
> 
> 标签：google-plus

I'm having some strange issue when I place the callback function inside a module, the library cannot seem to find the function, so if I use:

```
var Auth = (function () {
    var gPlusSignCallback = function () {
      console.log("Google plus signin call back done!");
  };

  return {
      gPlusSignCallback: gPlusSignCallback
  };
}()); 
```

And in the html snipped of the Google+ Signing button I use:

```
data-callback="Auth.gPlusSignCallback" 
```

I get the following error:

> Callback function named "Auth.gPlusSignCallback" not found

If I put the gPlusSignCallback outside the module everything works well. I checked the documentation and it says that the value must be a function in the global namespace. So is it not working by design? I need to make global variable that makes reference to the function in the module?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-30T16:53:28.643

The signin callback must be a global function for the widget to find it. Wrap your callback as such:

```
function onSigninCallback(e){
    Auth.gPlusSignCallback(e);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T06:26:43.587

An alternative is to use the [Javascript API](https://developers.google.com/+/web/signin/#javascript_api) to render the button. If you do that, you can pass a reference to a function as callback. [This is](https://github.com/googleplus/gplus-photohunt-server-java/blob/master/war/js/controllers.js#L234) an example from PhotoHunt, the End-to-end Google+ Platform sample application.

# java - CountDownLatch 等效

> ID：15717289
> 
> 赞同：7
> 
> 时间：2013-03-30T10:08:25.573
> 
> 标签：java, c++, c++11

对于一些并发编程，我可以使用 Java 的[CountDownLatch](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CountDownLatch.html)概念。是否有 C++11 的等价物，或者在 C++ 中该概念被称为什么？

我想要的是在计数达到零后调用一个函数。

如果还没有，我会给自己写一个如下的类：

```
class countdown_function {
public:
  countdown_function( size_t count );
  countdown_function( const countdown_function& ) = default;
  countdown_function( countdown_function&& ) = default;
  countdown_function& operator=( const countdown_function& ) = default;
  countdown_function& operator=( countdown_function&& ) = default;
  // Callback to be invoked
  countdown_function& operator=(std::function<void()> callback);
  countdown_function& operator--();
private:
  struct internal {
    std::function<void()> _callback;
    size_t _count;
    // + some concurrent handling
  };
  // Make sure this class can be copied but still references
  // same state
  std::shared_ptr<internal> _state;
}; 
```

类似的东西是否已经在任何地方可用？

场景是：

```
countdown_function counter( 2 );
counter = [success_callback]() {
  success_callback();
};

startTask1Async( [counter, somework]() {
  somework();
  --counter;
}, errorCallback );

startTask2Async( [counter, otherwork]() {
  otherwork();
  --counter;
}, errorCallback ); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T18:45:13.430

有一个针对下一个 C++ 标准的[提案。](http://www.open-std.org/JTC1/SC22/WG21/docs/papers/2013/n3600.html)[谷歌并发库](https://code.google.com/p/google-concurrency-library/)中提供了一个实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-09-14T11:25:18.257

我经常希望得到同样的东西。这是一种方法...

```
#include <chrono>
#include <condition_variable>
#include <mutex>

class CountDownLatch {
public:
    explicit CountDownLatch(const unsigned int count): m_count(count) { }
    virtual ~CountDownLatch() = default;

    void await(void) {
        std::unique_lock<std::mutex> lock(m_mutex);
        if (m_count > 0) {
            m_cv.wait(lock, [this](){ return m_count == 0; });
        }
    }

    template <class Rep, class Period>
    bool await(const std::chrono::duration<Rep, Period>& timeout) {
        std::unique_lock<std::mutex> lock(m_mutex);
        bool result = true;
        if (m_count > 0) {
            result = m_cv.wait_for(lock, timeout, [this](){ return m_count == 0; });
        }

        return result;
    }

    void countDown(void) {
        std::unique_lock<std::mutex> lock(m_mutex);
        if (m_count > 0) {
            m_count--;
            m_cv.notify_all();
        }
    }

    unsigned int getCount(void) {
        std::unique_lock<std::mutex> lock(m_mutex);
        return m_count;
    }

protected:
    std::mutex m_mutex;
    std::condition_variable m_cv;
    unsigned int m_count = 0;
}; 
```

# java - 如何在默认情况下使 netbeans 中的摆动控件受保护或公开？

> ID：15717292
> 
> 赞同：3
> 
> 时间：2013-03-30T10:09:10.813
> 
> 标签：java, netbeans, netbeans-7

我的第一个问题是 - 我们可以在 netbeans 中公开或保护摆动控件（如`textfield`或）吗？`combobox`当我们将组件拖放到框架中时，代码会自动生成，并且默认情况下组件是私有的。我们不能在其他类中使用它们。

第二个是 - 有没有其他方法可以在其他类中使用一个框架的组件？

例如-在一帧中，我们只有一帧`textfield`和`button`一帧`label`。我们希望将标签的文本设置为与单击按钮时在文本字段中写入的文本相同。但是代码必须写在其他类中。

```
package javaapplication10;

import javax.swing.JLabel;
public class NewJFrame extends javax.swing.JFrame {

    public NewJFrame() {
        initComponents();
    }

    private void initComponents() {

        jButton1 = new javax.swing.JButton();
        jTextField1 = new javax.swing.JTextField();
        label1 = new java.awt.Label();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        jButton1.setText("jButton1");
        jButton1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton1ActionPerformed(evt);
            }
        });

        label1.setText("label1");

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                    .addGroup(layout.createSequentialGroup()
                        .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(jTextField1, javax.swing.GroupLayout.PREFERRED_SIZE, 76, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(javax.swing.GroupLayout.Alignment.LEADING, layout.createSequentialGroup()
                        .addGap(100, 100, 100)
                        .addComponent(label1, javax.swing.GroupLayout.PREFERRED_SIZE, 67, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 31, Short.MAX_VALUE)
                .addComponent(jButton1)
                .addGap(129, 129, 129))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(134, 134, 134)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jTextField1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jButton1))
                .addGap(56, 56, 56)
                .addComponent(label1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(67, Short.MAX_VALUE))
        );

        pack();
    }

    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {

        label1.setText(jTextField1.getText());
    }
    public static void main(String args[]) {
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }

        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new NewJFrame().setVisible(true);
            }
        });
    }

    private javax.swing.JButton jButton1;
    private javax.swing.JTextField jTextField1;
    private java.awt.Label label1;

} 
```

我只写过

```
label1.setText(jTextField1.getText()); 
```

但这是在同一个班级。我希望这行写在其他类中。但是我们不能在其他类中引用它们`textfield`。`labell``private`

我怎样才能做到这一点？

我这样做是为了学习。

请帮忙。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-30T11:33:51.620

右键组件->属性->代码：

![在此处输入图像描述](../Images/bf5b62f33e248cc871eb4a97fde4c0cd.png)

点击变量修饰符，选择你想要的。

`Is there any other way by which we can use the components of one frame in other class?`

是的，

*   1) 类名.变量名
*   2）创建类的对象，通过对象调用变量。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-11-21T00:19:13.390

I must downvote the accepted answer because it doesn't actually answer the question posed in the title: "How to make swing controls in netbeans **by default** protected or public?" If the controls are **by default** protected, you would just drag a control into your form and it would be protected without any further action on your part. The accepted answer requires you to change each control to protected or public, which can be a big nuisance.

To make swing controls protected or public by default

1.  open the Design Navigator window,
2.  right click the topmost node (e.g. the Form node if you are creating a form),
3.  click Properties, and under Code Generation,
4.  change the Variables Modifier to protected or public.

**To make this change for all future GUI forms**,

5.  转到工具 - 选项，

6.  选择选项卡 Java，然后选择 GUI builder，

7.  并更改变量修饰符。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-30T10:31:36.767

只需将所需私有组件的 getter 添加到您的类中。

```
private JTextField text1 = new JTextField();
public JTextField getText1()
{ 
  return text1;
} 
```

# android - 在 Android 上显示视图

> ID：15717294
> 
> 赞同：0
> 
> 时间：2013-03-30T10:09:27.723
> 
> 标签：android, android-layout, android-softkeyboard

我编写了一个小程序来使用集合评估表达式。**但**在小屏幕上是以下内容

[带键盘](http://i.stack.imgur.com/RQgR4.jpg)和 [不带键盘](http://i.stack.imgur.com/oqFQs.jpg)

如何解决布局问题？

通过添加 AndroidManifest.xml 行
`android:windowSoftInputMode="stateHidden|adjustPan"`
thx 来解决问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T10:26:28.787

您可以使用 AndroidManifest.xml 中元素的[`android:windowSoftInputMode`](http://developer.android.com/guide/topics/manifest/activity-element.html#wsoft)属性`<activity />`来控制打开键盘时 Android 对应用程序窗口所做的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T10:55:21.613

隐藏你的键盘：

```
<activity android:name="com.your.package.ActivityName"
          android:windowSoftInputMode="stateHidden|adjustResize"  /> 
```

当您的应用程序启动键盘隐藏时。当您触摸edittext时，它会打开。

您还可以使用以下方法隐藏它：

```
InputMethodManager imm = (InputMethodManager)getSystemService(
      Context.INPUT_METHOD_SERVICE);
imm.hideSoftInputFromWindow(myEditText.getWindowToken(), 0); 
```

检查此[链接](https://stackoverflow.com/q/7200281/1168654)的布局检查所有答案。

# jquery - Implement efficient JQuery Image Swap

> ID：15717297
> 
> 赞同：0
> 
> 时间：2013-03-30T10:09:46.013
> 
> 标签：jquery, image, performance

I have around 10 links in my navigation. All of which have 2 images for example, **main_image.png** the picture that loads first, and the other that is not displayed called **main_image_up.png** This image is what I want to replace the first image with when I hover over it.

What would be the best method be/ technique to use, to incorporate all this large into a efficient function?

Here is my current code, simple structure, please note, all images will be different:

```
 <div>
<img src="http://cdn4.blogs.babble.com/strollerderby/files/2011/06/test-100x100.jpg"/>
    <p>Directory</p>
    </div> 
```

[JS FIDDLE](http://jsfiddle.net/AnFRa/)

Thanks in advance, Chris

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T10:15:17.480

Personally, I would sprite your images and use CSS.

Take [Newgrounds.com](https://www.newgrounds.com/) for example. Have a look at their navigation bar. When you hover over it / click it, the colours change.

Now look at [the actual navigation bar image](https://www.newgrounds.com/img/bg-header/navbar.jpg).

All 3 states are one image. All they do is shift the background position of the image depending on the state of the element.

I would prefer doing this because instead of loading 20 images (10 links / 2 images each), you only load one. That saves your browser from making 19 extra calls to the server, thus saving time and speeding things up!

Have a look on [CSS-Tricks](http://css-tricks.com/css-sprites/) for a nice article explaining what they are, how to use them, etc.

# vb.net - vb.net代码将pdf文件从一个文件夹复制到另一个文件夹并将路径保存在数据库中并稍后检索

> ID：15717300
> 
> 赞同：0
> 
> 时间：2013-03-30T10:10:17.207
> 
> 标签：vb.net, ms-access-2007

我正在使用 vb.net 并访问 2007。我想将 pdf 文件路径保存在数据库中，并希望在单击按钮或图像时检索路径并读取 pdf 文件。

我有一个表单，我可以在其中浏览并提供 pdf 文件的路径，当我单击保存按钮时，应该读取文本框中的路径，并且应该将 pdf 文件复制到项目文件夹中的某个位置，并且路径应该保存在数据库。当我想检索数据时，我应该获取 pdf 文件以及其他详细信息，当我单击按钮或图像时，我应该能够仅以 pdf 格式读取 pdf 文件，而不是在文本框中。这是代码我试图将文件从一个位置复制到另一个位置并将路径保存在数据库中。

```
Private Sub cmdSave_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles cmdSave.Click
    ' Specify the directories you want to manipulate.
    Dim path As String = txtSLAPath.Text
    Dim path2 As String = "E:\" + "SLA1.pdf"
    Try
        Dim fs As FileStream = File.Create(path, 1024)
        fs.Close()

        'Copy the file.
        File.Copy(path, path2)

    Catch ex As Exception
        MsgBox(ex.Message)
    End Try

    Try
        Dim insQry As String
        insQry = "insert into SLAdb (PO,SLA)values(@PO,@SLA)"

        cnnOLEDB.Open()

        Dim cmd As OleDb.OleDbCommand = New OleDb.OleDbCommand(insQry, cnnOLEDB)

        cmd.Parameters.Add(New OleDb.OleDbParameter("@PO", txtPO.Text))
        cmd.Parameters.Add(New OleDb.OleDbParameter("@SLA", path2))

        cmd.ExecuteNonQuery()
        MsgBox("Data Saved Successfully")

        cnnOLEDB.Close()

    Catch ex As Exception
        MessageBox.Show(ex.Message)
    End Try

End Sub 
```

文件被复制并保存路径，但请建议我阅读路径和文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T10:19:13.423

> 两个文件都变成零字节

当然，您可以在源文件的相同路径上创建一个新文件，而无需写入任何内容。
然后，您关闭 FileStream 并将路径（现在归零的文件）传递给 File.Copy

```
' Specify the directories you want to manipulate.
Dim path As String = txtSLAPath.Text
Dim path2 As String = "E:\" + "SLA1.pdf"
Try

    ' The following line destroy the source file path
    ' the subsequent File.Copy, copies nothing in the destination path

    'Dim fs As FileStream = File.Create(path, 1024)
    'fs.Close()

    'Copy the file.
    File.Copy(path, path2)

Catch ex As Exception
    MsgBox(ex.Message)
End Try 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T10:19:34.923

您再次`creating a file`使用`path`与`name`源文件相同的 and 。我认为这可能是问题所在。试试下面的代码，

```
 Dim path As String = txtSLAPath.Text
 Dim path2 As String = "E:\" + "SLA1.pdf"
    Try
        'Remove this, but i'm not sure why did you use this here.
        'Dim fs As FileStream = File.Create(path, 1024)
        'fs.Close()

        'Copy the file.
        File.Copy(path, path2)

    Catch ex As Exception
        MsgBox(ex.Message)
    End Try 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T05:24:49.983

在新窗口中打开文件的代码。

'获取保存在db中的文件路径的代码..

```
 Dim drPdf As OleDb.OleDbDataReader
                Dim cmd1 As OleDb.OleDbCommand

                Dim pdf As String = ("SELECT * FROM SLAdb where PO='" & txtPo.Text & "'")
                cnnOLEDB.Open()
                cmd1 = New OleDb.OleDbCommand(pdf, cnnOLEDB)
                drPdf = cmd1.ExecuteReader

            If drPdf.Read = True Then
                fpath = drPdf("SLA")
            End If 
```

'从路径获取文件名的代码

```
 fname = Path.GetFileName(fpath)
                lblSLA.Text = fname
            cnnOLEDB.Close() 
```

'打开路径保存在db中的pdf文件的代码

```
 System.Diagnostics.Process.Start(fpath) 
```

# firebase - Does a firebase client using only 'once()' callbacks count as a concurrent user?

> ID：15717301
> 
> 赞同：2
> 
> 时间：2013-03-30T10:10:18.910
> 
> 标签：firebase

I have read [online](https://groups.google.com/forum/?fromgroups=#!topic/firebase-talk/4_YzR1xYxRM) that a concurrent user is defined as a client that has an `on()` callback listening for updates on your data. If I use the `once()` method instead throughout my app (in other words, I'm just using firebase as a data store) will the client still count as a concurrent user?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T20:02:30.750

Yes it will. We count the number of clients (browser tabs or mobile devices) with open connections to us. We open a connection to the Firebase servers as soon as you say `new Firebase(url);`, and we leave it open so that all future requests will be fast (otherwise, the next time you did a `once` or any other operation we'd have to reestablish a connection again, which would slow things down).

# ios - SPSearch key-value-observing and blocks

> ID：15717302
> 
> 赞同：1
> 
> 时间：2013-03-30T10:10:29.153
> 
> 标签：ios, objective-c, key-value-observing, cocoalibspotify-2.0

I'm working on a cross-source solution for playing music (see [project on Github](https://github.com/hohl/SonoraMusicKit)). Every so called 'content source' has methods which fetch tracks, albums and artists by a search query (defined in [SMKContentSource protocol](https://github.com/hohl/SonoraMusicKit/blob/master/Classes/SonoraMusicKit/SMKContentSource.h)). The methods work asynchronosly and require a completion handler passed which either accepts a result or a NSError.

At the moment I'm implementing a content source for Spotify. The following lines of code already work well, but in my opinion it is a bit risky solution:

```
 SPSession *strongSelf = weakSelf;
    dispatch_async([SMKSpotifyContentSource spotifyLocalQueue], ^{
        __block SPSearch *search = [[SPSearch alloc] initWithSearchQuery:predicate inSession:strongSelf];
        [search addObservationKeyPath:@"loaded" options:0 block:^(MAKVONotification *notification) {
            handler(search.albums, nil, nil);
            [search removeAllObservers];
            search = nil;
        }];
        dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, (int64_t)(SMKSpotifyDefaultLoadingTimeout * NSEC_PER_SEC));
        dispatch_after(popTime, [SMKSpotifyContentSource spotifyLocalQueue], ^{
            if (search) {
                handler(nil, nil, [NSError errorWithDomain:SMKSpotifyErrorDomain code:SMKSpotifyLoadingTimeoutErrorCode userInfo:nil]);
                [search removeAllObservers];
                search = nil;
            }
        });
    }); 
```

It's a pity but SPSearch doesn't provide any other way then to observe the `loaded` value. Now I'm asking about what others think about this implementation or tips for a better solution.

* * *

**编辑：**我也已经在 CocoaLibSpotify 上创建了一个问题，因为我认为 SPSearch 界面设计不佳：[https ://github.com/spotify/cocoalibspotify/issues/148](https://github.com/spotify/cocoalibspotify/issues/148)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T13:48:34.943

在将其发布给 CocoaLibSpotify 之后，他们告诉我，我已经在他们的文档中监督了一些帮助类，这些帮助类正是为这类问题而设计的。

正确的解决方案是使用`SPAsyncLoading`：

```
NSArray *someTracks = …; // Some tracks.

[SPAsyncLoading waitUntilLoaded:someTracks timeout:10.0 then:^(NSArray *loadedTracks, NSArray *notLoadedTracks) {
    NSLog(@"The following tracks are loaded: %@", loadedTracks);
}]; 
```

# ios - 证书固定 - 仅公钥？

> ID：15717303
> 
> 赞同：8
> 
> 时间：2013-03-30T10:10:29.867
> 
> 标签：ios, certificate, pinning

我想将根 CA（verisign - [http://www.verisign.com/repository/roots/root-certificates/PCA-3G5.pem](http://www.verisign.com/repository/roots/root-certificates/PCA-3G5.pem)）的公钥固定到我的 iOS 应用程序中。固定公钥还是subjectPublicKeyInfo更好？有人可以解释一下哪种方法更好，为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T10:55:15.030

我认为最好固定主题的公钥而不是根的 CA 公钥。以下是我对固定 CA 的根 pkey 的不同权衡的理解：

**好处** 只要您保持相同的 CA，您就可以一遍又一遍地更新您的证书，并且它始终有效。

**糟糕的** 是，我相信您将更容易受到 MITM 攻击的影响，该攻击将根 CA 的 pkey 而不是主题的公钥固定，因为您将将该 CA 签名的任何证书视为有效，而不仅仅是那些真正匹配您的主题的证书。

**那么固定主题的公钥呢？** 基本上，您应该比固定 CA 的公钥更安全一些，并且您的应用程序即使在证书过期并更新它之后也应该继续工作，只要您保持相同的公钥。

我刚刚发布了一个关于如何固定公钥的问题和解决方案，希望对您有所帮助： [How to pin the Public key of a certificate on iOS](https://stackoverflow.com/questions/15728636/how-to-pin-the-public-key-of-a-certificate-on-ios)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-09T23:11:10.427

> 我想固定根 CA 的公钥...

只是自行车脱落，但固定服务器或服务的证书或公钥可能更安全，而不是根证书或中间证书。如果您使用的是 DigiCert 或 Verisign 等公共 CA（而不是私有的企业 CA），则尤其如此。

在公共 CA 的情况下，CA 可能会错误地颁发第二个证书，客户端将无法区分“真实”证书（颁发给您的证书）和“假”证书（错误颁发的证书）。这在现实生活中已经发生了很多次，所以你应该期待它再次发生。

> 固定公钥还是subjectPublicKeyInfo更好？有人可以解释一下哪种方法更好，为什么？

最好固定公钥（至少在固定服务器证书的情况下）。

一些组织，如谷歌，每 30 天左右轮换一次他们的服务器证书。但是，他们重新认证了相同的公钥。例如，参见[Android 4.2 和 Pinning](https://groups.google.com/forum/#!msg/android-security-discuss/9YmL5-6avEg/Q2D3qPfO904J)。这意味着您将观察到“密钥连续性”，而*不是*“证书连续性”。

重新验证相同的公钥是 CertPatrol 在某些情况下在用户体验中失败如此糟糕的原因。在 Google 服务等情况下，我们确实需要公钥巡逻。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-07T01:54:19.603

最好固定 SPKI（主题公钥信息），因为它包含实际的公钥和密钥的算法（RSA、ECDSA 等）。[Google 的 TLS 专家在https://www.imperialviolet.org/2011/05/04/pinning.html](https://www.imperialviolet.org/2011/05/04/pinning.html)的这篇文章中对此进行了更详细的描述 ：

> SPKI 包括公钥的类型和一些参数以及公钥本身。这很重要，因为仅对公钥进行散列处理就容易受到误解攻击。考虑一个 Diffie-Hellman 公钥：如果一个人只对公钥而不是完整的 SPKI 进行散列，那么攻击者可以使用相同的公钥，但让客户端在不同的组中解释它。同样，可以强制将 RSA 密钥解释为 DSA 密钥等。

在 iOS 应用程序中固定 SPKI 的一个挑战是 iOS 上的安全框架不提供用于解析证书和提取 SPKI 位的 API ( [https://nabla-c0d3.github.io/blog/2015/08/11 /安全框架愿望清单/](https://nabla-c0d3.github.io/blog/2015/08/11/security-framework-wish-list/)）。

好消息是，有一个开源库可以做到这一点：[https](https://github.com/datatheorem/TrustKit) ://github.com/datatheorem/TrustKit 。

# android - Android 自定义图片库

> ID：15717304
> 
> 赞同：0
> 
> 时间：2013-03-30T10:10:32.830
> 
> 标签：android, android-layout, android-imageview, android-gridview

我想创建一个从**SDCARD**加载图像的图像库。图库应类似于下图所示

![在此处输入图像描述](../Images/422a67efe0581bd94ba931e699c11c44.png)

这样当点击左边的图像时，相应的大图就会显示在右边。我知道这样做是可能的，我可以设置一个带有单列的 GridView 并为每个图像分配一个 id，这样当单击左侧的图像时，将触发一个事件以获取选定的图像 ID，然后加载相应的SDCARD 中的图像显示在左侧。

我是朝着正确的方向前进还是有人会帮助我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T10:24:24.967

看看这个网站[androidview.net](http://www.androidviews.net/)它包含许多 GUI 解决方案，您可能会找到一个适合您的需求/替代方案。

至于从 sdcard 显示图像，[这](http://www.coderanch.com/t/443531/Android/Mobile/display-Images-stored-sdcard)可以帮助你。祝你好运

# iphone - 更改快门动画iphone的颜色

> ID：15717305
> 
> 赞同：1
> 
> 时间：2013-03-30T10:10:33.353
> 
> 标签：iphone, ios, ipad, caanimation

我正在制作一个基于摄影的应用程序，我使用快门动画来取得进展。

这是我的代码..

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [self performSelector:@selector(makeRound) withObject:nil afterDelay:2.0];
}
-(void)makeRound
{
    [[[self.view viewWithTag:90] layer] setMasksToBounds:YES];
    [[[self.view viewWithTag:90] layer] setCornerRadius:75.0];
    [[[self.view viewWithTag:90] layer] setBorderWidth:2.0];
    [[[self.view viewWithTag:90] layer] setBorderColor:[[UIColor blackColor] CGColor]];
    [(UILabel *)[[self.view viewWithTag:90] viewWithTag:991] setText:@"Loading.."];
    [self shutter];
}
-(void)shutter
{
    CATransition *shutterAnimation = [CATransition animation];
    [shutterAnimation setDelegate:self];
    [shutterAnimation setDuration:1.5];
    [shutterAnimation setType:@"cameraIris"];
    [shutterAnimation setValue:@"cameraIris" forKey:@"cameraIris"];
    [shutterAnimation setRepeatCount:1];
    [[[self.view viewWithTag:90] layer] addAnimation:shutterAnimation forKey:@"cameraIris"];
}
-(void)animationDidStop:(CAAnimation *)anim finished:(BOOL)flag
{
    [self performSelector:@selector(shutter) withObject:nil afterDelay:0.5];
} 
```

我的输出是这样的。

![在此处输入图像描述](../Images/0872f68208b35ff2c082af4875ef0dfe.png)

但我想改变这种黑色的快门。请分享你的知识并帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T10:20:23.387

除非相机光圈暴露一个 " `color`" 属性，否则我很确定您将无法随意将光圈叶片的颜色更改为任何颜色。该艺术品内置于操作系统中并且是静态的。

如果您打算更改虹膜叶片的颜色，您可能需要使用自己的图形制作自己的动画（[其他人也必须这样做](https://stackoverflow.com/questions/10470114/how-to-draw-a-segment-of-the-iris-shutter-using-quartzcore)）。

# qt - qt自定义小部件

> ID：15717310
> 
> 赞同：0
> 
> 时间：2013-03-30T10:10:59.073
> 
> 标签：qt, qt5

我有一个定制的小部件。这个通过动画加载两个图像的自定义小部件应该占据主窗口的两个小角。我面临的问题是，当我执行程序时，它会清除主窗口中的所有内容，并且只显示作为图像的自定义小部件。这是因为我覆盖了自定义小部件中的 paintEvent 函数。那么，现在，我如何告诉主窗口保留自己的paintEvent 以及执行自定义的小部件paintEvent？

好吧，我通过将小部件设置为自定义对象库来解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T10:14:22.790

paintEvent 函数是虚拟的，并且被您的函数覆盖（假设您的自定义小部件是从 QWidget 派生的）。如果你想调用基类，你可能想在你的paintEvent()中调用QWidget::paintEvent()。

# android - android上的Facebook登录：在登录按钮上单击两次会产生错误

> ID：15717311
> 
> 赞同：1
> 
> 时间：2013-03-30T10:11:17.003
> 
> 标签：android, facebook, login

我有一个需要 Facebook 登录的 Android 应用程序。当尝试通过 Facebook 登录时，输入登录名和密码，单击“登录”按钮两次将产生以下错误：

> 您请求的页面现在无法显示。它可能暂时不可用，您点击的链接可能已损坏或过期，或者您可能无权查看此页面。

我的问题是：

*   有没有其他人遇到这个错误？
*   这是什么原因造成的？
*   知道如何在我的应用程序端解决这个问题吗？

谢谢！

# java - By Passing J_security_check

> ID：15717317
> 
> 赞同：0
> 
> 时间：2013-03-30T10:11:46.943
> 
> 标签：java, apache, login, j-security-check

I am trying to add new functionality to a formerly built web application. The application uses `j_security_check` . I want to use another single-sign-on service to log in to the application. What is the best practice for that?

P.S. I can't see where `j_security_check` checks for the user name and password. Any help with that will be appreciated.

Edit: actually what i want to do is to use another sso service to login to j_security_check. the other SSO System is another we application. user logins to that application and that application post me a token. After it posts me the token I can get the user id of logged in person.

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T10:21:42.963

`j_security_check` or `Realm` is a way that web container or `tomcat` check the login itself! If you check the `server.xml` in configuration files of `tomcat` or `context.xml` in your `META-INF` files, you can see the `Realm` tag which shows how the `Realm` check the login functionality.

You cannot use `Realm` for more than one times in an application. if you want to implement another single sign on, you should implement it yourself. But I don't know why you want to implement two single sign on! it is really strange!

The best way I think is putting somethings in `session` and check it to make sure that user is logging in.

As you said that there are too many pages and handling this kind of projects is really hard, I suggest you to use `Front Controller` pattern or `Facade` Design pattern. You can check the session only in `Front Controller`. You can read more here:

[http://en.wikipedia.org/wiki/Front_Controller_pattern](http://en.wikipedia.org/wiki/Front_Controller_pattern)

[http://java.dzone.com/articles/understanding-front-controller](http://java.dzone.com/articles/understanding-front-controller) [http://www.allapplabs.com/j2ee_design_patterns/j2ee_design_patterns_front_controller.htm](http://www.allapplabs.com/j2ee_design_patterns/j2ee_design_patterns_front_controller.htm)

# c# - Store encryption key in database

> ID：15717323
> 
> 赞同：0
> 
> 时间：2013-03-30T10:12:25.617
> 
> 标签：c#, encryption

I have two windows phone applications. First app sends data to server and second app(main) reads data from server. Datas are encrypted with Rijndael. Both applications have saved encrypted key in applications settings. But I'm thinking about storing encrypted key in DB. Is is good place for saving it in DB?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T10:27:52.857

If you random generate your key you can't share it between two Apps, since two Apps can't access the same Storage on a Windows Phone. Meaning you would have to store the Key in an online Database, but then i don't understand why you even encript it, since the key can be accessed really easily.

If you always use the same Key you can hardcode it in your app and try to obfuscate it. Even though i don't think that really works.

If you generate your Keys based on the Phones Hardware, like it's mac adress you are rather save, but then it won't work with two different Phones.

I would generate your key based on a Username/Password that your Users choose, that way it's save and works on different Phones.

So, i would not save the Key in a DB.

If you by any chance talk about an Encryption Key only and use something like RSA that needs a different decription Key... just store both in the App, then you have less Sevr-Client traffic.

# c# - LINQ to Entities 不支持指定的类型成员“Ticks”

> ID：15717326
> 
> 赞同：0
> 
> 时间：2013-03-30T10:12:39.030
> 
> 标签：c#, entity-framework, linq

我想保存数据库这个对象

```
 var logDetail = new LogDetail()
                {
                    CreatorUserName = "RCM",
                    EntryDate = DateTime.Now,
                    LogId = desLogId,
                    FollowUpcode = ExtensionManager.Instance.GetFollowUpCode(),
                    InternalExtensionId = 1013,
                    IsSuccess = true,
                    LogDetailTime = DateTime.Now,
                    OperationId = Convert.ToInt32(ConfigurationManager.AppSettings["InternalOprationId"]), 
```

但我收到此错误：

> LINQ to Entities 不支持指定的类型成员“Ticks”。仅支持初始化程序、实体成员和实体导航属性。

```
 at System.Data.Objects.ELinq.ExpressionConverter.MemberAccessTranslator.TypedTranslate(ExpressionConverter parent, MemberExpression linq)
   at System.Data.Objects.ELinq.ExpressionConverter.TypedTranslator`1.Translate(ExpressionConverter parent, Expression linq)
   at System.Data.Objects.ELinq.ExpressionConverter.TranslateExpression(Expression linq)
   at System.Data.Objects.ELinq.ExpressionConverter.EqualsTranslator.TypedTranslate(ExpressionConverter parent, BinaryExpression linq)
   at System.Data.Objects.ELinq.ExpressionConverter.TypedTranslator`1.Translate(ExpressionConverter parent, Expression linq)
   at System.Data.Objects.ELinq.ExpressionConverter.TranslateExpression(Expression linq)
   at System.Data.Objects.ELinq.ExpressionConverter.BinaryTranslator.TypedTranslate(ExpressionConverter parent, BinaryExpression linq)
   at System.Data.Objects.ELinq.ExpressionConverter.TypedTranslator`1.Translate(ExpressionConverter parent, Expression linq)
   at System.Data.Objects.ELinq.ExpressionConverter.TranslateExpression(Expression linq)
   at System.Data.Objects.ELinq.ExpressionConverter.BinaryTranslator.TypedTranslate(ExpressionConverter parent, BinaryExpression linq)
   at System.Data.Objects.ELinq.ExpressionConverter.TypedTranslator`1.Translate(ExpressionConverter parent, Expression linq)
   at System.Data.Objects.ELinq.ExpressionConverter.TranslateExpression(Expression linq)
   at System.Data.Objects.ELinq.ExpressionConverter.TranslateLambda(LambdaExpression lambda, DbExpression input)
   at System.Data.Objects.ELinq.ExpressionConverter.TranslateLambda(LambdaExpression lambda, DbExpression input, DbExpressionBinding& binding)
   at System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.AggregateTranslator.Translate(ExpressionConverter parent, MethodCallExpression call)
   at System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.SequenceMethodTranslator.Translate(ExpressionConverter parent, MethodCallExpression call, SequenceMethod sequenceMethod)
   at System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.TypedTranslate(ExpressionConverter parent, MethodCallExpression linq)
   at System.Data.Objects.ELinq.ExpressionConverter.TypedTranslator`1.Translate(ExpressionConverter parent, Expression linq)
   at System.Data.Objects.ELinq.ExpressionConverter.TranslateExpression(Expression linq)
   at System.Data.Objects.ELinq.ExpressionConverter.Convert()
   at System.Data.Objects.ELinq.ELinqQueryState.GetExecutionPlan(Nullable`1 forMergeOption)
   at System.Data.Objects.ObjectQuery`1.GetResults(Nullable`1 forMergeOption)
   at System.Data.Objects.ObjectQuery`1.System.Collections.Generic.IEnumerable<T>.GetEnumerator()
   at System.Linq.Enumerable.Single[TSource](IEnumerable`1 source)
   at System.Data.Objects.ELinq.ObjectQueryProvider.<GetElementFunction>b__3[TResult](IEnumerable`1 sequence)
   at System.Data.Objects.ELinq.ObjectQueryProvider.ExecuteSingle[TResult](IEnumerable`1 query, Expression queryRoot)
   at System.Data.Objects.ELinq.ObjectQueryProvider.System.Linq.IQueryProvider.Execute[S](Expression expression)
   at System.Linq.Queryable.Count[TSource](IQueryable`1 source, Expression`1 predicate)
   at Asa.CallCenter.DataAccess.Repository.LogDetailRepository.ExistLogDetail(Double logId, Int32 operationId, DateTime logDetailTime)
   at Asa.CallCenter.Business.BusinessUnitOfWork.LogDetailUnitOfWork.ExistLogDetail(Double logId, Int32 operationId, DateTime LogDetailTime)
   at Asa.CallCenter.Service.CallCenterService.ExistLogDetail(Double logId, Int32 operationId, DateTime LogDetailTime)
   at SyncInvokeExistLogDetail(Object , Object[] , Object[] )
   at System.ServiceModel.Dispatcher.SyncMethodInvoker.Invoke(Object instance, Object[] inputs, Object[]& outputs)
   at System.ServiceModel.Dispatcher.DispatchOperationRuntime.InvokeBegin(MessageRpc& rpc)
   at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage5(MessageRpc& rpc)
   at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage41(MessageRpc& rpc)
   at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage4(MessageRpc& rpc)
   at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage31(MessageRpc& rpc)
   at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage3(MessageRpc& rpc)
   at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage2(MessageRpc& rpc)
   at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage11(MessageRpc& rpc)
   at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage1(MessageRpc& rpc)
   at System.ServiceModel.Dispatcher.MessageRpc.Process(Boolean isOperationContextSet)

***********
An error occurred while updating the entries. See the inner exception for details.
***********
   at System.Data.Mapping.Update.Internal.UpdateTranslator.Update(IEntityStateManager stateManager, IEntityAdapter adapter)
   at System.Data.EntityClient.EntityAdapter.Update(IEntityStateManager entityCache)
   at System.Data.Objects.ObjectContext.SaveChanges(SaveOptions options)
   at System.Data.Objects.ObjectContext.SaveChanges()
   at RepoLib.RTS.Infra.UnitOfWork.EntityFrameWorkPersistAction.SaveChangeEfected()
   at RepoLib.RTS.Infra.UnitOfWork.EntityFrameWorkPersistAction.Add[TE](TE entity)
   at RepoLib.RTS.Infra.EFDataAccessHelper.RepositoryManager.GenericRepository`1.Add[TE](TE entity)
   at Asa.CallCenter.DataAccess.Repository.LogDetailRepository.AddNewLogDetail(LogDetail logDetail)
   at Asa.CallCenter.Business.BusinessUnitOfWork.LogDetailUnitOfWork.AddNewLogDetail(LogDetail logDetail)
   at Asa.CallCenter.Service.CallCenterService.AddNewLogDetail(LogDetail logDetail)
   at SyncInvokeAddNewLogDetail(Object , Object[] , Object[] )
   at System.ServiceModel.Dispatcher.SyncMethodInvoker.Invoke(Object instance, Object[] inputs, Object[]& outputs)
   at System.ServiceModel.Dispatcher.DispatchOperationRuntime.InvokeBegin(MessageRpc& rpc)
   at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage5(MessageRpc& rpc)
   at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage41(MessageRpc& rpc)
   at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage4(MessageRpc& rpc)
   at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage31(MessageRpc& rpc)
   at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage3(MessageRpc& rpc)
   at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage2(MessageRpc& rpc)
   at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage11(MessageRpc& rpc)
   at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage1(MessageRpc& rpc)
   at System.ServiceModel.Dispatcher.MessageRpc.Process(Boolean isOperationContextSet)
***********
The INSERT statement conflicted with the FOREIGN KEY constraint "FK_LogDetail_Log". The conflict occurred in database "AgahRBS", table "clc.Log", column 'Id'.
The statement has been terminated.
***********
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.Mapping.Update.Internal.DynamicUpdateCommand.Execute(UpdateTranslator translator, EntityConnection connection, Dictionary`2 identifierValues, List`1 generatedValues)
   at System.Data.Mapping.Update.Internal.UpdateTranslator.Update(IEntityStateManager stateManager, IEntityAdapter adapter) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T10:50:59.857

看起来根本问题就是这个异常：

> INSERT 语句与 FOREIGN KEY 约束“FK_LogDetail_Log”冲突。冲突发生在数据库“AgahRBS”、表“clc.Log”、列“Id”中。该语句已终止。

看起来你需要先写一个条目`clc.Log`。

# php - 选择多列时，脚本（while-loop）停止并且没有输出

> ID：15717328
> 
> 赞同：-1
> 
> 时间：2013-03-30T10:13:09.727
> 
> 标签：php, mysql, mysqli, while-loop

我想从 TABLE 中选择多个列，但是一旦 while 循环开始，脚本就无法工作。我的 php 和 html 代码是：

```
<table border="0">
include_once $_SERVER['DOCUMENT_ROOT'].'/include/db.inc.php' ;
$sql="select post_title,post_desc,post_date,course,semester,firstname,lastname 
      FROM wbut_forum_posts left join users on post_by = email
      ORDER BY post_id DESC LIMIT 25";
$result = mysqli_query($link,$sql );

if (!$result) {
    include_once "wall.html.php";
    echo'<tr><td align="center"> OOOOPPPPPSSS!!!SORRY,UNABLE TO DISPLAY LATEST 25 TOPICS</td></tr>';
    exit();
}

while ($row = mysqli_fetch_array($result)) {
    $titles[] = $row['post_title'];
    $descs[] = $row['post_desc'];
    $dates[] = $row['post_date'];
    $courses[] = $row['course'];
    $semesters[] = $row['semester'];
    $firstnames[] = $row['firstname'];
    $lastnames[] = $row['lastname'];
}

$cnt=0;
foreach ($titles as $x) {
    $title[$cnt]=$x;
    $cnt=$cnt+1;
}

$cnt=0;
foreach ($firstnames as $x) {
    $firstname[$cnt]=$x;
    $cnt=$cnt+1;
}

$cnt=0;
foreach ($lastnames as $x) {
    $lastname[$cnt]=$x;
    $cnt=$cnt+1;
}

$cnt=0;
foreach ($descs as $x) {
    $descs[$cnt]=$x;
    $cnt=$cnt+1;
}

$cnt=0;
foreach ($dates as $x) {
    $date[$cnt]=$x;
    $cnt=$cnt+1;
}

$cnt=0;
foreach ($courses as $x) {
    $courses[$cnt]=$x;
    $cnt=$cnt+1;
}

$cnt=0;
foreach ($semesters as $x) {
    $semester[$cnt]=$x;
    $cnt=$cnt+1;
}

echo'AFTER FOREACHES';
for ($i=0;$i<$cnt;$i=$i+1) {

    echo'<table border="0">';
        echo'<tr>';
            echo '<td align="left"><span class="style1">';
                echo $firstname[$i] . " " . $lastname[$i] ;
            echo '</span></td>';
            echo '<td align="center"  colspan="2">RELATED COURSE :';
                echo $course[$i];
                echo '&nbsp;&nbsp;&nbsp;&nbsp; RELATED SEMESTER:';
                echo $semester[$i];
            echo '</td>';
        echo '</tr>';
        echo '<tr>';
            echo '<td>&nbsp;</td>';
            echo'<td align="left"><span class="style3">';
                echo  $desc[$i];
            echo '</span></td>';
            echo'<td valign="baseline">';
                echo $date[$i];
            echo '</td>';
        echo '</tr>';
        echo'<tr>';
            echo '<td>&nbsp;</td>';
            echo '<td align="left" background="reply_bg.gif"><span class="style3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;';
                echo 'echo the replies here';
                echo '</span>';
            echo '</td>';
            echo'<td>&nbsp;</td>';
        echo '</tr>';
        echo '<tr>';
            echo '<td>&nbsp;</td>';
            echo '<form action="reply.html.php" method="post"><td align="left" ><textarea rows="5" cols="40" name="reply" id="reply"></textarea>    </td><td valign="baseline"><input type="submit" name="asd" value="REPLY" /><input type="hidden" name="reply" value="reply" /></td></form>';
        echo '  </tr>';
        echo '</table>';        
    }
    echo' CLOSING MAIN FOR ';
?>
</table> 
```

***注1：不工作..我已经在不同的地方回响。我注意到它在 while 循环开始时完全停止***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T10:21:26.460

1.  变量之后`$sql`，在哪里`$result`？
2.  `$result = mysql_query($sql) **or die(mysql_error)** // to give the output error from MySQL if there is any`
3.  在 之前`while`，使用`var_dump($row)`或`print_r($row)`。
4.  如果您遇到空白页或没有错误报告，`error_reporting(E_ALL);`请在脚本的开头使用。

编辑：对不起，您使用的是 MySQLi。使用`$mysqli->error`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-21T08:35:25.357

您的代码的第一行没有打开 PHP 标记。它应该是：

```
<table border="0"><? 
```

# php - php中的简单登录

> ID：15717330
> 
> 赞同：4
> 
> 时间：2013-03-30T10:13:18.247
> 
> 标签：php

我是 php 新手。我创建了一个简单的用户和密码登录表单，如下所示：

```
if(isset($_POST['posted'])){

    $name= $_POST['name'];
    $pass= $_POST['pass'];

    if(!is_string($name))
    {
    echo "please enter name in alphabets";
    }
    else if($name=='muneeb' && $pass=='abcd')
    {
        header("location:1st.php");
    }
    else
    {
        echo "you entered wrong password";
    } } 
```

但只有一个条件运行。我想跑所有三个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T10:19:24.397

它应该是

```
if(isset($_POST['posted']))
    {

        $name= $_POST['name'];
        $pass= $_POST['pass'];

        if(is_numeric($name))
        {
            echo "please enter name in alphabets";
            exit;
        }

        if($name=='muneeb' && $pass=='abcd')
        {
            header("location:1st.php");
            exit;
        }
        else
        {
            echo "you entered wrong password";
            exit;
        } 
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T12:30:56.920

在 Marko D 对我的帖子发表评论后，编辑。

注意 $name 和 $pass 没有空检查，考虑使用简单的 if(empty) 检查空字段并输出错误消息。

关于 is_numeric，Marko D 是对的，它仅适用于数字，不适用于特殊字符，按照他的建议，这里有一个如何使用 ctype_alpha 的示例。

```
$name = $_POST['name'];
if (!ctype_alpha($name)) {
   echo('Your name may include letters only');
} else {
   // proceed to function
} 
```

# ruby-on-rails - rmagick自动换行文本未定义方法'write'

> ID：15717332
> 
> 赞同：0
> 
> 时间：2013-03-30T10:13:24.177
> 
> 标签：ruby-on-rails, ruby, annotations, imagemagick, rmagick

RMagick 应该在图像上自动换行文本并为该文本添加断线。这是我这样做的代码：

```
def word_wrap(text, columns = 80)
text.split("\n").collect do |line|
  line.length > columns ? line.gsub(/(.{1, #{columns}})(\s+|$)/, "\\1\n").strip : line
end * "\n"
end

process :caption

def caption
  manipulate! do |source|

    txt = Magick::Draw.new
    txt.font_family = "Impact"
    txt.fill = "#ffffff"

    position = 80
    top_caption = model.top_caption
    word_wrap(top_caption, 90).split("\n").each do |row|
      source.annotate(txt, 0, 0, 0, position +=20, row)
    end
  end
end
end 
```

我得到这个错误：

（asasfasf 是我在文本中写的文本 - top_caption）

```
 NoMethodError in AnswersController#create

 undefined method `write' for ["asasfasf"]:Array

 app/uploaders/answer_uploader.rb:53:in `caption'
 app/controllers/answers_controller.rb:11:in `create' 
```

创建动作：

```
def create
    @answer = Answer.new(params[:answer])
    @answer.user_id = current_user.id
    @answer.picture_id = daily_picture.id
    @answer.answer = daily_picture.image
    if @answer.save
      redirect_to root_path
    end
  end 
```

和控制台中的错误：

```
Completed 500 Internal Server Error in 69ms

NoMethodError (undefined method `annotate' for #<Picture:0x007ffd2f578c88>):
  app/uploaders/answer_uploader.rb:64:in `block (2 levels) in caption'
  app/uploaders/answer_uploader.rb:63:in `each'
  app/uploaders/answer_uploader.rb:63:in `block in caption'
  app/uploaders/answer_uploader.rb:53:in `caption'
  app/controllers/answers_controller.rb:11:in `create' 
```

代码中的问题在哪里？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-09-04T01:42:03.870

要自动换行，您需要使用标题：

```
phrase = 'Cras mattis consectetur purus sit amet fermentum. Cras justo odio, dapibus ac facilisis in, egestas eget quam.'
BACKGROUND_PATH = Rails.root.join('image_dir', 'background.jpg')    
background = Magick::Image.read(BACKGROUND_PATH).first
image = Magick::Image.read("caption:#{my_text}") do
  # puts self.methods
  self.size = '500x' #Text box size
  self.background_color = 'none' #transparent
  self.pointsize = 30 # font size
  self.font = 'Tahoma' #font family
  self.fill = 'gray' #font color
  self.gravity = Magick::CenterGravity #Text orientation
end.first
background.composite!(image, Magick::NorthEastGravity, 20, 40, Magick::OverCompositeOp)
background.write('/image/path/image_name.jpg') 
```

# html5-canvas - 测试代码以捕捉盒子

> ID：15717333
> 
> 赞同：0
> 
> 时间：2013-03-30T10:13:28.130
> 
> 标签：html5-canvas

我创建了一个我做不到的画布测试问题。从上面的盒子掉到下面的盒子里想动想带一个事件发生。感谢您的帮助

[http://jsbin.com/imitiv/1/edit](http://jsbin.com/imitiv/1/edit)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T14:33:07.427

我想我明白。

如何通过按键向左/向右移动底部框

```
// new stuff -- put this just before your init()
window.addEventListener("keydown", keyd, false);
window.addEventListener("keyup", keyu, false); 
```

如何测试顶部矩形是否击中底部矩形

```
function hit(rect1, rect2) {
  return (rect1.x <= rect2.x + rect2.r &&
          rect2.x <= rect1.x + rect1.r &&
          rect1.y <= rect2.y + rect2.r &&
          rect2.y <= rect1.y + rect1.r)
} 
```

# google-chrome-extension - chrome 同步存储来存储和更新数组

> ID：15717334
> 
> 赞同：8
> 
> 时间：2013-03-30T10:13:35.427
> 
> 标签：google-chrome-extension, google-chrome-storage

是否可以将数组存储在 chrome 存储同步中并检索它们？

```
var uarray = [abc,def,ghi]; 
```

是否可以更新存储中的存储数组？

```
var tobeadded = jkl;
uarray.push(tobeadded); 
```

这是文档中的语法

```
chrome.storage.sync.set({'value': theValue}, function() {
    // Notify that we saved.
    message('Settings saved');
}); 
```

我的书签扩展，需要存储书签的 id 并检索它们以进行内部搜索和基于它的东西。书签需要定期更新存储同步中的 ID。

谢谢！！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-01-12T23:15:19.643

You can read the existing values, append the new value and store back.

Following sample code should allow you to add `newArrEntry` into existing `array` stored in `chrome.storage.sync`

```
chrome.storage.sync.get(["storagekey"], function(result) {
        var array = result[storagekey]?result[storagekey]:[];

        array.unshift(newArrEntry);

        var jsonObj = {};
        jsonObj[storagekey] = array;
        chrome.storage.sync.set(jsonObj, function() {
            console.log("Saved a new array item");
        });
    }); 
```

# python - 从 Python 中非常复杂的 JSON 文件中提取

> ID：15717343
> 
> 赞同：1
> 
> 时间：2013-03-30T10:14:28.453
> 
> 标签：python, json, parsing, dictionary

我正在尝试使用 Python 从一个非常复杂的 JSON 文件中获取一些信息。以下只是文件中的一个对象：

```
{
"__metadata": {
"uri": "/Students/news/_vti_bin/ListData.svc/Posts(4)", "etag": "W/\"2\"", "type": "Microsoft.SharePoint.DataService.PostsItem"
}, "Title": "Term 2 Round 2 draws", "Body": "<div class=\"ExternalClass0BC1BCA4D3EE45A4A1F34086034FE827\"><p>\u200bAs there is no Gonzagan this week the following Senior Sport information has been provided here.\r\n\t    </p>\r\n<ul><li><a target=\"_blank\" href=\"/Intranet/students/news_resources/2011/Term2/Knox _wet_weather.pdf\">Knox _wet_weather</a> Cancellations, please see <a target=\"_blank\" href=\"http://www.twitter.com/SACWetWeather\">twitter page</a> for further news.</li>\r\n<li><a target=\"_blank\" href=\"/Intranet/students/news_resources/2011/Term2/2011_Football_round_2.pdf\">2011 Football draw Round 2</a></li>\r\n<li><a target=\"_blank\" href=\"/Intranet/students/news_resources/2011/Term2/2011_Rugby_round_2.pdf\">2011 Rugby draw Round 2</a></li></ul>\r\n<p></p></div>", "Category": {
"__deferred": {
"uri": "/Students/news/_vti_bin/ListData.svc/Posts(4)/Category"
}
}, "Published": "\/Date(1308342960000)\/", "ContentTypeID": "0x0110001F9F7104FDD3054AAB40D8561196E09E", "ApproverComments": null, "Comments": {
"__deferred": {
"uri": "/_vti_bin/ListData.svc/Posts(4)/Comments"
}
}, "CommentsId": 0, "ApprovalStatus": "0", "Id": 4, "ContentType": "Post", "Modified": "\/Date(1309122092000)\/", "Created": "\/Date(1309120597000)\/", "CreatedBy": {
"__deferred": {
"uri": "/Students/news/_vti_bin/ListData.svc/Posts(4)/CreatedBy"
}
}, "CreatedById": 1, "ModifiedBy": {
"__deferred": {
"uri": "/Students/news/_vti_bin/ListData.svc/Posts(4)/ModifiedBy"
}
}, "ModifiedById": 1, "Owshiddenversion": 2, "Version": "1.0", "Path": "/Students/news/Lists/Posts"
}, 
```

我无法解决编辑这个问题。将其转换为 python 字典似乎会混淆属性的顺序，使我无法找到一个对象的开始位置和另一个对象的开始位置。对我来说，仅提取“标题”、“正文”和“已发布”键和值的最佳方法是什么，我将如何为多个对象执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T10:20:13.617

```
import json

obj = json.loads(json_input)

for record in obj:
    print obj["title"]
    print obj["body"]
    print obj["published"] 
```

假设 json_input 是上面的代码片段，采用字符串形式，或者已经通过文件读入。另请注意，我假设上述代码段是基于您的问题的集合。

**更新**

根据该示例，您有另一个层，该层在最初发布的代码段中不存在。

将循环更改为：

```
for record in obj["d"]["results"]:
    ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T10:20:27.113

我假设您的主要 JSON 对象是这些对象的数组。以下是我打印出您所追求的信息的方式：

```
import json

main_array = json.load('my_json_file.json')

for sub_object in main_array:
    print "Title: {}\nBody: {}\nPublished: {}\n".format(
        sub_object['Title'], sub_object['Body'], sub_object['Published']
    ) 
```

# php - MySQL 数据库，如银行账户日常交易

> ID：15717347
> 
> 赞同：-2
> 
> 时间：2013-03-30T10:15:00.600
> 
> 标签：php, mysql

我有一个包含两个表的数据库：`users`和`payments`

该`users`表填充有

```
name
address
age
plan 
```

该`payment`表填充有

```
name, address
age, plan
paidamount, transactionid
paiddate, receivedby
updatedby, authorisedby 
```

用户表包含大约 1000 行；他们是固定的，他们定期支付一定数额的储蓄。

我需要将用户表中的用户数据获取到带有表单的网页中，同时将他们的付款信息插入其中，并将整个数据发布到我使用下面代码的付款表中，但我无法发布用户表用这种形式的数据。

```
INSERT INTO Payments
    (ampaid, rcamo, userchar, totamo) VALUES 
    ('@ampaid', '@rcamo', '@userchar', '@totamo'),
    ('$_POST[ampaid]','$_POST[rcamo]','$_POST[userchar]','$_POST[totamo]');
 (SELECT name, ero, srno, address FROM Users WHERE srno='@srno')); 
```

`users`但是当我更新时我无法从表中获取`payments`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T13:27:27.007

## 首先

因此，切勿在查询[中](https://stackoverflow.com/questions/60174)`$_POST`包含值。[使用PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli)参数化或准备它们。（此外，该语法对于包含在字符串中是无效的，因此您正在尝试将文字字符串添加到字段中）`'$_POST[var]'``INT`

您真正的问题是您没有使用 MySQL，因为它应该使用（一个**RDBMS**。请参阅下一节：

* * *

## 关系

查找[外键](https://en.wikipedia.org/wiki/Foreign_key)。它们将您的表格链接在一起，因此您**永远不应该在每次更新时将表格的内容插入另一个表格**。您应该在用户表中插入行的 ID 来执行此操作，然后使用[`JOIN`](http://dev.mysql.com/doc/refman/5.0/en/join.html).

* * *

## 实际插入

要一次插入多个值，请使用以下语法：

```
INSERT INTO
    `table` (`col1`, `col2`) VALUES
    (:val1, :val2), (:val3, :val4) 
```

并创建这个数组：

```
Array(
    ":val1" => $val1,
    ":val2" => $val2, // etc.
); 
```

这是使用[PDO](http://php.net/pdo)。查找它，学会爱它，等等。 StackOverflow 上有很多资源，包括示例和偶尔出现的陷阱。

## 入门

```
$params = array(
    ":ampaid" => $_POST["ampaid"], // tip: use quotes for array keys...
    ":rcamo" => $_POST["rcamo"], 
    ":userchar" => $_POST["userchar"],
    ":totamo" => $_POST["totamo"]
);

$db = new PDO($connection_info, $user, $pass); // from a config file
$db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); // throw errors

$sql = "INSERT INTO `payment` (`ampaid`, `rcamo`, `userchar`, `totamo`) " .
       "VALUES (:ampaid, :rcamo, :userchar, :totamo)";

$prepare = $db->prepare($sql); // prepare query
$prepare->execute($params); // execute query using bound parameters 
```

我会把错误处理留给你作为家庭作业。（提示`try-catch`：）

您不能使用查询结果在同一个调用`SELECT`中填充`INSERT`查询（如果我错了，请纠正我，但这仍然是一个糟糕的主意）。

* * *

## 最后

**切勿**插入*未经处理*或*未经准备*的用户输入。如果这是一个真正的银行应用程序（我有点怀疑......希望如此），我会非常害怕相信我的钱。事实上，我更愿意通过不可避免的诉讼来赚钱，所以要小心并***绝对清理你收到的任何用户输入，期间***。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-30T10:39:26.500

我从上面的讨论中得到的是@user2226832 想要在表中插入多个值，所以你可以这样做 -

```
INSERT INTO payment 
    (ampaid, rcamo, userchar, totamo) VALUES 
    ('@ampaid', '@rcamo', '@userchar', '@totamo'),
    ('$_POST[ampaid]','$_POST[rcamo]','$_POST[userchar]','$_POST[totamo]'); 
```

注意：代码未经测试，但语法正确，只需注意单引号即可。

# android - 如何将多个线性布局添加到单个 ScrollView？

> ID：15717349
> 
> 赞同：3
> 
> 时间：2013-03-30T10:15:03.787
> 
> 标签：android, android-emulator

我只是想问一下，当我在某个地方读到您只能有一个线性布局时，我们能否在一个滚动视图中添加多个线性布局。在这里，我复制粘贴我想要滚动的 xml 代码。

```
 <TextView 
        android:text=" First Name :"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"/>

    <EditText
        android:id="@+id/edtd_fname"
        android:layout_width="190dp"
        android:layout_height="wrap_content" 
        android:ems="15"/>

</LinearLayout>

    <LinearLayout android:orientation="horizontal" android:layout_width="wrap_content" android:layout_height="wrap_content">
         <TextView 
        android:text="Last Name:"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"/>

    <EditText
        android:id="@+id/edtd_lname"
        android:layout_width="190dp"
        android:layout_height="wrap_content" 
        android:ems="15"/>

    </LinearLayout>

    <LinearLayout android:orientation="horizontal" android:layout_width="wrap_content" android:layout_height="wrap_content">
         <TextView 
        android:text="Disease Name:"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"/>

    <EditText
        android:id="@+id/edtd_disease"
        android:layout_width="190dp"
        android:layout_height="wrap_content"/>

    </LinearLayout>
    <LinearLayout android:orientation="horizontal" android:layout_width="wrap_content" android:layout_height="wrap_content">
         <TextView 
        android:text="Mobile No:"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"/>
        <EditText
        android:id="@+id/edtd_mno"
        android:layout_width="190dp"
        android:layout_height="wrap_content" 
        android:ems="10" android:inputType="number"/>
    </LinearLayout>

    <LinearLayout android:orientation="horizontal" android:layout_width="wrap_content" android:layout_height="wrap_content">
         <TextView 
        android:text="Clinic  No:"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"/>

                <EditText
        android:id="@+id/edtd_cno"
        android:layout_width="190dp"
        android:layout_height="wrap_content" 
        android:ems="10" android:inputType="number"/>
    </LinearLayout>

    <LinearLayout android:orientation="horizontal" android:layout_width="wrap_content" android:layout_height="wrap_content">
         <TextView 
        android:text="Home No :"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
       />

                <EditText
        android:id="@+id/edtd_hno"
        android:layout_width="190dp"
        android:layout_height="wrap_content" 
        android:ems="10" android:inputType="number"/>
    </LinearLayout>
    <LinearLayout android:layout_height="wrap_content" android:layout_width="wrap_content" android:orientation="horizontal" android:layout_marginTop="10dp">
    <TextView 
        android:text= "Reminder:"
       android:layout_height="wrap_content"
        android:layout_width="wrap_content"/>

    <Spinner
        android:id="@+id/spn_reminder"
        android:layout_width="167dp"
        android:layout_height="50px"
        android:entries="@array/reminder" />
 </LinearLayout>
   <LinearLayout android:orientation="vertical" android:layout_width="wrap_content" android:layout_height="wrap_content">
<TextView android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="Appointment On Date-Time:"/>

<RadioGroup android:id="@+id/rgapp" android:layout_width="wrap_content" android:layout_height="wrap_content" android:orientation="horizontal">
    <RadioButton android:id="@+id/rdyes" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="Yes"/>
    <RadioButton android:id="@+id/rdno" android:layout_width="wrap_content" android:layout_height="wrap_content" android:checked="true" android:text="No"/>
</RadioGroup>
</LinearLayout>

   <LinearLayout android:orientation="vertical" android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_marginTop="5dp" android:id="@+id/ll_doc_1">      
    <TimePicker
        android:id="@+id/time1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />
    <DatePicker android:id="@+id/Date1" android:layout_width="wrap_content" android:layout_height="wrap_content" android:calendarViewShown="false"/>

     </LinearLayout>  
       <LinearLayout android:layout_height="wrap_content" android:layout_width="wrap_content" android:orientation="horizontal" android:layout_gravity="center_horizontal" android:layout_marginTop="5dp">
        <TextView
        android:id="@+id/txtDsave"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:drawableTop="@drawable/save"/>
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-30T10:20:14.850

Scrollview 只能有一个直接子级。您应该将所有这些布局放在一个线性布局中，然后将该布局放在滚动视图中。

像这样试试

```
<ScrollView 
   <LinearLayout     /// mainlayout 
       <LinearLayout   /// childlayout 1
       </LinearLayout>

       <LinearLayout   /// childlayout 2
       </LinearLayout>

       <LinearLayout   /// childlayout 3
       </LinearLayout>

   </LinearLayout>
</ScrollView 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T10:33:02.993

ScrollView 仅包含一个直接子级。如果您使用多个这会给出错误 scrollview 只有一个孩子。所以你必须这样做 Scrollview 包含一个父 View linearlayout ，然后 parent linear 包含它的 on child 。

```
<LinearLayout                          
    android:id="@+id/linear_login"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="20dp"
        android:layout_marginRight="20dp"
        android:layout_marginTop="15dp"
        android:background="@drawable/rounded_backgroud"
        android:orientation="vertical" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginLeft="10dp"
            android:layout_marginRight="10dp"
            android:layout_marginTop="10dp"
            android:orientation="horizontal" >

            <TextView
                android:id="@+id/txtName"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/UserName"
                android:textSize="15sp"
                android:textStyle="bold"
                android:width="100dp" />

            <EditText
                android:id="@+id/edName"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:background="@drawable/rounded_edittext"
                android:ems="10"
                android:hint="Required"
                android:imeOptions="actionNext"
                android:inputType="textPersonName"
                android:maxLines="1"
                android:singleLine="true" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="10dp"
            android:layout_marginLeft="10dp"
            android:layout_marginRight="10dp"
            android:layout_marginTop="10dp"
            android:orientation="horizontal" >

            <TextView
                android:id="@+id/txtPass"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/PassWord"
                android:textSize="15sp"
                android:textStyle="bold"
                android:width="100dp" />

            <EditText
                android:id="@+id/edPass"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:background="@drawable/rounded_edittext"
                android:ems="10"
                android:hint="Required"
                android:imeOptions="actionGo"
                android:inputType="textPassword"
                android:maxLines="1"
                android:password="true"
                android:singleLine="true" />
        </LinearLayout>
    </LinearLayout>

    <Button
        android:id="@+id/btnLogin"
        android:layout_width="150dp"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_marginTop="20dp"
        android:text="@string/btn_GO"
        android:textColor="@color/title_color" />

    <TextView
        android:id="@+id/txtVersion"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:layout_marginTop="10dp"
        android:textColor="@color/title_color" />
</LinearLayout> 
```

# c - Libpq using large amount of memory for simple example

> ID：15717351
> 
> 赞同：3
> 
> 时间：2013-03-30T10:15:31.647
> 
> 标签：c, postgresql, libpq

Why does the following code use 1.2GB of memory to execute? I was expecting memory usage to be relatively flat regardless of the number passed to generate_series, instead it is steadily increasing. Please - tell me I'm doing something wrong!

```
if (!PQsendQuery(conn, "select generate_series(1, 10000000)"))
    exit(1);

int i, value;
while (res = PQgetResult(conn)) {
    for (i = 0; i < PQntuples(res); i++) {
        value = atoi(PQgetvalue(res, i, 0));
    }
    PQclear(res);
}

printf("%d\n", value);
PQfinish(conn); 
```

I've put the full source code for this example on [pastebin](http://pastebin.com/UGL9VVbW).

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T11:49:40.890

It appears that by default libpq buffers the entire result, rather than reading it in chunks.

In 9.2 there is a way to change this behaviour, see [Single row mode](http://www.postgresql.org/docs/9.2/static/libpq-single-row-mode.html).

I've tried this out, adding a call to PQsetSingleRowMode(conn), directly after PQsendQuery(), drops memory usage down to a few MB. Problem solved!

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T12:37:07.953

The canonical way of dealing with potentially large resultsets is to declare a CURSOR for the query and execute successive [FETCH](http://www.postgresql.org/docs/current/static/sql-fetch.html) calls to retrieve them by chunks.

That's also what `psql` does when the `FETCH_COUNT` variable is set.

# meteor - Meteor 服务器反应性

> ID：15717352
> 
> 赞同：1
> 
> 时间：2013-03-30T10:15:31.800
> 
> 标签：meteor

我有一个包含两个集合的应用程序

```
Books = new Meteor.Collection("books");
Chapters = new Meteor.Collection("chapters"); 
```

文件看起来很像这样：

```
Book = {
  _id : BookId,
  users_who_can_view_this_book : [userId, userId]
}

Chapter = {
  book : BookId
} 
```

在服务器上，我发布这样的书籍和章节：

```
Meteor.publish('books', function() {
  return Books.find({ users_who_can_view_this_book : { $in : [this.userId] } });
});

Meteor.publish('chapters', function() {
  var bookIds = Books.find({
    users_who_can_view_this_book : {$in : [this.userId] }
  }).map(function(book) {
    return book._id;
  });
  return chapters.find({book: {$in : bookIds}});
}); 
```

在客户端我只是这样订阅：

```
Meteor.subscribe('books');
Meteor.subscribe('chapters') 
```

因此，如果用户可以访问一本书，我希望客户收到这本书及其相应的章节。这在初始加载时工作正常。

现在，在*服务器*上，我希望能够在书籍文档的列表中添加或删除用户，当我这样做时，用新章节更新客户端。截至目前，客户端仅获得书籍的更新，但引用该书籍的章节并未从客户端添加/删除。

I understand that I need to change the way my chapters publication work. I have looked at the docs for cursor.observe and cursor.observeChange, but I really cannot grasp how to use them in this case. I have also studied [this answer](https://stackoverflow.com/questions/10565654/how-does-the-messages-count-example-in-meteor-docs-work) but I dont get all of it. I'd be happy to explain what parts of that answer I have questions about but since it's a slightly different case I dont know if is relevant. Anyway, some guidance on this or a working example would be much appreciated!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T16:55:39.850

Totally untested, no-guarantees code, but replace your Meteor.publish('chapters') function with this:

```
Meteor.publish('chapters-for-me', function() {

  var self = this;

  var handle = Books.find({users_who_can_view_this_book : {$in : [self.userId] }}).observeChanges({

    added: function(id) {
      Chapters.find({book: id}).forEach(function(chapter) {
        self.added("chapters", chapter._id, chapter);
      });
    },

    removed: function(id) {
      Chapters.find({book: id}).forEach(function(chapter) {
        self.removed("chapters", chapter._id);
      });
    }
  });

  self.ready();

  self.onStop(function () {
    handle.stop();
  });

}); 
```

...and then change your subscriptions to this:

```
Meteor.subscribe('books');
Meteor.subscribe('chapters-for-me'); 
```

... and leave your collection declarations as they are.

I just wrote this on the fly, but at the very least it should steer you in the right direction on how to use observeChanges() to solve your problem.

Again, as mquandalle stated, it would probably be better if you put your Chapters documents inside your Book documents. With your current setup, if your Chapters collection starts to get really big, your server performance is going to take a significant hit.

Hope that helps!

# c++ - Unable to compile C++ program

> ID：15717353
> 
> 赞同：9
> 
> 时间：2013-03-30T10:15:40.173
> 
> 标签：c++, ubuntu

I was trying my hands to compile on Ubuntu. So I typed a this much small program :

```
#include <iostream>
using namespace std;
int main(){
int cases;
cin>>cases;
return 0;
} 
```

And this thing giving lots of errors:

```
umair@ubuntu:~/cpp$ gcc -Wall -W -Werror 2.cpp -o 1
/tmp/ccU4nAIg.o: In function `main':
2.cpp:(.text+0x10): undefined reference to `std::cin'
2.cpp:(.text+0x15): undefined reference to `std::istream::operator>>(int&)'
/tmp/ccU4nAIg.o: In function `__static_initialization_and_destruction_0(int, int)':
2.cpp:(.text+0x4d): undefined reference to `std::ios_base::Init::Init()'
2.cpp:(.text+0x5c): undefined reference to `std::ios_base::Init::~Init()'
/tmp/ccU4nAIg.o:(.eh_frame+0x13): undefined reference to `__gxx_personality_v0'
collect2: error: ld returned 1 exit status 
```

I can do this easily in "C" . But what's my mistake in "C++" ?

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-30T10:17:26.373

**Use `g++` instead of `gcc` to build your C++ program.**

While `gcc` knows how to *compile* C++, by default it does not *link* against the C++ libraries that are required by your program.

From the manual:

```
Compiling C++ Programs

       C++ source files conventionally use one of the suffixes .C, .cc, .cpp, .CPP,
       .c++, .cp, or .cxx; C++ header files often use .hh or .H; and preprocessed C++
       files use the suffix .ii.  GCC recognizes files with these names and compiles
       即使您以与 for 相同的方式调用编译器，它们也作为 C++ 程序
       编译 C 程序（通常使用名称 gcc）。

       但是，使用 gcc 并没有添加 C++ 库。g++ 是一个程序
       调用 GCC 并将 .c、.h 和 .i 文件视为 C++ 源文件而不是 C
       源文件，除非使用 -x，并自动指定链接到
       C++ 库。该程序在预编译 C 头文件时也很有用
       带有 .h 扩展名，用于 C++ 编译。在许多系统上，g++ 也是
       以名称 c++ 安装。

```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-30T10:17:57.407

要编译 C++，请调用`g++`而不是`gcc`.

# mysql - 子查询和连接

> ID：15717354
> 
> 赞同：1
> 
> 时间：2013-03-30T10:15:40.520
> 
> 标签：mysql, sql, select, join

我正在尝试使用连接启动子选择，但返回时遇到问题

```
SELECT * FROM user, follow
WHERE user.id IN ( SELECT follow FROM referent_follow WHERE referent=3 ) 
```

在上述情况下，回报很好，但我还拥有我不想要的所有表格

```
SELECT * FROM user, follow
WHERE follow.user_id IN ( SELECT follow FROM referent_follow WHERE referent=3 ) 
```

在上述情况下，回报很好，但我还有所有我不想要的表用户

效果不太好的查询是第一个，但我的结果中也有后续内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T10:19:17.740

`FROM A,B`表示 A 和 B 的交叉连接。因此 A 中的每一行都与 B 的每一行匹配
（so `totalRows = rowCount(A)*rowCount(B)`）。

使用`(INNER) JOIN`应该工作：

```
SELECT *
FROM user
JOIN follow ON user.id = follow.user_id
  AND user.id IN ( SELECT follow FROM referent_follow WHERE referent=3 ) 
```

建议使用`JOIN`而不是`IN`，因为它通常会带来更好的性能：

```
SELECT user.*, follow.*
FROM user
JOIN follow ON user.id = follow.user_id
JOIN referent_follow ON user.id = referent_follow.follow
WHERE referent=3 
```

您可能还需要`DISTINCT`JW 建议的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T10:19:44.207

Your current query result a cartesian product from both tables: `user` and `follow`. You need to supply a condition that will join and filter out connected records.

```
SELECT  DISTINCT a.*, b.* 
FROM    user a
        INNER JOIN follow b
            ON a.ID = b.user_id 
        INNER JOIN referent_follow c
            ON a.ID = c.follow
WHERE   c.referent = 3 
```

# android - 如何在选择时突出显示菜单项？

> ID：15717356
> 
> 赞同：4
> 
> 时间：2013-03-30T10:15:51.500
> 
> 标签：android, android-layout, android-actionbar

如何在选择时突出显示菜单项，我尝试使用各种属性（如`colorPressedHighlight`,`colorActivatedHighlight`等）修改 styles.xml。有没有办法让菜单项保持焦点，直到选择其他项？

AndroidManifest.xml：

```
<style name="onPressedHighLight" parent="AppBaseTheme">
    <item name="android:colorActivatedHighlight">@color/OnPressed</item>
</style>
<color name="OnPressed" parent="AppBaseTheme">#FF0000</color> 
```

活动文件：

```
setTheme(R.style.onPressedHighLight); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T10:19:57.853

对自定义按钮使用选择器。在 google 中搜索更多示例。这是[一个](http://www.mkyong.com/android/android-imagebutton-selector-example/)。

# java - Extjs Grid 无法加载大数据

> ID：15717358
> 
> 赞同：0
> 
> 时间：2013-03-30T10:16:08.893
> 
> 标签：java, jsp, extjs

我需要在 LiveGride 中显示大约 500 行。我的函数需要大约 6 分钟来重新调整 Json Array.Grid 显示加载大约 2 分钟然后停止。当我使用调试模式进行检查时，网格首先失败，但该函数仍在运行并最后返回。

**该程序运行良好，数据较少**

```
var Grid = new Ext.ux.grid.livegrid.EditorGridPanel

({
title: 'Report Details',
id: 'GridId',
ds: Store,
cm: CM,

view: new Ext.ux.grid.livegrid.GridView({
nearLimit: 3,

loadMask: {
            msg: 'Loading Records PleaseWait.....!'
        },

emptyText: 'No Records Found'
    }),

stripeRows: true,

border: true,
    width: screen.width - 90,
    height: 340,

loadMask: {
        msg: ' Loading Records Please Wait......!'
    },
    clicksToEdit: 1,
    plugins: filters,

selModel: new Ext.ux.grid.livegrid.RowSelectionModel(),

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-22T18:24:13.153

我应用了 Ext.data.HttpProxy.doRequest 函数的覆盖来接受来自 Store.load(params) 的超时属性并创建存储。

```
 Ext.override(Ext.data.HttpProxy, {
    doRequest: function (action, rs, params, reader, cb, scope, arg) {
        var timeout = 30000;
        if (scope.timeout > 0) timeout = scope.timeout;
        if (arg.timeout > 0) timeout = arg.timeout;
        var o = {
            method: (this.api[action]) ? this.api[action]['method'] : undefined,
            request: {
                callback: cb,
                scope: scope,
                arg: arg
            },
            reader: reader,
            callback: this.createCallback(action, rs),
            scope: this,
            timeout: timeout
        };

        // If possible, transmit data using jsonData || xmlData on Ext.Ajax.request (An installed DataWriter would have written it there.).
        // Use std HTTP params otherwise.
        if (params.jsonData) {
            o.jsonData = params.jsonData;
        } else if (params.xmlData) {
            o.xmlData = params.xmlData;
        } else {
            o.params = params || {};
        }
        // Set the connection url.  If this.conn.url is not null here,
        // the user must have overridden the url during a beforewrite/beforeload event-handler.
        // this.conn.url is nullified after each request.
        this.conn.url = this.buildUrl(action, rs);

        if (this.useAjax) {

            Ext.applyIf(o, this.conn);

            // If a currently running read request is found, abort it
            if (action == Ext.data.Api.actions.read && this.activeRequest[action]) {
                Ext.Ajax.abort(this.activeRequest[action]);
            }
            this.activeRequest[action] = Ext.Ajax.request(o);
        } else {
            this.conn.request(o);
        }
        // request is sent, nullify the connection url in preparation for the next request
        this.conn.url = null;
    }
}); 
```

# javascript - 使用纯 js 无 jquery 传递“this”父上下文以运行

> ID：15717360
> 
> 赞同：-1
> 
> 时间：2013-03-30T10:16:19.037
> 
> 标签：javascript, this

我正在编写帮助函数来遍历所有数组元素 - 只是为了学习 js。

这是代码：

```
function arrayLoop(array, func){

    var ar = array.length,
        i=0;

    for ( i = 0; i < ar; i++ ){
        func(i);
    };

}; 
```

当我像这样使用它时它正在工作：

```
var foo = ['aa','bb','cc'];

arrayLoop(foo, function(i){
    alert(foo[i]);
}); 
```

但是当我尝试在对象内部执行此操作并想要使用此上下文时 - 发生错误：

```
function test(){

   this.foo = ['aa','bb','cc'];
   this.bar = ['ff','gg','hh'];

}

test.prototype.find = function(){

  arrayLoop(this.foo, function(i){

     alert(this.bar[i])     //error- there is no this.bar 

  };  

}; 
```

如何将父级自动传递给arrayLoop函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T10:24:36.173

您可以更改 arrayLoop 以允许上下文参数：

```
function arrayLoop(array, ctx, func){
    ctx = ctx || window;
    var len = array.length, i = 0;
    for ( i = 0; i < len; i++ ) {
        func.call(ctx, i);
    }
}

test.prototype.find = function(){
  arrayLoop(this.foo, this, function(i) {
     alert(this.bar[i]);     // this will work
  });
} 
```

这使您可以为回调传递所需的`this`值，然后在调用回调时为您设置它，它将在所有浏览器`.bind()`中工作（在旧浏览器中不起作用）。

FYI, you also were missing a `)` in your `find()` function and you seem to like a number of extra semi-colons which do no harm, but don't need to be there.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T10:17:42.853

您可以在闭包中捕获它：

```
test.prototype.find = function() {
    var self = this;
    arrayLoop(this.foo, function(i) {
        alert(self.bar[i]);
    });
}; 
```

或使用以下[`.bind()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)功能：

```
test.prototype.find = function() {
    arrayLoop(this.foo, function(i) {
        alert(this.bar[i]);
    }.bind(this));
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T10:28:06.457

Use [`bind`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind) method.

```
test.prototype.find = function(){
    arrayLoop(this.foo, method.bind(this));
}

test.prototype.method = function(i){
    alert(this.bar[i]);
}; 
```

You can find an explanation why your code is not working [here](https://stackoverflow.com/questions/15498508/unable-to-access-the-object-using-this-this-points-to-window-object)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-30T10:24:05.777

[将函数绑定](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)到对象：

```
test.prototype.find = function(){

  arrayLoop(this.foo, function(i){

     alert(this.bar[i])     //error- there is no this.bar 

  }.bind(this));  

}; 
```

# node.js - 猫鼬跳过、限制和计数

> ID：15717367
> 
> 赞同：3
> 
> 时间：2013-03-30T10:17:10.163
> 
> 标签：node.js, mongodb, mongoose

我正在开发一个节点项目，我在其中为网格应用过滤器和分页。

我需要找到的项目、从查询中找到的总数以及 Mongodb 集合中的项目总数。

我的查询就像（咖啡脚本）：

```
projects.find(query).limit(10).skip(skip).select(q).exec (err, items) ->
      projects.count().exec (err, count) ->
        itemsTotals = count
        itemsFound = items.length 
```

但是，如果我的查询返回的结果大于“限制”变量，那么找到的项目的数量就是限制，或者我添加第三个查询或者我直接使用聚合框架。

我真的需要这两个查询（projects.find 和 projects.count）吗？

可以通过单个 mongoose 查询获取两个值（找到的总数和集合的总数）（并且可能直接在查询中限制返回项目的结果）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-07-02T14:35:34.003

我还没有找到更好的答案，但我发现了这个值得一提的选项。明显的缺点是数据库返回的数据集更大。

```
projects.find(query).select(q).exec (err, items) ->
    itemsTotals = items.length
    items = items.slice(skip, 10 + skip)
    itemsFound = items.length 
```

我在[这里找到了这个](https://stackoverflow.com/questions/13935733/mongoose-limit-offset-and-count-query "这里")

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T11:42:59.323

你不能。您需要使用 limit 和 count() 执行 find()，但考虑到您正在复制查询数量，这会降低系统速度。您可以将总长度存储到内存中，并在执行 insert() 时自动递增它，而不是执行 count()。当服务器启动时，执行 count() 来初始化变量。

# ruby-on-rails - 使用carrierwave和foms bad uri将图像上传到s3

> ID：15717368
> 
> 赞同：1
> 
> 时间：2013-03-30T10:17:16.413
> 
> 标签：ruby-on-rails, carrierwave, fog

嗨，我正在尝试使用雾和载波在 s3 上上传一些图像。在我在我的公共文件夹中做之前，我想把它放在一个桶上。当我尝试上传新图片时，我得到： `URI::InvalidURIError`在`EventsController create`错误的 URI 中（不是 URI？）

我做了一些研究，这可能来自名称中的“+”符号，但我没有任何“+”这是我的参数请求：

```
> {"utf8"=>"✓",
 "authenticity_token"=>"ms48hFw8dTALEe543dPS0ywIdKynYvuAHMjiry7kghQ=",
 "event"=>{"titre"=>"test des image avec S3",
 "dday(1i)"=>"2013",
 "dday(2i)"=>"3",
 "dday(3i)"=>"30",
 "lieux"=>"maison",
 "commentaire"=>"aucune",
 "pictures_attributes"=>{"0"=>{"name"=>"test",
 "image"=>#<ActionDispatch::Http::UploadedFile:0xa35a14c @original_filename="image.jpg",
 @content_type="image/jpeg",
 @headers="Content-Disposition: form-data; name=\"event[pictures_attributes][0][image]\"; filename=\"image.jpg\"\r\nContent-Type: image/jpeg\r\n",
 @tempfile=#<File:/tmp/RackMultipart20130330-26465-11z9gsf>>}}},
 "commit"=>"Ajouter"} 
```

我遵循了[https://github.com/jnicklas/carrierwave](https://github.com/jnicklas/carrierwave)的指示， 这里有一些代码

```
CarrierWave.configure do |config|
    config.fog_credentials = {
        :provider               => 'AWS',                        # required
        :aws_access_key_id      => 'xxx',                        # required
        :aws_secret_access_key  => 'xxx',                        # required
        :region                 => 'eu-west-1',                  # optional, defaults to 'us-east-1'
        :host                   => 'xxx.com',             # optional, defaults to nil
        :endpoint               => '' # optional, defaults to nil
    }
    config.fog_directory  = 'socialmausoleum'                     # required
    config.fog_public     = true                                  # optional, defaults to true
    config.fog_attributes = {'Cache-Control'=>'max-age=315576000'}  # optional, defaults to {}
end 
```

和我的上传者：

```
class ImageUploader < CarrierWave::Uploader::Base

  # Include RMagick or MiniMagick support:
  # include CarrierWave::RMagick
  # include CarrierWave::MiniMagick

  # Include the Sprockets helpers for Rails 3.1+ asset pipeline compatibility:
  # include Sprockets::Helpers::RailsHelper
  # include Sprockets::Helpers::IsolatedHelper

  # Choose what kind of storage to use for this uploader:
  storage :file
  storage :fog

  # Override the directory where uploaded files will be stored.
  # This is a sensible default for uploaders that are meant to be mounted:
  def store_dir
    "uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}"
  end 
```

谢谢你的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T20:13:25.440

在黑暗中拍摄

```
:endpoint               => '' # optional, defaults to nil 
```

无≠''

所以只需删除整个 lin 看看会发生什么。我认为正在发生的是它试图将一个空字符串附加到以“+”结尾的内容的末尾，然后什么都没有。

编辑：

从他们的文档

```
CarrierWave.configure do |config|
  config.fog_credentials = {
    :provider               => 'AWS',                        # required
    :aws_access_key_id      => 'xxx',                        # required
    :aws_secret_access_key  => 'yyy',                        # required
    :region                 => 'eu-west-1',                  # optional, defaults to 'us-east-1'
    :host                   => 's3.example.com',             # optional, defaults to nil
    :endpoint               => 'https://s3.example.com:8080' # optional, defaults to nil
  }
  config.fog_directory  = 'name_of_directory'                     # required
  config.fog_public     = false                                   # optional, defaults to true
  config.fog_attributes = {'Cache-Control'=>'max-age=315576000'}  # optional, defaults to {}
end 
```

在您的情况下，您将需要我认为匹配的区域，但我认为您不需要主机或端点。

# php - Using lpsolve php library

> ID：15717374
> 
> 赞同：1
> 
> 时间：2013-03-30T10:17:56.960
> 
> 标签：php, wamp, lpsolve

I need to use **lpsolve** library for one of my projects... How do i configure it with Apache 2.2 and php 5.3.9 on WAMP?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T10:23:52.933

There is a lpsolve extension for PHP.

[Here](http://www.peno.be/lp_solve/PHP/5.3/) you can download the PHP extension. Copy the extension to your **php/ext/** folder. Then restart your server and you can use the extensions and the functions.

A tutorial: [http://lpsolve.sourceforge.net/5.5/PHP.htm](http://lpsolve.sourceforge.net/5.5/PHP.htm)

# java - 如何在 JSP scriptlet 中使用 Java 类？错误表示无法将类解析为类型

> ID：15717376
> 
> 赞同：10
> 
> 时间：2013-03-30T10:18:03.630
> 
> 标签：java, jsp, compiler-errors, cannot-find-symbol

我在 Eclipse 中编写了一个示例 JSP 文件和一个 Java 文件，并试图在我的 JSP 中调用 Java 类，但它不起作用。JAVA文件的代码如下：

**测试Java.jva**

```
public class TestJava {
     public void test(String msg)
      {
          System.out.println("My name is "+msg);
      }
} 
```

Javafile 位于`src`文件夹中。我的 JSP 文件`test.jsp`如下：

**测试.jsp**

```
<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>

 <html>
 <head>
     <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
     <title>My First JSP with JAVA</title>
 </head>
 <body>
 <jsp:useBean id="link" scope="application" class = "TestJava" />   
  <% TestJava t=new TestJava();
  t.test("Joy");
 %>
 </body>
 </html> 
```

它给出了错误，因为“ *TestJava 无法解析为类型*”。我研究过 Stack Overflow 中的其他相关帖子，但这些方法也没有奏效。作为 JSP 的新手，我无法理解如何修复该错误。所以我问是否有人可以帮助我解决这个问题。

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-30T10:20:02.753

为了在java中使用类对象，你需要先导入类。与 jsp 中的 scriplet 几乎相同，这里您通过`<%@ page %>`scriplet 标签导入它。

`<%@ page import="your.class*" %>`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-30T10:26:31.577

您必须在页面指令中编写您的类的完全限定名称

```
<%@ page import="fully qualified name of the class" %> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-30T11:24:56.580

您需要使用导入您的课程`<%@ page %>`

在您的情况下，像这样在您的 jsp 页面中导入 Test 。

```
<%@ page import="yourpackagename.Test" %> 
```

如果要导入不同包中的多个类，请像这样声明它们。

```
<%@ page import="yourpackagename.Test,yourpackagename2.Test2" %> 
```

另外，我强烈建议您将 Test 类放在默认包之外，并将其放在另一个包中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-30T10:30:52.887

<%@ page import="TestJava" %> 确保您的 TestJava 在类路径中

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-30T11:01:16.100

确保`@import`像其他人所说的那样

然后 *"class" 属性指定 bean 实例的实际类。*

```
 <jsp:useBean id="link" scope="application" class = "fullpackagename.TestJava" />
      <% TestJava t=new TestJava();
      t.test("Joy");
     %> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-12T19:41:49.437

Which IDE are you using? I recommend you use something like Eclipse with the JSP plugin. It will underline with a red objects that you attempt to declare that have not been compiled and imported.

You don't have to use beans by the way.. you can just create java objects and import them

# android-calendar - Android CalendarProvider-Event 自定义列

> ID：15717378
> 
> 赞同：2
> 
> 时间：2013-03-30T10:18:23.423
> 
> 标签：android-calendar, customcolumn

通过新列扩展 CalendarProvider 数据库的最佳方法是什么？我想为每个日历事件存储一些额外的数据。我尝试使用 CalendarContract.ExtendedProperties 但这仅供同步适配器使用，因此会发生异常。

# azure - Powershell - 创建 Azure 部署包

> ID：15717385
> 
> 赞同：3
> 
> 时间：2013-03-30T10:18:54.757
> 
> 标签：azure, azure-powershell, azure-packaging

我有一个包含 4 个 Web 项目的 Web 解决方案。成功构建后，我需要通过 powershell 创建一个 azure 部署包。

有人可以帮助我是否可以创建一个 azure 部署包（cspkg、csdef 和 cscfg）。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T22:25:24.597

Here is a good example: [Windows Azure 4: Deploying via PowerShell](http://mooneyblog.mmdbsolutions.com/index.php/2013/01/23/windows-azure-4-deploying-via-%20powershell/)

Also: [Publish a Package using a Powershell Script](http://www.windowsazure.com/en-us/develop/net/common-tasks/continuous-delivery/#step4)

This describe the process in detail.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-06T13:05:37.640

我写了一篇关于构建包文件并使用 Powershell 将它们上传到 Azure 的文章，这可能很有用：

[http://www.kenneth-truyers.net/2014/02/06/deploying-cloud-services-to-azure-with-powershell/](http://www.kenneth-truyers.net/2014/02/06/deploying-cloud-services-to-azure-with-powershell/)

创建一个包相当简单。您可以为此使用 Msbuild：

```
exec { msbuild <path-to-csproj> /p:Configuration=Release 
                                /p:DebugType=None
                                /p:Platform=AnyCpu
                                /p:OutputPath=<path-to-package>
                                /p:TargetProfile=Cloud
                                /t:publish
                                /verbosity:quiet } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T11:28:42.323

为此，您的解决方案必须包含云项目，以便您的项目能够部署在 Windows Azure 中。有关执行此操作的分步方法，请参阅本指南：http: [//msdn.microsoft.com/en-us/library/windowsazure/hh420322.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/hh420322.aspx)。然后，当您构建云项目时（通过 msbuild 或直接通过 Visual Studio），您将获得包文件。

# java - 如何在java中检查图像中的匹配像素？

> ID：15717387
> 
> 赞同：1
> 
> 时间：2013-03-30T10:19:09.387
> 
> 标签：java, image-processing, pixels

我想将图像读入像素并希望检查匹配的像素值并进行一些处理并将处理后的像素转换为图像。我有

```
Pixel Location(582,131)- [Alpha: 255, Red: 243, Green: 88, Blue: 146]

Pixel Location(582,132)- [Alpha: 255, Red: 244, Green: 86, Blue: 145]

Pixel Location(582,133)- [Alpha: 255, Red: 245, Green: 87, Blue: 146]

Pixel Location(582,134)- [Alpha: 255, Red: 248, Green: 90, Blue: 149]

Pixel Location(582,135)- [Alpha: 255, Red: 250, Green: 92, Blue: 151]

Pixel Location(582,136)- [Alpha: 255, Red: 251, Green: 91, Blue: 151]

Pixel Location(582,137)- [Alpha: 255, Red: 248, Green: 88, Blue: 148]

Pixel Location(582,138)- [Alpha: 255, Red: 248, Green: 88, Blue: 148] 
```

这些像素值。现在我想知道如何将这些值相互比较以获得匹配的像素。

并将处理后的图像像素值转换为图像

```
 public static void pixels(String args) {

    BufferedImage image = readImage(args);

    printAllARGBDetails(image);
       }

       public static void printAllARGBDetails(BufferedImage image) {
    int width = image.getWidth();
    int height = image.getHeight();
    System.out.println("Image Dimension: Height-" + height + ", Width-"
            + width);
    System.out.println("Total Pixels: " + (height * width));
    for (int i = 0; i < width; i++) {
        for (int j = 0; j < height; j++) {

            int pixel = image.getRGB(i, j);
            System.out.println("Pixel Location(" + i + "," + j + ")- ["
                    + getARGBPixelData(pixel) + "]");
        }
    }
}

public static String getARGBPixelData(int pixel) {
    String pixelARGBData = "";

    int alpha = (pixel >> 24) & 0x000000FF;

    int red = (pixel >> 16) & 0x000000FF;

    int green = (pixel >>8 ) & 0x000000FF;

    int blue = (pixel) & 0x000000FF;

    pixelARGBData = "Alpha: " + alpha + ", " + "Red: " + red + ", "
            + "Green: " + green + ", " + "Blue: " + blue;

    return pixelARGBData;
}

public static BufferedImage readImage(String fileLocation)
    {
    BufferedImage img = null;

    try 
   {

        img = ImageIO.read(new File(fileLocation));

   } 

   catch (IOException e) 

   {

        e.printStackTrace();

    }
    return img;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T11:01:21.583

您可以使用像[像素](http://www.cs.uic.edu/~i101/doc/Pixel.html)这样的类，并使用一些快速算法来覆盖比较，如[快速和快速像素匹配算法](https://stackoverflow.com/questions/6187982/fast-and-quick-pixel-matching-algorithm)中所示。

# android - 如何为android创建一个传递url的JSON？

> ID：15717391
> 
> 赞同：0
> 
> 时间：2013-03-30T10:19:16.470
> 
> 标签：android, json

我是一名 android 开发人员。我想为自己创建一个 url。如何创建一个 url 来获取数据并通过 internet 传递数据。例如（[http://api.androidhive.info/contacts/](http://api.androidhive.info/contacts/)this)）这是 url包含联系人。就像我想为自己创建一些网址一样。

请任何人帮助我，并给我一些创建网址的教程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T10:24:35.467

要创建 URL，您需要一个实时服务器（例如`http://111.222.111.222:8080/myJson`或[http://www.myserver.com/myJson](http://www.myserver.com/myJson)）。然后，您需要在服务器上部署一个文件，该文件在执行时将返回 JSON 格式。

为此，您需要购买域名、网络空间和实时 URL/IP，因此需要付费。然而，还有一种免费的替代方式，但过程有点长。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T10:36:55.787

您可以在家用计算机上托管服务器，并通过路由器将端口转发给它。

为此，您将需要一个静态 IP 或使用像 NoIp.​​com 这样的动态 DNS 系统。

# android - 使列表视图的最后一项滚动到屏幕中间

> ID：15717400
> 
> 赞同：1
> 
> 时间：2013-03-30T10:20:06.840
> 
> 标签：android, android-listview, expandablelistview

我有一个`ListView`. 它总是只有很少的项目，比如 4 或 5，所以它很容易适合屏幕。我在屏幕底部也有一些透明的视图。我的问题是 listview 的最后一项由于底部视图而仅部分可见，因此我想让该列表项也滚动到屏幕中间，以便其详细信息可见。这样做的任何建议。

![在此处输入图像描述](../Images/c3c1c01a93c99801b604bc17cba70bfd.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-15T15:14:09.583

您应该将 LayoutParams 与“其他视图”相同的 INVISIBLE footerView 添加到您的 listView 中。

就像是：

查看视图 = findViewById(R.id.other_view);

view.setVisibility(View.INVISIBLE);

yourListView.addFooterView(view);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T10:28:27.610

试试这个，使用相对父布局。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >
 <LinearLayout
    android:id="@+id/linear_footer"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    >

    <EditText
        android:id="@+id/edt_enter_msg"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:background="@drawable/editfield_selector"
        android:paddingLeft="5dip"
        android:paddingRight="5dip"
        android:singleLine="true" />

    <Button
        android:id="@+id/btnsend"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:background="@drawable/next_btn_selector"
        android:gravity="center"
        android:text="send"
        android:textColor="@color/white" />
</LinearLayout>

   <ListView
    android:id="@+id/listView"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:cacheColorHint="@color/white"
    android:layout_above="@+id/linear_footer"
    android:divider="@null"
    android:listSelector="@android:color/transparent" >
</ListView> 
```

# iphone - 如何以编程方式确定应用程序是否在 iphone 或 ipod 中运行

> ID：15717413
> 
> 赞同：-3
> 
> 时间：2013-03-30T10:21:40.370
> 
> 标签：iphone, ios, ipod

我想检查我的应用程序是在 iphone 还是 ipod 中运行。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T10:25:59.323

使用以下代码查找当前设备

```
NSString *deviceStr = [UIDevice currentDevice].model;
NSLog(@"device:%@",deviceStr); 
```

如果您的设备是 iPod，那么它将返回

```
iPod touch 
```

如果您的设备是 iPhone

```
iPhone 
```

如果您的设备是 iPad

```
iPad 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T10:24:29.050

是的，我找到了答案

```
#define IS_IPHONE ([[[UIDevice currentDevice] model] isEqualToString:@"iPhone"])
#define IS_IPOD ([[[UIDevice currentDevice] model] isEqualToString:@"iPod touch"]) 
```

# android - 编译ffmpeg时出错

> ID：15717415
> 
> 赞同：2
> 
> 时间：2013-03-30T10:21:50.697
> 
> 标签：android, ffmpeg, cygwin

我正在使用 cygwin 在 Windows 中为 android 编译 ffmpeg。

我正在使用- 1\. android ndk r5 2\. ffmpeg-0.10.3 3\. cygwin

## 一切正常，但是当我运行最后一个命令时，几分钟后它给出了这个错误 -

许可证：LGPL 2.1 或更高版本

创建 config.mak 和 config.h...

libavutil/avconfig.h 不变

警告：C:/android-ndk-r5-windows/android-ndk-r5//toolchains/arm-linux-androideabi-4.4.3/prebuilt/windows/bin/arm-linux-androideabi-pkg-config 未找到，库检测可能会失败。

警告：编译器不指示浮点 ABI，猜测软。

config.log:1: ***多个目标模式。停止。

config.log:1: ***多个目标模式。停止。

C:\android-ndk-r5-windows\android-ndk-r5\toolchains\arm-linux-androideabi-4.4.3\prebuilt\windows\bin\arm-linux-androideabi-ld.exe：无法打开输出文件。 /android/armv7-a/libffmpeg.so：没有这样的文件或目录

请帮我解决这个问题。

谢谢。

# javascript - 使用 TargetLink 打开新选项卡

> ID：15717416
> 
> 赞同：3
> 
> 时间：2013-03-30T10:22:09.417
> 
> 标签：javascript

```
// ==/UserScript==

//--- Note that the contains() text is case-sensitive.
var TargetLink          = $("a:contains('We love potatoes')")

if (TargetLink  &&  TargetLink.length) 
    window.location.href   = TargetLink[0].href 
```

我想让它找到的链接在 chrome 的新选项卡中打开。这对某些人来说可能很明显，但我一生都无法弄清楚，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T10:25:56.317

除了更改当前窗口的位置，您还可以使用类似[`window.open()`](https://developer.mozilla.org/en-US/docs/DOM/window.open)打开一个新窗口的方法：

```
window.open(TargetLink[0].href, "myWindow"); 
```

*请注意，弹出窗口阻止程序等可能会阻止打开窗口。*

**边注：**

MDN 对它的使用提供了[相当广泛的阅读](https://developer.mozilla.org/en-US/docs/DOM/window.open)，一般意见是为了可用性而避免诉诸 window.open()。大多数现代浏览器都使用选项卡式浏览，而在新窗口中打开页面则远离了这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T10:28:39.313

使用以下代码：

```
var TargetLink = $("a:contains('We love potatoes')"); // this will select your node

if (TargetLink  &&  TargetLink.length) { //checks it node was there
    alert("Going to redirect"); //Just to make sure that we did correct!

    TargetLink.attr('taget', '_blank'); //add target="_blank"
    //TargetLink.click(); // This is not working, because of a security issue.

} 
```

并且还要注意`;`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T10:40:22.857

您不需要`if`检查，只需使用`attr`方法：

```
$("a:contains('We love potatoes')").attr('target', '_blank'); 
```

所以`target="_blank"`将被添加到*我们爱土豆*的链接中。

演示：http: [//jsfiddle.net/qtsWs/](http://jsfiddle.net/qtsWs/)

# c# - 通过引用 ParameterizedThreadStart 传递结构实例

> ID：15717417
> 
> 赞同：0
> 
> 时间：2013-03-30T10:22:10.593
> 
> 标签：c#, struct, pass-by-reference

我想启动一个线程并作为参数通过引用传递一个结构的实例。该`ref`关键字在使用线程之前运行良好，但我现在似乎无法使用`ref`。

这就是我的代码目前的样子：

```
Thread melodyThread = new Thread(new ParameterizedThreadStart(PlayMelody));
melodyThread.Start(melody1);

private void PlayMelody(object parameter)
{
    Melody melody = (Melody)parameter;
    .
    .
    .
} 
```

我想通过引用传递一个 struct `Melody`( `melody1`) 的实例。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T11:00:07.627

我能想到几种可能性。

**解决方案一：使用包装类**

```
using System;
using System.Threading;

namespace Demo
{
    internal class Program
    {
        private static void Main(string[] args)
        {
            var melody = new Melody { Value = 1 };
            var wrapper = new MelodyWrapper { Melody = melody };

            Thread melodyThread = new Thread(() => PlayMelody(wrapper));

            melodyThread.Start();
            melodyThread.Join();

            Console.WriteLine(wrapper.Melody.Value);
        }

        private static void PlayMelody(MelodyWrapper wrapper)
        {
            Console.WriteLine(wrapper.Melody.Value);
            Thread.Sleep(1000);
            wrapper.Melody.Value = 2;
        }
    }

    public struct Melody
    {
        public int Value;
    }

    public class MelodyWrapper
    {
        public Melody Melody;
    }
} 
```

或者，不使用 Lambda：

```
using System;
using System.Threading;

namespace Demo
{
    internal class Program
    {
        private static void Main(string[] args)
        {
            var melody = new Melody { Value = 1 };
            var wrapper = new MelodyWrapper { Melody = melody };

            Thread melodyThread = new Thread(PlayMelody);

            melodyThread.Start(wrapper);
            melodyThread.Join();

            Console.WriteLine(wrapper.Melody.Value);
        }

        private static void PlayMelody(object parameter)
        {
            MelodyWrapper wrapper = (MelodyWrapper)parameter;
            Console.WriteLine(wrapper.Melody.Value);
            Thread.Sleep(1000);
            wrapper.Melody.Value = 2;
        }
    }

    public struct Melody
    {
        public int Value;
    }

    public class MelodyWrapper
    {
        public Melody Melody;
    }
} 
```

**解决方案二：使用 Delegate 并返回 Melody 的新值**

```
using System;
using System.Threading;

namespace Demo
{
    internal class Program
    {
        private static void Main(string[] args)
        {
            var melody = new Melody { Value = 1 };
            Func<Melody, Melody> play = PlayMelody;
            var result = play.BeginInvoke(melody, null, null);
            melody = play.EndInvoke(result);
            Console.WriteLine(melody.Value);
        }

        private static Melody PlayMelody(Melody melody)
        {
            Console.WriteLine(melody.Value);
            Thread.Sleep(1000);
            melody.Value = 2;
            return melody;
        }
    }

    public struct Melody
    {
        public int Value;
    }
} 
```

我个人赞成第二种解决方案。`Melody`因为它返回一个新值，所以如果您使用此解决方案，您可以将其设为不可变。

（我首选的解决方案使用`Task<Melody>`但您不能使用任务。）

# string-formatting - 如何将日期转换为这个特定的字符串表示？

> ID：15717420
> 
> 赞同：0
> 
> 时间：2013-03-30T10:22:21.020
> 
> 标签：string-formatting, date-format, date-formatting

```
LblExpirydate.Text = dataReader(0).ToString() 
```

以 asp.net 形式输出：`01/05/2013 12:00:00 AM`

我想将格式更改为 ( `01/05/2013`)

备注：我的数据库

柱子 ：`Expirydate`

数据类型 ：`Date`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T10:29:44.070

您可以使用 .ToString() 以几种不同的方式格式化字符串：

```
dataReader(0).ToString("dd/MM/yyyy");

dataReader(0).ToString("d"); 
```

第二个选项更好，因为它将使用当前语言环境进行格式化。有关详细信息，请参阅此 MSDN 文章：http: [//msdn.microsoft.com/en-gb/library/az4se3k1.aspx](http://msdn.microsoft.com/en-gb/library/az4se3k1.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T10:38:37.863

```
DateTime thisDate1 =  DateTime.Now;
 Label1.Text =thisDate1.ToString("MM/dd/yyyy") ; 
```

输出：2013 年 3 月 30 日

```
 DateTime thisDate1 =  DateTime.Now;
    Label1.Text =thisDate1.ToString("MM-dd-yyyy") ; 
```

输出：03-30-2013

```
DateTime thisDate1 =  DateTime.Now;
Label1.Text =thisDate1.ToString("MM,dd,yyyy") ; 
```

输出：03,30,2013

```
DateTime thisDate1 =  DateTime.Now;
Label1.Text =thisDate1.ToString("MMMM,dd,yyyy") ; 
```

输出：2013年3月30日

等等...

# c# - 当我单击浏览器的后退按钮时，我仍然返回到后页

> ID：15717424
> 
> 赞同：1
> 
> 时间：2013-03-30T10:22:42.710
> 
> 标签：c#, asp.net

我`Session.Abandon();` `Session.Clear();`在注销按钮上使用并重定向到登录页面。但是当我点击浏览器的后退按钮时，我仍然返回到后页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T10:34:18.443

因为它正在从缓存中获取页面，所以您可能希望禁用相应页面的缓存。

有些人要求禁用后退按钮，无法禁用后退按钮。替代方案是：

*   防止缓存那些页面
*   一旦用户退出应用程序，防止用户返回。

对于第二种情况，请查看以下代码并将其放入您的登录页面。

```
<script type = "text/javascript" >
function changeHashOnLoad() {
 window.location.href += "#";
 setTimeout("changeHashAgain()", "50"); 
}

function changeHashAgain() {
 window.location.href += "1";
}

var storedHash = window.location.hash;
window.setInterval(function () {
if (window.location.hash != storedHash) {
     window.location.hash = storedHash;
}
}, 50);

 </script> 
```

并像下面这样调用它：

```
<body onload="changeHashOnLoad(); ">
 //---Rest of your code 
```

它适用于所有浏览器。

来源：SO（没有指向原始线程的链接）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T10:36:26.457

你可以使用如下

```
FormsAuthentication.SignOut();
Session.Abandon();

 // clear authentication cookie
 HttpCookie cookie1 = new HttpCookie(FormsAuthentication.FormsCookieName, "");
 cookie1.Expires = DateTime.Now.AddYears(-1);
 Response.Cookies.Add(cookie1);

// clear session cookie (not necessary for your current problem but i would recommend you do it anyway)

HttpCookie cookie2 = new HttpCookie("ASP.NET_SessionId", "");
cookie2.Expires = DateTime.Now.AddYears(-1);
Response.Cookies.Add(cookie2);

FormsAuthentication.RedirectToLoginPage(); 
```

# yii - Yii RBAC，运行时角色改变

> ID：15717427
> 
> 赞同：0
> 
> 时间：2013-03-30T10:22:49.463
> 
> 标签：yii, user-management, rbac

我正在为 Yii 建立一个动态 RBAC 系统，但我不知道如何处理这个问题：

版主可以改变用户的角色，此外，用户也可以通过获得不同的资格来改变它（比如说成就，所以她/他可以做更多的事情，这可以双向发生）。

当他/她登录时，当角色向后更改（权限较少的角色）或转发（权限较多的角色）时会发生什么？不能访问他刚刚有权使用的功能？或者在注销/重新登录操作之前仍然可以访问这些功能？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T11:24:00.587

更改授权分配的效果将是**即时**的。

`IWebUser::checkAccess()` **只有在同一请求中发出**的连续调用才能返回缓存值，因为`IWebUser`ie的默认实现`CWebUser`使用静态属性来缓存计算的权限。

为了阐明该过程，您将调用`IAuthManager::revoke()`旧权限和`IAuthManager::assign()`新权限。

## 编辑

有时你通过`IWebUser::setState()`方法存储会话信息；如果当前登录用户的状态会随着权限而改变，例如您存储当前用户的角色名称，您必须考虑到这一点并调用`IWebUser::clearState()`或`IWebUser::logout()`后跟`IWebUser::login()`- 后者也会在`CWebUser`实现中清除缓存的权限。

`CWebUser::_access`已声明**`private`**，因此如果要覆盖默认实现，则必须声明一个新属性。

# iphone - 向下滚动时 iPhone Storyboard 自定义单元格消失

> ID：15717428
> 
> 赞同：1
> 
> 时间：2013-03-30T10:23:09.243
> 
> 标签：iphone, ios, uitableview, ios6

我刚刚完成了一个项目，我在 Storyboard 中为我的 TableView 使用了一个自定义单元格。

问题是当我向下滚动时，每个单元格中的内容都消失了，在我的例子中是两个标签。

这是我用来呈现每个单元格的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"CustomCell";
    MessageCell *cell = (MessageCell*)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[MessageCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    Message *messageForRow = (Message *)[messages objectAtIndex:[indexPath row]];
    [cell.messageLabel setText:[messageForRow message]];
    [cell.senderLabel setText:[messageForRow sender]];

    return cell;
} 
```

我在情节提要中指定了正确的单元格标识符，并将该类链接到我的自定义单元格类。

有什么问题？如果我错过了任何需要的信息，请告诉我。

最好的敬意罗伯特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T10:57:57.853

您能否通过记录来检查滚动时是否调用了此方法？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T10:58:55.380

我自己解决了，问题不在于更新方法。错误地，我对 Message 类中的属性使用了弱签名。

```
@property (nonatomic, weak) NSString *sender; 
```

我通过使用强签名解决了这个问题。

```
@property (nonatomic, strong) NSString *sender; 
```

This was a great lesson because I didn't fully understand the concept of strong and weak.

# mediaelement.js - 在 Flash 模式下寻找超出缓冲线的视频

> ID：15717430
> 
> 赞同：2
> 
> 时间：2013-03-30T10:23:31.497
> 
> 标签：mediaelement.js, pseudo-streaming

webserver-modules`ngx_http_mp4_module`或`mod_h264_streaming`允许 Flash 客户端使用“start”参数在下载的缓冲区行之外寻找视频，例如：

```
http://server.com/path/to/video.mp4?start=10 
```

是否有机会在 mediaelement.js 中启用此功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:06:49.603

目前，Mediaelement Flash 播放器中的伪流尚未实现。

看看这个线程：[http 流媒体 MP4 视频在 flash 中不是随机可搜索的](https://github.com/johndyer/mediaelement/issues/280)。但是有人正在研究它；希望我们将来会获得该功能:)

**编辑 ：**

他们现在正在研究它（请参阅[此新闻](https://github.com/johndyer/mediaelement/pull/814)）。它目前仅适用于 mp4 文件。您必须设置`enablePseudoStreaming`为`true`启用该功能。

示例代码：

```
var Player = new MediaElement('video_player', {
    features: [ 'flash' ],
    enablePseudoStreaming: true
}); 
```

然后玩家将提出如下请求：

```
http://example.com/video.mp4?start=40 
```

The start query parameter specify the second in which you want to start pseudostream. You could also set another one with the option `pseudoStreamingStartQueryParam`.

# ruby-on-rails - 带有 RSpec 和 FactoryGirl 的 Rails 引擎

> ID：15717431
> 
> 赞同：2
> 
> 时间：2013-03-30T10:23:40.307
> 
> 标签：ruby-on-rails, rspec, factory-bot, rails-engines

我按照 FactoryGirl 的一些教程和文档与 RSpec 一起使用。目前我在尝试使用 FactoryGirl.create 时遇到一个错误：

```
describe "GenericRecipesController" do
  describe "GET 'index'" do
    it "displays list of generic recipes" do
        generic_recipe = FactoryGirl.create(:generic_recipe)
        visit '/recipe'
        response.should be_success
    end
  end
end 
```

和错误：

```
 GenericRecipesController GET 'index' displays list of generic recipes
 Failure/Error: generic_recipe = FactoryGirl.create(:generic_recipe)
 NameError:
   uninitialized constant GenericRecipe
 # ./spec/integration/generic_recipes_spec.rb:8:in `block (3 levels) in <top (required)>' 
```

剩下的[代码在那里](https://github.com/valk/edible-recipe/tree/master/spec)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T10:53:21.687

你可以试试这个：

```
factory :generic_recipe, class: EdibleRecipe::GenericRecipe do
    # ...
end 
```

我认为模块中的嵌套模型存在问题

**更新**：删除文件/spec/factories.rb，在文件/spec/support/factories.rb make

```
factory :generic_recipe, class: EdibleRecipe::GenericRecipe do 
```

当您将运行测试时，可能会看到“无法加载表”。制作

```
rake db:migrate RAILS_ENV=test 
```

然后再试一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T10:43:25.680

您的应用中似乎没有 GenericRecipe 模型。Factory Girl 正在寻找一个名为 GenericReciper 的模型，但找不到它。

# c++ - C++ [&]() {...} 构造

> ID：15717434
> 
> 赞同：0
> 
> 时间：2013-03-30T10:24:00.077
> 
> 标签：c++, c++11

在[本文](http://en.cppreference.com/w/cpp/thread/condition_variable)的代码示例中，我遇到了一个我不熟悉的 C++ 代码构造：

```
[&]() {/* code here*/} 
```

它看起来就像 Java 中的匿名函数或类。有谁知道这个结构是什么意思？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T10:25:47.067

它是一个 lambda 函数（您可以在另一个函数中定义的匿名函数）。

有一个很好的 SO 帖子在这里解释它。 [什么是 C++11 中的 lambda 表达式？](https://stackoverflow.com/questions/7627098/what-is-a-lambda-expression-in-c11)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T10:25:47.613

这是一个 lambda 函数 (C++11)。

# javascript - JS 正则表达式匹配大括号内的所有内容（包括嵌套大括号）：“{我想要这个 {and this} 和这个在一个字符串中}”

> ID：15717436
> 
> 赞同：4
> 
> 时间：2013-03-30T10:24:02.073
> 
> 标签：javascript, regex

这意味着我只是想剥离封闭的大括号。我可以将“{这种东西}”与：

```
"{stuff}".match(/{([^}]*)}/)[1] 
```

我在这里问太多了吗？

另一个例子，我有这个 javascript 代码作为字符串：

```
{
    var foo = {
        bar: 1    
    };

    var foo2 = {
        bar: 2    
    };
} 
```

我只想剥掉外面的大括号：

```
var foo = {
    bar: 1
};

var foo2 = {
    bar: 2
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-11-23T10:58:49.380

试试这个（我的代码基于[这个答案](https://stackoverflow.com/questions/524548/regular-expression-to-detect-semi-colon-terminated-c-for-while-loops/524624#524624)）。它还知道忽略字符串和注释（单行和多行）中的括号 - 如该答案的注释部分所述：

```
var block = /* code block */
    startIndex = /* index of first bracket */,
    currPos = startIndex,
    openBrackets = 0,
    stillSearching = true,
    waitForChar = false;

while (stillSearching && currPos <= block.length) {
  var currChar = block.charAt(currPos);

  if (!waitForChar) {
    switch (currChar) {
      case '{':
        openBrackets++; 
        break;
      case '}':
        openBrackets--;
        break;
      case '"':
      case "'":
        waitForChar = currChar;
        break;
      case '/':
        var nextChar = block.charAt(currPos + 1);
        if (nextChar === '/') {
          waitForChar = '\n';
        } else if (nextChar === '*') {
          waitForChar = '*/';
        }
    }
  } else {
    if (currChar === waitForChar) {
      if (waitForChar === '"' || waitForChar === "'") {
        block.charAt(currPos - 1) !== '\\' && (waitForChar = false);
      } else {
        waitForChar = false;
      }
    } else if (currChar === '*') {
      block.charAt(currPos + 1) === '/' && (waitForChar = false);
    }
  }

  currPos++ 
  if (openBrackets === 0) { stillSearching = false; } 
}

console.log(block.substring(startIndex , currPos)); // contents of the outermost brackets incl. everything inside 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T11:11:57.093

我同意 Lucero 的观点，即正则表达式不是为此而设计的，而是为了回答您的问题：

问题是你匹配除了`}`. 但是由于您要匹配的内部数据本身包含 a `}`，因此外部大括号的内容不匹配。

```
{
    var foo = {
        bar: 1
==> };

    var foo2 = {
        bar: 2    
==> };
} 
```

您可以使用此正则表达式：

```
{([\S\s]*)} 
```

解释：

```
{                   match opening {
    (               group
        [\S\s]      match everything, workaround for the missing s option in JS
              *     greedy, makes it match as much as possible
    )               end group
}                   match closing } 
```

# mysql - Mysql 中间表 - 最好有重复行？

> ID：15717439
> 
> 赞同：0
> 
> 时间：2013-03-30T10:24:06.477
> 
> 标签：mysql, foreign-keys, primary-key, database-normalization

在数据库中，我有一个用户名表和一个权限表。我还有一个中间表，可以将用户分配到一个或多个司法管辖区。

```
user table
--------------
userID
first_name
jurID

jurisdiction table
-----------------
jurId
region

user_jurisdiction
------------------
userID 
jurID 
```

这将导致类似：

```
 user_jurisdiction
    +--------+-------+
    | userID | jurID |
    +--------+-------+
    |      6 |     2 |
    |      6 |     3 |
    |     11 |     2 |
    |     12 |     1 |
    +--------+-------+ 
```

对于拥有超过 1 个管辖区的用户，是否可以重复 userdID 行？或者如果不使用额外的 JurID 列并将它们设置为 null 会更好吗？如：

```
user_jurisdiction
+--------+-------++--------+-------+
| userID | jurID |  jurID | jurID  |
+--------+-------++--------+-------+
|      6 |     2 |       3|    null|
|     11 |     2 |    null|    null|
|     12 |     1 |    null|    null|
+--------+-------+--------+--------+ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T12:20:53.590

您有一张`user_jurisdiction`表，因为您在用户和司法管辖区之间存在多对多关系。

因此，`user_jurisdiction`为单个用户输入多行，每个管辖区一行：

```
6   2
6   3
11  2
12  1 
```

以你为例。

`UserJurisdictionId`此外，您应该在该表中包含自动递增。每个表都有一个主键是个好主意。

And, you can remove `user.jurID` from the `user` table. All information about jurisdictions should be in `user_jurisdictions`. You would use a `join` to get the jurisdiction information for a particular user.

# php - Zend Framework - Redirect to routed direction

> ID：15717440
> 
> 赞同：1
> 
> 时间：2013-03-30T10:24:21.820
> 
> 标签：php, zend-framework

I have a small problem with PHP Zend Framework. I have the following routes in file application.ini:

```
resources.router.routes.mainpage.route = "main-page.html"
resources.router.routes.mainpage.defaults.controller = "index"
resources.router.routes.mainpage.defaults.acion = "index" 
```

If i do a direct in any action:

```
$this->_helper->redirector('index', 'index'); 
```

then i will be redirect to adress: **my-project/public/index/index** But i want to adress be a **my-project/public/main-page.html** (as it is determined application.ini)

Can somebody help me? P.S. Sorry for my english.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T16:33:05.970

使用[重定向器助手中的 gotToUrl 方法](http://framework.zend.com/manual/1.12/en/zend.controller.actionhelpers.html)

```
$this->_redirector = $this->_helper->getHelper('Redirector');
$this->_redirector->gotoRoute(
        array('fooRouteArgument' => fooValue),
        'route-name'
); 
```

对于您的情况，这会导致：

```
$this->_redirector->gotoRoute(array(), 'mainpage'); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-30T16:24:40.790

First of all, it seems your syntax in your application.ini is wrong. See [ZF-Manual: Resource Router](http://framework.zend.com/manual/1.12/en/zend.application.available-resources.html#zend.application.available-resources.router)

In your case it would bes sth. like:

```
resources.router.routes.mainpage.route = "/index"
resources.router.routes.mainpage.defaults.controller = "index"
resources.router.routes.mainpage.defaults.acion = "MainPage" 
```

However, it seems you're trying to redirect to a static page, which is not part of ZF. `Zend_Controller_Router` can only route to Controllers within your project, as far as I know.

如果是这样，您只需添加以下内容即可重定向：

```
//In view-scripts:
<?php echo $this->baseUrl('main-page.html'); ?>
//In controllerActions:
$this->_helper->getHelper('Redirector')
        ->gotoUrl('/main-page.html'); 
```

# dart - 有没有办法在飞镖中本地化数字和日期？

> ID：15717456
> 
> 赞同：5
> 
> 时间：2013-03-30T10:25:32.313
> 
> 标签：dart

在 C# 中，我们有 CultureInfo，它会影响 ToString() 处理日期和数字的方式，例如。您可以通过以下方式设置 CurrentCulture：

```
Thread.CurrentThread.CurrentCulture = new CultureInfo("pl-PL");; 
```

飞镖中的上述内容是否有任何等价物？

编辑：

1.  简短的回答是：使用 intl 包（感谢所有人的回答）
2.  正如 Alan Knight 在下面指出的那样，在 Dart 中“按线程”设置区域设置是没有意义的，因为我们不明确控制线程。
3.  在我写这个 NumberFormating 的那一刻，据我所知，它正在进行中

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T10:08:41.650

The [`intl`](http://api.dartlang.org/docs/releases/latest/intl/Intl.html) library will offer you this, although it doesn't affect the behavior of `toString()`.

Here's an example:

Add as a dependency to your `pubspec.yaml`:

```
dependencies:
  intl: any # You might specify some version instead of _any_ 
```

Then a code sample:

```
import 'package:intl/intl.dart';
import 'package:intl/date_symbol_data_local.dart';

main() {
  initializeDateFormatting("en_US", null).then((_) {
    var formatter = new DateFormat.yMd().add_Hm();
    print(formatter.format(new DateTime.now()));
  });
} 
```

The output looks like this:

> 07/10/1996 12:08 PM

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T23:59:09.860

是的，根据前面的条目，Intl 库就是您想要的。您可以设置默认语言环境，或使用 withLocale 方法在函数中进行设置。通过线程设置它不起作用，因为没有线程。另一个主要区别是，由于这些都是下载到浏览器中的，因此您不会自动获得所有可用的语言环境数据，而是必须通过异步初始化步骤来加载数据。这可能会很快切换到使用新的延迟加载功能。

此外，语言环境不会影响系统 toString() 操作，但您必须使用 DateFormat 对象来打印日期。由于它仍在进行中，NumberFormat 还不能在语言环境中正常工作，但应该很快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T10:58:38.887

[http://api.dartlang.org/docs/releases/latest/intl/Intl.html](http://api.dartlang.org/docs/releases/latest/intl/Intl.html)

从页面： Intl 类为国际化相关任务提供了一个公共入口点。

# javascript - 如何对齐具有不同高度的div？

> ID：15717458
> 
> 赞同：0
> 
> 时间：2013-03-30T10:25:37.070
> 
> 标签：javascript, html

我需要一个 Javascript 代码来在以下模型中附加新的 DIV。我将使用像左浮动这样的默认排序，这些项目以水平方式排序。请帮我

```
<div id="maincontainer">

<div style="height:100px;width:150px; float:left; border:1px solid red; margin:5px;">smallest</div>
<div style="height:200px;width:150px; float:left; border:1px solid red; margin:5px;">largest</div>
<div style="height:150px;width:150px; float:left; border:1px solid red; margin:5px;">middle</div>
<div style="height:100px;width:150px; float:left; border:1px solid red; margin:5px;">middle2</div>
<div style="height:190px;width:150px; float:left; border:1px solid red; margin:5px;">middle3</div>
<div style="height:160px;width:150px; float:left; border:1px solid red; margin:5px;">middle4</div>

</div> 
```

```
<javascript>
$('div').sort(function (a, b) {
    return $(a).height() > $(b).height() ? 1 : -1;  
}).appendTo('body');
</javascript> 
```

我得到的输出是

![在此处输入图像描述](../Images/043384ac4a0a929ac8d12b0dce6acfa2.png)

我需要这样

![在此处输入图像描述](../Images/1231ff09b49486ab1357af67b51cb22b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T10:31:45.463

您可以创建 3 个或者您需要具有固定宽度的列并将块放入此不浮动的块中。

例如：

```
<div id="first_col">
  <div class="block">
    content
  </div>
  <div class="block">
    content2
  </div>
</div>

<div id="second_col">
  <div class="block">
    content
  </div>
  <div class="block">
    content2
  </div>
</div>

<div id="last_col">
  <div class="block">
    content
  </div>
  <div class="block">
    content2
  </div>
</div> 
```

并由 JS 新块应用到具有类的 div 中，其中高度最小。

# haskell - 当此类约束成立时，将一个没有约束的 GADT 转换为另一个有约束的 GADT

> ID：15717462
> 
> 赞同：10
> 
> 时间：2013-03-30T10:25:54.340
> 
> 标签：haskell, dsl, gadt

我们能否将没有给定构造函数约束的 GADT 转换为具有上述约束的 GADT？我想这样做是因为我想深度嵌入 Arrows 并用（目前）似乎需要的表示做一些有趣的事情`Typeable`。（[一个原因](https://stackoverflow.com/a/12232127/682376)）

```
data DSL a b where
  Id   :: DSL a a
  Comp :: DSL b c -> DSL a b -> DSL a c
  -- Other constructors for Arrow(Loop,Apply,etc)

data DSL2 a b where
  Id2   :: (Typeable a, Typeable b)             => DSL2 a a
  Comp2 :: (Typeable a, Typeable b, Typeable c) => DSL2 b c -> DSL2 a b -> DSL2 a c
  -- ... 
```

我们可以尝试以下`from`函数，但由于我们没有 `Typeable`递归点的信息，所以很快就会中断

```
from :: (Typeable a, Typeable b) =>  DSL a b -> DSL2 a b
from (Id)       = Id2
from (Comp g f) = Comp2 (from g) (from f) 
```

因此，我们尝试在类型类中捕获转换。然而，这将被打破，因为我们将失去存在主义的`Typeable b`信息。`b`

```
class From a b where
  from :: a -> b

instance (Typeable a, Typeable b) => From (DSL a b) (DSL2 a b) where
  from (Id)       = Id2
  from (Comp g f) = Comp2 (from g) (from f) 
```

还有其他建议吗？最终，我想创建一个深度嵌入`Category`并与类型参数信息`Arrow`一起。`Typeable`这样我就可以使用箭头语法在我的 DSL 中构造一个值，并拥有相当标准的 Haskell 代码。也许我必须求助于 Template Haskell？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-30T10:31:19.247

递归情况的问题对于转换`DSL a b`为`DSL2 a b`.

要进行这种转换，需要找到案例`Typeable`中存在类型的字典`b`——`Comp`但`b`实际上已经被遗忘了。

例如考虑以下程序：

```
data X = X Int
-- No Typeable instance for X

dsl1 :: DSL X Char
dsl1 = -- DSL needs to have some way to make non-identity terms,
       -- use whatever mechanism it offers for this.

dsl2 :: DSL Int X
dsl2 = -- DSL needs to have some way to make non-identity terms,
       -- use whatever mechanism it offers for this.

v :: DSL Int Char
v = Comp dsl1 dsl2

v2 :: DSL2 Int Char
v2 = -- made by converting v from DSL to DSL2, note that Int and Char are Typeable

typeOfIntermediate :: DSL a c -> TypeRep
typeOfIntermediate int =
    case int of
        Comp (bc :: DSL2 b c) (ab :: DSL2 a b) ->
            typeOf (undefined :: b)

typeOfX = typeOfIntermediate v2 
```

换句话说，如果有一种方法可以进行一般的转换，您可以以某种方式`Typeable`为实际上没有的类型发明一个实例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-31T08:28:36.200

# symfony - 无法在 Symfony2 Twig 扩展中重新声明类

> ID：15717463
> 
> 赞同：0
> 
> 时间：2013-03-30T10:25:55.880
> 
> 标签：symfony, twig

我正在创建一个 Twig 扩展并使用服务激活它。一切都很好，除了我试图简单地使用我的 Twig 扩展中的另一个类。

这个想法是实例化新类，然后根据需要使用它。实例化是一个问题，因为它会出错：

```
Error: Cannot redeclare class NewClass in .../Bundle/NewClass.php line 13 
```

当然它会实例化一次。为什么会这样？

```
namespace Bundle\Twig;

use Bundle\NewClass;

class NewExtension extends \Twig_Extension
{

    private $request;
    private $new_class;

    public function __construct($container) {

        //get the Request object   
        $this->request = $container->get('request');

        //instantiate new class
        $this->new_class = new NewClass();  // this part triggers the error

    }

    ///etc. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T11:06:39.880

你应该把你的`NewClass`变成一个服务，然后把它和`@request`服务注入你的树枝扩展而不是容器。直接注入容器显然是个坏主意。

例如在您的服务中..

```
services:
    # create new class as a instantiated service
    acme_demo.new_class:
        class: Acme\DemoBundle\NewClass
        arguments: [ '@request' ]

    acme_demo.twig.acme_extension:
        class: Acme\DemoBundle\Twig\AcmeExtension
        arguments: [ '@request', '@acme_demo.new_class' ]
            # inject the Request service and your class from above
        tags:
            - { name: twig.extension } 
```

然后在你的 Twig 扩展中

```
namespace Bundle\Twig;

use Bundle\NewClass;

class NewExtension extends \Twig_Extension
{
    private $new_class;

    public function __construct(NewClass $newClass) {
        $this->new_class = $newClass;
    }

    ///etc. 
```

在你的 NewClass 中：

```
namespace Bundle;

class NewClass
{
    private $param1;
    private $param2;

    public function __construct(Request $request)
    {
        $this->param1 = $request->get('param1');
        $this->param2 = $request->get('param2');

        // You could also add some check in here to make sure they are valid.
    } 
```

# ruby-on-rails - 一种计算和存储模型短 url 的方法

> ID：15717467
> 
> 赞同：1
> 
> 时间：2013-03-30T10:26:25.093
> 
> 标签：ruby-on-rails, ruby, activerecord

假设您有一个简单的模型`Project`，您需要存储它的短 url 以供以后使用，什么时候计算它的最佳方法是？

我现在最好的解决方案是一个 after_create 钩子，但这会导致代码像

> 短网址 || Rails.application.routes.url_helpers.project_path（项目，主机：HOSTNAME）

从模型访问 url 感觉不对。

简而言之，您将计算 short_url 的代码放在哪里？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T10:48:31.070

您是否有理由不想保存确切的内容`short_url`？因此，当您需要项目对象的 url 时，您只需检查 short_url 是否存在。我相信你可以只添加一个装饰器来确定项目的 url。

```
#using Draper
class ProjectDecorator < Draper::Decorator
  def effective_url
    source.short_url.present? ? source.short_url : project_path(source)
    # or source.short_url || project_path(source) if short_url will not be an empty string
    # or source.short_url || source
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T15:37:11.660

我会在控制器中添加这段代码。

```
class ProjectsController < ApplicationController
  def create
    @project = Project.new(params[:project])

    respond_to do |format|
      if @project.save
        @project.update_attribute(:short_url, project_url(@project))
        (..)
  end
end 
```

It feels like this code belongs to the controller as it deals with http/url. Storing in the db sounds ok, but asking for the url is the controller's responsibility.

The line:

```
@project.update_attribute(:short_url, project_url(@project)) 
```

needs to be added below the call to .save (or .create), as only then the project_url helper can be called (the project object got its id already).

# three.js - THREE.lod 和法线贴图着色器失败

> ID：15717468
> 
> 赞同：0
> 
> 时间：2013-03-30T10:26:25.057
> 
> 标签：three.js

我想玩三个 lod 系统，我在我的网格上应用了法线贴图材质，但它因 GL 错误而失败：

WebGLRenderingContext：GL 错误：GL_INVALID_OPERATION：glDrawElements：尝试访问属性 2 中超出范围的顶点

我认为任何人都可以很容易地复制它，只需编辑 webgl_lod 示例，而不是应用 MeshLambertMaterial 使用 misc_control_fly 示例中提供的法线贴图 ShaderMaterial。

我错过了什么吗，法线贴图着色器不应该与 LOD 网格一起使用吗？

编辑：这里是查看问题的链接。

正在工作的原始示例 webgl_lod：http: [//typedef.byethost8.com/examples/webgl_lod.html](http://typedef.byethost8.com/examples/webgl_lod.html)

使用来自shaderLib的法线贴图着色器而不是web_lod示例的原始meshLambertMateriel：http: [//typedef.byethost8.com/examples/failing_webgl_lod.html](http://typedef.byethost8.com/examples/failing_webgl_lod.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T10:04:16.070

您必须为几何图形生成切线。添加：

```
geometry[ 0 ][ 0 ].computeTangents();
geometry[ 1 ][ 0 ].computeTangents(); 
```

这将摆脱错误：

WebGLRenderingContext：GL 错误：GL_INVALID_OPERATION：glDrawElements：尝试访问属性 2 中超出范围的顶点

另外，我不得不使用sheres而不是平面来查看显示的东西=>也许没有为平面生成纹理坐标？或者法线贴图材质不适用于平面？

# git - Git：可以合并master到子分支吗？

> ID：15717470
> 
> 赞同：1
> 
> 时间：2013-03-30T10:26:26.950
> 
> 标签：git

我正在研究我的 git 存储库的子分支。我已经研究了一段时间，以及我与主分支合并并投入使用的其他分支。因此，一旦我完成子分支并将其合并到主分支中，将会有很多冲突需要解决。

我的问题是，当我在处理我的子分支时，是否可以将最新的主分支合并到其中以便我可以开始解决冲突？然后将来当我完成子分支时，将其合并到主分支中以进行最终发布？

我确定这没问题，但想检查我是否以正确的方式进行此操作。

希望我说得通：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T10:38:13.407

更好的方法可能是不时`git rebase`从主分支使用，并在准备好时将更改合并到主分支中。

[这篇文章](http://randyfay.com/content/rebase-workflow-git)描述了这个工作流程、它的好处和缺陷。

*TL;DR* : 提交历史会更清晰，但必须谨慎使用变基（不要变基公开的分支）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T10:29:28.550

当您在功能分支上工作时，您可以将您的 master 合并到您的分支中以获取最新版本。在大多数情况下，您在功能分支上工作的时间更长，并且需要您的主人提供一些功能来防止麻烦。

# firefox - Show a panel anchored to Erik-vold's toolbarbutton, programmatically

> ID：15717474
> 
> 赞同：1
> 
> 时间：2013-03-30T10:26:41.483
> 
> 标签：firefox, firefox-addon, firefox-addon-sdk

Here is what I want to do:

```
var mainPanel = require("panel").Panel({
    width: '200',
    height: '500',
    contentURL: gatewayURL,
    contentScriptWhen: "start",
    contentScriptFile: [
        self.data.url("messagelistener.js")
    ]
});

var button = toolbar.ToolbarButton({
    'id': 'com.user043.myOneButton',
    'image': require("self").data.url("image-24.ico"),
    'label': "Test",
    'panel': mainPanel
});

tabs.on('ready', function(tab) {
    if(tab.url==="http://www.google.com") {
        mainPanel.show();    //This opens panel in centre. I want the panel to be anchored to the button it is associated to(just like it appears when I click on toolbarbutton). How do I get the DOM of the button created by ToolbarButton API?
    }
} 
```

I am using erik-vold's toolbarbutton API: [https://github.com/voldsoftware/toolbarbutton-jplib](https://github.com/voldsoftware/toolbarbutton-jplib). How do I get the DOM of the button so that I can do something like `mainPanel.show(tbb);` where tbb = DOM of button? Please help!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T05:03:10.547

```
panel.show(require('sdk/window/utils').getMostRecentBrowserWindow().document.getElementById('com.user043.myOneButton')) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T06:32:15.073

```
var mainPanel = require("panel").Panel({
    width: '200',
    height: '500',
    contentURL: gatewayURL,
    contentScriptWhen: "start",
    contentScriptFile: [
        self.data.url("messagelistener.js")
    ]
});

var button = toolbar.ToolbarButton({
    'id': 'com.user043.myOneButton',
    'image': require("self").data.url("image-24.ico"),
    'label': "Test",
    onClick: function(view) { 
          view.panel = mainPanel;

      }
});

Instead of using mainPanel.show(),  use view.panel = mainPanel;. It will solve the problem bcz I did the same and it works for me. 
```

# mysql - 如何在 mySql 中创建 liferay 表？

> ID：15717484
> 
> 赞同：1
> 
> 时间：2013-03-30T10:28:07.717
> 
> 标签：mysql, liferay

如何在 mysql 数据库中查看我的 liferay 表？我已经在liferay home.中创建了portal-ext.properties。但是我看不到我的liferey 表mySql.. 表是在eclipse IDE 的docroot/web-inf/sql 中创建的...帮助我哪里错了，缺少什么？

```
#
# MySQL 
#
include-and-override=portal-ext.properties
include-and-override=${liferay.home}/portal-ext.properties

jdbc.default.driverClassName=com.mysql.jdbc.Driver 
jdbc.default.url=jdbc:mysql://localhost/kportal?useUnicode=true&characterEn
coding=UTF-8&useFastDateParsing=false
jdbc.default.username=root
jdbc.default.password=ubuntu123
schema.run.enabled=true
schema.run.minimal=true 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T09:14:53.317

通过 service-builder 创建的表只会在您将插件*部署*到实际服务器（并运行服务器）后创建，*而不是在构建*时创建。此外，您的插件需要正确部署 - 如果初始化失败（例如，由于缺少部分或未满足的依赖关系），将不会创建表。

此外，默认情况下，表将使用您提供的命名空间作为前缀命名。因此，如果您声明一个命名空间 X（在 service.xml 中）和一个名为 Y 的实体，则要查找的表将命名为 X_Y。

另外，请记住，您必须`ant build-services`在编辑 service.xml 后运行。然后部署它并等待类似“...您的插件...可供使用”的日志消息，以确保它正确部署。（编辑：这不再为 portlet 打印，仅针对其他插件类型，因此在部署插件时您可能看不到它）

如果这没有帮助，请提供更多信息。目前，您没有提供有关您实际尝试过的任何细节。您将在[开发指南](https://www.liferay.com/documentation/liferay-portal/6.1/development/-/ai/service-build-5)中找到更多步骤和详细信息。

另外，请确保

*   that the account you use for the database has CREATE TABLE permissions (you use root in your configuration above - that should do the trick)
*   that you're checking the correct database in case you have multiple
*   that Liferay actually picks up your configuration file. The startup log will tell you which portal-ext.properties files are read, as well as which database it will use. In case you can't find the name/location of your portal-ext.properties file, make sure that you indeed have a file with this name. A common problem on windows is that people create portal-ext.properties.txt (and Windows hides the .txt part of the name)

# bash - BASH 在字符中拆分变量并在 for 循环中打印出空格

> ID：15717487
> 
> 赞同：1
> 
> 时间：2013-03-30T10:28:31.000
> 
> 标签：bash, loops, for-loop, space

我正在尝试创建一个精美的欢迎消息，以便在终端打开时显示。我用这段代码在Java中完成了它：

```
public void slowPrint() {
    String message = "Welcome, " + System.getProperty("user.name");

    try {
        for(int i = 0; i < message.length(); i++) {
            System.out.print(message.charAt(i));
            Thread.sleep(50);
        }
    } catch(InterruptedException ex) {
        ex.printStackTrace();
    }
} 
```

现在，我对 bash 还很陌生，但我设法编写了以下代码：

```
for i in W e l c o m e , $USER; do
    echo -ne $i
    sleep 0.05
done

echo ! 
```

这段代码有两个问题：

1.  我不知道如何在逗号后打印一个纯空格，输出只是`Welcome,simon!`我怎样才能让它输出一个空格呢？
2.  当然，它会`$USER`作为一个完整的单词打印。我希望它是一个字符一个字符，我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T10:37:57.783

您可以使用标准 for 循环来实现相同的效果：

```
MESSAGE="Welcome, $USER"
for (( i=0; i<${#MESSAGE}; i++ )); do
    echo -ne "${MESSAGE:$i:1}"
    sleep 0.05
done
echo ! 
```

该`${MESSAGE:$i:1}`语法从字符串中的位置获取子字符串 1 `i`。将该部分括在引号中可确保同时打印空格和制表符之类的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T10:33:53.510

您可以很容易地指定空间；用引号括起来：

```
for i in W e l c o m e , ' ' ... 
```

`$USER`可以通过多种方式拆分成单独的字符。我这样做的方式是老式但可靠的：

```
for i in W e l c o m e , ' ' $(sed 's/./& /g' <<< "$USER") 
```

注意`<<<`操作保存了一个进程和一个管道；它重定向标准输入，`sed`因此它将给定的字符串作为输入行读取。

或者，如果您认为用户名可能包含任何空格或其他特殊字符：

```
for i in W e l c o m e , ' ' $(sed "s/./'&' /g" <<< "$USER") 
```

（这不是万无一失的；该值`USER="Tam O'Shanter"`会引起一些悲伤，而对此的简单解决方案反而会遇到麻烦`USER='Will "O'\''Wisp" Light'`。...咕哝，咕哝，奥术咒语，...

```
 for i in W e l c o m e , ' ' $(sed "s/./'&' /g; s/'''/\\\\'/g" <<< "$USER") 
```

除了在所有内容周围都用单引号呼应名称；发牢骚，发牢骚，...我想我刚刚弄清楚了为什么我不会同时这样做，...空格也会妨碍...我会使用简单的第一个版本并告诉人们不要在 的值中使用空格或特殊字符`$USER`。）

~~可能有~~ 一些***方法***可以在不调用单独的过程的情况下做到这一点，例如`sed`；请参阅[heuristicus](https://stackoverflow.com/users/499940/heuristicus)的[答案](https://stackoverflow.com/a/15717563/15168)。所以，就那样做吧。但请注意，它与此答案不完全相关的方式紧密相关- 您可以轻松地将符号（仅 -）替换为。`bash``bash``<<<``bash``echo "$USER" | ...`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T11:24:07.857

完全 POSIXly 可移植，即没有那些讨厌的 bashisms，也没有用于 sed 的 fork：

```
#!/bin/sh

m="Welcome, $USER!"
while test ${#m} -gt 0; do
  r=${m#?}
  printf '%s ' "${m%%$r}"
  m=$r
  sleep 0.05
done
printf '\n' 
```

请注意，几分之一秒的睡眠是不可移植的。

# swing - 更改标签图标后更新面板布局

> ID：15717494
> 
> 赞同：1
> 
> 时间：2013-03-30T10:29:48.290
> 
> 标签：swing, layout, jpanel, jlabel

我创建了一个项目，该项目将从 ftp 服务器下载图像的缩略图并使用 JLabel 将其显示在面板中。图像正在显示，但面板的布局只有在我再次调用面板（即使用框架上的按钮）时才有效，然后布局会自动更正。我究竟做错了什么？这是代码

编辑-用 sscce 更新了代码

```
1\. sscce.java 

import java.awt.Container;
import java.awt.FlowLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JFrame;

/**
 *
 * @author Rohn
 */
public class Sscce implements Interface{

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        JFrame frame=new JFrame();
        frame.setVisible(true);
        //frame.add(sci.);
        Container c=frame.getContentPane();
        JButton button=new JButton("Recall ShowCategoryImagesFunction");
        button.addActionListener(new ActionListener(){

            @Override
            public void actionPerformed(ActionEvent e) {
                sci.ShowCategoryImagesFunction("\\Nature\\Black And White"); //for testing purpose only
                                                                             // if button is pressed then we get right layout and image load
            }
        });
        c.setLayout(new FlowLayout());
        c.add(button);
        c.add(sci.ShowCategoryImagesFunction("\\Nature\\Black And White")); // default path for image load for first time
                                                                            // problem in correctly loading images and text with layout
        frame.pack();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }
}

2\. ShowCategoryImages.java  

package sscce;  

import it.sauronsoftware.ftp4j.FTPClient;  
import it.sauronsoftware.ftp4j.FTPFile;  
import java.awt.FlowLayout;  
import java.awt.event.MouseAdapter;  
import java.awt.event.MouseEvent;  
import java.io.File;  
import javax.swing.ImageIcon;  
import javax.swing.JLabel;  
import javax.swing.JPanel;  
import javax.swing.SwingConstants;  
public class ShowCategoryImages{  
//FTPClient client=null;  
JPanel panel=new JPanel();   
JLabel label=new JLabel();  
FTPClient client=new FTPConnection().FTPConnection();  
FTPFile[] list;  
File thumbnails;  
File[] files;  
ImageIcon icon;  
public JPanel ShowCategoryImagesFunction(String path){  
// delete all the components on reload  
 if(panel.getComponents().length>0){  
     System.out.println(panel.getComponents().length);  
     panel.removeAll();  
            panel.revalidate();  
            panel.repaint();  
 }  
       //panel.setLayout(new GridLayout(0,4,2,2));  
 //panel.setLayout(new BoxLayout(panel,BoxLayout.X_AXIS));  
 panel.setLayout(new FlowLayout());  
             panel.revalidate();  
            panel.repaint();  
            panel.updateUI();  
       try{  
           //images in /wallpapers/nature/black and white/thumb  
       client.changeDirectory("\\Wallpapers"+path+"\\thumb"); //path of thumbnails  
       //temporary folder for holding images  
       thumbnails=new File("Thumbnails");  
       list=client.list();  
       if(thumbnails.exists()){  
   files = thumbnails.listFiles();  
    if(files!=null) { //some JVMs return null for empty dirs  
        for(File f: files) {  
             f.delete();  
        }  
    }  
       }  
       else  
       thumbnails.mkdir();  
       for(int i=0;i<list.length;i++){  
           System.out.println("running");  
           icon=new ImageIcon(thumbnails.getAbsolutePath()+"\\"+list[i].getName());  
           icon.getImage().flush(); 
           client.download(client.currentDirectory()+"\\"+list[i].getName(), new java.io.File(thumbnails.getAbsolutePath()+"\\"+list[i].getName()));  
label=new JLabel(list[i].getName());  
           label.setIcon(icon);  
           label.setVerticalTextPosition(SwingConstants.BOTTOM);  
           label.setHorizontalTextPosition(SwingConstants.CENTER);  
            panel.add(label);  
            panel.revalidate();  
            panel.repaint();  
            label.addMouseListener(new MouseAdapter(){  
            public void mousePressed(MouseEvent e){  
                JLabel la=(JLabel)e.getSource();  
                System.out.println(la.getIcon());  
            }  
            });  
           }  
            //client.disconnect(true);  
       }catch(Exception e){  
           System.out.println(e.getMessage());  
       }  
       return panel;  
    }  
   }

3\. FTPConnection.java  

import it.sauronsoftware.ftp4j.FTPClient;  
public class FTPConnection {  
//ftp connection on local host  
public static FTPClient FTPConnection(){  
String ftphost="127.0.0.1";  
String ftpuser="newuser";  
String ftppassword="wampp";  
int ftpport=21;   
FTPClient client=new FTPClient();  
try{  
if(client.isConnected()==true){  
client.disconnect(true);  
};  
client.connect(ftphost, ftpport);  
client.login(ftpuser, ftppassword);  
}  
catch(Exception e){  
System.out.println(e.getMessage());  
}  
return client;  
}  
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T10:50:14.793

不完全确定您的意思*not layout*，但您的代码在添加标签后缺少重新验证/重新绘制：

```
// adding all labels
forEach (thumb....) {
   JLabel label = new JLabel(thumb);
   panel.add(label);
}
panel.revalidate();
panel.repaint(); 
```

# scala - foreach 和枚举

> ID：15717496
> 
> 赞同：6
> 
> 时间：2013-03-30T10:30:24.997
> 
> 标签：scala

我正在尝试[通过 Dean Wampler 学习一些 Scala 阅读 Programming Scala](http://ofps.oreilly.com/titles/9780596155957/index.html)。

我正在尝试复制一个关于`Enumeration`

```
object Breed extends Enumeration {
  val doberman = Value("Doberman Pinscher")
  val yorkie = Value("Yorkshire Terrier")
  val scottie = Value("Scottish Terrier")
  val dane = Value("Great Dane")
  val portie = Value("Portuguese Water Dog")
}

for (breed <- Breed) println(breed.id + "\t" + breed) 
```

但是，在最后一行代码中，我得到了这个错误：

```
value foreach is not a member of object Breed 
```

我错过了什么吗？我该如何解决？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-30T10:35:33.120

您需要使用`.values`：

```
for (breed <- Breed.values) println(breed.id + "\t" + breed) 
```

为什么不让它更可扩展一点

```
Breed.values.foreach(breed => println(breed.id + "\t" + breed)); 
```

# coffeescript - Spine.js，设置模型默认值

> ID：15717508
> 
> 赞同：1
> 
> 时间：2013-03-30T10:31:17.687
> 
> 标签：coffeescript, spine.js

在 Rails 中，我们有生命周期钩子，它允许我们这样做：

```
class Subscription < ActiveRecord::Base
  before_create :record_signup

  private
    def record_signup
      self.signed_up_on = Date.today
    end
end 
```

有没有最好的方法来完成同样的事情（我需要它来设置一些默认值）`Spine.js`？

目前我这样做，但也许有更好的方法存在？

```
class Subscription extends Spine.Model
    @record_signup: (self) ->
      self.signed_up_on = new Date()

Subscription.bind 'beforeSave', Subscription.record_signup 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T10:58:41.050

CoffeeScript 类主体是可执行的：

```
class Subscription extends Spine.Model
    @record_signup: (self) ->
      self.signed_up_on = new Date()

    @bind 'beforeSave', @record_signup 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T20:21:41.547

如果未设置默认值，如何覆盖标准 Model.create 函数以包含默认值？

```
@create: (atts, options) ->
  atts.myVal or= 'someDefault'
  record = new @(atts)
  record.save(options) 
```

# php - PHP条件，如果是当前页面，则链接被高亮

> ID：15717516
> 
> 赞同：2
> 
> 时间：2013-03-30T10:32:28.333
> 
> 标签：php, arrays, if-statement, self

我有一个带有侧边栏的网页，它使用了一些 CSS 类。如果class =“active”，那么链接将被突出显示。我想让它在任何页面上，脚本都会检查它所在的链接，然后决定要突出显示哪个链接。下面是我所在的位置，但我真的不知道如何继续，请指出正确和更好的方向！如果我有 20 个链接，这个脚本会太长....谢谢！

* * *

```
<?php

$arr = array(

'1' => '/about.php', 
'2'=> '/abt-history2.php',
'3' => '/abt-shop.php',
);

$host =  $_SERVER['REQUEST_URI'];

if($host == $arr['1']) 
{
    $class1 = "active";
}

else if ($host == $arr['2']) 
{
    $class2 = "active";
}

else if ($host == $arr['3']) 
{
    $class3 = "active";
}

 ?>

   <ul id="navigationSide">
      <div style="padding-left:20px; padding-bottom:10px; font-size:16px; font-weight:800; color:#777;">TITLE</div>
      <li><a href="<?php print $arr['1'];  ?>" class="<?php echo"$class1" ?>">AA</a></li>
      <li><a href="<?php print $arr['2'];  ?>" class="<?php echo"$class2" ?>">BB</a></li>
    </ul>
    <div style="padding:5px;"></div>
    <ul id="navigationSide">
      <div style="padding-left:20px; padding-bottom:10px;  font-size:16px; font-weight:800; color:#777;">TITLE2</div>
      <li><a href="<?php print $arr['3'];  ?>" class="<?php echo"$class3" ?>" >CC</a></li>

</ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T10:54:05.317

```
Try
  <?php
    $arr = array(

      '1' => 'about.php', 
      '2'=> 'abt-history.php',
      '3' => 'abt-shop.php',
    );

    foreach($arr as $key => $page){

      $class = "";

      $currentPage = $_SERVER['REQUEST_URI']; // check its value and get page name

      if($currentPage ==  $page){

       $class = 'class ="active"';
      }
    ?>
    <li>
        <a href ="yourdomainname/<?php echo $page; ?>" <?php echo $class; ?>>
           link<?= $key; ?>
        </a>
    </li>
    <php
    }
    ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T10:36:54.650

你的想法没问题。问题是，您的密钥以 结尾`.php`并且您的`<li>`课程查找`abt-shop`, no `.php`，所以他们什么也找不到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T10:36:58.030

我才明白

> 如果我有 20 个链接，这个脚本就太长了……谢谢！

好吧，这就是`for`循环派上用场的时候。

```
<?php for($i=0; $i<20; $i++){ ?>

<li>
    <a href ="<?php echo $arr['abt-shop']; ?>"
       class="<?php echo "$class.$i" ?>">
       link<?= $i; ?>
    </a>
</li>

<?php } ?> 
```

**更新**

* * *

```
<?php $arr = array( '1' => '/about.php', 
                    '2'=> '/abt-history2.php',
                    '3' => '/abt-shop.php', );

 $host = $_SERVER['REQUEST_URI'];

 switch($host){

 case $arr['1'];
        $class1 = "active";
    break; 
case $arr['2'];
        $class2 = "active";
    break; 
case $arr['3'];
        $class3 = "active";
    break; 
case $arr['4'];
        $class4 = "active";
    break; 

 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-30T13:15:01.480

好的，这是新的，我删除了我之前发布的所有内容，这是另一个答案。由于`$_SERVER['REQUEST_URI']`进入`/Portal/TEST/file.php`我的本地主机，我已`/Portal/TEST/`在脚本中添加，您可以根据文件的结构将其删除。

```
<?php 
$arr = array(

'0' => '/Portal/TEST/about.php', 
'1'=> '/Portal/TEST/abt-history2.php',
'2' => '/Portal/TEST/abt-shop.php',
'3' => '/Portal/TEST/extra.php',
'3' => '/Portal/TEST/blaze.php',
);

 ?>

<h2>TITLE</h2>

<?php 

 for($i=0; $i< count($arr); $i++) {  

    if($_SERVER['REQUEST_URI'] == $arr[$i]) {

    $class = 'active';
 ?>

  <li><a href="<?php print $arr[$i];  ?>" class="<?php echo "$class".$i ?>"><?php echo $class ?>
</a></li>   <?php }else {
$class  = 'In active';

?>  
  <li><a href="<?php print $arr[$i];  ?>" class="<?php echo "$class".$i ?>"><?php echo $class ?>
</a></li> 

<?php
}

 }?> 
```

# javascript - 无法连接到 scriptcam 服务器

> ID：15717518
> 
> 赞同：2
> 
> 时间：2013-03-30T10:32:50.553
> 
> 标签：javascript, flash, camera, ip-camera

我已将 scriptcam 放入 2 个主机服务器。Bluehost 和 Hostinger 仍然得到相同的结果，如下：（通过 chrome web 开发者工具进行控制台检查）

```
ScriptCam version 1.4.0 booting...
Running on Flash PlugIn (WIN 11,6,602,180)
Adding global error handler
Adding right mousehandler
Retrieving flashvars
id:webcam
zoomChat:1
fileReady:function fileReady(qfileName) {
                //$('#recorder').hide();
                $('#message').html('Please wait for the file conversion to finish...');
                waitForMovie(qfileName);
            }
zoom:1
skewX:0
filename:testfile
rotate:0
noFlashFound:<p>You need <a href="http://www.adobe.com/go/getflashplayer">Adobe Flash Player 11.4</a> to use this software.<br/>Please click on the link to download the installer.</p>
flip:0
cornerRadius:0
width:550
setVolume:function setVolume(value) {
            $('#currentVolume').val(value);
            alert('Current Volume is ' + value);
            $.scriptcam.changeVolume(50);
            }
chatWindow:chatWindow
height:320
maximumTime:30
onError:function onError(errorId,errorMsg) {
                alert(errorMsg);
            }
path:scriptcam/
connected:function showRecord() {
                alert('Connect !!!');
                $( "#recordStartButton" ).attr( "disabled", false );
                //$('#b-screen').fadeIn(500);
                //$('#start-btn').attr( "disabled", false );
            }
skewY:0
timeLeft:function timeLeft(value) {
                $('input#timeLeft').val(value);
            }
Correcting video dimensions
Correcting scale
Drawing masks in memory
Starting ZXing
Setting AMF3 encoding
Init H264 encoder
h264Settings: Video codec used for compression: H264Avc
h264Settings: Level used for H.264/AVC encoding: 3
h264Settings: Profile used for H.264/AVC encoding: baseline
h264Settings: Bandwidth: 0
h264Settings: FPS: -1
h264Settings: Keyframe interval: 30
h264Settings: Quality: 90
Adding camera
Setting camera size to width: 550 height:320
Hardware acceleration used for camera: STAGEVIDEO
Hardware acceleration is available
License file loaded
Camera: Bandwidth: 0
Camera: Current FPS: 0
Camera: FPS: 30
Camera: Keyframe Interval: 30
Camera: Quality: 90 
```

如果我在演示中查看他们的网站以录制相机，我会看到：（通过 chrome web 开发人员工具进行控制台检查）

```
ScriptCam version 1.4.0 booting...
Running on Flash PlugIn (WIN 11,6,602,180)
Adding global error handler
Adding right mousehandler
Retrieving flashvars
cornerColor:e3e5e2
id:webcam
cornerRadius:20
timeLeft:function timeLeft(value) {
                $('#timeLeft').val(value);
            }
skewX:0
onError:function onError(errorId,errorMsg) {
                alert(errorMsg);
            }
skewY:0
fileName:demo430142
rotate:0
promptWillShow:function promptWillShow() {
                alert('A security dialog will be shown. Please click on ALLOW.');
            }
noFlashFound:<p>You need <a href="http://www.adobe.com/go/getflashplayer">Adobe Flash Player 11.4</a> to use this software.<br/>Please click on the link to download the installer.</p>
width:320
connected:function showRecord() {
                $( "#recordStartButton" ).attr( "disabled", false );
            }
flip:0
height:240
onWebcamReady:function onWebcamReady(cameraNames,camera,microphoneNames,microphone,volume) {
                $( "#slider" ).slider( "option", "disabled", false );
                $( "#slider" ).slider( "option", "value", volume );
                $.each(cameraNames, function(index, text) {
                    $('#cameraNames').append( $('<option></option>').val(index).html(text) )
                }); 
                $('#cameraNames').val(camera);
                $.each(microphoneNames, function(index, text) {
                    $('#microphoneNames').append( $('<option></option>').val(index).html(text) )
                }); 
                $('#microphoneNames').val(microphone);
            }
path:
showMicrophoneErrors:false
chatWindow:chatWindow
fileReady:function fileReady(fileName) {
                $('#recorder').hide();
                $('#message').html('Please wait for the file conversion to finish...');
                waitForMovie(fileName);
            }
zoom:1
setVolume:function setVolume(value) {
                value=parseInt(32 * value / 100) + 1;
                for (var i=1; i < value; i++) {
                    $('#LedBar' + i).css('visibility','visible');
                }
                for (i=value; i < 33; i++) {
                    $('#LedBar' + i).css('visibility','hidden');
                }
            }
zoomChat:1
Correcting video dimensions
Correcting scale
Drawing masks in memory
Starting ZXing
Setting AMF3 encoding
Init H264 encoder
h264Settings: Video codec used for compression: H264Avc
h264Settings: Level used for H.264/AVC encoding: 3
h264Settings: Profile used for H.264/AVC encoding: baseline
h264Settings: Bandwidth: 0
h264Settings: FPS: -1
h264Settings: Keyframe interval: 30
h264Settings: Quality: 90
Adding camera
Setting camera size to width: 320 height:240
Hardware acceleration used for camera: STAGEVIDEO
Hardware acceleration is available
GET https://www.scriptcam.com/scriptcam.lic 404 (Not Found) demo_2.cfm:804
License could not be found
Camera: Bandwidth: 0
Camera: Current FPS: 0
Camera: FPS: 30
Camera: Keyframe Interval: 30
Camera: Quality: 90
Connecting to server
The page at https://www.scriptcam.com/demo_2.cfm displayed insecure content from http://europe.scriptcam.com:443/fcs/ident2.
 (program):1
POST http://europe.scriptcam.com:443/fcs/ident2 404 (Not Found) europe.scriptcam.com:443/fcs/ident2:1
The page at https://www.scriptcam.com/demo_2.cfm displayed insecure content from http://europe.scriptcam.com:443/open/1.
 (program):1
POST http://europe.scriptcam.com:443/open/1 404 (Not Found) europe.scriptcam.com:443/open/1:1
conectionOK
connectionOK-connect
connectionOK-connect-past
ncstatusevent fired
NetConnection.Connect.Success
NetConnection connected with protocol rtmp, proxy type none, connected proxy type none 
```

如果您看到，我上传的页面是他们的 demo2.html，我相信它的设置与他们网站上的演示页面相同。他们的连接而我的没有，我做错了什么吗？！有没有人有使用 scriptcam（1.40 版）的经验？！或者有人对 Javascript Webcam Flash Lib 有更好的建议吗？！

任何建议将不胜感激......

提前致谢， 阿龙伊斯亚迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T15:42:12.753

js代码中有一个函数：

```
function fileReady(fileName) {
                $('#recorder').hide();
                $('#message').html('This file is now dowloadable for five minutes over &lt;a href='+fileName+'"&gt;here&lt;/a&gt;.');

[...] 
```

它将文件上传到网络摄像头服务器。

错误在 href 值中。

代替：`href='+fileName+'"`

与：`href='+fileName+'`。

（删除最后一个“）

# html - Cookie：基本信息和查询

> ID：15717525
> 
> 赞同：-1
> 
> 时间：2013-03-30T10:33:42.540
> 
> 标签：html, computer-science

我在维基上读到这个：

> cookie，也称为 HTTP cookie、Web cookie 或浏览器 cookie，通常是在用户浏览网站时从网站发送并存储在用户 Web 浏览器中的一小段数据。当用户日后浏览同一个网站时，网站可以检索存储在 cookie 中的数据，以通知网站用户之前的活动。 [1] Cookie 旨在成为网站记住网站状态或用户过去进行的活动的可靠机制。这可以包括单击特定按钮、登录或记录用户甚至在几个月或几年前访问过哪些页面。

现在我想知道是谁创建了 cookie。是浏览器还是每个站点都可以自己创建cookie？谁控制必须将哪些信息保存在 cookie 中，以及如何将所有表单字段数据保存在 cookie 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T12:32:51.497

现在我想知道是谁创建了 cookie。是浏览器还是每个站点都可以自己创建cookie？谁控制必须将哪些信息保存在 cookie 中，以及如何将所有表单字段数据保存在 cookie 中？

Cookie 由 Web 服务器在客户端计算机上创建。cookie 是使用 php 会话启动的，客户端的浏览器将此 cookie 存储为 phpsession id，用于识别用户，然后服务器上的 php 可以通过从客户端发送到服务器的 cookie 识别用户。（通过浏览器）。

网站的创建者将控制 cookie 中包含的数据，例如

```
`<? php 
session_start();
if($_SESSION['logged_in'] == "")
{
 header("Location: login.php");
}
?>` 
```

例如，上面的代码将检查用户是否有值'logged_in'，如果他们没有登录，他们会被重定向到登录页面。否则他们可以继续查看该页面。

“谢谢，请让我知道一个站点是否可以访问其他站点的 cookie 并从中读取信息并从中理解 – Vinayjava 1 小时前”

是的，一个网站能够从另一个网站获取信息，这被称为跨站请求伪造，最常通过 XSS 注入等方式执行，它可用于窃取用户 cookie。

有关 cookie 的任何其他问题，请向我发送消息，我应该能够提供帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T10:36:25.267

我认为“**设置 cookie** ”部分会对您有很大帮助。

[http://en.wikipedia.org/wiki/HTTP_cookie](http://en.wikipedia.org/wiki/HTTP_cookie)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T10:38:18.630

1.  网站创建 cookie，无论是前端（Javascript cookie）还是后端（PHP cookie）
2.  网站开发人员控制存储在 cookie 中的内容。
3.  网站开发人员从表单中获取信息，对其进行处理，然后将其存储在 cookie 中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-30T10:38:29.460

COOKIES 由网站所有者创建。cookie 实际上是客户端会话。

# mysql - MySQL Fieldtype for long numbers

> ID：15717527
> 
> 赞同：0
> 
> 时间：2013-03-30T10:34:13.613
> 
> 标签：mysql, sqldatatypes

If I set a field in MySQL table as `INT` so the number I store in it would remove all zero's.
For example, if I have an Id like this 100007431431552 finally it would be saved as 17431431552.
The field options are `INT` with length 32\. So what's the problem?

Any suggestions? Thank you.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T10:39:17.513

`100007431431552` is too large for an `INT`.

If you were running in strict mode you'd get an error (`Data truncation: Out of range value for column 'id'`).

Unfortunately MySQL's default behaviour is to avoid any error messages and trying to do something else instead - at the cost of losing data without telling you (that's why `17431431552` stored in your example).

For this kind of values you need to use a `bigint`:

SQLFiddle: [http://sqlfiddle.com/#!2/19505/1](http://sqlfiddle.com/#!2/19505/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T10:41:59.097

The MySQL manual says the biggest value for an INT type are 2147483647 (signed) and 4294967295 (unsigned). The maximum values vor a BIGINT type are 9223372036854775807 (signed) and 18446744073709551615 (unsigned). So you should use a BIGINT column type.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T10:42:02.380

from [mysql.com](http://dev.mysql.com/doc/refman/5.0/en/integer-types.html)

```
Type    Storage Minimum Value   Maximum Value
    (Bytes) (Signed/Unsigned)   Signed/Unsigned)
TINYINT 1   -128    127
        0   255
SMALLINT    2   -32768  32767
        0   65535
MEDIUMINT   3   -8388608    8388607
        0   16777215
INT 4   -2147483648 2147483647
        0   4294967295
BIGINT  8   -9223372036854775808    9223372036854775807
        0   18446744073709551615 
```

you can not stroe so large number with `INT TYPE`.

# php - 无法在任何浏览器中设置cookie

> ID：15717531
> 
> 赞同：3
> 
> 时间：2013-03-30T10:34:19.247
> 
> 标签：php, setcookie

所以我已经阅读了很多关于设置 cookie 的内容，但仍然找不到我在这里做错了什么。我从一个`if`包含另一个脚本的声明开始，但很快就发现 cookie 没有设置，所以我简化了它，让它只是为了回显，这样我就可以看到它是否正在设置。它不是。我将它包括在`<html>`.

我正在设置 cookie，然后刷新，无论我刷新多少次，它仍然会在命令中返回`NULL`结果。`echo`

*   最`setcookie`重要的是我的html，任何输出后都无法设置cookies？？
*   该值已设置，并且域。
*   所有浏览器都启用了 cookie，朋友们已经为我测试过，所以它不是本地的。
*   它不是服务器，我问我的主人。
*   我什至从[PHP 手册](http://php.net/manual/en/function.setcookie.php)中复制/粘贴代码无济于事。
*   当然检查了几百万次。

    ```
    $var='Something';
    setcookie ("Name", "$var", time()+3600, '/', 'website.com');
    echo $_COOKIE["Name"];
    var_dump($_COOKIE["Name"]);
    var_dump ($HTTP_COOKIE_VARS); 
    ```

`echo`返回`NULL`和`var_dump`返回`Array(0)`

我快疯了，我的代码有问题吗，我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T10:55:26.080

The most frequent problem with setting cookies (or any other header) is, that it has to be set before you send first output character. There may be an invisible character before your script (like BOM or whitespace). If you use includes, thare may be a whitespace after the closing tag of your included script.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T10:41:21.440

要调试 cookie，必须调试 HTTP 标头。
所以，给自己一个 Firebug，切换到 Net 选项卡并观察请求和响应标头，如果您可以看到服务器发送或浏览器返回的任何 cookie。

如果没有 cookie 的痕迹 - 那么服务器端就会出现一些错误。您需要启用错误报告和显示才能看到它们

```
ini_set('display_errors',1);
error_reporting(E_ALL); 
```

是一种快速而肮脏的方式

# sql - 访问查询匹配最低未使用数

> ID：15717534
> 
> 赞同：1
> 
> 时间：2013-03-30T10:34:46.607
> 
> 标签：sql, ms-access, vba

我在 MSAccess 中得到了查询结果。

```
QueryMatch :
InvoiceNumber   RegionNumber  Group
9448180         73657         A
9448180         74170         A
9448180         74171         A
9448180         78761         A
9448196         73657         A
9448196         74170         A
9448196         74171         A
9448196         78761         A
9448201         73657         A
9448201         74170         A
9448201         74171         A
9448201         78761         A

1234567         12345         B
so on..

Table 2:
RegionNumber  InvoiceNumber
73657
74170
74171
78761 
```

查询有一个很长的列表，按组分隔。x InvoiceNumbers 可以有 x + n RegionNumber。n = 0 到 25。 **一个 RegionNumber 必须与每个组的一个 InvoiceNumber 匹配。** 我们如何更新 Table2？

让我们为最小的 RegionNumber 匹配 Matchresult 中的最小 InvoiceNumber。

将最后一个 RegionNumber 保留为 NULL。

请提供一个 VBA 或者这可以单独使用查询来完成吗？为每个 RegionNumber 选择 MIN (InvoiceNumber) 将产生相同的 InvoiceNumber。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T12:56:51.273

让我们考虑以下 [QueryMatch] 示例数据

```
InvoiceNumber   RegionNumber    Group
123             678             A
234             678             A
345             678             A
123             789             A 
```

我们*可以*尝试仅遍历 RegionNumber 值（升序）并选择最低的 InvoiceNumber，但这种方法最终会失败。我们将 InvoiceNumber 123 分配给 RegionNumber 678，然后当需要处理 RegionNumber 789 时，唯一可能的选择是 InvoiceNumber 123，并且它已经被采用。

因此，我们最好从获取 RegionNumber 值的列表以及每个具有的不同 InvoiceNumber 的数量开始。这将使我们首先处理最受约束的 RegionNumber 值。

```
SELECT qm.RegionNumber, Count(qm.InvoiceNumber) AS NumDistinctInvoiceNumbers
FROM 
    (
        SELECT DISTINCT RegionNumber, InvoiceNumber FROM QueryMatch
    ) qm
GROUP BY qm.RegionNumber
ORDER BY 2 ASC 
```

...返回...

```
RegionNumber    NumDistinctInvoiceNumbers
789             1
678             3 
```

...让我们知道我们需要先处理 RegionNumber 789，然后将其中一个“剩余”分配给 RegionNumber 678。

Now, to find the lowest *unused* InvoiceNumber for a given RegionNumber we need to exclude any ones that we have already written to [Table 2]. So, assuming that we have already "given" InvoiceNumber 123 to RegionNumber 789, one way to find a suitable candidate for RegionNumber 678 would be...

```
DMin("InvoiceNumber", "QueryMatch", "RegionNumber=678 AND InvoiceNumber NOT IN (Select InvoiceNumber FROM [Table 2])") 
```

...which will return the smallest unused InvoiceNumber, or `Null` if not match is found.

Wrap that up in some VBA code and we get

```
Public Sub AssignInvoicesToRegions()
Dim cdb As DAO.Database, rstRegion As DAO.Recordset, rst2 As DAO.Recordset
Dim vInvNo As Variant

Set cdb = CurrentDb
Set rst2 = cdb.OpenRecordset("Table 2", dbOpenDynaset)

Set rstRegion = cdb.OpenRecordset( _
        "SELECT qm.RegionNumber, Count(qm.InvoiceNumber) AS NumDistinctInvoiceNumbers " & _
            "FROM " & _
                "( " & _
                    "SELECT DISTINCT RegionNumber, InvoiceNumber FROM QueryMatch " & _
                ") qm " & _
            "GROUP BY qm.RegionNumber " & _
            "ORDER BY 2 ASC", _
            dbOpenSnapshot)
Do While Not rstRegion.EOF
    Debug.Print rstRegion!RegionNumber
    vInvNo = DMin("InvoiceNumber", "QueryMatch", "RegionNumber=" & rstRegion!RegionNumber & " " & _
                "AND InvoiceNumber NOT IN (Select Nz(InvoiceNumber, 0) AS InvNo FROM [Table 2])")
    If IsNull(vInvNo) Then
        MsgBox "No available InvoiceNumber for RegionNumber=" & rstRegion!RegionNumber, _
                vbCritical, "Lookup Failed"
    Else
        rst2.FindFirst "RegionNumber=" & rstRegion!RegionNumber
        rst2.Edit
        rst2!InvoiceNumber = vInvNo
        rst2.Update
    End If

    rstRegion.MoveNext
Loop
Debug.Print "Done."
rstRegion.Close
Set rstRegion = Nothing
rst2.Close
Set rst2 = Nothing
Set cdb = Nothing
End Sub 
```

Note that in its current form this algorithm is not *guaranteed* to find a match for every RegionNumber. Depending on the order in which the RegionNumber values are processed some regions may find that all of their candidates have been taken (hence the `IsNull()` check in the code). In that case you may have to tweak the algorithm to give those regions "first shot" at an InvoiceNumber, possibly by manually assigning a higher priority to those "difficult" regions.

# c# - 调用其他类函数

> ID：15717536
> 
> 赞同：0
> 
> 时间：2013-03-30T10:34:59.783
> 
> 标签：c#, class, function, static

我有一个`grid`班级和一个`MainWindow`班级。Grid的类函数需要调用MainWindow的函数：

```
 // function from grid class:
    public Point functionFromGridClass()
    {
        Point variable = MainWindow.functionFromMainWindowClass(0, 0);
        // ...
    }
    // function from MainWindow class:
    public static Point functionFromMainWindowClass(int x, int y)
    {
        Vector2 mouse;
        mouse.X = x;
        mouse.Y = y + (ClientRectangle.Height - glview.Size.Height);
        // ...
    } 
```

如果我删除`static`关键字 in `functionFromMainWindowClass`，那么我不能从网格类中调用它。如果不删除`static`关键字，则无法使用 MainWindow 的类变量`ClientRectangle`，并且`glview`会收到警告`"An object reference is required for the non-static field, method, or property"`。我从来没有遇到过这个问题，应该怎么解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T10:37:37.390

> 我收到警告“非静态字段、方法或属性需要对象引用”

警告告诉您该怎么做：您需要一个实例才能调用实例方法。

因此，您可以从方法中删除 static 关键字，然后在 Grid 类中创建一个实例`MainWindow`以便能够调用该方法：

```
var mainWindow = new MainWindow();
var result = mainWindow.functionFromMainWindowClass(5, 6); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T10:52:35.433

网格类必须持有 MainWindow 实例的引用，并且可能在构造时提供给网格。

```
public class GridClass
{
  private MainWindow window;
  public GridClass( MainWindow Window)
  {
     window = Window;
  }
  public Point functionFromGridClass()
  {
     Point variable = window.functionFromMainWindowClass(0, 0);
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T10:43:08.553

在不确切知道发生了什么的情况下很难给出具体的建议，但总体情况是，您需要以某种方式获取`MainWindow`要调用该方法的类的实例，或者通过将其传递给`Grid`构造函数或类似方法，或者通过从某个资源管理器那里获取它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-30T10:47:00.213

静态方法是通过引用类名来调用的。像这样调用你的主窗口类函数：

```
public Point functionFromGridClass()
{
     MainWindowClass.functionFromMainWindowClass(val1, val2);

} 
```

# android - 如何从Android应用程序中注销Facebook

> ID：15717538
> 
> 赞同：0
> 
> 时间：2013-03-30T10:35:15.010
> 
> 标签：android, facebook, logout

我正在按照[本](http://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/)教程集成 Facebook SDK for Android。它完美地工作。我的问题是，如果我想退出 Facebook 怎么办（比如关闭会话）。如何在同一个按钮上登录和注销。

```
 button1=(Button)findViewById(R.id.button1);
button1.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View arg0) {
        // TODO Auto-generated method stub
        Intent i=new Intent(this,MainActivity.class);
                     startActivity(i);
    }
}); 
```

以下是我的代码：

```
public class MainActivity extends Activity {

 private Button button1;

   @Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);

Session.openActiveSession(this, true, new StatusCallback() {

    @Override
    public void call(Session session, SessionState state, Exception exception) {
        // TODO Auto-generated method stub
        Request.executeMeRequestAsync(session,new Request.GraphUserCallback() {

            @Override
            public void onCompleted(GraphUser user, Response response) {
                // TODO Auto-generated method stub
                if(user!=null){
                    TextView tv1=(TextView)findViewById(R.id.textview1);
                    tv1.setText("Hello "+user.getName()+ ";");
                }
            }
        });
    }
});

}

 @Override
  protected void onActivityResult(int requestCode, int resultCode, Intent data) {
// TODO Auto-generated method stub
super.onActivityResult(requestCode, resultCode, data);
Session.getActiveSession().onActivityResult(this, requestCode, resultCode, data);

    }

     } 
```

我想登录和注销`buttonClick`。任何人都可以帮忙吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T09:26:21.137

调用此方法。您将从会话中注销

```
 session.closeAndClearTokenInformation(); 
```

# c - Why does optimization cause my loop to run indefinitely with an int iterator and stop condition at 2.7 billion?

> ID：15717541
> 
> 赞同：1
> 
> 时间：2013-03-30T10:35:55.123
> 
> 标签：c, optimization, infinite-loop

This code I was benchmarking and noticed it would not stop running when optimizations were turned on, im using Code Blocks with MinGW 4.7.0.

If I change the iterator to `unsigned i;` the loop will end with optimizations on. Otherwise I need to turn off optimizations to use the `int i;` declaration.

```
int main(void)
{
    int i;
    int a, b;
    a = 5; b = 24;
    for(i = 0; i < 2700000000; i++)
        asm_swap(&a, &b);
    return 0;
} 
```

There is also a `warning: this decimal constant is unsigned only in ISO C90 [enabled by default]` apparently referring to the 2.7 billion constant. I do not think this would change anything as either `int` or `unsigned` can carry this value, which is part of why I am so confused here. I have no explanation.

What is the issue with having the `int` type and optimizations enabled?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T10:39:10.270

On your platform, `int` is 32 bits wide.

The largest signed 32-bit integer is 2,147,483,647\. The largest unsigned 32-bit integer is 4,294,967,295.

Thus 2,700,000,000 would fit in an `unsigned int`, but would not fit in an `int`.

This means that when you use `unsigned int`, your program is well-defined. However, when you use `int`, the behaviour of your program is [undefined](http://en.wikipedia.org/wiki/Undefined_behavior).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T10:40:40.317

If your platform is 32-bit your `int` will overflow and you will end up in *undefined behavior* land where anything might happen, including going on forever.

# android - Fragment Tab 项目上的 Google Maps v2 MapFragment 在 android 2.3 上失败

> ID：15717542
> 
> 赞同：2
> 
> 时间：2013-03-30T10:35:56.190
> 
> 标签：android, google-maps, android-fragments, google-maps-android-api-2, android-tabs

嗨，我有一个片段选项卡项目。当我转到地图选项卡（自定义 MapFragment）时，它可以正常工作，但是当我更改到另一个选项卡时，新片段仅出现在谷歌地图的缩放控件中。当我返回地图选项卡时，一切正常。只有当我进入地图选项卡时才会发生这种情况，如果我从不使用地图选项卡，其他片段可以正常工作。

我附上我的问题的一些截图

![地图选项卡](../Images/bd3ceeda4ad7998663090aa1e879a95b.png)

![更改为另一个选项卡](../Images/afd9a7ec5ff8391ed62a3deba2c39021.png)

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-02T08:14:18.590

我的问题仅适用于 android 2 和不支持 opengl 2.0 的设备。我已经添加

```
<uses-feature
        android:glEsVersion="0x00020000"
        android:required="true"/> 
```

清单文件

# r - Set the intervals of x-axis using r

> ID：15717545
> 
> 赞同：23
> 
> 时间：2013-03-30T10:36:26.120
> 
> 标签：r, plot

I plot a distribution of visit time of a scenic spot from 0 to 23 hours in a day. And I want to **adjust the intervals of x-axis** letting all hours be displayed. How can I do that?

```
d = c(42,13,10,3,2,6,7,15,38,63,128,153,178,181,236,217,272,417,526,653,607,385,191,70)
plot(seq(0,23,by=1),c,type='b',col='red',main="Confucius Temple",xlab="Hours",ylab="Numbers of check-in") 
```

![enter image description here](../Images/0cc4b970c71864eb0f8b564fb07d1f4e.png)

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-30T10:40:40.350

You can use `axis`:

```
> axis(side=1, at=c(0:23)) 
```

That is, something like this:

```
plot(0:23, d, type='b', axes=FALSE)
axis(side=1, at=c(0:23))
axis(side=2, at=seq(0, 600, by=100))
box() 
```

# php - Css style sheet partly loading

> ID：15717549
> 
> 赞同：2
> 
> 时间：2013-03-30T10:36:33.640
> 
> 标签：php, css, load

My file structure is as follows....

> iamdan > css > style.css

My php file, `head.php` is in a file called `includes` which is in:

> iamdan > includes > head.php

which contains the following code:

```
<head>
<title>Website title!!!</title>
<meta charset="UTF"-8">
<link rel="stylesheet" href="css/style.css" type="text/css">
</head> 
```

Now it's loading the info fine and some of the style sheet (just the font style) none of the other styling is coming through...

Any ideas?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T10:41:40.813

You have a mistake in your meta charset:

```
<meta charset="UTF-8"> 
```

And the other thing is:

```
<link rel="stylesheet" href="css/style.css" type="text/css"> 
```

This is relative from your script position. When you are in a subfolder. The path is wrong.

```
<link rel="stylesheet" href="/css/style.css" type="text/css"> 
```

Put a `/` before your path. Then your browser load the css file always from the root:

```
xx.de/css/style.css 
```

Or put the complete URL before your script.

```
<link rel="stylesheet" href="http://xx.xx.de/css/style.css" type="text/css"> 
```

# amazon-web-services - 创建 s3 并将其连接到 ec2 实例

> ID：15717550
> 
> 赞同：4
> 
> 时间：2013-03-30T10:36:39.773
> 
> 标签：amazon-web-services, amazon-s3

我想创建一个 s3 存储桶，然后使用 ec2 实例附加/挂载它。我为ebs做了同样的事情。

对于 ebs 有一些命令可以创建一个 ebs 命令是
`ec2-create-volume --size 80 --availability-zone us-east-1a`

要将其附加到 ec2，命令是

```
ec2-attach-volume volume_id -i instance_id -d device 
```

同样有一个命令可以使 ebs 可供使用

现在我想对 s3 做同样的事情。

但是我找不到像 ebs 可用的命令这样的命令。

有人可以告诉我这些命令吗？或者告诉我一些其他的方法来做到这一点。我不想通过网站上的点击来做到这一点。

其实我想要一个java程序来做这一切。所以如果我知道命令，我可以简单地从 java 代码中调用这些命令。如果已经有可用的 java 代码，那么这对我也有用

希望任何人都可以帮助我！

PS我对这个东西很陌生，所以详细的解释对我很有帮助！谢谢你们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T14:06:19.690

S3 存储桶不是 EBS 卷等随机访问设备。它们不能“附加”到实例或用作磁盘卷。它们是只能通过 S3 API 访问的 blob 存储服务。您的 EC2 实例（或您自己的 PC 或任何其他设备）可以访问您的存储桶，只要它使用 API（以任何语言）并且拥有 AWS 凭证并有权这样做。

# .htaccess - 喜欢使用 htaccess 修改 seo 的 url 参数

> ID：15717558
> 
> 赞同：1
> 
> 时间：2013-03-30T10:37:12.427
> 
> 标签：.htaccess, url

我想为我的原始 PHP 项目的 SEO 编码一个 URL。我有一个 URL，例如：`http://dealsinbd.com/bn/member/register/`，我需要为我的项目修改它。

在 URL 中可以看到： 1) `bn`, 2) `member`, 3)`register`参数存在。

现在我想用 获取`bn`我的 PHP 文件中的值`$_REQUEST['controller']`，`member`值应该被访问，`$_REQUEST['param1']`值`register`应该被访问`$_REQUEST['param2']`，依此类推......

请提出解决方案或`htaccess`脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T10:41:28.593

我使用像这样的重写

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule> 
```

将所有请求转发到 index.php

index.php 然后解析原始 URL 以检测它需要的所有设置和参数，然后调用控制器。

# java - 使用 SDK 1.7.6 部署时出现 App Engine 500 错误

> ID：15717564
> 
> 赞同：1
> 
> 时间：2013-03-30T10:37:59.257
> 
> 标签：java, google-app-engine, maven, deployment

将 appengine-maven-plugin 从 1.7.5 升级到 1.7.6 后，尝试部署我的应用程序现在始终失败

```
$ mvn appengine:update
Beginning server interaction for myapp...
5% Using java7 runtime: false
25% Initiating update.

com.google.appengine.tools.admin.HttpIoException: Error posting to URL: https://appengine.google.com/api/appversion/create?app_id=myapp&version=1.7.6&
500 Internal Server Error 
```

如果我恢复到 1.7.5，它会再次工作，因此可能是 1.7.6 Maven 插件或 SDK 的问题。我已经尝试过启用和禁用 java7，但没有任何区别。

更新：使用 appcfg.sh 进行部署工作正常，因此它必须与 Maven 插件有关。

更新 #2：使用 mvn -X 运行显示以下插件依赖项：

```
[INFO] --- appengine-maven-plugin:1.7.6:update (default-cli) @ myapp ---
[DEBUG] com.google.appengine:appengine-maven-plugin:jar:1.7.6:
...
[DEBUG]    com.google.guava:guava:jar:14.0.1:compile
[DEBUG]    com.google.appengine:appengine-tools-sdk:jar:1.7.6:compile 
```

# java - DefaultHttpClient - 避免多次尝试执行请求

> ID：15717565
> 
> 赞同：3
> 
> 时间：2013-03-30T10:38:00.880
> 
> 标签：java, apache, http

这是我用来向 Web 服务发送发布请求的代码：

```
 HttpParams httpParameters = new BasicHttpParams();
    HttpConnectionParams.setConnectionTimeout(httpParameters,15000);
    HttpConnectionParams.setSoTimeout(httpParameters, 15000);

    DefaultHttpClient client = new DefaultHttpClient();

    client.getCredentialsProvider().setCredentials(
            new AuthScope(AuthScope.ANY_HOST, AuthScope.ANY_PORT, AuthScope.ANY_REALM, AuthPolicy.BASIC),
            new UsernamePasswordCredentials(getUsernamePassword()));
   //getUserNamePassword is helper method i have defined 

    ResponseHandler<String> responseHandler = new BasicResponseHandler();
    try{
        String httpResponse = client.execute(request,responseHandler);
        return httpResponse; 
    }

    catch(Exception e){
        //handle        
    }

    finally{
        client.getConnectionManager().shutdown();
    } 
```

这是http日志：

```
DEBUG 2013-03-28 16:22:00,627 org.apache.http.impl.conn.BasicClientConnectionManager - Get connection for route {}->http://jboss-stage.framework.abc.com
DEBUG 2013-03-28 16:22:00,658 org.apache.http.impl.conn.DefaultClientConnectionOperator - Connecting to jboss-stage.framework.abc.com:80
DEBUG 2013-03-28 16:22:01,157 org.apache.http.client.protocol.RequestAddCookies - CookieSpec selected: best-match
DEBUG 2013-03-28 16:22:01,173 org.apache.http.client.protocol.RequestAuthCache - Auth cache not set in the context
DEBUG 2013-03-28 16:22:01,173 org.apache.http.client.protocol.RequestTargetAuthentication - Target auth state: UNCHALLENGED
DEBUG 2013-03-28 16:22:01,173 org.apache.http.client.protocol.RequestProxyAuthentication - Proxy auth state: UNCHALLENGED

DEBUG 2013-03-28 16:22:01,173 org.apache.http.impl.client.DefaultHttpClient - Attempt 1 to execute request
DEBUG 2013-03-28 16:22:01,173 org.apache.http.impl.conn.DefaultClientConnection - Sending request: POST /Contactus/contactus/ HTTP/1.1
DEBUG 2013-03-28 16:22:01,173 org.apache.http.wire - >> "POST /Contactus/contactus/ HTTP/1.1[\r][\n]"
DEBUG 2013-03-28 16:22:01,173 org.apache.http.wire - >> "Debug: True[\r][\n]"
DEBUG 2013-03-28 16:22:01,173 org.apache.http.wire - >> "SiteId: 111[\r][\n]"
DEBUG 2013-03-28 16:22:01,173 org.apache.http.wire - >> "Content-Type: application/x-www-form-urlencoded[\r][\n]"
DEBUG 2013-03-28 16:22:01,173 org.apache.http.wire - >> "Content-Length: 692[\r][\n]"
DEBUG 2013-03-28 16:22:01,173 org.apache.http.wire - >> "Host: jboss-stage.framework.abc.com[\r][\n]"
DEBUG 2013-03-28 16:22:01,173 org.apache.http.wire - >> "Connection: Keep-Alive[\r][\n]"
DEBUG 2013-03-28 16:22:01,173 org.apache.http.wire - >> "User-Agent: Apache-HttpClient/4.2.3 (java 1.5)[\r][\n]"
DEBUG 2013-03-28 16:22:01,173 org.apache.http.wire - >> "[\r][\n]"
DEBUG 2013-03-28 16:22:01,173 org.apache.http.headers - >> POST /Contactus/contactus/ HTTP/1.1
DEBUG 2013-03-28 16:22:01,173 org.apache.http.headers - >> Debug: True
DEBUG 2013-03-28 16:22:01,173 org.apache.http.headers - >> SiteId: 111
DEBUG 2013-03-28 16:22:01,173 org.apache.http.headers - >> Content-Type: application/x-www-form-urlencoded
DEBUG 2013-03-28 16:22:01,173 org.apache.http.headers - >> Content-Length: 692
DEBUG 2013-03-28 16:22:01,173 org.apache.http.headers - >> Host: jboss-stage.framework.abc.com
DEBUG 2013-03-28 16:22:01,173 org.apache.http.headers - >> Connection: Keep-Alive
DEBUG 2013-03-28 16:22:01,173 org.apache.http.headers - >> User-Agent: Apache-HttpClient/4.2.3 (java 1.5)
DEBUG 2013-03-28 16:22:01,173 org.apache.http.wire - >> "ServiceReq={"ContactUs":{"ContactInfo":[{"FieldName":"gender","FieldValue":"F","IsEncrypted":false,"EncryptedValue":false}],"StatusCode":"New","Subject_id":"123"}}"
DEBUG 2013-03-28 16:22:02,327 org.apache.http.wire - << "HTTP/1.1 401 Unauthorized[\r][\n]"
DEBUG 2013-03-28 16:22:02,327 org.apache.http.wire - << "Server: Apache-Coyote/1.1[\r][\n]"
DEBUG 2013-03-28 16:22:02,327 org.apache.http.wire - << "X-Powered-By: Servlet 2.4; JBoss-4.2.3.GA (build: SVNTag=JBoss_4_2_3_GA date=200807181417)/JBossWeb-2.0[\r][\n]"
DEBUG 2013-03-28 16:22:02,327 org.apache.http.wire - << "Date: Thu, 28 Mar 2013 10:52:08 GMT[\r][\n]"
DEBUG 2013-03-28 16:22:02,327 org.apache.http.wire - << "WWW-Authenticate: Basic realm="Contactus"[\r][\n]"
DEBUG 2013-03-28 16:22:02,327 org.apache.http.wire - << "Accept-Ranges: bytes[\r][\n]"
DEBUG 2013-03-28 16:22:02,327 org.apache.http.wire - << "Server: Noelios-Restlet-Engine/1.1.5[\r][\n]"
DEBUG 2013-03-28 16:22:02,327 org.apache.http.wire - << "Content-Type: text/html;charset=ISO-8859-1[\r][\n]"
DEBUG 2013-03-28 16:22:02,327 org.apache.http.wire - << "Content-Length: 312[\r][\n]"
DEBUG 2013-03-28 16:22:02,327 org.apache.http.wire - << "[\r][\n]"
DEBUG 2013-03-28 16:22:02,327 org.apache.http.impl.conn.DefaultClientConnection - Receiving response: HTTP/1.1 401 Unauthorized
DEBUG 2013-03-28 16:22:02,327 org.apache.http.headers - << HTTP/1.1 401 Unauthorized
DEBUG 2013-03-28 16:22:02,327 org.apache.http.headers - << Server: Apache-Coyote/1.1
DEBUG 2013-03-28 16:22:02,327 org.apache.http.headers - << X-Powered-By: Servlet 2.4; JBoss-4.2.3.GA (build: SVNTag=JBoss_4_2_3_GA date=200807181417)/JBossWeb-2.0
DEBUG 2013-03-28 16:22:02,327 org.apache.http.headers - << Date: Thu, 28 Mar 2013 10:52:08 GMT
DEBUG 2013-03-28 16:22:02,327 org.apache.http.headers - << WWW-Authenticate: Basic realm="Contactus"
DEBUG 2013-03-28 16:22:02,327 org.apache.http.headers - << Accept-Ranges: bytes
DEBUG 2013-03-28 16:22:02,327 org.apache.http.headers - << Server: Noelios-Restlet-Engine/1.1.5
DEBUG 2013-03-28 16:22:02,327 org.apache.http.headers - << Content-Type: text/html;charset=ISO-8859-1
DEBUG 2013-03-28 16:22:02,327 org.apache.http.headers - << Content-Length: 312
DEBUG 2013-03-28 16:22:02,343 org.apache.http.impl.client.DefaultHttpClient - Connection can be kept alive indefinitely
DEBUG 2013-03-28 16:22:02,343 org.apache.http.impl.client.DefaultHttpClient - Authentication required
DEBUG 2013-03-28 16:22:02,343 org.apache.http.impl.client.DefaultHttpClient - jboss-stage.framework.abc.com:80 requested authentication
DEBUG 2013-03-28 16:22:02,343 org.apache.http.impl.client.TargetAuthenticationStrategy - Authentication schemes in the order of preference: [negotiate, Kerberos, NTLM, Digest, Basic]
DEBUG 2013-03-28 16:22:02,343 org.apache.http.impl.client.TargetAuthenticationStrategy - Challenge for negotiate authentication scheme not available
DEBUG 2013-03-28 16:22:02,343 org.apache.http.impl.client.TargetAuthenticationStrategy - Challenge for Kerberos authentication scheme not available
DEBUG 2013-03-28 16:22:02,343 org.apache.http.impl.client.TargetAuthenticationStrategy - Challenge for NTLM authentication scheme not available
DEBUG 2013-03-28 16:22:02,343 org.apache.http.impl.client.TargetAuthenticationStrategy - Challenge for Digest authentication scheme not available
DEBUG 2013-03-28 16:22:02,343 org.apache.http.impl.client.DefaultHttpClient - Selected authentication options: [BASIC]
DEBUG 2013-03-28 16:22:02,343 org.apache.http.wire - << "<html>[\n]"
DEBUG 2013-03-28 16:22:02,343 org.apache.http.wire - << "<head>[\n]"
DEBUG 2013-03-28 16:22:02,343 org.apache.http.wire - << "   <title>Status page</title>[\n]"
DEBUG 2013-03-28 16:22:02,343 org.apache.http.wire - << "</head>[\n]"
DEBUG 2013-03-28 16:22:02,343 org.apache.http.wire - << "<body>[\n]"
DEBUG 2013-03-28 16:22:02,343 org.apache.http.wire - << "<h3>The request requires user authentication</h3><p>You can get technical details <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.2">here</a>.<br>[\n]"
DEBUG 2013-03-28 16:22:02,343 org.apache.http.wire - << "Please continue your visit at our <a href="/">home page</a>.[\n]"
DEBUG 2013-03-28 16:22:02,343 org.apache.http.wire - << "</p>[\n]"
DEBUG 2013-03-28 16:22:02,343 org.apache.http.wire - << "</body>[\n]"
DEBUG 2013-03-28 16:22:02,343 org.apache.http.wire - << "</html>[\n]"
DEBUG 2013-03-28 16:22:02,343 org.apache.http.client.protocol.RequestAddCookies - CookieSpec selected: best-match
DEBUG 2013-03-28 16:22:02,343 org.apache.http.client.protocol.RequestAuthCache - Auth cache not set in the context
DEBUG 2013-03-28 16:22:02,343 org.apache.http.client.protocol.RequestTargetAuthentication - Target auth state: CHALLENGED
DEBUG 2013-03-28 16:22:02,343 org.apache.http.client.protocol.RequestTargetAuthentication - Generating response to an authentication challenge using basic scheme
DEBUG 2013-03-28 16:22:02,359 org.apache.http.client.protocol.RequestProxyAuthentication - Proxy auth state: UNCHALLENGED

DEBUG 2013-03-28 16:22:02,359 org.apache.http.impl.client.DefaultHttpClient - Attempt 2 to execute request
DEBUG 2013-03-28 16:22:02,359 org.apache.http.impl.conn.DefaultClientConnection - Sending request: POST /Contactus/contactus/ HTTP/1.1
DEBUG 2013-03-28 16:22:02,359 org.apache.http.wire - >> "POST /Contactus/contactus/ HTTP/1.1[\r][\n]"
DEBUG 2013-03-28 16:22:02,359 org.apache.http.wire - >> "Debug: True[\r][\n]"
DEBUG 2013-03-28 16:22:02,359 org.apache.http.wire - >> "SiteId: 111[\r][\n]"
DEBUG 2013-03-28 16:22:02,359 org.apache.http.wire - >> "Content-Type: application/x-www-form-urlencoded[\r][\n]"
DEBUG 2013-03-28 16:22:02,359 org.apache.http.wire - >> "Content-Length: 692[\r][\n]"
DEBUG 2013-03-28 16:22:02,359 org.apache.http.wire - >> "Host: jboss-stage.framework.abc.com[\r][\n]"
DEBUG 2013-03-28 16:22:02,359 org.apache.http.wire - >> "Connection: Keep-Alive[\r][\n]"
DEBUG 2013-03-28 16:22:02,359 org.apache.http.wire - >> "User-Agent: Apache-HttpClient/4.2.3 (java 1.5)[\r][\n]"
DEBUG 2013-03-28 16:22:02,359 org.apache.http.wire - >> "Authorization: Basic ********************[\r][\n]"
DEBUG 2013-03-28 16:22:02,359 org.apache.http.wire - >> "[\r][\n]"
DEBUG 2013-03-28 16:22:02,359 org.apache.http.headers - >> POST /Contactus/contactus/ HTTP/1.1
DEBUG 2013-03-28 16:22:02,359 org.apache.http.headers - >> Debug: True
DEBUG 2013-03-28 16:22:02,359 org.apache.http.headers - >> SiteId: 111
DEBUG 2013-03-28 16:22:02,359 org.apache.http.headers - >> Content-Type: application/x-www-form-urlencoded
DEBUG 2013-03-28 16:22:02,359 org.apache.http.headers - >> Content-Length: 692
DEBUG 2013-03-28 16:22:02,359 org.apache.http.headers - >> Host: jboss-stage.framework.abc.com
DEBUG 2013-03-28 16:22:02,359 org.apache.http.headers - >> Connection: Keep-Alive
DEBUG 2013-03-28 16:22:02,359 org.apache.http.headers - >> User-Agent: Apache-HttpClient/4.2.3 (java 1.5)
DEBUG 2013-03-28 16:22:02,359 org.apache.http.headers - >> Authorization: Basic ****************
DEBUG 2013-03-28 16:22:02,359 org.apache.http.wire - >> "ServiceReq={"ContactUs":{"ContactInfo":[{"FieldName":"gender","FieldValue":"F","IsEncrypted":false,"EncryptedValue":false}],"StatusCode":"New","Subject_id":"123"}}"
DEBUG 2013-03-28 16:22:03,342 org.apache.http.wire - << "HTTP/1.1 201 Created[\r][\n]"
DEBUG 2013-03-28 16:22:03,342 org.apache.http.wire - << "Server: Apache-Coyote/1.1[\r][\n]"
DEBUG 2013-03-28 16:22:03,342 org.apache.http.wire - << "X-Powered-By: Servlet 2.4; JBoss-4.2.3.GA (build: SVNTag=JBoss_4_2_3_GA date=200807181417)/JBossWeb-2.0[\r][\n]"
DEBUG 2013-03-28 16:22:03,342 org.apache.http.wire - << "Date: Thu, 28 Mar 2013 10:52:10 GMT[\r][\n]"
DEBUG 2013-03-28 16:22:03,342 org.apache.http.wire - << "Accept-Ranges: bytes[\r][\n]"
DEBUG 2013-03-28 16:22:03,342 org.apache.http.wire - << "Server: Noelios-Restlet-Engine/1.1.5[\r][\n]"
DEBUG 2013-03-28 16:22:03,342 org.apache.http.wire - << "Content-Type: application/json;charset=UTF-8[\r][\n]"
DEBUG 2013-03-28 16:22:03,342 org.apache.http.wire - << "Content-Length: 114[\r][\n]"
DEBUG 2013-03-28 16:22:03,342 org.apache.http.wire - << "[\r][\n]"
DEBUG 2013-03-28 16:22:03,342 org.apache.http.impl.conn.DefaultClientConnection - Receiving response: HTTP/1.1 201 Created
DEBUG 2013-03-28 16:22:03,342 org.apache.http.headers - << HTTP/1.1 201 Created
DEBUG 2013-03-28 16:22:03,342 org.apache.http.headers - << Server: Apache-Coyote/1.1
DEBUG 2013-03-28 16:22:03,342 org.apache.http.headers - << X-Powered-By: Servlet 2.4; JBoss-4.2.3.GA (build: SVNTag=JBoss_4_2_3_GA date=200807181417)/JBossWeb-2.0
DEBUG 2013-03-28 16:22:03,342 org.apache.http.headers - << Date: Thu, 28 Mar 2013 10:52:10 GMT
DEBUG 2013-03-28 16:22:03,342 org.apache.http.headers - << Accept-Ranges: bytes
DEBUG 2013-03-28 16:22:03,342 org.apache.http.headers - << Server: Noelios-Restlet-Engine/1.1.5
DEBUG 2013-03-28 16:22:03,342 org.apache.http.headers - << Content-Type: application/json;charset=UTF-8
DEBUG 2013-03-28 16:22:03,342 org.apache.http.headers - << Content-Length: 114
DEBUG 2013-03-28 16:22:03,342 org.apache.http.impl.client.DefaultHttpClient - Connection can be kept alive indefinitely
DEBUG 2013-03-28 16:22:03,342 org.apache.http.impl.client.DefaultHttpClient - Authentication succeeded
DEBUG 2013-03-28 16:22:03,342 org.apache.http.impl.client.TargetAuthenticationStrategy - Caching 'basic' auth scheme for http://jboss-stage.framework.abc.com:80
DEBUG 2013-03-28 16:22:03,342 org.apache.http.wire - << "{"StatusCode":"00","contactusId":2025958,"Message":"Success","AutoResponse":"Text","AutoResponseText":"Thank you"}"
DEBUG 2013-03-28 16:22:03,342 org.apache.http.impl.conn.BasicClientConnectionManager - Releasing connection org.apache.http.impl.conn.ManagedClientConnectionImpl@1798928
DEBUG 2013-03-28 16:22:03,342 org.apache.http.impl.conn.BasicClientConnectionManager - Connection can be kept alive indefinitely 
```

在尝试 1 中，我得到了响应`HTTP/1.1 401 Unauthorized`，而在尝试 2 中，授权成功并且我得到了成功响应`HTTP/1.1 201 Created`。我怎样才能避免不成功的尝试（1）？解决这个问题将极大地提高性能。谢谢！

**编辑**：好的，我查看了其他答案，似乎有两种方法可以实现：1.将抢先式身份验证设置为 true 2.在标头中设置身份验证

哪个是最好的方法？

# c# - 在 asp.net MVC 中使用 jQuery 和 AJAX 自动填充选择框

> ID：15717573
> 
> 赞同：1
> 
> 时间：2013-03-30T10:38:30.677
> 
> 标签：c#, jquery, ajax, asp.net-mvc-4, hierarchical-data

1-问题：我需要使用户能够从大量信息中选择一个或多个事物，这些信息被分组到一个层次结构中进行选择、数据输入，如果数据的深度可以是 4、5 个父类别。

我正在寻找的 2 个功能：类似于 eBay，在选择项目类别时显示级联列表。当页面显示时，您只会得到第一个列表框。在第一个中选择一个后，将显示第二个。该过程继续进行，直到所选类别没有子类别。

}![易趣示例](../Images/0b6997c5435cec682a74d7aa3b7912f1.png)

3-实际表和查询：表：

-int ID

-字符串名称

-int ParentId

询问：

```
public IList<CategoryTable> listcategories(int parentId)

            {
            var query = from c in categorytable
                        where c.ParentId == parentId
                        select c;

                var result= query.ToList();
                return result;
} 
```

4-我不知道如何开始，任何指南、现场示例 jsfiddle、演示或教程将不胜感激。brgds

更新：我相信这个功能在网络教程和问题中不是很发达。因此，我开始赏金以获得一个很好的答案。我将为先前评论的功能的实时示例分配赏金。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T11:23:15.530

我通过处理大量数据学到的是：

*   不要尝试一次将所有数据加载到客户端
*   仅加载客户端实际需要的数据
*   在数据库中进行过滤、搜索和排序，例如通过存储过程。特别是对于分布在多个表中的数据。
*   优化你的数据库查询，索引很好
*   始终牢记您期望有多少同时查询
*   linq 很好，但在处理大数据时并不适用
*   花时间思考和计划真正需要哪些数据

要在您的网页上显示数据，有许多 jQuery 插件可以列出数据，您可以在其中将函数绑定到“选定”事件。例如，MVC4 附带的 knockOut.js。您可能不需要完全加载的 jQuery“hierachical-data-list-display”-plugin。也许您可以通过使用“已选择”事件、ajax 加载和显示/隐藏功能来实现它。

根据您的评论，我会想到 jQuery 和 MVC 的组合：

*   在 MVC 中，我会创建一个像

    ```
    @model MvcApplication.Models.DataModel

    <ol id="@Model.DataCategorieLevel">

    @for (var i = 0; Model.Data.Count > i; i++)
    {
        <li value="@Model.Data[i].ItemId" onclick="itemSelected(@Model.Data[i].ItemId, @Model.DataCategoryLevel);" >@Model.Data[i].ItemName</li>
    }

    </ol> 
    ```

*   javascript可能是这样的：

```
 function itemSelected(selectedItemId, itemCategoryLevel) {
        // ajax call to an action which loads the next categorie items into the partial view and returns them
        // on success remove all lists with an category - level lower than itemCategoryLevel
        // append the returned List to the HTML-container which holds the lists
    } 
```

*   在被调用的 MVC-Action 中，我将确定它是否是最后一个类别级别。如果它是最后一级，我会返回一个不同的局部视图和其他 onclick 事件绑定

在我开始搜索一些插件之前，这就是我要尝试实现的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T13:26:05.457

我正在使用淘汰赛和 Webapi 为我目前正在开发的应用程序中的级联下拉菜单提供动力。

**查看** 我有一个基本的下拉列表，如下所示。

```
<select data-bind="options: CurrentList, 
                   optionsText: 'name',                                                        
                   value: CurrentListSelectedItem,
                   optionsCaption: 'Please Select...'"></select> 
```

**查看模型**

```
self.CurrentList = ko.observableArray(CurrentListData);
self.CurrentListSelectedItem = ko.observable();
self.CurrentListSelectedItem.subscribe(function () {
    //ajaxcall to populate list 2
}); 
```

服务器端我有一个简单的休息服务，它采用树中一个点的 Id 并返回其所有子级，这样您就可以根据需要将任意数量的下拉列表链接在一起（只要您的层次结构具有级别匹配。

使用模拟数据查看工作示例的小提琴[http://jsfiddle.net/tgriley1/vEBGS/](http://jsfiddle.net/tgriley1/vEBGS/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T15:54:49.287

我最近在使用级联下拉菜单时遇到了类似的问题，我做了类似的事情。

首先，在视图上编写一些 jquery，这样当您选择第一个项目时，它会向服务器发送一个 ajax 请求，并返回一个 JSON 或 xml 响应。

我做了类似的事情

```
<script>
$(function () {
        $("select#ParentId").change(function (evt) {

                $.ajax({
                    url: "/Home/GetChildItems",
                    type: 'Post',
                    data: { ParentId: $("select#ParentId").val() },
                    success: function (data) {
                        var items = "";
                        $.each(data, function (i, val) {
                            items += "<option value='" + val.ChildId + "'>" + val.ChildName + "</option>";
                        });
                        $("select#ChildDropDown").empty().html(items);
                    }
                });

        });
    });
</script> 
```

在控制器上，类似

```
Public JsonResult GetChildItems(int ParentId)
{
 //code to retrieve the data

  JsonResult result = new JsonResult();
                result.Data = **object that contains the child data**;
                return result;
} 
```

I'm a beginner myself, so I'm not sure how good this code is, but it worked for me when creating cascading drop-downs using jquery.

Hope it helps.

Link to the cascading drop down question : [Populating dropdown with JSON result - Cascading DropDown using MVC3, JQuery, Ajax, JSON](https://stackoverflow.com/questions/14339089/populating-dropdown-with-json-result-cascading-dropdown-using-mvc3-jquery-aj)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-06T12:40:07.170

嗨，我有同样的场景，我使用的是一个带有 Web API 的自动完成列表，在特定数量的字符之后，它调用 Web API 并加载特定通配符的数据。除此之外，当我发现返回的数据仍然很大时，我在 SQL Server 端添加了分页

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-08T16:58:47.333

The telerik demo is always a good place to learn MVC from

[http://demos.telerik.com/aspnet-mvc/razor/combobox/cascadingcombobox](http://demos.telerik.com/aspnet-mvc/razor/combobox/cascadingcombobox)

This does not exactly use listboxes as per your screenshots but it could very easily be changed to use them. With a few javascript modifications you could have unlimited levels.

Here is another one:

[http://weblogs.asp.net/raduenuca/archive/2011/04/03/asp-net-mvc-cascading-dropdown-lists-tutorial-part-5-1-cascading-using-jquery-ajax-ajax-and-dom-objects.aspx](http://weblogs.asp.net/raduenuca/archive/2011/04/03/asp-net-mvc-cascading-dropdown-lists-tutorial-part-5-1-cascading-using-jquery-ajax-ajax-and-dom-objects.aspx)

# php - 使用php进行登录验证

> ID：15717574
> 
> 赞同：2
> 
> 时间：2013-03-30T10:38:31.487
> 
> 标签：php, mysql

我正在使用 PHP 和 MySQL 创建一个简单的用户登录页面，其中只包含两个选项，用户名和密码....这是代码：

```
<form id="form1" name="form1" method="post" action="verify_user.php">
    <p align="center">Username :
        <input type="text" name="name" id="name" />
    </p>
    <p align="center">Password :
        <input type="password" name="pass" id="pass" />
    </p>
    <p align="center">
        <input type="submit" name="submit" id="submit" value="Login" />
    </p>
</form>
<h3 align="center" class="para">
<?php
if(isset($_GET['id'])) {
    echo $_GET['id'];
}
?>
</h3> 
```

这里是 verify_user.php 的代码，它将执行用户的登录/注册：

```
<?php
$uname = $_POST['name'];
$pass  = $_POST['pass'];
$qry   = mysql_query("SELECT * FROM login WHERE user='$uname'", $con);
if(!$qry) {
    die("Query Failed: ". mysql_error());
} else {

    $row=mysql_fetch_array($qry);

    if ($uname==$row['user']) {
        if($uname=='' || $pass=='') {
            header("Location:login.php?id=Some fields are empty");
        } else if($uname==$row['user'] && $pass==$row['password']) {
            header("Location: welcome.php?id=$uname");
        } else {
            header("Location:login.php?id=username already taken or your password is incorrect. Please try again");
        }
    } else {
        mysql_query("alter table login auto_increment = 1;");
        $qry_name=mysql_query("INSERT INTO login(user,password) VALUES('$uname','$pass')");
        header("Location: welcome.php?id=$uname");
    }
} 
```

此代码中的唯一问题是，当用户将任何字段留空时，它必须得到错误“某些字段为空”......当用户将用户名留空但不使用密码时它正在工作。 ..请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T10:41:11.443

把你的 if 条件放在首位

```
$uname=$_POST['name'];
$pass=$_POST['pass'];
if($uname=='' || $pass=='')
{
    header("Location:login.php?id=Some fields are empty");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T10:45:36.303

`<form id="form1" name="form1" method="post" action="verify_user.php" onsubmit="return Validate()">`

Javascript 函数

```
function Validate()
{

var x=document.forms["form1"]["pass"].value;
if(x==null||x=='')
{
alert("Enter Password");
return false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T10:43:15.517

稍微修改你的代码

```
<?php
$uname=$_POST['name'];
$pass=$_POST['pass'];
if($uname=='' || $pass=='')
{
        header("Location:login.php?id=Some fields are empty");
}

$qry=mysql_query("SELECT * FROM login WHERE user='$uname'", $con);
if(!$qry)
{
die("Query Failed: ". mysql_error());
}
else
{
   $row=mysql_fetch_array($qry);
if($uname==$row['user'])
{
    else if($uname==$row['user'] && $pass==$row['password'])
    {
            header("Location: welcome.php?id=$uname");    
    }
    else
    {
                header("Location:login.php?id=username already taken or your password is incorrect. Please try again");
        }
    }
else
{   mysql_query("alter table login auto_increment = 1;");
    $qry_name=mysql_query("INSERT INTO login(user,password) VALUES('$uname','$pass')");
    header("Location: welcome.php?id=$uname");
    }    
  }
  ?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-30T11:57:41.427

或者您可以在您的 verify_user.php 顶部添加此代码

```
<?php
$field = array('name', 'pass', ); //these are your required field of form
$empty = false;
foreach($field as $item)
{
  if (empty($_POST[$item]))
   {
    $error = true;
   }
}

if ($empty) 
{
  echo "please fill all field";
  header("location:form.php?msg=please fill all field"); 

}
?> 
```

并且 msg 将显示在您的 form.php 页面上，`<?php echo @$_GET['msg'];?>`我希望这将更易于使用......这就是我们喜欢开源代码的原因......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-28T22:38:51.593

只需在将字段分配给变量时检查字段是否为空：而不是这样做 -

```
$uname = $_POST['name'];
$pass  = $_POST['pass']; 
```

做这个-

```
if(empty($_POST['name']))
     $NameErr = "Name shouldn't be empty";
else
     $uname = $_POST['name'];
if(empty($_POST['pass']))
     $PassErr = "Password shouldn't be empty";
else
     $pass = $_POST['pass']; 
```

然后进一步编辑表单以在框旁边输出错误 -

```
<p align="center">Username :
  <input type="text" name="name" id="name" />
  <span class="Error"> <?php echo $NameErr ?></span>
</p>
<p align="center">Password :
  <input type="password" name="pass" id="pass" />
  <span class="Error"> <?php echo $PassErr ?></span>   
</p> 
```

为了避免警告，全局声明 $PassErr 和 $NameErr 并用空字符串初始化它们。

# c - 在字符串中查找 abc.. 字母的序列

> ID：15717576
> 
> 赞同：1
> 
> 时间：2013-03-30T10:38:37.323
> 
> 标签：c, string

需要编写一个函数，在字符串中搜索 abc 中的一系列字母。删除它们并只留下序列的第一个和最后两个。例如，如果输入字符串为：dabcemoqmnopqrrtaduvwxaz，则输出应为：da-cemoqm-rrtadu-xaz

这是我写的功能：但它不工作......

```
#include <stdio.h>
#include <string.h>

main()
{
    char str[100];
    printf("please enter a String");
    scanf ("%c", &str);

    for (int i=o; i< strlen(str); i++)
    {
        count=0;
        while(str[i+1]= str[i]+1)
        {
            if (count==0 || str[i+2]!=str[i]+1)
                str[i+1]="-";
            else
                str[i+1]="";
                count++;
        }

        printf("the correct String is:" %c, str);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T04:55:47.007

测试运行：

```
Please enter a string: kswa0123456789abcdeffABCDEFQRSTUVWXYZaaaab
Input: kswa0123456789abcdeffABCDEFQRSTUVWXYZaaaab
Output: kswa0-9a-ffA-FQ-Zaaaab

Please enter a string: dabcemoqmnopqrrtaduvwxaz
Input: dabcemoqmnopqrrtaduvwxaz
Output: da-cemoqm-rrtadu-xaz 
```

工作代码：

```
#include <stdio.h>
#include <string.h>

int main(void)
{
    char str[100];

    //strcpy(str, "dabcemoqmnopqrrtaduvwxaz");
    printf("Please enter a string: ");
    if (scanf("%99s", str) != 1)
        return(1);
    printf("Input: %s\n", str);

    int len = strlen(str);
    char *dst = str;
    int j = 0;

    for (int i = 0; i < len; i++)
    {
        int k;
        for (k = i; k < len; k++)
        {
            //printf("cmp %d (%c) and %d (%c)\n", k, str[k], k+1, str[k+1]);
            if (str[k+1] != str[k]+1)
                break;
        }
        if (k >= i+2)
        {
            //printf("squish %d (%c) to %d (%c)\n", i, str[i], k, str[k]);
            dst[j++] = str[i];
            dst[j++] = '-';
            dst[j++] = str[k];
            i = k;
        }
        else
            dst[j++] = str[i];
    }
    dst[j] = '\0';

    printf("Output: %s\n", str);
    return(0);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T10:46:37.227

简而言之，该功能没有做你想做的事。要么，要么我严重误解了你的意图。

此外，您还有许多错误，或者至少是可疑的陈述：

```
scanf ("%c", &str); // This reads a single character, not a string
int i=o             // Did you want a zero here?
str[i+1]="-";       // You probably meant '-', single quotes
str[i+1]= str[i]+1  // Eh? Did you mean `==`? Why? 
```

我真的不明白代码应该如何工作，我不能说如何修复它。但是，我可以为您指出另一个方向：

如果我理解要求，输出字符串可能比输入字符串短。就地工作（在输入之上）只会使事情复杂化。

尝试重写您的算法以使用输入字符串和输出字符串。将满足或不满足条件的字符从一个字符串复制到另一个。类似于这样的东西：

```
j = 0;
for (int i = 0; i < strlen(input); i++)
    if (condition(input, i))
        output[j++] = input[i] 
```

“条件”含糊不清，我没有在您的代码段中看到它强制执行。您可能想要编写一个辅助函数，`is_abc`它会告诉您字母表中是否包含子字符串。

`tl;dr`你需要考虑一下。可能复习你的学习材料。

# c# - 增加 wcf 的响应大小

> ID：15717580
> 
> 赞同：1
> 
> 时间：2013-03-30T10:39:11.443
> 
> 标签：c#, winforms, wcf, web-config

wcf 无法检索超过 100 行的数据集。它显示消息“已超出传入消息的最大消息大小配额 (65536)。要增加配额，请在适当的绑定元素上使用 MaxReceivedMessageSize 属性。” 但是在 wcf 项目的 web.config 中，我已经进行了绑定，如下所示

```
<bindings>
  <basicHttpBinding>
    <binding name="basicHttp" allowCookies="true"
             maxReceivedMessageSize="20000000"
             maxBufferSize="20000000"
             maxBufferPoolSize="20000000">
      <readerQuotas maxDepth="32"
           maxArrayLength="200000000"
           maxStringContentLength="200000000"/>
    </binding>
  </basicHttpBinding>
</bindings>
<client>
  <endpoint binding="basicHttpBinding" bindingConfiguration="wsHttpBinding_ILabelService" contract="LabelService.ILabelService" name="BasicHttpBinding_ILabelService"/>
</client>

<services>
  <service name="projectname.Service1"   behaviorConfiguration="projectname.Service1Behavior">
    <!-- Service Endpoints -->
    <endpoint address="" binding="wsHttpBinding"  contract="projectname.IService1">
      <!-- 
          Upon deployment, the following identity element should be removed or replaced to reflect the 
          identity under which the deployed service runs.  If removed, WCF will infer an appropriate identity 
          automatically.
      -->
      <identity>
        <dns value="localhost"/>
      </identity>
    </endpoint>
    <endpoint address="mex" binding="mexHttpBinding"   contract="IMetadataExchange"/>
  </service>
</services>

<behaviors>
  <serviceBehaviors>
    <behavior name="projectname.Service1Behavior">
      <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
      <serviceMetadata httpGetEnabled="true"/>          
      <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
      <serviceDebug includeExceptionDetailInFaults="true"/>

    </behavior>
  </serviceBehaviors>
</behaviors> 
```

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T10:42:41.777

```
<system.serviceModel>
    <bindings>
        <basicHttpBinding>
            <binding name="BasicHttpBinding_ILabelService" closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00" allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard" maxBufferSize="3145728" maxBufferPoolSize="524288" maxReceivedMessageSize="3145728" messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered" useDefaultWebProxy="true">
                <readerQuotas maxDepth="32" maxStringContentLength="3145728" maxArrayLength="16384" maxBytesPerRead="4096" maxNameTableCharCount="16384"/>
            </binding>
        </basicHttpBinding>
    </bindings>
    <client>
        <endpoint binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_ILabelService" contract="LabelService.ILabelService" name="BasicHttpBinding_ILabelService"/>
    </client>
</system.serviceModel> 
```

**编辑**

您必须将端点设置为绑定名称。在你的配置中试试这个。注意：您**必须设置** `contract`为具有完整命名空间结构的服务类名称和`bindingConfiguration`绑定配置`name`。

```
<client>
    <endpoint binding="basicHttpBinding" bindingConfiguration="basicHttp" contract="YourNamespace.YourServiceClassName" name="BasicHttpBinding_ILabelService"/>
</client> 
```

# c# - C# 自定义服务未在 2008 Server 上启动

> ID：15717581
> 
> 赞同：0
> 
> 时间：2013-03-30T10:39:14.797
> 
> 标签：c#, debugging, service, windows-server-2008

我建立了一个小服务（c#，net 4）。在对开发环境进行了一些测试和调整之后，我在自己的电脑上进行了尝试。一切正常。

当我在 Windows 2008 R2 服务器（生产环境）上安装服务时，它不会开始给我一个 1053 错误（服务没有及时启动）

奇怪的是，当我启动服务时，我会在一两秒后突然收到这个错误。我已将选项 this.RequireMoreTime(120000) 添加到我的服务中，并编辑了 ServicePipelineMode 的注册表项。

更多信息：

*   我正在使用 Log4net 在应用程序日志中记录事件。
*   我使用自定义源（使用 powershell 命令创建）
*   该服务设置为在网络服务帐户下运行，使用管理帐户启动它会得到相同的结果
*   我已将每个部分都放在 Try - catch using log.error(exception.tostring()) 下，但事件日志中没有记录任何内容。
*   我在网上阅读了很多帖子，但没有什么能帮助我解决问题。
*   开发和服务器具有相同的框架：

任何帮助，将不胜感激。

提前谢谢了。

**编辑：**
我试图在 program.cs 上添加一个 try-catch，这是我项目的起点：

```
static class Program
{
    /// <summary>
    /// The main entry point for the application.
    /// </summary>
    static void Main()
    {
        try
        {
            if (!EventLog.SourceExists("CheckMail"))
            {
                EventLog.CreateEventSource("CheckMail", "Application");
                EventLog.WriteEntry("EventSystem", "EventSource created");
            }

            ServiceBase[] ServicesToRun;
            ServicesToRun = new ServiceBase[] { new CheckMailSvc() };
            ServiceBase.Run(ServicesToRun);
        }
        catch (Exception ex)
        { 
          string message = string.Format("Error starting Service {0}", ex.ToString());
          EventLog.WriteEntry("CheckMail", message, EventLogEntryType.Warning, 666);
        }
    }
} 
```

没有任何东西被困住（无论是 EventSource 创建事件还是异常）

所有其他代码都在 try-catch 中，使用 log4net 记录事件（在开发环境中它工作正常）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T19:05:22.210

感谢您的建议。我的 OnStart 是这样的：

```
 protected override void OnStart(string[] args)
    {
        try
        {
            this.RequestAdditionalTime(30000);
            ServiceStart = DateTime.Now;
            XmlConfigurator.Configure();
            log4net.ThreadContext.Properties["EventID"] = 666;
            log.Info("Service Started");
            StringBuilder sb = new StringBuilder();
            sb.AppendLine("Service Configuration:");
            log.Info(sb.ToString());
            Timer t = new Timer(new TimerCallback(SendMail));
            t.Change(TimeSpan.Zero, TimeSpan.FromMinutes(every));
        }
        catch (Exception ex)
        {
            log.ErrorFormat("Error starting service: {0}", ex.ToString());
        }
    } 
```

如您所见，没有任何奇怪的事情发生，我应该在应用程序日志中看到一条启动消息。

# list - Apply a function of two inputs to every element in a list - Haskell

> ID：15717583
> 
> 赞同：2
> 
> 时间：2013-03-30T10:39:23.390
> 
> 标签：list, function, haskell

I have a function

```
f :: Int -> Int -> Int 
```

and I have a list of arbitrary length but for the sake of the example:

```
[x1,x2,x3] 
```

I need to apply f to the list such that the resulting list looks like this:

```
[f x1 x1 + f x1 x2 + f x1 x3 , f x2 x1 + f x2 x2 + f x2 x3 , f x3 x1 + f x3 x2 + f x3 x3] 
```

I know that

```
map f [x1,x2,x3] will give [f x1, f x2, f x3] 
```

but this doesn't seem like much help here. What's the best way to do it?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T10:49:04.863

You could use a list comprehension, to illustrate try the following expression under ghci,

```
fun f xs = map sum [[ f x y | y <- xs] |  x <- xs] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-30T11:27:13.390

A solution without list comprehensions:

Use `map` twice.

```
map (\x -> sum $ map (f x) xs) xs 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-30T13:02:41.493

You can use applicative functors to do it this way :

```
import Control.Applicative
let l = ["a", "b", "c"]
(++) <$> l <*> l 
```

That will return `["aa","ab","ac","ba","bb","bc","ca","cb","cc"]`.

To explain a little bit further, `(++) <$> l` will map the function `(++)` on every element of `l`, thus returning `[("a"++), ("b"++), ("c"++)]`. Then, using `<*>` will apply all of these functions to all of the elements of `l`.

See the documentation about applicative functors for more details. [http://www.haskell.org/ghc/docs/latest/html/libraries/base/Control-Applicative.html](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Control-Applicative.html)

# python - 如何读取执行的 shell 命令的输出？

> ID：15717584
> 
> 赞同：1
> 
> 时间：2013-03-30T10:39:25.713
> 
> 标签：python, python-2.7

我已经阅读了很多关于这个主题的问题，甚至有 2 个已经接受了答案，然后在评论中遇到了与我遇到的相同问题。

所以我想做的是捕捉这个命令的输出（在命令行中工作）

```
 sudo /usr/bin/atq 
```

在我的 Python 程序中。

这是我的代码（这是另一个问题的公认答案）

```
from subprocess import Popen, PIPE

output = Popen(['sudo /usr/bin/atq', ''], stdout=PIPE)
print output.stdout.read() 
```

这是结果：

```
 File "try2.py", line 3, in <module>
    output = Popen(['sudo /usr/bin/atq', ''], stdout=PIPE)
  File "/usr/lib/python2.7/subprocess.py", line 679, in __init__
    errread, errwrite)
  File "/usr/lib/python2.7/subprocess.py", line 1259, in _execute_child
    raise child_exception
OSError: [Errno 2] No such file or directory 
```

为什么哦为什么这是结果（在 Python 2.7 中，在 debian Raspbarry Wheezy 安装上）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-30T10:47:08.363

我相信你需要做的就是改变，

```
output = Popen(['sudo /usr/bin/atq'], stdout=PIPE) 
```

至

```
output = Popen(['sudo', '/usr/bin/atq'], stdout=PIPE) 
```

当我在列表中包含多个参数作为单个字符串时，我得到了同样的错误`args`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-30T10:46:22.167

`Popen`需要成为列表的参数，您可以使用`shlex`它来自动为您处理

```
import shlex
args = shlex.split('sudo /usr/bin/atq')
print args 
```

生产

```
['sudo', '/usr/bin/atq'] 
```

然后您可以将其传递给`Popen`. 然后，您需要`communicate`使用您创建的流程。试一试[`.communicate()`](http://docs.python.org/2/library/subprocess.html#subprocess.Popen.communicate)（注意`Popen`这里的参数是一个列表！）即

```
prc = Popen(['sudo', '/usr/bin/atq'], stdout=PIPE, stderr=PIPE)
output, stderr = prc.communicate()
print output 
```

`Popen`返回`subprocess`句柄，您需要`communicate`使用它来获取输出。注释添加`stderr=PIPE`将使您能够访问`STDERR`以及`STDOUT`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T10:46:46.593

您可以使用[`subprocess.check_output()`](https://docs.python.org/2/library/subprocess.html#subprocess.check_output)：

```
subprocess.check_output(['sudo', '/usr/bin/atq']) 
```

例子：

```
In [11]: print subprocess.check_output(["ps"])
  PID TTY          TIME CMD
 4547 pts/0    00:00:00 bash
 4599 pts/0    00:00:00 python
 4607 pts/0    00:00:00 python
 4697 pts/0    00:00:00 ps 
```

**帮助（）**：

```
In [12]: subprocess.check_output?
Type:       function
String Form:<function check_output at 0xa0e9a74>
File:       /usr/lib/python2.7/subprocess.py
Definition: subprocess.check_output(*popenargs, **kwargs)
Docstring:
Run command with arguments and return its output as a byte string.

If the exit code was non-zero it raises a CalledProcessError.  The
CalledProcessError object will have the return code in the returncode
attribute and output in the output attribute.

The arguments are the same as for the Popen constructor. 
```

# c - 打印错误值的字符串数组

> ID：15717592
> 
> 赞同：1
> 
> 时间：2013-03-30T10:40:41.740
> 
> 标签：c, arrays, string

我试图制作一个程序来计算正确的前缀和正确的后缀，然后比较集合，然后返回包含表示匹配对数的值的数组，这可以在以后的 KMP 算法中使用。但问题是前缀和后缀数组给出了错误的值。即使在新索引处添加新元素后，它也会用新元素替换数组中的所有值。

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

int* lps(char *,int );

int main()
{

char *pat = "abababca";

int *ptr ;
ptr = lps(pat,strlen(pat));

printf("\n***LPS***\n");

}

int * lps (char *p,int s)
{

char *prefixes[s] ;
char *suffixes[s] ;
char tmp1[s] , tmp2[s];
int i , j , k , c1 , c2 , c;

for (i = 0 ; i < s ; i ++)
{
    printf("\n\n*** --- Creating Prefixes and Suffixes for i = %d --- ***",i);

    c1 = 0 ;
    //create prefixes
    for (j = 0 ; j < i; j++)
    {
        for (k =0 ; k <= j; k++)
        {
            tmp1[k]=*(p+k);
            printf("\n *(p+%d)= %c , tmp1[%d]=%c",k,*(p+k),k,tmp1[k]);
        }

        tmp1[k]='\0';
        printf("\nprefixes[0]:%s",prefixes[0]);
        prefixes[c1] = tmp1;
        //strcpy(prefixes[c1], tmp1);

        printf("\ncurrently added %s to prefixes at %d and prefixes[%d]= %s\n ",tmp1,c1,c1,prefixes[c1]);
        c1++;
    }

    //print prefixes
    for (k = 0; k<c1; k++)
    {
        printf("\tprefixes[%d] = %s",k,prefixes[k]);
    }
    printf("\n");

    //create suffixes
    c2 = 0;
    for (j = 1 ; j <= i; j++)
    {
        for (k = j ; k  <= i; k++)
        {
            tmp2[k-j] = *((p+k));
            printf("\n *(p+%d)= %c , tmp2[%d]=%c",k,*(p+k),k-j,tmp2[k-j]);
        }

         tmp2[k-j]='\0';
         suffixes[c2] = tmp2 ;
        // strcpy(suffixes[c2], tmp2);

         printf("\ncurrently added %s to suffixes at %d and suffixes[%d]= %s\n",tmp2,c2,c2,suffixes[c2]);
        c2++;
    }

     //prinf suffixes
    for (k = 0; k<c2; k++)
    {
        printf("\tsuffixes[%d] = %s",k,suffixes[k]);
    }
    printf("\n");
    //compare the prefixes and suffixes

    c = 0 ;
    for (j = 0; j < c1; j++)
    {
        for(k=0 ; k < c2 ; k++)
        {
            printf("\nprefixes[%d] = %s , suffixes[%d] = %s\n ",j,prefixes[j],k,suffixes[k]);

            if (strcmp(prefixes[j], suffixes[k])==0)
            {
                c = c + 1 ;
            }
        }
    }

  }
  } 
```

输出（输出的某些部分）：-

```
prefixes[0] = ab    prefixes[1] = ab   //it should be prefixes[0] = a   prefixes[1] = ab 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T10:48:04.007

问题是您没有分配任何字符串。您拥有的唯一字符串`lps`是`tmp1`and `tmp2`。然后你做这样的分配：

```
prefixes[c1] = tmp1; 
```

That assigns a pointer but does not copy the contents of the string. You'll end up with every entry in `prefixes` pointing to the same string, `tmp1`. And likewise for `suffixes`.

You'll need to use `malloc` and `strcpy` to make new string instances.

In the code you have commented out calls to `strcpy`. I suspect you tried these and encountered runtime errors. Those runtime errors were because you did not allocate any memory. The corrected code would look like:

```
prefixes[c1] = malloc(strlen(tmp1)+1);
strcpy(prefixes[c1], tmp1); 
```

And similarly for `suffixes`.

In production quality code you'd include error checking. And you'd want to make sure that you call `free()` on any pointer returned by the calls `malloc()`, once you had finished with it.

I'd also question the use of C variable length arrays, VLAs. In your code, `prefixes`, `suffixes`, `tmp1` and `tmp2` are all VLAs. Using VLAs can readily lead to stack overflow if you have large array dimensions. My instincts say that heap allocation is what you need here.

# php - 使用 PHP 和 jQuery 自动建议文本框

> ID：15717593
> 
> 赞同：1
> 
> 时间：2013-03-30T10:40:53.653
> 
> 标签：php, jquery, html

我正在尝试使用 PHP 和 jQuery 做一个自动建议文本框，但是，我使用的所有基于互联网的 jQuery 已经被弃用。我不确定我的代码是不工作的还是 jQuery 的。有人可以帮我吗？：） 先感谢您！

```
<?php
   session_start();
?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
  <head>
    <title>jQuery Autocomplete Plugin</title>
    <script type="text/javascript" src="js/jquery-1.4.2.js"></script>
    <script type='text/javascript' src="js/jquery.autocomplete.js"></script>
    <link rel="stylesheet" type="text/css" href="js/jquery.autocomplete.css" />
    <script type="text/javascript">
      $().ready(function() {
        $("#users").autocomplete("autoCompleteMain.php", {
          width: 260,
          matchContains: true,
          selectFirst: false
        });
      });
    </script>
  </head>
  <body>
    <h2 id="banner">Autocomplete</h1>
    <div id="content">
      <form autocomplete="off">
        <p>
          Enter Username <label>:</label>
          <input type="text" name="users" id="users" />
        </p>
        <input type="submit" value="Submit" />
      </form>
    </div>
  </body>
</html> 
```

**PHP：**

```
$host="localhost"; // Host name
$username="root"; // Mysql username
$password="aaaa"; // Mysql password
$db_name="maptemp"; // Database name

$con = mysql_connect($host,$username,$password) or die(mysql_error());
mysql_select_db($db_name, $con) or die(mysql_error());

$q = strtolower($_GET["q"]);
if (!$q) return;
$sql = "select username from users where username LIKE '%$q%'";
$rsd = mysql_query($sql);

while($row = mysql_fetch_array($rsd)) {
  $cname[] = $row['username'];
}

echo json_encode($cname); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T10:44:18.607

**代替**

```
$q = strtolower($_GET["q"]); 
```

**和**

```
$q = strtolower($_GET["term"]); 
```

因为据我所知，`jQuery`自动完成通过期限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T10:49:02.557

你应该在你的 PHP 脚本中声明你的数组：`$cname = array();`

正如 Dipesh Parmar 所说，jQuery 使用“term”参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-24T05:10:34.453

无需在 JSON 中编码结果，否则在前面解析它。所以在 php 中创建一个 html 并回显它，这样你就可以得到 html 格式的结果。

# ruby-on-rails - Rails 服务器上的错误 - 无法加载此类文件 - sqlite3/sqlite3_native (LoadError)

> ID：15717603
> 
> 赞同：5
> 
> 时间：2013-03-30T10:41:38.190
> 
> 标签：ruby-on-rails, ruby, sqlite, rubygems

我已经在我的 64 位窗口上使用 ruby​​installer、devkit 和 rails 4.0 beta（全部 32 位）安装了 ruby​​ 2.0（因为 ruby​​ 奇怪地将 64 位处理器误解为 32 位）

我已将 sqlite3 二进制文件（单独下载）添加到我的 PATH 中。

当我运行 rails server 命令时，出现以下错误

C:/Ruby200/lib/ruby/gems/2.0.0/gems/sqlite3-1.3.7-x86-mingw32/lib/sqlite3.rb:6:in `require': 无法加载这样的文件 -- sqlite3/sqlite3_native ( LoadError) 来自 C:/Ruby200/lib/ruby/gems/2.0.0/gems/sqlite3-1.3.7-x86-mingw32/lib/sqlite3.rb:6:

我已经在[https://groups.google.com/forum/?fromgroups=#!topic/rubyinstaller/gedIaMryCFQ](https://groups.google.com/forum/?fromgroups=#!topic/rubyinstaller/gedIaMryCFQ)尝试修复以从源重新安装 sqlite3 gem，但它失败并出现错误找不到 sqlite3。

经过数小时的调试，我无法解决此问题。这完全破坏了我学习可靠的 Ruby on Rails 框架的动力。Ruby 应该很简单！有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-15T09:26:41.050

我们在 Windows 64 位机器上遇到了 Ruby 2.0 版本的问题（“缺少 sqlite3_native”），所以我们恢复到 Ruby 1.93 并且它工作正常。

# asp.net - ASP.Net 4.0 图像选择和更改源

> ID：15717605
> 
> 赞同：0
> 
> 时间：2013-03-30T10:41:48.797
> 
> 标签：asp.net, image, select

如果我有一组图像（按钮）甚至只是平面图像，连续 5 个，并且我想实现以下目标，那么最简单的方法是什么，我真的找不到一个好的解决方案：

*   点击其中一张图片，需要获取一个新的src，而其他的则需要恢复到原始状态。

*   一个 Asp:Label 需要在点击时设置，基于点击的图像

*   在进行 PostBack 时，我需要知道选择了哪一个

除此之外，它是 asp.net 4.0，所以单引号给了我 javascript 的痛苦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T12:23:17.397

**点击其中一张图片，需要获取一个新的src，而其他的则需要恢复到原始状态。**

1.  首先，您必须创建一个函数，将所有 5 个图像设置为原始状态。
2.  然后确保为每个图像元素赋予相同的类名。
3.  之后创建一个函数，该函数将根据类名触发，例如

    ```
     $(".classname").click(function(){

       //first call the function which will set all 5 images to original state.

       //then change the source of the current image. onwhich user has clicked as below:

        $(this).attr("src","new source");
       // here you can store the id of current image in a variable to keep the record which images have  been clicked
      }); 
    ```

**一个 Asp:Label 需要在点击时设置，基于点击的图像**

您可以在上述函数中轻松设置 Asp:Label。如果您熟悉 javascript 代码。设置起来太简单了。

**在进行 PostBack 时，我需要知道选择了哪一个**

在创建第一个之后，`function`您剩下的两个步骤将自行完成。

在上面，`function`您已经保存了用户在`variable`.

在这样做`postback`时，您可以轻松地将`varibale's`数据保存`hiddenfield`或分配给静态`varibale`或您喜欢的任何方式。

最后你可以在`code behind`.

如果我必须做这件事。我会按照上面的流程。它的过程非常简单快捷。一切都可以在客户端完成。

你认为呢？

# javascript - 使用 Javascript 获取字节的值

> ID：15717607
> 
> 赞同：0
> 
> 时间：2013-03-30T10:41:59.893
> 
> 标签：javascript, string, byte

我不确定标题是否有意义，但这就是我需要的。

这是我的字节：��������ˇ�����0F*E��ù� �我已经设法用这个 php 片段获取了这个字节的值：

```
<?php
$var = "���������ˇ�����0F*E��ù�";

for($i = 0; $i < strlen($var); $i++)
{
   echo ord($var[$i])."<br/>";
}
?> 
```

结果是：0 0 0 0 0 0 0 0 2 2 0 255 0 0 0 0 0 2 48 70 1 42 69 0 0 1 157 0

但是现在我需要在没有 php 的情况下使用 Java Script 来做同样的事情。任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T10:47:56.210

如果您想在 JavaScript 中获取字符串中每个字符的数值，可以这样做：

```
var someString = "blarg";

for(var i=0;i<someString.length;i++) {
    var char = someString.charCodeAt(i);

} 
```

`String.charCodeAt(index)`返回字符串中指定字符的 Unicode 代码点值。它不像 PHP 或 C 那样返回固定的 8 位编码（即 ASCII）的数值。假设您的字符串是人类可读的字符串（与原始二进制数据相反），那么使用`charCodeAt`非常好。如果您使用的是原始二进制数据，则不要使用 JavaScript 字符串。

如果您的字符串包含 Unicode 代码点低于 128 的字符，则其行为与PHP 或 C 类型中的`charCodeAt`行为相同，但是您提供的示例包含非 ASCII 字符，因此 Unicode（有时很复杂）规则将发挥作用。`ord``char`

请参阅`charCodeAt`此处的文档：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/charCodeAt](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/charCodeAt)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T11:15:32.207

PHP 字符串计算为 8 位（字节 0..255），而 JavaScript 使用 16 位 unicode 字符（0..65535）。根据您的字符串，您可以将其拆分为（16 位）字符代码或字节。如果您知道您的字符串仅包含 8 位字符，您可以忽略“hiByte”（见下文）以获得与 PHP 相同的结果。

```
function toByteVersionA(s) {
    var len = s.length;
    // char codes
    var charCodes = new Array();
    for(var i=0; i<len; i++) {
        charCodes.push(s.charCodeAt(i).toString());
    }
    var charCodesString = charCodes.join(" ");
    return charCodesString;
}

function toByteVersionB(s) {
    var len = s.length;
    var bytes = new Array();
    for(var i=0; i<len; i++) {
        var charCode = s.charCodeAt(i);
        var loByte = charCode & 255;
        var hiByte = charCode >> 8;
        bytes.push(loByte.toString());
        bytes.push(hiByte.toString());
    }
   var bytesString = bytes.join(" ");
   return bytesString;
}

function toByteVersionC(s) {
   var len = s.length;
   var bytes = new Array();
   for(var i=0; i<len; i++) {
        var charCode = s.charCodeAt(i);
        var loByte = charCode & 255;
        bytes.push(loByte.toString());
   }
   var bytesString = bytes.join(" ");
   return bytesString;
}

var myString = "abc"; // whatever your String is
var myBytes = toByteVersionA(myString); // whatever version you want 
```

# xcode - UIImage 不显示，除非我点击我的表格单元格

> ID：15717610
> 
> 赞同：0
> 
> 时间：2013-03-30T10:42:12.130
> 
> 标签：xcode

我今天花了一些时间编写一个 xcode 应用程序。我正在为表格视图单元格使用带有单独 xib 的 UITableView。除了一件古怪的事情外，一切都运作良好。在我的代码中，我将图像设置在数组中的表格单元格 xib 上。当我运行应用程序时，我发现图像不会出现在表格单元格上，直到我单击表格单元格。当我点击另一个单元格时，我之前选择的单元格上的图像消失了。

有趣的是，我以完全相同的方式在表格单元格 xib 上设置标签，但是我没有得到标签的问题。

这是我的代码。我将不胜感激一些帮助。

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    UITableViewCell *cell = nil;
    cell = [tbHealthCheck dequeueReusableCellWithIdentifier:@"CONTENT"]; //all the cells in this table are named content (identifier for all cells in table)
    if (cell == nil){
        [[NSBundle mainBundle] loadNibNamed:@"FirstViewTableCell" owner:self options:nil];
        cell = tcHealthCheck;
        tcHealthCheck = nil;
    }
    UILabel *l1 = (UILabel *) [cell viewWithTag:0];

    [l1 setText:[healthCheckCategory objectAtIndex:indexPath.row]];
    l1.font = [UIFont fontWithName:@"arial" size:14];
    [l1 setTextColor:[UIColor blackColor]];
    UIImageView *img1 = (UIImageView *) [cell viewWithTag:1];

    NSString *status = [healthCheckStatus objectAtIndex:indexPath.row];
    if ([status isEqualToString:@"RED"])
    {
        img1.image = [UIImage imageNamed:@"red-light-badge.png"];
    }
    else if ([status isEqualToString:@"YELLOW"])
    {
        img1.image = [UIImage imageNamed:@"yellow-light-badge.png"];
    }
    else if ([status isEqualToString:@"GREEN"])
    {
        img1.image = [UIImage imageNamed:@"green-light-badge.png"];
    }

    return cell;
} 
```

# debugging - Magento：直接输出任何错误或通知

> ID：15717611
> 
> 赞同：1
> 
> 时间：2013-03-30T10:42:28.630
> 
> 标签：debugging, magento, magento-1.7

在我的模块代码中，我回显了一个未定义的变量：

```
echo $doesnotexist; 
```

我在**index.php**中完成了以下操作：

```
error_reporting(E_ALL);
Mage::setIsDeveloperMode(true);
ini_set('display_errors', 1); 
```

执行代码时，此组合显示“哎呀，我们的坏...” 404 类型页面。在*exception.log*中有一个通知（“*未定义变量：donotexist* ”）以及一个堆栈跟踪。

如果我删除**index.php**中的部分说明：

```
error_reporting(E_ALL);
//Mage::setIsDeveloperMode(true);
ini_set('display_errors', 1); 
```

前端正常显示页面，没有任何错误提示，并将错误记录到*system.log*。

现在我的问题是：有没有办法将这些通知/错误直接输出到前端？还是我应该在编码时始终保持打开*system.log*或*exception.log的副本？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T15:41:08.947

Magento 通常使用 zend 异常/错误处理类进行错误和异常处理。因此，对于日志中记录 magento 代码发送异常的错误。但是，如果 magento 无法捕获该错误，那么它将打印在您的页面上。

您可以在 2 种情况下在前端获取错误：

1.  如果您正在创建自己的 magento 扩展，那么您可以抛出错误，以便它可以显示在 magento 页面上
2.  如果您正在处理 .phtml 文件并遇到致命错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T19:56:16.467

1.  出于安全考虑，错误和警告不应显示在前端。

2.  如果有异常或者你做了一些系统日志，你将能够从 system.log 或 exception.log 中得到它

3.  对于 PHP 错误，您应该参考在站点级别生成的错误日志文件。

4.  法师::setIsDeveloperMode(true); 只有在包含 Mage.php 后才能使用，因此请粘贴完整的 index.php 代码

# android - 如何让 Intentservice 重复工作？

> ID：15717612
> 
> 赞同：1
> 
> 时间：2013-03-30T10:42:28.520
> 
> 标签：android

我有意图服务，当在 myDataBsae 中找到值时通知，但如果数据为 null 不应该通知我，所以

1.  如何让我的 Intentservice 每 50 秒检查一次 myDataBase 的内容（我使用了 AlarmManager 但我的服务每 50 秒通知我一次，尽管我的 database = null , ）？
2.  当我触发它时，我希望我的意图服务单独工作线程

我的服务是：

```
 public class ShowTimeServer extends IntentService  {
NotificationManager nm;
static final int uniqueID=326534;
public ShowTimeServer() {
    super("ShowTimeServer");
    // TODO Auto-generated constructor stub
}

/* (non-Javadoc)
 * @see android.app.IntentService#onHandleIntent(android.content.Intent)
 */
@Override
protected void onHandleIntent(Intent arg0) {
    // TODO Auto-generated method stub

    ShowTimeDB RetrieverDB =new ShowTimeDB(this);
    RetrieverDB.open();
    String data = RetrieverDB.getShowNotify();
    RetrieverDB.close();

    if (!(data.equals(null))){

        nm=(NotificationManager)getSystemService(NOTIFICATION_SERVICE);

        Intent intent=new Intent(this,TodayShow.class);
        PendingIntent pi= PendingIntent.getActivity(this, 0, intent, 0  );
        CharSequence x=(CharSequence) data;
        Notification n=new Notification(R.drawable.ic_launcher,"YOU HAVE SHOW" ,System.currentTimeMillis());
        n.setLatestEventInfo(this, "ShowTime", x, pi);
        n.defaults=Notification.DEFAULT_ALL;

        nm.notify(uniqueID,n);
        //pi.cancel();
        //nm.cancel(uniqueID);

    }
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T11:41:18.437

1.  intentService 不应该每 X 秒做一次事情。为此，还有很多其他解决方案。如果您坚持为此任务使用服务，则可以将其设置为普通的前台/后台服务（取决于您是否希望在用户离开应用程序时执行此操作），然后在那里执行。

2.  intentService already runs on a different thread. that's why you can do a long operation on the onHandleIntent method.

# php - IIS7 - 将 .htaccess 转换为 web.config

> ID：15717613
> 
> 赞同：0
> 
> 时间：2013-03-30T10:42:40.023
> 
> 标签：php, .htaccess, iis, web-config, rewrite

如何将 .htaccess 转换为 web.config。

我才知道我需要使用 web.config 而不是 htaccess。请在下面找到我的 htaccess

```
RedirectMatch 403 (?i).*\.log$
RedirectMatch 403 (?i)/+not_imported_.*\.txt
RedirectMatch 403 (?i)/+(soap|cache|xtemplate|data|examples|include|log4php|metadata|modules)/+.*\.(php|tpl)
RedirectMatch 403 (?i)/+emailmandelivery\.php
RedirectMatch 403 (?i)/+cache/+upload
RedirectMatch 403 (?i)/+cache/+diagnostic
RedirectMatch 403 (?i)/+files\.md5$

php_value auto_prepend_file D:\wamp\www\Sugarcrm\php-core-proxy.php 
```

我如何将其转换为 web.config ？

# ruby-on-rails - 覆盖 Sublime Text 中的代码片段

> ID：15717616
> 
> 赞同：2
> 
> 时间：2013-03-30T10:43:04.857
> 
> 标签：ruby-on-rails, sublimetext2, code-snippets

在 Sublime Text 2 中，我想为 Rails 创建一个片段`image_tag`。

我想`it`成为一个触发器，但它似乎已经被`<input>`.
我想完全删除`<input>`片段。我浏览了大多数 Sublime 软件包，但我在任何地方都找不到。

有没有一种简单的方法来查找或覆盖`<input>`代码段？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T12:25:18.110

首先，如果您对使用`it`触发代码段一无所知，则需要编辑此文件：

```
~/Library/Application Support/Sublime Text 2/Packages/HTML/HTML.tmLanguage 
```

并`input`从字符串中删除

```
<key>begin</key>
        <string>(&lt;/?)((?i:a|abbr|acronym|area|b|base|basefont|bdo|big|br|button|caption|cite|code|col|colgroup|del|dfn|em|font|head|html|i|img|input|ins|isindex|kbd|label|legend|li|link|map|meta|noscript|optgroup|option|param|q|s|samp|script|select|small|span|strike|strong|style|sub|sup|table|tbody|td|textarea|tfoot|th|thead|title|tr|tt|u|var)\b)</string> 
```

接下来，注释掉这一行

```
{ "trigger": "input", "contents": "<input>" }, 
```

从`~/Library/Application Support/Sublime Text 2/Packages/HTML/HTML.sublime-completions`

`input` should now be free to use as you like in HTML scopes.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T11:43:30.967

转到`Tools`->`New Snippet...`并编写以下内容：

```
<snippet>
    <content><![CDATA[
<%= image_tag ${1}, ${2} %>   
]]></content>
    <tabTrigger>it</tabTrigger>
</snippet> 
```

最后保存片段。

这个片段对我来说非常有用。

# asp.net - 使缓存的脚本文件在客户端计算机上刷新

> ID：15717618
> 
> 赞同：0
> 
> 时间：2013-03-30T10:43:10.070
> 
> 标签：asp.net, caching, iis-7, .net-4.0

我们的一个生产基地遇到了问题。已为页面更新 JavaScript 文件并上传到 IIS。我们直接使用包含文件

```
<script src="PATH_TO_SCRIPT" type="text/javascript"></script> 
```

我们开始收到客户关于页面损坏的投诉。这是因为 JS 文件被缓存在客户端机器上并且没有从服务器刷新。

我们以后如何在不更改javascript文件名的情况下避免这种情况？

ASP.Net 捆绑和缩小可能会有所帮助。但是有很多页面和网站是相当遗留。几乎所有的页面都在相关的 js 文件中编写了一些繁重的逻辑。

该站点正在运行 .Net 4.0 和 IIS 7

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T11:09:58.193

捆绑和缩小确实是处理此问题的正确方法，因为它会在呈现脚本时负责正确地将正确的版本号附加到 url。

但是，如果这是一个遗留站点并且由于某些原因您不能使用捆绑，一种可能性是编写一个服务器端帮助程序，它将生成脚本标记并计算文件的校验和并附加正确的查询字符串参数：

```
public static class ScriptExtensions
{
    public static string Script(this Page page, string relativeUrl)
    {
        var path = page.Server.MapPath(relativeUrl);
        if (File.Exists(path))
        {
            return string.Format(
                "<script type=\"type/javascript\" src=\"{0}?v={1}\"></script>",
                page.ResolveUrl(relativeUrl),
                Hash(path)
            );
        }
        return string.Empty;
    }

    private static string Hash(string file)
    {
        using (var stream = File.OpenRead(file))
        using (var bs = new BufferedStream(stream))
        {
            using (var sha1 = new SHA1Managed())
            {
                byte[] hash = sha1.ComputeHash(bs);
                var result = new StringBuilder(2 * hash.Length);
                foreach (byte b in hash)
                {
                    result.AppendFormat("{0:X2}", b);
                }
                return result.ToString();
            }
        }
    }
} 
```

然后在您的 WebForm 中使用帮助程序来包含您的脚本：

```
<%= this.Script("~/scripts/example.js") %> 
```

这将发出以下标记：

```
<script type="type/javascript" src="/scripts/example.js?v=3C222D8DFA2A02A02E9A585EA6FE0D95673E8B4A"></script> 
```

现在，当您更改脚本文件的内容时，它的 SHA1 校验和将有所不同，并且将生成不同版本的查询字符串参数并附加到所有客户端缓存中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T04:57:31.537

受到 Darin 解决方案的启发，我决定使用 Bundling and Minification 以获得它所提供的所有好处的好处，我想出了以下解决方案。为 Page 类型添加一个带有 Extension 方法的静态类：

```
public static class ScriptExtensions
{
    public static string Script(this Page page, string relativeUrl)
    {
        var path = page.Server.MapPath(relativeUrl);
        if (File.Exists(path))
        {
            return BundlesConfig.AddPageScript(relativeUrl);
        }
        return string.Empty;
    }
} 
```

类`BundlesConfig`contians 方法为 js 文件生成 bundle 并添加到 Bundles：

```
public class BundlesConfig
{
    private static readonly ICollection<string> addedScripts 
                                                     = new HashSet<string>();
    private static readonly string bundleTemplate = "~/bundles/scripts/{0}";

    internal static string AddPageScript(string relativeUrl)
    {            
            var fileName = CleanFileName(relativeUrl);
            var bundleName = string.Format(bundleTemplate, fileName);

            if(!addedScripts.Contains(fileName))
            {
                var bundle = new ScriptBundle(bundleName);
                bundle.Include(relativeUrl);
                addedScripts.Add(fileName);
                BundleTable.Bundles.Add(bundle);
            }
      return System.Web.Optimization.Scripts.Render(bundleName).ToHtmlString();
    }

    private static string CleanFileName(string url)
    {
        if (url.Contains("/"))
        {
            return url.Substring(url.LastIndexOf("/") + 1).Replace('.', '_')
                          .Replace("-", "__");
        }

        return url.Replace('.', '_').Replace("-", "__");
    }
} 
```

现在在页面而不是标准`script`标签上：

```
<scrip type="text/javascript" src="/scripts/jquery-min.js"></script> 
```

我们用：

```
<%= this.Script("~/Scripts/jquery-min.js") %> 
```

该方法吐出以下内容：

```
<script type="text/javascript" src="/bundles/scripts/jquery__min_js?v=...."></script> 
```

# jquery - Multiple Canvas Animations

> ID：15717620
> 
> 赞同：2
> 
> 时间：2013-03-30T10:43:20.017
> 
> 标签：jquery, css, animation, canvas

I have a fiddle of what I've achieved so far with Animating a Canvas.

[http://jsfiddle.net/skerwin/uhVj6/6/](http://jsfiddle.net/skerwin/uhVj6/6/)

I'm trying to make a duplicate of the canvas, I want to change the amount it grows

Circle One:

```
var endPercent = 65;
var curPerc = 0; 
```

Circle Two:

```
 var endPercent = 45;
 var curPerc = 0; 
```

I'm really new to Jquery/Animations and Canvas. What do i have to do to duplicate the Animation code to make 2 Canvas' animate at the same time.?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T13:37:23.160

Maybe something like this? [http://jsfiddle.net/dLAVe/](http://jsfiddle.net/dLAVe/) I wraped the code in a new `animate` function and changed the name of your `animate` function to `render`. The animate function now takes two arguments, the id of the element and the number of percentage.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T13:45:58.067

我想我更喜欢 user1823799 的回答。但这是我的解决方案。我基本上添加了另一个`canvas`，`context`并且在同一个函数中，我正在检查第二个弧是否达到了极限。

[http://jsfiddle.net/btevfik/6SuCC/](http://jsfiddle.net/btevfik/6SuCC/)

# android - best practice for "freeze screen" while there are some operation (with progress bar ?)

> ID：15717621
> 
> 赞同：0
> 
> 时间：2013-03-30T10:43:20.787
> 
> 标签：android

Im a beginner in Android. I would like "freeze" my app (I mean, the user can't do any action) when I must do some operation. By example, I delete all row of one my SQLiteBase's table..during this process, I would like show a progressbar and the user can't do anything before the end.

I know (a little) the progressbar mechanism and the AsyncTask but I find it's a heavy solution.. there is a better simpler solution/practice ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T11:27:30.420

In general, freezing is not a recommended thing and you should always try to allow the user to cancel or go back. It's annoying to wait for operations to finish. More info can be read [here](http://developer.android.com/design/building-blocks/progress.html).

However, sometimes when you must, you must...

In short, this is how you show a [ProgressDialog](http://developer.android.com/reference/android/app/ProgressDialog.html) :

```
ProgressDialog progressDialog = ProgressDialog.show(this, "dialog title",
"dialog message", false); 
```

(the "false" value is so that the user won't be able to cancel it using the back button)

Then, when you need to dismiss it (upon onPostExecute if you use an AsyncTask), you simply call :

```
progressDialog.dismiss(); 
```

# c++ - How to get the last commit from HEAD in a git repository using libgit2?

> ID：15717625
> 
> 赞同：3
> 
> 时间：2013-03-30T10:43:47.663
> 
> 标签：c++, c, libgit2

Since there is no copy-paste example for getting last commit with [libgit2](http://libgit2.github.com/) I thought I should add one. The examples in libgit2 make extensive use of `git_oid_fromstr()` ...

Don't forget that libgit2 is in full development at this time (March 2013) so have a look at official documentation and source code, as new features are added daily:

*   [liggit2 API](http://libgit2.github.com/libgit2/#HEAD)
*   headers are very well commented - [here's an example](https://github.com/libgit2/libgit2/blob/HEAD/include/git2/clone.h#L99-103)
*   [extensive tests](https://github.com/libgit2/libgit2/tree/development/tests-clar) may be a source of inspiration
*   there are some [official examples](https://github.com/libgit2/libgit2/tree/development/examples), [general.c](https://github.com/libgit2/libgit2/blob/development/examples/general.c) is a good place to start
*   inspiration may be found in [LibGit2Sharp](https://github.com/libgit2/libgit2sharp) - here are [some tests](https://github.com/libgit2/libgit2sharp/blob/vNext/LibGit2Sharp.Tests/ObjectDatabaseFixture.cs)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-30T10:43:47.663

```
git_commit * getLastCommit ( git_repository * repo )
{
  int rc;
  git_commit * commit = NULL; /* the result */
  git_oid oid_parent_commit;  /* the SHA1 for last commit */

  /* resolve HEAD into a SHA1 */
  rc = git_reference_name_to_id( &oid_parent_commit, repo, "HEAD" );
  if ( rc == 0 )
  {
    /* get the actual commit structure */
    rc = git_commit_lookup( &commit, repo, &oid_parent_commit );
    if ( rc == 0 )
    {
      return commit;
    }
  }
  return NULL;
} 
```

You will need to call `git_commit_free()` once you are done with it.

# java - 如何搜索长度分隔的字典

> ID：15717628
> 
> 赞同：0
> 
> 时间：2013-03-30T10:44:08.753
> 
> 标签：java, file-io

我正在用 Java 创建一个文字游戏以供练习。我有一个 txt 文件，其中包含英语中所有的四个字母单词。它们是长度分隔的，即从第一个字符开始的每第四个字符是单词的第一个字母。

检查字典中是否存在单词的好方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T11:12:47.670

您可以将文件读入`TreeSet`然后使用该`contains`方法。对于`Set`包含在恒定时间内运行。我添加了一个`.toUpperCase()`转换，因此没有与案例相关的问题，这很容易`.toLowerCase()`也是。

```
public static void main(String[] args) throws IOException {
    final TreeSet<String> strings = new TreeSet<>();
    try (final Reader reader = new InputStreamReader(new FileInputStream(
           System.getProperty("user.home") + "/Downloads/words.txt"), "UTF-8")) {
        final char[] buffer = new char[4];
        int numRead = -1;
        while ((numRead = reader.read(buffer)) > 0) {
            strings.add(new String(buffer, 0, numRead).toUpperCase());
        }
    }
    System.out.println(strings.contains("FLIP"));
    System.out.println(strings.contains("JUMP"));
} 
```

# google-maps - 在 Google Maps Apiv3 中获取路线服务生成的所有坐标

> ID：15717629
> 
> 赞同：13
> 
> 时间：2013-03-30T10:44:10.653
> 
> 标签：google-maps, google-maps-api-3, map-directions

我的应用程序允许用户选择地图上的两个点，并使用 Google maps Apiv3 的 Directions Service 找到它们之间的路线。然后沿着这条路线的坐标必须保存到数据库中。我可以成功编写所有代码来完成此任务。但是我被一个问题排除在外。

我知道 StackOverflow 中还有其他几个问题 - [One](https://stackoverflow.com/questions/6152160/how-to-get-the-list-of-waypoints-of-a-route-displayed-on-the-google-maps-throug) , [Two](https://stackoverflow.com/questions/9014830/how-do-i-get-google-map-v3-direction-coordinates-from-start-to-end) on the same，但我认为他们或我肯定在这里错过了一些东西。

示例代码：

```
function getCoordinates(result) {
            var currentRouteArray = result.routes[0];  //Returns a complex object containing the results of the current route
            var currentRoute = currentRouteArray.overview_path; //Returns a simplified version of all the coordinates on the path

            obj_newPolyline = new google.maps.Polyline({ map: map }); //a polyline just to verify my code is fetching the coordinates
            var path = obj_newPolyline.getPath();
            for (var x = 0; x < currentRoute.length; x++) {
                var pos = new google.maps.LatLng(currentRoute[x].kb, currentRoute[x].lb)
                latArray[x] = currentRoute[x].kb; //Returns the latitude
                lngArray[x] = currentRoute[x].lb; //Returns the longitude
                path.push(pos);
            }
      } 
```

上面的代码工作完美，除了似乎包含 lat 和 lng 坐标的概览路径的`kb`和属性并不总是相同的。`lb`上次写代码的时候是`kb`and`lb`几天，后来改成`mb`,`nb`今天`jb`和`kb`.

除了上述之外，我没有看到对象中可以为我提供 latlng 的任何其他属性。其他类似问题的答案都提到了这个问题。我在这里错过了什么吗？请提供任何可靠的解决方案。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-30T11:56:52.537

不要使用缩小名称且未记录的 kb 和 lb。仅使用记录的属性 .lat() 和 .lng()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T14:00:27.577

另一种选择是解码“点”字符串：

```
http://home.provide.net/~bratliff/routes/ 
```

它比对每个单独的点使用 lat() / lng() 方法要快得多。

# c# - Database Login UserName Password window appeared on view of Crystal report VS2010 with two .ttx file

> ID：15717632
> 
> 赞同：0
> 
> 时间：2013-03-30T10:44:39.467
> 
> 标签：c#, winforms, crystal-reports, crystal-reports-xi, crystal-reports-2010

I am working on C# 4.0 Win-Form application and using Crystal Report For VS2010\. In my report i have connection with Field Definition Only File. I have two ".ttx" files.

When I view my report it asks login, UserName and password for second file. For Example :

I have two ttx files. MastTable.ttx, DetaTable.ttx

Code is as:

```
DataTable A, B;
A.TableName = "MastTable"
B.TableName = "DetaTable"
DataSet D = new DataSet()
D.AddRange(new DataTable[] { A, B } );

MyReport Rep = new MyReport();
Rep.SetDataSource(D);

CrRepViewer.ReportSource = MyReport; 
```

Here on view Database login UserName Password window appear for DetaTable.ttx

How can I resolve it?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T13:43:39.127

I tried this type of pairing of data tables in my code.

rpt is object of my report. ds is dataset.

```
rpt.Database.Tables("MastTable").SetDataSource(ds.Tables("MastTable"))
rpt.Database.Tables("DetaTable").SetDataSource(ds.Tables("DetaTable")) 
```

if you have sub-reports, then try this,

```
rpt.Subreports(0).Database.Tables("Table1").SetDataSource(ds.Tables("YourTableName")) 
```

# json - Does anyone know a demo JSON server?

> ID：15717648
> 
> 赞同：13
> 
> 时间：2013-03-30T10:46:51.790
> 
> 标签：json, testing, demo

I am building a library that makes calls to a server that returns JSON. I'd like to be able to test this library. This would require my testing code to make a call to a working server that returns JSON. Does anyone know of a server that is suitable for this purpose?

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-30T10:46:51.790

There is a great server located at [http://echo.jsontest.com](http://echo.jsontest.com) that does precisely this. You can even determine the output by changing the URI you call.

For example, the [http://echo.jsontest.com/key/value](http://echo.jsontest.com/key/value) URI returns this:

```
{"key": "value"} 
```

And the [http://echo.jsontest.com/key/value/otherkey/othervalue](http://echo.jsontest.com/key/value/otherkey/othervalue) URI returns:

```
{
   "otherkey": "othervalue",
   "key": "value"
} 
```

The server is also very fast, ideal for testing purposes.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T10:55:40.143

You can test your lib with facebook or twitter public api. For exemple : `http://search.twitter.com/search.json?q=blue%20angels` will return a json object.

Doc here : [https://dev.twitter.com/docs/api/1/get/search](https://dev.twitter.com/docs/api/1/get/search)

# xtend - 如何使用 xtend 的活动注释创建“字符串 []”字段？

> ID：15717654
> 
> 赞同：0
> 
> 时间：2013-03-30T10:47:16.013
> 
> 标签：xtend

我尝试使用 xtend 的活动注释，我想创建一个实时注释，它可以生成一个`String[]`字段来记录方法参数的名称。

```
@Target(ElementType::TYPE)
@Active(typeof(ParameterRecorderProcessor))
annotation ParameterRecorder {
}

class ParameterRecorderProcessor extends AbstractClassProcessor {

    override doTransform(MutableClassDeclaration annotatedClass, extension TransformationContext context) {

        var iii = 0;

        // add the public methods to the interface
        for (method : annotatedClass.declaredMethods) {
            if (method.visibility == Visibility::PUBLIC) {
                iii = iii + 1
                annotatedClass.addField(method.simpleName + "_" + iii) [
                    type = typeof(String[]).newTypeReference // String[] doesn't work

                    var s = ""
                    for (p : method.parameters) {
                        if(s.length > 0) s = s + ","
                        s = s + "\"" + p.simpleName + "\""
                    }
                    val ss = s

                    initializer = [
                        '''[«ss»]'''
                    ]
                ]
            }
        }
    }
} 
```

你可以看到我`typeof(String[]).newTypeReference`用来定义新创建字段的类型，但它不起作用。生成的 java 代码如下所示：

```
private Object index_1; 
```

它使用`Object`并且该`initializer`部分是空的。

如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T06:21:45.467

这对我来说似乎是一个错误。作为一种解决方法，您可能希望使用`typeof(String).newTypeReference.newArrayTypeReference`或更简洁`string.newArrayTypeReference`

# c# - C# mdf 数据库在程序启动时不更新

> ID：15717655
> 
> 赞同：0
> 
> 时间：2013-03-30T10:47:19.060
> 
> 标签：c#, mdf

我创建了简单的示例来更轻松地创建问题。所以在我的 c# 项目中，我创建了一个带有文章的 mdf 数据库。然后我在我的程序中连接数据库并从表格文章中读取值。它给了我结果，但不是最新的。如果我有一个结果，它会告诉我这个。然后我进入文章表添加一篇新文章并再次运行程序，在这种情况下程序只显示第一个。但是，如果我“构建解决方案”，它会找到所有这些。

我必须做什么？我希望，该程序将在启动时获得最新结果。

```
SqlConnection cn = new SqlConnection(@"Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\Database.mdf;Integrated Security=True;User Instance=True");

try
{
     cn.Open();

     string sqlQuery = "SELECT * FROM Articles";
     SqlCommand sqlCommand = new SqlCommand(sqlQuery, cn);
     SqlDataReader sqlDataRead = sqlCommand.ExecuteReader();

     while (sqlDataRead.Read())
     {
         MessageBox.Show(Convert.ToString(sqlDataRead["ArticleLabel"]));
     }

     sqlDataRead.Close();
     sqlDataRead.Dispose();
     sqlCommand.Cancel();

     cn.Close();
 }
 catch (Exception) { MessageBox.Show("Database error!"); Application.Exit(); } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T10:52:35.247

如果您的 MDF 文件的属性`Copy To Output Directory`设置为`Copy Always`，那么每次构建应用程序时，都会将数据库文件的新副本从项目目录复制到输出目录（`BIN\DEBUG`或`BIN\RELEASE`）。
当然，这会破坏您在之前的程序运行中所做的任何更改

将属性更改为`Copy if Newer`

此外，不要被您在服务器管理器 Windows 中看到的内容所迷惑。那里的连接不能指向输出目录中的数据库，而是指向项目目录中您不写任何东西的数据库。

# c# - 代理对象来模拟即将创建的数据库

> ID：15717662
> 
> 赞同：0
> 
> 时间：2013-03-30T10:48:12.913
> 
> 标签：c#, oop, data-binding

比方说，我有一个包含“小部件”的数据库。例如，小部件具有长度和宽度等属性。用于创建 wdigets 的原始低级 API 是一团糟，所以我正在编写一组更高级别的函数来让调用者更轻松。数据库很奇怪，我无法很好地控制小部件对象的创建时间。具体来说，直到处理的后期阶段，在某些其他事情首先发生之后，才能创建它。但我希望我的调用者*认为*小部件对象已在较早阶段创建，以便他们可以从一开始就获取/设置其属性。

因此，我实现了一个调用者可以使用的“ProxyWidget”对象。它有 private_Length 和 private_Width 等私有字段，可以存储所需的值。然后，它还具有我的调用者可以访问的公共属性 Length 和 Width。如果调用者告诉我设置 Width 属性的值，逻辑是：

*   如果对应的widget对象已经存在于数据库中，则设置其Width属性
*   如果没有，请将给定的宽度值存储在 private_Width 字段中以供以后使用。

在稍后的某个阶段，当我确定已在数据库中创建了小部件对象时，我会复制所有值：从 private_Width 复制到数据库 Width 字段，依此类推（不幸的是，一次只有一个字段/属性） .

这适用于一种类型的小部件。但是我有大约 50 种类型，每种类型都有大约 20 个不同的字段/属性，这会导致无法维护的混乱。我想知道是否有更聪明的方法。也许我可以使用反射来创建“代理”对象并以通用方式复制字段/属性数据，而不是编写大量重复代码？以某种方式分解出通用代码？我可以从“数据绑定”模式中学到什么吗？我是一名数学家，而不是程序员，我有一种不安的感觉，即我目前的方法简直是愚蠢的。我的代码在 C# 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T11:12:27.390

首先，根据我的经验，手动编写数据访问层*可能会*感觉像很多重复性工作（放置 ORM，例如 NHibernate 或实体框架，*可能会*在一定程度上缓解这个问题），并且更新遗留数据访问层*非常*糟糕工作，特别是当它由许多部分组成时。

您的问题中有些事情不清楚，但我想仍然可以给出高层次的答案。这些是为了给你一些想法：

*   您可以将其构建`ProxyWidget`为`Widget`（或调用现有低级 API 中的任何小部件类）的替代实现，或者您可以“在上面”实现它，或者作为“包装器”来实现，`Widget`. 这就是[适配器设计模式](http://en.wikipedia.org/wiki/Adapter_pattern "维基百科文章")。

    ```
    public sealed class ExistingTerribleWidget { … }

    public sealed class ShinyWidget // this is the wrapper that sits on top of the above
    {
        public ShinyWidget(ExistingTerribleWidget underlying) { … }
        private ExistingTerribleWidget underlying;
        … // perform all real work by delegating to `underlying` as appropriate  
    } 
    ```

    我建议（至少在仍有代码使用现有低级 API 的情况下）您使用这种模式而不是创建一个完全独立的`Widget`实现，因为如果数据库模式发生更改，您将不得不更新两个不同的 API . 如果您将新`EasyWidget`类构建为现有 API 之上的包装器，则它可能保持不变，只需更新底层实现。

*   您描述`ProxyWidget`了两个功能（1）允许修改已经持久化的小部件；(2) 新小部件的缓冲区，稍后将添加到数据库中。

    如果您有一种通用的基本类型和两个子类，您*或许*可以简化您的设计：一种用于尚未持久化的新小部件，另一种用于已持久化的小部件。后一种子类型可能有一个额外的数据库`ID`属性，以便可以在数据库中识别、加载、修改和更新现有的小部件：

    ```
    interface IWidget { /* define all the properties required for a widget */ }

    interface IWidgetTemplate : IWidget
    {
        IPersistedWidget Create();
        bool TryLoadFrom(IWidgetRepository repository, out IPersistedWidget matching);
    }

    interface IPersistedWidget : IWidget
    {
        Guid Id { get; }
        void SaveChanges();
    } 
    ```

    这是[Builder 设计模式](http://en.wikipedia.org/wiki/Builder_pattern)的一个例子。

*   如果您需要为许多类（例如，您的 50 多种数据库对象类型）编写类似的代码，您可以考虑使用[T4 文本模板](http://msdn.microsoft.com/en-us/library/vstudio/bb126445.aspx)。这只会减少编写代码的重复性；但是你仍然需要在某个地方定义你的 50 多个对象。

# pdf - 使用 ghostscript 从 postscript 文件中创建仅包含图像且没有文本的 tiff

> ID：15717663
> 
> 赞同：2
> 
> 时间：2013-03-30T10:48:16.707
> 
> 标签：pdf, ghostscript, postscript

是否可以从 postscript 文件（从具有可读文本和图像的 pdf 文档创建）创建 tiff 文件到没有文本而只有图像的 tiff 文件？

[有一种方法](https://stackoverflow.com/questions/6437564/create-a-tiff-with-only-text-and-no-images-from-a-postscript-file-with-ghostscri/)可以创建没有图像的 tiff，但我不知道如何在我的任务中使用这种方法。我需要它从 postscript 文件生成两个图像 -[第一个](http://dl.dropbox.com/u/16751380/1.jpg)仅包含图像，[第二个](http://dl.dropbox.com/u/16751380/1.png)仅包含文本。

由于文本被绘制在图像的顶部，因此简单的剪辑将无法完成这项工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T17:58:21.153

`show`您可以通过将运算符重新定义为无操作来破解文本。`%%Page`在注释行（页面代码真正开始的地方）之后插入它。

```
/show{pop}def
/ashow{3{pop}repeat}def
/widthshow{4{pop}repeat}def
/awidthshow{6{pop}repeat}def
/kshow{2{pop}repeat}def

/xshow{2{pop}repeat}def
/xyshow{2{pop}repeat}def
/yshow{2{pop}repeat}def
/glyphshow{pop}def
/cshow{2{pop}repeat}def 
```

这将禁止所有文本绘图运算符。*编辑：现在包括 2 级和 3 级操作员。*

如果您尝试选择性地抑制不同类型的元素，您可能只想重新定义其中一些运算符。您可以在行首添加`%`以*注释掉*代码行，保持完整列表不变（以备将来使用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-19T03:37:09.897

另一种选择性地抑制 ps 文件中元素的方法是使用强大的剪辑机制。

```
144 288 72 72 rectclip % clip to a 1"x1" square 2" from the left, 4" from the bottom 
```

Clip 适用于任意路径。因此，您甚至可以以连接点的方式将点串在一起，以获得套索剪辑的效果。如果您将图像打印出来并跟踪网格以轻松绘制轨迹点，这可能是最简单的。

```
100 100 moveto
200 200 lineto
300 100 lineto
500 500 lineto
200 700 lineto
closepath clip  % clip to a non-rectangular convex polygon 
```

Clipping will suppress all drawing operations that fall outside of the clippath while the clipping path is in effect.

# java - Android - 片段视图在 onCreateView 之外获得 NULL

> ID：15717667
> 
> 赞同：1
> 
> 时间：2013-03-30T10:48:48.550
> 
> 标签：java, android, android-activity, null, fragment

我有一个片段，视图存储在 onCreateView 的类变量中：

```
 private FrameLayout mView;
    private TextView countdown;

    public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle bdl) {
            mView = (FrameLayout)inflater.inflate(R.layout.vakit_fragment, container, false);
            countdown = (TextView) mView.findViewById(R.id.countdown);
    ...
            return mView;

    } 
```

两者都是非 Null 并且不会在我的代码中的任何地方进行修改。

稍后从 Main Activity 调用它：

```
 MainFragment frag = (MainFragment) mAdapter.getItem(mPager.getCurrentItem());
         if(frag!=null) {
         frag.onSecond();
         } 
```

在片段中：

```
protected void onSecond(){
    String left=times.getLeft();

    if(countdown!=null)     
        countdown.setText(left);

} 
```

在 onSecond 中，mView 和 countdown 都是 NULL，为什么？我无法解释。

蛋氨酸

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T10:53:57.363

我认为您在 adapter.getItem() 方法中创建了 Fragments 的另一个实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-07T20:13:52.380

`onCreateView`仅在片段绘制 UI 时调用。在这种情况下，`onSecond`之前调用过`onCreateView`，所以`mView`还没有被夸大，这就是为什么它为空。您可以通过将`onSecond`逻辑放入`onCreateView`.

# c - 基于这个严格的例子，如何在 C 编程语言中将字符串转换为整数？

> ID：15717672
> 
> 赞同：-1
> 
> 时间：2013-03-30T10:49:22.010
> 
> 标签：c, integer

例子：

```
// variable fixed
Char specialstring[PATH_MAX];
int integernumber;
int xx = 1 ; 
int yy = 1 ; 
strncopy( specialstring, "1369", ... bla); 

// here we go !! help there below please
integernumber=atoi(specialstring);
mvprintw( yy , xx , "%d" , integernumber ); 
```

请帮助我将特殊字符串转换为整数？

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T11:10:19.663

在您的代码中，您有两个错误：

**1)** `strncopy`不是您想要的功能`strncpy`。它的手册页： [char *strncpy(char *restrict s1, const char *restrict s2, size_t n);](http://pubs.opengroup.org/onlinepubs/009695399/functions/strncpy.html) 这`s1`是目标字符串和`s2`源字符串，`n`是您要从源复制的字符数。

如此正确：

```
strncopy( specialstring, "1369", ... bla); 
     ^                            ^ should be `n` num of chars you wants to 
    strncpy                         copy in `specialstring` 
```

进入

```
 strncpy( specialstring, "1369", 4); 
```

**2）**在声明中`specialstring`， `Char`是错误的，你应该写小`c`

```
Char specialstring[PATH_MAX];
^ small letter

char  specialstring[PATH_MAX]; 
```

**3)** `atoi()` 是正确的函数，你必须将字符串转换为 int，如果你想在没有转换的情况下进行转换，`atoi`可以使用`sscanf()`如下函数：

```
sscanf(specialstring,"%d", &integernumber); 
```

查看此：[**工作代码**](http://codepad.org/cHjItkJC)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-30T11:08:59.173

您可以使用它来将字符串转换为 int 而不使用 atoi

```
int Convert(char * str)
{
    int result =0;
int len=strlen(str);
for(int i=0,j=len-1;i<len;i++,j--)
    {
    result += ((int)str[i] - 48)*pow(10,j);
    }

   return result;
} 
```

# sql - 根据多个条件从表中删除重复项并保留到其他表

> ID：15717674
> 
> 赞同：2
> 
> 时间：2013-03-30T10:49:54.650
> 
> 标签：sql, database, postgresql, duplicate-removal, postgresql-9.2

我有一个`taccounts`表，其中包含`account_id(PK)`, `login_name`, `password`,等列`last_login`。现在我必须根据新的业务逻辑删除一些重复的条目。因此，重复帐户将具有相同`email` **或**相同 ( `login_name`& `password`)。必须保留最新登录的帐户。

这是我的尝试（一些电子邮件值为空和空白）

```
DELETE
FROM taccounts
WHERE email is not null and char_length(trim(both ' ' from email))>0 and last_login NOT IN
(
SELECT MAX(last_login)
FROM taccounts
WHERE email is not null and char_length(trim(both ' ' from email))>0 
GROUP BY lower(trim(both ' ' from email))) 
```

同样对于`login_name`和`password`

```
DELETE
FROM taccounts
WHERE last_login NOT IN
(
SELECT MAX(last_login)
FROM taccounts
GROUP BY login_name, password) 
```

**有没有更好的方法或任何方法来组合这两个单独的查询？**

还有一些其他表`account_id`作为外键。**如何为这些表更新此更改？**` 我正在使用 PostgreSQL 9.2.1

**编辑**：一些电子邮件值为空，其中一些为空白（''）。因此，如果两个帐户的登录名和密码不同，并且他们的电子邮件为空或空白，则必须将它们视为两个不同的帐户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T11:14:17.617

如果大部分行都被删除（大部分是重复的）并且表适合 RAM，请考虑以下路线：

1.  `SELECT`将幸存的行放入临时表中。
2.  将 FK 引用重新路由到幸存者
3.  `DELETE` *基表中的所有*行。
4.  幸存者`INSERT`。

### 1a。蒸馏幸存的行

```
CREATE TEMP TABLE tmp AS
SELECT DISTINCT ON (login_name, password) *
FROM  (
   SELECT DISTINCT ON (email) *
   FROM   taccounts
   ORDER  BY email, last_login DESC
   ) sub
ORDER  BY login_name, password, last_login DESC; 
```

关于`DISTINCT ON`：

*   [在每个 GROUP BY 组中选择第一行？](https://stackoverflow.com/questions/3800551/select-first-row-in-each-group-by-group/7630564#7630564)

要识别两个不同条件的重复项，请使用子查询一个接一个地应用这两个规则。第一步保留最新的帐户`last_login`，因此这是“可序列化的”。

检查结果并测试其合理性。

```
SELECT * FROM tmp; 
```

临时表会在会话结束时自动删除。在 pgAdmin（您似乎正在使用）中，只要编辑器窗口打开，会话就会存在。

### 1b。“重复”的更新定义的替代查询

```
SELECT *
FROM   taccounts t
WHERE  NOT EXISTS (
   SELECT  FROM taccounts t1
   WHERE  ( NULLIF(t1.email, '') = t.email
        OR (NULLIF(t1.login_name, ''), NULLIF(t1.password, '')) = (t.login_name, t.password))
   AND   (t1.last_login, t1.account_id) > (t.last_login, t.account_id)
   ); 
```

这不会将任何“重复”列中的字符串 ( ) 视为相同`NULL`或将空字符串 ( `''`) 视为相同。

行表达式`(t1.last_login, t1.account_id)`处理了两个受骗者可能共享相同的可能性`last_login`。在这种情况下选择较大的那个`account_id`- 这是独一无二的，因为它是 PK。

### 2a。如何识别所有传入的 FK

```
SELECT c.confrelid::regclass::text AS referenced_table
     , c.conname AS fk_name
     , pg_get_constraintdef(c.oid) AS fk_definition
FROM   pg_attribute a 
JOIN   pg_constraint c ON (c.conrelid, c.conkey[1]) = (a.attrelid, a.attnum)
WHERE  c.confrelid = 'taccounts'::regclass   -- (schema-qualified) table name
AND    c.contype  = 'f'
ORDER  BY 1, contype DESC; 
```

仅在外键的第一列上构建。更多关于：

*   [使用表、字段和模式名称查找引用的表名称](https://stackoverflow.com/questions/15618312/find-the-referenced-table-name-using-table-field-and-schema-name/15625024#15625024)

或者`Dependents`在选择表格后在 pgAdmin 的对象浏览器的右侧窗口中检查骑手`taccounts`。

### 2b。重新路由到新的主节点

如果您有表引用`taccounts`（*传入*的外键**）** `taccounts`，您将需要在删除欺骗*之前更新所有这些字段。*
将它们全部重新路由到新的主行：

```
UPDATE referencing_tbl r
SET    referencing_column = tmp.reference_column
FROM   tmp
JOIN   taccounts t1 USING (email)
WHERE  r.referencing_column = t1.referencing_column
AND    referencing_column IS DISTINCT FROM tmp.reference_column;

UPDATE referencing_tbl r
SET    referencing_column = tmp.reference_column
FROM   tmp
JOIN   taccounts t2 USING (login_name, password)
WHERE  r.referencing_column = t1.referencing_column
AND    referencing_column IS DISTINCT FROM tmp.reference_column; 
```

### 3\. & 4\. 杀戮

现在，不再引用骗子了。进入杀戮。

```
ALTER TABLE taccounts DISABLE TRIGGER ALL;
DELETE FROM taccounts;
VACUUM taccounts;
INSERT INTO taccounts
SELECT * FROM tmp;
ALTER TABLE taccounts ENABLE TRIGGER ALL; 
```

在操作期间禁用所有触发器。这避免了在操作期间检查引用完整性。重新激活触发器后，一切都会好起来的。我们处理了上面所有*传入*的FK。*传出*的 FK 保证是健全的，因为您**没有并发写入访问权限**，并且所有值之前都存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T13:17:39.827

除了 Erwin 的出色答案之外，在将旧键与新键相关联的中间链接表中创建通常很有用。

```
DROP SCHEMA tmp CASCADE;
CREATE SCHEMA tmp ;
SET search_path=tmp;
CREATE TABLE taccounts
        ( account_id SERIAL PRIMARY KEY
        , login_name varchar
        , email varchar
        , last_login TIMESTAMP
        );
    -- create some fake data
INSERT INTO taccounts(last_login)
SELECT gs FROM generate_series('2013-03-30 14:00:00' ,'2013-03-30 15:00:00' , '1min'::interval) gs
        ;
UPDATE taccounts
SET login_name = 'User_' || (account_id %10)::text
        , email = 'Joe' || (account_id %9)::text || '@somedomain.tld'
        ;

SELECT * FROM taccounts;

        --
        -- Create (temp) table linking old id <--> new id
        -- After inspection this table can be used as a source for the FK updates
        -- and for the final delete.
        --
CREATE TABLE update_ids AS
WITH pairs AS (
        SELECT one.account_id AS old_id
        , two.account_id AS new_id
        FROM taccounts one
        JOIN taccounts two ON two.last_login > one.last_login
                AND ( two.email = one.email OR two.login_name = one.login_name)
        )
SELECT old_id,new_id
FROM pairs pp
WHERE NOT EXISTS (
        SELECT * FROM pairs nx
        WHERE nx.old_id = pp.old_id
        AND nx.new_id > pp.new_id
        )
        ;

SELECT * FROM update_ids
        ;

UPDATE other_table_with_fk_to_taccounts dst
SET account_id. = ids.new_id
FROM update_ids ids
WHERE account_id. = ids.old_id
        ;
DELETE FROM taccounts del
WHERE EXISTS (
        SELECT * FROM update_ids ex
        WHERE ex.old_id = del.account_id
        );

SELECT * FROM taccounts; 
```

另一种实现相同目的的方法是向**表本身**添加一个带有指向首选键的指针的列，并将其用于更新和删除。

```
ALTER TABLE taccounts
        ADD COLUMN better_id INTEGER REFERENCES taccounts(account_id)
        ;

   -- find the *better* records for each record.
UPDATE taccounts dst
SET better_id = src.account_id
FROM taccounts src
WHERE src.login_name = dst.login_name
AND src.last_login > dst.last_login
AND src.email IS NOT NULL
AND NOT EXISTS (
        SELECT * FROM taccounts nx
        WHERE nx.login_name = dst.login_name
        AND nx.email IS NOT NULL
        AND nx.last_login > src.last_login
        );

    -- Find records that *do* have an email address
UPDATE taccounts dst
SET better_id = src.account_id
FROM taccounts src
WHERE src.login_name = dst.login_name
AND src.email IS NOT NULL
AND dst.email IS NULL
AND NOT EXISTS (
        SELECT * FROM taccounts nx
        WHERE nx.login_name = dst.login_name
        AND nx.email IS NOT NULL
        AND nx.last_login > src.last_login
        );

SELECT * FROM taccounts ORDER BY account_id;

UPDATE other_table_with_fk_to_taccounts dst
SET account_id = src.better_id
FROM update_ids src
WHERE dst.account_id = src.account_id
AND src.better_id IS NOT NULL
        ;

DELETE FROM taccounts del
WHERE EXISTS (
        SELECT * FROM taccounts ex
        WHERE ex.account_id = del.better_id
        );
SELECT * FROM taccounts ORDER BY account_id; 
```

# c# - 在c#中使用来自两个不同父窗口的子窗口

> ID：15717675
> 
> 赞同：0
> 
> 时间：2013-03-30T10:50:01.070
> 
> 标签：c#

我的问题涉及以下 3 种形式：

MainWindow.cs
SettingsWindow.cs
AuthenticationWindow.cs

设置窗口包含诸如“是否在启动期间询问密码”之类的信息。

我从设置窗口调用身份验证窗口以删除密码（设置密码时）。

我也在启动期间（设置密码时）调用身份验证窗口。

我的身份验证窗口使用静态变量与设置窗口交互（说明身份验证是否成功）。

但是，为了重用相同的代码（即在启动过程中调用相同的认证窗口），我无法告诉 MainWindow 认证是否成功。但是，我必须了解如何重用代码。

我的问题是：是否可以通知子窗口父窗口是谁？如果是，请提供示例代码...

希望我的问题很清楚。

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T11:20:26.933

```
ChildWindow c1=new ChildWindow();
c1.Owener=authenticationWindow;
c1.Show();  //or ShowDialog();

ChildWindow c2=new ChildWindow();
c1.Owener=anotherWindow;
c2.Show();  //or ShowDialog();

//to get the parent, use the property c.Owner
if(c.Owner is AuthenticationWindow)  //AuthenticationWindow is the type of authenticationWindow instance
{
 ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T11:22:43.570

我假设身份验证窗口与 ShowDialog() 一起使用，如下所示：

```
AuthenticationWindow auth = new AuthenticationWindow();
if (auth.ShowDialog(this) == DialogResult.Ok)
{
    // we know it was successful
} 
```

然后在`AuthenticationWindow`你取得成功后，你会打电话给：

```
 DialogResult = DialogResult.Ok;
       Close(); 
```

获得上面的反馈，或者表示它失败了

```
 DialogResult = DialogResult.Cancel;
       Close(); 
```

或者，您可以在 AuthenticationWindow 上设置一个属性：

```
class AuthenticationWindow : Form
{
     public bool Success { get; set;}

} 
```

并在 AuthenticationWindow 代码中适当地设置 Success 的值。

* * *

最后，如果您希望立即将反馈发送到您的其他窗口，请考虑实施一个事件：

```
class AuthenticationWindow : Form
{
     public event Action<bool> SignalOutcome;

     private OnSignalOutcome(bool result)
     {
          Action<bool> handler = SignalOutCome;
          if (handler != null) handler(result);
     }
} 
```

然后，您将必须订阅调用身份验证窗口的该事件：

```
AuthenticationWindow auth = new AuthenticationWindow();
auth.SignalOutcome += (outcome) => { /* do something with outcome here */ };

auth.ShowDialog(this); 
```

# dart - dart 如何创建、监听和发出自定义事件？

> ID：15717681
> 
> 赞同：17
> 
> 时间：2013-03-30T10:50:44.433
> 
> 标签：dart

我有这样的课：

```
class BaseModel {
  Map objects;

  // define constructor here

  fetch() {
    // fetch json from server and then load it to objects
    // emits an event here
  }

} 
```

就像`backbonejs`我想`change`在我调用时发出一个事件并在我的视图上`fetch`为事件创建一个监听器。`change`

但是通过阅读文档，我不知道从哪里开始，因为有很多指向事件的东西，比如`Event` `Events` `EventSource`等等。

各位大神能给个提示吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-31T04:00:01.260

我假设您想要发出不需要`dart:html`库存在的事件。

您可以使用 Streams API 公开事件流以供其他人侦听和处理。这是一个例子：

```
import 'dart:async';

class BaseModel {
  Map objects;
  StreamController fetchDoneController = new StreamController.broadcast();

  // define constructor here

  fetch() {
    // fetch json from server and then load it to objects
    // emits an event here
    fetchDoneController.add("all done"); // send an arbitrary event
  }

  Stream get fetchDone => fetchDoneController.stream;

} 
```

然后，在您的应用程序中：

```
main() {
  var model = new BaseModel();
  model.fetchDone.listen((_) => doCoolStuff(model));
} 
```

使用本机 Streams API 很好，因为这意味着您不需要浏览器来测试您的应用程序。

If you are required to emit a custom HTML event, you can see this answer: [https://stackoverflow.com/a/13902121/123471](https://stackoverflow.com/a/13902121/123471)

# php - PHP ORM如何在构造函数中设置id

> ID：15717685
> 
> 赞同：1
> 
> 时间：2013-03-30T10:51:07.497
> 
> 标签：php, object, orm, model, constructor

我对以下代码有一个基本问题：

```
<?php

interface UserInterface
{
    public function getId();
    public function getName();
}

class User implements UserInterface
{
    private $_id;
    private $_name;

    public function __construct($id, $name)
    {
        $this->_id = $id;
        $this->_name = $name;
    }

    public function getId()
    {
        return $this->_id;
    }

    public function getName()
    {
        return $this->_name;
    }
}

class UserMapper
{
    public function insert(UserInterface $user)
    {
        ... insertion code
    }
}

?> 
```

UserMapper 的插入方法需要一个 UserInterface 对象。所以我创建了一个：

```
<?php

$user = new User(1, "Chris");
$userMapper = new UserMapper();
$userMapper->insert($user);

?> 
```

我的问题是，用户的 id 是插入对象后来自数据库的自动增量值。但是对象的构造函数迫使我定义一个 id，因为没有 id 的对象是不完整的。如何解决这个普遍问题？

将 id 作为第二个参数传递给带有默认值的构造函数不是一个选项，因为在我的理解中，如果没有 id，对象将是不完整的。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T11:01:23.560

你可以通过`null`：

```
$user = new User(null, "Chris"); 
```

$_id 没有检查一个有效的整数，`null`你知道这个模型还没有有效的 ID。

# flash - ffmpeg：简单的 RTMP 流

> ID：15717689
> 
> 赞同：1
> 
> 时间：2013-03-30T10:51:26.833
> 
> 标签：flash, ffmpeg, rtmp, http-live-streaming, transcoding

我正在尝试使用 ffmpeg 启动一个 rtmp 转码器服务器；接收 udp MPEG-TS 流作为输入，对其进行转码；并生成一个 rtmp 输出到一个 URL，用户可以访问该 URL 以接收和播放 rtmp 流。所有这些都应在 LAN 中执行，并且所有用户都可以访问输出。

1) 首先我不知道 URL 应该指向哪里。指定系统的IP和一些可选端口是否足够？程序是否必须在该端口上侦听？

2) 如何在 URL 上播放流？

我使用 IP=10.1.1.229 的 linux ubuntu 机器，我想在这个 URL 上转码多播流：`udp://@224.10.1.1:2001`.

这是用于对输入流进行转码并生成 rtmp url "rtmp://10.1.1.229:2020" 的命令。

```
ffmpeg -y -f mpegts -i "udp://@224.10.1.1:2001" -re -vcodec libx264 -maxrate 700k -r 25 -s 640x360 -deinterlace -acodec libfaac -ab 64k -ac 1 -ar 44100 -f flv "rtmp://10.1.1.229:2020" 
```

这是我试图播放 rtmp 流的命令：

```
ffplay rtmp://10.1.1.229:2020 
```

任何指导都会有所帮助。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T08:02:32.573

我在您的命令中看到了一个错误：rtmp URL（在您的情况下是“rtmp://10.1.1.229:2020”）应该是流的完整路径，包括它的名称。我也在使用 FFmpeg 来完成类似的任务（将 RSTP 转码为 RTMP 并将其流式传输到 Wowza）。我的网址如下所示：

rtmp://[服务器IP]/livecam/desc

# android - Why my PreferenceScreen is showing white instead of the default black?

> ID：15717692
> 
> 赞同：1
> 
> 时间：2013-03-30T10:51:54.713
> 
> 标签：android, background, preferenceactivity

I am testing my app but when I choose settings my preferences screen shows White instead of the default black theme. Just with my app because any other app shows the right black theme in preference screen.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T11:20:30.127

```
<style name="PreferencesTheme">

    <item name="android:background">#000000</item>
</style> 
```

add the above code in value -> styles and then add

```
 <activity android:name=".Preferrence" android:theme="@android:style/Theme.Black"></activity> 
```

in your manifest file it will solve your problem :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T11:06:00.090

I guess you using the Light Theme in your AndroidManifest.xml. For those PreferenceActivity set the Theme like this:

```
 <activity
        android:name="PreferenceActivity"
        android:theme="@android:style/Theme.Holo" >
    </activity> 
```

# c# - 将 XML 片段反序列化为由 xsd.exe 生成的类

> ID：15717693
> 
> 赞同：0
> 
> 时间：2013-03-30T10:52:04.610
> 
> 标签：c#, .net, xml, xsd, xsd.exe

我有一个 xml 文件，我想读取它，然后解释并转换为从 xsd 工具生成的各个类。以下是我正在尝试的步骤：

1.  我创建了一个 XSD 文件。
2.  将相应的 xsd 文件转换为相应的类集。
3.  我通过同一组类（从步骤 2 开始）和 xmlserializer 制作了一些 xml 文件。
4.  现在我正在从那些 xml 文件中读取，我不想将它转换为类（从第 2 步生成）

我正在粘贴到目前为止工作的代码，在反序列化时似乎出现异常，*{“XML 文档中存在错误 (0, 0)。”}*

```
 var doc = XDocument.Load(filePath);

        var query2 = from b in doc.Root.Descendants()
                     select b;

        foreach (var item in query2)
        {
            switch (item.Name.LocalName)
            {
                case "SomeStringValue": 
                    XmlSerializer srz = new XmlSerializer(typeof(SomeClassGeneratedfromXSD));
                    var writer=item.CreateReader();
                    parameterFromFile.SomeProperty = (SomeClassGeneratedfromXSD)srz.Deserialize(writer);
                    //srz.Deserialize(item);
                    break; 
```

我正在粘贴我的 xsd 的片段：

```
<xs:complexType name="Parameters">
<xs:all>
  <xs:element name="A">
    <xs:complexType>
      <xs:simpleContent>
        <xs:extension base="mstns:Restricted8CharString">
          <xs:attribute name="Caption" use="required" fixed="Caption for A">
            <xs:simpleType>
              <xs:restriction base="xs:string"></xs:restriction>
            </xs:simpleType>
          </xs:attribute>
          <xs:attribute name="ActionWhenMaxReached" use="required">
            <xs:simpleType>
              <xs:restriction base="xs:short">
                <xs:pattern value="[1-3]"></xs:pattern>
              </xs:restriction>
            </xs:simpleType>
          </xs:attribute>
          <xs:attribute name="Expression" type="xs:string" default="0" />
        </xs:extension>
      </xs:simpleContent>
    </xs:complexType>
  </xs:element>
  <xs:element name="B">
    <xs:complexType>
      <xs:simpleContent>
        <xs:extension base="xs:short">
          <xs:attribute name="Caption" use="prohibited">
            <xs:simpleType>
              <xs:restriction base="xs:string"></xs:restriction>
            </xs:simpleType>
          </xs:attribute>
          <xs:attribute name="ActionWhenMaxReached" use="required">
            <xs:simpleType>
              <xs:restriction base="xs:short">
                <xs:pattern value="[1-3]"></xs:pattern>
              </xs:restriction>
            </xs:simpleType>
          </xs:attribute>
          <xs:attribute name="Expression" type="xs:string" default="0" />
        </xs:extension>
      </xs:simpleContent>
    </xs:complexType>
  </xs:element>
  </xs:all>
  </xs:complexType> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T11:09:29.143

您的结束标签不正确。它应该是：

```
</xs:complexType> 
```

并不是

```
</xs:complexType name="Parameters"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T05:38:44.817

经过努力，我找到了解决方案：

实际上我试图解析一个内部元素，这是不正确的；我已经有了 xsd 工具中的类，所以我可以简单地使用代码：

```
XmlSerializer serializer = new XmlSerializer(typeof(RootClass));
        using (TextReader reader = new StreamReader(filePath))
        {
            RootClass parameterFromFile = (RootClass)serializer.Deserialize(reader);
        } 
```

# java - More convenient way to find the max of 2+ numbers?

> ID：15717695
> 
> 赞同：6
> 
> 时间：2013-03-30T10:52:24.160
> 
> 标签：java, math

I want code that accepts more than 2 integers and prints out the biggest one. I used `Math.MAX` but the problem is that it accepts only 2 integers by default, and you can't print all the ints in it. So I had to make it like this:

```
int max = Math.max(a, Math.max(b, Math.max(c, Math.max(d, e)))); 
```

Is there a better method to do this?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-30T10:56:26.943

You could use [varargs](http://docs.oracle.com/javase/1.5.0/docs/guide/language/varargs.html):

```
public static Integer max(Integer... vals) {
    Integer ret = null;
    for (Integer val : vals) {
        if (ret == null || (val != null && val > ret)) {
            ret = val;
        }
    }
    return ret;
}

public static void main(String args[]) {
    System.out.println(max(1, 2, 3, 4, 0, -1));
} 
```

Alternatively:

```
public static int max(int first, int... rest) {
    int ret = first;
    for (int val : rest) {
        ret = Math.max(ret, val);
    }
    return ret;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T10:57:28.353

You can use a simple loop:

```
public Integer max(final Collection<Integer> ints) {
    Integer max = Integer.MIN_VALUE;
    for (Integer integer : ints) {
        max = Math.max(max, integer);
    }
    return max;
} 
```

# delphi - Delphi - 在 dataset.enablecontrols 上的 TDBGrid 内触发了什么事件

> ID：15717696
> 
> 赞同：1
> 
> 时间：2013-03-30T10:52:26.897
> 
> 标签：delphi, delphi-xe

我需要知道当数据集调用[enablecontrols](http://docwiki.embarcadero.com/Libraries/XE3/en/Data.DB.TDataSet.EnableControls)时 TDBGrid 中会发生什么。我知道数据集正在通知数据源，但我不知道在[OnDrawCell](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.DBGrids.TDBGrid.OnDrawColumnCell)事件之前在 dbgrid 组件上调用了什么。

从 db.pas 数据集正在调用

```
 if (FDisableState <> dsInactive) and (FState <> dsInactive) then
    DataEvent(FEnableEvent, 0); 
```

数据源如何通知 dbgrid 它需要显示多少列？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T14:18:17.637

数据源通过数据链接 ( `TDataLink`) 链接到数据感知控件。每个数据控件都会创建一个`DataLink`以响应和发送附加信号`DataSource`。

a 的 DataLink是在 中创建`DBGrid`的类型。`TGridDataLink``TCustomDBGrid.CreateDataLink`

这是之后的调用堆栈`TDataSet.EnableControls`：

*   `TDataSet.EnableControls`来电`TDataSet.DataEvent`，
*   `TDataSet.DataEvent`调用`FDataSources[I]).DataEvent`所有附加的数据源，
*   `TDataSource.DataEvent`调用`TDataSource.NotifyDataLinks`，调用`TDataSource.NotifyLinkTypes`，
*   `TDataSource.NotifyLinkTypes`调用`FDataLinks[I]).DataEvent`所有附加的数据链接，
*   `TDataLink.DataEvent`调用`TGridDataLink.DataSetChanged`或`TGridDataLink.LayoutChanged`，取决于之前发生的事情`EnableControls`被调用。对记录的编辑是数据集的更改；添加字段（网格中的列）是布局更改（除其他外），
*   `TGridDataLink`呼叫`FGrid.DataChanged`或`FGrid.LayoutChanged`,
*   `TCustomDBGrid.LayoutChanged`最终调用`TCustomDBGrid.BeginLayout`，
*   `TCustomDBGrid.BeginLayout`将列（计数、标题等）的更新委托给`Columns`属性并调用`Columns.BeginUpdate`.

`OnDrawCell`发生在未来某个时间，当所有布局更改完成时。

# c# - 如何在 C# 中同时检测多个按键？（鼓应用）

> ID：15717697
> 
> 赞同：2
> 
> 时间：2013-03-30T10:52:33.367
> 
> 标签：c#, keyboard

我正在制作一个鼓应用程序，当我尝试同时按下两个键（例如低音鼓和镲片）时，它不起作用。顺便说一句，我对鼓件使用窗口形式和按键。

我怎么能在 C# 中这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T11:24:44.313

由于 KeyEventArgs 仅向您的代码提供 Keys-Enumeration 类型的值，因此无法通过此值获取多个键。Keys-Enumeration 不适用于从[enum](http://msdn.microsoft.com/en-us/library/system.windows.forms.keys.aspx)中取出键所需的按位操作。要获取多个密钥，您必须通过 WinApi 查找，如其他线程中所述并在评论中链接。

# entity-framework - EF 查询的选择语句中的自定义扩展函数

> ID：15717702
> 
> 赞同：1
> 
> 时间：2013-03-30T10:52:56.930
> 
> 标签：entity-framework

在我们的数据库中，我们有一个如下所示的表，我们已将其映射到 Database-First EF 模型中的实体：

```
CREATE TABLE Texts(
  Id integer,
  Eng nvarchar(max),
  Nob nvarchar(max),
  ...
) 
```

该表中的一行可能非常大，因此我们只想获取用户所做的语言选择当前需要的列的值。

我的想法是有一个扩展功能来为我做这件事，但我不知道也找不到任何方法来编写它（如果可能的话）。我尝试了一些变体，但（显然）它失败了，但有一个例外，指出它不能被翻译成商店表达式。所以我有点卡住了。

这个函数的使用思路是：

```
context.Codes.Where(row => row.Id == 234).Select(row => new {
  row.Id,
  Text = Text.GetLocalizedText("Eng") // This should generate an SQL that only retrieves the Eng 
                                      // column of the Text navigation property (which is 
                                      // connected to the Texts table.
}); 
```

这应该会生成一个与此类似的选择（与上面的示例类似，但直接使用 Text.Eng 除外）：

```
SELECT 
[Extent1].[Id] AS [Id], 
[Extent2].[Eng] AS [Eng]
FROM  [dbo].[Codes] AS [Extent1]
INNER JOIN [dbo].[Texts] AS [Extent2] ON [Extent1].[TextId] = [Extent2].[Id]
WHERE 234 = [Extent1].[Id] 
```

有谁知道这是否可行，是否可行；怎么写？如果不可能，是否有人对如何在不检索包含所有列的整个 Text 实体的情况下解决此问题有任何其他想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T15:26:52.407

的扩展方法`IQueryable<Code>`可以工作，但它不像您可能想要的那样灵活，因为您需要为每种要执行的投影类型提供扩展，并且您不能使用匿名结果对象。

这个想法基本上是这样的：

您需要一个可以投影到的命名类（而不是匿名类）：

```
public class CodeData
{
    public int Id { get; set; }
    public string LocalizedText { get; set; }
} 
```

然后是带有语言参数的扩展方法：

```
public static class CustomExtensions
{
    public static IQueryable<CodeData> SelectCodeData(
        this IQueryable<Code> query, string language)
    {
        switch (language)
        {
            case "Eng":
                return query.Select(code => new CodeData
                {
                    Id = code.Id,
                    LocalizedText = code.Text.Eng
                });

            case "Nob":
                return query.Select(code => new CodeData
                {
                    Id = code.Id,
                    LocalizedText = code.Text.Nob
                });
            //... more languages
        }

        throw new ArgumentException("Invalid language code.", "language");
    }
} 
```

然后可以这样调用：

```
using CustomExtensions;

// ...

IQueryable<CodeData> codeDataQuery = context.Codes
    .Where(row => row.Id == 234)
    .SelectCodeData("Eng"); 
```

# android-intent - 如何摆脱这种情况：空指针异常

> ID：15717703
> 
> 赞同：0
> 
> 时间：2013-03-30T10:53:13.917
> 
> 标签：android-intent

检查以下日志并建议可能更改提供的代码在 AddContactActivity 我想发回 - 联系人姓名而不是使用 setresult(inent , 1) 的意图

但它显示 NullPointerException（**检查错误日志**）

错误日志显示：

```
 03-30 10:16:17.069: E/AndroidRuntime(337): FATAL EXCEPTION: main
    03-30 10:16:17.069: E/AndroidRuntime(337): java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=1, result=1, data=Intent { (has extras) }} to activity {com.main.listintent/com.main.listintent.ContactsActivity}: java.lang.NullPointerException
    03-30 10:16:17.069: E/AndroidRuntime(337):  at android.app.ActivityThread.deliverResults(ActivityThread.java:2532)
    03-30 10:16:17.069: E/AndroidRuntime(337):  at android.app.ActivityThread.handleSendResult(ActivityThread.java:2574)
    03-30 10:16:17.069: E/AndroidRuntime(337):  at android.app.ActivityThread.access$2000(ActivityThread.java:117)
    03-30 10:16:17.069: E/AndroidRuntime(337):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:961)
    03-30 10:16:17.069: E/AndroidRuntime(337):  at android.os.Handler.dispatchMessage(Handler.java:99)
    03-30 10:16:17.069: E/AndroidRuntime(337):  at android.os.Looper.loop(Looper.java:123)
    03-30 10:16:17.069: E/AndroidRuntime(337):  at android.app.ActivityThread.main(ActivityThread.java:3683)
    03-30 10:16:17.069: E/AndroidRuntime(337):  at java.lang.reflect.Method.invokeNative(Native Method)
    03-30 10:16:17.069: E/AndroidRuntime(337):  at java.lang.reflect.Method.invoke(Method.java:507)
    03-30 10:16:17.069: E/AndroidRuntime(337):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
    03-30 10:16:17.069: E/AndroidRuntime(337):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
    03-30 10:16:17.069: E/AndroidRuntime(337):  at dalvik.system.NativeStart.main(Native Method)
    03-30 10:16:17.069: E/AndroidRuntime(337): Caused by: java.lang.NullPointerException
    03-30 10:16:17.069: E/AndroidRuntime(337):  at com.main.listintent.ContactsActivity.onActivityResult(ContactsActivity.java:43)
    03-30 10:16:17.069: E/AndroidRuntime(337):  at android.app.Activity.dispatchActivityResult(Activity.java:3908)
    03-30 10:16:17.069: E/AndroidRuntime(337):  at android.app.ActivityThread.deliverResults(ActivityThread.java:2528)
    03-30 10:16:17.069: E/AndroidRuntime(337):  ... 11 more 
```

布局主：

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="fill_parent"
        android:layout_height="match_parent"
        tools:context=".MainActivity" >

    </RelativeLayout> 
```

布局联系人：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <LinearLayout
        android:id="@+id/contacts_title_linear_layout"
        android:layout_width="fill_parent"
        android:layout_height="45dp"
        android:background="@android:color/darker_gray" >

        <TextView
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_weight="1"
            android:paddingLeft="10dp"
            android:text="@string/contacts_label"
            android:textColor="@android:color/black"
            android:textSize="20sp"
            android:textStyle="bold" />

        <Button
            android:id="@+id/add_contacts_cancel_button"
            style="?android:attr/buttonStyleSmall"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:text="@string/new_button"
            android:textStyle="bold" />

    </LinearLayout>

    <ListView
        android:id="@+id/contacts_list"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/contacts_title_linear_layout" >

    </ListView>

</RelativeLayout> 
```

布局添加联系人：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/LinearLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@android:color/white"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/add_contacts_title_layout"
        android:layout_width="match_parent"
        android:layout_height="45dp"
        android:background="@android:color/darker_gray" >

        <TextView
            android:id="@+id/add_contacts_title_label"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:text="@string/add_contact_label"
            android:textColor="@android:color/black"
            android:textSize="20sp"
            android:textStyle="bold" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/add_contacts_details_layout"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:paddingLeft="10dp"
            android:paddingTop="10dp"
            android:text="@string/add_contacts_contact_name"
            android:textColor="@android:color/black"
            android:textSize="18sp" />

        <EditText
            android:id="@+id/add_contacts_name_text"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginLeft="10dp"
            android:layout_marginRight="10dp"
            android:ems="10"
            android:inputType="textPersonName" />

        <TextView
            android:id="@+id/textView2"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:paddingLeft="10dp"
            android:paddingTop="6dp"
            android:text="@string/add_contacts_no"
            android:textColor="@android:color/black"
            android:textSize="18sp" />

        <EditText
            android:id="@+id/add_contacts_no_text"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginLeft="10dp"
            android:layout_marginRight="10dp"
            android:ems="10"
            android:inputType="number" />

    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center" >

        <Button
            android:id="@+id/add_contacts_cancel_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/cancel_button"
            android:textSize="18sp"
            android:width="100dp" />

        <Button
            android:id="@+id/add_contacts_add_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/add_button"
            android:textSize="18sp"
            android:width="100dp" />

    </LinearLayout>

</LinearLayout> 
```

MainActivity.java

```
 package com.main.listintent;

    import android.os.Bundle;
    import android.app.Activity;
    import android.content.Intent;

    public class MainActivity extends Activity {

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            Intent intentcontacts=new Intent(this, ContactsActivity.class);
            startActivity(intentcontacts);
        }
    } 
```

ContactsActivity.java

```
 package com.main.listintent;

    import java.util.ArrayList;

    import android.app.Activity;
    import android.content.Intent;
    import android.os.Bundle;
    import android.view.View;
    import android.view.View.OnClickListener;
    import android.widget.ArrayAdapter;
    import android.widget.Button;
    import android.widget.ListView;

    public class ContactsActivity extends Activity implements OnClickListener{

        ArrayList<String> arr;
        Button btnnew;
        ListView lvcontacts;

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            // TODO Auto-generated method stub
            super.onCreate(savedInstanceState);
            setContentView(R.layout.layout_contacts);
            btnnew=(Button)findViewById(R.id.add_contacts_cancel_button);
            lvcontacts=(ListView)findViewById(R.id.contacts_list);
            btnnew.setOnClickListener(this);
        }

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            Intent intentaddcontact=new Intent(this, AddContactActivity.class);
            startActivityForResult(intentaddcontact, 1);
        }

        @Override
        protected void onActivityResult(int requestCode, int resultCode, Intent data) {
            // TODO Auto-generated method stub
            super.onActivityResult(requestCode, resultCode, data);
            if(requestCode==1 && resultCode==1){
                Bundle bundle=data.getExtras();
                arr.add(bundle.getString("contactname"));
                ArrayAdapter<String>adp=new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, arr);
                lvcontacts.setAdapter(adp);
            }
        }

    } 
```

AddContactActivity.java：

```
 package com.main.listintent;

    import android.app.Activity;
    import android.content.Intent;
    import android.os.Bundle;
    import android.view.View;
    import android.view.View.OnClickListener;
    import android.widget.Button;
    import android.widget.EditText;

    public class AddContactActivity extends Activity implements OnClickListener{

        Button btncancel,btnadd;
        EditText txtcontactname,txtcontactno;

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            // TODO Auto-generated method stub
            super.onCreate(savedInstanceState);
            setContentView(R.layout.layout_add_contacts);
            txtcontactname=(EditText)findViewById(R.id.add_contacts_name_text);
            txtcontactno=(EditText)findViewById(R.id.add_contacts_no_text);
            btnadd=(Button)findViewById(R.id.add_contacts_add_button);
            btncancel=(Button)findViewById(R.id.add_contacts_cancel_button);
            btnadd.setOnClickListener(this);
            btncancel.setOnClickListener(this);
        }

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            if(v==btnadd){
                Bundle bundle=new Bundle();
                bundle.putString("contactname", txtcontactname.getText().toString());
                bundle.putString("contactno", txtcontactno.getText().toString());
                Intent intentcontacts=new Intent();
                intentcontacts.putExtras(bundle);
                setResult(1, intentcontacts);
                finish();
            }
            else if(v==btncancel){
                setResult(0);
                finish();
            }
        }

    } 
```

安卓清单

```
 <?xml version="1.0" encoding="utf-8"?>
    <manifest xmlns:android="http://schemas.android.com/apk/res/android"
        package="com.main.listintent"
        android:versionCode="1"
        android:versionName="1.0" >

        <uses-sdk
            android:minSdkVersion="10"
            android:targetSdkVersion="10" />

        <application
            android:allowBackup="true"
            android:icon="@drawable/ic_launcher"
            android:label="@string/app_name"
            android:theme="@android:style/Theme.NoTitleBar" >
            <activity
                android:name="com.main.listintent.MainActivity"
                android:label="@string/app_name" android:theme="@android:style/Theme.NoTitleBar">
                <intent-filter>
                    <action android:name="android.intent.action.MAIN" />

                    <category android:name="android.intent.category.LAUNCHER" />
                </intent-filter>
            </activity>
            <activity android:name="ContactsActivity">
            </activity>
            <activity android:name="AddContactActivity" android:windowSoftInputMode="adjustResize">
            </activity>
        </application>

    </manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T11:04:24.747

这意味着 Intent 接收器在其 onActivityResult() 中抛出了异常。我认为数据为空。应该使用空检查

```
if (data!=null)
{
Bundle bundle=data.getExtras();
arr.add(bundle.getString("contactname"));
ArrayAdapter<String>adp=new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, arr);
lvcontacts.setAdapter(adp);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T11:11:31.060

你必须初始化你的数组列表（arr）

```
 protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        // TODO Auto-generated method stub
        super.onActivityResult(requestCode, resultCode, data);
        if(requestCode==1 && resultCode==1){
          arr=new ArrayList<String>();
            Bundle bundle=data.getExtras();

            arr.add(bundle.getString("contactname"));
            ArrayAdapter<String>adp=new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, arr);
            lvcontacts.setAdapter(adp);
        }
    } 
```

# c++ - 等待recv中的数据时关闭线程

> ID：15717705
> 
> 赞同：0
> 
> 时间：2013-03-30T10:53:27.243
> 
> 标签：c++, c, multithreading, recv

我有一个服务器，它为每个客户端创建一个线程。这是线程函数，我的程序在其中等待发送数据。如果 5 秒内没有数据发送，我需要以某种方式关闭此线程。我尝试使用该信号/警报组合，并且以某种方式工作，但是线程函数的其余部分正在继续打印错误，因为 sClient(socket) 已关闭。我怎样才能使这项工作，或者可能是其他解决方案？

```
void time_out() {
  char r = "-1";
  printf("Time out");
  send(sClient, &r, 10, 0);
  close(sClient);
}

void* thread(void *arg) {
  sClient = (int)arg;
  int size;

  char* buffer = (char*)malloc(300);

  signal(SIGALRM, time_out);
  alarm(5);

  if (recv(sClient, (char*)&size, sizeof(int), 0) < 0) {
    printf("Error when getting length \n");
  }

....
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T11:53:15.430

听起来您应该打开线程，等待 5 秒钟，然后检查 sClient 是否有数据。如果没有数据，则可以立即关闭线程。否则，如果有数据，您可以调用recv 来实际获取数据。

为此，您可以使用`select`超时调用来检查套接字上的新数据。

（请参阅“[套接字超时：它起作用，但为什么以及如何，主要是 select() 函数？](https://stackoverflow.com/questions/6932512/c-socket-timeout-it-works-but-why-and-how-mainly-the-select-function) ”了解`select`超时如何起作用。）

# delphi - 选择工作表excel

> ID：15717706
> 
> 赞同：3
> 
> 时间：2013-03-30T10:53:51.033
> 
> 标签：delphi, delphi-xe3

XE3 使用 delphi 和 excel ole 自动化。使用此代码，我在单元格中打开并读取/写入，但我无法选择不同的工作表（Sheet1、Sheet3 等）

```
begin
L_vi.Caption: = 'D: \ bd1 \ file_supporto \ Vi.xls';
Ex: = createoleobject ('Excel.Application');
Ex.visible: = true;
Ex.workbooks.open (L_vi.Caption);
Ex.cells [1,1]: = 'test';
Sheets: = Ex.Workbooks [1]. Worksheets ['Sheet3']; 
```

你能帮我吗？

谢谢

PS我这样解决：

```
Ex.Workbooks [1]. Worksheets ['Sheet3'].select; 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T16:50:08.227

这在 XE3 中对我很有效：

```
var
  XLApp: OleVariant;
  Sheet: OleVariant;
begin
  XLApp := CreateOleObject('Excel.Application');
  XLApp.Visible := True;
  XLApp.Workbooks.Open('C:\Test\Testing.xls');
  ShowMessage(XLApp.Workbooks[1].Worksheets[1].Name);  // Sheet1
  Sheet := XLApp.Worksheets.Item['Sheet3']; 
  ShowMessage(Sheet.Name);                             // Sheet3
  Sheet.Select;
  // This also works
  XLApp.WorkSheets.Item['Sheet1'].Select;              // Sheet1
end; 
```

# php - mysql如何从每个UPDATE中获取重复数据。？

> ID：15717707
> 
> 赞同：-1
> 
> 时间：2013-03-30T10:53:57.127
> 
> 标签：php, mysql, sql, database

我有一个带有以下字段的表...

```
student_id, name, email, age 
```

我使用下面的代码来更新我的学生表数据：

```
$this->db->query("UPDATE " . DB_PREFIX . "student SET name = '" . $this->db->escape($data['name']) . ", email= '" . $this->db->escape($data['email']) . ", age= '" . $this->db->escape($data['age']) . " WHERE student_id = '" . (int)$student_id . "'"); 
```

我的问题是如何在每次更新时获得**DUPLICATE字段？**我的意思是当我们更新我的表时，新数据必须是一个带有新添加数据的重复表，就像以前数据的副本一样更新......

*我对mysql不太熟悉。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T11:08:46.300

几周前，我在自己的 CMS 中做了一个 data_versioning。这个想法很简单。我使用了一个额外的数据库表`data_versioning`，它有几个字段：

*   dv_id
*   dv_table
*   dv_primary_key
*   dv_data
*   dv_created_by
*   dv_created_at

dv_id 是表的主键，dv_created_by 是 user_id，dv_created_at 是日期时间字段。这些是不太重要的字段，3 个重要的字段是：

1.  **dv_table**：此字段包含数据库表的名称，例如`students`。
2.  **dv_primary_key**：此字段包含`students`表的主键。确定 data_vesion 在哪一行。
3.  **dv_data**：包含先前在您的行中的数据数组的序列化字符串

我使用的方法是：

1.  一行的编辑页面首先检查并获取数据，将其存储在一个变量中，例如：`$studentData = $db->fetch("SELECT * FROM students WHERE id = 1");`
2.  当找到 POST 请求时，正在检查 POST 中的字段（验证），以确保新条目对我们的数据库有效。
3.  一旦输入有效，“魔术”就会发生

神奇之处在于：

1.  创建要插入的 data_version：`$db->query("INSERT INTO data_version (dv_table, dv_primary_key, dv_data) VALUES ('students', 1, '".serialize($studentData)."')");`
2.  然后更新当前行：`$db->update("UPDATE students SET ... WHERE id = 1");`
3.  使用新数据更新 $studentData 数组：`$studentData = $_POST;`

第 3 部分是可选的。就我而言，在有人提交更改后，我更新了我的表格，显示成功/错误消息，并且编辑表单再次可用，其中包含新数据。这个编辑是用`$studentData`.. 填充的，所以这个数组必须更新，否则它包含前一个条目的数据（因为 $studentData 被填充在你的页面顶部）。

**恢复数据**

恢复数据就像从基于 dv_table 和 dv_primary_key 字段的表 data_versions 中获取包含可用版本的列表一样简单。然后 unserialize() dv_data 字段并更新数据。dv_data 字段包含表字段

OO 集成有点不同。在这种情况下，您只需在保存处理程序中添加一个额外的 before() 函数即可写入 data_version 表。

I'm not sure if this is the best option. But in my case I was looking for a solution that only needed 1 database table instead of a `students_versions`, `news_versions` and so on.

# php - 将远程文件直接下载到客户端？

> ID：15717709
> 
> 赞同：1
> 
> 时间：2013-03-30T10:53:59.820
> 
> 标签：php, download

我需要将远程文件直接下载到客户端。经过一番谷歌搜索，我在 php 手册中找到了这个脚本，但它的恢复功能不起作用。此脚本用于`Http_Range`生成可恢复的下载链接。有没有其他方法可以做到这一点？当然，这将是通过使用`cUrl`，但我需要将远程文件直接下载到客户端。我该如何解决这个问题？

```
<?php          
$url="http://dl.remote-domain.com/files/file.mp4";
dl_file_resumable($url);

function dl_file_resumable($file, $is_resume=TRUE)
{

    //Gather relevent info about file
    $size = remotefilesize($file);
    $fileinfo = pathinfo($file);

    //workaround for IE filename bug with multiple periods / multiple dots in filename
    //that adds square brackets to filename - eg. setup.abc.exe becomes setup[1].abc.exe
    $filename = (strstr($_SERVER['HTTP_USER_AGENT'], 'MSIE')) ?
                  preg_replace('/\./', '%2e', $fileinfo['basename'], substr_count($fileinfo

['basename'], '.') - 1) :
                  $fileinfo['basename'];

    $file_extension = strtolower($path_info['extension']);

    //This will set the Content-Type to the appropriate setting for the file
    switch($file_extension)
    {
        case 'exe': $ctype='application/octet-stream'; break;
        case 'zip': $ctype='application/zip'; break;
        case 'mp3': $ctype='audio/mpeg'; break;
        case 'mpg': $ctype='video/mpeg'; break;
        case 'avi': $ctype='video/x-msvideo'; break;
        default:    $ctype='application/force-download';
    }

    //check if http_range is sent by browser (or download manager)
    if($is_resume && isset($_SERVER['HTTP_RANGE']))
    {
        list($size_unit, $range_orig) = explode('=', $_SERVER['HTTP_RANGE'], 2);

        if ($size_unit == 'bytes')
        {
            //multiple ranges could be specified at the same time, but for simplicity only 

serve the first range
            //http://tools.ietf.org/id/draft-ietf-http-range-retrieval-00.txt
            list($range, $extra_ranges) = explode(',', $range_orig, 2);
        }
        else
        {
            $range = '';
        }
    }
    else
    {
        $range = '';
    }

    //figure out download piece from range (if set)
    list($seek_start, $seek_end) = explode('-', $range, 2);

    //set start and end based on range (if set), else set defaults
    //also check for invalid ranges.
    $seek_end = (empty($seek_end)) ? ($size - 1) : min(abs(intval($seek_end)),($size - 1));
    $seek_start = (empty($seek_start) || $seek_end < abs(intval($seek_start))) ? 0 : max(abs

(intval($seek_start)),0);

    //add headers if resumable
    if ($is_resume)
    {
        //Only send partial content header if downloading a piece of the file (IE workaround)
        if ($seek_start > 0 || $seek_end < ($size - 1))
        {
            header('HTTP/1.1 206 Partial Content');
        }

        header('Accept-Ranges: bytes');
        header('Content-Range: bytes '.$seek_start.'-'.$seek_end.'/'.$size);
    }

    //headers for IE Bugs (is this necessary?)
    //header("Cache-Control: cache, must-revalidate");   
    //header("Pragma: public");

    header('Content-Type: ' . $ctype);
    header('Content-Disposition: attachment; filename="' . $filename . '"');
    header('Content-Length: '.($seek_end - $seek_start + 1));

    //open the file
    $fp = fopen($file, 'rb');
    //seek to start of missing part
    fseek($fp, $seek_start);

    //start buffered download
    while(!feof($fp))
    {
        //reset time limit for big files
        set_time_limit(0);
        print(fread($fp, 1024*8));
        flush();
        ob_flush();
    }

    fclose($fp);
    exit;
}

function remotefilesize($url, $user = "", $pw = "")
{
    ob_start();
    $ch = curl_init($url);
    curl_setopt($ch, CURLOPT_HEADER, 1);
    curl_setopt($ch, CURLOPT_NOBODY, 1);

    if(!empty($user) && !empty($pw))
    {
        $headers = array('Authorization: Basic ' .  base64_encode("$user:$pw"));
        curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
    }

    $ok = curl_exec($ch);
    curl_close($ch);
    $head = ob_get_contents();
    ob_end_clean();

    $regex = '/Content-Length:\s([0-9].+?)\s/';
    $count = preg_match($regex, $head, $matches);

    return isset($matches[1]) ? $matches[1] : "unknown";
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T11:31:51.723

如果您只想将文件推送给用户，请按照下列步骤操作：

1.  开始输出缓冲。
2.  按原样读取文件内容以进行缓冲。
3.  根据 mime 类型设置响应标头（如您发布的代码中所示。）
4.  刷新输出缓冲区。

如果 mime 类型不能按照浏览器标准呈现，系统将提示用户保存文件。

# ruby-on-rails - 如何使用 Rspec 测试后台作业（Sidekiq）？

> ID：15717712
> 
> 赞同：14
> 
> 时间：2013-03-30T10:54:10.160
> 
> 标签：ruby-on-rails, rspec, background-process, stub, sidekiq

我的应用程序的很大一部分依赖于后台作业来处理用户的网站，所以我需要编写一些测试来覆盖这些。

第一个问题是如何测试[Sidekiq](https://github.com/mperham/sidekiq)工作类中的代码，例如`app/workers/some_worker.rb`

```
class SomeWorker
  include Sidekiq::Worker

  def perform(model_id)
    ...
  end
end 
```

其次，我如何存根代码如下，这样我就不需要实际运行工作程序并减慢我的测试速度？

```
response = HTTParty.get("http://users-site.com", timeout: 30) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-30T15:49:26.887

阅读[Sidekiq wiki 中的测试页面](https://github.com/mperham/sidekiq/wiki/Testing)。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-06-03T00:39:11.993

看看我编写的[rspec-sidekiq gem 就是为了做到这一点（测试 Sidekiq 工作人员）。](https://github.com/philostler/rspec-sidekiq)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-02-26T16:28:51.367

Sidekiq 提供了一些选项来测试您的工作人员

[https://github.com/mperham/sidekiq/wiki/Testing](https://github.com/mperham/sidekiq/wiki/Testing)

对我来说，在我将这些行添加到规范文件的顶部后它就起作用了

```
require 'sidekiq/testing'
Sidekiq::Testing.inline! 
```

# php - 带有验证引擎的 AJAX

> ID：15717715
> 
> 赞同：1
> 
> 时间：2013-03-30T10:54:59.827
> 
> 标签：php, ajax

在 AJAX 调用将信息发送到数据库之前，它不会进行验证。如何先激活验证？

```
$(document).ready(function() {
        $("#signup").validationEngine('attach', {
            promptPosition : "centerRight",
            scroll : false,
            ajaxFormValidation: true,
            onBeforeAjaxFormValidation: beforeCall,
            onAjaxFormComplete: ajaxValidationCallback,
        });
    });

$("#submit").click(function() {
        var url = "insertintoDB.php"; // the script where you handle the form input.
        $.ajax({
               type: "POST",
               url: url,
               data: $("#signupform").serialize(), // serializes the form's elements.
               success: function(data)
               {
                   alert(data); // show response from the php script.
               }
             });

        return false; // avoid to execute the actual submit of the form.
    }); 
```

它确实指向 insertintoDB.php，但不验证以下表单。

```
<form class="form-horizontal" id="signup" name="signup" method="post" action="insertDB.php">

 <div class="control-group">
 <label class="control-label" for="inputSurname">Name</label>
 <div class="controls"><input type="text" id="inputSurname" name="inputSurname" placeholder="Surname" class="validate[required]" /></div>
 </div>
<button type="submit" id="submit" class="btn btn-success">Sign Up!</button>

</form> 
```

如何在传递到 PHP 进行数据插入之前先验证它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T11:04:57.997

You can validate your variables using these validation open source libraries:

[jQuery-Form-Validator](https://github.com/victorjonsson/jQuery-Form-Validator)
[Lightweight form validation for jQuery or Zepto.js](http://happyjs.com/)
[jQuery-Validation-Engine](https://github.com/posabsolute/jQuery-Validation-Engine)

And so on ...

> But i strongly recommend you use server side validation before do any database action to prevent SQL-injection and XSS attack.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T11:01:20.553

使用 jQuery Validator 进行表单验证，其模式如下：

```
$('form').validate({
    invalidHandler: function(event, validator) {
        // Handle the invalid case.
    },
    submitHandler: function(form) {
       // do stuff on your valid form.
       // Then call form submit.
       form.submit();
    }
}); 
```

验证器允许您为各种条件设置规则和错误消息，但是它会根据字段类型自动检测带有“必需”属性的缺失字段和其他情况。例如 url - 它需要一个有效的 url 等。

服务器端验证很重要，但是 jQuery 验证器允许您在仍然引起用户注意的同时捕获许多事情，并且他们可以轻松修复。

See here: [jQuery Validator](http://docs.jquery.com/Plugins/Validation/validate)

# php - 我试图在 foreach 上不犯同样的错误，但现实不会让我（拉霍伊风格）

> ID：15717725
> 
> 赞同：0
> 
> 时间：2013-03-30T10:56:33.270
> 
> 标签：php, mysql

我在这个页面上了解到 foreach 很快，对数据库的查询不是。所以我试图做一个单一的 UPDATE 查询，但它不起作用：

```
$array = '';
foreach ($myar as $key => $value) {
  $array .= " (name='$value' WHERE lid='$key'), ";
}

$link1 = $db->prepare("UPDATE leyes SET $array");
$link1->execute(); 
```

我收到一个错误：致命错误：未捕获异常 'PDOException' 并带有消息 'SQLSTATE[42000]：语法错误或访问冲突：1064 您的 SQL 语法有错误

**一种解决方案：**

```
 $array = '';

  foreach ($myarr as $key => $value) {
      $array .= " WHEN '$key' THEN '$value' ";
  }
  $array .= " ELSE name
  END";

  $link1 = $db->prepare("UPDATE table SET name = CASE id $array");
  $link1->execute(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T11:00:15.087

试试喜欢

```
$array = '';
$i = 1;
foreach ($myar as $key => $value) {
    $array .= " name='$value' WHERE lid='$key'";
    if(count($myar) != $i++)
       $srray .= ',';
}
$link1 = $db->prepare("UPDATE leyes SET $array");
$link1->execute(); 
```

我认为你在最后一个 Where 语句中遇到了额外的 ',' 的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T11:06:15.003

只添加这一行

```
$array = '';
foreach ($myar as $key => $value) {
  $array .= " (name='$value' WHERE lid='$key'), ";
}

//Add this
$array = substr($array, 0, -2);

$link1 = $db->prepare("UPDATE leyes SET $array");
$link1->execute(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T11:58:19.853

I'd never seen this sort of syntax for an `UPDATE` before, I had to co firm my suspicion that it wouldn't work that way. To the best of my understanding you can't use multiple WHERE clauses in an UPDATE. You can't do what you're looking for in a single statement.

That said, there are optimization strategies you can use. Start here: [http://www.kavoir.com/2009/05/mysql-update-multiple-rows-with-one-single-query.html](http://www.kavoir.com/2009/05/mysql-update-multiple-rows-with-one-single-query.html)

# java - 在 Java 应用程序中显示文件（图像）

> ID：15717728
> 
> 赞同：0
> 
> 时间：2013-03-30T10:56:54.390
> 
> 标签：java, image, list, jpeg, show

我有一个 JPEG 文件列表（列出照片），我希望 Windows 的默认查看器为这个扩展打开它们，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T10:59:40.060

您可以为此使用`java.awt.Desktop`该类：

```
Desktop.getDesktop().open(new File("image.jpg")); 
```

这将使用默认应用程序在您的计算机上打开 JPG 文件来打开图像。

# javascript - 在jQuery中获取父对象的最佳方法

> ID：15717729
> 
> 赞同：-3
> 
> 时间：2013-03-30T10:56:57.350
> 
> 标签：javascript, jquery

我有以下代码：

```
<script>
jQuery(document).ready(function ($) {
  'use strict';
  var Image_Selector = function () {};

  Image_Selector.prototype.init = function ($wrapper) {
    this.$select_btn = $wrapper.find('.set-image-btn');

    this.$select_btn.click(function (e) {
      console.log(this);    //jquery object
      console.log(e);       //just the event

      // What's the best way to call 'open_image_selector()' here?
    });
  }; // init

  Image_Selector.prototype.open_image_selector = function () {
    console.log (this);
    // do awesome stuff
  };
}); // doc rdy
</script> 
```

`open_image_selector`在函数内部调用的最佳方法是`jquery.click`什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T11:06:30.943

`this`在 clcik 处理程序中是被单击的 DOM 元素。

`this`在 clcik 处理程序之外缓存您的类，以便它在处理程序内可用。也可以`$.proxy`用于更改处理程序的上下文

```
Image_Selector.prototype.init = function ($wrapper) {

     var self=this;
    self.$select_btn = $wrapper.find('.set-image-btn');

    self.$select_btn.click(function (e) {
      console.log(self); /* should log "Image_Selector" object*/
       self.open_image_selector()  

    });
  }; // init 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T11:19:27.100

使用[`bind`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)方法

```
 this.$select_btn.click(function (e) {
    console.log(this);
    console.log(e);
    //Calling `open_image_selector`
    this.open_image_selector()
 }.bind(this)); 
```

绑定`this`到您的单击侦听器，以便`this`在该函数内部引用对象的当前实例`Image_Selector`。

# gwt - ClickHandler 获取被点击的元素

> ID：15717730
> 
> 赞同：3
> 
> 时间：2013-03-30T10:56:58.493
> 
> 标签：gwt

当我向按钮添加点击处理程序时，我会这样做：

```
button.addClickHandler(myHandler);

// myHandler
public void onClick(ClickEvent event) {
    // how to get the button here?
} 
```

有谁知道我如何获得在点击处理程序中被点击的按钮对象？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T11:02:30.213

你可以写

```
Widget sender = (Widget) event.getSource(); 
```

然后，对于每个按钮，将其与发件人进行比较：

```
 private Button b = new Button("Button XXX");

if (sender == b) {
      // handle Button XXX being clicked
    } 
```

# javascript - 谷歌地图 | 我无法在地图上添加多个标记

> ID：15717731
> 
> 赞同：1
> 
> 时间：2013-03-30T10:57:14.157
> 
> 标签：javascript, google-maps, google-maps-api-3

我正在尝试创建一个简单的 Google Maps API，允许最终用户在地图上添加一些标记。

问题是，虽然我可以在编程级别添加标记，但标记并没有出现在地图上。

这是在地图上添加标记的代码：

```
for(var i = 0; i < points.length; i++)
{
    var markerLatLng    =   new google.maps.LatLng(points[i].lat(), points[i].lng());
    var marker          =   new google.maps.Marker(
        {
            position        :   markerLatLng,
            map             :   map,
            zIndex          :   (10000 + i),
            icon            :   {
                url         :   'http://www.saronikoscity.gr/site/images/ico_web.gif',
                size        :   new google.maps.Size(16, 16, 'px', 'px')
            }
        }
    );

    markerRegistry.push(marker);
} 
```

在这里你可以看到我的意思的一个活生生的例子：http: [//jsfiddle.net/merianos/n4wjw/](http://jsfiddle.net/merianos/n4wjw/)

这有什么问题？你看有什么不对吗？

**注意**：我尝试在我的地图上添加一个标记，在这种情况下它可以正常工作。问题与多个标记有关。

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T12:49:03.873

您只是定义`var map`了两次，请[在此处](http://jsfiddle.net/n4wjw/2/)查看工作示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T11:19:36.730

这段代码对我有用

```
var markers = [
    ['Bondi Beach', -33.890542, 151.274856],
    ['Coogee Beach', -33.923036, 151.259052],
    ['Cronulla Beach', -34.028249, 151.157507],
    ['Manly Beach', -33.80010128657071, 151.28747820854187],
    ['Maroubra Beach', -33.950198, 151.259302]
];

function initializeMaps() {
    var latlng = new google.maps.LatLng(-33.92, 151.25);
    var myOptions = {
        zoom: 10,
        center: latlng,
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        mapTypeControl: false
    };
    var map = new google.maps.Map(document.getElementById("myMap"),myOptions);
    var infowindow = new google.maps.InfoWindow(), marker, i;
    for (i = 0; i < markers.length; i++) {  
        marker = new google.maps.Marker({
            position: new google.maps.LatLng(markers[i][1], markers[i][2]),
            map: map
        });
        google.maps.event.addListener(marker, 'click', (function(marker, i) {
            return function() {
                infowindow.setContent(markers[i][0]);
                infowindow.open(map, marker);
            }
        })(marker, i));
    }
}

jQuery(document).ready(
    function($)
    {
        if($('#myMap').length > 0)
        {
            initializeMaps();
        }
    }
); 
```

# c - 使用c中的指针反转字符串

> ID：15717735
> 
> 赞同：1
> 
> 时间：2013-03-30T10:57:35.750
> 
> 标签：c, string, runtime-error

它是一个反转字符串的程序，但是由于最后的**printf**语句，它可能会给出一些错误。请帮助解决错误我是指针的新手所以请告诉我我将指针转换为数组是否不正确？

```
void reverse(char *a)
 {   char *b;
    int j=0;
     int l=strlen(a);
      l--;

    while(l>=0)
      { b[j]=a[l];
         l--;j++;
       }
      b[j]='\0';
      printf("%s",b);
   } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T11:01:43.760

```
char *b; 
```

您从未为指针分配任何内存`b`。你必须把这个指针指向一个足够大的内存来保存你正在复制的字符串。请注意，这会导致未定义的行为，因此在某些情况下它甚至可能会起作用，但不能保证它会起作用。

您可以将指针指向本地数组或使用`malloc`. 前者更可取，特别是因为您实际上从未从函数返回任何内容。您只需要一个仅在函数本地的字符串。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-30T11:26:23.287

有几种实现方法`reverse()`，具体取决于传入函数的字符串是否要修改。

如果唯一的目的是以相反的顺序打印字符串，而不是更改存储，那么您可以使用：

```
void print_reverse_string(const char *str)
{
    const char *src = str + strlen(str);
    while (src > str)
        putchar(*--src);
} 
```

如果目标是反转存储中的字符串并打印它，那么您可以使用：

```
void reverse_string_and_print(char *str)
{
    if (*str == '\0')
        return;
    char *src = str;
    char *end = src + strlen(src) - 1;
    while (end > src)
    {
        char t = *end;
        *end-- = *src;
        *src++ = t;
    }
    printf("%s", str);
} 
```

第二个函数设计得很糟糕，因为它做了两个工作。最好有一个`void reverse(char *str)`在原位反转字符串的函数，然后从调用代码中打印它。

```
void reverse(char *str)
{
    if (*src == '\0')
        return;
    char *src = str;
    char *end = src + strlen(src) - 1;
    while (end > src)
    {
        char t = *end;
        *end-- = *src;
        *src++ = t;
    }
} 
```

这可能以一种不可能的方式声称是通用功能`reverse_string_and_print()`。

请注意，在 for 的表达式中减去 1 时，对空字符串的测试可避免未定义行为 (UB) `end`。它伤害的机会很小，但应始终避免UB。

* * *

### SSCCE（[简短、独立、正确的示例](http://sscce.org/)）

```
#include <stdio.h>
#include <string.h>

void print_reverse_string(const char *str)
{
    const char *src = str + strlen(str);
    while (src > str)
        putchar(*--src);
}

void reverse_string_and_print(char *str)
{
    char *src = str;
    char *end = src + strlen(src) - 1;
    while (end > src)
    {
        char t = *end;
        *end-- = *src;
        *src++ = t;
    }
    printf("%s", str);
}

int main(void)
{
    const char fixed[] = "Hello World!";
    print_reverse_string(fixed);
    putchar('\n');
    printf("%s\n", fixed);
    char data[] = "Hello World!";
    reverse_string_and_print(data);
    putchar('\n');
    printf("%s\n", data);
    return(0);
} 
```

### 示例输出

```
$ ./rv
!dlroW olleH
Hello World!
!dlroW olleH
!dlroW olleH
$ 
```

# delphi - Delphi XE3：TMS 软件的 TWebUpdate：不替换主 exe 文件

> ID：15717738
> 
> 赞同：-1
> 
> 时间：2013-03-30T10:57:47.920
> 
> 标签：delphi, tms

更新我的应用程序我正在使用 TMS 软件的 TWebUpdate：

```
WebUpdate1.URL:='http://myserver.com/update.inf';
if WebUpdate1.NewVersionAvailable then
begin
case Application.MessageBox(PChar('The new version '+WebUpdate1.NewVersionInfo+' is available! Update it?'), 
'Updates Are Available', MB_YESNO + MB_ICONQUESTION) of
  IDYES:
    begin
     SetCurrentDir(ExtractFilePath(Application.ExeName));
     WebUpdate1.DoUpdate;
     WebUpdate1.DoRestart;
    end;
  IDNO:
    begin
      Application.Terminate;
    end;
end; 
```

这是 update.info 文件：

```
[update]
newversion=2.1.0.37
localversion=client_app.exe
[files]
count=1
[file1]
url=http://myserver.com/client_app.exe
newversion=2.1.0.37
localversion=client_app.exe
mandatory=1
[application]
appupdate=1
silentrestart=1
appname=client_app.exe
appcomps=client_app.ex_ 
```

实际上，更新工作正常（下载 exe 文件并重新启动应用程序），但 exe 文件没有被下载的文件替换。哪里可能有问题？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T16:31:46.183

事实证明，下载的文件必须压缩为 cab 文件。那是：

```
[update]
newversion=2.1.0.37
localversion=client_app.exe
[files]
count=1
[file1]
url=http://myserver.com/client_app.ex_
newversion=2.1.0.37
localversion=client_app.exe
mandatory=1
[application]
appupdate=1
silentrestart=1
appname=client_app.exe
appcomps=client_app.ex_ 
```

而且当然：

```
WebUpdate1.ExtractCAB:=True; 
```

# apache - WAMP 服务器虚拟主机配置

> ID：15717739
> 
> 赞同：1
> 
> 时间：2013-03-30T10:57:57.380
> 
> 标签：apache, wamp, hosts, virtual-hosts

好的，我已经安装了我的 wamp，但根本无法正确设置我的虚拟主机。

这是我所拥有的：

Wamp 安装目录：`F:\wamp`

项目目录：`F:\www`

```
# F:\wamp\bin\apache\apache2.4.2\conf\extra\httpd-vhosts.conf
<Directory "F:\www">
    AllowOverride AuthConfig FileInfo Indexes Limit Options
    Order Deny,Allow
    AllowOverride All
    Allow from all
</Directory>

NameVirtualHost 127.0.0.1
<VirtualHost 127.0.0.1>
    ServerName localhost
    DocumentRoot "F:\wamp\www"
</VirtualHost>

# Yes, it's a symfony2 project
<VirtualHost 127.0.0.1>
    DocumentRoot "F:\www\my_project\web"
    DirectoryIndex app_dev.php
    ServerName my_project
</VirtualHost> 
```

`hosts`来自 windows 的文件已配置并具有必要的：`127.0.0.1 project_name`包含的行。

阿帕奇`httpd.conf`：

```
# Virtual hosts
Include conf/extra/httpd-vhosts.conf 
```

现在浏览器在访问 URL 时告诉我：`my_project/`

```
Forbidden
You don't have permission to access / on this server. 
```

有人可以告诉我这里发生了什么吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-29T21:58:49.440

试试这个作为你的 conf/extra/httpd-vhosts.conf

```
#
# Use name-based virtual hosting.
#
NameVirtualHost *:80

## must be first so the the wamp menu page loads
## and leave as Allow from 127.0.0.1 as outside access should not be required to the wamp homepage
<VirtualHost *:80>
    ServerAdmin webmaster@homemail.net
    DocumentRoot "F:/wamp/www"
    ServerName localhost
    ServerAlias localhost
    <Directory  "F:/wamp/www">
        Order Deny,Allow
        Deny from all
        Allow from 127.0.0.1
    </Directory>
</VirtualHost>

# Yes, it's a symfony2 project
<VirtualHost *:80>
    DocumentRoot "F:\www\my_project\web"
    ServerName myproject.dev
    ServerAlias myproject.dev www.myproject.dev
    Options Indexes FollowSymLinks
    <Directory "F:\www\my_project\web">
        AllowOverride All
        Order Deny,Allow
        Allow from 127.0.0.1
        Allow from 192.168.2
        ## change to Allow from all when it works
    </Directory>
</VirtualHost> 
```

现在您需要像这样将站点名称添加到您的主机文件中。

```
127.0.0.1 myproject.dev 
::1 myproject.dev 
```

编辑：

为了让您的浏览器找到您的站点域名，您必须告诉 Windows 您用于测试的域名存在以及它所在的 IP 地址。为此，您可以将测试域名添加到名为`hosts`. 当 Windows 加载其网络组件并由名为`DNS Client`

要添加新的本地域名，您必须编辑 windows hosts 文件

```
c:\windows\system32\drivers\etc\hosts 
```

并像这样为每个虚拟主机添加一行

```
127.0.0.1  myproject.dev
127.0.0.1  myproject2.dev
127.0.0.1  myproject3.dev
::1  myproject.dev
::1  myproject2.dev
::1  myproject3.dev 
```

保存后，使用`Run as Administrator`（右键单击 + 切换 Windows 命令处理器图标以显示包含`Run as Administrator`菜单行的菜单）启动命令提示符并发出这 2 个命令以重新启动“DNS 客户端”服务，以便它接收您的更改。或者只是重新启动。

```
net stop dnscache 
```

完成时

```
net start dnscache 
```

*PS。双引号是必需的，因为服务名称中有空格！*

**如何编辑主机文件**

hosts 文件受 Windows 保护，要保存它，您必须具有管理员权限。在 Vista/W7/W8 上，您可能认为您是管理员，但您不是。

要成功保存主机文件，请执行此操作以使用管理员权限启动编辑器。

在桌面或“开始”菜单中找到您的编辑器图标（如果您没有别的东西，记事本会这样做）右键单击 + 移到您选择的编辑器图标上 - 将显示一个菜单。从菜单中选择“以管理员身份运行”。

使用`file -> open`将编辑器导航到`c:\windows\system32\drivers\etc\hosts`文件。

进行更改后，您现在可以保存它们。

# c# - 信箱不可用。服务器响应为：5.7.1 无法中继错误

> ID：15717743
> 
> 赞同：17
> 
> 时间：2013-03-30T10:58:15.843
> 
> 标签：c#, asp.net, smtpclient

我在 netsol 服务器上托管了我的一个网站。从那里`contact.aspx`必须使用交换服务器发送电子邮件。当我尝试发送电子邮件时：

> **错误**：邮箱不可用。服务器响应为：5.7.1 无法中继

代码：

```
MailMessage message = new MailMessage(@"xxx@example.com", 
                                      @"test_user@yahoo.com",
                                       "New Message",
                                       "Exchange");
SmtpClient mail = new SmtpClient("exchange.abc.com", 29);
mail.EnableSsl = true;
mail.Credentials = new NetworkCredential(@"xxx@example.com", @"password");
mail.UseDefaultCredentials = false;
mail.DeliveryMethod = SmtpDeliveryMethod.Network;
mail.Send(message); 
```

我尝试过的选项：

*   在端口 465 或 587 或 25 上测试
*   更改了 SmtpDeliveryMethod.PickupDirectoryFromIis
*   无法配置 IIS（SMTP 服务器），因为它托管在其他人的服务器上

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-03-30T13:25:39.000

大多数 SMTP 服务器的默认配置是不从不受信任的源中继到外部域。例如，假设您联系 foo.com 的 SMTP 服务器并要求它向 bar@xyzzy.com 发送消息。因为 SMTP 服务器并不真正知道你是谁，所以它会拒绝中继消息。如果服务器*确实*为您这样做，它将被视为[开放中继](https://en.wikipedia.org/wiki/Open_mail_relay)，这就是垃圾邮件发送者经常做的事情。

如果您联系 foo.com 邮件服务器并要求它发送邮件到某人@foo.com，它*可能*会让您这样做。这取决于他们是否相信你就是你所说的那个人。通常，服务器会尝试进行反向 DNS 查找，如果您发送的 IP 与 DNS 中 MX 记录的 IP 地址不匹配，则拒绝发送邮件。因此，如果您说您是 bar.com 邮件服务器，但您的 IP 地址与 bar.com 的 MX 记录不匹配，那么它将拒绝发送邮件。

您需要与该 SMTP 服务器的管理员交谈以获取身份验证信息，以便它允许您进行中继。当您联系 SMTP 服务器时，您需要出示这些凭据。通常它可以是用户名/密码，也可以使用 Windows 权限。取决于服务器及其配置方式。

有关如何发送凭据的示例，请参阅[无法使用 SMTP 向外部域发送电子邮件。](https://stackoverflow.com/q/1491915/56778)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-04-17T02:56:40.310

我使用 Windows Server 2012 进行了很长时间的托管，并且在多年后停止工作，没有任何问题。我的解决方案是将服务器的公共 IP 地址添加到中继列表并启用 Windows 集成身份验证。

我刚刚做了两个更改，但我没有帮助。

转到 IIS 6 管理器

![转到 IIS 6 管理器](../Images/ab9f8c5c58b6deaf9b6621199f22c200.png)

选择 SMTP 服务器的属性

![选择 SMTP 服务器的属性](../Images/1e0cbda931ebaf90359c40248c71387a.png)

在“访问”选项卡上，选择“中继”

![在“访问”选项卡上，选择“中继”](../Images/74eededfdd2ec291ae6ee8df29cec6d0.png)

添加您的公共 IP 地址

![添加您的公共 IP 地址](../Images/b6a6b180670bf983947dc593dae559d6.png)

关闭对话框并在同一选项卡上单击“身份验证”按钮。

添加集成 Windows 身份验证

![添加集成 Windows 身份验证](../Images/998059afa4c34ce510b0252d5f4e77be.png)

也许不需要某些步骤，但它可以工作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-03-30T17:20:23.390

我们遇到了这个问题。就权限和安全性而言，一切都设置得很好。

在大海捞针之后。问题是某种启发式方法。在电子邮件正文中，只要列出某个电子邮件地址，我们就会从我们的交换服务器收到上述错误消息。

花了 2 天的疯狂测试和拉头发才找到这个。

因此，如果您检查了所有内容，请尝试将电子邮件正文更改为仅包含“测试”一词。如果在那之后，您的电子邮件正常，您遇到了某种垃圾邮件/启发式过滤器问题，就像我们一样

# c# - c# 中的 id 自动生成代码中生成的重复 id？

> ID：15717745
> 
> 赞同：0
> 
> 时间：2013-03-30T10:58:16.573
> 
> 标签：c#, ms-access

您好已经创建了一个程序，它读取表的最后一行并根据最后生成的 id 号生成一个 id 号，但程序仍在生成表中已经存在的重复 id 号。我的代码如下：follow

```
private void get_code()
        {
                try
                {
                    con = new OleDbConnection(c.connectionstring);
                    con.Open();
                    string sql = "select code from bookings";
                    adp = new OleDbDataAdapter(sql, con);
                    DataSet ds = new DataSet();
                    adp.Fill(ds, "BOOKINGS");
                    if (ds.Tables[0].Rows.Count > 0)
                    {
                        int ctr, len;
                        string codeval;
                        DataRow dr;
                        DataTable dt;
                        string code;
                        dt = ds.Tables["bookings"];
                        len = dt.Rows.Count -1;
                        dr = dt.Rows[len];
                        code = dr["code"].ToString();
                        codeval = code.Substring(2, 3);
                        ctr = Convert.ToInt32(codeval);
                        if ((ctr >= 1) && (ctr < 9))
                        {
                            ctr = ctr + 1;
                            Code.Text= "B-00" + ctr;
                        }
                        else if ((ctr >= 9) && (ctr < 99))
                        {
                            ctr = ctr + 1;
                            Code.Text = "B-0" + ctr;
                        }
                        else if (ctr >= 99)
                        {
                            ctr = ctr + 1;
                            Code.Text = "B-" + ctr;
                        }

                    }
                else
                {
                    Code.Text= "B-001";
                }
                con.Close();
            }
            catch (Exception ex)
            {
                MessageBox.Show("Error Occured : "+ex.Message,"Tailor Master",MessageBoxButtons.OK,MessageBoxIcon.Information);
            }
    } 
```

在下面的场景是这样的：如果最后一个 id 是 b-005 它将再次生成相同的。

请帮助解决问题。提前致谢。

哈里什夏尔马

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T14:04:23.500

您没有`order by`在查询中指定子句，因此无法保证数据表的最后一行包含最高 id。在您的应用程序中生成 id 而不是在数据库中使用适当的自动增量字段也存在一般问题。

# tomcat - 将tomcat设置为在eclipse jsf2中使用dcevm

> ID：15717748
> 
> 赞同：2
> 
> 时间：2013-03-30T10:58:43.760
> 
> 标签：tomcat, jsf-2, jvm, settings, dcevm

如何将 dcevm 与 tomcat 和 eclipse 一起使用 我下载了 jdk6u25 并设置 tomcat7 在 eclipse juno 中使用它，然后当我更改托管 bean 中的任何内容时，它可以工作，但没有考虑 xhtml 中的更改

我认为问题出在tomcat

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-10T10:25:35.183

您至少必须清理 BeanElResolver 和 ElMethodCache。以下示例用于 jboss-el 实现：

```
private void clearJbossElMethodCache()  {
    try {
        Field cacheField = getField(org.jboss.el.util.ReflectionUtil.class, "methodCache");
        cacheField.setAccessible(true);
        Object cache = cacheField.get(null);
        Method m = cache.getClass().getMethod("clear");
        m.invoke(cache);
    }
    catch (Exception e) {
    }
}

public void clearBeanElResolver() {
    BeanELResolver beanELResolver = getSeamBeanELResover();
    doCleanBeanElResolver(beanELResolver);
    doCleanBeanElResolver(ELUtils.BEAN_RESOLVER);
    java.beans.Introspector.flushCaches();
}

private void doCleanBeanElResolver(BeanELResolver beanELResolver) {
        try {
            try {
                Field cacheField = getField(beanELResolver.getClass(), "cache");
                cacheField.setAccessible(true);
                Object cache = cacheField.get(beanELResolver);
                try {
                    Method m = cache.getClass().getMethod("clear");
                    m.invoke(cache);
                } catch (NoSuchMethodException e)
                {
                    Class<?> cacheClass = getClass().getClassLoader().loadClass("javax.el.BeanELResolver$ConcurrentCache");
                    Constructor<?> con = cacheClass.getConstructor(int.class);
                    con.setAccessible(true);
                    Object cacheInstance = con.newInstance(100);
                    cacheField.set(beanELResolver, cacheInstance);
                }

            }
            catch (NoSuchFieldException ee) {
                Field props = getField(beanELResolver.getClass(), "properties");
                props.setAccessible(true);
                Object cache = props.get(beanELResolver);
                Method m = cache.getClass().getMethod("clear");
                m.invoke(cache);
            }
        }
        catch (Exception e) {
        }
}

private BeanELResolver getSeamBeanELResover() {
    if (EL.EL_RESOLVER instanceof CompositeELResolver) {
        CompositeELResolver compositeElResolver = (CompositeELResolver) EL.EL_RESOLVER;
        try {
            Field elResolvesField = getField(CompositeELResolver.class, "resolvers");
            elResolvesField.setAccessible(true);
            ELResolver elResolvers[] = (ELResolver[]) elResolvesField.get(compositeElResolver);
            for (ELResolver elResolver: elResolvers) {
                if (elResolver instanceof BeanELResolver) {
                    return (BeanELResolver) elResolver;
                }
            }
        }
        catch (Exception e) {
        }
    }
    return null;
} 
```

# java - 如何在浏览器中将 Java 类作为 Applet 运行

> ID：15717749
> 
> 赞同：0
> 
> 时间：2013-03-30T10:58:45.527
> 
> 标签：java, browser, embed, japplet

我有一个扩展 GraphicsProgram 的弹跳球类。我希望能够将它嵌入到我的博客中。根据[这篇](https://stackoverflow.com/questions/2261728/run-a-java-application-in-a-web-browser)文章，我可以为此目的使用 Java Web start。但我是编程新手，我的程序很小。所以我想坚持使用Java Applet。但要使用 Java Applet，我需要将类扩展为 JApplet。正如我所提到的，我的 bouncingball 类扩展了 GraphicsProgram。所以我不能将它用作 Java 小程序。确保任何类都可以作为 Java Applet 在浏览器中实现和运行需要什么？

```
/**
 * This program graphically simulates a bouncing ball.
 */

package Lecture_Examples;

import acm.graphics.GOval;
import acm.program.GraphicsProgram;

public class BouncingBall extends GraphicsProgram{

    private static final long serialVersionUID = -1154542047805606083L;

    /**
     * Diameter of the ball
     */
    private static final int DIAM_BALL = 30;

    /**
     * Amount of velocity to be increased as a result of gravity
     */
    private static final int GRAVITY = 3;

    /**
     * Animation delay or pause between the ball moves
     */
    private static final int DELAY = 50;

    /**
     * Initial x and  y pos of the ball
     */
    private static final int X_START = DIAM_BALL /2;
    private static final int Y_START = DIAM_BALL /2;

    /**
     * X velocity
     */
    private static final double X_VEL = 5;

    /**
     * Amount of Y velocity reduction when the ball bounces
     */
    private static final double BOUNCE_REDUCE = 0.9;

    /**
     * starting x and y velocities
     */
    private double xVel = X_VEL;
    private double yVel = 0.0;  //starting from rest

    /*
     * ivar
     */
    private GOval ball;

    public void run(){
        setUp();    //set's up initial pos of the ball

        //simulation ends when the ball goes off right hand of the screen
        while(ball.getX() < getWidth()){
            moveBall();
            checkForCollision();
            pause(DELAY);
        }
    }
    /**
     * Checks if the ball touches the floor of the canvas and then update velocity and position of the ball
     */
    private void checkForCollision() {
        //determine if the ball has dropped below the floor
        if(ball.getY() > (getHeight() - DIAM_BALL)){
            //Change the ball's y velocity to bounce it up the floor with bounce_reduce effect
            yVel = -yVel *BOUNCE_REDUCE;

            //assuming that the ball will move an amount above the floor
            //equal to the amount  it would have dropped below the floor. This will
            //sure that the ball doesn't bulge to the floor while bouncing.
            double diff = ball.getY() - (getHeight() - DIAM_BALL);
            ball.move(0, -2*diff);
        }
    }

    /**
     * Moves the ball
     */

    private void moveBall() {
        yVel += GRAVITY;    //Add gravity to produce moment to or away from the floor
        ball.move(xVel, yVel);
    }

    /**
     *Creates and place the ball
     */
    private void setUp() {
        ball = new GOval(X_START, Y_START, DIAM_BALL, DIAM_BALL);   //Creates teh ball
        ball.setFilled(true);   //fill black
        add(ball);  //add to canvas
    }
} 
```

# python - Python3.3：带有 textmining-1.0 的 ImportError

> ID：15717752
> 
> 赞同：2
> 
> 时间：2013-03-30T10:59:08.663
> 
> 标签：python, python-import

我安装了textmining-1.0。我在导入时遇到问题。当我输入

```
import textmining 
```

在 python3.3 shell 中，我收到消息：

```
Traceback (most recent call last):
  File "<pyshell#0>", line 1, in <module>
    import textmining
  File "C:\Python33\lib\site-packages\textmining\__init__.py", line 2, in <module>
    import stemmer
ImportError: No module named 'stemmer' 
```

但是我可以看到 stemmer.py 存在于 textmining-1.0 文件夹中。这里出了什么问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-08-15T15:33:19.063

将文本挖掘代码转换为 python3 为我解决了这个问题。为此，我从这里手动下载文本挖掘包：

[https://pypi.python.org/pypi/textmining/1.0](https://pypi.python.org/pypi/textmining/1.0)

解压它：

```
unzip textmining-1.0.zip 
```

将文件夹转换为 python 3：

```
2to3 --output-dir=textmining-1.0_v3 -W -n textmining-1.0 
```

并安装它：

```
cd textmining-1.0_v3
sudo python3 setup.py install 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-06T18:47:33.977

我意识到这是一个老问题，但我遇到了同样的问题，最终自己解决了：

textmining 包似乎是用 python2 编写的 - 所以我必须执行以下操作：

```
tar xvf textmining-1.0.tar.gz #or whatever, I forget which archive format it was
2to3 textmining-1.0
cd textmining-1.0
python setup.py install 
```

现在它在 Python 3 上就像一个魅力！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-12-01T20:16:12.703

我使用 2to3 将 textmining 转换为 v3，然后从**init** .py 中删除了“import stemmer”行。在 Python 3.4 上像魅力一样工作！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-01-14T11:18:53.727

`pip install textmining3`

这个包是 Python 3 的一个端口，并且是基于原来的。上面的命令安装包没有任何错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-05T11:04:29.247

您可能需要按照[此处](http://www.christianpeccei.com/textmining/)的说明安装软件包：

要安装，解压缩 .zip 文件，将自己放在`textmining-1.0`目录中并运行：

```
python setup.py install 
```

或者：

```
setup.py install 
```

这适用于我在 Python 2.7 上。不确定 Python 3.3。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-06-11T11:30:03.547

将文本挖掘代码转换为 python3 将解决它。为此，我从这里手动下载文本挖掘包：

[https://pypi.python.org/pypi/textmining/1.0](https://pypi.python.org/pypi/textmining/1.0)

解压它：

在 C:\Users\Username\Anaconda3\Lib\site-packages 目录中使用**7-zip(Windows)解压缩**

将文件夹转换为 python 3：从命令提示符（Windows）

```
2to3 --output-dir=textmining-1.0_v3 -W -n textmining-1.0 
```

并安装它：

安装（Windows）：

从命令提示符转到解压缩目录 C:\Users\username\Anaconda3\Lib\site-packages\textmining-1.0_v3

```
python3 setup.py install 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-12-07T02:01:59.773

文本挖掘包似乎是用 python2 编写的。所以它不支持python 3。这里我们的工作是让它为python 3运行。按照以下步骤

1.  首先手动下载文本挖掘包[点击这里](https://pypi.org/project/textmining/1.0/#files)
2.  解压文件并将解压后的文件夹放到anaconda目录下。通常像 C:\Users\sj250305\AppData\Local\Continuum\anaconda3\Lib\site-packages 或（这在您的计算机上可能略有不同。）
3.  通过在命令提示符下运行以下命令将代码转换为 python 3（它使文件 python3 兼容。）

    * * *

> 2to3 --output-dir=textmining-1.0_v3 -W -n textmining-1.0

* * *

4.  将相同的更改目录转换为 textmining-1.0_v3 并执行 python setup.py install(textmining-1.0_v 将自动创建，我们只需要更改我们的 setup.py 文件所在的目录并运行 setup.py 文件通过在命令提示符中使用以下命令）python setup.py install

5.  完成所有这些后，将数据文件夹从旧的 textmining-1.0 复制到新的 textmining-1.0_v3（可选）

现在它工作正常。

# c# - 是否可以制作自定义文件打包器/解包器/修改器？

> ID：15717753
> 
> 赞同：2
> 
> 时间：2013-03-30T10:59:15.443
> 
> 标签：c#, file, customization, file-extension, packer

我目前正在开发游戏，我想知道是否可以在 C# 中制作自定义文件打包器/解包器/修改器

它可以将整个目录中的所有文件（包括具有自定义扩展名的单个文件中的子目录）打包，并且可以解压缩所有文件，但在打包时仍然具有相同的信息，并可以修改打包文件中的文件。

我知道我要求很多，但我不希望得到所有答案，所以如果您至少知道一个，请告诉我，或者如果有任何链接，请指导我。

谢谢，麻烦您了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T12:12:20.340

要创建一个包文件并能够从中读取，您首先需要定义如何在该包文件中存储信息，因此您首先需要创建一个结构或一个类。

```
class FileEntry
{
  public int FileOffset { get; set; }
  public int FileSize { get; set; }
  public int Flags { get; set; }
  public String FileName { get; set; }
  public String FileDirectory { get; set; }
} 
```

**用于创建**

您最好标记您的文件，以便您可以验证它是正确的文件类型，即。将前 4 个字节设置为“PACK”之类的内容（您应该使用`StreamWriter`.

您需要打开要打包的目录树的根目录，并遍历所有子目录和文件，并为找到的每个文件创建一个`FileEntry`并将其存储在列表中。您应该写入文件的下一件事将是一个 32 位 int，它指定包中的文件总数（`Count`列表的属性）。

You would then want to iterate through your list of `FileEntry` and write another tag to specify a file start, such as "FILE", then the 32bit int of `FileSize`, 32bit int of `Flags`, and then, a 32bit it of the string length of `FileName` as `FileName` is dynamic and can be of any length, then write out the `FileName` string its self, and the same with `FileDirectory` length and `FileDirectory` string. After you have written `FileDirectory` string, you would then want to write the file data its self, note that this is not stored within the file entry as you probably dont want all this data to be stored within memory.

Once you have done that for everything in your `FileEntry` list, you can then close the file, and that will be all those files packed up neatly into a single custom pack file.

**For Reading**

We will essentially be doing the same thing, but we will be reading, rather than writing, and you will have to record an offset value so that you are able to track where a new file starts so that you can read its data out later on.

You would first need to read in the first 4 bytes of the file and test that they are set as "PACK", if they are we can continue as this is our file. Next, read in the next 4 bytes and covert to a 32bit integer so we can get the total number of files contained within this pack.

You can then run a for loop, something like `for(int i=0; i<g_max_files; i++)` to make things easier while we are looking for our `FileEntry`'s, remembering to increment our offset every time we read anything via our `StreamReader`. The first thing we check in our loop is the first 4 bytes after the file out match "FILE". If they match we then read out in 4 byte (32bit) chunks, `FileSize`, then `Flags` and then `FileName`'s length, once we know `FileName`'s length, we can read out `FileName` its self and repeat with `FileDirectory`. If you have been increasing the offset specified earlier, you should now have the file position in bytes of where the file data starts for this particular file, you can now create a new `FileEntry` and set all of the properties and add it to your file list and allow the loop to continue back to the next file.

**Modifying**

With modifying, if you are going to be INCREASING the file size of any of the files within the pack, you are going to have to recreate the pack, if you are decreasing the file size of any of the files, you can simply alter the `FileSize` int and pad the existing file data within the pack with null's.

If you are looking to leave the existing files as they are, but only add to the end, you are simply doing a modification of both reading, and creating. You just add on to the end of the pack you already have by using the creating part of this, and alter the total files int at the top of the file.

Hope this was helpful.

# ios - 如何在 UIWebView 中自动播放 YouTube 视频

> ID：15717754
> 
> 赞同：34
> 
> 时间：2013-03-30T10:59:16.670
> 
> 标签：ios, objective-c, youtube, uiwebview, youtube-api

我在这里看到了很多关于这个问题的帖子，但仍然找不到这个问题的完美答案。

所以我有一个表格视图，每个单元格里面都有一个播放按钮。当用户点击播放按钮时，我`UIWebView`会在此单元格中添加一个，然后播放 YouTube 视频。

```
static NSString *youTubeVideoHTML = @"<html>\
    <body style=\"margin:0;\">\
        <iframe class=\"youtube-player\" type=\"text/html\" width=\"%0.0f\" height=\"%0.0f\" src=\"http://www.youtube.com/embed/%@\" frameborder=\"0\">\
        </iframe>\
    </body>\
    </html>";

- (void)playVideoWithId:(NSString *)videoId {
    NSString *html = [NSString stringWithFormat:youTubeVideoHTML, self.frame.size.width, self.frame.size.height, videoId];

    [self loadHTMLString:html baseURL:nil];
} 
```

**问题：**

这段代码实际上并没有像我想要的那样播放视频，它只是启动 YouTube 播放器并使用 YouTube 红色播放按钮显示它。只有当用户点击红色按钮时，视频才会开始播放。
所以用户必须点击两个按钮，直到视频开始 - 这不是最好的用户体验......

就像我说的，我看到了很多关于这个问题的帖子，有些根本不起作用，有些有效，但有些问题让我很困扰。

我在@ilias的[这篇文章](https://stackoverflow.com/questions/9459711/detecting-uiwebview-finish-to-play-youtube-video-on-ipad)中找到了一个可行的解决方案，他展示了如何通过从文件中加载 HTML（而不是像我这样的字符串）来实现这一点，这个方法的问题是对于我播放的每个视频我需要：
加载 htm 文件 -> 将视频 ID 嵌入其中 -> 将文件写入光盘 -> 只有现在我才能播放视频。

奇怪的是，此解决方案仅在您从文件加载 Web 视图请求时才有效，如果我尝试从等于文件内容的字符串加载请求，则不起作用。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-03-30T18:04:29.937

显然问题出在 nil 基本 url 上，当我将其更改为 resourceURL 时，自动播放起作用了。

```
[self loadHTMLString:html baseURL:[[NSBundle mainBundle] resourceURL]]; 
```

自动播放 youtube 视频的完整代码（此代码主要基于[这篇文章](https://stackoverflow.com/questions/9459711/detecting-uiwebview-finish-to-play-youtube-video-on-ipad)，我只是将其更改为从字符串而不是文件加载）：

```
static NSString *youTubeVideoHTML = @"<!DOCTYPE html><html><head><style>body{margin:0px 0px 0px 0px;}</style></head> <body> <div id=\"player\"></div> <script> var tag = document.createElement('script'); tag.src = \"http://www.youtube.com/player_api\"; var firstScriptTag = document.getElementsByTagName('script')[0]; firstScriptTag.parentNode.insertBefore(tag, firstScriptTag); var player; function onYouTubePlayerAPIReady() { player = new YT.Player('player', { width:'%0.0f', height:'%0.0f', videoId:'%@', events: { 'onReady': onPlayerReady, } }); } function onPlayerReady(event) { event.target.playVideo(); } </script> </body> </html>";  

- (void)playVideoWithId:(NSString *)videoId {
    NSString *html = [NSString stringWithFormat:youTubeVideoHTML, self.frame.size.width, self.frame.size.height, videoId];

    [self loadHTMLString:html baseURL:[[NSBundle mainBundle] resourceURL]];
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-06-25T21:22:54.257

这里的关键是`playsinline=1`在你的 iFrame 播放器中设置，`allowsInlineMediaPlayback = true`并且`mediaPlaybackRequiresUserAction = false`为你的`UIWebView`. 这是我在 Swift 中的实现：

```
// Set up your UIWebView
let webView = UIWebView(frame: self.view.frame) // or pass in your own custom frame rect

self.view.addSubview(webView)
self.view.bringSubviewToFront(webView)

// Set properties
webView.allowsInlineMediaPlayback = true
webView.mediaPlaybackRequiresUserAction = false

// get the ID of the video you want to play
let videoID = "zN-GGeNPQEg" // https://www.youtube.com/watch?v=zN-GGeNPQEg

// Set up your HTML.  The key URL parameters here are playsinline=1 and autoplay=1
// Replace the height and width of the player here to match your UIWebView's  frame rect
let embededHTML = "<html><body style='margin:0px;padding:0px;'><script type='text/javascript' src='http://www.youtube.com/iframe_api'></script><script type='text/javascript'>function onYouTubeIframeAPIReady(){ytplayer=new YT.Player('playerId',{events:{onReady:onPlayerReady}})}function onPlayerReady(a){a.target.playVideo();}</script><iframe id='playerId' type='text/html' width='\(self.view.frame.size.width)' height='\(self.view.frame.size.height)' src='http://www.youtube.com/embed/\(videoID)?enablejsapi=1&rel=0&playsinline=1&autoplay=1' frameborder='0'></body></html>"

// Load your webView with the HTML we just set up
webView.loadHTMLString(embededHTML, baseURL: NSBundle.mainBundle().bundleURL) 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-11-30T18:29:46.603

这是完整的解决方案：

```
//
//  S6ViewController.m
//  
//
//  Created by Ökkeş Emin BALÇİÇEK on 11/30/13.
//  Copyright (c) 2013 Ökkeş Emin BALÇİÇEK. All rights reserved.
//

#import "S6ViewController.h"

@interface S6ViewController ()

@end

@implementation S6ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    [self playVideoWithId:@"sLVGweQU7rQ"];

}

- (void)playVideoWithId:(NSString *)videoId {

     NSString *youTubeVideoHTML = @"<html><head><style>body{margin:0px 0px 0px 0px;}</style></head> <body> <div id=\"player\"></div> <script> var tag = document.createElement('script'); tag.src = 'http://www.youtube.com/player_api'; var firstScriptTag = document.getElementsByTagName('script')[0]; firstScriptTag.parentNode.insertBefore(tag, firstScriptTag); var player; function onYouTubePlayerAPIReady() { player = new YT.Player('player', { width:'768', height:'1024', videoId:'sLVGweQU7rQ', events: { 'onReady': onPlayerReady } }); } function onPlayerReady(event) { event.target.playVideo(); } </script> </body> </html>";

    NSString *html = [NSString stringWithFormat:youTubeVideoHTML, videoId];

    UIWebView *videoView = [[UIWebView alloc] initWithFrame:CGRectMake(0, 0, 768, 1024)];
    videoView.backgroundColor = [UIColor clearColor];
    videoView.opaque = NO;
    //videoView.delegate = self;
    [self.view addSubview:videoView];

    videoView.mediaPlaybackRequiresUserAction = NO;

    [videoView loadHTMLString:youTubeVideoHTML baseURL:[[NSBundle mainBundle] resourceURL]];
}

@end 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-08-08T19:32:39.570

```
- (void)playVideoWithId:(NSString *)videoId {

NSString *youTubeVideoHTML = @"<html><head><style>body{margin:0px 0px 0px 0px;}</style></head> <body> <div id=\"player\"></div> <script> var tag = document.createElement('script'); tag.src = 'http://www.youtube.com/player_api'; var firstScriptTag = document.getElementsByTagName('script')[0]; firstScriptTag.parentNode.insertBefore(tag, firstScriptTag); var player; function onYouTubePlayerAPIReady() { player = new YT.Player('player', { width:'768', height:'1024', videoId:'%@', events: { 'onReady': onPlayerReady } }); } function onPlayerReady(event) { event.target.playVideo(); } </script> </body> </html>";

NSString *html = [NSString stringWithFormat:youTubeVideoHTML, videoId];

UIWebView *videoView = [[UIWebView alloc] initWithFrame:CGRectMake(0, 0, 320, 300)];
videoView.backgroundColor = [UIColor clearColor];
videoView.opaque = NO;
//videoView.delegate = self;
[self.view addSubview:videoView];

videoView.mediaPlaybackRequiresUserAction = NO;

[videoView loadHTMLString:html baseURL:[[NSBundle mainBundle] resourceURL]];
} 
```

我对上面的代码做了一些更正。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-06-15T05:58:27.900

使用以下代码在`UIWebView`

在这里，我们需要“嵌入链接”：

*   只需在浏览器中打开您的 youtube 链接
*   右键点击视频
*   选择“获取嵌入代码”选项
*   你会得到像 -

    ```
    <iframe width="640" height="390" src="https://www.youtube.com/embed/xtNXZA4XMBY" frameborder="0" allowfullscreen></iframe> 
    ```

*   复制“src”字段中的链接，这是您的嵌入链接

    现在只需将此嵌入链接放在以下代码中的“YOU_TUBE LINK”位置：

    ```
    NSString *htmlString = [NSString stringWithFormat:@"<html><head><meta name = \"viewport\" content = \"initial-scale = 1.0, user-scalable = yes, width = 320\"/></head><body style=\"background:#00;margin-top:0px;margin-left:0px\"><div><object width=\"320\" height=\"480\"><param name=\"movie\" value=\"YOUTUBE_LINK\"></param><param name=\"wmode\" value=\"transparent\"></param><embed src=\"YOUTUBE_LINK\"type=\"application/x-shockwave-flash\" wmode=\"transparent\" width=\"320\" height=\"480\"></embed></object></div></body></html>"];

    [self.webView_youTube loadHTMLString:htmlString baseURL:nil]; 
    ```

# ios - 符号键盘 UITextField

> ID：15717757
> 
> 赞同：1
> 
> 时间：2013-03-30T10:59:33.727
> 
> 标签：ios, uitextfield

如何设置 UITextField 以显示符号键盘（第一行带有 + - / 的键盘）。它似乎不在下拉列表中......我真的不需要数字，但我需要数学符号 +/- 等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T11:32:45.333

使用自定义键盘`textfeild.inputView=customKeyboard;`

[输入视图和输入附件视图](http://developer.apple.com/library/ios/#documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/InputViews/InputViews.html#//apple_ref/doc/uid/TP40009542-CH12-SW2)

[关联](http://blog.carbonfive.com/2012/03/12/customizing-the-ios-keyboard/)

这是我的自定义键盘：![我的自定义键盘](../Images/0c3cc4502d31255c3ea91b7243c48a25.png)

[我使用了这个来源](http://newtechsid.wordpress.com/apple/appledevlink/xcode-tutorial/developing-the-icalculator-application/)的 iCalculator.h 和 iCalculator.m 类

```
- (void)viewDidLoad{
[super viewDidLoad];
_calculator=[[iCalculator alloc]init];} 
```

这是我的 -(IBAction) 方法

```
-(IBAction) press:(id) sender{  
 [_calculator input:[sender titleForState:UIControlStateNormal]];
 [textfield setText:[_calculator displayValue]];
} 
```

# java - 2-3 树插入一些值的最佳方法

> ID：15717762
> 
> 赞同：1
> 
> 时间：2013-03-30T10:59:51.743
> 
> 标签：java, tree

例如我有这些**整数**：[2; 52; 5个；6；8]

1.  哪一种是最好的方法来插入例如一些 int 值以特定顺序使 2-3 树的节点尽可能少

2.  哪种方式最好有2-3棵树的尽可能多的节点

# ios - 更新 UITableView - 错误的单元格和相同的图像

> ID：15717767
> 
> 赞同：0
> 
> 时间：2013-03-30T11:00:41.850
> 
> 标签：ios, objective-c, ios6

我有一张带有少量文字的图像表。它是如何工作的：我有一个模型，它从 Instagram 获取 JSON 响应并将其全部放入字典数组中。在我的方法 cellForRowAtIndexPath 中，我将单元格的标签设置为 indexpath.row，然后使用 dispatch_async 开始下载图像（从模型中获取 url）。图像加载完成后，我检查比较当前单元格和当前 indexpath.row 的标签，如果它们相同，则绘制图像。它工作正常，直到我刷新我的模型。简单地重新加载相同的数据会导致表格出现奇怪的行为 - 它将前三个单元格显示为相同的图像。我该如何解决？

这是我的细胞方法：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];
    cell.tag = indexPath.row;

    if (self.loader.parsedData[indexPath.row] != nil)
    {
        cell.imageView.image = nil;

        dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0ul);
            dispatch_async(queue, ^(void) {

                NSString *url = [self.loader.parsedData[indexPath.row] objectForKey:@"imageLR"];

                if ([self.cache objectForKey:url] != nil)
                {
                    NSData *imageData = [self.cache objectForKey:url];
                    self.tempImage = [[UIImage alloc] initWithData:imageData];
                }

                else
                {

                NSData *imageData = [NSData dataWithContentsOfURL:[NSURL URLWithString:url]];
                self.tempImage = [[UIImage alloc] initWithData:imageData];
                [self.cache setObject:imageData forKey:[self.loader.parsedData[indexPath.row] objectForKey:@"imageLR"]];

                }
                dispatch_async(dispatch_get_main_queue(), ^{
                    if (cell.tag == indexPath.row)
                    {
                        cell.imageView.image = self.tempImage;
                        [cell setNeedsLayout];
                    }

                    });
            });

    cell.textLabel.text = [self.loader.parsedData[indexPath.row] objectForKey:@"id"];
    }

    return cell;
} 
```

我试过把 [tableview reloadData] 放在任何地方，但它没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T11:31:45.953

I have found a problem. I have used property on tableViewController to hold downloaded data. So at any time various blocks could write to it at same time and use that pointer for setting images. What happened on update, several blocks used it at the same time, resulting in same images. I have switched to using local NSData variable and it works good now.

# java - JTable 中的 JComboBox

> ID：15717769
> 
> 赞同：4
> 
> 时间：2013-03-30T11:00:45.380
> 
> 标签：java, swing, jtable, jcombobox, tablecelleditor

我在 JTable 的第 3 列和第 4 列中有一个 JComboBox，但我不知道如何获取它的项目...问题不是获取项目的方法，而是演员表

```
JComboBox combo=(JComboBox) jTable1.getColumnModel().getColumn(3).getCellEditor(); 
```

你能帮我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T11:27:01.590

被`JComboBox`包裹在一个`CellEditor`. 您必须检索包装的组件，例如在使用时`DefaultCellEditor`：

```
DefaultCellEditor editor = (DefaultCellEditor)table.getColumnModel().getColumn(3).getCellEditor();
JComboBox combo = (JComboBox)editor.getComponent(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T11:23:52.600

阅读本教程，了解如何在 JTable 中使用 JCombobox 作为编辑器。
[http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#combobox](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#combobox)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-24T15:41:24.273

尝试这样的事情：

```
 public void example(){  

      TableColumn tmpColum =table.getColumnModel().getColumn(1);
      String[] DATA = { "Data 1", "Data 2", "Data 3", "Data 4" };
      JComboBox comboBox = new JComboBox(DATA);

      DefaultCellEditor defaultCellEditor=new DefaultCellEditor(comboBox);
      tmpColum.setCellEditor(defaultCellEditor);
      tmpColum.setCellRenderer(new CheckBoxCellRenderer(comboBox));
      table.repaint();
   }

/**
   Custom class for adding elements in the JComboBox.
*/
class CheckBoxCellRenderer implements TableCellRenderer {
        JComboBox combo;
        public CheckBoxCellRenderer(JComboBox comboBox) {
            this.combo = new JComboBox();
            for (int i=0; i<comboBox.getItemCount(); i++){
                combo.addItem(comboBox.getItemAt(i));
            }
        }
        public Component getTableCellRendererComponent(JTable jtable, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
            combo.setSelectedItem(value);
            return combo;
        }
    } 
```

# c++ - 将数据转换为 C 标头作为存储为二进制的方式

> ID：15717772
> 
> 赞同：1
> 
> 时间：2013-03-30T11:01:07.293
> 
> 标签：c++, serialization, graphics, 3d

在图形中，有很多关于创建自定义二进制文件格式来存储 3d 资产的讨论，这样更常见的基于文本的格式（如 OBJ 和 COLLADA）就不必在运行时进行解析。说得通。

然而，这个二进制文件的实际创建并不那么简单，因为它涉及序列化或其他方法等技术，其中一些甚至不是由 C++ 原生处理，除非在其最新的变体中。

但我突然想到，如果我将其中一种基于文本的格式解析为 C 样式的标头，其中数据仅解析为`float`or`struct`声明，那么这些数据将与应用程序的其余部分一起编译为二进制文件。也就是说，解析是在应用程序外部完成的，可能是通过脚本完成的，然后在编译时处理转换为二进制文件，因为翻译单元包含标头。

我的想法是否正确，这与实际创建二进制文件格式并走这条路相比如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T11:13:14.393

您的想法是绝对正确的：您可以使用编译器的帮助将文本表示转换为二进制。我不会使用标题，而是将数据放在单独的翻译单元中，并保留一个固定的标题，其中包含脚本填充的数据结构的前向声明：

标题：

```
// This is fixed
extern float data_array[];
extern size_t data_array_cnt; 
```

CPP 文件：

```
// This gets generated by a script
float data_array[] = {1.2, 3.4, 5.6, 7.89 };
size_t data_array_cnt = sizeof(data_array)/sizeof(float); 
```

这两种方法之间的最大区别在于，将二进制表示保留在文件中可以让您在编译完所有内容*后*修改所表示的任何内容。事实上，您可以在生产环境中换入另一个二进制文件，它会立即生效。相比之下，每次二进制数据需要更改时，编译器路径都会强制您重新编译程序：实际上，您的二进制数据会“嵌入”到程序的内容中。

在支持动态链接的环境中，您可以通过将二进制数据隔离在单独的动态链接库中并将该库与“主”代码分开编译来制定中间解决方案。二进制数据仍然是代码的一部分，但现在您可以独立于程序的其余部分交换新数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T11:12:00.733

除了编译时间等，你搞砸了资源被打包到单独文件中的第一个、最大和最主要原因——它们是外部的和可交换的。几乎不可能使用这种标头格式创建任何类型的 DLC。

每次资源更改时，您的方式将强制重新编译相关项目部分，而将它们外部化会将解析移至运行时。艺术家可以处理他们的模型、纹理和其他所有内容，而开发人员则可以处理代码而不会互相干扰。

# android - Sherlock Actionbar Custom Font

> ID：15717778
> 
> 赞同：5
> 
> 时间：2013-03-30T11:01:29.853
> 
> 标签：android, actionbarsherlock, custom-font

I want to change the font of the **Action Bar Title**, **Tabs** and **Menu Items** to Roboto.

I am trying to figure out if this can be done via Styles ? since i am not able to create a custom view for these which is the best way to assign the custm font.

I have gone through the following links

[https://stackoverflow.com/a/14681975/155196](https://stackoverflow.com/a/14681975/155196)

[How to Set a Custom Font in the ActionBar Title?](https://stackoverflow.com/questions/8607707/how-to-set-a-custom-font-in-the-actionbar-title)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T13:26:36.307

Here's a code that did it for me:

```
<style name="AppTheme" parent="AppBaseTheme">
    ...
    <item name="android:typeface">serif</item>
    ...
</style> 
```

Look [here](https://stackoverflow.com/questions/6809944/default-font-set-on-android) for what fonts are available by default on android. From what I read adding other fonts is not possible without sub-classing your views, so I can't help you there.

EDIT: I may be wrong. Check this out: [http://www.jayway.com/2013/01/22/custom-typeface-in-android/](http://www.jayway.com/2013/01/22/custom-typeface-in-android/) and here: [http://www.androidguys.com/2008/08/18/fun-with-fonts/](http://www.androidguys.com/2008/08/18/fun-with-fonts/)

# php - php 构造 vs php 函数

> ID：15717780
> 
> 赞同：0
> 
> 时间：2013-03-30T11:01:32.033
> 
> 标签：php

尝试使用 php 构造显示多维数组根本不起作用：

```
<?php
$_arr=array("Names"=>array("mola","dola","kola","hola"));

echo $_arr;
?> 
```

但是如果我们使用**print_r()**函数而不是它以特定格式显示整个数组，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T11:06:04.103

试试`foreach`语句

```
foreach($_arr as $key => $value)
{
   foreach($value as $v)   
      echo "$key  => $v<br>\n";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T11:09:07.403

首先有一个括号不匹配，数组末尾缺少右括号。

`echo $_arr;`应该只返回“数组”。`print_r($_arr)`“打印关于变量的人类可读信息”参见[http://www.php.net/manual/en/function.print-r.php](http://www.php.net/manual/en/function.print-r.php)

你问为什么..因为这是这个函数的行为？;)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T11:10:27.693

您可以使用`print_r`或`var_dump`打印您的阵列。否则，`echo`在`foreach`循环中使用来迭代数组。`foreach`如果您正在迭代 2D 数组，则在第一个中的另一个。等等...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-30T11:21:18.240

```
function print_array($array){
 if(!is_array($array)){
  return false;
 }
 foreach($array as $v){
    if(is_array($v)){
      print_array($v);
    }
    else{
      echo "$v <br>\n";
    }
 }
}

print_array(array("one", array("a", "b", "c"))); 
```

输出：

```
one
a
b
c 
```

# asp.net-mvc-3 - MVC3客户端验证不起作用

> ID：15717781
> 
> 赞同：2
> 
> 时间：2013-03-30T11:01:32.647
> 
> 标签：asp.net-mvc-3, client-side-validation

我的应用程序中有一个页面，我在其中应用了 MVC 客户端验证`validate.min.js`，`validate.unobtrusive.min.js`但它不起作用。验证在服务器端工作正常，但在客户端却不行。我认为我用于菜单的 js 可能会造成问题。但我无法理解如何解决它，因为我使用的菜单需要菜单效果。

任何人如果有任何想法，请分享。

查看页面代码：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage<ApricaCRMEvent.Models.User_Detail>" %>

<asp:Content ID="Content1" ContentPlaceHolderID="TitleContent" runat="server">
    RegisterUser1
</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">

<h2>RegisterUser1</h2>

<script src="<%: Url.Content("~/Scripts/jquery.validate.min.js") %>" type="text/javascript"></script>
<script src="<%: Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js") %>" type="text/javascript"></script>

<% using (Html.BeginForm()) { %>
    <%: Html.ValidationSummary(true) %>
    <fieldset>
        <legend>User_Detail</legend>

        <div class="editor-label">
            <%: Html.LabelFor(model => model.Username) %>
        </div>
        <div class="editor-field">
            <%: Html.EditorFor(model => model.Username) %>
            <%: Html.ValidationMessageFor(model => model.Username) %>
        </div>

        <div class="editor-label">
            <%: Html.LabelFor(model => model.Password) %>
        </div>
        <div class="editor-field">
            <%: Html.EditorFor(model => model.Password) %>
            <%: Html.ValidationMessageFor(model => model.Password) %>
        </div>

        <div class="editor-label">
            <%: Html.LabelFor(model => model.Email_Add) %>
        </div>
        <div class="editor-field">
            <%: Html.EditorFor(model => model.Email_Add) %>
            <%: Html.ValidationMessageFor(model => model.Email_Add) %>
        </div>

        <div class="editor-label">
            <%: Html.LabelFor(model => model.Alt_Email_Add) %>
        </div>
        <div class="editor-field">
            <%: Html.EditorFor(model => model.Alt_Email_Add) %>
            <%: Html.ValidationMessageFor(model => model.Alt_Email_Add) %>
        </div>

        <div class="editor-label">
            <%: Html.LabelFor(model => model.ConfirmPassword) %>
        </div>
        <div class="editor-field">
            <%: Html.EditorFor(model => model.ConfirmPassword) %>
            <%: Html.ValidationMessageFor(model => model.ConfirmPassword) %>
        </div>

        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
<% } %>

<div>
    <%: Html.ActionLink("Back to List", "Index") %>
</div>

</asp:Content>

<asp:Content ID="Content3" ContentPlaceHolderID="HeadContent" runat="server">
</asp:Content> 
```

它生成html：

```
<!DOCTYPE html>

<html>
<head id="Head1"><title>

    RegisterUser1

</title><link href="../Content/Site.css" rel="stylesheet" type="text/css" />

    <script src="/Scripts/jquery-1.9.1.min.js" type="text/javascript"></script>
    <script src="/Scripts/modernizr-1.7.min.js" type="text/javascript"></script>

    <!-- for Menu (Imp: jquery.js and menu.js must be included at last in links for menu effects to work.)-->
    <link href="../Content/menu.css" rel="stylesheet" type="text/css" />
    <script src="../../Scripts/jquery.js" type="text/javascript"></script>
    <script src="../../Scripts/menu.js" type="text/javascript"></script>
    <!--- for menu end -->

</head>
<body>
    <div class="page">
        <header>

            <table id="header">

                <tr>
                    <td>
                        <div id="aprica_logo">

                            <img src="../../Content/images/Apricalogo.png" alt="Aprica" style="width: 134px;
                                height: 100px;" />
                        </div>
                    </td>
                    <td>
                        <div align="center" id="title">
                            <h1>
                                Aprica</h1>
                        </div>
                    </td>
                    <td>
                        <div id="logindisplay">

        Welcome <strong>admin</strong>
        [ <a href="/CRMLogin/LogOff">Log Out</a> ]

                        </div>
                    </td>
                </tr>
            </table>
            <div id="menu">
                <ul class="menu">
                    <li><a href="#" class="parent"><span>My Account</span></a>
                        <div>
                            <ul>
                                <li><a href="#"><span>Change Password</span></a></li>
                                <li><a href="#"><span>Message Passing</span></a></li>
                                <li><a href="#"><span>Edit Profile</span></a></li>
                            </ul>
                        </div>
                    </li>
                    <li>
                        <a href="/CRMDashboard/Dashboard">
                            <span>Dashboard</span></a></li>
                    <li><a href="/CRM/Index" class="parent"><span>CRM Request</span></a>
                        <div>
                            <ul>
                                <li><a href="/CRM/AddNewCRM"><span>Add New CRM Request</span></a></li>
                                <li><a href="/CRM/ViewNewlyArrivedCRMRequest"><span>CRM Request List</span></a></li>
                                <li><a href="/CRM/NewOldDoctor"><span>CRM Doctors List</span></a></li>
                                <li><a href="/CRM/AddCRMDoctorBudget"><span>Add New CRM Doctor</span></a></li>
                                <li><a href="/CRM/UpdateCRMDoctorBudgetMain"><span>Edit CRM Doctor</span></a></li>
                            </ul>
                        </div>
                    </li>
                    <li><a href="#" class="parent"><span>Reports</span></a>
                        <div>
                            <ul>
                                <li><a href="#" class="parent"><span>Chart Reports</span></a>
                                    <div>
                                        <ul>
                                            <li><a href="/ChartReport/Index"><span>CRM Request Reports</span></a>
                                            </li>
                                        </ul>
                                    </div>
                                </li>
                                <li><a href="/Report/CRMStatus"><span>CRM Request Status</span></a></li>
                                <li><a href="/Report/DoctorReport"><span>Doctor wise</span></a></li>
                            </ul>
                        </div>
                    </li>
                    <li><a href="#" class="parent"><span>Search</span></a>
                        <div>
                            <ul>
                                <li><a href="/Search/CRMIdIndex"><span>CRM Request Id Wise</span></a></li>
                                <li><a href="/Search/MDLNoIndex"><span>MDLNo Wise</span></a></li>
                                <li><a href="/Search/TerritoryIndex"><span>Territory Wise</span></a></li>
                                <li><a href="/Search/RequesterIndex"><span>TBM Wise</span></a></li>
                                <li><a href="/Search/PriorityIndex"><span>Priority Wise</span></a></li>
                                <li><a href="/Search/CRMStateIndex"><span>CRM State Wise</span></a></li>
                                <li><a href="/Search/ServiceStateIndex"><span>Service State Wise</span></a></li>
                            </ul>
                        </div>
                    </li>
                    <li><a href="/FilterCRMRequest/Index"><span>Filter CRM Requests</span></a></li>
                    <li><a href="#"><span>Settings</span></a></li>
                </ul>
            </div>
        </header>
        <section id="main">

<h2>RegisterUser1</h2>

<script src="/Scripts/jquery.validate.min.js" type="text/javascript"></script>
<script src="/Scripts/jquery.validate.unobtrusive.min.js" type="text/javascript"></script>

<form action="/CRMLogin/RegisterUser1" method="post">
    <fieldset>
        <legend>User_Detail</legend>

        <div class="editor-label">
            <label for="Username">Username</label>
        </div>
        <div class="editor-field">
            <input class="text-box single-line" data-val="true" data-val-required="The Username field is required." id="Username" name="Username" type="text" value="" />
            <span class="field-validation-valid" data-valmsg-for="Username" data-valmsg-replace="true"></span>
        </div>

        <div class="editor-label">
            <label for="Password">Password</label>
        </div>
        <div class="editor-field">
            <input class="text-box single-line password" data-val="true" data-val-required="The Password field is required." id="Password" name="Password" type="password" value="" />
            <span class="field-validation-valid" data-valmsg-for="Password" data-valmsg-replace="true"></span>
        </div>

        <div class="editor-label">
            <label for="Email_Add">Email address</label>
        </div>
        <div class="editor-field">
            <input class="text-box single-line" data-val="true" data-val-required="The Email address field is required." id="Email_Add" name="Email_Add" type="text" value="" />
            <span class="field-validation-valid" data-valmsg-for="Email_Add" data-valmsg-replace="true"></span>
        </div>

        <div class="editor-label">
            <label for="Alt_Email_Add">Alternate Email address</label>
        </div>
        <div class="editor-field">
            <input class="text-box single-line" data-val="true" data-val-required="The Alternate Email address field is required." id="Alt_Email_Add" name="Alt_Email_Add" type="text" value="" />
            <span class="field-validation-valid" data-valmsg-for="Alt_Email_Add" data-valmsg-replace="true"></span>
        </div>

        <div class="editor-label">
            <label for="ConfirmPassword">Confirm password</label>
        </div>
        <div class="editor-field">
            <input class="text-box single-line password" data-val="true" data-val-equalto="The password and confirmation password do not match." data-val-equalto-other="*.Password" id="ConfirmPassword" name="ConfirmPassword" type="password" value="" />
            <span class="field-validation-valid" data-valmsg-for="ConfirmPassword" data-valmsg-replace="true"></span>
        </div>

        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
</form>    

            <footer>
                <hr />
                <p>
                    Copyright (c) 2012</p>
                <hr />

            </footer>
        </section>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T06:35:27.303

类似的事情发生在我身上，我能够通过重新排序脚本来修复它。如果所有其他选项都用完了，您可以试试这个。

顺序是

```
Jquery-yourversion.js
MicrosoftAjax.js
MicrosoftMvcAjax.js
MicrosoftMvcValidation.js
YourOtherScripts.js 
```

我从另一个网络帖子中得到了这个提示，但现在找不到它来包含它作为参考。如果可行，则归功于该帖子的作者。

希望这可以帮助你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-07T20:01:16.447

我遇到了客户端验证不起作用的相同问题。我在 Chrome 中打开了 JavaScript 控制台，看到我收到一条错误消息，指出“未定义 JQuery。”。

原来我的视图中有一些代码导致 jQuery 无法加载。

建议遇到此问题的其他人，在浏览器中检查您的 JS 控制台，以确保您没有收到 JQuery 错误。

# php - 尝试在 PHP 中读取 XML 文件变量

> ID：15717787
> 
> 赞同：0
> 
> 时间：2013-03-30T11:02:30.753
> 
> 标签：php, parsing, xml-parsing

我有一个这样的计划的 xml 列表：

```
<plans>
  <plan>
        <name>LITE</name>
        <description>description</description>
        <rate>$9/Month</rate>
        <price>5</price>
        <period>1</period>
        <units>MONTH</units>
        <recurring>1</recurring>
        <acl>2</acl>
    </plan>
    <plan>
        <name>PRO</name>
        <description>description</description>
        <rate>$10/Year</rate>
        <price>5</price>
        <period>1</period>
        <units>YEAR</units>
        <recurring>0</recurring>
        <acl>3</acl>
    </plan>
</plans> 
```

但我不确定如何解析“句点”和“单位”参数。我正在尝试这样，但我认为有问题 - 就像我没有正确处理 DOM。

```
 //$plan is already set above.   
    $plans_xml = simplexml_load_file( "../plans.xml" );
    foreach ($plans_xml->plan->name as $item){
        //if the plan in the xml matches the plan the user signed up for
        if ($item == $plan){
        //set interval by concatenating period and units
        $interval = ($plans_xml->plan->period . $plans_xml->plan->units);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T11:16:58.010

```
foreach ($plans_xml->plan as $item){
    var_dump( $item->name );
} 
```

给，精简版专业版

那么你可以做你的条件检查

# javascript - 谁使用filedrop插件在asp.net中上传文件

> ID：15717789
> 
> 赞同：-1
> 
> 时间：2013-03-30T11:03:06.723
> 
> 标签：javascript, asp.net, html, file-upload

我尝试通过文件删除插件上传文件，但无法在 UploadHandler.ashx 中获取文件

我需要做的是上传文件

```
<fieldset id="zone">
  <legend>Drop a file inside&hellip;</legend>
  <p>Or click here to <em>Browse</em>..</p>
</fieldset>

<script type="text/javascript">
    // Tell FileDrop we can deal with iframe uploads using this URL:
    var options = { iframe: { url: 'UploadHandler.ashx'} };
    // Attach FileDrop to an area:
    var zone = new FileDrop('zone',options);

    // Do something when a user chooses or drops a file:
    zone.on.send.push(function (files) {
        alert(files.count.toString());
        // if browser supports files[] will contain multiple items.
        for (var i = 0; i < files.length; i++) {
            files[i].SendTo('UploadHandler.ashx');
            //var file = files[i];
        }
    });
</script> 
```

和 UploadHandler.ashx

```
context.Response.ContentType = "text/plain";
        HttpFileCollection httpfiles = context.Request.Files;
        for (int i = 0; i < httpfiles.Count; i++)
        {
            HttpPostedFile file = httpfiles[i];
            file.SaveAs(@"C:\"+ Path.GetFileName(file.FileName.ToString()));
        }
        context.Response.Write(httpfiles.Count.ToString()); 
```

如何通过 context.Request.Files 获取文件；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T14:31:45.123

尝试这个：

```
Request.InputStream.CopyTo(new FileStream("c:\\temp\" + Request.Params["HTTP_X_FILE_NAME"], FileMode.CreateNew)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-17T02:30:55.820

你应该这样写：

```
 HttpPostedFile  file;
  for(int i=0;i<context.Request.Files.Count;i++)
 {
  file=context.Reqeust.Filed[i];//this can get your file 
  //do something about the file;
 }
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-03T14:39:26.403

也许你可以看看这个：[http](http://html5demos.com/file-api) ://html5demos.com/file-api 这里还有一些类似的问题：[HTML5 FileReader Alternative](https://stackoverflow.com/questions/5570871/html5-filereader-alternative)

# mysql - MySQL: COUNT with multible GROUP BY

> ID：15717792
> 
> 赞同：1
> 
> 时间：2013-03-30T11:03:43.960
> 
> 标签：mysql, count, group-by

I have a table storing weatherdata in 5min intervals.

Now I need result with total raindays grouped by Year like this:.

```
2010 100 raindays
2011 120 raindays
2013 90  raindays 
```

This is my current query:

```
SELECT date, SUM(rain) FROM $tableName  GROUP BY date HAVING SUM(rain) > 0"; 
```

as expected, this gives me following result:

```
2010-01-02 1.2 (mm)
2010-01-05 1.6 (mm)
2010-02-10 2.6 (mm) 
```

How I have to change my query, to have this grouped by year(date) and counted days ?

Thanks all for your help

PM

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T11:11:07.130

You can group by YEAR(date), to sum the rain grouped by year. Then to count the number of days you can COUNT DISTINCT the days without the time part, using DATE(date) function.

```
SELECT YEAR(date), SUM(rain), COUNT(DISTINCT DATE(date)) days
FROM $tableName
WHERE rain>0
GROUP BY YEAR(date) 
```

Please see fiddle [here](http://sqlfiddle.com/#!2/1b5e7/1).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T11:17:24.360

The following query might help you if you want to find maximum element is each group,

```
select 
    e.date, e.rain
from
    TableName e
        join
    (select 
        date, MAX(rain) MS
    from
        TableName
    group by date
    Having rain > 0) m ON e.date = M.date and e.rain = m.rain 
```

# c++ - std::stringstream 就像类中的私有变量

> ID：15717793
> 
> 赞同：-1
> 
> 时间：2013-03-30T11:04:19.327
> 
> 标签：c++, class, std, stringstream

我想在课堂上像私有变量一样使用 std::stringstream 。但我有一个错误“未声明的标识符”。请解释原因并告诉我我该怎么做。

```
class Test
{
private:
    std::stringstream str;    
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T11:06:04.720

很可能您没有包含正确的头文件。另外，不要忘记类定义末尾的分号：

```
#include <sstream> // <== This is what you need for std::stringstream

class Test
{
private:
    std::stringstream str;    
}; // <== Don't forget the semicolon 
```

# javascript - 如何“命名”ajax 调用的结果

> ID：15717797
> 
> 赞同：0
> 
> 时间：2013-03-30T11:04:50.270
> 
> 标签：javascript, jquery, arrays

我可以使用以下代码让用户在填写表格时只选择一个自动完成选项，效果很好：

```
var validOptions = ["Bold", "Normal", "Default", "100", "200"]
previousValue = "";

$('#ac').autocomplete({
    autoFocus: true,
    source: validOptions
}).keyup(function() {
    var isValid = false;
    for (i in validOptions) {
        if (validOptions[i].toLowerCase().match(this.value.toLowerCase())) {
            isValid = true;
        }
    }
    if (!isValid) {
        this.value = previousValue
    } else {
        previousValue = this.value;
    }
}); 
```

但是，我使用 ajax 来动态创建数组，如下所示，因此我没有数组的**名称**，例如上面的**validOptions**。

**问题**如何通过以下方法使用上述“方式”

```
$('#ac').autocomplete({
    autoFocus: true,
    source: "/pages/includes/getAgent.php",
    select: function( event, ui ) {
        $('#autoc1').val(ui.item.agent_name);
        $('#comm').val(ui.item.commission_percent);
        return false;
    }
    }).keyup(function() {
        var isValid = false;

        // here is the issue, the new data is not called validOptions
        for (i in validOptions) {
        if (validOptions[i].toLowerCase().match(this.value.toLowerCase())) {

            isValid = true;
        }
    }
        if (!isValid) {
            this.value = previousValue
        } else {
            previousValue = this.value;
        }
    }).data( "ui-autocomplete" )._renderItem = function( ul, item ) {
        return $( "<li>" )
        .append( "<a>" + item.agent_name + "</a>" )
        .appendTo( ul )
    }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T11:32:40.710

您将无法使用`keyup`事件。相反，您需要设置`source`功能并发出您自己的 AJAX 请求。在该请求的回调中测试返回结果的长度是否有效，或设置服务器端返回具有不同属性的 JSON 以识别结果数量和结果本身

在函数中创建自己的 AJAX 示例请参阅[带有缓存](http://jqueryui.com/autocomplete/#remote-with-cache)的远程数据演示的源代码`source`

与其更改用户意外行为的输入值，不如设置错误指示器和/或调整自定义`_renderItem`方法以显示`No results`。这将允许用户查看输入的内容，以防输入错误。

如果没有返回值，另一种显示方式`no results`是在 AJAX 回调中操作数据

# asp.net - Email Address Varification Application in ASP.NET

> ID：15717802
> 
> 赞同：0
> 
> 时间：2013-03-30T11:05:25.327
> 
> 标签：asp.net, email

I am getting 555 syntax error in mailfrom

```
SendData(tcpSocket, string.Format("MAIL From: {0}\r\n", MailFrom));
if (!CheckResponse(tcpSocket, 220))
{
tcpSocket.Close();
return false;
} 
```

is it the problem in my local system because of localhost? Please help me. I am using this code from below link.

[http://www.codeproject.com/Articles/5189/End-to-end-Email-Address-Verification-for-Applicat](http://www.codeproject.com/Articles/5189/End-to-end-Email-Address-Verification-for-Applicat)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T11:12:31.773

Please don't try to implement your own SMTP client, use the one that comes with .NET: `System.Net.Mail.SmtpClient`.

Many SMTP servers require TLS, for example, which your code does not account for.

此外，出于安全原因，大多数邮件服务器不会透露`RCPT TO`一行中的电子邮件地址是否有效。如果一个系统可以肯定地揭示一个地址的存在，那么它就可以被垃圾邮件收集者使用。因此，使用 SMTP 客户端的试运行只能用于*验证*电子邮件地址（因为有关有效电子邮件地址的复杂规则）。*验证*（与验证不同的概念）必须通过要求用户回复发送到该地址的电子邮件来手动执行，没有其他方法可以确定。

# symfony - Symfony2 - PUGXMultiUserBundle - 无法实例化抽象类

> ID：15717814
> 
> 赞同：0
> 
> 时间：2013-03-30T11:06:16.713
> 
> 标签：symfony

我尝试安装 PUGXMultiUserBundle，现在当我执行所有步骤时，我尝试加载应用程序（仅主要位置：），`http://localhost/jpp/web/app_dev.php`但我总是收到以下错误：

致命错误：无法在第 155 行的 C:\xampp\htdocs\JPP\vendor\symfony\symfony\src\Symfony\Component\Security\Core\Authentication\Token\AbstractToken.php 中实例化抽象类 JPP\UserBundle\Entity\User

我尝试了几件事都没有成功，请你帮帮我吗？您可以在下面找到我的实体类。我能够使用 GIT 在数据库中创建所有表。租用类位于：JPP/UserBundle/Entity。如果您需要更多文件，请告诉我...非常感谢！

罗杰

抽象用户类：

```
<?php

namespace JPP\UserBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use FOS\UserBundle\Entity\User as BaseUser;

/**
 * @ORM\Entity
 * @ORM\Table(name="user")
 * @ORM\InheritanceType("JOINED")
 * @ORM\DiscriminatorColumn(name="type", type="string")
 * @ORM\DiscriminatorMap({"userprofile" = "UserProfile", "usercompany" = "UserCompany"})
 *
 */
abstract class User extends BaseUser
{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;
} 
```

类 UserCompany

```
<?php

// src/jpp/UserBundle/Entity/User.php

namespace JPP\UserBundle\Entity;

use PUGX\MultiUserBundle\Validator\Constraints\UniqueEntity;
use Doctrine\ORM\Mapping as ORM;

/**
 * @ORM\Entity
 * @ORM\Table(name="userCompany")
 * @UniqueEntity(fields = "username", targetClass = "JPP\UserBundle\Entity\User", message="fos_user.username.already_used")
 * @UniqueEntity(fields = "email", targetClass = "JPP\UserBundle\Entity\User", message="fos_user.email.already_used")
 */
class UserCompany extends User
{
    /**
     * @var integer
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;

    /**
     * @var integer
     *
     * @ORM\Column(name="usertype", type="integer")
     */
    protected $userType;    

    /**
     * @var string
     *
     * @ORM\Column(name="companyName", type="string", length=255)
     */
    protected $companyName;

    /**
     * @var string
     *
     * @ORM\Column(name="sector", type="string", length=255)
     */
    protected $sector;

    /**
     * @var string
     *
     * @ORM\Column(name="amountOfEmployees", type="string", length=255)
     */
    protected $amountOfEmployees;

    /**
     * @var string
     *
     * @ORM\Column(name="turnover", type="string", length=255)
     */
    protected $turnover;

    /**
     * @var string
     *
     * @ORM\Column(name="companyLink", type="string", length=255)
     */
    protected $companyLink;

    /**
     * @var string
     *
     * @ORM\Column(name="facebookLink", type="string", length=255)
     */
    protected $facebookLink;

    /**
     * @var string
     *
     * @ORM\Column(name="twitterLink", type="string", length=255)
     */
    protected $twitterLink;

    /**
     * Get id
     *
     * @return integer 
     */
    public function getId()
    {
        return $this->id;
    }

    /**
     * Set userType
     *
     * @param integer $userType
     * @return UserType
     */
    public function setUserType($userType)
    {
        $this->userType = $userType;

        return $this;
    }

    /**
     * Get userType
     *
     * @return integer 
     */
    public function getUserType()
    {
        return $this->userType;
    }

    /**
     * Set companyName
     *
     * @param string $companyName
     * @return Company
     */
    public function setCompanyName($companyName)
    {
        $this->companyName = $companyName;

        return $this;
    }

    /**
     * Get companyName
     *
     * @return string 
     */
    public function getCompanyName()
    {
        return $this->companyName;
    }

    /**
     * Set sector
     *
     * @param string $sector
     * @return Company
     */
    public function setSector($sector)
    {
        $this->sector = $sector;

        return $this;
    }

    /**
     * Get sector
     *
     * @return string 
     */
    public function getSector()
    {
        return $this->sector;
    }

    /**
     * Set amountOfEmployees
     *
     * @param string $amountOfEmployees
     * @return Company
     */
    public function setAmountOfEmployees($amountOfEmployees)
    {
        $this->amountOfEmployees = $amountOfEmployees;

        return $this;
    }

    /**
     * Get amountOfEmployees
     *
     * @return string 
     */
    public function getAmountOfEmployees()
    {
        return $this->amountOfEmployees;
    }

    /**
     * Set turnover
     *
     * @param string $turnover
     * @return Company
     */
    public function setTurnover($turnover)
    {
        $this->turnover = $turnover;

        return $this;
    }

    /**
     * Get turnover
     *
     * @return string 
     */
    public function getTurnover()
    {
        return $this->turnover;
    }

    /**
     * Set companyLink
     *
     * @param string $companyLink
     * @return Company
     */
    public function setCompanyLink($companyLink)
    {
        $this->companyLink = $companyLink;

        return $this;
    }

    /**
     * Get companyLink
     *
     * @return string 
     */
    public function getCompanyLink()
    {
        return $this->companyLink;
    }

    /**
     * Set facebookLink
     *
     * @param string $facebookLink
     * @return Company
     */
    public function setFacebookLink($facebookLink)
    {
        $this->facebookLink = $facebookLink;

        return $this;
    }

    /**
     * Get facebookLink
     *
     * @return string 
     */
    public function getFacebookLink()
    {
        return $this->facebookLink;
    }

    /**
     * Set twitterLink
     *
     * @param string $twitterLink
     * @return Company
     */
    public function setTwitterLink($twitterLink)
    {
        $this->twitterLink = $twitterLink;

        return $this;
    }

    /**
     * Get twitterLink
     *
     * @return string 
     */
    public function getTwitterLink()
    {
        return $this->twitterLink;
    }

} 
```

类用户配置文件

```
// src/jpp/UserBundle/Entity/User.php

namespace JPP\UserBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use PUGX\MultiUserBundle\Validator\Constraints\UniqueEntity;

/**
 * @ORM\Entity
 * @ORM\Table(name="userProfile")
 * @UniqueEntity(fields = "username", targetClass = "JPP\UserBundle\Entity\User", message="fos_user.username.already_used")
 * @UniqueEntity(fields = "email", targetClass = "JPP\UserBundle\Entity\User", message="fos_user.email.already_used")
 */
class UserProfile extends User
{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;

    /**
     * @var integer
     *
     * @ORM\Column(name="usertype", type="integer")
     */
    protected $userType;  

    /**
     * @ORM\Column(type="string", length=255)
     *
     */
    protected $foreName;

    /**
     * @ORM\Column(type="string", length=255)
     *
     */
    protected $surName;    

    /**
     * @ORM\Column(type="string", length=255)
     *
     */
    protected $street;  

    /**
     * @ORM\Column(type="string", length=255)
     *
     */
    protected $plz;

    /**
     * @ORM\Column(type="string", length=255)
     *
     */
    protected $place; 

    /**
     * @ORM\Column(type="string", length=255)
     *
     */
    protected $phone;

    /**
     * @ORM\Column(type="string", length=255)
     *
     */
    protected $mobile;  

    /**
     * Get id
     *
     * @return integer 
     */
    public function getId()
    {
        return $this->id;
    }   

    /**
     * Set userType
     *
     * @param integer $userType
     * @return UserType
     */
    public function setUserType($userType)
    {
        $this->userType = $userType;

        return $this;
    }

    /**
     * Get userType
     *
     * @return integer 
     */
    public function getUserType()
    {
        return $this->userType;
    }

     /**
     * Set foreName
     *
     * @param string $foreName
     * @return ForeName
     */
    public function setForeName($foreName)
    {
        $this->foreName = $foreName;

        return $this;
    }

    /**
     * Get foreName
     *
     * @return string 
     */
    public function getForeName()
    {
        return $this->foreName;
    }

     /**
     * Set surName
     *
     * @param string $surName
     * @return SurName
     */
    public function setSurName($surName)
    {
        $this->surName = $surName;

        return $this;
    }

    /**
     * Get surName
     *
     * @return string 
     */
    public function getSurName()
    {
        return $this->surName;
    }

     /**
     * Set street
     *
     * @param string $street
     * @return Street
     */
    public function setStreet($street)
    {
        $this->street = $street;

        return $this;
    }

    /**
     * Get street
     *
     * @return string 
     */
    public function getStreet()
    {
        return $this->street;
    }

     /**
     * Set plz
     *
     * @param string $plz
     * @return PLZ
     */
    public function setPlz($plz)
    {
        $this->plz = $plz;

        return $this;
    }

    /**
     * Get plz
     *
     * @return string 
     */
    public function getPlz()
    {
        return $this->plz;
    }

     /**
     * Set place
     *
     * @param string $place
     * @return Place
     */
    public function setPlace($place)
    {
        $this->place = $place;

        return $this;
    }

    /**
     * Get place
     *
     * @return string 
     */
    public function getPlace()
    {
        return $this->place;
    }    

     /**
     * Set phone
     *
     * @param string $phone
     * @return Phone
     */
    public function setPhone($phone)
    {
        $this->phone = $phone;

        return $this;
    }

    /**
     * Get phone
     *
     * @return string 
     */
    public function getPhone()
    {
        return $this->phone;
    }

     /**
     * Set mobile
     *
     * @param string $mobile
     * @return Mobile
     */
    public function setMobile($mobile)
    {
        $this->mobile = $mobile;

        return $this;
    }

     /**
     * Get mobile
     *
     * @return string 
     */
    public function getMobile()
    {
        return $this->mobile;
    }

    //public function __construct()
    //{
    //    parent::__construct();
        // your own logic
    //}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T16:13:35.027

错误说：

`Fatal error: Cannot instantiate abstract class JPP\UserBundle\Entity\User in C:\xampp\htdocs\JPP\vendor\symfony\symfony\src\Symfony\Component\Security\Core\Authentication\Token\AbstractToken.php on line 155`

这意味着 Symfony 试图实例化你的`User`类（例如 new User()）但失败了，因为这个类是抽象的。因此，只需删除抽象定义。

代替

`abstract class User extends BaseUser`

和

`class User extends BaseUser`

# javascript - Scrolling window to zero to hide Mobile Safari browser chrome seems slower than Twitter's

> ID：15717815
> 
> 赞同：0
> 
> 时间：2013-03-30T11:06:29.160
> 
> 标签：javascript, iphone, scroll, mobile-safari

I'm using the following JS to scroll the window to position 0 to fool the browser into hiding its UI chrome.

```
if navigator.userAgent.match(/iPhone/i) or navigator.userAgent.match(/iPod/i)
  if document.URL.indexOf("#") is -1
    window.addEventListener "load", ->
      setTimeout (->
        window.scrollTo 0, 1  if window.pageYOffset < 20
      ), 0 
```

You can view the site at [http://ssaen.s3-website-ap-southeast-1.amazonaws.com](http://ssaen.s3-website-ap-southeast-1.amazonaws.com) on your iPhone or iPod touch. The scroll happens quickly but there is a big delay before the chrome goes away.

Compare this to [http://mobile.twitter.com](http://mobile.twitter.com) (you'll have to login to see the main UI), the chromes goes away almost immediately. Twitter's scripts are obscured so I can't see them.

Any advice?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T11:35:38.630

I suspect the JS scripts at the bottom are blocking the page `load` event. You can try concatenate all the JS files into one and use `<script defer>`.

Refer to the [compatibility table](http://caniuse.com/script-defer) for the `defer` attribute. Also do look at the [`async` attribute](http://caniuse.com/script-async) as well.

# java - 命令提示符输出将打印在摆动面板本身上。

> ID：15717817
> 
> 赞同：-2
> 
> 时间：2013-03-30T11:06:35.910
> 
> 标签：java, swing, networking

实际上，我已经创建了一个摆动面板，它接收来自用户的输入，例如 sourceno、destinationno、ttl，并基于这些数据，我将应用我的纯随机传播算法 (PRP) 来找出网络中遍历的路由节点。下面的代码 (PRP.java) 将在按下摆动面板中的提交按钮时在命令提示符下打印遍历的路由节点。

我需要修改代码，以便在按下提交按钮时，生成的遍历路线应打印在提交按钮下方同一面板中的文本框中，而不是在命令提示符下

请建议修改代码.....

```
import java.awt.*;
import javax.swing.*;
import java.awt.event.*;
import java.sql.*;
import java.util.*;

public class PRP extends JFrame
{

JTextField srcno;
JTextField destno;
JTextField ttl;
JTextField datapayload;
JLabel srcnode;
JLabel destnode;
JLabel TTL;
JLabel Datapayload;
JButton submit;
JTextArea textFieldName;

  public PRP()
  {

    PRPLayout customLayout = new PRPLayout();

    getContentPane().setFont(new Font("Helvetica", Font.PLAIN, 12));
    getContentPane().setLayout(customLayout);

    srcnode = new JLabel("Enter source node:");
    getContentPane().add(srcnode);

    srcno = new JTextField("number");
    getContentPane().add(srcno);

    destnode = new JLabel("Enter destination node:");
    getContentPane().add(destnode);

    destno = new JTextField("number");
    getContentPane().add(destno);

    TTL = new JLabel("Enter TTL:");
    getContentPane().add(TTL);

    ttl = new JTextField("number");
    getContentPane().add(ttl);

     Datapayload = new JLabel("Enter DataPayload:");
    getContentPane().add(Datapayload);

    datapayload = new JTextField("abcd...");
    getContentPane().add(datapayload);

    submit = new JButton("submit");
    getContentPane().add(submit);

    textFieldName = new JTextArea("PRP ROUTING:",80,10);
    textFieldName.setEditable( false );
    JScrollPane scroll = new JScrollPane(textFieldName) ;
    scroll.setBounds( 10, 60, 225, 150 );
    getContentPane().add( scroll );

    submit.addActionListener(new ActionListener()
                                         {
                                            public void actionPerformed(ActionEvent e) 
                                            {

                                              String[]  prpdata = new String[3];
                                              prpdata[0]=srcno.getText();
                                              prpdata[1]=destno.getText();
                                              prpdata[2]=ttl.getText();
                                              try{ 
                                              PRP pr = new PRP();
                                              pr.PRPRoute(prpdata); }
                                              catch(Exception ez){ textFieldName.append("exception in caller method"); }

                                             }
                                           });

    setSize(getPreferredSize());

    }

    public void PRPRoute(String argus[]) throws ClassNotFoundException,SQLException
    {

     String url="jdbc:oracle:thin:@localhost:1521:xe";
     String u="proj";
     String p="bade";
     String src=argus[0];
     String dest=argus[1];
     int ttl=Integer.parseInt(argus[2]);
     Class.forName("oracle.jdbc.driver.OracleDriver");
     Connection con=DriverManager.getConnection(url,u,p);
     if(con==null)
     {
       textFieldName.append("not connected to oracle");
       return;
      }

     textFieldName.append("connected to oracle");

     String query= "select distinct RFrom,RTo from router where RFrom='"+src+"'"+"or "+ "RTo='"+src+"'";

     Statement st=con.createStatement();
     ResultSet rs=st.executeQuery(query);

     ResultSetMetaData rsmd = rs.getMetaData();

     int j=-1;

     String[]  randata = new String[30];
     textFieldName.append( "\n\t"+"Neighbors of " + src+"::");  

     while( rs.next() )
     {  
       j++;
       for (int i = 1; i <= rsmd.getColumnCount(); i++)
      {

        String ss=rs.getString( i );
        if(!(ss.equals(src)))
        {
           textFieldName.append( "\t" + ss );
           randata[j]=ss ;  
        }
      }

      textFieldName.append( "\n\n" );   
     }
     int k=0;
     textFieldName.append("\n"+"Checking for 1-hop neighbours. . . .");

     for(int i=0;i<=j;i++)
     {
        if(randata[i].equals(dest))
        textFieldName.append("1-hop neighbour found");
        textFieldName.append( "\t" + "Routing followed:"+src+"--->" +randata[i]);
        textFieldName.append("\n\t successfully routed!");
        k=i;
        break;
      }
   }

   if(!(randata[k].equals(dest)))
   {
    textFieldName.append("Choosen dispersive PRP strategy!!!");
    textFieldName.append( "\t" + "Routing followed:"+src+"--->" );
    Random r=new Random();
    if(ttl<=0) { 
              textFieldName.append("MINHOP ROUTING STARTED");

           }
     else {
          ttl--;
          String next=randata[r.nextInt(j)];
          textFieldName.append(next);
          if(next.equals(dest)) { textFieldName.append("\n\t successfully routed!"); }
          else{
               String[] indata = new String[3];
               indata[0]=next;
               indata[1]=dest;
               indata[2]=Integer.toString(ttl);
               try{ PRPRouteout pr=new PRPRouteout(indata); }
               catch(Exception ezl){ textFieldName.append("exception in PRPRouteut caller method"); }

             }
         }
     }

    }

 public static void main(String args[])
 {
    PRP window = new PRP();

    window.setTitle("PRP");
    window.pack();
    window.show();
 }
}

class PRPLayout implements LayoutManager
{
  public PRPLayout() {  }
  public void addLayoutComponent(String name, Component comp) {   }
  public void removeLayoutComponent(Component comp) {  }
  public Dimension preferredLayoutSize(Container parent)
 {
    Dimension dim = new Dimension(0, 0);
    Insets insets = parent.getInsets();
    dim.width = 320 + insets.left + insets.right;
    dim.height = 240 + insets.top + insets.bottom;
     return dim;
 }

 public Dimension minimumLayoutSize(Container parent)
 {
    Dimension dim = new Dimension(0, 0);
    return dim;
 }
 public void layoutContainer(Container parent) 
 {
    Insets insets = parent.getInsets();
    Component c;
    c = parent.getComponent(0);
    if (c.isVisible()) {c.setBounds(insets.left+90,insets.top+8,172,26);}
    c = parent.getComponent(1);
    if (c.isVisible()) {c.setBounds(insets.left+230,insets.top+8,172,26);}
    c = parent.getComponent(2);
    if (c.isVisible()) {c.setBounds(insets.left+90,insets.top+40,172,26);}
    c = parent.getComponent(3);
    if (c.isVisible()) {c.setBounds(insets.left+230,insets.top+40,172,26);}
    c = parent.getComponent(4);
    if (c.isVisible()) {c.setBounds(insets.left+90,insets.top+72,172,26);}
    c = parent.getComponent(5);
    if (c.isVisible()) {c.setBounds(insets.left+230,insets.top+72,172,26);}
    c = parent.getComponent(6);
    if (c.isVisible()) {c.setBounds(insets.left+90,insets.top+112,172,26);}
    c = parent.getComponent(7);
    if (c.isVisible()) {c.setBounds(insets.left+230,insets.top+112,172,26);}
    c = parent.getComponent(8);
    if (c.isVisible()) {c.setBounds(insets.left+230,insets.top+152,142,26);}
    c = parent.getComponent(9);
    if (c.isVisible()) {c.setBounds(insets.left+90,insets.top+200,472,268);}
 }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T11:11:43.730

如果我正确理解了您的问题，请尝试以下操作：

使用`textFieldName.setText();`代替`System.out.println();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T12:41:05.873

I dont know about your code. But i know the way which we can use the Ping or trace route... and take the result into .txt file. Write your command like that ping 192.168.1.1 -t > filename.txt

mind if your use this too To delay between pings and record the time of each you can do some scripting.

@ECHO OFF :LOOPSTART time /T ping xxx.xxx.xxx.xxx -n 4 >> filename.txt ping yyy.yyy.yyy.yyy -n 4 >> filename.txt sleep -m 3000 GOTO LOOPSTART

it will create a File in root directory. and it will print all the results untill your exit the command.

# android - 广播接收器通知

> ID：15717823
> 
> 赞同：0
> 
> 时间：2013-03-30T11:07:27.400
> 
> 标签：android

当我的应用成功发送短信时，我正在尝试接收通知。我`BroadcastReceiver`用于通知。我在 中注册并在 中`onResume()`注销`onPause()`。但即使发送了短信，它也不会通知。我在循环中设置了断点`BroadcastReceiver`并且没有任何通知。可能是什么问题呢？我的代码如下。

```
@Override
public void onResume() {
    super.onResume();

    //---create the BroadcastReceiver when the SMS is sent---
    smsSentReceiver = new BroadcastReceiver(){
        @Override
        public void onReceive(Context arg0, Intent arg1) {

            switch (getResultCode())
            {
                case Activity.RESULT_OK:
                    Toast.makeText(getBaseContext(), "SMS sent",
                        Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_GENERIC_FAILURE:
                    Toast.makeText(getBaseContext(), "Generic failure",
                        Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_NO_SERVICE:
                    Toast.makeText(getBaseContext(), "No service",
                        Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_NULL_PDU:
                    Toast.makeText(getBaseContext(), "Null PDU",
                        Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_RADIO_OFF:
                    Toast.makeText(getBaseContext(), "Radio off",
                        Toast.LENGTH_SHORT).show();
                    break;
            }
        }
    };

    //---create the BroadcastReceiver when the SMS is delivered---
    smsDeliveredReceiver = new BroadcastReceiver(){
        @Override
        public void onReceive(Context arg0, Intent arg1) {
            switch (getResultCode())
            {
               case Activity.RESULT_OK:
                   Toast.makeText(getBaseContext(), "SMS delivered",
                        Toast.LENGTH_SHORT).show();
                   break;
               case Activity.RESULT_CANCELED:
                   Toast.makeText(getBaseContext(), "SMS not delivered",
                        Toast.LENGTH_SHORT).show();
                   break;
            }
        }
    }; 

    //---register the two BroadcastReceivers---
    registerReceiver(smsSentReceiver, new IntentFilter(SENT));
    registerReceiver(smsDeliveredReceiver, new IntentFilter(DELIVERED));      
}

@Override
public void onPause() {
    super.onPause();
    //---unregister the two BroadcastReceivers---
    unregisterReceiver(smsSentReceiver);
    unregisterReceiver(smsDeliveredReceiver);        
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T14:47:13.070

我不确定您的用例。该文档建议您在 onPause 中取消注册接收器，但如果在您的应用程序处于后台时发送它，您将错过意图。如果您想在后台接收意图，您有两种选择：

1.  运行服务并在那里注册接收器。
2.  如果可能，您可以在清单中注册广播接收器。

[文件](http://developer.android.com/reference/android/content/BroadcastReceiver.html)说_

> 注意：如果在 Activity.onResume() 实现中注册接收器，则应在 Activity.onPause() 中取消注册。（暂停时您不会收到意图，这将减少不必要的系统开销）。

还要确保您在 ACTION 字符串（“android.provider.Telephony.SMS_RECEIVED”）中没有任何拼写错误，并且拥有正确的权限（“android.permission.RECEIVE_SMS”）。

编辑请看（尤其是 CommonsWare 的回答）

[Android 发送短信的意图是什么？](https://stackoverflow.com/questions/4116330/what-is-the-android-sent-sms-intent)

[用于发送 SMS 消息的 Android 广播接收器？](https://stackoverflow.com/questions/990558/android-broadcast-receiver-for-sent-sms-messages)

> “当 Android 发送 SMS 时没有广播意图。这可能是出于隐私原因。”...CommonsWare

# c# - 奇怪的硒值返回

> ID：15717825
> 
> 赞同：0
> 
> 时间：2013-03-30T11:07:51.387
> 
> 标签：c#, selenium, phantomjs

我正在使用 Selenium 和 PhantomJsdriver

```
 using (IWebDriver driver = new PhantomJSDriver())
    {                   

                driver.Navigate().GoToUrl("http://www.google.com");                   

               var  content = driver.PageSource;  >> wrong content return
    } 
```

内容总是得到`"<html><head></head><body></body></html>"`

但`driver.PageSource`可以正确获取完整的网站内容。

那有什么问题？真是奇怪的行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T11:11:07.260

您遇到时间问题。在加载整个`DOM`内容之前检索内容。最简单的检查方法是`Thread.Sleep(2000)`在检索内容之前添加。但是，这不是一个好的做法，因此请在检索内容之前利用驱动程序为您提供的事件，或者在检索内容之前等待`DOM`加载特定元素。

# heroku - RestAPI 和 Neo4j

> ID：15717827
> 
> 赞同：0
> 
> 时间：2013-03-30T11:08:21.627
> 
> 标签：heroku, neo4j

任何人都可以帮助解决这些 Neo4j (1.9) 错误和使用 JDK 1.6 和 Heroku 的 RestApi。

代码的目的只是演示在 Java 中使用 cypher 和 Neo4j 的功能。我知道只有 RestAPI 在 Heroku 工作。

```
package com.example;

import java.util.List;

import org.neo4j.graphdb.Direction;
import org.neo4j.graphdb.GraphDatabaseService;
import org.neo4j.graphdb.Node;
import org.neo4j.graphdb.Relationship;
import org.neo4j.graphdb.RelationshipType;
import org.neo4j.graphdb.Transaction;
import org.neo4j.graphdb.factory.GraphDatabaseFactory;
import org.neo4j.helpers.collection.*;
import org.neo4j.rest.graphdb.RestAPI;
import org.neo4j.rest.graphdb.RestAPIFacade;
import org.neo4j.rest.graphdb.RestGraphDatabase;
import org.neo4j.rest.graphdb.query.RestCypherQueryEngine;
import org.neo4j.rest.graphdb.util.*;
import org.springframework.stereotype.Component;
import java.util.Map;

 import com.example.IDatabaseConnector;
//import org.neo4j.rest.graphdb.RestGraphDatabase;
//import org.neo4j.

@Component
//public class Neo4jDatabaseConnector implements IDatabaseConnector {
public class Neo4jDatabaseConnector implements IDatabaseConnector{

    Node aNode;
    Node first;
    Node second;
    Relationship relation;
    private static GraphDatabaseService GraphDb;
    private static RestAPI restAPI;
    Transaction txn;

    private static enum RelTypes implements RelationshipType
    {
        KNOWS,
        USAGE
    }

    public void showNode( )
    {

        // have to add code for cypher
        RestCypherQueryEngine rcqe = new RestCypherQueryEngine(restAPI);
        //Then just execute your cypher statements using rcqe.query().
     // int length=0;
        String countNodes = "START n=node(*) RETURN count(*)";
        String createNodes = "CREATE (n {name: 'Trevor Oakley'})";
         rcqe.query(createNodes, null);

     // QueryResult <Map<String,Object>> result = rcqe.query(countNodes, null);

        //for  (Map<String, Object> row:result){
        //  length++;   
        //}
        //System.out.println("length="+length);

     // rcqe.query(countNodes, Map<String, Object> row:result);
        //  rcqe.query(countNodes, Map<String,Object>:result)
        //  rcqe.
/*   ExecutionEngine engine = new ExecutionEngine(GraphDb);
        int length=-1;
        try{
            ExecutionResult result = engine.execute("start n=node(*) return n");
            if (result == null){
                length = 0;
            } else
            {
                for (@SuppressWarnings("unused")
                    Map<String, Object> row:result){
                        length++;   
                    }
            }
        } catch (NullPointerException e) {
        //  _log.error(e.getMessage(),e);
            length=-2;
        }

         System.out.println("len="+length);
         */

    }

    public Neo4jDatabaseConnector() {
        //GraphDb=new GraphDatabaseFactory().newEmbeddedDatabase(Neo4j_DBPath);
    }
    public int createDBRest()
    {
         restAPI = new RestAPIFacade(System.getenv("NEO4J_URL"), 
                   System.getenv("NEO4J_USERNAME"), 
                   System.getenv("NEO4J_PASSWORD"));
        try{
              GraphDb = new RestGraphDatabase(restAPI);
        }
            catch (Exception e){
                    return 1;
            }

           return 0;
    }
    public int createDB(String dbLoc) {

        System.out.println("db loc ="+dbLoc);
        int error = 0;
try{

        GraphDb=new GraphDatabaseFactory().newEmbeddedDatabase(dbLoc); 
    //GraphDb=new GraphDatabaseFactory().newEmbeddedDatabaseBuilder(dbLoc);
        System.out.println("db loc ="+dbLoc);
        String  stringDB = GraphDb.toString();
        System.out.println("connection  ="+stringDB);
}
catch (Exception e){
    System.out.println("error - ");
    error = 1;
}
    return erro

r;
    }

Problem accessing /hello. Reason:

        Error reading as JSON ''
    Caused by:

    java.lang.RuntimeException: Error reading as JSON ''
        at org.neo4j.rest.graphdb.util.JsonHelper.readJson(JsonHelper.java:57)
        at org.neo4j.rest.graphdb.util.JsonHelper.jsonToSingleValue(JsonHelper.java:62)
        at org.neo4j.rest.graphdb.RequestResult.toEntity(RequestResult.java:114)
        at org.neo4j.rest.graphdb.RequestResult.toMap(RequestResult.java:120)
        at org.neo4j.rest.graphdb.ExecutingRestRequest.toMap(ExecutingRestRequest.java:187)
        at org.neo4j.rest.graphdb.ExecutingRestAPI.query(ExecutingRestAPI.java:475)
        at org.neo4j.rest.graphdb.ExecutingRestAPI.query(ExecutingRestAPI.java:495)
        at org.neo4j.rest.graphdb.RestAPIFacade.query(RestAPIFacade.java:233)
        at org.neo4j.rest.graphdb.query.RestCypherQueryEngine.query(RestCypherQueryEngine.java:50)
        at com.example.Neo4jDatabaseConnector.showNode(Neo4jDatabaseConnector.java:53)
        at com.example.HelloServlet.doGet(HelloServlet.java:22)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:707)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
        at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:565)
        at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:479)
        at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119)
        at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:521)
        at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:227)
        at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1031)
        at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:406)
        at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:186)
        at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:965)
        at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117)
        at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:111)
        at org.eclipse.jetty.server.Server.handle(Server.java:349)
        at org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:449)
        at org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.headerComplete(AbstractHttpConnection.java:910)
        at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:634)
        at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:230)
        at org.eclipse.jetty.server.AsyncHttpConnection.handle(AsyncHttpConnection.java:76)
        at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:609)
        at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:45)
        at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:599)
        at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:534)
        at java.lang.Thread.run(Thread.java:679)
    Caused by: java.io.EOFException: No content to map to Object due to end of input
        at org.codehaus.jackson.map.ObjectMapper._initForReading(ObjectMapper.java:2775)
        at org.codehaus.jackson.map.ObjectMapper._readMapAndClose(ObjectMapper.java:2718)
        at org.codehaus.jackson.map.ObjectMapper.readValue(ObjectMapper.java:1863)
        at org.neo4j.rest.graphdb.util.JsonHelper.readJson(JsonHelper.java:55)
        ... 34 more
    Caused by:

    java.io.EOFException: No content to map to Object due to end of input
        at org.codehaus.jackson.map.ObjectMapper._initForReading(ObjectMapper.java:2775)
        at org.codehaus.jackson.map.ObjectMapper._readMapAndClose(ObjectMapper.java:2718)
        at org.codehaus.jackson.map.ObjectMapper.readValue(ObjectMapper.java:1863)
        at org.neo4j.rest.graphdb.util.JsonHelper.readJson(JsonHelper.java:55)
        at org.neo4j.rest.graphdb.util.JsonHelper.jsonToSingleValue(JsonHelper.java:62)
        at org.neo4j.rest.graphdb.RequestResult.toEntity(RequestResult.java:114)
        at org.neo4j.rest.graphdb.RequestResult.toMap(RequestResult.java:120)
        at org.neo4j.rest.graphdb.ExecutingRestRequest.toMap(ExecutingRestRequest.java:187)
        at org.neo4j.rest.graphdb.ExecutingRestAPI.query(ExecutingRestAPI.java:475)
        at org.neo4j.rest.graphdb.ExecutingRestAPI.query(ExecutingRestAPI.java:495)
        at org.neo4j.rest.graphdb.RestAPIFacade.query(RestAPIFacade.java:233)
        at org.neo4j.rest.graphdb.query.RestCypherQueryEngine.query(RestCypherQueryEngine.java:50)
        at com.example.Neo4jDatabaseConnector.showNode(Neo4jDatabaseConnector.java:53)
        at com.example.HelloServlet.doGet(HelloServlet.java:22)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:707)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
        at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:565)
        at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:479)
        at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119)
        at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:521)
        at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:227)
        at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1031)
        at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:406)
        at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:186)
        at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:965)
        at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117)
        at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:111)
        at org.eclipse.jetty.server.Server.handle(Server.java:349)
        at org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:449)
        at org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.headerComplete(AbstractHttpConnection.java:910)
        at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:634)
        at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:230)
        at org.eclipse.jetty.server.AsyncHttpConnection.handle(AsyncHttpConnection.java:76)
        at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:609)
        at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:45)
        at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:599)
        at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:534)
        at java.lang.Thread.run(Thread.java:679) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T16:30:17.180

答案是根据即时错误填写用户和密码字段，如下所示。

```
String neo4jURL = System.getenv("NEO4J_URL");
        String user="user";
        String password="password";

        try{
        URL url = new URL(neo4jURL);
        String userInfo = url.getUserInfo();
        String[] userDetails = userInfo.split(":");
        user = userDetails[0];
        password = userDetails[1];

        } catch (MalformedURLException e) {
        //
        } 
```

# sqlite - 为什么 servicestack ormlite 会将有效的 Guid 值保存为 NULL 到 Sqlite 数据库？

> ID：15717828
> 
> 赞同：1
> 
> 时间：2013-03-30T11:08:24.200
> 
> 标签：sqlite, primary-key, guid, ormlite-servicestack

我在 SqLite 上使用 ServiceStack.Net OrmLite 间歇性地遇到这个问题。

我的模型类使用 Guid 作为主要 ID。如果模型是新的，我的代码会在保存之前为我的模型设置 Guid.NewGuid() 值。

我设置了一个断点来验证在 db.Save(myModel) 之前，myModel.Id 始终是一个填充的、唯一的 Guid。但是，提交给表的值是 NULL。

似乎在我创建数据库之后，它会正确保存值一段时间，但随后才开始为 Id 保存 NULL！我的代码自始至终都在做同样的事情。这对我来说似乎特别特别，因为 OrmLite 将该列创建为非 Nullable 主键。

有没有人看到这个问题，或者知道可能是什么原因造成的？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T11:23:10.013

这是由 Guid Id 上的 [AutoIncrement] 属性引起的。哎呀！

# c++ - 从子构造函数（模板）访问父成员

> ID：15717833
> 
> 赞同：0
> 
> 时间：2013-03-30T11:09:15.717
> 
> 标签：c++, oop, templates

所以我有一些简单的问题/结构：

```
 class Class1 {
   public:
      Class1() {};
      ~Class1() {};
   protected:
      std::string name;
 }

 class Class2 : public Class1
 {
   public:
     Class2() : number(id_generator++) {
       name = "My-name"; // (1) want to access field inherited from Parent
   };

   private:
      const unsigned int number;
      static unsigned int id_generator;
  } 
```

编译器抱怨 (1): `'name' was not declared in this scope`。怎么了？它看起来很简单，但我看不到它。

EDIT1：只是我意识到错误实际上只在这里发音（[这里](http://liveworkspace.org/code/48Ihhx%24107)链接到代码）：

```
#include <string>

template<int dim>
class Class1 {
   public:
      Class1() {};
     ~Class1() {};
   protected:
      std::string name;
 };

template<int dim>
class Class2 : public Class1<dim>
{
   public:
     Class2() : number(id_generator++) {
       name = "My-name"; // (1) want to access field inherited from Parent
     };

   private:
     const unsigned int number;
     static unsigned int id_generator;
};

int main() {} 
```

所以显然我把模板弄乱了。对不起，没有把它写在第一位。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T12:56:39.223

In a template, for unqualified names that refer to members inherited from a base class, you should use the explicit syntax by dereferencing `this`:

```
 Class2() : number(id_generator++) {
     this->name = "My-name"; // (1) want to access field inherited from Parent
 //  ^^^^^^
 }; 
```

Or, alternatively, you could qualify the name this way:

```
 Class2() : number(id_generator++) {
     Class1<dim>::name = "My-name";
 //  ^^^^^^^^^^^^^
 }; 
```

Otherwise, the compiler will lookup `name` in the global namespace during the [first phase of name lookup](http://blog.llvm.org/2009/12/dreaded-two-phase-name-lookup.html) and, if not found, will issue an error.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T11:11:39.887

除了缺少分号，代码很好。

唯一可能的解释是`Class1`，如编译器所见，实际上并没有该`name`成员。你有多个班级`Class1`吗？您是否有声明的头文件的多个副本`Class1`？您是否有可能在运行编译器之前忘记保存文件？

# highcharts - 在 highstock 中更改导航器日期格式

> ID：15717835
> 
> 赞同：3
> 
> 时间：2013-03-30T11:09:22.330
> 
> 标签：highcharts, highstock, navigator

例如，我想将导航器日期格式从 2012 年 7 月更改为 2012 年。

我该怎么做？

![航海家](../Images/3458399bffb48229afe5ecd05387ccf8.png)

请帮忙...

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T11:03:16.893

您可以将 xAxis 参数用于导航器并定义标签选项（如标准轴）。

[http://jsfiddle.net/XGunG/](http://jsfiddle.net/XGunG/)

```
navigator: {
        xAxis: {
            dateTimeLabelFormats: {
                day: '%Y',
                week: '%Y',
                month: '%Y',
                year: '%Y'
            }
        }
    }, 
```

[http://api.highcharts.com/highstock#navigator.xAxis](http://api.highcharts.com/highstock#navigator.xAxis) [http://api.highcharts.com/highstock#xAxis.dateTimeLabelFormats](http://api.highcharts.com/highstock#xAxis.dateTimeLabelFormats)

# jquery - 所见即所得的 jquery 编辑器分成两个文本区域

> ID：15717837
> 
> 赞同：1
> 
> 时间：2013-03-30T11:09:40.440
> 
> 标签：jquery, css, ruby-on-rails, ruby-on-rails-3

我很惊讶为什么会发生这种情况，我正在使用 jquery wysiwyg 编辑器，它将文本区域分成两部分。知道可能是什么原因造成的，我该如何解决？

我在 Rails 上使用 ruby​​，这仅在开发中发生，在具有预编译资产的生产中发生，这不会发生。

编辑 - 我正在使用[https://github.com/akzhan/jwysiwyg](https://github.com/akzhan/jwysiwyg)，这里是 jsfiddle [http://jsfiddle.net/8jQUn/](http://jsfiddle.net/8jQUn/)上的代码（html 部分是通过 rails 生成的，就像我说的，它可以在生产中使用但在发展中分裂）

![图片](../Images/3d0c01a36f79a40f0fa5c4a50d169628.png)

```
Thanks 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T13:13:56.750

修复你的 CSS ：

你必须删除填充`div.wysiwyg iframe`

```
div.wysiwyg iframe {
  clear: left;
  -moz-box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.4);
  -webkit-box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.4);
  box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.4);
  background-color: white;
  padding: 0px 13px; /*REMOVE PADDING*/
  margin: 0;
  display: block;
  width: 97%; /* like 900px*/
} 
```

并将所有宽度固定为您`div .wysiwyg`和内部的唯一值`iframe`..

这是我编辑的：[jsFiddle](http://jsfiddle.net/8jQUn/1/)

# python - 有没有办法将调试信息打印到日志中？

> ID：15717839
> 
> 赞同：1
> 
> 时间：2013-03-30T11:09:52.723
> 
> 标签：python, debugging, logging

我有一个 python 程序，可以将一些信息传递给一个站点进行解析。它不工作，但我不知道为什么。有没有办法将诊断信息放在将打印到日志的某些地方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T11:16:59.833

您可以使用 python[日志记录](http://docs.python.org/2/library/logging.html)来编写日志文件。

```
import logging
logging.basicConfig(filename='example.log',level=logging.DEBUG)
logging.debug('This message should go to the log file') 
```

# php - 如果选中收音机，请避免发布 $_FILES

> ID：15717842
> 
> 赞同：0
> 
> 时间：2013-03-30T11:09:58.900
> 
> 标签：php

首先：对不起我的英语，我会尽力解释我想要的，但如果我不能做得很好，我很抱歉。

我正在尝试创建一个网页以允许用户将图像上传到服务器，该页面具有 url 上传和文件上传，并带有单选按钮来选择上传方法。

我的问题是我不知道如何在选择 url 单选时禁用文件上传，例如：

url 上传：网页读取 url 并使用该图像。文件上传：网页读取文件并使用该图像。

这就是我想要的，但问题是当两者都被选中时：页面上传文件并读取 url，但前提是选择了 url 单选。如果选择了文件单选，则忽略 url。

我知道问题在于，当您按下提交按钮时，文件已上传，然后 php 服务器检查选定的单选按钮以及必须执行的操作。

如果选择了 url radio，是否有任何模式可以避免文件上传？，这是页面的脚本：

```
 <?php
    if ($_POST) {

        if ($_POST["filesource"] === "file"){
            $fileread = $_FILES["file"]["tmp_name"];
        }else{
            $fileread = $_POST["url"];
        }

        if ($fileread){
                include('includes/imgresize.php');
                $image = new SimpleImage();
                $image->load($fileread);
                $image->resize(250,400);
                $image->save('picture.jpg');
                echo "La imagen subida es: <br>";
                echo "<img src='picture.jpg'>";
                echo die;
        }else{
            echo "No se ha seleccionado ningún archivo.";
            echo die;
        }
    }
?>
<script>
    function setrad(radbut){
        document.getElementById(radbut).checked = true;
    }
</script>

<form action="" method="post" enctype="multipart/form-data" name="form1" id="form1">
    <table>
        <tr><td><input type="radio" name="filesource" value="url" id="urlrad" checked>URL:</td><td><input type="text" size="64" name="url" onClick="setrad('urlrad');"></td></tr>
        <tr><td><input type="radio" name="filesource" value="file" id="filerad">File:</td><td><input type="file" size="50" name="file" id="file" onClick="setrad('filerad');"/></td></tr>
    </table>

    <input name="Submit" type="submit" id="submit" value="Submit" />
</form> 
```

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T11:23:30.520

我建议您使用 javascript 进行客户端检查：只要切换单选按钮，您就可以简单地清除正确的输入。

```
function setrad(radbut, input){
    document.getElementById(radbut).checked = true;
    document.getElementById(input).value = "";
} 
```

这样你就可以调用你的`setrad`函数`onClick="setrad('urlrad','file');"`（注意输入和收音机都应该有一个id）。

# javascript - Jasmine.js 比较数组

> ID：15717844
> 
> 赞同：219
> 
> 时间：2013-03-30T11:10:08.383
> 
> 标签：javascript, jasmine

jasmine.js 中有没有办法检查两个数组是否相等，例如：

```
arr = [1, 2, 3]
expect(arr).toBe([1, 2, 3])
expect(arr).toEqual([1, 2, 3]) 
```

两者似乎都不起作用。

* * *

## 回答 #1

> 赞同：360
> 
> 时间：2013-03-30T11:25:35.530

刚刚做了测试，它适用于`toEqual`

请找到我的测试：

[http://jsfiddle.net/7q9N7/3/](http://jsfiddle.net/7q9N7/3/)

```
describe('toEqual', function() {
    it('passes if arrays are equal', function() {
        var arr = [1, 2, 3];
        expect(arr).toEqual([1, 2, 3]);
    });
}); 
```

**仅供参考：**

> toBe() 与 toEqual()：toEqual() 检查等价性。另一方面，toBe() 确保它们是完全相同的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-08-01T04:30:14.627

You can compare an array like the below mentioned if the array has some values

```
it('should check if the array are equal', function() {
        var mockArr = [1, 2, 3];
        expect(mockArr ).toEqual([1, 2, 3]);
 }); 
```

But if the array that is returned from some function has more than 1 elements and all are zero then verify by using

```
expect(mockArray[0]).toBe(0); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2018-10-25T09:25:28.387

只是为了记录，您可以随时使用 JSON.stringify 进行比较

`const arr = [1,2,3]; expect(JSON.stringify(arr)).toBe(JSON.stringify([1,2,3])); expect(JSON.stringify(arr)).toEqual(JSON.stringify([1,2,3]));`

It's all meter of taste, this will also work for complex literal objects

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2014-10-22T08:20:55.277

我有一个类似的问题，其中一个数组被修改了。我将它用于`$httpBackend`，从中返回的对象实际上是一个`$promise`包含数组的对象（不是`Array`对象）。

您可以通过创建一个`toBeArray`函数来创建一个茉莉花匹配器来匹配数组：

```
beforeEach(function() {
  'use strict';
  this.addMatchers({
    toBeArray: function(array) {
      this.message = function() {
        return "Expected " + angular.mock.dump(this.actual) + " to be array " + angular.mock.dump(array) + ".";
      };
      var arraysAreSame = function(x, y) {
         var arraysAreSame = true;
         for(var i; i < x.length; i++)
            if(x[i] !== y[i])
               arraysAreSame = false;
         return arraysAreSame;
      };
      return arraysAreSame(this.actual, array);
    }
  });
}); 
```

然后就像其他茉莉花匹配器一样在您的测试中使用它：

```
it('should compare arrays properly', function() {
  var array1, array2;
  /* . . . */
  expect(array1[0]).toBe(array2[0]);
  expect(array1).toBeArray(array2);
}); 
```

# c++ - 分配给结构数组

> ID：15717845
> 
> 赞同：3
> 
> 时间：2013-03-30T11:10:14.013
> 
> 标签：c++, c, unix

我有一个结构数组。我想做的是为这些结构的成员赋值。下面的代码有什么问题......

```
#include <stdio.h>

typedef struct{
int a1;
int a2;

}sample;

main(){

sample ar[4]={ 
    (1,2),
    (3,4),
    (5,6),
    (7,8) 
};

int i;
for(i=0;i<4;i++){
    printf("ar[%d]----%d  %d",i,ar[i].a1,ar[i].a2);
     }
} 
```

现在它正在成功编译。但输出是

```
ar[0]----2  4 
ar[1]----6  8 
ar[2]----0  0 
ar[3]----0  0 
```

而不是（或者可能是程序做对了，我有一个愚蠢的误解）

```
ar[0]----1  2
ar[1]----3  4 
ar[2]----5  6 
ar[3]----7  8 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T11:11:30.540

你写：

```
sample ar[4];
ar[4] = { 
    (1,2),
    (3,4),
    (5,6),
    (7,8) 
}; 
```

*数组初始*值设定项的语法（仅在 的*初始化*期间有效`ar`）是：

```
sample ar[4] = { 
    {1,2},
    {3,4},
    {5,6},
    {7,8} 
}; 
```

> ### C11 (n1570)，第 6.7.9 节初始化
> 
> ```
> initializer:   
>     assignment-expression 
>     { initializer-list } 
>     { initializer-list , } 
> ```

此外，[*缩进*](http://en.wikipedia.org/wiki/Indent_style)对于编写可读代码很重要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T11:13:48.947

你应该这样初始化你的向量：

```
sample ar[4] = {
    {1,2},
    {3,4},
    {5,6},
    {7,8}
}; 
```

此外，您应该指定返回类型`main()`：

```
 int main()
    // ^^^
    // ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T11:15:22.350

您应该使用声明进行分配并始终使用“{”。

```
sample ar[4] = { 
    {1,2},
    {3,4},
    {5,6},
    {7,8} 
}; 
```

# php - 分页在 CodeIgniter 中不起作用？

> ID：15717853
> 
> 赞同：2
> 
> 时间：2013-03-30T11:10:51.613
> 
> 标签：php, codeigniter, pagination, url-routing

嗨，我是`CodeIgniter`新手，分页有问题，我使用了分页类，这是我的控制器：

```
 public function user($page='user')
        {
            $this->load->helper('url');
            $this->load->library('pagination');
            if ( ! file_exists('application/views/admin/'.$page.'.php'))
            {
                // Whoops, we don't have a page for that!
                show_404();
            }
            //$data['user'] = $this->user->get_user($config["per_page"], $page);
            //$config = array();
            $config["base_url"] = base_url().'index.php/admin/user/';
            $config["total_rows"] = $this->user->record_count();
            $config["per_page"] = 5;
            $config["num_link"] = 3;
            $config['uri_segment'] = '5';
            $config['full_tag_open']='<ul>';
            $config['full_tag_close']='</ul>';
            $config['prev_link'] = 'Prev';
            $config['prev_tag_open'] = '<li>';
            $config['prev_tag_close'] = '</li>';
            $config['next_link'] = 'Next';
            $config['next_tag_open'] = '<li>';
            $config['next_tag_close'] = '</li>';
            $config['cur_tag_open'] = '<li class="current1">';
            $config['cur_tag_close'] = '</li>';
            $config['num_tag_open'] = '<li>';
            $config['num_tag_close'] = '</li>';
            $this->pagination->initialize($config);
            $offset = $this->uri->segment(5);
            //$page = ($this->uri->segment(3)) ? $this->uri->segment(3) : 0 ;
            //print_r($this->user->fetch_countries($config["per_page"],$this->uri->segment(3)));
            $data['user'] = $this->user->fetch_countries($config["per_page"],$offset);
            //$data['total_rows'] = $this->user->record_count($config["per_page"],$this->uri->segment(3));
            $data["links"] = $this->pagination->create_links();
            //print_r($data);
            //die();
            $data['base'] = $this->config->item('base_url');
            $data['css'] = $this->config->item('css');
            $this->load->view('admin/header', $data);
            $this->load->view('admin/'.$page,$data);
            $this->load->view('admin/footer',$data);
        } 
```

型号代码：

```
 public function record_count() {
        return $this->db->count_all("user");
     }
     public function fetch_countries($limit, $start) {
        $query = $this->db->get("user",$limit, $start);
            return $query->result_array();

     } 
```

以及查看代码：

```
<?php foreach ($user as $user_detail): ?>
        <tr class="gray_line2">
            <td class="sname2"><?php echo $i ?></td>
            <td class="sname2"><?php echo $user_detail['name'] ?></td>
            <td class="sname2"><?php echo $user_detail['username'] ?></td>
            <td class="sname2"><?php echo $user_detail['email'] ?></td>
            <td class="sname2"><?php echo $user_detail['contact'] ?></td>
            <td class="sname2"><?php echo $user_detail['dob'] ?></td>
            <td><div class="action">
                <ul>
                    <li><a href="user_detail?id=<?php echo $user_detail['id'] ?>" class="link" title="Details"><img src="<?php echo base_url();?>images/detail.png" class="left"></a></li>
                    <li><a href="user_edit?id=<?php echo $user_detail['id'] ?>" class="link" title="Edit"><img src="<?php echo base_url();?>images/edit.png" class="left"></a></li>
                    <li><a href="user_delete?id=<?php echo $user_detail['id'] ?>" class="link" title="Delete"><img src="<?php echo base_url();?>images/cross.png" class="left"></a></li>
                </ul>
            </div></td>
        </tr>
        <?php 
         endforeach  ?>     
    </table>
</div>
<div class="pagi">
<div class="pagination">
<?php echo $links; ?> 
```

[这是我得到的](http://i.stack.imgur.com/8CzJS.png)

这是浏览器视图，只有一页显示，当我点击第二页的链接时，出现 404 错误。我正在使用以下路线

```
$route['admin/(:num)/(:any)'] = 'admin/user/$1';
Or
$route['admin/(:num)/(:any)/(:num)'] = 'admin/user/$1/$2/$3'; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T12:27:32.097

一旦检查

```
$config['uri_segment'] = 4; 
```

**或者**

像这样改变方法

```
public function user(){
  //Your code
} 
```

在你的控制器中..

**路线**

```
$route['admin/user/(:any)'] = 'admin/user/$1'; 
```

**编辑**

由 Dilipvyas 推荐

```
$route['admin/:num'] = 'admin/user/$1'; 
```

# ios - 从 UICollectionView 中捏入和捏出

> ID：15717856
> 
> 赞同：1
> 
> 时间：2013-03-30T11:11:18.927
> 
> 标签：ios, ipad, uicollectionview, uipinchgesturerecognizer

所以我有一个`UICollectionView`并且我希望用户能够伸出或收缩来展开和折叠收集单元格。我使用[本教程来执行展开和折叠位](http://wayback.archive.org/web/20151116053251/http://blog.tobiaswiedenmann.com/post/35135290759/stacklayout)。哪个有效。然后我将下面的代码添加到我的`collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath`委托方法中。

```
UIPinchGestureRecognizer *pinchGesture = [[UIPinchGestureRecognizer alloc] initWithTarget:self action:@selector(pinchCollection:)];
[cell addGestureRecognizer:pinchGesture]; 
```

然后创建这样的动作`pinchCollection:`：

```
-(void)pinchCollection:(id)sender {
    UIPinchGestureRecognizer *gesture = (UIPinchGestureRecognizer*)sender;
    if (gesture.state == UIGestureRecognizerStateBegan) {        
        if (gesture.scale <= -1) { // I also changed this to be gesture.scale < 1 but it didn't work. 
            // pinch in
            [self collapseCollection];
            gesture.scale = 1;

        }
        if (gesture.scale >= 1) { // I changed this to be gesture.scale > 1 but it didn't work either. 
            // pinch out 
            [self expandCollection];
            gesture.scale = -1;
        }
    }
} 
```

但只有捏出代码有效。我已经搜索了有关如何正确执行此操作但没有运气的教程或代码。

扩展集合如下所示：

![在此处输入图像描述](../Images/fa7f2c2cbd6a148edfee533061351768.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-12-13T00:23:17.310

这不是答案，但这里缺少一件事：

```
[gesture setDelegate:self]; 
```

我很确定规模的负值是没有意义的。比例通常以百分比形式使用，标准化为 0 到 1 之间的值。我必须查看您折叠和展开集合视图的方法；但是，如果您使用手势的 scale 属性来调整集合视图的大小，则只需修复错误的数学即可。

如果您使用属性值 -1 作为确定捏合方向的方法，那么正确执行此操作很简单：

```
CGPoint p1 = [sender locationOfTouch:0 inView:self];
CGPoint p2 = [sender locationOfTouch:1 inView:self];

// Compute the new spread distance.
CGFloat xd = p1.x - p2.x;
CGFloat yd = p1.y - p2.y;
CGFloat distance = sqrt(xd*xd + yd*yd);

if (distance < previousDistance) {
// add collapse method call
} else {
// add expand method call
}

previousDistance = distance; 
```

在此示例代码中，previousDistance 是一个全局或静态变量，用于与新计算的距离进行比较；显然，如果距离大于之前的距离，那么用户正在尝试扩展集合视图（反之亦然）。

如果这些似乎都不是问题，那么请将代码提供给您的展开和折叠方法。

# image - .htaccess - deny from all, excludes images

> ID：15717864
> 
> 赞同：1
> 
> 时间：2013-03-30T11:11:51.163
> 
> 标签：image, .htaccess

How I can create .htaccess file, When I wanna disable all files except images.
My code.

```
order deny,allow
deny from all 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-31T14:48:01.043

Tx you, My final code

```
order allow,deny
<Files ~ "\.(jpg|jpeg|png|gif|pdf|txt|bmp)$">
   allow from all
</Files> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-30T11:15:50.807

You can check it [here](https://stackoverflow.com/questions/7787586/htaccess-allowing-access-files-by-extension).

For example you can use the following:

```
<Files ~ "\.(jpg|jpeg|png|gif)$">
   order deny,allow
   allow from all
</Files> 
```

# ruby-on-rails - Unicorn + Capistrano 零停机部署——不切换到新版本

> ID：15717867
> 
> 赞同：3
> 
> 时间：2013-03-30T11:12:14.123
> 
> 标签：ruby-on-rails, capistrano, unicorn

如果我想容忍部署后手动停止和启动独角兽的停机时间，该应用程序部署良好。但是，我想使用零停机独角兽设置，但它不起作用，因为启动的新独角兽进程正在查看旧的部署发布路径。deploy.rb 中没有什么特别的，简单的 cap 重启：

```
desc "Zero-downtime restart of Unicorn"
    task :restart, :except => { :no_release => true } do
        run "cd #{current_path}; #{try_sudo} kill -s USR2 `cat /var/www/appname/shared/pids/unicorn.pid`"
    end 
```

我知道它正在查看错误的目录，因为如果视图没有更改，并且如果我设置`keep_releases`为 1 或 2，则 unicorn 日志将显示错误，因为它尝试启动的目录已被删除：

```
/var/www/appname/shared/bundle/ruby/1.9.1/gems/unicorn-4.4.0/lib/unicorn/http_server.rb:425:in `chdir': No such file or directory - /var/www/appname/releases/20130330104246 (Errno::ENOENT) 
```

几个星期以来，我一直在尝试打开和关闭它。非常感谢您为这项工作提供任何帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-31T00:15:53.103

启动独角兽时设置此环境变量

```
BUNDLE_GEMFILE=$APP_PATH/current/Gemfile 
```

否则它将指向特定的发布目录，这将导致您描述的行为。

例如。

```
cd $APP_PATH/current && BUNDLE_GEMFILE=$APP_PATH/current/Gemfile bundle exec unicorn_rails -c $APP_PATH/current/config/unicorn.rb -E $RAILS_ENV -D 
```

# wordpress - How to embed a string in permalink structure ?

> ID：15717873
> 
> 赞同：0
> 
> 时间：2013-03-30T11:12:52.580
> 
> 标签：wordpress, wordpress-theming, permalinks

I am creating a custom tours and travel theme in which I have created custom post type Cities, Locations, Destinations and i am using custom permalink structure. `/%category%/%postname%/`

So now I want to append a state name or district name before that city, destination or location name. Let me make it more clear by giving you an example .

* * *

the current url structure is like this

![enter image description here](../Images/ea8df35cc5feb9f074f7ca28aefa3ae6.png)

and how I want it to be ![enter image description here](../Images/1275494df9dd73ec2a109071e959eb7c.png)

In the beginning i created a custom taxonomy but some time's city, destination and location slug clashes with custom taxonomy slugs and right now I am working with rewrite rules so is it possible by creating a new rewrite rules or do I have to do something else.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T12:22:30.293

I'm not a Wordpress specialist, but maybe this wordpress oriented stackexchange site would be of more assistance: [How to create Custom URL Routes in Wordpress](https://wordpress.stackexchange.com/questions/26388/how-to-create-custom-url-routes)

Hope this helps !

# javascript - 如何给 jquery modals 不同的位置（不总是居中）

> ID：15717874
> 
> 赞同：1
> 
> 时间：2013-03-30T11:12:57.990
> 
> 标签：javascript, jquery

好的，所以我正在使用这个[颜色框模式](http://www.jacklmoore.com/colorbox/)，并且我有一个可点击的名称列表，如下所示：

*   弗雷德
*   理查德
*   大卫
*   佩雷
*   达世
*   费

现在，当用户点击 Fred 或任何其他名称时，我想在其顶部显示颜色框模式，就像[诺顿的网站](http://us.norton.com/downloads/)（当您`quick view`点击项目清单。我同意你可以通过给每个`<li>`人一个类并处理它们来实现这一点，但考虑到我做的不止`40 names`这些，只会导致庞大的代码。我怎样才能用最少的代码来实现这个朋友，即将模式相对于列表项居中（注意：-使用 css position relative 不能作为首选）？

# c# - 与 DataSet 的 C# 文本框数据绑定

> ID：15717875
> 
> 赞同：0
> 
> 时间：2013-03-30T11:13:04.400
> 
> 标签：c#, winforms, data-binding

我有一个`TextBox`，我给了一个`DataBinding`如下：

```
 txtCompanyAddress.DataBindings.Add("Text", CompanyDetailsDataSet, 
"CompanyDetails.CompanyAddress"); 
```

我还在表单上添加了一个 BindingManagerBase 对象，如下所示：

```
protected BindingManagerBase BindingManager
        {
            get
            {
                return this.BindingContext[CompanyDetailsDataSet, "CompanyDetails"];
            }
        } 
```

我的表单上有一个取消按钮，可以取消更改。当我更新值`txtCompanyAddress`并点击取消时，我调用`BindingManager.CancelCurrentEdit();`但文本框值不会更改为旧值。

这是任何数据绑定问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-06T08:53:01.830

```
textBox1.DataBinding.Add("Text",ds.Tables[0],"ColumnName") 
```

其中`ds`是 DataSet 的对象，`[0]`是数据集中的表的数量，如果您的过程返回一个以上的表，您可以用双代码代替 0 写表的名称...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T12:04:42.477

您的绑定不会使用此设置自动刷新，您需要在更新数据绑定时更改模式

```
 txtCompanyAddress.DataBindings.Add("Text", CompanyDetailsDataSet,"CompanyDetails.CompanyAddress", true,DataSourceUpdateMode.OnPropertyChanged); 
```

此外，您还没有发布您`CompanyDetailsDataSet`的内容，所以我假设它实现了`IEditableObject`接口。否则你将不得不自己做，并确保旧值被缓存和检索`CancelEdit()`

# c - C How to reference various memory locations within ONE array

> ID：15717876
> 
> 赞同：0
> 
> 时间：2013-03-30T11:13:07.173
> 
> 标签：c, arrays, pointers

I'm reading a file in and adding each character to an array. I then break these characters down into words by removing spaces and other non-essential characters. Now, to work with each word individually, I'd like to add each word into it's own array. Is there any way to do this? I've attempted to add the memory location of the start of each word, but it keeps giving me the memory address of the very start of the array. The problem is, in the code below, the variable named 'buffer' overwrites itself with a new word with each iteration of the while loop. I need to be able to reference each word in order to push it into a linked list. Here's what I have so far:

```
#include <stdio.h>
#include <ctype.h>

int main(int argc, char **argv) {
char buffer[1024];
int c;
size_t n = 0;

FILE *pFile = stdin;

pFile = fopen(argv[1], "r");
if (pFile == NULL) perror("Error opening file");
    else {
        while(( c = fgetc(pFile)) != EOF ) {

            if (isspace(c) || ispunct(c)) {

                if (n > 0) {
                    buffer[n] = 0;
                    printf("read word %s\n", buffer);
                    n = 0;
                }
            } else {
                buffer[n++] = c;
            }
        }
        if (n > 0) {
            buffer[n] = 0;
            printf("read word %s\n", buffer);
        }
        fclose(pFile);
    }
return 0;
} 
```

If I give a file containing the characters "This is a test document that holds words for this exercise", the following is produced:

```
read word This
read word is
read word a
read word test
read word document
read word that
read word holds
read word words
read word for
read word this
read word exercise 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T11:30:10.530

If all you need is to store the string you've read then you could use `strdup` (`man strdup` for more info) to make a copy of the buffer and then store the pointer in an array or linked list as you mentioned.

Keep in mind that `strdup` uses `malloc` to allocate storage for each string and you must free this memory yourself when the strings are no longer needed. Also, repeatedly using `malloc` to allocate many small blocks of memory can be expensive, so use with caution!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T11:36:54.230

The `buffer` is still a pointer, i.e. pointer arithmetic applies. You write `0` inside `buffer` whenever you encounter end of the word - this is good. Now all you need to do to have your next word in a separate array is just fastforward `buffer` to the next free position:

```
buffer += n; 
```

To make it look neater, you could discard `n` altogether, have `buffer++` everywhere and copy next character of the word like `*buffer = c`.

Then every word sits in its own array and they do not overlap. You can use pointer to the beginning of the word to store into a linked list. You can use conventional string functions (e.g. strlen) and their output will not suffer from back-to-back packing of strings in memory. This is possible, because you appended `0` at the end of every stored word.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T15:03:10.497

Looks like you've got a good start. What you are doing is successfully reading all the words into a single array one at a time and overwriting them each time.

> The problem is, in the code below, the variable named 'buffer' overwrites itself with a new word with each iteration of the while loop.

Sure, does:

```
 if (n > 0) {
           buffer[n] = 0; // this line terminates each string
           printf("read word %s\n", buffer);
           n = 0;         // this line resets the array so you overwrite with the next
                          // word
     } 
```

So at this point you just need to place those words into your linked list instead of overwriting them. You could store them all in the array (if it's long enough) but why bother when you'll just have to take them back out? you really need to do at this point is replace this line:

```
printf("read word %s\n", buffer); 
```

with the code to add the word into your linked list. Basically you need some sort of "node" structure, in the most basic sense you need to do something like:

```
struct node{
   char * word;       // place to add the word
   struct node *next; // pointer to the next node
}; 
```

You'll just need to get some memory for each node and each string in the nodes as you go, the following code assumes you have a head node pointing to the first node in your linked list and that you have a pointer to a current node that starts at head:

```
cur->next = malloc(sizeof(node));          // assign memory for a new node
cur = cur->next;                           // move current to the next node
cur->word = malloc(sizeof strlen(buffer)); // assign memory for the word
cur->next = NULL;                          // set the next pointer to NULL
strcpy(cur->word, buffer);                 // copy the word from the buffer 
                                           //   to your list 
```

# php - Wordpress：逐月获取帖子，布局问题

> ID：15717880
> 
> 赞同：0
> 
> 时间：2013-03-30T11:13:18.240
> 
> 标签：php, html, css, wordpress, archive

我遇到了一个问题，我每个月都会收到 wordpress 帖子，但我错过了一些明显的东西，因为它与我的布局有点冲突。我正在使用 996 网格系统进行布局。

**需求：**

我在 2013 年 3 月收到所有帖子，并希望将它们分别放在一个里面，所以 3 个帖子像屏幕截图 A 一样堆叠。![在此处输入图像描述](../Images/63b4610184e8c482de52843367283431.png)

我的代码如下：

```
<div class="container clearfix" style="background:yellow;">
    <div class="grid_12" style="background:blue;">
        <?php
                $blogtime = date('Y');
                $prev_limit_year = $blogtime - 1;
                $prev_month = '';
                $prev_year = '';
                $args = array(
                    'posts_per_page' => 20,
                    'ignore_sticky_posts' => 1
                );
                $postsbymonth = new WP_Query($args);

                while($postsbymonth->have_posts()) {
                    $postsbymonth->the_post();
                    if(get_the_time('F') != $prev_month || get_the_time('Y') != $prev_year && get_the_time('Y') == $prev_limit_year) {

                        echo "<h2>".get_the_time('F, Y')."</h2>\n\n";

                        }
            ?>
    </div>

<div class="grid_4" style="background:red;">
    <article id="post-<?php the_ID(); ?>" role="article" itemscope itemtype="http://schema.org/BlogPosting">
        <a href="<?php the_permalink(); ?>"><?php the_post_thumbnail('standard-thumb'); ?></a>
        <h3><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h3>
    </article>
</div>

<?php
$prev_month = get_the_time('F');
$prev_year = get_the_time('Y');
}
    ?>
</div> <!-- END OF CONTAINER --> 
```

**问题：**

使用上面的代码，grid_4 的每个实例都位于容器之外，第一个实例除外。见截图 B![在此处输入图像描述](../Images/194713255c10beddd037b19e52bc664b.png)

如何确保所有 grid_4 div 都包含在容器中？

我试过移动不起作用的 div，我想我在查询中遗漏了一些基本的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T13:34:46.613

因此，如果我将关闭的 div 删除到 grid_4 似乎 - 它现在可以工作了......

在 dom 中，它现在都位于容器内......但是看看模板标记代码，我是一个 div 短......

我不知道为什么会这样，但它是......有一天我会弄清楚为什么但现在 wordpress 会自动添加一个额外的 div。

# c - GMP 库中的矩阵（C 中）

> ID：15717881
> 
> 赞同：0
> 
> 时间：2013-03-30T11:13:31.810
> 
> 标签：c, matrix, gmp

我正在尝试在 gmp 中定义一个矩阵，但我收到了错误报告。这是我的程序的一个稍微简化的版本：

```
#include<stdio.h>
#include<math.h>
#include<stdlib.h>
#include <gmp.h>

mpz_t matrix[2][2];
mpz_init(matrix[0][0]), mpz_init(matrix[0][1]);
mpz_init(matrix[1][0]), mpz_init(matrix[1][1]);
mpz_set(matrix[0][0],1), mpz_set(matrix[0][1],2);
mpz_set(matrix[1][0],3), mpz_set(matrix[1][1],5); 
```

然后是我的其他程序等，但它们的错误功能是：

```
matdet.c:8:16: error: expected ‘)’ before ‘[’ token 
```

所以我的问题是，如何在 gmp 中定义矩阵，任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T16:48:37.107

您应该将这些函数调用放入您的主要方法中。在 C 中，不可能在方法之外进行方法调用。

# language-agnostic - “100% 红色上 50% 蓝色”与“100% 蓝色上 50% 红色”

> ID：15717884
> 
> 赞同：1
> 
> 时间：2013-03-30T11:13:52.663
> 
> 标签：language-agnostic, colors, transparency

假设我们有两种 ARGB 颜色 c1 和 c2。

背景 c2 上的 50% (alpha) c1 与背景 c1 上的 50% c2 之间有什么区别吗？

使用公式`out = alpha * new + (1 - alpha) * old`（来自[另一个线程](https://stackoverflow.com/a/746937/632951)），两者都会有相同的结果：

```
50% blue on 100% red = 0.5 * blue + (1 - 0.5) red = 0.5 * blue + 0.5 red
100% red on 50% blue = 0.5 * red + (1 - 0.5) blue = 0.5 * red + 0.5 blue
thus, 50% blue on 100% red = 100% red on 50% blue 
```

但是，[Photoshop CS5](http://en.wikipedia.org/wiki/Adobe_Photoshop#CS5)声称“100% 蓝色上 50% 红色”是 `#80007f`“100% 红色上 50% 蓝色” `#7f0080`。

因此，我想知道上述算法是否仅用于*简单*的现实近似？

**是否有另一个公式可以为我们提供更真实的结果？**（由于 Adob​​e 在图形方面相当*领先*，我认为他们不太可能犯这么简单的四舍五入错误）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T11:58:22.917

c2 上的 50% c1 和 c1 上的 50% c2 应该给出完全相同的颜色，正如您通过非常简单的算法所注意到的那样。

所以混合红色 (#ff0000) 和蓝色 (#0000ff) 50-50 应该会给你#7f007f。如果你得到 #80007f 它足够接近并且错误可能是由于其他原因造成的，例如如果你的图像不是在 RGB 模式下而是在 HSL 中，或者如果 Photoshop 选择在内部使用 HSL 表示它。

浮点计算和舍入误差可能会引起其他错误。尽管如此，#80007f 和 #7f007f 几乎相同，所以如果 Photoshop 开发人员意识到这种不精确性，他们可能会选择忽略它。

# mysql - 将mysql查询的2个结果集合并为一个

> ID：15717885
> 
> 赞同：2
> 
> 时间：2013-03-30T11:13:57.380
> 
> 标签：mysql

例子：

第一个查询：

`select A,B,C from tb1;`

```
---------------
A     B     C 
---------------
1     1     3
2     1     4 
```

第二个查询：

`select E from tb2;`

```
---------------
E     
---------------
8    
9 
```

所需的结果格式应如下所示：-

```
-----------------------
A     B     C     E
-----------------------
1     1     3     8
2     1     4     9 
```

请告诉我查询如何获取结果集。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T12:50:04.637

嗨，可能对你有帮助

你可以试试这样

```
SELECT * FROM tb1,tb2 
```

你得到像这样的输出

```
-----------------------
A     B     C     E
-----------------------
1     1     3     8
2     1     4     9 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T12:08:14.947

如果您可以在两个表中添加一个列 id 来标识每个表的行号，以使您的表结构更好。

然后您可以轻松合并两个具有相同 id 的表。这里的关系是`id`列。

那么你可以这样做

```
 select A, B, C , E from Table1 t1
 inner join Table2 t2
 on  t1.id = t2.id 
```

请在[**此处查看此演示中的结构化表格**](http://sqlfiddle.com/#!2/f9355/3)

结果：

```
 A   B   C   E
    1   1   3   8
    2   1   4   9 
```

希望对你有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T12:13:28.177

SQL 表本质上是无序的。这带来了一个问题，因为您的表中没有任何内容可以指定行的顺序，这似乎是两个表之间的连接。

因此，您必须屏住呼吸并做出一些假设。特定的假设是 a 返回的数据`select`是您在表中想要的实际顺序（如果您在表中有删除或在并行环境中运行，它可能会有所不同）。

以下代码`id`为每个表添加一个。然后这个 id 可以用于连接：

```
select t1.A, t1.B, t1.C, t2.D
from (select t1.*, @rn := @rn + 1 as id
      from tbl1 t1 cross join (select @rn := 0)
     ) t1 left outer join
     (select t2.*, @rn := @rn + 1 as id
      from tbl2 t2 cross join (select @rn := 0)
     ) t2
     on t1.id = t2.id 
```

# api - 在回调问题期间创建 Lua 对象

> ID：15717887
> 
> 赞同：1
> 
> 时间：2013-03-30T11:14:01.207
> 
> 标签：api, delphi, lua

我在 Delphi + Lua 上制作了一个简单的项目，通过 RTTI 使用 Delphi 可视化组件。主要实现思路基于`luna.h`. 我喜欢暴雪使用存储在 xml 中的模板的想法（例如，当您可以在 TPanel 上放置多个对象并将其用作模板时），所以我几乎也实现了这一点。

问题是：一切正常，直到我通过 Lua 的回调创建对象，该回调使用与`luna.h`Inject 代码几乎相同的代码。如果此对象具有“继承”xml 属性，则回调函数调用存储在 xml 中的对象的创建，通过又一次注入创建另一个对象。我收到导致 lua51.dll 的错误。

可能是回调和 Inject 都使用堆栈导致的问题，而回调函数尚未返回结果。那么我可以使用堆栈并通过回调创建对象吗？如果没有 - 是否有任何解决方法来实施它？暴雪确实以某种方式做到了。

更多细节：
1.应用程序注册Lua对象（例如`TPanel`和许多其他）通过

```
 cn := T.ClassName;
  f := @StaticOnCreate;
  lua_pushlightuserdata(L, self); // put offset to self into lightuserdata
  lua_pushcclosure(L, f, 1);
  lua_setglobal(L, PAnsiChar(UTF8Encode(cn))); // T() in lua will make a new instance. 
```

与 luna.h 的区别 - 应用程序还存储了指向对象的指针（Delphi 对象是指针）以避免泛型（c 模板）
2\. 现在 Lua`TPanel`在全局表中
3\. 通过使用

```
p = TPanel("somename") 
```

在脚本中，Lua 调用应用程序的 StaticOnCreate。
4\. StaticOnCreate 提取对象并调用类的函数

```
 o := TLuaClassTemplate(lua_topointer(L, lua_upvalueindex(1)));
  result := o.OnCreate(L); 
```

5.`OnCreate`函数提取`name`等参数并创建类型的精确视觉对象，并使用与函数`TPanel`相同的`luna.h`代码`inject`

```
 lua_newtable(FL); // create a new table for the class object ('self')
  obj_index := lua_gettop(FL);

  lua_pushnumber(FL, 0);

  a := lua_newuserdata(FL, SizeOf(pointer)); // store a ptr to the ptr
  a^ := obj; // set the ptr to the ptr to point to the ptr... >.>
  luaL_newmetatable(FL, PAnsiChar(UTF8Encode(cn))); // get (or create) the classname_metatable
  lua_pushstring(FL, PAnsiChar(UTF8Encode('__gc')));
  lua_pushlightuserdata(FL, self); // put offset to self into lightuserdata
  lua_pushcclosure(FL, @StaticGc_T, 1);
  lua_settable(FL, -3);
  lua_setmetatable(FL, -2); // userdata.metatable = classname_metatable

  lua_settable(FL, obj_index); // self[0] = obj;

  f := @StaticThunk;
  // register the functions
  for i := 0 to length(ClassApiArray) - 1 do begin
    lua_pushstring(FL, PAnsiChar(UTF8Encode(ClassApiArray[i].name)));
    lua_pushlightuserdata(FL, self); // put offset to self into lightuserdata
    lua_pushnumber(FL, i); // let the thunk know which method we mean
    lua_pushcclosure(FL, f, 2);
    lua_settable(FL, obj_index); // self["function"] = thunk("function")
  end;

  lua_pushvalue(FL, -1); // dup object on stack top
  rec.ref := luaL_ref(FL, LUA_REGISTRYINDEX); // store object as ref
  ...
  result := 1; 
```

通过堆栈返回 Lua 对象，所以现在 p from`p = TPanel("somename")`是对象实例。

但是，如果我尝试实现 xml 模板和步骤 3

```
p = TPanel("somename", "xmltemplatenodename") 
```

并且在执行步骤 5 中，`OnCreate`如果我看到有`inherits = xmltemplatenodename`. 因此，在第 5 步之前`inject`，应用程序搜索精确- 如果发现为每个对象`xmltemplatenodename`创建更多对象。`inject`并且只有在此之后继续使用 own 执行第 5 步`inject`。在从`xmltemplatenodename`. 但是，如果应用程序使用与源相同的 xml 并`xmltemplatenodename`在外部创建相同的对象`OnCreate`- 没有错误。

`Inject`对于 xml 对象略有不同，不是将对象留在堆栈中，而是通过对象名称注册它

```
 lua_setglobal(FL, PAnsiChar(objName8)); 
```

# hash - 关于使用 Bob Jenkins 的完美哈希库

> ID：15717888
> 
> 赞同：1
> 
> 时间：2013-03-30T11:14:06.887
> 
> 标签：hash

当我使用 Bob Jenkins 的完美哈希包时，在构建“完美”二进制文件后，我什至无法通过“./perfect < sample_input”传递示例，它总是警告我“致命错误：无法完美哈希：无法构建选项卡 [] “，有没有人遇到过这个问题？是否有任何其他稳定完美的哈希相关库或包，在此先感谢！引用 Jenkins 的完美哈希库链接如下： [http ://burtleburtle.net/bob/hash/perfect.html](http://burtleburtle.net/bob/hash/perfect.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-15T12:01:07.027

我在 64 位 Linux 下使用 gcc 和 clang 遇到了同样的问题，并找到了原因： 4 字节类型的类型定义，`ub4`必须`sb4`在 standard.h 中更改

```
typedef unsigned long int ub4;
typedef signed long int sb4; 
```

至

```
typedef unsigned int ub4;
typedef signed int sb4; 
```

或者可能被定义为来自 stdint.h (`uint32_t`和`int32_t`) 的类型的别名。

# couchdb - 复制带有附件的 couchdb 文档是原子的吗？

> ID：15717890
> 
> 赞同：0
> 
> 时间：2013-03-30T11:14:16.790
> 
> 标签：couchdb, attachment, atomic, database-replication

当复制带有附件的 couchdb 文档时，该复制是原子操作还是文档还没有附件的短时间范围？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T11:14:16.790

复制包括其附件在内的单个文档是一种原子操作。

资料来源： rnewson 在 Freenode 上所说的话。

# firewall - IP 表捕获圣诞节扫描/空扫描

> ID：15717898
> 
> 赞同：0
> 
> 时间：2013-03-30T11:15:12.763
> 
> 标签：firewall, iptables, nmap

我试图使用以下规则来进行圣诞节扫描和空扫描但是在测试时我检查了我的日志并且无法找到前缀？

```
iptables -A INPUT -p tcp --tcp-flags ALL ALL -j LOG --log-prefix "DROPPED XMAS PACKET:" 
iptables -A INPUT -p tcp --tcp-flags ALL NONE -j LOG --log-prefix "DROPPED NULL PACKET:"
iptables -A INPUT -p tcp --tcp-flags ALL ALL -j DROP

iptables -A INPUT -p tcp --tcp-flags ALL NONE -j DROP 
```

我做错了什么还是我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T14:13:46.557

根据[Nmap 手册页](http://nmap.org/book/man-port-scanning-techniques.html)，Null 扫描会发送一个没有设置标志的数据包，而 Xmas 扫描会发送一个设置了 FIN、PSH 和 URG 标志的数据包。您的空扫描匹配看起来应该有效，但您的圣诞节规则应该是：

```
 iptables -A INPUT -p tcp --tcp-flags ALL FIN,PSH,URG -j LOG --log-prefix "DROPPED XMAS PACKET:" 
```

此外，这些数据包不会成为已建立的 TCP 会话的一部分，也不会建立一个。出于这个原因，您的规则集中可能有一条规则正在丢弃这些数据包，因为您正在使用`-A`(append) 添加您的规则。

# android - 使用 Service 在 Android 中恢复活动

> ID：15717899
> 
> 赞同：0
> 
> 时间：2013-03-30T11:15:16.440
> 
> 标签：android, service, oncreate, resume

我有一个`mainActivity`.
启动时，它启动一个服务并绑定它。
有一个计时器会`mainActivity`在 X 秒后将（这个）发送回来，而服务继续运行和监听，我使用`moveTaskToBack (true)`.
当服务侦听器触发时，服务启动活动，但不是要通过调用的活动`onResume()`（因为它被发送回），而是通过调用它`onCreate()`来调用我当前使用的活动：

```
Intent dialogIntent = new Intent(getBaseContext(), MainActivity.class);
dialogIntent.addFlags(Intent.FLAG_FROM_BACKGROUND);
getApplication().startActivity(dialogIntent); 
```

这就解释了为什么要重新创建活动。我尝试使用`FLAG_ACTIVITY_REORDER_TO_FRONT`但出现异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T11:25:32.497

`android:launchMode="singleInstance"`在 AndroidManifest.xml 的 AndroidManifest.xml 的活动中添加此属性

AndroidMenifest.xml

```
 <application>
        <activity
            android:launchMode="singleInstance"> 
        </activity>
    </application> 
```

# caching - Symfony2 response - Clear cache headers on back button

> ID：15717906
> 
> 赞同：6
> 
> 时间：2013-03-30T11:16:19.047
> 
> 标签：caching, symfony, response, symfony-2.1, cache-control

I have an issue with clearing my cache when back button is pressed.

My header information is saying i'ts loaded from cache:

```
Status Code:200 OK (from cache) 
```

My response is set to:

```
$response = new Response;
$response->expire();
$response->headers->addCacheControlDirective('must-revalidate', true);
$response->headers->addCacheControlDirective('allow_reload', true); 
```

What am I doing wrong? None of the documentation methods seem to work...

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-30T15:02:25.730

Taking advice from [this article](http://blog.55minutes.com/2011/10/how-to-defeat-the-browser-back-button-cache/) and setting listed Cache-Control directives worked for me - by pressing back button request to the server was always sent.

```
$response->headers->addCacheControlDirective('no-cache', true);
$response->headers->addCacheControlDirective('max-age', 0);
$response->headers->addCacheControlDirective('must-revalidate', true);
$response->headers->addCacheControlDirective('no-store', true); 
```

# javascript - 具有不同类型视图模型的 Knockout 映射数组

> ID：15717908
> 
> 赞同：0
> 
> 时间：2013-03-30T11:16:50.513
> 
> 标签：javascript, knockout.js, knockout-mapping-plugin

拥有一系列不同类型的项目：

```
var items = [{{type:t1,text:"abc"},{type:t2,data:"123"}}] 
```

并查看模型：

```
function T1VM(t1) { ... }
function T2VM(t2) { ... } 
```

如何使用映射插件将项目映射到可观察的匹配视图模型数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T14:08:53.713

这太容易了！

```
var mapping = {
    create: function (options) {
        if (options.data.type == "T1")
            return new T1VM(options.data);
        else if (options.data.type == "T2")
            return new T2VM(options.data);
    }
}; 
```

进而：

```
ko.mapping.fromJS(items, mapping); 
```

# php - PHP错误近似与printf

> ID：15717913
> 
> 赞同：2
> 
> 时间：2013-03-30T11:17:02.957
> 
> 标签：php, printf, approximation

我完全了解二进制格式的浮点表示，因此我知道在尝试用任何编程语言完美表示浮点数时存在数学“不可能”。但是，我希望编程语言在处理近似值时遵循一些众所周知且完善的规则。

话虽如此，我读到（这里也是在stackoverflow上）PHP中的printf可能是“正确截断/近似”数字的最佳方法，并且 - 再次 - 我完全意识到并且我可以轻松编写单行函数给我“完美”的近似值。这只是为了避免诸如“你为什么不使用 XXX 或做 YYY？”之类的回答。

尝试这个：

```
for($i=0; $i<10; $i++) {
  $k = 1.50 + $i/1000;
  printf("%f %.2f<br>", $k, $k);
} 
```

这是输出：

> 1.500000 1.50
> 1.501000 1.50
> 1.502000 1.50
> 1.503000 1.50
> 1.504000 1.50
> 1.505000 1.50
> 1.506000 1.51
> 1.507000 1.51
> 1.508000 01.510
> 1.510 1.51

如您所见，1.504（正确）打印为 1.50，而 1.506（正确）打印为 1.51。但是为什么 1.505 打印为 1.50？！它必须是 1.51，而不是 1.50！

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T11:24:50.290

您应该使用该`round`函数显式四舍五入值，以便您能够使用`mode`具有以下值的参数：

`PHP_ROUND_HALF_UP -- Round val up to precision decimal places away from zero, when it is half way there. Making 1.5 into 2 and -1.5 into -2.`

`PHP_ROUND_HALF_DOWN -- Round val down to precision decimal places towards zero, when it is half way there. Making 1.5 into 1 and -1.5 into -1.`

功能：

`float round ( float $val [, int $precision = 0 [, int $mode = PHP_ROUND_HALF_UP ]] )`

查看完整描述：

[http://php.net/manual/en/function.round.php](http://php.net/manual/en/function.round.php)

编辑：

```
for($i=0; $i<10; $i++) {
  $k = 1.50 + $i/1000;
  printf("%f %f<br>", $k, round($k,2,PHP_ROUND_HALF_UP));
} 
```

# iphone - 当用户在 iphone 中接到电话时暂停应用程序

> ID：15717915
> 
> 赞同：1
> 
> 时间：2013-03-30T11:17:07.277
> 
> 标签：iphone, objective-c, ios5, call

我有一个测验应用程序，其中每个问题的持续时间为 20 秒。它工作正常，但如果用户在播放时接到电话，我想暂停应用程序并将其设置在后台。有谁有想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T11:23:07.917

这取决于您的应用程序的实现，但从广义上讲，您的应用程序应该在 `applicationWillResignActive`: 方法中停止任何正在运行的计时器、暂停游戏、暂停任何声音播放等。

调用完成后，将再次调用您的应用程序并调用该`applicationDidBecomeActive:`方法。您应该从该方法恢复计时器、声音播放等。如果是游戏，则不应自动恢复；让它暂停并等待用户手动恢复它以符合 Apple 的 UX 指南。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T11:22:55.190

当有来电时，您的应用程序将暂停。

你会知道这正在发生，因为你的“ `UIApplicationDelegate`”会收到“”的消息`applicationWillResignActive:`。当它回来时，您可以从上次中断的地方开始，或者您可以提出一个新问题或任何您想做的事情，这取决于您决定如何实施您的测验应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T12:01:13.203

当用户在 iphone 应用程序中接到电话时，应用程序自动进入 applicationDidEnterBackground 状态。例如，如果您正在使用无线电应用程序，那么当用户在呼叫结束应用程序进入以下方法（appDelegate.m）后接到任何电话时，无线电会自动关闭

*   (void)applicationWillResignActive:(UIApplication *)application { // 当应用程序即将从活动状态变为非活动状态时发送。这可能发生在某些类型的临时中断（例如来电或短信）或当用户退出应用程序并开始转换到后台状态时。// 使用此方法暂停正在进行的任务、禁用计时器并降低 OpenGL ES 帧速率。游戏应使用此方法暂停游戏。}

# iphone - 我可以在 ipohne 的 tableview 中的两个单元格之间留出空间吗？

> ID：15717919
> 
> 赞同：-1
> 
> 时间：2013-03-30T11:17:41.717
> 
> 标签：iphone, uitableview

```
static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

NSLog(@"%d",indexId);
if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    /////////////////////   Cell Title    /////////////////////
    //cell.textLabel.font = [UIFont fontWithName:@"Noteworthy" size:20.0];
    cell.textLabel.font = [UIFont boldSystemFontOfSize:14.0];
    cell.textLabel.highlightedTextColor = [UIColor orangeColor];
}
/////////////////////   Cell Title    /////////////////////
cell.textLabel.text = [NSString stringWithFormat:@"  %@", [test.arrTitle objectAtIndex:indexPath.row]]; 
```

上面的代码我需要更改代码以获取 tableview 单元格标签之间的空间

谢谢并恭祝安康

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T11:20:42.477

有几种方法可以在表格视图中的单元格之间添加空间。

您可以在 Interface Builder 中调整表格视图单元格的高度，您可以自定义具有不同高度的单元格，或者您可以通过[`tableView:heightForRowAtIndexPath:`](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UITableViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UITableViewDelegate/tableView%3aheightForRowAtIndexPath%3a)委托方法以编程方式返回不同的高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T12:24:32.310

在两个单元格之间添加空间的一种简单方法是使用这些部分来显示数据。确保每个部分只包含一个单元格。然后，您可以在后续部分之间添加 sectionHeaderView 或 sectionFooterView 以使其正确。

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView{
  return [myItems count];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
 return 1;
}

#define customSeparatorHeight 3
- (UIView*)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section{
  return [UIView alloc] initWithFrame:CGRectMake(0,0, tableView.bounds.size.width, customSeparatorHeight)];
} 
```

# c# - 如何在 javascript 警报对话框中添加标题文本

> ID：15717921
> 
> 赞同：1
> 
> 时间：2013-03-30T11:17:48.100
> 
> 标签：c#, javascript, html, css

我需要在 javascript 警报对话框中添加标题文本，该文本具有一些前景色和 textfont 将是粗体。可以在 javascript 警报对话框上创建。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T11:19:37.257

您不能修改`alert`对话框的方面。它是特定于浏览器的。如果您想要自定义弹出窗口，您可以查看例如[`jQuery UI dialog`](http://jqueryui.com/dialog/)或[`Twitter Bootstrap Modal`](http://twitter.github.com/bootstrap/javascript.html#modals)。如果您不想使用第三方 javascript 框架，您可以随时推出自己的实现。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-30T11:20:07.983

您不能通过使用来做到这一点`alert`- 它不允许样式选项。

您必须`div`手动创建并显示警报。

**HTML**

```
<div id="alert" style="display:none">
    <p>
       Alert message!
    </p>
</div>

<button id="showAlert" onclick="showAlert()">Show alert</button> 
```

**CSS：**

```
#alert p {
    color: red;
} 
```

**JavaScript：**

```
function showAlert() {
    var element = document.getElementById("alert");
    element.style.display = "block";
} 
```

您还可以使用`jQuery`and`jQuery UI`来完成此操作并使用`dialog`：

[http://jqueryui.com/dialog/](http://jqueryui.com/dialog/)

# c# - 多图像缩略图查看器

> ID：15717923
> 
> 赞同：3
> 
> 时间：2013-03-30T11:18:31.380
> 
> 标签：c#, thumbnails, image, preview

我正在尝试在 c# 中创建一个简单的 winform 应用程序，它可以将文件对话框中的多个图像加载到应用程序屏幕中。我正在使用 ListView 控件来包含这些图像，因为图片框控件无法满足我的需求，因为我希望能够选择加载的缩略图并根据选择执行许多其他操作。

我遇到的问题与**缩略图图像质量有关。** 一旦它们被加载到应用程序窗口面板中，图像质量就会很差。我希望它们看起来就像 Windows 操作系统如何以具有良好图像质量的大图标显示图像的预览/缩略图。

我已经尝试`listView1.LargeImageList.ColorDepth = ColorDepth.Depth32Bit;`按照其他人的建议添加它，但它甚至不会让应用程序加载图像。

这是到目前为止完成的代码。

```
using (OpenFileDialog open = new OpenFileDialog())
{
    open.Title = "Open Image";
    open.Filter = "JPEG Files (*.jpg)|*.jpg;*.jpeg|All Files (*.*)|*.*";
    open.Multiselect = true;

    if (open.ShowDialog() == DialogResult.OK)
    {
        ImageList picList = new ImageList();
        listView1.View = View.LargeIcon;
        picList.ImageSize = new Size(200, 130);

        foreach (String file in open.FileNames)
        {
            Image i = Image.FromFile(file);
            Image pic = i.GetThumbnailImage(200, 130, null, new IntPtr());
            picList.Images.Add(pic);
        }

        listView1.LargeImageList = picList;
        listView1.LargeImageList.ColorDepth = ColorDepth.Depth32Bit;

        for (int i = 0; i < picList.Images.Count; i++)
        {
            ListViewItem item = new ListViewItem();
            item.ImageIndex = i;
            listView1.Items.Add(item);
        }
    } 
```

有没有人建议我应该怎么做才能使它与 Windows 的默认缩略图查看器一样好？

# backbone.js - 基本构造函数中的这个上下文是模块本身 - 打字稿

> ID：15717926
> 
> 赞同：1
> 
> 时间：2013-03-30T11:18:38.033
> 
> 标签：backbone.js, typescript

注意：更改标题后答案以获得更好的可搜索性，因为这与骨干无关。

```
 module App.BackBone.Collections {  
     export class MixedChartCollection extends Backbone.Collection {        
            public model: App.BackBone.Models.BaseChartModel;        
            constructor(models?: any, options?: any) {
                  super(models, options);
            }
       }
} 
```

似乎使用`this`上下文作为我的模块而不是我的类 o_O调用了基本 Backbone.Collection 构造函数

这是backbone.js的构造函数：

```
 var Collection = Backbone.Collection = function (models, options) {
      options || (options = {});
      if (options.url) this.url = options.url;
      if (options.model) this.model = options.model;
      if (options.comparator !== void 0) this.comparator = options.comparator;
      this._reset();  //ERROR: this._reset is not a function
      this.initialize.apply(this, arguments);
      if (models) this.reset(models, _.extend({ silent: true }, options));
  }; 
```

在图像中，您可以看到与上下文`App.BackBone.Collections`相同的 3 个成员（红色，其中一个是有问题的类）`this`和 this._reset 最终未定义，因为我们真正希望它被“包装”我的一些无处不在的对象

为什么要这样做？

这是这个类的编译代码：

```
var App;
(function (App) {
    (function (BackBone) {
        (function (Collections) {
            var MixedChartCollection = (function (_super) {
                __extends(MixedChartCollection, _super);
                function MixedChartCollection(models, options) {
                    _super.call(this, models, options); //HERE "this" is not MixedChartCollection instance 
                }
                return MixedChartCollection;
            })(Backbone.Collection);
            Collections.MixedChartCollection = MixedChartCollection;            
        })(BackBone.Collections || (BackBone.Collections = {}));
        var Collections = BackBone.Collections;
    })(App.BackBone || (App.BackBone = {}));
    var BackBone = App.BackBone;
})(App || (App = {})); 
```

![在此处输入图像描述](../Images/eb0cffb9f0eca2c480a68c61c68f7c64.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T14:42:30.327

我假设你有一个这样声明的 BaseChartModel：

```
module App.Backbone.Models {
    export class BaseChartModel extends Backbone.Model {

    }
} 
```

还有你的 MixedChartCollection：

```
module App.Backbone.Collections {
    export class MixedChartCollection extends Backbone.Collection {
        public model: App.Backbone.Models.BaseChartModel;
        constructor(models?: any, options?: any) {
            super(models, options);
        }
    }
} 
```

我看到的一个关键问题是您有一个名称空间，包括`Backbone`and `Backbone`。当这些转换为 JavaScript 时：

```
var App;
(function (App) {
    (function (Backbone) {
        (function (Models) {
            var BaseChartModel = (function (_super) {
                __extends(BaseChartModel, _super);
                function BaseChartModel() {
                    _super.apply(this, arguments);

                }
                return BaseChartModel;
            })(Backbone.Model);
            Models.BaseChartModel = BaseChartModel;            
        })(Backbone.Models || (Backbone.Models = {}));
        var Models = Backbone.Models;
    })(App.Backbone || (App.Backbone = {}));
    var Backbone = App.Backbone; // << scope chain now includes Backbone
})(App || (App = {}));
var App;
(function (App) {
    (function (Backbone) {
        (function (Collections) {
            var MixedChartCollection = (function (_super) {
                __extends(MixedChartCollection, _super);
                function MixedChartCollection(models, options) {
                    _super.call(this, models, options);
                }
                return MixedChartCollection;
            })(App.Backbone.Collection);
            Collections.MixedChartCollection = MixedChartCollection;            
        })(Backbone.Collections || (Backbone.Collections = {}));
        var Collections = Backbone.Collections;
    })(App.Backbone || (App.Backbone = {}));
    var Backbone = App.Backbone;  // << scope chain now includes Backbone
})(App || (App = {})); 
```

您会发现最终`Backbone`设置为冲突`App.Backbone`（生成代码的倒数第二行）。

```
var Backbone = App.Backbone; // << scope chain now includes Backbone 
```

这完全改变了代码的性质，因为现在继承发生在本地范围的`Backbone`实例值而不是 BackboneJS`Model`类（类也是如此`Collection`）。

尝试将模块声明更改为不为您的集合和模型类使用 Backbone 命名空间。

```
module App.My.Models {
    export class BaseChartModel extends Backbone.Model {

    }
}

module App.My.Collections {
    export class MixedChartCollection extends Backbone.Collection {
        public model: App.My.Models.BaseChartModel;
        constructor(models?: any, options?: any) {
            super(models, options);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T20:19:47.497

好的，想通了。

这与我实例化类的方式有关：

```
 var mixedCollection: App.BackBone.Collections.MixedChartCollection
                        = App.BackBone.Collections.MixedChartCollection(); 
```

只是注意到我遗漏了导致我的问题的“新”关键字。

为什么编译器没有捕捉到这个？我不知道。没有必要，但如果有人想要回答，那么背后的推理将标记为答案。

# iphone - UIImageView 的宽度设置失败

> ID：15717929
> 
> 赞同：0
> 
> 时间：2013-03-30T11:19:13.177
> 
> 标签：iphone, ios, cocoa-touch, uiimageview

我在 Size Inspector 中将 UIImageView 的宽度设置为 0。并使用代码

```
-viewDidLoad
{
  ...
  //smallTiao is the outlet of UIImageView
  NSLog(@"smallTiao 's width %f",self.smallTiao.frame.size.width);
} 
```

Xcode log smallTiao 的宽度 0.000000 但实际上 iPad 模拟器中图像视图的宽度不是 0。我不知道为什么。

**更新** 问题解决了。我删除了图像视图。我添加了一个新视图。然后一切正常。

# php - PHP 中的领域驱动设计架构

> ID：15717930
> 
> 赞同：0
> 
> 时间：2013-03-30T11:19:17.297
> 
> 标签：php, domain-driven-design

在具有如下文件夹结构的 PHP DDD 应用程序中：

```
应用程序/
    意见/
    控制器/
    领域/
        模型/（orm生成）           
        服务/
        工厂/  

```

以下类代表什么（从 DDD 术语的角度来看）以及它们的推荐位置是什么。

*   字典（基本功能：检查单词是否有效）*   HtmlValidator（基本功能：检查字符串是否是有效的 html）*   UserCollection（基本功能：对用户集合的操作）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T12:36:07.303

这看起来不像 DDD 应用程序。

特别是，ORM 生成的模型不是领域模型。这是一件好事，如果您的应用程序核心价值在于数据并且您只需要处理 CRUD 操作。

在 DDD 中，应用程序模型来自领域专家的语言，即了解您的应用程序所针对的业务的人，因为这是他自己的工作，但对技术一无所知。

如果您的领域专家谈论字典和 UserCollection（很奇怪，顺便说一句），那么这些类实际上是模型。HtmlValidator，几乎按照定义，不是一个商业术语。

如果您的应用程序的价值来自技术组件，我建议您避免使用 DDD 技术。仅将 DDD 用于处理非常复杂的**业务**规则的应用程序。

**编辑**
大多数时候域模型值得（至少）一个单独的模块。在 PHP 中，我建议您将其捆绑在（至少）一个单独的包中。但是**，使用 MVC 模式并不意味着使用 DDD**：您可以将 MVC 用于数据驱动的应用程序，这很好。在这种情况下，我只会在模型中放入 ORM 生成的类。在这种情况下，我会将所有这些类放在一个 controllers/lib 文件夹中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T09:00:47.743

结构还不错，但我会将模型重命名为实体，因为在 MVC 中，模型由服务、实体和其他类型的类组成。

Dictionary 和 HtmlValidator 没有身份并且是无状态的，这意味着它们属于服务。

```
app/
    views/
    controllers/
    domain/
        entities/ ( orm generated )           
        services/  (HtmlValidator)
        factories/ 
```

尽管它看起来像一个非常简单的应用程序，但这确实意味着您不应该开始使用 DDD 构建块。每个应用程序都会随着时间的推移而增长，最好从适当的结构开始，以避免以后需要对其进行重构。

我接下来你应该考虑创建某种模块，这样你就可以分离逻辑部分。您也可以将应用程序和表示层与域和基础设施层分开：

```
app/
    views/
    controllers/
domain/
    module1     
        entities/           
        services/ 
        factories/ 
   module2 
        ....
vendor/  (infrastructure layer)
    ORM
    ... (some other 3rd party libs) 
```

# ruby - Data Splitting in Ruby

> ID：15717931
> 
> 赞同：2
> 
> 时间：2013-03-30T11:19:23.557
> 
> 标签：ruby, csv, split

I am looking for a gem that will split a CSV dataset into smaller datasets for training and test on a machine learning system. There is a package in **R** which will do this, based on random sampling; but my research has not turned up anything in Ruby. The reason I wanted to do this in Ruby is that the original dataset is quite large, e.g. 17 million rows or 5.5 gig. **R** expects to load the entire dataset into memory. Ruby is far more flexible. Any suggestions would be appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T21:39:15.357

This will partition your original data to two files without loading it all into memory:

```
require 'csv'

sample_perc = 0.75

CSV.open('sample.csv','w') do |sample_out|
  CSV.open('test.csv','w') do |test_out|
    CSV.foreach('alldata.csv') do |row|
      (Random.rand < sample_perc ? sample_out : test_out) << row
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T11:39:58.450

CSV is built-in to ruby, you don't need any gem to do this:

```
require 'csv'

csvs = (1..10).map{|i| CSV.open("data#{i}.csv", "w")}
CSV.foreach("data.csv") do |row|
  csvs.sample << row
end 
```

CSV.foreach will not load the entire file into memory.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T13:58:43.633

You will probably want to write your own code for this, based around Ruby's bundled `csv` gem. There are lots of possibilities for how to split the data, and the requirement to do this efficiently over such a large data set is quite specialist, whilst also not requiring that much code.

However, you might have some luck looking through the many sub-features of `ai4r`

I've not yet found many mature pre-packaged machine learning algorithms for Ruby (that you might also find in R or in Python's `scikitlearn`). No random forests, gbm etc - or if there are, they are difficult to find. There *is* a Ruby interface to R. Also wrappers for ATLAS. I have tried neither.

I do make use of `ruby-fann` (neural nets) , and the gem `narray` is your friend for large numerical data sets.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T18:46:54.560

you can use the smarter_csv Ruby gem and set the chunk_size to the desired sample size, and then save the chunks as Resque jobs , which can then be processed in parallel.

[https://github.com/tilo/smarter_csv](https://github.com/tilo/smarter_csv)

see examples on that GitHub page.

# php - 如何使用 php 将数据插入到计数中？

> ID：15717941
> 
> 赞同：5
> 
> 时间：2013-03-30T11:20:33.463
> 
> 标签：php, curl, httprequest

我已经使用此代码从理货 erp 9.0 中获取数据，

```
<?php
    $requestXML = '<ENVELOPE>'.
                           '<HEADER>'.
                           '<TALLYREQUEST>Export Data</TALLYREQUEST>'.
                           '</HEADER>'.
                           '<BODY>'.
                           '<EXPORTDATA>'.
                           '<REQUESTDESC>'.
                           '<REPORTNAME>Daybook</REPORTNAME>'.
                           '<STATICVARIABLES>'.
                           '<SVEXPORTFORMAT>$$SysName:XML</SVEXPORTFORMAT>'.
                           '</STATICVARIABLES>'.
                           '</REQUESTDESC>'.
                           '</EXPORTDATA>'.
                           '</BODY>'.
                           '</ENVELOPE>';

 $server = 'LOCALHOST:9000';
 $headers = array( "Content-type: text/xml","Content-length:".strlen($requestXML) ,"Connection: close");

$ch = curl_init(); 
curl_setopt($ch, CURLOPT_URL, $server);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_TIMEOUT, 100);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $requestXML);
curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
$data = curl_exec($ch);

if(curl_errno($ch)){
    print curl_error($ch);
    echo "  something went wrong..... try later";
}else{
echo " request accepted";
    print $data;
    curl_close($ch);
} 
```

但我的问题是如何使用 php(curl) 将数据推送（插入）到 Tally ERP 9.0 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-29T06:22:40.937

代替

> $server = '本地主机：9000';

给

> $server = '10.0.0.155:9000';

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-10T12:46:41.570

使用 tally 生成 xml 格式，并使用相同的格式将数据重新插入到 tally 中，例如。创建销售凭证，从tally ie获取xml

> GatewayOfTAlly-->显示-->账簿-->销售登记-->选择月份-->ctl+E导出凭证，

现在你得到了 xml 格式，你可以开始了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-21T09:19:49.727

代替

```
$server = 'LOCALHOST:9000'; 
```

采用

```
$server = 'http://localhost:9000'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-18T06:43:49.633

```
 <form action="" method="post">
    <table width="100%" border="1">
      <tr>
       <th scope="col">Name</th>
        <td><input name="nm" id="nm" type="text" /></td>
      </tr>
      <tr>
        <td colspan="4"><div align="center">
          <label>
          <input type="submit" name="sub" value="Submit" />
          </label>
        </div></td>
        </tr>
    </table>

    </form>
```

```
<?php
/* This is PHP code to insert an entry in Tally. All required XML tags by Tally are taken here in a string and name for Ledger is taken by posted value from HTML form. */

if(isset($_POST['sub']))
    {
        $name = $_POST['nm'];
        $requestXML = '<?xml version="1.0"?>
        <ENVELOPE>
          <HEADER>
            <TALLYREQUEST>Import Data</TALLYREQUEST>
          </HEADER>
          <BODY>
            <IMPORTDATA>
              <REQUESTDESC>
                <REPORTNAME>Vouchers</REPORTNAME>
                <STATICVARIABLES>
                  <SVCURRENTCOMPANY>SAVH</SVCURRENTCOMPANY>
                </STATICVARIABLES>
              </REQUESTDESC>
              <REQUESTDATA>
                <TALLYMESSAGE xmlns:UDF="TallyUDF">
                  <VOUCHER REMOTEID="123" VCHTYPE="Receipt" VCHKEY="321" ACTION="Create" OBJVIEW="Accounting Voucher View">
                    <OLDAUDITENTRIES.LIST>    </OLDAUDITENTRIES.LIST>
                    <ACCOUNTAUDITENTRIES.LIST>    </ACCOUNTAUDITENTRIES.LIST>
                    <AUDITENTRIES.LIST>    </AUDITENTRIES.LIST>
                    <OLDAUDITENTRYIDS.LIST TYPE="Number">
                      <OLDAUDITENTRYIDS>-1</OLDAUDITENTRYIDS>
                    </OLDAUDITENTRYIDS.LIST>
                    <DATE>20130401</DATE>
                    <GUID>f6c10ce3-4a15-42b8-961e-143a512a9e62-00000009</GUID>
                    <VOUCHERTYPENAME>Receipt</VOUCHERTYPENAME>
                    <VOUCHERNUMBER>5</VOUCHERNUMBER>
                    <PARTYLEDGERNAME>'.$name.'</PARTYLEDGERNAME>
                    <CSTFORMISSUETYPE/>
                    <CSTFORMRECVTYPE/>
                    <FBTPAYMENTTYPE>Default</FBTPAYMENTTYPE>
                    <PERSISTEDVIEW>Accounting Voucher View</PERSISTEDVIEW>
                    <VCHGSTCLASS/>
                    <DIFFACTUALQTY>No</DIFFACTUALQTY>
                    <AUDITED>No</AUDITED>
                    <FORJOBCOSTING>No</FORJOBCOSTING>
                    <ISOPTIONAL>No</ISOPTIONAL>
                    <EFFECTIVEDATE>20130401</EFFECTIVEDATE>
                    <ISFORJOBWORKIN>No</ISFORJOBWORKIN>
                    <ALLOWCONSUMPTION>No</ALLOWCONSUMPTION>
                    <USEFORINTEREST>No</USEFORINTEREST>
                    <USEFORGAINLOSS>No</USEFORGAINLOSS>
                    <USEFORGODOWNTRANSFER>No</USEFORGODOWNTRANSFER>
                    <USEFORCOMPOUND>No</USEFORCOMPOUND>
                    <ALTERID>20</ALTERID>
                    <EXCISEOPENING>No</EXCISEOPENING>
                    <USEFORFINALPRODUCTION>No</USEFORFINALPRODUCTION>
                    <ISCANCELLED>No</ISCANCELLED>
                    <HASCASHFLOW>Yes</HASCASHFLOW>
                    <ISPOSTDATED>No</ISPOSTDATED>
                    <USETRACKINGNUMBER>No</USETRACKINGNUMBER>
                    <ISINVOICE>No</ISINVOICE>
                    <MFGJOURNAL>No</MFGJOURNAL>
                    <HASDISCOUNTS>No</HASDISCOUNTS>
                    <ASPAYSLIP>No</ASPAYSLIP>
                    <ISCOSTCENTRE>No</ISCOSTCENTRE>
                    <ISSTXNONREALIZEDVCH>No</ISSTXNONREALIZEDVCH>
                    <ISEXCISEMANUFACTURERON>No</ISEXCISEMANUFACTURERON>
                    <ISBLANKCHEQUE>No</ISBLANKCHEQUE>
                    <ISDELETED>No</ISDELETED>
                    <ASORIGINAL>No</ASORIGINAL>
                    <VCHISFROMSYNC>No</VCHISFROMSYNC>
                    <MASTERID>9</MASTERID>
                    <VOUCHERKEY>177657027231784</VOUCHERKEY>
                    <INVOICEDELNOTES.LIST>    </INVOICEDELNOTES.LIST>
                    <INVOICEORDERLIST.LIST>    </INVOICEORDERLIST.LIST>
                    <INVOICEINDENTLIST.LIST>    </INVOICEINDENTLIST.LIST>
                    <ATTENDANCEENTRIES.LIST>    </ATTENDANCEENTRIES.LIST>
                    <ORIGINVOICEDETAILS.LIST>    </ORIGINVOICEDETAILS.LIST>
                    <INVOICEEXPORTLIST.LIST>    </INVOICEEXPORTLIST.LIST>
                    <ALLLEDGERENTRIES.LIST>
                      <AMOUNT>200000.00</AMOUNT>
                      <OLDAUDITENTRYIDS.LIST TYPE="Number">
                        <OLDAUDITENTRYIDS>-1</OLDAUDITENTRYIDS>
                      </OLDAUDITENTRYIDS.LIST>
                      <LEDGERNAME>'.$name.'</LEDGERNAME>
                      <GSTCLASS/>
                      <ISDEEMEDPOSITIVE>No</ISDEEMEDPOSITIVE>
                      <LEDGERFROMITEM>No</LEDGERFROMITEM>
                      <REMOVEZEROENTRIES>No</REMOVEZEROENTRIES>
                      <ISPARTYLEDGER>Yes</ISPARTYLEDGER>
                      <ISLASTDEEMEDPOSITIVE>No</ISLASTDEEMEDPOSITIVE>
                      <BANKALLOCATIONS.LIST></BANKALLOCATIONS.LIST>
                      <BILLALLOCATIONS.LIST></BILLALLOCATIONS.LIST>
                      <INTERESTCOLLECTION.LIST></INTERESTCOLLECTION.LIST>
                      <OLDAUDITENTRIES.LIST></OLDAUDITENTRIES.LIST>
                      <ACCOUNTAUDITENTRIES.LIST></ACCOUNTAUDITENTRIES.LIST>
                      <AUDITENTRIES.LIST></AUDITENTRIES.LIST>
                      <TAXBILLALLOCATIONS.LIST></TAXBILLALLOCATIONS.LIST>
                      <TAXOBJECTALLOCATIONS.LIST></TAXOBJECTALLOCATIONS.LIST>
                      <TDSEXPENSEALLOCATIONS.LIST></TDSEXPENSEALLOCATIONS.LIST>
                      <VATSTATUTORYDETAILS.LIST></VATSTATUTORYDETAILS.LIST>
                      <COSTTRACKALLOCATIONS.LIST></COSTTRACKALLOCATIONS.LIST>
                    </ALLLEDGERENTRIES.LIST>
                    <ALLLEDGERENTRIES.LIST>
                      <OLDAUDITENTRYIDS.LIST TYPE="Number">
                        <OLDAUDITENTRYIDS>-1</OLDAUDITENTRYIDS>
                      </OLDAUDITENTRYIDS.LIST>
                      <LEDGERNAME>Bank of Maharashtra</LEDGERNAME>
                      <GSTCLASS/>
                      <ISDEEMEDPOSITIVE>Yes</ISDEEMEDPOSITIVE>
                      <LEDGERFROMITEM>No</LEDGERFROMITEM>
                      <REMOVEZEROENTRIES>No</REMOVEZEROENTRIES>
                      <ISPARTYLEDGER>Yes</ISPARTYLEDGER>
                      <ISLASTDEEMEDPOSITIVE>Yes</ISLASTDEEMEDPOSITIVE>
                      <AMOUNT>-200000.00</AMOUNT>
                      <BANKALLOCATIONS.LIST>
                        <DATE>20130401</DATE>
                        <INSTRUMENTDATE>20130401</INSTRUMENTDATE>
                        <BANKBRANCHNAME>Warje</BANKBRANCHNAME>
                        <TRANSACTIONTYPE>Cheque/DD</TRANSACTIONTYPE>
                        <BANKNAME>AXIS</BANKNAME>
                        <PAYMENTFAVOURING>'.$name.'</PAYMENTFAVOURING>
                        <INSTRUMENTNUMBER>50026</INSTRUMENTNUMBER>
                        <UNIQUEREFERENCENUMBER>38ROUrdV00QEKOhl</UNIQUEREFERENCENUMBER>
                        <STATUS>No</STATUS>
                        <CHEQUEPRINTED>-1</CHEQUEPRINTED>
                        <AMOUNT>-200000.00</AMOUNT>
                      </BANKALLOCATIONS.LIST>
                      <BILLALLOCATIONS.LIST></BILLALLOCATIONS.LIST>
                      <INTERESTCOLLECTION.LIST></INTERESTCOLLECTION.LIST>
                      <OLDAUDITENTRIES.LIST></OLDAUDITENTRIES.LIST>
                      <ACCOUNTAUDITENTRIES.LIST></ACCOUNTAUDITENTRIES.LIST>
                      <AUDITENTRIES.LIST></AUDITENTRIES.LIST>
                      <TAXBILLALLOCATIONS.LIST></TAXBILLALLOCATIONS.LIST>
                      <TAXOBJECTALLOCATIONS.LIST></TAXOBJECTALLOCATIONS.LIST>
                      <TDSEXPENSEALLOCATIONS.LIST></TDSEXPENSEALLOCATIONS.LIST>
                      <VATSTATUTORYDETAILS.LIST> </VATSTATUTORYDETAILS.LIST>
                      <COSTTRACKALLOCATIONS.LIST> </COSTTRACKALLOCATIONS.LIST>
                    </ALLLEDGERENTRIES.LIST>
                    <ATTDRECORDS.LIST> </ATTDRECORDS.LIST>
                  </VOUCHER>
                </TALLYMESSAGE>
                <TALLYMESSAGE xmlns:UDF="TallyUDF">
                  <COMPANY>
                    <REMOTECMPINFO.LIST MERGE="Yes">
                      <NAME>12</NAME>
                      <REMOTECMPNAME>SAVH</REMOTECMPNAME>
                      <REMOTECMPSTATE>Maharashtra</REMOTECMPSTATE>
                    </REMOTECMPINFO.LIST>
                    <REMOTECMPINFO.LIST MERGE="Yes">
                      <NAME>f6c10ce3-4a15-42b8-961e-143a512a9e62</NAME>
                      <REMOTECMPNAME>SAVH</REMOTECMPNAME>
                      <REMOTECMPSTATE>Maharashtra</REMOTECMPSTATE>
                    </REMOTECMPINFO.LIST>
                  </COMPANY>
                </TALLYMESSAGE>
                <TALLYMESSAGE xmlns:UDF="TallyUDF">
                  <COMPANY>
                    <REMOTECMPINFO.LIST MERGE="Yes">
                      <NAME>12</NAME>
                      <REMOTECMPNAME>SAVH</REMOTECMPNAME>
                      <REMOTECMPSTATE>Maharashtra</REMOTECMPSTATE>
                    </REMOTECMPINFO.LIST>
                    <REMOTECMPINFO.LIST MERGE="Yes">
                      <NAME>f6c10ce3-4a15-42b8-961e-143a512a9e62</NAME>
                      <REMOTECMPNAME>SAVH</REMOTECMPNAME>
                      <REMOTECMPSTATE>Maharashtra</REMOTECMPSTATE>
                    </REMOTECMPINFO.LIST>
                  </COMPANY>
                </TALLYMESSAGE>
              </REQUESTDATA>
            </IMPORTDATA>
          </BODY>
        </ENVELOPE>';

/* Actual code for importing goes here */
        $server = 'http://localhost:9000';
        $headers = array( "Content-type: text/xml" ,"Content-length: ".strlen($requestXML) ,"Connection: close" );

        $ch = curl_init();
        curl_setopt($ch, CURLOPT_URL, $server);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
        curl_setopt($ch, CURLOPT_TIMEOUT, 100);
        curl_setopt($ch, CURLOPT_POST, true);
        curl_setopt($ch, CURLOPT_POSTFIELDS, $requestXML);
        curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
        $data = curl_exec($ch);

        if(curl_errno($ch))
        {
            print curl_error($ch);
            echo "  something went wrong..... try later";
        }
        else
        {
            echo " request accepted";
            print $data;
            curl_close($ch);
        }
    }

?> 
```

试试这个，它会工作....在“$server”中提供您的端口，它是在计数配置中....

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-27T09:43:12.573

```
<?php    

if(count($_POST)) {

    $group_name = strtoupper($_POST['group_name']);
    $item_name = $_POST['item_name'];
    /*$opening_balance = $_POST['opening_balance'];
    $opening_value = $_POST['opening_value'];
    $opening_rate = $opening_value * $opening_balance;*/

    $res_str =<<<XML
    <ENVELOPE>
<HEADER>
<TALLYREQUEST>Import Data</TALLYREQUEST>
</HEADER>
<BODY>
<IMPORTDATA>
<REQUESTDESC>
<REPORTNAME>All Masters</REPORTNAME>
</REQUESTDESC>
<REQUESTDATA>

<!-- Create Stock Group named "$group_name" -->
<TALLYMESSAGE xmlns:UDF="TallyUDF">
<STOCKGROUP NAME="{$group_name}" ACTION="Create">
<NAME.LIST>
<NAME>{$group_name}</NAME>
</NAME.LIST>
<PARENT/>
<ISADDABLE>Yes</ISADDABLE>
</STOCKGROUP>
</TALLYMESSAGE>

<!-- Create Stock Item named "$item_name" -->
<TALLYMESSAGE xmlns:UDF="TallyUDF">
<STOCKITEM NAME="{$item_name}" ACTION="Create">
<NAME.LIST>
<NAME>{$item_name}</NAME>
</NAME.LIST>
<PARENT>{$group_name}</PARENT>

<BATCHALLOCATIONS.LIST>
<NAME>Primary Batch</NAME>
<BATCHNAME>Primary Batch</BATCHNAME>
<GODOWNNAME>Main Location</GODOWNNAME>
<MFDON>20190120</MFDON>
<OPENINGBALANCE>0.000 NOS</OPENINGBALANCE>
<OPENINGVALUE>0.000</OPENINGVALUE>
<OPENINGRATE>0.000/NOS</OPENINGRATE>
</BATCHALLOCATIONS.LIST>
</STOCKITEM>
</TALLYMESSAGE>
</REQUESTDATA>
</IMPORTDATA>
</BODY>
</ENVELOPE>
XML;

    //var_dump($res_str);die;

    $url = "http://localhost:8000/";

        //setting the curl parameters.
        $ch = curl_init();
        curl_setopt($ch, CURLOPT_URL, $url);
// Following line is compulsary to add as it is:
        curl_setopt($ch, CURLOPT_POSTFIELDS,
                    "xmlRequest=" . $res_str);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
        curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 300);
        $data = curl_exec($ch);

        if(curl_errno($ch)){
            var_dump($data);
        } else {
            $msg = $data;
        }
        curl_close($ch);

}

?>

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Tally</title>

    <!-- Bootstrap -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>

    <div class="container">

        <div class="col-md-6 col-md-offset-3" style="margin-top:20px">
            <?php if(isset($msg) && $msg) :?>
            <div class="alert alert-success" role="alert"><?=$msg?></div>
            <?php endif;?>
             <div class="pull-left"><a href="export.php">Item List</a> &nbsp;|&nbsp;</div>
              <div class="pull-left"><a href="stockGroupItem.php">Create StockGroup Item</a>&nbsp;|&nbsp;</div>
               <div class="pull-left"><a href="ledger.php">Create Ledger</a>&nbsp;|&nbsp;</div>
            <hr>

            <form class="form-horizontal" method="post" action="">
              <div class="form-group">
                <label for="group-name" class="col-sm-4 control-label">Stock Group name</label>
                <div class="col-sm-6">
                  <input type="text" class="form-control" id="group-name" placeholder="Stock Group name" name="group_name">
                </div>
              </div>
              <div class="form-group">
                <label for="item-name" class="col-sm-4 control-label">Stock Item name</label>
                <div class="col-sm-6">
                  <input type="text" class="form-control" id="item-name" placeholder="Stock Item name" name="item_name" required>
                </div>
              </div>

             <!--  <div class="form-group">
                <label for="opening_balance" class="col-sm-4 control-label">Quantity</label>
                <div class="col-sm-6">
                  <input type="text" class="form-control" id="opening_balance" placeholder="Item Quantity" name="opening_balance" required>
                </div>
              </div>

              <div class="form-group">
                <label for="opening_value" class="col-sm-4 control-label">Unit Price</label>
                <div class="col-sm-6">
                  <input type="text" class="form-control" id="opening_value" placeholder="Item Unit Price" name="opening_value" required>
                </div>
              </div> -->

              <div class="form-group">
                <div class="col-sm-offset-4 col-sm-6">
                  <button type="submit" class="btn btn-primary">Insert</button>
                </div>
              </div>
            </form>
        </div>
    </div>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  </body>
</html> 
```

# android - 总计无法解析为 Android 中的类型

> ID：15717948
> 
> 赞同：1
> 
> 时间：2013-03-30T11:21:42.827
> 
> 标签：android

我正在尝试**从 Adapter 类到 Activity 类获取总价值**，但我收到一条错误消息：

```
 total cannot be resolved to a type

   // here i am getting total cannot be resolved to a type
Double mGTotal = Double.parseDouble(Constants.mItem_Detail.get(0).get(total)); // total (single) > CartAdapter 
```

**CartAdapter.java：**

```
 public View getView(final int position, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub
    View vi = convertView;
    if (convertView == null)
        vi = inflater.inflate(R.layout.listrow_cart, null);

    TextView title = (TextView) vi.findViewById(R.id.title);
    final TextView cost = (TextView) vi.findViewById(R.id.cost);
    final TextView qty = (TextView) vi.findViewById(R.id.qty);
    final TextView total = (TextView) vi.findViewById(R.id.total);

    ImageButton mImgBtnDelete = (ImageButton) vi
            .findViewById(R.id.mImgBtnDelete);

    mImgBtnDelete.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub

            Constants.mItem_Detail.remove(position);
            notifyDataSetChanged();

            Intent mInViewCartRefresh = new Intent(activity,
                    CartActivity.class);
            activity.startActivity(mInViewCartRefresh);
            activity.finish();
        }
    });

    HashMap<String, String> item = new HashMap<String, String>();
    item = Constants.mItem_Detail.get(position);

    // Setting all values in listview
    title.setText(item.get(restra.second.erachnida.menus.ProductInformationActivity.KEY_TITLE));
    cost.setText(item.get(restra.second.erachnida.menus.ProductInformationActivity.KEY_COST));
    qty.setText("1");
    qty.addTextChangedListener(new TextWatcher() {

        public void onTextChanged(CharSequence s, int start, int before,
                int count) {
            // TODO Auto-generated method stub
            if (!qty.getText().toString().equals("")
                    || !qty.getText().toString().equals("")) {
                int itemquantity = Integer.parseInt(qty.getText()
                        .toString());
                double itemamount = Double.parseDouble(cost.getText()
                        .toString());
                total.setText(new DecimalFormat("##.##").format(itemamount*itemquantity));
            } else {
                total.setText("0.00");
            }
        }

        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
            // TODO Auto-generated method stub

        }

        public void afterTextChanged(Editable s) {

        }
    }); 
```

**CartActivity.java:**

```
 public class CartActivity extends Activity 
    {

TextView mTxtViewGrandTotal;
TextView myTextVeiwGrandTotal;

TextView mItems;
String mGrandTotal;
String mTotal;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_cart);

    ListView mLstView1 = (ListView) findViewById(R.id.listView1);

    mTxtViewGrandTotal = (TextView) findViewById(R.id.billing_amount);
    myTextVeiwGrandTotal = (TextView) findViewById(R.id.total_amount);
    mItems = (TextView) findViewById(R.id.total_items);

    CartAdapter mViewCartAdpt = new CartAdapter(CartActivity.this);
    mLstView1.setAdapter(mViewCartAdpt);

    if (Constants.mItem_Detail.size() > 0) 
    {
         // here i am getting total cannot be resolved to a type
        Double mGTotal = Double.parseDouble(Constants.mItem_Detail.get(0).get(total)); // total (single) > CartAdapter
        for (int i = 1; i < Constants.mItem_Detail.size(); i++) 
        {   
        mGTotal = mGTotal + Double.parseDouble(Constants.mItem_Detail.get(i).get(total));  // total (all) > CartAdapter
        }
        mGrandTotal = String.valueOf(mGTotal);
        mTxtViewGrandTotal.setText(mGrandTotal);
        myTextVeiwGrandTotal.setText(mGrandTotal);
        mTxtViewGrandTotal.setText(new DecimalFormat("##.##").format(mGTotal));
        mTotal = String.valueOf(Constants.mItem_Detail.size());
        mItems.setText(mTotal); 

    }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T11:29:59.237

您没有从总文本视图中获取文本值。

**TextView 总计 = (TextView) vi.findViewById(R.id.total);**

**总.getText().toString()**

```
if (Constants.mItem_Detail.size() > 0) 
{
     // here i am getting total cannot be resolved to a type
    Double mGTotal = Double.parseDouble(Constants.mItem_Detail.get(0).get(total.getText().toString())); // total (single) > CartAdapter
    for (int i = 1; i < Constants.mItem_Detail.size(); i++) 
    {   
    mGTotal = mGTotal + Double.parseDouble(Constants.mItem_Detail.get(i).get(total.getText().toString()));  // total (all) > CartAdapter
    }
    mGrandTotal = String.valueOf(mGTotal);
    mTxtViewGrandTotal.setText(mGrandTotal);
    myTextVeiwGrandTotal.setText(mGrandTotal);
    mTxtViewGrandTotal.setText(new DecimalFormat("##.##").format(mGTotal));
    mTotal = String.valueOf(Constants.mItem_Detail.size());
    mItems.setText(mTotal); 

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T11:27:47.060

看来您的适配器类中的总文本视图。所以试试这个：

```
Double mGTotal = Double.parseDouble(Constants.mItem_Detail.get(0).get(total.getText().toString())); 
```

# php - 使用复选框从表中删除行

> ID：15717949
> 
> 赞同：1
> 
> 时间：2013-03-30T11:21:49.817
> 
> 标签：php, mysql

我正在尝试根据复选框从表中删除多行，但是我不太确定如何最好地去做。目前，我有一个电影列表，我希望能够根据它们是否被选中来删除这些电影中的一部或多部。

```
// Update Watchlist
    if ($submit == 'Update Watchlist') { 
        require_once("db_connect.php");

        $watchlist_name = clean_string($_POST['watchlist-name']);
        $watchlist_description = clean_string($_POST['watchlist-description']);
        $watchlist_category = $_POST['watchlist-category'];

        $updateWatchlist_bad_message = '';

        if (!empty($watchlist_name)) {
            if ($watchlist_name = clean_string($watchlist_name)) {
                $update_watchlist_name_query = "UPDATE watchlists SET name = '$watchlist_name' WHERE watchlist_id = " . $watchlist_id;
                mysql_query($update_watchlist_name_query) or die("Insert failed. " . mysql_error() . "<br />" . $$update_watchlist_name_query);
            }
        } 
        if (!empty($watchlist_description)) {
            if ($watchlist_description = clean_string($watchlist_description)) {
                $update_watchlist_description_query = "UPDATE watchlists SET description = '$watchlist_description' WHERE watchlist_id = " . $watchlist_id;
                mysql_query($update_watchlist_description_query) or die("Insert failed. " . mysql_error() . "<br />" . $$update_watchlist_description_query);
            }
        }
        if ($watchlist_category != "") {
            $update_watchlist_category_query = "UPDATE watchlists SET category = '$watchlist_category' WHERE watchlist_id = " . $watchlist_id;
            mysql_query($update_watchlist_category_query) or die("Insert failed. " . mysql_error() . "<br />" . $$update_watchlist_category_query);
        }
        if(isset($_POST['film-name'])) {
            $checkbox = $_POST['film-name'];
            $count = count($checkbox);

            for($i = 0; $i < $count; $i++) {
                $id = (int) $checkbox[$i]; // Parse your value to integer

                if ($id > 0) { // and check if it's bigger then 0
                    mysql_query("DELETE FROM watchlist_films WHERE film_id = $rt_id");
                }
            }
        } else {
            $updateWatchlist_bad_message = '<div class="alert alert-error">Sorry, but we can\'t do that at the minute. Please try again later.</div>';
        }
        require_once("db_close.php");?>
        <script type="text/javascript">
            window.location = "watchlist.php?id=<?php echo $watchlist_id; ?>"
        </script><?php
    } 
```

适当的字符串是电影名称，我尝试使用此解决方案 - [PHP 删除带有多个复选框的 SQL 行](https://stackoverflow.com/questions/15599303/php-to-delete-sql-row-with-multiple-checkboxes)- 但是它不起作用，因为电影没有从包含的监视列表中删除。

基本上，我的查询背后的逻辑如下：

*   检查是否勾选了一个复选框
*   如果勾选了一个复选框，请检查是否还勾选了其他复选框
*   从关注列表中删除所有已勾选的电影

我不确定上述是否是最简单的方法，例如，只需检查是否有任何复选框被一次性选中，而不是在检查之前先检查是否有任何复选框被选中，可能会更简单和更清晰如果其他人也是。

**更新**

只是想我会用更多信息来澄清-我在监视列表中显示所有电影的实际 foreach 如下（对格式表示歉意）：

```
foreach ($films as $key => $film_item) {
    include ("watchlist-film-controller.php");?>    
    <label class="checkbox input-block-level">
      <p class="pull-right"><?php echo $title; ?></p>
      <input type="checkbox" class="input-block-level" name="film-name[]" 
             value="<?php echo $title; ?>">
    </label><?php
} 
```

**更新 2**

为了回答对这篇文章的两个（非常感谢！）评论，这里有一些关于现在正在发生的事情的更多信息。我已经尝试了这两种解决方案，但都没有奏效。就目前而言，我已经实现了 didierc 给出的解决方案，我的代码目前如下所示：

```
<?php
/*
        ini_set('display_errors', 1);
    error_reporting(E_ALL);
*/
    $rt_id = $film_item['film_id'];
    $watchlist_id = $_GET['id'];

    include_once('/api/RottenTomatoes.php');
    $rottenTomatoes = new RottenTomatoes('2b2cqfxyazbbmj55bq4uhebs', 10, 'us');

    /* echo "<pre>"; */
    try {
        $result = $rottenTomatoes->getMovieInfo($rt_id);
        //print_r($result);
    } catch (Exception $e) {
        //print_r($e);
    }
    /* echo "</pre>"; */

    $title = $result['title'];
    $year = $result['year'];
    $critics_consensus = $result['critics_consensus'];
    $poster_thumb = $result['posters']['thumbnail'];

    // Update Watchlist
    if ($submit == 'Update Watchlist') { 
        require_once("db_connect.php");

        $watchlist_name = clean_string($_POST['watchlist-name']);
        $watchlist_description = clean_string($_POST['watchlist-description']);
        $watchlist_category = $_POST['watchlist-category'];

        $updateWatchlist_bad_message = '';

        if (!empty($watchlist_name)) {
            if ($watchlist_name = clean_string($watchlist_name)) {
                $update_watchlist_name_query = "UPDATE watchlists SET name = '$watchlist_name' WHERE watchlist_id = " . $watchlist_id;
                mysql_query($update_watchlist_name_query) or die("Insert failed. " . mysql_error() . "<br />" . $$update_watchlist_name_query);
            }
        } 
        if (!empty($watchlist_description)) {
            if ($watchlist_description = clean_string($watchlist_description)) {
                $update_watchlist_description_query = "UPDATE watchlists SET description = '$watchlist_description' WHERE watchlist_id = " . $watchlist_id;
                mysql_query($update_watchlist_description_query) or die("Insert failed. " . mysql_error() . "<br />" . $$update_watchlist_description_query);
            }
        }
        if ($watchlist_category != "") {
            $update_watchlist_category_query = "UPDATE watchlists SET category = '$watchlist_category' WHERE watchlist_id = " . $watchlist_id;
            mysql_query($update_watchlist_category_query) or die("Insert failed. " . mysql_error() . "<br />" . $$update_watchlist_category_query);
        }
        if(isset($_POST['film-name'])) {
            $films = array_map('intval', $_POST['film-name']); // make sure that every film id is an integer
            mysql_query("DELETE FROM watchlist_films WHERE film_id IN (" . implode(',', $films) . ") AND watchlist_id = " . $watchlist_id);
        } else {
            $updateWatchlist_bad_message = '<div class="alert alert-error">Sorry, but we can\'t do that at the minute. Please try again later.</div>';
        }
        require_once("db_close.php");?>
        <script type="text/javascript">
            window.location = "watchlist.php?id=<?php echo $watchlist_id; ?>"
        </script><?php
    } 
```

`$rt_id`是每部电影的唯一 ID，并被传递给表单，因此查询知道在这种情况下应该删除哪些电影或哪些电影。电影的名称仅用于使实际的删除表单更易于阅读，而不是打印出 ID 号列表，因为用户无法知道哪个 ID 与哪个电影匹配。在尝试了给出的两种解决方案后，似乎都没有工作，但是没有返回错误 - 表单提交，但选定的电影不会从监视列表中删除。

**更新 3**

作为对 didierc 评论的回应，以下是正在发生的事情的完整细分：

*   监视列表分为两个表格 -`watchlists`和`watchlist_films`. `watchlists`保存简单信息，例如监视列表 ID、名称和描述，以及创建它的用户的用户 ID。`watchlist_films`仅包含 Watchlist ID 和 Watchlist 包含的电影 ID ( `$rt_id`)。监视列表占用表格中的单行`watchlists`和表格中的多行`watchlist_films`（因为一个监视列表可以包含多部电影）。
*   电影信息是从烂番茄和 TMDb API 中获取的，这就是电影 ID ( `$rt_id`) 的来源——每部电影都有一个完全独特的`$rt_id`.

Watchlists 的完整“处理代码”在**Update 2**中，但是 HTML 呈现如下：

```
<?php 
    include("checklog.php"); 
    require_once("watchlist-controller.php");
?>
<!DOCTYPE html>

    <head>

        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link rel="shortcut icon" href="img/fav.ico">
        <link rel="apple-touch-icon" href="img/apple-touch-icon.png">
        <title>Screening - Your ticket to your movies - <?php echo $watchlist_name; ?></title>
        <meta name="description" content="Screening is a brand new take on the traditional movie database, fusing social networking and multimedia to provide a clear, concise experience allowing you to share your favourite movies, and discover new classics.">
        <meta name="keywords" content="Movies, Films, Screening, Discover, Watch, Share, experience, database, movie database, film database, share film, share films, discover film, discover films, share movie, share movies, discover movie, discover movies">

        <!-- Bootstrap -->
        <link href="css/bootstrap.css" rel="stylesheet" media="screen">
        <link href="css/bootstrap-responsive.css" rel="stylesheet">
        <link href="css/custom-bootstrap.css" rel="stylesheet">
        <link rel="stylesheet" href="fonts.css" type="text/css" />
        <link rel="stylesheet/less" type="text/css" href="css/stylesheet.less" />
        <script src="js/less-1.3.3.min.js" type="text/javascript"></script>
        <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
        <script src="js/bootstrap.min.js"></script>

        <!-- Start Google Analytics -->
        <script type="text/javascript">

          var _gaq = _gaq || [];
          _gaq.push(['_setAccount', 'UA-36943512-1']);
          _gaq.push(['_trackPageview']);

          (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
          })();

        </script>
        <!-- End Google Analytics -->

        <!-- Start Google Analytics -->
        <script type="text/javascript">

          var _gaq = _gaq || [];
          _gaq.push(['_setAccount', 'UA-36943512-1']);
          _gaq.push(['_trackPageview']);

          (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
          })();

        </script>
        <!-- End Google Analytics -->

    </head>

    <body>

        <div class="container"><?php 
            require_once ("header.php");?>

            <div class="well main-content">

                <p class="page-title"><?php echo $watchlist_name; ?></p>

                <div class="row-fluid">

                    <section class="span3 sidebar pull-left">

                        <p class="sidebar-text"><span class="bold">NAME: </span><?php echo $watchlist_name; ?></p>
                        <p class="sidebar-text"><span class="bold">CATEGORY: </span><?php echo $watchlist_category; ?></p>
                        <div class="alert alert-info"><?php echo $watchlist_description; ?></div>

                        <a href="#watchlistUpdate" class="btn btn-primary btn-block" data-toggle="modal" title="Update Watchlist">Update Watchlist</a>
                        <a href="#watchlistDelete" class="btn btn-danger btn-block" data-toggle="modal" title="Delete Watchlist">Delete Watchlist</a>
                        <a href="profile.php" class="btn btn-block" title="Logout">Your Profile</a>

                    </section>

                    <section class="span9 watchlist-holder">

                        <!-- Loading bar -->
                        <!--
<div class="progress progress-striped active">
                            <div class="bar" style="width: 100%;"></div>
                        </div>
-->

                        <ul class="unstyled"><?php

                            foreach($films as $key => $film_item) {
                                include ("watchlist-film-controller.php");?>
                                <li class="well list-item clearfix">

                                    <div class="row-fluid">
                                        <a href="movie.php?id=<?php echo $rt_id; ?>" class="span1 pull-left" title="<?php echo $title; ?>"><img src="<?php echo $poster_thumb; ?>" alt="<?php echo $title; ?> poster" title="<?php echo $title; ?> poster" /></a>

                                        <div class="span11 movie-info">
                                            <p class="search-title"><a href="movie.php?id=<?php echo $film_item['film_id']; ?>" title="<?php echo $title; ?> (<?php echo $year; ?>)"><?php echo $title; ?></a> <small>(<?php echo $year; ?>)</small></p><?php

                                            if ($critics_consensus == "") {?>
                                                <p class="watchlist-synopsis">No overview available</p><?php
                                            } else {?>
                                                <p class="watchlist-synopsis"><?php echo $critics_consensus; ?></p><?php
                                            }?>

                                        </div>
                                    </div>

                                </li><?php
                            }?>

                        </ul>

                    </section>

                    <div id="watchlistUpdate" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="watchlistUpdateLabel" aria-hidden="true">

                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                            <h3 id="watchlistUpdateLabel" class="modal-title">Update Watchlist</h3>
                        </div>

                        <form name="watchlist-updater" class="watchlist-updater" action="watchlist.php?id=<?php echo $watchlist_id; ?>" method='POST'>

                            <div class="modal-body">

                                 <?php echo $updateWatchlist_bad_message; ?>

                                 <div class="alert alert-info">Use the boxes below to change the Watchlist name and description</div>

                                 <input type="text" class="input-block-level" name="watchlist-name" alt="watchlist-name" placeholder="<?php echo $watchlist_name; ?>">
                                 <textarea rows="3" class="input-block-level" name="watchlist-description" title="Watchlist Description" placeholder="<?php echo $watchlist_description; ?>"></textarea>

                                <label for="Watchlist Category" class="pull-left inline-label" title="Watchlist Category">Watchlist Category</label>
                                    <select class="input-block-level" name="watchlist-category" title="Watchlist Category">
                                    <option value="" title=""></option>
                                    <option value="General" title="General">General</option>
                                    <option value="To watch" title="To watch">To watch</option>
                                    <option value="To share" title="To share">To share</option>
                                    <option value="Favourites" title="Favourites">Favourites</option>
                                </select>   

                                 <div class="alert alert-info">Use the checkbox to the left of each film to remove it from the Watchlist</div><?php

                                foreach ($films as $key => $film_item) {
                                    include ("watchlist-film-controller.php");?>    
                                    <label class="checkbox input-block-level">
                                        <p class="pull-right"><?php echo $title; ?></p>
                                        <input type="checkbox" class="input-block-level" name="film-name" value="<?php echo $title; ?>">
                                    </label><?php
                                }?>

                            </div>

                            <div class="modal-footer">
                                <button type="button" class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
                                <button type="submit" class="btn btn-success" name="submit" value="Update Watchlist">Update Watchlist</button>
                            </div>
                        </form>
                    </div>

                    <div id="watchlistDelete" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="watchlistDeleteLabel" aria-hidden="true">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                            <h3 id="watchlistDeleteLabel" class="modal-title">Delete Watchlist</h3>
                        </div>

                        <div class="modal-body">

                            <?php echo $deleteWatchlist_bad_message; ?>

                            <div class="alert alert-error alert-block">
                                 <p>Deleting this Watchlist will delete all its containing films from your profile. This information will not be recoverable.</p>
                                 <p>Please only delete this Watchlist if you are absolutely sure you want to purge all the information it contains.</p>
                             </div>

                              <p>Are you sure you want to delete this Watchlist?</p>

                        </div>

                        <div class="modal-footer">
                            <form name="watchlist-delete" class="watchlist-delete" action="watchlist.php?id=<?php echo $watchlist_id; ?>" method="POST"><?php
                                include ("watchlist-film-controller.php");?>
                                <button type="button" class="btn" data-dismiss="modal" aria-hidden="true">Do not delete this Watchlist</button>
                                <button type="submit" class="btn btn-danger" name="submit" value="Delete Watchlist">Delete Watchlist</button>
                            </form>
                        </div>
                    </div>

                </div>

            </div>

            <?php include 'footer.html'; ?>

        </div>

    </body>

</html> 
```

Watchlist 的实际更新在#updateWatchlist 模式中。需要更多信息，我很乐意提供！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T12:05:36.180

我认为（其中一个）问题是您正在删除`$rt_id`. 但是，在前面的行中，它只是被称为`id`. 除此之外，我现在看不到任何明显的问题。如果这不起作用，请尝试打印 SQL 查询，因为它即将发送到数据库，替换`mysql_query`为`echo`并给我们输出。

另外，一个快速提示：现在，您正在逐一删除电影。根据所选电影的数量，这可能是一个明显的性能打击。您如何在一个查询中将它们全部删除？

```
if(isset($_POST['film-name'])) {
    $films = array_map('intval', $_POST['film-name']); // make sure that every film id is an integer
    mysql_query("DELETE FROM watchlist_films WHERE film_id IN (" . implode(',', $films) . ")");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T12:18:23.513

一些奇怪的事情：

1.  在您的删除循环中，您`$id`从中检查`$checkbox`，但您使用`$rt_id`: 我认为这是它不起作用的原因。

2.  对于监视列表描述，您调用`clean_string`了两次，一次是从获取它时`$_POST`，另一次是在您检查它是否为空时。

3.  复选框值实际上是电影标题，而不是电影 ID，您可能应该修复它，或者在表单处理脚本中检索相应的 ID。

4.  您删除具有给定电影 ID 的所有条目，但它可能应该只是与特定观察列表相关联的条目。

关于删除过程，您可以将其变成一个查询：

```
$range = implode(',', array_filter(
     array_map('intval', $checkbox),
     function($v){ return $v > 0; }));

$update_query = 'DELETE FROM watchlist_films WHERE film_id IN ('.$range.") AND watchlist_id = '" . $watchlist_id."'"; 
```

* * *

根据您的评论，让我详细说明：

1.  您从表单复选框中检索的值是`$title`在表单生成中调用的值，我想您在 中进行计算`watchlist-film-controller.php`，因为它不会出现在其他任何地方。但是您需要删除表中的行的值是`$ rt_id`. 如何`$rt_id`从中计算`$title`？

基本上，您的复选框`value` *应该是*that `$rt_id`，以便在表单处理中，您不必再次查找该值。我很确定对于给定的电影标题，您可能会获得多个电影 ID，因此您不能仅仅依靠标题来删除监视列表中的条目。想象一下，有人在她的监视列表中拥有所有名为“True Grit”的电影，如果她选择删除其中一部，你会如何处理？

[请考虑将来将您的代码移动到 PDO 或 mysqli API，以实现更安全的数据清理。]

# python - Python：从多个文件中线程读取

> ID：15717954
> 
> 赞同：0
> 
> 时间：2013-03-30T11:22:29.783
> 
> 标签：python

我总共有 10 个文件（有时可能会更多——但这将是一个固定的数字）。

它们很小——大约 80 字节。

虽然从他们那里阅读一切都很好并且有效 - 它很慢。我猜是因为脚本一一处理它们并等待 IO - 所以我开始阅读 Threading and Queue 但我无法想出一个可行的解决方案......

谁能给我一个打开多个线程文件的例子？

我想把代码放到几个线程中：

```
 try:
    with open("/home/pi/sensoren/sensor1", "r") as sensor1, open("/home/pi/sensoren/sensor2", "r") as sensor2, open("/home/pi/sensoren/sensor3", "r") as sensor3, open("/home/pi/sensoren/sensor4", "r") as sensor4, open("/home/pi/sensoren/sensor5", "r") as sensor5, open("/home/pi/sensoren/sensor6", "r") as sensor6, open("/home/pi/sensoren/sensor7", "r") as sensor7, open("/home/pi/sensoren/sensor8", "r") as sensor8, open("/home/pi/sensoren/sensor9", "r") as sensor9, open("/home/pi/sensoren/sensor10", "r") as sensor10:

        sensoren = [sensor1, sensor2, sensor3, sensor4, sensor5, sensor6, sensor7, sensor8, sensor9, sensor10] 
        temp = [ ]

        #CRC checker
        def checkCrc(line):
            if "YES" in line:
                return True
            return False

        #Temperatur Funktion
        def getTemp(line):
            temp = line.rstrip("\n")
            temp = temp.split("t=")
            temp = temp[1]
            #den -62 error abfangen - sollte klappen
            if temp == "-62":
                temp = "00"
            return str(temp)

        #Temperaturen auslesen und zuweisen
        for currentSensor in sensoren:

            if checkCrc(currentSensor.readline()):
                #CRC OK
                temp.append(getTemp(currentSensor.readline()))

            else:
                #CRC ERROR
                temp.append("00")

except IOError as e:
    print("Fehler bei Dateioperationen: %s" % e.strerror) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T11:40:43.900

只要您一口气完成，读取小文件并不慢。

首先，让我们创建一个 80 字节的测试文件；

```
dd if=/dev/random of=test1.dat bs=80 count=1 
```

然后我们定义一个函数来读取所有内容；

```
In [1]: def readfile(name):
   ...:     with open(name) as f:
   ...:         data = f.read()
   ...:     return data
   ...: 
```

然后，计时运行（从普通硬盘读取，而不是 SSD）：

```
In [3]: %timeit readfile('test1.dat')
10000 loops, best of 3: 18.1 us per loop 
```

所以读取这样一个文件需要 18 μs。我不会说那么慢。

当我创建 9 个这些测试文件并循环读取它们时：

```
In [3]: %timeit for i in xrange(1,10): readfile('test{:d}.dat'.format(i))
1000 loops, best of 3: 184 us per loop 
```

有了循环开销，每个文件仍然只有大约 21 μs。

**编辑：**

看过您的代码后，它的功能似乎相当复杂。我会这样构造它：

```
data = []
temp = []
for sn in ['/home/pi/sensoren/sensor{:d}'.format(i) for i in range(1,11)]: 
                                                            #xrange if Python 2.x
    with open(sn) as f:
        data.append(f.read())
# the data list now contains all sensor data
for num, s in enumerate(data):
    # check for CRC
    d = s.strip()
    if d.startswith("YES"):
        t = d.split("t=")
        # populate temp list
        if t[1] == '-62':
            temp.append("00")
        else:
            temp.append(t[1]) 
```

好处：

*   这会一次性读取每个传感器文件。
*   它还删除了每个传感器的两个函数调用。
*   打字少了很多。

# php - 如何提高MYSQL查询的性能？

> ID：15717955
> 
> 赞同：4
> 
> 时间：2013-03-30T11:22:31.867
> 
> 标签：php, mysql, sql, phpmyadmin, mysqldump

我目前正在将数据馈送上传到我的数据库中。由于存在超过 1 千万条记录，我的数据库被转储了。我需要改进或提高我网站中的 MYSQL 查询性能。下面是我执行的查询....

```
select SUM(SPRICE) AS Tot, MIN(SMIN) AS Min from 
(SELECT COUNT(LS.SALEPRICE) AS SPRICE, MIN(LS.SALEPRICE) AS SMIN 
 FROM `linkshare` LS 
 WHERE LS.`PRODUCTNAME` LIKE '%DVS Men\'s Comanche Skate Shoe%' 
 UNION 
 SELECT COUNT(CJ.PRICE) AS SPRICE, MIN(CJ.PRICE) AS SMIN 
 FROM `cjfeeds` CJ 
 WHERE CJ.NAME LIKE '%DVS Men\'s Comanche Skate Shoe%' ) AS xyz 
```

在上面的查询中，它在本地数据库中完美运行，我的数据库包含不到 50,000 条记录...如何改进我在实时服务器中的查询？请指导我.....

![解释查询](../Images/9403c27236472be7c5342493ca2fc213.png)

我的查询也花了 39.4626 秒。如何减少此查询运行时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T11:27:02.783

好的，要编辑我的答案以首先更具体地处理您的查询，早期的建议会起作用，但您的查询相当疯狂，所以让我们讨论一下原因。

您需要的一切实际上都在此处的 EXPLAIN 输出中，您的 UNION 导致 340 万次元组访问，而派生表查询（连接后）约为 90 万。

*   在两个表中的 PRODUCTNAME 上[添加索引](https://stackoverflow.com/questions/3002605/how-to-add-indexes-to-mysql-tables)

*   联盟？什么？我假设这里发生的事情是您有两个非常相似/相同的表，并且您正在对这个相当狡猾的过滤器查询进行 UNION，以基本上将一个表连接到另一个表。这是第一个警告标志，如果您可以简化此查询并拥有一个具有类型枚举的表，例如 (LS|CJ) 或外键和类型表，则此查询会更快，`type`具体取决于您的要求。

*   假设您出于某种原因不想永久执行此操作（并且您应该这样做），您可以从两个选择中为此计算[创建一个临时表。](https://stackoverflow.com/questions/5859391/create-temporary-table-from-select-statement-without-using-create-table)一旦你将所有信息都放在一张表中，因为你正在做一个简单的选择你的计数，总和会很快。

MySQL 有一个 EXPLAIN 命令，您可以为任何查询添加前缀，例如

```
EXPLAIN select SUM(SPRICE) AS Tot, MIN(SMIN) AS Min from (SELECT COUNT(LS.SALEPRICE) AS SPRICE, MIN(LS.SALEPRICE) AS SMIN FROM `linkshare` LS WHERE LS.`PRODUCTNAME` LIKE '%DVS Men\'s Comanche Skate Shoe%' UNION SELECT COUNT(CJ.PRICE) AS SPRICE, MIN(CJ.PRICE) AS SMIN FROM `cjfeeds` CJ WHERE CJ.NAME LIKE '%DVS Men\'s Comanche Skate Shoe%' ) AS xyz; 
```

输出对于初学者来说可能有些神秘，请查看有关它的[教程](http://www.slideshare.net/phpcodemonkey/mysql-explain-explained)以获取更多信息。一般来说：

*   尽可能避免使用“LIKE %blah%”样式的查询，因为 Mark Ba​​nnister 建议这些不会使用您创建的任何索引。
*   为选择中使用的任何字段创建索引（在超过一千行的表中）。
*   尽可能保持快速增长的桌子精简
*   尽可能使用固定宽度的列，例如 char/varchar 而不是 TEXT/BLOB
*   如果您在大型数据集上运行复合慢查询，请考虑对其进行缓存/[调整](https://raw.github.com/rackerhacker/MySQLTuner-perl/master/mysqltuner.pl)my.cnf 表缓存大小。

    总之，总是尝试进行精确的字符串匹配，因为这些可以被索引。您的问题源于规范化不良的表结构。规范化只是意味着（以高级非技术方式）您以一种减少重复的方式组织数据，因此更加一致。好处是它可以更轻松地对其进行有效查询。如果您认为您需要通配符查询，您可能需要将您的产品分类，例如分类为“鞋”等类别，为此，添加一个带有 |category_id, category_name| 模式的 product_categories 表。然后在您的产品表中（如果产品只能在一个类别中）添加一个外键，例如 category_id，在 category_id 字段中添加一个索引，然后通过 category_id 查询产品

例如 select * FROM products where category_id=5

如果您认为需要对数据进行模糊匹配，那听起来确实有点杂乱无章。如果不可避免，请查看您的 devops 人员是否可以设置读取从站，以便您的慢查询不会损害任何重要系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T11:24:34.767

使用[EXPLAIN](http://dev.mysql.com/doc/refman/5.0/en/explain.html)找出引擎盖下发生的事情

# c# - 序列化对象的问题

> ID：15717963
> 
> 赞同：0
> 
> 时间：2013-03-30T11:23:01.753
> 
> 标签：c#, serialization, xml-serialization

我在 C# 中有这个类

```
public class ExerciseDTO {
    Dictionary<String, String> qa;
    private String materialId, content, topic;

    //constructors

    //properties

    public void makePersistent(String path) {
        Stream outputStream = File.OpenWrite(path + @"\" + this.topic + ".xml");
        XmlSerializer serializer = new XmlSerializer(typeof(ExerciseDTO));
        serializer.Serialize(outputStream, this);
        outputStream.Flush();
        outputStream.Close();
    }
} 
```

调用该`makePersistent`方法会使应用程序抛出带有 message 的异常`An error occured while reflecting object of type ExerciseDTO`。为什么我不能序列化这个类的实例？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T11:25:15.393

> 为什么我不能序列化这个类的实例？

因为`XmlSerializer`该类[不支持序列化`Dictionary<TKey, TValue>`](https://stackoverflow.com/questions/2911514/why-doesnt-xmlserializer-support-dictionary)属性。

作为替代方案，您可以使用[`DataContractSerializer`](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datacontractserializer.aspx)which 支持字典。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T11:41:30.020

Darin 所说的，`Dictionary`不是 XML 可序列化的。您可以创建自己的 XmlSerializableDictionary。网上有很多很好的例子。这是一个：

[http://weblogs.asp.net/pwelter34/archive/2006/05/03/444961.aspx](http://weblogs.asp.net/pwelter34/archive/2006/05/03/444961.aspx)

如果链接将来失效，请复制/粘贴：

```
using System;
using System.Collections.Generic;
using System.Text;
using System.Xml.Serialization;

[XmlRoot("dictionary")]
public class SerializableDictionary<TKey, TValue>
    : Dictionary<TKey, TValue>, IXmlSerializable
{
    #region IXmlSerializable Members

    public System.Xml.Schema.XmlSchema GetSchema()
    {
        return null;
    }

    public void ReadXml(System.Xml.XmlReader reader)
    {
        XmlSerializer keySerializer = new XmlSerializer(typeof(TKey));
        XmlSerializer valueSerializer = new XmlSerializer(typeof(TValue));
        bool wasEmpty = reader.IsEmptyElement;

        reader.Read();

        if (wasEmpty)
            return;

        while (reader.NodeType != System.Xml.XmlNodeType.EndElement)
        {
            reader.ReadStartElement("item");
            reader.ReadStartElement("key");

            TKey key = (TKey)keySerializer.Deserialize(reader);

            reader.ReadEndElement();
            reader.ReadStartElement("value");

            TValue value = (TValue)valueSerializer.Deserialize(reader);
            reader.ReadEndElement();
            this.Add(key, value);
            reader.ReadEndElement();
            reader.MoveToContent();
        }

        reader.ReadEndElement();
    } 

    public void WriteXml(System.Xml.XmlWriter writer)
    {
        XmlSerializer keySerializer = new XmlSerializer(typeof(TKey));

        XmlSerializer valueSerializer = new XmlSerializer(typeof(TValue));

        foreach (TKey key in this.Keys)
        {
            writer.WriteStartElement("item");

            writer.WriteStartElement("key");
            keySerializer.Serialize(writer, key);
            writer.WriteEndElement();
            writer.WriteStartElement("value");
            TValue value = this[key];
            valueSerializer.Serialize(writer, value);
            writer.WriteEndElement();
            writer.WriteEndElement();
        }
    }
    #endregion
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T11:24:43.110

```
[Serializable]
public class ExerciseDTO {
...
} 
```

*   您还应该有一个默认（无参数）构造函数
*   如果您想自动序列化它，您还应该公开您的财产
*   .net 不支持 Dictionary<> 的序列化，但是有一些解决方法，例如[这篇文章](https://stackoverflow.com/questions/3671259/how-to-xml-serialize-a-dictionary)。

编辑：如下评论：它应该是“ **XmlSerializer**类不支持 Dictionary<> 的序列化”。

# c# - 根据另一个属性的值获取属性的描述

> ID：15717967
> 
> 赞同：1
> 
> 时间：2013-03-30T11:23:12.707
> 
> 标签：c#, reflection, attributes

请考虑以下代码：

```
[ShowFieldByRole(User1 = false, User2 = false, User3 = true)]
[FieldName(Name = "Desciption1")]
public string G_Sum{set; get;}

[ShowFieldByRole(User1 = false, User2 = false, User3 = false)]
[FieldName(Name = "Desciption2")]
public string G_Sum2{set; get;}

[ShowFieldByRole(User1 = false, User2 = false, User3 = true)]
[FieldName(Name = "Desciption3")]
public string G_Sum3{set; get;} 
```

我创建了两个自定义属性类，现在我想获取 具有反射属性的属性的所有描述（`Name`属性的`FieldName`属性值） 。`User3=true`

例如根据上面的代码我想得到`Description2,Descriptio3`因为它们`User3`等于`true`

我怎么能做到这一点？

谢谢

* * *

**编辑 1)**

我写了这段代码，它返回`Description2,Descriptio3`：

```
var My = typeof(ClassWithAttr).GetProperties(BindingFlags.Instance | BindingFlags.Public)
                          .Where(p => p.GetCustomAttributes(typeof(FieldName), true)
                          .Where(ca => ((ShowFieldByRole)ca).User3 == true)
                          .Any()).Select(p=>p.GetCustomAttributes(typeof(FieldName),true).Cast<FieldName>().FirstOrDefault().Name); 
```

现在我想返回`[PropertyName , Name]`当我以这种方式编写代码时：

```
 var My = typeof(ClassWithAttr).GetProperties(BindingFlags.Instance | BindingFlags.Public)
                          .Where(p => p.GetCustomAttributes(typeof(FieldName), true)
                          .Where(ca => ((ShowFieldByRole)ca).User3 == true)
                          .Any()).ToDictionary(f => f.Name, h=>h.GetValue(null).ToString()); 
```

但我收到了这个错误：

> 无法将 lambda 表达式转换为类型“System.Collections.Generic.IEqualityComparer”，因为它不是委托类型

哪里有问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T15:27:52.583

在你的最后一个例子中，`f`两者`h`都是`PropertyInfo`

您的案例的正确代码是

```
var dictionay = (from propertyInfo in typeof (ClassWithAttr).GetProperties(BindingFlags.Instance | BindingFlags.Public)
                 where propertyInfo.GetCustomAttributes(typeof (ShowFieldByRoleAttribute), true).Cast<ShowFieldByRoleAttribute>().Any(a => a.User3)
                 from FieldNameAttribute fieldName in propertyInfo.GetCustomAttributes(typeof (FieldNameAttribute), true)
                 select new { PropertyName = propertyInfo.Name, FiledName = fieldName.Name })
    .ToDictionary(x => x.PropertyName, x => x.FiledName); 
```

**使用方法链的**UPD****

 **```
var dictionay = typeof (ClassWithAttr).GetProperties(BindingFlags.Instance | BindingFlags.Public)
    .Where(p => p.GetCustomAttributes(typeof (ShowFieldByRoleAttribute), true).Cast<ShowFieldByRoleAttribute>().Any(a => a.User3))
    .SelectMany(p => p.GetCustomAttributes(typeof (FieldNameAttribute), true).Cast<FieldNameAttribute>(),
                (p, a) => new { PropertyName = p.Name, FiledName = a.Name })
    .ToDictionary(a => a.PropertyName, a => a.FiledName); 
```**

# javascript - Empty and non-clickable filling of SVG paths in SVG-edit

> ID：15717970
> 
> 赞同：1
> 
> 时间：2013-03-30T11:23:38.523
> 
> 标签：javascript, svg, jquery-svg, svg-edit

I am doing a modiciation of SVG-edit which is an online SVG-editor: [https://code.google.com/p/svg-edit/](https://code.google.com/p/svg-edit/)

I allow my users to draw shapes only with fillings set to "none".

However now i want when my users draw these shapes, to allow them to hover over the shapes and display some information about them. When the shapes are "behind" some other shapes, althought they are visible because the filling is set to none, they are unclickable because the filling of the top shape is practically there but its just invinsible.

Is there any way of making the shapes filling "click-transparent" apart from only visually transparent?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T12:08:23.957

Control over what parts of shapes react to mouse events is available via the [pointer-events](http://www.w3.org/TR/SVG/interact.html#PointerEventsProperty) property.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-20T17:39:01.243

Yes, there is a way:

In css add to your svg `pointer-events: none;` and to the polygons or paths inside set `pointer-events: fill`, this makes transparent the empty space, but not the filled shapes, I made an example in codepen:

[http://codepen.io/jesuscmd/pen/EyEyoP](http://codepen.io/jesuscmd/pen/EyEyoP)

# asp.net-web-api - Two Home Controllers Found

> ID：15717974
> 
> 赞同：1
> 
> 时间：2013-03-30T11:24:20.623
> 
> 标签：asp.net-web-api

I have this message when I run my Web Api code

```
Multiple types were found that match the controller named 'Home'. This can happen if the route that services this request ('{controller}/{action}/{id}') does not specify namespaces to search for a controller that matches the request. If this is the case, register this route by calling an overload of the 'MapRoute' method that takes a 'namespaces' parameter.

The request for 'Home' has found the following matching controllers:
A.Controllers.HomeController
N.Controllers.HomeController 
```

But I have only 1 Home controller. What is happening?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T11:36:09.473

You probably renamed your MVC project and the old DLL is still in the bin folder. Remember that ASP.NET MVC loads controllers from all assemblies present in the bin folder. You will have to look for all assemblies in your bin folder and make sure that you don't have the same controller twice.

In fact it is possible to use the same controller name twice in the same application. Let's suppose for example that you wanted to have a HomeController in your main part and a HomeController in some Area. When configuring the routes you could specify a namespace constraint to the namespace that will contain the controllers:

```
routes.MapRoute(
    name: "Default",
    url: "{controller}/{action}/{id}",
    defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional },
    namespaces: new[] { "MvcApplication1.Controllers" }
); 
```

and in your Area:

```
context.MapRoute(
    name: "Admin_default",
    url: "Admin/{controller}/{action}/{id}",
    defaults: new { action = "Index", id = UrlParameter.Optional },
    namespaces: new[] { "MvcApplication1.Areas.Admin.Controllers" }
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T11:39:04.957

Look under( Home ) name in edit-> find. and see if it's used in anyother webpages. also make sure the page doesn't inherit this control from any other pages.

# android - Android 我有异常 color.parsecolor 的错误

> ID：15717977
> 
> 赞同：1
> 
> 时间：2013-03-30T11:24:30.813
> 
> 标签：android, android-widget

我有一个 parsecolor 异常的问题，当我的值低于 20 时，应用程序崩溃，其余的都很好......你能告诉我为什么吗？

我的简单代码是：

公共类 ColoreTesto 扩展 Activity {

```
private SeekBar seekred, seekgreen, seekblu;
private TextView seekred_txt, seekgreen_txt, seekblu_txt;
private TextView esempio;
private int redtxt, greentxt, blutxt;
private int progressred, progressgreen, progressblu;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.coloretesto);

    /* RIFERIMENTO AL GRUPPO DI VARIABILI SHARED*/
    final SharedPreferences settings = getSharedPreferences("settings", 0);
    final SharedPreferences.Editor editor = settings.edit();

    esempio = (TextView)findViewById(R.id.txt_esempio);

    /****
     * SEEKBAR RED
     ****/
    seekred = (SeekBar) findViewById (R.id.seekRed);
    seekred.setMax(255);
    seekred_txt = (TextView)findViewById(R.id.textRed);
    /*CARICARE IL VALORE DELLA SEEKBAR*/
    redtxt = settings.getInt("redtxt", 255); /*UNA VARIABILE DEL GRUPPO*/
    seekred_txt.setText(redtxt + getString(R.string.red));
    seekred.setProgress(redtxt);
    // CAMBIAMENTO DEL VALORE DELLA SEEKBAR
    seekred.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {
        //spostamento
        public void onProgressChanged(SeekBar seekBar, int progress, boolean fromTouch) {
            seekred_txt.setText(progress + getString(R.string.red));
            esempio.setTextColor(Color.parseColor("#" + Integer.toHexString(progress)  +  Integer.toHexString(greentxt) + Integer.toHexString(blutxt)));
        }

        //inizio dello spostamento
        public void onStartTrackingTouch(SeekBar seekBar) {
        }

        //fine dello spostamento
        public void onStopTrackingTouch(SeekBar seekBar) {
            redtxt = seekBar.getProgress();

        }
    });

    /****
     * SEEKBAR GREEN
     ****/
    seekgreen = (SeekBar) findViewById (R.id.seekGreen);
    seekgreen.setMax(255);
    seekgreen_txt = (TextView)findViewById(R.id.textGreen);
    /*CARICARE IL VALORE DELLA SEEKBAR*/
    greentxt = settings.getInt("greentxt", 255); /*UNA VARIABILE DEL GRUPPO*/
    seekgreen_txt.setText(greentxt + getString(R.string.green));
    seekgreen.setProgress(greentxt);
    // CAMBIAMENTO DEL VALORE DELLA SEEKBAR
    seekgreen.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {
        //spostamento
        public void onProgressChanged(SeekBar seekBar, int progress, boolean fromTouch) {
            seekgreen_txt.setText(progress + getString(R.string.green));
            esempio.setTextColor(Color.parseColor("#" + Integer.toHexString(redtxt) + Integer.toHexString(progress) + Integer.toHexString(blutxt)));
        }

        //inizio dello spostamento
        public void onStartTrackingTouch(SeekBar seekBar) {
        }

        //fine dello spostamento
        public void onStopTrackingTouch(SeekBar seekBar) {
            greentxt = seekBar.getProgress();               
        }
    });

    /****
     * SEEKBAR BLU
     ****/
    seekblu = (SeekBar) findViewById (R.id.seekBlu);
    seekblu.setMax(255);
    seekblu_txt = (TextView)findViewById(R.id.textBlu);
    /*CARICARE IL VALORE DELLA SEEKBAR*/
    blutxt = settings.getInt("blutxt", 255); /*UNA VARIABILE DEL GRUPPO*/
    seekblu_txt.setText(blutxt + getString(R.string.blu));
    seekblu.setProgress(blutxt);
    // CAMBIAMENTO DEL VALORE DELLA SEEKBAR
    seekblu.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {
        //spostamento
        public void onProgressChanged(SeekBar seekBar, int progress, boolean fromTouch) {
            seekblu_txt.setText(progress + getString(R.string.blu));
            esempio.setTextColor(Color.parseColor("#" + Integer.toHexString(redtxt) + Integer.toHexString(greentxt) + Integer.toHexString(progress)));
        }

        //inizio dello spostamento
        public void onStartTrackingTouch(SeekBar seekBar) {
        }

        //fine dello spostamento
        public void onStopTrackingTouch(SeekBar seekBar) {
            blutxt = seekBar.getProgress();             
        }
    });
} 
```

}

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T11:34:28.537

那是因为您尝试分配 RGB 格式而不是十六进制，请尝试以下代码：

```
 Color mColor = new Color();
  mColor.red(redvalue);
  mColor.green(greenvalue);
  mColor.blue(bluevalue);
  esempio.setTextColor(mColor); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-30T11:35:57.193

可能是因为如果你往下走 16（不包括在内），颜色的十六进制代码可以用一位数表示。

因此，如果您尝试：

Integer.toHexString(15) --> 输出 = "F"。一位数 --> 错误

Integer.toHexString(16) --> 输出 = "10"。两位数 --> 很好

# php - PHP 中的对象扩展和对象新建

> ID：15717979
> 
> 赞同：0
> 
> 时间：2013-03-30T11:24:38.187
> 
> 标签：php

我创建了一个 HTML 元素构造函数

```
class ElementConstructor{
protected $properties=array();
function __construct($properties = array(),$tag=''){
        if($tag!=''){
            $this->element = $tag;
        }
        if(sizeof($this->properties)>0){
            $this->properties = array_merge($this->properties,$properties);
        }else{
            $this->properties = $properties;
        }
    }
function init(){        
        $this->setAttr();
    }
    function setAttr($attr = NULL){
        foreach($this->properties as $name=>$value){
            if($name != 'display')
                $this->doc[$this->element]->attr($name,$value);
        }
    }
} 
```

和用途是创建一些基本类包括 Div

```
class BasicDiv extends ElementConstructor{
    protected $element = 'div';
} 
```

之后，我需要使用它

```
class BasicWrapper extends BasicDiv{
        //one (1)
    protected $properties = array(
        'class'=>'row-fluid sortable ui-sortable',
        'id'=>'wrapper'
    );
        ....
        function __construct($config=array(),$properties = array()){
        parent::__construct($properties);
            //(2), the properties replaced by (1)
        $secondLevelWrapper = new BasicDiv(array('id'=>'second_level','class'=>'box span12'));
        $secondLevelWrapper->init();
    }
} 
```

但是，输出显示有两个 DIV 显示，我预计会是 (1): id:wrapper, class:row-fluid sortable ui-sortable 和 (2) id:second_level,class:box span12，但是两个 (1 ） 反而。当我删除 id:wrapper 时，第二个的 id 变得正确。很明显，(1) 中的 $properties 替换了 (2) 中的 $properties。但是我已经用new新建了一个BasicDiv对象，那（1）和（2）不是相互独立的吗？

# oauth - 黑莓应用程序开发中的 Http 401 和 Http 500

> ID：15717988
> 
> 赞同：0
> 
> 时间：2013-03-30T11:25:10.567
> 
> 标签：oauth, blackberry, http-headers, http-status-code-401

我正在使用 Oauth Webservice 开发一个黑莓应用程序。当我发送 GET 请求时，虽然我正确发送了授权标头，但我首先获得了 HTTP 401 状态代码。当我再次调用相同的 Web 服务时，它给出了 HTTP 500 错误。我很困惑，要跟踪错误，无论是来自客户端还是服务器错误。我也在运行 MDS 模拟器。请帮助我解决这个问题。

这是我的代码片段：

```
private HttpConnection HttpRequestCreate(boolean post) throws IOException,MalformedURIException,PINException, net.rim.device.api.crypto.InvalidKeyException,UnsupportedEncodingException,net.rim.device.api.crypto.NoSuchAlgorithmException ,IllegalStateException,NullPointerException,IllegalArgumentException, CryptoTokenException, CryptoUnsupportedOperationException
{
String Authhdr=null;    

uthScheme authScheme = new AuthScheme.Builder(HTTPVerb,URI,Date,Keys)
.setContentMD5(ContentMD5)
.setContentType(ContentType)
.build();

Authhdr = authScheme.getAuthorizedHeader();

if(Authhdr ==null)
    throw new NullPointerException("Authorization header cannot be null.Please check whether authorization header is properly generated or not.");              
HttpConnection ConnectionHandle = null; 
ConnectionHandle=(javax.microedition.io.HttpConnection)
Connector.open(URI, Connector.READ_WRITE, true);
ConnectionHandle.setRequestMethod(HTTPVerb);
ConnectionHandle.setRequestProperty("Date",Date);
ConnectionHandle.setRequestProperty("Host",Host);
ConnectionHandle.setRequestProperty("Authorization", Authhdr);
if(ContentLength!=null)
    ConnectionHandle.setRequestProperty("Content-Length",ContentLength);

if(ContentMD5!=null)
    ConnectionHandle.setRequestProperty("Content-MD5",ContentMD5);   

if(ContentType!=null)
    ConnectionHandle.setRequestProperty("Content-Type",ContentType);        

return ConnectionHandle;                            
} 
```

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-28T08:04:01.293

这可以帮助您 [在黑莓设备上出现 401 错误，](https://stackoverflow.com/questions/13297154/401-error-on-blackberry-device) 或者可能存在 TLS 1.2 问题。因为显然 bb 在非 TLS 1.0 连接方面存在一些问题

# sockets - D语言Socket.receive()

> ID：15717989
> 
> 赞同：3
> 
> 时间：2013-03-30T11:25:13.283
> 
> 标签：sockets, d

我在 Windows 上使用 D 编写了一个套接字服务器，现在我想将它移植到 Linux 上。这是代码摘要：

```
/*
 * this.rawsocks - SocketSet
 * this.server - Socket
 * this.clients - array of custom client worker class
 */

char[1] buff;
string input;
int nbuff = 0;

while (this.isrun) {
    this.rawsocks.add(this.server);

    if (Socket.select(this.rawsocks, null, null)) {
        if (this.rawsocks.isSet(this.server)) {
            // accepting a new connection
        }

        foreach (ref key, item; this.clients) {
            // works for all connections
            writeln("test1");

            // mystically interrupts foreach loop
            nbuff = item.connection.receive(buff);

            // works only for the first connection.
            // when the first connection is closed, it works for the next
            writeln("test2");
        }
    }

    this.rawsocks.reset();

    foreach (key, value; this.clients)
        this.rawsocks.add(value.connection);
} 
```

`item.connection.receive(buff)`在 Windows 上工作正常，但在 Linux 上会中断 foreach 循环。没有任何例外，并且`test2`当第一个客户端断开连接时，下一个客户端正在触发。

Linux中的方法是否有一些特殊行为`.receive()`，或者我的实现中有一些问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T19:59:24.810

这个问题的解决方法和问题本身一样奇怪:)

```
foreach (ref key, item; this.clients) {
     /*
      * The solution
      * Check of client's socket activity in SocketSet queue may not be necessary in Windows, but it is necessary in Linux
      * Thanks to my friend's research of this problem
      */
     if (!this.rawsocks.isSet(item.connection)) continue;

     // works for all connections
     writeln("test1");

     // after modifying not interrupts foreach loop
     nbuff = item.connection.receive(buff);

     // after modifying also works for all connections
     writeln("test2");
} 
```

# ios - 任何人都可以帮助修复这个 DDMathParser 新功能吗？

> ID：15717995
> 
> 赞同：1
> 
> 时间：2013-03-30T11:25:41.733
> 
> 标签：ios, objective-c, ddmathparser

我正在注册一个求和函数，即`sum(expression,initial,final)`. 包含自`expression`变量`x`，`initial`和`final`是整数。例如，`sum(2x,2,4)`应该返回 2*2+3*2+4*2= `18`。但是，我在替换和之间`x`的`expression`每个值时遇到了麻烦。这是我的代码，它不起作用。谁能告诉我如何解决它？`initial``final`

```
//sum(expr (dependent on x),initial,final)
[evaluator registerFunction:^DDExpression *(NSArray *args, NSDictionary *vars, DDMathEvaluator *eval, NSError *__autoreleasing *error) {
    DDExpression *final = nil;
    if([args count] == 3){
        DDExpression *expr = [args objectAtIndex:0];
        DDExpression *start = [args objectAtIndex:1];
        DDExpression *end = [args objectAtIndex:2];
        //test whether start and end are integers
        double startDouble = [[start evaluateWithSubstitutions:nil evaluator:evaluator error:nil] doubleValue];
        double endDouble = [[end evaluateWithSubstitutions:nil evaluator:evaluator error:nil] doubleValue];
        int startInt = (int)startDouble;
        int endInt = (int)endDouble;
        if (((startDouble-startInt)>0.9999 || (startDouble-startInt)<0.0001) && ((endDouble-endInt)>0.9999 || (endDouble-endInt)<0.0001)) {
            //start and end are integers
            double resultSum = 0;
            for (int i=startInt; i<=endInt; i++) {
                NSNumber *xValue = [NSNumber numberWithInt:i];
                NSDictionary *substitution = [NSDictionary dictionaryWithObjectsAndKeys:xValue,@"x", nil];
                NSNumber *valueOfExpr = [expr evaluateWithSubstitutions:substitution evaluator:evaluator error:nil];
                resultSum = resultSum + [valueOfExpr doubleValue];
            }
            final = [DDExpression numberExpressionWithNumber:[NSNumber numberWithDouble:resultSum]];
        }
    }
    return final;
}forName:@"sum"]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T23:44:49.860

DDMathParser 作者在这里。

有两件事情是错误的，一件事情是次优的。

1.  错误 - 您不能将此函数称为“sum”。 [“sum”是一个内置函数](https://github.com/davedelong/DDMathParser/wiki/Built-in-Functions)，[内置函数不能被覆盖](https://github.com/davedelong/DDMathParser/wiki/Adding-New-Functions)。
2.  错误 - 您的函数的第一个参数是：`"2x"`. 这很好，除了它`x`被解释为一个*function*，但在你的 for 循环中你把`x`它当作一个变量来对待。您要么需要从根本上改变函数的工作方式，要么使用表单`2 * $x`（或仅`2$x`）作为函数的第一个参数。
3.  次优 - 而不是得到`doubleValue`评估的参数，而是得到`integerValue`而不是避免整个双整数转换。

下面是我如何清理你的函数（尽管你可能应该在填写`error`out 参数的方式上做更多的事情）：

```
[evaluator registerFunction:^DDExpression *(NSArray *args, NSDictionary *vars, DDMathEvaluator *eval, NSError *__autoreleasing *error) {
    DDExpression *final = nil;
    if ([args count] == 3) {
        DDExpression *expr = [args objectAtIndex:0];
        DDExpression *start = [args objectAtIndex:1];
        DDExpression *end = [args objectAtIndex:2];
        //get the start and end values
        NSInteger startValue = [[eval evaluateExpression:start withSubstitutions:vars error:error] integerValue];
        NSInteger endValue = [[eval evaluateExpression:end withSubstitutions:vars error:error] integerValue];

        double sum = 0;
        for (NSInteger i = startValue; i <= endValue; i++) {
            NSDictionary *substitution = @{@"x": @(i)};
            NSNumber *value = [eval evaluateExpression:expr withSubstitutions:substitution error:error];
            sum += [value doubleValue];
        }
        final = [DDExpression numberExpressionWithNumber:@(sum)];
    }
    return final;
} forName:@"sum2"]; 
```

有了这个，你可以做`sum2(2*$x, 2, 4)`，它会评估为 18。

# python - 如何在 PySide 中以 self 作为参数发出信号？

> ID：15717997
> 
> 赞同：1
> 
> 时间：2013-03-30T11:26:00.023
> 
> 标签：python, qt, pyside

在 PySide 中，我想用将信号定义为参数的类发出一个信号。例如：

```
class MyWidget(QtGui.QWidget):

    signal_widget_closed = QtCore.Signal(MyWidget)

    def close(self):
        super(MyWidget, self).close()
        self.signal_widget_closed.emit(self) 
```

但是，第二行给出了 NameError，因为此时 MyWidget 尚不存在。现在我通过发出这样的 QWidget 来解决这个问题

```
 signal_widget_closed = QtCore.Signal(QtGui.QWidget) 
```

但我更喜欢使用 MyWidget 作为类型的解决方案。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-16T19:47:34.083

可以在类定义*之后*定义一个信号。

您的代码如下所示：

```
class MyWidget(QtGui.QWidget):
    def close(self):
        super(MyWidget, self).close()
        self.signal_widget_closed.emit(self)
MyWidget.signal_widget_closed = QtCore.Signal(MyWidget) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T11:30:10.403

你只是不需要这个参数。
在插槽内使用[**QObject::sender**](http://qt-project.org/doc/qt-4.8/qobject.html#sender)找出发出信号的对象。