# StackOverflow 问答 13915000-13915999

# matlab - 弧形/拱形模拟，Matlab（概念）

> ID：13915007
> 
> 赞同：0
> 
> 时间：2012-12-17T13:21:48.420
> 
> 标签：matlab, geometry

请看附图![在此处输入图像描述](../Images/13a3ad1597268ee0b3e2ed82c889ed8e.png)

在图像中，可以看到两条弧线（蓝色和绿色）和连接它们的红线。这给了我们表面（我认为它的圆拱，但如果它是错误的，请纠正我）。

我的问题是如何模拟这种结构。

1-我怎样才能拥有这种结构的函数 f(x,y,z)

2-如何获得线（拱面）交点

3分就可以了？

*简而言之，我想从给定的立场/观点获得这个结构上的点 (x,y,z)。例如，P=[19,-62,-1.2]*

![在此处输入图像描述](../Images/a71656962523686ecf038cc90bd76aef.png)

Matlab 代码会更有帮助。

**更多信息：**

第一条曲线上的点

```
p2 = [17.9463,-59.7586,-1.0200]; % start [x,y,z]
p0 = [19.1163,-58.5886,-1.0200]; % center
p1 = [20.2863,-59.7586,-1.0200]; % End 
```

第二条曲线上的点

```
p4 = [17.9463,-59.7586,-1.78]; 
p0_ = [19.1163,-58.5886,-1.78]; 
p3 = [20.2863,-59.7586,-1.78]; 
```

半径：r=1.17；

任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T14:41:46.143

从曲线图中获得精确的函数是一项有点不精确的任务。但是，如果您做出假设和近似，您仍然可以做出很好的近似。

让我们假设这是一个半圆柱形。圆形横截面位于 xz 平面内，这意味着 3-D 曲线为：

> F(x, y, z) = ( *x* - *x* [0] ) ² + ( *z* - *z* [0] ) ² = *r* ²

其中*x* [0]和*z* [0]是中心坐标，*r*是半径。

我假设绘图中的左轴是 y 轴，z 轴在右侧。据我所知，它们的近似值为：

> *x* [0] ≈ 19.1
> *z* [0] ≈ -59.6
> *r* ≈ 1.2
> *y*似乎在 -1 和 -1.7 之间变化

您可以使用[`meshgrid`](http://www.mathworks.com/help/matlab/ref/meshgrid.html)和[`surf`](http://www.mathworks.com/help/matlab/ref/surf.html)轻松生成 3-D 图：

```
r = 1.2;
x0 = 19.1;
z0 = -59.6;
[X, Y] = meshgrid(17.9:0.05:20.3, -1.7:0.05:-1);
Z = z0 + abs(sqrt(r ^ 2 - (X - x0) .^ 2));
surf(X, Y, Z) 
```

注意两点：

1.  我在 x 轴和 y 轴上都将分辨率设置为 0.05。
2.  我已经应用`abs`了结果`sqrt`来消除任何不需要的复杂结果。

结果应该是这样的：

![在此处输入图像描述](../Images/acc760b6d21806cbfde457ff3d4ddb59.png)

# ms-access - MS-Access 2003 报告页面分组

> ID：13915015
> 
> 赞同：0
> 
> 时间：2012-12-17T13:22:25.433
> 
> 标签：ms-access, reporting

我有一份报告说我在为我的输出分组时遇到问题。

`"Sorting and Grouping"`参数设置为`"Name" and "Ascending"`

```
Group Header :Yes
Group Footer :No
Group On :Each Value
Group Interval :1
Keep together :No 
```

报告设置

```
Page Header
Images, Label, Date
Detail
TextBox: Name
TextBox: UserID
Four SubReports Linked to the Name TextBox
Page Footer: Pg Nbr 
```

我想分组`Name per page`。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T13:40:35.717

向组添加页脚和..

```
 Force New Page: After Section 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T13:33:18.440

你不想`GROUP BY :NAME`和`SORT :ASCENDING`？假设您有查询返回的数据来填充报告。

根据这篇[Access 2003 MSDN 文章](http://office.microsoft.com/en-us/access-help/keep-a-group-of-records-together-on-a-report-page-HP005187363.aspx)，

***要指定组在页面上的打印方式，***

您可以使用“排序和分组”窗口中的 KeepTogether 属性来控制如何在报表中打印组的元素。组由组标题、嵌套组（如果有）、详细记录和组页脚组成。

*   在设计视图中打开报表。

*   单击工具栏上的排序和分组按钮图像，或在视图菜单上，单击排序和分组以显示排序和分组窗口。

*   在“排序和分组”窗口中，单击要保持在一起的组级别的字段或表达式。

**设置 Keep Together 属性：**

*   选择“否”打印时不考虑在多页上打印组时出现分页符的位置。

*   选择**整个组以在同一页上打印整个组。**

*   选择带有第一个详细信息以通过同一页面上的第一个详细记录至少打印组标题。

*   在编辑菜单上，单击选择报告。在视图菜单上，单击属性。**将 GrpKeepTogether 属性设置为每页。**

    ***注意当您将 Keep Together 属性设置为 Whole Group 或 With First Detail 时，组的大小（或包含通过第一个详细信息记录的组标题的组部分）决定 Access 如何打印报表。如果整个组或第一个详细记录的标题太大而无法容纳在当前正在打印的页面上，Access 会前进到新页面，然后开始打印报表。***

因此，您可能需要更改`Keep together`财产。

# wpf - WPF Caliburn.Micro DataGrid 列

> ID：13915017
> 
> 赞同：1
> 
> 时间：2012-12-17T13:22:32.833
> 
> 标签：wpf, datagrid, caliburn.micro

我有一个 WPF Caliburn.Micro 应用程序，其中有一个带有 DataGrid 的选项卡控件。DataGrid 中的列以编程方式设置。我可能需要关闭一个选项卡，然后再次打开它。我得到一个例外，说 DataGrid 中已经存在一个列，尽管实际上根本没有列。你能帮我解决这个问题吗？

在图片上，您可以在 Watch 窗口中看到 myGrid.Columns.Count 等于 0

![在这里，您可以在 Watch 窗口中看到 myGrid.Columns.Count 等于 0](../Images/2aafb4ba4fe3e58b51a699ba8b952459.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T14:04:53.907

看起来您可能正在将已经存在的列（在以前的数据网格中）添加到另一个数据网格。该错误表明该列存在于数据网格的**集合**`Columns`中，而不一定是您尝试将其添加到的列

 **`DataGrid`无法共享列 - 您需要从以前的数据网格中删除该列。这可能意味着您在某处也有内存泄漏。如果您的选项卡项 VM 继承`Screen`，您可能需要覆盖`OnDeactivate`并清除列

或者，您可以通过列获取对父网格的引用并将其从其父网格中删除，尽管我自己没有使用标准的 .NET `DataGrid`（只使用 Teleriks 之一）所以我不能确定 - 就个人而言不过，关闭时的清除似乎是一个更清洁的实现。

在一个死实例之后清理不应该是类的新实例的责任，而应该是类自己清理的责任（我一直告诉我的孩子们这个！）**

# iphone - SQLite 表名无效字符

> ID：13915019
> 
> 赞同：0
> 
> 时间：2012-12-17T13:22:48.810
> 
> 标签：iphone, ios, ipad, sqlite

我想为SQLite 中的表命名“ [http://192.168.1.2/abc/xyz_values ”。](http://192.168.1.2/abc/xyz_values)

我正在动态创建表格。我怎样才能做到这一点，因为 SQLite 不允许我创建一个具有此名称的表？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T13:42:29.200

`[http://192.168.1.2/abc/xyz_values]`创建表格时使用方括号

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T13:41:03.240

为您的表选择一个不同的名称。这不可能。

为什么名字必须是这样的？听上去有点难听...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T10:58:15.227

有三种方法可以创建带有特殊字符的标识符：双引号、反引号和方括号。

双引号是标准 SQL，而反引号和方括号仅支持与 MySQL 和 SQL Server 兼容，因此建议使用前者：

```
CREATE TABLE "http://192.168.1.2/abc/xyz_values"(...) 
```

标识符内部出现的双引号和反引号可以通过加倍来转义；这在右方括号中是不可能的：

```
CREATE TABLE """"(...)    -- table name is one double quote 
```

# backbone.js - 取决于用户角色的动态 html 内容

> ID：13915022
> 
> 赞同：0
> 
> 时间：2012-12-17T13:22:52.477
> 
> 标签：backbone.js, knockout.js, javascript-framework, singlepage

我正在开发单页应用程序样式的 Web 应用程序。我想根据用户的角色创建菜单，例如，对于管理员用户我想显示管理员菜单和 html 内容，对于一般用户我想显示不同的 html 内容。我正在使用带有 Razor 视图引擎的 asp.net mvc，所以这可以通过 Razor 代码实现，如下所示：

```
@if (@User.IsInRole("Admin"){
  -- html content for admin --
}else if (@User.IsInRole("General"){
  -- html content for general user --
}else{
  -- html content for the other users --
} 
```

这是我过去以传统方式开发Web应用程序时的典型方式，但是自从我开始开发单页应用程序样式的Web应用程序以来，我尝试编写纯html代码并避免使用Razor，WebForm等服务器端视图引擎asp.net 或 Velocity，Java EE 中的 Jsp 标记库。我想写更独立的前端代码，不依赖服务器代码。

无论如何，当我使用javascript和knockoutjs而不是Razor时，上面的代码可以更改如下，

```
<!-- ko if: isAdmin -->
-- html content for admin --
<!-- /ko -->
<!-- ko if: isGeneralUser -->
-- html content for general user --
<!-- /ko -->
<!-- ko if: isOtherUser -->
-- html content for the other users --
<!-- /ko --> 
```

isAdmin、isGeneralUser 和 isOtherUser 是 viewmodel 的属性，这些值将通过检查用户角色的 ajax 调用设置。

我想知道的是，从安全的角度来看，这种根据用户角色控制内容的方式是否合适？

如果这些视图因用户角色而异，您如何处理视图内容？想问问大家遇到这种情况是怎么处理的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T13:55:30.350

我会使用模板绑定

```
<div data-bind="template: { name: template, data: model }"></div> 
```

在视图模型上根据用户角色设置正确的模板和模型，此外，您仍然需要保护角色特定的方法服务器端

补充一点，我已经为约定绑定模板做了一个小框架，它非常适合这样的场景，它还没有完成，所以我会等待在生产站点中使用它，但它将在未来几周内准备好

上面的模板绑定与我的框架看起来像

```
<div data-bind="coc: model"></div> 
```

如果 ViewModel 被命名为 AdminViewModel，那么我的库将寻找一个名为 AdminView 的模板

一个小小提琴[http://jsfiddle.net/2Uvd5/1/](http://jsfiddle.net/2Uvd5/1/)

**编辑：关于你想要做什么的更准确的例子** [http://jsfiddle.net/XaZxj/](http://jsfiddle.net/XaZxj/)

# android - Android：位图解码 java.lang.OutofMemoryError 错误

> ID：13915028
> 
> 赞同：1
> 
> 时间：2012-12-17T13:23:22.163
> 
> 标签：android, bitmap, out-of-memory, bitmapfactory

我当前的 android 应用程序的主要功能是使用内置摄像头从录制的视频中提取帧 (10fps)。每当用户选择视频时，我都会调用我的类“FrameCollector”，它会循环播放视频并将帧拉出并将它们存储到位图的 ArrayList 中。让这项工作好几天让我认为我在正确的轨道上，但现在我得到了可怕的“java.lang.OutofMemoryError”

我的代码如下：

这里将 MediaMetaDataRetriever 设置为从主类传递的视频路径中选择每秒 10 帧

```
public class FrameCollector {

MediaMetadataRetriever _mmr;

double _fps;
double _duration;
long _counter = 0;
long _incrementer;

public FrameCollector(String path, Context context) 
{
    try
    {
    _mmr = new MediaMetadataRetriever();
    _mmr.setDataSource(path);

    SharedPreferences pref = PreferenceManager.getDefaultSharedPreferences(context);
    String fpsString = pref.getString("prefFPS", "10");
    _fps = Double.parseDouble(fpsString);
    _incrementer = (long) (1000000 / _fps);

    String stringDuration = _mmr.extractMetadata(MediaMetadataRetriever.METADATA_KEY_DURATION);
    _duration = Double.parseDouble(stringDuration) * 1000;
    }
    catch(Exception ex)
    {
        ex.printStackTrace();
    }
} 
```

然后下面的方法是将当时的帧添加到位图并将位图添加到位图“bitFrames”的arraylist

```
public ArrayList<Bitmap> getBitmaps() 
{
    try 
    {
        ArrayList<Bitmap> bitFrames = new ArrayList<Bitmap>();

        Bitmap b = _mmr.getFrameAtTime(_counter);

        while (_counter < _duration && b != null) 
        {
            bitFrames.add(b);
            _counter += _incrementer;
            b = _mmr.getFrameAtTime(_counter);
        }
        return bitFrames;   
    }
    catch (Exception ex) 
    {
        ex.printStackTrace();
        return null;
    }
} 
```

我认为我的问题在于这种方法。我相信我需要在将位图存储到 ArrayList 之前对其进行解码，但我不确定如何作为

```
Bitmap b = BitmapFactory.decode____(_mmr.getFrameAtTime(_counter)); 
-- Whether it be decodeStream, decodeResource, decodeFile all bring errors. 
```

任何帮助将非常感激

非常感谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T13:31:33.800

将位图的 ArrayList 存储在 RAM 中并不好。

无论如何，如果您需要超过默认堆大小来在 ArrayList 中存储位图，您可以尝试这个 hack。 [http://habrahabr.ru/post/139717/](http://habrahabr.ru/post/139717/) 它是俄语的，但我想代码很清楚易懂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T13:30:09.240

除非位图的数量非常少，否则切勿将位图存储在 ArrayList 中。位图占用大量内存。

我以前没有使用过视频录制，但我建议你尝试使用像[ffmpeg](https://github.com/tito/ffmpeg-android)这样的原生编解码器库来为你做这件事。

但是，如果您必须自己抓取帧，我建议将它们存储在相机内存中固定大小的缓冲区中，并有一个后台线程从缓冲区中提取位图并将其并行存储到磁盘中。

# javascript - display = 'none' 在 Mozilla 中有效，但在 Chrome 中无效

> ID：13915031
> 
> 赞同：0
> 
> 时间：2012-12-17T13:23:33.053
> 
> 标签：javascript

> **可能重复：**
> [在 <option> 中应用的 style=“display:none” 在 IE 中不起作用，但在 Mozilla 中起作用](https://stackoverflow.com/questions/5187300/applied-style-displaynone-in-option-not-working-in-ie-but-working-mozilla)

我有一个应该在列表中搜索并只显示结果并隐藏其他结果的 JS，由于某种原因，我的代码只能在 Mozilla 中运行，有什么想法可以让它在 Chrome 和 IE 中运行吗？

这是代码：

```
<script type="text/javascript">
                    function searchit1() {
                        arrayAdmins = document.getElementById
                        var keyword = document.getElementById('searchbar1').value;
                        var xx = document.getElementById('allUsers');
                        var xy = document.getElementById('selectedUsers');
                        var selectedAdmins = [];
                        i = 0;
                        for (var i = 0; i < xx.length; i++) {
                            if (xx.getElementsByTagName('option')[i].innerHTML.toLowerCase().indexOf(keyword.toLowerCase()) == 0) {
                                xx.getElementsByTagName('option')[i].style.display = 'block';

                            }
                            else {
                                xx.getElementsByTagName('option')[i].style.display = 'none';

                            }
                        }
                        var j = xy.length;
                        for (var i = 0; i < xy.length; i++) {
                            if (xy.getElementsByTagName('option')[i].innerHTML.toLowerCase().indexOf(keyword.toLowerCase()) == 0) {
                                xy.getElementsByTagName('option')[i].style.display = 'block';

                            }
                            else {
                                xy.getElementsByTagName('option')[i].style.display = 'none';

                            }
                        }
                    }

                </script> 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T13:29:18.813

表单控件的样式在浏览器和操作系统之间并不一致。Firefox 将允许您`<option>`通过操作属性来显示/隐藏元素`display`，但 Chrome 不会。我不确定IE。

最安全的方法是在某处拥有完整的选项列表（值或对象的数组），并`<select>`根据该列表根据需要添加/删除元素。

# security - 即使有开发人员访问，数据加密也很安全

> ID：13915032
> 
> 赞同：0
> 
> 时间：2012-12-17T13:23:33.403
> 
> 标签：security, encryption, cloud

假设您有一个服务器-客户端应用程序。

服务器保存属于客户端的敏感信息。服务器会在客户端的敏感信息中搜索一些参数。因此，服务器应暂时使用客户端控制对敏感信息进行解码。但是服务器不应该通过自行破解密钥来泄露密钥。我的意思是开发人员不应该尝试更改服务器 sidde 代码，也不应该提取客户端密钥。

真的有办法吗？客户端允许服务器解码敏感信息，但密钥立即消失，开发人员没有任何技巧可以泄露此密码？

答案如果存在，也适用于理想的安全云应用程序。开发人员或云托管公司不应访问解密信息。

我并不乐观，但值得一试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T17:27:14.930

所以一句话不。这不会授予任何安全性，因为您不能信任客户端。你甚至说服务器会暂时由客户端控制，这通常不是一个明智的做法。另外，不要小看无聊的开发人员，编写一些代码并破解密钥是完全可行的。这里的关键是记住，如果有人可以访问这个盒子，它就不再是你的盒子了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T19:42:37.970

通常，任何客户端访问服务器上的敏感信息都必须要求对客户端进行身份验证，以便您可以验证客户端是否正是他声称的那个人。认证通常涉及发送密码或某种认证令牌（例如，加密的共享秘密），服务器通过安全通道将其提供给客户端。

正如已经多次说过的那样，在很多方面，允许客户端在没有适当和充分身份验证的情况下访问服务器数据意味着您放弃了对服务器的控制。

# spring - 是否可以在非 Spring-MVC 应用程序中使用 spring 消息标签？

> ID：13915033
> 
> 赞同：1
> 
> 时间：2012-12-17T13:23:37.500
> 
> 标签：spring, spring-mvc, struts2, struts

我有一个`Struts`2 应用程序，我目前正在使用`Spring Securit`y 和`Spring DI`，但我的 MVC 框架是 Struts2。我想知道我是否可以`spring form tag`在 JSP 中使用 s 。`Spring internationalizatio`我的基本要求是在 JSP 级别使用n 个特性。

# android - 奇怪的行为异步任务

> ID：13915034
> 
> 赞同：0
> 
> 时间：2012-12-17T13:23:42.843
> 
> 标签：android, android-asynctask, apk, progressdialog

我有一个名为 Download 的类，它扩展了 AsyncTask。OnPreExecute 方法执行以下操作：

```
 @Override
protected void onPreExecute() {
    // TODO Auto-generated method stub
    super.onPreExecute();   
    this.dialog.setTitle("Check updates...");

    this.dialog.show();

} 
```

列出的对话框在类的构造函数中实例化，并具有以下特征：

```
 dialog = new ProgressDialog(activity);
 dialog.setCancelable(false); 
```

在 doInBackground 方法中，我将执行大量网络操作，并且每次能够从所需的 url 下载图像时，我都会调用 progress update 方法：

```
 protected void onProgressUpdate(String... values) 
 // TODO Auto-generated method stub
  super.onProgressUpdate(values);

    //call the onprogress update
    publishProgress("1000");

    //do a lot of stuff with the network

 } 
```

在 onprogressupdate 中，我将关闭创建的第一个对话框，然后显示另一个：

```
 protected void onProgressUpdate(String... values) {
        // TODO Auto-generated method stub
        super.onProgressUpdate(values);

        if(values[0].equals("1000")){

            dialog.dismiss();

                  progress_brand.show();

            progress_brand.setProgress(progress_brand.getProgress()+1);

            if(progress_brand.getProgress() == progress_brand.getMax()){

                progress_brand.dismiss();

            }

        } 
 } 
```

所以基本上：在异步任务开始时，我会显示一个标题为“检查更新”的对话框......然后我将在 doinbackground 方法中搜索这些更新，如果我能找到一些，我将使用发布进度以关闭“旧对话框”并使用 ProgressDialog.STYLE_HORIZONTAL 创建一个新对话框。每次我从网上下载一些东西时，最后一个对话框都会更新。

所以这就是问题所在。如果我使用 eclipse 运行应用程序，然后在下载期间暂停应用程序，一切正常。如果我第二次重新进入应用程序，我可以看到下载继续完美，我可以看到第二个进度条继续按预期自我更新。

但是，如果我制作了一个签名的 apk --> 通过该 apk 安装应用程序 --> 启动应用程序 --> 在下载过程中暂停 --> 重新输入应用程序，然后再次显示第一个对话框并且下载无法正常进行。我从 logcat 中看到，如果我从 eclipse 运行应用程序，onpreexecute 方法只会调用一次，即使我会退出并重新进入应用程序。但是，如果我将通过 apk 安装应用程序，则每次我退出然后重新启动应用程序时都会调用 onpreexecute 方法。

为什么会这样？我已经尝试清理项目和其他基本操作，以查看问题是否是该 apk 的创建，但没有结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T13:34:40.717

不，您不要在 AnyTask 中使用 ProgressDialog

试试这个（例如）

```
public class Updated extends Activity {
    /**
     * ProgressDialog which is shown
     */
    private ProgressDialog progessDialog_g;
    private boolean downloadUses = false;

    /**
     * Instance of the BroadcastReceiver
     */
    private BroadcastReceiver receiver_g;
    private IntentFilter iFilter;
    protected ServiceConnection mServerConn = new ServiceConnection() {
        public void onServiceConnected(ComponentName name, IBinder binder) {

        }

        public void onServiceDisconnected(ComponentName name) {

        }

    };
    private Intent sI;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.progress);

        progessDialog_g = new ProgressDialog(this);

        // Reads and sets the settings for the ProgressDialog

        // Create the IntentFilter for the different broadcast messages
        iFilter = new IntentFilter(
                ProgressService.PROGRESS_DIALOG_BROADCAST_FINISH);
        // Creates the BroadcastReceiver
        receiver_g = new BroadcastReceiver() {
            @Override
            public void onReceive(Context context, Intent intent) {

                if (ProgressService.PROGRESS_DIALOG_BROADCAST_FINISH
                        .equals(intent.getAction())) {
                    // Finishs the ProgressDialog
                    progessDialog_g.cancel();
                    Finish();

                }
            }
        };

    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
    }

    @Override
    protected void onResume() {

        sI = new Intent(this, ProgressService.class);
        this.bindService(sI, mServerConn, Context.BIND_AUTO_CREATE);
        this.startService(sI);
        // Registers the BroadcastReceiver
        registerReceiver(receiver_g, iFilter);
        if (downloadUses) {
            downloadUses = false;
            Intent intent = new Intent(Intent.ACTION_MAIN);
            intent.addCategory(Intent.CATEGORY_HOME);
            intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            startActivity(intent);
        } else {

            progessDialog_g.setProgressStyle(ProgressDialog.STYLE_SPINNER);
            progessDialog_g.setMessage("you messege");
            progessDialog_g.show();

            new DownloadJSONTask(this, sI)
                    .execute(Initialize.server_url+"/changes/update/1");

        }

        super.onResume();
    }

    @Override
    protected void onPause() {
        this.stopService(new Intent(this, ProgressService.class));
        this.unbindService(mServerConn);
        unregisterReceiver(receiver_g);
        super.onPause();
    }

    private void Finish() {

        Intent in = new Intent(this, RegionsActivity.class);
        startActivity(in);
        downloadUses = true;
    }

}

} 
```

和

```
public class ProgressService extends IntentService {

    public static final String PROGRESS_DIALOG_BROADCAST_FINISH = "Dialog.Progress.MyKey.Finish";

    public ProgressService() {
        super("ExampleProgressService");
    }

    /**
     * Send the finish message.
     */
    private void closeProgressActivity() {
        Intent intent = new Intent(PROGRESS_DIALOG_BROADCAST_FINISH);

        sendBroadcast(intent);
    }

    @Override
    protected void onHandleIntent(Intent intent) {
        // extractVariablesFromIntentAndPrepare(intent);

        String action = intent.getStringExtra("Action");

        if ("0".equals(action)) {

            closeProgressActivity();

        }

    }

} 
```

在你里面 AnyTask

```
sI.putExtra("Action", "0");
        context.startService(sI); 
```

在你身上体现

```
 <service android:name=".Intent.ProgressService" /> 
```

# linux - net_device linux中的读取函数

> ID：13915043
> 
> 赞同：0
> 
> 时间：2012-12-17T13:24:17.403
> 
> 标签：linux, linux-kernel

我正在linux中开发一个小型网络设备。当我通过

结构 net_device_ops

{

.ndo_start_xmit = 转移

}

.ndo_start_xmit 用于将数据从网络设备传输到硬件。但是我如何知道新数据何时到达网络设备/硬件。如何处理 net_device 中的 read()？或者它是如何在 net_device 中处理的？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T19:08:24.940

我相信您正在寻找的功能在[linux/netdevice.h](http://git.kernel.org/?p=linux/kernel/git/torvalds/linux.git;a=blob;f=include/linux/netdevice.h;h=02e0f6b156c3f2dc7c2cae5c663cbdbfd6341484;hb=7a280cf512053137a37da2801eac73a8842fa50d#l2162)`netif_rx`中定义并在[net/core/dev.c中声明](http://git.kernel.org/?p=linux/kernel/git/torvalds/linux.git;a=blob;f=net/core/dev.c;h=d0cbc93fcf32d94db2b909274dd60a9fe88cc80e;hb=7a280cf512053137a37da2801eac73a8842fa50d#l3076)

# sql - 在 MS Access 中创建一个 ComboBox 来保存不同的类型

> ID：13915054
> 
> 赞同：1
> 
> 时间：2012-12-17T13:25:18.280
> 
> 标签：sql, ms-access

我正在尝试在`Access`表单中创建一个组合框以显示库存列表中的所有类型（例如电缆、UPS、货架……）

当我为我制作行源时，`ComboBox`我只希望该类型在那里显示一次。`ComboBox`稍后将用于为库存中不同类型的项目制作报告，因此我只需要列表框中的每种类型一次。这些类型可以稍后更改，因此我希望列表自动更新。

现在我多次`ListBox`显示所有类型，但是当我尝试将行源更改为：

```
Select Distinct Inv_Type 
From Inventory; 
```

我只是得到一个空的`ComboBox`. 但是当我查询该代码时，我只得到每种类型一次（这就是我想要的）。我究竟做错了什么？为什么我得到一个空的`ComboBox`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T13:35:43.340

照雷某所说的去做；`ComboBox`我从头开始创建了一个，没有使用向导首先解决了我的问题。谢谢！

# linux - 为什么关机报错？

> ID：13915056
> 
> 赞同：1
> 
> 时间：2012-12-17T13:25:22.693
> 
> 标签：linux, sockets, tcp, shutdown

在 Linux 上，我尝试了以下步骤：

1.  创建 TCP 套接字，并连接到任何 HTTP 服务器
2.  发送 HTTP 请求数据
3.  使用 SHUT_WR 关闭写入
4.  从套接字读取以获取 HTTP 响应
5.  使用 SHUT_RD 关闭读取
6.  关闭套接字

这里错误发生在第 5 步，errno=ENOTCONN。当我在阅读 EOF 后尝试关闭 Write 时，同样的错误击中了我。这是预期的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T18:12:33.517

在第 4 步中，如果您在 recv() 或 read() 上循环直到它返回 0，那么您已经消耗了套接字关闭的另一半。除了这次它是由远程端发起的。这可能解释了为什么第 5 步返回错误 - 因为远程端点已经关闭了连接的那一侧，所以没有什么可以关闭的。

在任何情况下，您都不需要第 5 步，因为您在第 6 步中关闭了套接字。“关闭”将关闭 TCP 连接的其余部分并关闭套接字文件描述符。

# c# - 如何将 F# 和 C# 程序集与 ILMerge 合并，以便在引用时所有类型都可用？

> ID：13915057
> 
> 赞同：5
> 
> 时间：2012-12-17T13:25:27.660
> 
> 标签：c#, f#, ilmerge

我有许多 F# 和 C# 项目的解决方案。我的目标是使用 ILMerge 将它们全部合并到一个库中。生成的合并 dll 将放入 NuGet 包并在其他项目中引用。但是，当 F# 项目中引用合并的 dll 时，我遇到了一些问题。

我遇到的问题是，如果提供给 ILMerge 的主要程序集是 F#，那么在 F# 项目中引用生成的 dll 只允许访问 F# 类型。如果选择 C# dll 作为合并的主程序集，则在 F# 项目中引用时，合并的 F# 程序集的扩展方法不可用。在打开封闭命名空间时，具有属性的模块`AutoOpen`也不再隐式打开。

有没有办法合并 F# 和 C# 程序集，以便所有类型（包括扩展方法）都可用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T15:38:34.560

在我们的部分代码库中，库的很大一部分是在 F# 中完成的，其余的则在 C# 中完成。F# 和 C# 代码都是正面的。

我们有一个地狱般的批处理文件来处理合并，我看到的是我们正在与这段代码合并：

```
echo merging %mergeapp% /keyfile:"%keyfile%" /target:library /attr:"%dstpath%%csharpdll%" /targetplatform:%targetplatform%,%targetlib% /lib:%sllib% /lib:%targetlib% /lib:"%libpath%lib" /out:"%mergedpath%..\%csharpdll%" "%dstpath%%csharpdll%" "%dstpath%%fsharpdll%"
%mergeapp% /keyfile:"%keyfile%" /target:library /attr:"%dstpath%%csharpdll%" /targetplatform:%targetplatform%,%targetlib% /lib:%sllib% /lib:%targetlib% /lib:"%libpath%lib" /out:"%mergedpath%..\%csharpdll%" "%dstpath%%csharpdll%" "%dstpath%%fsharpdll%" 
```

这就是我们想要的。但是，我们不发布任何扩展方法，也不做任何 AutoOpen。我们发现了 F# 编译器中的一个错误，直到我们开始在混合中加入混淆，它要求我们`ildasm`在 F# 程序集上运行并删除有问题的代码。另一个问题是 F# 没有正确支持成员上的 protected 修饰符（F# 将它们公开），因此我们创建了一个属性，我们可以将其挂在本应受保护的类成员上。然后我们编写了一个工具，使用 Cecil 将程序集拆开，删除我们的属性并将对这些成员的访问更改为受保护（[代码在此处接受的答案中](https://stackoverflow.com/questions/3319274/how-to-implement-iserializable-in-f)）。

我不知道 AutoOpen，但我必须做类似的任务，所以我创建了一个名为 registrant 的类，它可以像这样完成这样的工作：

```
type FSharpRegistrant() =
    do
        // do whatever I need to get going 
```

然后在 C# 模块中的静态构造函数中，我编写了一些代码，使用反射来实例化 F# 注册者以查找类（因为在我的代码库中，C# 代码首先构建并且根本不知道有 F# 代码）。这是带有大量错误检查的丑陋代码，但它可以工作。

# objective-c - 如何直接返回rootViewController？UIStoryboard（或更新表格视图）

> ID：13915062
> 
> 赞同：0
> 
> 时间：2012-12-17T13:25:36.177
> 
> 标签：objective-c, ios5, ios6, uistoryboardsegue, mknetworkkit

我发现了一些问题，但答案不适用于我的代码，因此我提出了自己的问题。

我的目标是从detailviewcontroller 重新加载表格视图。我点击一个单元格，转到详细信息，当我返回表格时，我希望它更新。问题是它不更新。所以我决定当detailviewcontroller上发生某些事情但它仍然没有工作时，最好回到rootviewcontroller。

我愿意接受建议和建议，请随时发表评论！！

我下载了一个视频，下载视频后我更新了 tableView。

这是我正在使用的代码：

我使用 MKNetworkKit 顺便说一句。

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *cachesDirectory = [paths objectAtIndex:0];
    NSString *downloadPath = [cachesDirectory stringByAppendingPathComponent:videoName];

    self.downloadOperation = [ApplicationDelegate.mainDownloader downloadVideoFrom:finalAddress
                                                                            toFile:downloadPath];

    [self.downloadOperation onDownloadProgressChanged:^(double progress) {

        //DLog(@"%.2f", progress*100.0);
        //self.downloadProgressBar.progress = progress;
    }];
    [self.downloadOperation onCompletion:^(MKNetworkOperation* completedRequest) {

//THIS DOES NOT WORK, dismissModalViewControllerAnimated.
        [[ApplicationDelegate.window rootViewController] dismissModalViewControllerAnimated:YES];
        DLog(@"COMPLETED REQUEST: %@", completedRequest);
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Download completed"
                                                        message:@"The file is in your photo and video Library"
                                                       delegate:nil
                                              cancelButtonTitle:NSLocalizedString(@"Thank you WebSurg!!", @"")
                                              otherButtonTitles:nil];
        [alert show];

// THIS IS WHAT I PREVIOUSLY TRIED.
//            NSDictionary *tableSecData = ApplicationDelegate.videoLibraryController.tableSectionData;
//            NSMutableArray *tempValuesDownloaded = [tableSecData objectForKey:@"Downloaded videos"];
//            NSMutableArray *tempValuesUndownloaded = [tableSecData objectForKey:@"Undownloaded videos"];
//            for (NSArray *videoArray in tempValuesUndownloaded) {
//                if ([[videoArray objectAtIndex:0] isEqualToString:self.videoDetailTitle.text]) {
//                    [tempValuesUndownloaded removeObject:videoArray];
//                    [tempValuesDownloaded addObject:videoArray];
//                }
//            }
//            [ApplicationDelegate.videoLibraryController.tableSectionData removeAllObjects];
//            ApplicationDelegate.videoLibraryController.tableSectionData = [NSMutableDictionary dictionaryWithObjectsAndKeys:tempValuesDownloaded, @"Downloaded videos", tempValuesUndownloaded, @"Undownloaded videos", nil];
//            [ApplicationDelegate.videoLibraryController.mainTableView reloadData];
    }
                                 onError:^(NSError* error) {

                                     DLog(@"%@", error);
                                     [[[UIAlertView alloc] initWithTitle:@"Download failed" message:@"The download failed because of a connection error please try again" delegate:nil cancelButtonTitle:NSLocalizedString(@"Dismiss", @"") otherButtonTitles:nil] show];

                                 }];
} else {
    UIAlertView *failureAlert=[[UIAlertView alloc] initWithTitle:@"Download status" message:@"Download failed, not enough free space." delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil, nil];
    [failureAlert show];
} 
```

# android - Eclipse for Android Maven 支持

> ID：13915066
> 
> 赞同：2
> 
> 时间：2012-12-17T13:25:53.973
> 
> 标签：android, eclipse, maven, m2eclipse, m2e

我正在尝试在 Eclipse for Android dev 中添加 Maven 支持。我正在使用 ADT-Bundle 中的 Eclipse Indigo 3.7，并且正在安装 m2e 插件（Eclipse 的 Maven 集成）版本 1.2.0。

问题是在插件安装 Eclipse 更新到 Juno v. 4.2 之后，我想将它回滚回 Indigo。我尝试手动编辑一些配置文件（eclipse.ini、config.ini、artifacts.xml 等）但没有成功。

有没有办法在 Eclipse Indigo 中使用 m2e 插件？任何帮助将不胜感激。

**更新**

Eclipse 3.7 Classic（不是 ADT-Bundle 的版本）允许安装与 Indigo 兼容的 m2e v. 1.0.200，并且不会将 Eclipse 更新到 Juno。

所以这是目前的解决方案。

# php - 使用 php imap 解析并发送回发件人时，电子邮件未显示为转换

> ID：13915074
> 
> 赞同：0
> 
> 时间：2012-12-17T13:26:10.900
> 
> 标签：php, amazon-web-services, gmail, email, gmail-imap

嗨，我正在使用 php imap 功能，我正在解析邮箱中的邮件并将它们存储到 mysql 中：我正在存储以下信息：

```
From
To
Subject
Content
Time of receiving mail 
```

一小时后，我将发回这封邮件。对于发送邮件，我使用的是亚马逊的 ses 邮件。

我使用保存的数据创建了一封邮件，然后再次将它们发送到我的 gmail。

但它没有在 gmail 中显示为组或转换。

这是我发送邮件的代码：

```
function sendEmail($pendingMail) {
    $sesAccUserName = 'noreply@mydomain.com';
    $ses = new AmazonSES(array("key" => AWSAccessKeyId, "secret" => AWSSecretKey));
    $source = trim($sesAccUserName);
    $destination = array('ToAddresses' => array(trim($pendingMail['email_reminder_send_to_address'])));
    $messageBody = $pendingMail['email_reminder_content'];
    $messageSubject = $pendingMail['email_reminder_subject'];
    $messageArr = array('Subject.Data' => 'Fwd: '.$messageSubject, 'Body.Html.Data' => $messageBody);
    $rSendEmail = $ses->send_email($source, $destination, $messageArr);
    if ($rSendEmail->status == 200) {
        changeStatus($pendingMail['email_reminder_id'], 'completed');
    } else {
        print_r($rSendEmail);
    }
} 
```

邮件发送成功，但未与原始邮件分组？我想我用谷歌搜索了很多，但没有找到任何有用的东西..我对电子邮件处于初学者水平...你能帮我解决这个问题吗...谢谢!!!!!!!!!!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T10:51:27.150

我研究了一些 gmail 收件箱邮件，发现每封邮件都有一个`message-id`in 标头，

当我们回复邮件时，值`message-id`被设置为回复邮件的标题字段`In Reply To:`（我们发送的回复邮件）。

此 message-id 和 In Reply To 负责对 gmail 中的消息进行分组...

# javascript - 我可以通过 javascript 在 mozilla 中更改 about:config 吗？

> ID：13915075
> 
> 赞同：8
> 
> 时间：2012-12-17T13:26:18.043
> 
> 标签：javascript, html, firefox, animation, canvas

您好，我正在开发一个 HTML 5 游戏，在 Chrome 中动画看起来很棒，但在 Firefox 中则不行！我在互联网上搜索，我找到了一个解决方案，我需要更改 about:config 中的一些设置，它们是：

```
webgl.force-enabled=true
webgl.msaa-force=true
layers.acceleration.force-enabled=true
gfx.direct2d.force-enabled=true
stagefright.force-enabled=true 
```

我手动更改了这些设置，动画在 Firefox 中看起来很棒。现在我的问题是如何使用 javascript 来做到这一点？是否可以？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T13:29:07.640

MozillaZine 论坛中的讨论建议按如下方式创建书签（说明和代码从那里复制）：

1.  在 Firefox 安装文件夹的 res 目录下创建一个文件，例如“proxy.htm”，并将其放入其中：

    ```
    <?xml version="1.0" encoding="ISO-8859-1"?>
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
                          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
    <head>
       <title>Proxy Toggle</title>
       <script type="text/javascript">
       // <![CDATA[
       function loaded() { 
          netscape.security.PrivilegeManager
          .enablePrivilege("UniversalBrowserAccess UniversalXPConnect");
          var prefs = Components.classes["@mozilla.org/preferences-service;1"]
                      .getService(Components.interfaces.nsIPrefBranch);
          if (prefs.getIntPref("network.proxy.type") == 0) {
             prefs.setIntPref("network.proxy.type", 1);
          }
          else {
             prefs.setIntPref("network.proxy.type", 0); 
          }
          self.close();
       }; 
       self.onload = loaded;   
       // ]]>
       </script>
    </head>
    <body>
       Please wait...
    </body>
    </html> 
    ```

2.  然后制作一个小书签来切换代理首选项的状态，并将其作为位置：

    ```
    javascript: void(window.open('resource:///res/proxy.htm')); 
    ```

见： http://forums.mozillazine.org/viewtopic.php?f=7& [t=87755](http://forums.mozillazine.org/viewtopic.php?f=7&t=87755)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T14:32:44.310

您不应该*更改*这些设置 - 不在您的计算机上，尤其是在其他人的计算机上。无论如何，这些设置将被启用，假设硬件和驱动程序能够处理它们。这些`force-enabled`设置仅用于测试，打开它们可能会导致不稳定（Firefox 崩溃、图形驱动程序崩溃）。

在您的情况下，Firefox 没有自动启用硬件加速的最可能原因是驱动程序过时 - 您应该为您的显卡安装当前驱动程序并建议其他人也这样做。

# web-services - ODATA - Int64 类型的查询字段

> ID：13915077
> 
> 赞同：2
> 
> 时间：2012-12-17T13:26:22.293
> 
> 标签：web-services, odata

我正在尝试查询具有 Int64 类型的字段（来自我的 ODATA 服务）。查询看起来像：

```
http://localhost/Data/MyTable?%24inlinecount=allpages&%24top=100&%24filter=BIGID+eq+666423361622 
```

但它抛出异常 -

```
"An error occurred while processing this request". 
```

在调试模式下检查异常详细信息后，我发现了真正的异常——

```
{System.OverflowException: Value was either too large or too small for an Int32...} 
```

有没有办法让 ODATA 不使用对 Int32 的解析？也许是这样的：

```
filter=(Int64)BIGID+eq+666423361622 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T16:09:26.977

Int64 文字应采用 [-] [0-9]+L 的格式，因此在您的情况下为 666423361622L（请注意末尾的 L 字母）。这是根据[http://www.odata.org/documentation/overview#AbstractTypeSystem](http://www.odata.org/documentation/overview#AbstractTypeSystem)。

# java - 使用 AbstractTableModel 获取 JTable 中的选定行

> ID：13915081
> 
> 赞同：4
> 
> 时间：2012-12-17T13:26:40.107
> 
> 标签：java, swing, jtable, listener, jcheckbox

我有一个`JTable`使用`AbstractTableModel`，我`JCheckBox`在第一列中有一个用于选择行的地方。现在，我需要从选中的表中获取选定的行。现在，我按顺序从第一行遍历到最后一行，并获取所有被选中的行，如下所示，

```
List<Integer> selectedRows = new ArrayList<Integer>();
for(int i = 0; i < table.getRowCount(); i++) {
     if((Boolean) table.getValuAt(i, 0)) {
         selectedRows.add(i);
     }
} 
```

这里的问题是，当我需要获取选定的行时，我需要遍历所有行。现在我有 10 到 20 行。但将来我会得到大约 5000 行。我的问题是，如果有 5000 行并且用户只选择了第 5000 行（最后一条记录），那么我需要遍历所有 5000 行以获取所选行。我认为这不是一个好方法。

我想要实现的一种方法是，向`JCheckBox`列添加一个侦听器，这样当有更改时，`(SELECTED/DESELECTED)`我需要更新侦听器类中选定行的数组。在这个监听器类中，当用户选择一个`JCheckBox`我需要调用的对象时`table.getSelectedRow(..)`，我需要存储它是否`JCheckBox`被选中。

有没有更好的方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-17T18:27:07.600

在下面的示例中，`TableModel`更新 a`Set<Integer> checked`的实现`setValueAt()`。相邻`JList`的模型监听表的模型并显示当前选择的行号。该示例假定所选行数与行数相比较小。注意 的使用`TreeSet`，它的迭代器保留了元素的自然顺序。

![图片](../Images/6dd35404326978dd7730694de988e2e1.png)

```
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.GridLayout;
import java.util.ArrayList;
import java.util.List;
import java.util.Set;
import java.util.TreeSet;
import javax.swing.BorderFactory;
import javax.swing.DefaultListModel;
import javax.swing.JFrame;
import javax.swing.JList;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.event.TableModelEvent;
import javax.swing.event.TableModelListener;
import javax.swing.table.AbstractTableModel;

/** @see http://stackoverflow.com/a/13919878/230513 */
public class CheckTable {

    private static final CheckModel model = new CheckModel(5000);
    private static final JTable table = new JTable(model) {

        @Override
        public Dimension getPreferredScrollableViewportSize() {
            return new Dimension(150, 300);
        }
    };

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                JFrame f = new JFrame("CheckTable");
                f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                f.setLayout(new GridLayout(1, 0));
                f.add(new JScrollPane(table));
                f.add(new DisplayPanel(model));
                f.pack();
                f.setLocationRelativeTo(null);
                f.setVisible(true);
            }
        });
    }

    private static class DisplayPanel extends JPanel {

        private DefaultListModel dlm = new DefaultListModel();
        private JList list = new JList(dlm);

        public DisplayPanel(final CheckModel model) {
            super(new GridLayout());
            this.setBorder(BorderFactory.createTitledBorder("Checked"));
            this.add(new JScrollPane(list));
            model.addTableModelListener(new TableModelListener() {

                @Override
                public void tableChanged(TableModelEvent e) {
                    dlm.removeAllElements();
                    for (Integer integer : model.checked) {
                        dlm.addElement(integer);
                    }
                }
            });
        }
    }

    private static class CheckModel extends AbstractTableModel {

        private final int rows;
        private List<Boolean> rowList;
        private Set<Integer> checked = new TreeSet<Integer>();

        public CheckModel(int rows) {
            this.rows = rows;
            rowList = new ArrayList<Boolean>(rows);
            for (int i = 0; i < rows; i++) {
                rowList.add(Boolean.FALSE);
            }
        }

        @Override
        public int getRowCount() {
            return rows;
        }

        @Override
        public int getColumnCount() {
            return 2;
        }

        @Override
        public String getColumnName(int col) {
            return "Column " + col;
        }

        @Override
        public Object getValueAt(int row, int col) {
            if (col == 0) {
                return row;
            } else {
                return rowList.get(row);
            }
        }

        @Override
        public void setValueAt(Object aValue, int row, int col) {
            boolean b = (Boolean) aValue;
            rowList.set(row, b);
            if (b) {
                checked.add(row);
            } else {
                checked.remove(row);
            }
            fireTableRowsUpdated(row, row);
        }

        @Override
        public Class<?> getColumnClass(int col) {
            return getValueAt(0, col).getClass();
        }

        @Override
        public boolean isCellEditable(int row, int col) {
            return col == 1;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T14:03:57.073

我同意克娄巴特拉。当您创建 AbstractTableModel 的子类时，您将覆盖 setValue(Object value, int rowIndex, int colIndex)。在您的覆盖方法中，您只需检查该列是否是带有您的复选框的列，如果是，则适当地更新内部数据结构。您还可以添加一个 getCheckedRows() 方法，该方法返回一个 List<Integer>，其中包含已选中复选框的行。

# web-services - 调用 ASMX 服务时集成 Windows 安全性

> ID：13915082
> 
> 赞同：1
> 
> 时间：2012-12-17T13:26:55.177
> 
> 标签：web-services, iis, soap, asmx, windows-authentication

我在使用 IIS 5.1 的 Win XP 上运行的 ASMX Web 服务存在一些问题。IIS 设置有集成 Windows 身份验证并禁用匿名访问。（当我启用匿名访问时，一切都像魅力一样。）

但是，当我关闭匿名访问并在 IIS 上仅使用集成 Windows 身份验证运行时，我收到以下异常：

> > HTTP 请求未经客户端身份验证方案“协商”的授权。从服务器收到的身份验证标头是“协商，NTLM”。

这个异常是由我用来测试概念的非常简单的控制台应用程序生成的：

```
 BasicHttpBinding binding = new BasicHttpBinding();
        binding.Security.Mode = BasicHttpSecurityMode.TransportCredentialOnly;
        binding.Security.Transport.ClientCredentialType = HttpClientCredentialType.Windows; // .None;
        binding.UseDefaultWebProxy = false;

        EndpointIdentity spn = EndpointIdentity.CreateSpnIdentity("WORKGROUP/VirtualXP-91051");
        Uri uri = new Uri("http://169.254.91.91/MyWebSite/MyService.asmx");

        EndpointAddress address = new EndpointAddress(uri, spn);

        MyServiceSoapClient client = new MyServiceSoapClient(binding, address);
        client.ClientCredentials.Windows.ClientCredential = CredentialCache.DefaultNetworkCredentials;

        String req = "( the request string is blanked out.. ;) )";
        string resp = client.ReqAddressData(req);

        Console.WriteLine(resp);
        Console.ReadLine(); 
```

App.config 中有趣的部分：

```
 <security mode="TransportCredentialOnly">
                    <transport clientCredentialType="Windows" proxyCredentialType="None"
                        realm="" />
                    <message clientCredentialType="UserName" algorithmSuite="Default" />
                </security> 
```

这不是火箭科学，所以我一定遗漏了一些明显的东西。我已经在 SO 上进行了一些搜索，尽管我可以找到许多类似的问题，但我没有发现任何可以解决我的问题的问题。

# php - 检索和显示存储在多维数组中的数据

> ID：13915086
> 
> 赞同：1
> 
> 时间：2012-12-17T13:27:05.693
> 
> 标签：php, function, multidimensional-array, foreach, array-merge

以下二维数组存储多个图像的信息（1.包含图像的书，2.包含图像的书的作者，3.图像的名称，4.图像 ID）：

```
$images = array(array('book_name'=>"BookA", 'author_name'=>"AuthorA",
                      'image_name'=>"ImageA", 'image_id'=>1),
                array('book_name'=>"BookA",'author_name'=>"AuthorB",
                      'image_name'=>"ImageA", 'image_id'=>1),
                array('book_name'=>"BookA",'author_name'=>"AuthorA",
                      'image_name'=>"ImageB", 'image_id'=>2),
                array('book_name'=>"BookA", 'author_name'=>"AuthorB",
                      'image_name'=>"ImageB", 'image_id'=>2),
                array('book_name'=>"BookB", 'author_name'=>"AuthorA",
                      'image_name'=>"ImageB", 'image_id'=>2)); 
```

一本书可以有多个作者。一个作者可以与几本书相关联。一个图像可以包含在几本书中。

我想创建一个包含以下列的 html 表：

1.  Book(s) - 字段列出包含特定图像的所有书籍
2.  作者 - 字段列出了包含该特定图像的所有书籍的所有作者
3.  图像名称 - 字段包含该图像的名称

我目前正在使用以下代码：

```
<?php function transform($images) {
    $result = array();
    foreach($images as $key => $image) {
        $image_id = $image['image_id'];
        if (!isset($result[$image_id])) {
            $result[$image_id] = array(
                                'author_name' => array(),
                                'book_name' => $image['book_name'],
                                'image_id' => $image['image_id'],
                                'image_name' => $image['image_name']
                                );        
        }       
    $result[$image_id]['author_name'] = array_merge($result[$image_id]['author_name'],     
    array(($image['author_name'])));
    }
    foreach($result as $key => $data) {
        $uniqueauthors = array_unique($result[$key]['author_name']);
    $result[$key]['author_name'] = implode('; ', $uniqueauthors);
    }
    return $result;
}
$images = transform($images);?> 
```

我创建表格的 html 代码：

```
<table>
    <tr><th>Book(s)</th>
        <th>Author(s)</th>
        <th>Image Name</th>
    </tr>
    <?php foreach ($images as $image): ?>   
    <tr>
        <td><?php htmlout($image['book_name']); ?></td>
        <td><?php htmlout($image['author_name']); ?></td>
        <td><?php htmlout($image['image_name']); ?></td>
    </tr>
    <?php endforeach; ?>
</table> 
```

结果表：

```
Book(s)       | Author(s)        | Image Name
BookA           AuthorA;AuthorB    ImageA
BookA           AuthorA;AuthorB    ImageB 
```

所需表：

```
Book(s)       | Author(s)        | Image Name
BookA           AuthorA;AuthorB    ImageA
BookA;BookB     AuthorA;AuthorB    ImageB 
```

**问题：** 此代码正确输出 (2.) 包含相关图像的所有书籍的所有作者的列表和 (3.) 图像名称。但是，它不会按需要输出 (3.)：它只输出包含相关图像的第一个 book_name (BookA)，而不是包含该图像 (BookA;BookB) 的所有书籍的列表。

**问题：**如何获得一个包含 3 列的 HTML 表，其中 (1.) 列出了包含相关图像的所有书籍，(2.) 列出了包含相关图像的书籍的所有作者，(3.) 包含相关图像的名称。提前非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T13:46:53.823

对您的转换功能进行了一些调整，似乎您处理了作者但忘记了书籍:)

```
function transform($images)
{
    $result = array();
    foreach ($images as $key => $image)
    {
        $image_id = $image['image_id'];
        if (!isset($result[$image_id]))
        {
            $result[$image_id] = array(
                'author_name' => array(),
                'book_name' => array(),
                'image_id' => $image['image_id'],
                'image_name' => $image['image_name']
            );
        }
        $result[$image_id]['book_name'] = array_merge($result[$image_id]['book_name'], array($image['book_name']));
        $result[$image_id]['author_name'] = array_merge($result[$image_id]['author_name'], array($image['author_name']));
    }
    foreach ($result as $key => $data)
    {
        $uniquebooks = array_unique($result[$key]['book_name']);
        $result[$key]['book_name'] = implode('; ', $uniquebooks);
        $uniqueauthors = array_unique($result[$key]['author_name']);
        $result[$key]['author_name'] = implode('; ', $uniqueauthors);
    }
    return $result;
}

$images = transform($images);

print_r($images); 
```

输出：

```
Array
(
    [1] => Array
        (
            [author_name] => AuthorA; AuthorB
            [book_name] => BookA
            [image_id] => 1
            [image_name] => ImageA
        )

    [2] => Array
        (
            [author_name] => AuthorA; AuthorB
            [book_name] => BookA; BookB
            [image_id] => 2
            [image_name] => ImageB
        )

) 
```

这应该有望在您的 htmlout 函数中起作用

# java - JSON 和 Struts2 的结果为空

> ID：13915089
> 
> 赞同：1
> 
> 时间：2012-12-17T13:27:19.833
> 
> 标签：java, extjs, struts2, extjs4, struts2-json-plugin

我在 Extjs4.1 中创建了一个简单的表单。

我将请求发送到 Struts2 框架，并使用 Strtus2JSON 插件，我必须收到响应。但不幸的是，响应为空。

**动作类**

```
public String execute()throws Exception{
    Employee emp = new Employee();
    emp.setAddress(getAddress());
    emp.setDepartment(getDepartment());
    emp.setName(getName());
    emp.setSalary(getSalary());
    AddEmployeeService empService = new AddEmployeeService();
    boolean flag = empService.addEmployee(emp);
    resultJSONobj = new JSONObject();
    if(flag == true)
        resultJSONobj.put("success","Inserted Successfully");
    else
        resultJSONobj.put("failure","An error occured");
    System.out.println(resultJSONobj);
    return SUCCESS;

} 
```

**struts.xml**

```
<struts>
    <package name="default" extends="struts-default, json-default">
        <action name="AddEmp" class = "actions.AddEmpAction">
            <result name = "success" type="json">
                <param name ="root">resultJSONobj</param>
            </result>      
        </action>
    </package>        
</struts> 
```

谁能告诉我为什么我得到的响应为 null ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-06T08:40:56.687

在您的配置文件 struts.xml 中，请使用

```
<param name="includeProperties">resultJSONobj.*</param> 
```

代替

```
<param name="includeProperties">resultJSONobj</param> 
```

在我进行上述更改后，我在我的项目中遇到了同样的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T13:51:40.153

你有这样的 resultJSONobj 的 Getter 吗？：

```
public JSONObject getResultJSONobj(){ 
   return this.resultJSONobj; 
} 
```

将命名空间添加到您的包中，如下所示：

```
<package name="default" namespace="/" extends="struts-default, json-default"> 
```

看看有没有什么变化……

* * *

**编辑**

如[指南中所述](http://struts.apache.org/2.2.3/docs/json-plugin.html)，

> *   “瞬态”字段未序列化
> *   没有 getter 方法的字段不会被序列化

试试这样：

使用 Map 而不是 JSONObject。并非每个类都被接受，而且我不确定您的 JSONObject 是否可序列化（您是否实现了可序列化？您声明了一个 serialVersionUID 吗？等）

```
private Map resultJSONobj = new HashMap(); //instantiated at class level

// accessors
public Map getResultJSONobj() {
    return resultJSONobj;
}
public void setResultJSONobj(Map resultJSONobj) {
    this.resultJSONobj = resultJSONobj;
}

//...

public String execute()throws Exception{
    Employee emp = new Employee();
    emp.setAddress(getAddress());
    emp.setDepartment(getDepartment());
    emp.setName(getName());
    emp.setSalary(getSalary());
    AddEmployeeService empService = new AddEmployeeService();
    boolean flag = empService.addEmployee(emp);

    if(flag == true)
        resultJSONobj.put("success","Inserted Successfully");
    else
        resultJSONobj.put("failure","An error occured");
    System.out.println(resultJSONobj);
    return SUCCESS;

} 
```

并像这样更改 struts 配置：

```
<struts>
    <package name="default" extends="struts-default, json-default">

        <action name="AddEmp" class = "actions.AddEmpAction">
            <result name="success" type="json" />
        </action>
    </package>  

</struts> 
```

成功不是必须的，但留给更清晰的代码，以后可以随时删除。

现在，您应该看到这个结果（如果您没有任何其他 getter）：

```
{  
   "resultJSONobj": {
       "success":"Inserted Successfully"
   }
} 
```

或者

```
{  
   "resultJSONobj": {
       "failure":"An error occured"
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T06:18:08.980

struts.xml 文件中缺少一些东西。结果成功后，你要去哪里？在您的执行方法和动作类内部创建 json 对象实例。Struts2JSON 插件序列化动作类中的所有动作变量。可能是因为您只在 action 类中声明了 JSONobject 并在 execute 中实际创建了它，因此 JSON 可能会得到它 {}。

放

```
private JSONObject resultJSONobj = new JSONObject(); 
```

内部动作类和外部执行并查看，它可能会起作用。有关更多信息，您可以访问这里 [http://struts.apache.org/2.2.3/docs/json-plugin.html](http://struts.apache.org/2.2.3/docs/json-plugin.html)

# android - Android ActionBarSherlock 重复菜单按钮

> ID：13915093
> 
> 赞同：2
> 
> 时间：2012-12-17T13:27:32.337
> 
> 标签：android, android-actionbar, actionbarsherlock

我`ActionBarSherlock`在使用`Android 4.0.3`. 在我的设备上运行测试时，我可以在底部栏中`JellyBean 4.2.1`看到溢出图标。`ActionBar``buttons`

见`Screenshot`。

底部按钮怎么`overflow`去掉？

![在此处输入图像描述](../Images/bc2af8706af4f6c90a3a20156a3f65d9.png)

**编辑**：两个按钮都有效！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T14:17:57.713

[正如我在这篇博](http://commonsware.com/blog/2012/06/08/removing-rogue-menus.html)文中概述的那样，将您的`android:targetSdkVersion`to或更高。`14`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T13:43:51.713

我在我的应用程序中创建了一个类似的菜单，并在 menu.xml 中有一些项目，如下所示：

```
<item
    android:id="@+id/menu_main_about"
    android:orderInCategory="100"
    android:showAsAction="never|withText"
    android:title="Acerca de"/> 
```

也许您正在提供一些导致该行为的额外或不同属性。请尝试用这个来确认。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T14:38:08.403

在带来 ActionBarSherlock 的示例中，您需要的是其中一个。

# android - 静音电话启动器图标

> ID：13915096
> 
> 赞同：0
> 
> 时间：2012-12-17T13:27:57.843
> 
> 标签：android, android-layout, android-intent

我正在开发一个应用程序，我正在控制`phone`音量等与声音相关的东西，设计师在没有任何背景的情况下创建应用程序徽标，当我在它上面使用它时`icon`，`phone`它会显示一些带有红线`background`的附件**“静音电话”** ，我们如何处理这个案子 ？我在`Samsung Galaxy-S3`and上进行了测试`HTC V one`，都显示了问题。

![在此处输入图像描述](../Images/bb03c9cb838cdb79e62a3c613610ced0.png)

![](../Images/2687ec2ff694cdb19cad360ec6a37bac.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T15:16:14.320

我已经测试过镜像，您的镜像没有问题，请确保您在添加镜像时有此配置，以测试创建一个新的空项目作为加入的镜像： ![在此处输入图像描述](../Images/6f48e98190c82a3adc86f46497156b5a.png)

它在我的 HTC DESIRE 上的外观： ![图像午餐图标](../Images/0beeeff69769e63c8537984509d8ad56.png)

# c# - 执行时出错而未达到我的代码

> ID：13915097
> 
> 赞同：0
> 
> 时间：2012-12-17T13:27:58.360
> 
> 标签：c#, .net

我会发布我的代码，但我看不到重点，因为如果我在其中放置断点，它永远不会到达它，错误会在执行到达它之前触发。我最初认为它可能是 .config 文件中的副本，但我没有看到任何内容。代码编译正确。

谢谢。

这是我得到的错误：

```
Unhandled Exception: System.ArgumentException: An item with the same key has alr
eady been added.
   at System.ThrowHelper.ThrowArgumentException(ExceptionResource resource)
   at System.Collections.Generic.Dictionary`2.Insert(TKey key, TValue value, Boo
lean add)
   at System.Collections.ObjectModel.KeyedCollection`2.AddKey(TKey key, TItem it
em)
   at System.Collections.ObjectModel.KeyedCollection`2.InsertItem(Int32 index, T
Item item)
   at NDesk.Options.OptionSet.InsertItem(Int32 index, Option item)
   at System.Collections.ObjectModel.Collection`1.Add(T item)
   at NDesk.Options.OptionSet.Add(String prototype, String description, Action`1
 action)
   at manifest_mass_deployment.Program.Main(String[] args) 
```

编辑：错误与 NDESK 有关，我两次使用相同的变量：

```
var p = new OptionSet(){
  { "t|time=", "start time", v=> starttime = v },
  { "s|span=", "span time", v=> spantime = v },
  { "t|thread=", "Fhreads to fork", v=> threads = v },
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T13:31:43.643

看起来您正在将一个项目添加到已经包含具有相同键的项目的集合中。键名必须是唯一的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T13:39:51.773

问题出现在`NDesk`. 如果这是在[这里](http://www.ndesk.org/Options)找到*的 C# 的基于回调的程序选项解析器*，那么它可能会在您的代码运行之前执行一些操作吗？也许它会尝试解析命令行选项？

至少，消息很清楚：`NDesk`正在尝试将键添加到已经存在的字典中。如果这在您的代码中没有任何内容，则它必须是某种自动机制，例如读取文件并从中构建字典。

据我所知，`NDesk`应该可以帮助您解析命令行选项 - 问题可能是您两次传递相同的参数？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T13:32:28.010

例外是非常不言自明的。您正在尝试添加一个已经存在的密钥。Visual Studio 可能会突出显示发生这种情况的行。

如果不是，那么您可以尝试更改可能导致问题的配置，或者从应用程序运行代码开始调试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T13:32:31.363

看来问题是程序的启动参数重复。检查`Project Properties -> Debug -> Command Line Arguments`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T13:33:22.867

`An item with the same key has already been added.`

我认为这正是它听起来的样子。您正在填充字典并两次添加相同的键。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-17T13:35:42.547

我已经看到了没有命中断点的情况，因为 Visual Studio 过度兴奋并开始缓存不应该缓存的文件。您可以尝试确保在重建之前清理您的解决方案。如果这不起作用，请尝试删除其中的内容，`[BootDir]:\Users\[UserName]\AppData\Local\Temp`并且如果您正在使用 Asp.Net 解决方案`[BootDir]:\Windows\Microsoft.NET\Framework\v[FrameworkVersion]\Temporary ASP.NET Files`- 这些应该清除 Visual Studio 为自己保存的任何文件。

# git - git stash 命令后文件状态丢失

> ID：13915098
> 
> 赞同：3
> 
> 时间：2012-12-17T13:28:07.137
> 
> 标签：git, git-stash

```
echo Hello. > a.txt
git add .
echo Bye. >> a.txt
git status -s
>>> AM 
```

我们可以看到状态是`AM`，
但是在做以下

```
git stash
git stash pop
git status -s
>>> A 
```

状态是`A`。为什么`M`国家会丢失？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T17:23:15.563

这是预期的行为。要按照您的预期重建它（保存 A 和 M），请使用

```
git stash pop --index 
```

从文档：

```
git-stash(1):

If the --index option is used, then tries to reinstate not only the working
tree’s hanges, but also the index’s ones. However, this can fail, when you have
conflicts (which are stored in the index, where you therefore can no longer apply
the changes as they were originally). 
```

# php - 单元测试概念，这些断言是否应该被拆分为“单元”？

> ID：13915099
> 
> 赞同：0
> 
> 时间：2012-12-17T13:28:11.080
> 
> 标签：php, unit-testing, testing, phpunit

尽管我已经玩了一段时间的单元测试，但我无法真正理解“单元”的概念，这是一个单一的功能。

例如，我正在测试以下形式的一组魔术方法`newXxx`：

```
public function testMagicCreatorWithoutArgument()
{
    $retobj = $this->hobj->newFoo();

    // Test that magic method sets the attribute
    $this->assertObjectHasAttribute('foo', $this->hobj);
    $this->assertInstanceOf(get_class($this->hobj), $this->hobj->foo);

    // Test returned $retobj type
    $this->assertInstanceOf(get_class($this->hobj), $retobj);
    $this->assertNotSame($this->hobj, $retobj);

    // Test parent property in $retobj
    $this->assertSame($this->hobj, $retobj->getParent());
} 
```

如您所见，此测试方法中有三个“组”断言。为了遵循“单元测试”原则，我应该将它们分成三个单一的测试方法吗？

拆分将类似于：

```
public function testMagicCreatorWithoutArgumentSetsTheProperty()
{
    $this->hobj->newFoo();

    $this->assertObjectHasAttribute('foo', $this->hobj);
    $this->assertInstanceOf(get_class($this->hobj), $this->hobj->foo);
}

/**
 * @depends testMagicCreatorWithoutArgumentReturnsNewInstance
 */
public function testMagicCreatorWithArgumentSetsParentProperty()
{
    $retobj = $this->hobj->newFoo();

    $this->assertSame($this->hobj, $retobj->getParent());
}

public function testMagicCreatorWithoutArgumentReturnsNewInstance()
{
    $retobj = $this->hobj->newFoo();

    $this->assertInstanceOf(get_class($this->hobj), $retobj);
    $this->assertNotSame($this->hobj, $retobj);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T13:33:43.210

您的测试方法正在测试这个：

```
 $retobj = $this->hobj->newFoo(); 
```

在一个测试中，并对这个对象执行多个断言。这似乎不无道理。

如果您在一个测试中测试多个方法调用，我会更加担心。为什么 ？早期断言将中止测试并且不对进一步的方法执行测试。*充其量*这意味着第二种方法没有经过测试，*最坏*的情况是它隐藏了第二次测试揭示的证据（该证据可以帮助确定第一次失败的原因或范围）

出于这个原因，我确实尽量避免在单元测试方法中使用过多的断言。检查空对象，然后检查（在同一个测试中）填充字段并不是不合理的。不过，我不会将这些断言链接在一起，而是希望有多个测试来测试同一返回实体的不同功能。

与以往一样，这里有一定程度的实用性。

# c# - WPF 窗口中的可拖动和自动调整大小的用户控件

> ID：13915102
> 
> 赞同：1
> 
> 时间：2012-12-17T13:28:15.177
> 
> 标签：c#, wpf

我正在制作 WPF Hud，但我不是这样的 WPF 专家。

我需要一个带有可拖动用户控件的窗口，并且在我展开/缩小窗口时会自动调整大小。

我可以通过使用 Canvas 容器并使用 Window 的 MouseMove 事件来实现第一个功能。

我可以通过使用 Grid 容器并将孩子的两个属性 Horizo​​ntalAlignment VerticalAlignment 设置为 Strech 来实现第二个功能。

当然我不能同时使用这两个容器，那么是否有第三个容器可以帮助我完成要求的操作？

实际上我正在尝试使用 Canvas 并手动确定儿童的宽度/高度，但我不喜欢这种方法。

有什么建议吗？

谢谢，卢卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T16:49:01.380

省略有关拖动控件等的详细信息，请尝试以下操作：

```
<Window x:Class="AdHocWpf.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" Height="439" Width="616"
    Title="MainWindow">
    <Viewbox>
        <Canvas Width="600" Height="400" Background="Blue">
            <Rectangle Stroke="Orange" Width="200" Height="100" Canvas.Left="10" Canvas.Top="5"/>
            <Ellipse Stroke="Yellow" Width="350" Height="200" Canvas.Left="225" Canvas.Top="150"/>
        </Canvas>
    </Viewbox>
</Window> 
```

这将创建一个初始大小为 600x400 的 Canvas 对象。当您调整窗口大小时，画布和其中的对象将被缩放，以便它们占用相同数量的相对空间。您还需要适当地调整包含窗口的大小...正常可调整大小的窗口垂直具有 39 像素的铬，水平具有 16 像素，因此请考虑到这一点。

# json - 启用 JSON 以从 WSO2 数据服务检索数据

> ID：13915106
> 
> 赞同：4
> 
> 时间：2012-12-17T13:28:36.143
> 
> 标签：json, wso2, wso2carbon, wso2dss

我正在使用 wso2dss-3.0.0，如何启用 JSON 从 WSO2 数据服务中检索数据？

鉴于我能够以 XML 格式获取数据。当我创建查询时，可以使用 XML 和 RDF 格式作为输出类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T06:38:35.013

查看这篇关于如何从 WSO2 DSS 获取 json 响应的[博客。](http://lafernando.com/2011/11/27/json-data-services-using-wso2-dss/)

# sql - 这是 Oracle SQL 错误吗？

> ID：13915107
> 
> 赞同：-6
> 
> 时间：2012-12-17T13:28:37.580
> 
> 标签：sql, oracle, plsqldeveloper

我的表中有一个名为`TNAME`type的列`nvarchar2(8)`。如您所见，长度为**8 。**表中有几条记录，所有记录在该列中都有 8 个符号。当我选择该列时，该值**仅包含 7 个符号**。如果我`select length(TNAME) from mytable`，**结果是 8！！！**

看图片。 ![在此处输入图像描述](../Images/076a3b11c7390deb210d0c92a06a7d3b.png)

为什么会发生这种情况，有什么想法吗？

**另一张照片**

![在此处输入图像描述](../Images/7d008cd012c5a185c54b9d51c83708c2.png)

![在此处输入图像描述](../Images/12eb3b10e70a0db7ae5134e80126e1bc.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T13:53:51.750

让我们明确一点：Oracle 并不是世界上最昂贵的数据库，因为它习惯性地断言`('CMN00632' = 'CMN0063') is true`. 所以问题出在您的设置中，无论是在您的环境配置中还是在您的数据本身中。

您仍然坚持认为您的 GUI 没有问题。我们无法验证这一点。但是，如果你错了，你是唯一受影响的人，所以我们会假设你是对的。

另一种可能性是您的数据以某种方式损坏，可能是非打印字符。这个问题是影响 ebvery 行还是只影响表中的某些值？

无论哪种方式，您都可以运行一个简单的检查：

```
select dump(tname) 
from merchants 
where tname = 'CMN00632'; 
```

输出应该是该字符串的 ASCII 值：`67,77,78,48,48,48,51,50`。

顺便说一句，证明该列没有截断格式是很简单的：*使用列别名*。这个查询返回什么？

```
select tname as some_new_name 
from merchants 
where tname = 'CMN00632'; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T13:36:44.230

查询是正确的。如您所见，记录与您的条件匹配`CMN00632`。你得到结果的原因只是`3`因为 GUI 切断了这个值。尝试调整列的大小`TNAME`，您将看到整个值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T13:46:59.827

发生这种情况是因为在设置中，您已将列数据设置为**最多显示 7 个字符**。

如果您在命令提示符下执行查询，您将看到正确的结果。

**在您的编辑器中执行以下查询，看看它给出了什么。**

**`select '123456789' as test from merchants;`**

**`1234567`**我敢打赌，这将在您使用的编辑器中给出结果。

**还有一个基本问题**，***你认为你会用你的查询得到图像中显示的行吗？***

# .net - RemoveTimestamp Rx（已删除但未忘记）

> ID：13915109
> 
> 赞同：3
> 
> 时间：2012-12-17T13:28:48.250
> 
> 标签：.net, system.reactive

因此，非常过时的 Hands-on-Labs (HoL) 使用了`RemoveTimestamp`在以后的版本中删除的方法。我不完全确定它的行为应该是什么。从 HoL 提供了这个扩展方法：

```
public static IObservable<T> LogTimestampedValues<T>(this IObservable<T> source, 
    Action<Timestamped<T>> onNext)
{
    return source.Timestamp().Do(onNext).RemoveTimestamp();
} 
```

有没有替代品，或者有人知道这种方法的新操作/预期行为吗？`Timestamp`还存在。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T16:04:42.203

您可以自己定义扩展方法，通过调用[扩展方法手动删除](http://msdn.microsoft.com/en-us/library/system.reactive.linq.observable.select.aspx)[`Timestamped`包装器](http://msdn.microsoft.com/en-us/library/hh228977.aspx)并从实例返回[属性：](http://msdn.microsoft.com/en-us/library/hh211673.aspx)[`Select`](http://msdn.microsoft.com/en-us/library/system.reactive.linq.observable.select.aspx)[`Value`](http://msdn.microsoft.com/en-us/library/hh211673.aspx)`Timestamped`

```
public static IObservable<T> LogTimestampedValues<T>(this IObservable<T> source, 
    Action<Timestamped<T>> onNext)
{
    // Validate parameters.
    if (source == null) throw new ArgumentNullException("source");
    if (onNext == null) throw new ArgumentNullException("onNext");

    // Timestamp, call action, then unwrap.
    return source.Timestamp().Do(onNext).Select(t => t.Value);
} 
```

然而，为了*真正*有效，你真的想定义一个重载，它接受一个[`IScheduler`实现](http://msdn.microsoft.com/en-us/library/system.reactive.concurrency.ischeduler%28v=vs.103%29.aspx)并调用[`Timestamp`扩展方法重载](http://msdn.microsoft.com/en-us/library/hh229003%28v=vs.103%29.aspx)：

```
public static IObservable<T> LogTimestampedValues<T>(this IObservable<T> source, 
    Action<Timestamped<T>> onNext, IScheduler scheduler)
{
    // Validate parameters.
    if (source == null) throw new ArgumentNullException("source");
    if (onNext == null) throw new ArgumentNullException("onNext");
    if (scheduler == null) throw new ArgumentNullException("scheduler");

    // Timestamp, call action, then unwrap.
    return source.Timestamp(scheduler).Do(onNext).Select(t => t.Value);
} 
```

您想要这样做，因为您可能有一个特定的调度程序希望日志记录使用。

如果您*没有*传入`IScheduler`实现，那么初始扩展方法只不过是扩展方法的一个薄包装器[`Do`，](http://msdn.microsoft.com/en-us/library/hh229804%28v=vs.103%29.aspx)并没有提供太多价值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T20:20:29.807

多田！

```
public static IObservable<T> RemoveTimestamp<T>(this IObservable<Timestamped<T>> This)
{
    return This.Select(x => x.Value);
} 
```

# groovy - 使用 groovy 向下游传递构建参数。詹金斯构建管道

> ID：13915112
> 
> 赞同：3
> 
> 时间：2012-12-17T13:28:53.980
> 
> 标签：groovy, jenkins

我已经看到了一些执行预构建系统 groovy 脚本的示例，效果如下：

```
import hudson.model.*
def thr = Thread.currentThread()
def build = thr?.executable
printf "Setting SVN_UPSTREAM as "+ build.getEnvVars()['SVN_REVISION']  +"\n" ; 
build.addAction(new ParametersAction(new StringParameterValue('SVN_UPSTREAM', build.getEnvVars()['SVN_REVISION']))) 
```

旨在使`SVN_UPSTREAM`所有下游作业都可用。

考虑到这一点，我尝试`$SVN_UPSTREAM`在手动执行的下游作业中使用，例如

```
https://code.mikeyp.com/svn/mikeyp/client/trunk@$SVN_UPSTREAM 
```

哪个没有解决导致错误。

任何人都可以在这里发现问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T22:31:02.100

最前沿的 jenkins 构建管道插件现在支持参数传递。消除了我对常规解决方法的需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T19:48:01.527

确保您正在向下游传递的参数*未*在您希望使用它的下游作业中设置为参数。也就是说，在下游作业中，如果您选中了“此构建已参数化”，请不要将 SVN_UPSTREAM 添加到参数列表中。如果这样做，它将覆盖预设值。

# ruby-on-rails - 单个 Ruby/Rails 方法来检查一个对象是否存在并且有一个 ID

> ID：13915115
> 
> 赞同：3
> 
> 时间：2012-12-17T13:29:15.863
> 
> 标签：ruby-on-rails, ruby

在我开始用我自己创建的笨拙的方法乱扔代码之前，我想知道是否有一个现有的 Ruby/Rails 方法可以：

*   如果@foo 存在并且@foo 有一个ID，则返回true（例如，你在foo#show 中）
*   如果@foo 存在但还没有 ID（例如你在 foo#new 中），则返回 false
*   如果@foo 不存在，则返回 false（例如，您在 bar#index 中）

我尝试搜索 API 文档，但我使用的术语必然如此笼统（ID、保存、存在等），以至于到目前为止我还没有找到任何东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T13:32:27.853

您可以使用[`.try`](http://api.rubyonrails.org/classes/Object.html#method-i-try)

```
@foo.try(:id) 
```

将返回 id 或 nil。

如果您严格要求真假，

```
!!@foo.try(:id) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T13:38:07.053

对于前 2 个，使用`!@foo.new_record?`new_record？如果模型已保存到数据库并且是否具有 id，则方法返回 true/false。

第三，阅读这个：[定义？](http://ruby-doc.org/docs/keywords/1.9/Object.html#method-i-defined-3F)

# .htaccess - .htaccess 将一个 url 重定向到另一个（保留 url 段）

> ID：13915117
> 
> 赞同：2
> 
> 时间：2012-12-17T13:29:18.683
> 
> 标签：.htaccess, url, redirect

需要重定向`http:// www.old-url.com/any/other/url/segment` 到`https:/ /www.new-url.com/any/other/url/segment`

目前我正在做这样的事情：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} !http://www.old-url.com/1$ [NC]
RewriteRule ^(.*)$ https://www.new-url.com/$1 [L,R=301] 
```

结果：

```
http:// www.old-url.com/any/other/url/segment to
https:// www.new-url.com/ 
```

谢谢-罗比

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T13:33:02.190

使用以下 htaccess 规则将 http 重定向到 https：

```
RewriteEngine On
RewriteCond %{HTTPS} !on
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} 
```

来源：[htaccess 重定向](http://viralpatel.net/blogs/21-very-useful-htaccess-tips-tricks/)

# c++ - 错误：使用 && 运算符时使用但未定义标签

> ID：13915121
> 
> 赞同：4
> 
> 时间：2012-12-17T13:29:51.580
> 
> 标签：c++, c, linux, gcc, operator-overloading

```
int main()
{
        int i = 0;
        int *p = &i;
        int *q = &&i;
        return 0;
} 
```

使用`gcc`on编译`Linux`时，出现错误

```
addr.c: In function ‘main’:
addr.c:6:2: error: label ‘i’ used but not defined 
```

为什么编译器将`int i`其视为`label`整数而不是整数？我们什么时候使用`&& operator`？

**编辑**：好的，我可以有点理解答案，但你能解释一下“arch/arm/include/asm/processor.h”中的以下宏定义吗？它没有说任何关于`label`，但评论说，它可以返回“ `program counter`”

```
/*
 * Default implementation of macro that returns current
 * instruction pointer ("program counter").
 */
#define current_text_addr() ({ __label__ _l; _l: &&_l;}) 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-17T13:33:00.943

什么 && 运算符？C++ 中没有一元 && 运算符。GCC 有一个允许[计算 goto](http://gcc.gnu.org/onlinedocs/gcc/Labels-as-Values.html)语句的扩展，并且该扩展使用 && 来获取标签的地址。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-17T13:31:11.653

这`&&`是 GNU C 标签地址操作符。

[http://gcc.gnu.org/onlinedocs/gcc/Labels-as-Values.html](http://gcc.gnu.org/onlinedocs/gcc/Labels-as-Values.html)

```
int *q = &&i; 
```

`i`必须是标签。您的程序中没有标签`i`。

标签示例：

```
int main(void)
{
    i:
    (void) 0;

     int i = 0;
     int *p = &i;
     int *q = &&i;
     return 0;
} 
```

我将`(void) 0;`语句添加为 C 中的标签只能放在语句之前，而不能放在声明之前。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-17T13:31:38.610

`&`有两种使用方式，一是可以获取变量的地址：

```
int *p = &i; // that's fine, p points to i's address 
```

其次，它用于“按位”并且：

```
int i = 1;     // 01
int j = 3;     // 11
int k = i & j; // 01 
```

`&&`是一个逻辑运算符，而不是“地址的地址”运算符，它的用途是同时检查两个条件并断言两者都为真。

```
if (something && something_else) 
```

* * *

**编辑：**我刚刚注意到您将其标记为 C 和 C++ ...如果这是一个 C 问题，请参见上文。如果这是一个 C++ 问题，还有另一个注释`&&`：

[C++ 双地址运算符？(&&)](https://stackoverflow.com/questions/4549151/double-address-operator)

* * *

**编辑2：**`&&`作为标签值运算符的另一种用途是获取标签的地址。

这就是错误消息的含义，因为编译器假设这是您想要做的：

标签值运算符 && 返回其操作数的地址，该地址必须是当前函数中定义的标签或包含函数。该值是一个 void* 类型的常量，并且只能在计算的 goto 语句中使用。该语言特性是对 C 和 C++ 的扩展，旨在促进移植使用 GNU C 开发的程序。

```
int main()
{
   void * ptr1;
   label1: ...
   ptr1 = &&label1;

   ...

   if (...) {
      goto *ptr1;
   }
   ...
} 
```

# python - 如何在python中装饰一个生成器

> ID：13915122
> 
> 赞同：15
> 
> 时间：2012-12-17T13:29:53.553
> 
> 标签：python, generator, decorator

所以，我定义了一个简单的生成器：

```
def gen1(x):
    if x <= 10:
        yield x
        for v in gen1(x + 1):
            yield v 
```

基本上，我想装饰它，让它返回所有值，但最后一个：

```
def dec(gen):

    def new_gen(x):
        g = gen(x)
        value = g.next()
        for v in g:
            yield value
            value = v

    return new_gen 
```

现在，如果我重新定义 gen1

```
@dec
def gen1(x):
    ...

for i in gen1(1):
    print i    # Nothing printed 
```

但如果我使用：

```
some_gen = dec(gen1)

for i in some_gen(1):
    print i    # Prints 1 to 9, as needed 
```

**为什么我的装饰器不起作用，我该如何解决？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-17T13:33:18.587

你的递归调用`gen1`也取决于你的装饰器，所以一切都被装饰器消耗掉了。

最简单的解决方法是以非递归方式编写生成器，或者封装递归：

### 封装：

```
@dec
def gen1(x):
    def inner(x):
        if x <= 10:
            yield x
            for v in inner(x + 1):
                yield v
    return inner(x) 
```

### 非递归：

```
@dec
def gen1(x):
    for v in range(x, 11):
        yield v 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T13:33:55.737

由于装饰器和递归之间的交互，它不起作用。由于您的生成器是递归的，因此它依赖于某种递归关系。通过在生成器和子生成器之间注入一个修改装饰器，您正在打破这种递归关系。

只要去掉最后一个元素，单靠改变`@dec`是无法兼容的。`gen1()``@dec`

但是，您可以进行更改`gen1()`以使其兼容`@dec`：

```
def dec(gen):
    def new_gen(x):
        g = gen(x)
        value = g.next()
        for v in g:
            yield value
            value = v
    return new_gen

@dec
def gen1(x):
    def gen2(x):
        if x <= 10:
            yield x
            for v in gen2(x + 1):
                yield v
    for v in gen2(x):
        yield v

for i in gen1(1):
    print i    # Prints 1 to 9, as needed 
```

这里的诀窍是使`gen1()`非递归的，并将所有工作委托给另一个未修饰的生成器。后者可以是递归的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-16T12:58:35.167

当我不得不这样做时，我的解决方案是在生成器之上创建一个生成器！这实际上是装饰调用的想法。所以你也是，

```
def funca():
    while True:
        print "in funca"
        yield True

def dec(func):
    while True:
        print "in funcb"
        func.next()
        yield True

decfa = dec(funca())
decfa.next()
>>
 "in funcb"
 "in funca" 
```

至于你的问题（只产生最后一个值）我会做类似的事情：

```
def funca():
    for i in range(1,5):
        yield i

def dec2(ff):
    try:
        while True:
            val=ff.next()
    except:
        yield val

>>>dec2(funca()).next()
4 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-14T09:21:59.417

一个更简单的解决方案。

*   **将指向初始生成器的指针保存**为最终生成器的属性：

```
def dec(gen):

  def new_gen(x):
   g = gen(x)
   value = next(g)
   for v in g:
    yield value
    value = v

  new_gen.gen = gen
  return new_gen 
```

*   **使用**指向初始生成器的指针代替意外递归的生成器：

```
@dec
 def gen1(x):
  if x <= 10:
   yield x
   for v in gen1.gen(x+1):
    yield v 
```

# c# - CurrentThread.CurrentUICulture 设置正确，但始终获取 en-US

> ID：13915123
> 
> 赞同：5
> 
> 时间：2012-12-17T13:29:55.237
> 
> 标签：c#, asp.net, cultureinfo, currentuiculture

我正在开发一个有两种语言的多语言网站，从阿拉伯语和英语开始

我已在 IE 和 FireFox 中将语言设置为阿拉伯语（ar-ae），但它总是给我英文版本，我无法解决此问题

网站结构

```
Default.aspx
 en/Default.aspx
 ar/Default.aspx 
```

问题是，当我使用 URL 时，如果选择阿拉伯语作为语言`http://localhost:49831/site/Defualt.aspx`，它可以正常工作并将我重定向到阿拉伯语版本。`ar/Default.aspx`

但是当使用 URL 时，`http://localhost:49831/site/` 它总是将我重定向到英文版本 `en/Default.aspx`

我不确定我做错了什么。

我只使用 Default.aspx 来检测默认浏览器语言，然后相应地重定向

Default.aspx.cs 文件的代码

```
 // Localization and Globalization code
    protected override void InitializeCulture()
    {
        String lang = Request["Language"];

        Session["lang"] = Helper.DetectLanguage(lang);
        //Set Direction of page LTR/RTL
        if (Session["lang"] == "ar-AE")
        {
            Session["PageDIR"] = "rtl";
        }
        else
        {
            Session["PageDIR"] = "ltr";
        }

        base.InitializeCulture();
    }

   public static String DetectLanguage(String lang)
    {
        String LangCode = lang;

        if (!string.IsNullOrEmpty(lang))
        {
            lang =  lang.ToLower();
        }

        String Lang2Char;
       CultureInfo ci = System.Threading.Thread.CurrentThread.CurrentUICulture;
        String LangName = ci.Name.ToString().ToLower();
        //check leng & if length is less than 2 then set english as default language.
        if (LangName.Length > 1)
        {
             Lang2Char = LangName.Substring(0, 2);
        }
        else
        {
             Lang2Char = "en";
        }

        // if QueryString is not null then execute foollowinf if block
        //If Language is present in Querystring then excute if part else, else part
        if (lang != null)
        {
            switch (lang)
            {
                case "en-us":
                    Thread.CurrentThread.CurrentCulture = new CultureInfo("en-US");
                    Thread.CurrentThread.CurrentUICulture = new CultureInfo("en-US");
                    LangCode = "en-US";
                    break;
                case "ar-ae":
                    Thread.CurrentThread.CurrentCulture = new CultureInfo("ar-AE");
                    Thread.CurrentThread.CurrentUICulture = new CultureInfo("ar-AE");
                    LangCode = "ar-AE";
                    break;
                default:
                    Thread.CurrentThread.CurrentCulture = new CultureInfo("en-US");
                    Thread.CurrentThread.CurrentUICulture = new CultureInfo("en-US");
                    LangCode = "en-US";
                    break;
            }
        }
        // if lang query string is null then set the language based on following logic
        else
        {
            switch (Lang2Char)
            {
                case "en":
                        Thread.CurrentThread.CurrentCulture = new CultureInfo("en-US");
                        Thread.CurrentThread.CurrentUICulture = new CultureInfo("en-US");
                        LangCode = "en-US";
                        break;
                case "ar":
                        Thread.CurrentThread.CurrentCulture = new CultureInfo("ar-AE");
                        Thread.CurrentThread.CurrentUICulture = new CultureInfo("ar-AE");
                        LangCode = "ar-AE";
                        break;
                default:
                        Thread.CurrentThread.CurrentCulture = new CultureInfo("en-US");
                        Thread.CurrentThread.CurrentUICulture = new CultureInfo("en-US");
                        LangCode = "en-US";
                        break;
            }

        }
        return LangCode;
    } 
```

我怎样才能最好地定义此代码以使其正常工作。在 Global.asx 文件中定义 CurrentUICulture 是否更好

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T13:54:20.880

我建议您在处理多语言网站时采取一些不同的方法。首先，您不必使用多个默认页面，您只需要一个。

所以让我解释一下如何做到这一点。

首先，可以在 web.config 中设置默认站点全球化：

```
 <system.web>
    <globalization uiCulture="sl-SI" culture="sl-SI" enableClientBasedCulture="false"/>
  </system.web> 
```

如果可能，您可以设置`enableClientBasedCulture="true"`为强制客户端站点全球化。如果没有，默认的文化将发生。

接下来，如何在 asp.net 页面中设置全球化（强制，当用户需要时）：

```
 internal static void ChangeLanguage(string languageCode, System.Web.UI.Page page)
    {
        CultureInfo ci = new CultureInfo(languageCode);
        page.Session[cLanguageSessionKey] = ci;
        //save to user profile is required (just a sample)...
        if (HttpContext.Current.User.Identity.IsAuthenticated)
        {
            Entities.MembershipUserFull user = Services.MembershipUserManager.GetMembershipUserFull(HttpContext.Current.User.Identity.Name);
            user.LanguageId = Services.LanguageManager.GetLanguageIdFromLanguageCode(languageCode);

            //save profile... 
            user.SaveProfile();
        }

        //reload page. New culture will take efect...
        page.Response.Redirect(page.Request.Url.AbsoluteUri);
    } 
```

这是页面加载：

```
 //set language if required...
        if (User.Identity.IsAuthenticated)
        {
            Entities.MembershipUserFull user = Services.MembershipUserManager.GetMembershipUserFull(HttpContext.Current.User.Identity.Name);
            if (user != null && user.LanguageId != null)
            {
                GP.Solutions.Entities.Language language = Services.LanguageManager.GetLanguage((int)user.LanguageId);
                if (Thread.CurrentThread.CurrentUICulture.Name != language.Code)
                {
                    ChangeLanguage(language.Code, this);
                }
            }
        } 
```

最后是如何在 Web 控件上处理多语言支持：

请注意我有两个全球资源（每个支持的语言一个。没有语言代码的一个是默认的）

![在此处输入图像描述](../Images/ac63d5544e7c04d66ab6929950d4bbe3.png)

假设我需要在标签上显示一些文本：

```
<asp:Label ID="Label1" runat="server" CssClass="AdvertPreTitle" Text='<% $resources:AppResource,MostPopularService %>'></asp:Label> 
```

注意 MostPopularService 是根据当前 UI 文化从特定语言资源中读取的。这是来自资源文件的片段：

![在此处输入图像描述](../Images/f268339e7427716f2d5cac45edf3d9e2.png)

所以最后我只有一个处理所有语言的默认页面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-05T21:40:40.557

根据此[MSDN](http://msdn.microsoft.com/en-us/library/hy4kkhe0%28v=vs.100%29.aspx)链接，`enableClientBasedCulture="true"`不再起作用。相反，请执行以下操作：

```
 <system.web>    
     <globalization culture="auto" uiCulture="auto"/>
  </system.web> 
```

# c# - Linq：获取相交的项目

> ID：13915127
> 
> 赞同：-2
> 
> 时间：2012-12-17T13:30:31.473
> 
> 标签：c#, .net, linq

我对此很陌生，我在做这件事时遇到了一些麻烦：

我有一个清单`timeitems`：

```
06:40 - 07:10
06:55 - 07:13
07:00 - 08:35
07:13 - 07:14
09:00 - 10:00
10:00 - 11:00
12:00 - 13:00
12:30 - 14:00 
```

现在我想要所有相交的项目：

```
06:40 - 07:10
06:55 - 07:13
07:00 - 08:35
07:13 - 07:14

12:00 - 13:00
12:30 - 14:00

var intersects = timeitems
            .Where(a => timeitems
            .Any(b => Utilities.IsBetween(a.SpanRangeStartIndex, b.SpanRangeStartIndex, b.SpanRangeEndIndex)))
            .AsParallel()
            .ToList(); 
```

但我只得到这个，我不知道为什么：

```
06:55 - 07:13
07:00 - 08:35
07:13 - 07:14

12:30 - 14:00 
```

感谢四位您的帮助（请记住，我是 .net 的新手 :-)

编辑*

好的，timeitem 只是具有两个属性的项目列表：

项目 1（SpanRangeStartIndex=06:40 SpanRangeEndIndex=07:10）

项目 2（SpanRangeStartIndex=06:55 SpanRangeEndIndex=07:13）

...

Utilities.IsBetween 检查一个值是否介于其他两个值之间（如果 3 介于 2 和 6 之间 -> true）

```
 public static bool IsBetween(int value, int start, int end)
    {
        return (value > start) & (value <end);
    } 
```

抱歉我的英语不好和c#技能不好......我对此很陌生

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T21:02:24.790

欢迎来到 SO！

我相信您要解决的问题是您想知道您的范围集中的哪些范围与同一集中的任何其他范围重叠。

问题似乎是您测试“介于”范围的一端而不是另一端。（我编写了一个示例程序来执行您的操作，并添加了一些注释，并从属性名称和`.AsParallel()`调用中删除了“SpanRange”和“Index”——这可能会更改返回数据的顺序，但总体上仍然相同内容。）

```
var intersects = 
    data.Where(a => data
        .Any(b => 
            IsBetween(a.Start, b.Start, b.End) // <-- this is the test you did
            || IsBetween(a.End, b.Start, b.End) // <-- the missing other end
//          || IsBetween(b.Start, a.Start, a.End) // potentially necessary
//          || IsBetween(b.End, a.Start, a.End) // potentially necessary
        )); 
```

我添加了另外两个带注释的`IsBetween`调用，因为我认为可能有“完全包含”的范围测试可能无法显示何时一个范围完全包含在另一个范围内。

另一方面，我可能会尝试通过首先考虑两个范围不会相交的更简单情况来改变您对如何测试范围何时相交的想法。

两个范围不相交时：

1.  `rangeA.End < rangeB.Start`其中说： rangeA 完全在 rangeB 的“左侧”
2.  `rangeA.Start > rangeB.End`其中说： rangeA 完全在 rangeB 的“右侧”

`doNotIntersect = (rangeA.End < rangeB.Start) || (rangeA.Start > rangeB.End)`

因此，我们可以通过否定上述表达式来测试范围是否相交：
`isIntersecting = (rangeA.End >= rangeB.Start) && (rangeA.Start <= rangeB.End)`

但是，我注意到您的 between 测试不使用 ">=" 或 "<=" ，因此仅与另一个开始共享结束的范围不会相交。因此，`09:00 - 10:00`样本中的范围不会与样本中的`10:00 - 11:00`范围重叠。因此，您可能会使用`>`&`<`而不是`>=`&`<=`运算符。

如果您需要，我很乐意发布代码和结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T13:47:16.160

你看到这个问题是因为你只得到“这个项目在另一个项目期间开始的项目”，而不包括“另一个项目在这个项目期间开始的项目”。

一个简单的解决方法是

```
var intersects = timeitems
    .Where(a => timeitems.Any(b => 
        Utilities.IsBetween(a.SpanRangeStartIndex,
            b.SpanRangeStartIndex, b.SpanRangeEndIndex) ||
        Utilities.IsBetween(b.SpanRangeStartIndex,
            a.SpanRangeStartIndex, a.SpanRangeEndIndex)))
    .AsParallel()
    .ToList(); 
```

这使您的代码对称，并且将包含缺失的`06:40 - 07:10`and `12:00 - 13:00`。

但是，这（与您的原始版本一样）效率非常低 - O(n^2)，而 O(n) 算法应该是可能的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T13:48:43.323

想想你什么时候处理从`12:30`到的时间`14:00`

前面的元素（从`12:00`到`13:00`）与该窗口相交，但您的查询错过了它，因为您只是在检查*结束时间是否在范围内时才检查**开始*时间是否在范围内。

 *也就是说，您可以将查询更改为此（删除[`AsParallel`](http://msdn.microsoft.com/en-us/library/system.linq.parallelenumerable.asparallel.aspx)and`ToList`方法，因为它们不是解决方案的组成部分）：

```
var intersects = timeitems
    .Where(a => timeitems
        .Any(b => 
            // Check the start of the window...
            Utilities.IsBetween(a.SpanRangeStartIndex, 
                b.SpanRangeStartIndex, b.SpanRangeEndIndex) &&
            // *AND* the end of the window...
            Utilities.IsBetween(a.SpanRangeEndIndex, 
                b.SpanRangeStartIndex, b.SpanRangeEndIndex))); 
```

现在，您正在遍历*每个项目的**整个* `timeItems`序列，甚至是您知道已经匹配和相交的项目（因为您没有将它们配对，所以您不需要说 item 与 item重叠，您只需返回它重叠）。*`a``b`*

 *有了这个，您可以通过不使用 LINQ 来减少遍历 N^2 项的次数，但前提是您的集合已物化并实现了[`IList<T>`接口](http://msdn.microsoft.com/en-us/library/5y536ey6.aspx)，数组和[`List<T>`](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)实例会这样做）。

您将向前看，跟踪重叠和产生的内容，如下所示：

```
public IEnumerable<TimeItem> GetOverlappingItems(this IList<TimeItem> source)
{
    // Validate parameters.
    if (source == null) throw new ArgumentNullException("source");

    // The indexes to ignore that have been yielded.
    var yielded = new HashSet<int>();

    // Iterate using indexer.
    for (int index = 0; index < source.Count; ++index)
    {
        // If the index is in the hash set then skip.
        if (yielded.Contains(index)) continue;

        // Did the look ahead yield anything?
        bool lookAheadYielded = false;

        // The item.
        TimeItem item = source[index];

        // Cycle through the rest of the indexes which are
        // not in the hashset.
        for (int lookAhead = index + 1; lookAhead < source.Count; ++lookAhead)
        {
            // If the item has been yielded, skip.
            if (yielded.Contains(lookAhead)) continue;

            // Get the other time item.
            TimeItem other = source[lookAhead];

            // Compare the two.  See if the start or the end
            // is between the look ahead.
            if (Utilities.IsBetween(item.SpanRangeStartIndex,
                    other.SpanRangeStartIndex, other.SpanRangeEndIndex) ||
                Utilities.IsBetween(item.SpanRangeEndIndex,
                    other.SpanRangeStartIndex, other.SpanRangeEndIndex))
            {
                // This is going to be yielded.
                lookAheadYielded = true;

                // Yield the item.
                yield return other;

                // Add the index to the hashset of what was yielded.
                yielded.Add(lookAhead);
            }
        }

        // Was a look ahead yielded?
        // No need to store the index, we're only moving
        // forward and this index doesn't matter anymore.
        if (lookAheadYielded) yield return item;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T17:27:34.437

LINQ 在这里可能不是一个好主意，因为您正在做很多重复计算。如果您可以假设它们都按起始索引排序（如果不能保证，您可以使用 LINQ 对其进行排序），那么在迭代它们时保持滚动窗口会容易得多：

```
timeitem workingRange = null, rangeStart = null;
bool matched = false;
foreach(timeitem t in timeitems) // timeitems.OrderBy(ti => ti.SpanRangeStartIndex) if unsorted
{
    if(workingRange is null)
    {
        rangeStart = t;
        workingRange = new timeitem { SpanRangeStartIndex = t.SpanRangeStartIndex, SpanRangeEndIndex = t.SpanRangeEndIndex };
        continue;
    }

    if(Utilities.IsBetween(t.SpanRangeStartIndex,
        workingRange.SpanRangeStartIndex, workingRange.SpanRangeEndIndex))
    {
        if(!matched)
        {
            matched = true;
            yield return rangeStart;
        }
        workingRange.SpanRangeEndIndex = Math.Max(workingRange.SpanRangeEndIndex, t.SpanRangeEndIndex);
        yield return t;
    }
    else
    {
        matched = false;
        rangeStart = t
        workingRange = new timeitem { SpanRangeStartIndex = t.SpanRangeStartIndex, SpanRangeEndIndex = t.SpanRangeEndIndex };
    }
} 
```

一些笔记。保留对范围的原始第一项的引用，因为我不知道它是否是结构/类，除非您正在执行某种转换，否则最好生成原始项。工作范围可以很容易地修改使用`DateTime`（这可能更容易阅读/理解）。我们需要跟踪我们是否已经匹配，因为我们仍然需要让出/返回原始工作项并确保我们不会再次让出（不能使用范围作为衡量标准，因为后续`timeitem`的 s 可能完全在初始范围内）。最后，如果我们正在检查的项目不在范围内，我们将重置所有状态变量并将它们视为我们的开始范围。

这样可以确保您只需要遍历一次集合，代价是事先对其进行排序（如果您可以确保它们首先排序到这一点，则无论如何都消除了这种需要）。希望有帮助，希望有更简单的方法。**

# asp.net - Npgsql.NpgsqlException：错误：42601：“where”或附近的语法错误

> ID：13915130
> 
> 赞同：2
> 
> 时间：2012-12-17T13:30:36.450
> 
> 标签：asp.net, web-services, postgresql, npgsql, postgresql-9.2

我在 asp.net 中有以下 web 服务

 `````
//setup profile
    [WebMethod]
    [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
    public void SetProfile(string userName, string firstName, string lastName, string imageUrl)
    {
        //create and open connection
        NpgsqlConnection profileConnection = new NpgsqlConnection(ConfigurationManager.ConnectionStrings["PrevueConnString"].ToString());
        profileConnection.Open();

        //create query and command
        string query = "INSERT into \"Users\" (\"FirstName\", \"LastName\", \"ImageUrl\") values(:fname, :lname, :imageUrl) where \"UserName\" = :user";
        NpgsqlCommand profileCommand = new NpgsqlCommand(query, profileConnection);

        profileCommand.Parameters.Add(new NpgsqlParameter("user", DbType.String));
        profileCommand.Parameters.Add(new NpgsqlParameter("fname", DbType.String));
        profileCommand.Parameters.Add(new NpgsqlParameter("lname", DbType.String));
        profileCommand.Parameters.Add(new NpgsqlParameter("imageUrl", DbType.String));

        profileCommand.Parameters[0].Value = userName;
        profileCommand.Parameters[1].Value = firstName;
        profileCommand.Parameters[2].Value = lastName;
        profileCommand.Parameters[3].Value = imageUrl;

        int result = profileCommand.ExecuteNonQuery();

        profileCommand.Dispose();
        profileConnection.Close();

        string json = new JavaScriptSerializer().Serialize(result);
        Context.Response.Clear();
        Context.Response.ContentType = "application/json";
        Context.Response.Flush();
        Context.Response.Write(json);
    } 
````  `在调用 Web 服务时，我收到以下错误：

Npgsql.NpgsqlException：错误：42601：“where”或附近的语法错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T14:28:10.223

我想我发现了错误，我将“Where”子句与插入命令一起使用，将其更改为更新，现在一切顺利... :) 感谢您的帮助..！！``

# java - 如何获取sql查询的元数据信息

> ID：13915134
> 
> 赞同：1
> 
> 时间：2012-12-17T13:31:08.357
> 
> 标签：java, jdbc, postgresql-9.1

我正在为 jdbc 使用 postgres 9.1 和 java 代码。

我可以`order by`在我的`sql query string`

我只想获取查询的`meta data`信息以查找查询是否有`order by`子句。如果有，那么在`order by clause`.

`Ex:` `order by age` `order by age, name` `order by age asc, name desc`

在这些示例中，我只想检索 order by 子句中指定的参数数量及其列名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T13:57:44.663

您可以通过将 SQL 查询分解为部分然后重新分配来实现。像

```
String sql="SELECT NAME,COMPANY,FNAME,AGE FROM COMP_DATA JOIN PERSONAL_DATA WHERE (1=1) AND FNAME='Vaibs' ORDER BY AGE"; 
```

在用 JAVA 编写时，请执行以下操作。将整个查询分解为字符串部分并像这样重新组合它。

```
String strSQL = "SELECT " + "NAME"+",COMPANY"+",FNAME"+",AGE" + "FROM "
        + getTableName1();  //getTableName1() return tablename

strSQL+="JOIN "+ getTable2()+"";//getTable2() return tablename as well

String strWhere = " WHERE (1=1) " + " and FNAME='" + fname+ "';

String orderBySQL = " Order by " + i_will_return_string_to_order_by();

 //return  AGE in our case

String FinalString= strSQL +strWhere +orderBySQL ; 
```

**SOP订购以获得您想要的东西。希望有帮助。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T15:00:14.180

如果您将查询作为字符串获取，您可以简单地解析它。

即找出 ORDER BY 存在

```
"SELECT * FROM MyTable ORDER BY SomeColumn".toLowerCase().indexOf("order by") // if it's return -1 query does not contains order by section otherwise it returns start index for first occurence "ORDER BY" in given string 
```

For more complex searching in string you may need to use [RegExp](http://en.wikipedia.org/wiki/Regular_expression)

# garbage-collection - 脚本使用 JVM 的堆内存或系统内存

> ID：13915136
> 
> 赞同：1
> 
> 时间：2012-12-17T13:31:14.830
> 
> 标签：garbage-collection, jvm

对于一些背景知识，据我所知，当我们启动一个 java 应用程序时，JVM 会为应用程序分配一个堆空间和一个堆栈。该堆用于存储应用程序创建的所有对象。

我的问题是，如果我从我的 java 代码中调用 Shell 脚本，脚本使用的内存是从 JVM 堆空间分配还是使用系统内存空间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T23:48:45.123

将使用**系统内存**。

Java 将调用一个`fork()` **系统调用，该系统调用将复制父内存**（当前正在使用的 JVM 内存）以便能够运行子内存（您尝试运行的命令）。

一般来说，当你执行一个进程时，你必须先`fork()`，然后`exec()`。分叉通过复制当前进程来创建一个子进程。然后，您调用`exec()`将“进程映像”更改为新的“进程映像”，实质上是在子进程中执行不同的代码。这就是您创建新进程以执行其他程序/脚本的方式。

看：

1.  [分叉 JVM](http://bryanmarty.com/blog/2012/01/14/forking-jvm/)
2.  [来自 Java 的 Shell 进程和臭名昭著的 OutOfMemory](http://thinkinginsoftware.blogspot.com/2011/09/shell-processes-from-java-and-infamous.html)

# python - 如何将 bz2 分配给 python 的 altinstall？

> ID：13915137
> 
> 赞同：5
> 
> 时间：2012-12-17T13:31:17.560
> 
> 标签：python, installation

我正在使用自动安装 python 2.4 的 redhat 5.8，但我使用的 python 包需要 python 2.6 或更高版本。所以，我在2.4旁边安装了python 2.7，以免踩到系统版本。

现在，我试图通过 pip 安装一个包，并得到以下错误：

```
CompressionError: bz2 module is not available 
```

但是，我确实在我的机器上安装了该模块，正如我这样做时服务器版本给出的那样：

```
[~]$ python -c "import bz2; print bz2.__doc__"
The python bz2 module provides a comprehensive interface for
the bz2 compression library. It implements a complete file
interface, one shot (de)compression functions, and types for
sequential (de)compression. 
```

和 2.7 这样的安装错误：

```
[~]$ python2.7 -c "import bz2; print bz2.__doc__"
 Traceback (most recent call last):
  File "<string>", line 1, in <module>
 ImportError: No module named bz2 
```

所以，我已经阅读了这些问题： [已经安装](https://stackoverflow.com/questions/812781/pythons-bz2-module-not-compiled-by-default)和这个[非常好的问题](https://stackoverflow.com/questions/8115280/importerror-no-module-named-bz2-for-python-2-7-2)，但这些问题似乎都不太合适。在第一种情况下，建议是安装缺少的部分，第二个问题是删除（或停止引用）额外的 python 安装。

我想要做的是放入符号链接或类似的符号链接，以便 python 2.7 安装知道 bz2 在哪里，以便我可以使用 pip 安装 python 包。

谢谢，乙

* * *

**编辑：更多信息**

因此，经过大量研究，python 2.5 中路径变量的建立方式似乎发生了巨大变化（可能是 red hat 没有更新的原因）。

因此，在 python 2.7 中，您可以通过在此文件夹中添加扩展名为 .pth 的文件来添加到 PYTHONPATH 变量：

```
/usr/local/lib/python2.7/site-packages/ 
```

我已经尝试了 2 种方法来让它正常工作。

首先，我只是将一些 python 2.4 路径文件提供给 2.7。这导致了不同类型的错误：

```
[~]$ python2.7 -c "import bz2; print bz2.__doc__"
Traceback (most recent call last):
  File "<string>", line 1, in <module>
ImportError: /usr/lib64/python2.4/lib-dynload/bz2.so: undefined symbol: Py_InitModule4 
```

所以，有一点。

我还尝试将路径指向 /usr/lib/ 中的 libbz2.so 文件，这导致了熟悉的错误：

```
[~]$ python2.7 -c "import bz2; print bz2.__doc__"
Traceback (most recent call last):
  File "<string>", line 1, in <module>
ImportError: No module named bz2 
```

我仍然很难过，但我觉得我快要接近了。

我真的可以使用具有更多设置编程环境经验的人的一些输入。只写代码我更舒服:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T16:54:34.657

昨天刚刚在同一个平台上做了这个并让它工作。这是我所做的：

设置`CFLAGS="-I/path/to/bz2/include"`和`LDFLAGS="-L/path/to/bz2/lib"`。确保 bz2 库路径在您的`LD_LIBRARY_PATH`. 不过，您可能需要执行`make distclean`and `configure && make && make install`。

如果失败，直接编辑 setup.py 并进行类似于以下的替换：

```
# Gustavo Niemeyer's bz2 module.
if (self.compiler.find_library_file(['/home/someuser/packages/libbz2/lib'], 'bz2')): #lib_dirs, 'bz2')): 
```

请注意，第二行末尾的注释部分是 setup.py 行的原始其余部分。

此外，我发现只需下载和构建最新版本的 bz2 并将上述所有内容都指向这比尝试让系统安装版本正常工作更容易。

无论如何，这绝对有效。我昨天做了:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T13:51:20.240

每当您使用系统安装的 Python 以外的 Python 时，我强烈建议您使用[http://pypi.python.org/pypi/virtualenv](http://pypi.python.org/pypi/virtualenv)。它使用自己的 python 副本为您设置一个“沙箱”，并重做所有路径等以指向新副本。然后，您可以使用 pip 安装所需的任何软件包。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T14:46:39.190

提供的其他答案很有用且有帮助，但这就是我让它工作的方式。

问题不在于 Python 没有找到文件（正如我所想的那样），它只是无法正确使用它们。因此，我进入了 bzip2 的 Makefile，找到了如下所示的行：

```
CFLAGS= -Wall -Winline -O2 -g $(BIGFILES) 
```

并将 -fPIC 添加到该行，如下所示：

```
CFLAGS=-fPIC -Wall -Winline -O2 -g $(BIGFILES) 
```

哇啦！它编译得很好。

# ios - 从视图中移除和释放类型对象

> ID：13915138
> 
> 赞同：0
> 
> 时间：2012-12-17T13:31:18.040
> 
> 标签：ios

我有一个名为 Post 的类，它是一个视图....我在我的主视图中添加了一些时间，如下所示：锁定如何从我的 self.view 中删除和释放这个对象....我只有这个类：

```
@interface Post : UIView{
      UILabel * label1;
      UILabel * label2;
      UILabel * label3;
}
@implementation Post
-(void)init
{
    self = [super init];
    if (self) {
         label1 = [[UILabel alloc]init];
         label2 = [[UILabel alloc]init];
         label3 = [[UILabel alloc]init];
         label1.frame = CGRect(10,10,100,30);
         label2.frame = CGRect(10,60,100,30);
         label3.frame = CGRect(10,110,100,30);

    }
    return self;
}
@end 
```

和这个主类控制器

```
@implementation HomeViewController
-(void)viewDidLoad{
     Post *p = [[Post alloc]init]
     p.frame = CGRect(0,0,0,320,460);
     p.backgroundColor = [UIColor blue];
     [self.view addsubview: p];
     [p release];

     Post *p2 = [[Post alloc]init]
     p2.frame = CGRect(0,0,0,320,460);
     p2.backgroundColor = [UIColor blue];
     [self.view addsubview:p2];
     [p2 release];

     Post *p3 = [[Post alloc]init]
     p3.frame = CGRect(0,0,0,320,460);
     p3.backgroundColor = [UIColor blue];
     [self.view addsubview:p3];
     [p3 release];

}
-(void)RemoveAllPosts
{
//How to remove and release all post from self.view???
}
@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T13:36:11.200

请尝试以下代码行。

```
for(UIView *viewInner in self.view.subviews) {
    if([viewInner isKindOfClass:[Post class]])
        [viewInner removeFromSuperview];
} 
```

# c# - 如何用 C# 替换 AST (ANTLR) 中的文本

> ID：13915139
> 
> 赞同：0
> 
> 时间：2012-12-17T13:31:22.613
> 
> 标签：c#, antlr3, abstract-syntax-tree

谁能帮我解决这个问题。我需要遍历抽象语法树来替换 C# 中的所有子文本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T14:07:53.400

我会说该[`CommonTree.Text`](https://github.com/antlr/antlr3/blob/48aec80520/runtime/CSharp3/Sources/Antlr3.Runtime/Tree/CommonTree.cs#L172)属性是为此目的而提供的，但是正如您所看到的，该方法实际上什么也没做。该[`CommonTreeAdaptor.SetText`](https://github.com/antlr/antlr3/blob/48aec80520/runtime/CSharp3/Sources/Antlr3.Runtime/Tree/BaseTreeAdaptor.cs#L303)方法（继承自`BaseTreeAdaptor`至少抛出一个`NotSupportedException`.

您需要做的是获取`IToken`与树节点相关联的内容，可能是通过调用[`CommonTreeAdaptor.GetToken`](https://github.com/antlr/antlr3/blob/48aec80520/runtime/CSharp3/Sources/Antlr3.Runtime/Tree/CommonTreeAdaptor.cs). 然后，您可以设置[`IToken.Text`](https://github.com/antlr/antlr3/blob/48aec80520/runtime/CSharp3/Sources/Antlr3.Runtime/IToken.cs#L42)令牌的属性，至少对于[`CommonToken`已实现](https://github.com/antlr/antlr3/blob/48aec80520/runtime/CSharp3/Sources/Antlr3.Runtime/CommonToken.cs#L124)。

# java - 为什么这里不需要显式转换？

> ID：13915143
> 
> 赞同：11
> 
> 时间：2012-12-17T13:31:38.493
> 
> 标签：java, methods, casting, return-type

```
class MyClass {
    void myMethod(byte b) {
        System.out.print("myMethod1");
    }

    public static void main(String [] args) {
        MyClass me = new MyClass();
        me.myMethod(12);
    }
} 
```

我知道参数`myMethod()`是`int`文字，参数`b`是字节类型，这段代码会产生编译时错误。（可以通过对参数使用显式字节转换来避免`myMethod((byte)12)`：）

```
class MyClass{
    byte myMethod() {
        return 12;
    }

    public static void main(String [ ] args) {
        MyClass me = new MyClass();
        me.myMethod();
    }
} 
```

在经历了这个之后，我认为上面的代码也会产生编译时错误，考虑到 12 是一个`int`字面量并且返回类型`myMethod()`是字节。但是不会发生这样的错误。（不需要明确的演员表`return (byte)12;`：）

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-17T13:38:39.457

在这种情况下，Java 支持缩小范围。来自关于*赋值转换的*[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.2-300-A)：

 *> 如果变量的类型是 、 或 ，并且常量表达式的值可以用变量的类型表示，则可以使用窄化原`byte`语`short`转换`char`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T13:34:07.477

来自[Java 原始数据类型参考](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)：

> byte：byte 数据类型是一个 8 位有符号二进制补码整数。它的最小值为 -128，最大值为 127（含）。

尝试返回 128 :))

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T13:35:44.197

`byte b = 4`只要值在范围内，这将起作用，但是如果您尝试类似的`byte b = 2000`操作，则会出现编译器错误，因为它超出了范围。`12`在范围内，因此您不会出错。*

# javascript - 类别/子类别/关键字的动态多选

> ID：13915144
> 
> 赞同：0
> 
> 时间：2012-12-17T13:31:42.667
> 
> 标签：javascript, jquery, jquery-selectors, jquery-chosen

我现在已经为此奋斗了几个星期，但无法让它发挥作用。在我的数据库中，我为类别子类别和关键字继承了单个表。它们通过 parent_id 处于树结构中。

所选脚本似乎适用于每个单独的列表。但我无法弄清楚如何动态处理父子之间的关系，因此在子类别列表中将提供仅属于我预先选择的类别（一个或几个）的可用选项。

这是我的脚本中的内容。

```
jQuery(function($){
$(".chosen-input").chosen().trigger("liszt:updated");
$(".schosen-input").chosen().change(function(){
  var subcategories = $("companies_categories").children('select:visible').val();
  });
$(".kchosen-input").chosen().change(function(){
  var keywords = $("companies_subcategories").children('select:visible').val();
  });
}); 
```

我的表格看起来不错。

![这是我的表格](../Images/0c17f9520f2037c89eeaf5c1c1a29fc7.png)

选择的脚本有效。

![在此处输入图像描述](../Images/55aa36195378291c263aa830dd256a71.png)

**过滤向我显示子类别的整个列表。但我只需要以前预选类别的孩子。**

![在此处输入图像描述](../Images/670a91d990f38535f4c1b629d5a60a75.png)

与关键字相同。

![在此处输入图像描述](../Images/5b08535560d1b5400dcc63260a12c025.png)

HTML

```
 <fieldset class="inputs"><legend><span>Categories</span></legend><ol>
 <li class="select input optional" id="company_categories_input">
<input name="company[category_ids][]" type="hidden" value="" />
<label class=" label" for="company_category_ids">Categories</label>
<input name="company[category_ids][]" type="hidden" value="" />
<select class="chosen-input" id="company_category_ids" multiple="multiple" 
name="company[category_ids][]"  style="width: 700px;">

<option value="50">Apparel &amp; Luggage</option>
<option value="126">Automotive, RV, Cycling &amp; Other Transportation</option>
<option value="180">Baby, Toddler &amp; Children</option>
<option value="208">Beauty &amp; Personal Care</option>
<option value="288">Chemicals</option>
<option value="331">Arts, Crafts, Hobbies &amp; Fabrics</option>
<option value="392">Electronics &amp; Computers</option>
30 More records
 <option value="461">Fitness &amp; Sports</option></select></li>

<li class="select input optional" id="company_subcategories_input">
<input name="company[subcategory_ids][]" type="hidden" value="" />
<label class=" label" for="company_subcategory_ids">Subcategories</label>
<input name="company[subcategory_ids][]" type="hidden" value="" />
<select class="schosen-input" id="company_subcategory_ids" multiple="multiple"
name="company[subcategory_ids][]" style="width: 700px;">

<option value="13">Small Kitchen Appliances</option>
<option value="24">Laundry &amp; Garment Care</option>
<option value="28">Home Appliances</option>
<option value="36">Commercial Grade Appliances</option>
<option value="46">Appliance Cleaners</option>
Few more hundreds records
<option value="1811">Management of Bank Holding Companies &amp; 
Corporate Offices</option></select></li>

<li class="select input optional" id="company_keywords_input">
<input name="company[keyword_ids][]" type="hidden" value="" />
<label class=" label" for="company_keyword_ids">Keywords</label>
<input name="company[keyword_ids][]" type="hidden" value="" />
<select class="schosen-input" id="company_keyword_ids" multiple="multiple"
name="company[keyword_ids][]" style="width: 700px;">

<option value="5">Ranges - Range Hoods</option>
<option value="6">Ovens - Warming Drawers</option>
<option value="7">Stoves - Cooktops</option>
<option value="8">Dishwashers</option>
<option value="9">Disposers - Trash Compactors</option>
Over 1000 more records
<option value="1179">Soil Amendment - Soil Preperation - Composting - 
Garden Care - Nursery Products</option></select>
</li></ol></fieldset> 
```

好像我错过了很多。但不知道从哪里开始。

# sockets - p2p 套接字表

> ID：13915146
> 
> 赞同：-1
> 
> 时间：2012-12-17T13:31:56.497
> 
> 标签：sockets, tcp, p2p

我正在从由 2 个主机组成的网络创建一个套接字表。他们有一个 p2p 连接并且他们正在使用 tcp 协议。我是否必须在两个主机中创建一个欢迎套接字（因为它们就像服务器一样）？每个主机都有一个接收套接字和一个发送套接字？或者只有一个用于发送/接收就可以了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T13:40:37.007

每个主机都需要一个侦听套接字，它将接受新的连接。它还需要一个套接字用于每个入站 TCP 连接（`accept`在接受入站连接时从调用返回）和一个用于每个出站 TCP 连接（`socket`在调用以建立出站连接之前从调用返回`connect`）。

# entity-framework - 使用标准显式加载子导航属性

> ID：13915148
> 
> 赞同：2
> 
> 时间：2012-12-17T13:32:07.730
> 
> 标签：entity-framework, entity, criteria, dbcontext, navigation-properties

**在 EF5 中使用 DBContext - 在基于日期范围等条件进行过滤和部分加载之后。**

我正在尝试生成一个完整的图形或对象树 -`Persons->Events where the only Events that are included are within a date range.` *所有这些同时保留通过以下内容获得的标准更改跟踪：*

```
 Dim Repository As Models.personRepository = New Models.personRepository

 Private Sub LoadData()
    Dim personViewModelViewSource As System.Windows.Data.CollectionViewSource = CType(Me.FindResource("personViewModelViewSource"), System.Windows.Data.CollectionViewSource)
    Repository.endDate = EndDate.SelectedDate
    Repository.startDate = StartDate.SelectedDate
    personViewModelViewSource.Source = Repository.collectionOfpersons
 End Sub 
```

列表框和数据网格都绑定为适当的数据源。POCO 模板已修改为将 INotifyProperty 事件放在导航属性类 Events 中。

我已经为此奋斗了好几天，并且无论是延迟加载还是显式加载都无法过滤。*在大量阅读博客/章节之后，我意识到与包含相关的相当不真实的限制；*相反，我正在尝试显式加载。我正在使用 DBContext 书顺便说一句。

无法从数据库中只取回事件数据的子集是 100% 的交易破坏者，因为每个人可能有数十万个事件。**对我或我的老板来说，Entity Framework 没有使这个功能相当明显是没有意义的——我们是否遗漏了什么？**

我留下了注释代码来尝试说明我尝试过的一些路径。类本身就是该方法所属的存储库。我将进一步编辑这个问题，以澄清我尝试了多少条路线，因为它已经很多了。View 使用存储库层和 ViewModel，因此 XAML 背后的代码相当少。

提前寻求任何帮助，谢谢！

```
 Public Overridable ReadOnly Property AllFiltered(startdate As Date, enddate As Date) As ObservableCollection(Of person) Implements IpersonRepository.AllFiltered
        Get
            Dim uow = New UnitOfWork
            context = uow.Context
            Dim personQuery = context.persons.Include(Function(p) p.events).AsQueryable.Where(Function(x) x.personID = 10).FirstOrDefault

            'Dim eventQuery = From e In context.Notes
            '                 Where e.eventDateTime >= startdate And e.eventDateTime <= enddate
            '                 Select e

            'Dim personQuery As person = From r In context.persons
            '                   From e In eventQuery
            '                   Where r.personID = e.personID
            '                   Select r, e

            Dim singleperson = personQuery

            'For Each r As person In personQuery
            '    persons.Add(r)
            'Next

            '   context.Entry(eventQuery).Collection()
            ' context.Entry(personQuery).Reference(personQuery).Load()

            context.Entry(singleperson).Collection(Function(d) d.events).Query().Where(Function(x) x.eventDateTime > startdate And x.eventDateTime < enddate).Load()

            Return context.persons.Local
        End Get
    End Property 
```

注意：我通过 PostSharp 使用日志记录/异常处理，而不是污染代码。

以下是我使用以前的路径生成的一些错误。

实体类型 DbQuery`1 不是当前上下文模型的一部分。

包含路径表达式必须引用在类型上定义的导航属性。对引用导航属性使用虚线路径，对集合导航属性使用 Select 运算符。

参数名称：路径

无法将“System.Data.Entity.Infrastructure.DbQuery `1[VB$AnonymousType_0`2 [Entity.Person,Entity.Notes]]”类型的对象转换为“System.Collections.ObjectModel.ObservableCollection`1[Entity.Person]”。

更新：我尝试过的另一条路线，仍然无法让它飞行：

```
Private Property _collectionOfPersons As ObservableCollection(Of Person)

Public ReadOnly Property collectionOfPersons As ObservableCollection(Of Person)
        Get
            For Each Person In context.Persons
                _collectionOfPersons.Add(ReturnSinglePerson(startDate, endDate, Person.PersonID))
            Next
            Return _collectionOfPersons.Where(Function(x) x.events.Where(Function(e)         e.eventDateTime > startDate And e.eventDateTime < endDate))
        End Get
    End Property

Public Overridable ReadOnly Property SinglePerson(startdate As Date, enddate As Date) As ObservableCollection(Of Person) Implements IPersonRepository.AllFiltered
        Get

            Dim PersonQuery = context.Persons.Include(Function(p) p.events).AsQueryable.Where(Function(x) x.PersonID = 10).Select(Function(x) x).FirstOrDefault

            Dim Person = PersonQuery

            context.Entry(Person).Collection(Function(d) d.events).Query().Where(Function(x) x.eventDateTime > startdate And x.eventDateTime < enddate).Load()

            Return context.Persons.Local
        End Get
End Property

Public Function ReturnSinglePerson(startdate As Date, enddate As Date, id As Integer)

        Dim PersonQuery = context.Persons.Include(Function(p) p.events).AsQueryable.Where(Function(x) x.PersonID = id).Select(Function(x) x).FirstOrDefault
        Dim Person = PersonQuery
        Return Person

End Function 
```

另一个镜头： Public Overridable ReadOnly Property FilteredPersons(startdate As Date, enddate As Date) As ObservableCollection(Of Person) Implements IPersonRepository.AllFiltered Get context.Persons.Load() Dim DateCriteria = Function(e) e.events.Where(Function( d) d.eventDateTime > startdate 和 d.eventDateTime < enddate)

```
 Dim Res = New ObservableCollection(Of Person)
            For Each Person In context.Persons.Local.Select(Function(x) x).Where(DateCriteria)
                Res.Add(Person)
            Next

            Return Res
        End Get
    End Property 
```

给出：

未找到类型“ObservableCollection（Of DailyNotes）”的公共成员“Where”。

非常接近，只有我在列表框中得到了很多重复的名字——但是导航通过并且日期标准有效。

```
 <ExceptionAspect>
    Public Overridable ReadOnly Property FilteredPersons(startdate As Date, enddate As Date) As ObservableCollection(Of Person) Implements IPersonRepository.AllFiltered
        Get
            context.Persons.Load()

            Dim test = From r In context.Persons
                    From e In context.Notes
                    Where e.eventDateTime > startdate And e.eventDateTime < enddate
                    Join rr In context.Persons On e.PersonID Equals rr.PersonID
                    Select r, e

            Dim Res = New ObservableCollection(Of Person)
            For Each Person In test
                Res.Add(Person.r)
            Next

            Return Res
        End Get
    End Property 
```

不要尝试这个:)。它只选择子属性。

```
 Public ReadOnly Property collectionOfResidents As ObservableCollection(Of resident)
        Get
            For Each resident In context.residents
                _collectionOfResidents.Add(ReturnSingleResident(startDate, endDate, resident.residentID))
            Next
            Return _collectionOfResidents.Select(Function(x) x.events.Where(Function(e) e.eventDateTime > startDate And e.eventDateTime < endDate))
        End Get
    End Property 
```

我希望将我的其他尝试添加到这个问题可能会提示其他答案并帮助其他人看到他们在第一次解决这个问题时可以进入的圈子！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T14:51:41.193

您可以使用该`Select`子句进行比 with 更好的控制`Include`

像这样的东西：

```
context
  .Persons
  .Where( ... some predicate on Person ... )
  .Select( o => new
    {
      Person = o,
      Events = o.Events.Where( ... some predicate on Event ... )
    }
  )
; 
```

这会将两个谓词转换为在数据库服务器上执行的 SQL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T23:58:47.920

好吧，在今晚对匿名类型进行了很多摆弄和误解之后，我想我成功了。Nicholas 的回答只需要在 VB 中完成，这花了我一段时间——我以前没有使用过匿名类型。

这在我的存储库层中似乎可以正常工作：

```
 <ExceptionAspect>
    Public Overridable ReadOnly Property FilteredPersons(startdate As Date, enddate As Date) As ObservableCollection(Of Person) Implements IPersonRepository.AllFiltered
        Get
            context.Persons.Load()

            Dim test = context.Persons.Where(Function(r) r.PersonActive).Select(Function(o) New With { _
                 .Person = o, _
                 .events = o.events.Where(Function(e) e.eventDateTime > startdate) _
            })

            Dim PersonList= New ObservableCollection(Of Person)

            For Each t In test
               PersonList.Add(t.person)
            Next

            Return PersonList
        End Get
    End Property 
```

wpf 视图中的关键更新/保存完好无损，我真的很高兴并感谢 Nicholas 在这里提供的帮助（以及耐心......重新：cartesion 产品）。所以谢谢。我希望这对其他人有帮助！

# groovy - 如何将字符串转换为二维数组

> ID：13915152
> 
> 赞同：0
> 
> 时间：2012-12-17T13:32:20.817
> 
> 标签：groovy

我怎样才能转换这样的字符串

```
'[["dfd","ewer","errr","ggg"],["yyy","ttt","rrr","ggg"]]' 
```

进入列表？

我不想用`GroovyShell().evaluate()`

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T13:35:24.853

你可以`Eval.me`这样使用：

```
String input = '[["dfd","ewer","errr","ggg"],["yyy","ttt","rrr","ggg"]]'

List output = Eval.me( input )

assert output.size() == 2
assert output*.size() == [ 4, 4 ] 
```

（当然，[在幕后](https://github.com/groovy/groovy-core/blob/master/src/main/groovy/util/Eval.java#L64)，Groovy 只是调用`GroovyShell.evaluate()`）

然后对于纯 Groovy，有`JsonParser`：

```
output = new groovy.json.JsonSlurper().parseText( input ) 
```

# xml - wso2 esb 文件处理示例 smooks csv parser 第一行包含有效负载命名空间

> ID：13915159
> 
> 赞同：5
> 
> 时间：2012-12-17T13:32:40.537
> 
> 标签：xml, csv, wso2, esb, smooks

涉足 WSO2 ESB 示例[http://wso2.org/library/articles/2011/01/wso2-esb-example-file-processing](http://wso2.org/library/articles/2011/01/wso2-esb-example-file-processing)但遇到一个问题，当一个简单的 csv 文件

```
name0,value0
name1,value1
name2,value2
name3,value3 
```

由 smooks 使用此配置解析

```
<smooks-resource-list xmlns="http://www.milyn.org/xsd/smooks-1.1.xsd" xmlns:csv="http://www.milyn.org/xsd/smooks/csv-1.1.xsd">
<csv:reader fields="name,value" />
</smooks-resource-list> 
```

导致大部分正确的输出，但第一行包含不正确的有效负载命名空间

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
<soapenv:Body>
    <text xmlns="http://ws.apache.org/commons/ns/payload">name0,value0
name1,value1
name2,value2
name3,value3</text>
</soapenv:Body>
</soapenv:Envelope> 
```

因此，当读取第一个 name0 值时，它包含的也是不正确的。

然后 Smooks 将其转换为

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
<soapenv:Body>
    <csv-set>
        <csv-record number="1">
            <name>&lt;?xml version='1.0' encoding='utf-8'?>&lt;text xmlns="http://ws.apache.org/commons/ns/payload">name0</name>
            <value>value0</value>
        </csv-record>
        <csv-record number="2">
            <name>name1</name>
            <value>value1</value>
        </csv-record>
        <csv-record number="3">
            <name>name2</name>
            <value>value2</value>
        </csv-record>
        <csv-record number="4">
            <name>name3</name>
            <value>value3&lt;/text></value>
        </csv-record>
    </csv-set>
</soapenv:Body>
</soapenv:Envelope> 
```

那么 Smooks 是否在做所有被问到的事情，因为输入包括最后一个？但是，它理解的元素数计为 4，因此 csv 似乎不应该有标题行。我可以通过包含标题行来解决（在一定程度上），但元素计数不正确。我可以通过在 csv 的最后一行包含一个回车来解决结束关闭的问题。

我该如何解决这个问题？一年前我发现另一个线程问同样的问题但没有答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T07:03:30.487

我现在已经整理好了。在我的 smooks 标签中

```
<smooks xmlns="http://ws.apache.org/ns/synapse" config-key="conf:/smooks-config.xml">
   <input type="text"/>
   <output type="xml"/>
</smooks> 
```

我将第一个输入元素设置为 xml。更改为文本解决了这个问题。（在 WSO2 的 GUI 编辑器中，它默认具有这些元素，而本教程根本没有这些元素）。

# windows - 为什么在 MouseMove 事件中调用 WindowFromPoint 时窗体的系统按钮会突出显示？

> ID：13915160
> 
> 赞同：4
> 
> 时间：2012-12-17T13:32:42.833
> 
> 标签：windows, delphi, delphi-xe2

在 TWinControl 的 MouseMove 事件中调用 WindowFromPoint 会在传递给 WindowFromPoint 的点处引发 MouseOver 事件。这是一个 VCL 错误吗？有人知道是否有解决方法吗？

![在此处输入图像描述](../Images/79f735dcae16d496075e42b5f5139589.png)

这是演示代码：

```
unit Unit7;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.StdCtrls;

type
  TForm7 = class(TForm)
    Button1: TButton;
    procedure Button1MouseMove(Sender: TObject; Shift: TShiftState; X,
      Y: Integer);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form7: TForm7;

implementation

{$R *.dfm}

procedure TForm7.Button1MouseMove(Sender: TObject; Shift: TShiftState; X,
  Y: Integer);
begin
  WindowFromPoint(Point(Mouse.CursorPos.X, Mouse.CursorPos.Y - 40));
end;

end. 
```

DFM：

```
object Form7: TForm7
  Left = 0
  Top = 0
  Caption = 'Form7'
  ClientHeight = 40
  ClientWidth = 116
  Color = clBtnFace
  Font.Charset = DEFAULT_CHARSET
  Font.Color = clWindowText
  Font.Height = -11
  Font.Name = 'Tahoma'
  Font.Style = []
  OldCreateOrder = False
  PixelsPerInch = 96
  TextHeight = 13
  object Button1: TButton
    Left = 24
    Top = 7
    Width = 75
    Height = 25
    Caption = 'Button1'
    TabOrder = 0
    OnMouseMove = Button1MouseMove
  end
end 
```

我在 Windows 7 Pro 64bit 上使用 Delphi XE2。我也可以使用 Delphi 7 进行复制。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T23:47:56.977

我用一个最简单的 C++ 应用程序对此进行了测试，并观察到了相同的行为，这不是 VCL 错误（正如 David 在评论中提到的那样）。顺便说一句，它与鼠标移动无关，只要您调用`WindowFromPoint`传递标题按钮的坐标，就会出现这种特殊性。它只发生在属于调用该函数的线程的窗口上。

因此，对于解决方法，您可以`WindowFromPoint`从线程调用。下面的简单示例，不是真正的后台线程，因为代码等待它完成：

```
type
  TGetWndThread = class(TThread)
  private
    FPoint: TPoint;
  protected
    procedure Execute; override;
    constructor Create(AOwner: TComponent; Point: TPoint);
  end;

constructor TGetWndThread.Create(AOwner: TComponent; Point: TPoint);
begin
  FPoint := Point;
  inherited Create;
end;

procedure TGetWndThread.Execute;
begin
  ReturnValue := WindowFromPoint(FPoint);
end;

..

var
  Wnd: HWND;
  Thr: TGetWndThread;
begin
  Thr := TGetWndThread.Create(nil, Point(Mouse.CursorPos.X, Mouse.CursorPos.Y - 40));
  Wnd := Thr.WaitFor;
  Thr.Free;
  .. // use Wnd 
```

测试显示错误的条件（操作系统，主题..）并使代码有条件以避免不必要的开销是有意义的。

# mysql - 在 Orbeon Forms 中将数据从 MySQL 迁移到 eXist

> ID：13915161
> 
> 赞同：1
> 
> 时间：2012-12-17T13:32:43.493
> 
> 标签：mysql, orbeon, exist-db

由于 Orbeon Forms 中 MySQL 持久层的性能不佳，我们需要将数据从 MySQL 迁移到 eXist 数据库。我们该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T02:30:44.180

目前，Orbeon Forms 不附带一个“迁移工具”，可以让您在数据库之间移动数据。您可以使用您最熟悉的任何语言进行编程，访问[Orbeon 的持久性 API](http://wiki.orbeon.com/forms/doc/developer-guide/form-runner/persistence-api)，但如果您有 50 个表单，并且这是一次性操作，无论听起来多么无聊，只执行 50 个副本可能会更快-粘贴。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-21T22:51:27.407

如果您使用 Form Builder 来构建您的表单，您可以使用的另一个技巧是在持久性提供程序之间切换。由于 Orbeon Forms 支持动态资源重新加载，因此您无需重新启动即可切换提供程序。

1.  配置您的原始提供程序 (properties-local.xml)
2.  在表单生成器中打开表单
3.  配置您的新提供商
4.  在表单生成器中，单击保存

我发现这种技术很有用，尽管我只需要为一个表单定义做这件事。

有关持久性提供程序的文档，请参见[http://wiki.orbeon.com/forms/doc/developer-guide/form-runner/oracle-and-mysql-persistence-layers](http://wiki.orbeon.com/forms/doc/developer-guide/form-runner/oracle-and-mysql-persistence-layers)。

# c# - 在循环中保存文本框的值（asp.net网页）

> ID：13915169
> 
> 赞同：0
> 
> 时间：2012-12-17T13:33:16.370
> 
> 标签：c#, asp.net, controls, web-controls

我一直在尝试遵循一些教程和代码示例，但有些东西并没有像我预期的那样工作。

我在网页上有一系列文本框，我需要遍历每个文本框并将其值保存到数据库中。页面上的文本框数量会有所不同。我从数据库中加载它们。它们都被添加到一个表对象中。

```
TableCell cellb = new TableCell();
TextBox txtAnswer = new TextBox();
txtAnswer.TextMode = TextBoxMode.MultiLine;
txtAnswer.Rows = 2;
txtAnswer.ID = "field_" + dataRow["fieldID"].ToString();
txtAnswer.Text = "answer"; //this will be got from the database

cellb.Controls.Add(txtAnswer); 
```

以便将文本框添加到表格行。然后我有一个保存按钮，其中包含以下代码

```
foreach (Control c in Page.Controls)
{
    foreach (Control childc in c.Controls) 
    {
        if (childc is TextBox)
        {
            TextBox tmpText = (TextBox)childc;
            tmpField = tmpText.ID.Split('_');
            fieldID = Convert.ToInt32(tmpField[1]);
            //save value to the database (eventually)
            debug.InnerHtml += tmpText.Text; //this just outputs the values for now
        }
    }
} 
```

所以上面应该循环遍历所有页面控件并找到添加到 page_load 上的文本字段。但是，我现在想知道是否是因为它们不存在。所以当我保存页面时，它不知道控件。我可以看到表格控件，但里面什么都没有……有什么想法吗？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T13:39:57.590

**必须在每个页面请求上添加动态控件**。最好在`Init`活动期间。当您遍历控件时，听起来它们还没有（再次）添加。

此外，如果您知道您的 TextBoxes 在特定控件中，您可能应该首先找到该控件，然后使用您正在使用的相同方法迭代控件。造成这种情况的两个原因是：效率，而且，在您的代码中，您只需从页面控件向下搜索两个级别。这可能没问题，但它包括不包含任何这些文本框的其他控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T13:39:18.420

为什么不使用 Gridview 控件，然后使用 Texbox 制作自定义模板。然后在页面加载时，您可以添加所需的文本框，然后循环网格视图并保存数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T14:41:37.957

第一件事。确保您没有在内部创建控件`if (!isPostBack){}`- 因为它们需要在每次回发时重新创建。

其次，我不相信您的循环会找到所有控件，因为它只会真正穿过第一级。

理想情况下，您应该递归搜索控件。

这是我使用的递归方法 - 这将有助于查找给定 ID 的所有控件。

```
 /// <summary> 
    /// Finds a Control recursively. Note finds the first match that exists 
    /// </summary> 
    /// <param name="ContainerCtl">Should be the lowest container in the heirarchy, for eg dont choose Master page if you can pick the specific panel</param> 
    /// <param name="IdToFind">ID of the control you are looking for</param> 
    /// <returns>the control if found else null</returns> 
    public static Control FindControlRecursive(Control Root, string Id)
    {
        if (Root.ID == Id) { return Root; }

        foreach (Control Ctl in Root.Controls)
        {
            Control FoundCtl = FindControlRecursive(Ctl, Id);
            if (FoundCtl != null) { return FoundCtl; }
        }
        return null;
    } 
```

现在，我要做的是：

创建`TextBox`'s 时，将所有`ID`'s 存储在`Array`. 然后当你需要访问它们时，循环遍历`Array`每个条目，调用上面的方法。这将返回`TextBox`你需要的。

# ios - 从 - NSURLConnection::initWithRequest:delegate:startImmediately 接收非阻塞队列上的数据：

> ID：13915179
> 
> 赞同：0
> 
> 时间：2012-12-17T13:33:44.653
> 
> 标签：ios, nsurlconnection

我继承了一个使用`NSURLConnection`with的代码`initWithRequest:delegate:startImmediately:`，因此使用应用程序委托接收响应数据。似乎该方法异步工作，但在主线程中，因为我的 UI 被阻塞了。

所以我的问题是我可以让响应在非阻塞队列上执行，但继续使用`initWithRequest:delegate:startImmediately:`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T13:43:08.780

1.  传`NO`为`startImmediately:`论据。

2.  创建一个`NSOperationQueue`并调用`setDelegateQueue:`连接，将其传递给队列。

3.  手动调用`start`连接。

# compiler-construction - 如何用 T 形图解释重新托管和重新定位？

> ID：13915185
> 
> 赞同：1
> 
> 时间：2012-12-17T13:34:05.013
> 
> 标签：compiler-construction, portability

我目前正在学习有关编译器的考试，并发现了以下问题：

> （第 3 页）**引导**：解释重新*托管*和*重新定位*的概念。使用 T 图。

据我了解，重新托管意味着为另一个平台（主机）编译编译器，所以它应该是这样的：

```
-------------
| a       b |     --------------
-----   -----     | a        b |
    | c |-------------    ------
    -----| c       x || x |
         -----   ----------
             | ? |
             ----- 
```

但它是正确的吗？是什么`retargeting`意思？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-15T23:00:42.297

`Retargeting`是指让编译器为不同的 CPU 或指令集生成代码。
不同的 CPU 将是 X86 与 PowerPC。
不同的指令集是 ARM 与 THUMB 或 x86 与 x86-64（相同的 CPU，但模式不同）。

`Rehosting`意味着在与编译代码不同的机器上运行代码。
新机器通常具有相同的架构。
重新托管不一定是微不足道的，因为例如文件系统在编译器系统上可能看起来不同。

见：[http ://www.cs.southern.edu/halterman/Courses/Spring2009/425/Slides/ch11.pdf](http://www.cs.southern.edu/halterman/Courses/Spring2009/425/Slides/ch11.pdf)

> 可重定位
> 性 轻松修改以生成不同目标语言的代码
> 
> Rehostability
> 轻松修改以在不同的机器上运行

这两个术语通常在术语中组合在一起`portability`。
可移植的代码不依赖于架构*（目标）*，也不依赖于特定机器*（主机）*的设置。

# java - 调用 session.getWorkspace().getQuery() 会导致错误

> ID：13915190
> 
> 赞同：1
> 
> 时间：2012-12-17T13:34:22.670
> 
> 标签：java, osgi, jackrabbit, jcr, sling

我正在实现一个包含搜索服务（AbstractService）的 osgi 包。该服务包含一个获取内容节点列表作为 NodeIterator 对象的方法。

```
 public NodeIterator getNodes(Session session, String query, long count) throws RepositoryException{
            NodeIterator nodeIterator = null;

            QueryManager queryManager = session.getWorkspace().getQueryManager();

            Query qry = queryManager.createQuery(query, Query.SQL);
            qry.setLimit(count);
            QueryResult result = qry.execute();
            nodeIterator = result.getNodes();

        return nodeIterator;
    } 
```

我有一个错误在线：

```
QueryManager queryManager = session.getWorkspace().getQueryManager(); 
```

错误

```
org.apache.sling.api.SlingException: An exception occurred processing JSP page /apps/IMEApp/Content/Category/../../General/html_marketCommentary.jsp at line 49
    at org.apache.sling.scripting.jsp.jasper.servlet.JspServletWrapper.handleJspExceptionInternal(JspServletWrapper.java:571)
    at org.apache.sling.scripting.jsp.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:496)
    at org.apache.sling.scripting.jsp.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:442)
    at org.apache.sling.scripting.jsp.JspServletWrapperAdapter.service(JspServletWrapperAdapter.java:59)
    at org.apache.sling.scripting.jsp.JspScriptEngineFactory.callJsp(JspScriptEngineFactory.java:173)
    at org.apache.sling.scripting.jsp.JspScriptEngineFactory.access$100(JspScriptEngineFactory.java:84)
    at org.apache.sling.scripting.jsp.JspScriptEngineFactory$JspScriptEngine.eval(JspScriptEngineFactory.java:388)
    at org.apache.sling.scripting.core.impl.DefaultSlingScript.call(DefaultSlingScript.java:358)
    at org.apache.sling.scripting.core.impl.DefaultSlingScript.eval(DefaultSlingScript.java:170)
    at org.apache.sling.scripting.core.impl.DefaultSlingScript.service(DefaultSlingScript.java:456)
    at org.apache.sling.engine.impl.request.RequestData.service(RequestData.java:529)
    at org.apache.sling.engine.impl.SlingRequestProcessorImpl.processComponent(SlingRequestProcessorImpl.java:274)
    at org.apache.sling.engine.impl.filter.RequestSlingFilterChain.render(RequestSlingFilterChain.java:49)
    at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:64)
    at org.apache.sling.engine.impl.debug.RequestProgressTrackerLogFilter.doFilter(RequestProgressTrackerLogFilter.java:59)
    at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:60)
    at org.apache.sling.engine.impl.SlingRequestProcessorImpl.processRequest(SlingRequestProcessorImpl.java:161)
    at org.apache.sling.engine.impl.SlingMainServlet.service(SlingMainServlet.java:183)
    at org.apache.felix.http.base.internal.handler.ServletHandler.doHandle(ServletHandler.java:96)
    at org.apache.felix.http.base.internal.handler.ServletHandler.handle(ServletHandler.java:79)
    at org.apache.felix.http.base.internal.dispatch.ServletPipeline.handle(ServletPipeline.java:42)
    at org.apache.felix.http.base.internal.dispatch.InvocationFilterChain.doFilter(InvocationFilterChain.java:49)
    at org.apache.felix.http.base.internal.dispatch.HttpFilterChain.doFilter(HttpFilterChain.java:33)
    at org.apache.felix.http.base.internal.dispatch.FilterPipeline.dispatch(FilterPipeline.java:48)
    at org.apache.felix.http.base.internal.dispatch.Dispatcher.dispatch(Dispatcher.java:39)
    at org.apache.felix.http.base.internal.DispatcherServlet.service(DispatcherServlet.java:67)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:390)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:926)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:549)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:410)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)
Caused by: java.lang.LinkageError: loader constraint violation: when resolving interface method "javax.jcr.Workspace.getQueryManager()Ljavax/jcr/query/QueryManager;" the class loader (instance of org/apache/felix/framework/ModuleImpl$ModuleClassLoaderJava5) of the current class, org/dapa/ime/service/AbstractService, and the class loader (instance of org/apache/felix/framework/ModuleImpl$ModuleClassLoaderJava5) for resolved class, javax/jcr/Workspace, have different Class objects for the type javax/jcr/query/QueryManager used in the signature
    at org.dapa.ime.service.AbstractService.getNodes(AbstractService.java:43)
    at org.dapa.ime.service.NewsService.getListOfNews(NewsService.java:35)
    at org.dapa.ime.service.NewsService.getListOfTopNews(NewsService.java:57)
    at org.apache.jsp.apps.IMEApp.Content.Category.html_jsp._jspService(html_jsp.java:1995)
    at org.apache.sling.scripting.jsp.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
    at org.apache.sling.scripting.jsp.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:419)
    ... 37 more 
```

我无法理解由部分引起的：

```
Caused by: java.lang.LinkageError: loader constraint violation: when resolving interface method "javax.jcr.Workspace.getQueryManager()Ljavax/jcr/query/QueryManager;" the class loader (instance of org/apache/felix/framework/ModuleImpl$ModuleClassLoaderJava5) of the current class, org/dapa/ime/service/AbstractService, and the class loader (instance of org/apache/felix/framework/ModuleImpl$ModuleClassLoaderJava5) for resolved class, javax/jcr/Workspace, have different Class objects for the type javax/jcr/query/QueryManager used in the signature 
```

任何身体都可以帮忙吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T15:55:44.507

## 什么？

这种A`LinkageError`通常是由不完整的 OSGi 元数据引起的：在当前情况下，您允许两个捆绑包（一个正在加载`AbstractService`，一个正在加载`Workspace`）具有不同版本的`QueryManager`.

## 现在？

您的系统中有太多的副本`QueryManager`，您需要删除除一个以外的所有副本，或者确保选择正确的副本。第一个最有可能发生，第二个只有在您手动构建捆绑包时才可能发生。

### 一统`QueryManager`天下

检查多个捆绑包是否包含此类。我不知道你如何构建你的包，但你可能有一些过于雄心勃勃的工具将类放入需要它的每个包中。一个常见的原因是`<Embed-Transitive>true</Embed-Transitive>`在您的 Maven POM 中使用。

让一个包提供这个类，并让它导出（[和导入！](https://stackoverflow.com/questions/4818967/osgi-is-it-possible-to-import-a-bundle-only-if-it-exists-externally-otherwise)）包。

### 选择正确的

如果您确实有多个副本，请确保所有捆绑包都同意使用哪一个。确保，

*   当一个包导出`javax.jcr.query`包时，它也会导入它，因此解析器可以选择它认为最有用的一个，并且可以选择
*   明确说明`javax.jcr.query`某些捆绑使用时必须使用的副本`javax.jcr.query`。您可以通过对导出设置[`uses`约束](http://njbartlett.name/2011/02/09/uses-constraints.html)来做到这一点，但公平地说，您的工具应该自己做到这一点。

如上所述，如果您需要使用此解决方案，您可能拥有手工制作的捆绑包。考虑使用像[bndtools](http://bndtools.org/)这样的工具来为你构建你的包。

# python - 错误信息：+ 不支持的操作数类型：“地理处理值对象”和“str”

> ID：13915196
> 
> 赞同：0
> 
> 时间：2012-12-17T13:34:49.397
> 
> 标签：python, arcmap, arcpy

调用此错误的行是：

```
exportpng = exportfolder + os.sep + name + '.PNG' 
```

错误信息：+ 不支持的操作数类型：“地理处理值对象”和“str”

无法用来自stackoverflow的其他响应/问题来解决它......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T13:50:09.013

检查你的变量。您可以通过在错误之前的行中放入[调试器来执行此操作。](http://docs.python.org/2/library/pdb.html)

您的变量之一不是字符串。要么`exportfolder`要么`name`。签出

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-20T23:32:50.583

我认为这与在此特定实例中使用 arcpy.GetParameter() 而不是 arcpy.GetParameterAsText() 有关，因为前者的类型是地理处理值对象，而后者是 str。

# variables - Findstr，如何读取部分字符串/行

> ID：13915198
> 
> 赞同：1
> 
> 时间：2012-12-17T13:34:55.133
> 
> 标签：variables, batch-file, cmd, output, findstr

我有一个包含名称和扩展名列表的文件，格式如下：

> 乔博客=102
> 
> 约翰史密斯=109

我想要做的是使用 findstr 但读取等号后的数字。所以我使用以下命令：

```
@echo off
for /F "delims=" %%a in ('findstr /p %username% extensions.txt') do set ext=%%a 
```

如果用户以 JoeBloggs 身份登录，它将捕获`JoeBloggs=102`，我想要它做的只是捕获`102`。所以基本上只有等号后面的数字。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T13:47:33.960

```
@echo off
for /f "tokens=1,2 delims==" %%a in (names.txt) do (
if "%%a"=="%username%" set ext=%%b
)
echo %ext%
pause >nul 
```

这将读取文本文件的每一行并在遇到`=`标志时将其拆分。

我已指定使用标记 1 和 2，1 在拆分之前，2 在拆分之后，因此我们可以比较第一个，如果是您想要的，请使用第二个。

# html - HTML5 中的哪些标签被认为是自关闭的？

> ID：13915201
> 
> 赞同：3
> 
> 时间：2012-12-17T13:35:03.717
> 
> 标签：html

这是我从[HTML5 自闭合标签的完整列表中获得的列表](http://xahlee.info/js/html5_non-closing_tag.html)

```
<area />
<base />
<br />
<col />
<command />
<embed />
<hr />
<img />
<input />
<keygen />
<link />
<meta />
<param />
<source />
<track />
<wbr /> 
```

我想知道它是否完整，还有其他吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-10-05T12:20:13.587

它们不是自闭合元素。它们是*虚空*元素。

void 元素不能有结束标签。在 HTML5 中，`<br>`意思`<br />`是一样的：它们都是*开始标签*！碰巧这些元素不需要结束标记。HTML5 中没有自闭合标签的概念。

所以你最好不要用斜线写这些，虽然我个人觉得如果有斜线它更易读。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-17T14:08:45.023

[根据W3C 列表](http://www.w3.org/html/wg/drafts/html/master/syntax.html#void-elements)，您的列表似乎是完整的（但正如 Quentin 指出的那样，HTML5 草案仍有可能更改）

**此外**，根据各种来源，以下过时或非标准标签是无效的：

```
basefont, bgsound, frame, isindex 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-01-17T13:37:34.950

HTML 标准将这些元素称为[*void 元素*](https://html.spec.whatwg.org/multipage/syntax.html#void-elements)。这是当前列表：

*   `area`
*   `base`
*   `br`
*   `col`
*   `embed`
*   `hr`
*   `img`
*   `input`
*   `keygen`
*   `link`
*   `menuitem`
*   `meta`
*   `param`
*   `source`
*   `track`
*   `wbr`

但是，根据 HTML 文档中的上下文，可能会有更多的“自闭合”元素。要获取这些列表，请打开[HTML 标准](https://html.spec.whatwg.org/)并搜索（`Ctrl`+`F`或`Cmd`+ `F`）`Acknowledge the token's self-closing flag`。例如，`math`and`svg`可以是自动关闭的。`script`可以在 SVG 上下文中自动关闭。

# c# - 根据日期从 xml 文档中检索节点

> ID：13915205
> 
> 赞同：0
> 
> 时间：2012-12-17T13:35:27.660
> 
> 标签：c#, datetime, xml-parsing, linq-to-xml

基本上我有一个 xml 文档，我想根据发布日期检索一些数据。

例如，假设我有以下 xml

```
<books>
    <book>
        <name>Book 1<name>
        <release_date>2011-11-10</release_date>
    </book>
    <book>
        <name>Book 2<name>
        <release_date>2012-03-16</release_date>
    </book>
    <book>
        <name>Book 3<name>
        <release_date>2010-01-22</release_date>
    </book>
    <book>
        <name>Book 4<name>
        <release_date>2011-12-22</release_date>
    </book>
</books> 
```

所以我想要的是，例如我通过了一个日期 2011 年 11 月 15 日，并且只有稍后发布的所有文件都应该返回？知道如何实现吗？

是这样的吗？：

```
var returnedEl = from XElement e in doc.Root.Elements where e.Element("release_date")> passedDate select e; 
```

O 什么是另一种可行的最佳方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T14:16:13.077

是的，您非常接近解决方案

```
var xDoc = XDocument.Load("aa.xml");
DateTime passedDate  = new DateTime(2010,11,11);

var books = xDoc.Descendants("book")
              .Where(b=>DateTime.ParseExact(b.Element("release_date").Value,"yyyy-MM-dd",CultureInfo.InvariantCulture)>passedDate)
              .ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T14:48:19.897

这也可以，它使用`XPathSelectElements`命名`System.Xml.XPath`空间：

```
 DateTime dt = new DateTime(2011, 11, 15);

        XDocument doc = XDocument.Load(@"Data.xml");
        var result = doc.XPathSelectElements("books/book/release_date")
                        .Where(el => Convert.ToDateTime(el.Value) > dt); 
```

# javascript - 链接到视频的交互式 gif

> ID：13915206
> 
> 赞同：1
> 
> 时间：2012-12-17T13:35:30.300
> 
> 标签：javascript, html, html5-video, coordinates

我正在使用 javascript 和 html5 制作交互式世界地图 gif，这是我的代码：

```
<!DOCTYPE html>
<html> 
<head>
    <title>World Map</title>
    <body>
<p>Click on a clickable area of the map for more info.</p>
<img src ="worldmap.gif" width="576" height="307" alt="World Map" usemap="#worldmap">

<map name="worldmap">
<area shape="rect" coords="265,49,279,64" href=" 
```

但现在我被卡住了，首先我想知道如何在点击链接坐标时链接到 html5 视频标签中的视频，以及如何在其中设置 javascript 参数，例如交换视频等。我有单击链接后能够与视频交换的代码，我有代码来做坐标，我只是不知道如何把它放在一起。

非常感谢您的帮助，但希望使用我已经完成的方法保持超级简单并且有点理解（如果它有效）这是我的超级简单代码

```
<!DOCTYPE html>
<html> 
<head>
    <title>World Map</title>
    <body>
<p>Click on a clickable area of the map for more info.</p>
<img src ="worldmap.gif" width="576" height="307" alt="World Map" usemap="#worldmap">

<map name="worldmap">
<area shape="rect" coords="265,49,279,64" <video src="ukanthem.mp4"></video>
</map>

</body>
</head>
</html> 
```

地图在页面上打开，但可点击区域似乎不存在？

更新：所以坐标仍然不起作用，没有可以点击的区域，视频也出现在与我的地图相同的页面上，我希望它们在单独的页面上，有帮助吗？视频也无法识别，它说“找不到视频，可能已从服务器中删除。http 404”世界地图

单击地图的可点击区域以获取更多信息。

```
<map name="worldmap">

<area shape="rect" coords="265,49,279,64" onclick="playVideo()"> 
<video id="video1" class="true" autoplay controls width="420">
<source src="ukanthem.mp4" type="video/mp4">
<source src="ukanthem.mp4" type="video/ogg">
</video>
<video id="video2" class=flase" width="420" controls>
<source src="beef.mp4">
</video>
<button id="hideButton" onclick="swap();">Switch</button>

<script>
var flag=true;
function swap() {
var myVideo1=document.getElementById("Video1");
var myVideo2=document.getElementById("video2");
flag=!flag;
video1.setAttribute("class", flag);
video2.setAttribute("class", !flag);
if (flag) {
    video2.pause();
    video1.play();
} else {
    video1.pause();
    video2.play();
}
}
</script>

</map>

</body>
</head>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T13:57:46.200

您需要一个视频标签：

```
<video src="urlofvideo"></video> 
```

您可以使用 jQuery 来绑定图像地图上的点击事件：

```
jQuery(document).ready(function($) {
   $('area').bind('click', function(event) {
        event.preventDefault();

       //url of video
        var url = this.href;
       //Here your code to start the video 
       ...
   });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T17:45:06.770

我不是 100% 确定我理解你的问题，但我让你这个。它是一张带绳子的地图，没有旧的地图方法，而是使用 HTML、CSS 和 Jquery。

对不起，如果我完全误解了，但这是我的拍摄:)

```
<style type="text/css">
  .map_image { display: block; width: 1280px; height: 960px;  background-repeat: no-repeat; }
  .map_image .map_link { display: block; position: absolute; text-indent: -999em; overflow: hidden; }
  .map_image #paris { width: 150px; height: 80px; top: 11px; left: 11px; border: 1px solid red; }
  .map_image #copenhagen { width: 150px; height: 80px; top: 40px; left: 177px; border: 1px solid yellow;}
</style>

 <div class="map_image" style="background-image: url('your_picture.jpg');">
   <a class="map_link" id="paris" title="google.com"></a>
   <a class="map_link" id="copenhagen" title=""></a>
 </div>

<script>
  $("#paris").click(function() {
    // play a video about paris
    alert("paris");
  });

  $("#copenhagen").click(function() {
    // play a video about paris
    alert("copenhagen");
  });
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T18:23:10.940

**请再看一下我的代码:)**

好的，超级简单。

您可以将 Onclick 操作添加到您的区域标签。

像这样。

```
<area .... onclick="playVideo()"> 
```

对于您的 HTML 5 视频标签...

```
<video id="video1" width="420">
  <source src="movie.mp4" type="video/mp4">
  <source src="movie.ogg" type="video/ogg">
  Your browser does not support HTML5 video.
</video> 
```

还有一个 Javascript 为你做事：这部分是针对普通的 HEAD HTML 标签 <-------

```
<script>
function playVideo() {
  var myVideo=document.getElementById("video1"); 
  myVideo.play(); 
}
</script> 
```

如果你想要它超级简单，这超级简单，而且我没有使用任何 jquery 或新东西。让我知道事情的后续 ：）

# c++ - OpenMP中的多维数组和结构数组

> ID：13915210
> 
> 赞同：0
> 
> 时间：2012-12-17T13:35:33.293
> 
> 标签：c++, arrays, structure, openmp

我在 OpenMP 中使用了一个结构数组，但它失败了，而是我使用了多维数组，它给了我正确的结果。我想知道为什么。
所用结构的定义：

```
struct loc (  

float **mig;  

}  

loc *Loc = new loc[nthread];  
for(i=0; i<nthread; i++)  
{  
    Loc[i].mig = new float*[nx];  
    for(j=0; j<nx; j++)  
    {  
         Loc[i].mig = new float[ny];  
    }    
} 
```

Loc 在并行部分中共享，并使用 tid 访问。
此实施失败。

比我使用多维数组：

```
float ***mig;
mig = new float**[nthread];  
for(i=0; i<nthread; i++)  
{  
     mig[i] = new float*[nx];  
     for(j=0; j<nx; j++)  
     {  
          mig[i][j] = new float[ny];  
     }  
 } 
```

mig 在并行部分中共享。此实施有​​效。这里使用 tid 作为第一维来访问 2D mig。

在这两种情况下，mig 数组都是并行填充的 for 子句。

第一种情况未能给出分段错误，但第二种情况正在成功执行，给出正确的输出。

由于必须从本机 C 代码中为 mig 赋值，因此不使用向量。

请帮助我了解两者之间的区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T08:04:14.663

你的错误似乎是...

```
for(i=0; i<nthread; i++)
{
    Loc[i].mig = new float*[nx];
    for(j=0; j<nx; j++)
    {
        Loc[i].mig = new float[ny];
        //        ^------------------------ right here
    }
} 
```

你在最里面的循环中有一个错字。你应该这样写：

```
for(j=0; j<nx; j++)
{
    Loc[i].mig[j] = new float[ny];
} 
```

C++ 不应该警告从`float *`to的隐式转换`float **`吗？

# c# - 复选框列表中的 Gridview

> ID：13915224
> 
> 赞同：0
> 
> 时间：2012-12-17T13:36:04.617
> 
> 标签：c#, asp.net, gridview, dynamic-data

我有一个动态创建的`Checkboxlist`（我正在使用动态数据，我正在谈论 Many-to-many_edit.aspx）。我已经添加了 20 000 多个项目`Checkboxlist`，我需要为此进行分页。

我认为将其绑定`checkboxlist`到 a`gridview`可以解决问题吗？我怎样才能做到这一点 ？

**编辑：**我已经阅读了很多关于这个主题的内容，但我找不到任何好的东西。当我尝试放入`Checkboxlist's source`时，`GridView.DatSource`它会抛出`OutOfMemory`异常

**EDIT2：**我正在尝试这样的事情，但是现在，因为我`checkboxlist`的它在里面，`gridview`我不知道如何填充它了

代码示例：

```
asp:GridView ID="GridView1" runat="server">
    <Columns>
    <asp:TemplateField>
    <ItemTemplate>
      <asp:CheckBoxList ID="CheckBoxList1" runat="server" RepeatColumns="3" OnDataBound="CheckBoxList1_DataBound" />
    </ItemTemplate>
    </asp:TemplateField>
    </Columns>
    </asp:GridView> 
```

编辑3：

我的代码 aspx.cs

```
 public partial class ManyToMany_EditField :  System.Web.DynamicData.FieldTemplateUserControl
  {

 public void Page_Load(object sender, EventArgs e)

   {
    // Register for the DataSource's updating event
    EntityDataSource ds = (EntityDataSource)this.FindDataSourceControl();

    // This field template is used both for Editing and Inserting
    ds.Updating += new EventHandler<EntityDataSourceChangingEventArgs>(DataSource_UpdatingOrInserting);
    ds.Inserting += new EventHandler<EntityDataSourceChangingEventArgs>(DataSource_UpdatingOrInserting);

}

private void DataSource_UpdatingOrInserting(object sender, EntityDataSourceChangingEventArgs e)
{
    MetaTable childTable = ChildrenColumn.ChildTable;

    // Comments assume employee/territory for illustration, but the code is generic

    // Get the collection of territories for this employee
    RelatedEnd entityCollection = (RelatedEnd)Column.EntityTypeProperty.GetValue(e.Entity, null);

    // In Edit mode, make sure it's loaded (doesn't make sense in Insert mode)
    if (Mode == DataBoundControlMode.Edit && !entityCollection.IsLoaded)
    {
        entityCollection.Load();
    }

    // Get an IList from it (i.e. the list of territories for the current employee)
    // REVIEW: we should be using EntityCollection directly, but EF doesn't have a
    // non generic type for it. They will add this in vnext
    IList entityList = ((IListSource)entityCollection).GetList();

    // Go through all the territories (not just those for this employee)
    foreach (object childEntity in childTable.GetQuery(e.Context))
    {

        // Check if the employee currently has this territory
        bool isCurrentlyInList = entityList.Contains(childEntity);

        // Find the checkbox for this territory, which gives us the new state
        string pkString = childTable.GetPrimaryKeyString(childEntity);
        ListItem listItem = CheckBoxList1.Items.FindByValue(pkString);
        if (listItem == null)
            continue;

        // If the states differs, make the appropriate add/remove change
        if (listItem.Selected)
        {
            if (!isCurrentlyInList)
                entityList.Add(childEntity);
        }
        else
        {
            if (isCurrentlyInList)
                entityList.Remove(childEntity);
        }
    }
}

protected void CheckBoxList1_DataBound(object sender, EventArgs e)
{
    MetaTable childTable = ChildrenColumn.ChildTable;
    var a = childTable.CreateContext();
    var dataSource = childTable.GetQuery().AsQueryable();
    var Context = new testEntities();
    var daZtaSource = Context.GetType();

    GridView1.DataSource = dataSource;

    // Comments assume employee/territory for illustration, but the code is generic

    IList entityList = null;
    ObjectContext objectContext = null;

    if (Mode == DataBoundControlMode.Edit)
    {
        object entity;
        ICustomTypeDescriptor rowDescriptor = Row as ICustomTypeDescriptor;
        if (rowDescriptor != null)
        {
            // Get the real entity from the wrapper
            entity = rowDescriptor.GetPropertyOwner(null);
        }
        else
        {
            entity = Row;
        }

        // Get the collection of territories for this employee and make sure it's loaded
        RelatedEnd entityCollection = Column.EntityTypeProperty.GetValue(entity, null) as RelatedEnd;
        if (entityCollection == null)
        {
            throw new InvalidOperationException(String.Format("The ManyToMany template does not support the collection type of the '{0}' column on the '{1}' table.", Column.Name, Table.Name));
        }
        if (!entityCollection.IsLoaded)
        {
            entityCollection.Load();
        }

        // Get an IList from it (i.e. the list of territories for the current employee)
        // REVIEW: we should be using EntityCollection directly, but EF doesn't have a
        // non generic type for it. They will add this in vnext

        entityList =((IListSource)entityCollection).GetList();

        // Get the current ObjectContext
        // REVIEW: this is quite a dirty way of doing this. Look for better alternative
        ObjectQuery objectQuery = (ObjectQuery)entityCollection.GetType().GetMethod(
            "CreateSourceQuery").Invoke(entityCollection, null);
        objectContext = objectQuery.Context;
    }

    // Go through all the territories (not just those for this employee)
   foreach (object childEntity in childTable.GetQuery(objectContext))
    {
        MetaTable actualTable = MetaTable.GetTable(childEntity.GetType());
        // Create a checkbox for it
        ListItem listItem = new ListItem(
            actualTable.GetDisplayString(childEntity),
            actualTable.GetPrimaryKeyString(childEntity));

        // Make it selected if the current employee has that territory
        if (Mode == DataBoundControlMode.Edit)
        {
            listItem.Selected = entityList.Contains(childEntity);
        }

        CheckBoxList1.Items.Add(listItem);
    }

}

public override Control DataControl
{
    get
    {
        return CheckBoxList1;
    }
} 
```

}

我的代码：Apx

```
 <%@ Control Language="C#" CodeFile="ManyToMany_Edit.ascx.cs" Inherits="ManyToMany_EditField" %>

<asp:CheckBoxList ID="CheckBoxList1" runat="server" RepeatColumns="3" OnDataBound="CheckBoxList1_DataBound" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T14:27:22.213

为什么要在 gridview 中有一个复选框列表？我认为您可以用复选框替换您的复选框列表，并添加一个包含您要显示的数据的列。

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="false" showheader="false" allowpaging="true">
    <Columns>
    <asp:TemplateField>
    <ItemTemplate>
      <asp:CheckBox ID="CheckBoxList1" runat="server" checked='<%# Eval("myColumn")%>'/>
    </ItemTemplate>
    </asp:TemplateField>
    <asp:BoundField DataField="cbxLabel" />
    </Columns>
    </asp:GridView> 
```

您将拥有所需的分页。

并且不要忘记在页面更改期间保存选中的复选框并恢复它。

要对结果进行分页，请查看此线程： [如何使用 ROW_NUMBER 对 gridview 和 SQL 自定义查询进行分页](https://stackoverflow.com/questions/10911148/how-to-paginate-a-gridview-and-sql-custom-query-with-row-number)

# java - 在java中读取excel文件

> ID：13915226
> 
> 赞同：-6
> 
> 时间：2012-12-17T13:36:06.463
> 
> 标签：java, excel

有没有一种方法可以在不使用任何第三方库的情况下在 java 中读取 excel 文件，因为我正在处理一个我们不能使用任何开源库的项目。

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T13:37:25.287

简而言之，没有。您必须自己编写一些东西（也许查看 Apache POI 的源代码？）。但我怀疑这是*很多*工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T13:41:41.837

你可以看看[Apache POI](http://poi.apache.org/)

从他们的网站：

***Apache POI - Microsoft 文档的 Java API***

但它是一个开源库。

我不知道为什么你不能使用开源库，但是使用非开源库会花费很多，而且很难找到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T14:06:41.813

阿布的回答可能不尊重“禁止图书馆”法的规定，但它是正确的。

比起Apache POI，我更喜欢[Andy Khan 的 JExcel 。](http://www.andykhan.com/jexcelapi/)前者我取得了巨大的成功，而后者则完全没有运气。

您的“无库”要求是一种有价值的直觉，但在这种情况下它是错误的。您不想复制所有这些工作。

我可以想到避免依赖的两个原因：1\. 这样您就可以挑选功能和 2.[学习如何发明轮子](http://www.joelonsoftware.com/articles/fog0000000007.html)。两者都不适用于这里，但它们值得记住。

# javascript - Javascript：更改 div 元素的 ID 并保存值

> ID：13915233
> 
> 赞同：0
> 
> 时间：2012-12-17T13:36:51.327
> 
> 标签：javascript, html

我有这个代码：

```
<img src="{$img_dir}/product_grid_view.png" class="pgrid" title="Grid View" onclick="document.getElementById('product_list').id = 'product_grid'; return false"></img>
<img src="{$img_dir}/product_list_view.png" class="plist" title="List View" onclick="document.getElementById('product_grid').id = 'product_list'; return false"></img> 
```

以下代码运行良好并完成了它的工作，但主要问题是它不会在我刷新页面后保存新值并继续恢复为`product_list`.tpl 文件中提到的默认值，如下声明`<div id=product_list" class="clearfix">`：

任何关于此事的建议将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T13:42:15.143

如果您希望数据在页面刷新之间持久存在，那么您必须将其存储在持久的地方。

这可能是客户端可访问的某个地方（例如在 cookie 中），然后在页面重新加载时根据那里的数据重新应用更改。

或者，您可以使用 Ajax 将更改通知服务器，并让服务器将数据存储在某处（例如数据库中），并在请求页面时根据该数据生成不同的数据。

（然而，动态更改 id 是一件可怕的事情）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T13:40:20.940

**简短的回答：**不可能（至少，不像你的例子）。

Javascript 是客户端，当您刷新页面时，将创建服务器端。

如果你真的想要这个，你应该保存服务器端的值（通过使用[AJAX](http://en.wikipedia.org/wiki/Ajax_%28programming%29)）并在重新加载页面时使用这个值。但我真的不认为你想这样做只是为了交换 id（这首先很奇怪）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T13:44:24.523

你正在做的事情只发生在客户端。它不会更改您的`.tpl`文件。为了更新它，您应该在服务器上发送信息，例如使用[ajax](https://developer.mozilla.org/en-US/docs/AJAX)，并使用 PHP（据我了解，这是您正在使用的服务器端语言）将新 id 保存到数据库中，并将其填充到您的`.tpl`文件中下次页面是加载。

同时 - 不清楚为什么需要以这种方式更改元素的 ID。看起来你做错了什么。

# sql - 如何使用复合键为表组织 CRUD

> ID：13915234
> 
> 赞同：0
> 
> 时间：2012-12-17T13:37:05.397
> 
> 标签：sql, sql-server, crud

我有一个表格来存储格式*参数名称*/*参数值*的简单参数。但它的主键是复合键。

使用锁定组织添加/更新/删除参数的最佳方法是什么。因此，例如，如果有人开始将下一个参数放入表中

```
first_comp_id   second_comp_id  paramName   paramValue

12              5               param_1     sdgfsdf
12              5               param_2     sdgfsdf
12              5               param_3     sdgfsdf
12              5               param_4     sdgfsdf 
```

其他任何人都不能使用 {first_comp_id:12, second_comp_id:5} 添加/编辑或删除任何记录？

在我的表结构下方（我稍微更改了名称，但想法相同）：

```
CREATE TABLE [dbo].[SomeTable](
[first_comp_id] [int] NOT NULL,
[second_comp_id] [int] NOT NULL,
[paramName] [varchar](50) NOT NULL,
[paramValue] [varchar](200) NOT NULL,
    PRIMARY KEY 
    (
    [first_comp_id] ASC,
    [second_comp_id] ASC,
        [paramName] ASC
    )
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T15:41:14.337

如果我理解正确，您让 user1 输入这些记录，并且 user1 可以编辑它们并使用 {first_comp_id:12, second_comp_id:5} 添加新记录

您需要添加一个包含对用户的唯一引用的 col

然后您将在访问数据库的代码中添加用户必须正确的检查

```
update sometable (paramValue) where first = ee and second = bb and name = rr and user = current user 
```

插入会变成

```
IF not EXISTS (SELECT * FROM sometable WHERE  first = ee and second = bb and name = rr and user <> current user)
BEGIN
   insert into sometable (first,second, name, val, user)
  values (ee,bb,rr,vv,uu) 
END 
```

或者如果您希望它完全在数据库级别上，您可以在更新之前使用触发器检查用户是否正确

在插入之前检查第一个和第二个是否未被其他用户使用

# mysql - mySQL GROUP BY 第一个字母和数字 0-9

> ID：13915235
> 
> 赞同：1
> 
> 时间：2012-12-17T13:37:08.613
> 
> 标签：mysql, sql

我有一长串大学名单，我想按第一个字母对它们进行分组，这不是问题。但是我有大学名称，例如用数字统计

```
14 Stars (London) Ltd t/a EUROPEAN COLLEGE FOR HIGHER EDUCATION (London)
3 D MORDEN COLLEGE 
```

我想将所有以数字开头的名称放在一个类别“0-9”中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T13:44:23.843

我认为你需要这样的东西：

```
select
  case when name rlike '^[0-9]' then '0-9' else left(name,1) end as first_letter
  count(*)
from univ
group by first_letter 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T13:40:55.313

您只需将其用于您的查询

```
 WHERE   title NOT RLIKE '^[A-Z]'       //this checks if first letter not from a-z 
```

你也可以`CASE`在你的sql中使用

```
 CASE  title NOT RLIKE '^[A-Z]'  then ........ END
  CASE  title  RLIKE '^[A-Z]'     then ........ END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T23:19:56.073

抱歉耽搁了伙计们，非常感谢您的帮助。我的一个朋友昨天帮助了我，我在这里解决了我的问题是解决方案

`SELECT IF(substr(registered_name,1,1)REGEXP '^[0-9]','0-9',substr(registered_name,1,1)) Category,
...//rest of my query
GROUP BY Category`

# eclipse - JavaCV和参数安装

> ID：13915242
> 
> 赞同：0
> 
> 时间：2012-12-17T13:37:36.260
> 
> 标签：eclipse, opencv, netbeans, jna, javacv

经过互联网上关于在 Eclipse 或 Net Beans 中安装 JavaCV 的许多研究。我写这篇文章是因为我没有找到如何解决我的问题。

* * *

*   Java SE开发工具包更新10（我用的是JDK 1.7）
*   OpenCV 2.4.2（在 c:\ 中）
*   JavaCV 0.2 bin（在 c:\ 中）
*   JNA 3.4.0 (C:\javacv-bin\JNA)
*   Windows 7 32 位。
*   用于 Java 开发人员的 Eclips IDE 32 位。
*   已安装 Microsoft Visual C++ 2010 Redistributable Package (x86)

* * *

我在 Eclipse 中创建了一个新项目。

1.  我在环境变量中添加了： C:\opencv\build\x86\vc10\bin; C:\opencv\build\common\tbb\ia32\vc10

2.  添加了所有外部库

3.  我修复了depends.exe的依赖问题并添加了“IEShims.dll”，因为缺少。

* * *

现在，当我启动我的程序时，我总是遇到他的错误。

> > 线程“主”java.lang.UnsatisfiedLinkError 中的异常：C:\Users\SweetLive\AppData\Local\Temp\jniopencv_core3957460997136742229.dll：在 java.lang.ClassLoader$NativeLibrary.load(Native Method) 处找不到依赖库java.lang.ClassLoader.loadLibrary1(ClassLoader.java:1939) 在 java.lang.ClassLoader.loadLibrary0(ClassLoader.java:1864) 在 java.lang.ClassLoader.loadLibrary(ClassLoader.java:1825) 在 java.lang.Runtime com.googlecode.javacpp.Loader.loadLibrary(Loader.java:403) 的 java.lang.System.load(System.java:1059) 的 .load0(Runtime.java:792) com.googlecode.javacpp.Loader。 load(Loader.java:342) at com.googlecode.javacpp.Loader.load(Loader.java:316) at com.googlecode.javacv.cpp.opencv_core.(opencv_core.java:131) at java.lang.Class。forName0(Native Method) at java.lang.Class.forName(Class.java:264) at com.googlecode.javacpp.Loader.load(Loader.java:335) at com.googlecode.javacv.cpp.opencv_imgproc.(opencv_imgproc .java:96) 在 java.lang.Class.forName0(Native Method) 在 java.lang.Class.forName(Class.java:264) 在 com.googlecode.javacpp.Loader.load(Loader.java:335) 在com.googlecode.javacv.cpp.opencv_objdetect.(opencv_objdetect.java:96) 在 java.lang.Class.forName0(Native Method) 在 java.lang.Class.forName(Class.java:264) 在 com.googlecode.javacpp .Loader.load(Loader.java:335) at com.googlecode.javacpp.Loader.load(Loader.java:316) at com.googlecode.javacv.cpp.opencv_objdetect$CvHaarClassifierCascade.>(opencv_objdetect.java:175) at DetectVisage.main(DetectVisage.java:50)java:264) at com.googlecode.javacpp.Loader.load(Loader.java:335) at com.googlecode.javacv.cpp.opencv_imgproc.(opencv_imgproc.java:96) at java.lang.Class.forName0(Native Method ) 在 java.lang.Class.forName(Class.java:264) 在 com.googlecode.javacpp.Loader.load(Loader.java:335) 在 com.googlecode.javacv.cpp.opencv_objdetect.(opencv_objdetect.java:96 ) 在 java.lang.Class.forName0(Native Method) 在 java.lang.Class.forName(Class.java:264) 在 com.googlecode.javacpp.Loader.load(Loader.java:335) 在 com.googlecode。 javacpp.Loader.load(Loader.java:316) at com.googlecode.javacv.cpp.opencv_objdetect$CvHaarClassifierCascade.>(opencv_objdetect.java:175) at DetectVisage.main(DetectVisage.java:50)java:264) at com.googlecode.javacpp.Loader.load(Loader.java:335) at com.googlecode.javacv.cpp.opencv_imgproc.(opencv_imgproc.java:96) at java.lang.Class.forName0(Native Method ) 在 java.lang.Class.forName(Class.java:264) 在 com.googlecode.javacpp.Loader.load(Loader.java:335) 在 com.googlecode.javacv.cpp.opencv_objdetect.(opencv_objdetect.java:96 ) 在 java.lang.Class.forName0(Native Method) 在 java.lang.Class.forName(Class.java:264) 在 com.googlecode.javacpp.Loader.load(Loader.java:335) 在 com.googlecode。 javacpp.Loader.load(Loader.java:316) at com.googlecode.javacv.cpp.opencv_objdetect$CvHaarClassifierCascade.>(opencv_objdetect.java:175) at DetectVisage.main(DetectVisage.java:50)opencv_imgproc.(opencv_imgproc.java:96) at java.lang.Class.forName0(Native Method) at java.lang.Class.forName(Class.java:264) at com.googlecode.javacpp.Loader.load(Loader.java :335) at com.googlecode.javacv.cpp.opencv_objdetect.(opencv_objdetect.java:96) at java.lang.Class.forName0(Native Method) at java.lang.Class.forName(Class.java:264) at com .googlecode.javacpp.Loader.load(Loader.java:335) at com.googlecode.javacpp.Loader.load(Loader.java:316) at com.googlecode.javacv.cpp.opencv_objdetect$CvHaarClassifierCascade.>(opencv_objdetect.java :175) 在 DetectVisage.main(DetectVisage.java:50)opencv_imgproc.(opencv_imgproc.java:96) at java.lang.Class.forName0(Native Method) at java.lang.Class.forName(Class.java:264) at com.googlecode.javacpp.Loader.load(Loader.java :335) at com.googlecode.javacv.cpp.opencv_objdetect.(opencv_objdetect.java:96) at java.lang.Class.forName0(Native Method) at java.lang.Class.forName(Class.java:264) at com .googlecode.javacpp.Loader.load(Loader.java:335) at com.googlecode.javacpp.Loader.load(Loader.java:316) at com.googlecode.javacv.cpp.opencv_objdetect$CvHaarClassifierCascade.>(opencv_objdetect.java :175) 在 DetectVisage.main(DetectVisage.java:50)googlecode.javacv.cpp.opencv_objdetect.(opencv_objdetect.java:96) at java.lang.Class.forName0(Native Method) at java.lang.Class.forName(Class.java:264) at com.googlecode.javacpp.Loader .load(Loader.java:335) at com.googlecode.javacpp.Loader.load(Loader.java:316) at com.googlecode.javacv.cpp.opencv_objdetect$CvHaarClassifierCascade.>(opencv_objdetect.java:175) at DetectVisage。主要（DetectVisage.java:50）googlecode.javacv.cpp.opencv_objdetect.(opencv_objdetect.java:96) at java.lang.Class.forName0(Native Method) at java.lang.Class.forName(Class.java:264) at com.googlecode.javacpp.Loader .load(Loader.java:335) at com.googlecode.javacpp.Loader.load(Loader.java:316) at com.googlecode.javacv.cpp.opencv_objdetect$CvHaarClassifierCascade.>(opencv_objdetect.java:175) at DetectVisage。主要（DetectVisage.java:50）主要（DetectVisage.java:50）主要（DetectVisage.java:50）

对于这一切，我使用： [http ://code.google.com/p/javacv/wiki/Windows7AndOpenCV](http://code.google.com/p/javacv/wiki/Windows7AndOpenCV) [http://www.cs.dartmouth.edu/~cs10/install/javacv-win/](http://www.cs.dartmouth.edu/~cs10/install/javacv-win/ "http://www.cs.dartmouth.edu/~cs10/install/javacv-win/")

我在 blogspot 上看不到，因为这个网站在中国被屏蔽了（我是在中国的外国学生）

有人有想法解决我的问题吗？提前谢谢。

# xml - XML 元素和类型层次结构

> ID：13915252
> 
> 赞同：0
> 
> 时间：2012-12-17T13:38:16.770
> 
> 标签：xml, types, vocabulary, nomenclature

我有一个概念问题，因为我目前正在使用 xml 和 xsds 编写有关 Dataexchange 的概念。

在描述 xsds 时，我经常发现自己想知道我是否使用了正确的词汇。例如，如果我在 xsd 中有如下定义：

```
<xs:complexType name="choiceOfKnownDateType">
 <xs:choice>
  <xs:element name="yearMonthDay" type="completeDate"/>
  <xs:element name="yearMonth" type="yearMonthOnly"/>
  <xs:element name="year" type="yearOnly"/>
 </xs:choice>
</xs:complexType> 
```

我是否正确地将该示例描述为：“我们有一个由元素 yearMonthDay、yearMonth 和 year 组成的复杂类型。这些元素属于类型 completeDate、yearMonthOnly 和 yearOnly。”

我不关心示例的正确性或改进（我只是编造的），我只需要知道我是否正确使用了术语“元素”和“类型”:)

非常感谢提前

米沙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T14:07:46.833

因为这个例子是一个`xs:choice`而不是一个序列，所以说类型允许“恰好一个子元素，它可以是`yearMonthDay`（类型`completeDate`）、`yearMonth`（类型`yearMonthOnly`）或`year`（类型`yearOnly`）”更正确。

# asp.net-mvc - 数据模型需要两个属性之一

> ID：13915256
> 
> 赞同：9
> 
> 时间：2012-12-17T13:38:31.260
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework, entity-framework-4, asp.net-mvc-4

假设我有一个`Person`班级`FirstName`and `LastName`。我希望用户必须在 UI 中输入两个值中的至少一个，但他可能不必输入每个值。

如果我`Required`在它们中的每一个上放置属性/数据注释，这使得它们都成为必需的。

如何为此规则进行服务器端验证（也包括客户端验证）？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-17T13:46:10.777

您可以为此使用自定义属性。简而言之，自定义属性将检索这两个值，然后确保至少一个具有值。请参阅[此页面](http://msdn.microsoft.com/en-us/vs2010trainingcourse_aspnetmvccustomvalidation_topic2)了解更多信息。这是一个示例（未经测试的代码）：

```
[AttributeUsage(AttributeTargets.Property, AllowMultiple =false, Inherited = false)]
  public class ValidatePersonName: ValidationAttribute
  {
    protected override ValidationResult IsValid(object value, ValidationContext validationContext)
    {
      string FirstName = (string)validationContext.ObjectType.GetProperty("FirstName").GetValue(validationContext.ObjectInstance, null);

      string LastName = (string)validationContext.ObjectType.GetProperty("LastName").GetValue(validationContext.ObjectInstance, null);

  //check at least one has a value
  if (string.IsNullOrEmpty(FirstName) && string.IsNullOrEmpty(LastName))
        return new ValidationResult("At least one is required!!");

      return ValidationResult.Success;
    }
  } 
```

用法：

```
class Person{

 [ValidatePersonName]
 FirstName{get;set;}

 LastName{get;set;}
} 
```

# python - 对传入二进制输入进行分组的有效方法

> ID：13915258
> 
> 赞同：0
> 
> 时间：2012-12-17T13:38:56.293
> 
> 标签：python, python-3.x, cluster-analysis

我有一个以`000, 001, 010, 000`随机形式生成二进制输出字符串的源。

我想要一些散列或聚类程序，根据与其他输入不同的位数将输入分组，例如输入流 000、001 和 010 应该都进入同一个桶/集群，因为它们相差一点点。

我最初的想法是将输入的第一个连续位分组为一个，例如来自

```
000
001
010 
```

合而为一。然后是下一个：

```
011
100
101 
```

ETC

但是我很快意识到边界之间有相似之处，比如`000`和`1000`应该属于同一个桶，而应该属于`011`不同`000`的桶。

我怎么能接近这个？提示？

詹姆士

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T16:18:29.347

Use **gray codes**.

[https://en.wikipedia.org/wiki/Gray_code](https://en.wikipedia.org/wiki/Gray_code)

> The reflected binary code, also known as Gray code after Frank Gray, is a binary numeral system where two successive values differ in only one bit.

This results in the following order for three bits (and the associated integers - this is *not* the default binary encoding!):

```
000  = 0
001  = 1
011  = 2
010  = 3
110  = 4
111  = 5
101  = 6
100  = 7 
```

And then just split the data in the desired number of buckets linearly.

Alternatively, you may want to look at checksums and error correcting codes, too.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T16:32:56.020

抱歉，对于您的特殊情况，我没有找到一个功能，但在这里您可以获得一些灵感：

如果您想拥有一个依赖于一个数字的存储桶函数，您可以执行以下操作：

```
def bucket(i):
    bucket = 0
    bit = 1
    while bit <= i:
        if bit & i > 0:
            bucket += 1
        bit <<= 1 # shift the bit 1 higher
    return bucket 
```

如果您有两个数字依赖：

```
def bucket(i, x):
    # perform some operation, store it in i
    bucket = 0
    bit = 1
    while bit <= i:
        # you can compare bits here
        if bit & i > 0:
            bucket += 1
    bit <<= 1
    return bucket 
```

这就是您可以进行按位分桶的方法

```
buckets = {}
for number in numbers:
    numberBucket = bucket(number)
    buckets.setdefault(numberBucket, [])
    buckets[numberBucket].append(number) 
```

# c# - 从 WebAPI 输出中删除 RelationshipManager JSON

> ID：13915260
> 
> 赞同：1
> 
> 时间：2012-12-17T13:39:05.743
> 
> 标签：c#, entity-framework

我目前正在使用 WebAPI 和实体框架构建一个 RESTful API。一切顺利 - 解决了讨厌的循环引用问题，除了我的输出包含一个 RelationshipManager JSON 块，它使输出膨胀，在大多数情况下我不需要它。

有没有办法删除它？忽略它？

这是我指的 JSON：-

```
{
$id: "1",
RelationshipManager: {},
AirlineId: 1,
AirlineName: "British Airways",
Code: "BA",
Url: "www.ba.com",
Seo: null
},
{
$id: "3",
RelationshipManager: {
$id: "4",
_owner: {
$ref: "3"
},
_relationships: null
},
AirlineId: 2,
AirlineName: "Delta",
Code: "DL",
Url: "www.delta.com",
Seo: null
}, 
```

帮助表示赞赏;）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T09:55:36.957

删除该块的唯一方法似乎是创建您自己的自定义 DTO 对象并将 EF 中的数据编组到您的 BLL 中。我确实想到，无论如何在前端/api 中显示 EF 对象都是不好的做法。

# android - 适用于 ARMv5 的 Android 虚拟设备 VFP

> ID：13915261
> 
> 赞同：0
> 
> 时间：2012-12-17T13:39:10.247
> 
> 标签：android, avd, armv6

AVD 支持 armeabi-v7a 的 VFP，但不支持 armeabi。

我在 ARMv6 上遇到浮点[问题，并希望在虚拟设备上使用 FPU 设置 ARMv6。](https://stackoverflow.com/questions/13870691/android-ndk-armv6-vfp-devices-wrong-calculations-nan)（它是类似于三星 Galaxy ACE、Y、Pocket、GIO 的硬件）

所以我寻找解决方案来为 Android 虚拟设备获得另一个 CPU/ABI 选项。

更新

AVD 设置位于 ~/.android/avd/config.ini

可以添加类似的行

hw.cpu.model=cortex-a8

现在它不起作用如果您知道所需的设置，我会将您的答案标记为响应。+1

# magento - Magento 如何将已删除的产品存储在数据库中

> ID：13915265
> 
> 赞同：1
> 
> 时间：2012-12-17T13:39:32.707
> 
> 标签：magento

我正在运行一个以 xml 格式导出 magento 产品的脚本。我使用 SQL 连接进行查询并选择所有属性。它有办法或如何在magento数据库中找到已删除产品的信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T14:13:27.897

找出答案的唯一方法是列出所有现有产品或已经存在的产品，并将它们与当前数据集进行比较。其他方式永远不会删除产品，而是将它们标记为缺货或不活动

# java - 什么是 System.out？

> ID：13915267
> 
> 赞同：-2
> 
> 时间：2012-12-17T13:39:48.957
> 
> 标签：java, system, outputstream

我读过这`System.out`是Java的默认输出流。但这是什么`out`？`System`是 中的一个类`java.lang`，但它是`out`一个子类`System`还是一个变量或其他东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T13:40:37.683

`out`是类中的**公共静态** `PrintStream`字段`System`。这就是为什么您可以使用点运算符 (.) => 访问它的原因`System.out`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T13:41:09.200

`out``PrintStream`是类中类型的公共静态字段`System`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-17T13:41:11.197

[`out`是一个`public static final`类型的变量`PrintStream`](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#out)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-17T13:41:53.003

查看来自 OpenJDK 的[系统](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/System.java)源代码。

```
public final static PrintStream out = ... 
```

# python - 为什么我会收到“用户警告：模块 dap 已从无导入...”

> ID：13915269
> 
> 赞同：13
> 
> 时间：2012-12-17T13:39:52.270
> 
> 标签：python, python-2.7, matplotlib, matplotlib-basemap

我已经安装`python-matplotlib`了`python-mpltoolkits.basemap`Ubuntu 软件包。安装`python-mpltoolkits.basemap`也会`python-dap`作为依赖项安装。

当我导入底图时，我收到以下警告：

```
>>> import mpl_toolkits.basemap
/usr/lib/pymodules/python2.7/mpl_toolkits/__init__.py:2: UserWarning: Module dap was
already imported from None, but /usr/lib/python2.7/dist-packages is being added to sys.path
  __import__('pkg_resources').declare_namespace(__name__) 
```

这是否意味着我有 2 个相互冲突的安装`dap`？（这可能是一些旧手动安装的残余。）[这](https://stackoverflow.com/questions/ask)是一个有点类似的警告消息，但在他的情况下，该消息告诉另一个冲突安装的位置。我的消息只是说`None`。这是什么意思？

编辑1：

```
>>> import sys
>>> print sys.modules['dap']
<module 'dap' (built-in)> 
```

编辑2：

```
$ python -S
Python 2.7.3 (default, Sep 26 2012, 21:53:58) 
[GCC 4.7.2] on linux2
>>> import sys
>>> print sys.modules['dap']
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
KeyError: 'dap' 
```

编辑3：是的，我似乎有`sitecustomize.py`：

```
$ cat /etc/python2.7/sitecustomize.py
# install the apport exception handler if available
try:
    import apport_python_hook
except ImportError:
    pass
else:
    apport_python_hook.install() 
```

编辑4：实际上我可以通过以下方式得到错误：

```
>>> import pkg_resources
__main__:1: UserWarning: Module dap was already imported from None, but /usr/lib/python2.7/dist-packages is being added to sys.path 
```

所以这与此无关`mpl_toolkits.basemap`。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-18T00:41:37.783

我真的不能说我会理解细节，但显然每当`python-dap`安装软件包时，就会试图`import pkg_resources`给出这个警告。[这里](https://bitbucket.org/tarek/distribute/issue/217/userwarning-module-paste-was-already)有一些讨论。

根据[此处](https://bugs.gentoo.org/show_bug.cgi?format=multiple&id=54161)的建议（页面末尾的评论 29），我将其添加`dap`为文件的第一行，`/usr/lib/python2.7/dist-packages/dap-2.2.6.7.egg-info/namespace_packages.txt` 并且不再收到警告。希望这不会破坏任何东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-28T08:46:03.823

我最近不得不追查一个类似的问题，以及错误消息的实际含义：

```
UserWarning: Module dap was already imported from None, but /usr/lib/python2.7/dist-packages is being added to sys.path 
```

似乎是“在扩展 'dap' 的路径时，发现了一个未将 'dap' 声明为命名空间包的 egg-info 目录”。

这表明了两件事：python-dap 在自己的 setup.py 中缺少“namespace_packages=['dap']”声明，在这种情况下，setuptools*确实*应该给出更好的错误消息......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-17T02:27:37.737

如果您不需要该软件包，只需将其删除即可，例如在 Ubuntu 或 Debian 系统`apt-get remove --purge python-dap`上为我删除了该软件包并消除了警告。在安装某些包时，由于依赖建议，很容易意外安装不需要的包。

当您尝试删除它时，如果删除包（在这种情况下`python-dap`，但其他包也可能导致此错误发生）也会强制删除依赖于它的其他包，打包系统会警告您。就我而言，没有其他直接依赖的软件包，`python-dap`而且我没有将它用于我所知道的任何事情，因此卸载它很简单，无痛，并且使警告静音。

其他包安装程序（例如非操作系统打包系统，如`pip`or `easy_install`）可能会使删除包变得更加困难；您可能需要手动删除包，所以我建议将[接受的答案](https://stackoverflow.com/a/13924658/462302)作为消除警告的`apt-get remove`方法，除非我在此处推荐的方法适合您。

# javascript - 如何运行允许抓取文本、加载特定表单并将文本传递到表单中的小书签

> ID：13915272
> 
> 赞同：0
> 
> 时间：2012-12-17T13:40:01.563
> 
> 标签：javascript, jquery, bookmarklet

我对 JavaScript 非常陌生，我想为我使用的网络服务构建一个书签。我需要从任何页面抓取文本，加载服务表单并将文本发布到表单的文本字段中。到目前为止，我得到了这个：

```
// grab text
javascript:(function(){var t=window.getSelection?window.getSelection().toString():document.selection.createRange().text;t="You selected: "+t;alert(t);})()

//load form
document.onload=function(){window.location=%22http://www.streetmails.com/index.php%3Fc=mailing%26a=content%22})();

//paste text into form
window.onload=function%20D(a,b){c=b.split('|');d=false;for(q=0;q<c.length;q++){if(c[q]==a)d=true;}return%20d;}function%20E(){f0=document.forms[0];f0['subject'].value='news from London';f0['content'].value='<echo$_GET['t']?>';f0[''].value='Add%20a%20picture...';f0['topicId'].value='4';}E 
```

你能帮助我吗？我搜索并不断尝试，但无法让它运行....提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T14:38:13.937

您不能完全使用书签来完成您想要做的事情。执行小书签时，您正在当前网页中执行 Javascript。在一个 Web 域的网页中运行的 Javascript 无法与来自不同 Web 域的页面进行交互。`document.onload`几乎永远不会在书签中起作用，因为通常在您单击书签之前已经加载了网页。

让我们将带有文本的页面称为“文本页面”。让我们将表单称为“表单页面”的页面。Web 表单总是提交给另一个页面或提交给它自己。这取决于表单的`action`值。让我们称之为操作页面。表格可以通过`GET`或 通过提交`POST`。

要使用小书签完成您的目标，通常所做的是小书签将在文本页面上创建一个表单，然后将该表单直接提交到操作页面。

如果操作页面将接受 GET（仅查询字符串值），那是最简单的。在这里寻找许多这样的例子：[https ://www.squarefree.com/bookmarklets/search.html](https://www.squarefree.com/bookmarklets/search.html)

如果操作页面需要 POST，那就有点复杂了，因为您必须使用 Javascript 来创建表单：[http ://www.google.com/search?q=javascript%20create%20form](http://www.google.com/search?q=javascript%20create%20form)

插件、扩展和用户脚本可以用来更直接地做你想做的事，因为它们不仅限于在当前域中运行，当然它们的编程更复杂。

# git - 特定文件的“git log”缺少提交

> ID：13915275
> 
> 赞同：6
> 
> 时间：2012-12-17T13:40:20.407
> 
> 标签：git

昨天我在一个名为*Network.java*的文件中提交了一些更改。今天我用 rebase 从原点拉出。现在更改在文件中消失了。

更有趣的是，如果我运行`git log -p`并搜索*Network.java*，我会看到带有更改的提交。但是，如果我运行`git log -p -- <path to Network.java>`，那么我看不到我的提交（它显示了一周前的提交）。

解释是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-08-18T09:01:45.027

您应该使用`--full-history`. 这是因为 Git 压缩了历史。

# iphone - 使用 GSRadioButtonSetController 的单选按钮实现不更改参考颜色的状态

> ID：13915276
> 
> 赞同：0
> 
> 时间：2012-12-17T13:40:20.550
> 
> 标签：iphone, ios, radio-button

我正在使用 GSRadioButtonSetController 实现单选按钮...我创建了两个按钮并包含在 IBOutletCollection(UIButton) NSArray *buttonCollection....然后我将 GSRadioButtonSetController.h 和 GSRadioButtonSetController.m 文件包含到我的项目中。然后在我的 viewdidload 中添加

```
// Instantiate your GSRadioButtonSetController object
self.radioButtonSetController = [[GSRadioButtonSetController alloc] init];

// Set its delegate to your view controller
self.radioButtonSetController.delegate = self;

// Set its buttons property to an array of buttons that you've
// created previously.
self.radioButtonSetController.buttons = buttonCollection; 
```

然后我把

```
- (void)radioButtonSetController:(GSRadioButtonSetController *)controller
      didSelectButtonAtIndex:(NSUInteger)selectedIndex
{

//implemetation

 } 
```

按钮有两个图像...一个用于选择状态，第二个用于 deselcetd 状态....代码给了我索引但是我不知道如何动态更改为图像以便用户知道选择了哪个和哪个不是...

提前感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:45:13.703

当您创建要添加到 `buttonCollection' 的按钮时，将图像设置为按钮，例如：

```
[button_1 setImage:[UIImage imageNamed:@"radio_button_off.png"] forState:UIControlStateNormal];
[button_1 setImage:[UIImage imageNamed:@"radio_button_on.png"] forState:UIControlStateSelected]; 
```

它对我有用

# php - CakePHP 中的非公共可访问函数

> ID：13915279
> 
> 赞同：-4
> 
> 时间：2012-12-17T13:40:31.560
> 
> 标签：php, cakephp

我在我的 Cake 应用程序中构建了一个简单的通知系统，我希望有一个函数可以在我调用某个方法时创建一个新通知。因为这不是用户实际直接访问的东西，而只是数据库逻辑，所以我将它放在 Notification 模型中，如下所示：

```
class Notification extends AppModel
{
    public $name = 'Notification';

    public function createNotification($userId, $content, $url)
    {
        $this->create();

        $this->request->data['Notification']['user_id'] = $userId;
        $this->request->data['Notification']['content'] = $content;
        $this->request->data['Notification']['url'] = $url;

        $result = $this->save($this->request->data);

        if ($result)
        {
            $this->saveField('datetime', date('Y-m-d H:i:s'));
            $this->saveField('status', 0);
        }
    }
} 
```

然后每当我想在我的应用程序中创建通知时，我都会这样做：

`$this->Notification->createNotification($userId,'Test','Test');`

然而这不起作用！控制器与模型对话正常，但它没有在数据库中创建行......我不知道为什么......但似乎我做错了只是通过执行所有代码模型，然后在整个应用程序中调用它。

**编辑：根据下面的答案和评论，我尝试了以下代码在我的通知控制器中创建受保护的方法：**

```
protected function _createNotification($userId, $content, $url)
    {
        $this->Notification->create();

        $this->request->data['Notification']['user_id'] = $userId;
        $this->request->data['Notification']['content'] = $content;
        $this->request->data['Notification']['url'] = $url;

        $result = $this->save($this->request->data);

        if ($result)
        {
            $this->saveField('datetime', date('Y-m-d H:i:s'));
            $this->saveField('status', 0);
        }
    } 
```

现在仍然困扰着我的事情（*抱歉，如果这对其他人来说很简单，但我之前没有在 CakePHP 中使用过受保护的方法*）是我如何从另一个控制器调用它？因此，例如，如果在我的 PostsController 中有一个方法，并且想在成功保存时创建一个通知，我该怎么做？

我**在我的 PostsController add 方法中**想过：

```
if($this->save($this->request-data){

    $this->Notification->_createNotification($userId,'Test','Test');

} 
```

但是受到保护，我将无法从 NotificationsController 外部访问该方法。此外，我使用的语法与从模型中调用函数的语法相同，所以再次感觉不对。

希望有人可以帮助我，让我重回正轨，因为这对我来说是一个新领域。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T13:44:15.620

控制器应将所有数据传递给模型

```
$this->createNotification($this->request->data); 
```

然后模型可以使用数据：

```
public function createNotification(array $data) {
    $key = $data[$this->alias]['key'];
    $data[...] = ...;

    $this->create();
    return $this->save($data);
} 
```

您永远不会尝试从模型中访问控制器（和/或其请求对象）。

当然，您也可以从其他模型中调用该方法：

```
public function otherModelsMethod() {
    $this->Notification = ClassRegistry::init('Notification');

    $data = array(
         'Notification' => array(...)
    );
    $this->Notification->createNotification($data);
} 
```

并且您可以使您的方法变得冗长，但这通常会使越来越多的参数难以阅读/理解/维护：

```
public function createNotification($userId, $content, $url) {
    $data = array();
    // assign the vars to $data
    $data['user_id'] = $userId;
    ...

    $this->create();
    return $this->save($data);
} 
```

所以这通常不是蛋糕的方式..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T15:38:34.137

根据定义，模型中的方法不是“可公开访问的”。用户不能调用或调用模型中的方法。用户只能使控制器动作被启动，而不能在模型中进行任何操作。如果你不从任何控制器调用你的模型方法，它永远不会被调用。所以忘记问题的“非公开”部分。

您的问题是您在模型中工作就像在控制器中一样。模型中没有`request`对象。您只需将数据数组传递给模型方法并保存该数组。不需要`$this->request`。只需制作一个常规`array()`，将控制器传递的数据放在那里并保存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T18:58:58.683

整个方法在 MVC 上下文 IMO 中是完全错误的，并且为使用 CakePHP 事件系统而尖叫。因为你想要的实际上是触发某种事件。阅读[http://book.cakephp.org/2.0/en/core-libraries/events.html](http://book.cakephp.org/2.0/en/core-libraries/events.html)

触发一个事件并附加一个全局事件侦听器，该侦听器将侦听此类事件并在事件发生时执行它应该执行的任何操作（将某些内容保存到数据库）。它干净、灵活且可扩展。

如果你为你的应用程序做了一个适当的 MVC 堆栈，如果不是全部的话，事件又名通知应该从模型中触发，例如当一个帖子成功保存时。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T19:37:58.113

这就是我最终所做的。虽然它肯定不是迷人的。它适用于我想要它做的事情，并且是一个很好的快速胜利，因为通知仅用于几种方法，所以我不会创建大量需要在未来改进的代码。

首先要创建通知，我执行以下操作：

```
$notificationContent = '<strong>'.$user['User']['username'].'</strong> has requested to be friends with you.';
$notificationUrl = Router::url(array('controller'=>'friends','action'=>'requests'));
$this->Notification->createNotification($friendId,$notificationContent,$notificationUrl); 
```

在这里，我传递了我想要的内容和用户可以做某事的 URL，在这种情况下，查看他们已收到通知的好友请求。如果它是仅信息通知，则 url 可以为 null。

**createNotification 函数仅**在模型中，如下所示：

```
public function createNotification($userId, $content, $url = null)
{
    $this->saveField('user_id',$userId);
    $this->saveField('content',$content);
    $this->saveField('url',$url);
    $this->saveField('datetime', date('Y-m-d H:i:s'));
    $this->saveField('status', 0);
} 
```

这将在表中创建一条包含传递内容的新记录，将其状态设置为 0（表示未读）和创建日期。然后，当用户访问通知页面时，通知将设置为已读。

同样，这很可能不是这个问题中概述的问题的理想解决方案......**但它可以工作并且易于使用**并且可能对正在学习 CakePHP 并且希望在构建原型应用程序时从模型运行函数的其他人有用。

**记住没有什么可以阻止你在未来改进的东西！**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T12:01:38.760

首先，您可以通过以下方式改进最后一个解决方案以执行一次 save() （而不是 5 次）：

```
public function createNotification($userId, $content, $url = null){

    $data = array(
        'user_id' => $userId,
        'content' => $content,
        'url' => $url,
        'datetime' => date('Y-m-d H:i:s'),
        'status' => 0
    );

    $this->create();
    $this->save($data);
} 
```

当我一年多前开始编程 CakePHP(1.3) 时，我也遇到了这个问题。（我想在任何其他控制器中使用控制器的功能。）因为我不知道/研究在哪里放置这样的代码，所以我在一个非常大的项目中做错了一年多。因为这个项目真的很大，所以我决定就这样离开它。**这就是我所做的：**

**我向app_controller.php**添加了一个函数（*没有视图*，下划线）：

 **```
class AppController extends Controller {
    //........begin of controller..... skipped here

    function _doSomething(){
        //don't forget to load the used model
        $this->loadModel('Notification');
        //do ur magic (save or delete or find ;) )
        $tadaaa = $this->Notification->find('first');
        //return something
        return $tadaaa;
    }
} 
```

通过这种方式，您可以从 Notification 控制器和 Posts 控制器访问该功能：

```
$this->_doSomething(); 
```

I use this kind of functions to do things that have nothing to do with data submittance or reading, so i decided to keep them in the app_controller. In my project these functions are used to submit e-mails to users for example.. or post user actions to facebook from different controllers.

Hope I could make someone happy with this ;) but if you're planning to make a lot of these functions, it would be much better to place them in the model!**

# javascript - 在 URL 上查看页面与在本地浏览器中查看页面时 JavaScript 函数的执行方式不同

> ID：13915288
> 
> 赞同：0
> 
> 时间：2012-12-17T13:40:48.977
> 
> 标签：javascript, html5-canvas

我有以下网页，它在 HTML5 画布上显示了许多图像和“得分栏”：

```
<!DOCTYPE HTML>
<html>
<head>
<style>
  body {
    margin: 0px;
    padding: 0px;
  }
  canvas{
    border: 1px solid #9C9898;
    background:#F5F5F5;
  }
</style>
<div id="container"></div>
<script src="kinetic.js"></script>
<script src="drawdescriptionboxes.js"></script>
<script src="drawLevelOneElements.js"></script>
<script src="startGameDrawGameElementsDrawStartButton.js"></script>
<script>
/*Add the game elements' global variables */
var currentLevel = 1;
var totalLevels = 3;
var currentScore = 0;
var currentScorePositionX = 950;
var currentScorePositionY = 10;

/*Add code to draw images to random locations here */
    var imageX = Math.floor(Math.random()*950);
    var imageY = Math.floor(Math.random()*450);

    var stage = new Kinetic.Stage({
      container: "container",
      width: 1000,
      height: 500
    });
    var imagesLayer = new Kinetic.Layer();
    var canvas = imagesLayer.getCanvas();
    var context = canvas.getContext("2d");
    console.log("Foo ");

/*Load the images from the HTML into the JavaScript */
function loadImages(sources, callback){
    var imagesDir = "";
    var images = {};
    var loadedImages = 0;
    var numImages = 0;

    //console.log("length " + sources.length);
    for (var src in sources){
        numImages++;
    }
    //console.log("Num Images " + numImages);

    var index=0;
    console.log("length " + sources.length);
    for (index=0;index < numImages ;index++){
        console.log(index);
        images[index] = new Image();
        images[index].src = sources[index];
        console.log("Adding " + sources[index]);
        callback(images[index]);
        console.log("images array length = " + images.length);
    }

    stage.add(imagesLayer); // should only be added once!!
}

/*Function to check whether the item being dragged is near its description box */
function isNearDescriptionBox(itemImage, descriptionBox){
    var ii = itemImage;
    var db = descriptionBox;
    if(ii.attrs.x > db.x - 20 && ii.attrs.x < db.x + 20 && ii.attrs.y > db.y - 20 && ii.attrs.y < db.y +20){
        return true;
    }else{
        return false;
    }
}

/* This function draws the game elements */
function drawGameElements(){
    /* Draw a line for the 'score bar'. */
    context.moveTo(0, 25);
    context.lineTo(1000, 25);
    context.stroke();

    /* Draw current level/ total levels on the left, and current score on the right. */
    context.font = "11pt Calibri"; /* Text font & size */
    context.strokeStyle = "black"; /* Font colour */
    context.strokeText(currentLevel + "/" + totalLevels, 10, 15);
    context.strokeText(currentScore, 750, 15);
}

function initStage(images){
    var stage = new Kinetic.Stage({
        container: "container",
        width: 1000,
        height: 500
    });
    var descriptionLayer = new Kinetic.Layer();
    //var imagesLayer = new Kinetic.Layer();
    var allImages = [];
    var currentScore = 0;

    var descriptionBoxes = {
        assetsDescriptionBox: {
            x: 70,
            y: 400
        },
        liabilitiesDescriptionBox: {
            x: 300,
            y: 400
        },
        incomeDescriptionBox: {
            x: 530,
            y: 400
        },
        expenditureDescriptionBox: {
            x: 760,
            y: 400
        },
    };

    /*Code to detect whether image has been dragged to correct description box */
    for (var key in sources){
        /*Anonymous function to induce scope */
        (function(){
            var privateKey = key;
            var imageSource = sources[key];

            /*Check if image has been dragged to the correct box, and add it to that box's
                array and remove from canvas if it has */
            canvasImage.on("dragend", function(){
                var descriptionBox = descriptionBoxes[privateKey];
                if(!canvasImage.inRightPlace && isNearDescriptionBox(itemImage, descriptionBox)){
                    context.remove(canvasImage);
                    /*Will need to add a line in here to add the image to the box's array */
                }
            })

        })();
    }

}

function drawImage(imageObj) {
    //var layer = new Kinetic.Layer();

    var canvasImage = new Kinetic.Image({
      image: imageObj,
      width: 50,
      height: 50,
      // puts the image in teh middle of the canvas
      x: stage.getWidth() / 2 - 50 / 2,
      y: stage.getHeight() / 2 - 50 / 2,
      draggable: true
    });

    // add cursor styling
    canvasImage.on('mouseover', function() {
      document.body.style.cursor = 'pointer';
    });
    canvasImage.on('mouseout', function() {
      document.body.style.cursor = 'default';
    });

    imagesLayer.add(canvasImage);
}

/*This code loads the images to the canvas when the browser window loads */
window.onload = function(){
    var sources = {};
        sources[0] = document.getElementById("building").src,
        sources[1] = document.getElementById("chair").src,
        sources[2] = document.getElementById("drink").src,
        sources[3] = document.getElementById("food").src,
        sources[4] = document.getElementById("fridge").src,
        sources[5] = document.getElementById("land").src,
        sources[6] = document.getElementById("money").src,
        sources[7] = document.getElementById("oven").src,
        sources[8] = document.getElementById("table").src,
        sources[9] = document.getElementById("van").src,

        sources[10] = document.getElementById("burger").src,
        sources[11] = document.getElementById("chips").src,
        sources[12] = document.getElementById("drink").src,
        sources[13] = document.getElementById("franchiseFee").src,
        sources[14] = document.getElementById("wages").src,

        sources[15] = document.getElementById("admin").src,
        sources[16] = document.getElementById("cleaners").src,
        sources[17] = document.getElementById("electricity").src,
        sources[18] = document.getElementById("insurance").src,
        sources[19] = document.getElementById("manager").src,
        sources[20] = document.getElementById("rates").src,
        sources[21] = document.getElementById("training").src,
        sources[22] = document.getElementById("water").src,

        sources[23] = document.getElementById("burger").src,
        sources[24] = document.getElementById("chips").src,
        sources[25] = document.getElementById("drink").src,

        sources[26] = document.getElementById("creditors").src,
        sources[27] = document.getElementById("electricity").src,
        sources[28] = document.getElementById("food").src,
        sources[29] = document.getElementById("hirePurchase").src,
        sources[30] = document.getElementById("loan").src,
        sources[31] = document.getElementById("overdraft").src,
        sources[32] = document.getElementById("payeTax").src,
        sources[33] = document.getElementById("tax").src

    loadImages(sources, drawImage);
    drawGameElements();
    drawDescriptionBoxes();
};

</script> 
```

最后的`window.onload()`功能是从 HTML 正文中的隐藏部分获取大量图像。

我在 HTML 中调用了三个 JavaScript 文件：

drawdescriptionboxes.js

```
function drawDescriptionBoxes(){
var assetsDescriptionBox = new Image();
var liabilitiesDescriptionBox = new Image();
var incomeDescriptionBox = new Image();
var expenditureDescriptionBox = new Image();
assetsDescriptionBox.src = 'images/box.png';
liabilitiesDescriptionBox.src = 'images/box.png';
incomeDescriptionBox.src = 'images/box.png';
expenditureDescriptionBox.src = 'images/box.png';

context.drawImage(assetsDescriptionBox, 70, 400, 120, 70);
context.drawImage(liabilitiesDescriptionBox, 300, 400, 120, 70);
context.drawImage(incomeDescriptionBox, 530, 400, 120, 70);
context.drawImage(expenditureDescriptionBox, 760, 400, 120, 70);

context.strokeText("Assets", 100, 490);
context.strokeText("Liabilities", 325, 490);
context.strokeText("Income", 550, 490);
context.strokeText("Expenditure", 775, 490);

}

function dragImageToBox(){

} 
```

drawleveloneelements.js：

```
/* This function draws the elements for level 1\. */
function drawLevelOneElements(){
    /*First, clear the canvas */ 
    context.clearRect(0, 0, myGameCanvas.width, myGameCanvas.height);
    /*This line clears all of the elements that were previously drawn on the canvas. */
    /*Then redraw the game elements */
    drawGameElements(); 
    /*Call the function to enable drag and drop */
    canvasState(document.getElementById('gameCanvas'));

    /*Create the four description areas, and place them near the bottom of the canvas */
    /*Create boxes with rounded corners for the description areas */
    CanvasRenderingContext2D.prototype.drawDescriptionArea = function(x, y, width, height, radius, stroke){
        if(typeof stroke == "undefined" ){
            stroke = true;
        }
        if(typeof radius === "undefined"){
            radius = 5;
        }
        this.beginPath();
        this.moveTo(x + radius, y);
        this.lineTo(x + width - radius, y);
        this.quadraticCurveTo(x + width, y, x + width, y + radius);
        this.lineTo(x + width, y + height - radius);
        this.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);
        this.lineTo(x + radius, y + height);
        this.quadraticCurveTo(x, y + height, x, y + height - radius);
        this.lineTo(x, y + radius);
        this.quadraticCurveTo(x, y, x + radius, y);
        this.closePath();
        if(stroke){
            context.stroke();
        }
    }

    context.drawDescriptionArea(70, 400, 120, 70);
    context.font = '25pt Calibri';
    context.strokeText('Asset', 90, 440);

    context.drawDescriptionArea(300, 400, 120, 70);
    context.strokeText('Liability', 310, 440);

    context.drawDescriptionArea(540, 400, 120, 70);
    context.strokeText('Income', 550, 440);

    context.drawDescriptionArea(750, 400, 180, 70);
    context.strokeText('Expenditure', 760, 440);

    /*Now draw the images to the canvas */
    /*First, create variables for the x & y coordinates of the image that will be drawn.
    the x & y coordinates should hold random numbers, so that the images will be 
    drawn in random locations on the canvas.*/
    var imageX = Math.floor(Math.random()*100);
    var imageY = Math.floor(Math.random()*100);
    var imageWidth = 50;
    var imageHeight = 50;

    /*Create a 'table' of positions that the images will be drawn to */
    var imagePositionsX = [20, 80, 140, 200, 260, 320, 380, 440, 500, 560];
    var imagePositionsY = [20, 60, 100, 140, 180, 220, 260, 300, 340, 380];

    /*Draw all images from assetsImageArray */
    /*Use a while loop to loop through the array, get each item and draw it. */
    var arrayIteration = 0;
    console.log('All Images Array length: ' + allImagesArray.length); /*Display the length of the array in the console, to check it's holding the correct number of images. */
    while(arrayIteration < allImagesArray.length){
        //var randomPositionX = Math.floor(Math.random()*10);
        //var randomPositionY = Math.floor(Math.random()*10);
        context.drawImage(allImagesArray[arrayIteration], imageX, imageY, imageWidth, imageHeight); /*Declare variables for image height and width, so it can be accessed elsewhere */
        //allImagesArray[arrayIteration].setDraggable = "true";
        allImagesArray[arrayIteration].setAttribute('draggable', 'true');
        console.log(arrayIteration); /*Display the current array position that's being drawn */
        arrayIteration = arrayIteration+1;
        /*Now try changing the values of imageX & imageY so that the next image is drawn to a 
        different location*/
        //imageX = imagePositionsX[randomPositionX];    /* imageX+(Math.floor(Math.random()*100)); */
        //imageY = imagePositionsY[randomPositionY];    /* imageY+(Math.floor(Math.random()*100));  */
        imageX = Math.floor(Math.random()*950);
        imageY = Math.floor(Math.random()*350);

    }

} 
```

和 startgamedrawgameelementsdrawstartbutton.js：

```
 /* Global variables */
var image = new Image();

/* This function starts the game, and calls all of the other functions required to play the game */
        function startGame(){
            preLoadImages();
        //  drawGameElements(); /*Remove this call from function startGame(), so that the score bar doesn't show while the start button is displayed */
            drawStartButton(); 

            /*Add event listener to the canvas, which will call drawLevelOneElements()
                when the start button is clicked*/
            myGameCanvas.addEventListener('click', function(e){
                console.log('click: ' + e.pageX + '/' + e.pageY);
                var mouseX = e.pageX - this.offsetLeft;
                var mouseY = e.pageY - this.offsetTop;
                if((mouseX > 260.5 && mouseX < 410.5+179) && (mouseY > 120 && mouseY < 120+180)){ /* Changing the '60' coordinates to 206 works for some reason */
                    drawLevelOneElements();
                    init();
                    /*Disable the event listener for clicking start button, because it continues to listen for a click */
                    this.removeEventListener('click',arguments.callee,false);
                } else {
                    console.log('no collision');
                }
            }, false);
        }

        /* This function draws the game elements */
        function drawGameElements(){

            /* Draw a line for the 'score bar'. */
            context.moveTo(0, 25);
            context.lineTo(1000, 25);
            context.stroke();

            /* Draw current level/ total levels on the left, and current score on the right. */
            context.font = "11pt Calibri"; /* Text font & size */
            context.strokeStyle = "black"; /* Font colour */
            context.strokeText(currentLevel + "/" + totalLevels, 10, 15);
            context.strokeText(currentScore, currentScorePositionX, currentScorePositionY);
        }

        /* This function draws a start button which the user can click to start the game */
        function drawStartButton(){
            image.onload = function(){
                context.drawImage(image, 410.5, 120);
            };
            image.src = "startButton.png";
            /* Now I need to add an event listener to the area of the canvas on 
                on which the button image is displayed, in order to 'listen' for 
                a click on the button */
            var boundingBox = myGameCanvas.getBoundingClientRect();
            //var mouseX = (mouse_event.clientX-boundingBox.left) * (myGameCanvas.width/boundingBox.width);
            //var mouseY = (mouse_event.clientY-boundingBox.top) * (myGameCanvas.height/boundingBox.height);
            boundingBox.onmousemove = function(e){
                var mouseX = e.pageX - this.offsetLeft;
                var mouseY = e.pageY - this.offsetTop;
                var pixels = context.getImageData(mouseX, mouseY, 1, 1);
            }               
        } 
```

当我通过右键单击文件并选择“使用 Firefox 打开”在浏览器中查看页面时，会显示所有图像，并且我可以将它们拖放到画布上。但是，当您在我找到它的 URL 上查看页面时，[http](http://users.aber.ac.uk/eef8/project/development/dragimagestoboxes/) ://users.aber.ac.uk/eef8/project/development/dragimagestoboxes/一旦您单击显示的图像之一，一切都会消失从画布上。

我不知道为什么会这样，因为我在本地保存的所有文件都与保存在服务器上的文件完全相同。

有人有想法么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T13:50:47.140

你看过控制台吗？

```
GET http://users.aber.ac.uk/eef8/project/development/dragimagestoboxes/drawLevelOneElements.js 404 (Not Found) users.aber.ac.uk:18
GET http://users.aber.ac.uk/eef8/project/development/dragimagestoboxes/images/startButton.png 404 (Not Found) users.aber.ac.uk:18
GET http://users.aber.ac.uk/eef8/project/development/dragimagestoboxes/images/liabilities/hirePurchase.jpg 404 (Not Found) users.aber.ac.uk:18
GET http://users.aber.ac.uk/eef8/project/development/dragimagestoboxes/images/liabilities/payeTax.jpg 404 (Not Found) users.aber.ac.uk:18
GET http://users.aber.ac.uk/eef8/project/development/dragimagestoboxes/images/expenses/direct/franchiseFee.jpg 404 (Not Found) users.aber.ac.uk:18
GET http://users.aber.ac.uk/eef8/project/development/dragimagestoboxes/images/liabilities/hirePurchase.jpg 404 (Not Found) users.aber.ac.uk:62
GET http://users.aber.ac.uk/eef8/project/development/dragimagestoboxes/images/expenses/direct/franchiseFee.jpg 404 (Not Found) users.aber.ac.uk:62
GET http://users.aber.ac.uk/eef8/project/development/dragimagestoboxes/images/liabilities/payeTax.jpg 404 (Not Found) users.aber.ac.uk:62 
```

看起来你忘记上传一些文件了。

# sql-server - 在 SQL 中选择不同格式的日期

> ID：13915298
> 
> 赞同：2
> 
> 时间：2012-12-17T13:41:21.100
> 
> 标签：sql-server

我有一个包含大量日期时间条目的表。我想选择按日期降序排列的不同 MONTH YEAR 字符串的列表。例如我想看

```
October 2012
September 2012
June 2012
July 2011 
```

查询需要是不同的，因为每个月/天都有多个条目。

这就是我所拥有的

```
SELECT  DISTINCT YEAR(DateRequested), datename(MONTH,[DateRequested])
FROM    [dbo].[MyDateData]
ORDER BY YEAR(DateRequested), MONTH([DateRequested]) 
```

但我收到此错误：

```
ORDER BY items must appear in the select list if SELECT DISTINCT is specified. 
```

感觉就像我快到了，但无法正确使用此语法。我正在使用 SQL Server 2012 - 谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T13:46:04.830

尝试;

```
SELECT monthYear FROM (
SELECT DISTINCT DATENAME(month,dateCol) + ' ' + 
                CONVERT(VARCHAR, DATEPART(year,dateCol)) monthYear, 
                CONVERT(varchar(6),dateCol, 112) orderCol
FROM yourTable ) A
ORDER BY CONVERT(INT,orderCol) desc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T13:43:03.397

您只需要确保 ORDER BY 行中的所有内容也在您的 SELECT 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T13:47:12.540

试试这个：

```
;WITH CTE
AS
(
  SELECT  DISTINCT 
     YEAR(DateRequested) "Year",
     DATENAME(MONTH,[DateRequested]) "Month"
  FROM YourDateTable
) 
SELECT * 
FROM CTE 
ORDER BY "Year", "Month" 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/4d2ef/4)

# c# - 对象已完成但尚未收集垃圾时的弱引用行为

> ID：13915302
> 
> 赞同：5
> 
> 时间：2012-12-17T13:41:40.173
> 
> 标签：c#, .net, garbage-collection, weak-references

这是一个关于 C#/.NET 中对象终结和收集的学术问题。后台阅读是 C# 语言规范的第 3.9 节，自动内存管理。

当没有对对象的显式引用时，它可能会被垃圾回收。它成为“有资格销毁”。在未来的某个时间点（例如，如果你强制垃圾回收），对象的析构函数将会运行。

在析构函数中，如果保存对对象的引用，则该对象将被最终确定，但不符合收集条件。这可能导致对象处于已完成但未收集的状态。规范的第 3.9 节有一个例子。

此时，对象确实还活着，因为它还没有被垃圾回收。但是，引用该对象的 WeakReference 报告 IsAlive 值为 false，表示该对象已被收集。

核心问题是——IsAlive 属性真正报告的是什么？我们知道我们不能相信此属性的值为 true，因为在您阅读它后不久该值可能会变为 false。但是 false 值是值得信赖的，并且意味着（根据文档）该对象已被垃圾收集。那么在这种情况下 IsAlive 属性告诉我们什么？不严格来说该对象是否已被垃圾回收，因为我们认为该对象处于已完成但未回收的状态。

这是一个显示行为的示例。

```
 public class Dog 
    {
        public static Dog KeepDogRef;

   public string Name { get; set; }

    public Dog(string name)
    {
        Name = name;
    }

    ~Dog()
    {
        Console.WriteLine("Dog destructor for " + Name + " called");
        Dog.KeepDogRef = this;
    }

    public void Bark()
    {
        Console.WriteLine(Name + " : Woof");
    }
} 
```

和主程序的代码。如果您运行代码，您将看到原始的 WeakReference 将 IsAlive 报告为 false，即使在我们重构对象之后也是如此。

```
 static void Main()
    {
        Dog dog = new Dog("Bowser");

        WeakReference dogRef = new WeakReference(dog);

        // Unref Bowser, now eligible for destruction
        dog = null;
        GC.Collect();
        GC.WaitForPendingFinalizers();

        // Bowser no longer alive
        Console.WriteLine(string.Format("Object still alive: {0}", dogRef.IsAlive));

        // Bowser alive again
        Dog newRef = Dog.KeepDogRef;
        newRef.Bark();   
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T14:05:54.303

如果您阅读 的所有文档[`WeakReference`](http://msdn.microsoft.com/en-us/library/hbh8w2zd.aspx)，很明显有不止一种类型的弱引用可用。默认是产生一个**短**的弱引用。但是您也可以创建专门针对复活场景的**长弱引用。**

从文档中[`TrackResurrection`](http://msdn.microsoft.com/en-us/library/system.weakreference.trackresurrection.aspx)：

> 获取当前 WeakReference 对象引用的对象在完成后是否被跟踪的指示。
> 
> 如果为 true，则弱引用为长弱引用，并且为构造函数`trackResurrection`中的参数指定了 true `WeakReference`。

所以我想说在解释`IsAlive`属性之前你必须了解这部分弱引用。

# android - 在 Android 中扫描无线电系统日志

> ID：13915306
> 
> 赞同：0
> 
> 时间：2012-12-17T13:41:52.803
> 
> 标签：android, radio, logcat

我正在尝试从 Android 中提取一些信息（例如 LAST_CALL_FAIL_CAUSE）。我在 Google 上找到的一些信息建议为此扫描无线电日志。但是，我不确定如何扫描这些日志或如何以编程方式访问它们。我在谷歌上搜索了这个，但找不到任何有用的东西。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T08:50:04.717

`LAST_CALL_FAIL_CAUSE`属于radio log，值的含义由modem的厂商定义。例如，`LAST_CALL_FAIL_CAUSE = 16`表示通话正常失败，`LAST_CALL_FAIL_CAUSE = 17`表示通话因忙线而失败。因此，您必须拥有调制解调器供应商代码才能知道确切的含义。

# android - 压缩后保持图像方向

> ID：13915307
> 
> 赞同：8
> 
> 时间：2012-12-17T13:41:56.523
> 
> 标签：android, android-image

这是我的代码

```
 //
        // reading an image captured using phone camera. Orientation of this
        // image is always return value 6 (ORIENTATION_ROTATE_90) no matter if
        // it is captured in landscape or portrait mode
        //
        Bitmap bmp = BitmapFactory.decodeFile(imagePath.getAbsolutePath());

        //
        // save as : I am compressing this image and writing it back. Orientation 
        //of this image always returns value 0 (ORIENTATION_UNDEFINED)
        imagePath = new File(imagePath.getAbsolutePath().replace(".jpg", "_1.jpg"));

        FileOutputStream fos0 = new FileOutputStream(imagePath);
        boolean b = bmp.compress(CompressFormat.JPEG, 10, fos0);
        fos0.flush();
        fos0.close();
        fos0 = null; 
```

压缩和保存后，图像旋转 90 度，但 ExifInterface 返回 0 (ORIENTATION_UNDEFINED)。任何指针，我怎样才能保留源图像的方向；在这种情况下，它是 6（或 ORIENTATION_ROTATE_90）。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T14:09:22.723

以下代码将通过其返回图像角度`ORIENTATION`。

```
public static float rotationForImage(Context context, Uri uri) {
        if (uri.getScheme().equals("content")) {
        String[] projection = { Images.ImageColumns.ORIENTATION };
        Cursor c = context.getContentResolver().query(
                uri, projection, null, null, null);
        if (c.moveToFirst()) {
            return c.getInt(0);
        }
    } else if (uri.getScheme().equals("file")) {
        try {
            ExifInterface exif = new ExifInterface(uri.getPath());
            int rotation = (int)exifOrientationToDegrees(
                    exif.getAttributeInt(ExifInterface.TAG_ORIENTATION,
                            ExifInterface.ORIENTATION_NORMAL));
            return rotation;
        } catch (IOException e) {
            Log.e(TAG, "Error checking exif", e);
        }
    }
        return 0f;
    }

    private static float exifOrientationToDegrees(int exifOrientation) {
    if (exifOrientation == ExifInterface.ORIENTATION_ROTATE_90) {
        return 90;
    } else if (exifOrientation == ExifInterface.ORIENTATION_ROTATE_180) {
        return 180;
    } else if (exifOrientation == ExifInterface.ORIENTATION_ROTATE_270) {
        return 270;
    }
    return 0;
}
} 
```

# r - R时间序列ddply

> ID：13915315
> 
> 赞同：2
> 
> 时间：2012-12-17T13:42:29.163
> 
> 标签：r, time-series, plyr, regression

我有一个包含城市、不同日期以及这些日期的温度的数据库（以下为简化格式）。我想为每个城市计算一段时间内的趋势，以及这种趋势是否显着。

我想我必须以某种方式将 ddply 与 lm 函数（例如 lm(date ~ temp)）结合起来并调用拟合系数，但不知道该怎么做......

可能有一个更简单的解决方案 - 非常感谢您帮助我；

W

```
City    Date    Temp (Celcius)
Amsterdam   Jan-01  21
Amsterdam   Mar-01  23
Amsterdam   May-01  25
Barcelona   Feb-01  20
Barcelona   Mar-01  19
Barcelona   May-01  25
Copenhagen  Jan-01  19
Copenhagen  Feb-01  23
Copenhagen  May-01  22 
```

我试过：

这是我尝试过的：

```
tempdata=read.csv("tempfile.csv", header=TRUE, sep=",", as.is=TRUE)
tempdata$Date <- as.Date(tempdata$Date, "%d/%m/%Y")

funcreg = function(x) {regmodel=lm(tempdata$Date ~ tempdata$Temperature) 
return(data.frame(regmodel$coefficients[2]))

}

ddply(tempdata, .(City), funcreg) 
```

给出以下输出：

```
 City regmodel.coefficients.2.
1  Amsterdam                 14.71244
2  Barcelona                 14.71244
3 Copenhagen                 14.71244 
```

输入：

```
structure(list(City = c("Amsterdam", "Amsterdam", "Amsterdam", 
"Barcelona", "Barcelona", "Barcelona", "Copenhagen", "Copenhagen", 
"Copenhagen"), Date = c("01/01/2001", "01/03/2001", "01/05/2001", 
"01/02/2001", "01/03/2001", "01/05/2001", "01/01/2001", "01/02/2001", 
"01/05/2001"), Temperature = c(21L, 23L, 25L, 20L, 19L, 25L, 
19L, 23L, 22L), X = c(NA, NA, NA, NA, NA, NA, NA, NA, NA)), .Names = c("City", 
"Date", "Temperature", "X"), class = "data.frame", row.names = c(NA, 
-9L)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T07:53:12.597

使用`x`而不是`tempdata`里面`funcreg`。您还应该在回归中切换变量。温度显然是这里的依赖项。

```
tempdata$Date <- as.Date(tempdata$Date,'%d/%m/%Y')

funcreg = function(x) {
  regmodel <- lm(Temperature ~ Date, data=x) 
  data.frame(trend = regmodel$coefficients[2], 
                 p = summary(regmodel)$coef["Date","Pr(>|t|)"])                       
}

library(plyr)
ddply(tempdata, .(City), funcreg)

        City      trend           p
1  Amsterdam 0.03333025 0.006125688
2  Barcelona 0.06301304 0.298501483
3 Copenhagen 0.01696590 0.660997625 
```

# c# - 使用智能卡签署 PDF 的过时代码

> ID：13915319
> 
> 赞同：0
> 
> 时间：2012-12-17T13:42:47.573
> 
> 标签：c#, itextsharp

我正在尝试使用带有智能卡的 itextsharp 签署 PDF 文件。我能找到的关于如何做到这一点的唯一示例来自[http://itextpdf.sourceforge.net/howtosign.html#signextitextsharp1](http://itextpdf.sourceforge.net/howtosign.html#signextitextsharp1)

然而，这个例子似乎已经过时了，它在与最新版本的 iTextSharp 一起使用时会出现各种编译错误：不再存在的方法、使用不适当的类等。

有没有人有这个代码的更新/工作版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T18:06:21.563

有关如何使用当前版本的 iText 和 iTextSharp 进行签名的信息，请[查看 PDF 文档的数字签名，](http://itextpdf.com/book/digitalsignatures) Bruno Lowagie 的白皮书（iText 软件）。

虽然代码示例是用 Java 编写的，但作者相信 Java 示例对于使用 iTextSharp 而不是 iText 的 C# 开发人员来说也很容易理解。

[可以从iTextSharp SVN 存储库](http://sourceforge.net/p/itextsharp/code/502/tree/tutorial/signatures/)中检出 C# 化的示例。

# c# - 如何在struct中初始化char数组

> ID：13915321
> 
> 赞同：5
> 
> 时间：2012-12-17T13:42:53.423
> 
> 标签：c#, .net, arrays, struct, initialization

如何在 C# 中初始化结构中的 char 数组我正在这样做

```
struct cell
{
    public char[] domain =new char[16];
    public int[] Peers;
    public int NumberOfPeers;
    public char assignValue;
} 
```

但是它给出的错误是我们无法在结构体中初始化一个数组！谁能告诉正确的方法

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-17T13:44:26.013

您可以使用构造函数

```
struct cell
{
    public cell(int charArraySize) : this()
    {
         domain = new char[arraySize];
    }

    public char[] domain;
    public int[] Peers;
    public int NumberOfPeers;
    public char assignValue;
} 
```

注意：即使使用结构，也不应该有公共字段，而是将它们封装在属性中。

并且能够*改变**结构*的值是一个更糟糕的问题——[可变结构是邪恶的](https://stackoverflow.com/questions/441309/why-are-mutable-structs-evil)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T23:19:28.467

.net 中值类型的一个主要限制是它们不能包含数组，即使是固定大小的数组，除非离开托管代码领域（C# 提供了一种使用`unsafe`and`fixed`关键字在值类型中包含固定大小数组的方法，但是使用该功能的代码在某些安全上下文中将无法使用）。它们可以包含对数组的引用，但如果复制了包含数组引用的结构，则副本将接收到与原始数组相同的引用。

虽然建议在大多数情况下，结构类型最好完全开放它所包含的内容（通过公共字段公开其整个状态），而不是假装是用胶带绑定在一起的变量集合之外的任何东西，其状态应该封装可变类对象（例如 a `System.Array`）状态的结构必须使用不同的模式。

如果一个结构应该表现为 64 个浮点数的值类型数组，并且希望实际将浮点数存储在 System.Array 中，而不是存储在 64 个单独的字段中，那么该结构可能应该包含一个私有字段`Arr`类型`float[]`。要读取元素`n`，请检查是否`Arr`为空。如果是，则返回零。否则，返回 的值`Arr[n]`。要编写 element `n`，请将临时变量设置`Arr2`为新变量，如果它不为空则`float[64]`复制。`Arr`然后设置`Arr2[n]`为所需的值，并替换`Arr`为`Arr2`. 请注意，立即将 a`float[]`存储到`Arr`，它将永远不会再被写入。如果尝试写入结构的第 5 个元素，该结构将收到一个新数组，其中包含正确的值；旧数组的元素 5 将保持不变。因此，该结构将表现为值类型数组（除了写入它会比写入普通数组慢得多）。

如果一个类型需要一个大数组，最好使用 a`float[][]`或 a `float[][][]`; 例如，可以使用 16 个数组中的 16 个数组中的 16 个数组中的 16 个元素来保存 4096 个元素。在这种情况下，写入元素需要生成/复制 a `float[16]`、 a`float[16][]`和 a `float[16][][]`; 三个大小为 16 的小数组可能优于两个大小为 64 的数组，并且几乎肯定会优于一个大小为 4096 的数组。

值类型语义当然很有用，但如前所述，如果结构包含数组，它们就不能非常有效地提供。如果元素数量很少，另一种设计是简单地为每个元素设置一个字段，并让索引属性访问器使用 switch 语句来读取或写入结构字段。有点恶心，但对于小于十几个元素的结构，它几乎肯定会比使用上述数组更有效。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-17T13:47:06.440

您可以（并且可能应该）使用类而不是结构（尽管它有所不同，但您不知道您将如何使用您的类型）。

或者你可以写一个构造函数。但请注意，结构实例构造函数必须至少接受一个参数。

如果您坚持使用该结构，请确保将其设为不可变结构。这样做的一种方法是创建所有字段`readonly`，然后在您的实例构造函数中分配给它们。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-17T13:45:56.100

您可以[`constructor`](http://msdn.microsoft.com/en-us/library/vstudio/ace5hbzh.aspx)为此使用 a 。看看 MSDN。

```
struct cell
{
    public cell(int size)
    {
         domain = new char[size];
         this.Peers = Peers;
         this.NumberOfPeers = NumberOfPeers;
         this.assignValue = assignValue;
    }    
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-17T13:49:41.467

尝试使用这样的东西：

```
[StructLayout(LayoutKind.Sequential)]

public class TCardDB

{

public TCardDB(string strCardNo)

{

CardNo = strCardNo;

FName = LName = string.Empty;

OpenMode = FingerCount = 0;

Finger1 = new string[3];

Finger2 = new string[3];

}

..........

..........

} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-09-22T15:07:28.140

请参阅此问题的第一条评论
[C# array within a struct](https://stackoverflow.com/questions/8704161/c-sharp-array-within-a-struct)
Fixed Size Buffers - [msdn.microsoft.com/en-us/library/zycewsya.aspx](http://msdn.microsoft.com/en-us/library/zycewsya.aspx)
这对我有用

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-07-14T09:21:50.237

专门针对 char[] ；

有点奇怪，我们在处理字符数组时遇到了这么多困难，当我们可以轻松地添加一个字符串时......无论如何这只是一个 char[]......具有您需要的所有索引功能。

无论如何，这对我有用。

# javascript - div中的按钮在jquery对话框中不起作用

> ID：13915324
> 
> 赞同：0
> 
> 时间：2012-12-17T13:42:56.060
> 
> 标签：javascript, jquery, asp.net-mvc-3

我`uploadify`在我的 MVC3 应用程序中使用文件上传控件。

我看到了 jQuery Dialog 的非常奇怪的行为。

我`flash Browse`在我的视图中使用一个按钮。单击该按钮时，它会显示所有目录以浏览和上传所选文件并被上传。

起初，我尝试过不使用 jQuery 对话框。它完美地工作并上传文件并能够取消所有浏览器中的文件。

当我使用容器在 jQuery 对话框中呈现时，`Browse`按钮显示在 中`Firefox`，但我无法单击该按钮，它在 IE 和 Chrome 中有效，但在 Chrome 中无法取消上传。

这是我的代码：

**我认为的 HTML 代码：**

```
<input type="button" id="btnImg"/>
    <div id="fileupload">
        <div style="clear: none;">
            File to Upload:
            <input type="file" name="file_upload" id="file_upload" style="padding-left: 50px;"/><hr />
        </div>
        <p style="text-align: right;">
            <input type="submit" id="selectimage" value="Ok" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only"/>
            <input type="submit" id="cancelimage" value="Cancel" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" onclick="cancelupload();" />
        </p>
    </div> 
```

**Javascript代码：**

```
$("#btnImg").click(function () {
    $("#fileupload").dialog({
        width: '511',
        height: '200',
        show: "blind",
        position: [300, 500]
    });
}); 
```

单击时`btnImg`，将弹出弹出窗口。

如何解决这个问题？这怎么发生的 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T14:12:20.893

您很可能必须使用 live() 函数将单击处理程序绑定到按钮，或者您必须在创建对话框的 div 上调用 dialog() 之后绑定单击处理程序。

此外，您使用“btnImg”作为 id，但我在上面的 HTML 中没有看到任何使用它作为 id 的内容。这是一个错字，还是我们只是没有看到

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T09:18:01.613

我可以解决我的问题。

这是它的解决方案。

```
$("#btnImg").click(function () {
            $("#fileupload").css("visibility", "visible");
            $("#fileupload").dialog({
                width: '511',
                height: '200',
                modal:true,
                //show: "blind",
                position: [300, 500],
                open: function (type, data) {
                    $(this).parent().appendTo("form");
                }
            });
        }); 
```

问题是我的 div 不在`form`标签内。因此，如果没有嵌套在表单标签中，jQuery 会忽略窗口上传。

# codeigniter - 在 Tank Auth 中使用电子邮件地址作为用户名

> ID：13915328
> 
> 赞同：0
> 
> 时间：2012-12-17T13:43:15.923
> 
> 标签：codeigniter, email, tankauth

我正在使用 Tank Auth 开展一个项目，我想使用我的用户的电子邮件地址作为他们的用户名来登录应用程序。

这是我第一次使用这样一个庞大的库，我很困惑。

在注册视图中，我已经注释掉了电子邮件地址的输入，并且在 Tank Auth 库（第 177 行）中，我也将电子邮件设置为用户名。

现在，当我尝试注册时，我收到一个错误，即我不能在用户名中包含下划线或@-符号。我在哪里可以找到这些限制？因为我想将电子邮件地址放在这里并将它们存储为用户名。

任何建议都非常受欢迎。如果您需要更多信息，请询问:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T14:02:40.120

我认为使用 Tank Auth 可以做到这一点而不会造成大麻烦。

Tank Auth 提供通过电子邮件、用户名或两者激活登录的选项。

只需转到 application/config/tank_auth.php 并编辑以下行

```
$config['login_by_username'] = FALSE;
$config['login_by_email'] = TRUE; 
```

然后，如果您愿意，您可以从“用户”表、注册表单等中完全删除用户名字段。

# sql - 将 SQL 与条件合并

> ID：13915329
> 
> 赞同：0
> 
> 时间：2012-12-17T13:43:18.573
> 
> 标签：sql, ssis

我有一个场景，我需要用户合并 SQL 语句来同步两个表。假设我有两个表表 A 和表 B。除了表 A 中的一个额外列之外，架构是相同的。那个额外列是一个标志，它告诉我哪些记录已准备好在表 B 中插入/更新。让我们说该标志列是 IsReady。这将是真或假。

我可以在 Merge 语句中使用 Isready=True 还是我需要一个临时表将所有记录从表 A 移动到 IsReady=True 的临时表，然后在 TempTable 和表 B 上使用 Merge SQL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T13:46:46.693

是的，您可以在合并条件中使用该列。

```
merge tableB targetTable
using tableA sourceTable
on sourceTable.IsReady = 1 and [any other condition]
when not matched then
insert ...
when matched and [...] then
update ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T14:27:12.633

这可能会帮助你，

```
merge into tableB 
using tableA  
on tableB.IsReady=true
when not matched then
insert (tableB.field1,tableB.field2..)
values (tableA.field1,tableA.field2..);
commit; 
```

# c - 挂钩窗口消息循环 WM_CLOSE

> ID：13915332
> 
> 赞同：0
> 
> 时间：2012-12-17T13:43:47.463
> 
> 标签：c

我想“保护”某个窗口不被关闭。所以我想挂钩 WM_CLOSE、WM_DESTOY 或 WM_QUIT。这就是我试图这样做的：

```
LRESULT CALLBACK WindowHookProc(int nCode, WPARAM wParam, LPARAM lParam)
{
    if (nCode >= 0)
    {
        MSG* msg = (MSG*)lParam;
        //if (msg->hwnd == GetForegroundWindow())
        {
            if (msg->message == WM_CLOSE || msg->message == WM_QUIT || msg->message == WM_DESTROY)
            {
                //MessageBox(0, "TEST", "", 0);
                msg->message = 0;
                CallNextHookEx(hMsg, nCode, (WPARAM)NULL, (LPARAM)NULL);
                return TRUE;
            }
        }
    }

    CallNextHookEx(hMsg, nCode, wParam, lParam);
} 
```

我试过：

*   返回 TRUE 或 FALSE
*   使用 NULL 作为 LPARAM 调用 CallNextHookEx 或将 msg->message 编辑为 0

另外我注意到，如果我挂钩 WH_GETMESSAGE 它不会“阻止”消息循环。但它通过挂钩 WH_CALLWNDPROC 来实现。当 msg->message 等于 WM_CLOSE 时，我通过提示消息框发现了这一点。

预先感谢，问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T14:18:35.163

与其尝试安装挂钩，不如将窗口子类化并让您的子类 WndProc`WM_CLOSE`在转发所有其他消息时忽略。

你不能也不应该试图停止`WM_QUIT`。正如罗德里戈指出的那样，你无能为力`WM_DESTROY`。那时，`DestroyWindow`已经调用了，无论您喜欢与否，您的窗口都会消失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T15:03:32.090

WH_GETMESSAGE 为从消息队列中检索到的消息安装挂钩。它确实允许您修改消息。但问题是 WM_CLOSE 不是用 PostMessage() 发送到消息队列，而是用 SendMessage() 发送的。这个钩子看不到。

WH_CALLWNDPROC 安装一个在窗口过程被调用之前运行的钩子。这将允许您查看 WM_CLOSE。但是，您不能修改消息或使其消失。

没有钩子可以让你做你想做的事。相反，您必须对窗口过程进行*子类化。*以便在窗口自己的过程之前调用您自己的自定义窗口过程。现在您可以通过不调用旧的窗口过程来简单地过滤 WM_CLOSE。

请注意，您仍然需要与 SetWindowsHookEx() 提供的相同类型的管道，您仍然需要将带有窗口过程的 DLL 注入进程中。最好的方法是仍然使用 SetWindowsHookEx 来使用一个不会做任何事情的虚拟钩子来完成它。

# java - SWIG：将 java:byte[] 转换为 C:(void*)

> ID：13915333
> 
> 赞同：1
> 
> 时间：2012-12-17T13:43:48.837
> 
> 标签：java, c, type-conversion, byte, swig

> **可能重复：**
> [将数组作为指针+大小或范围传递给包装函数](https://stackoverflow.com/questions/11584599/pass-an-array-to-a-wrapped-function-as-pointersize-or-range)

我目前正在学习[swig](http://www.swig.org/)，并且正在使用 C api 来包装 stdio.h。所以，我的 wig 文件如下所示：

```
%module jstdio

%{
#include <stdio.h>
%}

FILE* fopen(const char* path, const char*  mode);
int fclose( FILE* fp);
size_t fread(void *ptr, size_t size, size_t nmemb, FILE *stream);
size_t fwrite(const void *ptr, size_t size, size_t nmemb,FILE *stream); 
```

我的java类是：

```
public class CFile
   {
   private SWIGTYPE_p_JSTDIO ptr;
   public CFile(String path,String mode) throws IOException
         {
         this.ptr=jstdio.fopen(path,mode);
         if(this.ptr==null) ... //throw...
         }
   (...)
   public int write(byte[] array,int pos,int length) throws IOException
        {
        (... here I should call jstdio.fwrite )
        }
   public int read(byte[] array,int pos,int length) throws IOException
        {
        (... here I should call jstdio.fread )
        }
   (...)
   } 
```

现在，对于读/写，告诉 swig 将我的 java 字节数组转换为 (void*) ptr 的正确方法是什么？我想我需要使用 %typemap 但我没有正确的使用方法？

# python - 如何在Python中打印范围内的单词？

> ID：13915335
> 
> 赞同：0
> 
> 时间：2012-12-17T13:43:51.213
> 
> 标签：python

假设我有以下字符串：

> `"Python is a programming language that lets you work more quickly and integrate your systems more effectively. You can learn to use Python and see almost immediate gains in productivity and lower maintenance costs."`

起始字位置：5
结束字位置：10

从 5 到 10 的位置打印所有单词有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T13:48:57.720

假设您需要从位置 5 到 10 的整个单词（而不是字符）（包括位置 5 到 10），您可以执行以下操作：

```
print sentence.split(" ")[4:10] 
```

例如：

```
>>> print "Python is a programming language that lets you work more quickly \
       and integrate your systems more effectively. You can learn to use \
       Python and see almost immediate gains in productivity and lower \
       maintenance costs.".split(" ")[4:10]

['language', 'that', 'lets', 'you', 'work', 'more'] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T13:45:32.727

像这样，假设`words`是字符串：

```
print words.split()[4:10] 
```

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-12-17T13:46:03.293

这是基本的东西，你会这样做：

```
print "my words are right here haha lol"[5:11] 
```

您很可能应该看一下：[http](http://effbot.org/zone/python-list.htm) ://effbot.org/zone/python-list.htm ，因为 python 字符串类似于列表，并且可以对它们执行许多列表功能，例如索引，这就是您的问题询问。

# django - 如何使用 django-tables2 从自定义 sql 呈现表？

> ID：13915339
> 
> 赞同：4
> 
> 时间：2012-12-17T13:44:18.997
> 
> 标签：django, django-tables2

我正在使用 Django 和 django-tables2 在 Web 界面中很好地表示 sql 查询。我有一个遗留的 sql 代码，通过标准 models.py 定义它非常复杂。

问题是：如何使用 django-tables2 从自定义 sql 查询中呈现表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T14:02:52.053

[有关使用数据填充表格](http://django-tables2.readthedocs.org/en/latest/#populating-a-table-with-data)的文档显示了如何使用字典列表作为输入数据来创建表格。

```
import django_tables2 as tables

data = [
    {"name": "Bradley"},
    {"name": "Stevie"},
]

class NameTable(tables.Table):
    name = tables.Column()

table = NameTable(data) 
```

假设您的自定义 sql 查询以类似的格式返回数据，您应该能够使用相同的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T23:07:17.887

好吧，我没有正确理解 djt2 的概念。所以我应该使用条件运算符渲染它。现在它可以与 django 的 Manager.raw() 完美配合，并返回漂亮的表格。

```
{% load render_table from django_tables2%}
 <link rel="stylesheet" href="{{ STATIC_URL }}django_tables2/themes/paleblue/css/screen.css" />

            {% if result%}
        {%render_table result%}
            {%endif%} 
```

`

# c# - 验证网站字符串 c#

> ID：13915340
> 
> 赞同：1
> 
> 时间：2012-12-17T13:44:22.083
> 
> 标签：c#, asp.net, validation

我有一个表格，用户可以在那里输入网站。问题是一些用户把他们的电子邮件地址放在我不想要的地方。我想要一种方法来检查网址是否结构良好。例如没有@，必须有一个根域。www 子域是可选的。我无法在任何地方找到这个。

我试过这段代码

```
if (!Uri.TryCreate("http://" + websiteurl, UriKind.Absolute, out uri) || null == uri) 
```

错误时返回 false 但我的问题是它仍然可以在没有根域的情况下进行验证，例如我可以输入

```
http://websitename 
```

并验证我不想要的罚款。当我输入时它确实返回 false

```
http://websitename@. 
```

有没有办法可以克服这个问题？我还添加了

http:// 在 passthrough 值中，因为 url 从不验证。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T13:48:36.757

您可以使用：

```
Uri.IsWellFormedUriString(inputUrl, UriKind.RelativeOrAbsolute) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T13:47:29.673

根据您的性能需求，也许`HttpWebRequest`为他们提供的网站 url 快速发布并验证您是否收到成功响应可能是一个不错的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T13:49:56.707

您可以尝试使用正则表达式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T14:08:24.670

**Uri.IsWellFormattedUriString**不会解决这里的问题，它包括区分有效 Url 和电子邮件地址的能力。两者都是格式良好的 Uris。

使用正则表达式。这是使用 C# 的 MS 论坛中的一个：

[使用正则表达式验证 URL](http://social.msdn.microsoft.com/Forums/en-US/regexp/thread/079e783a-220f-4f67-9c74-426dbb4f20b9)

但是你应该在它被发送到服务器之前真正验证它。如果您使用 Peter Blum 验证器，他已经为您完成了工作。

[Peter Blum 的验证器](http://learningdes.peterblum.com/Validation/Validators/Controls/RegexValidator.aspx)

或者，如果您想放入自己的 JavaScript 文件，请查看这个 StackOverflow 线程。

[使用 jQuery 进行 URL 验证](https://stackoverflow.com/questions/1303872/trying-to-validate-url-using-javascript)

# java - appengine-maven-plugin 配置选项，例如 jvm 标志

> ID：13915341
> 
> 赞同：10
> 
> 时间：2012-12-17T13:44:21.893
> 
> 标签：java, google-app-engine, maven

从 1.7.4 版开始。Google App Engine 的官方 appengine-maven-plugin 由 Google 发布。它有一个任务 appengine:devserver 来启动本地开发服务器。

这个插件似乎没有任何 Maven 配置选项。

我想知道如何 a) 提供者 jvm 标志 b) 禁用新版本检查（脱机工作时）

请注意，到目前为止，我一直在使用非官方的 net.kindleit maven-gae-plugin，例如：

```
<plugin>
    <groupId>net.kindleit</groupId>
    <artifactId>maven-gae-plugin</artifactId>
    <version>0.9.4</version>
    <configuration>
        <disableUpdateCheck>true</disableUpdateCheck>
        <javaAgent>${env.REBEL_HOME}/jrebel.jar</javaAgent>
        <jvmFlags>
            <jvmFlag>-noverify</jvmFlag>
            <jvmFlag>-Ddatastore.backing_store=${project.basedir}/local_db.bin</jvmFlag>
            <jvmFlag>-Ddatastore.default_high_rep_job_policy_unapplied_job_pct=20</jvmFlag>
            <jvmFlag>-Drebel.spring_data_plugin=true</jvmFlag>
        </jvmFlags>
        <wait>true</wait>
    </configuration>
    <dependencies>
        <dependency>
            <groupId>com.google.appengine</groupId>
            <artifactId>appengine-tools-sdk</artifactId>
            <version>${com.google.appengine.version}</version>
        </dependency>
        <dependency>
            <groupId>com.google.appengine</groupId>
            <artifactId>appengine-api-1.0-sdk</artifactId>
            <version>${com.google.appengine.version}</version>
        </dependency>
    </dependencies>
</plugin> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-18T20:19:03.650

我写了插件，所以我想这是我的错。appcfg 操作（如更新/回滚/等）很好地支持该配置，但我显然需要为开发服务器修复一些问题。我会继续讨论的，应该很快就会有更新。

更新：我已经推送了一个支持 devserver 目标配置的快照构建。它在 1.7.5-SNAPSHOT 中。

您需要阅读此内容才能使用快照构建：[http ://code.google.com/p/appengine-maven-plugin/](http://code.google.com/p/appengine-maven-plugin/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-20T21:53:45.680

看起来 SDK 和 Maven 插件的 1.7.5 现在可以从普通的 Maven 存储库中获得，因此只需将这些依赖项更新到 1.7.5 版本并省略 SNAPSHOT 存储库的声明就足够了。1.7.5 maven-appserver-plugin 似乎确实支持 jvmFlags，如下所示：

```
<configuration>
    <jvmFlags>
        <jvmFlag>-Ddatastore.default_high_rep_job_policy_unapplied_job_pct=20</jvmFlag>
    </jvmFlags>
</configuration> 
```

是的！

感谢 MattStep 和 Google 团队！

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-18T05:14:18.353

我自己也有这个问题。检查插件的实际来源，DevAppServerRunner 零支持将任何类型的额外参数传递给开发服务器。目前看来最好的方法是使用非官方插件。

[DevAppServerRunner.java 的源代码](http://code.google.com/p/appengine-maven-plugin/source/browse/src/main/java/com/google/appengine/DevAppServerRunner.java)

# iphone - 不允许操作(1)

> ID：13915346
> 
> 赞同：1
> 
> 时间：2012-12-17T13:44:26.467
> 
> 标签：iphone, ios, ipad

我正在做一个 iphone 应用程序，我的代码是否可以正常工作而没有任何错误，但是当我构建代码时它失败了。我收到一个错误，比如

> rsync：重命名“/Users/pcmac/Desktop/Digidrive(IPhone)/Build/RestKit/Support/.svn/.format.0FKOPh”->“RestKit/Support/.svn/format”：不允许操作 (1)

我一次收到很多这个错误，最后说：

```
Command /bin/sh failed with exit code 23 
```

谁能给我解决方案来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T13:54:58.630

看来您已经通过 Subversion (SVN) 添加了 RestKit。这真的是你想要的吗？为什么不从 CocoaPods 获取此依赖项或从[RestKit.org](http://restkit.org)下载它[作为](http://cocoapods.org)源包？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T13:56:53.830

我怀疑 .svn/.format.OFKOPh 的文件权限；检查它们：

*   打开终端窗口

*   更改为 .svn 目录：
    cd /Users/pcmac/Desktop/Digidrive(IPhone)/Build/RestKit/Support/.svn/

*   检查权限：ls -la .format*

*   如果权限错误（即不允许移动文件）：

    chmod 644 .format.OFKOPh

# groovy - 编译 Groovy 项目时更改 Gradle 的工作目录

> ID：13915351
> 
> 赞同：19
> 
> 时间：2012-12-17T13:44:49.213
> 
> 标签：groovy, gradle

编译 groovy 项目时，gradle 会在`$projectRoot/build/`. 有没有办法将其配置为例如绝对路径？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-12-17T13:56:24.313

就在这里。您可以在构建脚本中加入以下行：

```
buildDir = 'your_directory' 
```

或在`gradle.properties`文件中（在这种情况下没有引号`your_directory`）。

* * *

构建目录是一个项目属性。您可以通过键入以下内容查看所有可用的项目属性：

```
gradle properties 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-01-31T14:48:24.213

您可以设置`project.buildDir`在您的`build.gradle`，或`buildDir = PATH`在`gradle.properties`。

从这样的环境变量：

```
export GRADLE_OPTS=-Dorg.gradle.project.buildDir=/tmp/gradle-build 
```

请参阅此处文档的构建环境部分： [https ://docs.gradle.org/current/userguide/build_environment.html#sec:gradle_environment_variables](https://docs.gradle.org/current/userguide/build_environment.html#sec:gradle_environment_variables)

并在此处编写构建脚本（用于 buildDir 属性）： [https ://docs.gradle.org/current/userguide/writing_build_scripts.html](https://docs.gradle.org/current/userguide/writing_build_scripts.html)

*（写这篇文章时 gradle 的当前版本：4.5）*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-24T04:20:59.357

您可以将 project.buildDir = 'your/directory' 添加到文件**build.gradle** 中，您可以将其放置在单独行中的任何位置

# javascript - 如何隐藏 Android WebView 通知？

> ID：13915354
> 
> 赞同：1
> 
> 时间：2012-12-17T13:44:59.497
> 
> 标签：javascript, android, android-layout, android-webview

我在一个布局中使用 8 - 10 个不同的 WebView，并在每个 WebView 中加载不同的内容。

加载 Webview 时会显示不同的消息，例如“正在加载..”“处理中..”等。

![在此处输入图像描述](../Images/45275361a88c6afd30e27af08226d646.png)

有什么办法可以隐藏这些通知吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T14:05:10.477

尝试使用`HttpClient`获取网页的html代码，然后使用`WebView.loadData`将整个页面加载到WebView中。

```
private class exampleHttpTask extends AsyncTask<Integer, Integer, String> {
    public String convertStreamToString(InputStream is, String charset) throws IOException {
        if (is != null) {
            Writer writer = new StringWriter();
            char[] buffer = new char[1024];
            try {
                Reader reader = new BufferedReader(new InputStreamReader(is, charset));
                int n;
                while ((n = reader.read(buffer)) != -1) {
                    writer.write(buffer, 0, n);
                }
            } finally {
                is.close();
            }
            return writer.toString();
        } else {
            return "";
        }
    }

    protected String doInBackground(Integer... params) {
        String r = "";
        try {
            HttpClient hc = new DefaultHttpClient();
            HttpGet get = new HttpGet("http://google.com"); // replace with the url
            HttpResponse hr = hc.execute(get);

            if(hr.getStatusLine().getStatusCode() == HttpStatus.SC_OK) {
                InputStream is = hr.getEntity().getContent();
                r = convertStreamToString(is, "UTF-8");
            } else {
                r = "Error";
            }
        } catch(Exception e){
            e.printStackTrace();
        }
        return null;
    }

    protected void onPostExecute(String result) {
        WebView wv = (WebView) findViewById(R.id.web_view); // replace web_view with the webView id
        wv.loadData(result, "text/html", "utf-8");
    }

    protected void onPreExecute() {
    }

} 
```

然后调用`new exampleHttpTask().exec()`加载网页。

# forms - 无法在 MS Access 表单中编辑数据，它显示“记录集不可更新”

> ID：13915355
> 
> 赞同：3
> 
> 时间：2012-12-17T13:45:08.860
> 
> 标签：forms, ms-access, ms-access-2010

我有一个表单，它包含一个子表单，它根据输入字段中的内容显示来自简单查询的数据。

我已将两种表单的属性设置为以下，但我仍然遇到“记录集不可更新”消息。

记录集类型：动态集

允许添加：是
允许删除：是
允许编辑：是
允许过滤器：是
记录锁定：无锁定

要改变什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-09-17T21:46:37.800

您的查询链接到的表或查询之一可能没有主键。

或（这是我遇到的问题）在查询生成器中，确保`Group By`未启用该行。当您禁用它时，查询将变为可编辑。

分组方式已启用

[![分组依据已启用](../Images/293214563211e5e43efc50803a2ba3ae.png)](https://i.stack.imgur.com/XAFbQ.png)

右键单击该行并禁用`Totals`

[![右键单击行](../Images/37e989b3619e3c448f422fb8f8f6d9f9.png)](https://i.stack.imgur.com/PeXpo.png)

分组方式已禁用

[![分组方式已禁用](../Images/aa44d9c9d6c4a558ad4ea7bd31d8e28c.png)](https://i.stack.imgur.com/prZhk.png)

[这个页面有一些很好的故障排除信息](http://www.fmsinc.com/MicrosoftAccess/query/non-updateable/index.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T14:35:33.450

使 Text0 未绑定（删除 Navn 作为控制源）。你有什么相当于一个循环引用。

您告诉表单不显示除查询限制之外的任何数据，但是您让查询不显示除表单中的任何数据之外的任何数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-24T13:54:19.223

我在使用表单向导创建的 Access 2016 表单中遇到了这个错误。它将一些变量（如数据输入）设置为否。但是将表单从编辑中锁定的是过滤器和排序。当我重新打开表单时，我不得不告诉过滤器和排序“否”，什么都没有显示。我过滤了一些东西，然后清除了过滤器。现在表格正在工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-27T10:45:17.627

就我而言，我制作了一张表格，在其中加入了来自其他各种表格的可能组合混合以及许多相应的多对一关系。在仅使用这个组合表的后续查询中，如果我检查了查询属性表中的“唯一值”，它将变得不可更新。检查“唯一记录”可以正常工作。

缺点是，当过滤查询中的一个组合字段时，我现在从组合表中获取所有这些行（记录），该特定字段已获得过滤器值。如果我检查“唯一值”，我不会明白这一点。

我想解决方案是进行两个单独的查询：一个不可更新，仅用于查询，然后是一个复制查询（除了在需要更新时取消选中“唯一值”）。

至少你的关系是正确的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-07T23:02:46.343

我遇到了这个问题，这是由于表之间的关系。我有一些设置为不确定，并认为这是导致问题的原因。一旦我修改了我的表关系以便所有都是一对多的，我就能够编辑查询/表单中的字段。

-请注意，要建立一对多关系，关系中的一个字段必须是键或设置为唯一。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-16T06:44:39.327

损坏的表有时会丢失它们的主键，这可能是“记录集不可更新”消息的原因。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2016-04-15T20:02:19.707

在上面`Allow Additions: Yes`你应该有类似的东西 `Allow datainput`。确保此字段设置为`false`。如果您在选择此字段时阅读状态栏评论，您将理解为什么您的表格突然变得无法从您的公式中编辑:)

# java - 在 JVM 中测量花费在 GC 上的时间

> ID：13915357
> 
> 赞同：16
> 
> 时间：2012-12-17T13:45:16.413
> 
> 标签：java, performance, garbage-collection, jvm, qa

假设我正在测试一个 Java 服务器应用程序。我知道完成考试需要多少时间。现在我想知道在那次测试期间在 GC 上花了多少钱。我该怎么做？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-17T13:50:31.953

> 我猜当 GC（垃圾收集器）工作时，应用程序停止并在 GC 完成时恢复

我不认为这是一个安全的假设。您确定垃圾收集器没有与您的应用程序代码并行工作吗？

要测量收集垃圾所花费的时间，您可以查询[Garbage Collector MXBean](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/management/GarbageCollectorMXBean.html)。

试试这个：

```
public static void main(String[] args)  {
    System.out.println("collectionTime = " + getGarbageCollectionTime());
}

private static long getGarbageCollectionTime() {
    long collectionTime = 0;
    for (GarbageCollectorMXBean garbageCollectorMXBean : ManagementFactory.getGarbageCollectorMXBeans()) {
        collectionTime += garbageCollectorMXBean.getCollectionTime();
    }
    return collectionTime;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-17T13:50:04.177

最简单的方法是在启动 JVM 时使用`-Xloggc`和选项。`-XX:-PrintGCTimeStamps`我认为它会打印出垃圾收集需要多长时间。

[http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html](http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-17T13:51:19.077

此性能指标由 JVM 记录，并可通过 JMX 访问。对于交互式监控，使用 JConsole 连接到正在运行的 JVM，然后在“VM Summary”选项卡中会显示如下内容：

> 垃圾收集器：名称 = 'Copy'，集合 = 26，总时间花费 = 0.183 秒垃圾收集器：名称 = 'MarkSweepCompact'，集合 = 2，总时间花费 = 0.168 秒

您还可以以编程方式查询 JMX。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-19T22:15:22.673

另一个方便的解决方案是在测试完成后针对您的流程运行`jstat -gc`（[文档）。](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/share/jstat.html)这将为您提供关于在 JVM 的生命周期中在 GC 中花费了多少时间的汇总输出。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-17T13:50:58.547

启用垃圾收集日志。如[文档所述](http://www.oracle.com/technetwork/java/javase/gc-tuning-6-140523.html)，您可以使用`-verbose:gc`,`-XX:+PrintGCDetails`和`-XX:+PrintGCTimeStamps`标志。`-Xloggc`标志可用于将它们定向到文件。

生成的日志是人类可读的，但为了获得最大利益，您可能希望它们通过分析器运行。[此线程](https://stackoverflow.com/questions/541832/know-of-any-java-garbage-collection-log-analysis-tools)中列出了此类工具。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-17T13:51:21.453

有不同的 GC 算法表现不同。我最近读了一篇关于这个主题的[好文章](http://www.javaworld.com/javaworld/jw-10-2012/121010-jvm-performance-optimization-garbage-collection.html)，如果你想了解更多，我可以推荐。

您可以使用以下命令行选项启动应用程序`-verbose:gc -XX:+PrintGCDateStamps -XX:+PrintGCDetails`并获取有关 GC 的信息。

这是日志消息的示例：

> 2012-12-17T03:02:15.590-0500: [GC [PSYoungGen: 40934K->2670K(29440K)] 48211K->14511K(73152K)，0.5745260 秒] [时间：用户 = 0.08 系统 = 0.01，实际 = 0.58 秒]

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-09-26T07:37:31.540

类似于使用[ManagementFactory的@Steve McLeod 的答案，因为 Java 8 这也可以使用](https://docs.oracle.com/javase/9/docs/api/java/lang/management/ManagementFactory.html)[Java 流](https://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html)在一行中编写：

```
long collectionTime = ManagementFactory.getGarbageCollectorMXBeans().stream().mapToLong(mxBean -> mxBean.getCollectionTime()).sum(); 
```

# c# - 如何在 ODBC 查询中参数化表名

> ID：13915358
> 
> 赞同：1
> 
> 时间：2012-12-17T13:45:17.343
> 
> 标签：c#, asp.net, sql-server, odbc

我有一个到数据库的 ODBC 连接，我希望用户能够查看任何表中的数据。由于这是一个 ASP.net 应用程序，我不能相信发送的表名也不包含 nasties。我曾尝试使用参数化查询，但我总是收到一条错误消息，提示我“*必须声明表变量*”——这似乎是一个问题，因为它是表名

```
 string sql = "SELECT TOP 10 * FROM ? ";
 OdbcCommand command = new OdbcCommand(sql, dbConnection);
 command.Parameters.Add(new OdbcParameter("@table", tableName));
 OdbcDataAdapter adapter = new OdbcDataAdapter();
 adapter.SelectCommand = command;
 adapter.Fill(tableData); 
```

以安全的方式实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T13:50:35.290

使用存储过程，这是最安全的方法。

一些提示：

1.  您可能还可以使用`System.Data.SqlClient`命名空间对象
2.  `using`在语句中包含您的连接、命令和适配器对象初始化

这是一个简单的例子：

```
string sqlStoredProcedure = "SelectFromTable";
using (OdbcConnection dbConnection = new OdbcConnection(dbConnectionString))
{
    dbConnection.Open();
    using (OdbcCommand command = new OdbcCommand(sqlStoredProcedure, dbConnection))
    {
        command.CommandType = System.Data.CommandType.StoredProcedure;
        command.Parameters.Add(new OdbcParameter("@table", tableName));
        using (OdbcDataAdapter adapter = new OdbcDataAdapter(command))
        {
            adapter.SelectCommand = command;
            adapter.Fill(tableData);
        }
    }
} 
```

另一种方法是检索所有表名并将`tableName`字符串变量验证为列表中的条目，可能使用：

```
DataTable tables = dbConnection.GetSchema(OdbcMetaDataCollectionNames.Tables); 
```

这是基于您的场景的简单实现：

```
string sql = "SELECT TOP 10 * FROM {0}";
using (OdbcConnection dbConnection = new OdbcConnection(dbConnectionString))
{
    dbConnection.Open();

    DataTable tables = dbConnection.GetSchema(OdbcMetaDataCollectionNames.Tables);
    var matches = tables.Select(String.Format("TABLE_NAME = '{0}'", tableName));

    //check if table exists
    if (matches.Count() > 0)
    {
        using (OdbcCommand command = new OdbcCommand(String.Format(sql, tableName), dbConnection))
        {
            using (OdbcDataAdapter adapter = new OdbcDataAdapter(command))
            {
                adapter.SelectCommand = command;
                adapter.Fill(tableData);
            }
        }
    }
    else
    {
        //handle invalid value
    }
} 
```

# oracle-adf - Oracle ADF 框架中的应用程序模块抽象

> ID：13915367
> 
> 赞同：1
> 
> 时间：2012-12-17T13:46:00.530
> 
> 标签：oracle-adf

请解释`Application Module(AM)` Oracle ADF 框架中存在的概念。

如果我们将一个普通的 Java EE 应用程序划分为 MVC 层，那么它`AM`属于哪一层呢？它提供了哪些设施，以及它如何适应 ADF 框架的其他组件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T00:45:17.230

如果您要谈论“常规”Java EE 概念并与 JPA/EJB 架构并行，那么 AM 基本上就是您的 EJB 会话外观。它处理资源池和事务，并包含客户端使用的数据模型（VOs=命名查询）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-17T14:00:32.850

> 如果我们把一个普通的 Java EE 应用划分为 MVC 层，那么 AM 属于哪一层

应用程序模块是模型（M）层的一部分。

> 它提供了哪些设施，以及它如何适应 ADF 框架的其他组件

应用程序模型定义了绑定层的数据模型。它包含基本对应于数据库查询的视图对象和视图链接定义。

应用模块也可以嵌套，根应用模块也为应用提供事务边界。`Transaction`可以通过调用来检索关联的对象`getTransaction()`。

# twitter - Twitter API：如何获得转推的转推？

> ID：13915377
> 
> 赞同：4
> 
> 时间：2012-12-17T13:46:19.673
> 
> 标签：twitter

我想获得所有转推，类似于当前的转推。

我的意思是说：

如果有人转推，我想获取他的推文 ID（转推 ID）并获取原始推文的所有转推，该用户转推。

所以：**原始推文-> user_retweet_id**

```
get statuses/retweets/user_retweet_id.json 

/*as statuses/retweets/original_tweet_id*/ 
```

可能吗？

**PS：我问它是因为如果我获取有关转发**的一般信息（**user_retweet_id**），我会得到有关**原始推文**（**retweet_count**）的信息，但我无法从中获得原始**推文的****转发**。

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T14:00:13.307

据我所知，没有关于转推转推的信息，因为本质上您是在转推原始帖子。只需转推一个已经存在的转推，您就会看到您实际上会转推原始推文，而不会在中间步骤留下任何标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-22T12:21:09.283

没有直接的方法，但你可以做的是

*   提取实际发布该推文的用户的主要用户名
*   使用 twitter.showTimeline() 提取他的时间线
*   然后使用字符串匹配找到您的推文
*   这将为您提供原始推文 ID
*   然后，您可以使用该原始推文 ID 找到最近 100 条最近转发的推文

我为此使用 twitter4j**

# javascript - 将二进制数据从网页传递到 Firefox 扩展

> ID：13915379
> 
> 赞同：1
> 
> 时间：2012-12-17T13:46:28.597
> 
> 标签：javascript, firefox-addon

我正在尝试将大型二进制数据（例如 new Uint8Array(10000000)）从网页的 JavaScript (JS) 传递到扩展的 JS。我希望通过 nsIBinaryOutputStream/nsIFile（我无法从我的页面调用）将这些数据从扩展名保存到文件中。[ATM 我不知道如何在本地机器上从页面的 JS 中保存（大/二进制）数据的任何其他方法。]

我对[特权和非特权页面之间的交互](https://developer.mozilla.org/en-US/docs/Code_snippets/Interaction_between_privileged_and_non-privileged_pages)感到不满，但它仅对传递字符串有用。我不认为将 10MB 从/转换为 base64 是个好主意。

*   甚至可以将此类数据传递给扩展程序吗？
*   如果是，那该怎么做？
*   我不应该使用[JS XPCOM 组件](https://developer.mozilla.org/en/docs/How_to_Build_an_XPCOM_Component_in_Javascript)吗？

谢谢你的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T13:42:48.980

好的，我已经解决了如何将*任何*对象从网页传递到扩展程序。

在网页 JavaScript (JS) 中：

```
var element = document.createElement("foo");
document.documentElement.appendChild(element);
var event = document.createEvent("CustomEvent");
event.initCustomEvent("bar", true, false, anyObject);
element.dispatchEvent(event); 
```

在扩展 JS 中：

```
document.addEventListener("bar", function(e) {
  // use e.detail here
 }, false, true); 
```

[这里的概念证明。](https://addons.mozilla.org/en-US/firefox/addon/auxilliary-file-saver/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T14:28:51.737

如果文件中有数据，则可以使用`nsIWebBrowserPersist`数据并将其直接下载到文件中。此文件可以压缩，也可以解压缩。您可以在这些页面上找到很多信息（带有示例）：

[使用 nsiWebBrowserPersist 下载文件](https://developer.mozilla.org/en-US/docs/Code_snippets/Downloading_Files)

[解压文件](https://developer.mozilla.org/en-US/docs/Talk%3aXPCOM_Interface_Reference/nsIZipReader)

# python - 切片数组时出现内存错误

> ID：13915381
> 
> 赞同：3
> 
> 时间：2012-12-17T13:46:42.883
> 
> 标签：python, numpy

我有`d`连接到 h5 数据集的对象：

```
>>> data = d[:, :, 0].astype(np.float32)
>>> data.shape
(17201, 10801)
>>> data[data==-32768] = data[data>0].min()
Traceback (most recent call last):
  File "<interactive input>", line 1, in <module>
MemoryError 
```

我可以做一些其他的切片技巧来避免这个错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T15:43:24.893

好的，我正在自己写答案，因为在@mgilson 质疑数据类型后获得了可接受的解决方案。

如果数据允许，则可以通过在对数组进行操作时使用更简单的数据类型来避免内存错误。考虑到最初的问题，这对我有用：

```
>>> data = d[:, :, 0].astype(np.short)
>>> data[data==-32768] = data[data>0].min()
>>> data = data.astype(np.float32) 
```

# wpf - WPF MVVM DataGridColumnHeader DisplayName

> ID：13915386
> 
> 赞同：3
> 
> 时间：2012-12-17T13:46:56.550
> 
> 标签：wpf, data-binding, mvvm, datagrid, datagridcolumn

我在 MVVM 中有一个 DataGrid，它的 ItemsSource 绑定到一个自定义模型。

此模型中的属性命名为与其在数据库中的等价物相同。例如这个：

```
public string StapelStatus_Txt
    {
        get
        {
            return this.stapelstatusTxt;
        }
        set
        {
            this.stapelstatusTxt = value;
            this.OnPropertyChanged("StapelStatus_Txt");
        }
    } 
```

是否有可能（不重命名属性）为数据网格声明另一个显示名称？我认为数据注释“DisplayName”会有所帮助……但事实并非如此。

有人有想法吗？:)

亲切的问候

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-17T17:12:44.520

例如，您可以在属性上使用[DisplayNameAttribute](http://msdn.microsoft.com/en-us/library/system.componentmodel.displaynameattribute.aspx)并像这样设置列标题：

```
<DataGrid AutoGeneratingColumn="OnAutoGeneratingColumn"/>

private void OnAutoGeneratingColumn(object sender, DataGridAutoGeneratingColumnEventArgs e)
{
    e.Column.Header = ((PropertyDescriptor)e.PropertyDescriptor).DisplayName;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T16:29:09.060

一种方法可能是

```
<DataGrid AutoGeneratingColumn="DataGrid_AutoGeneratingColumn">

private void DataGrid_AutoGeneratingColumn(object sender, DataGridAutoGeneratingColumnEventArgs e)
{
    e.Column.Header = MyPropertyNameConverter.Convert(e.PropertyName);
} 
```

# c++ - C++ 语法 - 模板

> ID：13915387
> 
> 赞同：1
> 
> 时间：2012-12-17T13:46:56.757
> 
> 标签：c++, templates

不能用谷歌搜索，所以只是在寻找一个快速的答案。这个语法是什么意思，它是标准的 C++ 吗？

```
template <class ...Options>
class list_base_hook; 
```

代码来自boost库。 [http://www.boost.org/doc/libs/1_52_0/doc/html/intrusive/usage.html](http://www.boost.org/doc/libs/1_52_0/doc/html/intrusive/usage.html)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-17T13:48:38.657

这是一个[可变参数模板](http://en.wikipedia.org/wiki/Variadic_template)，它是新 C++11 标准的一部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T13:49:44.713

在 C++11 中，它是[可变参数模板参数](http://en.wikipedia.org/wiki/Variadic_template)。

Boost 也将这种语法用于 C++03 中的“伪变量”模板——这意味着它是一组具有默认值的类型名。与 C++11 的可变参数不完全相同。像这样：

```
template <class opt1 = dummy, class op2 = dummy, class op3 = dummy, /* and so on up to a large N */>
class list_base_hook; 
```

# jquery - 使用 jquery 远程验证发送额外的静态参数

> ID：13915390
> 
> 赞同：3
> 
> 时间：2012-12-17T13:47:11.480
> 
> 标签：jquery, jquery-validate

我想向验证服务器端脚本发送一个额外的参数。我有这个代码：

```
$("#edit_info").validate({
                debug: false,
              rules: {
                name: {
                    required: true,
                    //remote: "validate.php",
                    remote: { url:"validate.php", async:false },
                    data: {'cat_id':'34'}
                    /*data: {
                      cat_id: function () { return '34'; }
                    }*/
                }, 
```

但只有名称被发送。知道为什么吗？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-23T22:50:55.080

如果您想发送动态参数，而不是静态参数：

```
$("#edit_info").validate({
        debug: false,
      rules: {
        name: {
            required: true,
            remote: { 
                url:"validate.php", 
                data: {'cat_id':function(){return $('#otherelement').val()}},
                async:false 
            }
        }, 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-17T14:00:37.200

找出问题所在。数据必须在远程标签内...

```
$("#edit_info").validate({
            debug: false,
          rules: {
            name: {
                required: true,
                remote: { 
                    url:"validate.php", 
                    data: {'cat_id':'34'},
                    async:false 
                }
            }, 
```

# jquery - 点击时 jQuery 模态窗口中的 TinyMCE 编辑器（Firefox 和 Chrome 中的问题）

> ID：13915392
> 
> 赞同：1
> 
> 时间：2012-12-17T13:47:13.573
> 
> 标签：jquery, tinymce, modal-dialog

我编写了这段代码来获得响应并将其放入一个 div 中：

```
jQuery.ajax({
     async: false,  // 同期通信
     url: sample.php,
     error: function(msg) {

         ajaxResult = false;
         return false;
     },
     success: function(data){

        jQuery('#modalContent').html(data);

      }
}); 
```

示例.php：

```
* firstly included the js files

tinyMCE.init({
    // General options
    mode : "specific_textareas",
    editor_selector : "mceEditor",
    language : "en",
    theme : "advanced",
    plugins : "table",
    // Theme options
    theme_advanced_buttons1 : "bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,fontsizeselect,|,forecolor,backcolor,|,table,row_before,row_after,delete_row,col_before,col_after,delete_col",
    theme_advanced_buttons2 : "",
    theme_advanced_buttons3 : "",
    theme_advanced_buttons4 : "",
    theme_advanced_toolbar_location : "top",
    theme_advanced_toolbar_align : "left",
    theme_advanced_statusbar_location : "bottom",
    theme_advanced_path : false,
    theme_advanced_resizing : true,
    convert_fonts_to_spans : true,
    //font_size_style_values : "0.7em,0.8em,1em,1.2em,1.5em,2em,3em",
    //font_size_style_values : "8pt,10pt,12pt,14pt,18pt,24pt,36pt",

    // content CSS (should be your site CSS)
    content_css : "/css/tiny_content.css"
}); 
```

当我在 IE 浏览器中打开时，它可以正常工作。TinyMCE 无法在 Firefox 或 Chrome 中运行。

# postgresql - JPA 使用序列作为自动增量 postgres

> ID：13915397
> 
> 赞同：0
> 
> 时间：2012-12-17T13:47:43.540
> 
> 标签：postgresql, jpa, sequence

我有这个代码：

```
@Entity
@Table(name = "table")
@SequenceGenerator(name="table_id_seq", sequenceName="table_id_seq", allocationSize=1)
public class TableExample extends BaseEntity implements Serializable {

    /**
     * The auto-generated primary key.
     */
    @Id
    @GeneratedValue(strategy=GenerationType.SEQUENCE, generator="table_id_seq")
    @Column(name = "table_id")
    private long id;
} 
```

我的数据库中有这个序列：

```
CREATE SEQUENCE table_id_seq
  INCREMENT 1
  MINVALUE 1
  MAXVALUE 9223372036854775807
  START 2000
  CACHE 1;
ALTER TABLE table_id_seq OWNER TO postgres; 
```

当我试图持久化一个新对象时，我收到了这个错误：

> org.apache.openjpa.persistence.PersistenceException：错误：当前事务被中止，命令被忽略直到事务块结束 {prepstmnt 642363 SELECT NEXTVAL('table_id_seq')} [code=0, state=25P02]

我错过了什么吗？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T14:12:18.287

错误出现在该代码之前；之前还有另一个问题导致事务中止。检查您的 PostgreSQL 服务器错误日志或 Hibernate/JPA 日志以查看第一个错误发生的位置，这将是真正的问题。

# emacs - 如何避免 |...| 中的换行符 在 Emacs 中

> ID：13915400
> 
> 赞同：2
> 
> 时间：2012-12-17T13:48:09.750
> 
> 标签：emacs

在 Emacs 中，如何避免 |...| 中的换行符 使用 Mq（填充段落）时？

在[https://groups.google.com/forum/?fromgroups#!searchin/gnu.emacs.help/fill-nobreak-predicate/gnu.emacs.help/qNuZZjQnsww/99oJ1fb4OSUJ](https://groups.google.com/forum/?fromgroups#!searchin/gnu.emacs.help/fill-nobreak-predicate/gnu.emacs.help/qNuZZjQnsww/99oJ1fb4OSUJ)我找到了 [[.. .]]，但是当打开和关闭分隔符相同时不起作用：

```
(defun fill-open-link-nobreak-p ()
  "Don't break a line after an unclosed \"[[link \"."
  (save-excursion
    (skip-chars-backward " ")
    (let ((opoint (point))
          spoint inside)
      (save-excursion
        (beginning-of-line)
        (setq spoint (point)))
       (when (re-search-backward "\\[\\[" spoint t)
        ;; (message "found") (sit-for 2)
        (unless (re-search-forward "\\]\\]" opoint t)
          (setq inside t)))
      inside)))

(add-to-list 'fill-nobreak-predicate 'fill-open-link-nobreak-p) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T17:14:00.530

这似乎可以解决问题：

```
(defun odd-number-of-pipes-this-paragraph-so-far ()
  (oddp (how-many "|" (save-excursion (backward-paragraph) (point)) (point))))

(add-to-list 'fill-nobreak-predicate 'odd-number-of-pipes-this-paragraph-so-far) 
```

# cakephp - CakePHP - 更改表单输入的“名称”属性

> ID：13915401
> 
> 赞同：0
> 
> 时间：2012-12-17T13:48:10.700
> 
> 标签：cakephp, cakephp-2.0

我有一个生成自定义表单输入的助手。

**助手**（简化代码）

```
public function customInput($field, array $options = array()) {

    $defaultOptions = array(
        'class' => 'custom-input',
        'label' => false
    );
    $options = array_merge($defaultOptions, $options);

    return $this->Form->input($field, $options);
} 
```

现在我如何通过在输入的前面加上另一个“模型”来修改输入的名称属性。例如，默认情况下输入将具有以下名称属性：

```
<input type="text" name="data[MyModel][field]" /> 
```

但我希望它是：

```
<input type="text" name="data[_custom][MyModel][field]" /> 
```

主要是，看起来棘手的是我不知道如何获取默认使用的模型名称。另外，如果默认模型层次结构更复杂，我需要一些可以工作的东西，例如：

```
<input type="text" name="data[MyModel][AssociatedModel][field]" /> 
```

需要修改为：

```
<input type="text" name="data[_custom][MyModel][AssociatedModel][field]" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T15:16:38.250

你要`name`

```
echo $this->Form->input('whatever', array('name' => 'data[_custom][MyModel][field]')); 
```

没有什么像`data[_custom][MyModel][AssociatedModel][field]`蛋糕形式的助手。就自动化而言，您的选择是：

*   `field`// 正常，使用当前模型
*   `Model.field`// 与非默认模型/关系一起使用
*   `Model.$i.field`// 用户 hasMany Post 将是`Post.$i.field`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T13:56:47.980

您可以这样做： `$this->Form->input('_custom.MyModel.field');`以您需要的格式创建输入。

它成为传递适当模型名称和关联模型的情况。

我不知道您如何自动执行此操作，因为显然每个关系都是不同的/可能有多个关联。

所以使用你的助手：`echo $this->YourHelper->CustomInput('_custom.MyModel.MyAssociation.field', $options)`可能会成功。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T15:24:57.717

对于`input`helper，CakePHP 用于`$this->model()`获取当前模型的名称。

你可以在里面看到它`lib\Cake\view\FormHelper`，或者直接从在线API： [http ://api20.cakephp.org/view_source/form-helper#line-942](http://api20.cakephp.org/view_source/form-helper#line-942)

```
$modelKey = $this->model(); 
```

也许这有帮助。

# javascript - 我可以继续将数据从服务器推送到同一个连接吗？

> ID：13915404
> 
> 赞同：1
> 
> 时间：2012-12-17T13:48:30.543
> 
> 标签：javascript, ajax, xmlhttprequest, push

我正在设置一个像网页一样的股票代码，用 JavaScript 编写。我还在用 C++ 编写页面与之对话的服务器。

我想让网页高效，这样它就可以向应用服务器发送单个订阅消息，然后保持一个保持活动连接打开，不断接收从应用服务器推送的入站数据。

目前，每次从服务器接收数据时，我都必须重新发出网络客户端的订阅调用。问题是每次 XHR 对象点击 readyState(4) 时，调用就有效地完成了。在此之后到达网页的任何数据都将被忽略。Web 客户端可以重新发送数据并重置对象，但发送是不必要的，仅用于重置 XHR 对象。

我想知道是否有可能以某种方式重置现有的 XHR 对象，并将其置于期望更多入站数据的状态，以便当更多数据推送到网页时，网页会响应并处理它。

提前感谢您提供的任何帮助。注意：不在这个项目上使用 JQuery。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T14:09:14.577

我强烈建议研究 Websockets，尤其是像[socket.io 这样](http://socket.io/)的库，它将各种浏览器的 Websocket 传输实现封装到一个 API（WS、JSON、JSONP、Flash 和 Long Polling）中。

现在所有主流浏览器都应该支持 Socket.io 客户端库。您唯一的挑战可能是找到特定于 C++ 的服务器实现。希望[这个](https://stackoverflow.com/questions/11216779/socket-io-with-c)SO 问题可能会有所帮助

否则，您唯一的其他选择是在客户端上进行长轮询或彗星，并使用可扩展的合适的服务器端实现（即类似于 NginX 之类的事件驱动服务器，而不是每个连接的线程架构。）

我非常感谢您致力于 C++，但我谦虚的建议是尽可能地研究 Node.js，并且确实提供了一个非常高效的解决方案，而且只需很少的努力。

HTH 一切顺利。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T14:10:09.750

HTTP 是一次性协议：一个请求，一个响应，然后就完成了。如果要保持连接打开，可以使用 Websockets（[MDN 参考页面](https://developer.mozilla.org/en-US/docs/WebSockets)，[客户端代码示例](http://www.html5rocks.com/en/tutorials/websockets/basics/)）。但是考虑到旧浏览器不支持它（例如，IE，刚刚在版本 10 上开始支持 Websockets），因此您可能需要使用 XHR 和[long-polling](http://en.wikipedia.org/wiki/Push_technology#Long_polling)实现回退。

# .net - RegEx：从 DisplayFormat 字符串中获取小数位数

> ID：13915408
> 
> 赞同：0
> 
> 时间：2012-12-17T13:48:51.140
> 
> 标签：.net, regex

任何人都可以帮助创建一个正则表达式来处理这种情况。数值有一个显示格式字符串，可以是以下格式：positive_value_format;negative_value_format。正负格式可以是例如 '#,##0.00;(#,##0.0000)' 或 '#,##0;(#,##0.0)' 或 '#,##0' - 这意味着一个正值应该在点后显示 2 个数字，另一个 - 没有数字。

所以我需要创建正则表达式来处理这 3 种情况，正和/或负值的小数位数是多少。

'#,##0.00;(#,##0.0000)' -> 2, 4
'#,##0;(#,##0.0)' -> 0, 1
'#,##0' -> 0

我发现了以下问题，但它们没有得到回答或使用解析字符串而不是 RegExp -[从格式字符串中确定小数位数的好方法是什么？](https://stackoverflow.com/questions/4089661/what-would-be-a-good-way-of-determining-number-of-decimal-places-from-a-format-s),[根据格式字符串识别小数位数](https://stackoverflow.com/questions/8127444/identify-the-number-of-decimal-places-based-on-the-format-string)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T15:22:20.533

这适用于所有 3 个提供的字符串

```
 string pat = "#,##([0-9]([0-9.]*?|$))($|;[(]#,##[0-9]([0-9.]*?)[)])";
        Match m = Regex.Match(input, pat);

        int lengthA = m.Result("$2").Replace(".", "").Length;
        if (!String.IsNullOrWhiteSpace(m.Result("$4")))
        {
            int lengthB = m.Result("$4").Replace(".", "").Length;
        } 
```

# jquery - jQuery 将 "is" 与 "not" 结合起来

> ID：13915410
> 
> 赞同：0
> 
> 时间：2012-12-17T13:49:05.180
> 
> 标签：jquery, radio-button

我有一个 jQuery 脚本，它可以在 html 中找到所有`input type=radio`内容并在它们上附加一些精美的 css。问题是我希望某些单选按钮保持不变。这是jQuery：

```
$(this).each(function (i) {
    if ($(this).is('[type=checkbox],[type=radio]')) {
        var input = $(this);
        var label = $('label[for=' + input.attr('id') + ']');
        var inputType = (input.is('[type=checkbox]')) ? 'checkbox' : 'radio';
        $('<div class="custom-' + inputType + '"></div>').insertBefore(input).append(input, label);
        var allInputs = $('input[name=' + input.attr('name') + ']');
        label.hover(

        function () {
            $(this).addClass('hover');
            if (inputType == 'checkbox' && input.is(':checked')) {
                $(this).addClass('checkedHover');
            }
        },

        function () {
            $(this).removeClass('hover checkedHover');
        });
        input.bind('updateState', function () {
            if (input.is(':checked')) {
                if (input.is(':radio')) {
                    allInputs.each(function () {
                        $('label[for=' + $(this).attr('id') + ']').removeClass('checked');
                    });
                };
                label.addClass('checked');
            } else {
                label.removeClass('checked checkedHover checkedFocus');
            }
        })
            .trigger('updateState')
            .click(function () {
            $(this).trigger('updateState');
        })
            .focus(function () {
            label.addClass('focus');
            if (inputType == 'checkbox' && input.is(':checked')) {
                $(this).addClass('checkedFocus');
            }
        })
            .blur(function () {
            label.removeClass('focus checkedFocus');
        });
    }
}); 
```

这工作正常，但它会改变页面上的所有单选按钮。我想添加一些需要更改的单选按钮。我希望这个 html 代码中的单选按钮不受上面脚本的影响：

```
<p class="field switch">
    <input type="radio" id="radioZ1" name="field1" checked />
    <input type="radio" id="radioZ2" name="field2" />
    <label for="radioZ1" class="cb-enable selected"><span>Enable</span>
    </label>
    <label for="radioZ2" class="cb-disable"><span>Disable</span>
    </label>
</p> 
```

所以我试图在`.not()`之后添加，`.is()`但我没有运气。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T09:38:25.873

这是我的工作解决方案：

```
if($(this).is('[type=checkbox],[type=radio]') && !($(this).is("p.switch > [type=radio]")) ) 
```

# sql - 使用 LEFT OUTER JOIN 无条件预加载关联？

> ID：13915412
> 
> 赞同：2
> 
> 时间：2012-12-17T13:49:14.760
> 
> 标签：sql, ruby-on-rails, ruby, ruby-on-rails-3.1

我们有一个设置了 has_one 关联的模型：

```
class User
  has_one :shirt

class Shirt
  belongs_to :user 
```

目前我们可以`.includes(:shirt)`在检索有限的用户数组时添加，它将按预期执行两个 SQL 查询。

我们的问题是加载页面的查询是这样做的：

```
SELECT "shirt".* FROM "shirts" WHERE "shirt"."user_id" IN (2147521, 2147522 ... ) 
```

例如，在检索 50 个用户和衬衫时，这对我们来说性能不是很好。我们的用户和衬衫表很大。我们注意到通过强制 Rails 使用 INNER JOIN 来代替执行以下操作可以大大提高速度：

```
User.where( ... ).joins(:shirts).includes(:shirts).limit(50) 
```

不幸的是，这只返回有衬衫的用户。我们需要能够返回有限的用户数组，无论他们是否有相关的衬衫。

有没有办法强制 Rails 使用 LEFT OUTER JOIN 而不是默认的两个查询方法来预先加载关联的对象？

## 编辑

通过添加一个`where`返回 true 的子句，无论关联对象上的值是否为空。至少在 Postgres 上，如果没有关联的对象，它似乎并不介意。

```
User.where( ... ).includes(:shirt).where("shirts.created_at IS NULL OR shirts.created_at IS NOT NULL") 
```

这解决了问题，但它并不理想，有没有办法使用 LEFT OUTER JOIN 代替默认的两个查询方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T18:01:30.827

正如[这篇文章](https://stackoverflow.com/questions/6246826/how-do-i-avoid-multiple-queries-with-include-in-rails)中所解释的，在大多数情况下，2 查询方法被认为更快（尽管对于您所拥有的一对一关系来说不一定如此）。如果你想强制 Rails 使用 LEFT OUTER JOIN，你可以通过在关联表上添加一个无意义的过滤器来做到这一点：

```
User.where( ... ).
     includes(:shirts).
     where("shirts.id IS NULL OR shirts.id = shirts.id").
     limit(50) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-10T10:12:49.507

如果你有一对一的关联，就像你上面的例子一样，你可以使用`eager_load`这样的方法 : `User.eager_load(:shirt)`，它将使用`LEFT OUTER JOIN`，所以你只能使用`user.shirt`1 个查询，但我不确定它是否是新的轨道 4 与否。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-02T19:14:06.157

应用于 Rails4：

```
User.where( ... ).includes(:shirts).references(:shirts) 
```

或者

```
User.where( ... ).eager_load(:shirts) 
```

将强制进行`LEFT OUTER JOIN`相当单独的查询

# android - 找出在应用程序运行时是否调用了广播接收器上的 onReceive 的便捷方法？

> ID：13915413
> 
> 赞同：0
> 
> 时间：2012-12-17T13:49:18.127
> 
> 标签：android, sms, broadcastreceiver

我有一个广播接收器的静态注册，用于处理清单中的短信。是否有适当的方法来确定在应用程序运行时是否调用了该接收器类上的 onReceive() 方法？

这是必需的，如果在应用程序未运行时收到短信，我可以启动一个活动，否则，只需处理信息并显示一些通知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T14:00:42.613

`Activity.onPause()`使用,`Activity.onResume()`方法和静态布尔值自己跟踪应用程序的可见性。将“可见性”状态存储在其他类中。好的选择是您自己实现的`Application`或 a `Service`（如果您想检查服务的活动可见性，此解决方案也有 [一些变体][4]）。

***示例***
此示例提供了一项活动的框架代码，但如果您需要跟踪多个活动，则可以添加更多布尔值。

实现自定义`Application`类（注意`isActivityVisible()`静态方法）：

```
 public class MyApplication extends Application {

      public static boolean isActivityVisible() {
        return activityVisible;
      }  

      public static void activityResumed() {
        activityVisible = true;
      }

      public static void activityPaused() {
        activityVisible = false;
      }

      private static boolean activityVisible;
    } 
```

在以下位置注册您的应用程序类`AndroidManifest.xml`：

```
 <application
        android:name="your.app.package.MyApplication"
        android:icon="@drawable/icon"
        android:label="@string/app_name" > 
```

添加`onPause`和`onResume`到项目中的每一个`Activity`（如果你愿意，你可以为你的活动创建一个共同的祖先，但如果你的活动已经从`MapActivity`/`ListActivity`等扩展，你仍然需要手动编写以下内容）：

```
 @Override
    protected void onResume() {
      super.onResume();
      MyApplication.activityResumed();
    }

    @Override
    protected void onPause() {
      super.onPause();
      MyApplication.activityPaused();
    } 
```

# web-scraping - 从网站获取新闻的最佳方法？

> ID：13915414
> 
> 赞同：1
> 
> 时间：2012-12-17T13:49:18.470
> 
> 标签：web-scraping

我有一个功能，可以从网站上抓取所有最新新闻（大约 10 条新闻，新闻的数量取决于该网站）。请注意，新闻是按时间顺序排列的。

例如，昨天我得到了 10 条新闻并存储在数据库中。今天我收到 10 条新闻，但有 3 条昨天没有的新闻（7 条保持不变，3 条是新的）。

我目前的方法是提取每个新闻，直到找到一个旧新闻（7 个新闻中的第一个）然后我停止提取，只更新`"lastUpdateDate"`旧新闻的字段 + 将新新闻添加到数据库中。我认为这种方法有点复杂，需要时间。

实际上，我从 20 个具有相同内容结构 ( `Moodle`) 的网站获得新闻，因此每个请求将持续大约 2 分钟，而我的免费主机不支持。

**如果我删除所有新闻然后从头开始提取所有内容会更好吗（这实际上增加了数据库中的大量 ID 号）？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T14:31:16.737

首先，检查网站是否有已发布的 API。如果有，请使用它。

其次，检查网站的服务条款，其中可能明确禁止抓取网站。

第三，查看您选择的编程语言中的一个模块，该模块既可以处理页面的获取，也可以从页面*中*提取内容。在 Perl 中，您将从[WWW::Mechanize](http://search.cpan.org/dist/WWW-Mechanize/)或[Web::Scraper](http://search.cpan.org/dist/Web-Scraper/)开始。

无论您做什么，都不要落入许多在 StackOverflow 上发帖的人所陷入的陷阱：获取网页，然后尝试自己解析内容，通常使用正则表达式，这对于这项工作来说是不合适的工具。浏览 SO 标签[html-parsing](/questions/tagged/html-parsing "显示标记为“html-parsing”的问题")以了解那些试图推出自己的 HTML 解析系统而不是使用现有工具的人的悲伤故事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T05:51:09.300

是否要向用户显示旧新闻取决于要求。

对于抓取，您可以为 cron 作业创建一个自定义本地脚本，该脚本将从这些新闻网站获取数据并将其存储到数据库中。

您还可以检查主题是否已经存在。

最后制作一个自定义新闻块，它将显示所有数据库提要。

# javascript - 如何手动触发 ajaxComplete 事件

> ID：13915416
> 
> 赞同：0
> 
> 时间：2012-12-17T13:49:36.813
> 
> 标签：javascript, jquery

使用 Jquery 我需要触发一个 ajaxComplete 事件。

目前我正在使用此代码但没有成功

```
$.getJSON(assetUrl, function (data) {
...
    $.trigger("ajaxComplete"); 
```

有错误：

```
TypeError: 'undefined' is not a function (evaluating '$.trigger("ajaxComplete")') 
```

知道我做错了什么吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T13:57:11.943

该[`ajaxCompleted`事件](http://api.jquery.com/ajaxComplete/)在 DOM 上触发，您需要在 jQuery 包装器元素上调用该[`trigger`方法](http://api.jquery.com/trigger/)`$(document).trigger(...)`：例如。

对象上没有静态函数“触发器” `jQuery`（这就是错误消息告诉您的内容），您可以使用`$.event.trigger`- 尽管我担心这是内部的。

但是，您不需要手动操作；`getJSON` *确实*触发了事件本身。要中止正在运行的 ajax 请求，请参阅[XHR 对象](http://api.jquery.com/jQuery.ajax/#jqXHR)`abort`的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-07-17T17:30:17.163

您可以定义一个全局 jQuery ajaxComplete（和 ajaxError）函数，该函数将在文档准备就绪时以及在每个完成的 ajax 请求之后运行。您可以像这样在初始页面加载（或任何时候）定义 ajaxComplete 函数：

```
$(function(){
      $(document).ajaxComplete(function(){

        // on complete code

      }).ajaxError(function(){

        // on error code

      });
}); 
```

要随时调用此事件处理程序，只需执行以下命令：

```
$(document).triggerHandler('ajaxComplete'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-03T11:30:04.197

如果其他人在看这个，手动触发 ajaxComplete 的正确方法是`$(document).trigger('ajaxComplete', [xhr, settings]);`

将 xhr 对象传递给 ajaxComplete 触发事件可能很重要，因为事件处理程序可能需要它。

但是，如果您不是通过 jquery 发出请求，您只需要这个，因为 jquery 会自动为您处理这个。

# python - 在 Python 中，如何防止类定义被多次包含？

> ID：13915421
> 
> 赞同：3
> 
> 时间：2012-12-17T13:49:43.740
> 
> 标签：python, class, inheritance

我遇到了一个子类的问题，该子类有多个调用其父类的**init**方法的超类。我收到一个关于未绑定`__init__`需要父实例的错误，但得到了子实例。StackOverflow 上的其他一些问题指出，这是来自多次定义的父类，我通过在解释器中输入的简单脚本确认了这一点。

注意：这不是我要问的问题的代码。这是一个例子来说明基类被重新定义并导致继承类不再正常工作的问题。

```
>>> class Base(object):
...     def __init__(self):
...             print "Base!"
... 
>>> class Inherited(Base):
...     def __init__(self):
...             Base.__init__(self)
...             print "Inherited"
... 
>>> class Base(object):
...     def __init__(self):
...             print "Base!"
... 
>>> Inherited()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 3, in __init__
TypeError: unbound method __init__() must be called with Base instance as first argument (got Inherited instance instead)
>>> 
```

我的问题是，如何防止基类被多次定义？我正在处理的项目有多个文件和导入，因此很难将所有内容重构为仅包含一次文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T13:53:12.380

这种行为对我来说似乎很可疑。以不同的方式导入同一个模块仍然会让你的类 ( `Base`) 引用同一个类对象。您似乎不太可能通过导入进入这种情况。

但是，一种解决方法是使用`super`：

```
class Base(object):
    def __init__(self):
            print "Base!"

class Inherited(Base):
    def __init__(self):
            super(Inherited,self).__init__()
            print "Inherited"

class Base(object):
    def __init__(self):
            print "Base!"

Inherited() 
```

`super`确保您实际上调用的是基类`__init__`，而不是碰巧在当前模块的命名空间中取代基类的其他类。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T13:56:16.493

您在上面确定的问题是因为子类（您定义的第一个定义）作为类定义`Inherited`的原始定义在读取时被处理。`Base`

但是，在运行时，`__init__`使用了 of 的*第二个*定义`Base`。这个类需要一个自身的实例，而是接收第一个定义的实例`Base`。

当您以这种方式键入内容时，解释器无法知道它们是同一个类。但是当从文件导入时，你不会有这个问题，因为 Python 足够聪明，知道当一个文件被导入两次时，类是相同的。

您的代码正在发生其他事情，查看更具体的用例会很有帮助。仅当您在多个模块中定义具有相同名称的类，然后将它们导入相同的命名空间时，才会出现此问题。

# php - 解码 JSON 字符串时偶尔出错

> ID：13915423
> 
> 赞同：1
> 
> 时间：2012-12-17T13:49:55.463
> 
> 标签：php, json, apache, post

我有两个不同的服务器。

在第一个，我的开发服务器中，一切正常。在第二个，我的生产服务器上，我遇到了一些我不知道如何解决的错误。

在后者上，我在 json_decode'ing 字符串时不断收到错误消息。当试图查明错误时，我发现了以下内容：

在我的开发服务器上，当我 var_dump POST 数据时，我得到：

```
'data' =>
    string(96) "{"id":null,"codigo":55,"nome":"testa","coordenador":"testa","financiadora":"testa","ativo":true}" 
```

而在我的生产服务器上，我得到：

```
["data"]=>
    string(113) "{\"id\":null,\"codigo\":4,\"nome\":\"teste\",\"coordenador\":\"teste\",\"financiadora\":\"teste\",\"ativo\":true}" 
```

}

我可能会在我的生产服务器中去掉反斜杠，但我不想有两个不同的代码。我也不明白为什么会这样。

是 Apache/PHP 配置问题吗？我该如何解决？

完全相同的代码，两台服务器中完全相同的数据库。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T13:52:10.867

听起来您的生产服务器启用了[魔术引号。](http://php.net/manual/en/security.magicquotes.php)[将其关闭](http://php.net/manual/en/security.magicquotes.disabling.php)，问题应该会消失。

# java - Java：用于更新不共享相同引用的所有相等对象（在相同上下文中）的模式

> ID：13915429
> 
> 赞同：3
> 
> 时间：2012-12-17T13:50:00.840
> 
> 标签：java, jpa, equals, cdi, session-scope

在我的 java 应用程序中，我在不同的地方多次使用相同的对象。这意味着当比较这些对象时，equals 方法返回 true。现在我想更新一个对象并对所有相等的对象进行更改。你知道是否有这样的模式吗？

我的具体用例是：我正在使用 JSF、JPA 和 CDI。用户在允许他编辑分离实体 EntityA 的网页上。该页面是会话范围的。EntityA 有两个对 EntityB 的引用（也是分离的）。这些对象可以相同。不是同一个引用，但它们可能是相等的。

```
@Entity
public class EntityA {
   @OneToOne()
   private EntityB entity1;
   @OneToOne();
   private EntityB entity2;
} 
```

JSF 视图允许用户从选择列表中选择 entity1 和 entity2。它还显示了这些 EntityB 的一些详细信息，并且允许用户单独编辑 entity1 和 entity2。一切正常，除了用户为 entity1 和 entity2 选择了相同（相等）的 EntityB。然后，仅更新对这些对象的引用。当然 entity1 和 entity2 是两个不同的 JPA 实体，并且不是同一个引用。但我想将更改分发到 EntityB 的所有分离实例。我的应用程序中有数百次这种情况，所以我不想关心，在哪些情况下必须更新哪些对象。我需要一些自动为我做的解决方案。一个想法是将我在此会话中使用的所有对象保留在特殊列表中，并且每次提交和处理请求时都会遍历此映射并更改所有相等的对象。但是他的声音很脏。也许有一个内置的 JPA 函数可以使所有相等的对象具有相同的引用。我不知道这是否可能。您对此有解决方案吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T14:00:28.620

我将在这里稍微抽象一下您的问题：如果对一个对象的更改需要更改许多其他对象，请考虑将您正在更改的字段放在一个单独的对象中，并让所有这些对象引用它。

例如，如果您有：

```
class MyClass {
  String info;
  int id;
} 
```

当 'info' 字段更改时，两个具有相同 'id' 的 MyClass 实例都应该更新，然后使用：

```
class myClass {
  myInfoClass info;
  int id
}

class myInfoClass {
  String value;
} 
```

并给出 的所有实例`myClass`都等于 的相同实例`myInfoClass`。更改`myClass.info.value`将有效地更改 的所有实例`myClass`，因为它们都拥有相同的 实例`myInfoClass`。

抱歉，如果我的语法稍有错误，我会经常在语言之间跳转。

我在最近编写的一个游戏中使用了这种技术，其中一个开关激活了一扇门——开关和门都有一个`Circuit`包含布尔`powered`字段的对象。门的“isOpen()”方法简单地返回`circuit.powered`，当开关被激活时，我只是调用`switch.circuit.powered = true`，门自动被认为是“打开的”。以前，我让它在游戏的地图上搜索具有相同电路 ID 的所有门，并更改`powered`每个门上的字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T14:00:20.993

这是经典的表单处理逻辑

*   如果用户点击保存按钮操作数据库中的数据
*   每次创建网页时重新加载数据
*   你不应该在网络会话中缓存数据
*   如果您需要缓存，请在持久层中激活它（例如休眠缓存）

# ruby-on-rails - db migrate in rails 上的分段错误 ruby 1.8.7

> ID：13915437
> 
> 赞同：4
> 
> 时间：2012-12-17T13:50:23.817
> 
> 标签：ruby-on-rails, ruby, linux, ruby-on-rails-3, dbmigrate

在这个命令上`RAILS_ENV=production bundle exec rake db:migrate`

我收到此错误：

```
 [BUG] Segmentation fault
ruby 1.8.7 (2011-06-30 patchlevel 352) [x86_64-linux] 
```

我想过尝试这个，但命令不会执行，因为它不知道什么是 rvm：

```
rvm gemset empty
rvm use 1.9.2@skateparks
gem install bundler
bundle install 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T11:13:05.753

确保 RVM 确实有效，你`~/.bash_profile`应该是这样的：

```
[[ -s "$HOME/.rvm/scripts/rvm" ]] && source "$HOME/.rvm/scripts/rvm" # Load RVM into a shell session *as a function* 
```

如果不存在，安装它，基本上这个命令就足够了：

```
$ \curl -L https://get.rvm.io | bash -s stable --ruby 
```

除非您知道自己在做什么，否则不应在 root 帐户下安装 RVM。有关详细信息，请参阅[https://rvm.io/rvm/install/](https://rvm.io/rvm/install/)。

对于部署，使用[capistrano](https://github.com/capistrano/capistrano)是个好主意。

# c# - 对具有子/子类的类的单元测试 FluentValidation 规则

> ID：13915439
> 
> 赞同：9
> 
> 时间：2012-12-17T13:50:29.910
> 
> 标签：c#, unit-testing, fluentvalidation

当我们正在验证的对象具有也在验证的子类时，是否可以为 fluentvalidation 类编写单元测试。

举个例子：我的课看起来像这样

```
public class TestModel
{

    public class SubData
    {
        public int SubDataVal { get; set; }
    }

    public int ParentVal { get; set; }
    public SubData Sub { get; set; }

} 
```

我的验证逻辑如下所示：

```
public class TestModelValidator : AbstractValidator<TestModel>
{
    public TestModelValidator()
    {
        RuleFor(o => o.ParentVal).GreaterThan(0);
        RuleFor(o => o.Sub.SubDataVal).GreaterThan(0);
    }
} 
```

当我编写以下单元测试时

```
 [Test]
    public void Should_have_error_when_val_is_zero()
    {
        validator = new TestModelValidator();
        validator.ShouldHaveValidationErrorFor(model => model.ParentVal, 0);
    } 
```

我收到“System.NullReferenceException：对象引用未设置为对象的实例”。**FluentValidation.TestHelper.ValidatorTester`2.ValidateError(T instanceToValidate)**的异常

 **（如果我删除*RuleFor(o => o.Sub.SubDataVal).GreaterThan(0);*行，那么它可以工作！）

同样，如果我尝试对实际的子类进行单元测试：

```
 [Test]
    public void Should_have_error_when_sub_dataVal_is_zero()
    {
        validator = new TestModelValidator();
        validator.ShouldHaveValidationErrorFor(model => model.Sub.SubDataVal, 0);
    } 
```

我收到“System.Reflection.TargetException：对象与目标类型不匹配”。来自**FluentValidation.TestHelper.ValidatorTester`2.ValidateError(T instanceToValidate)**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-23T17:11:49.217

您可以对模型和子模型进行单元测试，但您需要更改验证类以使用单独的验证器类来验证子模型：

```
public class TestModelValidator : AbstractValidator<TestModel>
{
    public TestModelValidator()
    {
        RuleFor(o => o.ParentVal).GreaterThan(0);
        RuleFor(o => o.Sub).SetValidator(new SubDataValidator());
    }
}

public class SubDataValidator : AbstractValidator<SubData>
{
    public SubDataValidator()
    {
        RuleFor(o => o.SubDataVal).GreaterThan(0);
    }
} 
```

然后，您可以编写单元测试来测试每个验证器或同时测试两者。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-18T11:54:08.777

我得出的结论是，对于这个 ShouldHaveValidationErrorFor 只是无法处理子类，所以不得不手动进行。IE

```
 [Test]
    public void Should_have_error_when_val_is_zero()
    {
        validator = new TestModelValidator();
        TestModel testRequest = new TestModel();
        //populate with dummy data
        var result = validator.Validate(testRequest);
        Assert.That(result.Errors.Any(o => o.PropertyName== "ParentVal"));
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-07-29T13:21:01.480

使用 MSTest 和 FluentAssertions，您可以编写

```
[TestMethod]
public void Should_have_error_when_val_is_zero()
{
    // Given
    var validator = new TestModelValidator();
    var testModel = TestModel
    {
        ParentVal = 0
    }; // You should create a invalid TestModel object here

    // When
    validator.Validate(testModel).IsValid.Should().BeFalse();
} 
```**

# ruby-on-rails - ActiveAdmin 中的 gmaps4rails：render_to_string 错误

> ID：13915441
> 
> 赞同：1
> 
> 时间：2012-12-17T13:50:34.650
> 
> 标签：ruby-on-rails, activeadmin, gmaps4rails

当尝试在 ActiveAdmin 控制器中使用 render_to_string 方法时：

```
marker.infowindow render_to_string(:partial => "/applications/info") 
```

我收到以下错误

```
undefined method `render_to_string' for #<ActiveAdmin::Views::Pages::Show 
```

看来 render_to_string 也是 ActiveAdmin 中使用的一种方法。
如何使用 gmaps4rails 之一？

# facebook-sharer - Facebook分享不起作用

> ID：13915444
> 
> 赞同：-1
> 
> 时间：2012-12-17T13:50:55.363
> 
> 标签：facebook-sharer, addthis

在 Facebook 上分享我的链接时，我的行为很奇怪。但 Twitter、LinkedIn 等其他服务运行良好。[这](http://www.maerskline.com/link/?page=news&path=/news/news20120217_dup)是我要分享的 URL。

用于分享的代码来自[AddThis.com](http://www.addthis.com/)

但是分享时，给我脚本错误

> “您的浏览器不支持脚本，或者您已禁用该功能。要获得帮助，请给我们发送邮件以接收回电。”

你能帮我调试一下是什么问题吗？

为在 Facebook 上分享而生成的 url 如下...

> [https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.maerskline.com%2Flink%2F%3Fpage%3Dnews%26path%3D%252Fnews%252Fnews20120217_dup%23.UM8CF1OJGZA。 Facebook](https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.maerskline.com%2Flink%2F%3Fpage%3Dnews%26path%3D%252Fnews%252Fnews20120217_dup%23.UM8CF1OJGZA.facebook)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-01T15:43:10.200

# 什么对我有用

对于那些上述方法不起作用的人：如果您碰巧尝试将 AddThis 与 UTM 代码或其他查询字符串变量一起使用，那么这就是最终对我有用的方法。

根据[Sol](https://stackoverflow.com/a/22852328/1013405)，使用 [OpenGraph 元标记](http://ogp.me/)，然后使用[FB 调试器](https://developers.facebook.com/tools/debug)验证 Facebook 缓存是否已刷新并正确获取页面标题中的所有正确元标记，然后验证您的 AddThis 共享链接是否没有查询字符串 UTM/变量Facebook。出于我的目的，Index.html 不能包含任何查询字符串变量，或者 AddThis 将 URL 错误地传递给 Facebook。对我有用的唯一方法是这样的：

```
<a href="http://api.addthis.com/oexchange/0.8/forward/facebook/offer?pco=tbx32nj-1.0&amp;url=https%3A%2F%2Fwww.example.com%2Findex.html" target="_blank" ><img src="http://cache.addthiscdn.com/icons/v1/thumbs/32x32/facebook.png" border="0" alt="Facebook" /></a> 
```

# 什么对我失败了

当尝试使用下面的 AddThis“data_track_addressbar”和“addthis_widget.js”模块进行分享时，Facebook 完全无法拉取新的 OpenGraph 元标签。

```
<script type="text/javascript">var addthis_config = {"data_track_addressbar":false};</script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T13:55:47.977

facebook 可能在整个结构中阻止了该网站。要检查是否是这样，请尝试将该 maerskline.com 链接粘贴到任何评论框中。如果在评论任何状态更新的链接时也出现问题，那么您可以使用[http://goo.gl/](http://goo.gl/)将您的 maerskline.com 链接转换为其他一些看起来很无辜的链接，这会欺骗 Facebook 并允许您发布该链接在 facebook 的任何地方链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T14:25:21.100

这不是脚本错误，而是源代码中的正确内容。它也没有被阻止，否则会出现一条错误消息。

我建议使用 Open Graph Tags，请参见此处：

[http://ogp.me/](http://ogp.me/)

添加其中一些（标题、描述、图像……）后，一切都会正确显示。在这里测试：[https ://developers.facebook.com/tools/debug](https://developers.facebook.com/tools/debug)

查看警告，它们会告诉您应该最少使用哪些 Open Graph 标记。如果您不包含任何 Open Graph 标签，Facebook 将使用您页面中的一些文本。不幸的是，Facebook Linter 不知道 JavaScript，因此它会直接从您的页面中获取错误消息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-21T13:32:54.167

uri结尾的问题`%23.UM8CF1OJGZA.facebook`。有相同的错误但其他代码（UZt1MuSm2WM 不是 UM8CF1OJGZA）

# guice - 通过辅助注入将创建上下文注入到 guice 托管实例中

> ID：13915446
> 
> 赞同：0
> 
> 时间：2012-12-17T13:51:01.780
> 
> 标签：guice, assisted-inject

我希望能够通过辅助注入到创建的对象中发现/注入创建对象的方法的名称。

我想做的一个例子：

```
// what I want guice to create the implementation for this
interface Preferences {
  Preference<String> firstName();
  Preference<String> lastName();
  // other preferences possibly of other types
}

// my interfaces and classes
interface Preference<T> {
  T get();
  void set(T value);
}
class StringPreference implements Preference<String> {
  private final Map<String, Object> backingStore;
  private final String key;
  @Inject StringPreference(@FactoryMethodName String key, 
                           Map<String, Object> backingStore) {
    this.backingStore = backingStore;
    this.key = key;
  }

  public String get() { return backingStore.get(key).toString(); }
  public void set(String value) { backingStore.put(key, value); }
}

// usage
public void exampleUsage() {
  Injector di = // configure and get the injector (probably somewhere else)
  Preferences map = di.createInstance(Preferences.class);
  Map<String, Object> backingStore = di.createInstance(...);

  assertTrue(backingStore.isEmpty()); // passes

  map.firstName().set("Bob");
  assertEquals("Bob", map.firstName().get());
  assertEquals("Bob", backingStore.get("firstName"));

  map.lastName().set("Smith");
  assertEquals("Smith", map.lastName().get());
  assertEquals("Smith", backingStore.get("lastName"));
} 
```

不幸的是，到目前为止，我想到的唯一方法是

1.  扩展辅助注入（通过复制和粘贴）以添加我的功能
2.  写一些非常类似于为我做的辅助注射的东西
3.  编写很多样板文件，在没有 guices 帮助的情况下做到这一点

我正在寻找以下方面的解决方案：

1.  执行此操作的一些 guice 配置或模式
2.  一些这样做的扩展
3.  我可以查看的文档/示例将帮助我自己编写此内容
4.  示例应用程序的替代模式来完成我想做的事情

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T23:59:32.140

您关于注入创建上下文的真正请求[在 Guice 中是不可能的，也将不可能](https://stackoverflow.com/a/9035193/1426891)。（[直接链接到错误](http://code.google.com/p/google-guice/issues/detail?id=27)）

其他几个想法：

*   如果您的用例可以满足只读属性，则使用[`Names.bindProperties`](http://google-guice.googlecode.com/svn/trunk/javadoc/com/google/inject/name/Names.html)它将允许将整个`Properties`实例（或`Map<String, String>`）绑定到具有适当`@Named`注释的常量。像其他`bindConstant`调用一样，这甚至会为您转换为适当的原始类型，或者您使用绑定的任何其他内容[`convertToTypes`](https://google-guice.googlecode.com/svn/trunk/javadoc/com/google/inject/Binder.html)。

*   如果您只是为每个注入类寻找一个单独的 Map，请不要忘记您可以编写自己的工厂。

    ```
    class PreferenceMapOracle {
      private static final Map<Class<?>, Map<String, String>> prefMap =
          Maps.newHashMap();

      public Map<String, String> mapForClass(Class<?> clazz) {
        if (prefMap.contains(clazz)) {
          return prefMap.get(clazz);
        }
        Map<String, String> newMap = Maps.newHashMap();
        prefMap.put(clazz, newMap);
        return newMap;
      }
    }

    class GuiceUser {
      private final Map<String, String> preferences;

      @Inject GuiceUser(PreferenceMapOracle oracle) {
        preferences = oracle.mapForClass(getClass());
      }
    } 
    ```

*   Guice 内置的任何内容都不会自动反映在您的`Preferences`界面中，并在没有的地方创建一个 bean 样式的实现。您可能可以通过自由使用[动态代理对象](http://docs.oracle.com/javase/6/docs/technotes/guides/reflection/proxy.html)或使用像[GSON](http://code.google.com/p/google-gson/)这样提供漂亮反射支持的包来编写自己的聪明框架。您仍然需要以一种或另一种方式提供那些反射创建的接口，但我可以很容易地想象这样的调用：

    ```
    preferences = oracle.getPrefs(Preferences.class); 
    ```

# c# - 如何在本地控制器调用中使用 [DataMember] 序列化属性？

> ID：13915451
> 
> 赞同：0
> 
> 时间：2012-12-17T13:51:20.977
> 
> 标签：c#, asp.net-web-api, json.net

我有一个 WebAPI 控制器，它与具有属性属性的模型类一起使用，以将 C# 命名转换为更像 JavaScript 的命名。例如

```
 [DataMember(Name = "posInfo")]
    public string PositionInformation { get; set; } 
```

如果我通过电线公开这些值，一切正常。现在我尝试调用服务器端的控制器在应用程序启动时引导一些初始值。但是，如果我在本地调用控制器，则 [DataMember] 属性不会“解析”。一切都以 C# 命名属性返回。

[DataContract][DataMember] 什么时候开始，如果我在本地调用我的控制器，如何使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T20:42:23.763

DataMember 将在您的对象被反序列化时使用。因此，如果您使用 web-api 通过网络发送您的对象，您的客户端应该以**posInfo**的形式接收该属性。如果您通过 .net 在本地引用您的对象（例如，在库或项目引用中），那么您将通过其名称**PositionInformation**来引用该属性。

根据您正在执行的序列化类型，可能未翻译此属性或不支持 DataMember 属性。FWIW，Web API 的内置 XML 和 JSON 序列化程序支持 DataMember 和 DataContract 属性。

有关 DataMember 属性如何工作的更多信息，请参见[MSDN 站点](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datamemberattribute.aspx)。

# ios - 在 iOS 上强制解锁 sqlite 数据库

> ID：13915455
> 
> 赞同：0
> 
> 时间：2012-12-17T13:52:03.397
> 
> 标签：ios, sqlite

现在我知道真正的答案是找到丢失的 finalize 语句在哪里，确保它在通过委托的所有路由上都关闭。但是，我确实在一个真实的应用程序上遇到过这样的情况，即大约每 50,000 人中就有 1 人偶尔会将该应用程序置于数据库被锁定的状态。我正在寻找导致它的代码路径，但还没有找到重现的方法，所以希望在下一次更新中至少有一个错误恢复系统。

我知道应用程序启动时数据库不应被锁定，因此可以测试该错误情况 - 但在这种情况下，我如何才能强制将其全部解锁？

# c# - Pocket PC SQL Server 连接错误

> ID：13915457
> 
> 赞同：0
> 
> 时间：2012-12-17T13:52:07.897
> 
> 标签：c#, sql-server, pocketpc

我正在尝试通过 Visual Studio 2005 中的 Pocket PC 项目连接到 SQL Server 2005。但我不能。

当我尝试通过 Windows 窗体应用程序连接时，一切正常。但在 PocketPc 应用程序中我无法连接。我认为这是关于连接字符串。这是字符串；

```
connectionStr = @"Data Source=MUSTAFATOKNB\MTOKSQL;Initial Catalog=A1DB;Persist Security Info=True;User ID=sa; Password=mtok6878";
connectionStr = @"Data Source=MUSTAFATOKNB\MTOKSQL;Initial Catalog=A1DB;User ID=sa;Password=mtok6878;";
connectionStr = @"Data Source=MUSTAFATOKNB\MTOKSQL;Initial Catalog=A1DB;Integrated Security=SSPI;User ID=sa;Password=mtok6878;"; 
```

它们都没有在 PocketPc 中工作，但它们都在 Windows 窗体应用程序上工作。

和想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T22:53:20.210

Connect to your SQL Server (any directory on the network) using Windows Explorer first. It will ask you for your username and password to access the network resource.

Once Windows can connect to that resource, the connection string should work.

![screenshot1](../Images/52bc2c680b3e69da5d0513b9733c9bc8.png) ![screenshot2](../Images/604595d6cb7122f01bc58397d8fc3c38.png)

# amazon-web-services - 在 ec2 ubuntu 实例上自动化 Git 拉取过程

> ID：13915465
> 
> 赞同：2
> 
> 时间：2012-12-17T13:52:26.737
> 
> 标签：amazon-web-services, amazon-ec2, ubuntu-12.04

我正在运行几个 ubuntu ec2 实例，我想运行一个自动化脚本，只要从 AMI 启动一个新实例，它就会从 Github 中提取代码。事情是目前我正在`ssh`连接服务器并运行命令`git pull origin master`，它会要求输入密码密钥。

我如何自动化这个过程？因此，从 AMI 启动新实例后，该脚本应该：

*   跑
*   拉取代码和子模块
*   创建几个文件并配置它

请帮助我实现它。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T14:02:55.437

这可能需要一些时间和配置，但这可能会让您走上正确的道路。

首先，设置您的 ssh 密钥，以便您可以自动从 repo 中提取，而无需密码。此处概述：[https ://help.github.com/articles/generating-ssh-keys](https://help.github.com/articles/generating-ssh-keys)

接下来，创建一个启动脚本以从 Github 发出“pull”命令。在这里：[https ://help.ubuntu.com/community/UbuntuBootupHowto](https://help.ubuntu.com/community/UbuntuBootupHowto)

然后保存您的 AMI，当您启动一个新的 EC2 AMI 时，脚本应该运行，拉入您的 Github 更改。

还要注意，确保 gits 远程路径使用 SSH，如果是 HTTPS，它总是会要求输入密码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T21:00:15.103

最好的办法是利用 Ubuntu 在其规范映像中利用 CloudInit 的事实。

使用 CloudInit，您可以传递脚本（即 shell 脚本）以在各个启动阶段作为 EC2 用户数据执行。

你可以很容易地让你的 GIT 命令行序列从这样的脚本中执行。他是文档的链接，其中包括示例。

[https://help.ubuntu.com/community/CloudInit](https://help.ubuntu.com/community/CloudInit)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T14:01:32.863

创建对您的 ubuntu 实例的用户密码访问。如果您需要多个，请复制此特定实例。现在您不再需要密钥访问了。如果您需要在该实例中自动化一个进程，请 cron 它或通过 ssh 将脚本发送到该实例并让 cron 找到并运行它。

# php - 图像版本控制 - 最佳方法

> ID：13915466
> 
> 赞同：2
> 
> 时间：2012-12-17T13:52:28.153
> 
> 标签：php, codeigniter, hash, versioning

我正在用 php (codeigniter) 开发一个站点框架，并希望在图像上传时引入图像版本控制，以便我可以利用图像缓存。最简单的方法就是对图像进行 md5 并将其用作文件名，但我不喜欢这种方法，原因如下：

> 1）图像名称对 SEO 不友好
> 
> 2）md5 散列看起来不必要地长 - 因此需要更大的数据库字段。

所以我正在考虑使用如下方法：

文件名以输入的图像名称开头，下划线而不是空格，然后添加一个随机生成的整数，比如 8 位长。这意味着我必须通过该名称检查现有图像，然后如果存在整数则重新生成整数（但不太可能）。

大概我还必须为每个图像大小设置唯一的文件名，所以我想这里的解决方案是添加一个代表文件大小的前缀。

现在我想第一次做对，因为一旦部署了框架就很难改变，所以我真的只是在寻找输入

> a）我的担忧是否合理（特别是文件名对 SEO 有什么作用，随机数字串的长度是否会影响它）
> 
> b）我是否应该关注或检查我提出的方法是否还有其他问题。
> 
> c）是否有更简单的方法，也许是产生更短结果的散列算法。
> 
> d) 是否已经有一个 ci lib 可以做到这一点？

感谢您的意见和建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T14:58:07.110

这回答了你的几个问题：

用下划线替换空格不足以获得干净的文件名，因为您需要检查更多奇怪的字符，但您可以使用 CI 安全库中的 sanitize_filename() 方法：http: [//ellislab.com/codeigniter/user-guide /libraries/security.html](http://ellislab.com/codeigniter/user-guide/libraries/security.html)

如果您确实想保留原始文件名，那么您的方法对我来说听起来不错。但是，文件名末尾的 8 位整数可以通过简单的增量循环检查以该结尾的文件是否存在来替换为“-1”、“-2”、“-3”。

文件上传库是您可以查看的东西 - [http://ellislab.com/codeigniter/user-guide/libraries/file_uploading.html](http://ellislab.com/codeigniter/user-guide/libraries/file_uploading.html)。它很灵活，可以配置为保留原始文件名。从 Security lib 获取 sanitize_filename() 来工作应该完全符合您的需要。

在我所有的 CI 应用程序中，我总是使用加密的文件名（此可选功能由 CI 文件上传类提供）。同时，我可以将库配置为不覆盖现有文件，方法是向它添加一个数字（如果没有使用加密）或只给它另一个加密名称（当加密选项打开时）。我确实喜欢这种方式，因为它使文件名保持一致干净（虽然很长而且对 SEO 不友好，但是 ALT 标签让它更多地暴露在搜索引擎中）。

# mercurial - Mercurial：查看上次提交更改的简单方法

> ID：13915467
> 
> 赞同：63
> 
> 时间：2012-12-17T13:52:29.083
> 
> 标签：mercurial

在 Mercurial 中，我可以通过运行查看当前（未提交的）更改

```
$ hg diff 
```

美好的。但是在提交之后，我有时想再次看到这个差异（即*最后一个变更集*的差异）。我知道我可以通过

```
$ hg log -l 1
changeset:    1234
tag ...

$ hg diff -c 1234 
```

我正在寻找一种方法来做到这一点。

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-12-17T13:58:29.977

使用`hg diff -c tip`, 或`hg tip -p`（更短，但仅适用于小费）。

这将一直有效，直到您拉取某些东西，因为`tip`它是通过本地提交或从远程存储库中拉/推出现在存储库中的最新修订的别名。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-05-04T11:15:49.913

您可以对选项使用相对修订号`--change`：

```
hg diff -c -1 
```

有关更多信息，请参阅[https://stackoverflow.com/a/3547662/239247](https://stackoverflow.com/a/3547662/239247)。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-10-05T06:45:05.603

另一种方法是使用：`hg diff --rev -2:-1`

这种形式的优点是它可以与`status`命令一起使用（例如`hg st --rev -2:-1`），并且使用它可以很容易地记住当需要确定其他修订对之间的差异时要做什么（例如`hg diff --rev 0:tip`）。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-10-24T21:31:55.010

Macke 的回答很有帮助，但就我而言，我不想区分小费。

值得庆幸的是，您还可以区分当前选择的评论：

```
hg diff -c . 
```

# javascript - CSS：由于 CSS 移植故障，子菜单扩展器 ([+]/[-]) 在打开和关闭时上下跳跃

> ID：13915471
> 
> 赞同：0
> 
> 时间：2012-12-17T13:52:50.670
> 
> 标签：javascript, jquery, css, web, jqtree

在[这个网站上](http://www.shlomifish.org/__Beta-kmor/)（在 Mageia Linux 3 Cauldron 上的最新版 Opera、Firefox 和 Google Chromium 以及我的 Arch Linux VM 上的 Firefox 上进行了测试），左侧导航菜单的扩展器/[+] 标志稍微移动了一点子菜单展开/折叠时向上和向下。如果有问题的扩展器是子树中的最后一个扩展器（例如，在“幽默”→“推荐”下），情况并非如此。

为什么以及如何避免？是因为文本中的字符不同吗？我尝试将其设置为等宽 - 它没有帮助。[它在这里](http://www.shlomifish.org/)工作得很好，但是 CSS 和生成的 DOM 是不同的。

（**注意：** [这](http://www.shlomifish.org/)是我的永久站点，而[这](http://www.shlomifish.org/__Beta-kmor/)是临时/测试站点。它们现在看起来基本相同，但不使用完全相同的标记、CSS 和 JS。）

问题是我试图让[jqTree](http://mbraak.github.com/jqTree)看起来更像我在旧的 jQuery Treeview 中的样子，但它不会合作。昨天我花了一整天的时间，虽然我解决了很多问题，但我仍然有这个问题。

我尝试使用 Firefox 的 Firebug、Opera 的 Dragonfly 和 Google Chromium 中的等效工具，但我缺乏了解问题所在的必要技能。

似乎 jQuery Treeview 作者试图通过使用具有不同图像的单个图像来优化性能，`background-position`这使得调试变得困难，我还没有摆脱它。

任何对问题的精确定位和/或修复将不胜感激。

# regex - 正则表达式在字符串中查找单词，在新字符串中替换单词（使用记事本++）

> ID：13915475
> 
> 赞同：3
> 
> 时间：2012-12-17T13:53:13.990
> 
> 标签：regex, notepad++, replace

我之前发布了这个问题的简化版本，但我想我可能已经简化了太多，所以这里是实际的问题。

我想使用正则表达式（在 Notepad++ 或类似中）在以下内容中找到“a_dog”（对墙感到抱歉）：

```
<object classid="clsid:D27CDB6E-AE6D-11cf" id="FlashID">
<param name="movie" value="../flash/words/a_dog.swf">
<param name="quality" value="high">
<param name="wmode" value="opaque">
<param name="swfversion" value="6.0.65.0">
<!--[if !IE]>-->
  <object data="../flash/words/a_dog.swf" type="application/x-shockwave-flash">
     <!--<![endif]-->
     <param name="quality" value="high">
     <param name="wmode" value="opaque">
     <param name="swfversion" value="6.0.65.0">
     <!--[if !IE]>-->
  </object>
<!--<![endif]-->
</object> 
```

然后，我想使用反向引用将所有 øø 实例替换为 a_dog 如下：

```
<input type="button" class="ButtonNormal" onClick="audio_func_øø()">
 <script>
    function audio_func_øø() {
    var playAudio = document.getElementById("element_øø");
    playAudio.play();
    }
 </script>
 <audio id="element_øø">
    <source src="../audio/words/øø.mp3" type='audio/mpeg'>
    <source src="../audio/words/øø.wav" type='audio/wav'>
 </audio> 
```

所以只剩下第二个代码（用 a_dog 而不是 øø），并且没有留下第一个代码的痕迹。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T15:27:59.673

我不知道如何在 Notepad++ 中执行此操作，但您可以在[SublimeText](http://www.sublimetext.com/)中使用正则表达式、片段和[多项选择](http://www.sublimetext.com/docs/2/multiple_selection_with_the_keyboard.html)来执行此操作：

首先制作一个[新的片段（指南）](http://web-design-weekly.com/2012/07/03/snippets-in-sublime-text-2/)，其中包含以下内容：

```
<snippet>
    <content><![CDATA[

<input type="button" class="ButtonNormal" onClick="audio_func_$1()">
<script>
    function audio_func_$2() {
        var playAudio = document.getElementById("element_$3");
        playAudio.play();
    }
</script>
<audio id="element_$4">
    <source src="../audio/words/$5.mp3" type='audio/mpeg'>
    <source src="../audio/words/$6.wav" type='audio/wav'>
</audio>

    ]]></content>

    <!-- Optional: Set a tabTrigger to define how to trigger the snippet -->
    <tabTrigger>audioSnippet</tabTrigger>
</snippet> 
```

将其保存为您的用户包中您喜欢的任何内容。如果您对如何/在何处保存以使其正常工作有任何疑问，请按照链接的文章。稍后我将讨论这是如何工作的。

接下来通过使用以下模式搜索（启用正则表达式）在 Sublime Text 中使用以下正则表达式：

```
(?<=value="../flash/words/).+(?=\.swf) 
```

[并点击“查找全部” - 这将使用多项选择](http://www.sublimetext.com/docs/2/multiple_selection_with_the_keyboard.html)选择所有名称（例如“a_dog”、“a_cat”、“a_plane”）。

*   复制选定的单词（`Ctrl+C`或系统上的等价词）
*   在菜单中，Selection->Expand to Paragraph（这将选择从哪里`<object>`开始，到哪里`</object>`结束）
*   点击 Delete/Backspace 删除`<object>`'s
*   输入您的片段快捷方式（上面我已将其定义为“audioSnippet”）并点击 Tab
*   粘贴复制的文本（`Ctrl+V`或系统上的等效文本）

您会注意到您只替换了`$1`出现的片段中的文本。您需要按 Tab 键跳转到`$2`，再次粘贴文本 ( `Ctrl+V`)，然后重复直到到达制表位`$6`。

我制作了一个屏幕截图，您可以在这里查看：http: [//youtu.be/oo2MQV3X244](http://youtu.be/oo2MQV3X244)（YouTube 上的未列出视频）

# c++ - C ++分别获取每个数字

> ID：13915479
> 
> 赞同：-1
> 
> 时间：2012-12-17T13:53:43.763
> 
> 标签：c++, integer, division

我有一个从 100 到 999 的数字范围。我需要分别获取每个数字并检查它是否可以除以 2。例如：

```
232
2 divided by 2 = 1 = true
3 divided by 2 = 1.5 = false
2 divided by 2 = 1 = true 
```

等等。

要获得第一个数字，我所要做的就是将整个数字除以 100。

```
int x = 256;
int k = x/100; 
```

所以`x`将保持值为 2。

现在，有没有办法检查其他那些？因为`k = x/10;`已经25岁了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T13:56:34.503

也许研究整数除法和模数。

```
int k1 = (x / 10) % 10 // "10s"
int k2 = ( x / 100 ) % 10 // "100s"
//etc etc 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T13:57:03.377

试试这个：

```
int x = 256;
int i = x / 100; // i is 2
int j = (x % 100) / 10; // j is 5
int k = (x % 10); // k is 6 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T13:56:21.117

使用取模得到数字的最后一位，然后除以十舍弃最后一位。

在数字非零时重复。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T13:56:34.433

您需要的是模运算符`%`。它进行除法并返回提醒。

```
1 % 2 = 1
2 % 2 = 0
3 % 2 = 1
4 % 2 = 0
... 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-12-17T14:02:25.017

例如。取232：

```
int num = 232;
int at_ones_place = num % 10;
int at_tens_place = ( num /10 ) % 10 ;
int at_hundreds_place = (num /100); 
```

# sharepoint-2007 - 布局页面不继承 SharePoint 2007 中的母版页

> ID：13915482
> 
> 赞同：0
> 
> 时间：2012-12-17T13:54:00.053
> 
> 标签：sharepoint-2007

我在网站集中有一个网站。我已将子站点的母版页修改为固定宽度为 960 像素。这适用于除内置布局页面之外的所有页面、列表、库，例如，在单击“所有站点内容”时，页面占据了全尺寸宽度而不是 960 像素。

我该如何解决这个问题..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T12:06:23.873

View ALL站点内容中显示的内容使用Table, TH,Tr, TD结构来显示数据，默认宽度设置为100%。

因此，如果您想提供 960 像素的固定宽度，则必须使用 Sharepoint 设计器更改该设置。

纠正我如果我错了。

还有一件事，如果您有自己的自定义母版页，那么您还必须将其应用到应用程序页面。

转到站点操作 > 站点设置 > 在站点母版页设置下单击母版页

如果您有自定义母版页，请在“系统母版页”部分应用它

谢谢

# gnuplot - 使用 gnuplot 在轴上显示 2 的幂

> ID：13915483
> 
> 赞同：7
> 
> 时间：2012-12-17T13:54:08.163
> 
> 标签：gnuplot

我正在尝试使用 gnuplot 来绘制我的实验结果。

我编写了一个 C++ 程序，它生成一个如下所示的数据文件：

```
10   3.5
11   3.5
12   3.5
13   3.6 
```

我想要做的是在 x 轴上将此数据文件的第一列的值显示为 2 的幂。它看起来像这样（它不必看起来完全相同）：

[http://i.stack.imgur.com/8BSLr.png](https://i.stack.imgur.com/8BSLr.png)

因此，对于我发布的数据文件，我希望在 x 轴上有 2^10、2^11 等。知道怎么做吗？

如果需要，我可以更改数据文件的格式。

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-17T16:02:07.353

这可以通过操纵`using`规范相对容易地完成：

```
plot datafile using (2**$1):2 
```

如果你这样做，你可能还想要一个

```
set logscale x 2
set format x '2^{%L}'  #<- enhanced text. 
```

使情节看起来更好。

# .net - .net HttpClient 与自定义 JsonConverter

> ID：13915485
> 
> 赞同：16
> 
> 时间：2012-12-17T13:54:13.670
> 
> 标签：.net, json, asp.net-web-api, dotnet-httpclient

我正在使用 .NET 的 HttpClient 向 WebAPI 发出请求，该 WebAPI 返回一些 JSON 数据，这些数据需要在客户端进行一些自定义反序列化。为此，我制作了自己的`JsonConverter`，但我不知道如何让该`ReadAsAsync<T>`方法获取转换器的存在。

我现在已经解决了我的问题，方法是使用`ReadAsStringAsync`读取响应，然后将该字符串传递给`JsonConvert.DeserializeObject`，但似乎应该有一个更优雅的解决方案。

这是我的代码：

```
public PrefsResponse GetAllPrefs(string sid) {
    HttpClient client = CreateHttpClient(null, sid);
    var response = client.GetAsync("api/sites/" + sid).Result;

    // TODO : find a way to hook custom converters to this...
    // return response.Content.ReadAsAsync<PrefsResponse>().Result;

    var stringResult = response.Content.ReadAsStringAsync().Result;

    return JsonConvert.DeserializeObject<PrefsResponse>(stringResult, new PrefClassJsonConverter());
} 
```

这是我能做的最好的，还是有更优雅的方式？

这里也是我创建 HttpClient 的地方，如果那是我需要连接它的地方：

```
 private HttpClient CreateHttpClient(CommandContext ctx, string sid) {
        var cookies = new CookieContainer();

        var handler = new HttpClientHandler {
            CookieContainer = cookies,
            UseCookies = true,
            UseDefaultCredentials = false
        };

        // Add identity cookies:
        if (ctx != null && !ctx.UserExecuting.IsAnonymous) {
            string userName = String.Format("{0} ({1})", ctx.RequestingUser.UserName, ctx.UserExecuting.Key);
            cookies.Add(new Cookie(__userIdCookieName, userName));
            cookies.Add(new Cookie(__sidCookieName, sid));
            cookies.Add(new Cookie(__hashCookieName,
                                   GenerateHash(userName, Prefs.Instance.UrlPrefs.SharedSecret)));
        }

        var client = new HttpClient(handler) {
            BaseAddress = _prefServerBaseUrl
        };

        client.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue("application/json"));

        return client;
    } 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-17T15:17:54.740

您可以将`JsonSerializerSettings`您的转换器列表传递给`JsonMediaTypeFormatter`将由以下人员使用的`ReadAsAsync<T>`：

IE

```
var obj = await result.Content.ReadAsAsync<refsResponse>(
    new[] {new JsonMediaTypeFormatter {
          SerializerSettings = new JsonSerializerSettings { 
              Converters = new List<JsonConverter> {
                //list of your converters
               }
             } 
          }
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T14:31:00.060

可能您想使用[HttpClient.GetStringAsync Method (String)](http://msdn.microsoft.com/en-us/library/hh551746.aspx)

```
var response = client.GetStringAsync("api/sites/" + sid);
return JsonConvert.DeserializeObject<PrefsResponse>(response.Result, new  PrefClassJsonConverter()); 
```

或者你到底想要什么更优雅？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-11T09:34:28.523

我能够使用以下内容将自定义 JsonConverter 添加到 HttpClient 的默认格式化程序中：

```
MediaTypeFormatterCollection formatters = new MediaTypeFormatterCollection(); 
formatters.JsonFormatter.SerializerSettings.Converters.Add(new MyCustomConverter());

var result = response.Content.ReadAsAsync<T>(formatters).Result; 
```

这似乎允许您将自定义转换器添加到默认转换器。

# objective-c - 白色 NSProgressIndicator

> ID：13915489
> 
> 赞同：0
> 
> 时间：2012-12-17T13:54:38.430
> 
> 标签：objective-c, macos, automatic-ref-counting, nsprogressindicator

我怎样才能得到一个白色的`NSProgressIndicator`？

我在 SO 和其他各种博客上看到了其他一些解决方案，但这些解决方案似乎都有些过时并且似乎与 ARC 不兼容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T14:59:54.350

我还没有测试过，但是你看过 -setControlTint: 方法吗？

# google-chrome - Webkit 的奇怪 CSS 转换和缩放行为

> ID：13915491
> 
> 赞同：0
> 
> 时间：2012-12-17T13:54:46.120
> 
> 标签：google-chrome, css, transitions

我正在开发一个你可以[在这里看到的网站](http://cameronsflash.com/misc/sculptor/test.html)

当窗口为特定分辨率时，Chrome 中会发生一些奇怪的事情。例如，如果您将宽度设为 943 像素，然后将鼠标悬停在图像上，您会看到在过渡期间某些图像旁边出现白条，就好像图像正在水平调整大小一样。

这在 Firefox 或 IE 中不会发生。

为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T14:25:18.527

943px - 16px（填充）= 927px

927px * 20% = 185.38333129882813px（铬）

185.38333129882813px * 5 = 926,91...

927 - 926,91... = 你的白条

这是亚像素问题。看这个网站：[http ://tylertate.com/blog/2012/01/05/subpixel-rounding.html](http://tylertate.com/blog/2012/01/05/subpixel-rounding.html)

# html - 内联显示留下空白

> ID：13915494
> 
> 赞同：0
> 
> 时间：2012-12-17T13:55:00.863
> 
> 标签：html, alignment, css

在[此页面](http://bit.ly/V31rvN)的底部，我有一个媒体库。前三张照片是照片库，在它之后我放置了一些视频缩略图。由于某种原因，视频库的每个元素的对齐方式都搞砸了。你能帮助我吗？

这是每个视频缩略图的 HTML：

```
<?php  if((get_post_meta($post->ID, 'url_video3', true))) { ?>
<div class="video_container">
<a href="#TB_inline?inlineId=url_video3&width=600&height=400" class="thickbox video">
<?php $attachment_id = get_field('icona_video3'); echo wp_get_attachment_image( $attachment_id, icona); ?>
<div class="play-icona"><img src="<?php bloginfo('template_url'); ?>/images/video_link.png" /></div>
</a>
</div>
<?php } ?> 
```

这是CSS：

```
.thickbox.video {
text-decoration: none !important;
width: 96px !important;
height: 96px !important;
}
.video_container {
position: relative;
display: inline-block;
height: 96px !important;
width: 96px !important;
margin: 0 !important;
padding: 0 !important;
}
.play-icona {
position:absolute;
left:35%;
top:35%;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T14:01:12.643

一般来说，`inline-block`元素尊重周围的空白（遵循标准的空白折叠规则）。如果渲染一个元素`inline-block`导致元素周围有明显的间隙，请确保 HTML 中的两个元素彼此正对 - 如果有任何换行符或空格，它们将被 Web 浏览器转换为间隙。

# c#-4.0 - .NET 的 PeerFinder 类可以通过笔记本电脑通过蓝牙与手机设备通信吗？

> ID：13915496
> 
> 赞同：0
> 
> 时间：2012-12-17T13:55:03.660
> 
> 标签：c#-4.0, bluetooth, windows-runtime, proximity, wireless

我怀疑`PeerFinder`.NET 中类的限制。在笔记本电脑上实现时，它只能与其他笔记本电脑连接，而在手机上实现时，它可以与同一部手机连接吗？它是否仅限于与 Windows 操作系统设备进行通信，还是能够与任何蓝牙设备进行通信，而与操作系统无关？

如果您确定此类功能，请帮助我。我已经看到了 32Feet.NET 的实现，但我的问题仅限于`PeerFinder`类及其局限性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T13:06:47.830

从这个链接开始，您可以在其中找到几个有用的 WinRT 通信链接（建议使用 Windows Phone 8 使用 NFC 或蓝牙进行通信的协议） [http://blogs.ugidotnet.org/Nick60/archive/2012/12 /30/win-rt-proximity-communication.aspx](http://blogs.ugidotnet.org/Nick60/archive/2012/12/30/win-rt-proximity-communication.aspx)

您有两种可能的情况：

**应用到设备**：您可以将 Windows Phone 8 设备连接到第三方设备（例如 LEGO 机器人或汽车音响系统）蓝牙/RFCOMM（即*串行端口配置文件*，用于模拟 RS232 串行连接）。

**App to App**：用于 Windows Phone 8 设备和 Windows 8/Windows RT 设备之间的通信！

PeerFinder 类是在附近设备上发现您的应用程序的另一个实例并通过使用点击手势或浏览在对等应用程序之间创建套接字连接的基类：http: [//msdn.microsoft.com/en-us/库/windows/apps/br241203.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/br241203.aspx)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-04T18:36:04.940

不幸的是，似乎在 WP8 应用程序和 Windows 8 应用程序之间使用蓝牙建立套接字连接的唯一方法是使用 NFC 轻击手势触发连接。尽管 PeerFinder 文档建议您可以指定 AlternateIdentities 来通告在两个设备上运行的对等方，但似乎 Windows 8 依赖于 WiFi Direct，而 WP8 使用蓝牙。

因此，如果您无法在两台设备之间使用 NFC 轻击手势来触发连接，您可能无法将运行在不同设备上的两个应用程序配对。

有关更多信息，请参阅[此线程](https://stackoverflow.com/questions/13793342/is-nfc-necessary-to-use-peerfinder/18046167#18046167)。

# .net - 完全了解 .NET 版本和向后兼容性

> ID：13915498
> 
> 赞同：11
> 
> 时间：2012-12-17T13:55:11.597
> 
> 标签：.net, .net-2.0, clr

我有一个 .NET 2.0 应用程序，我计划制作一个“智能安装程序”，用于检查用户 PC 上可用的 .NET 版本并为其安装我的特定端口。我看到了：

*   Windows XP (SP2) 附带 .NET 2.0
*   Windows Vista 附带 .NET 3.0
*   Windows 7 附带 .NET 3.5
*   Windows 8 附带 .NET 4.5

据我所知，唯一不向后兼容的是 CLR 版本，它在 .NET 4.0 之后发生了变化。

因此，如果我不希望用户仅为我的应用程序安装额外的框架，我应该拥有这些版本的应用程序：

*   .NET 2.0 - XP（SP2 及更高版本）、Vista（3.0 应该能够运行 2.0）和 7（3.5 应该能够运行 2.0）
*   .NET 4.0 - 如果有人只安装了 4.0 而没有其他
*   .NET 4.5 - 适用于拥有 Windows 8 且未安装其他 .NET 的用户

我对吗？还是 4.5/4.0 向后兼容？

**编辑：如果任何上部数据不正确，请纠正我**

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-17T14:09:06.067

> 据我所知，唯一不向后兼容的是 CLR 版本，它在 .NET 4.0 之后发生了变化。

这不是真的。您可以使您的 .NET2 编译应用程序在 .NET4 框架上运行。

您只需将以下内容添加到您的 app.config 中：

```
<configuration>
<startup>
    <supportedRuntime version="v2.0.50727"/>
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0,Profile=Client"/>
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/>
  </startup>
</configuration> 
```

注意，我同意@KingKronus，即`Why not just pick the lowest common denominator?`

在您的情况下，这将是 .NET2 编译的，并且只有一组 pdb 和一个编译集。

是的，您需要在 .net4 运行时测试您的 .NET2 编译的应用程序是否正常运行，但无论如何您都需要在原始解决方案中的每个框架中测试您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T13:59:57.920

1.  其实你不需要手动检查。您的应用程序将在您运行后显示正确的消息并要求用户下载并安装所需的版本。

2.  如果您仍需要支持 windows XP，请选择 .NET 4.0。.NET 4.5 将处理它

# wpf - Xaml 转换保持现有转换不受影响的转换

> ID：13915499
> 
> 赞同：1
> 
> 时间：2012-12-17T13:55:12.140
> 
> 标签：wpf, xaml

我修改了一个拨动开关，所以我可以在它上面使用一个图标。然后我添加了一个自定义属性来保存图像信息和它的旋转。我的图像的定义有点像这样：

```
<Image x:Name="SwitchKnobActive" Source="{Binding Path=(common:FilterSwitchImageHolder.ActiveImage), RelativeSource={RelativeSource TemplatedParent}}" Width="50" Visibility="{Binding IsOn, RelativeSource={RelativeSource Mode=TemplatedParent}, Converter={StaticResource BoolToVisibilityConverter}, ConverterParameter=True}" RenderTransformOrigin="0.5, 0.5">
    <Image.RenderTransform>
        <TransformGroup>
            <TranslateTransform x:Name="KnobActiveTranslateTransform"/>
            <RotateTransform Angle="{Binding Path=(common:FilterSwitchImageHolder.Angle), RelativeSource={RelativeSource TemplatedParent}}" />
        </TransformGroup>
    </Image.RenderTransform>
</Image> 
```

现在，当我选择图像时，我想将其缩放两倍，当我这样做时，我会松开旋转。我尝试像上面一样再次设置旋转，但它被忽略了。有没有办法可以保持现有的转换？

* * *

编辑：

单击 XAML 时的转换：

```
<VisualState x:Name="Pressed">
    <Storyboard>
        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="RenderTransform" Storyboard.TargetName="SwitchKnobActive">
            <DiscreteObjectKeyFrame KeyTime="0">
                <DiscreteObjectKeyFrame.Value >
                    <ScaleTransform ScaleX="2" ScaleY="2"></ScaleTransform>
                </DiscreteObjectKeyFrame.Value>
            </DiscreteObjectKeyFrame>
        </ObjectAnimationUsingKeyFrames>
    </Storyboard>
</VisualState> 
```

仅供参考：所有这些代码都在拨动开关的控制模板中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T14:19:12.013

你是如何应用比例变换的？

通常的模式是将虚拟比例变换添加到变换组并稍后对其进行修改。这样所有其他转换都不会被替换。

```
<Image.RenderTransform>
    <TransformGroup>
        <ScaleTransform x:Name="myScaleTransform" ScaleX="1.0" ScaleY="1.0">
        <TranslateTransform x:Name="KnobActiveTranslateTransform"/>
        <RotateTransform Angle="{Binding Path=(common:FilterSwitchImageHolder.Angle), RelativeSource={RelativeSource TemplatedParent}}" />
    </TransformGroup>
</Image.RenderTransform> 
```

您可以稍后从 xaml 情节提要中访问它，如下所示：

```
<DoubleAnimationUsingKeyFrames BeginTime="00:00:00" 
  Storyboard.TargetName="SwitchKnobActive"
  Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleX)">
  <SplineDoubleKeyFrame KeyTime="00:00:00" Value="1"/> 
```

# c# - 捕获光标键的 KeyDown 和 KeyUp 事件

> ID：13915501
> 
> 赞同：0
> 
> 时间：2012-12-17T13:55:24.390
> 
> 标签：c#, winforms, key, keydown, keyup

我想在 winfor 应用程序中移动一些图形。为此，我需要知道是否按下了任何光标键。我试图覆盖 ProcessCmdKey 但没有成功。

任何提示/想法如何实现这一点？

```
protected override bool ProcessCmdKey(ref Message msg, Keys keyData)
{
    switch (keyData)
    {
        case Keys.Left:
            // while Left is down
            // call this method repeadetdly
            buttonGoLeft();
            // when key is up stop calling this method
            // and check for other keys
            return true;

         //Other cases
     }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T14:34:12.523

这行得通！

```
using System.Windows.Forms;

namespace WindowsFormsApplication5
{
    public partial class Form2 : Form
    {
        public Form2()
        {
            InitializeComponent();
            KeyPreview = true;
        }

        protected override bool ProcessCmdKey(ref Message msg, Keys keyData)
        {
            switch (keyData)
            {
                case Keys.Left:
                    // while Left is down
                    // call this method repeadetdly
                    MessageBox.Show("its left", Application.ProductName, MessageBoxButtons.OK, MessageBoxIcon.Information);
                    // when key is up stop calling this method
                    // and check for other keys
                    return true;

                default:
                    return false;
            }
        }
    }
} 
```

# iis - 为无会话 API 环境配置 IIS

> ID：13915502
> 
> 赞同：1
> 
> 时间：2012-12-17T13:55:27.323
> 
> 标签：iis, coldfusion, iis-7.5, coldfusion-9

我有一个在 IIS 站点上运行的相当简单的 API 环境。该站点大部分配置为默认值，平均每秒处理 4-6 个请求。它所做的只是获取通过 G​​ET 请求参数传入的信息并将其存储在数据库中。

正如我所说，该站点的平均负载为每秒 4-6 个请求，并且现在经常崩溃。我正在尝试重新配置站点以处理更多负载，但我对 IIS 配置并不十分熟悉。有人对如何调试此问题或如何更好地为无会话 API 环境配置 IIS 有建议吗？我可以确认默认日志不会给我任何有用的错误，但如果需要，我可以在这里发布一些。

**编辑：** 这是我在应用程序事件日志中看到的关于错误的标准错误

```
Faulting application name: w3wp.exe, version: 7.5.7601.17514, time stamp: 0x4ce7afa2
Faulting module name: ntdll.dll, version: 6.1.7601.17725, time stamp: 0x4ec4aa8e
Exception code: 0xc0000374
Fault offset: 0x00000000000c40f2
Faulting process id: 0xbc0
Faulting application start time: 0x01cddcf5147d18cc
Faulting application path: c:\windows\system32\inetsrv\w3wp.exe
Faulting module path: C:\Windows\SYSTEM32\ntdll.dll
Report Id: 5256ddd1-48e8-11e2-9c4a-0050560f015f 
```

到目前为止，我们已经从原始帖子开始设置负载平衡来帮助我们，但仍然看到错误发生。

# python - 将桌面移植到 Web 应用程序（生物信息学）

> ID：13915504
> 
> 赞同：0
> 
> 时间：2012-12-17T13:55:43.890
> 
> 标签：python, web-applications, bioinformatics, blast

我想将我为 Windows 操作系统编写的一些生物信息学程序移植到 Web 应用程序中。我正在使用一些生物信息学软件包，例如 BLAST、Bowtie 或 Primer3。这些外部工具通常采用用户提供的文件，对其进行处理并创建一个我解析和显示的输出文件。此外，这些工具使用由用户创建和重用的特定数据库。

到目前为止，我将工具创建的数据库（该文件也由用户提供）和输出结果保存在安装了我的软件的 PC 上。现在，我不知道如何在 Web 服务器上处理这样的设置。我无法保存来自世界各地的用户创建的所有数据库，但同时每次都重新创建一个数据库非常讨厌（例如人类基因组数据库是 2.7 GB 并且需要一些时间来创建它）当用户回来了（我猜一个用户每个工具创建了大约 5-10 个数据库；我有 3 个工具：1 MB - 50 GB）。

如何使用 Web 应用程序解决这个问题？

**编辑** 为了让事情更清楚，我实际上只想知道是否有更复杂的方法来重用用户创建的数据。我正在考虑临时存储这些文件以进行会话。没有可能要求收费，因为这些工具非常具体，我没有很多用户。此外，大多数用户都是亲密的同事。经过多年与不同操作系统的斗争，调试和维护我的程序，我终于放弃了（我在私人时间这样做），这太费时了（另外我对 Linux、Android 和 IOS 有一些要求）。

谢谢

# php - Google Chrome PDF 打印查看器

> ID：13915509
> 
> 赞同：1
> 
> 时间：2012-12-17T13:55:53.017
> 
> 标签：php, pdf, tcpdf

我有一个通过服务器端的 TCPDF 生成的 PDF。在任何浏览器中打开时，它看起来和行为都很好，但在 Google Chrome 中打开时 - 它看起来很好，但 Google 的 PDF 打印查看器显示的 PDF 顶部偏移量约为 100 像素。并用那个偏移量打印出来......

当我切换浏览器插件以强制使用 Adob​​e 工具进行打印时，它看起来很好。

可能是什么问题？

天呐！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T18:56:15.873

对于将来的通知，是的，Chrome 中有一个关于此的记录错误 - 但它也可能有助于在打印弹出窗口中打开“适合页面”选项。

# twitter-bootstrap - 使用 Bootstrap 模拟屏幕？

> ID：13915510
> 
> 赞同：1
> 
> 时间：2012-12-17T13:56:06.357
> 
> 标签：twitter-bootstrap, mockups

在我今天听到的一个演讲中，演讲者提到他们使用 Bootstrap 来构建/转换 Mock-up 屏幕到工作的 HTML 页面。我没有机会询问更多细节。

任何人都可以为此目的提供有关 Bootstrap 的任何指示吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-08T07:54:12.617

您可以使用带有[Bootstrap 模板的](https://mockupstogo.mybalsamiq.com/projects/web/Bootstrap)[Balsamiq Mockups](http://balsamiq.com/download/)工具，或者一些基于 Web 的界面构建工具，例如[Jetstrap](https://jetstrap.com/plans)或[Divshot](http://www.divshot.com/)或[BootstrapDesigner](http://www.bootstrapdesigner.com/)似乎这是最便宜的一个

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T18:14:34.513

[Bootstrap](http://twitter.github.com/bootstrap/)提供了非常好的“开箱即用”样式，通常仅包含* Bootstrap 资产将使原本简单但语义正确的 HTML 文档更具吸引力。

有一种观点认为，模型中过多的修饰会使设计工作陷入困境，因为客户会过于关注完美的蓝色阴影。出于这个原因，许多工具会产生看起来像卡通和白板画的模型。因此，应用 Bootstrap 级别润色的优缺点值得考虑。

*--在您的模型中“包含”这些资产的更简单方法之一是通过 CDN。有关示例，请参见[http://netdna.bootstrapcdn.com/ 。](http://netdna.bootstrapcdn.com/)

# android - Android Query - 带重定向的异步图像加载

> ID：13915512
> 
> 赞同：0
> 
> 时间：2012-12-17T13:56:19.260
> 
> 标签：android, image, android-query

使用 Android Query (aQuery) 库下载具有重定向的图像时无法下载图像：

使用网址`https://api.twitter.com/1/users/profile_image?screen_name=scottyab&size=bigger`

在网络浏览器中重定向到

```
https://si0.twimg.com/profile_images/2467461312/5rab7gapdrnd84b6nflx_bigger.jpeg 
```

这是执行异步图像调用的活动代码：

```
aq.id(R.id.twitter_image)
                    .progress(R.id.twitter_image_progress)
                    .image(getTwitterProfileUrl(twitterName),
                            true, true, 0, R.drawable.no_profile_placeholder,
                            new MyBitmapCallback()); 
```

获取内部 AQuery 错误 101 网络错误。这有启用 AQuery 重定向的选项吗？回调中返回的 URL 是原始 URL，而不是重定向 URL。在 Android 2.1 上特别发现这是一个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T05:11:17.973

Android-Query 目前似乎无法处理重定向，而且看起来需要更改代码才能支持它们。

我看了一下 AQuery 源代码，我认为这是执行请求的代码：[https ://code.google.com/p/android-query/source/browse/trunk/src/com/androidquery/回调/AbstractAjaxCallback.java#1483](https://code.google.com/p/android-query/source/browse/trunk/src/com/androidquery/callback/AbstractAjaxCallback.java#1483)

以下是遵循重定向的实现方式： [Httpclient 重定向处理程序](https://stackoverflow.com/questions/4131139/httpclient-redirect-handler)

它必须处理代码 >= 300 和 < 400 来处理重定向。

# objective-c - 在 cocos2d 2.0 中重复绑定到山丘的 OpenGL-es 纹理

> ID：13915531
> 
> 赞同：13
> 
> 时间：2012-12-17T13:57:08.073
> 
> 标签：objective-c, opengl-es, cocos2d-iphone, opengl-es-2.0

# 来源文章

我正在尝试实现[raywenderlich 的关于使用 cocos2d 生成具有重复条纹坐标的山的教程](http://www.raywenderlich.com/3888/how-to-create-a-game-like-tiny-wings-part-1)，这篇文章是为 Cocos2D 1.0 编写的，当我试图将它移植到 Cocos2D 2.0 时，这意味着为 openGl-es 2 更新它。到目前为止，一切都运行良好，但是我在让山的纹理正确重复时遇到问题......

这是我的代码：

向山丘发送纹理：

```
CCSprite *stripes = [self stripedSpriteWithColor1:color3 color2:color4 textureSize:512 stripes:nStripes];
    stripes.position = ccp(winSize.width/2,winSize.height/2);
    ccTexParams tp2 = {GL_LINEAR, GL_LINEAR, GL_REPEAT, GL_CLAMP_TO_EDGE};
    [stripes.texture setTexParameters:&tp2];
    _terrain.stripes = stripes;
    _backgroundTerrain.stripes = stripes; 
```

生成纹理：

```
-(CCSprite *)stripedSpriteWithColor1:(ccColor4F)c1 color2:(ccColor4F)c2 textureSize:(float)textureSize stripes:(int) nStripes {
    // 1: Create new CCRenderTexture
    CCRenderTexture *rt = [CCRenderTexture renderTextureWithWidth:textureSize height:textureSize];

    // 2: Call CCRenderTexture:begin

    [rt beginWithClear:c1.r g:c1.g b:c1.b a:c1.a];

    // 3: Draw into texture
    //OpenGL gradient

    NSLog(@"Strip color is: %f : %f : %f", c2.r,c2.g,c2.b);

    CGPoint vertices[nStripes*6];
    ccColor4F colors[nStripes*6];
    int nVertices = 0;
    float x1 = -textureSize;
    float x2;
    float y1 = textureSize;
    float y2 = 0;
    float dx = textureSize / nStripes * 2;
    float stripeWidth = dx/2;
    ccColor4F stripColor = (ccColor4F){c2.r,c2.g,c2.b,c2.a};
    for (int i=0; i<nStripes; i++) {
        x2 = x1 + textureSize;
        colors[nVertices] = stripColor;
        vertices[nVertices++] = ccpMult(CGPointMake(x1, y1), CC_CONTENT_SCALE_FACTOR());
        colors[nVertices] = stripColor;
        vertices[nVertices++] = ccpMult(CGPointMake(x1+stripeWidth, y1), CC_CONTENT_SCALE_FACTOR());
        colors[nVertices] = stripColor;
        vertices[nVertices++] = ccpMult(CGPointMake(x2, y2), CC_CONTENT_SCALE_FACTOR());
        colors[nVertices] = stripColor;
        vertices[nVertices++] = vertices[nVertices-3];
        colors[nVertices] = stripColor;
        vertices[nVertices++] = vertices[nVertices-3];
        colors[nVertices] = stripColor;
        vertices[nVertices++] = ccpMult(CGPointMake(x2+stripeWidth, y2), CC_CONTENT_SCALE_FACTOR());
        x1 += dx;
    }

    [self.shaderProgram use];

    ccGLEnableVertexAttribs(kCCVertexAttribFlag_Position  | kCCVertexAttribFlag_Color);

    glVertexAttribPointer(kCCVertexAttrib_Position, 2, GL_FLOAT, GL_FALSE, 0, vertices);
    glVertexAttribPointer(kCCVertexAttrib_Color, 4, GL_FLOAT, GL_FALSE, 0, colors);

    glDrawArrays(GL_TRIANGLES, 0, (GLsizei)nVertices);

    //Gradient

    float gradientAlpha = 0.2;
    nVertices = 0;

    vertices[nVertices] = CGPointMake(0, 0);
    colors[nVertices++] = (ccColor4F){0,0,0,0};
    vertices[nVertices] = CGPointMake(textureSize, 0);
    colors[nVertices++] = (ccColor4F){0,0,0,0};
    vertices[nVertices] = CGPointMake(0, textureSize);
    colors[nVertices++] = (ccColor4F){0,0,0,gradientAlpha};
    vertices[nVertices] = CGPointMake(textureSize, textureSize);
    colors[nVertices++] = (ccColor4F){0,0,0,gradientAlpha};

    glVertexAttribPointer(kCCVertexAttrib_Position, 2, GL_FLOAT, GL_FALSE, 0, vertices);
    glVertexAttribPointer(kCCVertexAttrib_Color, 4, GL_FLOAT, GL_FALSE, 0, colors);

    glDrawArrays(GL_TRIANGLE_STRIP,0, (GLsizei)nVertices);

    // Highlighting

    float borderWidth = textureSize/8;
    float borderAlpha = 0.1f;
    nVertices = 0;

    vertices[nVertices] = CGPointMake(0, 0);
    colors [nVertices++] = (ccColor4F){1,1,1,borderAlpha};
    vertices[nVertices] = CGPointMake(textureSize*CC_CONTENT_SCALE_FACTOR(),0);
    colors [nVertices++] = (ccColor4F){1,1,1,borderAlpha};

    vertices[nVertices] = CGPointMake(0, borderWidth*CC_CONTENT_SCALE_FACTOR());
    colors [nVertices++] = (ccColor4F){0,0,0,0};
    vertices[nVertices] = CGPointMake(textureSize*CC_CONTENT_SCALE_FACTOR(),borderWidth*CC_CONTENT_SCALE_FACTOR());
    colors [nVertices++] = (ccColor4F){0,0,0,0};

    glVertexAttribPointer(kCCVertexAttrib_Position, 2, GL_FLOAT, GL_FALSE, 0, vertices);
    glVertexAttribPointer(kCCVertexAttrib_Color, 4, GL_FLOAT, GL_FALSE, 0, colors);
    glBlendFunc(GL_DST_COLOR, GL_ONE_MINUS_SRC_ALPHA);
    glDrawArrays(GL_TRIANGLE_STRIP, 0, (GLsizei)nVertices);

    //Noise 
    CCSprite *noise = [CCSprite spriteWithFile:@"noise.png"];
    [noise setBlendFunc:(ccBlendFunc){GL_DST_COLOR, GL_ZERO}];
    noise.position = ccp(textureSize/2, textureSize/2);
    [noise visit];

    [rt end];
    // Return texture sprite
    return [CCSprite spriteWithTexture:rt.sprite.texture];

} 
```

获取 TexCoords 以将条纹限制在山上：

```
- (void)resetHillVertices {

    CGSize winSize = [CCDirector sharedDirector].winSize;

    static int prevFromKeyPointI = -1;
    static int prevToKeyPointI = -1;

    // key points interval for drawing
    while (_hillKeyPoints[_fromKeyPointI+1].x < _offsetX-winSize.width/self.scale) {
        _fromKeyPointI++;
    }
    while (_hillKeyPoints[_toKeyPointI].x < _offsetX+winSize.width*3/2/self.scale) {
        _toKeyPointI++;
    }

    if (prevFromKeyPointI != _fromKeyPointI || prevToKeyPointI != _toKeyPointI) {
        _nHillVertices = 0;
        _nBorderVertices = 0;
        CGPoint p0, p1, pt0, pt1;
        p0 = _hillKeyPoints[_fromKeyPointI];
        for (int i=_fromKeyPointI+1; i<_toKeyPointI+1; i++) {
            p1 = _hillKeyPoints[i];

            // triangle strip between p0 and p1
            int hSegments = floorf((p1.x-p0.x)/kHillSegmentWidth);
            float dx = (p1.x - p0.x) / hSegments;
            float da = M_PI / hSegments;
            float ymid = (p0.y + p1.y) / 2;
            float ampl = (p0.y - p1.y) / 2;
            pt0 = p0;
            _borderVertices[_nBorderVertices++] = pt0;
            for (int j=1; j<hSegments+1; j++) {
                pt1.x = p0.x + j*dx;
                pt1.y = ymid + ampl * cosf(da*j);
                _borderVertices[_nBorderVertices++] = pt1;

                _hillVertices[_nHillVertices] = CGPointMake(pt0.x, 0);
                _hillTexCoords[_nHillVertices++] = CGPointMake(pt0.x/512, 1.0f);
                _hillVertices[_nHillVertices] = CGPointMake(pt1.x, 0);
                _hillTexCoords[_nHillVertices++] = CGPointMake(pt1.x/512, 1.0f);

                _hillVertices[_nHillVertices] = CGPointMake(pt0.x, pt0.y);
                _hillTexCoords[_nHillVertices++] = CGPointMake(pt0.x/512, 0);
                _hillVertices[_nHillVertices] = CGPointMake(pt1.x, pt1.y);
                _hillTexCoords[_nHillVertices++] = CGPointMake(pt1.x/512, 0);

                pt0 = pt1;
            }

            p0 = p1;
        }

        prevFromKeyPointI = _fromKeyPointI;
        prevToKeyPointI = _toKeyPointI;
        [self resetBox2DBody];
    }

} 
```

绘制纹理：

```
- (void) draw {

    self.shaderProgram = [[CCShaderCache sharedShaderCache] programForKey:kCCShader_PositionTexture];
    CC_NODE_DRAW_SETUP();
    ccGLBlendFunc( CC_BLEND_SRC, CC_BLEND_DST ); //TB 25-08-12: Allows change of blend function

    ccGLEnableVertexAttribs(kCCVertexAttribFlag_Position  | kCCVertexAttribFlag_TexCoords);

    ccGLBindTexture2D(_stripes.texture.name);
    // Assign the vertices array to the 'position' attribute
    glVertexAttribPointer(kCCVertexAttrib_Position, 2, GL_FLOAT, GL_FALSE, 0, _hillVertices);

    // Assign the texCoords array to the 'TexCoords' attribute
    glVertexAttribPointer(kCCVertexAttrib_TexCoords, 2, GL_FLOAT, GL_FALSE, 0, _hillTexCoords);

    glDrawArrays(GL_TRIANGLE_STRIP, 0, (GLsizei)_nHillVertices);
} 
```

我遇到的问题是：经过一定次数的重复后，纹理的质量开始下降，如下所示：

![降解](../Images/8d155833084bff51a0551537b47d6ff3.png)

有没有办法让纹理重复而不退化？

# 编辑1：

我已经对纹理如何退化进行了更多分析，结果证明它不会连续退化，而是以 2 次重复的功率退化，所以它在第一次重复时第一次退化，然后在 2 次重复后退化，然后是 4， 8, 16, 32 等等......似乎每次图像质量下降时，在图像中可以看到的开始出现的垂直条带宽度会加倍。同样在每次降级时，游戏的帧速率都会大大降低，所以我开始认为这可能是内存问题。

# 编辑2：

到目前为止，我对为什么会发生这种情况的最佳猜测是因为地形的 -draw 方法不断生成 GL_TRAINGLE_STRIP，并且一旦它们离开屏幕就不会删除它们，从而导致地形的内存使用量增加，从而导致退化和帧率下降。

![退化倍增](../Images/cd1c2d4bba371b5928aa36399dad2ed0.png)

# 更新 1

我已经解决了纹理生成中出现的两个问题......

## 解决错位

在精灵生成方法中：

```
float x1 = -textureSize;
float x2;
float y1 = textureSize;
float y2 = 0;
float dx = textureSize / nStripes * 2; 
```

对此：

```
float x1 = -winSize.width;
float x2;
float y1 = winSize.height;
float y2 = 0;
float dx = winSize.width / nStripes * 2; 
```

我意识到这与主要错误完全无关，而是由于我的条纹由于某种原因没有以 45 度角出现，这导致它们在重复时错位。我试图思考造成这种情况的原因，最后通过假设纹理坐标原点位于屏幕的左上角而不是纹理的左上角来修复它。

## 解决退化（种类）

我有一种预感，由于纹理的大量重复，图像质量下降，原因与[此](https://stackoverflow.com/questions/11370074/opengl-es-2-0-texture-distortion-on-large-geometry-gl-repeat/11371462#comment19333122_11371462)类似，尽管我可能在这方面错了！

为了在 resetHillVertices 中解决这个问题，我将其设置为 texCoords 始终介于 0 和 1 之间，这意味着绑定到山丘的纹理始终是纹理的第一次重复。我是这样实现的：

```
for (int j=1; j<hSegments+1; j++) {
            pt1.x = p0.x + j*dx;
            pt1.y = ymid + ampl * cosf(da*j);
            _borderVertices[_nBorderVertices++] = pt1;
            float xTex0 = pt0.x/512;
            float xTex1 = pt1.x/512;
            while (xTex0 > 1) { // makes sure texture coordinates are always within the first repetition of texture
                xTex0 -= 1;
            }
            while (xTex1 > 1) {
                xTex1 -= 1;
            }
            _hillVertices[_nHillVertices] = CGPointMake(pt0.x, 0);
            _hillTexCoords[_nHillVertices++] = CGPointMake(xTex0, 1.0);
            _hillVertices[_nHillVertices] = CGPointMake(pt1.x, 0);
            _hillTexCoords[_nHillVertices++] = CGPointMake(xTex1, 1.0);

            _hillVertices[_nHillVertices] = CGPointMake(pt0.x, pt0.y);
            _hillTexCoords[_nHillVertices++] = CGPointMake(xTex0, 0.0);
            _hillVertices[_nHillVertices] = CGPointMake(pt1.x, pt1.y);
            _hillTexCoords[_nHillVertices++] = CGPointMake(xTex1, 0.0);

            pt0 = pt1;
        } 
```

这几乎解决了所有问题，我仍然存在的唯一两个问题是：

*   纹理连接之间的一些像素列被奇怪地渲染
*   绘制 texPos 和 Pos 三角形仍然存在内存问题

这些可以在这张照片中看到：正如您所见，帧速率急剧下降，并且在整个游戏过程中继续下降。

![仍然有内存问题](../Images/cf8d395593e1212119580710eed582d0.png)

# 更新 2

我减小了每个三角形条带的宽度，以尝试找出纹理重复处发生的情况，并发现由于某种原因，条带被整个背景纹理填充但反转了。经过少量思考后，我意识到这是因为这里的地板：`int hSegments = floorf((p1.x-p0.x)/kHillSegmentWidth);`我们得到每次重复的最后一条带刚刚超过纹理的宽度，但是当我们删除 1 而 xTex1 大于 1 时，这设置了这个 texCoords到 0.02（或其他一些小数字），实际上应该是 1.02（这很难理解，但它是正确的）。我认为这可以通过使用另一个 if 语句来解决，如下所示：

```
float xTex0 = pt0.x/512;
            float xTex1 = pt1.x/512;
            while (xTex0 > 1.0) {
                xTex0 -= 1.0;
            }
            while (xTex1 > 1.0) {
                xTex1 -= 1.0;
            }

            if (xTex1 < xTex0) {
                xTex1++;
            }

            _hillVertices[_nHillVertices] = CGPointMake(pt0.x, 0);
            _hillTexCoords[_nHillVertices++] = CGPointMake(xTex0, 1.0);
            _hillVertices[_nHillVertices] = CGPointMake(pt1.x, 0);
            _hillTexCoords[_nHillVertices++] = CGPointMake(xTex1, 1.0);

            _hillVertices[_nHillVertices] = CGPointMake(pt0.x, pt0.y);
            _hillTexCoords[_nHillVertices++] = CGPointMake(xTex0, 0.0);
            _hillVertices[_nHillVertices] = CGPointMake(pt1.x, pt1.y);
            _hillTexCoords[_nHillVertices++] = CGPointMake(xTex1, 0.0); 
```

这适用于该条带中的第一个三角形，但由于某些特殊原因，第二个三角形不起作用，我根本无法理解！它看起来像这样：![在此处输入图像描述](../Images/a0ae8b68f9da06795c7d8345859e4c6c.png)

然而 _hillTexCoords 中的设置似乎是正确的，当我在应用程序中设置断点时，这是我为 _hillTexCoords 数组得到的结果，看起来它应该正确固定纹理，但它仍然不是（令人难以置信的令人沮丧！ )

```
[44]    CGPoint (x=0.804036,y=1)
[45]    CGPoint (x=0.873047,y=1)
[46]    CGPoint (x=0.804036,y=0)
[47]    CGPoint (x=0.873047,y=0)
[48]    CGPoint (x=0.873047,y=1)
[49]    CGPoint (x=0.939453,y=1)
[50]    CGPoint (x=0.873047,y=0)
[51]    CGPoint (x=0.939453,y=0)
[52]    CGPoint (x=0.939453,y=1)
[53]    CGPoint (x=1.00586,y=1)
[54]    CGPoint (x=0.939453,y=0)
[55]    CGPoint (x=1.00586,y=0)
[56]    CGPoint (x=0.00585938,y=1)
[57]    CGPoint (x=0.0722656,y=1)
[58]    CGPoint (x=0.00585938,y=0)
[59]    CGPoint (x=0.0722656,y=0)
[60]    CGPoint (x=0.0722656,y=1)
[61]    CGPoint (x=0.13737,y=1)
[62]    CGPoint (x=0.0722656,y=0)
[63]    CGPoint (x=0.13737,y=0) 
```

很容易看出，从一个纹理到纹理开头的重叠遵循与其他纹理相同的模式，但仍然无法正确渲染！

# 更新 3

事实证明，我的内存问题与使用 Opengl-es 2.0 绘图完全无关，它实际上与我的游戏的 box2D 元素没有在内存中解除分配有关，所以我为此创建了一个[单独的问题](https://stackoverflow.com/questions/14023737/box2d-memory-not-freed-when-destroy-body)。 . 但是，我仍在寻找解决纹理退化问题的方法！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T22:38:16.957

您为地形的可见部分生成的三角形带将具有从左到右增加的纹理坐标。当这些变得非常大时，您将遇到精度问题。

对于您的 UV 坐标，您需要从三角形带中的所有坐标中减去*相同*的值。通常，取最低坐标的整数部分（在您的情况下可能是最左边或第一个坐标），然后从您生成的所有 UV 中减去它。或者使用它作为基线来生成其他的，无论你喜欢哪一个。

因此，如果屏幕左侧的 U 值为 100.7，右侧的 U 值为 129.5，那么您实际上想要输出 0.7 到 29.5 之间的值。（如果您仍然有精度问题，您可能会通过将范围集中在零上，使用负坐标来发出更多声音）。

另一种方法是，如果您需要在单个条带内的纹理坐标不连续并获得最大精度，则在更改 tex 时引入退化三角形，它们是零面积，因此不会被渲染-坐标。在继续之前，您可以通过重复顶点但使用调整后的 tex 坐标来做到这一点。

根据您上面的代码，我建议如下：

```
// This line should happen only once per-strip. 
float U_Off = floor(pt0.x / 512);

// The inner loop then looks like this:
for (int j=1; j<hSegments+1; j++) {
    pt1.x = p0.x + j*dx;
    pt1.y = ymid + ampl * cosf(da*j);
    _borderVertices[_nBorderVertices++] = pt1;
    float xTex0 = pt0.x/512 - U_Off;
    float xTex1 = pt1.x/512 - U_Off;

    _hillVertices[_nHillVertices] = CGPointMake(pt0.x, 0);
    _hillTexCoords[_nHillVertices++] = CGPointMake(xTex0, 1.0);
    _hillVertices[_nHillVertices] = CGPointMake(pt1.x, 0);
    _hillTexCoords[_nHillVertices++] = CGPointMake(xTex1, 1.0);

    _hillVertices[_nHillVertices] = CGPointMake(pt0.x, pt0.y);
    _hillTexCoords[_nHillVertices++] = CGPointMake(xTex0, 0.0);
    _hillVertices[_nHillVertices] = CGPointMake(pt1.x, pt1.y);
    _hillTexCoords[_nHillVertices++] = CGPointMake(xTex1, 0.0);

    pt0 = pt1;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-27T00:12:50.943

这只是我的猜测......不是解决方案，而是可能的解释。

我试图追踪你是如何生成你的网格的。起初我以为你在做某种故意的退化（因为你正在使用三角形条，并且每 2 个三角形使用 4 个顶点）。但是您正在创建这样的网格，对吗？

```
3 ___ 4-7___ 8
| \    | \   |
|  \   |  \  |
1 ___ 2-5 __ 6 
```

这将创建三角形 123、[234]、345、[456]、567、[678]... 等等（注意 [] 表示反转）。所以，你看到你重叠了一半的三角形。我想最后一个三角形被看到，另一个被隐藏了......如果 z 正好是 0，你就没有任何伪影。当 4 = 7 和 2 = 5 时，即当您不修改纹理坐标时，一切正常，因为，一种或另一种方式减少到以下情况（如果您将其移置，这将是正确的做法-acbdef）。翻译成坐标——同一个坐标，同一个点是这样的：

```
c ___ d ___ f
| \   | \   |
|  \  |  \  |
a ___ b ___ e 
```

在您发布的日志中，您一次写 4 个点，对吗？因此，在“for”的第 13 个循环中，您会生成以下顶点：(14*3 = 52)：

```
 [52]    CGPoint (x=0.939453,y=1) //1
    [53]    CGPoint (x=1.00586,y=1)  //2
    [54]    CGPoint (x=0.939453,y=0) //3
    [55]    CGPoint (x=1.00586,y=0)  //4

    [56]    CGPoint (x=0.00585938,y=1) //5 
```

这样就形成了 5 个三角形。这里特别感兴趣的是 2：[234] 和 345。234 没问题，但 345 必须隐藏它（因为它在另一个之后渲染？？尝试使用像 GL_GREATER 这样的深度测试函数只是为了避免它渲染和查看如果我在这个上是对的）。嗯，345 是不对的，它将纹理从 x= 0.07 映射到 1.00。所以，即使你更正了 234，345 仍然会画在你正确的三角形上。那应该可以解释您的背景反转的事情。

所以，这就是我认为的问题（如果你没有像教程中那样标准化你的纹理坐标就不会发生）。

我还需要写解决方案吗？：/

首先，我建议您生成您的网格，就像我在第二位（a，b，c ...）绘制的那样。然后继续解决。一个**肮脏**的解决方案是退化邪恶的三角形 345。那就是重复第 4 点（我现在有点头晕，可能是错的）-无论如何这不是一个好的解决方案，你正在混合方向和重叠三角形。每个 for 迭代你应该只添加

```
 _hillVertices[_nHillVertices] = CGPointMake(pt0.x, 0);
        _hillTexCoords[_nHillVertices++] = CGPointMake(xTex0, 1.0);

        _hillVertices[_nHillVertices] = CGPointMake(pt0.x, pt0.y);
        _hillTexCoords[_nHillVertices++] = CGPointMake(xTex0, 0.0); 
```

让我想一个干净的解决方案，或者让别人为我写 - 假设这实际上是问题所在。

# sql - MS Access 的 INNER JOIN 问题

> ID：13915533
> 
> 赞同：2
> 
> 时间：2012-12-17T13:57:12.520
> 
> 标签：sql, ms-access, inner-join

有谁知道下面的查询中有什么不正确的？

```
SELECT S1.[Company], COUNT(S1.[Milestone]) AS ShouldBeMilestones

FROM Sheet1 AS S1

INNER JOIN Sheet1 S2
ON S2.[Company] = S1.[Company]
AND S2.[Project] = S1.[Project]
AND S2.[Milestone] = 'Milestone 1'
AND S2.[%compl#] = 100

INNER JOIN Sheet1 S3
ON S3.[Company] = S1.[Company]
AND S3.[Project] = S1.[Project]
AND S3.[Milestone] = 'Milestone 2'
AND S3.[%compl#] = 100

WHERE ((S1.[Task class] <> 'A') AND (S1.[Task class] <> 'B') AND (S1.[Task class] <> ''))
AND S1.[Milestone] NOT LIKE '0.*' AND S1.[Milestone] NOT LIKE '1.*'
AND S1.[Start] <= Now()

GROUP BY S1.[Company]; 
```

在 MS Access 2010 中运行时，我收到“FROM 子句中的语法错误”消息...

任何想法将不胜感激！

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T14:02:45.950

`JOIN`MS Access SQL 很奇怪，因为在多 JOIN 查询中，您必须在 s 周围加上括号。我讨厌这个功能，还没有自己解决它背后的“逻辑”。您可能很幸运在 Access 查询生成器中重新构建了一个简单版本，然后在不弄乱括号的情况下对其进行编辑。

# batch-file - 是/否批处理文件

> ID：13915536
> 
> 赞同：5
> 
> 时间：2012-12-17T13:57:21.460
> 
> 标签：batch-file

在我的批处理文件中，我想问用户一个问题。

我写了以下内容：

```
SET /P ANSWER=Click Y to continue or N to stop (Y/N) 
```

但我得到的消息没有最后一个`)`。

有人知道为什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-17T14:01:32.143

因为您在带括号的块中使用该提示，例如

```
if ... (
  ...
  set /P ANSWER=Blah (Y/N)
) 
```

或者

```
for %%x in (...) do (
  ...
  set /P ANSWER=Blah (Y/N)
) 
```

在这种情况下，您必须转义右括号：

```
SET /P ANSWER=Click Y to continue or N to stop (Y/N^) 
```

或引用整个论点：

```
SET /P "ANSWER=Click Y to continue or N to stop (Y/N)" 
```

否则它会关闭块。如果你在右括号之后有任何东西，你会得到一个语法错误。

你在那里做的一个更简单的方法可能是`choice`命令：

```
choice /M "Press Y to continue or N to stop" /c YN 
```

然后您可以在之后检查错误级别以找出用户的选择：

```
if errorlevel 255 (
  echo Error
) else if errorlevel 2 (
  echo No.
) else if errorlevel 1 (
  echo Yes.
) else if errorlevel 0 (
  echo Ctrl+C pressed.
) 
```

# ios - 支持 IOS4 & IOS 5 和 IOS6 的 Twitter 集成

> ID：13915539
> 
> 赞同：1
> 
> 时间：2012-12-17T13:57:30.883
> 
> 标签：ios, twitter

我正在尝试将 twitter 集成到我的通用应用程序中，该应用程序应该在具有 IOS4+ 的设备上运行。谷歌搜索后，我知道对于 IOS<4.0 的设备，我们可以使用 Sharekit，对于 IOS>5 的设备，我们必须使用 twitter 框架。并且应该弱添加该 twitter 框架（BuildPhases-> 在 twitter 框架旁边使其成为可选）。

我应该在我的应用程序中同时使用它们吗？如果是这样，是否有任何示例可以在 Sharekit 或 twitter 框架的帮助下在设备 IOS 4+ 设备上运行。检查设备的版本并继续相关进程（sharekit 或 twitter 框架）是否可行？如果可能的话，您可以帮助提供片段或示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T14:10:02.713

[DETweetComposeViewController](https://github.com/doubleencore/DETweetComposeViewController)将在 iOS 4 上为您提供一个类似于 iOS 5/6 中原生的推文编辑器。在 iOS 5+ 中，它将改用原生 twitter 库。设置和使用非常简单。

# jquery - jQuery 理想形式集成

> ID：13915540
> 
> 赞同：0
> 
> 时间：2012-12-17T13:57:37.917
> 
> 标签：jquery, forms, contact

我正在尝试重新创建理想表单的演示（[http://elclanrs.github.com/jq-idealforms/](http://elclanrs.github.com/jq-idealforms/)），这样我就可以全面了解每个部分的工作原理，这样我就可以创建一些漂亮的表单。

但是我在集成方面遇到了一些问题

1）如果使用类ie9......在html中不起作用。它使整个页面从 CSS 中解放出来。

2）尽管css中的图像位置正确，但我无法显示复选框或单选按钮。

3）验证错误没有出现，但我不明白如何做这些是jquery noob的指令很复杂。

如上所述，我是 jquery 的菜鸟，无论多小，我都将不胜感激，以帮助我使表单正常工作。我需要使用这个插件创建 3 个表单，这就是我想要彻底了解每个组件的原因，因为我将至少使用每个方面一次。

我的网页链接在这里[https://dl.dropbox.com/u/104598901/Website/contact.html](https://dl.dropbox.com/u/104598901/Website/contact.html)

谢谢你的帮助，我很感激你能贡献的任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T10:22:11.553

感谢这个明显的地方，我没有意识到我在页面上加载了那么多 j-query 脚本。

我没有删除这些并更新了脚本的顺序。

你有任何关于这是如何集成的视频，因为我无法让它在 ie9 中工作或让我的复选框或收音机加载。

文件的位置在 css 中是 100% 正确的，所以不确定？

# python - 使用正则表达式循环的更有效方法是什么？

> ID：13915542
> 
> 赞同：0
> 
> 时间：2012-12-17T13:57:41.397
> 
> 标签：python, regex, list

我有一个名称列表，用于从目标字符串列表中提取出来。例如：

```
names = ['Chris', 'Jack', 'Kim']
target = ['Chris Smith', 'I hijacked this thread', 'Kim','Christmas is here', 'CHRIS']

output = ['Chris Smith', 'Kim', 'CHRIS'] 
```

所以到目前为止的规则是：

*   不区分大小写
*   无法匹配部分单词（'ie Christmas/hijacked 不应该匹配 Chris/Jack）
*   只要根据上述条件在字符串中找到名称，字符串中的其他单词就可以了。

为此，另一位 SO 用户在[此线程](https://stackoverflow.com/questions/13904294/searching-a-list-based-on-values-in-another-list#comment19161454_13904294)中建议了此代码：

```
[targ for targ in target_list if any(re.search(r'\b{}\b'.format(name), targ, re.I) for name in first_names)] 
```

到目前为止，这非常准确，但是考虑到名称列表的长度约为 5,000 并且目标列表的长度范围为 20-100 行，其中一些字符串最长为 30 个字符，因此运行速度非常慢。

关于如何在这里提高性能的任何建议？

**解决方案**：两种基于正则表达式的解决方案都遭受了溢出错误，所以很遗憾我无法测试它们。有效的解决方案（来自@mglison 的回答）是：

```
new_names = set(name.lower() for name in names)
[ t for t in target if any(map(new_names.__contains__,t.lower().split())) ] 
```

这将性能从 15 秒**大幅**提高到不到 1 秒。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T14:04:25.217

似乎您可以将它们全部组合成 1 个超级正则表达式：

```
import re

names = ['Chris', 'Jack', 'Kim']
target = ['Chris Smith', 'I hijacked this thread', 'Kim','Christmas is here', 'CHRIS']

regex_string = '|'.join(r"(?:\b"+re.escape(x)+r"\b)" for x in names)
print regex_string
regex = re.compile(regex_string,re.I)
print [t for t in target if regex.search(t)] 
```

* * *

一个非正则表达式解决方案，仅当名称是一个单词（无空格）时才有效：

```
new_names = set(name.lower() for name in names)
[ t for t in target if any(map(new_names.__contains__,t.lower().split())) ] 
```

表达式也可以`any`写成：

```
any(x in new_names for x in t.lower().split()) 
```

或者

```
any(x.lower() in new_names for x in t.split()) 
```

或者，另一个依赖的变体`set.intersection`（由下面的@DSM建议）：

```
[ t for t in target if new_names.intersection(t.lower().split()) ] 
```

如果性能真的很关键，您可以分析以查看哪个性能最好，否则**选择您认为最容易阅读/理解的一个**。

*如果您使用的是python2.x，您可能想要使用`itertools.imap`而不是`map`如果您走上面的那条路线来让它懒惰地评估——这也让我想知道python是否提供了一个懒惰`str.split`的性能与非懒惰版本相提并论......

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-17T14:06:08.573

这是我能想到的最简单的一个：

```
[item for item in target if re.search(r'\b(%s)\b' % '|'.join(names), item)] 
```

全部一起：

```
import re

names = ['Chris', 'Jack', 'Kim']
target = ['Chris Smith', 'I hijacked this thread', 'Kim','Christmas is here', 'CHRIS']

results = [item for item in target if re.search(r'\b(%s)\b' % '|'.join(names), item)]

print results
>>> 
['Chris Smith', 'Kim'] 
```

为了提高效率，您可以先编译正则表达式。

```
regex = re.compile( r'\b(%s)\b' % '|'.join(names) )
[item for item in target if regex.search(item)] 
```

**编辑**

在考虑了这个问题并查看了一些评论之后，我将“解决方案”修改为以下内容：

```
import re
names = ['Chris', 'Jack', 'Kim']
target = ['Chris Smith', 'I hijacked this thread', 'Kim','Christmas is here', 'CHRIS']
regex = re.compile( r'\b((%s))\b' % ')|('.join([re.escape(name) for name in names]), re.I )
results = [item for item in target if regex.search(item)] 
```

结果：

```
>>> 
['Chris Smith', 'Kim', 'CHRIS'] 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-17T14:06:33.247

您当前正在另一个循环中执行一个循环，遍历两个列表。这总是会给你二次性能。

一种本地优化是编译每个名称正则表达式（这将使应用每个正则表达式更快）。但是，最大的胜利是将所有正则表达式组合成一个正则表达式，然后将其应用于输入中的每个项目。请参阅@mgilson 的答案以了解如何做到这一点。在那之后，你的代码性能应该线性扩展为 O(M+N)，而不是 O(M*N)。

# r - 基于R中时间和日期的时间序列平均值

> ID：13915549
> 
> 赞同：2
> 
> 时间：2012-12-17T13:58:09.713
> 
> 标签：r, time-series, average, xts

我有一个时间序列，我想每 1 小时自动执行一次平均。我的数据包括温度和日期时间（时间戳）
我不想要移动平均线，我想要 1、2、3、4 点的平均值，因为数据的频率通常是一天 2 分钟。

```
 temperature    date_time
1     -1.52 2007-09-29 00:00:08
2     -1.48 2007-09-29 00:02:08
3     -1.46 2007-09-29 00:04:08
4     -1.56 2007-09-29 00:06:08
5     -1.64 2007-09-29 00:08:08
6     -1.75 2007-09-29 00:10:08
7     -1.74 2007-09-29 00:12:08
8     -2.02 2007-09-29 00:14:08
9     -2.02 2007-09-29 00:16:08
10    -1.90 2007-09-29 00:18:08
11    -1.66 2007-09-29 00:20:08
12    -1.80 2007-09-29 00:22:08
13    -1.68 2007-09-29 00:24:08
14    -1.81 2007-09-29 00:26:08
15    -1.77 2007-09-29 00:28:08
16    -1.83 2007-09-29 00:30:08
17    -1.84 2007-09-29 00:32:08
18    -1.93 2007-09-29 00:34:08
19    -1.62 2007-09-29 00:36:08
20    -1.87 2007-09-29 00:38:08
21    -1.54 2007-09-29 00:40:08
22    -1.93 2007-09-29 00:42:08
23    -1.88 2007-09-29 00:44:08
24    -1.82 2007-09-29 00:46:08
25    -1.78 2007-09-29 00:48:08
26    -1.67 2007-09-29 00:50:08
27    -1.67 2007-09-29 00:52:08
28    -1.56 2007-09-29 00:54:08
29    -1.84 2007-09-29 00:56:08
30    -1.74 2007-09-29 00:58:08
31    -1.79 2007-09-29 01:00:08
32    -1.82 2007-09-29 01:02:08
33    -1.78 2007-09-29 01:04:08
34    -1.88 2007-09-29 01:06:08
35    -1.84 2007-09-29 01:08:08
36    -1.78 2007-09-29 01:10:08
37    -1.94 2007-09-29 01:12:08
38    -1.80 2007-09-29 01:14:08
39    -1.74 2007-09-29 01:16:08
40    -1.76 2007-09-29 01:18:08
41    -1.80 2007-09-29 01:20:08
42    -1.60 2007-09-29 01:22:08
43    -1.59 2007-09-29 01:24:08
44    -1.52 2007-09-29 01:26:08
45    -1.41 2007-09-29 01:28:08
46    -1.42 2007-09-29 01:30:08
47    -1.44 2007-09-29 01:32:08
48    -1.38 2007-09-29 01:34:08
49    -1.34 2007-09-29 01:36:08
50    -1.40 2007-09-29 01:38:08
51    -1.40 2007-09-29 01:40:08
52    -1.48 2007-09-29 01:42:08
53    -1.36 2007-09-29 01:44:08
54    -1.42 2007-09-29 01:46:08
55    -1.46 2007-09-29 01:48:08
56    -1.46 2007-09-29 01:50:08
57    -1.47 2007-09-29 01:52:08
58    -1.50 2007-09-29 01:54:08
59    -1.51 2007-09-29 01:56:08
60    -1.49 2007-09-29 01:58:08
61    -1.54 2007-09-29 02:00:08
62    -1.50 2007-09-29 02:02:08
63    -1.55 2007-09-29 02:04:08
64    -1.52 2007-09-29 02:06:08
65    -1.66 2007-09-29 02:08:08
66    -1.88 2007-09-29 02:10:08
67    -1.72 2007-09-29 02:12:08
68    -1.68 2007-09-29 02:14:08
69    -1.68 2007-09-29 02:16:08
70    -1.60 2007-09-29 02:18:08
71    -1.71 2007-09-29 02:20:08
72    -1.71 2007-09-29 02:22:08
73    -1.80 2007-09-29 02:24:08
74    -1.76 2007-09-29 02:26:08
75    -1.84 2007-09-29 02:28:08
76    -1.96 2007-09-29 02:30:08
77    -2.06 2007-09-29 02:32:08
78    -2.16 2007-09-29 02:34:08
79    -2.04 2007-09-29 02:36:08
80    -1.93 2007-09-29 02:38:08
81    -1.98 2007-09-29 02:40:08
82    -1.86 2007-09-29 02:42:08
83    -2.08 2007-09-29 02:44:08
84    -1.78 2007-09-29 02:46:08
85    -1.50 2007-09-29 02:48:08
86    -1.60 2007-09-29 02:50:08
87    -1.53 2007-09-29 02:52:08
88    -1.76 2007-09-29 02:54:08
89    -1.64 2007-09-29 02:56:08
90    -1.52 2007-09-29 02:58:08
91    -1.82 2007-09-29 03:00:08 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-17T14:22:34.730

假设您的数据集被调用`temp`并且您的“date_time”变量是正确的日期格式（使用完成，例如`as.POSIXlt(temp$date_time)`，那么您可以简单地使用`aggregate`和`cut`获取每小时摘要：

```
aggregate(list(temperature = temp$temperature), 
          list(hourofday = cut(temp$date_time, "1 hour")), 
          mean)
#             hourofday temperature
# 1 2007-09-29 00:00:00   -1.744333
# 2 2007-09-29 01:00:00   -1.586000
# 3 2007-09-29 02:00:00   -1.751667
# 4 2007-09-29 03:00:00   -1.820000 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-17T14:23:25.713

由于您操作时间序列，您可以使用包 xts（或 zoo，或 ts）

在这里，我假设您的数据是：

```
 head(dat)
     V2         V3       V4
2 -1.52 2007-09-29 00:00:08
3 -1.48 2007-09-29 00:02:08
4 -1.46 2007-09-29 00:04:08
5 -1.56 2007-09-29 00:06:08
6 -1.64 2007-09-29 00:08:08
7 -1.75 2007-09-29 00:10:08 
```

首先我构造 xts 变量

```
 library(xts)
  dat.xts <- xts(x = dat$V2,as.POSIXct(paste(dat$V3,dat$V4)))

 head(dat.xts)
                     [,1]
2007-09-29 00:00:08 -1.52
2007-09-29 00:02:08 -1.48
2007-09-29 00:04:08 -1.46
2007-09-29 00:06:08 -1.56
2007-09-29 00:08:08 -1.64
2007-09-29 00:10:08 -1.75 
```

然后我使用`period.apply`, 与 apply 系列的其余部分类似，在给定一组移动数据值的情况下计算指定的函数值

```
ep <- endpoints(dat.xts,'hours')
period.apply(dat.xts,ep,mean)
                         [,1]
2007-09-29 00:58:08 -1.744333
2007-09-29 01:58:08 -1.586000
2007-09-29 02:58:08 -1.751667
2007-09-29 03:00:08 -1.820000 
```

例如，要计算每周平均值，您只需更改您的 ep （端点）

```
ep <- endpoints(dat.xts,'weeks')
period.apply(dat.xts,ep,mean)

                    [,1]
2007-09-29 03:00:08 -1.695385

plot(dat.xts) 
```

![在此处输入图像描述](../Images/3354a93d806908ef4c30c64f747ce186.png)

# regex - 查找不包含特定单词的所有（多行）“SELECT ...”查询

> ID：13915555
> 
> 赞同：0
> 
> 时间：2012-12-17T13:58:40.990
> 
> 标签：regex, notepad++

在我的 java 文件中，有许多 sql 查询分配给 java 字符串，例如：

```
/* ... */
String str1 = "SELECT item1, item2 from table1 where this=that and MYWORD=that2 and this3=that3";
/* ... */
String str2 = "SELECT item1, item2 from table1 where this=that and" + 
                " MYWORD=that2 and this3=that3 and this4=that4";
/* ... */
/* ... */
String str3 = "SELECT item1, item2 from table2 where this=that and this2=that2 and" +
                " this3=that3 and this4=that4";
/* ... */
String str4 = "SELECT item1, item2 from table3 where this=that and MYWORD=that2" +
                " and this3=that3 and this4=that4";
/* ... */
String str5 = "SELECT item1, item2 from table4 where this=that and this2=that2 and this3=that3";
/* ... */ 
```

现在我想**找出其中不包含单词 'MYWORD' 的 'SELECT...' 查询**。

从我之前的一个 S/O 问题中，我得到了[如何查找所有“ `SELECT...`”查询](https://stackoverflow.com/questions/13620958/regex-in-notepad-find-all-insert-into-queries)的答案，但我需要扩展该解决方案以找到不包含特定单词的那些。

我尝试了**`SELECT(?!.*MYWORD).*;`**找不到多行查询的正则表达式（如上面的**str3**），只找到单行查询。

我还尝试了**`SELECT[\s\S]*?(?!MYWORD).*(?<=;)$`**查找所有查询的正则表达式，但无法确定查询中是否存在“MYWORD”一词。

我知道我非常接近解决方案，但仍然无法弄清楚。任何人都可以帮助我吗？（我在 Windows 上使用记事本++）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T14:42:07.877

第一个正则表达式的问题是它`.`不匹配换行符。在普通的正则表达式中，有一个选项可以改变它，但我不知道该功能是否存在于记事本++中。

第二个正则表达式的问题是匹配“选择，然后是一些东西，然后是任何与 MYWORD 不匹配的东西，然后是更多的东西，然后是分号”即使 MYWORD 存在，正则表达式引擎也会很高兴地匹配`(?!MYWORD)`到其他部分不是 MYWORD 的字符串。

像这样的东西应该可以工作（警告：未在 Notepad++ 上测试）：

```
SELECT(?![^;]*MYWORD)[^;]*; 
```

而不是`.`，匹配任何不是分号的东西。这应该允许您匹配换行符。

除此之外，您不允许分号成为匹配的一部分也很重要。`SELECT`否则，该模式可能会扩展以在尝试匹配时吞噬多个语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T14:42:09.833

试试这个（在当前版本的 Notepad++ 上使用 Perl 兼容的正则表达式；旧版本不支持多行正则表达式）：

```
SELECT (?:(?!MYWORD)[^"]|"\s*\+\s*")*"\s*; 
```

**解释：**

```
SELECT       # Match SELECT
(?:          # Match either...
 (?!MYWORD)  #  (as long as it's not the word MYWORD)
 [^"]        #  any character except a quote
|            # or
 "\s*        #  an ending quote, optional whitespace,
 \+\s*       #  a plus sign, optional whitespace (including newlines),
 "           #  and another opening quote.
)*           # Repeat as needed.
"\s*;        # Match a closing quote, optional whitespace, and a semicolon. 
```

# android - 打开 EDIT 对话框并旋转设备时应用程序崩溃

> ID：13915557
> 
> 赞同：0
> 
> 时间：2012-12-17T13:58:41.697
> 
> 标签：android, crash, rotation, android-activity, screen-rotation

我有个问题。当我单击“添加练习”并打开添加对话框以放置一些信息时，即使我旋转设备，一切正常。但是当我使用“编辑对话框”旋转设备时，应用程序崩溃了，请帮帮我。需要一些东西来防止它。（我不是程序员，所以对我来说并不容易）

```
public class ShowExercisesListActivity extends ListActivity {

private static final String TAG = "Exercises";

private List<Exercise> mExercises;
private LayoutInflater mInflater;
private ArrayAdapter<Exercise> mArrayAdapter;
private View mAddExerciseDialogLayout;
private Context mContext;
private EditText exerciseName;

private static final int DIALOG_ADD_EXERCISE = 0;

 // package scope, since it is accessed in inner classes
WorkoutTrackerApp mApp;

/** 
 * Called when the activity is first created. 
 * 
 */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.type_list);

    mApp = (WorkoutTrackerApp) getApplication();
    mInflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    mExercises = DBUtil.fetchAllExercises(this);

    mArrayAdapter = new ArrayAdapter<Exercise>(this, R.layout.type_list_item, mExercises) {
        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            View row;

            if (null == convertView) {
                row = mInflater.inflate(R.layout.type_list_item, null);
            } else {
                row = convertView;
            }

            Exercise type = (Exercise) mExercises.get(position);
            TextView tv = (TextView) row.findViewById(android.R.id.text1);
            tv.setText(type.getName());

            return row;
        }

    };
    setListAdapter(mArrayAdapter);

    //dialog box layout
    mContext = this;
    LayoutInflater inflater = (LayoutInflater) mContext.getSystemService(LAYOUT_INFLATER_SERVICE);
    mAddExerciseDialogLayout = inflater.inflate(R.layout.add_type_dialog, (ViewGroup) findViewById(R.id.type_layout_root));

    exerciseName = (EditText) mAddExerciseDialogLayout.findViewById(R.id.type_name);
    //register for context menu
    registerForContextMenu(getListView());      

    if (mExercises.size() == 0) {
        // if there are no exercises initially, then show the add type dialog
        showDialog(DIALOG_ADD_EXERCISE);            
    }

    //Начало:Активация кнопки "Добавить упражнение"
    Button addExerciseButton = (Button) findViewById(R.id.menu_add_exercise);
    addExerciseButton.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            mApp.setCurrrentDialogStatus(DialogStatus.ADD);
            showDialog(DIALOG_ADD_EXERCISE);
        }
    });
    //Конец: Активация кнопки "Добавить упражнение"

    //Начало:Активация иконки Верхней плашки
    ImageButton GoHomeButton = (ImageButton) findViewById(R.id.imageButton1);
    GoHomeButton.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            Intent myIntent5 = new Intent(ShowExercisesListActivity.this, AndroidApp.class);
            ShowExercisesListActivity.this.startActivity(myIntent5);
        }
    });
    //Конец:Активация иконки Верхней плашки
}

@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    Exercise type = mExercises.get(position);
    Log.v(TAG, "Clicked " + type.getName() + "Id: " + type.getId());

    Intent intent = new Intent(this.getApplicationContext(),
            TabWidget.class);
    intent.putExtra("typeId", type.getId());
    startActivity(intent);
}

/**
 * When the context menu is created
 * 
 * @see android.app.Activity#onCreateContextMenu(android.view.ContextMenu, android.view.View, android.view.ContextMenu.ContextMenuInfo)
 */
@Override
public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo) {
    super.onCreateContextMenu(menu, v, menuInfo);

    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.exercise_context_menu, menu);
}

/**
 * When a context menu item is selected
 *  
 * @see android.app.Activity#onContextItemSelected(android.view.MenuItem)
 */
@Override
public boolean onContextItemSelected(MenuItem item) {
    AdapterContextMenuInfo info = (AdapterContextMenuInfo) item.getMenuInfo();

    switch (item.getItemId()) {

    case R.id.edit_exercise:
        //Edit Exercise name
        mApp.setCurrentExerciseDialogStatus(DialogStatus.EDIT);         
        editExercise((int) info.id);
        return true;
    case R.id.delete_exercise:
        //Delete Exercise and all its entries
        deleteExercise((int) info.id);
        return true;
    default:
        return super.onContextItemSelected(item);
    }
}

/*
 * (non-Javadoc)
 * 
 * @see android.app.Activity#onCreateOptionsMenu(android.view.Menu)
 */
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.types_menu, menu);
    return true;
}

/*
 * (non-Javadoc)
 * 
 * @see android.app.Activity#onOptionsItemSelected(android.view.MenuItem)
 */
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case R.id.add_exercise:
        mApp.setCurrentExerciseDialogStatus(DialogStatus.ADD);
        showDialog(DIALOG_ADD_EXERCISE);
        break;

    case R.id.home: // Go Back to local website
        Intent myIntent3 = new Intent(ShowExercisesListActivity.this, AndroidApp.class);
        ShowExercisesListActivity.this.startActivity(myIntent3);
        return true;

    case R.id.close: // Close WebView
        Intent intent = new Intent(Intent.ACTION_MAIN);
        intent.addCategory(Intent.CATEGORY_HOME);
        intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        startActivity(intent); 
        return true;
    case R.id.google: // Open new WebView with the e.g. Google Url
        startActivity(new Intent(Intent.ACTION_VIEW, 
                Uri.parse("http://vk.com/gymtraining")));

        return true;

    default:
        break;
    }
    return super.onOptionsItemSelected(item);
}

/* (non-Javadoc)
 * @see android.app.Activity#onCreateDialog(int)
 */
@Override
protected Dialog onCreateDialog(int id) {
    Dialog dialog;
    switch (id) {
    case DIALOG_ADD_EXERCISE:
        AlertDialog.Builder builder;

        //build the dialog
        builder = new AlertDialog.Builder(mContext);
        builder.setView(mAddExerciseDialogLayout);
        builder.setMessage(this.getString(R.string.add_exercise_title))
           .setCancelable(false)
           .setPositiveButton(this.getString(R.string.add, this.getString(R.string.exercise)), null)
           .setNegativeButton("Отмена", new DialogInterface.OnClickListener() {
               public void onClick(DialogInterface dialog, int id) {
                    dialog.cancel();
               }
           });

        dialog = builder.create();

        break;

    default:
        dialog = null;
        break;
    }
    return dialog;
}

/* (non-Javadoc)
 * @see android.app.Activity#onPrepareDialog(int, android.app.Dialog)
 */
@Override
protected void onPrepareDialog(int id, Dialog dialog) {
    AlertDialog alertDialog = (AlertDialog) dialog;
    Button positiveButton = null;

    switch (id) {
    case DIALOG_ADD_EXERCISE:

        switch (mApp.getCurrentExerciseDialogStatus()) {
        case DEFAULT:
        case ADD:

            alertDialog.setMessage(this.getString(R.string.add_exercise_title));
            alertDialog.setButton(DialogInterface.BUTTON_POSITIVE, this.getString(R.string.add, this.getString(R.string.exercise)), new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int id) {
                       //Insert the new data into db
                       String typeName = exerciseName.getText().toString();
                       Exercise newExercise = DBUtil.insertExercise(mContext, typeName);

                       Toast.makeText(mContext, mContext.getResources().getString(R.string.exercise_saved), Toast.LENGTH_SHORT).show();

                       mArrayAdapter.add(newExercise);
                       mArrayAdapter.notifyDataSetChanged();
                   }
               });

            positiveButton = alertDialog.getButton(DialogInterface.BUTTON_POSITIVE);
            positiveButton.setText(this.getString(R.string.add, this.getString(R.string.exercise)));
            positiveButton.invalidate();

            exerciseName.setText("");

            break;

        case EDIT:
            alertDialog.setMessage(this.getString(R.string.edit, this.getString(R.string.exercise)));
            alertDialog.setButton(DialogInterface.BUTTON_POSITIVE, this.getString(R.string.edit_button), new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int id) {
                       //Update the data into db
                        Exercise exerciseToEdit = (Exercise) exerciseName.getTag(); 
                        exerciseToEdit.setName(exerciseName.getText().toString());

                        DBUtil.updateExercise(mContext, exerciseToEdit);
                        Toast.makeText(mContext, mContext.getResources().getString(R.string.exercise_saved), Toast.LENGTH_SHORT).show();        
                        mArrayAdapter.notifyDataSetChanged();
                   }

               });

            Exercise exerciseToEdit = (Exercise) exerciseName.getTag();
            exerciseName.setText(exerciseToEdit.getName());

            positiveButton = alertDialog.getButton(DialogInterface.BUTTON_POSITIVE);
            positiveButton.setText(this.getString(R.string.edit_button));
            positiveButton.invalidate();

            break;
            }
    default:
        break;
    }
}

/**
 * Edit Exercise name
 * 
 * @param id
 */
private void editExercise(int position) {
    exerciseName.setTag(mExercises.get(position));
    showDialog(DIALOG_ADD_EXERCISE);
}

/**
 * Delete an Exercise
 * 
 * @param position
 */
private void deleteExercise(int position) {
    Exercise exercise = mExercises.get(position);
    DBUtil.deleteExercise(mContext, exercise.getId());

    Toast.makeText(mContext, mContext.getResources().getString(R.string.exercise_deleted), Toast.LENGTH_SHORT).show();      

    mArrayAdapter.remove(exercise);
    mArrayAdapter.notifyDataSetChanged();

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T14:36:30.210

我现在无法查看整个代码，但如果您的问题只是在您旋转手机并且没有必要激活旋转时，那么您为什么不将以下任一行添加到您的活动定义中在你的 AndroidManifest.xml

```
android:screenOrientation="portrait" 
```

或者

```
android:screenOrientation="landscape" 
```

# extjs - WMS GetFeatureInfo；多层，不同来源

> ID：13915558
> 
> 赞同：2
> 
> 时间：2012-12-17T13:58:45.163
> 
> 标签：extjs, openlayers, geoserver, getfeatureinfo

我正在使用 GeoExt、OpenLayers 开发一个 Web 应用程序，并拥有自己的 GeoServer 来提供各种地图。不过，如果需要，我想让用户添加其他 WMS，以便能够使用所有需要的图层。

因此，我对 GetFeatureInfo 请求的问题。现在我在geoext的地图面板上附加了一个工具栏按钮，

```
new GeoExt.Action({
            iconCls: "feature",
            map: map,
            toggleGroup: "tools",
            tooltip: "Feature",
            control: featureControl             
        }) 
```

它的控制属性是

```
var featureControl = new OpenLayers.Control.WMSGetFeatureInfo({
            queryVisible: true,
            drillDown: true,
            infoFormat:"application/vnd.ogc.gml"
        }); 
```

我还定义了一个事件侦听器，以便在收到响应后执行我真正想要的操作，但这与此处无关。我的问题如下：

考虑到用户点击了有 2 个以上可见层并且其中至少有一个来自不同来源的点，OpenLayers 将不得不为每个不同来源执行一个 AJAX 请求，并且根据 OpenLayers 自己的文档，

> 收到 GetFeatureInfo 响应时触发。事件对象有一个带有响应正文的文本属性（字符串），一个带有解析特征数组的特性属性，一个带有触发请求的鼠标单击或悬停事件位置的 xy 属性，以及一个请求属性与请求本身。如果 DrillDown 设置为 true 并且发出了多个请求以从所有层收集要素信息，则文本和请求将仅包含最后一个请求的响应正文和请求对象。

所以，是的，它显然不会马上那样工作。看一下调试器，我可以清楚地看到，从不同的来源给出两个层，它实际上执行了请求，只是它不等待第一个的响应并跳转到下一个（显然，是异步的）。我已经考虑过一个接一个地处理请求，这意味着按照上述方式执行第一个请求，一旦完成并保存响应，就可以进行下一个请求。但我仍然习惯了 GeoExt 使用的数据结构。

我缺少任何 API（无论是 GeoExt 还是 OpenLayers）选项/方法？有什么好的解决方法吗？

谢谢阅读 ：-）

PS：对不起，如果我不够清楚，英语不是我的母语。如果上述内容不够清楚，请告诉我:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T01:08:59.377

我希望这对其他人有帮助，我意识到：你是正确的，这个控件在异步模式下发出请求，但这没关系，没问题，真正的问题是当控件处理请求并触发事件时“ getfeatureinfo" 所以，我为这个控件修改了 2 个方法并且它有效！，所以我首先声明了控件，然后在野蛮模式下我修改了这里的方法是解码代码：

```
 getInfo = new OpenLayers.Control.WMSGetFeatureInfo({ drillDown:true , queryVisible: true , maxFeatures:100 });
  //then i declare a variable that help me to handle more than 1 request.....
 getInfo.responses  = [];
 getInfo.handleResponse=function(xy, request) {        var doc = request.responseXML;
    if(!doc || !doc.documentElement) {   doc = request.responseText; }
    var features = this.format.read(doc);
    if (this.drillDown === false) {
        this.triggerGetFeatureInfo(request, xy, features);
    } else {
        this._requestCount++;
        this._features = (this._features || []).concat(features);
        if( this._numRequests > 1){
                          //if the num of RQ, (I mean more than 1 resource ), i put the Request in array, this is for maybe in a future i could be need other properties or methods from RQ, i dont know.
            this.responses.push(request);}
        else{
            this.responses = request;}
        if (this._requestCount === this._numRequests) {
            //here i change the code....
            //this.triggerGetFeatureInfo(request, xy, this._features.concat());
            this.triggerGetFeatureInfo(this.responses, xy, this._features.concat());
            delete this._features;
            delete this._requestCount;
            delete this._numRequests;
            // I Adding this when the all info is done 4 reboot
            this.responses=[];
        }
    }
}

 getInfo.triggerGetFeatureInfo= function( request , xy , features) {
//finally i added this code for get all request.responseText's
if( isArray( request ) ){
    text_rq = '';
    for(i in request ){
        text_rq += request[i].responseText;

        }
    }
else{
    text_rq = request.responseText;

    }

    this.events.triggerEvent("getfeatureinfo", {
       //text: request.responseText,
       text : text_rq,
        features: features,
        request: request,
        xy: xy
    });

    // Reset the cursor.
    OpenLayers.Element.removeClass(this.map.viewPortDiv, "olCursorWait");} 
```

谢谢，你给我带来了一种发现我的问题的方法，这是我解决的方法，我希望这对其他人有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-19T14:42:15.653

saheka 的回答几乎是完美的！恭喜，谢谢，我遇到了同样的问题，我终于设法解决了。

我会在你的代码中改变什么：

*   isArray() 不起作用，改成这样：getInfo.triggerGetFeatureInfo() 第一行的 if(request instanceof Array) {...}
*   在弹出窗口中显示结果是这样的：

我的代码：

```
getInfo.addPopup = function(map, text, xy) {
    if(map.popups.length > 0) {
        map.removePopup(map.popups[0]);
    }
    var popup = new OpenLayers.Popup.FramedCloud(
        "anything",
        map.getLonLatFromPixel(xy),
        null,
        text,
        null,
        true
    );
    map.addPopup(popup);
} 
```

并在 getInfo.triggerGetFeatureInfo() 函数的最后一行之后，附加：

```
this.addPopup(map, text_rq, xy); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T11:11:27.770

GetFeatureInfo 请求作为 JavaScript Ajax 调用发送到外部服务器。因此，出于安全原因，这些请求可能会被阻止。您必须通过您自己域上的代理将请求发送到外部服务器。

然后，通过将 OpenLayers.ProxyHost 设置为正确的路径，在 openlayers 中配置此代理。例如：

```
OpenLayers.ProxyHost = "/proxy_script"; 
```

有关更多背景信息，请参阅[http://trac.osgeo.org/openlayers/wiki/FrequentlyAskedQuestions#ProxyHost](http://trac.osgeo.org/openlayers/wiki/FrequentlyAskedQuestions#ProxyHost)。

# android-layout - 如何在android的listview中为按钮设置onclicklistener？

> ID：13915559
> 
> 赞同：2
> 
> 时间：2012-12-17T13:58:50.103
> 
> 标签：android-layout, android-custom-view

我有一个 listView 有一个按钮和一个 textView。如何为 listView 中的按钮设置 onclicklistener？代码如下：

列表视图.xml：

```
ListView lv1 = (ListView)popupView.findViewById(R.id.listView1);
listviewAdapter adapter = new listviewAdapter(Order_page.this, alist);
lv1.setAdapter(adapter); 
```

ListviewAdapter 类如下：

```
public class listviewAdapter extends BaseAdapter {
public ArrayList<HashMap<String, String>> list;
Activity activity;

public listviewAdapter(Activity activity,
        ArrayList<HashMap<String, String>> list) {
    super();
    this.activity = activity;
    this.list = list;
}

@Override
public int getCount() {
    // TODO Auto-generated method stub
    return list.size();
}

@Override
public Object getItem(int position) {
    // TODO Auto-generated method stub
    return list.get(position);
}

@Override
public long getItemId(int position) {
    // TODO Auto-generated method stub
    return 0;
}

class ViewHolder {
    Button btn_fav, btn_plus, btn_minus;
    TextView item_name;
    TextView item_price;
    TextView item_total;
    EditText et_quantity;
}

@Override
public View getView(int position, View convertView, final ViewGroup parent) {
    // TODO Auto-generated method stub

    // TODO Auto-generated method stub
    ViewHolder holder;
    LayoutInflater inflater = activity.getLayoutInflater();

    if (convertView == null) {

        convertView = inflater.inflate(R.layout.order_list_texts, null);
        holder = new ViewHolder();

        holder.btn_fav = (Button) convertView.findViewById(R.id.fav_btn_orderlist);
        holder.btn_plus = (Button) convertView.findViewById(R.id.order_pg_plus);
        holder.btn_minus = (Button) convertView.findViewById(R.id.order_pg_minus);

        holder.item_name = (TextView) convertView.findViewById(R.id.item_name);
        holder.item_price = (TextView) convertView.findViewById(R.id.itm_price);
        holder.item_total = (TextView) convertView.findViewById(R.id.Item_total);
        holder.et_quantity = (EditText) convertView.findViewById(R.id.et_quantity_order_list);

        convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
    }

    HashMap<String, String> map = list.get(position);
    holder.item_name.setText(map.get(ITEM_NAME_COLUMN));
    holder.item_price.setText(map.get(ITEM_PRICE_COLUMN));
    holder.item_total.setText(map.get(TOTAL_COLUMN));
    holder.et_quantity.setText(map.get(ITEM_QUANTITY_COLUMN));

    return convertView;
}

} 
```

请帮忙设置按钮的onClick事件

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T14:10:34.480

您只需添加一个侦听器，`myButton.setOnClickListener(mBuyButtonClickListener)` 这将在`getView()`您的 ListView中完成

您可以通过使用以下解决方案来了解按钮的位置`myListView.getPositionForView(myButton)` 可以帮助您：

```
private OnClickListener mBuyButtonClickListener = new OnClickListener() {
@Override
public void onClick(View v) {
    final int position = getListView().getPositionForView(v);
    if (position != ListView.INVALID_POSITION) {
        //DO THE STUFF YOU WANT TO DO WITH THE position
    }
} 
```

};

如需进一步帮助，您可以转到[本文](http://android.cyrilmottier.com/?p=525)..希望答案对您有所帮助..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T10:06:05.223

下面列出了完整的代码，它太简单了。

```
public class listviewAdapter extends BaseAdapter {
public ArrayList<HashMap<String, String>> list;
Activity activity;

public listviewAdapter(Activity activity,
        ArrayList<HashMap<String, String>> list) {
    super();
    this.activity = activity;
    this.list = list;
}

@Override
public int getCount() {
    // TODO Auto-generated method stub
    return list.size();
}

@Override
public Object getItem(int position) {
    // TODO Auto-generated method stub
    return list.get(position);
}

@Override
public long getItemId(int position) {
    // TODO Auto-generated method stub
    return 0;
}

class ViewHolder {
    Button btn_fav, btn_plus, btn_minus, btn_delete;
    TextView item_name;
    TextView item_price;
    TextView item_total;
    EditText et_quantity;

}

@Override
public View getView(final int position, View convertView,
        final ViewGroup parent) {
    // TODO Auto-generated method stub

    final ViewHolder holder;
    LayoutInflater inflater = activity.getLayoutInflater();

    if (convertView == null) {

        convertView = inflater.inflate(R.layout.order_list_texts, null);

        holder = new ViewHolder();

        holder.btn_fav = (Button) convertView.findViewById(R.id.fav_btn_orderlist);

        holder.btn_plus = (Button) convertView.findViewById(R.id.orderlist_plus);
        holder.btn_minus = (Button) convertView.findViewById(R.id.orderlist_minus);

        holder.item_name = (TextView) convertView.findViewById(R.id.item_name);
        holder.item_price = (TextView) convertView.findViewById(R.id.itm_price);
        holder.item_total = (TextView) convertView.findViewById(R.id.Item_total);
        holder.et_quantity = (EditText) convertView.findViewById(R.id.et_quantity_order_list);

        holder.btn_delete = (Button) convertView.findViewById(R.id.btn_order_list_delete);

        convertView.setTag(holder);

    } 
    else 
    {
        holder = (ViewHolder) convertView.getTag();
    }

    final HashMap<String, String> map = list.get(position);
    holder.item_name.setText(map.get(ITEM_NAME_COLUMN));
    holder.item_price.setText(map.get(ITEM_PRICE_COLUMN));
    holder.item_total.setText(map.get(TOTAL_COLUMN));
    holder.et_quantity.setText(map.get(ITEM_QUANTITY_COLUMN));

    holder.btn_delete.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            list.remove(position);
            notifyDataSetChanged();
            //Log.v("sd", "" + alist);

        }
    });

    holder.btn_minus.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub

            //to get a specific item
            Toast.makeText(activity,"" + holder.item_name.getText().toString(),Toast.LENGTH_LONG).show();

        }
    });

    /*
     * holder.et_quantity.addTextChangedListener(new TextWatcher() {
     * 
     * @Override public void onTextChanged(CharSequence arg0, int arg1, int
     * arg2, int arg3) { // TODO Auto-generated method stub
     * 
     * }
     * 
     * @Override public void beforeTextChanged(CharSequence arg0, int arg1,
     * int arg2, int arg3) { // TODO Auto-generated method stub
     * 
     * }
     * 
     * @Override public void afterTextChanged(Editable arg0) { // TODO
     * Auto-generated method stub Toast.makeText(activity,
     * ""+getItem(position), 1000).show(); } });
     */
    return convertView;
}

} 
```

# jquery - 如何阻止此 jquery 方法在 onload 时触发？

> ID：13915564
> 
> 赞同：1
> 
> 时间：2012-12-17T13:59:06.077
> 
> 标签：jquery, jquery-ui

我有这个 jquery 函数，它应该在我调用它时触发。现在，当我调用它时，它确实会启动；然而，不幸的是，它也会在 OnLoad 时触发。我怎样才能阻止这种情况发生？

这是我调用该方法的方式：

```
<telerik:RadListBox ID="RadListType" CssClass="RadListBoxWZMenu" runat="server" OnClientDropped="LocationItem('Type')"> 
```

这是方法：

```
$(function LocationItem(zonetype) {
   var NewDialog = $('<div class="droppable"></div>');
   NewDialog.dialog({
   modal: false,
   title: $('<label>' + zonetype + '</label>'),
      show: 'clip',
      hide: 'clip',
      buttons: [
        { text: "Edit", click: function () { EditFields() } },
      ]
   });
   return false;

}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T14:00:38.723

我认为将它包装在 $() 函数中意味着它在 JQuery 加载时被调用

尝试完全删除 $()

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T14:01:08.590

删除封装括号、前导美元符号和尾随分号 (ie `$();`)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-17T14:01:47.607

您不需要将函数包装在`$`. 如果你只是把这样的函数放在你的代码中：

```
function LocationItem(zonetype) {
   var NewDialog = $('<div class="droppable"></div>');
   NewDialog.dialog({
   modal: false,
   title: $('<label>' + zonetype + '</label>'),
      show: 'clip',
      hide: 'clip',
      buttons: [
        { text: "Edit", click: function () { EditFields() } },
      ]
   });
   return false;
} 
```

那么你应该没有任何问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-17T14:02:27.887

包装代码

```
$( //your code ) 
```

相当于

```
$(document).ready( //your code ) 
```

# ruby-on-rails - Ruby on Rails 中的语法错误

> ID：13915565
> 
> 赞同：0
> 
> 时间：2012-12-17T13:59:13.303
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

嗨，我是 rails 平台上的 ruby​​ 初学者，我正在阅读 railstutorial.org 的书。我的 Micopost1.rb 文件内容是

```
class Micropost1 < ActiveRecord::Base
  attr accessible :content, :user_id

belongs_to :user

validates :content, :length => { :maximum => 140 }

end 
```

当我运行 rails.console 命令时，当我首先输入控制台 user.microposts 时会打开一个控制台，然后我会收到以下错误日志，

```
SyntaxError: /home/ritesh/projects/demo/app/models/micropost1.rb:2: syntax error, unexpected tIDENTIFIER, expecting kEND
    from /var/lib/gems/1.8/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:469:in `load'
    from /var/lib/gems/1.8/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:469:in `load_file'
    from /var/lib/gems/1.8/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:639:in `new_constants_in'
    from /var/lib/gems/1.8/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:468:in `load_file'
    from /var/lib/gems/1.8/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:353:in `require_or_load'
    from /var/lib/gems/1.8/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:502:in `load_missing_constant'
    from /var/lib/gems/1.8/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:192:in `const_missing'
    from /var/lib/gems/1.8/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:190:in `each'
    from /var/lib/gems/1.8/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:190:in `const_missing'
    from /var/lib/gems/1.8/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:514:in `load_missing_constant'
    from /var/lib/gems/1.8/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:192:in `const_missing'
    from /var/lib/gems/1.8/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:190:in `each'
    from /var/lib/gems/1.8/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:190:in `const_missing'
    from /var/lib/gems/1.8/gems/activesupport-3.2.9/lib/active_support/inflector/methods.rb:219:in `constantize'
    from /var/lib/gems/1.8/gems/activesupport-3.2.9/lib/active_support/inflector/methods.rb:218:in `each'
    from /var/lib/gems/1.8/gems/activesupport-3.2.9/lib/active_support/inflector/methods.rb:218:in `constantize'
... 10 levels...
    from /var/lib/gems/1.8/gems/activerecord-3.2.9/lib/active_record/associations/collection_proxy.rb:44:in `__send__'
    from /var/lib/gems/1.8/gems/activerecord-3.2.9/lib/active_record/associations/collection_proxy.rb:44:in `load_target'
    from /var/lib/gems/1.8/gems/activerecord-3.2.9/lib/active_record/associations/collection_proxy.rb:87:in `method_missing'
    from /usr/lib/ruby/1.8/irb.rb:310:in `output_value'
    from /usr/lib/ruby/1.8/irb.rb:159:in `eval_input'
    from /usr/lib/ruby/1.8/irb.rb:271:in `signal_status'
    from /usr/lib/ruby/1.8/irb.rb:155:in `eval_input'
    from /usr/lib/ruby/1.8/irb.rb:154:in `eval_input'
    from /usr/lib/ruby/1.8/irb.rb:71:in `start'
    from /usr/lib/ruby/1.8/irb.rb:70:in `catch'
    from /usr/lib/ruby/1.8/irb.rb:70:in `start'
    from /var/lib/gems/1.8/gems/railties-3.2.9/lib/rails/commands/console.rb:47:in `start'
    from /var/lib/gems/1.8/gems/railties-3.2.9/lib/rails/commands/console.rb:8:in `start'
    from /var/lib/gems/1.8/gems/railties-3.2.9/lib/rails/commands.rb:41
    from script/rails:6:in `require'
    from script/rails:6irb(main):004:0> first_user.micropost1s
NoMethodError: undefined method `accessible' for #<Class:0xb6651934>
    from /var/lib/gems/1.8/gems/activerecord-3.2.9/lib/active_record/dynamic_matchers.rb:50:in `method_missing'
    from /home/ritesh/projects/demo/app/models/micropost1.rb:2
    from /var/lib/gems/1.8/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:469:in `load'
    from /var/lib/gems/1.8/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:469:in `load_file'
    from /var/lib/gems/1.8/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:639:in `new_constants_in'
    from /var/lib/gems/1.8/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:468:in `load_file'
    from /var/lib/gems/1.8/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:353:in `require_or_load'
    from /var/lib/gems/1.8/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:502:in `load_missing_constant'
    from /var/lib/gems/1.8/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:192:in `const_missing'
    from /var/lib/gems/1.8/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:190:in `each'
    from /var/lib/gems/1.8/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:190:in `const_missing'
    from /var/lib/gems/1.8/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:514:in `load_missing_constant'
    from /var/lib/gems/1.8/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:192:in `const_missing'
    from /var/lib/gems/1.8/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:190:in `each'
    from /var/lib/gems/1.8/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:190:in `const_missing'
    from /var/lib/gems/1.8/gems/activesupport-3.2.9/lib/active_support/inflector/methods.rb:219:in `constantize'
... 12 levels...
    from /var/lib/gems/1.8/gems/activerecord-3.2.9/lib/active_record/associations/collection_proxy.rb:44:in `__send__'
    from /var/lib/gems/1.8/gems/activerecord-3.2.9/lib/active_record/associations/collection_proxy.rb:44:in `load_target'
    from /var/lib/gems/1.8/gems/activerecord-3.2.9/lib/active_record/associations/collection_proxy.rb:87:in `method_missing'
    from /usr/lib/ruby/1.8/irb.rb:310:in `output_value'
    from /usr/lib/ruby/1.8/irb.rb:159:in `eval_input'
    from /usr/lib/ruby/1.8/irb.rb:271:in `signal_status'
    from /usr/lib/ruby/1.8/irb.rb:155:in `eval_input'
    from /usr/lib/ruby/1.8/irb.rb:154:in `eval_input'
    from /usr/lib/ruby/1.8/irb.rb:71:in `start'
    from /usr/lib/ruby/1.8/irb.rb:70:in `catch'
    from /usr/lib/ruby/1.8/irb.rb:70:in `start'
    from /var/lib/gems/1.8/gems/railties-3.2.9/lib/rails/commands/console.rb:47:in `start'
    from /var/lib/gems/1.8/gems/railties-3.2.9/lib/rails/commands/console.rb:8:in `start'
    from /var/lib/gems/1.8/gems/railties-3.2.9/lib/rails/commands.rb:41
    from script/rails:6:in `require' 
```

我没有得到我错的地方有两个模型 1 是用户，第二个是 Micropost1 首先我运行这个命令来分配变量 first_user first_user=User.first 请指出我在哪里弄错了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T14:00:28.277

`attr accessible`应该是一个词：`attr_accessible`

如果你往下看你的堆栈跟踪，你会看到以下错误：

```
NoMethodError: undefined method `accessible' for #<Class:0xb6651934>
  from /var/lib/gems/1.8/gems/activerecord-3.2.9/lib/active_record/dynamic_matchers.rb:50:in `method_missing'
  from /home/ritesh/projects/demo/app/models/micropost1.rb:2 
```

此错误表明在您的 micropost1.rb 文件的第 2 行，调用了一个不存在的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T14:05:20.707

尝试这个...

```
class Micropost1 < ActiveRecord::Base
  attr_accessible :content, :user_id

  belongs_to :user

  validates :content, :length => { :maximum => 140 }

end 
```

你在你的模型中写的是'attr accessible'，它是'attr_accessible'，就像上面写的一样......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T16:04:52.567

你应该做一些调查，假装你是福尔摩斯！

**线索 1**

```
SyntaxError: /home/ritesh/projects/demo/app/models/micropost1.rb:2: syntax error, unexpected tIDENTIFIER, expecting kEND 
```

你知道你有什么样的错误，一个语法错误。你拼错了一些东西。

**线索 2**

如果您仔细观察，您会发现我们还有其他线索，那就是错误告诉您它在模型中`micropost1.rb:2`，并且`:2`意味着它在代码的第二行中。

**线索 3**

好的，您知道错误在哪里以及它是什么类型的错误。但这是什么`unexpected tIDENTIFIER, expecting kEND`意思？谷歌是你的沃森。他给你6630个不同的答案。

**结案**

你发现你在你的模型中写的是 is `'attr accessible'`，而不是应该是`'attr_accessible'`。

# open-source - 使用 GNU 许可的开源软件时的含义

> ID：13915571
> 
> 赞同：0
> 
> 时间：2012-12-17T13:59:52.117
> 
> 标签：open-source, licensing, gnu, lgpl

我对引入根据 GNU Lesser General Public License 许可的源代码的含义感到有些困惑。我正在开发一个测试框架，我想使用和修改一个开源项目作为现有框架的一部分。这是否意味着整个测试框架应该是开源的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T14:33:31.443

您可以将 LGPL 组件集成到专有解决方案中，只要它保持独立即可。因此，例如链接很好，用作处理器很好。捆绑也很好，只要您清楚地说明捆绑包含 LGPL 软件并且就是这样。

您当然可以根据需要修改该软件，这就是开源软件的全部意义所在。但是，您之后再次传播它，例如通过将它与您的框架捆绑在一起，您必须发布您的修改。

通常遵循以下经验法则：

您可以使用它并根据需要对其进行修改，但不要试图让它看起来好像您实现了该解决方案。公平地对待那些为你工作的人。

# seo - 尽管重新提交，但从谷歌中删除了主站点 url

> ID：13915581
> 
> 赞同：0
> 
> 时间：2012-12-17T14:00:29.743
> 
> 标签：seo, google-search

我有一个网站 www.megalim.co.il，最近由于版本升级，我发现我有一个 robots.txt 文件不允许所有搜索引擎.. 我的谷歌排名下降了，我找不到该网站的主要页面不再我将 robots.txt 文件更改为允许所有人的文件，现在网络管理员工具包没有写信告诉我该网站已被谷歌阻止。

大约 5 天前我这样做了，我还以谷歌的身份获取并提交 www.megalim.co.il 以索引所有相关页面

但是，当我搜索这个：“site:www.megalim.co.il”时，我从我的网站得到了一堆结果，但不是主页！

我还应该寻找什么？

谢谢！伊格尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T21:14:11.103

由于旧的 robots.txt，您看不到主页。5 天对于 Google 机器人重新索引您的所有网站来说都不算什么。

Just wait a little and you will see your website fully indexed in Google results.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T10:09:38.337

问题解决了.. 尴尬... 显然我们（莫名其妙地）有一个 nofollow，noindex 元标记.. 一天后，我们开始重新出现在谷歌

谢谢 ：）

# javascript - 如果用户在视网膜设备上，则将背景图像替换为更高质量的图像

> ID：13915582
> 
> 赞同：0
> 
> 时间：2012-12-17T14:00:31.110
> 
> 标签：javascript, html, css, retina-display

我正在尝试制作我的第一个视网膜就绪网站，但是当我需要在 css 中将图像替换为更高分辨率时遇到了问题。例如，我不确定如何将标准图像作为背景，然后如果用户在视网膜机器上具有相同的图像但分辨率更高（目前我有低分辨率和高分辨率图像）。谁能建议好的来源或解释如何做到这一点？最好是一个 css 和跨浏览器的解决方案，但它也可以是 javascript 或其他东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T14:07:39.737

您可以使用 css 媒体查询

```
 device-pixel-ratio,
   min--moz-device-pixel-ratio,
   -o-min-device-pixel-ratio,
   -Webkit-min-device-pixel-ratio {
     …
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T14:07:21.660

对我来说似乎最简单的解决方案是利用 css。您有一个基类，可以像您所说的那样为背景设置图片，但是您有另一个类可以将背景图像覆盖到更高的分辨率。

使用它作为源，您可以执行此操作来检测它是否是视网膜显示器并向元素添加一个类。

[http://briancray.com/posts/detect-retina-displays-with-javascript](http://briancray.com/posts/detect-retina-displays-with-javascript)

```
var retina = window.devicePixelRatio > 1;
if (retina) {
    // the user has a retina display
    //add code to add the class to your element.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T14:09:41.260

检查服务器端的设备也可能是一种解决方案。WURFL 和 Tera-WURFL 等项目让您在做出响应之前了解设备，因此您可以发送正确的 css 文件。

# json - Google 自定义搜索 JSON API 未返回所有结果

> ID：13915588
> 
> 赞同：0
> 
> 时间：2012-12-17T14:00:53.550
> 
> 标签：json, google-custom-search

我正在使用网站的 Google 自定义搜索 api -“yeskantipur.com”。当我在 Google 搜索中搜索“site:yeskantipur.com Sony Xperia Sola”一词时，我得到了很多结果。但是使用 API，我只得到两个结果。自定义搜索不返回正常搜索中第一个位置的结果。相反，显示了第二个结果..

这是输出json的项目：

```
 "items": [
  {
   "kind": "customsearch#result",
   "title": "Virgin Mobile",
   "htmlTitle": "Virgin Mobile",
   "link": "http://www.yeskantipur.com/index.php?route=product/vendor&vendor_id=57",
   "displayLink": "www.yeskantipur.com",
   "snippet": "SONY XPERIA SOLA. GENERAL 2G Network G.. ... Also known as Sony Ericsson   Xperia Nozomi, Sony Ericsson Arc HD .. 40000.00\. Ex Tax: Rs.40,000.00 ...",
   "htmlSnippet": "\u003cb\u003eSONY XPERIA SOLA\u003c/b\u003e. GENERAL 2G Network G.. \u003cb\u003e...\u003c/b\u003e Also known as Sony Ericsson \u003cbr\u003e  Xperia Nozomi, Sony Ericsson Arc HD .. 40000.00\. Ex Tax: Rs.40,000.00 \u003cb\u003e...\u003c/b\u003e",
   "cacheId": "Zm5BwsKSGxcJ",
   "formattedUrl": "www.yeskantipur.com/index.php?route=product/vendor...id...",
   "htmlFormattedUrl": "www.yeskantipur.com/index.php?route=product/vendor...id...",
   "pagemap": {
    "cse_image": [
     {
      "src": "http://www.yeskantipur.com/image/cache/data/virgin/sony-x8-182x182.jpg"
     }
    ],
    "cse_thumbnail": [
     {
      "width": "145",
      "height": "145",
      "src": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRh7wPGludHnxspronMl2eITUvTqYjUZ0-KSOgDsiVyvywyCVnYT09KpP8"
     }
    ]
   }
  },
  {
   "kind": "customsearch#result",
   "title": "Sony Ericsson",
   "htmlTitle": "\u003cb\u003eSony\u003c/b\u003e Ericsson",
   "link": "http://www.yeskantipur.com/index.php?route=product/category&path=106",
   "displayLink": "www.yeskantipur.com",
   "snippet": "Sony Xperia Neo L. Also known as Sony MT25i. .. Rs.23,500.00\. Ex Tax: Rs.  23,500.00\. Add to Bag. Add to Wish List. Add to Compare. Sony Xperai Sola ...",
   "htmlSnippet": "\u003cb\u003eSony Xperia\u003c/b\u003e Neo L. Also known as \u003cb\u003eSony\u003c/b\u003e MT25i. .. Rs.23,500.00\. Ex Tax: Rs.\u003cbr\u003e  23,500.00\. Add to Bag. Add to Wish List. Add to Compare. \u003cb\u003eSony\u003c/b\u003e Xperai \u003cb\u003eSola\u003c/b\u003e \u003cb\u003e...\u003c/b\u003e",
   "cacheId": "k_N9tKXWitYJ",
   "formattedUrl": "www.yeskantipur.com/index.php?route=product/category&path...",
   "htmlFormattedUrl": "www.yeskantipur.com/index.php?route=product/category&amp;path...",
   "pagemap": {
    "cse_image": [
     {
      "src": "http://www.yeskantipur.com/image/cache/data/ctv-mobile/1-180x180.jpg"
     }
    ],
    "cse_thumbnail": [
     {
      "width": "144",
      "height": "144",
      "src": "https://encrypted-tbn2.gstatic.com/images?q=tbn:ANd9GcRkJbvtpWJeEFS4E9sCXi-tvnFa-20T3YOzF6v6UDhDNYBpep1TWhoaSYMM"
     }
    ] 
```

# javascript - 为什么 jQuery 结果看起来像一个函数？

> ID：13915594
> 
> 赞同：2
> 
> 时间：2012-12-17T14:01:18.467
> 
> 标签：javascript, jquery, arrays

如果我创建一个 jQuery 包装集并将其放入`console.log`，它看起来像

![在此处输入图像描述](../Images/3dafc5b02bb0da3ffaa15a635870b0c7.png)

* * *

我知道我们可以“欺骗”`console`显示`objects`or `arrays`，这意味着如果我们有

```
var obj = {
    0: 'some',
    1: 'data'
}; 
```

它将输出为

![在此处输入图像描述](../Images/8943289761e9503a09d40a7127ee18e4.png)

但是如果我们加上一个`splice method`and `length property`，它就会变成

![在此处输入图像描述](../Images/82b8e8475733f75efb9c56eb84e6e406.png)

* * *

**问题**：我怎样才能创建一个函数，创建这样一个`array-like object`，但仍然`function`像一样在控制台中显示`jQuery`？我不明白 jQuery 代码。

**结果如下**： `myFunction( "some", "data" )`

* * *

更新：

好像我说得不够清楚。我想知道，如何创建和设置函数、构造函数，以及`array-like object`在控制台中打印为`function( elem1, elem2, ...)`. 一个完美的答案包含一个简单的例子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T14:41:59.350

Firebug 控制台中 jQuery 对象的默认外观是`Object[one, two, ...]`. 如果将 an`array-like object`与构造函数一起使用，则可以得到相同的结果。就像乍得的回应一样。

但是在您的情况下，由于名为 FireQuery 的 Firefox 插件，您获得了 jQuery 对象的“特殊外观”：http: [//firequery.binaryage.com/](http://firequery.binaryage.com/)

据我所知，您不能在萤火虫控制台中获得相同的结果。除非您制作自己的插件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T14:05:27.417

你用过[console.dir()](https://developer.mozilla.org/en-US/docs/DOM/console.dir)

```
>>> var myA = ["a","b","c"];  console.dir(myA);
  0    "a"
  1    "b"
  2    "c" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T14:32:12.120

它只是输出`Object.constructor.name`它是否存在的值：

```
>>> var Mine = function() {}
undefined

>>> new Mine()
Object {}

//-------------------------------

>>> function Mine() {}
undefined

>>> new Mine()
Mine {}

//-------------------------------

>>> function Mine() {}
undefined

>>> Mine.prototype.length = 10;
10

>>> Mine.prototype.splice = function() {}
function()

>>> new Mine()
Object[undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined] 
```

这与我在控制台中为 jQuery 获得的输出相匹配：

```
>>> jQuery('span');
Object[span.profile-triangle, span.reputation-score, span, span.badge2, ...] 
```

我正在使用 Firefox v17.0.1 和 Firebug v1.11.1

希望这可以帮助。

**编辑：**另请注意，`Function.name`一旦创建函数，它就是只读的^([1](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/name))

# android - 如何在 ViewPager 中使用 SlidingMenu？

> ID：13915601
> 
> 赞同：1
> 
> 时间：2012-12-17T14:01:40.347
> 
> 标签：android, menu, android-viewpager

我在 MainActivity 中有包含内容的 ViewPager，我想添加 SlidingMenu。我需要 SlidingMenu 仅在 ViewPager 的第一页上打开。我找到[了这个例子](https://github.com/Alexrs95/SlidingMenuAndViewPager)，但在这个实现中它不能很好地工作：很难打开菜单（SlidingMenu 只在屏幕的狭窄左侧做出反应）并在每一页上工作（不仅仅是第一页）。如何正确实施？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T16:32:20.277

无论您对我的评论/问题的回答如何，您都可以修改 SlidingMenu 源，以便 TOUCHMODE_MARGIN 的边距更大。`CustomViewAbove.java`在包中打开`com.slidingmenu.lib`并将`MARGIN_THRESHOLD`int 设置为大于 20 的值。我使用了 80。

意见：我认为 jfeinstein 无论如何都应该使这个边距更大，或者至少是可配置的。

如果您不想这样做，并且您正在实现一个 ActionBar，您可以简单地使用 ActionBar`Home`按钮并以这种方式打开 SlidingMenu。请参阅[https://stackoverflow.com/a/11409318/1165673](https://stackoverflow.com/a/11409318/1165673)以供参考。

要解决仅在首页可用的问题`ViewPager`，请查看 中的`setSlidingEnabled(bool b)`功能`SlidingMenu.java`。你知道你在哪个页面，所以根据你的位置设置滑动启用。

# google-sheets - Google Docs：从单元格中提取数字，然后将它们相加并显示在另一个单元格中

> ID：13915602
> 
> 赞同：0
> 
> 时间：2012-12-17T14:01:42.397
> 
> 标签：google-sheets, extract

如何为 B 列编写一个公式，该公式将在 A 中找到数字，然后在 B 中求和并显示它们？

这是示例：

```
A                       B
Milan 2I + Marko 3I     5        what happened: 2+3=5, display 5
Nevena 6I + Umic 4I     10       what happened: 6+4=10, display 10 
```

**我尝试过的事情**：

1.  left, right, mid - 不能工作，因为名字是随机的；

2.  一些公式只给我第一个数字，没有第二个；

3.  用 C 编写 UDF，但未能将其转换为 javascript 代码；

4.  尝试将字母转换为 0，然后
    将该单元格中的所有数字相加。

**我想过但不知道如何实现的事情**：

1.  编写一个公式来查找后跟“I”的数字。

注意：单元格中唯一不变的是每个数字后面都有“I”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T15:04:29.963

这应该适用于找到两个数值，但是它有点复杂，我相信它可以被抽象为几个单元格以使其更容易和更有效。假设 A1 是您的字符串的单元格。

```
=SUM(VALUE(MID(A1,FIND(REGEXEXTRACT(A1,"[0-9]I"),A1),LEN(REGEXEXTRACT(A1,"[0-9]I"))-1)),VALUE(MID(A1,FIND(REGEXEXTRACT(REGEXREPLACE(A1,CONCATENATE("^.{",FIND(REGEXEXTRACT(A1,"[0-9]I"),A1)-1,"}[0-9]I",""),""),"[0-9]I"),A1),LEN(REGEXEXTRACT(REGEXREPLACE(A1,CONCATENATE("^.{",FIND(REGEXEXTRACT(A1,"[0-9]I"),A1)-1,"}[0-9]I"),""),"[0-9]I"))-1))) 
```

# for-loop - RaphaelJS 使用带间隔的 for 循环创建矩形

> ID：13915612
> 
> 赞同：1
> 
> 时间：2012-12-17T14:02:28.917
> 
> 标签：for-loop, raphael, intervals

[**小提琴 1**](http://jsfiddle.net/dYRR2/1/)

在这个小提琴中，我使用 for 循环在单行上创建了 5 个矩形形状。此外，我还设置了每次迭代之间的间隔，以便它们不是直接一起显示 5 个矩形，而是由一个小间隔一个接一个地显示。这是我的解决方案的一部分。它正在按预期工作。现在问题出现在下一部分。

* * *

我真正想做的是创建多行，矩形应该在第一行一个接一个地显示，然后在下一行以相同的方式显示。但是我的代码中有一些错误，因为不是一次显示一个矩形，而是一次显示整列。

这是[**第二小提琴**](http://jsfiddle.net/dYRR2/)

* * *

我希望你明白我想在这里做什么。如何更正代码并获得一个一个显示矩形然后前进到下一行的所需结果？

* * *

```
for (var i = 0; i < 3 ; i++) {
    for (var j = 0; j < 5; j++) {
        window.setTimeout(
        (function (i,j){ 
            return function() {
                var box = paper.rect(j*100,i*50,100,50);
                box.attr({fill:'yellow'});
            }
        })(i,j),j * 500)
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T14:28:13.510

我认为这可以解决您的问题：

```
window.onload = function() {

    var ROWS = 3,
        COLS = 5;                

    function drawGrid(paper) {
        for (var i = 0; i < ROWS; i += 1) {
            drawRow(i, paper);
        }
    }

    function drawRow(row, paper) {
        for (var i = 0; i < COLS; i += 1) {
            drawRect(row, i, paper);
        }
    }

    function drawRect(row, col, paper) {
        setTimeout(function () {
            var box = paper.rect(col*100,row*50,100,50);
            box.attr({fill:'yellow'});
        }, (row * COLS * 1000) + (col * 1000));
    }

    drawGrid(Raphael(0, 0, 1920, 1000));
} 
```

​​我只是做了一点重构，根据当前的列和行计算超时。

这是小提琴：http: [//jsfiddle.net/dYRR2/6/](http://jsfiddle.net/dYRR2/6/)

换句话说，超时应该是`i * 500 * 5 + j * 500`而不是`j * 500`。

# php - 通过 XPath 提取 HTML 字段

> ID：13915614
> 
> 赞同：2
> 
> 时间：2012-12-17T14:02:36.377
> 
> 标签：php, dom, xpath, simplexml

我有这个查询，它提取了被“喜欢”超过 5 次的帖子。

```
//div[@class="pin"]
[.//span[@class = "LikesCount"]
[substring-before(normalize-space(text())," ") > 5] 
```

我想提取和存储附加信息，例如标题、img url、编号、repin 编号、...

**如何将它们全部提取出来？**

*   多个 XPath 查询？
*   在使用 php 和 php 函数进行迭代时挖掘结果帖子的节点？
*   ...

遵循标记示例：

```
<div class="pin">

<p class="description">gorgeous couch <a href="#">#modern</a></p>

[...]

<div class="PinHolder">
<a href="/pin/56787645270909880/" class="PinImage ImgLink">
    <img src="http://media-cache-ec3.pinterest.com/upload/56787645270909880_d7AaHYHA_b.jpg" 
         alt="Krizia" 
         data-componenttype="MODAL_PIN" 
         class="PinImageImg" 
         style="height: 288px;">
</a>
</div>

<p class="stats colorless">
    <span class="LikesCount"> 
        22 likes 
    </span>
    <span class="RepinsCount">
        6 repins
    </span>
</p>

[...]

</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T14:18:56.943

由于您已经在代码中使用 XPath，我建议您也使用 XPath 提取该信息。这是一个关于如何提取描述的示例。

```
<?php 

// will store the posts as assoc arrays
$mostLikedPostsArr = array();

// call your fictional load function
$doc = load_html('whatever');

// create a XPath selector
$selector = new DOMXPath($doc);

// this your query from above
$query = '//div[@class="pin"][.//span[@class = "LikesCount"][substring-before(normalize-space(text())," ") > 5]';

// getting the most liked posts
$mostLikedPosts = $selector->query($query);

// now iterate through the post nodes
foreach($mostLikedPosts as $post) {

    // assoc array for a post
    $postArr = array();

    // you can do 'relative' queries once having a reference to $post
    // note $post as the second parameter to $selector->query()

    // lets extract the description for example
    $result = $selector->query('p[@class = "description"]', $post);
    // just using nodeValue might be ok for text only nodes.
    // to properly flatten the <a> tags inside the descriptions 
    // it will take further attention.
    $postArr['description'] = $result->item(0)->nodeValue;

    // ...

    $mostLikedPostsArr []= $postArr;
} 
```

# web-services - Web 服务不支持的参数

> ID：13915621
> 
> 赞同：0
> 
> 时间：2012-12-17T14:03:04.763
> 
> 标签：web-services, rest, language-agnostic

我想和你一起验证一个观点。

我必须设计一个 Web 服务，该服务可以搜索与给定地址周围特定国家的折扣计划相关的餐厅数据库。对此类 Web 服务的 REST 调用如下所示`http://server/search?country=<countryCode>&language=<languageCode>&address=<address>&zipcode=<zipcode>`

问题是某些国家/地区没有邮政编码或在整个国家/地区都没有邮政编码。

现在，如果用户为一个没有邮政编码的国家/地区传递了这样的参数，但他/她传递了一个有效的地址，你会怎么做？

1.  返回 400 错误请求。
2.  只需igonre zipcode参数并根据有效地址返回结果
3.  以特定格式（例如 JSON）返回一条错误消息，说明该国家/地区不支持邮政编码

一些同事也赞成以下选项 4。简单地不返回结果。并在文档中声明不支持 zipcode 参数。我们还必须创建一个 webservice 方法，它返回应该在用户界面中显示的字段。

你认为哪个选项最好，为什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T14:10:32.387

好吧，即使您不知道邮政编码，OpenStreetMap 提名服务器也会返回结果，并且无论如何您都可以查看结果。如果用户不知道邮政编码但想查找历史对象怎么办？无论如何，我都会尝试搜索该特定对象，尤其是因为您说某些国家/地区有部分邮政编码。

如果您只是不返回任何内容，那么用户不知道出了什么问题，他也不知道该怎么做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T14:16:25.023

这将取决于用例。API 的用户触发这种情况有多容易？这是一个用户真的应该知道如何避免的严重错误吗？还是不是完全清楚，用户可能知道（或认为他知道）一个官方不应该有的邮政编码？用户如何从您的 API 中检索正确的结果是否归结为反复试验？用户需要被告知并且他需要自己处理这个错误是否足够糟糕？

如果您在 API 中设置此限制，请考虑在触发此案例时必须清楚地记录它，API 的每个用户都必须阅读并理解该文档，需要明确如何避免该问题，它用户需要有可能避免该问题，并且每个用户都必须在他身边正确实现额外的代码以避免此问题。用户是否可以轻松知道哪些区域有邮政编码，哪些没有？

我认为“接受的要灵活，输出要严格”的口号适用......

# opencl - CPU 上的输入数据超过 GPU 上的全局内存

> ID：13915622
> 
> 赞同：-1
> 
> 时间：2012-12-17T14:03:09.263
> 
> 标签：opencl

如果 CPU 上的输入数据超过 GPU 的全局内存，那么如何处理？在 OpenCL 中，如果 inputdata 大小大于 GPU 上的全局内存，而不是我们可以编写的代码或在 opencl 中在哪里编写代码？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T14:14:26.840

你用更小的补丁来计算它。在 CPU 上，您进行划分并将划分（补丁）发送到 GPU，然后获取结果并将它们连接起来以获得所有答案。

# c# - 在 Wcf RoutingService 上设置 OperationTimeout

> ID：13915623
> 
> 赞同：3
> 
> 时间：2012-12-17T14:03:16.987
> 
> 标签：c#, .net, wcf, wcf-routing

我正在努力在[RoutingService上设置 OperationTimeout](http://msdn.microsoft.com/en-us/library/ee517422.aspx)

问题是消息转发到的服务需要超过 1 分钟才能做出响应。这会导致 RoutingService 上出现 OperationTimeout 异常。

我试图在 RoutingService 的客户端代理上设置 OperationTimeout，但没有成功。

我所做的是添加一个端点行为并在 ApplyClientBehavior 方法中添加一个自定义 IClientMessageInspector。

在自定义 ClientMessageInspector 中，我设置了 OperationTimeout，就像您在此代码片段中看到的那样。

```
 public object BeforeSendRequest(ref Message request, IClientChannel channel)
    {
        var contextChannel = channel as IContextChannel;
        contextChannel.OperationTimeout = new TimeSpan(0, 10, 0);

        return request;
    } 
```

对我来说，此时我似乎为时已晚，因此 RoutingService 生成的代理并不关心这个设置，可能是这样吗？

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T14:22:01.653

在 web.config 中设置 SendTimeout 在下面

```
<binding name="myBindingName" sendTimeout="00:10:00"
                 closeTimeout="00:10:00" openTimeout="00:10:00" receiveTimeout="00:10:00" 
                 maxBufferSize="2147483647"
                 maxBufferPoolSize="2147483647"
                 maxReceivedMessageSize="2147483647"
                 crossDomainScriptAccessEnabled="true" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T10:13:57.710

我找到了如何解决这个问题的解决方案。

您只需要在路由器的客户端端点的绑定上设置 SendTimeout。创建代理时，路由器将在其通道上设置 OperationTimeout=SendTimeout。

```
 // add the endpoint the router uses to receive messages
            serviceHost.AddServiceEndpoint(
                 typeof(IRequestReplyRouter),
                 new BasicHttpBinding(), 
                 "http://localhost:8000/routingservice/router");

            // create the client endpoint the router routes messages to
            var client = new ServiceEndpoint(
                                            ContractDescription.GetContract(typeof(IRequestReplyRouter)), 
                                            new NetTcpBinding(),
                                            new EndpointAddress("net.tcp://localhost:8008/MyBackendService.svc"));

            // Set SendTimeout, this will be used from the router generated proxy as OperationTimeout
            client.Binding.SendTimeout = new TimeSpan(0, 10, 0); 
```

# internet-explorer - 如何调试 ActiveX 控件的加载

> ID：13915629
> 
> 赞同：0
> 
> 时间：2012-12-17T14:03:36.467
> 
> 标签：internet-explorer, vb6, activex

我有一个非常特殊和具体的案例。我开发了一个基于 VB6 的 ActiveX 控件，我需要在另一个控件上工作。

开发机器是 Windows Server 2003，“生产”机器是 Windows 7 Prof.

现在，当我在 CAB 中通过 ActiveX 打包并在开发机器上运行“演示”HTM 文件时，一切正常。

但是，一旦我将所有内容复制到我的生产机器上，并打开相同的 HTM 文件（在 ActiveX 安全警告上单击确定并“安装”CAB 后），什么也没有发生（它实际上应该打开一个消息框）。

我该如何调试呢？很明显，浏览器确实找到了 CAB，否则它甚至不知道要安装什么。但是，它似乎没有正确触发。

我的问题不是我不知道如何处理错误，而是*这些错误在*哪里？是否有任何我不知道的“Internet Explorer 日志文件”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T09:20:47.167

经过更多研究，我发现了错误。由于我对 64 位等的热情，我将 64 位版本的 IE 设为我的默认设置，结果我总是在那个浏览器上使用我的 ActiveX 加载演示页面。

据我所知，[这行不通](https://superuser.com/questions/443954/vb6-ocx-not-working-in-window-7-64bit-ie)，因为 VB6 只能编译为 32 位。

加载 32 位版本的页面表明 ActiveX 可以正常加载和运行。

对困惑感到抱歉。我倾向于忘记 64 位是我的默认设置，显然，旧语言并不总是适用于此。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-17T14:24:40.650

您有系统日志 Windows Logs->System 并查找 AxInstSV。看看有什么要说的。您也可以使用进程监视器（PROcMon）来查看启动的内容。我假设您已经检查过 vb6 exe 是否在 windows7 机器上工作。

vanilla win7 不会运行 VB6 它缺少 VB 的运行时文件

# php - 在 .htaccess 中隐藏扩展名并用斜杠替换问号

> ID：13915631
> 
> 赞同：1
> 
> 时间：2012-12-17T14:03:43.657
> 
> 标签：php, .htaccess

我有一个问题，即假设 url 是 www.example.com/view.php?id=1 但我希望 url 像 www.example.com/view/id/1 一样，另外我得到 htaccess 用于隐藏扩展或代替 '？' 通过斜线但两者都不起作用请任何人帮助我。我希望 .htaccess 对两者都有效（扩展隐藏和替换斜线）并请说明 htaccess 适用于任何页面而不是任何特定页面。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T18:24:02.957

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

# external redirect from /view.php?id=1 to /view/id/1
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/+([^.]+)\.php\?([^=]+)=([^\s&]+) [NC]
RewriteRule ^ /%1/%2/%3? [L,R=301]

# internal forward from /view/id/1 to /view.php?id=1
RewriteRule ^([^/]+)/([^/]+)/([^/]+)/?$ /$1.php?$2=$3 [L,QSA] 
```

# opengl - OpenGL：GL_REPEAT 和 GL_CLAMP_TO_EDGE

> ID：13915632
> 
> 赞同：1
> 
> 时间：2012-12-17T14:03:48.667
> 
> 标签：opengl

我正在使用 OGL 3.2 开发我的游戏项目，我正在使用`GL_REPEAT`纹理参数通过定义大于 (1;1) 的 ST 坐标来非常快速地设置我的地形。但是现在，当我添加了天空盒时，天空盒纹理之间的边缘看起来非常粗糙，我不希望它们如此。我可以通过使用参数来移除它们`GL_CLAMP_TO_EDGE`，但是如果没有参数，地形纹理会呈现错误`GL_REPEAT`。`GL_REPEAT`所以我必须在和之间做出选择`GL_CLAMP_TO_EDGE`。如果我切换到它，`GL_CLAMP_TO_EDGE`我将无法使用`GL_REPEAT`优势，并且必须将我的地形划分为更小的块并为每个块提供纹理，这（在我看来）非常低效，尤其是当我想要大尺寸的地图时。

有没有什么方法可以同时利用这两个优点，`GL_REPEAT`或者`GL_CLAMP_TO_EDGE`也许有一些更棒的方法来解决这个我不知道的问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T14:12:03.433

您可以同时使用两者。纹理环绕模式存储在每个纹理的基础上，因此`GL_REPEAT`请用于您的地面纹理和`GL_CLAMP_TO_EDGE`天空纹理。

在上传纹理图像之后（或之前，只要纹理被绑定）立即为每个纹理设置它。

# build - 使用 msbuild 指定解决方案的项目文件

> ID：13915636
> 
> 赞同：131
> 
> 时间：2012-12-17T14:03:57.440
> 
> 标签：build, tfs, msbuild, release, devenv

我想要使​​用 msbuild 构建解决方案的特定项目的命令行，就像我们对 devenv.com 所做的那样。在 devenv.com 中，我们可以使用以下命令行指定解决方案的项目

```
devenv.com /Build Release|x86 test.sln /project "testproject" 
```

使用上面的命令行，我可以使用 devenv.com 在 test.sln 中构建 testproject。相同解决方案的 msbuild 命令行是什么。

谢谢

* * *

## 回答 #1

> 赞同：227
> 
> 时间：2013-10-23T06:29:19.170

```
msbuild test.sln /t:project /p:Configuration="Release" /p:Platform="x86" /p:BuildProjectReferences=false 
```

请注意，分配给`/t`解决方案中的项目名称，它可以与项目文件名不同。

此外，如[如何：使用 MSBuild.exe 在解决方案中构建特定目标中](https://docs.microsoft.com/en-us/visualstudio/msbuild/how-to-build-specific-targets-in-solutions-by-using-msbuild-exe?view=vs-2019)所述：

> 如果项目名称包含任何字符`%`, `$`, `@`, `;`, `.`, `(`, `)`, 或`'`，请将它们替换`_`为指定目标名称中的 。

您还可以一次构建多个项目：

```
msbuild test.sln /t:project;project2 /p:Configuration="Release" /p:Platform="x86" /p:BuildProjectReferences=false 
```

要重建或清理，更改`/t:project`为`/t:project:clean`或`/t:project:rebuild`

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-12-19T15:22:40.847

MSBuild 实际上是通过使用项目而不是解决方案来工作的。该解决方案仅用于在内部将其解析为 MSBuild 中的临时项目文件。您应该能够通过执行以下命令直接通过 MSBuild 构建感兴趣的项目。

```
"msbuild testproject /p:Configuration=Release /p:Platform=x86" 
```

我知道你可能会遇到一个主要问题直接使用项目而不是解决方案：如果你使用解决方案来表达项目之间的依赖关系，而不是添加对项目的引用并让构建系统自动计算依赖关系.

如果您使用 sln 文件强制执行构建顺序，我建议将这些依赖项直接处理到 proj 文件中并将它们从 sln.xml 中删除。这将允许您直接从 MSBuild 调用任何 proj 文件，并且项目将全部独立构建而无需任何额外工作。您确实应该将 sln 文件视为一组项目，以使在 Visual Studio 中的工作更容易，而不是作为构建输入。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-11-02T05:12:41.703

作为信息发布给未来的求职者

将以下内容添加到构建脚本并运行一次。这将生成 msbuild 实际使用的确切目标和其他信息。

例如：如果您`.`在项目名称或文件夹中有 msbuild 将`_`代替`.`.

```
set MSBuildEmitSolution=1 
```

获取信息后，使用所需的详细信息更新构建脚本。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-03-26T22:10:32.067

为此，您需要知道项目的***目标名称***是什么，而不一定是项目名称。

找出这一点的一种方法是在将一个特殊的环境变量设置`MSBuildEmitSolution`为`1`.

```
set MSBuildEmitSolution=1
msbuild my_stuff.sln /t:rebuild /p:Configuration=Release /p:Platform=x64 
```

由于嵌套目录中的目标名称非常具体，我最近不得不这样做。所以从我生成的文件中，`my_stuff.sln.metaproj`我找到了这一行：

`<Target Name="Utils\Firewall\FirewallUtils:Rebuild">`

这意味着要使用的命令行最终是，

```
msbuild my_stuff.sln /t:Utils\Firewall\FirewallUtils:Rebuild /p:Configuration=Release /p:Platform=x64 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-03-19T19:16:30.307

只是为了添加更多信息，在项目文件夹中执行 msbuild 将默认构建项目文件，因为它是那里唯一的一个。

```
>msbuild 
```

以这种方式使用 msbuild 有很多变体。您可以直接指定 proj 文件。

```
>msbuild helloworld.csproj -t:Build. 
```

查看 msbuild 文档以了解用法、项目文件要求以及构建项目而不是解决方案的好处。

[MS MSBuild 文档](https://docs.microsoft.com/en-us/visualstudio/msbuild/walkthrough-creating-an-msbuild-project-file-from-scratch?view=vs-2017)

正如上面的 mark-smith 所提到的，以这种方式构建是有好处的。

# objective-c - 动画标签栏

> ID：13915637
> 
> 赞同：0
> 
> 时间：2012-12-17T14:04:01.540
> 
> 标签：objective-c, ios

我正在按照本[指南](http://www.icodeblog.com/2009/07/24/iphone-programming-tutorial-animating-a-game-sprite/)为我的应用程序创建一些动画，并考虑在我的标签栏上编写一个非常轻巧且不会分散注意力的动画。我搜索了苹果指南，但没有看到任何反对它的内容，但是，我认为我从未见过一个应用程序做类似的事情。那是因为它是不允许的还是我失踪的另一个原因？有人知道做类似事情的应用程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T15:44:23.200

我正在为我的应用程序中的标签栏使用简单的滑入/滑出效果。

审查中没有问题。

我正在使用的代码位于[https://stackoverflow.com/a/5272497/725594](https://stackoverflow.com/a/5272497/725594)

# java - 使用 BufferedImage 在 Canvas 上绘制像素不填充整个 Canvas

> ID：13915641
> 
> 赞同：0
> 
> 时间：2012-12-17T14:04:07.733
> 
> 标签：java

我正在尝试使用 BufferedImage 在画布上绘制像素。在我的 Canvas 构造函数中，我正在初始化图像和像素数组，如下所示：

```
public MyCanvas() {
    Dimension size = new Dimension(WIDTH, HEIGHT);
    setSize(size);
    setPreferredSize(size);
    setMinimumSize(size);
    setMaximumSize(size);

    image = new BufferedImage(WIDTH, HEIGHT, BufferedImage.TYPE_INT_RGB);
    pixels = ((DataBufferInt) img.getRaster().getDataBuffer()).getData();
} 
```

我通过以下方式绘制每个渲染：

```
private void render() {
    BufferStrategy bs = getBufferStrategy();
    if (bs == null) {
        createBufferStrategy(3);
        return;
    }

    for (int i = 0; i < pixels.length; i++) {
        pixels[i] = 0xFFFFFF;
    }

    Graphics g = bs.getDrawGraphics();
    g.fillRect(0, 0, getWidth(), getHeight());
    g.drawImage(img, 0, 0, WIDTH, HEIGHT, null);
    g.dispose();
    bs.show();
} 
```

我期待我的画布充满了白色像素，但我在白色区域的右侧和底部得到了黑色边框，即它似乎没有填满我的整个画布，或者它有一些负偏移。我检查了像素数组的长度是 WIDTH * HEIGHT。我将画布放入 JFrame 中带有 BorderLayout.CENTER 的 JPanel 中。

编辑：

改变

```
g.drawImage(img, 0, 0, WIDTH, HEIGHT, null); 
```

至

```
g.drawImage(img, 0, 0, getWidth(), getHeight(), null); 
```

让它做我所期望的。但是我不明白为什么当我自己设置尺寸（宽度，高度）时我必须获取画布尺寸，而且它似乎与我给它的尺寸不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T14:50:28.177

我看不到您在哪里设置矩形填充的颜色。

尝试这个：

```
Graphics g = bs.getDrawGraphics();
// g.setColor(Color.WHITE);
// g.fillRect(0, 0, getWidth(), getHeight());
g.drawImage(img, 0, 0, getWidth(), getHeight(), null);
g.dispose();
bs.show(); 
```

# libusb - 使用 pyusb 发送十六进制代码

> ID：13915642
> 
> 赞同：-1
> 
> 时间：2012-12-17T14:04:06.793
> 
> 标签：libusb, pyusb

我已经尝试了 4 天，将十六进制代码发送`10 80 00 00 00 00 00 00`到连接到我运行 debian 的树莓派的 USB 设备。

我用 c 试过 libusb，但我不知道我在做什么。我认为 PyUSB 会是一个更好的解决方案，但我发现我需要的文档为零，而且教程没有帮助。

我可以找到使用的设备

```
import usb.core
dev = usb.core.find(idVendor=0x12BF, idProduct=0xFF03) 
```

但我找不到有关如何发送上述十六进制代码的任何信息。我的设备是一个基于 USB 的继电器。它在 vb HID 应用程序中的 Windows 上运行良好，但我在这里苦苦挣扎。似乎在兜圈子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:12:29.020

您能否告诉我们，USB 与设备的通信如何？是批量转账吗？（有关详细信息，请参阅此链接： [http](http://www.beyondlogic.org/usbnutshell/usb1.shtml) ://www.beyondlogic.org/usbnutshell/usb1.shtml ）

例如，如果您通过端点使用批量通信，您可以尝试这样的事情（如此处所示[http://pyusb.sourceforge.net/docs/1.0/tutorial.html](http://pyusb.sourceforge.net/docs/1.0/tutorial.html)）：

```
endpoint.write(endpointnumber, data, interfacenumber) 
```

如果您想发送一个十六进制值，假设通过端点 2、接口 0 发送 0xFF，请尝试以下操作：

```
endpoint.write(2, '\xFF', 0) 
```

我希望这有帮助...

# windows - BTRS31753 在用户代理 (IE8) 中是什么意思

> ID：13915643
> 
> 赞同：1
> 
> 时间：2012-12-17T14:04:08.713
> 
> 标签：windows, internet-explorer-8, user-agent

为了重现我们的一个用户正在经历的一个晦涩的错误（至少是一个），我试图弄清楚是什么

```
BTRS31753 
```

代表用户代理。这是完整的 UA 字符串：

```
Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.1; Trident/4.0; BTRS31753; GTB7.4; .NET CLR 1.1.4322; .NET CLR 2.0.50727; FREE; .NET CLR 3.0.4506.2152 
```

我已经设法安装了 Google 工具栏和所有 .NET 框架版本，但我仍然无法重现该错误或弄清楚“BTRS31753”代表什么......

如果这有帮助，用户在 IE8/WinXp 上，他不能使用收音机和复选框。

对于完全受支持的浏览器（IE9+、FF、Chrome、Safari），单选框和复选框具有自定义设计，在 IE8 中回退到正常输入，并且在选择器失败时更少。可能是由于某些插件或其他原因未添加条件主体类，因此未应用回退。

我希望有人知道或可以弄清楚这点来自哪里，这样我就可以测试并重现错误或继续进行更好更大的事情（例如 IE10 错误 -_-"）

谢谢 ：）

# c# - 如何在c#中访问字符串的一部分并将其放回去？

> ID：13915645
> 
> 赞同：2
> 
> 时间：2012-12-17T14:04:16.080
> 
> 标签：c#, string

我想从以下字符串中访问字体系列名称，然后在对我想放回的名称应用过滤器之后。这是我的字符串：

> 字体大小：36 像素；字体样式：正常；字体变体：正常；字体粗细：600；字体拉伸：正常；文本对齐：居中；行高：125%；字母间距：0 像素；字-spacing:0px;writing-mode:lr-tb;text-anchor:middle;fill:#6b055f;fill-opacity:1;stroke:none;font-family:Abel;-inkscape-font-specification:'Abel,半粗体'

我怎么能在 c# 中做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T14:06:41.313

您可以使用[`String`](http://msdn.microsoft.com/en-us/library/system.string.aspx)该类，它公开了您需要破解它的所有方法。例如，用于[`String.IndexOf`](http://msdn.microsoft.com/en-us/library/system.string.indexof.aspx)查找字符或字符串的索引，并[`String.Substring`](http://msdn.microsoft.com/en-us/library/system.string.substring.aspx)提取，则可以使用[`String.Replace`](http://msdn.microsoft.com/en-us/library/system.string.replace.aspx).

这应该足以开始，如果您有与问题相关的特定问题，请提出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T14:10:07.533

您可以使用[`Regex.Replace`](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.replace.aspx)：

```
string test = "stroke:none;font-family:Abel;-inkscape-font-specification:'Bickham Script Pro Semibold, Semi-Bold'";

// search for the font style
Regex rex = new Regex(";font-family:.*;");

// replace the font with a new font
string newString = rex.Replace(test,";font=famliy:Arial;"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T14:15:33.480

我会使用 ASP.NET 的强大功能，而不是自己解析字符串。为什么要重新发明轮子？

```
string style = "font-size:36px;font-style:normal;font-variant:normal;font-weight:600;font-stretch:normal;text-align:center;line-height:125%;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:middle;fill:#6b055f;fill-opacity:1;stroke:none;font-family:Abel;-inkscape-font-specification:'Abel, Semi-Bold'";
System.Web.UI.WebControls.Label label = new System.Web.UI.WebControls.Label();
label.Style.Value = style;
label.Style["font-family"] = "Verdana";
style = label.Style.Value;
label.Dispose(); 
```

这也适用于 WinForms，您只需添加对 System.Web 程序集的引用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T14:20:33.773

你可以这样做：

```
public static class CssStyle
{
    public static string Update(string style, string key, string value)
    {
        var parts = style.Split(';');

        for (int i = 0; i < parts.Length; i++)
        {
            if (parts[i].StartsWith(key))
            {
                parts[i] = key + ":" + value;
                break;
            }
        }

        return string.Join(";", parts);
    }
} 
```

这将允许您拥有一个可以更新样式的任何部分的通用函数。如果样式尚不存在，您也可以扩展它以*添加样式。*

# php - 在一个 Ajax 调用仍在运行时进行多个 Ajax 调用

> ID：13915653
> 
> 赞同：0
> 
> 时间：2012-12-17T14:04:53.587
> 
> 标签：php, jquery, ajax, simultaneous-calls

我有一些进度条更新问题。我喜欢做的是，触发一个需要一些时间才能完成的 ajax 调用，在此调用期间，我想触发由间隔设置的 ajax 调用，以更新我的进度条。

由于我找不到解决方案，只找到了浏览器的限制，这将在这里匹配。它总是最多 2 个呼叫处于活动状态。

尽管如此，我的第二个电话仍然在 Google Chrome 中等待处理，直到我的第一个（主要）电话完成。

编辑：完整的 jquery 脚本

```
// update cars cache
$('#cars_cache_update_run').bind('click', function(){
    // remove button
    $(this).remove();

    // hide import widgets
    $('#products_import_widget').css('display', 'none');
    $('#vehicles_import_widget').css('display', 'none');
    $('#orders_import_widget').css('display', 'none');
    $('#test_data_widget').css('display', 'none');

    // show blind
    $('#cars_cache_update_info').css('display', 'none');
    $('#cars_cache_update_blind').css('display', 'inline');

    var carsUpdateInterval = setInterval(function() {
        getImportState('http://localhost/index.php/import/import_state/cache_update', 'cars_import_progressbar');
    }, 1000);
    // ajax request
    $.ajax({
        url: "http://localhost/index.php/import/cars_cache",
        async : true,
        success: function(data){
            $('#cars_cache_update_blind').css('display', 'none');
            $('#cars_cache_update_success').css('display', 'inline');
            clearInterval(carsUpdateInterval);

        },
        error: function(thrownError){
            $('#cars_cache_update_blind').css('display', 'none');
            $('#cars_cache_update_error').css('display', 'inline');
            $('#cars_cache_update_error_msg').html(thrownError);
        }
    });
});

function getImportState(url, id)
{
    $.ajax({
        url: url,
        success: function(data){
            var json = $.parseJSON(data);

            $.each(json, function(i, item) {
                var progressbar_value = json[i]['state'];
                $( "#"+id ).progressbar({
                    value: progressbar_value
                });
            })
        }
    });
} 
```

另一个有趣的事情是，如果我通过 $.get 调用间隔请求，我会收到一个奇怪的错误。使用 Codeignitor 框架。

```
GET http://localhost/[object%20Object] 404 (Not Found) jquery.1.7.min.js:4
send jquery.1.7.min.js:4
f.extend.ajax jquery.1.7.min.js:4
f.(anonymous function) jquery.1.7.min.js:4
(anonymous function) 
```

非常感谢您的帮助，现在已经尝试了几个小时.. 也许我只是一个菜鸟.. 哈哈。

无根

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T14:13:04.793

不要间隔调用多个 ajax。尝试这样的事情：

```
function updateProgress(){
    $.ajax({
        url: "http://localhost/index.php/import/import_state/cache_update",
        success: function(data){
            var json = $.parseJSON(data);
            $.each(json, function(i, item) {
                var progressbar_value = json[i]['state'];
                $( "#cars_import_progressbar" ).progressbar({
                    value: progressbar_value
                });
            });
            updateProgress(); // after success, call the same function again
        }
    });
}

updateProgress(); // start updateProgress 
```

希望能帮助到你 ：]

# c# - ASP.NET 即使在调试中也不会调用代码

> ID：13915658
> 
> 赞同：1
> 
> 时间：2012-12-17T14:05:07.370
> 
> 标签：c#, asp.net

正如它所说，当我在调试中运行我的应用程序时，不会调用代码隐藏。

我一开始就遇到了这个问题，并设法通过放弃我正在处理的页面并开始一个全新的页面来解决它。

不过现在这个好像也坏了！

基本上，它只是打开显示未更改的 HTML，而无需运行任何 C# 代码，也不会遇到任何断点。

它构建正常，但我还没有尝试部署它，因为我目前没有可用的服务器。

这是我在 index.aspx.cs 后面的代码：

```
namespace PAPS
{
    public partial class index : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        { 
            string username = User.Identity.Name;
            // check security
            Security security = new Security(username);
            divUsername.InnerText = username;
            security = null;
        }
    }
} 
```

index.aspx 中的页面声明如下：

```
<%@ Page Language="C#" AutoEventWireup="false" EnableSessionState="True" EnableViewState="false" CodeBehind="index.aspx.cs" Inherits="PAPS.index" %> 
```

有人有什么有用的建议吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T14:07:16.687

你有

```
AutoEventWireup = false 
```

除非您自己处理事件，否则请尝试将其设置为 true。

# ios - 在 Cocos2D 中替换场景时共享菜单信息（按钮信息）

> ID：13915661
> 
> 赞同：0
> 
> 时间：2012-12-17T14:05:14.970
> 
> 标签：ios, cocos2d-iphone

为了弄清楚选择了哪个级别，我想将选择的按钮信息共享给替换的场景。我该怎么做？

```
CCLabelBMFont *label = [CCLabelBMFont labelWithString:@"Lavel_2" fntFile:@"font.fnt"];
        CCMenuItemLabel *titem = [CCMenuItemLabel itemWithLabel:label target:self selector:@selector(sceneLoader:)];
        CCMenu *menu = [CCMenu menuWithItems: titem, nil];
        menu.position = ccp(screenSize.width/2, screenSize.height/2);
        [self addChild:menu];

- (void)sceneLoader:(id)sender {
    [[CCDirector sharedDirector] replaceScene: [GameLayer scene]];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T14:14:07.600

标记您的项目，然后将标记设置为您的 GameLayer

像这样的东西......

```
titem.tag = 777;

...

- (void)sceneLoader:(CCNode)sender {
    GameLayer *gameLayer = [GameLayer scene];
    gameLayer.gameLevel = sender.tag;

    [[CCDirector sharedDirector] replaceScene: gameLayer];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T23:18:52.130

为您的场景创建单独的初始化程序。或者至少一个带有枚举：

```
[[GameLayer alloc] initWithButton:kSceneLoaderButton]; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-17T20:50:06.023

对于那种操作，我使用单例

文件.h

```
@interface YourClassName : NSObject
+ (id)sharedInstance;
@property (nonatomic,retain) NSString * selectedLevel; 
```

文件.m

```
@implementation YourClassName
@synthesize selectedLevel;
+ (id)sharedInstance {
    static YourClassName *sharedInstance = nil;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        sharedInstance = [[self alloc] init];
    });
    return sharedInstance;
}

- (id)init
{
    self = [super init];
    if (self) {
        selectedLevel = [NSString string];
    }
    return self;
} 
```

如果你想使用它，只需调用`[[YourClassName sharedInstance] selectedLevel`或设置`[[YourClassName] setSelectedLevel]`

希望对您有所帮助。

# php - Opauth 通过社交网络登录

> ID：13915665
> 
> 赞同：1
> 
> 时间：2012-12-17T14:05:28.087
> 
> 标签：php, facebook, oauth, linkedin

我正在使用[https://github.com/uzyn/opauth](https://github.com/uzyn/opauth) 我总是收到以下错误通知：

**注意**：不要求任何策略。尝试转到[https://mietabhishek.redirectme.net/mobile/za/live在第](https://mietabhishek.redirectme.net/mobile/za/live)**125**行使用**C:\wamp\www\mobile\za\lib\Opauth\Opauth.php**中的 Live 进行身份验证

 **这里的“live”相应地更改为我在 Strategies 中最后提到的名称，假设如果我在 opauth.conf.php 的末尾添加 facebook 的策略，它将显示：

**注意**：不要求任何策略。尝试转到[https://mietabhishek.redirectme.net/mobile/za/facebook在第](https://mietabhishek.redirectme.net/mobile/za/facebook)**125**行的**C:\wamp\www\mobile\za\lib\Opauth\Opauth.php**中使用 Facebook 进行身份验证

 **虽然 opauth 工作得很好，但在 jQuery Mobile 的网站上却出现了问题。而且该错误在生产网站上看起来也不好。

请帮忙，谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T13:58:36.367

由于使用和较旧的库，我遇到了这个问题。不确定，因为这有点旧，但请尝试查看该 github 页面并下载最新的库并重试。对我来说，代码发生了一些变化。****

# iphone - iPhone IBOutlet 在模拟器中响应 3.5" 但在 4" / 设备上没有响应

> ID：13915668
> 
> 赞同：0
> 
> 时间：2012-12-17T14:05:34.400
> 
> 标签：iphone, xcode, interface-builder, uitoolbar, iboutlet

这个很奇怪，我正在为新的 4" iphone 屏幕更新我的最后一个旧应用程序。

我发现带有两个分段控件的底部 uitoolbar 响应 3.5" 模拟器中的用户交互，但是当我在我的 4" 屏幕和模拟器上构建和运行它时没有任何反应。

最重要的是没有视图（实际上我什至在 ViewWillAppear 上添加了 bringSubviewToFront 只是为了确保）

因为它在 3.5 模拟器上响应，所以我知道这不是 IBOutlet 连接问题。

至少我很困惑，有没有人在更新你的应用程序时遇到这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T15:02:52.573

在 中查看您`UIWindow`的边框尺寸`UIApplicationDelegate`，可能是它的尺寸较小（符合 iPhone 4），您需要将其调整为 iPhone 5 的新屏幕尺寸。

也看看这个帖子，可能对你有帮助：

[iPhone 5 (4") 底部工具栏没有响应](https://stackoverflow.com/q/12414817/593709)

# sql - 从一个表中选择所有记录，从另一个表中选择特定记录

> ID：13915672
> 
> 赞同：-1
> 
> 时间：2012-12-17T14:05:42.500
> 
> 标签：sql, ms-access, join

我有三张桌子。

```
Table1(Table1Id, Field1, Field2)
Table2(Table2Id, Table1Id, AuditDate, Field1, Field2)
Table3(Table3Id, Table1Id, AuditDate, Field1, Field2) 
```

我想做的是选择 Table1 中的所有记录和字段，查看 Table2 和 Table3 以查找匹配的 Table1Id，然后从 Table3 中选择具有最新 AuditDate 的记录。我觉得我需要进行这样的查询。

```
SELECT DISTINCT Table1.Table1Id, Table1.Field1, Table1.Field2,
               Table2.Field1, Table2.Field2,
               Table3.Field1, Table3.Field2
FROM (Table1 
INNER JOIN Table2 ON Table1.Table1Id = Table2.Table2Id)
INNER JOIN Table3 ON Table1.Table1Id = Table3.Table3Id
WHERE Table3.AuditDate =
    (SELECT MAX(AuditDate) FROM Table3
     WHERE Table1.Table1Id = Table3.Table3Id) 
```

这个半有效。例如，如果 Table3 中没有任何与 Table1 相关的记录，则不会返回任何内容。我需要确保为 Table1 中的每条记录创建一条记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T14:10:27.257

它应该是这样的查询：

```
SELECT t1.field1..t1.fieldN, t2.field1 ... t2.fieldN, t3.field1 ... t3.fieldN
FROM table1 AS t1
JOIN table2 AS t2 ON t1.id=t2.id
JOIN table3 AS t3 ON t2.id=t3.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T00:02:33.310

听起来您想要原始查询的结果，加上在 Table3（或 Table2）中找不到对应记录的 Table1 中的记录。这可以通过将您`INNER JOIN`的 s替换为`LEFT JOIN`s 并将子句转换为`WHILE`子句来获得`ON`。然后你得到这个查询，即使在其他表中没有找到相应的记录，它也会从 Table1 中返回记录。

```
SELECT DISTINCT Table1.Table1Id, Table1.Field1, Table1.Field2,
               Table2.Field1, Table2.Field2,
               Table3.Field1, Table3.Field2
FROM (Table1 LEFT JOIN Table2
ON Table1.Table1Id = Table2.Table2Id)
LEFT JOIN Table3
ON Table1.Table1Id = Table3.Table3Id
AND Table3.AuditDate =
    (SELECT MAX(AuditDate) FROM Table3
     WHERE Table1.Table1Id = Table3.Table3Id) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T14:13:34.590

这可能会帮助你，

```
select Table1Id,field1,field2 from Table1,Table2,Table3 
    where 
        Table1.Table1Id=Table2.Table2Id and 
        Table1.Table1Id=Table3.Table2Id and 
        Table2.AuditDate=Table3.AuditDate 
    group by Table1Id,field1,field2 
    having Table2.AuditDate = (
        Select max(AuditDate) from Table1,Table2,Table3 
            where  
                Table1.Table1Id=Table2.Table2Id and 
                Table1.Table1Id=Table3.Table2Id and  
                Table2.AuditDate=Table3.AuditDate 
            group by Table2.AuditDate
    ); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-17T14:10:52.013

尝试

```
SELECT * FROM Table1 AS T1
    JOIN Table2 AS T2 ON T1.Table1Id = T2.Table1Id 
    JOIN Table3 AS T3 ON T1.Table1Id = T3.Table1Id 
    GROUP BY T2.AuditDate 
```

# c# - 自定义随机枚举？

> ID：13915676
> 
> 赞同：4
> 
> 时间：2012-12-17T14:06:08.353
> 
> 标签：c#, random, ienumerable

我有一个类`Rectangle`，它有一个在其中`RandomPoint`返回随机点的方法。看起来像：

```
class Rectangle {
    int W,H;
    Random rnd = new Random();

    public Point RandomPoint() {
        return new Point(rnd.NextDouble() * W, rnd.NextDouble() * H);
    }
} 
```

但我希望它是一个`IEnumerable<Point>`，以便我可以使用`LINQ`它，例如`rect.RandomPoint().Take(10)`.

如何简洁地实现它？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-17T14:08:39.740

您可以使用迭代器块：

```
class Rectangle
{
    public int Width { get; private set; }
    public int Height { get; private set; }

    public Rectangle(int width, int height)
    {
        this.Width = width;
        this.Height = height;
    }

    public IEnumerable<Point> RandomPoints(Random rnd)
    {
        while (true)
        {
            yield return new Point(rnd.NextDouble() * Width,
                                   rnd.NextDouble() * Height);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-17T14:08:41.263

```
IEnumerable<Point> RandomPoint(int W, int H)
{
    Random rnd = new Random();
    while (true)
        yield return new Point(rnd.Next(0,W+1),rnd.Next(0,H+1));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T14:09:17.037

`yield`可能是一种选择；

```
public IEnumerable<Point> RandomPoint() {
    while (true)
    {
        yield return new Point(rnd.NextDouble() * W, rnd.NextDouble() * H);
    } 
```

# cordova - PhoneGap - 在设备上快速部署和测试

> ID：13915678
> 
> 赞同：2
> 
> 时间：2012-12-17T14:06:32.233
> 
> 标签：cordova

我目前正在使用 PhoneGap 开发一个应用程序，我遇到了以下情况：

*   我想在编写代码的地方有快速的步骤，然后在设备上执行它。

当前使用水合作用的解决方案大约需要 2-3 分钟来部署一个小（但很重要）的更改。这需要太长时间:(对我来说。

还有其他可以使用的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T23:04:30.137

1.  使用您需要的任何插件/本机代码将您的 PhoneGap 应用程序部署到您的设备。

2.  使用 js/html 在您的开发机器上设置一个网络服务器，因为您希望它在您的 PhoneGap 应用程序中运行。

3.  确保开发机和手机在同一个网络。

4.  在 Mac 上使用 Safari 获取远程调试会话并将您的 WebView 指向网络服务器： `window.location = 'http://192.168.0.100/app/index.html';` URL 应该指向您的开发机器的 IP 和您的应用程序的位置，当然。（确保`*`在您的外部主机配置中有一个通配符）

5.  一旦您想测试您的更改，只需再次启动远程调试器并执行以下操作： `window.reload(true);`

如果您希望我更详细地描述一些步骤，请询问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T22:42:18.047

构建您的应用程序，使其大部分功能不需要 phonegap 插件。在您需要使用本机代码的地方，请包含适用于桌面浏览器的后备。

这样你就可以在 chrome 中进行大部分调试，快速刷新和一整套用于 html 和 css 调整的开发人员工具。设置你的应用程序设计需要更多的思考，但是能够在 3 秒而不是 10 分钟内运行应用程序是生产力的巨大差异。

我使用的模式是为每个平台设置替代功能：

```
app.someFunction = {}

app.someFunction.cordova = function() {
    // plugin call here
    }
app.someFunction.web = function() {
    // return some test data
    }

app.someFunction[app.platform](); 
```

# windows-8 - PsExec Windows 8 访问被拒绝

> ID：13915684
> 
> 赞同：9
> 
> 时间：2012-12-17T14:06:53.013
> 
> 标签：windows-8, psexec

我有 8 台运行 Windows 8（基本版）的计算机，我正在尝试使用批处理脚本在每台计算机上运行一些应用程序。

我试过了：

```
PsExec.exe -i -d -u USER -p PASSWD \\PCNAME explorer.exe 
```

但它给了我：

```
PsExec v1.98 - Execute processes remotely
Copyright (C) 2001-2010 Mark Russinovich
Sysinternals - www.sysinternals.com

Couldn't access GATE1:
Access is denied. 
```

它在其他装有 Windows 7 Professional 的 PC 上运行良好。

它仅适用于专业版吗？如果是这样，有没有办法可以在 Win 8 上远程运行某些东西？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-13T13:55:19.900

我在 Windows 8 Pro 64 位目标机器上解决了相同的 PsExec“访问被拒绝”错误，并在目标机器上进行了以下注册表修改：

注册表位置：HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\Policies\System

添加 DWORD LocalAccountTokenFilterPolicy

将 LocalAccountTokenFilterPolicy 设置为 1

（重启）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T23:27:20.807

在基于域的环境中，Microsoft PowerShell Remoting 可能是 PsExec 的替代方案。在工作组设置中，尤其是在许多不同版本的 Windows 中，它可能会有点挑战。

PowerShell 远程处理在客户端和服务器上都需要 PowerShell 2.0。

此外，具有所有功能（包括启动远程命令）的 ssh 可以在 Windows 下运行，甚至可以使用免费服务器（freesshd）和客户端（PuTTY 系列）。缺点是需要高权限帐户（通常在某些管理员组中） - 至少对于初始设置。

您日志中的 GATE1 部分很有趣 - PsExec 需要启用所谓的“管理员共享”（不确定它在 Windows 8 中是否有效）。我敢打赌，这不是系统问题，而是网络问题。

# android - Environment.getExternalStorageDirectory().getAbsolutePath() 不工作并提供 /storage

> ID：13915690
> 
> 赞同：4
> 
> 时间：2012-12-17T14:07:14.640
> 
> 标签：android, path, storage, external, android-sdcard

我的代码

```
myDb = openOrCreateDatabase("/sdcard/FashionGirl/ImagesDB.db", Context.MODE_PRIVATE, null);
myDb = openOrCreateDatabase(dbPath, Context.MODE_PRIVATE, null); 
```

工作完美，但发出警告`Do not hardcode "/sdcard/"; use Environment.getExternalStorageDirectory().getPath() instead`

所以我尝试了，

```
String dbPath = Environment.getExternalStorageDirectory().getAbsolutePath() + "FashionGirl/ImagesDB.db";
myDb = openOrCreateDatabase(dbPath, Context.MODE_PRIVATE, null); 
```

但奇怪的是，它不起作用，其中 Environment.getExternalStorageDirectory().getAbsolutePath() 具有价值`/storage`

所以它给出错误，

```
12-17 19:32:02.230: E/SqliteDatabaseCpp(15620): sqlite3_open_v2("/storageFashionGirl/ImagesDB.db", &handle, 6, NULL) failed
12-17 19:32:02.230: E/SQLiteDatabase(15620): Failed to open the database. closing it.
12-17 19:32:02.230: E/SQLiteDatabase(15620): android.database.sqlite.SQLiteCantOpenDatabaseException: unable to open database file
12-17 19:32:02.230: E/SQLiteDatabase(15620):    at android.database.sqlite.SQLiteDatabase.dbopen(Native Method)
12-17 19:32:02.230: E/SQLiteDatabase(15620):    at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:983)
12-17 19:32:02.230: E/SQLiteDatabase(15620):    at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:956)
12-17 19:32:02.230: E/SQLiteDatabase(15620):    at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:932) 
```

那么为什么Android推荐的东西不起作用，我该怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T14:12:10.220

```
String dbPath = Environment.getExternalStorageDirectory().getAbsolutePath() + "FashionGirl/ImagesDB.db";
myDb = openOrCreateDatabase(dbPath, Context.MODE_PRIVATE, null); 
```

请不要使用连接来构建文件路径。尝试：

```
File dbPath = new File(Environment.getExternalStorageDirectory(), "FashionGirl/ImagesDB.db");
myDb = openOrCreateDatabase(dbPath.getAbsolutePath(), Context.MODE_PRIVATE, null); 
```

> 但奇怪的是，它不起作用，其中 Environment.getExternalStorageDirectory().getAbsolutePath() 有值 /storage

那是因为`/sdcard`已经被弃用了将近三年。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T14:10:16.257

在 Fashiongirl 之前添加**/**

```
String dbPath = Environment.getExternalStorageDirectory().getAbsolutePath() + "/FashionGirl/ImagesDB.db"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-21T14:20:03.040

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

listView = (ListView) findViewById(R.id.list);
List<Employee> employees = null;
try {
    XMLPullParserHandler parser = new XMLPullParserHandler();

    File f = new File("/mnt/extsd/kmls/mykml.kml");

    InputStream is = new FileInputStream(f);

            employees = parser.parse(is);

       ArrayAdapter<Employee> adapter = new ArrayAdapter<Employee>     

this,R.layout.list_item, employees);

    listView.setAdapter(adapter);

    } catch (IOException e) {
        e.printStackTrace();
    }
}

Note : "/mnt/extsd/kmls/mykml.kml" this is the complete path to reach my kml fiel.
   for this first you need to open your sdcard in your device then you find the path   
then the path need to insert into your app.

thanks 
```

# java - 在 EntityManager 中执行 JoinTransaction 时发生异常

> ID：13915692
> 
> 赞同：1
> 
> 时间：2012-12-17T14:07:18.930
> 
> 标签：java, hibernate, jpa, seam, entitymanager

我收到异常是 javax.transaction.NotSupportedException

当我将 UserTransaction 加入 entityManager 时，我正在将 jta 事务与 jpa 一起使用，我将收到此异常

示例代码：

```
 @Begin(join=true)
        public String tempCustomerMigration(List<DoTempCustomers>  list) {
            try {
             UserTransaction userTx = (UserTransaction) org.jboss.seam.Component.getInstance("org.jboss.seam.transaction.transaction");
             userTx.setTransactionTimeout(10 * 60);
             userTx.begin();
             for(DoTempCustomers tempCustomers:list){

                TempCustomers temp=new TempCustomers();
                BeanUtils.copyProperties(temp, tempCustomers);
                entityManager.joinTransaction();
                getEntityManager().persist(temp);
                getEntityManager().flush();
                userTx.commit();

                } catch (Exception e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } 
            return "save";

                } 
```

日志：

```
2012-12-17 16:08:24,834 ERROR [STDERR] javax.transaction.NotSupportedException
2012-12-17 16:08:24,836 ERROR [STDERR]  at com.arjuna.ats.internal.jta.transaction.arjunacore.BaseTransaction.begin(BaseTransaction.java:79)
2012-12-17 16:08:24,836 ERROR [STDERR]  at com.arjuna.ats.jbossatx.BaseTransactionManagerDelegate.begin(BaseTransactionManagerDelegate.java:77)
2012-12-17 16:08:24,836 ERROR [STDERR]  at org.jboss.tm.usertx.client.ServerVMClientUserTransaction.begin(ServerVMClientUserTransaction.java:124)
2012-12-17 16:08:24,836 ERROR [STDERR]  at org.jboss.seam.transaction.UTTransaction.begin(UTTransaction.java:39)
2012-12-17 16:08:24,836 ERROR [STDERR]  at com.manam.mobee.migrationCustomerManagement.MigrationCustomerHome.tempCustomerMigration(MigrationCustomerHome.java:253)
2012-12-17 16:08:24,836 ERROR [STDERR]  at com.manam.mobee.migrationCustomerManagement.MigrationCustomerHome.migrateCustomers(MigrationCustomerHome.java:234)
2012-12-17 16:08:24,836 ERROR [STDERR]  at com.manam.mobee.migrationCustomerManagement.MigrationCustomerHome.migrateData(MigrationCustomerHome.java:153)
2012-12-17 16:08:24,836 ERROR [STDERR]  at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
2012-12-17 16:08:24,836 ERROR [STDERR]  at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
2012-12-17 16:08:24,836 ERROR [STDERR]  at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
2012-12-17 16:08:24,836 ERROR [STDERR]  at java.lang.reflect.Method.invoke(Unknown Source)
2012-12-17 16:08:24,836 ERROR [STDERR]  at org.jboss.seam.util.Reflections.invoke(Reflections.java:22)
2012-12-17 16:08:24,836 ERROR [STDERR]  at org.jboss.seam.intercept.RootInvocationContext.proceed(RootInvocationContext.java:32)
2012-12-17 16:08:24,836 ERROR [STDERR]  at org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:56)
2012-12-17 16:08:24,837 ERROR [STDERR]  at org.jboss.seam.transaction.RollbackInterceptor.aroundInvoke(RollbackInterceptor.java:28) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T14:13:33.393

这种异常表示请求无法执行，因为该操作不是受支持的功能。例如，因为不支持嵌套事务，所以当已经与事务关联的调用线程尝试启动新事务时，事务管理器会抛出此异常。当线程已经与一个事务关联并尝试启动第二个事务时，就会发生嵌套事务。

# mercurial - TortoiseHG 到 Bitbucket - TortoiseHg 中的子存储库设置

> ID：13915697
> 
> 赞同：1
> 
> 时间：2012-12-17T14:07:24.860
> 
> 标签：mercurial, tortoisehg, bitbucket

我最初发布了这个问题，发现 Bitbucket 不支持嵌套子存储库（**更正：** Bitbucket 根本不是问题......可能是错误信息或误解了嵌套子存储库的含义）。我不得不将它们安排在 Tortoise 中作为兄弟 Repos。[Mercurial to Bitbucket - Subrepository - Repository is unrelated 错误](https://stackoverflow.com/questions/13886914/mercurial-to-bitbucket-subrepository-repository-is-unrelated-error)

我现在的问题是 TortoiseHg/Mercurial 没有接收到我的子存储库中的更改。

我的目录结构如下所示：（兄弟而不是子文件夹）

```
MainRepo (to hold all subrepos)
SubRepo1 (main project)
SubRepo2 (class library)
SubRepo3 (class library) 
```

ETC...

在我的 .hgsub 文件中，我有以下内容

```
SubRepo1 = ../SubRepo1
SubRepo2 = ../SubRepo2
SubRepo3 = ../SubRepo3 
```

ETC...

我的问题是 MainRepo 没有检测到我的 SubRepo 中的任何更改。我注意到我的每个子存储库的 MainRepo 文件夹中现在都有一个文件夹。我怀疑 TortoiseHg 正在那里寻找变化……而不是我的 ../SubRepoX 文件夹。

谁能指导我到 TortoiseHg 推送到 Bitbucket 的工作 SubRepository 场景

**更新：**请参阅此链接以解决我的 subrepo 问题。[推荐的方式来协调多个依赖的 mercurial 存储库的版本？](https://stackoverflow.com/questions/13934437/recommended-way-to-coordinate-versions-of-multiple-dependent-mercurial-repositor)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T15:55:10.657

subrepo 目录引用应该相对于 .hgsub 文件的位置。

因此，您应该有 = ./SubRepo 而不是 ../SubRepo。

这是[官方文档](https://www.mercurial-scm.org/wiki/Subrepository)。它们不太难读。

# javascript - 向多个元素添加事件监听器

> ID：13915702
> 
> 赞同：11
> 
> 时间：2012-12-17T14:07:39.647
> 
> 标签：javascript, addeventlistener

我已经为此苦苦挣扎了好几个小时了。

我想为`<select>`页面上的所有 s 添加一个事件监听器，到目前为止我已经得到了这段代码：

```
onload = function(e) {
    sels = document.getElementsByTagName('select');
    for(i=0; i<sels.length; i++) {
        sels[i].addEventListener('change', alert('test!'), false);
    }
} 
```

这只在页面加载时触发警报，而不是在我更改我的任何`<select>`s 中的值时触发警报。

请问我可以朝正确的方向轻推吗？:-)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-17T14:09:14.473

`alert()`当您在示例中立即调用函数时，您需要有匿名函数：

```
 ... .addEventListener('change', function() { alert('test!')}, false ... 
```

现在根据您的代码`addEventListener`尝试添加`undefined`（`alert()`函数返回）的结果。

或者您可以为此传递函数处理程序：

```
function alertMe() {
    alert( 'test!' );
}
...

... .addEventListener('change', alertMe, false ... 
```

注意：通过`somefunction(arg[, arg...])`调用你引用的不是函数，而是函数返回的内容。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-17T14:17:29.433

除了将 包装`alert`在一个函数中，如前所述，不要`getElementsByTagName`在循环的每次迭代中使用：

```
onload = function(e) {
    sels = document.getElementsByTagName('select');
    for(i=0; i<sels.length; i++) {
        sels[i].addEventListener('change', function(){alert('test!')}, false);
    }
} 
```

您将`select`元素列表保存到变量中，这不是必需的，更不用说`get`所有这些元素效率低下，每次循环迭代。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-16T03:47:37.000

我创建了以下简单函数，它遍历所有与 匹配的元素`selector`，并为`event`传递的`handler`.

这是 jQuery 的类似功能`$(selector).on(event, handler)`

```
function addEventListeners(selector, event, handler, useCapture){

    useCapture = useCapture || false;

    Array.prototype.forEach.call(
        document.querySelectorAll(selector)
       ,function(el, ix) { 
          el.addEventListener(event, handler, useCapture);
        }
    );
} 
```

所以对于 OP 来说，使用这个函数的方式是这样的：

```
addEventListeners("select", "change", function(evt){ console.log(evt); }); 
```

另请参阅我[对当前和未来元素的事件侦听器的回答](https://stackoverflow.com/a/45705202/968244)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T14:10:55.413

您正在立即执行 alert() 函数，您需要向 addEventListener 函数传递一个函数，因此：

```
onload = function(e) {
    sels = document.getElementsByTagName('select');
    for(i=0; i<sels.length; i++) {
        document.getElementsByTagName('select')[i].addEventListener('change', function () { alert('test!'); }, false);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-10T12:12:38.863

事件冒泡是 javascript 中的重要概念，所以如果你可以直接在 DOM 上添加事件，你可以节省几行代码：

```
document.addEventListener('change', function(e){
  if(e.target.tagName=="SELECT"){
   alert('SELECT CHANGED');
  }
}) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-30T13:24:41.363

我总是推荐委托 - 如果输入在同一个容器中，那么你可以这样做

```
window.addEventListener("load", function() { // on page load
  document  // or a closer static container
    .addEventListener("input", function(e) { // input or change
    const tgt = e.target;
    if (tgt.tagName === "SELECT") {
      const id = tgt.id;
      console.log("You changed", id)
    }
  });
});
```

```
<div id="inputContainer">
  <h1>Change the select</h1>
  <select id="sel1">
    <option value="">Please select</option>
    <option value="1">One</option>
    <option value="2">Two</option>
  </select>
  <select id="sel2">
    <option value="">Please select</option>
    <option value="1">One</option>
    <option value="2">Two</option>
  </select>
</div>
```

# php - 如何为 Gearman 作业设置超时

> ID：13915703
> 
> 赞同：1
> 
> 时间：2012-12-17T14:07:39.457
> 
> 标签：php, gearman

我想为 Gearman 作业设置超时时间。例如，我不希望 gearman 作业运行超过 30 秒，如果作业运行超过 30 秒，则应该停止它并启动下一个作业。

Gearman可以做到这一点吗？（我在 Centos 6.2 上使用 Gearman PHP API）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T14:17:33.580

您正在寻找的是[GearmanWorker::timeout](http://php.net/manual/en/gearmanworker.timeout.php)这是一个[很好的例子](http://www.php.net/gearmanworker.settimeout#refsect1-gearmanworker.settimeout-examples)

```
//Set Timeout
$gmworker->setTimeout(5000);

echo "Waiting for job...\n";

// Start working 
while ( @$gmworker->work() || $gmworker->returnCode() == GEARMAN_TIMEOUT ) {
    if ($gmworker->returnCode() == GEARMAN_TIMEOUT) {
        // Normally one would want to do something useful here ...
        continue;
    }

    if ($gmworker->returnCode() != GEARMAN_SUCCESS) {
        // Somthign failed
        break;
    }
} 
```

# r - 从行中的值计算值

> ID：13915709
> 
> 赞同：0
> 
> 时间：2012-12-17T14:07:54.970
> 
> 标签：r, apply

我有一个数据框 x，其中包含 a 和 b 列。我想要一个新的 c 列，其值为 a/b。我一直在使用

```
x = read.csv(<file>,header=TRUE)
f <- function(...){
x$c = x$a / x$b
}
x = apply(x,1,f) 
```

这弄乱了数据框，所以我认为这是完全错误的。如何访问在给定时刻调用 apply 的行的值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T14:09:31.577

你不需要使用`apply`. 这些操作在向量上工作得很好。

```
x$c <- x$a / x$b 
```

它自己会工作得很好。

欲了解更多信息，请查看`?'/'`。

# soap - SoapUI MockService：作为代理工作

> ID：13915710
> 
> 赞同：4
> 
> 时间：2012-12-17T14:08:07.810
> 
> 标签：soap, groovy, mocking, soapui

我在`MockService`写`SoapUI`。

![在此处输入图像描述](../Images/c4709bb818d473486d7bc319abda5e60.png)

如果节点存在于收到的`SOAP`请求（by ）中，我想通过脚本`XPath`生成响应。`groovy`在其他情况下，我想重定向收到的`SOAP`-Request。我的意思是，我想将收到的`SOAP`-Request 发送给其他`SOAP`-Service（我想通过发送`URL`）。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T09:01:49.017

如果您想使用您`soapUI` `MockService`的代理，请执行以下操作：

![在此处输入图像描述](../Images/157341e011f32bd7905fd8a41801abf0.png)

> 1.  创建占位符作为响应（例如`${responseMessage}`）
> 2.  添加下面打印的脚本

```
def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )

// load JKS (need for https)
def keyStorePath = "keystore.jks"
def keyStorePassword = "keystore_pswd"
def trustStorePath = "truststore.jks"
def trustStorePassword = "truststore_pswd"

def keyStoreFactory = javax.net.ssl.KeyManagerFactory.getInstance("SUNX509")
def trustStoreFactory = javax.net.ssl.TrustManagerFactory.getInstance("SUNX509")
def keyStore = java.security.KeyStore.getInstance("JKS")
def trustStore = java.security.KeyStore.getInstance("JKS")

def keyInput = new FileInputStream(keyStorePath)
keyStore.load(keyInput, keyStorePassword.toCharArray())
keyInput.close()

def trustInput = new FileInputStream(trustStorePath)
trustStore.load(trustInput, trustStorePassword.toCharArray())
trustInput.close()

keyStoreFactory.init(keyStore, keyStorePassword.toCharArray())
trustStoreFactory.init(trustStore)

def sslContext = javax.net.ssl.SSLContext.getInstance("TLS")
sslContext.init(keyStoreFactory.getKeyManagers(), trustStoreFactory.getTrustManagers(), new java.security.SecureRandom())

def sslFactory = sslContext.getSocketFactory()

// Send received request to https://example.org/soap/service
def soapRequest = mockRequest.requestContent
def soapUrl = new URL("https://example.org/soap/service")
def connection = soapUrl.openConnection()

connection.setRequestMethod("POST")
connection.setRequestProperty("Content-Type" ,"text/html")
connection.setRequestProperty("SOAPAction", "")
connection.setSSLSocketFactory(sslFactory)
connection.doOutput = true

Writer writer = new OutputStreamWriter(connection.outputStream);
writer.write(soapRequest)
writer.flush()
writer.close()
connection.connect()

def soapResponse = connection.content.text
def responseXPathHelper = groovyUtils.getXmlHolder(soapResponse)

responseXPathHelper.declareNamespace("envelop", "http://www.w3.org/2003/05/soap-envelope")
responseXPathHelper.declareNamespace("msg", "https://example.org/soap/service")

// Here you can modify condition (Where you want to spoofing)
if ("ExampleResponse".equals(responseXPathHelper["/envelop:Envelope/envelop:Body/*/local-name()"]))    // spoofing
{
    def requestXPathHelper = groovyUtils.getXmlHolder(mockRequest.requestContent)
    requestXPathHelper.declareNamespace("envelop", "http://www.w3.org/2003/05/soap-envelope")

    def messageValue = "spoofed response : " + requestXPathHelper[/envelop:Envelope/envelop:Body/msg:ExampleResponse/text()]

    def responseTemplate = """<S:Envelope xmlns:S="http://www.w3.org/2003/05/soap-envelope">
        <S:Body>
            <ExampleResponse xmlns="https://example.org/soap/service">
                ${messageValue}
            </ExampleResponse>
        </S:Body>
    </S:Envelope>"""

    requestContext.responseMessage = responseTemplate
}
// work as proxy, i.e. just return response recieved from example.org/soap/service
else     requestContext.responseMessage = soapResponse 
```

# php - PHP - **手动**创建 $_FILES 超全局数组

> ID：13915711
> 
> 赞同：3
> 
> 时间：2012-12-17T14:08:22.590
> 
> 标签：php, file-upload

这是参考这个问题 -[需要与 $_FILES 相同的东西，从远程服务器下载使用 php](https://stackoverflow.com/questions/13913661/need-something-that-is-same-as-files-from-remote-server-download-with-php)

在上面的帖子中，OP 基本上想要的是**手动**填充`$_FILES`超全局数组以进行文件上传。

在答案中，您将看到使用`tempnam`创建临时文件并将资源存储在其中的使用`file_get_contents`，我认为这在理论上应该有效（未经测试）。

现在，我的问题是 PHP 没有任何检查来检测和防止这种行为，或者`post-max-size`/`upload-max-filesize` `ini`值如何影响这个手动创建的`$_FILES`数组？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T14:16:47.743

和不会对您链接到的问题中的场景产生任何影响，因为它们正在与远程源建立`post_max_size`传出*连接*以获取数据。这两个 ini 设置只会影响发送到脚本的数据（即*传入*）。`upload_max_filesize`*`POST`*

 **PHP 不对`$_FILES`数组的更改做任何检查，您可以无限制地自由修改数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T14:19:17.620

$_FILES 只是一个由网络服务器创建的简单数组。你可以用这个数组做任何你喜欢的事情。tempnam 创建一个文件，该文件在您的控制之下。这就是为什么“post-max-size”和“upload-max-filesize”在这种情况下并不重要。如果你用自己的代码杀死服务器空间，那就是你的问题。post-max-size 确保没有其他人可以创建巨大的网络流量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-02T14:20:10.143

对于单个文件，就是这样：

```
$path = '/path/to/my/image.jpg'

$file = [
    'name' => 'image.jpg',
    'type' => 'image/jpeg',
    'tmp_name' => $path,
    'error' => 0,
    'size' => filesize($path),
]; 
```

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-12-17T14:14:27.293

您不能预先填充 $_FILES 数组，也不能将信息放入 HTML 中 type=file 控件的名称中。这是一个安全问题。想一想……如果我可以在我想上传的文件名中加入信息，我可以在你不知情或不许可的情况下从你的计算机上删除数据。所要做的就是让您的浏览器访问我的网站并“噗！”**

# android - 在一台机器上运行的 Android 程序不在另一台机器上运行

> ID：13915721
> 
> 赞同：0
> 
> 时间：2012-12-17T14:08:50.973
> 
> 标签：android, android-emulator

你能告诉我这个相同的程序在一台机器上运行并且不会在另一台机器上执行吗？它在另一个上声明空指针异常。当我单击 CheckBox 时，不幸的是您的活动已停止。

以下是代码：-

```
package com.example.gtbactivity;

import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.CheckBox;
import android.widget.CompoundButton;
import android.widget.CompoundButton.OnCheckedChangeListener;
import android.widget.TextView;

public class MainActivity extends Activity implements OnCheckedChangeListener, OnClickListener {

    CheckBox cb1,cb2;
    TextView t1,t2,t3;
    Button b;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        cb1=(CheckBox)findViewById(R.id.checkBox1);
        cb2=(CheckBox)findViewById(R.id.checkBox2);
        b=(Button)findViewById(R.id.button1);   
        t1=(TextView)findViewById(R.id.textView1);
        t2=(TextView)findViewById(R.id.textView2);
        t3=(TextView)findViewById(R.id.textView3);

        b.setOnClickListener(this);
                cb1.setOnCheckedChangeListener(this);
                cb2.setOnCheckedChangeListener(this);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    @Override
    public void onCheckedChanged(CompoundButton arg0, boolean arg1) {
         if(cb1.isChecked())
         { t1.setText("10");}
         else
         {t1.setText("0");}

         if(cb2.isChecked())
         { t2.setText("15");}
         else
         {t2.setText("0");}

    }
    @Override
    public void onClick(View arg0) {
        int total,a,b;
        a=Integer.parseInt(t1.getText().toString());
        b=Integer.parseInt(t2.getText().toString());

        total=a+b;
        t3.setText(String.valueOf(total));

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T14:12:43.063

我没有看到 textView t1 被初始化，也许这就是你得到空指针异常的原因

代替

```
 t2=(TextView)findViewById(R.id.textView1); 
```

利用

```
 t1=(TextView)findViewById(R.id.textView1); 
```

# ruby-on-rails - Rails：资产预编译使应用程序在生产中失败

> ID：13915727
> 
> 赞同：0
> 
> 时间：2012-12-17T14:09:15.403
> 
> 标签：ruby-on-rails, capistrano, asset-pipeline

我正在使用 Rails v3.2.8、Capistrano v2.13.5 和 Unicorn 4.3.1，当我部署时，我得到了一个非常奇怪的行为。

如果满足以下条件：

*   有要预编译的资产
*   代码库中添加了新的类或方法
*   应用程序的某些部分使用了这个新的类或方法

在部署过程中预编译资产时，在重新启动独角兽之前，我在 Web 应用程序上收到异常，告诉我新类或方法未定义。

它不应该发生，因为 unicorn 尚未重新启动，因此不应该知道使用新类的代码。

就像类缓存被清除并且自动加载会重新加载我的模型一样。

知道什么可能导致这种情况吗？

谢谢 ：）

# c# - 如何将 userId 添加到每个查询而不将其添加到所有域类？

> ID：13915732
> 
> 赞同：1
> 
> 时间：2012-12-17T14:09:24.723
> 
> 标签：c#, sqlite, sqlite-net

我正在使用 sqlite 和 c# sqlite-net 库。我的一些实体：

```
public class Product
{
    [PrimaryKey, AutoIncrement]
    public int Id { get; set; }
    [MaxLength(50)]
    public string Name { get; set; }
    [MaxLength(50)]
    public string Brand { get; set; }
    [MaxLength(50)]
    public string Type { get; set; }
    [MaxLength(50)]
}

public class ProductImage
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string Container { get; set; }
    public int ProductId { get; set; }
} 
```

现在所有实体都属于一个用户，用户应该始终只使用他自己的实体。所以当我在数据库中插入一个实体时，我想用它来存储用户 ID。但是...我不想将 userId 添加到我的所有域类中。

我现在像这样存储我的实体：

*   等待_databaseManager.GetDatabaseInstance().InsertAsync(entity);

并像这样选择：

*   var products = await _databaseManager.GetDatabaseInstance().Table().ToListAsync();

那么 sqlite-net 有没有办法将 userId 添加到数据库而不将其添加到所有域类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T14:16:36.550

它不支持继承吗，就像查看类型的层次结构一样？我建议它会，或者至少应该。因此，如果是这样，您可以使用抽象基类或接口。像这样的东西：

```
public abstract class StandardEntity {
  public int UserId { get; set; } // decorate with attributes as necessary
} 
```

并继承：

```
public class Product : StandardEntity {

} 
```

# mysql - 在 PHP/MySQL 中将 SQL 代码插入数据库

> ID：13915735
> 
> 赞同：1
> 
> 时间：2012-12-17T14:09:37.690
> 
> 标签：mysql, sql, insert, escaping

我正在尝试编写 sql 以将 SQL 代码插入表的列之一。该表有这三列：email、验证码、sql。

我尝试了这段代码，以及它的变体，使用引号和反斜杠/转义它们等等......但还是有问题：

```
INSERT INTO pre_registration(email, verification_code, sql) VALUES('myemail@gmail.com', '8efb100a295c0c690931222ff4467bb8', '"INSERT INTO customer(title) VALUES(\'Mr.\')"') 
```

它告诉我 SQL 语法有错误：

```
 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'sql) VALUES('myemail@gmail.com', '89f0fd5c927d466d6ec9a21b9ac34ffa', "INSER' at line 1 
```

怎么做？我正在使用 PHP/MySQL。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T14:12:11.390

MySQL 将`sql`其视为关键字。你必须引用它：

```
INSERT INTO pre_registration(email, verification_code, `sql`) VALUES('myemail@gmail.com', '8efb100a295c0c690931222ff4467bb8', '"INSERT INTO customer(title) VALUES(\'Mr.\')"') 
```

顺便说一下双引号来转义它们，而不是使用 bakslashes。这对 SQL 更友好。

```
INSERT INTO pre_registration(email, verification_code, `sql`) VALUES('myemail@gmail.com', '8efb100a295c0c690931222ff4467bb8', '"INSERT INTO customer(title) VALUES(''Mr.'')"') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T14:24:50.373

深入了解确切的 SQL 错误会有所帮助。乍一看，我会说您需要在表名和左括号之间以及值和左括号之间应用空格。

此外，尽管我不确定，但 SQL 部分双引号周围的单引号可能会产生错误。单引号之间的任何内容都按字面解释，这应该使转义字符实际上是存储数据中的斜线。

此外，sql 是保留字，必须引用才能使用。

最后，根据您的情况，使用准备和绑定参数可能会有更安全的数据输入方法：

```
try
{
    $conn = new PDO ( "sqlsrv:server = $serverstringname; Database = $logindatabase", "$loginusername", "$loginpassword");
    $conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
}

catch ( PDOException $e )
{
    print( "Error connecting to SQL Server." );
    die(print_r($e));
}

$email = 'myemail@gmail.com' //or some other way of setting the variable like $_POST
$verification_code = '#####' //or $_Post method
$sql = 'Put Query Here' //probably have to declare this explicitly

$sql_insert = "INSERT INTO pre_registration_info (email, verification_code, 'sql') VALUES (?,?,?)";
        $stmt = $conn->prepare($sql_insert);
        $stmt->bindValue(1, $email);
        $stmt->bindValue(2, $verification_code);
        $stmt->bindValue(3, $sql);
        $stmt->execute(); 
```

# ruby - 水豚中的鼠标悬停功能？

> ID：13915743
> 
> 赞同：1
> 
> 时间：2012-12-17T14:10:16.080
> 
> 标签：ruby, capybara

我需要使用 capybara 将鼠标悬停在一个元素上。它在FF15中运行良好。但在FF13中不是。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-29T05:25:45.407

最后，我找到了解决方案

```
page.driver.browser.mouse.move_to(page.driver.browser.find_element(:id=>"locator")) 
```

它工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T17:09:32.780

我找到了一种使用 Capybara + Selenium 驱动程序模拟“鼠标悬停”的方法：

```
module Capybara
  module Node
    class Element
      def hover
        @session.driver.browser.action.move_to(self.native).perform
      end
    end
  end
end 
```

# ruby-on-rails - Ruby On Rails 平台上的 SQL 异常

> ID：13915746
> 
> 赞同：0
> 
> 时间：2012-12-17T14:10:17.130
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我的项目中有两个模型类。第一个是`User`：

```
class User < ActiveRecord::Base
  attr_accessible :email, :name
  has_many :micropost1s
end 
```

另一个是`Micropost1`

```
class Micropost1 < ActiveRecord::Base
  attr_accessible :content, :user_id
  belongs_to :user

  validates :content, :length => { :maximum => 140 }
end 
```

我没有得到我错的地方。首先我运行这个命令来分配变量`first_user`：

```
first_user = User.first 
```

之后我在控制台中写：

```
first_user.micropost1s 
```

我收到此错误日志：

```
 Micropost1 Load (0.3ms)  SELECT "micropost1s".* FROM "micropost1s" WHERE "micropost1s"."user_id" = 1
SQLite3::SQLException: no such column: micropost1s.user_id: SELECT "micropost1s".* FROM "micropost1s"  WHERE "micropost1s"."user_id" = 1
ActiveRecord::StatementInvalid: SQLite3::SQLException: no such column: micropost1s.user_id: SELECT "micropost1s".* FROM "micropost1s"  WHERE "micropost1s"."user_id" = 1
    from /var/lib/gems/1.8/gems/sqlite3-1.3.5/lib/sqlite3/database.rb:91:in `initialize'
    from /var/lib/gems/1.8/gems/sqlite3-1.3.5/lib/sqlite3/database.rb:91:in `new'
    from /var/lib/gems/1.8/gems/sqlite3-1.3.5/lib/sqlite3/database.rb:91:in `prepare'
    from /var/lib/gems/1.8/gems/activerecord-3.2.9/lib/active_record/connection_adapters/sqlite_adapter.rb:246:in `exec_query'
    from /var/lib/gems/1.8/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract_adapter.rb:280:in `log'
    from /var/lib/gems/1.8/gems/activesupport-3.2.9/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
    from /var/lib/gems/1.8/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract_adapter.rb:275:in `log'
    from /var/lib/gems/1.8/gems/activerecord-3.2.9/lib/active_record/connection_adapters/sqlite_adapter.rb:242:in `exec_query'
    from /var/lib/gems/1.8/gems/activerecord-3.2.9/lib/active_record/connection_adapters/sqlite_adapter.rb:467:in `select'
    from /var/lib/gems/1.8/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/database_statements.rb:18:in `select_all'
    from /var/lib/gems/1.8/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/query_cache.rb:63:in `select_all'
    from /var/lib/gems/1.8/gems/activerecord-3.2.9/lib/active_record/querying.rb:38:in `find_by_sql'
    from /var/lib/gems/1.8/gems/activerecord-3.2.9/lib/active_record/explain.rb:40:in `logging_query_plan'
    from /var/lib/gems/1.8/gems/activerecord-3.2.9/lib/active_record/querying.rb:37:in `find_by_sql'
    from /var/lib/gems/1.8/gems/activerecord-3.2.9/lib/active_record/relation.rb:171:in `exec_queries'
    from /var/lib/gems/1.8/gems/activerecord-3.2.9/lib/active_record/relation.rb:160:in `to_a'
... 5 levels...
    from /var/lib/gems/1.8/gems/activerecord-3.2.9/lib/active_record/associations/collection_proxy.rb:44:in `__send__'
    from /var/lib/gems/1.8/gems/activerecord-3.2.9/lib/active_record/associations/collection_proxy.rb:44:in `load_target'
    from /var/lib/gems/1.8/gems/activerecord-3.2.9/lib/active_record/associations/collection_proxy.rb:87:in `method_missing'
    from /usr/lib/ruby/1.8/irb.rb:310:in `output_value'
    from /usr/lib/ruby/1.8/irb.rb:159:in `eval_input'
    from /usr/lib/ruby/1.8/irb.rb:271:in `signal_status'
    from /usr/lib/ruby/1.8/irb.rb:155:in `eval_input'
    from /usr/lib/ruby/1.8/irb.rb:154:in `eval_input'
    from /usr/lib/ruby/1.8/irb.rb:71:in `start'
    from /usr/lib/ruby/1.8/irb.rb:70:in `catch'
    from /usr/lib/ruby/1.8/irb.rb:70:in `start'
    from /var/lib/gems/1.8/gems/railties-3.2.9/lib/rails/commands/console.rb:47:in `start'
    from /var/lib/gems/1.8/gems/railties-3.2.9/lib/rails/commands/console.rb:8:in `start'
    from /var/lib/gems/1.8/gems/railties-3.2.9/lib/rails/commands.rb:41
    from script/rails:6:in `require'
    from script/rails:6irb(main):008:0> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T14:13:45.557

听起来您还没有运行通过创建模型生成的迁移：

```
$ rake db:migrate 
```

如果这不起作用，您可能需要在`user_id`Micropost1 模型中添加一列。例如：

```
$ rails g migration add_user_id_to_micropost1s 
```

然后编辑生成的迁移以根据需要创建字段。或者，您可以使用对用户的引用重新创建模型：

```
$ rails g model Micropost1 something:string user:references 
```

# jquery - jQuery 将其他 div 中的图像附加到选定的 div

> ID：13915753
> 
> 赞同：2
> 
> 时间：2012-12-17T14:10:44.900
> 
> 标签：jquery, image, append, gallery

我已经为一些杂志问题创建了一个图片库，我想把它设计成我所附图片中的东西，但我不确定你是否可以做我想要的，

我基本上想 jQuery 附加 div 1 和 3 中的图像并将其放在当前选择的 div（div 2）上的图像后面。

提前感谢您的帮助。

到目前为止，我还有一个用于代码的 js fiddle：http: [//jsfiddle.net/huddds/5Z39B/1/](http://jsfiddle.net/huddds/5Z39B/1/)

![在此处输入图像描述](../Images/3f527d84d1dc0b395a41c6b49551aef9.png)

jQuery

```
 var issueTotal = 0;

$('#backIssue0').show();

$('.prevButton').hide();    

$('.nextButton').click(function(e) {
    e.preventDefault();

    issueTotal = issueTotal + 1;

    if(issueTotal > 0){
        $('.prevButton').show();
    }
    if(issueTotal < 4){
        $('.nextButton').show();
    }    
    if(issueTotal > 3){
        $('.nextButton').hide();
    }

    $("#backIssue" + issueTotal).show();
    if(issueTotal > 0) {
        $('#backIssue' + (issueTotal - 1)).hide();
    }

});

$('.prevButton').click(function(e) {
    e.preventDefault();

    issueTotal = issueTotal - 1;

    if(issueTotal > 1){
        $('.prevButton').show();
    }
    if(issueTotal < 1){
        $('.prevButton').hide();
    }
    if(issueTotal < 4){
        $('.nextButton').show();
    }    
    if(issueTotal > 3){
        $('.nextButton').hide();
    }

    $("#backIssue" + issueTotal).show();
    if(issueTotal > 0) {
        $('#backIssue' + (issueTotal - 1)).hide();
    }
}); 
```

HTML

```
 <div id="buttons">
     <a href="#" class="prevButton">PREVIOUS</a>
     <a href="#" class="nextButton">NEXT</a>
 </div>
 <div id=issueContainer>
 <div id="backIssue0">
     <img src="http://www.tuwidesign.com/tuwi/wp-content/uploads/2009/05/web_designer_magazine.jpg" width="100" alt="#" />
 </div>
 <div id="backIssue1">
     <img src="http://blogof.francescomugnai.com/wp-content/uploads/2008/07/cover_web_designer.jpg" width="100" alt="#" />
 </div>
 <div id="backIssue2">
     <img src="http://www.onerutter.com/wp-content/uploads/2011/10/WD189.jpg" width="100" alt="#" />
 </div>
 <div id="backIssue3">
     <img src="http://www.ukhumourweb.co.uk/web-design-201.jpg" width="100" alt="#" />
 </div>
 <div id="backIssue4">
     <img src="http://www.solidshops.com/blog/wp-content/uploads/web-designer-magazine1.jpg" width="100" alt="#" />
 </div>
 </div> 
```

CSS

```
 #backIssue0{width:100px;display:none; float:left;}
 #backIssue1{width:100px;display:none;float:left;}
 #backIssue2{width:100px;display:none;float:left;}
 #backIssue3{width:100px;display:none;float:left;}
 #backIssue4{width:100px;display:none;float:left;}
 .nextButton{margin-left:50px;}
 .previousButton{}
 #issueContainer{width:100px;height:130px; overflow:hidden;}
 #buttons{clear:both;}​
               ​ 
```

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T14:26:05.707

[http://jsfiddle.net/aEvhh/](http://jsfiddle.net/aEvhh/)

这个怎么样？

html:

```
<div id="buttons">
    <a href="#" class="prevButton">PREVIOUS</a>
    <a href="#" class="nextButton">NEXT</a>
</div>
<div id=issueContainer>
<div id="backIssue0" class="issue">
    <img src="http://www.tuwidesign.com/tuwi/wp-content/uploads/2009/05/web_designer_magazine.jpg" width="100" alt="#" />
</div>
<div id="backIssue1" class="issue">
    <img src="http://blogof.francescomugnai.com/wp-content/uploads/2008/07/cover_web_designer.jpg" width="100" alt="#" />
</div>
<div id="backIssue2" class="issue">
    <img src="http://www.onerutter.com/wp-content/uploads/2011/10/WD189.jpg" width="100" alt="#" />
</div>
<div id="backIssue3" class="issue">
    <img src="http://www.ukhumourweb.co.uk/web-design-201.jpg" width="100" alt="#" />
</div>
<div id="backIssue4" class="issue">
    <img src="http://www.solidshops.com/blog/wp-content/uploads/web-designer-magazine1.jpg" width="100" alt="#" />
</div>
</div> 
```

Javascript：

```
var issueTotal = 0;
function update_issues(){
    $('.issue').removeClass('comingup').hide();
    if(issueTotal >0){
        console.log('#backIssue' + (issueTotal -1));
     $('#backIssue' + (issueTotal -1)).addClass('comingup').show();   
    }
    $('#backIssue' + (issueTotal )).show();
    if(issueTotal <4){
     $('#backIssue' + (issueTotal +1)).addClass('comingup').show();  
    }
    if(issueTotal > 0){
        $('.prevButton').show();
    }
    if(issueTotal < 4){
        $('.nextButton').show();
    }    
}

    $('.nextButton').click(function(e) {
        e.preventDefault();

        issueTotal = issueTotal + 1;
        update_issues();
    });
    update_issues();

    $('.prevButton').click(function(e) {
        e.preventDefault();

        issueTotal = issueTotal - 1;
        update_issues();

    }); 
```

CSS：

```
.issue { width:100px;display:none;float:left;}
.nextButton{margin-left:50px;}
.previousButton{}
#issueContainer{width:300px;height:130px; overflow:hidden;}
.issue.comingup { opacity:0.4; filter:alpha(opacity=40); /* For IE8 and earlier */ }
#buttons{clear:both;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T14:29:44.323

由于您已经在使用 jQuery，您是否考虑过使用插件来完成这项工作？

[**Roundabout**](http://fredhq.com/projects/roundabout/)是一个 jQuery 插件，可以轻松地将无序列表和其他嵌套的 HTML 结构转换为有趣的、交互式的、类似转盘的区域。

它是开源的，并在 BSD 许可下发布，这意味着它可以在您的个人或商业项目中免费使用。

带图片的演示：

[http://fredhq.com/projects/roundabout/demos/images](http://fredhq.com/projects/roundabout/demos/images)

![图片演示](../Images/8f2ea65237ed596701e74fad731d2f65.png)

带有 3D 效果的演示：

[http://fredhq.com/projects/roundabout/demos/3d](http://fredhq.com/projects/roundabout/demos/3d)

![3D 演示](../Images/65b1fdd6531a1afee7fb34a42d45ba1b.png)

您还可以使用[环形交叉口形状使用新效果对其进行扩展](http://fredhq.com/projects/roundabout-shapes)

![形状效果](../Images/4a10fc09607c65facdd1ed2473787a48.png)

# java - HashMap中使用对象的一键多个值

> ID：13915754
> 
> 赞同：0
> 
> 时间：2012-12-17T14:10:48.093
> 
> 标签：java, hashmap

如果我想“id”是键，“name”、“phoneNumber”、“eamil”是值。

```
public class Personal {

    private int id;
    private String name;
    private int phoneNumber;
    private String email;

    public Personal(int id){
        this.id = id;
    }

    //getter and setter here
} 
```

输入多人数据后。我可以通过 id 获取数据。

```
output ex: map.get(100001); // [Dan, 123456, Dan@gmail.com]
           map.get(100002); // [Kim, 123343, Kim@gmail.com] 
           ... 
```

问题：实现此 HashMap 的最佳方法是什么？

非常感谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-17T14:12:21.640

如果 ID 是唯一的并且一成不变，您可以使用：

```
Map<Integer,Personal> map = new HashMap<Integer,Personal>(); 
```

添加对象`p`：

```
map.put(p.getId(), p); 
```

然后

```
map.get(100001); 
```

将返回相应的对象。

如果 ID 可以重复或更改，事情就会变得更加复杂。如果是这种情况，请说明您的确切要求，以便我们进一步提供帮助。

# jquery - 带有 jquery ajax 的 fb.ui 回调函数

> ID：13915758
> 
> 赞同：0
> 
> 时间：2012-12-17T14:10:55.007
> 
> 标签：jquery, fb.ui

我正在使用 FB.ui。我需要编写回调函数。当用户在我的应用程序中共享图像时，此回调函数应由 ajax 调用触发。当它在 fb 上共享时，我需要获取它的 id，我已经用 $(this).attr('data-id') 传递了它。

```
 $('.sharepicture').click(function() {
    //alert($(this).attr('data-id'));
    var obj = {
            method: 'feed',
            link: TAB_URL + '?app_data=p,' + $(this).attr('data-id'),
            picture: ABSOLUTE_URL + '/images/app.jpg',
            name: 'myapplication.',
            description: 'I\'ve just created a image from collection of pictures in my application . To see my image click on the link above'
        };

        FB.ui(obj);
}); 
```

谁能告诉我如何编写这个回调函数。我试过这样的东西，但它不工作..

```
$('.sharepostcard').click(function() {
        //alert($(this).attr('data-id'));

          var obj = {
        method: 'feed',
        link: TAB_URL + '?app_data=p,' + $(this).attr('data-id'),
        picture: ABSOLUTE_URL + '/images/app.jpg',
        name: 'myapplication.',
        description: 'I\'ve just created a image from collection of pictures in my application . To see my image click on the link above'
    };

    FB.ui(obj);
          $.ajax({
                type: "POST",
                url: "http://www.facebook.com/fbml/ajax/dialog/feed",
                success: function(data, textStatus, jqXHR) {
                      alert(data);
                  }

            });

        }); 
```

如果这里已经存在类似的帖子，我很抱歉。我确实搜索过它，但我找不到这样做的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:49:32.250

FB.ui() 允许回调函数作为第二个参数：

```
FB.ui(obj, function(response) {
                if(typeof reponse == 'object' && typeof response['post_id'] != 'undefined') {
                    msg = 'Message send.';
                } else {
                    msg = 'Failed to send message.';      
                }    
            }
        ); 
```

# java - 两个 3D 矢量之间的角度

> ID：13915759
> 
> 赞同：4
> 
> 时间：2012-12-17T14:10:59.513
> 
> 标签：java, math, vector, geometry, dot-product

我有一系列要旋转的顶点（粉红色），以便顶点图案的一个边缘与三角形的边缘（白色）匹配。

为此，我首先创建两个向量来表示边缘：floretAB 和 triangleAB（绿色）。然后我找到两者的叉积以获得一个轴，我可以围绕该轴旋转顶点（红色）。

然后我得到两个向量之间的角度，并使用它和旋转轴来创建一个四元数。最后，我围绕四元数旋转所有顶点。

![在此处输入图像描述](../Images/fb2fa9c4cd81585e6380f419d1e497d3.png)

*旋转前*

_

![在此处输入图像描述](../Images/d1813154789329fc05bcad97d2f98f88.png)

*应该产生什么旋转*

_

但是，尽管顶点正确地围绕四元数旋转，但角度并不正确，如下所示：

![在此处输入图像描述](../Images/5d86e545a5c7ffc039779e2a7b3beb4a.png)

这是我用来获取两个向量之间角度的代码。我不明白我做错了什么：

```
double[] cross = new double[3];
crossProduct(floretAB.mX, floretAB.mY, floretAB.mZ, triangleAB.mX, triangleAB.mY, triangleAB.mZ, cross);
double dot = dotProduct(floretAB.mX, floretAB.mY, floretAB.mZ, triangleAB.mX, triangleAB.mY, triangleAB.mZ);
double crossMag = Math.sqrt(cross[0]*cross[0] + cross[1]*cross[1] + cross[2]*cross[2]);
double angle = Math.atan2(crossMag, dot);

public static double dotProduct(double vector1X,double vector1Y,double vector1Z,double vector2X,double vector2Y,double vector2Z){

    return vector1X*vector2X + vector1Y*vector2Y + vector1Z*vector2Z;

}

public static void crossProduct(double vector1X,double vector1Y,double vector1Z,double vector2X,double vector2Y,double vector2Z, double[] outputArray){

    outputArray[0] = vector1Y*vector2Z - vector1Z*vector2Y;     
    outputArray[1] = vector1Z*vector2X - vector1X*vector2Z;
    outputArray[2] = vector1X*vector2Y - vector1Y*vector2X;

} 
```

对此的任何帮助将不胜感激，因为它确实困扰着我。

谢谢，詹姆斯

**编辑：**这是其余的代码：

```
 // get floret p1,p2 vector
    // get triangle p1,p2 vector
    Vector3D floretAB = new Vector3D(florets3D[0], florets3D[7]);
    // get triangle p1,p2 vector
    Vector3D triangleAB = new Vector3D(triangle[0], triangle[1]);

    // get rotation axis (cross) and angle (dot)

    /*
    double[] cross = new double[3];
    crossProduct(floretAB.mX, floretAB.mY, floretAB.mZ, triangleAB.mX, triangleAB.mY, triangleAB.mZ, cross);
    double dotMag = floretAB.getMagnitude() * triangleAB.getMagnitude();
    double dot = dotProduct(floretAB.mX, floretAB.mY, floretAB.mZ, triangleAB.mX, triangleAB.mY, triangleAB.mZ) / dotMag;
    double angle = Math.acos(dot);
    */

    double[] cross = new double[3];
    crossProduct(floretAB.mX, floretAB.mY, floretAB.mZ, triangleAB.mX, triangleAB.mY, triangleAB.mZ, cross);
    double dot = dotProduct(floretAB.mX, floretAB.mY, floretAB.mZ, triangleAB.mX, triangleAB.mY, triangleAB.mZ);
    double crossMag = Math.sqrt(cross[0]*cross[0] + cross[1]*cross[1] + cross[2]*cross[2]);
    double angle = Math.atan2(crossMag, dot);

    // rotate floret so p1,p2 vector matches with triangle p1,p2 vector     
    double[] newVerts = new double[3];
    Quaternion quat = new Quaternion(cross[0], cross[1], cross[2], angle);
    for(int i = 0;i<numfloretVerts;i++){
        Vertex3D vert = florets3D[i];
        quat.RotateVector(vert.getmX(), vert.getmY(), vert.getmZ(), newVerts);
        vert.setmX(newVerts[0]);
        vert.setmY(newVerts[1]);
        vert.setmZ(newVerts[2]);
    } 
```

_

```
public class Vector3D {

public double mX;
public double mY;
public double mZ;

public Vertex3D point;

/**
 * Constructs a vector from two points. The new vector is normalised
 * 
 * @param point1
 * @param point2
 */
public Vector3D(Vertex3D point1, Vertex3D point2){
    mX = point2.getmX() - point1.getmX();
    mY = point2.getmY() - point1.getmY();
    mZ = point2.getmZ() - point1.getmZ();
    normalise();
    point = point1;
}

/**
 * Normalises the vector
 */
public void normalise(){
    double magnitude = Math.sqrt(mX*mX + mY*mY + mZ*mZ);
    if(magnitude!=0){
        mX /= magnitude;
        mY /= magnitude;
        mZ /= magnitude;
    }
}

/**
 * 
 * @return the magnitude of the vector
 */
public double getMagnitude(){
    return Math.sqrt(mX*mX + mY*mY + mZ*mZ);
}

} 
```

_

```
public class Quaternion {

private static final double TOLERANCE = 0.00001f;

double w;
double x;
double y;
double z;

public Quaternion(double axisX, double axisY, double axisZ, double angleInRadians){
    setAxisAngle(axisX, axisY, axisZ, angleInRadians);      
}

public void Normalise(){

    // Don't normalize if we don't have to
    double mag2 = w * w + x * x + y * y + z * z;
    if (Math.abs(mag2) > TOLERANCE && Math.abs(mag2 - 1.0f) > TOLERANCE) {
        double mag = (double) Math.sqrt(mag2);
        w /= mag;
        x /= mag;
        y /= mag;
        z /= mag;
    }

}

public void getConjugate(double[] outputArray){

    outputArray[0] = w;
    outputArray[1] = -x;
    outputArray[2] = -y;
    outputArray[3] = -z;

}

public void Multiply(double[] aq, double[] rq, double[] outputArray){

    outputArray[0] = aq[0] * rq[0] - aq[1] * rq[1] - aq[2] * rq[2] - aq[3] * rq[3];
    outputArray[1] = aq[0] * rq[1] + aq[1] * rq[0] + aq[2] * rq[3] - aq[3] * rq[2];
    outputArray[2] = aq[0] * rq[2] + aq[2] * rq[0] + aq[3] * rq[1] - aq[1] * rq[3];
    outputArray[3] = aq[0] * rq[3] + aq[3] * rq[0] + aq[1] * rq[2] - aq[2] * rq[1];

}

private double[] vecQuat = new double[4];
private double[] resQuat = new double[4];
private double[] thisQuat = new double[4];

private double[] conj = new double[4];

/**
 * Rotates a vector (or point) around this axis-angle
 * 
 * @param vectorX the x component of the vector (or point)
 * @param vectorY the y component of the vector (or point)
 * @param vectorZ the z component of the vector (or point)
 * @param outputArray the array in which the results will be stored
 */
public void RotateVector(double vectorX, double vectorY, double vectorZ, double[] outputArray){

    vecQuat[0] = 0.0f;
    vecQuat[1] = vectorX;
    vecQuat[2] = vectorY;
    vecQuat[3] = vectorZ;

    thisQuat[0] = w;
    thisQuat[1] = x;
    thisQuat[2] = y;
    thisQuat[3] = z;

    getConjugate(conj);
    Multiply(vecQuat,conj,resQuat);
    Multiply(thisQuat,resQuat,vecQuat);

    outputArray[0] = vecQuat[1];
    outputArray[1] = vecQuat[2];
    outputArray[2] = vecQuat[3];

}

/**
 * set Quaternion by providing axis-angle form
 */
public void setAxisAngle(double axisX, double axisY, double axisZ, double angleInRadians){
    w = (double) Math.cos( angleInRadians/2);
    x = (double) (axisX * Math.sin( angleInRadians/2 ));
    y = (double) (axisY * Math.sin( angleInRadians/2 ));
    z = (double) (axisZ * Math.sin( angleInRadians/2 ));

    Normalise();
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T14:56:59.950

我认为问题在于您以错误的方式评估角度。如果我正确理解您要达到的目标，那么您需要两条绿线之间的角度。您使用以下定义正确评估了 2 条绿线之间的点积：

```
(a, b) = a1*b1 + a2*b2 + a3*b3. 
```

但是点积也可以这样计算：

```
(a, b) = |a|*|b|*cos(theta) 
```

所以你可以评估 cos(theta) - 两条绿线之间的角度余弦 - 像这样：

```
cos(theta) = (a1*b1 + a2*b2 + a3*b3) / (|a|*|b|) 
```

但我会使用另一种方法。我会首先对两个向量进行归一化（即将它们转换为[unit-vectors](http://en.wikipedia.org/wiki/Unit_vector)）。您可以通过将每个向量的分量除以向量的长度 (sqrt(x1*x1 + y1*y1 + z1*z1)) 来做到这一点，然后您将获得以下结果：

```
(aa, bb) = cos(theta) 
```

其中 aa 是归一化的 a，bb 是归一化的 b。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T15:39:37.880

我认为你的数学过于复杂了。

给定两个单位向量（您确实说过它们已归一化），则叉积的大小等于`sin(theta)`。不需要调用点积或`atan2`.

在创建四元数之前，您可能还需要对叉积向量结果进行归一化 - 这取决于您的实现`new Quaternion(x, y, z, theta)`以及是否需要`[x, y, z]`对其进行归一化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-19T00:03:50.417

所述答案对于实数是正确的，但在使用浮点数计算时可能会在某些角度附近失去准确性。对于角度接近零或 PI 的 arcs()，以及接近 pi/2 和 –pi/2 的 arcsin()，可能会丢失多达一半的有效数字。假设输入向量是单位长度，一种更稳健且仅在从零到包括 PI 的整个范围内均匀地遭受一些舍入误差的方法是：

```
public double AngleBetween(Vector3D a, Vector3D b)
{
    return 2.0d * Math.atan((a-b).Length/(a+b).Length);
} 
```

请注意，这给出了两个向量之间的无方向角。可以在以下位置找到关于此并归因于 Kahan 的参考：[http ://www.cs.berkeley.edu/~wkahan/MathH110/Cross.pdf](http://www.cs.berkeley.edu/~wkahan/MathH110/Cross.pdf)

# java - jar 使用的资源

> ID：13915760
> 
> 赞同：1
> 
> 时间：2012-12-17T14:11:02.853
> 
> 标签：java, swing, jar, resources

我有一个使用大量资源（视频、图像、文本）的可运行 jar（swing GUI），但我不知道访问这些 rsc 的最佳方式是什么。现在我将所有资源都放在`C:\`目录中，但是当我更改机器时，我必须手动将所有资源传输到适当的目录。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T14:16:58.700

通常的方法是将资源文件打包在 JAR 中，通常在与相关类的包相同的“目录”中或下

```
- com
  - example
    - MyClass.class
    - resources
      - icon.png 
```

然后在`MyClass`您可以使用`this.getClass().getResource("resources/icon.png")`来访问资源作为 a`java.net.URL`或`getResourceAsStream`访问它作为`InputStream`.

# c++ - OpenSSL 致命错误 LNK1120：3 个未解决的外部问题

> ID：13915763
> 
> 赞同：0
> 
> 时间：2012-12-17T14:11:36.960
> 
> 标签：c++, openssl

我已将 OpenSSL 安装到 Windows 8，并对 OpenSSL 库进行了必要的修改，而没有将其安装为本机库。但是我有一个特定的错误消息，我在互联网上找不到它。

```
1>------ Build started: Project: CryptoProject, Configuration: Debug Win32 ------
1>  main.cpp
1>main.obj : error LNK2019: unresolved external symbol _BN_new referenced in function _main
1>main.obj : error LNK2019: unresolved external symbol _BN_bn2dec referenced in function _main
1>main.obj : error LNK2019: unresolved external symbol _BN_generate_prime referenced in function _main
1>C:\Users\...\...\...\Debug\EXAMPLE.exe : fatal error LNK1120: 3 unresolved externals
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

希望你们能找到一些东西。所以这里是：

```
#include <iostream>
#include <string>
#include "openssl/bn.h"

using namespace std;

int main()
{
    BIGNUM * q = BN_new();
    BIGNUM * two = BN_new();
    long int num_bits_q = 160;
    long int num_bits_p = 1024;
    BN_generate_prime(q, num_bits_q, 0, two, NULL,NULL,NULL);
    cout << "q is: " << BN_bn2dec(q) << endl;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-26T06:18:20.567

我运行了该代码并在 Visual Studio 2012 中成功编译，我使用了 OpenSSL-Win32。如果 OpenSSL-Win64 不工作使用 OpenSSL-Win32，我也有同样的问题。不要忘记包含 ssleay32.lib，我希望你知道如何在 Visual Studio 中配置 OpenSSl。 [![在此处输入图像描述](../Images/e444c3c37a6419cba45554c0f839ccea.png)](https://i.stack.imgur.com/DF0Xv.png)

# c# - 如何向/使用 RESTful WCF 服务传递和使用 JSON 参数？

> ID：13915765
> 
> 赞同：8
> 
> 时间：2012-12-17T14:11:42.873
> 
> 标签：c#, .net, json, wcf, wcf-rest

我是 RESTful 服务的初学者。

我需要创建一个接口，客户端需要传递最多 9 个参数。

我更愿意将参数作为 JSON 对象传递。

例如，如果我的 JSON 是：

```
'{
    "age":100,
    "name":"foo",
    "messages":["msg 1","msg 2","msg 3"],
    "favoriteColor" : "blue",
    "petName" : "Godzilla",
    "IQ" : "QuiteLow"
}' 
```

如果我最后需要执行下面的服务器端方法：

```
public Person FindPerson(Peron lookUpPerson)
{
Person found = null;
// Implementation that finds the Person and sets 'found'
return found;
} 
```

**问题：**
我应该如何使用上述 JSON 字符串从客户端进行调用？以及如何创建 RESTful 服务方法的签名和实现

*   接受这个 JSON，
*   将其解析并反序列化为 Person 对象和
*   调用/返回 FindPerson 方法的返回值给客户端？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-17T21:31:28.047

If you want to create a WCF operation to receive that JSON input, you'll need to define a data contract which maps to that input. There are a few tools which do that automatically, including one which I wrote a while back at [http://jsontodatacontract.azurewebsites.net/](http://jsontodatacontract.azurewebsites.net/) (more details on how this tool was written at [this blog post](http://blogs.msdn.com/b/carlosfigueira/archive/2012/07/12/creating-asp-net-web-apis-on-azure-web-sites.aspx)). The tool generated this class, which you can use:

```
// Type created for JSON at <<root>>
[System.Runtime.Serialization.DataContractAttribute()]
public partial class Person
{

    [System.Runtime.Serialization.DataMemberAttribute()]
    public int age;

    [System.Runtime.Serialization.DataMemberAttribute()]
    public string name;

    [System.Runtime.Serialization.DataMemberAttribute()]
    public string[] messages;

    [System.Runtime.Serialization.DataMemberAttribute()]
    public string favoriteColor;

    [System.Runtime.Serialization.DataMemberAttribute()]
    public string petName;

    [System.Runtime.Serialization.DataMemberAttribute()]
    public string IQ;
} 
```

Next, you need to define an operation contract to receive that. Since the JSON needs to go in the body of the request, the most natural HTTP method to use is `POST`, so you can define the operation as below: the method being "POST" and the style being "Bare" (which means that your JSON maps directly to the parameter). Notice that you can even omit the `Method` and `BodyStyle` properties, since `"POST"` and `WebMessageBodyStyle.Bare` are their default values, respectively).

```
[WebInvoke(Method = "POST", BodyStyle = WebMessageBodyStyle.Bare)]
public Person FindPerson(Peron lookUpPerson)
{
    Person found = null;
    // Implementation that finds the Person and sets 'found'
    return found;
} 
```

Now, at the method you have the input mapped to `lookupPerson`. How you will implement the logic of your method is up to you.

*Update after comment*

One example of calling the service using JavaScript (via jQuery) can be found below.

```
var input = '{
    "age":100,
    "name":"foo",
    "messages":["msg 1","msg 2","msg 3"],
    "favoriteColor" : "blue",
    "petName" : "Godzilla",
    "IQ" : "QuiteLow"
}';
var endpointAddress = "http://your.server.com/app/service.svc";
var url = endpointAddress + "/FindPerson";
$.ajax({
    type: 'POST',
    url: url,
    contentType: 'application/json',
    data: input,
    success: function(result) {
        alert(JSON.stringify(result));
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T14:19:43.193

1-添加 WebGet 属性

```
<OperationContract()> _
        <WebGet(UriTemplate:="YourFunc?inpt={inpt}", BodyStyle:=WebMessageBodyStyle.Wrapped,
                RequestFormat:=WebMessageFormat.Json, ResponseFormat:=WebMessageFormat.Xml)> _
        Public Function YourFunch(inpt As String) As String 
```

2-使用 NewtonSoft 将您的 json 序列化/反序列化到您的对象中（注意上面只接受字符串），NewtonSoft 比 MS 序列化器快得多。

使用 NewtonSoft 进行序列化[http://json.codeplex.com/](http://json.codeplex.com/)

3-您的 .svc 文件将包含 Factory="System.ServiceModel.Activation.WebServiceHostFactory

4-您的 web.config 将包含

```
 <behaviors>
      <endpointBehaviors>
        <behavior name="webHttpBehavior">
          <webHttp />
        </behavior>
      </endpointBehaviors>
    </behaviors> 
```

...和...

```
 <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer> 
```

# javascript - 使指针在全屏jwplayer 6中消失

> ID：13915766
> 
> 赞同：0
> 
> 时间：2012-12-17T14:11:58.117
> 
> 标签：javascript, flash, jwplayer

是否有一些代码可以添加到设置中来实现这一点，或者是配置文件或制作新皮肤的情况。

```
<head>
  <script src="/jwplayer/jwplayer.js"></script>
</head>
  <body>

      <div id='my-video'></div>
      <script type='text/javascript'>
      wplayer('my-video').setup

        ({
             file: 'clash.mp4',
             width: '480',
             height: '270',
        });
 </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T20:02:05.533

这是我们将要修复的错误。

# c# - 在 nhibernate 查询中过滤子查询

> ID：13915775
> 
> 赞同：0
> 
> 时间：2012-12-17T14:12:16.860
> 
> 标签：c#, sql, nhibernate

我有两个一对多关系的表：

```
product  -> orders 
```

在`Products`表（父）中，我有我可以销售的最大产品数量，在子表（订单）中，我有每行销售的产品数量。我需要列出我有库存的产品，按以下条件过滤

```
 orders.count() <= product.NumberOfProductsInStock 
```

如何在 nhibernate 中使用查询来完成此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T14:20:38.080

你可以这样做：

```
CurrentSession.Linq<Product>()
    .Where(p => p.NumberOfProductsInStock > 0 && (p.Orders.Count() == 0 || p.Orders.Count() <= p.NumberOfProductsInStock))
    .ToList(); 
```

# android - 带有黑色等待屏幕的 Android 应用内计费示例

> ID：13915782
> 
> 赞同：3
> 
> 时间：2012-12-17T14:12:27.600
> 
> 标签：android, in-app-billing

我在这里看到一堆用于 android 应用内计费的线程，我浏览了它们但找不到解决我的问题的方法：

我正在尝试运行 in-app-billing-v03，即 TrivialDrive 应用程序。在我签署 apk 并使用 adb 将其安装到我的测试设备上之前，我一直严格按照 README 文件中的内容进行操作。然后我运行它，但我看到的是一个黑屏，中间有“ONE SEC”，没有别的。我完全不知道后面发生了什么，因为我无法通过调试运行它。

那么有没有人有同样的经历并愿意分享一个解决方案？样本没有提供任何信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T15:06:45.233

我没有50声望，所以我不能发表评论......

我有同样的问题，并且可以更详细地描述正在发生的事情。

在 IABHelper.startSetup() 调用中，它永远不会触发 onIabSetupFinished() 回调。

在 startSetup() 方法中，此调用

```
 mContext.bindService(new Intent("com.android.vending.billing.InAppBillingService.BIND"),
                         mServiceConn, Context.BIND_AUTO_CREATE); 
```

返回 false 并且从不调用 mServiceConn.onServiceConnected （这是调用 onIabSetupFinished() 的地方）。

Logcat 说类似： 编辑：当我跑去检查这个 logcat 语句时，它开始工作。它在说些什么

```
"com.android.vending.billing.InAppBillingService.BIND not resolved" 
```

我做了什么来解决这个问题？不知道，但我猜它与 IInAppBillingService 生成的文件有关。检查您的构建路径以确保 /gen 包含在输出中并执行清理/构建。您可以使用 Eclipse 中的调试签名来调试此特定问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T15:13:36.857

我将添加一个我认为是问题的真正解决方案的答案。

您是否对设备进行了出厂重置以使用您的测试帐户正确设置？如果是这样，请打开 Google Play。我注意到我的问题在我第一次打开 Google Play 后就消失了。它会将“Google Play 商店”和“Google Play 服务”添加到您下载的应用程序中。（转到设置 - >应用程序）在我这样做之后它开始工作。Android显然会自动延迟下载。我有一个运行 4.1.1 的原生 android 操作系统（三星 Galaxy Nexus）。

编辑：要测试用户是否正确设置了 Google Play，请检查此链接。

[In-App Billing v3，找不到 bindService() Intent](https://stackoverflow.com/questions/13933632/in-app-billing-v3-bindservice-intent-cant-be-found)

# ios - 视图之间的交换/转换 iOS 编程

> ID：13915783
> 
> 赞同：0
> 
> 时间：2012-12-17T14:12:31.923
> 
> 标签：ios, uiviewcontroller, uinavigationcontroller, uiviewanimationtransition

我是 IOS 编程的新手，目前我有一个带有两个选项卡的选项卡栏应用程序。我有两个问题。

第一个选项卡显示了一张地图，用一些图钉想象它。导航栏上有一个按钮，单击此按钮时，我希望地图视图移出并进入列表视图。您可以从图像中看到 UI。该按钮称为列表。

![ ](../Images/af8c5bed8b4e7dc9b683cf63ab246391.png)

现在，当我单击列表时，我希望此视图消失并进入列表视图。所以这是我的问题？

1）我该怎么做？我尝试了导航模型，但我不想这样做，因为我不想要后退按钮。我尝试制作两个不同的视图，然后将按钮拖到该视图，但应用程序崩溃了。我只想要 nab 栏上的列表按钮，单击时视图更改为列表视图，按钮文本更改为地图。因此，现在如果我再次单击该按钮，它应该返回到地图视图并且该按钮变为列表。

2）我如何实现这个动画？我见过一些页面翻转的应用程序，我也见过一些选项，比如降低不透明度等，但我想实现翻转动画。

感谢您为我提供的任何帮助。对此，我真的非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T15:28:27.017

Interface Builder 可以完成大部分工作。按住控制键并从地图视图控制器的标题为“列表”的 UIBarButtonItem 拖动到列表视图控制器，然后选择 Action Segue“模态”。出现一个代表转场的箭头；单击它并使用属性检查器将转换更改为“水平翻转”。[这是一个视频](http://developer.apple.com/library/ios/#recipes/xcode_help-interface_builder/articles/StoryboardSegue.html)

或者，您可以使用[presentViewController:animated:completion](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/presentViewController%3aanimated%3acompletion%3a)以编程方式执行此操作。

现在要从列表中返回地图，我认为必须以编程方式完成。创建一个方法，调用`dismissViewControllerAnimated:completion:`并让您的列表视图控制器的 UIBarButtonItem 标题为“地图”触发它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T23:14:27.493

阅读您的评论后，我想知道...如果您的应用程序的结构在逻辑上是选项卡式应用程序结构（实际上您将其称为“选项卡栏应用程序”），您是否应该考虑使用 UITabViewController 而不是导航控制器？毕竟，这就是它的设计目的。

如果您*确实*使用 TabViewController，您应该重新考虑您对翻转动画的需求，因为这并不能真正使标签页具有 UI 意义。如果您可以放弃翻转动画，TabViewController 可能是一个不错的选择，您至少应该在放弃这个想法之前尝试一下。它还被设计为增长......您可以在标签栏中合并任意数量的标签。[查看苹果文档（带图片！）](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITabBarController_Class/Reference/Reference.html)

您会注意到选项卡位于屏幕底部，而您的“选项卡”导航控制器按钮位于屏幕顶部的导航栏中。这也有助于随着您的应用程序的增长，因为它很简单 - 从 UI 设计的角度和以编程方式 - 将 navControllers 作为导航工具合并到各个选项卡中。例如，如果您的地图/列表翻转例程确实对您应用程序的这一*部分*有意义，您可以将其保留为单个选项卡（在它自己的 navigationController 中）并为应用程序的其他部分添加其他选项卡...

**更新**
从您的评论中，您说您对 navController-inside-tabBarController 设置感兴趣。在这种情况下，这里有一些方法可以获得翻转过渡并且没有后退按钮..

**(1) 模态展示** 获得所需内容的最简单方法是设置一个 viewController（比如地图视图）以模态展示另一个（列表视图）。

如果在故事板中：

*   将您的 mapViewController 嵌入到带有导航栏按钮的 navController 中，用于导航到您的图片中的 listView
*   将您的 listViewController 添加到故事板并将其嵌入到它自己的 navContoller 中（而不是 mapViewController 的 navController）。将 barButtonItem 拖到此 navController 并将其连接到 listViewController 中的 IBAction
*   按住 CTRL 键从 mapViewController 的“列表”按钮拖动到 listViewController 以创建一个 segue。选择转场并在属性检查器中将转场类型设置为“模态”，并选中过渡“水平翻转”和“动画”。给它一个名字，以防你想在代码中引用它。
*   在 listViewController 的 IBAction 中添加：
    `[[self presentingViewController] dismissViewControllerAnimated:YES completion:nil];`

那应该达到你的结果。您可以使用完成块将信息从列表视图发送回地图视图，和/或将地图视图设置为列表视图的委托。

如果您不使用情节提要，请查看此苹果指南

[从其他视图控制器呈现视图控制器，](https://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ModalViewControllers/ModalViewControllers.html#//apple_ref/doc/uid/TP40007457-CH111-SW1)
尤其是“呈现视图控制器并选择过渡样式”。

这种方法有一个问题——当呈现的视图翻转到屏幕上时，整个先前的视图，包括标签栏，都被翻转到一边。这个想法是，这是一个*模式*视图，用户*需要*在应用程序中执行任何其他操作之前关闭它。

**(2) 在单个 navController 中推送/弹出** 如果这不符合您的意图，您*可以*使用带有推送和弹出视图的单个 NavigationController 进行导航，并且您*可以*隐藏后退按钮......但您确实需要保留后退按钮功能，因为您确实想*返回*mapView，而不是返回新的地图视图*。*

要隐藏后退按钮，请尝试：

```
 self.navigationItem.hidesBackButton = YES 
```

在最上面的 viewControllers'`viewDidLoad`

然后，您可以使用这种 IBAction 在 xib/storyboard 中添加 barButtonItem：

```
[self popViewControllerAnimated:NO] 
```

或者

```
[self popToRootViewControllerAnimated:NO] 
```

您必须在代码中构建翻转动画，因为它不支持作为 UINavigationController 的内置功能（最好留给读者练习！）

**(3) 在单个 viewController 中交换视图** 正如 ghettopia 所建议的，您可以在 navController 中使用单个 viewController（或手动放置 navBar）并使用 UIView 类方法交换两个视图
`transitionFromView:toView:duration:options:animations:completion`
`transitionWithView:duration:options:animations:completion`。

这可能是一个很好的简化解决方案，因为您的列表和地图本质上是同一数据模型的两个视图。

# android - 使用 TouchImageView 显示 GPS 位置

> ID：13915785
> 
> 赞同：0
> 
> 时间：2012-12-17T14:12:37.540
> 
> 标签：android, imageview

我正在使用 TouchImageView [https://github.com/MikeOrtiz/TouchImageView](https://github.com/MikeOrtiz/TouchImageView)来显示图像映射。在该地图上，我需要显示一些点（ImageView）。我有 2 节课：

```
public class TouchImageView extends ImageView
public class TouchImageViewActivity extends Activity 
```

如何跟踪我的图像在 TouchImageView 中的位置并将其返回到 TouchImageViewActivity 以设置点位置？我应该添加侦听器还是其他想法，因为我无法在 TouchImageView 类中设置新的 imageView 位置。

TouchImageViewActivity：（点现在是静态的）

```
public class TouchImageViewActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_touch_image_view);

    TouchImageView img = (TouchImageView) findViewById(R.id.img);
    img.setImageResource(R.drawable.g_map2048);
    img.setMaxZoom(6f);

    ImageView imDot = (ImageView)findViewById(R.id.ImDot3);
    RelativeLayout.LayoutParams lp = new RelativeLayout.LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT);
    lp.setMargins(150, 150, 0, 0);
    imDot.setLayoutParams(lp);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-01T20:06:26.113

我已经对该存储库进行了分叉。我在可缩放图像上添加了大头针（标记），可以拖动。并且您可以按一个按钮来获取图钉 (ImageView) 的位置。 [https://github.com/Mariovc/TouchImageView](https://github.com/Mariovc/TouchImageView)

# forms - Spring MVC @ModelAttribute 填充实体

> ID：13915790
> 
> 赞同：0
> 
> 时间：2012-12-17T14:12:49.220
> 
> 标签：forms, spring, spring-mvc, foreach, modelattribute

今天我坚持使用带有 POST 方法的弹簧表单，它不会将发布的项目提供给我想要的控制器。这是我的代码。

控制器.java

```
@Controller
@RequestMapping("/cart")
public class CartController extends CommonController
{
    @RequestMapping(value = "/add", method = RequestMethod.POST)
    public ModelAndView addCart(@ModelAttribute("productList") Item item, BindingResult result,Model model){
         System.out.println(item.getId()); /// <-- doesn't gives me the ID
         return new ModelAndView("cart");
    }
 } 
```

产品列表.jsp

```
/// Loop through the products of search itemlist and generates the forms with the correct items
<c:forEach var="item" items="${productList.items}" varStatus="status">
                    ${item.name}
        <div class="addCart">
        <c:url value="/cart/add.html" var="addURL" />
            <form:form method="POST" action="${addURL}" modelAttribute="productList">
                <form:hidden path="items[${status.index}].id"/>
                <input type="submit" class="addCartBtn" value="Add to cart" />
            </form:form>
        </div> 
```

BackingBean.java

```
public class SearchForm implements Serializable
{
   private Collection<Item> items;
   private String term;
   // getters and setters
} 
```

${productList} 是遍历所有项目的 backingbean。

我真的不知道问题出在哪里，为什么它没有给我通过 POST 传递的正确数据。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T14:26:23.003

将你的 spring:hidden 标签隐藏为普通的 html 隐藏标签：

```
<form:hidden path="items[${status.index}].id"/> 
```

到

```
<input type="hidden" name="id" value="${item.id}"/> 
```

# css - Css动画优化

> ID：13915791
> 
> 赞同：-5
> 
> 时间：2012-12-17T14:12:52.607
> 
> 标签：css, css-animations

当动画对象不需要显示（它不在视口上）时，我可以*优化CSS 动画不运行吗？*谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T14:31:00.230

如果您可以检测到对象何时在视口中，则可以添加/删除带有动画描述的 css 类。就像是：

```
// the css class to be added/removed
.animationClass
{
      animation: someAnimation 5s;
     -moz-animation: someAnimation 5s; /* Firefox */
     -webkit-animation: someAnimation 5s; /* Safari and Chrome */
     -o-animation: someAnimation 5s; /* Opera */
}

// the jQuery code
if( isObjectInViewPort() == true){
   $('.someObject').addClass('animationClass'); // note that there is no dot before 'animationClass'
   // or remove it $('.someObject').removeClass('animationClass');
} 
```

棘手的部分是检查对象何时不在视口中。在我看来，不断检查对象是否在视口中并阻止动画会弊大于利，因为 css 动画是轻量级的并且效果很好。

# ios6 - UICollectionView 页眉/页脚参考大小崩溃

> ID：13915795
> 
> 赞同：2
> 
> 时间：2012-12-17T14:13:19.663
> 
> 标签：ios6, uicollectionview

我正在努力解决以下问题。我有一个 UICollectionView，它的布局的页眉和页脚参考大小设置为一个值（比如 40.0）。当我删除/插入单元格并且集合视图位于页眉和页脚不在屏幕上的位置时，一切都很好。但是，当他们在屏幕上执行相同的操作时，我的代码会崩溃并出现以下错误：

```
2012-12-17 16:05:05.042 BambooV2Demo[37770:907] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** setObjectForKey: object cannot be nil (key: <_UICollectionViewItemKey: 0x1e04cf70> Type = SV Kind = UICollectionElementKindSectionHeader IndexPath = <NSIndexPath 0x1e04fe90> 2 indexes [0, 0])' 
```

另一方面，如果我将页眉和页脚大小设置为 0.0，一切都会再次完美。当页眉/页脚大小不为零并且它们在屏幕上可见时，是否有人知道崩溃的原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-17T21:04:13.023

当我设置标题大小但没有为标题指定视图时，我遇到了这个问题。相反，我使用了部分插图并将标题大小设置回零。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T08:31:42.750

您应该在布局子类中或通过委托在下面的方法中返回 YES，这将导致 CollectionView 项目重新排列到您的布局中。

```
- (BOOL) shouldInvalidateLayoutForBoundsChange:(CGRect)newBounds
{
    return YES;
} 
```

# printing - 8086 装配时间打印中断

> ID：13915797
> 
> 赞同：0
> 
> 时间：2012-12-17T14:13:23.940
> 
> 标签：printing, x86-16

我想以 hh:mm 格式打印系统时间，并将其存储在`AM`数组或`PM`数组中，具体取决于时间。这是我所拥有的：

```
assume cs:code, ds:data
data segment
    hour db ?
    min db ?
    AM db ?
    PM db ?
data ends

code segment
start:
    mov ah, 2Ch     ;
    int 21h
    mov hour, CH
    mov min, CL 
```

我知道该函数`2Ch`返回`CH = hour`. `CL = minute`. `DH = second`. `DL = 1/100`秒

我如何使用它来打印当前时间？有任何想法吗？（我正在使用 TASM、TLINK 和 turbo 调试器）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T14:15:20.753

您需要查找某种用于写入控制台的系统调用（如果您不在主流操作系统下运行，我认为实际上有一些 BIOS 例程可以执行此操作）或将您的代码与提供打印功能并调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T14:28:50.940

这就是您打印字符串的方式：[汇编指令简介](http://prism2.mem.drexel.edu/~rares/asm3.htm) 这就是您打印十进制数的方式：[在 8086 模拟器中打印十进制](https://stackoverflow.com/questions/9113060/print-decimal-in-8086-emulator)

# animation - 首次加载 cocos2d 时出现断断续续/缓慢的动画

> ID：13915805
> 
> 赞同：0
> 
> 时间：2012-12-17T14:13:48.417
> 
> 标签：animation, cocos2d-iphone

现在写，我正在使用 cocos2d 创建一个交互式电子书。当程序运行时，封面动画只有在初始加载时才会断断续续。这个动画在封面上，而且很大。我们说的是 13 个纹理图集，26 个图像。

我知道问题源于预加载/加载图像，但我已经在动画发生之前加载了所有图像。

```
-(id) init {
     if( (self=[super init]) ) {
               isTouchEnabled_=YES;
    //Pg0 Animations
    [[CCSpriteFrameCache sharedSpriteFrameCache]addSpriteFramesWithFile:@"CB0A0.plist"];
    [[CCSpriteFrameCache sharedSpriteFrameCache]addSpriteFramesWithFile:@"CB0A1.plist"];
    ...etc.}} 
```

本书的整体设置如下。我构建了一个场景，一个菜单层，然后菜单层推送和弹出不同的层/不同的页面。

当封面页被加载（Pg0）时，如果用户触摸一张图片，它会运行动画。然后，当用户再次触摸图片时，会运行第二个动画。

书的所有图像都加载在菜单层中（所以在任何页面推送或弹出之前）。我已经尝试在场景中加载这些图像，或者在各个页面上加载以加快进程，但这不会影响时间。

我通过一个动画助手运行我的动画，它为我循环遍历图像。

任何帮助都会很棒，如果需要，我很乐意分享有关该项目的更多代码或信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-29T08:15:48.227

有同样的问题。使用 cocos2d v0.9 动画效果很好，没有卡顿。迁移到 cocos2d v2.0 时出现滞后。

当你在 cocos2d v0.9 中添加精灵到缓存（addSpriteFramesWithFile:(NSString*)plist）时，texture2d 也会被创建（CCSpriteFrameCache.m:238），在 cocos2d v2.0 中没有创建 textture2d，纹理是在第一次使用时创建的CCSpriteFrame。我通过添加来修复它

```
[[CCTextureCache sharedTextureCache] addImage:textureFileName]; 
```

在 CCSpriteFrameCache.m:207 (v2.0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-01T04:08:16.623

我只是在 cocos2D v3.1 iphone 中遇到了这个问题。我有缓存的精灵表，但在加载时仍然结结巴巴。我在另一篇文章的某处发现您还需要加载纹理本身以消除初始滞后。这就是我在缓存 sprites 方法中所做的：

```
[[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:@"spritesheet.plist"];
CCTexture *temporaryLoadTexture = [CCTexture textureWithFile:@"spritesheet.png"]; 
```

只需加载一个虚拟的 CCTexture 文件，就可以消除所有首次动画和精灵滞后。希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T23:16:47.620

检查您的 AppDelegate 是否实现了内存警告方法。检查该方法的作用。

默认情况下，cocos2d 实现该方法并清除所有缓存。现在，当在预加载纹理时触发它时，cocos2d 会删除预加载的纹理，因为收到了内存警告但这些预加载的纹理尚未使用。Cocos2d 认为它们是“未使用的”并将它们从内存中删除。这意味着下次您使用该纹理时，需要再次从磁盘加载它。

我写了一篇博客文章[，描述了这个问题，以及解决它的方法](http://www.learn-cocos2d.com/2012/11/optimize-memory-usage-bundle-size-cocos2d-app/)。最重要的是：获取 TexturePacker 并仅将 .pvr.ccz 用于纹理图集。尽可能将纹理颜色深度降低到 16 位。并确保转储纹理内存使用情况，以了解您实际使用了多少内存，以及该内存量是否在合理范围内。包括您可能支持的内存较少的旧设备。

# samba - 通过 AD 的 Samba 无法正常工作

> ID：13915812
> 
> 赞同：-1
> 
> 时间：2012-12-17T14:14:16.933
> 
> 标签：samba

我正在尝试让 samba 与 Windows AD 一起使用。而且我不能通过 samba 使用我的共享。

我的 smb.conf

```
#GLOBAL PARAMETERS
[global]
   workgroup = MY_DOMAIN
   realm = MY_DOMAIN.COM
   preferred master = no
   server string = Linux Test Machine
   security = ADS
   encrypt passwords = yes
   password server = MY_MASTER_DOMAIN_CONTROLLER
   log level = 3
   log file = /var/log/samba/%m
   max log size = 50
   printcap name = cups
   printing = cups
   winbind enum users = Yes
   winbind enum groups = Yes
   winbind use default domain = Yes
   winbind nested groups = Yes
   winbind separator = +
   idmap uid = 1100-20000
   idmap gid = 1100-20000
   ;template primary group = "Domain Users"
   template shell = /bin/bash

[homes]
   comment = Home Direcotries
   valid users = %S
   read only = No
   browseable = No

[tmp]
   comment = Directory for storing pictures by jims users
   path= /var/tmp
   Valid Users = @"MY_DOMAIN+group name" MY_DOMAIN+MY_ACCOUNT
  ; public=no
   writable=yes
   browseable=yes
   read only = no
   guest ok = no
   create mask = 0777
   directory mask = 0777 
```

wbinfo -u 和 wbinfo -g 按预期工作。kinit MY_ACCOUNT@MY_DOMAIN.COM 也可以。

但我无法连接到 samba。我正在使用 debian 5、samba 3.2.5 和 kerberos 5。我的 /var/www 是 777。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-25T16:08:38.023

您缺少连接到 AD 的后端。

```
idmap config MY_DOMAIN:default = true
idmap config MY_DOMAIN:schema-mode = rfc2307
idmap config MY_DOMAIN:range = 10000-49999
idmap config MY_DOMAIN:backend = ad
idmap config * : backend = tdb
idmap config * : range = 50000-99999
winbind nss info = rfc2307 
```

# ios - 仅将 XML 中的一些项目添加到 TableView

> ID：13915816
> 
> 赞同：0
> 
> 时间：2012-12-17T14:14:42.300
> 
> 标签：ios, xml, xcode, parsing, uitableview

使用[本教程](http://www.raywenderlich.com/2636/how-to-make-a-simple-rss-reader-iphone-app-tutorial)，我制作了一个 iPhone 博客应用程序。它使用创建的数组的计数来设置行数。我不想做每一个项目，因为现在有 200 多个并且还在增长。当我为部分中的行返回任何数字时，它总是崩溃，错误约为 0 超出空数组的范围。我还需要从本教程中调整什么以仅允许前 20 个项目显示在 tableview 中？

更新：我认为我正在取得一些进展。在对数组进行排序的 reqeustFinished 方法中，我对其进行了编辑以使其成为：

```
NSMutableArray *entries = [NSMutableArray array];
            [self parseFeed:doc.rootElement entries:entries];                
            [entries removeLastObject];

            [[NSOperationQueue mainQueue] addOperationWithBlock:^{

                for (RSSEntry *entry in entries) {
                    int insertIdx = [_allEntries indexForInsertingObject:entry sortedUsingBlock:^(id a, id b) {
                        RSSEntry *entry1 = (RSSEntry *) a;
                        RSSEntry *entry2 = (RSSEntry *) b;
                        return [entry1.articleDate compare:entry2.articleDate];
                    }];
                    NSLog(@"%@", entries);

                    [_allEntries insertObject:entry atIndex:insertIdx];
                    [self.tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:[NSIndexPath indexPathForRow:insertIdx inSection:0]]
                                          withRowAnimation:UITableViewRowAnimationRight]; 
```

***将行添加到 removeLastObject 条目，删除第一项（理想情况下，这是我第一天想要的唯一一项）。是否有其他方法可以让我删除索引处的一系列对象？***

这是我为表视图类和数据源提供的代码。

```
- (void)refresh {
    self.allEntries = [NSMutableArray array];
    self.queue = [[[NSOperationQueue alloc] init] autorelease];
    self.feeds = [NSArray arrayWithObjects:@"addressofxmlfile",
                  nil];
    for (NSString *feed in _feeds) {
        NSURL *url = [NSURL URLWithString:feed];
        ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
        [request setDelegate:self];
        [_queue addOperation:request];
    }

}

- (void)viewDidLoad {
    [super viewDidLoad];    
    self.refreshControl = [[UIRefreshControl alloc] init];

    [self.refreshControl addTarget:self action:@selector(refreshInvoked:forState:) forControlEvents:UIControlEventValueChanged];
    [self refresh];
}
-(void) refreshInvoked:(id)sender forState:(UIControlState)state {
    // Refresh table here...
    [_allEntries removeAllObjects];
    [self.tableView reloadData];
    [self refresh];
}

- (void)parseRss:(GDataXMLElement *)rootElement entries:(NSMutableArray *)entries {

    NSArray *channels = [rootElement elementsForName:@"channel"];
    for (GDataXMLElement *channel in channels) {            

        NSString *blogTitle = [channel valueForChild:@"title"];                    

        NSArray *items = [channel elementsForName:@"item"];
        for (GDataXMLElement *item in items) {

            NSString *articleTitle = [item valueForChild:@"title"];
            NSString *articleUrl = [item valueForChild:@"guid"];            
            NSString *articleDateString = [item valueForChild:@"pubdate"];        
            NSDate *articleDate = [NSDate dateFromInternetDateTimeString:articleDateString formatHint:DateFormatHintRFC822];
            NSString *articleImage = [item valueForChild:@"description"];
            NSDateFormatter * dateFormatter = [[[NSDateFormatter alloc] init] autorelease];
            [dateFormatter setTimeStyle:NSDateFormatterShortStyle];
            [dateFormatter setDateStyle:NSDateFormatterMediumStyle];
            NSString *dateofarticle = [dateFormatter stringFromDate:articleDate];
            NSString *days = [articleImage substringFromIndex:7];

            RSSEntry *entry = [[[RSSEntry alloc] initWithBlogTitle:blogTitle
                                                      articleTitle:articleTitle
                                                        articleUrl:articleUrl
                                                       articleDate:articleDate
                                                      articleImage:articleImage
                                                              date:thedate] autorelease];
            [entries addObject:entry];

        }      
    }

}

- (void)parseFeed:(GDataXMLElement *)rootElement entries:(NSMutableArray *)entries {

    if ([rootElement.name compare:@"rss"] == NSOrderedSame) {
        [self parseRss:rootElement entries:entries];
    }else {
        NSLog(@"Unsupported root element: %@", rootElement.name);
    }    
}

- (void)requestFinished:(ASIHTTPRequest *)request {

    [_queue addOperationWithBlock:^{

        NSError *error;
        GDataXMLDocument *doc = [[GDataXMLDocument alloc] initWithData:[request responseData] 
                                                               options:0 error:&error];
        if (doc == nil) { 
            NSLog(@"Failed to parse %@", request.url);
        } else {

            NSMutableArray *entries = [NSMutableArray array];
            [self parseFeed:doc.rootElement entries:entries];                

            [[NSOperationQueue mainQueue] addOperationWithBlock:^{

                for (RSSEntry *entry in entries) {

                    int insertIdx = [_allEntries indexForInsertingObject:entry sortedUsingBlock:^(id a, id b) {
                        RSSEntry *entry1 = (RSSEntry *) a;
                        RSSEntry *entry2 = (RSSEntry *) b;
                        return [entry1.articleDate compare:entry2.articleDate];
                    }];

                    [_allEntries insertObject:entry atIndex:insertIdx];
                    [self.tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:[NSIndexPath indexPathForRow:insertIdx inSection:0]]
                                          withRowAnimation:UITableViewRowAnimationRight];

                }                            

            }];

        }        
    }];
    [self.refreshControl endRefreshing];

}

- (void)requestFailed:(ASIHTTPRequest *)request {
    NSError *error = [request error];
    NSLog(@"Error: %@", error);
    [self refresh];
}

#pragma mark -
#pragma mark Table view data source

// Customize the number of sections in the table view.
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
  // [tableView setBackgroundColor:[UIColor redColor]];
    return 1;
}

// Customize the number of rows in the table view.
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {     
    return [_allEntries count];
}

// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";  

    Cell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {  
        cell = [[Cell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
    }

    RSSEntry *entry = [_allEntries objectAtIndex:indexPath.row];

           CALayer * l = [cell.imageView layer];
        [l setMasksToBounds:YES];
        [l setCornerRadius:11];
        [l setBorderWidth:2.0];
        [l setBorderColor:[[UIColor blackColor] CGColor]];
        NSDateFormatter * dateFormatter = [[[NSDateFormatter alloc] init] autorelease];
        [dateFormatter setTimeZone:[NSTimeZone localTimeZone]];
        [dateFormatter setTimeStyle:NSDateFormatterShortStyle];
        [dateFormatter setDateStyle:NSDateFormatterShortStyle];
        NSString *articleDateString = [dateFormatter stringFromDate:entry.articleDate];
        UIFont *cellFont = [UIFont fontWithName:@"Papyrus" size:19];
        UIFont *cellFont2 = [UIFont fontWithName:@"Papyrus" size:17];
       // cell.imageView.image = [UIImage imageNamed:@"icon@2x.png"];
        cell.textLabel.text = entry.date;
        cell.detailTextLabel.text = entry.articleTitle;
    cell.detailTextLabel.textColor = [UIColor blackColor];

        cell.textLabel.font = cellFont;
        cell.detailTextLabel.font = cellFont2;

    return cell;
}
-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {

    return 73.4;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T21:06:26.857

您在此处的 Refresh 方法中将 allEntries 分配给新数组：

```
- (void)refresh {
    self.allEntries = [NSMutableArray array]; 
```

本教程仅在 ViewDidLoad 方法中执行此操作。不确定这是否是一个问题，因为我不确切知道何时/如何调用刷新。

找到了显示如何在[此处](https://stackoverflow.com/a/9434849/1354100)隐藏单元格/行的答案。

# java - 变量已经定义？

> ID：13915820
> 
> 赞同：0
> 
> 时间：2012-12-17T14:15:06.963
> 
> 标签：java, netbeans

在学习如何使用 tpass 参数时，我遇到了一个问题，我无法弄清楚程序显示错误的原因。我将突出显示下面的代码。

```
public class pkgExone 
{
    static void displayMarkRange(int[] ref,double[] mark, double size,double topValue,
    double bottomValue, String message)
        {
            int index; //declare a variable index
              System.out.println("\n\n"+ message+"\n\n"); //print parameter message
                System.out.println("Reference \t Mark ");
                  System.out.println("Number \t Obtained\n");
                   // loop through the whole array and decide whether to print a students mark
        for(index=0;index<=size-1;index=index+1)
            {
              if ((mark[index]>= bottomValue) && (mark[index]<=topValue))
                {
                 System.out.println( ref[index]+" \t\t\t"+ mark[index]);
                } // end if construct
            } // end for loop
            System.out.println("\n\n");
        } // end of displayMarkRangeMethod

    static double Calaverage(double [] mark, double size)
    {
        int index;
        double total=0;
        double calculatedaverage;        
        int validentries=0;

        for (index=0;index<=size-1;index ++)

          if ((mark[index]>=1) && (mark [index] <=100))
           {
           **double total + mark [index];
           int validentries= validentries +1;**
           }
        **double calculatedaverage = total/validentires;**
        return calculatedaverage;

    }

    public static void main(String[] args) 
    {
        double [] ref; 
        double Averagemark;
        double howMany=10;
        int[] studentID = {900,901,902,903,904,905,906,907,908,909};
        double[] examMark = {23,45,56,90,83,114,48,39,26,102};

        displayMarkRange(studentID,examMark,howMany,100,1,"All Students that have valid marks");
        displayMarkRange(studentID,examMark,howMany,100,70,"All Distinction students");
        displayMarkRange(studentID,examMark,howMany,69,55,"All Merit students");
        displayMarkRange(studentID,examMark,howMany,54,40,"All Pass students");
        displayMarkRange(studentID,examMark,howMany,39,1,"All Fail students");
        displayMarkRange(studentID,examMark,howMany,69,40,"All Pass or Merit students");
        displayMarkRange(studentID,examMark,howMany,100,90,"Student that got between 90 and 100");
        displayMarkRange(studentID,examMark,howMany,10,1,"Student that got between 10 and 1");
        displayMarkRange(studentID,examMark,howMany,80,20,"Student that got between 80 and 20");
        displayMarkRange(studentID,examMark,howMany,100,**Averagemark**,"Students that got more than the average");
        displayMarkRange(studentID,examMark,howMany,Averagemark,1,"Students that got less than the average");
        displayMarkRange(studentID,examMark,howMany,120,101,"Students whos marks are invalid");
    }// end of psvm 
}//end of public class 
```

当我编译文件时：

```
Updating property file: H:\PIJOOP\ProjectSectionEleven\build\built-jar.properties
Compiling 1 source file to H:\PIJOOP\ProjectSectionEleven\build\classes
H:\PIJOOP\ProjectSectionEleven\src\projectsectioneleven\pkgExone.java:42: error: ';' expected
           double total + mark [index];
H:\PIJOOP\ProjectSectionEleven\src\projectsectioneleven\pkgExone.java:42: error: not a statement
           double total + mark [index];
2 errors
H:\PIJOOP\ProjectSectionEleven\nbproject\build-impl.xml:628: The following error occurred while executing this line:
H:\PIJOOP\ProjectSectionEleven\nbproject\build-impl.xml:246: Compile failed; see the compiler error output for details.
BUILD FAILED (total time: 0 seconds) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T14:19:38.670

这不是有效的代码

```
double total + mark [index]; 
```

也许你打算

```
total += mark [index]; 
```

您只需为给定范围声明一次变量。

代替

```
 **double calculatedaverage = total/validentires;**
    return calculatedaverage; 
```

我只想

```
return total / validentires; 
```

* * *

为了您的兴趣，这就是我可能编写该方法的方式。注意：`size`必须`int`不是双精度数。

```
static double average(double... marks) {
    double total = 0;
    int count= 0;

    for(double mark: marks) {
        if (mark < 1 || mark > 100) continue;

        total += mark;
        count++;
    }
    return total / count;
} 
```

您可以为所有标记调用它

```
double average = average(marks); 
```

或一些标记

```
double average = average(Arrays.copy(marks, size)); // note size must be an int. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T14:18:13.417

`double total + mark [index]`是句法废话。您的意思可能是`total += mark[index]`因为您已经声明了`double total`.

类似的论点适用于您的第二个错误：您正在重新声明`calculatedaverage`. 在这里你只想放下`double`。

不过，我建议删除整个变量`calculatedaverage`并简单地写`return total/validentires;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T14:18:14.673

正如它所说，看看@这一行`**double total + mark [index];`。不应该`total += mark[Index];`吗？

仔细查看异常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T14:19:01.397

以下在语法上无效：

```
 double total + mark [index]; 
```

我猜你的意思是：

```
 total += mark [index]; 
```

下一行也有问题：

```
 int validentries= validentries +1; 
```

虽然在语法上有效，但它隐藏了另一个`validentries`而不是更新它。利用：

```
 validentries= validentries +1; 
```

最后，你已经`calculatedaverage`宣布了两次。您可以删除出现在函数顶部的声明：

```
 double calculatedaverage; 
```

# asp.net-mvc-3 - 在MVC中返回View时传递路由参数

> ID：13915822
> 
> 赞同：2
> 
> 时间：2012-12-17T14:15:10.973
> 
> 标签：asp.net-mvc-3, view, routes

我在 Razor-MVC 中有一个 Web 应用程序，事情是这样的：

我有一个动作，就像 MVC {controller}/{action}/{id} 中的每个动作一样现在......我有另一个动作，需要返回这个视图：`return View("Xview")`也有模型视图。模型视图不是问题，但是当我在`return View("Xview")`没有 id 的情况下执行类似 {controller}/{action} 时看到的路线......我需要在我的路线中使用该 id。我知道我可以做，`return RedirecToAction("Xview", new { id = idX })`但我需要使用`return View(...)`

编辑：

因为我需要返回视图的主要问题是因为此操作中的 ModelView 填充了时间数据......而在 Xview 操作中，此 ModelView 是从数据库调用的，如果我返回 RedirectToAction 则时间数据会丢失，这就是为什么我返回 View 而不是保留我的 ModelView。

我希望你能帮助我，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T18:56:50.353

Based on the edit to the question, I would say that the real issue is the state of the application. So instead of passing data between from request to request, use the Session object to store temporary results.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T14:21:30.627

route 参数用于请求，而不是响应。除非您将用户重定向作为响应的一部分，否则这将是一个新请求。

如果您想返回 a`View`然后将您需要的任何信息作为模型的一部分或在`ViewBag`. 如果您想重用现有代码（例如另一个操作），那么您需要使用`RedirectToAction`.

# javascript - 如果 jquery.js 两次包含在页面中怎么办？

> ID：13915824
> 
> 赞同：1
> 
> 时间：2012-12-17T14:15:17.463
> 
> 标签：javascript, jquery

如果我两次将 jquery.js 引入页面（**无意或有意**），会发生什么？

jquery中是否有任何机制可以处理这种情况？

AFAIK，后一个jquery会覆盖前一个，如果与前一个有一些动作绑定，它会被清除。

我该怎么做才能避免后一个覆盖前一个？

===编辑===

我不明白为什么这个问题被否决了。投反对票的人能给出答案吗？

==再次编辑== @user568458

没错，现在是测试代码：

```
<html>
<head>
</head>
<body>
fast<em id="fast"></em><br>
slow<em id="slow"></em><br>
<em id="locker"></em>
</body>
<script type="text/javascript">
function callback(type){
    document.getElementById(type).innerHTML=" loaded!";
    console.log($.foo);
    console.log($);
    console.log($.foo);
    $("#locker").html(type);
    console.log($("#locker").click);
    $("#locker").click(function(){console.log(type);});
    $.foo = "fast";
    console.log($.foo);
}
function ajax(url, type){
    var JSONP = document.createElement('script');
    JSONP.type = "text/javascript";
    JSONP.src = url+"?callback=callback"+type;
    JSONP.async = JSONP.async;
    JSONP.onload=function(){
        callback(type);
    }
    document.getElementsByTagName('head')[0].appendChild(JSONP);
}
</script>
<script>
ajax("http://foo.com/jquery.fast.js", "fast");
ajax("http://foo.com/jquery.slow.js", "slow");
</script>
</html> 
```

它产生了结果：

```
undefined test:12
function (a,b){return new e.fn.init(a,b,h)} test:13
undefined test:14
function (a,c){c==null&&(c=a,a=null);return arguments.length>0?this.bind(b,a,c):this.trigger(b)} test:16 
fast test:19
undefined test:12
function (a,b){return new e.fn.init(a,b,h)} test:13
undefined test:14
function (a,c){c==null&&(c=a,a=null);return arguments.length>0?this.bind(b,a,c):this.trigger(b)} test:16 
fast 
```

前一个（jquery.fast.js）的令牌“$”被后一个（jquery.slow.js）覆盖。

有什么方法可以避免覆盖吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-17T14:35:26.073

我确实尝试过这段代码：

```
<html>
<head>
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript">
            $(function() {
                    $('#try').click(function() {
                            alert('ok');
                    });
            });
    </script>
    <script type="text/javascript" src="jquery.js"></script>
</head>
<body>

<button id="try">Try me</button>

</body>
</html> 
```

什么也没发生。点击我有一个警报。如果第二个 jquery.js 在按钮之前或之后加载到 body 标记中，结果相同。

# java - 内存中的 xml 到 xsd 的翻译器？

> ID：13915828
> 
> 赞同：1
> 
> 时间：2012-12-17T14:15:43.437
> 
> 标签：java, xml, xsd

我需要从 XML 文档生成模式。问题是 XML 文档将作为一大串内容提供，并且 XSD 必须保留在内存中。

XSD 最初将按标签和属性进行排序并进行散列以生成访问过的 xml 文档的“指纹”。因此，生成的 XSD 的数据结构并不重要，只要它是某种内存结构即可。

我无法创建中间文件，也无法对 shell 执行“exec”来完成此操作。

我知道并使用过几个命令行工具来从 XML 文件生成模式。我已经打开了其中的几个，但很失望我看过的所有工具都假设源和目标是文件，并且这种假设渗透到代码中，因此我不能只用自己的驱动程序类替换重新格式化输入和输出。

有谁知道能够处理此任务的翻译包？

# ruby-on-rails - 对 Ruby on Rails Active Record 结构感到困惑

> ID：13915830
> 
> 赞同：0
> 
> 时间：2012-12-17T14:15:56.540
> 
> 标签：ruby-on-rails, activerecord

我无法想出一种将我的模型构建为以下内容的方法：

我通过 Devise 拥有用户 - 用户可以担任（除其他外）销售、管理员和客户的角色。这是通过具有角色模型的 HABTM 设置的。我已经设置了一个方法，所以我可以执行以下操作

```
user.is? :Client 
```

我需要的是以下内容：

*   具有销售角色的用户可以拥有任意数量的客户。

因此，当销售人员登录时，我可以执行 User.clients 来获取与他们相关的所有客户。

*   具有客户端角色的用户只能拥有一个客户端。

当一个新客户在线注册时，我想通过设计创建他们的用户，然后还通过嵌套值创建一个客户，链接到他们创建的用户。

*   客户应该有一个 SalesAgent，使用 User 模型

查看客户端时，应该能够有一个下拉列表来选择 SalesAgent。如上所述，这应该使用 User 模型。

*   客户端应该只有一个具有客户端角色的设计用户，使用用户类

客户应该能够通过设备登录以访问他们的详细信息、跟踪订单等。

如您所见，这非常令人困惑，我不确定最好的方法是什么。我唯一能想到的就是在用户和客户之间使用 HABTM，然后在表单中加入和破解以使其工作。有一个更好的方法吗？我看过也许使用

```
has_one :sales_agent, :class_name => "User" 
```

但不能让它工作。：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T14:26:03.747

与其使用自己滚动的单表继承方案重载 User 类，不如在 db 中拆分角色。它确实使现阶段的事情更加清晰，并且它是存储特定于不属于任何用户的客户或销售代理的数据的更好方法。例如：

```
class User < ActiveRecord::Base
  has_many :clients
  has_many :sales_agents
end

class Client < ActiveRecord::Base
  belongs_to :user
  belongs_to :sales_agent
end

class SalesAgent < ActiveRecord::Base
  belongs_to :user
  has_many :clients
end 
```

# svn - 'svn' 未被识别为内部或外部命令

> ID：13915832
> 
> 赞同：7
> 
> 时间：2012-12-17T14:16:05.713
> 
> 标签：svn, maven, cmd

当我尝试在 net beans IDE 上构建我的 maven 应用程序时，出现此错误，请帮助我。

```
Checking for local modifications: skipped.
Executing: cmd.exe /X /C "svn --non-interactive update D:\server"
Working directory: D:\server
Provider message:
The svn command failed.
Command output:
'svn' is not recognized as an internal or external command,
operable program or batch file.

------------------------------------------------------------------------
BUILD FAILURE
------------------------------------------------------------------------
Total time: 2.070s
Finished at: Mon Dec 17 19:24:19 IST 2012
Final Memory: 15M/175M
------------------------------------------------------------------------
Failed to execute goal org.codehaus.mojo:buildnumber-maven-plugin:1.1:create (default) on project red5-server: Couldn't update project. Error! -> [Help 1]

To see the full stack trace of the errors, re-run Maven with the -e switch.
Re-run Maven using the -X switch to enable full debug logging.

For more information about the errors and possible solutions, please read the following articles:
[Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-17T14:43:51.837

我看到你正在执行这一行：

```
cmd.exe /X /C "svn --non-interactive update D:\server 
```

这意味着在 %PATH% 变量中设置的任何目录中都没有`svn.bat`或`svn`找到。

你的 Windows 系统上安装了 Subversion 吗？如果您使用了 Subversion 的 CollabNet 版本，它应该会自动更新您的 PATH 以`C:\Program Files\Subversion\bin`在您的 %PATH% 变量中包含或类似的内容。如果没有，请打开系统控制面板，转到*高级*选项卡，然后单击*设置环境变量*。找到PATH环境变量，添加`svn.exe`程序所在的目录。

如果您尚未安装 Subversion，请从 CollabNet、SlikSVN 或 Wandisco 安装它。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-03T10:57:02.417

您也许应该使用`javasvn`提供程序。这样，您的构建/发布将不依赖于 SVN 客户端的本地安装和设置环境变量。

```
<plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-release-plugin</artifactId>
        <version>2.2.2</version>
        <dependencies>
            <dependency>    
                <groupId>com.google.code.maven-scm-provider-svnjava</groupId>
                <artifactId>maven-scm-provider-svnjava</artifactId>
                <version>1.6</version>
            </dependency>
        </dependencies>
        <configuration>
            <providerImplementations>
                <svn>javasvn</svn>
            </providerImplementations>
            <goals>deploy</goals>
            <tagBase>https://svn.somedomain/project/tags</tagBase>
            <autoVersionSubmodules>true</autoVersionSubmodules>
            <tagNameFormat>project-@{project.version}</tagNameFormat>
        </configuration>
</plugin> 
```

# c# - 验证域实体中的唯一值

> ID：13915833
> 
> 赞同：1
> 
> 时间：2012-12-17T14:16:10.840
> 
> 标签：c#, design-patterns, domain-driven-design

我有一个场景，需要验证域实体属性是唯一的，然后才能将其保存到数据库中。这是一个简单的*Product*类。假设我想验证在创建新产品时**ProductKey 字符串属性是唯一的**：

```
public class Product : EntityBase
{
    int ID { get; set; }
    string ProductKey { get; set; }
    int CategoryID { get; set; }

    bool IsValid
    {
        get
        {
            if (string.IsNullOrEmpty(ProductKey))
            {
                ValidationErrors.Add("ProductKey Required.");
            }

            if (CategoryID == 0)
            {
                ValidationErrors.Add("CategoryID Required.");
            }

            /* Validation that the product key is unique could go here? i.e. requires a database read. */

            return ValidationErrors.Count() == 0;
        }
    }
} 
```

由于我使用的是领域驱动设计，因此产品实体不了解持久性或服务层。我可以向 Service 方法添加一个检查，如下所示：

```
public class ProductService 
{
    private IProductRepository _productRepository = new ProductRepository();

    public int CreateProduct(Product item) 
    {
        if (item.IsValid)
        {
            if (ProductKeyIsUnique(item.ProductKey))
            {
                _productRepository.Add(item);
            }
            else
            {
                throw new DuplicateProductKeyException();
            }

        }
    }

    private bool ProductKeyIsUnique(string productKey)
    {
        return _productRepository.GetByKey(productKey) == null;
    }

} 
```

这很简单，但理想情况下我希望这样的逻辑存在于域模型中。也许通过引发某种可以被服务层捕获的验证事件？

这种场景是否有最佳实践或已知的设计模式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T15:14:03.897

产品密钥唯一性不是领域对象知识。所以你不需要域验证。为什么产品应该关心关键的唯一性？在我看来，这是应用层的责任。您的解决方案似乎对我有效且正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T08:52:42.427

除非您使用可序列化的隔离级别，否则您的解决方案对于并发事务是不安全的。我宁愿使用更简单的解决方案。执行此操作的常用方法是仅在数据库中使用唯一约束。尝试在您的领域中对此进行建模只会引入不必要的复杂性。

# c++ - GCC 4.6 和 4.7 上模板模板推导的两个不同结果

> ID：13915835
> 
> 赞同：5
> 
> 时间：2012-12-17T14:16:15.323
> 
> 标签：c++, templates, gcc, c++11, metaprogramming

考虑以下代码：

```
#include <iostream>
#include <vector>
#include <array>
#include <type_traits>

// Version A
template<typename T>
void f(const T& x)
{
    std::cout<<"Version A"<<std::endl;
}

// Version B
template<typename... T1, template<typename...> class T>
void f(const T<T1...>& x)
{
    std::cout<<"Version B"<<std::endl;
}

// Version C
template<typename T1 = double, typename TN = size_t, template<typename, TN...> class T, TN... N>
void f(const T<T1, N...>& x)
{
    std::cout<<"Version C"<<std::endl;
}

// Main
int main(int argc, char* argv[])
{
    f(double());
    f(std::vector<double>());
    f(std::array<double, 3>());
    return 0;
} 
```

Windows 上的 GCC 4.6.2 提供：

```
Version A
Version B
Version C 
```

Linux 上的 GCC 4.7.1 提供：

```
Version A
Version B
Version A 
```

所以问题是：为什么？这是错误还是未定义的行为？我应该将其发布在 GCC 错误报告上吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T14:30:51.933

它看起来像 gcc 4.7.x 中的一个错误（4.7.2 有同样的问题）。这是一个更简单的例子：

```
template<int N> struct S {};
template<typename T = int, T N> void f(S<N>) {}
int main() { S<1> s; f(s); } 
```

gcc 4.7.2 失败并显示：

```
source.cpp:3:25: error: no matching function for call to 'f(S<1>&)'
source.cpp:3:25: note: candidate is:
source.cpp:2:38: note: template<class T, T N> void f(S<N>)
source.cpp:2:38: note:   template argument deduction/substitution failed: 
```

# javascript - 一个数组元素占用多少内存？

> ID：13915837
> 
> 赞同：7
> 
> 时间：2012-12-17T14:16:24.037
> 
> 标签：javascript

我认为浏览器之间可能存在差异，

但是我如何找出一个数组或它的一个元素在 Javascript 中占用了多少内存？

我想弄清楚使用类型化数组时节省了多少空间。

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T14:42:05.757

这取决于很多方面。

*   用于存储变量的引用的长度可以在大小上有所不同（如果您不使用关联数组，它实际上在 JS 中并不存在，但这是一个不同的讨论）。
*   物品本身的大小也可能不同。基本上，用于存储某种类型对象的二进制表示是构成内存的原因。
    *   8 位 int 使用 1 个字节。
    *   16 位 int 使用 2 个字节。
    *   字符串中的字符使用 2 或 4 个字节（因为 UTF-16）。
*   如果您想更好地了解大小/速度/执行时间，我认为唯一准确的方法是使用浏览器附带的分析工具，或使用 FireBug 等插件。

现实是不同的。您不必担心客户端存储。至少不是这样。您真正需要的唯一特定于内存的控制是[**memoization**](http://en.wikipedia.org/wiki/Memoization)。除此之外，你需要做的就是**清理**你的痕迹，可以这么说。如果您在 OOP 环境中，请确保在完成后始终实例化引用并将您的和引用归`delete`空。`COM``DOM`

如果您想清空集合（数组），只需使用`delete`运算符。如果您没有将集合定义为实例属性，而是将`var`其定义为上下文变量，请使用`myArray.length = 0;`它将`delete`整个存储在数组中。

如果您正在处理大型集合，则直接分配比使用该`Array.prototype.push();`方法更快。`myArray[i] = 0;`比`myArray.push(0);`根据 jsPerf.com[测试用例](http://jsperf.com/array-direct-assignment-vs-push/11)更快。

遍历数组所需的时间可能会根据您引用数组长度的方式以及您使用的 Internet 浏览器而发生很大变化。

```
// Option 1
for (var i = 0; i < someArray.length; i++) {
    // do something;
};
// Option 2
var l =  myArray.length;
for(var i = 0; i < l; i++) {
    // do something
};
// Option 3
for (var i = 0, ii = someArray.length; i < ii; i++) {
    // do something;
}; 
```

上述测试用例可[在此处](http://jsperf.com/for-length-caching)获得。

截至2015年6月6日，相对速度如下：

```
+--------+------------+---------------+----------------------+
| Option | Firefox    | Google Chrome | Internet Explorer 11 |
+--------+------------+---------------+----------------------+
| 1      | Fastest    | 0.35% Slower  | 46% Slower           |
| 2      | 21% Slower | 0.15% Slower  | 0.09% Slower         |
| 3      | 21% Slower | Fastest       | Fastest              |
+--------+------------+---------------+----------------------+ 
```

定义数组时，绝对没有必要指定长度，尤其是在进行延迟初始化时。

```
// Doing this is pointless in JS. It will result in an array with 100 undefined values.
var a = new Array(100);

// Not even this is the best way.
var a = new Array();

// Using the array literal is the fastest and easiest way to do things.
var a = []; 
```

数组定义的测试用例可[在此处](http://jsperf.com/new-array-vs-literal-notation)获得。

# mysql - 如何部署连接到 MySql 数据库的 Lightswitch 应用程序

> ID：13915847
> 
> 赞同：1
> 
> 时间：2012-12-17T14:16:57.633
> 
> 标签：mysql, web-config, visual-studio-lightswitch, mysql-connector

我有一个简单的（尚未验证）Lightswitch VS 2012 应用程序。我本地计算机上的那个连接到一个 mysql 数据库（该数据库由我的托管公司托管）。一切正常。

然后我将此应用程序“发布”到我的本地 IIS 服务器，并将所有内容复制到我的托管公司服务器。

它主要工作，除了 WCF 服务不起作用。直接连接到 WCF 服务（.svc 文件）后，我收到“请求错误”。Trace.axd 中的堆栈跟踪如下

```
[Microsoft.LightSwitch.DataService][Application:Error][LightSwitchServiceApplication.vinyldyeData:CreateObjectContext] An exception has occurred:  System.ArgumentException: The specified store provider cannot be found in the configuration, or is not valid. ---> System.ArgumentException: Unable to find the requested .Net Framework Data Provider.  It may not be installed.
  at System.Data.Common.DbProviderFactories.GetFactory(String providerInvariantName)
  at System.Data.EntityClient.EntityConnection.GetFactory(String providerString)
  --- End of inner exception stack trace ---
  at System.Data.EntityClient.EntityConnection.GetFactory(String providerString)
  at System.Data.EntityClient.EntityConnection.ChangeConnectionString(String newConnectionString)
  at System.Data.EntityClient.EntityConnection..ctor(String connectionString)
  at System.Data.Objects.ObjectContext.CreateEntityConnection(String connectionString)
  at LightSwitchApplication.Implementation.vinyldyeDataServiceImplementation.CreateObjectContext()
  at Microsoft.LightSwitch.ServerGenerated.Implementation.DataServiceImplementation`1.get_ObjectContext() 
```

看起来托管公司只是在 GAC 中没有 MySQL 连接器，所以我将它添加到 bin 文件夹中，仍然得到相同的错误。

我查看了 Web.configs，并没有提到 mysql 连接器，应用程序如何知道要使用哪个连接器？

您是否使用 mysql 将 Lightswitch 应用程序部署到主机？如果是这样，我缺少什么文件，或配置选项。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T07:05:13.917

由于您已经将 MySQL 连接器（我假设为 6.4.4）DLL 添加到 bin 文件夹，请参阅[这篇](https://stackoverflow.com/a/8709768/116047)文章。为我工作。

# ios - DetailViewController 未正确加载

> ID：13915852
> 
> 赞同：0
> 
> 时间：2012-12-17T14:17:34.643
> 
> 标签：ios, xcode, view, uisplitviewcontroller

我在我的联系人应用程序（iPad）中使用拆分视图控制器。

在`DetailedViewController`我使用一些`UILabels`来显示用户姓名、公司名称、电话号码、电子邮件 ID。在`initWithNibName`方法中，我编写了以下代码..

```
_mob_Tele = [[UILabel alloc]init];
_mob_Tele.textColor = [UIColor colorWithRed:67/255.0f green:109/255.0f blue:236/255.0f alpha:1.0f];
_mob_Tele.font = [UIFont boldSystemFontOfSize:16];
_mob_Tele.backgroundColor = [UIColor whiteColor];
_mob_Tele.layer.cornerRadius = 5;
[_mob_Tele.layer setMasksToBounds:YES]; 
```

在配置视图方法中，我写了以下内容：

```
CGRect frame4 = CGRectMake(236, 250, 290, 30);
_mob_Tele.frame = frame4;
_mob_Tele.text = mobTele; 
```

我也有一些标签来显示名称，公司。当我在`MasterViewController`. 但有些`UILabels`像`_mob_Tel`e 并没有同时出现。当我选择**cell1**它的名称详细信息时，公司`UILabel`已加载但未加载`_mob_Tele` `UILabel`。当我选择**cell2**时，出现cell1 `_mob_Tele` `UILabel`。

请帮忙！谢谢！

# ruby - RubyGem 'steam-condenser' - 为什么我只能获取一些配置文件？

> ID：13915853
> 
> 赞同：1
> 
> 时间：2012-12-17T14:17:40.570
> 
> 标签：ruby, rubygems, steam, steam-condenser

我有一个与游戏相关的 IRC 机器人（具体来说是《军团要塞 2》）。我想实现一些与 Steam API 通信的功能。我正在使用[蒸汽冷凝器 gem](http://koraktor.de/steam-condenser/)。我一直在 IRB 中摆弄，试图了解它是如何工作的。我不明白的一件事是为什么我可以从 Steam 社区获取一些个人资料。虽然某些配置文件会导致“无法解析 XML”错误，但我不知道为什么。

给那些不知道/没有 Steam 社区经验的人一些信息。

*   配置文件可以设置为“私人”。这意味着只有朋友可以看到个人资料，但是我可以检索一些公开的个人资料，一些公开的我无法检索
*   蒸汽配置文件可以主要用 3 个不同的 ID 来识别
    *   SteamID：看起来像**STEAM_0:0:16866618**
    *   SteamID64：看起来像**76561197993998964**
    *   CustomURL：我可以设置我选择的“CustomURL”。例如，我将我的设置为**booyakah**，因为这是我的游戏昵称。这将为我提供我的 Steam 社区资料**http://steamcommunity.com/id/booyakah/**而不是**http://steamcommunity.com/profiles/76561197993998964**的 URL 。

如前所述，一些配置文件可以很好地使用任一解决方案（搜索 SteamID、SteamID64 或 CustomURL）检索他们的配置文件。某些配置文件返回“无法解析 XML”错误，无论我如何尝试检索它。

这就是我正在尝试做的事情，以及出现问题时 IRB 的输出

```
1.9.3p194 :002 > player = SteamId.new("booyakah")
SteamCondenserError: XML data could not be parsed.
from /Users/ma/.rvm/gems/ruby-1.9.3-p194/gems/steam-condenser-1.2.1/lib/steam/community/steam_id.rb:296:in `fetch'
from /Users/ma/.rvm/gems/ruby-1.9.3-p194/gems/steam-condenser-1.2.1/lib/steam/community/cacheable.rb:42:in `block in method_added'
from /Users/ma/.rvm/gems/ruby-1.9.3-p194/gems/steam-condenser-1.2.1/lib/steam/community/cacheable.rb:104:in `new'
from (irb):2
from /Users/ma/.rvm/rubies/ruby-1.9.3-p194/bin/irb:16:in `<main>'

1.9.3p194 :003 > player = SteamId.from_steam_id("STEAM_0:0:16866618")
SteamCondenserError: XML data could not be parsed.
from /Users/ma/.rvm/gems/ruby-1.9.3-p194/gems/steam-condenser-1.2.1/lib/steam/community/steam_id.rb:296:in `fetch'
from /Users/ma/.rvm/gems/ruby-1.9.3-p194/gems/steam-condenser-1.2.1/lib/steam/community/cacheable.rb:42:in `block in method_added'
from /Users/ma/.rvm/gems/ruby-1.9.3-p194/gems/steam-condenser-1.2.1/lib/steam/community/cacheable.rb:104:in `new'
from /Users/ma/.rvm/gems/ruby-1.9.3-p194/gems/steam-condenser-1.2.1/lib/steam/community/steam_id.rb:196:in `from_steam_id'
from (irb):3
from /Users/ma/.rvm/rubies/ruby-1.9.3-p194/bin/irb:16:in `<main>' 
```

和相同的示例，但是当它成功检索配置文件时

```
1.9.3p194 :005 > player = SteamId.new("s3")
=> #<SteamId:0x007fa3f35c2b48 @custom_url="s3", @xml_data={"steamID64"=>"76561197974944013", "steamID"=>"s3cr3t ***********!", "onlineState"=>"offline", "stateMessage"=>nil, "privacyState"=>"friendsonly", "visibilityState"=>"1", "avatarIcon"=>"http://media.steampowered.com/steamcommunity/public/images/avatars/a9/a9407f9a99d1e74bb0cabb3c23273c9b4bded906.jpg", "avatarMedium"=>"http://media.steampowered.com/steamcommunity/public/images/avatars/a9/a9407f9a99d1e74bb0cabb3c23273c9b4bded906_medium.jpg", "avatarFull"=>"http://media.steampowered.com/steamcommunity/public/images/avatars/a9/a9407f9a99d1e74bb0cabb3c23273c9b4bded906_full.jpg", "vacBanned"=>"0", "tradeBanState"=>"None", "isLimitedAccount"=>"0"}, @nickname="s3cr3t ***********!", @steam_id64=76561197974944013, @limited=false, @trade_ban_state="None", @vac_banned=false, @image_url="http://media.steampowered.com/steamcommunity/public/images/avatars/a9/a9407f9a99d1e74bb0cabb3c23273c9b4bded906", @online_state="offline", @privacy_state="friendsonly", @state_message=nil, @visibility_state=1, @fetch_time=2012-12-17 15:13:17 +0100> 
```

我无法弄清楚为什么有些配置文件可以被检索，而有些则不能。据我所知，个人资料是否公开并不重要。由于显而易见的原因，根本无法检索私人配置文件。但是，只能检索一些公共配置文件。

我在这里不知所措，非常感谢任何帮助或想法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T21:32:49.267

这是一个已知问题，并且已在Steam Condenser 的 Ruby gem 分支中的[此提交](https://github.com/koraktor/steam-condenser-ruby/commit/98be68d6f4d506531a4226db876d1b18efae78fe)中解决。`master`

我还没有时间发布 gem 的新版本。因此，请随意使用`master`.

# cordova - 显示 Admob 广告\LocalStorage 损坏

> ID：13915855
> 
> 赞同：3
> 
> 时间：2012-12-17T14:17:51.860
> 
> 标签：cordova, local-storage, admob, ads

第一篇文章，我很感激有很多关于这个主题的文章，我已经搜索了答案。

我正在使用 JQM (1.2)、Cordova (2.2)、Admob (6.2.1) 开发一个 android 应用程序，但我的广告没有出现。

```
 public class cordovaExample extends DroidGap 
    {       
    private Handler mHandler = new Handler();
        private AdView adView;

     public void onCreate(Bundle savedInstanceState) 
     {
            super.onCreate(savedInstanceState);
            super.loadUrl("file:///android_asset/www/index.html");

            mHandler.postDelayed(new Runnable()
            {
                public void run() 
                {           //      
                    doAdMob();
                }
            }, 5000);         
     }

     private void doAdMob() 
     {
            // Create the adView           
            adView = new AdView(this, AdSize.SMART_BANNER, "MYCODE");           
            LinearLayout layout = super.root;
            layout.addView(adView);
            layout.setHorizontalGravity(android.view.Gravity.CENTER_HORIZONTAL);
            AdRequest request = new AdRequest();
            adView.loadAd(request);   
     }               
} 
```

这是我的 logcat 的摘录：

```
12-17 14:07:06.424: I/Ads(24745): Refreshing ad.
12-17 14:07:06.454: I/Ads(24745): adRequestUrlHtml: <html><head><script src="http://media.admob.com/sdk-core-v40.js"></script><script>AFMA_buildAdURL({"preqs":2,"session_id":"11970596199473559413","seq_num":"3","slotname":"a150bd20d174dce","u_w":360,"msid":"org.apache.cordova.example","js":"afma-sdk-a-v6.2.1","bas_off":0,"net":"ed","app_name":"1.android.org.apache.cordova.example","hl":"en","smart_w":"full","gnt":15,"carrier":"23430","u_audio":1,"u_sd":1.5,"mv":"8016010.com.android.vending","isu":"82D3E2C68BC8ABDE44C1EA123E7289AA","cipa":1,"format":"360x50_mb","oar":2,"smart_h":"auto","ad_pos":{"height":0,"visible":1,"y":888,"x":0,"width":540},"u_h":592,"bas_on":0,"ptime":120733});</script></head><body></body></html>
12-17 14:07:06.484: I/Ads(24745): Received ad url: <url: "http://googleads.g.doubleclick.net:80/mads/gma?preqs=2&session_id=11970596199473559413&seq_num=3&u_w=360&msid=org.apache.cordova.example&js=afma-sdk-a-v6.2.1&bas_off=0&net=ed&app_name=1.android.org.apache.cordova.example&hl=en&smart_w=full&gnt=15&carrier=23430&u_audio=1&u_sd=1.5&mv=8016010.com.android.vending&isu=82D3E2C68BC8ABDE44C1EA123E7289AA&cipa=1&format=360x50_mb&oar=2&smart_h=auto&u_h=592&bas_on=0&ptime=120733&u_so=p&output=html&region=mobile_app&u_tz=0&client_sdk=1&ex=1&slotname=a150bd20d174dce&askip=2&gsb=4g&caps=inlineVideo_interactiveVideo_mraid1_th_autoplay_mediation_sdkAdmobApiForAds_di&jsv=41" type: "admob" afmaNotifyDt: "null" useWebViewLoadUrl: "false">
12-17 14:07:06.484: I/Ads(24745): Request scenario: Offline with no buffered ads.
12-17 14:07:06.484: I/Ads(24745): Network is unavailable.  Aborting ad request.
12-17 14:07:06.484: I/Ads(24745): onFailedToReceiveAd(A network error occurred.)
12-17 14:08:56.894: I/Ads(25453): To get test ads on this device, call adRequest.addTestDevice("82D3E2C68BC8ABDE44C1EA123E7289AA");
12-17 14:08:56.954: I/Ads(25453): adRequestUrlHtml: <html><head><script src="http://media.admob.com/sdk-core-v40.js"></script><script>AFMA_getSdkConstants();AFMA_buildAdURL({"preqs":0,"session_id":"8715359451090924487","seq_num":"1","slotname":"a150bd20d174dce","u_w":360,"msid":"org.apache.cordova.example","js":"afma-sdk-a-v6.2.1","bas_off":0,"net":"ed","app_name":"1.android.org.apache.cordova.example","hl":"en","smart_w":"full","gnt":15,"carrier":"23430","u_audio":1,"u_sd":1.5,"mv":"8016010.com.android.vending","isu":"82D3E2C68BC8ABDE44C1EA123E7289AA","cipa":1,"format":"360x50_mb","oar":0,"smart_h":"auto","ad_pos":{"height":0,"visible":1,"y":888,"x":0,"width":540},"u_h":592,"bas_on":0,"ptime":0});</script></head><body></body></html>
12-17 14:08:57.184: I/Ads(25453): Received ad url: <url: "http://googleads.g.doubleclick.net:80/mads/gma?preqs=0&session_id=8715359451090924487&seq_num=1&u_w=360&msid=org.apache.cordova.example&js=afma-sdk-a-v6.2.1&bas_off=0&net=ed&app_name=1.android.org.apache.cordova.example&hl=en&smart_w=full&gnt=15&carrier=23430&u_audio=1&u_sd=1.5&mv=8016010.com.android.vending&isu=82D3E2C68BC8ABDE44C1EA123E7289AA&cipa=1&format=360x50_mb&oar=0&smart_h=auto&u_h=592&bas_on=0&ptime=0&u_so=p&output=html&region=mobile_app&u_tz=0&client_sdk=1&ex=1&slotname=a150bd20d174dce&gsb=4g&caps=inlineVideo_interactiveVideo_mraid1_th_autoplay_mediation_sdkAdmobApiForAds_di&jsv=41" type: "admob" afmaNotifyDt: "null" useWebViewLoadUrl: "false">
12-17 14:08:57.184: I/Ads(25453): Request scenario: Offline with no buffered ads.
12-17 14:08:57.184: I/Ads(25453): Network is unavailable.  Aborting ad request.
12-17 14:08:57.194: I/Ads(25453): onFailedToReceiveAd(A network error occurred.) 
```

我认为这可能是我的布局有问题，因为 adview 高度始终为 0，但我不确定。我确信 Phonegap 和 Admob 设置正确，因为如果我使用 CordovaWebView 可以显示广告：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout  xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:id="@+id/rootLayout"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <org.apache.cordova.CordovaWebView 
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"  
       android:layout_above="@+id/adView" 
        android:id = "@+id/mainView"/>

    <com.google.ads.AdView android:id="@+id/adView"
                         android:layout_width="wrap_content"
                         android:layout_height="wrap_content"
                         android:layout_alignParentBottom="true"
                         ads:adUnitId="MYCODE"
                         ads:adSize="SMART_BANNER"                        
                         ads:loadAdOnCreate="true"/>    
</RelativeLayout > 
```

不幸的是，由于这个错误，如果我不延迟添加广告视图，那么我的本地存储将被清除，如此处详述[https://github.com/phonegap/phonegap/wiki/In-App-Advertisements](https://github.com/phonegap/phonegap/wiki/In-App-Advertisements)

简而言之，任何人都可以提供工作 .java、main.xml 来使用 Phonegap、admob 和本地存储。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T20:53:16.727

我认为您应该在布局文件中编写此代码：

```
<com.google.ads.AdView
        xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
        android:id="@+id/adView"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        ads:adSize="SMART_BANNER"
        ads:adUnitId="YOUR_ID"
    /> 
```

# c# - 如果逗号不在两个双引号之间，则用逗号分隔

> ID：13915857
> 
> 赞同：3
> 
> 时间：2012-12-17T14:17:53.563
> 
> 标签：c#, regex

我希望用逗号分割这样的字符串：

```
 field1:"value1", field2:"value2", field3:"value3,value4" 
```

变成一个`string[]`看起来像：

```
0     field1:"value1"
1     field2:"value2"
2     field3:"value3,value4" 
```

我正在尝试这样做，`Regex.Split`但似乎无法计算出正则表达式。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T14:22:04.887

例如，这样做会`Matches`比使用容易得多`Split`

```
string[] asYouWanted = Regex.Matches(input, @"[A-Za-z0-9]+:"".*?""")
    .Cast<Match>()
    .Select(m => m.Value)
    .ToArray(); 
```

尽管如果您的值（或字段！）*有*可能包含转义引号（或任何类似棘手的东西），那么使用适当的 CSV 解析器可能会更好。

* * *

如果您*确实*在值中转义了引号，我认为以下正则表达式*有效*- 给它一个测试：

```
@"field3:""value3\\"",value4""", @"[A-Za-z0-9]+:"".*?(?<=(?<!\\)(\\\\)*)""" 
```

添加`(?<=(?<!\\)(\\\\)*)`应该确保`"`它停止匹配之前只有偶数个斜线，因为奇数个斜线意味着它被转义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T14:25:24.870

未经测试，但这应该没问题：

```
string[] parts = string.Split(new string[] { ",\"" }, StringSplitOptions.None); 
```

如果需要，请记住在末尾添加 " 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T14:27:23.110

```
string[] arr = str.Split(new string[] {"\","}}, StringSplitOptions.None).Select(str => str + "\"").ToArray(); 
```

按照 webnoob 提到的方式拆分`\,`，然后使用选择在尾随后缀`"`，然后转换为数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T14:26:17.167

试试这个

```
// (\w.+?):"(\w.+?)"        
//         
// Match the regular expression below and capture its match into backreference number 1 «(\w.+?)»        
//    Match a single character that is a “word character” (letters, digits, and underscores) «\w»        
//    Match any single character that is not a line break character «.+?»        
//       Between one and unlimited times, as few times as possible, expanding as needed (lazy) «+?»        
// Match the characters “:"” literally «:"»        
// Match the regular expression below and capture its match into backreference number 2 «(\w.+?)»        
//    Match a single character that is a “word character” (letters, digits, and underscores) «\w»        
//    Match any single character that is not a line break character «.+?»        
//       Between one and unlimited times, as few times as possible, expanding as needed (lazy) «+?»        
// Match the character “"” literally «"»        

try {        
    Regex regObj = new Regex(@"(\w.+?):""(\w.+?)""");        
    Match matchResults = regObj.Match(sourceString);        
    string[] arr = new string[match.Captures.Count];        
    int i = 0;        
    while (matchResults.Success) {        
        arr[i] = matchResults.Value;        
        matchResults = matchResults.NextMatch();        
        i++;        
    }         
} catch (ArgumentException ex) {        
    // Syntax error in the regular expression        
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-19T08:14:52.500

最简单的内置方式在[这里](https://stackoverflow.com/a/17546818/344822)。我查过了。它工作正常。它`"Hai,\"Hello,World\""`分为`{"Hai","Hello,World"}`

# oop - OOP - “默认”错误的类名？

> ID：13915863
> 
> 赞同：0
> 
> 时间：2012-12-17T14:18:14.283
> 
> 标签：oop, template-method-pattern

我正在实现一个模板方法类型的模式，并有几个类来实现该行为。

例如，我的结构如下：

```
TemplateAbstract
    Type 
        CustomType1
        CustomType2
        CustomType3
        Default 
```

“默认”类包含不需要任何自定义类型的行为。我的问题是，“默认”对班级来说是个坏名字吗？

我想，既然我在问这个问题，我已经对这个名字产生了一些严重的怀疑，但是你还能把一个提供类型之间默认行为的类称为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T14:25:08.720

理想情况下，类名应该描述目的。“默认”是一个模糊的术语，对类提供的功能没有任何意义。

您可以将默认类命名为“该类已实现所有基本功能”

例如，您可以将名称命名为“BaseType”或“BasicType”或“SimpleType”或其他任何适合您需要的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T14:27:01.750

只需扩展名称，将其命名为：

`DefaultTypeBehaviour`

这不太可能引起冲突，并且会告诉你更多关于类做什么的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T15:52:25.513

举个例子，你的意思是这样的吗？

```
Number
  Integer
    PositiveInteger
    NegativeInteger
    OddInteger
    EvenInteger 
```

正如汤姆 B 在他的评论中指出的那样，您如何处理这取决于组合或继承；但我假设鉴于您布置的这种结构，您的意思是使用继承。在我的示例中，使用“DefaultInteger”类型似乎相当尴尬，但在您的特定问题中可能不是。如果`Integer`只是一个接口a`StandardInteger`可能是有意义的。想想开发人员将如何使用这种类型，以及“默认”作为其自己的独立事物是否有意义：

```
Bread
  YeastLeavened
    Wheat
    TwelveGrain
    Default 
```

现在我不确定默认酵母发酵面包是什么，但如果它对你的烘焙程序有用，那么它本质上没有任何“错误”。虽然我个人更喜欢没有`Default`自己的类型，而只是有一个方法`YeastLeavened.getDefault()`来返回正确的类型。

编辑：所以要直接回答你的问题，一般来说是的，我会说“默认”是一个坏名字，除非你总是通过范围（Integer::Default）使用它，而且通常是一个很难单独拥有的类概念上（它要么是抽象的基础功能，要么是一些具体的、“真实的”类，作为系统默认使用的功能）

# java - Java - 使用 Jena APi - 从 RDF 文件中获取数据

> ID：13915865
> 
> 赞同：1
> 
> 时间：2012-12-17T14:18:25.880
> 
> 标签：java, rdf, sparql, jena, owl

我的问题涉及`Person`具有数据类型属性`hasFirstName`, `hasLastName`, `hasDateOfBirth`,的类`hasGender`。我正在使用 Java 和 Jena API。

这是一个人在我的 RDF 文件中的表示方式。

```
<rdf:Description rdf:about="http://www.fam.com/FAM#Bruno04/02/1980 ">
    <j.0:FAMhasGender>H</j.0:FAMhasGender>
    <j.0:FAMhasDateOfBirth>04/02/1980</j.0:FAMhasDateOfBirth>
    <j.0:FAMhasLastName>DS </j.0:FAMhasLastName>
    <j.0:FAMhasFirstName> Bruno</j.0:FAMhasFirstName>
 </rdf:Description> 
```

**如果性别是女性**，我想在下面写下这一行：

```
[label= \"" +firstName+ " \"\n\n\"D.Naiss:"+dnai1+"\", "+shape2+"] 
```

因此，例如，如果有 3 位女性，则该文件必须包含 3 行具有该格式的行。形状值（然后是输出线）将取决于性别，这就是为什么我不能对两种性别都使用同一条线。如果是女性，则为 Shape2，如果为男性，则为 shape。

对于每个性别为**男性**的人，我想在下面输出这一行：

```
[label= \"" +firstName+ " \"\n\n\"D.Naiss:"+dnai1+"\", "+**shape**+"] 
```

我遇到的问题是他只输出一个女人和一个男人对应的线路。但是，我的 rdf 文件中有不止一个女人和男人。

这是相关的代码。你能告诉我应该修改什么来解决这个问题吗？非常感谢。

```
public void accessProp() {

    readFile(inputFile); // rdf
    String fname;
    String dd;
    String gen;

    ExtendedIterator instances = onto.person.listInstances();
    Individual instance = null;
    Individual firstInstance = null;
    while (instances.hasNext()) {
        instance = (Individual) instances.next();

        gen = instance.getPropertyValue(onto.hasGender).toString();
        fname = instance.getPropertyValue(onto.hasFirstName).toString();
        dd = instance.getPropertyValue(onto.hasDateOfBirth).toString();

        writeFile(fname, dd, genr);
    }
}

// Write text file
public void writeFile(String fn, String dbir, String gn) {
    String fileout = "D:/file1.txt";
    String firstName = fn;
    String dateB = dbir;
    String gender = gn;

    BufferedWriter out;
    try {
        out = new BufferedWriter(new FileWriter(fileout, true));

        if (gender.equals("F")) {
            out.write("[label= \"" + firstName + " \"\n\n\"D.Naiss:" + dnai1 + "\", " + shape + "]");
        } else if (gender.equals("M")) {
            out.write("[label= \"" + firstName + " \"\n\n\"D.Naiss:" + dnai1 + "\", " + shape2 + "]");
        }

        out.newLine();

        // flushes and closes the stream
        out.close();
    } catch (IOException e) {
        System.out.println("There was a problem:" + e);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T16:10:39.363

在不知道 Jena 的情况下，我在您的代码中没有看到您只选择男性条目的任何地方。检查该`while (instances.hasNext()) {`循环以查看它循环通过的实例。

因为您为每个实例编写一行，该`writeLine()`方法同时写入男性和女性条目，可能是

```
ExtendedIterator instances = onto.person.listInstances(); 
```

返回您在文件中看到的两个男性和女性条目。

此外，您的示例 RDF 条目的值为`H`性别，但在您的代码中您正在使用`M`并`F`检查它。

# facebook - 他们是在我儿子死后从 fb 获取我儿子的悼念和照片的一种方式吗

> ID：13915870
> 
> 赞同：2
> 
> 时间：2012-12-17T14:18:46.257
> 
> 标签：facebook, copy

有没有人知道这是否可以做到，或者有过同样的经历。失去这些记忆会很伤心，所以任何想法都会受到赞赏。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T14:29:23.980

对您的损失感到抱歉...您可以尝试 PicknZip ...

[http://www.picknzip.com/](http://www.picknzip.com/)

这允许您从 Facebook 下载文件和视频。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T14:29:47.773

您可以使用以下表格来纪念一个帐户。只有以前的朋友才能访问这些内容，这将允许他们在墙上发帖，但也会保留所有以前的信息以供后代使用。

[http://www.facebook.com/help/contact/?id=305593649477238](http://www.facebook.com/help/contact/?id=305593649477238)

# php - cakephp 显示数据库中的图像

> ID：13915875
> 
> 赞同：0
> 
> 时间：2012-12-17T14:19:12.300
> 
> 标签：php, database, cakephp

由于我的数据库不会拍摄大量图像，因此我将它们直接上传到数据库。但是，我在显示它们时遇到问题，我不想下载它们，我想在页面上看到它们。我正在尝试使用以下代码显示，但它不起作用：

MyFiles 控制器的函数 display()：

```
 function display($id)
   {

      $file = $this->MyFile->findById($id);
    $this->set('image',$file['MyFile']['data']);

   } 
```

我的文件模型：

```
 <?php 
class MyFile extends AppModel {

    var $name = 'MyFile';

}

?> 
```

MyFilesController 的函数 add()

```
function add() {            
    if (!empty($this->data) && 
         is_uploaded_file($this->data['MyFile']['File']['tmp_name'])) {
        $fileData = fread(fopen($this->data['MyFile']['File']['tmp_name'], "r"), 
                                 $this->data['MyFile']['File']['size']);

        $this->request->data['MyFile']['name'] = $this->data['MyFile']['File']['name'];
        $this->request->data['MyFile']['type'] = $this->data['MyFile']['File']['type'];
        $this->request->data['MyFile']['size'] = $this->data['MyFile']['File']['size'];
        $this->request->data['MyFile']['data'] = $fileData;

        $this->MyFile->save($this->request->data);

        $this->redirect(array('controller'=>'posts','action'=>'index'));
    }
} 
```

编辑：

MyFiles 视图的 display.ctp

```
 <?php

echo '<img src="/MyFilesController/display/4" />';
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T15:12:30.370

将图像保存在数据库中通常不是一个好主意。

你会好得多（我假设你这样做是为了“安全”）将文件保存在网络不可访问的文件夹中并使用[媒体视图](http://book.cakephp.org/2.0/en/views/media-view.html)来呈现它们。这样，您仍然可以在使用控制器渲染图像时进行安全检查。

Cakes 媒体视图专为将文件流式传输到浏览器而设计，并且可以轻松配置为图像。

2.3为此有一个新[功能](http://book.cakephp.org/2.0/en/controllers/request-response.html#cake-response-file)

如果您出于安全原因不这样做，请自行解决问题并将其放入`webroot`.

# javascript - 使用jquery检查多个动态文本框中输入的值是否相同

> ID：13915882
> 
> 赞同：0
> 
> 时间：2012-12-17T14:19:50.653
> 
> 标签：javascript, jquery, forms, textbox

我有一个包含多个动态生成的文本框的表单。假设有 5 个具有相同名称和不同 ID 的文本框。

我需要检查在这些文本字段中输入的值是否是唯一的，即；

认为：

```
<input type="text" name="textbox" id="textbox1" value="1">
<input type="text" name="textbox" id="textbox1" value="2">
<input type="text" name="textbox" id="textbox1" value="3">
<input type="text" name="textbox" id="textbox1" value="4">
<input type="text" name="textbox" id="textbox1" value="1"> 
```

在这种情况下，必须显示错误，该值已输入。如果值不同，则只能提交表单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T14:39:10.223

我不知道 jquery.validationengine，但至少你可以手动检查它，使用

```
var valueX = ${'#textboxX'}.attr('value'); 
```

用 index读取`value`输入的属性`X`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-08T07:16:56.340

我知道我迟到了，但它可以帮助其他人，所以检查解决方案

```
count = Number((document.frmDefineSSS.cboTeamSize.selectedIndex) - 1);
            flagSame = false;
            for (i = 1; i <= count; i++) {
                for (j = i + 1; j <= count + 1; j++) {
                    if ($("#hidCommMemId" + [i]).val() == $("#hidCommMemId" + [j]).val()) {
                        alert("Team Member can't be same.");
                        $("#txtStudName" + [i]).css("background-color", "yellow");
                        $("#txtStudName" + [j]).css("background-color", "yellow");
                        flagSame = false;
                        return false;

                    }
                    else {
                        $("#txtStudName" + [i]).css("background-color", "white");
                        $("#txtStudName" + [j]).css("background-color", "white");
                        flagSame = true;
                    }
                }
            } 
```

以下是其他解决方案。

```
function findDuplicates() {
    var isDuplicate = false;
    jQuery("input[name^='access_keys']").each(function (i,el1) {
        var current_val = jQuery(el1).val();
        if (current_val != "") {
            jQuery("input[name^='access_keys']").each(function (i,el2) {
                if (jQuery(el2).val() == current_val && jQuery(el1).attr("name") != jQuery(el2).attr("name")) {
                    isDuplicate = true;
                    jQuery(el2).css("background-color", "yellow");
                    jQuery(el1).css("background-color", "yellow");
                    return;
                }
            });
        }
    });

    if (isDuplicate) {
        alert ("Duplicate values found.");
        return false;
    } else {
        return true;
    }
} 
```

我基本上循环遍历所有文本框，并在嵌套循环中将值与所有其他文本框进行比较。基本上它就像冒泡排序。我知道这很糟糕，但无法想到任何有效的方法。大家能想出更好的办法吗？

# postgresql - Postgresql：无法在 FROM ... 位置使用子查询获得结果

> ID：13915885
> 
> 赞同：0
> 
> 时间：2012-12-17T14:20:04.700
> 
> 标签：postgresql

我想要完成的是 通过内部 SQL 中的所有表获取`sendercompid`,的所有唯一组合的聚合数据。`targetcompid``msgtype`

我希望在结果输出中有 2000 万到 4000 万个独特的行。

我无法在 Postgresql 8.3.13 上成功运行下一个查询：

```
SELECT 
    sendercompid, targetcompid, count(msgtype), msgtype 
FROM 
    (SELECT table_name 
     FROM information_schema.tables 
     WHERE table_catalog = 'test' 
       AND table_schema = 'msg' 
       AND (table_name like 'fix_aee_20121214%') OR 
           (table_name like 'fix_aee2_20121214%')
   ) 
WHERE 
    (sendercompid LIKE '%201%') OR 
    (targetcompid LIKE '%201%') 
GROUP BY 
    sendercompid, targetcompid, msgtype ; 
```

如果此选择在 2 上拆分：外部和内部，则 :inner 将提供表格列表，而外部将在每个表格中进行选择和分组。

如果我将这两个 SQL 作为一个运行，我有一个来自 pgsql db 的别名错误

> 错误：FROM 中的子查询必须有别名

我试过使用别名，但这个错误并没有消失。

有什么想法我在那里想念的吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T14:28:14.810

FROM 不像你想象的那样工作。子选择与任何其他查询一样工作：它产生一组行。外部 SELECT 与这些行一起工作，就好像它们是一个表一样。除此之外没有什么特别的魔法。它不知道您返回的值是表名，并且不会这样对待它们。

您可能可以使用目录表来完成您想要的事情，但这会很复杂而且很麻烦。

由于您的子表似乎是基于日期的分区，我认为您真正想要使用的是 Postgres 中内置的分区支持，如[这些文档](http://www.postgresql.org/docs/8.3/static/ddl-partitioning.html)中所述。本质上，您的分区继承自父表，并且您为每个子表设置范围约束。当您从启用了约束排除的父表中查询时，Postgres 会自动选择适当的分区。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T16:04:09.727

您可以使用动态 SQL “运行”此类查询。这个想法 - 在 PL\pgSQL 过程中形成正确的查询，表名作为字符串`EXECUTE`。就像是：

```
CREATE OR REPLACE FUNCTION public.function1 (
)
RETURNS TABLE (
  "field1" NUMERIC,
  "field2" NUMERIC,
  ...
) AS
$body$
BEGIN
 RETURN EXECUTE 'SELECT * FROM '|| (SELECT table_name from information_schema.tables 
              where table_catalog = 'test' AND 
                    table_schema='msg' AND
                    (table_name like 'fix_aee_20121214%') OR 
                    (table_name like 'fix_aee2_20121214%')); 
END;
$body$
LANGUAGE 'plpgsql'; 
```

然后使用类似的东西：

```
SELECT sendercompid, targetcompid, count(msgtype), msgtype 
       FROM  function1
       WHERE (sendercompid LIKE '%201%') OR 
             (targetcompid LIKE '%201%') 
       GROUP BY sendercompid, targetcompid, msgtype ; 
```

或者您可以创建具有完整查询和一些参数的函数来构建`WHERE`子句。

详细信息：[执行](http://www.postgresql.org/docs/current/static/sql-execute.html)，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T15:34:14.560

如果这只是一个概念，那么：

1.  `ERROR: subquery in FROM must have an alias`.
2.  没有列`sendercompid, targetcompid, count(msgtype), msgtype`来自哪里的信息。

    SELECT sendercompid, targetcompid, count(msgtype), msgtype from (SELECT table_name from information_schema.tables where table_catalog = 'test' AND table_schema='msg' AND (table_name like 'fix_aee_20121214%') OR (table_name like 'fix_aee2_20121214%')一个 WHERE (sendercompid LIKE '%201%') OR (targetcompid LIKE '%201%') GROUP BY sendercompid, targetcompid, msgtype ;

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-17T14:26:30.353

为子查询使用别名。最好为所有表设置别名以避免混淆。

# c - 以其他大小访问 32 位字数组

> ID：13915887
> 
> 赞同：0
> 
> 时间：2012-12-17T14:20:07.430
> 
> 标签：c, arrays, pointers, casting

我正在努力思考如何使用指针和数组。我需要一些关于方法和约定的简单帮助。我确实看到了一些类似的帖子，但恐怕我仍然需要非常具体的例子。

我有一个 32 位数字数组，代表 UDP 数据包中的字对齐数据。我需要将这些数据作为 16 位数字访问以计算标头校验和，并在填充数据时作为 8 位数字访问。我有一个静态定义的缓冲区，我将其传递给我的例程

```
alt_u16 calc_udp_header_chksum (alt_u32 hdr[])
{
....

} 
```

*   有人可以帮助我举例说明如何使用指针和/或数组将其作为 alt_u16、alt_u8 访问吗？
*   通过将指针传递给例程，这是否会更清晰？如果是这样，一个例子会很有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T14:23:13.710

您可以简单地`hdr`转换为`alt_u16*`. 像这样：

```
alt_u16* hrd_word_aligned = (alt_u16*)hdr; 
```

现在您可以使用`hrd_word_aligned[0]`第一个 16 位值，`hrd_word_aligned[1]`第二个，依此类推。

类似代码可用于`alt_u8*`.

您的函数是否接收`alt_u32 hdr[]`或`alt_u32 *hdr`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T14:23:56.893

向下铸造不是问题。

您只需要将指针转换为新类型。例如 ：

```
alt_u16* hrd16 = (alt_u16*)hdr; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T14:24:19.650

只是从`(alt_u32*)`投到`(alt_u16*)`。

但是字节序（字节顺序）可能会影响结果。我不知道你有什么字节顺序的细节。

**编码**

```
alt_u16 calc_udp_header_chksum (alt_u32 hdr[])
{
   int i;
   alt_u16 ans = 0;
   for(i=0; i<correct_size; ++i) {
      ans+=((alt_u16*)hdr)[i];
   }
   return ans;
} 
```

# opengl-es - iOS runLoop 和 openGL

> ID：13915894
> 
> 赞同：1
> 
> 时间：2012-12-17T14:20:39.310
> 
> 标签：opengl-es, ios6, nsrunloop

我正在构建一个使用 openGL 的 iOS 应用程序，但遇到以下问题：

我有一个想在我的 glView 上显示的对象。如果我只在视图中绘制一次它就可以了。但是，如果我将我的 drawView 函数添加到 runLoop 中，它会完美地调用该函数，但它不会绘制任何东西，我只剩下一个空白的白色屏幕。

[这是所有相关代码。](http://pastebin.com/wGJH5mtc)

redraw 是一个标志，指示绘制函数何时再次绘制场景。

我希望以下代码在每次绘制对象时旋转我的对象：

```
 static double theta = 0;
    theta += 0.03;
    glRotatef(theta, 1, 1, 0); 
```

如果我不将绘制函数添加到 runLoop 而是手动绘制它，则旋转有效。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T13:14:46.183

问题解决了！

我只需要添加

```
[self setCurrent]; 
```

到 drawView 函数中的 glView 类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T23:41:03.120

您的 OpenGL 代码中的某个地方可能存在错误。如果在某些情况下一切正常，它可能与上下文相关。尝试在每个 OpenGL 调用之后和之前放置 glError 调用。这样你就会知道有问题的函数在哪里。

您需要确保将上下文设置为当前活动视图的正确上下文。

# sql - 仅当我在 where 子句中指定条件时，tsql 才会返回正确答案

> ID：13915895
> 
> 赞同：1
> 
> 时间：2012-12-17T14:20:39.097
> 
> 标签：sql, tsql, sql-server-2005

我有一些 sql 不会返回我需要的行，除非我在 where 子句中将其指定为条件。如果我取消注释下面被注释掉的部分，它会给我我想要的行。如果我将其注释掉，则这些行不会在我的结果集中返回。

这有意义吗？谁能看到我做错了什么？谢谢。

```
SELECT     
   RTRIM(c.comp2) + '-' + l.Loc_Name, 
   MAX(RTRIM(g.mega_location_num) + '-' + g.mega_location_name) 
FROM       
   mkt_share_comp c, gldm_location g, mkt_share_locs l 
WHERE     
   RTRIM(c.comp1) = g.location_num
   AND c.comp2 = l.Loc_No
   AND LEN(c.comp2) = 5 AND c.is_deleted = 0 AND l.is_deleted = 0
   --and  g.mega_location_num = '450'
GROUP BY
   RTRIM(c.comp2) + '-' + l.Loc_Name
ORDER BY
   MAX(RTRIM(g.mega_location_num) + '-' + g.mega_location_name) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T14:28:40.020

这个比较：

```
MAX(RTRIM(g.mega_location_num) + '-' + g.mega_location_name) 
```

将根据您正在构建`MAX`的*字符串*值进行操作。因此，如果有任何`g.mega_location_num`值以大于 的数字开头`4`（或以`4`大于 的第二个数字开头`5`，等等），则该值将是`MAX`返回的值。

要开始解决此问题，我将首先切换到 Kuya[建议](https://stackoverflow.com/a/13915976/15498)的 ANSI 连接样式。然后我会考虑包含一个适当的[`ROW_NUMBER()`](http://msdn.microsoft.com/en-us/library/ms186734%28v=sql.90%29.aspx)表达式来从表中找到“真正的”最大值，`g`并能够从该最大行中检索多个列（以允许字符串构造继续进行）

# c# - 如何跳过 HttpWebResponse 404

> ID：13915897
> 
> 赞同：2
> 
> 时间：2012-12-17T14:20:52.527
> 
> 标签：c#, httpwebrequest, http-status-code-404, httpwebresponse, system.net.httpwebrequest

嗨，我有一个正在查看某些页面的程序

```
for (int i=1; i < 1000; i++)
{
  string id = i.ToString();
  string url_source = get_url_source("http://mysite.com/"+id);
} 
```

和一个方法

```
 public static string get_url_source(string url)
    {
        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
        HttpWebResponse response = (HttpWebResponse)request.GetResponse();
        System.IO.StreamReader sr = new System.IO.StreamReader(response.GetResponseStream());
        return sr.ReadToEnd();
    } 
```

我应该如何更改我的方法，以便在发生 404-notfound 时主程序将跳过该 url 并继续到下一个 id？

我把我的循环改成了这个

```
try
            {
                string url_source = get_url_source(url);
            }
            catch(WebException ex)
            {
                if (ex.Status == WebExceptionStatus.ProtocolError)
                {
                    ConsoleBox.Text += i + ": " + WebExceptionStatus.ProtocolError.ToString() + "\r\n";
                    continue;
                }
                else
                {
                    throw;
                }
            } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T14:28:21.650

捕获错误并检查其状态。如果是 404 - 继续循环，否则重新抛出它。

```
for (int i=1; i < 1000; i++)
{
    string id = i.ToString();
    try
    {
         string url_source = get_url_source("http://mysite.com/"+id);
    }
    catch(WebException ex)
    {
        HttpWebResponse webResponse = (HttpWebResponse)ex.Response;          
        if (webResponse.StatusCode == HttpStatusCode.NotFound)
        {
            continue;
        }
        else
        {
            throw;
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T14:24:42.557

您需要捕获和执行 GetResponseStream 时引发的 WebException

```
try
{
   HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
    HttpWebResponse response = (HttpWebResponse)request.GetResponse();
    System.IO.StreamReader sr = new System.IO.StreamReader(response.GetResponseStream());
    return sr.ReadToEnd();
}
catch (WebException webEx)
{
    //If you want only 404, some logic here
    //if (((HttpWebResponse)webEx.Response).StatusCode == HttpStatusCode.NotFound)
    //{
    //}
    //else
    //{
    //      throw;
    //}
    //webEx.Status;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T14:24:55.740

尝试：如果（response.StatusCode == HttpStatusCode.OK）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T14:27:49.247

使用 try/catch，将 WebException 作为异常类型。您可以测试状态：

```
 ex.Response.StatusCode==HttpStatusCode.NotFound 
```

# iphone - UIEdgeInset 问题定位文本/图像

> ID：13915898
> 
> 赞同：2
> 
> 时间：2012-12-17T14:20:54.803
> 
> 标签：iphone, image, uibutton, title

我尝试`UIButton`在文本上方制作一个带有图像的图像，所以我使用以下代码：

```
UIButton *btn = [UIButton buttonWithType:UIButtonTypeCustom];
btn.frame = CGRectMake(x, y, 140, 140);
[btn setTitle:self.objMateria.titoloMateria forState:UIControlStateNormal];
[btn setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];
[btn setBackgroundColor:[UIColor clearColor]];
[btn setImage:[UIImage imageNamed:@"pala.png"] forState:UIControlStateNormal];
btn.imageEdgeInsets = UIEdgeInsetsMake(0, 0, 20, 0);
btn.titleEdgeInsets = UIEdgeInsetsMake(120, 0, 0, 0); 
```

问题是这段代码我看不到文字，似乎被图像覆盖了，错误在哪里？

这里的图像：
![在此处输入图像描述](../Images/6ee35dd5587b4250360a44bcae427efc.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T14:50:57.450

试试这个

```
btn.imageEdgeInsets = UIEdgeInsetsMake(-20, 0, 0, 0);
btn.titleEdgeInsets = UIEdgeInsetsMake(120, -120, 0, 0); 
```

调整`-120`ie *left*的值以水平适合您的标题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T14:51:57.127

您可以按如下方式修改您的代码吗？

```
UIButton *btn = [UIButton buttonWithType:UIButtonTypeCustom];
btn.frame = CGRectMake(20, 20, 140, 140);
[btn setTitle:@"pala" forState:UIControlStateNormal];
[btn setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];
[btn setBackgroundColor:[UIColor clearColor]];
[btn setImage:[UIImage imageNamed:@"pala.png"] forState:UIControlStateNormal];
btn.imageEdgeInsets = UIEdgeInsetsMake(-20, 0, 0, 0);
UIImage *imageTemp = [UIImage imageNamed:@"pala.png"];
btn.titleEdgeInsets = UIEdgeInsetsMake(imageTemp.size.height, -imageTemp.size.width, 0, 0);
[self.view addSubview:btn]; 
```

# jquery - 使用 pjax（和 jQuery.form？）发布带有文件附件的表单

> ID：13915901
> 
> 赞同：7
> 
> 时间：2012-12-17T14:21:02.917
> 
> 标签：jquery, pjax

我成功地将 pjax 用于链接和表单（`GET`以及`POST`）。但现在我有一个表格，它也必须发送一个`<input type="file"...>`. 由于 pjax 不支持这一点，我查看了*https://github.com/malsup/form* [（](https://github.com/malsup/form) jquery.form 插件）*支持使用文件提交表单数据，但不支持使用浏览器的“pjax”方式历史对象。*

 *那么，如何将 pjax 功能与包含文件字段的表单一起使用呢？有任何想法吗？

编辑：我之所以不简单地使用 FormData 对象，而是 jquery.form 插件：Internet Explorer 无法处理它们。该插件对此浏览器有一个解决方法。我不坚持使用 jquery.form 插件，但我需要一种方法让它适用于所有主要浏览器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T16:06:11.923

似乎您可能需要`FormData`在 AJAX/pJAX 请求中使用可以处理文件的对象。[您可以在Mozilla 开发者网络](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/FormData/Using_FormData_Objects)上阅读更多内容。

例如，如果这是您的表单：

```
<form enctype="multipart/form-data">
<input name="file" type="file" />
<input type="button" value="Upload" />
</form> 
```

首先获取文件内容，如下所示：

```
var formData = new FormData($('form')[0]); 
```

然后您可以使用 jQuery`$.ajax`请求或`XMLHttpRequest();`类似这样的简单请求：

```
var xhr = new XMLHttpRequest();
xhr.open("POST", "http://foo.com/processfile.php");
xhr.send(formData); 
```

或者在 jQuery 中类似：

```
$.ajax({
    url: 'http://foo.com/processfile.php',
    type: 'POST',
    data: formData,
    cache: false,
    contentType: false,
    processData: false
}); 
```

在服务器端，`processfile.php`您可以通过以下方式接收/显示文件内容：

`$file = $_FILES['file']['name'];`

这应该适用于 pJAX，因为它是异步的！只需确保在您的 pJAX 请求之前放置此请求，或者如果您使用的是 jQuery，您可以将其添加为成功回调的一部分。例如（不知道您使用的是哪个 pJAX 库）：

```
$.ajax({
    url: 'http://foo.com/processfile.php',
    type: 'POST',
    data: formData,
    cache: false,
    contentType: false,
    processData: false,
    success: function(data) {
       $.pjax({url: url, container: '#pjax-container'});
    }
}); 
```

**编辑：**如果您想支持 IE7+，则需要回退到使用隐藏的 iframe 元素进行上传，因为 FormData 仅在 Internet Explorer 10 中受支持。我已经测试过且无需 jQuery 即可提交文件的一个很棒的插件是[http： //fineuploader.com/](http://fineuploader.com/)在我看来比[https://github.com/malsup/form](https://github.com/malsup/form)（jquery.form 插件）更好/更容易使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T02:02:44.617

jQuery Ajax 代码

```
jQuery('document').ready(function(){

    var input = document.getElementById("imagefile");
    var formdata = false;
    if (window.FormData) {
        formdata = new FormData();
    }

    input.addEventListener("change", function (evt) {

        var i = 0, len = this.files.length, img, reader, file;

        for ( ; i < len; i++ ) {
            file = this.files[i];

            //validation to check whether uploaded files are images
            if (!!file.type.match(/image.*/)) {
                if ( window.FileReader ) {
                    reader = new FileReader();
                    reader.onloadend = function (e) { 
                    };
                    reader.readAsDataURL(file);
                }

                if (formdata) {
                    //send the ajax query to upload the file(s)
                    jQuery.ajax({
                        url: "upload.php",
                        type: "POST",
                        data: formdata,
                        processData: false,
                        contentType: false,
                        success: function (result) {
                            jQuery('div#response').html("Successfully uploaded").fadeOut();
                        }
                    });
                }
            }
            else
            {
                alert('Not a vaild image!');
            }   
        }

    }, false);

}); 
```

HTML 代码

```
<form enctype="multipart/form-data">
<input id="imagefile" type="file" name="image" accept="image/*"/ />
</form> 
```

上面的代码将为您做的是，一旦您上传文件，它将首先验证图像的类型并通过 ajax 为您上传。如果需要，您可以进行**多个文件上传。**如果你想知道什么`FormData`是，

> 该`FormData`对象允许您编译一组键/值对以使用 XMLHttpRequest 发送。它主要用于发送表单数据，但可以独立于表单使用以传输键控数据。如果表单的编码类型设置为“multipart/form-data”，则传输的数据与表单的 submit() 方法用于发送数据的格式相同。

addEventListener 为您做的是，

> addEventListener() 在单个目标上注册单个事件侦听器。事件目标可以是文档中的单个元素、文档本身、窗口或 XMLHttpRequest。

您可以使用`upload.php`在服务器级别上传文件。

如果你想在插件中拥有这个功能，你可以用上面的代码扩展插件，它不会破坏你的插件，因为这是一个非常简单的代码片段，可以完成工作。我已经成功地将代码集成到插件中，完全没有问题。

如果您有任何问题，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T10:19:02.117

您可以单独使用uploadify进行文件上传，并在其回调函数中使用上传的文件路径更新表单，或者简单地将上传状态设置为true或false，当您提交表单时，您可以从uploadify临时文件夹访问文件并根据您的据此作出回应。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T10:07:34.710

这样做的一种方法是，当您发现表单中有文件上传时，在页面上构建一个隐藏的 iframe，连同其中的整个表单，然后在 iframe 中提交表单。此外，您需要在 iframe 的“加载”事件上添加一个侦听器，以便在提交返回时，您可以处理响应。这就是 EXT 处理这种情况的方式。*

# android - 在线程中更新 ui

> ID：13915903
> 
> 赞同：3
> 
> 时间：2012-12-17T14:21:04.870
> 
> 标签：android

我创建了一个类并从视图中扩展它。还实现了 Runnable 接口。在我调用的 onTouchEvent 中：`new Thread(this).start()`。
这是我的课：

```
public class test extend View interface Runnable{

    ----some code------

    public void onTouchEvent(MotionEvent event){
        ----somecode------
        new thread(this).start();
        ----somecode------
    }

    public void run(){
        -----somecode-------
        invalidate();
        -----somecode-------
    }
} 
```

但我收到此错误：

> 只有创建视图层次结构的原始线程才能接触其视图

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T14:24:00.260

你需要在 UIThread 上更新 UI，使用

```
Activity activity = (Activity)getContext();
activity.runOnUiThread(new Runnable() {
    @Override
    public void run() {
        // update UI here
        invalidate();
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T14:31:56.097

尝试使用

> postInvalidate()

代替

> 无效（）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T14:26:11.773

您可以使用**处理程序**类通过发送消息对您的 UI 线程进行更改。

[http://developer.android.com/reference/android/os/Handler.html](http://developer.android.com/reference/android/os/Handler.html)

[Android，处理程序消息](https://stackoverflow.com/questions/6804788/android-handler-messaging)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T14:35:27.293

由于您正在扩展`View`绑定到 UI-thread 的类，因此您在此类中调用的任何内容都将在*UI-thread*上运行。但是，如果您在该类中使用新线程，那么您可能会依赖它的`post(Runnable)`方法，该方法将保证在视图的*UI-thread*上运行。例如：

```
post(new Runnable() {

    @Override
    public void run() {
        // TODO Auto-generated method stub

    }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T14:36:31.630

这将在 View 类的 UI 线程上运行；

```
 post(new Runnable() {     
        @Override
        public void run() {
            // TODO Auto-generated method stub

        }
    }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-26T12:53:24.533

在 android 中尝试**AsyncTask 。**它异步启动新线程，完成任务后它可以更新当前 UI 而不会破坏当前 Activity。

示例代码：

```
private class DownloadFilesTask extends AsyncTask<URL, Integer, Long> {
 protected Long doInBackground(URL... urls) {
     // Task which should be completed in background.
     return null;
 }

 protected void onProgressUpdate(Integer... progress) {
     // Task which can be done while background process is progressing , such as updatng any UI element of Activity.
     setProgressPercent(progress[0]);
 }

 protected void onPostExecute(Long result) {
     // Task to do after completion of asynctask.
     showDialog("Downloaded " + result + " bytes");
 }
} 
```

您也可以使用**runOnUiThread**来完成您的任务。

这两种方式在更新当前活动中的 UI 时都非常有效。

**有用的链接**：http: [//developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html) [http://sharecoding.wordpress.com/2012/05/22/simple-runonuithread-for-update-view-on-安卓/](http://sharecoding.wordpress.com/2012/05/22/simple-runonuithread-for-update-view-on-android/)

# css - Css3媒体查询不适用于最大宽度

> ID：13915904
> 
> 赞同：5
> 
> 时间：2012-12-17T14:21:05.677
> 
> 标签：css, media-queries

我一直在尝试使用媒体查询隐藏最大宽度为 980 像素的元素，但由于某种原因它仍在显示。

如果我使用带有 min-width 的媒体查询，该元素会消失，但使用此代码它仍然显示，我可以找出原因吗？

```
@media (max-width: 980px) {
    .welcome-msg  {
        display:none;
    }
} 
```

任何人都可以看到我的代码有什么问题吗？我目前正在使用 FF 响应式设计视图进行测试。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T15:02:42.917

对于您当前的`max-width`媒体查询，`display:none`将一直应用到文档的宽度达到 980 像素，而不是*980*像素。

从您的问题来看，您似乎希望发生相反的情况，这就是您在`min-width`. 切换`max-width`到`min-width`应该可以解决问题。

否则，您将不得不`display: none`在您的非媒体查询 css 中设置您的元素，并`display:block`在您的`max-width`媒体查询中使用。

**CSS**

```
/* Only applies while screen is 980px or less */
@media (max-width: 980px) {
.welcome-msg  {
        display:none;
    }
}

/* only applies while screen is 980px or greater */
@media (min-width: 980px) {
.welcome-msg  {
        display:none;
    }
}

/* if you must use max-width, this is a solution */
/* otherwise, use min-width IMHO */
.welcome-msg  {
        display:none;
}

@media (max-width:980px) {
  .welcome-msg  {
   display:block; /* element will only show up if width is less than or equal to 980px */
  }
} 
```

如果这不是您想要完成的，那么有一个[Codepen](http://codepen.io)示例对我们更好地回答您的问题会很有帮助。

祝你好运！

# javascript - jquery / javascript：一个接一个地循环具有不同ID标签的动画功能？

> ID：13915911
> 
> 赞同：0
> 
> 时间：2012-12-17T14:21:33.477
> 
> 标签：javascript, jquery

嗨，我有一个功能，我想每次使用不同的 ID 标签循环。单击导航链接时调用此函数。到目前为止，我有这个，我想将 txt1 更改为 txt2，然后将 txt 3 更改为 txt5，从而一个接一个地播放每个动画。谢谢！

```
function animetxt(){
$o=$("#txt1");
$o.html($o.text().replace(/([\S])/g,'<span>$1</span>'));
$o.css('display','inline-block');
$('span',$o).stop().css({position:'relative',
                         display:'inline-block',
                         opacity:0,
                         fontSize:84,
                         top:function(i){return Math.floor(Math.random()*500)*((i%2)?1:-1);},
                         left:function(i){return Math.floor(Math.random()*500)*((i%2)?1:-1);}
                        }).animate({opacity:1,fontSize:20,top:0,left:0},1000);} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T14:26:34.760

一种更有效的方法是通过类名获取元素，而不是通过数字循环来获取 ID...

**HTML：**

```
<span id="txt1" class="txt-el"></span>
<span id="txt2" class="txt-el"></span>
<span id="txt3" class="txt-el"></span> 
```

**Javascript**

```
function animetxt() {
    $('span.txt-el').each(function(index, element) {
        /*
            index: the index of the current item in the results given by $('span.txt-el')
            element: the DOM element
        */

        $o = $(element); // you can use $(this) too

        // magic stuff here
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T14:28:03.150

我将创建一个包含所有 Id 的数组并使用`$.each`：

```
$.each(['txt1', 'txt2' ], function(index, value) { 
  animetxt(value);  
}); 
```

（请注意，您可以输入 ID 或使用任何选择器）

```
function animetxt(id){
$o=$("#" + id);
$o.html($o.text().replace(/([\S])/g,'<span>$1</span>'));
$o.css('display','inline-block');
$('span',$o).stop().css({position:'relative',
                         display:'inline-block',
                         opacity:0,
                         fontSize:84,
                         top:function(i){return Math.floor(Math.random()*500)*((i%2)?1:-1);},
                         left:function(i){return Math.floor(Math.random()*500)*((i%2)?1:-1);}
                        }).animate({opacity:1,fontSize:20,top:0,left:0},1000);} 
```

**注意**：您还可以使用 for 循环并将索引连接到 id

**编辑：按顺序调用函数**

正如@FAngel 指出的那样，上面的代码一次执行。对于顺序执行，请使用以下函数。

这个新函数使用`complete`回调`animation`并调用自身。当找不到下一个 id 时它会停止。

你这样开始：

```
 $(function() {
      animetxt(1);
    }); 
```

这是功能：

```
function animetxt(id) {
    $o = $('#txt' + id);
    if (!$o.length) return;

    $o.html($o.text().replace(/([\S])/g, '<span>$1</span>'));
    $o.css('display', 'inline-block');
    $('span', $o).stop().css({
        position: 'relative',
        display: 'inline-block',
        opacity: 0,
        fontSize: 84,
        top: function(i) {
            return Math.floor(Math.random() * 500) * ((i % 2) ? 1 : -1);
        },
        left: function(i) {
            return Math.floor(Math.random() * 500) * ((i % 2) ? 1 : -1);
        }
    }).animate({
        opacity: 1,
        fontSize: 20,
        top: 0,
        left: 0
    }, {
        complete: function() {
            id++;
            animetxt(id);
        }
    }, 1000);
}​ 
```

尝试一下：

[http://jsfiddle.net/ureyes84/ndScp/](http://jsfiddle.net/ureyes84/ndScp/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T14:46:16.007

```
function animetxt($el){    
    if(!$el)
        $o=$("#txt1");
    else {
        $o = $el.next();
        if($o.length == 0)
           return; //stop if no more items
    }
    $o.html($o.text().replace(/([\S])/g,'<span>$1</span>'));
    $o.css('display','inline-block');
    $('span',$o).stop().css({position:'relative',
                            display:'inline-block',
                            opacity:0,
                            fontSize:84,
                            top:function(i){return Math.floor(Math.random()*500)*((i%2)?1:-1);},
                            left:function(i){return Math.floor(Math.random()*500)*((i%2)?1:-1);}
                            }).animate({opacity:1,fontSize:20,top:0,left:0},1000, function(el) { animetxt($(this)); }); 
```

你可以做类似上面的事情。`function(el) { animetxt($(this)); }`是一个完整的处理程序[`jQuery.animate`](http://api.jquery.com/animate/)。它在动画完成时调用。比你只需要找到下一个应该动画的元素。在我的示例中，我`.next()`假设`txt1`,`txt2`等`txt3`是兄弟姐妹。如果所有元素都动画，则停止动画。您可能需要找到其他方法来获取下一个元素 - 这取决于 HTML 的结构。

# javascript - 发送到 CouchDB 时 Json 格式不正确

> ID：13915915
> 
> 赞同：1
> 
> 时间：2012-12-17T14:21:36.660
> 
> 标签：javascript, ajax, node.js, couchdb, xss

使用 node.js 作为代理以防止 xss 问题时，我在转发 json 时遇到问题。

在记录收到的数据时，我找不到任何问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T14:21:36.660

当我编写另一个显示接收到的数据的 node.js 服务器并让它模仿 CouchDB 服务器时，我找到了解决方案。

事实证明，罪魁祸首是一个非 ascii 字符（Swedish-Å）。收到的数据被视为原始计算 Content-Length，或者根据您的心情正确。;)

解决方案是在计算 Content-Length 之前使用 Buffer 将原始数据转换为 utf8。

```
 :
if (request.method == 'PUT') {
    var data = '';
    request.on('data', function(dataSnippet) {
        data += dataSnippet;
        if (data.length > 1e6) {request.connection.destroy();}
    });
    request.on('end', function(dataSnippet) {
        data = new Buffer(data, 'UTF8');     //<---  This is the solution
        options.headers = {
            'Content-Encoding': 'UTF8',
            'Content-Type': 'application/json',
            'Content-Length': data.length    //<---  Where it went wrong
        }
        proxy = http.request(options, function(proxy_response) {
            proxy_response.setEncoding('UTF8');
            proxy_response.pipe(response);
        });
        proxy.write(data);
        proxy.end();
    });
}
    : 
```

# django - 外键作为 Django 1.5 可配置用户模型上的必填字段，createsuperuser 说：AttributeError: 'NoneType' object has no attribute '_state'

> ID：13915916
> 
> 赞同：7
> 
> 时间：2012-12-17T14:21:37.720
> 
> 标签：django, manage.py, django-1.5

使用来自 Django 1.5 (1, 5, 0, 'beta', 2) 的新[可配置用户模型，我在运行](https://docs.djangoproject.com/en/dev/releases/1.5/#configurable-user-model)[manage.py createsuperuser](https://docs.djangoproject.com/en/dev/ref/django-admin/#createsuperuser)尝试设置必填字段的外键时收到此错误：

> AttributeError：“NoneType”对象没有属性“_state”

由于我有一个带有用户模型所需值的[fixtures/initial_data.yaml ，因此工作流程是：](https://docs.djangoproject.com/en/dev/howto/initial-data/#automatically-loading-initial-data-fixtures)

1.  创建数据库
2.  python manage.py syncdb
3.  对问题回答“否”*您刚刚安装了 Django 的身份验证系统，这意味着您没有定义任何超级用户。您想现在创建一个吗？（是/否）*
4.  *从 1 个固定装置安装了 14264 个对象*
5.  python manage.py createsuperuser

我尝试在导入灯具后创建超级用户，所以这不是由 City 模型的空数据库表引起的问题。

代码摘录，基于[文档](https://docs.djangoproject.com/en/dev/topics/auth/#a-full-example)：

**模型.py**

```
class City(models.Model):
    city = models.CharField(max_length=70, help_text="City.")
    state = models.CharField(max_length=2, help_text="State.")
    class Meta:
        ordering = ['city']
    def __unicode__(self):
        return "%s (%s)" % (self.city, self.state)

class PersonaManager(BaseUserManager):
    [...]
    def create_superuser(self, email, name, birthplace, password):
        """
        Creates and saves a superuser with the given email, date of
        birth and password.
        """
        user = self.create_user(email,
            password=password,
            name=name,
            birthplace=birthplace,
        )
        user.is_admin = True
        user.save(using=self._db)
        return user

class Person(AbstractBaseUser):
    email = models.EmailField(
        verbose_name='email address',
        max_length=255,
        unique=True,
        db_index=True,
    )
    name = models.CharField(max_length=60)
    birthplace = models.ForeignKey('myapp.City', related_name="person_birthplace")
    is_active = models.BooleanField(default=True)
    is_admin = models.BooleanField(default=False)

    objects = PersonaManager()

    USERNAME_FIELD = 'email'
    REQUIRED_FIELDS = ['name', 'birthplace'] 
```

如何让外键在我的用户模型上的必填字段上工作？谢谢你。

编辑：追溯自`manage.py createsuperuser --traceback`：

```
Traceback (most recent call last):
  File "/home/asd/Envs/envdjango15/local/lib/python2.7/site-packages/django/core/management/base.py", line 222, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "/home/asd/Envs/envdjango15/local/lib/python2.7/site-packages/django/core/management/base.py", line 252, in execute
    output = self.handle(*args, **options)
  File "/home/asd/Envs/envdjango15/local/lib/python2.7/site-packages/django/contrib/auth/management/commands/createsuperuser.py", line 112, in handle
    user_data[field_name] = field.clean(raw_value, None)
  File "/home/asd/Envs/envdjango15/local/lib/python2.7/site-packages/django/db/models/fields/__init__.py", line 211, in clean
    self.validate(value, model_instance)
  File "/home/asd/Envs/envdjango15/local/lib/python2.7/site-packages/django/db/models/fields/related.py", line 1014, in validate
    using = router.db_for_read(model_instance.__class__, instance=model_instance)
  File "/home/asd/Envs/envdjango15/local/lib/python2.7/site-packages/django/db/utils.py", line 142, in _route_db
    return hints['instance']._state.db or DEFAULT_DB_ALIAS
AttributeError: 'NoneType' object has no attribute '_state'
AttributeError: 'NoneType' object has no attribute '_state' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-13T05:44:00.737

不是 100% 确定这会解决它，但只是为了好玩，添加 PermissionsMixin 并从你的模型中拉出 is_superuser。

也许在后台正在进行某种权限检查 - 授予它不应该发生但试一试。

我的怀疑来自它试图找出它需要应用什么模型权限的概念。

# mysql - Delphi dbgrid 不显示 mysql varchar 列

> ID：13915922
> 
> 赞同：0
> 
> 时间：2012-12-17T14:22:05.160
> 
> 标签：mysql, delphi, delphi-xe2

我正在使用 delphi XE2 并从事 mysql 数据库项目。我有一个 mysql 数据库，它有一个由四列组成的表。
![在此处输入图像描述](../Images/2acac59eb5ca9c67646c0c889214fa73.png)
我在此表中有两个示例行。

![在此处输入图像描述](../Images/11cf9e05e2f951597b4012f5eea94ded.png)

我正在使用 TDatabase、TQuery、TDatasource 和 TDBGrid 连接到具有以下源代码的数据库：

```
dbgrid1.DataSource :=DataSource1 ;  
datasource1.DataSet :=Query1 ;  
database1.DatabaseName :='personDatabase';  
database1.AliasName :='mysqlodbc';  
database1.LoginPrompt :=false;  
database1.Connected :=true;  
query1.DatabaseName :=database1.DatabaseName;  
query1.SQL.Clear;  
query1.SQL.Add('select * from persondb.person;');  
query1.Active :=true; 
```

问题是当我尝试选择所有列和行（使用`select * from persondb.person`）并在 dbgrid 中显示它们时，没有显示 varchar 列，我只得到两个 int 列。

![在此处输入图像描述](../Images/fae862c33b6396d1728fec5a8ad55b8c.png)
就像 varchar 列无法显示，例如 sql`select fname from persondb.person`将在 dbgrid 中产生两个单单元行。结果与`select fname, lname from persondb.person`甚至不合逻辑的 sql 相同（因为我期望一个 2X2 的空表）。

![在此处输入图像描述](../Images/a11c088bde60375e205e95eab466665c.png)

我还将数据库的字符集 utf8 更改为 latin1，并认为问题可能就在那里，但也没有运气。
我用谷歌搜索了几个小时，甚至没有与我类似的问题。但我倾向于预期的正常行为是 dbgrid 显示`(memo)`每个人都试图克服的 varchar 字段。
所以任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-20T15:30:16.847

它发生在我几天前的视图中。使用 dbExpress 或 Ado 连接代替 BDE 不是一个好主意，因为它需要更多时间来学习和更改代码。我使用oracle（可能与mysql类似）。您应该检查您的数据库结构。

在 Oracle 11 中，dbgrid 无法显示所有具有 VARCHAR2 数据类型和 CHAR 单元的列。dbgrid 仅以 BYTE 为单位显示数据。但在 Oracle 9i 中，一切都很好。

因此，解决方案是更改单位（`char`为`byte`）。这是 oracle 的 sql 语句：

`ALTER TABLE USERX.TABLENAME MODIFY (COLUMNNAME VARCHAR2(50 BYTE));`

# haskell - 在 StateT 中组合多个状态

> ID：13915923
> 
> 赞同：19
> 
> 时间：2012-12-17T14:22:05.333
> 
> 标签：haskell, state

我正在编写一个作为守护进程运行的程序。为了创建守护程序，用户为每个所需的类（其中一个是数据库）提供一组实现。所有这些类都具有具有形式类型签名的函数`StateT s IO a`，但`s`每个类都不同。

假设每个类都遵循这种模式：

```
import Control.Monad (liftM)
import Control.Monad.State (StateT(..), get)

class Hammer h where
  driveNail :: StateT h IO ()

data ClawHammer = MkClawHammer Int -- the real implementation is more complex

instance Hammer ClawHammer where
  driveNail = return () -- the real implementation is more complex

-- Plus additional classes for wrenches, screwdrivers, etc. 
```

现在我可以定义一个记录，表示用户为每个“插槽”选择的实现。

```
data MultiTool h = MultiTool {
    hammer :: h
    -- Plus additional fields for wrenches, screwdrivers, etc.
  } 
```

`StateT (MultiTool h ...) IO ()` 守护进程在monad中完成大部分工作。

现在，由于多功能工具*包含*锤子，我可以在需要锤子的任何情况下使用它。换句话说，`MultiTool`如果我编写这样的代码，该类型可以实现它包含的任何类：

```
stateMap :: Monad m => (s -> t) -> (t -> s) -> StateT s m a -> StateT t m a
stateMap f g (StateT h) = StateT $ liftM (fmap f) . h . g

withHammer :: StateT h IO () -> StateT (MultiTool h) IO ()
withHammer runProgram = do
  t <- get
  stateMap (\h -> t {hammer=h}) hammer runProgram

instance Hammer h => Hammer (MultiTool h) where
  driveNail = withHammer driveNail 
```

但 , , 等的实现`withHammer`基本`withWrench`相同`withScrewdriver`。能写出这样的东西就好了……

```
--withMember accessor runProgram = do
--  u <- get
--  stateMap (\h -> u {accessor=h}) accessor runProgram

-- instance Hammer h => Hammer (MultiTool h) where
--   driveNail = withMember hammer driveNail 
```

但这当然不会编译。

我怀疑我的解决方案过于面向对象。有没有更好的办法？单子变压器，也许？提前感谢您的任何建议。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-17T18:12:48.900

如果您想使用像您的情况那样的大型全局状态，那么您想要使用的是镜头，正如 Ben 所建议的那样。我也推荐 Edward Kmett 的**镜头**库。但是，还有另一种可能更好的方法。

服务器具有程序连续运行并在状态空间上执行相同操作的特性。当您想要模块化服务器时，麻烦就开始了，在这种情况下，您需要的不仅仅是一些全局状态。您希望模块有自己的状态。

让我们将模块视为将*Request*转换为*Response*的东西：

```
Module :: (Request -> m Response) -> Module m 
```

现在，如果它有某种状态，那么这种状态就会变得引人注目，因为模块下次可能会给出不同的答案。有多种方法可以做到这一点，例如：

```
Module :: s -> ((Request, s) -> m (Response s)) -> Module m 
```

但是表达这一点的更好和等效的方式是以下构造函数（我们将很快围绕它构建一个类型）：

```
Module :: (Request -> m (Response, Module m)) -> Module m 
```

该模块将请求映射到响应，但同时也会返回其自身的新版本。让我们更进一步，使请求和响应具有多态性：

```
Module :: (a -> m (b, Module m a b)) -> Module m a b 
```

现在，如果一个模块的输出类型与另一个模块的输入类型匹配，那么您可以像常规函数一样组合它们。该组合是关联的并且具有多态身份。这听起来很像一个类别，事实上它是！它是一个范畴、一个应用函子和一个箭头。

```
newtype Module m a b =
    Module (a -> m (b, Module m a b))

instance (Monad m) => Applicative (Module m a)
instance (Monad m) => Arrow (Module m)
instance (Monad m) => Category (Module m)
instance (Monad m) => Functor (Module m a) 
```

我们现在可以组合两个模块，它们有自己的本地状态，甚至都不知道！但这还不够。我们想要更多。可以切换的模块怎么样？让我们扩展我们的小模块系统，以便模块实际上可以选择*不*给出答案：

```
newtype Module m a b =
    Module (a -> m (Maybe b, Module m a b)) 
```

这允许另一种形式的组合与 正交`(.)`： 现在我们的类型也是一个`Alternative`函子族：

```
instance (Monad m) => Alternative (Module m a) 
```

现在一个模块可以选择是否响应请求，如果不响应，则尝试下一个模块。简单的。您刚刚重新发明了电线类别。=)

当然，您不需要重新发明它。Netwire库实现[了](http://hackage.haskell.org/package/netwire)这种设计模式，并带有一个预定义“模块”（称为线）的大型库。有关教程，请参阅[Control.Wire](http://hackage.haskell.org/packages/archive/netwire/latest/doc/html/Control-Wire.html)模块。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-12-17T22:38:03.117

这是一个如何`lens`像其他人谈论的那样使用的具体示例。在下面的代码示例中，`Type1`是本地状态（即您的锤子），并且`Type2`是全局状态（即您的多功能工具）。 `lens`提供的`zoom`功能可让您运行局部状态计算，放大镜头定义的任何场：

```
import Control.Lens
import Control.Monad.Trans.Class (lift)
import Control.Monad.Trans.State

data Type1 = Type1 {
    _field1 :: Int   ,
    _field2 :: Double}

field1 :: SimpleLens Type1 Int
field1 = lens _field1 (\x a -> x { _field1 = a})

field2 :: SimpleLens Type1 Double
field2 = lens _field2 (\x a -> x { _field2 = a})

data Type2 = Type2 {
    _type1  :: Type1 ,
    _field3 :: String}

type1 :: SimpleLens Type2 Type1
type1 = lens _type1 (\x a -> x { _type1 = a})

field3 :: SimpleLens Type2 String
field3 = lens _field3 (\x a -> x { _field3 = a})

localCode :: StateT Type1 IO ()
localCode = do
    field1 += 3
    field2 .= 5.0
    lift $ putStrLn "Done!"

globalCode :: StateT Type2 IO ()
globalCode = do
    f1 <- zoom type1 $ do
        localCode
        use field1
    field3 %= (++ show f1)
    f3 <- use field3
    lift $ putStrLn f3

main = runStateT globalCode (Type2 (Type1 9 4.0) "Hello: ") 
```

`zoom`不限于一种类型的直接子字段。由于镜头是可组合的，因此您只需执行以下操作即可在一次操作中任意缩放：

```
zoom (field1a . field2c . field3b . field4j) $ do ... 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-17T14:50:30.103

这听起来很像镜头的应用。

镜头是某些数据的子字段的规范。这个想法是你有一些价值`toolLens`和功能`view`，`set`以便`view toolLens :: MultiTool h -> h`获取工具并`set toolLens :: MultiTool h -> h -> MultiTool h`用新值替换它。然后，您可以轻松地将您的定义`withMember`为仅接受镜头的函数。

镜头技术最近取得了很大进步，现在它们的能力令人难以置信。在撰写本文时，最强大的库是 Edward Kmett 的[`lens`](http://hackage.haskell.org/package/lens)库，它有点难以接受，但是一旦你找到了你想要的功能，它就非常简单了。您还可以在 SO 上搜索有关镜头的更多问题，例如，链接到镜头、fclabels、数据访问器的[功能镜头](https://stackoverflow.com/q/8307370/812053)[- 用于结构访问和突变的库更好](https://stackoverflow.com/q/5767129/812053)，或者[镜头](https://stackoverflow.com/questions/tagged/lenses)标签。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-04-14T12:23:25.047

我创建了一个名为[data-diverse-lens的镜头可扩展记录库，它允许像以下](https://github.com/louispan/data-diverse-lens)[要点](https://gist.github.com/louispan/71aca6b4ba4118981a176c582fa02070)一样组合多个 ReaderT（或 StateT）：

```
{-# LANGUAGE FlexibleContexts #-}
{-# LANGUAGE TypeApplications #-}

module Main where

import Control.Lens
import Control.Monad.Reader
import Control.Monad.State
import Data.Diverse.Lens
import Data.Semigroup

foo :: (MonadReader r m, HasItem' Int r, HasItem' String r) => m (Int, String)
foo = do
    i <- view (item' @Int) -- explicitly specify type
    s <- view item' -- type can also be inferred
    pure (i + 10, s <> "bar")

bar :: (MonadState s m, HasItem' Int s, HasItem' String s) => m ()
bar = do
    (item' @Int) %= (+10) -- explicitly specify type
    item' %= (<> "bar") -- type can also be inferred
    pure ()

main :: IO ()
main = do
    -- example of running ReaderT with multiple items
    (i, s) <- runReaderT foo ((2 :: Int) ./ "foo" ./ nil)
    putStrLn $ show i <> s -- prints out "12foobar"
    -- example of running StateT with multiple items
    is <- execStateT bar ((2 :: Int) ./ "foo" ./ nil)
    putStrLn $ show (view (item @Int) is) <> (view (item @String) is) -- prints out "12foobar" 
```

[Data.Has](http://hackage.haskell.org/package/data-has-0.3.0.0/docs/Data-Has.html)是一个更简单的库，它对元组做同样的事情。图书馆首页的示例：

```
 {-# LANGUAGE FlexibleContexts #-}

 -- in some library code
 ...
 logInAnyReaderHasLogger :: (Has Logger r, MonadReader r m) => LogString -> m ()
 logInAnyReaderHasLogger s = asks getter >>= logWithLogger s

 queryInAnyReaderHasSQL :: (Has SqlBackEnd r, MonadReader r m) => Query -> m a
 queryInAnyReaderHasSQL q = asks getter >>= queryWithSQL q
 ...

 -- now you want to use these effects together
 ...
 logger <- initLogger  ...
 sql <- initSqlBackEnd ...

 (`runReader` (logger, sql)) $ do
       ...
       logInAnyReaderHasLogger ...
       ...
       x <- queryInAnyReaderHasSQL ...
       ... 
```

# google-maps - 可以用 CSS 定义 zoomControl ControlPosition 吗？

> ID：13915927
> 
> 赞同：0
> 
> 时间：2012-12-17T14:22:16.800
> 
> 标签：google-maps, google-maps-api-3

我知道 zoomControl 有一个[固定位置](https://developers.google.com/maps/documentation/javascript/reference?hl=it#ControlPosition)，但它们不足以放置我需要放置的位置。

我可以用 CSS 设置样式吗？如`top:80px; right:20px;`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T05:46:47.407

是的，你可以用**jQuery**做到这一点。如果您看到生成的地图的 HTML 源代码，可以观察到地图提供的各种控件没有 ID 属性来操作它们。但是，我们可以根据需要使用每个元素的 title 属性来修改它们。请参阅此解决方案，其中单击地图 div 会`top:50px`在缩放控制栏中添加一个 -

**[**演示](http://jsfiddle.net/dKBqs/2/)**

**jQuery-**

```
$("div[title='Click to zoom']").css("top","50px");
        }); 
```

同样，您可以捕获地图中的其他控件并根据需要向它们添加 css。

这里要注意的一点是，您不能`$(document).ready()`在页面加载时更改 css，因为地图实际上需要时间来加载，然后缩放栏不在`DOM`. 所以我使用了一个地图`click`事件来添加css。您可以使用其他事件来操作缩放控件或其他控件的 css。

# javascript - Bootstrap：多个词缀

> ID：13915939
> 
> 赞同：0
> 
> 时间：2012-12-17T14:23:26.563
> 
> 标签：javascript, html, css, twitter-bootstrap

我有一个这样的结构：

```
-section1
  -sidebar1
  -content1
-section2
  -sidebar2
  -content2 
```

等等...

我想像在[Bootstrap 文档](http://twitter.github.com/bootstrap/javascript.html)中一样使用 affix 插件，但是只要我在导航它的部分，每个侧边栏都应该是“固定的”。

因此，如果用户正在查看 section1 sidebar1 应该是固定的，当它向下滚动到 section2 时 sidebar1 应该被释放并且 sidebar 2 应该被固定。

像那个项目[https://github.com/bigspotteddog/ScrollToFixed](https://github.com/bigspotteddog/ScrollToFixed)（参见第五个演示，stackoverflow 不允许我在不发布一些代码的情况下链接到 jsfiddle）

# php - 教义中的两个生成值

> ID：13915944
> 
> 赞同：17
> 
> 时间：2012-12-17T14:23:40.630
> 
> 标签：php, mysql, symfony, doctrine, doctrine-orm

我想在我的 Doctrine-Entity 中实现一个人类可读的 ID。我想保留 DB-ID 以供工作并添加诸如“PRE12-00005”之类的内容（带有前缀和年份，并且每个新年都从 0 开始）。我尝试添加一个自定义 ID 生成器，但似乎 Doctrine 无法在一个实体中使用两个生成的值。

```
/**
 * @var integer
 * @ORM\Column(name="id", type="integer")
 * @ORM\Id
 * @ORM\GeneratedValue(strategy="IDENTITY")
 */
protected $id;

/**
 * @var string
 * @ORM\Column(name="name", type="string", length=25, unique=true)
 * @ORM\GeneratedValue(strategy="CUSTOM")
 * @ORM\CustomIdGenerator(class="NameGenerator")
 */
protected $name; 
```

Doctrine 总是尝试将生成器的返回值保存到“id”-Field 中，并将 null 保存到“name”中。还有另一种实现方式吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-17T15:44:42.810

据我所知，GeneratedValue 策略是为主键保留的，这意味着每个实体只能使用一次。

但是，根据您的需要，您有几个选择：

*   你总是可以有一个[prePersist 生命周期事件](https://www.doctrine-project.org/projects/doctrine-orm/en/2.6/reference/events.html#lifecycle-events)，在你第一次持久化之前设置你喜欢的任何值。

*   如果您依赖 id 从中生成另一个唯一 id，您可以实现一个 postPersist 事件，在那里设置您的名称并确保您刷新两次（第一次生成主键，第二次保存名称）。

*   如果您认为数据库中的名称在一段时间内为空是可以的，则可以实现一个 postLoad 事件，如果名称为空，该事件将填充名称。这样，您的应用程序始终可以看到名称（因为它要么是从数据库加载的，要么是由 postLoad 事件填充的），并且当您在初始保存后第一次添加或编辑信息时，您的名称也将被保存

*   不保存名称并由某些 cronjob/deamon/queue 生成它可能是可以的，这样您的应用程序就不必处理它。您唯一需要做的就是确保缺少的名称不会搞砸。

*   也许生成一个不依赖于主键的键可能是可以的，因此可以由[全局事件处理程序](http://symfony.com/doc/current/cookbook/doctrine/event_listeners_subscribers.html)生成。你当然有这样一个事件处理程序的缺点，因为他是全局的，所以无论它是否是正确的实体，都会为你坚持的每个对象调用。

*   最后但并非最不重要的一点是，回退到存储过程/触发器以让数据库处理它可能是可以的。这样你就不必在你的应用程序中弄乱这个了。但请注意，在此过程中可能存在陷阱（就像开发人员忘记了这一点，因为它不在代码中，而是在数据库中！）。

可能还有其他方法。我想说的是：不要将 generatedValue 用于非主键属性！

# wordpress - 悬停在wordpress上

> ID：13915949
> 
> 赞同：0
> 
> 时间：2012-12-17T14:23:56.847
> 
> 标签：wordpress, hover, mouseover

所以我一直在努力在悬停期间将图片更改为另一张图片，但它不会让步。我正在使用在 godaddy 上托管的 WordPress 主题，所以我不习惯代码。
这是到位的代码：

```
<header id="header">
    <div id="logo">
        <a href="<?php echo home_url(); ?>">
            <img src="<?php get_option_tree('rb_logo_path', $theme_options, true); ?>" alt="<?php bloginfo('name'); ?>" />
        </a>
</div>
<p id="tagline"><?php bloginfo('description'); ?></p>
</header> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T14:36:34.343

将您的 HTML 调整为：

```
<header id="header">
    <div id="logo">
        <a href="<?php echo home_url(); ?>">
            <img class="default-image" src="<?php get_option_tree('rb_logo_path', $theme_options, true); ?>" alt="<?php bloginfo('name'); ?>" />
            <img class="hover-only" src="%%OTHER IMAGE URL%%" alt="<?php bloginfo('name'); ?>" />
        </a>
</div>
<p id="tagline"><?php bloginfo('description'); ?></p>
</header> 
```

在你的`style.css`

```
#logo a img.default-image {
    display: block;
}
#logo a img.hover-only {
    display: none;
}
#logo a:hover img.hover-only {
    display: block;
}
#logo a:hover img.default-image {
    display: none;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T14:32:05.037

您需要捕获鼠标悬停事件（例如使用 jQuery）并替换图像。

```
 $('logo').bind('mouseover', function() {
       $('img').attr("src","<other image url>");
   } 
```

您需要将此代码添加到您的主题源中。

# jquery - 使用 Jquery 将大字符串从 ajax 调用返回到 ASP.NET 的 Web 方法

> ID：13915953
> 
> 赞同：11
> 
> 时间：2012-12-17T14:24:08.813
> 
> 标签：jquery, asp.net, webmethod

在我的 ASP.NET 网站中，我使用 Jquery 调用 Web 方法，如下所示：

```
 $.ajax({
    type: "POST",
    contentType: "application/json; charset=utf-8",
    data: "{'param1': '" + param1 + "','param2': '" + param2+ "' }",
    dataType: 'json',
    url: "Default.aspx/TestMethod",       
    error: function (jqXHR, textStatus, errorThrown) {
        alert("error: " + textStatus);                     
    },
    success: function (msg) {
        document.getElementById("content").innerHTML = msg.d;
    }
}); 
```

Web 方法定义为：

```
[System.Web.Services.WebMethod]
public static String TestMethod(String param1, String param2)
{       
     String to_return = /* result of operations on param1 and param2 */;        
     return to_return;
} 
```

我的结果是一个包含 HTML 代码的字符串。如果字符串很小
，它工作得很好。 但这给了我错误：`to_return`

> 500 内部服务器错误 6.22s

我尝试在 Response 中使用 FireBug 来探索它，它向我展示了：

> {"Message":"处理请求时出错。","StackTrace":"","ExceptionType":""}

在 Visual Studio 中使用断点，我已将`to_return`字符串复制到文本文件中。文件大小变为：127 KB。
可能出了什么问题？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-17T14:56:03.273

很可能您已经超过[了 MaxJsonLength](http://msdn.microsoft.com/en-us/library/system.web.configuration.scriptingjsonserializationsection.maxjsonlength.aspx)，默认情况下它是 102400 个字符并且您的字符串更大。您可以在 web.config 中增加此限制：

```
<configuration>
    ... 
    <system.web.extensions>
        <scripting>
            <webServices>
                <jsonSerialization maxJsonLength="300000" />
            </webServices>
        </scripting>
    </system.web.extensions>
    ...
</configuration> 
```

# c# - 位图图像作为字典键

> ID：13915954
> 
> 赞同：1
> 
> 时间：2012-12-17T14:24:12.700
> 
> 标签：c#, image-processing, bitmap

我想知道将图像用作哈希集/字典键的大小应该是多少。我也在考虑为此目的使用散列函数，但我害怕散列冲突。我需要存储大约百万张图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T14:27:55.543

在 HashSet 或 Dictionary 中使用什么数据作为键并不重要，但您需要为它实现一个`GetHashCode`和一个`Equals`方法。

哈希冲突不是问题。这将只是将两个图像放在同一个桶中，并使用该`Equals`方法找到正确的图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T14:29:48.633

位图图像作为键？这不是一个好主意。Hashset 键应该尽可能小，否则性能会受到很大影响。

您可以做的是从图像中计算哈希值（例如 SHA1），然后将其用作键。它只有 20 个字节，因此应该是一个不错的大小，无论如何都比完整的位图图像要好得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T14:32:14.643

给定图像的字节，您可以使用诸如 MD5 或 SHA1 之类的算法来计算它的哈希值。

`bytes`作为图片的字节数组的示例：

```
using (var md5 = new System.Security.Cryptography.MD5CryptoServiceProvider())
{
    var hash = Convert.ToBase64String(md5.ComputeHash(bytes));
    //Store hash
} 
```

# blackberry - 从 BlackBerry 浏览器中的 url 启动应用程序？

> ID：13915956
> 
> 赞同：0
> 
> 时间：2012-12-17T14:24:31.810
> 
> 标签：blackberry

我正在开发一个应用程序，我将在浏览器中启动一个 url，我将从中启动我的应用程序。

假设如果我单击`google.com`，然后按**回车**，它将启动我的应用程序。为此，我尝试使用`HttpFilterRegistry`API。

作为参考，我正在使用**HTTPFilterDemo**应用程序。但目前在启动应用程序时，我得到了`NullPointerException`.

我在`openFilter`方法中编写了以下代码：

```
 public Connection openFilter(String name, int mode, boolean timeouts) throws IOException {
    Logger.out("Protocol", "it is inside the openFilter method");
    _url = name.substring(2);
    _requestHeaders = new HttpHeaders();
    _responseHeaders = new HttpHeaders();
    _responseHeaders.setProperty(HttpProtocolConstants.HEADER_CONTENT_TYPE, "text/html");
    Logger.out("Protocol", "here it is come ::::44444444");
    final int modHandle = CodeModuleManager.getModuleHandle("AppLaunchBrowser");
    Logger.out("Protocol", "here is the module handle:::" + modHandle);
    final ApplicationDescriptor[] apDes = CodeModuleManager.getApplicationDescriptors(modHandle);
    final ApplicationDescriptor appDescriptor = new ApplicationDescriptor(apDes[0], new String[] {});
    Logger.out("Protocol", "here is the app descriptor:::" + appDescriptor);
    try {
        final int appCode = ApplicationManager.getApplicationManager().runApplication(appDescriptor, true);
        Logger.out("Protocol", "here is the app code:::" + appCode);
    } catch (ApplicationManagerException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    // }
    return this;
} 
```

在应用程序类中，我正在创建替代入口点并使用如下：

```
 public class AppLaunch extends UiApplication{
    public static void main(String args[])
    {
        Logger.out("AppLaunch", args+"length of the arguments::::" +args.length);
        if((args != null) && (args.length > 0) && (args[0].equals("background")))
        {
            Logger.out("AppLaunch", "in the alternate entry point");
//          Logger.out("AppLaunch", args+"length of the arguments::::" +args.length);
            HttpFilterRegistry.registerFilter("www.google.co.in", "com.innominds.ca", false);

        }
        else 
        {
            Logger.out("AppLaunch", "Inside the Applaunch");
            AppLaunch theApp = new AppLaunch();
            theApp.requestForeground();
            Logger.out("AppLaunch", "created the app launch object");
            theApp.enterEventDispatcher();
//          Logger.out("AppLaunch", "in the alternate entry point");
//          HttpFilterRegistry.registerFilter("www.google.co.in", "com.innominds.ca", false);
        }
    }

    public AppLaunch()
    {
        checkPermissions();
        showTestScreen();
    }

    private void checkPermissions()
    {

        ApplicationPermissionsManager apm = ApplicationPermissionsManager.getInstance();
        ApplicationPermissions original = apm.getApplicationPermissions();

        if(original.getPermission(ApplicationPermissions.PERMISSION_BROWSER_FILTER) == ApplicationPermissions.VALUE_ALLOW)
        {
            // All of the necessary permissions are currently available
            return;
        }

        ApplicationPermissions permRequest = new ApplicationPermissions();
        permRequest.addPermission(ApplicationPermissions.PERMISSION_BROWSER_FILTER);

        boolean acceptance = ApplicationPermissionsManager.getInstance().invokePermissionsRequest(permRequest);

        if(acceptance)
        {
            // User has accepted all of the permissions
            return;
        }
        else
        {

        }
    }

    private void showTestScreen()
    {
        UiApplication.getUiApplication().pushScreen(new AppLaunchScreen());
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T06:29:09.810

最后我能够解决这个问题。实际上 NPE 正在使用其他一些回调方法，因为我正在实现 FilterBaseInterface。

# json - 如何确保约束键应该是某些用户定义数组中的项目之一

> ID：13915959
> 
> 赞同：0
> 
> 时间：2012-12-17T14:24:40.063
> 
> 标签：json, schema, jsonschema

我正在使用 JSON 来定义一些配置文件，并且我想使用[json scheme](http://json-schema.org/)来验证它们。我的问题是我想确保某个对象的键应该是在同一 JSON 中定义的数组项的子集：例如：

有效的：

```
{
      "files": ["file1", "file2"],
      "filelocations": {
           "file1": "/etc/globalconfigs/file1.conf",
           "file2": "/usr/bin/file2.sh"
      }
} 
```

无效（其他键不在 中`files`）：

```
{
      "files": ["file1", "file2"],
      "filelocations": {
           "file1": "/etc/globalconfigs/file1.conf",
           "otherkey": "/usr/bin/file2.sh"
      }
} 
```

等等我想要的是确保在数组`filelocations`中找到键。`files`虽然在这个例子中，我们可以通过组合键值来改变 JSON 的结构，这样就不需要这种约束，但在我的例子中，我不能像这样改变 JSON，所以有一个验证很好机制。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T22:07:10.763

您无法使用 JSON Schema 实现这一点，没有任何关键字组合可以保证这一点。

但是，如果您喜欢冒险（我什至可以为您编写代码），您可以使用[我的 JSON Schema API](https://github.com/fge/json-schema-validator)并编写自定义关键字来满足您的需求。这是可行的。

# jquery-mobile - 是否可以使用基于从 knockout.js 派生的自定义属性的 jquery 移动自动分隔符？

> ID：13915961
> 
> 赞同：1
> 
> 时间：2012-12-17T14:24:41.600
> 
> 标签：jquery-mobile, jquery-plugins, jquery-selectors, knockout.js

我有以下列表，最初是由 knockout.js 创建的

```
<div data-role="content">
    <div id="PromoListDiv">
      <ul id="List" data-bind="foreach: promotions">
       <li data-bind="attr:{'data-status': ApprovalStatus}"><a data-bind="text: Title, attr: {href: ButtonLink}"></a></li>
      </ul>
    </div>
</div><!-- /content --> 
```

这是在 jquery 中调用 listview 插件的代码

```
 $('#List').listview({
            autodividers: true,
            autodividersSelector: function (li) {
                var out = li.attr('ApprovalStatus');
                return out;
            }
        }); 
```

我曾尝试将自定义属性添加到

*   元素并让它根据它创建分隔线，但列表显示（所有数据都存在）而没有分隔线。我想我有所有的东西可以做到这一点，但我对 jquery 的理解不足以使用它们，理想情况下，这个列表将由基于淘汰模型属性的分隔符分隔。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T16:26:16.710

找出为什么它不起作用

```
var out = li.attr('ApprovalStatus'); 
```

不正确，因为它没有正确选择列表元素或正确的属性，这样做：

```
var out = $(li).attr('data-status'); 
```

# php - Android 和网页中的 Android 用户身份验证

> ID：13915962
> 
> 赞同：0
> 
> 时间：2012-12-17T14:24:47.267
> 
> 标签：php, android, authentication

通常，在创建网站时，我会创建一个登录表单，当成功登录时，会设置一个会话变量。所以我可以用这个值检查是否可以显示页面： if isset session .... echo content ....

现在，我正在创建一个必须结合 Android 身份验证和网站身份验证的 Android 应用程序。应用程序的某些部分将在 Android 组件中加载，但编辑配置文件信息将在 web 视图中加载的网页中完成。

启动应用程序时，我会显示一个登录屏幕，当按下登录按钮时，会调用一个 .php 页面，该页面会验证来自 mysql 数据库的登录名和密码，并将一个 json 结果传回我的应用程序。当为正时，将显示下一个屏幕。然后，如果用户在菜单中选择“编辑配置文件”，则会在 webview 中加载网页。

但我坚持如何在 webview 页面中对用户进行身份验证。如何让 webview 源页面（例如，假设 profile.php）知道用户已正确登录。

我找到了很多信息，但没有关于如何将用户传递到 webview 页面并正确验证它的信息。

所以我想知道将我的用户传递到我的网页浏览页面的正确方法是什么？我必须在我的 Android 代码中传递什么以及如何在我的 php 代码中处理它？

我知道同步 cookie，但我并没有真正得到完整的解决方法： [如何将 cookie 与 android webview 同步？](https://stackoverflow.com/questions/10827639/how-to-sync-cookies-with-android-webview)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T14:43:46.463

我会采取扩展`profile.php`页面的方式，让它接受`username`并`password`从`POST`. 这样，您可以将 Android 应用程序中的用户凭据发布到您的`profile.php`页面，该页面将对用户进行身份验证并返回该用户的个人资料页面。再次编辑并提交数据后，发送用户身份验证所需的凭据，以存储正确用户的配置文件数据。这样，它将更像 Web 服务一样工作。

我建议始终为移动应用程序创建至少一些简单的 Web API 或 Web 服务以在数据之上进行操作，而不是在具体网页之上工作或操作。

# r - 计算每组的排名

> ID：13915980
> 
> 赞同：6
> 
> 时间：2012-12-17T14:25:58.287
> 
> 标签：r, plyr, ranking

我有一个`df`类型和值。`x`我想按内部的顺序对它们进行排名，`type`并计算有多少其他行`n`的值`x`高于（列`pos`）。

例如

```
df <- data.frame(type = c("a","a","a","b","b","b"),x=c(1,77,1,34,1,8))
# for type a row 3 has a higher x than row 1 and 2 so has a pos value of 2 
```

我可以这样做：

```
library(plyr)
df <- data.frame(type = c("a","a","a","b","b","b"),x=c(1,77,1,34,1,8))
df <- ddply(df,.(type), function(x) x[with(x, order(x)) ,])
df <- ddply(df,.(type), transform, pos = (seq_along(x)-1) )

     type  x pos
1    a  1   0
2    a  1   1
3    a 77   2
4    b  1   0
5    b  8   1
6    b 34   2 
```

但是这种方法没有考虑类型`a`第 1 行和第 2 行之间的关系。在关系具有相同值的情况下，获得输出的最简单方法是什么，例如

```
 type  x pos
 1    a  1   0
 2    a  1   0
 3    a 77   2
 4    b  1   0
 5    b  8   1
 6    b 34   2 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-17T14:42:38.430

```
ddply(df,.(type), transform, pos = rank(x,ties.method ="min")-1)

  type  x pos
1    a  1   0
2    a 77   2
3    a  1   0
4    b 34   2
5    b  1   0
6    b  8   1 
```

# c# - AES 密钥管理建议

> ID：13915985
> 
> 赞同：2
> 
> 时间：2012-12-17T14:26:05.143
> 
> 标签：c#, aes

我需要一些关于我正在从事的学校项目的建议。我正在制作一个用于加密某些文件中的数据的 AES 应用程序。现在这些文件可以被很多人访问。

对于 AES 密钥，我正在考虑使用`RFC2898DeriveBytes`从密码中获取加密密钥。MSDN 有一些关于如何使用它的好教程。现在，我的问题是在哪里以及如何存储该密钥？

我想将密钥存储在闪存驱动器中的文件中，但是如果有很多用户，那么如何将密钥同时写入多个闪存驱动器？（一台计算机只能有有限数量的端口）。另外，假设我有一个应该有权访问某些文件的新用户，我如何将密钥写入他的闪存驱动器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T15:21:15.807

这实际上取决于您的应用程序的目标。

1.  如果目的是对数据进行加密，以便您的应用程序的任何用户都可以访问它，那么将密钥（或者，甚至更安全的用于派生密钥的数据）嵌入应用程序本身更为合适。

2.  如果要在每个用户的基础上限制访问，那么密钥（或从中派生密钥的数据）将需要在每个用户的基础上存储（以便它只对授权用户可用）。

关于使用嵌入式安全数据的几个提示：

*   将数据分解成可以从应用程序的不同位置提取的片段。使用自定义算法来组装数据。

*   嵌入从中派生密钥的数据比嵌入密钥本身要安全得多。如果黑客使用二进制编辑器并在应用程序中发现您的密钥完好无损，则解密文件会容易得多。如果同一位黑客找到了从中派生密钥的数据，他仍然必须确定您用来从该数据中派生密钥的算法，然后才能使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T23:39:49.727

您无法存储密钥；您必须告诉用户密钥是什么。`RFC2898DeriveBytes`如果您只是存储输出，则它是无用的。如果您需要随机密钥，请改用种子良好的随机数生成器。

*通常，您会使用从用户*密码生成的密钥来加密随机数据密钥。然后使用数据密钥对数据进行加密。这样您就可以为多个用户加密文件；只需像现在一样使用用户的密钥（使用 PBKDF2 函数生成）加密相同的密钥`RFC2898DeriveBytes`。

确保每次用户输入他/她的密码时使用不同的盐。还强烈建议在数据文件中添加随机 IV，并使用身份验证模式加密或 (H)MAC。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T14:29:28.520

就我个人而言，我不会将密钥存储在任何地方——只需要他们输入密码并按需生成密钥。

# php - 下载流媒体不返回真实文件。错误的内容类型或 mime？

> ID：13915987
> 
> 赞同：1
> 
> 时间：2012-12-17T14:26:06.860
> 
> 标签：php, stream, content-type, mime

一个 Python 应用程序说我通过 PHP 流媒体传输的 zip 文件不是 zip 文件。但是，winrar 可以毫无问题地打开它们。

这是它发送的标头：

```
Content-disposition: filename=example.zip
Content-type: application/zip; charset=binary 
```

我需要更多/不同的标题吗？

下面是代码：

```
<?php
session_start();
if(!$_SESSION['directory']){
    print "Sorry, only logged in users can view downloads";
    exit;
};
?>
<?php

$hidden_file_directory = "download/".$_SESSION['directory']; //Name of the directory where all the sub directories and files exists
$file_path = $_GET['file']; //Get the file from URL variable
$real_file_path = realpath("$hidden_file_directory/$file_path"); //Set the file path w.r.t the download.php... It may be different for u
$filename = basename($real_file_path);

if(dirname($real_file_path) != getcwd() ."/". $hidden_file_directory)
    die("File does not exist.");

if(file_exists($real_file_path)) {
    $content_type = get_mime($real_file_path);
    header("Content-disposition: filename=$filename"); //Tell the filename to the browser
    header("Content-type: $content_type"); //Stream as a binary file! So it would force browser to download
    readfile($real_file_path); //Read and stream the file
}
else {
    echo "File does not exist.";
}

function get_mime($filename) {

    $mime_types = array(

        'txt' => 'text/plain',
        'htm' => 'text/html',
        'html' => 'text/html',
        'php' => 'text/html',
        'css' => 'text/css',
        'js' => 'application/javascript',
        'json' => 'application/json',
        'xml' => 'application/xml',
        'swf' => 'application/x-shockwave-flash',
        'flv' => 'video/x-flv',

        // images
        'png' => 'image/png',
        'jpe' => 'image/jpeg',
        'jpeg' => 'image/jpeg',
        'jpg' => 'image/jpeg',
        'gif' => 'image/gif',
        'bmp' => 'image/bmp',
        'ico' => 'image/vnd.microsoft.icon',
        'tiff' => 'image/tiff',
        'tif' => 'image/tiff',
        'svg' => 'image/svg+xml',
        'svgz' => 'image/svg+xml',

        // archives
        'zip' => 'application/zip',
        'rar' => 'application/x-rar-compressed',
        'exe' => 'application/x-msdownload',
        'msi' => 'application/x-msdownload',
        'cab' => 'application/vnd.ms-cab-compressed',

        // audio/video
        'mp3' => 'audio/mpeg',
        'qt' => 'video/quicktime',
        'mov' => 'video/quicktime',

        // adobe
        'pdf' => 'application/pdf',
        'psd' => 'image/vnd.adobe.photoshop',
        'ai' => 'application/postscript',
        'eps' => 'application/postscript',
        'ps' => 'application/postscript',

        // ms office
        'doc' => 'application/msword',
        'rtf' => 'application/rtf',
        'xls' => 'application/vnd.ms-excel',
        'ppt' => 'application/vnd.ms-powerpoint',

        // open office
        'odt' => 'application/vnd.oasis.opendocument.text',
        'ods' => 'application/vnd.oasis.opendocument.spreadsheet',
    );

    $ext = strtolower(array_pop(explode('.',$filename)));
    if (array_key_exists($ext, $mime_types)) {
        return $mime_types[$ext];
    }
    elseif (function_exists('finfo_open')) {
        $finfo = finfo_open(FILEINFO_MIME);
        $mimetype = finfo_file($finfo, $filename);
        finfo_close($finfo);
        return $mimetype;
    }
    else {
        return 'application/octet-stream';
    }
}

?> 
```

编辑 - 我补充说：

```
if(dirname($real_file_path) != getcwd() ."/". $hidden_file_directory)
    die("File does not exist."); 
```

当那些指出不安全感的人。希望这将足够安全。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T14:38:23.703

我注意到有些浏览器需要将文件名双引号，或者他们不知道它是什么，也许 python 也是如此。尝试发送

```
 header("Content-disposition: filename=\"$filename\""); 
```

你也确定它是事实`application/zip`而不是`application/x-zip-compressed`？

附带说明：您直接使用查询字符串中的文件名。如果我发送我的文件名`file=..\..\..\..\..\..\systemdir\config.xml`怎么办？也许您应该添加一些检查。basename() 像您使用下一步可能是一个好主意。

# django - 模型和信号回调函数之间的Django循环导入错误

> ID：13915988
> 
> 赞同：1
> 
> 时间：2012-12-17T14:26:09.677
> 
> 标签：django

仅与模型有关的循环导入错误似乎有很多问题，但我的模型和信号回调似乎也遇到了类似的问题。我对 Django 还很陌生，所以很可能这与我没有正确构建我的应用程序有关。一些代码：

徽章/models.py：

```
from django.db import models
from django.contrib.auth.models import User
from datetime import datetime
from tasks import badgeaward_callback

class Award(models.Model):
    user = models.ForeignKey(User)
    description = models.TextField(blank=False)
    award_date = models.DateTimeField('date awarded',default=datetime.now)

    def __unicode__(self):
        return self.description

class Points(models.Model):
    POINT_TYPES = (
        ('signup', 'Sign up'),
        ...etc...
    )
    user = models.ForeignKey(User)
    points = models.IntegerField()
    date = models.DateTimeField('date created',default=datetime.now)
    description = models.TextField(blank=False)
    data = models.TextField(blank=True)
    type = models.CharField(max_length=20,choices=POINT_TYPES)

    def __unicode__(self):
        return self.description

models.signals.post_save.connect(badgeaward_callback, sender=Award) 
```

徽章/tasks.py

```
from badges.models import Points

def badgeaward_callback(sender, **kwargs):
    award = kwargs.get('award')

    p = Points()
    p.points = 100
    p.type = 'badgeawarded'
    p.description = award.description
    p.user = award.user
    p.save() 
```

因此，模型正在导入 badaward_callback（这是我得到的错误：无法导入名称 badgeaward_callback），但任务正在导入 Points 模型 - 我认为这是我的错误的根本原因。

非常感谢任何关于我应该如何构建我的应用程序的建议。我应该把我的badgesaward_callback 放到models.py 中吗？这行得通（好吧，没有更多错误），但是当我以后可能会添加更多回调函数时，这是一个好方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T14:40:20.933

在更好的结构方面，而不是`tasks.py`重命名它`signals.py`和来自models.py

```
models.signals.post_save.connect(badgeaward_callback, sender=Award) 
```

将此行移至`signals.py`末尾。然后你不需要`from tasks import badgeaward_callback`在 models.py中导入

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T14:39:28.750

您可以移动`models.signals.post_save.connect(badgeaward_callback, sender=Award)`到`tasks.py`：

```
from django.db import models
from badges.models import Award, Points

def badgeaward_callback(sender, **kwargs):
    award = kwargs.get('award')

    p = Points()
    p.points = 100
    p.type = 'badgeawarded'
    p.description = award.description
    p.user = award.user
    p.save()

models.signals.post_save.connect(badgeaward_callback, sender=Award) 
```

然后导入您`tasks`的`__init__.py`模型包。

# javascript - 将选项文本而不是选项值传递给文本字段

> ID：13915991
> 
> 赞同：0
> 
> 时间：2012-12-17T14:26:14.400
> 
> 标签：javascript, jquery

我会将多个字段的值传递给一个文本字段。有一个问题，选择选项，它的值是0和1，我的问题是如何确保它传递选项文本而不是0和1？这意味着通过 MYR 而不是 0 和 SGD 而不是 1？

[http://jsfiddle.net/e2ScF/64/](http://jsfiddle.net/e2ScF/64/)

HTML：

```
<select id="Salary_para1">
  <option value="">Choose...</option>
  <option value="0" selected>MYR</option>
  <option value="1" >SGD</option>
</select>
<input id="Salary_value" type="text"/>
+ <input type="checkbox" id="Salary_para2" name="Salary_para2" value=" + Allowance"  />Allowance<br/>
<input type="text" id="targetTextField" name="targetTextField" size="31" tabindex="0" maxlength="99" value=""> 
```

代码：

```
$(function() {
  setTarget();
  $("#Salary_para1,#Salary_para2").change(setTarget);
  $("#Salary_value").keyup(setTarget);

  function setTarget() {
    var tmp = $("#Salary_para1").val();
    tmp += $("#Salary_value").val();
    tmp += $("#Salary_para2:checked").val() || '';
    $('#targetTextField').val(tmp);
  }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T14:28:46.883

要获取文本而不是下拉列表中所选内容的值，您必须定位所选选项并从该元素获取文本：

```
var tmp = $("option:selected", "#Salary_para1").text(); 
```

[**小提琴**](http://jsfiddle.net/e2ScF/65/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T14:28:58.570

有什么理由不能更改标记，因此该选项的值等于选项的文本。例如：

```
<option value="MYR" selected>MYR</option> 
```

如果您无法更改标记，则可以使用[jQuery 文本](http://api.jquery.com/text/)方法获取选项的文本。

```
var tmp = $("#Salary_para1 option:selected").text(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T14:29:33.257

我会这样做 -

```
var tmp = $('option:selected', '#Salary_para1').text(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T14:35:46.683

document.getelementById('id').value.select=[位置]

# jquery - 处理“Page_Load”中格式错误的查询字符串

> ID：13915996
> 
> 赞同：0
> 
> 时间：2012-12-17T14:26:29.540
> 
> 标签：jquery, asp.net, query-string

我想打开一个模式错误框，其中包含一条消息和一个按钮，`Page_Load`当传入`Querystring`不包含必需的属性或格式错误时，将用户从事件中重定向。

我已经定义了一个`jQuery`打开对话框的函数，但是当我尝试通过`RegisterStartupScript`or注册它时`RegisterClientScriptBlock`，它没有显示出来。

```
function showErrorPopup() {
    $('#errorDialog').dialog({
        autoOpen: false,
        height: 120,
        width: 500,
        draggable: false,
        resizable: false,
        modal: true,
        title: "Error!",
        open: function (type, data) {
            $(this).parent().appendTo("form");
        },
        close: function (type, data) {
            $('#addNoteButton').hide();
        }
    });
    $('#errorDialog').dialog("open");
    $('#addNoteButton').hide();
} 
```

并且在`Page_Load`：

```
string cID = Page.Request["c"];
int contractID = 0;
if (cID != null)
{
    try
    {
        contractID = Convert.ToInt32(cID);
        Contract contract = FacadeFactory.ProjectsFacade.GetContract(contractID);
        TFSContract source = TFS.GetTFSContract(contract);
        Contract = source;
    }
    catch (Exception)
    {
        errMessage.Text = "Zakázka s tímto číslem neexistuje!";
        ScriptManager.RegisterClientScriptBlock(this, typeof(Page), UniqueID, script, true);
        return;
    }

}
else
{
    errMessage.Text = "Zakázka s tímto číslem neexistuje!";
    ScriptManager.RegisterClientScriptBlock(this.Page, typeof(Page), this.UniqueID, script, true);
    return;
} 
```

有人可以告诉我这是如何实现的吗？