# StackOverflow 问答 13665000-13665999

# python - Python截断国际字符串

> ID：13665001
> 
> 赞同：6
> 
> 时间：2012-12-01T23:51:50.537
> 
> 标签：python, string, encoding, apple-push-notifications

我一直在尝试调试这个太久了，我显然不知道我在做什么，所以希望有人能提供帮助。我什至不确定我应该问什么，但它是这样的：

我正在尝试发送 Apple 推送通知，它们的有效负载大小限制为 256 字节。所以减去一些开销，我剩下大约 100 个英文字符的主要消息内容。

因此，如果一条消息比最大值长，我会截断它：

```
MAX_PUSH_LENGTH = 100
body = (body[:MAX_PUSH_LENGTH]) if len(body) > MAX_PUSH_LENGTH else body 
```

所以这很好，花花公子，无论我有多久的消息（英文），推送通知都会成功发送。但是，现在我有一个阿拉伯字符串：

```
str = "هيك بنكون 
عيش بجنون تون تون تون هيك بنكون 
عيش بجنون تون تون تون 
أوكي أ"

>>> print len(str)
109 
```

所以应该截断。但是，我总是收到无效的有效负载大小错误！好奇的是，我一直在降低 MAX_PUSH_LENGTH 阈值，以查看它需要什么才能成功，直到我将限制设置为 60 左右，推送通知才成功。

我不确定这是否与英语以外的语言的字节大小有关。我的理解是一个英文字符占一个字节，那么一个阿拉伯字符占两个字节吗？这可能与它有关吗？

此外，字符串在发送之前是 JSON 编码的，所以它最终看起来像这样：`\u0647\u064a\u0643 \u0628\u0646\u0643\u0648\u0646 \n\u0639\u064a\u0634 ...`它是否被解释为原始字符串，而只是 u0647 是 5 个字节？

我应该在这里做什么？是否有任何明显的错误，或者我没有问正确的问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-07-19T09:59:49.300

如果你有一个 python unicode 值并且你想截断，下面是在 Python 中执行它的一种非常简短、通用且有效的方法。

```
def truncate_unicode_to_byte_limit(src, byte_limit, encoding='utf-8'):
    '''
    truncate a unicode value to fit within byte_limit when encoded in encoding

    src: a unicode
    byte_limit: a non-negative integer
    encoding: a text encoding

    returns a unicode prefix of src guaranteed to fit within byte_limit when
    encoded as encoding.
    '''
    return src.encode(encoding)[:byte_limit].decode(encoding, 'ignore') 
```

例如：

```
s = u"""
    هيك بنكون
    ascii
    عيش بجنون تون تون تون هيك بنكون
    عيش بجنون تون تون تون
    أوكي أ
"""

b = truncate_unicode_to_byte_limit(s, 73)
print len(b.encode('utf-8')), b 
```

产生输出：

```
73 
    هيك بنكون
    ascii
    عيش بجنون تون تون تو 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-02T00:02:02.367

对于 unicode string `s`，您需要使用类似`len(s.encode('utf-8'))`的方法来获取其长度（以字节为单位）。`len(s)`只返回（未编码）字符的数量。

**更新：** 经过进一步研究，我发现 Python 支持增量编码，这使得可以编写一个相当快的函数来修剪多余的字符，同时避免字符串中任何多字节编码序列的损坏。这是用于此任务的示例代码：

```
# -*- coding: utf-8 -*-

import encodings
_incr_encoder = encodings.search_function('utf8').incrementalencoder()

def utf8_byte_truncate(text, max_bytes):
    """ truncate utf-8 text string to no more than max_bytes long """
    byte_len = 0
    _incr_encoder.reset()
    for index,ch in enumerate(text):
        byte_len += len(_incr_encoder.encode(ch))
        if byte_len > max_bytes:
            break
    else:
        return text
    return text[:index]

s = u"""
    هيك بنكون
    ascii
    عيش بجنون تون تون تون هيك بنكون
    عيش بجنون تون تون تون
    أوكي أ
"""

print 'initial string:'
print s.encode('utf-8')
print "{} chars, {} bytes".format(len(s), len(s.encode('utf-8')))
print
s2 = utf8_byte_truncate(s, 74)  # trim string
print 'after truncation to no more than 74 bytes:'
# following will raise encoding error exception on any improper truncations
print s2.encode('utf-8')
print "{} chars, {} bytes".format(len(s2), len(s2.encode('utf-8'))) 
```

输出：

```
initial string:

    هيك بنكون
    ascii
    عيش بجنون تون تون تون هيك بنكون
    عيش بجنون تون تون تون
    أوكي أ

98 chars, 153 bytes

after truncation to no more than 74 bytes:

    هيك بنكون
    ascii
    عيش بجنون تون تون تو
49 chars, 73 bytes 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T01:42:23.890

您需要切割到字节长度，因此您需要首先`.encode('utf-8')`切割您的字符串，然后在代码点边界处切割它。

在 UTF-8 中，ASCII ( `<= 127`) 是 1 字节。[设置了两个或多个最高有效位](http://en.wikipedia.org/wiki/UTF-8#Description)( `>= 192`) 的字节是字符起始字节；后面的字节数由设置的最高有效位的数量决定。其他任何东西都是连续字节。

如果把中间的多字节序列剪掉，可能会出现问题；如果一个字符不适合，它应该被完全剪切，直到起始字节。

这是一些工作代码：

```
LENGTH_BY_PREFIX = [
  (0xC0, 2), # first byte mask, total codepoint length
  (0xE0, 3), 
  (0xF0, 4),
  (0xF8, 5),
  (0xFC, 6),
]

def codepoint_length(first_byte):
    if first_byte < 128:
        return 1 # ASCII
    for mask, length in LENGTH_BY_PREFIX:
        if first_byte & mask == mask:
            return length
    assert False, 'Invalid byte %r' % first_byte

def cut_to_bytes_length(unicode_text, byte_limit):
    utf8_bytes = unicode_text.encode('UTF-8')
    cut_index = 0
    while cut_index < len(utf8_bytes):
        step = codepoint_length(ord(utf8_bytes[cut_index]))
        if cut_index + step > byte_limit:
            # can't go a whole codepoint further, time to cut
            return utf8_bytes[:cut_index]
        else:
            cut_index += step
    # length limit is longer than our bytes strung, so no cutting
    return utf8_bytes 
```

现在测试。如果`.decode()`成功，我们就进行了正确的切割。

```
unicode_text = u"هيك بنكون" # note that the literal here is Unicode

print cut_to_bytes_length(unicode_text, 100).decode('UTF-8')
print cut_to_bytes_length(unicode_text, 10).decode('UTF-8')
print cut_to_bytes_length(unicode_text, 5).decode('UTF-8')
print cut_to_bytes_length(unicode_text, 4).decode('UTF-8')
print cut_to_bytes_length(unicode_text, 3).decode('UTF-8')
print cut_to_bytes_length(unicode_text, 2).decode('UTF-8')

# This returns empty strings, because an Arabic letter
# requires at least 2 bytes to represent in UTF-8.
print cut_to_bytes_length(unicode_text, 1).decode('UTF-8') 
```

您可以测试代码是否也适用于 ASCII。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T07:10:14.793

使用我在您的[另一个问题上发布的](https://stackoverflow.com/q/13727977/235698)[算法](https://stackoverflow.com/a/13738452/235698)，这将以 UTF-8 编码一个 Unicode 字符串，并仅截断整个 UTF-8 序列以达到小于或等于最大长度的编码长度：

```
s = u"""
    هيك بنكون
    ascii
    عيش بجنون تون تون تون هيك بنكون
    عيش بجنون تون تون تون
    أوكي أ
"""

def utf8_lead_byte(b):
    '''A UTF-8 intermediate byte starts with the bits 10xxxxxx.'''
    return (ord(b) & 0xC0) != 0x80

def utf8_byte_truncate(text,max_bytes):
    '''If text[max_bytes] is not a lead byte, back up until a lead byte is
    found and truncate before that character.'''
    utf8 = text.encode('utf8')
    if len(utf8) <= max_bytes:
        return utf8
    i = max_bytes
    while i > 0 and not utf8_lead_byte(utf8[i]):
        i -= 1
    return utf8[:i]

b = utf8_byte_truncate(s,74)
print len(b),b.decode('utf8') 
```

### 输出

```
73 
    هيك بنكون
    ascii
    عيش بجنون تون تون تو 
```

# python - 在 Python 中从带有一些皱纹的相似性矩阵中找到最佳的成对对齐集

> ID：13665010
> 
> 赞同：0
> 
> 时间：2012-12-01T23:53:07.110
> 
> 标签：python, alignment, sequences

我试图从相似性矩阵中找到两个序列的最佳比对。较高的值表示更好的对齐方式。

```
import numpy as np
a = np.array([
[0,5,5,5,5,5,5,5],
[3,10,0,0,0,9,0,0],
[3,0,10,0,0,0,1,0],
[3,0,0,9,0,0,0,0],
[3,0,0,0,0,0,0,10],
]) 
```

每行/列必须与一列/行对齐，但第 0 行和第 0 列除外，它们可以用于 0 个或多个对齐。

也就是说，这些序列的最佳比对是：

```
(0,0)
(1,1)
(2,2)
(3,3)
(0,4)
(0,5)
(0,6)
(4,7) 
```

`(1,5)`不是对齐对，因为`(1,1)`是更好的对齐方式，并且行和列> 0 只能参与一次对齐。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T22:12:55.523

我正在稍微改变问题。现在每一列都必须正好对齐一行，并且每一行都必须正好对齐一列。为了使矩阵成正方形，我添加了与行/列 0 等效的行/列，以前可以参与多个对齐。对于方阵和每行/列仅参与一次对齐的要求，该问题可以被视为稳定婚姻问题的一个实例。

# java - OpenJPA：如何急切地获取两级嵌套关联？

> ID：13665011
> 
> 赞同：4
> 
> 时间：2012-12-01T23:53:16.863
> 
> 标签：java, openjpa

我正在尝试使用 OpenJPA 2.2 有效地获取两级嵌套关联。基本上，我有一个`A`有`B`很多`C`：

```
@Entity
public class A {
    ...

    @ManyToOne(fetch=FetchType.EAGER)
    private B b;
}

@Entity
public class B {
    ...

    @OneToMany(mappedBy="b", fetch=FetchType.EAGER)
    private List<C> cs;
}

@Entity
public class C {
    ...
} 
```

我的 JPQL 查询如下：

```
SELECT a
FROM A a
WHERE a.id = some condition 
```

我将[EagerFetchMode](http://openjpa.apache.org/builds/2.2.0/apache-openjpa/docs/ref_guide_perfpack_eager.html)设置为“PARALLEL”，以便有第二个查询来检索`Cs`所有`Bs`：

```
<property name="openjpa.jdbc.EagerFetchMode" value="parallel"/>
<property name="org.apache.openjpa.persistence.jdbc.EagerFetchMode" value="PARALLEL"/> 
```

问题是 openjpa 正在生成 n+1 查询而不是 2：一个用于`As`and`Bs`和一个用于 each `C`：

```
SELECT *
FROM a
LEFT OUTER JOIN b 
    ON a.b_id = b.id 
WHERE some condition 
```

和 n 次

```
SELECT *
FROM c 
WHERE c.b_id = x 
```

**如何让 openjpa 发出两个查询而不是 n+1？**

# c# - 将两个列表组合成第三个列表 - 错误

> ID：13665017
> 
> 赞同：0
> 
> 时间：2012-12-01T23:54:19.933
> 
> 标签：c#, list, addrange

我有两个类列表——“交付”和“取件”——我正在尝试制作第三个列表，将交付和取件添加在一起，即显示所有交付和取件而不是一个或另一个的列表。

在搜索了一下之后，我尝试了这个：

```
public List<String> listVisits()
    {
        List<String> listVisits = new List<string>();
        listVisits.AddRange(listDeliveries);
        listVisits.AddRange(listPickups);
    } 
```

但我只是收到错误说：

```
The best overloaded method match for 'System.Collections.Generic.List<string>.AddRange(System.Collections.Generic.IEnumerable<string>)' has found some invalid arguments 
```

还有这个：

```
Argument 1: cannot convert from 'method group' to 'System.Collections.Generic.IEnumerable<string>' 
```

这是什么意思，我该如何解决？

谢谢。

编辑：当前用户通过窗体输入数据。Deliveries 有两个 String 和一个 TimeSpan，Pickups 继承自 Deliveries，但还有两个 String。

```
 public List<String> listDeliveries()
    {
        List<String> listDeliveries = new List<string>();
        foreach (deliveries Deliv in delivery)
        {
            String DelivAsString = Deliv.DeliveryString();
            listDeliveries.Add(DelivAsString);
        }
        return listDeliveries;
    }

    public List<String> listPickups()
    {
        List<String> listPickups = new List<string>();
        foreach (pickups Pickup in pickup)
        {
            String PickupAsString = Pickup.PickupString();
            listPickups.Add(PickupAsString);
        }
        return listPickups;
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-01T23:59:23.390

错误消息表明`listDeliveries`and`listPickups`是*方法*，而不是*变量*。所以你需要调用这些方法。同时，我强烈建议您重命名方法以遵循 .NET 命名约定。所以你可能有：

```
public List<String> ListVisits()
{
    List<String> visits = new List<string>();
    visits.AddRange(ListDeiveries());
    visits.AddRange(ListPickups());
    return visits;
} 
```

或使用 LINQ：

```
public List<String> ListVisits()
{
    return ListDeliveries().Concat(ListPickups()).ToList();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T00:10:38.790

我建议重新启动这样的事情：

```
public List<string> GetDeliveryStrings()
{
    //assuming "deliveries" is your collection of deliveries 
    //otherwise your coding standards are not, well, standard
    //additionally, per Tim Schmelter's suggestion, take a look at 
    //overriding the .ToString() method
    return deliveries.Select(d => d.DeliveryString()).ToList()
}

public List<String> GetPickupStrings()
{
    return pickups.Select(p => p.PickupString()).ToList();
}

//lifted from Jon Skeet's answer
public List<String> GetVisitStrings()
{
   return GetDeliveryStrings().Concat(GetPickupStrings()).ToList();
} 
```

# markdown - 降价语法验证器

> ID：13665019
> 
> 赞同：5
> 
> 时间：2012-12-01T23:54:48.610
> 
> 标签：markdown, jekyll, octopress

使用 Octopress(Jekyll) 时是否有任何关于编写 markdown 的特定规则？

我已经尝试将它粘贴到： http: [//markable.in/editor/](http://markable.in/editor/) ，它看起来不错，但是当我使用`rake preview`从 markdown 源生成 html 时，它只会生成一个空白页面。

这是导致转换为 html 时出错的第一个代码块。我删除了它，一切正常。但我不知道为什么这段代码不起作用。有没有我可以安装的插件来使解释器（这是它的名字吗？）不那么敏感。或者是否有任何工具可以向我指出源代码到底有什么问题。

```
```
php artisan generate:migration create_departments_table department:string

php artisan generate:migration create_roles_table department_id:integer role:string

php artisan generate:migration create_transactions_table department_id:integer main_menu:string menu_text:string address:string

php artisan generate:migration create_rolestransactions_table role_id:integer transaction_id:integer status:integer

php artisan generate:migration create_userlogs_table user_id:integer user:string department:string transaction:string dateandtime:timestamp
``` 
```

这是来源： [https ://gist.github.com/4186168](https://gist.github.com/4186168)

也许你可以向我指出我做错了什么。也许您可以指出一个链接，指向编写 Markdown 时要遵循的规则，该规则与解释器完美配合。

**更新**

生成的 html 页面上没有任何内容。我已经安装了斜线主题[https://github.com/tommy351/Octopress-Theme-Slash](https://github.com/tommy351/Octopress-Theme-Slash)

以下是已安装的插件：

![在此处输入图像描述](../Images/0e109ae86987b5582d72e44aae78837d.png)

我认为它们中的大多数都是默认插件，因为我不记得安装过插件。如果它可能有帮助，我在 Windows 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T22:45:52.020

当我使用 markdown 可执行文件转换您的代码时，它可以工作，但解释错误。

您不应该将代码块放在三个反引号之间，只需将它们缩进 4 个空格即可。反引号用于内联代码。

编辑：我忽略了反引号块代码插件。以上呈现为假。

# perl - 检查 POD 中丢失的空行

> ID：13665023
> 
> 赞同：1
> 
> 时间：2012-12-01T23:55:45.247
> 
> 标签：perl, dist-zilla, perl-pod

我使用 Dist::Zilla 和一堆插件来检查我的 pod，包括语法、链接、覆盖率等。我一直重复的一个非常烦人的 POD 错误是忘记在 ; 之后添加额外的行`=headX`。例如，我刚刚创建了一个带有 pod 的模块，如下所示：

```
=head1 METHODS

=head2 C<wm_graph>
There are three required arguments: ...
If the first arg is ... 
```

当然，我去查看 CPAN 页面并意识到我搞砸了，因为整个段落都是 head2 格式：

![搞砸的豆荚](../Images/18815d59e844e7fe119faf422962d52b.png)

有没有什么好的、自动化的方法来检查我没有忘记在 a `=headX`（或其他任何东西）和下一段之间放置空格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T02:16:15.907

滚动一些 perl 代码。粗鲁，但它有效。我把 main() 写给你。

```
子 do_pod_check
{
    我的 （
        $路径，
         ) = @_;

    我的 $ 麻烦 = 0;
    打开（我的 $handle，$path）或
        die "无法打开文件：$path: $!\n";

    而（我的 $line = <$handle> ）
    {
        如果 ( $line =~ /^=\w+/ )
        {
            我的 $line2 = <$handle>;
            如果 ( $line2 && $line2 =~ /\S/ )
            {
                $line2 =~ s/^\s++//;
                $line =~ s/\s+$//; #superchomp 行
                $line2 =~ s/\s+$//;
                print "$path\[$.]: 可疑 POD: /",
                                substr($line,0,30), "/",
                                substr($line2,0,30), "/",
                                "\n";
                $麻烦++;
            }
        }
    }
    返回$麻烦；
}
```

# ios - iOS QuickBlox SDK 按用户 ID 过滤自定义对象

> ID：13665026
> 
> 赞同：2
> 
> 时间：2012-12-01T23:56:02.930
> 
> 标签：ios, quickblox

我正在尝试在运行 6.0.1 的 iPhone 4s 上使用 iOS6 SDK 按特定用户 ID 过滤自定义对象。不幸的是，当执行下面的代码时，它会返回创建的自定义对象模式中的所有记录。

```
 NSMutableDictionary *getRequest = [NSMutableDictionary dictionary];
    [getRequest setObject:@"222222" forKey:@"user_id"];
    [QBCustomObjects objectsWithClassName:@"appointments" extendedRequest:getRequest delegate:self]; 
```

（我省略了身份验证代码。我能够很好地进行身份验证并创建记录）对于密钥，我已经尝试了我能想到的用户 ID 的所有排列。包括查看查询请求的响应以及如何在 JSON 提要中引用该字段。就好像extendedRequest 没有考虑我在其中输入的任何值 - 但我清楚地看到它们在查看控制台日志时被传递。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T12:45:34.030

这很奇怪，因为我用

```
NSMutableDictionary *getRequest = [NSMutableDictionary dictionary];
[getRequest setObject:[NSNumber numberWithInt:291] forKey:@"user_id"];

[QBCustomObjects objectsWithClassName:@"SuperSample" extendedRequest:getRequest delegate:self]; 
```

如果我们查看控制台，我们将看到：

```
GET http://api.quickblox.com/data/SuperSample.xml
headers:{
    "QB-SDK" = "iOS 1.3.1";
    "Qb-Token" = 00fbd4c38b4156975e63882ad660e9a724ae7a3d;
    "QuickBlox-REST-API-Version" = "0.1.1";
}
parameters:{
    "user_id" = 291;
} 
```

此代码片段仅返回**user_id**为 291 的记录（在此示例中，这是一条记录）：

```
<?xml version="1.0" encoding="UTF-8"?>
<data type="array">
  <SuperSample>
    <_id>50bb4c1c535c12306b007ea4</_id>
    <_parent_id nil="true"></_parent_id>
    <born_age nil="true"></born_age>
    <created-at type="integer">1354451996</created-at>
    <my_field nil="true"></my_field>
    <rating nil="true"></rating>
    <sex_ nil="true"></sex_>
    <text nil="true"></text>
    <updated-at type="integer">1354451996</updated-at>
    <user-id type="integer">291</user-id>
    <vote nil="true"></vote>
  </SuperSample>
</data> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T20:34:41.970

我回过头来看看我是如何创建一个 quickblox 会话的，我正在使用以下方法对 API 进行身份验证。

```
 [QBUsers logInWithUserEmail:@"" password:@"" delegate:self]; 
```

我将其切换为使用此方法，现在我可以从自定义对象模块中提取特定记录。

```
 [QBAuth createSessionWithExtendedRequest:extendedAuthRequest delegate:self]; 
```

# javascript - Google 地图样式、可见性关闭和性能

> ID：13665027
> 
> 赞同：1
> 
> 时间：2012-12-01T23:56:12.010
> 
> 标签：javascript, google-maps, google-maps-api-3

我已经进行了初步搜索，以了解当 Google 地图加载了一些带有`visibility : 'off'`.

> 切换样式属性（如可见性）时是否会对性能产生影响？

*禁用时，地图/s 似乎感觉“更轻” `visibility`，但我没有找到任何证实这一点的文档。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T06:54:53.570

当您隐藏可点击元素（例如 poi）时，它应该会提高性能，因为它们不仅需要渲染，还需要一些脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T20:04:26.797

您不应该看到性能改进。

相反，自定义样式的地图需要自定义图块，这可能需要比标准地图更长的时间。

至于可点击元素（“poi”），如果您只是平移和缩放地图，也不应该有显着差异。

# lwuit - LWUIT：如何防止按钮在 J2ME 中改变颜色

> ID：13665029
> 
> 赞同：1
> 
> 时间：2012-12-01T23:56:25.473
> 
> 标签：lwuit, nokia-s40

我已经使用 LWUIT 创建了一个应用程序。它使用标题栏，像这样

![在此处输入图像描述](../Images/4e0f730e84374b2a4ff3cb1bfd911cc0.png)

它使用容器。在此标题栏容器下，我创建了可滚动列表。

奇怪的是，如果我滚动此列表，标题栏中的按钮（菜单按钮和过滤器按钮）的颜色会发生变化。当我尝试设备中的应用程序时，它就发生了。当我尝试在模拟器中使用它时它就好了

这是我创建的按钮的代码

```
 b_menu.getUnselectedStyle().setBorder(null);
    b_menu.getSelectedStyle().setBorder(null);
    b_menu.getPressedStyle().setBorder(null);
    b_menu.setIcon(ImageUtil.loadImage("/menu.png"));
    b_menu.setRolloverIcon(ImageUtil.loadImage("/menu.png"));
    b_menu.setPressedIcon(ImageUtil.loadImage("/menu.png"));
    b_menu.setName("menu");
    b_menu.getStyle().setBgTransparency(0);
    b_menu.getStyle().setBgPainter(new LinearGradientPainter(0xcf266a, 0xcf266a, false));
    b_menu.getSelectedStyle().setPadding(5, 5, 5, 5);
    b_menu.getSelectedStyle().setMargin(0, 0, 0, 0);
    b_menu.getUnselectedStyle().setPadding(5, 5, 5, 5);
    b_menu.getSelectedStyle().setMargin(0, 0, 0, 0);
    b_menu.getSelectedStyle().setBgColor(0xcf266a, false);
    b_menu.getSelectedStyle().setBgTransparency(0);
    b_menu.getSelectedStyle().setBgPainter(new LinearGradientPainter(0xcf266a, 0xcf266a, false));
    b_menu.getUnselectedStyle().setBgTransparency(0);
    b_menu.getUnselectedStyle().setBgPainter(new LinearGradientPainter(0xcf266a, 0xcf266a, false));
    b_menu.getPressedStyle().setBgTransparency(0);
    b_menu.getPressedStyle().setBgPainter(new LinearGradientPainter(0xcf266a, 0xcf266a, false)); 
```

你遇到过并解决过这个问题吗？

问候

吉里

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T22:35:43.357

哦，答案是我还要改变未选中的样式。这里的代码

```
 b_menu.getUnselectedStyle().setBorder(null);
    b_menu.getSelectedStyle().setBorder(null);
    b_menu.getPressedStyle().setBorder(null);

    b_menu.setIcon(ImageUtil.loadImage("/menu.png"));
    b_menu.setRolloverIcon(ImageUtil.loadImage("/menu.png"));
    b_menu.setPressedIcon(ImageUtil.loadImage("/menu.png"));

    b_menu.setName("menu");

    b_menu.getStyle().setBgTransparency(0);
    b_menu.getStyle().setBgPainter(new LinearGradientPainter(0xcf266a, 0xcf266a, false));

    b_menu.getSelectedStyle().setPadding(5, 5, 5, 5);
    b_menu.getSelectedStyle().setMargin(0, 0, 0, 0);
    b_menu.getSelectedStyle().setBgTransparency(0);
    b_menu.getSelectedStyle().setBgPainter(new LinearGradientPainter(0xcf266a, 0xcf266a, false));

    b_menu.getUnselectedStyle().setPadding(5, 5, 5, 5);
    b_menu.getUnselectedStyle().setMargin(0, 0, 0, 0);
    b_menu.getUnselectedStyle().setBgTransparency(0);
    b_menu.getUnselectedStyle().setBgPainter(new LinearGradientPainter(0xcf266a, 0xcf266a, false));

    b_menu.getPressedStyle().setBgTransparency(0);
    b_menu.getPressedStyle().setBgPainter(new LinearGradientPainter(0xcf266a, 0xcf266a, false));

    b_menu.addActionListener(this);
    b_menu.repaint(); 
```

感谢您查看此问题！

问候

吉里

# postgresql - 无法访问 postgres 文件 pg_hba.conf

> ID：13665038
> 
> 赞同：9
> 
> 时间：2012-12-01T23:57:24.397
> 
> 标签：postgresql, ubuntu

运行 db:create 时出现此错误：

```
FATAL:  Peer authentication failed for user "wandrr"
/home/jack/.rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/connection_adapters/postgresql_adapter.rb:1208:in `initialize'
/home/jack/.rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/connection_adapters/postgresql_adapter.rb:1208:in `new'
/home/jack/.rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/connection_adapters/postgresql_adapter.rb:1208:in `connect'
/home/jack/.rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/connection_adapters/postgresql_adapter.rb:326:in `initialize'
/home/jack/.rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/connection_adapters/postgresql_adapter.rb:28:in `new'
/home/jack/.rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/connection_adapters/postgresql_adapter.rb:28:in `postgresql_connection'
/home/jack/.rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_pool.rb:315:in `new_connection'
/home/jack/.rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_pool.rb:325:in `checkout_new_connection'
/home/jack/.rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_pool.rb:247:in `block (2 levels) in checkout'
/home/jack/.rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_pool.rb:242:in `loop'
/home/jack/.rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_pool.rb:242:in `block in checkout'
/home/jack/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/home/jack/.rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_pool.rb:239:in `checkout'
/home/jack/.rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_pool.rb:102:in `block in connection'
/home/jack/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/home/jack/.rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_pool.rb:101:in `connection'
/home/jack/.rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_pool.rb:410:in `retrieve_connection'
....Edit out 40 more of these warnings...
/home/jack/.rvm/gems/ruby-1.9.3-p327/bin/ruby_noexec_wrapper:14:in `eval'
/home/jack/.rvm/gems/ruby-1.9.3-p327/bin/ruby_noexec_wrapper:14:in `<main>'
Couldn't create database for {"adapter"=>"postgresql", "encoding"=>"unicode", "database"=>"wandrr_test", "pool"=>5, "username"=>"wandrr", "password"=>nil} 
```

所以我发现我必须编辑 pg_hba.conf 问题是......它不会打开。它一直告诉我我没有使用此文件的权限。那么如何获得许可呢？我正在运行 ubuntu 12.10 和 rails 1.9.3 和 postgres 9.1

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-02T08:26:17.393

首先记下`pg_hba.conf`系统上的位置。如果您不知道但可以连接，请使用 PgAdmin-III 连接到 Pg 或`psql`运行：

```
SHOW hba_file; 
```

获取 的位置`pg_hba.conf`。它的位置非常标准；在 Ubuntu 上，它会在`/etc/postgresql/[major.minor]/main/pg_hba.conf`例如`/etc/postgresql/9.1/main/pg_hba.conf`. 在大多数其他发行版上，它将位于`/var/lib/pgsql/`or下`/var/lib/postgresql`，直接或在版本化目录中。

要编辑此文件，您必须先指定完整路径或将目录更改为其位置。说：

```
sudo vi /etc/postgresql/9.1/main/pg_hba.conf 
```

如果您喜欢更友好的文本编辑器：

```
sudo nano /etc/postgresql/9.1/main/pg_hba.conf 
```

或将“nano”替换为您喜欢的编辑器，例如`gedit`.

保存更改后，请记住重新加载 PostgreSQL 服务以使它们生效。在 Ubuntu 上你想要：

```
pg_ctlcluster 9.1 main reload 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-18T14:21:24.550

遵循 Crag 的建议效果很好。

对于他的最后一步，您必须 sudo 进入数据库超级用户才能重新加载 PostgreSQL 服务：

```
sudo -u postres pg_ctlcluster 9.1 main reload 
```

这些步骤也适用于 Debian Sid 系统。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-12-16T06:16:55.390

要编辑`pg_hba.conf`，您可以尝试以`postgres`用户身份进行编辑：

*   切换到`postgres`用户

    `sudo su postgres`

*   跑`psql`

*   `SHOW hba_file;`作为 psql 中的查询以获取位置
*   `nano *the file location*`（*不会* `sudo nano`以root用户身份尝试编辑操作）

# java - 从在其他计算机上运行的 jar 文件创建 exe

> ID：13665041
> 
> 赞同：3
> 
> 时间：2012-12-01T23:57:59.377
> 
> 标签：java, installation, java-web-start, launch4j, jsmooth

我有一个简单的应用程序，由 3 个类组成，它们是*PercentIdentity.java*、*GUI.java*和*Aligner.java*

我正在使用**Intellij Idea 11.1.3**（我也使用 Eclipse 尝试过）和 JRE 1.7。我的操作系统是 Win 7 x64。

当我双击使用 Intellij 创建的 jar 文件时，我的程序运行良好。此外，当我执行命令“java -jar *.jar”时它可以工作，其中 * 是我的 jar 文件的名称。

现在我想创建一个 .exe 文件，这样我就可以在其他计算机上运行该程序。

我用 Winrar 打开了 .jar 文件，我可以在 META-INF 文件夹中看到清单文件 (MANIFEST.MF)。

### 我的清单文件：

```
Manifest-Version: 1.0
Main-Class: com.example.PercentIdentity (with an empty line in the end) 
```

在**Launch4j**、**JSmooth**和**IExpress**上花费了大量时间后，我设法创建了可以在我的计算机上完美运行的 .exe 文件。但是，当我在另一台计算机上运行 .exe 文件时（再次使用 Win 7 x64），它会给出错误：

“Java 虚拟机启动器：找不到主类：com.example.PercentIdentity。程序将退出。”

## 我的 JSmooth 设置如下：

骨架选择：Window Wrapper

可执行文件：test.exe

当前目录： 。（不知道放什么）

主类：com.example.PercentIdentity

嵌入式 jar：*.jar

类路径：*.jar（同上）

最低 JVM 版本：1.0 最高 JVM 版本：1.7

## 我在 Launch4j 中使用的设置：

输出文件：C:\Users\{name}\Desktop\test.exe

罐子：*.jar

（我没有选中“不要包装罐子”复选框）

清单：（空）

最低 JRE 版本：1.0

我在另一个类似问题中阅读了一个答案，该问题可能是由于 JRE 1.7 而出现的，所以我也尝试了 1.6。但是，这一次它甚至没有在我自己的计算机上运行。

任何人都知道我该如何克服这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T00:16:58.617

In Jsmooth , is classpath for the .jar? Don't say it matters and can be left blank for the jar (implicit location), current directory maybe left blank better than a dot, if anything probably .\ (with a backslash for windows - means current directory).

for main class you can probably just say "PercentIdentity" as the classpath and paths get searched so if there is only one there in the .jar it will be chosen.

about implying where the jar is it is probably given a blank notation or in some configuration documents it is given the notation . , dot is usually used for web sever purposes unless it is part of . in windows or ./ in unix meaning "this directory its in".

If you wish to learn a small quantity of C/C++ you can get away with a short one liner using execv() function and an array or execlp() function and a list, However you will need to learn a large quantity of C/C++ to use the **args pointer array to pass command line parameters.

# android - 无法在 Android 相机预览中使用缩放控件

> ID：13665045
> 
> 赞同：1
> 
> 时间：2012-12-01T23:58:21.560
> 
> 标签：android, android-camera, preview, zooming

我是android编程的新手。我正在开发一个名为 magnifier 的简单应用程序，它将使用相机镜头放大和缩小预览。但是我被我的代码困住了，因为放大和缩小不起作用。下面是我的预览课，当我在手机上运行应用程序时，没有错误，但放大和缩小不起作用。有人可以帮我解决这个错误吗

```
class Preview extends SurfaceView implements SurfaceHolder.Callback {    
private static final String TAG = "Preview";

SurfaceHolder mHolder;
public Camera camera;
int currentZoomLevel = 0;
int maxZoomLevel = 0;
int MAX_ZOOM = 4;
Button buttonzoomin;
Button buttonzoomout;

Preview(Context context) {
    super(context);

    // Install a SurfaceHolder.Callback so we get notified when the
    // underlying surface is created and destroyed.
    mHolder = getHolder();
    mHolder.addCallback(this);
    mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
}

public void surfaceCreated(SurfaceHolder holder) {
    // The Surface has been created, acquire the camera and tell it where
    // to draw.
    camera = Camera.open();

    try {
        camera.setPreviewDisplay(holder);

        camera.setPreviewCallback(new PreviewCallback() {

            public void onPreviewFrame(byte[] data, Camera arg1) {
                FileOutputStream outStream = null;
                try {
                    outStream = new FileOutputStream(String.format(
                            "/sdcard/%d.jpg", System.currentTimeMillis()));
                    outStream.write(data);
                    outStream.close();
                    Log.d(TAG, "onPreviewFrame - wrote bytes: "
                            + data.length);
                } catch (FileNotFoundException e) {
                    e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();
                } finally {
                }
                Preview.this.invalidate();
            }
        });
    } catch (IOException e) {
        e.printStackTrace();
    }
}

public void surfaceDestroyed(SurfaceHolder holder) {
    // Surface will be destroyed when we return, so stop the preview.
    // Because the CameraDevice object is not a shared resource, it's very
    // important to release it when the activity is paused.
    //camera.setPreviewCallback(null);
    camera.stopPreview();
    camera.release();
    camera = null;
}

public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {
    // Now that the size is known, set up the camera parameters and begin
    // the preview.

    final Camera.Parameters parameters = camera.getParameters();
    List<Camera.Size> previewSizes = parameters.getSupportedPreviewSizes();
    buttonzoomin = (Button) findViewById(R.id.buttonzoomin);
    buttonzoomout = (Button) findViewById(R.id.buttonzoomout);

    // You need to choose the most appropriate previewSize for your app
    Camera.Size previewSize = previewSizes.get(0);

   Display display = ((WindowManager) getContext().getSystemService(Context.WINDOW_SERVICE)).getDefaultDisplay();

    if(display.getRotation() == Surface.ROTATION_0)
    {
        parameters.setPreviewSize(previewSize.height, previewSize.width);                           
        camera.setDisplayOrientation(90);
    }

    if(display.getRotation() == Surface.ROTATION_90)
    {
        parameters.setPreviewSize(previewSize.width, previewSize.height);                           
    }

    if(display.getRotation() == Surface.ROTATION_180)
    {
        parameters.setPreviewSize(previewSize.height, previewSize.width);               
    }

    if(display.getRotation() == Surface.ROTATION_270)
    {
        parameters.setPreviewSize(previewSize.width, previewSize.height);
        camera.setDisplayOrientation(180);
    }

    if(parameters.isSmoothZoomSupported()){    
        buttonzoomin.setEnabled(true);
        buttonzoomout.setEnabled(true);
        maxZoomLevel = parameters.getMaxZoom();
            buttonzoomin.setOnClickListener(new OnClickListener(){
                public void onClick(View v){
                        currentZoomLevel=currentZoomLevel + 1;
                        if(currentZoomLevel > maxZoomLevel)
                        {
                            currentZoomLevel = maxZoomLevel;;
                        }
                        //camera.startSmoothZoom(currentZoomLevel);
                        parameters.setZoom(currentZoomLevel);
                        camera.stopPreview();
                        camera.startPreview();
                        camera.setParameters(parameters);

                }
            });

        buttonzoomout.setOnClickListener(new OnClickListener(){
                public void onClick(View v){
                        currentZoomLevel = currentZoomLevel-1;
                        if(currentZoomLevel < 0)
                        {
                            currentZoomLevel = 0;
                        }
                        //camera.startSmoothZoom(currentZoomLevel);
                        parameters.setZoom(currentZoomLevel);
                        camera.stopPreview();
                        camera.startPreview();
                        camera.setParameters(parameters);
                }
            });    
       }
     camera.setParameters(parameters);
     camera.startPreview(); }   
@Override
public void draw(Canvas canvas) 
{
    super.draw(canvas);
    Paint p = new Paint(Color.RED);
    Log.d(TAG, "draw");
    canvas.drawText("PREVIEW", canvas.getWidth() / 2,
            canvas.getHeight() / 2, p);
} } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T21:52:17.870

尽量不要使用平滑缩放。很多设备不一定支持平滑缩放，目前你没有备份不支持平滑缩放的案例——例如，你的放大按钮永远不会启用！

# html - 垂直和水平边界线

> ID：13665060
> 
> 赞同：0
> 
> 时间：2012-12-02T00:00:48.103
> 
> 标签：html, css

处理`td`标签边框的最佳方法是什么？

# jsfiddle

[http://jsfiddle.net/smxGH/](http://jsfiddle.net/smxGH/)

# 代码

```
<table>
    <tr>
        <td>wee</td>
        <td>wee</td>
        <td>wee</td>
    </tr>
    <tr>
        <td>wee</td>
        <td>wee</td>
        <td>wee</td>
    </tr>
</table>

table {
    margin:10px;
    border:0;
    border-spacing:0 0;
    border-collapse:separate;
}

td {
    border-top:1px solid white;
    border-bottom:1px solid black;
    border-right:1px solid #aaaaaa;
    border-left:1px solid #aaaaaa;
    padding:4px;
    background:#dddddd;
}

tr:hover > td {
    background:#cccccc;
} 
```

我需要将顶部和底部边框放置在左右边框上。现在每个单元格中的垂直边框重叠 1px .. 是否可以使用 CSS 解决，或者您是否需要`div`每个`td`标签内的标签等？

此外，垂直边框需要折叠（1px 边框），这与分离的顶部和底部不同

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T00:14:48.477

我修改了你的`td`CSS 规则，并添加了一些例外。我希望我正确地理解了你。这是你想要完成的吗？

```
td {
    border-top:1px solid white;
    border-bottom:1px solid black;
    padding:4px;
    background:#dddddd;
    border-right: 1px solid #aaaaaa;
}

td:last-child {
    border-right:1px solid #aaaaaa;
}

td:first-child {
    border-left:1px solid #aaaaaa;
} 
```

我发现做与上面相同的事情的另一种方法可能是：

```
table {
    margin:10px;
    border:0;
    border-collapse:separate;
    /* vvv changes here vvv */
    border-spacing:1px 0;
    background-color: #aaaaaa;
}

td {
    border-top:1px solid white;
    border-bottom:1px solid black;
    padding:4px;
    background:#dddddd;
} 
```

# javascript - 在客户端保护数据的技术

> ID：13665063
> 
> 赞同：0
> 
> 时间：2012-12-02T00:01:43.067
> 
> 标签：javascript, html, ruby-on-rails, security

我正在构建一个需要一些适度繁重处理的 Ruby on Rails 应用程序。为了扩展应用程序，我正在尝试卸载浏览器上的处理。这是一个用户必须回答问题的游戏。当需要验证答案时，就会出现中等繁重的处理。为了验证答案是否正确，客户端需要存储答案，或者至少能够从服务器请求它，但在某些情况下，客户端 javascript 需要将用户的答案与正确答案进行比较。为了防止作弊，我需要在客户端确保正确答案吗？

**我尝试过的事情**

1.  我尝试散列答案数据并将其嵌入 HTML，但不幸的是，我需要访问未散列的答案数据，因为它的值在处理过程中使用。
2.  我尝试使用 AJAX 从服务器请求答案数据，但我可以使用许多工具来检查 JSON 响应并查看返回的答案数据。

**认为我没有尝试过**

1.  如果我使用 SSL 加密并在需要时请求答案数据会怎样？这不会阻止用户查看自加密后返回的 JSON 数据吗？抱歉，如果我对此完全不了解，我是 Web 开发的新手，仍在学习。

是否有任何其他技术可以使用我正在使用的技术在客户端保护数据？或者任何至少使用户尽可能难以查看答案数据的技术？

非常感谢您的智慧！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T00:15:15.857

It's impossible. If you need the unprocessed answer data to process the input, this data has to be on the client's machine, which means it's exposed.

Let me explain that in some pseudo-code:

```
func isValid(myAnswer, superSecureData)
    if decode(superSecureData) == myAnswer
        return true

    return false 
```

An attacker would only have to do :

```
print decode(superSecureData) 
```

Or, better even:

```
return true 
```

Of course, this would be more secure :

```
func isValid(myAnswer, superSecureData)
    if encode(myAnswer) == superSecureData
        return true

    return false 
```

But, as you said, you can't hash the answer, and as I already mentioned, an attacker could still force a function to simply `return true` (which is why you should do server-side checks on all supposedly valid answers).

# ruby-on-rails-3 - 在rails中传递params...理解params的突破

> ID：13665071
> 
> 赞同：0
> 
> 时间：2012-12-02T00:02:50.337
> 
> 标签：ruby-on-rails-3, params

我有一个简单的 has_many belongs_to 关系，我想为 belongs_to 模型的视图包含父对象，我已经取得了一些成功，但我希望它能够更好地工作。

```
class Submission < ActiveRecord::Base
  belongs_to :user
  belongs_to :contest
end
class Contest < ActiveRecord::Base
  belongs_to :user
  has_many :submissions, :dependent => :destroy
end 
```

在可行的情况下，我通过将竞赛 ID 放在 url 中将其传递给提交：

```
 <%= link_to 'Submit Contest Entry', new_submission_path(:contest_id => @contest.id), 
                            :class => 'btn btn-primary btn-large mleft10' %> 
```

因此，结合 hidden_​​field：

```
 <%= f.hidden_field :contest_id %> 
```

以及控制器中的 find_contest 方法（使用 before_filter 调用）：

```
def find_contest
  #the next line is giving the error (line 76)
  @contest = Contest.find(params[:submission][:contest_id])
end 
```

使其适用于提交/新建，但是如何将查找添加到仅适用于不止一个页面的控制器中，就像我想在显示和索引中访问一样。现在，我收到一个错误：

```
Started GET "/submissions?contest_id=5" for 127.0.0.1 at 2012-12-01 16:01:45 -0800
Processing by SubmissionsController#index as HTML
  Parameters: {"contest_id"=>"5"}
  User Load (0.3ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 2 ORDER BY users.created_at DESC LIMIT 1
Completed 500 Internal Server Error in 37ms

NoMethodError (undefined method `[]' for nil:NilClass):
  app/controllers/submissions_controller.rb:76:in `find_contest' 
```

[编辑]为提交添加显示操作：

```
before_filter :find_contest, :except => [:index, :show, :edit, :update, :destroy]

def find_contest
  @contest = Contest.find(params[:submission][:contest_id])
end

def show
  contest_id = @submission.contest_id
  @submission = @commentable = Submission.find(params[:id])
  @comments = @commentable.comments.order(:created_at).reverse
  respond_to do |format|
    format.html  # show.html.erb
    format.json  { render :json => @submission }
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T20:20:39.870

您正在访问控制器**SubmissionsController的操作****索引**；我假设在动作**索引**中您正在调用方法**find_contest**。该错误是因为在方法**find_contest**内部您试图获取**params[:submission][:contest_id]**的值，但这样的参数不存在；你得到的参数是**params[:contest_id]**。

 ******为了通过许多操作管理相同的方法，您可以做的是更改方法并传递参数，如下所示：

```
def find_contest(contest_id)
  @contest = Contest.find(contest_id)
end

def index
  find_contest(params[:contest_id])
  #some other code...
end 
```

但是，如果您使用的是**before_filter**之类的东西，您可以检查**find_contest**方法内部是否存在**params[:contest_id].nil?** 如果不是 nil 使用它，否则使用**params[:submission][:contest_id]**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T22:51:44.940

这是这个问题的答案，但我对 index 和 show 都使用了两行，可能可以重构为一个（编辑说明：Pablo89 建议重构 show，包括在内，但 index 仍然是两行）

然而，这两行在这两种情况下都非常重要，尤其是对于初学者来说，原因如下：

为了将 parent_id (contest_id) 传递到关联视图（显示提交），我使用 params 中的 submit_id 定义了 @submission (@associated)（commentable 用于其他目的，可以忽略）。

```
@submission = @commentable = Submission.find(params[:id]) 
```

参数可以在网站地址中找到，在这种情况下：

```
http://localhost:3000/submissions/41 
```

41 是submission_id。这很明显。

Rails 使用在浏览器窗口中找到的页面地址来分配实例值。在此之前，我不知道 Rails 在哪里找到参数，因为 Rails 会自动完成很多事情。params 是网页地址。哦！

然后我使用@submission 的比赛ID 键分配了比赛ID，这是belongs_to 关联的一部分，并使用find 到达@contest

```
contest_id = @submission.contest_id
@contest = Contest.find(contest_id) 
```

正如 Pablo89 指出的那样，由于 rails 的关联能力，有两条线可以简化为一条：

```
@contest = @submission.contest 
```

在索引中，没有@submission，所以我通过link_to那个页面将contest_id传递给这个页面，在两个地方找到contests/show和submissions/show：

```
<%= link_to 'Browse All Submissions', submissions_path(:contest_id => @contest.id), :class => 'btn btn-mini pull-right' %> 
```

单击链接将带您进入提交/索引并在此地址中找到结果：

```
http://localhost:3000/submissions?contest_id=4 
```

(:contest_id => @contest.id) 将 ?contest_id=4 添加到地址中，以便我可以通过“params”从提交控制器访问它

对于像我这样的初学者来说，这是建立对参数的理解的重要方法，因为页面的地址是 Rails 从 @submission 或 @contest 分配其实例变量的地方。

嵌套路由如下所示：

比赛/5/submssions/41

如果您使用的是嵌套路由，那么比赛和提交值就在地址中，就在那里，等待使用！该地址也称为“参数”，（我重复它以了解像我这样头骨很厚的其他学习者），但如果您不使用嵌套路由，则必须以另一种方式传递父 ID，例如添加它到上面例子中的link_to。

从那里访问 ?contest_id=4 我将以下内容放入提交的索引操作中：

```
contest_id = params[:contest_id]
@contest = Contest.find(contest_id) 
```

这对我来说是一个突破，因为到目前为止，我从来不知道 params 是什么或它是如何工作的，只是它起作用了。

通过理解这个基本概念，大多数有经验的开发人员都非常了解他们不想提及的内容，我对控制器了解得更多。

我在这里转达的所有内容可能正确也可能不正确，但我希望这对其他初学者有所帮助。我现在对自己解决问题的能力更有信心。在此之前，我对 params 所做的大部分工作都是尝试不同的方式，直到它在没有任何基本了解的情况下工作。它现在让我发笑，因为它真的很简单。我认为 params 这个词有点可怕，因为它可以指代任何地方的任何参数。

现在我知道了，这是 Rails 用来分配这些值的网址参数。哇！多么大的突破……******

# arrays - 构造第二个数组算法

> ID：13665072
> 
> 赞同：1
> 
> 时间：2012-12-02T00:02:50.727
> 
> 标签：arrays, algorithm

给定一个大小为 n 的数组 x，构造一个大小为 n 的数组 y，其中`yi = sum(a) - xi.`

如何在 O(n) 中使用常量空间而不使用减法运算符来完成此操作？我想不通这个。不能使用按位运算来模拟减法。我知道这里的关键是通过使用一些数据结构来增加额外的常量空间，但是如何通过 O(n) 限制来完成呢？制作一个包含所有组合总和的数组，除了`xi`需要 O(n^2)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T00:55:10.523

所以，我们有数组 x，我们必须创建数组 y。假设我们的数组 x 的大小为 5（仅作为示例）。所以让我们写出 y' 数组的每个元素的值。

```
y[0] =      + x[1] + x[2] + x[3] + x[4];
y[1] = x[0] +      + x[2] + x[3] + x[4];
y[2] = x[0] + x[1] +      + x[3] + x[4];
y[3] = x[0] + x[1] + x[2]        + x[4];
y[4] = x[0] + x[1] + x[2] + x[3]       ; 
```

你看到这条对角线了吗？它将 y 分为左部分和右部分，其中 yLeft 的每个下一个元素是前一个 yLeft 元素和 x 数组的某个元素的总和。y 右侧部分的情况相同（只是颠倒了）

代码，C#：

```
var x = new int[] { 4, 6, 2, 4, -2, 4, 0 };
var y = new int[x.Length];

y[0] = 0;
y[y.Length - 1] = 0;

var curYLeft = 0;
for ( int i = 1; i < x.Length; i++ ) {
    curYLeft += x[i - 1];
    y[i] = curYLeft;
}

var curYRight = 0;
for ( int i = x.Length - 1 - 1; i >= 0; i-- ) {
    curYRight += x[i + 1];
    y[i] += curYRight;
}

for ( int i = 0; i < x.Length; i++ ) {
    Console.WriteLine("{0} {1}", x.Sum() - x[i], y[i]);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T03:13:26.903

禁止减法？
不要放弃！要机敏！:-)

```
a-b = log(exp(a)/exp(b))
a-b = a+b*cos(pi)
a-b = sqrt(2*(a^2+b^2))*cos(atan(1)+atan2(b,a)) 
```

# java - 在Java中计算一个ArrayList中有多少个ArrayList

> ID：13665073
> 
> 赞同：0
> 
> 时间：2012-12-02T00:03:08.980
> 
> 标签：java, arraylist

有没有办法找出一个 ArrayList 拥有多少个列表？

`ArrayList<ArrayList<Integer>> myList = new ArrayList<ArrayList<Integer>>();` `List<Integer> myOtherList = new LinkedList<Integer>();`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T00:04:49.907

与任何列表一样，您可以通过 找出其中包含的对象数量[`List#size()`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#size%28%29)。

```
int size = myList.size(); // amount of sublists that myList holds 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T00:12:30.280

@Vulcan 的回复将为您提供列表的大小。如果您只想要列表中包含的 ArrayList，则需要使用 instanceof 检查元素类型并以这种方式增加计数：

```
int listcount = 0;
for (Object e : list) {
   if (e instanceof ArrayList) listcount++;
} 
```

# c++ - 使用 Valgrind 调试释放后使用

> ID：13665076
> 
> 赞同：3
> 
> 时间：2012-12-02T00:04:03.877
> 
> 标签：c++, debugging, valgrind

我正在尝试使用 Valgrind 在我的代码中出现免费错误后调试使用。

我的代码在尝试访问以前删除的对象时崩溃。在这种情况下，有什么方法可以查看谁使用 Valgrind 删除了对象？

我使用以下选项运行 Valgrind，但它只捕获崩溃，并显示它发生的位置。我希望获得有关对象被释放位置的详细信息：

> valgrind --tool=memcheck

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-02T01:06:00.623

这就是我在这些情况下使用的：

```
valgrind --track-origins=yes 
```

在释放后使用的情况下，它将显示释放内存/删除对象的函数的堆栈跟踪。

请阅读 Valgrind 的手册页以了解警告，特别是有关性能的警告。如果您的问题是并发问题，较慢的 Valgrind 可能会改变程序的计时属性，并可能改变（减少或增加）遇到 bug 的概率。

```
--track-origins=<yes|no> [default: no]
    Controls whether Memcheck tracks the origin of uninitialised
    values. By default, it does not, which means that although it can
    tell you that an uninitialised value is being used in a dangerous
    way, it cannot tell you where the uninitialised value came from.
    This often makes it difficult to track down the root problem.

    When set to yes, Memcheck keeps track of the origins of all
    uninitialised values. Then, when an uninitialised value error is
    reported, Memcheck will try to show the origin of the value. An
    origin can be one of the following four places: a heap block, a
    stack allocation, a client request, or miscellaneous other sources
    (eg, a call to brk).

    For uninitialised values originating from a heap block, Memcheck
    shows where the block was allocated. For uninitialised values
    originating from a stack allocation, Memcheck can tell you which
    function allocated the value, but no more than that -- typically it
    shows you the source location of the opening brace of the function.
    So you should carefully check that all of the function's local
    variables are initialised properly.

    Performance overhead: origin tracking is expensive. It halves
    Memcheck's speed and increases memory use by a minimum of 100MB,
    and possibly more. Nevertheless it can drastically reduce the
    effort required to identify the root cause of uninitialised value
    errors, and so is often a programmer productivity win, despite
    running more slowly.

    Accuracy: Memcheck tracks origins quite accurately. To avoid very
    large space and time overheads, some approximations are made. It is
    possible, although unlikely, that Memcheck will report an incorrect
    origin, or not be able to identify any origin.

    Note that the combination --track-origins=yes and
    --undef-value-errors=no is nonsensical. Memcheck checks for and
    rejects this combination at startup. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T00:21:56.630

Valgrind 已经向您展示了它的最大能力。你需要用更多的调试信息来编译你的代码——然后 valgrind 将能够向你显示更多的信息，例如文件、函数和行。

使用选项编译代码`-g`并使用 valgrind 重新运行。在某些编译器上，还有 -gN`N`调试级别。但在大多数情况下，`-g`就足够了。

# r - 难以从 rstudio 中的 shapefile 绘制图层

> ID：13665078
> 
> 赞同：4
> 
> 时间：2012-12-02T00:04:08.077
> 
> 标签：r, gis, shapefile

我正在尝试从一个简单的 shapefile 加载和绘制图层。这是美国的州界。我可以很好地加载它：

```
> library("sp","rgdal")

> shape = readOGR("/home/username/data/share/mapnik/world_boundaries/states_EPSG4326.shp", layer="states_EPSG4326")

    OGR data source with driver: ESRI Shapefile 
    Source: "/home/username/data/share/mapnik/world_boundaries/states_EPSG4326.shp", layer:       "states_EPSG4326"
    with 2895 features and 9 fields
    Feature type: wkbPolygon with 2 dimensions 
```

但它无法绘制：

```
> plot(shape)

There were 50 or more warnings (use warnings() to see the first 50)
There were 50 or more warnings (use warnings() to see the first 50)
> warnings()
Warning messages:
1: Path drawing not available for this device
2: Path drawing not available for this device
3: Path drawing not available for this device
... 
```

我错过了什么？绘图窗口中没有显示任何内容。此 shapefile 中只有单层。我可以在 qgis 中绘制它，我正在尝试寻找替代方案。R 似乎是一个受欢迎的选择，但到目前为止我运气不佳。我用谷歌搜索了这个警告，但没有发现任何有用的东西。

**编辑：** 我尝试过的每个形状文件都会收到相同的响应。这是我已验证的 shapefile 以相同的方式响应：

[http://dds.cr.usgs.gov/pub/data/nationalatlas/statep010_nt00798.tar.gz](http://dds.cr.usgs.gov/pub/data/nationalatlas/statep010_nt00798.tar.gz)

这是 sessionInfo() 的输出：

```
> sessionInfo()
R version 2.15.2 (2012-10-26)
Platform: x86_64-pc-linux-gnu (64-bit)

locale:
 [1] LC_CTYPE=en_US.UTF-8 LC_NUMERIC=C         LC_TIME=C           
 [4] LC_COLLATE=C         LC_MONETARY=C        LC_MESSAGES=C       
 [7] LC_PAPER=C           LC_NAME=C            LC_ADDRESS=C        
[10] LC_TELEPHONE=C       LC_MEASUREMENT=C     LC_IDENTIFICATION=C 

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] rgdal_0.7-22 sp_1.0-2    

loaded via a namespace (and not attached):
[1] grid_2.15.2     lattice_0.20-10 tools_2.15.2 
```

这也是一个 gentoo 系统，在 dev-lang/R 上启用了以下使用标志：

*   X icu java jpeg nls openmp png readline tiff

未启用以下使用标志（未编译功能）：

*   -bash-completion -cairo -doc -lapack -minimal -perl -profile -static-libs -tk"

对我来说唯一看起来可疑的两个是 cairo 和 tk，是否需要它们来进行绘图？

我以类似但不完全相同的结果从终端运行 R：

```
> shape = readOGR("/home/username/Downloads/state/statep010.shp", layer="statep010")
OGR data source with driver: ESRI Shapefile 
Source: "/home/username/Downloads/state/statep010.shp", layer: "statep010"
with 62 features and 9 fields
Feature type: wkbPolygon with 2 dimensions
> plot(shape)
There were 50 or more warnings (use warnings() to see the first 50)
> warnings()
Warning messages:
1: In polypath(x = mcrds[, 1], y = mcrds[, 2], border = border,  ... :
  Path drawing not available for this device
2: In polypath(x = mcrds[, 1], y = mcrds[, 2], border = border,  ... :
  Path drawing not available for this device
3: In polypath(x = mcrds[, 1], y = mcrds[, 2], border = border,  ... :
  Path drawing not available for this device
... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T05:30:01.953

按照Roger Bivand`plot(shape, usePolypath = FALSE)`在[此线程](http://r-sig-geo.2731867.n2.nabble.com/New-use-of-polypath-in-package-sp-causing-a-problem-td7580716.html)中的描述使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T15:24:13.490

如果您只对绘制行政边界感兴趣，您不能只使用某些 R 包提供的数据源吗？

`maps`提供全球行政区域。您也可以检索国家/地区边界。[请参阅此处](http://docs.ggplot2.org/current/coord_map.html)与 ggplot 一起使用的示例。

`dismo`提供来自[GADM 数据库](http://www.gadm.org/)的数据。您可以按国家和级别检索数据。

```
library(maps)
library(raster)

admlim <-getData('GADM', country='USA', level=1)
proj4string(admlim) <- CRS('+init=epsg:4326')
# plot(admlim) # plain plot
# dataframe for ggplot()
# This will take a long, long time for USA level 1 data from GADM
t.adm <- fortify(admlim)
ggplot(aes(long, lat, group = group), data = t.adm,
  colour = 'grey20', fill = NA) +
  geom_path() +
  scale_y_continuous(breaks=(-2:2) * 30) +
  scale_x_continuous(breaks=(-4:4) * 45) +
  coord_map('ortho', orientation=c(41, -74, 0)) 
```

![以纽约为中心的美国地图](../Images/faad5769fb703bad35624a1611123011.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-16T15:23:10.877

我有同样的问题，可以通过在安装 libcairo2-dev 和 libpango1.0-dev 后再次编译 R 来解决

在 debian 上：

```
sudo apt install libcairo2-dev
sudo apt install libpango1.0-dev 
```

我确信之前特别缺少 libpango1.0-dev。然后我用

```
./configure --prefix=/.../.../R --with-cairo
make && make install 
```

并修复了它。

希望能帮助到你。

# iphone - Coreplot 1.1 vs 1.0，轴标签显示不正确，更新速度很慢

> ID：13665079
> 
> 赞同：1
> 
> 时间：2012-12-02T00:04:23.037
> 
> 标签：iphone, cocoa-touch, core-plot

我刚刚更新到 1.1 版，马上注意到我的轴标签一开始没有正确显示，或者没有正确更新。

在 1.0 中，它们会正确加载（当视图首次显示时），并且我会每秒钟更新一次范围 (CPTPlotRange) 和数据 (-reloadData)，并且每次都正确更新轴和数据。但是，现在使用 1.1，数据和轴刻度线正在正确更新，但轴标签滞后。有时我会看到新的轴标签从左下角开始，超过 3 秒迁移到正确位置。如果标签已经存在，它将落后于轴刻度线 1 秒或更长时间。

我没有更改任何代码，只删除了旧的 1.0 文件并将它们替换为 1.1 文件。以下是与其中一个图相关的所有代码。

```
- (void) prepareGraphs {
    //Prepare beat graph
    //beatGraph defined as CPTXYGraph
    //beatGraphView defined as CPTGraphHostingView in both class and storyboard
    beatGraph = [[CPTXYGraph alloc] initWithFrame:self.beatGraphView.frame];

    self.beatGraphView.collapsesLayers = NO;
    self.beatGraphView.hostedGraph = beatGraph;

    beatGraph.paddingLeft = 0.0;
    beatGraph.paddingTop = 0.0;
    beatGraph.paddingRight = 0.0;
    beatGraph.paddingBottom = 0.0;

    CPTPlotAreaFrame *beatPlotAreaframe = (CPTPlotAreaFrame *)beatGraph.plotAreaFrame;
    beatPlotAreaframe.paddingLeft = 30;
    beatPlotAreaframe.paddingRight = 5;

    CPTXYPlotSpace *beatPlotSpace = (CPTXYPlotSpace *)beatGraph.defaultPlotSpace;
    beatPlotSpace.xRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(0) 
                        length:CPTDecimalFromFloat(31)];
    beatPlotSpace.yRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(75)
                        length:CPTDecimalFromFloat(20)];

    CPTXYAxisSet *beatPlotAxisSet = (CPTXYAxisSet *)beatGraph.axisSet;
    beatPlotAxisSet.xAxis.hidden = TRUE;

    beatPlotAxisSet.yAxis.majorIntervalLength = [[NSDecimalNumber decimalNumberWithString:@"10"] decimalValue];
    beatPlotAxisSet.yAxis.minorTicksPerInterval = 4;
    beatPlotAxisSet.yAxis.majorTickLineStyle = lineStyleThick;
    beatPlotAxisSet.yAxis.minorTickLineStyle = lineStyleThin;
    beatPlotAxisSet.yAxis.axisLineStyle = lineStyleThick;
    beatPlotAxisSet.yAxis.minorTickLength = 4.0f;
    beatPlotAxisSet.yAxis.majorTickLength = 5.0f;
    beatPlotAxisSet.yAxis.labelOffset = 0.0f;
    beatPlotAxisSet.yAxis.labelFormatter = integerLabelFormat;

    //beat plot
    //beatPlot defined as CPTScatterPlot
    beatPlot = [[CPTScatterPlot alloc] init];
    beatPlot.identifier = @"Beat Plot";

    CPTMutableLineStyle *beatPlotLineStyle = [beatPlot.dataLineStyle mutableCopy];
    beatPlotLineStyle.lineWidth = 1.0f;
    beatPlotLineStyle.lineColor = [CPTColor redColor];
    beatPlot.dataLineStyle = beatPlotLineStyle;

    CPTPlotSymbol *beatPlotSymbol = [CPTPlotSymbol ellipsePlotSymbol];
    beatPlotSymbol.fill = [CPTFill fillWithColor:[CPTColor greenColor]];
    beatPlotSymbol.size = CGSizeMake(5.0, 5.0);
    beatPlot.plotSymbol = beatPlotSymbol;

    beatPlot.cachePrecision = CPTPlotCachePrecisionDouble;
    [beatGraph addPlot:beatPlot];
}

- (void)updateGraphs {
    //Get the cached arrays for the beat and spectrum plots
    [self.currentRecord getBeatArraysForSeconds:30 beats:&beatsForBeatPlot xArray:beatXArray yArray:beatYArray];

    //Set beat graph y-axis
    CPTXYPlotSpace *beatPlotSpace = (CPTXYPlotSpace *)beatGraph.defaultPlotSpace;
    double minbpm;
    double maxbpm;

    vDSP_maxvD(beatYArray, 1, &maxbpm, beatsForBeatPlot);
    vDSP_minvD(beatYArray, 1, &minbpm, beatsForBeatPlot);

    maxbpm*=1.01;
    minbpm*=0.99;

    beatPlotSpace.yRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromDouble(minbpm)
                    length:CPTDecimalFromDouble(maxbpm-minbpm)];

    //reloaddata
    [beatGraph reloadData];
} 
```

这是两个屏幕截图，都是在 viewDidAppear 之后，在绘制任何数据之前拍摄的。任何帮助将不胜感激。

![1.0版](../Images/3894dbca4980a850eeed430fd37911a3.png) ![1.1版](../Images/47c4f1f145a6c3da8c18728c2eb777de.png)

**附加信息**

在 Instruments 中运行 1.1 版本的代码时，我发现轴最终会自行纠正。在我的代码中运行的最后一件事是 viewDidLoad。在这个测试用例中，我从不调用 -reloadData（无论如何我都不会调用它），并且一旦加载视图就不会发生任何其他事情。但是，在 15 到 40 秒后（它会因运行而异），轴会自行修复，并且 Instruments 会显示一些额外的调用。大部分看起来像系统调用，但有一个调用 -[CPTAnnotationHostLayer sublayersExcludedFromAutomaticLayout] 和下面的 -[__NSPlaceholderSet initWithObjects:count:]。但是，这些都不在我的代码中，所以我似乎无法追踪它们是从哪里调用的，或者为什么这么晚，或者为什么随机。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T00:03:46.847

这听起来像一个核心情节错误。请在[Core Plot 问题跟踪器](http://code.google.com/p/core-plot/issues/list)上报告。

# jquery - SWFUpload 不发送 POST 参数

> ID：13665080
> 
> 赞同：0
> 
> 时间：2012-12-02T00:04:29.500
> 
> 标签：jquery, ajax, flash, upload, swfupload

我正在尝试将一些帖子参数动态添加到 swfupload。但是当脚本执行并上传文件时，POST 参数会丢失。任何信息我可能做错了什么？我的代码如下：

```
var swfu = new SWFUpload({  
upload_url : "http://something/location",
    flash_url : "http://an-absolute-url-to/swfupload.swf", 
file_post_name : "fileObject", 
http_success : [201, 202], 
assume_success_timeout : 0, 
file_types : "*.jpg;*.gif;*.png", 
file_types_description: "Web Image Files", 
file_size_limit : "1000 MB",
file_upload_limit : 10, 
file_queue_limit : 2, 
debug : true, 
prevent_swf_caching : false, 
button_placeholder_id : "button", 
button_width : 61, 
button_height : 22, 
button_text : "<b>Click</b> <span class=\"redText\">here</span>", 
button_text_style : ".redText { color: #FF0000; }", 
button_text_left_padding : 3, 
button_text_top_padding : 2, 
button_action : SWFUpload.BUTTON_ACTION.SELECT_FILES, 
button_disabled : false, 
button_cursor : SWFUpload.CURSOR.HAND, 
button_window_mode : SWFUpload.WINDOW_MODE.TRANSPARENT, 
file_queue_error_handler : function(e){window.alert("ERror@")}, 
upload_start_handler : function(e){
        $.ajax({url:"/auth",
data:"file=" + e.name,
    success: function(msg){
        $.swfu.addPostParam("param1",msg.p1);
        $.swfu.addPostParam("param2",msg.p2);
}
    });

}, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T04:50:16.760

我通过将 file_dialog_complete_handler 的事件处理程序添加到 SWFUpload 构造中，将我的连接到文件对话框完成中：

```
file_dialog_complete_handler : fileDialogComplete, 
```

然后我实现了javascript函数fileDialogComplete如下（我有2个表单字段，类别和注释并使用jquery获取它们）：

```
function fileDialogComplete(msg) {  
        swfu.addPostParam( "category", $('#category').val());
        swfu.addPostParam( "notes", $('#notes').val());
        swfu.startUpload();     
} 
```

Now, when the files are selected, it kicks off the fileDialogComplete method, which kicks off the upload. 然后在服务器端，你可以看到我的帖子变量：

```
Post[Filename]=Finland.png
Post[category]=2
Post[notes]=Here we go
Post[Upload]=Submit Query 
```

# php - 调用未定义的方法 PDO::setAttribute()

> ID：13665081
> 
> 赞同：2
> 
> 时间：2012-12-02T00:04:29.713
> 
> 标签：php, class, pdo, oop

```
class dbConnection {
public $pdo;
public function __construct() {
    $this->dbConnect();
}
public function dbConnect() {
    if((count($_POST) == 6)&&($_GET['a'] == "connect")) {
        $host = $_POST['host'];
        $port = $_POST['port'];
        $username = $_POST['username'];
        $password = $_POST['password'];
        $database = $_POST['database']; 
        try{
                $this->pdo = new PDO('mysql:host='.$host.';dbname='.$database.';port='.$port, $username, $password );
                echo 'Connection successful!';
                return $pdo;
        }
        catch(PDOException $e){
                echo 'Error: ' . $e->getMessage();
        }   
    }
}
}

class Group extends dbConnection { //Class for group, for ex. employe and employers.
public $name;  // Name of group
public $pdo;

public function __construct ($_name, $conn) {
$this->pdo = $conn;
$this->name = $_name;

}

public function getGroupList() {
    if(isset($this->pdo)) {
        try
        {
            $conn = $this->pdo;
          $conn ->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); //to catch exceptions

          $stmt = $pdo -> query('SELECT id, Name, Skills FROM '.$this->name); //sql query with group name
          $list = $stmt->fetchAll(PDO::FETCH_NUM); //fetch statement into array
          $stmt -> closeCursor();
          unset($stmt);
          return var_dump($list); //gives pure data
        }
        catch(PDOException $e) 
        {
          return 'There was some error: ' . $e->getMessage();
        }
    }
    else {
    $pdo;
    }
}

} 
```

和执行：

```
$conn = new dbConnection;
$workers = new Group("workers", $conn);
$workers->getGroupList(); 
```

我得到错误：

> 在线调用未定义的方法 dbConnection::setAttribute()：

`$conn ->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); //to catch exceptions`

我正在尝试解决这个问题，我不知道为什么 php 将 PDO 对象视为一种方法。我没有任何想法。我必须写更多的信。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T00:09:43.400

`$this->pdo`在该上下文中引用一个 dbConnection 对象。确实，`$this->conn`为了清楚起见，您应该将名称更改为或类似的名称。

要修复它，请尝试：

```
$this->pdo->pdo->setAttribute(); 
```

或者具体来说，在您的代码上下文中：

```
$conn->pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); 
```

但是，您似乎也错误地使用了继承。

与其将连接传递给 Group 类，不如调用父构造函数以使其正确初始化，并根据其定义设置 pdo 的值。

尝试这个：

```
class Group extends dbConnection { //Class for group, for ex. employe and employers.
    public $name;  // Name of group

    public function __construct ($_name) {
        $this->name = $_name;
        parent::__construct();
    } 
```

从那里，您可以参考`$this->pdo`dbConnection 中定义的内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T00:09:56.217

发生的事情是您传入了 DB 包装类，然后尝试将该类用作实际的 PDO 对象。当然，这是无效的。它是一个包装器——你想要它包含的 PDO 对象。

我建议退后一步，看看你是如何创作这些的。您不想继承或扩展您的 DB 包装器，我认为您应该在创建类时将其注入到类中。（或者写一个单例类，如果你愿意的话——我觉得这样更干净，但这会引发一个巨大的争论）

编辑：

如果您想要一个简单的“使用您的代码执行此操作”解决方案，它实际上是：

```
$conn=$this->pdo->pdo; 
```

# java - 快速排序算法的复杂度

> ID：13665087
> 
> 赞同：-2
> 
> 时间：2012-12-02T00:05:15.220
> 
> 标签：java, sorting, data-structures, complexity-theory

快速排序的标准最坏情况复杂度为 O(n^2)。这种最坏的情况是什么？在这种情况下如何进行修改以提出更好的行为？这只是一个理论问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T09:02:56.933

最坏的情况是，每当您选择一个枢轴时，它始终是您正在排序的段中的最大或最小元素。为了改善最坏的情况，您需要有一种选择支点的好方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T00:10:56.390

最坏的情况是数据已经排序。

一种补偿方法是随机选择第一个枢轴。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T08:53:40.170

最坏的情况取决于您使用的分区方法。在最简单的情况下，最坏的情况是数据已经排序。这就是你不使用它的原因。

# c++ - 试图同时写 std:out 和 file

> ID：13665090
> 
> 赞同：4
> 
> 时间：2012-12-02T00:05:25.903
> 
> 标签：c++, iostream

我试图通过重载 ofstream 在 C++ 中同时写入文件和标准输出

测试.h

```
 #pragma once 

#include <iostream>

using  std::ofstream;

class OutputAndConsole:public ofstream
{
public:
    std::string fileName;        
    OutputAndConsole(const std::string& fileName):ofstream(fileName),fileName(fileName){
    };
    template <typename T>
    OutputAndConsole& operator<<(T var);
};

template <typename T>
OutputAndConsole& OutputAndConsole::operator<<(T var)
{
    std::cout << var;
    ofstream::operator << (var);
    return (*this);
}; 
```

测试.cpp

```
 OutputAndConsole file("output.txt");
  file << "test" ; 
```

文件中的输出是

```
01400930 
```

但在控制台中是

```
test 
```

我调试了看起来像是正在输入的代码

```
_Myt& __CLR_OR_THIS_CALL operator<<(const void *_Val) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-02T00:28:08.533

我不会评论为什么你的方法不起作用，主要是因为它不能被修补以正常工作。主要问题是你不能使用你的流将它传递给期望的东西`std::ostream&`并且仍然写入两个流。然而，有一个相对简单但不一定显而易见的方法来实现您真正想要的：您将派生一个新的流缓冲区，即从 派生的类`std::streambuf`，并覆盖它的`overflow()`和`sync()`函数。这是一个简单演示的完整代码：

```
#include <streambuf>

struct teebuf
    : std::streambuf
{
    std::streambuf* sb1_;
    std::streambuf* sb2_;

    teebuf(std::streambuf* sb1, std::streambuf* sb2)
        : sb1_(sb1), sb2_(sb2) {
    }
    int overflow(int c) {
        typedef std::streambuf::traits_type traits;
        bool rc(true);
        if (!traits::eq_int_type(traits::eof(), c)) {
            traits::eq_int_type(this->sb1_->sputc(c), traits::eof())
                && (rc = false);
            traits::eq_int_type(this->sb2_->sputc(c), traits::eof())
                && (rc = false);
        }
        return rc? traits::not_eof(c): traits::eof();
    }
    int sync() {
        bool rc(true);
        this->sb1_->pubsync() != -1 || (rc = false);
        this->sb2_->pubsync() != -1 || (rc = false);
        return rc? 0: -1;
    }
};

#include <fstream>
#include <iostream>

int main()
{
    std::ofstream fout("tee.txt");
    teebuf        sbuf(fout.rdbuf(), std::cout.rdbuf());
    std::ostream  out(&sbuf);
    out << "hello, world!\n";
} 
```

显然，tee-stream 的创建可以很好地打包，但它看起来如何并不重要。重要的是可以为 IOStreams 创建自定义目标（或源），并且不涉及任何从`std::ostream`. `std::ostream`从(or )继承的唯一原因`std::istream`是使用自定义流缓冲区更容易初始化流。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-02T00:09:23.610

### 问题

> ```
> ofstream::operator << (var); 
> ```

这是您将其`ofstream::operator<<`用作*合格*的函数调用。您要求函数查找定位 ; 的成员函数`ofstream`。成员的最佳匹配是 for `void*`，而打印实际字符串内容的专门`char*`化是一个自由函数（即*不是*成员函数）。

如果你也这样做`cout`，你会发现同样的问题：

```
std::cout.operator<<(var); 
```

### 解决方案

这可能会做到：

```
static_cast<ofstream&>(*this) << var; 
```

因为您仍在使用正常的运算符语法（以及这需要的所有重载解决方案），但是使用 a`ofstream`作为 LHS 操作数。

不过，我还没有实际测试过。

### 结论

顺便说一句，*你* `operator<<`也应该是一个自由函数，以适应这个约定。

所以：

```
struct OutputAndConsole : std::ofstream
{
    OutputAndConsole(const std::string& fileName)
       : std::ofstream(fileName)
       , fileName(fileName)
    {};

    const std::string fileName;
};

template <typename T>
OutputAndConsole& operator<<(OutputAndConsole& strm, const T& var)
{
    std::cout << var;
    static_cast<std::ofstream&>(strm) << var;
    return strm;
}; 
```

我还冒昧地做了一些小的语法调整。

# java - Play2.0 返回“SQLException：等待空闲可用连接超时。”

> ID：13665092
> 
> 赞同：5
> 
> 时间：2012-12-02T00:05:44.690
> 
> 标签：java, playframework, playframework-2.0, bonecp

我一直在使用 Play 2.0.2 来创建 Java 应用程序。这几天我遇到了一个问题。在 ~100 请求之后，服务器开始抛出这个异常：

> [[SQLException: 等待空闲可用连接超时。]]

我创建了一个`Connection`with的新实例`DB.getConnection()`。我不关闭`Connection`实例，因为每个请求只有一个实例，据我所知，它会`Connection`在活动 TCP 连接关闭时自动关闭实例。我试图增加`db.default.connectionTimeout`价值，`100 seconds`但它无法解决问题。然后我检查了活动的 Postgresql 连接并且没有活动连接。我也重新启动了 Postgresql，但它也无法解决问题。

目前解决这个问题的唯一方法是杀死 Play20 实例并启动一个新实例。

这是 Play2.0 创建的日志：

```
! @6cg9il6ki - Internal server error, for request [GET [AN URL]] ->

play.core.ActionInvoker$$anonfun$receive$1$$anon$1: Execution exception [[SQLException: Timed out waiting for a free available connection.]]
        at play.core.ActionInvoker$$anonfun$receive$1.apply(Invoker.scala:134) [play_2.9.1.jar:2.0.2]
        at play.core.ActionInvoker$$anonfun$receive$1.apply(Invoker.scala:115) [play_2.9.1.jar:2.0.2]
        at akka.actor.Actor$class.apply(Actor.scala:318) [akka-actor.jar:2.0.2]
        at play.core.ActionInvoker.apply(Invoker.scala:113) [play_2.9.1.jar:2.0.2]
        at akka.actor.ActorCell.invoke(ActorCell.scala:626) [akka-actor.jar:2.0.2]
        at akka.dispatch.Mailbox.processMailbox(Mailbox.scala:197) [akka-actor.jar:2.0.2]
Caused by: java.sql.SQLException: Timed out waiting for a free available connection.
        at com.jolbox.bonecp.BoneCP.getConnection(BoneCP.java:503) ~[bonecp.jar:0.7.1.RELEASE]
        at com.jolbox.bonecp.BoneCPDataSource.getConnection(BoneCPDataSource.java:114) ~[bonecp.jar:0.7.1.RELEASE]
        at play.api.db.DBApi$class.getConnection(DB.scala:64) ~[play_2.9.1.jar:2.0.2]
        at play.api.db.BoneCPApi.getConnection(DB.scala:273) ~[play_2.9.1.jar:2.0.2]
        at play.api.db.DB$$anonfun$getConnection$1.apply(DB.scala:129) ~[play_2.9.1.jar:2.0.2]
        at play.api.db.DB$$anonfun$getConnection$1.apply(DB.scala:129) ~[play_2.9.1.jar:2.0.2] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T11:54:40.990

你提到：

> 我没有关闭 Connection 实例，因为每个请求只有一个实例

这是错误的，你必须关闭它，否则你最终会遇到你看到的问题。

原因是您获得的是直接 JDBC 连接，而不是由 ORM（EBeans 或其他符合 JPA 的）管理的连接，因此如果您不关闭它，连接可能会悬空一段时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T13:41:08.173

使用 DB.withConnection，一旦完成，它就会关闭连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-24T09:31:21.540

数据库的 Play 框架 Java 实现应该是这样的。

```
try{
      Ebean.beginTransaction();

      // your code goes here
      // if all things go fine 
       Ebean.commitTransaction();

}catch (Exception e){
      //got error so log it.
      e.printStackTrace();

}finally{
      //End the transactions started
      Ebean.endTransaction();
} 
```

# python - 这是用 python 3.3 编写的，我收到错误作为语法错误。任何人都可以解决这个问题吗？

> ID：13665094
> 
> 赞同：0
> 
> 时间：2012-12-02T00:06:16.920
> 
> 标签：python, python-3.3

```
while True:
    n=int(raw_input())
    if n!=42:
        print n
    else:
        break 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T01:37:20.760

获取 Python 3.X 教程。Python 3.X 对语言引入了非向后兼容的更改。 `raw_input`在 Python 3.X 中不再存在并且`print`是一个函数而不是一个语句：

更正的代码：

```
while True:
    n=int(input())
    if n!=42:
        print(n)
    else:
        break 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T00:12:39.303

[print is a function](http://docs.python.org/3.0/whatsnew/3.0.html#print-is-a-function) (not a statement) in Python3\. Use

```
print(n) 
```

instead of

```
print n 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T00:12:59.633

Use parentheses around the parameter of a function: `print(n)` instead of `print n`

# php - 如何使用表单中的 $_SESSION 变量进行重定向

> ID：13665097
> 
> 赞同：1
> 
> 时间：2012-12-02T00:06:55.667
> 
> 标签：php, session, variables, redirect

我有点缺乏经验，所以对我来说轻松点。

我需要在提交表单之前保存表单文本区域中的值（即使在重新加载页面后我也需要它）。

重新加载后，我需要重定向到站点上的预定义页面，该页面在 URL 的最后包含 textarea 值。

到目前为止，我有这样的事情：

```
<php?
session_start();
$_SESSION['textarea_value'] = $_POST['textarea_name'];
?>

// below is called directly after a popup form submission
location.reload();
if ($_SESSION['textarea_value'] != null) {
    header("Location: http://www.xxxxxxxx.com/?s=$_SESSION['textarea_value']");
    unset($_SESSION['textarea_value']);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T00:49:06.833

好的，这就是我要做的：

**方法#1**

**索引.php**

```
<?php 
    if($_POST)
    {
        session_start();
        $_SESSION["someVar"] = $_POST["someVar"];
        header("Location:otherPage.php");
    }
?>

<form action="" method="post">
<textarea name="someVar"></textarea><br/>
<input type="submit" value="submit">
</form> 
```

**其他页面.php**

```
<?php

    session_start();
    $someVar = $_SESSION["someVar"];

?> 
```

**方法#2**：如果你想用一个get请求来做，你甚至不需要使用会话：

**索引.php**

```
<?php 
    if($_POST)
    {
        header("Location:otherPage.php?someVar=".$_POST["someVar"]);
    }
?>

<form action="" method="post">
<textarea name="someVar"></textarea><br/>
<input type="submit" value="submit">
</form> 
```

**其他页面.php**

```
<?php

    $someVar = $_GET["someVar"];

?> 
```

**方法#3**：您甚至可以完全取消重定向：

**索引.php**

```
<form action="otherPage.php" method="post">
<textarea name="someVar"></textarea><br/>
<input type="submit" value="submit">
</form> 
```

**其他页面.php**

```
<?php

    $someVar = $_POST["someVar"];

?> 
```

# mysql - MySQL Query 根据频率选择前 50 行的子集

> ID：13665098
> 
> 赞同：0
> 
> 时间：2012-12-02T00:07:27.997
> 
> 标签：mysql, frequency, subset

我有一个名为数据的表：

```
create table data
(
   ID int primary key,
   val varchar(50),
   forID int

   constraint fk_forID foreign key (forID) references otherTable(forID)
) 
```

我有一个名为 dataFrequencies 的视图

```
create view dataFrequencies (val, freq)
as select val, COUNT(*)
     from data
 group by val
 order by freq desc 
```

我想要的是表中前五十行中的**行子集**。`data``val``dataFrequencies`

我目前的解决方案有点迂回。我创建了一个包含前 50 行 dataFrequencies 的表 topFifty。然后我创建一个视图 topFiftyVals，它从数据中选择所有数据，但在表 topFifty 上进行内部连接：

```
create table topFifty
(
   val varchar(50) primary key
)

insert into topFifty select val from dataFrequencies order by frequency desc limit 50;

create view topFiftyVals (ID, val, forID)
as select *
     from data d
inner join topFifty tf on d.val = tf.val 
```

我确信有某种直接查询方法可以做到这一点！感谢所有的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T00:14:05.037

你不能这样做：

```
SELECT *
  FROM data
 WHERE val IN (SELECT val 
                 FROM dataFrequencies 
               ORDER BY frequency DESC 
               LIMIT 50); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T00:14:26.030

是的，有一个直接的方法。这是您`topFiftyVals`认为的代码，略有改动：

```
 select d.*, tf.freq
       from data d
 inner join ( select val, COUNT(*) AS freq
                from data
            group by val
            order by freq desc
               limit 50
            ) tf 
         on d.val = tf.val ; 
```

# java - 在 Spring v3.1 中替换 SimpleFormController

> ID：13665115
> 
> 赞同：0
> 
> 时间：2012-12-02T00:11:14.827
> 
> 标签：java, spring, spring-mvc

我正在尝试从 springsource.org 编写一些基本示例，并将示例中的 SimpleFormController 替换为一些 @Controller 和 @RequestMapping 注释。但是当应用程序运行时我得到的只是错误：`java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name 'priceIncrease' available as request attribute`

这是一些代码，在 .jsp 我有这个：

```
<form:form method="post" modelAttribute="priceIncrease">
 <table width="95%" bgcolor="f8f8ff" border="0" cellspacing="0" cellpadding="5">
 <tr>
   <td align="right" width="20%">Increase (%):</td>
     <td width="20%">
      <form:input path="percentage"/>
     </td>
     <td width="60%">
      <form:errors path="percentage" cssClass="error"/>
     </td>
 </tr>
</table>
<br>
<input type="submit" align="center" value="Execute">
</form:form> 
```

和控制器：

```
@Controller
@RequestMapping("/priceincrease.htm")
public class PriceIncreaseFormController {

@Autowired
PriceIncreaseValidator priceIncreaseValidator; 

protected final Log logger = LogFactory.getLog(getClass());

@RequestMapping(method= RequestMethod.POST)
public String onSubmit(@ModelAttribute("priceIncrease")PriceIncrease priceIncrease,   BindingResult result) throws ServletException {

    int increase = priceIncrease.getPercentage();
    priceIncreaseValidator.validate(increase, result);

    if (result.hasErrors()) {
        return "priceIncrease";
    }

    logger.info("Increasing prices by " + increase + "%.");

    return "redirect:home.htm";
  }

@RequestMapping(method=RequestMethod.GET)
public String initializeForm(ModelMap model) {
    Map<Integer, String> priority = new LinkedHashMap<Integer, String>();

    priority.put(1, "low");
    priority.put(2, "medium");
    priority.put(3, "high");

    model.addAttribute("priorityList", priority);

    return "priceincrease";

  }
} 
```

据我所知，我不需要在 servlet.xml 中进行任何额外的配置，对吗？所以你们知道问题出在哪里吗？

@kmb385 感谢您的帮助，现在表单已正确初始化，但“onSubmit”和验证方法还有另一个问题。现在代码如下所示：

```
@Autowired
PriceIncreaseValidator priceIncreaseValidator; 

protected final Log logger = LogFactory.getLog(getClass());

@Autowired
private ProductManager productManager;

@RequestMapping(method= RequestMethod.POST)
public String onSubmit(@ModelAttribute("priceIncrease")PriceIncrease priceIncrease, BindingResult result) throws ServletException {

    int increase = priceIncrease.getPercentage();
    logger.info("Increasing prices by " + increase + "%.");

    logger.info("result : " + result.toString());
    priceIncreaseValidator.validate(increase, result);

    productManager.increasePrice(increase);

    if (result.hasErrors()) {
        return "priceIncrease";
    }

    return "redirect:hello.htm";
} 
```

并且在

```
priceIncreaseValidator.validate(increase, result); 
```

玻璃鱼回归

```
 org.springframework.web.util.NestedServletException: Request processing failed; nested exception is java.lang.NullPointerException 
```

PriceIncreaseValidator：

```
public class PriceIncreaseValidator implements Validator {

private int DEFAULT_MIN_PERCENTAGE = 0;
private int DEFAULT_MAX_PERCENTAGE = 50;
private int minPercentage = DEFAULT_MIN_PERCENTAGE;
private int maxPercentage = DEFAULT_MAX_PERCENTAGE;

@Override
public boolean supports(Class clazz) {
    return PriceIncrease.class.equals(clazz);

}

@Override
public void validate(Object arg0, Errors arg1) {
    PriceIncrease pi = (PriceIncrease) arg0;

    if (pi == null) {
        arg1.rejectValue("percentage", "error.not-specified", null, "cos wymagane");
    }
    else {
        if (pi.getPercentage() > maxPercentage) {
            arg1.rejectValue("percentage", "error.too-high", new Object[] {new Integer(maxPercentage)}, "za duzo");
        }
        if (pi.getPercentage() <= minPercentage) {
            arg1.rejectValue("percentage", "error.too-low", new Object[] {new Integer(minPercentage)}, "za malo");
        }
    }

}

public void setMinPercentage(int i) {
    this.minPercentage = i;
}

public int getMinPercentage() {
    return minPercentage;
}

public void setMaxPercentage(int i) {
    this.maxPercentage = i;
}

public int getMaxPercentage() {
    return maxPercentage;
} 
```

}

你知道现在出了什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T00:17:18.583

在初始化表单时，您需要在模型中添加一个`PriceIncrease`带有名称的类型属性。`priceIncrease`

```
@RequestMapping(method=RequestMethod.GET)
public String initializeForm(ModelMap model) {
    Map<Integer, String> priority = new LinkedHashMap<Integer, String>();
    priority.put(1, "low");
    priority.put(2, "medium");
    priority.put(3, "high");

    PriceIncrease priceIncrease = new PriceIncrease();  //Not sure of constructor
    model.addAttribute("priceIncrease", priceIncrease);

    model.addAttribute("priorityList", priority);

    return "priceincrease";

  }
} 
```

# objective-c - 通过 API 调用从站点检索网站并显示给用户

> ID：13665117
> 
> 赞同：1
> 
> 时间：2012-12-02T00:11:24.257
> 
> 标签：objective-c, ios, ios5, ios4

我正在开发一个 iphone 应用程序。

我的应用程序的第一个屏幕显示了可供用户使用的服务列表。

用户然后选择其中一项服务并转到他们可以订购该服务的下一个屏幕。

我需要使用我网站上的 api 调用来检索服务列表。

在不影响用户体验的情况下，在IOS中有什么方法可以做到这一点？我不希望用户每次访问该页面时都等待我从我的站点检索服务列表。

我现在正在使用 AFNetworking API 来获取服务列表。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T00:15:43.887

AFNetworking 听起来不错。

确保你使用它异步和完成块

例如

```
 NSMutableURLRequest *urlRequest = ...

    AFHTTPRequestOperation *request = [[AFHTTPRequestOperation alloc] initWithRequest:urlRequest];
    [request setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
        ... handle your services
    } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
        ... handle error
    }];

     [request start]; 
```

* * *

如果请求是 JSON，请使用 AFJSONRequest 类

# wpf - WPF 在多层/项目应用解决方案中集中 xaml/image 资源

> ID：13665120
> 
> 赞同：11
> 
> 时间：2012-12-02T00:12:08.200
> 
> 标签：wpf, xaml, mvvm, user-controls, resourcedictionary

我的情况是这样的。我在 WPF 解决方案下有多个项目，这些项目构成了我正在开发的多层应用程序。由于单独的项目有时需要访问相同的图像或 xaml 资源，我想将“公共”资源集中到一个项目中，该项目可以被需要这些“公共”资源的任何其他项目引用。例如，我有一个 BMP 图像，我在不同项目中的各种控件和窗口中使用它作为横幅/徽标。似乎我应该能够将此图像作为资源添加到公共资源项目中，并从我的其他项目中引用它，而不是将图像单独添加到需要它的每个项目中。如果这是可能的，它会是什么样子，我应该怎么做？如果我的想法很糟糕，我愿意接受建议，

谢谢！

PS我已经搜索了很多这个主题，但是那里有很多不知道他们在做什么的人的垃圾答案。鉴于我对 WPF 比较陌生，我宁愿直接回答我的问题。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-02T09:22:54.563

好吧，经过一些修补和研究，我找到了解决我自己问题的方法。似乎我的答案的零碎散布在整个网络上，所以我将尝试在一个地方一次解释整个事情。回顾一下，我基本上想在我的解决方案中集中跨项目使用的任何资源。这些是我最终完成此任务所遵循的步骤。

1\. 在您的解决方案中创建一个用户控制项目（任何可以托管资源字典的项目都可以）。我将把这个项目称为“资源项目”。

2\. 将您想要在项目之间共享的任何资源文件（图像等）添加到资源项目。我尝试在有意义的子目录中组织文件。您需要将构建操作设置为“资源”，以便将其编译到输出二进制文件中。

3\. 现在将资源字典添加到资源项目中。就我而言，我想引用几张图片，所以我制作了一张名为“ImageDictionary.xaml”的图片。

4\. 在资源字典中添加对图像文件的引用。我在这里引用图像，但它只是一个资源字典，你可以在那里放任何东西。中间的字符串只是您所引用的图像文件的相对路径。

```
<ImageSource x:Key="SomeImageKey"> 
    Images/SomeImage.bmp
</ImageSource> 
```

5\. 现在转到一个需要您在第 4 步中创建的资源字典的项目。它可以是另一个用户控件或窗口，等等。右键单击项目引用并添加对资源项目的引用。

6\. 好的，现在当前项目需要引用您在步骤 4 中创建的在资源项目中定义的字典。我首先制作了一个用户控件，所以这就是我的代码如下所示...请注意，我使用了合并字典。我计划稍后使用更多，所以我选择了这种方式而不是单个字典。下面的“ResourceProject”是您添加资源的项目/程序集的名称。“组件”是一个需要存在的关键字，后跟字典 xaml 代码文件的路径。

```
<UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/ResourceProjectAssembly;component/Resources/ImageDictionary.xaml" />  
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>        
    </UserControl.Resources> 
```

如您所见，引用外部资源字典需要一个称为“Pack URI”的东西。我找到了一种简便的方法。很长的路有点丑，据我所知，它没有任何优势。但这就是漫长的道路。

```
<UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="pack://application:,,,/ResourceProjectAssembly;component/Resources/ImageDictionary.xaml" />  
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>        
    </UserControl.Resources> 
```

7\. 现在您的当前项目已经引用了资源项目中的资源字典，您可以使用该字典中的任何内容。我继续在我的用户控件中放置一个图像。下面是代码。就像在本地引用字典一样。

```
<Image Source="{StaticResource SomeImageKey}" /> 
```

8\. 重要提示！在我发现它之前，这让我头疼了一会儿。确保解决方案中的启动项目具有对资源项目的引用，即使启动项目不使用资源项目。（即右键单击引用、添加引用等...）除非您这样做，否则资源不会被编译到输出中。这部分很棘手，因为设计师甚至显示了我的图像并且我没有 xaml 错误，但在运行时它会抛出 set 属性并且找不到文件异常。当我从我的启动项目中引用我的资源项目时，这种情况就消失了。

希望这可以帮助某人。下面是一些指向几个地方的链接（包括 stackoverflow），它们为我提供了将所有部分组合在一起所需的东西。

[http://blogs.msdn.com/b/wpfsldesigner/archive/2010/06/03/creating-and-sumption-resource-dictionaries-in-wpf-and-silverlight.aspx](http://blogs.msdn.com/b/wpfsldesigner/archive/2010/06/03/creating-and-consuming-resource-dictionaries-in-wpf-and-silverlight.aspx)

[从外部文件或程序集加载 WPF 样式或其他静态资源](https://stackoverflow.com/questions/706700/load-wpf-styles-or-other-static-resources-from-an-external-file-or-assembly)

[ResourceDictionary 在单独的程序集中](https://stackoverflow.com/questions/338056/resourcedictionary-in-a-separate-assembly)

# maven - Nexus OSS：发布到静态镜像

> ID：13665121
> 
> 赞同：0
> 
> 时间：2012-12-02T00:12:20.030
> 
> 标签：maven, nexus

您是否知道一种配置 Nexus OSS 的方法，以便它将工件存储库以可以静态服务的形式（例如通过 Apache Httpd）发布到远程服务器？我想使用这个静态副本只为我自己的工件提供服务，因此如果有新发布的内容，nexus 服务器可以主动触发更新。从技术上讲，我认为应该可以为 repo 创建元数据并将它们存储在静态文件中，但我不确定。任何提示表示赞赏。

如果有另一个回购经理来实现这一点，那对我来说也很好。

我清楚地了解直接使用 repo 管理器的优势，但是由于 IT 规则，我只能在内部运行 Nexus，并且有必要在 Internet 上的（私有）repo 副本中提供这些工件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T03:10:09.500

解决这种仅公开已知服务器（如 Apache httpd）的 IT 需求的典型方法是将 Apache httpd 设置为[此处](http://www.sonatype.com/books/nexus-book/reference/install-sect-proxy.html)记录的反向代理。

您可以通过仅公开特定存储库或更好的存储库组（因此您可以组合快照和版本）并将其与特定用户或匿名用户的特定受限设置绑定在一起，从而以更严格的方式使用该方法没有凭据通过时的默认值。

此外，如果您需要更多帮助，请随时通过用户邮件列表或 hipchat 与我们联系。

# c++ - 声明数组：带空格的数组名

> ID：13665122
> 
> 赞同：1
> 
> 时间：2012-12-02T00:12:22.883
> 
> 标签：c++, arrays

我试图理解我教授的代码的一部分。他举了一个硬件分配的例子，但我不知道如何理解这部分代码..

这是代码：

```
void addTask(TaskOrAssignment tasks[], int& taskCount, char *course, char *description, char *dueDate)
{
    tasks[taskCount].course = course;
    tasks[taskCount].description = description;
    tasks[taskCount].dueDate = dueDate;         
    taskCount++;
} 
```

问题：“ `tasks[taskCount].course = course;`”是访问或声明 char 课程的位置吗？

我希望我能得到这个答案，而且我对这个网站也很陌生。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T00:18:33.213

`course`是一个字符指针，它指向堆栈或堆中存储`'\0'`终止字符串的内存块。

`tasks[taskCount].course`也是一个字符指针，赋值只是让`tasks[taskCount].course`指向相同的内存地址`course`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T00:27:01.147

```
tasks[taskCount].course = course; 
```

让我们一次分解一下。首先，我们使用赋值运算符 (=) 将一个变量的值赋给另一个变量。

右边很简单，只是一个名为的变量`course`，它被声明为`char*`.

它被分配给变量`tasks[taskCount].course`。如果查看方法的参数，您可以看到它被声明为对象`tasks`数组。`TaskOrAssignment`所以`tasks[taskCount]`指的是这个数组的元素之一。`.course`末尾的 是指在该对象中命名的字段`course`。假设此代码编译，该字段`char*`在`TaskOrAssignment`类中声明为 a。

最有可能的是，这两个`course`变量都代表一串字符。（这源于C。）当一切都说完了，两者都`course`指向`tasks[taskCount].course`同一个字符串缓冲区。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T00:29:36.800

`course`是一个`char*`（指向 的指针`char`）。据推测，`course`成员`TaskOrAssignment`也是一个`char*`。该行所做的只是将值赋给数组中第th 个元素`course`的成员。`course``taskCount`

据推测，该`course`参数旨在成为指向以空字符结尾的 C 样式字符串中的第一个字符的指针。所以在这个赋值之后，`course`数组元素的成员将指向同一个 C 风格的字符串。但是，当然，指针真的可以指向任何地方。

# asp.net - How can I use Telerik RadGrid's filter expression to filter a custom List data object?

> ID：13665130
> 
> 赞同：1
> 
> 时间：2012-12-02T00:13:26.067
> 
> 标签：asp.net, linq, telerik-grid

I am using Telerik RadGrid with LINQExpressions enabled.

I am binding this grid to data that I retrieve from Cache in NeedDataSource event as in code below.

The problem is, when I step through my code after inputting a filter, then I get this as filter expression - **"(iif(MemberName == null, \"\", MemberName).ToString().StartsWith(\"T\"))"**. How would I use this with my listFromCache object? Perhaps, some LINQ trick? MemberName is a property of Document object. It seems its impossible to use the FilterExpression that I get in code-behind from RadGrid's object model.

I am using C#.

```
 List<Document> listFromCache = Cache[dataCacheName] as List<Document>;

 if (listFromCache != null)
 {

   //FILTER listFromCache here

 } 
```

# javascript - jQuery - Draggable UI - 如何检测元素是否已被拖动到某个位置，然后调用动画

> ID：13665133
> 
> 赞同：1
> 
> 时间：2012-12-02T00:13:57.377
> 
> 标签：javascript, jquery, css, html, user-interface

我有这个可以垂直拖出屏幕的 div。我想知道是否有办法检测该 div 是否已超过某个限制，然后显示一个动画，它会自动滑出页面。到目前为止我所做的事情我认为应该可以工作，但是可惜的是，我对 JavaScript 的平庸知识导致了它的丑陋结局。这是我到目前为止所拥有的：

```
$(document).ready(function() {
    $("div").draggable({
       axis: "y", // vertical drag only
       drag: function(event, ui) { // THIS NEXT BLOCK JUST MAKES SURE IT WON'T DRAG OFF THE BOTTOM OF SCREEN
            if($(this).offset().top + $(this).outerHeight() > $(window).height()) {
                $(this).offset({"top": $(window).height() - $(this).outerHeight()});
                event.preventDefault();
            }
       }
    });

    if($("div").css("top") == "-340px") {
        $("div").animate({
            top: "-100%"
        });
    }
}); 
```

我知道 jQuery UI“可拖动”使用该属性`top`，因为我查看了 Google Chrome 的调试器工具，并且当我拖动它时动态插入内联样式，并且我`top: -(x)px;`在拖动 div 时阅读了继续攀爬。所以，从逻辑上讲，我测试了它是否被拖过，`-340px`然后自动拖到剩下的路。

`revert`而且，如果可能的话，如果 div没有过去，我希望它下拉（使用？） `-340px`，但这真的不是一个大问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T01:12:38.917

您的情况不在正确的位置；一旦 Drag 被触发，您应该进行验证！

请参阅下面的代码检查位置是否高于 100 并触发动画：

```
<html>
<head>
<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css">
<script src="http://code.jquery.com/jquery-1.8.3.js"></script>
<script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
</head>
<body>
<div id="draggable" class="ui-widget-content ui-draggable" style="position: relative;">
    <p>Drag me around</p>
</div>
<script>
$(document).ready(function() {
    $("div").draggable({
       axis: "y", // vertical drag only
       drag: function(event, ui) { // THIS NEXT BLOCK JUST MAKES SURE IT WON'T DRAG OFF THE BOTTOM OF SCREEN
            if($(this).offset().top + $(this).outerHeight() > $(window).height()) {
                $(this).offset({"top": $(window).height() - $(this).outerHeight()});
                event.preventDefault();
            }

             if(Number($("div").css("top").replace("px","")) > 100) {
                $("div").animate({
                    top: "-100%"
                });
            }
       }
    });
});
</script>
</body>
</html> 
```

# regex - SED: How to remove special characters before the numbers?

> ID：13665134
> 
> 赞同：0
> 
> 时间：2012-12-02T00:13:57.860
> 
> 标签：regex, bash, shell, sed

I have the following string:

```
E E E 11 5 E 3 4 
```

I need to be able to strip all "E" characters that go before the numbers. So that the output would be like this:

```
11 5 E 3 4 
```

The number of first "E" can be different, so it can be either "E E" or "E E E E" etc. How can I do it with SED? If possible, with alternative shell utils.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T00:19:56.100

```
sed 's/^[E ]*\([0-9]\)/\1/' 
```

这将用第一个数字替换一行中第一个数字和第一个数字之前的所有 E 和空格。

需要注意的是，这不适用于*仅*由 E 和空格组成的行。我从措辞中假设，只有在线上有数字时才进行删除。要支持只有 E 的情况，只需使用`s/^[E ]*//`程序即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T00:25:06.150

Found another variant:

```
sed 's/^[E ]\+//g' 
```

# php - 通过“Add_Action”自定义功能不起作用

> ID：13665137
> 
> 赞同：1
> 
> 时间：2012-12-02T00:14:38.710
> 
> 标签：php, wordpress, function

我无法使用“add_action”调用函数。这是我的过程：

我在我的functions.php（最后一个add_action）中添加了“muimedia_post_video”：

```
/* Posts */
// muimedia_before_post_loop
add_action( 'muimedia_post_before_entry_content', 'muimedia_post_entry_meta', 10);
add_action( 'muimedia_post_entry_summary', 'muimedia_post_entry_summary', 10);
add_action( 'muimedia_post_after_entry_content', 'muimedia_post_entry_data', 10);
add_action( 'muimedia_post_no_results_not_found', 'muimedia_post_no_results_not_
found',   10);
add_action( 'muimedia_after_post_loop', 'muimedia_post_pagination', 10);
add_action( 'muimedia_post_video', 10); 
```

我制作了实际的 muimedia_post_video 动作函数（在 contentextensions.php 中）：

```
/* muimedia_post_video */
if ( !function_exists( 'muimedia_post_video' ) ) {
    function muimedia_post_video() {
        ?>
        <div class="video-entry-summary">
            <?php if (has_post_thumbnail()){ ?>
            <a href="<?php the_permalink() ?>" 
title="<?php the_title_attribute( array('before' => esc_attr__( 'Permalink: 
', 'muimedia' ), 'after' => '')); ?>" rel="bookmark"><?php the_post_thumbnail();
?></a>
            <?php } ?>

            <h1 class="entry-title"><a href="<?php the_permalink(); ?>" 
            title="<?php the_title_attribute( array('before' => esc_attr__
            ( 'Permalink: ', 'muimedia' ), 'after' => '')); ?>" rel="bookmark">
            <?php the_title(); ?></a></h2>

<div class="entry-meta">
<span class="meta-date"><?php echo get_the_date(); ?></span>
</div>

        <?php the_excerpt(); ?>...

        <div id="disquscomments"><a href="<?php comments_link(); ?  >#disqus_thread">
        Comments</a></div>

    </div>
    <?php 
   }
} 
```

然后我在任何 php 文件中调用该函数，如下所示：

```
<?php do_action('muimedia_post_video'); ?> 
```

我不知道为什么，但这并没有显示任何帖子。:(如果我使用带有“do_action（'post_entry_summary'）”之类的主题的动作，它会显示相应类别的所有帖子......但理论上它也应该适用于我的自定义do_action，因为我所做的一切复制并粘贴了 post_entry_summary 代码，更改了它的名称并在我的主题函数中添加了一个新的 do_action。

我得到这个工作真的很重要，我不知道为什么我自己的自定义函数不起作用。据我所知，我所做的一切都是正确的。任何帮助都将不胜感激，如此如此如此，如此如此……如此（如此）多！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T00:25:33.913

改变：

```
add_action( 'muimedia_post_video', 10); 
```

到：

```
add_action( 'muimedia_post_video', 'muimedia_post_video', 10); 
```

成功了。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-30T17:25:17.147

add_action 需要以下参数....

```
add_action($tag, $function_to_add, $priority = 10, $accepted_args = 1); 
```

因此，在您的最后一个函数中，您没有添加该函数。您需要添加该功能以使其工作。

参考：[http ://codex.wordpress.org/Function_Reference/add_action](http://codex.wordpress.org/Function_Reference/add_action)

# javascript - Multiple id selectors

> ID：13665140
> 
> 赞同：1
> 
> 时间：2012-12-02T00:14:56.027
> 
> 标签：javascript, selector

I have a form with 2 drop down lists on the same page using the same ids.

```
<select id="country">
  <option value="">Any</option>
  <option value="ENGLAND">England</option>
  <option value="IRELAND">Ireland</option>
  <option value="SCOTLAND">Scotland</option>
  <option value="WALES">Wales</option>
</select>

<select id="county">
  <option value="">Select a country first...</option>
</select>

<div style="clear:both">&nbsp;</div>

<select id="country">
  <option value="">Any</option>
  <option value="ENGLAND">England</option>
  <option value="IRELAND">Ireland</option>
  <option value="SCOTLAND">Scotland</option>
  <option value="WALES">Wales</option>
</select>

<select id="county">
  <option value="">Select a country first...</option>
</select> 
```

Not sure how to I change the JavaScript code so the second county drop down list functions same as the first one. The existing javascript and how it functions can be seen here:

[http://jsfiddle.net/pfYEb/10/](http://jsfiddle.net/pfYEb/10/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T00:16:43.093

You'll probably want to use class="country" instead of id="country" so that your selector will match both. (same for your id="county") In your jsfiddle, you'll also need to distinguish which county to change within your country change event. One easy way to do this is to use the index of the current element.

I've forked your jsfiddle [here](http://jsfiddle.net/wYswj/).

**HTML**

```
<select class="country">
  <option value="">Any</option>
  <option value="ENGLAND">England</option>
  <option value="IRELAND">Ireland</option>
  <option value="SCOTLAND">Scotland</option>
  <option value="WALES">Wales</option>
</select>

<select class="county">
  <option value="">Select a country first...</option>
</select>

<div style="clear:both">&nbsp;</div>

<select class="country">
  <option value="">Any</option>
  <option value="ENGLAND">England</option>
  <option value="IRELAND">Ireland</option>
  <option value="SCOTLAND">Scotland</option>
  <option value="WALES">Wales</option>
</select>

<select class="county">
  <option value="">Select a country first...</option>
</select>
​ 
```

**Relevant Javascript:**

```
 $('.country').change(function() {
    var country = $(this).val(),
        county  = $('.county').eq($(".country").index(this)); // This matches the county

    // Empty county dropdown
    county.empty();

    // Update dropdown with appropriate contents
    if (country === '') {
      county.append('<option value="">Select a country first...</option>');
    } else {
      $.each(counties[country], function(i, v) {
        county.append('<option value="' + i + '">' + v + '</option>');  
      });
    }
  }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T00:16:31.700

You can't really solve this querying by *id*. Element ID's have to be unique within a document by specification by the way. Your best shot, use `classes` instead.

# php - Mod rewrite only when directory exists

> ID：13665144
> 
> 赞同：1
> 
> 时间：2012-12-02T00:15:09.283
> 
> 标签：php, apache, .htaccess, mod-rewrite, directory

I have a directory structure as follows:

```
/gallery
----index.php
----/23XASDTAGH
----/24XGA43KJA/ 
```

I'd like to use mod rewrite to rewrite if a directory exists. so:

`www.example.com/gallery/23XASDTAGH/`

becomes

`www.example.com/gallery/index.php?gallery=23XASDTAGH`

but i'd like to do this silently, so no changes happen to the url. now i have this:

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME}/ -d
RewriteRule (.*) /gallery/index.php?gallery=$1 [L] 
```

which works with

`www.example.com/gallery/23XASDTAGH/`

but the odd thing is when i leave the trailing slash off the end it changes the url to

`www.example.com/gallery/23XASDTAGH/?gallery=23XASDTAGH`

how can i get it to work with or without the trailing slash?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T00:39:35.670

I think the following will do the trick

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule (.*) /gallery/index.php?gallery=$1 [L] 
```

Second line checks that the requested filename is a directory and if it is then the third line does the actual rewrite

To try and deal with the trailing slash problem, maybe this, or something like this will work

```
RewriteCond %{REQUEST_FILENAME} (.*)/?$
RewriteCond %1 -d
RewriteRule (.*)/$ /gallery/index.php?gallery=$1 [R=301] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T01:41:34.717

你可能想试试这个：

```
RewriteEngine on
RewriteRule ^(gallery)/([a-zA-Z0-9-_=]+)/?$ http://www.example.com/$1/index.php?$1=$2 [R=301,L] 
```

永久重定向输入的 URL（浏览器地址栏中的那个）：

`www.example.com/gallery/23XASDTAGH`或`www.example.com/gallery/23XASDTAGH/`：

`www.example.com/gallery/index.php?gallery=23XASDTAGH`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-02T02:17:29.903

终于弄明白了，我需要`?/`在重写规则中的表达式末尾加上一个来说明斜杠是可选的。为什么正则表达式必须如此~~难易~~。8-)

正确表达：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME}     -d
RewriteRule ^([a-zA-Z0-9_-]+)?/$    /gallery/index.php?gallery=$1 [L] 
```

# python - Preferred way to remove whitespace from a string

> ID：13665149
> 
> 赞同：11
> 
> 时间：2012-12-02T00:15:58.240
> 
> 标签：python, string, whitespace

I want to remove all spaces from a string.

> " as fa sdf sdfsdf "

The result would be:

> "asfasdfsdfsdf"

There are several ways I can think of to achieve this, and I'm wondering which one is the best.

1.

```
"".join(" as fa   sdf sdfsdf ".split()) 
```

2.

```
" as fa   sdf sdfsdf ".replace(" ", "") 
```

And I assume that there are more.
Which one is preferred?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-02T00:23:36.933

我相信最好和最有效的方法是第二个版本`" as fa sdf sdfsdf ".replace(" ", "")`，作为您可以使用该`timeit`模块的证据：

*   `python -m timeit '"".join(" as fa sdf sdfsdf ".split())'`

    **`1000000 loops, best of 3: 0.554 usec per loop`**

*   `python -m timeit '" as fa sdf sdfsdf ".replace(" ", "")'`

    **`1000000 loops, best of 3: 0.405 usec per loop`**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-02T00:22:33.087

`replace(" ", "")`是最清晰最简洁的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-02T00:24:10.593

使用它来一次删除所有空白：

```
import re

s = ' as fa   sdf sdfsdf '
s = re.sub(r'\s+', '', s)

s
=> 'asfasdfsdfsdf' 
```

这种方法的优点是它消除了字符之间的所有空格——一个、两个，不管有多少，因为正则表达式`r'\s+'`匹配“一个或多个”空白字符——包括空格、制表符等。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-02T00:23:04.657

使用`replace`不会删除所有空白字符（例如，换行符、制表符）：

```
>>> 'abc\t\ndef'.replace(" ", "")
'abc\t\ndef' 
```

我更喜欢`string.translate`：

```
>>> import string
>>> 'abc\t\ndef'.translate(None, string.whitespace)
'abcdef' 
```

编辑：`string.translate`不适用于 Unicode 字符串；您不妨`re.sub('\s', '', 'abc\n\tdef')`改用。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-02T00:26:45.077

正则表达式

```
>>> str = "   as fa sdf sdfsdf  "
>>> import re
>>> re.sub(r'\s', '', str) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-02T00:23:48.727

`re.sub(" ","", s)`是我的最爱。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-02T01:27:01.083

只是为了混合另一个：

```
from string import whitespace
ws = set(whitespace)
''.join(ch for ch in my_string if ch not in ws) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-02T00:19:28.510

正则表达式很简单并且有效。`split()`稍微复杂一些。正则表达式优于`split()`.

# javascript - javascript 谷歌地图地理编码器初始化

> ID：13665151
> 
> 赞同：1
> 
> 时间：2012-12-02T00:16:16.570
> 
> 标签：javascript, google-maps

我正在尝试使用 google maps javascript API 来映射基于此示例的地址。

[https://google-developers.appspot.com/maps/documentation/javascript/examples/geocoding-simple](https://google-developers.appspot.com/maps/documentation/javascript/examples/geocoding-simple)

该文档推荐客户端 javascript 方法作为处理请求配额的最佳方式。到现在为止还挺好。我的问题是从这个例子转移到我的具体案例。我的地址已经在数据库中，所以我不需要用户输入。此外，我不希望地图与页面一起加载。相反，我希望在用户单击链接时加载地址的地图。

我有一个脚本可以使用initialize（）将地图加载到div中。但我的问题是初始化以使用地理编码。示例中的地理编码取决于使用我不想要的 bodyonload 初始化加载。

这是代码。将不胜感激任何建议：

javascript

```
 var map;
    var geocoder;

     function codeAddress() {
            var address = document.getElementById('address').value;
            geocoder.geocode( { 'address': address}, function(results, status) {
              if (status == google.maps.GeocoderStatus.OK) {
                map.setCenter(results[0].geometry.location);
                var marker = new google.maps.Marker({
                    map: map,
                    position: results[0].geometry.location
                });
              } else {
                alert('Geocode was not successful for the following reason: ' + status);
              }
            });
          }

      function initialize() {
    geocoder = new google.maps.Geocoder();
        var latlng = new google.maps.LatLng(40.7562008,-73.9903784);
        var myOptions = {
          zoom: 18,
          center: latlng,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
      } 
```

html

```
<input id="address" type="hidden" value="Palo Alto CA">
<a href="javascript:void(0)" onclick="initialize()">View map without geocoding</a>
<div id="map_canvas" style="width:300px; height:300px;"></div>
<a href="javascript:void(0)" onclick="codeAddress()">View map of geocoded address</a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T00:52:28.393

我对您的脚本的唯一问题是函数中的以下行`initialize()`：

```
var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions); 
```

通过声明`var map`，您的脚本只是声明了一个名为 的局部变量`map`，而不是使用在`map`脚本顶部声明的全局变量。

通过删除`var`，脚本使用全局变量并运行良好：

```
map = new google.maps.Map(document.getElementById("map_canvas"), myOptions); 
```

最后，要在链接单击时加载地理编码地图，`onclick`请将您的地理编码地址更改为`onclick="initialize();codeAddress();"`.

**添加：**

尝试将您的`initialize()`和`codeAddress()`方法组合到以下内容中：

```
function initialize() {
    geocoder = new google.maps.Geocoder();

    var address = document.getElementById('address').value;
    geocoder.geocode({ 'address': address }, function (results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            var myOptions = {
                zoom: 18,
                center: results[0].geometry.location,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };
            map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
        } else {
            alert('Geocode was not successful for the following reason: ' + status);
        }
    });
} 
```

然后只需`initialize()`从您的链接中调用。

基本上，我们正在做的是调用正在执行的调用`geocoder.geocode()`，`codeAddress()`并且在生成的委托中，我们`results[0].geometry.location`用来初始化地图。这样，临时的 latlong 就不需要显示了。

# c# - Displaying results in View linq to sql mvc 4

> ID：13665160
> 
> 赞同：1
> 
> 时间：2012-12-02T00:17:32.843
> 
> 标签：c#, asp.net-mvc

I have been reading and reading , and I can't seem to get this to work at all. I am very very new to asp.net MVC - after all the tutorials I read I finally got this much accomplished.

```
public class EventsController : Controller
{
    private EventsDBDataContext db = new EventsDBDataContext();
    public ActionResult Index()
    {
        var a = (from x in db.tblEvents
                 where x.StartDate >= DateTime.Now
                 select x).Take(20).ToList();
        return View(a);
    }
} 
```

This is successfully finding 20 rows (like it is supposed to). Now how do I display these in the view ?? Does it have to be a strongly typed view?? It doesn't seem like it should have to be... I have tried both , I tried typing a whole view, but for now it would be nice to just get one property of `tblEvents` to show up in the view. This is not working, I have tried many many variations.

```
@{foreach( var item in Model){

      @Html.DisplayFor( item.ID)

  }
} 
```

How do I get the results from the controller displayed in the view? Just the `ID` is good for now - I can go from there.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T00:56:35.367

问题是您的视图不知道您的模型是什么类型。使用 @model 语法来定义模型的类型。

```
@model List<YourEventClass>

@foreach( var item in Model )
{
   @item.ID<br />
} 
```

有关更多信息，请参见[此处](http://weblogs.asp.net/gunnarpeipman/archive/2010/10/13/asp-net-mvc-3-beta-strongly-typed-views-in-razor.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T00:43:38.300

我想你不能做这样的事情：

```
@{foreach( var item in Model){
   @Html.DisplayFor(modelItem => item.ID)
 } 
```

除非视图知道返回的类型模型是什么（.Net 自己无法解决这个问题似乎仍然很奇怪。所以我解决了问题并通过将其添加到视图中正确显示了 ID。

```
@model IEnumerable<GetEvents.Models.tblEvent> 
```

这适用于这个例子 - 我返回一个 table ，所以 Model 类型只是 table 的类。但这似乎不对 - 如果我想查询和连接表，那么模型类型会是什么？添加这个解决了我的问题，但如果有人对此有更好的答案，那么我会接受。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T00:27:51.560

从 Web 项目的根目录，您应该有一个名为`Views`. 在 views 文件夹中创建一个名为`Events`. 在`Events`文件夹中创建一个名为`Index`. 将您的标记和模板代码放在此文件中。

你是对的，视图不需要是强类型的。我发现这样做是个好主意，因为它提供了另一个编译时检查，但这不是必需的。

当您运行应用程序时，您将从根目录（通常是 home/index）导航到 Events/Index。在那里，您应该会看到视图中呈现的 20 个项目的列表。

# logging - logrotate：为什么在轮换后重新加载服务器配置

> ID：13665161
> 
> 赞同：1
> 
> 时间：2012-12-02T00:17:36.027
> 
> 标签：logging, configuration, logrotate, log-rotation

我看到 nginx 和 apache 在它们的日志轮换后都发送了某种形式的重新加载信号。为什么是这样？我想知道，因为我正在为我自己的应用程序设置它，并且想知道如果日志在没有更新的情况下轮换，应用程序是否会因某种原因挂起。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T00:31:35.893

这个问题有一个很好的答案：[How to Avoid apache reload when rolling logs?](https://unix.stackexchange.com/questions/47688/how-to-avoid-apache-reload-when-rotating-logs)

他们这样做是因为当他们打开日志文件进行写入时，他们会收到一个文件句柄。移动文件时句柄不会改变，这意味着他们会*认为*他们正在写入日志文件，但在移动文件后他们正在写入*错误*的日志文件。因此，当日志旋转时，它们会优雅地重新加载，以确保它们正在创建一个正在写入正确文件位置的新文件句柄。

如果你担心你的应用会发生什么，你应该[阅读更多关于 logrotate](http://linuxers.org/howto/howto-use-logrotate-manage-log-files)的内容，并特别注意`prerotate`and `postrotate`。您可以让您的程序在日志文件轮换时侦听重置日志句柄的信号，或者您可以按照第一个链接的建议执行操作，只需复制文件并截断​​原始文件，这样您就不会不得不担心它。

# javascript - 我不确定，但我想我正在尝试制作一个动态页面？

> ID：13665162
> 
> 赞同：-1
> 
> 时间：2012-12-02T00:18:18.287
> 
> 标签：javascript, python, post, dynamic, get

好的，所以我有这个来自 HTML Kickstart 的幻灯片。（参见[http://www.99lime.com/elements/](http://www.99lime.com/elements/)）它通过添加/删除“当前”类来遍历图像列表。

我正在尝试制作页面，以便每当图像更改时，页面上的评论和标签也会更改，而无需刷新页面。

我不确定如何在我的 app.py 中使用 GET/POST 方法来解决这个问题。或者是javascript/jQuery。谢谢。

[![小样](../Images/b46ea87bfe7d004efe8de88f5f49cbe4.png)](http://i45.tinypic.com/287f438.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T00:46:49.170

让我们假设用户 A 和用户 B 同时进入页面，看到其他人在他们之前写的 2 条评论，并且用户 1 和用户 2 都写了评论，并且他们都没有刷新页面而是一直盯着幻灯片。数据库中将有 4 条评论，但如果不使用 AJAX 加载新评论和标签，A 和 B 将看到 3 条评论，即之前的 2 条评论和他们自己的新评论。

*   如果这是可以接受的，则不需要使用 AJAX。

*   如果这不可接受，则需要使用 AJAX。

* * *

**如果您决定不使用 AJAX**，只需预先加载评论和其他内容即可根据您所在的幻灯片显示和隐藏它们。如果您更改包含注释的元素的类，并在显示第一张幻灯片时将其设为“onslide1”，在显示第二张幻灯片时将其设为“onslide2”，依此类推，您可以使用 CSS 规则来显示您想要的内容如下：

```
div.comments { display: none}
.slide1 div.comments {display: block}
.slide2 div.comments {display: block}
/*etc ...*/ 
```

更简单的解决方案？如果您可以将此信息合并到幻灯片中，事情可能会更容易。这意味着您可以使用一些简单的 HTML 代替纯图像，该 HTML 同时显示图像和评论以及您想要与幻灯片关联的所有其他内容。

* * *

要使用 Ajax 加载评论和其他内容，您需要同时在服务器端和客户端工作（确保在幻灯片更改时或之前执行 Ajax 调用（可能在您收到的那一刻准确更改幻灯片你的数据））。如果您确实走这条路并且需要进一步的帮助，那么最好提出一个单独的问题来说明您的决定以及您想要实现的目标。（这更像是一个寻求总体战略建议的问题。）

# java - 更新一行mysql表

> ID：13665165
> 
> 赞同：0
> 
> 时间：2012-12-02T00:18:50.827
> 
> 标签：java, mysql, sql, sql-update

我正在尝试更新我的表“总计”：

在 id = 1 的行中，我想将“days_left”的值更新为 47。

```
String values_to_update = "UPDATE total SET days_left = '47' where id = '1'";
Class.forName("com.mysql.jdbc.Driver");
Connection con = DriverManager.getConnection(url, "root", "Admin");
PreparedStatement ps = con.prepareStatement(values_to_update);
con.close(); 
```

为什么不更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T00:21:43.937

您需要执行准备好的语句。尝试：

```
ps.executeUpdate(); 
con.commit(); 
```

在关闭连接之前。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T00:22:29.307

至少，您需要通过以下方式执行 SQL 语句：`ps.executeUpdate();`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T00:23:24.750

做 ...

```
ps.executeUpdate() 
```

...在关闭连接之前。看起来您也不需要准备好的声明。一份声明将适用于您的情况。

# android - Android 位图 imageview 内存泄漏

> ID：13665169
> 
> 赞同：6
> 
> 时间：2012-12-02T00:19:50.350
> 
> 标签：android, memory-leaks, bitmap, imageview, out-of-memory

我将 4x4 imageView 放到一个活动（BoardActivity）中，用户可以通过单击它们来更改图像。使用 HTC Desire（Android 2.2.2），我在大约 30 分钟的密集使用中得到了 OOM（内存不足）-**编辑：此活动的第 16 次开始-**，但没有其他设备产生此问题（android 2.1 和 android 2.2.1 ）。是否有可能，我在位图/图像视图的使用上犯了一些错误，导致了这个错误？首先，我将所有资源 ID 加载到地图中：

```
private Map<String, Integer> imageResourceMap;
imageResourceMap = new HashMap<String, Integer>();
        imageResourceMap.put("a", R.drawable.a);
        imageResourceMap.put("b", R.drawable.b);
        imageResourceMap.put("c", R.drawable.c);
//... I store 55 drawable's resourceId in this map 
```

然后我调整每个图像的大小并将其保存到位图中，以 Map 表示：

```
private static Map<String, Bitmap> imageBitmap;

    private void loadBitmaps(int imagesSize) {

    for (String s : imageResourceMap.keySet()) {
        Bitmap tmp = getBitmapFromRes(imageResourceMap.get(s), imagesSize);
        imageBitmap.put(s, tmp);
    }
}

private Bitmap getBitmapFromRes(int resId, int imageSize) {
    Bitmap b = null;
    try {
        // Decode image size
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;

        InputStream fis = getResources().openRawResource(resId);
        BitmapFactory.decodeStream(fis, null, o);
        fis.close();

        int scale = 1;
        if (o.outHeight > imageSize || o.outWidth > imageSize) {
            scale = (int) Math.pow(2, (int) Math.round(Math.log(imageSize / (double) Math.max(o.outHeight, o.outWidth)) / Math.log(0.5)));
        }

        // Decode with inSampleSize
        BitmapFactory.Options o2 = new BitmapFactory.Options();
        o2.inSampleSize = scale;
        fis = getResources().openRawResource(resId);
        b = BitmapFactory.decodeStream(fis, null, o2);
        fis.close();
    } catch (IOException e) {
        e.printStackTrace();
    }
    return b;
} 
```

我将 imageViews 保存在一个数组中，并使用此函数初始化所有图像：

```
private static ImageView[][] imageViews;

private ImageView getImage(String name) {
        MyImageView item = new MyImageView(this, i, j, c + "");
        item.setImageBitmap(imageBitmap.get(name));
        item.setAdjustViewBounds(true);
        return item;
    } 
```

当我需要更改图像时，我只需更改其资源：

```
imageViews[i][j].setImageBitmap(imageBitmap.get("a")); 
```

在我完成活动之前，我回收了位图：

```
private void recycleImageBitmaps() {
    for (Bitmap b : imageBitmap.values()) {
        if (b != null) {
            b.recycle();
        }
    }

} 
```

在 AndroidManifest.xml 我声明了这个活动“singleTask”：

```
<activity android:name=".game.board.BoardActivity" android:launchMode="singleTask">
    </activity> 
```

在这个应用程序（游戏）中，我们多次重新打开这个活动......我做错了什么？这会导致内存不足错误吗？

**更正** 像这样更正了 getBitmapFromRes：

```
private Bitmap getBitmapFromRes(int resId, int imageSize) {
    Bitmap tmp = null;
    Bitmap b = null;
    try {
        // Decode image size
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;

        InputStream fis = getResources().openRawResource(resId);
        tmp = BitmapFactory.decodeStream(fis, null, o);
        fis.close();

        int scale = 1;
        if (o.outHeight > imageSize || o.outWidth > imageSize) {
            scale = (int) Math.pow(2, (int) Math.round(Math.log(imageSize / (double) Math.max(o.outHeight, o.outWidth)) / Math.log(0.5)));
        }

        // Decode with inSampleSize
        BitmapFactory.Options o2 = new BitmapFactory.Options();
        o2.inSampleSize = scale;
        fis = getResources().openRawResource(resId);
        b = BitmapFactory.decodeStream(fis, null, o2);
        fis.close();
    } catch (IOException e) {
        e.printStackTrace();
    }finally{
        if(tmp != null){
            tmp.recycle();
            tmp = null;
        }
    }
    return b;
} 
```

HTC 在此活动的第 11 次开始时仍然崩溃。

**编辑：** 此活动（BoardActivity）从具有 4 个 imageButton 的 Activity（MenuActivity）启动，并且位于 Tabhost 活动中。imageButtons 声明如下所示：

```
<ImageButton
    android:id="@+id/game_menu_CreateButton"
    android:layout_width="120dip" 
    android:layout_height="120dip"
    android:layout_alignRight="@+id/textView1"
    android:layout_alignTop="@+id/textView1"
    android:background="@drawable/create" 
    android:layout_marginRight="1sp"
    android:layout_marginTop="10sp"
     /> 
```

当我从MenuActivity 启动BoardActivity 时，我不会调用`finish()`MenuActivity，当我调用`finish()`BoardActivity 时，我不会启动新的intent，所以它只是返回到已经打开的MenuActivity。而这16轮，我拿到了OOM。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-02T10:21:47.303

要减少内存，您可以尝试以下方法：

*   将可绘制对象转换为位图后，您可以将 imageResourceMap 设置为 null。这将卸载 3 个可绘制对象。
*   避免存储对 imageViews 的引用。即使从 UI 中删除它们，您也可能会存储 imageViews
*   更频繁地回收位图。而不仅仅是 onDestroy，只要你知道一个位图没有被使用，你就可以回收它。

编辑：基于评论中的对话： BitmapFactory.decodeStream(fis, null, o) 返回的位图未分配给任何变量，因此不会被回收。Android 2.2 和 2.3 在这行会有漏洞。

# shell - zsh 运行存储在变量中的命令？

> ID：13665172
> 
> 赞同：20
> 
> 时间：2012-12-02T00:21:17.250
> 
> 标签：shell, scripting, zsh

在 shell 脚本（在 .zshrc 中）中，我试图执行一个命令，该命令作为字符串存储在另一个变量中。网络上的各种消息来源说这是可能的，但我没有得到我期望的行为。可能`~`是命令开头的 ，也可能是使用`sudo`，我不确定。有任何想法吗？谢谢

```
function update_install()
{
    # builds up a command as a string...
    local install_cmd="$(make_install_command $@)"
    # At this point the command as a string looks like: "sudo ~some_server/bin/do_install arg1 arg2"
    print "----------------------------------------------------------------------------"
    print "Will update install"
    print "With command: ${install_cmd}"
    print "----------------------------------------------------------------------------"
    echo "trying backticks"
    `${install_cmd}`
    echo "Trying \$()"
    $(${install_cmd})
    echo "Trying \$="
    $=install_cmd
} 
```

输出：

```
Will update install
With command: sudo ~some_server/bin/do_install arg1 arg2

trying backticks
update_install:9: no such file or directory: sudo ~some_server/bin/do_install arg1 arg2
Trying $()
update_install:11: no such file or directory: sudo ~some_server/bin/do_install arg1 arg2
Trying $=
sudo ~some_server/bin/do_install arg1 arg2: command not found 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-12-02T00:27:22.450

使用`eval`：

```
eval ${install_cmd} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-02T00:32:58.760

正如第 3.1 节中所解释的[那样“为什么`$var`where`var="foo bar"`不符合我的预期？” 在 Z-Shell FAQ](http://zsh.sourceforge.net/FAQ/zshfaq03.html)中，您可以使用`shwordsplit`shell 选项告诉`zsh`您希望它用空格分隔变量并将它们视为多个单词。同一页面还讨论了您可能要考虑的替代方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-20T17:31:39.907

我相信您在这里有两个问题 - 第一个是您`install_cmd`被解释为单个字符串，而不是`sudo`带有 3 个参数的命令 ( )。

您的最后一次尝试`$=install_cmd`实际上确实正确地解决了该问题（尽管我会这样写`${=install_cmd}`），但是您遇到了第二个问题：`~some_server/bin/do_install`不是已知命令。这是因为出于安全原因，`sudo`它不会像您想要的那样解释；`~`它需要使用 shell 来评估它的参数（或者为 做一些特殊情况`~`，这实际上与`sudo`' 无关），这会打开一整罐蠕虫，可以理解的是，`sudo`它会尽力避免。

这也是它起作用的原因`eval ${install_cmd}`- 因为这实际上将整个字符串视为要评估的东西，可能包含多个命令（例如，如果`install_cmd`包含`echo foo; sudo rm -rf /`它会很乐意擦除您的系统）。

您必须决定是否要`install_cmd`允许完整的 shell 语义，包括变量插值、路径扩展、多个命令等，或者是否应该只扩展单词并将它们作为单个命令运行。

# python - 删除范围桶中的数据

> ID：13665182
> 
> 赞同：4
> 
> 时间：2012-12-02T00:22:46.770
> 
> 标签：python

我有两个维度数据存储在一个排序的元组列表中，如下所示：

```
data = [(0.1,100), (0.13,300), (0.2,10)... 
```

每个元组中的第一个值，即 X 值，仅在元组列表中出现一次。换句话说，0.1 等只能有一个值。

然后我有一个排序的桶列表。桶定义为包含范围和 id 的元组，如下所示：

```
buckets = [((0,0.14), 2), ((0.135,0.19), 1), ((0.19,0.21), 2), ((0.19,0.24), 3)... 
```

范围是相对于 X 轴的。所以，id 2 上面有两个桶，id 1 和 3 分别只有一个。id 2 的第一个桶的范围是 0 到 0.14。请注意，存储桶可以重叠。

所以，我需要一种算法，将数据放入桶中，然后将分数相加。对于上面的数据，结果将是：

```
1:0
2:410
3:10 
```

注意每条数据是如何被与 id 2 关联的存储桶捕获的，因此它得到 score `100+300+10=410`。

我该如何编写算法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T01:13:39.343

将每个桶定义（标签范围）转换为可调用的 - 给定数据元组 - 将增加桶总数。桶值存储在一个简单的字典中。如果您想提供更简单的 api，您可以轻松地将这个概念封装在一个类中。

```
def partition(buckets, bucket_definition):
    """Build a callable that increments the appropriate buckets with a value"""

    lower, upper = bucket_definition[0]
    key = bucket_definition[1]

    def _partition(data):
        x, y = data
        # Set a default value for this key
        buckets.setdefault(key, 0)

        if lower <= x <= upper:
            buckets[key] += y

    return _partition

bucket_definitions = [
    ((0, 0.14), 2),
    ((0.135, 0.19), 1),
    ((0.19, 0.21), 2),
    ((0.19, 0.24), 3)
]

data = [(0.1, 100), (0.13, 300), (0.2, 10)]

# Holder for bucket labels and values
buckets = {}

# For each bucket definition (range, label) build a callable
partitioners = [partition(buckets, definition) for definition in bucket_definitions]

# Map each callable to each data tuple provided
for partitioner in partitioners:
    map(partitioner, data)

print(buckets) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T01:27:29.060

这会从您的测试数据中产生所需的输出：

```
data = [(0.1,100), (0.13,300), (0.2,10)]
buckets = [((0,0.14), 2), ((0.135,0.19), 1), ((0.19,0.21), 2), ((0.19,0.24), 3)]

totals = dict()

for bucket in buckets:
    bucket_id = bucket[1]
    if bucket_id not in totals:
        totals[bucket_id] = 0
    for data_point in data:
        if data_point[0] >= bucket[0][0] and data_point[0] <= bucket[0][1]:
            totals[bucket_id] += data_point[1]

for key in sorted(totals):
    print("{}: {}".format(key, totals[key])) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T00:52:15.297

试试这个代码：

```
data = [(0.1,100), (0.13,300), (0.2,10)]
buckets = [((0,0.14), 2), ((0.135,0.19), 1), ((0.19,0.21), 2), ((0.19,0.24), 3)]

def foo(tpl): ## determine the buckets a data-tuple is enclosed by list of IDs
    x, s = tpl
    lst = []
    for bucket in buckets:
        rnge, iid = bucket
        if x>rnge[0] and x<rnge[1]: lst.append(iid)
    return lst

data = [[dt, foo(dt)] for dt in data]

scores_dict = {}
for tpl in data:
    score = tpl[0][1]
    for iid in tpl[1]:
        if iid in scores_dict: scores_dict[iid]+=score
        else:                  scores_dict[iid] =score

for key in scores_dict:
    print key,":",scores_dict[key] 
```

此代码段导致：

```
2 : 410
3 : 10 
```

如果未打印任何存储桶 ID，则该存储桶中没有 X 值或总和为零。

# java - Java中整数数组的ArrayList

> ID：13665188
> 
> 赞同：9
> 
> 时间：2012-12-02T00:23:31.693
> 
> 标签：java, arraylist

每个人。

我刚接触Java，我正在尝试编写一个简单的游戏，其中敌人在网格上追逐玩家。我正在使用来自维基百科寻路页面的简单算法进行寻路。这涉及创建两个列表，每个列表项包含 3 个整数。这是我正在尝试构建和显示这样一个列表的测试代码。

当我运行以下代码时，它会为 ArrayList 中的每个数组打印出相同的数字。为什么这样做？

```
public class ListTest {

public static void main(String[] args) {
    ArrayList<Integer[]> list = new ArrayList<Integer[]>(); 
    Integer[] point = new Integer[3];
    for (int i = 0; i < 10; i++) {
        for (int j = 0; j < 3; j++) {
            point[j] = (int)(Math.random() * 10);
        }            

        //Doesn't this line add filled Integer[] point to the 
        //end of ArrayList list?
        list.add(point);      

        //Added this line to confirm that Integer[] point is actually 
        //being filled with 3 random ints.
        System.out.println(point[0] + "," + point[1] + "," + point[2]);
    }
    System.out.println();

    //My current understanding is that this section should step through 
    //ArrayList list and retrieve each Integer[] point added above. It runs, but only 
    //the values of the last Integer[] point from above are displayed 10 times.
    Iterator it = list.iterator();
    while (it.hasNext()) {
        point = (Integer[])it.next();  
        for (int i = 0; i < 3; i++) {
            System.out.print(point[i] + ",");
        } 
            System.out.println(); 
        } 
    }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-03T00:18:21.297

首先，其他几个答案具有误导性和/或不正确。请注意，数组是一个对象。因此，无论数组本身是否包含原始类型或对象引用，您都可以将它们用作列表中的元素。

接下来，将变量声明为`List<int[]> list`优于将其声明为`ArrayList<int[]>`。这使您可以轻松地更改`List`为 a`LinkedList`或其他一些实现，而不会破坏其余代码，因为它保证只使用`List`接口中可用的方法。有关更多信息，您应该研究“接口编程”。

现在回答您的真正问题，该问题仅作为评论添加。让我们看一下您的几行代码：

```
Integer[] point = new Integer[3]; 
```

`Integer`显然，这一行创建了一个 s 数组。

```
for (int i = 0; i < 10; i++) {
    for (int j = 0; j < 3; j++) {
        point[j] = (int)(Math.random() * 10);
    }            

    //Doesn't this line add filled Integer[] point to the 
    //end of ArrayList list?
    list.add(point);
    //...
} 
```

在这里，您将值分配给数组的元素，然后将对该数组的**引用**添加到您的`List`. 每次循环迭代时，您都会为同一数组分配新值**，并将对同一数组的****另一个引用**添加到`List`. 这意味着`List`有 10 个对已被重复写入**的同一数组的引用。**

迭代器它 = list.iterator(); while (it.hasNext()) { point = (Integer[])it.next(); for (int i = 0; i < 3; i++) { System.out.print(point[i] + ","); } System.out.println(); } }

现在这个循环打印出**相同的数组**10 次。数组中的值是在前一个循环结束时设置的最后一个值。

要解决这个问题，您只需要确保创建 10 个**不同的**数组。

最后一个问题：如果您声明`it`为`Iterator<Integer[]> it`（或`Iterator<int[]> it`），则不需要强制转换的返回值`it.next()`。事实上，这是首选，因为它是类型安全的。

最后想问一下`int`，每个数组中的s代表什么？您可能想要重新审视您的程序设计并创建一个包含这三个`int`s 的类，或者作为数组或作为三个成员变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T00:30:23.820

你在这里有一个额外的`)`：

```
element = (int[])it.next()); //with the extra parenthesis the code will not compile 
```

应该：

```
element = (int[])it.next(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-02T00:35:54.487

我强烈建议将 3 个数字的整数数组包含在一个有意义的类中，该类将保存、显示和控制 3 个整数的数组。

然后，在您的主目录中，您可以拥有该类对象的不断增长的 ArrayList。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-02T00:28:58.690

除了另一个答案中的问题之外，你 cal it.next() 两次，这导致迭代器向前移动两次，显然这不是你想要的。像这样的代码：

```
element = (int[])it.next()); 
String el = (String)element; 
```

但实际上，我没有看到你使用过 el。虽然是合法的，但似乎毫无意义。

# bash - 是否可以同时运行两个循环？

> ID：13665196
> 
> 赞同：3
> 
> 时间：2012-12-02T00:24:13.627
> 
> 标签：bash, shell

所以我在我的网络安全课上有一个项目来制作一个 bash 游戏。我喜欢制作一款中世纪的游戏，你可以在其中建造农场和矿山来获取资源。嗯，我喜欢做这样的东西。为此，我必须运行两个 while 循环。像这样

```
while [ blah ]; do

    blah

done

while [ blah ]; do

    blah    

done 
```

是否可以同时运行两个while循环，如果我写错了怎么写？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-02T00:36:21.907

如果你`&`在每个之后加上一个`done`like `done&`，你将在后台创建运行 while 循环的新进程。但是，您必须小心意识到这意味着什么，因为 bash 脚本将在创建这些新进程后继续执行命令，即使它们尚未完成。您可能会使用该`wait`命令来防止这种情况发生，但我不太习惯使用它，所以我无法保证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T00:30:32.090

是的，但是您必须为要在其中执行的每个 while 循环分叉一个新进程。从技术上讲，它们不会同时运行（除非您考虑多个内核，但这甚至没有保证）。

下面是如何使用 bash 分叉多个进程的链接。

[分叉/多线程进程 | 重击](https://stackoverflow.com/questions/1455695/forking-multi-threaded-processes-bash)

既然你提到这是一个学校项目，我就停在这里，以免我帮助你“不学习”。

R

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-01T18:08:58.160

首先，将循环包装成一个函数，然后分叉它。当您想要拆分一个进程时会这样做，例如，如果我正在处理一个包含 160,000 多行的*CSV*，那么单个进程/“线程”将需要几个小时。如果您将循环包装到一个函数中并简单地分叉它，您将运行 x 数量的进程，然后添加等待/杀死已失效的进程循环，您就完成了。你在看什么。

> 带有嵌套循环的while循环：

```
 function jobA() { 
       while read STR;
        do
            touch $1_temp
               key=$(IFS="|";set -- $STR; echo $1)                  
                for each in ${blah[@]};
                    do
                        #echo "$each"

                    done

        done <$1;
    }

  for i in ${blah[@]};  
            do 
            echo "$i"

            $(jobRDtemp $i) &

            child_pid=$!
            parent_pid=$$
            PIDS+=($child_pid)

            echo "forked process $child_pid with parent $parent_pid"
        done

            for pid in ${PIDS[@]};
                do
                    wait $pid
                done
                    echo "all jobs done"
                    sleep 1 
```

现在包装好了，这里是一个 FORKED 循环的例子。这意味着您将在后台运行并行进程，WAIT 将等待 ALL 完成后再继续。这对于某些类型的脚本很重要。

此外，不要使用上面介绍的 C 风格编写的嵌套 FOR 循环，例如：

```
for (( i = 1; i <= 5; i++ ))      ### Outer for loop ### 
```

> 这很慢。使用这种类型：

```
for each in ${blah[@]};
                    do
                        #echo "$each"
                            if [ "$key" = "$each" ]; then
                                # echo  "less than $keyValNeed..."
                                echo $STR >> $1_temp
                            fi 
                    done 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T00:31:57.077

您还可以使用嵌套的 for 循环

```
for (( i = 1; i <= 5; i++ ))      ### Outer for loop ###
do

    for (( j = 1 ; j <= 5; j++ )) ### Inner for loop ###
    do
         echo -n "$i "
    done

    echo "" #### print the new line ###

done 
```

编辑：我以为您的意思是嵌套循环，但再次阅读您说“同时”运行两个循环。不过，我会在这里留下我的答案。

# java - How to prevent TextPad from creating temporary batch files when running Java?

> ID：13665199
> 
> 赞同：2
> 
> 时间：2012-12-02T00:24:46.483
> 
> 标签：java, batch-file, textpad

This is my first post here, so, please let me know if I posted this question in the wrong place or something. Thanks.

So, I recently reinstalled the Java SDK and TextPad after deciding that I wanted to get back into Java programming.

I compiled and ran a test Java code to see if everything got installed correctly. All seemed well until I happened to take a look at the folder containing my .java and .class files. I noticed that a bunch of batch files had populated that folder while I was messing around with my test code. I don't recall these appearing back when I was learning Java and using an older version of TextPad.

[![TextPad Batch File Spam](../Images/8c4ad00e6efa10f5d2880aae6226b6b0.png)](https://i.stack.imgur.com/2isfW.png)

Is this something that TextPad does now? Is there a way to prevent this from happening? Or, I suppose a better question would be, does this happen to anyone else or is this only happening to me? If it's only happening to me, then what did I do wrong during my installation of the Java SDK and TextPad to cause this to happen?

I mean, once I exit out of TextPad, the batch files get deleted, so, it seems that they're temporary files. However, like I previously mentioned, I don't recall this happening back when I was learning Java and using an older version of TextPad, so, I would like some insight into preventing these batch files from being created every time I run a compiled Java code through TextPad, if possible. They're kind of annoying, in my opinion.

**TextPad Info:**

```
Version 6.1.3 (32-bit) 
```

**Java Info:**

```
Version 1.7.0_09 (64-bit), Java(TM) SE Runtime Environment (build 1.7.0_09-b05), Java HotSpot(TM) 64-Bit Server VM (build 23.5-b02, mixed mode) 
```

**OS:**

```
Windows 7 (64-bit) 
```

**Content of one of those batch files:**

```
@ECHO OFF
C:
CD "\Users\<PATH of class file>"
"C:\Program Files\Java\jdk1.7.0_09\bin\java.exe" -classpath . test
PAUSE 
```

Thanks in advance. :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-28T20:46:33.890

您可以创建一个仅对 TextPad 安装文件夹（或正在创建临时文件的位置）具有读取权限的本地用户，然后以该用户身份运行 TextPad。

创建用户后，将 TextPad 快捷方式目标修改为以下内容：

```
runas /user:TextPadReadOnly "C:\path\to\TextPad.exe" 
```

TextPad 很可能之后甚至不会运行，但如果它运行它应该做你想要的......除了重新编程 TextPad，我怀疑还有其他方法可以解决它（如果没有设置来禁用此行为，这我假设你已经寻找）。

# windows-8 - 在 Windows 8 Metro 应用程序中使用动态磁贴

> ID：13665207
> 
> 赞同：0
> 
> 时间：2012-12-02T00:25:40.253
> 
> 标签：windows-8, microsoft-metro

> **可能重复：**
> [无法在 Windows 8 应用程序中创建动态磁贴](https://stackoverflow.com/questions/10279417/unable-to-create-live-tile-inside-windows-8-application)

是否可以在页面内使用动态磁贴？我知道如何为开始菜单配置磁贴，但我不知道如何在我的应用程序中获得类似的效果。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T00:44:25.733

您可以在应用程序中创建效果，但用于开始屏幕的特定机制在应用程序的上下文中不能直接使用。

[从 StackOverflow 的另一篇文章中](https://stackoverflow.com/questions/10279417/unable-to-create-live-tile-inside-windows-8-application)，您可以重用/移植 Windows Phone 7 工具包中的代码。Windows 应用商店中也有许多应用程序（搜索“磁贴”）提供设计磁贴的界面，其中一些可能包含类似的功能。

同样[从这篇文章](https://stackoverflow.com/questions/13634759/where-to-start-on-a-tile-view)中，看起来 Telerik 可能有一个解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T08:40:55.880

您可以使用[Callisto](https://github.com/timheuer/callisto)附带的**LiveTile**控件。

# java - String.split() 通过两种模式之一

> ID：13665208
> 
> 赞同：2
> 
> 时间：2012-12-02T00:25:44.200
> 
> 标签：java, regex, parsing, split

我想将这个字符串：315-045/10-20 拆分为这个数组：["315","045","10","20"]，这意味着它应该围绕每次出现的 '/' 或 ' 进行拆分-'。是否可以通过一次调用 split() 函数来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T00:27:01.537

您可以使用同时接受斜杠和破折号的正则表达式。

```
String input = "315-045/10-20";
String[] output = input.split("[/-]"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-02T00:28:38.610

您也可以使用非数字`split`模式：

```
"315-045/10-20".split("\\D"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-02T00:27:32.327

你可以用这个...

```
split("[-/]") 
```

# c++ - 我想输入文本文档中列出的电话号码

> ID：13665211
> 
> 赞同：-1
> 
> 时间：2012-12-02T00:26:14.700
> 
> 标签：c++, string

我自己编写了整个程序，该程序假设模拟手机上的来电。我已经修复了程序上的每个错误，但我从来没有能够成功地将数字逐行拉入我制作的队列中。我的问题是我使用 getline 从文本中画线的正确方法是什么？这是我的程序。

```
#include <string>
#include <queue>
#include <deque>
#include <iostream>
#include <fstream>
#include <stack>
using namespace std;

class cell
{
    public:
        cell();
        void upload( string left );//Insert in order.
        void printnew();//Print call just recieved.
        void printlater();//Print calls for later.
        void decidenew();// Prompts user to decide what to do with recent calls.
        void decidelater();// Prompts user to decide what to do with call back numbers.
        void correctionnew();//Corrects the amount of numbers in new calls list.
        void correctionlater();//Correxts the amount of number in the call back list.

    private:
        queue<string> N;
        queue<string> O;
        queue<string> T;
        stack<string> Tem;

};

int main()
{
    string left;
    int i=1;
    cell num;
    num.upload( left );
    int n=1;

    while(i != 3)
    {
            cout << "Please check for recent calls." << endl;
            num.upload(left);
            cout << "This is the main menu and here are your options:" << endl;
            cout << "Press 1 to view your recent calls" << endl;
            cout << "Press 2 to view your call back list" << endl;
            cout << "Press 3 to turn off cellphone" << endl;

            cin >> i;
            if(i = 1)
            {
                 num.printnew();
                 num.decidenew();
                 num.correctionnew();
                 num.correctionlater();
            }
            if(i = 2)
            {
                 num.printlater();
                 num.decidelater();
            }
    }

    system("Pause");
    return 0;
}

void cell::printnew()
{
     cout << "Here is the list of the latest callers:" << endl;
     while(N.empty())
     {
          cout << N.front();
          T.push(N.front());
          N.pop();
     }

     while(T.empty())
     {
          N.push(T.front());
          T.pop();
     }
}

void cell::printlater()
{
     cout << "Here is the list of your call back list:" << endl;
     while(!O.empty())
     {
          cout << O.front();
          T.push(O.front());
          O.pop();
     }

     while(!T.empty())
     {
          O.push(T.front());
          T.pop();
     }
}
void cell::decidenew()
{
     int p=0;
     while(!N.empty() || p != 4)
     {
         cout << "What would you like to do with" << N.front() << "?" << endl;
         cout << "You can:" << endl;
         cout << "Press 1 to call back." << endl;
         cout << "Press 2 to ignore the call." << endl;
         cout << "Press 3 to Send to call back list." << endl;
         cout << "Press 4 to return to the main menu." << endl;
         cin >> p;

         if(p = 1)
         {
             N.pop();
         }
         else if(p = 2)
         {
             N.pop();
         }
         else if(p = 3)
         {
             O.push(N.front());
             N.pop();
             while(!O.empty() || N.front() != O.front())
             {
                 T.push(O.front());
                 O.pop();
             }
             if (N.front() != O.front())
             {
                 O.push(N.front());
                 N.pop();
             }
             while(!O.empty())
             {
                 T.push(O.front());
                 O.pop();
             }
             while(!T.empty())
             {
                 O.push(T.front());
                 T.front();
             }              
         }
         else if(p = 4)
         {
         }
         else
         {
             cout << "That is an incorrect input, please try again." << endl;
         }

     }
}
void cell::decidelater()
{
     int dummy = 0;
     while(!O.empty() || dummy != 4 )
     {
         cout << "What would you like to do with" << O.front() << "?" << endl;
         cout << "You can:" << endl;
         cout << "Press 1 to call back." << endl;
         cout << "Press 2 to delete number." << endl;
         cout << "Press 3 to keep and call later." << endl;
         cout << "Press 4 to go back to main menu." << endl;
         cin >> dummy;

         if( dummy = 1)
         {
             O.pop();
         }
         else if( dummy = 2)
         {
              O.pop();
         }
         else if( dummy = 3)
         {
              T.push(O.front());
              O.pop();
         }
         else if( dummy = 4)
         {
         }
         else
         {

             cout << "That is an incorrect input, please try again." << endl;
         }
         while(!T.empty())
         {
             O.push(T.front());
             T.pop();
         }
     }
}
void cell::upload( string left)
{
    int g = 0;
    string item;
    fstream myfile;
    myfile.open("CALLS.txt");
    while(!myfile.eof || g != 3)
    {
        getline( myfile, left);
        while(!N.empty() || left != N.front())
        {
            T.push(N.front());
            N.pop();
        }
        if(left != N.front())
        {
        N.push(left);
        }
        while(!N.empty())
        {
            T.push(N.front());
            N.pop();
        }
        while(!T.empty())
        {
           N.push(T.front());
           T.pop();
        }

        g++;
    }
    while(!N.empty())
    {
        Tem.push(N.front());
        N.pop();
    }
    while(!Tem.empty())
    {
        N.push(Tem.top());
        Tem.pop();
    }
    g=0;
}
void cell::correctionnew()
{
     int l = 0;
     while(!N.empty())
     {
         T.push(N.front());
         N.pop();
     }
     while(!T.empty() || l != 8)
     {
         N.push(T.front());
         T.pop();
         l++;
     }
}
void cell::correctionlater()
{
     int m = 0;
     while(!O.empty())
     {
         T.push(O.front());
         O.pop();
     }
     while(!T.empty() || m != 3)
     {
         O.push(T.front());
         T.pop();
         m++;
     }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T00:48:29.690

我认为这段代码不应该编译。如果它确实编译，问题显然是不应该编译的：

```
while (!myfile.eof || g != 3) 
```

这一行有两个问题，一个是阻止它编译（你可能打算写`myfile.eof()`；注意额外的括号），另一个是语义（假设添加了缺少的括号）：流无法提前知道试图做什么被阅读。因此，**总是**需要在尝试读取之后检查读取是否成功。这条线应该看起来像这样：

```
while (g != 3 && std::getline(myfile, left)) 
```

# iphone - iOS 应用程序无法以其他语言运行

> ID：13665226
> 
> 赞同：1
> 
> 时间：2012-12-02T00:28:53.317
> 
> 标签：iphone, ios, ipad, localization

我的 iOS 应用首先是德语和英语。由于这只是一个错误，我删除了英文本地化。不知何故，如果我将 iOS 模拟器中的语言更改为英语而不是它会加载甚至不再存在的旧情节提要。我清理了文件夹，现在只有一个基本故事板。虽然我清理了项目，但应用程序在启动后仍然崩溃（因为它正在加载以前应用程序版本的旧故事板（我在 1.1 中删除了英文本地化，现在在 1.2 中它仍然加载 1.0 故事板）。这真的很奇怪，怎么能我实现了应用程序总是使用相同的故事板，无论哪种语言？我已经删除了英文本地化！

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T01:34:28.180

根据我以前的经验，如果您要本地化应用程序，则需要保留英文应用程序。因为如果设备未设置为您支持的语言，它将默认为英语。
（您是否注意到在设置应用程序中英语始终是第二选择，并且您无法将桌面上的顺序更改为默认为英语之前的其他内容）
因此，如果您计划仅支持一种语言，请删除所有本地化到你的申请。因为否则它将默认为不存在的资产并崩溃。

那将是我尝试的最佳客人。

* * *

在所有这些更改之后，您是否删除了设备上的应用程序，并且可能需要进行清理。我注意到被删除的文件（尤其不是代码文件）倾向于围绕可执行文件放置。
如果你得到文件（1）`b.xml`和（2）`fr.lproj/b.xml`，即使设备是法语的，法语一（2）也不会被使用。系统将首先看到 (1) 并认为该文件没有本地化。

至于“失去”你的德语 Xib。如果您从您的文件中取出一个副本`de.lproj`（并将该副本放在文件系统中的一个目录中，它应该可以工作）

# css - 在语言之间切换时的字体系列（即英语 - 法语）

> ID：13665229
> 
> 赞同：0
> 
> 时间：2012-12-02T00:29:02.867
> 
> 标签：css, multilingual, font-family

我在一个网站上实现了一个语言插件，你知道排序点击它会将所有内容更改为阿拉伯语、俄语……等等（我知道现代浏览器已经为此内置了功能，但我们选择了这种方式。 )

我在徘徊的是我们如何处理字体，如果我们的正常网站正在使用

```
font-family: "Century Gothic", CenturyGothic, AppleGothic, sans-serif; 
```

如果它无法以上述字体呈现新文本，它会退回到浏览器默认值吗？

或者有没有办法在翻译完成后指定字体？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T07:36:00.213

当页面上的字符无法在适用`font-family`列表中首先列出的字体中找到时，浏览器应进一步扫描列表，并最终在需要时以与浏览器相关的方式回退到扫描系统中的其他字体。但是，众所周知，浏览器（尤其是 IE）在这里会失败，此外，该过程可能会导致混合字体，甚至是单个单词中来自不同字体的字符。

因此，您应该做出合理的努力，以确保`font-family`列表中列出的任何字体对于页面文本来说都是足够的，至少对于字母来说（特殊符号通常可以从不同的字体中挑选出来，而不会造成风格混乱）。对于翻译成“任何”语言的小部件来说，这几乎是不可能的。

我想你指的是使用像谷歌网站翻译这样的服务。除了出于商业目的产生通常不好的翻译外，它还可能会弄乱页面的标记，也可能会影响字体问题。例如，它似乎插入了相当无意义`font`的标记，这可能会阻止您的字体设置正常工作。此外，它没有正确设置`lang`翻译结果中的属性（但保留了原始`lang`属性！），因此您甚至不能期望浏览器正确使用其特定于语言的默认字体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T10:30:58.407

当您说“我知道现代浏览器为此内置了功能，但我们选择这样做”时，我不确定您指的是什么——浏览器并没有真正提供语言选择。

然而，我的团队开发了一个可重用的 JavaScript 库，它可以做到这一点，它也处理字体：

*   [https://github.com/wikimedia/jquery.uls](https://github.com/wikimedia/jquery.uls)
*   [https://github.com/wikimedia/jquery.webfonts](https://github.com/wikimedia/jquery.webfonts)

您可以使用它，也可以从中汲取灵感来实施。

# .htaccess - htaccess - 页面的更好的 url

> ID：13665231
> 
> 赞同：0
> 
> 时间：2012-12-02T00:29:18.573
> 
> 标签：.htaccess

我只是想为 SEO 更好地创建我的 url，它会在这里“ **/articles/4/** ”所以它变成“ **/articles/4/Array-be-better-with-it/** ”

现在看起来像这样；

```
RewriteRule ^artikler/(\d*)/$ /alt-artikler.php?id_artikler=$1 
```

我也尝试这样做；

```
RewriteRule ^artikler/([0-9]+)/?.*$ alt-artikler.php?$1 [L] 
```

我不知道我是如何做到这一点的，我在我的网址中这样写：

**/artikler/4/Array-blive-bedre-til-det/**

# android - 返回活动时不显示保存的数据

> ID：13665232
> 
> 赞同：0
> 
> 时间：2012-12-02T00:29:26.860
> 
> 标签：android, android-listview, android-sqlite

当我进入应用程序更深处的不同活动并按向上按钮返回原始活动时，不会显示使用 sqlite 存储的应用程序中保存的数据。

这是由 listactivity 膨胀的 listfragment。

请注意，我将查询放在 onCreate 中，以便在返回活动时再次执行它。

```
package com.example.sample;

import java.util.ArrayList;

import android.app.Activity;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.os.Build;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.Toast;

import com.actionbarsherlock.app.SherlockListFragment;

/**
 * A list fragment representing a list of Courses. This fragment also supports
 * tablet devices by allowing list items to be given an 'activated' state upon
 * selection. This helps indicate which item is currently being viewed in a
 * {@link CourseDetailFragment}.
 * <p>
 * Activities containing this fragment MUST implement the {@link Callbacks}
 * interface.
 */
public class CourseListFragment extends SherlockListFragment {

SQLiteDatabase db;
DbHelper dbHelper;
boolean bool = false;

private static String courseName;
ArrayList<String> courseItems;
ArrayAdapter<String> adapter;
/**
 * The serialization (saved instance state) Bundle key representing the
 * activated item position. Only used on tablets.
 */
private static final String STATE_ACTIVATED_POSITION = "activated_position";

/**
 * The fragment's current callback object, which is notified of list item
 * clicks.
 */
private Callbacks mCallbacks = sDummyCallbacks;

/**
 * The current activated item position. Only used on tablets.
 */
private int mActivatedPosition = ListView.INVALID_POSITION;

/**
 * A callback interface that all activities containing this fragment must
 * implement. This mechanism allows activities to be notified of item
 * selections.
 */
public interface Callbacks {
    /**
     * Callback for when an item has been selected.
     */
    public void onItemSelected(String id);
}

/**
 * A dummy implementation of the {@link Callbacks} interface that does
 * nothing. Used only when this fragment is not attached to an activity.
 */
private static Callbacks sDummyCallbacks = new Callbacks() {
    @Override
    public void onItemSelected(String id) {
    }
};

/**
 * Mandatory empty constructor for the fragment manager to instantiate the
 * fragment (e.g. upon screen orientation changes).
 */
public CourseListFragment() {
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    dbHelper = new DbHelper(getActivity());
    db = dbHelper.getReadableDatabase();
    courseItems = new ArrayList<String>();
    int layout = (Build.VERSION.SDK_INT >= 11) ? android.R.layout.simple_list_item_activated_1
            : android.R.layout.simple_list_item_1;
    adapter = new ArrayAdapter<String>(getActivity(), layout, courseItems);
    // TODO: replace with a real list adapter.
    setListAdapter(adapter);

    if (bool) {
        String[] projection = { DbHelper.COURSE_NAME };
        Cursor c = db.query(DbHelper.TABLE_NAME, projection, null, null,
                null, null, null);
        c.moveToFirst();

        while (c.moveToNext()) {
            courseName = c
                    .getString(c.getColumnIndex(DbHelper.COURSE_NAME));
            courseItems.add(courseName);
        }
        c.close();
        adapter.notifyDataSetChanged();
    }
}

@Override
public void onViewCreated(View view, Bundle savedInstanceState) {
    super.onViewCreated(view, savedInstanceState);

    // Restore the previously serialized activated item position.
    if (savedInstanceState != null
            && savedInstanceState.containsKey(STATE_ACTIVATED_POSITION)) {
        setActivatedPosition(savedInstanceState
                .getInt(STATE_ACTIVATED_POSITION));
    }
}

public void addCourse() {
    String[] projection = { DbHelper.COURSE_NAME };
    Cursor c = db.query(DbHelper.TABLE_NAME, projection, null, null, null,
            null, null);
    c.moveToFirst();

    while (c.moveToNext()) {
        courseName = c.getString(c.getColumnIndex(DbHelper.COURSE_NAME));
        courseItems.add(courseName);
    }
    c.close();
    adapter.notifyDataSetChanged();
    bool = true;
}

@Override
public void onAttach(Activity activity) {
    super.onAttach(activity);

    // Activities containing this fragment must implement its callbacks.
    if (!(activity instanceof Callbacks)) {
        throw new IllegalStateException(
                "Activity must implement fragment's callbacks.");
    }

    mCallbacks = (Callbacks) activity;
}

@Override
public void onDetach() {
    super.onDetach();

    // Reset the active callbacks interface to the dummy implementation.
    mCallbacks = sDummyCallbacks;
}

@Override
public void onListItemClick(ListView listView, View view, int position,
        long id) {
    super.onListItemClick(listView, view, position, id);
    // Notify the active callbacks interface (the activity, if the
    // fragment is attached to one) that an item has been selected.
    mCallbacks.onItemSelected(null);

}

@Override
public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    if (mActivatedPosition != ListView.INVALID_POSITION) {
        // Serialize and persist the activated item position.
        outState.putInt(STATE_ACTIVATED_POSITION, mActivatedPosition);
    }
}

/**
 * Turns on activate-on-click mode. When this mode is on, list items will be
 * given the 'activated' state when touched.
 */
public void setActivateOnItemClick(boolean activateOnItemClick) {
    // When setting CHOICE_MODE_SINGLE, ListView will automatically
    // give items the 'activated' state when touched.
    getListView().setChoiceMode(
            activateOnItemClick ? ListView.CHOICE_MODE_SINGLE
                    : ListView.CHOICE_MODE_NONE);
}

public void setActivatedPosition(int position) {
    if (position == ListView.INVALID_POSITION) {
        getListView().setItemChecked(mActivatedPosition, false);
    } else {
        getListView().setItemChecked(position, true);
    }

    mActivatedPosition = position;
}
} 
```

**为 onoviewstaterestored 更新了编辑**

```
package com.example.sample;

import java.util.ArrayList;

import android.app.Activity;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.os.Build;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.Toast;

import com.actionbarsherlock.app.SherlockListFragment;

/**
 * A list fragment representing a list of Courses. This fragment also supports
 * tablet devices by allowing list items to be given an 'activated' state upon
 * selection. This helps indicate which item is currently being viewed in a
 * {@link CourseDetailFragment}.
 * <p>
 * Activities containing this fragment MUST implement the {@link Callbacks}
 * interface.
 */
public class CourseListFragment extends SherlockListFragment {

SQLiteDatabase db;
DbHelper dbHelper;
boolean bool = false;

private static String courseName;
ArrayList<String> courseItems;
ArrayAdapter<String> adapter;
/**
 * The serialization (saved instance state) Bundle key representing the
 * activated item position. Only used on tablets.
 */
private static final String STATE_ACTIVATED_POSITION = "activated_position";

/**
 * The fragment's current callback object, which is notified of list item
 * clicks.
 */
private Callbacks mCallbacks = sDummyCallbacks;

/**
 * The current activated item position. Only used on tablets.
 */
private int mActivatedPosition = ListView.INVALID_POSITION;

/**
 * A callback interface that all activities containing this fragment must
 * implement. This mechanism allows activities to be notified of item
 * selections.
 */
public interface Callbacks {
    /**
     * Callback for when an item has been selected.
     */
    public void onItemSelected(String id);
}

/**
 * A dummy implementation of the {@link Callbacks} interface that does
 * nothing. Used only when this fragment is not attached to an activity.
 */
private static Callbacks sDummyCallbacks = new Callbacks() {
    @Override
    public void onItemSelected(String id) {
    }
};

/**
 * Mandatory empty constructor for the fragment manager to instantiate the
 * fragment (e.g. upon screen orientation changes).
 */
public CourseListFragment() {
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    dbHelper = new DbHelper(getActivity());
    db = dbHelper.getReadableDatabase();
    courseItems = new ArrayList<String>();
    int layout = (Build.VERSION.SDK_INT >= 11) ? android.R.layout.simple_list_item_activated_1
            : android.R.layout.simple_list_item_1;
    adapter = new ArrayAdapter<String>(getActivity(), layout, courseItems);
    // TODO: replace with a real list adapter.
    setListAdapter(adapter);
}

@Override
public void onViewCreated(View view, Bundle savedInstanceState) {
    super.onViewCreated(view, savedInstanceState);

    // Restore the previously serialized activated item position.
    if (savedInstanceState != null
            && savedInstanceState.containsKey(STATE_ACTIVATED_POSITION)) {
        setActivatedPosition(savedInstanceState
                .getInt(STATE_ACTIVATED_POSITION));
    }
}

@Override
public void onViewStateRestored(Bundle savedInstanceState) {
    super.onViewStateRestored(savedInstanceState);
    String[] projection = { DbHelper.COURSE_NAME };
    Cursor c = db.query(DbHelper.TABLE_NAME, projection, null, null, null,
            null, null);
    c.moveToFirst();

    while (c.moveToNext()) {
        courseName = c.getString(c.getColumnIndex(DbHelper.COURSE_NAME));
        courseItems.add(courseName);
    }
    c.close();
    adapter.notifyDataSetChanged();
}

@Override
public void onAttach(Activity activity) {
    super.onAttach(activity);

    // Activities containing this fragment must implement its callbacks.
    if (!(activity instanceof Callbacks)) {
        throw new IllegalStateException(
                "Activity must implement fragment's callbacks.");
    }

    mCallbacks = (Callbacks) activity;
}

@Override
public void onDetach() {
    super.onDetach();

    // Reset the active callbacks interface to the dummy implementation.
    mCallbacks = sDummyCallbacks;
}

@Override
public void onListItemClick(ListView listView, View view, int position,
        long id) {
    super.onListItemClick(listView, view, position, id);
    // Notify the active callbacks interface (the activity, if the
    // fragment is attached to one) that an item has been selected.
    mCallbacks.onItemSelected(null);

}

@Override
public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    if (mActivatedPosition != ListView.INVALID_POSITION) {
        // Serialize and persist the activated item position.
        outState.putInt(STATE_ACTIVATED_POSITION, mActivatedPosition);
    }
}

/**
 * Turns on activate-on-click mode. When this mode is on, list items will be
 * given the 'activated' state when touched.
 */
public void setActivateOnItemClick(boolean activateOnItemClick) {
    // When setting CHOICE_MODE_SINGLE, ListView will automatically
    // give items the 'activated' state when touched.
    getListView().setChoiceMode(
            activateOnItemClick ? ListView.CHOICE_MODE_SINGLE
                    : ListView.CHOICE_MODE_NONE);
}

public void setActivatedPosition(int position) {
    if (position == ListView.INVALID_POSITION) {
        getListView().setItemChecked(mActivatedPosition, false);
    } else {
        getListView().setItemChecked(position, true);
    }

    mActivatedPosition = position;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T01:50:29.350

我修好了它！我必须使用最初使用的 addCourse 方法更新列表视图，然后在每次活动恢复时使用 onViewStateRestored 方法更新它。就方法内部的内容而言，它们都包含相同的内容。

这是我的工作列表片段的代码。

```
package com.example.sample;

import java.util.ArrayList;

import android.app.Activity;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.os.Build;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.Toast;

import com.actionbarsherlock.app.SherlockListFragment;

/**
 * A list fragment representing a list of Courses. This fragment also supports
 * tablet devices by allowing list items to be given an 'activated' state upon
 * selection. This helps indicate which item is currently being viewed in a
 * {@link CourseDetailFragment}.
 * <p>
 * Activities containing this fragment MUST implement the {@link Callbacks}
 * interface.
 */
public class CourseListFragment extends SherlockListFragment {

SQLiteDatabase db;
DbHelper dbHelper;
boolean bool = false;

private static String courseName;
ArrayList<String> courseItems;
ArrayAdapter<String> adapter;
/**
 * The serialization (saved instance state) Bundle key representing the
 * activated item position. Only used on tablets.
 */
private static final String STATE_ACTIVATED_POSITION = "activated_position";

/**
 * The fragment's current callback object, which is notified of list item
 * clicks.
 */
private Callbacks mCallbacks = sDummyCallbacks;

/**
 * The current activated item position. Only used on tablets.
 */
private int mActivatedPosition = ListView.INVALID_POSITION;

/**
 * A callback interface that all activities containing this fragment must
 * implement. This mechanism allows activities to be notified of item
 * selections.
 */
public interface Callbacks {
    /**
     * Callback for when an item has been selected.
     */
    public void onItemSelected(String id);
}

/**
 * A dummy implementation of the {@link Callbacks} interface that does
 * nothing. Used only when this fragment is not attached to an activity.
 */
private static Callbacks sDummyCallbacks = new Callbacks() {
    @Override
    public void onItemSelected(String id) {
    }
};

/**
 * Mandatory empty constructor for the fragment manager to instantiate the
 * fragment (e.g. upon screen orientation changes).
 */
public CourseListFragment() {
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    dbHelper = new DbHelper(getActivity());
    db = dbHelper.getReadableDatabase();
    courseItems = new ArrayList<String>();
    int layout = (Build.VERSION.SDK_INT >= 11) ? android.R.layout.simple_list_item_activated_1
            : android.R.layout.simple_list_item_1;
    adapter = new ArrayAdapter<String>(getActivity(), layout, courseItems);
    // TODO: replace with a real list adapter.
    setListAdapter(adapter);
}

@Override
public void onViewCreated(View view, Bundle savedInstanceState) {
    super.onViewCreated(view, savedInstanceState);

    // Restore the previously serialized activated item position.
    if (savedInstanceState != null
            && savedInstanceState.containsKey(STATE_ACTIVATED_POSITION)) {
        setActivatedPosition(savedInstanceState
                .getInt(STATE_ACTIVATED_POSITION));
    }
}

@Override
public void onViewStateRestored(Bundle savedInstanceState) {
    super.onViewStateRestored(savedInstanceState);
    String[] projection = { DbHelper.COURSE_NAME };
    Cursor c = db.query(DbHelper.TABLE_NAME, projection, null, null, null,
            null, null);
    c.moveToFirst();

    while (c.moveToNext()) {
        courseName = c.getString(c.getColumnIndex(DbHelper.COURSE_NAME));
        courseItems.add(courseName);
    }
    c.close();
    adapter.notifyDataSetChanged();
}

public void addCourse() {
    String[] projection = { DbHelper.COURSE_NAME };
    Cursor c = db.query(DbHelper.TABLE_NAME, projection, null, null, null,
            null, null);
    c.moveToFirst();

    while (c.moveToNext()) {
        courseName = c.getString(c.getColumnIndex(DbHelper.COURSE_NAME));
        courseItems.add(courseName);
    }
    c.close();
    adapter.notifyDataSetChanged();
    bool = true;
}

@Override
public void onAttach(Activity activity) {
    super.onAttach(activity);

    // Activities containing this fragment must implement its callbacks.
    if (!(activity instanceof Callbacks)) {
        throw new IllegalStateException(
                "Activity must implement fragment's callbacks.");
    }

    mCallbacks = (Callbacks) activity;
}

@Override
public void onDetach() {
    super.onDetach();

    // Reset the active callbacks interface to the dummy implementation.
    mCallbacks = sDummyCallbacks;
}

@Override
public void onListItemClick(ListView listView, View view, int position,
        long id) {
    super.onListItemClick(listView, view, position, id);
    // Notify the active callbacks interface (the activity, if the
    // fragment is attached to one) that an item has been selected.
    mCallbacks.onItemSelected(null);

}

@Override
public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    if (mActivatedPosition != ListView.INVALID_POSITION) {
        // Serialize and persist the activated item position.
        outState.putInt(STATE_ACTIVATED_POSITION, mActivatedPosition);
    }
}

/**
 * Turns on activate-on-click mode. When this mode is on, list items will be
 * given the 'activated' state when touched.
 */
public void setActivateOnItemClick(boolean activateOnItemClick) {
    // When setting CHOICE_MODE_SINGLE, ListView will automatically
    // give items the 'activated' state when touched.
    getListView().setChoiceMode(
            activateOnItemClick ? ListView.CHOICE_MODE_SINGLE
                    : ListView.CHOICE_MODE_NONE);
}

public void setActivatedPosition(int position) {
    if (position == ListView.INVALID_POSITION) {
        getListView().setItemChecked(mActivatedPosition, false);
    } else {
        getListView().setItemChecked(position, true);
    }

    mActivatedPosition = position;
}
} 
```

# wordpress - 默认控件 - 如何禁用 controlNav 和 directionNav？

> ID：13665233
> 
> 赞同：4
> 
> 时间：2012-12-02T00:29:33.180
> 
> 标签：wordpress, flexslider

我正在尝试禁用 flexslider 中的 controlNav 和 directionNav 控件。我正在使用来自 themeforest 的上升主题，并且主题正在使用 jquery.flexslider-min.js。如果我使用完整的 jquery.flexslider.js，则可以使用以下选项禁用 controlNav 或 directionNav。

如何从我的 functions.php 或 jquery.flexsliders-min.js 禁用它？

```
$.flexslider.defaults = {
namespace: "flex-",             //{NEW} String: Prefix string attached to the class of every element generated by the plugin
selector: ".slides > li",       //{NEW} Selector: Must match a simple pattern. '{container} > {slide}' -- Ignore pattern at your own peril
animation: "fade",              //String: Select your animation type, "fade" or "slide"
easing: "swing",               //{NEW} String: Determines the easing method used in jQuery transitions. jQuery easing plugin is supported!
direction: "horizontal",        //String: Select the sliding direction, "horizontal" or "vertical"
reverse: false,                 //{NEW} Boolean: Reverse the animation direction
animationLoop: true,             //Boolean: Should the animation loop? If false, directionNav will received "disable" classes at either end
smoothHeight: false,            //{NEW} Boolean: Allow height of the slider to animate smoothly in horizontal mode  
startAt: 0,                     //Integer: The slide that the slider should start on. Array notation (0 = first slide)
slideshow: true,                //Boolean: Animate slider automatically
slideshowSpeed: 7000,           //Integer: Set the speed of the slideshow cycling, in milliseconds
animationSpeed: 600,            //Integer: Set the speed of animations, in milliseconds
initDelay: 0,                   //{NEW} Integer: Set an initialization delay, in milliseconds
randomize: false,               //Boolean: Randomize slide order

// Usability features
pauseOnAction: true,            //Boolean: Pause the slideshow when interacting with control elements, highly recommended.
pauseOnHover: false,            //Boolean: Pause the slideshow when hovering over slider, then resume when no longer hovering
useCSS: true,                   //{NEW} Boolean: Slider will use CSS3 transitions if available
touch: true,                    //{NEW} Boolean: Allow touch swipe navigation of the slider on touch-enabled devices
video: false,                   //{NEW} Boolean: If using video in the slider, will prevent CSS3 3D Transforms to avoid graphical glitches

// Primary Controls
controlNav: true,               //Boolean: Create navigation for paging control of each clide? Note: Leave true for manualControls usage
directionNav: true,             //Boolean: Create navigation for previous/next navigation? (true/false)
prevText: "Previous",           //String: Set the text for the "previous" directionNav item
nextText: "Next",               //String: Set the text for the "next" directionNav item

// Secondary Navigation
keyboard: true,                 //Boolean: Allow slider navigating via keyboard left/right keys
multipleKeyboard: false,        //{NEW} Boolean: Allow keyboard navigation to affect multiple sliders. Default behavior cuts out keyboard navigation with more than one slider present.
mousewheel: false,              //{UPDATED} Boolean: Requires jquery.mousewheel.js (https://github.com/brandonaaron/jquery-mousewheel) - Allows slider navigating via mousewheel
pausePlay: false,               //Boolean: Create pause/play dynamic element
pauseText: "Pause",             //String: Set the text for the "pause" pausePlay item
playText: "Play",               //String: Set the text for the "play" pausePlay item

// Special properties
controlsContainer: "",          //{UPDATED} jQuery Object/Selector: Declare which container the navigation elements should be appended too. Default container is the FlexSlider element. Example use would be $(".flexslider-container"). Property is ignored if given element is not found.
manualControls: "",             //{UPDATED} jQuery Object/Selector: Declare custom control navigation. Examples would be $(".flex-control-nav li") or "#tabs-nav li img", etc. The number of elements in your controlNav should match the number of slides/tabs.
sync: "",                       //{NEW} Selector: Mirror the actions performed on this slider with another slider. Use with care.
asNavFor: "",                   //{NEW} Selector: Internal property exposed for turning the slider into a thumbnail navigation for another slider

// Carousel Options
itemWidth: 0,                   //{NEW} Integer: Box-model width of individual carousel items, including horizontal borders and padding.
itemMargin: 0,                  //{NEW} Integer: Margin between carousel items.
minItems: 0,                    //{NEW} Integer: Minimum number of carousel items that should be visible. Items will resize fluidly when below this.
maxItems: 0,                    //{NEW} Integer: Maxmimum number of carousel items that should be visible. Items will resize fluidly when above this limit.
move: 0,                        //{NEW} Integer: Number of carousel items that should move on animation. If 0, slider will move all visible items.

// Callback API
start: function(){},            //Callback: function(slider) - Fires when the slider loads the first slide
before: function(){},           //Callback: function(slider) - Fires asynchronously with each slider animation
after: function(){},            //Callback: function(slider) - Fires after each slider animation completes
end: function(){},              //Callback: function(slider) - Fires when the slider reaches the last slide (asynchronous)
added: function(){},            //{NEW} Callback: function(slider) - Fires after a slide is added
removed: function(){}           //{NEW} Callback: function(slider) - Fires after a slide is removed
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T00:45:26.313

改成

```
controlNav: false,

directionNav: false, 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-09T09:13:31.820

```
$('#.slider').flexslider({            
    controlNav: false,
    directionNav: false
}); 
```

[请参阅此处](https://github.com/woothemes/FlexSlider/wiki/FlexSlider-Properties)的文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-15T08:01:46.017

正如 Kee 所说，但这是加载滑块而不是编辑源 JS 文件时的方法：

```
$('#.flexslider').flexslider({            
    controlNav: false,
    directionNav: false
}); 
```

# oracle - 如何创建从表到自定义数据类型的外键

> ID：13665235
> 
> 赞同：1
> 
> 时间：2012-12-02T00:29:36.190
> 
> 标签：oracle, database-design, user-defined-types, data-integrity, object-relational-model

使用 Oracle Express 11g，学习对象关系数据库的交互。

尝试从普通表创建外键到自定义对象（客户）表时遇到问题

客户对象如下（`customer_id NUMBER, fname VARCHAR2, lname VARCHAR2`），对于我们的设置，我们希望通过`customer_id NUMBER`. 在 SQL Workshop 中，甚至无法选择customers 表，而且我们找不到手动创建这种关系的语法。

任何专家都有一些线索来帮助解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T06:08:41.293

```
create or replace type customer is object
(
    customer_id NUMBER,
    fname VARCHAR2(100),
    lname VARCHAR2(100)
);
/

create table customers of customer
(
    constraint customer_pk primary key(customer_id)
);

create table applications
(
    application_id number,
    customer_id number,
    constraint applications_fk1 foreign key (customer_id)
        references customers(customer_id)
); 
```

# java - 将返回值限制在两个值之间的最短代码

> ID：13665244
> 
> 赞同：2
> 
> 时间：2012-12-02T00:31:34.143
> 
> 标签：java, android, if-statement

我的 Android 应用程序中有一个方法，它采用动态设置的字体大小并返回按比例缩小的字体大小。它从 getTextSize() 获得的值用于标题，较小的值用于正文。目前它写成：

```
public int getSmallerTextSize(){
    int textSize = (int)Math.round(getTextSize() * 0.8);

    if(textSize > 20){
        textSize = 20;
    }else if(textSize < 10){
        textSize = 10;
    }

    return textSize;
} 
```

我想找到一种更短、更简洁的方式来表达这一点。一种选择是：

```
public int getSmallerTextSize(){
    int textSize = (int)Math.round(getTextSize() * 0.8);

    textSize = textSize > 10 ? textSize : 10;
    textSize = textSize > 20 ? 20 : textSize;

    return textSize;
} 
```

但再说一遍：这么简单的东西有很多代码。有人可以建议一个优雅的、最好是单行代码来表达这一点吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-02T00:46:20.417

只需使用以下表达式：

```
textSize = Math.min(Math.max(textSize,10),20); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-02T00:35:03.850

您可以创建一个`limitRange`辅助方法。

```
public static int limitRange(int i, int min, int max) {
    if (i > max) {
        i = max;
    } else if (i < min) {
        i = min;
    }
    return i;
} 
```

然后，当您需要限制 int 的范围时，将其用作单行：

```
public int getSmallerTextSize(){
    int textSize = (int)Math.round(getTextSize() * 0.8);
    textSize = limitRange(textSize, 10, 20);
    return textSize;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-02T00:39:54.070

我更喜欢显式`return`的 s，并`else`在不必要时使用避免子句。

```
public int getSmallerTextSize() {
    int textSize = (int) Math.round(getTextSize() * 0.8);
    if (textSize < 10) {
        return 10;
    }
    if (textSize > 20) {
        return 20;
    }
    return textSize;
} 
```

`limitRange`只有当其他方法使用相同的逻辑时，我才会提取方法。此外，添加几个保存范围限制值的常量可能会很好。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-02T00:38:06.970

**如果您想减少代码中的行数（单行代码）** ，请尝试将两个三元运算合并到一行中，如下所示：

```
 int textSize = (int)Math.round(getTextSize() * 0.8);
  textSize = textSize>20 ?20:textSize<10 ?10: textSize ; 
```

# visual-studio - 苹果酒空间/根据需要换行文本。模拟器/设备不

> ID：13665253
> 
> 赞同：1
> 
> 时间：2012-12-02T00:32:41.780
> 
> 标签：visual-studio, windows-phone-7, xaml

Cider（Visual Studio XAML 显示）正确地环绕和分隔我的文本，WP 模拟器和实际的 WP 设备没有。（在 Silverlight、WP7、WP8、VS2010、VS2012 中测试）。我的愿望是让文本显示在苹果酒中。请看下图：

![在此处输入图像描述](../Images/930ad60b417171c37ff2d34d5faa2375.png)

很容易重现。只需将以下内容添加到页面。

```
<Canvas Background="#000000" Width="480" Height="648" x:Name="Slide">
    <Canvas Canvas.Left="5.76" Canvas.Top="0" Name="callout" Width="342" Height="104.56999969482422">
        <Path StrokeLineJoin="Round" Fill="#E51400" Data="M0,17.43A17.43,17.43 0 0 1 17.43,0L199.5,0L199.5,0L285,0L324.57,0A17.43,17.43 0 0 1 342,17.43L342,61L365.94,74.51L342,87.14L342,87.14A17.43,17.43 0 0 1 324.57,104.57L285,104.57L199.5,104.57L199.5,104.57L17.43,104.57A17.43,17.43 0 0 1 0,87.14L0,87.14L0,61L0,61Z"/>
        <TextBlock Canvas.Top="8.7" Canvas.Left="12.3" Width="324.6" Height="90.76" LineHeight="28.8" LineStackingStrategy="BlockLineHeight" TextWrapping="Wrap" TextAlignment="Center" Foreground="#FFFFFF" FontFamily="Segoe WP Semibold" FontSize="24">
            <Run Text="It's overlapping. It's all spilling over the edge. One word, two syllables. Demarcation." />
        </TextBlock>
    </Canvas>
</Canvas> 
```

您可以忽略该`<Path/>`对象，因为它仅用于显示布局时的外观。我已经尝试了我能想到的一切`LayoutRounding="False"`，等等。似乎没有任何效果。

在 Silverlight 项目（不是 WP8 项目）中，文本在 Cider 和网页的 Silverlight 加载项中均显示不正确。

有没有办法让文本出现在应用程序（模拟器、设备）中，就像它在 WP8 项目的苹果酒中一样？

# matlab - 为什么 Matlab 将值保存为带有大量分数而不是十进制近似值的符号变量？

> ID：13665255
> 
> 赞同：2
> 
> 时间：2012-12-02T00:33:04.403
> 
> 标签：matlab

我目前正在研究 Matlab 中的基本优化算法，并且遇到了 Matlab 以荒谬的精度保存变量的问题。在几次迭代中，变量是如此之大，以至于它实际上触发了 sym.m 中的某种无限循环。

这是开始这一切的代码行：

> SLine = (m * (X - P(1))) + P(2);

其中 P = [2,2] 和 m = 1.2595。当我在命令行中手动键入这行代码时，SLine 被保存为符号表达式 (2519*X)/2000 - 519/1000。我不确定为什么它不使用十进制近似值，但至少这些分数具有正确的值。然而，当这行代码在我的程序中运行时，它会将 SLine 保存为表达式 (2836078626493975*X)/2251799813685248 - 584278812808727/1125899906842624，除此之外，它甚至不精确到小数点后四位。这些庞大的部分正在通过我的程序进行，随着每一行新代码的增加而增长，并导致它停止运行。

有谁知道为什么 Matlab 会这样？有没有办法指定在执行计算时应该使用什么精度？感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T18:45:47.200

欢迎来到符号计算的乐趣！

大多数符号代数系统将数字表示为有理数，$(p,q) = \frac{p}{q}$，并对这些数执行有理算术运算（+、-、*、/），从而产生有理结果。通常，这些结果是精确的（也称为*无限精度*）。

众所周知，有理数运算产生的有理数的大小呈指数增长。因此，如果你试图用任何符号代数系统解决一个现实问题，你最终会耗尽空间或时间。

这是关于这个主题的最后一句话，Nick Trefethen FRS 展示了为什么浮点运算对于解决实际数字问题绝对至关重要。

[http://people.maths.ox.ac.uk/trefethen/publication/PDF/2007_123.pdf](http://people.maths.ox.ac.uk/trefethen/publication/PDF/2007_123.pdf)

在 Matlab 中试试这个：

```
function xnew = NewtonSym(xstart,niters);
% Symbolic Newton on simple polynomial
% Derek O'Connor 2 Dec 2012\. derekroconnor@eircom.net
x = sym(xstart,'f');

for iter = 1:niters
    xnew = x - (x^5-2*x^4-3*x^3+3*x^2-2*x-1)/...
               (5*x^4-8*x^3-9*x^2+6*x-2);
    x    = xnew;
end

function xnew = TestNewtonSym(maxits);
% Test the running time of Symbolic Newton
% Derek O'Connor 2 Dec 2012.

time=zeros(maxits,1);
for niters=1:maxits
    xstart=0;
    tic;
    xnew = NewtonSym(xstart,niters);
    time(niters,1)=toc;
end;
semilogy((1:maxits)',time) 
```

![符号牛顿](../Images/f4c54a68ed5a03cc8b67bc8b8676f733.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T02:47:28.987

您已经告诉我们 m 和 P 是什么，但 X 是什么？X 显然是一个符号变量。所以进一步的计算都是象征性地完成的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-08T09:56:07.770

因此，从有关符号计算的 MATLAB 参考文档中，符号表示将始终采用精确的有理形式，而不是浮点数的十进制近似值 [1]。这样做的原因显然是为了“帮助避免舍入错误和表示错误”[2]。

精确的表示是仅通过符号算术无法克服的。但是，您可以在 Matlab 中使用可变精度算术 (vpa) 来获得相同的精度 [3]。

**例如**

```
>> sym(pi)
ans = 
0

>> vpa(sym(pi))
ans = 
3.1415926535897932384626433832795 
```

**参考**

[1] [http://www.mathworks.com/help/symbolic/create-symbolic-numbers-variables-and-expressions.html](http://www.mathworks.com/help/symbolic/create-symbolic-numbers-variables-and-expressions.html)

[2] [https://en.wikibooks.org/wiki/MATLAB_Programming/Advanced_Topics/Toolboxes_and_Extensions/Symbolic_Toolbox](https://en.wikibooks.org/wiki/MATLAB_Programming/Advanced_Topics/Toolboxes_and_Extensions/Symbolic_Toolbox)

[3] [http://www.mathworks.com/help/symbolic/vpa.html](http://www.mathworks.com/help/symbolic/vpa.html)

# mysql - 去年 7 月到 7 月之间哪些 CD 的销量更高

> ID：13665256
> 
> 赞同：-3
> 
> 时间：2012-12-02T00:33:29.787
> 
> 标签：mysql, database

销售，因为一个日期可以有很多销售，并且会有很多行。

但是我不确定我该怎么做。

到目前为止，我有：

```
SELECT cd_no
FROM sales 
```

我认为是在子查询选择中，别名“m”返回“NULL”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T00:46:24.473

您可以通过按 CD_NO 分组并计算行数来计算每张 CD 的总销售额：

```
SELECT CD_NO, COUNT(*) AS purchases
FROM Sales
GROUP BY CD_NO 
```

您可以像这样获取特定日期范围内每张 CD 的销售数量（因为`<date condition>`True 时为 1，False 时为 0）：

```
SELECT CD_NO, SUM(<date condition>) AS purchases
FROM Sales
GROUP BY CD_NO 
```

对于 2012 年 7 月，您可以使用`purchasedate BETWEEN '2012-07-01' AND '2012-07-31'`或`YEAR(purchasedate) = 2012 AND MONTH(purchasedate) = 7`等选项。

比较两个日期范围

```
SELECT
    CD_NO,
    SUM(purchasedate BETWEEN '2012-07-01' AND '2012-07-31') AS a,
    SUM(purchasedate BETWEEN '2011-07-01' AND '2011-07-31') AS b
FROM Sales
GROUP BY CD_NO 
```

最后，选择购买量增加 15% 的行...

```
SELECT CD_NO
FROM (
    SELECT
        CD_NO,
        SUM(purchasedate BETWEEN '2012-07-01' AND '2012-07-31') AS a,
        SUM(purchasedate BETWEEN '2011-07-01' AND '2011-07-31') AS b
    FROM Sales
    GROUP BY CD_NO) AS t
WHERE t.a > 1.15 * t.b 
```

或者简单地说：

```
SELECT CD_NO
FROM Sales
GROUP BY CD_NO
HAVING       SUM(purchasedate BETWEEN '2012-07-01' AND '2012-07-31') 
     > 1.15 * SUM(purchasedate BETWEEN '2011-07-01' AND '2011-07-31') ; 
```

# javascript - 通过数组查找项目

> ID：13665257
> 
> 赞同：1
> 
> 时间：2012-12-02T00:33:38.203
> 
> 标签：javascript, jquery

我正在尝试查找一个巨大数组（7000 多个项目）的结果，出于某种原因，我之前用于另一个项目的脚本一直返回错误，或者我可能忘记了一些东西。

我正在尝试对数组进行排序并找到变量中列出的两个项目。这是代码：

```
$.getJSON('proxy.php?url=http://api.bukget.org/api/plugins', function(data){
        var list = ['essentials', 'worldguard'];
        //console.log(data);
        $.each(data, function(i, plugin){
            if (plugin === list) {
                console.log('found!');
                 } else {
                    return false;
                }
        });

    }); 
```

我的代码中缺少什么？

使用代理：

```
<?php

    if (!isset($_GET['url'])) die();
    $url =  urldecode($_GET['url']);
    $url = 'http://' . str_replace('http://', '', $url); // Avoid accessing the file system
    echo file_get_contents($url);
?> 
```

这使得数据（片段）：

```
["a5h73y", "ab-marriage", "abacus", "abag", "abandonedcarts", "abilitytrader", "abitofrealism", "aboot", "absorbchests", "acc", "acceptdarules", "acceptrules", "accesscontrol", "accessories", "accident-tnt", "accountlock", "achat", "achievement", "achievements", "acientcave", "acommands", "actionzones", "activator", "activityhistory", "activitypromotion", "activitytracker"] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-02T00:35:30.280

`return false`将在第一次迭代中突破`$.each`if 。`plugin !== list`

**编辑：**如果你想找到里面的任何项目`list`并停止匹配它会是：

```
$.getJSON('proxy.php?url=http://api.bukget.org/api/plugins', function(data) {
    var list = ['essentials', 'worldguard'],
        found;
    $.each(data, function(i, plugin) {
        if (~$.inArray(plugin, list)) {
            found = true;
            return false;
        }
    });
    if (found) {
        console.log('found!');
    } else {
        console.log('not found!');
    }
}); 
```

[**小提琴**](http://jsfiddle.net/r5QbE/)

如果你想同时找到它们：

```
$.getJSON('proxy.php?url=http://api.bukget.org/api/plugins', function(data) {
    var list = ['essentials', 'worldguard'],
        found = 0;
    $.each(data, function(i, plugin) {
        if (~$.inArray(plugin, list)) {
            found++;
        }
    });
    if (found === list.length) {
        console.log('found all of them!');
    } else {
        console.log(found + ' items found.');
    }
}); 
```

[**小提琴**](http://jsfiddle.net/r5QbE/2/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-02T00:37:57.873

除了其他答案之外，数组文字不能可靠地与`==`. 使用`.indexOf`：

```
if ( list.indexOf(plugin) > -1 ) {

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-02T00:39:55.317

是`plugin`数组还是字符串？如果是数组，则 Javascript 中不提供数组比较（例如：http: [//jsfiddle.net/F36Qd/](http://jsfiddle.net/F36Qd/)）

如果`plugin`是一个字符串，这是知道它是否在的方法`list`：

```
if (list.indexOf(plugin) > -1 ) {
    // Found
} 
```

如果`plugin`是一个数组，则必须编写一个进行深度对象比较的函数。

# javascript - 模板 {{#with}} 崩溃表单字段值检索

> ID：13665263
> 
> 赞同：0
> 
> 时间：2012-12-02T00:35:09.557
> 
> 标签：javascript, meteor, handlebars.js

我正在使用此代码来检索页面中的表单字段。

Javascript 文件：

```
'click #btnSave' : function() {
  var params = {'formField1':'','formField2':''};
  for (var key in params) {
    if (key in this)
      params[key] = this[key].value;      
    }

  // ... database save logic

} 
```

有一个“**数据**”助手，它在版本中返回一个数据库对象

HTML 表单：

```
<form>
  <div>
    <label for="formField1">Field 1</label>
    <input id="formField1" value="{{data.formField1}}">
    <button id="btnSave" type="button">Save</button>
  </div>
</form> 
```

我曾尝试以这种方式在模板中使用**“with” ：**

```
<form>
  <div>
    {{#with data}}
    <label for="formField1">Field 1</label>
    <input id="formField1" value="{{formField1}}">
    <button id="btnSave" type="button">Save</button>
    {{/with}}
  </div>
</form> 
```

但这使我的表单数据检索功能无用。有人可以解释这种效果吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T15:56:32.333

您不能使用`{{#with data}}`，因为数据是对象本身。

例如

```
data = {"formField1":"value", "formField2":"value2"} 
```

如果您有一个名为 data 的键，则可以使用`{{#with data}}`

```
data = { "data" : { "formField1":"value", "formField2":"value2" } }; 
```

# jquery - jQuery 图像滑块未在 IE7 上显示内容

> ID：13665266
> 
> 赞同：1
> 
> 时间：2012-12-02T00:35:47.093
> 
> 标签：jquery, html, css

我有一个 jQuery 滑块，它可以交换图像和文本，我遇到的问题是在 IE7 及以下我无法让幻灯片内容出现在图像上方。

示例（IE7）：

![即7](../Images/ed715aafaa0e661a630269798a01daab.png)

（铬合金） ![铬合金](../Images/21cd708a69ee0eef09ec3992915b595e.png)

这是网站： http: [//new.dpwebdev.co.uk/business-sites/explore-d-and-d/index.php](http://new.dpwebdev.co.uk/business-sites/explore-d-and-d/index.php)

我曾尝试更改图像和文本`z-index`，但这不会影响 IE7。有没有办法解决这个问题？

我还注意到箭头也不见了。

编辑：

JSFIDDLE：http: [//jsfiddle.net/Ckde2/2/](http://jsfiddle.net/Ckde2/2/)

代码：

HTML（部分）：

```
 <body id="home">
        <!-- BEGIN CONTENT -->
        <div id="content">
            <!-- BEGIN CONTENT TOP SLIDESHOW -->
            <div id="top-slide">
                <div class="wrapper">
                <!-- BEGIN CONTENT TOP SLIDESHOW SLIDES -->
                    <div id="slide0" class="slide" data:id="0">
                        <h2>Your Site... Defined</h2>
                        <h4>With D&amp;D there is no inbetween, we will never compromise your requirements.</h4>
                    </div>
                    <div id="slide1" class="slide" data:id="1">
                        <h2>Your Site... Defined 2</h2>
                        <h4>With D&amp;D there is no inbetween, we will never compromise your requirements.</h4>
                    </div>
                    <div id="slide2" class="slide" data:id="2">
                        <h2>Your Site... Defined 3</h2>
                        <h4>With D&amp;D there is no inbetween, we will never compromise your requirements.</h4>
                    </div>                     
                <!-- END CONTENT TOP SLIDESHOW SLIDES -->
                </div>
                <div id="slider-imgs">
                    <div id="s-img0" class="slide-imgs">
                        <img src="http://new.dpwebdev.co.uk/business-sites/explore-d-and-d/media/img/slider/img1-g.png" id="s-img0-g">
                        <img src="http://new.dpwebdev.co.uk/business-sites/explore-d-and-d/media/img/slider/img1-c.png" id="s-img0-c" class="color">                        
                    </div>
                    <div id="s-img1" class="slide-imgs">
                        <img src="http://new.dpwebdev.co.uk/business-sites/explore-d-and-d/media/img/staff/profiles/directors/dpassmore/g.png" id="s-img1-g">
                        <img src="http://new.dpwebdev.co.uk/business-sites/explore-d-and-d/media/img/staff/profiles/directors/dpassmore/c.png" id="s-img1-c" class="color">
                    </div>
                    <div id="s-img2" class="slide-imgs">
                        <img src="http://new.dpwebdev.co.uk/business-sites/explore-d-and-d/media/img/staff/profiles/directors/dpassmore/g.png" id="s-img2-g">
                        <img src="http://new.dpwebdev.co.uk/business-sites/explore-d-and-d/media/img/staff/profiles/directors/dpassmore/c.png" id="s-img2-c" class="color">
                    </div>
                </div>
                <div id="numSlides">3</div>
                <div class="arrows">
                    <span class="arrow left"></span>
                    <span class="arrow right"></span>
                </div>
                <div id="select">
                    <div class="wrapper">
                        <div class="bullets"></div>
                        <div class="clear"></div>
                    </div>
                </div>
            </div>
            <!-- END CONTENT TOP SLIDESHOW -->
        </div>
</body> 
```

查询：

```
$(document).ready(function() {
    //HOME.PHP
    $('#home #top-slide').bind("mouseenter", function() {
        $('#select').stop(true).fadeIn(600);
    });

    $('#home #top-slide').bind("mouseleave", function() {
        $('#select').stop(true).fadeOut(600);
    });

    //HOME.PHP - SLIDER

    function mainSlider() {
        var numsliders;
        var currentSlider = 0;
        var interval;
        var slideWidth;
        var slideImgWidth;
        var windowWidth = $(window).width();

        $('#slider0').css('opacity', 1);
        $(document).ready(function() {
            numsliders = parseInt($('#numSlides').html());
            generateBullets();
            checkHover();
            iefix();

            $('#slide0').css('left', '0px');
            $('#slide0').css('height', '300px');
            $('#slide0').css('width', '1000px');
            $('#slide0').css('top', '0px');
            $('#slide0').css('opacity', '1');

            $('#s-img0').css('opacity', '1');

            $('#slide0').addClass("showing");

            slideWidth = $('#slide0').width();

        });

        //arrow, bullet and autoplay functions

        function nextSlider() {
            specificSlider((currentSlider + 1) % numsliders);
        }

        function previousSlider() {
            if (currentSlider !== 0) {
                specificSlider((currentSlider - 1));
            }
        }

        interval = window.setInterval(nextSlider, 7000);

        function checkHover() {
            $('#home #top-slide').bind("mouseenter", function() {
                for (var b = 0; b < numsliders; b++) {
                    $(this).find(".slide-imgs img#s-img" + b + "-g").delay(300).fadeOut();

                    $(this).find(".slide-imgs img#s-img" + b + "-c").fadeIn(300);
                };
            });

            $('#home #top-slide').bind("mouseleave", function() {
                for (var d = 0; d < numsliders; d++) {
                    $(this).find(".slide-imgs img#s-img" + d + "-c").delay(300).fadeOut();

                    $(this).find(".slide-imgs img#s-img" + d + "-g").fadeIn(300);
                };
            });
        };

        function iefix() {
            for (var ie = 0; ie < numsliders; ie++) {
                $('#s-img' + ie).animate({
                    opacity: 0
                }, 0, null);
            };
        };

        function generateBullets() {
            var $bullet = $('#select .bullets');

            for (var i = 0; i < numsliders; i++) {
                $bullet.append('<span class="bullet" id="' + i + '"></span>');
            }

            $('.bullets #0').addClass("selected");
        }

        //call arrow functions
        $('span.arrow.left').click(function() {
            previousSlider();
        });

        $('span.arrow.right').click(function() {
            nextSlider();
        });

        //call bullet functions
        $('body').on('click', '.bullet', function() {

            var $id = $(this).attr("id");

            specificSlider($id);

        });

        function specificSlider(sliderNumber) {
            window.clearInterval(interval);

            // move the next slider on deck
            /*
            $('#slide' + sliderNumber).css('left', $('#top-slide').css('width'));
            $('#slide' + sliderNumber).css('top', '0px');
            $('#slide' + sliderNumber).css('height', '300px');
            $('#slide' + sliderNumber).css('width', '1000px');
            */

            // move old slide off, 
            $('#slide' + currentSlider).animate({
                left: '-1020px',
                top: '0px',
                height: '300px',
                width: '1000px',
                opacity: 0
            }, 900, null);

            $('#s-img' + currentSlider).animate({
                opacity: 0
            }, 900, null);

            $('#slide' + currentSlider).removeClass("showing");
            $('.bullets #' + currentSlider).removeClass("selected");

            // new slide on
            $('#slide' + sliderNumber).animate({
                left: '0px',
                height: '300px',
                width: '1000px',
                top: '0px',
                opacity: 1
            }, 900, null);

            $('#s-img' + sliderNumber).animate({
                opacity: 1
            }, 900, null);

            $('#slide' + sliderNumber).addClass("showing");
            $('.bullets #' + sliderNumber).addClass("selected");

            currentSlider = sliderNumber;

            interval = window.setInterval(nextSlider, 7000);
        }
    }

    //initalise slider 
    mainSlider();
});​ 
```

CSS（部分）：

```
/*============================================
    ENABLE FONTS
============================================*/

@import url(http://fonts.googleapis.com/css?family=PT+Sans:400,700);

body {
    font-family:"PT Sans";
    font-size:13px;
}

html {
    overflow-x:hidden;
    overflow-y:scroll;
}

/*============================================
    LINKS
============================================*/
a {
    text-decoration:none;
    color:#CCCCCC;
    -moz-transition: color 150ms ease-out;
    -webkit-transition: color 150ms ease-out;
}

/*============================================
    LAYOUT
============================================*/
html, body {
    width:100%;
    height:100%;
    margin:0;
    padding:0;
}

.wrapper {
    width:1000px;
    margin:0 auto;
}

#header .wrapper, #footer .wrapper {
    width:1100px;
}

.clear {
    clear:both !important;
    float:none !important;
}
/*============================================
    CONTENT
============================================*/
#content {
    min-height:100%;
    margin-top:55px;
    padding-top:10px;
}

/* IE FIX */
.ie7 #content {
    padding-top:65px;
}

/*============================================
    HOME.PHP
============================================*/
#home #content #top-slide {
    background:#3D3B37 url(http://new.dpwebdev.co.uk/business-sites/explore-d-and-d/media/img/common/loaders/1.gif) no-repeat center;
    height:300px;
    position:relative;
    color:#FFFFFF;
}

#home #content #top-slide .slide {
    position:absolute;
    opacity: 0;
    left:-1000px;
    background:#3D3B37;
}

#home #content #top-slide .wrapper {
    position:relative;
}

#home #content #top-slide #numSlides{
    visibility: hidden;
}

#home #content #top-slide h2, #home #content #top-slide h4 {
    position:absolute;
    margin:0;
    z-index:9999;
    display:block;
    zoom:1;
}

#home #content #top-slide h2 {
    margin:60px 0 0 0;
    font-size:36px;
    text-shadow: 0 1px 1px #1F1E1C;
}

#home #content #top-slide h4 {
    margin:150px 0 0 0;
    text-shadow: 0 1px 1px #1F1E1C;
}

#home #content #top-slide .arrows {
    width:1100px;
    margin:0 auto;
    height:300px;
    position:relative;
}

#home #content #top-slide .arrows span.arrow {
    background:url(http://new.dpwebdev.co.uk/business-sites/explore-d-and-d/media/img/home/arrows.png) no-repeat;
    display:block;
    height:36px;
    width:25px;
    position:absolute;
    top:40%;
    cursor:pointer;
    z-index:100;
    zoom:1;
}

#home #content #top-slide .arrows span.arrow.left {
    background-position:left;
    left:0;
}

#home #content #top-slide .arrows span.arrow.right {
    background-position:right;
    right:0;
}

#home #content #top-slide #select {
    height:48px;
    width:100%;
    position:absolute;
    bottom:0;
    background:url(http://new.dpwebdev.co.uk/business-sites/explore-d-and-d/media/img/home/bg-slie-select.png) repeat;
    display:none;
    line-height:48px;
    z-index:10;
}

#home #content #top-slide #select span.bullet {
    height:48px;
    width:25px;
    background:url(http://new.dpwebdev.co.uk/business-sites/explore-d-and-d/media/img/home/bullets.png) no-repeat right;
    line-height:48px;
    display:block;
    float:left;
    cursor:pointer;
}

#home #content #top-slide #select span.bullet:hover {
    background-position:center;
}

#home #content #top-slide #select span.bullet.selected {
    background-position:left;
}

#home #content #top-slide #slider-imgs .slide-imgs {
    position:absolute;    
    width:100%;
    height:300px;
    opacity:0;
    z-index:9 !important;
}

#home #content #top-slide #slider-imgs .slide-imgs img {
    position:absolute;
    right:0;
    bottom:0;
    display:block;    
}

#home #content #top-slide #slider-imgs .slide-imgs img.color {
    display:none;
}

#home #content #twitter-main {
    background-color:#cccccc;
    height:200px;
    margin:10px 0;
    padding-top:30px;
    text-align:center;
}

#home #content #twitter-main i.icon-twitter {
    background:url(http://new.dpwebdev.co.uk/business-sites/explore-d-and-d/media/img/common/social/twitter.png) no-repeat center;
    width:37px;
    height:37px;
    margin:0px auto 20px auto;
    display:block;
}

#home #content #twitter-main span.divider {
    border-top:1px solid #535353;
    height:0;
    width:100px;
    display:block;
    margin:0 auto;
}

#home #content #twitter-main h2.feed {
    margin:40px 0;
}

#home #content #twitter-main p.info {
    font-size:10px;
    color:#666666;
}

#home #content #services {
    height:500px;
    margin:0 0 10px 0;
    background:#DDDDDD;
    padding-top:20px;
}

#home #content #services .wrapper > h2{
    margin-top:0px;
    font-size:24px;
}

#home #content #services .cols .col {
    margin:0 50px;
    float:left;
    width:233px;
    text-align:center;
    background:url(http://new.dpwebdev.co.uk/business-sites/explore-d-and-d/media/img/home/services-c-c.png) no-repeat top;
    height:260px;
    padding-top:170px;
}

#home #content #services .cols #ac.col {
    background:url(http://new.dpwebdev.co.uk/business-sites/explore-d-and-d/media/img/home/services-c-ac.png) no-repeat top;
}

#home #content #services .cols #sup.col {
    background:url(http://new.dpwebdev.co.uk/business-sites/explore-d-and-d/media/img/home/services-c-support.png) no-repeat top;
}

#home #content #services .cols #qu.col {
    background:url(http://new.dpwebdev.co.uk/business-sites/explore-d-and-d/media/img/home/services-c-qu.png) no-repeat top;
}

#home #content #services .cols .col span.divider {
    border-top:1px solid #3D3B37;
    height:0;
    width:100px;
    display:block;
    margin:0 auto;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T01:40:16.360

修复！！通过更改包装器的 CSS：

```
#home #content #top-slide .wrapper {
    position:relative;
    z-index:9998;
} 
```

当我也改变箭头的容器时得到了这个想法：

```
#home #content #top-slide .arrows {
    width:1100px;
    margin:0 auto;
    height:300px;
    position:relative;
    z-index:9998;
} 
```

# c++ - C++ 扩展模板类时定义特定对象类型

> ID：13665274
> 
> 赞同：0
> 
> 时间：2012-12-02T00:36:30.920
> 
> 标签：c++, templates, inheritance, extending

我写了一个简短的模板列表类，定义了一些我想在它的实现中使用的方法。我目前的问题是我无法扩展通用模板类型和定义特定类型。

换句话说，假设我有一个名为`MyType`

列表.h：

```
template<class T>
class List
{
    public:
        Node<T> *head;
        Node<T> *tail;

 ...
} 
```

课堂内`Node`：

```
public:
    virtual T getData(); 
```

我想用一个特定的定义类型扩展这个类，`MyType`以便我可以让 getData() 在扩展类中表现不同`MyTypeList`。我在语法上有问题。任何帮助将不胜感激！

```
class MyTypeList : public List<T>
{
...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T00:44:40.897

你可以这样做：

```
struct MyTypeList : List<MyType> {
}; 
```

虽然它和做的差不多：

```
typedef List<MyType> MyTypeList; 
```

# android - 构造带有属性的预定义消息以在 Facebook android 上发布

> ID：13665275
> 
> 赞同：0
> 
> 时间：2012-12-02T00:36:32.510
> 
> 标签：android, facebook

我想通过我的 android 应用程序在 Facebook 上发布一条预定义的消息。除了“属性”字段之外，我得到了一切工作。我想发布一条消息，上面写着：更多信息：此处，当用户单击“此处”时，它应该链接到该页面。

这就是我所做的：

```
 Bundle params = new Bundle();
 String s2 = "{'More information':{'text':'here', 'href':" + details + "}}";
 params.putString("properties", s2); 
```

其中“详细信息”是页面的链接。

但似乎 facebook 并没有选择这条线。我成功设置了标题、图片等字段。

有什么见解吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T00:58:30.273

这是设计使然，据我所知，我们不支持在状态更新中使用 HTML。但是，如果您发布有效的 URL，我们将自动创建一个链接，所以我建议您粘贴完整的链接

> “.....更多信息：（www.yourURLhere.com）”

在 Facebook 上，www.yourURLhere.com 将是一个可点击的链接。

# entity-framework - Entity Framework 5 代码首先不映射模型

> ID：13665276
> 
> 赞同：1
> 
> 时间：2012-12-02T00:36:38.173
> 
> 标签：entity-framework, c#-4.0, ef-code-first

我一直在使用 EF5 尝试构建应用程序并遇到了一个小问题。

我创建了一个模型

```
 public class TargetBusinessModel
{
    public int Id { get; set; }
    public Guid BusinessId {get; set; }
    public Business Business { get; set; }
    public string ContactName { get; set; }
    public string ContactTitle { get; set; }
    public string ContactPhone { get; set; }
} 
```

更新了上下文文件

```
 public DbSet<TargetBusinessModel> TargetBusinessModels { get; set; } 
```

我的问题是业务中的所有属性都没有映射到数据库中。

我试图添加的商业模式来自另一个项目，我不确定这是否是原因。

我不介意代码是先为我的业务模型创建一个单独的表还是将它们组合在一起。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T09:40:04.757

尝试将`DbSet`实体`Business`添加到您的`DbContext`实现中：

```
public DbSet<Business> Businesses { get; set; } 
```

# scala - Mongodb + elasticsearch + scala lift

> ID：13665278
> 
> 赞同：0
> 
> 时间：2012-12-02T00:37:37.583
> 
> 标签：scala, mongodb, elasticsearch, lift, mongodb-query

我将 MongoDB 与 Elastic Search 集成

我已经使用以下命令从终端索引了数据库“testmongo”中的集合“person”：

```
curl -XPUT 'http://localhost:9200/_river/mongodb/_meta' -d '{ 
    "type": "mongodb", 
    "mongodb": { 
        "db": "testmongo", 
        "collection": "person"
    }, 
    "index": {
        "name": "mongoindex", 
        "type": "person" 
    }
}' 
```

并通过 mongo 终端向 mongodb 添加一些数据：

```
use testmongo
var p = {firstName: "John", lastName: "Doe"}
db.person.save(p) 
```

使用此命令搜索数据：

```
curl -XGET 'http://localhost:9200/mongoindex/_search?q=firstName:John' 
```

直到这里一切正常

我的问题是这样的：

如何，我必须创建客户端节点来查询我有以下代码不起作用：

```
 package code
    package snippet

    import net.liftweb._
    import http._
    import common._
    import util.Helpers._
    import scala.xml._
    import org.elasticsearch.node.NodeBuilder._
    import org.elasticsearch.index.query.QueryBuilders._
    import collection.JavaConversions._

    class SearchTerms extends StatefulSnippet with Loggable{

      private var term = ""

      def dispatch = {
        case "render" => render _
      }

      def render( xhtml: NodeSeq ): NodeSeq = {

        def doSearchTerm {

          val node = nodeBuilder().client(true).node()
          val client = node.client()

          val query = queryString( term )
          val response = client
            .prepareSearch("A")
            .setTypes("B")
            .setQuery(query)
            .execute()
            .actionGet()

          val hits = response.getHits

          logger.info( "Found %d hits for query '%s'".format( hits.getTotalHits, term ) )

          hits.getHits.foreach(hit =>
            logger.info("* %s".format(hit.sourceAsMap()("text")))
          )

          client.close()
          node.close()
        } 
```

我必须在 A 和 B 中使用哪些值才能使用 scala lift 中的搜索功能

有人可以帮帮我吗

非常感谢您的关注

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T19:06:25.003

我想它是：

*   mongoindex 作为索引名称
*   人作为类型名称

所以，像：

```
 val response = client
        .prepareSearch("mongoindex")
        .setTypes("person")
        .setQuery(query)
        .execute()
        .actionGet() 
```

它有帮助吗？

顺便说一句，术语应该包含类似“firstName:John”的内容

# html - What input type to use for image in external url?

> ID：13665280
> 
> 赞同：0
> 
> 时间：2012-12-02T00:37:48.457
> 
> 标签：html

I know that if I want to have a html field that let's the user upload a local file I can use

```
<input type="file"></input> 
```

However, let's say I am guaranteed that all images will be at a valid absolute URL to an image. How do I let the user specify that? What input type do I use?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T00:39:49.843

You may have to use:

```
<input type="text"></input> 
```

HTML5 has url input types:

```
<input type="url"></input> 
```

Consult the [MDN](https://developer.mozilla.org/en-US/docs/HTML/Element/Input) on inputs for more inforation.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T00:40:34.273

If the user is just specifying a URL at which you can find the image, then all they're really entering is text. There's no `input` element that's specific for a URL.

```
<input type="text" /> 
```

What you *do* with that text is another story entirely. There's no way for the HTML to validate that it's a URL for an image, a valid URL, etc. That's all stuff you'd have to do in code.

# javascript - Dynamically repeat/tile div and child(s)?

> ID：13665285
> 
> 赞同：3
> 
> 时间：2012-12-02T00:38:30.953
> 
> 标签：javascript, css, repeat

I've been doing some searching on here and Google and I can't seem to find an answer that quite fits what I'm trying to do. I have a single div with some text in it that does a fade effect by transitioning to a different background image on mouse hover. What I want to do is to tile/repeat that same div dynamically so it fills the entire body (or parent div). Kind of like using background-repeat:repeat but with a div instead of a background image. I like to see what kind of cool visual effects I can achieve with elements across the entire page fading in and out as the mouse moves over them.

Of course I could just copy and paste the same div in the code a bunch of times but there must be a better solution. I'm thinking javascript is needed, but the only things I've been able to find about cloning divs look to be a bit over my head and I'm wondering if there is a more simple solution.

The CSS and HTML that I'm using as an example is from menu links on a site I'm working on. It may not be the best example but I'm a bit new to CSS. Basically I want to tile the below div across an entire page.

Here is the css:

```
#fadediv {
    background-image:url(images/buttonback.png);
    transition: background-image 0.5s linear;
    -moz-transition: background-image 0.5s linear;
    -webkit-transition: background-image 0.5s linear;
}

#fadediv:hover {
    background-image:url(images/buttonback2.jpg);
}

.fadedivtext {
    display:block;
    width:320px;
    height:138px;
    float:left;
    font-size:30px;
    color:#FFF;
    text-align:center;
    line-height:138px;
} 
```

And the HTML snippet:

```
<div id="fadediv" class="fadedivtext">about me</div> 
```

EDIT: Looks like there's a PHP example [here](https://stackoverflow.com/questions/9761069/how-can-i-make-a-div-that-vertically-repeats?rq=1) that could work, in addition to the javascript example given below.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T00:47:45.323

I think clone should work well for you -- it's not that complicated, especially when you're talking about a basic div. Just make sure to target classes instead of IDs (you're not supposed to have multiple elements with the same ID).

Here's a basic example using JQuery's [`clone`](http://api.jquery.com/clone/):

```
var numberOfClones = 20;
var el = $("#fadediv");
for (i=0 ; i<numberOfClones ; i++) {
    var newEl = el.clone();
    $("#container").append(newEl);
}​ 
```

[http://jsfiddle.net/9P7bY/2/](http://jsfiddle.net/9P7bY/2/)

* * *

**Edit**

This is a comment left by [aug](https://stackoverflow.com/users/1168661/aug):

> Or if you want to for some reason give each clone a unique id you can access the attribute field and change the id to something else

```
newE1.attr("id", newId); 
```

# javascript - Unable to determine the results of a Google Groups search using Javascript in a Chrome extension

> ID：13665288
> 
> 赞同：1
> 
> 时间：2012-12-02T00:38:47.497
> 
> 标签：javascript, html, google-chrome-extension, obfuscation, google-groups

I'm writing a Chrome extension that searches for posts in a Google Group whose subject lines contain a given character string. From the browser, using the search query "subject:", I get the search results: either 0 results or > 0 and I take different actions depending on whether results come up. The wrinkle is that if I simply fetch the page data for the results page using, say,

```
try
  {
  var request = new XMLHttpRequest();
  request.open("GET", url, false);
  request.send(null);
  }
catch (e)
  {
  console.log(e);   
  return;
  }
if (request.status == 200)
  {
  var tmp = request.responseText;
  } 
```

I just get obfuscated data and can't read it. If I can get a Document object back, then I can search for a certain classname, with something like doc.getElementsByClassName, that exists if and only there are non-zero results from the search.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T19:27:16.483

以下是如何将 responseText 转换为 dom....

```
var page = document.implementation.createHTMLDocument("");
page.documentElement.innerHTML = request.responseText;
// Now you can find things
var thing = page.documentElement.querySelector('#find'); 
```

...但这对于某些页面来说并不总是足够的，因为它们是 ajax 驱动的，而且新的 Google Groups 是肯定的。
所以这个页面只是页面加载时 js 将要获取的所有其他内容的框架。
有时，您可以通过查看 WebInspector 中的网络面板并观察按下搜索按钮时发生的情况，了解如何复制页面发出的 ajax 请求并复制它。
但是 Google Groups 2 正在做一些时髦的事情，我不知道；）
您还可以做其他事情，例如覆盖 XMLHttpRequest 并监控调用它的内容以及当就绪状态更改为 4 时它会做什么或监控 onload。并使用该信息来尝试找出处理 responseText 的函数，有时以这种方式找到您需要的内容。但我现在找不到我的代码，也不想为此做这件事，因为我知道它不会很漂亮；）
祝你好运。

# c++ - 从文件读取时内存泄漏

> ID：13665290
> 
> 赞同：0
> 
> 时间：2012-12-02T00:39:08.907
> 
> 标签：c++, windows, winapi, memory, memory-leaks

我正在尝试从 XML 文件中读取数据并将每个元素（“< some data/>”）存储在矢量容器中 `vector<TCHAR*>`，为什么任务管理器显示的内存使用量远大于矢量大小（~80mb 而不是~59mb）：

```
#define _UNICODE

#include<tchar.h>
#include<iostream>
#include<windows.h>
#include<vector>

using namespace std;

HANDLE hFile;
HANDLE hThread;
vector<TCHAR*> tokens;
DWORD tokensSize;

DWORD WINAPI Thread(LPVOID lpVoid);

void main()
{   
    tokensSize = 0;
    hFile = CreateFile("db.xml",GENERIC_READ,0,NULL,OPEN_EXISTING,FILE_ATTRIBUTE_NORMAL,NULL);
    if(hFile == INVALID_HANDLE_VALUE)   {
        cout<<"CreateFile Error # "<<GetLastError()<<endl;      
    }

    DWORD fileSize = GetFileSize(hFile,NULL);
    cout<<"fileSize = "<<fileSize<<" bytes = "<<fileSize/1024/1024<<" mb"<<endl;
    TCHAR* buffer = new TCHAR[fileSize / sizeof(TCHAR) + 1];
    ZeroMemory(buffer,fileSize);

    DWORD bytesRead;
    if(!ReadFile(hFile,buffer,fileSize,&bytesRead,NULL)){
        cout<<"ReadFile Error # "<<GetLastError()<<endl;        
    }
    CloseHandle(hFile);

    hThread = CreateThread(NULL,0,Thread,(LPVOID)buffer,0,NULL);    

    WaitForSingleObject(hThread,INFINITE);

    for(int i=0;i<tokens.size();i++)
            tokensSize+=(_tcslen(tokens[i])+1)*sizeof(TCHAR);
    cout<<"vector size = "<<tokensSize<<" bytes = "<<tokensSize/1024/1024<<" mb"<<endl;
    cin.get();  
}

DWORD WINAPI Thread(LPVOID lpVoid)
{
    wstring entireDB = (TCHAR*)lpVoid;
    delete[]lpVoid; 

    wstring currentElement;
    wstring::size_type lastPos = 0;
    wstring::size_type next;

    next = entireDB.find(_T(">"),lastPos);
    TCHAR* szStr;
    do
    {               
        currentElement = entireDB.substr(lastPos,next+1-lastPos);
        szStr = new TCHAR[currentElement.length()+1];
        _tcscpy(szStr,currentElement.c_str());
        tokens.push_back(szStr);
        lastPos = next+1;
        next = entireDB.find(_T(">"),lastPos);
    }
    while(next != wstring::npos);

    entireDB.clear();
    return 0;
} 
```

输出：~ fileSize = 57mb vectorSize = 58mb

但 TaskManager 显示 ~ 81mb。我究竟做错了什么？太好了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T00:43:44.320

你在这里分配内存，在`do-while`循环中：

```
szStr = new TCHAR[currentElement.length()+1]; 
```

而且您永远不会与`delete`操作员一起发布它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T06:15:38.263

首先，正如 Esthete 所指出的，一旦你完成了令牌向量，你就永远不会清除它。应该这样做，或者更改标记向量以利用自清洁内容，例如 std::string 或 std::wstring。

这将我带到了下面并排的位置。请对照您现有的代码查看此内容。您需要比较许多更改。在您 cmopile+run 之前您可能不会看到的是内存占用差异，这可能会让您感到惊讶。

**主要变化**

*   全局`tokens`现在是一个向量`std::wstring`而不是原始 wchar_t 指针
*   用于`MultiByteToWideChar`翻译输入文件。
*   动态分配一个`std::wstring`作为线程参数。这将删除文件图像的一份完整副本。线程负责完成对内容`delete`的`wstring`解析。
*   用于`_beginthreadex()`启动线程。其根本原因是因为 C/C++ 运行时使用。过去，运行时设置了必须正确清理的各种线程本地存储，在使用`_beginthreadex()`. 它几乎与 CreateThread() 相同，但老实说，我期待 MS 将他们的东西放在一起并`std::thread`像其他文明世界一样正式为我们提供服务的那一天。

**微小/无意义的变化**

*   全局变量在适当的地方被带到本地范围。这意味着现在唯一真正的全局是`tokens`向量。
*   线程过程现在将子字符串直接推送到`tokens`向量。
*   使用 argv[1] 作为文件名（这种方式很容易调试，没有其他特殊原因）。可以根据需要改回您的硬编码文件名。

我希望这能给你一些关于清理这个问题的想法，更重要的是，你如何能够在不发疯`new`的情况下完成几乎所有的任务。`delete`

**注意：**这不会检查输入文件的字节顺序标记。我相信您声称它是 UTF8 是直截了当的，并且文件开头没有 BOM。如果您的输入文件确实有 BOM，则需要调整读取文件的代码以解决此问题。

```
#include <windows.h>
#include <tchar.h>
#include <process.h>
#include <iostream>
#include <vector>
#include <string>
using namespace std;

// global map of tokens
vector<wstring> tokens;

// format required by _beginthreadex()
unsigned int _stdcall ThreadProc(void *p);

int main(int argc, char *argv[])
{
    HANDLE hThread = NULL;
    std::string xml;
    std::wstring* pwstr = NULL;

    // check early exit
    if (argc != 2)
    {
        cout << "Usage: " << argv[0] << " filename" << endl;
        return EXIT_FAILURE;
    }

    // use runtime library for reading the file content. the WIN32 CreateFile
    //  API is required for some things, but not for general file ops.
    HANDLE hFile = CreateFileA(argv[1], GENERIC_READ, 0, NULL, OPEN_EXISTING, FILE_ATTRIBUTE_NORMAL, NULL);
    if (hFile != INVALID_HANDLE_VALUE)
    {
        DWORD dwFileSize = GetFileSize(hFile, NULL);
        if (dwFileSize > 0)
        {
            // allocate a string large enough for the whole file.
            std::string xml(dwFileSize, 0);
            DWORD bytesRead = 0;
            if (ReadFile(hFile, &xml.at(0), dwFileSize, &bytesRead, NULL) && (bytesRead == dwFileSize))
            {
                // invoke MB2WC to determine wide-char requirements
                int ires = MultiByteToWideChar(CP_UTF8, 0, xml.c_str(), -1, NULL, 0);
                if (ires > 0)
                {
                    // allocate a wstring for our thread parameter.
                    pwstr = new wstring(ires, 0);
                    MultiByteToWideChar(CP_UTF8, 0, xml.c_str(), -1, &pwstr->at(0), ires);

                    // launch thread. it own the wstring we're sending, including cleanup.
                    hThread = (HANDLE)_beginthreadex(NULL, 0, ThreadProc, pwstr, 0, NULL);
                }
            }
        }

        // release the file handle
        CloseHandle(hFile);
    }

    // wait for potential thread
    if (hThread != NULL)
    {
        WaitForSingleObject(hThread, INFINITE);
        CloseHandle(hThread);
    }

    // report space taken by tokens
    size_t tokensSize = 0;
    for (vector<wstring>::const_iterator it = tokens.begin(); it != tokens.end(); ++it)
        tokensSize += it->size()+1;
    cout << "tokens count = " << tokens.size() << endl
         << "tokens size = "<< tokensSize <<" bytes" << endl;

    cin.get();  
}

// our thread parameter is a dynamic-allocated wstring.
unsigned int _stdcall ThreadProc(void *p)
{
    // early exit on null insertion
    if (p == NULL)
        return EXIT_FAILURE;

    // use string passed to us.
    wstring* pEntireDB = static_cast<wstring*>(p);
    wstring::size_type last = 0;
    wstring::size_type next = pEntireDB->find(L'>',last);
    while(next != wstring::npos)
    {               
        tokens.push_back(pEntireDB->substr(last, next-last+1));
        last = next+1;
        next = pEntireDB->find(L'>', last);
    }

    // delete the wstring (no longer needed)
    delete pEntireDB;

    return EXIT_SUCCESS;
} 
```

# c# - 如何管理不同语言的后端内容，然后通过 web 服务发送信息？

> ID：13665301
> 
> 赞同：1
> 
> 时间：2012-12-02T00:40:54.740
> 
> 标签：c#, asp.net, sql, backend

（这是我实际项目的一个非常最小化的版本，它有更多的表链接在一起，每个表都有更多的数据和列）。

*   您如何建议设置支持不同语言内容的内容管理系统的结构？以下方式是一个不错的选择吗？

在我当前的项目中，我有一个包含文章的数据库，这些文章由**id**、**title**和**text**列定义。标题和文本列是**text_id**列上表**LanguageData**的外键。该表包含整个项目的所有字符串。该表由**id**、**text_id**、**text**和**language_id**列组成。

 ******例子：

```
Article : { id : 1, title : 1, text : 2 }

LanguageData : { id : 1, text_id : 1, text : "Title in english", language_id : 1 }
LanguageData : { id : 2, text_id : 1, text : "Tittel på svenska", language_id : 2 }
LanguageData : { id : 3, text_id : 2, text : "Text in english", language_id : 1 }
LanguageData : { id : 4, text_id : 2, text : "Texto en español", language_id : 3 } 
```

*   我如何制作一个快速的 Web 服务来返回具有指定语言的文章？

在我的项目中，我还有一个 web 服务，它以 language_id 作为输入并返回所有添加了正确语言字符串的文章。为此，我使用实体框架连接到数据库，并且对于数据库中的每篇文章以及作为 LanguageData 外键的每一列，我调用一个方法：

```
GetLanguageString(text_id, language_id)
   return LanguageData.First(ld => ld.text_id == text_id && ld.language_id == language_id) 
```

*   当我想浏览 600 篇包含很多与 LanguageData 相关联的列的文章时，这似乎很慢。有没有更好的方法来做到这一点？此处未提及的某些列通常在文章之间重复（例如列类别）。如果我已经在字符串中搜索了相同的文本和相同的语言，我是否应该保存 lambda 问题的结果以便不需要再次执行它们？如果我使用 lambda 表达式或 LINQ，它会更重要吗？它们同样快吗？

我们很乐意收到有关该主题的一些文档。我是后端编程的新手，我似乎无法在网上找到有关此的信息。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T08:59:33.277

我决定这样做：

对于每篇文章，我都有一个 articleText，因此我将所有非特定语言的信息放在 article 表中，然后将其余信息放在 articleText 表中。每行代表不同的文章或语言。然后我还有其他表格，比如新闻表格，这些表格也有一个与之相连的文本表格。

使用此解决方案，与 N 列的 N 个左连接相比，我只需要进行一次左连接即可以特定语言获取特定文章的所有文本。并且在所有文本都在一个表格中之前，甚至是主页的文本。现在一切都有自己的小表，主页的文本可能会在我读入字典的本地文件中，而不是对数据库进行查找。

如果你看到有什么可以做得更好的，请告诉我。

希望这可以帮助某人。******

# vba - 如何快速删除两个excel表之间的重复vba

> ID：13665305
> 
> 赞同：2
> 
> 时间：2012-12-02T00:41:29.703
> 
> 标签：vba, excel

我正在使用 vba，我有两张名为“Do Not Call”的工作表，在 A 列中有大约 800,000 行数据。我想使用这些数据检查第二张工作表中名为“Sheet1”的 I 列。如果它找到匹配项，我希望它删除“Sheet1”中的整行。我已经定制了从类似问题中找到的代码：[Excel 公式交叉引用 2 张工作表，从一张工作表中删除重复项](https://stackoverflow.com/questions/3426205/excel-formula-to-cross-reference-2-sheets-remove-duplicates-from-one-sheet)并运行它，但没有任何反应。我没有收到任何错误，但它不起作用。

这是我目前正在尝试的代码，不知道为什么它不起作用

```
Option Explicit
Sub CleanDupes()
Dim wsA As Worksheet
Dim wsB As Worksheet
Dim keyColA As String

Dim keyColB As String
Dim rngA As Range
Dim rngB As Range
Dim intRowCounterA As Integer
Dim intRowCounterB As Integer
Dim strValueA As String

keyColA = "A"
keyColB = "I"

intRowCounterA = 1
intRowCounterB = 1

Set wsA = Worksheets("Do Not Call")
Set wsB = Worksheets("Sheet1")

Dim dict As Object
Set dict = CreateObject("Scripting.Dictionary")

Do While Not IsEmpty(wsA.Range(keyColA & intRowCounterA).Value)
    Set rngA = wsA.Range(keyColA & intRowCounterA)
    strValueA = rngA.Value
    If Not dict.Exists(strValueA) Then
        dict.Add strValueA, 1
    End If
    intRowCounterA = intRowCounterA + 1
Loop

intRowCounterB = 1
Do While Not IsEmpty(wsB.Range(keyColB & intRowCounterB).Value)
    Set rngB = wsB.Range(keyColB & intRowCounterB)
    If dict.Exists(rngB.Value) Then
         wsB.Rows(intRowCounterB).delete
         intRowCounterB = intRowCounterB - 1
    End If
    intRowCounterB = intRowCounterB + 1
Loop
End Sub 
```

如果上述代码不在代码标签中，我深表歉意。这是我第一次在网上发布代码，我不知道我是否做得正确。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T01:55:30.230

我很尴尬地承认你分享的代码让我感到困惑......无论如何，我使用数组而不是循环遍历工作表值来重写它：

```
Option Explicit
Sub CleanDupes()
    Dim targetArray, searchArray
    Dim targetRange As Range
    Dim x As Long

    'Update these 4 lines if your target and search ranges change
    Dim TargetSheetName As String: TargetSheetName = "Sheet1"
    Dim TargetSheetColumn As String: TargetSheetColumn = "I"
    Dim SearchSheetName As String: SearchSheetName = "Do Not Call"
    Dim SearchSheetColumn As String: SearchSheetColumn = "A"

    'Load target array
    With Sheets(TargetSheetName)
        Set targetRange = .Range(.Range(TargetSheetColumn & "1"), _
                .Range(TargetSheetColumn & Rows.Count).End(xlUp))
        targetArray = targetRange
    End With
    'Load Search Array
    With Sheets(SearchSheetName)
        searchArray = .Range(.Range(SearchSheetColumn & "1"), _
                .Range(SearchSheetColumn & Rows.Count).End(xlUp))
    End With

    Dim dict As Object
    Set dict = CreateObject("Scripting.Dictionary")
    'Populate dictionary from search array
    If IsArray(searchArray) Then
        For x = 1 To UBound(searchArray)
            If Not dict.exists(searchArray(x, 1)) Then
                dict.Add searchArray(x, 1), 1
            End If
        Next
    Else
        If Not dict.exists(searchArray) Then
            dict.Add searchArray, 1
        End If
    End If

    'Delete rows with values found in dictionary
    If IsArray(targetArray) Then
        'Step backwards to avoid deleting the wrong rows.
        For x = UBound(targetArray) To 1 Step -1
            If dict.exists(targetArray(x, 1)) Then
                targetRange.Cells(x).EntireRow.Delete
            End If
        Next
    Else
        If dict.exists(targetArray) Then
            targetRange.EntireRow.Delete
        End If
    End If
End Sub 
```

编辑：因为它困扰我，我重新阅读了您提供的代码。它让我感到困惑，因为它没有按照我预期的方式编写并且失败，除非您只检查字符串值。我添加了注释来说明它在这个片段中所做的事情：

```
'Checks to see if the particular cell is empty.
Do While Not IsEmpty(wsA.Range(keyColA & intRowCounterA).Value)
    'Stores the cell to a range for no good reason.
    Set rngA = wsA.Range(keyColA & intRowCounterA)
    'Converts the value of the cell to a string because strValueA is a string.
    strValueA = rngA.Value
    'Checks to see if the string is in the dictionary.
    If Not dict.Exists(strValueA) Then
        'Adds the string to the dictionary.
        dict.Add strValueA, 1
    End If 
```

然后后来：

```
 'checks the value, not the value converted to a string.
 If dict.Exists(rngB.Value) Then 
```

这失败了，因为脚本字典不认为双精度等于字符串，即使双精度转换为字符串时它们是相同的。

修复您发布的代码的两种方法，或者将我刚刚显示的行更改为：

```
If dict.Exists(cstr(rngB.Value)) Then 
```

或者您可以更改`Dim strValueA As String`为`Dim strValueA`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T05:00:00.590

因为我有时间，所以这里重写了字典，而是使用了工作表函数。（受 Vlookup 评论的启发）。我不确定哪个会更快。

```
Sub CleanDupes()
    Dim targetRange As Range, searchRange As Range
    Dim targetArray
    Dim x As Long
    'Update these 4 lines if your target and search ranges change
    Dim TargetSheetName As String: TargetSheetName = "Sheet1"
    Dim TargetSheetColumn As String: TargetSheetColumn = "I"
    Dim SearchSheetName As String: SearchSheetName = "Do Not Call"
    Dim SearchSheetColumn As String: SearchSheetColumn = "A"

    'Load target array
    With Sheets(TargetSheetName)
        Set targetRange = .Range(.Range(TargetSheetColumn & "1"), _
                .Range(TargetSheetColumn & Rows.Count).End(xlUp))
        targetArray = targetRange
    End With
    'Get Search Range
    With Sheets(SearchSheetName)
        Set searchRange = .Range(.Range(SearchSheetColumn & "1"), _
                .Range(SearchSheetColumn & Rows.Count).End(xlUp))
    End With
    If IsArray(targetArray) Then
        For x = UBound(targetArray) To 1 Step -1
            If Application.WorksheetFunction.CountIf(searchRange, _
                                        targetArray(x, 1)) Then
                targetRange.Cells(x).EntireRow.Delete
            End If
        Next
    Else
        If Application.WorksheetFunction.CountIf(searchRange, targetArray) Then
            targetRange.EntireRow.Delete
        End If
    End If
End Sub 
```

# c# - 无法对c#中的数组值进行算术运算

> ID：13665307
> 
> 赞同：1
> 
> 时间：2012-12-02T00:41:31.300
> 
> 标签：c#, multidimensional-array, operation

我正在编写一个家庭作业程序，但我偶然发现了一个对我来说非常困难的问题。现在，我对 C# 很陌生，所以请多多包涵。这可能非常容易和明显。主题：C# 不允许我对多维数组值执行算术运算：

```
if(map[0,1] - map[0,0] == 10) 
```

此语句不返回值，而是向我抛出错误：

> 你调用的对象是空的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T00:46:11.167

您需要先声明数组。例子：

```
var map = new int[2,2]; 
```

创建一个具有四个整数元素的二维数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T00:51:10.797

错误听起来像您没有启动数组的值也不要忘记您使用了 [,] 数组

```
int[,] example = new int[,] { {11,5}, {1,10} };//initiate the array
if (example[0,0]-example[1,0] == 10)
{

} 
```

# vb.net - How to randomly select one row off table based on critera

> ID：13665309
> 
> 赞同：0
> 
> 时间：2012-12-02T00:42:07.087
> 
> 标签：vb.net, sql-server-ce

This is in Microsoft SQL Server CE, I have the following table

TABLE

```
[ID]  [eventID]  [factString] 
```

I am trying to randomly select the `factString` off of one row from the above table where the `eventID` equals a specific number.

```
 (randomly) 
 SELECT factString 
 FROM factTable 
 WHERE eventID = 1 
```

That is to say, if there are 10 rows where the `eventID` is 1, I want to return one row which is random every time.

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T08:50:54.350

您可以添加 ORDER BY Rand()

```
 SELECT factString 
 FROM factTable 
 WHERE eventID = 1 
 ORDER BY Rand() 
```

并且 LIMIT 1 仅适用于 1 行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T08:56:38.113

如果你只想要 1 行，你应该添加`top 1`SQL。

```
SELECT TOP 1 factString 
FROM factTable 
WHERE eventID = 1 
ORDER BY Rand() 
```

# php - In PHP, how to keep a process running to monitor for an event?

> ID：13665312
> 
> 赞同：0
> 
> 时间：2012-12-02T00:42:30.543
> 
> 标签：php, web-applications

I have a DBMS assignment to create an entire online bidding website that allows users to do many things like bidding on a timed auction, buy-it-now based on timed availability, and search among MANY more things. I've completed the website, with one minor exception: once a user wins a timed auction, that user must be notified that s/he is the winner and given 24hrs to checkout the item.

My early approaches consisted of simple PHP scripts that queried the DB when the user was on the page to see if the bid time ended and to see who the winner is, but there are two things wrong with that approach. 1\. The user has to constantly refresh to find out if s/he won -- if they're on the page shopping. 2\. If the user doesn't log into the site for a month after the auction ended, s/he will not know for a month that s/he won the auction and therefore misses the 24 hr window to checkout.

I've been reading about cron jobs, but my concern is that, since they are scheduled jobs, there are no convenient times to schedule the jobs so that they get processed efficiently. What I mean is that I can't continuously monitor and let every user who wins know instantly after the auction ends.

I also read on PHP exec( ), but I'm not sure that it's the tool that I need to run this task because once exec( ) finishes, it doesn't re-run.

So I guess, my question is if anyone has an idea of what I could implement to help me with this task.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T00:49:02.980

您应该使用 cron - 让它每分钟左右运行一次以检查数据库以查看某些拍卖是否结束。我认为您正在解释的更大问题是对用户的通知。如果是这种情况，他们可能不在网站上（或在他们获胜时出现在某个随机页面上），那么不要依赖通过网站通知他们，当然也不要依赖他们可能会或可能不会向网站发出的 PHP 请求。相反，考虑让 cron 调用 PHP 来检查获胜者，向他们发送电子邮件以通知他们。

想想 Facebook（只是因为它的用户群是最普遍的体验示例）——如果你在网站上，他们会提供一个通知区域，但如果你有一段时间不上，他们会向你发送一封电子邮件，让你知道发生了什么事。这是你应该做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T00:46:04.317

您应该重新考虑使用 cron 调度，您可以以非常快的间隔运行作业。

# javascript - Scroll a page with touch events

> ID：13665313
> 
> 赞同：3
> 
> 时间：2012-12-02T00:42:50.600
> 
> 标签：javascript, html, mobile, scroll, touch

I have a website page and I've added to the body of the page touch events. More exactly for swipe right and swipe left. Since the event listener is added to the body of the page and I have added event.preventDefault(); i can't scroll the page any more.

How can i scroll the page in the browser ?

P.S. The code is pure javascript / library agnostic.

Edit #1\. This site viewed in mobile seems to do it [http://swipejs.com/](http://swipejs.com/) . It slides the tabs right to left and back as well as scroll the website. I just can't seen in the code how :(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T02:24:59.940

使用`iscroll`插件。它对你有帮助。

见例子：[http ://cubiq.org/dropbox/iscroll4/examples/simple/](http://cubiq.org/dropbox/iscroll4/examples/simple/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-07T10:09:46.140

我有与没有“preventDefault（）”的刷卡相同的问题。因为我想实现一个pulltorefresh的效果，所以只能阻止pulldown事件，不能阻止pullup。像这样的代码：

```
function touchBindMove(evt){
    //evt.preventDefault();
    try{
        var deviceHeight = window.innerHeight;
        var touch = evt.touches[0]; //获取第一个触点  
        var x = Number(touch.pageX); //页面触点X坐标  
        var y = Number(touch.pageY); //页面触点Y坐标  
        //记录触点初始位置  

        if((y - offsetStart) > 0 && document.body.scrollTop == 0){
            evt.preventDefault();
            var page = document.getElementsByClassName('tweet-page')[0];
            var rate = 0;

            end = x;
            offsetEnd = y;
            rate = (offsetEnd - offsetStart) / (2 * deviceHeight);

            //tool.print(rate);
            easing.pullMotion(page, rate);
        }

    }catch(e){
        alert(e.message);
    }
} 
```

“y - offsetStart”判断事件是否下拉，“document.body.scrollTop == 0”判断滚动条是否在中间。也许它可以帮助你一点点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T01:02:21.147

不幸的是，没有简单的答案。最好的方法是构建智能手势识别器。或者使用这样的东西（对于 Safari Mobile）：

[http://mud.mitplw.com/JSGestureRecognizer/#single-gesture](http://mud.mitplw.com/JSGestureRecognizer/#single-gesture)

您会注意到，当您触摸手势识别器时，没有滚动。但是，您可以使识别器的回调滚动页面。

想知道为什么它只说它支持 Safari 移动版？那是因为 Safari 移动版有自己的一组触摸事件。但是，您可以将其作为开始并尝试添加对其他平台的支持。

# jsf - CAS + LDAP + JSF 认证

> ID：13665315
> 
> 赞同：1
> 
> 时间：2012-12-02T00:43:11.630
> 
> 标签：jsf, ldap, cas

我正在做一个项目，我正在使用 LDAP+CAS 进行身份验证。

我为 LDAP 查询创建了一个外观类（用于获取用户、姓名和邮件）。

我的问题是：如何在验证后测试用户是否被允许访问此页面并在显示 jsf 页面之前存在于应用程序数据库中。（如何在显示 jsf 页面之前配置我的应用程序进行测试）。

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T04:33:28.470

对不起，我不知道 CAS 是什么意思，但我使用 JAAS+LDAP+JBoss 来授权和验证 JSF2 网络，希望对您有所帮助：

在您的 LDAP 服务器中创建下一个层次结构：

```
+ o=your-organization-name (partition) 
   + ou=users (organizationalUnit) 
      - uid=your-id-user (inetOrgPerson), add userPassword attribute 
   + ou=groups (organizationalUnit) 
      - cn=your-user-role (groupOfNames), add the uid before created 
```

JBoss 7.1 (standalone.xml) 上的安全域：

```
 <subsystem xmlns="urn:jboss:domain:security:1.1">
            <security-domains>
             ...
 <security-domain name="SecurityRealm" cache-type="default">
                    <authentication>
                        <login-module code="org.jboss.security.auth.spi.LdapLoginModule" flag="required">
                            <module-option name="java.naming.factory.initial" value="com.sun.jndi.ldap.LdapCtxFactory"/>
                            <module-option name="java.naming.provider.url" value="ldap://host-ldap-server:port-ldap-server/"/>
                            <module-option name="java.naming.security.authentication" value="simple"/>
                            <module-option name="principalDNPrefix" value="uid="/>
                            <module-option name="principalDNSuffix" value=",ou=users,o=your-organization-name"/>
                            <module-option name="rolesCtxDN" value="ou=groups,o=your-organization-name"/>
                            <module-option name="uidAttributeID" value="member"/>
                            <module-option name="matchOnUserDN" value="true"/>
                            <module-option name="roleAttributeID" value="cn"/>
                            <module-option name="roleAttributeIsDN" value="false"/>
                        </login-module>
                    </authentication>
                </security-domain>
            </security-domains> 
```

在你的 jboss-web.xml

```
<security-domain>SecurityRealm</security-domain> 
```

最重要的是：是否允许用户访问此页面？（web.xml）：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">

    <!-- Protected Areas -->
    <security-constraint>
         <display-name>Protected</display-name>
        <web-resource-collection>              
            <url-pattern>url-pages-you-want-protect</url-pattern>
            <http-method>GET</http-method>
            <http-method>POST</http-method>
        </web-resource-collection>
        <auth-constraint>
            <role-name>your-user-role</role-name>
        </auth-constraint>
        <user-data-constraint>
            <transport-guarantee>NONE</transport-guarantee>
        </user-data-constraint>
    </security-constraint>

    <!-- Validation By Form -->
    <login-config>
        <auth-method>FORM</auth-method>
        <form-login-config>
            <form-login-page>your-login-page</form-login-page>
            <form-error-page>your-error-page</form-error-page>
        </form-login-config>
    </login-config>

    <!-- Allowed Roles -->
    <security-role>
        <role-name>your-user-role</role-name>
    </security-role>
</web-app> 
```

# automapper-2 - 如何从源属性映射到目标？

> ID：13665316
> 
> 赞同：0
> 
> 时间：2012-12-02T00:43:16.640
> 
> 标签：automapper-2

我发誓我以前做过，但我现在似乎无法让它工作。基本上我得到一个`EndUser`包含 a `Site`，我想将它映射`Site`到一个`SiteInfo`对象。

这是我的地图配置：

```
Mapper.CreateMap<Site, SiteInfo>()
    .ForMember(dest => dest.SiteID, opt => opt.MapFrom( src => src.ID))
    .ForMember(dest => dest.CompanyID, opt => opt.MapFrom(src => src.Company.ID));

Mapper.CreateMap<EndUser, SiteInfo>()                
    .ForMember( dest => dest, opt => opt.MapFrom(src => src.Site )); 
```

所以`EndUser.Site`应该可以映射到`SiteInfo`。我可以通过调用在外面做到这一点`Mapper.Map<SiteInfo>(EndUser.Site)`。我认为直接从最终用户映射到位置信息只是更简洁的语法。

那么我怎样才能直接从`EndUser`to映射`SiteInfo`呢？基本上这是我想写的代码：

```
var user = mcp.Users.GetEndUser(userAddress.Address);
var siteInfo = Mapper.Map<SiteInfo>(user); 
```

目前我正在通过`EndUser.Site`这样的映射来解决这个问题：

```
var user = GetEndUser(emailAddress);
            var siteInfo = user == null 
                            ? null as SiteInfo 
                            : Mapper.Map<SiteInfo>(user.Site); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T01:33:34.120

您想映射`Location`到`SiteInfo`或`LocationInfo`吗？`dest`您在`EndUser`->映射中映射到的属性是什么`SiteInfo`？是否`SiteInfo`同时包含`Location`和`EndUser`属性？

没有这些信息，我只是猜测，但您是否正在尝试做这样的事情？

```
var rc = Mapper.Map<SiteInfo>(endUser);
rc = Mapper.Map(endUser.Location, rc); 
```

**更新**

因此，如果我理解正确，您是否在进行这样的映射？

```
Mapper.CreateMap<EndUser, SiteInfo>()
    .ForMember(dest => dest.SiteID, opt => opt.MapFrom( src => src.Site.ID))
    .ForMember(dest => dest.CompanyID, opt => opt.MapFrom(src => src.Site.Company.ID)); 
```

# c - 用C制作图表

> ID：13665317
> 
> 赞同：0
> 
> 时间：2012-12-02T00:43:21.630
> 
> 标签：c, charts

如何[`charts`](http://en.wikipedia.org/wiki/Chart)用 C 语言制作？我是否需要学习 X11/OpenGL 或等价物和高级数学知识，或者有一个库可以为我做这件事吗？要求是用 C 语言编写的，可移植（UNIX/Windows），并允许在非开源的专有软件中使用。

假设通过 X11/OpenGL/Allegro 等进行操作有多难？我从来没有接触过这样的图书馆。

我现在想到的另一个问题：使用 Gtk+ 可以做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T02:53:21.150

你可以使用 GNU Plot。它有[C API](http://ndevilla.free.fr/gnuplot/)。

# c++ - C++、ANTLR 和向量

> ID：13665320
> 
> 赞同：1
> 
> 时间：2012-12-02T00:43:35.203
> 
> 标签：c++, vector, antlr, antlr3

我有一个 ANTLR 规则，它会返回一个向量：

```
main returns [std::vector<int> v]
        :
        ('ERROR' t3=INT{v.push_back(atoi((const char*)$t3.text->chars));}
        '='t4=INT{v.push_back(atoi((const char*)$t4.text->chars));}
        ); 
```

然后我从 C++ 调用它并尝试获取矢量数据。

但是，我的问题是 ANTLR3 自动将向量 v 初始化为 NULL，这是不允许的，并且给了我一个错误。

如果我生成 antlr 的 C++ 输出并尝试使用我的项目进行编译，则会出现错误。

我手动转到 ANTLR 输出的解析文件并将设置删除为 NULL 选项并再次编译，一切都解决了。

我可能会找到解决此问题的方法：

1）自己从ANTLR初始化向量（不知道如何初始化向量）

2）防止ANTLR初始化我的向量（不确定是否可以完成）

3）总是手动去改变初始化（不好的做法）

4）找到另一种返回向量的方法，尝试返回指向数组的指针我得到以下错误：

```
error: conversion from ‘std::vector<int, std::allocator<int> >*’ to non-scalar type ‘std::vector<int, std::allocator<int> >’ requested 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T18:29:45.573

我想你想做这样的事情：

```
main returns [std::vector<int> *v]
:
@init { v = new std::vector<int>(); }
( rule content, using *v in actions ); 
```

然后 ANTLR 可以将您的返回值初始化为 NULL，我认为它总是这样做的。@init 块创建一个空向量供您使用。

当然，您还需要实际使用像 shared_ptr 这样的智能指针来避免潜在的内存泄漏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T01:40:53.930

你可以这样初始化向量：

```
vector<int> a(2,3); //vector a contains 2 elements: 3 and 3
a[0] = 4;//vector a contains 2 elements: 4 and 3
vector<int> b;
b = a; 
```

还有其他一些方法可以在这里查看：[http ://www.cplusplus.com/reference/vector/vector/vector/](http://www.cplusplus.com/reference/vector/vector/vector/)

编辑：

如果你想用零初始化：

```
vector<int> a(2); 
```

应该做的工作，向量 a 将包含 2 个零。

# visual-studio - 在 Visual Studio 调试中扩展 IEnumerable 结果视图的快捷方式

> ID：13665322
> 
> 赞同：13
> 
> 时间：2012-12-02T00:43:40.753
> 
> 标签：visual-studio, debugging, ienumerable, visual-studio-debugging

当我在 Visual Studio 中调试（截至 2012 年）并将鼠标悬停在变量上以探索所有属性时，我明确需要按下**展开结果视图将枚举 IEnumerables**上的 IEnumerable 按钮。

如我一般~~天生懒惰~~一个超级高效的编码器我希望有某种快捷方式，比如双击或热键。有没有？

![巨大的距离](../Images/afa9aed110915e3c96f37e260b99b03d.png)

**更新**

@Alex Essilfie 在 Uservoice 上创建了一个建议。在 VS2013 发布之前点击[此链接投票！](http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/4329630-automatically-populate-ienumerable-results-in-data)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-21T08:06:42.783

您可以安装我为 Visual Studio 创建的名为[OzCode](http://www.oz-code.com)的商业扩展，它增强了 VS 调试体验并替换了 Visual Studio 的 UI 以实现悬停 DataTip，而且由于我也是一个超级**懒惰**的编码器，所以我决定不需要用户在展开“结果视图”节点之前单击单独的按钮。

另一种效率并不高但不需要使用鼠标的解决方案是按 Shift+F9（弹出 QuickWatch 窗口），然后输入“cats,results”，然后按 Enter。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-09T04:51:47.513

在 VS 中可能没有默认的键盘快捷键，但是如果你去工具/选项然后环境/键盘，你可以为任何命令添加你自己的快捷键 - 如果你能弄清楚你需要哪个...

# twitter - 在网站上嵌入 Twitter 提要

> ID：13665325
> 
> 赞同：2
> 
> 时间：2012-12-02T00:44:04.013
> 
> 标签：twitter, embed

我正在尝试将来自 Twitter 帐户的最新推文嵌入网站 - www.CochlearImplantOnline.com 在侧边栏上。我正在使用这段代码：

```
<script type="text/javascript" src="http://twitter.com/javascripts/blogger.js"></script>
<script type="text/javascript" src="http://api.twitter.com/1/statuses/user_timeline/cochlearimplant.json?callback=twitterCallback2&count=3"></script> 
```

当我实现这段代码时，它根本没有出现。我可能做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T02:52:10.203

这看起来不像 twitter 小部件中用于嵌入提要的代码。你确定你是从那个小部件复制的吗？这是我在我的帐户上复制小部件嵌入代码时的样子：

```
 <a class="twitter-timeline" href="https://twitter.com/marycamacho" data-widget-id="275430111547887616">Tweets by @marycamacho</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-27T15:30:29.193

转到[publish.twitter.com](https://publish.twitter.com)并将您的 twitter URL 放入搜索框中，例如。[https://twitter.com/Twitter](https://twitter.com/Twitter) 然后您将获得您的 twitter 提要的嵌入式代码。您也可以自定义。

# html - HTML 5 视频标签不显示视频

> ID：13665327
> 
> 赞同：1
> 
> 时间：2012-12-02T00:44:11.740
> 
> 标签：html

```
<!DOCTYPE html>
<html>
    <body>

        <video width="320" height="240" controls="controls" autoplay="autoplay">
            <source src="movie.ogg" type="video/ogg">
            <source src="movie.mp4" type="video/ mp4">
            <source src="movie.webm" type="video/webm">
            <object data="movie.mp4" width="320" height="240">
                <embed width="320" height="240" src="movie.swf">
            </object>
        </video>
    </body>
</html> 
```

我试图让它工作，但它没有工作。我正在使用ie 8 和firefox 进行测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T00:47:56.083

我认为

```
<source src="movie.mp4" type="video/ mp4"> 
```

应该

```
 <source src="movie.mp4" type="video/mp4"> 
```

你有额外的空间

# java - （Java 中的线程池）线程数量的增加会导致简单的 for 循环变慢。为什么？

> ID：13665331
> 
> 赞同：5
> 
> 时间：2012-12-02T00:44:45.973
> 
> 标签：java, multithreading, concurrency, threadpool, java.util.concurrent

我有一些很容易并行化的工作，我想使用 Java 线程在我的四核机器上拆分工作。这是一种应用于旅行商问题的遗传算法。这听起来不容易并行化，但第一个循环很容易并行化。第二部分我谈论实际演变可能是也可能不是，但我想知道我是否因为我实现线程的方式而变慢，或者它是否是算法本身。

此外，如果有人对我应该如何实施我正在尝试做的事情有更好的想法，那将非常感激。

在 main() 中，我有这个：

```
 final ArrayBlockingQueue<Runnable> queue = new ArrayBlockingQueue<Runnable>(numThreads*numIter);
 ThreadPoolExecutor tpool = new ThreadPoolExecutor(numThreads, numThreads, 10, TimeUnit.SECONDS, queue);
 barrier = new CyclicBarrier(numThreads);
 k.init(tpool); 
```

我有一个在 init() 内部完成的循环，如下所示：

```
for (int i = 0; i < numCities; i++) {
    x[i] = rand.nextInt(width);
    y[i] = rand.nextInt(height);
} 
```

我改成这样：

```
int errorCities = 0, stepCities = 0;
stepCities = numCities/numThreads;
errorCities = numCities - stepCities*numThreads;

// Split up work, assign to threads                                                                        
for (int i = 1; i <= numThreads; i++) {
    int startCities = (i-1)*stepCities;
    int endCities = startCities + stepCities;

    // This is a bit messy...                                                                              
    if(i <= numThreads) endCities += errorCities;
    tpool.execute(new citySetupThread(startCities, endCities));
} 
```

这是 citySetupThread() 类：

```
public class citySetupThread implements Runnable {
    int start, end;

    public citySetupThread(int s, int e) {
        start = s;
        end = e;
    }
    public void run() {
        for (int j = start; j < end; j++) {
            x[j] = ThreadLocalRandom.current().nextInt(0, width);
            y[j] = ThreadLocalRandom.current().nextInt(0, height);
        }

        try {
            barrier.await();
        } catch (InterruptedException ie) {
            return;
        } catch (BrokenBarrierException bbe) {
            return;
        }
    }
} 
```

上面的代码在程序中运行一次，所以它是我的线程构造的一个测试用例（这是我第一次使用 Java 线程）。我在一个真正的关键部分实现了同样的事情，特别是遗传算法的进化部分，其类如下：

```
public class evolveThread implements Runnable {
    int start, end;

    public evolveThread(int s, int e) {
        start = s;
        end = e;
    }
    public void run() {
        // Get midpoint                                                                                            
        int n = population.length/2, m;

        for (m = start; m > end; m--) {
            int i, j;
            i = ThreadLocalRandom.current().nextInt(0, n);

            do {
                j = ThreadLocalRandom.current().nextInt(0, n);
            } while(i == j);

            population[m].crossover(population[i], population[j]);
            population[m].mutate(numCities);
        }

        try {
            barrier.await();
        } catch (InterruptedException ie) {
            return;
        } catch (BrokenBarrierException bbe) {
            return;
        }

    }
} 
```

它存在于在 init() 中调用的函数 Evolution() 中，如下所示：

```
for (int p = 0; p < numIter; p++) evolve(p, tpool); 
```

是的，我知道这不是非常好的设计，但出于其他原因，我坚持使用它。进化内部是相关部分，如下所示：

```
// Threaded inner loop                                                                                     
int startEvolve = popSize - 1,
endEvolve = (popSize - 1) - (popSize - 1)/numThreads;

// Split up work, assign to threads                                                                        
for (int i = 0; i < numThreads; i++) {
    endEvolve = (popSize - 1) - (popSize - 1)*(i + 1)/numThreads + 1;
    tpool.execute(new evolveThread(startEvolve, endEvolve));
    startEvolve = endEvolve;
}

// Wait for our comrades                                                                                   
try {
     barrier.await();
} catch (InterruptedException ie) {
     return;
} catch (BrokenBarrierException bbe) {
     return;
}

population[1].crossover(population[0], population[1]);
population[1].mutate(numCities);
population[0].mutate(numCities);

// Pick out the strongest                                                                                      
Arrays.sort(population, population[0]);
current = population[0];
generation++; 
```

我真正想知道的是：

*   “队列”有什么作用？我是否可以为池中的所有线程执行的尽可能多的作业创建队列？如果大小不够大，我会得到 RejectedExecutionException。我只是决定做 numThreads*numIterations 因为那会有多少工作（对于我之前提到的实际进化方法）。不过这很奇怪..如果barrier.await（）正在工作，我不应该这样做，这导致我......

*   我是否正确使用了 barrier.await()？目前我在两个地方都有它：在 Runnable 对象的 run() 方法中，以及在执行所有作业的 for 循环之后。我原以为只需要一个，但如果我删除一个或另一个，我会得到错误。

*   我怀疑线程的争用，因为这是我可以从荒谬的减速中收集到的唯一东西（它确实与输入参数成比例）。我想知道这是否与我如何实现线程池和障碍有关。如果没有，那么我想我将不得不查看 crossover() 和 mutate() 方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T01:25:16.470

首先，我认为您打算如何使用 CyclicBarrier 可能存在错误。目前，您正在使用执行程序线程的数量作为参与方的数量对其进行初始化。但是，您还有另一方；主线程。所以我认为你需要这样做：

```
barrier = new CyclicBarrier(numThreads + 1); 
```

我认为这应该可行，但我个人认为这是对屏障的奇怪使用。

当使用工作队列线程池模型时，我发现使用 Semaphore 或 Java 的 Future 模型更容易。

对于信号量：

```
class MyRunnable implements Runnable {
  private final Semaphore sem;

  public MyRunnable(Semaphore sem) {
    this.sem = sem;
  }

  public void run() {
    // do work

    // signal complete
    sem.release()
  }
} 
```

然后在你的主线程中：

```
Semaphore sem = new Semaphore(0);

for (int i = 0; i < numJobs; ++i) {
  threadPool.execute(new MyRunnable(sem));
}

sem.acquire(numJobs); 
```

它确实与屏障做同样的事情，但我发现更容易考虑工作任务“发出信号”它们已完成，而不是再次与主线程“同步”。

例如，如果您查看[CyclicBarrier JavaDoc](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/CyclicBarrier.html)中的示例代码，则调用`barrier.await()`是在 worker 内部的循环内。所以它实际上是在同步多个长时间运行的工作线程，而主线程没有参与屏障。`barrier.await()`在循环外的工作人员结束时调用更多的是信号完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T11:28:23.703

当您增加任务数量时，您会增加使用每个任务添加的开销。这意味着您希望尽量减少任务数量，即与您拥有的 CPU 数量相同。对于某些任务，当工作负载不均匀时，使用双倍 CPU 数量可能会更好。

BTW：您不需要在每个任务中设置障碍，您可以通过调用每个任务来等待每个任务的未来完成`get()`。

# java - Bean 配置 xml 文件头中的错误 -

> ID：13665332
> 
> 赞同：1
> 
> 时间：2012-12-02T00:45:03.270
> 
> 标签：java, spring-mvc, xsd

在 apache tomcat 上运行我的应用程序时出现以下错误。

```
HTTP Status 500 - Servlet.init() for servlet spring threw exception 
```

根本原因

```
org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException: 
Line 11 in XML document from ServletContext resource [/WEB-INF/spring-servlet.xml] is invalid;
 nested exception is org.xml.sax.SAXParseException: cvc-elt.1: Cannot find the declaration of element 'beans'. 
```

我的 spring-context.xml 是这个

```
 <?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans http://java.sun.com/xml/ns/javaee" 
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
     xmlns:cotext="http://www.springframework.org/schema/context"
     xmlns:mvc="http://www.springframework.org/schema/mvc"
     xmlns:beans="http://www.springframework.org/schema/beans" 
     xsi:schemaLocation="http://www.springframework.org/schema/beans
                         http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
                         http://www.springframework.org/schema/context
                         http://www.springframework.org/schema/context/spring-context-3.0.xsd
                         http://www.springframework.org/schema/mvc">

     <mvc:annotation-driven/>
     <cotext:component-scan base-package="springmvc"/> 
```

我试过[https://jira.springsource.org/browse/SPR-3372](https://jira.springsource.org/browse/SPR-3372)没有运气。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T01:32:12.017

在我看来，几件事：

1）您必须删除 xmlns 属性中的“ [http://java.sun.com/xml/ns/javaee](http://java.sun.com/xml/ns/javaee) ”。我认为这是这里的主要问题。根据规范，“xmlns”属性不能采用多个 URI：http: [//www.w3schools.com/xml/xml_namespaces.asp](http://www.w3schools.com/xml/xml_namespaces.asp)

2）一些XML库不喜欢XML文件前面的空格（特别是Eclipse会抱怨）

3) xsi:schemaLocation 值缺少 mvc 的位置 URI。它应该看起来像这样：

```
 xsi:schemaLocation="http://www.springframework.org/schema/beans
               http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
               http://www.springframework.org/schema/context
               http://www.springframework.org/schema/context/spring-context-3.0.xsd
               http://www.springframework.org/schema/mvc
               http://www.springframework.org/schema/context/spring-mvc-3.0.xsd"> 
```

您也可以像之前的答案所建议的那样删除额外的“beans”声明，除非您出于某种原因真的想使用“beans”命名空间前缀。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T00:48:39.877

`xmlns:beans="http://www.springframework.org/schema/beans"`您在 XML 标头中有重复输入。删除它的一个实例并尝试如下：

```
<beans xmlns="http://www.springframework.org/schema/beans http://java.sun.com/xml/ns/javaee" 
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
 xmlns:cotext="http://www.springframework.org/schema/context"
 xmlns:mvc="http://www.springframework.org/schema/mvc"
 xsi:schemaLocation="http://www.springframework.org/schema/beans
               http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
               http://www.springframework.org/schema/context
               http://www.springframework.org/schema/context/spring-context-3.0.xsd
               http://www.springframework.org/schema/mvc">

      <mvc:annotation-driven/>
      <cotext:component-scan base-package="springmvc"/> 
```

# arrays - 用lua提取文件数据

> ID：13665333
> 
> 赞同：1
> 
> 时间：2012-12-02T00:45:08.463
> 
> 标签：arrays, function, search, lua

这就是我一直在尝试用 lua 做的事情。

我有大量图片在两台以上的计算机之间来回传输。我总是有多个图片副本。我希望我的 lua 代码从文件夹中获取所有文件名，并允许我输入程序将与文件名列表进行比较的搜索过滤器（文件名），并让我知道它是否已经在文件夹中或不是。在过去的几天里，我一直在绞尽脑汁想让它工作，但没有运气，到目前为止，我所得到的只是制作的文本框，我可以让 lua 返回有关文件夹中文件的数据：

```
local f = io.popen("dir \"C:\\mydir\\\"")
if f then
    print(f:read("*a"))
else
    print("failed to read")
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T01:33:28.927

标准 Lua 没有做你想做的事的机制。它是一种为嵌入式系统设计的脚本语言，与 Python 不同，Python 具有大量、功能丰富的运行时库。

如果你想这样做，你应该考虑使用[Lua FileSystem 模块](http://keplerproject.github.com/luafilesystem/index.html)。它可以获取目录列表之类的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T04:22:33.013

如何从某个文件夹中获取文件名数组：

```
local function get_files(path, prepend_path_to_filenames)
   if path:sub(-1) ~= '\\' then
      path = path..'\\'
   end
   local pipe = io.popen('dir /b/a-d "'..path..'*.*" 2> nul')
   local output = pipe:read'*a'
   pipe:close()
   -- If your file names contain national characters
   -- output = convert_OEM_to_ANSI(output)
   local files = {}
   for filename in output:gmatch'[^\r\n]+' do
      if prepend_path_to_filenames then
         filename = path..filename
      end
      table.insert(files, filename)
   end
   return files
end

local array_of_files = get_files('C:\\mydir', false)
for _, fn in ipairs(array_of_files) do
   print(fn)
end 
```

如果路径不存在（空文件夹和不存在文件夹之间没有区别），将返回空数组。

# html - 我可以为列创建特定规则吗？

> ID：13665336
> 
> 赞同：0
> 
> 时间：2012-12-02T00:45:27.773
> 
> 标签：html, css, styles, multiple-columns

我创建了 3 组不同的列，但我希望能够以不同的方式设置每列的样式。

```
<div id="container">
    <div class="first">
        <div class="column">Featured Work</div>
        <div class="column">info</div>    
        <div class="column">info</div>
    </div>

    <div class="middle">
        <div class="column">News</div>
        <div class="column">middle column</div>    
        <div class="column">right column</div>
    </div>

    <div class="footer">
        <div class="column">body copy 1</div>
        <div class="column">body copy 2</div>    
        <div class="column">body copy 3</div>
    </div> 
```

这是我当前的代码：http: [//jsfiddle.net/TroyAlford/Cj6dj/2/](http://jsfiddle.net/TroyAlford/Cj6dj/2/)

我想用顶部和底部边框设置`featured work`和列的样式，并设置类型的样式。`news`两`Info`列以及`middle`和`Right`列将在其周围有完整的边界。

我会将每个类重命名为唯一的名称以实现此效果吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T01:01:23.753

你可以`:first-child`选择器 - [**DEMO**](http://jsfiddle.net/Cj6dj/4/)

```
#container .first div.column:first-child,
#container .middle div.column:first-child {
    border-width: 1px 0;
    color: #c00;
} 
```

# asp.net-mvc - 寻求关于 JS 捆绑的建议

> ID：13665338
> 
> 赞同：0
> 
> 时间：2012-12-02T00:45:52.757
> 
> 标签：asp.net-mvc, bundling-and-minification

我有一个 MVC 4.5 项目，其中大部分 UI 逻辑都组织在 jQuery 插件中。我想通过缩小和捆绑来保护我的代码（虽然我知道缩小只能起到保护作用，但它比将格式化和记录的源文件留在服务器上要好。）

理想情况下，我希望我的开发服务器按原样工作——文件是非缩小和分离的。但是，当我部署到生产服务器时，我希望删除源文件并且只有缩小的捆绑包可用。另请注意，在许多情况下，我的 jQuery 插件会从 JavaScript 代码加载其他插件（我使用 head.js），因此我不能为此使用 @Script.Render。

我使用什么技术——内置 MVC 捆绑、SquishIt、Bundler 还是我需要求助于 MSBuild 和 Microsoft Axaj Minifier？回顾一下，我想删除源 JS 文件，只留下生产中的缩小包，并且最好找到一种方法，不根据文件是否缩小来更改 head.js 引用。

谢谢你的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T19:44:20.717

只是想我会回答我最终在这里所做的事情：

回顾一下：我想通过缩小来混淆我的源文件，而不是在生产中暴露源 JS 文件。我还希望 head.js 将源文件 URL 解析为捆绑 URL：

*   将所有未缩小的 javascript 文件放在仅对管理员角色可见的文件夹中
*   使用 ASP.NET MVC 4.5 内置的捆绑来生成捆绑包
*   将我的 head.js 标记指向一个 MVC 控制器，该控制器返回 head.js 代码 + 一个在原始 URL 和捆绑 URL 之间具有外部引用的 javascript 数组（可从 BundleTable 静态对象获得）

捆绑发生在 ASP.NET 成员资格之外，因此即使源文件位于只能由管理员访问的文件夹中，也会生成捆绑包并可供匿名用户使用。然后，使用服务器端生成的包 URL 动态扩充 head.js 代码的技巧负责从 JS 文件调用包。

# jquery - 事件分配与 .live()

> ID：13665339
> 
> 赞同：2
> 
> 时间：2012-12-02T00:45:56.883
> 
> 标签：jquery, event-handling, live

前段时间，我曾经使用过这个解决方案：

```
$('<div class="ok" />')
.appendTo('body');

$('div.ok')
.live('click',function(){ alert(); }) 
```

现在我使用这个：

```
$('<div class="ok" />')
.appendTo('body')
.click(function(){ alert(); }) 
```

性能差异如何？我相信第二种解决方案更好，因为它不需要 live() 。是否总是这样（也有很多元素）？为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T00:53:00.360

> 性能差异如何？

好吧，当你以前使用`live`. `live`总是绑定到`document`并防止事件冒泡也是不可能的，因为事件是在它已经冒泡之后触发的。

从这个意义上说`live()`，对性能不是很友好。

您的第二个代码示例在创建对象时直接绑定到对象，与`live()`. 您现在可以事件防止事件冒泡等等。

与 using 相比，将创建时的事件直接`on()`绑定到元素，指定要绑定到的最接近的静态元素仅具有非常小的性能优势。

```
// Performs slightly better than on() but cannot be executed from anywhere unless the element is added at the same time.
$('<div class="ok" />').appendTo('body').click(function(){ alert(); }) 
```

尽管比在以通用方法添加元素之前能够绑定事件处理程序的好处要小。

下面的代码与您的第二个代码示例相同，但可以在通用方法中很好地执行，并且不必是添加动态元素的一部分。

```
// Can be called in a common init method for example and still work.
$(body).on('click', '.ok', function(){ alert();}) 
```

`on()`最大的好处是可以将元素的添加与事件的绑定分开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T00:52:38.357

第二种方法很可能提供微不足道的性能提升（假设您没有大量`div.ok`元素放入 DOM），因为不需要再次搜索 DOM。另一种选择是使用`html/props`签名代替：

```
$("<div>", { 
    'class': "ok",
    'click': function () {
        alert("You clicked the new element!");
    } 
}).appendTo("body"); 
```

演示：http: [//jsfiddle.net/w4Tj3/](http://jsfiddle.net/w4Tj3/)

请记住，`.live()`它已被弃用。如果您要使用事件委托，最好`.on()`从这里开始使用。但是，就您而言，您也不一定需要。相反，为了模仿`.live()`你会在以下位置设置一个监听器`document`：

```
$(document).on("click", ".ok", function () {
    alert("You clicked an .ok element!");
}); 
```

其工作方式是利用事件的冒泡行为。当您单击一个元素时，单击会向上遍历 DOM，直到最终到达该`document`对象。jQuery 然后检查发起点击的元素是否与我们的选择器 ( `.ok`) 匹配，如果匹配则运行匿名函数。

要查看更好的性能，请不要绑定到`document`，而是绑定到更接近动态添加的元素的东西。例如，如果您要动态添加`li`元素，请绑定到它们的父级`ol`或`ul`. 这样，事件在被处理之前就不需要传播太远了。

有了事件委托，您可以从动态添加本身中删除`click`逻辑：`div`

```
$("<div>", {'class': 'ok'}).appendTo("body"); 
```

# c# - SharpSvn SvnClient.GetLog 抛出 AccessViolationException

> ID：13665340
> 
> 赞同：1
> 
> 时间：2012-12-02T00:46:03.617
> 
> 标签：c#, .net, .net-4.0, access-violation, sharpsvn

我的应用程序因以下未处理的异常而崩溃：

```
System.AccessViolationException was unhandled
  HResult=-2147467261
  Message=Attempted to read or write protected memory. This is often an indication that other memory is corrupt.
  Source=SharpSvn
  StackTrace:
       at apr_pool_destroy(apr_pool_t* )
       at SharpSvn.Implementation.AprPool.Destroy()
       at SharpSvn.Implementation.AprPool.Dispose(Boolean )
       at SharpSvn.Implementation.AprPool.Dispose()
       at SharpSvn.SvnClient.InternalLog(ICollection`1 targets, Uri logRoot, SvnRevision altPegRev, SvnLogArgs args, EventHandler`1 logHandler)
       at SharpSvn.SvnClient.Log(Uri target, SvnLogArgs args, EventHandler`1 logHandler)
       at SharpSvn.SvnClient.GetLog(Uri target, SvnLogArgs args, Collection`1& logItems)
       at SourceLog.Plugin.Subversion.SubversionPlugin.CheckForNewLogEntries(Object state)
       at System.Threading.TimerQueueTimer.CallCallbackInContext(Object state)
       at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
       at System.Threading.TimerQueueTimer.CallCallback()
       at System.Threading.TimerQueueTimer.Fire()
       at System.Threading.TimerQueue.FireQueuedTimerCompletion(Object state)
       at System.Threading.QueueUserWorkItemCallback.System.Threading.IThreadPoolWorkItem.ExecuteWorkItem()
       at System.Threading.ThreadPoolWorkQueue.Dispatch()
       at System.Threading._ThreadPoolWaitCallback.PerformWaitCallback()
  InnerException: 
```

对 SharpSvn.SvnClient.GetLog 的调用在这里：[https ://github.com/tomhunter-gh/SourceLog/blob/2fa0632665550c18c9cd23500610704e3eaa35a2/SourceLog.Plugin.Subversion/SubversionPlugin.cs#L39](https://github.com/tomhunter-gh/SourceLog/blob/2fa0632665550c18c9cd23500610704e3eaa35a2/SourceLog.Plugin.Subversion/SubversionPlugin.cs#L39)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T00:49:35.833

看起来这是由于多个计时器回调实例同时调用 GetLog 以及该方法（通常是 SharpSvn？）不是线程安全的事实。我添加了一个静态锁对象，以确保一次只有一个线程调用 GetLog。

# objective-c - 使用委托方法扩展类

> ID：13665343
> 
> 赞同：1
> 
> 时间：2012-12-02T00:46:14.363
> 
> 标签：objective-c, ios, asihttprequest

我想扩展 ASIHTTPRequest 类，是的，我知道它不再被开发，但我已经完成了我的项目，我还没有时间完全替换它。我扩展它的原因是提供故障转移主机列表。

我的问题与 ASIHTTPRequest 委托方法有关，如何在我的扩展类中继承它们？我需要创建另一个协议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T00:55:00.990

大约8个月前，我和你的情况一样。我决定硬着头皮切换到 AFNetworking，我很高兴我做到了。使用这些委托方法很痛苦。要回答您的问题，您必须将您的类声明为您要处理的方法的委托。

如果您需要帮助切换，[请查看](https://stackoverflow.com/questions/10224251/networking-using-a-separate-thread-on-ios)我编写的 NetworkClient 类，以替换 ASI 中的所有委托方法。

# html - 无法将背景图像添加到导航菜单后面的标题

> ID：13665346
> 
> 赞同：1
> 
> 时间：2012-12-02T00:46:42.343
> 
> 标签：html, css, menu, header

所以基本上，我试图在我的导航菜单后面添加一个图像。最终我什至无法在标题中添加图像？无论我如何尝试它都不会出现。甚至在此之前，当它出现时，标题图像出现在菜单上方，关于我要查找的内容，而菜单位于图像的“顶部”。

**CSS**

```
#dolphincontainer{position:relative; color:#E0E0E0;
padding-top:40px;
width:100%;font-family:Helvetica,Arial,Verdana,sans-serif;}
#dolphinnav{position:relative;;font-size:16px;text-transform:uppercase;font-    weight:bold;padding:0 0 0 60px;}
#dolphinnav ul{margin:0;padding:0;list-style-type:none;width:auto;float:left;}
#dolphinnav ul li{display:block;float:left;margin:0 1px;margin-top:-22px;}
#dolphinnav ul li a{display:block;float:left;color:#3D3D3D;text-decoration:none;padding:8px;height:30px;width:60px;}
#dolphinnav ul li a span{padding:12px 20px 0 0;height:21px;float:left;}
#dolphinnav ul li a:hover{background-color:#3D3D3D ;}
#dolphinnav ul li a:hover span{display:block;color:white;width:auto;cursor:pointer;}

#dolphinnav ul li a.current span{display:block;width:auto; no-repeat top right;height:33px;}

#dolphin_inner{color: white; padding: 5px; font-size: 80%; height: 1em}

#dolphin_inner a:link, #dolphin_inner a:visited, #dolphin_inner a:active{color:#fff}
#dolphin_inner a:hover{color: white}

body {background-color:#000000;}
#header {
background:url(images/header.png);
}

.innercontent{display: none;}

#footer_menu ul{
list-style: none;
margin: 0;
padding: 10px 0 0 10px;
position:absolute;bottom:50px;    
font-family:Helvetica,Arial,Verdana,sans-serif;
font-weight:bold;
font-size:12px;
}
#footer_menu ul li{
padding:0;
margin: 0 0 0 30px;
display:inline;

}
#footer_menu ul li a:link,a:visited,a:focus,a:active{
text-decoration:  none;
color: #3D3D3D;

}
#footer_menu ul li a:hover{
text-decoration:  none;
color: #fff; 
} 
```

**HTML**

```
<body>

<div id"header">

<div id="dolphincontainer">
<div id="dolphinnav">
    <ul>
        <li><a href="index.html"><span>Home</span></a></li>
        <li><a href="about.html"><span>About</span></a></li>
    </ul>
</div>
<div id="dolphin_inner">
    <div id="about" class="innercontent"></div>
</div>
</div>
</div>
<script type="text/javascript">
//dolphintabs.init("ID_OF_TAB_MENU_ITSELF", SELECTED_INDEX)
dolphintabs.init("dolphinnav", 0)
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T00:58:11.840

一点 CSS 就可以解决问题：

```
 #dolphinnav{ background-image: url('image-url-relative-to-css.png');
              background-repeat: repeat-x; } 
```

或者不重复......

# c++ - What is a proper use-case of `std::nullptr_t` template parameters?

> ID：13665349
> 
> 赞同：26
> 
> 时间：2012-12-02T00:46:58.320
> 
> 标签：c++, templates

Today I came to know that C++ allows non-type template parameters of type `std::nullptr_t`:

```
template<std::nullptr_t N> struct A { };

template<std::nullptr_t N> void f() { } 
```

For the life of me, I cannot come up with any sensible use-case for these. Can anyone please come up with a rationale for this?

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-02T01:02:55.597

似乎允许使用指针类型和值来避免特殊情况模板的需要`std::nullptr_t`。那，用例看起来像这样：

```
template <typename T, T Ptr>
struct pointer_object {
    static T get_pointer() { return Ptr; }
};

int int_ptr(0);

typedef pointer_object<int*, &int_ptr> int_ptr_t;
typedef pointer_object<std::nullptr_t, nullptr> null_ptr_t; 
```

也就是说，指针值可以是模板参数，因此`nullptr`也应该是。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-02T01:01:36.417

我想它在这样的设置中最有用：

```
template <typename T, T Value> struct Foo;

Foo<int, 10> x;
Foo<std::nullptr_t, nullptr> y; 
```

这没有什么坏处。

（也许`std::integral_constant`就是一个例子。）

# c# - How to get browser name WCF Service

> ID：13665351
> 
> 赞同：1
> 
> 时间：2012-12-02T00:47:32.073
> 
> 标签：c#, wcf, browser, service

How do I get the string name of the browser (Chrome, Mozilla Firefox, ...) which Visual Studio opens when executing a WCF service?

I'm using Visual Studio 2012

The problem is that I'm using curl to test my service, and browser name is unknown when I use

```
HttpRequest Request = HttpContext.Current.Request;

string Browser = Request.Browser.Browser.ToString(); 
```

When I run my WCF Service it opens a browser. How do I get that browser name in Program?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T04:00:43.060

```
 if (Request.Browser.Type.Contains("IE")) // replace with your check
{
    ...
} 
else if (Request.Browser.Type.ToUpper().Contains("Chrome")) // replace with your check
{
    if (Request.Browser.MajorVersion  < v1)
    { 
        DoSomething(); 
    }
    ...
}
else { } 
```

# php - https 网站的某些部分

> ID：13665357
> 
> 赞同：0
> 
> 时间：2012-12-02T00:48:31.700
> 
> 标签：php, apache, url, https

这是我第一次`https`在我的服务器上安装这个，我想知道我将如何做到这一点。

我不希望我的网站拥有`https`全部内容，只是其中的一部分。比如说：

*   *https://mysite.com/register*
*   *https://mysite.com/login*
*   *https://mysite.com/user （以及***/user**之后的其他部分）

我希望浏览器强制使用其他链接`http`。

我需要知道的最佳方法或做法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T00:53:10.943

好的，https 的开销并非微不足道，但如果对某些事情使用 SSL 真的很重要，我建议将其全部设为 SSL。否则，浏览器会向新手吐出一些令人困惑的错误，说明有些事情是安全的，有些事情不安全。此外，如果您在错误的时刻不小心在 SSL 和非 SSL 之间切换，可能会暴露您可能不希望的用户数据。

简而言之，保持统一将使头痛降至最低。

我确信有人可以权衡 SSL 的开销。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T00:55:13.020

.htaccess 中的类似内容可能会解决您的问题：

```
RewriteEngine On
RewriteCond %{HTTPS} off
RewriteCond %{REQUEST_URI} ^/register|/login|/user$
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]
RewriteCond %{HTTPS} on
RewriteCond %{REQUEST_URI} !^/register|/login|/user$
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} 
```

# php - php数组合并

> ID：13665364
> 
> 赞同：1
> 
> 时间：2012-12-02T00:49:23.917
> 
> 标签：php, arrays

我有 3 个数组表示按日期分组的数据计数`$dummyArray1 = array('year' => array('month' => 'count'));`

```
$dummyArray1 = array(
    '2012' => array(
        '1' => 13,
        '2' => 22,
        '3' => 18,
        '5' => 19
     ),
    '2011' => array(
        '1' => '4',
        '3' => 13
     )
);

$dummyArray2 = array(
    '2012' => array(
        '1' => 44,
        '4' => 34,
        '5' => 38,
        '6' => 29
     ),
    '2011' => array(
        '1' => 9,
        '2' => 11,
        '3' => 1
     )
);

$dummyArray3 = array(
    '2012' => array(
        '2' => 5,
        '4' => 3,
        '6' => 1,
        '8' => 11
     ),
    '2011' => array(
        '3' => 9,
        '4' => 14,
        '9' => 9
     )
); 
```

我需要将它们分组到 1 个数组中，以便每个月我都会获得`count`每个数组的值。如果特定月份不存在计数数据，则应将其作为值`0`插入。`count`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T01:06:02.563

如果你做一个函数会更容易：

```
<?php

function groupMyArray($dummysArray)
{
   $result = array();
   foreach($dummysArray as $dummyArray):
      foreach($dummyArray as $year => $countarray):
          for($i = 1; $i <= 12; $i++):
              if(count($countarray[$i]) > 0){
                  $result[$year] = array($i => $countarray[$i]);
              }else{
                  $result[$year] = array($i => 0);
              }
          endfor;
      endforeach;
   endforeach;

   return $result;
} 
```

好的，知道你必须构造 $dummyArray：

```
$dummyArray = array(
    $dummyArray1,
    $dummyArray2,
    $dummyArray3
);

$dummyArraygroup = groupMyArray($dummyArray); 
```

?>

# php - IP 地址或访问者在我的网站上停留很长时间

> ID：13665365
> 
> 赞同：0
> 
> 时间：2012-12-02T00:49:24.553
> 
> 标签：php, cpu, cpu-usage, googlebot

我的 CPU 使用率很高，我观察到一些 IP 地址停留时间很长，点击次数也超过了 50000，并且网站上的时间达到了 10 小时。

```
ip address          time    hits   page view kb     website
159.0.93.164        10h     37,420  37,413  271 KB  mydomain.co.uk/page101.php 
```

请让我知道可能的可能性。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T00:58:32.827

使用fail2ban - 它可以更改您的防火墙以在给定时间段内尝试一定次数后阻止IP。如果它是一个机器人，它可能被代理了，所以你需要一个像 fail2ban 这样的自动化工具来在它们轮换到一个新的 IP 地址后“重新禁止”。他们迟早会用尽他们的代理出口点 IP 地址。

顺便说一句 - IP 解析为沙特电信 - 这是预期的吗？

# cuda - 纹理 <...> 在 VS 2012 和 Cuda 5.0 中不可接受：

> ID：13665367
> 
> 赞同：1
> 
> 时间：2012-12-02T00:49:35.370
> 
> 标签：cuda, visual-studio-2012, gpu

我有一个现有的应用程序可以在 CUDA 4.2 和 VS 2010 中编译和运行良好。我现在正在移植到一个具有 CUDA 5.0 和 VS 2012 的新系统。不幸的是我*必须*使用 VS 2012。

我按照在 VS 2012 中设置 CUDA 的步骤，就像在 Nvidia 论坛和[这个博客条目](http://blog.norture.com/2012/10/gpu-parallel-programming-in-vs2012-with-nvidia-cuda/)中一样，但是我的带有引用纹理的行的代码没有编译，例如：

文件：filter.cu

```
texture < float, cudaTextureType2D, cudaReadModeElementType> texRefEachRes_0;
texture < float, cudaTextureType2D, cudaReadModeElementType> texRefEachRes_1; 
```

如果我右键单击该文件，我看*不到*它的属性是 CUDA 等。所以听起来 VS 仍然不知道 CUDA？

我还需要在 VS 2012 中进行哪些调整才能编译此代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T15:43:02.077

我在 Cuda 5.0.targets 文件中输入错误；我的问题中引用的博客条目中给出的过程确实有效，而作为 Cuda 5.0 一部分包含的目标文件不正确。所以修复 xml 目标文件中的错误输入解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T04:52:48.633

在解决方案资源管理器中，右键单击该项目。选择构建自定义。选择 CUDA 自定义文件之一。

# c# - 如何在 .ASCX 文件中显示 .js 文件/Java 脚本块？

> ID：13665368
> 
> 赞同：0
> 
> 时间：2012-12-02T00:49:37.177
> 
> 标签：c#, javascript, user-controls

我试了又试，在谷歌上看了这里，但没有找到怎么做。我只是尝试编写一个简单的用户控件（.ascx）来显示不同类型的广告（它们都是脚本）。问题是通常它是一个复杂的脚本，所以有人（here）建议将脚本保存为 .JS 文件并从控制（.ascx）文件中调用它们。问题是：我该怎么做？试了很多时间，还是不行。我很沮丧......谁能给我一个如何做的示例代码？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T02:43:29.157

您可以使用以下方式将该“脚本文件”从用户控件附加到页面：

（取自[MSDN 中的此处](http://msdn.microsoft.com/en-us/library/kx145dw2.aspx)

```
public void Page_Load(Object sender, EventArgs e)
{
    // Define the name, type and url of the client script on the page.
    String csname = "ButtonClickScript";
    String csurl = "~/script_include.js";
    Type cstype = this.GetType();

    // Get a ClientScriptManager reference from the Page class.
    ClientScriptManager cs = Page.ClientScript;

    // Check to see if the include script exists already.
    if (!cs.IsClientScriptIncludeRegistered(cstype, csname))
    {
        cs.RegisterClientScriptInclude(cstype, csname, ResolveClientUrl(csurl));
    }
} 
```

通过这种方式，您可以将具有正确 url 的脚本文件包含到页面中。然后将在客户端加载，并假设您已正确编写所有内容，将按预期执行。

# php - JMSSerializerBundle：为每个属性指定组

> ID：13665369
> 
> 赞同：1
> 
> 时间：2012-12-02T00:50:11.907
> 
> 标签：php, symfony, jmsserializerbundle

我正在使用 Symfony2 和 JMSSerializerBundle 来构建 API。JMSSerializer 提供的用于设置使用组序列化对象的不同方法的系统非常有用，但是，我缺少一种方法来指定要在每个参数中序列化哪个组。例子：

我有一篇与用户（作者）相关的文章。文章和用户可以序列化为“列表”或“详细信息”，但是，我希望用户始终序列化为“列表”，以便从文章中检索（因为“详细信息”组保留使用获取用户并且只获取用户）。问题是如果我将序列化器设置为“details”，那么作者也被序列化为“details”。

在我看来，代码应该是这样的：

```
/**
 * @var SCA\APIBundle\Entity\User
 * @Groups({"list" => "list", "details" => "list"})
 */
private $author; 
```

其中数组的键表示父序列化的方式，值表示子序列化的方式。

任何线索我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T11:13:52.570

它不应该在组合对象上完成，而是在组合上完成。

就您而言，我想您有类似的情况：

```
class Article
{
    /**
     * @var User
     * @Groups({"list", "details"})
     */
    private $author;
}

class User
{
    private $firstName;
    private $lastName;
} 
```

所以如果你想在序列化组合对象时暴露firstName属性，你需要在User对象中定义相同的组。

它成为了：

```
class Article
{
    /**
     * @var User
     * @Groups({"list", "details"})
     */
    private $author;
}

class User
{
    /*
     * @Groups({"list"})
     */
    private $firstName;
    private $lastName;
} 
```

如果您需要更多控制，您可以定义更明确的组，例如“article-list”、“user-firstname”、“user-list-minimal”等。

由您决定采用的最佳策略。

# jakarta-ee - 未指定顺序时，将 EJB jar 缓慢部署到 JBoss 5.1

> ID：13665370
> 
> 赞同：1
> 
> 时间：2012-12-02T00:50:53.837
> 
> 标签：jakarta-ee, jboss, jboss5.x

我将几个包含 EJB 的 JAR 部署到 JBoss 5.1.0（主要是本地的，但其中一些是远程的）。这些 EJB 是相互关联的，并且对其他 EJB 有一些依赖性（主要声明为 @EJB(mappedBy = "...")）。如果我重命名 JAR 文件的名称，以便它们与它们之间的依赖关系一致（大多数独立 JAR 首先，最依赖最后），部署速度很快（所有 160 个 bean 大约需要 40 秒）。但是只需定期订购，无需通过欺骗文件名来强制容器部署，部署仍然成功，但速度非常慢（所有 160 个 bean 大约需要 6 分钟）。

当我比较这两个（调试级别）日志时，部署了许多 bean（在快速变体中，强制顺序），如下所示：

```
DEBUG [org.jboss.ejb.txtimer.EJBTimerServiceImpl:228] (main) createTimerService: org.jboss.ejb.txtimer.TimerServiceImpl@4c438fce
DEBUG [org.jboss.ejb.txtimer.NoopPersistencePolicy:228] (main) Noop on listTimerHandles
DEBUG [org.jboss.beans.metadata.plugins.AbstractInjectionValueMetaData:228] (main) jboss.j2ee:jar=platform-common-db-1.0.0-SNAPSHOT.jar,name=UserDAOBean,service=EJB3: Contextual injection usage (class -> classloader): interface javax.transaction.TransactionManager -> BaseClassLoader@6422b8ff{vfsfile:/home/jboss/admin-jboss/admin-jboss-dev-server/target/jboss5-admin-mk/server/admin/conf/jboss-service.xml} defined by AbstractPropertyMetaData@456dbdf4{name=transactionManager value=AbstractInjectionValueMetaData@27d201c8{value=null injectionType=BY_CLASS propertyMetaData=transactionManager}}
DEBUG [org.jboss.beans.metadata.plugins.AbstractInjectionValueMetaData:228] (main) jboss.j2ee:jar=platform-common-db-1.0.0-SNAPSHOT.jar,name=UserDAOBean,service=EJB3: Contextual injection usage (class -> classloader): interface org.jboss.jca.spi.ComponentStack -> BaseClassLoader@6422b8ff{vfsfile:/home/jboss/admin-jboss/admin-jboss-dev-server/target/jboss5-admin-mk/server/admin/conf/jboss-service.xml} defined by AbstractPropertyMetaData@4c7305e4{name=cachedConnectionManager value=AbstractInjectionValueMetaData@1387e2f2{value=null injectionType=BY_CLASS propertyMetaData=cachedConnectionManager}}
DEBUG [org.jboss.beans.metadata.plugins.AbstractInjectionValueMetaData:228] (main) jboss.j2ee:jar=platform-common-db-1.0.0-SNAPSHOT.jar,name=UserDAOBean,service=EJB3: Contextual injection usage (class -> classloader): interface org.jboss.ejb3.timerservice.spi.TimerServiceFactory -> BaseClassLoader@6422b8ff{vfsfile:/home/jboss/admin-jboss/admin-jboss-dev-server/target/jboss5-admin-mk/server/admin/conf/jboss-service.xml} defined by AbstractPropertyMetaData@3e4487e2{name=timerServiceFactory value=AbstractInjectionValueMetaData@535265e{value=null injectionType=BY_CLASS propertyMetaData=timerServiceFactory}}
INFO  [org.jboss.ejb3.session.SessionSpecContainer:296] (main) Starting jboss.j2ee:jar=platform-common-db-1.0.0-SNAPSHOT.jar,name=UserDAOBean,service=EJB3
DEBUG [org.jboss.ejb3.tx.UserTransactionImpl:228] (main) new UserTx: org.jboss.ejb3.tx.UserTransactionImpl@475e2675
DEBUG [org.jboss.ejb3.EJBContainer:228] (main) Linked java:comp/TransactionSynchronizationRegistry to JNDI name: java:TransactionSynchronizationRegistry
INFO  [org.jboss.ejb3.EJBContainer:296] (main) STARTED EJB: platform.db.dao.bean.UserDAOBean ejbName: UserDAOBean
DEBUG [org.jboss.ejb3.session.SessionContainer:228] (main) Registered jboss.j2ee:jar=platform-common-db-1.0.0-SNAPSHOT.jar,name=UserDAOBean,service=EJB3 with org.jboss.aop.Dispatcher via InvokableContextClassProxyHack at key jboss.j2ee:jar=platform-common-db-1.0.0-SNAPSHOT.jar,name=UserDAOBean,service=EJB3
DEBUG [org.jboss.ejb3.common.registrar.plugin.mc.Ejb3McRegistrar:228] (main) Returning from name "org.jboss.ejb3.JndiRegistrar.Session.SLSBJndiRegistrar": org.jboss.ejb3.proxy.impl.jndiregistrar.JndiStatelessSessionRegistrar@35ac3082
DEBUG [org.jboss.ejb3.proxy.impl.jndiregistrar.JndiSessionRegistrarBase:228] (main) Found Session Bean: UserDAOBean
DEBUG [org.jboss.ejb3.proxy.impl.jndiregistrar.JndiSessionRegistrarBase:228] (main) Registering org.jboss.ejb3.proxy.impl.factory.session.stateless.StatelessSessionLocalProxyFactory@54353afffor EJB UserDAOBean under key "ProxyFactory/platform-common-db-1.0.0-SNAPSHOT/UserDAOBean/UserDAOBean/local"...
DEBUG [org.jboss.ejb3.proxy.impl.factory.ProxyFactoryBase:228] (main) Started: org.jboss.ejb3.proxy.impl.factory.session.stateless.StatelessSessionLocalProxyFactory@54353aff
DEBUG [org.jboss.ejb3.proxy.impl.factory.session.SessionProxyFactoryBase:228] (main) Created Session Bean Business Interface-Specific Proxy Constructor implementing "platform.db.dao.UserDAO"
DEBUG [org.jboss.ejb3.proxy.impl.factory.session.SessionProxyFactoryBase:228] (main) Created Session Bean Default EJB3 Business Proxy Constructor implementing [interface platform.db.dao.UserDAO]
DEBUG [org.jboss.ejb3.common.registrar.plugin.mc.Ejb3McRegistrar:228] (main) Installed in AbstractKernelController@5a965654{null} at "ProxyFactory/platform-common-db-1.0.0-SNAPSHOT/UserDAOBean/UserDAOBean/local": org.jboss.ejb3.proxy.impl.factory.session.stateless.StatelessSessionLocalProxyFactory@54353aff
DEBUG [org.jboss.ejb3.proxy.impl.jndiregistrar.JndiSessionRegistrarBase:228] (main) Adding RefAddr to Reference: Type "ProxyFactoryKey", Content "ProxyFactory/platform-common-db-1.0.0-SNAPSHOT/UserDAOBean/UserDAOBean/local"
DEBUG [org.jboss.ejb3.proxy.impl.jndiregistrar.JndiSessionRegistrarBase:228] (main) Adding RefAddr to Reference: Type "EJB Container Name", Content "jboss.j2ee:jar=platform-common-db-1.0.0-SNAPSHOT.jar,name=UserDAOBean,service=EJB3"
DEBUG [org.jboss.ejb3.proxy.impl.jndiregistrar.JndiSessionRegistrarBase:228] (main) Adding RefAddr to Default Local Reference: Type "Local Business Interface", Content "platform.db.dao.UserDAO"
DEBUG [org.jboss.ejb3.proxy.impl.jndiregistrar.JndiSessionRegistrarBase:228] (main) Default Local Business View for EJB UserDAOBean to be bound into JNDI at "UserDAOBean/local"
DEBUG [org.jboss.ejb3.proxy.impl.jndiregistrar.JndiSessionRegistrarBase:228] (main) Adding RefAddr to Reference: Type "ProxyFactoryKey", Content "ProxyFactory/platform-common-db-1.0.0-SNAPSHOT/UserDAOBean/UserDAOBean/local"
DEBUG [org.jboss.ejb3.proxy.impl.jndiregistrar.JndiSessionRegistrarBase:228] (main) Adding RefAddr to Reference: Type "EJB Container Name", Content "jboss.j2ee:jar=platform-common-db-1.0.0-SNAPSHOT.jar,name=UserDAOBean,service=EJB3"
DEBUG [org.jboss.metadata.ejb.jboss.jndipolicy.plugins.JBossSessionPolicyDecorator:228] (main) Resolved JNDI Name for Interface platform.db.dao.UserDAO of type BUSINESS_LOCAL is UserDAOBean/local-platform.db.dao.UserDAO
DEBUG [org.jboss.ejb3.proxy.impl.jndiregistrar.JndiSessionRegistrarBase:228] (main) Local Business View for platform.db.dao.UserDAO of EJB UserDAOBean to be bound into JNDI at "UserDAOBean/local-platform.db.dao.UserDAO"
INFO  [org.jboss.ejb3.proxy.impl.jndiregistrar.JndiSessionRegistrarBase:296] (main) Binding the following Entries in Global JNDI:

          UserDAOBean/local - EJB3.x Default Local Business Interface
          UserDAOBean/local-platform.db.dao.UserDAO - EJB3.x Local Business Interface 
```

在慢速变体（无强制顺序）中，相同的 bean 看起来像这样：

```
DEBUG [org.jboss.ejb.txtimer.NoopPersistencePolicy:228] (main) Noop on listTimerHandles
FINE  [sun.rmi.loader:212] (main) main: interfaces = [org.jboss.tm.usertx.interfaces.UserTransactionSessionFactory], codebase = "", defaultLoader = BaseClassLoader@706a48e4{vfsfile:/home/jboss/admin-jboss/admin-jboss-dev-server/target/jboss5-admin-mk/server/admin/conf/jboss-service.xml}
FINE  [sun.rmi.loader:212] (main) main: name = "java.lang.reflect.Proxy", codebase = "", defaultLoader = BaseClassLoader@706a48e4{vfsfile:/home/jboss/admin-jboss/admin-jboss-dev-server/target/jboss5-admin-mk/server/admin/conf/jboss-service.xml}
FINE  [sun.rmi.loader:212] (main) main: name = "org.jboss.proxy.ClientContainer", codebase = "", defaultLoader = BaseClassLoader@706a48e4{vfsfile:/home/jboss/admin-jboss/admin-jboss-dev-server/target/jboss5-admin-mk/server/admin/conf/jboss-service.xml}
FINE  [sun.rmi.loader:212] (main) main: name = "org.jboss.proxy.ClientMethodInterceptor", codebase = "", defaultLoader = BaseClassLoader@706a48e4{vfsfile:/home/jboss/admin-jboss/admin-jboss-dev-server/target/jboss5-admin-mk/server/admin/conf/jboss-service.xml}
FINE  [sun.rmi.loader:212] (main) main: name = "org.jboss.proxy.Interceptor", codebase = "", defaultLoader = BaseClassLoader@706a48e4{vfsfile:/home/jboss/admin-jboss/admin-jboss-dev-server/target/jboss5-admin-mk/server/admin/conf/jboss-service.xml}
FINE  [sun.rmi.loader:212] (main) main: name = "org.jboss.invocation.InvokerInterceptor", codebase = "", defaultLoader = BaseClassLoader@706a48e4{vfsfile:/home/jboss/admin-jboss/admin-jboss-dev-server/target/jboss5-admin-mk/server/admin/conf/jboss-service.xml}
FINE  [sun.rmi.loader:212] (main) main: name = "org.jboss.util.id.GUID", codebase = "", defaultLoader = BaseClassLoader@706a48e4{vfsfile:/home/jboss/admin-jboss/admin-jboss-dev-server/target/jboss5-admin-mk/server/admin/conf/jboss-service.xml}
FINE  [sun.rmi.loader:212] (main) main: name = "org.jboss.util.id.UID", codebase = "", defaultLoader = BaseClassLoader@706a48e4{vfsfile:/home/jboss/admin-jboss/admin-jboss-dev-server/target/jboss5-admin-mk/server/admin/conf/jboss-service.xml}
FINE  [sun.rmi.loader:212] (main) main: name = "org.jboss.util.id.VMID", codebase = "", defaultLoader = BaseClassLoader@706a48e4{vfsfile:/home/jboss/admin-jboss/admin-jboss-dev-server/target/jboss5-admin-mk/server/admin/conf/jboss-service.xml}
FINE  [sun.rmi.loader:212] (main) main: name = "[B", codebase = "", defaultLoader = BaseClassLoader@706a48e4{vfsfile:/home/jboss/admin-jboss/admin-jboss-dev-server/target/jboss5-admin-mk/server/admin/conf/jboss-service.xml}
FINE  [sun.rmi.loader:212] (main) main: name = "org.jboss.util.platform.PID", codebase = "", defaultLoader = BaseClassLoader@706a48e4{vfsfile:/home/jboss/admin-jboss/admin-jboss-dev-server/target/jboss5-admin-mk/server/admin/conf/jboss-service.xml}
FINE  [sun.rmi.loader:212] (main) main: name = "org.jboss.invocation.InvocationContext", codebase = "", defaultLoader = BaseClassLoader@706a48e4{vfsfile:/home/jboss/admin-jboss/admin-jboss-dev-server/target/jboss5-admin-mk/server/admin/conf/jboss-service.xml}
FINE  [sun.rmi.loader:212] (main) main: name = "java.util.HashMap", codebase = "", defaultLoader = BaseClassLoader@706a48e4{vfsfile:/home/jboss/admin-jboss/admin-jboss-dev-server/target/jboss5-admin-mk/server/admin/conf/jboss-service.xml}
FINE  [sun.rmi.loader:212] (main) main: name = "org.jboss.invocation.InvocationKey", codebase = "", defaultLoader = BaseClassLoader@706a48e4{vfsfile:/home/jboss/admin-jboss/admin-jboss-dev-server/target/jboss5-admin-mk/server/admin/conf/jboss-service.xml}
FINE  [sun.rmi.loader:212] (main) main: name = "java.lang.Integer", codebase = "", defaultLoader = BaseClassLoader@706a48e4{vfsfile:/home/jboss/admin-jboss/admin-jboss-dev-server/target/jboss5-admin-mk/server/admin/conf/jboss-service.xml}
FINE  [sun.rmi.loader:212] (main) main: name = "java.lang.Number", codebase = "", defaultLoader = BaseClassLoader@706a48e4{vfsfile:/home/jboss/admin-jboss/admin-jboss-dev-server/target/jboss5-admin-mk/server/admin/conf/jboss-service.xml}
FINE  [sun.rmi.loader:212] (main) main: name = "org.jboss.invocation.unified.interfaces.UnifiedInvokerProxy", codebase = "", defaultLoader = BaseClassLoader@706a48e4{vfsfile:/home/jboss/admin-jboss/admin-jboss-dev-server/target/jboss5-admin-mk/server/admin/conf/jboss-service.xml}
DEBUG [org.jboss.remoting.Client:228] (main) Client[1637220420:a5p1ca-kio86l-ha5dndsb-1-ha5do79z-9r].connect(null)
DEBUG [org.jboss.remoting.Client:228] (main) Client[1637220420:a5p1ca-kio86l-ha5dndsb-1-ha5do79z-9r] connected to InvokerLocator [socket://10.205.49.219:4446/?dataType=invocation&enableTcpNoDelay=true&marshaller=org.jboss.invocation.unified.marshall.InvocationMarshaller&unmarshaller=org.jboss.invocation.unified.marshall.InvocationUnMarshaller]
DEBUG [org.jboss.remoting.Client:228] (main) Client[1637220420:a5p1ca-kio86l-ha5dndsb-1-ha5do79z-9r] is connected
[blah blah, still same stuff...]
FINE  [sun.rmi.loader:212] (main) main: name = "java.util.Properties", codebase = "", defaultLoader = BaseClassLoader@706a48e4{vfsfile:/home/jboss/admin-jboss/admin-jboss-dev-server/target/jboss5-admin-mk/server/admin/conf/jboss-service.xml}
FINE  [sun.rmi.loader:212] (main) main: name = "java.util.Hashtable", codebase = "", defaultLoader = BaseClassLoader@706a48e4{vfsfile:/home/jboss/admin-jboss/admin-jboss-dev-server/target/jboss5-admin-mk/server/admin/conf/jboss-service.xml}
DEBUG [org.jboss.beans.metadata.plugins.AbstractInjectionValueMetaData:228] (main) jboss.j2ee:jar=platform-common-db-1.0.0-SNAPSHOT.jar,name=UserDAOBean,service=EJB3: Contextual injection usage (class -> classloader): interface javax.transaction.TransactionManager -> BaseClassLoader@706a48e4{vfsfile:/home/jboss/admin-jboss/admin-jboss-dev-server/target/jboss5-admin-mk/server/admin/conf/jboss-service.xml} defined by AbstractPropertyMetaData@307d2e98{name=transactionManager value=AbstractInjectionValueMetaData@6a7e1606{value=null injectionType=BY_CLASS propertyMetaData=transactionManager}}
DEBUG [org.jboss.beans.metadata.plugins.AbstractInjectionValueMetaData:228] (main) jboss.j2ee:jar=platform-common-db-1.0.0-SNAPSHOT.jar,name=UserDAOBean,service=EJB3: Contextual injection usage (class -> classloader): interface org.jboss.jca.spi.ComponentStack -> BaseClassLoader@706a48e4{vfsfile:/home/jboss/admin-jboss/admin-jboss-dev-server/target/jboss5-admin-mk/server/admin/conf/jboss-service.xml} defined by AbstractPropertyMetaData@7bd81a88{name=cachedConnectionManager value=AbstractInjectionValueMetaData@28b6163d{value=null injectionType=BY_CLASS propertyMetaData=cachedConnectionManager}}
DEBUG [org.jboss.beans.metadata.plugins.AbstractInjectionValueMetaData:228] (main) jboss.j2ee:jar=platform-common-db-1.0.0-SNAPSHOT.jar,name=UserDAOBean,service=EJB3: Contextual injection usage (class -> classloader): interface org.jboss.ejb3.timerservice.spi.TimerServiceFactory -> BaseClassLoader@706a48e4{vfsfile:/home/jboss/admin-jboss/admin-jboss-dev-server/target/jboss5-admin-mk/server/admin/conf/jboss-service.xml} defined by AbstractPropertyMetaData@4a6e13ac{name=timerServiceFactory value=AbstractInjectionValueMetaData@cda761{value=null injectionType=BY_CLASS propertyMetaData=timerServiceFactory}}
FINE  [sun.rmi.loader:212] (main) main: interfaces = [org.jboss.tm.usertx.interfaces.UserTransactionSessionFactory], codebase = "", defaultLoader = BaseClassLoader@706a48e4{vfsfile:/home/jboss/admin-jboss/admin-jboss-dev-server/target/jboss5-admin-mk/server/admin/conf/jboss-service.xml}
FINE  [sun.rmi.loader:212] (main) main: name = "java.lang.reflect.Proxy", codebase = "", defaultLoader = BaseClassLoader@706a48e4{vfsfile:/home/jboss/admin-jboss/admin-jboss-dev-server/target/jboss5-admin-mk/server/admin/conf/jboss-service.xml}
FINE  [sun.rmi.loader:212] (main) main: name = "org.jboss.proxy.ClientContainer", codebase = "", defaultLoader = BaseClassLoader@706a48e4{vfsfile:/home/jboss/admin-jboss/admin-jboss-dev-server/target/jboss5-admin-mk/server/admin/conf/jboss-service.xml}
[blah blah, still same stuff...]
DEBUG [org.jboss.remoting.Client:228] (main) Client[1180505422:a5p1ca-kio86l-ha5dndsb-1-ha5do7d8-9w].connect(null)
DEBUG [org.jboss.remoting.Client:228] (main) Client[1180505422:a5p1ca-kio86l-ha5dndsb-1-ha5do7d8-9w] connected to InvokerLocator [socket://10.205.49.219:4446/?dataType=invocation&enableTcpNoDelay=true&marshaller=org.jboss.invocation.unified.marshall.InvocationMarshaller&unmarshaller=org.jboss.invocation.unified.marshall.InvocationUnMarshaller]
DEBUG [org.jboss.remoting.Client:228] (main) Client[1180505422:a5p1ca-kio86l-ha5dndsb-1-ha5do7d8-9w] is connected
FINE  [sun.rmi.loader:212] (main) main: name = "java.util.Properties", codebase = "", defaultLoader = BaseClassLoader@706a48e4{vfsfile:/home/jboss/admin-jboss/admin-jboss-dev-server/target/jboss5-admin-mk/server/admin/conf/jboss-service.xml}
FINE  [sun.rmi.loader:212] (main) main: name = "java.util.Hashtable", codebase = "", defaultLoader = BaseClassLoader@706a48e4{vfsfile:/home/jboss/admin-jboss/admin-jboss-dev-server/target/jboss5-admin-mk/server/admin/conf/jboss-service.xml}
INFO  [org.jboss.ejb3.session.SessionSpecContainer:296] (main) Starting jboss.j2ee:jar=platform-common-db-1.0.0-SNAPSHOT.jar,name=UserDAOBean,service=EJB3
DEBUG [org.jboss.ejb3.tx.UserTransactionImpl:228] (main) new UserTx: org.jboss.ejb3.tx.UserTransactionImpl@921d7f9
DEBUG [org.jboss.ejb3.EJBContainer:228] (main) Linked java:comp/TransactionSynchronizationRegistry to JNDI name: java:TransactionSynchronizationRegistry
INFO  [org.jboss.ejb3.EJBContainer:296] (main) STARTED EJB: platform.db.dao.bean.UserDAOBean ejbName: UserDAOBean
DEBUG [org.jboss.ejb3.session.SessionContainer:228] (main) Registered jboss.j2ee:jar=platform-common-db-1.0.0-SNAPSHOT.jar,name=UserDAOBean,service=EJB3 with org.jboss.aop.Dispatcher via InvokableContextClassProxyHack at key jboss.j2ee:jar=platform-common-db-1.0.0-SNAPSHOT.jar,name=UserDAOBean,service=EJB3
DEBUG [org.jboss.ejb3.common.registrar.plugin.mc.Ejb3McRegistrar:228] (main) Returning from name "org.jboss.ejb3.JndiRegistrar.Session.SLSBJndiRegistrar": org.jboss.ejb3.proxy.impl.jndiregistrar.JndiStatelessSessionRegistrar@62b512e7
DEBUG [org.jboss.ejb3.proxy.impl.jndiregistrar.JndiSessionRegistrarBase:228] (main) Found Session Bean: UserDAOBean
DEBUG [org.jboss.ejb3.proxy.impl.jndiregistrar.JndiSessionRegistrarBase:228] (main) Registering org.jboss.ejb3.proxy.impl.factory.session.stateless.StatelessSessionLocalProxyFactory@44b0dac3for EJB UserDAOBean under key "ProxyFactory/platform-common-db-1.0.0-SNAPSHOT/UserDAOBean/UserDAOBean/local"...
FINE  [sun.rmi.loader:212] (main) main: interfaces = [org.jboss.tm.usertx.interfaces.UserTransactionSessionFactory], codebase = "", defaultLoader = BaseClassLoader@706a48e4{vfsfile:/home/jboss/admin-jboss/admin-jboss-dev-server/target/jboss5-admin-mk/server/admin/conf/jboss-service.xml}
FINE  [sun.rmi.loader:212] (main) main: name = "java.lang.reflect.Proxy", codebase = "", defaultLoader = BaseClassLoader@706a48e4{vfsfile:/home/jboss/admin-jboss/admin-jboss-dev-server/target/jboss5-admin-mk/server/admin/conf/jboss-service.xml}
FINE  [sun.rmi.loader:212] (main) main: name = "org.jboss.proxy.ClientContainer", codebase = "", defaultLoader = BaseClassLoader@706a48e4{vfsfile:/home/jboss/admin-jboss/admin-jboss-dev-server/target/jboss5-admin-mk/server/admin/conf/jboss-service.xml}
FINE  [sun.rmi.loader:212] (main) main: name = "org.jboss.proxy.ClientMethodInterceptor", codebase = "", defaultLoader = BaseClassLoader@706a48e4{vfsfile:/home/jboss/admin-jboss/admin-jboss-dev-server/target/jboss5-admin-mk/server/admin/conf/jboss-service.xml}
FINE  [sun.rmi.loader:212] (main) main: name = "org.jboss.proxy.Interceptor", codebase = "", defaultLoader = BaseClassLoader@706a48e4{vfsfile:/home/jboss/admin-jboss/admin-jboss-dev-server/target/jboss5-admin-mk/server/admin/conf/jboss-service.xml}
FINE  [sun.rmi.loader:212] (main) main: name = "org.jboss.invocation.InvokerInterceptor", codebase = "", defaultLoader = BaseClassLoader@706a48e4{vfsfile:/home/jboss/admin-jboss/admin-jboss-dev-server/target/jboss5-admin-mk/server/admin/conf/jboss-service.xml}
FINE  [sun.rmi.loader:212] (main) main: name = "org.jboss.util.id.GUID", codebase = "", defaultLoader = BaseClassLoader@706a48e4{vfsfile:/home/jboss/admin-jboss/admin-jboss-dev-server/target/jboss5-admin-mk/server/admin/conf/jboss-service.xml}
FINE  [sun.rmi.loader:212] (main) main: name = "org.jboss.util.id.UID", codebase = "", defaultLoader = BaseClassLoader@706a48e4{vfsfile:/home/jboss/admin-jboss/admin-jboss-dev-server/target/jboss5-admin-mk/server/admin/conf/jboss-service.xml}
FINE  [sun.rmi.loader:212] (main) main: name = "org.jboss.util.id.VMID", codebase = "", defaultLoader = BaseClassLoader@706a48e4{vfsfile:/home/jboss/admin-jboss/admin-jboss-dev-server/target/jboss5-admin-mk/server/admin/conf/jboss-service.xml}
FINE  [sun.rmi.loader:212] (main) main: name = "[B", codebase = "", defaultLoader = BaseClassLoader@706a48e4{vfsfile:/home/jboss/admin-jboss/admin-jboss-dev-server/target/jboss5-admin-mk/server/admin/conf/jboss-service.xml}
FINE  [sun.rmi.loader:212] (main) main: name = "org.jboss.util.platform.PID", codebase = "", defaultLoader = BaseClassLoader@706a48e4{vfsfile:/home/jboss/admin-jboss/admin-jboss-dev-server/target/jboss5-admin-mk/server/admin/conf/jboss-service.xml}
FINE  [sun.rmi.loader:212] (main) main: name = "org.jboss.invocation.InvocationContext", codebase = "", defaultLoader = BaseClassLoader@706a48e4{vfsfile:/home/jboss/admin-jboss/admin-jboss-dev-server/target/jboss5-admin-mk/server/admin/conf/jboss-service.xml}
FINE  [sun.rmi.loader:212] (main) main: name = "java.util.HashMap", codebase = "", defaultLoader = BaseClassLoader@706a48e4{vfsfile:/home/jboss/admin-jboss/admin-jboss-dev-server/target/jboss5-admin-mk/server/admin/conf/jboss-service.xml}
FINE  [sun.rmi.loader:212] (main) main: name = "org.jboss.invocation.InvocationKey", codebase = "", defaultLoader = BaseClassLoader@706a48e4{vfsfile:/home/jboss/admin-jboss/admin-jboss-dev-server/target/jboss5-admin-mk/server/admin/conf/jboss-service.xml}
FINE  [sun.rmi.loader:212] (main) main: name = "java.lang.Integer", codebase = "", defaultLoader = BaseClassLoader@706a48e4{vfsfile:/home/jboss/admin-jboss/admin-jboss-dev-server/target/jboss5-admin-mk/server/admin/conf/jboss-service.xml}
FINE  [sun.rmi.loader:212] (main) main: name = "java.lang.Number", codebase = "", defaultLoader = BaseClassLoader@706a48e4{vfsfile:/home/jboss/admin-jboss/admin-jboss-dev-server/target/jboss5-admin-mk/server/admin/conf/jboss-service.xml}
FINE  [sun.rmi.loader:212] (main) main: name = "org.jboss.invocation.unified.interfaces.UnifiedInvokerProxy", codebase = "", defaultLoader = BaseClassLoader@706a48e4{vfsfile:/home/jboss/admin-jboss/admin-jboss-dev-server/target/jboss5-admin-mk/server/admin/conf/jboss-service.xml}
DEBUG [org.jboss.remoting.Client:228] (main) Client[1410937402:a5p1ca-kio86l-ha5dndsb-1-ha5do7e0-9x].connect(null)
DEBUG [org.jboss.remoting.Client:228] (main) Client[1410937402:a5p1ca-kio86l-ha5dndsb-1-ha5do7e0-9x] connected to InvokerLocator [socket://10.205.49.219:4446/?dataType=invocation&enableTcpNoDelay=true&marshaller=org.jboss.invocation.unified.marshall.InvocationMarshaller&unmarshaller=org.jboss.invocation.unified.marshall.InvocationUnMarshaller]
DEBUG [org.jboss.remoting.Client:228] (main) Client[1410937402:a5p1ca-kio86l-ha5dndsb-1-ha5do7e0-9x] is connected
[blah blah, still same stuff...]
DEBUG [org.jboss.remoting.Client:228] (main) Client[980099834:a5p1ca-kio86l-ha5dndsb-1-ha5do7ii-a3].connect(null)
DEBUG [org.jboss.remoting.Client:228] (main) Client[980099834:a5p1ca-kio86l-ha5dndsb-1-ha5do7ii-a3] connected to InvokerLocator [socket://10.205.49.219:4446/?dataType=invocation&enableTcpNoDelay=true&marshaller=org.jboss.invocation.unified.marshall.InvocationMarshaller&unmarshaller=org.jboss.invocation.unified.marshall.InvocationUnMarshaller]
DEBUG [org.jboss.remoting.Client:228] (main) Client[980099834:a5p1ca-kio86l-ha5dndsb-1-ha5do7ii-a3] is connected
FINE  [sun.rmi.loader:212] (main) main: name = "java.util.Properties", codebase = "", defaultLoader = BaseClassLoader@706a48e4{vfsfile:/home/jboss/admin-jboss/admin-jboss-dev-server/target/jboss5-admin-mk/server/admin/conf/jboss-service.xml}
FINE  [sun.rmi.loader:212] (main) main: name = "java.util.Hashtable", codebase = "", defaultLoader = BaseClassLoader@706a48e4{vfsfile:/home/jboss/admin-jboss/admin-jboss-dev-server/target/jboss5-admin-mk/server/admin/conf/jboss-service.xml}
DEBUG [org.jboss.ejb3.common.registrar.plugin.mc.Ejb3McRegistrar:228] (main) Installed in AbstractKernelController@77e3cabd{null} at "ProxyFactory/platform-common-db-1.0.0-SNAPSHOT/UserDAOBean/UserDAOBean/local": org.jboss.ejb3.proxy.impl.factory.session.stateless.StatelessSessionLocalProxyFactory@44b0dac3
DEBUG [org.jboss.ejb3.proxy.impl.jndiregistrar.JndiSessionRegistrarBase:228] (main) Adding RefAddr to Reference: Type "ProxyFactoryKey", Content "ProxyFactory/platform-common-db-1.0.0-SNAPSHOT/UserDAOBean/UserDAOBean/local"
DEBUG [org.jboss.ejb3.proxy.impl.jndiregistrar.JndiSessionRegistrarBase:228] (main) Adding RefAddr to Reference: Type "EJB Container Name", Content "jboss.j2ee:jar=platform-common-db-1.0.0-SNAPSHOT.jar,name=UserDAOBean,service=EJB3"
DEBUG [org.jboss.ejb3.proxy.impl.jndiregistrar.JndiSessionRegistrarBase:228] (main) Adding RefAddr to Default Local Reference: Type "Local Business Interface", Content "platform.db.dao.UserDAO"
DEBUG [org.jboss.ejb3.proxy.impl.jndiregistrar.JndiSessionRegistrarBase:228] (main) Default Local Business View for EJB UserDAOBean to be bound into JNDI at "UserDAOBean/local"
DEBUG [org.jboss.ejb3.proxy.impl.jndiregistrar.JndiSessionRegistrarBase:228] (main) Adding RefAddr to Reference: Type "ProxyFactoryKey", Content "ProxyFactory/platform-common-db-1.0.0-SNAPSHOT/UserDAOBean/UserDAOBean/local"
DEBUG [org.jboss.ejb3.proxy.impl.jndiregistrar.JndiSessionRegistrarBase:228] (main) Adding RefAddr to Reference: Type "EJB Container Name", Content "jboss.j2ee:jar=platform-common-db-1.0.0-SNAPSHOT.jar,name=UserDAOBean,service=EJB3"
DEBUG [org.jboss.metadata.ejb.jboss.jndipolicy.plugins.JBossSessionPolicyDecorator:228] (main) Resolved JNDI Name for Interface platform.db.dao.UserDAO of type BUSINESS_LOCAL is UserDAOBean/local-platform.db.dao.UserDAO
DEBUG [org.jboss.ejb3.proxy.impl.jndiregistrar.JndiSessionRegistrarBase:228] (main) Local Business View for platform.db.dao.UserDAO of EJB UserDAOBean to be bound into JNDI at "UserDAOBean/local-platform.db.dao.UserDAO"
INFO  [org.jboss.ejb3.proxy.impl.jndiregistrar.JndiSessionRegistrarBase:296] (main) Binding the following Entries in Global JNDI:

          UserDAOBean/local - EJB3.x Default Local Business Interface
          UserDAOBean/local-platform.db.dao.UserDAO - EJB3.x Local Business Interface 
```

如您所见，有许多 Remoting/RMI 调用。这就是部署一切所需的时间。我想知道如何解决这个问题，以便在不更改文件名的情况下仍然快速部署。正如我所说，部署仍然成功，并且在第一次需要时有正确的依赖关系解析，正如我在日志中看到的那样。我试过用EAR，但它是一样的。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T15:42:42.150

我找到了解决方案。也许有人会发现它很有用。我从 EJB3 Deployer 配置中删除了“org.jboss.ejb3.kernel.JNDIKernelRegistryPlugin”，现在一切都运行得很快。

# 7zip - 7z问题等

> ID：13665373
> 
> 赞同：-3
> 
> 时间：2012-12-02T00:51:23.663
> 
> 标签：7zip

我想用7z学习绳索。这不起作用...我关注了 7z --help：

```
7z x -r beans.7z personal.php 
```

我想制作一个名为“beans.7z”的 .7z 文件，其中包含文件“personal.php”

我得到的错误是：

```
Error:
    there is no such archive 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T01:04:53.140

这是您要执行的操作的正确命令：

```
7z a beans.7z personal.php 
```

# node.js - 我的模块的工作流程

> ID：13665376
> 
> 赞同：1
> 
> 时间：2012-12-02T00:51:46.473
> 
> 标签：node.js, events

我正在编写我的第一个“严肃”node.js 模块，我需要一些关于几件事的建议/最佳实践......

请阅读代码中的注释以了解问题！

**服务器.js**

```
var Client = require('./index');
var client = Client.createClient();

client.on('data', function(data) {
  console.log(data);
});

client.on('ERROR', function(data) {
  console.log(data);
}); 
```

**节点模块.js**

```
exports.Client = require('./Client');

exports.createClient = function(options) {
  return new exports.Client(options);
};

/**
 * Question 1:
 * I want to have an optional WebUI for this, how should it recieve the data?
 * I figured via event-emitters is best(?)
 * But where should it be placed (and how) so it can access the events from Client.js?
 */
exports.createServer = function(options) {
  //...
} 
```

**客户端.js**

```
Client.Handlers = require('./Handlers');
module.exports = Client;

function Client(options) {
  // ...

this._callback_handlers['ERROR'] = Client.Handlers.error

  /**
   * Question 2:
   * Initialize connection to server
   *
   * Should it be something like this instead:
   * this._socket = this.Connect(options); ?
   * How do I achieve this?
   * And at the same time keeping the buffer-variable local to the Connect function?
   */
  this.Connect();
});

Client.prototype.Connect = function() {
  var self = this;
  var buffer = '';
  this._socket = net.connect({
    host: self.options.host,
    port: self.options.port
  }, function() {

  })
  .on('data', function(chunk) {
    var offset, part;
    buffer += chunk;

/**
 * Question 3:
 * Buffer up and parse only whole rows
 * 
 * This is a OK way to do it, right?
 * Should I listen for the event "data"
 * instead of calling self.parse_response() like a normal function?
 *
 */
while((offset = buffer.indexOf("\n")) > -1) {
  part = buffer.substr(0, offset);
  buffer = buffer.substr(offset + 1);

      if(part) {
        self.emit('data', part);
        self.parse_response(part);
      }
    }
  })
};

Client.prototype.parse_response = function(data) {

  // ...

  /**
   * Question 4:
   * Send callbacks
   *
   * _callback_handlers is an array containing callbacks functions
   * (see top of Client.js: this._callback_handlers['ERROR'] = Client.Handlers.error)
   * 
   * I would perfer to use something like this instead:
   *   this.emit(data[0], data[1]);
   *
   * But how do I make Handlers.js listen to these events?
   * since "Client" dosent exist there
   *
   * The reason I have handlers.js in the first place
   * is to give the code a better structure
   *   
   */

  if(this._callback_handlers[data[0]]) {
    this._callback_handlers[data[0]].apply(this, data[1]);
  }

} 
```

**处理程序.js**

```
//...
exports.error = function(a) {
  this.emit('ERROR', a);
}
//... 
```

# tsql - SQL Server 2012：从时间戳列舍入到 NEAREST(!) 月初（时间戳格式）

> ID：13665380
> 
> 赞同：4
> 
> 时间：2012-12-02T00:52:24.113
> 
> 标签：tsql, sql-server-2012

我需要从时间戳列四舍五入到最近的月初（时间戳格式）。

如何做到这一点？

例子：

```
TimestampColumn A:             Rounded to these values
2012-01-07 18:18:29.923        2012-01-01 00:00:00.000
2012-01-14 12:58:13.122        2012-01-01 00:00:00.000
2012-06-09 17:10:30.787        2012-06-01 00:00:00.000
2012-05-31 09:29:43.870        2012-06-01 00:00:00.000
2012-10-22 12:09:47.067        2012-11-01 00:00:00.000
2012-10-15 04:35:11.013        2012-10-01 00:00:00.000 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T19:46:01.867

考虑先转换为日期

```
DECLARE @d DATETIME
set @d = CONVERT(DATE, '2012-02-14 12:58:13.122')

SET @d =  DATEADD(DAY, 1-datepart(day, @d), @d)

SELECT @d 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-04T09:02:27.400

这是一个例子。您有 5 个字段：您要转换的日期、您想要的转换日期、当月的第一天、当月的最后一天和下个月的第一天。只需选择您需要的内容：

```
SELECT
    BED_Meeting_When,
    CASE WHEN DAY(BED_Meeting_When) < 15 THEN (DATEADD(DAY, (-DAY(BED_Meeting_When) + 1), BED_Meeting_When)) ELSE DATEADD(DAY, (-DAY(BED_Meeting_When) + 1), DATEADD(MONTH, 1, BED_Meeting_When)) END,
    DATEADD(DAY, (-DAY(BED_Meeting_When) + 1), BED_Meeting_When) AS 'Arrondi au premier du mois',
    DATEADD(DAY, -1, DATEADD(MONTH, DATEDIFF(MONTH, 0, BED_Meeting_When) + 1, 0)) AS 'Arrondi au dernier du mois',
    DATEADD(DAY, (-DAY(BED_Meeting_When) + 1), DATEADD(MONTH, 1, BED_Meeting_When)) AS 'Arrondi au premier du mois suivant',
    BEMR_Titre
FROM bpri_entretien_detail
    INNER JOIN bpri_entretien_motif ON (BED_BEMR_Idx = BEMR_Idx) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T01:35:43.840

这是一种方法 - 只需减去您不关心的日期的所有部分：

```
DECLARE @d DATETIME
set @d = '2012-02-14 12:58:13.122'

SET @d =  DATEADD(DAY, 1-datepart(day, @d), @d)
SET @d =  DATEADD(hour, -datepart(hour, @d), @d)
SET @d =  DATEADD(minute, -datepart(minute, @d), @d)
SET @d =  DATEADD(second, -datepart(second, @d), @d)
SET @d =  DATEADD(millisecond, -datepart(millisecond, @d), @d)

SELECT @d 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T03:40:58.257

感谢您的贡献。但我会选择这个；它足够好。

```
SELECT CASE
WHEN DATEDIFF(DAY, GETDATE(), DATEADD(MONTH, DATEDIFF(MONTH, 0, GETDATE()) + 1, 0)) > 
ABS(DATEDIFF(DAY, GETDATE(), DATEADD(MONTH, DATEDIFF(MONTH, 0, GETDATE()), 0))) 
THEN DATEADD(dd, datediff(dd, 0, DATEADD(DAY, DATEDIFF(DAY, GETDATE(), DATEADD(MONTH, DATEDIFF(MONTH, 0, GETDATE()), 0)), GETDATE() ) )+0, 0)
ELSE dateadd(dd, datediff(dd, 0, DATEADD(DAY, DATEDIFF(DAY, GETDATE(), DATEADD(MONTH, DATEDIFF(MONTH, 0, GETDATE()) + 1, 0)), GETDATE() ) )+0, 0)
END 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-02T03:29:44.493

以秒为单位计算适用月份的长度，然后确定您是否已过了月中。根据需要前进或后退。

```
declare @Foo as DateTime = '2012-10-15 12:35:11.013'

select
  DateAdd( month, DateDiff( m, 0, @Foo ), 0 ) as 'Year/Month',
  DateDiff( s, DateAdd( month, DateDiff( m, 0, @Foo ), 0), @Foo ) as 'Seconds Into Month',
  DateDiff( s, DateAdd( month, DateDiff( m, 0, @Foo ), 0 ), DateAdd( month, DateDiff( m, 0, @Foo ) + 1, 0 ) ) as 'Seconds In Month',
  DateDiff( s, DateAdd( month, DateDiff( m, 0, @Foo ), 0 ), DateAdd( month, DateDiff( m, 0, @Foo ) + 1, 0 ) ) / 2 as 'Seconds In Half Month',
  DateAdd( month, DateDiff( m, 0, @Foo ) + Round( 1.0 * DateDiff( s, DateAdd( month, DateDiff( m, 0, @Foo ), 0), @Foo ) / DateDiff( s, DateAdd( month, DateDiff( m, 0, @Foo ), 0 ), DateAdd( month, DateDiff( m, 0, @Foo ) + 1, 0 ) ), 0 ), 0 ) as 'Rounded Date' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-10T06:46:43.403

嗨，我知道聚会迟到了，一点简单的提议永远不会冒犯我希望

创建一个迷你临时表我弹出了原始帖子中提供的日期

然后从中选择如下

创建表#DT(

TS_A 日期时间，TS_B 日期时间）

插入#DT (ts_a) 值 ('2012-01-07 18:18:29.923'), ('2012-01-14 12:58:13.122'), ('2012-06-09 17:10:30.787 '), ('2012-05-31 09:29:43.870'), ('2012-10-22 12:09:47.067'), ('2012-10-15 04:35:11.013')

选择 TS_A, DATEADD(MONTH, DATEDIFF(MONTH, 0,ts_a), 0) TS_B from #DT

结果 - 我希望这很清楚

[结果](https://i.stack.imgur.com/RF5TO.png)

令人惊讶的是，他们是如何变化的:-)

TX
我希望这一切都好 十多年来没有在任何地方发布过

# php - 如何查询用户列表的最新保存进度。(php/html)

> ID：13665381
> 
> 赞同：-1
> 
> 时间：2012-12-02T00:52:25.307
> 
> 标签：php, mysql

我有一个注册和登录站点，人们可以在其中单击表单上的保存进度，并在第 2 列中插入一个新行，其会话 ID 为 (user_id)。

我也有一个管理员登录，我可以在其中看到他们的条目，但它显示了他们所有保存的列表。

我想知道您是否可以帮我找出一个查询来列出每个唯一人员的所有最新保存进度？喜欢 (id,user_id,name,score): (3,3,bob, score 5) (6,4,sam, score 30) 不显示用户过去保存的所有存档，例如： (1,3,bob, score 5) (2,4,sam, score 30) (3,3,bob, score 5) (4,4,sam, score 30) 我需要每个用户的最新存档。

就像 user_id 的不同列表的最新 id。希望这是有道理的。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T01:01:57.633

```
select user_id,name,score from your_table where (user_id,id) in (select user_id,max(id) from your_table group by user_id) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T03:00:13.813

考虑以下表格的格式

```
 CREATE TABLE IF NOT EXISTS `user` (`user_id` int(11) NOT NULL auto_increment,
 `user_name` varchar(200) collate latin1_general_ci NOT NULL,
  PRIMARY KEY  (`user_id`)
  ) ENGINE=MyISAM  DEFAULT CHARSET=latin1 COLLATE=latin1_general_ci AUTO_INCREMENT=1;

 CREATE TABLE IF NOT EXISTS `user_score` (
 `id` int(11) NOT NULL auto_increment,
  `user_id` int(11) NOT NULL,
  `user_score` int(11) NOT NULL,
   PRIMARY KEY  (`id`)
    ) ENGINE=MyISAM  DEFAULT CHARSET=latin1 COLLATE=latin1_general_ci AUTO_INCREMENT=1; 
```

请尝试执行以下 sql 选择查询以检索每个用户的最新分数

```
SELECT u . * ,s.user_score,s.id  FROM user u JOIN user_score s ON u.user_id =  s.user_id   WHERE id  IN (SELECT MAX( id )  FROM user_score GROUP BY user_id) 
```

# c# - 在 BindingSource LINQ 中获取属性值

> ID：13665384
> 
> 赞同：0
> 
> 时间：2012-12-02T00:52:39.410
> 
> 标签：c#, .net, linq, datasource, bindingsource

下面是我的绑定源。

```
pics_Data_HistoryBSForCounts.DataSource = from dh in dataCtx.Pics_Data_Histories
                                                        join ui in dataCtx.User_Infos on dh.User_Id equals ui.user_id into ui_dh
                                                        from ui_dh1 in ui_dh.DefaultIfEmpty()
                                                        where dh.Changed_Date >= fromDate && dh.Changed_Date <= toDate
                                                        group ui_dh1 by ui_dh1.user_name into grouped
                                                      select new { UserName = grouped.Key.Trim(), Count = grouped.Count(a => a.user_name != null), UserID = grouped.FirstOrDefault().user_id }; 
```

我想获取当前记录的用户 ID。

```
var userRecord = pics_Data_HistoryBSForCounts.Current; 
```

我将当前记录作为字符串获取。有什么方法可以获取属性值吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T22:54:06.700

`BindingSource.Current`是一个`object`。您可以将其转换为您的类型 T `IQueryable<T>`(dataCtx.Pics_Data_Histories)。但那是一种匿名类型，因此使用命名类型更容易（否则只能使用反射来提取属性值）。

所以，假设你有一个类`UserData`（带有`UserName`,`Count`和`UserID`）。您的`select`查询部分是：

```
select new UserData { UserName = grouped.Key.Trim(), ... 
```

还有演员：

```
var userRecord = (UserData)pics_Data_HistoryBSForCounts.Current; 
```

# java - 使用 String 的 replaceAll 方法删除所有标记，除非它们遵循特定的短语

> ID：13665387
> 
> 赞同：2
> 
> 时间：2012-12-02T00:53:14.277
> 
> 标签：java, regex

我需要`?`用另一个令牌（我们可以从`!`什么开始）替换一个特定的令牌（在这种情况下，）。String 的`replaceAll`方法可以解决这个问题。但是，如果问号恰好跟在 token 后面，我不想替换它`action`。（那会很糟糕！）

我试过`text = text.replaceAll("[^a][^c][^t][^i][^o][^n]\\?","!");`了，但没有奏效。

例如，我想`"test.action?param=lol?omg";`变成`test.action?param=lol!omg`. 我知道我可以做一些愚蠢的事情

```
text.replaceAll("action\\?","%%%CRAZYTOKEN%%%")
    .replaceAll("\\?","!")
    .replaceAll("%%%CRAZYTOKEN%%%","action?"); 
```

但这似乎是在浪费时间，尤其是在大弦上。我宁愿做对。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T00:57:17.817

你需要消极看待背后

```
text.replaceAll("(?<!action)\\?", "!"); 
```

**这**断言`?`不遵循**`action`**

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T00:57:33.947

只需使用[零宽度负后向断言](http://www.regular-expressions.info/lookaround.html)来仅匹配*不*遵循`?`的 s ：*`action`*

 *```
text = text.replaceAll("(?<!action)\\?", "!"); 
```

请注意`\\`. `?`您需要转义，`?`因为它是正则表达式中的特殊字符。***

# android - 如何在 Android 桌面上显示小部件？

> ID：13665388
> 
> 赞同：2
> 
> 时间：2012-12-02T00:54:47.887
> 
> 标签：android

在程序 TTpod 中，当您单击“显示桌面歌词”时，其中存在一个功能，它有一个小部件，似乎可以覆盖我打开的任何应用程序。我想知道如何在屏幕上创建一个按钮，该按钮将显示在我将来打开的任何应用程序上。感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T05:10:36.603

如果您谈论的是涵盖所有内容（所有应用程序）的“浮动窗口”，请花一两分钟搜索以下关键字。

```
WindowManager.LayoutParams.TYPE_SYSTEM_OVERLAY
WindowManager.LayoutParams.TYPE_SYSTEM_ALERT
WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE
WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL 
```

不过要小心，这些实现起来充其量是很麻烦的（正如我发现的那样），因为它们的实现在不同的设备和 API 上差异很大！

# android - 使用 Android ComplexPreferences (JSon) 保存捆绑包

> ID：13665389
> 
> 赞同：1
> 
> 时间：2012-12-02T00:54:57.733
> 
> 标签：android, json, save, bundle, circular-reference

这是来自此处的后续问题：[Save Bundle to SharedPreferences](https://stackoverflow.com/questions/13660889/save-bundle-to-sharedpreferences)

我正在尝试使用上述线程中的 ComplexPreferences 类在我的 Android 应用程序中保存一个 Bundle 对象，但无济于事！这是我用来保存数据并将数据加载到 ComplexPreferences 的代码（与 ComplexPreferences 类的下载页面上的示例非常相似）：

**第一类：**

```
save = ComplexPreferences.getComplexPreferences(this, SAVE, MODE_PRIVATE);
...
Bundle gameState = new Bundle();
saveGameData(gameState); // This puts the game data into the Bundle
save.putObject(SAVE, gameState);
save.commit(); 
```

**类2：**

```
save = ComplexPreferences.getComplexPreferences(this, Class1.SAVE, MODE_PRIVATE);
...
Bundle gameState = save.getObject(Class1.SAVE, Bundle.class); 
```

问题似乎出在将对象保存到 ComplexPreferences 时。这是我在运行上述代码时得到的堆栈跟踪：

> 致命异常：主要java.lang.RuntimeException：无法暂停活动{djb.ampersands/djb.ampersands.Ampersands}：java.lang.IllegalStateException：循环引用错误违规字段：游戏违规对象：preserveType：false，类型：djb类.ampersands.Ampersands, obj: djb.ampersands.Ampersands@41272778 at android.app.ActivityThread.performPauseActivity(ActivityThread.java:2838) at android.app.ActivityThread.performPauseActivity(ActivityThread.java:2794) at android.app.ActivityThread .handlePauseActivity(ActivityThread.java:2772) 在 android.app.ActivityThread.access$800(ActivityThread.java:130) 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:1206) 在 android.os.Handler.dispatchMessage (Handler.java:99) 在 android.app 的 android.os.Looper.loop(Looper.java:137)。ActivityThread.main(ActivityThread.java:4745) 在 java.lang.reflect.Method.invokeNative(Native Method) 在 java.lang.reflect.Method.invoke(Method.java:511) 在 com.android.internal.os。 ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786) at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553) at dalvik.system.NativeStart.main(Native Method) 原因：java.lang。 IllegalStateException：循环引用错误违规字段：游戏违规对象：preserveType：false，类型：类 djb.ampersands.Ampersands，obj：djb.ampersands.Ampersands@41272778 at com.google.gson.JsonSerializationVisitor.visitObjectField(JsonSerializationVisitor.java:117 ) 在 com.google.gson.ObjectNavigator 的 com.google.gson.ReflectingFieldNavigator.visitFieldsReflectively(ReflectingFieldNavigator.java:69)。在 com.google.gson.JsonSerializationVisitor.addAsChildOfObject(JsonSerializationVisitor.java:127) 在 com.google.gson.JsonSerializationVisitor 接受(ObjectNavigator.java:120) 在 com.google.gson.JsonSerializationVisitor.getJsonElementForChild(JsonSerializationVisitor.java:147) .visitObjectField(JsonSerializationVisitor.java:114) 在 com.google.gson.ReflectingFieldNavigator.visitFieldsReflectively(ReflectingFieldNavigator.java:69) 在 com.google.gson.ObjectNavigator.accept(ObjectNavigator.java:120) 在 com.google.gson。 JsonSerializationVisitor.getJsonElementForChild(JsonSerializationVisitor.java:147) 在 com.google.gson.JsonSerializationVisitor.addAsChildOfObject(JsonSerializationVisitor.java:127) 在 com.google.gson.JsonSerializationVisitor.visitObjectField(JsonSerializationVisitor.java:114) 在 com.google.gson.ReflectingFieldNavigator.visitFieldsReflectively(ReflectingFieldNavigator.java:69) 在 com.google.gson.ObjectNavigator.accept(ObjectNavigator.java:120) 在 com.google.gson.JsonSerializationContextDefault.serialize(JsonSerializationContextDefault.java:62) 在 com .google.gson.BaseMapTypeAdapter.serialize(BaseMapTypeAdapter.java:34) 在 com.google.gson.MapTypeAdapter.serialize(MapTypeAdapter.java:53) 在 com.google.gson.MapTypeAdapter.serialize(MapTypeAdapter.java:33) 在com.google.gson.JsonSerializationVisitor.findAndInvokeCustomSerializer(JsonSerializationVisitor.java:184) 在 com.google.gson.JsonSerializationVisitor.visitFieldUsingCustomHandler(JsonSerializationVisitor.java:204) 在 com.google.gson.ReflectingFieldNavigator.visitFieldsReflectively)(ReflectingFieldNavigator.java:63)在 com.google。gson.ObjectNavigator.accept(ObjectNavigator.java:120) 在 com.google.gson.JsonSerializationContextDefault.serialize(JsonSerializationContextDefault.java:62) 在 com.google.gson.JsonSerializationContextDefault.serialize(JsonSerializationContextDefault.java:53) 在 com.google .gson.Gson.toJsonTree(Gson.java:220) 在 com.google.gson.Gson.toJson(Gson.java:260) 在 com.google.gson.Gson.toJson(Gson.java:240) 在 djb。 ampersands.gui.ComplexPreferences.putObject(ComplexPreferences.java:47) at djb.ampersands.Ampersands.onPause(Ampersands.java:93) at android.app.Activity.performPause(Activity.java:5106) at android.app.Instrumentation .callActivityOnPause(Instrumentation.java:1225) at android.app.ActivityThread.performPauseActivity(ActivityThread.java:2825) ... 12 更多原因：com.google.gson.CircularReferenObjectNavigator.accept(ObjectNavigator.java:120) 在 com.google.gson.JsonSerializationContextDefault.serialize(JsonSerializationContextDefault.java:62) 在 com.google.gson.JsonSerializationContextDefault.serialize(JsonSerializationContextDefault.java:53) 在 com.google.gson .Gson.toJsonTree(Gson.java:220) 在 com.google.gson.Gson.toJson(Gson.java:260) 在 com.google.gson.Gson.toJson(Gson.java:240) 在 djb.ampersands。 gui.ComplexPreferences.putObject(ComplexPreferences.java:47) 在 djb.ampersands.Ampersands.onPause(Ampersands.java:93) 在 android.app.Activity.performPause(Activity.java:5106) 在 android.app.Instrumentation.callActivityOnPause (Instrumentation.java:1225) at android.app.ActivityThread.performPauseActivity(ActivityThread.java:2825) ... 12 更多原因：com.google.gson.CircularReferenObjectNavigator.accept(ObjectNavigator.java:120) 在 com.google.gson.JsonSerializationContextDefault.serialize(JsonSerializationContextDefault.java:62) 在 com.google.gson.JsonSerializationContextDefault.serialize(JsonSerializationContextDefault.java:53) 在 com.google.gson .Gson.toJsonTree(Gson.java:220) 在 com.google.gson.Gson.toJson(Gson.java:260) 在 com.google.gson.Gson.toJson(Gson.java:240) 在 djb.ampersands。 gui.ComplexPreferences.putObject(ComplexPreferences.java:47) 在 djb.ampersands.Ampersands.onPause(Ampersands.java:93) 在 android.app.Activity.performPause(Activity.java:5106) 在 android.app.Instrumentation.callActivityOnPause (Instrumentation.java:1225) at android.app.ActivityThread.performPauseActivity(ActivityThread.java:2825) ... 12 更多原因：com.google.gson.CircularReferen循环参考

由于对象保存不正确，因此在尝试再次加载对象时也会出现错误是有道理的：

> java.lang.IllegalArgumentException：使用键保存存储的对象是 djb.ampersands.gui.ComplexPreferences.getObject(ComplexPreferences.java:63) 处的其他类的实例

**摘要：**当我第一次写这个问题时，我说我无法正确保存/加载任何对象。但是，我现在已经让这种方法适用于某些对象，所以我现在的问题是，它是否可以适用于 Bundle 对象，而答案似乎是否定的......所以我想它又回到了绘图上木板！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T07:15:10.873

你不应该完全保存你的包，而应该只保存你的`gameState`对象。捆绑包的序列化可能比简单的 POJO 更复杂。

由于 lib 使用 Json 序列化事物，它期望一个简单的 POJO，而 Bundle[绝对不是简单的 POJO](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.0_r1/android/os/Bundle.java)：Bundle 类的某些字段永远不会在 Json 中正确序列化，尤其是类加载器。

# sql - 我们需要为主键指定“not null”吗？甲骨文/SQL

> ID：13665394
> 
> 赞同：49
> 
> 时间：2012-12-02T00:56:26.160
> 
> 标签：sql, oracle

```
CREATE TABLE Person(
    PersonId NUM(20),
    ...
    )

ALTER TABLE Person
ADD(CONSTRAINT personpk PRIMARY KEY(PersonId)) 
```

作为标题，我是否需要为 PersonId 指定“not null”？或者如果我将它设置为主键，默认情况下它自动不为空？

```
e.g: 
CREATE TABLE Person(
PersonId NUM(20) NOT NULL,
... 
```

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-12-02T01:02:41.743

```
create table mytable (
  col1 number primary key,
  col2 number,
  col3 number not null
);

table MYTABLE created.

select table_name, column_name, nullable 
from user_tab_cols where table_name = 'MYTABLE';

TABLE_NAME                     COLUMN_NAME                    NULLABLE
------------------------------ ------------------------------ --------
MYTABLE                        COL1                           N        
MYTABLE                        COL2                           Y        
MYTABLE                        COL3                           N 
```

所以，不，您不需要将主键列指定为 NOT NULL。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-12-02T15:07:57.793

是的，正如@eaolson 所说，您不需要为主键列指定NOT NULL，它们会自动设置为NOT NULL。

但是，Oracle 会跟踪您没有明确指定 NOT NULL 以防以后禁用或删除主键：

```
create table mytable (
  col1 number,
  col2 number not null
);

select table_name, column_name, nullable
  from user_tab_columns where table_name = 'MYTABLE';

TABLE_NAME   COLUMN_NAME  NULLABLE
------------ ------------ ---------
MYTABLE      COL1         Y
MYTABLE      COL2         N 
```

正如预期的那样，col1 可以为空，而 col2 不是 NULL。主键将两列都更改为 NOT NULL：

```
alter table mytable add primary key (col1, col2);

select table_name, column_name, nullable
  from user_tab_columns where table_name = 'MYTABLE';

TABLE_NAME   COLUMN_NAME  NULLABLE
------------ ------------ ---------
MYTABLE      COL1         N
MYTABLE      COL2         N 
```

如果禁用或删除主键，两列都会恢复到原始状态，co1 再次变为可空：

```
alter table mytable disable primary key;

select table_name, column_name, nullable
  from user_tab_columns where table_name = 'MYTABLE';

TABLE_NAME   COLUMN_NAME  NULLABLE
------------ ------------ ---------
MYTABLE      COL1         Y
MYTABLE      COL2         N 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-02T01:14:08.503

根据定义，主键永远不能为 Null。主键目的是唯一标识记录。主键是唯一指定行的列的组合。

Null 值表示缺少值。即使两条记录在同一列中具有 NULL，列值也不被视为相等。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-02T01:00:13.687

在大多数 DBMS 中，因为它是一个主键（并且定义是它在表中必须是唯一的），所以它肯定不能为空。

# iphone - UIAlertView 添加到应用程序时崩溃

> ID：13665396
> 
> 赞同：1
> 
> 时间：2012-12-02T00:57:04.540
> 
> 标签：iphone, ios, xcode, uialertview, iboutlet

我正在尝试在`UIAlertView`我的应用程序中添加一个基本功能（我正在使用情节提要）。但是当我运行我的应用程序时，它会在应用程序的加载屏幕停止后进入调试器屏幕。

我的.h：

```
 #import <UIKit/UIKit.h>
    @interface MindTripAnim :UIViewController {   
      IBOutlet UIImageView *animation;
    }

    - (IBAction)showMessage:(id)sender;

    @end 
```

和我的.m：

```
#import "MindTripAnim.h"
@interface MindTripAnim ()
@end

@implementation MindTripAnim

- (void)viewDidLoad {
   animation.animationImages = [NSArray arrayWithObjects:
                             [UIImage imageNamed:@"trips1.png"],
                             [UIImage imageNamed:@"trips2.png"],
                             [UIImage imageNamed:@"trips3.png"],
                             [UIImage imageNamed:@"trips4.png"],
                             [UIImage imageNamed:@"trips5.png"],                          
                             [UIImage imageNamed:@"trips6.png"],nil];
   [animation setAnimationRepeatCount:0];    
   animation.animationDuration = 0.65; 
   [animation startAnimating]; 
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (IBAction)showMessage:(id)sender
{
    UIAlertView *message = [[UIAlertView alloc] initWithTitle:@"Hello World!" message:@"This is your first UIAlertview message." delegate:nil cancelButtonTitle:@"Close" otherButtonTitles:nil];
    [message show];
}
@end 
```

我不确定我做错了什么，或者为什么应用程序一直在加载屏幕上停滞不前，请帮忙！

我在调试器中发现了这个

> 2012-12-01 19:39:03.428 MindTrip [3327:11303] *** 由于未捕获的异常“NSUnknownKeyException”而终止应用程序，原因：“[setValue:forUndefinedKey:]：此类不符合键警报的键值编码。***第一掷调用堆栈：（0x1c9a012 0x10d7e7e 0x1d22fb1 0xb84711 0xb05ec8 0xb059b7 0xb30428 0x23c0cc 0x10eb663 0x1c9545a 0x23abcf 0xffe37 0x100418 0x100648 0x100882 0x4fa25 0x4fdbf 0x4ff55 0x58f67 0x1cfcc 0x1dfab 0x2f315 0x3024b 0x21cf8 0x1bf5df9 0x1bf5ad0 0x1c0fbf5 0x1c0f962 0x1c40bb6 0x1c3ff44 0x1c3fe1b 0x1d7da 0x1f65c 0x2a4d 0x2975）的libc ++ abi.dylib：终止称为抛出异常（lldb）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T01:51:19.427

The issue is that you have added `alert`(or a pointer to some view called `alert`) in your storyboard but the same is not added to the class code. If you are displaying the alert view programmatically, you can remove it from the storyboard.

# backbone.js - 具有主干关系的主干 JS 嵌套模型

> ID：13665401
> 
> 赞同：1
> 
> 时间：2012-12-02T00:57:50.763
> 
> 标签：backbone.js, backbone-relational

我正在尝试使用骨干关系来实现 Backbone。

索赔模型：

```
define(['underscore', 'backbone', 'backbone-relational', 'models/User'], function(_, Backbone, relational, User) {
  var Claim = Backbone.RelationalModel.extend({

  relations: [{
      type: Backbone.HasOne,
      key: 'a_user',
      relatedModel: User
  }],

  defaults: {
  },

  initialize: function() {
  },

  clear: function() {
    this.destroy();
    this.view.remove();
  }

  });
  return Claim;
}); 
```

User 模型是重复的，但没有设置关系。

下面是集合对象：

```
Object
_byCid: Object
_byId: Object
_callbacks: Object
currentPage: 1
firstPage: 1
information: Object
length: 3
models: Array[3]
0: Object
1: Object
    _callbacks: Object
    _deferProcessing: false
    _escapedAttributes: Object
    _isInitialized: true
    _pending: Object
    _permitsUsed: 0
    _previousAttributes: Object
    _queue: Object
    _relations: Array[1]
    _silent: Object
    attributes: Object
       _deleted: false
       _new: false
       a_user: Object
           _callbacks: Object
           _escapedAttributes: Object
           _isInitialized: true
           _pending: Object
           _permitsUsed: 0
           _previousAttributes: Object
           _queue: Object
           _relations: Array[0]
           _silent: Object
           attributes: Object
               _deleted: false
               _new: false
               already_in_save: false
               already_in_validation: false
               coll_claims: Array[0]
               coll_claims_partial: true
               created_at: "2012-12-12 09:00:00"
               email: "cloud.strife@test.com"
               firstname: "Cloud"
               id: 2
               lastname: "Strife"
               modified_at: "2012-12-12 09:00:00"
               modified_columns: Array[0]
               start_copy: false
               title: "Mr"
               validation_failures: Array[0]
               virtual_columns: Array[0]
               __proto__: Object
               changed: Object
               cid: "c4"
               collection: undefined
               id: 2
               __proto__: Object
               already_in_save: false
               already_in_validation: false
      created_at: "2012-12-12 09:00:00"
      fulfilment: "bank"
      id: 2
      manual: 0
      modified_at: "2012-12-12 09:00:00"
      modified_columns: Array[0]
      promotion_id: 1
      purchase_id: 2
      start_copy: false
      status: "pending"
      user_id: 2
      validation_failures: Array[0]
      virtual_columns: Array[0]
      __proto__: Object
      changed: Object
      cid: "c3"
  collection: Object
  id: 2
  __proto__: Object
  2: Object
  length: 3 
```

所以本质上，集合中有 3 个 Claim 模型，每个 Claim 模型在属性键 a_user 处都有一个嵌套的 User 模型。

模板如下所示：

```
<% _.each( claims, function( item ){ %>
    <tr>
        <td><%= item.get("id") %></td>
        <td><%= item.get("promotion_id") %></td>
        <td><%= item.get("a_user").get("firstname") %></td>
        <td><%= item.get("purchase_id") %></td>
    <td></td>
        <td><%= item.get("status") %></td>
        <td><%= item.get("created_at") %></td>
    </tr>
<% }); %> 
```

但是，这会导致错误：

```
TypeError: 'null' is not an object (evaluating 'item.get("a_user").get') 
```

如果我把它带回 item.get("a_user") 它显示输出 [object Object]

我只是在学习 Backbone，所以任何指针都值得赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T01:00:31.387

您不应该`get`在模板中使用——下划线模板与 JSON 一起使用，而不是 Backbone 模型对象（您使用 将模型传递给模板`template(model.toJSON())`），因此应该使用基本的点符号来评估它们：

```
<tr>
    <td><%= item.id %></td>
    <td><%= item.promotion_id %></td>
</tr> 
```

# python - 翻转矩阵中的随机元素

> ID：13665406
> 
> 赞同：1
> 
> 时间：2012-12-02T00:58:43.773
> 
> 标签：python

我有一个矩阵（以列表形式），我正在尝试做两件事。

首先是在矩阵中选择一个随机元素并将其从 1 切换到 0 或从 0 切换到 1。

第二件事是做同样的事情，但不止一个元素；我需要先解决第一个问题！

我有开关功能（翻转零和一），下一行试图在 0 和矩阵大小减一之间切换矩阵（matrx）中的随机元素（否则它将超出范围） .

我想问题出在 int(size-1) 部分。只使用 size 就可以了，但我需要它是 size-1。

“大小”变量不是 0。

```
def switch(e):
    return ''.join('1' if x == '0' else '0' for x in str(e))

switch(matrx[randint(0,(size-1))][randint(0,(size-1))])

ValueError: empty range for randrange() (0,0, 0) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T01:13:41.333

看起来您的尺寸值为 0。错误来自 randint 函数...

# javascript - 为 Google Fusion Tables 的 SQL“IN”构造字符串

> ID：13665407
> 
> 赞同：0
> 
> 时间：2012-12-02T00:59:20.453
> 
> 标签：javascript, sql, google-maps-api-3

我有一个包含国家名称及其相应地理数据的 Google Fusion 表。我有一个站点需要获取一组国家/地区名称并将它们`IN('foo', 'bar', 'baz')`作为我为向我的谷歌地图添加图层而设置的字符串的一部分放入 SQL 中。

这是一个有效的代码*示例*：

```
var layer = new google.maps.FusionTablesLayer({
    query: {
        select: 'geometry',
        from: '1vnD6W9q3VWvV3UFaza8I8UwSSWv5k6kemDjNYLo',
        where: 'CNTRYNAME IN(\'Tanzania\', \'Angola\')'
    },
    styles: [{
        polygonOptions: {
        fillColor: "#D77D00",
        fillOpacity: 0.4
    },
    markerOptions: {
        iconName: 'open_diamond'
    },
}],
});
layer.setMap(map); 
```

您会注意到查询字符串需要`\`SQL 用于`IN`值的数组。我完全被困在如何从需要进入的值数组中构造一个字符串。

这是我尝试过的：

```
var str = 'CNTRYNAME IN(';
for (var i = 0; i < countries.length; i++) {
    str += '\\\'' + countries[i] + '\\\'';
    }
str += ')'; 
```

在这种情况下，查询不再正常工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T06:40:14.290

问题不在于引号的转义，您可以在这里简单地使用：

```
str += "'" + countries[i] + "'"; 
```

问题是您在查询中省略了逗号。

这应该有效：

```
var str = "CNTRYNAME IN('"+countries.join("','")+"')"; 
```

# asp.net-mvc-4 - MVC 4 如何使用 Ajax 从存储库获取 json 响应到视图中？

> ID：13665408
> 
> 赞同：0
> 
> 时间：2012-12-02T00:59:38.220
> 
> 标签：asp.net-mvc-4, repository-pattern, getjson

当谈到 MVC4 Web 开发时，我是一个新手，我正在努力解决一些问题。

基本上，我有以下内容：

```
public class maincontroller: Controller
{
    private MyRepository myRepository;

    public mainController()
    {
         myRepository= new MyRepository(); 
    }

    public ActionResult Index()
    {
        var mystuff = myRepository.GetPrograms();            
        return View(mystuff);
    }

    public ActionResult MyStuff()
    {
        var mystuff = myRepository.GetStuff(1);
        return Json(mystuff , JsonRequestBehavior.AllowGet);
    }
} 
```

假设在我的“MyRepository”类中我有两个功能：

一个正在设置“mystuff”的：

```
 public MyRepository()
    {

        for (int i = 0; i < 8; i++)
        {
            programs.Add(new MyStuff
            {
                Title = "Hello" + i,
                content = "Hi"

            });
        }
    }

and second function that gets Stuff:
public List<MyStuff> GetStuff(int pageNumber = 0)
    {
        return stuff
            .Skip(pageNumber * pageCount)
            .Take(pageCount).ToList();
    } 
```

一切正常。我的意思是我能够遍历“东西”并显示在视图上......

问题是我想`MyStuff()`使用 AJAX 显示（返回 Json ），然后将所有内容附加`stuff`到视图中。我怎么做？

我已经用头撞墙了大约 4 个小时，但无法正常工作。

请任何帮助将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T01:08:43.537

在最直接的层面上，您可以使用类似这样的方式简单地将 HTML 附加到您的文档中（假设您使用的是 JQuery，因为它更容易）：

```
<div id="container"></div>

// make AJAX call to "MyStuff" action in the current controller
$.get(@Url.Action("MyStuff", function(data) {

    // cycle through each item in the response
    $.each(data, function(index, item) {

        // construct some HTML from the JSON representation of MyStuff
        var html = "<div>" + item.StuffProperty + "</div>";

        // append the HTML to a container in the current document
        $("#container").append(html);
    });
}); 
```

这会将集合中每个项目的一些 HTML 添加到容器元素中，使用（例如）类中`StuffProperty`的。`MyStuff`

* * *

一旦变得过于复杂，像这样手动添加 HTML 可能会很麻烦——此时您应该考虑使用以下任一方法：

1.  部分视图（直接从控制器返回 HTML，而不是 JSON）
2.  一个客户端模板引擎，如 Mustache.js、Underscore.js 等，用于将 JSON 转换为 HTML。

# android - 当用户更改首选项活动中的设置时显示 Toast

> ID：13665409
> 
> 赞同：1
> 
> 时间：2012-12-02T01:00:04.930
> 
> 标签：android, preferences, toast, listpreference

我有一个带有 ListPreference 的首选项活动，我在另一个活动中使用此首选项，但我想在任何时候显示一个 Toast，用户在首选项活动中更改选项。例如，当用户单击 ListPreference 中的第二个单选按钮时，突然显示一个 toast 并说“第二个”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T01:09:32.177

问题是什么？

解决首选项并设置一个监听器来祝酒？例如像这样的东西

```
ListPreference listPreference = findPreference(key);
    listPreference.setOnPreferenceChangeListener(new OnPreferenceChangeListener() {
        @Override
        public boolean onPreferenceChange(Preference preference, Object newValue) {
            Toast.makeText(SettingsActivity.this, "second", Toast.LENGTH_LONG).show();
            return true;
        }
    }); 
```

# cmd - cmd中管道之前的正斜杠如何删除回声的行尾？

> ID：13665411
> 
> 赞同：1
> 
> 时间：2012-12-02T01:00:23.523
> 
> 标签：cmd, echo, pipe, carriage-return

这段代码：

```
 @echo off
    echo/|set /p ="Executing backup...."
    echo/|set /p =" backup procedure" 
```

...来自[同一行的 Echoing](https://stackoverflow.com/questions/4097041/echoing-in-the-same-line)并在 cmd 窗口中产生以下输出：

```
 Executing backup....backup procedure 
```

*但是，我似乎无法通过google*找到关于正斜杠`¿pipe?`对`set``echo`*`console / stdout`*

 *如果有人也可以建议一个好的网站来了解更多关于`cmd`/`cmd`程序的功能，我们将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T17:00:20.143

这`echo/`只是一种仅打印空行而不是`ECHO IS ON`单个`echo`.

但在这种情况下，它完全不重要，因为 echo 的唯一用途是为管道创建一些东西，所以 set /p 不会等待用户输入。

但是这种在没有换行符的情况下回显文本的方式非常低效，因为管道会创建两个新的 cmd.exe 实例。
使用起来更加简单快捷

```
<nul set /p "=My Text" 
```

来自的重定向`NUL`也将停止等待用户输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T01:23:37.413

照顾[https://stackoverflow.com/users/1201210/tenterhook](https://stackoverflow.com/users/1201210/tenterhook)

1） echo 打印 set /p =... 的结果，在管道之前有或没有 /，所以我不确定你的问题在问什么

2）（它也会在回显之后打印 set /p =... 随机垃圾，因为它正在读取管道内容而不是它接收的参数。）

因此，我将建议对引用的 SO 帖子进行编辑，以防止其他人混淆。*

# java - 如何在 TextView Android 中的字母上获取重音符号

> ID：13665413
> 
> 赞同：5
> 
> 时间：2012-12-02T01:00:33.453
> 
> 标签：java, android, text, textview

我有需要以拉丁文显示的文本。当文本文件显示在 TextView 中时，带有问号的小菱形会出现在所有字母应该带有重音符号的位置。任何人都可以帮忙吗？我需要能够以 PDF 格式显示文本。所以我通过将文本部分从 PDF 复制到文本文件中来获得我的文本文件。扫描文本文件的代码如下所示：

```
public String inputStreamToString(InputStream is) throws IOException
{
    StringBuffer sBuffer = new StringBuffer();
    BufferedReader  dataIO = new BufferedReader(new InputStreamReader (is));
    String strLine = null;
    while ((strLine = dataIO.readLine()) != null)
    {
        sBuffer.append(strLine + "\n");
    }

    dataIO.close();
    is.close();

    return sBuffer.toString();
} 
```

然后在 onCreate() 我有这个：

```
text = (TextView)findViewById(R.id.textView1);

    //text.setText("This is a whole lot of text and praying");
    InputStream iFile = getResources().openRawResource(idEng);
    try {

        text.setText(inputStreamToString(iFile));
        text.setFocusable(false);
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    text.setMovementMethod(new ScrollingMovementMethod());

    ELswitch = (ToggleButton)findViewById(R.id.toggleButton1);
    ELswitch.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
            // TODO Auto-generated method stub
            if(isChecked==true)
            {
                InputStream iFile = getResources().openRawResource(idLat);
                System.out.println(R.raw.sunday_compline_english);
                try {

                    text.setText(inputStreamToString(iFile));
                    text.setFocusable(false);
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            } else {
                InputStream iFile = getResources().openRawResource(idEng);
                try {

                    text.setText(inputStreamToString(iFile));
                    text.setFocusable(false);
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        }
    }); 
```

切换按钮使用户可以在英语和拉丁语之间来回切换。问题是拉丁文看起来像这样（所有带重音的字母都被一个奇怪的问号符号替换）： ![重音字母不显示的问题](../Images/09c2b542ca09a5d2cb0d7c3fd1b621f1.png)

这是文本文件的问题吗？我应该直接从 PDF 工作吗？如果有人有任何想法，我将非常感谢您的帮助。谢谢！

# networking - 如何在专用网络上启用多播 IP 转发

> ID：13665418
> 
> 赞同：1
> 
> 时间：2012-12-02T01:01:57.077
> 
> 标签：networking, multicast

我正在尝试让帝国时代 II (AoE2) 在我的局域网上工作。AoE2 因其在现代系统上的连接问题而臭名昭著，这可能是因为它使用了一个现已弃用的网络框架，称为 DirectPlay（在 DX9 中），而且代码在当时可能也不健壮。

当我在计算机 (win7) 上为 AoE2 托管 LAN 游戏时，Wireshark 显示我的计算机通过 SSDP 协议向多播地址 239.255.255.250 发送了几个数据包。这实际上是到我的路由器（我假设用于转发），我的路由器使用 ICMP 协议返回一个数据包，上面写着“无法到达目标（无法到达端口）”。因为没有任何东西转发到网络上的其他计算机，所以他们看不到主机创建的游戏。

我想我需要让应用程序/windows7 像广播一样发送数据包，或者我需要让路由器广播数据包去那个多播地址。有没有人对如何做到这一点有想法或建议？

我的路由器/网关正在运行 DD-WRT 固件 v24-sp2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T01:31:49.623

我的第一个猜测是您正在使用 wifi，默认情况下，大多数系统在 wifi 上禁用多播，因为它会对 wifi 使用的时间切片产生不利影响。但是，对于几台机器来说，这应该不是问题。

这是禁用多播的方法，但它应该为您指明启用它的正确方向：[ddwrt multicast](http://www.dd-wrt.com/wiki/index.php/Setting_up_IPTV_without_impact_to_LAN_and_Wireless_traffic)

其次，确保它们都在同一个 VLAN 中，一个 VLAN 被定义为“广播域”，这意味着在不同 VLAN 上的机器将永远不会从其他 VLAN 获得广播或多播，而不需要一些技巧。

最后确保您已启用 LAN 端口之间的多播我相信该选项是“多播转发”

编辑：如果其他人有这个问题，只需将一些东西添加到列表中。ipv6 中不存在广播，运行 ipv6 的机器也可能看不到来自 ipv4 上的机器的广播，而 ipv4 上的机器也不会看到到 ipv6 多播地址的多播。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-29T11:34:27.760

你试过 LogMeIn Hamachi 吗？

它本身不是 LAN 客户端，但它会创建一个虚假的 Online-LAN，并为您提供一个工作 IP，让您可以与拥有它的人一起玩。

# php - 我正在尝试将 PDO 和 OOP 结合起来，但无法正常工作

> ID：13665421
> 
> 赞同：2
> 
> 时间：2012-12-02T01:02:27.093
> 
> 标签：php, mysql, security, oop, pdo

所以我基本上有两个文件。最后我会得到更多，但我想创建一个名为的类，该类`DB`将使用 PDO 数据库操作，然后我将扩展该类以使我的所有函数都用于处理数据库。所以`DB`class 会扩展为 class `dbADD`，它将具有针对不同数据库表的所有添加功能。

这被称为`config.php`：

```
<?php

DEFINE ('DBHOST', 'localhost');
DEFINE ('DBUSER', 'REMOVED');
DEFINE ('DBPSW', 'REMOVED');
DEFINE ('DBNAME', 'REMOVED');

class DB {
    public $db;
    private static $instance;   

    public function __constructor(){
        $config ['db'] = array(
        'host'      =>  DBHOST,
        'username'  =>  DBUSER,
        'password'  =>  DBPSW,
        'dbname'    =>  DBNAME,
        );

        $this->db = new PDO('mysql:host ='  . $config['db']['host'] . ';dbname='  .   $config['db']['dbname'],$config['db']['username'],$config['db']['password']) ;
    }

    public static function getInstance()
    {
        if (!isset(self::$instance))
        {
            $object = __CLASS__;
            self::$instance = new $object;
        }
        return self::$instance;
    }

    public function GetArticles ($search){
        $sql = "SELECT `FirstColumn`, `SrcColumn`, `article` FROM `test_table`  WHERE `FirstColumn` = 23";  

        //$dbs = new DB();
        $dbs = DB::getInstance();
        $query = $dbs->db->prepare($sql);
        //$query->bindValue(':search', $search, PDO::PARAM_INT);
        $query->execute();

        while ($row = $query->fetch(PDO::FETCH_OBJ)) {
            // = $row['article'],'</br>';
            $return = $row['article'];
        }   
        return $return;
    }
}
?> 
```

这个文件是我的测试文件，它并不重要，只是一个测试场。叫`test.php`：

```
<?php
require_once('app_core/config.php');
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Untitled Document</title>

    <link rel="stylesheet" href="/style/style.css" type="text/css" media="screen" />
</head>

<body>
    <?php
    $db = new DB();
    //echo $db->db;
    //echo $db->GetTestDB();
    //$test = $db->TestThis();
    //print_r($test);
    echo $db->GetArticles('23');
    ?>
</body>
</html> 
```

如果可能的话，我还有另外两个担忧：第一个问题是安全问题——这是一个好习惯吗？另一个问题是如何隐藏带有此密码数据的文件，以便我可以使用它们但没有人可以读取它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T01:30:24.270

好的，这里有很多事情要做，所以我将尝试一次解决一个问题，以使此类以面向对象的方式正常运行（而不是一组不完全相关的方法） .

### 首先，您的构造函数：

```
//  Make these private, will find out why in a moment...
private $db;
// __construct, not __constructor!!
private function __construct() {
    // This whole array doesn't serve any purpose because the constants
    // are defined and available in all scopes
    // while this array is local to the __construct().  
    // Just get rid of it and use the 
    // constants directly in the PDO connection
    //$config ['db'] = array(
    //    'host'          =>      DBHOST,
    //    'username'      =>      DBUSER,
    //    'password'      =>      DBPSW,
    //    'dbname'        =>      DBNAME,
    //);

    // Use some error checking when establishing your connection
    try {
      // Some extra bad whitespace removed around =
      $this->db = new PDO('mysql:host=' . DBHOST . ';dbname=' . DBNAME, DBUSER, DBPSW); 
    } catch (PDOException $e) {
      echo 'Connection failed: ' . $e->getMessage();
    }
} 
```

### 接下来是你的单例访问器 getInstance()。

```
// No code changes necessary....
public static function getInstance()
{
    if (!isset(self::$instance))
    {
        $object = __CLASS__;
        self::$instance = new $object;
    }
    return self::$instance;
} 
```

由于您已经定义了一个以单例方式访问该类的方法，因此该属性`$db`和. 在任何时候你都不会调用来实例化它，或者调用来直接访问连接。相反，您将调用以访问单例实例，并且您的方法喜欢执行查询。`__construct()``private``$DB_class-instance = new DB()``$DB_class_instance->db``DB::getInstance()``GetArticles()`

### 现在进入您的查询方法：

```
public function GetArticles ($search){
    // Ok a SQL string, no problem...
    $sql = "SELECT `FirstColumn`, `SrcColumn`, `article` FROM `test_table`  WHERE `FirstColumn` = :search";

    // There's no need for this.  You already defined $db as 
    // a class property, so you should be using $this->db
    // $dbs = DB::getInstance();

    $query = $this->db->prepare($sql);
    // bind the $search input parameter...
    $query->bindParam(':search', $search);

    // Test for success
    if ($query->execute()) {

      $row = $query->fetch(PDO::FETCH_OBJ) {
      // I suppose you know what you want here. If you're only expecting 
      // one article, there's no real need for the while loop.
      // You can just fetch() once.
      $return = $row->article;

      // OR.....

      // However, if you are expecting *multiple* rows, you should be accumulating them
      // into an array like this:
      $return = array();
      while ($row = $query->fetch(PDO::FETCH_OBJ)) {
         // Append to an array
         $return[] = $row->article;
         // OR to get multiple columns returned as an object...
         $return[] = $row;
      }
      return $return;
   }
   else {
     // Query failed, return false or something
     return FALSE;
   }
} 
```

### 最后你的控制器代码：

```
// The constructor is private, so you can't do this
// $db = new DB();
// Instead you need to use getInstance()
$db = DB::getInstance();
// Returns an array, so print_r()
print_r($db->GetArticles('23')); 
```

由于我们创建了类的`$db`属性`private`，因此无法在类外访问它。因此，您需要定义与`GetArticles()`您计划运行的任何其他查询类似的查询方法。如果您认为有时需要构建非类方法的临时查询，那么您可以将其更改为

```
public $db 
```

然后，您可以在类之外执行以下操作，而不必构建类方法来执行此操作。*但是*，您仍然需要打电话`getInstance()`。

```
$dbs = DB::getInstance();
// Run a query via the PDO connection $dbs->db
$result = $dbs->db->query('SELECT * FROM sometable'); 
```

### 小风格问题：

这实际上不会引起问题，因为标识符不区分大小写，但在风格上它很奇怪。`define()`是一个函数调用，通常使用小写：

```
define('DBHOST', 'localhost');
define('DBUSER', 'REMOVED');
define('DBPSW', 'REMOVED');
define('DBNAME', 'REMOVED'); 
```

### 关于您的文件安全

只要您的 Web 服务器配置正确，其他人就无法读取这些文件。如果 Web 服务器将 .php 文件发送到 PHP 解释器而不是将其内容转储到浏览器，那么这些文件是安全的。如果您在共享主机上并且主机没有正确地将您的文件与其他租户隔离，那是他们的问题，唯一好的解决方案是获得更好的主机。

但是，将敏感文件存储在 Web 服务器的文档根目录之上是明智的。然后，即使是配置错误的 Web 服务器也不会意外地将其内容转储到客户端。它们只能通过 PHP 访问`include`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T02:05:20.923

As PDO is already an object, maybe you don't need to create a singleton class for it at all.

Instead, make a generic model class which you pass the PDO object to.

```
<?php

class Model {
    private $pdo;

    __construct(PDO $pdo) {
        $this->pdo = $pdo
    }

    // generic model methods go here
} 
```

Then you can subclass this and flesh out the functionality for each model that you create.

Usage would be something like:

```
$PDO = new PDO("mysql:host={DBHOST};dbname={DBNAME}", DBUSER, DBPSW);
$myModel = new MyModel($pdo);
$bob = $myModel->getByName('bob');
$articles = new Articles($pdo);
$recentArticles = $articles->getRecent(new Date()); 
```

In regards to security, this article offers some nice general tips, [http://www.tuxradar.com/practicalphp/17/0/0](http://www.tuxradar.com/practicalphp/17/0/0). In fact, the entire guide is quite helpful.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T01:29:38.617

建议：

1.  如果可能，不要使用内联 SQL，因为如果您更改数据库的方案，假设您将列从 foo 重命名为 bar，您将必须找到使用 foo 的所有内联 SQL 并将其更改为 bar。

2.  你的想法很好，对不同的动作类型有一个通用的行为，但是没有实现它的意义，因为这个好想法之前已经实现了。例如，您可以尝试 Flourish，它是一个 ORM，可以为您提供很多帮助。

3.  如果可以将密码存储在数据库中，请不要将密码存储在单独的文件中，但不要忘记加密密码并使用盐来改进加密。

# c++ - 模式匹配 mingw make

> ID：13665425
> 
> 赞同：0
> 
> 时间：2012-12-02T01:03:50.427
> 
> 标签：c++, build, makefile

我对 Makefiles 非常陌生，我目前正在尝试在我开始的项目上构建我的第一个。

我遇到的问题是让它自动知道如何处理我所有的 .cpp 文件，而无需为每个文件定义规则。

我还希望我的目标文件都放在一个文件夹中，在这种情况下是`$(PLATFORM)/obj`/ where 。`PLATFORM=win32`

以下是我用于 Makefile 的内容，使用 mingw32-make.exe 执行它

```
CXX=g++
CXXFLAGS=-c -Wall -DALLEGRO_STATICLINK
LDFLAGS=
PLATFORM=win32
SOURCES=main.cpp
EXECUTABLE=app.exe
OBJDIR=$(PLATFORM)/obj/
OBJECTS= $(SOURCES:%.cpp=$(OBJDIR)%.o)

all: $(EXECUTABLE)

%.o: %.c
    $(CXX) $(CXXFLAGS)  $< -o $@

$(EXECUTABLE): $(OBJECTS)
    $(CXX) $(OBJECTS) $(LDFLAGS) -o $(EXECUTABLE) 
```

我收到错误：

> mingw32-make: ***没有规则来制作目标`win32/obj/main.o', needed by` app.exe' 。停止。

我不确定我做错了什么，我一直在查看其他 makefile 示例，它们似乎具有相似的结构，所以我不确定我的问题是什么。我正在寻找为什么会发生这种情况的解释，以及如何解决它的建议。
此外，对我的风格的任何评论，使其更干净/标准化的建议也会很棒。在学习制作 makefile 时，我想确保自己学习得当。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T01:12:48.527

我不想劝阻您不要使用手动 makefile，但是如果您想完全消除这个问题，可以使用自动工具来为您生成 makefile。由于您使用的是 Windows，我怀疑您使用的是 cygwin（或者可能是 MingGW）。对于 cygwin，只需下载 autotools 二进制包。如果您将 Eclipse 用于您的 IDE（我强烈推荐），您可以配置您的环境以使用自动工具。这样，您只需专注于编写代码。所有可配置选项仍然存在，但您不必知道 make。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T01:14:15.123

`make`看到它需要创建`win32/obj/main.o`，但看不到任何规则来告诉它如何做到这一点。

你有三个规则，一个 for `all`，一个 for`%.o`和一个 for `$(EXECUTABLE)`。第一个和最后一个不会告诉`make`如何创建`win32/obj/main.o`。

第二条规则可能应该，但它是这样说的：如果你想创建`<something>.o`，那么首先确保有一个名为的文件`<something>.c`（如果它不存在，请尝试找到一个规则来创建它）。然后运行以下命令：`$(CXX) ...`

但是该文件`<something>.c`不存在，因为您的文件以`.cpp`. 所以这条规则失效了。`make`找不到任何其他规则来构建`win32/obj/main.o`，所以它放弃了。

总而言之，您需要更改规则以便`%.o`依赖于`%.cpp`，然后`make`才能运行命令来创建目标文件。所以规则应该是：

```
%.o: %.cpp
    $(CXX) $(CXXFLAGS)  $< -o $@ 
```

顺便说一句，`make`也有预定义的隐含规则。因为您给出了一个明确的规则，因为`%.o`您实际上是在覆盖预定义的规则。我建议你在某个时候尝试根本不给出这个规则（但仍然定义`CXX`and `CXXFLAGS`），看看会发生什么。有关详细信息，请参阅[此](http://www.gnu.org/software/make/manual/html_node/Catalogue-of-Rules.html)。

# iphone - 获取 UIButton 所在的视图

> ID：13665426
> 
> 赞同：6
> 
> 时间：2012-12-02T01:03:51.767
> 
> 标签：iphone, objective-c, ios

我在自定义 UITableViewCell 上有一个 UIButton，我有一个方法“完成”。

如何通过 Button 获取 CustomTableViewCell？

```
-(IBAction)done:(id)sender {
    (CustmCell((UIButton)sender).viewTheButtonIsOn...).action
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-02T01:16:41.730

CodaFi 的答案很可能已经足够了，但它确实假设按钮直接添加到表格单元格中。稍微复杂但更安全的代码可能类似于：

```
-(IBAction)done:(id)sender {
    UIView *parent = [sender superview];
    while (parent && ![parent isKindOfClass:[CustomCell class]]) {
        parent = parent.superview;
    }

    CustomCell *cell = (CustomCell *)parent;
    [cell someAction];
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-02T01:06:25.593

如果它作为子视图直接添加到单元格中，则可以使用`-superview`它来获取它的父视图。此外，您需要使用指针进行强制转换，因为对象从不按值获取，仅在 Objective-C 中指向。

```
-(IBAction)done:(id)sender {
    [(CustmCell*)[(UIButton*)sender superview]someAction];
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-02T01:16:49.833

另一种方法是创建具有 CustomCell 属性的 UIButton 的子类，以直接访问 CustomCell 对象。这在技术上比寻找超级视图的超级视图更好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-25T01:04:14.887

您还必须考虑 contentView，或者按钮现在或将来可能包含的单元格的任何其他子视图。安全并遍历父层次结构。

```
var parent = button.superview
while let v = parent where !v.isKindOfClass(MyCustomCell)   {
    parent = v.superview
}

// parent is now your MyCustomeCell object 
```

# haskell - 无法安装 xmonad-extras？

> ID：13665427
> 
> 赞同：-1
> 
> 时间：2012-12-02T01:04:37.903
> 
> 标签：haskell, xmonad

hackage中的软件没有经过彻底测试吗？`cabal install xmonad-eval`甚至导致以下错误：

```
$cabal install xmonad-extras
...    
[10 of 22] Compiling Hint.Reflection  ( src/Hint/Reflection.hs, dist/build/Hint/Reflection.o)
src/Hint/Reflection.hs:75:41:
Couldn't match expected type `[Char]' with actual type `a0 -> String'
Expected type: Id 
Actual type: a0 -> String
In the return type of a call of `getUnqualName'
In the first argument of `Class', namely `(getUnqualName c)'
Failed to install hint-0.3.3.5
cabal: Error: some packages failed to install:
hint-0.3.3.5 failed during the building phase. The exception was:
ExitFailure 1
xmonad-extras-0.10.1.2 depends on hint-0.3.3.5 which failed to install. 
```

任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T03:33:37.127

通过将 GHC 从 7.0.3 升级到 7.4.1，效果很好。

# shopify - 关于 Shopify API 产品变体的有效值的说明

> ID：13665438
> 
> 赞同：2
> 
> 时间：2012-12-02T01:06:47.310
> 
> 标签：shopify

关于产品变体某些属性的有效值的问题。

具体来说，变体inventory_management 属性和fulfillment_service 属性存在混淆。

对于初学者，这里是商店管理员输出的变体的一些 JSON：

```
compare_at_price: "39.99"
created_at: "2012-02-18T20:14:40-05:00"
fulfillment_service: "manual"
grams: 0
id: 201382272
inventory_management: "shopify"
inventory_policy: "deny"
inventory_quantity: -1
option1: "Gold"
option2: null
option3: null
position: 1
price: "29.99"
product_id: 85812592
requires_shipping: true
sku: "charm amethyst"
taxable: true
title: "Gold"
updated_at: "2012-12-01T19:29:32-05:00" 
```

现在，这里是 Shopify 帮助文档的链接，解释了所有变体属性的有效值：

[http://wiki.shopify.com/Variant#variant.inventory_management](http://wiki.shopify.com/Variant#variant.inventory_management)

鉴于此链接将您带到看起来像流动代码的内容，我希望我们可以期望后端的相同属性重新出现在前端。在大多数情况下，它们都是这样做的，这里是前面提到的链接中提供的所有属性的列表：

```
1 variant.id
2 variant.title
3 variant.price
4 variant.compare_at_price
5 variant.available
6 variant.inventory_management
7 variant.inventory_quantity
8 variant.inventory_policy
9 variant.weight
10 variant.sku
11 variant.option1
12 variant.option2
13 variant.option3
14 variant.options
15 requires_shipping
16 taxable 
```

希望您已经注意到出现在后端 API 上的履行服务未在前端表示。

为了使事情进一步复杂化，已经编写了另一篇帮助文章来在[此处](http://wiki.shopify.com/Help%3aProducts)提供变体属性的定义。这篇文章的问题在于它提到了一个名为“Variant Inventory Tracker”的变体属性，它没有出现在帮助文档的其他任何地方，但似乎包含与fulfillment_service 和可能的inventory_management 变体相关的值。

非常感谢这里的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T15:06:24.797

variant.inventory_management 的有效值为 `["Shopify", "Shipline", ""]`

variant.fulfillment_service 的有效值为 `["Manual", "Shipwire", "Webgistix", "Amazon Marketplace Web"]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T18:15:49.913

如需最新的 API 文档，请使用我们的[API 文档](http://api.shopify.com/)。API 文档是自动生成的，而 wiki 显然已经过时了。从变体 API 文档：

```
{
  "variant": {
    "compare_at_price": null,
    "created_at": "2012-12-06T17:33:56-05:00",
    "fulfillment_service": "manual",
    "grams": 200,
    "id": 808950810,
    "inventory_management": "shopify",
    "inventory_policy": "continue",
    "option1": "Pink",
    "option2": null,
    "option3": null,
    "position": 1,
    "price": "199.00",
    "product_id": 632910392,
    "requires_shipping": true,
    "sku": "IPOD2008PINK",
    "taxable": true,
    "title": "Pink",
    "updated_at": "2012-12-06T17:33:56-05:00",
    "inventory_quantity": 10
  }
} 
```

我认为这应该回答你的问题。作为旁注，我们的文档正在积极地进行重新调整，因此一旦推出，这种事情在未来就不应该成为问题。

# pthreads - 使用 pthreads 的完美数字计算器

> ID：13665440
> 
> 赞同：2
> 
> 时间：2012-12-02T01:07:07.840
> 
> 标签：pthreads, perfect-numbers

我正在尝试制作一个使用效率非常低的算法的程序，该算法使用 POSIX 线程计算范围内的完美数。我似乎无法很好地掌握锁定的概念以使我的算法正常工作。我想返回一个完美数字列表。任何人都可以就如何更好地实施这一点提供一些建议吗？

具体问题： - 我如何让它只打印出每个完美数字的 1 个瞬间？- 如何让它返回值而不是只打印值？

资源：

```
static pthread_mutex_t mtx = PTHREAD_MUTEX_INITIALIZER;

static void * threadFunc(void *arg) {

    int range, start, end;
    int i, s,  number, mod, divisor, temp, sum;

    s = pthread_mutex_lock(&mtx);   

    /* Takes in a string and pulls out the two integers */
    sscanf(arg,"%i-%i", &start, &end);
    printf("\nStart: %i\nEnd: %i\n", start, end);

    printf("\n");

    s = pthread_mutex_unlock(&mtx);

    for (number=start; number<=end; number++) { // loop through range of numbers                

        temp=0,sum=0;           
        // loops through divisors of a number and sums up whole divisors
        for (i=1; i<number; i++) {          
            //s = pthread_mutex_lock(&mtx);             
            mod = number % i;           
            //s = pthread_mutex_unlock(&mtx);           

            if (mod == 0){              
                s = pthread_mutex_lock(&mtx);               

                divisor = i; 
                sum = divisor + temp;
                temp = sum;

                s = pthread_mutex_unlock(&mtx);                     
            }                       
        }
        //if the sum of whole divisors is equal to the number, its perfect
        if (sum == number)  {           

            s = pthread_mutex_lock(&mtx);           

            printf("%i is a Perfect Number \n", sum);
            //return sum somehow;           

            s = pthread_mutex_unlock(&mtx);         
        }
    }

    return NULL;
}

int main(int argc, char *argv[]) {
    pthread_t tid[5];

    int prefect_number, i, s;

    char input[]="1-9999";

    for(i=0; i < 5; ++i) {
        pthread_create(&tid[i], NULL, &threadFunc, input);
        print_thread_info();
    }
    /* Wait for the perfect number thread to complete, then get result. */  
    for(i=0; i < 5; ++i)
        pthread_join(tid[i],NULL);

    return 0;   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T14:51:38.047

您只需要在访问可能从另一个线程修改的数据结构（例如全局变量）或资源（例如终端）时锁定互斥锁。

*   您无需锁定互斥锁即可访问单个线程的本地变量
*   您不需要锁定互斥锁来读取从未被另一个线程修改过的全局变量

因此，在您的情况下，互斥锁的单个用例是防止多个 printf's() 可能混淆它们的输出。

此外，让所有线程探索相同的范围是没有意义的。也许您想要 5 个线程分别探索不同的范围（0-1999、2000-2999 ... 8000-9999）？

pthread_join() 返回线程的退出值（您传递给 return 或 pthread_exit() 的那个）。如果您想返回多个值，您可能需要创建一个全局变量来保存数字的链接列表（最后需要一个互斥锁，因为不同的线程需要写入它）

# c++ - 在 C/C++ 中生成 2 个限制之间的随机素数

> ID：13665443
> 
> 赞同：7
> 
> 时间：2012-12-02T01:07:44.187
> 
> 标签：c++, c, algorithm, primes

是否有内置函数可以在 C/C++ 中的 2 个给定限制之间生成随机素数？

我想要一个可以生成 100 万到 10 亿之间的随机素数的函数

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-02T01:19:09.583

您可以像这样有效地做到这一点：

1.  在该区间内生成一个随机数；
2.  检查它是否可以被前几个素数中的任何一个整除（例如`2 .. 17`，实验以获得最佳结果）。如果是，转1；
3.  使用[Miller-Rabin](http://en.wikipedia.org/wiki/Miller%E2%80%93Rabin_primality_test)测试素数。

也可以看到[这个](http://en.wikipedia.org/wiki/Generating_primes)类似的，更复杂的想法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-02T01:12:59.483

当我不得不这样做时，我创建了一个名为 isPrime() 的函数。isPrime() 将检查并确定一个数字是否为素数。

isPrime() 有两个不同的函数，一个将永远运行并打印每个素数，另一个将运行到某个数字。

您可以使用 i 和 j 之间的所有质数填充一个数组。然后生成一个小于或等于数组大小的随机数。使用此随机数从数组中选择一个元素。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-02T04:23:10.030

要在两个边界之间生成一个随机数，请执行此操作

```
extern unsigned int urand();
int lower = 1000000;
int upper = 1000000000;
int p = urand() % (upper - lower) + lower; 
```

要测试接近 10 亿的数是否为素数，只需将所有素数 < sqrt(10 亿) = 31622 进行试除即可。大约有 3400 个这样的素数。做一个数组

```
unsigned short primes[3400] = { 2, 3, 5, .. 31657 } 
```

并除以他们。如果所有的试除法都有余数！= 0，那么这个数字是素数。

对于这么小的素数，我怀疑任何更复杂的素数测试都会更快。

# css - 使用 CSS、背景和标题问题的 HTML5 网站

> ID：13665450
> 
> 赞同：0
> 
> 时间：2012-12-02T01:08:53.550
> 
> 标签：css, html, background, web

我在我的 css 页面上工作，试图在我的网站周围放置一个背景图片，以便为整个项目带来更多漂亮的外观。在 css 中，我将背景包含在正文中，但如您所见，它不会显示在网站上。我很困惑，为什么？下面是 CSS 和项目网站：

```
#header {text-align: center;}

#body { background-image:url('backgroundflower.jpg');}

#container {
    width: 960px;
    margin: 0 auto;
     background-color: #FAFAFA;
     color: #003300;
     font-family: Arial, Helvetica, sans-serif;

}

#h2 {text-align: center;}

#container {
            width: 960px;
            margin: 0 auto;
        }

        #container div {
            border: 1px solid black;
        }

        #header {}

        #left,
        #center,
        #right {
            float: left;
            margin: 10px 0 10px 20px;
            min-width: 200px;
        }

        #center {font-family: Josefin Slab; background-color: #FFFFFF;
            width: 494px;
        } 

        .clear {
            clear: both;
        }

#right { font-family: Josefin Slab;}

#left a {text-decoration: none;
         display: block;
         text-align: center;
         color: #FFFFCC;
         font-weight:bold;
         border: 3px outset #CCCCCC;
         padding: 5px;}

figure{}

#left a:link { background-color: #003366; }
#left a:visited { background-color: #48751A; }
#left a:hover {border: 3px inset #333333; }

#left ul { list-style-type: none;
          margin: 0;
          padding-left: 0; }

#footer { text-align: center; font-family: Audimat; background-color: #E1F5A9;
    clear: both; } 
```

[http://younani.com/finalsite/finalindex.html](http://younani.com/finalsite/finalindex.html)

另外，我制作了一个客户横幅，当我尝试将其放置在上面写着尤纳尼花的位置时，它只会伸展并实际上超出标题，不适合。有没有更好的方法为 h1 放置图像？如果需要提供更多编码，请告诉我。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T01:11:06.183

您通过在其前面放置一个散列来将主体视为一个 ID。

```
#body { background-image:url('backgroundflower.jpg');} 
```

它应该是：

```
body { background-image:url('backgroundflower.jpg');} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T01:11:44.550

您的 CSS 引用了`#body`，但没有 ID 属性为 body 的元素。

您应该删除该`#`CSS 行并将其更新为：

```
body { background-image:url('backgroundflower.jpg');} 
```

# android - 当前用于编写的 Android Google 电子表格 API 示例

> ID：13665451
> 
> 赞同：6
> 
> 时间：2012-12-02T01:09:01.010
> 
> 标签：android

我正在寻找一个编写 Google 电子表格并从 Android 向其中添加行的示例。到目前为止，我发现的所有示例要么已过时，要么仅包括身份验证，要么仅列出文档/电子表格（不包括任何写入）。您知道创建电子表格并向其添加行的任何示例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-14T19:58:27.313

电子表格的东西似乎一直在变化，很难判断它是否受支持以及受支持的程度。但我目前正在跟进看起来很有希望的最简单的线索。那包含着：

1.  [使用来自 Google Play 服务的 oAuth2.0](http://developer.android.com/google/play-services/auth.html)对用户进行身份验证
2.  遵循[API v3.0 文档中的最新说明](https://developers.google.com/google-apps/spreadsheets/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-02T19:06:32.627

这是用于 Google 电子表格 api 的 Android api 包装器：git@github.com:ralph240574/spreadsheet-api.git

还有一个工作示例：git@github.com:ralph240574/spreadsheet-api-android-example.git

这是一个使用 api 的应用程序：https: [//play.google.com/store/apps/details? id=com.iubiquity.fc](https://play.google.com/store/apps/details?id=com.iubiquity.fc)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T10:48:24.597

看看这个链接：

[https://developers.google.com/google-apps/spreadsheets](https://developers.google.com/google-apps/spreadsheets)

对于这个问题：

[Android - 谷歌电子表格 API](https://stackoverflow.com/questions/13838963/android-google-spreadsheet-api)

# xcode4.5 - 在 Xcode 中按下信息按钮时调用一个简单的文本视图

> ID：13665453
> 
> 赞同：0
> 
> 时间：2012-12-02T01:09:56.670
> 
> 标签：xcode4.5

我在我的应用程序中创建了一个信息按钮，viewdidload 中的代码如下所示：

```
UIButton *infoButton = [UIButton buttonWithType:UIButtonTypeInfoLight];
[infoButton addTarget:self action:@selector(showInfo:)
     forControlEvents:UIControlEventTouchUpInside];
UIBarButtonItem *rightBarButtonItem = [[UIBarButtonItem alloc]
                                       initWithCustomView:infoButton];
self.navigationItem.rightBarButtonItem = rightBarButtonItem; 
```

但是我如何向这个信息按钮添加一个简单的文本视图，所以当我按下它时，文本会出现？

我试图查看来自苹果的 NavBar 示例代码，但我没有设法让它工作。

谁能帮我？

编辑：

还有其他建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T01:13:32.893

未经测试，因为我附近没有 Mac，但是...如果您在共享对象中创建 textView，您应该能够在 showInfo: 选择器中设置其文本并声明它可见。

# scala - 如何在 SORM 上删除和创建表？

> ID：13665459
> 
> 赞同：3
> 
> 时间：2012-12-02T01:11:48.557
> 
> 标签：scala, sorm

为了进行隔离测试，在每次测试之前删除并创建表或清理它们会很有趣。使用 SORM 有什么简单的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T12:10:52.513

[您可以使用close()](http://sorm-framework.org/api/#sorm.Instance)方法为每个测试创建新实例，并将其`initMode`设置为[DropAllCreate](http://sorm-framework.org/Documentation.html#initialization_mode)并释放所有实例的资源。

像下面这样的自定义函数可能对您有帮助：

```
def withDb ( f : Instance => () ) {
  val db = new Instance ( ..., initMode = InitMode.DropAllCreate )
  f(db)
  db.close()
} 
```

使用它可以很容易地始终在新创建的实例的上下文中工作：

```
withDb { db =>
  db.save(...)
  db.query[...](...)
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T01:12:50.760

我的解决方案是定义 reload 方法来删​​除和重新创建表而不重新连接。我的实例定义：

```
class DatabaseTest extends Instance(...) {
  def reload = {
    connector.withConnection { connection =>
      connection.dropAllTables()
      Create.tables(mappings.values).foreach {
        t => connection.createTable(t)
      }
    }
  }
} 
```

# c# - 可以在 html 或 c# 中显示 onclick 事件的变量。

> ID：13665460
> 
> 赞同：-2
> 
> 时间：2012-12-02T01:11:53.570
> 
> 标签：c#, javascript, asp.net

我可以在 html 或 c# 中显示 onclick 事件的变量吗？我在 onclick 事件上调用了 alert(string) 但未显示字符串。我正在制作一个购物车，其中我在 c# 中为购物车制作了一个类。单击按钮时，我想显示所有选定的项目和数量，我正在调用该`cart.stratc`方法为选定的项目`onclickevent`准备消息字符串。我无法显示字符串`cartstr`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T02:33:16.027

点击事件需要使用runat="server"。这将调用您的代码后面的方法，并在代码后面引用另一个控件，例如在页面上定义的文本框以显示结果

文本框控件也必须定义为 asp 服务器控件。

# java - 在可变行长的java 2D数组中查找列的最大元素

> ID：13665461
> 
> 赞同：3
> 
> 时间：2012-12-02T01:11:57.767
> 
> 标签：java, arrays, multidimensional-array

我有一个二维数组，它有不同长度的行。我想编写一个方法，该方法返回一个由列的最大元素组成的新数组。如果这是一个简单的 nxm 数组，那会很容易，但由于行是可变长度的，我无法想出一个解决方案来解释列中不同数量的元素。

例如，数组如下所示：

```
int[][] test = { { 0, 1, 4, 5, 6, 8 }, 
                 { 4, 5, 8, 3, 9 },
                 { 3, 6, 2 } 
               }; 
```

预期的结果将是：

```
int[] result =  {4, 6, 8, 5, 9, 8}; 
```

我有找到行的最大元素的代码，但我不知道如何为列调整它。

```
int[] result = new int[m.length];

      for (int x = 0; x < m.length; x++) {
         result[x] = 0;
         for (int y = 0; y < m[x].length; y++) {
            if (result[x] < m[x][y]) {
               result[x] = m[x][y];
            } 
         } 
      } 
```

任何帮助，将不胜感激

编辑：我现在意识到要做的第一件事是找到元素数量最多的行，因为它定义了新数组的大小。从那里.. 可能应该获取一行的元素并将它们与新数组中相同位置的元素进行比较。对每一行都这样做。那么其他行有多短都没关系。我走对了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T01:19:03.250

首先，您要找到最大行的长度。

然后，与您的算法类似，但您要确保不会越界异常。而已：

```
int maxcol = 0;
for(int i = 0; i < test.length; i++)
    if(test[i].length > maxcol)
        maxcol = test[i].length;

int[] result = new int[maxcol];

for (int j = 0; j < maxcol; j++)
    for (int i = 0; i < test.length; i++)
        if (test[i].length > j && result[j] < test[i][j])
            result[j] = test[i][j]; 
```

# java - 您如何在 Play Framework scala 模板中使用 DTO？

> ID：13665467
> 
> 赞同：3
> 
> 时间：2012-12-02T01:13:14.470
> 
> 标签：java, templates, scala, playframework-2.0

我正在玩一个 Play 应用程序，我想将 DTO 列表从控制器传递到模板：`@(dtos: List[MyDTO])`

我的第一直觉是将 DTO 类添加到名为 的新包`dtos`中，但如果这样做，我会在运行应用程序时收到错误：`not found: type MyDTO`. 我尝试添加`@import dtos.MyDTO`模板，但仍然收到错误消息。如果我将 DTO 放入`model`包中，它工作得很好，但我不想这样做，因为我不希望它干扰 Ebean 表的生成和演变。

那么模板中默认会看到哪些包，如何使我的类从新包中对模板可见？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T04:00:16.587

将此添加到您的 Build.scala 中：

```
PlayProject(...) settings(
  ...
  templatesImport ++= Seq(
    "com.company.dto", "com.company.useful", ...
  )
) 
```

# python - 在 Python 中测试文件名是否具有正确的命名约定

> ID：13665468
> 
> 赞同：2
> 
> 时间：2012-12-02T01:13:26.107
> 
> 标签：python, nomenclature

如何测试文件名在 Python 中是否具有正确的命名约定？假设我希望文件名以字符串结尾`_v`，然后是某个数字，然后是`.txt`. 我该怎么做？我有一些示例代码表达了我的想法，但实际上不起作用：

```
fileName = 'name_v011.txt'
def naming_convention(fileName):
    convention="_v%d.txt"
    if fileName.endswith(convention) == True:
        print "good"
    return
naming_convention(fileName) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T01:18:43.930

您可以使用 Python 的[`re`模块](http://docs.python.org/2/library/re.html)使用正则表达式：

```
import re

if re.match(r'^.*_v\d+\.txt$', filename):
    pass  # valid
else:
    pass  # invalid 
```

让我们把正则表达式分开：

*   `^`匹配字符串的开头
*   `.*`匹配任何东西
*   `_v``_v`从字面上匹配
*   `\d+`匹配一位或多位数字
*   `\.txt``.txt`从字面上匹配
*   `$`匹配字符串的结尾

# tcp - RFID标签和RFID阅读器的通信可以用tcp通信来模拟吗？

> ID：13665477
> 
> 赞同：0
> 
> 时间：2012-12-02T01:14:26.400
> 
> 标签：tcp, rfid

RFID标签和RFID阅读器（EPC Gen2标准）的通信可以通过tcp通信来模拟吗？两种通信方式有什么区别

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T05:02:25.997

如果你想编写一个`tcp client`模拟*标签*和一个`tcp server`模拟*询问*器的代码，那么它可以完成。但您必须注意 RFID 标签和阅读器中的通信协议在 ISO 18000-6C 中声明

问候！

# linux - 替换所有在Linux ubuntu启动时显示的图像

> ID：13665478
> 
> 赞同：2
> 
> 时间：2012-12-02T01:14:49.113
> 
> 标签：linux, image, ubuntu, startup, splash-screen

我目前正在使用 ubuntu 在 Pandaboard 上开发 GUI。我只想在启动时在屏幕上显示给定的图像，以便用户只显示图像，然后显示我开发的程序。

为了做到这一点，我配置了自动登录，在启动时自动启动程序，但在程序准备好启动之前我不知道如何在屏幕上显示图像。

这可能吗 ？有谁知道这是怎么做到的吗 ？

问候

# javascript - 如何使用 DOM 和 Javascript 创建菜单？

> ID：13665480
> 
> 赞同：0
> 
> 时间：2012-12-02T01:15:33.247
> 
> 标签：javascript, dom

我正在制作一个 Web 应用程序，我必须制作一个在多个页面上重复的菜单。但是每次我在任何菜单中进行更改时，我都必须编辑所有页面。Javascript 可能会创建一个类似这样的菜单（这是一个事件）：

```
var divMenu = document.getElementById( "menu" );
//create element <ul> to add to div menu.
var ulMenu = document.createElement("ul");
ulMenu.value =
  "<ul id='nav'>"
  + "<li class='current'><a href='/sytematic_inventory/views/administrador/index.jsp'>Inicio</a></li>"
  + "<li><a href=''>Inventarios</a></li> "
  + "</ul>";

divMenu.appendChild( ulMenu ); 
```

这怎么可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T01:29:30.307

创建一个远程 .js 文件并执行以下操作：

```
(function(){

    // All items we'd like to add
    var navItems = [
        {href: 'http://google.com', text: 'Google'},
        {href: 'http://bing.com', text: 'Bing'},
        {href: 'http://stackoverflow.com', text: 'StackOverflow'}
    ];

    // A few variables for use later
    var navElem = document.createElement("nav"),
        navList = document.createElement("ul"), 
        navItem, navLink;

    navElem.appendChild(navList);

    // Cycle over each nav item
    for (var i = 0; i < navItems.length; i++) {
        // Create a fresh list item, and anchor
        navItem = document.createElement("li");
        navLink = document.createElement("a");

        // Set properties on anchor
        navLink.href = navItems[i].href;
        navLink.innerHTML = navItems[i].text;

        // Add anchor to list item, and list item to list
        navItem.appendChild(navLink);
        navList.appendChild(navItem);
    }

    // Set first list item as current
    navList.children[0].className = "current";

    // Add list to body (or anywhere else)
    window.onload = function () {
        document.body.appendChild(navElem);
    }

}()); 
```

演示：http: [//jsfiddle.net/sDbff/3/](http://jsfiddle.net/sDbff/3/)

然后，在您想要包含此内容的任何页面中，添加对它的引用：

```
<!DOCTYPE html>
<html>
    <head>
        <title>My Site</title>
        <script src="navigation.js"></script>
    </head>
    <body>
        <p>Navigation will be appended here.</p>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T01:27:07.713

您需要创建所有 DOM 项。

例如

```
var divMenu = document.getElementById( "menu" );
//create element <ul> to add to div menu.
var ulMenu = document.createElement('ul');
ulMenu.setAttribute('id', 'nav');
var liItem = document.createElement('li');
liItem.setAttribute('class', 'current');

ulMenu.appendChild(liItem);

var href = document.createElement('a');
href.setAttribute('href', '/sytematic_inventory/views/administrador/index.jsp');

liItem.appendChild(href);

href.appendChild(document.createTextNode('Inicio'));
// Ditto for the other liItem
document.getElementById('menu').appendChild(ulMenu); 
```

然后把它放到一个外部文件中。IE

```
<script type="text/javascript" src="menu.js"></script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T01:22:34.333

将您的 javascript 放在一个外部文件中，然后在您的 html 页面中，您可以链接到该文件：

```
<head>    
<script src="mymenu.js" type="text/javascript"></script>
</head> 
```

# ios - 实现负责向用户询问各种问题的 UIViewController 的最佳方法是什么？

> ID：13665481
> 
> 赞同：1
> 
> 时间：2012-12-02T01:15:41.843
> 
> 标签：ios, uisplitviewcontroller

如果这个问题没有被投票结束，我将非常感激。我意识到这有点主观，但是，从本质上讲，它是非常客观的。我正在努力实现一件具体的事情，而了解它可以完成的方式正是我所需要的。

我正在设计一个 iOS（仅限 iPad）应用程序，它将向用户提出一堆问题。

现在，我有一个拆分视图控制器，Master 显示了一个主题列表。我想选择一个主题以使 DetailViewController 开始提问。

有些问题会是选择题，有些问题会填空等等，所以我为每种类型的问题都有一个自定义的 UIViewControllers（其 UI 是用 .xib 文件定义的）。

我是 iOS 新手，但似乎最好的实现会导致我的 DetailViewController 循环通过一堆其他自定义 UIViewController，这取决于它想问的问题。理想情况下，我希望能够让用户在他们选择的问题之间导航，最好是使用滑动手势。请注意，这些问题要到运行时才知道，所以我需要能够以编程方式循环浏览这些问题（因为不是故事板的一部分，如果这在 iOS-talk 中作为一个句子有意义的话）。

这应该放在什么类型的容器中？容器将如何处理问题之间的转换？我如何识别滑动手势以便在问题之间切换？ETC。？

有人对我如何实现这一目标有一些见解/指导吗？现在，我可以概念化各种方法，但没有输入和知道他们在做什么的人，我只是在原地运行。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T01:18:48.693

您对 UIPageViewController 的描述非常好！看看它，看看你的想法。您可以手动“下一步”，也可以让用户滑动“下一步”。最重要的是，您可以在用户要求“下一步”的那一刻，实时动态地提供“下一个”视图控制器，而您提供的可以是任何视图控制器，因此您可以您的选择取决于具体情况。

# mysql - 使用 MySql2 将 Heroku 连接到 RDS

> ID：13665482
> 
> 赞同：1
> 
> 时间：2012-12-02T01:15:46.080
> 
> 标签：mysql, ruby-on-rails, heroku, amazon-rds

我要做的就是在 Heroku 上部署我的 Rails 应用程序，并在 RDS 上使用一个数据库实例，这看起来应该很简单。

我正在使用 mysql2 适配器`database.yml`并已推送到 heroku 并根据[此答案](https://stackoverflow.com/questions/5362288/heroku-help-deploying-rails-app-that-uses-mysql-database)添加了我的数据库实例。我基本上已经跟随它到了T，我没有收到`missing gem`错误。但这就是`heroku logs`揭示的内容：

```
/app/vendor/bundle/ruby/1.9.1/bundler/gems/mysql2-e5992664a7bc/lib/mysql2/client.rb:56:in connect': Can't connect to MySQL server on 'nickcoxrails.cud3e2tma07q.us-east-1.rds.amazonaws.com' (110) (Mysql2::Error) 
```

另请注意，我的 RDS 实例位于 us-east，我听说这是一个问题[here](https://stackoverflow.com/questions/3969272/trouble-connecting-heroku-app-with-amazon-rds-instance)。

在我的 gemfile 中，我有：

`gem 'mysql2', :git => 'git://github.com/brianmario/mysql2.git'`

对于我的 mysql2 gem，因为这是我可以让它在本地工作的唯一方法（因为第一个答案使用 < 0.3 的版本在我的本地 Rails 服务器上给了我一个错误，因为我在 Rails 3.2.6 上），尝试了事情的数量（我真的很难让 mysql 在我的本地机器上运行）。

我肯定已经根据这个答案添加了安全组，并根据[这个](https://stackoverflow.com/questions/10441123/error-when-changing-to-mysql2-on-heroku)[答案](https://stackoverflow.com/questions/9239168/connecting-to-rds-service-of-amazon)添加了 mysql2 数据库。我还在我的 heroku 帐户中添加了 RDS 插件。我跑了一遍又一遍，但是由于我将本地数据库导出到了我的 RDS 实例（我需要保持该数据完好无损），所以这些都没有任何新功能。而且我可以通过 Sequel Pro 连接到我的 RDS 实例，所以我知道这不是凭据问题。`rake db:create``rake db:schema:load``rake db:migrate`

这是我的第一个 Rails 应用程序部署，所以不要害怕降低你的答案，给我相当于“它是否已插入？” heroku/Rails/RDS/等的技术支持问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-18T16:07:53.497

Heroku 更改了其程序以允许 Heroku 服务器连接到 RDS 实例。这个问题的公认答案不再是应该如何做。

> 您必须授予 Heroku dynos 对您的 RDS 实例的访问权限。推荐的方法是将 RDS 实例配置为仅接受 SSL 加密的连接，并将您的实例的安全组配置为允许来自所有 IP 的入口。
> 
> 此前，Heroku 发布了其 AWS 账户 ID 和安全组名称，作为授予对 AWS RDS 实例的访问权限的一种方式。**这不再推荐。**

参考：[https ://devcenter.heroku.com/articles/amazon_rds](https://devcenter.heroku.com/articles/amazon_rds)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T00:36:50.580

确保您已从`default`Heroku 拥有的 AWS 账户 098166147350 授权安全组。错误消息表明您的连接不被允许。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-20T02:25:14.793

我刚刚用 Heroku+AWS（MySQL 实例）取得了胜利。我不得不向 Heroku 提交支持票以解决此问题（操作员错误），我想发布此信息以帮助其他人。我一直碰到这个线程。

我在带有 Amazon MySQL RDS 的 Heroku 上使用 Rails(4)。是的，您需要配置 SSL（pem 文件和所有有趣的东西）。但是我无法让 Rails 连接起来，并且非常接近地跟踪所有的遍历。亚马逊数据库正在工作，我可以在 Heroku/Rails 之外连接没有问题（通过我的 IP）。

问题出在安全组和 IP 访问中。通过我的支持票“[您的] RDS mysql DB ...您需要允许来自所有 IP 的入口”。这是 Heroku 提供的链接：[https](https://devcenter.heroku.com/articles/amazon_rds#require-ssl) : //devcenter.heroku.com/articles/amazon_rds#require-ssl Heroku 当前声明：

“您必须授予 Heroku dynos 对您的 RDS 实例的访问权限。推荐的方法是将 RDS 实例配置为仅接受来自授权用户的 SSL 加密连接，并为您的实例配置安全组以允许来自所有 IP 的入口。 "

一些搜索很快让我修改了我的 AWS 数据库实例的默认安全组并添加了一个 CIDR/IP 条目：

```
0.0.0.0/0 
```

基本上允许任何/所有 IP。一旦获得授权，所有连接。

我仍在审查此设置并寻求朋友和社区的反馈。幸运的是，我仍在开发中，有一些时间来消化这个设置。

希望这可以节省一些时间，这似乎是通过 Heroku Dynos 连接到 AWS DB 的当前方法。

祝你好运，我会留意任何反馈。

编辑：在设置上睡觉后，我从默认值中删除了 0.0.0.0/0 并将其添加到一个隔离的安全组并测试 - 工作。我担心默认安全组与*.* 非 SSL 数据库上的样式 IP 访问。那感觉不对。

# c# - 如何获得当前关注的文本框？

> ID：13665489
> 
> 赞同：1
> 
> 时间：2012-12-02T01:16:50.130
> 
> 标签：c#, winforms, textbox

如何获取`TextBox`当前关注的 ID？如果没有焦点，它应该返回一个空值。

注意：它应该只检查文本框。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T01:25:52.937

```
TextBox focusedTxt = Controls.OfType<TextBox>().FirstOrDefault(x => x.Focused); 
```

# windows-8 - 发现应用程序已更新

> ID：13665490
> 
> 赞同：2
> 
> 时间：2012-12-02T01:17:14.030
> 
> 标签：windows-8, microsoft-metro

如何确定我的应用程序（已在系统上运行）自上次运行以来是否已更新（如果用户使用 Windows 应用商店对其进行了更新）？

实际上，当用户使用 Windows 应用商店安装应用程序的新版本时，我正在尝试更新（重新加载、重新获取......）我的应用程序的数据。

我的想法是将应用程序的版本保留在本地应用程序数据中，并且每次应用程序启动时，检查它是否等于当前版本。如果没有，这意味着更新。但我不知道如何访问在当前系统上运行的应用程序的当前版本！

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T01:42:20.160

如果您指的是您在 package.appxmanifest 中设置的版本，那么：

```
Windows.ApplicationModel.Package.Current.Id.Version 
```

请参阅[PackageId.Version](http://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.packageid.version.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T16:23:13.367

完美的解决方案是使用维护类型的后台任务，当应用程序更新时触发此任务。
[http://www.microsoft.com/en-us/download/details.aspx?id=27411](http://www.microsoft.com/en-us/download/details.aspx?id=27411)
或者您可以手动执行，只需将应用程序版本的当前值存储在应用程序设置中，如果应用程序安装后版本不同开始，只需运行您的维护代码。

# sql-server-ce - Sql CE与多条语句不一致

> ID：13665491
> 
> 赞同：3
> 
> 时间：2012-12-02T01:17:31.033
> 
> 标签：sql-server-ce, dapper

长期以来，您可以[使用 SQL CE 执行多条语句](https://stackoverflow.com/questions/6970502/can-i-execute-multiple-statements-in-sql-server-compact-4)。事实上，我正在使用[SQL Server Compact Toolbox](http://sqlcetoolbox.codeplex.com/)来做到这一点。但是当我采用相同的多语句命令并从 Dapper 执行它们时......

```
public const string SampleDml = @"
   INSERT INTO [Plugin](Name, TypeName) VALUES ('Blog','Shroom.Blog');
   GO
   INSERT INTO [ContentDef](PluginID, Name, Placement, IsStatic) VALUES(@@IDENTITY,'MyBlog','Layout:Left',1);
   GO
"; 
```

然后我不断收到此错误：

> > 解析查询时出错。[令牌行号=3，令牌行偏移量=1，错误令牌= GO]

我使用的 SQL CE 库版本是 4.0.0.0 版（运行时版本 v2.0.50727）。我正在使用 Dapper 1.12.0.0（运行时版本 v4.0.30319）和 Dapper Extensions 1.3.2.0（运行时 v4.0.30319）。

SQL CE 库似乎是错误的运行时，但网络平台安装程序说我有最新的（所以那真的是最新的吗？）。想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-02T13:01:49.900

实际上，您只能使用 SQL Server Compact 每批执行一条语句，我所做的一切（我是 SQL Server Compact 工具箱的作者）就是按 GO 和换行符拆分字符串。

我有这样的代码：

```
 using (StringReader reader = new StringReader(script))
        {
            string line;
            while ((line = reader.ReadLine()) != null)
            {
                line = line.Trim();
                if (line.Equals("GO", StringComparison.OrdinalIgnoreCase))
                {
                    RunCommand(sb.ToString(), dataset);
                    sb.Remove(0, sb.Length);
                }
                else
                {
                    sb.Append(line);
                    sb.Append(Environment.NewLine);
                }
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-26T16:17:17.713

我创建了一个[小型库](https://github.com/lokiworld/Lyare.SqlServerCe.MultiQuery)来解决这个问题。它将单个命令拆分为多个子命令（使用分号 (;) 作为语句分隔符）并逐个执行它们。

# c# - 检查 SetParent 功能是否有效？

> ID：13665494
> 
> 赞同：2
> 
> 时间：2012-12-02T01:17:49.493
> 
> 标签：c#, .net, forms

我在表单中有一个表单和一个面板，这是我处理 setparent 的代码，它工作正常。

```
hWnd = FindWindow("MapleStoryClass", null);
Panel_Handle();
SetParent(hWnd, PanelHandle);
SetWindowPos(hWnd, (IntPtr)SpecialWindowHandles.HWND_TOP,
    -3, -25, 800, 600, SetWindowPosFlags.SWP_NOSIZE); 
```

我唯一的问题是如何确定 setparent 是否通过代码工作？我知道我可以直观地检查 setparent 是否正常工作，但我需要在我的代码中输入检查以查看 setparent 是否工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T01:34:24.187

您可以尝试使用[GetParent](http://msdn.microsoft.com/en-us/library/ms633510%28v=VS.71%29.aspx) WinApi 函数。

从上面的链接：

> 如果窗口是子窗口，则返回值是父窗口的句柄。如果窗口是具有 WS_POPUP 样式的顶级窗口，则返回值是所有者窗口的句柄。
> 
> 如果函数失败，则返回值为 NULL。要获取扩展错误信息，请调用 GetLastError。此功能通常由于以下原因之一失败：
> 
> • 该窗口是无主的或不具有 WS_POPUP 样式的顶级窗口。
> •所有者窗口有WS_POPUP 样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T01:36:48.990

因为这是 C# 我只想说你可以检查 Panel.Parent 是否为空

Panel.Parent 是对 Panel 父级的引用

# haskell - 在 GHC 中编译

> ID：13665495
> 
> 赞同：3
> 
> 时间：2012-12-02T01:17:56.450
> 
> 标签：haskell, compilation, ghc

我正在学习 Haskell，我有一个简单的疑问，这两个使用 GHC 编译的命令有什么区别（fac 是一个计算阶乘的程序）：

> ghc -o fac fac.hs

和

> ghc fac.hs

现在要运行程序，我只需执行 fac.exe（我使用的是 Windows）。

鉴于两者都有效，哪一个是正确的？两个都？哪一个是最可取的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T01:20:22.423

两者都可以。-o 命令唯一要做的就是确定生成的可执行文件的名称。就 Haskell 而言，它没有任何区别。

就个人而言，我喜欢总是使用“-o”来使事情变得明确（因为我通常喜欢避免隐式默认值）并使它看起来更类似于其他编译器（例如，gcc C 编译器强制你使用它的“ -o" 选项，因为它使用的默认名称非常难看）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T09:13:53.203

以前是这样写的

```
ghc fac.hs 
```

并没有真正起作用。相反，你不得不说

```
ghc --make fac.hs 
```

不同之处在于前者编译`fac.hs`并且不做任何其他事情，而后者检查是否`fac.hs`使用了任何其他需要重新编译的模块，自动包含所需的任何包，等等。

但是，默认行为已更改，以上两个命令现在相同。（我忘记了这是什么时候发生的，但那是不久前的事了。）`--make`尽管如此，您仍然可以看到带有显式开关的文档和示例，我个人喜欢包含它。但这只是我。

开关提供给您的唯一`-o`功能是更改输出名称。如果您有，例如，`Main.hs`并且您希望调用输出`MyCoolProgram`或其他任何内容，这可能会很有用。*我*要说的一件事：在 Linux 下，`fac.hs`（如果是`Main`模块）将编译为名为 的可执行文件`fac`，但在 Windows 下，它将被称为`fac.exe`. 如果您使用`-o`硬编码二进制名称，则不会发生这种情况。而且我不确定您是否可以运行不结束的 Windows 二进制文件`.exe`...

# f# - F# 中 Observable.GroupBy 的示例用法

> ID：13665497
> 
> 赞同：0
> 
> 时间：2012-12-02T01:18:41.923
> 
> 标签：f#, system.reactive

我正在尝试确定如何在 Reactive Extensions 中使用 group by 功能。是否有人有一个简单的例子来说明它在 F# 中的使用？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T08:10:18.710

`Func<T, T1...>`您最有可能面临的问题是，当与 等相关时，F# 的类型推断很难用于 lambda `Action<T>`，尤其是在具有多个重载的方法中。

如果您使用的是为惯用的 C#/VB 设计的 Rx API，大多数情况下您最终将不得不注释类型以将编译器指向正确的方向。

GroupBy 以最简单的形式接受一个键选择器并产生一个可观察的组。每个组都有一个键，它本身就是一个 Observable，它是该键下的值流。

在此示例中，我们形成了两个组：偶数或奇数，因此您得到两个`IGroupedObservable<string, int>`并`SelectMany`用于重新组合组。

使用常规的 Rx 方法：

```
let log message s = printfn "%s: %A" message s       

let disposable = 
    Observable.Interval(TimeSpan.FromSeconds(0.5))
              .Select(int)              
              .Do(log "Produced")
              .GroupBy(fun n -> if n % 2 = 0 then "Even" else "Odd")
              .SelectMany(fun (group : IGroupedObservable<string, int>) -> group.Select(fun i -> group.Key, i))          
              .Do(log "Kind")
              .Subscribe() 
```

这是非常可怕的......

为了使它更惯用，你需要像这样扩充 Observable 模块：

```
type Observable with
    static member log message o = Observable.Do(o, log message)
    static member groupBy selector o = Observable.GroupBy(o, (fun v -> selector(v)))
    static member collect (selector : 'a -> IObservable<'b>) o = Observable.SelectMany(o, selector) 
```

现在您可以将上面相同的代码表示为：

```
let disposable = 
    Observable.Interval(TimeSpan.FromSeconds(0.5))
    |> Observable.map int
    |> Observable.log "Produced"
    |> Observable.groupBy (fun n -> if n % 2 = 0 then "Even" else "Odd")
    |> Observable.collect(fun group -> group |> Observable.map(fun i -> group.Key, i))                  
    |> Observable.log "Kind"
    |> Observable.subscribe(fun _ -> ()) 
```

...更具可读性，不需要注释。

输出：

```
Produced: 0
Kind: ("Even", 0)
Produced: 1
Kind: ("Odd", 1)
Produced: 2
Kind: ("Even", 2)
Produced: 3
Kind: ("Odd", 3) 
```

# c# - 未创建文件夹

> ID：13665500
> 
> 赞同：0
> 
> 时间：2012-12-02T01:18:59.740
> 
> 标签：c#, asp.net

您好我正在尝试使用 C#/asp.net webforms 创建一个新目录，但我似乎没有任何运气。这是我的代码：

```
 string path = "~/Images/avatar/" + User.Identity.Name + "/userAvatars/";
     private void createPath(string path)
     {
           string activeDir = @"~/Images/avatar/userAvatars";
           if( !Directory.Exists(Server.MapPath(path)) )
           {
               string newPath = Path.Combine(activeDir, User.Identity.Name);
               Directory.CreateDirectory(newPath);
            }
      }
     createPath(path) 
```

现在这段代码不会抛出任何错误，但它也不会创建文件夹，除非我提供从驱动器号开始的物理目录。示例：

```
D:\Projects IDE\Visual Studio\MyWork\Websites\Forum 
```

这行不通，因为在某些时候我想将应用程序上传到服务器。

那么如何设置文件路径以获取根，如果项目并使此代码工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T01:22:34.923

试试这个

```
string newPath = HostingEnvironment.MapPath(Path.Combine(activeDir, User.Identity.Name)
Directory.CreateDirectory(newPath); 
```

使用 Path.Combine 后，您忘记映射 newPath。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T01:27:10.153

你应该做

```
Directory.CreateDirectory(Server.MapPath(newPath)); 
```

# html - 溢出：隐藏除了隐藏滚动之外还有什么作用？

> ID：13665503
> 
> 赞同：1
> 
> 时间：2012-12-02T01:19:35.237
> 
> 标签：html, css

溢出：隐藏除了隐藏滚动之外还有什么作用？我只是偶然添加了一个问题`overflow:hidden`。我认为它只是使滚动不可见。它还有什么作用？我找不到任何好的解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T01:32:55.667

`overflow`未设置为`visible` [创建新块格式化上下文](http://www.w3.org/TR/CSS2/visuren.html#block-formatting)的属性：

> 浮动、绝对定位的元素、不是块框的块容器（例如内联块、表格单元格和表格标题），以及具有“溢出”而不是“可见”的块框（除非该值已被传播到视口）为其内容建立新的块格式化上下文。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T01:36:11.097

用外行的话来说，它隐藏了被剪裁的部分（超出设置了可见性的 div 的矩形的部分），因此超出父矩形边界的 div 的内容不可见（也不能滚动到）。

相反`visible`，即使它们比父级更宽/更高也会渲染这些部分，`auto`并将隐藏它们但允许通过滚动条访问它们。

因此，如果您有一个 100px x 100px 的父 div，并且您开始将内容放入该 div 中，那么当内容超出 100px 边界时，这些部分将不再可见。即使可见性设置为隐藏，也可以使用 javascript 强制滚动到它们，具体取决于浏览器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T01:21:42.043

> overflow CSS 属性指定是否剪切内容、渲染滚动条或显示块级元素的溢出内容。

[文档](https://developer.mozilla.org/en-US/docs/CSS/overflow)

# ruby-on-rails - heroku 运行 rake 资产：预编译中止，因为文件具有无效的 UTF-8 字节序列

> ID：13665505
> 
> 赞同：0
> 
> 时间：2012-12-02T01:20:14.500
> 
> 标签：ruby-on-rails, heroku, precompile

这是我运行 git push heroku master 时得到的确切消息

```
** Execute assets:precompile:primary
rake aborted!
/app/app/assets/images/images/index_solid.js has a invalid UTF-8 byte sequence
/app/vendor/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/utils.rb:19:in `block (2 levels) in read_unicode'
/app/vendor/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/utils.rb:13:in `tap' 
```

我不小心在 images 文件夹中放置了一个包含无效 utf-8 字节的 js 文件。但是在我删除文件并删除 tmp/cache/assets 中的所有文件后，我仍然收到相同的错误消息。我都试过了

```
git push heroku master  
heroku run rake assets:precompile --trace 
```

但仍然收到类似的消息。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T14:52:04.590

您可能仍需要从 Git 存储库中删除 .js 文件（这与将其作为文件删除不同）。

尝试从控制台运行这些命令集：

```
# Add files that might have been previously untracked
$ git add .

# Show the status
$ git status

# Remove deleted files from the git repository
# ... (if any deleted files show up in the 'unstaged changes' section)
$ for i in `git status | grep deleted | awk '{print $3}'`; do git rm $i; done

# Commit the changes
$ git commit -am "Deleted files" 
```

这将帮助您从 git 存储库中删除已删除的文件。

在推送到 Heroku 之前，还要确保您确实将这些更改提交到您的`master`分支或将您所做的分支合并到您的`master`分支中。

# javascript - 在 AJAX 请求/响应中压缩/缩小 JSON

> ID：13665508
> 
> 赞同：1
> 
> 时间：2012-12-02T01:21:44.973
> 
> 标签：javascript, ajax, asp.net-mvc, compression, minify

我正在查看 Facebook 上的一些代码，特别是 AJAX 请求/响应的标头，并注意到它们似乎被压缩/缩小，就像使用 CSS 或 JavaScript 一样。

这会转

```
{ id: 1000, username: "testing" } 
```

变成这样：

```
{a:1000,b:"testing"} 
```

这对 ASP.NET MVC 有任何可能吗？我想探索这个想法，想知道是否有一些特殊的模型绑定技术可以使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-14T07:37:09.813

我认为**自定义绑定**是要走的路。
[这](http://www.codeproject.com/Articles/605595/ASP-NET-MVC-Custom-Model-Binder)是一个很好的简短解释。

--- 更多细节 ---
您可以拦截发送的绑定`json`数据`QueryString`并将接收到的 json 转换为所需的模型。

# c++ - 如何在 C++ 中为 USB 投影仪使用 DLL 接口

> ID：13665509
> 
> 赞同：0
> 
> 时间：2012-12-02T01:21:52.427
> 
> 标签：c++, dll

我有一个名为 DLP Discovery 4000 的硬件。它用于投影图像。它可以由用户编程。在硬件的编程指南中，它有一个可以在 DLL API 接口中访问的函数列表。该指南说这些函数可以通过 C++/C/Java 调用。

我希望能够在 C++ 程序中使用这些函数来控制电路板。但到目前为止，我一直在努力解决如何使用 DLL API。

它带有我安装的软件。该软件有一个功能有限的 GUI。此外，该软件在 windows 目录中放置了一个名为 D4000_usb.dll 的文件。如何使用这个 .dll 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T02:05:45.150

I found this example of someone calling the same dll on the [MSDN](http://social.msdn.microsoft.com/Forums/en-AU/vcgeneral/thread/9b7fb739-9d40-4ede-b2a9-3aed5ae46d03)

**I've annotated it with some helper comments prefixed `// ***` to give you some guidance**

```
#include <windows.h> 
#include <stdio.h> 
#include <iostream>

typedef int (__cdecl *MYPROC)(LPWSTR); 

int main( void ) 
{ 

    HINSTANCE hinstLib; 
    MYPROC ProcAdd; 
    BOOL fFreeResult, fRunTimeLinkSuccess = FALSE; 

    // *** This loads the API DLL into you program

    // Get a handle to the DLL module.
    hinstLib = LoadLibrary(TEXT("D4000_usb.dll")); 

    // *** Now we check if it loaded ok - ie we should have a handle to it

    // If the handle is valid, try to get the function address.
    if (hinstLib != NULL) 
    { 

        // *** Now we try and get a handle to the function GetNumDev

        ProcAdd = (MYPROC) GetProcAddress(hinstLib, "GetNumDev"); 

       // *** Now we check if it that worked

        // If the function address is valid, call the function.
        if (NULL != ProcAdd) 
        {
            fRunTimeLinkSuccess = TRUE;

            // *** Now we call the function with a string parameter

            (ProcAdd) (L"Message sent to the DLL function\n"); 

            // *** this is where you need to check if the function call worked
            // *** and this where you need to read the manual to see what it returns

        }

       // *** Now we unload the API dll

        // Free the DLL module.
        fFreeResult = FreeLibrary(hinstLib); 
    } 

    // *** Here is a message to check if the the previous bit worked

    // If unable to call the DLL function, use an alternative.
    if (! fRunTimeLinkSuccess) 
        printf("Message printed from executable\n"); 

return 0;
} 
```

# function - 如何将 jQuery.Deferred 与普通函数一起使用？

> ID：13665516
> 
> 赞同：1
> 
> 时间：2012-12-02T01:22:54.353
> 
> 标签：function, arguments, promise, sample, jquery-deferred

[Deferred 对象](http://api.jquery.com/category/deferred-object/)文档说它可以采用可选的函数参数，但没有示例。我该如何使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T00:07:30.363

它是一种语法糖，通过它您可以在相同的延迟对象上添加解析或拒绝的回调/处理程序。

所以，下面的两个代码片段会做同样的事情。

```
// with constructor method argument
var x = $.Deferred(function(selfDfd){ 
           selfDfd.done( console.log.bind(console,'I am resolved,in constructor')); 
        });
x.resolve();

// without constructor method argument

var y = $.Deferred();
y.done(console.log.bind(console,'I am resolved, NO constructor args'))
y.resolve(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T01:22:54.353

使用以下语法：

```
 function foo(){ console.log("Yes!!!")}
      function bar(){ console.log("Are we there yet?")}
      function baz(){ console.log("I can't hold it much longer!?")}

      with($.Deferred() )
        {
        done(foo);
        bar();
        baz();
        resolve(foo);
        }
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.0/jquery.min.js"></script>
```

生成器将具有相同的效果：

```
 var foobarbaz = function(i){var count = count || i; return function(){console.log("Yes!!!"); return ++count;}}
      var bar = function(){ console.log("Are we there yet?")}
      var baz = function(){ console.log("I can't hold it much longer!?")}

      var done = foobarbaz(0);
      bar();
      baz();
      done();
```

**参考**

*   [JavaScript 常见问题解答：注释 - 闭包](http://jibbering.com/faq/notes/closures/)

*   [函数式 JavaScript：为伟大的利益捕获变量](https://www.safaribooksonline.com/library/view/functional-javascript/9781449360757/ch04.html#id923116)

*   [MDN：迭代器和生成器](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Iterators_and_Generators)

*   [JavaScript 中的异步编程和延续传递风格](http://www.2ality.com/2012/06/continuation-passing-style.html)

# wpf - ListView 不显示 ListViewItems

> ID：13665523
> 
> 赞同：2
> 
> 时间：2012-12-02T01:24:30.610
> 
> 标签：wpf, listview

希望这是一个简单的问题！我有一个包含一些项目的列表视图（这些项目根本没有改变，所以我不是动态地将它们添加到 XAML 中）。

这是代码：

```
 <ListView x:Name="SelectImageBox" ScrollViewer.HorizontalScrollBarVisibility="Disabled" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Margin="72,53,60,20" Background="Transparent" Opacity="1">
        <ListView.ItemsPanel>
            <ItemsPanelTemplate>
                <WrapPanel IsItemsHost="True"/>
            </ItemsPanelTemplate>
        </ListView.ItemsPanel>
        <ListViewItem>
            <DynamicResource ResourceKey="Book"/>
        </ListViewItem>
        <ListViewItem>
            <DynamicResource ResourceKey="Book"/>
        </ListViewItem>
        <ListViewItem>
            <DynamicResource ResourceKey="Book"/>
        </ListViewItem>
        <ListViewItem>
            <DynamicResource ResourceKey="Book"/>
        </ListViewItem>
    </ListView> 
```

我的问题是在设计师中，它显示了 4 本书。但是，当我运行程序时，没有显示任何项目。如果有人可以解释我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T06:16:26.820

好的，我解决了这个问题。列表视图项目被添加，除了他们正在使用的图像被另一个控件使用，修复是更改资源中的声明以包含`x:Shared="False"`（这不会显示在智能感知中，而是合法代码。

# php - If 语句删除前导 http://www. 关闭网址

> ID：13665527
> 
> 赞同：1
> 
> 时间：2012-12-02T01:25:25.413
> 
> 标签：php, if-statement

我对 PHP 有点陌生，所以这可能听起来很愚蠢，但是您最好如何重写以下代码以删除领先的 http:// 和/或 www。如果他们在场，他们会离开一个网址吗？

```
function jt_cmb_validate_text_url( $new ) {
    if ( '' == $new ) { return; }

    if ( !preg_match('/http:\/\//', $new) ) {
        $new = 'http://' . $new;
    }

    return $new;
} 
```

如您所见，如果 URL 中不存在前导 http://，则代码会将其添加到 URL，但因为我试图同时删除 http:// 和 www。你会使用四个 if 语句（一个如果不存在，一个如果只有一个东西存在，另一个是当两者都存在时）？

任何帮助将非常感激。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T01:39:38.347

为确保您不会删除超出您需要的任何内容（例如，您不想删除的查询字符串中可能有一个完整的 URL），您应该使用正则表达式：

```
$new = preg_replace("(^(?:https?://)?(?:www\.)?)","",$old); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T01:48:24.960

[str_replace()](http://php.net/manual/en/function.str-replace.php) — 用替换字符串替换所有出现的搜索字符串

```
str_replace ("http://" , "", $url )
str_replace ("www." , "", $url ) 
```

一般语法

```
mixed str_replace ( mixed $search , mixed $replace , mixed $subject [, int &$count ] ) 
```

**count** - 如果通过，这将设置为执行的替换次数。

# google-sheets - 使用 MATCH 公式的结果作为单元格区域的参考？

> ID：13665528
> 
> 赞同：0
> 
> 时间：2012-12-02T01:25:49.203
> 
> 标签：google-sheets

我有一个电子表格，我需要从中获取与条件匹配的单元格的行号。为此，我使用如下公式

```
=MATCH( ( if(LM!A:A,eomonth(LM!A:A,1)+1,) ),LM!A:A,2,0) 
```

在这种情况下，输出是`29`

我现在想做的是将该输出合并到一个更大的函数中，并使用它`29`作为我的条件范围。例如在下面的公式中

```
=FILTER( LM!B29:B363 ; ROW(LM!B29:B363) =MAX( FILTER( ROW(LM!B29:B363) ; NOT(ISBLANK(LM!B29:B363)))))-VLOOKUP( ( if(LM!A:A,eomonth(LM!A:A,1)+1,) ),LM!A:G,2,TRUE) 
```

我想替换`B29`为`B`+`the value from the MATCH output`

我怎样才能将它纳入我的公式？

任何提示将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T04:02:38.847

简短的回答是使用[INDIRECT](https://support.google.com/drive/bin/static.py?hl=en&topic=25273&page=table.cs&tab=1240292)。例如，如果`some_expression`计算结果为 29，`INDIRECT("LM!B"&some_expression&":B363")`则将引用范围 LM!B29:B363。

话虽如此，我认为必须有一种更直接的方式来满足您的要求。你能用语言解释你想要达到的目标吗？

# java - “if”语句的问题

> ID：13665530
> 
> 赞同：3
> 
> 时间：2012-12-02T01:25:52.557
> 
> 标签：java, if-statement, boolean

我正在上 CS 课程，这段代码给我带来了问题。

```
 while (statScan.hasNext()){

        currentStat = statScan.next();
        if (currentStat =  h);
        {       
            hStat++;
        }
        System.out.println("" + currentStat); 
```

查看“如果”语句。Java 说“不能将字符串转换为布尔值”，据我了解，这`boolean`是一个真/假排序的事情，所以 Java 不理解的是如何评估和比较字符串。我如何强迫它这样做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T01:28:06.223

问题是你分配它而不是询问它是否相等（分配'='，等于'=='）
这是该行的解决方案：如果它是字符串也使用 .equals()

```
if (currentStat.equals(h)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T01:32:59.757

这里有几个问题：

```
if (currentStat =  h); 
```

首先，末尾有一个分号，这将导致 if 语句无法按您想要的方式运行。它基本上是有条件地执行一个空语句。以下代码块（您打算有条件）将始终运行。删除分号以避免这种情况。

此外，您只有`=`代替`==`. 这意味着您将 h 的值分配给 currentStat。这是一个经典的，经典的错字。正如@YogendraSingh 在另一个答案中提到的那样，您应该使用该`equals()`方法对Java 中的字符串进行比较。否则你只是比较看看这两个项目是否完全相同。一定要检测相同的字符串文本何时保存在您需要使用的两个不同对象中`equals()`。

所以将此行更改为：

```
if (h.equals(currentStat)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T01:29:32.010

Java 中的`=`运算符旨在用作赋值运算符，因此当您编写时，您的`x = y`意思*不是 x 等于 y*，而是*将 y 的值分配给 x*。

比较运算符是`==`运算符，但这将比较原始类型（int、char、float 等）或对不是您通常需要的行为的对象的引用。对于任何不是原始类型的东西，您应该考虑使用 is 继承的`Object`方法`boolean equals(Object o)`。要确切了解为什么会这样，请查看[此处](http://www.leepoint.net/notes-java/data/expressions/22compareobjects.html)或[此处](https://stackoverflow.com/questions/767372/java-string-equals-versus)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T01:26:58.250

假设`h`是一个字符串，使用`equals`字符串比较的方法为：

```
 if(currentStat.equals(h)) 
```

当前您正在使用**赋值运算符** `=`，它将字符串值分配给`h`to `currentStat`。

当您将运算符更改为比较运算符`==`时**，它将比较对象实例的相等性**而不是值，我认为您不想要/

# php - 如何在 curl php 请求中获取数组值作为返回值？

> ID：13665532
> 
> 赞同：4
> 
> 时间：2012-12-02T01:25:55.123
> 
> 标签：php, curl

我很难使用 curl PHP，因为我是 PHP 新手。问题是我没有从 curl 请求中获得任何返回值。我正在访问一个包含以下代码的远程文件：

## 测试.php：

```
$test->getCall();
public function getCall() {
  $var = array('fname'=>'jack','lname'=>'williams');
  return $var;
} 
```

我从中拨打电话的脚本。

## requestVal.php

```
try{
  $ch = curl_init();
  if (FALSE === $ch){
    throw new Exception('failed to initialize');
  }
  curl_setopt($ch, CURLOPT_URL,"http://www.xyz.com/app/src/test.php");
  curl_setopt($ch, CURLOPT_POST, TRUE);
  curl_setopt($ch, CURLOPT_POSTFIELDS, $msg);
  curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
  curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
  $p_result = curl_exec($ch);
  var_dump($p_result);
  print_r($p_result);
  if (FALSE === $p_result) {
    throw new Exception(curl_error(), curl_errno());
    curl_close($ch);
  } else{
    curl_close($ch);
    return $p_result;
  }
}catch(Exception $e) {
  trigger_error(sprintf('Curl failed with error #%d: %s',$e->getCode(), $e->getMessage()),E_USER_ERROR);
} 
```

我没有任何价值，`$p_result`也没有例外`curl_error()`。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-02T19:51:08.217

无论您`test.php`在`String`. 在你的情况下，你什么都不回应。您调用一个返回数组的函数，但您不打印数组，因此没有任何内容发送到输出。如果您想`requestVal.php`在 curl 请求后获得相同的数组，则需要以某种方式对其进行编码，我建议使用 JSON，因为它很容易开始。举个简单的例子，`$test->getCall();`你可以这样做：

```
echo json_encode($test->getCall()); 
```

并在`requestVal.php`：

```
$array = json_decode(trim($p_result), TRUE);
print_r($array); 
```

您可以在 中找到每个功能说明`php.net`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T14:49:43.273

如果您使用 curl，您应该会得到与在任何浏览器中运行 test.php 脚本完全相同的结果。所以，如果你的 test.php 是这样的：

```
echo "123"; 
```

在您的浏览器中，您会看到“123”，这也是您将进入您的`$p_result`变量。如果你的 test.php 是这样的：

```
function foo() {
    return "123";
}

foo(); 
```

你在浏览器中什么也看不到，你也什么也没有`$p_result`。

所以，试着改变你的 test.php 类似的东西：

```
public function getCall() {
    $var = array('fname'=>'jack','lname'=>'williams');
    return $var;
}

var_dump($test->getCall()); // of course you will show these values in better way (depends on your needs) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-22T06:24:48.400

就像 Ranty 说的，你可以在**test.php**代码中返回一个字符串

```
$test->getCall();
public function getCall() {
  $var = array('fname'=>'jack','lname'=>'williams');
  echo serialize($var);
} 
```

**因此，您可以通过反序列化来自远程服务器的数据，在requestVal.php**代码中捕获序列化数据

```
unserialize($content) 
```

# jquery - 单击 li 时显示/隐藏 div 或 p

> ID：13665533
> 
> 赞同：0
> 
> 时间：2012-12-02T01:26:20.947
> 
> 标签：jquery

我有一个有序列表，当单击每个项目时，它将切换显示/隐藏相应的 div 但是，我真的不确定如何以最有效的方式执行此操作。如果我给每个项目一个 id 或类，我知道该怎么做，但我确信如果它是一个大列表，有比编写代码行和代码行更好的方法。

基本上我所拥有的是：

```
<ol>
  <li id="no1">Money Savings</li>
  <p id="reasonText">
  Some text....
</p>
  <li>Stable Fares</li>
  <p id="reasonText2">
  Some text...</p>
<li>Reason 3</li>
<p id="reasonText3">Some text...</p> 
```

ETC....

查询：

```
 $("#no1").click(function(){
     $("#reasonText").slideToggle('slow') 
```

有没有更好的方法来遍历每个 li 并显示或隐藏后面的 div，而不是基本上重复我在 jquery 中的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T01:58:34.090

使用所有类而不是 id 将是这样做的更好方法：

```
<ol>
  <li class="reason">Money Savings <p class="reasonText">Some text....</p></li>
  <li class="reason">Stable Fares <p class="reasonText">Some text...</p></li>
  <li class="reason">Reason 3 <p class="reasonText">Some text...</p></li>
</ol> 
```

jQuery 将如下所示：

```
$('.reasonText').hide(); //hide all the reason text
$('.reason').on('click', function() {
  $(this).children('.reasonText').slideToggle('slow');
}); 
```

[http://jsfiddle.net/XtUFn/](http://jsfiddle.net/XtUFn/)

我将`<p>`标签移动到`<li>`标签中，因为`<li>`标签中只能出现`<ol>`标签。如果你想保留你的标记，除了将 id 更改为类。

```
<ol>
  <li class="reason">Money Savings</li>
  <p class="reasonText">Some text....</p>
  <li class="reason">Stable Fares</li>
  <p class="reasonText">Some text...</p>
  <li class="reason">Reason 3</li>
  <p class="reasonText">Some text...</p>
</ol>​ 
```

jQuery 将如下所示：

```
$('.reasonText').hide(); //hide all the reason text
$('.reason').on('click', function() {
  $(this).next('.reasonText').slideToggle('slow');
});​ 
```

[http://jsfiddle.net/XtUFn/1/](http://jsfiddle.net/XtUFn/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T02:03:47.383

[你可以在这里](http://webagile.blogspot.com/2012/12/simple-slider-with-jquery.html)找到一个例子：

```
<script>
$(document).ready(function() {
    $("li").click(function(){
     $(this).find("p").slideToggle('slow');
          });
    });
</script> 
```

# c++ - 从 std::istreambuf_iterator 和 std::ifstream 获取所需的二进制数据范围

> ID：13665534
> 
> 赞同：1
> 
> 时间：2012-12-02T01:26:33.383
> 
> 标签：c++

```
#include <iostream>
#include <fstream>
#include <iterator>
#include <vector>

int main()
{
    std::ifstream file("data.bin", std::ios::binary );

    if( file.fail() )
    {
        std::cout << "File does not exist or could not open file";

        return 0;
    }

    std::vector<short> buffer;

    std::copy( 
            std::istreambuf_iterator<char>( file ),
            std::istreambuf_iterator<char>(),
            std::back_inserter( buffer )
            );

   return 0;
} 
```

这只会给我 char 值的范围（-128、128）。

我认为 using`istreambuf_iterator<short>`会给我我想要的东西，但它会引发“无效转换”错误。

我该怎么做才能读取`short`范围内的二进制值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T01:32:39.770

该类`std::istreambuf_iterator<cT>`遍历从 a`std::basic_istream<cT, std::char_traits<cT>>`或实际上是它的 中提取的字符`std::basic_streambuf<cT, std::char_traits<cT>>`。也就是说，给定特定的流类型，对于`std::istreambuf_iterator<cT>`. 另请注意，IOStream 层并非旨在对二进制文件进行操作，尽管该`std::ios_base::binary`操作被传递到流缓冲区。

如果您想提取`short`s （或任何其他类型，而不是流的字符类型），您需要自己创建一个合适的迭代器，该迭代器将文件写入时选择的二进制格式考虑在内。这个迭代器可以构建`std::istreambuf_iterator<char>`或直接访问`std::streambuf`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T01:32:30.300

这是我推荐的 Spirit 方法：

```
#include <fstream>
#include <boost/spirit/include/qi.hpp>

namespace qi = boost::spirit::qi;

int main()
{
    std::ifstream file("data.bin", std::ios::binary);
    if(!file)
        std::cout << "File does not exist or could not open file";
    boost::spirit::istream_iterator f(file), l;

    std::vector<int16_t> buffer;
    bool ok = qi::parse(f, l, *qi::word, buffer);
} 
```

当然，还有`qi::dword`, `qi::qword`, big-endian/little-endian 变体等：

*   [http://www.boost.org/doc/libs/1_52_0/libs/spirit/doc/html/spirit/qi/reference/binary/binary_native.html](http://www.boost.org/doc/libs/1_52_0/libs/spirit/doc/html/spirit/qi/reference/binary/binary_native.html)
*   [http://www.boost.org/doc/libs/1_52_0/libs/spirit/doc/html/spirit/qi/reference/binary/binary_little.html](http://www.boost.org/doc/libs/1_52_0/libs/spirit/doc/html/spirit/qi/reference/binary/binary_little.html)
*   [http://www.boost.org/doc/libs/1_52_0/libs/spirit/doc/html/spirit/qi/reference/binary/binary_big.html](http://www.boost.org/doc/libs/1_52_0/libs/spirit/doc/html/spirit/qi/reference/binary/binary_big.html)

* * *

你可以看看 wchar_t

```
#include <iostream>
#include <fstream>
#include <iterator>
#include <vector>
int main()
{
    std::wifstream file("data.bin", std::ios::binary );
    if( file.fail() )
    {
        std::cout << "File does not exist or could not open file";
        return 0;
    }
    std::vector<wchar_t> buffer;
    std::copy( 
            std::istreambuf_iterator<wchar_t>( file ),
            std::istreambuf_iterator<wchar_t>(),
            std::back_inserter( buffer )
            );
} 
```

我不太确定 wchar_t 的实际大小是否是实现定义的。

# asp.net - 母版页中的 asp.net VB LoginStatus 产生两种形式，runat=server

> ID：13665542
> 
> 赞同：0
> 
> 时间：2012-12-02T01:27:09.653
> 
> 标签：asp.net

我正在使用 ASP.NET VB 并构建了一个简单的登录/注册应用程序。我试图将 loginStatus 控件添加到母版页，但这会导致错误

```
A page can have only one server-side Form tag. 
```

有什么解决方法吗？实际上，为什么 loginStatus 控件无论如何都需要在表单中？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T01:45:26.890

是的，由于您使用的是 Web 表单，因此您的页面中只需要一个`<form runat="server">`，但不知何故您有两个或零。将其恢复为一个，并确保所有 .NET 控件都在其中。显然，表单应该在母版页中定义。

# c# - 实体框架多对多插入

> ID：13665544
> 
> 赞同：0
> 
> 时间：2012-12-02T01:27:29.867
> 
> 标签：c#, entity-framework

我有三张桌子。命名为：Merchants、MerchantNumberX、Numbers（许多其他实体都使用数字——这只是一个示例）。

Merchants 表如下所示：

```
MerchantGuid, MerchantName 
```

数字表如下所示：

```
NumberGuid, PhoneNumber 
```

外部参照表如下所示：

```
MerchantGuid, NumberGuid 
```

我知道在实体框架中我可以这样做：

```
var newNumber = new Number { NumberGuid = Guid.NewGuid(), PhoneNumber = "55555555555" };
Merchants.Numbers.Add(newNumber); 
```

这会将关系插入到两个表实体之间的外部参照表中。但是，有没有其他方法可以在没有 Merchant 对象的情况下将这些表“关联”在一起？

例如：

```
 var newNumber = new Number { NumberGuid = Guid.NewGuid(), PhoneNumber = "4444444444" };
 newNumber.MerchantGuid = alreadyKnownMerchantGuid;  // This is not available, by the way, just an example of something we are looking for in a many-to-many relationship. 
```

但是，newNumber 给了我一个“商人”属性，它只是递归地重复自己。

我们正在重写大量代码，想知道是否有一种快速的方法可以建立这种关系，而无需调用数据库来获取 Merchant 对象，因为我们已经有了有效的 MerchantGuid。

有人帮这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T13:42:22.577

> 但是，有没有其他方法可以在没有 Merchant 对象的情况下将这些表“关联”在一起？

不。与 EF 的多对多关系是独立关联，这意味着您的模型中没有可用的外键属性。您需要使用这两个集合来操作关系。这是唯一的方法。

但是，看下一点...

> ...如果有一种快速的方法可以建立这种关系，而无需调用数据库来获取 Merchant 对象，因为我们已经有了有效的 MerchantGuid。

要创建关系，您不需要`Merchant`从数据库加载现有实体。您可以创建一个“存根”实体，并将键属性设置为有效`MerchantGuid`，然后将其附加到上下文。对于 EF，这是一个处于状态的实体，`Unchanged`其行为就像是从数据库中加载的一样：

```
var newNumber = new Number {
    NumberGuid = Guid.NewGuid(), PhoneNumber = "55555555555" };

var merchant = new Merchant {
    MerchantGuid = alreadyKnownMerchantGuid, Numbers = new HashSet<Number>() };
context.Merchants.Attach(merchant);

merchant.Numbers.Add(newNumber);

context.SaveChanges(); 
```

这里不涉及数据库查询。`SaveChanges`将在连接表中创建一条新`Number`记录和一条新关系记录。

# minimum - 最小边界矩形，当 3D 形状未知时......仅它适合 3D 矩阵？

> ID：13665545
> 
> 赞同：-1
> 
> 时间：2012-12-02T01:27:35.217
> 
> 标签：minimum, bounding

我已经搜索过这个算法，包括在 stackoverflow 上，但没有找到。与为已知 3D 图找到最小边界矩形不同，我试图为任意、实心、连续的 3D 图找到一个轴对齐的...唯一的限制是该图完全适合 3D 矩阵给定大小，例如 800X800X800。有人可以给我一个有效的算法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T01:34:36.940

3D 图形如何表示为一组边界多边形或其他？

我假设您可以在 3D 图形上获得一组顶点，无论它们是否在其外表面上。

我假设“最小边界矩形”是指具有最小体积的边界直线实体（如砖块）。

“轴对齐”我假设您的意思是砖的边缘与预先存在的 x、y 和 z 轴对齐。即你不能通过旋转它来使砖变小。

然后根据您的描述，听起来您只需要沿每个坐标轴的最小值和最大值。这将花费点数的线性时间。

除非我误解了这个问题。

编辑：好的，根据您的说明，您从 800^3 的布尔数组*a*开始，我能想到的最好的是：

```
// a lot depends on how you index array a
// this assumes it is one big block of bools
#define A(i,j,k) a[(i)*800*800 + (j)*800 + (k)]
// to get the minimum X value
for (ix = 0; ix < 800; ix++){
    // search over the entire plane at x == ix
    // this can probably be improved by stepping pointers
    for (iy = 0; iy < 800; iy++){
        for (iz = 0; iz < 800; iz++){
            // nobody likes goto, but it's probably the quickest way out
            // of the 3 nested loops
            if (A(ix, iy, iz)) goto L100;
        }
    }
}
L100:;
// here, ix is minimum x value

// do similar code for max x, min and max y, min and max z 
```

它可能会有所改善。最坏的情况，如果卷是空的，这将进行 3^800^3 次测试。最好的情况是，如果卷已满，它将进行 6*800^2 次测试。

# php - 导致应用程序无法工作的 javascript 和 php 错误

> ID：13665548
> 
> 赞同：0
> 
> 时间：2012-12-02T01:28:06.437
> 
> 标签：php, javascript, mysqli

我得到了两组我无法弄清楚的错误。一个是我的错误控制台中的 javascript 中出现错误，说明：

```
Syntax Error: missing ; before statement:
Notice: undefined variable courseDatas in ..... line 28 
```

我得到的另一个错误是 mysqli/php 错误，它指出：

```
Warning: array_push() expects parameter 1 to be array, ... on line 247 
```

如何消除这两个错误？

**Javascript：**

```
<script type="text/javascript">
    $(document).ready( function(){
        var coursedatas = <?php echo json_encode($courseDatas); ?>; //error here
        $('#coursesDrop').change(function()
        {
            var courseId = $(this).val(),
            coursedata;
            for (var i = 0, l = coursedatas.length; i < l; i++)
            {
                if (coursedatas[i].courseId = courseId) { coursedata = coursedatas[i]; }
            }
            var index = $('#newDuration option[value="' + courseData.Duration + '"]').index('#newDuration option');
            $('#newDuration')[0].selectedIndex = index;
        });
    });
</script> 
```

......

**PHP：**

```
$coursequery = "
    SELECT CourseId, CourseNo, CourseName, Duration
    FROM Course
    ORDER BY CourseNo
";

$courseqrystmt=$mysqli->prepare($coursequery);
// You only need to call bind_param once

$courseqrystmt->execute();   
$courseqrystmt->bind_result($dbCourseId,$dbCourseNo,$dbCourseName,$dbDuration);
$courseqrystmt->store_result();
$coursenum = $courseqrystmt->num_rows();     
$courseHTML = '';
$courseHTML = '<select name="courses" id="coursesDrop">'.PHP_EOL;
$courseHTML .= '<option value="">Please Select</option>'.PHP_EOL;           

while ( $courseqrystmt->fetch() ) {
    $courseHTML .= sprintf("<option value='%s'>%s - %s</option>", $dbCourseId,$dbCourseNo,$dbCourseName) . PHP_EOL;  
    $courseData = array();
    $courseData["CourseId"] = $dbCourseId;
    $courseData["CourseNo"] = $dbCourseNo;
    $courseData["CourseName"] = $dbCourseName;
    $courseData["Duration"] = $dbDuration;

    array_push($courseDatas, $courseData); //error here
}    
$courseHTML .= '</select>'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T01:48:26.537

该`$courseDatas`变量需要在您的 while 循环之外定义为一个数组。

已编辑 - 这是您的脚本需要的样子：

```
$coursequery = "SELECT CourseId, CourseNo, CourseName, Duration FROM Course
ORDER BY CourseNo";
$courseqrystmt=$mysqli->prepare($coursequery);
// You only need to call bind_param once
$courseqrystmt->execute();
$courseqrystmt->bind_result($dbCourseId,$dbCourseNo,$dbCourseName,$dbDuration);
$courseqrystmt->store_result();
$coursenum = $courseqrystmt->num_rows();
$courseHTML = '';
$courseHTML = '<select name="courses" id="coursesDrop">'.PHP_EOL;
$courseHTML .= '<option value="">Please Select</option>'.PHP_EOL;
$courseDatas = array();
while ( $courseqrystmt->fetch() ) {
    $courseHTML .= sprintf("<option value='%s'>%s - %s</option>",$dbCourseId,$dbCourseNo,$dbCourseName) . PHP_EOL;
    $courseData = array();
    $courseData["CourseId"] = $dbCourseId;
    $courseData["CourseNo"] = $dbCourseNo;
    $courseData["CourseName"] = $dbCourseName;
    $courseData["Duration"] = $dbDuration;
    array_push($courseDatas, $courseData); //error here
}
$courseHTML .= '</select>';

<script type="text/javascript">
    $(document).ready( function(){
        var coursedatas = '<?=json_encode($courseDatas);?>';
        //now we have established some data for the $courseDatas array!
        $('#coursesDrop').change(function()
        {
            var courseId = $(this).val(), coursedata;
            for (var i = 0, l = coursedatas.length; i < l; i++)
            {
                if (coursedatas[i].courseId = courseId) { coursedata = coursedatas[i]; }
            }
            var index = $('#newDuration option[value="' + courseData.Duration + '"]').index('#newDuration option');
            $('#newDuration')[0].selectedIndex = index;
        });
    });
</script> 
```

# r - 为 ggplot2 生成亮色和暗色对

> ID：13665551
> 
> 赞同：2
> 
> 时间：2012-12-02T01:28:26.797
> 
> 标签：r, colors, ggplot2

```
brewer.pal(n=8,name="Paired") 
```

最多可以创建八对颜色，但这些颜色中只有少数适​​合打印。有没有更灵活的功能可以生成暗色吊坠？深色的应该

*   在黑暗中看起来像相同的颜色
*   可打印性好
*   易于与明亮的区分

有没有可以解决这个问题的 colourbrewer 工具？

```
> dark("red")
[1] "FF5555" 
```

我想出了这个函数，但它只能处理单色，而不是矢量。如果它可以“矢量化”，这个函数将是一个很好的解决方案。

```
setbrightness <- function(rgbcolour, brightness) {
  ## usage: setbrightness(col2rgb("red", 0.2)
  thiscolour <- rgb2hsv(rgbcolour)
  return(hsv(h=thiscolour[1], s=thiscolour[2], v=brightness))
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-02T18:04:30.853

这是您可以使用的矢量化函数。想法是将RGB转换为HSV，其中V对应亮度，然后返回RGB：

```
library(grDevices)
# Every element of r, g, b must be in [0, 255]
# Every element of conv[[3]] must be in [0, 1], 1 is highest brightness
brightness <- function(r, g, b, factor) {
  conv <- as.list(as.data.frame(t(rgb2hsv(r, g, b))))
  conv[[3]] <- pmin(1, conv[[3]] * factor)
  do.call(hsv, conv)
}

# Reducing brightness by 20%
brightness(55, 100, 150, 0.8)
#[1] "#2C5078"

# Increasing by 20%
brightness(55, 100, 150, 1.2)
#[1] "#4278B4"

brightness(55, 100, 150, c(0.8, 1.2))
#[1] "#2C5078" "#4278B4"

x <- rep(LETTERS[1:2], 5)
qplot(x = x, geom = "bar", fill = x) + 
  scale_fill_manual(values = brightness(55, 100, 150, c(0.5, 1.5))) 
```

![在此处输入图像描述](../Images/4571b79eca09346160477427960954fb.png)

`?rgb2hsv`有关更多详细信息，请参阅`?hsv`和[wiki](http://en.wikipedia.org/wiki/HSL_and_HSV)。

**编辑：**根据您的编辑，您似乎更喜欢使用颜色名称和亮度的直接值。在这种情况下，矢量化函数看起来非常相似：

```
# Usage: brightness("red", c(0.1, 0.3, 0.5, 1))
brightness <- function(rgbcol, v) {
  conv <- as.list(as.data.frame(t(rgb2hsv(col2rgb(rgbcol)))))
  conv[[3]] <- v
  do.call(hsv, conv)
}

set.seed(19)
df <- data.frame(a = rlnorm(100), b = 1:10, c = rep(LETTERS[1:10], each = 10))
ggplot(df, aes(x = b, y = a, fill = c)) + geom_area() + theme_bw() +
  scale_fill_manual(values = brightness("red", seq(0.1, 0.7, length = 10))) 
```

![在此处输入图像描述](../Images/34307ed1c7d73aa2a3c5cde2dc262232.png)

# ios - facebook id 字符串长度

> ID：13665553
> 
> 赞同：5
> 
> 时间：2012-12-02T01:28:50.117
> 
> 标签：ios, facebook

我查看了 facebook graph api。[facebook api 用户对象](http://developers.facebook.com/docs/reference/api/user/)

我看不到id的**最大长度是多少。**这样我就可以将其存储在我的数据库中，以便在我的游戏中唯一标识用户，而无需他们注册或注册。

每个 facebook 用户的 id 也是唯一的吗？- 一定是。

id 是从 JSON 中提取的“https://graph.facebook.com/me?fields=id&access_token=fromiPhoneApp

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-02T01:39:02.083

64 位整数就足够了。或者，如果您更喜欢使用字符字段，则为 20 个字符。是的，每个用户的 ID 都是唯一的。

# paypal - Paypal IPN 历史记录为空白

> ID：13665556
> 
> 赞同：2
> 
> 时间：2012-12-02T01:29:07.120
> 
> 标签：paypal, paypal-ipn

我正在向 API 发送预先批准调用，这些调用成功，我被重定向回正确的页面，但是当我在我的测试业务帐户中查看 IPN 历史记录时，它是空白的，就好像根本没有交易发生。

我的 IPN 侦听器从这些成功的交易中一无所获，但当我使用 PayPal 提供的测试仪时工作得很好。

我已经在这里待了几天，我不确定我还能做些什么来调试它。建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T19:36:32.213

如果您在 PayPal 中的 IPN 历史没有显示任何内容，那么它就没有发布任何内容。

根据[自适应支付 IPN 文档](https://www.x.com/developers/paypal/documentation-tools/adaptive-payments/integration-guide/APIPN)，它发送的唯一 IPN 消息用于支付和争议。

如果您需要将 Preapproval 配置文件详细信息保存到数据库、发送电子邮件通知等，您可以在实际注册流程中执行此操作。然后，您可以使用 IPN 从那里管理与该配置文件关联的付款。

# azure - Azure 云服务无法连接

> ID：13665560
> 
> 赞同：2
> 
> 时间：2012-12-02T01:29:15.660
> 
> 标签：azure

我刚刚尝试将 Web 角色部署到 Azure - 使用角色的默认设置 - 没有改变任何东西。打包和部署一切顺利，实例正在运行，在管理控制台等中看起来一切都很好 - 没有错误。但是，当我尝试通过 http 访问实例时，我从 Google Chrome 收到“无法连接”：

哎呀！谷歌浏览器无法连接到 manywho.cloudapp.net

我错过了什么？我有一个静态页面：

[http://manywho.cloudapp.net/bootstrap.html](http://manywho.cloudapp.net/bootstrap.html)

我也有一个 ASPX 页面：

[http://manywho.cloudapp.net/Install.aspx](http://manywho.cloudapp.net/Install.aspx)

任何帮助表示赞赏。我不是网络人，所以我什至不确定从哪里开始解决这个问题。我的应用程序可能无法完全正常工作 - 但目前，我什至似乎都无法使用它 :)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T20:04:32.237

结果证明是几件事。根据 smarx，在我的 ServiceDefinition.csdef 文件中错误地指定了端口 8080：

```
<Endpoints>
  <InputEndpoint name="Endpoint1" protocol="http" port="8080" />
</Endpoints> 
```

我把 8080 改成了 80。另外，超级难找，我在 system.web 中指定了一个 httpModule：

```
<httpModules>
  <add name="SWTModule" type="ManyWho.Flow.Security.SWTModule" />
</httpModules> 
```

这基本上阻塞了交通。如果将其删除并添加到 system.webServer 部分，如下所示：

```
<modules runAllManagedModulesForAllRequests="true">
  <add name="SWTModule" type="ManyWho.Flow.Security.SWTModule"/>
</modules> 
```

这一切都有效。SWTModule 是特定于我们的应用程序来管理安全性的东西。

希望对其他人有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T03:07:00.427

联系 Windows Azure 支持[http://www.windowsazure.com/en-us/support/contact/](http://www.windowsazure.com/en-us/support/contact/)。他们能够调查网络问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T16:47:51.947

[http://manywho.cloudapp.net:8080](http://manywho.cloudapp.net:8080)连接（但给出 500 错误）。我的猜测是您出于某种原因将端点设置为端口 8080。

# vb.net - 用户名和密码不正确时显示消息框

> ID：13665567
> 
> 赞同：1
> 
> 时间：2012-12-02T01:30:20.070
> 
> 标签：vb.net, winforms, passwords

我的程序有一个登录表单，它工作正常，但是当我输入不在我的数据库中的用户名和密码时，用户名和密码的文本框只会清除文本，并且不会显示显示“用户名不正确/密码”

这是我的代码：

```
 Dim con As OleDbConnection = New OleDbConnection( _
               "Provider=Microsoft.Jet.OLEDB.4.0;Data Source= UserPass.mdb;")
    con.Open()
    Dim str As String
    str = "SELECT * FROM UserPass WHERE Username='" & txtUsername.Text & "' AND Password='" & txtPassword.Text & "'"
    Dim cmd As OleDbCommand = New OleDbCommand(str, con)
    cmd.Parameters.AddWithValue("user", txtUsername.Text)
    cmd.Parameters.AddWithValue("pass", txtPassword.Text)
    Dim sdr As OleDbDataReader = cmd.ExecuteReader()
    ' It will be case sensitive if you compare usernames here.   
    If sdr.HasRows Then
        If sdr.Read Then
            If txtPassword.Text <> sdr("Password").ToString Or txtUsername.Text <> sdr("Username").ToString Then
                MessageBox.Show(" Incorrect Username/Password. Login Denied ", " Error! ", MessageBoxButtons.OK, MessageBoxIcon.Error)
            Else
                MessageBox.Show(" You are now Logged In! ", " Welcome! ", MessageBoxButtons.OK, MessageBoxIcon.Asterisk)
                frmOne.Show()
                Me.Hide()
            End If
        End If
    End If 
```

当我输入不在我的数据库中的用户名和密码时，如何让我的程序显示一个消息框？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T01:34:05.900

Line sdr.HasRows 看起来不会触发。如果用户名和密码不匹配，则在您的选择语句中不会有行。

考虑将代码更改为：

```
If sdr.HasRows Then
    If sdr.Read Then
            MessageBox.Show(" You are now Logged In! ", " Welcome! ", MessageBoxButtons.OK, MessageBoxIcon.Asterisk)
            frmOne.Show()
            Me.Hide()
    End If
Else
    MessageBox.Show(" Incorrect Username/Password. Login Denied ", " Error! ", MessageBoxButtons.OK, MessageBoxIcon.Error)
End If 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T02:36:44.840

看看这是否适合您，它使用的是 DMudge 向您展示的方法，但添加了案例检查。如果可行，请接受他的回答。

```
If sdr.HasRows Then
    If sdr.Read Then
        If txtPassword.Text <> sdr("Password").ToString Or txtUsername.Text <> sdr("Username").ToString Then
            MessageBox.Show(" Incorrect Username/Password. Login Denied ", " Error! ", MessageBoxButtons.OK, MessageBoxIcon.Error)
        Else
            MessageBox.Show(" You are now Logged In! ", " Welcome! ", MessageBoxButtons.OK, MessageBoxIcon.Asterisk)
            frmOne.Show()
            Me.Hide()
        End If
    End If
Else
    MessageBox.Show(" Incorrect Username/Password. Login Denied ", " Error! ", MessageBoxButtons.OK, MessageBoxIcon.Error)
End If 
```

# ruby - 在 Ruby 中解析时计数

> ID：13665573
> 
> 赞同：-1
> 
> 时间：2012-12-02T01:31:02.510
> 
> 标签：ruby, parsing, count

我正在解析日志文件并在 ruby​​ 中逐行读取

我将得到 2 个值，例如：

iphone 移动
手机 iphone

亚马逊点燃
亚马逊点燃

我需要的是计数，即尽管两个值都像 (a,b) 和 (b,a) 一样交换..但它应该计为 1 并且需要如下结果

"iphone 手机" => 2
"kindle 亚马逊" => 2

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T04:56:50.043

这是可行的。输入行的排序数组用作散列的键：

```
#!/usr/bin/ruby

# Set the default value of the hash to be zero instead of nil
h = Hash.new 0

# Process each line of the input file
ARGF.each do |line|
    # Split the line into a sorted array of words
    values = line.chomp.split.sort

    # Skip this line if there are no words on it
    next if values.length == 0

    # Increment the count for this array of words
    h[values] += 1
end

# For each key in the hash
h.keys.each do |key|
    # Join the words in the array with a space and print the count
    puts "\"#{key.join(' ')}\" => #{h[key]}"
end 
```

# c++ - 模板参数推导和指向常量的指针

> ID：13665574
> 
> 赞同：3
> 
> 时间：2012-12-02T01:31:08.143
> 
> 标签：c++, templates

我定义了两个重载函数，它们的声明如下

```
template <class T> void Foo(const T *p);    // lets call this Foo_p

template <class T> void Foo(const T& r);    // lets call this Foo_r 
```

当我打电话

`Foo( ptr_to_non_const );`

`Foo_r`被调用。我假设在寻找最佳匹配时，不断的限定条件会从指针中删除。因为`T*`比`T&`我预期的更专业，所以`Foo_p`会被调用。

谁能指出我列出模板参数推导规则和匹配优先级的好资源。

在这种特殊情况下，我打算`template <class T> void Foo(const T& r)`被称为非指针类型。这是否意味着我必须定义有条件和没有条件的功能`const`。对于一个参数来说，这没什么大不了的，但我的函数需要多个指针，所以我想避免重复。任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T02:01:43.187

模板推演规则比较复杂，不知道有没有简单的总结。但是，如果两个模板是候选模板，其中一个需要转换而另一个不需要，则选择不需要转换来生成模板参数的一个。在您的示例中，匹配的实例如下：

```
S* ptr_to_non_const = ...;
Foo(ptr_to_non_const); // => candidates:
                       //   a. F(const T&) with `T` deduced as `S*` requires no
                       //      conversion
                       //   b. F(const T*) with `T` deduced as `S` requires `S*` to
                       //      `S const*` conversion 
```

`std::enable_if<...>`要强制使用指针重载，您可以使用with 一起从重载集中删除引用版本`std::is_pointer<...>`：

```
template <class T>
typename std::enable_if<!std::is_pointer<T>::value>::type
Foo(const T& r); 
```

虽然这使用了 C++ 2011 的特性，但两者都`std::enable_if<...>`可以`std::is_pointer<...>`使用 C++ 2003 编译器很容易地实现（而且我很确定[Boost](http://www.boost.org/)已经这样做了）。

# windows - 如何在 Eclipse 编辑器中使用不同的字体

> ID：13665575
> 
> 赞同：0
> 
> 时间：2012-12-02T01:31:20.913
> 
> 标签：windows, eclipse, fonts

我的 Eclipse 编辑器只显示 20 种字体。我想知道是否可以下载一些字体，然后配置 Eclipse 以在编辑器中使用这些字体。具体来说，我想使用 Windows 字体文件夹中的字体。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T08:04:13.963

是的，它可以改变你日食的字体。

在您的工作区域中，按右键 > 首选项（底部）> 颜色和字体 > 编辑 > 选择您的字体 > 确定 > 应用

# c# - 打开 Excel xlsx 文件进行查看

> ID：13665576
> 
> 赞同：2
> 
> 时间：2012-12-02T01:31:34.603
> 
> 标签：c#, asp.net-mvc, excel

我需要打开一个 xlsx 文件，以便用户可以看到它。
我使用了以下代码，但无法显示 excel 文件：

```
public ActionResult GetExcelReport()
{
    string fileName = "Sheet1.xlsx";
    string path = Path.Combine(@"C:\Test", fileName);

    return File(path, "application/xlsx");
} 
```

我希望重新`File(path ...`
运行实际上会打开文件以供查看。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-02T01:38:59.373

尝试使用`Microsoft.Office.Interop.Excel`, 和：

```
Application excel = new Application();
Workbook wb = excel.Workbooks.Open(path);
excel.Visible=true; 
```

顺便说一句，您还可以使用`using System.Diagnostics;`, 和

```
Process.Start(path); 
```

您只需通过 using 打开文件流`File`，它不是`Launch`文件。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-02T02:12:55.710

扩展 bhuang3 的答案：如果您希望您的用户能够查看 Excel 电子表格，然后让您的应用程序对其进行处理，那么我将使用 Interop 答案，因为您的应用程序可以保留执行操作的引用。

你可以打开它

```
Excel.Application xlApp = new Excel.Application();
Excel.Workbooks xlWBs = xlApp.Workbooks;
Excel.Workbook xlWB = xlWBs.Open(path);
xlApp.Visible = true; 
```

完成后，您应该关闭工作簿并退出应用程序，以防止 Excel 在内存中无头闲置（当用户在他们的机器上打开另一个电子表格时，这可能会产生一些非常奇怪的副作用）

```
xlWB.Close();
xlWB = null;
xlWBs = null;
xlApp.Quit();
xlApp = null; 
```

或者，如果您只是想打开电子表格，然后将完全控制权交给用户，我会使用该`Process.Start(path)`解决方案，因为它避免了许多潜在的混乱 COM 问题。

# audio - Autohotkey、SoundSet：使用功能键将音量切换到 2% (Windows XP)

> ID：13665581
> 
> 赞同：0
> 
> 时间：2012-12-02T01:32:27.493
> 
> 标签：audio, toggle, autohotkey, mute

我对 SoundSet 命令的新手研究走到了死胡同。我会很感激一个脚本或一个指针。

我不知道如何使这个命令切换：

F11::声音设置，2

我可以看到如何使主静音切换 - 但不是这个“大部分静音”到 2% 的水平（用于在监视节目重新开始时静音广告）。谢谢。

（注意：如果相关，这适用于 Windows XP）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T02:02:18.397

```
F11::
    if (muting) {
        SoundSet, %oldVolume%
        muting := false
    }
    else {
        SoundGet, oldVolume
        SoundSet, 2
        muting := true
    }    
return 
```

基本上，您创建一个变量`muting`，以便您的脚本可以回忆它所处的状态。当您按下 F11 时，它会检查是否`muting`为真。如果是，则将系统音量设置为`oldVolume`，然后设置`muting`为 false。如果`muting`为 false，则将当前音量保存为`oldVolume`，将系统音量设置为 2，然后设置`muting`为 true。

# ruby-on-rails - 设计未初始化常量用户

> ID：13665588
> 
> 赞同：3
> 
> 时间：2012-12-02T01:33:08.537
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, devise

我意识到这已经在这里被问过很多次了（我也阅读了维基）。但我仍然对如何正确保持我的路线名称相同感到困惑。

目前我的设计路线如下，使用自定义网址（例如`/user/signup`）。

我的模型被称为`User`

路线：

```
 devise_for :users, :controllers => { :registrations => "registrations" }, :path_names => {
    :sign_up => 'signup'
  }

  devise_for :users, :path => "user", :except => "create", :path_names => { 
    :sign_in  => 'login', 
    :sign_out => 'logout', 
    :password => 'forgot-password', 
    :confirmation => 'verification', 
    :unlock   => 'unblock', 
    :sign_up  => 'signup' 
  } 
```

我所要做的就是挂钩到创建操作，这样我就可以检查我创建的蜜罐字段是否已填写（以防止垃圾邮件）。这就是我真正想做的。

我想保持我的网址不变`/user/signup`。我需要做一个额外的步骤吗？

这是我到目前为止所拥有的...

**/app/controllers/registrations_controller.rb**

```
class Users::RegistrationsController < Devise::RegistrationsController

  def new
    super
  end

  def create
    super
  end

end 
```

我正进入（状态`uninitialized constant Users`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-02T18:13:21.867

很简单，我需要将控制器放在“用户”文件夹中，这样就解决了所有问题。（另外，路由控制器需要`:registrations => "users/registrations"`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-30T10:36:27.887

我有同样的错误。就我而言，它在`routes.rb`

曾是：`devise_for :users,controllers: {sessions: "users/sessions"}`

结果：`uninitialized constant Users`

我不知道发生了什么，直到`{sessions: "users/sessions"}` 在我的情况下它应该`user/sessions`没有“s”

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-02T08:23:37.487

您不需要命名控制器`Users::RegistrationsController`，只需命名它以`RegistrationsController`保持继承自`Devise::RegistrationsController`.

我不知道第一个的目的，`devise_for`但您需要复制/移动`:controllers => { :registrations => "registrations" }`到第二个`devise_for`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-09-23T10:19:48.317

开启`devise (4.7.3)`且`rails (6.0.3.3)`正确的控制器`Session`未开启`Sessions`。

你需要在你的`config/route.rb`

```
devise_for :users, controllers: { session: 'users/sessions' } 
```

# java - PriorityQueue 和 compareTo 方法

> ID：13665597
> 
> 赞同：0
> 
> 时间：2012-12-02T01:34:27.603
> 
> 标签：java, dijkstra

一个小问题，但我找不到关于如何实现我正在尝试的东西的好解释。我正在尝试实现[Dijkstra 算法](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)。我需要使用[PriorityQueue](http://docs.oracle.com/javase/7/docs/api/java/util/PriorityQueue.html)。

我想根据距离比较图的不同顶点。但是我真的不知道如何编写这样的比较方法，因为我从未使用过`PriorityQueue`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T01:39:41.150

优先级队列的全部意义在于它将最小的元素保持在顶部。您可以使用该函数检索此顶部元素，也可以使用该`peek()`函数检索它并将其从队列中删除`pop()`。

因此，对于 Dijkstra 算法，您应该将所有顶点放入队列中，然后在每一步弹出具有最小距离的顶点，然后更新与队列中相邻节点的距离。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T01:45:04.027

至于 CompareTo 函数：

```
public class Example implements Comparable<Example> {

    private String test;

    public String getTest() {
        return test;
    }

    public void setTest(String test) {
        this.test = test;
    }
    @Override
    public int compareTo(Example o) {
        return this.test.compareTo(o.test);
    }

} 
```

# r - 在 R 中，如何将表达式与图例标签中两行上的字符串结合起来？

> ID：13665601
> 
> 赞同：2
> 
> 时间：2012-12-02T01:34:42.393
> 
> 标签：r, plot

我想在同一个图上绘制两种方法 m1 和 m2 返回的结果。在我的特殊情况下，第一种方法的标签是一个表达式（因为它有一个下标），第二种方法的标签在两行上（因为它很长）。但是，有这两个要求是行不通的：

```
l <- list("m1"=list(data=1:10, col=2, label=expression(paste("method 1 (", X[a], ")"))))
l[["m2"]] <- list(data=rep(3,10), col=3, label="method 2 (with a\nlong explanation)")
plot(l[["m1"]]$data, col=l[["m1"]]$col); points(l[["m2"]]$data, col=l[["m2"]]$col)
legend("topleft", legend=c(l[["m1"]]$label, l[["m2"]]$label), col=c(l[["m1"]]$col, l[["m2"]]$col), pch=1) 
```

正如您在图例中看到的那样，第二个标签（两行上的一个）与第一个标签重叠。

当我不对第一个标签使用表达式时，问题就消失了：

```
legend("topleft", legend=c("method 1 (Xa)", l[["m2"]]$label), col=c(l[["m1"]]$col, l[["m2"]]$col), pch=1) 
```

当第二个标签在一行时，问题也会消失：

```
legend("topleft", legend=c(l[["m1"]]$label, "method 2 (with a long explanation)"), col=c(l[["m1"]]$col, l[["m2"]]$col), pch=1) 
```

但是，我真的需要表达式和两行。任何想法？

ps：我在 Lubuntu 上使用 R 2.14.1。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T02:10:46.750

You can play with **y.intersep** and **cex** parameters.

```
legend("topleft", 
       legend=c(l[["m1"]]$label, 
                l[["m2"]]$label),
       col=c(l[["m1"]]$col,l[["m2"]]$col), 
       pch=0.5,title.adj=100,cex=0.8,y.intersp=2
       ) 
```

![enter image description here](../Images/efc223187c0981e990a826b1037698c7.png)

# node.js - 如何使用套接字从房间内的客户端获取数据？

> ID：13665602
> 
> 赞同：1
> 
> 时间：2012-12-02T01:34:43.190
> 
> 标签：node.js, sockets, networking, socket.io, chat

我正在使用 nodejs (0.8.15) 和 socket.io (0.9) 我正在使用房间和命名空间创建聊天。所以，问题是：

1) 用户每次进入某个房间时，都需要查看该房间的在线用户列表。在 wiki [https://github.com/LearnBoost/socket.io/wiki/Rooms](https://github.com/LearnBoost/socket.io/wiki/Rooms)我读到我可以获取客户端的套接字 id 列表`io.sockets.clients('room')`，但是用户有昵称，我这样存储它们：

```
var io = io.listen(server);
var chat = io.of('/chat').on('connection', function (socket) {
{
  socket.on('user-entered-to-chat', function(nickname) {
    // how i store nickname
    socket.nickname = nickname;
    ...
    // i need do something here or above to make array of nicknames
    socket.emit('get-users-list`, array);
  }
}); 
```

**问：如何访问每个人的套接字以获取他们的昵称等信息？**

当然，我可以用他们的 socket.id 在数据库中保存昵称，但我不想这样。

2）另外，我可以`var nicknames=[];`在代码顶部的某个地方删除，但如果我在一个房间在线有 500 多个用户怎么办 -**这是一个好方法吗？它适用于500+吗？**

我认为`chat`所有用户的变量都是可变的，我尝试写下`var chat.nicknames=[]`所有昵称，但它没有用。它也不适用于`io.sockets.nicknames = []`. 每个用户都有自己的`chat`.

3）**在哪里存储有关套接字的所有信息/数据？**例如，房间中的客户列表。在我的 nodejs 服务器/计算机上？

谢谢你

# c# - Entity Framework 5 方法中的字符串谓词

> ID：13665611
> 
> 赞同：0
> 
> 时间：2012-12-02T01:36:37.680
> 
> 标签：c#, frameworks, entity, entity-framework-5

好吧，我想这已经改变了，但我想如果我错过了什么。当我将我的项目升级到 Framework 4.5 和 EF5 时，我遇到了一些错误。我正在检查并发现“select”、“where”方法和其他方法中没有字符串谓词。

例如，我有一个这样的查询：

```
var res = _datos.TABLE.Select("it.id,it.name, it.age").Where("it.id == 5").First()
string name = res["name"].ToString();
int age = Convert.ToInt32(res["age"]); 
```

研究了一下，发现了一个SqlQuery Method。EF5 会改变这个吗？例如，如何仅选择特定表中的姓名和年龄？

提前致谢！

# list - Tcl：递归过程给出“堆栈空间外”

> ID：13665613
> 
> 赞同：1
> 
> 时间：2012-12-02T01:36:49.100
> 
> 标签：list, recursion, tcl

我是 Tcl 新手，为了学习，我正在尝试实现来自维基百科的合并排序算法伪代码：

```
function merge_sort(list m)
// if list size is 1, consider it sorted and return it
if length(m) <= 1
    return m
// else list size is > 1, so split the list into two sublists
var list left, right
var integer middle = length(m) / 2
for each x in m before middle
     add x to left
for each x in m after or equal middle
     add x to right
// recursively call merge_sort() to further split each sublist
// until sublist size is 1
left = merge_sort(left)
right = merge_sort(right)
// merge the sublists returned from prior calls to merge_sort()
// and return the resulting merged sublist
return merge(left, right) 
```

在我的 Tcl 脚本中，我这样做：

```
proc merge_sort { lst } {

   if { [llength $lst] <= 1 } {
       return $lst
   }

   set middle [expr {[llength $lst] / 2}]

   set left [lrange $lst 0 $middle]
   set right [lrange $lst [expr {$middle + 1}] [llength $lst]]

   set left [merge_sort $left]
   set right [merge_sort $right]

   return [merge $left $right]
} 
```

根据我的调试尝试，在递归调用`merge_sort`proc 之前一切正常。

输出说我“*堆栈空间不足（无限循环？）* ”。老实说，我没有在代码中看到问题。我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T08:27:48.730

一个问题是您的代码用于`[lrange $lst 0 $middle]`获取字符串的左侧部分，但由于`lrange`' 的范围是**从零开始的，**这意味着对于两个成员的列表`{7 8}`，您将得到`middle`等于`1`和`left`将是`{7 8}`。

此外，由于您使用`[lrange $lst [expr {$middle + 1}] [llength $lst]]`for `right`，而不是对于同一个列表，它会导致一个空列表，因为`[lrange $lst 2 2]`对于两个成员列表是空的。

我还更改了用作最后一个索引的权利，因为这是一种常见的最佳实践，而不是`lrange`等效的。`end``[expr {[llength $lst] - 1}]`

```
proc merge_sort { lst } {

   if { [llength $lst] <= 1 } {
       return $lst
   }

   set middle [expr {[llength $lst] / 2}]

   #for each x in m *before* middle add x to left
   set left [lrange $lst 0 [expr {$middle - 1}]]

   #for each x in m *after or equal* middle add x to right
   set right [lrange $lst $middle end]

   set left [merge_sort $left]
   set right [merge_sort $right]

   return [merge $left $right]
} 
```

# android - 使用适用于 Android 的 Twitter4j 库

> ID：13665616
> 
> 赞同：5
> 
> 时间：2012-12-02T01:37:33.127
> 
> 标签：android, twitter, twitter4j

我正在尝试使用 twitter4j 库创建一个 twitter 客户端。但是我仍然不清楚这些东西，我找不到一个好的教程。大多数教程都已过时。主要是我想知道，我每次创建 Twitter 客户端时都必须使用 OAuth 吗？如果不是，我应该怎么做（我的意思是，没有获得“消费者密钥”和“消费者秘密”，只需输入用户名和密码）？任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-18T11:13:53.867

如果你想使用 twitter4j，你必须在[http://dev.twitter.com/apps/注册一个应用程序来获取消费者密钥和秘密。](http://dev.twitter.com/apps/)

我的应用程序只是发布了一条带有图像的推文，我希望找到一个简单的推文功能，但却发现了一个迷宫般的身份验证细节和代码线程问题。

为了更轻松地使用图像发送推文，我将 twitter4j 封装在一个包装 JAR 文件中，该文件处理所有身份验证和线程问题。它只需要几行代码（至少 3 行）即可工作。JAR 文件称为[MSTwitter.jar](http://www.mindspiker.com/Projects/MSTwitter/MSTwitter.jar)。

MSTwitter.jar 包含三个文件，其中之一是 MSTwitter。该文件的顶部是解释如何使用 JAR 的注释。它们在这里重复：

```
To use MSTwitter.jar:  
-Project setup:     
    -Create a twitter app on https://dev.twitter.com/apps/ to get:      
        -CONSUMER_KEY a public key(string) used to authenticate your app with Twitter.com       
        -CONSUMER_SECRET a private key(string) used to authenticate your app with Twitter.com       
        You don't need any thing else so authorization url etc are not important for this process   
    -Put twitter4j-core-3.0.2.jar and MSTwitter.jar files in your project's libs directory:         
        -You can download twitter4j from from http://twitter4j.org  
    -Register the jars in your project build path: 
        Project->Properties->Java Build Path->Libraries->Add Jar        
        ->select the jar files you just added to your project's libs directory.
    -Make AndroidManifest.xml modifications         
    -Add <uses-permission android:name="android.permission.INTERNET" /> inside manifest section (<manifest>here</manifest>) 
    -Add <uses-permission android:name="com.mindspiker.mstwitter.MSTwitterService" /> inside manifest section
    -Add <uses-permission android:name="android.permission.BROADCAST_STICKY" /> inside manifest section
    -Add <activity android:name="com.mindspiker.mstwitter.MSTwitterAuthorizer" /> inside application section.
    -Add <service android:name="com.mindspiker.mstwitter.MSTwitterService" /> inside application section.

-Code to add to you calling activity
    -Define a  module MSTwitter variable.
    -In onCreate() allocate a module level MSTwitter variable
        ex: mMTwitter = new MSTWitter(args);]
    -Add code to catch response from MSTwitterAuthorizer in your activity's onActivityResult() 
        ex:@Override  protected void onActivityResult(int requestCode, int resultCode, Intent data){ mMSTwitter.onCallingActivityResult(requestCode, resultCode, data); }
    -Call  startTweet(String text, String imagePath) on your MSTwitter object instance.
        if you image is held in memory and not saved to disk call 
        MSTwitter.putBitmapInDiskCache() to save to a temporary file on disk.
    -(Optional) Add a MSTwitterResultReceiver to catch MSTwitter events which are
        fired at various stages of the process. 
        MSTwitterResultReceiver events:
            -MSTWEET_STATUS_AUTHORIZING the app is not authorized and the authorization process is starting.
            -MSTWEET_STATUS_STARTING the app is authorized and sending the tweet text and image is starting.
            -MSTWEET_STATUS_FINSIHED_SUCCCESS the tweet is done and was successful.         
            -MSTWEET_STATUS_FINSIHED_FAILED the tweet is done and failed to complete.    
Notes: 
-If your project compiles but crashes when any twwiter4j object is instantiated a possible cause may be trying to add the jars as external jars instead of the suggested method above. If your libraries directory already exists but is called 'lib', change the name to 'libs'. Sounds crazy I know, but works in some situations. 
-To prevent large images from being passed around between intents images should be  cached to disk and retrieved when used. Only the file name is passed between intents.
-To perform tasks on a separate thread that passes information to and from activities, which could be destroyed at any time (phone call, screen orientation change, etc.), a method using intent services to perform the work and sticky broadcasts to pass the     data was employed. For more on this method and why it was used check out:   http://stackoverflow.com/questions/1111980/how-to-handle-screen-orientation-change-when-progress-dialog-and-background-thre/8074278#8074278 
```

以下文件来自发布带有图像的推文的示例项目。

androidmanifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android" package="com.example.imagetweettester" android:versionCode="1" android:versionName="1.0" >
    <uses-sdk android:minSdkVersion="8"android:targetSdkVersion="17" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="com.mindspiker.mstwitter.MSTwitterService" />
    <uses-permission android:name="android.permission.BROADCAST_STICKY" />
    <application android:allowBackup="true" android:icon="@drawable/ic_launcher" android:label="@string/app_name" android:theme="@style/AppTheme" >
        <activity android:name="com.example.imagetweettester.MainActivity" android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name="com.mindspiker.mstwitter.MSTwitterAuthorizer" />
        <service android:name="com.mindspiker.mstwitter.MSTwitterService" />
    </application>
</manifest> 
```

MainActivity.java

```
package com.example.imagetweettester;

import java.text.SimpleDateFormat;
import java.util.Date;

import com.mindspiker.mstwitter.MSTwitter;
import com.mindspiker.mstwitter.MSTwitter.MSTwitterResultReceiver;

import android.os.Bundle;
import android.annotation.SuppressLint;
import android.app.Activity;
import android.content.Intent;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class MainActivity extends Activity {
/** Consumer Key generated when you registered your app at https://dev.twitter.com/apps/ */
public static final String CONSUMER_KEY = "yourConsumerKeyHere";
/** Consumer Secret generated when you registered your app at https://dev.twitter.com/apps/ */
public static final String CONSUMER_SECRET = "yourConsumerSecretHere"; 
/** module level variables used in different parts of this module */
private MSTwitter mMSTwitter;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // setup button to call local tweet() function
    Button tweetButton = (Button) findViewById(R.id.button1);
    tweetButton.setOnClickListener(new OnClickListener () {
        @Override
        public void onClick(View v) {
            tweet();
        }
    });

    // make a MSTwitter event handler to receive tweet send events
    MSTwitterResultReceiver myMSTReceiver = new MSTwitterResultReceiver() {
        @Override
        public void onRecieve(int tweetLifeCycleEvent, String tweetMessage) {
            handleTweetMessage(tweetLifeCycleEvent, tweetMessage);
        }
    };

    // create module level MSTwitter object.
    // This object can be destroyed and recreated without interrupting the send tweet process.
    // So no need to save and pass back in savedInstanceState bundle.
    mMSTwitter = new MSTwitter(this, CONSUMER_KEY, CONSUMER_SECRET, myMSTReceiver);
}

@Override 
protected void onActivityResult(int requestCode, int resultCode, Intent data){
    //This MUST MUST be done for authorization to work. If your get a MSTWEET_STATUS_AUTHORIZING 
    // message and nothing else it is most likely because this is not being done.
    mMSTwitter.onCallingActivityResult(requestCode, resultCode, data);
}

/**
 * Send tweet using MSTwitter object created in onCreate()
 */
private void tweet() {
    // assemble data

    // get text from layout control
    EditText tweetEditText = (EditText) findViewById(R.id.editText1);
    String textToTweet = tweetEditText.getText().toString();
    // get image from resource
    Bitmap imageToTweet = BitmapFactory.decodeResource(getResources(), R.drawable.ic_launcher);
    // use MSTwitter function to save image to file because startTweet() takes an image path
    // this is done to avoid passing large image files between intents which is not android best practices 
    String tweetImagePath = MSTwitter.putBitmapInDiskCache(this, imageToTweet);

    // start the tweet
    mMSTwitter.startTweet(textToTweet, tweetImagePath);
}

@SuppressLint("SimpleDateFormat")
private void handleTweetMessage(int event, String message) {

    String note = "";
    switch (event) {
    case MSTwitter.MSTWEET_STATUS_AUTHORIZING:
        note = "Authorizing app with twitter.com";
        break;
    case MSTwitter.MSTWEET_STATUS_STARTING:
        note = "Tweet data send started";
        break;
    case MSTwitter.MSTWEET_STATUS_FINSIHED_SUCCCESS:
        note = "Tweet sent successfully";
        break;
    case MSTwitter.MSTWEET_STATUS_FINSIHED_FAILED:
        note = "Tweet failed:" + message;
        break;
    }

    // add note to results TextView
    SimpleDateFormat timeFmt = new SimpleDateFormat("h:mm:ss.S");
    String timeS = timeFmt.format(new Date());
    TextView resultsTV = (TextView) findViewById(R.id.resultsTextView);
    resultsTV.setText(resultsTV.getText() + "\n[Message received at " + timeS +"]\n" + note);
}
} 
```

activity_main.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"  xmlns:tools="http://schemas.android.com/tools" android:layout_width="match_parent" android:layout_height="wrap_content" android:orientation="vertical" tools:context=".MainActivity" >
<Button android:id="@+id/button1" android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_weight="1" android:text="Start Tweet" />
<TextView android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="Text to tweet:" />
<EditText android:id="@+id/editText1" android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_weight="1" android:ems="10" android:text="Test tweet text" >
        <requestFocus />
    </EditText>
    <ImageView android:id="@+id/imageView1" android:layout_width="wrap_content" android:layout_height="wrap_content" android:src="@drawable/ic_launcher"  />
    <TextView  android:layout_width="wrap_content" android:layout_height="wrap_content"  android:text="Results:" />
    <TextView android:id="@+id/resultsTextView" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text=""  />
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T17:39:16.897

啊，您还需要在 twitter dev 应用程序设置页面中设置回调 url（您想要的任何网页，没关系）：）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T11:54:38.183

我使用了 MindSpiker 的回答中引用的 jar 文件：

如果我在我的 twitter 应用程序配置中放置一个随机回调 URL：

我的应用程序打开一个浏览器，我登录并尝试调用回调 url，它在 Twitter 的网络中创建了一个错误。

如果我将其留空：我收到此错误：

```
04-02 13:48:49.654: E/MSTwitter(7983): Tweeter Error: 401:Authentication credentials (https://dev.twitter.com/pages/auth) were missing or incorrect. Ensure that you have set valid consumer key/secret, access token/secret, and the system clock is in sync.
04-02 13:48:49.654: E/MSTwitter(7983): <?xml version="1.0" encoding="UTF-8"?>
04-02 13:48:49.654: E/MSTwitter(7983): <hash>
04-02 13:48:49.654: E/MSTwitter(7983):   <request>/oauth/request_token</request>
04-02 13:48:49.654: E/MSTwitter(7983):   <error>Desktop applications only support the oauth_callback value 'oob'</error>
04-02 13:48:49.654: E/MSTwitter(7983): </hash>
04-02 13:48:49.654: E/MSTwitter(7983): 10f5ada3-e574402b: 401:Authentication credentials (https://dev.twitter.com/pages/auth) were missing or incorrect. Ensure that you have set valid consumer key/secret, access token/secret, and the system clock is in sync.
04-02 13:48:49.654: E/MSTwitter(7983): <?xml version="1.0" encoding="UTF-8"?>
04-02 13:48:49.654: E/MSTwitter(7983): <hash>
04-02 13:48:49.654: E/MSTwitter(7983):   <request>/oauth/request_token</request>
04-02 13:48:49.654: E/MSTwitter(7983):   <error>Desktop applications only support the oauth_callback value 'oob'</error>
04-02 13:48:49.654: E/MSTwitter(7983): </hash> 
```

我在这里做错了什么？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-23T17:27:13.477

首先，我要感谢 MindSpiker 提供了这个很棒的包装器。我无法相信在 Android 上发送简单的文本状态有多么困难。在 iOS 中使用正确的库非常简单。而且我想通过一个小修复为你的图书馆做出贡献。

像一些用户一样，在我授权我的应用程序后，我也得到了“抱歉该页面不存在”网页，因此我下载了您的代码并从源代码进行了调试。由于一个奇怪的原因，MSTwitterAuthorizer.java 文件上的 shouldOverrideUrlLoading 方法没有以正确的方式触发。这是原始代码：

```
private class TwitterWebViewClient extends WebViewClient {

    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        // see if Twitter.com send back a url containing the callback key

        if (url.contains(MSTwitter.CALLBACK_URL)) {
            // we are done talking with twitter.com so check credentials and finish interface.
            processResponse(url);
            finish();
            return true;
        } else {
            // keep browsing
            view.loadUrl(url);
            return false;
        }
    }
} 
```

我建议添加一个 onPageStarted 事件：

```
private class TwitterWebViewClient extends WebViewClient {

    @Override
    public void onPageStarted(WebView view, String url,  Bitmap favicon) {

        if (url.contains(MSTwitter.CALLBACK_URL)) {
            // we are done talking with twitter.com so check credentials and finish interface.
            processResponse(url);
            finish();
        }
    }

    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        // see if Twitter.com send back a url containing the callback key

        if (url.contains(MSTwitter.CALLBACK_URL)) {
            // we are done talking with twitter.com so check credentials and finish interface.
            processResponse(url);
            finish();
            return true;
        } else {
            // keep browsing
            view.loadUrl(url);
            return false;
        }
    }
} 
```

然后我可以让它在 Android 2.2 上运行 :)

请在 GitHub 上上传您的代码，您可以添加一些额外的方法，例如获取时间线或其他任何方法。身份验证的事情很烦人。

# http - Cookie 在 Firefox 和 Chrome 中工作，而不是 IE9

> ID：13665623
> 
> 赞同：1
> 
> 时间：2012-12-02T01:39:27.247
> 
> 标签：http, cookies, internet-explorer-9

我有一个页面在登录后向用户的浏览器发送会话 cookie。登录在 Chrome 和 Firefox 中运行良好，但不适用于 IE9。

使用IE的F12开发模式，可以看到`Set-Cookie`正在向浏览器发送header：

```
Set-Cookie: workgroup_session_id=abc123; expires=Sun,; Path=/ 
```

这是`Set-Cookie`星期六晚上作为响应头发送的。

但是，当 IE9 做出下一个响应时，它不会发送`workgroup_session_id`cookie（因此它会再次获取登录表单）。

同样`Set-Cookie`被发送到 Chrome 或 Firefox，正如预期的那样，他们`workgroup_session_id`在下一个请求时发送，每个人都很高兴。

为什么这不适用于 IE9？我没有使用任何奇怪的安全设置或插件，其他 cookie 工作正常。另一个引起我注意的客户是仅使用 IE9 时遇到相同的行为。

我不认为这是与 P3P 相关的问题。当我将隐私设置设置为 时，它仍然会发生`Accept All Cookies`。

即使我检查`Override automatic cookie handling`和也会发生`Always allow session cookies`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T01:49:58.230

[https://www.rfc-editor.org/rfc/rfc2616#section-3.3.1](https://www.rfc-editor.org/rfc/rfc2616#section-3.3.1)

标题`expires=Sun,` 格式无效（应该选择哪个星期天并不明显）。

请尝试`expires`以表格形式发送`expires=Sun, 07 Dec 2012 00:00:00 GMT`（按照 RFC 的建议）。

# c++ - 对成员函数的未定义引用 (C++)

> ID：13665624
> 
> 赞同：0
> 
> 时间：2012-12-02T01:39:33.527
> 
> 标签：c++, object, initialization, undefined-reference

我正在使用 Makefile 编译 C++ 项目，我收到一个未定义的引用错误，我怀疑这是一个简单的错误。

错误本身是：

```
$ make
g++ -c main.cpp
g++ -o p5 main.o
main.o:main.cpp:(.text+0x241): undefined reference to `Instructions::processInput(std::basic_string<char, std::char_traits<char>, std::allocator<char> >)'
collect2: ld returned 1 exit status
Makefile:2: recipe for target `p5' failed
make: *** [p5] Error 1 
```

以下是与错误有关的项目部分（为清楚起见）：我的生成文件：

```
p5: main.o Instructions.o
    g++ -o p5 main.o

main.o: main.cpp Instructions.h
    g++ -c main.cpp

Instructions.o: Instructions.h Instructions.cpp
    g++ -c Instructions.cpp 
```

我的 main.cpp 文件：

```
#include <string>
#include "Instructions.h"
using namespace std;

int main() {
    Instructions inst;
    inst.processInput("some string par example"); //THIS LINE HERE GIVES ME ERRORS
    return 0;
} 
```

我的说明头文件：

```
#ifndef INSTRUCTIONS_H
#define INSTRUCTIONS_H
#include <string>

class Instructions {
public:
    Instructions() {input = ""; command = 0; xCoord = 0.0; yCoord = 0.0;};
    void processInput(std::string in);
private:
    std::string input;
    int command;
    double xCoord;
    double yCoord;
};
#endif 
```

最后是 .cpp 文件，目前非常简单：

```
#include "Instructions.h"
#include <string>
#include <iostream>
using namespace std;

void Instructions::processInput(string in) {
    cout << "Processing: " << input << endl;
} 
```

我一直在寻找解决方案，但无济于事。如果它确实在其他地方，请原谅我！我也希望它可以帮助所有仍在使用 C++ 的初学者！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T01:44:06.400

请试试这个 Makefile ：

```
 p5: Instructions.o main.o
     g++ Instructions.o main.o -o p5 

 Instructions.o: Instructions.cpp
     g++ -c Instructions.cpp -o Instructions.o 

 main.o: main.cpp Instructions.h
     g++ -c main.cpp Instructions.o -o main.o 
```

要编译`p5`，首先需要编译它的所有依赖项，即`Instructions.o`和`main.o`. `Instructions.o`是独立的，所以可以这样编译`g++ -c Instructions.cpp`。但是`main.o`依赖于类*Instructions*所以它依赖于`.o`它应该像这样编译`g++ -c main.cpp Instructions.o`。

同样的事情`p5`，它需要所有的`*.o`。

# c# - 自动填写此网页

> ID：13665630
> 
> 赞同：0
> 
> 时间：2012-12-02T01:40:42.223
> 
> 标签：c#

我正在尝试填写此表格，但我在填写时遇到了麻烦。这是网页

[无标题表格](https://docs.google.com/spreadsheet/viewform?formkey=dDViZjNzeWdPS25XZGFhNjF6Z0NnbGc6MQ#gid=0)

我试过了，但没有用

```
wb.Document.GetElementById("entry_0").InnerText = textBox1.Text; 
```

我不知道如何点击提交按钮

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T01:46:01.437

```
 IHTMLElementCollection m_hec;

foreach (HTMLInputElementClass he in m_hec)
    {
        if (he.getAttribute("name").ToString() == "FIELD[]")
            if (he.getAttribute("value") != null)
                lstInput.Add(he.getAttribute("value").ToString());
            else
                lstInput.Add("");
    } 
```

看[这里](http://hintdesk.com/c-auto-fill-in-form-of-website/)

# css - 使用 CSS，我可以设置来自不同类的多个背景吗？

> ID：13665634
> 
> 赞同：15
> 
> 时间：2012-12-02T01:41:48.880
> 
> 标签：css

我知道可以使用 CSS 制作多个背景图层，但我可以对来自不同类的多个背景进行分层吗？假设我有 div 作为瓷砖，可以有山脉或丘陵，并且可以属于某个国家。

```
.mountain {
    background: url("mountain.png");
}
.hill {
    background: url("hill.png");
}
.bluecountry {
    background: url("bluecountry.png");
}
.redcountry {
    background: url("redcountry.png");
}
.greencountry {
    background: url("greencountry.png");
} 
```

将是我的CSS。但是，这不起作用；当我做类似的事情时

```
<div class="hill bluecountry"> 
```

它不会对背景进行分层，只会使用其中一个。有什么办法可以使这项工作？我实际上有比这更多的东西，并且必须为每种可能的组合单独编写 CSS 多个背景将是巨大的浪费时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T01:51:55.607

无法`background`使用多个类合并属性——它只能设置一次。你可以做的是：

1.  创建一个容器 div ( `position: relative`)
2.  在容器内放置多个 div ( `position: absolute`)
3.  对每个子 div 应用一个单独的类
4.  每个图像都可以使用`top: 0px; left: 0px;`, 和 with定位在容器内`background-position`。

这是我的意思的一个例子：

**HTML**

```
<div class="container">
    <div class="first"></div>
    <div class="second"></div>
</div>​ 
```

**CSS**

```
html, body { height: 100%; }
div { 
    display: inline-block;
    width: 400px; 
    height: 100px; 
}
.container {
    position: relative;
}
.first, .second {
    position: absolute;
    left: 0;
    top: 0;
}
.first { 
    background: url(http://lorempixel.com/200/100/sports/1) no-repeat; 
}
.second { 
    background: url(http://lorempixel.com/200/100/sports/2) no-repeat; 
    background-position: right center;
} 
```

[http://jsfiddle.net/32G4A/2](http://jsfiddle.net/32G4A/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-04T22:44:46.357

如果 jQuery 是一个选项：

```
$(".mountain, .hill, .bluecountry").each(function () {
  var backgrounds = [];
  if ($(this).hasClass("mountain"))
    backgrounds.push("url('mountain.png')");
  if ($(this).hasClass("hill"))
    backgrounds.push("url('hill.png')");
  if ($(this).hasClass("bluecountry"))
    backgrounds.push("url('bluecountry.png')");
  $(this).css("background", backgrounds.join(", "));
}); 
```

# java - Apache HttpAsyncClient 抛出 NoSuchMethodError

> ID：13665635
> 
> 赞同：2
> 
> 时间：2012-12-02T01:42:11.037
> 
> 标签：java, android, apache, httpclient

执行时：`Future<HttpResponse> future = myHttpAsyncClient.execute(post, null);` 我得到这个：

```
12-02 02:22:03.567: W/dalvikvm(6392): threadid=13: thread exiting with uncaught exception (group=0x40b5c930)

...

Caused by: java.lang.NoSuchMethodError: org.apache.http.client.utils.URIUtils.extractHost
12-02 02:22:03.606: E/AndroidRuntime(6392):     at org.apache.http.impl.nio.client.AbstractHttpAsyncClient.determineTarget(AbstractHttpAsyncClient.java:594)

... 
```

我发现了这个问题：[Apache HttpAsyncClient - NoSuchMethodError - URIUtils.extractHost](https://stackoverflow.com/questions/10335125/apache-httpasyncclient-nosuchmethoderror-uriutils-extracthost)但我还没有正确理解我必须做什么来解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T01:06:08.053

不幸的是，android 内部 httpcore 和外部 httpasyncclient 库存在不兼容问题。Android 依赖于旧版本的 httpcore。即使您使用较新版本的应用程序导出应用程序，由于相同的包，android 仍然使用内部应用程序。

所以可能的解决方案是：

*   使用 maven shade 插件将 httpasyncclient 的所有类及其依赖项重新定位到另一个包结构，并将其与您的应用程序一起导出。
*   使用等效库，例如[android-async-http](https://github.com/loopj/android-async-http)

# xml - 使用 XSLT 在字符串/子字符串中的每个实例之后进行选择

> ID：13665638
> 
> 赞同：3
> 
> 时间：2012-12-02T01:42:34.777
> 
> 标签：xml, xslt, dublin-core

我正在尝试编写一个 XSLT 样式表来处理都柏林核心 (XML) 编目记录并为每本书创建芝加哥、APA 和 MLA 版本的引文。除了 APA 的作者之外，我一切都做得很好。APA 的作者风格要求作者的姓氏 (done)、逗号、首字母 (done)、任何其他首字母 (我的卡住问题)。

我现在拥有的（示例直流元件如下）：

```
<xsl:value-of select="substring-before(dc:creator[1],',')" /><xsl:text>, </xsl:text><xsl:value-of select="substring(substring-after(dc:creator[1],' '),1,1)" /><xsl:for-each select="dc:creator[position()!=1]"><xsl:choose><xsl:when test="position()=last()"><xsl:text>., &amp; </xsl:text></xsl:when><xsl:otherwise>., </xsl:otherwise></xsl:choose><xsl:value-of select="substring-before(.,',')" /><xsl:text>, </xsl:text><xsl:value-of select="substring(substring-after(.,' '),1,1)" /><xsl:if test="position()=last()">.</xsl:if></xsl:for-each> 
```

对于以下格式的实例（out catalog 使用什么）：

```
<dc:creator>Friend, Natasha</dc:creator> 
```

这工作得很好并返回：`Friend, N.`

但对于

```
<dc:creator>Tolkien, J. R. R.</dc:creator> 
```

它返回：`Tolkien, J.`

在很多情况下，这并不重要，但在某些情况下，它确实需要返回作者的中间名首字母，例如`J.R.R. Tolkien`or `J.K. Rowling`。

因此，我需要能够返回出现在*每个*空格之后的字母，而不仅仅是空格的第一个实例。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T03:06:18.053

**I. 这是一个简单而自然的 XSLT 2.0 解决方案：**

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:xs="http://www.w3.org/2001/XMLSchema">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/*/*">
  <xsl:value-of separator=", " select=
  "substring-before(., ',')
   , for $n in tokenize(substring-after(., ','), '\s')[.]
        return
          substring($n, 1,1)
  "/>
  <xsl:text>&#xA;</xsl:text>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时：**

```
<t xmlns:dc="some:dc">
 <dc:creator >Friend, Natasha</dc:creator>

 <dc:creator>Tolkien, J. R. R.</dc:creator>
</t> 
```

**产生了想要的正确结果：**

```
Friend, N
Tolkien, J., R., R. 
```

* * *

**二、XSLT 1.0 解决方案**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/*/*/text()">
   <xsl:value-of select="substring-before(., ',')"/>

   <xsl:call-template name="replaceTokenDelims">
    <xsl:with-param name="pStr" select=
    "concat(normalize-space(substring-after(., ',')), ' ')"/>
    <xsl:with-param name="pToken" select="' '"/>
    <xsl:with-param name="pReplacement" select="', '"/>
   </xsl:call-template>
   <xsl:text>&#xA;</xsl:text>
 </xsl:template>

 <xsl:template name="replaceTokenDelims">
    <xsl:param name="pStr"/>
    <xsl:param name="pToken"/>
    <xsl:param name="pReplacement"/>

    <xsl:if test="$pStr">
     <xsl:value-of select="$pReplacement"/>
     <xsl:value-of select=
      "substring(substring-before($pStr, $pToken), 1, 1)"/>

     <xsl:call-template name="replaceTokenDelims">
      <xsl:with-param name="pStr"
           select="substring-after($pStr, $pToken)"/>
      <xsl:with-param name="pToken" select="$pToken"/>
      <xsl:with-param name="pReplacement" select="$pReplacement"/>
     </xsl:call-template>
    </xsl:if>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于同一个 XML 文档（如上）时，再次产生相同的正确结果**：

```
Friend, N
Tolkien, J., R., R. 
```

# python - 使用递归求解用户输入的表达式（计算器）

> ID：13665640
> 
> 赞同：1
> 
> 时间：2012-12-02T01:43:14.743
> 
> 标签：python, recursion, calculator

作为一项任务，我必须编写一个计算器来接受并解决用户输入，例如：

```
3 + 7 * (!3)^2 
```

我**必须用****递归**来解决这个练习。

```
def solve(exp):
     #Recursion if statement
     for op in exp:
       if op == "*":
           ...
       elif op == "/":
           ...
       ...
     return solve(exp) 
```

这就是我假设我的代码的样子，但我无法确定递归的停止条件是什么。
另外，我不确定这种循环是否有用，因为我将无法处理几种情况，例如`-3 +5`, 或处理括号的使用。

我认为我关于如何解决它的基本想法并不好，我想获得有关如何做到这一点的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T06:11:25.753

嗯，使用“标准”语法解析表达式，通过递归体面几乎是不可能的：

```
E = E + E | E - E | ... | VALUE 
```

这是因为调用`E`可能会产生无限递归，还有其他问题，例如运算符优先级以及关联性......

处理此类问题有两种众所周知的方法，实际上这两种方法适用于大多数问题。

1）使用自下而上的方法，一个例子是 shift-reduce 解析[http://en.wikipedia.org/wiki/Shift-reduce_parser](http://en.wikipedia.org/wiki/Shift-reduce_parser)这种方法以牺牲代码复杂性为代价来保持你的语法。

2）使用自上而下的方法，一个例子是递归的，但使用不同的语法，[http](http://en.wikipedia.org/wiki/LL_parser) ://en.wikipedia.org/wiki/LL_parser一个没有左递归这通常是通过修改原始语法并更新所有删除任何直接左递归调用的规则。这会修改语法（如果可能）使其更长，但代码更简单。

由于您要求该方法是递归的，因此第二种方法可能是更好的方法。

我们首先必须定义这个新语法并为每个规则创建一个新函数。

你举了这个例子： `3 + 7 * (!3)^2`所以我已经按照优先级降序推导了以下运算符。

```
operators: +, -, *, /, ^, -, !
values: 0,1,2,3 ... 
```

这是一个简单的、众所周知的 LL(1) 语法，它具有优先级...

```
<arith_expr>  : <term> {+ <term>}
              | <term> {- <term>}

<term>        : <power> {* <power>}
              | <power> {/ <power>}

<power>       : <factor> <exponent>
<exponent>    : ^ <factor> <exponent> | ''

<factor>      | NUMERIC_VALUE
              | - <factor>
              | ! <factor>
              | ( <arith_expr> ) 
```

它有些相当于以前的语法，但没有直接的左递归调用，将语法转换为 LL(*) 语法的过程有点机械......

我通常不会给出任务代码，特别是简单的代码，但这只是为了让你开始，你应该能够实现其余的。

因为空白通常是被忽略的，所以我们将输入量化为一组适用于我们语法的每个规则的值，排除任何空白，除非我们的语法另有规定，这个过程称为分词化，每个值称为令牌，而为此使用正则表达式很常见，我更喜欢手动方法以提高可读性...... Tokinization 非常简单......

```
"""
`{}` means 0 or more  
<arith_expr>  : <term> {+ <term>}
              | <term> {- <term>}

<term>        : <factor> {* <factor>}

<factor>      | NUMERIC_VALUE
              | - <factor>
              | ( <arith_expr> )
"""

import string

def evaluate(str_value):

    def tokenize(value):
        all_symbols = set(('+', '-', '*',)) | set(('(', ')'))
        white_space = set((' ', '\n', '\t'))
        tokens = []
        index = 0
        while index < len(value):
            current_char = value[index]
            if current_char in white_space:
                index += 1
                continue 
            if current_char in all_symbols:
                tokens.append(current_char)
                index += 1
                continue
            if (current_char in string.digits) or (current_char == '.'):
                numeric_value = current_char
                index += 1                
                while (index < len(value)) and ((value[index] in string.digits) or (value[index] == '.')):
                    if (values[index] == '.') and ('.' in numeric_value):
                        raise Exception('Multiple decimal points detected while tokenizing numeric value!')
                    numeric_value.append(value[index])
                    index += 1
                tokens.append(float(numeric_value) if '.' in numeric_value else int(numeric_value))
                continue
            raise Exception('Unable to tokenize symbol %s' % value[index])
        return tokens

    def factor(tokens):
        '''
        <factor>      | NUMERIC_VALUE
                      | - <factor>
                      | ( <arith_expr> )
        '''        
        if not tokens:
            return None
        if type(tokens[0]) in set((int, float)): # NUMERIC_VALUE
            return tokens.pop(0)
        if tokens[0] == '-':                     # - <factor>
            tokens.pop(0)
            return -1 * factor(tokens)  
        if tokens[0] == '(':                     # ( <arith_expr> )
            tokens.pop(0)
            value = arith_expr(tokens)
            assert tokens.pop(0) == ')'
            return value

    def term(tokens):
        '''
        <term>        : <factor> {* <factor>}

        '''
        left_value = factor(tokens)
        operators = set(('*',))
        while tokens and (tokens[0] in operators):  # {* <factor>}
            op = tokens.pop(0)
            right_value = factor(tokens)
            left_value *= right_value
        return left_value

    def arith_expr(tokens):
        '''
        <arith_expr>  : <term> {+ <term>}
                      | <term> {- <term>}
        '''

        left_value = term(tokens)
        operators = set(('+', '-'))
        while tokens and (tokens[0] in operators):
            op = tokens.pop(0)
            right_value = term(tokens)
            if op == '+':
                left_value += right_value
            else:
                left_value -= right_value
        return left_value 

    return arith_expr(tokenize(str_value)) 
```

**注意：这还没有经过测试！**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T01:55:30.880

两条评论：

1.  您当前的解决方案不会返回任何有趣的东西，实际上它似乎无限循环，因为`exp`您传递到递归的下一阶段与最初传递的内容没有变化，进一步没有迹象表明任何一个循环通过递归实际上对最终解决方案有任何影响。
2.  停止条件应该是一个空表达式，也就是说，如果您将表达式存储为字符串，它应该是 ""。

# string - 如何将 String^ 转换为 char 数组

> ID：13665649
> 
> 赞同：2
> 
> 时间：2012-12-02T01:45:28.937
> 
> 标签：string, visual-c++, c++-cli, type-conversion

> **可能重复：**
> [需要将 String^ 转换为 char *](https://stackoverflow.com/questions/2178023/need-to-convert-string-to-char)

我一直在寻找这个解决方案，但我找不到任何具体的东西。我在 Visual Studio C++、Windows 窗体应用程序中工作。我需要将`String^`值转换为 char 数组。我已经存储了来自`TextBox`in 的值`String^`：

```
String^ target_str = targetTextBox->Text;

// lets say that input is "Need this string" 
```

我需要转换它`String^`并获得与此类似的输出：

```
char target[] = "Need this string"; 
```

如果它被定义为`char target[]`有效，但我想从`TextBox`.

我尝试过编组，但没有奏效。有什么解决方案如何做到这一点？

我已经找到了如何转换`std::string`为`char`数组，所以另一种解决方法是转换`String^`为，`std::string`但我也遇到了问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T03:18:06.373

最好的办法是遵循[这个问题](https://stackoverflow.com/questions/2178023/need-to-convert-string-to-char)中提出的示例。

这是一些示例代码：

```
String^ test = L"I am a .Net string of type System::String";
IntPtr ptrToNativeString = Marshal::StringToHGlobalAnsi(test);
char* nativeString = static_cast<char*>(ptrToNativeString.ToPointer()); 
```

这是因为 .Net 字符串显然是一个 GC 处理的对象，它是公共语言运行时的一部分，您需要通过使用 InteropServices 边界来跨越 CLI 边界。祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T14:30:58.577

在 C/C++ 中， char[] 和 char* 之间存在等价关系：在运行时 char[] 只不过是指向数组第一个元素的 char* 指针。

因此，您可以在需要 char[] 的地方使用 char* ：

```
#include <iostream>
using namespace System;
using namespace System::Runtime::InteropServices;

void display(char s[])
{
    std::cout << s << std::endl;
}

int main()
{
    String^ test = L"I am a .Net string of type System::String";
    IntPtr ptrToNativeString = Marshal::StringToHGlobalAnsi(test);
    char* nativeString = static_cast<char*>(ptrToNativeString.ToPointer());
    display(nativeString);
} 
```

所以我认为你可以接受莫里斯的回答:)

# java - Java - 逐字符文本文件读入二维数组

> ID：13665653
> 
> 赞同：2
> 
> 时间：2012-12-02T01:46:11.580
> 
> 标签：java, arrays, file, multidimensional-array, bufferedreader

我正在尝试返回数组“seats”，它本质上应该从文本文件中返回数据 - 15x30 网格的“#”。我已经尝试了很多东西，但我感到很沮丧，因为我对 java 的经验很少。我的代码可以编译，但在调用该方法时无法正确打印。

如果有人可以帮助修复构造函数或方法，我将不胜感激......如果有任何方法可以避免使用非常复杂的代码，我也将不胜感激。并解释！谢谢！

```
import java.io.IOException;
import java.io.BufferedReader;
import java.io.FileReader;
import java.io.FileNotFoundException;
import java.util.*;

public class TicketManager
{
    private static int NUMROWS = 15;
    private static int NUMCOLS = 30;
    private char[][] seats = new char[NUMROWS][NUMCOLS];
    private double[] price = new double[NUMROWS];
    private int seatsSold;
    private int totalRevenue;

    public TicketManager()
    {
        try
        {
            BufferedReader br = new BufferedReader(new FileReader("seatAvailability.txt"));
            String line = br.readLine();    

            while (line != null)
            {
               for (int i = 0; i < 15; i++)
               {
                   seats[i] = line.toCharArray();
               }
            }
        }
        catch(IOException exception)
        {
            System.out.println("Error processing file: " + exception);
        }
    }

    public String returnSeats()
    {
        String result = "";
        for (int i =0; i <seats.length; i++)
        {
            for (int j = 0; j < seats.length; j++)
            {
                result += seats[i][j] + " ";
            }
            System.out.println("");
        }
        return result;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T01:51:43.373

循环中的小问题。更新了下面的代码部分：

```
 public TicketManager(){
   try{
    BufferedReader br = new BufferedReader(new FileReader("seatAvailability.txt"));
       for (int i = 0; i < 15; i++)
        String line = br.readLine();    
         seats[i] = line.toCharArray();
       }
   }catch(IOException exception){
       System.out.println("Error processing file: " + exception);
   }
 } 
```

它将读取 15 行（行）的输入。确保`30`在每一行中输入准确的字符。**也不要在输入行字符中使用间距，**例如，每行的输入应该是`X0000xx00xx0xx0xx000xx0xxx0x00`

在您的`returnSeats`方法中，使用`seats[0].length`or`seats[i].length`在内循环和 StringBuilder 中：

```
public String returnSeats(){
    StringBuilder result = new StringBuilder();
    for (int i =0; i <seats.length; i++){
        for (int j = 0; j < seats[i].length; j++){
            //append seat character in the result string
            result.append(seats[i][j]);
        }
        //append new line character in the string in between
        result.append(System.lineSeparator());
    }
    return result.toString();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T01:52:07.823

你有的地方`for (int j = 0; j < seats.length; j++)`，你就需要有`for (int j = 0; j < seats[i].length; j++)`。

这与多维数组的工作方式有关。它们是数组的数组。所以当你写的时候`seats.length`，你是在问有多少行。呼叫`seats[i].length`询问有多少成员排成一排`i`。

# jquery - jQuery .click() .animate() 不工作

> ID：13665655
> 
> 赞同：0
> 
> 时间：2012-12-02T01:47:10.617
> 
> 标签：jquery, click, jquery-animate

$('.transparent-close').click(function(){ ...}); 内部调用的事件 似乎没有工作。可能是因为它在另一个 .click() 事件中吗？

```
$('#featured-top').click(function(){
    $(this).animate({'top':'-318px'}, 600, 'easeOutBounce');
    $('#featured-top-container').animate({'margin':'260px 0 0 117px'}, 600, 'easeOutBounce');
    $('#wrap').animate({'margin-top':'365px'}, 600, 'easeOutBounce');

    //Add transparent background for click out
    $(document.body).append('<div class="transparent-close"></div>');
    $('.transparent-close').click(function(){
        $('#featured-top').animate({'top':'-318px'}, 600, 'easeOutBounce');
        $('#featured-top-container').animate({'margin':'260px 0 0 117px'}, 600, 'easeOutBounce');
        $('#wrap').animate({'margin-top':'365px'}, 600, 'easeOutBounce');
        $(this).remove();
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T02:26:16.460

我会使用：

```
$('body').append(
    $('<div></div>')
        .addClass('transparent-close')
        .on('click',function(){
            //...
        });
); 
```

即使我不知道确切原因，我在使用 click 函数作为事件侦听器时也遇到了问题。

# ios - UIStepper 递减和递增图像的大小

> ID：13665656
> 
> 赞同：2
> 
> 时间：2012-12-02T01:47:25.100
> 
> 标签：ios, ios6, uistepper

在 iOS 6 中，您现在可以使用 setIncrementImage: 和 setDecrementImage: 方法选择自己的增量和减量图像。（在[RayWenderlich](http://www.raywenderlich.com/21703/user-interface-customization-in-ios-6)上查看一个超级快速的示例）。

但是我不知道这些图像应该有什么尺寸。我尝试了 44x44 点（即正常和视网膜的 44x44 和 88x88 像素），但这会使图像拉伸。

UIStepper 控件本身具有 97 点宽度和 27 点高度。但是，每个图像都不会覆盖整个半区域（我尝试过使用全黑图像）。

有谁知道增量和减量图像应该是的确切尺寸？或者如何在 iOS 模拟器中测量点/像素距离？

谢谢你。

**更新**

针对 ACB 的评论：

使用以下获取默认图像大小..

```
NSLog([NSString stringWithFormat:@"Decrement image size: width: %f, height: %f", [self.myStepper decrementImageForState:UIControlStateNormal].size.width, [self.myStepper decrementImageForState:UIControlStateNormal].size.height]);
NSLog([NSString stringWithFormat:@"Increment image size: width: %f, height: %f", [self.myStepper incrementImageForState:UIControlStateNormal].size.width, [self.myStepper incrementImageForState:UIControlStateNormal].size.height]); 
```

**显示默认递减符号为 13x4 点，默认递增符号为 13x14 点。**

使用 13x4 点图像作为自定义递减符号的快速检查按预期工作（即新符号显示的大小与原始符号相同）。这使我得出结论，使用的自定义图像保留其原始大小，除非有必要缩小它们 - 在此期间它们会变形。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T08:20:50.960

添加我的评论作为答案，因为这有助于解决问题。

在您的项目中，检查`- (UIImage *)decrementImageForState:(UIControlState)state`由`UIStepper`. 那应该给出默认值的大小。类似的东西`[stepper decrementImageForState:UIControlStateNormal].size`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-11T05:10:29.497

您可以更新 UIStepper 大小，从而设置任何大小增量和减量图像。

使用以下方法设置背景图像，步进器将使用背景大小自行绘制：

```
- (void)setBackgroundImage:(UIImage*)image forState:(UIControlState)state 
```

**例子**

```
 [self.stepper1 setIncrementImage:[UIImage imageNamed:@"plusIcon1.png"] forState:UIControlStateNormal];
    [self.stepper1 setDecrementImage:[UIImage imageNamed:@"minusIcon1.png"] forState:UIControlStateNormal];

    [self.stepper1 setBackgroundImage:[UIImage imageNamed:@"stepperBkg1.png"] forState:UIControlStateNormal];
    [self.stepper1 setBackgroundImage:[UIImage imageNamed:@"stepperBkgHighlighted1.png"] forState:UIControlStateHighlighted];
    [self.stepper1 setBackgroundImage:[UIImage imageNamed:@"stepperBkgDisabled1.png"] forState:UIControlStateDisabled]; 
```

与右侧未修改的步进器相比，这在左侧产生以下结果： ![在此处输入图像描述](../Images/40f6f6f0641ea7dac54042e8f2d59544.png)

stepperBkg1@2x.png:

![在此处输入图像描述](../Images/c2ee5dd7327b4901079da1c3a5c4a27c.png)

stepperBkgHighlighted1@2x.png:

![在此处输入图像描述](../Images/29fd93d59bbea4902c1eb22667c1d0fb.png)

# three.js - 自定义阴影颜色

> ID：13665657
> 
> 赞同：1
> 
> 时间：2012-12-02T01:47:32.900
> 
> 标签：three.js

是否可以为阴影渲染指定黑色以外的其他颜色？我想允许用户同时尝试浅色和阴影颜色，例如。在光/影中使用互补色。

这是我设置其他阴影设置的方法，效果很好。但我发现除了黑色/不同深浅的灰色之外没有其他方法可以制作阴影。

```
this._sun_light = new THREE.DirectionalLight(0xffffff, 1);
...
this._sun_light.intensity = this.getParameter("sun_intensity");
this._sun_light.color.setHex(this.getParameterColorHex("sun_color"));
...
this._sun_light.shadowDarkness = this.getParameter("sun_shadow_intensity");
... 
```

我在 three.js\src\renderers\WebGLShaders.js 中找到了一些对 shadowColor 变量的引用，但是理解该文件超出了我的思维能力，并且找不到配置它的方法。考虑到阴影映射技术，这甚至可能吗？

我能想到的唯一解决方法是让来自相反方向的其他光线照亮阴影区域，并被阴影区域外的主光抵消。但是当我开始添加更多的灯光时，这可能很快就会变得一团糟，如果它确实有效的话......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T05:42:22.170

shadowColor 变量刚开始时设置为 1，如果启用了阴影，它会根据位置变得越来越暗。这个值最后乘以最终颜色值，所以如果它仍然是 1，则没有任何变化，但如果它小于 1，它会使最终颜色变暗。所以没有办法设置阴影的颜色。

# html - 如何使用引导程序将模式带到页面的前面？

> ID：13665658
> 
> 赞同：0
> 
> 时间：2012-12-02T01:47:34.050
> 
> 标签：html, css, twitter-bootstrap, modal-dialog

我正在尝试使用引导程序实现模式。当我单击按钮时，屏幕会淡出并出现模式，但它出现在图像后面并且用户无法阅读。如何使模态向前发展？

```
<div class ="container-fluid">
<div class = "row-fluid">

    <div class = "span2">
        <!-- Modal -->
        <div class="modal hide fade" id="myModal">
          <div class="modal-header">
            <a class="close" data-dismiss="modal">×</a>
            <h3>Modal header</h3>
          </div>
          <div class="modal-body">
            <p>One fine body…&lt;/p>
          </div>
          <div class="modal-footer">
            <a href="#" class="btn">Close</a>
            <a href="#" class="btn btn-primary">Save changes</a>
          </div>
        </div>

        <a data-toggle="modal" href="#myModal" class="btn btn-primary">Launch demo modal</a>
    </div>

    <div class = "span8">       
        #a lot of images in this div
    </div>

</div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T04:58:57.327

弄清楚了。我不能在页面上的固定元素中使用模式。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-02T01:58:20.720

你的代码很好用；您需要包含`bootstrap.css`和引导`modal.js`库。

现场[**演示**](http://jsfiddle.net/z9yAv/1/)。

# wordpress-theming - 显示 Wordpress 循环，第一项格式不同？

> ID：13665664
> 
> 赞同：0
> 
> 时间：2012-12-02T01:48:34.933
> 
> 标签：wordpress-theming, wordpress

我有一系列自定义帖子类型的帖子。他们每个人都有一张特色图片（缩略图）和一段摘录。

我想在主页上显示 4 个项目，第一个项目的格式与其他 3 个不同，例如在附加的图像中。这是怎么做的？

![在此处输入图像描述](../Images/481e3d3f968fea9e6398dba11e6bbb6b.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-02T03:08:15.400

您可以为此使用计数器。请参阅下面的示例

```
 <?php
  $inc = 1;
  $the_query = new WP_Query();
  $the_query->query("posts_per_page=4");
  if ($the_query->have_posts()) : 
  while($the_query->have_posts()) : $the_query->the_post();
  if($inc == 1){ 
   //first post here
   //do stuffs here
  }
 else{
  //the rest of the posts
 }

 $inc++; //counter
 endwhile; 
 endif; 
 wp_reset_postdata();
 ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-31T11:34:36.633

全局`$wp_query`包含有关当前查询的所有内容，包括参数、结果、结果内容和查询本身。

您要检查`$wp_query->current_post`，如果它是 0，那么它是循环的第一个帖子。

```
if ( $wp_query->current_post === 0 ) {
    // first post
} else {
    // the rest
} 
```

但是，如果您有很多帖子和分页，那么每个页面的第一个帖子的索引为 0。

如果您只想定位第一页的第一篇文章，那么：

```
if ( $wp_query->current_post === 0 && $wp_query->query_vars['paged'] === 0 ) {
    // first post in first page only
} else {
    // the rest
} 
```

单线将是：

```
$class = ( $wp_query->current_post === 0 ) ? ' first_item' : ''; 
```

然后添加`$class`到您的项目包装器中，以便您可以为 CSS 中的第一个项目设置样式。

# c# - 为什么使用局部视图时 MVC 不绑定？

> ID：13665665
> 
> 赞同：0
> 
> 时间：2012-12-02T01:48:51.610
> 
> 标签：c#, asp.net-mvc, partial

有人能告诉我在使用局部视图时如何让 MVC 绑定到视图模型中的视图模型吗？

```
 public class HomeController : Controller
    {
        //
        // GET: /Home/

        [HttpGet]
        public ActionResult Index()
        {
            AVm a = new AVm();
            BVm b = new BVm();
            a.BVm = b;

            return View(a);
        }

        [HttpPost]
        public ActionResult Index(AVm vm)
        {
            string name = vm.BVm.Name; // will crash BVm == null

            return View(vm);
        }
    } 
```

// 索引视图

```
@model MvcApplication4.Models.AVm

@{
    ViewBag.Title = "Index";
}

<h2>Index</h2>

@using (Html.BeginForm("Index","Home",FormMethod.Post))
{
    <text>Id:</text> @Html.TextBoxFor(x => x.Id)
    @Html.Partial("SharedView", Model.BVm)

    <input type="submit" value="submit" />
} 
```

// 共享视图

```
@model MvcApplication4.Models.BVm

<text>Name:</text> @Html.TextBoxFor(x => x.Name)

 Object reference not set to an instance of an object.
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.

Exception Details: System.NullReferenceException: Object reference not set to an instance of an object.

Source Error:

Line 26:         public ActionResult Index(AVm vm)
Line 27:         {
Line 28:             string name = vm.BVm.Name; // will crash BVm == null
Line 29: 
Line 30: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T06:18:07.380

问题在于，在您的部分模型中，模型`BVm`不知道它是 viewmodel 上的属性`AVm`。所以当你做类似的事情时，`@Html.TextBoxFor(x => x.Name)`它只会产生类似的东西

```
<input type="text" name="Name" id="Name" value="" /> 
```

当你真正需要的是

```
<input type="text" name="BVm.Name" id="Name" value="" /> 
```

您可以像这里建议的那样自己生成输入，也可以尝试以下操作：

```
public ActionResult Index(AVm vm, BVm bvm) 
```

假设没有冲突的属性名称。

# ruby - 录像机不录制磁带

> ID：13665667
> 
> 赞同：11
> 
> 时间：2012-12-02T01:49:16.310
> 
> 标签：ruby, vcr

我有一个非常简单的`module`我正在使用 VCR gem 使用 Ruby 进行测试。

我已经根据文档配置了 VCR，但似乎无法在磁带目录中录制磁带。为了以防万一，我什至将盒式磁带目录的权限更改为 777。真正奇怪的是，我已经完全删除了盒式磁带目录，运行规范，然后创建了一个新的盒式磁带目录。

我正在使用`Typhoeus`0.4.2 和`Hydra`. 我目前无法升级 Typhoeus。

相关代码：

```
require 'rspec'                                                                     
require 'vcr'                                                                       
require_relative File.join("..", "crawl_handler")                                   

VCR.configure do |c|                                                                
  c.cassette_library_dir = "spec/vcr_cassettes"                                     
  c.hook_into :fakeweb                                                              
  c.allow_http_connections_when_no_cassette = false                                 
end

... # => other describe statements
 describe "#handle_http_response" do                                               
    before(:each) do                                                                
      get_some_response = lambda {                                                  
        # NOTE: typhoeus v. 0.5 is MUCH less setup :)                               
        VCR.use_cassette("bme") do                                                  
          request = Typhoeus::Request.new("www.bing.com")                           
          hydra = Typhoeus::Hydra.new                                               
          hydra.queue(request)                                                      
          hydra.run                                                                 
          response = request.response                                               
        end                                                                         
      }                                                                             
      @message = @subject.handle_http_response("www.bing.com", get_some_response.call)    
    end                                                                             

    it "returns a message hash" do                                                  
      @message.should be_kind_of Hash                                               
    end  

    ... 
```

我不知道为什么不写磁带。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-02T02:53:03.810

问题是您正在用作 HTTP 客户端，`Typhoeus`但连接到. 如果您对其进行配置，VCR 可以直接挂接到 Typhoeus（因为它为此提供了良好的公共 API）：`FakeWeb``Net::HTTP`

```
VCR.configure do |vcr|
  vcr.hook_into :typhoeus
end 
```

[`hook_into`文档](https://www.relishapp.com/vcr/vcr/v/2-3-0/docs/configuration/hook-into)列出了所有选项以及哪些钩子适用于哪些 HTTP 客户端。如果您对改进文档以防止其他人产生这种混淆有任何建议，请告诉我。

# c++ - Windows 7 中的计时器

> ID：13665668
> 
> 赞同：0
> 
> 时间：2012-12-02T01:49:18.213
> 
> 标签：c++, windows, visual-c++, windows-7, timer

我需要一个 Windows 7 中的计时器，它在时间间隔过后调用一个函数并且不会阻止它所面临的威胁。换句话说，我不能使用`delay()`.

我一直在尝试使用`IMFTimer`以下代码生成回调：

```
IMFTimer *playbackEndTimer;

HRESULT hr = CoCreateInstance(__uuidof(IMFTimer), NULL, CLSCTX_ALL, IID_PPV_ARGS(&playbackEndTimer)); 
```

`CoCreateInstance`返回“类未注册”。看起来我也需要`IMFAsyncCallback`用作回调，但我无法从文档中弄清楚如何做到这一点。

有没有更好的办法？有人可以指出一些工作源代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T02:10:23.313

OK, that was a somewhat stupid question. I should have used the old SetTimer() without trying to use IMFTimer::SetTimer(). Problem solved.

# c - 使用 strtok、strlen、malloc 和 fgets 根据内容动态分配数组。C程序

> ID：13665669
> 
> 赞同：-1
> 
> 时间：2012-12-02T01:49:23.980
> 
> 标签：c, fgets

我必须阅读带有学生名字和姓氏的文本文件。根据扭曲的程序要求，名字和姓氏是字符指针。使用 fgets 读取每一行。因此，我在数组结构中有变量 char *last_name, char *first_name。

例如：

比尔·克林顿

威廉，盖茨

我需要在运行时通过使用 strlen 和 strtok 指针来分配它们的大小......

问题是，如果我使用 strtok 和 strlen 来找出名称的长度，原来的 data_line 已经被分解了！有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T02:15:29.780

You've got all of the primary functions you'll need already named, so you're well on your way.

It makes sense that the names are char pointers. There is no string type in C, just arrays of characters. Also--and this is confusing--arrays and pointers are related in C. They're not the same, but they act the same in a number of cases. Consider that a function requiring a char pointer argument can accept either a char pointer or an array name (without the index). Also, notice that an array with an index is really just de-referencing a pointer to a certain address with the index indicating the offset.

So if you want a dynamically sized string, you're going to have to declare it as a char pointer and allocate memory for it dynamically (i.e., malloc). In your case, each first and last name varies in size--and you have one pointer for each--so you'll want one malloc for each of those. Using strlen() is still appropriate, as is using strtok() with multiple separator characters.

You may want to look at an example of strtok()--it can (and will) return each token one at a time. [This link](https://stackoverflow.com/questions/3889992/please-help-in-strtok) has a good example between the question and explanatory answers.

Edit: To be more specific, here is the core of what you're asking in code:

Getting a token:

```
token = strtok(data_line, sep);  // First token on data_line 
```

Or:

```
token = strtok(NULL, sep); // Subsequent tokens on data_line 
```

Then, example of allocating memory and storing the first name (last name is entirely analogous):

```
person[i].first_name = malloc(strlen(token) + 1);
strcpy(person[i].first_name, token); 
```

The value of one added to strlen() result is to make space for the null terminator.

Edit 2: Rather than using malloc() and strcpy(), [strdup()](https://stackoverflow.com/questions/252782/strdup-what-does-it-do-in-c) accomplishes both and would be preferable.

# css - 如何使用 CSS 为框的所有 4 个角添加阴影？

> ID：13665670
> 
> 赞同：2
> 
> 时间：2012-12-02T01:49:42.627
> 
> 标签：css, dropshadow

我正在尝试仅使用 CSS 将阴影应用于框的所有四个角，因此看起来所有 4 个角都刚刚从页面上抬起，就像在这个网站上一样：http: [//www.leighannphotography.com/#home /](http://www.leighannphotography.com/#home/)

到目前为止，我只知道如何使用 before 和 after 伪元素和类在 2 个角上添加阴影。有没有办法用 CSS 为所有四个角添加阴影？我不想为阴影使用图像，因为页面上已经有一个滑块，我不希望页面加载速度变慢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T08:48:22.053

你可以在这里查看我的工作

[http://codepen.io/ImBobby/pen/voEfG](http://codepen.io/ImBobby/pen/voEfG)

所以基本上阴影本身已经消耗了 100px 的高度。因此，请确保您将放入的内容的`<div class="content">`最小高度约为 110 像素

# xml - XML 是一种编程语言吗？

> ID：13665671
> 
> 赞同：20
> 
> 时间：2012-12-02T01:49:52.970
> 
> 标签：xml

我经常听到人们在列出他们知道的编程语言时提到 XML。

但它甚至是一种编程语言吗？

我将 XML 视为类似于 JSON 的“数据集”。

此外，我见过一些需要 XML 知识的公司，但是……有什么要了解的？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-07-28T19:38:26.503

# 编程语言？

首先，**XML**是一种表示数据的格式。它最初是为这些数据设计的，本质上是文本文档或消息，但没有什么能阻止您表示您希望的任何数据，包括程序。我想到了至少三个用**XML表示的程序的大示例：**

1.  **XSLT**是一种[图灵完备](http://en.wikipedia.org/wiki/Turing_completeness)的语言，其唯一的标准格式是 XML，其基本目的是数据转换。
2.  **ANT**是一个任务管理器，主要用于编译管理，其任务是用 XML 描述的。
3.  **GCC-XML**是 GCC 可以用来输出其源代码解析结果的一种格式。

在更深奥的注释中，您可以引用*o:XML*，一种成熟的**XML**编程语言。

因此，由于任何**XML**、**DTD**或 Schema 在语义上扩展了**XML**本身，您可以从技术上说 XML 本身，通过它的一些扩展，**是**一种编程语言。

# 有很多要知道的吗？

其次，XML 是一个巨大的规范星云，大多数人只是勉强接触到表面。大多数人甚至都不会想象 XML 本身的极端情况，更不用说 XML 命名空间、XML 模式、XML 信息集、XQuery、XPath、XSLT、XSL-FO、XML 规范化、XML 签名、高效 XML 交换、XML 链接中的内容了， ETC。

所以，是的，我想说有很多要知道的...

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-02T01:52:56.637

XML 不是一种编程语言。

有些编程语言使用 XML 语法，特别是 XSL。

然而，有很多关于 XML 的知识需要学习。它的语法规则、名称空间、DTD 和模式如何工作等。此外，使用 XML 的程序员需要如何通过 DOM 和 XPath 与文档交互，即使他们使用的语言本身不是基于 XML 的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-02T01:55:05.950

XML 不再是一种编程语言，而不是 HTML，但是很多人也会将 HTML 列为一种编程语言，所以这并不奇怪。

> 那里有什么要知道的？

XML 有其独特的怪癖，尽管这些库非常强大，但知道如何使用这些库并知道如何处理库无法处理的奇怪事情非常重要。

例如，下面的代码会给你一个“unexpected token at 0 : '&'”错误，即使任何有 XML 经验的人都知道问题到底是什么。如果您对 XML 一无所知，那它看起来就像是垃圾。

```
&lt;Root&gt;
    &lt;Leaf /&gt;
&lt;/Root&gt; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T16:51:39.117

XML 不是一种编程语言。

有多少要知道？只需浏览 StackOverflow 上标记为 XML 问题的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-02T01:54:36.107

不。

它没有定义表达计算机程序的方法。

它是一种标记语言，定义了表达数据的方式。当你说它与 JSON“相似”时，你是对的——它是一个等价的东西。

人们对 XML 说了很多话，通常，当您看到一家公司需要“XML 知识”时，这只是因为他们是 2000 年代中期管理界可笑的 XML“热潮”的一部分，甚至还没有从那开始*。*您不能真正“了解”太多关于 XML 的知识，而且它不适用于管理层坚持 XML 是工作的大量事情，因为它是一个流行词。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-08-21T14:14:51.933

XML 不是一种编程语言。

我同意维基百科的观点：“编程语言是编写程序的符号，是计算或算法的规范。”

有一些编程语言的语法是 XML，然而，这并没有使 XML 本身成为一种编程语言。这就像说纯文本是一种编程语言，因为有些编程语言可以用纯文本表达。

换句话说，XML 本身不提供“计算或算法的规范”。

# sqlalchemy - 在创建任何表之前如何在 SQLAlchemy 中触发 DDL 语句？

> ID：13665674
> 
> 赞同：0
> 
> 时间：2012-12-02T01:50:20.100
> 
> 标签：sqlalchemy

SQLAlchemy 的文档提供了关于如何在使用如下代码创建特定表之前执行 DDL 语句的非常清晰的指示

```
DDL(statement).execute_at('before-create', table) 
```

但是，如果我想确保在创建多个表之前执行该语句怎么办？在最简单的情况下，假设我想确保在创建任何表之前执行该语句。我可以让它们在模型基类的元数据的创建前执行，像这样吗？

```
DDL(statement).execute_at('before-create', Base.metadata) 
```

（我担心这里的“创建前”可能意味着每次创建表时都会执行该语句。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T01:10:53.253

简单的答案，“是的”，就像你在那里指出的那样。该事件适用于 Table 和 MetaData。

但是，如果您至少使用 0.7，则应该使用新的事件格式。请参阅[http://docs.sqlalchemy.org/en/latest/core/events.html#sqlalchemy.events.DDLEvents](http://docs.sqlalchemy.org/en/latest/core/events.html#sqlalchemy.events.DDLEvents)

# css - 响应式网页设计 - 在桌面上不显示

> ID：13665675
> 
> 赞同：1
> 
> 时间：2012-12-02T01:50:23.500
> 
> 标签：css, responsive-design

我正在尝试构建一个响应式网页设计，我几乎已经完成了。唯一的问题是导航菜单。我创建了两个版本的导航菜单——一个用于桌面，另一个用于移动。我尝试在 CSS 的桌面部分中为移动版导航执行“display:none”，但如果我这样做，菜单将不会在移动版中显示。解决此问题的解决方案是什么？您可以在此处查看该网站：[http ://rachelchaikof.com/testing/](http://rachelchaikof.com/testing/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T03:31:28.047

你想沿着这条线添加一些CSS......

```
@media screen and (max-width:400px) {
#mobile-nav {
display:none;
}
} 
```

如果屏幕尺寸小于 400 像素，这将隐藏移动导航菜单。您可能希望根据您正在测试的设备来使用最大宽度。

或者，您可以使用此 PHP 函数来检查它是否是移动用户代理，然后将移动菜单包装在 PHP if 语句中。 [http://erikastokes.com/php/how-to-test-if-a-browser-is-mobile.php](http://erikastokes.com/php/how-to-test-if-a-browser-is-mobile.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-04T13:15:13.820

如果你在媒体查询之外写“display:none”，它就不会出现。这是我在我的一个项目中遇到的

我使用以下方法修复了它：

```
 @media screen and (min-width:650px) { /*hide mobile menu for desktop*/
                .footer #exfootmenu{
                    display:none;
                }
            }       

        @media screen and (max-width:650px) {/*show mobile menu for mobile devices*/
                .footer #exfootmenu{
                    display:block;
                }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T23:45:06.860

你能不能创建一个最小宽度：700px（或任何你的移动断点）的媒体查询，并且在这个媒体查询中你可以显示：none！important #mobile-nav？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-19T19:05:03.490

使用带有媒体查询的 html 5 和 CSS 的样板（向后兼容性），我已经能够得到 display:none; 在莫兹工作。FireFox 但无法让它在 Safari、Chrome 中运行，甚至不会在 IE 中尝试它！您应该使用媒体查询，响应式=移动优先。您的移动导航属性应设置为 display: block; 或内联块；然后当您点击屏幕捕捉点时，将属性设置为 display:none; 这将在 Firefox 中工作。对其他人的任何建议...请告诉..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-03T02:36:24.533

通常，为了获得您想要的效果，您可以在 CSS 样式表中为移动视图创建一个媒体查询，然后在该部分中，您可以`nav`以不同的方式为桌面视图中的相同元素设置样式。

我今天晚上只在 iPad 上查看了您的网站，所以我没有深入研究您的代码。对不起，如果这太明显了。

网站内容很棒！我有一个在芝加哥大学的朋友，他对植入物跨文化的社会方面进行了大量研究。令人惊讶的是，我们在美国听到的很少。

# jsp - 我可以将 trimDirectiveWhitespace 默认设置为 true 吗？

> ID：13665677
> 
> 赞同：3
> 
> 时间：2012-12-02T01:50:50.503
> 
> 标签：jsp

如果我想使用 JSP 创建可消费的 XML，它需要从第 1 行开始，否则会大声喊叫。显然，一些 XML 解析器无法处理文档顶部的几个空行。

为了解决这个问题，我找到了一个方便的花花公子指令，

```
<%@page trimDirectiveWhitespaces="true"%> 
```

但是，我必须将它添加到每一页。有人忘记将其放在其中一页中并拉出头发四天试图修复他们的服务只是时间问题。有没有办法可以使这个默认值？

# php - 用php检查元素的父元素是否有li标签

> ID：13665678
> 
> 赞同：1
> 
> 时间：2012-12-02T01:51:11.767
> 
> 标签：php, html-lists, parent, simple-html-dom

基本上，我想检查链接的父级是否是`<li>`元素。

我正在使用 Simple DOM Parser 库。我得到这样的链接（$brokenlink 是一个 URL）：

```
$html = file_get_html($file);
$matches = $html->find("a[href=$brokenlink]"); 
```

然后我遍历 $matches

```
foreach ($matches as $value) {

} 
```

我的逻辑是：

如果 $value 的父级不是 'li'，请执行以下操作：

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T02:02:55.870

`DOMXPath`使用and遍历锚的 NodeList 将是微不足道的`DOMDocument`：

```
// Create a new DOMDocument, load up our HTML
$doc = new DOMDocument();
$doc->loadHTML($html);

// Create a new DOMXPath object, and get our links
$xpath = new DOMXPath($doc);
$links = $xpath->query("//a[not(parent::li)][@href='$brokenURL']");

// Cycle over each anchor, check parentNode's nodeName
foreach ($links as $link) {
    echo "'{$link->nodeValue}' is not the child of a list item.";
} 
```

演示：[http ://codepad.org/UCtR49p4](http://codepad.org/UCtR49p4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T02:09:46.967

According to the [simplehtml manual](http://simplehtmldom.sourceforge.net/manual.htm), the parent of an element is available as `$e->parent()`. So you could do this:

```
$html = file_get_html($file);
$anchors = $html->find("a[href=$brokenlink]");

for ($anchors as $a) {
    if ($a->parent()->tag !== 'li') {
        // do something
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T02:05:13.417

由于您使用的是[simple_html_dom](http://simplehtmldom.sourceforge.net/)，因此您可以使用它`$value->parent()`来获取父节点，并`tag`获取标签名称：

```
$html = file_get_html($file);
$matches = $html->find("a[href=$brokenlink]");
foreach ($matches as $value) {
    $parent = $value->parent();
    if($parent->tag != 'li') {
        //not a child of li, do something...
    }
} 
```

您可以通过阅读[手册](http://simplehtmldom.sourceforge.net/manual.htm)获得更多信息，其中包含您需要的一切。

# php - PHP - mt_rand 函数，如何使用它生成随机的20个字母密码？

> ID：13665679
> 
> 赞同：3
> 
> 时间：2012-12-02T01:51:14.750
> 
> 标签：php, random, passwords

我已经使用了手册页`mt_rand()`，但我只是不明白这个例子有什么意义，我想这是两个部分，定义了最小值和最大值，如果`mt_rand(5,15)`可以返回`1604716014`我想它不限于`5-15`. 我将如何在一些字母中进行正则表达式来制作密码重置生成器？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T01:55:11.930

这是我喜欢用来生成随机数的一些脚本`code`：

```
function generateCode( $charSeed ) { // you can use the username as $charSeed
    $seed = "";
    for ( $i = 1; $i <= 8; $i++ ) {
        $seed .= substr( '0123456789abcdef', rand( 0, 15 ), 1 );
    }
    return md5( $seed . $charSeed ) . $seed;
} 
```

您可能误读了文档。`mt_rand(5,15)`或者`rand(5,15)`绝对会生成一个介于 5 到 15 之间的随机数！

# php - 递归函数有问题

> ID：13665681
> 
> 赞同：2
> 
> 时间：2012-12-02T01:51:23.780
> 
> 标签：php, recursion

我遇到了递归查询的问题。我正在尝试创建一个 php 脚本，该脚本将搜索词典并返回可以使用给定字母集组成的单词，例如拼字游戏单词查找器。我知道还有其他具有很好解决方案的线程，但是我在那里找不到解决我的问题的方法。随着函数递归地继续，它正在查找具有多个字母重复的单词。例如，如果我最初使用字母 a、d 和 t 调用该函数，该函数将返回包含两个 A 的单词“data”。我认为我的代码的底部应该通过从数组中删除一个用过的字母来防止这种情况，但我错过了一些东西。我应该注意，我是一个新手，目前在学校，但这不是任何类型的学校项目，我只是想自己学习一些东西。提前致谢。

```
 // $wordsArray is the array pf possible words so far
    // $lettersArray is the array of remaining letters
    // $position is the current search position of the words
    // $solvedWords is an array containing all of the solved words
    function search($wordsArray, $lettersArray, $position, $solvedWords) {
        // if there are letters in the letters array continue
        if (count($lettersArray) > 0) {
            $foundWords = array();// foundWords is an array containing possible words given the current letter searched
            // for each remaining letter, check each word for a match at the next position
            foreach ($lettersArray AS $letter) {
                foreach ($wordsArray AS $word) {
                    // if there is a match with the current letter at the current search position, check to see if it is a complete word
                    if (substr($word, $position, 1) == $letter) {
                        if (strlen($word) == ($position+1)) {
                            array_push($solvedWords, $word); // if complete, add to the solved words
                        } else {
                            array_push($foundWords, $word); // if not a complete word, add to the foundWords array of possible words
                        } // end if
                    } // end if
                } // end foreach

                // $remainingLetters array should be the same as the letters array but removed the current letter at this position
                $remainingLetters = $lettersArray;
                $done = false;
                // if there is a letter match, remove the letter from the remainingLetters array
                for ($i = 0; $i < count($remainingLetters); $i++) {
                    if (!$done) {
                        if ($letter == $remainingLetters [$i]) {
                            unset ($remainingLetters [$i]);
                            $remainingLetters = array_values($remainingLetters);
                            $done = true;
                        } // end if
                    } // end if
                } // end foreach
                if ($remainingLetters)
                    $solvedWords = search($foundWords, $remainingLetters, ($position+1), $solvedWords);
            } // end foreach
            return $solvedWords;
        } // end if

    } // end search() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T02:30:44.163

-已解决-我通过为每个字母初始化 $foundWords 数组一次解决了这个问题，而不是为函数初始化一次。我认为它在从函数调用底部的数组中删除字母之前保存了先前的搜索。

# c# - 如何测量 LINQ Query 的时间？

> ID：13665689
> 
> 赞同：2
> 
> 时间：2012-12-02T01:52:16.413
> 
> 标签：c#, linq, stopwatch

我尝试在 linq 查询之前使用秒表并在 LINQ 查询之后停止它，但 linq 查询的时间需要 2 分钟，但 stopwtach 结果给出 40 MS ！

这是 LINQ 查询

```
Stopwatch stopwatch = Stopwatch.StartNew();
  var sets =
   from a in patient
   from b in patient
   from c in patient
   from d in patient
   from l in patient
   where a.VisitNum < b.VisitNum && b.VisitNum < c.VisitNum && c.VisitNum < d.VisitNum && d.VisitNum < l.VisitNum
   select new { a, b, c, d, l };
                stopwatch.Stop(); 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T01:53:21.640

LINQ 使用延迟执行。
在您枚举结果之前，查询根本不会执行。

要强制执行查询，您可以调用`.Count()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T18:07:54.790

通过转换为列表，您可以在 stopwatch.Stop() 之前强制执行 LINQ 查询在您的情况下，它将是-

```
sets.ToList();
stopwatch.Stop() 
```

# android - Android根据状态显示不同的视图

> ID：13665690
> 
> 赞同：0
> 
> 时间：2012-12-02T01:52:23.330
> 
> 标签：android, android-view

我有一个带有列表视图的活动，它显示了我从网上获取的一些数据。在显示列表视图之前，我在中间有一个进度指示器。该活动从隐藏的列表视图和显示的进度指示器开始，我隐藏一个并在必要时显示另一个。它们位于彼此之上的框架布局中。现在我想添加在必要时显示带有错误消息的文本视图而不是列表视图的可能性。有没有比隐藏两个视图并在每次我想要更改它时显示所需的一个更清洁的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T06:12:06.317

这就是我定义包含`ListView`带有进度条的 XML 的方式。

```
 <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="0dip"
        android:layout_weight="1"
        android:orientation="vertical" >

        <LinearLayout
            android:id="@+id/linlaHeaderProgress"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:gravity="center"
            android:orientation="horizontal"
            android:visibility="gone" >

            <ProgressBar
                android:id="@+id/pbHeaderProgress"
                style="@style/Spinner"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:padding="2dp" >
            </ProgressBar>

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="fill_parent"
                android:gravity="left|center"
                android:padding="2dp"
                android:text="Loading...."
                android:textColor="#F1F1F1"
                android:textSize="20sp" >
            </TextView>
        </LinearLayout>

        <ListView
            android:id="@+id/list"
            android:layout_width="fill_parent"
            android:layout_height="0dip"
            android:layout_weight="1"
            android:cacheColorHint="@android:color/transparent"
            android:divider="#000000"
            android:dividerHeight="0dp"
            android:fadingEdge="none"
            android:persistentDrawingCache="scrolling" >
        </ListView>

        <TextView
            android:id="@android:id/empty"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:gravity="center"
            android:padding="10dp"
            android:textColor="#f1f1f1"
            android:textSize="15sp"
            android:textStyle="bold"
            android:visibility="gone" >
        </TextView>
    </LinearLayout>

</LinearLayout> 
```

在`Activity`用于获取和显示数据（在我的例子中是 Facebook API）中，在 an 中`AsyncTask`，我检查 a 中数据的返回长度是否`JSONArray`为**0**。

例如：

```
TextView txtEmptyData = (TextView) findViewById(android.R.id.empty);
if (JAFeeds.length() == 0)  {
    txtEmptyData.setVisibility(View.VISIBLE);
else {
    txtEmptyData.setVisibility(View.GONE);

    // DO THE REST OF THE PROCESSING TO FETCH THE REMAINING DATA TO DISPLAY
} 
```

由于 XML 的定义方式，如果`length() == 0`, 则`TextView`变为可见并显示而不是`ListView`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T02:34:08.717

您可以使用 ViewSwitcher。您将在那里添加一些视图并按顺序显示它们，调用 showNext()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T05:20:39.287

您可以随时在 AdapterView 对象上调用 AdapterView.setEmptyView(View v) 来附加您想用作空视图的视图。

片段如下：

```
empty = (TextView)findViewById(R.id.empty1);
 list = (ListView)findViewById(R.id.list1);
 list.setEmptyView(empty); 
```

确保将 ListView 和 TextView 保持在同一个父级中。

详细说明请参考[这里](http://wiresareobsolete.com/wordpress/2010/08/adapting-to-empty-views/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T23:20:21.367

我找到了一个不错的解决方案。而不是建议的 ViewSwitcher，我发现 ViewFlipper 允许多个视图。它还允许您设置动画以在视图之间进行更改

```
<ViewFlipper xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/viewFlipper"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ListView
        android:id="@android:id/list"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

    <TextView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:gravity="center" />

    <TextView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:gravity="center" />

</ViewFlipper> 
```

虽然在视图之间切换有点混乱

`mViewFlipper.setDisplayedChild(mViewFlipper.indexOfChild(findViewById(R.id.myView)));`

如果没有太多子视图，也可以使用硬编码索引。

# directx - HLSL 插槽索引在不同资源类型之间共享或分离？

> ID：13665691
> 
> 赞同：1
> 
> 时间：2012-12-02T01:52:26.903
> 
> 标签：directx, hlsl

用于设置 HLSL 着色器参数的 DirectX API 采用相应参数占用的插槽的参数。这些槽号是在所有资源类型之间全局共享的，还是每种类型都有自己独特的槽号集。“类型”是指内在的 HLSL 结构，如 cbuffers、纹理、采样器等。

这是一个假设的 HLSL 着色器文件，它说明了我的问题。

```
// Note the order I declare things here is for the purpose of the question,
// not how I would declare them in a real shader file.

// First constant buffer and first item, definitely at index 0.
cbuffer PerFrameData
{
// stuff
};

// Is this texture at index 0 because its the first texture
// declared, or index 1 because it's the second item declared?
Texture2D firstTexture;

// Second cbuffer, third declared - index 1 or 2?
cbuffer PerObjectData
{
// stuff
};

// Second texture, fourth declared - index 1 or 3?
Texture2D secondTexture;

// This sampler is declared last, do I use index 0 or 4?
SamplerState texSampler; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T11:35:59.830

这是按类型。

例如`PerFrameData`，在插槽 0、插槽 1 上，`PerObjectData`等等......您使用*XX*设置它们是流水线阶段。`XXSetConstantBuffers`

 *检查[man](http://msdn.microsoft.com/en-us/library/windows/desktop/ff476385%28v=vs.85%29.aspx)以查看在阶段中设置不同类型的所有方法。*

# html - 内容滚动时将侧边栏固定在顶部

> ID：13665695
> 
> 赞同：1
> 
> 时间：2012-12-02T01:53:28.613
> 
> 标签：html, css

我遇到了 html/css 的问题。

嗨有这个设计：

```
HHHHHHHHHH
CCCCCCCSSS
CCCCCCCSSS
CCCCCCCSSS
CCCCCCCSSS
FFFFFFFFFF 
```

H 是我的页眉，F 页脚，C 内容和 S 我的侧边栏。

我已将页眉固定在顶部，将页脚固定在底部，因此无论我有多少内容，页眉和页脚总是会显示。

由于我的侧边栏只有少量数据，我也想修复它。我希望侧边栏保持在标题下方并且始终可见，即使内容太大并且我需要滚动到页面底部。

嗨有这个代码：

```
.container {
    min-height:100%;
    position:relative;
}
.header {  
    position: fixed;
    top: 0;
    background:#f1f1f1;
    width: 100%;
    margin: 0px auto;
}
.sidebar {
    float: right;
    width: 300px;
    background-color: #FFF;
    padding:10px;
    padding-bottom: 100px;
    padding-top: 50px;
}
.content {
    width: 960px;
    padding:10px;
    padding-bottom: 100px;
    padding-top: 50px;
    margin-left: 100px;
}
.footer {
    position:fixed;
    bottom:0;
    width:100%;
    height:60px; 
    background:#f1f1f1;
    text-align: center;
    vertical-align: middle;
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T05:49:17.027

尝试在说明其确切位置的同时使侧边栏的位置“固定”。因此，您可以将以下内容添加到 CSS 中的 div 类“侧边栏”中：

```
position: fixed;
left: 1110px;
top: 30px; 
```

您可以调整顶部和左侧的位置以使所有内容都适合您的喜好，但这应该大致将侧边栏置于正确的位置。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T07:13:26.840

您应该考虑的另一件事是，如果用户的屏幕分辨率小于 1110 像素宽，他们将根本看不到侧边栏。您可能想尝试一种更流畅的方法，使用百分比来计算位置 - 或者如果您希望它在右侧，您应该真正使用 'right: ' 属性而不是左侧。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-16T12:53:45.013

快进到 2019 年，您现在可以使用`position: sticky`.

这样，侧栏会正常滚动，直到它滚动到视野之外，在这种情况下它保持可见。 [https://developer.mozilla.org/en-US/docs/Web/CSS/position#Sticky_positioning](https://developer.mozilla.org/en-US/docs/Web/CSS/position#Sticky_positioning)

第一次实验性支持是在 2013 年，多数支持是在 2017 年，目前支持率为 93%。 [https://caniuse.com/#feat=css-sticky](https://caniuse.com/#feat=css-sticky)

```
#example-element {
  position: -webkit-sticky;
  position: sticky;
  top: 20px;
}

#example-element { background-color: #ff0; border: 3px solid red; z-index: 1; }
#example-element-container { max-width: 15em; }
.box { background-color: rgba(0, 0, 255, .2);  border: 3px solid #00f; float: left; width: 65px; height: 65px; }
.box+.box { margin-left: 10px }
.clear { clear: both; padding-top: 1em }
```

```
<div id="example-element-container">
  <p>In this demo you can control the <code>position</code> property for the yellow box.</p>
  <div class="box"></div>
  <div class="box" id="example-element"></div>
  <div class="box"></div>
  <p class="clear">To see the effect of <code>sticky</code> positioning, select the <code>position: sticky</code> option and scroll this container.</p>
  <p>The element will scroll along with its container, until it is at the top of the container (or reaches the offset specified in <code>top</code>), and will then stop scrolling, so it stays visible.</p>
  <p>The rest of this text is only supplied to make sure the container overflows, so as to enable you to scroll it and see the effect.</p>
  <hr>
  <p>Far out in the uncharted backwaters of the unfashionable end of the western spiral arm of the Galaxy lies a small unregarded yellow sun. Orbiting this at a distance of roughly ninety-two million miles is an utterly insignificant little blue green planet
    whose ape-descended life forms are so amazingly primitive that they still think digital watches are a pretty neat idea.</p>
</div>
```

# jquery - 我需要一种简单的方法来使用 jquery 检测 CSS3 媒体查询支持

> ID：13665697
> 
> 赞同：6
> 
> 时间：2012-12-02T01:53:47.640
> 
> 标签：jquery, css, media-queries, browser-detection

我需要一种快速而肮脏的方法来使用 jquery 检测媒体查询支持。我定义了一个函数如下：

```
function mediaQueriesEnabled () {
   var v = parseFloat($.browser.version);
   if ($.browser.msie) {
      if (v < 9)
         return (false);
   }
   return (true);
} 
```

有人可以帮我解决这个问题吗？看这个页面：

[http://caniuse.com/css-mediaqueries](http://caniuse.com/css-mediaqueries)

我意识到这里有一些复杂性。例如，当我测试我的 safari 版本时，我得到“534.57.2”。我现在想避免安装modernizr，主要是因为我很紧张，我需要在短期内处理大多数情况。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-06-19T23:31:34.427

**编辑：我不再策划这个答案，因为我觉得 Niet 的要好得多（见选择的答案）。** 它应该仍然有效，但可能需要一些测试。

破解打开的[Modernizr](http://modernizr.com/)（可以测试媒体查询），我们看到它使用了`window.matchMedia`（[MDN 页面](https://developer.mozilla.org/en-US/docs/Web/API/window.matchMedia)）功能。我们可以检查普通的旧 vanilla JS 以查看此函数是否存在：

```
function mediaQueriesEnabled () {
    if(typeof window.matchMedia != "undefined" || typeof window.msMatchMedia != "undefined") {
        return true;
    } else {
        return false;
    }
} 
```

或者更优雅：

```
function mediaQueriesEnabled () {
    return (typeof window.matchMedia != "undefined" || typeof window.msMatchMedia != "undefined");
} 
```

[JSFiddle](http://jsfiddle.net/PzegV/10/)

我在以下支持媒体查询的浏览器中进行了测试，均正确返回 true：

*   Safari 移动版
*   铬 26

我在以下不支持媒体查询的浏览器中进行了测试，都正确返回了 false：

*   即 7

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-02T02:00:31.940

您可以使用媒体查询创建样式表并查看它是否有效。

在您的 HTML 中：

```
<style>@media all and (min-width:1px) {
    .mediatest {position:absolute}
}</style> 
```

（或者您可以动态创建样式表，但这更难）

然后在你的脚本中：

```
var d = document.createElement('div');
d.className = "mediatest";
document.body.appendChild(d);
if( window.getComputedStyle && window.getComputedStyle(d).position == "absolute") {
    // supports media queries!
}
document.body.removeChild(d); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T04:15:34.800

这是一些基于@Kolink 答案的工作代码。到目前为止，这段代码效果很好......如果我有任何编辑，我会发回这个帖子。

Javascript：

```
var $globals = {
    mediaQuerySupport: false
}

function initMediaQueries () {
    // tests for media query support
    $globals.mediaQuerySupport = false;
    var d = document.createElement('div');
    d.className = "mediatest"; // found in core.css
    document.body.appendChild(d);
    if( window.getComputedStyle && window.getComputedStyle(d).position == "absolute") {
        $mlGlobals.mediaQuerySupport = true;
        mlDebug ('browser has media query support');
    }
    document.body.removeChild(d);
}

function mediaQueriesEnabled () {
   return ($globals.mediaQuerySupport);
}

$(document).ready(function() {
    initMediaQueries();
    if (mediaQueriesEnabled()) {
        ... do something
    }
}); 
```

CSS（我将其添加到我的主样式表文件中）：

```
@media all and (min-width:1px) {
    .mediatest {position:absolute}
} 
```

# c - C 中的静态库包含问题

> ID：13665698
> 
> 赞同：0
> 
> 时间：2012-12-02T01:54:02.877
> 
> 标签：c, gcc, static-libraries

我按照以下教程创建了一个静态库。

[http://tldp.org/HOWTO/Program-Library-HOWTO/static-libraries.html](http://tldp.org/HOWTO/Program-Library-HOWTO/static-libraries.html)

[http://www.adp-gmbh.ch/cpp/gcc/create_lib.html](http://www.adp-gmbh.ch/cpp/gcc/create_lib.html)

[http://www.cs.dartmouth.edu/~campbell/cs50/buildlib.html](http://www.cs.dartmouth.edu/~campbell/cs50/buildlib.html)

`ar`我使用该工具在 C 中生成了一个静态库。该库来自不同的目录。我正在正确生成库，并使用它来编译我的程序，如下所示：

```
gcc -lpthreads main.c -o server -L thread-pool -lthreadpool 
```

调用当前目录下的库，`thread-pool`其中包含`libthreadpool.a`.

根据教程，我需要将我的文件包含在:`.h`中，如下所示。GCC 抛出一个错误，说没有找到。这很明显，因为它位于不同的目录中。`main.c``#include "threadpool.h"``threadpool.h`

当我包含时：`#include threadpool/threadpool.h"`它可以编译但实际上不起作用。它仍然无法识别这些功能。我不确定为什么会这样。我认为在编译静态库时，实际上您不需要实际发送`.h`文件或任何源。

这里有什么问题？我该如何克服呢？

**编辑：**

我知道 .h 文件与静态库不同。我不知道为什么我上面所说的似乎让我在两者之间感到困惑。

无论如何，当使用静态库时，是否意味着我们也需要该`.h`文件并将其包含到源代码中，而不仅仅是使用静态库编译程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T01:58:54.310

库和标题是两个不同（尽管相关）的东西。您还可以通过编译器的选项解决您的问题，为编译器提供一个额外的目录来查找头文件：

```
gcc -lpthreads -I threadpool main.c -o server -L thread-pool -lthreadpool 
```

由于您的`threadpool`库可能依赖于`libpthread`，您可能需要更改编译器命令行，以便避免出现链接问题`libpthreads`：`libthreadpool`

```
gcc -I threadpool main.c -o server -L thread-pool -lthreadpool -lpthreads 
```

实际上，首选选项是使用`-pthread`确保 pthread 库正确链接的选项，并且完成线程支持所需的任何其他编译器配置（`-pthread`选项的顺序似乎无关紧要）：

```
gcc -pthread -I threadpool main.c -o server -L thread-pool -lthreadpool 
```

`-lxyz`在任何目标文件之后而不是在它们之前列出库（例如）也是一个好主意。在某些系统上，它可以双向工作；在所有已知系统上，在目标文件之后列出库总是有效的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T02:26:33.730

正如Michael Burr 所说，.h 文件的#include 以及与库文件的链接是两个不同（但相关）的东西。

当您构建一个由多个部分（例如多个 .c 源文件或库）组成的 C 程序时，该过程分两步完成。*首先编译*各个源 .c 文件，即将 C 源文件翻译成可执行机器指令的模块。然后将程序所需的所有模块和库*链接*在一起，构建可执行文件。

*静态*链接和*动态*链接之间的区别只是链接*完成*的时间。从概念上讲，它们是相同的东西，但是静态链接（带有静态库）是提前完成的，形成一个可以稍后运行的可执行文件，而动态链接是在执行前立即完成的。

链接的类型（静态或动态）根本不影响编译步骤。

在编译单个源文件期间，编译器需要为调用库函数生成代码。例如，如果一个库包含一个以 double 作为参数的函数 f，而源文件包含代码 f(7)，编译器需要知道有一个名为 f 的函数，并且它需要一个 double 作为参数，因此编译器可以在实际调用函数 f 之前生成将整数 7 转换为双精度的代码。

这是通过将函数*声明*放在 .h 文件中来完成的，然后将其包含在您的 .c 源文件中。例如，该声明可能如下所示：

```
void f(double); 
```

这使得编译器能够生成正确的代码，并在出现错误时给出正确的警告和错误消息。

另一方面，该库包含已编译的函数*定义*，它是执行某些操作的函数的实际代码。

请注意，编译步骤与库文件几乎没有关系，与静态或动态链接的区别无关。为了能够#include .h 文件，编译器需要知道在哪里可以找到 .h 文件。这可能与实际的库文件完全不同。库文件甚至不必存在于同一台计算机上，甚至根本不存在。执行#include 时，库中的实际函数可能尚未编写。

混淆的一个来源可能是 gcc 命令，

```
gcc -lpthreads main.c -o server -L thread-pool -lthreadpool 
```

看起来它同时执行编译和链接。确实如此，但这只是为了方便，在幕后它仍然分两个单独的步骤完成。

# ruby-on-rails - 在 VPS 上安装 rbenv，权限被拒绝

> ID：13665701
> 
> 赞同：0
> 
> 时间：2012-12-02T01:54:18.680
> 
> 标签：ruby-on-rails, permissions, rbenv

在安装 rbenv 时尝试以下操作时出现权限被拒绝错误。我正在尝试设置我的 VPS 环境来部署我的 rails 应用程序。

```
deployer@max:~$ curl https://raw.github.com/fesplugas/rbenv-installer/master/bin/rbenv-installer | bash
bash: /usr/bin/curl: permission denied 
```

curl 已经安装好了。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T02:04:57.163

为了解决这个问题，我不得不

1）回到根目录

```
su root
cd 
```

2）重新安装卷曲

```
sudo apt-get purge curl libcurl3
sudo apt-get install curl 
```

3）返回部署者

```
su deployer
cd 
```

4）安装rbenv

```
curl https://raw.github.com/fesplugas/rbenv-installer/master/bin/rbenv-installer | bash 
```

# c# - 带有插件参数的 LINQ 扩展方法

> ID：13665705
> 
> 赞同：0
> 
> 时间：2012-12-02T01:55:19.420
> 
> 标签：c#, linq

我想创建一个 LINQ 条件字符串，然后将其插入 LINQ 扩展方法，如下所示。那可能吗？

```
 string x = "a.MemberName != null &&
  a.MemberName.Contains(RadGrid1.MasterTableView.GetColumn(\"MemberName"\).CurrentFilterValue)";                    
  var filtered1 =   listFromCache.Where(a => x); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T02:07:10.480

如果您打算构建动态 Linq 查询，那么我建议您使用表达式树。您可以创建一个描述逻辑的表达式树，然后您可以简单地调用 Expression.Lambda 将树编译为委托。

这是参考文档：

[http://msdn.microsoft.com/en-us/library/bb397951.aspx](http://msdn.microsoft.com/en-us/library/bb397951.aspx)

**编辑：**

下面是一些示例代码。我不知道是什么`RadGrid1.MasterTableView.GetColumn(\"MemberName"\).CurrentFilterValue`，所以我使用“CurrentFilterValue”作为该语句计算结果的占位符。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Linq.Expressions;

namespace ConsoleApplication1
{
    public sealed class Document
    {
        public string MemberName { get; set; }
    }

    public static class Program
    {
        public static void Main(string[] args)
        {
            // Setup...
            var documents = new List<Document>();

            documents.Add(new Document { MemberName = "Test 1 + CurrentFilterValue" });
            documents.Add(new Document { MemberName = "Test 2 + CurrentFilterValue" });
            documents.Add(new Document { MemberName = "Test 3"});

            // Create the expression tree...
            var parameter = Expression.Parameter(typeof(Document), "document");

            var isNotNull = Expression.NotEqual(parameter, Expression.Constant(null));

            var containsIsTrue =
                Expression.IsTrue(
                    Expression.Call(Expression.Property(parameter, "MemberName"),
                        typeof(string).GetMethod("Contains"),
                        Expression.Constant("CurrentFilterValue")));

            var bothAreTrue = Expression.And(isNotNull, containsIsTrue);
            var lambda = Expression.Lambda<Func<Document, bool>>(bothAreTrue, parameter).Compile();

            // Test...
            var results = documents.Where(d => lambda(d));
        }
    }
} 
```

# amazon-web-services - Apache Camel AWS/SQS 组件

> ID：13665711
> 
> 赞同：7
> 
> 时间：2012-12-02T01:56:34.417
> 
> 标签：amazon-web-services, apache-camel, amazon-sqs, apache-servicemix

Camel v2.8 (camel-aws/sqs)

是否可以使用骆驼 aws-sqs 组件将消息发送到共享队列？

我可以直接发送到 myQueue 但不能发送到我可以通过 SQS 访问策略访问的其他队列，并确认它直接通过 CURL 工作

Camel aws-sqs 端点 URL 和有效路由如下所示：

```
from("someplace").to("aws-sqs://myQueue?amazonSQSEndpoint=" + endpoint + "&accessKey=" +       accessKey +"&secretKey=" + secretKey); 
```

我需要能够发送到共享队列，同时提供以下格式的 URL：

```
https://sqs.us-west-1.amazonaws.com/111222333444/sharedQueue?Action=SendMessage
&MessageBody=test
&Version=2011-10-01
&Timestamp=2012-1201T22%3A01%3A15Z
&Signature=Kl0Vki0KzvoB6Z2NUHFT7mxsurCn%2FjPHv4%2BJ8LEo7NA%3D
&SignatureMethod=HmacSHA256
&SignatureVersion=2
&AWSAccessKeyId=AKIXJMGM5GYMGSTANQ8A 
```

Camel aws-sqs v2.8 是否提供此功能？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-07T20:40:09.280

这可能不是最佳选择，因为它限制了客户端，但我已经创建并注册了一个 AmazonSQSClient（在路由定义参数 amazonSQSClient 中使用）。我创建了一个子类来覆盖 listQueues 来调用具有 QueueOwnerAWSAccountId 参数的 getQueueURL。这是我的自定义客户端：

```
import com.amazonaws.AmazonClientException;
import com.amazonaws.AmazonServiceException;
import com.amazonaws.ClientConfiguration;
import com.amazonaws.auth.AWSCredentials;
import com.amazonaws.services.sqs.AmazonSQSClient;
import com.amazonaws.services.sqs.model.GetQueueUrlRequest;
import com.amazonaws.services.sqs.model.GetQueueUrlResult;
import com.amazonaws.services.sqs.model.ListQueuesResult;

public class CustomSQSClient extends AmazonSQSClient {

private String queueName;
private String accountId;

public CustomSQSClient(AWSCredentials awsCredentials, ClientConfiguration clientConfiguration, String queueName, String accountId) {
    super(awsCredentials, clientConfiguration);
    this.queueName = queueName;
    this.accountId = accountId;
}

@Override
public ListQueuesResult listQueues() throws AmazonServiceException,
        AmazonClientException {

    GetQueueUrlRequest getQueueUrlRequest = new GetQueueUrlRequest();
    getQueueUrlRequest.setQueueName(queueName);
    getQueueUrlRequest.setQueueOwnerAWSAccountId(accountId);
    GetQueueUrlResult getQueueUrlResult = getQueueUrl(getQueueUrlRequest );

    if (getQueueUrlResult.getQueueUrl() != null) {
        ListQueuesResult listQueuesResult = new ListQueuesResult();
        listQueuesResult.getQueueUrls().add(getQueueUrlResult.getQueueUrl());
        return listQueuesResult;
    } else {
        return super.listQueues();
    }
}
} 
```

更好的选择是覆盖 org.apache.camel.component.aws.sqs.SqsEndpoint.doStart，但我正在使用更简单的方法。

# ruby-on-rails - 无法在 Fedora 17 上安装 PG gem

> ID：13665712
> 
> 赞同：7
> 
> 时间：2012-12-02T01:56:43.507
> 
> 标签：ruby-on-rails, linux, postgresql, rvm, fedora

pg gem 很顽固，所以我无法在新计算机上加载我的应用程序。似乎有多个问题，无法找到 pg_config 然后 extconf.rb

```
#psql working...
psql (9.2.1)
Type "help" for help.

nd =>
\q

$ pg_config:

#adding the path to bashrc...
$ nano .bashrc

PATH=/usr/pgsql-9.2/bin:$PATH

#seems to work...
pg_config: /usr/pgsql-9.2/bin/pg_config

$ sudo gem install pg

#but i get the same errors...
Building native extensions.  This could take a while...
.......
ERROR:  Error installing pg:
        ERROR: Failed to build gem native extension.

        /usr/bin/ruby extconf.rb
checking for pg_config... no
No pg_config... trying anyway. If building fails, please try again with
 --with-pg-config=/path/to/pg_config
checking for libpq-fe.h... no
Can't find the 'libpq-fe.h header
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options. 
```

有没有处理过这个问题的linux人？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-02T05:07:41.250

这解决了

```
$ yum install /usr/include/libpq-fe.h 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-10-04T12:00:49.450

对于 Fedora 20+，需要以下软件包：

```
sudo yum install postgresql-devel 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-09-23T10:18:48.747

对于 Fedora 30：

```
$sudo dnf install libpq-devel 
```

然后：

```
$gem install pg

Building native extensions. This could take a while...
Successfully installed pg-1.1.4
Parsing documentation for pg-1.1.4
Installing ri documentation for pg-1.1.4
Done installing documentation for pg after 1 seconds
1 gem installed 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-29T02:31:35.043

~ 你好

我在我的 Rails 项目中安装 gem“pg”时遇到了同样的问题，当运行命令“bundle install”时有同样的错误，在我的情况下，partiuclar 解决它如下：

我用的是 Fedora 19，我想在 Fedora 17 中可以用同样的方法解决：

我使用以下教程安装了 Postgres：

*   > [http://goo.gl/AhZZKR](http://goo.gl/AhZZKR)

然后，我在 ~/.bashrc 中添加了下一行来解决 pg_config 的问题：

*   `PATH = / usr/pgsql-9.2/bin: $ PATH`

最后为了解决 libpq-fe.h 的问题，我安装了 postgresql-devel，如下所示：

*   `# yum install postgresql92-devel`

最后在我的 Rails 项目中运行命令“bundle install”并且没有更多错误。

# mysql - 关于 char varchar 和 tinyint 的问题

> ID：13665713
> 
> 赞同：2
> 
> 时间：2012-12-02T01:56:54.030
> 
> 标签：mysql, phpmyadmin, char, varchar, tinyint

我正在准备一张注册表单。它的字段/列包括：

student_no（主键）和年龄

student_no 将保存具有 9 个字符的固定长度的值，其中包含 8 个数字和一个破折号，例如 11-423685、12-537859、12-974156

我不确定是使用 char 还是 varchar，因为我想在使用它们之前更多地了解这两种类型。具体来说：

1.  这些类型中的一种或两种是否可以保存包含键盘上各种符号（-、@、_、$、# 等）的值，例如我如何需要学生编号包含破折号？

2.  如果我给 char 的长度为 9，给它一个长度为 8 及以下的值是否无效

3.  其他需要注意的重要区别（如果有）

至于年龄，如果我使用tinyint，是否需要指定长度？还是我应该将 phpMyAdmin 中的长度字段留空？

注意：这实际上只是一个学校练习，其中的指令是制作一个包含任何十四个字段的工作注册表，所以我决定暂时不使用生日以避免使用日期。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T01:59:35.827

INT 不允许任何非数字格式。VARCHAR 可以。

但是，最好使用 INT 来表示学号，因为 INT 会加快搜索速度。

您可以使用格式在输出时显示带有连字符的学生编号。数据库应该以最有效的格式（未格式化的数字）存储它。

另外，我建议您使用 DATE 来存储birth_date，而不是数字年龄。这将防止随着时间的推移发生年龄变化的问题。同样，您可以计算输出的年龄以进行演示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T02:00:26.180

`CHAR()`很奇怪。它是一个固定长度的字符串，如果您尝试将其设置为较短的值，则会用空格填充。它几乎不适合使用——如果你忘记它曾经存在过，你可能永远不会错过它。

`VARCHAR()`很大程度上按照您的预期工作。它可以包含不超过其最大长度的任何字符串（带有任何字符）。

不要储存年龄。存储出生日期（使用类似的类型`DATE`）。但是如果你必须存储一个年龄，数字类型（如`TINYINT`）的长度几乎没有意义，应该留空。

# java - JPA 在一个项目中插入触发器之前执行并且在另一个项目中具有不同的行为

> ID：13665717
> 
> 赞同：1
> 
> 时间：2012-12-02T01:57:48.700
> 
> 标签：java, oracle, jsf, jpa, triggers

是的，我知道，标题有点令人困惑，但情况如下：

我有两个项目，应该以相同的方式工作。他们都访问 Oracle 数据库。Oracle 数据库上的每个表都有一个作为主键的 TABLENAME_ID 列，该列与执行 TABLENAME_SEQ nextval() 以插入 TABLENAME_ID 列的 BEFORE INSERT 触发器相关联。（了解？）。在这种环境下，通过 SQL 插入可以正常工作。

那就是说让我们来看看这个问题：

我有一个使用 JPA 的 Project1，其中实体是从数据库表生成的。在这个项目上生成的实体可以正常工作，并且可以完美地进行 CRUD 和搜索。实体与 SequenceGenerator 注释相关联，插入时不会执行数据库触发器，因此无论使用什么通道（系统或 SQL DML 语句），都会按顺序生成 id 行。

现在我必须创建第二个项目，该项目的行为方式应该相同但不是。在这个项目中，当我创建一个实体时，它会检索我，即 ID = 3，但实际上在数据库上写入 ID = 4。所以，如果我得到这个相同的实体并尝试对其进行更新，JPA 会尝试再次插入它，并给我一个错误。

有什么线索吗？一些代码如下：

实体示例（来自项目 1）：

```
@Entity
public class Category implements Serializable {

    private static final long               serialVersionUID    = 1L;

    @Id
    @SequenceGenerator(name = "CATEGORY_CATEGORYID_GENERATOR", sequenceName = "CATEGORY_SEQ", allocationSize = 1)
    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "CATEGORY_CATEGORYID_GENERATOR")
    @Column(name = "CATEGORY_ID", unique = true, nullable = false, precision = 10)
    private long                            categoryId;

    @Column(name = "IS_ACTIVE", nullable = false, precision = 3)
    private boolean                         isActive;

    @Column(name = "LONG_TITLE", nullable = false, length = 250)
    private String                          longTitle;

    public Category() {
    }

    public long getCategoryId() {
        return this.categoryId;
    }

    public boolean getIsActive() {
        return this.isActive;
    }

    public String getLongTitle() {
        return this.longTitle;
    }

    public void setCategoryId(long categoryId) {
        this.categoryId = categoryId;
    }

    public void setIsActive(boolean isActive) {
        this.isActive = isActive;
    }

    public void setLongTitle(String longTitle) {
        this.longTitle = longTitle;
    }

} 
```

实体示例（来自项目 2）：

```
@Entity
public class Author implements Serializable {

    private static final long   serialVersionUID    = 1L;

    @Id
    @SequenceGenerator(name = "AUTHOR_AUTHORID_GENERATOR", sequenceName = "AUTHOR_AUTHOR_ID_SEQ", allocationSize = 1)
    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "AUTHOR_AUTHORID_GENERATOR")
    @Column(name = "AUTHOR_ID", unique = true, nullable = false, precision = 10)
    private long                authorId;

    @Column(name = "ADDRESS_COMPLEMENT")
    private String              addressComplement;

    @Column(name = "AUTHOR_KIND")
    private int                 authorKind;

    @Column(name = "BUILDING_NUMBER")
    private String              buildingNumber;

    private String              city;

    // bi-directional many-to-one association to Product
    @OneToMany(mappedBy = "author")
    private List<Product>       products;

    public Author() {
    }

    public String getAddressComplement() {
        return addressComplement;
    }

    public long getAuthorId() {
        return authorId;
    }

    public int getAuthorKind() {
        return authorKind;
    }

    public String getBuildingNumber() {
        return buildingNumber;
    }

    public String getCity() {
        return city;
    }

    public List<Product> getProducts() {
        return products;
    }

    public void setAddressComplement(String addressComplement) {
        this.addressComplement = addressComplement;
    }

    public void setAuthorId(long authorId) {
        this.authorId = authorId;
    }

    public void setAuthorKind(int authorKind) {
        this.authorKind = authorKind;
    }

    public void setBuildingNumber(String buildingNumber) {
        this.buildingNumber = buildingNumber;
    }

    public void setCity(String city) {
        this.city = city;
    }

    public void setProducts(List<Product> products) {
        this.products = products;
    }

} 
```

**编辑**

如 JScoobyCed 所问，下面是如何使用第二个实体代码：

```
// ...
Author author = new Author();
// Here follows setters
// Code below returns, ie, author_id = 3, but saves author_id = 4 on database
author = authotEjb.create(author);
// ...
product.setAuthor(author);
// Don't find author_id = 3 on database and tries to insert author again
// or complains about PERSIST cascade on Product entitiy.
product = productEjb.update(product) 
```

EJB 在 create() 方法上使用 EntityManager.persist()，在 update 方法上使用 EntityManager.merge()。

**编辑 2**

添加序列和触发代码。每个表都有自己的序列，并且它自己的触发器遵循相同的模式 TABLENAME_SEQ 和 TABLENAME_TRG：

序列码：

```
CREATE SEQUENCE  AUTHOR_SEQ  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 NOCACHE  ORDER  NOCYCLE; 
```

触发代码：

```
create or replace 
trigger author_trg before insert on author
for each row 
begin 
    select author_seq.nextval into :new.author_id from dual; 
end; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T15:11:29.200

您的触发器和 JPA 都将尝试分配序列 ID，因此这在任何一个系统上都不起作用。

如果插入提供 id，则需要修复触发器以不分配 id（仅在 null 时才这样做）。

否则，您需要某种方式从 JPA 的触发器中获取 id。如果使用 EclipseLink，您可以使用 @ReturnInsert 注释，但通常修复触发器会好得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T19:26:24.050

我们决定禁用数据库上的触发器...

我们怀疑项目 1 在类似的场景下工作，因为 o 远程 EJB，但我们并不完全确定。感谢所有试图在这个问题上帮助我的人。

# jquery - 如何使用 jquery 在只读文本输入中显示值

> ID：13665721
> 
> 赞同：0
> 
> 时间：2012-12-02T01:59:12.890
> 
> 标签：jquery, html

下面是我在应用程序中显示的表格示例：

```
Marks Per Answer               Total Marks    Marks Remaining

(blank text input)              
(blank text input)               6              6           

(blank readonly text input)      4              0 
```

我遇到的问题是，应该发生的是表中的任何只读文本输入应显示与“总分”列下的数字相同的值。所以表格应该如下所示：

```
Marks Per Answer                   Total Marks    Marks Remaining

(blank text input)                    
(blank text input)                    6              6

(readonly text input value='4')       4              0 
```

我的问题是，为了在只读文本输入中显示正确的值，我需要在下面的代码中进行哪些更改？

```
if ($("[class*=q" + i + "_mark]").length == 1) {
    //alert(t_marks);
    var t_marks = $("[class*=q" + i + "_ans]");
    var t_marksHtml = t_marks.html();
    t_marks.html("0");
    $("[class*=q" + i + "_mark]").val(t_marksHtml).attr('readonly', true);
    //$("[class*=q"+i+"_mark]").attr('readonly',true);
} 
```

下面是 HTML：

```
<table border='1' id='markstbl'>
<thead>
<tr>
<th class='answermarksth'>Marks per Answer</th>
<th class='totalmarksth'>Total Marks</th>
<th class='noofmarksth'>Marks Remaining</th>
</tr>
</thead>
<tbody>

<tr class="questiontd">
<td class="answermarkstd">
<input class="individualMarks q1_mark_0"  q_group="1" name="answerMarks[]" id="individualtext" type="text" />
</td>
<td class="totalmarkstd" rowspan="2">6</td>
<td class="noofmarkstd q1_ans_text"  q_group="1" rowspan="2"><strong>5</strong></td>
</tr>

<tr class="questiontd">
    <td class="answertd" name="answers[]">D</td>
<td class="answermarkstd">
<input class="individualMarks q1_mark_0"  q_group="1" name="answerMarks[]" id="individualtext" type="text" />
</td>
</tr>

<tr class="questiontd">
<td class="answermarkstd">
<input class="individualMarks q2_mark_0"  q_group="1" name="answerMarks[]" id="individualtext" type="text" />
</td>
<td class="totalmarkstd" rowspan="1">6</td>
<td class="noofmarkstd q2_ans_text"  q_group="1" rowspan="1"><strong>5</strong></td>
</tr>
</tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T07:32:50.550

似乎你需要这样的东西，因为表的丑陋标记（带跨度）很难选择正确数量的剩余标记，所以这里有一个允许 -1 的错误，所有其他工作正常，

你需要检查你的标记，因为输入和保留标记之间的关系是不干净的。

[样本](http://jsfiddle.net/oceog/M9Fhk/2/)

```
$('.individualMarks').change(function() {
    t = $(this);
    console.log(t.parents('tr').get(0));
    var remain_e = t.parents('tr').children('.noofmarkstd').last().children();
    console.log(remain_e.get(0));
    if (remain_e.length < 1) {
        var c = 2;
        var m = $(this);
        while (remain_e.length < 1 && c < 100) {

            remain_e = m.parents('tr').prev().children('.noofmarkstd').last().children();
            m = m.parents('tr').prev();
            c++;
        }
        if (c >= 100) {
            console.error('error finding element!');
            return;
        }
    }
    remain = remain_e.html();
    remain--;
    if (remain <= 0) {
        t.attr('readonly', "true"), remain_e.parents('tr').find('input').attr('readonly', "true")
    };
    remain_e.html(remain);
});​ 
```

# javascript - Javascript 模块

> ID：13665722
> 
> 赞同：10
> 
> 时间：2012-12-02T01:59:27.540
> 
> 标签：javascript

我有以下代码。它是一个 JavaScript 模块。

```
(function() {

   // Object
   var Cahootsy;

   Cahootsy = {
       hello: function () {
           alert('test');
       },
    };

    (Cahootsy.scope = (function() {
        return this;
     })()).Cahootsy = Cahootsy;

    return Cahootsy;

}).call(this); 
```

我不明白该部分：

```
 (Cahootsy.scope = (function() {
        return this;
     })()).Cahootsy = Cahootsy; 
```

我认为它正在创建一个引用“this”模块的对象，然后将 Cahootsy 变量分配给全局 Cahootsy 变量。我不明白为什么需要将“this”分配给 Cahootsy.scope

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-02T02:03:23.350

你可以把它分解一下，像这样：

```
var getScope = function() {return this;}
Cahootsy.scope = getScope();
getScope().Cahootsy = Cahootsy; 
```

它所做的是获取全局范围（通常`window`，但不总是）。然后它`Cahootsy`通过对象的属性创建一个到全局范围`scope`的链接，并通过范围的`Cahoosty`属性创建一个链接。

结果是，在浏览器中，您将获得`window.Cahootsy`对象，`window.Cahootsy.scope`然后返回窗口。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-02T02:02:24.013

`(function() { return this; })()`是返回全局对象的技巧。

该语句设置`Cahootsy.scope`为全局对象（供将来使用），并且还设置了全局对象的属性以向外界`Cahootsy`公开。`Cahootsy`

# ruby-on-rails - Rails 中的嵌套形式参数，形式简单

> ID：13665724
> 
> 赞同：2
> 
> 时间：2012-12-02T01:59:39.893
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在尝试让嵌套表单以一种形式在用户与其地址之间创建关联。

我看到的问题是，只要验证失败，内部地址字段表单就不会重新填充，也不会显示验证错误。

这是表格：

```
<%= simple_form_for(@user, :url => register_and_checkout_path, :html => {:class => "form-horizontal clearfix"}) do |f| %>
<p>New Member &amp; Guest</p>
<small>Mandatory fields marked*</small>
     <%= f.error_notification %>
     <%= f.input :is_checkout, :as => :hidden, :input_html => { :value => true } %>
      <%= f.input :first_name, :input_html => {:class => "input-xlarge"} %>
      <%= f.input :last_name, :input_html => {:class => "input-xlarge"} %>
      <%= f.input :email, :input_html => {:class => "input-xlarge", :placeholder => "you@youremail.com"} %>

     <%= simple_fields_for (:address) do |a| %>
        <%= a.input :phone1, :label => "Contact number", :input_html => {:class => "input-xlarge"}  %>
        <p class="uppercase">Your Address</p>
        <%= a.input :address_1, :label => "Street Address", :input_html => {:class => "input-xlarge"}  %>
        <%= a.input :address_2, :label => false, :input_html => {:class => "input-xlarge"}  %>
        <%= a.input :address_3, :label => false, :input_html => {:class => "input-xlarge"}  %>
        <%= a.input :suburb, :input_html => {:class => "input-xlarge"}  %>
        <%= a.input :state, :input_html => {:class => "input-xlarge"}  %>
        <%= a.input :postcode, :label => "Postcode/zipcode", :input_html => {:class => "input-xlarge"}  %>
        <%= a.input :country, :priority => [ "Australia", "New Zealand", "Unites States", "United Kingdom" ] %>

     <% end %>
        <p>Become a valued member</p>
        <%= f.input :password, :input_html => {:class => "input-xlarge"}  %>
        <%= content_tag(:button, :class => 'btn btn-large btn-success floatright') do %> <%= content_tag :i, '', :class => 'icon-white icon-shopping-cart' %> Register and Checkout <% end %>
     <% end %>
</div> 
```

以及我阅读参数的尝试（这是大订单控制器创建方法的一部分）

```
if params[:is_register]
      Rails.logger.debug {"Registering before checking out"}
      @user = Member::User.new(params[:member_user])
      @user.address = Member::Address.new(params[:address])
      Rails.logger.debug {"address params " +params[:address].to_yaml }
      @user.pending_order = Checkout::Order.new()
      @user.pending_order.status = 'P'
      Rails.logger.debug {"Saving the new user record " + @user.to_yaml}
      Rails.logger.debug {"Saving the new user address record " + @user.address.to_yaml}
    end

    Rails.logger.debug {"Value of user " + @user.to_yaml}

    respond_to do |format|
      if params[:is_login] and user
        format.html { render :shipping_billing }
        format.json { render json: @order, status: :created, location: @order }
      elsif params[:is_register] and @user and @user.save and @user.address.save
        Rails.logger.debug {"Saved new customer account and address"}
        format.html { render :shipping_billing, :notice => "Your account was successfully registered"}
        format.json { render json: @order}
      else
        format.html { render action: "new", :notice => "Could not log in" }
        format.json { render json: @checkout_order.errors, status: :unprocessable_entity }
      end
    end 
```

最后是相关模型：

```
class Member::User < ActiveRecord::Base
  authenticates_with_sorcery!
  # attr_accessible :title, :body

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :address, :address_attributes, :first_name, :last_name, :order_attributes, :pending_order, :is_checkout

  attr_accessor :is_checkout

  # Orders and Order History
  has_many :orders, :class_name => "Checkout::Order"
  has_one  :pending_order,
           :class_name => "Checkout::Order",
           :conditions => ['status = ?', 'P']

  has_many :addresses, :class_name => "Member::Address"
  has_one  :primary_billing_address,
           :class_name => "Member::Address",
           :conditions => ['is_primary_billing = ?',true]
  has_one  :primary_shipping_address,
           :class_name => "Member::Address",
           :conditions => ['is_primary_shipping = ?',true]
  has_one :address,
          :class_name => "Member::Address",
          :conditions => ['is_primary_billing = ?', true]

  accepts_nested_attributes_for  :address
  accepts_nested_attributes_for  :pending_order

  validates_presence_of :email, :password, :first_name, :last_name
  validates_confirmation_of :password
  validates_uniqueness_of :email

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T11:12:14.337

对于其他寻找这个问题的答案的人，我想通了，这是一个非常简单的错误，经过所有时间试图弄清楚它是表格中的这一行。

```
<%= f.simple_fields_for :address do |a| %> 
```

请注意，容器表单构建器现在引用了 simple_fields_for。

# c++ - 架构 x86_64 的未定义符号 - OpenGL

> ID：13665725
> 
> 赞同：0
> 
> 时间：2012-12-02T01:59:43.613
> 
> 标签：c++, zlib

当我尝试在 Code::Blocks 中编译一些 C++ 代码时，出现以下错误：

```
 "_inflate", referenced from:
      InflateFile(__sFILE*, __sFILE*)in ZLibDecompressor.o
  "_inflateEnd", referenced from:
      InflateFile(__sFILE*, __sFILE*)in ZLibDecompressor.o
  "_inflateInit_", referenced from:
      InflateFile(__sFILE*, __sFILE*)in ZLibDecompressor.o
  "_sws_getContext", referenced from:
      RiffMovie::ParseFile(char const*)in RiffMovie.o
  "_sws_scale", referenced from:
      RiffMovie::PlaceRGBData()      in RiffMovie.o 
```

我正在尝试在 Mac OS X 10.8 x64 上编译它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T02:09:00.567

您需要通知链接器您要使用 OpenGL.framework。为此，请在选项中添加“-framework OpenGL”标志。

# c++ - 我无法从另一个类调用我的 main 中的函数

> ID：13665727
> 
> 赞同：0
> 
> 时间：2012-12-02T01:59:55.797
> 
> 标签：c++, class, main

我有一个主类，我试图在其中调用一个函数来创建菜单，但我不断收到此错误：

> 错误 LNK2019：函数 _main 中引用的未解析的外部符号“public：static int __cdecl Controller::menu(void)”(?menu@Controller@@SAHXZ)

这是我的主要课程。

```
#include "Main.h"

using namespace std;

int main () 
{
Control:: menu();
return 0;
} 
```

这是 Main.h

```
#pragma once
#include "Control.h"
class Main:
{
public:
Main(void);
~Main(void);
int main();

}; 
```

控制.h：

```
#pragma once
#include <iostream>

class Control
{
public:
Control(void);
~Control(void);
 static int menu ();
}; 
```

最后是控制 cpp 文件：

```
#include "Control.h"
using namespace std; 

static int menu () 
{
  bunch of menu code
 return 0;
} 
```

我认为这很简单，但我就是想不通。我尝试删除静态以及将函数更改为 void 函数，但都没有奏效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T02:02:46.040

```
static int menu () 
{
  bunch of menu code
 return 0;
} 
```

应该

```
int Control::menu () 
{
  bunch of menu code
 return 0;
} 
```

这是定义成员的正确方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T02:04:00.487

带有原型的静态函数应该是这样的。

```
int Control :: menu()
{
   //bunch of menu code
   return 0 ;
} 
```

当您在另一个文件中实现该类时，您还必须将类名与范围解析运算符一起使用。

您还在课程末尾有一个额外的冒号，`Main`导致语法错误。

# wordpress - 致命错误，允许的内存大小已用完

> ID：13665730
> 
> 赞同：-1
> 
> 时间：2012-12-02T02:01:04.527
> 
> 标签：wordpress, memory, fatal-error

我收到了一个致命的错误消息`Allowed memory size of 67108864 bytes exhausted`，我已经升级内存无济于事。

```
Fatal error: Allowed memory size of 67108864 bytes exhausted (tried to allocate 32 bytes)
in /home/content/85/7866685/html/wp-includes/wp-db.php on line 1383 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T02:33:54.120

这是一个非常典型的 WordPress 问题；您应该在提出问题之前先搜索现有答案，例如“ [Allowed memory size of](https://stackoverflow.com/questions/3463276/allowed-memory-size-of) ”

使用[FTP](http://codex.wordpress.org/FTP_Clients)，您可以尝试以几种不同的方式增加 PHP 和 Wordpress 的内存：

1）您可以编辑 php.ini 中的 memory_limit 行（如果您有权访问该文件）以将内存增加到 64M：

`memory_limit = 64M;`

2) 如果您无法访问 php.ini 文件，请将此行添加到 .htaccess 文件的顶部：

`php_value memory_limit 64M`

如果这不起作用或引发“500 内部服务器错误”，请从 .htaccess 中删除该行。

3）尝试在您的[wp-config.php](http://codex.wordpress.org/Editing_wp-config.php)文件中添加下面的“定义”行，在开头下方的几行空白处 `<?php`

`define('WP_MEMORY_LIMIT', '64M');`

如果这些都不起作用，您的主机可能不允许内存分配覆盖。你被他们给的东西困住了。

# javascript - 在 Seed 中使用 GLib 时出现“断言 `function != NULL' failed”

> ID：13665733
> 
> 赞同：0
> 
> 时间：2012-12-02T02:01:50.563
> 
> 标签：javascript, gnome, glib

我正在尝试从 Seed 调用 CLib API。在 JS 中有一个 setTimout API。但不是在种子中。
所以我用 GLib 做一个`delay`函数：

```
delay = function(time, func) {
  return GLib.timeout_add(time, func);
}; 
```

它给出了错误：

```
(seed:26406): GLib-CRITICAL **: g_timeout_add_full: assertion `function != NULL' failed

** (seed:26406): CRITICAL **: Line 9 in w.js: ConversionError Can not convert Javascript value to boolean 
```

写它的正确方法是什么？

由于我没有找到 Seed 的详细 JS API。我试图阅读 C 的文档。它看起来很糟糕..
[http://developer.gnome.org/pygobject/stable/glib-functions.html#function-glib--get-current-time](http://developer.gnome.org/pygobject/stable/glib-functions.html#function-glib--get-current-time)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T11:49:35.940

GLib.timeout_add 对应于[g_timeout_add_full](http://developer.gnome.org/glib/stable/glib-The-Main-Event-Loop.html#g-timeout-add-full)。您缺少一个参数（优先级）...第三个参数应该是回调，但是由于您没有传递任何东西，因此种子将尝试使用 NULL。

[在种子示例存储库的](http://git.gnome.org/browse/seed-examples/)[glib/timeout.js](http://git.gnome.org/browse/seed-examples/tree/glib/timeout.js)中有一个在种子中使用超时的示例。

# jquery - 将标志添加到国家/地区选择下拉列表

> ID：13665734
> 
> 赞同：0
> 
> 时间：2012-12-02T02:02:01.363
> 
> 标签：jquery

我正在使用我在谷歌上找到的预制列表构建一个国家选择器，以及一种在 roberkules 发布在 stackoverflow 上的 png 精灵上精确定位标志的智能方法（http://stackoverflow.com/questions/5409780/html-country -list-with-flags）。

我是初学者，尽管我了解每个部分的工作原理，但我不明白如何“让”jQuery 读取 ISO 代码，然后将其应用于每个国家/地区。我还添加`<i></i>`了第一个国家，看看它是否至少会放西班牙国旗，但什么也没有。

！我知道有一个类似的问题，但它使用手动 css 坐标，我希望它与这个 JavaScript 中的方法一起工作：

```
(function($) {
// size = flag size + spacing
var default_size = {
    w: 20,
    h: 15
};

function calcPos(letter, size) {
    return -(letter.toLowerCase().charCodeAt(0) - 97) * size;
}

$.fn.setFlagPosition = function(iso, size) {
    size || (size = default_size);

    return $(this).css('background-position',
        [calcPos(iso[1], size.w), 'px ', calcPos(iso[0], size.h), 'px'].join(''));
};
})(jQuery);

// USAGE:

(function($) {

$(function() {
    // on load:
    $('.country i').setFlagPosition('es');

});

})(jQuery);​ 
```

[http://jsfiddle.net/3TvWs/](http://jsfiddle.net/3TvWs/)是我现在所在的位置。

任何人都可以提供帮助，甚至只是一个提示吗？

编辑：对不起，我意识到我解释得很糟糕。（标志）西班牙只是精确定位如何工作的一个例子。我实际上的意思是旗帜在下拉列表中，根本没有那个西班牙气泡。很抱歉对于这个误会。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T02:23:33.730

设置事件处理程序以侦听下拉菜单事件上的更改事件并调用`setFlagPosition`它。

```
$('select[name="country"]').on('change', function(){
    $('.country i').setFlagPosition($(this).val())[0].nextSibling.nodeValue = $(':selected', this).text();
}); 
```

[http://jsfiddle.net/mowglisanu/3TvWs/1/](http://jsfiddle.net/mowglisanu/3TvWs/1/)

# javascript - 从用户浏览器的 js 文件中调用 ajax

> ID：13665737
> 
> 赞同：0
> 
> 时间：2012-12-02T02:02:21.507
> 
> 标签：javascript, jquery, ajax

我有一个书签，用户将其添加到他们自己的浏览器书签工具栏中，该工具栏从他们正在查看的页面中收集图像。

我想在用户每次点击任何站点时记录并将数据存储在 mysql 表中。所以我使用 ajax 调用发布到一个 php 文件，该文件处理发送给它的数据。

但是，这有时有效，有时无效。意思是，它适用于某些网站，而不适用于其他网站。

我正在尝试的是：

```
(function()
{ // declare variables e.g. div.ids, div content etc then display it
......

    //log the click
    var dataString = '&url=' + encodeURIComponent(window.location.href) + '&page_title=' + encodeURIComponent(document.title);
    $.ajax({
    type: "POST", // form method
    url: "http://myurl.com/includes/log_clicks.php",// destination
    data: dataString,
    cache: false
    });
    //END log the click

})(); 
```

当它不起作用并且我使用 Firebug 找出原因时，我有时会收到错误消息：`TypeError: $ is undefined $.ajax({`

有时它仍然发布到 php 文件但没有数据

有没有更好的方法从用户浏览器的 js 文件中调用 ajax？

根据建议，我尝试通过简单地修改其中一个变量来加载 jquery：

```
div.innerHTML = '<script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script><div class=....'; 
```

但这并没有什么区别

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T02:11:28.780

You need jQuery present on the page in order to perform this. You will need to load jQuery if not present. A great approach is outlined [here](http://www.learningjquery.com/2009/04/better-stronger-safer-jquerify-bookmarklet) using the jQuerify code which actually just loads a portion of jQuery functionality that is needed.

# xml - 使用 XML 的 Flex Tree 在将项目拖出文件夹节点后复制项目

> ID：13665739
> 
> 赞同：1
> 
> 时间：2012-12-02T02:02:30.643
> 
> 标签：xml, flash, apache-flex, actionscript, tree

在我使用 Flex 构建的应用程序中，我有一个以 XML 作为其数据提供者的 Flex 树。用户需要能够创建图层和文件夹来保存这些图层（想想 Photoshop）。用户还需要能够随意重新排列这些项目，并将图层拖到文件夹中（如果需要，还可以将文件夹拖到其他文件夹中，等等）。

这是我制作的一个测试应用程序，展示了我正在尝试做的事情。为简单起见，我已将其简化为尽可能基本。

*（注意：我在我的代码中创建带有一个虚拟节点的 XML，然后在运行时删除该节点。这是我发现的唯一方法，它会使 Tree 在启动时完全空白。（只是有一个空的根节点会导致该根节点在树中可见，即使 showRoot 为 false。）如果有更好的方法来实现该效果，请告诉我。）*

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600">

    <fx:Script>
        <![CDATA[
            import com.custom.model.service.XMLService;

            import mx.events.DragEvent;
            import mx.events.FlexEvent;
            import mx.utils.ObjectUtil;

            protected function treeInit(event:FlexEvent):void
            {
                layersTree.expandChildrenOf(layers_xml, true);

                /*delete the dummy XML node so that the tree is clean on startup 
                and doesn't show the root folder*/
                XMLService.deleteNodeById(layers_xml, 'dummy');
            }

            protected function newFolderClick(event:MouseEvent):void
            {
                // Form New XML Node..
                var xmlObj:Object = XMLService.formFolderXML();

                //...and add it to the XML file.
                if(!layers_xml.children()[0]){
                    //if there are no child nodes, add normally
                    layers_xml.source = xmlObj.xmlNode;
                }else{
                    //if there are child nodes, add them before the previous node
                    layers_xml.prependChild(xmlObj.xmlNode);
                }

                /*immediately expand the folders to allow them to be dragged into,
                closed folders cannot be dragged into*/
                layersTree.expandChildrenOf(layers_xml, true);
            }

            protected function newTextLayerClick(event:MouseEvent):void
            {
                // Form New XML Node..
                var xmlObj:Object = XMLService.formTextLayerXML();

                //...and add it to the XML file.
                if(!layers_xml.children()[0]){
                    //if there are no child nodes, add normally
                    layers_xml.source = xmlObj.xmlNode;
                }else{
                    //if there are child nodes, add them before the previous node
                    layers_xml.prependChild(xmlObj.xmlNode);
                }

                //programatically select THIS item so it highlights in the tree
                layersTree.selectedIndex = (layersTree.showRoot) ? 1 : 0;
            }

            protected function onDragDrop(event:DragEvent):void
            {
                trace('action:', event.action);
                trace('dragDrop', ObjectUtil.toString(layers_xml));
            }

            protected function onDragComplete(event:DragEvent):void
            {
                trace('action:', event.action);
                trace('dragComplete', ObjectUtil.toString(layers_xml));
            }

        ]]>
    </fx:Script>

    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->

        <fx:XML id="layers_xml">
            <layers label="root" id="root">
                <layer label="DummyLayer2" type="layer" id="dummy" isVisible="false" />
            </layers>
        </fx:XML>

    </fx:Declarations>

    <s:VGroup gap="0" width="100%">

        <mx:Tree id="layersTree" width="100%" minHeight="41" allowMultipleSelection="false"
                 borderVisible="false" creationComplete="treeInit(event)"
                 dataProvider="{layers_xml}" dragEnabled="true" dropEnabled="true" 
                 focusColor="#FFFFFF" labelField="@label"
                 rollOverColor="#D1EEEE" selectionColor="#D1EEEE" showRoot="false" 
                 dragDrop="onDragDrop(event)" dragComplete="onDragComplete(event)"/>

        <s:Group width="100%">
            <s:HGroup id="layerButtons" horizontalCenter="0">
                <s:Button id="newFolderBtn" label="Folder" buttonMode="true"
                         click="newFolderClick(event)"/>
                <s:Button id="newTextFieldBtn" label="TextLayer" buttonMode="true"
                    click="newTextLayerClick(event)" />
            </s:HGroup>
        </s:Group>

    </s:VGroup>

</s:Application> 
```

这是我用来生成要插入到树中的 XML 节点的类 (XMLService)。

```
package com.custom.model.service
{
import flash.events.EventDispatcher;
import flash.events.IEventDispatcher;

public class XMLService extends EventDispatcher
{

    private static var _folderLayerCount:int = 0;
    private static var _textLayerCount:int = 0;
    private static var _layerName:String;
    private static var _layerId:String;

    public function XMLService(target:IEventDispatcher=null)
    {
        super(target);
    }

    private static function randomId(length:int = 9):String{
        //function to generate randomId for XML
        var chars:String = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
        var num_chars:Number = chars.length - 1;
        var randomChar:String = "";

        for (var i:Number = 0; i < length; i++){
            randomChar += chars.charAt(Math.floor(Math.random() * num_chars));
        }
        return randomChar;
    }

    public static function formTextLayerXML(name:String = null):Object {
        //this static function forms the xml node for text layers.
        _textLayerCount++;
        _layerId = randomId();
        _layerName = (name != null) ? name : ('Text Layer ' + _textLayerCount);

        var textNode:XML = new XML('<layer label="' + _layerName + '" type="textlayer" id="'+ _layerId +'" isVisible="true" />');

        //returns the node and the unique id as a string    
        return {xmlNode : textNode, id : _layerId};
    }

    public static function formFolderXML():Object {
        //this static function forms the xml node for folders.
        _folderLayerCount++;
        _layerId = randomId();
        _layerName = 'Folder ' + _folderLayerCount;

        var folderNode:XML = new XML('<folder label="' + _layerName + '" type="folder" id="'+ _layerId +'" isBranch="true" isVisible="true" />');
        //isBranch = true makes the node behave as a folder, even if it's empty

        //returns the node and the unique id as a string
        return {xmlNode: folderNode, id: _layerId}; 
    }

    public static function deleteNodeById(xml:XML, idToDelete:String):void {

        var count:int = 0; /*have to keep track of our own count
        because targeting will not work for xml deletes */
        var descendNodes:XMLList = xml.descendants();

        for each (var layer:XML in descendNodes) {
            if(descendNodes[count].@id == idToDelete) {
                delete descendNodes[count];
            }
            count++;
        }
    }

}
} 
```

我遇到的问题是，当创建文件夹和图层并将图层拖入文件夹时，一旦将该文件夹拖出文件夹，就会创建图层的副本而不是移动图层。

动态创建的文件夹和图层：

![动态创建的文件夹和图层](../Images/873437f8e538896f787cdd9ac4692f6b.png)

在文件夹内拖动一个图层：

![在文件夹内拖动图层](../Images/0c9c8a4f71fadf56cf23906b4c6981d5.png)

如果现在将图层拖到文件夹外部（及上方）会发生什么情况：

![如果现在将图层拖到文件夹外部（及上方）会发生什么情况](../Images/5e4e8be121e2394cc715e20c7c3ee271.png)

当在 dragComplete 上跟踪 layers_xml 时，您可以在 XML 中看到这种情况。

```
<layers label="root" id="root">
  <layer label="Text Layer 1" type="textlayer" id="GMccFXr5m" isVisible="true"/>
  <folder label="Folder 1" type="folder" id="JfoN1yo1I" isBranch="true" isVisible="true">
    <layer label="Text Layer 1" type="textlayer" id="GMccFXr5m" isVisible="true"/>
  </folder>
</layers> 
```

“文件夹 1”中的文本层（“文本层 1”）被复制到文件夹节点之外，而不是移动到文件夹节点之外。

现在这是奇怪的部分。

如果在 Tree Flex 组件中将 showRoot 设置为 true，此问题就会消失。问题是在树中可见的根节点是不可取的。

我们对 Tree 组件进行了这个小改动：

```
showRoot="true" 
```

如果在 showRoot 为真时采取了相同的步骤，现在看看正在跟踪的 layers_xml：

```
<layers label="root" id="root">
  <layer label="Text Layer 1" type="textlayer" id="nwdwAwlML" isVisible="true"/>
  <folder label="Folder 1" type="folder" id="TdVbaPvPB" isBranch="true" isVisible="true"/>
</layers> 
```

我在 Flex 中遇到过错误吗？或者我的代码中有什么导致这种情况发生？

虽然感谢任何回应或解释为什么会发生这种情况，但建议我使用除 XML 之外的任何类型的 dataProvider 的答案不会有太大帮助，因为我正在使用它构建的应用程序离最后阶段太远了做出如此剧烈的改变。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T15:40:55.197

经过一番研究，问题已经解决。

这个问题的原因确实是 Flex 中的一个错误，因为 Flex 在向 Tree 控件动态添加项目时会变得不稳定（而不是拥有一个可以随意重新排列的固定数据集）。

解决此问题的方法是捕获当前`openItems`and的快照`scrollPosition`，然后手动重新附加`dataProvider`并重新验证整个事物，因此 Flex 不会对树的当前结构感到困惑。

我已经构建了该函数并在`dragComplete`事件上调用了该函数。

```
protected function onDragComplete(event:DragEvent):void {
     //resetting the entire tree after every drag completes
    forceTreeRedraw(layersTree, layers_xml);
}

private function forceTreeRedraw(tree:Tree, dataProvider:Object):void {
    var scrollPosition:Number = tree.verticalScrollPosition;
    var openItems:Object = tree.openItems;
    tree.dataProvider = dataProvider;
    tree.openItems = openItems;
    tree.validateNow();
    tree.verticalScrollPosition = scrollPosition;
} 
```

问题神奇地解决了，毛茸茸的兔子正在嬉戏，世界一切都很好。

所有功劳归功于此处发布的答案： [Flex：更新树控件](https://stackoverflow.com/questions/416139/flex-updating-a-tree-control)

# javascript - 跳过第一个可选参数并将第二个传递给主干 model.save

> ID：13665752
> 
> 赞同：3
> 
> 时间：2012-12-02T02:04:58.550
> 
> 标签：javascript, backbone.js

Backbone 的[model.save()](http://backbonejs.org/#Model-save)方法具有以下签名：

`model.save([attributes], [options])`

我想调用它，但我不想传递任何属性，只传递选项。我需要这种方式，因为我在使用保存之前设置了属性`model.set(attributes)`。

我怎样才能只传递一个对象`model.save()`但表明它是选项对象而不是属性对象？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T03:02:22.273

文档对此很明确，因此我们必须查看[源代码](https://github.com/documentcloud/backbone/blob/master/backbone.js#L353)：

```
save: function(key, val, options) {
  var attrs, current, done;

  // Handle both `"key", value` and `{key: value}` -style arguments.
  if (key == null || _.isObject(key)) {
    attrs = key;
    options = val;
  } else if (key != null) {
    (attrs = {})[key] = val;
  } 
```

在其下方，您将看到各种`if (attrs ...)`检查。所以如果你说

```
m.save(null, options) 
```

您将按原样保存模型，并且可以设置您的`options`. 此外，如果你这样说：

```
m.save(some_attrs, options); 
```

那么这（或多或少）与：

```
m.set(some_attrs);
m.save(null, options); 
```

# java - 将变量和整数作为用户输入

> ID：13665755
> 
> 赞同：0
> 
> 时间：2012-12-02T02:05:25.903
> 
> 标签：java

我在考虑这个问题，想知道字符串和整数是否可以在同一输入行上。例如，用户输入“A=2”、“B=3”和“C= A+B”，其中 C 等于 5。如果是这样，我必须知道哪种技术？我要查什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T02:16:22.743

一个好的起点是[HashMap](http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html)和[String.split](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29)。

你可以尝试这样的事情：

```
// In main function
HashMap<String, Integer> map = new HashMap<String, Integer>();
for (String arg : args) {
    String[] split = arg.split(Pattern.quote("="));
    if (split.length > 1) {
        // It had an equals sign.
        String var = split[0], value = split[1];
        map.put(var, Integer.parseInt(value));
        System.out.println(var + " is now " + value); 
    }
} 
```

这不会解释`A+B`，但我会把它作为一个谜题留给你。

*提示*：[map.containsKey](http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html#containsKey%28java.lang.Object%29)、[map.get](http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html#get%28java.lang.Object%29)。

* * *

**编辑**

要回答您的问题：

```
for (int i=0; i<args.length; i++) {
    String arg = args[i];
    // do something with arg
} 
```

是相同的

```
for (String arg : args) {
    // do something with arg
} 
```

后者称为“for-each”或“for-in”。该`args`变量包含命令行参数。我假设这段代码在 main 方法中，它的方法签名应该是.`public static void main(`**`String[] args`**`)`

该`put`方法将键/值对添加到 HashMap。基本上，hashmap 是键到值的关联（映射）。每个键可以有一个值，并`put`覆盖，所以如果你运行

```
map.put("a", 1);
map.put("b", 2);
map.put("a", 3); 
```

那么以下陈述为真：

```
map.get("a") == 3
map.get("b") == 2
map.get("c") == null
map.get("asdf") == null 
```

有关更多信息，请查看[地图教程](http://docs.oracle.com/javase/tutorial/collections/interfaces/map.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T02:55:27.327

如果您正在尝试检测命令行参数，那么我会考虑这样的方法：

首先，您需要确保用户实际输入了一些参数：

```
public static void main(String[] args)
{
     if(args.length > 0)
     {
          //Check each set of arguments.
     }
     else
     {
          System.out.println("Invalid number of arguments");
          System.exit(1);
          // Here you can either do a try-catch and throw an exception or just simply exit if the user doesn't input the `enter code here`correct number of arguments. 
     }
} 
```

棘手的部分将是确定用户是否输入了 A 或 B 或 C，这将导致一定量的解析。但是您需要通过告诉用户使用格式或搜索字符串来知道它在输入字符串中的位置。

假设您让用户使用以下方法输入参数：

```
[program] A=2 B=3 C=A+B 
```

由于 WChargin 指出 args 是用空格分隔的，这让我没有想到，我决定将每组参数分解为它们自己的字符串数组。对于 A 和 BI，通过字符“=”的分隔符拆分字符串，如下所示：

```
if(args[i].toUpperCase().startsWith("A"))   
{
     resultA = args[i].split("=");  //Split by the delimter "="
     a = Double.parseDouble(resultA[1]);
} 
```

其中 A 和 B 将产生数组 {A,2}, {B,3}。CI 将分裂两次。首先由字符“=”生成{C,A+B}，然后拆分每个字符串，生成{,A,+,B}。注意 split() 在 resultC[0] 中产生一个空字符串，所以我们从 1 开始迭代。

我们将简单地检查 args 的长度，并遍历以查找参数值：

```
public static void main(String[] args)
{
    double a = 0;
    double b = 0; 
    double c = 0;
    String[] resultA = null;
    String[] resultB = null;
    String[] resultC = null;
    String[] result = null;

    if(args.length > 0)
    {
        for(int i=0; i < args.length; i++)
        {   
            if(args[i].toUpperCase().startsWith("A"))   // Implemented startsWith() thanks to WChargin
            {
                resultA = args[i].split("=");   //Split by the delimter "="
                a = Double.parseDouble(resultA[1]);
            }
            else if(args[i].toUpperCase().startsWith("B"))
            {
                resultB = args[i].split("=");
                b = Double.parseDouble(resultB[1]);
            }
            else if(args[i].toUpperCase().startsWith("C"))
            {
                result = args[i].split("="); //We don't need C, split all of the arguments
                resultC = result[1].split(""); //This way we have an array of strings for each value to iterate through
                // The only problem with split("") is that we will get an empty string at the beginning of the array

                for(int j=1; j < resultC.length; j++)
                {
                    if(resultC[j].toUpperCase().startsWith("A"))
                    {
                        if(resultC[j+1].equals("+"))
                        {
                            if(resultC[j+2].toUpperCase().startsWith("A"))
                            {
                                c = a + a;
                                break;
                                // Once we get out answer, break otherwise we'll get a ArrayIndexOutOfBoundsException because the program will continue iterating
                            }
                            else if(resultC[j+2].toUpperCase().startsWith("B"))
                            {
                                c = a + b;
                                break;
                            }
                            else
                            {
                                System.out.println("Argument parse error");
                            }
                        }
                        else if(resultC[j+1].equals("-"))
                        {
                            if(resultC[j+2].toUpperCase().startsWith("A"))
                            {
                                c = a - a;
                                break;
                            }
                            else if(resultC[j+2].toUpperCase().startsWith("B"))
                            {
                                c = a - b;
                                break;
                            }
                            else
                            {
                                System.out.println("Argument parse error");
                            }
                        }
                        else if(resultC[j+1].equals("*"))
                        {
                            if(resultC[j+2].toUpperCase().startsWith("A"))
                            {
                                c = a * a;
                                break;
                            }
                            else if(resultC[j+2].toUpperCase().startsWith("B"))
                            {
                                c = a * b;
                                break;
                            }
                            else
                            {
                                System.out.println("Argument parse error");
                            }
                        }
                        else if(resultC[j+1].equals("/"))
                        {
                            if(resultC[j+2].toUpperCase().startsWith("A"))
                            {
                                c = a / a;
                                break;
                            }
                            else if(resultC[j+2].toUpperCase().startsWith("B"))
                            {
                                c = a / b;
                            }
                            else
                            {
                                System.out.println("Argument parse error");
                            }
                        }
                    }
                    else if(resultC[j].toUpperCase().startsWith("B"))
                    {
                        if(resultC[j+1].equals("+"))
                        {
                            if(resultC[j+2].toUpperCase().startsWith("A"))
                            {
                                c = b + a;
                                break;
                            }
                            else if(resultC[j+2].toUpperCase().startsWith("B"))
                            {
                                c = b + b;
                                break;
                            }
                            else
                            {
                                System.out.println("Argument parse error");
                            }
                        }
                        else if(resultC[j+1].equals("-"))
                        {
                            if(resultC[j+2].toUpperCase().startsWith("A"))
                            {
                                c = b - a;
                                break;
                            }
                            else if(resultC[j+2].toUpperCase().startsWith("B"))
                            {
                                c = b - b;
                                break;
                            }
                            else
                            {
                                System.out.println("Argument parse error");
                            }
                        }
                        else if(resultC[j+1].equals("*"))
                        {
                            if(resultC[j+2].toUpperCase().startsWith("A"))
                            {
                                c = b * a;
                                break;
                            }
                            else if(resultC[j+2].toUpperCase().startsWith("B"))
                            {
                                c = b * b;
                                break;
                            }
                            else
                            {
                                System.out.println("Argument parse error");
                            }
                        }
                        else if(resultC[j+1].equals("/"))
                        {
                            if(resultC[j+2].toUpperCase().startsWith("A"))
                            {
                                c = b / a;
                                break;
                            }
                            else if(resultC[j+2].toUpperCase().startsWith("B"))
                            {
                                c = b / b;
                                break;
                            }
                            else
                            {
                                System.out.println("Argument parse error");
                            }
                        }
                    }
                    else
                    {
                        System.out.println("Argument error in C");
                        System.exit(1);
                    }
                }
            }
        }
    }
    else
    {
        System.out.println("Invalid number of arguments");
        System.exit(1);
    }

    System.out.printf("A: %f\nB: %f\nC: %f\n", a, b, c);
} 
```

请注意，我可能没有考虑所有可能性。

通过命令行参数解析肯定有更简单的方法。我给你的方法太长了。

我希望这可以帮助你！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T02:31:26.370

首先你必须做字符串匹配。其中背面'='中的位置编号为'2'，正面'='中的位置字符串为'A'并将字符串'A'保存到数字索引数组中，并将数字'2'保存到值索引数组中A. 然后技术使用 B=2 一样。您使用字符串匹配检测到的最后一个。在背面和正面运算符上，例如“=”是“A”和“B”。并将索引的数组与此字符串相同。和总和值。然后将总和值保存到变量字符串 C 中，就像保存变量 A 和 B

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T03:04:20.643

如果您使用 Java 6+，那么脚本非常有用：

```
public static void main(String[] args) {
    try {
        ScriptEngineManager mgr = new ScriptEngineManager();
        ScriptEngine scripEngine = mgr.getEngineByExtension("js");

        scripEngine.eval("A=2; B=3; C=A+B");

        System.out.println("" + scripEngine.get("A") + "+" + scripEngine.get("B") + "=" + scripEngine.get("C"));
    } catch (ScriptException e) {
        e.printStackTrace();
    }
} 
```

输出：2.0+3.0=5.0

# android - SSL using HttpClient on Android

> ID：13665757
> 
> 赞同：0
> 
> 时间：2012-12-02T02:06:14.967
> 
> 标签：android, json, ssl, httpclient

I have my app running a DefaultHttpClient and works fine connecting with the Apache Server on Xampp. I need to implement SSL but I can't I see other questions but in all the answer is accepting all the connections. Any idea how can I implement SSL modifying a little the next code?

```
public class JSONParser {

static InputStream is = null;
static JSONObject jObj = null;
static String json = "";

// constructor
public JSONParser() {

}

// function get json from url
// by making HTTP POST or GET method
public JSONObject makeHttpRequest(String url, String method,
        List<NameValuePair> params) {

    // Making HTTP request
    try {

        // check for request method
        if(method == "POST"){
            // request method is POST
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);
            httpPost.setEntity(new UrlEncodedFormEntity(params));

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();

        }else if(method == "GET"){
            // request method is GET
            DefaultHttpClient httpClient = new DefaultHttpClient();
            String paramString = URLEncodedUtils.format(params, "utf-8");
            url += "?" + paramString;
            HttpGet httpGet = new HttpGet(url);

            HttpResponse httpResponse = httpClient.execute(httpGet);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();
        }           

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        json = sb.toString();
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    // try parse the string to a JSON object
    try {
        jObj = new JSONObject(json);
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

    // return JSON String
    return jObj;
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T22:44:17.303

将您的网址更改为`https`就足够了。但是您应该将您的服务器证书添加为受信任的设备。您还可以编写虚拟信任存储并将您的 https 方案注册到 HttpClient 实例以克服此信任问题。

# installation - NSIS - Run program on finish only if installed

> ID：13665758
> 
> 赞同：4
> 
> 时间：2012-12-02T02:06:52.040
> 
> 标签：installation, nsis

I have a working NSIS Modern UI 2 script that has five components. One of them is the main application, and there are four helper applications. Due to the nature of the applications, none of them requires the other to run; hence, they are all optional installs. This includes the main application.

At the finish page, I can have an option to start the main application with

```
!define MUI_FINISHPAGE_RUN "$INSTDIR\MyProgram.exe"
!define MUI_FINISHPAGE_RUN_TEXT "Start the main program" 
```

as long as that goes before the

```
!insertmacro MUI_PAGE_FINISH 
```

command. However, I don't want the checkbox to be visible (or at least enabled) if the user doesn't install the main application.

I've tried putting the first two lines inside the `Section MainSection`, but it doesn't show the box because by then, the UI has already been created.

I'd prefer not to always have it enabled and point to a function that runs if it's been installed, and shows a `MessageBox` otherwise.

Is there a way to do this?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-02T14:14:43.810

这些 MUI 定义在编译时使用，您需要在运行时修改复选框：

```
!include LogicLib.nsh
!include MUI2.nsh
!insertmacro MUI_PAGE_COMPONENTS
!insertmacro MUI_PAGE_INSTFILES
!define MUI_FINISHPAGE_RUN "$instdir\Maybe.exe"
!define MUI_PAGE_CUSTOMFUNCTION_SHOW ModifyRunCheckbox
!insertmacro MUI_PAGE_FINISH
!insertmacro MUI_LANGUAGE English

Section "Maybe" SID_MAYBE
; File "Maybe.exe"
SectionEnd

Function ModifyRunCheckbox
${IfNot} ${SectionIsSelected} ${SID_MAYBE} ; You could also check if the file exists...
    SendMessage $mui.FinishPage.Run ${BM_SETCHECK} ${BST_UNCHECKED} 0
    EnableWindow $mui.FinishPage.Run 0 ; Or ShowWindow $mui.FinishPage.Run 0
${EndIf}
FunctionEnd 
```

# profiling - is it possible to do multiple runs in Intel VTune Amplifier XE

> ID：13665762
> 
> 赞同：2
> 
> 时间：2012-12-02T02:07:14.380
> 
> 标签：profiling, profiler, intel, intel-vtune

Is there a way to run same test(for example Lightweight Hotspots) multiple times in Intel VTune Amplifier XE ??? It is annoying to do multiple clicks to perform a single test. I have looked though documentation, but found nothing.
Thanks !

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T19:15:23.087

There are two things to advice:

1.  **First**, once you have set up a project and collected Lightweight Hotspots for it, you should be able to just right-click the project in the Project Navigator (if you are using the standalone GUI) or Solution Explorer (if you are using Visual Studio integration) and click the recently used analysis type to run it again.
2.  **Second**, if you are running really many collections, it may be that using amplxe-cl command line is the way to go. The easiest way to set up the command line to collect the data is to use Get Command Line dialog available from New Analysis window by clicking a button at the right-bottom corner. A copy-paste to a console should be mostly enough.

A couple of screenshot below should support the two bullets above.

**Running a recent analysis again from Project Navigator:** ![Running a recent analysis again from Project Navigator](../Images/5bf632defc217c00550bdc9992fed999.png)

**Generating a command line for VTune collection with amplxe-cl:** ![Generating a command line for VTune collection with amplxe-cl](../Images/d6dec4b7a3f664b7ecc58d7804c94ffa.png)

# ruby-on-rails - shared partials error undefined method `empty?' for nil:NilClass

> ID：13665763
> 
> 赞同：0
> 
> 时间：2012-12-02T02:07:36.040
> 
> 标签：ruby-on-rails, model-view-controller, local-variables, renderpartial, partials

I've create a partial (**views/cart/_cart.html.erb**) for my applications shopping cart. I'm rendering it in only in my **views/layouts/application.html.erb** file. But when I run it I'm getting a NoMethodError on every page other than the **views/cart/_cart.index.erb**, which I suspect is because it shares the same controller as the partial being rendered.

I've been looking everywhere for an answer & believe it has something to do with how I'm passing variables when rendering the partial, I'll really appreciate it if someone can have a look?

All code can be found here: [https://github.com/rossmc/topsnowboards](https://github.com/rossmc/topsnowboards)

My code for my partial (**views/cart/_cart.html.erb**) begins:

```
<% @cart = cart%>

<h1>Your Cart</h1>

<% if @cart.empty? %>
    <p>There is nothing in your shopping Cart</p>
<% end %>

<% total = 0 %>

<!-- More code displaying the rest of the cart omitted for brevity 
```

The partial is rendered in **views/layouts/application.html.erb** with:

```
<%= render :partial => "/cart/cart", :locals => { :cart => @cart } 
```

The **error message** Rails is throwing back at me when I run it is:

```
NoMethodError in Site#home

Showing Server Side/PROJ-Server Side/app/views/cart/_cart.html.erb where line #5 raised:

undefined method `empty?' for nil:NilClass

Extracted source (around line #5):

2: 
3: <h1>Your Cart</h1>
4: 
5: <% if @cart.empty? %>
6:  <p>There is nothing in your shopping Cart</p>
7: <% end %>
8: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T08:08:47.803

您在此处提到的代码中存在一些冗余。`@cart`是一个实例变量，它应该可供您的部分使用，而无需将其作为本地传递（当然取决于您首先定义它的位置），因此您不需要购物车部分中的第一行。由于您在应用程序布局中呈现购物车的一部分，因此它将在使用此布局的每个页面（通常是整个站点）中呈现。

您需要使`@cart`变量可用于站点的每个页面（即每个控制器）。由于每个控制器都继承自您的`ApplicationController`，因此在此处定义是有意义的`@cart`。只需将 a 添加`before_filter`到`ApplicationController`定义`@cart`. 快速浏览您的代码，我说这应该可以解决问题：

```
# app/controllers/application_controller.rb
class ApplicationController < ActionController::Base
  protect_from_forgery
  before_filter :the_cart

  private

  def the_cart
    @cart = session[:cart] || {}
  end

  # the rest of the code ...
end 
```

# ruby-on-rails - jQuery Mobile 和 Rails RESTful 操作

> ID：13665774
> 
> 赞同：1
> 
> 时间：2012-12-02T02:11:09.453
> 
> 标签：ruby-on-rails, rest, jquery-mobile

我对 jQuery mobile 如何与 Rails 中的 RESTful 操作一起工作有疑问。

对于这个解释，假设我有一个名为`Planet`and a的资源，`PlanetsController`并且我试图通过从to`Planet`发送一个发布请求来创建一个新资源。如果此操作成功，我的 URL 现在是即使它实际上显示的是. 如果操作失败，我的 URL 现在也不是.`/planets/new``/planets``/planets``/planets/1``/planets/``/planets/new`

在这两种情况下，如果我单击 Back 按钮返回到 index 操作，它将不起作用，因为 jQuery Mobile 认为我已经在`/planets`. 我必须重新加载页面才能返回。

有没有办法解决这个问题，以便可以使用正常的 Rails RESTful 操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T19:02:31.390

我也有同样的问题，我只是在我的表单中添加了 data-ajax = "false" ，但缺点是没有转换。或者您可以按照我在这里找到的另一个解决方案：http: [//www.adobe.com/devnet/html5/articles/jquery-mobile-and-rails.html#articlecontentAdobe_numberedheader_1](http://www.adobe.com/devnet/html5/articles/jquery-mobile-and-rails.html#articlecontentAdobe_numberedheader_1)

# javascript - 有没有办法获取选定区域的底层 HTML 代码？

> ID：13665776
> 
> 赞同：1
> 
> 时间：2012-12-02T02:11:14.923
> 
> 标签：javascript, jquery

我为我们的网站编写的内容管理系统使用书签来发布文章，它使用 document.getSelection() 读取页面上的选定区域。但在某些情况下，读取选定区域的底层 HTML 代码以及获取链接和其他 HTML 格式会非常有用。

任何人都知道 jQuery 插件或其他 Javascript 技术来访问生成选定区域的原始 HTML？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T02:47:08.437

首先，正如你所说，得到[选择](https://developer.mozilla.org/en-US/docs/DOM/selection)

```
var sel = document.getSelection(); 
```

这也有一些关于选定节点的详细信息，但如果你想做更多，那么将它转换为一个[范围](https://developer.mozilla.org/en-US/docs/DOM/range)（如果`.rangeCount > 1`你可能想在这里循环）

```
var range = sel.getRangeAt(0); 
```

接下来，使用`range.commonAncestorContainer`并`range.startContainer`遍历 DOM 树，执行任何你想做的事情，直到你到达`range.endContainer`.
所有这些节点都应该在选择中。

* * *

这是一些代码，它将返回所有（顶级）选定节点，并且可以选择对选择中的**每个**节点应用回调。

```
function selectedNodes(callback, context) {
    var sel = document.getSelection(),
        range = sel.getRangeAt(0),
        indices = [],
        nextNode = function nextNode(e) {
            if (e.childNodes.length > 0) return e.childNodes[0];
            while(!e.nextSibling && e.parentNode) e = e.parentNode;
            return e.nextSibling;
        },
        e = range.startContainer;
    if (callback) {
        callback.call(context, e);
        while(e !== range.endContainer) {
            e = nextNode(e);
            callback.call(context, e);
        }
        e = range.startContainer;
    }
    if (e === range.commonAncestorContainer) return [e];
    else {
        while (e !== range.commonAncestorContainer) {
            indices[0] = Array.prototype.indexOf.call(e.parentNode.childNodes, e);
            e = e.parentNode;
        }
        e = range.endContainer;
        while (e !== range.commonAncestorContainer) {
            indices[1] = Array.prototype.indexOf.call(e.parentNode.childNodes, e);
            e = e.parentNode;
        }
        return Array.prototype.slice.call(e.childNodes, indices[0], indices[1]+1);
    }
}

/*
selectedNodes(console.log, console);
node1
..
nodeN
[node1, .., nodeM] // only top-level
*/ 
```

# actionscript-3 - Best thinkflow to make a Chemistry game in Flash?

> ID：13665778
> 
> 赞同：-1
> 
> 时间：2012-12-02T02:11:51.777
> 
> 标签：actionscript-3, chemistry

So, as mentioned I'm doing some Flash this semester...I think I'd know how to do this in Python, with classes and all, but in AS3, everything is just so...detached.

I want to build a short chemistry game. You have 4 elements, fire, earth, wind and spirit, but the water is missing, the point is to make water. So you have on the stage, a fire_mc, a wind_mc, an earth_mc, a spirit_mc and the pot_mc. Clicking them adds a drop of them in the pot.

You have to put elements in there in a very specific order, but if you mess up, the count resets and you have to restart. The order is fire, spirit, earth, fire, spirit, wind. (very arbitrary at the moment, but let's say it's like that)

How would I make that in AS3?

(these tags are there to help people that want to build this specific kind of game)

This is my current code.

```
stop();
lvln.text="Phase 3 - Bargaining";
import flash.events.MouseEvent;
import flash.display.MovieClip;
import flash.events.Event;

const WIDTH:int=50;
const HEIGHT:int=50;
const SEPX:int=50;

var fireb:firebtn=new firebtn();
var spiritb:spiritbtn=new spiritbtn();
var earthb:earthbtn=new earthbtn();
var windb:windbtn=new windbtn();
var combo:Array=new Array();
var truecombo:Array=[fireb,spiritb,spiritb,windb,earthb];
var lastElm=combo[combo.length-1];

firebb.addEventListener(MouseEvent.CLICK, fire1);
windbb.addEventListener(MouseEvent.CLICK, wind1);
earthbb.addEventListener(MouseEvent.CLICK, earth1);
spiritbb.addEventListener(MouseEvent.CLICK, spirit1);

function add1(clip:DisplayObject)
{
    if (combo.length > 6) 
    {
        combo.shift();
        combo.push(clip);
        reorder();
    }
}

function reorder()
{
   for(var i:int = 0; i < combo.length; i++)
   {
       combo[i].x = i * 50;
   }
}

function fire1(e:MouseEvent)
{
    lastX+=SEPX;
    twist.gotoAndPlay(2);
    var fireb:firebtn=new firebtn();
    stage.addChild(fireb);
    add1(fireb);
    fireb.width=WIDTH;
    fireb.height=HEIGHT;
    fireb.x=lastX;
    fireb.y=lastY;
    pop.play();
}

function wind1(e:MouseEvent)
{
    lastX+=SEPX;
    twist.gotoAndPlay(2);
    var windb:windbtn=new windbtn();
    stage.addChild(windb);
    add1(fireb);
    windb.width=WIDTH;
    windb.height=HEIGHT;
    windb.x=lastX;
    windb.y=lastY;
    pop.play();
}

function earth1(e:MouseEvent)
{
    lastX+=SEPX;
    twist.gotoAndPlay(2);
    var earthb:earthbtn=new earthbtn();
    stage.addChild(earthb);
    add1(fireb);
    earthb.width=WIDTH;
    earthb.height=HEIGHT;
    earthb.x=lastX;
    earthb.y=lastY;
    pop.play();
}

function spirit1(e:MouseEvent)
{
    lastX+=SEPX;
    twist.gotoAndPlay(2);
    var spiritb:spiritbtn=new spiritbtn();
    stage.addChild(spiritb);
    combo.push(spiritb);
    spiritb.width=WIDTH;
    spiritb.height=HEIGHT;
    spiritb.x=lastX;
    spiritb.y=lastY;
    pop.play();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T15:54:54.207

我会这样做。所以你有4个元素。为它们中的每一个制作一个按钮/MovieClip（当您单击其中一个时，罐子会充满它）这是您必须处理的动画。但是要检查组合是否正确，请使用此代码

```
 import flash.events.MouseEvent;
    import flash.events.Event;

    var combination:Array=new Array(); //Array that loads elements being clicked
    var clength:Number = 0; // combination length for making water
    var truecombination:Array=new Array();  // Array that holds combination for making water
    truecombination.push("fire"); //first element
    truecombination.push("wind"); //second element
    truecombination.push("spirit"); //third element
    truecombination.push("fire"); //fourth element
    truecombination.push("wind"); // fifth element
    truecombination.push("earth"); //sixt element(you can go for more elements in your combination but remember to change the clength variable)

    //adding event listeners for elemnt buttons
    fire_mc.addEventListener(MouseEvent.CLICK, fclick);
    wind_mc.addEventListener(MouseEvent.CLICK, wclick);
    spirit_mc.addEventListener(MouseEvent.CLICK, sclick);
    earth_mc.addEventListener(MouseEvent.CLICK, eclick);

    //you can also add animation labels to the functions below to make the game more interesting
    function fclick(e:MouseEvent):void
    {
        combination.push("fire");
            clength+=1;
    }
    function wclick(e:MouseEvent):void
    {
        combination.push("wind");
            clength+=1;
    }
    function sclick(e:MouseEvent):void
    {
        combination.push("spirit");
            clength+=1;
    }
    function eclick(e:MouseEvent):void
    {
        combination.push("earth");
            clength+=1;
    }

    addEventListener(Event.ENTER_FRAME,loop);//making a loop function that checks the combination
    function loop(e:Event):void
    {
        if (truecombination.length => 6) //waiting for player to enter his combination
        {
            if (combination[clength-6] == "fire" && combination[clength-5] == "wind" && combination[clength-4] == "spirit" && combination[clength-3] == "fire" && combination[clength-2] == "wind" && combination[clength-1] == "earth") //checking if combination is true
            {

                trace("You Won");
            }
            else // and if it is not true...
            {
                //trace("You Lose");

            }
        }
    } 
```

我希望这会有所帮助

# phpstorm - phpstorm 未保存的文件颜色

> ID：13665779
> 
> 赞同：37
> 
> 时间：2012-12-02T02:12:14.350
> 
> 标签：phpstorm

如何查看 PHPstorm 上的文件是否已更改？

我需要在 ftp 上同步文件，当我保存 (ctrl+s) 时会发生这种情况，但是如果我有很多文件我无法跟踪它们，我如何查看是否有更改。

我试过用颜色，但没有用。

谢谢

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-12-02T02:26:54.127

`File`| `Settings`| `Editor`| `General`| `Editor Tabs`| **用星号标记修改的选项卡**

[![在此处输入图像描述](../Images/d8f9ae80929027d0ca60972ff63912d1.png)](https://i.stack.imgur.com/TjWVT.jpg)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-14T21:39:30.553

在 OSX 中，在顶部工具栏上，转到 PHPStorm > Preferences... > Editor > Editor Tabs，然后选择`Mark modified tabs with asterisk`. （然后击中`OK`底部）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-13T22:51:47.220

我正在寻找名称旁边的星号，因为接受的答案给了你。在我寻找答案的过程中，我还发现了另一种显示已更改文件的有用方法，在项目视图中单击项目名称旁边的向下箭头并选择“已更改文件”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-08-02T08:56:53.267

**PhpStorm 2019.2**

现在在`Settings`| `Editor`| `General`| `Editor Tabs`| `Appearance`| **标记已修改 (*)**

[![截图phpStoem2019设置](../Images/d25a453d840f9699cfef05103f7a9f7f.png)](https://i.stack.imgur.com/s3Oh9.png)

[更多的](https://intellij-support.jetbrains.com/hc/en-us/community/posts/206931095-How-can-I-see-if-a-file-has-been-saved?page=1#community_comment_360000681020)

# emacs - eldoc mode with python appears broken on OS X

> ID：13665780
> 
> 赞同：2
> 
> 时间：2012-12-02T02:12:21.793
> 
> 标签：emacs

I recently switched to OS X. So far I tried running the versions of Emacs from emacsforosx.org, as well as Vincent Goulet's Emacs build. In both of them, the eldoc mode constantly spews output into the Python inferior process, e.g. I see things like the following:

```
emacs.eargs("submission.comments", "import praw\n")
emacs.eargs("r.login", "import praw\n")
_emacs_out 
```

I imagine comint is supposed to eat this sort of output before it gets echoed to the buffer, but somehow this is broken. Does anyone have tips on how to troubleshoot this?

# javascript - How to use JavaScript & DOM on one html page to externally link to another html page

> ID：13665781
> 
> 赞同：2
> 
> 时间：2012-12-02T02:12:21.307
> 
> 标签：javascript, html, dom, external

So basically I have two html pages in the same folder. One of them is the homepage, while the other is a page that basically is a form. Once the person fills out the form and clicks the submit button, I would like to make it so that it automatically changes the homepages information with the information written out on the form using DOM.

What I have tried:

*   Using an external & same JavaScript file for each HTML document, Firefox console said that the `id` is `null`
*   Using global variables, did not work.

If I haven't worded this well enough or if you don't understand, please comment and tell me!

Here's an example of what I tried to do, didn't work because the `div` with id `type` is in a different HTML document.

```
function submitform(){
    var textbox = document.getElementsByName('name').item(0);
    value= textbox.value;
    window.alert(value);
    document.getElementById('type').innerHTML = value;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T02:22:41.383

表格页面：

```
function submitform(){
    var textbox = document.getElementsByName('name')[0];
    value = textbox.value;
    localStorage["name"] = value;                      //save it in localStorage
}                                                      //for later use 
```

主页：

```
function showStuff(){
    var value = localStorage["name"];                  //get the information back
    document.getElementById('type').innerHTML = value; //put it in
} 
```

`localStorage`[所有主要浏览器](http://caniuse.com/#search=localstorage)都支持。如果你需要支持<IE9，试试[jStorage](http://www.jstorage.info/)。
**尝试演示：http:** [//jsfiddle.net/DerekL/r4fXw/](http://jsfiddle.net/DerekL/r4fXw/)或[http://pastebin.com/SurbLhWZ](http://pastebin.com/SurbLhWZ)

* * *

## 为什么你的尝试都不起作用

1.  对每个 HTML 文档使用外部和相同的 JavaScript 文件，Firefox 控制台说 id 为空

    变量不会跨不同的网页共享。

2.  使用全局变量，不起作用。

    与#1 相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T02:26:01.397

将变量从另一个页面传递到一个页面需要某种形式的带有参数的查询，即。`newpage.php?newdata='This came from the old page'`. 您需要实现几个选项之一：如前所述，您可以将提交的数据存储在 cookie 中，然后在后续页面加载时检索它们，您可以使用实际的提交查询将数据发送回主页（见上文) 或者您可以使用 AJAX 例程将数据发送到主页，而无需任何类型的提交操作。

# text - Continuous text slideshow javascript (breaking news bar)

> ID：13665784
> 
> 赞同：1
> 
> 时间：2012-12-02T02:13:20.140
> 
> 标签：text, slider, slideshow

I'm trying to create a simple breaking news bar with continuously moving text. A single string of text moving and looping forever, and only stopping on hover. Do you know of any script like that? I've searched a lot but couldn't find one.

Cheers

* * *

So far I have this:

```
<script type="text/javascript">
$(function() {
    var ele   = $('#scroll');
    var speed = 25, scroll = 5, scrolling;

    $('#scroll-up').mouseenter(function() {
        // Scroll the element up
        scrolling = window.setInterval(function() {
            ele.scrollLeft( ele.scrollLeft() - scroll );
            autoPlay: true;
        }, speed);
    });

    $('#scroll-down').mouseenter(function() {
        // Scroll the element down
        scrolling = window.setInterval(function() {
            ele.scrollLeft( ele.scrollLeft() + scroll );
            autoPlay: true;
        }, speed);
    });

    $('#scroll-up, #scroll-down').bind({
        click: function(e) {
            // Prevent the default click action
            e.preventDefault();
        },
        mouseleave: function() {
            if (scrolling) {
                window.clearInterval(scrolling);
                scrolling = false;
            }
        }
    });
});
</script> 
```

Now I want to make it automatic, and make it loop infinitely. Any help?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T05:10:58.510

这是我根据您的示例一起破解的内容：http: [//jsfiddle.net/mcknz/jEGex/](http://jsfiddle.net/mcknz/jEGex/)

它从上到下滚动，然后回到顶部，但使用垂直空间来呈现循环的外观。我敢肯定，可以做得更优雅和更有活力。

HTML：

```
<div id="scroll">
    <br /><br /><br /><br /><br />
    One<br /><br /><br />
    Two<br /><br /><br />
    Three<br /><br /><br />
    Four<br /><br /><br />
    Five<br /><br /><br />
    Six<br /><br /><br />
    Seven<br /><br /><br />
    <br /><br /><br /><br />
</div>         
<br>
scroll top: <span id="scrollTop"/> 
```

JavaScript：

```
$(function() {
    var ele = $('#scroll');
    var speed = 35,
        scroll = 1,
        top = 0,
        maxTop = 500,
        scrolling;

    ele.mouseleave(function() {
        scrolling = window.setInterval(function() {
            top = top === maxTop ? 0 : ele.scrollTop() + scroll;
            ele.scrollTop(top);
            $('#scrollTop').text(top);
        }, speed);
    });

    ele.mouseenter(function() {
        if (scrolling) {
            window.clearInterval(scrolling);
            scrolling = false;
        }
    });

    ele.mouseleave();

});​ 
```

CSS

```
#scroll {
    width: 200px;
    height: 100px;
    overflow: hidden;
    padding: 4px;
    border: solid 1px #000;
}​ 
```

# asp.net - 如何从 Datalist 中的 Linkbutton 获取 DataKeyField？

> ID：13665785
> 
> 赞同：1
> 
> 时间：2012-12-02T02:14:15.337
> 
> 标签：asp.net

asp.net 的新手，所以任何帮助都会很棒谢谢。

我有一个数据列表，其中包含产品名称、价格、图像和数据列表内的链接按钮，它还包含未显示的 ProductID。

您如何从 LinkBut​​ton 的 onClick 事件中获取当前产品 ID 谢谢。

我的数据列表

```
<asp:DataList ID="dlProduct" runat="server" DataKeyField="ProductID" RepeatDirection="Horizontal" RepeatColumns="4" CellPadding="10" CellSpacing="10" >
                    <ItemTemplate>                                 
                        <asp:Label ID="ProductNameLabel" runat="server" Text='<%# Eval("ProductName") %>' />   
                        <br />Price:
                        <asp:Label ID="PriceLabel" runat="server" Text='<%# "$" + Eval("Price") %>'  />
                        <br />            
                        <asp:Image ID="Image1" runat="server" CssClass="ImageStyles" ImageUrl='<%# "GetImage.ashx?Id=" + Eval("PID") %>' BackColor="White" BorderStyle="Ridge" BorderColor="WhiteSmoke" />
                        <br />
                        <asp:LinkButton ID="btnAddToCart" OnClick="btnAddToCart_Click" runat="server"><img src="images/AddToCart.png" onmouseover="this.src='images/AddToCartMouseOver.png';" onmouseout="this.src='images/AddToCart.png';" /></asp:LinkButton>
                    </ItemTemplate>
                </asp:DataList> 
```

我的代码背后

```
protected void btnAddToCart_Click(object sender, EventArgs e)
    {

        ScriptManager.RegisterStartupScript(this, this.GetType(), "temp", "<script language='javascript'>alert('Product ID = "+ PID.Text + "');</script>", false);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T03:02:25.560

使用 LinkBut​​ton 控件的 CommandArgument 属性。

像：

```
 <asp:LinkButton ID="btnAddToCart"
                CommandName="AddToCart" 
                CommandArgument='<%# Eval("ProductId") %>' 
                 OnCommand="btnAddToCart_Command" runat="server"> 
```

然后在`btnAddToCart_Command`你可以得到这样的命令参数。

```
 protected void btnAddToCart_Command(object sender, CommandEventArgs args)
    {
        ScriptManager.RegisterStartupScript(this, this.GetType(), "temp", "<script language='javascript'>alert('Product ID = " + args.CommandArgument+ "');</script>", false);
    } 
```

希望这可以帮助。

# java - Java - Read cookie after a post

> ID：13665786
> 
> 赞同：2
> 
> 时间：2012-12-02T02:14:18.143
> 
> 标签：java, post, cookies

I'm having trouble reading what cookies are being sent when making a POST in java.

Here's my code:

```
public static void main(String[] args) throws MalformedURLException, IOException {
    String urlParameters = "votebut=";
    String request = "http://www.runelocus.com/toplist/vote-17648.html";
    URL url = new URL(request);
    HttpURLConnection connection = (HttpURLConnection) url.openConnection();
    connection.setDoOutput(true);
    connection.setDoInput(true);
    connection.setInstanceFollowRedirects(false);
    connection.setRequestMethod("POST");
    connection.setRequestProperty("User-Agent", "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:16.0) Gecko/20100101 Firefox/16.0");
    connection.setRequestProperty("Content-Type", "application/x-www-form-urlencoded");
    connection.setRequestProperty("charset", "utf-8");
    connection.setRequestProperty("Content-Length", "" + Integer.toString(urlParameters.getBytes().length));
    connection.setUseCaches(false);

    DataOutputStream wr = new DataOutputStream(connection.getOutputStream());
    wr.writeBytes(urlParameters);
    wr.flush();
    wr.close();
    List<String> cookies = connection.getHeaderFields().get("Set-Cookie");
    for (String cookie : cookies) {
        System.out.println("Cookies: " + cookie);
    }
    connection.disconnect();
} 
```

This is what it prints:
`Cookies: PHPSESSID=48863f8c3adcbddf0e77e7f1b450fc0e; path=/`

This is what I want it to print:
`ki_u=68debd85-c1af-f1ff-2e6c-4146755c6e26; ki_t=1354418220596%3B1354418220596%3B1354422379616%3B1%3B36;`

Any help please?

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T04:30:19.160

无法以这种方式读取该 cookie。

作为响应，`http://www.rune...17648.html`您只会`PHPSESSID`在响应标头中获得 cookie。

您要查找的 cookie (`ki_u`和`ki_t`) 由该文件中的 JavaScript 代码设置：

```
http://s3.amazonaws.com/ki.js/45645/919.js 
```

因此，要实际获取 cookie 值，您需要复制浏览器行为或实际使用浏览器（请求 html 页面、解析它、下载引用的资源（特别是`919.js`）并执行 JavaScript 代码）。

# jquery - Internationalize date format using daterangepicker.jQuery.js

> ID：13665789
> 
> 赞同：1
> 
> 时间：2012-12-02T02:14:44.230
> 
> 标签：jquery, jquery-plugins, daterangepicker

Hi I am working on internationalizing my site. Currently I am using jQuery-Plugin "daterangepicker.jQuery.js" How can I use this plugin to internationalize date format for countries other than USA? Any immediate help is greatly appreciated. Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:48:40.833

这很简单：

```
 $(function() {
    $("#datepicker").datepicker({dateFormat: 'yy-mm-dd'});
    }); 
```

将 yy-mm-dd 更改为您想要的格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-09T23:17:16.767

DateRangePicker（现在？）使用[moment.js](http://momentjs.com/)进行日期和时间处理 - 包括日期和时间的格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T02:20:04.613

看起来这个插件使用了`dateFormat`与`datepicker.jquery.js`. 您可以在此处找到日期格式的文档：http: [//docs.jquery.com/UI/Datepicker/%24.datepicker.formatDate](http://docs.jquery.com/UI/Datepicker/%24.datepicker.formatDate)

# vb.net - VB.NET Keybord tracker

> ID：13665792
> 
> 赞同：0
> 
> 时间：2012-12-02T02:15:53.923
> 
> 标签：vb.net, keyboard

Hello I have a VB NET application and I would like to add it a keybord key pressed catching system so I can track any keybord key that is pressed on any application that is running on my computer and uses keybord. If someone has any idea thanks for sharing it. I Hope my question was clear. Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T02:23:28.013

您将需要使用 Global KeyBoard 挂钩，看看这个[`CodePlex Project`](http://globalmousekeyhook.codeplex.com/)。它将允许您拦截全局键盘事件。

来自链接：

> 即使应用程序处于非活动状态并在后台运行，该库也允许您点击键盘和鼠标并检测和记录它们的活动。
> 
> 该库附加到 Windows 全局挂钩，跟踪键盘和鼠标的单击和移动，并使用 KeyEventArgs 和 MouseEventArgs 引发常见的 .NET 事件，因此您可以轻松检索所需的任何信息：

# c# - Null interface in the constructor

> ID：13665793
> 
> 赞同：2
> 
> 时间：2012-12-02T02:15:57.837
> 
> 标签：c#, asp.net-mvc, interface, mef

I have a ASP.NET MVC application and I'm using MEF to import my interfaces. The problem is that my `IVotesRepository` interface is null when it's passed to the constructor.

Here is the code from my controller:

```
public class VotesController : BaseController
{
    //
    // GET: /Votes/
    IVotesRepository VotesRepository;
    IAccountRepository accountRepository;

    public VotesController(IVotesRepository votesRepo, IAccountRepository accountRepo)
    {
        VotesRepository = votesRepo;
        accountRepository = accountRepo;
    } 
```

And here is the interface and the repository itself:

```
public interface IVotesRepository
{
    void SaveVotes(int TeamId, int GameId, int UserId);

    bool CheckIfUserHaveVoted(int UserId, int GameId);
}

[Export(typeof(IVotesRepository))]
public class VotesRepository : IVotesRepository
{
   ...
} 
```

Why is the `IVotesRepository` instance null?

EDIT:

Stack trace:

```
Object reference not set to an instance of an object at SocialSport.Controllers.VotesController.SaveVotes(Nullable`1 TeamId, Nullable`1 GameId) in C:\...\Visual Studio 2010\Projects\SocialSport\Implementation\Source\SocialSportWeb\Controllers\VotesController.cs:line 29
   at lambda_method(Closure , ControllerBase , Object[] )
   at System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   at System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass15.<InvokeActionMethodWithFilters>b__12()
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation) 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-02T04:03:33.483

似乎在我的应用程序的某个地方我以某种方式取消了该接口，所以我制作了另一个接口，现在它正在工作，抱歉，如果这是一个肮脏的修复，但我没有时间进行适当的更正，谢谢你的帮助。

# list - Haskell 输出一个 ascii 值列表

> ID：13665796
> 
> 赞同：2
> 
> 时间：2012-12-02T02:16:15.757
> 
> 标签：list, haskell

例如我有一个 haskell 列表`[72,73,74,75]`，我如何将这个列表输出为字符串？，列表中的所有元素都是 ascii 值。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-02T02:26:52.277

您可以组合`map`，将函数应用于列表的每个元素，以及将值`chr`转换为等效`Int`值的函数：`Char`

```
> map chr [72,73,74,75]
"HIJK" 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-02T02:27:11.563

您可以将`Int`代码点转换为`Char`using `chr :: Int -> Char`; a`String`只是`Char`s 的列表。请注意，这适用于任何 Unicode 代码点，而不仅仅是 ASCII，这是您无论如何都应该做的事情。

您可以使用[Hoogle](http://www.haskell.org/hoogle/)找到这样的功能；只需键入类似`Int -> Char`的内容，它就会为您提供与该类型匹配的函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T02:26:31.427

您可以使用模块 Char 中的 'chr' 将整数值转换为字符：

```
import Char

intListToString l = [ chr x | x <- l ]

main = do
  putStrLn $ "the string: " ++ (intListToString [72,73,74,75]) 
```

使用 'runghci' 运行上述命令会给出：

```
the string: HIJK 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T13:15:27.467

您希望此列表为直字符串还是带逗号的列表？除非您想将 ASCII 字符值转换为对应的字符（已经介绍过），否则您可以执行以下操作：

```
concatMap show [72,73,74,75] 
```

会给你一个“72737475”字符串和

```
init $ tail $ show [72,73,74,75] 
```

会给你一个 "72,73,74,75" 字符串

# xcode - 如何在可可中管理窗口

> ID：13665798
> 
> 赞同：1
> 
> 时间：2012-12-02T02:16:26.643
> 
> 标签：xcode, macos, cocoa

我知道这个问题有点笼统，但我想我的问题也很笼统。我在空闲时间开发了一个小型应用程序，我决定用 Cocoa 来做。很好，很多事情几乎是自动运行的，但有时很难理解框架是如何工作的。

最近我面临一个新问题。我想从一个类管理应用程序的所有窗口，基本上是一个前端控制器。我有一个主菜单和一个“导入数据”功能。当我单击它时，我想显示另一个包含表格的窗口并调用更新数据的方法。问题是这个方法在实现`NSTableViewDataSource`协议的类里面。

我怎样才能参考那个类？更重要的是，这应该是正确的方法吗？我是否应该扩展`NSWindow`该类以便我可以接收可以控制包含表的窗口的 NSWindow 实例（然后调用该方法）？

我可能会找到几种方法来克服这个问题，但我想知道哪一种是与可可一起使用的最佳实践。

PS：我知道有大量的文档文件，但我需要 2 条生命来做我想做的一切，所以我想我可以在这里寻求帮助：)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T06:08:16.440

> 问题是这个方法在实现 NSTableViewDataSource 协议的类里面。
> 
> 我怎样才能参考那个类？

这两句话没有意义，但我想我明白你在说什么。

不要继承 NSWindow，而是将导入窗口的控制逻辑（包括 NSTableViewDataSource 方法）放入控制器类中。如果控制器对应一个窗口，你可以继承 NSWindowController，尽管你不必这样做。

您可以`-importData:`在应用程序委托中实现 IBAction，然后将菜单项的选择器连接到 importData: 在 First Responder 上。该方法应该实例化导入窗口控制器并从 nib 加载窗口。

在您的导入窗口控制器`-awakeFromNib`或`-windowDidLoad`方法中，调用更新数据的方法。

**添加：**

这是我建议在您的应用程序委托中使用的模式：

```
@property (retain) ImportWindowController *importWC; 
```

```
- (IBAction) showImportWindow:(id) sender {
    if (!self.importWC)
        self.importWC =
        [[ImportWindowController alloc] initWithWindowNibName:@"ImportWindow"];
    [self.importWC refreshData];
    [self.importWC.window makeKeyAndOrderFront:sender];
} 
```

# jquery - 引导折叠数据父级不起作用

> ID：13665800
> 
> 赞同：8
> 
> 时间：2012-12-02T02:16:46.173
> 
> 标签：jquery, twitter-bootstrap, collapse

我正在使用引导程序 2.2.1，无论出于何种原因， data-parent 属性都没有达到预期的效果。当我单击另一个目标时，它不会关闭以前打开的目标。这是下面[的](http://jsfiddle.net/b9UuC/6/)代码，关于如何解决这个问题的任何想法？

```
<div id="accordion">
    <ul>
        <li>
            <a href="#" data-toggle='collapse' data-target='#document', data-parent='#accordion'>option 1</a>
            <ul id="document" class="collapse">
                <li> <a href="#">suboption 1</a></li>
                <li> <a href="#">suboption 1</a></li>
                <li> <a href="#">suboption 1</a></li>
            </ul>   
        </li>
        <li>
            <a href="#">option 2</a>
        </li>
        <li>
            <a href="#">option 3</a>
        </li>
         <li>
            <a href="#" data-toggle='collapse' data-target='#document2', data-parent='#accordion'>option 4</a>
            <ul id="document2" class="collapse">
                <li> <a href="#">suboption 1</a></li>
                <li> <a href="#">suboption 1</a></li>
                <li> <a href="#">suboption 1</a></li>
            </ul>   
        </li>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-03-08T01:32:38.087

它在引导文件中说：

> 如果提供了选择器，则在显示此可折叠项时，将关闭指定父项下的所有可折叠元素。（类似于传统的手风琴行为 -*这取决于 `panel`类*）

所以它必须与面板组一起使用，但无论如何您都可以覆盖 javascript。

[http://getbootstrap.com/javascript/#collapse-options](http://getbootstrap.com/javascript/#collapse-options)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-02T12:37:50.127

我也无法让它工作 - 这可能与 Bootstrap JS 中的某些内容有关，因为您使用的是列表而不是 div？

所以为了让它工作，我必须覆盖点击事件。基于这里的这个问题：[Collapsible Accordion doesn't work inside a dropdpwn-menu Bootstrap](https://stackoverflow.com/questions/11182215/collapsible-accordion-doesnt-work-inside-a-dropdpwn-menu-bootstrap)

我`accordion-toggle`为每个选项链接添加了一个类，然后添加了以下 JavaScript 以使其工作：

```
$(document).on('click', '.accordion-toggle', function(event) {
        event.stopPropagation();
        var $this = $(this);

        var parent = $this.data('parent');
        var actives = parent && $(parent).find('.collapse.in');

        // From bootstrap itself
        if (actives && actives.length) {
            hasData = actives.data('collapse');
            //if (hasData && hasData.transitioning) return;
            actives.collapse('hide');
        }

        var target = $this.attr('data-target') || (href = $this.attr('href')) && href.replace(/.*(?=#[^\s]+$)/, ''); //strip for ie7

        $(target).collapse('toggle');
});​ 
```

这个[小提琴](http://jsfiddle.net/mccannf/YZMEL/2/)展示了它的作用。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-25T19:47:16.330

也一直在与 bootstrap 崩溃作斗争。我试图做一些稍微不同的事情。我想要内联切换行为。请参阅下面的我的 JS 小提琴。我发现，除了他们的文档中涵盖的 data-parent 属性之外，bootstrap 似乎还需要存在“accordion-group”div。因此，要么 JS 中存在错误，要么他们的文档不包含它。我还必须将手风琴组 div 上的样式归零...

[http://jsfiddle.net/cssguru/SRFFJ/](http://jsfiddle.net/cssguru/SRFFJ/)

```
<div id="accordion2">
   <div class="accordion-group" style="border:0;padding:0;margin:0">
      <div id="collapseOne" class="collapse in">
            Foo Bar...
            <a data-toggle="collapse" data-parent="#accordion2" href="#collapseTwo">
               Show Herp Derp
            </a>
      </div>
      <div id="collapseTwo" class="collapse">
            Herp Derp...
            <a data-toggle="collapse" data-parent="#accordion2" href="#collapseOne">
               Show Foo Bar
            </a> 
      </div>
   </div>
</div> 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-04-08T14:41:44.143

You have to use accordion-group class in your items, see issue [https://github.com/twitter/bootstrap/issues/4988](https://github.com/twitter/bootstrap/issues/4988)

# wordpress - digifoto wordpress 主题 - 未找到投资组合？

> ID：13665801
> 
> 赞同：3
> 
> 时间：2012-12-02T02:16:48.167
> 
> 标签：wordpress, themes, wordpress-theming

我正在为使用 digifoto 主题的客户构建摄影作品集。当我尝试制作作品集时，它会出现在图库页面中，但是当我单击查看其中的照片时，它会显示“未找到 - 无法找到所请求的页面”。我正在点击投资组合选项卡，制作一个新选项卡，为其命名并插入照片，然后在正确的字段中输入详细信息，我创建了“帖子”（投资组合），但我无法预览它（我得到了'未找到'错误），无论如何我都不能将其视为已发布的内容。似乎没有关于 Digifoto 主题的文档（如何使用它）。这里有任何 WP 专家可以提供帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T14:34:50.673

似乎是一个永久链接的问题。当您注册自定义帖子类型（在您的情况下为投资组合）并且链接变为 404 时，通常会发生这种情况。尝试再次保存永久链接结构，它将起作用。

固定链接设置：

*   导航到***仪表板 > 设置 > 固定链接***

# amazon-ec2 - 如何控制 Meteor 的运行位置

> ID：13665802
> 
> 赞同：11
> 
> 时间：2012-12-02T02:16:59.437
> 
> 标签：amazon-ec2, localhost, meteor

我正在我的 AWS EC2（微）实例上安装 Meteor（框架）并按照说明进行操作，在创建了一个测试项目后，我`meteor`在该目录上运行，给了我预期的

```
[[[[[ /var/www/html/meteortest ]]]]]

Running on: http://localhost:3000/ 
```

但是我无法在浏览器中导航到服务器的 localhost 以查看 hello world 示例项目。有没有办法让流星在类似的东西上工作：

```
http://mydomain.com/meteortest/ 
```

或者

```
http://mydomain.com/meteortest:3000 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-05T20:29:55.217

Meteor 设置 ROOT URL 的方式是使用名为 ROOT_URL 的环境变量：

[http://docs.meteor.com/#meteor_absoluteurl](http://docs.meteor.com/#meteor_absoluteurl)

所以你可以像这样运行你的 Meteor 实例： ROOT_URL="http://mydomain.com/" meteor --port 80

但是，如果您想从文件夹（如[http://mydomain.com/meteortest](http://mydomain.com/meteortest)）提供流星实例，则必须使用 nginx 转发端口（参见 Tyr 的示例）但替换以下行：

```
location / { 
```

和：

```
location /meteortest { 
```

并适当地更改您的 ROOT_URL。如果您仍然无法从外部访问您的域，则您可能没有为 EC2 正确设置安全组。您必须打开端口 80。有关如何执行此操作的更多信息可以在这里：[http ://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/using-network-security.html](http://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/using-network-security.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-04T05:32:32.070

您可以将 nginx 设置为代理端口 3000 到您的域。就像是：

```
server {
  listen 80;
  server_name meteortest.mydomain.com;
  access_log /var/log/nginx/meteortest.access.log;
  error_log /var/log/nginx/tmeteortest.error.log;
  location / {
    proxy_pass http://localhost:3000;
    include /etc/nginx/proxy_params;
  }
} 
```

请参阅[http://wiki.nginx.org/HttpProxyModule](http://wiki.nginx.org/HttpProxyModule)了解更多信息。

但是，在端口 3000 上运行流星是一个开发环境。如果您想在生产中使用它，请运行“ **meteor bundle** ”，然后按照生成的 tarball 中的 README 进行操作。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-05T00:44:25.727

我认为问题在于端口 3000 可能被亚马逊的防火墙阻止了。你可以看看打开它，试试 Tyr 的解决方案，或者试着用

```
meteor --port 80 
```

您可能需要 root 权限（即 sudo）来执行此操作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-11T21:39:43.677

直接在端口 80 上运行将需要 root 权限，而您并不真正希望您的 Web 服务器以该权限运行 - 以 root 身份启动它并降级为普通用户是可能的，但也不是很理想，因为您可能会发现某个编程错误有时会忘记降级 privs，您不会从中看到任何错误。

在许多情况下，我真的不想/不需要运行负载均衡器来使用多核，特别是如果我在 AWS 单核 t1 或 t2 实例类型上运行，我只是根据需要对其进行扩展——因此我[见过](https://groups.google.com/forum/#!topic/meteor-talk/CBOatiMOj5c)的最好的建议是简单地使用 Linux 内核进行端口转发，将端口 80 映射到端口 3000，就像这样

```
$ sudo iptables -A PREROUTING -t nat -i eth0 -p tcp \
                          --dport 80 -j REDIRECT --to-port 3000 
```

很好，很容易，没有其他事情可做——而且超级高效，同时在服务请求时不涉及额外的进程。

# linux - 检查 $BINDIR 值

> ID：13665803
> 
> 赞同：1
> 
> 时间：2012-12-02T02:17:06.013
> 
> 标签：linux

首先我需要道歉，我对 Unix/Linux 的了解很少。

我正在关注[http://dns323.kood.org/howto:subversion](http://dns323.kood.org/howto:subversion)在我的 DLink DNS323 设备上安装 SVN 服务器。我已经成功安装了 Fonz Fun Plug。而且我想我也安装了 subversion-1.5.2-1.tgz 。

根据文档我需要运行svnserve.sh，其中部分的soruce代码是

```
svnserve_start() {
    if [ -x "{$BINDIR}/svnserve" ]; then
        echo "Starting svnserve deamon... "
        ${BINDIR}/svnserve -d -r ${REPOSITORY}
    else
        echo "ERROR: svnserve not found or not executable"
    fi
} 
```

我收到了`ERROR: svnserve not found or not executable`消息，所以在我看来 $BINDIR 没有很好地定义。

任何人都知道，我该怎么做`echo`才能显示 的值`$BINDIR`？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T02:20:58.173

`echo $BINDIR`在`if`语句之前检查是否`{$BINDIR}/svnserve`存在。

这似乎`{$BINDIR}/svnserve`是不可执行的。找到该文件并向`chmod u+x`其添加可执行 attr。

# android - android中textview的一部分是可点击的

> ID：13665806
> 
> 赞同：1
> 
> 时间：2012-12-02T02:17:31.113
> 
> 标签：android, string, textview, clickable, spannable

我必须在 textview 中显示一些文本。我只希望文本的一部分是可点击的，而文本的其余部分是正常的。

这是我的代码：

```
TextView mTextView = (TextView) findViewById(R.id.txt);
String mText = "some text.Link to click.Some more text";
SpannableString sb = new SpannableString(mText);
sb.setSpan(new ClickableSpan() {
    @Override
    public void onClick(View widget) {
        Intent in=new Intent(Intent.ACTION_VIEW,Uri.parse("http://www.twitter.com/"));
        startActivity(in);
    }
},  mText.indexOf("Link"),mText.indexOf("Link") + 13,Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);

mTextView.setText(sb);
mTextView.setMovementMethod(LinkMovementMethod.getInstance()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T02:37:45.847

如果您将完整的 url 放入 TextView 中，您可以使用它`android:autoLink="web"`来大大简化此过程。

[有关更多信息，请参阅 TextView 文档](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3aautoLink)

另一种选择是[Html 对象](http://developer.android.com/reference/android/text/Html.html)。具体来说，`fromHtml()`我认为这种方法可以让你实现你想要的。你应该能够做这样的事情：

```
mTextView.setText(Html.fromHtml("blah blah <a href=\"http://some.site.com\">some text to be linkified</a> blah blah")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T02:52:18.603

您也可以使用以下`linkify`选项：[http](http://android-developers.blogspot.com/2008/03/linkify-your-text.html) ://android-developers.blogspot.com/2008/03/linkify-your-text.html - 在这种情况下，您可以动态构建字符串，并且只制作它的一部分你想要可点击的。

我从来没有听说过这个`autoLink`属性——酷。

另一种选择，可能更接近您的原始问题 - 您可以创建两个不同的 TextView 彼此相邻（如果间距很奇怪，请使用`layout_marginRight="-8"` - 使用负偏移量，这可能需要进行一些调整才能使间距完美）。然后，您可以将 autoLink 属性仅应用于您希望可点击的 TextView。

# javascript - 在滚动条上滑动背景图像

> ID：13665807
> 
> 赞同：0
> 
> 时间：2012-12-02T02:17:52.773
> 
> 标签：javascript, jquery, css, background-image

最新的时尚似乎是滚动时移动的东西。

现在，我有一堆 square `div`，其中包含散布在一长页内容周围的背景图像。我的想法是当你向下滚动时让这些背景图像向上滑动。背景图像与正方形一样宽，但高 1.5 倍。

简单的解决方案是将 设置为`backgroundPosition`current 的一小部分`scrollTop`，但是当我仔细考虑它时，它并不完全那么简单。

本质上，div 的背景图像应该在`background-position: 0 0;`div 刚刚被折叠超出时。一旦它出现，顶部位置将相对于滚动减少，直到`div`在窗口顶部边缘消失时到达背景图像底部边缘的末端。

`div`s 在文本内容中编辑`float`，因此无法为它们硬编码任何位置值。

也许我可以自己做到这一点，但有几个考虑因素；

*   以任意速度来回滚动，并且从不将背景图像移动到正方形的任何部分`div`未被覆盖的位置。
*   加载时出现在页面中间的 div。`background-position`最初是否不适合它们并不`0 0`重要，重要的是背景图像以与所有其他图像相同的速度移动。
*   在用户更改窗口大小时进行调整。

现在，因为这只是一个额外的小天赋，我并不期待惊人的浏览器兼容性，或者这将在移动设备上运行（尽管如果它确实如此，很酷）。

但我什至无法开始思考这一切会如何发生。实现这一目标的最佳方法是什么？由于滚动滑动非常流行，是否有任何（jQuery）插件可以用来构建它？

# javascript - 将 javascript 插入 sharepoint editform.aspx

> ID：13665808
> 
> 赞同：2
> 
> 时间：2012-12-02T02:18:03.257
> 
> 标签：javascript, sharepoint, date, encoding

我想自定义我的共享点日期选择器以防止用户选择过去的日期。我在这个网站上找到了以下代码

```
$(function () {
            $("<%=TextBox1.ClientID %>").datepicker(
            {
             minDate: +0,
            });
        }); 
```

但我不确定在哪里插入这个脚本。根据我所做的研究，它需要插入到editform.aspx 中。我不知道在当前脚本中的什么地方放置它，在什么已经存在的末尾？当我尝试将其粘贴到最后时，我发现我无法粘贴。我在编码方面是一个完全的新手，所以任何帮助将不胜感激。我使用 SharePoint Designer 2010 和 Workspace 2010。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T22:04:05.330

您可以使用内容编辑器 Web 部件插入 javascript。请参阅[此](http://sharepointadam.com/2010/08/31/insert-javascript-into-a-content-editor-web-part-cewp/)链接，您可以在谷歌内容编辑器 webpart 上获取更多示例。

# python - 如何使用 sympy 找到 y 截距？

> ID：13665810
> 
> 赞同：1
> 
> 时间：2012-12-02T02:18:37.750
> 
> 标签：python, math, numpy, sympy

```
x = Symbol('x')
f = x**2-3

def return_y_intercept(f):
   return [the y-intercepts] 
```

如何使用类似上面的结构编写一个函数来返回它的参数的 y 截距？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T04:12:04.290

尝试使用`sympy.coeff`, [here](http://docs.sympy.org/dev/modules/core.html#c)，就像这样：

Y 截距作为坐标

```
from sympy import Symbol

x = Symbol('x')
f = x**2-3

def return_y_intercept(f):
   return [0,f.coeff(x,0)] #return coordintes of y-intercept

print return_y_intercept(f) 
```

输出：

```
0,-3 
```

Y截距：

```
from sympy import Symbol

x = Symbol('x')
f = x**2-3

def return_y_intercept(f):
   return [f.coeff(x,0)] #return just the y-intercept

print return_y_intercept(f) 
```

输出：

```
-3 
```

[在此处](http://live.sympy.org)的在线 sympy 解释器上尝试

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T07:40:06.730

y 截距只是意味着你用 0 代替 x，所以就这样做`f.subs(x, 0)`。

# python - 用于创建斐波那契数列生成器的 Python 脚本

> ID：13665815
> 
> 赞同：1
> 
> 时间：2012-12-02T02:20:54.273
> 
> 标签：python, function, iterator, sequence, fibonacci

> **可能重复：**
> [Python Fibonacci Generator](https://stackoverflow.com/questions/3953749/python-fibonacci-generator)

我正在尝试构建一个可以将值附加到空列表的函数

```
n1 = 1

n2 = 2

fn = [] 
```

我想将 n1 和 n2 加在一起，然后将该值发送给 fn。

然后我想将 n1 和 n2 重新分配给序列的最后两个值。

然后我希望能够在一定数量的迭代后停止它。

我基本上是在尝试构建一个斐波那契序列生成器而不使用该函数

```
#s(n) = (1.618^n-(1-1.618)^n)/(5^.5)` 
```

例子：

```
 fn = []

 def fibb(n1,n2,f_iter):
 # n1 would be the first number of the sequence
 # n2 would be the second number of the sequence
 # f_iter would be how many iterations it would do until finished 
```

因此，如果输入是：

```
 def fibb(1,2,10):  
    return fn

 fn = [1,2,3,5,8,13,21,34,55,89,144,233]

#f_iter(0:1+2=3,1:2+3=5,2:3+5=8,3:5+8=13, . . . 10:89+144=233) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T06:20:15.970

你可以用这个

```
def fib():
    first, second = 0, 1
    while 1:
        yield first
        first, second = second, first + second 
```

# git - Visual Studio Express 2012 和 Git

> ID：13665817
> 
> 赞同：12
> 
> 时间：2012-12-02T02:21:12.723
> 
> 标签：git, visual-studio-2012, visual-studio-express

Visual Studio Express 2012 中的 IDE 级别版本控制支持是否可以与 Git 一起使用，或者是否需要插件支持仅适用于完整版？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-08T08:32:58.693

实际上，选择的答案是错误的。Visual Studio Express 2012 支持 Microsoft 的 Git 插件，因为它实际上是 Team Foundation 的扩展。你可以在这里找到它：http: [//visualstudiogallery.msdn.microsoft.com/abafc7d6-dcaa-40f4-8a5e-d6724bdb980c](http://visualstudiogallery.msdn.microsoft.com/abafc7d6-dcaa-40f4-8a5e-d6724bdb980c)

然而，截至今天，安装程序中存在一些阻止安装它的错误 - 这是一个错误，将在未来的版本中解决（查看项目的评论以查看 Microsoft 的回复）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-03T01:51:37.813

Visual Studio 2012 Express Editions：不支持其他插件，除了 Microsoft 构建的一个（Git 插件）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T15:44:57.780

你试过 TortoiseGit 吗？我知道首选的选择是使用插件，但使用 Express 是不可能的。当我开始使用 Express 时，Ankhsvn 就发生在我身上。不知道是不是好工具，大家可以试试：[https ://tortoisegit.org/](https://tortoisegit.org/)

# python - Python 3.3：通过命令行运行时打印特殊符号，如♥和❦

> ID：13665819
> 
> 赞同：1
> 
> 时间：2012-12-02T02:21:14.630
> 
> 标签：python, character, symbols

我发现了很多特殊符号，比如 ♥ 和 ❦，我想在 Python 3.3 的程序中使用它们，这些程序在 IDLE 中运行良好，但是当我使用命令行运行它时，它立即崩溃，给出一个有关无法识别字符的错误：

```
Traceback (most recent call last):
    File "C:python33\meh.py", line 1, in <module>
        print("\u2665")
    File "C:\python33\lib\encodings\cp437.py", line 19, in encode
        return codecs.charmap_encode(input,self.errors,encoding_map)[0]
UnicodeEncodeError: 'charmap' codec can't encode character 'u\u2665' in position 0: character maps to <undefined> 
```

除了可以在命令行中显示之外，如何将这些符号用于`map`其他东西？`<undefined>`

我假设我可以尝试添加到 python 的 cp437.py （从错误中得出），但我不确定如何为每个符号获取十六进制/十进制/任何内容以及将其放在哪里。

带有 CEDILLA 的拉丁文大写字母 C 的示例：

--解码映射键和值： `0x0080: 0x00c7, # LATIN CAPITAL LETTER C WITH CEDILLA`

--解码表字符串： `'\xc7' # 0x0080 -> LATIN CAPITAL LETTER C WITH CEDILLA`

--编码映射键和值： `0x00c7: 0x0080, # LATIN CAPITAL LETTER C WITH CEDILLA`

我无法判断所有符号是否都需要这三个（更不用说每个符号的作用了）。有些有解码图和表，但另一些只有解码表和编码图。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T02:22:13.433

您必须正确编码终端的字符。 [Pragmatic Unicode，或者，How Do I Stop The Pain](http://bit.ly/unipain)有详细信息。

例如：

```
print(my_text.encode('utf8')) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T06:57:48.743

就个人而言，它在 Ubuntu 上对我来说就像一个魅力，它默认使用 unicode，但您可以尝试使用打印文本

```
import sys
TestText = "Test - āĀēĒčČ..šŠūŪžŽ" # this NOT utf-8...it is a Unicode string in Python 3.X.
TestText2 = TestText.encode('utf8')
sys.stdout.buffer.write(TestText2) 
```

来自[https://stackoverflow.com/a/3603160/160386](https://stackoverflow.com/a/3603160/160386)

# encoding - °, ± & ² 如何在这个批处理文件中产生░, ▒ & ▓？

> ID：13665821
> 
> 赞同：5
> 
> 时间：2012-12-02T02:21:39.760
> 
> 标签：encoding, batch-file, cmd, ascii

这段代码：

```
 @echo off
   set /p a=Installing [<nul
   set b=1
   :loop
   if %b% leq 2 set /p a=°<nul
   if %b% gtr 4 if %b% leq 6 set /p a=±<nul
   if %b% gtr 6 if %b% leq 8 set /p a=²<nul
   if %b% gtr 8 if %b% leq 10 set /p a=±<nul
   if %b% gtr 10 set /p a=°<nul
   choice /t 1 /c y /d y>nul
   set /a b=%b%+1
   if %b%==13 (echo ]&goto :eof)
   goto :loop 
```

...来自[http://www.experts-exchange.com/OS/Microsoft_Operating_Systems/MS_DOS/A_1237-DOS-ECHO-text-to-previous-line-by-P](http://www.experts-exchange.com/OS/Microsoft_Operating_Systems/MS_DOS/A_1237-DOS-ECHO-text-to-previous-line-by-Paul-Tomasi.html#c18182) ​​aul-Tomasi.html#c18182并产生以下在 cmd 窗口中输出：

```
 Installing [░░▒▒▓▓▒▒░░] 
```

但是，我似乎无法通过谷歌找到关于它是如何工作的解释。将其他扩展 ascii 字符替换到它们的位置似乎会产生“命令的语法不正确”，因此只能设法猜测这是一种黑客行为，其中某些东西通过意外将这些字符交换为扩展 ascii 集中的较低字符- 设计师的把戏。

如果有人还可以建议一个好的网站来了解更多关于 cmd / cmd 程序的功能，我们将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T10:40:59.413

这是因为您的编辑器使用不同于 DOS 和命令行使用的编码。

请参见此处的字符 176-178：

[http://academic.evergreen.edu/projects/biophysics/technotes/program/ascii_ext-pc.htm](http://academic.evergreen.edu/projects/biophysics/technotes/program/ascii_ext-pc.htm)

DOS 和 WIN 列中的字符对由相同的数值表示，但 DOS（以及命令行）和 Windows（您的文本编辑器）将这些数字显示为不同的符号。

如果不清楚：您的文本文件是一系列字节（数字），其中一个字节的值为 176。在 DOS[代码页 437](http://en.wikipedia.org/wiki/Code_page_437)下，它曾经表示 ▓ 字形，并且由于历史原因，命令行使用相同的编码正如 DOS 所做的那样。但是您在 Windows 上运行的文本编辑器显然使用旧的[Windows-1252](http://en.wikipedia.org/wiki/Windows-1252)编码读取文件，其中 176 表示°。

You could try to find an editor supporting 437, it would save you from such confusions.

# c# - 提高算法执行时间

> ID：13665823
> 
> 赞同：3
> 
> 时间：2012-12-02T02:22:20.137
> 
> 标签：c#, algorithm, parallel-processing

我正在从事数据挖掘项目，并且我选择了 Apriori 算法来执行关联规则任务。简而言之，我对执行时间的执行方式不满意。我将只描述我的代码中有问题的部分。

我有两个列表列表。

`List<List<int>> one;`

`List<List<int>> two;`

我必须遍历列表的元素`one`并检查是否`one[i]`是`two[j]`

```
foreach(List<int> items in one)
{

    foreach(List<int> items2 in two)
    {

        if(items2.ContainsSetOf(items1))
        {
            //do something
        }
} 
```

我在想是否有办法减少这种方法的执行时间。（并行执行，使用字典等）

各位大侠有什么办法可以减少吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T02:30:24.467

使它们成为集合列表，并使用集合操作来查找一个集合是否是另一个集合的子集。

**例子**

```
HashSet<int> set1 = new HashSet<int>();
set1.Add(1);
set1.Add(2);

HashSet<int> set2 = new HashSet<int>();
set2.Add(1);
set2.Add(2);
set2.Add(3);

List<HashSet<int>> one = new List<HashSet<int>>();
one.add(set1);
one.add(set2);

List<HashSet<int>> two = new List<HashSet<int>>();
two.add(set1);
two.add(set2);

foreach(Set<int> setA in one) {
    foreach(Set<int> setB in two) {
        if(setA.IsSubsetOf(setB)) {
            // do something
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T02:58:56.170

如果要减少检查“列表中的列表”（或设置子集）的次数，一种方法是构建列表的层次结构（树）。当然，性能改进（如果有的话）取决于数据 - 如果没有列表包含其他列表，您将必须像现在一样进行所有检查。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T23:06:57.917

**C# 代码片段**

```
var dict = new Dictionary<int, HashSet<List<int>>>();

foreach (List<int> list2 in two) {
   foreach (int i in list2) {
      if(dict.ContainsKey(i) == FALSE) {
         //create empty HashSet dict[i]
         dict.Add(i, new HashSet<List<int>>());
      }
      //add reference to list2 to the HashSet dict[i]
      dict[i].Add(list2); 
   }
}

foreach (List<int> list1 in one) {
   HashSet<List<int>> listsInTwoContainingList1 = null;
   foreach (int i in list1) {
      if (listsInTwoContainingList1 == null) {
         listsInTwoContainingList1 = new HashSet<List<int>>(dict[i]);
      } else {
         listsInTwoContainingList1.IntersectWith(dict[i]);
      }
      if(listsInTwoContainingList1.Count == 0) {   //optimization :p
         break;
      }
   }
   foreach (List<int> list2 in listsInTwoContainingList1) {
      //list2 contains list1
      //do something
   }   
} 
```

**例子**

```
L2= {
L2a = {10, 20, 30, 40}
L2b = {30, 40, 50, 60}
L2c = {10, 25, 30, 40}
}

L1 = {
L1a = {10, 30, 40}
L1b = {30, 25, 50}
} 
```

在代码的第一部分之后：

```
dict[10] = {L2a, L2c}
dict[20] = {L2a}
dict[25] = {L2c}
dict[30] = {L2a, L2b, L2c}
dict[40] = {L2a, L2b, L2c}
dict[50] = {L2c}
dict[60] = {L2c} 
```

在代码的第二部分：

```
L1a: dict[10] n dict[30] n dict[40] = {L2a, L2c}
L1b: dict[30] n dict[25] n dict[50] = { } 
```

所以`L1a`包含在`L2a`and中`L2c`，但`L1b`没有。

**复杂**

现在关于算法复杂度，假设`L1`has `n1`elements, `L2`has `n2`elements, `L1`is的子列表`m1`的平均元素数和 is 的子列表的平均元素`L2`数`m2`。然后：

*   最初的解决方案是： `O(n1 x n2 x m1 x m2)`，如果*containsSetOf*方法执行嵌套循环，或者，充其量，`O(n1 x n2 x (m1 + m2))`如果它使用 HashSet。Is7aq 的解决方案也是`O(n1 x n2 x (m1 + m2))`.

*   建议的解决方案是： `O(n2 x m2 + n1 x (m1 x nd + n2))`，其中`nd`是集合的平均元素数`dict[i]`。

所提出的解决方案的效率很大程度上取决于此`nd`：

*   如果`nd`大 - 接近`n2`（当每个整数都是 的每个子列表的一部分时`L2`），那么它与原始的一样慢。

*   但是，如果`nd`预期很小（即 的子列表`L2`彼此完全不同），那么建议的解决方案通常会快得多，特别是如果`n1`和`n2`很大。

# java - Android - 在内存中保存对象

> ID：13665824
> 
> 赞同：1
> 
> 时间：2012-12-02T02:22:23.500
> 
> 标签：java, android, login

此代码应该使用他输入的用户名和密码创建一个新用户，然后将该新对象保存到手机内存中，文件名与他的电子邮件匹配，以便在登录方法中我可以查找与输入的电子邮件匹配的文件反序列化它，并且他的所有用户信息都会在那里......但我不断收到 FileNotFooundException......我真的不明白......请有人帮助我！:)

这是代码：

```
 package com.example.eventmanager;

import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.widget.EditText;
import android.widget.Toast;

public class CreateAccount extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_create_account);
    }

    public void createUserAccount(View v) {

        EditText username = (EditText) findViewById(R.id.editText1);
        EditText password = (EditText) findViewById(R.id.editText2);
        EditText secondPassword = (EditText) findViewById(R.id.editText3);

        if (!(password.getText().toString().equals((secondPassword.getText()
                .toString())))) {
            Toast.makeText(this, "Passwords Don't Match", Toast.LENGTH_LONG).show();
        } else {

            User newUser = new User(username.getText().toString(), password.getText().toString());

            String fileName = newUser.getEmail();

            try {
                ObjectOutputStream os = new ObjectOutputStream(new FileOutputStream(fileName));
                os.writeObject(newUser);
                os.close();

            } catch (FileNotFoundException e) {
                // TODO Auto-generated catch block
                Toast.makeText(this, "FileNotFoundException", Toast.LENGTH_LONG)
                        .show();
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                Toast.makeText(this, "IOException", Toast.LENGTH_LONG).show();
                e.printStackTrace();
            }

            Intent intent = new Intent(this, LoginScreen.class);
            startActivity(intent);

            Toast.makeText(this, "Account Created Successfully",
                    Toast.LENGTH_LONG).show();
        }
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_create_account, menu);
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T02:26:24.270

根据`FileOutputStream`文档：它抛出`FileNotFoundException`以下场景：

> FileNotFoundException - 如果文件存在但是是目录而不是常规文件**或者**不存在但无法创建，**或者**由于任何其他原因无法打开

请确保`String fileName = newUser.getEmail().toString();`生成有效的文件名，我怀疑是这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T04:47:26.817

`FileOutputStream`使用绝对路径（我认为）如果您只提供文件名，它将默认为内部存储的根目录 - 在普通设备上，内部存储的根目录将无法访问。

你应该`openFileOutput(String name, int mode)`改用。这保证了在分配给您自己的应用程序的区域中的内部存储中创建文件。要读回文件，请使用相应的`openFileInput(String name)`方法。

# java - 是什么导致了这个错误（java）：“位置 0x0 rip=0x106282bae 的无效内存访问”

> ID：13665828
> 
> 赞同：1
> 
> 时间：2012-12-02T02:23:28.573
> 
> 标签：java, networking, p2p, bonjour

我正在为一个介绍性网络课程开发 P2P Twitter 客户端。我试图给我的同伴一种注册自己的方法，以便其他同伴可以发现它。我正在创建一个 DNS TXT 记录，以便可以调用 DNSSD.Register()。但是，当调用此方法时，我收到一条错误消息：

是什么导致了这个错误（java）：“位置 0x0 rip=0x106282bae 的无效内存访问”

这是导致它的方法：

```
import com.apple.dnssd.*;
    public static void announce()throws com.apple.dnssd.DNSSDException{
        TXTRecord txtRec = new TXTRecord();
        txtRec.set("Version", "1.1");
        txtRec.set("EncryptionSupport", "false");
        txtRec.set("DisplayName", profile.getPropertyValue("UserName"));
        txtRec.set("UserID", profile.getPropertyValue("UserID"));

        RegisterListener myRegisterListener = null;
        DNSSDRegistration reg = null;
        RegisterListener myRegistrationListener = null;
        reg = DNSSD.register
            (0, DNSSD.ALL_INTERFACES, profile.getPropertyValue("UserName"),
            profile.getPropertyValue("DNSSDServiceName"), 
            null, null, 4444, txtRec, myRegistrationListener);
    } 
```

“reg = ...”行是导致错误发生的行。关于我做错了什么的任何想法？其中很多内容来自我不完全理解的示例。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-02T02:29:42.960

问题是 DNSSD.register() 方法的最后一个参数应该是一个有效的对象。由于您将它作为 NULL 指针传递，因此当它被调用时，您将获得对 0x0 位置的无效访问。

查看此方法的[文档](https://developer.apple.com/library/mac/documentation/Java/Reference/DNSServiceDiscovery_JavaRef/com/apple/dnssd/DNSSD.html#register%28java.lang.String,%20java.lang.String,%20int,%20com.apple.dnssd.RegisterListener%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T03:57:17.587

KuarmaYoko 是对的。传递一个空的 RegisterListener 导致了这个问题。RegisterListener 是一个接口，我必须在一个名为“Announcer”的新类中实现它。当我实现这个类，实例化它，并将它作为最后一个参数传递时，我的代码像梦一样编译和执行。谢谢大家，希望这对未来的读者有所帮助！

# php - “解析错误：语法错误，意外 $end” 对于我的 uni 注册分配

> ID：13665831
> 
> 赞同：0
> 
> 时间：2012-12-02T02:23:53.483
> 
> 标签：php, html, parse-error

我是 php 新手，所以我使用了一个 Youtube 教程来创建这个脚本，但是上传者似乎已经消失了，所以我不能问他任何问题。我的登录表单似乎工作正常，但注册表是我遇到问题的地方

我已经从代码中删除了所有 html 和所有错误 else 语句以尝试消除错误消息，但我似乎找不到它。错误总是发生在我的脚本末尾。

有什么建议么

```
 <?php

        if ( $_POST['registerbtn'] ) {
    //makes sure email, username is valid
    $getuser = $_POST['user'];
    $getemail = $_POST['email'];
    $getpass = $_POST['pass'];
    $getretypepass = $_POST['retypepass'];

    if (!isset($getuser))
    {
        $error = "user not set ";
    } 

    if ($getuser) {
        if($getemail) {
            if($getpass) {
                if ($getretypepass) {
        require("connection.php");

                            $query = mysql_query("SELECT * FROM          users WHERE username ='$getuser'");
                            $numrows = mysql_num_rows($query);
                            if ($numrows == 0) {
                            $query = mysql_query("SELECT * FROM users WHERE email ='$getemail'");
                            $numrows = mysql_num_rows($query);
                            if ($numrows == 0) {

                                $password = md5(md5("19Dvdnj".$password."jndfFf20"));
                                $date = date("F d, Y");
                                $code = md5(rand());

                                mysql_query("INSERT INTO users VALUES ('', '$getuser', '$password', '$getmail', '0', '$code', '$date')");

                                $query = mysql_query("SELECT * FROM users WHERE username='$getuser'");
                                $numrows =mysql_num_rows($query);
                                if ($numrows == 1) { 

                                $site ="http://www.inn.leedsmet.ac.uk/~c3314283/iis/register.php";
                                $webmaster = "admin@leedsmet.com";
                                $headers = "From: $webmaster";
                                $subject ="Activate your Account";
                                $message = "Thanks for registering. Click below to activate your account.\n";
                                $message .= "$site/activate.php?user=$getuser&code=$code";
                                $message .= "You must activate your account to login";

                                if (mail($getmail, $subject, $message, $headers)){
                                    $errormsg = "You have been registered you must activate your account sent from the the activation link sent to<b>$getemail</b>";
                                    $getuser = "";
                                    $getemail = "";
                                }

                            mysql_close();

        $form ="<form action='register.php' method='post'>
        <table>
        <tr>
    <td></td>
    <td><font color='red'>$errormsg</font></td>
        </tr>

<tr>
    <td>Username:</td>
    <td><input type='text' name='user' value ='$getuser'/></td>
</tr>
    <tr>
        <td>Email:</td>
        <td><input type='text' name='email' value ='$getemail'/></td>
    </tr>
        <tr>
    <td>Password:</td>
    <td><input type='password' name='pass' value =''/></td>
        </tr>       
    <tr>
    <td>Retype:</td>
    <td><input type='password' name='retypepass' value =''/></td>
        </tr>   
    <tr>
    <td></td>
    <td><input type='submit' name='registerbtn' value ='Register'/></td>
        </tr>   
        </table>
        </form>";
        {
        echo $form;
        }
        ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T02:37:06.503

尝试自动格式化（自动缩进）你的代码。如果您没有允许这样做的编辑器，请使用[Sublime Text](http://www.sublimetext.com/)或[Notepad++](http://notepad-plus-plus.org/)之类的编辑器。:-) 在类似情况下它会为您节省大量时间；而不是试图在这种情况下定位问题，自动格式化后的问题会盯着你的脸。:-)

`}`我相信您`if`在

```
{
    echo $form;
} 
```

显然，如果是这种情况，发生了非常错误的事情，可能需要更多`}`的时间来修复你的代码。

这可能是复制和粘贴问题。也许您没有复制您在您提到的 Youtube 教程中找到的最后几行代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T02:25:44.483

使用任何带有语法高亮的代码编辑器（例如 Notepad++）都会清楚地告诉你你缺少一个`}`.

# objective-c - 如何使用 UIWebView？

> ID：13665834
> 
> 赞同：-4
> 
> 时间：2012-12-02T02:24:40.767
> 
> 标签：objective-c, ios, uiwebview

我的应用程序中有一个`UIWebView`。

我不知道如何使用它。我不是 Objective-C 专家，而且似乎缺少 Objective-C 文档。有人可以向我解释执行此操作的步骤和代码吗？

我已经有了它，但我不知道是否将其设为`IBOutlet`，或其他。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T03:21:49.490

> 但我不知道是否将其设为奥特莱斯

`IBOutlet`您应该为您添加一个，`UIWebView`因为您需要告诉它加载哪个网页。

然后你可以像这样使用它：

```
// remember to add the 'http://' or `https://`
NSURL * url = [NSURL URLWithString:@"http://www.google.com"];
NSURLRequest *req = [NSURLRequest requestWithURL:url];
[self.webView loadRequest:req]; 
```

有时你可能需要设置`webView`的委托方法：

```
– webView:shouldStartLoadWithRequest:navigationType:
– webViewDidStartLoad:
– webViewDidFinishLoad:
– webView:didFailLoadWithError:

@interface RadioViewController : UIViewController<UIWebViewDelegate>
...
@end 
```

并将其委托设置为`self`.

```
self.webView.delegate = self; 
```

并添加这个方法来做你需要的事情。

```
- (BOOL) webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
    // Add your code
} 
```

# sql-server - EF Code先部署后抛出ProviderIncompatibleException

> ID：13665835
> 
> 赞同：0
> 
> 时间：2012-12-02T02:24:46.890
> 
> 标签：sql-server, iis, entity-framework-5

我有一个在 VS2012 中开发的简单 EF 5.0 / Code First 应用程序。在开发中，它使用 SQL Server CE。但是，当我将它部署在测试服务器上时，我收到以下错误堆栈：

```
ProviderIncompatibleException: An error occurred while getting provider information from the database. 
This can be caused by Entity Framework using an incorrect connection string.
Check the inner exceptions for details and ensure that the connection string is correct.

ProviderIncompatibleException: The provider did not return a ProviderManifestToken string

SqlException (0x80131904): Login failed for user 'MYDOMAIN\MYSERVER$' 
```

IIS 和数据库位于同一台服务器 (MYSERVER) 上。它运行 Win2012（使用 IIS 8 和 .NET 4.5）和 SQL Server 2012。

web.config 中有两件事引起了我的注意。首先，连接字符串。我从 IIS UI 生成它；我使用了具有“数据源”的旧连接字符串，而不是服务器。我使用了本地主机和服务器名称。我创建了一个数据库用户。我在某处读到数据库不存在 - 所以我删除了它。我在数据库中授予了 NT AUTHORITY\NT SERVICE 权限。我可能做了一些其他的排列——但结果总是一样的。

第二名是实体框架部分下的连接工厂。显然，Web Deploy 并没有改变它；类型仍然是 SqlCeConnectionFactory，参数是 System.Data.SqlServerCe.4.0。我在某处看到 SQL Server 是默认设置 - 所以我删除了它；当这不起作用时，我相应地将值更改为 SqlConnectionFactory 和 System.Data.SqlServer - 但同样，结果是相同的。

到现在为止我已经没有想法了......鉴于即使我从现有数据库中读取数据时我也遇到了问题 - 我错过了一些简单的东西......

# ios - 确定视图中的点是否在子视图范围内

> ID：13665842
> 
> 赞同：8
> 
> 时间：2012-12-02T02:26:14.880
> 
> 标签：ios, uiview, subview, bounds, rectangles

假设我有一个 UIView parentView 和一个子视图 childView，它相对于 parentView 以某个未知角度旋转。确定 parentView 中的点（我知道 parentView 坐标系中的坐标）是否在 childView 坐标系中的矩形内的最有效方法是什么（矩形与其边界正交，但不等于它的边界，并且可能不正交于 parentView界）？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-02T02:47:09.530

将点转换为子视图的坐标系，然后使用`CGRectContainsPoint`：

```
CGPoint pointInSubview = [subview convertPoint:pointInSuperview fromView:superview];
if (CGRectContainsPoint(rectInSubview, pointInSubview)) {
    NSLog(@"We have a winner!");
} 
```

# android - android - 动态变化的背景

> ID：13665851
> 
> 赞同：0
> 
> 时间：2012-12-02T02:27:36.547
> 
> 标签：android, performance, hashmap, drawable

我有三个背景，比如说活动。显示的背景将取决于代码。除了使用 switch/if 之外，还有其他方法可以解决这个问题。

我想有一个静态的`HashMap<Integer, Integer>`。第二个参数用于drawable，所以我将使用map.get(key) 之类的东西来获取drawable。

我对此唯一关心的是性能，将可绘制对象存储在键值对 HashMap 中并通过检索值`map.get(key)`会影响性能吗？这是一件昂贵的事情吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T02:35:42.537

你应该没事。我怀疑你所做的任何性能打击（如果有的话）都会被人眼注意到

# javascript - 如何评估是否 正在使用自定义变量进行动画处理？

> ID：13665855
> 
> 赞同：0
> 
> 时间：2012-12-02T02:28:21.740
> 
> 标签：javascript, jquery

我有一个问题，关于如何评估 a 是否正在动画并根据此信息阻止点击操作员。我无法使用`:animated`，因为我正在为动画使用 jQuery 插件，这会破坏该属性。Benjamin Powers 通过创建自定义属性并对其进行评估来回答我的问题。( [http://jsfiddle.net/g5mJd/22/](http://jsfiddle.net/g5mJd/22/) )

但是我一直在玩代码，我很好奇是否可以使用变量而不是属性来复制效果。这是我的尝试：http: [//jsfiddle.net/g5mJd/24/](http://jsfiddle.net/g5mJd/24/)

但是，这段代码似乎不会永久改变我的变量`false`：

```
function() {
        $("#block").transition({
            x: '+=100'
        }, 500, function() {
            var anim = false;
    console.log(anim)
        }) 
```

在控制台日志中，它会声明该变量为假，但如果我再次检查它，它就会变为真。我究竟做错了什么？（完整代码参见 jsfiddle）

编辑：所以我现在这个函数将 var anim "false" 变为 "false" 但这会立即变回 "true"，使按钮无法点击（只有在 anim 为 "false" 时才能点击该按钮）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T03:16:28.820

问题出`var`在以下代码行中：

```
var anim = false; 
```

这将创建一个同名的局部变量并将其设置为`false`，它不会更新另一个`anim`。删除`var`：

```
anim = false; 
```

...它将如下所示工作：http: [//jsfiddle.net/g5mJd/25/](http://jsfiddle.net/g5mJd/25/)

（不要*从*小提琴代码顶部的`var`声明中删除。）`anim`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T04:17:00.673

您也可以为 jquery 使用 :animated 选择器。

```
 $("#block").is(":animated") 
```

会成功的。

# php - PHP Foreach 没有显示正确的输出？

> ID：13665856
> 
> 赞同：-1
> 
> 时间：2012-12-02T02:28:33.583
> 
> 标签：php, foreach

我的`foreach`循环有问题。

在我的脚本上：

```
$Tags = "PHP,HTML,CSS,Java";
$ExplodedVar = explode(",", $Tags);
print_r($ExplodedVar);
foreach ($ExplodedVar AS $NewStr)
{
    echo "<a href='#>$NewStr</a>,";
} 
```

这`print_r($ExplodedVar);`

正在显示正确的输出：

> `Array ( [0] => PHP [1] => HTML [2] => CSS [3] => Java )`

`foreach`循环前哨仅 HTML 和 Java

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T02:33:01.657

你错过了`'`href的关闭报价。

```
foreach ($ExplodedVar AS $NewStr)
{
  echo "<a href='#'>$NewStr</a>,";
} 
```

如果数据是用户输入，那么您需要清理数据。

```
foreach ($ExplodedVar AS $NewStr)
{
  echo "<a href='#'>". htmlspecialchars($NewStr)."</a>,";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T02:36:18.850

您错过了 hash 上的一个单引号：

```
echo "<a href='#'>$NewStr</a>,"; 
```

# c# - 无法从 IIS 打开数据库错误

> ID：13665858
> 
> 赞同：3
> 
> 时间：2012-12-02T02:29:25.037
> 
> 标签：c#, asp.net, iis, webforms

嗨，我只是第一次尝试在 IIS 上运行我的应用程序 fopr。在 Visual Studio 上开发时发现一切正常，但是当我将应用程序添加到 IIS 时，出现此错误：

```
 Cannot open user default database. Login failed.
    Login failed for user 'IIS APPPOOL\forum'.

    Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

    Exception Details: System.Data.SqlClient.SqlException: Cannot open user default database. 
```

当我从 Visual Studio 运行网站时，我应该怎么做？

**编辑**

我做了更多的挖掘，我设法发现我需要将我的应用程序池标识设置为 NetworkService 我这样做了，但现在我遇到了另一个错误：

> 无法打开物理文件“D:\Projects IDE\Visual Studio\MyWork\Websites\Forum\App_Data\ASPNETDB.MDF”。操作系统错误 5：“5（拒绝访问。）”。尝试为文件 D:\Projects IDE\Visual Studio\MyWork\Websites\Forum\App_Data\ASPNETDB.MDF 附加自动命名数据库失败。存在同名数据库，或无法打开指定文件，或位于 UNC 共享上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T06:10:00.060

请检查两个地方 1 访问网络服务标识的文件夹（IIS 应用程序池的默认值）或这个（IIS APPPOOL\forum） 2 连接字符串凭据。如果有“集成安全”。在那里提供特定的用户和密码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-03T22:56:10.707

我收到了这个非显式错误，因为我将应用程序池设置为`.NET 2.0`，而不是`.NET 4.0`在负责身份验证的服务上。通常，当框架不正确时，会显示有关无法识别的框架 .dll 的不同类型的错误，但在这种情况下不会。如果发生这种情况，请检查以下内容：

1.  *后面* 的值`IIS APPPOOL`是当前进程在其下运行的应用程序池的名称。在您的情况下，有一个名为`forum`.
2.  检查应用程序池是否使用正在运行的应用程序所需的更正管道和 .NET Framework。

# php - 无需轮询即可检测 PHP 中的文件更改

> ID：13665859
> 
> 赞同：3
> 
> 时间：2012-12-02T02:29:37.657
> 
> 标签：php, filesystems, inotify

我试图检测特定文件何时被修改，而无需轮询文件内容以查找更改。

服务器运行 Mac OS X，因此`inotify`不可用。我的服务器允许使用`exec()`.

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-02T02:32:36.430

检查[`filemtime()`](http://php.net/filemtime). 您可以经常轮询它，这比在文件本身中查找更改要容易得多。

# python - 使用一个中的键合并字典以扫描另一个的值

> ID：13665861
> 
> 赞同：0
> 
> 时间：2012-12-02T02:29:50.973
> 
> 标签：python, dictionary

需要帮助使用其中的键合并两个字典以查看另一个字典中的值。如果返回 true，它会将自己的值附加到另一个字典中（更新它..但不覆盖已经存在的值）

代码（对不起第一个自定义脚本）：

```
otuid2clusteridlist = dict()
finallist = otuid2clusteridlist
clusterid2denoiseidlist = dict()

#first block, also = finallist we append all other blocks into.
for line in open('cluster_97.ucm', 'r'):
    lineArray = re.split('\s+',line)
    otuid = lineArray[0]
    clusterid = lineArray[3]
    if otuid in otuid2clusteridlist:
        otuid2clusteridlist[otuid].append(clusterid)
    else:
        otuid2clusteridlist[otuid] = list()
        otuid2clusteridlist[otuid].append(clusterid)

#second block, higher tier needs to expand previous blocks hash
for line in open('denoise.ucm_test', 'r'):
    lineArray = re.split('\s+', line)
    clusterid = lineArray[4]
    denoiseid = lineArray[3]
    if clusterid in clusterid2denoiseidlist:
        clusterid2denoiseidlist[clusterid].append(denoiseid)
    else:
        clusterid2denoiseidlist[clusterid] = list()
        clusterid2denoiseidlist[clusterid].append(denoiseid)  

#print/return function for testing (will convert to write out later)
for key in finallist:
    print "OTU:", key, "has", len(finallist[key]), "sequence(s) which", "=", finallist[key] 
```

阻止一返回

```
OTU: 3 has 3 sequence(s) which = ['5PLAS.R2.h_35336', 'GG13_52054', 'GG13_798']
OTU: 5 has 1 sequence(s) which = ['DEX1.h_14175']
OTU: 4 has 1 sequence(s) which = ['PLAS.h_34150']
OTU: 7 has 1 sequence(s) which = ['DEX12.13.h_545']
OTU: 6 has 1 sequence(s) which = ['GG13_45705'] 
```

阻止两次退货

```
OTU: GG13_45705 has 4 sequence(s) which = ['GG13_45705', 'GG13_6312', 'GG13_32148', 'GG13_35246'] 
```

所以目标是将块二的输出添加到块一中。我希望它像这样添加

```
...
 OTU: 6 has 4 sequence(s) which = ['GG13_45705', 'GG13_6312', 'GG13_32148', 'GG13_35246'] 
```

我尝试`dic.update`过，但它只是将块二的内容添加到块一中，因为密钥不存在于块一中。

我认为我的问题更复杂，我需要第二个块在块一个的值中查找其键并将值附加到该列表中。

我一直在尝试 for 循环和 .append （类似于已经编写的代码），但我缺乏 python 的整体知识来解决这个问题。

想法？

补充，

数据的一些子集：

cluster_97.ucm（阻止一个文件）：

```
5 376 * DEX1.h_14175 DEX1.h_14175
6 294 * GG13_45705 GG13_45705
0 447 98.7 DEX22.h_37221 DEX29.h_4583
1 367 98.9 DEX14.15.h_35477 DEX27.h_779
1 443 98.4 DEX27.h_3794 DEX27.h_779
0 478 97.9 DEX22.h_7519 DEX29.h_4583 
```

denoise.ucm_test（块二的文件）：

```
11 294 * GG13_45705 GG13_45705
11 278 99.6 GG13_6312 GG13_45705
11 285 99.6 GG13_32148 GG13_45705
11 275 99.6 GG13_35246 GG13_45705 
```

我选择了这些子集，因为文件一中的第二行是文件二将要更新的内容。

如果有人想试一试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T02:40:44.563

更新以反映值的匹配...

我认为您的问题的解决方案可以在以下事实中找到：在 Python 中列出一个可变变量，而具有可变值的变量只是引用。所以我们可以使用第二个字典将值映射到列表。

```
import re

otuid2clusteridlist = dict()
finallist = otuid2clusteridlist
clusterid2denoiseidlist = dict()
known_clusters = dict()

#first block, also = finallist we append all other blocks into.
for line in open('cluster_97.ucm', 'r'):
    lineArray = re.split('\s+',line)
    otuid = lineArray[0]
    clusterid = lineArray[3]
    if otuid in otuid2clusteridlist:
        otuid2clusteridlist[otuid].append(clusterid)
    else:
        otuid2clusteridlist[otuid] = list()
        otuid2clusteridlist[otuid].append(clusterid)

    # remeber the clusters
    known_clusters[clusterid] = otuid2clusteridlist[otuid]

#second block, higher tier needs to expand previous blocks hash
for line in open('denoise.ucm_test', 'r'):
    lineArray = re.split('\s+', line)
    clusterid = lineArray[4]
    denoiseid = lineArray[3]
    if clusterid in clusterid2denoiseidlist:
        clusterid2denoiseidlist[clusterid].append(denoiseid)
    else:
        clusterid2denoiseidlist[clusterid] = list()
        clusterid2denoiseidlist[clusterid].append(denoiseid)

    # match the cluster and update as needed
    matched_cluster = known_clusters.setdefault(clusterid, [])
    if denoiseid not in matched_cluster:
        matched_cluster.append(denoiseid)

#print/return function for testing (will convert to write out later)
for key in finallist:
    print "OTU:", key, "has", len(finallist[key]), "sequence(s) which", "=", finallist[key] 
```

我不确定你是否需要`clusterid2denoiseidlist`，所以我添加了一个新`known_clusters`的来保存从值到列表的映射。

I'm not sure I covered all the edge cases in your real problem, but this generates the desired output given the supplied test inputs.

# iphone - 无法将数据保存到 iPhone 上的文件

> ID：13665862
> 
> 赞同：0
> 
> 时间：2012-12-02T02:30:06.567
> 
> 标签：iphone, ios, nsbundle

我创建了一个方法，首先将 json 数据保存到文件中，然后从文件中读取数据。

当我在模拟器上运行时，我能够保存和读取数据，但是当我尝试在 iPhone 上运行应用程序并通过调试时，它不会保存或检索数据。

```
- (void) connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    NSMutableData *retrievedData = [NSMutableData data];
    [retrievedData appendData:data];

    NSMutableString *allInfo = [[NSMutableString alloc] initWithData:retrievedData encoding:NSASCIIStringEncoding];

    NSString *filePath = [[NSBundle mainBundle] pathForResource:@"credentials" ofType:@"json"];

    NSData *userCredentials = allInfo;
    [userCredentials writeToFile:filePath atomically:YES];

    NSError *error;
    NSData* JSONData = [NSData dataWithContentsOfFile:filePath];
    NSDictionary *JSONDictionary = [NSJSONSerialization JSONObjectWithData:JSONData options:kNilOptions error:&error];
    //get the log in information from the credentials file
    NSDictionary *login = [JSONDictionary objectForKey:@"login"];
    //get the auth_token
    NSDictionary *loginInfo = login;

    if(loginInfo == NULL)
    {
        errorMessage.text = @"Invalid username or password";
        errorMessage.hidden = NO;
    }
    else
    {
        NSString *authCode = [loginInfo objectForKey:@"auth_token"];
        [self saveUserCredentials:authCode];
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T03:06:08.567

您**永远不**应该将文件写入`NSBundle`. 对于模拟器，这似乎是一个错误。模拟器比设备有更多的错误。如果可能的话，最好在设备上而不是在设备上测试您的应用程序。其他人也看到了这个问题。请参阅 Apple 的文档：

> Application_Home /AppName.app
> 
> 这是包含应用程序本身的捆绑目录。不要向此目录写入任何内容。为防止篡改，捆绑目录在安装时进行签名。写入此目录会更改签名并阻止您的应用再次启动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T22:09:43.133

我基本上是这样做的

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *directory = [paths objectAtIndex:0];
NSString *filepath = [NSString stringWithFormat:@"%@/%@", directory,@"credentials.json"]; 
```

现在我的代码能够在 iPhone 和模拟器上检索数据。

# css - 位置内水平居中：绝对元素

> ID：13665870
> 
> 赞同：0
> 
> 时间：2012-12-02T02:32:40.067
> 
> 标签：css, html, position, css-position

将容器水平居中的方法在容器处于或定位`margin-left: auto; margin-right: auto`时效果很好，但在定位时似乎失败了。`static``relative``absolute`

有没有办法让`auto`利润在这种情况下发挥作用？`absolute`由于某些原因，我需要容器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T02:49:41.453

根据定义，绝对定位将使用 0,0 作为定位的参考点。

我建议使用位置：绝对和宽度为 100% 的容器，然后指定一个位置：0 自动任何你想要居中的东西。

# haskell - `ab [c]` 和 `acd` 类型的链接箭头

> ID：13665879
> 
> 赞同：6
> 
> 时间：2012-12-02T02:34:16.350
> 
> 标签：haskell, arrows

我有一个输出值列表的箭头 ( `a b [c]`) 和另一个接受该类型的单个值( ) 的箭头`a c d`。我需要的基本上是一种将它们链接起来或将第二个箭头提升到`a [c] [d]`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T13:09:12.750

你不能只用`Arrow`类型类来做到这一点。进入需要在和案例之间`a b c`进行选择。对我们来说幸运的是，恰好提供了这种操作。`a [b] [c]``[]``(:)``ArrowChoice`

```
mapA :: ArrowChoice a => a b c -> a [b] [c]
mapA f = proc list -> case list of
    []   -> returnA -< []
    x:xs -> do
        y  <- f      -< x
        ys <- mapA f -< xs
        returnA      -< y:ys 
```

你的功能很简单：

```
chain :: ArrowChoice a => a b [c] -> a c d -> a b [d]
chain f g = f >>> mapA g 
```

* * *

如果没有`proc`符号，我们需要一个将列表构造函数转换为的函数`Either`：

```
listCase :: [a] -> Either () (a, [a])
listCase []     = Left ()
listCase (x:xs) = Right (x,xs)

mapA f = arr listCase >>>
    arr (const []) ||| (f *** mapA f >>> arr (uncurry (:))) 
```

# python - Google App Engine yaml 文件配置

> ID：13665881
> 
> 赞同：1
> 
> 时间：2012-12-02T02:35:16.847
> 
> 标签：python, google-app-engine, directory, app.yaml

我在 Google App Engine 中使用图像、html 文件和 javascript 时遇到问题。我的应用程序文件夹中有一个名为 static 的文件夹。在静态文件夹中，我还有 3 个名为“images”、“html”和“javascript”的文件夹。我的 app.yaml 的处理程序部分如下，

```
handlers:
- url: /html
  static_dir: static/html

- url: /javascript
  static_dir: static/javascript

- url: /images
  static_dir: static/images

- url: /.*
  script: index.app 
```

我尝试使用以下方式访问图像，

```
self.response.out.write('<img src="images/image.png">') 
```

我使用 jinja2 渲染一个 html，

```
jinja_environment = jinja2.Environment(autoescape=True,
                    loader=jinja2.FileSystemLoader(os.path.join(os.path.dirname(__file__), 'html')))

template = jinja_environment.get_template('index.html')
self.response.out.write(template.render(template_values)) 
```

我收到一个错误，找不到 jinja 的模板，也找不到我的图像。我认为这是使用 Google App Engine 上传和使用文件的正确方法，但显然我错了。

我可以通过 Google App Engine 使用文件夹中的文件的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T03:13:29.640

如果您要在 HTML 中使用模板系统，则不想将其声明为`static_dir`，原因是静态文件存储在与应用程序文件不同的文件系统中，因此它们将无法呈现. 当您使用 时`os.path.dirname(__file__).....`，您正在寻找应用程序文件系统中的文件，这与`static`您指定的目录不同。所以首先要尝试的是删除：

```
- url: /html
  static_dir: static/html 
```

从你的处理程序。然后，这将查找您的应用程序文件系统并（希望 :)）找到它。您的图像处理程序看起来不错，所以我会先尝试一下，看看它是否有所作为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T03:20:41.153

使用 Jinja，您可以渲染一个编写 HTML 的模板。那不是静态服务。

在您的 app.yaml 中，您使用： static/images 或 static/html 但在您的代码中，您使用另一条路径！没有静态文件夹。

因此，如果您有一个静态文件夹，并且在该文件夹中您有一个文件夹图像：

```
self.response.out.write('<img src="/images/image.png">') 
```

还有你的装载机：

```
jinja_environment = jinja2.Environment(autoescape=True,
                    loader=jinja2.FileSystemLoader(os.path.join(os.path.dirname(__file__),'static', 'html'))) 
```

# java - 返回后代码上的编译器错误

> ID：13665887
> 
> 赞同：-1
> 
> 时间：2012-12-02T02:36:45.143
> 
> 标签：java, compilation, return

我在以下代码（片段）上遇到编译器错误。为什么这段代码不正确？一个解决方案

```
protected Dialog onCreateDialog(int paramInt)
{
 switch (paramInt)
 {
 default:
 case 0:
 }
 for (Object localObject = null; ; localObject = this.dialog)
 {
  return localObject; // here problem cast
  this.dialog = new ProgressDialog(this);
  this.dialog.setMessage(getResources().getString(2131165201));
  this.dialog.setIndeterminate(true);
  this.dialog.setCancelable(false);
 }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T02:39:03.000

您`return`之前的语句`this.dialog = new ProgressDialog(this);`变成`unreachable`了代码，因为控制永远不会到达 return 语句之后的下一个直接语句。**这将导致编译错误。**您需要将订单翻转为：

```
 for (Dialog localObject = null; ; localObject = this.dialog)
    {
       this.dialog = new ProgressDialog(this);
       return localObject;
     } 
```

我不确定你的循环会做什么，但有一件事是肯定它不会循环，而只是在第一次迭代中返回。您`localObject`也将保留`null`，因为它不会到达循环`increment`块`for`（由于 return 语句，它会提前返回）。

**编辑：**只是为了修复您的编译错误，将您的 return 语句移动到 as 的底部`loop`：

```
 protected Dialog onCreateDialog(int paramInt)
    {
       switch (paramInt)
       {
         default:
         case 0:
       }
       for (Dialog localObject = null; ; localObject = this.dialog)
       {
          this.dialog = new ProgressDialog(this);
          this.dialog.setMessage(getResources().getString(2131165201));
          this.dialog.setIndeterminate(true);
          this.dialog.setCancelable(false);
          return localObject; // here problem cast
       }
      } 
```

正如我之前提到的，我没有得到使用`for`循环的真正原因，因为它根本不会循环，因为`return`里面的语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T02:39:20.140

返回后您不能（或不应该）有任何代码。它被称为“死”或“无法访问”的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T02:44:03.580

```
for (Object localObject = null; ; localObject = this.dialog) {
   return localObject;
   this.dialog = new ProgressDialog(this);
} 
```

首先，您将返回设置为 null 的 localObject。不确定这是否会给你一个空指针异常，但它看起来很可疑。`this.dialog = new ProgressDialog(this);`其次，正如 Yogendra 所说，在return 语句变成死代码之后，程序永远不会到达该语句。

# django - 服务器无法读取一个输入中的Django多个文件

> ID：13665888
> 
> 赞同：8
> 
> 时间：2012-12-02T02:36:45.053
> 
> 标签：django, file-upload

当我向 Django 提交一个多文件上传表单时

```
<input type="file" name="files" multiple /> 
```

我得到了一个合理的结果`request.FILES`：

```
(MultiValueDict: {u'files': [(InMemoryUploadedFile: 0202.jpg (image/jpeg)), (InMemoryUploadedFile: 0203.jpg (image/jpeg))]}) 
```

但随后我的困惑开始了。我以为`request.FILES['files']`会包含几个文件（似乎是一个列表），但它只显示

```
0203.jpg 
```

没有`InMemoryUploadedFile`部分，更重要的是：只有最后一个文件！

循环也只遍历那个文件，`request.FILES`显然是不可分割的；下面的代码实际上冻结了控制台并使其无休止地发出哔哔声：`.iteritems()``request.FILES['files']`

```
for v in request.FILES['files']:
    print v
    print type(v) 
```

所以... 这是正常的吗？我究竟做错了什么？

我开始认为这可能是一个错误：我在 Windows 7 上使用 Django 1.4.2 和 Python 2.7。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-02T02:44:03.967

事实证明，答案毕竟是在 Stack Overflow 上，这里有一个稍微不同（至少是客户端）的问题：[多个文件在 django 中使用相同的输入名称上传](https://stackoverflow.com/questions/851336/multiple-files-upload-using-same-input-name-in-django)

事实证明这`request.FILES['files']`是错误的，应该是`request.FILES.getlist('file')`。

为什么会这样，对我来说完全是个谜。如果有人可以用解释来回答，我很乐意切换接受的答案。

# api - API 只是引用库类或库类本身的接口

> ID：13665889
> 
> 赞同：0
> 
> 时间：2012-12-02T02:37:02.913
> 
> 标签：api

我用谷歌搜索了这个主题，但找不到正确的答案。我将 API 理解为唯一的接口类，它引用其他平台上的其他应用程序使用的库文件。但有人告诉我，API 本身就是库文件。

我是这个话题的新手，所以请向我提出任何答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T09:29:19.750

在我看来，API 只是接口的集合。它独立于实现。当然，通常存在标准实现并与 API“关联”，但如果实现与 API 相关联，则 API 不会与实现相关联。

如果您以 Java 为例，您会注意到 API ( [http://docs.oracle.com/javase/7/docs/api/](http://docs.oracle.com/javase/7/docs/api/) ) 仅显示受保护和公共字段/构造函数/方法/...不显示私人内容。

API 被简化为对用户可见的内容，这在某种程度上是接口的定义。实现是隐藏的。

可能令人困惑的是 API 是从实现中生成的，但这并不意味着 API 就是实现。

我可能错了，但我认为事情通常是这样的：

1.  定义了一个私有 API（它是规范，因此，它可以是源代码或任何描述性文件）
2.  基于私有API开发实现
3.  从此实现生成一个公共 API 并发布
4.  实现作为框架/工具箱/或任何名称发布
5.  开发人员使用公共 API 来构建他们的应用程序并选择最佳实现（通常是生成它的那个）。

如果您不同意，请随时发表评论；）

# php - 我可以在 foreach 中嵌套一个 foreach 吗？

> ID：13665890
> 
> 赞同：0
> 
> 时间：2012-12-02T02:37:05.510
> 
> 标签：php, arrays, foreach

我有一个`array`:`$categories = array("item1", "item2", "item3");` 我也有三个数组: `$item1Array = array("hi", "items");`, `$item2Array = array("hi", "items");`,`$item3Array = array("hi", "items");` 我声明了一个这样的 foreach ：

```
foreach ($categories as &$value) {
    echo "<optgroup label='" . $value . "'>';
    $nextArray = $value . "Array";
    foreach($nextArray as &$nextValue) {
        echo "<option value='" . $nextValue . "'>" . $nextValue . "</option>";
    }
} 
```

但它得到一个错误`Warning: invalid argument supplied for foreach()`。有没有办法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T02:40:55.260

是的，你可以，通过`${$nextArray}`。但请注意**命名变量不是好习惯**，您可以改用关联数组。

请注意，在这种情况下您不需要使用参考。

```
$categories = array("item1", "item2", "item3");
$item1Array = array("hi", "items");
$item2Array = array("hi", "items");
$item3Array = array("hi", "items");

foreach ($categories as $value) {
    echo "<optgroup label='" . $value . "'>";
    $nextArray = $value . "Array";
    foreach(${$nextArray} as $nextValue) {
        echo "<option value='" . $nextValue . "'>" . $nextValue . "</option>";
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T02:41:11.220

当然，但正如您从帖子的语法突出显示中清楚地看到的那样，您在“optgroup”行的末尾使用了 a`'`而不是 a 。`"`

此外，您可以只使用嵌套数组：

```
$categories = Array(
  "item1"=>Array("hi","items"),
  "item2"=>Array("hi","items"),
  "item3"=>Array("hi","items"),
);
foreach($categories as $key=>$array) {
  echo "<optgroup label='".$key."'>";
  foreach($array as $value) {
    echo "<option>".$value."</option>";
  }
  echo "</optgroup>";
} 
```

# algorithm - 什么是合适的算法？

> ID：13665895
> 
> 赞同：1
> 
> 时间：2012-12-02T02:37:50.713
> 
> 标签：algorithm, graph, hamiltonian-cycle

我正在尝试做 c++ 程序。我正在尝试解决我有很多点的问题。现在我需要找到通过所有点的路径。这实际上不是 TSP，因为根据我对 TSP 的了解，可以从所有点移动到其他所有点。但在我的情况下，点之间的路径网络是固定的，我只需要找到穿过所有点的合适路径，前提是所有点可能与其他点没有连接......所以我应该遵循什么算法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T02:42:33.030

看来您正在寻找一种遍历图形的方法？如果是这样，您是否尝试过广度优先搜索[http://en.wikipedia.org/wiki/Breadth-first_search](http://en.wikipedia.org/wiki/Breadth-first_search)或深度优先搜索[http://en.wikipedia.org/wiki/Depth-first_search](http://en.wikipedia.org/wiki/Depth-first_search)来遍历您的图表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T02:45:32.227

你想找到一个图的[哈密顿路径](http://en.wikipedia.org/wiki/Hamiltonian_path)。

> 在图论的数学领域中，哈密顿路径（或可追踪路径）是无向图中的一条路径，它只访问每个顶点一次。哈密​​顿循环（或哈密顿回路）是哈密顿路径，它是一个循环。确定图中是否存在这样的路径和循环是哈密顿路径问题，它是 NP 完全的。

存在的一些[技术](http://en.wikipedia.org/wiki/Hamiltonian_path_problem)：

> 有n！不同的顶点序列可能是给定 n 顶点图中的哈密顿路径（并且在完整图中），因此测试所有可能序列的蛮力搜索算法将非常慢。有几种更快的方法。Frank Rubin 的搜索过程将图的边分为三类：必须在路径中的边、不能在路径中的边和未确定的边。随着搜索的进行，一组决策规则对未确定的边进行分类，并确定是停止还是继续搜索。该算法将图划分为可以单独求解的组件。此外，可以使用 Bellman、Held 和 Karp 的动态规划算法在 O(n2 2n) 时间内解决问题。在这种方法中，人们确定，
> 
> Andreas Björklund 提供了一种替代方法，使用包含 - 排除原则将计算哈密顿循环数的问题简化为更简单的计数问题，即计算循环覆盖，这可以通过计算某些矩阵行列式来解决。使用这种方法，他展示了如何通过蒙特卡罗算法在 O(1.657n) 时间内解决任意 n 顶点图中的哈密顿循环问题；对于二分图，该算法可以进一步改进到时间 O(1.414n)。
> 
> 对于最大三阶图，仔细回溯搜索可以在时间 O(1.251n) 内找到哈密顿循环（如果存在）。

# windows-phone-8 - Windows Phone 8 HRESULT：0X80042706

> ID：13665896
> 
> 赞同：0
> 
> 时间：2012-12-02T02:38:07.763
> 
> 标签：windows-phone-8

我正在开发一个使用地图控件的 Windows Phone 8 应用程序。我已按照教程进行操作，但我一直收到消息框错误：HRESULT：0X80042706。这是教程中的代码

```
protected override void OnNavigatedTo(NavigationEventArgs e)
    {
        map.ColorMode = MapColorMode.Light; map.CartographicMode = MapCartographicMode.Road; map.LandmarksEnabled = true; map.PedestrianFeaturesEnabled = true; map.ZoomLevel = 17;
        routeQuery.TravelMode = TravelMode.Walking; routeQuery.QueryCompleted += rq_QueryCompleted;
        base.OnNavigatedTo(e);
    } 

...

void rq_QueryCompleted(object sender, QueryCompletedEventArgs<Route> e) {       
        if (null == e.Error)        {            
            //Recommended way to display route on map                   
            Route MyRoute = e.Result;                  
            MapRoute MyMapRoute = new MapRoute(MyRoute);                   
            map.AddRoute(MyMapRoute);        
        }       
        else           
            MessageBox.Show("Error occured:\n" + e.Error.Message); 
    } 
```

我试图`HRESULT: 0X80042706`从[这里](http://msdn.microsoft.com/en-us/library/dd208031%28v=prot.20%29.aspx)搜索什么样的错误，但我不知道这意味着什么。

我什至尝试将 if 条件切换为`e.Error == null`，但仍然不行。谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T06:28:48.460

该错误是因为您的设备在连接到虚拟磁盘服务（即地图）时不支持 CHAP 身份验证

这是因为您没有来自 Microsoft 的身份验证 ID。按照此处的详细信息（对于 wp8 地图，需要另一个身份验证）

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj207033(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj207033(v=vs.105).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T06:20:38.733

我从同一个教程中收到了同样的错误，发现这是由于我的电脑无法访问互联网（因此没有地图数据）。恢复 Internet 访问，错误自行解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-14T12:22:05.570

请检查您的清单文件并选择功能选项单击 ID_CAP_MAP。

# iphone - 横向 uiscrollview 垂直 iphone

> ID：13665897
> 
> 赞同：1
> 
> 时间：2012-12-02T02:38:26.503
> 
> 标签：iphone, objective-c, ios, uiscrollview, uiscrollviewdelegate

我的界面和面向横向模式。在我看来，我有一个用于记录许多`UITextField`.

组件`UIScrollView`仅水平移动而不是垂直移动。我希望组件`UIScrollView`只垂直移动以显示我的所有内容`UITextField`，我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T13:27:14.927

设置`contentSize`UIScrollView 的属性。

如果你`UIScrollView`的宽度是 480/568 像素（横向模式下的屏幕宽度），那么你可以这样做：

```
// Get the content height of the form (scrollview)
int scrollableHeight=700; // You can give accurate value by calculating last textfields frame position in form
CGSize scrollableSize = CGSizeMake(480, scrollableHeight);
[scrollView setContentSize:scrollableSize]; 
```

现在`UIScrollView`只会垂直滚动，因为它已经可以横向显示所有内容。

# html - 如何在文档中指定文档的编码？

> ID：13665899
> 
> 赞同：2
> 
> 时间：2012-12-02T02:38:53.540
> 
> 标签：html, character-encoding

指定 HTML 文档编码的一种方法是发送适当的标头。但是，一种备用方法是通过元标记声明内联编码。例如：

```
<!DOCTYPE html>
<html>
<head>
     <title>Foo bar</title>
     <meta charset="utf-8" />
</head>
<body>
    <p>Hello, world!</p>
</body>
</html> 
```

但是要阅读文档并确定编码，是否必须不知道编码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T02:40:05.653

只要在该`<meta>`标记之前没有出现非 ASCII 字符，浏览器就可以假定它是 ASCII 或 UTF8，并且在此之前它会正确读取。
这就是为什么该标签`<meta>`应该*在*`<title>`.

如果是 UTF16，浏览器可以通过尝试读取`<`.

# python - 将引号插入字符串的最佳pythonic方法

> ID：13665903
> 
> 赞同：0
> 
> 时间：2012-12-02T02:39:10.407
> 
> 标签：python, regex

我在编写自己的反向代理时正在处理[这个 python 错误。](http://bugs.python.org/issue3073)服务器正在向我的代理发送此`Set-Cookie`响应标头：

```
workgroup_session_id=ilDJtR0rE1AG28C9ZxKLHj8TBtcT89sw; Path=/; Expires=Sun, 02-Dec-2012 5:57:25 GMT; HttpOnly 
```

我正在将此字符串从模块加载到一个`SimpleCookie`实例中。`Cookie`不幸的是，由于我上面提到的错误，当我后来`expires`退出 morsel 字典时，它返回`Sun,`. 我发现我可以通过`Expires`在标题的组件周围`Set-Cookie`添加引号（或在值中包含空格的任何键/值对周围添加引号）来克服这个错误。

所以这：

```
workgroup_session_id=ilDJtR0rE1AG28C9ZxKLHj8TBtcT89sw; Path=/; Expires=Sun, 02-Dec-2012 5:57:25 GMT; HttpOnly 
```

会成为：

```
workgroup_session_id=ilDJtR0rE1AG28C9ZxKLHj8TBtcT89sw; Path=/; Expires="Sun, 02-Dec-2012 5:57:25 GMT"; HttpOnly 
```

和这个：

```
test=a b c; Path=/; Expires=a b c; HttpOnly 
```

会成为：

```
test="a b c"; Path=/; Expires="a b c"; HttpOnly 
```

我知道我可以将字符串分解为标记并循环遍历它们以查找空格，然后重建字符串，但我很好奇性能最佳**的**解决方案是什么。正如我所提到的，这是一个可能每秒处理几百个请求的反向代理，所以我希望这种替换尽可能快。

正则表达式替换（当然是预编译的）会有效吗？我听说正则表达式很重......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T08:15:06.117

这个正则表达式怎么样：

```
import re
header = re.sub("(?<==)[^;]* [^;]*", r'"\g<0>"', header) 
```

这会在 a 之后的任何内容周围插入引号，`=`直到下一个`;`（或字符串结尾），但前提是其间至少有一个空格。

```
>>> header = 'test=a b c; Path=/; Expires=a b c; HttpOnly'
>>> re.sub("(?<==)[^;]* [^;]*", r'"\g<0>"', header)
'test="a b c"; Path=/; Expires="a b c"; HttpOnly'
>>> header = "workgroup_session_id=ilDJtR0rE1AG28C9ZxKLHj8TBtcT89sw; Path=/; Expires=Sun, 02-Dec-2012 5:57:25 GMT; HttpOnly"
>>> re.sub("(?<==)[^;]* [^;]*", r'"\g<0>"', header)
'workgroup_session_id=ilDJtR0rE1AG28C9ZxKLHj8TBtcT89sw; Path=/; Expires="Sun, 02-Dec-2012 5:57:25 GMT"; HttpOnly' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T02:50:28.863

您是否需要在 Expires 之后的日期或任何出现在标题中任何位置的任意日期周围加上引号？如果是前者，试试这个：

```
header = "workgroup_session_id=ilDJtR0rE1AG28C9ZxKLHj8TBtcT89sw; Path=/; Expires=Sun, 02-Dec-2012 5:57:25 GMT; HttpOnly"
print(header.replace('Expires=', 'Expires="').replace('GMT', 'GMT"')) 
```

# jquery - 如果选中了 p:selectManyCheckbox 的第二个或第六个 f:selectItem，如何使用 jQuery 进行检查？

> ID：13665904
> 
> 赞同：1
> 
> 时间：2012-12-02T02:39:19.073
> 
> 标签：jquery, jsf, primefaces

我正在使用 PrimeFaces 3.4 `<p:selectManyCheckbox>`。我想知道用户是否检查了第二个或第六个选择项。

以下是相关代码：

```
<h:form id="signup-form">
    <p:commandButton type="button" value="Export" icon="ui-icon-extlink" onclick="exportChart()"/>  
    <p:selectManyCheckbox id="ja"  layout="pageDirection">  
        <f:selectItem id="hola" itemLabel="Importadores." itemValue="1" />  
        <f:selectItem itemLabel="Distribuidores nacionales o regionales." itemValue="1" />  
        <f:selectItem itemLabel="Cadenas de Supermercados." itemValue="1" /> 
        <f:selectItem itemLabel="Otros minoristas de venta a cliente final." itemValue="1" />  
        <f:selectItem itemLabel="Hoteles, restaurantes, cafeterías o similares." itemValue="1" />  
        <f:selectItem itemLabel="Cliente final particular." itemValue="2" /> 
        <f:selectItem itemLabel="Cliente final empresas." itemValue="2" />
    </p:selectManyCheckbox>
</h:form> 
```

单击命令按钮时执行的`exportChart()`功能如下：

```
<script>
    function exportChart() {  
        alert($(PrimeFaces.escapeClientId('signup-form:ja:hola')).is(':checked'));
    }  
</script> 
```

但是它总是会发出警报`false`。如何检查用户是否检查了第二个或第六个选择项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T03:14:43.177

`<p:selectManyCheckbox>`正如你所拥有的那样，基本上生成了*以下*HTML（省略了所有 jQuery UI 的花哨）：

```
<input id=​"signup-form:​ja:0" name=​"signup-form:​ja" type=​"checkbox" value=​"1">​
<input id=​"signup-form:​ja:​1" name=​"signup-form:​ja" type=​"checkbox" value=​"1">​
<input id=​"signup-form:​ja:​2" name=​"signup-form:​ja" type=​"checkbox" value=​"1">​
<input id=​"signup-form:​ja:​3" name=​"signup-form:​ja" type=​"checkbox" value=​"1">​
<input id=​"signup-form:​ja:​4" name=​"signup-form:​ja" type=​"checkbox" value=​"1">​
<input id=​"signup-form:​ja:​5" name=​"signup-form:​ja" type=​"checkbox" value=​"2">​
<input id=​"signup-form:​ja:​6" name=​"signup-form:​ja" type=​"checkbox" value=​"2">​ 
```

所以，下面的 jQuery 应该这样做：

```
if ($("input[name='signup-form:ja']:eq(1)").is(":checked")) {
    alert("The second item is checked");
}

if ($("input[name='signup-form:ja']:eq(5)").is(":checked")) {
    alert("The sixth item is checked");
} 
```

请注意，索引是从零开始的。

* * *

**与具体问题无关**，我会相应地修复项目值，以便它们都是唯一的，否则您将在服务器端完全不知道哪些项目被检查了 - 它是提交给的项目值服务器端，而不是项目标签。使用唯一的项目值，您还可以在 jQuery 中更可靠地确定检查的值。基于项目索引是古怪的，因为它不可维护（例如，如果您需要根据某些业务需求重新排列或扩展项目，则必须修复所有脚本）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T14:59:22.193

您好，我解决了如何检查，我做了 3 件事：

***1-***我在 selectManyCheckBox 中添加了一个 ID，并为每个* selectItem*创建了 inputext type=hidden 。*`

```
 <p:selectManyCheckbox  id="many1" value="#{cuestionarioController.pd2Opciones}" layout="pageDirection">  
                                    <f:selectItem itemLabel="Centroamerica." itemValue="3" />  
                                    <f:selectItem itemLabel="Mexico." itemValue="4" />  
                                    <f:selectItem itemLabel="Estados Unidos/Canada." itemValue="5" /> 
                                    <f:selectItem itemLabel="Brasil." itemValue="5" />  
                                    <f:selectItem itemLabel="Sudamérica." itemValue="4" /> 
                                    <f:selectItem itemLabel="Caribe." itemValue="5" /> 
                                    <f:selectItem itemLabel="España." itemValue="5" /> 
                                    <f:selectItem itemLabel="Otros países europeos." itemValue="6" />
                                    <f:selectItem itemLabel="China." itemValue="6" />
                                    <f:selectItem itemLabel="Otros." itemValue="2" />
                                    <f:selectItem itemLabel="La empresa no ha comenzado a exportar de forma regular." itemValue="0" />
                                    <p:ajax listener="#{cuestionarioController.sumarOpciond2}"/>
                                </p:selectManyCheckbox>
                            </p:panelGrid>

                            <p:inputText id="texto1" type="hidden" value="#{cuestionarioController.pi.vali1D2}" /> 
                            <p:inputText id="texto2" type="hidden" value="#{cuestionarioController.pi.vali2D2}" />  
                            <p:inputText id="texto3" type="hidden" value="#{cuestionarioController.pi.vali3D2}" />  
                            <p:inputText id="texto4" type="hidden" value="#{cuestionarioController.pi.vali4D2}" />  
                            <p:inputText id="texto5" type="hidden" value="#{cuestionarioController.pi.vali5D2}" />  
                            <p:inputText id="texto6" type="hidden" value="#{cuestionarioController.pi.vali6D2}" />  
                            <p:inputText id="texto7" type="hidden" value="#{cuestionarioController.pi.vali7D2}" />  
                            <p:inputText id="texto8" type="hidden" value="#{cuestionarioController.pi.vali8D2}" />  
                            <p:inputText id="texto9" type="hidden" value="#{cuestionarioController.pi.vali9D2}" />  
                            <p:inputText id="texto10" type="hidden" value="#{cuestionarioController.pi.vali10D2}" />  
                            <p:inputText id="texto11" type="hidden" value="#{cuestionarioController.pi.vali11D2}" />  

                        </p:outputPanel>` 
```

**2- 在 javascript 中调用函数的命令按钮。**

```
<p:commandButton type="button" value="Resultado" onclick="validate()"/> 
```

3-我称之为验证的函数Javascript，在这个我使用了primefaces的escapeClientId，什么是他在jquery中的组件的参考。重要的是参考，我查看了HTML“formInternacionalizacion：tabPreg_Inter：many1：0”中的primefaces生成的代码，第一个是表单，第二个是TabView，第三个是selectManyCheckBox，最后一个是selectItem的位置。所以当checkBox改变这个设置一个inputtext

```
function validate() {  
              //de2

            if($(PrimeFaces.escapeClientId('formInternacionalizacion:tabPreg_Inter:many1:0')).is(':checked') == true){ 
                $(PrimeFaces.escapeClientId('formInternacionalizacion:tabPreg_Inter:texto1')).val("1");
            }else{
                $(PrimeFaces.escapeClientId('formInternacionalizacion:tabPreg_Inter:texto1')).val("0");
            }

            if($(PrimeFaces.escapeClientId('formInternacionalizacion:tabPreg_Inter:many1:1')).is(':checked') == true){ 
                $(PrimeFaces.escapeClientId('formInternacionalizacion:tabPreg_Inter:text2')).val("1");
            }else{
                $(PrimeFaces.escapeClientId('formInternacionalizacion:tabPreg_Inter:texto2')).val("0");
            }

            if($(PrimeFaces.escapeClientId('formInternacionalizacion:tabPreg_Inter:many1:2')).is(':checked') == true){ 
                $(PrimeFaces.escapeClientId('formInternacionalizacion:tabPreg_Inter:texto3')).val("1");
            }else{
                $(PrimeFaces.escapeClientId('formInternacionalizacion:tabPreg_Inter:texto3')).val("0");
            }

            if($(PrimeFaces.escapeClientId('formInternacionalizacion:tabPreg_Inter:many1:3')).is(':checked') == true){ 
                $(PrimeFaces.escapeClientId('formInternacionalizacion:tabPreg_Inter:texto4')).val("1");
            }else{
                $(PrimeFaces.escapeClientId('formInternacionalizacion:tabPreg_Inter:texto4')).val("0");
            }

            if($(PrimeFaces.escapeClientId('formInternacionalizacion:tabPreg_Inter:many1:4')).is(':checked') == true){ 
                $(PrimeFaces.escapeClientId('formInternacionalizacion:tabPreg_Inter:texto5')).val("1");
            }else{
                $(PrimeFaces.escapeClientId('formInternacionalizacion:tabPreg_Inter:texto5')).val("0");
            }

            if($(PrimeFaces.escapeClientId('formInternacionalizacion:tabPreg_Inter:many1:5')).is(':checked') == true){ 
                $(PrimeFaces.escapeClientId('formInternacionalizacion:tabPreg_Inter:texto6')).val("1");
            }else{
                $(PrimeFaces.escapeClientId('formInternacionalizacion:tabPreg_Inter:texto6')).val("0");
            }

            if($(PrimeFaces.escapeClientId('formInternacionalizacion:tabPreg_Inter:many1:6')).is(':checked') == true){ 
                $(PrimeFaces.escapeClientId('formInternacionalizacion:tabPreg_Inter:texto7')).val("1");
            }else{
                $(PrimeFaces.escapeClientId('formInternacionalizacion:tabPreg_Inter:texto7')).val("0");
            }

            if($(PrimeFaces.escapeClientId('formInternacionalizacion:tabPreg_Inter:many1:7')).is(':checked') == true){ 
                $(PrimeFaces.escapeClientId('formInternacionalizacion:tabPreg_Inter:texto8')).val("1");
            }else{
                $(PrimeFaces.escapeClientId('formInternacionalizacion:tabPreg_Inter:texto8')).val("0");
            }

            if($(PrimeFaces.escapeClientId('formInternacionalizacion:tabPreg_Inter:many1:8')).is(':checked') == true){ 
                $(PrimeFaces.escapeClientId('formInternacionalizacion:tabPreg_Inter:texto9')).val("1");
            }else{
                $(PrimeFaces.escapeClientId('formInternacionalizacion:tabPreg_Inter:texto9')).val("0");
            }

            if($(PrimeFaces.escapeClientId('formInternacionalizacion:tabPreg_Inter:many1:9')).is(':checked') == true){ 
                $(PrimeFaces.escapeClientId('formInternacionalizacion:tabPreg_Inter:texto10')).val("1");
            }else{
                $(PrimeFaces.escapeClientId('formInternacionalizacion:tabPreg_Inter:texto10')).val("0");
            }

            if($(PrimeFaces.escapeClientId('formInternacionalizacion:tabPreg_Inter:many1:10')).is(':checked') == true){ 
                $(PrimeFaces.escapeClientId('formInternacionalizacion:tabPreg_Inter:texto11')).val("1");
            }else{
                $(PrimeFaces.escapeClientId('formInternacionalizacion:tabPreg_Inter:texto11')).val("0");
            }

            location.href ="resultadoGraficoMedia.xhtml";
        } 
```

# php - 我想将无序列表保存到 android phonegap 数据库中的列中

> ID：13665906
> 
> 赞同：0
> 
> 时间：2012-12-02T02:39:21.233
> 
> 标签：php, android, html, ajax, cordova

我想将无序列表保存到数据库中的列中。我怎样才能做到这一点 ？

*   国际象棋
*   火腿

创建表成分（名称varchar（20），成分varchar（30）；

我想把清单放在配料部分。

这是我用来创建列表的 html 和 js 中的代码。

```
function selectIngredient(select)
    { 
      var $ul = $(select).closest('.ui-select').prev('ul');
console.log($ul[0])
  if ($ul.find('input[value=' + $(select).val() + ']').length == 0) {
    console.log('s')
        $ul.append('<li onclick="$(this).remove();">' +
          '<input type="hidden" name="ingredients[]" value="' + 
          $(select).val() + '" /> ' +
          $(select).find('option:selected').text() + '</li>');
  }
    }

<!DOCTYPE html>
    <html>
      <head>
    <title>Ingredient</title>
      <meta charset="utf-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="stylesheet" href="themes/receta.min.css" />
       <link rel="stylesheet" href="themes/receta.css" />
     <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.6/jquery-ui.min.js"></script>
      <script src="recetas.js">  </script>  

</head>
     <body>
<form action="insert.php" method="post">
Receta: <input type="text" name="receta">
Ingredientes: <input type="text" name="ingredientes">

      <input type="submit">      

             <label>Ingredientes</label>
    <ul>

    </ul>

    <select onchange="selectIngredient(this);">
     <option value="Cheese">Cheese</option>
     <option value="Olives">Olives</option>
     <option value="Pepperoni">Pepperoni</option>
     <option value="Milk">Milk</option>
    </select> 

         </body>
      </html>

<?php
$dbhost = 'localhost';
$dbuser = 'alanis_lozano';
$dbpass = '20Anahuac12';

$conn = mysql_connect($dbhost, $dbuser, $dbpass) or die                      ('Error connecting to mysql');

$dbname = 'alanis_recetas';
mysql_select_db($dbname, $conn);

$sql="INSERT INTO Recetas (receta, ingredientes)
VALUES
('$_POST[receta]',$ingredientes = join(',', $_POST['selections'])";

if (!mysql_query($sql,$conn))
  {
  die('Error: ' . mysql_error());
  }
echo "1 record added";

mysql_close($conn);
?> 
```

![在此处输入图像描述](../Images/7760025b2112fa3779ffdd74e31ab7da.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T02:51:08.323

您在这里真正想要做的是以分隔方式存储成分，并将它们格式化为输出列表。

尝试这样的事情：

```
<form action="save.php">
    <input type="text" name="name" />
    <textarea name="ingredients"></textarea>
    <button type="submit">Save</button>
</form> 
```

**save.php** - 保存前用换行符 (\n) 替换任何分隔符

```
<?php

$name = $_GET["name"];
$name = mysqli_real_escape_string($name);

$ingredients = $_GET["ingredients"];
$ingredients = mysqli_real_escape_string($ingredients);
$ingredients = preg_replace("/[,\.\n\t]+/", "\n", $ingredients); 
```

**display.php** - 在显示之前，用换行符分割你的成分并在 UL 中呈现它们

```
echo "<ul>";
$ingredients = explode('\n", $ingredients);
for ($i = 0; $i < count($ingredients); $i++) {
    echo "<li>{$ingredients[$i]}</li>";
}
echo "</ul>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T02:44:49.417

您可以将列表转换为逗号分隔的字符串：

```
$ingredients = join(',', $_POST['selections']); 
```

在 dom 中，您可以命名选择框选项。

# javascript - Node.js 对不受支持的 HTTP 方法的 HTTP 响应？

> ID：13665909
> 
> 赞同：10
> 
> 时间：2012-12-02T02:40:12.827
> 
> 标签：javascript, node.js, http, httprequest

这通常更具体到 HTTP，但我使用 Node.js 作为我的平台。

在处理我的 HTTP 服务器不接受的 HTTP 方法时，最好的方法是什么？目前，我支持 PUT 和 GET，但不支持 POST。如果发出 POST 请求，我应该返回 403 还是 405？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-02T02:44:12.467

如果使用的 HTTP 方法不可接受，那么根据规范，您应该返回 405 Method Not Allowed。

对于 405，您还必须包含一个 Allow 标头，以指定允许的 HTTP 方法。例如，`Allow: POST`，或者如果有多个选择，`Allow: POST, PUT`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-02T02:44:04.920

那将是“不允许使用 405 方法”。在此处阅读所有相关信息：[HTTP 状态代码定义](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)。

# android - 屏幕关闭时 FMOD 声音卡顿

> ID：13665910
> 
> 赞同：-1
> 
> 时间：2012-12-02T02:40:18.083
> 
> 标签：android, fmod

屏幕关闭时 FMOD 声音卡顿。

以下是源代码。

```
result = FMOD_System_CreateSound(gSystem, songPath, FMOD_CREATECOMPRESSEDSAMPLE | FMOD_SOFTWARE, 0, &gSound);
CHECK_RESULT(result);

__android_log_write(ANDROID_LOG_INFO, "path", songPath);

result = FMOD_System_PlaySound(gSystem, FMOD_CHANNEL_FREE, gSound, 0, &gChannel);
CHECK_RESULT(result); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T11:11:47.853

口吃通常是由于音频缓冲不足，无法处理将音频传送到扬声器的延迟。这可能是由应用程序的 CPU 使用率峰值或操作系统调度更改（如应用程序进入后台状态）引起的。

我建议尝试使用 System::setDSPBufferSize，默认值为 1024（缓冲区大小）x 4（缓冲区数）。考虑将缓冲区的数量从 4 个增加到口吃变得稳定。

此外，对于 Android，请考虑将基于 Java 的 AudioTrack 输出模式与 FMOD 结合使用，而不是将其保留为默认值。在 System::init 之前使用 System::setOutput(FMOD_OUTPUTTYPE_AUDIOTRACK)，这种模式一般比较稳定。

# c# - ReportViewer 是否在单独的 AppDomain 中运行？

> ID：13665915
> 
> 赞同：1
> 
> 时间：2012-12-02T02:42:17.577
> 
> 标签：c#, winforms, reportviewer

我正在使用本地模式下的报表查看器在 WinForms 应用程序中运行报表。我遇到的问题是，我正在从报告中访问一个使用单例模式创建的对象；此对象在 WinForms 应用程序启动时被实例化和初始化，但报表创建了一个新实例，因为它没有看到该实例已由 WinForms 应用程序创建。

任何想法可能会发生什么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T08:00:35.947

在做了更多研究之后，我发现 ReportViewer 确实在单独的 AppDomain 下运行；这意味着将创建 Singleton 类的新实例，因为静态实例使用的内存空间是每个 AppDomain

# svn - 当一个分支尝试使用 Intellij IDEA 从另一个分支合并时，svn 奇怪的树冲突

> ID：13665916
> 
> 赞同：0
> 
> 时间：2012-12-02T02:42:18.423
> 
> 标签：svn, intellij-idea

Trunk 上有一个项目 A，它有两个分支 A1 和 A2。A1 和 A2 都处于开发阶段。

现在我想将 A2 的更改合并到 A1。我正在使用 Intellij IDEA 的“从...合并”功能并将 A2 设置为 A1 的一个分支。但是，在我选择要合并的修订并单击“确定”后，它会在 src/main 文件夹中出现“树冲突”。

有没有人有同样的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T03:37:46.507

1.  是的，有可能
2.  它与 Intellij 没有任何关联
3.  虽然您不显示分支日志，但没有人可以告诉您更多详细信息

“树冲突”错误是 Subversion、Subversion 合并的常见情况。它出现在合并树上 100%，当在未来的两个合并源中，**相同的文件**（在不同的部分）被**更改和重命名**

为了解决方法：合并*冲突文件*（您将在临时文件名中看到问题文件的文件名）并且仅在它之后 -*父目录*

# c - 运行时错误 - 生成素数数组的代码

> ID：13665921
> 
> 赞同：-1
> 
> 时间：2012-12-02T02:43:03.230
> 
> 标签：c, algorithm

**生成素数数组的代码**

我已经用c语言编写了代码我希望代码生成素数直到`10^9`

```
long primes[100000];
long number;
void prime_array_generator(long max){
    long sqrprime=9;
    long y=4,p=2;

    long testnumber=4,k,l=2;
    int j=0; 
    long n=1;   
    while(1){
        if(sqrprime>max){
            sqrprime = max;
        }
        for(;testnumber<=sqrprime;testnumber++){
            for(k=0;k<l;k++){
                if(testnumber%p==0){
                    j=1;
                    break;
                }
                p = primes[k+1];
            }       
            if(j==1){
                j=0;
                p=2;
                continue;
            }
            else{
                primes[number]=testnumber;
                number++;
                p=2;
            } 
        }
        if(sqrprime<max){
            n++;
            l=n;    
            sqrprime = primes[n]*primes[n];
            }
        if(sqrprime== max)
            break;
    }
}

 main(){
       //im using the prime_array_generator here 
    } 
```

显示结果的程序`max = 10^6`在那之后无法工作

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T02:47:24.087

您的主要阵列

```
long primes[100000]; 
```

只有素数到 1299709 的空间，之后，您将在数组边界之外写入。

10^9 以下的素数有 50847534 个。

旁白：您的算法效率不高，对于 10^9 的目标界限，您绝对应该使用筛子。

简单高效是[埃拉托色尼筛法](http://en.wikipedia.org/wiki/Sieve_of_eratosthenes)

# pdo - 从 ADODB 迁移到 PDO

> ID：13665922
> 
> 赞同：0
> 
> 时间：2012-12-02T02:43:17.613
> 
> 标签：pdo, prepared-statement, adodb

我有一个数据库查询，它使用带有未命名占位符的 ADODB 将数据插入数据库，我正在尝试将其转换为使用 PDO，但我收到一个错误，这可能是由于我正在使用的语法。

我正在尝试什么：

在包含的文件中，我具有以下共享功能：

```
function insCOA($data) {

    global $dbh;

    try {
        $sth=$dbh->prepare("
        INSERT INTO
            coa
            (
                nom_code,
                acc_title,
                acc_type_id,
                acc_desc
            ) VALUES (
                ?,
                ?,
                ?,
                ?
            )
        ");

        for ($i = 0; $i < count($data); $i++) {
            $sth->execute($data[$i]);
            $last_insert_id = $dbo->lastInsertId();
        }
    }

    catch(PDOException $e) {
        echo "Something went wrong. Please report this error.";
        file_put_contents('/PDOErrors.txt', $e->getMessage(), FILE_APPEND);
    }
    return $last_insert_id;
} 
```

在我的 PHP 页面中，我有以下内容：

```
// Add to coa table
$data = array(
    array(
        $nom_code,              /* nom_code         */
        $acc_title,             /* acc_title        */
        $acc_type_id,           /* acc_type_id      */
        $acc_desc               /* acc_desc         */
    )
);
$coa_id = insCOA($data); 
```

连接在其他地方处理并且连接正常。它以 $dbh 的形式在全局中导出。

我得到的错误是

致命错误：在第 574 行的 /common.funcs.php 中的非对象上调用成员函数 lastInsertId()（这是上面对 lastInsertId() 的引用。

原来在使用ADODB时，共享函数如下：

共享功能：

```
function insCOA($data) {

    global $conn;

    $sql    = "
        INSERT INTO
            coa
            (
                nom_code,
                acc_title,
                acc_type_id,
                acc_desc
            ) VALUES (
                ?,
                ?,
                ?,
                ?
            )
    ";

    for ($i = 0; $i < count($data); $i++) {
        if ($conn->Execute($sql,$data[$i]) === false) {
            print 'error' . $conn->ErrorMsg() . '<br />Query: ' . $sql;
        } else {
            $last_insert_id = $conn->Insert_ID();
        }
    }
    return $last_insert_id;
} 
```

在 PHP 页面中没有任何改变。

一旦我完成了这项工作，我将能够转换一堆其他查询，因此解决这个问题将非常有用。这是我第一次尝试使用 PDO。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T05:56:30.533

自己发现错误是：

```
$dbo->lastInsertId(); 
```

应该

```
$dbh->lastInsertId(); 
```

它现在运行良好。

# php - 按多列对MYSQL结果进行排序

> ID：13665927
> 
> 赞同：0
> 
> 时间：2012-12-02T02:44:03.917
> 
> 标签：php, mysql, sorting

好的，所以我已经阅读了我写这个问题时提出的 14 条 Stack Overflow 建议，我已经尝试了一切，但无法弄清楚。

我有一个带有评论的健身房目录。我有一个脚本，您可以通过邮政编码、城市/州或社区/城市/州搜索这些健身房。

我在后端和数据库中有一些字段。与这个问题有关的是优先级（我给它一个数字 1+，它应该首先显示最高或最低，我不在乎哪个最好从最高到最低），照片（它可以有 5 张照片），会员资格包括（a健身房可以包含在会员资格中的东西很少）和评论（不可编辑，但会计算健身房有多少评论）

我想按这个顺序排序

如果健身房有优先权，它应该首先显示，因为它是优先的。Null Priority 应该排在最后，然后按照片排序 az za just null 排在最后，然后按成员资格排序，包括 null 排在最后，然后按评论计数 0 或 null 排在最后。

因此，如果我有 4 个健身房，A 和 B 具有优先权、照片和会员资格，但有 0 条评论，C 没有优先权，没有照片，没有会员资格，但最高评论数为 2，D 没有优先权，但有照片和会员资格，但 1 条评论：它应该按以下顺序排序：

```
GYM   Priority   Photo      Membership   Reviews
A     yes        has some   has count    0
B     yes        has some   has count    0
C     no         no         no memb.     2
D     no         has some   has count    1 
```

预期排序结果：ABDC

很抱歉那令人困惑。

这是我已经尝试过的：

```
SELECT * FROM (SELECT * FROM gym WHERE (city = "Queens") AND (state = "NY") GROUP BY priority ORDER BY photo, member_includes, reviews DESC) x LIMIT 0, 150

SELECT * FROM (SELECT * FROM gym WHERE (city = "Queens") AND (state = "NY") ORDER BY priority, photo, member_includes, reviews DESC) x LIMIT 0, 150

SELECT * FROM (SELECT * FROM gym WHERE (city = "Queens") AND (state = "NY") GROUP BY photo, member_includes, reviews ORDER BY priority DESC) x LIMIT 0, 150

SELECT * FROM gym WHERE (city = "Queens") AND (state = "NY") GROUP BY photo, member_includes, reviews ORDER BY priority DESC LIMIT 0, 150

SELECT * FROM gym WHERE (city = "Queens") AND (state = "NY") ORDER BY priority, photo, member_includes, reviews DESC LIMIT 0, 150 
```

我已经尝试了所有其他类型的有和没有 ASC 的组合，但它仍然不能正确排序。我不知道我做错了什么。

请帮忙！

谢谢，大卫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T03:10:58.157

我相信这就是您正在寻找的：

```
SELECT * FROM gym
WHERE city = "Queens" AND state = "NY"
ORDER BY
  ISNULL(priority), priority,
  ISNULL(photo),
  ISNULL(member_includes), member_includes,
  ISNULL(reviews), reviews DESC
LIMIT 150 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T03:14:20.963

给你 - 我认为你错过了两个关键的想法：使用 ifnull 将任何空值映射到 0，然后使用 DESC 排序，以便零（来自 NULL）排序到最后。

这对你有什么作用？：

```
create table gym (
    id int primary key auto_increment not null,
    name varchar(255),
    priority int,
    photo int,
    member_includes int,
    reviews int
);

insert into gym 
(id, name, priority, photo, member_includes, reviews) values
(DEFAULT, 'A', 1, 2, 3, 0),
(DEFAULT, 'B', 1, 2, 3, 0),
(DEFAULT, 'C', NULL, 0, 3, 0),
(DEFAULT, 'D', NULL, 1, 3, 1);

select name from gym 
order by ifnull(priority,0) desc
    , ifnull(photo, 0) desc
    , ifnull(member_includes, 0) desc
    , ifnull(reviews, 0) desc ;

+------+
| name |
+------+
| A    |
| B    |
| D    |
| C    |
+------+
4 rows in set (0.00 sec) 
```

# java - 在Java中使用省略号（...）？

> ID：13665930
> 
> 赞同：34
> 
> 时间：2012-12-02T02:44:17.880
> 
> 标签：java, oop, object, syntax

我正在查看一些代码并看到以下符号。我有点不确定这三个点是什么意思，你怎么称呼它们。

```
void doAction(Object...o); 
```

谢谢。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-12-02T02:45:12.807

这意味着该方法可以接收多个 Object 作为参数。[为了更好地理解，请从此处](http://today.java.net/pub/a/today/2004/04/19/varargs.html)查看以下示例：

> 省略号 (...) 标识可变数量的参数，并在以下求和方法中演示。

```
static int sum (int ... numbers)
{
   int total = 0;
   for (int i = 0; i < numbers.length; i++)
        total += numbers [i];
   return total;
} 
```

> 在 JVM 的限制范围内，使用尽可能多的逗号分隔整数参数调用 summation 方法。一些例子：sum (10, 20) 和 sum (18, 20, 305, 4)。

这非常有用，因为它允许您的方法变得更加抽象。还要检查来自 SO 的这个很好的[例子](https://stackoverflow.com/questions/13435714/how-to-concatenate-string-arrays-in-java)，如果用户利用 ... 符号来制作一种在 Java 中连接字符串数组的方法。

[Java 5中变量参数方法的](http://viralpatel.net/blogs/varargs-in-java-variable-argument-method-in-java-5/)另一个例子

```
public static void test(int some, String... args) {
        System.out.print("\n" + some);
        for(String arg: args) {
            System.out.print(", " + arg);
        }
    } 
```

如评论部分所述：

> 另请注意，如果函数传递的参数类型与可变参数不同，可变参数应该是函数声明中的最后一个参数**public void test (Typev ... v , Type1 a, Type2 b)**或**public void test(Type1 a, Typev ... v recipientJids, Type2 b)** - 是**非法**的。只有**公共无效测试（Type1 a，Type2 b，Typev ... v）**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-02T02:48:44.370

It's called VarArgs [http://www.javadb.com/using-varargs-in-java](http://www.javadb.com/using-varargs-in-java). In this case, it means you can put multiple instances of Object as a parameter to doAction() as many as you wants :

```
doAction(new Object(), new Object(), new Object()); 
```

# 3d - 计算 3D 空间中的视锥体

> ID：13665932
> 
> 赞同：12
> 
> 时间：2012-12-02T02:44:39.137
> 
> 标签：3d, geometry, trigonometry, lwjgl, frustum

我已经绘制了一个又一个图表，说明如何计算三维空间中[视锥体的边界点。](http://en.wikipedia.org/wiki/Viewing_frustum)首先，我有两组数据，每组包含三个值：相机的 xyz 坐标和围绕 x、y 和 z 轴的旋转。给定一定的视距，应该可以计算 6 个平面中每个平面的边界点。我一直在使用这些方程式来计算远平面的宽度和高度：

```
hfar = 2 * tan(45/2) * view_distance
wfar = hfar * ratio 
```

hfar 是远平面的高度， wfar 是宽度， ratio 是视口宽度除以高度的比率。我一直在使用下图来尝试弄清楚：

![在此处输入图像描述](../Images/c909c63f22303ed9f52919d31ec2e95d.png)

我需要找到由 (?,?,?) 注释的点。几天来我一直在尝试计算这些值，但无济于事。任何帮助，将不胜感激。

此外，可以在[此处](http://www.lighthouse3d.com/tutorials/view-frustum-culling/view-frustums-shape/)和[此处](http://www.lighthouse3d.com/tutorials/view-frustum-culling/geometric-approach-extracting-the-planes/)找到一些提供有关该主题的信息的好资源。

编辑：我掀起的另一张图像显示了通过 y 轴的单个切片，俯视 x 轴。它显示了与上图相同的信息，但也显示了我的问题：我无法为远平面的每个边界点计算正确的 z 轴值。

![在此处输入图像描述](../Images/ec8b7b49490724e186b37c12c1a0b017.png)

请记住，可以通过 x 轴进行相同的切割，以显示相同的过程，但具有玩家向上或向下看的角度。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-01-10T02:32:54.010

计算近平面和远平面的中心点：

```
 vec3 nearCenter = camPos - camForward * nearDistance;
    vec3 farCenter = camPos - camForward * farDistance; 
```

计算近平面和远平面的宽度和高度：

```
 real nearHeight = 2 * tan(fovRadians/ 2) * nearDistance;
    real farHeight = 2 * tan(fovRadians / 2) * farDistance;
    real nearWidth = nearHeight * viewRatio;
    real farWidth = farHeight * viewRatio; 
```

计算近平面和远平面的角点：

```
 vec3 farTopLeft = farCenter + camUp * (farHeight*0.5) - camRight * (farWidth*0.5);
    vec3 farTopRight = farCenter + camUp * (farHeight*0.5) + camRight * (farWidth*0.5);
    vec3 farBottomLeft = farCenter - camUp * (farHeight*0.5) - camRight * (farWidth*0.5);
    vec3 farBottomRight = farCenter - camUp * (farHeight*0.5) + camRight * (farWidth*0.5);

    vec3 nearTopLeft = nearCenter + camY * (nearHeight*0.5) - camX * (nearWidth*0.5);
    vec3 nearTopRight = nearCenter + camY * (nearHeight*0.5) + camX * (nearWidth*0.5);
    vec3 nearBottomLeft = nearCenter - camY * (nearHeight*0.5) - camX * (nearWidth*0.5);
    vec3 nearBottomRight = nearCenter - camY * (nearHeight*0.5) + camX * (nearWidth*0.5); 
```

从平面的任意三个角计算每个平面，顺时针或逆时针缠绕到指向内（取决于坐标系）。

```
 vec3 p0, p1, p2;

    p0 = nearBottomLeft; p1 = farBottomLeft; p2 = farTopLeft;
    vec3 leftPlaneNormal = Normalize(Cross(p1-p0, p2-p1));
    vec3 leftPlaneOffset = Dot(leftPlaneNormal, p0);

    p0 = nearTopLeft; p1 = farTopLeft; p2 = farTopRight;
    vec3 topPlaneNormal = Normalize(Cross(p1-p0, p2-p1));
    vec3 topPlaneNormal = Dot(topPlaneNormal , p0);

    p0 = nearTopRight; p1 = farTopRight; p2 = farBottomRight;
    vec3 rightPlaneNormal = Normalize(Cross(p1-p0, p2-p1));
    vec3 rightPlaneNormal = Dot(rightPlaneNormal , p0);

    p0 = nearBottomRight; p1 = farBottomRight; p2 = farBottomLeft;
    vec3 bottomPlaneNormal = Normalize(Cross(p1-p0, p2-p1));
    vec3 bottomPlaneNormal = Dot(bottomPlaneNormal , p0); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-02T04:07:20.617

我认为您要解决的一般问题是如何在 3d 中旋转对象。据我了解，您知道如何获取相机矢量的大小，但不知道它们的方向。您已经定义了关于 x、y 和 z 轴的角度旋转，您希望将其应用于相机的 [up]、[side] 和 [view/lookAt] 向量。

![在此处输入图像描述](../Images/17cab8783d14784e5586d913425a1add.png)

上图说明了我所说的 up、side 和 lookAt 向量的含义。它们与您的截锥体相关，如下图所示。

![在此处输入图像描述](../Images/aae44736cabdf55218395769cfa2fabe.png)

这是 C++ 中的一些粗略代码，它将在给定轴和角度的情况下旋转一个点：

```
 Vec3 RotatedBy(Vec3 const &axisVec, double angleDegCCW)
    {
        if(!angleDegCCW)
        {   return Vec3(this->x,this->y,this->z);   }

        Vec3 rotatedVec;
        double angleRad = angleDegCCW*3.141592653589/180.0;
        rotatedVec = this->ScaledBy(cos(angleRad)) +
                     (axisVec.Cross(*this)).ScaledBy(sin(angleRad)) +
                     axisVec.ScaledBy(axisVec.Dot(*this)).ScaledBy(1-cos(angleRad));

        return rotatedVec;
    } 
```

一旦你有了旋转的向上、视图和侧向量，你就可以找到你的远平面的角。

# http - Heroku 是否覆盖了我的 500 错误消息？

> ID：13665936
> 
> 赞同：0
> 
> 时间：2012-12-02T02:45:20.663
> 
> 标签：http, heroku, httpresponse

我正在尝试从 http 500 响应返回自定义错误消息。在本地测试时，它会提供自定义响应，但在 Heroku 上运行时，它会给出通用的“内部服务器错误”响应。Heroku 是否覆盖 500 错误响应？如果是这样，有没有办法让它使用我发送的自定义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T07:42:00.283

您需要将自定义错误消息和维护页面上传到外部源，例如 S3。然后，您需要将错误页面的位置添加到您的应用程序配置中，以便在需要时调用它们。

```
heroku config:add \
  ERROR_PAGE_URL=http://s3.amazonaws.com/your_bucket/your_error_page.html \
  MAINTENANCE_PAGE_URL=http://s3.amazonaws.com/your_bucket/your_maintenance_page.html 
```

有关更多信息，请参阅 Heroku 文档：[https ://devcenter.heroku.com/articles/error-pages](https://devcenter.heroku.com/articles/error-pages)

# java - 循环不变量快速排序

> ID：13665945
> 
> 赞同：1
> 
> 时间：2012-12-02T02:47:32.617
> 
> 标签：java, quicksort

我如何从不变量中理解 l 是要返回的正确值以及如何初始化**l=low** ; 和**h=high** ; 建立不变量？

```
/* invariant
         * low <= l <= h <= high
         * In region for indexes i with low <= i < end:
         *   elements are as originally, but rearranged.
         *   if i < l then arr[i] < x
         *   if i >= h then arr[i] >= x
         * Elements outside region are unchanged.
         */ 

private static int partition(int[] arr, int low, int high, int x)
{
        int l = low;
        int h = high;
         while (l<h)
         {
            if (arr[l] < x)    
               l =l +1;
            else
            {                           
                int x = arr[l];
                arr[l] = arr[h-1];
                arr[h-1] = x
                h = h-1;
             } 
         }
         return l;
      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T02:58:22.237

首先，您将阵列分为两部分。您选择中间元素`x`，然后将所有较小的元素移动到`x`左侧，这样所有剩余的右侧元素都变得大于`x`.

一旦完成，`x`就在正确的位置。现在您分别为左右线段调用相同的方法。

这种方式high和low代表了段的`lower`和`upper`索引。例如，如果您的数组大小是`10`并且`x`最终位于位置`4`（索引 = 3），那么对于第一个子列表，低 = 0，高 = 2。

同样对于第二个子列表，low=4 和 high=9。

# ruby-on-rails - 覆盖 Rails 活动记录会破坏 has_and_belongs_to_many 关系的意外删除

> ID：13665946
> 
> 赞同：0
> 
> 时间：2012-12-02T02:47:32.993
> 
> 标签：ruby-on-rails, activerecord, inheritance, super, destroy

我有一个继承自 ActiveRecord::Base 的 Commentable 类和一个继承自 Commentables 的 Event 类。

我已经覆盖了这两个类中的销毁方法，并且 Event.distroy 调用了 super。然而，一些意想不到的事情发生了。具体来说，事件的 has_and_belongs_to_many 关联被删除。我认为这是因为某些模块被包含在 Commentables 和 Event 类之间，但不确定是否有办法阻止这种情况。

这是简化的代码：

```
class Commentable < ActiveRecord::Base
  has_many :comments

  def destroy
    comments.destroy_all
    self.deleted = true
    self.save!
  end

end

class Event < Commentable
  has_and_belongs_to_many :practitioners, :foreign_key => "commentable_id"

  def destroy
    #some Event specific code
    super
  end

end 
```

我不想从数据库中删除行，只需设置一个“已删除”标志。我也不想删除任何关联。但是，在 Event.destroy 和 Commentable.destroy 之间的某个地方，其他一些 rails 代码会破坏 has_and_belongs_to_many 表中的记录。

知道为什么会发生这种情况以及如何阻止它吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T07:54:26.497

您实际上不必在`Commentable`模型上覆盖destroy，只需添加一个`before_destroy`回调`false`即可实际取消destroy调用。例如：

```
class Commentable < ActiveRecord::Base
 # ... some code ...
  before_destroy { |record|
    comments.destroy_all
    self.deleted = true
    self.save!
    false
  }
 # ... some code ...
 end 
```

模型也是如此`Event`；只需添加一个回调而不覆盖destroy方法本身。

更多关于可用回调的信息[在这里](http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-23T16:32:03.937

`false`如果返回，Rails 5 不会停止回调链。我们将不得不使用`throw(:abort)`。

```
before_destroy :destroy_validation

def destroy_validation
  if condition
    errors.add(:base, "item cannot be destroyed because of the reason...")
    throw(:abort)
  end
end 
```

在 Rails 5 之前，`false`从任何`before_ callback`in `ActiveModel or ActiveModel::Validations, ActiveRecord`&返回`ActiveSupport`导致回调链停止。

我们可以通过将此配置更改为 来关闭此默认行为`true`。但是，当`false`从回调返回时，Rails 会显示弃用警告。

新的 Rails 5 应用程序带有一个名为`callback_terminator.rb`.

```
ActiveSupport.halt_callback_chains_on_return_false = false 
```

默认情况下，该值设置为`false`。

```
=> DEPRECATION WARNING: Returning `false` in Active Record and Active Model callbacks will not implicitly halt a callback chain in the next release of Rails. To explicitly halt the callback chain, please use `throw :abort` instead.
ActiveRecord::RecordNotSaved: Failed to save the record 
```

这是一个受欢迎的更改，有助于防止回调意外停止。

# python - 无法在 python 中解析 json，但能够在 json viewer 中查看文本

> ID：13665949
> 
> 赞同：2
> 
> 时间：2012-12-02T02:49:02.840
> 
> 标签：python, json, parsing

我正在尝试在 python 中解析以下 json 文本，但出现错误，尽管我能够使用[Json Viewer](http://jsonviewer.stack.hu/)解析此 json 文本。所以我想我的 json 文本是正确的，有人可以帮我看看这里有什么问题吗？

```
import json as j

data = '{"c":[{"xy":{"xstart":0,"xend":5,"ystart":1,"yend":5},"names":["D","T","O","H","L","C",],"co":["rgb(0,0,128)"]}],"Values":{"D":["11/30/2012"],"T":["09:44:00"],"O":["5848.40"],"H":["5848.40"],"L":["5847.45"],"C":["5848.40"]}}'
json_data = j.loads(data)
#print json_data["c"][0]

Traceback (most recent call last):
  File "C:json\jsonexample.py", line 4, in <module>
    json_data = j.loads(data)
  File "C:\Python27\lib\json\__init__.py", line 326, in loads
    return _default_decoder.decode(s)
  File "C:\Python27\lib\json\decoder.py", line 366, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "C:\Python27\lib\json\decoder.py", line 384, in raw_decode
    raise ValueError("No JSON object could be decoded")
ValueError: No JSON object could be decoded 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T03:01:52.630

看起来这是您的实际字符串的问题。这一行：

```
"names":["D","T","O","H","L","C",] 
```

后面多了一个逗号`"C"`。尝试删除它，看看它是否按预期工作。

```
In [1]: import json as j

In [2]: data = '{"c":[{"xy":{"xstart":0,"xend":5,"ystart":1,"yend":5},"names":["D","T","O","H","L","C"],"co":["rgb(0,0,128)"]}],"Values":{"D":["11/30/2012"],"T":["09:44:00"],"O":["5848.40"],"H":["5848.40"],"L":["5847.45"],"C":["5848.40"]}}'

In [3]: json_data = j.loads(data)

In [4]: json_data['c'][0]
Out[4]:
{u'co': [u'rgb(0,0,128)'],
 u'names': [u'D', u'T', u'O', u'H', u'L', u'C'],
 u'xy': {u'xend': 5, u'xstart': 0, u'yend': 5, u'ystart': 1}} 
```

# python - 如何在 Python 中反向循环一组字符串？

> ID：13665954
> 
> 赞同：0
> 
> 时间：2012-12-02T02:50:25.613
> 
> 标签：python, string, loops, reverse

如果不使用 reversed()，我将如何在函数中循环 Python 中的一组字符串？

偶然发现了以下范围：

> range() 和 xrange() 采用指定步骤的第三个参数。因此，您可以执行以下操作。
> 
> range(10, 0, -1) 给出
> 
> [10, 9, 8, 7, 6, 5, 4, 3, 2, 1] 但是对于迭代，你真的应该使用 xrange 来代替。所以，
> 
> xrange(10, 0, -1)

但是这些并不能真正与字符串说话？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T02:58:35.593

您正在寻找的功能是[list comprehensions](http://docs.python.org/2/tutorial/datastructures.html#list-comprehensions)。这些很有用，因为您不必迭代序列，这是`range`和`xrange`（在 2.x 中）提供的。

`str`可以迭代和切片，就像字符串一样。唯一的区别是`str`元素是不可变的。

以您的示例为例，假设您有一组字符串，并且想要遍历它们。没问题 - 请记住，集合对它们没有固有的顺序；他们只保证内容是独一无二的。

```
myset = set(["first", "second", "third", "fourth", "fifth"])
for i in myset:
    print i 
```

...打印：

```
second
fifth
fourth
third
first 
```

[在这种情况下，您可以使用序列类型的 step 参数](http://docs.python.org/2/library/stdtypes.html#sequence-types-str-unicode-list-tuple-bytearray-buffer-xrange)自行反转单个字符串，该序列类型`str`属于该类型。你可以这样做：

```
"this is the song that never ends"[::-1] 
```

...打印：

```
'sdne reven taht gnos eht si siht' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-06T09:32:57.200

尝试这个：

```
>>> str = 'abcdefghijklmnopqrstuvwxyz'
>>> str[::-1]
'zyxwvutsrqponmlkjihgfedcba' 
```

# c - 预处理器宏解释？

> ID：13665963
> 
> 赞同：0
> 
> 时间：2012-12-02T02:53:13.500
> 
> 标签：c, struct, linked-list, c-preprocessor

我的老师让我们使用以下预处理器宏在**C**中实现链接队列。这个想法是你通过让它不保存数据来使你的队列通用，然后你在其他地方有一个包装器结构，它保存队列中的节点，以及属于它的数据片段。

下面的宏从队列中获取一个节点（即node），wrapper结构的类型（即struct Wrapper），以及Wrapper的队列节点元素的名称（即qnode（Wrapper有一个叫做qnode的元素））。

然后宏返回包含传入的节点的struct Wrapper。

所以调用看起来像这样：

```
queue_entry(node, struct Wrapper, qnode) 
```

这在我看来非常酷，而且效果很好，（看看我的老师是怎么写的，最好！）。但我希望有人可以向我解释它实际上是如何工作的？因为我对幕后实际发生的事情一无所知。

宏：

```
#define queue_entry(NODE, STRUCT, MEMBER)               \
    ((STRUCT *)((uint8_t*)(NODE) - offsetof(STRUCT, MEMBER))) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T03:08:42.563

只需将宏视为 C 的 sed

任何你看到 QUEUE_ENTRY(a, b, c) 的地方你都会得到：

((b *)((uint8_t*)(a) - offsetof(b, c)))

所有这些替换都是在编译*之前完成的*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T03:20:22.587

C struct 中的成员元素的地址有固定的差异。这种差异是在编译时本身定义的。

您可以使用`&(struct_object.member) - &struct_object`. 这就是`offsetof`.

例如考虑以下结构：

```
struct abcd{
int a; // 4 bytes
int b; // another 4 bytes
char c;// 1 byte
} 
```

然后`offsetof(struct abcd,c)`将返回 8。`offsetof(struct abcd,a)`将是 0 等等。结构中的“[填充](http://en.wikipedia.org/wiki/Data_structure_alignment#Data_structure_padding)”或“对齐”也起着决定偏移的作用。但是，这是在编译时决定的，而不是在运行时决定的。

因此，如果您有成员的地址（在我们的示例中为字符 c），但没有结构，则可以通过从成员地址中减去成员地址偏移量来获得父结构的地址。

在您的示例中，成员的地址包含在节点中。因此，如果您减去成员偏移量，您将获得容器结构的地址。

在 linux 内核源代码中，名称下可以使用相同的宏，`container_of`（如果有的话，我忘记了大写和下划线）。

# php - 表单中的多个按钮

> ID：13665965
> 
> 赞同：0
> 
> 时间：2012-12-02T02:53:21.520
> 
> 标签：php, forms, submit

我在 php 中有一个包含一些行的表。每行包含一个带有 id 的数据集。任务是根据 id 跳过数据库中的字段。身份不明。

我打算用提交按钮跳过数据集。每个数据集也有一个按钮。该表单将发送到 PHP_SELF 并在一个函数中我对数据库进行更新。

现在的挑战是，找出按下了哪个按钮。不可能通过 case 块运行，因为 id 介于 1 和 99999 之间。

有人能帮我吗。我可以重命名按钮的类型、名称、id。id 已经在行集中。

非常感谢！坦率

```
<form id="form1" name="form1" method="POST" action="<?php echo $editFormAction; ?>">
<fieldset><legend>Ihnen zugewiesene Services</legend>
<table width="100%" border="1">
  <tr>
    <th>Schalter</th>
    <th width="100%">Servicename</th>
    <th width="50">Status</th>
  </tr>
  <?php do { ?>
    <tr>
      <?php if ($row_Recordset1['sendToVoicebox'] == 0) { ?>
        <td><input type="submit" name="<?php $row_Recordset1['service_id']; ?>" id="btnOn" value="Voicebox ein" /></td>
      <?php } else { ?>
        <td><input type="submit" name="<?php $row_Recordset1['service_id']; ?>" id="btnOn" value="Voicebox aus" /></td>
      <?php } ?>          

      <td><?php echo $row_Recordset1['service_id']; ?></td>

      <?php if ($row_Recordset1['sendToVoicebox'] == 0) { ?>
      <td><img src="images/VoiceboxOff.png" width="64" height="64" alt="pause" /></td>  
      <?php } else { ?>
      <td><img src="images/VoiceboxOn.png" width="64" height="64" alt="pause" /></td>   
      <?php } ?>          
    </tr>
    <?php } while ($row_Recordset1 = mysql_fetch_assoc($Recordset1)); ?>
</table>
</fieldset>
<input type="hidden" name="MM_update" value="form1" />
<input name="service_id" type="hidden" value="<?php echo $row_Recordset1['service_id']; ?>" />

<?php if ($row_Recordset1['sendToVoicebox'] == 0) { ?>
    <input name="update" type="hidden" value="1" /> 
<?php } else { ?>
    <input name="update" type="hidden" value="0" /> 
<?php } ?>          

</form> 
```

如何在我的函数中捕获 id？

```
if ((isset($_POST["MM_update"])) && ($_POST["MM_update"] == "form1")) {
  $updateSQL = sprintf("UPDATE acdbasis SET userfield_2=%s WHERE service_id=%s",
                       GetSQLValueString($_POST['update'], "text"),
                       GetSQLValueString($_REQUEST['submit'], "int")); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T03:09:01.357

你可以使用数组

```
<?php if ($row_Recordset1['sendToVoicebox'] == 0) { ?>
<td><input type="submit" name="button[<?php echo $row_Recordset1['service_id']; ?>]" id="btnOn" value="Voicebox ein" /></td>
<?php } else { ?>
<td><input type="submit" name="button[<?php echo $row_Recordset1['service_id']; ?>]" id="btnOn" value="Voicebox aus" /></td>
<?php } ?>

<?php
if ((isset($_POST["MM_update"])) && ($_POST["MM_update"] == "form1")) {
$service_id = array_keys($_POST["button"]);
$service_id = $service_id[0]; //older php versions don't allow direct function...)[key]
$updateSQL = sprintf("UPDATE acdbasis SET userfield_2=%s WHERE service_id=%s",
                   GetSQLValueString($_POST['update'], "text"),
                   GetSQLValueString($service_id, "int")); 
```

虽然它不是非常优雅的解决方案，但我仍然认为它比遍历 $_POST 并检查键是否为数字要好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T03:14:17.990

如何使用 PHP`$_GET`数组功能：

```
 <?php if ($row_Recordset1['sendToVoicebox'] == 0) { ?>
    <td><input type="submit" name="service_id[<?php echo $row_Recordset1['service_id']; ?>]" id="btnOn" value="Voicebox ein" /></td>
  <?php } else { ?>
    <td><input type="submit" name="service_id[<?php echo $row_Recordset1['service_id']; ?>]" id="btnOn" value="Voicebox aus" /></td>
  <?php } ?> 
```

表单发布页面：

```
$serviceId = $_POST['service_id'][0]; // Do the work with the service id 
```

或者，您可以使用按钮的 value 属性来传达您想要的内容吗？此外，您可以使用`<button />`标签向客户显示与提交给后端的值不同的值：

```
<button type="submit" name="service_submit_id" value="<?php echo $row_Recordset1['service_id'];?>">Text Here</button> 
```

# python - django 管理媒体文件夹在哪里？

> ID：13665968
> 
> 赞同：0
> 
> 时间：2012-12-02T02:54:06.953
> 
> 标签：python, django

我的管理员 CSS 不工作。

我试图在文件夹中找到它：`/usr/local/lib/python2.7/site-packages/django/contrib/admin`

那里没有媒体文件夹。

我正在使用 Django 1.5a。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T03:49:19.587

1.  确保您已`STATIC_ROOT`在设置中定义。
2.  定义`STATIC_URL`.
3.  使用命令从文件夹中的每个应用程序（包括）中`python manage.py collectstatic`收集每个静态文件。`contrib.admin``STATIC_ROOT`

# c# - VSIX：将工具窗口添加到 View->Other Windows

> ID：13665970
> 
> 赞同：3
> 
> 时间：2012-12-02T02:54:26.167
> 
> 标签：c#, visual-studio-2010, vsix

我在 VS 中使用 Package 类上的此属性公开了一个工具窗口：

```
 [ProvideToolWindow(typeof(MyToolWindow),
        Style = VsDockStyle.Tabbed,
        Orientation = ToolWindowOrientation.Right)] 
```

这很好用，我可以使用以下代码以编程方式打开它：

```
 private void ShowToolWindow()
  {
     //this method will show the window if it's not active or bring it to front if it's collapsed
     ToolWindowPane window = this.FindToolWindow(typeof(MyToolWindow), 0, true);
     if ((null == window) || (null == window.Frame))
     {
        throw new NotSupportedException();
     }
     IVsWindowFrame windowFrame = (IVsWindowFrame)window.Frame;
     Microsoft.VisualStudio.ErrorHandler.ThrowOnFailure(windowFrame.Show());
  } 
```

但是，当用户意外关闭窗口时，无法恢复它。我想知道其他扩展如何将它添加到工具-> 其他 Windows，例如 NuGet。我在 NuGet 源代码中找不到任何明显的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T15:24:17.183

您需要添加一个调用您的 ShowToolWindow 例程的命令。

您的包 vsct 文件的顶部将需要几个外部引用：

```
<!--This is the file that defines the IDs for all the commands exposed by VisualStudio. -->
<Extern href="stdidcmd.h"/>
<!--This header contains the command ids for the menus provided by the shell. -->
<Extern href="vsshlids.h"/> 
```

这个文件应该定义一些符号：

```
<Symbols>
    <!-- Use your package guid. -->
    <GuidSymbol name="guidPackage" value="{00000000-0000-0000-0000-000000000000}" />

    <!-- Use a new GUID to uniquely identify your package commands -->
    <GuidSymbol name="guidCmdSet" value="{11111111-1111-1111-1111-111111111111}">
        <IDSymbol name="cmdidViewMyToolWindow" value="0x0500" />
    </GuidSymbol>
</Symbols> 
```

在`Buttons`包的 vsct 文件块中，添加如下内容：

```
<Button guid="guidCmdSet" id="cmdidViewMyToolWindow" priority="0x0100" type="Button">
    <!--IDG_VS_WNDO_OTRWNDWS0 is the first group in "View|Other Windows". See 
    C:\Program Files (x86)\Microsoft Visual Studio 2010 SDK SP1\VisualStudioIntegration\Common\Inc
    for other options. -->
    <Parent guid="guidSHLMainMenu" id="IDG_VS_WNDO_OTRWNDWS0"/>
    <CommandFlag>DynamicVisibility</CommandFlag>
    <CommandFlag>DefaultInvisible</CommandFlag>
    <Strings>
        <ButtonText>View &amp;My Tool Window</ButtonText>
    </Strings>
</Button> 
```

所有这些都应该使“查看我的工具窗口”出现在“查看”菜单的顶部。现在，当有人点击它时，您需要采取行动。

您的包应该实施`IOleCommandTarget`以处理命令可见性和启用：

```
public class MyPackage : Package, IOleCommandTarget
{
    #region IOleCommandTarget implementation

    /// <summary>
    /// The VS shell calls this function to know if a menu item should be visible and
    /// if it should be enabled/disabled.
    /// This is called only when the package is active.
    /// </summary>
    /// <param name="guidCmdGroup">Guid describing which set of commands the current command(s) belong to</param>
    /// <param name="cCmds">Number of commands for which status are being asked</param>
    /// <param name="prgCmds">Information for each command</param>
    /// <param name="pCmdText">Used to dynamically change the command text</param>
    /// <returns>HRESULT</returns>
    public int QueryStatus(ref Guid guidCmdGroup, uint cCmds, OLECMD[] prgCmds, IntPtr pCmdText)
    {
        // Filter out commands that are not defined by this package
        if ( guidCmdGroup != new Guid("{00000000-0000-0000-0000-000000000000}"))
            return (int)(Constants.OLECMDERR_E_NOTSUPPORTED);

        if ( cCmds == 0 || prgCmds == null || prgCmds.Length == 0 || cCmds != prgCmds.Length )
            return VSConstants.E_INVALIDARG;

        // Show and enable all commands.
        OLECMDF cmdf = OLECMDF.OLECMDF_SUPPORTED | OLECMDF.OLECMDF_ENABLED;
        for ( int i = 0; i < cCmds; i++ )
            prgCmds[i].cmdf = (uint)cmdf;

        return VSConstants.S_OK;
    }

    #endregion
} 
```

最后，在你的包初始化例程中，你告诉 shell 当你的命令被点击时要做什么：

```
protected override void Initialize()
{
    base.Initialize();

    // Add our command handlers (commands must exist in the .vsct file)
    OleMenuCommandService mcs = GetService(typeof(IMenuCommandService)) as OleMenuCommandService;
    if ( null != mcs )
    {
        // "View My Tool Window" command callback
        CommandID menuCommandID = new CommandID(new Guid("{11111111-1111-1111-1111-111111111111}"), (int)0x500);
        MenuCommand menuItem = new MenuCommand(ShowToolWindow, menuCommandID);
        mcs.AddCommand(menuItem);
    }
} 
```

在“真实”代码中，您可能希望在 C# 中定义一些与 vsct 中定义的符号匹配的 GUID 常量，并在整个过程中使用它们。

# grails - Grails Spring Security Plugin 用户规则问题

> ID：13665976
> 
> 赞同：0
> 
> 时间：2012-12-02T02:57:18.753
> 
> 标签：grails, spring-security

我已将 Grails Spring Security 插件添加到脚手架 Grails 2.1.1 应用程序中。我正在设置用户规则，以便只有 ROLE_ADMIN 用户可以编辑、删除、更新或创建。除了删除之外，我已经完成了这项工作。出于某种原因，我的 ROLE_USER 用户仍然可以删除。我下面的规则有什么问题吗？

```
grails.plugins.springsecurity.securityConfigType = SecurityConfigType.InterceptUrlMap
grails.plugins.springsecurity.interceptUrlMap = [
'/person/update/*':     ['ROLE_ADMIN', 'IS_AUTHENTICATED_REMEMBERED'],
'/person/edit/*':       ['ROLE_ADMIN', 'IS_AUTHENTICATED_REMEMBERED'],
'/person/delete':       ['ROLE_ADMIN', 'IS_AUTHENTICATED_REMEMBERED'],
'/person/create':       ['ROLE_ADMIN', 'IS_AUTHENTICATED_REMEMBERED'],

'/county/update/*':     ['ROLE_ADMIN', 'IS_AUTHENTICATED_REMEMBERED'],
'/county/delete':       ['ROLE_ADMIN', 'IS_AUTHENTICATED_REMEMBERED'],
'/county/edit/*':       ['ROLE_ADMIN', 'IS_AUTHENTICATED_REMEMBERED'],
'/county/create':       ['ROLE_ADMIN', 'IS_AUTHENTICATED_REMEMBERED'],

'/course/update/*':     ['ROLE_ADMIN', 'IS_AUTHENTICATED_REMEMBERED'],
'/course/delete':       ['ROLE_ADMIN', 'IS_AUTHENTICATED_REMEMBERED'],
'/course/edit/*':       ['ROLE_ADMIN', 'IS_AUTHENTICATED_REMEMBERED'],
'/course/create':       ['ROLE_ADMIN', 'IS_AUTHENTICATED_REMEMBERED'],

'/':                    ['IS_AUTHENTICATED_REMEMBERED'],
'/**':                  ['IS_AUTHENTICATED_ANONYMOUSLY'] 
```

]

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T03:21:00.810

我在文档中谈到这一点 - 请参阅[http://grails-plugins.github.com/grails-spring-security-core/docs/manual/guide/5%20Configuring%20Request%20Mappings%20to%20Secure](http://grails-plugins.github.com/grails-spring-security-core/docs/manual/guide/5%20Configuring%20Request%20Mappings%20to%20Secure%20URLs.html)`actionSubmit`处的警告[%20URLs.html](http://grails-plugins.github.com/grails-spring-security-core/docs/manual/guide/5%20Configuring%20Request%20Mappings%20to%20Secure%20URLs.html)

当您看到`actionSubmit`标签发布到索引操作时，Grails 会根据隐藏的输入确定要转发到哪个操作，但这对于 Spring Security 来说为时已晚。

解决方法是使用两种形式，而不是使用`actionSubmit`.

# javascript - 移动件的位置

> ID：13665978
> 
> 赞同：1
> 
> 时间：2012-12-02T02:57:26.030
> 
> 标签：javascript, jquery, html

我正在创建一个跳棋变体游戏。我是 jquery 的新手，但通过一些帮助，现在可以在棋盘上移动。

有没有办法指示移动的开始位置和结束位置？

一旦移动，我还想禁用所有棋子移动。

当前代码：

```
$('img').draggable();
$('#tbl td').droppable({
hoverClass: 'over',
drop: function(event, ui) {
    var cell = ui.draggable.appendTo($(this)).css({
        'left': '0',
        'top': '0'
    });
    var row = cell.closest('tr').prevAll().length + 1;
    var col = cell.closest('td').prevAll().length + 1;
    $('#coords').html('Row ' + row + ', Col ' + col);
  }
}); 
```

jsfiddle [http://jsfiddle.net/blueberrymuffin/bLb3H/](http://jsfiddle.net/blueberrymuffin/bLb3H/)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T03:36:02.773

```
$('img').draggable({
    start: function(e, ui) {
        alert('Starting move from position (' + ui.position.top + ', ' + ui.position.left + ')');
    },
    stop: function(e, ui) {
        alert('Ending move at position (' + ui.position.top + ', ' + ui.position.left + ')');
    }
});
$('#tbl td').droppable({
    hoverClass: 'over',
    drop: function(event, ui) {
        var cell = ui.draggable.appendTo($(this)).css({
            'left': '0',
            'top': '0'
        });
        var row = cell.closest('tr').prevAll().length + 1;
        var col = cell.closest('td').prevAll().length + 1;
        $('#coords').html('Row ' + row + ', Col ' + col);
        $('img').draggable('disable');
    }
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T07:00:28.430

我想我想通了。这是代码：

```
$('img').draggable({
start: function(e, ui) {          
var myCol = $(this).closest("td").index() + 1;
var myRow = $(this).closest("tr").index() + 1;
$('#coords').html('Row ' + myRow + ', Col ' + myCol);            
},
});
$('#tbl td').droppable({
hoverClass: 'over',
drop: function(event, ui) {
    var cell = ui.draggable.appendTo($(this)).css({
        'left': '0',
        'top': '0'
    });
    var row = cell.closest('tr').prevAll().length + 1;
    var col = cell.closest('td').prevAll().length + 1;
    $('#coords').html('Row ' + row + ', Col ' + col);
    $('img').draggable('disable');
}
}); 
```

和 jsfiddle：http: [//jsfiddle.net/bLb3H/5/](http://jsfiddle.net/bLb3H/5/)

我不知道如何用拖到它上面的新图像替换当前图像（当前两个图像占据同一个单元格）。有任何想法吗？

谢谢。

# actionscript-3 - 为什么我的按钮实例忘记了它的文本字段文本和事件侦听器？

> ID：13665981
> 
> 赞同：-2
> 
> 时间：2012-12-02T02:57:59.097
> 
> 标签：actionscript-3, flash, oop, flash-builder, flash-cs5

我正在处理明天午夜到期的任务，我正要扯掉我的头发。我对 ActionScript 和 Flash Builder 还很陌生，所以这可能是一个很容易解决的问题。我想我知道它是什么，但我不确定...

我正在开发一个天气应用程序。我在 Flash CS5 中设计了 GUI。接口有 2 帧。第一帧是菜单，它有一个邮政编码输入和一个名为“提交”的按钮实例。在第二帧，它有另一个名为“change”的按钮实例，它将带您回到第一帧菜单。

在 Flash Builder 4 中，我编写了一个类来扩展名为 Application 的 GUI。当 Main.as 实例化它时，构造函数运行。然而，这是我的第一个问题。

```
public class Application extends InputBase {
    public function Application() {
        super();

        // Y U NO WORK???
        this.gotoAndStop(1);
        this.change.tfLabel.text = "Change";
    }
} 
```

当我运行调试时，它抛出了 #1009 错误，说它无法访问未定义对象的属性或方法。它在 Flash CS5 的第 2 帧上定义。我认为这是问题所在...... ActionScript 不是基于框架的编程语言吗？就像，您不能在第 1 帧上访问第 2 帧的代码？但是，我对此感到困惑，因为我没有在时间线上编码？

无论如何，我想到了一个解决方案。它有点工作，但它丑陋。

```
public class Application extends InputBase {
    public function Application() {
        super();

        // Y U NO WORK???
        this.gotoAndStop(1); // when app is first ran, it will stop on the first frame which is the menu frame
        setButton(this.submit, "Submit", 1);
        setInput(this.tfZipCode);
    }

    private function submitZip(e:MouseEvent):void {
        this.nextFrame();
        setButton(this.change, "Change", 2);
    }

    private function menu(e:MouseEvent):void {
        this.prevFrame();
        setButton(this.submit, "Submit", 1); // if I comment this out, the submit button will return to the default text label and it forgets it event.
    }

    private function setButton(button:ButtonBase, string:String="", action:uint=0):void {
        button.buttonMode = true;
        button.mouseChildren = false;
        button.tfLabel.selectable = false;
        button.tfLabel.text = string;

        switch (action) {
            case 1:
                button.addEventListener(MouseEvent.CLICK, submitZip);
                break;
            case 2:
                button.addEventListener(MouseEvent.CLICK, menu);
                break;
            default:
                trace("Action code was invalid or not specified.");
        }
    }
} 
```

每次单击按钮实例之一时运行设置按钮功能不是我的一杯茶。这是由框架或我可能正在查看的其他东西引起的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T07:50:25.950

我相信您有两个关键帧，并且都有一个名为**button**的按钮组件实例。

如果您正在处理时间线，请尝试将按钮放在单独的图层中，只有一个关键帧。

类似于以下内容：

![在此处输入图像描述](../Images/81b932bee3ee697cce663a781f991808.png)

确保您每次都引用相同的**按钮，而不是在每一帧上产生新的按钮。**

# objective-c - 子类化 NSStream

> ID：13665983
> 
> 赞同：1
> 
> 时间：2012-12-02T02:58:19.873
> 
> 标签：objective-c, ios, cocoa-touch

我正在尝试继承 NSInputStream 和 NSOutputStream 以跟踪我传递给服务器的命令。这样，当我收到来自服务器的响应时，我知道它是对哪个命令的响应。当我尝试在子类中设置命令字符串时，出现无法识别的选择器错误。

子类：

PCFInputStream.h

```
#import <Foundation/Foundation.h>

@interface PCFInputStream : NSInputStream
@property (nonatomic, strong) NSString *command;
@end 
```

PCFOutputStream.h

```
#import <Foundation/Foundation.h>

@interface PCFOutputStream : NSOutputStream
@property (nonatomic, strong) NSString *command;
@end 
```

.m 文件只是合成了命令属性，因此我可以调用 setCommand：

这是我在其中使用这些的课程：

```
 //instance vars in my class
 PCFInputStream *inputStream;
 PCFOutputStream *outputStream;

-(void)followClass:(id)sender
{
    CFReadStreamRef readStream;
    CFWriteStreamRef writeStream;
    CFStreamCreatePairWithSocketToHost(NULL, (CFStringRef) SERVER_ADDRESS, PORT,     &readStream, &writeStream);
    inputStream = (__bridge_transfer PCFInputStream *)readStream;
    outputStream = (__bridge_transfer PCFOutputStream *)writeStream;
    [inputStream setDelegate:self];
    [outputStream setDelegate:self];
    [inputStream scheduleInRunLoop:[NSRunLoop mainRunLoop] forMode:NSDefaultRunLoopMode];
    [outputStream scheduleInRunLoop:[NSRunLoop mainRunLoop] forMode:NSDefaultRunLoopMode];
    [inputStream setCommand:[NSString stringWithFormat:@"%d,%@",[sender tag], [class classTitle]]];
    [inputStream open];
    NSString *str = [NSString stringWithFormat:@"_ADD_CLASS*%@*%@*%@*%@;", [class CRN], deviceToken, [class classLink],[class courseNumber]];
    [outputStream setCommand:str];
    [outputStream open];
} 
```

这是我在运行该行时遇到的错误

```
[inputStream setCommand:[NSString stringWithFormat:@"%d,%@",[sender tag], [class classTitle]]];

-[__NSCFInputStream setCommand:]: unrecognized selector sent to instance 0x1e691170
2012-12-01 21:56:20.777 PCF[15610:907] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFInputStream setCommand:]: unrecognized selector sent to instance 0x1e691170'
*** First throw call stack:
(0x3a1b73e7 0x39043963 0x3a1baf31 0x3a1b964d 0x3a111208 0xfa267 0x39585047 0x39584ffb 0x39584fd5 0x3958488b 0x39584d79 0x394a3441 0x3a18c941 0x3a18ac39 0x3a18af93 0x3a0fe23d 0x3a0fe0c9 0x3743733b 0x394ee291 0x100005 0xe7d48)
libc++abi.dylib: terminate called throwing an exception 
```

有人可以为我建议一个简单的解决方案吗？我尝试将 NSStreamInput 实例和我的 NSString* 命令包装到另一个类中，但这对我的目的不起作用。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T03:57:48.450

您不能只将 an`NSInputStream`转换为`PCFInputStream`. 该对象必须创建为 a `PCFInputStream`，并且`CFStreamCReatePairWithSocketToHost`不这样做。

您可以使用[关联对象](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/chapters/ocAssociativeReferences.html)`command`将属性附加到类别中。分类界面如下：`NSInputStream`

```
@interface NSInputStream (PCFCommand)
@property (nonatomic) NSString *pcf_command;
@end 
```

你像这样实现它：

```
#import <objc/runtime.h>

@implementation NSInputStream (PCFCommand)

static int kPCFCommandKey;

- (NSString *)pcf_command {
    return objc_getAssociatedObject(self, &kPCFCommandKey);
}

- (void)setPcf_command:(NSString *)pcf_command {
    objc_setAssociatedObject(self, &kPCFCommandKey, [pcf_command copy],
        OBJC_ASSOCIATION_RETAIN_NONATOMIC);
}

@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T03:07:02.123

`CFStreamCreatePairWithSocketToHost`创建一个`CFWriteStream`和一个`CFReadStream`。这些是免费的，分别与`NSOutputStream`和桥接`NSInputStream`。所以你得到的是一个`NSOutputStream`和一个`NSInputStream`。无论您是否声明了这些子类都没有区别；这些是`CFStreamCreatePairWithSocketToHost`创建的类。

如果您出于某种原因真的不能使用包装，则需要重新实现 Core Foundation 函数来创建您的自定义子类。在实践中，我建议您只包装`NS[Output/Input]Stream`并使用`forwardingTargetForSelector:`，以便您可以在任何可以接受原始对象之一的地方提供包装器。

# django - 在 Django 中将 userpic 保存到 UserProfile 时遇到问题：“user_id”列中的空值违反了非空约束

> ID：13665988
> 
> 赞同：0
> 
> 时间：2012-12-02T02:59:03.560
> 
> 标签：django, django-models, django-forms, django-views

我正在尝试这样做，以便用户可以将头像上传到他们的 UserProfile，但我不断收到以下错误：

```
IntegrityError at /~csihar/userpic
null value in column "user_id" violates not-null constraint
DETAIL:  Failing row contains (4, null, userpics/image.jpg). 
```

...每次我尝试上传时，第一个值都会增加 1。我试图在保存之前使用用户的当前配置文件实例化表单，并从模型表单中排除不相关的字段，但它仍然无法正常工作，我不确定我忽略了什么。但是，图像确实`MEDIA_ROOT`在错误发生之前保存到我的。

模型.py：

```
from django.contrib.auth.models import User
from django.forms import ModelForm
from django_resized import ResizedImageField

class UserProfile(models.Model):
    user = models.OneToOneField(User)
    userpic = ResizedImageField(max_width=100, max_height=100, upload_to='userpics/')

class UserpicUpload(ModelForm):
    class Meta:
        model = UserProfile
        exclude = ('user','user_id') 
```

视图.py：

```
from django.shortcuts import render_to_response
from django.http import HttpResponseRedirect
from django.template import RequestContext
from items.models import User, UserProfile, UserpicUpload
from django.contrib.auth.decorators import login_required

@login_required
def userpic(request,list_owner):
    current_user = User.objects.get(pk=request.user.id)
    current_profile = current_user.get_profile()
    if request.method == 'POST':
        form = UserpicUpload(request.POST, request.FILES, instance=current_profile)
        if form.is_valid():
            newuserpic=UserProfile(userpic=request.FILES['userpic'])
            newuserpic.save()
        gohomeurl = "/~" + request.user.username
        return HttpResponseRedirect(gohomeurl)
    else:
        form = UserpicUpload()
        return render_to_response('userpic.html', {'listowner': list_owner, 'form':form}, RequestContext(request)) 
```

表格.py：

```
from django import forms

class UserpicUpload(forms.ModelForm):
    userpic  = forms.ImageField() 
```

模板（userpic.html）：

```
{% extends 'base.html' %}
{% block body %}
<form action="" method="post" enctype="multipart/form-data">{% csrf_token %}
<p>{{ form.non_field_errors }}</p>
<p>{{ form.userpic.errors }}</p>
<p>{{ form.userpic }}</p>
<p><input name="submit" value="Upload" type="submit" />
</form>
{% endblock %} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T02:29:12.937

原来我做错了，正在创建新的配置文件，而不是添加到现有的配置文件中。通过替换 views.py 中的以下行来解决问题：

```
newuserpic=UserProfile(userpic=request.FILES['userpic'])
newuserpic.save() 
```

...有了这个：

```
newuserpic=request.FILES['userpic']
current_profile.userpic=newuserpic
current_profile.save() 
```

现在我在让图片在用户主页上正确显示时遇到问题，但这是一个完全独立的问题，可能与我的 MEDIA_URL 相关 - 至少现在图片已正确保存！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T22:55:17.547

在您的 view.py 中，您有以下代码：

```
if form.is_valid():
   newuserpic=UserProfile(userpic=request.FILES['userpic'])
   newuserpic.save() 
```

但是您似乎没有将新配置文件与用户相关联，我怀疑这就是引发错误的原因。就像是

```
newuserpic.user = request.user 
```

...可能会成功。我只是通过阅读您的代码来发布这个答案，所以请温柔:)

**编辑：**如果您想编辑当前用户的*现有配置文件*而不是创建新配置文件，您应该在视图中执行以下操作：

```
if form.is_valid():
   u_profile=request.user.get_profile()
   u_profile.userpic = request.FILES['userpic']
   u_profile.save() 
```

我们首先访问用户配置文件，然后编辑 userpic 属性，最后保存。

# python - 在 Python 中，如何从 True = False 之类的笑话语句中恢复

> ID：13665989
> 
> 赞同：4
> 
> 时间：2012-12-02T02:59:24.390
> 
> 标签：python, python-2.7

我今天刚开始使用 Python 2.7 学习 Python，在这里我有一个关于全局变量 True 和 False 的问题：

看来我可以像这样覆盖 True 和 False 的值：

```
False = True
# now the value of variable False is also true.
True = False
# because the value of False is true, after this the value of True is still true.

if True(or False):
    print 'xxxx'
else:
    print 'yyyy' 
```

现在无论我们将 True 或 False 作为 if 条件，它总是打印“xxxx”。

那么如何从这种故障情况中恢复呢？我想我们可以使用类似的东西：

```
True = 1==1
False = 1!=1 
```

但这对我来说似乎有点狡猾。有没有更好的方法来做到这一点？

谢谢。

（另外，在 Python 3.3 中似乎不再允许此操作？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T03:05:22.870

它们不是这样的“全局”变量——它们是内置的……它们在`__builtin__`(no **s** ) 中可用——你可以“开玩笑”地做你想做的事。请注意，做这种事情主要是为了模拟/分析器和类似的事情......

不，你不能在 3.x 系列中这样做，因为`True`and`False`是关键字，而不是像 2.x 中的（某种）单例

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-02T03:05:13.823

从中“恢复”的方法是不要让它发生。

也就是说，您始终可以使用该`bool()`类型来访问`True`并`False`再次访问。（`bool()`总是返回两个布尔单例之一。）

例子：

```
>>> bool
<type 'bool'>
>>> bool(1)
True
>>> bool(1) is bool('true')
True
>>> True = False
>>> True
False
>>> True is False
True
>>> False is bool()
True
>>> True = bool(1)
>>> True is bool(1)
True
>>> True is False
False
>>> True is bool()
False
>>> bool()
False
>>> True is bool(2)
True
>>> True is bool('true')
True
>>> 
```

如果这是一个简单的`True = 'something'`绑定，那么会`True`在当前命名空间中创建一个新名称——`__builtins__`模块不会改变。在这种情况下，您可以简单地删除（取消绑定）名称空间中的“True”名称。然后 Python 将`__builtins__`再次使用定义的那个。

```
>>> dir()
['__builtins__', '__doc__', '__name__', '__package__']
>>> True is __builtins__.True
True
>>> True = 'redefined'
>>> __builtins__.True is True
False
>>> del True
>>> __builtins__.True is True
True 
```

这在 Python 3 中是不可能的，因为`True`and`False`不再是名称（变量）而是关键字。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-02T03:01:27.200

如果情况还*不错*，您可以设置`True = __builtins__.True`.

# ruby-on-rails - 在 rails 中使用 simple-form 时可以更改标签显示名称吗？

> ID：13665997
> 
> 赞同：13
> 
> 时间：2012-12-02T03:00:42.640
> 
> 标签：ruby-on-rails, simple-form

我在 rails 中使用 simple-form，我想知道是否有办法改变集合对象的显示方式。例如我有这样的东西

```
<%= f.input :lang, :label => "Language", :collection => [ "en", "es, "zh", "fr" ] %> 
```

而不是显示为“en es zh”等，我希望它向用户显示为“英语西班牙语”等。反正有做那种事吗？

提前致谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-02T18:28:05.010

您也可以使用以下方式：

在模型中：

```
 LANGUAGES = {'English' => 'en','French' => 'fr'} 
```

在视图中：

```
 <%= f.input :lang, :label => "Language", :collection => Model::LANGUAGES %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T05:07:15.470

我猜标签是“English”，值是“en”；你可以这样做：

将数据存储在模型中（推荐）或进行哈希：

```
@data = Language.all 
```

在视图中使用**label_method**和**value_method**：

```
<%= f.input :lang, :label => "Language", :collection => @data, :label_method => :name, :value_method => :value %> 
```

检查[https://github.com/plataformatec/simple_form](https://github.com/plataformatec/simple_form)中的**集合部分**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T16:09:33.543

另一种选择是添加一个助手

```
def languages_display
  [
    ["English", "en"],
    ["Spanish", "sn"],
    ["French", "fr"],
  ]
end 
```

然后从输入字段调用你的助手：

```
<%= f.input :state, :collection => languages_display %> 
```

然后在您的显示视图中，您可以调用以下帮助程序，以便它显示英语而不是您在数据库中的 en：

```
def show_language(language)
  {
    "en" => 'English',
    "sp" => 'Spanish',
    "fr" => 'French'
  }[language]
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-14T17:18:22.633

```
 <%= f.input :lang, label: "Language", collection: [ [ "English", "en" ], [ "Spanish", "es" ], [ "French", "fr" ] ] %> 
```

这在上面有效，使用嵌套数组。此外，它以最新的导轨和简单的形式使用。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-10-14T12:37:43.613

我的方法是将整个集合放在语言环境 yml 文件（en.yml）中：

```
#RAILSROOT/locales/en.yml
en:
  collections:
    languages: 
      - - en
        - English
      - - de
        - Deutch 
```

并在视图中只写：

```
<%= f.input :lang, :label => "Language", :collection => t("collections.languages") %> 
```

[我经常使用这个，所以我什至用扩展 I18n ( https://github.com/rstgroup/i18n-structure](https://github.com/rstgroup/i18n-structure) )的辅助函数编写了 gem，并且你可以在 gemfile 中编写 (注意 "tc" 助手)

```
<%= f.input :lang, :label => "Language", :collection => tc(:languages) %> 
```

# php - PHP将变量传递给外部搜索表单然后显示搜索结果

> ID：13665998
> 
> 赞同：0
> 
> 时间：2012-12-02T03:00:59.730
> 
> 标签：php

我有一个包含房产地址的房地产列表页面。我想向访客展示县税务局公共网站上的房产税务记录。

税收官的网站有 3 页。第一个页面有一个搜索表单，我想将我的站点中的属性地址传递给表单。然后点击“提交”后，第二个页面会显示该物业的帐号以及一个“详细信息”按钮。单击“详细信息”按钮将带我进入税收记录显示的第三页。

第三页的网址是“http://taxcollector.com/search_detail.asp?TaxYear=2012&Account=1234567”。

由于我只有地址，所以我在编码时不知道帐号是什么。如何将地址传递给“外部”搜索表单，然后显示第三页？

我不是在找人为我做这项工作，但如果有人能指出我正确的方向，我将不胜感激。我正在阅读 PHP-get，但我认为它不会完成这项工作。

更新：

我不打算将用户重定向到他必须单击详细信息按钮的第二页。我想在我的网站上有一个“查看税务记录”按钮，用户可以点击此处查看第三页，跳过第二页。对不起，我应该更清楚地说明这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T03:07:28.690

从您用于显示房屋信息的数据库或来源中，为房屋帐号制作一个额外的字段/输入，因此当用户单击“详细信息”时，所需的信息已经存在，您需要做的就是一个 html的标记`<a href="site/details.asp/TaxYear=2012&Account=$HouseAccNo">`

或您希望将用户引导至该站点的任何其他方法。

我就是这样做的，这需要更多的研究，但可以完成工作

# php - 根据选择框中选择的值在页面上发布信息

> ID：13665999
> 
> 赞同：0
> 
> 时间：2012-12-02T03:01:22.597
> 
> 标签：php

我正在创建一个广告发布页面。我已经包含了可靠的选择框作为类别选择系统。所有值都从 MySQL 数据库中提取。该表由桥接并由 category 标识的`id`（自动增量）组成。每个类别都有一个子类别。因此，用户必须在提交信息之前选择一个子类别。我目前正在寻找有关如何根据所选类别发布用户输入的信息的想法。我为每个子类别创建了一个单独的页面。所以每次提交输入时，我希望它相应地显示在页面中。例如，如果我选择 category:和 subcategory: 然后将其发布在 textbooks.php 中。[现场示例](http://webprolearner.ueuo.com/dropdown-menu/index.php)`master_id``name``Books``Textbooks`

[表结构](http://webprolearner.ueuo.com/dropdown-menu/table.php)

[下拉菜单](http://www.ssdtutorials.com/tutorials/series/dependable-dropdown.html)

```
<form action="" method="post">          

                <select name="category" id="category" size="7" class="updateCategory" >
                    <option selected="selected" value="">Select one:</option>
                    <?php if (!empty($list)) { ?>
                        <?php foreach($list as $row) { ?>
                            <option value="<?php echo $row['id']; ?>">
                                <?php echo $row['name']; ?>
                            </option>
                        <?php } ?>
                    <?php } ?>
                </select>

                <select name="subc1" id="subc1" size="7" class="updateCategory"
                    disabled="disabled" hidden="hidden" >
                    <option value="">----</option>
                </select> 

                <select name="subc2" id="subc2" size="7" class="updateCategory"
                    disabled="disabled" hidden="hidden">
                    <option value="">----</option>
                </select>

                <select name="subc3" id="subc3" size="7" class="updateCategory"
                    disabled="disabled" hidden="hidden">
                    <option value="">----</option>
                </select>

                </br>
                 Insert your name: <input type="text" name="lname"><br>
                <input type="submit" value="Submit">

    </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T03:43:58.170

这有点像在黑暗中拍摄，因为这个问题措辞含糊。

我认为，首先，您需要对数据库进行更新。您将需要创建一个新表或一个新列。我个人会选择该表，因为它提供了更大的灵活性，例如：`id`, `category_id`, `category_page`（您也可以放入其他列）。显然，`category_id`引用回到了主表类。

然后，做一个这样的选择：

```
SELECT [COLUMNS HERE] FROM category RIGHT JOIN category_page ON category_page.category_id = category.id 
```

您现在拥有所需的值。

然后，在您的 PHP 中，将 url 返回到页面（如果您使用 JS 动态显示新页面）：

```
<option value="xyz" data-url="url-for-page.php">Category Name</option> 
```