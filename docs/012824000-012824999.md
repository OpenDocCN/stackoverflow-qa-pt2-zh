# StackOverflow 问答 12824000-12824999

# tridion - SDL Tridion UI / Experience Manager - 修改启用编辑按钮

> ID：12824000
> 
> 赞同：6
> 
> 时间：2012-10-10T16:21:03.903
> 
> 标签：tridion

有没有办法围绕已发布网站左上方显示的“SDL Tridion”按钮配置一些设置？

我想去镇上它：

*   将文本从“SDL Tridion”更改为“编辑此页面”
*   更改页面中的位置，例如右下角
*   改变颜色等。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T16:59:19.023

您可以查看 Tridion CMS 的皮肤概念并将其应用于 UI Experience Manager。您可以找到 UI 主题`TRIDION_HOME\web\WebUI\Editors\SiteEdit\Themes`，并可能添加新的 CSS 来放置按钮等。

您可以创建一个新的 css 文件`MyCustom.css`，并将其放在默认的 Carbon 下。有了新的 css 文件后，您需要更新`SiteEditEditor.cfg`文件`TRIDION_HOME\web\WebUI\Editors\SiteEdit\Configuration`以添加新的主题 css 文件。在配置中查找主题文件部分。

要更改默认标签，您需要更改`Tridion.Web.UI.Editors.SiteEdit.Strings.resx`位于下的文件中的 EditorViewTitle 数据属性值`TRIDION_HOME\web\WebUI\WebRoot\App_GlobalResources`。

**注意::***请注意，更新 .resx 文件可能不受支持且未记录在案*。

我以前玩过这个，我在标签和主题方面非常成功，但没有追求，因为它不能完全满足我的需求。

对 CMS 进行蒙皮记录在：[http ://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/task_C4C14E4D601B4BE392ACE3B067426BB7](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/task_C4C14E4D601B4BE392ACE3B067426BB7)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T18:40:56.200

我没有足够的代表点来发表评论，所以我改用答案。感谢拉姆提供详细信息。我只是尝试更改 SDL Tridion 按钮标签，我必须使用`StartButtonLabel`资源名称`Tridion.Web.UI.Editors.SiteEdit.Strings.resx`才能使其工作。标签显示为浏览器页面标题，而`EditorViewTitle`不是开始按钮。

# html - 集成停靠的页脚

> ID：12824003
> 
> 赞同：2
> 
> 时间：2012-10-10T16:21:08.020
> 
> 标签：html, css

我很难做到这一点。这是我的代码：

[http://jsfiddle.net/HMsKa/30/](http://jsfiddle.net/HMsKa/30/)

当内容很少时，我正在尝试集成一个停靠的页脚。我正在使用此站点作为如何执行此操作的代码示例：

[http://ryanfait.com/sticky-footer/](http://ryanfait.com/sticky-footer/)
[http://ryanfait.com/sticky-footer/layout.css](http://ryanfait.com/sticky-footer/layout.css)

但是，无论我将这段代码放入我的站点中的含义是什么，它都不起作用。有人可以告诉我如何将其与现有代码集成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T16:25:31.227

您必须检查您的 html 结构，例如查看贴纸页脚的 html。

它必须有点如下：

HTML：

```
<body>
   <div class="wrapper">
        <!-- your content -->
        <div class="push"></div>
   </div>
   <div class="footer"></div>
</body> 
```

正如css文件所说，我将在这里重新创建它：

```
* {
    margin: 0;
}
html, body {
    height: 100%;
}
.wrapper {
    min-height: 100%;
    height: auto !important;
    height: 100%;
    margin: 0 auto -142px; /* the bottom margin is the negative value of the footer's height */
}
.footer, .push {
    height: 142px; /* .push must be the same height as .footer */
}

/*

Sticky Footer by Ryan Fait
http://ryanfait.com/

*/ 
```

对您的小提琴进行一些编辑：http: [//jsfiddle.net/HMsKa/36/](http://jsfiddle.net/HMsKa/36/)

你需要一个`.wrapper`和一个`min-height: 100%`。

# c# - MiniProfile - 如何弄清楚隐藏空间中发生了什么？

> ID：12824005
> 
> 赞同：3
> 
> 时间：2012-10-10T16:21:08.797
> 
> 标签：c#, asp.net-mvc, mvc-mini-profiler

我试图弄清楚如何使用 MiniProfile 来了解为什么某些网页运行速度如此之慢。我已经添加了它，并且添加了`Steps`around`Application_BeginRequest`和`Application_EndRequest`around 我的 Controllers 操作（在下图中是 CanManageOrganization 和 GenerateTreeDataSource）。但正如您在下面看到的，这两种方法运行速度相对较快。在那之后有一个很大的差距，直到`GetVaryByCustomString`被调用。我将如何尝试弄清楚发生了什么（时间花在了哪里）？

我的理解是，实际的渲染引擎会在该部分发生什么？我在这里不正确吗？关于如何弄清楚中间时间花在做什么的任何建议？

![配置文件结果](../Images/220c98d46c2e24a02f0ca1432ed525ba.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T16:41:23.330

I would recommend you to install the `MiniProfiler.MVC3` NuGet which will give you more specific details about MVC. Yoju will see time spent for finding and rendering views as well.

Here's a sample of what you might see:

![enter image description here](../Images/77ee4b75d6d1dbd788f90bf420c2fe57.png)

Remark: with the latest version of the NuGet if you are hosting your application in IIS7 Integrated pipeline mode or IIS Express locally you might need to add the following handler to the `<system.webServer>` section:

```
<handlers>
    <add name="MiniProfiler" path="mini-profiler-resources/*" verb="*" type="System.Web.Routing.UrlRoutingModule" resourceType="Unspecified" preCondition="integratedMode" />
</handlers> 
```

# jquery - 带有参数的jQuery查找

> ID：12824010
> 
> 赞同：0
> 
> 时间：2012-10-10T16:21:22.990
> 
> 标签：jquery

我在写这个：

```
var SomeClass = "MyClass";
$('#SomeID').find(SomeClass).each(function () { .... }); 
```

出于某种原因，当我进入 .each 循环时，它没有返回任何元素。

我认为`.find`可以使用字符串作为参数，但事实并非如此。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-10T16:21:57.047

您忘记添加“。” 在班上。修改后的代码：-

```
var SomeClass = ".MyClass";
$('#SomeID').find(SomeClass).each(function () { .... }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T16:27:06.827

只需将类添加到选择器：

```
var SomeClass = "MyClass";
$('#SomeID.'+SomeClass+'').each(function () { .... }); 
```

# javascript - TinyMCE：禁用 html 编辑按钮

> ID：12824012
> 
> 赞同：4
> 
> 时间：2012-10-10T16:21:43.647
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3, tinymce

TinyMCE 有没有办法禁用“编辑 html”按钮？我对[配置选项](http://www.tinymce.com/wiki.php/Configuration)感到不知所措，似乎找不到它。我注意到用户可以使用它在我不想要的字段中放置 javascript。顺便说一句，我正在使用这个 gem - [https://github.com/sophlenz/tinymce-rails](https://github.com/spohlenz/tinymce-rails)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T16:25:14.900

`theme_advanced_disable: "code"`在初始化 tinymce 对象时使用。

编辑 - 没有看到你使用的是 rails 版本，抱歉。这将删除纯 javascript 中的按钮。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T16:25:14.690

你可以试试：

```
HtmlEditorConfig::get('cms')->removeButtons('advcode'); 
```

或者

```
theme_advanced_disable: "code" 
```

我在这里做了一个小提琴：http: [//fiddle.tinymce.com/cmcaab](http://fiddle.tinymce.com/cmcaab)

如果您试图通过 gem 设置它而不是仅仅编写 javascript，您只需要编辑`config/tinymce.yml`文件。所以`yml`文件应该有一行说

```
theme_advanced_disable: code 
```

或者（来自那个 gem 的自述文件）

> 可以将自定义选项传递给 tinymce 以覆盖 config/tinymce.yml 中指定的全局选项：

所以我认为你可以`:theme_advanced_disable => ["code"]`在调用 timeMCE 时添加一个（虽然我不是 100% 确定这是正确的语法）：

```
<%= tinymce :theme => "simple", :theme_advanced_disable => ["code"], :plugins => ["inlinepopups", "paste"] %> 
```

[您可以在此处](http://archive.ssbits.com/customising-the-wysywig-editor-in-v2-3-2-tinymce/)阅读有关此内容的更多信息：

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T16:27:13.940

你的意思是“编辑html源”按钮吗？你不能把它放在工具栏中，在`theme_advanced_buttons`选项下你所要做的就是省略它。

该按钮被称为`code`

# android - Google Play - 我的应用程序无法在多 APK 支持下执行（可以安装但无法执行）

> ID：12824013
> 
> 赞同：-1
> 
> 时间：2012-10-10T16:21:48.763
> 
> 标签：android, google-play, android-market-filtering

我对 Google Play 过滤有一个非常烦人的问题。我有一个针对 Android 设备的应用程序，我用另一个 APK 制作了另一个项目来针对桌面设备。

手机版大约在 1 年前上市。当我将新的 apk 添加到应用程序时，它可以正常工作：我有两个活动的 APK 文件，其中一个针对手机，另一个针对平板电脑。

但突然我意识到没有一个 APK 工作。我的应用程序在 Play 商店中列出，我什至可以下载它。但是一旦安装完成，我没有“运行”或“开始”按钮，我只有一个“卸载”按钮。而且即使应用程序已安装，它也不会显示在其他已安装的应用程序下，无处可去。

从我试图还原这些东西开始，我从旧的、以前的工作版本创建了一个新版本，并用这个以前工作的版本替换了 2 个 APK。

等待几个小时后，手机重新启动，Play 商店缓存清除，即使使用还原的 APK，我也遇到了同样的问题。

这是我的 Android 清单文件（可以正常工作，但现在无法正常工作 - 单个 APK 版本）：

```
<uses-sdk android:minSdkVersion="7" android:targetSdkVersion="8" android:maxSdkVersion="15">
</uses-sdk>

<supports-screens android:resizeable="true"
                  android:smallScreens="true"
                  android:normalScreens="true"
                  android:largeScreens="true"
                  android:xlargeScreens="false"
                  android:anyDensity="true">
</supports-screens> 
```

这是我的平板电脑版本的 Android 清单文件（可以正常工作，但现在无法正常工作 - 单 APK 版本）：

```
<uses-sdk android:minSdkVersion="9" android:targetSdkVersion="15" android:maxSdkVersion="16">
</uses-sdk>

<compatible-screens>

    <!-- all xlarge size screens -->
    <screen android:screenSize="xlarge" android:screenDensity="ldpi"/>
    <screen android:screenSize="xlarge" android:screenDensity="mdpi"/>
    <screen android:screenSize="xlarge" android:screenDensity="hdpi"/>
    <screen android:screenSize="xlarge" android:screenDensity="xhdpi"/>

    <!-- Special case for Nexus 7 -->
    <screen android:screenSize="large" android:screenDensity="213"/>

</compatible-screens> 
```

我知道在第一个 APK 中我使用了 support-screen 标签，而在另一个中使用了 compatible-screens （可能这就是原因），但我仍然不知道如何修复它。

已经尝试过的工作流程是：

*   单个 APK，清单仅使用 support-screens 标签。不工作
*   单个 APK，带有仅使用兼容屏幕标签的 android 清单。不工作
*   上述组合的混合。不工作

现在我真的不想回到以前的情况，没有平板电脑支持等。

请帮忙！:) 因为我用这个做了一个自我卸载的情况......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T09:52:11.280

问题已解决，与 Google Play Store 的多 apk 支持无关。

问题出在我的清单文件中。在 innapropiate 中配置的主要活动是这样的：

```
<activity
    android:name=".GUI.ActivityWelcomeScreen" 
    android:label="@string/app_name"
    android:configChanges="keyboard|keyboardHidden|orientation">
        <action android:name="android.intent.action.MAIN"/>
        <category android:name="android.intent.category.LAUNCHER"/>
</activity> 
```

正如我们所见，没有指定意图过滤器标签。如下修改我的清单后：

```
<activity
    android:name=".GUI.ActivityWelcomeScreen" 
    android:label="@string/app_name"
    android:configChanges="keyboard|keyboardHidden|orientation">
    <intent-filter>
            <action android:name="android.intent.action.MAIN"/>
            <category android:name="android.intent.category.LAUNCHER"/>
    </intent-filter>
 </activity> 
```

一切正常。

# google-visualization - ReferenceError：未定义谷歌 - GoogleChart

> ID：12824018
> 
> 赞同：1
> 
> 时间：2012-10-10T16:22:06.517
> 
> 标签：google-visualization, referenceerror

使用 Ajax 加载 googlechart 时出现以下错误 - 当我正常运行时它没问题 - 这是完整的错误：

```
ReferenceError: google is not defined   
google.load("visualization3", "1", ({packages:["corechart"]})); 
```

这就是我加载文件的方式：

```
<script type="text/javascript">
    $('#sim_search').html('<div style="width:100%; margin-top:50px; text-align:center;">Finding your data now...<br /><br /><img src="/images_/icons/ajax-loader.gif" /></div>');
    $('#sim_search').load('/pages/includes/stats.php', {});
</script> 
```

和正在加载的文件的顶部：

```
<!DOCTYPE html>
<html lang="en" class="en">
<head>
<link href="/css/style.css" rel="stylesheet" type="text/css" />

<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript">
  google.load('visualization', '1', {packages: ['corechart']});
  google.load('visualization3', '1', {packages: ['corechart']});
</script>

</head>
<body> 
```

如果我只是包含文件而不是 ajax 没关系，但我需要加载器图像，因为它可能需要一段时间。

有任何想法吗？我已经尝试使用 http 而不是 https 来加载 Google API，但仍然是同样的错误。

# html - 身体下方的空白空间和奇怪的 div 放置

> ID：12824021
> 
> 赞同：3
> 
> 时间：2012-10-10T16:22:13.410
> 
> 标签：html, css

我正在为朋友网站制作网页。你可以在这里找到它 ：

[http://labrostest.byethost8.com/](http://labrostest.byethost8.com/)

我的问题如下：

1.  我的身体 div 下方有一个巨大的白色空白区域，而且部门名称 lower_body 也没有明显的原因（至少对我的眼睛而言：P）

2.  使用 chrome 时，下部页面中的图库部分未正确定位 - 意味着只是在 youtube 视频和显示日期下方（我在 Firefox 显示器上没有同样的问题）。

有人可以伸出援助之手。

你需要我发布我的css和html代码吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T16:30:55.337

在您的样式表中有一个名为 lower_content 的选择器。请找到这个类并用这个块替换你的块。由于使用了此处使用的不必要的底部空间，因此出现了空白。

```
.lower_content {
width: 800px;
margin-left: auto;
margin-right: auto;
position: relative;
bottom: 80px;
right: 30px;
z-index: 2;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T16:35:59.117

您使用相对定位来重叠元素。这会改变元素的显示位置，但它仍会占用没有相对位移的地方。这就解释了为什么页面底部有一个大的空白区域。而是使用一个`position:relative`没有位移的容器，并使用其中的元素`position:absolute`来覆盖它们。

和元素不够大，无法容纳该`lower_content`元素，因此它突出在它们下方。这可能是导致body元素下方额外空白的原因，即相对位移之前的原始位置将在body元素之外。`gallery``gallery_text`

* * *

还：

你有`margin:0`body 元素，但你也应该有`padding:0`一些浏览器（即 Opera）使用 padding 作为 body 的默认填充而不是 margin。

在 body 元素中有一个 style 元素，应该在 head 元素中。这不太可能导致任何问题，但是根据标准将其放在应有的位置会更安全。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T16:27:17.917

检查你的`bottom`身高，它们离你很远，就像`.lower_content`到底部有 680 像素一样，太大了。取而代之的是使用较小的边距底部，并确保在浮动后清除它们

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T16:29:04.640

你需要复习你的CSS。您的底部空白是与正文相关的边距问题，至于您的画廊，您说过，它的位置不正确，因此您有一个跨浏览器兼容性问题，这可能就像添加浏览器特定的 css 标签一样简单，或者只需在图库部分重新调整您的边距/填充。

# drupal - Drupal 7：用户注册页面的模板？

> ID：12824027
> 
> 赞同：3
> 
> 时间：2012-10-10T16:22:45.960
> 
> 标签：drupal, drupal-7, drupal-theming, drupal-templates

如何为用户注册页面制作模板？我想为整个页面设置主题，而不仅仅是表单。我试过`page--user-register.tpl.php`了，但这不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-15T16:43:11.787

您想使用`page--user--register.tpl.php`而不是`page--user-register.tpl.php`.

`page--user-register.tpl.php`更改页面的模板`user-register`，同时`page--user--register.tpl.php`更改页面的模板`user/register`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T20:05:01.853

开箱即用的 Drupal 不为注册表单提供任何模板建议。您需要编写一个自定义模块来添加它。你可以这样做：

```
/**
 * Implements hook_theme().
 */
function mymodule_theme() {
  $items = array(
    'user_register_form' => array(
      'render element' => 'form',
      'template' => 'templates/user-register-form',
    ),
  );
  return $items;
} 
```

然后你会在 mymodule/templates 中有一个名为 user-register-form.tpl.php 的模板，你可以在你的主题中自定义或覆盖它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-10T18:06:13.830

我推荐使用[主题开发者模块](http://drupal.org/project/devel_themer)

它将向您显示任何给定页面的所有模板建议，以及如何称呼它们。还要确保您正在清除缓存。

这[也是一个很好的资源](http://drupal.org/node/1089656)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-27T04:22:36.840

德鲁巴 7

将此代码添加到主题目录中的 template.php 中。

```
 function yourtheme_theme() {
      return array(
        'user_login' => array(
          'template' => 'user-login',
          'arguments' => array('form' => NULL),
        ),
      );
    }

    function yourtheme_theme() {
      $items = array();
      $items['user_login'] = array(
        'render element' => 'form',
        'path' => drupal_get_path('theme', 'yourtheme') . '/templates',
        'template' => 'user-login',
        'preprocess functions' => array(
           'yourtheme_preprocess_user_login'
        ),
      );
      return $items;
    }

    function yourtheme_preprocess_user_login(&$vars) {
      $vars['intro_text'] = t('This is my awesome login form');
    } 
```

在主题的“模板”文件夹中创建一个名为 user-login.tpl.php 的文件。

添加此代码并将“yourtheme”更改为您的主题名称。

```
 <?php print drupal_render_children($form) ?> 
```

清除缓存。

来源（您可以在其中找到有关如何为 user-register-form、user-password-form 和 Drupal 6 执行此操作的详细信息） [https://drupal.org/node/350634](https://drupal.org/node/350634)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-16T10:59:56.700

另一种方法是使用“面板”创建客户注册页面：

1.  安装和启用面板模块
2.  创建新页面“注册页面”并设计布局
3.  将内容添加到您的区域。对于您的情况，“注册块”或“登录块”

# php - 我可以让我的用户从他们的 Instagram 帐户中选择一张照片上传到我的网站吗？

> ID：12824029
> 
> 赞同：1
> 
> 时间：2012-10-10T16:22:52.553
> 
> 标签：php, api, instagram

我正在创建一个网站，该网站将接收用户选择的照片并将其放在我的网站上进行处理。Instagram API 可以这样使用吗？如果可能的话，有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T19:37:17.553

是的，你可以这样做。查看：[Instagram 文档](http://instagram.com/developer/)

本质上，您将设置 OAuth 以让用户登录，然后您可以从那里允许他们选择图片并保存图片 URL，以便您可以检索并使用它们来做任何事情。

# c - 需要帮助 C 编程中的退出语句

> ID：12824033
> 
> 赞同：-1
> 
> 时间：2012-10-10T16:23:20.523
> 
> 标签：c, exit

这是我的代码。它让用户输入数字，然后将其输出为 32 位二进制数。我面临的问题是我需要找到一种方法，以便在输入后一直询问您的数字，直到输入“9999”结束程序（而不是“按任意键继续”）

```
#include "stdafx.h"
void db(unsigned int value);
int main(void)
{
    unsigned int x;//
    printf("%s", "Enter in number:"); 
    scanf_s("%d", &x);//%u=unsinged number,, pointer
    db(x);
}//end of main

void db(unsigned int value)
{
   .........................
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T16:27:58.997

您需要在 中添加一个循环`main`，如下所示：

```
for (;;) {
    unsigned int x;// You may need to move this declaration to outside the loop
    printf("%s", "Enter in your student number:"); 
    scanf_s("%d", &x);//%u=unsinged number,, pointer
    if (x == 9999) break;
    displayBits(x);
} 
```

由于继续或停止的决定是在循环体的中间做出的，因此首选使用“永远”循环。有多种方法可以实现这一点，但由于这`for (;;)`是 K&R 中描述的一种，我建议使用它而不是其他替代方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T16:29:11.477

利用：

```
int main(void)
{
    unsigned int x;

    while (1)
    {
        printf("%s", "Enter in your student number:"); 
        scanf_s("%d", &x);
        if (x == 9999) break;
        else displayBits(x);
    }
    return 0;
} 
```

此外，`puts("\n");`打印 2 个新行，因为它无论如何都会打印一个换行符。要仅打印一个新行，请使用`puts("");`

# ruby - 如何在外部生产环境中调用 delay_job_active_record (rake jobs:work)

> ID：12824037
> 
> 赞同：1
> 
> 时间：2012-10-10T16:23:46.410
> 
> 标签：ruby, ruby-on-rails-3, delayed-job, production-environment

我有一个延迟的工作，每当用户发布歌曲时都会调用它，这个工作会向用户的 Facebook 墙发送一个活动帖子。这是作业的代码并在控制器中调用它。

我正在使用[Ryan Bates Facebook Open Graph Railscast](http://railscasts.com/episodes/363-facebook-open-graph)`'delayed_job_active_record'`中看到的 gem

用户.rb

```
def self.post_song(user_id, song_url)
    user = User.find(user_id)
    user.facebook.put_connections("me", "virtual_piano:post", song: song_url)
  end 
```

post_controller.rb

```
(upon successful save)
        User.delay.post_song(current_user.id, post_url(@post)) 
```

此作业在标准的开发模式下运行`rake jobs:work`。

我见过一些人使用`RAILS_ENV=production script/delayed_job start`延迟作业我如何在生产中调用此方法并使其在后台运行？

非常感谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T16:39:17.333

`rake jobs:work`delay_job 就像`rails s`rails 的命令 - 它在执行命令的控制台（shell）的主进程中运行。这意味着当包含它的控制台（shell）停止运行（即您注销）时它停止运行。

您将希望改为运行`RAILS_ENV=production script/delayed_job start`- 启动 delay_job 队列作为守护进程（后台进程），就像`rails s -n`rails 一样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T16:39:40.973

该脚本执行以下操作：

```
require 'delayed/command'
Delayed::Command.new(ARGV).daemonize 
```

这将在后台运行delayed_job。

如果您想在前台运行，您可以创建一个简单的脚本，该脚本将具有：

```
worker = Delayed::Worker.new({}) # or add options
worker.start 
```

# mysql - 对多个 COUNT 求和的 UNION 语法

> ID：12824040
> 
> 赞同：1
> 
> 时间：2012-10-10T16:23:54.150
> 
> 标签：mysql, count, sum, union

这些查询单独工作。如何将 UNION 写入 SUM 所有结果？

```
SELECT SUM(players) FROM `tournament_players` FROM (
SELECT COUNT(*) as `players` FROM `tournament_players` WHERE `foursome_1_p1_name` IS NOT NULL AND `tournament` BETWEEN 13 AND 17 AND flight = '8 AM'
UNION
SELECT COUNT(*) as `players` FROM `tournament_players` WHERE `foursome_1_p2_name` IS NOT NULL AND `tournament` BETWEEN 13 AND 17 AND flight = '8 AM'
UNION
SELECT COUNT(*) as `players` FROM `tournament_players` WHERE `foursome_1_p3_name` IS NOT NULL AND `tournament` BETWEEN 13 AND 17 AND flight = '8 AM'
UNION
SELECT COUNT(*) as `players` FROM `tournament_players` WHERE `foursome_1_p4_name` IS NOT NULL AND `tournament` BETWEEN 13 AND 17 AND flight = '8 AM'
) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T16:29:20.210

您走在正确的轨道上，但有一个额外的`FROM`关键字。尝试这个：

```
SELECT SUM(players) FROM (
SELECT COUNT(*) as `players` FROM `tournament_players` WHERE `foursome_1_p1_name` IS NOT NULL AND `tournament` BETWEEN 13 AND 17 AND flight = '8 AM'
UNION
SELECT COUNT(*) as `players` FROM `tournament_players` WHERE `foursome_1_p2_name` IS NOT NULL AND `tournament` BETWEEN 13 AND 17 AND flight = '8 AM'
UNION
SELECT COUNT(*) as `players` FROM `tournament_players` WHERE `foursome_1_p3_name` IS NOT NULL AND `tournament` BETWEEN 13 AND 17 AND flight = '8 AM'
UNION
SELECT COUNT(*) as `players` FROM `tournament_players` WHERE `foursome_1_p4_name` IS NOT NULL AND `tournament` BETWEEN 13 AND 17 AND flight = '8 AM'
) `tournament players` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T16:27:41.473

听起来您只是想要这个，将您的个人查询放在子查询中以获得`sum()`：

```
SELECT SUM(players) 
FROM 
(
    SELECT COUNT(*) as `players` 
    FROM `tournament_players` 
    WHERE `foursome_1_p1_name` IS NOT NULL 
        AND `tournament` BETWEEN 13 AND 17 
        AND flight = '8 AM'
    UNION
    SELECT COUNT(*) as `players` 
    FROM `tournament_players` 
    WHERE `foursome_1_p2_name` IS NOT NULL 
        AND `tournament` BETWEEN 13 AND 17 
        AND flight = '8 AM'
    UNION
    SELECT COUNT(*) as `players` 
    FROM `tournament_players` 
    WHERE `foursome_1_p3_name` IS NOT NULL 
        AND `tournament` BETWEEN 13 AND 17 
        AND flight = '8 AM'
    UNION
    SELECT COUNT(*) as `players` 
    FROM `tournament_players` 
    WHERE `foursome_1_p4_name` IS NOT NULL 
        AND `tournament` BETWEEN 13 AND 17 
        AND flight = '8 AM'
) x -- place your alias here 
```

# android - 滚动后无法单击 ListView 的项目

> ID：12824042
> 
> 赞同：0
> 
> 时间：2012-10-10T16:23:58.533
> 
> 标签：android, listview, onclick, click, adapter

我有一个 ListView，其中每一行都实时更新。在 ListView 中下载文件时，您可以看到每个文件的下载进度（几个文件，这就是 ListView 的原因）。并且可以点击ListView的项目，根据下载进度做一些事情。

我使用`.notifyDataSetChanged();`适配器的方法来设置动态数据。一切都很好，但是滚动 ListView 后，我无法单击任何项​​目。如果我不滚动，我可以点击我看到的项目而无需滚动。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T18:24:25.000

试试这个 - 可能你的列表项点击被拦截（假设 onitemclick 监听器）

```
listView.setOnScrollListener(new OnScrollListener() {
        public void onScrollStateChanged(AbsListView view, int scrollState) {
            if ( scrollState == OnScrollListener.SCROLL_STATE_IDLE )
            {
              listView.invalidateViews();
            }

        }

        @Override
        public void onScroll(AbsListView arg0, int arg1, int arg2, int arg3) {}
    }); 
```

如果这不起作用，请发布更多代码，以便我们了解您的要求

# javascript - 从扩展程序确定 Internet Explorer 是否处于隐私浏览模式

> ID：12824043
> 
> 赞同：1
> 
> 时间：2012-10-10T16:24:05.417
> 
> 标签：javascript, internet-explorer, trigger.io, ieaddon, forge

是否可以使用 Forge Trigger.IO 的框架从扩展中检测 Internet Explorer 上的隐私浏览模式？

**编辑**

我正在寻找类似于 Firefox 的[nsIPrivateBrowsingService](https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIPrivateBrowsingService)或[Chrome 的 chrome.tabs API 的 incognito check 的](http://developer.chrome.com/extensions/tabs.html#type-Tab)东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T17:31:10.633

你不能尝试放置一个cookie（或写入本地存储）吗？如果 cookie（和数据）不存在……那么私有模式是否开启？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T10:50:57.820

Internet Explorer 在进入隐私浏览模式时禁用所有浏览器扩展，这意味着：

1.  您的扩展程序永远不会在隐私浏览模式下的选项卡上运行。
2.  在其他选项卡中运行的扩展程序实例既不知道也不能与隐私浏览模式下的页面交互。

微软这一决定的不幸结果是，即使您有一种方法可以检测窗口 [1] 上的隐身状态，您也无法使用该信息做任何事情！

[1] 例如，编写一个 BHO 枚举所有桌面窗口并检查其标题中的字符串“InPrivate”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T14:33:53.633

**结论**

*   如果在私有模式下启用扩展的选项（默认为关闭）为 ON，则扩展确实可以在私有模式下运行。

*   目前无法使用 Trigger.IO 的框架获取此信息。

# ios - 在 MacOS X 和 iOS 中，ASLR 究竟是随机的

> ID：12824045
> 
> 赞同：12
> 
> 时间：2012-10-10T16:24:15.733
> 
> 标签：ios, macos, security, osx-lion, ios6

有没有人有一个文档的链接，在最新的 Mac OS (10.7) 和 iOS (6.0) 的什么情况下究竟是随机的？

我是说。我想看一个列表（类似）

*   代码段（在 A、B、C 的情况下）

*   堆栈（总是）

*   堆

*   数据段（从不）

最好每个事物具有多少位随机化。

我能找到的只是：“MacOS Lion 实现了完整的 ASLR”，而在其他地方，“完整的 ASLR 以不同的方式针对不同的操作系统实现”，这显然不是很丰富。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-10T23:20:54.200

您可以轻松生成您要查找的列表，如下所示：

```
int global_j = 0;

void main ()
{

    char *h = malloc(10);
    int j = 0;

    printf ("Globals are : %p, text is %p, stack is %p, heap is %p\n",
        &global_j, main, &j, h);

} 
```

在山狮上，这会产生：

```
bash-3.2# ./a
Globals are : 0x10fa55020, text is 0x10fa54eb0, stack is 0x7fff501ab864, heap is 0x7f9b294000e0
bash-3.2# ./a
Globals are : 0x106bbe020, text is 0x106bbdeb0, stack is 0x7fff59042864, heap is 0x7f9752c000e0
bash-3.2# ./a
Globals are : 0x108673020, text is 0x108672eb0, stack is 0x7fff5758d864, heap is 0x7fecc34000e0
bash-3.2# ./a
Globals are : 0x1059d2020, text is 0x1059d1eb0, stack is 0x7fff5a22e864, heap is 0x7f8f81c000e0 
```

显示充分的随机化（请注意，由于对齐限制，页面内的偏移量不会随机化，但您仍然会得到一些 16-20 位随机化，正如 4-5 十六进制数字变化所暗示的那样）。

*   内核：从 Mountain Lion 和 iOS6 开始，内核是通过在加载时以 vm_kernel_slide 的值“滑动”它来随机化的。并非所有 vm 页面都以这种方式滑动，但在大多数情况下，这是通过存储一些常量值来工作的（这也可以通过系统调用 #439，kas_info，在 ML 但不是在 iOS 上读取：Apple 正在努力保持随机化值秘密，并且在报告内核地址时不会泄漏它，因此越狱者不会弄清楚他们可以跳转到/覆盖的位置 - 这对他们来说大部分时间都有效）

希望这可以帮助，

TG

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-09-10T09:19:23.090

**没有馅饼：**

可执行 - 已修复

数据 - 固定

堆 - 每次执行随机化

堆栈 - 固定

库 - 每个设备启动随机

链接器 - 已修复

**使用馅饼：**

可执行文件 - 每次执行随机

数据 - 每次执行随机

堆 - 每次执行随机化（更多熵）

堆栈 - 每次执行随机化

库 - 每个设备启动随机

链接器 - 每次执行随机化

# css - 如何使用 Bootstrap 和 LESS 创建流畅的布局？

> ID：12824048
> 
> 赞同：2
> 
> 时间：2012-10-10T16:24:20.663
> 
> 标签：css, twitter-bootstrap, less

如何使用 Bootstrap 和 LESS 创建流畅的布局，而无需编写如下代码：

```
<div class="span12"> 
```

我尝试创建 LESS 代码并编写以下代码：

```
@import "bootstrap";

div#wrap {
  .container-fluid;
}
header {
  #grid > .fluid > .row-fluid;
}
div#logo {
  #grid > .fluid > .span(2);
}
nav {
  #grid > .fluid > .span(10);
} 
```

但这不起作用。怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-25T07:37:02.523

Have you tried using `makeRow()` and `makeColumn` ? You can use them like that :

```
header {
  makeRow();
}
div#logo {
  makeColumn(2);
}
nav {
  makeColumn(10);
} 
```

Here is a great article explaining why and how to use Bootstrap mixins in LESS : [link](http://ruby.bvision.com/blog/please-stop-embedding-bootstrap-classes-in-your-html)

# grails - 圣杯 标签未在自定义标签内执行

> ID：12824052
> 
> 赞同：2
> 
> 时间：2012-10-10T16:24:49.067
> 
> 标签：grails, taglib

我有一个名为的自定义标签`<mk:pageViewTag>`，它首先呈现`.gsp`模板，然后在里面执行它的主体：

标签库（**UtilTagLib.groovy**）：

```
string namespace = "mk"

def pageViewTag = { attrs, body ->
    out << render(template: '/templates/pageTagView') {
        body()
    }
}
... 
```

我渲染的模板（**templates/_pageTagView.gsp**）：

```
<body>
    ${ body() }
    ...
</body> 
```

GSP 我在 ( **test.gsp** ) 上使用自定义标签：

```
<mk:pageViewTag>
    <g:set name="test" value="${1}">
    ${test?:0} %{--Here, I got 0\. Variable test does not exist!--}%
</mk:pageViewTag> 
```

一切都完美无缺，除了`<g:set>`标签，它没有按我预期的那样运行。Grails 根本看不到我声明的变量。

在上面的示例中，我声明了变量`test`并使用 integer 对其进行了初始化`1`。作为我得到的输出`0`。

根据[Grails Docs](http://grails.org/doc/latest/ref/Tags/set.html)我可以使用`scope`属性，当设置为`request`.

有什么方法可以解决它吗？为什么会发生这种情况？

注意：内部`mk:pageViewTag`很大，所以我不能在外面的任何地方声明一个变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-02T00:22:16.567

g:set 需要一个 var 属性而不是名称： http: [//grails.org/doc/2.2.1/ref/Tags/set.html](http://grails.org/doc/2.2.1/ref/Tags/set.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T17:33:05.597

不完美，但不需要技巧的快速解决方案（嗯，几乎）。
我`body`先执行，然后将其作为模板正文包含在内。

**标签库（UtilTagLib.groovy）：**

```
string namespace = "mk"

def pageViewTag = { attrs, body ->

    // Render body ahead!
    String renderedBody = body()

    out << render(template: '/templates/pageTagView') {
        renderedBody
    }
}
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T20:20:53.000

```
string namespace = "mk"

def pageViewTag = { attrs, body ->
  out << render(template: '/templates/pageTagView', model:[body: body()])
} 
```

**模板/_pageTagView.gsp ：**

```
<body>
  ${body}
  ...
</body> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-22T13:04:35.710

我在模板中声明了一个 grails 变量，并在父 gsp 文件（包含模板的地方）中使用了它。

**例如：Parent.gsp 包括模板：_child.gsp，其中有“ `<g:set var="a" value="${1}" />`”。在 Parent.gsp 中打印变量“a”会呈现“null”。**

因此，我们发现在渲染模板时插入带有变量的模板或设置变量不起作用。因为渲染模板需要时间并且与父页面异步。在渲染完成之前，我们无法确定变量初始化。

***如果范围设置为“请求”，那么我们说这个变量应该在整个请求周期中都是可见的，并且它们存储在请求中以供进一步处理或访问。建议使用`<g:set var="a" value="${1}" scope='request'/>`或`<g:set var="a" value="${1}" scope='session'/>`。***

请参阅这些有关如何使用范围的链接：

[grails 范围问题 - 页面、请求、flash](https://stackoverflow.com/questions/8273502/grails-scope-questions-page-request-flash)

[如何使用 grails <g:set> 标签会话范围？](https://stackoverflow.com/questions/10143159/how-to-use-grails-gset-tag-session-scope)

# c# - XNA 鼠标位置偏移

> ID：12824053
> 
> 赞同：1
> 
> 时间：2012-10-10T16:24:52.317
> 
> 标签：c#, xna, position, mouse, xna-4.0

我在 XNA 中遇到以下问题：在我的一个项目中，当我尝试将鼠标位置设置为 (0,0) 时，它会将光标移到游戏窗口之外。如果我得到鼠标位置并将光标放在左上角，它会显示 (170,0)。可能是什么问题？在另一个项目中，如果我尝试在我的 Game1 类的构造函数中设置鼠标位置，它会将其设置在屏幕之外。但是，如果我在 Update 函数中设置位置，它就可以正常工作。我应该怎么办？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T12:14:52.303

图形设备尚未在游戏的构造函数中设置。我认为这是你的问题。所以我认为正在发生的事情是将鼠标放在游戏构造函数中默认设置视口的 0,0 处。一旦设置了图形驱动程序，它就会偏移鼠标位置。

如果您在任何代码发生之前需要它，请将其设置为 Game1.cs 的 Initialize 方法中的第一件事。

# ios - 如何使用 Titanium 在文档目录中保存 db 文件

> ID：12824054
> 
> 赞同：0
> 
> 时间：2012-10-10T16:24:57.747
> 
> 标签：ios, sqlite, titanium, titanium-mobile

我想使用 Titanium API将数据库文件保存在**Documents Directory**中，而不是**/Library/Private Documents文件夹中。**

```
var database = Titanium.Database.install('/db/Database.sqlite',DatabaseHandler.DB_NAME); 
```

它正在被保存到

```
iPhone Simulator/5.0/Applications/B750AD49-5879-4ABD-B903-C76A03833BE4/Library/Private Documents/Database.sql 
```

而我们要求它

```
iPhone Simulator/5.0/Applications/B750AD49-5879-4ABD-B903-C76A03833BE4/Documents/dbDir/Database.sql 
```

或者

```
iPhone Simulator/5.0/Applications/B750AD49-5879-4ABD-B903-C76A03833BE4/Documents/Database.sql 
```

基本要求是，我们不希望用户的数据在新应用更新时丢失。在 App Store 的新应用程序更新中，仅保存文档目录数据，其余数据将被删除。

如果我手动移动 db 文件：

```
if(Ti.Platform.osname === 'iphone'){
  var dbFile = database.file;
  var filePath = String.format('%s/%s.sql',dbDir.resolve(),DatabaseHandler.DB_NAME);
  Ti.API.info(filePath);
  var result = dbFile.move(filePath);
  Ti.API.info(result);   
} 
```

然后在运行应用程序时，我遇到了消息问题：

> message = "无效的 SQL 语句。Error Domain=com.plausiblelabs.pldatabase Code=3 \"解析提供的 SQL 语句时发生错误。\" UserInfo=0x9c14ed0 {com.plausiblelabs.pldatabase.error.vendor.code=1, NSLocalizedDescription =解析提供的 SQL 语句时发生错误。, com.plausiblelabs.pldatabase.error.query.string=SELECT * FROM UserProfile, com.plausiblelabs.pldatabase.error.vendor.string=no such table: UserProfile} in -[TiDatabaseProxy执行：] (TiDatabaseProxy.m:186)"

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T20:27:24.697

你是怎么打开数据库的？

如果您在将 Ti.Database.open('MyDatabase') 移动到另一个位置后使用它，它会在默认位置创建一个名为 'MyDatabase' 的空白数据库。您最初安装数据库的位置。据我了解，这是 Ti.Database.open 的默认功能。如果数据库不存在，则创建它。由于这个数据库是新的并且其中没有表，因此会说表 UserProfile 不存在。

我不知道您是否有办法在 Ti.Database.open 调用中限定数据库的位置。例如，我不知道是否

```
Ti.Database.open('/iPhone Simulator/5.0/Applications/B750AD49-5879-4ABD-B903-C76A03833BE4/Documents/dbDir/MyDatabase') 
```

将工作与否。您需要告诉 open call 数据库所在的位置，因为您将它从它期望找到它的位置移走了。也许情况并非如此，但您的示例代码并未显示您对数据库的使用，而是显示了您如何管理文件的移动。

# http-post - 来自提琴手的 Web API POST 返回 400 错误请求，您的浏览器发送了无效请求

> ID：12824057
> 
> 赞同：2
> 
> 时间：2012-10-10T16:25:10.150
> 
> 标签：http-post, fiddler, asp.net-web-api

我正在使用 Fiddler 来测试我的 web api。来自本地主机的 GET、POST 有效，但是当我在 IIS 上部署 API 并使用域名进行测试时，GET 操作继续有效，但 POST 无效。它返回“400 错误请求。您的浏览器发送了无效请求。”

这是我的请求的屏幕截图。有人可以告诉我什么是错的。谢谢。

![在此处输入图像描述](../Images/d75441fec452e00a1268cac66287fae1.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T04:52:12.360

**POST**和**PUT**请求需要一个**Content-Length 标头**，您的请求缺少该标头。当您在“已解析”作曲家选项卡中输入请求时，Fiddler 通常会自动为您计算并添加它，除非您在“选项”选项卡中禁用了“修复内容长度标题”，这就是这里必须发生的事情。

# sql - SSRS 2008：确定图表中条形宽度的表达式？

> ID：12824063
> 
> 赞同：0
> 
> 时间：2012-10-10T16:25:21.080
> 
> 标签：sql, sql-server-2008, reporting-services, charts, ssrs-2008

我有一个查询，它返回如下数据集：

```
WaitTimeGroup   WaitTimeGroupID     WaitTimeGroupNotify    Count
upto 1h         1                   0                      0
upto 2h         2                   0                      5
upto 3h         3                   0                      15
upto 3h30m      4                   1                      3
upto 3h45m      5                   2                      2
upto 4h         6                   3                      1
upto 6h         7                   0                      9
upto 12h        8                   0                      0
over 12h        9                   0                      0 
```

然后使用 SSRS 2008 显示以下图表：

![在此处输入图像描述](../Images/568181d278ea834c36231fcf714cbde2.png)

我希望能够做的是使非灰色条更宽，尤其是鲜红色条。颜色由 WaitTimeGroupNotify 值确定。

我尝试在 PixelPointWidth CustomAttribute 属性中设置一个表达式，尽管这显示了所有具有相同宽度的条形。

这是否可以使用 SSRS 2008 或者通过修改我的数据集来实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T18:31:58.540

尝试`CustomAttributes -> PointWidth`使用表达式动态设置宽度 ()，类似于以下内容：

```
= IIF(CInt(Fields!WaitTimeGroupNotify.Value)=3,.2,1.98) 
```

...您需要尝试达到所需的 PointWidth 值。

# iphone - 滚动其他滚动视图时滚动视图重置

> ID：12824064
> 
> 赞同：0
> 
> 时间：2012-10-10T16:25:22.560
> 
> 标签：iphone, ios, uiscrollview, autolayout

我正在为 iPhone 5 优化我的一个 iPhone 应用程序。为此，我决定使用自动布局。

我有一个垂直滚动的滚动视图。在此滚动视图的顶部和滚动视图内部，我有另一个水平滚动的分页滚动视图。这工作正常，直到我在外部滚动视图中垂直滚动。然后内部滚动视图将重置为 (0, 0) 并且似乎内容大小将重置，因为滚动视图现在不可滚动。我已经为此苦苦挣扎了几个小时，现在我没有想法了。

有谁知道为什么会这样？如果这能让某人了解为什么会发生这种情况，我很乐意展示屏幕截图、代码等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T13:36:29.637

我通过以编程方式创建视图解决了这个问题。我的约束可能有问题，但是当我意识到以编程方式创建视图没有问题时，我没有设法找出是什么并且不想花更多时间玩它。

# git - 是否有适用于 Windows 的苗条且免费的 RTC 客户端？

> ID：12824073
> 
> 赞同：0
> 
> 时间：2012-10-10T16:25:50.023
> 
> 标签：git, version-control, ibm-rational, rational-team-concert

我的团队正在使用带有 RAD/Eclipse 的 RTC（Rational Team Concert）……但我采用极简开发方法，所以我使用 Sublime 来编辑文件……我还想要一个比 Eclipse 更苗条的 RTC 客户端。这可能吗？有没有存在的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T16:40:08.443

您可以使用 scm 命令进行源代码控制操作。在 Windows 上，这些相同的操作可用于 Windows 资源管理器（仅限 RTC4）。
再加上允许您进行大多数其他操作（工作项、查询、构建...）的 Web 界面，您就有了一个轻量级的替代方案。

但是，它没有直接与基于非 Eclipse 的 IDE 集成。

* * *

从[Seth Packham](https://stackoverflow.com/users/709039/seth-packham)删除的答案中，另一个选项是：

> 使用 Rational Team Concert 4.x 中可用的 Windows Shell 客户端。[在此处通过此视频](https://jazz.net/products/rational-team-concert/features/clients#shell)或此[YouTube 视频](https://www.youtube.com/watch?feature=player_embedded&v=0f8LrTeENSw)了解 Windows 集成。
> 
> 它基本上将源代码控制集成到 Windows 资源管理器中，就像您使用 SVN 所做的那样。

# c# - 如何将下载的数据写入多个文件？

> ID：12824074
> 
> 赞同：-3
> 
> 时间：2012-10-10T16:25:54.783
> 
> 标签：c#, networking, stream

我正在尝试将下载的所有字节写入 3 个不同的文件，现在，我正在使用 WebRequest 和 WebResponse 对象。我确定这是正确的方法吗？我陷入了将数据部分写入文件的过程中。无论写入什么数据，现在的目标都是从同一流中读取数据并将其写入3个不同的文件。我可以成功写入第一个文件，而不是它给出错误 - 当我尝试将流（我从 response.getResponseStream() 获得）分配给另一个二进制读取器时，流不可读。

我试过两种方法——一种是直接将响应流传递给不同的二进制读取器，失败了。其次，我尝试为每个二进制阅读器创建单独的引用，但也失败了。如果有帮助，这里是代码： -

```
using (Stream strm = res.GetResponseStream())
{
    using (Stream strm1 = strm)
    {
        int i = 0;
        BinaryReader br = new BinaryReader(strm1);
        br.BaseStream.BeginRead(buffer, 0, buffer.Length, 
            new AsyncCallback(ProcessDnsInformation), br);
        Console.WriteLine("Data read {0} times", i++);
        Console.ReadKey();
        File.WriteAllBytes(@"C:\Users\Vishal Sheokand\Desktop\Vish.bin", buffer);
        br.Close();
    }

    using (Stream strm2=strm)
    {
        int i = 0;
        BinaryReader br = new BinaryReader(strm2);
        br.BaseStream.BeginRead(buffer, 0, buffer.Length, 
            new AsyncCallback(ProcessDnsInformation), br);
        Console.WriteLine("Data read {0} times", i++);
        Console.ReadKey();
        File.WriteAllBytes(@"C:\Users\Vishal Sheokand\Desktop\Vish1.bin", buffer);
        br.Close();
    }

    using (Stream strm3 = strm)
    {
        int i = 0;
        BinaryReader br = new BinaryReader(strm3);
        br.BaseStream.BeginRead(buffer, 0, buffer.Length, 
            new AsyncCallback(ProcessDnsInformation), br);
        Console.WriteLine("Data read {0} times", i++);
        File.WriteAllBytes(@"C:\Users\Vishal Sheokand\Desktop\Vish2.bin", buffer);
        br.Close();
    }
} 
```

我正在学习 C#，请忽略一些（或全部）愚蠢的编码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T16:28:53.737

你至少有两个问题。首先，看看这个：

```
using (Stream strm = res.GetResponseStream())
{
    using (Stream strm1 = strm)
    {
        ...
    } 
```

一旦您退出内部块，该流将被释放 - 因此您无法在下一个块中读取它。

其次，您正在调用`BeginRead`which 将*开始*读取数据 - 但是您已经将回调的时间与您决定*写入*所有数据的时间完全分离。我*强烈*建议您首先使用同步 IO 进行所有这些工作，然后在适当的情况下使用异步 IO。

# iphone - 在 iphone sdk 中使用 DEFacebookComposeViewController 的白色背景问题

> ID：12824075
> 
> 赞同：1
> 
> 时间：2012-10-10T16:25:55.797
> 
> 标签：iphone

我正在使用 DEFacebookComposeViewController 在 Facebook 上共享。

我在一个视图控制器中遇到问题，它将视图的背景颜色更改为白色而不是透明的黑色背景。![白色背景问题](../Images/6767a4f861cff8f1d3e727abc5b72796.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T09:03:31.610

无需在代码中的任何地方进行更改，只需在实现模块中替换此代码即可

```
self.modalPresentationStyle = UIModalPresentationCurrentContext; 
```

和

```
appDelegate.window.rootViewController.modalPresentationStyle = UIModalPresentationCurrentContext; 
```

你的工作将完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T17:11:01.080

我设法解决了这个问题。您需要取消注释以下文件中的代码：“DEFacebookComposeViewController.h”

只需替换以下代码：

*   (void)viewWillAppear:(BOOL)animated { [super viewWillAppear:animated];

    ```
    // Take a snapshot of the current view, and make that our background after our view animates into place.
    // This only works if our orientation is the same as the presenting view.
    // If they don't match, just display the gray background.
      if (self.interfaceOrientation == self.fromViewController.interfaceOrientation) {
    //        UIImage *backgroundImage = [self captureScreen];
    //        self.backgroundImageView = [[[UIImageView alloc]               initWithImage:backgroundImage] autorelease];
       }
       else {
       //            self.backgroundImageView = [[[UIImageView alloc] initWithFrame:self.fromViewController.view.bounds] autorelease];
    }
          //    self.backgroundImageView.autoresizingMask = UIViewAutoresizingNone;
    //    self.backgroundImageView.alpha = 0.0f;
    //    self.backgroundImageView.backgroundColor = [UIColor lightGrayColor];
    //    [self.view insertSubview:self.backgroundImageView atIndex:0];

    // Now let's fade in a gradient view over the presenting view.
       self.gradientView = [[[DEFacebookGradientView alloc] initWithFrame:[UIApplication sharedApplication].keyWindow.bounds] autorelease];
       self.gradientView.autoresizingMask = UIViewAutoresizingNone;
       self.gradientView.transform = self.fromViewController.view.transform;
       self.gradientView.alpha = 0.0f;
       self.gradientView.center = [UIApplication sharedApplication].keyWindow.center;
       [self.fromViewController.view addSubview:self.gradientView];
       [UIView animateWithDuration:0.3f
                 animations:^ {
                     self.gradientView.alpha = 1.0f;
                 }];    

       self.previousStatusBarStyle = [UIApplication sharedApplication].statusBarStyle;
       [[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleBlackOpaque animated:YES]; 

       [self updateFramesForOrientation:self.interfaceOrientation];

          } 
    ```

使用此代码：

```
 - (void)viewWillAppear:(BOOL)animated
   {
       [super viewWillAppear:animated];

    // Take a snapshot of the current view, and make that our background after our view animates into place.
    // This only works if our orientation is the same as the presenting view.
    // If they don't match, just display the gray background.
if (self.interfaceOrientation == self.fromViewController.interfaceOrientation) {
    UIImage *backgroundImage = [self captureScreen];
    self.backgroundImageView = [[[UIImageView alloc] initWithImage:backgroundImage] autorelease];
}
else {
    self.backgroundImageView = [[[UIImageView alloc] initWithFrame:self.fromViewController.view.bounds] autorelease];
}
self.backgroundImageView.autoresizingMask = UIViewAutoresizingNone;
self.backgroundImageView.alpha = 0.0f;
self.backgroundImageView.backgroundColor = [UIColor lightGrayColor];
[self.view insertSubview:self.backgroundImageView atIndex:0];

    // Now let's fade in a gradient view over the presenting view.
self.gradientView = [[[DEFacebookGradientView alloc] initWithFrame:[UIApplication sharedApplication].keyWindow.bounds] autorelease];
self.gradientView.autoresizingMask = UIViewAutoresizingNone;
self.gradientView.transform = self.fromViewController.view.transform;
self.gradientView.alpha = 0.0f;
self.gradientView.center = [UIApplication sharedApplication].keyWindow.center;
[self.fromViewController.view addSubview:self.gradientView];
[UIView animateWithDuration:0.3f
                 animations:^ {
                     self.gradientView.alpha = 1.0f;
                 }];    

self.previousStatusBarStyle = [UIApplication sharedApplication].statusBarStyle;
[[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleBlackOpaque animated:YES]; 

[self updateFramesForOrientation:self.interfaceOrientation];

   } 
```

如果他们发现类似的问题，希望这对其他人有帮助。

谢谢。

# python - 如何在 Python 中用逗号和指定的精度数字格式化数字

> ID：12824077
> 
> 赞同：15
> 
> 时间：2012-10-10T16:25:59.097
> 
> 标签：python, number-formatting, string-formatting

问题在于 Python 2.6，这就是我们在生产中所拥有的。

我有使用逗号格式化数字（如 1234567.0987 或 1234567.0）的要求，并指定小数点后的位数。因此，如果精度为 3，则 1234567.0987 可能看起来像 1,234,567.099。

我尝试使用 Locale，正如许多问题的答案所建议的那样，问题是导致小数点后两位数，这对于我的要求是不可接受的。

我尝试在其他地方搜索，但没有找到任何解决方案，最后我自己创建了一个方法：

```
def format_float(value, precision = 4):
    formatString = "%0." + str(precision) + "f"    
    str_val =  formatString % value
    first, second = str_val.split('.')
    first = int(first)
    group = []
    while True:
        result, mod = first / 1000, first % 1000
        group.append(str(mod))
        if result == 0:
            break
        first = result
    group.reverse() 
    return ','.join(group) + '.' + second 
```

我尝试运行一些测试来测试该方法，它工作正常：

```
# default 4 digits precision
assert format_float(1234567890.0876543) == '1,234,567,890.0877'
assert format_float(1.2) == '1.2000'
assert format_float(1234) == '1,234.0000'
assert format_float(0) == '0.0000'

# 3 digits precision
assert format_float(1234567890.0876543, precision=3) == '1,234,567,890.088'
assert format_float(0, precision=3) == '0.000' 
```

作为 Python 新手，我的问题是这是否是一个可接受的解决方案。由于这种格式必须在紧密的 for 循环中多次完成，如果有人能指出更好的解决方案，我将不胜感激。

感谢和问候所有人

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-10-10T16:30:04.800

在 Python 2.7 和 3.x 中，您可以使用`str.format`：

```
>>> num = 1234567890.0876543
>>> "{0:,f}".format(num)
'1,234,567,890.087654'
>>> "{0:,.2f}".format(num)
'1,234,567,890.08'
>>> "{0:,f}".format(1234)
'1,234.000000' 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-10-10T16:30:57.537

我认为您对语言环境模块的研究不够深入。 [`locale.format()`](http://docs.python.org/library/locale.html#locale.format)是您想要的，但请确保首先设置语言环境，否则您根本不会进行分组。

```
>>> locale.setlocale(locale.LC_ALL, '')
'en_US.UTF-8'
>>> locale.format("%.4f", 12345.678912, grouping=True)
'12,345.6789' 
```

# hibernate - 多对多关系的休眠搜索条件

> ID：12824079
> 
> 赞同：-1
> 
> 时间：2012-10-10T16:26:08.460
> 
> 标签：hibernate, many-to-many, criteria

我对 Hibernate 标准非常陌生。目前我有一些要求，需要为两个实体创建休眠搜索条件，它们之间具有多对多关系。

例如，我有 Student 和 Course 对象。一个学生可以学习多于一门课程，而一门课程可以由多个学生学习。Student 和 Course 类如下所示

```
public class Student {
   private String name ;

   private Set<Course> courses = new HashSet<Course>();

   // setter and getters following
}

public class Course{
  private String courseName ;
  // setter and getter following
} 
```

我配置了从学生到课程的单向关系。

我的要求是根据课程名称选择所有学生。例如选择参加课程名称“Math101”的学生。因为我对休眠很陌生，所以我不知道该怎么做。你能告诉我这些要求的样本标准吗？非常感谢。

此致。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T16:32:24.987

```
session.createCriteria(Student.class)
    .createCriteria("courses")
        .add( Restrictions.eq("courseName", "Math101") )
    .list(); 
```

# objective-c - 是否可以轻松检查数组是否在 Objective-C 中排序？如果没有，我自己做这件事的“最佳实践”方法是什么？

> ID：12824080
> 
> 赞同：0
> 
> 时间：2012-10-10T16:26:08.387
> 
> 标签：objective-c, arrays, sorting

我知道在创建数组时可以使用 NSSortDescriptor 对数组进行排序，但是是否有预先构建的方法来获取已经存在的数组并判断它是否已经排序？

如果没有，我可以自己想出两种方法：

1.  [这个问题](https://stackoverflow.com/questions/11989071/fastest-way-to-check-if-an-array-is-sorted)中的代码。
2.  从我的旧数组创建一个新数组，但在创建新数组时使用 NSSortDescriptor，然后检查两个数组是否相等。

我的代码优化有点生疏，那么这两种方法中哪一种会更好（更快/最稳定）？还是有另一种方法可以检查比这两种方法更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T17:52:22.043

您提到的问题表明该算法是 O(n) 并且尽可能快。一般来说，排序总是比这更昂贵。**对于某些算法，例如冒泡排序，当且仅当**输入已经排序时才采用 O(n) 。

所以你的建议 (1) 总是会胜过你的建议 (2)，因为后者是排序的成本加上相等测试的成本，而相等测试本身就是 O(n)。

如果您有一个可变数组并希望维护它是否已排序，则在排序时设置一个标志并在任何添加时重置该标志。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-10T19:34:53.000

这里的另一种方法是继承 NSMutableArray，它有一个 BOOL 排序属性，你可以在对数组排序时设置它。

如果你不想子类化，你可以在数组上设置一个键，它表示相同的东西，然后如果你传递它，它会留在数组中。

```
// create array
NSMutableArray* array = [NSMutableArray arrayWithCapacity:1];
[array setValue:NO forKey:@"sorted"];

//... insert values
//... sort

// check if sorted
BOOL sorted = [array valueForKey:@"sorted"];

// add a new value to the array
[array addObject:obj];
[array setValue:NO forKey:@"sorted"]; 
```

# html - IE 10 呈现的 HTML 与其输出的 HTML 之间的区别

> ID：12824081
> 
> 赞同：0
> 
> 时间：2012-10-10T16:26:23.797
> 
> 标签：html, internet-explorer, html-agility-pack

我使用 IE 10 F12 按钮在我的页面上找到一个 < a > 节点，我得到了这个：

```
<a tabindex="-1" class="level1 static" href="About.aspx">About</a> 
```

但我使用下面的代码来检索页面 HTML，并得到这个：

```
<a class="level1" href="About.aspx">About</a> 
```

代码：

```
 WebClient wc = new WebClient();
        String pageString = wc.DownloadString(url); 
```

为什么它们不同？

更新：

下面是 Fiddler 监控结果。

IE10：

![在此处输入图像描述](../Images/74e1b8703ea41281b180aabd5f196b77.png)

![在此处输入图像描述](../Images/7b4ba8dfdcf675bc5fe107d8700372dd.png)

网络客户端：

![在此处输入图像描述](../Images/d2fe79a9a8cd00191513386c61863f23.png)

![在此处输入图像描述](../Images/c20ddda3caef1e8c98d31a294563d83b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T16:32:18.173

网络服务器通常会根据请求来自哪个浏览器发送不同的输出。也许这个“简化”`<a>`标签就是这样的结果？

我不确定它是如何`WebClient`工作的，但也许可以修改标题，这样你就可以像 IE10 浏览器一样行事，看看结果是否不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T09:45:14.280

这个问题与这个问题重复：How to get the page source from an IE window?

我已经在那里解决了。

# java - Java布局调试错误

> ID：12824082
> 
> 赞同：0
> 
> 时间：2012-10-10T16:26:31.300
> 
> 标签：java, user-interface, nullpointerexception, layout-manager, grouplayout

我已经创建了一个 GUI 并仔细复制了生成代码，修改了类所需的内容并添加了所有必要的导入等，但是当我构建项目时它给了我这个我无法弄清楚的错误

> ```
> run:
> Exception in thread "main" java.lang.NullPointerException
>   at question3_test.Triangle.<init>(Triangle.java:35)
>   at question3_test.Triangle.main(Triangle.java:142)
> Java Result: 1
> BUILD SUCCESSFUL (total time: 3 seconds) 
> ```

这是我复制的代码（以防更好理解）

```
package question3_test;
import java.awt.*;
import javax.swing.*;
public class Triangle extends JFrame
{
    private JButton jButton1;
    private JLabel jLabel2;
    private JLabel jLabel3;
    private JPanel jPanel1;
    private JLabel result_lbl;
    private JLabel side1_lbl;
    private JTextField side1_tf;
    private JTextField side2_tf;
    private JTextField side3_tf;
    private Label title_lbl;

     private void initComponents() 
     {

     }

    public Triangle()
    {
         jPanel1.setMaximumSize(new Dimension(200, 200));    
        title_lbl.setFont(new Font("Arial", 1, 18)); // NOI18N
        title_lbl.setText("AREA OF TRIANGLE");    
        side1_lbl.setFont(new Font("Tahoma", 1, 11)); // NOI18N
        side1_lbl.setText("Side 1:");    
        jLabel2.setFont(new Font("Tahoma", 1, 11)); // NOI18N
        jLabel2.setText("Side 2:");    
        jLabel3.setFont(new java.awt.Font("Tahoma", 1, 11)); // NOI18N
        jLabel3.setText("Side 3:");    
        side1_tf.setMinimumSize(new java.awt.Dimension(60, 20));    
        side2_tf.setMinimumSize(new java.awt.Dimension(60, 20));    
        side3_tf.setMinimumSize(new java.awt.Dimension(60, 20));
        jButton1.setFont(new java.awt.Font("Tahoma", 1, 11)); // NOI18N
        jButton1.setText("Calculate Area");
        jButton1.setBorder(null);    
        result_lbl.setText("jLabel4");    
        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel1Layout.createSequentialGroup()
                .addContainerGap(25, Short.MAX_VALUE)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addGap(33, 33, 33)
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(jPanel1Layout.createSequentialGroup()
                                .addComponent(side1_lbl)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                .addComponent(side1_tf, javax.swing.GroupLayout.PREFERRED_SIZE, 60, javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addGroup(jPanel1Layout.createSequentialGroup()
                                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel1Layout.createSequentialGroup()
                                        .addComponent(jLabel2)
                                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED))
                                    .addGroup(jPanel1Layout.createSequentialGroup()
                                        .addComponent(jLabel3)
                                        .addGap(10, 10, 10)))
                                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                                    .addComponent(side3_tf, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                    .addComponent(side2_tf, javax.swing.GroupLayout.PREFERRED_SIZE, 60, javax.swing.GroupLayout.PREFERRED_SIZE)))))
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addGap(60, 60, 60)
                        .addComponent(result_lbl))
                    .addComponent(title_lbl, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addGap(17, 17, 17)
                        .addComponent(jButton1, javax.swing.GroupLayout.PREFERRED_SIZE, 132, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addGap(30, 30, 30))
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addComponent(title_lbl, javax.swing.GroupLayout.PREFERRED_SIZE, 44, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(side1_lbl)
                    .addComponent(side1_tf, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)                    .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel2)
                    .addComponent(side2_tf, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel3)
                    .addComponent(side3_tf, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addComponent(jButton1, javax.swing.GroupLayout.PREFERRED_SIZE, 31, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(18, 18, 18)
                .addComponent(result_lbl)
                .addGap(0, 21, Short.MAX_VALUE))
        );

        title_lbl.getAccessibleContext().setAccessibleName("Area of Triangle");    
 javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
    getContentPane().setLayout(layout);
    layout.setHorizontalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
            .addContainerGap(37, Short.MAX_VALUE)
            .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addGap(18, 18, 18))
    );
    layout.setVerticalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
            .addContainerGap()
            .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addContainerGap(25, Short.MAX_VALUE))
    );

    }

    public static void main(String args [])
    {
        Triangle mytri = new Triangle();
        mytri.setVisible(true);

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T16:30:29.977

您开始为尚未创建的对象设置值。您需要先创建这些对象。例子 ：

```
jPanel1 = new Jpanel(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T16:32:09.327

该行：

```
jPanel1.setMaximumSize(new Dimension(200, 200)); 
```

正在抛出 a `NullPointerException`，因为您没有为此组件分配任何值。

事实上，您还没有实例化任何子组件，甚至没有调用您的`initComponents`方法：

```
private void initComponents() {
    jPanel1 = new JPanel();
    title_lbl = new JLabel();
    side1_lbl = new JLabel();
    ...
} 
```

# java - 适合所有人的 Viewpager 示例/教程代码在哪里？

> ID：12824086
> 
> 赞同：4
> 
> 时间：2012-10-10T16:26:45.550
> 
> 标签：java, android, android-viewpager

我一直在寻找一段时间，但找不到一个清晰、直接的 ViewPager 示例。我认为其他人也有同样的问题，我想知道。我知道还有其他关于它们的问题，但我已经尝试过这些网站，它们要么已过时，要么崩溃。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T16:30:13.807

> 我一直在寻找一段时间，但找不到一个清晰、直接的 ViewPager 示例

这是一个[`ViewPager`与`FragmentPagerAdapter`](https://github.com/commonsguy/cw-omnibus/tree/master/ViewPager/Fragments).

这是与上面相同的一个，[但添加了一个`PagerTabStrip`](https://github.com/commonsguy/cw-omnibus/tree/master/ViewPager/Indicator).

这是[在操作栏中使用选项卡](https://github.com/commonsguy/cw-omnibus/tree/master/ViewPager/TabPager)而不是`PagerTabStrip`.

所有的要点都是一样的：

*   将 a 添加`ViewPager`到活动布局
*   创建某种`PagerAdapter`将返回页面的内容
*   将适配器连接到寻呼机

# sql - SQL 选择 n 到 m 关系

> ID：12824087
> 
> 赞同：8
> 
> 时间：2012-10-10T16:26:59.473
> 
> 标签：sql

我在 和 之间有一个n*对 m 的*关系。`Author``Book`

**表作者**

```
ID       Name
1        Follett  
2        Rowling
3        Martin 
```

**表书**

```
ID     Title                       Category 
1        A Dance with Dragons      Fantasy
2        Harry Potter              Fantasy
3        The Key to Rebecca        Thriller
4        World without end         Drama 
```

**表 book_author**

```
authorId       bookId
1        3  
2        2
3        1
1        4 
```

系统中有更多的作者和书籍。现在我想选择所有拥有“*幻想*”类型的书的作者。

到目前为止，这是我想出的：

```
 select distinct a.id 
   from author a, book b, written w 
   where w.authorId = a.id and w.bookId = b.id and b.category = "Fantasy"; 
```

我想知道如何优化这个查询，因为特别是表格簿非常大。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-10T16:31:55.267

建议使用显式`JOIN`而不是您当前拥有的隐式（逗号分隔的表列表）连接，因为当您需要引入左连接时，它将提高灵活性。

```
SELECT
  DISTINCT a.id
FROM
  author a
  JOIN book_author ba ON a.id = ba.authorId
  JOIN books b ON b.id = ba.bookId
WHERE b.category = 'Fantasy' 
```

如果您`book_author`已经定义`FOREIGN KEY` 了与`author`和`books`表的关系，则将强制执行索引。同样，这些表中的相应`id`列应定义为`PRIMARY KEY`. 除此之外，您唯一可以做的潜在优化是在`books.category`.

```
CREATE TABLE book_author (
  authorId INT NOT NULL, /* or whatever the data type... */
  bookId INT NOT NULL,
  /* define FK constraints in book_author */
  FOREIGN KEY (authorId) REFERENCES author (id),
  FOREIGN KEY (bookId) REFERENCES books (id)
); 
```

# jquery - jQuery淡入容器，淡出并淡入下一个容器

> ID：12824098
> 
> 赞同：2
> 
> 时间：2012-10-10T16:27:26.577
> 
> 标签：jquery, actionscript, containers, fadein, fadeout

我想知道是否有任何方法（使用 jQuery）来获得与该页面相同的效果 - 客户想要相同的效果，但在 jQuery 中（这是在 actionscript 中 - [http://www.shoppingmetropolitanobarra.com.br/site/web /lojas.php](http://www.shoppingmetropolitanobarra.com.br/site/web/lojas.php)）。

我试图变成一个jQuery代码，但没有成功：

[http://jsfiddle.net/pq667/2/](http://jsfiddle.net/pq667/2/)

将有几个容器，每个容器都有多个使用jQuery`animate`方法的缩略图，即一个容器完成后，应该使用`fadeOut`效果和`fadeIn`下一个容器（**在页面加载时发生**）。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T16:47:03.860

[我经常从http://paulirish.com/2008/sequentially-chain-your-callbacks-in-jquery-two-ways/](http://paulirish.com/2008/sequentially-chain-your-callbacks-in-jquery-two-ways/)更改此片段。任意 jQuery 对象上的自执行回调链*通过：temp01*

```
(function hidenext(jq){
    jq.eq(0).fadeOut("fast", function(){
        (jq=jq.slice(1)).length && hidenext(jq);
    });
})($('div#bodyContent a')); 
```

您可以将上面的内容更改为以下内容：

```
$('.block').hide();

(function showNext(ele){
    ele.eq(0).fadeIn('slow', function(){
        (ele=ele.slice(1)).length && showNext(ele);
    });
})($('.block'))​ 
```

这是我设置的 jsFiddle 以向您展示可能性：http: [//jsfiddle.net/hqgVS/](http://jsfiddle.net/hqgVS/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T16:58:33.830

这种确切的效果只能通过 CSS3 转换实现。原因是文本的缩放。您当然可以通过更改元素的大小甚至字体来伪造它，但是很难达到预期的效果。

例如：

**jQuery：**

```
$('li').each(function(i, el) {
    setTimeout(function() {
        $(el).addClass('show');
    }, ($('li').length - i) * 500);
});​ 
```

**CSS：**

```
li.show{
   -webkit-transition:all 1s ease-out;
   opacity:1;
   -webkit-transform:scale(1);   
} 
```

**演示： http:** [//jsfiddle.net/6xL7R/](http://jsfiddle.net/6xL7R/)
（在 Chrome 等 webkit 浏览器上查看，因为我省略了其他供应商前缀）

* * *

不过，您可以使用 jQuery 制作不透明动画：

**jQuery：**

```
$('li').css({'opacity':0}).each(function(i,el){
    $(el).delay(($('li').length-i)*500).animate({'opacity':1},1000);
}); 
```

（我小提琴中的评论部分）

也许两者的结合对你有用？在兼容的浏览器上显示比例。

[或使用http://modernizr.com/](http://modernizr.com/)检查浏览器

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T17:04:54.717

看看我的示例[http://jsfiddle.net/qEAJu/20/](http://jsfiddle.net/qEAJu/20/)，如果你想实现这种缩放效果，请考虑使用[这个插件](http://ricostacruz.com/jquery.transit/)进行 css 转换。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T16:39:01.530

You'll need to play with positioning, as you'll see, but this does the fade in, delay, fade out that you asked for...

[http://jsfiddle.net/pq667/11/](http://jsfiddle.net/pq667/11/)

It was simply a case of adding another delay, after the 1st animate, and then another animate to do the opposite.

I'd recomment positioning them all absolutely, inside a relatively positioned container, and animating the position (left & top) as well as the width and height.

# safari - iPad 2 Safari 不显示渐进式 .jpg 文件

> ID：12824099
> 
> 赞同：1
> 
> 时间：2012-10-10T16:27:35.967
> 
> 标签：safari, jpeg, ipad-2, progressive

使用装有 OS 5.1.1 的 iPad 2。在 Safari 中，尝试通过 img 标签显示 jpg 图像但不显示（仅显示 ? 图标）。如果直接在地址栏上输入 url，则会显示相同的图像。

另请注意，如果图像保存为非渐进式 jpg，则可以正常工作。通过 Photoshop 在“另存为网络”和“另存为”方法上保存的渐进式 jpg。两者都没有帮助。

请问有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-16T04:28:13.417

Safari 有一个明显的错误，如果满足某些条件，它不会显示一些渐进式 JPEG 图像。

根据我的经验，当满足以下某些条件时，Safari 将不会显示 jpg：

*   使用渐进式编码
*   图像是背景（用于元素或整个页面）
*   图像很大（我不知道到底有多大，但我遇到了数千像素宽的图像问题）
*   可能还有其他事情，我还没有完全探索过这个错误

除了 Safari，我无法在任何浏览器中重新创建它。

要解决此问题，您可以重新保存图像，确保它不是渐进式格式（photoshop 等对此有选择器），或使用其他格式（gif、png 等）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-19T02:48:28.583

我在 iPad 模拟和设备上也有这个问题。图片不能作为背景加载，但可以通过链接加载。

我通过以下方式解决此问题：通过photoshop打开此图像，文件->另存为网络，然后选择jpeg，保存并替换旧图像。

# javascript - 相同的嵌套查询

> ID：12824107
> 
> 赞同：2
> 
> 时间：2012-10-10T16:28:07.700
> 
> 标签：javascript, sql, closures, nested

> **可能重复：**
> [javascript：在函数（）{}中使用当前的for循环计数器值？](https://stackoverflow.com/questions/3448195/javascript-using-the-current-for-loop-counter-value-inside-a-function)

如果我运行下面的代码，第二个控制台日志输出只会重复第一个控制台日志输出的最后一行。

我理解这是因为所有嵌套的查询 2 都在其他所有操作完成后排队运行。此外，由于我们在函数中有一个函数，这会创建一个“闭包”，这意味着嵌套查询 2 只有一组变量，并且使用的是这些变量的最终状态，因此只有最后一个查询 1 的结果是多次用于查询 2。至少我认为这是正在发生的事情。问题是，我怎样才能改变它以便整个事情按顺序工作？

谢谢！

```
db.transaction(function(tx){

    //  Query 1                 
    tx.executeSql("SELECT * FROM Products GROUP BY ssrt55", [], function(tx, listResults){
        for (var i = 0; i < listResults.rows.length; i++) {
            var lineData = listResults.rows.item(i);
            var productDescriptionSQL = "select * from ProductDescriptions where bsrt56 = " + lineData['SSRT55'];
            console.log(productDescriptionSQL);

            //  Query 2
            tx.executeSql(productDescriptionSQL, [], function(tx, descriptionResults){
                console.log(productDescriptionSQL);                         
            }, onError);    

        }
    }, onError);

}); 
```

> ```
> First console log output
> select * from ProductDescriptions where bsrt56 = 1.00
> select * from ProductDescriptions where bsrt56 = 2.00
> select * from ProductDescriptions where bsrt56 = 2.50
> select * from ProductDescriptions where bsrt56 = 3.00
> select * from ProductDescriptions where bsrt56 = 4.00
> 
> Second console log output
> select * from ProductDescriptions where bsrt56 = 4.00 
> select * from ProductDescriptions where bsrt56 = 4.00 
> select * from ProductDescriptions where bsrt56 = 4.00 
> select * from ProductDescriptions where bsrt56 = 4.00 
> select * from ProductDescriptions where bsrt56 = 4.00 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T15:26:29.247

是的，这可行，如果您`console.log(productDescriptionSQL);`在查询 2 中替换为 say`loopdloop(tx, listResults)`以便创建新变量，则所有处理都可以在此函数中进行，并且在所有查询最后一起运行时不会被覆盖。

```
db.transaction(function(tx){

    tx.executeSql("SELECT * FROM Products GROUP BY ssrt55", [], function(tx, listResults){
        for (var i = 0; i < listResults.rows.length; i++) {
            var lineData = listResults.rows.item(i);
            //var lineData = listResults.rows[i].item[0];
            var productDescriptionSQL = "select * from HierarchyDescriptions where psrt56 = '" + lineData['SSRT55']+"'";
            console.log(productDescriptionSQL);

            tx.executeSql(productDescriptionSQL, [], function(tx, listResults){
                loopdloop(tx, listResults)
            }, onError);    

        }
    }, onError);

});

function loopdloop(tx, descResults){
    console.log(descResults.rows.length);
    for (var i = 0; i < descResults.rows.length; i++) {
        var descriptionData = descResults.rows.item(i);
        console.log(descriptionData['HDES56']);
    }
} 
```

谢谢@詹姆斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T16:36:58.113

尝试改变：

```
var lineData = listResults.rows.item(i); 
```

至：

```
var lineData = listResults.rows[i].item[0]; 
```

# java - PHP 和 Java hmac 哈希输出匹配十六进制，不匹配原始二进制。发生了什么？

> ID：12824108
> 
> 赞同：0
> 
> 时间：2012-10-10T16:28:07.163
> 
> 标签：java, php, character-encoding, hmac

我正在用 Java 开发一个游戏，该游戏将被打包为一个小程序，并且我正在研究网络方面。我设计了一个会话流，可以满足请求频率和安全需求，而不需要使用 SSL。数据传输过程松散地基于 facebook 签署其签名令牌与 OAuth 过程一起使用的方式。这是简化的上下文：

*   我的 php/java 实现使用 hash_hmac/javax.crypto.Mac 基于共享的、秘密的、唯一的令牌和不同的 JSON 有效负载生成一个模糊的签名来签署有效负载
*   两个输出必须完全匹配，因为它们是更大的编码/解码压缩方案的一部分
*   此签名将通过 URL 与有效负载一起传递，并用于验证有效负载的有效性和完整性

正如您可以推断的那样，如果它们不匹配，那么由于发送的数据无效，我已经丢弃了数据包和错误。我的问题是，**虽然结果的十六进制编码完美匹配，但原始二进制文件似乎永远不匹配**。以下是我设置的提取的 php 和 Java 测试用例：

*注意：由于 php 和 java 为 php 关联数组/java hashmaps 生成 JSON 结构的方式不同，我使用 secret 的值代替字符串有效负载，以便两个字段在平台之间保持一致。*

php：

```
$secret = "922ec205d8e4d0ea06079d60a5336fffd9cf0aea";
$json = $secret; //json_encode($test_array);
$hmac_a = hash_hmac('sha256',$json,$secret);
$hmac_b = hash_hmac('sha256',$json,$secret,$raw=true); 
echo(htmlentities($hmac_a)."<br/>\n");
echo(htmlentities($hmac_b)."<br/>\n"); 
```

浏览器内输出：

> ff21a9e468ac49863e5e992324ac8bc92f239a08100b0f329b087be16f5ad382
> 
> ÿ!©äh¬I†>^™#$¬‹É/#š2›{áoZÓ‚</p>

爪哇：

```
Mac hmac = Mac.getInstance("HmacSHA256");
SecretKeySpec secret_key = new SecretKeySpec(Charset.forName("UTF-8").encode(this.secret).array(), "HmacSHA256");
hmac.init(secret_key);
byte[] digest = hmac.doFinal(this.secret.getBytes("UTF-8"));
System.out.println(hexify(digest));
System.out.println(new String(digest,"UTF-8")); 
```

控制台输出：

> ff21a9e468ac49863e5e992324ac8bc92f239a08100b0f329b087be16f5ad382
> 
> �!��h�I�>^�#$���/#� 2� {�oZӂ

当复制到 php 并告诉回显时，第二个字符串如下所示：

> :ï¿½!ï¿½ï¿½hï¿½Iï¿½>^ï¿½#$ï¿½ï¿½ï¿½/#ï¿½ï¿½ï¿½2{ï¿½oZÓ,</p>

请注意，虽然十六进制相同，但二进制不同，但从相同来源显示时包含相同的结尾 (oZÓ‚ )。实际上，它按顺序包含所有更常见的字符 (!hI>^#$/#2{oZÓ,)。我尝试将控制台输出复制到 php，然后显示为二进制字符串、常规字符串、utf8_encode'd 二进制/常规字符串，以及 utf8_encode'ing $hmac_b。似乎没有什么可以使原始版本匹配。

我在 php 的 hmac 上运行了 mb_detect_encoding，它告诉我 UTF-8。我还将 javax.crypto.Mac 中的所有内容都设置为 UTF-8，并显示为 UTF-8，但没有骰子。*我知道 Java 的 UTF-8 与 php 的 UTF-8 没有什么不同，因为这违背了拥有标准字符集的概念。*这里发生了什么？

*注意：虽然我现在更喜欢并且能够使用十六进制版本进行 URL 编码，但我仍然想知道这个字符集废话是怎么回事，以及可能如何解决它。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T12:58:50.990

我不是Java专家，但看起来你正在做两件不同的事情......

您`htmlentities()`在 PHP 中使用，它正在将字符转换`ÿ`为`&yulm;`，而您的 Java 剪辑正在尝试转储 UTF-8 数据。

为什么您实际上希望在 HMAC 之后得到有效的 UTF-8 数据？UTF-8 用于表示 Unicode 字符，而不是随机散列。

在 PHP 中使用它：

```
$secret = "922ec205d8e4d0ea06079d60a5336fffd9cf0aea";
$json = $secret;
$hmac_a = hash_hmac('sha256',$json,$secret);
$hmac_b = hash_hmac('sha256',$json,$secret,$raw=true); 
echo $hmac_a . "\n";
echo $hmac_b . "\n"; 
```

我得到以下信息（在支持 UTF-8 的终端中）：

```
ff21a9e468ac49863e5e992324ac8bc92f239a08100b0f329b087be16f5ad382
�!��h�I�&gt;^�#$���/#2{�oZӂ 
```

这完全是意料之中的。`$hmac_b`实际上是二进制被解释为 UTF-8，因此它将充满无效的 UTF-8 序列。不要指望它是字符。您会更好地将其视为 ISO-8859-1 输出，它不是多字节的：

```
ff21a9e468ac49863e5e992324ac8bc92f239a08100b0f329b087be16f5ad382
ï¿½!ï¿½ï¿½hï¿½Iï¿½>^ï¿½#$ï¿½ï¿½ï¿½/#ï¿2ï¿{ï¿½oZÓ 
```

（该输出的末尾还有一个控制字符`\x82`）

关键是，您将梨包装中的苹果与橙子进行比较。

# mysql - 没有条件时，如何使查询不返回任何内容？

> ID：12824111
> 
> 赞同：-2
> 
> 时间：2012-10-10T16:28:20.017
> 
> 标签：mysql, sql

相当简单，我有一个一对多/多对一的关系，我想查询它。但是，当没有提供任何 WHERE 子句信息时，我不希望返回任何结果。

简而言之，如何使查询不贪婪？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T16:30:28.207

您可以添加一个始终为 false 的 where 子句，并附加您希望提供的条件 OR：

```
select * from table where 1 = 0 OR (real conditions) 
```

# java - 是否有依赖工件的 Maven“仅编译器”范围

> ID：12824112
> 
> 赞同：27
> 
> 时间：2012-10-10T16:28:21.523
> 
> 标签：java, maven, semantics

我意识到这更多是语义上的追求，而不是功能上的追求。

我有三种类型的编译范围依赖项：

1.  仅编译范围，不在运行时使用。GWT 客户端开发、MVP4G、RestyGWT、源保留注释处理器。我使用 REST，所以我不需要 GWT 服务器端。

2.  提供 - 编译所需的 Hibernate jar，但由 JBoss 提供。

3.  编译 + 运行时 jar。

对于案例 2，我们可以使用提供的范围。案例 3，我们将使用编译范围。

但是对于案例 1，我使用提供的范围，即使 JBoss 根本不提供这些文件。在运行时也不需要它们。

无论如何，你不认为 Maven 应该为除了编译时不需要人工制品的范围提供“提供”的同义词吗？也许，应该有一个“只编译”的范围吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-10T17:01:25.840

如果你只知道它的一半词汇，不要抱怨这种语言没有很好的区别。

如果依赖项仅用于构建，例如注释处理器，则它应该是 maven`<plugin>`或它的`<dependency>`。

否则，如果它在编译类路径中，则需要在运行时链接生成的类文件。那么，有两种情况：

1.  总是需要加载该类
    1.  该类应作为应用程序的一部分提供：`<scope>compile</scope>`
    2.  该类应由运行时环境提供：`<scope>provided</scope>`
2.  有时是必要的（因为该类仅在特定情况下才会加载）：`<optional>true</optional>`

唯一没有涉及的选项是编译 Java 程序，并且永远不会在 JVM 中运行它。这是一个非常晦涩的用例，我不能责怪 maven 的设计者不包括只是为了表达这种区别的范围 - 特别是因为它与 Maven 的核心职责（构建软件）无关。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-10T20:44:53.010

如果 jar 不是真正的“运行时”依赖项（仅用于构建）但不是最终工件，您可以通过各种方式排除它们：

1.  程序集描述符中的排除
2.  jar（或war、ear等）插件配置中的排除
3.  [Shade Plugin 最小化 jar](http://maven.apache.org/plugins/maven-shade-plugin/examples/includes-excludes.html)目标

我同意运送不必要的类很烦人（我已经在生产部署中看到了 junit 和 testng jar - brrrr ...），但出于所有实际目的，这是一个相当小的问题。

如果你有一个依赖冲突（即交付一个库或框架的“所有部门”版本），那就是另一回事了，但听起来不像你在这里所面临的。

# matlab - 这个 MATLAB 语句是什么意思？

> ID：12824113
> 
> 赞同：-5
> 
> 时间：2012-10-10T16:28:22.177
> 
> 标签：matlab

关于[文档页面`imopen`](http://www.mathworks.com/help/images/ref/imopen.html)上显示的以下 MATLAB 语句：

```
figure, imshow(I_opened, []) 
```

`figure`声明中的含义和`[]`含义是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T16:29:55.703

`figure()`创建一个新窗口。

关于您的其他问题 - 取自[手册](http://www.mathworks.com/help/images/ref/imshow.html)：

> imshow(I,[low high]) 显示灰度图像 I,... 如果使用空矩阵 ([]) 表示 [low high]，imshow 使用 [min(I(:)) max(I(:) )]; 即I中的最小值显示为黑色，最大值显示为白色

# java - Java：3D 绘图

> ID：12824114
> 
> 赞同：-1
> 
> 时间：2012-10-10T16:28:22.180
> 
> 标签：java, graphics, 3d

我一直在用 2D 绘图。我想通过学习 3D 绘图来扩展我的图形体验。
Graphics 有 3D 绘图潜力吗？
什么是初学者 3D 抽屉的好资源？
最后，Java 甚至是绘制 3D 的最佳资源吗？

谢谢大家，非常感谢任何和所有输入。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T16:33:53.280

Java 非常适合 3D。[它以JOGL](http://jogamp.org/jogl/www/)的形式与[openGL](http://www.opengl.org/)进行了低级绑定。这里有一个合适的入门[教程](http://www.cs.umd.edu/~meesh/kmconroy/JOGLTutorial/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-03T17:27:11.827

另一个选项可能是[Processing](https://www.processing.org/tutorials/p3d/)。

# android-layout - Google Play 使用什么布局？

> ID：12824115
> 
> 赞同：1
> 
> 时间：2012-10-10T16:28:40.533
> 
> 标签：android-layout, google-play, android-gridview

我使用 GridView 来显示图像。当滚动到 GridView 底部时，将加载更多图像并显示使用 notifydatasetChange()。
但是当 notifydatasetChange() 调用时，所有图像都会重新加载。我只想像 Google Play 一样将新图像添加到 GridView 负载。
在 Google Play 中，当我滚动到底部时，将加载并显示新的应用程序图标、价格、标题，而无需重新加载旧的应用程序图标。Google Play 是否使用 GridView 显示应用列表？有人知道该怎么做吗？

# powershell - 使用 Powershell 脚本以编程方式填充第三方登录屏幕

> ID：12824118
> 
> 赞同：1
> 
> 时间：2012-10-10T16:28:50.173
> 
> 标签：powershell

我有兴趣在我正在调试的程序上加快我的开发/测试工作流程。我正在使用 VB6 进行开发，并编写了一个 PS1 脚本来相应地移动我的 DLL，但我想更进一步。

我的测试工作流程包括打开由 ThirdPartyLoginScreen.exe 启动的具有登录屏幕的程序。有没有办法使用 PowerShell 以编程方式将登录信息传递给这个 EXE，或者我是否仅限于用 VB6 编写它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T18:29:48.750

如果您的脚本启动程序 ThirdPartyLoginScreen.exe，并且该程序出现在前台，那么执行此操作的轻量级方法是使用[SendKeys](http://msdn.microsoft.com/en-us/library/system.windows.forms.sendkeys.aspx)。

```
Add-Type -AssemblyName System.Windows.Forms

# start the program
ThirdParytLoginScreen.exe

# send keystrokes to the foreground window
[Windows.Forms.SendKeys]::SendWait('domain\username')
[Windows.Forms.SendKeys]::SendWait('{TAB}')
[Windows.Forms.SendKeys]::SendWait('p@ssw0rd1')
[Windows.Forms.SendKeys]::SendWait('{ENTER}') 
```

这是通过 powershell 进行基本 UI 自动化的最简单方法。它有许多缺点和限制，但它可能会帮助您在简单的场景中畅通无阻。

# objective-c - Objective-C：使用 isa 属性来确定变量是否已被释放

> ID：12824119
> 
> 赞同：0
> 
> 时间：2012-10-10T16:28:50.930
> 
> 标签：objective-c, ios

我有一个问题，变量被随机释放或损坏，我得到一个 NSInvalidArgumentException。它并不总是发生，但我能够在几次尝试后重现该问题。

我尝试了几种方法来检查属性是否是正确的类型，但没有成功。

这是一切正常时的变量 ![这是一切正常时的变量](../Images/61a64acf5bdc6b8c527231c4378cc910.png)

这是应用程序崩溃时的变量 ![这是应用程序崩溃时的变量](../Images/02f778942600deccd3d4d1a8f317d9d5.png)

我注意到“ **isa** = (Class)”部分现在返回错误而不是“CLLocation”，所以我正在尝试检查它，但它受到保护。

```
[fromPoint->isa isKindOfClass:[CLLocation class]] 
```

我已经在这里尝试了答案，但我仍然遇到异常。

[Objective c isKindOfClass 误解？](https://stackoverflow.com/questions/2045561/objective-c-iskindofclass-missunderstanding)

[Objective-C 中的 isa 指针](https://stackoverflow.com/questions/10998984/isa-pointer-in-objective-c)

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T16:33:28.327

看起来您有对已释放对象的引用。尝试使用`NSZombieEnabled=YES`. 通过打开*Product>Edit Scheme...*并在 Run 配置的“Environment Variables”中添加一行来设置它。

# entity-framework - LINQ to Entities 无法识别方法 'System.String ToString()' 方法，并且此方法无法转换为存储表达式

> ID：12824122
> 
> 赞同：2
> 
> 时间：2012-10-10T16:28:53.033
> 
> 标签：entity-framework, c#-4.0

我正在使用以下代码：

```
using(var sd=new dataEntities())
{
var listofdata=sd.users.where(d=>d.id.ToString().Contain("2"));// id as int
// error : LINQ to Entities does not recognize the method 'System.String ToString()' method, and this method cannot be translated into a store expression.
} 
```

我查看了该网站，但没有找到答案

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T16:31:28.260

您需要使用 SQL 函数来转换 ToString 方法。

```
SqlFunctions.StringConvert((double)id) 
```

在这里回答： [在 Linq 中将 int 转换为字符串到实体的问题](https://stackoverflow.com/questions/1066760/problem-with-converting-int-to-string-in-linq-to-entities)

# php - 根据客户端输入对 MySQL 结果进行排序

> ID：12824129
> 
> 赞同：0
> 
> 时间：2012-10-10T16:29:17.340
> 
> 标签：php, mysql

好的，所以我环顾四周并自己玩过它，但我似乎无法让它发挥作用。甚至几乎没有。我想要做的是，我有一个包含项目列表的数据库，这些项目将在未来某个日期到期。我想要一个日期选择框，您可以在其中选择日历的日期（我可以实现），但只显示到期日期早于该日期的记录。因此，如果我的日期范围是从今天到明年 9 月，并且我选择 2012 年 12 月 15 日，我将只会看到过期日期在今天和 2012 年 12 月 15 日之间的记录。任何帮助将不胜感激。

我会发布一些代码，但我什至没有什么能接近实现这一目标。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T17:22:01.813

SQL 应该是这样的，如果这不起作用，请设置一个 sqlfiddle 并至少给我们一个您的数据示例。

```
SELECT *
FROM Table
WHERE ExpirationDate BETWEEN Date1 AND Date2 
```

# c - 良好实践 - 在函数终止时有很多事情要做 - goto 替代

> ID：12824130
> 
> 赞同：1
> 
> 时间：2012-10-10T16:29:17.450
> 
> 标签：c, goto

> **可能重复：**
> [在 C 中有效使用 goto 进行错误管理？](https://stackoverflow.com/questions/788903/valid-use-of-goto-for-error-management-in-c)

最近我遇到了这样的C代码：

```
if( !condition1){
    goto failure;
}

some_stuff_that_needs_manual_undoing();

if( !condition2){
    goto failure;
}

// And many more lines such as the ones above
return 0;

failure:
// Do a lot of stuff here, free, file closing and so on
return -1; 
```

总结一下情况：

我有一个很长的函数，可以连续做几件事（比如说打开一个文件，然后根据文件内容分配内存，然后连接数据库等等）。当然我想正确地释放资源，但是有很多地方会导致函数过早结束（并且所有这些都需要清理）。

问题：**如何正确地做到这一点？**

虽然`goto` [这似乎不是那么糟糕的做法](https://stackoverflow.com/a/3105910/1149736)，但它[似乎也不是一个好的解决方案](http://xkcd.com/292/)。

我虽然如下：

### 使用可以完成这项工作的宏，例如：

```
#define CLEANUP if( memory != NULL)free(memory); \
                if( fp != NULL) fclose(fp);\
                // ...

if( !condition1){
    CLEANUP
    return -1;
}

if( !condition2){
    CLEANUP
    return -2;
}

// ... 
```

这将导致重复的程序集，但清理代码将在一个地方。

### 将函数封装到另一个函数中

```
int _some_stuff_do_work(void **memory, FILE **file, ...){
    // Would just return on error
}

int some_stuff() {
    void *memory = NULL;
    FILE *file = NULL;

    _some_stuff_do_work( &memory, &file, ...);
    if( fp) fclose(fp);
} 
```

如果需要清理的东西超过 3-5 件，这可能会变得非常难看（该函数将接受许多参数，并且总是会出现问题）。

### OOP - 析构函数

```
typedef struct {
    void *memory;
    FILE *fp;
} LOCAL_DATA;

// Destructor
void local_data_destroy( LOCAL_DATA *data)
{
    if( data->fp){
        free(data->fp);
        data->fp = NULL;
    }
} 
```

但这可能会导致许多功能（和结构）在整个应用程序中只使用一次，并且似乎它会产生大量的东西。

### 循环和中断语句

```
while(1){
    if( !condition1){
       break;
    }

    // ...

    break;
}

if( fp) fclose(fp); 
```

我在可能的地方发现了这个但使用一个迭代循环？我不知道，这似乎完全不直观。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T16:48:04.737

Goto是要走的路。首先了解为什么“goto 很糟糕”，然后你会发现在你描述的情况下 goto 并不是很糟糕。不惜一切代价避免 goto 是错误的，它源于对良好编程原则的浅薄理解。

这是要走的路（Linux内核源代码）：http: [//goo.gl/uSgp5](http://goo.gl/uSgp5)

# c - 尽管包含 math.h，但在 C 中未定义对 pow() 的引用

> ID：12824134
> 
> 赞同：118
> 
> 时间：2012-10-10T16:29:23.033
> 
> 标签：c

> **可能重复：**
> [在 C 中使用 pow() 的问题](https://stackoverflow.com/questions/4174080/problem-using-pow-in-c)
> [是“未定义的对‘pow’的引用”](https://stackoverflow.com/questions/10167714/what-is-undefined-reference-to-pow)

我对一个简单的大学课程作业有点问题，这让我很困惑。

本质上，我必须编写一个程序，除其他外，根据给定半径计算球体的体积。我以为我会使用该`pow()`函数而不是简单地使用`r*r*r`, 以获得额外的布朗尼积分，但编译器不断给我以下错误：

> 未定义对“pow”collect2 的引用：错误：ld 返回 1 个退出状态

我的代码如下所示：

```
#include <math.h>

#define PI 3.14159265 //defines the value of PI

/* Declare the functions */
double volumeFromRadius(double radius);

/* Calculate the volume of a sphere from a given radius */
double volumeFromRadius(double radius) {
    return (4.0/3.0) * PI * pow(radius,3.0f);
} 
```

我正在用命令编译`gcc -o sphere sphere.c`

这在 uni 的 Windows 机器上的 code::blocks 中编译并运行良好，但在我家里的 Fedora 17 上，命令行编译器拒绝运行。任何想法将不胜感激！

祝福，伊恩

* * *

## 回答 #1

> 赞同：248
> 
> 时间：2012-10-10T16:30:06.850

您需要与数学库链接：

```
gcc -o sphere sphere.c -lm 
```

您看到的错误：`error: ld returned 1 exit status`来自链接器`ld`（组合目标文件的 gcc 的一部分），因为它无法找到函数`pow`的定义位置。

包括`math.h`引入各种函数的声明而不是它们的定义。def 存在于数学库`libm.a`中。您需要将您的程序与此库链接，以便解决对 pow() 等函数的调用。

# javascript - PHP 表单验证 - 添加验证复选框

> ID：12824139
> 
> 赞同：3
> 
> 时间：2012-10-10T16:29:36.887
> 
> 标签：javascript, forms, validation

我正在使用本教程尝试制作表单[http://www.javascript-coder.com/html-form/javascript-form-validation.phtml](http://www.javascript-coder.com/html-form/javascript-form-validation.phtml)

我的表单效果很好，但我包含了 3 个复选框，我希望用户在提交之前勾选这些复选框。创建这个验证让我整天摸不着头脑！

我试过制作这些自定义字段，但我很确定我的语法是错误的。我在这里已经超出了我的深度！本教程提供了我尝试实现的示例，但编码差异太大，无法在我的表单上使用。这是我尝试过的：

```
<input type="checkbox" name="checkbox1" id="checkbox1" />
<label for="checkbox" value='<?php echo $formproc->SafeDisplay('email') ?>'</label><label for='Please tick the box before pressing submit' > 
```

然后在表单之后，在脚本中添加：

```
frmvalidator.addValidation("checkbox1","checkbox1","Please tick the box before pressing submit"); 
```

表单仍然提交，但我的验证没有发生。如果有人能指出我正确的方向，那真是不可思议。

我不确定发布我正在处理的实际页面是否已完成，因为它是我的客户网站？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T16:35:29.303

它在文档中。

```
frmvalidator.addValidation("checkbox1","shouldselchk=on"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T16:38:51.390

First you need to give **value to your checkbox** as below

```
<input type="checkbox" name="checkbox1" id="checkbox1" value="1"/> 
```

Then, you need to pass **type of validation in second argument** of addValidation function as below

```
frmvalidator.addValidation("checkbox1","shouldselchk=1"); 
```

# javascript - 我应该使用 JavaScript 解析 XML 还是使用 CSS 来显示它

> ID：12824141
> 
> 赞同：1
> 
> 时间：2012-10-10T16:29:39.693
> 
> 标签：javascript, jquery, xml, parsing

我正在构建一个 Winform 网络浏览器。我有一个`history.xml`存储浏览器历史记录的文件。我需要在浏览器窗口中显示它，以便用户可以单击网站的超链接并进行导航。我想使用 JavaScript 来解析 XML 文件并以表格形式显示内容。如何使用 JS 解析 XML？我不确定在这种情况下使用什么。我已经有一个很好的带有 CSS 的 HTML 页面来显示历史记录。请指教。

我的 XML 文件看起来像这样。

```
<?xml version="1.0" encoding="utf-8"?>
<browsing>
  <history date="08/10/2012">
    <url>http://www.google.ca/</url>
    <time>12:52 AM</time>
  </history>
  <history date="08/10/2012">
    <url>http://www.facebook.com/</url>
    <time>12:53 AM</time>
  </history>
  <history date="08/10/2012">
    <url>http://ca.msn.com/</url>
    <time>9:51 PM</time>
  </history>
</browsing> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T16:34:31.900

使用 jQuery 的 $.get()。

```
$.get("history.xml", function(xml) {
  $(xml).find("history:nth(0)").find("url").val(); // returns http://www.google.ca/
  $(xml).find("history:nth(1)").getAttribute("date"); // returns 08/10/2012
}, "xml"); 
```

编辑：当我写这个答案时，你的帖子被编辑了。要以表格形式显示它，使用[XSLT](http://w3schools.com/xsl/default.asp)可能更容易。它专为设计 XML 样式而设计。

# jsp - 如何让我的 JSP 在 Spring MVC 中找到我的 CSS 文件？

> ID：12824144
> 
> 赞同：1
> 
> 时间：2012-10-10T16:29:56.497
> 
> 标签：jsp, spring-mvc

我对 Web 开发比较陌生，我正在尝试在 WebLogic 10.3.4 上使用 Spring MVC 3.0.5 开发 Web 应用程序。

我希望我的 JSP 使用外部 CSS 文件。例如，我有一个 JSP 文件，其中包含以下内容：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>

<LINK href="${pageContext.request.contextPath}/resources/css/ptostyles.css" rel="stylesheet" type="text/css">

<title>Register</title>
</head> 
```

不幸的是，CSS 文件似乎没有被加载。我试过把它放在不同的地方。当前目录结构如下所示：

![在此处输入图像描述](../Images/71cf536c73b1618c7452e3c1ba3c1ed6.png)

我的 web.xml 的相关部分包括：

```
<servlet>
    <servlet-name>springDispatcher</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/config/spring-context.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>springDispatcher</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping>

<servlet>
    <servlet-name>Resource Servlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.ResourceServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>Resource Servlet</servlet-name>
    <url-pattern>WebContent/*</url-pattern>
</servlet-mapping> 
```

任何建议，包括调试策略，将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T19:32:26.107

我通过执行以下操作设法访问了我的 CSS：

1.  根据 Sean 的建议，我将资源文件夹直接移动到 WebContent 下
2.  我注释掉了 web.xml 中涉及 ResourceServlet 的部分。
3.  我将以下行添加到 spring-context.xml

    ```
    <mvc:resources mapping="/resources/**" location="/resources/" /> 
    ```

本文[讨论](http://forum.springsource.org/archive/index.php/t-102166.html)了可能适用于 WebLogic 部署的一些其他问题和解决方法。Spring 3.0.5 的实现中似乎存在一个[错误，可能会导致传递静态资源的问题。](https://jira.springsource.org/browse/SPR-8461)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T16:58:53.330

WEB-INF 文件夹下的任何内容均不公开。当浏览器请求您的 CSS 文件时，他们看不到 WEB-INF 文件夹的内部。

尝试将资源/css 文件夹放在 WebContent 下。

文件夹结构将是

```
WebContent
   META-INF
   WEB-INF
      ...
   resources
      css
        ptostyles.css 
```

# mysql - 没有条件时，如何使查询不返回任何内容？

> ID：12824145
> 
> 赞同：0
> 
> 时间：2012-10-10T16:29:57.460
> 
> 标签：mysql, sql, doctrine-1.2

> **可能重复：**
> [当没有条件时，如何使查询不返回任何内容？](https://stackoverflow.com/questions/12824111/how-do-i-make-a-query-return-nothing-when-there-are-no-conditions)

如果我有一个查询，我不希望在没有提供任何 WHERE 子句信息的情况下返回任何结果。

简而言之，如何使查询不贪婪？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T16:33:08.777

我认为这对你有用：

```
SELECT *
FROM Table
WHERE 1=0
OR (some other criteria) 
```

# extjs4 - Sencha Touch 2 现场对焦

> ID：12824153
> 
> 赞同：0
> 
> 时间：2012-10-10T16:30:24.360
> 
> 标签：extjs4, sencha-touch-2

有谁知道与 ExtJS4 等效的 Sencha Touch 2：

```
form.getForm().findField("myfield"); 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T17:59:32.787

使用 form.getValues(); 假设您可以获得表单元素...如果您需要这样做，请使用 refs... 现在在我的移动设备上，如有必要，我可以稍后发布更多示例代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T22:57:55.837

我用这种方式：
`var field = vorm.down("textfield[name=username]");`

例子：
`form.down("selectfield[name=username]").setLabel('User');` `form.down("selectfield[name=username]").setValue('email@te');` `form.down("selectfield[name=username]").setPlaceHolder('email@test.com');`

# wpf - 如何在 WPF 中创建透明的用户控件？

> ID：12824154
> 
> 赞同：4
> 
> 时间：2012-10-10T16:30:25.257
> 
> 标签：wpf, user-controls, wpf-controls, transparency

我有一个 WPF 应用程序，其上放置了一个用户控件的图像。我希望用户控件背景是透明的，但该用户控件上的按钮等是实心的。

下图显示了我现在所拥有的。我希望红色区域的内部是透明的（用户控件理论上可以是许多不同的形状），但其中包含的控件是实心的。

![在此处输入图像描述](../Images/b09d7ec73ba731867b5ad0fce22672b0.png)

主窗口 XAML 是；

```
<Canvas Height="450" Width="300">
    <Border Opacity=".2" >
        <Image Source="D:\\BarbourCoat.jpg" Width="300" ></Image>
    </Border>
    <local:UserControl1 Height="100" Canvas.Left="10" Canvas.Top="10" Width="100"/>
</Canvas> 
```

虽然用户控件 XAML 是；

```
<Canvas Background="Transparent">
    <Path Data="M 10 10 L 100 10 L 250 50 L 280 200 L 180 250 L 25 270 Z" Stroke="Red"></Path>
    <Button Content="Button" HorizontalAlignment="Left" Margin="41,53,0,0" VerticalAlignment="Top" Width="75"/>
    <TextBox HorizontalAlignment="Left" Height="23" Margin="90,112,0,0" TextWrapping="Wrap" Text="TextBox" VerticalAlignment="Top" Width="120"/>
    <TextBlock HorizontalAlignment="Left" Margin="69,209,0,0" TextWrapping="Wrap" Text="TextBlock" VerticalAlignment="Top"/>
</Canvas> 
```

我很难理解这一点，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T16:45:20.477

在 XAML 中，您是否使整个 UserControl 透明？

`<UserControl Background="Transparent">`

# c# - 你如何迭代任意数量的列表，包括每个排列？

> ID：12824156
> 
> 赞同：6
> 
> 时间：2012-10-10T16:30:28.067
> 
> 标签：c#, iteration

例如，如果我有两个列表，我会这样做：

```
foreach (Item item1 in lists[0])
  foreach (Item item2 in lists[1])
    // Do something with item1 and item2 
```

或者如果我有三个，我会做

```
foreach (Item item1 in lists[0])
  foreach (Item item2 in lists[1])
    foreach (Item item3 in lists[2])
      // Do something with item1, item2, and item3 
```

但是如果我在编译时不知道`lists`集合中有多少个列表，我怎样才能轻松地迭代每个排列？

AC# 解决方案是理想的，但任何演示合适算法的语言的解决方案都会很方便。

一个好的二维示例是电子表格上的列列表和行列表，我需要在其中对每个单元格进行处理。然而，这是一个 n 维问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T16:50:42.277

Eric Lippert有一篇关于这个主题的[精彩文章。](http://blogs.msdn.com/b/ericlippert/archive/2010/06/28/computing-a-cartesian-product-with-linq.aspx)

我*强烈*建议阅读这篇文章，因为它描述了您可以得出结果的过程，但最后生成的代码简短而甜蜜：

（从链接逐字复制）

```
static IEnumerable<IEnumerable<T>> CartesianProduct<T>(this IEnumerable<IEnumerable<T>> sequences) 
{ 
  IEnumerable<IEnumerable<T>> emptyProduct = new[] { Enumerable.Empty<T>() }; 
  return sequences.Aggregate( 
    emptyProduct, 
    (accumulator, sequence) => 
      from accseq in accumulator 
      from item in sequence 
      select accseq.Concat(new[] {item})); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T16:45:20.380

```
 public static IEnumerable<T[]> IterateOverLists<T>(this IList<IEnumerable<T>> lists )
    {
        var array = new T[lists.Count];
        return IterateOverLists( lists, array, 0 );
    }
    private static IEnumerable<T[]> IterateOverLists<T>(this IList<IEnumerable<T>> lists, T[] array, int index)
    {
        foreach (var value in lists[index])
        {
            array[index] = value;
            if (index == lists.Count - 1)
            {
                // can make a copy of the array here too...
                yield return array;
            }
            else
            {
                foreach (var item in IterateOverLists(lists, array, index + 1))
                {
                    yield return item;
                }
            }
        }
    } 
```

如果你的一个列表是空的，它会杀死整个事情，但你应该能够解决这个问题......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T16:33:51.130

```
for (int i = 0; i < lists.Length; i++) {
    foreach (Item item in lists[i]) {
       ....
    }
} 
```

# php - Zend 数据映射器设计

> ID：12824162
> 
> 赞同：1
> 
> 时间：2012-10-10T16:31:02.863
> 
> 标签：php, zend-framework, design-patterns, datamapper

我正在使用 Zend 框架并遵循将数据层与域层分离的设计模式，在实现数据映射器的方法时会出现问题，因此我`save()`根据域模型是否包含 id 属性和`find()`返回值来实现插入和更新基于 id 参数的记录域对象但是如果我需要怎么办

1.  搜索表中的所有/某些行并返回所有列
2.  搜索相同的行并返回一个 mysql COUNT 值

我应该直接使用继承 Zend_Db_Table_Abstract 的类来满足这些需求，还是应该为每个需求实现方法？

我对如何划分适合我的需求和未来需求的数据映射器的功能有点困惑

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T18:52:31.870

您可以添加单独的查找器方法，例如

```
class PersonMapper
{
    … // other code

    public function findByLastName()
    {
        // … fetch rowset and map them
    }

    public function countByLastName() 
    {
    … 
```

但是，当您需要查询多个列或想要通过任意条件处理 CRUD 时，这将很快失控。你不想要像这样的方法

```
 public function findByLastNameAndBirthdayAndMaritalStatus() 
```

简单的解决方案是使用`Zend_Db_Table_Select`创建查询，然后将它们传递给 Data Mapper 以执行和映射它们，例如在您的 DataMapper

```
public function getSelect()
{
    return $this->personTable->select();
}

public function findBy(Zend_Db_Table_Select $select)
{
    $people = $this->personTable->fetchAll($select);
    // map people to People objects
} 
```

您可以使用 Mapper 返回并接受 PersonQueryBuilder 来进一步抽象这一点，这会将 SQL 语义隐藏在里面，让您改为针对您的域对象进行指定。不过还是比较费力。

还可以查看存储库和规范模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T10:16:09.333

尽管 Gordon 很可能有正确的答案，但我发现它目前对我的品味和需求来说过于复杂。

我为我的所有域映射器使用了一个基映射器类，并且我将尽可能多的功能放入基类中。

我使用按列查找的方法，该方法在我的所有映射器中都运行良好：

```
//from abstract class Model_Mapper_Abstract

//The constructor of my base class accepts either a dbtable model
// or the name of a table stored in the concrete mapper tablename property. 
 public function __construct(Zend_Db_Table_Abstract $tableGateway = null)
    {   
        if (is_null($tableGateway)) {   
            $this->tableGateway = new Zend_Db_Table($this->tableName);
        } else {    
            $this->tableGateway = $tableGateway;
        }
    }
/**
 * findByColumn() returns an array of entity objects
 * filtered by column name and column value.
 * Optional orderBy value.
 *
 * @param string $column
 * @param string $value
 * @param string $order optional
 * @return array of entity objects
 */
public function findByColumn($column, $value, $order = null)
    {
        //create select object
        $select = $this->getGateway()->select();
        $select->where("$column = ?", $value);
        //handle order option
        if (!is_null($order)) {
            $select->order($order);
        }
        //get result set from DB
        $result = $this->getGateway()->fetchAll($select);
        //turn DB result into domain objects (entity objects)
        $entities = array();
        foreach ($result as $row) {
            //create entity, handled by concrete mapper classes
            $entity = $this->createEntity($row);
            //assign this entity to identity map for reuse if needed
            $this->setMap($row->id, $entity);
            $entities[] = $entity;
        }
        //return an array of entity objects
        return $entities;
    } 
```

我希望你觉得这至少作为一个想法生成器很有用。此外，如果您希望在与此类似的方法中实现语句，则在构建 select( [) 时使用 Zend_Db_Expr()](http://framework.zend.com/manual/1.12/en/zend.db.select.html#zend.db.select.building.columns-expr)`SQL Count()`会更容易。

# spring - Spring data jpa 添加过滤器/拦截器

> ID：12824173
> 
> 赞同：2
> 
> 时间：2012-10-10T16:31:51.703
> 
> 标签：spring, spring-data, spring-data-jpa

我以前使用过hibernate，并成功添加了一个过滤器，该过滤器将拦截保存，实现某个接口的实体将记录一些内容。

是否可以在新的 Spring Data 中做类似的事情，我刚刚开始使用它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T16:54:17.227

是的，您始终可以使用弹簧数据添加过滤器/拦截器

下面是一个例子：

```
<bean id="customizableTraceInterceptor" class="
  org.springframework.aop.interceptor.CustomizableTraceInterceptor">
  <property name="enterMessage" value="Entering $[methodName]($[arguments])"/>
  <property name="exitMessage" value="Leaving $[methodName](): $[returnValue]"/>
</bean>

<aop:config>
  <aop:advisor advice-ref="customizableTraceInterceptor"
    pointcut="execution(public * org.springframework.data.jpa.repository.JpaRepository+.*(..))"/>
</aop:config> 
```

参考：[http ://static.springsource.org/spring-data/data-jpa/docs/current/reference/html/](http://static.springsource.org/spring-data/data-jpa/docs/current/reference/html/)

# android - android 字符串数组项属性

> ID：12824175
> 
> 赞同：1
> 
> 时间：2012-10-10T16:31:58.823
> 
> 标签：android

我有这样的字符串数组：

```
<resources xmlns:android="http://schemas.android.com/apk/res/android">
<string-array name="my_videos">
    <item>bunny.mp4</item>
    <item>bunny.m4a</item>
    <item>bunny.3gp</item>
</string-array> 
```

在我的应用程序中，我有这个：

```
String product = ((TextView) view).getText().toString(); 
```

现在我想放一些像这样的普通文本：

```
<resources xmlns:android="http://schemas.android.com/apk/res/android">
<string-array name="my_videos">
    <item name="bunny.mp4">Movie description 1</item>
    <item name="bunny.m4a">Movie description 2</item>
    <item name="bunny.3gp">Movie description 3</item>
</string-array> 
```

现在我想访问名称属性而不是获取文本。我是 Android 新手，不知道这是否可行。

请帮忙。

# c++ - 可移动但不可复制的异常

> ID：12824176
> 
> 赞同：3
> 
> 时间：2012-10-10T16:32:00.423
> 
> 标签：c++, exception, c++11

我正在考虑编写不可复制的异常类。我觉得这很有趣，因为这样我就不必担心在复制构造函数中分配期间可能引发的异常。如果异常对象的创建成功，一切都很好，应该没有问题`std::terminate`。

```
struct exception
{
    exception() = default;
    exception(const exception&) = delete;
    exception(exception&&) noexcept = default;
    ~exception() noexcept = default;
    auto operator=(const exception&) -> exception& = delete;
    auto operator=(exception&&) noexcept -> exception& = delete;
};

int main()
{
    try {
        try {
            throw exception{};
        } catch (...) {
            std::rethrow_exception(
                std::current_exception());
        }
    } catch (const exception& e) {
        return 1;
    }
} 
```

GCC-4.7 和 Clang-3.2 接受上述代码。不过，我有点惊讶。据我所知，有几种情况可能会复制异常对象，`std::current_exception()`例如`std::rethrow_exception()`.

**问题：**以上代码按照C++11是否正确，即所有符合C++11的编译器都可以接受吗？

*编辑：*添加`std::rethrow_exception`到`std::current_exception`示例中。两个编译器都接受这个版本。这应该清楚地表明，如果编译器在引发异常时不需要复制构造函数，那么在使用这两个函数时编译器将不需要复制构造函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T16:45:28.057

`current_exception`说它指的是当前异常或它的副本，但没有说是哪个。这向我表明：

*   未指定是否复制[*]
*   因此，您的异常类不好（如果有人可能会调用`current_exception`它，肯定不是）
*   因此，它在某些实现中起作用也就不足为奇了。除非实施者有要求或希望实施者避免复制，否则可能不会有不复制*当前*例外的规定。

只是扔东西并通过参考抓住它就可以了。表达式中的临时`throw`变量“用于初始化”实现所使用的对象以保持当前异常，因此可以移动或复制它（根据类支持），并且可以省略移动/复制。

对于它的价值，`make_exception_ptr`被指定为*始终*复制。您可能会争辩说这是一个缺陷：`e`可以是一个按值参数，在这种情况下移动可能会更好。但这是我的浮躁和无知的印象，我以前从未见过这些功能。

[*] 是否`current_exception`“每次调用时创建一个新副本”是明确未指定的，但我不确定这是否意味着它是否在第一次调用时创建一个新副本是未指定的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T18:32:52.093

> 不过，我有点惊讶。据我所知，有几种情况可能会复制异常对象，`std::current_exception()`例如`std::rethrow_exception()`.

但你不打电话给他们中的任何一个。该标准非常清楚异常对象是如何初始化的。从 15.1，p3：

> throw-expression 初始化一个临时对象，称为异常对象，其类型通过从 throw 操作数的静态类型中删除任何顶级 cv-qualifier 并从“T 数组”中调整类型来确定，或者“函数返回 T”分别指向“指向 T 的指针”或“指向返回 T 的函数的指针”。临时值是一个左值，用于初始化匹配处理程序 (15.3) 中命名的变量。如果异常对象的类型是不完整类型或指向除（可能是 cv 限定的）void 以外的不完整类型的指针，则程序格式错误。除了这些限制和 15.3 中提到的类型匹配限制之外，throw 的操作数在调用 (5.2.2) 或 return 语句的操作数中被完全视为函数参数。

简而言之，它就像按值返回类型：返回值/异常对象由您提供的表达式初始化。因为您使用的表达式是临时的，所以它的行为就像从函数返回一个临时并调用移动构造函数。当然，这很可能会被忽略，但这就是 15.1, p5 的意义所在：

> 当抛出的对象是类对象时，复制/移动构造函数和析构函数应该是可访问的，即使复制/移动操作被省略（12.8）。

这对于返回值也是如此：在适当的情况下，通过复制/移动初始化来初始化返回值。因此，适当的构造函数必须是可访问的，即使它们被省略了。

您不能以需要复制构造异常对象的方式抛出异常类。所以你不能抛出左值；你只能抛出一个prvalue或一个xvalue。

标准中没有任何地方说允许系统无缘无故地*任意复制异常。*调用`std::current_exception`可能会复制它。调用`std::rethrow_exception`可能会复制它。

但是如果你不调用显式复制你的异常对象的东西，C++ 就*不允许*这样做。

# mysql - 将新的行集添加到现有查询的结果集中

> ID：12824177
> 
> 赞同：0
> 
> 时间：2012-10-10T16:32:04.710
> 
> 标签：mysql, sql, join, sql-order-by

这是查询中使用的表：

帮助（相关字段：id、id_user）

![在此处输入图像描述](../Images/82a98959ef326a283b52a5ecffe81a45.png)

朋友们

![在此处输入图像描述](../Images/e0e9eaf472284f502ce7715abdc0de93.png)

SHARED_HELPS

![在此处输入图像描述](../Images/9bb0c9b5dcad5dc60d5457f55ae19d18.png)

所以：

此查询（有效）返回用户的所有帮助以及他引用的其他用户的所有帮助：

```
$sql = 'SELECT
                      helps.*,CASE WHEN shared_helps.userid IS NULL THEN 0 ELSE shared_helps.userid END as is_shared, CASE WHEN shared_helps.userid IS NULL THEN helps.fecha ELSE shared_helps.fecha END as ffecha
                    FROM
                      helps
                    LEFT JOIN  shared_helps
                        ON  shared_helps.helpid = helps.id
                        AND shared_helps.userid = '.$value.'

                    WHERE     (helps.id_user = '.$value.' AND helps.id_group <= 0)  OR shared_helps.userid = '.$value.'

                   ORDER BY ffecha DESC'; 
```

此外，此查询（有效）列出了用户的所有帮助以及他的朋友的帮助

```
$sql = 'SELECT  id, title, content, id_user, id_group, id_type, id_loc, avatar, attached, fecha, likes, lan, needsCount, recivedCount
                    FROM
                        (
                            SELECT *, 1 as OrderBy           
                                FROM helps 
                             WHERE id_user = '.$value.' or id_user IN (SELECT helpid FROM shared_helps WHERE userid = '.$value.')
                            UNION
                            SELECT  h.*, 2 as OrderBy        
                                 FROM    (
                                        SELECT  id  AS friendsId,
                                                CASE followerid 
                                                    WHEN '.$value.' THEN followingid 
                                                    ELSE followerid 
                                                END AS friend_id
                                        FROM    friends
                                        WHERE   acepted = 1 AND 
                                                (followerid  ='.$value.' OR followingid = '.$value.')
                                    ) AS f
                                        INNER JOIN helps AS h 
                                            ON h.id_user = f.friend_id where id_group < 0
                        ) x
                    ORDER BY ID DESC
                    '; 
```

问题是最后一个，我需要添加来自其他用户但他引用的那些（就像我发布的两个查询的混合......）

我试过这个：

```
$sql = 'SELECT  id, title, content, id_user, id_group, id_type, id_loc, avatar, attached, fecha, likes, lan, needsCount, recivedCount,
                            CASE WHEN shared_helps.userid IS NULL THEN helps.fecha ELSE shared_helps.fecha END as ffecha
                    FROM
                        (
                            SELECT *, 1 as OrderBy           
                                FROM helps 
                             WHERE id_user = '.$value.' or id_user IN (SELECT helpid FROM shared_helps WHERE userid = '.$value.')
                            UNION
                            SELECT  h.*, 2 as OrderBy        
                                 FROM    (
                                        SELECT  id  AS friendsId,
                                                CASE followerid 
                                                    WHEN '.$value.' THEN followingid 
                                                    ELSE followerid 
                                                END AS friend_id
                                        FROM    friends
                                        WHERE   acepted = 1 AND 
                                                (followerid  ='.$value.' OR followingid = '.$value.')
                                    ) AS f
                                        INNER JOIN helps AS h 
                                            ON h.id_user = f.friend_id where id_group < 0
                        ) x
                    LEFT JOIN  shared_helps
                            ON  shared_helps.helpid = x.id
                            AND shared_helps.userid = '.$value.'

                        WHERE     (x.id_user = '.$value.' AND helps.id_group <= 0)  OR shared_helps.userid = '.$value.'

                    ORDER BY ffecha DESC
                    '; 
```

但我得到了：

```
Column 'id' in field list is ambiguous 
```

但这显然超出了我的知识范围。任何人都可以告诉我灯光吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T16:35:29.823

如果我没记错的话，你需要指定`ID`它来自哪里，因为所有表都有 column `ID`。

尝试添加 tableName `Helps`，因为它包含在子查询中`x`

所以在你的查询中，

```
SELECT x.ID, ....
FROM...
WHERE .... 
```

# php - Symfony2 生产环境：由于在链配置中找不到自定义用户类导致映射异常

> ID：12824179
> 
> 赞同：2
> 
> 时间：2012-10-10T16:32:08.883
> 
> 标签：php, symfony, doctrine-orm, symfony-2.1

我正在开发一个有点复杂的基于 Symfony2.1 的应用程序，连接到两个不同的数据库（有两个实体管理器，一个连接到 Oracle，另一个连接到 PostgreSQL）和一个自定义用户类（使用自定义密码编码器）。

我已经设法让它在开发环境中正确运行，但是每当我尝试在生产环境中运行它时，我都会收到下一个错误：

**Doctrine\Common\Persistence\Mapping\MappingException：在链配置的命名空间中找不到类“MyFirm\UserManagerBundle\Entity\User”（未捕获的异常）**

我在 app/config/security.yml 中的安全性和编码器：

```
security:
  encoders:
    MyFirm\UserManagerBundle\Entity\User:
        id: myfirm_usermanager.password_encoder

  providers:
    user_db:
        entity: 
            class: MyFirm\UserManagerBundle\Entity\User
            property: username 
```

app/config/config.yml 中的教义.orm 部分：

```
doctrine:
  orm:
    auto_generate_proxy_classes: %kernel.debug%
    default_entity_manager: user_config_db 
    entity_managers:
        event_db:
            connection:   event_db
            mappings:
                MyFirmEventManagerBundle: ~
        user_config_db:
            connection:   user_config_db
            mappings:
                MyFirmUserManagerBundle:  ~ 
```

最后，这是最终的异常日志：

```
Exception trace:
 () at C:\SF2_project\vendor\doctrine\common\lib\Doctrine\Common\Persistence\Mapping\MappingException.php:38
 Doctrine\Common\Persistence\Mapping\MappingException::classNotFoundInNamespaces() at C:\SF2_project\vendor\doctrine\common\lib\Doctrine\Common\Persistence\Mapping\Driver\MappingDriverChain.php:114
 Doctrine\Common\Persistence\Mapping\Driver\MappingDriverChain->loadMetadataForClass() at C:\SF2_project\vendor\doctrine\orm\lib\Doctrine\ORM\Mapping\ClassMetadataFactory.php:112
 Doctrine\ORM\Mapping\ClassMetadataFactory->doLoadMetadata() at C:\SF2_project\vendor\doctrine\common\lib\Doctrine\Common\Persistence\Mapping\AbstractClassMetadataFactory.php:302
 Doctrine\Common\Persistence\Mapping\AbstractClassMetadataFactory->loadMetadata() at C:\SF2_project\vendor\doctrine\common\lib\Doctrine\Common\Persistence\Mapping\AbstractClassMetadataFactory.php:205
 Doctrine\Common\Persistence\Mapping\AbstractClassMetadataFactory->getMetadataFor() at C:\SF2_project\vendor\doctrine\orm\lib\Doctrine\ORM\EntityManager.php:268
 Doctrine\ORM\EntityManager->getClassMetadata() at C:\SF2_project\app\cache\prod\jms_diextra\doctrine\EntityManager_5075a0dd6e27a.php:345
 EntityManager5075a0dd6e27a_546a8d27f194334ee012bfe64f629947b07e4919\__CG__\Doctrine\ORM\EntityManager->getClassMetadata() at C:\SF2_project\vendor\symfony\symfony\src\Symfony\Bridge\Doctrine\Security\User\EntityUserProvider.php:39
 Symfony\Bridge\Doctrine\Security\User\EntityUserProvider->__construct() at C:\SF2_project\app\cache\prod\appProdProjectContainer.php:1132
 appProdProjectContainer->getSecurity_User_Provider_Concrete_UserDbService() at C:\SF2_project\app\bootstrap.php.cache:211
 Symfony\Component\DependencyInjection\Container->get() at C:\SF2_project\app\cache\prod\appProdProjectContainer.php:1121
 appProdProjectContainer->getSecurity_User_Provider_Concrete_ChainProviderService() at C:\SF2_project\app\bootstrap.php.cache:211
 Symfony\Component\DependencyInjection\Container->get() at C:\SF2_project\app\cache\prod\appProdProjectContainer.php:1105
 appProdProjectContainer->getSecurity_Authentication_ManagerService() at C:\SF2_project\app\bootstrap.php.cache:211
 Symfony\Component\DependencyInjection\Container->get() at C:\SF2_project\app\cache\prod\appProdProjectContainer.php:552
 appProdProjectContainer->getSecurity_ContextService() at C:\SF2_project\app\bootstrap.php.cache:211
 Symfony\Component\DependencyInjection\Container->get() at C:\SF2_project\app\cache\prod\appProdProjectContainer.php:1002
 appProdProjectContainer->getTwigService() at C:\SF2_project\app\bootstrap.php.cache:211
 Symfony\Component\DependencyInjection\Container->get() at C:\SF2_project\app\cache\prod\appProdProjectContainer.php:30
 appProdProjectContainer->getAssetic_AssetManagerService() at C:\SF2_project\app\bootstrap.php.cache:211
 Symfony\Component\DependencyInjection\Container->get() at C:\SF2_project\vendor\symfony\assetic-bundle\Symfony\Bundle\AsseticBundle\CacheWarmer\AssetManagerCacheWarmer.php:33
 Symfony\Bundle\AsseticBundle\CacheWarmer\AssetManagerCacheWarmer->warmUp() at C:\SF2_project\vendor\symfony\symfony\src\Symfony\Component\HttpKernel\CacheWarmer\CacheWarmerAggregate.php:47
 Symfony\Component\HttpKernel\CacheWarmer\CacheWarmerAggregate->warmUp() at C:\SF2_project\vendor\symfony\symfony\src\Symfony\Bundle\FrameworkBundle\Command\CacheWarmupCommand.php:64
 Symfony\Bundle\FrameworkBundle\Command\CacheWarmupCommand->execute() at C:\SF2_project\vendor\symfony\symfony\src\Symfony\Component\Console\Command\Command.php:238
 Symfony\Component\Console\Command\Command->run() at C:\SF2_project\vendor\symfony\symfony\src\Symfony\Component\Console\Application.php:193
 Symfony\Component\Console\Application->doRun() at C:\SF2_project\vendor\symfony\symfony\src\Symfony\Bundle\FrameworkBundle\Console\Application.php:78
 Symfony\Bundle\FrameworkBundle\Console\Application->doRun() at C:\SF2_project\vendor\symfony\symfony\src\Symfony\Component\Console\Application.php:106
 Symfony\Component\Console\Application->run() at C:\SF2_project\app\console:22 
```

有人有任何线索吗？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T07:45:41.557

问题似乎是 Symfony2 中的一个错误：如果您希望它在生产环境中作为默认实体管理器工作，则默认实体管理器必须命名为“default”。

将 app/config/config.yml 中的教义.orm 部分更改为：

```
doctrine:
  orm:
    auto_generate_proxy_classes: %kernel.debug%
    default_entity_manager: default
    entity_managers:
      event_db:
        connection:   event_db
        mappings:
            MyFirmEventManagerBundle: ~
      default:
        connection:   user_config_db
        mappings:
            MyFirmUserManagerBundle:  ~ 
```

一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-16T10:50:30.890

好的。最后，经过太多时间，我找到了解决方案：您必须使用 manager_name 选项将实体管理器名称添加到安全定义中：

```
安全：
  编码器：
    MyFirm\UserManagerBundle\Entity\User：
        id: myfirm_usermanager.password_encoder

  提供者：
    用户数据库：
        实体：
            类：MyFirm\UserManagerBundle\Entity\User
            属性：用户名
            manager_name：user_config_db

```

# c++ - c++字符串比较算法

> ID：12824184
> 
> 赞同：-1
> 
> 时间：2012-10-10T16:32:35.997
> 
> 标签：c++, string, algorithm, stl, compare

你最好的字符串比较算法是什么？

我发现 O(n)

```
#include <string>

bool str_cpmr(char* str1, char* str2)
{
    int l1 = strlen(str1), l2 = strlen(str2) ;          

    if(l1 != l2)
        return false;

    for(int i = 0 ; i < l1 ; i++)
        if(str1[i] != str2[i])
            return false ;

    return true ;
} 
```

我想知道是否还有其他/更好的解决方案。

另外，如何准确测试？

我建议比较

*   100 场比赛
*   100 个字符串相差一个字符交换

还有更多测试字符串比较吗？

在 stl c++ (slt string::compare) 中怎么样？

谢谢！！！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T16:39:48.663

你的函数是 O(n)，但仍然需要大约两倍的时间——`strlen`遍历字符串以找到长度，然后（假设它们的长度相同）你再次遍历字符串比较字符。

取而代之的是，我会遍历字符串，直到您到达不匹配或两个字符串的结尾。如果达到不匹配，则返回 false。当且仅当您（同时）到达两个字符串的末尾而没有首先出现任何不匹配时，您才返回 true。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T16:38:29.990

从逻辑上讲，很难看出如何在小于 O(n) 的时间内检查字符串中的所有值是否存在单个字符不匹配 - 假设您没有关于字符串的其他信息。

如果这是一个真实的应用程序，并且您对字符串和差异类型有一定的了解，如果您知道它包含长度为“N”的序列（例如零件或电话号码），则可以通过首先检查每个第 N 个字符来平均做得更好。

编辑：注意这仍然是 O(n)，O() 只描述了缩放的力量，它只是 O(n/N)，仍然是 O(n)。如果您将字符串延长 10 倍，则检查每个第 N 个条目仍然需要 10 倍的时间。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-10T16:41:15.417

> 你最好的字符串比较算法是什么？

[`template< class T, class Alloc > bool operator==( basic_string<T,Alloc>& lhs, basic_string<T,Alloc>& rhs );`](http://en.cppreference.com/w/cpp/string/basic_string/operator_cmp).

它仅使用源代码的两个字符来比较两个字符串：

```
a==b; 
```

* * *

这是一个用 C 语言编写的非 smartalec 答案：

```
bool str_cpmr(char* str1, char* str2)
{
  while( *str1 && *str2 && *str1++ == *str2++ )
    ;
  return *str1 == *str2;
} 
```

它恰好是一个循环，因此显然是 O(n)，其中 n 是较短字符串的长度。此外，它很可能编译为恰好 2n 次内存提取。您可以使用专门的字符串指令更快（因此调用 strcmp() 可能会比这更快），但您可能不会在直接 C 中走得更快。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-10T16:46:59.633

您改进的功能可能如下所示：

```
bool str_cpmr(char* str1, char* str2)
{
    if (NULL == str1 || NULL == str2) return false;

    while (*str1 && *str2) {
        if (*str1++ != *str2++) {
            return false;
        }
    }

    return *str1 || *str2 ? false : true;
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-10T16:51:52.190

如果没有关于字符串性质的额外信息，没有什么比 O(n) 更好的了，其中 n 是（较短的）字符串的长度。

您不能进行少于 n 次的比较！给我一个可以通过 n-1 比较来完成的算法。那么在字符串中一定有一个位置，算法无法判断字符是否不同。这样我可以给你一个例子，你的算法与 n-1 比较失败。

你只能通过一个常数因子来改进它。这还将考虑其他信息，例如，如果您知道底层硬件比较 32 位值比 8 位值快，那么比较四个字符的块而不是逐个字符比较会更好。你不会做得更好。

# python - 在查询的选择部分嵌套选择查询

> ID：12824185
> 
> 赞同：1
> 
> 时间：2012-10-10T16:32:39.593
> 
> 标签：python, sql, sqlite

我想嵌套两个`SELECT`查询，其中“内部”查询的结果应该用于对“外部”查询中的每个元组执行乘法运算。

“内部”查询还应该访问外部表的字段（`tA.time`在本例中）。

例子：

```
 SELECT r1 * (SELECT r2 FROM tB WHERE time < tA.time)
    FROM tA
   WHERE xyz
GROUP BY xyz 
```

**第一个问题：**这一般可能吗？

**第二个问题：**这可能使用 SQLite 吗？

**第三个问题：**我是否以正确的方式绘制了查询？我试图以这种方式运行它，但我现在无法让它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T16:34:24.650

只要子查询恰好返回一行，这应该适用于大多数 SQL 兼容的数据库。我在 SQLite 中做过类似的事情，我怀疑它会起作用。

（如果子查询返回多行，就会报错，如果没有返回行，则乘法运算的结果为`NULL`。）

# ios - iOS - 单例 UIView？Facebook 风格的导航

> ID：12824186
> 
> 赞同：1
> 
> 时间：2012-10-10T16:32:43.283
> 
> 标签：ios, uiview, uiviewcontroller, singleton

我想实现类似 facebook 导航菜单之类的东西，您可以在其中单击菜单按钮将当前视图滑到上方以陶醉下面的菜单。问题是如何让菜单始终作为底层视图存在。

菜单有一个 tableView 将突出显示您所在的当前视图或部分。目前我在每个视图上都有一个属性，菜单将被分配到，但我不确定如何为菜单设置单例 UIView . 换句话说，如果菜单不是单例，我可以这样做：

```
self.menu = [[[NSBundle mainBundle] loadNibNamed:@"menu" owner:self options:nil] objectAtIndex:0]; 
```

但在这种情况下，我正在为每个视图创建一个新菜单。我需要为每个视图分配相同的菜单。

建议？

* * *

那么创建一个将菜单视图作为属性的单例 NSObject 怎么样？

然后我可以从单例中获取这个视图并将其分配给每个视图的 self.menu 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T16:37:10.767

我想您将拥有某种主视图控制器来处理所需的所有不同视图。

这个视图控制器可以有一个属性来存储你的“菜单视图”；当您为菜单中的项目创建新的视图控制器时，您会将对存储在主视图控制器中的“菜单视图”的引用传递给它。

这可以为您工作，而无需使用单例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T16:39:18.987

There're numerous open-source controllers that imitate that behaviour (e.g. [this one](http://www.cocoacontrols.com/platforms/ios/controls/ghsidebarnav), [this](http://www.cocoacontrols.com/platforms/ios/controls/ecslidingviewcontroller--2) or [this](http://www.cocoacontrols.com/platforms/ios/controls/mfsidemenu)) - you can check their implementation to get the idea of how they work (or use them in your project as they are)

Basically you need to create "main" view controller that handles both menu controller and your content controllers and navigation between them as @sergio said.

# java - 为什么正则表达式可选非捕获组不作为可选并且搞砸匹配？

> ID：12824193
> 
> 赞同：1
> 
> 时间：2012-10-10T16:33:09.973
> 
> 标签：java, regex

**我正在使用使用正则表达式搜索 html 文档的第 3 方应用程序，在这种情况下，它没有正确的结构（没有头部或主体），并将匹配项作为属性形式返回 excel 文件中。它不解析它们。**我已经知道尝试使用正则表达式解析 html 所带来的恐惧。

因此，我编写了一个正则表达式，它应该捕获段落或列表项中的每个句子，但在检查匹配项后，我注意到有时它不会匹配所有句子，并且一旦该句子或列表项出现错误就会停止匹配。几乎总是使用列表项，但偶尔使用句子。在意识到这是由于人为错误造成的之后，我添加了可选的非捕获组，这完全搞砸了一切。

这是我写的最初的正则表达式，它在大多数情况下都有效：

```
([^<>]*?)[.!?<]|[ <"'/] 
```

因为有些句子有错误，作者在标点符号前加了一个空格，所以我添加了可选的非捕获组：

```
([^<>]*?)(?:[ ])?[.!?<]|[ <"/l] 
```

以下是它正在搜索的文本示例：

```
Buy this because it is soooooooooooooooooooo freaking awesome! If you buy this 
everyone will think you're "cool." You'll get all the babes !<br><br><ul><li>It 
will make you smell better<li>It will make you preform better.</li><li>Will make
you last longer in bed!<li>Will fix any acne problem.</li> <li>It will reduce the
amount you perspire to .01% your normal amount!<br><li>It will make you 
"invincible."</li></ul> 
```

因为它们不能用作锚（文本从 html 文件的开头开始），所以我只是让它立即开始捕获。如您所见，它的编码很差并且有语法错误，这就是我以我的方式结束它的原因。

第一个捕获了大部分句子，但遗漏了一些......第二个返回一堆空白匹配，这搞砸了用捕获创建的数组。**就好像它在非捕获组之后无视一切一样。**

我想过这样做，但这会将每个单词都返回为匹配项：

```
([^<>]*?)[ .!?<]|[ .!?<"/l] 
```

唯一的问题是这会在中间切断一些句子，并且需要第三个范围，我认为这会有一堆不同的选项（注意随机`<br>`标签）并且需要一段时间才能找到它们。

**从外观上看，它并没有使用可选的非捕获组！为什么是这样？还是我忽略了一些非常简单的事情？**我觉得可能是后者。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T19:53:58.687

我想出了这个野兽：

```
(?:^|\s+|>)((?:[^<>.!?\s])(?:[^<>.!?]|\.\d)+(?:\.(?!\d)"?|!|\?)?) 
```

让我试着解释一下我在这里做什么。

```
(?:^|\s+|>)       # only start after at the string's beginning, after a row of
                  # spaces, or after closing a tag
                  # this eliminates all in-tag matches (like "li" and "br")
(                 # opening a capturing group that will contain the actual match
(?:[^<>.!?\s])    # require at least one character that is not in the given group
                  # this eliminates matching a single space between two <li>s
                  # NOTE: there are probably better ways to do this
(?:[^<>.!?]|\.\d) # defines possible sentence characters; allow everything but
                  # <, >, ., !, ? EXCEPT FOR . followed by a digit
(?:\.(?!\d)"?|!|\?)?
                  # include possible sentence endings; that is . not followed by
                  # a digit (hence, the negative lookahead), but possibly
                  # followed by ", or !, or ?, or nothing at all
)                 # close the main matching group 
```

现在您应该能够在捕获的索引处访问您的句子`1`。

我相信你可能会遇到我对句子看起来像什么的假设会被打破的情况。但我只能从你给出的例子中工作，其中所有的奇怪之处都包括在内。

# c# - 如何将 CIL 转换为 LINQ 表达式树

> ID：12824201
> 
> 赞同：4
> 
> 时间：2012-10-10T16:33:33.100
> 
> 标签：c#, expression-trees, cil, decompiling, linq-expressions

1.  有没有关于将 CIL 直接转换为 LINQ 表达式树的工作？这将包括课堂图书馆、博客、书籍、学术论文等。

2.  CIL 和 LINQ 表达式 API 之间的已知不匹配是什么？我见过[一个项目](http://archive.msdn.microsoft.com/CSharp4Expressions/)，它显着扩展了 Expression API 以支持 C# 和 LINQ 表达式之间几乎完整的映射。建议采取哪些变通方法来适应这些不匹配中的任何一个？

3.  直接从 CIL 转换为 LINQ 表达式有什么根本错误吗？如果是这样，为什么？

# python - 在 Django 模板中替代 {% if request.user.is_active %}

> ID：12824206
> 
> 赞同：1
> 
> 时间：2012-10-10T16:34:01.880
> 
> 标签：python, django, authentication, django-templates, render-to-response

关于以下的逻辑替代方案是什么：

```
{% if request.user.is_active %} 
```

如果视图没有返回`render_to_response`带有 的字典`request`，则模板无法正常工作。

所以，欢迎任何想法。

//已编辑

我的动机是：当您使用已安装应用程序的视图时，您没有机会修改它们。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T17:00:44.237

添加`django.contrib.auth.context_processors.auth`到`TEMPLATE_CONTEXT_PROCESSORS`您的`settings.py`.

现在您`user`的所有模板中都有变量。所以你可以使用这个：

```
{% if user.is_active %} 
```

在文档中查看更多信息：[设置中的模板上下文处理器](https://docs.djangoproject.com/en/1.4/ref/settings/#std:setting-TEMPLATE_CONTEXT_PROCESSORS)，[身份验证上下文处理器](https://docs.djangoproject.com/en/1.4/ref/templates/api/#django-contrib-auth-context-processors-auth)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-10T16:48:02.707

视图.py：

```
def foo_view(request):
    ...
    is_active = request.user.is_active
    return render_to_response('template.html', {'is_active':is_active}) 
```

或上下文处理器：

```
def is_user_active(request):
    return {'is_active': request.user.is_active} 
```

或中间件：

```
class IsUserActive:
    def process_template_response(self, request, response):
        response.context['is_active'] = request.user.is_active 
```

* * *

模板.html：

```
{% if is_active %}
    ...
{% endif %} 
```

但是说真的，我不知道为什么 render_to_response 不能满足你：

```
...
return render_to_response('template.html', 
    context_instance=RequestContext(request)) 
```

# jsf - 使用 DataTable 调用另一个页面 - 即时行选择

> ID：12824208
> 
> 赞同：0
> 
> 时间：2012-10-10T16:34:17.177
> 
> 标签：jsf, primefaces

我有一个`dataTable`但是当我选择一行时没有任何反应，我试过打电话`p:dialog`但没有任何反应。我尝试使用所选数据重定向到另一个页面，但也不能（这是我的目标）。我的代码中缺少什么。下面是我的 xhtml 和 bean。

xhtm:

```
<h:form id="form" style="font-size: 11pt">
<h3>Cancelar Processo de Portabilidade</h3>

<p:panel header="Consulta por Numeração" id="CancProcP1">

<h:panelGrid columns="3" style="margin-bottom:10px" cellpadding="5"
    id="pgridTipoCanc1">

    <p:selectOneRadio id="tipoCancela"
        value="#{beanBuscarDadosCancPort.tipoBusca}">
        <f:selectItem itemLabel="TN" itemValue="1" />
        <f:selectItem itemLabel="Bilhete" itemValue="2" />
        <f:selectItem itemLabel="Período" itemValue="3" />
        <f:ajax render="pgridTipoCanc2" />
    </p:selectOneRadio>

</h:panelGrid>

<h:panelGrid columns="2" style="margin-bottom:10px" cellpadding="5"
    id="pgridTipoCanc2">

    <h:outputLabel for="tn" value="TN:"
        rendered="#{beanBuscarDadosCancPort.tipoBusca == '1'}" />
    <h:inputText id="tn" value="#{beanBuscarDadosCancPort.tn}"
        rendered="#{beanBuscarDadosCancPort.tipoBusca == '1'}" />

    <h:outputLabel for="bilhete" value="Bilhete de Portabilidade:"
        rendered="#{beanBuscarDadosCancPort.tipoBusca == '2'}" />
    <h:inputText id="bilhete"
        value="#{beanBuscarDadosCancPort.srvProvId}"
        rendered="#{beanBuscarDadosCancPort.tipoBusca == '2'}" />

    <h:outputLabel for="dataInicial" value="Data Inicial"
        rendered="#{beanBuscarDadosCancPort.tipoBusca == '3'}" />
    <p:calendar id="dataInicial"
        value="#{beanBuscarDadosCancPort.dataInicial}"
        rendered="#{beanBuscarDadosCancPort.tipoBusca == '3'}" />

    <h:outputLabel for="dataFinal" value="Data Final"
        rendered="#{beanBuscarDadosCancPort.tipoBusca == '3'}" />
    <p:calendar id="dataFinal"
        value="#{beanBuscarDadosCancPort.dataFinal}"
        rendered="#{beanBuscarDadosCancPort.tipoBusca == '3'}" />

</h:panelGrid>

<p:commandButton id="pesquisar"
    action="#{beanBuscarDadosCancPort.pesquisar}"
    value="Buscar" ajax="false" update="display" />

</p:panel>
</h:form>

<p:panel id="CancProcP2">

<h:form id="form2" style="font-size: 11pt">

<p:growl id="growl" showDetail="true"/>                 

<p:dataTable id="dataTable" var="valor"
    value="#{beanBuscarDadosCancPort.listaNumeroPortado}" 
    paginator="true" rows="5" rowKey="#{valor.srvProvIdDoadoraAnterior}" 
    selection="#{beanBuscarDadosCancPort.selectedNumP}" selectionMode="single"
    rowSelectListener="#{beanBuscarDadosCancPort.onRowSelect}"
    onRowSelectUpdate="display growl"
    onRowSelectComplete="carDialog.show()"
    rowUnselectListener="#{beanBuscarDadosCancPort.onRowUnselect}"  
    onRowUnselectUpdate="growl"
    paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
    rowsPerPageTemplate="4,5,7"
    style="max-width: 580px; min-width: 550px">
    <f:facet name="header"> 

</f:facet>

<p:column selectionMode="single" style="width:18px" />  

<p:column
        style="max-width: 50px; min-width: 50px; overflow: hidden">
        <f:facet name="header">
            <h:outputText value="Operadora Doadora" />
        </f:facet>
        <h:outputText value="#{valor.srvProvIdDoadoraAnterior}" />
    </p:column>

    <p:column
        style="max-width: 40px; min-width: 40px; overflow: hidden">
        <f:facet name="header">
            <h:outputText value="Bilhete" />
        </f:facet>
        <h:outputText value="#{valor.srvProvId}" />
    </p:column>

    <p:column
        style="max-width: 40px; min-width: 40px; overflow: hidden">
        <f:facet name="header">
            <h:outputText value="Data/Hora da Janela" />
        </f:facet>
        <h:outputText value="#{valor.dataJanelaPortabilidade}" />
    </p:column>

    <p:column
        style="max-width: 40px; min-width: 40px; overflow: hidden">
        <f:facet name="header">
            <h:outputText value="Telefone" />
        </f:facet>
        <h:outputText value="#{valor.tn}" />
    </p:column>

</p:dataTable>

<p:dialog header="Car Detail" widgetVar="carDialog" resizable="false"  
width="200" showEffect="explode" hideEffect="explode">

    <h:panelGrid id="display" columns="2" cellpadding="4">  

        <f:facet name="header">  
        <p:graphicImage value="teste"/>  
        </f:facet>  

        <h:outputText value="Model:" />  
        <h:outputText value="#{beanBuscarDadosCancPort.selectedNumP.srvProvIdDoadoraAnterior}" /> 

    </h:panelGrid>

</p:dialog>

</h:form> 
```

豆

```
public class BuscarDadosCancelarPortBean implements Serializable {

    private static final long serialVersionUID = 1L;

    private List<NumeroPortado> regSelecionado = null;

    private String tipoBusca;
    private String tn;
    private String srvProvId;
    private Date dataInicial;
    private Date dataFinal;

    private List<NumeroPortado> listaNumeroPortado = null;
    NumeroPortado numPortato = new NumeroPortado(); 

    private NumPortadoDataModel numModel;

    private NumeroPortado selectedNumP; 

    @EJB
    private ConsultasSpnService consultaOp;

    public List<NumeroPortado> pesquisar(){

        String busca = null;
        //String busca = "tn";
        //String parametro = "1133100038";
        String parametro = null;
        String parametro2 = null;

        if(tipoBusca.equals("1")){

            parametro = tn;
            busca = "tn";

        }else if(tipoBusca.equals("2")){

            parametro = srvProvId;//bilhete
            busca = "bilhete";

        }else if(tipoBusca.equals("3")){

            //DateFormat df = new SimpleDateFormat("dd/MM/yy"); 

            //parametro = df.format(dataInicial);
            //parametro2 = df.format(dataFinal);
            //busca = "data";

        }       

        if(listaNumeroPortado == null){
            listaNumeroPortado = new ArrayList<NumeroPortado>();
            listaNumeroPortado = consultaOp.listarNumerosPortados(busca, parametro, parametro2);

            //Excluir depois de descobrir porque não está pegando estes campos da tabela
            for(int i=0;i<listaNumeroPortado.size();i++){

                if(tipoBusca.equals("1")){
                    listaNumeroPortado.get(i).setTn(parametro);
                }else if(tipoBusca.equals("2")){
                    listaNumeroPortado.get(i).setSrvProvId(parametro);
                }

            }
            //numModel = new NumPortadoDataModel(listaNumeroPortado);

        }   

        return listaNumeroPortado;

    }

    public String getTn() {
        return tn;
    }
    public void setTn(String tn) {
        this.tn = tn;
    }
    public String getSrvProvId() {
        return srvProvId;
    }
    public void setSrvProvId(String srvProvId) {
        this.srvProvId = srvProvId;
    }
    public Date getDataInicial() {
        return dataInicial;
    }
    public void setDataInicial(Date dataInicial) {
        this.dataInicial = dataInicial;
    }
    public Date getDataFinal() {
        return dataFinal;
    }
    public void setDataFinal(Date dataFinal) {
        this.dataFinal = dataFinal;
    }

    public String getTipoBusca() {
        return tipoBusca;
    }

    public void setTipoBusca(String tipoBusca) {
        this.tipoBusca = tipoBusca;
    }

    public List<NumeroPortado> getListaNumeroPortado() {
        return listaNumeroPortado;
    }

    public void setListaNumeroPortado(List<NumeroPortado> listaNumeroPortado) {
        this.listaNumeroPortado = listaNumeroPortado;
    }

    public NumeroPortado getNumPortato() {
        return numPortato;
    }

    public void setNumPortato(NumeroPortado numPortato) {
        this.numPortato = numPortato;
    }

    public ConsultasSpnService getConsultaOp() {
        return consultaOp;
    }

    public void setConsultaOp(ConsultasSpnService consultaOp) {
        this.consultaOp = consultaOp;
    }

    public List<NumeroPortado> getRegSelecionado() {
        return regSelecionado;
    }

    public void setRegSelecionado(List<NumeroPortado> regSelecionado) {
        this.regSelecionado = regSelecionado;
    }

    public NumPortadoDataModel getNumModel() {
        return numModel;
    }

    public void setNumModel(NumPortadoDataModel numModel) {
        this.numModel = numModel;
    }

    public NumeroPortado getSelectedNumP() {
        return selectedNumP;
    }

    public void setSelectedNumP(NumeroPortado selectedNumP) {
        this.selectedNumP = selectedNumP;
    } 

    public void onRowSelect(SelectEvent event) {  
        FacesMessage msg = new FacesMessage("Line Selected", ((NumeroPortado) event.getObject()).getTn());  

        FacesContext.getCurrentInstance().addMessage(null, msg);  
    }  

    public void onRowUnselect(UnselectEvent event) {  
        FacesMessage msg = new FacesMessage("Line Unselected", ((NumeroPortado) event.getObject()).getTn());  

        FacesContext.getCurrentInstance().addMessage(null, msg);  
    }  

    public String onRowSelectNavigate(SelectEvent event) {  
        FacesContext.getCurrentInstance().getExternalContext().getFlash().put("selectedNumP", event.getObject());  

        return "cancelarPortabilidade?faces-redirect=true";  
    }

} 
```

我改变了`rowSelectListener = "#{beanBuscarDadosCancPort.onRowSelect}"`没有`rowSelectListener = "#{beanBuscarDadosCancPort.onRowSelectNavigate}"`成功！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T15:11:31.990

我只使用了 `<p:ajax event="rowSelect" listener="# {beanConsultaPorNum.onRowSelectHeader}" />`之间的标签`<p:dataTable...> </p:dataTable>.`

# jquery - 验证后发送表单

> ID：12824212
> 
> 赞同：1
> 
> 时间：2012-10-10T16:34:32.257
> 
> 标签：jquery, asp.net-mvc

我对 MVC 很陌生，所以我很难解释，抱歉！

我有一个表单，我想在使用 post 方法发送之前对其进行验证。该表单位于 Index.cshtml 文件中并发布到 HomeController。我的问题是当我发送表单时它没有到达正确的 index() 方法（HomeController 中的第二个带有 CallMeNow 请求）。

有可能以这种方式解决这个问题吗？

这就是我在 HomeController.cs 文件中的内容：

```
 // GET: /Home/
    [HttpGet]
    public ViewResult Index()
    {
        return View();
    }

    // Send CallMeNow Request.
    [HttpPost]
    public ViewResult Index(string txtCallMeNow)
    {
        if (txtCallMeNow != null)
        {
            // .. doing something here.
        }
        ViewBag.EmailSent = "Thank you.";

        return View(); 
```

这是我在 Index.cshtml 文件中的：

1.  这应该验证表单并发送它：

    ```
    $('#callMeNow1').submit(function (e) {
        e.preventDefault();  
        var selectedCity = $('#txtCallMeNow').val();
        if (selectedCity == 'enter phone number...')
            alert('enter phone number!');                               
        else
            document.location = $(this).prop('action');
    }); 
    ```

2.  这是表格。它应该被发布到 HomeController：

    ```
    @using (Html.BeginForm("Index", "Home", FormMethod.Post, new { id = "callMeNow1" }))
        {
            <input type="text" id="txtCallMeNow" name="txtCallMeNow" onfocus="if(this.value != '') {this.value = '';}"
                onblur="if (this.value == '') {this.value = 'enter phone number...';}" value=" enter phone number..." /><br />
            <input type="submit" class="call_me_now" value="" /> 

             @ViewBag.EmailSent;
        } 
    ```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T16:37:30.410

`e.preventDefault();`如果条件，你应该搬进去 。因为它将停止表单提交。我相信您想在验证失败的情况下停止提交表单。

```
$('#callMeNow1').submit(function (e) {

    var selectedCity = $('#txtCallMeNow').val();
    if (selectedCity == 'enter phone number...'){
        e.preventDefault(); 
        alert('enter phone number!'); 
    }                             

}); 
```

# c# - 选择项目时替换 ComboBox 中的文本

> ID：12824213
> 
> 赞同：0
> 
> 时间：2012-10-10T16:34:37.540
> 
> 标签：c#, combobox

我有一个应包含路径的可编辑组合框。用户可以从下拉列表中选择多个默认路径（或输入自己的路径），例如`%ProgramData%\\Microsoft\\Windows\\Start Menu\\Programs\\ (All Users)`. 下拉列表中的项目包含一个简短的解释，如`(All Users)`前一个示例中的部分。选择此类项目后，我想删除此说明，以便在 ComboBox 中显示有效路径。

我目前从字符串中去除解释，并尝试通过设置`Text`ComboBox 的属性来更改文本。但这不起作用，字符串被正确解析，但显示的文本不会更新（它与下拉列表中的内容相同，并带有解释）。

```
private void combobox_TextChanged(object sender, EventArgs e) {
            //..             

               string destPath = combobox.GetItemText(combobox.SelectedItem);                  
               destPath = destPath.Replace("(All Users)", "");                   
               destPath.Trim();                   
               combobox.Text = destPath; 

            //..
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T17:34:17.413

我建议您创建`PathEntry`类来存储两者`Path`及其`Description`.

```
public sealed class PathEntry
{
    public string Path { get; private set; }
    public string Description { get; private set; }

    public PathEntry(string path)
      : this(path, path)
    {
    }

    public PathEntry(string path, string description)
    {
        this.Path = path;
        this.Description = description;
    }
} 
```

然后创建一个实例[`BindingList<PathEntry>`](http://msdn.microsoft.com/en-us/library/ms132679.aspx)来存储所有已知的路径和描述。稍后您可以向其添加用户定义的路径。

```
private readonly BindingList<PathEntry> m_knownPaths =
  new BindingList<PathEntry>(); 
```

并更新您的表单的构造函数，如下所示：

```
public YourForm()
{
    InitializeComponent();

    m_knownPaths.Add(new PathEntry("%ProgramData%\\Microsoft\\Windows\\Start Menu\\Programs",
      "(All Users)"));
    // TODO: add other known paths here

    combobox.ValueMember = "Path";
    combobox.DisplayMember = "Description";
    combobox.DataSource = m_knownPaths;

}

private void combobox_DropDown(object sender, EventArgs e)
{
    combobox.DisplayMember = "Description";
}

private void combobox_DropDownClosed(object sender, EventArgs e)
{
    combobox.DisplayMember = "Path";
} 
```

您可能想了解更多 about和[`DataSource`](http://msdn.microsoft.com/en-us/library/system.windows.forms.listcontrol.datasource.aspx)MSDN 。[`DisplayMember`](http://msdn.microsoft.com/en-us/library/system.windows.forms.listcontrol.displaymember.aspx)[`ValueMember`](http://msdn.microsoft.com/en-us/library/system.windows.forms.listcontrol.valuemember.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T10:25:33.703

我通过使用 BeginInvoke()[在类似的问题中找到了解决方案](https://stackoverflow.com/a/7363363/368354)

使用 Nikolay 的解决方案，我的方法现在看起来像这样：

```
private void combobox_SelectedIndexChanged(object sender, EventArgs e) {
            if (combobox.SelectedIndex != -1) {
                //Workaround (see below)
                var x = this.Handle;
                this.BeginInvoke((MethodInvoker)delegate { combobox.Text = combobox.SelectedValue.ToString(); });                  
            }
} 
```

需要解决方法，因为 BeginInvoke 需要加载或显示控件，如果程序刚刚启动，则不一定是这种情况。从[这里](https://stackoverflow.com/a/2056843/368354)得到。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-20T11:59:34.157

这可能不是最优雅的解决方案，但对于像我这样的初学者来说是一个简单的解决方案，他们在更好地理解它们之前不想使用这些 InvokeMethods。

布尔值是必需的，因为当将新字符串（对象）分配给 Items 数组中的位置时，处理程序会再次被触发 - 递归。

我刚才想通了，因为我正在处理完全相同的问题。

只是分享:)

```
 bool preventDoubleChange = false;
    private void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
    {
        if (preventDoubleChange){
            preventDoubleChange = false;
            return;
        }

        preventDoubleChange = true;

        switch (comboBox1.SelectedIndex)
        {
            case 0:
                comboBox1.Items[0] = "ChangeToThisText";
                break;
            case 1:
                comboBox1.Items[1] = "ChangeToThisText";
                break;
            default:
                preventDoubleChange = false;
                break;
        }            
    } 
```

...或者，如果您习惯使用“标签”字段，则可以避免布尔值的混乱。在我看来，第二个变体也更干净。

```
 public Form1()
    {
        InitializeComponent();

        comboBox1.Items.Add("Item One");                        //Index 0
        comboBox1.Items.Add("Item Two");                        //Index 1
        comboBox1.Items.Add("Item Three");                             //Index 2
        comboBox1.Items.Add("Item Four");                       //Index 3
    }

    private void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
    {
        if (comboBox1.Tag != null && (int)comboBox1.Tag == comboBox1.SelectedIndex)
            return;

        switch (comboBox1.SelectedIndex)
        {
            case 0:
                break;
            case 1:
                comboBox1.Tag = comboBox1.SelectedIndex;
                comboBox1.Items[comboBox1.SelectedIndex] = "changed item 2";
                break;
            case 2:
                comboBox1.Tag = comboBox1.SelectedIndex;
                comboBox1.Items[comboBox1.SelectedIndex] = "changed item 3";
                break;
            case 3:
                break;
            default:
                break;
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T17:06:42.230

红隼，

您不能以这种方式更改文本。您需要做的是获取 selectedindex 值，然后设置 Text 属性。像这样的东西：

```
 protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
    {
        var index = DropDownList1.SelectedIndex;

        DropDownList1.Items[index].Text = "changed";
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T17:16:38.763

` private void combobox_TextChanged(object sender, EventArgs e) { //..

```
 string destPath = combobox.SelectedItem.Text;                  
           destPath = destPath.Replace("(All Users)", "");                   
           destPath.Trim();                   
           combobox.SelectedItem.Text = destPath; 

        //.. 
```

} `

# iphone - 有没有办法在不进行硬编码的情况下缩短我的 CountryViewController.m？

> ID：12824214
> 
> 赞同：2
> 
> 时间：2012-10-10T16:34:43.597
> 
> 标签：iphone, ios, ios5

我想知道是否有办法缩短我的 CountryViewController.m 因为每次添加新国家时我都会添加另一个 else if 语句。

我正在使用一个 UITableViews 来推送一个新的表格视图。

```
RootViewController.m

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.tableView = [[UITableView alloc] initWithFrame:CGRectZero style:UITableViewStyleGrouped];

    ASIA   = [[NSMutableArray alloc] init];
    EU     = [[NSMutableArray alloc] init];

    [ASIA    addObject: @"China"];
    [ASIA    addObject: @"Japan"];
    [ASIA    addObject: @"Korea"];
    [EU      addObject: @"France"];
    [EU      addObject: @"Italy"];
    [EU      addObject: @"Switzerland"];

    self.title = @"Continent";
}

CountryViewController.m

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear: animated];

    if ([self.title isEqualToString: @"China"]) {
        _listOfCities = [[NSMutableArray alloc] init];
        [_listOfCities addObject: @"Beijing"];
        [_listOfCities addObject: @"Hong Kong"];
    }

    else if ([self.title isEqualToString: @"Japan"]){
        _listOfCities = [[NSMutableArray alloc] init];
        [_listOfCities addObject: @"Tokyo"];
    }

    else if ([self.title isEqualToString: @"Korea"]){
        _listOfCities = [[NSMutableArray alloc] init];
        [_listOfCities addObject: @"Seoul"];
    }

    else if ([self.title isEqualToString: @"France"]){
        _listOfCities = [[NSMutableArray alloc] init];
        [_listOfCities addObject: @"Paris"];
        [_listOfCities addObject: @"Versailles"];
    }

    else if ([self.title isEqualToString: @"Italy"]){
        _listOfCities = [[NSMutableArray alloc] init];
        [_listOfCities addObject: @"Rome"];
    }

    else if ([self.title isEqualToString: @"Switzerland"]){
        _listOfCities = [[NSMutableArray alloc] init];
        [_listOfCities addObject: @"Bern"];
    }

    [self.tableView reloadData];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T16:36:59.040

一种简单的方法是使用[属性列表](https://developer.apple.com/documentation/Cocoa/Conceptual/PropertyLists/index.html)并将其作为捆绑资源包含（即，只需将其添加到您的项目中）。

例如，如果您的属性列表如下所示： ![在此处输入图像描述](../Images/de534e7b1f0050461625d59a92d2aa4a.png)

然后你可以加载它

```
countries = [NSDictionary dictionaryWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"CountryData" ofType:@"plist"]]; 
```

并将其用作普通字典或数组，即

```
- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear: animated];

    NSString* countryName = self.title;
    NSDictionary* country = [countries objectForKey:countryName];
    NSArray* cities = [country objectForKey:@"Cities"];
    NSString* continent = [country objectForKey:@"Continent"];
    _listOfCities = cities;

    [self.tableView reloadData];
} 
```

Plist 文件可以在 XCode 中轻松编辑。

# java - Spring-JDBC 中的隔离级别 SERIALIZABLE

> ID：12824217
> 
> 赞同：5
> 
> 时间：2012-10-10T16:35:09.993
> 
> 标签：java, spring, postgresql, transactions, spring-transactions

也许有人可以帮助我解决 Spring（3.1）/ Postgresql（8.4.11）中的事务问题

我的交易服务如下：

```
@Transactional(isolation = Isolation.SERIALIZABLE, readOnly = false)
@Override
public Foo insertObject(Bar bar) {

            // these methods are just examples
            int x = firstDao.getMaxNumberOfAllowedObjects(bar)
            int y = secondDao.getNumerOfExistingObjects(bar)
            // comparison
            if (x - y > 0){
                  secondDao.insertNewObject(...) 
            }
            ....
} 
```

Spring 配置 Webapp 包含：

```
@Configuration 
@EnableTransactionManagement 
public class ....{
    @Bean
    public DataSource dataSource() {
        org.apache.tomcat.jdbc.pool.DataSource ds = new DataSource();

        ....configuration details

        return ds;
    }

    @Bean
    public DataSourceTransactionManager txManager() {
        return new DataSourceTransactionManager(dataSource());
    }
} 
```

假设一个请求“x”和一个请求“y”同时执行并到达注释“comparison”（方法 insertObject）。然后他们都被允许插入一个新对象并提交他们的事务。

为什么我没有 RollbackException？据我所知，这就是 Serializable 隔离级别的用途。回到前面的场景，如果 x 设法插入一个新对象并提交它的事务，那么不应允许“y”的事务提交，因为有一个他没有读取的新对象。

也就是说，如果“y”可以再次读取 secondDao.getNumerOfExistingObjects(bar) 的值，它将意识到还有一个新对象。幻影？

事务配置似乎工作正常：

*   对于每个请求，我可以看到 firstDao 和 secondDao 的相同连接
*   每次调用 insertObject 时都会创建一个事务

第一个和第二个 DAO 如下：

```
@Autowired
public void setDataSource(DataSource dataSource) {
    this.jdbcTemplate = new JdbcTemplate(dataSource);
}

@Override
public Object daoMethod(Object param) {

        //uses jdbcTemplate

} 
```

我确定我错过了一些东西。任何的想法？

谢谢你的时间，

哈维尔

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-11T01:47:58.377

**TL；DR：在 Pg 9.1 中，可串行化冲突的检测得到了显着改善，因此请升级。**

* * *

从您的描述中弄清楚实际的 SQL 是什么以及您期望得到回滚的原因是很棘手的。看起来您严重误解了可序列化隔离，也许认为它完美地测试了所有谓词，但事实并非如此，尤其是在 Pg 8.4 中。

`SERIALIZABLE`并不能完全保证事务像串行运行一样执行——因为如果可能的话，从性能的角度来看这样做会非常昂贵。它只提供有限的检查。确切检查的内容以及从数据库到数据库以及版本到版本的差异，因此您需要阅读您的数据库版本的文档。

异常是可能的，其中以`SERIALIZABLE`模式执行的两个事务产生的结果与这些事务真正串行执行的结果不同。

阅读 Pg 中有关事务隔离的文档以了解更多信息。请注意，`SERIALIZABLE`Pg 9.1 中的行为发生了巨大变化，因此请务必阅读适合您的 Pg 版本的手册版本。[这里是 8.4 版本](http://www.postgresql.org/docs/8.4/static/transaction-iso.html)。特别阅读[13.2.2.1。可序列化隔离与真正的可序列化](http://www.postgresql.org/docs/8.4/static/transaction-iso.html#MVCC-SERIALIZABILITY)。现在将其[与 Pg 9.1 文档中描述](http://www.postgresql.org/docs/current/static/transaction-iso.html)的大大改进的基于谓词锁定的序列化支持进行比较。

看起来您正在尝试执行类似以下伪代码的逻辑：

```
count = query("SELECT count(*) FROM the_table");
if (count < threshold):
    query("INSERT INTO the_table (...) VALUES (...)"); 
```

如果是这样，这在 Pg 8.4 中同时执行时将不起作用 - 它与上面链接的文档中使用的异常示例几乎相同。令人惊讶的是，它实际上适用于 Pg 9.1；我什至没想到 9.1 的谓词锁定会捕获聚合的使用。

你这样写：

> 回到前面的场景，如果 x 设法插入一个新对象并提交它的事务，那么不应允许“y”的事务提交，因为有一个他没有读取的新对象。

但是 8.4 不会检测到这两个事务是相互依赖的，您可以通过使用两个`psql`会话来测试它来简单地证明这一点。只有在 9.1 中引入的真正可串行化的东西才能起作用——坦率地说，我很惊讶它在 9.1 中起作用。

如果您想在 Pg 8.4 中执行诸如强制最大行数之类的操作，您需要[`LOCK`在表](http://www.postgresql.org/docs/current/static/explicit-locking.html)中防止并发`INSERT`s，手动或通过[触发器函数](http://www.postgresql.org/docs/current/static/functions-trigger.html)进行锁定。在触发器中执行此操作本质上需要锁提升，因此会经常死锁，但会成功完成这项工作。最好在应用程序中完成，您可以在从表中`LOCK TABLE my_table IN EXCLUSIVE MODE`获取 even 之前发出`SELECT`，因此它已经具有在表上所需的最高锁定模式，因此不需要容易死锁的锁定提升。`EXCLUSIVE`锁定模式是合适的，因为它允许s`SELECT`但没有别的。

以下是如何在两个 psql 会话中对其进行测试：

```
SESSION 1                               SESSION 2

create table ser_test( x text );

BEGIN TRANSACTION 
ISOLATION LEVEL SERIALIZABLE;

                                        BEGIN TRANSACTION 
                                        ISOLATION LEVEL SERIALIZABLE;

SELECT count(*) FROM ser_test ;

                                        SELECT count(*) FROM ser_test ;

INSERT INTO ser_test(x) VALUES ('bob');

                                        INSERT INTO ser_test(x) VALUES ('bob');

 COMMIT;

                                        COMMIT; 
```

在 Pg 9.1 上运行时，`st commits succeeds then the second`COMMIT` 失败并显示：

```
regress=# COMMIT;
ERROR:  could not serialize access due to read/write dependencies among transactions
DETAIL:  Reason code: Canceled on identification as a pivot, during commit attempt.
HINT:  The transaction might succeed if retried. 
```

但是当在 8.4 上运行时，两次提交都成功，因为 8.4 没有在 9.1 中添加所有用于可序列化的谓词锁定代码。

# php - 重载和数组

> ID：12824218
> 
> 赞同：0
> 
> 时间：2012-10-10T16:35:10.180
> 
> 标签：php, overloading

```
<?php
class MaClasse
{
    private $attributs = array();
    private $unAttributPrive;

    public function __get ($nom)
    {
        if (isset ($this->attributs[$nom]))
            return $this->attributs[$nom];
    }

    public function __set ($nom, $valeur)
    {
        $this->attributs[$nom] = $valeur;
    }

    public function afficherAttributs()
    {
        echo '<pre>', print_r ($this->attributs, true), '</pre>';
    }
}

$obj = new MaClasse;

$obj->attribut = 'Simple test';
$obj->unAttributPrive = 'Autre simple test';

echo $obj->attribut;
echo $obj->autreAtribut;
$obj->afficherAttributs();   
?> 
```

我不明白为什么第二个变量没有显示任何内容？但在数组中它确实存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T16:41:44.463

You're setting `unAttributPrive`, but getting `autreAtribut`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T16:42:47.583

我会心血来潮猜测，因为你的变量名拼写错误。如果您要回显 $obj->unAttributPrive

# ocean - 为 Petrel 在海洋中获取表面数据

> ID：12824219
> 
> 赞同：0
> 
> 时间：2012-10-10T16:35:12.933
> 
> 标签：ocean, petrel

有没有办法通过 Ocean 获取 petrel 中特定表面的 x、y 和 z 点值，并在 Petrel 输出窗口中打印出来？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T22:40:57.657

假设您指的是RegularHeightFieldSurface，您需要的所有信息都可以在Ocean SDK 中轻松获得。我相信您正在寻找 RegularHeightFieldSample。

PetrelLogger 可用于将字符串输出到消息日志、日志文件或标准消息框。

您在这里问了一个几乎相同的问题：[如何从 Petrel 中的其他曲面生成曲面](https://stackoverflow.com/questions/12693002/how-to-generate-a-surface-from-other-surfaces-in-petrel)。您承认的两个当前答案也回答了这个问题。

Ocean（与大多数中等复杂的 API 一样）确实需要一些前期投资来熟悉基础知识。Stack Overflow 无法替代自学...... :-)

# c# - 我应该为“未找到记录”使用什么样的异常？（C＃）

> ID：12824222
> 
> 赞同：53
> 
> 时间：2012-10-10T16:35:19.330
> 
> 标签：c#, exception

当我单击表格网格时，我有以下代码检索记录详细信息：

```
public ActionResult City(string rk)
{ 
    try
    {
        var city = _cityService.Get("0001I", rk);
        if (city == null)
        {
            throw new ServiceException("", "Error when fetching city " + rk);
        }
    }
} 
```

对于这个“未找到记录”问题，我应该使用什么样的异常？我看到有不同类型的异常，但我不确定哪种是合适的，或者即使我正确编码。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-10-10T17:04:39.023

[KeyNotFoundException](http://msdn.microsoft.com/en-us/library/system.collections.generic.keynotfoundexception.aspx)将是一个合理的选择，并且符合[以下 Microsoft 指南](http://msdn.microsoft.com/en-us/library/vstudio/ms229021(v=vs.100).aspx)：

> 考虑抛出驻留在系统命名空间中的现有异常，而不是创建自定义异常类型。

`Exception`但是，如果（再次来自 Microsoft 指南），您可以考虑创建自己的类型：

> ...您有一个错误情况，可以以与任何其他现有异常不同的方式以编程方式处理。

如果您确实创建了自己的`Exception`，您应该遵循[设计自定义异常的指南](http://msdn.microsoft.com/en-us/library/vstudio/ms229064(v=vs.100).aspx)，例如，您应该使您的`Exception`类型可序列化。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-10T16:37:05.173

您应该创建自己的异常，并`RecordNotFoundException`在这种情况下调用它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-10T16:44:07.910

创建自己的异常非常容易。只需创建一个类，为其命名、扩展`Exception`或其他一些异常类型，并提供您需要的构造函数（只需调用基本`Exception`构造函数）。

如果你想添加更多，你可以，但你通常不需要。

如果您发现自己为您的项目创建了许多异常，您可能希望创建一个基本异常类型（扩展 Exception），所有异常都扩展该类型。这是您在编写库时可能会做的事情。它将允许某人捕获特定异常，或从您的库中抛出的异常，或任何异常。

```
public class MySuperAwesomeException : Exception
{
    public MySuperAwesomeException() : base() { }
    public MySuperAwesomeException(string message) : base(message) { }
    public MySuperAwesomeException(string message, Exception innerException)
        : base(message, innerException) { }
} 
```

# c++ - 如何使用boost截断给定表达式的字符串

> ID：12824226
> 
> 赞同：1
> 
> 时间：2012-10-10T16:35:28.567
> 
> 标签：c++, string, boost, boost-regex

我需要`string`在下划线后截断 a 。例子：-

```
std::wstring name = L"Steve_Smith";
trim_right_if(name, is_any_of(L"_")); 
```

trim_right_if 不起作用，执行后名称保持不变。有没有办法使用`boost::regex`？

是的，我试图不使用`find_first_of`and `substr`，我知道它有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T16:37:21.457

`trim_right_if()`仅当它位于字符串的末尾时。
“史蒂夫_史密斯___” ==> “史蒂夫_史密斯”

你想做的是`replace_all(name, L"_", L"")`；

# python - 如何检查文件何时在 Python 中完成复制？

> ID：12824228
> 
> 赞同：6
> 
> 时间：2012-10-10T16:35:30.640
> 
> 标签：python, unix, file-io, background-process, updates

我想找出一种方法来提醒 python 脚本文件已完成复制。这是场景：

1.  `to_print`脚本通过不断轮询来监视文件夹`os.listdir()`。

2.  每次`os.listdir()`返回一个文件列表，其中存在一个以前没有见过的文件，脚本对该文件执行一些操作，包括打开它和操作它的内容。

当文件很小时这很好，并且将文件从其原始源复制到正在监视的目录所花费的时间少于直到下一次轮询之前的剩余时间`os.listdir()`。但是，如果轮询并找到文件，但它仍在复制过程中，则当脚本尝试对其执行操作时，文件内容已损坏。

相反，我希望能够（使用`os.stat`或以其他方式）知道当前正在复制文件，并等待它完成，直到我采取行动为止。

我目前的想法是`os.stat()`每次找到新文件时使用，然后等到下一次轮询并比较自上次轮询以来修改/创建的日期，如果它们保持不变，则该文件是“稳定的”，否则继续轮询，直到轮询为止。我不确定这是否可行，因为我不太熟悉 Linux/Unix 如何更新这些值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T16:44:40.137

**尝试[inotify](http://www.kernel.org/doc/man-pages/online/pages/man7/inotify.7.html)。**

这是用于查看文件的 Linux 标准。对于您的用例，该事件`IN_CLOSE_WRITE`似乎很有希望。有一个[用于 inotify 的 Python 库](https://github.com/seb-m/pyinotify)。一个非常简单的例子（取自[那里](https://github.com/seb-m/pyinotify/blob/master/python2/examples/loop.py)）。您需要对其进行修改以仅捕获`IN_CLOSE_WRITE`事件。

```
# Example: loops monitoring events forever.
#
import pyinotify

# Instanciate a new WatchManager (will be used to store watches).

wm = pyinotify.WatchManager()
# Associate this WatchManager with a Notifier (will be used to report and
# process events).

notifier = pyinotify.Notifier(wm)
# Add a new watch on /tmp for ALL_EVENTS.
wm.add_watch('/tmp', pyinotify.ALL_EVENTS) # <-- replace by IN_CLOSE_WRITE

# Loop forever and handle events.
notifier.loop() 
```

这是一个广泛的 API 文档：[http ://seb-m.github.com/pyinotify/](http://seb-m.github.com/pyinotify/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T16:38:07.770

由于可以在轮询间隔内复制文件，因此只需在检查新文件之前处理*上次轮询找到的新文件。*换句话说，而不是这样：

```
while True:
    newfiles = check_for_new_files()
    process(newfiles)
    time.sleep(pollinterval) 
```

做这个：

```
newfiles = []

while True:
    process(newfiles)
    newfiles = check_for_new_files()
    time.sleep(pollinterval) 
```

或者只是将等待放在循环中间（实际上效果相同）：

```
while True:
    newfiles = check_for_new_files()
    time.sleep(pollinterval)
    process(newfiles) 
```

# c# - 具有多个项目的 WPF 示例数据

> ID：12824229
> 
> 赞同：0
> 
> 时间：2012-10-10T16:35:39.410
> 
> 标签：c#, wpf

我有两个项目的解决方案。第一个项目包含数据库模型的定义，第二个项目包含表单。我想知道在第二个项目中使用第一个项目中定义的模型的最佳方法是什么。我如何链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T17:33:14.260

查看[MVVM 架构](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)

1.  将可见窗口“表单”/页面放入 View 项目（仅处理用户交互和 GUI 操作。）
2.  创建一个处理使用数据库模型的业务逻辑的视图模型项目。
3.  使用 View Model 类绑定到视图上的项目以显示数据。

通过拆分和分离模型、视图和业务逻辑（视图模型）的关注点，您可以获得 MVVM 架构的好处。

# php - 如何将答案插入“答案”表

> ID：12824230
> 
> 赞同：1
> 
> 时间：2012-10-10T16:35:49.167
> 
> 标签：php, mysqli

JSfiddle：http: [//jsfiddle.net/ybZvv/57/](http://jsfiddle.net/ybZvv/57/)

我在这里有一个小提琴，用户可以在其中附加行并为每一行选择答案。要使用小提琴，请按照以下步骤操作：

1.  当您打开小提琴时，单击“添加问题”按钮两次。这将在下面附加两行。
2.  在第一行选择按钮 A 和 B 中，这些按钮将变为绿色，在下方您将看到这些选定按钮的文本输入值。
3.  在第二行选择按钮 A、C 和 E，这些按钮将变为绿色，在下方您将看到这些选定按钮的文本输入值。

现在我想做的是，对于每一行中的每个答案，它们都将包含它自己的“AnswerId”，并且答案将被插入到“Answer”表的“Answer”列中。

以下是 jsfiddle 答案后的表格应该是什么样子：

答案表

```
AnswerId (auto)    Answer
5                   AB
6                   ACE 
```

我在上表中遇到的唯一问题是它没有在“答案”列中插入答案。

然后我想将“答案”表中的“AnswerId”存储在“问题”表中。所以我附加了 2 行，“QuestionId”是 1 和 2，下面是“问题”表的样子：

问题表

```
QuestionId    AnswerId
1               5
2               6 
```

上表工作正常。

以下是我收到的错误：

*   注意：未定义的偏移量：0 在 /web/stud/QandATable3.php 的第 172 行

我的问题是，通过查看下面的代码，如何修复上述错误，以便能够在“答案”列下插入答案？

下面是 php/mysqli 代码（我已经注释了发生错误的行）：

```
 $i = 0;
    $c = count($_POST['gridValues']); //Counts each appended row which works

    for($i = 0;  $i < $c; $i++ ){

 $selected_answer = $_POST['value'];

     $answersql = "INSERT INTO Answer (Answer) 
        VALUES (?)";

          if (!$insertanswer = $mysqli->prepare($answersql)) {
          // Handle errors with prepare operation here
        }  

        $insertanswer->bind_param("s", $selected_answer);

            $insertanswer->execute();

            if ($insertanswer->errno) {
              // Handle query error here
            }

            $insertanswer->close();

            $lastID = $mysqli->insert_id;

    $questionsql = "INSERT INTO Question (QuestionId, AnswerId) 
        VALUES (?, ?)";

        if (!$insert = $mysqli->prepare($questionsql)) {
          // Handle errors with prepare operation here
        }

    $insert->bind_param("ii", $_POST['numQuestion'][$i],  $lastID);

            $insert->execute();

            if ($insert->errno) {
              // Handle query error here
            }

            $insert->close();

    }

    ?> 
```

下面是成功为每一行附加一个问题编号的代码：

```
var qnum = 1;

var $qid = $("<td class='qid'></td>").text(qnum);

          $('.num_questions').each( function() {

    var $this = $(this);

     var $questionNumber = $("<input type='hidden' class='num_questionsRow'>").attr('name',$this.attr('name')+"[]")
                   .attr('value',$this.val());

     $qid.append($questionNumber);                             

    ++qnum;    
    $(".questionNum").text(qnum);
    $(".num_questions").val(qnum);

 $tr.append($qid); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T16:45:31.497

您将这些值作为一个数组发布，但它们不会是，var_dump 出 $_POST 值以查看它实际返回的内容。

作为记录，该代码绝对是一团糟。我不想在这里刻薄，但您的 JS 允许对同一个问题有多个答案。PHP中的选择完全是浪费，整个部分可以替换为：

```
$selected_answer = $_POST['value']; 
```

无论如何，您正在运行选择以将变量设置为后值...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T17:23:55.380

我在客户端和服务器端都看到了问题。我将首先解决客户端问题。

您创建的输入字段的名称格式为：`value[answerXRow]`，其中`X`是选定的答案字符。如果用户在多个答案中选择了相同的字符，则会有多个同名的输入字段（例如`value[answerARow]`，根据您的说明两个字段）。此外，您的 PHP 代码无法区分哪个`value`是针对哪个问题，因为它们都将在同一个`value`数组中提交。

我的建议是使用这种格式的多维数组：`value[n][]`，`n`题号在哪里。使用此新设置，您应该最终得到以下输入字段：

```
<input type="hidden" value="A" name="value[1][]">
<input type="hidden" value="B" name="value[1][]">
<input type="hidden" value="A" name="value[2][]">
<input type="hidden" value="C" name="value[2][]">
<input type="hidden" value="E" name="value[2][]"> 
```

请注意，所选值已编码在`value`属性中。该`name`属性仅包含该值所属的问题。

现在，在服务器端，您需要遍历`$_POST['value']`数组：

```
// $questionNumber is simply n in value[n][]
// $answers is an array of value attributes from <input>s for this question

foreach ($_POST['value'] as $questionNumber => $answers) {
    // combine all the answers into a single string (e.g. ACE)
    $selected_answer = implode('', $answers);

    // continue onto inserting rows into the Answer and Questions tables
    // ...
} 
```

# c# - 如何在 Umbraco 中发布节点但不创建指向它的链接

> ID：12824234
> 
> 赞同：0
> 
> 时间：2012-10-10T16:36:04.967
> 
> 标签：c#, asp.net, umbraco

我正在尝试创建一种“节点指针”文档类型，允许内容管理器选择一个或多个不在主节点下的节点。这基本上是为了让他们可以选择将哪些控件添加到页面，而无需在页面下创建大量控件。我的问题是，如何创建该“节点指针”并在不创建指向它的链接的情况下发布它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T20:58:07.950

链接是由您的模板生成的，因此您需要在模板中包含一些逻辑以排除您不希望链接到的那些页面。

您可以通过检查 docTypes，或排除没有模板的项目，或使用诸如 umbracoHaviHide 之类的属性来做到这一点。

或者避免创建不是页面的节点，也许像这样：
我们经常使用类似的技术来创建侧边栏元素的集合，这些元素在主分支之外预制，然后重新使用。通过 uComponents MultiNodeTreePicker 选择所需的组件来重新使用它们，这是每个页面上的一个属性，应该有可选择的侧边栏组件。这样，主分支下就没有不应该是页面的节点，因此您不必做任何事情来排除指向它们的链接。

**编辑**
CMS 会给每个节点一个 URL，这通常无关紧要，因为如果没有与该节点关联的模板，任何访问该 url 的人都会得到 404 页面。旧版本的 umbraco 将提供空白页。（4.5 之前？是吗？我想？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T17:11:49.300

你不能。

如果您在内容区域中创建节点，它将始终具有关联的 url。您可以确保文档类型没有默认模板，如果您不希望它是可导航的，或者您可以为其分配一个空白模板。

或者，您可以创建一个新的媒体类型。默认情况下，媒体节点没有关联的 url。

# python - python - 如何从python中的输入文本中计算单个单词的频率和双字计数？

> ID：12824236
> 
> 赞同：0
> 
> 时间：2012-10-10T16:36:11.500
> 
> 标签：python, regex

您好，我想从 python 中的输入文本中计算单个字数和双字数。前任。

```
"what is your name ? what you want from me ?
 You know best way to earn money is Hardwork 
 what is your aim ?" 
```

输出：

```
sinle W.C. : 
what   3
 is    3
 your  2
you    2 
```

等等..

```
Double W.C. :
what is 2
is your 2
your name 1
what you 1 
```

等等..请张贴这样做的方法？我使用以下代码进行单字计数：

ws={}

对于文本中的行：

```
for wrd in line:

    if wrd not in ws:

        ws[wrd]=1

    else:

        ws[wrd]+=1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T16:40:55.743

```
from collections import Counter

s = "..."

words = s.split()
pairs = zip(words, words[1:])

single_words, double_words = Counter(words), Counter(pairs) 
```

Output:

```
print "sinle W.C."
for word, count in sorted(single_words.items(), key=lambda x: -x[1]):
    print word, count

print "double W.C."
for pair, count in sorted(double_words.items(), key=lambda x: -x[1]):
    print pair, count 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T16:41:11.067

```
import nltk
from nltk import bigrams
from nltk import trigrams

tokens = nltk.word_tokenize(text)
tokens = [token.lower() for token in tokens if len(token) > 1]
bi_tokens = bigrams(tokens)

print [(item, tokens.count(item)) for item in sorted(set(tokens))]
print [(item, bi_tokens.count(item)) for item in sorted(set(bi_tokens))] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T16:44:21.217

这行得通。使用默认字典。蟒蛇2.6

```
>>> from collections import defaultdict
>>> d = defaultdict(int)
>>> string = "what is your name ? what you want from me ?\n
    You know best way to earn money is Hardwork\n what is your aim ?"
>>> l = string.split()
>>> for i in l:
    d[i]+=1

>>> d
defaultdict(<type 'int'>, {'me': 1, 'aim': 1, 'what': 3, 'from': 1, 'name': 1, 
    'You': 1, 'money': 1, 'is': 3, 'earn': 1, 'best': 1, 'Hardwork': 1, 'to': 1, 
    'way': 1, 'know': 1, 'want': 1, 'you': 1, 'your': 2, '?': 3})
>>> d2 = defaultdict(int)
>>> for i in zip(l[:-1], l[1:]):
    d2[i]+=1

>>> d2
defaultdict(<type 'int'>, {('You', 'know'): 1, ('earn', 'money'): 1, 
    ('is', 'Hardwork'): 1, ('you', 'want'): 1, ('know', 'best'): 1, 
    ('what', 'is'): 2, ('your', 'name'): 1, ('from', 'me'): 1, 
    ('name', '?'): 1, ('?', 'You'): 1, ('?', 'what'): 1, ('to', 'earn'): 1, 
    ('aim', '?'): 1, ('way', 'to'): 1, ('Hardwork', 'what'): 1, 
    ('money', 'is'): 1, ('me', '?'): 1, ('what', 'you'): 1, ('best', 'way'): 1,
    ('want', 'from'): 1, ('is', 'your'): 2, ('your', 'aim'): 1})
>>> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-27T05:39:00.040

我意识到这个问题已经有几年了。我今天写了一个小程序来计算单词文档（docx）中的单个单词。我使用 docx2txt 从 word 文档中获取文本，并使用我的第一个正则表达式来删除除字母、数字或空格以外的所有字符，并将所有字符切换为大写。我把这个放进去是因为这个问题没有得到回答。

这是我的小测试程序，以防它可以帮助任何人。

```
mydoc = 'I:/flashdrive/pmw/pmw_py.docx'

words_all = {}

#####

import docx2txt

my_text = docx2txt.process(mydoc)
print(my_text)

my_text_org = my_text

import re

    #added this code for the double words

from collections import Counter

pairs = zip(words, words[1:])
pair_list = Counter(pairs)

print('before pair listing')

for pair, count in sorted(pair_list.items(), key=lambda x: -x[1]):
   #print (''.join('{} {}'.format(*pair)), count) #worked
   #print(' '.join(pair), '', count) #worked  

   new_pair = ("{} {}")
   my_pair = new_pair.format(pair[0],pair[1])
   print ((my_pair), ": ", count)

#end of added code

my_text = re.sub('[\W_]+', ' ', my_text.upper(), flags=re.UNICODE)
print(my_text)

words = my_text.split()

words_org = words #just in case I may need the original version later

for i in words:  
     if not i in words_all:
         words_all[i] = words.count(i)

for k,v in sorted(words_all.items()):
     print(k, v)

print("Number of items in word list: {}".format(len(words_all))) 
```

# javascript - 如何通过单击 div 外部的按钮来更改 div 的内容？

> ID：12824241
> 
> 赞同：4
> 
> 时间：2012-10-10T16:36:42.753
> 
> 标签：javascript, jquery, css, html

感谢您花时间阅读这篇文章。希望那些问同样问题的人也能得到答案。

我正在开发一个分为 8 个大 div 的单页网站，这样当您单击菜单栏时，它会将您带到其中一个 div（或“页面）”。

在其中一个 div（或页面）上，这是我网站的介绍部分，我试图介绍这种效果：http://jsfiddle.net/unbornink/LUKGt/

我有一排按钮，例如“我们是谁”、“我们做什么”、“我们的想法”……我在这排按钮下面有一个 div，当你点击不同的文本时，会显示不同的文本纽扣。

我尝试遵循[http://jsfiddle.net/unbornink/LUKGt/](http://jsfiddle.net/unbornink/LUKGt/)建议的所有步骤。不幸的是，我无法启动按钮。

这是我的工作代码：

```
<head>    
<link href="textContainer.css" rel="stylesheet" type="text/css" />
<script type="text/javascript"     src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>

<style type="text/css">   <------I put these in CSS style sheet.
.textWord_about{
position: absolute;
font-family: Calibri;
font-size: 14px;
top: 22px;
left: 29px;
width: 650px;
height: 390px;
text-align: left;
background-image: url(images/slider_bkgd.png);
background-repeat: repeat;
}
.textContainer_about {
position: absolute;
top: 870px;
left: 234px;
width: 727px;
height: 452px;
z-index: 20;
color: rgb(4,4,4);
display: block;
background-image: url(images/slider_bkgd.png);
background-repeat: repeat;
overflow: visible;
}
.links {
font-family: Calibri;
font-size: 14px;
}
</style>
</head>

<body>
<div id="menu_about">
<a class="link" href="#about" data-link="first">&nbsp;&nbsp; Why We Exist</a> &#8226; <a class="link" href="#about" data-link="second">Who We Are</a> &#8226;
<a class="link" href="#about" data-link="third">What We Do</a> &#8226; 
<a class="link" href="#about" data-link="fourth">How We Think</a> &#8226; 
<a class="link" href="#about" data-link="fifth">Where We Are Going</a>
</div>
<div id="pages_about" class="textContainer_about">
<div class="textWord_about" data-link="first">
 <p>ffffffffffffffffffffffffffff</p>
 </div>
<div class="textWord_about" data-link="second">
  <p>ffffffffffffffffffffffffffff</p>
</div>
<div class="textWord_about" data-link="third">
  <p>ffffffffffffffffffffffffffff</p>
</div>
<div class="textWord_about" data-link="fourth">
  <p>ffffffffffffffffffffffffffff</p>
  <p>ffffffffffffffffffffffffffff</p>
  <p>ffffffffffffffffffffffffffff</p>
  <p>ffffffffffffffffffffffffffff</p>
  <p>ffffffffffffffffffffffffffff</p>
</div>
<div class="textWord_about" data-link="fifth">
  <p>ffffffffffffffffffffffffffff</p>
</div>
</div>

<script type="text/javascript">
$('.textword_about').hide();

$('.link').click(function() {
    $('.textword_about').hide();
    $('.textword_about[data-link=' + $(this).data('link') + ']').fadeIn({
        width: '200px'
    }, 300);
});​
</script> 
```

请提出解决方案！非常感激！

* * *

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-10T16:39:27.817

您的选择器中有错字。更改`textword_about`为[注意中`textWord_about`的字母]`W``textWord_about`

**固定代码： http:** [//jsfiddle.net/LUKGt/5/](http://jsfiddle.net/LUKGt/5/)（没有你的样式表）

**代码：**

```
$('.textWord_about').hide();

$('.link').click(function() {
    $('.textWord_about').hide();
    $('.textWord_about[data-link=' + $(this).data('link') + ']').fadeIn({
        width: '200px'
    }, 300);
});​ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T16:45:01.573

`:active`如果您的目标受众使用支持伪类的浏览器，则您不必为此使用 JavaScript 。

[纯 CSS 版本](http://jsfiddle.net/kqK3A/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T17:17:46.353

我认为，你不会观察到或错过的主要事情是，

```
You are using 'textword_about' instead of 'textWord_about'.
i.e you are using 'textWord_about' in html and 'textword_about' in javascript. 
```

尝试使它们相同，即在 html 和 javascript 中保持相同。

# jquery - 隐藏特定部分/字段集中的所有字段

> ID：12824249
> 
> 赞同：0
> 
> 时间：2012-10-10T16:37:06.483
> 
> 标签：jquery

我正在做一个更大的项目并想出了一个想法，我似乎无法使用 jquery 开始工作。客户有网络表格。表单上有一个下拉字段，它将使某些部分/字段集显示并在选择时消失。我做到了，但是客户希望根据从下拉列表中选择的类型显示或不显示这些部分中的某些字段。

我的想法 - 我想隐藏一个部分中的所有字段有没有办法说隐藏这个部分中的所有内容，除了。

例如：

```
<fieldset name="Group1" id="sectionOne">
                <legend>Section 1</legend>
                <input id="txt_123" type="text" />
                <input id="txt_124" type="text" />
                <input id="txt_125" type="text" />
                <input id="txt_125" type="text" />
                <input id="txt_126" type="text" />
            </fieldset>
</body> 
```

如果我想说隐藏#sectionOne 中的所有内容。然后稍后我想说隐藏#sectionOne 中的所有内容，除了....

请记住，我将有任意数量的部分和任意数量的字段，所以我想要一种更短的方式，而不仅仅是行`$(#txt_123).hide();/$(#txt_124).show();`

我只是真的想要一个干净的方式说隐藏本节中的所有内容，除了......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T16:39:50.250

为什么不隐藏部分本身？

```
$('#sectionOne').slideUp(); 
```

如果您真的想隐藏内容，请使用

```
$('#sectionOne legend,input,select,textarea').slideUp(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T16:51:06.620

你可以做，

```
$("fieldset#sectionOne input").hide(); 
```

关于 except 选项，
我认为最好通过将公共类应用于要隐藏的所有元素来选择要隐藏的元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T16:43:49.157

实现此目的的一种方法是将类应用于输入。

```
$("fieldset").find("input").each(function() {
  if ( $(this).hasClass("hidden") ...
}); 
```

您还可以添加一些附加功能...注意：不确定您打算如何显示内容...

```
$("fieldset").click(function() {
  $(this).find("input").each(function() {
    $(this).click(function() { $(this).removeClass("hidden") });
  });
}); 
```

等等等等……

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T16:53:37.383

向该输入添加一个类，

```
<input class ='inputs'> 
```

使用 jquery ： $(".inputs").hide();

# c++ - gdb - 列出当前函数的源而不输入其名称

> ID：12824251
> 
> 赞同：21
> 
> 时间：2012-10-10T16:37:10.363
> 
> 标签：c++, c, linux, gdb

在 GDB 中，命令：

```
list function 
```

将列出该函数的所有源。

是否有一个命令可以列出您当前所在函数的所有源代码，而无需您手动输入函数名称？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-10T20:47:53.027

```
(gdb) help list
List specified function or line.
With no argument, lists ten more lines after or around previous listing.
"list -" lists the ten lines before a previous ten-line listing.
One argument specifies a line, and ten lines are listed around that line.
Two arguments with comma between specify starting and ending lines to list.
Lines can be specified in these ways:
  LINENUM, to list around that line in current file,
  FILE:LINENUM, to list around that line in that file,
  FUNCTION, to list around beginning of that function,
  FILE:FUNCTION, to distinguish among like-named static functions.
  *ADDRESS, to list around the line containing that address.
With two args if one is empty it stands for ten lines away from the other arg. 
```

这才`*ADDRESS`是有趣的。

在 x86/x64 上，当前指针在`rip`寄存器中，所以：

```
(gdb) list *$pc
0x7ffff7b018a0 is at ../sysdeps/unix/syscall-template.S:82.
77  in ../sysdeps/unix/syscall-template.S 
```

该示例来自`cat`命令，因为我手头没有任何调试信息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-06-17T16:22:30.357

当您在函数类型***bt***中停止以进行回溯时。Backtrace 将列出当前堆栈。顶部的元素 #0 通常是您感兴趣的函数，并且还会列出源文件和行号。

例如：

```
(gdb) bt
#0  myClass::EntityTypeStruct::readAttributes (this=0x7fffd00066e0, buf=0x7fffd0006020 "", len=48)
    at /team/project/src/EntityTypeStruct.cc:55
#1  0x000000000044ca86 in workerThread (ts=0x7fffea71dcc0)
    at /team/project/src/threads/workerThread.cc:219
#2  0x00007ffff775e9d1 in start_thread () from /lib64/libpthread.so.0
#3  0x00007ffff6c07b5d in clone () from /lib64/libc.so.6 
```

有关更多信息，请参见[http://www.chemie.fu-berlin.de/chemnet/use/info/gdb/gdb_7.html#SEC42](http://www.chemie.fu-berlin.de/chemnet/use/info/gdb/gdb_7.html#SEC42)。

此外，当您设置断点时，您可以指定每次遇到该断点时都会运行的***命令。***见[http://www.chemie.fu-berlin.de/chemnet/use/info/gdb/gdb_6.html#SEC35](http://www.chemie.fu-berlin.de/chemnet/use/info/gdb/gdb_6.html#SEC35)

因此，如果您知道函数中有多少行，您可以设置一个命令来列出函数的所有源代码行：

```
(gdb) break myClass::EntityTypeStruct::readAttributes
Breakpoint 1 at 0x61ec3b: file /team/project/src/EntityTypeStruct.cc, line 38.
(gdb) commands 1
list 38,104
end 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-10T17:13:56.447

gdbtui 可用于在调试期间查看源代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-25T20:18:38.773

'frame' 命令显示函数名称和当前行位置，并将 list 的当前行设置为当前可执行行。

```
set listsize 17
frame
list 
```

列出当前行周围的 8 行。

# jython - 从 dir() 结果中为 getter/setter 过滤 jython 生成的属性字段

> ID：12824253
> 
> 赞同：0
> 
> 时间：2012-10-10T16:37:18.927
> 
> 标签：jython

我今天在 jython 中使用 java 对象遇到了一个问题，因为 jython 试图变得智能并自动为（简单）getter/setter 方法创建属性 - 对于每个方法，创建一个带有前导`get`/`set`删除和下一个字母转换为小写的字段：

```
//java code
class MyClass {
    public List<Thing> getAllThings() { ... }
    public List<Thing> getSpecificThings(String filter) { ... }
    public void setSomeThing(SomeThing x) { ... }
    [...]
}

#jython code
obj = MyClass()
hasattr(obj, "allThings") #-> True
hasattr(obj, "specificThings") #-> False because getSpecificThings has a param
hasattr(obj, "someThing") #-> False BUT
"someThing" in dir(obj)   #-> True 
```

最后一行在这里总结了我的问题 - 的结果`dir`包含这些字段（即使在`obj.class`而不是执行时`obj`）。我需要一个可在对象上调用的所有方法的列表，对于我的对象来说，这基本上是`dir`没有这些属性的结果，并且经过过滤以排除继承自的所有内容`java.lang.Object`以及以下划线开头的内容（这样做的目的是自动将一些 python 类转换为java 等价物，例如地图的字典）。理论上我可以使用`__dict__`which 不包含它们，但这意味着我也必须递归地评估基类`__dict__`，我想避免这种情况。我目前正在做的是查看属性是否确实存在，然后检查它是否有`argslist`属性（意味着它是一个方法），`dir`除了生成的属性之外的每个条目都是如此：

```
for entry in dir(obj):
    #skip things starting with an underscore or inherited from Object
    if entry.startswith("_") or entry in dir(java.lang.Object): continue
    #check if the dir entry is a fake setter property
    if not hasattr(obj, entry): continue
    #check if the dir entry has an argslist attribute (false for getter props)
    e = getattr(obj, entry)
    if not hasattr(e, "argslist"): continue
    #start actual processing of the entry... 
```

这种方法的问题在于，所讨论的对象是 bean 的接口，而 getSomething 方法通常从数据库中获取数据，因此对`getattr`属性的调用会往返于数据库，这可能需要几秒钟并浪费大量内存。

我可以阻止 jython 生成这些属性吗？如果没有，是否有人知道如何在**不先访问它们**的情况下过滤掉这些属性？我唯一能想到的就是检查是否`dir`包含一个名为`get`/的方法`set<property>`，但这看起来很骇人，并且可能会产生误报，必须避免这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T11:43:41.983

答案比预期的要容易。虽然`hasattr`属性的a`True`用于对象实例，但`False`如果所讨论的 get 方法不是静态的，则它用于对象类 - 该类没有该属性，因为您无法在其上执行该方法。更新后的循环现在看起来像这样：

```
for entry in dir(obj):
    #skip things starting with an underscore or inherited from Object
    if entry.startswith("_") or entry in dir(java.lang.Object): continue
    #check if the dir entry is a fake property
    if not hasattr(obj.class, entry): continue
    #check if the dir entry has an argslist attribute (false if not a method)
    e = getattr(obj, entry)
    if not hasattr(e, "argslist"): continue
    #start actual processing of the entry... 
```

# sql - SQL 获取 Jobs 的经过时间

> ID：12824256
> 
> 赞同：0
> 
> 时间：2012-10-10T16:37:21.377
> 
> 标签：sql, oracle

我有一个包含事务时间的表，1 个批次将触发多个作业。我想为批处理添加每个作业中经过的时间。事务表的格式如下，

```
START_TIME          JOB END_TIME
1/7/2012 12:10:24   AA  1/7/2012 12:18:49
1/7/2012 12:10:23   AA  1/7/2012 12:10:23
1/7/2012 12:10:24   AA  1/7/2012 12:10:24
7/7/2012 16:10:33   AA  7/7/2012 16:15:23
7/7/2012 16:10:32   AA  7/7/2012 16:10:32
7/7/2012 16:10:33   AA  7/7/2012 16:10:33
7/7/2012 17:58:21   BB  7/7/2012 19:05:41
7/7/2012 16:40:25   BB  7/7/2012 16:40:25
7/7/2012 17:56:58   BB  7/7/2012 17:56:58
1/7/2012 14:00:11   BB  1/7/2012 14:47:09
1/7/2012 12:40:19   BB  1/7/2012 12:40:19
1/7/2012 13:58:33   BB  1/7/2012 13:58:33 
```

我想要达到的是，

```
DATE       JOB    TIME SPENT
1/7/2012   AA     ADDING THE TIME SPENT for AA on 1/7/2012
7/7/2012   AA     ADDING THE TIME SPENT for AA on 7/7/2012
1/7/2012   BB 
7/7/2012   BB 
```

我可以知道什么 SQL 可以达到预期的效果吗？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T16:41:59.670

假设`START_TIME`and`END_TIME`都是`DATE`数据类型（而不是`TIMESTAMP`or `VARCHAR2`）并假设`START_TIME`and`END_TIME`总是在同一天（即它不能在 1/7 晚开始并在 1/8 早点结束）

```
SELECT trunc(start_time), 
       job, 
       sum( end_time - start_time ) total_time_in_days
  FROM your_table
 GROUP BY trunc(start_time), job
 ORDER BY job, trunc(start_time) 
```

总数将以天数表示。如果你想得到一个`INTERVAL`背

```
SELECT trunc(start_time), 
       job, 
       sum( numtodsinterval( end_time - start_time, 'day' ) ) elapsed_interval
  FROM your_table
 GROUP BY trunc(start_time), job
 ORDER BY job, trunc(start_time) 
```

# cassandra - Cassandra：更大的复制因子 = 更快的读取？

> ID：12824259
> 
> 赞同：8
> 
> 时间：2012-10-10T16:37:25.807
> 
> 标签：cassandra

增加集群上的复制因子是否也会提高读取速度？

我知道当复制因子为 1，并且有 6 个节点并且令牌平均分配时 - 那么给定节点只有 16.66% 的机会拥有数据，如果它没有，它会询问负责的节点，这需要额外的时间。

我猜想将复制因子设置为 6，每个节点都有完整的数据集，并且可以立即获取数据而无需询问其他节点（我们使用读取一致性 = 1）。所以增加复制因子应该会提高阅读速度。它是否正确？

我们的应用程序的写入次数相对较少，但每秒有超过 10k 次 get() 操作。我们在集群中有 6 个节点，我们需要所有读取操作都非常快，这就是为什么我们正在寻找一种方法来提高 cassandra 的读取性能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T20:30:46.910

这是正确的，只要您使用 ConsistencyLevel.ONE。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-11T21:19:18.960

我实际上运行了 ycsb 基准测试——100% 写入和 100% 读取——来测试它。在一致性级别保持在 1 时，增加复制因子似乎会导致读取速度变慢。

在一个 8 节点集群中，这是我得到的数字：

1600 万次读取操作-ycsb 工作负载 C

代表因子_读取时间（分钟）

1 _ 10.8840833333333

2_11.1243666666667

4_17.4050333333333

对于更大的尺寸，跳跃更大。

谁能解释为什么？

# java - 如何将扩展另一个类的类外部化

> ID：12824265
> 
> 赞同：0
> 
> 时间：2012-10-10T16:37:56.693
> 
> 标签：java

**介绍**

我有以下课程：

```
public class Foo extends ArrayList<ElementsClass> implements Externalizable {
    Field field1 = new Field();
    Field field2 = new Field();

    ...
} 
```

我实现了这些方法`writeExternal`，`readExternal`如下所示：

```
public void writeExternal(ObjectOutput out) throws IOException {        
    out.writeObject(field1);
    out.writeObject(field2);
}

public void readExternal(ObjectInput in) throws IOException,ClassNotFoundException {
    field1 = (Field) in.readObject();
    field2 = (Field) in.readObject();
} 
```

**观察**

其中一个领域不是`Serializable`这就是我实施`Externalizable`. 我只想将那些我能够做到的事情外化。

**问题**

虽然我知道`ArrayList<ElementsClass>`if`ElementsClass`是可序列化的，但我不知道如何将类`Foo`本身外部化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T20:25:28.100

试试这个：

```
public void writeExternal(ObjectOutput out) throws IOException {        
    out.writeObject(super.toArray());
    out.writeObject(field1);
    out.writeObject(field2);
}

public void readExternal(ObjectInput in) throws IOException,ClassNotFoundException {
    Object[] arr = (Object[]) in.readObject();
    for (int k=0; k<arr.length; k++) super.add(arr[k]);
    field1 = (Field) in.readObject();
    field2 = (Field) in.readObject();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T16:48:07.777

你的课`Foo`不是已经外化了吗？

如果执行如下语句，它应该在文件中写入具有外部属性条目的对象。

```
 Foo class = new Foo();
    FileOutputStream fos = new FileOutputStream("temp");
    ObjectOutputStream oos= new ObjectOutputStream(fos);
    oos.writeObject(class ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T16:59:25.917

我认为你应该尝试自定义序列化，就像这里描述的那样：[https ://stackoverflow.com/a/7290812/1548788](https://stackoverflow.com/a/7290812/1548788)

# javascript - 选择 jQuery 插件

> ID：12824267
> 
> 赞同：2
> 
> 时间：2012-10-10T16:38:01.240
> 
> 标签：javascript, jquery, ajax, select

我正在寻找一个 jQuery 插件，它可以让我在图像中做类似的事情： ![在此处输入图像描述](../Images/9af382267d6b3fd6809726bf559355dc.png)

基本上，用户可以选择一个/多个这样的选项。它看起来像标签，但它不是真正的标签，每个元素也必须带有它的 ID。

（将来应该可以使用 ajax 手动添加选项。但现在没有必要）

任何帮助是极大的赞赏 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T16:40:24.057

This shouldn't really require jquery at all. You can just create form buttons and style them using CSS.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T16:55:10.303

jQuery UI 复选框应该适合你：

[http://jqueryui.com/button/#checkbox](http://jqueryui.com/button/#checkbox)

如果您使用的是 Twitter Bootstrap，复选框应该可以为您解决问题。

[http://twitter.github.com/bootstrap/javascript.html#buttons](http://twitter.github.com/bootstrap/javascript.html#buttons)

如果您不使用 jQuery UI 或 Twitter 引导程序，您可以使用少量 CSS 和最少或不使用 javascript 自行实现。

# node.js - node.js 设置超时问题

> ID：12824268
> 
> 赞同：1
> 
> 时间：2012-10-10T16:38:05.057
> 
> 标签：node.js

我正在努力学习一些关于 node.js 的知识，并且我已经达到了一个障碍点（没有双关语的意思）。我意识到以前曾以各种方式提出过这个问题，但我觉得我已经消化了这些答案，但仍然遗漏了一些东西。

下面的代码也在要点上：[https ://gist.github.com/3866651](https://gist.github.com/3866651)

基本上，我不相信 setTimeout 调用会阻塞，因为“setTimeout called”行会立即打印出来。但是，我很难理解为什么它仍然需要整整 20 秒来处理两个连续发出的请求。

我真的错过了什么吗？有没有办法在第一个 sendTimeout 发送响应之前获得第二个请求的服务？

我看过“子进程”，但这似乎与系统调用直接相关，而不是调用 javascript 函数。

```
var http = require("http");

function do_thing(response, callback){
  var d=new Date();
  console.log('calling setTimeout '+d.toLocaleTimeString());
  var timer = setTimeout(function(){
    var d=new Date();
    console.log('timeout callback '+d.toLocaleTimeString());
    respond(response);
  }, 10000);
  var d2=new Date();
  console.log('setTimeout called '+d2.toLocaleTimeString());
}

function respond(response){
  var d=new Date();
  console.log('sending response '+d.toLocaleTimeString());
  response.writeHead(200, {"Content-Type": "text/plain"});
  response.write("hello at "+d.toLocaleTimeString());
  response.end();
}

http.createServer(function(request, response) {
  var d=new Date();
  console.log('got request '+d.toLocaleTimeString());
  do_thing(response, respond);
}).listen(8888);

var d=new Date();
console.log('running... '+d.toLocaleTimeString());

//Two web requests in close succession, still have to wait 20 secs for 2nd request to complete...
//OUTPUT AS FOLLOWS:
//
//running... 12:12:00
//got request 12:12:06
//calling setTimeout 12:12:06
//setTimeout called 12:12:06
//timeout callback 12:12:16
//sending response 12:12:16
//got request 12:12:16
//calling setTimeout 12:12:16
//setTimeout called 12:12:16
//timeout callback 12:12:26
//sending response 12:12:26 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T16:21:25.237

代码看起来很棒。setTimeout 立即返回。稍后会调用其中的函数（在这种情况下大约需要 10 秒）。这应该有效。

# javascript - Selecting custom attributes within a with jQuery

> ID：12824272
> 
> 赞同：0
> 
> 时间：2012-10-10T16:38:20.257
> 
> 标签：javascript, jquery, asp.net, html

I have a table that has the following td:

```
<td>
      <div id="spcheck">
         <div id="check" 
              data-1='<%# Eval("sth1") %>' 
              data-2='<%# Eval("sth2") %>' 
              data-3='<%# Eval("sth3") %>'>
              <asp:CheckBox ID="chk1" runat="server"/>
          </div>
      </div>
</td> 
```

This is the last one. It has custom attributes as you can see. I need to get the values data-1, data-2 and data-3 if have the checkbox cheked. I have the folowing code that gets each tr but I need to go inside the td and get the attribute values:

```
$('#ListView2_itemPlaceholderContainer tbody tr').each(function () {
                // I GET THE <TR>
                $(this).find('input:checkbox:checked').each(function () {
                    // I NEED THIS CODE
                    });
                });
            }); 
```

Thanks in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T16:42:32.900

因为属性在 div 上，所以需要先找到 div 并获取 div 的属性。可以使用`.attr()`div 上的 来获取

```
 $(this).find('input:checkbox:checked').each(function () {
         var $closestDiv = $(this).closest('div');  // Find the div

         var $data1 = $closestDiv.attr('data-1');  // data-1
         var $data2 = $closestDiv.attr('data-2');  // data-2
         var $data3 = $closestDiv.attr('data-3');  // data-3
  }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T16:43:21.030

```
$('#ListView2_itemPlaceholderContainer tbody tr').each(function () {
    $(this).find('input:checkbox:checked').each(function () {
           var dataElement = $(this).closest('[data-1]');

           var data1 = dataElement.data('1');
           var data2 = dataElement.data('2');
           var data3 = dataElement.data('3');
        });
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T16:41:59.893

```
$(this).attr('data-1'); 
```

应该做的伎俩

参见attr 的[jQuery 手册条目](http://api.jquery.com/attr/)

# r - 对函数结果的赋值改变变量

> ID：12824279
> 
> 赞同：6
> 
> 时间：2012-10-10T16:38:57.620
> 
> 标签：r

浏览`ave`函数，我发现了一条值得注意的行：

```
split(x, g) <- lapply(split(x, g), FUN) # From ave 
```

有趣的是，这一行改变了 的值`x`，我发现这是出乎意料的。我预计这`split(x,g)`会产生一个列表，可以分配给它，但之后会被丢弃。我的问题是，为什么值会`x`发生变化？

另一个例子可以更好地解释：

```
a <- data.frame(id=c(1,1,2,2), value=c(4,5,7,6))
#   id value
# 1  1     4
# 2  1     5
# 3  2     7
# 4  2     6

split(a,a$id) # Split a row-wise by id into a list of size 2
# $`1`
#   id value
# 1  1     4
# 2  1     5
# $`2`
#   id value
# 3  2     7
# 4  2     6

# Find the row with highest value for each id
lapply(split(a,a$id),function(x) x[which.max(x$value),])
# $`1`
#   id value
# 2  1     5
# $`2`
#   id value
# 3  2     7

# Assigning to the split changes the data.frame a!
split(a,a$id)<-lapply(split(a,a$id),function(x) x[which.max(x$value),])
a
#   id value
# 1  1     5
# 2  1     5
# 3  2     7
# 4  2     7 
```

不仅`a`发生了变化，而且它变成了一个看起来不像赋值右侧的值！即使分配`split(a,a$id)`给以某种方式发生变化`a`（我不明白），为什么它会导致 a`data.frame`而不是 a `list`？

请注意，我了解有更好的方法来完成此任务。我的问题是为什么会`split(a,a$id)<-lapply(split(a,a$id),function(x) x[which.max(x$value),])`改变`a`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T17:00:48.960

split 的帮助页面在其标题中说：“替换形式替换与这种划分相对应的值。” 所以它真的不应该是意外的，虽然我承认它没有被广泛使用。我不明白您的示例如何说明分配的值“看起来不像分配的 RHS！”。最大值分配给第二个参数因子定义的类别中的“值”列表。

（我非常感谢你的问题。我没有意识到这`split<-`是 . 的核心`ave`。我想它的使用比我意识到的更广泛，因为我认为这`ave`是一个非常有用的功能。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T16:53:41.583

在定义`a`, perform之后`split(a, a$id)=1`，结果将是：

```
> a
  id value
1  1     1
2  1     1
3  1     1
4  1     1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T16:54:52.283

这里的关键是 split<- 实际上用 RHS 值修改了 LHS。

这是一个例子：

```
> x <- c(1,2,3);
> split(x,x==2)
$`FALSE`
[1] 1 3
$`TRUE`
[1] 2
> split(x,x==2) <- split(c(10,20,30),c(10,20,30)==20)
> x
[1] 10 20 30 
```

请注意我重新分配的行`split(x,x==2) <-`。这实际上重新分配了`x`.

正如下面的评论所说，您可以查找`split<-`like so的定义

```
> `split<-.default`
function (x, f, drop = FALSE, ..., value) 
{
    ix <- split(seq_along(x), f, drop = drop, ...)
    n <- length(value)
    j <- 0
    for (i in ix) {
        j <- j%%n + 1
        x[i] <- value[[j]]
    }
    x
}
<bytecode: 0x1e18ef8>
<environment: namespace:base> 
```

# python - print 语句在 python proboscis 中不起作用

> ID：12824282
> 
> 赞同：4
> 
> 时间：2012-10-10T16:39:06.833
> 
> 标签：python, unit-testing, functional-testing, nose

我们开始使用鼻子框架在 python 中编写我们的功能和单元测试用例。我们在编写这些测试时开始学习 python。由于我们的测试类/函数之间有很多依赖关系，我们决定在鼻子上使用[proboscis 框架](http://packages.python.org/proboscis/)来控制执行顺序。

我们的测试中有很多“打印”语句，而 proboscis 似乎忽略了这些！测试以预期的顺序运行并测试它们，但没有将我们的打印语句数据打印到控制台。知道我们在这里缺少什么吗？

顺便说一句，一旦我们转移到 proboscis 并使用 @test 装饰所有类及其成员函数，我们就停止从“unittest.TestCase”派生我们的类。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T17:37:10.977

**注意**：根据*Proboscis* [文档](http://packages.python.org/proboscis/) *“未使用的参数传递给 Nose 或 unittest 模块”*，因此以下内容应通过替换为适用于*Proboscis*。`nosetests``python run_tests.py`

正如@Wooble 在他的评论中提到的那样，默认情况下会`nose`捕获`stdout`并仅在失败的测试中显示它。`nosetests` `-s`您可以使用or`--nocapture`开关覆盖此行为：

```
$ nosetests --nocapture 
```

就像@Wooble 在他的评论中提到的那样，我建议使用[logging](http://docs.python.org/library/logging.html)模块而不是`print`. 然后，您只需要传递或开关，其中替换`nosetests`为您要显示的记录器名称的逗号分隔列表，以启用显示模块的日志记录输出：`-l DEBUG``--debug=DEBUG``DEBUG`

```
$ nosetests --debug=your-logger-name 
```

# sql - Syntax Error in CASE STATEMENT

> ID：12824283
> 
> 赞同：0
> 
> 时间：2012-10-10T16:39:12.923
> 
> 标签：sql, sql-server, syntax

Here is my select statement. What I'm trying to do is if an account has more than one ID, I want the phone number to be NULL, ELSE I want the phone number to = phone_number_formatted:

```
SELECT
    v_returned_inventory.order_id,
    v_live_inventory.inet_event_description,
    v_live_inventory.event_time,
    v_cust_phone.phone_number_formatted,
    v_live_inventory.event_date,
    v_returned_inventory.section_name,
    v_returned_inventory.add_usr,
    v_live_inventory.num_seats,
    v_returned_inventory.acct_id,
    v_live_inventory.class_name,
    AT_trans_for_emailTrigger.email_addr,
    AT_trans_for_emailTrigger.cust_name_id,
    premclub.name_first + ' ' + premclub.name_last AS name      
FROM
    v_returned_inventory 
INNER JOIN
    v_live_inventory 
        ON 
LEFT(v_returned_inventory.event_name, 6) = LEFT(v_live_inventory.event_name, 6) 
AND                             v_returned_inventory.orderNumber = v_live_inventory.other_info_1 INNER JOIN
    AT_trans_for_emailTrigger 
        ON v_returned_inventory.order_id = AT_trans_for_emailTrigger.order_id 
LEFT OUTER JOIN
    v_cust_phone 
        on v_cust_phone.acct_id = v_returned_inventory.acct_id 
LEFT OUTER JOIN
    OPENQUERY(premclub, 'select name_first, name_last, cust_name_id from dba.v_cust_name') AS premclub 
        ON                             AT_trans_for_emailTrigger.cust_name_id = premclub.cust_name_id,
    **CASE 
        WHEN (select
            count(cust_name_id) 
        from
            v_cust_phone) > 1 then null 
        else v_cust_phone.phone_number_formatted 
    END** 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T16:50:38.260

你有`CASE`错误的地方声明，它需要在`SELECT`. 根据您目前所拥有的，您似乎可以执行以下操作：

```
SELECT v_returned_inventory.order_id,
        v_live_inventory.inet_event_description,
        v_live_inventory.event_time,
        case when phone.cnt > 1 then null else v_cust_phone.phone_number_formatted end phone_number_formatted,
        v_live_inventory.event_date, 
        v_returned_inventory.section_name, 
        v_returned_inventory.add_usr, 
        v_live_inventory.num_seats, 
        v_returned_inventory.acct_id, 
        v_live_inventory.class_name, 
        AT_trans_for_emailTrigger.email_addr, 
        AT_trans_for_emailTrigger.cust_name_id, 
        premclub.name_first + ' ' + premclub.name_last AS name
FROM  v_returned_inventory 
INNER JOIN  v_live_inventory 
    ON LEFT(v_returned_inventory.event_name, 6) = LEFT(v_live_inventory.event_name, 6) 
    AND v_returned_inventory.orderNumber = v_live_inventory.other_info_1 
INNER JOIN AT_trans_for_emailTrigger 
    ON v_returned_inventory.order_id = AT_trans_for_emailTrigger.order_id 
LEFT OUTER JOIN v_cust_phone
    on v_cust_phone.acct_id = v_returned_inventory.acct_id 
LEFT OUTER JOIN
(
    select count(cust_name_id) cnt, cust_name_id
    from v_cust_phone 
    group by cust_name_id
) phone
    on v_cust_phone.cust_name_id = phone.cust_name_id 
LEFT OUTER JOIN  OPENQUERY(premclub, 'select name_first, name_last, cust_name_id from dba.v_cust_name') AS premclub 
    ON AT_trans_for_emailTrigger.cust_name_id = premclub.cust_name_id 
```

# css - MVC Conditional CSS formatting - Max value

> ID：12824284
> 
> 赞同：0
> 
> 时间：2012-10-10T16:39:15.227
> 
> 标签：css, asp.net-mvc

Is it possible to use conditional CSS formatting to highlight a row in a table based on a value?

In my scenario I have a MVC Page (Razor) with a ViewModel containing an ICollection and I would like to use CSS to highlight the row with the highest particular property (Score) value. Can this be done?

Thanks,

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T16:45:30.937

您应该找出控制器中最高的行，向 ViewModel 添加一个变量，指示哪一行是“最高”的，并在构建表时用一个类标记该 TR 元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T16:52:23.500

有几种方法可以做到这一点。

1.  使用 Javascript 检测具有最高值的行并添加 CSS 类。
2.  在您的控制器中，当您加载集合时，以某种方式标记包含最大值的对象，然后在 Razor 视图中检查此最大值以有条件地更改行的 CSS 类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T16:45:38.120

不是很确定，但我怀疑你可以单独使用 CSS 做到这一点。绝对可以使用 Javascript。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T16:44:30.173

您可以简单地设置 Razor 代码以在满足特定条件时将类添加到行中吗？

# javascript - 显示从 servlet 加载的多个图像

> ID：12824289
> 
> 赞同：0
> 
> 时间：2012-10-10T16:39:26.523
> 
> 标签：javascript, servlets

我需要显示存储在服务器中的多个图像 onload，数据库包含文件路径和文件名。servlet 将查询 sql 服务器以获取文件名。

我需要在 home.jsp 上这样做。

当我使用下面的代码浏览器将 onLoadDisplayImages 显示为 url 时，我想使用 ajax 来使用它，并且应该留在 home.jsp 中。请帮忙。

```
<script language="javascript">
function OnStartup(){
    var url = "onLoadDisplayImages";
    document.location.href='onLoadDisplayImages';
}
window.onload = OnStartup;
</script> 
```

onLoadDisplayImages 是 servlet，它只返回文件名。

下面是代码

```
String imageUrl = "images/siguptop.JPG";
response.setContentType("text/plain");
response.getWriter().write(imageUrl); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T22:53:38.070

使用 Ajax 加载图像。[http://api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/)

# jdbc - 使用 jdbc River 在 Elasticsearch 中索引数据时出现“打开的文件过多”异常

> ID：12824296
> 
> 赞同：4
> 
> 时间：2012-10-10T16:39:53.683
> 
> 标签：jdbc, elasticsearch, lucene

[我正在使用jdbc river](https://github.com/jprante/elasticsearch-river-jdbc)将 mysql 表数据（50 万条记录）的所有记录索引到 elasticsearch 中。有一段时间一切都很好，然后突然河流开始抛出一些奇怪的索引错误，每当它试图索引一个文档时。

错误：

```
 [2012-10-10 16:20:11,867][DEBUG][action.bulk] [Man-Wolf] [monitoring][0] failed to bulk item (index) index {[monitoring][mention_reports][70138], source[{"location":null,"wday":6,"monitoring_profile_id":22,"stream_type":"facebook","score":0,"tweet_count":0,"city":null,"to_user_id":0,"sentiment":-1,"post_message":null,"description":null,"location_data_source":null,"video_id":null,"year":2012,"post_name":"Danny Waddell's Photos","video_thumb_url":null,"user_follower":0,"tweet_text":null,"country":null,"content":null,"picture":"http://photos-e.ak.fbcdn.net/hphotos-ak-prn1/547714_507439249282865_1395188712_s.jpg","updated_at":"2012-08-04T16:06:59Z","model_id":82884,"month":8,"day":4,"profile_image_url":null,"result_type":null,"from_user_id":1407391780,"stream":null,"geo_coordinates_long":0.0,"tweet_id":0,"link":null,"state":null,"post_id":"1407391780_227741774015103","model_name":"FacebookSearchResult","id":70138,"title":null,"sub_location_1":null,"user_friends":0,"sub_location_2":null,"from_user":"Stephanie Morris","post_type":"photo","creation_time":"2012-08-04T16:05:20Z","created_at":"2012-08-04T16:06:59Z","to_user":null,"user_pic":"https://graph.facebook.com/1407391780/picture","video_type":"youtube","is_active":1,"caption":"obama will let them die for america  but  not vote","hour":16,"country_code":null,"duration":0,"positive_keyword":"obama","geo_coordinates_lat":0.0}]}
    org.elasticsearch.index.engine.IndexFailedEngineException: [monitoring][0] Index failed for [mention_reports#70138]
            at org.elasticsearch.index.engine.robin.RobinEngine.index(RobinEngine.java:482)
            at org.elasticsearch.index.shard.service.InternalIndexShard.index(InternalIndexShard.java:323)
            at org.elasticsearch.action.bulk.TransportShardBulkAction.shardOperationOnPrimary(TransportShardBulkAction.java:158)
            at org.elasticsearch.action.support.replication.TransportShardReplicationOperationAction$AsyncShardOperationAction.performOnPrimary(TransportShardReplicationOperationAction.java:529)
            at org.elasticsearch.action.support.replication.TransportShardReplicationOperationAction$AsyncShardOperationAction$1.run(TransportShardReplicationOperationAction.java:427)
            at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
            at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
            at java.lang.Thread.run(Thread.java:636)
    Caused by: java.io.FileNotFoundException: /var/www/elasticsearch-0.19.0/data/elasticsearch/nodes/0/indices/monitoring/0/index/_1pr.tvd (Too many open files)
            at java.io.RandomAccessFile.open(Native Method)
            at java.io.RandomAccessFile.<init>(RandomAccessFile.java:233)
            at org.apache.lucene.store.FSDirectory$FSIndexOutput.<init>(FSDirectory.java:441)
            at org.apache.lucene.store.FSDirectory.createOutput(FSDirectory.java:306)
            at org.elasticsearch.index.store.Store$StoreDirectory.createOutput(Store.java:418)
            at org.elasticsearch.index.store.Store$StoreDirectory.createOutput(Store.java:390)
            at org.apache.lucene.index.TermVectorsTermsWriter.initTermVectorsWriter(TermVectorsTermsWriter.java:123)
            at org.apache.lucene.index.TermVectorsTermsWriter.finishDocument(TermVectorsTermsWriter.java:143)
            at org.apache.lucene.index.TermVectorsTermsWriter$PerDoc.finish(TermVectorsTermsWriter.java:250)
            at org.apache.lucene.index.DocFieldProcessorPerThread$PerDoc.finish(DocFieldProcessorPerThread.java:348)
            at org.apache.lucene.index.DocumentsWriter$WaitQueue.writeDocument(DocumentsWriter.java:1404)
            at org.apache.lucene.index.DocumentsWriter$WaitQueue.add(DocumentsWriter.java:1424)
            at org.apache.lucene.index.DocumentsWriter.finishDocument(DocumentsWriter.java:1043)
            at org.apache.lucene.index.DocumentsWriter.updateDocument(DocumentsWriter.java:772)
            at org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:2066)
            at org.elasticsearch.index.engine.robin.RobinEngine.innerIndex(RobinEngine.java:565)
            at org.elasticsearch.index.engine.robin.RobinEngine.index(RobinEngine.java:477)
            ... 7 more 
```

JDBC 河：

```
 curl -XPUT 'localhost:9200/_river/river_mention_reports/_meta' -d '{
    "type" : "jdbc",
    "jdbc" : {
        "driver" : "com.mysql.jdbc.Driver",
        "url" : "jdbc:mysql://localhost:3306/monitoring",
        "user" : "USERNAME",
        "password" : "PASSWORD",
        "sql" : "select * from mention_reports",
        "poll" : "2h",
        "versioning" : false
    },
    "index" : {
        "index" : "monitoring",
        "type" : "mention_reports",
        "bulk_size" : 200,
        "bulk_timeout" : "60s"
    }
}' 
```

我的映射：

```
curl -XPOST http://localhost:9200/monitoring/ -d '
{
  "settings":{
    "index":{
      "number_of_shards":5,
      "number_of_replicas":1
    },
    "analysis":{
      "filter":{
        "myCustomShingle":{
          "type":"shingle",
          "max_shingle_size":3,
          "output_unigrams":true
        },
        "myCustomStop":{
          "type":"stop",
          "stopwords":["a","about","abov ... ]
        }
      },
      "analyzer":{
        "myAnalyzer":{
          "type":"custom",
          "tokenizer":"standard",
          "filter":[
            "lowercase",
            "myCustomShingle",
            "stop",
            "myCustomStop"
          ]
        }
      }
    }
  },
  "mappings":{
    "mention_reports":{
      "_source":{
        "enabled":true
      },
      "_all":{
        "enabled":false
      },
      "index.query.default_field":"post_message",
      "properties":{
      "id":{
        "type":"string",
        "index":"not_analyzed",
        "include_in_all" : "false",
        "null_value" : "null"
      },
      "creation_time":{
        "type":"date"
      },
      "from_user":{
        "type":"string",
        "analyzer":"standard",
        "include_in_all":"false",
        "null_value":0
      },
      "from_user_id":{
        "type":"string",
        "index":"not_analyzed",
        "include_in_all":"false",
        "null_value":"null"
      },

            . . .

        "title":{
          "type":"string",
          "analyzer":"myAnalyzer",
          "term_vector":"with_positions_offsets",
          "null_value" : "null"
        }                                           

      }
    }
  }
}
' 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T16:47:57.483

这是错误消息中最重要的部分：

```
Caused by: java.io.FileNotFoundException: /var/www/elasticsearch-0.19.0/data/elasticsearch/nodes/0/indices/monitoring/0/index/_1pr.tvd (Too many open files) 
```

基本上，您的 elasticsearch 节点用完了文件描述符。有关如何检查有多少句柄可用于 elasticsearch 的详细信息，请参阅 Elasticsearch[安装说明](https://www.elastic.co/guide/en/elasticsearch/reference/2.1/_installation.html)的文件描述符部分。为了修复它，您需要增加可用于 elasticsearch 进程的文件描述符的数量。

# c# - C# WCF System.Configuration.ConfigurationErrorsException：无法识别的元素“ManagedService”

> ID：12824301
> 
> 赞同：3
> 
> 时间：2012-10-10T16:40:18.673
> 
> 标签：c#, exception, configuration

在 WCF 应用程序中，我有一些自定义配置类用于`app.config`. 但是，我从 WCF 服务主机获得以下堆栈跟踪（它尝试在 WCF 服务的构造函数中检索自定义配置）：

> System.Reflection.TargetInvocationException：调用的目标已引发异常。---> System.Configuration.ConfigurationErrorsException：无法识别的元素“ManagedService”。(Service.dll.config line 8) at System.Configuration.BaseConfigurationRecord.EvaluateOne(String[] keys, SectionInput input, Boolean isTrusted, FactoryRecord factoryRecord, SectionRecord sectionRecord, Object parentResult) at System.Configuration.BaseConfigurationRecord.Evaluate(FactoryRecord factoryRecord, SectionRecord sectionRecord, Object parentResult, Boolean getLkg, Boolean getRuntimeObject, Object& result, Object& resultRuntimeObject) at System.Configuration.BaseConfigurationRecord.GetSectionRecursive(String configKey, Boolean getLkg, Boolean checkPermission, Boolean getRuntimeObject,
> 在 System.ServiceModel.Description.ServiceDescription.CreateImplementation(Type serviceType) 在 System.ServiceModel.Description.ServiceDescription.GetService(Type serviceType) 在 System.ServiceModel.ServiceHost.CreateDescription(IDictionary`2&impliedContracts) 在 System.ServiceModel.ServiceHostBase.InitializeDescription (UriSchemeKeyedCollection baseAddresses) 在 Microsoft.Tools.SvcHost.ServiceHostHelper.OpenService( ServiceInfo info) System.Configuration.ConfigurationErrorsException：无法识别的元素“ManagedService”。（Service.dll.config 第 8 行）位于 System.Configuration.BaseConfigurationRecord。

（对不起，讨厌的堆栈跟踪）。

我在这里查看了大量关于此错误的教程和其他问题，但没有任何建议或解决方案出现在任何地方。

这是相关部分`app.config`

```
<configSections>
     <section name="ManagedServices" type="Service.Configuration.ManagedServicesSection, Service, Version=1.0.0.0, Culture=neutral " allowLocation="true" allowDefinition="Everywhere" restartOnExternalChanges="false" />
</configSections>
  <ManagedServices>
     <services>
        <ManagedService serviceAssembly="Service" serviceType="Service.Runnables.HostManagerRunner" identifier="HostManager" priority="0">
           <clear />
        </ManagedService>
        <ManagedService serviceAssembly="Service" serviceType="Service.Runnables.TimeoutMonitor" identifier="TimeoutMonitor" priority="0">
           <add key="timeoutLength" value="30" />
           <add key="runInterval" value="30" />
        </ManagedService>
     </services>
  </ManagedServices> 
```

基本上，此 WCF 服务用于管理在启动时动态加载和启动的其他服务（通过此配置通知）。

`<ManagedServices>`是从`ManagedServicesSection`继承自`ConfigurationSection`

```
public class ManagedServicesSection : ConfigurationSection
{

  [ConfigurationProperty("services", IsDefaultCollection = true)]
  public ManagedServiceCollection ServiceCollection
  {
     get { return (ManagedServiceCollection) base["services"]; }
  }

} 
```

从中可以看出，`<services>`是 a`MangedServiceCollection`继承自`ConfigurationElementCollection`

```
public class ManagedServiceCollection : ConfigurationElementCollection
{

  public ManagedServiceCollection()
  {
  }

  public override ConfigurationElementCollectionType CollectionType
  {
     get
     {
        return ConfigurationElementCollectionType.BasicMap;
     }
  }

  public ManagedService this[int index]
  {
     get { return BaseGet(index) as ManagedService; }
     set
     {
        if (BaseGet(index) != null)
           BaseRemoveAt(index);

        BaseAdd(index, value);
     }
  }

  public ManagedService this[string name]
  {
     get { return BaseGet(name) as ManagedService; }
     set 
     { 
        if (BaseGet(name) != null)
           BaseRemove(name);

        BaseAdd(value);
     }
  }

  protected override ConfigurationElement CreateNewElement()
  {
     return new ManagedService();
  }

  protected override object GetElementKey(ConfigurationElement element)
  {
     return ((ManagedService)element).Identifier;
  }
} 
```

该集合包含`ManagedService`继承自的 s `ConfigurationElement`：

```
public class ManagedService : ConfigurationElement
{
  [ConfigurationProperty("serviceAssembly", IsRequired = true)]
  public string ServiceAssembly
  {
     get { return (string) this["serviceAssembly"]; }
     set { this["serviceAssembly"] = value; }
  }

  [ConfigurationProperty("serviceType", DefaultValue = "IRunnable", IsRequired = true)]
  public string ServiceType 
  { 
     get { return (string) this["serviceType"]; }
     set { this["serviceType"] = value; }
  }

  [ConfigurationProperty("identifier", IsRequired = true, IsKey = true)]
  public string Identifier
  {
     get { return (string) this["identifier"]; }
     set { this["identifier"] = value; }
  }

  [ConfigurationProperty("priority", DefaultValue = 0, IsRequired = false)]
  public int Priority
  {
     get { return (int) this["priority"]; }
     set { this["priority"] = value; }
  }

  [ConfigurationProperty("serviceParameters", IsDefaultCollection = true)]
  public ServiceParameterCollection ServiceParameters
  {
     get { return (ServiceParameterCollection)base["serviceParamters"]; }
  }
} 
```

代码可能更容易在这个 paste [paste.org/private/jkiylqsrklpcdbtfdrajq中查看](http://pastie.org/private/jkiylqsrklpcdbtfdrajq)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T16:49:02.053

我无法编译您的示例，缺少 ServiceParameterCollection ......所以我已经为您准备了我的工作示例。开始了...

首先让我们创建配置类，注意 AddItemName ConfigurationCollection 参数（我认为这是您的代码中缺少的）：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Configuration;

namespace GP.Solutions.WF.DocumentProvider.Entities.SharePoint
{
    /// <summary>
    /// Base SharePoint 2010 provider contiguration
    /// </summary>
    [Serializable]
    public class SharePoint2010Settings : ConfigurationSection
    {
        /// <summary>
        /// DocumentStorageRoot
        /// </summary>
        [ConfigurationProperty("SiteUrl", IsRequired = true, DefaultValue = "")]
        public string SiteUrl
        {
            get { return (string)base["SiteUrl"]; }
            set { base["SiteUrl"] = value; }
        }

        /// <summary>
        /// TitleProperty
        /// </summary>
        [ConfigurationProperty("TitleProperty", IsRequired = true, DefaultValue = "Title")]
        public string TitleProperty
        {
            get { return (string)base["TitleProperty"]; }
            set { base["TitleProperty"] = value; }
        }

        /// <summary>
        /// ProvideFileAsLink
        /// </summary>
        [ConfigurationProperty("ProvideFileAsLink", IsRequired = true, DefaultValue = true)]
        public bool ProvideFileAsLink
        {
            get { return (bool)base["ProvideFileAsLink"]; }
            set { base["ProvideFileAsLink"] = value; }
        }

        /// <summary>
        /// DocumentCategories
        /// </summary>
        [ConfigurationProperty("DocumentCategories")]
        public SharePointDocumentCategoryCollection DocumentCategories
        {
            get { return (SharePointDocumentCategoryCollection)base["DocumentCategories"]; }
            set { base["DocumentCategories"] = value; }
        }

    }

    /// <summary>
    /// Configuration element that holds SharePointDocumentCategory collection
    /// </summary>
    [ConfigurationCollection(typeof(SharePointDocumentCategory), AddItemName = "DocumentCategory", CollectionType = ConfigurationElementCollectionType.BasicMap)]
    public class SharePointDocumentCategoryCollection : ConfigurationElementCollection
    {
        protected override ConfigurationElement CreateNewElement()
        {
            return new SharePointDocumentCategory();
        }

        protected override object GetElementKey(ConfigurationElement element)
        {
            return ((SharePointDocumentCategory)element).CategoryName;
        }
    }

    /// <summary>
    /// Configuration element that holds information for specific document category
    /// </summary>
    [Serializable]
    public class SharePointDocumentCategory: ConfigurationElement
    {
        /// <summary>
        /// CategoryName
        /// </summary>
        [ConfigurationProperty("CategoryName", IsRequired = true, DefaultValue = "")]
        public string CategoryName
        {
            get { return (string)base["CategoryName"]; }
            set { base["CategoryName"] = value; }
        }

        /// <summary>
        /// FolderName
        /// </summary>
        [ConfigurationProperty("FolderName", IsRequired = true, DefaultValue = "")]
        public string FolderName
        {
            get { return (string)base["FolderName"]; }
            set { base["FolderName"] = value; }
        }

        /// <summary>
        /// TitleProperty
        /// </summary>
        [ConfigurationProperty("OverwriteFiles", IsRequired = true, DefaultValue = true)]
        public bool OverwriteFiles
        {
            get { return (bool)base["OverwriteFiles"]; }
            set { base["OverwriteFiles"] = value; }
        }

        /// <summary>
        /// DocumentCategories
        /// </summary>
        [ConfigurationProperty("CategoryFields")]
        public SharePointCategoryFieldsCollection CategoryFields
        {
            get { return (SharePointCategoryFieldsCollection)base["CategoryFields"]; }
            set { base["CategoryFields"] = value; }
        }

    }

    /// <summary>
    /// Configuration element that holds SharePointDocumentCategory collection
    /// </summary>
    [ConfigurationCollection(typeof(SharePointDocumentCategory), AddItemName = "CategoryField", CollectionType = ConfigurationElementCollectionType.BasicMap)]
    public class SharePointCategoryFieldsCollection : ConfigurationElementCollection
    {
        protected override ConfigurationElement CreateNewElement()
        {
            return new SharePointCategoryField();
        }

        protected override object GetElementKey(ConfigurationElement element)
        {
            return ((SharePointCategoryField)element).FieldName;
        }
    }

    /// <summary>
    /// Class that determines specific field
    /// </summary>
    [Serializable]
    public class SharePointCategoryField : ConfigurationElement
    {
        /// <summary>
        /// FolderName
        /// </summary>
        [ConfigurationProperty("FieldName", IsRequired = true, DefaultValue = "")]
        public string FieldName
        {
            get { return (string)base["FieldName"]; }
            set { base["FieldName"] = value; }
        }
    }

} 
```

这是 web.config 部分：

```
 <configSections>
    <sectionGroup name="CustomConfiguration">
      <section name="SharePoint2010Section" type="GP.Solutions.WF.DocumentProvider.Entities.SharePoint.SharePoint2010Settings,CustomConfiguration" allowDefinition="Everywhere" allowLocation="true"/>
    </sectionGroup>

  </configSections>

  <CustomConfiguration>

    <SharePoint2010Section SiteUrl="http://server" TitleProperty="Title" ProvideFileAsLink="false">
        <DocumentCategories>

          <DocumentCategory CategoryName="Vhodni računi" FolderName="" OverwriteFiles="true">
            <CategoryFields>
              <CategoryField FieldName="Datum" />
              <CategoryField FieldName="Vrednost" />
            </CategoryFields>
          </DocumentCategory>

          <DocumentCategory CategoryName="Zahtevek za dopust" FolderName="" OverwriteFiles="true">
            <CategoryFields>
              <CategoryField FieldName="Datum od" />
              <CategoryField FieldName="Datum do" />
            </CategoryFields>
          </DocumentCategory>

        </DocumentCategories>
    </SharePoint2010Section>
  </CustomConfiguration> 
```

# android - 如何设置启动应用动画？

> ID：12824305
> 
> 赞同：0
> 
> 时间：2012-10-10T16:40:35.663
> 
> 标签：android, animation, startup

我试图找到在活动开始之前在应用程序入口处显示图像的最简单方法。我该如何以最简单的方式做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T17:01:25.887

看看这个教程： [http ://docs.xamarin.com/android/tutorials/Creating_a_Splash_Screen](http://docs.xamarin.com/android/tutorials/Creating_a_Splash_Screen) [http://blog.iangclifton.com/2011/01/01/android-splash-screens-done-right](http://blog.iangclifton.com/2011/01/01/android-splash-screens-done-right/)

# c# - Deceleration not working as intended

> ID：12824306
> 
> 赞同：1
> 
> 时间：2012-10-10T16:40:37.010
> 
> 标签：c#, math, xna, acceleration

I asked a similar question a few hours ago, but I think there was too much information in that question so I deleted that one and made this one more relevant.

I'm trying to move an object with a decreasing acceleration in a specified time but the acceleration reaches 0 before the object reaches the destination.

I calculate acceleration like this:

```
//Linear acceleration starts at 0 and finishes at 2.
acceleration = this.elapsed / (this.duration / 2.0f); 
```

Acceleration will be a value between 0 and 2 depending on how much time has elapsed. The value will be closer to 2 when elapsed is closer to (total) duration.

So to calculate a deceleration I would do:

```
 //Linear deceleration starts at 2 and finishes at 0.
 acceleration = 2.0f - this.elapsed / (this.duration / 2.0f); 
```

This appears to work just fine but the decelerating object never reaches the destination, at around 99% of the distance the elapsedTime becomes greater than total duration, causing the acceleration to become negative. In other words, it appears to have decelerated about 1% too fast.

The original acceleration works perfectly, so does the linear velocity. It's just the deceleration that isn't working properly.

Am I doing something wrong?

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T17:20:35.557

在没有看到完整代码的情况下，我认为问题可能是由于在某处`float`的循环中使用 a 作为迭代变量。`for`

以下面的程序为例，当我尝试直接使用`float`作为我的迭代变量时，我能够复制浮点精度在循环中的某处搞砸了。

```
float duration = 10f;

for(float elapsed = 0.0f; elapsed <= duration; elapsed = elapsed + 0.1f) {
    Console.WriteLine(2.0f - elapsed / (duration / 2.0f));
}

Console.ReadLine(); 
```

这个程序的输出是：

```
2
1.98
1.96
1.94
1.92
1.9
1.88
1.86
1.84
1.82
1.8
1.78
1.76
1.74
1.72
1.7
1.68
1.66
1.64
1.62
1.6
1.58
1.56
1.54
1.52
1.5
1.48
1.46
1.44
1.42
1.4
1.38
1.36
1.34
1.32
1.3
1.28
1.26
1.24
1.22
1.2
1.18
1.16
1.14
1.12
1.1
1.08
1.06
1.04
1.02
1
0.9800005
0.9600005
0.9400005
0.9200006
0.9000006
0.8800006
0.8600006
0.8400006
0.8200006
0.8000007
0.7800007
0.7600007
0.7400007
0.7200007
0.7000008
0.6800008
0.6600008
0.6400008
0.6200008
0.6000009
0.5800009
0.5600009
0.5400009
0.5200009
0.500001
0.480001
0.460001
0.440001
0.420001
0.400001
0.3800011
0.360001
0.3400009
0.3200008
0.3000008
0.2800007
0.2600006
0.2400005
0.2200005
0.2000004
0.1800003
0.1600002
0.1400001
0.1200001
0.1
0.07999992
0.05999985
0.03999977
0.01999969 
```

您可以看到大约一半的精度射出，这是因为迭代变量本身的精度被搞砸了。

在第二个示例中，我使用 an`integer`作为迭代变量，我只是`integer`在每次迭代中将其缩放到我的计算。这可以防止迭代变量变得混乱：

```
float duration = 10f;
float offset_scale = 10.0f;

for (int elapsed = 0; elapsed <= (duration * offset_scale); elapsed++) {
    Console.WriteLine(2.0f - (elapsed / offset_scale) / (duration / 2.0f));
}

Console.ReadLine(); 
```

该程序的输出是：

```
2
1.98
1.96
1.94
1.92
1.9
1.88
1.86
1.84
1.82
1.8
1.78
1.76
1.74
1.72
1.7
1.68
1.66
1.64
1.62
1.6
1.58
1.56
1.54
1.52
1.5
1.48
1.46
1.44
1.42
1.4
1.38
1.36
1.34
1.32
1.3
1.28
1.26
1.24
1.22
1.2
1.18
1.16
1.14
1.12
1.1
1.08
1.06
1.04
1.02
1
0.98
0.96
0.94
0.92
0.9
0.88
0.86
0.84
0.82
0.8
0.78
0.76
0.74
0.72
0.7
0.68
0.66
0.64
0.62
0.6
0.58
0.56
0.54
0.52
0.5
0.48
0.46
0.44
0.42
0.4
0.38
0.36
0.34
0.32
0.3
0.28
0.26
0.24
0.22
0.2
0.18
0.16
0.14
0.12
0.1
0.08
0.06
0.04
0.02
0 
```

您可以看到精度永远不会变得疯狂，结果正好为 0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T16:50:01.717

您可以尝试对浮点数使用 C# Clamp 函数：http: [//msdn.microsoft.com/en-us/library/microsoft.xna.framework.mathhelper.clamp.aspx](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.mathhelper.clamp.aspx)

```
acceleration = MathHelper.Clamp(2.0f - this.elapsed/(this.duration/2.0f), 0.0, 2.0); 
```

它只是为第一个参数设置一个最小值和最大值。

# ruby-on-rails-3 - testing PUT update is not working on RSPEC ( Ruby on Rails)

> ID：12824307
> 
> 赞同：-1
> 
> 时间：2012-10-10T16:40:38.223
> 
> 标签：ruby-on-rails-3, rspec

So I'm testing one of my controller in RSPEC and I'm trying to test the whole update shenanigans. This is what i have in the RSPEC

```
 describe 'PUT update' do
         before :each do
           @user = Factory(:user,name: "Lawrence Smith")
         end

      context "valid attributes" do
        it "located the requested @user" do
          put :update, :id => @user, user: Factory.attributes_for(:user)
          assigns(:user).should eq(@user)      
        end

        it "changes @user's attributes" do
          put :update, :id=> @user.id, user: Factory.attributes_for(:user, name: "Larry Smith")
          @user.reload
          @user.name.should eq("Larry Smith")

        end

      end 
```

And this is what i have in the controller

```
def update
#update and save
@user = User.find(params[:id])
respond_to do |format|
if @user.update_attributes(params[:user])
  sign_in @user
  format.json{render :json => @user ,:status => :created, :location => @user }
else
  format.json { render :json => @user.errors, :status => :unprocessable_entity }
end
end 
```

end So apparently the the @user.reload doesn't really refresh the ActiveRecord, as my errors showed that the name has not been changed at all. Any idea what is wrong?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T18:27:20.807

我不知道如何在 get 或 post 参数中传递对象。无论如何尝试像这样描述'PUT更新'之前做：每个做@user = Factory（：user，name：“Lawrence Smith”）结束

```
 context "valid attributes" do
    it "located the requested @user" do
      put :update, :id => @user, user: Factory.attributes_for(:user)
      assigns(:user).should eq(@user)      
    end

    it "changes @user's attributes" do
      put :update, :id=> @user.id, :user_name => Factory.attributes_for(:user, name: "Larry Smith").name
      @user.reload
      @user.name.should eq("Larry Smith")

    end

  end 
```

这在控制器中

```
def update
#update and save
@user = User.find(params[:id])
respond_to do |format|
if @user.update_attributes(:name => params[:user_name])
  sign_in @user
  format.json{render :json => @user ,:status => :created, :location => @user }
else
  format.json { render :json => @user.errors, :status => :unprocessable_entity }
end
end 
```

我想你得到了我在这里解释的内容。

谢谢

# objective-c - Can not add UIImage items to NSMutableArray - EXC_BAD_ACCESS error

> ID：12824310
> 
> 赞同：0
> 
> 时间：2012-10-10T16:41:07.130
> 
> 标签：objective-c, ios, uiimage, nsmutablearray

my application uses .png images from the applications document's folder to show thumbnails at a later time in a pop up. I am trying to add all the .png images from the folder into an array. I know the error is happening when the tempImage object is added to the array, but I am unsure of why this is happening. Does anyone see the issue with this block of code?

```
NSArray *pathforsave = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentDirectory = [pathforsave objectAtIndex:0];

NSArray *getFiles = [[NSFileManager defaultManager]
                     contentsOfDirectoryAtPath:documentDirectory
                     error:nil];

NSInteger x = 0;

NSPredicate *fltr = [NSPredicate predicateWithFormat:@"self ENDSWITH '.png'"];
NSArray *onlyPNGs = [getFiles filteredArrayUsingPredicate:fltr];

NSMutableArray *Images;
NSUInteger arrayPNGLength = [onlyPNGs count];
for (x=0; x<arrayPNGLength; x++) {
    //first get the path
    NSString *strFile = [documentDirectory stringByAppendingPathComponent:[onlyPNGs objectAtIndex:x]];
    UIImage *tempImage = [ UIImage imageWithContentsOfFile: strFile];
    [Images addObject:tempImage];

} 
```

Thanks for your help, I am new to objective c.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T16:44:07.870

做

```
NSMutableArray *Images = [[[NSMutableArray alloc] init] autorelease]; 
```

代替`NSMutableArray *Images;`

# postgresql - Change varchar to boolean in PostgreSQL

> ID：12824317
> 
> 赞同：12
> 
> 时间：2012-10-10T16:41:55.960
> 
> 标签：postgresql, database-design, query-optimization, storage, postgresql-9.1

I've started working on a project where there is a fairly large table (about 82,000,000 rows) that I think is very bloated. One of the fields is defined as:

```
consistency character varying NOT NULL DEFAULT 'Y'::character varying 
```

It's used as a boolean, the values should always either be ('Y'|'N').

Note: there is no check constraint, etc.

I'm trying to come up with reasons to justify changing this field. Here is what I have:

*   It's being used as a boolean, so make it that. Explicit is better than implicit.
*   It will protect against coding errors because right now there anything that can be converted to text will go blindly in there.

Here are my question(s).

*   What about size/storage? The db is UTF-8\. So, I *think* there really isn't much of a savings in that regard. It should be 1 byte for a `boolean`, but also 1 byte for a `'Y'` in UTF-8 (at least that's what I get when I check the length in Python). Is there any other storage overhead here that would be saved?
*   Query performance? Will Postgres get any performance gains for a where cause of "`=TRUE`" vs. "`='Y'`"?

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-11T00:18:54.997

PostgreSQL（不像 Oracle）有一个成熟的[`boolean`类型](http://www.postgresql.org/docs/current/interactive/datatype-boolean.html)。通常，“是/否标志”应该是`boolean`. 这是正确使用的类型！

### 大小/存储呢？

基本上，一列在磁盘上[`boolean`](http://www.postgresql.org/docs/current/interactive/datatype-boolean.html)占用**1 个字节**
， 而`text`或`character varying`（[在此处引用手册](http://www.postgresql.org/docs/current/interactive/datatype-character.html)）...

> 短字符串（最多 126 个字节）的存储要求是 1 个字节加上实际字符串

这是简单字符的**2 个字节**。因此，您可以*将该列*的存储量减半。

实际存储比这更复杂。每个表、[页和行](http://www.postgresql.org/docs/current/interactive/storage-page-layout.html)都有一些固定的开销，有特殊的[`NULL`存储空间](https://stackoverflow.com/a/7383198/939860)，有些类型需要[数据对齐](https://stackoverflow.com/a/7431468/939860)。整体影响将非常有限——如果有的话。
[更多关于如何测量实际空间需求的信息。](https://stackoverflow.com/a/10886041/939860)

编码`UTF8`在这里没有任何区别。基本 ASCII 字符与其他编码（如`LATIN-1`.

在您的情况下，根据您的描述，您应该保留您似乎已经拥有的[NOT NULL 约束- 独立于基本类型。](http://www.postgresql.org/docs/current/interactive/ddl-constraints.html#AEN2444)

### 查询性能？

在任何情况下使用布尔值都会稍微好一些。除了稍微小一点之外，for 的逻辑`boolean`更简单，`varchar`或者`text`通常还带有[COLLATION](http://www.postgresql.org/docs/current/interactive/sql-expressions.html#SQL-SYNTAX-COLLATE-EXPRS)特定规则。但是不要对这么简单的事情抱太大希望。

代替

```
WHERE consistency = 'Y' 
```

你可以写：

```
WHERE consistency = TRUE 
```

但是，实际上，您可以简化为：

```
WHERE consistency 
```

无需进一步评估。

### 更改类型

转换表格很简单：

```
ALTER TABLE tbl ALTER consistency TYPE boolean
USING CASE consistency WHEN 'Y' THEN TRUE ELSE FALSE END; 
```

这个`CASE`表达式将所有不是`TRUE`('Y') 的东西折叠成`FALSE`。NOT NULL 约束仍然存在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T21:26:01.570

从单个 VARCHAR 切换到 BOOLEAN，存储大小和查询性能都不会显着提高。尽管您是对的，当您谈论二进制值时使用布尔值在技术上更清洁，但更改的成本可能远高于收益。如果您担心正确性，那么您可以检查列，例如

```
ALTER TABLE tablename ADD CONSTRAINT consistency CHECK (consistency IN ('Y', 'N')); 
```

# eclipse - Eclipse Juno - how to make the views minimize when they lose focus?

> ID：12824319
> 
> 赞同：6
> 
> 时间：2012-10-10T16:41:57.527
> 
> 标签：eclipse

When I work with eclipse, I like to have my Java editor maximized, and all other views minimized in the trim stack (the area around the edges of the window). This way, I can expand the view only when I need it, by clicking on the view icon.

In previous Eclipse versions, when I finished working with a view, I clicked on another view or the editor so that it lost focus, and that caused it to minimize again. In Juno, it doesn't work - when I click on the editor, the view stays open and is hiding my code. In order to close it, I have to either click the view icon, or click on another program and then return to Eclipse.

Do you have any idea if there is a setting I can change to get the old behavior back?

Thanks!

**Edit:** Seems like a bug in eclipse.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T00:52:03.047

我无法使用 Juno SR1 重现此问题。[错误 371598](https://bugs.eclipse.org/bugs/show_bug.cgi?id=371598)已修复，看起来是同样的问题。

# batch-file - 根据文件名将文件复制到目录中

> ID：12824322
> 
> 赞同：1
> 
> 时间：2012-10-10T16:42:05.420
> 
> 标签：batch-file

我有数千个文件要移动。

我已经使用批处理文件来创建我需要的目录。

我的文件名如下所示：

*   6711_05_12.pdf
*   10504_06_15.pdf
*   559_07_11.pdf

“_”之前的第一个字符是文件需要进入的目录。启动批处理文件 - 但不知道如何识别文件名。

```
@echo off
setlocal EnableDelayedExpansion
for %%I in (*.pdf) do (
 xcopy ???
) 
```

有批处理文件的手册吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T16:52:03.547

您甚至不需要批处理文件。以下一行命令可以解决问题。

```
for %I in (*.pdf) do @for /f "eol=_ delims=_" %A in ("%I") do @copy "%I" "%A" 
```

如果要将命令放在批处理文件中，只需将百分比加倍。

# jmeter - 在 JMeter CSV 数据集中选择多个项目？

> ID：12824323
> 
> 赞同：1
> 
> 时间：2012-10-10T16:42:14.993
> 
> 标签：jmeter

我有一个 JMeter 测试，它使用 CSV 数据集配置为每个模拟用户提供购买的产品列表。

测试很简单：

*   登录
*   选择要添加到购物车的产品
*   查看
*   登出。

这很有效，现在我想模拟一个用户购买 N 种产品。我首先尝试复制选择产品的控制器，并尝试将它们放入循环控制器中，但在这两种情况下，它们只是重复地将相同的产品添加到购物车中。

我想要的是让每个用户从 CSV 文件中选择多个项目。我尝试修改 CSV 数据集配置的设置，但无论我设置什么，我都会得到相同的结果。我错过了什么还是这是预期的行为？

如何让线程从 CSV 文件中选择不同的项目？
我唯一的选择是提供多个 CSV 文件并使用多个 CSV 数据集配置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T19:49:31.483

您的选择是在[循环控制器](http://jmeter.apache.org/usermanual/component_reference.html#Loop_Controller)中使用[__StringFromFile 函数](http://jmeter.apache.org/usermanual/functions.html#__StringFromFile)

然后，您可以使用一些 Beanshell 来处理行和拆分项。

# mapping - 从数据库记录生成书目文件（BibTeX、RIS 等）

> ID：12824325
> 
> 赞同：2
> 
> 时间：2012-10-10T16:42:19.273
> 
> 标签：mapping, bibliography, citations

是否有方法或工具有助于从数据库记录生成书目数据文件（用于 BibTeX、EndNote、RefMan 等）以显示给网站访问者，以便他们轻松导入引文？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T01:47:50.380

在 Linux 系统上，您可以执行

```
cat myrisfile.ris | ris2xml | xml2bib > mybibfile.bib 
```

如果安装了软件包，则将 myrisfile.ris 转换为 BibTeX 格式的 mybibfile.bib `bibutils`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T19:50:05.040

在各种书目格式之间进行转换的强大工具是[bibutils](http://sourceforge.net/p/bibutils/home/Bibutils/)。EndNote 和 RefMan 都应该很容易接受 RIS 格式。

# symfony - 使用 Symfony 2 ACL 访问控制器的视图

> ID：12824327
> 
> 赞同：2
> 
> 时间：2012-10-10T16:42:22.113
> 
> 标签：symfony, acl

我需要一种方法来使用 Symfony 2.1 实现一个权限列表（内置权限映射应该没问题），它应该充当全局权限。我要做的是限制组或用户可以看到的视图。例如，我有两个控制器（控制器 A 和控制器 B）和两个用户（用户 A 和用户 B）。第一个用户应该能够看到由控制器 A 管理的视图，但他不应该能够查看控制器 B 的视图。相反，userB 应该能够看到两个控制器。我在 Symfony 的书/食谱中找到了关于 ACL 的教程，但它似乎只讨论了应用于实体的权限，而控制器不是实体。有什么建议吗？

**更新 1** 我发现 ObjectIdentity 接口也可以不是由对象创建，而是由 Ids 创建。这意味着我可以使用以下方法检查整个控制器类的权限：

```
class MyController extends Controller
{
    public function getId()
    {
        return 'my_controller';
    }

    public function indexAction()
    {
        if ($this->get('security.context')->isGranted('MY_PERMISSION', $this) === false)
        {
            throw new AccessDeniedException();
        }

        ...
    }
} 
```

并使用以下代码在数据库中插入 acl 条目：

```
$aclProvider = $this->get('security.acl.provider');
$objectIdentity = ObjectIdentity::fromDomainObject($this);
$acl = $aclProvider->createAcl($objectIdentity);

$securityContext = $this->get('security.context');
$user = $securityContext->getToken()->getUser();
$securityIdentity = UserSecurityIdentity::fromAccount($user);

$builder = new MaskBuilder();
$builder->add('MY_PERMISSION');
$mask = $builder->get();

$acl->insertObjectAce($securityIdentity, $mask);
$aclProvider->updateAcl($acl); 
```

这似乎有效，我有两个用户。首先，我使用上面的代码授予查看控制器类的权限并且它可以工作，而不是没有设置权限的第二个用户获得拒绝访问异常。但是，我仍然需要弄清楚如何为单个控制器的操作授予权限。一个明显的解决方案是为每个路由条目设置一个控制器类，但这是不合理的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T17:12:08.413

您要求的内容没有通用模式。**Symfony2 安全** [http://symfony.com/doc/current/book/security.html](http://symfony.com/doc/current/book/security.html)

您是否建议在授予操作访问权限之前仅检查用户角色或组？

```
if (false === $this->get('security.context')->isGranted('ROLE_ADMIN')) {
        throw new AccessDeniedException();
} 
```

该异常可能会呈现一些自定义错误页面。

关于什么：

```
access_control:
    - { path: ^/login$, role: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/register, role: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/resetting, role: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/, role: ROLE_USER } 
```

在你的 security.yml

# validation - 尝试使用 wtforms 验证 Filefield

> ID：12824330
> 
> 赞同：3
> 
> 时间：2012-10-10T16:42:29.040
> 
> 标签：validation, wtforms, filefield

我正在尝试通过 wtforms FileField 捕获上传文件的文件名

在我的验证器中

```
 def checkfile(form,field):
            print form
            print field 
```

“打印表单”语句显示：forms.ticket.TicketForm 对象位于 0x1d2a350

“打印字段”语句显示：输入 id="files" name="files" type="file"

如果我尝试访问 field.file 或 field.files 我得到错误：'FileField'对象没有属性'file(s)'

field.data 为空

那么如何访问文件名来运行验证器呢？

我班的相关部分：

```
class MyForm(wtforms.Form):
     files = wtforms.FileField('Files',[checkfile]) 
```

在我的模板中呈现为：

```
 <form enctype="multipart/form-data" class="form-horizontal" name="add_ticket"      action="/ticket/add" method="post">
 <input type="hidden" name="_xsrf" value="xxxxxxxxxx"/>
 <input class="input-medium" id="files" name="files" type="file">
 </form> 
```

# php - 在 WordPress 插件中以编程方式添加 Mod 重写规则

> ID：12824334
> 
> 赞同：7
> 
> 时间：2012-10-10T16:42:37.223
> 
> 标签：php, mod-rewrite, wordpress

以下示例插件将自定义 mod 重写规则添加到`.htaccess`用户更改永久链接设置时。

```
/* Plugin Name: Sample Mod Rewrite  */

add_action('generate_rewrite_rules', array(new custom_mod_rewrite, "generate_rewrite_rules"));

class custom_mod_rewrite {
    function __construct() {
        $this->wp_rewrite = & $GLOBALS["wp_rewrite"];
    }
    function generate_rewrite_rules() {

        $non_wp_rules = array(
            'simple-redirect/?$plugin_name' => 'http://google.com',
            'one-more-redirect/?$plugin_name' => 'http://yahoo.com'
        );

        $this->wp_rewrite->non_wp_rules = $non_wp_rules + $this->wp_rewrite->non_wp_rules;
        add_filter('mod_rewrite_rules', array(&$this, "mod_rewrite_rules"));
    }
    function mod_rewrite_rules($rules) {
        return preg_replace('#^(RewriteRule \^.*/)\?\$plugin_name .*(http://.*) \[QSA,L\]#mi', '$1 $2 [R=301,L]', $rules);
    }
} 
```

我发现这有两个问题。

1.  如果将其设置为默认永久链接，则不会添加规则。
2.  ~~更重要的是，除非用户更改永久链接设置，否则不会添加规则。~~（可以`$wp_rewrite->flush_rules()`在插件激活时解决）

对于#2，我想知道是否有一种以编程方式添加规则的好方法。

> IIS（常见于 Windows 服务器）不支持 mod_rewrite。

来源：[http ://codex.wordpress.org/Using_Permalinks#Permalinks_without_mod_rewrite](http://codex.wordpress.org/Using_Permalinks#Permalinks_without_mod_rewrite)

听起来并非所有系统都使用`.htaccess`. 所以直接编辑`.htaccess`文件可能不是分布式插件的最佳选择。我不知道。可能我必须检查服务器是否使用 Apache，如果是，我需要检查 .htacess 是否可写并且现有规则没有添加规则，然后最后我可以将规则附加到它。此外，当用户停用插件时，必须删除规则。所以有点麻烦。

如果 WordPress 可以使用内置 API 或其他东西处理它，我想把它留给 WordPress。但是上面的例子是我到目前为止所能找到的。所以我很感激你的信息。

**更新**

正如*pfefferle*建议的那样，我可以使用`$wp_rewrite->flush_rules()`. 但是，问题 #1 仍然存在；使用默认永久链接设置时，它不会生效。有任何想法吗？

```
/* Plugin Name: Sample Mod Rewrite  */

$custom_mod_rewrite = new custom_mod_rewrite;
register_activation_hook( __FILE__, array($custom_mod_rewrite, 'flush_rewrite_rules'));
register_deactivation_hook( __FILE__, array($custom_mod_rewrite, 'flush_rewrite_rules'));
add_action('generate_rewrite_rules', array($custom_mod_rewrite, "generate_rewrite_rules"));

class custom_mod_rewrite {
    function __construct() {
        $this->wp_rewrite = & $GLOBALS["wp_rewrite"];
    }
    function flush_rewrite_rules() {
        $this->wp_rewrite->flush_rules();
    }
    function generate_rewrite_rules() {

        $non_wp_rules = array(
            'simple-redirect/?$plugin_name' => 'http://google.com',
            'one-more-redirect/?$plugin_name' => 'http://yahoo.com'
        );

        $this->wp_rewrite->non_wp_rules = $non_wp_rules + $this->wp_rewrite->non_wp_rules;
        add_filter('mod_rewrite_rules', array(&$this, "mod_rewrite_rules"));
    }
    function mod_rewrite_rules($rules) {
        return preg_replace('#^(RewriteRule \^.*/)\?\$plugin_name .*(http://.*) \[QSA,L\]#mi', '$1 $2 [R=301,L]', $rules);
    }
} 
```

此外，停用插件时，它不会变回以前的规则。我只是按照 codex 示例并将其设置为在停用插件时刷新规则。所以应该有一些代码来删除添加的规则。

作为旁注，根据[法典](http://codex.wordpress.org/Function_Reference/flush_rewrite_rules)，

> 刷新重写规则是一项昂贵的操作，......你应该在插件的激活钩子上刷新重写规则，或者当你知道需要更改重写规则时

**剩下的问题：**

1.  如果将其设置为默认永久链接，则不会添加规则。
2.  停用插件时，它不会变回以前的规则。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T22:34:45.397

不幸的是，目前似乎没有有效的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T10:01:53.710

添加一些更改后，您必须“刷新”重写规则：http: [//codex.wordpress.org/Function_Reference/flush_rewrite_rules](http://codex.wordpress.org/Function_Reference/flush_rewrite_rules)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T20:05:23.637

您可以使用 symfony 的路由系统，如下所述：http: [//pookey.co.uk/wordpress/archives/80-playing-with-symfony-routing-without-symfony](http://pookey.co.uk/wordpress/archives/80-playing-with-symfony-routing-without-symfony)

您可以编写一个简单的插件来实现这个想法。

编辑：已经有一个编辑.htaccess 的插件。[http://plugins.svn.wordpress.org/wp-htaccess-editor/trunk/](http://plugins.svn.wordpress.org/wp-htaccess-editor/trunk/)以它为例。

注意：直接编辑 .htaccess 意味着 apache 用户对文件有写权限，这可能很危险。但我想你已经知道了。;)

# git - 将文件保存在工作树上，但让它们可用于任何分支？

> ID：12824337
> 
> 赞同：3
> 
> 时间：2012-10-10T16:42:53.067
> 
> 标签：git, merge, branch, git-submodules

我希望任何分支都可以使用一些代码文件，但将这些文件保留在它们自己的分支上（而是“分支”，因为这可能不适用于分支）。有没有比将代码放入另一个存储库并添加子模块更好的方法？我想将代码保存在同一个存储库中。

对于上下文：这是一个用于测试我不想放在 master 或 dev 分支上的 dev 分支的服务器（我后来想合并到 master 中，没有测试服务器）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T17:49:30.743

如果您希望某些代码可用于所有分支但未提交，那么您可以简单地将其作为一组未跟踪的文件。在所有其他情况下，您需要更改工作流程并进行一些萨满舞变基、挑选或使用子模块。

不过，我的一般意见是，您应该将测试服务器放在单独的存储库中并对其进行调整，以便它可以直接从您的主项目存储库中获取项目代码，例如作为已编译的工件（jar、源或其他）和那么你不需要任何子模块或其他任何东西。我很确定可以通过这种方式调整测试服务器代码。您不会用测试服务器代码污染项目代码 - 它们是解耦的并且可以存在于世界中而不会相互影响。

希望有帮助！

# facebook-opengraph - OpenGraph 不工作

> ID：12824338
> 
> 赞同：2
> 
> 时间：2012-10-10T16:43:00.247
> 
> 标签：facebook-opengraph

我在我的应用程序上做了一个动作“criar”和一个对象“oferta”。它为创建页面返回的代码是：

```
<head prefix="og: xttp://ogp.me/ns# fb: xttp://ogp.me/ns/fb# testegraph: xttp://ogp.me/ns/fb/testegraph#">
  <meta property="fb:app_id" content="186721904779529" /> 
  <meta property="og:type"   content="testegraph:oferta" /> 
  <meta property="og:url"    content="http://www.vendefacil.net:7979/mkt21manager/Welcome.jsf" /> 
  <meta property="og:title"  content="Sample Oferta" /> 
  <meta property="og:image"  content="https://s-static.ak.fbcdn.net/images/devsite/attachment_blank.png" /> 
```

（我用 \ 而不是 < 放置了元数据，以便可以读取它们）

我尝试使用以下网址直接向 OpenGraph 发帖：

```
url = "https://graph.facebook.com/me/testegraph:criar?oferta=http://www.vendefacil.net:7979/mkt21manager/OpenGraph/oferta.html&access_token="+vc.getAccesstoken(); 
```

结果是：

```
HTTP/1.1 400 Bad Request [Access-Control-Allow-Origin: *, Cache-Control: no-store, Content-Type: text/javascript; charset=UTF-8, Expires: Sat, 01 Jan 2000 00:00:00 GMT, Pragma: no-cache, WWW-Authenticate: OAuth "Facebook Platform" "invalid_request" "(#3502) Object at URL http://www.vendefacil.net:7979/mkt21manager/OpenGraph/oferta.html has og:type of 'website'. The property 'oferta' requires an object of og:type 'testegraph:oferta'. ", X-FB-Rev: 644018, X-FB-Debug: Kvtoba9EGskocz2wxI7T2iXvfzV8SvjdxNNzuYfSCp8=, Date: Wed, 10 Oct 2012 16:33:15 GMT, Connection: keep-alive, Content-Length: 252] 
```

似乎在抱怨提供的网站没有 testegraph:oferta 作为 og:type 我知道在给定的网站中。那么有什么问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T19:27:19.393

根据[Facebook 的调试工具](https://developers.facebook.com/tools/debug)， 您的应用会立即发送 302 重定向到 `302 https://www.facebook.com/dialog/oauth?client_id=153701288088609&redirect_uri=http://www.vendefacil.net:7979/mkt21manager/Welcome.jsf&scope=email,user_photos,user_location,user_groups,status_update&response_type=code`

爬虫遵循重定向，但不会抓取 facebook.com URL，因此无法更新有关您页面的信息。

您需要从重定向中免除 Facebook 的爬虫并提供正确的元标记

# oracle - 当我通过 Oracle 中的公共同义词调用包时得到 pls-00201

> ID：12824343
> 
> 赞同：1
> 
> 时间：2012-10-10T16:43:39.190
> 
> 标签：oracle, package, synonym

我在 sys 中创建了一个名为 sf_timer 的包，然后我为此创建了一个公共同义词：

```
create or replace public synonym sf_timer for sys.sf_timer;
select * from all_synonyms where synonym_name = 'SF_TIMER'; 
```

然后我从另一个用户那里调用这个包：

```
set serveroutput on
declare
  i integer;
  j integer;
begin
  sf_timer.start_timer;
  for i in 1..100000
  loop
    j := j +1;
  end loop;
  sf_timer.show_elapsed_time('Test 1');
end;
/ 
```

不幸的是，我在下面收到错误：

```
Error report:
ORA-06550: line 5, column 3:
PLS-00201: identifier 'SF_TIMER' must be declared
ORA-06550: line 5, column 3:
PL/SQL: Statement ignored
ORA-06550: line 10, column 3:
PLS-00201: identifier 'SF_TIMER' must be declared
ORA-06550: line 10, column 3:
PL/SQL: Statement ignored
06550\. 00000 -  "line %s, column %s:\n%s"
*Cause:    Usually a PL/SQL compilation error. 
```

我可以从 all_synonyms 中看到这个公共同义词，但我不知道为什么我不能在我的模式中调用包。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T16:45:16.427

您授予权限了吗？

以 SYS 身份运行时，请执行此操作...

```
GRANT EXECUTE ON SYS.SF_TIMER TO <user-you're-using>; 
```

作为进一步说明，通常认为在 SYS 模式中创建对象是不好的做法:-)

# flash - 闪存 as3 出错

> ID：12824347
> 
> 赞同：0
> 
> 时间：2012-10-10T16:43:54.890
> 
> 标签：flash, flash-cs5

当我运行我的应用程序时，我收到以下错误消息：

```
Error #2044: Ej hanterad ioError:. text=Error #2032: Flödesfel. URL: file:///C|/wamp/www/PrototypFlash/guestbookParse.php/PrototypFlash
    at prototyp_fla::testimonials_33/frame1()
    at flash.display::Sprite/constructChildren()
    at flash.display::Sprite()
    at flash.display::MovieClip()
    at BandsPage()
    at Main() 
```

不幸的是，我在代码中找不到错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-03T19:08:49.610

通过按住键盘上的 CTRL + SHIFT + Enter/Return 在 Flash 中使用调试模式。当错误发生时，它应该将您带到抛出错误的行。

# libcurl - 传输后使用 Curllib 重命名文件 (sftp)

> ID：12824350
> 
> 赞同：0
> 
> 时间：2012-10-10T16:44:02.480
> 
> 标签：libcurl, sftp

已经有一个类似的问题，但[给出的答案并没有解决我的问题](https://stackoverflow.com/questions/4782872/libcurl-sftp-rename-file)。这是我的代码

. . 结构 curl_slist *slist = NULL;

```
curl_easy_setopt( Curl, CURLOPT_UPLOAD, 1L);
curl_easy_setopt( Curl, CURLOPT_URL, "sftp://user:user@blah.blah.net:22/my_temp_file.txt");
curl_easy_setopt( Curl, CURLOPT_READFUNCTION, my_read_func));
curl_easy_setopt( Curl, CURLOPT_READDATA, &my_read_data);

slist = curl_slist_append( slist, "RNFR my_temp_file.txt");
slist = curl_slist_append( slist, "RNTO my_file.txt");

curl_easy_setopt( Curl, CURLOPT_POSTQUOTE,  slist);

rc = curl_easy_perform(Curl); 
```

. . .

当我运行上面我得到一个 CURLE_QUOTE_ERROR （文件传输实际发生但重命名没有发生）。如果我省略了后报价选项，那么所有工作（如以前）都没有错误。

我已经尝试了从/到名称的所有不同格式，但无济于事。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T19:55:05.777

文档说：

> 有效的 SFTP 命令有：chgrp、chmod、chown、ln、mkdir、pwd、rename、rm、rmdir、symlink（参见 curl (1)）

因此，您将使用“重命名”来重命名文件。

您使用的 RNFR/RNTO 是 FTP 命令，尽管名称相似，但 SFTP 与 FTP 相比有很大不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-09T08:10:11.970

这个 SFTP 版本的 FTP cURL 示例对我来说很好用：

```
/***************************************************************************
 *                                  _   _ ____  _
 *  Project                     ___| | | |  _ \| |
 *                             / __| | | | |_) | |
 *                            | (__| |_| |  _ <| |___
 *                             \___|\___/|_| \_\_____|
 *
 * Copyright (C) 1998 - 2017, Daniel Stenberg, <daniel@haxx.se>, et al.
 *
 * This software is licensed as described in the file COPYING, which
 * you should have received as part of this distribution. The terms
 * are also available at https://curl.haxx.se/docs/copyright.html.
 *
 * You may opt to use, copy, modify, merge, publish, distribute and/or sell
 * copies of the Software, and permit persons to whom the Software is
 * furnished to do so, under the terms of the COPYING file.
 *
 * This software is distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY
 * KIND, either express or implied.
 *
 ***************************************************************************/ 
/* <DESC>
 * Gets a file using an SFTP URL.
 * compile me:
 * gcc sftpup.c -lcurl  -o sftpup.exe
 * </DESC>
 */
#include <stdio.h>
#include <string.h>

#include <curl/curl.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <errno.h>
#ifdef WIN32
#include <io.h>
#else
#include <unistd.h>
#endif

/* <DESC>
 * Performs an FTP upload and renames the file just after a successful
 * transfer.
 * </DESC>
 */ 

#define LOCAL_FILE      "/tmp/uploadthis.txt"
#define UPLOAD_FILE_AS  "while-uploading.txt"
#define REMOTE_URL "sftp://sftpuser@123.1.1.1:/data/upload/" UPLOAD_FILE_AS
#define RENAME_FILE_TO  "renamed-and-fine.txt"

/* NOTE: if you want this example to work on Windows with libcurl as a
   DLL, you MUST also provide a read callback with CURLOPT_READFUNCTION.
   Failing to do so will give you a crash since a DLL may not use the
   variable's memory when passed in to it from an app like this. */ 
static size_t read_callback(void *ptr, size_t size, size_t nmemb, void *stream)
{
  curl_off_t nread;
  /* in real-world cases, this would probably get this data differently
     as this fread() stuff is exactly what the library already would do
     by default internally */ 
  size_t retcode = fread(ptr, size, nmemb, stream);

  nread = (curl_off_t)retcode;

  fprintf(stderr, "*** We read %" CURL_FORMAT_CURL_OFF_T
          " bytes from file\n", nread);
  return retcode;
}

int main(void)
{
  CURL *curl;
  CURLcode res;
  FILE *hd_src;
  struct stat file_info;
  curl_off_t fsize;

  struct curl_slist *headerlist = NULL;
  static const char buf_1 [] = "rename /data/upload/" UPLOAD_FILE_AS " /data/upload/" RENAME_FILE_TO;

  /* get the file size of the local file */ 
  if(stat(LOCAL_FILE, &file_info)) {
    printf("Couldnt open '%s': %s\n", LOCAL_FILE, strerror(errno));
    return 1;
  }
  fsize = (curl_off_t)file_info.st_size;

  printf("Local file size: %" CURL_FORMAT_CURL_OFF_T " bytes.\n", fsize);

  /* get a FILE * of the same file */ 
  hd_src = fopen(LOCAL_FILE, "rb");

  /* In windows, this will init the winsock stuff */ 
  curl_global_init(CURL_GLOBAL_ALL);

  /* get a curl handle */ 
  curl = curl_easy_init();
  if(curl) {
    /* build a list of commands to pass to libcurl */ 
    headerlist = curl_slist_append(headerlist, buf_1);

    /* we want to use our own read function */ 
    curl_easy_setopt(curl, CURLOPT_READFUNCTION, read_callback);

    /* enable uploading */ 
    curl_easy_setopt(curl, CURLOPT_UPLOAD, 1L);

    /* specify target */ 
    curl_easy_setopt(curl, CURLOPT_URL, REMOTE_URL);

    /* pass in that last of FTP commands to run after the transfer */ 
    curl_easy_setopt(curl, CURLOPT_POSTQUOTE, headerlist);

    /* now specify which file to upload */ 
    curl_easy_setopt(curl, CURLOPT_READDATA, hd_src);

    /* Set the size of the file to upload (optional).  If you give a *_LARGE
       option you MUST make sure that the type of the passed-in argument is a
       curl_off_t. If you use CURLOPT_INFILESIZE (without _LARGE) you must
       make sure that to pass in a type 'long' argument. */ 
    curl_easy_setopt(curl, CURLOPT_INFILESIZE_LARGE,
                     (curl_off_t)fsize);

    /* Now run off and do what you've been told! */ 
    res = curl_easy_perform(curl);
    /* Check for errors */ 
    if(res != CURLE_OK)
      fprintf(stderr, "curl_easy_perform() failed: %s\n",
              curl_easy_strerror(res));

    /* clean up the FTP commands list */ 
    curl_slist_free_all(headerlist);

    /* always cleanup */ 
    curl_easy_cleanup(curl);
  }
  fclose(hd_src); /* close the local file */ 

  curl_global_cleanup();
  return 0;
} 
```

# jquery - 在一个网页上重复相同的 java 菜单两次

> ID：12824356
> 
> 赞同：-1
> 
> 时间：2012-10-10T16:44:21.607
> 
> 标签：jquery

如果您使用类似于 jqueryui.com 上的菜单，您将如何在同一页面上根据需要重复此菜单 2、3、4 次？我知道如果我只是简单地复制和粘贴整个块，第二个菜单将无法访问 .js 文件。

我一直在尝试使用 .clone 和 appendTo，但我不确定这是否是正确的方向。

蒂亚...

这段代码不是我的，但它是我正在查看的一个很好的例子：

```
<head>
<meta charset="utf-8">
<title>accordion demo</title>
<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.0/themes/base/jquery-ui.css">
<script src="http://code.jquery.com/jquery-1.8.2.js"></script>
<script src="http://code.jquery.com/ui/1.9.0/jquery-ui.js"></script>
</head>
<body>

<div id="accordion">
<h3>Section 1</h3>
<div>
    <p>Mauris mauris ante, blandit et, ultrices a, suscipit eget.
    Integer ut neque. Vivamus nisi metus, molestie vel, gravida in,
    condimentum sit amet, nunc. Nam a nibh. Donec suscipit eros.
    Nam mi. Proin viverra leo ut odio.</p>
</div>
<h3>Section 2</h3>
<div>
    <p>Sed non urna. Phasellus eu ligula. Vestibulum sit amet purus.
    Vivamus hendrerit, dolor aliquet laoreet, mauris turpis velit,
    faucibus interdum tellus libero ac justo.</p>
</div>
<h3>Section 3</h3>
<div>
    <p>Nam enim risus, molestie et, porta ac, aliquam ac, risus.
    Quisque lobortis.Phasellus pellentesque purus in massa.</p>
    <ul>
        <li>List item one</li>
        <li>List item two</li>
        <li>List item three</li>
    </ul>
</div>
</div>

<script>
$( "#accordion" ).accordion();
</script>

</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T16:55:25.877

这一切都在手风琴初始化中。

你打电话时

```
$( "#accordion" ).accordion(); 
```

只需添加其他 ID。例如

```
$( "#accordion1, #accordion2, #accordion3" ).accordion(); 
```

或者，您可以简单地向所有要应用手风琴的元素添加一个类，它们都将被初始化。

```
$( ".accordion" ).accordion(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T16:55:49.093

```
<div id="accordion1">
    ...
</div>

<div id="accordion2">
    ...
</div>

<script>
$(function() {
    $("#accordion1").accordion();
    $("#accordion2").accordion();
});
</script> 
```

# ruby-on-rails - Hartl Rails 教程第 5 章 Heroku Push “出了点问题”

> ID：12824357
> 
> 赞同：0
> 
> 时间：2012-10-10T16:44:28.480
> 
> 标签：ruby-on-rails, heroku, push, railstutorial.org

当完全按照指示完成第 5 章时，没有 RSpec 失败，我完成了 git add .、git commit 和 git push 的最后步骤。然后git push heroku。它看起来很成功，当我去 Heroku 站点进行测试时（http://stark-falls-6972.herokuapp.com/）它没有说“我们很抱歉，但是出了点问题”。

Heroku 日志命令并没有表明出现任何问题，尽管有一条关于贬低插件的消息，直到今天我才看到。我该如何解决？

heroku 日志：

```
2012-10-10T16:34:31+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
2012-10-10T16:34:31+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
2012-10-10T16:34:31+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/query_cache.rb:61:in `call'
2012-10-10T16:34:31+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
2012-10-10T16:34:31+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `_run__2054987173047889544__call__2098061657375244569__callbacks'
2012-10-10T16:34:31+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
2012-10-10T16:34:31+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/rack/logger.rb:16:in `call'
2012-10-10T16:34:31+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
2012-10-10T16:34:31+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
2012-10-10T16:34:31+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
2012-10-10T16:34:31+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/lock.rb:15:in `call'
2012-10-10T16:34:31+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/request_id.rb:22:in `call'
2012-10-10T16:34:31+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/static.rb:62:in `call'
2012-10-10T16:34:31+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/rack/logger.rb:26:in `call_app'
2012-10-10T16:34:31+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
2012-10-10T16:34:31+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:185:in `lookup'
2012-10-10T16:34:31+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/methodoverride.rb:21:in `call'
2012-10-10T16:34:31+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/runtime.rb:17:in `call'
2012-10-10T16:34:31+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:245:in `fetch'
2012-10-10T16:34:31+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/application.rb:223:in `call'
2012-10-10T16:34:31+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/content_length.rb:14:in `call'
2012-10-10T16:34:31+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:136:in `forward'
2012-10-10T16:34:31+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/rack/log_tailer.rb:17:in `call'
2012-10-10T16:34:31+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
2012-10-10T16:34:31+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:66:in `call!'
2012-10-10T16:34:31+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:51:in `call'
2012-10-10T16:34:31+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:111:in `service'
2012-10-10T16:34:31+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
2012-10-10T16:34:31+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/handler/webrick.rb:59:in `service'
2012-10-10T16:34:31+00:00 app[web.1]: 
2012-10-10T16:34:31+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/server.rb:183:in `block in start_thread'
2012-10-10T16:34:31+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:70:in `run'
2012-10-10T16:34:31+00:00 app[web.1]: 
2012-10-10T16:36:14+00:00 heroku[slugc]: Slug compilation started
2012-10-10T16:36:41+00:00 heroku[api]: Release v9 created by myemail@example.com
2012-10-10T16:36:41+00:00 heroku[api]: Deploy 90c0db8 by myemail@example.com
2012-10-10T16:36:41+00:00 heroku[web.1]: State changed from up to starting
2012-10-10T16:36:42+00:00 heroku[slugc]: Slug compilation finished
2012-10-10T16:36:44+00:00 heroku[web.1]: Starting process with command `bundle exec rails server -p 58733`
2012-10-10T16:36:45+00:00 heroku[web.1]: Stopping all processes with SIGTERM
2012-10-10T16:36:46+00:00 app[web.1]: [2012-10-10 16:36:46] ERROR SignalException: SIGTERM
2012-10-10T16:36:46+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/server.rb:90:in `select'
2012-10-10T16:36:47+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2012-10-10T16:36:47+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2012-10-10T16:36:49+00:00 app[web.1]: [2012-10-10 16:36:49] INFO  WEBrick 1.3.1
2012-10-10T16:36:49+00:00 app[web.1]: [2012-10-10 16:36:49] INFO  ruby 1.9.2 (2011-07-09) [x86_64-linux]
2012-10-10T16:36:49+00:00 app[web.1]: [2012-10-10 16:36:49] INFO  WEBrick::HTTPServer#start: pid=2 port=58733
2012-10-10T16:36:50+00:00 heroku[web.1]: State changed from starting to up
2012-10-10T16:36:51+00:00 app[web.1]: 
2012-10-10T16:36:51+00:00 app[web.1]: => Booting WEBrick
2012-10-10T16:36:51+00:00 app[web.1]: => Call with -d to detach
2012-10-10T16:36:51+00:00 app[web.1]: => Rails 3.2.8 application starting in production on http://0.0.0.0:58733
2012-10-10T16:36:51+00:00 app[web.1]: => Ctrl-C to shutdown server
2012-10-10T16:36:51+00:00 app[web.1]: 
2012-10-10T16:36:51+00:00 app[web.1]: Started GET "/" for 198.245.202.252 at 2012-10-10 16:36:51 +0000
2012-10-10T16:36:51+00:00 app[web.1]: Connecting to database specified by DATABASE_URL
2012-10-10T16:36:51+00:00 app[web.1]: 
2012-10-10T16:36:51+00:00 app[web.1]: ActiveRecord::ConnectionNotEstablished (ActiveRecord::ConnectionNotEstablished):
2012-10-10T16:36:51+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:404:in `retrieve_connection'
2012-10-10T16:36:51+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_specification.rb:170:in `retrieve_connection'
2012-10-10T16:36:51+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/query_cache.rb:61:in `call'
2012-10-10T16:36:51+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `_run__2960544894057171244__call__2838682389361938761__callbacks'
2012-10-10T16:36:51+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
2012-10-10T16:36:51+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
2012-10-10T16:36:51+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
2012-10-10T16:36:51+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
2012-10-10T16:36:51+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_specification.rb:144:in `connection'
2012-10-10T16:36:51+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/query_cache.rb:67:in `rescue in call'
2012-10-10T16:36:51+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
2012-10-10T16:36:51+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/methodoverride.rb:21:in `call'
2012-10-10T16:36:51+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.8/l
ib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
2012-10-10T16:36:51+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
2012-10-10T16:36:51+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/lock.rb:15:in `call'
2012-10-10T16:36:51+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:136:in `forward'
2012-10-10T16:36:51+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:51:in `call'
2012-10-10T16:36:51+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/rack/logger.rb:26:in `call_app'
2012-10-10T16:36:51+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
2012-10-10T16:36:51+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/content_length.rb:14:in `call'
2012-10-10T16:36:51+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/rack/logger.rb:16:in `call'
2012-10-10T16:36:51+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/rack/log_tailer.rb:17:in `call'
2012-10-10T16:36:51+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:245:in `fetch'
2012-10-10T16:36:51+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:66:in `call!'
2012-10-10T16:36:51+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
2012-10-10T16:36:51+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/runtime.rb:17:in `call'
2012-10-10T16:36:51+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/request_id.rb:22:in `call'
2012-10-10T16:36:51+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
2012-10-10T16:36:51+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/application.rb:223:in `call'
2012-10-10T16:36:51+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/handler/webrick.rb:59:in `service'
2012-10-10T16:36:51+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:111:in `service'
2012-10-10T16:36:51+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:70:in `run'
2012-10-10T16:36:51+00:00 app[web.1]: 
2012-10-10T16:36:51+00:00 app[web.1]: 
2012-10-10T16:36:51+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/server.rb:183:in `block in start_thread'
2012-10-10T16:36:51+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
2012-10-10T16:36:51+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/static.rb:62:in `call'
2012-10-10T16:36:51+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:185:in `lookup'
2012-10-10T16:36:51+00:00 heroku[router]: GET stark-falls-6972.herokuapp.com/ dyno=web.1 queue=0 wait=0ms service=623ms status=500 bytes=643
2012-10-10T16:36:51+00:00 heroku[router]: GET stark-falls-6972.herokuapp.com/favicon.ico dyno=web.1 queue=0 wait=0ms service=12ms status=200 bytes=0
2012-10-10T16:36:55+00:00 heroku[web.1]: Error R12 (Exit timeout) -> At least one process failed to exit within 10 seconds of SIGTERM
2012-10-10T16:36:55+00:00 heroku[web.1]: Stopping remaining processes with SIGKILL
2012-10-10T16:36:57+00:00 heroku[web.1]: Process exited with status 137 
```

当我运行 heroku run rake db:migrate 时，我收到此消息。（ps 我最近开始看到这些折旧消息，据我所知，我没有添加任何插件）

```
Running `rake db:migrate` attached to terminal... up, run.1
DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/Rakefile:7)
DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/Rakefile:7)
Connecting to database specified by DATABASE_URL
rake aborted!
Please install the postgresql adapter: `gem install activerecord-postgresql-adapter` (pg is not part of the bundle. Add it to Gemfile.)

Tasks: TOP => db:migrate => db:load_config 
```

我的 database.yml 文件（在之前的高级练习中更新为 postgresql，我认为它有效）：

```
# SQLite version 3.x
#   gem install sqlite3
#
#   Ensure the SQLite 3 gem is defined in your Gemfile
#   gem 'sqlite3'
development:
  adapter: postgresql
  database: db/development_postgresql
  pool: 5
  timeout: 5000

# Warning: The database defined as "test" will be erased and
# re-generated from your development database when you run "rake".
# Do not set this db to the same as development or production.
test:
  adapter: postgresql
  database: db/test_postgresql
  pool: 5
  timeout: 5000

production:
  adapter: postgresql
  database: db/production_postgresql
  pool: 5
  timeout: 5000 
```

我的宝石文件：

```
source 'https://rubygems.org'

gem 'rails', '3.2.8'
gem 'bootstrap-sass', '2.0.4'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

group :development, :test do
    gem 'pg', '0.12.2'
    gem 'rspec-rails', '2.11.0'
    gem 'guard-rspec', '1.2.1'
  gem 'guard-spork', '1.2.0'
  gem 'spork', '0.9.2'
end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.5'
  gem 'coffee-rails', '~> 3.2.2'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.2.3'
end

gem 'jquery-rails', '2.0.2'

group :test do
    gem 'capybara', '1.1.2'
    gem 'rb-inotify', '0.8.8'
    gem 'libnotify', '0.5.9'
end

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the app server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'debugger' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T21:10:18.127

确保您的应用在本地运行。即当您从 localhost:3000 访问它时

上面的heroku堆栈跟踪中的相关错误消息是`ActiveRecord::ConnectionNotEstablished (ActiveRecord::ConnectionNotEstablished)`

所以 Heroku 无法连接到数据库。检查以确保您已遵循所有以前的 heroku 设置相关配置。

Heroku 支持 postgresdb；因此`pg`gem 必须包含在 Gemfile 中，[如此清单中所述](http://ruby.railstutorial.org/book/ruby-on-rails-tutorial#code-demo_gemfile_sqlite_version_redux)

还要检查[这些 heroku 部署步骤](http://ruby.railstutorial.org/book/ruby-on-rails-tutorial#sec-deploying_the_demo_app)，尤其是`$ heroku run rake db:migrate`步骤。（重复此步骤无害）。

这是一个 Stack Overflow 线程，它详细处理相同的错误消息：[Ruby - ActiveRecord::ConnectionNotEstablished](https://stackoverflow.com/questions/7871233/ruby-activerecordconnectionnotestablished) 希望该页面能够引导您找到正确的答案。

祝你学习 Rails 好运。RailsTutorial 是适合初学者的最佳资源！

# javascript - 正则表达式在特定单词之前/之后查找单词/两个单词

> ID：12824372
> 
> 赞同：-3
> 
> 时间：2012-10-10T16:45:16.503
> 
> 标签：javascript, regex

我想在html中找到一个单词，也想得到单词前后的单词。 [这个](https://stackoverflow.com/questions/5832693/regex-to-find-a-word-before-and-after-a-specific-word)问题通过使用 (?:\S+\s)?\S *text\S* (?:\s\S+)? 并使用 c#。但不适用于javascript。Javascript 看起来不支持`?:`？
有任何想法吗？

例如

> Woobox 是一个已有两年历史的社交营销平台，最近在其优惠券应用程序中增加了对 Apple Passbook 的支持。该集成允许企业使用其系统创建 Passbook 优惠券，甚至可以要求客户在获得优惠券之前执行某种社交活动。例如，他们可能必须在 Facebook 上“喜欢”该品牌或在 Twitter 上关注他们。但该公司还刚刚添加了另一个可以真正促进小企业采用 Passbook 的功能：通过 SMS 支持 Passbook 优惠券。

当我搜索“优惠券”时，我应该得到四个结果：“它的优惠券应用程序”、“使用存折优惠券”、“优惠券。”、“存折优惠券结束”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T17:45:41.497

如果

```
(?:\S+\s)?\S*text\S*(?:\s\S+)? 
```

在 JavaScript 中不起作用，你用错了（或者你需要定义你所说的“工作”）。很可能您没有使用正确的语法来构造正则表达式：

```
var myregexp = /(?:\S+\s)?\S*text\S*(?:\s\S+)?/; 
```

或如何在字符串中查找匹配项：

```
var match = myregexp.exec(subject);
if (match != null) {
    result = match[0];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T17:45:52.217

JavaScript*确实*支持[非匹配组](http://www.regular-expressions.info/brackets.html)语法`(?:…)`。它甚至支持对您的任务有用的[前瞻](http://www.regular-expressions.info/lookaround.html)，只是它不支持后瞻。

# javascript - JavaScript 中是否有与 PHP 的 `__FUNCTION__` 等价的功能？

> ID：12824375
> 
> 赞同：6
> 
> 时间：2012-10-10T16:45:22.730
> 
> 标签：javascript

我正在寻找与[`__FUNCTION__`](http://php.net/manual/en/language.constants.predefined.php)JavaScript 中的 PHP 等效的东西，以允许我获取当前函数的名称。例如：

```
function foo(){
    console.log(__FUNCTION__); // "foo" would be logged to the console
} 
```

有没有办法在 JavaScript 中做到这一点？使用类似于魔术变量`__FUNCTION__`或任何其他解决方法？而且，如果目前没有办法实现这一目标，是否有*计划*？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T17:40:40.627

[您可能会通过object的](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments)[`callee`属性](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments/callee)获得对当前正在执行的函数的引用。请注意，ES5.1 严格模式已弃用它。[`arguments`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments)

[`name`从中，您可以得到函数](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/name)的（非标准）。请注意，这仅适用于函数声明和[命名函数表达式](http://kangax.github.com/nfe/)（在 IE 中存在已知错误），但不适用于作为对象属性的匿名函数：

```
var myObj = {
    method: function() { // unnamed!
        return arguments.callee.name || "anonymous";
    }
};
myObj.method(); // "anonymous" 
```

我自己在调试/错误语句中使用静态字符串，在函数的整个命名空间前面添加以便在代码中轻松找到它。

# c++ - 这里如何使用逗号运算符？

> ID：12824378
> 
> 赞同：4
> 
> 时间：2012-10-10T16:45:30.427
> 
> 标签：c++, comma-operator

> **可能重复：**
> [C++ 逗号运算符](https://stackoverflow.com/questions/54142/c-comma-operator)
> [C 逗号运算符的使用](https://stackoverflow.com/questions/1613230/uses-of-c-comma-operator)

我对 C++ 并不陌生，但这是我第一次看到以下代码：

```
int a=0;
int b=(a=2,a+1); 
```

那是C++代码。你能告诉我这里发生了什么吗？以及变量 b 如何获得值 3？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-10T16:49:08.433

这段代码等价于：

```
int a = 2 ; 
int b = a + 1 ; 
```

对逗号左侧的第一个表达式求值，然后是其右侧的表达式。最右边表达式的结果存储在`=`符号左边的变量中。

查找逗号运算符以获取更多详细信息。

[http://en.wikipedia.org/wiki/Comma_o​​perator](http://en.wikipedia.org/wiki/Comma_operator)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T16:51:51.353

`(a = 2, a + 1);`return 3 因为在一般情况下，运算符 (a, b) 返回 b，并且 (a, b) 中的计算从右到左开始。因此，在您的情况下，`(a = 2, a + 1)`return`a + 1`和 after 运算符`a = 2`执行后`a + 1`返回 3。

# javascript - 需要在每个字段后放置逗号并进行适当的验证

> ID：12824380
> 
> 赞同：0
> 
> 时间：2012-10-10T16:45:31.100
> 
> 标签：javascript, string

我有 3 个用户输入字段.. 说 textbox1、textbox2、textbox3。如果值不为空，我需要做的是这样表示它们：

美国纽约州奥尔巴尼

之后的最后一个文本框值不应有逗号。我能够使用关联数组来做到这一点，但问题是我无法找到一种方法来检测它是否是最后一个值，之后逗号不需要出现。这就是我所做的

```
 var addressObjToFormat= {};
    addressObjToFormat.City = $("#companyentry").find("#City").val();
    addressObjToFormat.State = $("#companyentry").find("#State").val();
    addressObjToFormat.Country = $("#companyentry").find("#Country").val();

    var formattedAddress = $Utils.mapInfoMarkerAddressFormatter(addressObjToFormat);

   mapInfoMarkerAddressFormatter = function mapInfoMarkerAddressFormatter(arraddressObjToFormat) {
       var formattedAddress = '';
       for (var key in addressToFormatObj) {           
           if (addressToFormatObj.hasOwnProperty(key)) {
               if (addressToFormatObj[key] != '') {
                   formattedAddress += addressToFormatObj[key] + ',';                    
               }
           }
       }
       alert(formattedAddress);
   } 
```

上面的代码给了我结果：

奥尔巴尼，纽约，美国，

印度，马哈尔施特拉邦，孟买，

我想要的是它应该能够检查它是否是最后一个字段以防文本框是否为空，并在每个值之后相应地放置逗号。还是有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T16:47:42.777

您可以使用子字符串，[jsfiddle](http://jsfiddle.net/7r2Um/)

```
formattedAddress = formattedAddress.substring(0, formattedAddress.length-1); 
```

或者您可以将所有值保存在数组中并使用 Array.join 例如。

```
var arr = ['item1','item3','item3','item4'];
 formattedAddress  = arr.join(' ,'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T16:49:47.950

```
var formattedAddress = addressToFormatObj.join(','); 
```

数组函数 join() 使用它的第一个参数作为插入数组段之间的粘合剂。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T17:02:35.250

有多种方法可以做到这一点

完成所有处理后，您可以`,`像使用正则表达式一样修剪最后一个 ' '

```
formattedAddress = formattedAddress.replace (/,$/g, ""); 
```

或者，您可以将您的字符串推入一个数组，然后将`join`它们全部推入。

```
var tmp = [];
for (var key in addressToFormatObj) {
    if (addressToFormatObj.hasOwnProperty(key)) {
       if (addressToFormatObj[key]) { // your condition
           tmp.push(addressToFormatObj[key]);
       }
    }
}
var formattedAddress = tmp.join(','); 
```

# googletest - 谷歌测试自动化

> ID：12824381
> 
> 赞同：0
> 
> 时间：2012-10-10T16:45:33.507
> 
> 标签：googletest

我是一名开发人员，使用 C++/unix 工作。

我们必须为我们添加的任何新代码编写谷歌测试。我觉得这真的需要一些努力。

我们可以自动化单元测试（谷歌测试）吗？我的意思是我们可以有一个自动化脚本，它应该具有创建单元测试套件的智能，并且它应该至少覆盖 70% 的代码。

我知道这应该很困难，但只是想知道这是否可能。如果可能，那么我需要为此学习哪些概念。我认为这是一个长期目标，我可以利用我的空闲时间学习/开发这个。请帮助我并提供一些链接/资源，我可以在其中获得一些基本知识。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T01:34:19.957

我认为这个概念从根本上是有缺陷的。

我看不出这样的自动化过程如何在不参考实现该功能的代码的情况下推断出正在测试的功能的*意图。*如果是这种情况，并且代码有错误，则会自动创建测试以检查错误的结果。

在我看来，更合理的做法是拥有一个自动为每个类和函数创建 gtest 样板文件的过程。因此，例如，对于每个类，它可以创建一个适当命名的测试夹具，并为每个公共函数创建一个测试用例。实际的测试用例可能默认只包含以下内容：

```
FAIL() << "Test not yet implemented." 
```

像这样的一些工具很可能已经存在。

这与您想要实现的目标相去甚远，但它*会*消除测试过程中的一些重复性。

# sql-server - VARCHAR' 不是可识别的内置函数名称

> ID：12824385
> 
> 赞同：3
> 
> 时间：2012-10-10T16:46:02.363
> 
> 标签：sql-server, function

这是我的 mssql 函数代码。

```
 ALTER function [dbo].[UF_GetOrderProducts]
(
  @OrderId int
)
returns varchar(500)
as
begin

return
  (
  select CAST(VARCHAR(5),OP.ProductId)+'<br/>'
  from OrderProduct as OP

  where OP.OrderId = @OrderId
  for xml path(''), type
  ).value('.', 'varchar(500)')
end 
```

它返回，`VARCHAR' is not a recognized built-in function name.`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T16:46:37.863

```
CAST(VARCHAR(5),OP.ProductId) 
```

应该

```
CAST(OP.ProductId as VARCHAR(5)) 
```

请参阅[MSDN 文档](http://msdn.microsoft.com/en-us/library/aa226054%28v=sql.80%29.aspx)。

# php - 产品详细信息页面未在 magento 中显示

> ID：12824388
> 
> 赞同：1
> 
> 时间：2012-10-10T16:46:10.380
> 
> 标签：php, magento

嗨，我是 Magento 的新手。我为新的产品类别创建了一个新网站、商店和商店视图。新网站、商店、面包屑一切正常。但是，当我单击与产品关联的链接或图像时，显示页面未找到消息。最有趣的部分是，如果我在搜索相同的产品后做同样的事情，那么它会起作用。请帮忙：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T05:29:28.480

请检查您的产品是否已完成以下设置

1.  产品必须在目录中可见。
2.  产品必须启用。
3.  产品必须有库存数量。
4.  产品必须设置为有货。
5.  如果产品设置为不跟踪库存，它仍然需要有库存数量并设置为库存。
6.  产品必须分配到目标类别。
7.  如果使用多网站模式（或者如果您通过数据流导入产品），则必须将产品分配到目标网站。
8.  您必须刷新“var/Cache”并从 admin > system > index management 重建所有索引

源[Magento 博客](http://magento-talks.blogspot.in/2011/07/magento-error-there-are-no-products.html)

# android - GridView 中第一个位置多次调用 getView

> ID：12824389
> 
> 赞同：5
> 
> 时间：2012-10-10T16:46:12.930
> 
> 标签：android

我有一个带有这个 getView 的适配器：

```
public View getView(int position, View convertView, ViewGroup parent) {
    Log.d("getView gv", position+"");

    NewsLine holder = null;

    if (convertView == null) {
        LayoutInflater inflater = ((Activity) context).getLayoutInflater();
        convertView = inflater.inflate(R.layout.grid_entry, parent, false);
        holder = new NewsLine();

        holder.iv= (ImageView) convertView.findViewById(R.id.photo);

        convertView.setTag(holder);
    } else {
        holder = (NewsLine) convertView.getTag();
    }

    NewsItem item=news.ITEMS.get(position);
    //---------

    if(item.imgurl!=null && item.imgurl.compareToIgnoreCase("null")!=0) 
    {
        holder.iv.setVisibility(View.VISIBLE);     
        mMemoryCache.loadBitmap(item.imgurl, holder.iv,position);
    }
    else
        holder.iv.setVisibility(View.INVISIBLE);
    //-------------

    return convertView;
} 
```

我有两个问题：

1.  对于位置 0，getView 会被多次调用（如果位图在 LruCache 中丢失，则使用 AsyncTask 下载位图）。我有一个动画（从 0 到 1 的 alpha），该位置会重新启动几次。

2.  因为我正在回收视图，有时您可以在几分之一秒内看到旧的 imageView 内容。

//----

这是缓存类（仅堆）：

```
public class SetImgAT extends LruCache<String, Bitmap> {
private static SetImgAT instance;   
private Animation FadeInAnimation;

private SetImgAT(int size, Context context) {
    super(size);
    FadeInAnimation = AnimationUtils.loadAnimation(context, R.anim.fadein);
}

public static synchronized SetImgAT getInstance(int size, Context context) {
    if (instance == null) {
        instance = new SetImgAT(size, context);
    }
    return instance;
}

@Override
protected int sizeOf(String key, Bitmap value) {
    return (value.getRowBytes() * value.getHeight());
}

public void loadBitmap(String url, ImageView imageView,int pos) {
    Bitmap bitmap = instance.get(url.hashCode() + "");
    if (bitmap != null) {
        Log.d("ImageCache", "hit - "+url.hashCode()+"pos:"+pos);
        imageView.setImageBitmap(bitmap);

        imageView.invalidate();
    } else {
        Log.d("ImageCache", "miss");
        BitmapWorkerTask task = new BitmapWorkerTask(imageView);
        task.execute(url);
    }
}

class BitmapWorkerTask extends AsyncTask<String, Void, Bitmap> {
    ImageView mImageView;

    public BitmapWorkerTask(ImageView imageView) {
        mImageView = imageView;
    }

    @Override
    protected Bitmap doInBackground(String... url) {
        Bitmap Picture = null;

        if (url[0] != null && url[0].compareToIgnoreCase("null") != 0) {
            Log.d("GetBMP from", url[0]);

            URL img_value = null;
            try {
                img_value = new URL(url[0]);
            } catch (MalformedURLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            try {
                Picture = BitmapFactory.decodeStream(img_value
                        .openConnection().getInputStream());
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            if (Picture == null) {
                Log.d("deb", "no bitmap");
            } else {
                Log.d("got deb", "got bitmap to "+url[0].hashCode());                   
                instance.put(url[0].hashCode()+"", Picture);
            }

        }
        return Picture;
    }

    @Override
    protected void onPostExecute(Bitmap result) {
        // super.onPostExecute(result);
        if (result != null) {
            Log.d("deb", "set bitmap");
            mImageView.setImageBitmap(result);
            //mImageView.startAnimation(FadeInAnimation);
        }

    }
} 
```

//----------------

}

谢谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-28T21:23:38.713

在来回滚动或随意调用 notifyDataSetChanged() 时，我看到了类似的行为。

作为对您现在正在做的事情的增强，我建议改用毕加索，因为它很好地处理了这种情况，除了动画的淡入淡出。

getView() 中的一个衬里：

```
Picasso.with(context).load(urlToLoad).into(imageView); 
```

见： [http ://square.github.io/picasso/](http://square.github.io/picasso/)

# python - 如何在 Python 中复制行

> ID：12824400
> 
> 赞同：2
> 
> 时间：2012-10-10T16:47:02.783
> 
> 标签：python, string

我有`print (5*"@")`，这给了我：

```
@@@@@ 
```

现在，如果我添加`\n`它`print (5*"@\n")`，它会给我五行，`@`每行一行。

当我希望它给我这个时，我该怎么做：

四行，`@`每行五行，无需输入`@@@@@`代码？

我尝试了类似的东西，`print(5*"@", 4*"\n")`但显然没有用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T16:49:55.507

您可以使用以下内容：

```
(5 * '@' + '\n') * 4 
```

请注意，这比`'@@@@@\n' * 4`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T16:48:26.450

你如何循环打印语句 4 次？

```
for _ in range(4):
    print(5 * '@') 
```

或者，使用`+`追加换行符，并将结果乘以 4：

```
print((5 * '@' + '\n') * 4) 
```

或者，使用列表和`.join()`带有换行符的元素：

```
print('\n'.join([5 * '@'] * 4)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T16:59:48.673

```
for x in [5 * "@"] * 4:
    print x 
```

或者：

```
print "\n".join([5 * "@"] * 4) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T17:11:37.267

你可以做`print "%s\n" % (5*"@")*4`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T17:03:35.460

一行版本：

```
>>> print 4 * ("%s\n" % (5*"@")) 
```

或者

```
>>> print 4 * ( 5*"@" + "\n" ) 
```

多行：

```
>>> for x in xrange(4):
    print "@@@@@"

@@@@@
@@@@@
@@@@@
@@@@@ 
```

# php - PHP JQuery JavaScript - 带有复选框切换的 TreeView

> ID：12824407
> 
> 赞同：2
> 
> 时间：2012-10-10T16:47:50.317
> 
> 标签：php, javascript, jquery, treeview

是否有插件或片段可以帮助我实现这一目标？

![在此处输入图像描述](../Images/b5e1d1da6f32fff436866a77f6e9de84.png)

我不介意从头开始开发它，但我不介意节省一些时间来构建一些东西。谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T16:52:07.837

查看

[http://www.treeview.net/treemenu/3fr_checkbox.html](http://www.treeview.net/treemenu/3fr_checkbox.html)

[http://www.treeview.net/tv/download.asp](http://www.treeview.net/tv/download.asp) <- 该库的间接下载链接。

# c++ - C++ 迭代器“防移除”

> ID：12824415
> 
> 赞同：1
> 
> 时间：2012-10-10T16:48:14.660
> 
> 标签：c++, iterator, observer-pattern

我不知道是否有我需要的特殊关键字。我正在写一个基本的[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)，我担心一些问题。我的实现是经典的。我正在使用一个 std::set 观察者，每当我需要触发一个事件时，我都会遍历这个集合并调用每个观察者的 notify 方法。我的问题如下。在以下情况下，当可观察对象向观察者发送事件时会发生什么：

*   一个观察者想要在事件期间从观察者集中移除自己（或任何其他观察者）？
*   一位观察者想要清除观察者集（移除所有观察者）？
*   一个观察者破坏了可观察的对象？

我知道所有这些情况最终都会发生。我对第三个有想法，但这是题外话。对于第一种和第二种情况，问题在于删除或清除 std::set 将使我用来枚举可观察对象的迭代器无效。即使没有，observable 也不应该通知任何在事件处理期间将被删除的观察者。

我还没有找到一个 set 的实现，它提供了一个能够在删除任何项目时保持有效的迭代器。不过，有可能实现它，但代价是一些间接并在容器中存储对活动迭代器的任何引用，以便在必要时对其进行更新。

另一种解决方案是复制观察者集合，迭代副本并检查当前迭代的观察者是否仍在真实集合中。（这会忘记在活动期间添加的任何新观察者，但这种情况我不在乎）

您对此问题有任何建议/解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T16:57:24.733

我将假设您在容器中存储指针或其他东西，而不是实际上是观察者对象本身。因为您显然不能让观察者代码删除观察者对象！

当您需要在迭代器处于活动状态时修改集合时，根本无法使用 std::set 。这不是它的用途。

如果您需要从容器中移除东西，您可以尝试从事件例程中返回一个值，该值告诉调用者（具有迭代器的代码）从容器中移除该观察者。该代码可以删除迭代器指向的东西并沿着序列正确继续。

如果您需要添加东西，请不要将它们直接添加到容器中。相反，将它们添加到队列中，并让触发事件的代码在完成对容器的迭代后添加新内容。

如果容器有少量对象，并且对象很小（指针），我可能只是复制容器并迭代副本。这样，观察者可以随心所欲地处理容器，而不会搞砸迭代器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T17:01:56.187

让观察者的通知方法接受一个指向该观察者的迭代器，并返回一个指向下一个观察者的迭代器：

```
// PSEUDO-CODE not to be taken literally.

class normalObserver : public Observer {
  iterator notify(iterator me) { 
    assert(*me == this); 
    // do stuff
    return ++me;
  }
 };

 class deleteMeObserver : public Observer {
   iterator notify(iterator me) {
    assert(*me == this); 
     // do stuff
     object.observers.erase(me++);
     return me;
   }
 };

 class deleteEveryObserver :public Observer {
   iterator notifiy(iterator me) {
    assert(*me == this); 
     // do stuff
     object.observers.clear();
     return object.observers.end();
   }
};

 class Object {
   set::set<Observer*> observers;
   void notifyObservers() {
     for(it = observers.begin(); it != observers.end(); ) {
       it = (*it)->notify(it);
     }
   }
 }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T17:23:46.430

不要让观察者直接访问集合。让他们通过可以访问集合和迭代器的方法进行修改，在调用观察者之前应该递增。此方法可以检查迭代器处的项目是否正在被删除，如果是，则将其递增。对于删除所有情况，只需将迭代器设置为`end()`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T17:03:43.250

我建议使用`std::list`而不是`set`，因为这样迭代器在删除元素时不会失效，除非它当然会自行删除。

您可以通过将指针（智能指针甚至可能最好是弱指针）指向观察者对象而不是迭代器来处理想要删除自身的观察者（这样当它删除自己时，指针不会失效（只要它是智能的）并且不会自行删除））

# sharepoint-2010 - Webpart 中的 Mediaelement 错误 (Sharepoint 2010)

> ID：12824418
> 
> 赞同：3
> 
> 时间：2012-10-10T16:48:35.320
> 
> 标签：sharepoint-2010, media-player, web-parts, mediaelement.js

我从 mediaelement-and-player.min.js 收到错误消息：

**行：44 错误：对方法或属性访问的意外调用。**

我正在尝试在 Sharepoint 2010 的 Web 部件中使用播放器。我正在尝试的示例是 YouTube 示例。

这是我从 webpart 中截取的代码片段。

jQuery 由 SP2010 中的母版页加载。

**加载插件：**

```
this.Controls.Add(new CssRegistration() { Name = "/_layouts/Script/mediaelement/mediaelementplayer.css", EnableCssTheming = true });

this.Controls.Add(new ScriptLink { Name = "/_layouts/Script/mediaelement/mediaelement-and-player.min.js", Language = "javascript", Localizable = false, LoadAfterUI = true });
this.Controls.Add(new ScriptLink { Name = "/_layouts/Script/video.js", Language = "javascript", Localizable = false, LoadAfterUI = true }); 
```

**HTML 代码：**

```
writer.Write("<video width='320' height='240' id='player1' >");    
writer.Write("  <!-- Pseudo HTML5 -->");
writer.Write("  <source src='" + VideoPickerUrl + "' type='video/youtube' />");
writer.Write("</video>");
writer.Write("<span id='player1-mode'></span>"); 
```

**Javascript代码：**

```
$("video").mediaelementplayer({
    enablePluginDebug: true,
    pluginPath: '/_layouts/Script/mediaelement/',
    flashName: 'flashmediaelement.swf',
    success: function (media, node, player) {
    $('#' + node.id + '-mode').html('mode: ' + media.pluginType);
    },
    error: function () {
    $('#' + node.id + '-mode').html('Noe er feil!');
    }
}); 
```

**编辑：**

在尝试 NOT .min js 文件时，我也在第 970 行收到错误。代码在 if 语句处停止：

```
for (i=0; i<mediaFiles.length; i++) {
// normal check
    if (htmlMediaElement.canPlayType(mediaFiles[i].type).replace(/no/, '') !== '' 
    // special case for Mac/Safari 5.0.3 which answers '' to canPlayType('audio/mp3') but 'maybe' to canPlayType('audio/mpeg')
       || htmlMediaElement.canPlayType(mediaFiles[i].type.replace(/mp3/,'mpeg')).replace(/no/, '') !== '') {
           result.method = 'native';
           result.url = mediaFiles[i].url;
           break;
       }
} 
```

你对我做错了什么有什么建议吗？

此致

安德斯

# java - 对数组进行排序并在另一个数组中反映变化

> ID：12824423
> 
> 赞同：10
> 
> 时间：2012-10-10T16:48:59.003
> 
> 标签：java, arrays, sorting

我有一个双打数组，在 Java 中：`arr1`我想对其进行排序。最有可能的第一个选项是实用程序方法`Arrays.sort(double[])`。

这个想法是我希望相同的更改（例如 value at`index i`与 value at `index j`in互换`arr1`）反映在另一个整数数组中：（`arr2`从某种意义上说，相同索引处的值也在 in 中更改`arr2`）。

有没有一种简单的方法（技巧）可以在 Java 中实现这一点？还是唯一的办法就是自己实现排序算法？

**更新**`arr1`：我看到人们建议用一个包含 2 个值（一个 from和一个 from `arr2`）的对象数组替换这两个数组。这不会带来一些效率损失。换句话说，对对象数组进行排序是否比对原始类型数组（在这种情况下为双精度数）进行排序效率低？

数据是完全静态的。它很大（它适合内存）但是是静态的。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-10T16:53:31.630

与其尝试维护排序的并行数组，更简洁的解决方案是创建一个封装两个数据值的类，并且只有一个对象数组。

（但要回答您的问题，Java 中没有内置的方法可以做到这一点。实现您自己的排序例程，使两个数组根据其中一个中的值进行排序，这适用于不太可能的少量数据改变，但很难维持。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T16:54:05.480

一种不影响排序性能的解决方案，即仍然是 O(nlog(n)) 时间复杂度。

*   使用地图存储 `array[i] -> i`
*   对数组进行排序
*   遍历排序后的数组，对于每个值，将其用作地图的键以检索原始索引。

编辑：Raihan 的评论让我看起来很痛苦 :(

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T16:55:21.330

试试这个方法......

**-**将其转换`array`为`ArrayList`使用`Arrays.asList()`

**-**创建另一个列表对象引用变量并将相同的 ArrayList 对象分配给它，现在对第一个 ArrayList 的任何更改都将反映到第二个 ArrayList。

**例如：**

```
double[] array = new double[10];

ArrayList<Double> arList_1 = new ArrayList<Double>(Arrays.asList(array));

ArrayList<Double> arList_2 = arList2; 
```

**现在进行排序，有 2 个选项：**

**-**使用`java.lang.Comparable`界面，如果您只想以一种**方式**对其进行排序。

**-**`java.util.Comparator`如果您想以**超过 1 种方式**对其进行排序，请使用界面。

 *** * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T16:59:17.900

请注意确定您在寻找什么，但另一种解决方法可能是这样的。

`arr1`创建一个地图来维护和`arr2`元素之间的关系

```
 Map<Double, Double> myLocalMap<Double, Double>();
      for(int ind=0; indx < arr1.length; indx++){
           myLocalMap.put(Double.valueOf(arr1[indx]), Double.valueOf(arr2[indx]));
      } 
```

`arr1`现在按你说的排序：

```
 Arrays.sort(arr1); 
```

排序`arr1`后，更新`arr2`如下：

```
 for(int ind=0; indx < arr1.length; indx++){
          arr2[indx] = myLocalMap.get(arr1[indx]).doubleValue();
      } 
```**

# ios - iOS：将亚洲字符中的 NSString 拆分为子字符串

> ID：12824428
> 
> 赞同：0
> 
> 时间：2012-10-10T16:49:28.290
> 
> 标签：ios, nsstring

我想将韩文字符中的字符串拆分为子字符串。例如，

`myString=@"어떻게"`分成3个子串：`@"어", @"떻", @"게"`

到目前为止，我尝试过的是：

```
[myString componentsSeparatedByCharactersInSet:[NSCharacterSet characterSetWithCharactersInString:@""]; 
```

但不成功。

有什么建议么？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T16:58:14.197

# ant - 使用 Ant 运行 selenium/sikuli 脚本时无法找到图像

> ID：12824430
> 
> 赞同：1
> 
> 时间：2012-10-10T16:49:31.320
> 
> 标签：ant, selenium, testng, sikuli

我编写了几个 selenium 脚本（Java）并使用 sikuli 来验证图像是否存在。当我通过 Eclipse/TestNG 运行测试时它运行良好，但使用 Ant 时出现以下错误：

[testng] [error] resources/x.png 看起来像一个文件，但在磁盘上找不到。假设它是文本。

以下是我的 build.xml，如果我可以提供更多信息，请告诉我。

```
<project name="test" default="test">
    <property name="src.dir" location="src" />
<property name="build.dir" location="build" />
<property name="dist.dir" location="dist" />
<property name="lib.dir" location="lib" />

    <path id="build.classpath">
        <fileset dir="${lib.dir}">
            <include name="**/*.jar" />
        </fileset>
    </path>

    <target name="clean">
    <delete dir="${build.dir}" />
</target>

    <target name="makedir" depends="clean">
    <mkdir dir="${build.dir}" />
</target>

    <!-- Compiles the java code -->
<target name="compile" depends="clean, makedir">
    <javac srcdir="${src.dir}" destdir="${build.dir}" classpathref="build.classpath"/>      
</target>

<!--Creates the deployable jar file  -->
<target name="jar" depends="compile">
    <jar destfile="${dist.dir}\build.test.ant.jar" basedir="${build.dir}">
        <manifest>
            <attribute name="Main-Class" value="test.Main" />
        </manifest>
    </jar>
</target>

    <taskdef resource="testngtasks" classpath="${lib.dir}/testng-6.5.2.jar"/>

    <target name="test" depends="jar">
      <testng 
   classpath="${build.dir}:${lib.dir}/selenium-java-2.24.1.jar:${lib.dir}/selenium-server-standalone-2.24.1.jar:${lib.dir}/sikuli-script.jar"
   outputDir="${testng.report.dir}"
   testname="test1">
       <xmlfileset dir="." includes="testng.xml" />
      </testng>
      <fail message="BUILD FAILURE" if="failed" />
    </target>

</project> 
```

# spring - 在另一个 Service 中 Spring 注入 Service

> ID：12824431
> 
> 赞同：5
> 
> 时间：2012-10-10T16:49:37.853
> 
> 标签：spring, dependency-injection, annotations, javabeans

我有两个要设置的服务和一个控制器，如下所示：

控制器类：

```
@Controller
public class MyController {

   @Autowired
   IMyService1 service;
} 
```

服务二：

```
@Service
public class MyService2 implements IMyService2 {   } 
```

服务一：

```
@Service
public class MyService1 implements IMyService1 {

   @Autowired
   IMyService2 myService2;  // this bean is not getting created
} 
```

beans.xml 中的所有内容都已正确设置，以便在组件扫描中获取组件，并且所有内容都在同一个基本包下。

第一个服务已正确注入到 Controller 类中，但第二个服务未能注入 (BeanCreationException) 到第一个服务中。

有没有人遇到过这个问题或关于我在这里可能做错的任何想法/建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-05-05T17:42:39.677

我对该主题进行了一些研究，但找不到解决此问题的答案，我只能在没有`@Service`注释的情况下动态实例化第二个服务。

**管制员：**别碰，都一样

```
@Controller
public class MyController {
   @Autowired
   IMyService1 service;
} 
```

**服务 2：**`@Service`从第二个服务中移除

```
public class MyService2 implements IMyService2 {
    public void doSomething() {
        // your code
    }
} 
```

**服务 1：**删除`@Autowired`并动态实例化您的第二个服务

```
@Service
public class MyService1 implements IMyService1 {
   public void actionWithService2() {
       new MyService2().doSomething();
   }
} 
```

# php - 上传时未移动的文件会怎样？

> ID：12824435
> 
> 赞同：0
> 
> 时间：2012-10-10T16:49:47.823
> 
> 标签：php, apache

当使用 POST 方法使用 HTML 页面将文件上传到服务器（我使用 PHP 作为后端脚本语言和 Apache Web 服务器）时，程序员应该使用[move_uploaded_file将上传的文件从其临时位置移动到其他位置()](http://php.net/manual/en/function.move-uploaded-file.php)。但是，如果由于某种原因文件没有移动，那么上传的文件会发生什么？它会永远保留在那里，还是脚本一退出就删除文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T16:52:50.833

[来自 PHP 文档](http://www.php.net/manual/en/features.file-upload.post-method.php)

> 如果该文件未被移走或重命名，则该文件将在请求结束时从临时目录中删除。

它是否被移动并不重要

# orientation - 锁定方向视图

> ID：12824441
> 
> 赞同：0
> 
> 时间：2012-10-10T16:50:11.893
> 
> 标签：orientation

我的应用以纵向打开。当您转向横向时，会出现第二个横向视图。我希望用户能够将屏幕锁定在此位置，以便将设备转到 potrait 不会将视图更改回第一个视图，除非他们解锁它。

# python - 在 Python 中打包和在 C 中解包

> ID：12824442
> 
> 赞同：1
> 
> 时间：2012-10-10T16:50:11.930
> 
> 标签：python, c, ctypes, packing

我正在尝试将整数打包为python中的字节并在C中解压缩它们。所以在我的python代码中我有类似的东西

```
testlib = ctypes.CDLL('/something.so')
testlib.process(repr(pack('B',10))) 
```

它将 10 打包为一个字节，并在我的 C 代码中调用函数“进程”。

在我的 C 代码中需要什么来解压这些打包数据？也就是说，我需要做什么才能从给定的打包数据中取回 10。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T16:55:12.517

假设您有一个包含 10 个整数的 10 字节字符串，只需复制数据。

```
char packed_data[10];
int unpacked[10];

int i;
for(i = 0; i < 10; ++i)
    unpacked[i] = packed_data[i]; 
```

...或使用`memcpy`

另一方面，如果您在打包时使用 4 字节 pr int，则可以在 C 中拆分 char 字符串并`atoi`在其上使用。您如何将数据从 Python 交换到 C ？

# c++ - 以 qreal 引用为参数的语法

> ID：12824446
> 
> 赞同：0
> 
> 时间：2012-10-10T16:50:27.027
> 
> 标签：c++, qt, reference, parameters

我正在将 Qt 与 C++ 一起使用，但我似乎不理解一些让我感觉不一致的东西。我有一个方法可以操纵作为参数发送给它的变量，这是它的声明`aManipulation(qreal& a); //reference to a qreal`

我使用`QPointF`其中包含两个 qreal 值。该类可以通过一个方法返回一个 qreal 值，或者通过另一个方法返回一个引用 qreal&。所以我对这些案例很好奇：

```
qreal value = 1;
QPointF point; point.setX(1);

//OK -- this works eventhough I don't send it as a qreal&
aManipulation(value);

//FAIL -- actually trying to send a qreal& reference is an error
aManipulation(value&);

//OK -- this method however returns a qreal&
aManipulation(point.rx());

//FAIL -- this just returns the '1' and I understand it cannot be referenced
aManipulation(point.x()); 
```

为什么将对象而不是对对象的引用发送到需要对象引用的方法就足够了？我很困惑，因为用纯指针这样做会很清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T17:02:39.640

当您将“价值”传递给：

```
aManipulation(qreal& value)
{
} 
```

说：

```
qreal myreal = 1.2;
aManimulation(myreal); 
```

编译器实际上传递了对 myreal 的*引用*，没有必要说 'myreal&'（事实上，你不能）。

传递指针可能看起来更清晰，但引用方法更安全。您仍然可以获得将地址传递给某物的好处——而不是整个某物——而没有修改指针的风险。

我认为代码也更干净。您不需要所有的 '*' 或将 'const' 放在正确的位置以防止*指针*被修改，同时仍然允许它指向的内容。

当我查看带有所有指针的旧代码时，我觉得它看起来很丑，但这是主观的。当然，有时您实际上想要传递指针（或指向指针的指针）。

# android - 如何使用通过 JSON Web 服务下载的数据填充列表视图

> ID：12824450
> 
> 赞同：-3
> 
> 时间：2012-10-10T16:50:34.080
> 
> 标签：android, json, listview, expandablelistview

我想用通过 Web 服务下载的数据（仅限字符串）填充列表视图。请提供工作代码示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T17:14:05.840

下面的链接可以帮助你

[http://www.androidhive.info/2012/01/android-json-parsing-tutorial/](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)

# amazon-web-services - 如何通过 AWS Java SDK 请求“快照日志”？

> ID：12824454
> 
> 赞同：1
> 
> 时间：2012-10-10T16:50:47.010
> 
> 标签：amazon-web-services, amazon-elastic-beanstalk

是否可以通过[AWS SDK](http://docs.amazonwebservices.com/AWSJavaSDK/latest/javadoc/index.html)以某种方式请求“快照日志”？

可以通过 AWS 控制台执行此操作：

![在此处输入图像描述](../Images/2968576c28a6edf4f5df3d0643f17493.png)

交叉张贴到[亚马逊论坛](https://forums.aws.amazon.com/thread.jspa?threadID=106586)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T18:58:09.920

请求日志快照是一个 3 步过程。首先你必须做一个环境信息请求：

```
elasticBeanstalk.requestEnvironmentInfo(
    new RequestEnvironmentInfoRequest()
        .withEnvironmentName(envionmentName)
        .withInfoType("tail")); 
```

然后你必须检索环境信息：

```
final List<EnvironmentInfoDescription> envInfos =
     elasticBeanstalk.retrieveEnvironmentInfo(
         new RetrieveEnvironmentInfoRequest()
             .withEnvironmentName(environmentName)
             .withInfoType("tail")).getEnvironmentInfo(); 
```

这将返回环境信息描述列表，其中包含 EC2 实例 ID 和包含日志快照的 S3 对象的 URL。然后，您可以使用以下命令检索日志：

```
 DefaultHttpClient client = new DefaultHttpClient();
    DefaultHttpRequestRetryHandler retryhandler = 
        new DefaultHttpRequestRetryHandler(3, true);
    client.setHttpRequestRetryHandler(retryhandler);

    for (EnvironmentInfoDescription environmentInfoDescription : envInfos) {
        System.out.println(environmentInfoDescription.getEc2InstanceId());
         HttpGet rq = new HttpGet(environmentInfoDescription.getMessage());
         try {                    
             HttpResponse response = client.execute(rq);
             InputStream content = response.getEntity().getContent();                    
             System.out.println(IOUtils.toString(content));
         } catch ( Exception e ) {
             System.out.println("Exception fetching " + 
                 environmentInfoDescription.getMessage());
         }
    } 
```

我希望这有帮助！

# python - 如何使用 Liblas 模块填充 liblas.point.Point 对象？

> ID：12824457
> 
> 赞同：1
> 
> 时间：2012-10-10T16:51:00.460
> 
> 标签：python, lidar, liblas

我在 Python 中使用[liblas](http://pypi.python.org/pypi/libLAS)来读取、操作和编写特殊的点格式`*.las`。我有一个字符串

```
s = "309437.95 6959999.84 118.98 16 1 1 0 0 1 0 112.992 5.9881" 
```

其中第一个是 the `X`，第二个是 the `Y`，第三个是 the`Z`等。

使用 Liblas，我创建了一个空`liblas.point.Point`对象

```
>>> pt = liblas.point.Point()
>>> pt
<liblas.point.Point object at 0x0000000005194470> 
```

之后我需要填充这个对象，因为它是空的。

```
>>> pt.x, pt.y,pt.z
(0.0, 0.0, 0.0) 
```

可能使用

```
>>> pt.get_x
<bound method Point.get_x of <liblas.point.Point object at 0x0000000005194470>> 
```

我想说谢谢所有的帮助和建议，我真的需要解决这一步。

来自 Martijn Pieters 的建议

```
 s = "%s %s %s" % (s, value, nh)

    >>> s
    '309437.95 6959999.84 118.98 16 1 1 0 0 1 0 112.992 5.9881'

    # create a liblas.point.Point
    pt = liblas.point.Point()
    pt.x = float(s.split()[0])
    pt.y = float(s.split()[1])
    pt.z = = float(s.split()[11]) # the new Z value
    pt.intensity = = int(s.split()[3])
    pt.return_number= int(s.split()[4])
    pt.number_of_returns = int(s.split()[5])
    pt.scan_direction = int(s.split()[6])
    pt.flightline_edge = int(s.split()[7])
    pt.classification = int(s.split()[8])
    pt.scan_angle = int(s.split()[9]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T16:58:18.493

Point 对象上有`raw_x`,`raw_y`和`raw_z`属性；只需设置这些：

```
pt.raw_x = 309437.95
pt.raw_y = 6959999.84
pt.raw_z = 118.98 
```

还有`x`,`y`和`z`属性；从源代码中并不清楚这两种类型之间的区别是什么：

```
pt.x = 309437.95
pt.y = 6959999.84
pt.z = 118.98 
```

但是库可以直接从 .las 文件中为您生成这些对象，不是吗？`File`您之前遇到问题的类肯定已经返回了这些对象。

并且由于您更新以显示一些代码，因此这是一个更易读的版本：

```
pt = liblas.point.Point()
s = map(float, s.split())
pt.x, pt.y, pt.z = s[0], s[1], s[11]
pt.intensity, pt.return_number = s[3], s[4]
pt.number_of_returns, pt.scan_direction = s[5], s[6]
pt.flightline_edge, pt.classification = s[7], s[8]
pt.scan_angle = s[9] 
```

# c# - Asp.Net 中使用 20 字节密钥的 RC2 加密

> ID：12824458
> 
> 赞同：0
> 
> 时间：2012-10-10T16:51:02.970
> 
> 标签：c#, asp.net, encryption, openssl, rc2-cipher

我被要求在 Asp.Net 站点中实现 RC2 加密/解密。有一些数据需要安全地与其他系统共享，这是已经在使用的加密方法。[我已经尝试了许多不同的方法，但是所有实现都有默认密钥长度，即使算法允许可变密钥长度（ http://en.wikipedia.org/wiki/RC2](http://en.wikipedia.org/wiki/RC2) ）也无法更改。

我正在寻找我是否在分析中忽略了某些内容，或者您​​是否可以推荐更好的选择。

**.Net 方法**

我的第一种方法是尝试使用 .NET RC2CryptoServiceProvider。这不起作用，因为密钥长度是有限的。

[http://msdn.microsoft.com/en-us/library/system.security.cryptography.rc2.keysize.aspx](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rc2.keysize.aspx)

> “该算法支持以 8 位为增量从 40 位到 1024 位的密钥长度，但 RC2CryptoServiceProvider 实现仅支持以 8 位为增量从 40 位到 128 位的密钥长度。”

**OpenSSL.Net 方法**

我尝试使用 OpenSSL 的 .NET 包装器。[http://sourceforge.net/projects/openssl-net/](http://sourceforge.net/projects/openssl-net/)

它运行良好，但似乎只支持默认加密功能，并且无法更改我发现的密钥长度。

```
Cipher ciph = Cipher.RC2_CBC;
ciph.KeyLength = 20; // <---- Keylength cannot be assigned to it is readonly
CipherContext RC2 = new CipherContext(ciph); 
```

**直接调用 OpenSSL**

我还尝试通过创建进程并获取输出来通过命令行调用 OpenSSL。我遇到了同样的问题，即内置函数不允许可变密钥长度。

[http://www.openssl.org/docs/apps/enc.html](http://www.openssl.org/docs/apps/enc.html)

> enc 程序仅支持具有某些参数的固定数量的算法。因此，例如，如果您想使用带有 76 位密钥的 RC2 或带有 84 位密钥的 RC4，您就不能使用这个程序。

# opengl - CL-OPENGL：翻译时“中止”

> ID：12824462
> 
> 赞同：1
> 
> 时间：2012-10-10T16:51:27.703
> 
> 标签：opengl, common-lisp, sbcl

在使用 SBCL、CL-OPENGL 和 Lispbuilder-SDL 编写简单游戏时，我遇到了一个奇怪的错误。在我让游戏运行后不久，我决定清理我所有的调试垃圾（打印语句等）。我这样做了，但是当我之后运行游戏时，我收到了“已中止”的消息，我的整个 Lisp 进程都死了，没有其他错误消息，也没有调试器提示。使用打印语句，我设法将问题隔离到调用 gl:translate。奇怪的是，如果我在该行之前放置一个 break 语句并尝试单步执行，我不会收到任何错误并且代码运行良好。似乎几乎是一种竞争条件，但我没有使用线程。有任何想法吗？

编辑：看来调用 gl:translate 不是问题。如果我执行以下操作：

```
(print 'first)
(print 'second)
(gl:translate ...) 
```

我得到输出

```
FIRST
Aborted 
```

就像我说的，我没有使用线程。

编辑 2：它适用于 CLisp。

编辑3：没关系，它没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T14:12:43.617

我通过切换回纯 SDL 来修复它，这令人失望，但它确实有效。

# javascript - 以函数为源的 JQuery UI 自动完成代码问题

> ID：12824473
> 
> 赞同：0
> 
> 时间：2012-10-10T16:52:33.367
> 
> 标签：javascript, jquery, jquery-ui

所以本质上，我试图转移到一个函数，该函数为`source`自动完成方法中的参数工作，现在脚本被破坏了。即使`$.get(...)`请求正在返回值，键入时也不会显示任何选项。

的HTML：

```
 <tr class="itemTableRow">
                <td>
                    <input type="text" class="item" name="items[]" />
                </td>
                <td>
                    <input type="range" class="quantity" min="1" max="10000" name="quantity[]" />
                </td>
                <td>
                    <select class="versionSelect"><option value="5">5</option><option value="6">6</option><option value="7">7</option></select>
                </td>
            </tr> 
```

Javascript：

```
 $(function() {

            $( ".item" ).autocomplete({
                            source: function(request, response){var data = $.get("http://mydomain.com/dev/kohana/utils/items/search?searchType=maxList&amp;term=" + request.term + "&amp;version=" + $(".item").parent().parent().children(":nth-child(3)").children("select").val()); console.log("" + data); response(data);},
                            minLength: 2
                        });
}); 
```

生成的 HTTP GET 请求 URL（当在输入字段中输入 CP 时）：

```
http://mydomain.com/dev/kohana/utils/items/search?searchType=maxList&term=CP&version=5 
```

生成的 HTTP 响应正文：

```
[{"label":"CP1031L","value":"CP1031L"},{"label":"CP1031M", "value":"CP1031M"] 
```

我还在页面上包含了 Jquery UI 默认样式表，尽管它在此之前工作。我觉得我错过了功能回调应该如何工作的一些非常基本的东西。有人能发现问题吗？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T17:22:17.190

您应该调用`response(data)`成功处理程序`.get()`，如下所示：

```
$( ".item" ).autocomplete({
                            source: function(request, response){var data = $.get("http://mydomain.com/dev/kohana/utils/items/search?searchType=maxList&amp;term=" + request.term + "&amp;version=" + $(".item").parent().parent().children(":nth-child(3)").children("select").val(), function(data) {response(data);});},
                            minLength: 2
                        }); 
```

# scheme - 使用 Scheme 查找列表中的最小元素

> ID：12824478
> 
> 赞同：1
> 
> 时间：2012-10-10T16:52:53.197
> 
> 标签：scheme, tail-recursion

```
(define min
  (lambda (l m c)
    (cond ((null? l) (print m))
          (else ((c (car l))
                 if((< c m) (m c))
                 min((cdr l) m c)))))) 
```

我想用尾递归的方法来做，但它不起作用。我是Scheme的新手，希望你能帮助我。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T17:05:10.497

这看起来像家庭作业，我会给你一些指示，以便你自己解决。填空：

```
(define (mymin lst minval)
  (cond ((null? lst)        ; If the list is empty
         ???)               ; return the minimum value.
        ((< ??? minval)     ; If current element < minimum value
         (mymin ??? ???))   ; advance recursion, current element is new minimum.
        (else               ; If current element >= minimum value
         (mymin ??? ???)))) ; advance recursion, keep the same minimum. 
```

在上面的代码中，我们实现了一个双参数尾递归过程，称为`mymin`（不要使用 name `min`，这是一个内置过程。）第一个参数是要遍历的列表；第二个参数存储到目前为止找到的最小值，当递归结束时，它将保存答案。

像这样调用它，注意对于第一次调用，我们需要在第二个参数中传递一个非常大的数字，以至于所有其他数字都更小：

```
(mymin '(1 2 3 4 0 5) +inf.0)
> 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T19:24:51.600

Oscar 的版本会起作用，但我有一些风格上的小问题（这不是对 Oscar 的挖苦，他保持简单以使解决方案更简单）。如果你让它按照这些思路工作，看看你是否可以做一些改变。

**无虚假参数**

你有 3 个参数，Oscar 有两个，但这是一个接受一个输入的列表 - 一个列表。提供错误的额外种子参数，您将失败。解决此问题的一种方法是在 main 函数中重复*出现*。它可能看起来像这样

```
(define (mymin lst)
  (let ((minval ???))
    (define (findmin lst testval)
      (cond
        (????)
        (????)
        (????))
    (findmin lst minval))) 
```

你明白它是如何工作的吗？您可以将 minval 初始化为 inf.0，就像 Oscar 所做的那样，或者初始化为一个特殊的非数值（有几个不错的选择，一个比另一个更好）。

但是，如果您真的很聪明，您会发现没有必要每次都传递两个值。您可以将一个简单的对象传递给每个递归，而无需内部函数或任何初始化 - 当您一开始就拥有所需的所有数据时，为什么要初始化任何具有无限值的东西？

这是它的外观的线索（它的开头很像奥斯卡的版本）：

```
(define (mymin lst)
  (cond
    ((null? lst) ???)
    ((?????) (car lst))
    (else (mymin (??????????????????????? lst))))) 
```

???s的最后一行发生了一些事情；）

但是，只有在您拥有工作版本后才能尝试这些改进，除非您无法以任何其他方式使其工作。让它工作，然后改进——你学了两次；）

一路走来，有些事情要考虑...

*   如果列表中只有一个元素，你会返回什么？
*   测试列表中是否只有一个元素的最简单方法是什么？
*   如果列表为空，最合乎逻辑的返回是什么？

# c# - 无法在 C# 中解析 XML 文件

> ID：12824483
> 
> 赞同：0
> 
> 时间：2012-10-10T16:53:03.377
> 
> 标签：c#, .net, xml

我是一名 C++ 开发人员，我开始从事 C# WPF 项目。我有一个应该读取 xml 文件的方法。在我的 c++ 应用程序中，我可以非常有效地做到这一点，但在 WPF 中，我不确定如何解决这个问题。让我向您展示我的代码：

```
// When Browse Button is clicked this method is called
private void ExecuteScriptFileDialog()
    {
        var dialog = new OpenFileDialog { InitialDirectory = _defaultPath };
        dialog.DefaultExt = ".xml";
        dialog.Filter = "XML Files (*.xml)|*.xml";
        dialog.ShowDialog();
        ScriptPath = dialog.FileName; //ScriptPath contains the Path of the Xml File
        if (File.Exists(ScriptPath))
        {
            LoadAardvarkScript(ScriptPath);
        }
    }

    public void LoadAardvarkScript(string ScriptPath)
    {
        // I should read the xml file
    } 
```

我在 C++ 中的实现如下：

```
File file = m_selectScript->getCurrentFile(); //m_selectScript is combobox name
if(file.exists())
{
   LoadAardvarkScript(file);
}

void LoadAardvarkScript(File file)
{   

XmlDocument xmlDoc(file);

//Get the main xml element
XmlElement *mainElement = xmlDoc.getDocumentElement();
XmlElement *childElement = NULL;
XmlElement *e = NULL;
int index = 0;
if(!mainElement )
{
    //Not a valid XML file.
    return ;
}

//Reading configurations...
if(mainElement->hasTagName("aardvark"))
{
    forEachXmlChildElement (*mainElement, childElement)
    {
        //Read Board Name
        if (childElement->hasTagName ("i2c_write"))
        {
            // Some code
        }
    }
} 
```

如何在我的 c++ 代码中获取**mainElement**和**childelem的****标记**名？:)

 ***** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T16:59:17.893

不知道 xml 文件的布局这里是一个示例，如果您知道如何使用 Linq，则可以使用

```
class Program
{
    static void Main(string[] args)
    {
        XElement main = XElement.Load(@"users.xml");

        var results = main.Descendants("User")
            .Descendants("Name")
            .Where(e => e.Value == "John Doe")
            .Select(e => e.Parent)
            .Descendants("test")
            .Select(e => new { date = e.Descendants("Date").FirstOrDefault().Value, points = e.Descendants("points").FirstOrDefault().Value });

        foreach (var result in results)
            Console.WriteLine("{0}, {1}", result.date, result.points);
        Console.ReadLine();
    }
} 
```

您也可以使用 XPATH 来解析 xml 文件.. 但确实需要查看 xml 文件布局

如果你想使用 xmlreader

使用 System.Collections.Generic；使用 System.Linq；使用 System.Text；使用 System.Xml；

```
namespace XmlReading
{
    class Program
    {
        static void Main(string[] args)
        {
            //Create an instance of the XmlTextReader and call Read method to read the file            
            XmlTextReader textReader = new XmlTextReader("C:\\myxml.xml");
            textReader.Read();

            XmlDocument xmlDoc = new XmlDocument();
            xmlDoc.Load(textReader);

            XmlNodeList BCode = xmlDoc.GetElementsByTagName("Brandcode");
            XmlNodeList BName = xmlDoc.GetElementsByTagName("Brandname");
            for (int i = 0; i < BCode.Count; i++)
            {
                if (BCode[i].InnerText == "001")
                    Console.WriteLine(BName[i].InnerText);                
            }

            Console.ReadLine();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T16:56:30.997

使用 LINQ 查询从 xml (XDocument) 中提取数据

有关 Xlinq 的更多见解，请参阅此[链接](http://www.dreamincode.net/forums/topic/218979-linq-to-xml/)。

示例 XML：

```
 <?xml version="1.0" encoding="utf-8" standalone="yes"?>
<People>
<Person id="1">
<Name>Joe</Name>
<Age>35</Age>
<Job>Manager</Job>
</Person>

<Person id="2">
<Name>Jason</Name>
<Age>18</Age>
<Job>Software Engineer</Job>
</Person>

</People> 
```

示例 Linq 查询：

```
var names = (from person in Xdocument.Load("People.xml").Descendants("Person")
        where int.Parse(person.Element("Age").Value) < 30
        select person.Element("Name").Value).ToList(); 
```

名称将是字符串列表。此查询将返回 Jason，因为他 18 岁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T17:04:42.807

使用[Linq2Xml](http://msdn.microsoft.com/en-us/library/bb387098.aspx)，

```
var xDoc = XDocument.Load("myfile.xml");

var result = xDoc.Descendants("i2c_write")
                .Select(x => new
                {
                    Addr = x.Attribute("addr").Value,
                    Count = x.Attribute("count").Value,
                    Radix = x.Attribute("radix").Value,
                    Value = x.Value,
                    Sleep = ((XElement)x.NextNode).Attribute("ms").Value 
                })
                .ToList();

var khz = xDoc.Root.Element("i2c_bitrate").Attribute("khz").Value; 
```****

# connection - 在 Ubuntu 笔记本电脑之间建立 LAN 连接

> ID：12824484
> 
> 赞同：-2
> 
> 时间：2012-10-10T16:53:04.340
> 
> 标签：connection, lan

我正在尝试在两台笔记本电脑之间使用 Ubuntu 建立 LAN 连接。但它显示`auto is connected`在一台笔记本电脑上，但其他仍然存在`disconnected`。

是硬件问题还是软件问题？我是否忘记了其他事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T10:00:18.247

您是直接连接它们，还是在它们之间使用开关？如果您直接连接它们，则需要交叉电缆而不是直电缆。还要确保它们都在正确的子网中。

[https://learningnetwork.cisco.com/thread/13249](https://learningnetwork.cisco.com/thread/13249)

另请查看以下链接；[http://en.kioskea.net/forum/affich-25120-how-to-connect-two-laptops-using-lan-cable](http://en.kioskea.net/forum/affich-25120-how-to-connect-two-laptops-using-lan-cable)

# javascript - HTML5 音频 - 测试无效状态错误（或 Dom 异常 11）

> ID：12824487
> 
> 赞同：8
> 
> 时间：2012-10-10T16:53:16.687
> 
> 标签：javascript, html, audio

我正在动态创建音频文件并动态更改源。但是，在我更改 src 并尝试更改 currentTime 之后，我总是会收到 Invalid state 错误。你如何进行测试？或者更好地在它准备好时触发一个事件，然后调用 currentTime 来改变它的音频位置。

```
this.doneLoading = function(aTime){

    try{
        this.mAudioPlayer.currentTime = aTime / 1000.0;
    }catch(err){
        console.log( err );
    }
    this.mAudioPlayer.play();   
}

this.playAtTime = function(aTime) {
    Debug("play at time audio: " + aTime);
    Debug("this.mAudioPlayer.currentTime: " + this.mAudioPlayer.currentTime);

     this.startTime = aTime;

    if (this.mAudioPlayer.src != this.mAudioSrc) {
        this.mAudioPlayer = new Audio();
        this.mAudioPlayer.src = this.mAudioSrc;
        this.mAudioPlayer.load();
        this.mAudioPlayer.play();
        this.mAudioPlayer.addEventListener('canplaythrough', this.doneLoading(aTime), false );
    }
    else if ((isChrome() || isMobileSafari()) && aTime == 0) {
        this.mAudioPlayer.load();
        this.mAudioPlayer.currentTime = aTime / 1000.0;
        this.mAudioPlayer.play();
        Debug("Reloading audio");
    }else{

        this.mAudioPlayer.currentTime = aTime / 1000.0;
        this.mAudioPlayer.play();
    }       

}; 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-05-12T18:22:29.320

对于那些真正需要*测试*来防止这种无效状态错误的人，你可以试试这个：

```
if(this.readyState > 0)
    this.currentTime = aTime; 
```

无论如何似乎对我有用:)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-11T13:25:11.843

您没有将函数*引用*传递给 addEventListener - 您正在调用内联函数。doneLoading **()**函数立即执行（在文件加载之前）并且浏览器正确地抛出一个 INVALID_STATE_ERR：

`this.mAudioPlayer.addEventListener('canplaythrough', this.doneLoading(aTime), false );`

尝试传入函数*引用*。像这样：

```
this.mAudioPlayer.addEventListener('loadedmetadata',function(){
    this.currentTime = aTime / 1000.0;
}, false ); 
```

# sql-server - SQL Server 非聚集索引

> ID：12824490
> 
> 赞同：4
> 
> 时间：2012-10-10T16:53:25.587
> 
> 标签：sql-server, indexing

我试图找出在 SQL Server 中处理表上的索引的最佳方法。

我有一张只需要读取的表格。没有真正写入表（在初始设置之后）。

表中有大约 5-6 列需要索引。为整个表设置一个非聚集索引并将我需要索引的所有列添加到该索引是否更有意义，或者我应该设置多个非聚集索引，每个索引都有一列？

我想知道哪种设置会具有更好的读取性能。

对此的任何帮助都会很棒。

更新：

已经有一些很好的答案，但我想详细说明我的需求。

有一个带有自动记录的主表。我需要能够对超过 100 毫米的记录进行非常快速的计数。where 语句会有所不同，但我试图索引 where 语句中所有可能的列。所以我会有这样的查询：

```
SELECT COUNT(recordID)
FROM tableName
WHERE zip IN (32801, 32802, 32803, 32809) 
AND makeID = '32' 
AND modelID IN (22, 332, 402, 504, 620) 
```

或类似的东西：

```
SELECT COUNT(recordID)
FROM tableName
WHERE stateID = '9' 
AND classCode IN (3,5,9) 
AND makeID NOT IN (55, 56, 60, 80, 99) 
```

因此，where 子句中可能有大约 5-6 列，但在哪些列上会有很大差异。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T16:58:42.667

您拥有的索引越少 - 越好。每个索引可能会加快一些查询 - 但它也会产生开销并且需要维护。如果您不写太多东西到桌子上，那还不错。

如果您*可以*将多个列组合成一个索引 - 完美！但是，如果您在多列上有一个复合索引，则*只有*在您使用/需要最左边的 n 列时才能使用该索引。

`(City, LastName, FirstName)`因此，如果您在电话簿中有类似的索引- 如果您正在寻找：

*   特定城市的每个人
*   “波士顿”中的每个“史密斯”
*   “纽约”中的每个“保罗·史密斯”

但它**不能**用于在整个表格中查找名字为“Paul”的所有条目或姓氏为“Brown”的所有人；*仅*当您还指定`City`列时才能使用索引

因此 - 复合索引是有益且可取的 - 但前提是您可以真正使用它们！如果您需要单独选择列，则只有一个包含 6 列的索引对您**没有帮助**

**更新：**通过您的具体查询，您现在可以开始设计哪些索引会有所帮助：

```
SELECT COUNT(recordID)
FROM tableName
WHERE zip IN (32801, 32802, 32803, 32809) 
AND modelID = '32' 
AND model ID IN (22, 332, 402, 504, 620) 
```

在这里， ( ) 上的索引`zip, modelID`可能是一个好主意 - 两者`zip`和`modelID`在 where 子句中（一起）使用，并且`recordID`在索引中（作为`Include(RecordID)`子句）也应该有帮助。

```
SELECT COUNT(recordID)
FROM tableName
WHERE stateID = '9' 
AND classCode IN (3,5,9) 
AND makeID NOT IN (55, 56, 60, 80, 99) 
```

再次：基于`WHERE`子句 - 在 ( ) 上创建索引`stateID, classCode, makeID`并可能添加`Include(RecordID)`以便非聚集索引*覆盖*（例如，查询所需的所有信息都在非聚集索引本身中 - 无需返回“基本”表）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-10T16:56:22.733

这取决于您的访问模式

对于只读表，我很可能会创建多个非聚集索引，每个索引都有多个键列来匹配 WHERE 子句，并且[包含](https://stackoverflow.com/questions/1307990/why-use-the-include-clause-when-creating-an-index/1308012#1308012)非键列的列

我不会有一个非集群的所有人，也没有一个每列：它们不会有用。实际查询

# video - Vimeo.com 不会很快用完 ID 吗？

> ID：12824497
> 
> 赞同：4
> 
> 时间：2012-10-10T16:53:49.850
> 
> 标签：video, uniqueidentifier, vimeo

我最近注意到 Vimeo id 是一个由 8 个整数组成的字符串。这意味着，该方案最多可以容纳 10^8 个视频 - 或 1 亿个视频。当然，这是一个巨大的数字，但仍然非常非常有限。他们不会很快用完空间吗？我是否必须计划我的应用程序何时添加更多整数或更改为字母和整数之类的？还是我缺少什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T16:58:45.770

有[少于 8 位的视频](http://vimeo.com/10000)，所以看起来他们只是为每个视频增加 1 的数字。换句话说，您应该明确计划第 9 位数字。

就个人而言，我会将视频的整个 URL 存储为字符串，这样您就可以处理他们可以想到的任何未来视频编号方案。指望它们永远是数字可能不是一个好主意，现在每个人似乎都在做虚荣的 URL :)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-10T16:58:31.810

不，他们不会。如有必要，他们可以添加更多数字。

另请注意，Vimeo 的 URI 在很大程度上符合 W3C 对 URI 的建议，因为它们不透露内部实现细节 - 所以你不能肯定地说视频 ID 确实是 8 位整数字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-24T11:14:42.707

官方的回答`Vimeo`是，他们没有计划更改当前存在的标识：

[Vimeo 视频 ID 是否总是一个数字？](https://vimeo.com/forums/topic:267078)

此外，此信息可用于建立 vimeo id 的数字存储：

[视频ID号有多少位？](https://vimeo.com/forums/topic:51576)

# jquery - 仅使用 jquery 应用 clear-fix 或 micro clear-fix

> ID：12824498
> 
> 赞同：0
> 
> 时间：2012-10-10T16:53:58.363
> 
> 标签：jquery, css-float, clearfix

所以我想要做的是使用 jquery 应用 clear-fix 或 micro clear-fix。原因是我无法访问 CSS，所以我一直在使用 jquery 来制作我所有的类和其他与 css 相关的需求。这真的是我无法做到的一件事，所以我需要一些帮助。

两种方法：clearfix

```
.clearfix:after {
content: ".";
display: block;
clear: both;
visibility: hidden;
line-height: 0;
height: 0;
}

.clearfix {
display: inline-block;
} 
```

和微clearfix

```
.cf:before, .cf:after { content: ""; display: table; }
.cf:after { clear: both; }
.cf { zoom: 1; } 
```

使用伪技术，我不知道如何用 jquery 应用它。我一直在做

```
var small_h = {
    "font-size":    "10.4px",
    "margin-left":  "7px"  
};

$(".small_h").css(small_h); 
```

传统上为我的 css，但因为我无法访问样式表，所以我只需要使用 Jquery 来定义这些样式表。如果您能想到一个聪明的方法来做到这一点，当然不必那样，我知道奇怪的要求，但这是一个工作限制，提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T17:15:47.100

您可以将样式块直接附加到头部。

例如：

```
$('head').append('<style type="text/css"> .c{ color:red; } .c:after{ content:\' :)\'; } </style>');​ 
```

[http://jsfiddle.net/xgYYP/](http://jsfiddle.net/xgYYP/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T17:14:09.470

要将 CSS 注入页面，请使用：

```
var css = '.clearfix:after ......... ';
$('<style type="text/css">' + css + '</style>').appendTo('head'); 
```

然后，应用类：

```
$(".small_h").css(small_h).addClass('cf'); 
```

# c - c语言中数组指针的解释？

> ID：12824502
> 
> 赞同：1
> 
> 时间：2012-10-10T16:54:19.873
> 
> 标签：c, pointers, multidimensional-array

> **可能重复：**
> [C：为什么数组的地址等于它的值？](https://stackoverflow.com/questions/2528318/c-how-come-an-arrays-address-is-equal-to-its-value)
> [C指针：数组变量](https://stackoverflow.com/questions/11885027/c-pointer-array-variable)

考虑一个多维数组：

```
int c[1][1]; 
```

为什么以下所有表达式都指向同一个地址？

```
printf("%x", (int *) c);      // 0x00000500
printf("%x", *c);             // 0x00000500
printf("%x", c);              // 0x00000500 
```

指针的实际值和取消引用的值如何相同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T17:02:39.797

你只需要想一想：这个数组的第一个位置在哪里？

假设它`0x00000050`在你的内存空间中。数组中的第一项是什么？它是`c[0][0]`，它的地址是`0x00000050`。果然，第一个位置的地址和数组是一样的。即使您`c[0]`只这样做，它仍然指向相同的地址，只要您将其转换为正确的类型。

但是你不应该混淆指向数组的指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T18:42:39.907

在大多数情况下¹，“N-element array of `T`”类型的表达式将被转换（“decay”）为“pointer to `T`”类型的表达式，表达式的值将是数组中第一个元素的地址.

表达式`c`的类型为`int [1][1]`; 根据上面的规则，表达式将衰减为 type`int (*)[1]`或“指向 1 元素数组的指针`int`”，其值将与 相同`&c[0]`。如果我们取消引用这个指针（如在表达式中`*c`），我们会得到一个类型为“1-element array of `int`”的表达式，再次按照上面的规则，它会衰减为一个类型的表达式`int *`，并且它的值将与 相同`&c[0][0]`。

数组第一个元素的地址和数组本身的地址是一样的，所以`&c`== `&c[0]`== `&c[0][0]`== `c`== `*c`== `c[0]`。所有这些表达式都将解析到相同的地址，即使它们没有相同的类型（分别为`int (*)[1][1]`、`int (*)[1]`、`int *`、`int (*)[1]`、`int *`和`int *`）。

* * *

^(1 - 此规则的例外情况是数组表达式是、 或一元运算符的操作数`sizeof`，或者是用于在声明中初始化另一个数组的字符串文字`_Alignof``&`)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T17:01:54.850

`How would a pointer's actual value and it's derefernced value can be the same`
它不是一个指针，它是一个数组。

[见问答 #3 和 #4](https://stackoverflow.com/questions/12676402/why-cant-i-treat-an-array-like-a-pointer-in-c)

`c`是数组的地址。`c`也是第一个元素的地址。

# c - C open files : 打开的文件数

> ID：12824503
> 
> 赞同：1
> 
> 时间：2012-10-10T16:54:19.693
> 
> 标签：c, iostream, yacc, lex

全部，

有什么解决方案可以获取我的程序 c 中打开文件的数量

问题是：使用 lex 和 yacc 解析文件列表时

yyin 收到当前流的 fopen，最后（yywrap）我使用 fclose 关闭 yyin：所以通常打开文件的数量等于零。对于某些示例，当我调用 fopen（许多打开的文件）时，我会收到此错误异常

所以我的问题是如何从系统命令中获取已打开文件的数量以调试此问题。

谢谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T17:53:23.120

如果您*只* `fopen`使用and `fclose`，那么您正在寻找的东西（我认为）可能会通过这样的技巧来实现：

```
#include <stdio.h>

unsigned int open_files = 0;

FILE *fopen_counting(const char *path, const char *mode)
{
    FILE *v;
    if((v = fopen(path,mode)) != NULL) ++open_files;
    return v;
}

int fclose_counting(FILE *fp)
{
    int v;
    if((v = fclose(fp)) != EOF) --open_files;
    return v;
}

#define fopen(x,y) fopen_counting(x,y)
#define fclose(x) fclose_counting(x) 
```

当然，像这样的代码片段只会影响您可以控制的代码：它必须是d 在对或进行`#include`任何调用之前- 否则，将调用原始函数而不是您的替换。`fopen``fclose`

当涉及到将返回当前打开文件描述符数量的系统函数时，不幸的是我不知道这样的事情。但是是什么阻止了您在调试器下运行应用程序、在 上设置断点`fopen`以及简单地使用操作系统工具检查该数字？在 Linux 上，进程中打开的文件描述符的数量等于目录中的条目数`/proc/$PID/fd`- 通过这样做，您甚至可以知道哪个实际文件分配给了哪个文件描述符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T16:56:10.407

您可以使用一个整数，将其设置为等于`0`并在每次使用时递增，每次使用时`fopen`递减`fclose`。

```
file *fp;                  
int files_opened = 0;      //number of open files

if(!(fp = fopen("file.txt", "r"))) //open file
{
                           //could not open file
}
else files_opened++;       //we opened a file so increment files_opened
printf("\n%d files are currently open.", files_opened); //display how many files currently open
if(!(fclose(fp) != EOF)))  //close file
{
    //could not close file
}
else files_opened--;       //we closed a file so decrement files_opened
printf("\n%d files are currently open.", files_opened); //display how many files currently open 
```

# ruby-on-rails - CarrierWave 和多个上传器根据特定模型的永久链接存储文件

> ID：12824504
> 
> 赞同：0
> 
> 时间：2012-10-10T16:54:26.103
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, carrierwave

有人可以就 CarriveWave 的 store_dir 提供帮助吗？

一个人如何拥有多个图像模型来存储基于关联的belong_to模型的永久链接的文件？

```
# Garage model
class Garage < ActiveRecord:Base

  attr_accessible: :avatar, :permalink, :car_image_attributes,
                   :motorcycle_image_attributes

  has_many :car_image
  has_many :motorcycle_image

  mount_uploader :avatar, AvatarUploader

  def set_permalink
    self.permalink = permalink.parameterize
  end

  def to_param
    permalink.parameterize
  end

end 
```

这就是我与 CarrierWave 链接的图像模型

```
# Car Image model
CarImage < ActiveRecord:Base
  belongs_to :garage
  attr_accessible: :garage_id, :image

  mount_uploader :car_image, CarUploader

end

# Motocycle Image model
MotocycleImage < ActiveRecord:Base
  belongs_to :garage
  attr_accessible: :garage_id, :image

  mount_uploader :motorcycle_image, MotocycleUploader

end 
```

这就是我的 CarrierWave 上传器的样子。

```
# CarrierWave avatar uploader
avatar_uploader.rb
  # This uploader directly relates to the Garage model table 
  # column avatar:string.

  def store_dir
    # This works for the avatar because it calls on the Garage permalink
    # but it fails for the other image models because it's a model relation
    # has_many, belongs_to and the model.permalink will be based on the
    # uploader's respective model and not the Garage model
    # eg. car_uploader.rb = model.permalink = CarImage.permalink
    # I would like it to refer to to Garage.permalink at all times.
    "garage/#{model.permalink}/#{mounted_as}/"
  end
end

# CarrierWave car and motorcycle uploaders
car_uploader.rb
# Fails to upload because it doesn't know what permalink is
end

motorcycle_uploader.rb
# Fails to upload because it doesn't know what permalink is
end 
```

抱歉，如果我想这么清楚，但非常感谢您提供的任何见解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T17:12:58.123

可能最简单的方法是将永久链接委托给模型上的父级

```
CarImage < ActiveRecord:Base
  belongs_to :garage
  delegate : permalink, :to => :garage
  attr_accessible: :garage_id, :image

  mount_uploader :car_image, CarUploader

end 
```

# eclipse-plugin - 使用 eclipse 运行 XSLT 时出错

> ID：12824507
> 
> 赞同：1
> 
> 时间：2012-10-10T16:54:32.450
> 
> 标签：eclipse-plugin, xslt-2.0, saxon, xalan

使用eclipse xsl开发工具运行xsl转换时，报如下错误。但是使用撒克逊是没有问题的。如果有专家可以提供可能的解决方案，将不胜感激。

```
12:44:14,714 INFO  [main] Main  - javax.xml.transform.TransformerFactory=null
12:44:14,725 INFO  [main] Main  - java.endorsed.dirs=/usr/lib/jvm/java-1.6.0-openjdk-1.6.0.0.x86_64/jre/lib/endorsed
12:44:14,744 INFO  [main] Main  - launchFile: /gpfs/work01/work/scratch/users/feifan_liu/.metadata/.plugins/org.eclipse.wst.xsl.jaxp.launching/launch/launch.xml
12:44:14,945 ERROR [main] JAXPSAXProcessorInvoker  - Error checking type of the expression 'funcall(tokenize, [variable-ref(rColNames/result-tree), literal-expr(\|)])'.
12:44:14,953 ERROR [main] JAXPSAXProcessorInvoker  - Could not compile stylesheet
javax.xml.transform.TransformerConfigurationException: Could not compile stylesheet
    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl.newTemplates(TransformerFactoryImpl.java:843)
    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl.newTransformer(TransformerFactoryImpl.java:632)
    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl.newTransformerHandler(TransformerFactoryImpl.java:918)
    at org.eclipse.wst.xsl.jaxp.debug.invoker.internal.JAXPSAXProcessorInvoker.addStylesheet(JAXPSAXProcessorInvoker.java:136)
    at org.eclipse.wst.xsl.jaxp.debug.invoker.internal.JAXPSAXProcessorInvoker.addStylesheet(JAXPSAXProcessorInvoker.java:127)
    at org.eclipse.wst.xsl.jaxp.debug.invoker.PipelineDefinition.addStyleSheet(PipelineDefinition.java:161)
    at org.eclipse.wst.xsl.jaxp.debug.invoker.PipelineDefinition.configure(PipelineDefinition.java:152)
    at org.eclipse.wst.xsl.jaxp.debug.invoker.internal.Main.main(Main.java:72)
12:44:14,954 FATAL [main] Main  - Error with stylesheet: file:/gpfs/work01/work/scratch/users/feifan_liu/com.nuance.xslt.ahfs/files/acp2detagged.xsl
org.eclipse.wst.xsl.jaxp.debug.invoker.internal.ConfigurationException: Error with stylesheet: file:/gpfs/work01/work/scratch/users/feifan_liu/com.nuance.xslt.ahfs/files/acp2detagged.xsl
    at org.eclipse.wst.xsl.jaxp.debug.invoker.PipelineDefinition.addStyleSheet(PipelineDefinition.java:163)
    at org.eclipse.wst.xsl.jaxp.debug.invoker.PipelineDefinition.configure(PipelineDefinition.java:152)
    at org.eclipse.wst.xsl.jaxp.debug.invoker.internal.Main.main(Main.java:72) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T17:01:53.727

Eclipse 似乎使用 Xalan Java，它是一个 XSLT 1.0 处理器，它只是抱怨样式表中的代码使用`tokenize`XSLT/XPath 2.0 中的新功能并且 Xalan 不支持这种方式。如果您想将 XSLT 2.0 与 Java 一起使用，请尝试[Saxon 9](http://saxon.sourceforge.net/)。但是，我不知道设置 Eclipse 以使用 Saxon 的详细信息。

# ruby-on-rails - 在 Engine Yard 上设置环境变量

> ID：12824509
> 
> 赞同：5
> 
> 时间：2012-10-10T16:55:01.813
> 
> 标签：ruby-on-rails, deployment, production, engineyard

我的应用程序在 Engine Yard 服务上，我需要设置环境变量以使用我的秘密 ID 和密码。

有人知道我可以如何设置每个变量吗？做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-06T10:20:48.300

我刚刚设法为在 Unicorn 上运行的应用程序设置环境变量。

1.  打开 /data/{app_name}/shared/config/env.custom 并将其编辑为如下所示：

    ```
    export SECRET_ID=yourid
    export SECRET_PASSWORD=yourpass 
    ```

2.  重启独角兽`/engineyard/bin/app_{app_name} reload`

如果您使用乘客，请查看：
[https ://stackoverflow.com/a/12955526/1520775](https://stackoverflow.com/a/12955526/1520775)
[https://github.com/jimneath/ey-cloud-recipes/tree/master/cookbooks/passenger_env_vars](https://github.com/jimneath/ey-cloud-recipes/tree/master/cookbooks/passenger_env_vars)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T19:21:56.493

如果您正在运行 Unicorn，您可以尝试将它们放在 /data//shared/config/env.custom 中。否则，可能会很棘手。扔一张支持票，他们会看看。

披露：我在那里工作:)

# ruby-on-rails - 参数 ruby 错误 - 参数数量错误

> ID：12824511
> 
> 赞同：0
> 
> 时间：2012-10-10T16:55:08.460
> 
> 标签：ruby-on-rails, ruby

我有我的模型课

```
class Location < ActiveRecord::Base
 belongs_to :post
 attr_accessor :address, :category,:name,:postcode,:tel

 def initialize(result)

   @address = result["address"]
   @category = result["category"]
 end
end 
```

在我的控制器中，我正在以两种方式创建 Location 对象

```
Location.new(result) #works fine
@post.location.new         #get error 
```

为什么在第二种情况下它寻找带有 2 个参数的构造函数。我还添加了带有两个参数的构造函数，但它不起作用。

我收到错误

```
wrong number of arguments (2 for 1) 
```

编辑：我如何使@post.location.new 工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T17:16:22.540

您正在重写构造函数 for`Location`以仅采用一个参数，因此现在您必须在每次调用`new`. 您最好的选择可能是不这样做，或者至少提供默认值，如下所示：

```
def initialize(result = {})
   @address  = result["address"]
   @category = result["category"]
end 
```

要建立一个空关联，您可以使用

```
@post.build_location 
```

或者

```
@post.location = Location.new 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T17:00:42.147

是的，对于您问题的最后一部分，（ 2 for 1 ）表示您提供了两个，但该方法只需要一个。只试一个。

# .net - .Net Concurrent BlockingCollection 有内存泄漏？

> ID：12824519
> 
> 赞同：7
> 
> 时间：2012-10-10T16:55:43.733
> 
> 标签：.net, memory-leaks, blockingcollection

我正在使用带有> 的[生产者/消费者模式](http://en.wikipedia.org/wiki/Producer-consumer_problem)`System.Collection.Concurrent.BlockingCollection<DataTable`从数据库（生产者）中检索数据并在数据（消费者）上创建一个 Lucene 索引。

Producer 一次抓取 10000 条记录并将**集合**添加到`BlockingCollection<DataTable>`. 消费者（稍微慢一点）然后抓取这 10000 个并创建一个索引。

阻塞集合限制为`<DataTable>`10000 行中的 5 行。

起初，该程序运行良好，但在它获得大约 150000 行后，我注意到我的计算机内存已用完并且速度变慢。

似乎 BlockingCollection`null`在获取项目后无法将基础数组槽设置为。

代码：

```
 private static LuceneIndex index;
    private static BlockingCollection<DataTable> blockingCol;

    private static void Producer()
    {
        while (true)
        {
            //...get next 10000 rows
            DataTable data = GetNextSet();
            if(data.Row.Count > 0)
                blockingCol.Add(products);
            else
                break;
        }
    }

    private static void Consumer()
    {
        while (!BlockingCol.IsCompleted || BlockingCol.Count > 0)
        {
            DataTable data = blockingCol.Take();
            index.UpdateIndex(GetLuceneDocs(data));
        }
    }

 public static void Main(System.String[] args)
 {
            index = new LuceneIndex();
            blockingCol = new BlockingCollection<DataTable>(2);
            // Create the producer and consumer tasks.
            Task Prod = new Task(Producer);
            Task Con = new Task(Consumer);
            // Start the tasks.
            Con.Start();
            Prod.Start();
            // Wait for both to finish.
            try
            {
               Task.WaitAll(Con, Prod);
            }
            catch (AggregateException exc)
            {
               Console.WriteLine(exc);
            }
            finally
            {
               Con.Dispose();
               Prod.Dispose();
               blockingCol.Dispose();
             }
} 
```

任何人都可以确认拒绝此暂停吗？有什么解决办法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-10T17:02:13.343

是的，我可以确认这一点。您不在 .NET 4.5 上，是吗？它应该在那里修复（并且您在此答案下的评论似乎证实了这一点）。

无论如何，在 a 周围写一个包装器，`DataTable`并在完成表格后清除该包装器。这使它有资格获得 GC。包装器不会被提前 GC，但它很小。

```
class Wrapper<T> { public T Item; } 
```

# javascript - Javascript 或 jQuery png 播放器

> ID：12824521
> 
> 赞同：1
> 
> 时间：2012-10-10T16:55:48.270
> 
> 标签：javascript, jquery, map

我正在使用一个名为 Leaflet 的地图应用程序。我使用的一些代码如下：

```
var layer1 =L.tileLayer('http://{s}.tile.cloudmade.com/BC9A493B41014CAABB98F0471D759707/7540/256/{z}/{x}/{y}.png', {
    attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="http://cloudmade.com">CloudMade</a>',
    maxZoom: 12

}).addTo(map); 
```

// 上面的代码只是在 DIV 标记中放置了一个基础层。但关键是 //addTo 方法。

我还从 Aeris 获取天气雷达数据，并使用以下方法在传单上创建一个图层：

```
var radar_img_arr = createVariables(); 
```

和 createVariables() 看起来像这样：

```
function createVariables(){
  var radar_images = [];

  for (var i = 0; i <= 99; ++i) {
      radar_images[i] = L.tileLayer('http://tile2.aerisapi.com/QjvmoFnKc1Wj94aDULEX_8Y7R8eagwQKlUusR5WZk6JTBdz6zlCm3KIP15CLG/radar/{z}/{x}/{y}/'+data.files[i].time +'.png', {opacity: 0.6, format: 'image/png',   maxZoom: 12,attribution: "FOSM"}).addTo(map).setZIndex(999);
  }

  return radar_images;
} 
```

以上将所有数据一次添加到地图中只是为了测试。

我真正想要的是一个循环，它可以从地图中删除旧图层并用新图层替换它。

两个重要的方法如下： map.removeLayer(radar_img_arr[i]); map.addLayer(radar_img_arr[i+1]);

我正在尝试编写一个循环来执行此操作，但时间混乱了。其他天气网站使用 Flex 或 Flash 为雷达循环设置动画，但我想尝试使用 Javascript 解决方案。

有谁知道如何在 JS 或 jQuery 中创建这个循环？

谢谢，吉姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T18:12:48.257

您应该使用 set timeout 来遍历循环...类似于：

```
// function for setTimeout
var updateImage = function() {

  //gets the current image & update place
  var img = radar_img_arr[place++] 

  // code to update display here.
  ...

  // call the function again in 1 second 
  setTimeout(updateImage, 1000)

  // reset place to 0 if need be
  if (step == radar_img_arr.length-1) 
    place = 0;

}

// variable to store where we are in the array.
var place = 0

// array of images
var radar_img_arr = createVariables()

//start the process in 1 second:
setTimeout(updateImage, 1000)

// or, start it right away:
updateImage() 
```

我不喜欢使用 setInterval，它会一遍又一遍地自动调用你的函数，无论你经过多少毫秒。原因是，如果您的函数运行时间比计时器花费的时间长，那么您会创建一个竞争条件，在您的情况下，这会导致图像奇怪地更新。

# assembly - x86 程序集中的文件读取（DOS 上的 NASM）

> ID：12824524
> 
> 赞同：0
> 
> 时间：2012-10-10T16:55:55.430
> 
> 标签：assembly, io, x86, nasm

所以我正在编写一个汇编程序，它从用户那里获取一个文件名，打开文件，读取它，并将内容打印到屏幕上。我的目标是最终让它计算文件中的字数，但现在我只想让它读取内容以验证我是否正确地执行了所有这些操作。

这是我的代码（很多，我知道）。我还没有实现打印屏幕的功能：

```
[GLOBAL mystart]

[EXTERN _printf]
[EXTERN _atoi]

;define constants for buffer size and interupt
%define DOS 0f1h
%define INBUFFSIZE 40
%define FILEBUFFSIZE 4096

;define macro for printing on screen
%macro printLn 1
    mov ah, 09h
    mov edx, %1
    int DOS
%endmacro

[SECTION .text]

mystart:

readFile:
    ;prints "Enter the filename: " on screen
    printLn string

    ;takes filename from user
    mov ah, 0Ah
    mov byte [infile], INBUFFSIZE
    mov byte [infile+1], 0
    mov edx, infile
    int DOS

    ;pads filename string with 0
    movzx ecx, byte [infile+1]
    mov byte [infile+ecx+2], 0

    ;opens the file (read mode)
    mov ah, 3Dh
    mov al, 0
    mov edx, infile+2
    int DOS
    mov [inhandle], ax
    jc failureJump

    ;reads the file
    mov ah, 3Fh
    mov bx, [inhandle]
    mov edx, filebuff
    mov cx, FILEBUFFSIZE
    int DOS
    jc failureJump
    printLn string3
    mov [nbytes], ax

    ;nbytes stores the number of bytes in the file, so that we can loop through it 
    ;prepare for looping through characters
    mov ecx, 0
    mov cl, [nbytes]
    mov ebx, 0

    ; I want to see how many bytes are in the file
    printLn ecx

processFile:
    printLn string4
    jmp endProcess
failureJump:
    printLn string2

endProcess:
    ret

[SECTION .data]
string db       "Enter a filename: ", 13, 10, '$'
string2 db      "Found a dot!", 13, 10, '$'
string3 db      "First break!", 13, 10, '$'
string4 db      "Second break!", 13, 10, '$'
string5 db      "Third break!", 13, 10, '$'

[SECTION .bss]
infile: resb 512
filebuff: resb FILEBUFFSIZE
inhandle: resw 1
nbytes: resw 1
nbytes2: resw 1 
```

如您所见，我在代码中有几个break-strings 和jc failureJumps 只是为了查看它的位置。就目前而言，代码不起作用。执行时，它会询问文件名，但在第一次中断后失败，并出现一个长错误“由于信号 SIGSEGV 而退出”等。它还提到 ecx 寄存器的值是 ffffffff。如果我注释掉“printLn ecx”行，程序似乎可以工作（它进入“第二次休息！”），虽然速度很慢，而且我没有确凿的证据表明它正在正确读取文件（我确实有一个文件这个：myfile.txt）。有谁知道我做错了什么？提前致谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2017-11-07T21:20:57.360

错误可能是您将 DOS 定义为 0f1h。正确的值是 21 小时。

以下是 Wikipedia 上的 DOS 中断列表：

[https://en.wikipedia.org/wiki/MS-DOS_API#DOS_INT_21h_services](https://en.wikipedia.org/wiki/MS-DOS_API#DOS_INT_21h_services)

希望有帮助！

# maven - IntelliJ 在调试远程 Java 应用程序时跳过错误的行

> ID：12824532
> 
> 赞同：15
> 
> 时间：2012-10-10T16:56:29.167
> 
> 标签：maven, intellij-idea, remote-debugging, liquibase

我尝试使用 Intellij 远程调试[liquibase](http://www.liquibase.org/)项目的 maven 插件。问题是 IDEA 突出显示了错误的源代码行，我不知道为什么。我尝试调试的源代码保持不变。我从我在 Intellij 中使用的源手动构建并安装了插件到我的本地 maven 存储库中。我的 Intellij 版本`11.1.3`和 maven 版本`3.0.4`在 Ubuntu 12.04 上运行。

为了调试我使用命令的 maven 插件`mvnDebug`。如果有人对出了什么问题有丝毫的想法，请给我一些建议。另外，如果您需要更多信息，请询问。我不太习惯远程调试（实际上这是我第二次这样做），所以我可能会漏掉一些你需要的信息。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-10T20:10:22.610

对我来说，每当 IntelliJ 突出显示错误的行时，总是因为用于运行应用程序的 JAR/类的版本与我的源文件不同 - 即不同版本的源用于构建 JAR 和/或类.

您将必须确保您使用的是用于构建您正在调试的类的确切源代码。

您可以通过查看用于启动应用程序的类路径、找到包含您正在调试的类的 JAR 文件或类目录并验证它们是从您正在检查的源构建的来验证这一点。

请注意，在调试第三方库时，通常可以下载“源”jar（参见[IntelliJ2-IDEA 获取 Maven-2 以下载源和文档](https://stackoverflow.com/questions/7572500/intellij2-idea-get-maven-2-to-download-source-and-documentation)）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-15T22:31:07.407

如果你偶然发现了这篇文章，并且确定源代码和 JAR 是相同的代码，那么这可能是你的问题。

[http://youtrack.jetbrains.com/issue/IDEA-8021](http://youtrack.jetbrains.com/issue/IDEA-8021)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T08:02:14.823

您可以直接从 IntelliJ 运行插件，而不是进行远程调试。

1.  只需指向`pom.xml`.
2.  选择`Edit Configurations...`
3.  按下`+`按钮`Add New Configuration`。
4.  选择`Maven`。 ![在此处输入图像描述](../Images/f8534d766dd64018231cf9268c21e299.png)
5.  输入`Working directory`要在其上运行插件的项目。
6.  输入`Command line`. 可能是`process-sources`，`compile`或者`liquibase:status`取决于你想要做什么。
7.  按`OK`
8.  在 Liquibase Mojo 中设置断点。

现在您可以按`Shift`+启动此配置`F9`。

Maven 将启动，最后你会看到你的插件在断点处等待！

* * *

确保您已在目标`pom.xml`中使用正确的版本定义了插件，并且在启动插件之前构建了该插件。`Make`您可以通过在`Before Launch`窗格中启用来确保这一点。

![在此处输入图像描述](../Images/b95a898639b1936bbf7b7896cf384fdc.png)

# java - Form Fusion 应用程序在表单之间转换时会导致白色闪烁。仅在 WebLogic 中，不在 Oracle 应用服务器中

> ID：12824540
> 
> 赞同：1
> 
> 时间：2012-10-10T16:57:01.583
> 
> 标签：java, forms, oracle, weblogic, fusion

我们在 Oracle 应用服务器和 WebLogic 上都托管了一个应用程序。当我们在表单之间转换时，当通过 WebLogic 访问该应用程序时，会在该应用程序上出现一个快速的白色闪烁。当我们在 Oracle 应用服务器上访问它时，我们无法重现此行为。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T11:14:13.800

我们遇到了这个问题。白色闪光正在看到背景图像（在 background= 参数下的 formsweb.cfg 中定义的图像。如果您没有将其定义为与画布颜色相同的图像，则会在表单之间看到此图像。如果您这样做了不设置默认为白色 Oracle Forms 图像的背景参数，这就是您所看到的。

这是 11g 中的新行为。

米娅

# php - PHP 手机 preg_match

> ID：12824542
> 
> 赞同：1
> 
> 时间：2012-10-10T16:57:05.717
> 
> 标签：php, match

对于一个班级，我需要为电话号码做一个 preg_match 。数字必须与此格式 (###) ###-#### 匹配。如果格式不正确，我需要将用户发送到表单以再次填写号码。如果找到匹配项，我需要允许表单通过。

我的导师让我们这样写：

```
$PhonePattern = "\(\d\d\d\) \d\d\d-\d\d\d\d";
if (!preg_match($PhonePattern, $Phone))
{
header('location:CreateAccount.htm');
exit();
}
else 
{
$Phone = $_GET['txtPhone'];
} 
```

这不起作用。可以改成：

```
if (!preg_match('/\(\d\d\d\) \d\d\d-\d\d\d\d/', $Phone))
{
header('location:CreateAccount.htm');
exit();
}
else 
{
$Phone = $_GET['txtPhone'];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T17:01:36.683

以下是*一种*方式：

```
'/^\(\d{3}) \d{3}-\d{4}$/' 
```

我添加了[锚点](http://www.regular-expressions.info/anchors.html)和[重复](http://www.regular-expressions.info/repeat.html)。否则，你很接近。

了解更多关于[正则表达式](http://www.regular-expressions.info)的信息。它们是一种电动工具。但*权力越大，责任越大*。

# sql - 处理多条记录的存储过程

> ID：12824547
> 
> 赞同：1
> 
> 时间：2012-10-10T16:57:34.047
> 
> 标签：sql, sql-server, sql-server-2008, tsql, stored-procedures

我有以下 SQL 在此阶段效果很好：

```
 INSERT INTO recEntrantStatus (entrantId, roundId, judgeId, notified, voted, enterNextRound)
  SELECT entrantId, (@round + 1), judgeId, 0, 0, 0
  FROM recEntrantStatus
  WHERE roundId = @round
  AND voted = 1
  AND enterNextround = 1 
```

此代码检查所有`enterNextRound`为 true 的行，然后为每个行创建一个新行。

**但是，我现在需要扩展它，以便：**

1.  检查所有评委的第二个表 ( `tblJudges`) 并获取所有评委 ID (Id) 的数组

2.  除了现在为从步骤 1 中获得的每个评委/评委 ID 创建上述每一行之外，与上述示例中的操作相同。

任何帮助/建议将一如既往地不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T17:46:54.517

如果我对您的理解正确，这可能会有所帮助：

```
INSERT INTO recEntrantStatus (entrantId, roundId, judgeId, notified, voted, enterNextRound)
SELECT r.entrantId, (@round + 1), j.judgeId /*Now getting tblJudges Id*/, 0, 0, 0
FROM recEntrantStatus r
    -- Get all of the judges
    CROSS JOIN (SELECT DISTINCT Id AS judgeId FROM tblJudges) AS j
WHERE r.roundId = @round
    AND r.voted = 1 -- Is this based on a judge or an entrant status?
    AND r.enterNextround = 1 
```

我们得到的结果和以前一样，只是乘以评委的数量，如果你愿意的话（并使用个人评委 ID）。

# java - 正则表达式 - 仅在逗号后插入空格，如果后面是字母或数字

> ID：12824548
> 
> 赞同：4
> 
> 时间：2012-10-10T16:57:38.953
> 
> 标签：java, regex

在Java中，我想在字符串之后插入一个空格，但前提是逗号后面的字符后面是数字或字母。我希望使用使用正则表达式作为参数的 replaceAll 方法。到目前为止，我有以下内容：

```
String s1="428.0,chf";
s1 = s1.replaceAll(",(\\d|\\w)",", "); 
```

此代码确实成功区分了上面的字符串和逗号后已经有空格的字符串。我的问题是我不知道如何编写表达式以便插入空格。上面的代码将上面显示的字符串中的 c 替换为空格。这不是我想要的。

`s1`执行后应该是这样的`replaceAll`：`"428.0 chf"`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T17:01:38.930

```
s1.replaceAll(",(?=[\da-zA-Z])"," "); 
```

`(?=[\da-zA-Z])`是一个`positive lookahead`将在 . 之后查找数字或单词`,`。此先行不会被替换，因为它从未包含在结果中。这只是一个**检查**

**笔记**

`\w`包括数字、字母和一个`_`。所以不需要`\d`。

一个更好的表示它的方法是，`[\da-zA-Z]`而不是`\w`因为`\w`还包括`_`你不需要的 2 匹配

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T17:01:06.670

试试这个，并注意是`$1`指您匹配的分组：

```
s1.replaceAll(",(\\d|\\w)"," $1"); 
```

请注意，它`String.replaceAll()`的工作方式与`Matcher.replaceAll()`. 从[文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/regex/Matcher.html#replaceAll%28java.lang.String%29)：

> 替换字符串可能包含对捕获的子序列的引用

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T17:02:44.030

```
String s1="428.0,chf";
s1 = s1.replaceAll(",([^_]\\w)"," $1"); //Match alphanumeric except '_' after ','
System.out.println(s1); 
```

**输出： -**

```
428.0 chf 
```

由于`\w`匹配`digits`, `words,`and an `underscore`, So`[^_]`否定`underscore`from `\w`..

**`$1`**代表捕获的组..您`c`在`,`此处之后捕获，因此替换`c`为`_$1`-> `_c`.. “_”代表一个空格..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T17:08:16.527

试试这个....

```
public class Tes {

    public static void main(String[] args){

        String s1="428.0,chf";

        String[] sArr = s1.split(",");

        String finalStr = new String();

        for(String s : sArr){

            finalStr = finalStr +" "+ s;
        }

        System.out.println(finalStr);

    }

} 
```

# javascript - 所有 jquery 事件都应该绑定到 $(document) 吗？

> ID：12824549
> 
> 赞同：168
> 
> 时间：2012-10-10T16:57:44.693
> 
> 标签：javascript, jquery, jquery-selectors, jquery-on

## 这是从哪里来的

当我第一次学习 jQuery 时，我通常会附加这样的事件：

```
$('.my-widget a').click(function() {
    $(this).toggleClass('active');
}); 
```

在了解了有关选择器速度和事件委托的更多信息后，我在几个地方读到“jQuery 事件委托将使您的代码更快”。所以我开始写这样的代码：

```
$('.my-widget').on('click','a',function() {
    $(this).toggleClass('active');
}); 
```

这也是复制已弃用的 .live() 事件行为的推荐方法。这对我很重要，因为我的很多网站一直在动态添加/删除小部件。不过，上面的行为与 .live() 并不完全相同，因为只有添加到现有容器 '.my-widget' 的元素才会获得这种行为。如果我在该代码运行后动态添加另一个 html 块，这些元素将不会获得绑定到它们的事件。像这样：

```
setTimeout(function() {
    $('body').append('<div class="my-widget"><a>Click does nothing</a></div>');
}, 1000); 
```

## 我想要达到的目标：

1.  .live() 的旧行为 // 意味着将事件附加到尚不存在的元素
2.  .on() 的好处
3.  绑定事件的最快性能
4.  管理事件的简单方法

我现在附上这样的所有事件：

```
$(document).on('click.my-widget-namespace', '.my-widget a', function() {
    $(this).toggleClass('active');
}); 
```

这似乎满足了我的所有目标。（是的，由于某种原因，它在 IE 中速度较慢，不知道为什么？）它很快，因为只有一个事件与单个元素相关联，并且仅在事件发生时才评估辅助选择器（如果此处错误，请纠正我）。命名空间很棒，因为它可以更轻松地切换事件侦听器。

## 我的解决方案/问题

所以我开始认为 jQuery 事件应该总是绑定到 $(document)。
**你有什么理由不想这样做吗？
这可以被认为是最佳实践吗？如果不是，为什么？**

如果您已经阅读了整篇文章，谢谢。我感谢任何/所有反馈/见解。

假设：

1.  使用支持`.on()`// 至少版本 1.7 的jQuery
2.  您希望将事件添加到动态添加的内容中

读数/示例：

1.  [http://24ways.org/2011/your-jquery-now-with-less-suck](http://24ways.org/2011/your-jquery-now-with-less-suck)
2.  [http://brandonaaron.net/blog/2010/03/4/event-delegation-with-jquery](http://brandonaaron.net/blog/2010/03/4/event-delegation-with-jquery)
3.  [http://www.jasonbuckboyer.com/playground/speed/speed.html](http://www.jasonbuckboyer.com/playground/speed/speed.html)
4.  [http://api.jquery.com/on/](http://api.jquery.com/on/)

* * *

## 回答 #1

> 赞同：220
> 
> 时间：2012-10-10T17:05:44.247

不 - 您不应该将所有委托的事件处理程序绑定到`document`对象。这可能是您可以创建的性能最差的场景。

首先，事件委托并不总是让你的代码更快。在某些情况下，这是有利的，在某些情况下则不是。当您真正需要事件委托并从中受益时，您应该使用事件委托。否则，您应该将事件处理程序直接绑定到事件发生的对象，因为这通常会更有效。

其次，您不应该在文档级别绑定所有委托事件。这正是`.live()`被弃用的原因，因为当您以这种方式绑定大量事件时，效率非常低。对于委托事件处理，将它们绑定到最近的非动态父级会更有效。

第三，并非所有事件都有效或所有问题都可以通过委派来解决。例如，如果您想拦截输入控件上的键事件并阻止将无效键输入到输入控件中，则不能使用委托事件处理来执行此操作，因为当事件冒泡到委托处理程序时，它已经已由输入控件处理，现在影响该行为为时已晚。

以下是需要或有利的事件委托的时候：

*   当您捕获事件的对象是动态创建/删除时，您仍然希望在它们上捕获事件，而不必在每次创建新事件处理程序时显式重新绑定事件处理程序。
*   当您有很多对象都需要完全相同的事件处理程序时（其中很多对象至少有数百个）。在这种情况下，在设置时绑定一个委托事件处理程序可能比绑定数百或更多直接事件处理程序更有效。请注意，委托事件处理在运行时的效率总是低于直接事件处理程序。
*   当您尝试捕获（在文档中的更高级别）发生在文档中任何元素上的事件时。
*   当您的设计明确使用事件冒泡和 stopPropagation() 来解决页面中的某些问题或功能时。

* * *

要进一步理解这一点，需要了解 jQuery 委托事件处理程序是如何工作的。当你调用这样的东西时：

```
$("#myParent").on('click', 'button.actionButton', myFn); 
```

`#myParent`它在对象上安装了一个通用的 jQuery 事件处理程序。当点击事件冒泡到该委托事件处理程序时，jQuery 必须遍历附加到该对象的委托事件处理程序列表，并查看事件的原始元素是否与委托事件处理程序中的任何选择器匹配。

因为选择器可以相当多地涉及，这意味着 jQuery 必须解析每个选择器，然后将其与原始事件目标的特征进行比较，以查看它是否与每个选择器匹配。这不是一个便宜的操作。如果只有其中一个也没什么大不了的，但是如果您将所有选择器放在文档对象上，并且有数百个选择器要与每个冒泡事件进行比较，这可能会严重影响事件处理性能。

出于这个原因，您希望设置您的委托事件处理程序，以便委托事件处理程序尽可能接近目标对象。这意味着更少的事件将通过每个委托的事件处理程序冒泡，从而提高性能。将所有委托事件放在文档对象上是最差的性能，因为所有冒泡事件都必须经过所有委托事件处理程序并针对所有可能的委托事件选择器进行评估。这正是`.live()`被弃用的原因，因为这就是这样`.live()`做的，并且被证明是非常低效的。

* * *

因此，要实现优化的性能：

1.  仅当委托事件处理实际提供您需要的功能或提高性能时才使用它。不要总是使用它，因为它很容易，因为当您实际上不需要它时。实际上，它在事件分派时的性能比直接事件绑定更差。
2.  尽可能将委托的事件处理程序附加到离事件源最近的父级。如果您正在使用委托事件处理，因为您有要为其捕获事件的动态元素，请选择最近的父级，该父级本身不是动态的。
3.  对委派的事件处理程序使用易于评估的选择器。如果您遵循委托事件处理的工作原理，您将理解委托事件处理程序必须多次与大量对象进行比较，因此选择尽可能高效的选择器或向您的对象添加简单的类以便可以使用更简单的选择器将提高委托事件处理的性能。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-10T17:32:20.977

事件委托是一种在元素实际存在于 DOM 之前编写处理程序的技术。此方法有其自身的缺点，只有在您有此类要求时才应使用。

**什么时候应该使用事件委托？**

1.  当您为需要相同功能的更多元素绑定通用处理程序时。（例如：表格行悬停）
    *   在示例中，如果您必须使用直接绑定来绑定所有行，您最终会为该表中的 n 行创建 n 个处理程序。通过使用委托方法，您最终可以在 1 个简单的处理程序中处理所有这些。
2.  当您在 DOM 中更频繁地添加动态内容时（例如：从表中添加/删除行）

**为什么不应该使用事件委托？**

1.  与将事件直接绑定到元素相比，事件委托更慢。
    *   它会比较它击中的每个气泡上的目标选择器，比较会很昂贵，因为它很复杂。
2.  无法控制事件冒泡，直到它碰到它所绑定的元素。

**PS：**即使对于动态内容，如果在内容插入 DOM 后绑定处理程序，则不必使用事件委托方法。（如果添加的动态内容不经常删除/重新添加）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-26T18:40:00.823

显然，现在实际上建议使用事件委托。至少对于香草js。

[https://gomakethings.com/why-event-delegation-is-a-better-way-to-listen-for-events-in-vanilla-js/](https://gomakethings.com/why-event-delegation-is-a-better-way-to-listen-for-events-in-vanilla-js/)

“Web 性能 # 感觉就像监听文档中的每一次点击都会影响性能，但它实际上比在单个项目上拥有一堆事件监听器更有性能。”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-01T11:16:11.497

我想对 jfriend00 的回答添加一些评论和反驳。（主要是基于我的直觉我的意见）

> 不 - 您不应该将所有委托的事件处理程序绑定到文档对象。这可能是您可以创建的性能最差的场景。
> 
> 首先，事件委托并不总是让你的代码更快。在某些情况下，这是有利的，在某些情况下则不是。当您真正需要事件委托并从中受益时，您应该使用事件委托。否则，您应该将事件处理程序直接绑定到事件发生的对象，因为这通常会更有效。

虽然如果您只为单个元素注册和事件，性能可能会稍好一些，但我相信它不会与委托带来的可扩展性优势相提并论。我也相信浏览器正在（将会）越来越有效地处理这个问题，尽管我没有证据证明这一点。在我看来，事件委托是要走的路！

> 其次，您不应该在文档级别绑定所有委托事件。这正是 .live() 被弃用的原因，因为当您有很多以这种方式绑定的事件时，这非常低效。对于委托事件处理，将它们绑定到最近的非动态父级会更有效。

我有点同意这一点。如果您 100% 确定事件只会发生在容器内，那么将事件绑定到该容器是有意义的，但我仍然反对将事件直接绑定到触发元素。

> 第三，并非所有事件都有效或所有问题都可以通过委派来解决。例如，如果您想拦截输入控件上的键事件并阻止将无效键输入到输入控件中，则不能使用委托事件处理来执行此操作，因为当事件冒泡到委托处理程序时，它已经已由输入控件处理，现在影响该行为为时已晚。

这是不正确的。请看这个codePen：[https ://codepen.io/pwkip/pen/jObGmjq](https://codepen.io/pwkip/pen/jObGmjq)

```
document.addEventListener('keypress', (e) => {
    e.preventDefault();
}); 
```

它说明了如何通过在文档上注册 keypress 事件来防止用户键入。

> 以下是需要或有利的事件委托的时候：
> 
> 当您捕获事件的对象是动态创建/删除时，您仍然希望在它们上捕获事件，而不必在每次创建新事件处理程序时显式重新绑定事件处理程序。当您有很多对象都需要完全相同的事件处理程序时（其中很多对象至少有数百个）。在这种情况下，在设置时绑定一个委托事件处理程序可能比绑定数百或更多直接事件处理程序更有效。**请注意，委托事件处理在运行时的效率总是低于直接事件处理程序。**

我想回复来自[https://ehsangazar.com/optimizing-javascript-event-listeners-for-performance-e28406ad406c的这句话](https://ehsangazar.com/optimizing-javascript-event-listeners-for-performance-e28406ad406c)

`Event delegation promotes binding as few DOM event handlers as possible, since each event handler requires memory. For example, let’s say that we have an HTML unordered list we want to bind event handlers to. Instead of binding a click event handler for each list item (which may be hundreds for all we know), we bind one click handler to the parent unordered list itself.`

此外，谷歌搜索`performance cost of event delegation google`返回更多有利于事件委托的结果。

> 当您尝试捕获（在文档中的更高级别）发生在文档中任何元素上的事件时。当您的设计明确使用事件冒泡和 stopPropagation() 来解决页面中的某些问题或功能时。要进一步理解这一点，需要了解 jQuery 委托事件处理程序是如何工作的。当你调用这样的东西时：
> 
> $("#myParent").on('click', 'button.actionButton', myFn); 它在#myParent 对象上安装了一个通用的jQuery 事件处理程序。当点击事件冒泡到该委托事件处理程序时，jQuery 必须遍历附加到该对象的委托事件处理程序列表，并查看事件的原始元素是否与委托事件处理程序中的任何选择器匹配。
> 
> 因为选择器可以相当多地涉及，这意味着 jQuery 必须解析每个选择器，然后将其与原始事件目标的特征进行比较，以查看它是否与每个选择器匹配。这不是一个便宜的操作。如果只有其中一个也没什么大不了的，但是如果您将所有选择器放在文档对象上，并且有数百个选择器要与每个冒泡事件进行比较，这可能会严重影响事件处理性能。
> 
> 出于这个原因，您希望设置您的委托事件处理程序，以便委托事件处理程序尽可能接近目标对象。这意味着更少的事件将通过每个委托的事件处理程序冒泡，从而提高性能。将所有委托事件放在文档对象上是最差的性能，因为所有冒泡事件都必须通过所有委托事件处理程序并针对所有可能的委托事件选择器进行评估。这正是 .live() 被弃用的原因，因为这是 .live() 所做的，并且被证明是非常低效的。

这是在哪里记录的？如果这是真的，那么 jQuery 似乎以一种非常低效的方式处理委托，然后我的反驳论点应该只适用于 vanilla JS。

仍然：我想找到支持这一说法的官方消息来源。

：： 编辑 ：：

似乎 jQuery 确实以非常低效的方式进行事件冒泡（因为它们支持 IE8） [https://api.jquery.com/on/#event-performance](https://api.jquery.com/on/#event-performance)

所以我在这里的大部分论点只适用于 vanilla JS 和现代浏览器。

# c# - 检查身份验证票过期而不影响它

> ID：12824550
> 
> 赞同：5
> 
> 时间：2012-10-10T16:57:46.800
> 
> 标签：c#, asp.net, forms-authentication, formsauthenticationticket

我正在尝试实现一个 Web 应用程序项目，我的网页可以使用 AJAX 检查服务器的身份验证票证到期日期/时间。

我正在使用带有slidingExpiration 的表单身份验证。

我遇到的问题是我无法弄清楚如何在不重置的情况下检查该值。我创建了一个简单的页面 - CheckExpiration.aspx - 下面是背后的代码：

```
 private class AjaxResponse
  {
     public bool success;
     public string message;
     public string expirationDateTime;
     public string secondsRemaining;
     public string issueDate;
  }

  protected void Page_Load(object sender, EventArgs e)
  {
     AjaxResponse ar = new AjaxResponse();
     JavaScriptSerializer js = new JavaScriptSerializer();

     if (HttpContext.Current.User.Identity.IsAuthenticated)
     {
        FormsIdentity id = (FormsIdentity)HttpContext.Current.User.Identity;
        string expiration = id.Ticket.Expiration.ToString();

        TimeSpan timeRemaining = id.Ticket.Expiration - DateTime.Now;

        ar.success = true;
        ar.expirationDateTime = expiration;
        ar.issueDate = id.Ticket.IssueDate.ToString();
        ar.secondsRemaining = timeRemaining.Minutes.ToString() + ":" + timeRemaining.Seconds.ToString();
     }
     else
     {
        ar.success = false;
        ar.message = "User not authenticated";
     }

     string output = js.Serialize(ar);
     Response.Write(js.Serialize(ar));

  } 
```

我每秒使用 ajax 从应用程序的主页面调用此页面。在身份验证过期的中间点之后，过期将被重置。

如何防止这种行为？我可以在请求的标头中做些什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T15:22:00.027

将您的 CheckExpiration.aspx 页面放在它自己的应用程序中，并将其部署为主应用程序下的虚拟目录。在那个虚拟目录中，配置slidingExpiration=false。您的代码将按原样工作，但在到期前的一半时间以下时不会重新生成票证。

这是我在一个快速的本地项目中所做的，以验证它是否有效：

1.  创建了一个新的 Web 应用程序 AuthTest4 并将其配置为使用路径 /AuthTest4 中的本地 IIS 服务器
2.  进入 IIS 并更改 /AuthTest4 的机器密钥设置以取消选中所有自动生成/隔离选项并生成自己的机器密钥。
3.  创建了一个空的 Web 应用程序 ExpCheck 并将您的 CheckExpiration.aspx 代码放入其中
4.  配置 ExpCheck Web 应用程序以使用虚拟目录 /AuthTest4/ExpCheck 中的本地 IIS
5.  修改 ExpCheck 应用程序的 web.config 以仅包含如下所示的部分

ExpCheck web.config。所有其他安全设置将从父虚拟目录级联。

```
<system.web>
  <authentication mode="Forms">
   <forms slidingExpiration="false" />
  </authentication>
</system.web> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T02:48:35.173

为什么不将过期时间存储为您自己计算的会话变量？您只需要获取一次 id.Ticket.Expiration 的值。然后每次调用，从服务器获取值并相应地递增，并将其存储回服务器。

[http://msdn.microsoft.com/en-us/library/ms178581%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms178581%28v=vs.85%29.aspx)

伪代码：

```
if(!Session.KeyExists("Expiration"))
{
  Session["Expiration"] = id.Ticket.Expiration;
}

Session["TimeRemaining"] = Session["Expiration"] - DateTime.Now;

// get all ajaxy here 
```

# sql - 解析 .sql 文件时输出错误

> ID：12824552
> 
> 赞同：2
> 
> 时间：2012-10-10T16:57:52.300
> 
> 标签：sql, c, parsing

我需要编写一个简单的 c 程序，它将表的特定转储作为输入，并在输出中以特定方式排列它。我正在尝试解析我需要的信息并将它们放入内存中，但是我遇到了问题。我已经输出了我的数据，我可以看到“奇怪的字符”作为输出。这是代码：

```
#include <stdlib.h>
#include <stdio.h>
#include <stdbool.h>
#include <string.h>

typedef struct entityTail
{
    char entity[50];
    struct entityTail* next;
} entityTail;

typedef struct keyTail
{
    char key[300];
    struct keyTail* next;
} keyTail;

typedef struct eventTail
{
    char event[5];
    struct eventTail* next;
} eventTail;

void setATuple(entityTail* entityNew, entityTail* entityNext, keyTail* keyNew, keyTail* keyNext, eventTail* eventNew, eventTail* eventNext, char* startOfParam);

int main(int argc, char* argv[])
{
    if(argc != 2)
    {
        printf("Only 1 param needed: the filename");
        return -1;
    }
    char* buffer = NULL; //this buffer will contain all our conf file
    long size = 0;  //in bytes
    long length = 0; //in chars, must match the "size" variable
    FILE* hFile;
    bool exit = false;
    char* startOfTuple = NULL;
    bool headsSet = false;  //used within a cycle

    entityTail* entityHead = (entityTail*) malloc(sizeof(entityTail));
    keyTail* keyHead = (keyTail*) malloc(sizeof(keyTail));
    eventTail* eventHead = (eventTail*) malloc(sizeof(eventTail));
    entityTail* theEntityTail = NULL;
    keyTail* theKeyTail = NULL;
    eventTail* theEventTail = NULL;

    hFile = fopen( argv[1], "r");        //opening the file in "read-only" mode
    if (hFile == NULL)
    {
        printf("Error: the input file doesn't exist\n");
        return -2;     //error opening the file
    }

    //retrieving the size (in bytes) of my text file
    fseek (hFile , 0 , SEEK_END);   //point to the end of the file
    size = ftell (hFile);   //retrieving the size of the file
    rewind (hFile);     //point to the start

    // allocate memory to contain the whole file:
    buffer = malloc (sizeof(char) * size);
    if (buffer == NULL)
    {
        printf("Error: memory error\n");
        return -3; //memory error
    }
    // copy the file into the buffer:
    length = fread (buffer,1,size,hFile);   //reading "size" elements of 1 byte, stored in hFile
    if (length != size)
    {
        printf("Error: read error\n");
        return -4; //reading error, length and size doesn't match
    }
    /* the whole file is now loaded in the memory buffer. */

    // terminate
    fclose (hFile);

    //now we look for the position where our data starts
    //our entity param is just an int, so it will be not enclosed by the ' symbol
    startOfTuple = strstr(buffer, "VALUES"); //finding "VALUES" inside our table dump
    startOfTuple = strstr(startOfTuple + 1, "("); //now we point to our first tuple
    //now we process the rest of our file
    while(!exit)
    {
        entityTail* entityNew = (entityTail*) malloc(sizeof(entityTail));
        keyTail* keyNew = (keyTail*) malloc(sizeof(keyTail));
        eventTail* eventNew = (eventTail*) malloc(sizeof(eventTail));
        if(!headsSet)   //we need to set our heads
        {
            setATuple(entityHead, NULL, keyHead, NULL, eventHead, NULL, startOfTuple);
            theEntityTail = entityHead;
            theKeyTail = keyHead;
            theEventTail = eventHead;
            headsSet = true;
            printf("\n%s %s %s\n", entityHead->entity, keyHead->key, eventHead->event);
        }

        else
        {
            setATuple(entityNew, theEntityTail, keyNew, theKeyTail, eventNew, theEventTail, startOfTuple);
            theEntityTail = entityNew;
            theKeyTail = keyNew;
            theEventTail = eventNew;
            printf("\n%s  %s  %s\n", entityNew->entity, keyNew->key, eventNew->event);
             exit = true; //debugging purpose
        }
        startOfTuple = strchr(startOfTuple + 1 , '('); //pointing to the next tuple
        if(startOfTuple == NULL) exit = true;
    }
    return 0;
}

void setATuple(entityTail* entityNew, entityTail* entityNext, keyTail* keyNew, keyTail* keyNext, eventTail* eventNew, eventTail* eventNext, char* startOfParam)
{
    int i = 0;
    char* endOfParam = NULL;
    //first we reach the "entity" param (an integer)
    for(i = 0; i < 3; i++)
    {
        startOfParam = strchr(startOfParam + 1, ',');
        endOfParam = strchr(startOfParam + 1, ',');
    }
    //now we set the entityHead
    if(entityNext != NULL)
        entityNew->next = entityNext;
    else    //we're setting the heads
        entityNew->next = NULL;
    strncpy(entityNew->entity, startOfParam + 1, endOfParam - startOfParam - 1);
    //now we set the keyHead; that param is enclosed by two ' symbols
    startOfParam = strchr(endOfParam + 1, '\''); //we look now for the ' symbol, it's easier that look for a comma and then remove the ' symbol
    endOfParam = strchr(startOfParam + 1, '\''); //it should work even if that field in the database is empty
    if(keyNext != NULL)
        keyNew->next = keyNext;
    else
        keyNew->next = NULL;
    strncpy(keyNew->key, startOfParam + 1, endOfParam - startOfParam - 1);
    //now we set the eventHead
    startOfParam = strchr(endOfParam + 1, '\''); //we look now for the ' symbol, it's easier that look for a comma and then remove the ' symbol
    endOfParam = strchr(startOfParam + 1, '\''); //it should work even if that field in the database is empty
    if(eventNext != NULL)
        eventNew->next = eventNext;
    else
        eventNew->next = NULL;
    strncpy(eventNew->event, startOfParam + 1, endOfParam - startOfParam - 1);
} 
```

我认为问题与 setATuple 函数有关，但我不知道出了什么问题。

由于它是一个特定的文件相关程序，我将复制它应该处理的文件。这里是：

```
-- MySQL dump 10.13  Distrib 5.5.24, for debian-linux-gnu (i686)
--
-- Host: localhost    Database: tesi
-- ------------------------------------------------------
-- Server version   5.5.24-0ubuntu0.12.04.1

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

--
-- Table structure for table `log`
--

DROP TABLE IF EXISTS `log`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `log` (
  `eid` int(11) NOT NULL AUTO_INCREMENT,
  `system` int(11) NOT NULL,
  `host` varchar(15) NOT NULL,
  `entity` int(30) NOT NULL,
  `key` varchar(40) NOT NULL,
  `event` varchar(5) NOT NULL,
  `timestamp` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`eid`),
  KEY `event` (`event`),
  CONSTRAINT `log_ibfk_1` FOREIGN KEY (`event`) REFERENCES `events` (`name`)
) ENGINE=InnoDB AUTO_INCREMENT=238 DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `log`
--

LOCK TABLES `log` WRITE;
/*!40000 ALTER TABLE `log` DISABLE KEYS */;
INSERT INTO `log` VALUES (1,1,'127.000.000.001',0,'10','CMP','2012-10-09 15:13:37'),(2,1,'127.000.000.001',0,'19','CMP','2012-10-09 15:13:37'),(3,1,'127.000.000.001',0,'38','CMP','2012-10-09 15:13:37'),(4,1,'127.000.000.001',0,'77','CMP','2012-10-09 15:13:37'),(5,1,'127.000.000.001',0,'108','CMP','2012-10-09 15:13:37'),(6,1,'127.000.000.001',0,'119','CMP','2012-10-09 15:13:37'),(7,1,'127.000.000.001',0,'149','CMP','2012-10-09 15:13:37'),(8,1,'127.000.000.001',0,'154','CMP','2012-10-09 15:13:38'),(9,1,'127.000.000.001',1,'34','CMP','2012-10-09 15:13:38'),(10,1,'127.000.000.001',1,'143','CMP','2012-10-09 15:13:38'),(11,1,'127.000.000.001',2,'10','CMP','2012-10-09 15:13:38'),(12,1,'127.000.000.001',2,'30','CMP','2012-10-09 15:13:38'),(13,1,'127.000.000.001',2,'87','CMP','2012-10-09 15:13:38'),(14,1,'127.000.000.001',2,'102','CMP','2012-10-09 15:13:39'),(15,1,'127.000.000.001',2,'125','CMP','2012-10-09 15:13:39'),(16,1,'127.000.000.001',2,'161','CMP','2012-10-09 15:13:39'),(17,1,'127.000.000.001',2,'163','CMP','2012-10-09 15:13:39'),(18,1,'127.000.000.001',2,'181','CMP','2012-10-09 15:13:39'),(19,1,'127.000.000.001',2,'182','CMP','2012-10-09 15:13:39'),(20,1,'127.000.000.001',2,'183','CMP','2012-10-09 15:13:39'),(21,1,'127.000.000.001',3,'0','CMP','2012-10-09 15:13:39'),(22,1,'127.000.000.001',3,'40','CMP','2012-10-09 15:13:39'),(23,1,'127.000.000.001',3,'43','CMP','2012-10-09 15:13:39'),(24,1,'127.000.000.001',3,'101','CMP','2012-10-09 15:13:39'),(25,1,'127.000.000.001',3,'126','CMP','2012-10-09 15:13:40'),(26,1,'127.000.000.001',3,'190','CMP','2012-10-09 15:13:40'),(27,1,'127.000.000.001',4,'21','CMP','2012-10-09 15:13:40'),(28,1,'127.000.000.001',4,'22','CMP','2012-10-09 15:13:40'),(29,1,'127.000.000.001',4,'75','CMP','2012-10-09 15:13:40'),(30,1,'127.000.000.001',4,'88','CMP','2012-10-09 15:13:40'),(31,1,'127.000.000.001',4,'110','CMP','2012-10-09 15:13:40'),(32,1,'127.000.000.001',4,'182','CMP','2012-10-09 15:13:40'),(33,1,'127.000.000.001',5,'66','CMP','2012-10-09 15:13:40'),(34,1,'127.000.000.001',5,'90','CMP','2012-10-09 15:13:41'),(35,1,'127.000.000.001',5,'193','CMP','2012-10-09 15:13:41'),(36,1,'127.000.000.001',6,'57','CMP','2012-10-09 15:13:41'),(37,1,'127.000.000.001',6,'67','CMP','2012-10-09 15:13:41'),(38,1,'127.000.000.001',6,'71','CMP','2012-10-09 15:13:41'),(39,1,'127.000.000.001',6,'73','SER','2012-10-09 15:13:41'),(40,1,'127.000.000.001',6,'90','CMP','2012-10-09 15:13:41'),(41,1,'127.000.000.001',6,'91','CMP','2012-10-09 15:13:41'),(42,1,'127.000.000.001',6,'112','CMP','2012-10-09 15:13:41'),(43,1,'127.000.000.001',6,'126','CMP','2012-10-09 15:13:41'),(44,1,'127.000.000.001',6,'173','CMP','2012-10-09 15:13:41'),(45,1,'127.000.000.001',7,'20','CMP','2012-10-09 15:13:41'),(46,1,'127.000.000.001',7,'22','CMP','2012-10-09 15:13:42'),(47,1,'127.000.000.001',7,'33','CMP','2012-10-09 15:13:42'),(48,1,'127.000.000.001',7,'73','CMP','2012-10-09 15:13:42'),(49,1,'127.000.000.001',7,'97','CMP','2012-10-09 15:13:42'),(50,1,'127.000.000.001',7,'126','CMP','2012-10-09 15:13:42'),(51,1,'127.000.000.001',7,'127','CMP','2012-10-09 15:13:42'),(52,1,'127.000.000.001',7,'170','CMP','2012-10-09 15:13:42'),(53,1,'127.000.000.001',7,'189','CMP','2012-10-09 15:13:42'),(54,1,'127.000.000.001',8,'5','CMP','2012-10-09 15:13:42'),(55,1,'127.000.000.001',8,'80','CMP','2012-10-09 15:13:43'),(56,1,'127.000.000.001',8,'90','CMP','2012-10-09 15:13:43'),(57,1,'127.000.000.001',8,'102','CMP','2012-10-09 15:13:43'),(58,1,'127.000.000.001',8,'158','CMP','2012-10-09 15:13:43'),(59,1,'127.000.000.001',8,'185','CMP','2012-10-09 15:13:43'),(60,1,'127.000.000.001',9,'22','CMP','2012-10-09 15:13:43'),(61,1,'127.000.000.001',9,'34','CMP','2012-10-09 15:13:43'),(62,1,'127.000.000.001',9,'50','CMP','2012-10-09 15:13:43'),(63,1,'127.000.000.001',9,'51','CMP','2012-10-09 15:13:43'),(64,1,'127.000.000.001',9,'89','CMP','2012-10-09 15:13:43'),(65,1,'127.000.000.001',9,'110','CMP','2012-10-09 15:13:43'),(66,1,'127.000.000.001',9,'137','CMP','2012-10-09 15:13:43'),(67,1,'127.000.000.001',9,'141','CMP','2012-10-09 15:13:44'),(68,1,'127.000.000.001',9,'186','CMP','2012-10-09 15:13:44'),(69,1,'127.000.000.001',9,'194','CMP','2012-10-09 15:13:44'),(70,1,'127.000.000.001',10,'23','CMP','2012-10-09 15:13:44'),(71,1,'127.000.000.001',10,'42','CMP','2012-10-09 15:13:44'),(72,1,'127.000.000.001',10,'51','CMP','2012-10-09 15:13:44'),(73,1,'127.000.000.001',10,'52','CMP','2012-10-09 15:13:44'),(74,1,'127.000.000.001',11,'44','CMP','2012-10-09 15:13:44'),(75,1,'127.000.000.001',11,'57','CMP','2012-10-09 15:13:44'),(76,1,'127.000.000.001',11,'123','CMP','2012-10-09 15:13:45'),(77,1,'127.000.000.001',11,'125','CMP','2012-10-09 15:13:45'),(78,1,'127.000.000.001',11,'145','CMP','2012-10-09 15:13:45'),(79,1,'127.000.000.001',12,'6','CMP','2012-10-09 15:13:45'),(80,1,'127.000.000.001',12,'26','CMP','2012-10-09 15:13:45'),(81,1,'127.000.000.001',12,'28','CMP','2012-10-09 15:13:45'),(82,1,'127.000.000.001',12,'61','CMP','2012-10-09 15:13:45'),(83,1,'127.000.000.001',12,'117','CMP','2012-10-09 15:13:45'),(84,1,'127.000.000.001',12,'134','CMP','2012-10-09 15:13:45'),(85,1,'127.000.000.001',12,'139','CMP','2012-10-09 15:13:45'),(86,1,'127.000.000.001',12,'158','CMP','2012-10-09 15:13:45'),(87,1,'127.000.000.001',12,'186','CMP','2012-10-09 15:13:45'),(88,1,'127.000.000.001',12,'189','CMP','2012-10-09 15:13:45'),(89,1,'127.000.000.001',12,'191','CMP','2012-10-09 15:13:46'),(90,1,'127.000.000.001',12,'193','CMP','2012-10-09 15:13:46'),(91,1,'127.000.000.001',13,'31','CMP','2012-10-09 15:13:46'),(92,1,'127.000.000.001',13,'93','CMP','2012-10-09 15:13:46'),(93,1,'127.000.000.001',13,'109','CMP','2012-10-09 15:13:46'),(94,1,'127.000.000.001',13,'149','CMP','2012-10-09 15:13:46'),(95,1,'127.000.000.001',14,'5','CMP','2012-10-09 15:13:46'),(96,1,'127.000.000.001',14,'24','CMP','2012-10-09 15:13:46'),(97,1,'127.000.000.001',14,'128','CMP','2012-10-09 15:13:47'),(98,1,'127.000.000.001',14,'142','CMP','2012-10-09 15:13:47'),(99,1,'127.000.000.001',14,'161','CMP','2012-10-09 15:13:47'),(100,1,'127.000.000.001',15,'17','CMP','2012-10-09 15:13:47'),(101,1,'127.000.000.001',15,'19','CMP','2012-10-09 15:13:47'),(102,1,'127.000.000.001',15,'27','CMP','2012-10-09 15:13:47'),(103,1,'127.000.000.001',15,'71','CMP','2012-10-09 15:13:47'),(104,1,'127.000.000.001',15,'74','CMP','2012-10-09 15:13:47'),(105,1,'127.000.000.001',15,'104','CMP','2012-10-09 15:13:47'),(106,1,'127.000.000.001',15,'126','CMP','2012-10-09 15:13:48'),(107,1,'127.000.000.001',15,'143','CMP','2012-10-09 15:13:48'),(108,1,'127.000.000.001',15,'155','CMP','2012-10-09 15:13:48'),(109,1,'127.000.000.001',15,'185','CMP','2012-10-09 15:13:48'),(110,1,'127.000.000.001',16,'69','CMP','2012-10-09 15:13:48'),(111,1,'127.000.000.001',16,'103','CMP','2012-10-09 15:13:48'),(112,1,'127.000.000.001',16,'139','CMP','2012-10-09 15:13:48'),(113,1,'127.000.000.001',16,'169','CMP','2012-10-09 15:13:48'),(114,1,'127.000.000.001',17,'51','CMP','2012-10-09 15:13:48'),(115,1,'127.000.000.001',17,'67','CMP','2012-10-09 15:13:49'),(116,1,'127.000.000.001',17,'138','CMP','2012-10-09 15:13:49'),(117,1,'127.000.000.001',17,'162','CMP','2012-10-09 15:13:49'),(118,1,'127.000.000.001',17,'173','CMP','2012-10-09 15:13:49'),(119,1,'127.000.000.001',17,'185','CMP','2012-10-09 15:13:49'),(120,1,'127.000.000.001',18,'17','CMP','2012-10-09 15:13:49'),(121,1,'127.000.000.001',18,'57','CMP','2012-10-09 15:13:49'),(122,1,'127.000.000.001',18,'107','CMP','2012-10-09 15:13:49'),(123,1,'127.000.000.001',18,'163','CMP','2012-10-09 15:13:50'),(124,1,'127.000.000.001',18,'193','CMP','2012-10-09 15:13:50'),(125,1,'127.000.000.001',19,'3','CMP','2012-10-09 15:13:50'),(126,1,'127.000.000.001',19,'11','CMP','2012-10-09 15:13:50'),(127,1,'127.000.000.001',19,'36','CMP','2012-10-09 15:13:50'),(128,1,'127.000.000.001',19,'109','CMP','2012-10-09 15:13:50'),(129,1,'127.000.000.001',19,'126','CMP','2012-10-09 15:13:50'),(130,1,'127.000.000.001',19,'194','CMP','2012-10-09 15:13:50'),(131,1,'127.000.000.001',19,'196','CMP','2012-10-09 15:13:50'),(132,1,'127.000.000.001',0,'19','IER','2012-10-09 15:13:55'),(133,1,'127.000.000.001',0,'20','SER','2012-10-09 15:13:55'),(134,1,'127.000.000.001',0,'174','SER','2012-10-09 15:13:55'),(135,1,'127.000.000.001',0,'199','IER','2012-10-09 15:13:55'),(136,1,'127.000.000.001',1,'140','SER','2012-10-09 15:13:55'),(137,1,'127.000.000.001',1,'147','SER','2012-10-09 15:13:56'),(138,1,'127.000.000.001',1,'164','IER','2012-10-09 15:13:56'),(139,1,'127.000.000.001',1,'167','IER','2012-10-09 15:13:56'),(140,1,'127.000.000.001',1,'183','IER','2012-10-09 15:13:56'),(141,1,'127.000.000.001',2,'29','IER','2012-10-09 15:13:56'),(142,1,'127.000.000.001',2,'33','IER','2012-10-09 15:13:56'),(143,1,'127.000.000.001',2,'129','IER','2012-10-09 15:13:56'),(144,1,'127.000.000.001',2,'155','SER','2012-10-09 15:13:56'),(145,1,'127.000.000.001',2,'180','IER','2012-10-09 15:13:56'),(146,1,'127.000.000.001',3,'8','SER','2012-10-09 15:13:57'),(147,1,'127.000.000.001',3,'25','SER','2012-10-09 15:13:57'),(148,1,'127.000.000.001',3,'33','SER','2012-10-09 15:13:57'),(149,1,'127.000.000.001',3,'109','SER','2012-10-09 15:13:57'),(150,1,'127.000.000.001',3,'144','IER','2012-10-09 15:13:57'),(151,1,'127.000.000.001',4,'13','SER','2012-10-09 15:13:57'),(152,1,'127.000.000.001',4,'56','SER','2012-10-09 15:13:57'),(153,1,'127.000.000.001',4,'94','SER','2012-10-09 15:13:58'),(154,1,'127.000.000.001',4,'125','IER','2012-10-09 15:13:58'),(155,1,'127.000.000.001',4,'171','SER','2012-10-09 15:13:58'),(156,1,'127.000.000.001',4,'199','SER','2012-10-09 15:13:58'),(157,1,'127.000.000.001',5,'4','IER','2012-10-09 15:13:58'),(158,1,'127.000.000.001',5,'93','SER','2012-10-09 15:13:58'),(159,1,'127.000.000.001',5,'94','SER','2012-10-09 15:13:58'),(160,1,'127.000.000.001',6,'8','IER','2012-10-09 15:13:58'),(161,1,'127.000.000.001',6,'103','IER','2012-10-09 15:13:59'),(162,1,'127.000.000.001',6,'107','SER','2012-10-09 15:13:59'),(163,1,'127.000.000.001',6,'154','IER','2012-10-09 15:13:59'),(164,1,'127.000.000.001',6,'167','SER','2012-10-09 15:13:59'),(165,1,'127.000.000.001',7,'14','SER','2012-10-09 15:13:59'),(166,1,'127.000.000.001',7,'42','SER','2012-10-09 15:13:59'),(167,1,'127.000.000.001',7,'109','IER','2012-10-09 15:13:59'),(168,1,'127.000.000.001',7,'115','SER','2012-10-09 15:13:59'),(169,1,'127.000.000.001',7,'132','IER','2012-10-09 15:14:00'),(170,1,'127.000.000.001',7,'148','IER','2012-10-09 15:14:00'),(171,1,'127.000.000.001',7,'162','IER','2012-10-09 15:14:00'),(172,1,'127.000.000.001',8,'13','IER','2012-10-09 15:14:00'),(173,1,'127.000.000.001',8,'33','SER','2012-10-09 15:14:00'),(174,1,'127.000.000.001',8,'57','IER','2012-10-09 15:14:00'),(175,1,'127.000.000.001',8,'65','IER','2012-10-09 15:14:00'),(176,1,'127.000.000.001',8,'84','SER','2012-10-09 15:14:00'),(177,1,'127.000.000.001',8,'90','IER','2012-10-09 15:14:00'),(178,1,'127.000.000.001',9,'9','IER','2012-10-09 15:14:01'),(179,1,'127.000.000.001',9,'78','IER','2012-10-09 15:14:01'),(180,1,'127.000.000.001',9,'92','SER','2012-10-09 15:14:01'),(181,1,'127.000.000.001',9,'114','SER','2012-10-09 15:14:01'),(182,1,'127.000.000.001',10,'54','SER','2012-10-09 15:14:01'),(183,1,'127.000.000.001',10,'79','SER','2012-10-09 15:14:01'),(184,1,'127.000.000.001',10,'86','SER','2012-10-09 15:14:01'),(185,1,'127.000.000.001',10,'91','SER','2012-10-09 15:14:01'),(186,1,'127.000.000.001',10,'97','SER','2012-10-09 15:14:01'),(187,1,'127.000.000.001',10,'158','SER','2012-10-09 15:14:02'),(188,1,'127.000.000.001',11,'56','IER','2012-10-09 15:14:02'),(189,1,'127.000.000.001',11,'132','SER','2012-10-09 15:14:02'),(190,1,'127.000.000.001',11,'136','IER','2012-10-09 15:14:02'),(191,1,'127.000.000.001',11,'163','SER','2012-10-09 15:14:02'),(192,1,'127.000.000.001',11,'165','IER','2012-10-09 15:14:02'),(193,1,'127.000.000.001',12,'55','IER','2012-10-09 15:14:02'),(194,1,'127.000.000.001',12,'137','SER','2012-10-09 15:14:02'),(195,1,'127.000.000.001',12,'142','IER','2012-10-09 15:14:02'),(196,1,'127.000.000.001',12,'192','IER','2012-10-09 15:14:03'),(197,1,'127.000.000.001',13,'53','IER','2012-10-09 15:14:03'),(198,1,'127.000.000.001',13,'56','SER','2012-10-09 15:14:03'),(199,1,'127.000.000.001',13,'135','IER','2012-10-09 15:14:03'),(200,1,'127.000.000.001',13,'139','SER','2012-10-09 15:14:03'),(201,1,'127.000.000.001',13,'143','IER','2012-10-09 15:14:03'),(202,1,'127.000.000.001',13,'155','IER','2012-10-09 15:14:03'),(203,1,'127.000.000.001',13,'178','IER','2012-10-09 15:14:03'),(204,1,'127.000.000.001',13,'181','IER','2012-10-09 15:14:03'),(205,1,'127.000.000.001',13,'182','SER','2012-10-09 15:14:03'),(206,1,'127.000.000.001',14,'25','SER','2012-10-09 15:14:04'),(207,1,'127.000.000.001',14,'55','IER','2012-10-09 15:14:04'),(208,1,'127.000.000.001',14,'66','SER','2012-10-09 15:14:04'),(209,1,'127.000.000.001',14,'70','SER','2012-10-09 15:14:04'),(210,1,'127.000.000.001',14,'86','SER','2012-10-09 15:14:04'),(211,1,'127.000.000.001',14,'93','SER','2012-10-09 15:14:04'),(212,1,'127.000.000.001',14,'108','IER','2012-10-09 15:14:04'),(213,1,'127.000.000.001',14,'183','SER','2012-10-09 15:14:04'),(214,1,'127.000.000.001',15,'24','IER','2012-10-09 15:14:04'),(215,1,'127.000.000.001',15,'65','IER','2012-10-09 15:14:04'),(216,1,'127.000.000.001',15,'153','IER','2012-10-09 15:14:05'),(217,1,'127.000.000.001',15,'157','SER','2012-10-09 15:14:05'),(218,1,'127.000.000.001',16,'60','IER','2012-10-09 15:14:05'),(219,1,'127.000.000.001',16,'108','IER','2012-10-09 15:14:05'),(220,1,'127.000.000.001',16,'148','IER','2012-10-09 15:14:05'),(221,1,'127.000.000.001',16,'170','IER','2012-10-09 15:14:05'),(222,1,'127.000.000.001',16,'181','SER','2012-10-09 15:14:05'),(223,1,'127.000.000.001',17,'20','IER','2012-10-09 15:14:05'),(224,1,'127.000.000.001',17,'134','SER','2012-10-09 15:14:06'),(225,1,'127.000.000.001',17,'200','IER','2012-10-09 15:14:06'),(226,1,'127.000.000.001',18,'4','SER','2012-10-09 15:14:06'),(227,1,'127.000.000.001',18,'63','IER','2012-10-09 15:14:06'),(228,1,'127.000.000.001',18,'74','SER','2012-10-09 15:14:06'),(229,1,'127.000.000.001',18,'84','SER','2012-10-09 15:14:06'),(230,1,'127.000.000.001',18,'88','IER','2012-10-09 15:14:06'),(231,1,'127.000.000.001',18,'94','SER','2012-10-09 15:14:06'),(232,1,'127.000.000.001',18,'108','IER','2012-10-09 15:14:06'),(233,1,'127.000.000.001',19,'24','SER','2012-10-09 15:14:07'),(234,1,'127.000.000.001',19,'88','SER','2012-10-09 15:14:07'),(235,1,'127.000.000.001',19,'137','IER','2012-10-09 15:14:07'),(236,1,'127.000.000.001',19,'142','SER','2012-10-09 15:14:07'),(237,1,'127.000.000.001',19,'187','SER','2012-10-09 15:14:07');
/*!40000 ALTER TABLE `log` ENABLE KEYS */; 
```

一旦到达第二个元组，它就会“死亡”。对不起我的英语不好，我来自意大利。感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T20:34:47.450

我无法调试您的代码；:-(，但是我重写了这段代码，看看你是否可以使用它：

```
#include <stdlib.h>
#include <stdio.h>
#include <stdbool.h>
#include <string.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <errno.h>

/*
 * Apparently only interested in 4,5 & 6th comma separated values
 * strtok_r() should be preferred over strtok(); Windows MINGW doesn't have it
 */
int process_record(char *recordPtr/* and , your DataStructure Ptr if necessary */)
{
    unsigned count;
    char* fieldPtr = NULL;

    fprintf(stderr, "\nFields :");
    for (count = 1; NULL != (fieldPtr = strtok_r(NULL, ",", &recordPtr)); count++)
    {

        if (count > 3 && count < 7)
        {// required fields range

            /*TODO Trim unwanted characters */

            switch (count)
            {

            case 4: // copy to relevant DS
                break;
            case 5: // copy to relevant DS
                break;
            case 6: // copy to relevant DS
                break;
            }

            fprintf(stderr, "\t %s", fieldPtr);
        }

    }

    return 0;
}

int main(int argc, char* argv[])
{
    int status;
    unsigned count;
    unsigned readBytes = 0;
    struct stat fStat;
    unsigned fileSize ;
     FILE* hFile;
    char*   fileData = NULL;
    char* dataPtr =NULL;
    char* recordPtr = NULL;

    fprintf (stderr, "\n");
    if (argc != 2)
    {
        fprintf(stderr, "\nERROR: Only <filename> required");
        return -1;
    }

    /*
     * Get the file size for Memory Load
     */
    status = stat(argv[1], &fStat);
    if (status < 0) {
        fprintf(stderr, "\nERROR: Line[%d] ErroNo[%d]", __LINE__, errno);
        return -2;
    }

    fileSize = fStat.st_size;
    fprintf (stderr, "\nDump File size[%u]", fileSize);

    /*
     * Allocate sufficient memory to load file data on to memory
     */
    fileData = (char*) malloc (sizeof(char) * fileSize);
    if (NULL == fileData) {
        fprintf(stderr, "\nERROR: Allocating memory");
        return -3;
    }

    /* Open file and read data on to memory
     */
    hFile = fopen( argv[1], "r");        //opening the file in "read-only" mode
    if (hFile == NULL)
    {
        fprintf(stderr, "ERROR: Opening file[%s] ErroNo[%d]\n", argv[1], errno);
        return -4;     //error opening the file
    }
    /* assuming file will be read within 3 attempts */
    for (status =0; fileSize != readBytes && status < 3; status ++) {
        readBytes += fread (fileData + readBytes, 1, fileSize - readBytes, hFile);
        fprintf (stderr, "\nData read Size [%u]", readBytes);
    }

    fclose (hFile);
    //fprintf (stderr, "\nNOTE: Data read[\n%s\n]", fileData);

    /*
     * Chunk it into manageable records
     */
    dataPtr = strstr (fileData, "VALUES (") + strlen ("VALUES ("); //handle error checks

    for(count =1; NULL != (recordPtr = strtok_r(NULL, "()", &dataPtr)); count ++) {

        if (strlen(recordPtr) > 1) { // NOTE: "," between each record will be tokenised
            //fprintf (stderr, "\nRecord[%d] : [%s]", count, recordPtr);

            /*  Process Record
             */
            process_record (recordPtr /* and , your DataStructure Ptr if necessary */);
        }
    }

    free (fileData);
    return 0;
} 
```

# javascript - 用类似但经过修改的用户脚本函数替换页面函数

> ID：12824554
> 
> 赞同：0
> 
> 时间：2012-10-10T16:58:01.363
> 
> 标签：javascript, userscripts

我正在为一个游戏创建一个用户脚本，它将实时修改页面的某些部分，以帮助用户知道他们必须等待多长时间才能执行某些操作。

我遇到的问题是游戏已经内置了一些 AJAX，它每三秒调用一次`jQuery.getJSON()`函数来获取信息以更新内容。我的脚本需要让最终用户看起来好像页面是实时更新的，而不是每 3 秒更新一次。以及添加额外的信息。无需添加额外的请求（游戏所有者不会喜欢这样）。

为此，我需要覆盖页面的默认行为，我需要更改调用的回调函数`jQuery.getJSON()`以添加我的功能。或者至少完全禁用它，这样我就可以写一个新的了。而且它不像为旧名称分配一个新函数那么容易，因为它没有名称，他们只是在`jQuery.getJSON()`调用中构建函数。这可能吗？

顺便说一句，页面脚本包含在单独的 .js 文件中，如果这有什么不同的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T17:16:18.303

如果 jQuery.getJSON() 调用被分配给一个变量，它将返回一个 jqXHR 对象，然后您可以通过添加或更改其回调来修改它。

如果它没有作为变量公开，而是像这样简单地调用

```
... js blah ...
jQuery.getJSON("myurl",function(){
    more blah
});
... more blah ... 
```

...那么我相信你在没有桨的情况下是一条小溪，因为这变成了一个没有句柄的匿名函数调用。在这一点上，唯一的方法是尝试通过在第一个脚本上加载另一个脚本来覆盖，但我真的不确定这会使浏览器环境有多稳定。

有关$.ajax() 系统如何工作的更多详细信息，请参阅[http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)和[http://api.jquery.com/Types/#jqXHR](http://api.jquery.com/Types/#jqXHR)的 jQuery 参考。

# javascript - 多条件语句javascript

> ID：12824555
> 
> 赞同：0
> 
> 时间：2012-10-10T16:58:09.533
> 
> 标签：javascript, if-statement, conditional-statements

我正在做一个储蓄计算器，我在 Javascript 中有以下多条件，当我把它放在 Dreamweaver 中时，我得到一个语法错误，但真的不明白错误在哪里。

**这是代码：**

```
if (p<20000 && nnn=1) {
    document.kombpred.r2.value = mmm * nnn * bbb * 0.1;
}
else if (p>=20000 && nnn = 1) {
    document.kombpred.r2.value = 2000;
}
else if (p>=20000 && nnn > 1) {
    document.kombpred.r2.value = mmm * Math.pow(nnn,2) * bbb * 0.1;
}
else if (p<20000) {
    document.kombpred.r2.value = mmm * nnn * bbb * 0.1;
} 
```

这只是`if`语句，我什至还有其他`if`语句，但没有多个条件并且代码是正确的，但是一旦我插入它，就会发生一些不好的事情。

的话：`mmm`; `nnn`; `bbb`; 都是`parseFloat()`数字，例如：`var mmm = parseFloat(m)`.

我也宣布了所有这些。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T17:00:25.090

错误说明了什么？我的控制台说：无效的左侧分配。当它们`nnn=1`应该是`nnn == 1`.

# assembly - 如何在 MASM 中使用 ADD 指令？

> ID：12824562
> 
> 赞同：2
> 
> 时间：2012-10-10T16:58:18.623
> 
> 标签：assembly, x86, masm

这是我的代码片段：

```
 .data
Num1    equ     40h
Num2    equ     41h
Var1    dword   0
Var2    dword   0
;----------------------------------------------------------------------
    align   4
    .code       ;insert executable instructions below
main    PROC        ;program execution begins here
    mov Var1, Num1
    mov Var2, Num2

    add Var1, Var2 
```

我正在尝试使用 ADD 指令，但出现以下错误：

```
error A2070: invalid instruction operands 
```

此错误与 ADD 行有关。如果我省略该行，程序运行良好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T17:09:04.740

您不能将两个内存位置相互添加，您应该使用其中一个寄存器作为第二个操作数

```
 .data
Num1    equ     40h
Num2    equ     41h
;----------------------------------------------------------------------
    align   4
    .code       ;insert executable instructions below
    main    PROC        ;program execution begins here

    mov ax, Num2

    add ax, Num1 
```

# html - 在 ASP.NET MVC 网站中使用引导导航栏

> ID：12824563
> 
> 赞同：0
> 
> 时间：2012-10-10T16:58:20.880
> 
> 标签：html, asp.net-mvc-3, twitter-bootstrap, navbar

我想在我的新 ASP.Net MVC 项目中使用 Bootstrap，你知道 Navbar 的结构是这样的：

```
<div class="navbar">
  <div class="navbar-inner">
    <a class="brand" href="#">Title</a>
    <ul class="nav">
      <li class="active"><a href="#">Home</a></li>
      <li><a href="#">Link</a></li>
      <li><a href="#">Link</a></li>
    </ul>
  </div>
</div> 
```

如您所见，活动的 Url 具有**活动**的类。我想知道如何感知活动 url 并获得活动类？

我将 MVC 3 与 Razor 一起使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T10:42:42.183

我假设您的意思是要设置活动项目？（当你说'让它活跃起来'）

请参阅其他几乎相同[问题](https://stackoverflow.com/questions/12354935/twitter-bootstrap-asp-net-masterpages-how-to-set-navbar-item-as-active-when-u)的答案，它可以完成工作（尽管不是最优化的代码）。

```
<script type="text/javascript">
    $(document).ready(function () {
        var url = window.location.pathname;
        var substr = url.split('/');
        var urlaspx = substr[substr.length-1];
        $('.nav').find('.active').removeClass('active');
        $('.nav li a').each(function () {
            if (this.href.indexOf(urlaspx) >= 0) {
                $(this).parent().addClass('active');
            }
        });
    });
</script> 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-12-22T01:33:03.587

您可以使用 JQuery 来执行此操作：

```
$(document).ready(function(){ 
  alert( $('.nav').children('.active').html() );
} 
```

# r - RSQLite 类型转换问题

> ID：12824569
> 
> 赞同：1
> 
> 时间：2012-10-10T16:58:34.640
> 
> 标签：r, sqlite

我正在尝试将 SQLite 数据库中的表写入 R 数据框中，并遇到了一个让我难过的问题。这是我要导入的 SQLite 表中的前三个条目：

```
1|10|0|0|0|0|10|10|0|0|0|6|8|6|20000|30000|2012-02-29 21:27:07.239091|2012-02-29 21:28:24.815385|6|80.67.28.161|||||||||||||||||||||||||||||||33|13.4936||t|t|f||||||||||||||||||4|0|0|7|7|2
2|10|0|0|0|0|0|0|0|2|2|4|5|4|20000|30000|2012-02-29 22:00:30.618726|2012-02-29 22:04:09.629942|5|80.67.28.161|3|7||0|1|3|0|||4|3|4|5|5|5|5|4|5|4|4|0|0|0|0|0|9|9|9|9|9|||1|f|t|f|||||||||||||k|text|l|||-13|0|3|10||2
3|13|2|4|4|4|4|1|1|2|5|6|3|2|40000|10000|2012-03-01 09:07:52.310033|2012-03-01 09:21:13.097303|6|80.67.28.161|2|2||30|1|1|0|||4|2|1|6|8|3|5|6|6|7|6|||||||||||26|13.6336|4|f|t|f|t|f|f|f|f|||||||||some text||||10|1|1|3|2|3 
```

我感兴趣的是第 53 到 60 列，为了省去您在上面计算的麻烦，它看起来像这样：

```
|t|t|f||||||
|f|t|f||||||
|f|t|f|t|f|f|f|f| 
```

正如您所看到的，对于前两个条目，只有前三个列不是 NULL，而对于第三个条目，所有八列都有分配给它们的值。

这是这些列的 SQLite 表信息

```
sqlite> PRAGMA table_info(observations);
0|id|INTEGER|1||1
** snip **
53|understanding1|boolean|0||0
54|understanding2|boolean|0||0
55|understanding3|boolean|0||0
56|understanding4|boolean|0||0
57|understanding5|boolean|0||0
58|understanding6|boolean|0||0
59|understanding7|boolean|0||0
60|understanding8|boolean|0||0
** snip ** 
```

现在，当我尝试将其读入 R 时，这些相同的列最终会变成：

```
> library('RSQLite')
> con <- dbConnect("SQLite", dbname = 'db.sqlite3))
> obs <- dbReadTable(con,'observations')
> obs[1:3,names(obs) %in% paste0('understanding',1:8)]
  understanding1 understanding2 understanding3 understanding4 understanding5 understanding6 understanding7
1              t              t              f             NA             NA             NA             NA
2              f              t              f             NA             NA             NA             NA
3              f              t              f              0              0              0              0
  understanding8
1             NA
2             NA
3              0 
```

如您所见，虽然前三列包含的值要么是，要么`'t'`其他`'f'`列是`NA`SQLite 表中的对应值是 NULL 并且*`0`*它们不是 - 无论 SQLite 表中的对应值是`t`还是`f`。不用说，这不是我所期望的行为。我认为问题是这些列的类型转换不正确：

```
> sapply(obs[1:3,names(obs) %in% paste0('understanding',1:8)], class)
understanding1 understanding2 understanding3 understanding4 understanding5 understanding6 understanding7 
   "character"    "character"    "character"      "numeric"      "numeric"      "numeric"      "numeric" 
understanding8 
     "numeric" 
```

会不会是 RSQLite`character`在看到时将前三列设置为类型，`t`并将其设置为第`f`一个条目中相应列中的值，但是`numeric`因为在这些列中，第一个条目恰好是 NULL，所以会这样吗？

如果这确实是正在发生的事情，是否有任何方法可以解决这个问题并将所有这些列转换为`character`（或者，甚至更好`logical`）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T01:13:33.860

以下是hacky，但它有效：

```
# first make a copy of the DB and work with it instead of changing
# data in the original
original_file <- "db.sqlite3"
copy_file <- "db_copy.sqlite3"
file.copy(original_file, copy_file) # duplicate the file
con <- dbConnect("SQLite", dbname = copy_file) # establish a connection to the copied DB

# put together a query to replace all NULLs by 'NA' and run it
columns <- c(paste0('understanding',1:15))
columns_query <- paste(paste0(columns,' = IfNull(',columns,",'NA')"),collapse=",")
query <- paste0("UPDATE observations SET ",columns_query)
dbSendQuery(con, query)

# Now that all columns have string values RSQLite will infer the 
# column type to be `character`
df <- dbReadTable(con,'observations') # read the table
file.remove(copy_file) # delete the copy

# replace all 'NA' strings with proper NAs
df[names(df) %in% paste0('understanding',1:15)][df[names(df) %in% paste0('understanding',1:15)] == 'NA'] <- NA
# convert 't' to boolean TRUE and 'f' to boolean FALSE
df[ ,names(df) %in% paste0('understanding',1:15)] <- sapply( df[ ,names(df) %in% paste0('understanding',1:15)], function(x) {x=="t"} ) 
```

# c# - 在 C# 中确定存储介质的类型

> ID：12824571
> 
> 赞同：2
> 
> 时间：2012-10-10T16:58:41.393
> 
> 标签：c#, windows-7, sd-card, usb-drive

> **可能重复：**
> [C# 中的 GetDriveType？或找出我的驱动器是否可移动？](https://stackoverflow.com/questions/623254/getdrivetype-in-c-or-find-out-if-my-drive-is-removable)

我想知道插入的存储介质是闪存卡还是 U 盘。Windows 7 知道这一点，因为它为磁盘显示了漂亮的图标。C# 如何访问这些信息？

[![驱动图像](../Images/d38b01b1a414177562725186f6cdef93.png)](http://www.flickr.com/photos/seabhcan/8074417045/ "DriveImages by seabhcan，在 Flickr 上")

我查看了 ManagementObjectSearcher、ManagementEventWatcher("SELECT * FROM Win32_VolumeChangeEvent") 和 DriveInfo，但据我所知，这些都没有提供此类信息。

# html - Internet Explorer 中未显示段落

> ID：12824574
> 
> 赞同：0
> 
> 时间：2012-10-10T16:58:44.937
> 
> 标签：html, css, internet-explorer

在我的[网站上](http://photography.soton.ac.uk)，缩略图上方的标题不会显示在任何版本的 IE 中。像往常一样，在其他所有现代浏览器中一切正常。

缩略图的 html 是

```
 <div id="s1" class="stumb">
    <p><a href="emily_cotton.html">Emily Cotton</a></p>
    <a href="emily_cotton.html"><img alt="Emily Cotton" src="img/thumbs/ect.jpg"></a>
    </div> 
```

CSS是

```
p
{
    margin:-20px 0px 0px 0px;
    font: 11px OpenSansRegular, Arial ;
    background: rgb(235,235,235);
    text-align: left;
    padding:0px 2px 0px 2px;
} 
```

和

```
.stumb

{
    margin:-20px 0px 0px 0px;
    font: 11px OpenSansRegular, Arial ;
    background: rgb(235,235,235);
    text-align: left;
    padding:0px 2px 0px 2px;
} 
```

我尝试了替代 css，删除了负边距，但这没有用。此外，IE 无论如何都应该能够处理这些负值。我正处于一个让所有替代版本四处飘荡的时刻，所有这些版本仍然没有在 IE 中显示。我的结论是，解决方案必须如此简单，以至于我也很盲目。

# sql - 如何使用 T-SQL 在数据库中的所有文本字段中搜索某些子字符串

> ID：12824577
> 
> 赞同：16
> 
> 时间：2012-10-10T16:58:47.077
> 
> 标签：sql, sql-server, tsql, dynamic-sql

我有一个庞大的架构，有数百个表和数千个列。我知道一个特定的 IP 地址存储在这个数据库中的几个地方，但我不确定它存储在哪个表或列中。基本上，我试图在任何地方找到这个IP 地址存储在数据库中，因此我可以在所有这些地方将其更新为新值。

这是我对 T-SQL 语句的第一次破解，用于打印数据库中每个包含子字符串 10.15.13 的文本列的表和列名以及值。

现在，这行得通。问题是，当我在 Management Studio 中执行它时，对 sp_executesql 的调用实际上会从每个不返回任何内容的查询中返回所有空结果（即该列没有包含该子字符串的任何记录），并且它会填充结果窗口达到最大值，然后我实际上并没有看到是否打印了任何内容。

有没有更好的方法来编写这个查询？或者我可以以某种不同的方式运行它，以便它只向我显示该子字符串存在的表和列？

```
DECLARE
    @SchemaName VARCHAR(50),
    @TableName VARCHAR(50),
    @ColumnName VARCHAR(50);
BEGIN
    DECLARE textColumns CURSOR FOR
    SELECT s.Name, tab.Name, c.Name
    FROM Sys.Columns c, Sys.Types t, Sys.Tables tab, Sys.Schemas s
    WHERE s.schema_id = tab.schema_id AND tab.object_id = c.object_id AND c.user_type_id = t.user_type_id
    AND t.Name in ('TEXT','NTEXT','VARCHAR','CHAR','NVARCHAR','NCHAR');

    OPEN textColumns

    FETCH NEXT FROM textColumns
    INTO @SchemaName, @TableName, @ColumnName

    WHILE @@FETCH_STATUS = 0
    BEGIN
        DECLARE @sql NVARCHAR(MAX),
                @ParamDef NVARCHAR(MAX),
                @result NVARCHAR(MAX);              
        SET @sql = N'SELECT ' + @ColumnName + ' FROM ' + @SchemaName + '.' + @TableName + ' WHERE ' + @ColumnName + ' LIKE ''%10.15.13%''';
        SET @ParamDef = N'@resultOut NVARCHAR(MAX) OUTPUT';

        EXEC sp_executesql @sql, @ParamDef, @resultOut = @result OUTPUT;

        PRINT 'Column = ' + @TableName + '.' + @ColumnName + ', Value = ' + @result;
        FETCH NEXT FROM textColumns
        INTO @SchemaName, @TableName, @ColumnName       
    END
    CLOSE textColumns;
    DEALLOCATE textColumns;
END 
```

我希望看到类似这样的结果，它显示找到子字符串的表/列，以及该列中的完整值......

```
Column = SomeTable.SomeTextColumn, Value = 'https://10.15.13.210/foo'
Column = SomeTable.SomeOtherColumn, Value = '10.15.13.210' 
```

等等

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-10T17:24:52.680

你接近了。将您的与此示例进行比较：[Searching and find a string value in all columns in a SQL Server table](http://www.mssqltips.com/sqlservertip/1522/searching-and-finding-a-string-value-in-all-columns-in-a-sql-server-table/)

上面的链接用于搜索单个表，但是这里是另一个包含所有表的链接：[如何在数据库中搜索所有表的所有列以查找关键字？](http://vyaskn.tripod.com/search_all_columns_in_all_tables.htm)

编辑：以防万一链接变坏，这是该链接的解决方案...

```
CREATE PROC SearchAllTables
(
    @SearchStr nvarchar(100)
)
AS
BEGIN

    -- Copyright © 2002 Narayana Vyas Kondreddi. All rights reserved.
    -- Purpose: To search all columns of all tables for a given search string
    -- Written by: Narayana Vyas Kondreddi
    -- Site: http://vyaskn.tripod.com
    -- Tested on: SQL Server 7.0 and SQL Server 2000
    -- Date modified: 28th July 2002 22:50 GMT

    CREATE TABLE #Results (ColumnName nvarchar(370), ColumnValue nvarchar(3630))

    SET NOCOUNT ON

DECLARE @TableName nvarchar(256), @ColumnName nvarchar(128), @SearchStr2 nvarchar(110)
    SET  @TableName = ''
    SET @SearchStr2 = QUOTENAME('%' + @SearchStr + '%','''')

    WHILE @TableName IS NOT NULL
    BEGIN
        SET @ColumnName = ''
        SET @TableName = 
        (
            SELECT MIN(QUOTENAME(TABLE_SCHEMA) + '.' + QUOTENAME(TABLE_NAME))
            FROM    INFORMATION_SCHEMA.TABLES
            WHERE       TABLE_TYPE = 'BASE TABLE'
                AND QUOTENAME(TABLE_SCHEMA) + '.' + QUOTENAME(TABLE_NAME) > @TableName
                AND OBJECTPROPERTY(
                        OBJECT_ID(
                            QUOTENAME(TABLE_SCHEMA) + '.' + QUOTENAME(TABLE_NAME)
                             ), 'IsMSShipped'
                               ) = 0
        )

        WHILE (@TableName IS NOT NULL) AND (@ColumnName IS NOT NULL)
        BEGIN
            SET @ColumnName =
            (
                SELECT MIN(QUOTENAME(COLUMN_NAME))
                FROM    INFORMATION_SCHEMA.COLUMNS
                WHERE       TABLE_SCHEMA    = PARSENAME(@TableName, 2)
                    AND TABLE_NAME  = PARSENAME(@TableName, 1)
                    AND DATA_TYPE IN ('char', 'varchar', 'nchar', 'nvarchar')
                    AND QUOTENAME(COLUMN_NAME) > @ColumnName
            )

            IF @ColumnName IS NOT NULL
            BEGIN
                INSERT INTO #Results
                EXEC
                (
                    'SELECT ''' + @TableName + '.' + @ColumnName + ''', LEFT(' + @ColumnName + ', 3630) 
                    FROM ' + @TableName + ' (NOLOCK) ' +
                    ' WHERE ' + @ColumnName + ' LIKE ' + @SearchStr2
                )
            END
        END 
    END

    SELECT ColumnName, ColumnValue FROM #Results
END

EXEC SearchAllTables '<yourSubstringHere>' 
```

注意：正如代码片段中的注释所暗示的，它是使用旧版本的 SQL Server 进行测试的。这可能不适用于 SQL Server 2012。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-10-06T16:51:06.283

选择的答案很棒，但我发现重复使用它时结果是错误的，所以我添加了一些清理以使其可以重新运行并获得准确的结果：

```
IF EXISTS (SELECT * FROM sys.objects WHERE type = 'P' AND name = 'SearchAllTables')
    DROP PROC SearchAllTables
GO

CREATE PROC SearchAllTables
(
    @SearchStr nvarchar(100)
)
AS
BEGIN

    -- Copyright © 2002 Narayana Vyas Kondreddi. All rights reserved.
    -- Purpose: To search all columns of all tables for a given search string
    -- Written by: Narayana Vyas Kondreddi
    -- Slightly modified by: Natalie Ford, 6/10/15
    -- Site: http://vyaskn.tripod.com
    -- Tested on: SQL Server 7.0 and SQL Server 2000
    -- Date modified: 28th July 2002 22:50 GMT

    CREATE TABLE #Results (ColumnName nvarchar(370), ColumnValue nvarchar(3630))

    SET NOCOUNT ON

    TRUNCATE Table #Results

DECLARE @TableName nvarchar(256), @ColumnName nvarchar(128), @SearchStr2 nvarchar(110)
    SET  @TableName = ''
    SET @SearchStr2 = QUOTENAME('%' + @SearchStr + '%','''')

    WHILE @TableName IS NOT NULL
    BEGIN
        SET @ColumnName = ''
        SET @TableName = 
        (
            SELECT MIN(QUOTENAME(TABLE_SCHEMA) + '.' + QUOTENAME(TABLE_NAME))
            FROM    INFORMATION_SCHEMA.TABLES
            WHERE       TABLE_TYPE = 'BASE TABLE'
                AND QUOTENAME(TABLE_SCHEMA) + '.' + QUOTENAME(TABLE_NAME) > @TableName
                AND OBJECTPROPERTY(
                        OBJECT_ID(
                            QUOTENAME(TABLE_SCHEMA) + '.' + QUOTENAME(TABLE_NAME)
                             ), 'IsMSShipped'
                               ) = 0
        )

        WHILE (@TableName IS NOT NULL) AND (@ColumnName IS NOT NULL)
        BEGIN
            SET @ColumnName =
            (
                SELECT MIN(QUOTENAME(COLUMN_NAME))
                FROM    INFORMATION_SCHEMA.COLUMNS
                WHERE       TABLE_SCHEMA    = PARSENAME(@TableName, 2)
                    AND TABLE_NAME  = PARSENAME(@TableName, 1)
                    AND DATA_TYPE IN ('char', 'varchar', 'nchar', 'nvarchar')
                    AND QUOTENAME(COLUMN_NAME) > @ColumnName
            )

            IF @ColumnName IS NOT NULL
            BEGIN
                INSERT INTO #Results
                EXEC
                (
                    'SELECT ''' + @TableName + '.' + @ColumnName + ''', LEFT(' + @ColumnName + ', 3630) 
                    FROM ' + @TableName + ' (NOLOCK) ' +
                    ' WHERE ' + @ColumnName + ' LIKE ' + @SearchStr2
                )
            END
        END 
    END

    SELECT ColumnName, ColumnValue FROM #Results

    DROP TABLE #Results
END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-28T07:38:42.590

试试这个它不会给你限制超过32的错误

```
alter PROC SearchAllTables
(
    @SearchStr nvarchar(100)
)
AS
BEGIN

    CREATE TABLE #Results (ColumnName nvarchar(370), ColumnValue nvarchar(3630))

    SET NOCOUNT ON

    DECLARE @TableName nvarchar(256), @ColumnName nvarchar(128), @SearchStr2 nvarchar(110)
    SET  @TableName = ''
    SET @SearchStr2 = QUOTENAME('%' + @SearchStr + '%','''')

    WHILE @TableName IS NOT NULL
    BEGIN
        SET @ColumnName = ''
        SET @TableName = 
        (
            SELECT MIN(QUOTENAME(TABLE_SCHEMA) + '.' + QUOTENAME(TABLE_NAME))
            FROM    INFORMATION_SCHEMA.TABLES
            WHERE       TABLE_TYPE = 'BASE TABLE'
                AND QUOTENAME(TABLE_SCHEMA) + '.' + QUOTENAME(TABLE_NAME) > @TableName
                AND OBJECTPROPERTY(
                        OBJECT_ID(
                            QUOTENAME(TABLE_SCHEMA) + '.' + QUOTENAME(TABLE_NAME)
                             ), 'IsMSShipped'
                               ) = 0
        )

        WHILE (@TableName IS NOT NULL) AND (@ColumnName IS NOT NULL)
        BEGIN
            SET @ColumnName =
            (
                SELECT MIN(QUOTENAME(COLUMN_NAME))
                FROM    INFORMATION_SCHEMA.COLUMNS
                WHERE       TABLE_SCHEMA    = PARSENAME(@TableName, 2)
                    AND TABLE_NAME  = PARSENAME(@TableName, 1)
                    AND DATA_TYPE IN ('char', 'varchar', 'nchar', 'nvarchar')
                    AND QUOTENAME(COLUMN_NAME) > @ColumnName
            )

            IF @ColumnName IS NOT NULL
            BEGIN
                INSERT INTO #Results
                EXEC
                (
                    'SELECT ''' + @TableName + '.' + @ColumnName + ''', LEFT(' + @ColumnName + ', 3630) 
                    FROM ' + @TableName + ' (NOLOCK) ' +
                    ' WHERE ' + @ColumnName + ' LIKE ' + @SearchStr2
                )
            END
        END 
    END

    SELECT ColumnName, ColumnValue FROM #Results
END 
```

希望能帮助到你

# java - 显示条目子集的 Eclipse 视图表

> ID：12824583
> 
> 赞同：0
> 
> 时间：2012-10-10T16:59:15.543
> 
> 标签：java, eclipse-plugin

我希望在我的 Eclipse 视图中添加一个表。我需要该表一次显示不超过 25 个项目。然后我想要一个下一个/上一个功能，它将显示前 25 个或接下来的 25 个项目。我创建了一个自定义类来保存表项的数据，将它们存储到哈希映射中，并将前 25 个值添加到表中。然后，我在视图中添加按钮以清除表格，并根据用户按下的按钮从地图中添加下一个/前 25 个值。我的问题是有更简单的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T18:56:34.573

使用虚拟表来显示数据。见 [http://www.eclipse.org/articles/Article-SWT-Virtual/Virtual-in-SWT.html](http://www.eclipse.org/articles/Article-SWT-Virtual/Virtual-in-SWT.html)

# mysql - 在 MySQL 中使用 CASE 语句更新多行

> ID：12824587
> 
> 赞同：0
> 
> 时间：2012-10-10T16:59:20.800
> 
> 标签：mysql, syntax

我想不通，这里有很多关于堆栈溢出的示例，但是每个示例都存在差异，并且它们都给出了相同的问题。

我有一个包含 80 个“幻灯片”的列表，其中有一个名为“订单”的列。order 是一个数字，当前范围是 0 到 79。

如果我们删除一张幻灯片，我们需要调整该幻灯片之后的幻灯片，我已经制定了算法。

这是算法的结果：

```
UPDATE cms_slides SET order = 
    CASE order
        WHEN 68 THEN 67
        WHEN 69 THEN 68
    END CASE
WHERE order BETWEEN 68 AND 69 
```

这是当前代码基于 Soulmerge 的解决方案：[Updating display order of multiple MySQL rows in one or very few queries](https://stackoverflow.com/questions/748720/updating-display-order-of-multiple-mysql-rows-in-one-or-very-few-queries)

“order”列实际上存在于“cms_slides”中，并且值 1 到 69 都存在于“order”下。

错误消息是典型的：*错误：您的 SQL 语法有错误；检查手册...*

有谁知道代码有什么问题？我尝试了很多变体，但都没有奏效，这可能很简单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T17:01:02.457

`ORDER`是 MySQL 中的[保留字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)，你应该在它周围使用反引号，你不需要`END CASE`just use `END`：

```
UPDATE cms_slides SET `order` = 
    CASE `order`
        WHEN 68 THEN 67
        WHEN 69 THEN 68
    END 
WHERE `order` BETWEEN 68 AND 69 
```

# proxy - IIRF 如何重定向 CRUD 请求

> ID：12824589
> 
> 赞同：2
> 
> 时间：2012-10-10T16:59:25.313
> 
> 标签：proxy, reverse-proxy, iirf

我正在尝试使 IIRF 重定向 POST UPDATE DELETE 请求，而不仅仅是 GET 一个。这是配置

```
RedirectRule ^/web1$ /web2/ [I]
ProxyPass ^/web1/(.*)$ http://another.example.com:25000/web2/$1
ProxyPassReverse /web1 http://another.example.com:25000/web2/ 
```

我该如何做这个功能？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-29T08:18:49.000

IIRF 适用于所有动词。

你不需要做任何其他事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-21T07:52:03.447

尝试查看本手册：[https ://web.archive.org/web/20140421191230/http://dotnetzip.herobo.com/Iirf21Help/frames.htm](https://web.archive.org/web/20140421191230/http://dotnetzip.herobo.com/Iirf21Help/frames.htm)

检查最后一部分：

> 可选：如果要将 ProxyPass 与 POST 一起使用，还必须将 DLL 配置为 ISAPI 扩展。为此，在 IIS 管理器中，在左侧，右键单击网站节点，然后选择属性。

我不知道如何在 II6.1 中做到这一点，但这可以帮助你。

# c++ - 之间的区别 和

> ID：12824595
> 
> 赞同：56
> 
> 时间：2012-10-10T16:59:41.367
> 
> 标签：c++, visual-studio, g++

今天早些时候（实际上是昨天，由于我的时区），我尝试在 Interview Street 上使用*Visual Studio 2012 for C++ 进行编程面试（使用**g++*）。

简而言之，我在使用时遇到了几个编译错误¹

```
#include <cstring> 
```

这是由其中一个问题中的骨架代码提供的，在转向

```
#include <string> 
```

所有编译错误都神奇地消失了。

但是，在提交到采访街后，我不得不补充`c`；否则我得到编译错误。

这是我第一次被非标准化咬伤......

我的问题是：什么里面`<string>`又`<cstring>`花了我（珍贵）半个多小时？

* * *

¹对于任何好奇的人：

Visual Studio 2012 的一个错误`using <cstring>`是：

> 错误 C2338：C++ 标准不提供此类型的哈希。

在

> c:\程序文件 (x86)\microsoft visual studio 11.0\vc\include\xstddef

可能`string`作为关键`unordered_map`

g++ 的一个错误 if`using <string>`是：

> 'strlen' 未在此范围内声明

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-10-10T17:03:51.347

标`cstring`头提供了处理 C 风格字符串的函数——以 null 结尾的字符数组。这包括 和 之类的`strlen`功能`strcpy`。它是 C 中经典`string.h`标头的 C++ 版本。

头`string`文件提供了`std::string`类和相关的函数和操作符。

标题具有相似的名称，但除此之外它们并没有真正的相关性。它们涵盖不同的任务。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-10T17:04:05.560

`<cstring>`具有来自 C 标头 string.h 的 C 字符串代码。`C++`有一个约定，其中`C`标头具有相同的基本名称，除了前导`c`和没有尾随`.h`。所有内容都在`std::`命名空间下可用。

[`<string>`](http://en.cppreference.com/w/cpp/string)拥有标准库[`std::string`](http://en.cppreference.com/w/cpp/string/basic_string)及相关功能

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-10T17:03:51.580

在 C++ 中，您不会使用`#include <somefile.h>`，而是使用`#include <somefile>`. 现在 C++ 的字符串类`<string>`在`<string.h>`. C++ 用于“传统”c-包含文件。因此，`<cstring>`和`<string>`

[http://www.cplusplus.com/reference/clibrary/cstring/](http://www.cplusplus.com/reference/clibrary/cstring/)

# python - 渲染和缩放 SVG 的最佳库

> ID：12824596
> 
> 赞同：1
> 
> 时间：2012-10-10T16:59:44.697
> 
> 标签：python, svg, pyqt, rendering, zooming

我刚刚开始使用 python，所以我需要有经验的人来指导我正确的方向。我使用 QT-Designer 制作了一个简单的 GUI，当我单击按钮时，我希望它加载并渲染一些 test.svg，我使用“gtk”和“rsvg”完成了这些操作。我还需要（在渲染之后）是可以使用缩放和平移。我应该为此使用一些好的（更好的）库吗？如果没有，对我（菜鸟）来说，这是最好和最简单的方法吗？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T07:34:14.973

我已经使用`QGraphicsWebView`而不是解决了这个问题`QSvgWidget`。`QGraphicsWebView`已经实现了 Internet 浏览器的所有功能，因此 svg 中的缩放、平移和脚本工作正常。

```
 self.webview = QGraphicsWebView()
    self.webview.resize(SVGwidth,SVGheight)
    self.webview.load(QtCore.QUrl('C:\someTest.svg'))
    self.webview.setFlags(QtGui.QGraphicsItem.ItemClipsToShape)
    self.webview.setCacheMode(QtGui.QGraphicsItem.NoCache)
    self.webview.setZValue(0) 
```

# objective-c - 混合 UIView 动画和 CGAffineTransformMakeRotation

> ID：12824601
> 
> 赞同：1
> 
> 时间：2012-10-10T17:00:15.393
> 
> 标签：objective-c, xcode, animation, uiview, cgaffinetransform

在阅读了一些关于动画的教程后，我正在测试一些东西。我用故事板创建了一个单视图 ARC 项目。我在主视图中添加了一个 UIImageView，中心位于 (200, 200)。我正确设置了插座。

我的想法是让图像（UIImageView *bug）向左移动，然后向右转动 180°，向右移动，向左转动 180°，依此类推。

这是我的代码

视图控制器.h

```
@interface ViewController : UIViewController

@property (nonatomic, assign) IBOutlet UIImageView *bug;
@end 
```

视图控制器.m

```
#import "ViewController.h"
#import <CoreGraphics/CoreGraphics.h>

@interface ViewController ()

@end

@implementation ViewController

@synthesize bug;

#pragma mark - Animations

- (void)moveToLeft
{

    [UIView animateWithDuration:1.0
                          delay:0.0
                        options:UIViewAnimationCurveEaseInOut
                     animations:^{
                         NSLog(@"Animation 1");
                         bug.center = CGPointMake(100, 200);
                     }
                     completion:^(BOOL finished){
                        [self turnToRight];
                     }
     ];       
}

-(void)turnToRight
{
    [UIView animateWithDuration:1.0
                          delay:0.0
                        options:UIViewAnimationCurveEaseInOut
                     animations:^{
                         NSLog(@"Animation 2");
                         bug.transform = CGAffineTransformMakeRotation(M_PI);                     }
                     completion:^(BOOL finished){
                     [self moveToRight];
                     }
     ];
}

- (void)moveToRight
{

    [UIView animateWithDuration:1.0
                          delay:0.0
                        options:UIViewAnimationCurveEaseInOut
                     animations:^{
                         NSLog(@"Animation 3");
                         bug.center = CGPointMake(200, 200);
                     }
                     completion:^(BOOL finished){
                         [self turnToLeft];
                     }
     ];
}

-(void)turnToLeft
{
    [UIView animateWithDuration:1.0
                          delay:0.0
                        options:UIViewAnimationCurveEaseInOut
                     animations:^{
                         NSLog(@"Animation 4");

                             bug.transform = CGAffineTransformMakeRotation(0.0);
                     }
                     completion:^(BOOL finished){
                         [self moveToLeft];
                     }
     ];
} 
```

在第二次调用 CGAffineTransformMakeRotation 之前一切正常。图像向左，向右旋转，向右，然后问题！动画中断，bug 移动到第一个 CGAffineTransformMakeRotation 的位置，然后向左旋转，重复这些步骤。

我尝试了不同的方法，但似乎每次对 CGAffineTransform 的后续调用都没有考虑 UIImageView 的新位置，并且总是在它被调用的第一个位置执行转换。我检查了很多示例并且代码似乎正确，我只是不明白为什么将 CGAffineTransformMakeRotation 与常规动画混合会导致这种行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T21:10:43.883

您应该使用而不是. 它们来自不同的枚举，并且在使用块动画时始终使用名称中的那些。 您指定的值为，这可能会导致重定位。`UIViewAnimation`**`Option`**`CurveEaseInOut``UIViewAnimationCurveEaseInOut`**`Option`**
`UIViewAnimationOptionLayoutSubviews`

这是我在您的代码中发现的唯一问题。如果这不是解决方案，那么您发现了一个错误:)

# javascript - 将javascript输出保存到文件？

> ID：12824604
> 
> 赞同：1
> 
> 时间：2012-10-10T17:00:24.540
> 
> 标签：javascript, adobe

我有php制作的网站。它在 Windows 机器上运行。我有一个我测试过的 javascript，它可以让我获得客户使用的 adobe 版本。问题是，通过运行代码，我可以检索 Adob​​e Reader 版本，但无法将输出保存到服务器端的文件中。

这是Javascript代码。我从姊妹 stackexchange 网站上获取了这段代码。

[http://jsfiddle.net/EGbY5/3/](http://jsfiddle.net/EGbY5/3/)

从 js 中保存这些信息的最佳方法是什么？我应该使用 js 还是任何其他脚本？我从谷歌读到你不能使用 js 在服务器上保存文件？如果这是真的，还有其他方法吗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T17:02:55.140

我建议使用 AJAX（或表单，如果您希望用户明确知道正在发生这种情况）向您的服务器端代码发送请求，详细说明您使用脚本收集的信息。

AJAX 的优点是您可以在用户没有明确意识到的情况下完成所有这些操作。缺点是您依赖他们的浏览器支持 Javascript，但是由于您已经在使用 Javascript 收集信息，所以这个问题是无声的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T17:05:44.370

阿贾克斯会做到的。

JavaScript 源代码：

```
var adobeVersion = CheckAdobeVersion();
$.post("script.php", {version: adobeVersion}, function(){}); 
```

PHP源码：

```
<?php
  $version = $_POST['version'];
  write all text to a file("my file.txt") // Pseudo code...
?> 
```

# c# - WebClient 在任务中计划时超时

> ID：12824609
> 
> 赞同：1
> 
> 时间：2012-10-10T17:00:45.793
> 
> 标签：c#, .net, multithreading, c#-4.0, task-parallel-library

嘿，伙计们，这是我第一次尝试在 4.0 中使用任务库，所以如果你看到除了我的问题之外还有其他不正确的问题，请告诉我。

我的问题是，当我安排一堆内部使用 webclient 发出请求的任务时，前几个任务通过就好了，但是在一段时间后，我的 webclient 开始抛出异常。就好像它创建了 webclient 然后坚持在 Task 中并等待一个线程来接收它，但是到那时已经达到了超时时间..这只是我的假设。

这是代码：

> var TmsThread = Task.Factory.StartNew(() => UpdateTmsNullPackages(), TaskCreationOptions.LongRunning);

在 Windows 应用程序的 Form1_Load 中运行。这就是它所说的

```
public void UpdateTmsNullPackages()
    {
        Parallel.ForEach(TmsNullPackages, Package =>
        {
            try
            {
                Task<string> task = Task.Factory.StartNew(() => Package.GetPackageTmsId(), TaskCreationOptions.AttachedToParent);
                task.ContinueWith(t =>
                    {
                        if (!String.IsNullOrEmpty(t.Result))
                        {
                            Package.TMSID = t.Result;
                            NowTmsIdFoundPackages.Add(Package);
                        }
                    });
            }
            catch(Exception ex){}
        });
    } 
```

反过来，运行这个

```
 public static string GetPackageTmsId(this TwcPackage Package)
    {
        string TMSID = null;
        if (!(String.IsNullOrEmpty(Package.movie_Provider)) && !(String.IsNullOrEmpty(Package.movie_Product)) && !(String.IsNullOrEmpty(Package.movie_Provider_ID)) && !(String.IsNullOrEmpty(Package.movie_Asset_ID)))
        {
            try
            {
                using (WebClient client = new WebClient())
                {
                    client.Credentials = new NetworkCredential(TMSID_Recheck.Properties.Settings.Default.WebRequestUser, TMSID_Recheck.Properties.Settings.Default.WebRequestProdUserPassWord);
                    XmlDocument xmlDoc = new XmlDocument();
                    string URLToBeRequested = TMSID_Recheck.Properties.Settings.Default.RequestProdBaseURL + TMSID_Recheck.Properties.Settings.Default.RequestAPIVersion + "/" + TMSID_Recheck.Properties.Settings.Default.RequestAPIProgramServiceCall + TMSID_Recheck.Properties.Settings.Default.RequestAPIProgramAssociationServiceCall + Package.movie_Provider + ':' + Package.movie_Product + ':' + Package.movie_Provider_ID + "::" + Package.movie_Asset_ID;
                    try
                    {
                        xmlDoc.LoadXml(client.DownloadString(URLToBeRequested));
                        XmlNodeList Program = xmlDoc.DocumentElement.SelectNodes("program");
                        if (Program.Count > 0) TMSID = Program[0].Attributes["TMSId"].Value.ToString();
                    }
                    catch (WebException ex)
                    {
                        if (ex.Status != WebExceptionStatus.Timeout)
                        {
                            if (((HttpWebResponse)ex.Response).StatusCode != HttpStatusCode.NotFound) {  }
                        }
                        else {  }
                    }
                }
            }
            catch (Exception ix) {  }
        }
        return TMSID;
    } 
```

当在几百个任务之后调用 downloadstring 时会发生此问题，它会引发超时异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T17:13:07.143

> 在几百个任务后调用 downloadstring 时会出现此问题

在那个时间片内完成了多少任务？

看起来您只是在排队太多请求。您的系统和远程服务器可能有适当的策略来限制同时连接的数量。

解决方案（和快速诊断测试）是在 ForEach 中使用 MaxDegreeOfParallelism。

这是一个[类似的问题](https://stackoverflow.com/questions/9290498/how-can-i-limit-parallel-foreach)，有一些很好的答案。

# qt-creator - 在 qt creator 中为 c++ 项目链接库

> ID：12824610
> 
> 赞同：0
> 
> 时间：2012-10-10T17:00:47.917
> 
> 标签：qt-creator

我正在使用 QT creator 创建普通的 c++ 项目。我需要链接 boost 库。我已经在 Project Properties/C C++ build/Gcc C++ linker/-l boost_filesystem 下的 Eclipse 项目中使用了它，但我不确定如何在 QT creator 中执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T17:10:19.903

我使用 Qt，但不是 Qt-Creator，所以我不确定你可以在 UI 的哪个位置执行此操作。

但是在 .pro 文件（makefile 的输入）中，您可以使用以下命令指定库：

```
LIBS += -lboost_filesystem  # assuming 'boost_filesystem' is the name of the lib file
LIBS += -L/[wherever boost lib files are on your system] 
```

“-l”是文件名，“-L”是库路径名。

```
LIBS += -lboost_filesystem -L/[wherever boost lib files are on your system] 
```

也可以。

"+=" 将它附加到当前的 QMake 变量中，使用 "=" 时要小心，除非您真的打算替换这些值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-28T22:08:05.833

我不知道，这对你来说是否仍然是一个问题，但我回答是因为它可能会帮助像我这样有类似问题的其他人。

据我了解：当您将 QtCreator 与普通 C++ 一起使用时，系统会询问您要使用哪个构建工具。我选择了 CMake，所以从现在开始，一切都通过 CMake 进行，更少的事情直接通过 QtCreator。这就是不再有 .pro 文件的原因。

所以我为解决这个问题所做的就是`add_executable(...)`在 CMakeLists.txt 文件中的行之后添加以下行：

```
target_link_libraries(my_project_name -lboost_system) 
```

注意：我只需要 lboost_system，但我认为只需用`-lboost_filesystem`etc.. 扩展列表就可以了。

希望它可以帮助某人。

# javascript - 更改 Socket.IO 静态文件服务路径

> ID：12824612
> 
> 赞同：22
> 
> 时间：2012-10-10T17:00:48.277
> 
> 标签：javascript, node.js, socket.io

我在带有基本 HTTP 服务器（没有 Express 或 Connect 或类似的东西）的节点服务器上使用 Socket.IO。默认情况下，Socket.IO 将客户端文件提供给

> /socket.io/socket.io.js

我希望能够将该基本路径更改为其他内容，例如

> /foo/bar/socket.io/socket.io.js

有没有任何内置的方法可以做到这一点，或者没有改变 Socket.IO 代码的任何方法？我认为答案在于`Static`模块 ( `require('socket.io').Static)`)，但没有编写自己的模块来替换默认值，我认为没有办法去改变它的行为方式。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-15T21:27:21.223

该[`resource`选项](https://github.com/LearnBoost/Socket.IO/wiki/Configuring-Socket.IO)允许您配置 socket.io 的根目录。它默认为`/socket.io`.

```
var io = require('socket.io').listen(app, { resource: '/foo/bar/socket.io' }); 
```

请注意，此设置也会影响 socket.io 的端点从何处提供服务，因此**您还必须在客户端代码中更改此设置**。

```
var socket = io.connect('http://example.com', { resource: 'foo/bar/socket.io' }); 
```

（请注意，出于某种原因，我们在这里不使用前导斜杠。）

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-12-30T08:29:33.103

对于 socket.io 版本**1.2.1**，这对我有用。

服务器端：

```
var io = require('socket.io')({path: '/foo/bar'}); 
```

客户端：

```
var socket = io.connect('http://example.com', {path: '/foo/bar'}); 
```

仅供参考：[http ://socket.io/docs/migrating-from-0-9/#configuration-differences](http://socket.io/docs/migrating-from-0-9/#configuration-differences)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-08-22T02:08:51.187

如果您使用的是 socket.io**版本 1.0**，则配置与以前的版本不同。

对于客户端：

```
var socket = io.connect('http://localhost:8888', { path: '/some/path/socket.io' }); 
```

对于服务器端

```
 var socket = require("socket.io")( { resource: '/some/path/socket.io' }); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-10T18:09:29.937

`socket.io.js`您可以在路径中找到客户端脚本`node_modules/socket.io/node_modules/socket.io-client/dist`。将其复制到新文件夹并使用客户端的正确路径调用它

```
<script src="/your/path/to/socket.io.js"></script> 
```

更多配置请访问[wiki](https://github.com/LearnBoost/Socket.IO/wiki/Configuring-Socket.IO)

# ruby-on-rails - 删除 Mongoid before_save 循环中的属性

> ID：12824618
> 
> 赞同：1
> 
> 时间：2012-10-10T17:01:04.750
> 
> 标签：ruby-on-rails, mongoid

我认为与其在父文档和嵌入文档中保留 nil/null 的某些属性（例如，如果不存在价格，则为订单总数），我最好根本不保存它们。如何在保存之前删除 nil 的属性？

```
# embedded order position for each order
class Orderitem
  include Mongoid::Document

  field :quantity, :type => Integer
  field :unit_price, :type => Integer
  field :total, :type => Integer
  field :economical_potential, :type => Integer

  embedded_in :order
  belongs_to :supplier
  belongs_to :item

  before_save :remove_empty_fields

  private

  def remove_empty_fields
    attributes.each do |attr_name, value|
      if value.nil?
        # don't save attribute
      end
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T19:01:32.523

为什么要从模型中删除属性？在这种情况下，我会添加另一个名为 `unit`并添加`:price`为属性的模型。然后添加一个函数来`Orderitem`调用`def total_of_unit`，它将根据单位数量及其价格返回总数。

在代码中它看起来像这样：

```
class Orderitem
  ...
  field :quantity, :type => Integer
  # drop :unit_price
  # drop :total
  field :economical_potential, :type => Integer
  ...
  has_many :units
  ...
  def total
    @total = 0
    self.units.each do |unit|
      @total = @total + unit.price
    end
    return @total
  end
end 
```

单位看起来像这样：

```
class Unit
  field :unit_price, :type => Integer
  belongs_to :Orderitem
end 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-19T18:41:57.473

Mongoid 支持#unset，所以你可以使用这样的东西：

```
order_item.unset(:total) 
```

# mysql - SSIS 2008 mySQL 源到 SQL 2008

> ID：12824624
> 
> 赞同：0
> 
> 时间：2012-10-10T17:01:20.537
> 
> 标签：mysql, ado.net, ssis

我需要使用 SSIS 2008 包将数据从远程 mySQL 数据库复制到 MSSQL Server 2008 数据库中。我的 mySQL 数据库中有一些 Timestamp 字段给我带来了问题。当我排除时间戳字段时，我设法很好地复制了数据。在 OLE DB 目标输入 - 输入列上，mySQL 数据库上的时间戳字段显示为具有数据类型 DT_Bytes。

我收到错误 OLE DB 记录可用。
来源：“Microsoft SQL Server Native Client 10.0” Hresult：0x80040E21 描述：“多步 OLE DB 操作生成错误。检查每个 OLE DB 状态值（如果可用）。没有完成任何工作。” [OLE DB 目标 [784]] 错误：无法创建 OLE DB 访问器。验证列元数据是否有效。

我对 mySQL 源的选择语句有一个选择案例来处理 0 个日期，就像这样；SELECT case modified_date when day(modified_date) = 0 then '1990-01-01 00:00:00' else modified _date end as modified from mySQLTableName

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T23:06:03.467

问题肯定出在您的数据类型上。打开您的目标组件进行编辑。转到映射选项卡。将鼠标悬停在每个列映射上，首先是源列，然后是目标列。工具提示将向您显示每列的数据类型是什么。其中一个不匹配。

这很可能是您的时间戳字段，但可能不是，所以我不会推测。

在任何情况下，为了使它们匹配，在源和目标之间添加一个数据转换组件，并将有问题的源列重新转换为要插入 SQL Server 的数据类型。（如果重铸也导致错误，它会比这个更有帮助！）

# apache - 301 重定向，与 RewriteRule 冲突

> ID：12824633
> 
> 赞同：0
> 
> 时间：2012-10-10T17:01:40.880
> 
> 标签：apache, .htaccess, mod-rewrite, redirect

我们今天进行了一些维护，并将我们的网络论坛从 /forums 移到了域的根文件夹中。

我们在 .htaccess 文件中放入重定向 301：

```
Redirect 301 /forums/ http://www.ourforums.com/ 
```

但是，我们曾经有一些包含重复 /forums 文件夹的链接。即 www.ourforums.com/forums/forums/forum.1

显然，从上面的重定向现在会导致 /forum.1，其中 odes 不存在。我希望旧链接实际上指向 www.ourforums.com/boards/forum.1。我试图使用类似的东西：

```
RewriteRule ^/forums/forums http://www.ourforums.com/boards/ [NC,R=301,L] 
```

不管我尝试了什么，重定向似乎取代了我放在同一个文件中的任何 RewriteRules，无论我是否将它们放在重定向之前。

有什么办法可以确保在重定向之前处理 RewriteRule？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T21:32:56.560

这是因为 mod_alias （`Redirect`指令）和 mod_rewrite （`RewriteRule`指令）在您的情况下相互冲突。它们都在 URL 文件映射处理管道中发挥作用，在该管道中 URI 被处理、重写、标记并最终映射到资源和响应。您有一个`Redirect`正在应用的规则，并且响应被标记为重定向。该`Redirect`指令的关键在于它将 2 个路径节点连接在一起，这意味着：

```
/forums/ 
```

连接到

```
http://www.ourforums.com/ 
```

因此，文件夹下方的任何内容`/forums`最终也会被重定向。这就是它吸引人的原因`^/forums/forums`。

您可以坚持使用 mod_rewrite 或使用`RedirectMatch`排除`/forums/forums`：

```
RewriteRule ^/forums/forums(.*)$ http://www.ourforums.com/boards$1 [NC,R=301,L]
RewriteRule ^/forums/(.*)$ http://www.ourforums.com/$1 [NC,R=301,L] 
```

或者

```
RedirectMatch 301 ^/forums/(?!forums)(.*)$ http://www.ourforums.com/$1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T13:17:33.440

像这样手动添加重定向语句似乎对我有用：

```
Redirect /forums/forums/forum.1 http://www.ourforums.com/boards/forum.1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-23T14:28:13.467

我有一个类似的问题。我试图从 cpanel 添加重定向，而我的 .htaccess 文件中已经写了一些重写规则。我得到的错误是“没有适合的标记”我最终所做的是保留了我现有规则的副本并清理了 .htaccess。然后从 cpanel 添加了我需要的所有重定向，最后在文件末尾放回我自己的重写规则。这对我有用

# linux - Bash 脚本：无法正确处理 SIGTSTP

> ID：12824637
> 
> 赞同：9
> 
> 时间：2012-10-10T17:01:57.090
> 
> 标签：linux, bash, signals, bash-trap

我有一个安装和卸载设备的 bash 脚本，它在两者之间执行一些读取操作。由于设备非常慢，脚本大约需要 15 秒才能完成（挂载至少需要 5-6 秒）。由于安装此设备可能会导致其他问题，因此我不希望此脚本被中断。

话虽如此，我可以正确处理 SIGINT (Ctrl+c)，但是当我尝试处理 SIGTSTP (Ctrl+z) 时，脚本会冻结。这意味着信号被捕获但处理程序没有运行。

```
#!/bin/sh
cleanup()
{
    # Don't worry about unmounting yet. Just checking if trap works.
    echo "Quitting..." > /dev/tty
    exit 0
}
trap 'cleanup' SIGTSTP
... 
```

我必须手动向进程发送 KILL 信号。知道为什么会发生这种情况以及如何解决吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T17:29:16.993

在当前执行的进程终止之前，shell 不会执行陷阱。（至少，这是 bash 3.00.15 的行为）。如果通过^c发送SIGINT，则发送给前台进程组中的所有进程；如果当前执行的程序接收到它并终止，那么 bash 可以执行陷阱。与 SIGTSTP 类似，通过 ^z; bash 接收到信号但不执行陷阱，直到正在运行的程序终止，如果它采用默认行为并被挂起，它就不会这样做。尝试用`...`一个简单的替换`read f`并注意陷阱立即执行。

# mysql - mysql int vs 布尔索引

> ID：12824639
> 
> 赞同：1
> 
> 时间：2012-10-10T17:02:02.407
> 
> 标签：mysql, performance

我有一个任务：

数据库中的记录可以处于以下状态：

```
NEW = 1
CONFIRMED = 2
FINISHED = 3
DELETED = 4 
```

1.

我可以将它们存储在 int 字段中，并带有索引，然后像这样选择：

```
... WHERE status = FINISHED ...
... WHERE status = DELETED ... 
```

2.

我也可以将它们存储为 4 个独立的布尔字段

然后选择：

```
... WHERE finished_field = True ...
... WHERE deleted_field = True ... 
```

哪种情况在性能（对于选择）1 或 2 方面更好，是否需要为情况 2 中的字段创建索引？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T17:15:31.527

在性能方面，我不确定它们会产生什么不同，但在可维护性方面，最好使用一个可以采用不同值的状态字段，而不是为每个状态设置一个列。如果明天你需要一个新的状态，使用第二个选项你必须改变表模式，而使用第一个选项你只需要使用一个新的状态标识符（例如“RESTORED = 5”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T18:05:13.720

性能可能无关紧要。更重要的是数据库设计。如果您使用 4 位字段，则可以将多个状态设置为`true`. 那不应该发生。您可以通过触发器来防止这种情况，但最好有一个状态字段，因为只有一种状态。

这样您就不必组合多个字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T12:27:05.963

第一个选项将有更好的机会获得更好的性能，因为您可以索引该字段。索引布尔字段没有任何效果，因为没有足够的不同值，MySQL 将忽略该索引。

使用一个字段更有可能实际使用索引。

最后还有一些实际的考虑。第一个选项将使添加另一种状态更容易，它将确保一条记录只能具有一种状态，并且您的表会更小。

# iphone - Xcode iPhone在地址簿视图中添加“到这里的路线”按钮

> ID：12824642
> 
> 赞同：0
> 
> 时间：2012-10-10T17:02:11.660
> 
> 标签：iphone, ios, xcode, ipad

> **可能重复：**
> [如何在通讯录中添加“到这里的路线”按钮？](https://stackoverflow.com/questions/6414520/how-to-add-directions-to-here-button-into-the-address-book)

我正在使用通讯簿 API 在我的应用程序中显示联系信息。信息包括姓名、电话号码和地址。

我想添加一个“到这里的路线”按钮，因为它曾经出现在 Google 地图应用程序中。可以用我正在使用的 ABPersonViewController 来完成吗？

我的问题和这个问题一样：[如何在通讯录中添加“Directions To Here”按钮？](https://stackoverflow.com/q/6414520/984248)

我在这里没有看到明确的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T17:42:56.197

首先，您必须将地址转换为坐标。不难，您可以从 iOS 5 开始使用[转发地理编码](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/LocationAwarenessPG/UsingGeocoders/UsingGeocoders.html#//apple_ref/doc/uid/TP40009497-CH4-SW5)。如果您不想使用 Apple 的 Map Kit，还有一些 API 可以为您转发地址地理编码。

一旦你得到目的地的纬度和经度，以及你的起点，你可以自己计算路线，或者只使用一些第三方 API。[Google Directions API](https://developers.google.com/maps/documentation/directions/)非常棒。Google 将返回一个 JSON 或 XML 组合响应，其中包含计算路由的所有信息。您还可以设置参数，例如是否要包含收费路线等。看看文档。

此外，您可能想看看几个月前的[这个玩具应用程序。](https://github.com/volonbolon/Directions)您将找到几乎所有您需要的东西，从前向地理编码到路线请求、路线处理（您必须为 google 响应提取将线条绘制到地图中所需的所有信息），然后是地图绘制。

# matlab - 在 MATLAB 中将数字垫显示为数据集（带有行/列名称）

> ID：12824645
> 
> 赞同：0
> 
> 时间：2012-10-10T17:02:34.203
> 
> 标签：matlab, matrix, indexing, dataset, publish

我对数据集/在 Matlab 中以可读格式显示数据不是很熟悉。我有一个带有 4 列的数字矩阵，我需要将其显示为：

```
mydata1 = [100 200 400 40] ;
mydata2 = [1   2   3   4 ] ;
display it as -->

         CovA   CovB   CovC  CovD
  Sys1   100    200    400   40
  Sys2   1      2      3     4 
```

我猜数据集会帮助我实现这一点。转换后，我希望与其他人一起发布此数据集。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T17:31:33.093

[DATASET](http://www.mathworks.com/help/stats/dataset.html)按列构造数据。因此，您可以接受所有内容都已转置，即

```
ds = dataset({mydata1','sys1'},{mydata2','sys2'},'obsNames',...
     {'CovA','CovB','CovC','CovD'})

ds = 

            sys1    sys2
    CovA    100     1   
    CovB    200     2   
    CovC    400     3   
    CovD     40     4 
```

或者您通过首先连接来构建数据集相当不方便`mydata`：

```
mm = [mydata1;mydata2];
dataset(mm(:,1),mm(:,2),mm(:,3),mm(:,4),'varNames',...
       {'CovA','CovB','CovC','CovD'},'obsNames',{'sys1','sys2'})

ans = 

            CovA    CovB    CovC    CovD
    sys1    100     200     400     40  
    sys2      1       2       3      4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T17:05:39.593

这将在 matlab 中将矩阵显示为表格

[http://www.mathworks.com/matlabcentral/fileexchange/27384-disptable-display-matrix-with-column-or-row-labels](http://www.mathworks.com/matlabcentral/fileexchange/27384-disptable-display-matrix-with-column-or-row-labels)

# opengl - 立方体贴图不起作用（OpenGL）

> ID：12824647
> 
> 赞同：0
> 
> 时间：2012-10-10T17:02:37.377
> 
> 标签：opengl, reflection, glsl

我正在尝试使用 OpenGL 的立方体映射，但由于某种原因，y 图像被反转并且正在搞砸结果，并且正在执行的反射和折射无法正常工作。

这是我的代码。

```
void initCubeMap()
{
    GLbyte *pBytes;
    GLint eFormat, iComponents;
    GLint width, height;

    // Cull backs of polygons
    glCullFace(GL_BACK);
    glFrontFace(GL_CCW);
    glEnable(GL_CULL_FACE);

    glActiveTexture(GL_TEXTURE0);
    glBindTexture(GL_TEXTURE_CUBE_MAP, 0);

    // Set up texture maps        
    glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_WRAP_S, GL_REPEAT);
    glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_WRAP_T, GL_REPEAT);
    glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_WRAP_R, GL_REPEAT);

    glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_MIN_FILTER, GL_LINEAR);

    glHint(GL_PERSPECTIVE_CORRECTION_HINT, GL_NICEST); 

    glTexEnvi(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_DECAL);

    // Load Cube Map images
    for(int i=0; i<6; i++)
    {        
        // Load this texture map
        glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_GENERATE_MIPMAP, GL_TRUE);
        pBytes = utilities.loadTGA(cubeFaces[i], &width, &height, &iComponents, &eFormat);
        glTexImage2D(cube[i], 0, GL_RGB8, width, height, 0, GL_BGR, GL_UNSIGNED_BYTE, pBytes);
        free(pBytes);
    }

    glTexGeni(GL_S, GL_TEXTURE_GEN_MODE, GL_REFLECTION_MAP);
    glTexGeni(GL_T, GL_TEXTURE_GEN_MODE, GL_REFLECTION_MAP);
    glTexGeni(GL_R, GL_TEXTURE_GEN_MODE, GL_REFLECTION_MAP);

    // Enable cube mapping, and set texture environment to decal
    glEnable(GL_TEXTURE_CUBE_MAP);
    glTexEnvi(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_DECAL);
}

void renderScene()
{
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    glPushMatrix();
        camera.RenderCam();
        camera.MoveCamMouse();

        // Sky Box is manually textured
        glDisable(GL_TEXTURE_GEN_S);
        glDisable(GL_TEXTURE_GEN_T);
        glDisable(GL_TEXTURE_GEN_R); 

        drawSkyBox();

        // Use texgen to apply cube map
        glEnable(GL_TEXTURE_GEN_S);
        glEnable(GL_TEXTURE_GEN_T);
        glEnable(GL_TEXTURE_GEN_R);

        glPushMatrix();
            glMatrixMode(GL_TEXTURE);
            glPushMatrix();
                GLfloat m[16];
                glGetFloatv(GL_MODELVIEW_MATRIX, m);
                camera.getCameraInverse(m);
                glMultMatrixf(m);
                glUseProgram(glassProgram);
                utilities.setUniform("Cubemap", 0);
                glutSolidSphere(5.0, 100, 100);
                glUseProgram(0);
            glPopMatrix();
            glMatrixMode(GL_MODELVIEW);
        glPopMatrix();
    glPopMatrix();

    // FPS
    frame++;

    time = glutGet(GLUT_ELAPSED_TIME);
    if (time - timebase > 1000) 
    {
        sprintf(s,"Template | FPS: %4.2f",frame*1000.0/(time-timebase));
        timebase = time;
        frame = 0;
    }

    glutSetWindowTitle((const char*)&s);

    // Swap double buffer for flicker-free animation
    glutSwapBuffers();
}

void Camera::getCameraInverse(GLfloat *result)
{
    GLfloat resultTemp[16];
    float tmp[12];                                              //temporary pair storage
    float det;                                                  //determinant

    //calculate pairs for first 8 elements (cofactors)
    tmp[0] = result[10] * result[15];
    tmp[1] = result[11] * result[14];
    tmp[2] = result[9] * result[15];
    tmp[3] = result[11] * result[13];
    tmp[4] = result[9] * result[14];
    tmp[5] = result[10] * result[13];
    tmp[6] = result[8] * result[15];
    tmp[7] = result[11] * result[12];
    tmp[8] = result[8] * result[14];
    tmp[9] = result[10] * result[12];
    tmp[10] = result[8] * result[13];
    tmp[11] = result[9] * result[12];

    //calculate first 8 elements (cofactors)
    resultTemp[0] = tmp[0]*result[5] + tmp[3]*result[6] + tmp[4]*result[7] -    tmp[1]*result[5] - tmp[2]*result[6] - tmp[5]*result[7];

    resultTemp[1] = tmp[1]*result[4] + tmp[6]*result[6] + tmp[9]*result[7] -    tmp[0]*result[4] - tmp[7]*result[6] - tmp[8]*result[7];

    resultTemp[2] = tmp[2]*result[4] + tmp[7]*result[5] + tmp[10]*result[7] - tmp[3]*result[4] - tmp[6]*result[5] - tmp[11]*result[7];

    resultTemp[3] = tmp[5]*result[4] + tmp[8]*result[5] + tmp[11]*result[6] - tmp[4]*result[4] - tmp[9]*result[5] - tmp[10]*result[6];

    resultTemp[4] = tmp[1]*result[1] + tmp[2]*result[2] + tmp[5]*result[3] -    tmp[0]*result[1] - tmp[3]*result[2] - tmp[4]*result[3];

    resultTemp[5] = tmp[0]*result[0] + tmp[7]*result[2] + tmp[8]*result[3] -    tmp[1]*result[0] - tmp[6]*result[2] - tmp[9]*result[3];

    resultTemp[6] = tmp[3]*result[0] + tmp[6]*result[1] + tmp[11]*result[3] - tmp[2]*result[0] - tmp[7]*result[1] - tmp[10]*result[3];

    resultTemp[7] = tmp[4]*result[0] + tmp[9]*result[1] + tmp[10]*result[2] - tmp[5]*result[0] - tmp[8]*result[1] - tmp[11]*result[2];

    //calculate pairs for second 8 elements (cofactors)
    tmp[0] = result[2]*result[7];
    tmp[1] = result[3]*result[6];
    tmp[2] = result[1]*result[7];
    tmp[3] = result[3]*result[5];
    tmp[4] = result[1]*result[6];
    tmp[5] = result[2]*result[5];
    tmp[6] = result[0]*result[7];
    tmp[7] = result[3]*result[4];
    tmp[8] = result[0]*result[6];
    tmp[9] = result[2]*result[4];
    tmp[10] = result[0]*result[5];
    tmp[11] = result[1]*result[4];

    //calculate second 8 elements (cofactors)
    resultTemp[8] = tmp[0]*result[13] + tmp[3]*result[14] + tmp[4]*result[15] - tmp[1]*result[13] - tmp[2]*result[14] - tmp[5]*result[15];

    resultTemp[9] = tmp[1]*result[12] + tmp[6]*result[14] + tmp[9]*result[15] - tmp[0]*result[12] - tmp[7]*result[14] - tmp[8]*result[15];

    resultTemp[10] = tmp[2]*result[12] + tmp[7]*result[13] + tmp[10]*result[15] - tmp[3]*result[12] - tmp[6]*result[13] - tmp[11]*result[15];

    resultTemp[11] = tmp[5]*result[12] + tmp[8]*result[13] + tmp[11]*result[14] - tmp[4]*result[12] - tmp[9]*result[13] - tmp[10]*result[14];

    resultTemp[12] = tmp[2]*result[10] + tmp[5]*result[11] + tmp[1]*result[9] - tmp[4]*result[11] - tmp[0]*result[9] - tmp[3]*result[10];

    resultTemp[13] = tmp[8]*result[11] + tmp[0]*result[8] + tmp[7]*result[10] - tmp[6]*result[10] - tmp[9]*result[11] - tmp[1]*result[8];

    resultTemp[14] = tmp[6]*result[9] + tmp[11]*result[11] + tmp[3]*result[8] - tmp[10]*result[11] - tmp[2]*result[8] - tmp[7]*result[9];

    resultTemp[15] = tmp[10]*result[10] + tmp[4]*result[8] + tmp[9]*result[9] - tmp[8]*result[9] - tmp[11]*result[10] - tmp[5]*result[8];

    // calculate determinant
    det = result[0]*resultTemp[0] + result[1]*resultTemp[1] + result[2]*resultTemp[2] + result[3]*resultTemp[3];

    resultTemp[0] = resultTemp[0]/det;
    resultTemp[1] = resultTemp[1]/det;
    resultTemp[2] = resultTemp[2]/det;
    resultTemp[3] = resultTemp[3]/det;
    resultTemp[4] = resultTemp[4]/det;
    resultTemp[5] = resultTemp[5]/det;
    resultTemp[6] = resultTemp[6]/det;
    resultTemp[7] = resultTemp[7]/det;
    resultTemp[8] = resultTemp[8]/det;
    resultTemp[9] = resultTemp[9]/det;
    resultTemp[10] = resultTemp[10]/det;
    resultTemp[11] = resultTemp[11]/det;
    resultTemp[12] = resultTemp[12]/det;
    resultTemp[13] = resultTemp[13]/det;
    resultTemp[14] = resultTemp[14]/det;
    resultTemp[15] = resultTemp[15]/det;

    if(det==0.0f)
    {
        result[0] = 1.0;
        result[1] = 0.0;
        result[2] = 0.0;
        result[3] = 0.0;
        result[4] = 0.0;
        result[5] = 1.0;
        result[6] = 0.0;
        result[7] = 0.0;
        result[8] = 0.0;
        result[9] = 0.0;
        result[10] = 1.0;
        result[11] = 0.0;
        result[12] = 0.0;
        result[13] = 0.0;
        result[14] = 0.0;
        result[15] = 1.0;
    }

    result[0] = resultTemp[0];
    result[1] = resultTemp[4];
    result[2] = resultTemp[8];
    result[3] = resultTemp[12];
    result[4] = resultTemp[1];
    result[5] = resultTemp[5];
    result[6] = resultTemp[9];
    result[7] = resultTemp[13];
    result[8] = resultTemp[2];
    result[9] = resultTemp[6];
    result[10] = resultTemp[10];
    result[11] = resultTemp[14];
    result[12] = resultTemp[3];
    result[13] = resultTemp[7];
    result[14] = resultTemp[11];
    result[15] = resultTemp[15];
} 
```

* * *

这是我现在的 OpenGL 显示功能。它仍然无法正常工作。

```
void renderScene()
{
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    glPushMatrix();

        camera.RenderCam();
        camera.MoveCamMouse();

        // Sky Box is manually textured
        glDisable(GL_TEXTURE_GEN_S);
        glDisable(GL_TEXTURE_GEN_T);
        glDisable(GL_TEXTURE_GEN_R); 

        drawSkyBox();

        // Use texgen to apply cube map
        glEnable(GL_TEXTURE_GEN_S);
        glEnable(GL_TEXTURE_GEN_T);
        glEnable(GL_TEXTURE_GEN_R);

        glUseProgram(glassProgram);
        utilities.setUniform("Cubemap", 0);
        glPushMatrix();
            glMatrixMode(GL_TEXTURE);
            glLoadIdentity();
            glScalef(-1, -1, -1);
            glPushMatrix();
                GLfloat m[16];
                glGetFloatv(GL_MODELVIEW_MATRIX, m);
                camera.getCameraInverse(m);
                glMultMatrixf(m);
                glutSolidSphere(5.0, 100, 100);
            glPopMatrix();
            glMatrixMode(GL_TEXTURE);
            glLoadIdentity();
            glMatrixMode(GL_MODELVIEW);
        glPopMatrix();
        glUseProgram(0);

    glPopMatrix();
    // FPS
    frame++;

    time = glutGet(GLUT_ELAPSED_TIME);
    if (time - timebase > 1000) 
    {
        sprintf(s,"Texture Mapping | FPS: %4.2f",frame*1000.0/(time-timebase));
        timebase = time;
        frame = 0;
    }

    glutSetWindowTitle((const char*)&s);

    // Swap double buffer for flicker-free animation
    glutSwapBuffers();
} 
```

这是我执行反射和折射的 GLSL 代码。不确定这里是否有问题

```
// Vertex Shader

const float EtaR = 0.65;
const float EtaG = 0.67;         // Ratio of indices of refraction
const float EtaB = 0.69;
const float FresnelPower = 1.0;

const float F  = ((1.0-EtaG) * (1.0-EtaG)) / ((1.0+EtaG) * (1.0+EtaG));

varying vec3  Reflect;
varying vec3  RefractR;
varying vec3  RefractG;
varying vec3  RefractB;
varying float Ratio;

void main()
{
    vec4 ecPosition  = gl_ModelViewMatrix * gl_Vertex;
    vec3 ecPosition3 = ecPosition.xyz / ecPosition.w;

    vec3 i = normalize(ecPosition3);
    vec3 n = normalize(gl_NormalMatrix * gl_Normal);

    Ratio   = F + (1.0 - F) * pow((1.0 - dot(-i, n)), FresnelPower);

    RefractR = refract(i, n, EtaR);
    RefractR = vec3(gl_TextureMatrix[0] * vec4(RefractR, 1.0));
    RefractG = refract(i, n, EtaG);
    RefractG = vec3(gl_TextureMatrix[0] * vec4(RefractG, 1.0));

    RefractB = refract(i, n, EtaB);
    RefractB = vec3(gl_TextureMatrix[0] * vec4(RefractB, 1.0));

    Reflect  = reflect(i, n);
    Reflect  = vec3(gl_TextureMatrix[0] * vec4(Reflect, 1.0));

    gl_Position = ftransform();
}

// Fragment Shader

varying vec3  Reflect;
varying vec3  RefractR;
varying vec3  RefractG;
varying vec3  RefractB;
varying float Ratio;

uniform samplerCube Cubemap;

void main()
{
    vec3 refractColor, reflectColor;

    refractColor.r = vec3(textureCube(Cubemap, RefractR)).r;
    refractColor.g = vec3(textureCube(Cubemap, RefractG)).g;
    refractColor.b = vec3(textureCube(Cubemap, RefractB)).b;

    reflectColor   = vec3(textureCube(Cubemap, Reflect));

    vec3 color     = mix(refractColor, reflectColor, Ratio);

    gl_FragColor   = vec4(color, 1.0);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T18:08:58.727

> 但由于某种原因，y 图像被反转并搞砸了结果

是的，这是很多人遇到的一个相当普遍的问题。原因是 OpenGL 立方体贴图遵循 RenderMan 规范，其中扫描线排序与常规纹理相反。这种不一致是，嗯，不一致。从文件加载图像时，最好通过在加载图像时反转扫描线顺序来解决。在对立方体贴图纹理进行渲染时，应该翻转 Y 轴上的投影。

在您的情况下，一个简单的解决方法是将纹理矩阵在 y 中缩放 -1，即

```
glMatrixMode(GL_TEXTURE);
glLoadIdentity();
glScale(1, -1, 1); 
```

~~并通过交换 GL_TEXTURE_CUBE_MAP_POSITIVE_Y 和 GL_TEXTURE_CUBE_MAP_NEGATIVE_Y 图像。~~

# php - 设置使用显式相对路径的包含路径

> ID：12824652
> 
> 赞同：0
> 
> 时间：2012-10-10T17:03:17.467
> 
> 标签：php

我知道这一行：

```
set_include_path(get_include_path() . PATH_SEPARATOR . '/my/other/path'); 
```

添加`'/my/other/path'`到目录列表中`require`，`include`（和其他）函数在其中查找文件。

但此选项仅对没有指定路径`./`或`../`在路径开头指定的路径有效。例如：

```
// I would include /my/other/path/Zend.php
require('Zend.php'); // it works 
require('./Zend.php'); // it does not works 

// or if I would include /my/other/Zend.php
require('../Zend.php'); // still does not works 
```

但是我正在寻找一种方法来做到这一点

注意：这是一个古怪的项目。在这种情况下，我无法使用 include 和 require 函数修改文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T17:19:06.667

IMO，您唯一可以做的就是[chdir](http://php.net/manual/es/function.chdir.php)：您将当前工作目录设置为适合相关路线的目录。

# python - 正则表达式：匹配引号，不被替换

> ID：12824655
> 
> 赞同：1
> 
> 时间：2012-10-10T17:03:28.070
> 
> 标签：python, regex

我的模板引擎翻译

```
"some data #{substitution_expression} some other data" 
```

进入

```
"some data" + (substitution_expression) + "some other data" 
```

但如果“一些数据”或“一些其他数据”内部有双引号，则评估失败。我必须在这些引号之前添加斜杠，但我想不出正确的正则表达式。

有什么帮助吗？

更新：

这是模板引擎的工作方式：

1.  它得到一个模板字符串，例如

    ```
    template = 'template string "quoted text" #{expression}' 
    ```

2.  它通过一个简单的正则表达式将模板字符串更改为：

    ```
    template = '"%s"' % re.compile(r'\#{(.*)}').match(r'" + (\1) + "', template)  
    # template == "template string "quoted text"" + (expression) + ""  
    # here is a problem with a "quoted text" - it needs \ before quotes` 
    ```

3.  这个字符串被插入到 lambda 中，并且结果代码字符串正在被评估：

    ```
    return eval("lambda tpl_args: %s" % modified_template_string) 
    ```

4.  稍后在程序中使用一些 tpl_args 调用 lambda 以生成结果字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T22:19:17.323

你试过 re.DOTALL 标志吗？

```
re.compile(r'\#{(.*)}', re.DOTALL) 
```

# node.js - 合并 NodeJS 文件

> ID：12824656
> 
> 赞同：0
> 
> 时间：2012-10-10T17:03:29.163
> 
> 标签：node.js, modular

标准 NodeJS 应用程序利用 module.exports 使代码模块化。我们想将所有这些文件组合成一个文件，在客户端（这是我们在那里使用的）。有谁知道在不将所有内容包装在更多模块包装器（例如RequireJS）（例如命令行工具）中的情况下在服务器端执行此操作的简单方法？

塔

ñ

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-10-11T01:06:36.007

如果你想在客户端使用 node.js 模块而不需要额外的包装器（比如 RequireJS），你需要考虑使用 browserify：

[https://github.com/substack/node-browserify](https://github.com/substack/node-browserify)

这是一个非常有用的构建工具，允许您`require()`在客户端使用节点样式语句和本机 node.js 模块。或者，引用 github 页面本身：

> 使用服务器端构建步骤使节点样式的 require() 在浏览器中工作，就像变魔术一样！

# android - 动作栏默认颜色

> ID：12824661
> 
> 赞同：4
> 
> 时间：2012-10-10T17:03:42.517
> 
> 标签：android, colors

我在屏幕顶部使用操作栏，那里有按钮。我想在底部添加一个额外的按钮序列，但是有太多控件无法放入操作栏中，所以我正在创建自定义视图和布局。我正在尝试匹配 hte Action Bar 的配色方案，但我无法弄清楚 Action Bar 的默认 Android.R.Color 是什么。

我已经设置了自定义视图的布局，如图所示。light_gray 似乎没有内置颜色，也没有任何指示菜单或操作栏默认颜色的颜色。

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="rectangle" >
   <solid android:color="@android:color/darker_gray" />
   <stroke android:width="1dip" android:color="#333333"/>
</shape> 
```

![上下差异截图](../Images/35e32f88d7a6fda91f7d1b036453fbb0.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T17:16:08.350

您可以通过查看`styles.xml`您的 android SDK 平台文件夹来检查所有样式。例如，

`<your-sdk-dir>/platforms/android-16/data/res/values/styles.xml`

查看 API 级别 16，这就是我所看到的，

```
<style name="Widget.ActionBar">
    <item name="android:background">@android:drawable/action_bar_background</item>
    ... 
```

如果该资源不是公开的，最好的办法是将操作栏背景和页脚背景设置为您定义的内容。您可以通过在您的主题中创建主题`styles.xml`并覆盖操作栏样式来做到这一点，

```
<style name="Theme" parent="@android:style/Theme.Holo.Light">
    <item name="android:actionBarStyle">@style/ActionBar</item>
</style> 
```

现在创建实际的操作栏样式，

```
<style name="ActionBar" parent="android:style/Widget.Holo.Light.ActionBar">
    <item name="android:background">@drawable/my_background</item>
</style> 
```

现在将此样式分配给您的应用程序，

```
<application
    ...   
    android:theme="@style/Theme" >
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-23T21:33:06.310

我发现自己正在寻找 xml 文件中的颜色值。我找不到它。最后，最愚蠢的想法是最好的：

在 gimp 中打印模拟器和颜色选择器的屏幕。这完全符合我一直在寻找的颜色。

对我来说，这个答案真的很愚蠢。然而，在一天结束的时候，我已经能够非常迅速地找到价值。

# c++ - 在 C++ 中解析 FTP LIST 回复

> ID：12824667
> 
> 赞同：1
> 
> 时间：2012-10-10T17:03:51.373
> 
> 标签：c++, parsing, ftp, libcurl, ls

我未能成功解析来自 libCurl FTP 列表的以下回复。

```
ftplister = fopen("ftp-full-list", "wb"); /* b is binary, needed on win32 */ 

  curl = curl_easy_init();
  if(curl) {
    /* Get a file listing from sunet */ 
    curl_easy_setopt(curl, CURLOPT_URL, furl.c_str() );
    curl_easy_setopt(curl, CURLOPT_USERPWD, usrpwd.c_str());

    curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, &write_flist);
    curl_easy_setopt(curl, CURLOPT_WRITEDATA, ftplister);

    res = curl_easy_perform(curl);
    /* Check for errors */ 
    if(res != CURLE_OK)
      fprintf(stderr, "curl_easy_perform() failed: %s\n",
              curl_easy_strerror(res));

    /* always cleanup */ 
    curl_easy_cleanup(curl);
  }

  fclose(ftplister); /* close the local file */   
} 
```

write_flist 是

```
size_t  semperCloudBackup::write_flist(void *ptr, size_t size, size_t nmemb, void *stream)
{
   FILE *writehere = (FILE *)stream;
  return fwrite(ptr, size, nmemb, writehere);
} 
```

给我一个如下所示的输出

```
03-26-07  05:23AM       <DIR>          html
03-26-07  04:27AM       <DIR>          laptop
03-26-07  03:16AM       <DIR>          images
03-27-07  11:00PM                 6397 index.html
03-26-07  03:45AM                10186 index1.html 
```

我必须 1\. 查找它是目录还是文件 2\. 将文件与其大小一起存储（我猜是在一个数组中）以对大小进行一些计算。3.分别存放目录名

任何帮助将不胜感激，这里是新手。谢谢

经过大量搜索，我想我在 perl 中找到了一些东西，但我想在 C++ 中找到它

```
#!/usr/bin/perl
use warnings;
use strict;

while(<DATA>) {
    chomp;
    my @elements = split /\s+/, $_;
    if ( $elements[2] eq '<DIR>' ) {
        print "Directory: ",$elements[3], "\n";
    }
    else {
        print "The size of $elements[3] is $elements[2] bytes.\n";
    }
}

__DATA__
03-26-07  05:23AM       <DIR>          html
03-26-07  04:27AM       <DIR>          ibm-laptop
03-26-07  03:16AM       <DIR>          images
03-27-07  11:00PM                 6397 index.html
03-26-07  03:45AM                10186 index1.html 
```

我还发现了这个[ftpparse](http://cr.yp.to/ftpparse.html)

要单独阅读每一行（尽管没有完全使用），我使用了以下内容：

```
#include <fstream>
#include <iostream>
#include <string>

using namespace std;

int main() {
      // a string to store line of text
      string textLine;
      // try to open a file
      ifstream ifs("sample_file.txt", ifstream::in);
      if (ifs.good())   { // if opening is successful
            // while file has lines
            while (!ifs.eof()) {
                  // read line of text
                  getline(ifs, textLine);
                  // print it to the console
                  cout << textLine << endl;
            }
            // close the file
            ifs.close();
      } else
            // otherwise print a message
            cout << "ERROR: can't open file." << endl;

      return 0;
} 
```

# android - 在谷歌地图视图上获取用户当前位置

> ID：12824669
> 
> 赞同：0
> 
> 时间：2012-10-10T17:03:54.687
> 
> 标签：android, google-maps, api-key, currentlocation

嗨，我一直在尝试获取并查明手机的位置（用户当前位置），但是我没有运气。我希望有人可以帮助我编写代码。

只是为了添加更多内容，我收到“无法获取连接工厂客户端”错误。这是否与返回用户位置的能力有关？

如果有帮助，我一直在关注 thenewboston 的教程。

还是这与我的 API 密钥有关？但我可以正常接收地图，但无法精确定位用户当前位置

* * *

主要代码：

```
public class Map extends MapActivity implements LocationListener{

MapView map;
long start;
long stop;
MyLocationOverlay compass;
MapController controller;
int x,y;
GeoPoint touchedPoint;
Drawable d;
List<Overlay> overlayList;

LocationManager lm;
LocationListener ll;
String towers;
int lat = 0;
int longi = 0;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_map);
    map = (MapView)findViewById(R.id.mapview);
    map.setBuiltInZoomControls(true);

    touch t = new touch();
    overlayList = map.getOverlays();
    overlayList.add(t);
    compass = new MyLocationOverlay(Map.this, map);
    overlayList.add(compass);
    controller = map.getController();
    GeoPoint point = new GeoPoint(832332,4121093);
    controller.animateTo(point);
    controller.setZoom(8);

    d = getResources().getDrawable(R.drawable.pointer);

    //placing location
    lm =(LocationManager) getSystemService(Context.LOCATION_SERVICE);

    Criteria crit = new Criteria();
    towers = lm.getBestProvider(crit, false);
    Location loc = lm.getLastKnownLocation(towers);

    if(loc != null){
        lat = (int) (loc.getLatitude() *1E6);
        longi = (int)(loc.getLongitude()*1E6);
        GeoPoint location = new GeoPoint(lat, longi);
        OverlayItem overlayitem = new OverlayItem(location , "wassup", "2nd string");
        CustomPinPoint custom = new CustomPinPoint(d, Map.this);
        custom.insertPinPoint(overlayitem);
        overlayList.add(custom);

    }else{
        Toast.makeText(Map.this, "Location is null", Toast.LENGTH_LONG).show();
        lm.requestLocationUpdates(towers, 1500, 1, this);
    }

}

@Override
protected void onPause() {
    // TODO Auto-generated method stub
    compass.disableCompass();
    super.onPause();
    lm.removeUpdates(this);
}

@Override
protected void onResume() {
    // TODO Auto-generated method stub
    compass.enableCompass();
    super.onResume();
    lm.requestLocationUpdates(towers, 500, 1, this);

 } 
```

我认为您可以忽略警报对话框

```
public class touch extends Overlay {

    public boolean onTouchEvent(MotionEvent e, MapView m){
        if(e.getAction()== MotionEvent.ACTION_DOWN){
            start = e.getEventTime();
            x = (int) e.getX();
            y = (int) e.getY();
            touchedPoint = map.getProjection().fromPixels(x, y);

        }
        if(e.getAction()== MotionEvent.ACTION_UP){
            stop = e.getEventTime();
        }
        if(stop-start >1200){
            AlertDialog alert = new AlertDialog.Builder(Map.this).create();
            alert.setTitle("Option");
            alert.setMessage("Pick the option");
            alert.setCanceledOnTouchOutside(true);
            alert.setButton("Place pointer pinpoint", 
                    new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {
                    // TODO Auto-generated method stub

                    OverlayItem overlayitem = new OverlayItem(touchedPoint , "wassup", "2nd string");
                    CustomPinPoint custom = new CustomPinPoint(d, Map.this);
                    custom.insertPinPoint(overlayitem);
                    overlayList.add(custom);

                }
            });

            alert.setButton2("Get address", 
                    new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {
                    // TODO Auto-generated method stub

                    Geocoder geocoder = new Geocoder(getBaseContext(), Locale.getDefault());
                        try{
                            List<Address> address = geocoder.getFromLocation(touchedPoint.getLatitudeE6()
                                    /1E6, touchedPoint.getLongitudeE6() /1E6, 1);

                            if (address.size()>0){
                                String display = "";

                                for(int i=0 ; i<address.get(0).getMaxAddressLineIndex(); i++){
                                    display +=address.get(0).getAddressLine(i) + "\n";
                                }
                                Toast t = Toast.makeText(getBaseContext(), display, Toast.LENGTH_LONG);
                                t.show();
                            }
                        } catch (IOException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }finally{

                        }
                }
            });

            alert.setButton3("Toggle View", 
                    new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {
                    // TODO Auto-generated method stub

                    if(map.isSatellite()){
                        map.setSatellite(false);
                        map.setStreetView(true);
                    }else{
                        map.setStreetView(false);
                        map.setSatellite(true);
                    }

                }
            });

            alert.show();
            return true;

        }
        return false;

    }

}

@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_map, menu);
    return true;
}

@Override
public void onLocationChanged(Location l) {
    // TODO Auto-generated method stub
    lat = (int)(l.getLatitude()*1E6);
    longi = (int)(l.getLongitude()*1E6);
    GeoPoint location = new GeoPoint(lat, longi);
    OverlayItem overlayitem = new OverlayItem(location , "wassup", "2nd string");
    CustomPinPoint custom = new CustomPinPoint(d, Map.this);
    custom.insertPinPoint(overlayitem);
    overlayList.add(custom);

}

@Override
public void onProviderDisabled(String provider) {
    // TODO Auto-generated method stub

}

@Override
public void onProviderEnabled(String provider) {
    // TODO Auto-generated method stub

}

@Override
public void onStatusChanged(String provider, int status, Bundle extras) {
    // TODO Auto-generated method stub

}

 } 
```

* * *

CustomPinPoint 代码：

```
public class CustomPinPoint extends ItemizedOverlay<OverlayItem> {

private ArrayList<OverlayItem> pinpoints = new ArrayList<OverlayItem>();
private Context c;

//  tesst google code
public CustomPinPoint(Drawable defaultMarker) {
    super(boundCenterBottom(defaultMarker));
    // TODO Auto-generated constructor stub
}

public CustomPinPoint(Drawable defaultMarker, Context context) {
    // TODO Auto-generated constructor stub
    this(defaultMarker);  //original code

}

@Override
protected OverlayItem createItem(int i) {
    // TODO Auto-generated method stub
    return pinpoints.get(i);

}

@Override
public int size() {
    // TODO Auto-generated method stub
    return pinpoints.size();
}

public void insertPinPoint(OverlayItem item){
    pinpoints.add(item);
//  this.populate(); //  original code
//  test code
    populate();
}

@Override
protected boolean onTap(int index){
    OverlayItem item = pinpoints.get(index);
    AlertDialog.Builder dialog = new AlertDialog.Builder(c);
    dialog.setTitle(item.getTitle());
    dialog.setMessage(item.getSnippet());
    dialog.show();
    return true;

}

public void addOverlay(OverlayItem overlay) {
    // TODO Auto-generated method stub
    pinpoints.add(overlay);
    populate();
}

    } 
```

* * *

XML 代码：

```
 <com.google.android.maps.MapView xmlns:android="http://schemas.android.com/apk/res/android"
             xmlns:tools="http://schemas.android.com/tools"
             android:id="@+id/mapview"
             android:enabled="true"
             android:clickable="true"
             android:layout_width="fill_parent"
             android:layout_height="fill_parent"
             android:apiKey="0t9rHfGlUPgisa8P9MRAsSxhRXTVCL0XJog7uiA"
             /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T17:15:19.710

这是如何轻松做到这一点的示例，尝试将此逻辑实现到您的项目中：

```
public class MyMapActivity extends MapActivity {
private MapView map;
private MapController controller;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.mymap);
    initMapView();
    initMyLocation();

            map.invalidate();
}

    private void initMapView() {
    map = (MapView) findViewById(R.id.map);
    controller = map.getController();
    map.setSatellite(true);
    map.setBuiltInZoomControls(true);
}
private void initMyLocation() {
    final MyLocationOverlay overlay = new MyLocationOverlay(this, map);
    overlay.enableMyLocation();
    //overlay.enableCompass(); // does not work in emulator
    overlay.runOnFirstFix(new Runnable() {
        public void run() {
            // Zoom in to current location
            controller.setZoom(15);
            controller.animateTo(overlay.getMyLocation());
    }});
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T03:24:49.617

好吧，这很尴尬，事实证明我的代码是正确的，问题是设备的 GPS 没有打开。好吧，我希望我的代码可以帮助任何有需要的人。干杯!

# xml - xml文件中的python3文本争论

> ID：12824674
> 
> 赞同：0
> 
> 时间：2012-10-10T17:04:05.043
> 
> 标签：xml, python-3.x

尝试以解析简单文本文件的方式解析 XML 文件。在我看过的大多数教程中，他们讨论了元素等。有没有办法对它进行排序并找到关键字等，例如，如果我想找到 UUID 部分或任何包含“CLOUDATLAS_FTR-1_S_EN”的行-" 当您打开一个 XML 文件时，这究竟是如何变化的？

```
<?xml version="1.0" encoding="UTF-8" standalone="no" ?><DCinemaSecurityMessage xmlns="http://www.smpte-ra.org/schemas/430-3/2006/ETM" xmlns:dsig="http://www.w3.org/2000/09/xmldsig#" xmlns:enc="http://www.w3.org/2001/04/xmlenc#">
  <!-- Generated by Waimea 0.4.28l (wlib 0.9.53) -->
  <AuthenticatedPublic Id="ID_AuthenticatedPublic">
    <MessageId>urn:uuid:0bb31789-de90-4e17-859b-dc771ff97280</MessageId>
    <MessageType>http://www.smpte-ra.org/430-1/2006/KDM#kdm-key-type</MessageType>
    <AnnotationText>CLOUDATLAS_FTR-1_S_EN-EN_51_PRE_2K_20120830_ADC_OV ~ KDM for SM.Dolby256-DSP100-000004d8</AnnotationText>
    <IssueDate>2012-09-28T17:39:53+00:00</IssueDate>
    <Signer>
      <dsig:X509IssuerName>dnQualifier=G4c6KCUZh7AzcyJnMCXbf9GAfAA=,CN=.cc-wm-2336-000020,OU=.cc-ra-1a.s430-2.ca.cinecert.com,O=.ca.cinecert.com</dsig:X509IssuerName>
      <dsig:X509SerialNumber>61638</dsig:X509SerialNumber>
    </Signer>
    <RequiredExtensions>
      <KDMRequiredExtensions xmlns="http://www.smpte-ra.org/schemas/430-1/2006/KDM">
        <Recipient>
          <X509IssuerSerial>
            <dsig:X509IssuerName>dnQualifier=GCx2vAlHzkdwGCcO8/RwVow0PAo=,CN=.Cinea.CA.1,O=DC256.Cinea.Com,OU=CA1.DC256.Cinea.Com</dsig:X509IssuerName>
            <dsig:X509SerialNumber>1804</dsig:X509SerialNumber>
          </X509IssuerSerial>
          <X509SubjectName>dnQualifier=fz7SARXDJebOMN2832Kl0EfA4sg=,CN=SM.Dolby256-DSP100-000004d8,O=DC256.Cinea.Com,OU=DolbyShowPlayer</X509SubjectName>
        </Recipient>
        <CompositionPlaylistId>urn:uuid:194c16b9-f8ea-4d3c-9cc2-f9db651da636</CompositionPlaylistId>
        <ContentTitleText>CLOUDATLAS_FTR-1_S_EN-EN_51_PRE_2K_20120830_ADC_OV</ContentTitleText>
        <ContentKeysNotValidBefore>2012-09-28T07:00:00+00:00</ContentKeysNotValidBefore>
        <ContentKeysNotValidAfter>2012-11-16T05:59:00+00:00</ContentKeysNotValidAfter>
        <AuthorizedDeviceInfo>
          <DeviceListIdentifier>urn:uuid:12476d40-2f3f-4166-9013-fd6bfebf2b8a</DeviceListIdentifier>
          <DeviceList>
            <CertificateThumbprint>2jmj7l5rSw0yVb/vlWAYkK/YBwk=</CertificateThumbprint>
          </DeviceList>
        </AuthorizedDeviceInfo>
        <KeyIdList>
          <TypedKeyId>
            <KeyType>MDIK</KeyType>
            <KeyId>urn:uuid:5526f829-2e64-47db-acc4-7b3c092b4ebe</KeyId>
          </TypedKeyId>
          <TypedKeyId>
            <KeyType>MDAK</KeyType>
            <KeyId>urn:uuid:d87ed6e1-2b26-44c3-b338-fb82a65aaf5c</KeyId>
          </TypedKeyId>
          <TypedKeyId>
            <KeyType>MDIK</KeyType>
            <KeyId>urn:uuid:9d922467-7656-405e-87c1-c1e4957d3afe</KeyId>
          </TypedKeyId>
          <TypedKeyId>
            <KeyType>MDAK</KeyType>
            <KeyId>urn:uuid:8bf4778f-3582-4cfa-bb32-b35b699f0598</KeyId>
          </TypedKeyId>
          <TypedKeyId>
            <KeyType>MDIK</KeyType>
            <KeyId>urn:uuid:6316d846-26dc-4538-9994-8467ed76dea4</KeyId>
          </TypedKeyId>
          <TypedKeyId>
            <KeyType>MDAK</KeyType>
            <KeyId>urn:uuid:810b65bf-73aa-4728-9b1c-fb3a90df188d</KeyId>
          </TypedKeyId>
          <TypedKeyId>
            <KeyType>MDIK</KeyType>
            <KeyId>urn:uuid:2fe19612-b9a3-4819-ab1d-ddd9ac006319</KeyId>
          </TypedKeyId>
          <TypedKeyId>
            <KeyType>MDAK</KeyType>
            <KeyId>urn:uuid:1b703c28-d578-46c6-bca4-04c2741ad27e</KeyId>
          </TypedKeyId>
          <TypedKeyId>
            <KeyType>MDIK</KeyType>
            <KeyId>urn:uuid:1b6d67b6-e0eb-4715-97d6-11340aa3615a</KeyId>
          </TypedKeyId>
          <TypedKeyId>
            <KeyType>MDAK</KeyType>
            <KeyId>urn:uuid:73041ad7-47e3-459c-a554-2663e44916db</KeyId>
          </TypedKeyId>
          <TypedKeyId>
            <KeyType>MDIK</KeyType>
            <KeyId>urn:uuid:d57cfd00-6787-4566-8bf0-09374103953a</KeyId>
          </TypedKeyId>
          <TypedKeyId>
            <KeyType>MDAK</KeyType>
            <KeyId>urn:uuid:9caa3533-2395-4f53-8b4c-b8c801ee595c</KeyId>
          </TypedKeyId>
          <TypedKeyId>
            <KeyType>MDIK</KeyType>
            <KeyId>urn:uuid:db40255f-9ea2-47ce-a5ab-c825fd6a466d</KeyId>
          </TypedKeyId>
          <TypedKeyId>
            <KeyType>MDAK</KeyType>
            <KeyId>urn:uuid:06bc0f21-ae6b-43cd-8c7d-e8fbc0347d50</KeyId>
          </TypedKeyId>
          <TypedKeyId>
            <KeyType>MDIK</KeyType>
            <KeyId>urn:uuid:64f9da4f-91cf-4b2a-bb13-d95315351475</KeyId>
          </TypedKeyId>
          <TypedKeyId>
            <KeyType>MDAK</KeyType>
            <KeyId>urn:uuid:969330d5-fa3b-479a-b901-43d406d16400</KeyId>
          </TypedKeyId>
          <TypedKeyId>
            <KeyType>MDIK</KeyType>
            <KeyId>urn:uuid:c3aadc36-a395-4c34-a7ac-e1ec1c69df66</KeyId>
          </TypedKeyId>
          <TypedKeyId>
            <KeyType>MDAK</KeyType>
            <KeyId>urn:uuid:19746f06-1c00-4575-9ba0-7b13b6058a0d</KeyId>
          </TypedKeyId>
        </KeyIdList>
      </KDMRequiredExtensions>
    </RequiredExtensions>
    <NonCriticalExtensions/>
  </AuthenticatedPublic>
  <AuthenticatedPrivate Id="ID_AuthenticatedPrivate"><enc:EncryptedKey xmlns:enc="http://www.w3.org/2001/04/xmlenc#">
<enc:EncryptionMethod Algorithm="http://www.w3.org/2001/04/xmlenc#rsa-oaep-mgf1p">
<ds:DigestMethod xmlns:ds="http://www.w3.org/2000/09/xmldsig#" Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
</enc:EncryptionMethod>
<enc:CipherData> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T17:45:02.233

通常，您会希望使用 XML 解析器，但对于简单的情况，您可以使用正则表达式来捕获您所需要的数据。

例如：

```
import re
file = open(r'xmlfile.xml')
data = file.read()
file.close()
for uuid in re.findall('uuid:([a-z1-9-]+)<', data, re.DOTALL):
    print uuid 
```

这应该为您提供基本方法，以便您可以扩展相同的想法以相当容易地获得您提到的其他数据。

# callback - HTTP 回调与消息传递的优缺点是什么？

> ID：12824676
> 
> 赞同：3
> 
> 时间：2012-10-10T17:04:17.940
> 
> 标签：callback, publish-subscribe, message-passing

我们正在寻求开发一些服务，但不确定哪种“响应”机制是最佳途径。两个竞争者是：

1.  **HTTP 回调**，服务将通过使用通过 HTTP 请求发送的更新消息“ping”客户端应用程序来更新客户端应用程序
2.  **消息传递**，服务将通过将消息发布到消息服务器上的发布-订阅队列来更新客户端

在这两种情况下，调用者和服务都在我们的网络中，我们可以完全控制它们，我们开发的东西是服务的唯一用户。

*向调用应用程序提供状态更新的每种方式的优点/缺点是什么，如果有的话，通过一种方法或另一种方法发出初始请求有什么优点/缺点？*

[注意：我们为此想到的第一个服务是类似于 SendGrid 的电子邮件服务，由于各种原因我们不能使用它，但仍然需要相同的功能。]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T01:34:50.520

主要区别在于您使用消息传递服务器“开箱即用”的服务质量。

如果您使用 HTTP，那么您的应用程序必须处理消息未按预期到达时会发生什么。要了解您需要考虑的问题以及解决这些问题所涉及的复杂性，请查看[WS-ReliableMessaging](http://en.wikipedia.org/wiki/WS-ReliableMessaging)或[HTTPLR](http://www.dehora.net/doc/httplr/draft-httplr-01.html)。

通过消息传递，您可以获得开箱即用的可配置级别的可靠性。现在有很多不错的选择，例如 ActiveMQ、RabbitMQ、0MQ。

我个人的偏好是在传输层（通过消息传递）处理可靠性，但是为了进行良好的讨论和不同的观点，请查看“[没有人需要可靠的消息传递](http://www.infoq.com/articles/no-reliable-messaging)” 。

# php - 捕获 PDO 致命错误并抛出异常

> ID：12824678
> 
> 赞同：2
> 
> 时间：2012-10-10T17:04:20.223
> 
> 标签：php, mysql, exception, pdo

我在我的 PHP 应用程序中使用 PDO MySQL 驱动程序，在我的一个模型中，我有这个：

```
public function getAllUsers() {
    $this->st = $this->db->query('SELECT name FROM users');
    $this->st->setFetchMode(PDO::FETCH_OBJ);
    $users = array();
    while($row = $this->st->fetch()) {
        array_push($users, $row->name);
    }

    return $users;
} 
```

`$this->db`是从父类继承的数据库句柄。问题是，如果由于某种原因`$this->db`不是有效的数据库对象，我会收到此致命错误：

> 在非对象上调用成员函数 query()

这是意料之中的，但为了让我的最终用户更容易，我不想让他们将方法包装在 try-catch 块中或进行任何错误检查，我想知道如何捕获该致命错误和而是抛出异常（整个应用程序都使用异常）。

是否有某种 PDO 选项使其仅在此类情况下抛出异常？

编辑：重新阅读，我应该补充一点，我有很多代码包装在继承树中的 try-catch 块中，所以如果这产生异常而不是致命错误，我将能够捕获它并终止优雅地应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T17:14:22.837

您可以强制 PDO 抛出异常

```
$db = new PDO($dsn, $user, $pass, array(
    PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION,
); 
```

但我认为这对您的情况没有帮助，因为它与`PDO`它无关，只是`null`对象问题。

你正在尝试做的是相当于这个

```
$a = null;
$a->query(); 
```

# windows - Windows Phone - 动态磁贴返回主屏幕

> ID：12824679
> 
> 赞同：1
> 
> 时间：2012-10-10T17:04:25.227
> 
> 标签：windows, mobile, live, tile

有谁知道在创建辅助磁贴时抑制自动返回主屏幕的方法？我想在后台创建它并留在应用程序中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T03:58:09.263

对不起，你不能。您可以弹出一个消息框，告诉用户定位磁贴，然后按后退按钮返回您的应用程序。但这就是你所能做的。

我有一个制作两个瓷砖的应用程序，我尝试并尝试在后台进行这项工作。

# ios - 学习 Cocos2D 书籍过时的场景

> ID：12824680
> 
> 赞同：1
> 
> 时间：2012-10-10T17:04:28.570
> 
> 标签：ios, cocos2d-iphone

我正在尝试从学习 Cocos2D 中学习 Cocos2D，Rod Strougo 和 Ray Wenderlich 的动手指南，但它使用的是 Cocos 1，而不是现在推出的 2。我想这本书稍后仍然适用，但在第一章中我遇到了一个问题，告诉导演运行一个场景，因为在 Cocos2D 2 中，整个过程现在似乎不同了。

我宁愿不必买另一本书，所以我希望改变运行场景的方式相当简单。

这就是这本书所说的：

找到 -applicationDidFinishLaunching 方法并注释掉：

```
 [[CCDirector sharedDirector]runWithScene: [HelloWorld scene]]; 
```

并添加：

```
[[CCDirector sharedDirector]runWithScene:[GameScene node]]; 
```

我在 AppDelegate 中找不到任何类似的东西，但看起来这与新方法有关：

```
[director_ pushScene: [IntroLayer scene]]; 
```

到目前为止，我尝试将教程所说的内容适应新方式的尝试都失败了，但也许这是一个简单的解决方法。

以防它是过时的 GameScene：
GameScene.h

```
#import <Foundation/Foundation.h>
#import "cocos2d.h"
#import "BackgroundLayer.h"
#import "GameplayLayer.h"
#import "CCScene.h"

@interface GameScene : CCScene
{

}
@end 
```

游戏场景.m

```
@implementation GameScene

-(id)init
{
    self = [super init];
    if (self != nil)
    {
        BackgroundLayer *backgroundLayer = [BackgroundLayer node];
        [self addChild:backgroundLayer z:0];
        GameplayLayer *gameplayLayer = [GameplayLayer node];
        [self addChild:gameplayLayer z:5];
    }
    return self;
}
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T03:47:37.517

您遇到的问题是类方法 +scene。这用于在图层中创建场景而不是初始化场景并让该实例创建自己的子图层。当您深入了解场景 -> 层关系时，您将在本书后面了解这些差异。

在 -applicationDidFinishLaunching 中注释掉`[director_ pushScene: [IntroLayer scene]];`并将其替换为以下内容：

`[director_ pushScene:[GameScene node]];`

这*应该*可以满足您的需求。它将创建一个 GameScene 实例（CCScene 的子类），其中您的两个 CCLayer 子类实例作为孩子，它们是您在 GameScene -init 方法中实例化的 backgroundLayer 和 gameLayer。

如果您对为什么调用`[GameScene scene]`对您不起作用感到好奇，那是因为您从未在界面中声明过这样的方法。这有点令人困惑，但基本上你会创建一个 CCLayer 的 Game **Layer**子类，并在你的 .h 文件中声明这个类方法：

`+ (CCScene *)scene;`

在您的实现 .m 文件中，您可以这样定义该方法：

```
// Class initializer method
+ (CCScene *)scene {
    CCScene *scene = [CCScene node]; // Create a container scene instance
    GameLayer *gameLayer = [GameLayer node]; // Create an instance of the current layer class
    [scene addChild:gameLayer]; // Add new layer to container scene
    return scene; // Return ready-made scene and layer in one
} 
```

然后，当您调用`[GameLayer scene]`该 +scene 方法时，将为该图层创建场景并将其添加为子图层。它更快，但根据我的经验，多层可能会更麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T17:22:48.857

你有没有试过这个：

```
[[CCDirector sharedDirector] pushScene:[IntroLayer scene]]; 
```

# java - 使用 Java 中的算法更改绘图的角度/位置

> ID：12824684
> 
> 赞同：1
> 
> 时间：2012-10-10T17:04:44.280
> 
> 标签：java, swing, paintcomponent

您好，我很好奇如何解决这个问题：我用 Java 中的 fillArc、drawArc 方法创建了一个 pacman，现在我的屏幕上有一个 pacman 人，无论它朝哪个方向移动，它总是向右看.. 我的问题是..有没有办法在Java中逐步改变对象或水平翻转它？

我尝试使用 AffineTransform 但我没有得到我想要的文档......我应该如何使用 switch 语句来实现这一点？我尝试执行以下操作，但由于我不知道如何继续，我被困在这部分。

```
DrawPacMan pacman = new DrawPacMan();
DrawPacMan ghost1 = new DrawPacMan();
DrawPacMan ghost2 = new DrawPacMan();

AffineTransform pac = new AffineTransform();

public void setPacManView(int waarde) {
    // set the view of pacman
    switch (waarde) {
    case 0 :
        // here one view of pacman
        break;
    case 1 :
        // here one view of pacman
        break;
    case 2 :
        // here one view of pacman
        break;
    case 3 :
        // here one view of pacman
        break;

    }
}

public void paintComponent(Graphics g) {

    super.paintComponent(g);
    // pacman movement
    diameter = 75;  
    pacman.drawPacMan(g, getHorPlaats(), getVerPlaats(), diameter, Color.yellow);

    // ghosts movement
    int g1x;
    for(g1x = 0; g1x < 10; g1x++) {

        pacman.drawGhost(g, g1x, 40, diameter, Color.red);

    }
    pacman.drawGhost(g, 170, 70, diameter, Color.blue);

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T19:28:18.670

尝试类似...

![在此处输入图像描述](../Images/02808a4c456f4f5cd82f086fe5b1d3d4.png)

该演示旨在允许图像通过虚拟角度旋转（角度<0＆> 360），但基本概念是相同的......

```
public class TestFlipImage {

    protected static final String IMAGE_PATH = "/path/to/your/image";

    public static void main(String[] args) {
        new TestFlipImage();
    }

    public TestFlipImage() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());

                BufferedImage image = null;
                try {
                    image = ImageIO.read(new File(IMAGE_PATH));
                } catch (IOException ex) {
                }

                JPanel mainPane = new JPanel(new GridBagLayout());
                GridBagConstraints gbc = new GridBagConstraints();
                mainPane.add(new ImagePane(image, 0));
                mainPane.add(new ImagePane(image, 90));
                mainPane.add(new ImagePane(image, 180));

                frame.add(mainPane);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class ImagePane extends JPanel {

        private BufferedImage masterImage;
        private BufferedImage renderedImage;

        public ImagePane(BufferedImage image, int angle) {
            masterImage = image;
            applyRotation(angle);
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(renderedImage.getWidth(), renderedImage.getHeight());
        }

        @Override
        public Dimension getMinimumSize() {
            return getPreferredSize();
        }

        protected int getVirtualAngle(int angle) {
            float fRotations = (float) angle / 360f;
            int rotations = (int) (fRotations - (fRotations / 1000));

            int virtual = angle - (rotations * 360);

            if (virtual < 0) {
                virtual = 360 + virtual;
            }

            return virtual;
        }

        // The code is designed to rotate an image through 90 degree
        // angles, but it can handle angle's less then 0 and greater then
        // 360 degrees
        public void applyRotation(int angle) {
            // This will only work for angles of 90 degrees...

            // Normalize the angle to make sure it's only between 0-360 degrees
            int virtualAngle = getVirtualAngle(angle);
            Dimension size = new Dimension(masterImage.getWidth(), masterImage.getHeight());
            int masterWidth = masterImage.getWidth();
            int masterHeight = masterImage.getHeight();

            double x = 0; //masterWidth / 2.0;
            double y = 0; //masterHeight / 2.0;

            switch (virtualAngle) {
                case 0:
                    break;
                case 180:
                    break;
                case 90:
                case 270:
                    size = new Dimension(masterImage.getHeight(), masterImage.getWidth());
                    x = (masterHeight - masterWidth) / 2.0;
                    y = (masterWidth - masterHeight) / 2.0;
                    break;
            }
            renderedImage = new BufferedImage(size.width, size.height, masterImage.getTransparency());
            Graphics2D g2d = renderedImage.createGraphics();

            AffineTransform at = AffineTransform.getTranslateInstance(x, y);

            at.rotate(Math.toRadians(virtualAngle), masterWidth / 2.0, masterHeight / 2.0);
            g2d.drawImage(masterImage, at, null);

            g2d.dispose();
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);

            Graphics2D g2d = (Graphics2D) g;
            int width = getWidth() - 1;
            int height = getHeight() - 1;

            int x = (width - renderedImage.getWidth()) / 2;
            int y = (height - renderedImage.getHeight()) / 2;

            g2d.drawImage(renderedImage, x, y, this);
        }
    }
} 
```

**额外的**

您可能还想看看[AffineTransform.rotate() - 我如何同时 xlate、旋转和缩放？](https://stackoverflow.com/questions/11911610/affinetransform-rotate-how-do-i-xlate-rotate-and-scale-at-the-same-time/11911758#11911758)wch 讨论了一种在水平和垂直轴上翻转图像的方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T17:15:08.443

是 Swing/AWT 吗？如果是，[AffineTransform](http://docs.oracle.com/javase/6/docs/api/java/awt/geom/AffineTransform.html)可能就是您正在寻找的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T17:56:47.750

鉴于您只有 4 张图片。我建议在paint/gimp/photoshop 中创建 4 个 jpg，然后将它们加载到您的程序中；

```
BufferedImage pacUp = ImageIO.read(new File("./images/pac_up.jpg"));
BufferedImage pacDown = ImageIO.read(new File("./images/pac_down.jpg"));
//etc 
```

然后你的绘图开关看起来像（假设一个`Graphics`对象`g`）；

```
switch(direction) {
    case 0: g.drawImage(pacUp, x, y, null);
    case 1: g.drawImage(pacDown, x, y, null);
    case 2: g.drawImage(pacLeft, x, y, null);
    case 3: g.drawImage(pacRight, x, y, null);
} 
```

# prolog - Prolog计算排列

> ID：12824685
> 
> 赞同：4
> 
> 时间：2012-10-10T17:04:45.577
> 
> 标签：prolog

我正在写一个置换函数 [a,b]-->[[[a], [b]], [[a, b]]

到目前为止我有这个，但它不起作用。

```
perm([],[]).
perm(L,[H|T]) :- append(V,[H|U],L), append(V,U,W), perm(W,T). 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T00:42:21.117

鉴于您的示例，看起来您实际上可能想要给定列表的[*powerset*](http://en.wikipedia.org/wiki/Power_set)，而不是*permutation 。*

例如，幂集`[a,b]`是集合 { `[a,b]`, `[a]`, `[b]`, `[]`}。

要计算 Prolog 中项目列表的幂集，请查看@gusbro 的[这个答案](https://stackoverflow.com/a/4146427/206428)。如果这对您有帮助，也请支持该答案。

如果您想要一次列表的 powerset 的所有解决方案`L`，您可以将调用包装到这样`powerset/2`的`findall/3`调用中：

```
?- findall(S, powerset(L, S), Ss). 
```

另一方面，如果您在*分区*之后（正如您在之前的编辑中提到的那样），请考虑以下事项：

```
partition(L, PL) :-
    partition(L, [], PL).

partition([], [], []).
partition([X|Xs], As, R) :-
    % add X into the new partition... 
    append(As, [X], NewAs),  
    partition(Xs, NewAs, R).
partition(L, [A|As], [[A|As]|R]) :-
    % ...or, collect the current non-empty partition
    partition(L, [], R). 
```

`partition/2`正如您所描述的，谓词接受一个列表并返回所有分区。例如：

```
?- partition([a,b,c],L).
L = [[a, b, c]] ;
L = [[a, b], [c]] ;
L = [[a], [b, c]] ;
L = [[a], [b], [c]] ;
false. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T20:29:55.297

真的吗？它似乎在 SWI-Prolog 中工作：

```
?- [user].
|: perm([],[]).
|: perm(L,[H|T]) :- append(V,[H|U],L), append(V,U,W), perm(W,T).
|: % user://1 compiled 0.00 sec, 3 clauses
true.

?- perm([a,b,c], X).
X = [a, b, c] ;
X = [a, c, b] ;
X = [b, a, c] ;
X = [b, c, a] ;
X = [c, a, b] ;
X = [c, b, a] ;
false.

?- perm([a,b,c,d], X).
X = [a, b, c, d] ;
/* trimming 22 solutions */
X = [d, c, b, a] ;
false. 
```

这也会产生您期望的答案数量：3！= 6、4！= 24\. 什么不适合你？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T21:22:32.523

快速说明：Prolog 不提供*函数*，但提供*关系*。

在这种情况下，当参数是另一个的排列时， perm/2 将成立。

我发现这个定义比你的更具可读性。

```
perm([], []).
perm([E|Es], P) :-
    perm(Es, Q),
    select(E, P, Q). 
```

[和permutation](http://www.swi-prolog.org/pldoc/doc_for?object=permutation/2) /2 SWI-Prolog差不多，但是隐藏了一个 bug……

# asp.net - 一般想法如何突出显示菜单中选定的父项（使用 ListView）

> ID：12824686
> 
> 赞同：0
> 
> 时间：2012-10-10T17:04:46.557
> 
> 标签：asp.net, listview, menu

所以我有一个包含菜单信息的分层数据源......我将它数据绑定到 ListView 并使用 CSS 将其格式化为菜单......一切都很好......现在下一步我似乎无法理解。 .

如何突出显示（设置类

*   ) 刚刚选择的菜单项.. 它们只是链接.. 我是否应该以某种方式识别所单击内容的 ID，然后使用它以某种方式循环遍历..？

    这是我到目前为止所得到的，所以任何正确方向的提示都是好的。

    ```
     <asp:ListView ID="lvMainOuter" runat="server">
                            <LayoutTemplate>
                                <ul id="menunav" runat="server">
                                    <asp:PlaceHolder ID="itemPlaceHolder" runat="server" />
                                </ul>
                            </LayoutTemplate>
                            <ItemTemplate>
                                <li <%# (Container.DataItem as FigLeafMenuItem).ItemSelected == "true" ? @" class=""MainMenuSelected""" : @" class=""""" %>>
                                    <asp:HyperLink ID="nodeLink" runat="server" Text='<%# (Container.DataItem as FigLeafMenuItem).Name %>' NavigateUrl='<%# (Container.DataItem as FigLeafMenuItem).Url %>' />

                                    <asp:ListView ID="lvMainInner" DataSource="<%# (Container.DataItem as FigLeafMenuItem).Children %>" runat="server">
                                        <LayoutTemplate>
                                            <ul id="menunav" runat="server">
                                                <asp:PlaceHolder ID="itemPlaceHolder" runat="server" />
                                            </ul>
                                        </LayoutTemplate>
                                        <ItemTemplate>
                                            <li>
                                                <asp:HyperLink ID="nodeLink" runat="server" Text='<%# (Container.DataItem as FigLeafMenuItem).Name %>' NavigateUrl='<%# (Container.DataItem as FigLeafMenuItem).Url %>' />
                                            </li>
                                        </ItemTemplate>
                                    </asp:ListView>
                                </li>
                            </ItemTemplate>
                        </asp:ListView>
       public int SelectedMenuId { get; set; }

    protected void Page_Load(object sender, EventArgs e)
    {
        lvMainOuter.ItemDataBound += lvMainOuter_ItemDataBound;
        lvMainOuter.DataSource = new FigLeafMenu().GetFigLeafTopMenu();
        lvMainOuter.DataBind();

    }

    void lvMainOuter_ItemDataBound(object sender, ListViewItemEventArgs e)
    {
        if (e.Item.ItemType == ListViewItemType.DataItem)
        {
            ListViewDataItem dataItem = (ListViewDataItem)e.Item;
            //WHAT DO I DO NOW TO GET THE SELECTED ITEM AND ASSIGN IT A CLASS? 
        }
    } 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T19:16:56.170

Try this

```
 <asp:ListView ID="lvMainInner" DataSource="<%# (Container.DataItem as FigLeafMenuItem).Children %>"
        runat="server">
        <LayoutTemplate>
            <ul id="menunav" runat="server">
                <asp:PlaceHolder ID="itemPlaceHolder" runat="server" />
            </ul>
        </LayoutTemplate>
        <ItemTemplate>
            <li>
                <asp:HyperLink ID="nodeLink" runat="server" Text='<%# (Container.DataItem as FigLeafMenuItem).Name %>'
                    NavigateUrl='<%# (Container.DataItem as FigLeafMenuItem).Url %>' />
            </li>
        </ItemTemplate>
        <SelectedItemTemplate>
            <li>
                <asp:HyperLink ID="nodeLink" CssClass="MyHighlightClass" runat="server" Text='<%# (Container.DataItem as FigLeafMenuItem).Name %>'
                    NavigateUrl='<%# (Container.DataItem as FigLeafMenuItem).Url %>' />
            </li>
        </SelectedItemTemplate>
    </asp:ListView> 
```

or you could use codebehind ...

```
 lvMainInner.SelectedIndexChanged += (o, args) =>
            {
              //You can do whatever here
            }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T17:09:32.967

在您的超链接标记中，您可以将[CssClass](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.webcontrol.cssclass.aspx)设置为基于某些语句的条件语句，对吗？

# java - 对项目类中的元素进行排序

> ID：12824689
> 
> 赞同：-4
> 
> 时间：2012-10-10T17:04:58.587
> 
> 标签：java

我有一个`Item`类，其中`id`, `count`,`name`作为实例变量。我想根据计数对项目进行排序。请告诉我如何去做。我可以在我的项目类中定义任何方法来对项目进行排序？

下面是我的项目类

```
public class Item {

    private String id;
    private String count;
    private String name;

    Item() {
    }

    public String getcount() {
        return this.count;
    }

    public Item(String name) {
        this.name = name;
        this.id = "";

    }

    public Item(String id, String name) {
        this.name = name;
        this.id = id;

    }

    public Item(String id, String name,String count) {
        this.name = name;
        this.id = id;
        this.count=count;
    }

    public String getItemName() {
        return this.name;
    }

    public String getItemId() {
        return this.id;
    }

    public void createItem(String id, String name) {
        this.name = name;
        this.id = id;
    }

    public Item returnItems(ItemList itemset) {
        Item item = null;

        return item;
    }
} 
```

我也有一`ItemList`堂课，里面有物品。

```
public class ItemList implements Iterable<Item> {

    private List<Item> hold = new ArrayList<Item>();

    ItemList(Item item) {

        // hold = new ArrayList<Item>();
        this.hold.add(item);
    }

    ItemList() {
        //throw new UnsupportedOperationException("Not yet implemented");
    }

    public List<Item> getItemList() {
        return this.hold;

    }

    public void addItems(Item item) {
        //hold = new ArrayList<Item>();
        this.hold.add(item);
    }

    @Override
    public Iterator<Item> iterator() {
        Iterator<Item> item = hold.iterator();
        return item;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T17:08:38.990

实现 Comparable 接口并编写排序逻辑。

```
 public class Item implements Comparable<Item>{
      private String id;
      private String count;
      private String name;

      Item() {}
      ...    
      public int compareTo(Item item1) {
        return this.count.compareTo(item1.count);
      }   
    } 
```

现在您可以按 或 对您的列表或数组进行`Collections#sort`排序`Arrays#sort`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T17:06:20.063

您需要实现 Comparable 接口。

请参阅[http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html](http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T17:07:21.970

你的类应该实现[Comparable](http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html)和[compareTo()](http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html#compareTo%28T%29)方法。这是一个[例子](http://www.javadeveloper.co.in/java-example/java-comparable-example.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T17:09:14.163

查看排序对象[的教程](http://docs.oracle.com/javase/tutorial/collections/interfaces/order.html)。

特别是，您应该决定是否需要：

1.  实现[Comparable](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)接口（用于*自然*排序 - 例如在正常排序的集合中）或
2.  编写自己的[比较](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)器（如果您要以多种不同方式排序，即在不同场景中按不同字段）

请注意，如果您愿意，两者都可以。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T17:09:22.343

**-**使用`java.lang.Comparable`界面，如果您只想以一种**方式**对其进行排序。

**-**使用`java.util.Comparator`界面，如果您想以**超过 1 种方式**对其进行排序。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-10T17:06:19.157

编写自定义比较器并使用

```
Collections.sort(collections, yourComparator); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-10-10T17:10:10.800

使用[`Collections#sort`](http://tinyurl.com/8err8ej)和一个`Comparator`：

```
List<Item> lstItem = new ArrayList<Item>();
//fill the data...
Comparator<Item> comparator = new Comparator<Item>() {
    public int compareTo(Item i1, Item i2) {
        return i1.count.compareTo(i2.count);
    }
};
Collections.sort(lstItem, comparator); 
```

# google-analytics - Google Analytics - 在同一次推送中发出多个命令，正确的命名空间

> ID：12824690
> 
> 赞同：0
> 
> 时间：2012-10-10T17:05:05.273
> 
> 标签：google-analytics

根据[GA docs](https://developers.google.com/analytics/devguides/collection/gajs/#MultipleCommands)，我可以通过一次推送发出多个命令，但是在他们的代码片段中，它们不作为第一个命名空间的前缀，而是在后续命名空间的前缀上加上字母“b”。我更喜欢一致性，所以我选择在第一个命名空间操作前加上字母“a”，如下所示：

```
['a._setAccount', 'UA-MYACCOUNT-1'],
['a._trackPageview'],
['b._setAccount', 'UA-MYACCOUNT-2'],
['b._trackPageview'] 
```

任何人都知道这样做是否有问题？还是我应该按照谷歌示例并删除“a”前缀“只是为了安全”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T20:28:03.210

我知道的唯一问题是，如果没有默认（未命名）跟踪器，您必须确保使用[_getTrackerByName()](https://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApi_gat#_gat._getTrackerByName)的可选名称参数。

如果您不这样做，将创建并返回一个新的默认跟踪器，这可能不是您所期望的。

# iis-6 - 如何让 .NET 4.5 网站在 IIS6 上运行？

> ID：12824695
> 
> 赞同：24
> 
> 时间：2012-10-10T17:05:22.173
> 
> 标签：iis-6, asp.net-mvc-4, windows-server-2003, .net-4.5

我有一台运行 IIS 6 的旧 Windows 2003 服务器，我为我最新的 Web 应用程序选择了 .net 4.5。问题是我无法让它在服务器上运行...

.NET 4.0 框架已安装。我已经运行 aspnet_regiis 并部署了网站。我给了它自己的应用程序池。但我收到以下错误：

```
The 'targetFramework' attribute in the <compilation> element of the Web.config 
file is used only to target version 4.0 and later of the .NET Framework (for 
example, '<compilation targetFramework="4.0">'). The 'targetFramework' attribute
currently references a version that is later than the installed version of the 
.NET Framework. Specify a valid target version of the .NET Framework, or install 
the required version of the .NET Framework. 
```

我看到 .NET 4.5 的要求需要 Windows Server 2008 或更高版本，但我看到很多人只需要为 MVC4 配置路由，所以看起来这应该是可能的。

那么我需要做什么才能使它起作用？

编辑：奇怪的是我们正在使用一个运行良好的 ASP.NET Web API 站点......但这应该需要 .net 4.5......

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-10-10T17:07:44.397

.Net 4.5 不能安装在 Windows Server 2003 上。

相反，您应该在 .Net 4.0 上使用 MVC 4.0，这样可以正常工作。

# android - 如何选择在 Eclipse 中显示的设备 LogCat？

> ID：12824702
> 
> 赞同：5
> 
> 时间：2012-10-10T17:05:50.270
> 
> 标签：android, eclipse, logcat

我正在使用 Eclipse 进行 Android 开发。我经常运行几个模拟器（和设备）来测试我的应用程序。

LogCat 神奇地从我刚刚启动应用程序的设备切换到日志。大多数时候这很好，但有时我想切换回不同的设备而不重新启动应用程序。

我不知道在哪里选择 LogCat 显示的设备。我在哪里可以更改它？

我在 OS X 上使用 Eclipse Juno，如果这有什么不同的话。这是我的 LogCat 窗口的样子： ![logcat 截图](../Images/cd9bddc14247ace90489aa42c998b9fa.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T17:08:55.100

去`Window -> Show View -> Devices`。

现在您将看到另一个设备选项卡，您可以在其中选择要在 LogCat 中查看的设备，以及在调试模式下该设备上正在运行的应用程序。

# c - #define 的数组格式（C 预处理器）

> ID：12824703
> 
> 赞同：15
> 
> 时间：2012-10-10T17:05:54.140
> 
> 标签：c, c-preprocessor

可能是一个幼稚的问题——我在 20 年前就开始编程，从那以后就很少编码了。从那以后，我对这些作品的记忆力`C preprocessor`大大萎缩了……

我正在编写一个非常简单的`C`程序，并且我正在尝试声明一些静态全局数组，但是它们的大小`arrays`将取决于（以非平凡的方式）一个`MODE`变量。类似于下面的简化示例。

两个要点：我知道我可以`arrays`根据 any 所需的最大尺寸来调整尺寸`MODE`，但我不想这样做，因为（与下面的简化示例不同）有时这些尺寸中的一小部分会非常大，而其他的很小。

另外，我想使用静态定义的全局数组——而不是在运行时动态分配它们。我希望编译器在编译时具有大小。

```
//** Simplified example of what I'd like to do **//    
#define SIZE_LIST_1[5] = {2, 7, 23, 33, 12, 76}  // I don't think this is valid syntax 
#define SIZE_LIST_2[5] = {11, 65, 222, 112, 444}

#define MODE 4
#define S1 SIZE_LIST_1[MODE]
#define S2 SIZE_LIST_2[MODE] 

int a[S1], b[S2]; 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-10T17:56:13.587

您需要先定义一堆帮助宏，然后才能以简单的方式执行此操作：

```
#define CONCAT(A,B)         A ## B
#define EXPAND_CONCAT(A,B)  CONCAT(A, B)

#define ARGN(N, LIST)       EXPAND_CONCAT(ARG_, N) LIST
#define ARG_0(A0, ...)      A0
#define ARG_1(A0, A1, ...)  A1
#define ARG_2(A0, A1, A2, ...)      A2
#define ARG_3(A0, A1, A2, A3, ...)  A3
#define ARG_4(A0, A1, A2, A3, A4, ...)      A4
#define ARG_5(A0, A1, A2, A3, A4, A5, ...)  A5
#define ARG_6(A0, A1, A2, A3, A4, A5, A6, ...)      A6
#define ARG_7(A0, A1, A2, A3, A4, A5, A6, A7, ...)  A7
#define ARG_8(A0, A1, A2, A3, A4, A5, A6, A7, A8, ...)      A8
#define ARG_9(A0, A1, A2, A3, A4, A5, A6, A7, A8, A9, ...)  A9
#define ARG_10(A0, A1, A2, A3, A4, A5, A6, A7, A8, A9, A10, ...)    A10

/* above should be in a pp_helper.h header file or some such */

#define SIZE_LIST_1 ( 2,  7,  23,  33,  12,   76)
#define SIZE_LIST_2 (11, 65, 222, 112, 444, 1000)

#define S1 ARGN(MODE, SIZE_LIST_1)
#define S2 ARGN(MODE, SIZE_LIST_2)

#define MODE 4

int a[S1], b[S2]; 
```

您可以使用样板代码（boost PP，P99）获得一堆预处理器“库”，或者您可以自己滚动。主要问题是您需要根据您想要处理的最大数量的参数来定义 ARG 宏。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-10T17:16:15.490

可能你能做的最好的事情是这样的：

```
#define SIZE_LIST_1_0 2
#define SIZE_LIST_1_1 7
#define SIZE_LIST_1_2 23
#define SIZE_LIST_1_3 33
#define SIZE_LIST_1_4 12

#define SIZE_LIST_2_0 11
#define SIZE_LIST_2_1 65
#define SIZE_LIST_2_2 222
#define SIZE_LIST_2_3 112
#define SIZE_LIST_2_4 444

#define MODE 4

#define S1 SIZE_LIST_1_##MODE
#define S2 SIZE_LIST_2_##MODE

int a[S1], b[S2]; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-10T17:26:55.153

恐怕没有这种可能。

我建议改用以下方法：

```
#define MODE 0

#define DECLARE_ARRAYS_WITH_SIZES(S1, S2, S3) \
    int arr1[S1]; \
    int arr2[S2]; \
    int arr3[S3];

#if MODE == 0
DECLARE_ARRAYS_WITH_SIZES(3, 6, 7)
#elif MODE == 1
DECLARE_ARRAYS_WITH_SIZES(8, 2, 1)
#endif 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2021-03-25T18:42:08.323

我知道我有点太晚了，但你也可以这样做，这更简单，我认为它不是很快，但对于小程序来说它会成功

```
#include <stdio.h>
#define SIZE_LIST (int[]){2, 7, 23, 33, 12, 76}

int main(void)
{
    for (int i = 0; i < 6; i++)
        printf("%d\n", SIZE_LIST[i]);
    return (0);
} 
```

# wordpress - 在自定义字段中添加帖子的第一个链接 - Wordpress

> ID：12824713
> 
> 赞同：0
> 
> 时间：2012-10-10T17:06:47.423
> 
> 标签：wordpress

我正在尝试将帖子内容中的第一个链接添加到自定义字段。出了点问题，我一直试图让它工作，但没有运气。我应该怎么做才能将链接添加到“链接”自定义字段？

```
add_action( 'publish_post', 'check_post' );
function check_post( $post_id ) {
$user_info = get_userdata(1);

    function get_first_link() {

        global $post, $posts;
        preg_match_all('/href\s*=\s*[\"\']([^\"\']+)/', $post->post_content, $links);
        return $links[1][0];

    }
    $first_link = get_first_link();

    add_post_meta($post_id, 'link', $first_link, true);
    add_post_meta($post_id, 'users', $user_info->user_login, true);
} 
```

编辑我让它工作了一半。它会保存 url，但在发布帖子时不会保存它。它在更新时保存它。我需要使用什么？我尝试使用 publish_post 但也保存了更新时的 url。

```
add_action( 'save_post', 'my_save_post', 10, 2 );
function my_save_post( $post_id, $post ) {
if ( wp_is_post_revision( $post_id ) )
    return;

$matches = array();
preg_match_all( '/href\s*=\s*[\"\']([^\"\']+)/', $post->post_content, $matches );

$first_link = false;
if ( ! empty( $matches[1][0] ) )
    $first_link = $matches[1][0];

$user_info = get_userdata(1);

$meta_link = $_POST['link'];

$args = array(
  'post__not_in'=> array($id),
  'post_type' => 'post',
  'post_status' => array('publish'),
  'meta_query' => array(

      array(
    'key' => 'link',
    'value' => $first_link,
    'compare' => '='
      )       
  )
);
$existingMeta = get_posts( $args );

if(empty($existingMeta)){
    //Go ahead and save meta data
        update_post_meta( $post_id, 'link', esc_url_raw( $first_link ) );
    update_post_meta($post_id, 'users', $user_info->user_login);
}else{
    //Revert post back to draft status
    update_post_meta( $post_id, 'link', $existingMeta[0]->ID );
        update_post_meta($existingMeta[0]->ID, 'users', $user_info->user_login);

    //Now perform checks to validate your data. 
       //Note custom fields (different from data in custom metaboxes!) 
       //will already have been saved.
        $prevent_publish= true;//Set to true if data was invalid.
        if ($prevent_publish) {
        // unhook this function to prevent indefinite loop
        remove_action('save_post', 'my_save_post');

        // update the post to change post status
        wp_update_post(array('ID' => $post_id, 'post_status' => 'draft'));

        }

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T07:42:30.580

干得好：

```
add_action( 'save_post', 'my_save_post', 10, 2 );
function my_save_post( $post_id, $post ) {
    if ( wp_is_post_revision( $post_id ) )
        return;

    $matches = array();
    preg_match_all( '/href\s*=\s*[\"\']([^\"\']+)/', $post->post_content, $matches );

    $first_link = false;
    if ( ! empty( $matches[1][0] ) )
        $first_link = $matches[1][0];

    update_post_meta( $post_id, 'link', esc_url_raw( $first_link ) );
} 
```

# javascript - 将 URL 参数填充到 h:inputText

> ID：12824715
> 
> 赞同：0
> 
> 时间：2012-10-10T17:06:53.390
> 
> 标签：javascript, jsf, facelets

我正在使用以下代码将 URL 参数检索到 JavaScript 变量中。

```
function getUrlParams() {
  var params = {};
  window.location.search.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(str,key,value) {
    params[key] = value;
  });
  return params;
}
var vName = getUrlParams()["vName"]; 
```

我必须设置`vName`为`h:inputText`.

`document.getElementById("Forid:Fldid").value = vName; // didn't work`

我正在研究 Facelets。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T17:19:23.297

不要以艰难的方式去做。使用[`<f:viewParam>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/f/viewParam.html).

```
<f:metadata>
    <f:viewParam name="vName" value="#{bean.vName}" />
</f:metadata>
...
<h:form>
    <h:inputText value="#{bean.vName}" />
    ...
</h:form> 
```

和

```
@ManagedBean
@ViewScoped
public class Bean {

    private String vName;

    // Getter+setter.
} 
```

就这样。

### 也可以看看：

*   [<f:metadata>、<f:viewParam> 和 <f:viewAction> 可以用来做什么？](https://stackoverflow.com/questions/6377798/what-can-fmetadata-and-fviewparam-be-used-for)

# ios - 报亭推送通知未启动应用程序

> ID：12824718
> 
> 赞同：2
> 
> 时间：2012-10-10T17:07:11.073
> 
> 标签：ios, notifications, push, newsstand-kit

我向我的设备发送推送通知 "aps":{"content-available":1} 但它不会在后台启动应用程序。

但是当我发送通知时，会调用此方法

```
-(void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo{
    NSLog(@"%@", userInfo);
} 
```

日志：

```
{
    aps =     {
        "content-available" = 1;
    };
} 
```

有没有办法调试这个？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T13:55:28.840

当推送通知到达时，

如果您的应用程序在后台， -(void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo 将被调用。

如果您的应用程序已终止， - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 将被调用以在后台启动您的应用程序。

您可以相应地开始您的问题下载。

注意：确保您已正确设置报亭必备项。

1.  您的“info.plist”还具有以下键

    UINewsstandApp UIBackgroundModes 报刊亭内容

2.  您的 didFinishLaunchingWithOptions: 方法中有以下代码

[[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"NKDontThrottleNewsstandContentNotifications"];

这将确保每次 iOS 仅在开发模式下收到 content-available:1 通知时，应用程序都会收到该通知。通常，当应用在 App Store 中时，每个应用（报亭应用）每天只允许一个这样的通知。

# ruby-on-rails - Ubuntu 10.04 / Rails 2.3.11 / 应用程序很慢

> ID：12824719
> 
> 赞同：0
> 
> 时间：2012-10-10T17:07:13.080
> 
> 标签：ruby-on-rails, ubuntu, ubuntu-10.04, ruby-on-rails-2

我在我的铁路日志中看到了这一点：

```
Completed in 36594ms (View: 1, DB: 0) | 200 OK 
```

从外观上看，View 和 DB 的完成速度确实很快，但整个请求耗时 36594 毫秒。

我怀疑它可能是服务器配置而不是 Rails。是否有一些直接的想法，你可以通过看到这些数字知道吗？

对不起，我知道我没有给你太多信息，但我真的不知道从哪里开始，但有了这些信息。

# javascript - CCV 人脸检测 Javascript 库 Quenstion

> ID：12824721
> 
> 赞同：0
> 
> 时间：2012-10-10T17:07:31.033
> 
> 标签：javascript, html

我正在使用[这个库](http://wesbos.com/html5-video-face-detection-canvas-javascript/)在用户相机的实时提要上进行面部检测，我想要完成的是在用户头上放置一个项目覆盖。演示附带的示例是跟随用户面部的傻眼镜。而不是我想跟踪用户头部的脸，我知道它是可能的，因为谷歌在谷歌环聊上这样做，你可以在视频聊天时放置各种物品。是否有任何教程，我可以继续使用 CCV 的库并扩展它以实现此功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T17:59:23.393

似乎一个非常基本的解决方案就是将 glass.png 文件重新创建得更大一些并以矩形的形式......可能不完全是你所追求的，但这对我来说似乎是一个简单的解决方案.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T19:47:36.630

我花了一点时间才弄清楚，但我发现了问题所在。

在计算位置的脚本 [Function "drawToCanvas"] 我不得不搞乱宽度和高度的计算。我的输出如下。

```
var video = App.video,
            ctx = App.context,
            backCtx = App.backContext,
            m = 5,
            w = 20,
            i ,
            comp;

        ctx.drawImage(video, 0, 0, App.canvas.width, App.canvas.height);

        backCtx.drawImage(video, 0, 0, App.backCanvas.width, App.backCanvas.height);

        comp = ccv.detect_objects(App.ccv = App.ccv || {
            canvas: App.backCanvas,
            cascade: cascade,
            interval: 4,
            min_neighbors: 1
        });

        if (comp.length) {
            App.comp = comp;
        }

        for (var i = 0; i < App.comp.length; i++){
            //ctx.drawImage(App.glasses, App.comp[i].x, App.comp[i].y+(App.comp[i].height*.7), App.comp[i].width, (App.comp[i].height/4));
            ctx.drawImage(App.glasses, (App.comp[i].x - w / .7) * m, (App.comp[i].y - w / .5) * m, (App.comp[i].width + w) * m, (App.comp[i].height + w) * m); 
```

这样它就可以将您使用的任何图像放在用户头上。

# adobe - 带有可填写、可靠的 pdf 表格的 DPF 产品组合

> ID：12824725
> 
> 赞同：0
> 
> 时间：2012-10-10T17:07:55.013
> 
> 标签：adobe, livecycle, pdf-form

我有 pdf 作品集，里面有一些可填写的 pdf 表格。该投资组合是通过 LiveCycle 服务生成的。所有这些 pdf 表单都有相同的字段。例如：投资组合由 pdfX、pdfY、pfdZ 组成。每个 pdf 都有可填写的字段“用户名”。并且不方便用户将相同的数据放到每个 pdf 表单中。用户只想将数据放入第一个 pdf。因此，其他 pdf 表格必须自动填写数据。而且，有一个限制：用户不能将 portfilio 发送回服务器，因此所有自动更改都必须在客户端完成。

那么，有没有办法解决这样的任务呢？如果有，请描述一些如何做到这一点的算法\策略。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:22:06.123

您似乎正在寻找一种方法来以编程方式访问或从另一个投资组合元素更改投资组合元素的内容。这需要第一个元素知道另一个元素。

这是我在[PDF Developer Junkie 博客](http://blogs.adobe.com/pdfdevjunkie/2011/06/joels_pdf_portfolio_utilities.html#comment-67)上调查脚本组合的可能性时发现的。看看最后一段。也许它会为你指明正确的方向。

> 丹尼斯史密斯 | 2010 年 4 月 7 日下午 3:13 |
> 
> 我希望你能帮助我。我有两个 pdf 文件合并到 1 个投资组合中。文件 1 有一个字段“名称”，文件 2 有一个字段“姓氏”。当有人在文件 1 的“名称”字段中输入值时，我希望文件 2 在“姓氏”字段中包含相同的值。这将用于分发给公众的文件，因此我真的无法更改用户计算机的安全级别。现在我将文件 1 和文件 2 合并到一个更大的文件 3 中，并使用 javascript 处理所有这些。getField(“姓氏”).value=getField(“名字”).value;
> 
> * * *
> 
> 乔尔·杰拉奇 | 2010 年 4 月 7 日下午 3:28 |
> 
> 感谢您的评论：不幸的是，如果不添加文件夹级别的 JavaScript（可以添加菜单项以同步字段）或禁用投资组合的导航器（Flash UI），这是不可能的。
> 
> 如果您禁用了导航器，您可以在同步字段的“封面表”中添加一个按钮。
> 
> *主要问题是 Portfolio 中的项目不能直接与他们的同行交流，也不知道他们的父母。根 PDF（封面）确实知道它的孩子，这就是为什么放置在那里的按钮将能够同步字段的原因。*

# https - Google 日历无法通过 https 订阅 icalendar 提要？

> ID：12824727
> 
> 赞同：7
> 
> 时间：2012-10-10T17:07:56.243
> 
> 标签：https, google-calendar-api, icalendar

有人会碰巧知道 Google 日历在订阅 iCalendar 提要在安全的 https 地址上服务时是否存在问题？

我正在开发一个在 https 地址上运行的网站，该网站具有用户可以订阅的 iCalendar 提要。该提要在 Outlook 和 iCal 中运行良好，但在 Google 日历中却不行。当用户尝试订阅提要时，他们会收到错误消息**“Could not fetch the URL”**。

我怀疑提要或生成的 iCalendar 数据有问题，所以我运行了通过多个验证器生成的 .ics 文件，它们都很好。为了排除提要本身的错误，我将生成的 .ics 文件放在服务器上，以查看静态文件是否可以工作，并且在 Google 日历中也失败了。然后我将文件放在不安全（http）url后面的完全不同的服务器上，这很有效！

所以我开始怀疑httpS是问题所在。服务器的证书是有效的，所以应该不会造成任何问题。此外，验证器可以很好地访问提要（和静态文件）。

这个谷歌小组讨论表明其他人也有类似的怀疑：[http ://productforums.google.com/forum/#!topic/calendar/61-eUd-fyrg](http://productforums.google.com/forum/#!topic/calendar/61-eUd-fyrg)

问题是，该站点必须在 https 上运行，所以我不能只切换到 http 来使提要工作。

因此，如果有人有任何信息证实或反驳我的理论，或者有任何关于其他可能导致这些问题的想法，我将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-22T00:42:43.350

我可以确认（今天）Google 日历**可以成功**订阅 HTTPS iCal 提要。

您可以通过添加以下 URL 自行测试：[https ://events.stanford.edu/byCategory/2/eventlist.ics](https://events.stanford.edu/byCategory/2/eventlist.ics)

为了更加确定，我还做了另一个测试，给它一个 HTTPS url，如果你替换 https -> http ，它*也不起作用。*这也很好，所以在所有情况下，HTTPS 都应该工作。

在我的测试中不起作用的是*：*

*   HTTP Authentication ( `https://myusername:mypw@example.com/`) - 我得到“Could not fetch URL” - 但这不是这个问题要问的。
*   任何超过 256 个字符的 URL。但是，使用链接缩短器（例如 goo.gl）可以解决此问题。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-05T10:38:13.643

Google 已确认这确实是 HTTPS 的问题，即 Google 日历无法从外部加密 (https) URL 订阅 iCalendar 提要。

我的雇主在 Google 有一个企业帐户，我们向 google 的企业支持提出了支持请求，其中包含示例提要和我们自己对问题的评估。

今天，我们终于得到了正确的答案，确认了我们的初步分析，并通知我们已通知正确的技术团队，并且已打开内部功能请求（用于支持来自 https-urls 的提要）。

我们没有得到任何修复的时间表，但我要求他们在问题解决后与我们联系。收到后，我会将该信息添加到此答案中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-06T17:34:48.640

我们在案例中发现的问题是 Google 日历当前忽略了 URL 中的 HTTPS 指示，而是通过 HTTP 访问。如果您的 HTTP 请求重定向到 HTTPS 或仅通过 HTTP 提供内容，那么它将起作用。如果您有防火墙阻止端口 80，那么事情就会挂起，游戏就结束了。

TL;DR：如果您的 URL 与 https 一起使用 http，那么当您将其输入为 https 时，它将与 Google 日历一起使用。（假设 robots.txt 不限制访问。）否则，它将失败。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-01-11T23:39:53.220

截至 2020 年 1 月，该问题似乎已得到解决 - Google 日历在订阅和更新有效的 RFC5545 日历时似乎没有问题。icalender.org[验证器](https://icalendar.org/validator.html)运行良好，可以测试文件和链接（订阅）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-15T17:40:29.960

如果服务器有一个 robots.txt 阻止谷歌，这也是我谷歌日历失败的原因。那么，您是否尝试过查看您的 https 服务器的 robots.txt？

话虽这么说，并不是 google calendar + https 的限制，因为 google calendar 为其 .ics 文件的“私人地址”提供 https 并且它也可以接受来自 google.com 的 https（尽管这只是许多其他配置中的一种配置可能的）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-26T09:28:37.860

我遇到了很多困难：

令人沮丧的是，下载的文件会在 Google 日历或 iCal 中打开，但也不会作为提要加载。当我通过 URL 添加时，我会在 Google 日历中收到这些错误：“无法从（站点名称）导入日历”或“无法获取 URL”。

这是我必须做的：

有事件的持续时间或结束时间，而不是两者。

我还必须从标题中删除它： content-disposition: attachment; 文件名=Schedule.ics；

此外，要检查它是否有效，请使用 Google ical 验证器。

# cocoa - 使用 drawRect 方法绘图 - Cocoa

> ID：12824729
> 
> 赞同：0
> 
> 时间：2012-10-10T17:08:09.553
> 
> 标签：cocoa, view, drawrect, nsrect

我一直在寻找解决方案，但不知道是否可以执行以下操作：

我有一个 drawRect 方法，我想做的是在当前视图中添加一个图形元素（如矩形和线条）而不刷新它。我曾经调用 setNeedsDisplay 但此方法实际上是删除 myView 并从 0 重新绘制它。有什么建议可以保留旧的并添加新内容吗？

感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T23:51:08.337

每次在视图中进行更新时，都会重新绘制整个视图；所以 -drawRect 需要重绘整个视图。你必须“刷新”你的观点——这是常态——这没有错。只需再次绘制旧内容。

或者，`setNeedsDisplayInRect:`如果您确实只想重绘视图的特定部分，则可以调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T07:23:39.693

默认情况下，drawRect方法会清除整个内容，如果你想动态绘制一些新的图形内容到视图中，你应该抽象出这些图形元素的数据结构，例如，你添加一条线，这条线会有

```
       一个起点
       一个终点
       线条颜色
       行宽
       是有阴影
       线连接
```

因此您可以将所有这些属性放入一个结构中并定义一个名为 LineStruct 的新数据类并定义一个名为

```
 -(void)drawLine:(CGContextRef)ctx withLineStruct:(LineStruct*)lineStruct 
```

到您的自定义 UIView ，定义一个

@property (非原子) LineStruct *lineStruct ;

并调用它的 drawRect 方法

```
 -(void)drawRect:(CGContextRef)ctx{
      CGContextRef ctx = UIGraphicsGetCurrentContext() ;
      [self drawLine:ctx withLineStruct:self.lineStruct];
   } 
```

所以如果你有其他的图形内容，你可以这样画。如果你有很多内容，你必须在你的 UIView 中添加一个缓冲区，例如添加一个 NSArray ，并在 drawRect 方法中添加一个 for(;;) 来绘制所有图形元素

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-31T01:40:54.423

您可以通过使用原始 iboutlets 使您想要绘制的视图与您的视图分开来“解决”这个问题。然后使您的主视图背景透明（但不要使 iboutlets 透明）。所以对于这个例子，我将阻止你想要保留（而不是绘制）的 IBOutlets 是 UITextField、UILabel 和 UIButton。因此，您的 Interface Builder 将如下所示：

```
UIVIewController
  UIView2 (view with drawRect defined)
  UIView  (main)
    UITextField
    UILabel
    UIButton 
```

如您所见，当您调用“drawRect”时，它仍然会完全清除您的 UIView2，但这并不重要，因为“drawRect”不会删除任何 UILabel、UIButton、UITextField 或您想要保留的任何其他内容你的 UIView1。希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T11:31:39.417

我想如果你使用图层会更好。您可以为形状创建 CALayer 子类，然后将它们保存在数组中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T17:37:55.237

这就是 drawRect: 所做的——它在视图中重绘矩形。

如果您想在顶部绘制线条和矩形，请尝试在不同的图层上进行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-18T09:51:36.613

我想也许你需要像 NSBezierPath 这样的东西来存储你所有的形状并添加新的形状。向现有 NSBezierPath 添加新形状很容易，请参阅文档：[https](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSBezierPath_Class/Reference/Reference.html) ://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSBezierPath_Class/Reference/Reference.html 然后在您的drawrect，您只需要描边或填充 NSBezierPath。

仅当您的所有形状都具有相同的填充颜色和描边时，这才有效。否则，您可以保留某种类型的多个 NSBezierPaths 列表并以不同的方式描边/填充它们。

# java - 更新图形

> ID：12824732
> 
> 赞同：6
> 
> 时间：2012-10-10T17:08:46.800
> 
> 标签：java, swing, inheritance, concurrency, serial-port

我投降。现在尝试了几个星期，以找出阻止接收到的串行数据被我的代码的图形部分更新的原因。第一次用Java编程。拥有大约 15 年的微型编程经验，我习惯于解决我自己的问题，但这超出了该策略有效的范围。我的应用程序包含两个文件。

一个文件来自 RXTX 项目，每秒捕获两次以多个数据包发送的串行数据。这就像一个魅力（花了一些时间），我可以看到捕获的数据是正确且稳定的。

另一个文件是图形文件，包含大约 80 个菜单，最终用户可以在其中读取和有时写入值。到目前为止，导航是通过按钮和滚动条上的鼠标事件完成的。这部分也可以正常工作。可以读取、更改和保存值等。

我被卡住的部分是串行文件中的更新值永远不会更新图形屏幕。尝试了数百个示例和教程（许多来自此站点），但没有成功。

对象相关语言的概念对我来说是新的并且仍然很混乱。很确定我的问题涉及继承和类。线程是另一个候选者...已将代码缩减到仍然可以运行并提出我的问题的最小大小，并希望有人能看到什么是错的。

```
package components;

import gnu.io.CommPort;
import gnu.io.CommPortIdentifier;
import gnu.io.SerialPort;
import gnu.io.SerialPortEvent;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import javax.swing.SwingUtilities;

public class SerialComm extends ScreenBuilder implements java.util.EventListener {

InputStream in;

public SerialComm() {
    super();
}

public interface SerialPortEventListener
        extends java.util.EventListener {
}

void connect(String portName) throws Exception {
    CommPortIdentifier portIdentifier = CommPortIdentifier.getPortIdentifier("COM1");
    if (portIdentifier.isCurrentlyOwned()) {
        System.out.println("Error: Port is currently in use");
    } else {
        CommPortIdentifier.getPortIdentifier("COM1");
        System.out.println("" + portName);
        CommPort commPort = portIdentifier.open("COM1", 2000);
        if (commPort instanceof SerialPort) {
            SerialPort serialPort = (SerialPort) commPort;
            serialPort.setSerialPortParams(115200, SerialPort.DATABITS_8, SerialPort.STOPBITS_2, SerialPort.PARITY_NONE);
            InputStream in = serialPort.getInputStream();
            OutputStream out = serialPort.getOutputStream();
            serialPort.addEventListener(new SerialComm.SerialReader(in));
            serialPort.notifyOnDataAvailable(true);

            (new Thread(new SerialComm.SerialReader(in))).start();
            // TX functionality commented for now
            //               (new Thread(new SerialWriter(out))).start();

        } else {
            System.out.println("Error: Only serial ports are handled by this     example.");
        }
    }
}

public class SerialReader extends SerialComm implements Runnable,
        gnu.io.SerialPortEventListener {

    public SerialReader(InputStream in) {
        this.in = in;
    }

    @Override
    public void run() {
    count=11; // just for test. run is normally empty
    count2=count; // and real code runs within serialEvent()
    System.out.println("SerialReader " + count);
    dspUpdate(); // do some desperate stuff in graphics file
    System.out.println("Post Update " + count);
    }

    @Override
    public void serialEvent(SerialPortEvent event) {
    System.out.println("SerialEvent");
        switch (event.getEventType()) {
            case SerialPortEvent.DATA_AVAILABLE:
                try {
                    synchronized (in) {
                        while (in.available() < 0) {
                            in.wait(1, 800000);
                        } //in real code RX data is captured here twice a sec
                    } //and stored into buffers defined in ScreenBuilder
    //dspUpdate() is called from here to make ScreenBuilder update its screen
    //That never happens despite all my attempts               
                } catch (IOException e) {
                    System.out.println("IO Exception");
                } catch (InterruptedException e) {
                    System.out.println("InterruptedException caught");
                }
        }
    }
}

/* "main" connect PC serial port and start graphic part of application
 * To demonstrate problem with no serial data stream present
 * order of init between serial port and graphics are switched
 */

public static void main(String[] args) {

    SwingUtilities.invokeLater(new Runnable() {

        @Override
        public void run() {
            ScreenBuilder screen = new ScreenBuilder();
            screen.createAndShowGUI();
            System.out.println("Created GUI");
        }
    });
    try {
        (new SerialComm()).connect("COM1");
    } catch (Exception e) {
        System.out.println("Error");
        e.printStackTrace();
    }
  }
} 
```

和图形文件

```
package components;

import java.awt.*;
import javax.swing.SwingUtilities;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.BorderFactory;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Font;
import java.awt.Graphics;
import java.awt.event.*;

public class ScreenBuilder extends JPanel implements ActionListener {

public Font smallFont = new Font("Dialog", Font.PLAIN, 12);
Color screenColor;
Color lineColor;
short btn=0;
short count;
short count2;
Button helpButton;

public static void createAndShowGUI() {
    System.out.println("Created GUI on EDT? "
            + SwingUtilities.isEventDispatchThread());
    JFrame f = new JFrame("JUST A TEST");
    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    f.add(new ScreenBuilder());
    f.pack();
    f.setVisible(true);
}

public void dspButton() {
    setLayout(null);// 
    helpButton = new Button("?");
    helpButton.setLocation(217, 8); // set X, Y
    helpButton.setSize(16, 14); //Set Size X, Y //
    helpButton.addActionListener(this);
    add(helpButton);
    setBackground(Color.black);
    helpButton.setBackground(Color.black);
    screenColor = Color.black;
    helpButton.setForeground(Color.white);
    lineColor = Color.white;
}

@Override
public void actionPerformed(ActionEvent e) {
    if (e.getSource() == helpButton) {
        count2++;
        System.out.println("Pressed Button ");
        repaint();
    }
}

public ScreenBuilder() {
    setBorder(BorderFactory.createLineBorder(Color.black));
}

@Override
public Dimension getPreferredSize() {
    return new Dimension(240, 180);
}

public void dspUpdate() {
    /*
     * This function is called from SerialComm
     * Should be called when serial packets have arrived (twice a second)
     * and update screen with values from serial stream
     * For now just a test var to validate that values from SerialComm
     * get to here (they do)
     */
count++;
System.out.println("Update Count " + count);
System.out.println("Update Count2 " + count2);
//    revalidate(); // another futile attempt to update screen
//    repaint();
}

@Override
public void paintComponent(Graphics g) {
    super.paintComponent(g);
    g.setColor(lineColor);
    g.setFont(smallFont);
    count++;
    g.drawString("" + count, 130, 20);
    g.drawString("" + count2, 150, 20);
    if (btn == 0) {
      dspButton();
      btn = 1;
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T19:06:18.107

您遇到的最大问题是将所有内容都放入 GUI 类中。尝试将您的模型（后端串行通信的东西）与前端（漂亮的 GUI 东西）分开，这样您就可以省去很多麻烦。在示例中，我尝试为您执行此操作 - 它在一个文件中，但您可能应该将其分为 3 个：模型、视图和控制（控制是模型和视图之间的通信）。

如果您将串行通信代码（您所说的工作）添加到模型而不是示例线程，您应该能够在视图和模型之间进行通信，而不会太麻烦。我试图尽可能多地保留您的代码。

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class TranslucentWindow {

    public static void main(String[] args) {

        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                try {
                    View screen = new View();
                    System.out.println("Created GUI");
                    Model model = new Model();

                    Control c = new Control(screen, model);
                } catch (Exception e) {
                    System.out.println("Error");
                    e.printStackTrace();
                }
            }
        });
    }

    //Only cares about the backend.  Simplified because you said all the backend code was working right.
    public static class Model{

        //Data that was updated - you can change this to whatever you want.
        public String count;
        //Listener that notifies anyone interested that data changed
        public ActionListener refreshListener;

        public void run() {
            //As a sample, we're updating info every 1/2 sec.  But you'd have your Serial Listener stuff here
            Thread t = new Thread(new Runnable(){
                @Override
                public void run() {
                    int i = 0;
                    while(true){
                        dspUpdate(i++);
                        try {
                            Thread.sleep(500);
                        } catch (InterruptedException e) {
                            e.printStackTrace();
                        }
                    }
                }});
            t.start();
        }

        //Update data and notify your listeners
        public void dspUpdate(int input) {
            count = String.valueOf(input);
            System.out.println("Update Count " + count);
            refreshListener.actionPerformed(new ActionEvent(this, input, "Update"));
        }

    }

    //Only cares about the display of the screen
    public static class View extends JPanel {

        public Font smallFont = new Font("Dialog", Font.PLAIN, 12);
        Color screenColor;
        Color lineColor;
        short btn=0;
        String modelRefreshInfo;
        int buttonPressCount;
        Button helpButton;

        public View(){
            //Build Panel
            dspButton();

            //Create and show window
            System.out.println("Created GUI on EDT? "+ SwingUtilities.isEventDispatchThread());
            JFrame f = new JFrame("JUST A TEST");
            f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            f.add(this);
            f.pack();
            f.setVisible(true);
        }

        public void dspButton() {
            setLayout(null);// 
            helpButton = new Button("?");
            helpButton.setLocation(217, 8); // set X, Y
            helpButton.setSize(16, 14); //Set Size X, Y //
            add(helpButton);
            setBackground(Color.black);
            helpButton.setBackground(Color.black);
            screenColor = Color.black;
            helpButton.setForeground(Color.white);
            lineColor = Color.white;
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(240, 180);
        }   

        @Override
        public void paintComponent(Graphics g) {
            super.paintComponent(g);
            g.setColor(lineColor);
            g.setFont(smallFont);
            g.drawString("ModelUpdates: " + modelRefreshInfo, 10, 20);
            g.drawString("RefreshCount: " + buttonPressCount, 10, 40);
            if (btn == 0) {
                dspButton();
                btn = 1;
            }
        }
    }

    //Links up the view and the model
    public static class Control{
        View screen;
        Model model;

        public Control(View screen, Model model){
            this.screen = screen;
            //Tells the screen what to do when the button is pressed
            this.screen.helpButton.addActionListener(new ActionListener(){
                @Override
                public void actionPerformed(ActionEvent e) {
                    //Update the screen with the model's info
                    Control.this.screen.buttonPressCount++;
                    System.out.println("Pressed Button ");
                    Control.this.screen.repaint();
                }
            });

            this.model = model;
            //Hands new data in the model to the screen
            this.model.refreshListener = new ActionListener(){
                @Override
                public void actionPerformed(ActionEvent e) {
                    //Update the screen with the model's info
                    Control.this.screen.modelRefreshInfo = Control.this.model.count;
                    System.out.println("Model Refreshed");
                    Control.this.screen.repaint();
                }
            };

            //Starts up the model
            this.model.run();
        }       
    }
} 
```

# sql - Sql 存储过程查找日期、月份和日期

> ID：12824733
> 
> 赞同：1
> 
> 时间：2012-10-10T17:08:46.883
> 
> 标签：sql, sql-server, stored-procedures

在 SQL Server 中，如何编写查询以获取开始日期和结束日期之间的月份、月份的天数（月份）、月份中的实际天数

startdate 和 enddate 作为输入参数传递，我需要知道月数、实际天数和当月天数

例如：

```
Start date : 2012-04-02
End date :   2012-08-23 
```

我需要得到结果，

```
Month      Days     ActualDays _ inMonth    
----------------------------------------------
04         29       30   - (The no of days on Apr'12 )
05         31       31    
06         31       31    
07         31       31    
08         31       31 
```

04 -month
29 -(Frm startdate 2-Apr'12 to until 30-Apr'12(Apr End))
30 - (The no days on Apr'12 )

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T17:25:40.207

这是一个计算一个月天数的过程。我不知道您所说的“实际日子”是什么意思，或者这可能会有所不同。

```
if object_id('spMonthList') is not null
    drop procedure spMonthList
go
create procedure dbo.spMonthList(
    @start date
,   @end date)
as
; with  Months as
        (
        select  dateadd(month, datediff(month, 0, @start), 0) as MonthStart
        union all
        select  dateadd(month, 1, MonthStart)
        from    Months
        where   MonthStart < @end
        )
select  datepart(month, MonthStart) as Month
,       datediff(day, MonthStart, dateadd(month, 1, MonthStart)) as NumberOfDays
from    Months;
go
exec spMonthList '2012-04-01', '2012-08-01' 
```

-->

```
Month  NumberOfDays
4      30
5      31
6      30
7      31
8      31 
```

[SQL Fiddle 的示例。](http://sqlfiddle.com/#!6/d41d8/463/0)

# c# - 脚本适用于 Create，但在 Edit 中不起作用

> ID：12824734
> 
> 赞同：-1
> 
> 时间：2012-10-10T17:08:49.803
> 
> 标签：c#, asp.net-mvc-3, jquery

伙计们。

我对我的 ASP.NET MVC 项目有一个看法。这个视图有很多字段和一个脚本来搜索一些数据。

```
<link href="@Url.Content("~/Content/styles/people.css")" rel="stylesheet" type="text/css" />
<script src="@Url.Content("~/Scripts/people.js")" type="text/javascript"></script>

<input type="hidden" id="selectiveAccess" name="selectiveAccess" value="@ViewBag.SelectiveAccess" />
<input type="hidden" id="peopleID" name="peopleID" value="@ViewBag.PeopleID" />

<div id="content">
<h1>People - Create</h1>
<h3>All the fields with (*) are required.</h3>

@using (Html.BeginForm("Save", "People", FormMethod.Post))
{
    @Html.Partial("EnabledCourses")
    @Html.Partial("GeneralData")    
    @Html.Partial("AddressData")
    @Html.Partial("ContactData")    
    @Html.Partial("OtherInformations")
    @Html.Partial("Research")

    <a href="#top">Back to the top</a>
    <div id="divErrors"></div>

    <div id="actions">
        <ul style="list-style: none;">
            <li style="display: inline"><input type="reset" id="clear" style="height: 3em; width: 10em" value="Clear form" /></li>
            <li style="display: inline"><input type="submit" id="continue" style="height: 3em; width: 10em" value="Continue" /></li>
        </ul>
    </div>
} 
```

当我调用 Index() 时，脚本运行良好。

```
public ActionResult Index()
{
    ViewBag.PeopleID = string.Empty;
    return View();
} 
```

当我调用 Edit() 时，相同的脚本不起作用。

```
public ActionResult Edit(long peopleID)
{
    ViewBag.PeopleID = peopleID;
    return View("Index");
} 
```

这是脚本：

```
function searchCityByPostalCode() {

var postalCode = {
    'postalCode': $('#postalCode').val()
};

$.get(
    'people/SearchCityByPostalCode',
    postalCode,
    function (city) {
        // do something that works.
    }
);
} 
```

有谁知道这个问题？谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T17:57:33.387

很可能是由于您使用的相对链接。

索引允许你做这样的事情

*   www.mysite.com/Mycontroller/ - 进入索引
*   www.mysite.com/Mycontroller/Index - 转到索引（同上）

但是编辑会迫使您使用第二种形式，因为没有默认路由值

*   www.mysite.com/Mycontroller/Edit/{id}

这意味着当您调用函数以获取索引时，请求看起来像

*   www.mysite.com/Mycontroller/people/SearchCityByPostalCode

编辑看起来像这样，这是一条不同的路径

*   www.mysite.com/Mycontroller/Edit/people/SearchCityByPostalCode

所以基本上你需要使用绝对引用，这样 URL 才能从站点的根目录工作。

```
$.get(
    '/people/SearchCityByPostalCode',
    postalCode,
    function (city) {
        // do something that works.
    }
); 
```

# windows - Windows 8 Metro - 只有数字的密码文本框？

> ID：12824738
> 
> 赞同：0
> 
> 时间：2012-10-10T17:09:02.807
> 
> 标签：windows, textbox, passwords, microsoft-metro

就像当用户点击文本框时，它不会弹出一个完整的键盘，而只会弹出一个数字键盘，这可能吗？

或者如果不可能，我们可以在点击框时禁用应用程序弹出键盘吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T00:44:20.760

您尚未指明您使用的是 C#/VB 和 XAML，还是 HTML 和 JavaScript。对于后者，这非常简单。添加输入字段时，只需将值“数字”用于“类型”属性：

```
<input id="myNumericInput" type="number" /> 
```

当用户点击该字段时，软输入面板将自动切换到数字输入。

XAML 的等价物是使用 InputScope，它也设置为“Number”（大写 N）：

```
<TextBox x:Name="myNumericTextbox" InputScope="Number" Width="500" Height="50"></TextBox> 
```

当用户点击输入字段时，这同样会导致出现数字输入面板。

# css - 强制页脚停留在底部 CSS

> ID：12824739
> 
> 赞同：0
> 
> 时间：2012-10-10T17:09:04.353
> 
> 标签：css, sticky-footer

我一直在搞乱 CSS，但由于某种原因我仍然无法让“粘性页脚”工作。

如果没有足够的内容，页脚可以正常工作并停留在底部，但是，如果有很多内容，最后 100px 总是在页脚后面，而我不知道为什么。

看看会发生什么访问：[http ://hevvo.eu/~dev/backtrack/index.php](http://hevvo.eu/~dev/backtrack/index.php)

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T17:12:10.840

来自 CSS 技巧：[http ://css-tricks.com/snippets/css/sticky-footer/](http://css-tricks.com/snippets/css/sticky-footer/)

CSS：

```
* { margin:0; padding:0; } 

html, body, #wrap { height: 100%; }

body > #wrap {height: auto; min-height: 100%;}

#main { padding-bottom: 150px; }  /* must be same height as the footer */

#footer { 
    position: relative;
    margin-top: -150px; /* negative value of footer height */
    height: 150px;
    clear:both;
} 

/* CLEAR FIX*/
.clearfix:after {
    content: ".";
    display: block;
    height: 0;
    clear: both;
    visibility: hidden;
}
.clearfix {
    display: inline-block;
}
/* Hides from IE-mac \*/
* html .clearfix { height: 1%;}
.clearfix { display: block;}
/* End hide from IE-mac */ 
```

HTML：

```
<div id="wrap">

    <div id="main" class="clearfix">

    </div>

</div>

<div id="footer">

</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T17:12:20.043

有很多关于这个的文章。我最喜欢的是：

[http://www.cssstickyfooter.com/using-sticky-footer-code.html](http://www.cssstickyfooter.com/using-sticky-footer-code.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T17:25:42.763

您忘记`padding-bottom: (height-of-footer)px`在`.wrapper`. 一旦你设置好了，它就可以正常工作了。IE：

```
.wrapper {
  min-height: 100%;
  background: #F7F4EB;
  padding-bottom: 100px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T12:22:42.640

通过在内容周围添加一个新的 div 并添加一个 padding-bottom: 100px 来修复它 给它。

# asp.net-mvc-3 - Asp.net MVC 3 中的 SignalR：集线器未定义

> ID：12824742
> 
> 赞同：1
> 
> 时间：2012-10-10T17:09:10.357
> 
> 标签：asp.net-mvc-3, signalr, signalr-hub, signalr.client

我是 SignalR 的新手。我正在尝试执行此[进度条示例](http://msdn.microsoft.com/en-us/magazine/hh852586.aspx)。
我无法通过 NuGet 下载和安装包，因为我的工作中有一个代理拒绝访问。所以我自己在项目中包含 de DLL 和脚本。

我的视图代码如下：

```
<h2>@ViewBag.Message</h2>
<input type="button" id="bookButton" value="Book flight" />
<br />
<b>Status:</b>&nbsp;&nbsp;&nbsp;<span id="msg"></span>
<hr />
<input type="button" id="percButton" value="Process pending emails" />
<div id="bar" style="border: #000 1px solid; width: 300px;">
</div>
<link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />
<link href="@Url.Content("~/Content/gauge-bar.css")" rel="stylesheet" type="text/css" />
<script src="@Url.Content("~/Scripts/jquery-1.6.4.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/json2.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.signalr.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/signalr/hubs")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/simple-gauge-bar.js")" type="text/javascript"></script>
<script type="text/javascript">
    $(function () {
        var bookingHub = $.connection.bookingHub;
        $("#percButton").click(function () {
            bookingHub.processPendingEmails();
        });

        $("#bookButton").click(function () {
            bookingHub.bookFlight("fco", "jfk");
        });

        bookinghub.updategaugebar = function (perc) {
            $("#bar").html(gaugebar.generate(perc));
        };
        bookinghub.displaymessage = function (message) {
            $("#msg").html(message);
        };

        $.connection.hub.start();
    });
</script> 
```

我的集线器代码：

```
 public class BookingHub : Hub
{
    public void Send(String message)
    {

        // Call the addMessage method on all clients.
        Clients.displayMessage(message);
    }

    public void BookFlight(String from, String to)
    {
        // Book first leg
        Clients.displayMessage(String.Format("Booking flight: {0}-{1} ...", from, to));
        Thread.Sleep(2000);

        // Book return 
        Clients.displayMessage(String.Format("Booking flight: {0}-{1} ...", to, from));
        Thread.Sleep(3000);

        // Book return 
        Clients.displayMessage(String.Format("Booking flight: {0}-{1} ...", to, from));
        Thread.Sleep(2000);

        // Some return value
        Clients.displayMessage("Flight booked successfully.");
    }

    public void ProcessPendingEmails()
    {
        Clients.updateGaugeBar(10);
        Thread.Sleep(2000);

        Clients.updateGaugeBar(40);
        Thread.Sleep(3000);

        Clients.updateGaugeBar(64);
        Thread.Sleep(2000);

        Clients.updateGaugeBar(77);
        Thread.Sleep(2000);

        Clients.updateGaugeBar(92);
        Thread.Sleep(3000);

        Clients.updateGaugeBar(99);
        Thread.Sleep(2000);

        Clients.updateGaugeBar(100);
    }
} 
```

当我运行该项目时，我注意到 bookingHub 是未定义的，此时我有空引用错误。

我做错了什么来得到这个错误？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T08:23:23.457

将 Global.asax 添加到您的 Web 应用程序并将其添加到 global.ajax.cs：

```
namespace SampleWebApplication
{
    public class Global : System.Web.HttpApplication
    {
        protected void Application_Start(object sender, EventArgs e)
        {
            RouteTable.Routes.MapHubs();
        }
    }
} 
```

请参阅[https://github.com/SignalR/SignalR/wiki/QuickStart-Hubs](https://github.com/SignalR/SignalR/wiki/QuickStart-Hubs)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T15:31:01.367

你是否缺少属性，

```
[HubName("bookingHub")] 
```

在您的 BookingHub 课程上？例如

```
 [HubName("bookingHub")]
 public class BookingHub : Hub
{
    public void Send(String message)
    {

        // Call the addMessage method on all clients.
        Clients.displayMessage(message);
    }
... 
```

# python - 如何每 t 分钟从时间 a 到时间 b 运行一个方法

> ID：12824745
> 
> 赞同：0
> 
> 时间：2012-10-10T17:09:26.097
> 
> 标签：python, timer, schedule

由于我是 Python 新手，所以我需要一些有经验的人的建议。仅使用核心 Python 库每 T 分钟从时间 A 到时间 B 运行 Python 方法的最佳方法是什么？

更加具体：

我需要单线程应用程序，它将开始监视文件对的时间戳，以确保文件创建的差异始终大于 0。我只需要每 2 分钟从 9 到 6 运行此监视器。我会看看时间表和时间库......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T18:45:41.883

你可以：

1.  使用 cron（在 *nix 上）或 Windows 任务调度程序在所需时间运行您的脚本。

    它将使您的解决方案更简单、更健壮。

    或者

2.  将您的脚本作为守护程序运行并订阅文件系统事件以监控您的文件。

    您可以根据您的操作系统使用 pyinotify 等。它提供了对变化时间的最佳反应

基于时间、线程、调度模块的解决方案更复杂、更难实现且可靠性更低。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T18:42:22.173

这就是你所追求的吗？

```
import time
from datetime import datetime

def doSomething(t,a,b):
    while True:
        if a > b:
            print 'The end date is less than the start date.  Exiting.'
            break
        elif datetime.now() < a:
            # Date format: %Y-%m-%d %H:%M:%S
            now = datetime.now()
            wait_time = time.mktime(time.strptime(str(a),"%Y-%m-%d %H:%M:%S"))-\
                        time.mktime(time.strptime(str(now), "%Y-%m-%d %H:%M:%S.%f"))
            print 'The start date is',wait_time,'seconds from now.  Waiting'
            time.sleep(wait_time)
        elif datetime.now() > b:
            print 'The end date has passed.  Exiting.'
            break
        else:
            # do something, in this example I am printing the local time
            print time.localtime()
            seconds = t*60  # convert minutes to seconds
            time.sleep(seconds) # wait this number of seconds

# date time format is year, month, day, hour, minute, and second
start_date = datetime(2012, 10, 10, 14, 38, 00)
end_date = datetime(2012, 10, 10, 14, 39, 00)
# do something every 2 minutes from the start to end dates
doSomething(2,start_date,end_date) 
```

它将等到开始日期并运行该函数直到结束日期。根据您的操作，可能会有一些额外的错误检查。现在它所做的只是检查无效条目，例如大于结束日期的开始日期。您所要做的就是指定日期和时间。希望这可以帮助。

编辑：啊，我看到你用额外的要求更新了你的问题。这种方法可能对你不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T17:56:45.460

起初认为这样的事情可能对你有用：

```
import time

# run every T minutes
T = 1
# run process for t seconds
t = 1.

while True:
    start = time.time()

    while time.time() < (start + t):
        print 'hello world'

    print 'sleeping'
    # convert minutes to seconds and subtract the about of time the process ran
    time.sleep(T*60-t) 
```

但可能有更好的方法，确切地知道你想要完成什么

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T18:33:23.153

```
import time

#... initislize  A, B and T here

time.sllep(max(0, A - time.time()) # wait for the A moment

while time.time() < B:
    call_your_method()
    time.sleep(T) 
```

# soap - 在 Fiddler 中捕获 Apex Dataloader SOAP 请求

> ID：12824749
> 
> 赞同：2
> 
> 时间：2012-10-10T17:09:59.333
> 
> 标签：soap, salesforce, fiddler, interception

我想通过 Fiddler 监控 Apex DataLoader SOAP 请求，作为第一步，我已将 Fiddler 证书导入到 DataLoader 安装和 JDK 安装路径中 jre/security 位置的“cacerts”中。现在我可以通过 Fiddler 从 Dataloader 执行导入和导出操作，但我只看到连接（灰色隧道）流量。如何查看完整的 SOAP 请求和响应？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T10:10:30.423

解决了 ：-）。从个人证书存储（[请参阅此处](http://www.fiddler2.com/fiddler/help/httpsclientcerts.asp)）导出 Fiddler 证书，然后将其放置在 %USERPROFILE%\Documents\Fiddler2 位置并重新启动 Fiddler。我现在可以看到完整的肥皂请求和响应。顺便说一句，操作系统是 Windows7，DataLoader 版本是 25.0.0 和 Fiddler-2.4.10。

# android - 无法获取提供者：ClassNotFoundException

> ID：12824751
> 
> 赞同：5
> 
> 时间：2012-10-10T17:10:18.397
> 
> 标签：android, android-contentprovider, proguard

当我`MyContentProvider`在调试模式下开发和运行时，我的应用程序运行良好。

```
<provider android:name=".MyContentProvider"
        android:authorities="com.contactcities"
        android:exported="false">
</provider> 
```

但是当我导出应用程序，下载并运行它时，它会立即崩溃：

```
10-10 18:24:37.682 E/AndroidRuntime(10428): FATAL EXCEPTION: main
10-10 18:24:37.682 E/AndroidRuntime(10428): java.lang.RuntimeException: Unable to get provider com.contactcities.MyContentProvider: java.lang.ClassNotFoundException: com.contactcities.MyContentProvider in loader dalvik.system.PathClassLoader[/system/framework/com.google.android.maps.jar:/data/app/com.contactcities-1.apk]
10-10 18:24:37.682 E/AndroidRuntime(10428): at android.app.ActivityThread.installProvider(ActivityThread.java:4509)
10-10 18:24:37.682 E/AndroidRuntime(10428): at android.app.ActivityThread.installContentProviders(ActivityThread.java:4281)
10-10 18:24:37.682 E/AndroidRuntime(10428): at android.app.ActivityThread.handleBindApplication(ActivityThread.java:4237)
10-10 18:24:37.682 E/AndroidRuntime(10428): at android.app.ActivityThread.access$3000(ActivityThread.java:125)
10-10 18:24:37.682 E/AndroidRuntime(10428): at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2071)
10-10 18:24:37.682 E/AndroidRuntime(10428): at android.os.Handler.dispatchMessage(Handler.java:99)
10-10 18:24:37.682 E/AndroidRuntime(10428): at android.os.Looper.loop(Looper.java:123) 
```

我可以在我所有的设备上重现它，2.2、4.0、4.1

我今天阅读了许多线程。他们中的一些人将此归咎于 ProGuard。我试过添加

```
-keep public class com.contactcities.MyContentProvider 
```

但没有运气。

当我禁用 proguard 时，不要放入`proguard.config=proguard.cfg`我的`project.properties`. 它仍然在发布版本中给出相同的错误。调试又好了。也许它不足以禁用这样的proguard？

也许提示是它在这次崩溃中引用了 maps.jar。我不知道为什么会这样

```
in loader dalvik.system.PathClassLoader[/system/framework/com.google.android.maps.jar 
```

任何线索将不胜感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T10:00:55.350

啊，我以为我试过了，但似乎我没有。

`Project`->`clean`让它工作

掌心

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-10T10:17:19.487

我遇到了同样的错误，原来我在*AndroidManifest.xml*`android:name`中的提供程序标记的属性值错误：

 *```
<provider
    android:authorities="com.example.ProviderClass"
    android:name=".ProviderClass"
    android:exported="false" >
</provider> 
```

因此，请仔细检查此值是否如上`.ProviderClass`或您的类名是什么（以点为前缀）。然后执行 Project > Clean，它将起作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-11T13:07:04.770

authority 属性需要与内容权限匹配，而 name 属性需要与您的自定义提供程序类的类名匹配。

例如：

```
 <provider
         android:authorities="com.richa.myapp"
         android:name=".data.CustomProvider"/> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-27T15:29:15.067

也许我的经验不足会帮助其他人解决这个错误。这对我来说完全是神秘的，但就像计算机中的一切一样，一旦你知道了就很明显了。

我正在关注本教程，总体来说非常好： [http ://www.vogella.com/tutorials/AndroidSQLite/article.html](http://www.vogella.com/tutorials/AndroidSQLite/article.html)

早些时候，他说要创建一个名为“contentprovider”的包，然后在其中创建一个类“MyTodoContentProvider”。现在任何熟悉 Java 风格命名约定的人都会看到这应该是相对于主包的。但我对这一切都很陌生，所以我在某个地方创建了它。

通过构建代码，一切正常。Eclipse 找到并包含了这个包，并且没有显示任何错误。然后是崩溃和神秘的“无法获取提供者”消息。错误消息中的路径，我现在理解的是代码正在寻找类的不存在的路径，它太长并且包含太多的“contentprovider”迭代，很难看出它指的是什么或什么错了。

我怀疑问题出在清单文件中，但我确定它出在“android:authority”中。这有点不直观。清单中此元素中的字符串对应于您在提供程序类中公开的公共成员。该成员名为“CONTENT_URI”。但两者并不完全匹配。例如：

```
private static final String AUTHORITY = "com.vegnab.provider";
private static final String BASE_PATH = "todos";
public static final Uri CONTENT_URI = Uri.parse("content://" + AUTHORITY + "/" + BASE_PATH); 
```

这最终得到：

```
CONTENT_URI = "content://com.vegnab.provider/todos" 
```

（请注意，AUTHORITY 本身是私有成员，不能从外部获得。）

相应的清单行将是：

```
android:authorities="com.vegnab.provider" 
```

这是方案“content://”和基本路径之间的中间部分。

问题实际上出在清单行中：

```
android:name=".contentprovider.MyTodoContentProvider" 
```

我在名为“contentprovider”的包中有一个名为“MyTodoContentProvider”的无错误类，那么问题是什么？问题是包裹放错了地方。它应该是相对于主包的。这就是名称中第一个点的含义。它应该遵循与活动的“android:name”行相同的语法，在它们的清单部分中。

如果您觉得这很有用，请单上。一旦你解决了这个问题，很容易忘记它是多么神秘。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-28T20:36:06.187

在 Android 5.0（API 级别 21）将 DEX 运行时替换为 ART 之前，您可能已经通过了旧操作系统版本的类限制。如果您正处于极限边缘，您可以通过编译，但在启动期间会出现此错误。

尝试按照 Android [Enable Multidex for Apps with Over 64K Methods](https://developer.android.com/studio/build/multidex)文档中的说明启用 multi-dex。*

# javascript - JavaScript计算两个日期之间的差异，在文本输入中显示数字

> ID：12824753
> 
> 赞同：0
> 
> 时间：2012-10-10T17:10:19.410
> 
> 标签：javascript, html, forms

我一直在为一家保险公司处理申请表。他们卖旅游保险。

作为一个额外的小功能，他们要求我获取用户输入的出发日期和返回日期，计算它们之间的天数，然后在“天数”框中显示数字。其目标是让用户可以输入两个日期并自动计算天数。

我已经创建了一个可以正确计算日期的函数，并且我已经使用手动分配的日期值对其进行了测试。

使用 JS 日历时出现了我的问题。

我试图做的是使用第二个框的 onblur 来访问该功能并将日期吐出到“天”框中。我很快意识到 onblur 是在 JS 日历的代码输入日期之前触发的，因此该函数没有日期并且该函数不会运行。

然后我尝试使用 onchange 并意识到它也不起作用，因为用户实际上并没有更改日期，代码是。

所以我接下来尝试做的是使用间隔来触发该功能，这就是我遇到问题的地方。

下面是我的 caldate.js 文件中的代码，该文件附加到我的 HTML 表单中。

```
 var namestart = new Array ();
namestart[0] = "trav_emer_single_date_go";
namestart[1] = "trav_emer_extend_date_go";
namestart[2] = "allinc_single_date_go";
namestart[3] = "allinc_annual_date_go";
namestart[4] = "cancel_date_go";
namestart[5] = "visitor_supervisa_date_go";
namestart[6] = "visitor_student_date_go";
namestart[7] = "visitor_xpat_date_go";

var namend = new Array ();
namend[0] = "trav_emer_single_date_ba";
namend[1] = "trav_emer_extend_date_ba";
namend[2] = "allinc_single_date_ba";
namend[3] = "allinc_annual_date_ba";
namend[4] = "cancel_date_ba";
namend[5] = "visitor_supervisa_date_ba";
namend[6] = "visitor_student_date_ba";
namend[7] = "visitor_xpat_date_ba";

var names = new Array ();
names[0] = "trav_emer_single_days";
names[1] = "trav_emer_extend_days";
names[2] = "allinc_single_days";
names[3] = "allinc_annual_days";
names[4] = "cancel_days";
names[5] = "visitor_supervisa_days";
names[6] = "visitor_student_days";
names[7] = "visitor_xpat_days";

    function daysBetween() {

for (var i = 0; i < 8; i++) {   

//Get the value of the current form elements
var start = document.getElementById(namestart[i]).value;
var end = document.getElementById(namend[i]).value;

//Duration of a day
var d = 1000*60*60*24;

// Split Date one
var x = start.split("-");
// Split Date two
var y = end.split("-");

/// // Set Date one object
var d1 = new Date(x[0],(x[1]-1),x[2]);
//  // Set Date two object
var d2 = new Date(y[0],(y[1]-1),y[2]);
//  
//  //Calculate difference
diff = Math.ceil((d2.getTime()-d1.getTime())/(d));

//Show difference
document.getElementById(names[i]).value = diff;

}
}

function interval() {
var int = setInterval(function(){daysBetween()},500);
} 
```

开头的数组列表是我需要访问的元素的名称。我打算用我的函数做的是在每个间隔运行一个循环来检查所有 8 个元素。namestart[] 和 namend[] 是用户输入的开始和结束日期。names[] 列出要显示日期的框的名称。

我什至无法测试间隔部分，因为`daysBetween()`出于测试目的，我什至无法使用手动分配的 value="date" 运行一次，它根本不会运行。

这个问题真的很简单：`document.getElementById(namestart[i]).value`不是拉出一个值，它只是挂起脚本，因为它找不到值。我也尝试过使用`form_name.elements().value`符号和`form_name.element_name.value`符号无济于事。

据我所知代码应该可以工作，我真的很难过，我给出了项目名称的列表，并告诉脚本使用它们来访问它们 - 我使用过并且多次看到工作 getElementByID。

任何帮助将不胜感激，因为我不太确定从这里去哪里。

这里要求的是一个 JS fiddle 链接：http: [//jsfiddle.net/L2H9N/](http://jsfiddle.net/L2H9N/) - 纯 JS 没有库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T19:52:31.237

我认为正在发生的是你的 daysBetween 函数在 DOM 准备好之前执行，这会引发错误并破坏你的 javascript 的其余部分。要修复它，您需要将对 daysBetween 的调用放入 window.onload 的回调中，或将其附加到日历中的回调中。

在继续对变量进行计算之前，合并您的空值或至少检查它们也是一个好主意。

# iphone - 如何访问块中的实例变量

> ID：12824755
> 
> 赞同：3
> 
> 时间：2012-10-10T17:10:23.093
> 
> 标签：iphone, objective-c, block, instance-variables

我想访问块中的实例变量，但总是在块中接收 EXC_BAC_ACCESS。我在我的项目中不使用 ARC。

```
.h file

@interface ViewController : UIViewController{
    int age; // an instance variable
}

.m file

typedef void(^MyBlock) (void);

MyBlock bb;

@interface ViewController ()

- (void)foo;

@end

@implementation ViewController

- (void)viewDidLoad{
    [super viewDidLoad];

    __block ViewController *aa = self;

    bb = ^{
        NSLog(@"%d", aa->age);// EXC_BAD_ACCESS here
        // NSLog(@"%d", age); // I also tried this code, didn't work
    };

    Block_copy(bb);

    UIButton *btn = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    btn.frame = CGRectMake(10, 10, 200, 200);
    [btn setTitle:@"Tap Me" forState:UIControlStateNormal];
    [self.view addSubview:btn];

    [btn addTarget:self action:@selector(foo) forControlEvents:UIControlEventTouchUpInside];
}

- (void)foo{
    bb();
}

@end 
```

我不熟悉块编程，我的代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T17:22:49.140

您正在访问在不再范围内的堆栈上分配的块。您需要分配`bb`给复制的块。`bb`也应该移动到类的实例变量中。

```
//Do not forget to Block_release and nil bb on viewDidUnload
bb = Block_copy(bb); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T17:14:57.973

`age`您应该为您的ivar定义正确的访问器方法：

```
@interface ViewController : UIViewController{
  int age; // an instance variable
}
@property (nonatomic) int age;
... 
```

在您的 .m 文件中：

```
@implementation ViewController
@synthesize age;
... 
```

并像这样使用它：

```
 NSLog(@"%d", aa.age);// EXC_BAD_ACCESS here 
```

如果您正确分配 ViewController 以便在块执行之前不会释放其实例，这将修复它。

# eclipse - 使用 Eclipse 运行 Maven 项目所需的配置

> ID：12824757
> 
> 赞同：0
> 
> 时间：2012-10-10T17:10:24.727
> 
> 标签：eclipse, maven, configuration

我在 SVN 中有一个 Maven 项目，其中*trunk\Config\TestProjConfig*文件夹包含所有 XML 配置文件，所有 Java 代码都在*trunk\JavaSource\TestProj*中。当我查看本地 Eclipse 时，创建了 2 个项目，一个用于 TestProjConfig，一个用于 TestProj。

我如何测试这个项目？我是否必须编辑构建路径才能在两个项目之间建立连接？我是否必须编写一个访问 AppContext 文件的主类来调用 Spring 注入？

注意：我在 Eclipse 中有 m2eclipse 插件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T06:34:54.693

我不明白您为什么将 XML 配置与 Java 源分开。仅当您想在其他项目中重用您的 conf 时，这可能是一个好习惯，但在这种情况下，我不确定这是否合适。

## 解决方案 1

将所有 xml 配置移动到 JavaSource\TestProj\src\main\resources

如果您真的不需要共享您的配置或没有任何遗留/公司/神秘原因，则不应将它们分开。

## 解决方案 2

如果您真的想将它们分开，请将它们与程序集放在一个 zip 中，然后将 TestProj 的依赖项添加到 TestProjConfig。这里有一个例子：[Maven - 依赖于组装的 zip](https://stackoverflow.com/questions/12298178/maven-depend-on-assembled-zip/12299646#12299646)

# serial-port - .net SerialPort 在平板电脑上一分钟后关闭

> ID：12824758
> 
> 赞同：0
> 
> 时间：2012-10-10T17:10:27.050
> 
> 标签：serial-port, tablet

我在 Intel Atom 处理器上运行我的应用程序。我的电脑没有问题，只有平板电脑。

```
Application.Run(new MyApp());

public MyApp()
{
  ...
  SerialPort port = new SerialPort(...)
  port.DataReceived += new SerialDataReceivedEventHandler(port_DataReceived);
  port.Open();
} 
```

当我在我的 PC 上运行我的应用程序时，没有任何问题，而且我可以根据需要发送串行数据。但是，当我在平板电脑上运行它时，在启动大约一分钟后，串行端口关闭并且不再读取。我不确定如何调试它。

# ios - 核心位置常数含义

> ID：12824759
> 
> 赞同：2
> 
> 时间：2012-10-10T17:10:30.907
> 
> 标签：ios, gps, wifi, core-location

我对核心位置常量的含义感到非常困惑。例如，对于我的应用程序，我希望获得 100 米内的准确读数，这看起来`kCLLocationAccuracyHundredMeters`是合适的选择。但是，使用此设置，当我禁用 wifi 时，我经常得到精度低于 +- *1000米的点。*这些核心位置常量是否仅在启用 wifi 时才相关，或者听起来我做错了什么？Apple 希望开发人员不必担心底层硬件（即是否使用 gps、wifi 或手机信号塔）但其准确性完全取决于启用的 wifi，这似乎很奇怪。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T21:38:03.990

精度常数是您“要求”特定精度的方式。你实际得到的取决于可用的。CL 将尝试为您提供您要求的准确度（或更好），但它会为您提供它所拥有的，即使它在尝试获得更好的准确度位置时准确度更差。

如果您等待的时间足够长（并忽略不够好的位置），那么您最终将获得更准确的位置，除非它无法完成（例如当 GPS 卫星不可见或没有 WiFi 等时） .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T18:54:07.653

GPS 读数不仅仅取决于您的准确度设置。例如，如果您没有使用 wifi 并且您尝试从室内读取数据，我已经看到 GPS 始终保持数千米的距离，直到您外出。如果您打算使您的应用程序在室内准确，我不打算依赖典型的 GPS。如果您的主要用例在外部，则 GPS 非常准确。

# ruby-on-rails - mongoid 中未持久化的相关文档

> ID：12824760
> 
> 赞同：0
> 
> 时间：2012-10-10T17:10:42.150
> 
> 标签：ruby-on-rails, mongodb, mongoid

假设我有一个包含许多回复的发布文件。当我在内存中删除这些回复时，我希望能够看到这些回复已被删除，尽管没有持久化。我来给你展示：

```
class Post
    has_many :replies, class_name: 'PostReply', autosave: true
end

post.replies.count
 => 3
post.replies = []
 => [] 
post.replies.last 
 => #<Post...>
# (also note that at this point, #count will return 3 and #length will return 0.) 
```

我进一步希望这种行为会随着身份映射的开启而改变。例如，最后一行将使用内存中的回复，并返回 nil。

我的想法和假设有什么不正确的？如何获得所需的行为？还有一个额外的问题，我在哪里可以看到显示来自 IRB 的数据库查询的日志？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T18:24:45.220

通过添加反比关系解决：

```
class Post
  has_many :replies, class_name: "PostReply", autosave: true, inverse_of: :post
end

class PostReply
  belongs_to :post, inverse_of: :replies
end 
```

# apache-flex - MonkeyTalk 和 Flex

> ID：12824762
> 
> 赞同：2
> 
> 时间：2012-10-10T17:10:56.823
> 
> 标签：apache-flex, air, flex-monkey

我正在尝试使用 AIR 应用程序设置 MonkeyTalk，文档说它可以工作，但教程显示没有办法，我无法弄清楚。

有没有人这样做过？

非常感谢任何提示。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T20:51:48.583

MonkeyTalk 目前似乎不支持 AIR。查看此论坛帖子： [MonkeyTalk 是否支持 Air 应用程序？](https://www.gorillalogic.com/content/monkeytalk-support-air-application)

# node.js - 使用 webrtc + node.js 进行视频会议

> ID：12824769
> 
> 赞同：5
> 
> 时间：2012-10-10T17:12:06.843
> 
> 标签：node.js, express, socket.io, webrtc, video-conferencing

首先对不起我的英语不好。我正在尝试使用 WebRTC 进行视频通话，但它不起作用。我在服务器上使用 node.js+socket.io+express。我很感激你能给我的任何帮助或建议。非常感谢。这是我的代码。

## 服务器

```
var express = require('express')
  , io = require('socket.io')
  , app = express()
  , server = require('http').createServer(app)
  , io = io.listen(server);

server.listen(8080);

app.get('/', function (req, res) {
  res.sendfile(__dirname + '/index.html');
});

var usuarios = [];

io.sockets.on('connection', function (socket) {
    usuarios.push(socket);
    console.log('Nuevo usuario conectado - ' + usuarios.length + ' en total');

    socket.on('message', function (mensaje) { 
        usuarios.forEach(function (usuario) {
            if (usuario != socket) {
                usuario.send(mensaje);
            }
        });
    });

    socket.on('disconnect', function () { 
        console.log("Usuario desconectado");
        // ...
    });
}); 
```

## 客户

```
<html>
    <head>
        <title>Cliente</title>
    </head>
    <body>
        <video id='videolocal' autoplay style='width: 200px; height: 150px; border: 1px solid black;'></video>
        <video id='videoremoto' autoplay style='width: 200px; height: 150px; border: 1px solid black;'></video>
        <button type="button" onclick="iniciarCamara();">Iniciar Camara</button>
        <button type="button" onclick="pararCamara();">Parar Camara</button>
        <button type="button" onclick="conectar();">Conectar</button>
        <button type="button" onclick="desconectar();">Desconectar</button>

        <script src="/socket.io/socket.io.js"></script>
        <script>
            var socket = io.connect('http://localhost:8080');
            var videolocal = document.getElementById('videolocal');
            var videoremoto = document.getElementById('videoremoto');
            var streamlocal = null;
            var pc = null;
            var conectado = false;
            window.URL = window.URL || window.webkitURL;
            navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia;

            socket.on('message', function (mensaje) {
                var msg = JSON.parse(mensaje);

                if (msg.type === 'oferta') {
                    pc.setRemoteDescription(pc.SDP_OFFER, new SessionDescription(msg.sdp));
                    responder();
                } else if (msg.type === 'respuesta' && conectado) {
                    pc.setRemoteDescription(pc.SDP_ANSWER, new SessionDescription(msg.sdp));
                } else if (msg.type === 'candidate' && conectado) {
                    var candidate = new IceCandidate(msg.label, msg.candidate);
                    pc.processIceMessage(candidate);
                } else if (msg.type === 'desconectar' && conectado) {
                    //...
                }
            });

            function responder() {
                var oferta = pc.remoteDescription;
                var respuesta = pc.createAnswer(oferta.toSdp(), {has_audio:true, has_video:true});
                pc.setLocalDescription(pc.SDP_ANSWER, respuesta);
                socket.send({type: 'respuesta', sdp: respuesta.toSdp()});
                pc.startIce();
            }

            function crearPeerConnection() {
                pc = new webkitPeerConnection00(null, iceCallback);
                pc.addEventListener("addstream", anadirStreamRemoto, false);
                pc.addEventListener("removestream", eliminarStreamRemoto, false);

                function anadirStreamRemoto(event) {
                    videoremoto.src = window.webkitURL.createObjectURL(event.stream);
                }

                function eliminarStreamRemoto(event) {
                    videoremoto.src = "";
                }
            }

            function iniciarCamara() {
                navigator.getUserMedia({video: true, audio: true}, okCallback, errorCallback);

                function okCallback(stream) {
                    videolocal.src = window.URL.createObjectURL(stream);
                    streamlocal = stream;
                }

                function errorCallback(error) {
                    alert("Error");
                    return;
                }
            }

            function pararCamara() {
                videolocal.src = "";
            }

            function iceCallback(candidate, bMore) {
                if(candidate) {
                    socket.send({type: 'candidate', label: candidate.label, candidate: candidate.toSdp()});
                }
            }

            function conectar() {
                if (!conectado && streamlocal) {
                    crearPeerConnection();
                    conectado = true;
                    var oferta = pc.createOffer({has_audio:true, has_video:true});
                    pc.setLocalDescription(pc.SDP_OFFER, oferta);
                    socket.send({type: 'oferta', sdp: oferta.toSdp()});
                    pc.startIce();
                } else {
                    alert("No se ha iniciado el stream local");
                }
            }

            function desconectar() {
                pc.close();
                pc = null;
                conectado = false;
            }

    </script>
</body> 
```

## 错误

```
Uncaught SyntaxError: Unexpected token o localhost:25
(anonymous function) localhost:25
EventEmitter.emit socket.io.js:633
SocketNamespace.onPacket socket.io.js:2239
Socket.onPacket socket.io.js:1930
Transport.onPacket socket.io.js:1332
Transport.onData socket.io.js:1303
websocket.onmessage 
```

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T15:05:11.857

您必须在 socket.io 方法 .send() 发送消息时发送 jsObjects，以提供您需要使用 .emit() 方法的数据，因此您必须替换所有

```
socket.send({...}); 
```

和：

```
socket.emit('message', {...}) 
```

所以你必须删除这一行：

```
var msg = JSON.parse(mensaje); 
```

# wpf - 使用对象解决方案 WPF 进行委托

> ID：12824774
> 
> 赞同：0
> 
> 时间：2012-10-10T17:12:42.517
> 
> 标签：wpf, object, delegates

我们找到了这个问题的以下解决方案

以下代码可能会帮助您解决从另一个线程更新 gui 元素的问题

模块级

```
delegate void updateCallback(string tekst); 
```

这是更新元素的方法：

```
private void UpdateElement(string tekst)
{
    if (element.Dispatcher.CheckAccess() == false)
    {
    updateCallback uCallBack = new updateCallback(UpdateElement);
    this.Dispatcher.Invoke(uCallBack, tekst);
    }
    else
    { 
    //update your element here
    }
 } 
```

这适用于 String Int 等原始类型......但我们想使用类的实例。

我们的委托声明如下例所示：

```
delegate void updateCallback(Maps newMap) 
```

我们想用它来更新在不同线程中创建的窗口。但是，当我们使用对象时，我们会得到：

调用线程无法访问此对象，因为不同的线程拥有它。

# c# - 自动删除孤儿：第二次Commit不会删除Childs

> ID：12824776
> 
> 赞同：1
> 
> 时间：2012-10-10T17:12:52.257
> 
> 标签：c#, entity-framework, entity-framework-5

进一步提问[EF 能否自动删除未删除父项的孤立数据？](https://stackoverflow.com/questions/10835439/can-ef-automatically-delete-data-that-is-orphaned-where-the-parent-is-not-delet)

我检查了解决方案，正如@Ladislav 在这里建议的那样 [https://stackoverflow.com/a/10838228/54801](https://stackoverflow.com/a/10838228/54801) **不幸的是，我注意到该解决方案部分有效。**

如果我们采用以下代码：

```
 for (int k = 0; k < 2; k++)
 {
     var parentObject= _context.Parents.Get(1704);
     parentObject.ChildObjects.Clear();

     var childObject= _context.ChildObjects.Get(1000*k /*diffrent child for each iteration*/ );
     parentObject.ChildObjects.Add(childObject);

     _context.Commit();
  } 
```

第一次迭代（k=0）进行删除。**但第二次迭代不会删除！**

有没有人有解决这个问题的办法？

该问题可以“解决”，如下所示：

```
if(k == 1)
{
    foreach (var project in tender.TenderProjects)
      {
         _context.Projects.Remove(project);
      }
   } 
```

但这绝对不是理想的我希望我的服务脱离任何 ORM 逻辑..

**编辑：**

迭代只是真实场景的一个例子。真实场景，用户可以添加父实体的第一个子实体。保存数据并再次删除第一个孩子并在他的位置添加另外两个孩子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T12:28:28.793

事实证明，这个问题非常愚蠢。我的实体继承自基于唯一 ID 实现方法 Equals 和 GetHashCode 的基类。

```
 public override bool Equals(object obj)
    {
        if (obj == null || !(obj is Entity))
            return false;

        if (Object.ReferenceEquals(this, obj))
            return true;

        Entity item = (Entity)obj;

        if (item.IsTransient() || this.IsTransient())
            return false;
        else
            return item.Id == this.Id;
    }

    public override int GetHashCode()
    {
        if (!IsTransient())
        {
            if (!_requestedHashCode.HasValue)
                _requestedHashCode = this.Id.GetHashCode() ^ 31;

            return _requestedHashCode.Value;
        }
        else
            return base.GetHashCode();

    } 
```

因为我的实体有一个复合键。**我需要覆盖与复合键相关的方法。**

```
 public override bool Equals(object obj)
    {
        if (obj == null || !(obj is ProjectContract))
            return false;

        if (Object.ReferenceEquals(this, obj))
            return true;

        var item = (ProjectContract)obj;

        if (item.IsTransient() || this.IsTransient())
            return false;

        return item.Id == this.Id && item.ProjectId == this.ProjectId;
    }

    int? _requestedHashCode;
    public override int GetHashCode()
    {
        if (!_requestedHashCode.HasValue)
            _requestedHashCode = (this.Id.ToString() + this.ProjectId.ToString()).GetHashCode();

        return _requestedHashCode.Value;
    } 
```

感谢您的关注和帮助的愿望

# c# - 通过 CRM 表单发送电子邮件 onSave

> ID：12824778
> 
> 赞同：0
> 
> 时间：2012-10-10T17:13:00.323
> 
> 标签：c#, javascript, .net, dynamics-crm, dynamics-crm-2011

我现在正在处理一个 CRM 表单，如果在选项集中选择了特定选项，则需要发送一封电子邮件。电子邮件地址保存为另一个表单的字段。

做这个的最好方式是什么？我应该使用 onSave 事件来触发 javascript 函数吗？所有后端逻辑都是 .NET。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T18:14:57.160

理想情况下，您将使用在更新消息上注册的插件来发送电子邮件。如果电子邮件地址链接到带有查阅字段的记录，您可以使用工作流。

*   [CRM 2011 SDK 示例：基本插件](http://msdn.microsoft.com/en-us/library/gg594416.aspx)
*   [CRM 2011 插件：使用插件发送电子邮件](http://social.microsoft.com/Forums/sv-SE/crm/thread/10ecdccb-09f7-42b7-b14b-0d7284cb7ada)

*   [使用 Dynamics CRM 工作流发送电子邮件](http://www.dynamicscrmtrickbag.com/2010/01/12/send-emails-with-workflows/)

# sql - 如何使用 T-SQL 将新文件夹添加（过程）到层次结构

> ID：12824780
> 
> 赞同：-2
> 
> 时间：2012-10-10T17:13:13.040
> 
> 标签：sql

根据下表：

```
(
   FolderID int NOT NULL IDENTITY(1,1)PRIMARY KEY CLUSTERED,
   ParentFolderID int NOT NULL,
   FolderName nvarchar(255) NOT NULL,
   FolderOrg hierarchyid NOT NULL,
   CreateDate date NOT NULL
   CONSTRAINT def1_CreateDate DEFAULT GETDATE(),
   Title varchar(20) NULL
) ; 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T18:07:36.327

如果您需要做的只是添加一条记录，那么这样简单的事情不就行了吗？

```
CREATE PROCEDURE usp_InsertFolder
  (@parentFolderID int, @folderName nvarchar(255), @folderOrg hierarchyid, @createDate date, @title varchar(20)) 
AS
BEGIN 
INSERT INTO table1
(ParentFolderID, FolderName, FolderOrg, CreateDate, Title)
VALUES 
(@parentFolderID, @folderName, @folderOrg, @createDate, @title);
END 
; 
```

用法：

```
EXEC usp_InsertFolder '1', '2', 0x58, '2012-10-10', 'title goes here'; 
```

如果这不是您需要的，请澄清问题。

# meteor - 流星和订阅

> ID：12824781
> 
> 赞同：1
> 
> 时间：2012-10-10T17:13:28.563
> 
> 标签：meteor

我不明白 的概念`Meteor.subscribe`。它应该从服务器接收记录，并将其附加到具有相同名称的集合中，对吗？

> [subscribe] 将对传入的属性进行排队，直到您在客户端上使用匹配的集合名称声明 Meteor.Collection。

那么，为什么[文档](http://docs.meteor.com/#meteor_subscribe)中的示例使用不同的名称？**allplayers**和**player**之间是什么关系？

```
Meteor.subscribe("allplayers");
...
// client queues incoming players records until ...
...
Players = new Meteor.Collection("players"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T23:55:00.877

有两个名字：

*   集合的名称（`'players'`在本例中）。
*   订阅的名称（`'allplayers'`在本例中）。

订阅是一种将记录放入客户端集合的方法。记录进入的这个集合的名称由`this.set()`相关`Meteor.publish`函数中的使用决定（在服务器端），但*通常*它只是在服务器端查询的集合的名称[1]。

许多订阅可以将数据存放到同一个集合中，因此订阅的名称当然不需要与集合的名称相对应。事实上，如果您正在对该集合进行相当简单的单一订阅，那么让它们相同可能只是一个好主意。

[1] 如果您在 中返回游标（例如`return players.find();`）`Meteor.publish`，它会*自动*`this.set(name)`为您连接调用，`name`从服务器端`players`集合推断出在哪里。

# assembly - movlw PORTB, movwf PORTC 能正常工作吗

> ID：12824782
> 
> 赞同：1
> 
> 时间：2012-10-10T17:13:28.803
> 
> 标签：assembly, microcontroller, pic, microchip

大家晚安；

我开始用 2 天的图片编程；还有一个关于组装的问题，我在 EASYPIC7（开发）板上有一个 PIC 16F887a。我尝试阅读 PORTB 上的按钮并将它们定向到 PORTC。

所以我坚持我这样做：

```
movlw PORTB ; mov value of PORTB to "W file" (depents on which switches are pressed) 
```

;然后直接

```
movwf PORTC ; mov value of "W file" to PORTC and should light up the led's 
```

但是没有运气，这可以工作（我是否设置了错误的PIC）或者这不能工作，如果是这样，为什么不呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T17:38:15.823

`movlw`在 WREG 中放置一个文字值。这意味着该值是一个常数，在装配时确定。`movlw PORTB`将 PORTB 地址的低字节放在 WREG 中，而不是 PORTB 的值。要获取值，您需要使用`movf`指令。

```
movf PORTB, W ; Place the value of PORTB in WREG
movwf PORTC   ; Store WREG into PORTC 
```

# byte - 如何以块的形式向客户端传输字节？

> ID：12824783
> 
> 赞同：6
> 
> 时间：2012-10-10T17:13:36.317
> 
> 标签：byte, signalr, messages, transfer

`SignalR`当我将大块字节从客户端通过服务器传输到客户端（或客户端到服务器；或服务器到客户端）时，会丢失许多消息。

我将文件读入流中并通过集线器或持久连接将其发送到其他客户端。这运行得非常快，但总是有消息丢失或丢失。

如何在不丢失消息的情况下从客户端传输大文件（无论是否以块的形式）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T18:10:43.683

正如@dfowler 指出的那样，这不是适合这项工作的技术。我建议做的是发送一条消息，说明有一个包含链接的文件要下载，然后您可以使用标准 GET 请求针对静态文件或使用 ASP.NET WebAPI 编写的某些 Web 服务下载该文件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-10T18:00:01.727

SignalR 不是用于文件传输，而是用于发送消息。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-30T19:06:31.973

为什么它不是正确的技术？如果客户端需要向 signalR 集线器发送一些数据，它应该能够通过 signalR 连接而不需要额外的东西。

事实上，发送字节数组时它工作得很好，至少对我来说是这样，但是我在传输块时遇到了类似的问题。

也许您可以做一些测试来检查您发送块的顺序是否与接收它们的顺序相同。

**更新**

我自己做了一个测试，就我而言，顺序确实是问题所在。修改了接收块的集线器方法以接受一个订单参数，然后我用它在最后重建字节数组，它工作正常。话虽如此，但我现在明白这不适用于大文件传输。

在我的情况下，我不需要传输大量数据，我只是想给我的 UI 一个进度指示，要求数据以块的形式发送。

# oracle - 为什么 Oracle 联合会在 SSIS 中创建副本？

> ID：12824784
> 
> 赞同：2
> 
> 时间：2012-10-10T17:13:41.057
> 
> 标签：oracle, ssis, union

在 PLSQL 中，我运行：

```
truncate table MyOracleTableName;
commit work;

insert into MyOracleTablename
select a,b,c,trunc(sysdate) as datadate
from AnotherOracleTableName
where there is a ton of nasty criteria

union
select a,b,c,trunc(sysdate) as datadate from AnotherOracleTableName
where there is a ton of different nasty criteria;
commit work; 
```

在 PLSQL Developer 中，这会插入一行。当我在 SSIS 中运行 SQL（不带分号和提交工作语句）时，我从 MyOracleTableName 得到主键违规。

我已经验证了来自 SSIS 的截断是在 Oracle 中提交的。

当我在 PLSQL Developer 中运行上面的 SQL 并用 union all 替换 union 时，我看到第二行并且插入因 PK 违规而失败。因为它应该与一个联合都允许重复。

这是目前使用 MSDAORA 的 SSIS 2005 包的一部分，它工作得很好。我现在正在使用 Oracle 的本机 OLE DB 提供程序在 SSIS 2008 中重写。

我无法在新环境中使用 MSDAORA。这是一个驱动程序问题吗？除了将它们分成多个语句，第二个语句只插入 MyOracleTableName 中没有的内容之外，还有其他解决方法吗？

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T15:20:18.367

晚饭后我发现了问题。

主键约束是列 A 和 B 上的复合键。列 a、b、c 和日期上的联合重复数据删除。在 Oracle 中，trunc(sysdate) 返回 mm/dd/yyyy。在 SSIS 中，trunc(sysdate) 被解析到秒或毫秒。由于时间戳的原因，这会导致两个唯一行（对于 SQL Server 和 Microsoft），然后尝试在列 a、b 和 c 重复的位置插入重复行。

解决方案是这样的：

```
truncate table MyOracleTableName;
commit work;

insert into MyOracleTablename
select a.*,
       trunc(sysdate) as datadate
from(
select a,b,c
from AnotherOracleTableName
where there is a ton of nasty criteria

union
select a,b,c from AnotherOracleTableName
where there is a ton of different nasty criteria) a

commit work; 
```

这允许联合杀死重复并运行 trunc(sysdate) 一次，从而将单行呈现给我的主键约束。

谢谢你。

# objective-c - 具有可见控件的透明 NSWindow

> ID：12824785
> 
> 赞同：1
> 
> 时间：2012-10-10T17:13:43.983
> 
> 标签：objective-c, macos, cocoa, nswindow

如何`NSWindow`在保持此窗口中的所有控件（视图、按钮...）可见的同时使透明？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T17:32:20.127

```
@implementation MyCustomWindow

- (id)initWithContentRect:(NSRect)contentRect
                styleMask:(NSUInteger)windowStyle
                  backing:(NSBackingStoreType)bufferingType
                    defer:(BOOL)flag
{
    self = [super
            initWithContentRect:contentRect
            styleMask:NSBorderlessWindowMask
            backing:bufferingType
            defer:flag];
    if (self)
    {
        [self setOpaque:NO];
        [self setBackgroundColor:[NSColor clearColor]];
    }
    return self;
}

@end 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-11T11:28:32.857

删除它的标题栏和边框，并创建一个自定义内容视图，您可以在其中覆盖 drawRect: 方法并且什么都不做。

# c++ - 在变化的光照条件下检测多个运动物体。

> ID：12824787
> 
> 赞同：4
> 
> 时间：2012-10-10T17:13:48.527
> 
> 标签：c++, opencv, background, edge-detection, image-segmentation

我正在尝试提取视频帧中的几个移动对象，并将它们提取为前景。数据来自`video frames`。

当前的问题是：光线在变化，所以有一些阴影，或者比实际背景更亮的部分。这导致通过`OpenCV MoG`背景分割方法提取错误的背景/前景。

为此，我没有任何直接的方法，但有这样的想法：如果我可以在前一帧中提取那些移动物体的边缘，那么也许我可以使用`SIFT`下一帧中的算法来跟踪它们，看看在哪里它们是，并将它们视为前景。

我认为在这种情况下，光线变化不会影响结果。如果我在这一点上是对的，**那么我的问题是：**

如何使用 OpenCV 有效地对这些移动物体进行边缘检测？如果我需要`SIFT`在 OpenCV 中使用算法，它可以免费获得吗？从网上，我看到它是非免费的，对吗？

我**的第二个问题是：**有人对此有更好的想法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T18:06:55.060

如果您想进行人体检测/跟踪，您应该**寻找与此相关的研究论文或项目**。有很多，您甚至可以在 SOF 上找到有关该主题的一些问题：

[如何使用 OpenCV 检测和跟踪人员？](https://stackoverflow.com/questions/2188646/how-can-i-detect-and-track-people-using-opencv) **（可能已经过时）**

[来自视频序列的单人跟踪](https://stackoverflow.com/questions/9114596/single-person-tracking-from-video-sequence)

[如何使用视频对物体进行运动跟踪？](https://stackoverflow.com/questions/4701997/how-to-do-motion-tracking-of-an-object-using-video)

此外，还有几个问题涉及特征检测器/描述符，如 SIFT 及其最近的替代品（SURF、ORB、FREAK - 仅列举一些在 OpenCV 中实现的）：

[对于尺度不变的特征提取，SURF 和 SIFT 是否有任何快速的替代方案？](https://stackoverflow.com/questions/10157806/are-there-any-fast-alternatives-to-surf-and-sift-for-scale-invariant-feature-ext)

[用于 ANDROID 图像比较的 OpenCV](https://stackoverflow.com/questions/11045263/opencv-for-android-image-compare)

简单地说，SIFT 不是一种跟踪运动物体的算法，它是检测图像区域，这些区域在某种程度上是独特的，并且对多种失真（平移、旋转、缩放......）具有鲁棒性。这意味着，稍后可以在不同的图像条件下检测到相同的特征。您确实可以使用类似 SIFT 的算法来识别对象，但对于人员跟踪，也许有更好的选择。然后，您可以对这些图像区域应用一些跟踪算法，例如光流 - 但还有更具体的用于人类跟踪的算法。

SIFT 和 SURF 在 OpenCV 中“免费”可用，但其中一部分已获得专利，因此人们避免使用它们，因此他们在未来不会因为这些专利而出现问题——这就是他们转向“非免费”OpenCV 模块的原因.

除了您提到的光线问题之外，您还会遇到的其他问题是**对象遮挡**和人员进出场景。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T15:08:44.223

我可以建议您将图像标准化以进行照明。一种实用的方法是使用“直方图匹配”。

请查看[matlab 中两个彩色图像的直方图匹配](https://stackoverflow.com/questions/6351377/histogram-matching-of-two-colored-images-in-matlab)，了解如何使用直方图匹配。

希望这可以帮助

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T20:56:05.643

我知道您已经接受了 Rui 的回答，但经过一番谷歌搜索后，我找到了解决您问题的另一种方法——它是[HOG Descriptor](http://docs.opencv.org/modules/gpu/doc/object_detection.html)。

不幸的是，我对这个描述符不熟悉，所以我无法帮助你实现，但是，在谷歌搜索之后，我再次发现这个描述符是[用于行人检测的](https://www.google.com.ua/search?q=pedastrian&oq=pedastrian&sugexp=chrome,mod=0&sourceid=chrome&ie=UTF-8#hl=ru&safe=off&sclient=psy-ab&q=pedestrian%20detection%20hog%20opencv&oq=pedestrian%20detection%20hog%20opencv&gs_l=serp.3..0i8i30j0i8i10i30.12117.18213.0.18330.29.19.4.6.7.1.447.2342.9j7j1j0j1.18.0...0.0...1c.1.auZ8vXi-CL4&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&fp=a5bf9f3278c5979d&bpcl=35243188&biw=1366&bih=682)。

看看[这个](https://gist.github.com/1470956)人类检测代码。

# ios - facebook iOS Graph API中的限制偏移量

> ID：12824788
> 
> 赞同：0
> 
> 时间：2012-10-10T17:13:52.093
> 
> 标签：ios, facebook-graph-api, limit, offset

我在使用 iOS 上的图形 API 时遇到了一些问题。我正在尝试从用户那里获取所有 FB 专辑。我注意到，默认情况下，图形 API 回答 25 个第一个元素，然后它们提供下一个和/或上一个 url 来查询其余的。

我的问题是我需要一次查询每个元素（不仅是前 25 个）。

我尝试使用 Facebook 文档中解释的 limit 参数，但我得到一个空数据数组作为响应。当我删除限制参数时，我可以获取 25 个第一个元素。当我尝试使用 until=today 或 until=yesterday 时，Facebook API 的行为方式类似。

这是我正在使用的网址： `https://graph.facebook.com/me/albums?limit=0` 0 应该意味着没有限制，我尝试了 99999 相同的结果。

我想知道是否有人已经从 Graph API 中获得了这种奇怪的行为？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T09:51:18.410

我终于找到了问题所在。

社交网络中存在一个错误，它表明 Apple 总是将字符串附加`"?access_token=[ACCESS_TOKEN]"`到 url 字符串的末尾。

据此，如果您在 URL 字符串之前放置一个参数，则该 URL 无效，因为您将有两个“？” 在字符串中。

为避免这种情况，我使用 NSURLConnection 类以这种方式管理连接：

```
NSString *appendChar = [[url absoluteString] rangeOfString:@"?"].location == NSNotFound ? @"?" : @"&";
NSString *finalURL = [[url absoluteString] stringByAppendingFormat:@"%@access_token=%@", appendChar, self.facebookAccount.credential.oauthToken];
NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:finalURL]];
NSURLResponse *response;
NSError *error;
NSData *data = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];

if (error)
    [self.delegate facebookConnection:self didFailWithError:error];
else
{
    NSError *jsonError;
    NSDictionary *resultDictionnary = [NSJSONSerialization JSONObjectWithData:data options:0 error:&jsonError];

    if (jsonError)
        [self.delegate facebookConnection:self didFailWithError:jsonError];
    else if ([resultDictionnary valueForKey:@"error"])
    {
        NSDictionary *errorDictionary = [resultDictionnary valueForKey:@"error"];
        NSError *facebookError = [NSError errorWithDomain:[errorDictionary valueForKey:@"message"] code:[[errorDictionary valueForKey:@"code"] integerValue] userInfo:nil];
        [self.delegate facebookConnection:self didFailWithError:facebookError];
    }
    else
        [self.delegate facebookConnection:self didFinishWithDictionary:resultDictionnary httpUrlResponse:response];
} 
```

首先，我测试字符串中是否存在参数字符并附加正确的字符。我以我处理错误的方式给你作为奖励。

我仍然使用社交框架来获取凭据并连接用户：

```
 NSDictionary *accessParams = @{ACFacebookAppIdKey:kFacebookAppID, ACFacebookPermissionsKey:@[@"email", @"user_photos", @"user_activities", @"friends_photos"]};
ACAccountStore *accountStore = [[ACAccountStore alloc] init];
ACAccountType *accountType = [accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook];

[accountStore requestAccessToAccountsWithType:accountType options:accessParams completion:^(BOOL granted, NSError *error)
 {
     if (granted)
     {
         NSArray *facebookAccounts = [accountStore accountsWithAccountType:accountType];

         if ([facebookAccounts count] > 0)
         {
             self.facebookAccount = [facebookAccounts objectAtIndex:0];
             self.accessToken = self.facebookAccount.credential.oauthToken;
             [self.delegate facebookConnectionAccountHasBeenSettedUp:self];
         }
     }
     else
        [self.delegate facebookConnection:self didFailWithError:error];
 }]; 
```

在此代码中，我不处理多个 facebook 帐户，但您可以轻松地转换该代码段以用您自己的方式处理它。此外，连接是同步发送的，因为我使用 GCD 来避免阻塞我的界面，但是您可以实现内置在 NSURLConnection 类中的异步方法。

希望这会对某人有所帮助！

# css - 使用锚标签的Firefox奇数填充

> ID：12824790
> 
> 赞同：0
> 
> 时间：2012-10-10T17:13:59.427
> 
> 标签：css, firefox

我正在尝试通过添加背景来制作一个 achor 标签按钮，虽然它在 chrome 和 safari 中看起来不错，但 firefox 15.0.1 似乎有一个错误。

例如，[http://jsfiddle.net/cqVjj/3/](http://jsfiddle.net/cqVjj/3/)显示文本甚至没有垂直居中。我什至没有指定填充、宽度或高度，但我希望得到与 chrome 类似的结果。Firefox 我在底部看到一个空格。

有什么解决办法吗？

铬 21.0.1 ![铬合金](../Images/ecfd45e605d04397f59581b1c6d13f00.png)

火狐15.0.1 ![火狐](../Images/fd27d6b5b783d57833a1de1bfee4eae9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T17:16:35.940

简单修复：

您缺少该`line-height`属性。它的值必须与`font-size`：

`line-height: 34px;`

我更新了你的 jsfiddle：http: [//jsfiddle.net/cqVjj/4/](http://jsfiddle.net/cqVjj/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T04:39:04.237

渲染将取决于浏览器使用的确切字体以及它们决定用于这些字体的确切上升和下降指标。请注意，您甚至没有告诉他们在您的小提琴中使用相同的字体系列。

但即便如此，CSS2.1 对此事的看法是（来自[http://www.w3.org/TR/CSS21/visudet.html#inline-non-replaced](http://www.w3.org/TR/CSS21/visudet.html#inline-non-replaced)）：

```
The height of the content area should be based on the font, but this
specification does not specify how. A UA may, e.g., use the em-box or
the maximum ascender and descender of the font. 
```

我怀疑您正在查看的浏览器实际上只是使用内联内容区域的不同定义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T17:43:09.120

This is not consistent through browsers. I suggest you balance spacing with padding. See example here:

[http://jsfiddle.net/exzRT/](http://jsfiddle.net/exzRT/)

Strangely enough changing the font to a sans-serif font like 'Arial' helps.

# sql - 查看多条记录，其中每个发票需要一条记录聚合 - SQL Server

> ID：12824791
> 
> 赞同：1
> 
> 时间：2012-10-10T17:14:01.760
> 
> 标签：sql, aggregate

我是一家小型制造公司的首席技术官，显然做了一些非常实际的事情，并且感谢那里的专家为经验不足的人提供时间。

我正在尝试为 SQL Server 构建一个查询，以汇总制造过程中每台机器的时间。

我得到的结果看起来像：

```
InvoiceID Min DateIn      MachineName  MachineID
17993     12  2012-09-28  Beam Saw     1
17993     26  2012-09-28  Beam Saw     1
17993     17  2012-10-02  Edge Banding 3
17993     21  2012-10-02  Skipper      4
17993     23  2012-10-03  Shipping     5 
```

等下一张发票。

我的代码：

```
SELECT i.InvoiceID
    ,SUM(DATEPART(Minute,(wf.DateTimeOut - wf.DateTimeIn))) AS [Min]
    ,CAST(wf.DateTimeIn AS DATE) AS [DateIn]
    ,m.MachineName
    ,wf.MachineID
FROM Workflow wf 
    JOIN
        InvoicesPerJobPeriod ipjp
        ON
        ipjp.Workflowid = wf.ID
    JOIN Machines m
        ON 
        m.MachineID = wf.MachineID
    JOIN
        Invoices i
        ON ipjp.InvoiceID = i.InvoiceID
WHERE (i.InActive = '0') 
GROUP BY i.InvoiceID, m.MachineName, wf.MachineID, wf.DateTimeIn
ORDER BY i.InvoiceID, wf.MachineID 
```

我不明白为什么分组显示了 Beam Saw 的多个记录。理想情况下，每台机器、每张发票应该有一个记录。Datetimein 通常是同一天，但我需要显示它，以防制造步骤跨越数天。在那种情况下，我会合理地为一台机器拥有多个记录。

非常感谢你的帮助。非常感谢。

悬崖

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T17:21:43.930

如果`wf.DateTimeIn`两个不同的 Beam Saw 记录完全不同（在日期或时间部分），它们将在`GROUP BY`子句中生成单独的行，即使您在`SELECT`语句中的非聚合使用仅指日期部分。

如果你想要的只是按日期部分分组`DateTimeIn`，你应该这样写：

```
GROUP BY i.InvoiceID, m.MachineName, wf.MachineID, CAST(wf.DateTimeIn AS DATE) 
```

这将确保在其他方面匹配并在同一日期输入的任意数量的 Beam Saw 记录将被组合到一行中。

但是，这可能会更改聚合语句的语义，因此您需要在进行此更改后验证查询是否按您的意愿工作。

# iphone - GameKit：在没有实际连接的情况下使用 GKSession 发送额外信息？

> ID：12824794
> 
> 赞同：3
> 
> 时间：2012-10-10T17:14:20.733
> 
> 标签：iphone, ios, ipad, gamekit, gksession

我正在开发一个 iOS 应用程序，它允许用户在本地与其他设备共享 PDF。当应用程序启动时，设备主动成为搜索正在广播文件的服务器的客户端。当客户端看到服务器时，它会在其选项卡中添加一个标记并向其表中添加一个条目。

我遇到的问题是 GKSession 仅允许在建立连接之前传输一个字符串 - 对等显示名称。我要传输的是文件名、页数，也许还有缩略图。

我目前能想到的实现这种行为的唯一方法是自动连接客户端和服务器，交换文件信息，然后自动断开它们。如果当前只有一个或两个文件正在广播，这可能会很好，当许多不同的设备正在广播时，可能会出现线程/同步问题。

例如，可能有 7 个文件可用。因此，客户端必须一一连接到它们才能接收所有文件的信息。这可能需要相当长的时间，并且用户可能已经决定他们希望下载“文件 1”。通过点击“文件 1”，应建立连接并开始传输。如果客户端正忙于检索有关其他可用文件的信息，这可能无法立即发生。

我还阅读了与服务器断开连接后不久再次连接到服务器的一些问题。（[GKSession 每次尝试都没有连接？](https://stackoverflow.com/questions/6503111/what-gksession-doesnt-connect-on-every-attempt)）。

所以我想这可以归结为简单的问题 - 有没有人知道我如何允许客户端接收有关服务器的其他信息，而不仅仅是 peerID 和 peerName？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T04:00:33.713

如何以 csv 格式设置显示名称，当您收到 csv 名称时，仅显示设备名称。

或者您可以发送一个 NSDictionary 的 JSON 字符串作为显示名称

将 Json 转换为 NSString 的示例：

```
{
     "DeviceName" : "Example",
     "File" : [
            {
                "FileName" : "PDF1"
                "TotalPages" : 100
            }
            ]
} 
```

字符串化版本：

```
{"DeviceName" : "Example","File" : [{"FileName" : "PDF1","TotalPages" : 100}]} 
```

然后，当您收到 DisplayName 时，仅显示 DeviceName 并在某处解析文件详细信息，以便稍后向服务器发送请求。

请记住，我不知道 GKSession 是否对显示名称长度有限制，因此此解决方案可能不适用于大量文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-15T05:34:57.193

我所做的是将显示名称限制为 16 个字符，并使用剩余的 24 个字符供我使用。

我创建了偏移量，从中读取应用程序需要的不同信息。例如 0 到 15 将代表设备名称；16-24 将代表文件扩展名。24 到 39 将代表文件名。如果字符串比其各自的空间长，则根据您的喜好将其截断或截断。如果字符串比其各自的空格短，则用空格填充。我已经编写了从 40 个字符的显示名称中获取这些字符串的方法。如果有人有更好的解决方案，我很乐意在这里。目前无法发布代码，因为我无权访问它。

干杯

# c# - “Payment.GenLedDet”因其保护级别而无法访问

> ID：12824797
> 
> 赞同：0
> 
> 时间：2012-10-10T17:14:32.607
> 
> 标签：c#, c#-4.0, error-handling, data-layer

```
namespace DataAccessLayer
{
    public class PaymentDAL
    {

     public void InsertInGenLedDet(GenLedDet genLedDet)
        {
        }

} 
```

我的 GenLedDet 类在里面`Payment namespace`

这是我在数据层中的代码片段，并且正在使用此代码。不知道为什么会出现此错误，因为我确实有另一个功能没有显示此类错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T17:15:54.023

正如错误试图告诉您的那样，您不能创建一个`public`将非公共类作为参数的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T17:22:10.263

代替

```
private class GenLedDet { 
```

利用

```
public class GenLedDet { 
```

# c++ - 我需要这个简单的重复单词检测器解释

> ID：12824802
> 
> 赞同：-8
> 
> 时间：2012-10-10T17:14:46.197
> 
> 标签：c++

该代码完美运行，但我对它的工作原理感到困惑。我完全不明白为什么我们需要对字符串向量进行排序。它只会按字母顺序对单词进行排序，对吗？此外，当我们将它与字符串变量“Previous”进行比较时，它如何检测任何单词而不仅仅是相邻的单词

```
#include <iostream>
#include <vector>

using namespace std;

void detect(vector<string> vs);

int main() {
vector<string> vs;
string current;
while (cin>>current)
    vs.push_back(current);
    sort(vs.begin(), vs.end());
    detect (vs);
    system("pause");
}

void detect(vector<string> vs){
    string previous = " ";
    int index = 0;
    while (index < vs.size()) {
        if (vs[index]==previous) {
            cout<<"repeated words: " <<previous<< endl;
        }
        previous = vs[index];
        index++;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T17:18:52.360

由于向量是按字母顺序使用 排序的`sort()`，因此任何重复的单词都将彼此相邻（因为它们是同一个单词，并且会在排序中竞争相同的位置）。这样，`detect()`您就可以查看所有相邻单词对并以这种方式检测重复项。如果向量未排序，`detect()`则将不起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T17:31:04.527

答1：如果按字母顺序排序，任何相等的元素都将彼此相邻。

答案 2：它**确实**只得到彼此相邻的相等值，但由于排序，所有相等的值都将彼此相邻。

我希望这有帮助。

# c++ - 实现文件缓存的 C++ 库，如 Web 浏览器

> ID：12824811
> 
> 赞同：0
> 
> 时间：2012-10-10T17:15:30.693
> 
> 标签：c++, caching, browser-cache

是否有用于实现文件缓存系统的通用 C++ 库？这是我发现的最符合我要求的：[https](https://github.com/openwebos/filecache) ://github.com/openwebos/filecache 。以下是我的要求：

1.  通过唯一的哈希在文件系统上缓存数据
2.  偶尔清理缓存以确保它不会溢出
3.  锁定缓存数据，使其在缓存清理期间不会被剔除
4.  存储并允许查询时间戳信息

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T18:19:51.027

不知道它是否满足您的所有需求，但请查看：[jupiterfilecache](http://code.google.com/p/jupiterfilecache/)

# php - 在 textarea 的开头保留换行符

> ID：12824815
> 
> 赞同：3
> 
> 时间：2012-10-10T17:15:48.823
> 
> 标签：php, html, textarea, newline

又来了新问题

```
$a='
1
2
3
'; 
```

在 textarea 中，它显示没有第一个新行。

```
<?php echo'<textarea>',$a,'</textarea>'; /> 
```

像这样

```
----------------
1
2
3
---------------- 
```

但它应该是这样的吗？

```
----------------

1
2
3
---------------- 
```

PS对不起我的英语=）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T18:10:13.067

使用 HTML 十进制或十六进制代码代替空格。

```
<textarea>
&#x0D;
1
2
3
</textarea> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T17:52:43.367

您需要引入浏览器将在行之间呈现的字符，因为 HTML 解析器将忽略正常的空白字符。即：在你想要的不同行之间放置一个中断（字面意思是“<br>”）标签。

# sql - sql 在 sql 子查询中使用 Fieldvalue

> ID：12824822
> 
> 赞同：1
> 
> 时间：2012-10-10T17:16:18.560
> 
> 标签：sql, subquery

我需要一些关于存储过程中的子查询的帮助。

我有两张桌子

```
Tab1: @WerteTab (WVaNr, WVaBez, WVaVon, WVaBis, WVaOrt)

Tab2: TemplateTab(TempField, ViewField) 
```

TemplateTab 的值为

```
Counter TempField  ViewField
1       ccVABez    WVaBez
2       ccVAVon    WVaVon
3       ccVaBis    WVaBis 
```

我的 SQL 看起来像

```
SELECT 
    TemplateTab.TempField, 
    (Select TemplateTab.ViewField From @WerteTab) AS Feldwert
FROM 
    TemplateTab 
```

@WerteTab 只有一行

所以，的值`TemplateTab.ViewField`是`columnName``Tab1`

当我运行 SQL 时`Feldwert`具有相同的值，例如`ViewField`

当我替换为时`TemplateTab.ViewField`，`WVaBez`我得到了正确的值`Tab1`

希望有人可以提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T17:32:34.497

```
SELECT  tt.TempField
,       case ViewField
        when 'WVaNr' then wt.WVaNr
        when 'WVaBez' then wt.WVaBez
        when 'WVaVon' then wt.WVaVon
        when 'WVaBis' then wt.WVaBis
        when 'WVaOrt' then wt.WVaOrt
        end as Feldwert
FROM    TemplateTab tt
CROSS JOIN
        @WerteTab wt 
```

# javascript - 是否可以在 HTML 中声明 LESS 变量？

> ID：12824828
> 
> 赞同：-1
> 
> 时间：2012-10-10T17:16:40.097
> 
> 标签：javascript, less

是否可以在 HTML 中声明 LESS 变量并在单独的 .less 文件中使用声明的变量。

我想做这样的事情：

```
<html>
<head>

<style type="text/less">
  @MYVAR: #9BC509;
</style>

<!-- use MYVAR inside the main.less file -->
<link rel="stylesheet/less" type="text/css" href="styles/less/main.less">

</head>
...
</html> 
```

**编辑：**

由于这不起作用并且不是一个干净的解决方案，我重组了我的项目，现在做一个正常的 less 文件`@incude`为我需要的变量做一个正常的 less 文件。django 模板引擎将 less 文件与数据库值一起动态写入磁盘（并为获得更好的性能而进行了缓存）。

致所有反对者。我真的不明白你的意思！你甚至没有写下你投反对票的原因。我想你没有得到我的目标，这是我应该问“思想迟钝的人”的问题：

如何实现包含`<head></head>`在单独的更少文件中可用的更少变量？但无论如何，这只是为了让人们在某些时候点击这篇文章......正如我所说，我选择了另一种解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-10-03T22:42:51.693

您可以通过在`globalVars`全局`less`对象的属性中定义变量来做到这一点。您应该`less`在调用 less.js 编译器之前声明对象，另请参见：[http ://lesscss.org/usage/#using-less-in-the-browser](http://lesscss.org/usage/#using-less-in-the-browser)

```
<link rel="stylesheet/less" type="text/css" href="global.less">
<script>
    var less = {
    globalVars: {
      color: 'red',
      width: '15px'
    }
    }
</script>
<script src="js/less.min.js" type="text/javascript"></script> 
```

上述使您可以在 global.less 的 Less 代码中使用`@color`和`@width`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-11T15:21:50.227

您可以像这样在 less.js 脚本标签上定义它们：

```
<script src="/js/less.js" data-global-vars='{ "color1": "#333" }' rel="stylesheet/less"></script> 
```

因此，对于 php，您可以执行以下操作：

```
<script src="/less.js" data-global-vars='<?php 
      echo json_encode([
                       'color1' => '#F0CF5B',
                ])
?>' rel="stylesheet/less"></script> 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-15T14:05:24.450

你不能。你可以做的是给你的（或任何其他高级容器）一个类名，然后基于它定义多个值：

```
.home {
  @MYVAR: #9BC509;
}

.page {
  @MYVAR: #fff;
} 
```

或者使用 LESS 守卫（参见[LESS 文档](http://lesscss.org/#docs)）

# c# - 如何在 Web 部件中添加按钮？（入门级）

> ID：12824832
> 
> 赞同：0
> 
> 时间：2012-10-10T17:16:47.680
> 
> 标签：c#, asp.net, .net, sharepoint, sharepoint-2010

我在服务器端创建了一个 Web 部件并成功部署它，但是在我插入该自定义 Web 部件后，没有显示任何按钮..

所以我的问题是：如何使用我已经编写的一种方法创建一个按钮，并自动显示在网站上？

任何机构都可以帮助新秀吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T22:55:23.890

将所有代码添加到 usercontrol，使用 webpart.cs 文件获取与 webpart 相关的代码并加载 usercontrol（即从 webpart 属性初始化 usercontrol 属性等）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T07:51:52.123

你知道可视化 Web 部件（用户控件）和经典 Web 部件的区别吗？

如果您的意思是在可视化 webpart 上添加一个按钮，那么 Ishan 提供的代码是一个很好的起点。

如果您的意思是经典的 wep 部分，下面的代码将在 Web 部分上添加一个按钮：

```
public class YourWebPart : WebPart
{
    protected override void CreateChildControls()
    {
        Button YourButton = new Button();
        YourButton.Text = "Click me !";
        YourButton.OnClientClick = "alert('Cool stuff');";
        this.Controls.Add(YourButton);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T06:28:47.617

如果我正确理解了您的问题：

您的自定义 webpart 将具有 .ascx 文件和 .ascx.cs 文件。在 .ascx 文件中创建一个按钮，相关方法应该在 ascx.cs 中

**.ascx**

```
<asp:Button ID="btnFacilities" runat="server" Text="Facilities" /> 
```

**.ascx.cs**

```
 protected void btnFacilities_Click(object sender, EventArgs e)
        {
            //Your Code
        } 
```

添加后部署，然后检查您的站点页面。

# java - 快速包含和 LIFO 数据结构

> ID：12824834
> 
> 赞同：1
> 
> 时间：2012-10-10T17:17:04.840
> 
> 标签：java

我正在寻找具有快速 contains() 方法的 java 中的数据结构，但可能需要某种排序，因为我需要能够添加到它并从中获取，但我希望它像一个 Stack具有后进先出功能。这可能吗？我想到了一个具有快速 contains() 但不保证排序的 HashSet，以及一个保证排序但慢速 contains() 的 LinkedList。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T17:28:05.733

嗯，如果您需要进行 LIFO 堆栈操作，则无法对集合进行排序，因为这样您就失去了将项目添加到集合中的顺序。

坦率地说，做你想做的最简单的方法可能是创建两个并行结构，比如创建一个 Stack 和一个 HashMap。将它们包装在一个更大的类中，该类具有始终添加/删除两者的添加和删除功能。然后，您可以使用堆栈进行推送和弹出，并使用 HashMap 进行包含。

通常我讨厌创建重复数据，但我看到做你想做的唯一方法是拥有一个“索引堆栈”，这几乎就是我在这里建议的方法。

我强调将其包装在一个执行添加和删除的类中，并确保所有添加和删除都通过该类。否则，如果您有散布在各处的添加/删除代码，则可能会导致这两个结构不同步。强制它通过一个类，您只需调试该部分一次。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T17:30:17.867

`LinkedHashSet()`让你部分到达那里，但不幸的是，它并没有提供一个去除 LIFO 的好方法。

我认为你想要的是包含一个`LinkedList<T>`（用于 LIFO 删除）和一个`HashMap<T, Integer>`（用于跟踪基数）的东西。然后你会有这些方法（非常粗略）：

```
public class QuickCheckStack<T> {

   private final Map<T, Integer> elementCardinality = new HashMap<T, Integer>;
   private final Deque<T> stack = new LinkedList<T>();

   public void push(T element) {
      Integer count = elementCardinality.get(element);
      if (count == null) {
          count = 0;
      }
      elementCardinality.put(element, count + 1);
      stack.push(element);
   }

   public T pop() {
      T element = stack.pop();
      elementCardinality.put(element, elementCardinality.get(element) - 1);
      return element;
   }

   public boolean contains(T element) {
      Integer count = elementCardinality.get(element);
      return count != null && !count.equals(0);
   }
} 
```

# c# - 如何创建自定义值注入以将我的实体映射到我的视图模型？包括尝试

> ID：12824836
> 
> 赞同：2
> 
> 时间：2012-10-10T17:17:11.170
> 
> 标签：c#, mapping, valueinjecter

我正在尝试使用 ValueInjector（来自 NuGet 的最新版本）将来自我的 EntityFramework Code First 对象的数据注入我的视图模型。我也想做相反的事情，但这是我开始的尝试。

我研究了各种映射并尝试了其中的许多。我还没有找到一个可以满足我需要的问题，而且我认为我的需要是一个相当基本的问题（SO 上有几个这样的问题，每个问题似乎都得到了不同的答案，这很好。）。

我真的试图对此进行尽职调查。我用谷歌搜索并搜索了 CodePlex 并下载了 ProDinner 应用程序（启动并运行它并在调试中逐步执行代码）。

我现在有自己的 ValueInjection 类来处理注入。我将以一种非常友好的方式粘贴我的代码和对象，以便您可以抓取并运行它们。请注意，我有一个使用基本 LoopValueInjection 的解决方案，但我不喜欢它，因为它需要手动管道来进行从实体到映射然后映射到实体的注入。ProDinner 示例有一个更加模板化的方法，我喜欢这种方法，但我无法适应我的需要。

我认为我的代码在逻辑上搞砸的地方是，如果源属性类型不是简单的对象，我不明白如何强制进行递归注入。在此示例中，Person.Address.* 属性将按名称匹配并在 PersonViewModel 类中键入这些属性；但是，注入循环遍历 Person 上的属性，并尝试匹配 Person.Address 属性的名称和类型。

我以为行

```
 Object result = Activator.CreateInstance(c.SourceProp.Type)
            .InjectFrom<CloneInjection>(c.SourceProp.Value); 
```

会执行此递归，但我认为不会。

所以......谁能给我任何关于如何解决这个问题的指导？

```
//////  ENTITY MODELS

public class Person
{
    public int Id { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public virtual Address Address { get; set; }
}

public class Address
{
    public int Id { get; set; }
    public string City { get; set; }
    public string State { get; set; }
    public string Zip { get; set; }
}

//////  VIEW MODEL 

public class PersonViewModel
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public int PersonId { get; set; }
    public int AddressId { get; set; }
    public string City { get; set; }
    public string State { get; set; }
    public string Zip { get; set; } 
}   

////// CUSTOM INJECTOR
public class EntityToViewModel : ConventionInjection
{

    protected override bool Match(ConventionInfo c)
    {
        //ignore int = 0 and DateTime = to 1/01/0001
        if (c.SourceProp.Type == typeof(DateTime) && (DateTime)c.SourceProp.Value == default(DateTime) ||
            (c.SourceProp.Type == typeof(int) && (int)c.SourceProp.Value == default(int)))
            return false;

        if (c.SourceProp.Name == c.TargetProp.Name && c.SourceProp.Value != null)
            return true;

        if (c.SourceProp.Type == typeof(int) &&
            c.TargetProp.Type == typeof(int) )
        {
            if( "id".Equals(c.SourceProp.Name.ToLower()) &&                 
                c.TargetProp.Name.ToLower().EndsWith("id") &&
                c.TargetProp.Name.StartsWith(c.Source.Type.Name))
            return true;
        }

        //Transition logic to SetValue for value types. This should 
        //allow Address values on Person to be set.
        if (!c.SourceProp.Type.IsPrimitive || c.SourceProp.Type.Equals(typeof(string)))
            return true;

        return false;

        //put id logic matching here
        //return c.SourceProp.Name == c.TargetProp.Name && c.SourceProp.Value != null;
    }

    protected override object SetValue(ConventionInfo c)
    {
        //If type is primative or string return the value as is   
        if (c.SourceProp.Type.IsPrimitive || c.SourceProp.Type.Equals(typeof(string)))
            return c.SourceProp.Value;

        Object result = Activator.CreateInstance(c.SourceProp.Type)
            .InjectFrom<CloneInjection>(c.SourceProp.Value);

        //for simple object types create a new instace and apply the clone injection on it
        return result;
    }
}   

////// Program.cs
public class Program
{

    public static void Main(string[] args)
    {
        Person defaultPerson = getDefaultPerson();
        //Throws an error. I'm not sure where in the pipeline this occurs, but 
        //it seems to happen somewhere other than the Match & SetValue method of 
        //my EntityToViewModel injection
        PersonViewModel pvm = CreateFromEntity(defaultPerson);          

        //Works, but want it more generic & without having to 
        //include hardcoded prefix for every non-simple object on my EF Model
        pvm = CreateFromEntityWorking(defaultPerson);
        Console.ReadLine();
    }

    private static PersonViewModel CreateFromEntity(Person person)
    {
        PersonViewModel pvm = new PersonViewModel();
        pvm.InjectFrom<EntityToViewModel>(person);
        return pvm;
    }

    ///WORKING MAPPING BUT SEEMS TOO HARDCODED
    private static PersonViewModel CreateFromEntityWorking(Person person)
    {
        PersonViewModel personvm = new PersonViewModel();

        //Fill out view model properties with the same name as those on Person
        personvm.InjectFrom(new LoopValueInjection().TargetPrefix("Person"), person);

        if (person != null && person.Address != null)
        {
            //Fill out view model properties for the Address
            personvm.InjectFrom(new LoopValueInjection().TargetPrefix("Address"), person.Address);
        }

        return personvm;
    }       

    public static Person getDefaultPerson()
    {
        Person p = new Person();
        Address a = new Address();
        p.Id = 1;
        p.FirstName = "John";
        p.LastName = "McClain";
        a.City = "New York";
        a.State = "New York";
        a.Zip = "55555";
        a.Id = 2;
        p.Address = a;
        return p;
    }   

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T14:29:15.920

终于找到了我需要的例子。可悲的是，尽管我进行了所有的搜索，但我现在才刚刚登陆这些。这不是我自己的错；然而，我的脚因为我一直在踢它而感到酸痛。

相关网址：

文档 (RTFM) [http://valueinjecter.codeplex.com/documentation](http://valueinjecter.codeplex.com/documentation)

展平示例和约定 [http://valueinjecter.codeplex.com/wikipage?title=flattening&referringTitle=Documentation](http://valueinjecter.codeplex.com/wikipage?title=flattening&referringTitle=Documentation)

展开示例和约定 [http://valueinjecter.codeplex.com/wikipage?title=unflattening&referringTitle=Documentation](http://valueinjecter.codeplex.com/wikipage?title=unflattening&referringTitle=Documentation)

我的问题的解决方案：

必须在视图模型上使用的约定是顶级属性不以它们的属性名称为前缀，因为它存在于实体上。因此，在我下面的类中，FirstName、LastName 和 Id 都作为我的 Person 实体的顶级属性存在，它们在我的视图模型类中没有前缀。Person.Address 属性的 City、State、Zip 和 Id 都带有前缀。

奇怪的是，我在尝试实现自己的注入时想到了这个解决方案。我得到了一个从 Entity 到 ViewModel 的工作......只是不是相反。

```
public class PersonViewModelPrefixed
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public int Id { get; set; }
    public int AddressId { get; set; }
    public string AddressCity { get; set; }
    public string AddressState { get; set; }
    public string AddressZip { get; set; } 
}

public static void Main(string[] args)
{   
        Person defaultPerson = getDefaultPerson();
        PersonViewModelPrefixed defaultPrefixedVm = getDefaultPrefixedViewModel();

        //flatten - Entity to View Model
        PersonViewModelPrefixed pvm = Flatten(defaultPerson);

        //unflatten - View Model to Entity
        Person person2 = Unflatten(defaultPrefixedVm);  
    Console.ReadLine();
}       

//unflatten - View Model to Entity
private static Person Unflatten(PersonViewModelPrefixed personViewModel)
{
    Person p = new Person();
    p.InjectFrom<UnflatLoopValueInjection>(personViewModel);
    return p;
}

//flatten - Entity to View Model
private static PersonViewModelPrefixed Flatten(Person person)
{
    PersonViewModelPrefixed pvm = new PersonViewModelPrefixed();
    pvm.InjectFrom<FlatLoopValueInjection>(person);
    return pvm;
} 
```

那么，鉴于这些细节，是否有人对如何使 Flatten 和 Unflatten 方法更通用有一些建议？这就是我接下来要做的工作。

# ios - App以非标准方式启动In App Purchase流程

> ID：12824837
> 
> 赞同：1
> 
> 时间：2012-10-10T17:17:30.763
> 
> 标签：ios, in-app-purchase

Apple 拒绝了我的申请，原因如下：“应用程序以非标准方式启动应用内购买流程。

应用程序没有先显示项目描述并在用户点击确定后要求登录，而是先要求登录，这是错误的顺序。"

我检查了我的代码，但它与我的其他应用程序相同，应用程序内购买工作正常。然后我更改了捆绑 ID 和产品 ID（从我的其他应用程序设置捆绑 ID）并且效果很好！

我觉得这很奇怪。有人遇到过这个问题吗？你能帮助我吗？

升级版：

在调试器中，我看到了这个错误：

“完成交易期间出现意外异常：无法完成购买交易”

它此时发生在代码中：

```
 @try 
    {
        [[SKPaymentQueue defaultQueue] finishTransaction: transaction]; 
    }
    @catch (NSException *exception) 
    {
        NSLog(@"Unexpected exception during finish transaction: %@", exception);
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T12:45:26.997

您的错误消息似乎表明您正在尝试完成状态为`SKPaymentTransactionStatePurchasing`.

您应该`[transaction transactionState]`首先检查交易的状态，以确保交易是：

> SKPaymentTransactionStateFailed
> 
> SKPaymentTransactionStatePurchased
> 
> SKPaymentTransactionStateRestored

有关进一步说明，请参阅 Apple 文档：

> 您的应用程序应该从收到付款队列通知的事务观察器调用此方法。在事务上调用 finishTransaction: 会将其从队列中移除。您的应用程序应该调用 finishTransaction: 只有在它成功处理了事务并解锁了用户购买的功能之后。
> 
> 在处于 SKPaymentTransactionStatePurchasing 状态的事务上调用 finishTransaction: 会引发异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T10:56:21.997

是的，我解决了这个问题。这很奇怪，但是在 itunesconnect.apple.com 中重新创建我的游戏对我有帮助。

# javascript - Chrome - Javascript 排序不一致

> ID：12824838
> 
> 赞同：3
> 
> 时间：2012-10-10T17:17:30.840
> 
> 标签：javascript, google-chrome, sorting

我知道 Chrome 的排序不稳定问题，但是在排序字符串时我不知道如何解决这个问题。

```
myArray.sort(function(a, b){
        var typeA=a.toLowerCase();
        var typeB=b.toLowerCase();

        return (typeA < typeB) ? -1 : (typeA > typeB) ? 1 : 0;
        }); 
```

在 FF 和 Safari 中运行良好，但在 Chrome 中这仍然返回错误的顺序。也就是说，Chrome 不尊重如果 typeA == typeB，return 0...它仍然选择移动它。是否有解决排序字符串的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T18:10:49.890

JS 规范不要求排序算法是稳定的，所以你不能指望它。

解决不稳定排序问题的唯一确定方法是手动编写不同的稳定算法，或者添加一个额外的唯一键进行排序，以确保比较函数始终将两个元素视为彼此更大或更小，但绝不会视为平等的。原始数组索引就可以了。

# tsql - 从主查询 T-SQL 中过滤子查询结果

> ID：12824839
> 
> 赞同：-1
> 
> 时间：2012-10-10T17:17:31.137
> 
> 标签：tsql, filter, subquery

我努力了

```
select title
from BOOKS B, AUTHOR A, LOANS U
where a.author_id = b.author_id
and not B.book_id = U.book_id
order by A.name 
```

和

```
select title
from BOOKS B, AUTHOR A, LOANS U
where b.author_id = a.author_id
and not b.book_id in (select u.book_id from LOANS)
order by A.name, b.title 
```

我需要的只是我的子查询的结果`select u.book_id from LOANS`

基本上，表 LOANS 包含从图书馆借来的 book_id 列表。

我需要还没有借出的 book_id 。然后需要按作者姓名的字母顺序对它们进行排序（因此`order by A.name`）

注意：包含书籍的表仅包含 author_id。要获得作者的姓名，我需要将该 author_id 与表 AUTHOR 中的 id 进行比较。

谁能告诉我我做错了什么或者-如果我使用了错误的方法-改用什么方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T17:20:02.433

这将选择以前未借出的任何书籍的标题。我们可以通过使用`NOT IN`语句从 BOOKS 中返回`book_id`不在`LOANS`表中的任何标题来检查这一点：

```
SELECT b.title
FROM BOOKS b
INNER JOIN AUTHORS a ON a.author_id = b.author_id 
WHERE b.book_id NOT IN (
    SELECT book_id FROM LOANS
)
ORDER BY a.[Name] 
```

您确实应该使用 ANSI 连接语法而不是使用`WHERE`语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T17:29:37.927

您的查询加入了`Loans`表，但随后尝试在`Loans`. 如果您删除连接上的第二个查询应该工作`Loans`。第一个如果你`LEFT OUTER JOIN`和检查`U.Book_Id is NULL`。

顺便说一句，您的子查询返回限定列`u.book_id`。这不会像您在 select from 中所期望的那样`Loans`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T17:28:49.723

我已经找到了。 `FROM BOOKS B, AUTHOR A, LOANS U` 必须是`FROM BOOKS B, AUTHOR A`

我的代码最终有效：

```
select title
from BOOKS B, AUTHOR A
where b.author_id = a.author_id
and not b.book_id in (select u.book_id from LOANS U)
order by A.name 
```

# javascript - 如何使用 jquery 每个 HTML dom 并获取属性转换为 JSON

> ID：12824843
> 
> 赞同：0
> 
> 时间：2012-10-10T17:18:09.507
> 
> 标签：javascript, jquery, json, dom

我想在提交表单时获取 html dom 属性并转换为 JSON。

这是html表单元素：

```
<div data-role="fieldcontain">
    <fieldset data-role="controlgroup" data-type="vertical" data-mini="true">
        <legend>1、question1？&lt;/legend>
        <input name="yes" id="checkbox5"
        type="checkbox">
        <label for="checkbox5">yes</label>
        <input name="no" id="checkbox16" type="checkbox">
        <label for="checkbox16">no</label>
    </fieldset>
</div>
<div data-role="fieldcontain">
    <fieldset data-role="controlgroup" data-type="vertical" data-mini="true">
        <legend>2、question2？&lt;/legend>
        <input name="below_60" id="checkbox9"
        type="checkbox">
        <label for="checkbox9">60</label>
        <input name="btw_60_80" id="checkbox13" type="checkbox">
        <label for="checkbox13">60-80</label>
        <input name="btw_80_100" id="checkbox14" type="checkbox">
        <label for="checkbox14">80-100</label>
    </fieldset>
</div> 
```

JSON是这样的：

```
[{
    {
        "question": "1、question1？",
        "ask": {
            ["type": "checkbox", "name": "yes", "value": "yes", "isChecked": 0], ["type": "checkbox", "name": "no", "value": "no", "isChecked": 1]
        }
    },{
        "question": "2、question2？",
        "ask": {
            ["type": "checkbox", "name": "below_60", "value": "60", "isChecked": 1], ["type": "checkbox", "name": "btw_60_80", "value": "60-80", "isChecked": 1], ["type": "checkbox", "name": "btw_80_100", "value": "80-100", "isChecked": 1]
        }
    }
 }] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T17:24:12.407

看起来[http://api.jquery.com/serialize/](http://api.jquery.com/serialize/)可能会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T17:35:14.460

试试这个：

```
$(function(){
    var data = [];
    $('fieldset').each(function(){
        var fieldset = $(this);
        var item = { question: fieldset.find('legend').text(), ask: [] };
        fieldset.find('input').each(function(){
            var input = $(this);
            item.ask.push({ type: input.attr('type'), name: input.attr('name'),
                        isChecked: input.is(':checked') ? '1' : '0',
                        value: fieldset.find('[for="' + input.attr('id') + '"]').text() });
        });
        data.push(item);
    });
    console.log(data);
}); 
```

演示：http: [//jsfiddle.net/Qf3pX/](http://jsfiddle.net/Qf3pX/)

# c - 在C中将进程置于后台

> ID：12824848
> 
> 赞同：5
> 
> 时间：2012-10-10T17:18:45.537
> 
> 标签：c, unix, background-process

我目前正在潜心研究`C`使用`&`. 我需要实现非阻塞`waitpid`才能使其正常工作。我知道。`&`另外，如果在命令行末尾输入，我已经掌握了条件。我只是不确定如何准确地将进程最终发送为后台作业，并将其实现为正在执行，而另一个提示正在提示输入下一个命令。
任何事情都会有所帮助，谢谢。

```
 struct bgprocess{
        int pid;
        struct bgprocess * next;
        struct bgprocess * prev;    
    };

    struct bgprocess * bgprocess1;
    bgprocess1 = malloc(sizeof(struct bgprocess));
    bgprocess1->prev = NULL;
    bgprocess1->next = NULL;
    bgprocess1->pid = NULL;

    struct bgprocess * current;
    current = bgprocess1;

    do{
        int bgreturn = 0;
        while (current != NULL){
            if (waitpid(current->pid, &bgreturn, WNOHANG)){
                printf("Child exited");
                current->prev->next = current->next;
                current->next->prev = current->prev;
                current->prev = NULL;
                current->next = NULL;
                free(current);                  
            }
        current = current->next;    
        }
        if (end){
            int pid = fork();
            if (pid < 0){
                exit(1);            
            }       
            if (pid) {
                execvp(args[0], args);          
                exit(0);            
            }

            struct bgprocess * newNode;
            newNode = malloc(sizeof(struct bgprocess));
            newNode->pid = pid;
            newNode->next = NULL;

            if (current->next == NULL){
                current->next = newNode;        
            }
            while (1){
                if (current->next == NULL){
                    current->next = newNode;
                }           
                current = current->next;
            }

        }
    }
    while (current != NULL);

    int bgreturn = 0;
    while (current != NULL){
        if (waitpid(current->pid, &bgreturn,0)){
            printf("Child exited");
            current->prev->next = current->next;
            current->next->prev = current->prev;
            current->prev = NULL;
            current->next = NULL;
            free(current);  
        }
        current = current->next;
    }
    } 
```

好吧，所以我一直在努力解决这个问题，我想我可能开始理解了。我仍然有一些我不知道如何修复的语法错误，所以我可能会使用 gdb 或其他东西，除非其他人能指出它们。我是以正确的方式去做还是我完全错了？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-10T17:23:29.623

听起来你正在实现一个外壳。

只需使用[fork](http://linux.die.net/man/2/fork)创建一个子进程 - 这将是并发的。从那里您可以使用[exec* 系列](http://linux.die.net/man/3/execlp)来执行您喜欢的任何可执行文件，或者在父级返回并提示更多信息（下一个命令等）时在子级中运行 C 代码。在顶部使用带有 WNOHANG 选项的[等待](http://linux.die.net/man/2/wait)循环检查终止的孩子，并再次（这次没有 WNOHANG）在最后检查其余的孩子。

我必须鼓励你不要把它弄得比实际更复杂。用简单的英语（或你的母语，或伪代码）写出你想要的东西，然后用最少的聪明把它翻译成 C。

（伪）代码：

```
struct child {
    int pid;
    struct child * next;
    struct child * prev;
}
struct child * children = null;
do {
    int return = 0;
    struct child * curr = children;
    while(curr != null){
        if(waitpid(curr->pid, &return, WNOHANG)){
            //Report child exited with return status 'return'
            //Remove child (linked list style)
         }
         curr = curr->next;
     }
     /* PROMPT, ETC */
     if ( doInBackground ){
         int pid = fork();
         if(pid <0 )exit(); //error
         if(pid){
             //Child
             execvp(processName, arrayOfArgs);
             //This should never get executed
             exit();
         }
         //Add pid (linked list style, again)
     }
}while(!exitCondition)

int return = 0;
struct child * curr = children;
while(curr != null){
    if(waitpid(curr->pid, &return, 0)){
        //Report child exited with return status 'return'
        //Remove child (linked list style)
    }
    curr = curr->next;
} 
```

# ruby-on-rails - 如何在 Rails 3 项目中使用 CoffeeScript 编写 Jasmine 单元测试？

> ID：12824855
> 
> 赞同：0
> 
> 时间：2012-10-10T17:19:11.010
> 
> 标签：ruby-on-rails, ruby-on-rails-3, coffeescript, jasmine

真的很简单：我想用 CoffeeScript 编写基于 Jasmine 的 JS 单元测试，但我不想手动编译。运行 Jasmine，它不使用 Asset Pipeline 作为规范。

这里有什么好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T18:33:12.697

为此，只需将**[jasminerice](https://github.com/bradphelan/jasminerice)**、**[jasmine](https://github.com/pivotal/jasmine)**添加到您的 Gemfile 并运行**bundle**

创建文件 spec/javascripts/spec.js.coffee 的内容：

```
#=require_tree ./ 
```

最好访问此[链接](https://github.com/bradphelan/jasminerice)以获取更多详细信息

# iphone - APNS 仅通过命令行工作

> ID：12824857
> 
> 赞同：0
> 
> 时间：2012-10-10T17:19:16.103
> 
> 标签：iphone, ios, xcode, apple-push-notifications

我正在使用 Ray Wenderlich APNS php 脚本来推送 APS 消息。当我从服务器上的命令行调用它时，该脚本工作正常。但是，当我从应用程序调用它时，它什么也不做。我正在使用带有苹果沙盒地址的开发应用程序。同样，当我从命令行调用相同的脚本时，它会立即发送消息，但是从应用程序调用 php 文件不会产生任何结果。

命令行是否允许 php 打开到 APNS 服务器的连接而 php 路由阻止连接？

使用命令行：C:\php\php.exe -f "D:\dir\site\php\commentPush.php" 连接到 APNS 消息成功传递

使用我的应用程序： NSString *strPush = [NSString stringWithFormat:@"http://www.mysite.com/php/commentPush.php"];

*注意 - 我对所有服务器端的 php 执行成功地使用了相同的技术和字符串。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T18:15:33.650

您应该检查您的 php 配置文件，以了解命令行配置和服务器模块配置之间的差异。

[http://www.php.net/manual/en/configuration.file.php](http://www.php.net/manual/en/configuration.file.php)

在没有看到您的 PHP 代码的情况下，我将首先查看 fopen_url 配置参数。此外，您是否在服务器日志中收到任何错误或警告？

# c++ - 使用 UDP 的电子邮件客户端/服务器

> ID：12824866
> 
> 赞同：1
> 
> 时间：2012-10-10T17:20:34.180
> 
> 标签：c++, smtp, udp

谁能帮我创建一个使用 UDP 的简单、基本的电子邮件客户端和电子邮件服务器，并熟悉 SMTP 的工作原理？

我刚刚开始计算机网络，我只需要知道所涉及的步骤。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T17:38:47.650

Internet RFC ( *Request For Comments* ) 是此类信息的最佳来源：[RFC 821](http://www.faqs.org/rfcs/rfc821.html)中概述了 SMTP 。好消息是 SMTP 是一个基于文本的协议，就像 HTTP 和朋友一样。

`C`这是客户端和服务器之间的示例对话`S`（取自维基百科）：

```
S: 220 smtp.example.com ESMTP Postfix
C: HELO relay.example.org
S: 250 Hello relay.example.org, I am glad to meet you
C: MAIL FROM:<bob@example.org>
S: 250 Ok
C: RCPT TO:<alice@example.com>
S: 250 Ok
C: RCPT TO:<theboss@example.com>
S: 250 Ok
C: DATA
S: 354 End data with <CR><LF>.<CR><LF>
C: From: "Bob Example" <bob@example.org>
C: To: "Alice Example" <alice@example.com>
C: Cc: theboss@example.com
C: Date: Tue, 15 January 2008 16:02:43 -0500
C: Subject: Test message
C:
C: Hello Alice.
C: This is a test message with 5 header fields and 4 lines in the message body.
C: Your friend,
C: Bob
C: .
S: 250 Ok: queued as 12345
C: QUIT
S: 221 Bye
{The server closes the connection} 
```

对电子邮件使用 UDP 并不是最好的主意，因为 UDP 数据包可能会被丢弃。TCP会更好用。但既然你提到这是一个任务，我想没关系。

因此，首先编写您的通用 UDP 客户端/服务器代码。然后修改它以支持 SMTP 命令。

我将首先实现简单的`echo`协议。`echo`或者只是在您最喜欢的协议语言中在线搜索一些源代码。例如，如果您想将 C++ 与*boost.asio 一起*用于网络，它具有UDP客户端和服务器的[演示代码。](http://www.boost.org/doc/libs/1_49_0/doc/html/boost_asio/example/echo/)[对于 Perl，这里](http://icmp.ru/man/programming/perl/cookbook/ch17_06.htm)`echo`有一些简单的 UDP 代码。

然后浏览您需要的 RFC 821 部分，然后从那里开始。我猜因为这是一项任务，您可能不需要协议中的所有内容。

由于协议只是简单的文本命令和响应，因此解析它应该不是问题。

# javascript - 关闭按键监听功能的游戏暂停

> ID：12824869
> 
> 赞同：0
> 
> 时间：2012-10-10T17:20:58.767
> 
> 标签：javascript, events, key

我搞砸了一个非常简单的游戏，它有一个左右箭头的键监听器。

当我用空格键暂停游戏时，我希望那些听众在游戏暂停时什么都不做。我在想我可以将它实现到暂停功能中，或者当按键听众听到空格键时。我对此比较陌生，只是不知道该怎么做。

```
function keyListener(e){
   if(!e){
      //for IE
      e = window.event;
   }
   if(e.keyCode==37 && paddleLeft > 0){
      //keyCode 37 is left arrow
      paddleLeft -= 25;
      paddle.style.left = paddleLeft + 'px';
   }
   if(e.keyCode==39 && paddleLeft < 925){
      //keyCode 39 is right arrow
      paddleLeft += 25;
      paddle.style.left = paddleLeft + 'px';
   }
   if(e.keyCode==32){
      pause();
   }
} 
```

这是暂停功能：

```
function pause(){
   if(!gamePaused){
      timer = clearTimeout(timer);
      gamePaused = true;
   } else if(gamePaused) {
      timer = setTimeout(start(),1000/50);
      gamePaused = false;
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T17:23:21.650

```
if(e.keyCode==37 && paddleLeft > 0 && !gamePaused){
      //keyCode 37 is left arrow
      paddleLeft -= 25;
      paddle.style.left = paddleLeft + 'px';
   }
   if(e.keyCode==39 && paddleLeft < 925 && !gamePaused){
      //keyCode 39 is right arrow
      paddleLeft += 25;
      paddle.style.left = paddleLeft + 'px';
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T17:25:09.877

只需在左/右 ifs 中放置一个**!gamePaused条件。**

如果您禁用 keyListener，您将无法再取消暂停游戏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T18:10:58.947

或者，您可能需要考虑维护一组关键侦听器。空格键会将新的按键监听器压入堆栈，相应的菜单选项会将其弹出，游戏循环只会更新顶部的监听器。

# mysql - Mysql：在两列之间选择值

> ID：12824871
> 
> 赞同：17
> 
> 时间：2012-10-10T17:21:06.270
> 
> 标签：mysql, sql, between

我正在尝试在 2 列之间选择一个值。这是我的数据集

```
id    from    to    price
1     0.00    2.00  2.50
2     2.00    3.00  3.00
3     3.00    4.00  4.50 
```

如果我的值为 2，我的目标是选择**ID 为 1**的行（介于 from 和 to 之间）。所以这是我正在使用的查询：

```
select * from table where 2 between from and to; 
```

以下是 MySQL 在执行此查询时返回的结果：

```
id    from    to    price
1     0.00    2.00  2.50
2     2.00    3.00  3.00 
```

我正在寻找的结果如下：

```
id    from    to    price
1     0.00    2.00  2.50 
```

我试过使用 < 和 > 等。但是，我总是得到两个结果。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2014-07-26T14:40:35.253

你可以试试这个：

```
SELECT * FROM `table` WHERE 2 BETWEEN `from` AND `to` 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-10T17:23:38.787

所以，你不希望下限具有包容性，对吧？

```
SET @value = 2;
SELECT * FROM table WHERE from > @value AND @value <= to; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-10T17:33:54.473

**查询一：**

```
select * 
from `table` 
where `from` < 2 and `to` >= 2 
```

[SQL 小提琴示例](http://sqlfiddle.com/#!2/716ea/1)

**输出：**

```
| ID | FROM | TO | PRICE |
--------------------------
|  1 |    0 |  2 |     3 | 
```

**查询 2：**

```
select * 
from `table` 
where `from` < 2.001 and `to` >= 2.001 
```

**输出：**

```
| ID | FROM | TO | PRICE |
--------------------------
|  2 |    2 |  3 |     3 | 
```

`0`注意：使用这种方法，除非您修改查询以适应这种情况，否则您将无法返回 value 行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-21T05:27:49.163

你也可以试试这个

```
select * from table where (from-to) = 2  // if you want the exact distance to be 2 
select * from table where (from-to) >= 2 // Distance more than 2 
```

# c++ - 添加两个节点并在比较时删除一个

> ID：12824873
> 
> 赞同：0
> 
> 时间：2012-10-10T17:21:10.020
> 
> 标签：c++, linked-list, nodes

在链接列表中，我想将每个节点与另一个节点进行比较，如果它们相似，则将它们加在一起。我在浏览链接列表然后添加在一起时遇到问题。

我的 main.cpp：

```
 #include <cstdlib>
  #include "list.h"
  int main(){
  Poly poly=new_list();
  Poly poly2=new_list();
  Poly merged= new_list();
  int n;
  int deg;
  float coef;
  n=1;
  while (n==1)
     {
      cout<<"Enter coefficient ";
      cin>> coef;
      cout<<"Enter degree ";
      cin>>deg;
      insert_front(&poly,coef,deg);
      cout<<"Enter 1 to continue or 0 to break ";
      cin>>n;
  }
  print_list(poly);
  cout<<"sorted\n";
  reduce(poly);

} 
```

这是我的头文件：

```
//list.h                                                                       
#include <iostream>
using namespace std;
#ifndef LIST_H
#define LIST_H
struct Term {
    int deg;
    float coef;
    Term *next;
};
typedef Term* Poly;
Poly new_list();
void insert_front(Poly* ppoly,int deg, float coef);
void print_list(Poly poly);
void delete_front(Poly* ppoly);
bool is_empty(Poly poly);
Poly merge(Poly *ppoly,Poly *ppoly2);
void split_list(Poly* ppoly,Poly *ppoly2);
void mergesort(Poly* pl);
void reduce(Poly poly);
#endif 
```

我拥有将用户系数和多项式的度数并将它们打印出来的所有功能，还将它们从最低度到最高度归并排序。

功能：

list.cpp
#include "list.h" Poly new_list(){ Poly poly = 0; 返回聚；} void insert_front(Poly* ppoly,int deg, float coef){ Term* t; t = 新术语；t->coef=coef; t->度=度；t->下一个 = *ppoly; *多聚 = t; 返回; } void print_list(Poly poly){ 术语* p; p = 聚; if(p == 0) cout << "--- 空列表 ---"; while(p !=0){ cout << p->deg<<"x^"<coef<<" + "; p = p->下一个；} cout << endl; } void delete_front(Poly* ppoly){ 期限* t; if( !is_empty(*ppoly) ){ // 列表不为空
t = (*ppoly); *ppoly = (*ppoly)->下一个；删除 t; } }

```
bool is_empty(Poly poly){
  return (poly == 0); //return true if list empty                                                                                                                                                                                 
}

Poly merge(Poly* ppoly, Poly* ppoly2){
    Term **pp;
    Poly merged, list1,list2;
    merged= new_list();
    list1 = *ppoly;
    list2 = *ppoly2;
    pp= &merged;
    while(list1 != NULL && list2 != NULL){
        if(list2->coef > list1->coef){
           *pp = list1;
           list1 = list1->next;
           (*pp)->next = NULL;
        }else{
           *pp = list2;
           list2 = list2->next;
           (*pp)->next = NULL;
        }
        pp = &( (*pp)->next );
    }
    if(list1 != NULL)
        *pp = list1;
    if(list2 != NULL)
        *pp = list2;

    *ppoly = NULL;
    *ppoly2 = NULL;
    return merged;
}
void split_list(Poly* ppoly, Poly* ppoly2){
    Poly l1= *ppoly;
    Poly l2= *ppoly;
    Poly* pp = &l1;
    while( l2 != NULL){
        l2 = l2->next;
        if(l2 != NULL){
            l2 = l2->next;
            pp = &((*pp)->next);
        }
    }
    l2 = *pp;
    (*pp) = NULL;
    *ppoly=l1;
    *ppoly2=l2;
}
void mergesort(Poly* pl){
    Poly l1 = *pl;
    Poly l2 = new_list();
    Poly merged = new_list();
    if(l1 == NULL || l1->next == NULL)
        return; //sorted or empty                                                                                                                                                                                                 
    split_list(&l1,&l2);
    mergesort(&l1);
    mergesort(&l2);
    merged = merge(&l1,&l2);
    *pl = merged;
}
void reduce(Poly poly){
  mergesort(&poly);
  print_list(poly);
  int i=0;
  cout<<"combining like terms:"<<endl;
  Term* p;
  p=poly;
  if (p==0)
    cout<<"---empty list---";
  while(i=0){
    if (poly->coef==(poly->next)->coef){
      p->deg=(poly->deg)+((poly->next)->deg);
      poly=p;
      i=1;
    }
  }
  print_list(poly);
} 
```

我已经这样做了几天，但无法正常工作。问题出在`reduce()`功能上。

例如，如果我有：`2x^2+2x^2+4x^2+3x^5`，它将打印`8x^2+3x^5`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T18:04:59.423

这里有很多问题。让我们从一个简单的案例开始：

```
int main()
{
  Poly poly=new_list();

  insert_front(&poly,2,5);
  insert_front(&poly,2,5);

  reduce(poly);
  print_list(poly); // we hope for 4x^5

  return(0);
} 
```

...但我们得到 2x^5。（请注意，如果可能，您应该单独测试一个函数——不需要交互性或合并或所有其他东西。）

现在看看`reduce`：

```
void reduce(Poly poly){
  mergesort(&poly);
  print_list(poly);
  int i=0;
  cout<<"combining like terms:"<<endl;
  Term* p;
  p=poly;
  if (p==0)
    cout<<"---empty list---";
  while(i=0){
    if (poly->coef==(poly->next)->coef){
      p->deg=(poly->deg)+((poly->next)->deg);
      poly=p;
      i=1;
    }
  }
  print_list(poly);
} 
```

你有“ceof”和“degree”错误的方式，但这只是变量命名的问题（尽管这让我的眼睛受伤）。

你`while(i=0)`在我认为你的意思的地方使用`while(i==0)`。如所写，它是一个赋值为 的赋值`0`，因此控制永远不会进入循环。假设我们修复它以便我们进入循环：

```
int i=0;
Term* p;
p=poly;
while(i==0){
  if (poly->coef==(poly->next)->coef){
    p->deg=(poly->deg)+((poly->next)->deg);
    poly=p;
    i=1;
  }
} 
```

如果前两项不匹配，则`i`保持为零，我们将永远留在循环中。
如果前两项确实匹配，`i=1`并且我们离开循环，则不会考虑其他项。
在离开循环之前，我们修改第一项——然后设置`poly=p`. 但是`poly`已经等于`p`; 这一步什么都不做，第二个任期还在。

我希望这足以让你朝着正确的方向前进。

# html - HTML 电子邮件中的图像未调整大小？

> ID：12824874
> 
> 赞同：0
> 
> 时间：2012-10-10T17:21:10.360
> 
> 标签：html, css, image, email

如果我将电子邮件另存为 HTML，它会显示已调整大小的图像，但是当我将其作为`.msg`文件查看时，图像不会被调整大小。这是我的标记：

```
<p>
  <span style='font-size:10.0pt;font-family:"Arial","sans-serif";color:black'>
   <img border=0 id="_x0000_i1026"
        src="http://www.mynevadacounty.com/NC/CEO/Resources/FridayMemo/FM-20121004-gold-dollar-sign.jpg"
        style='height:111px;width:150px'>
   <o:p></o:p>
  </span>
</p> 
```

我注意到`img`标签未关闭，这会导致问题吗？如果没有，任何人都可以建议如何正确调整图像大小吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T17:32:48.023

添加`height="111"`和`width="150"`到您的图像标签。

```
<img border=0 id="_x0000_i1026" height="111" width="150" src="..." style='height:111px;width:150px'> 
```

这是可以使用的一个很好的参考：

[http://www.campaignmonitor.com/css/](http://www.campaignmonitor.com/css/)

# c++ - MPI - 发送/接收双精度数组。输出很奇怪

> ID：12824878
> 
> 赞同：2
> 
> 时间：2012-10-10T17:21:21.823
> 
> 标签：c++, c, process, multiprocessing, mpi

我正在尝试发送一组双精度值，或者如果这不可能，那么一次只发送一个值，从我拥有的每个进程中，返回给主服务器以计算所有数字。当我尝试发送一个值时，该数字显示为一些疯狂的巨大负数。当我尝试发送一个 int 时，同样的事情发生了。我的一些代码如下：

```
//this is the send
MPI_Isend(&handArray[ROYALFLUSH], 1, MPI_DOUBLE, 0, ROYALFLUSH, MPI_COMM_WORLD, &request);

//This is the master receiving the msg
MPI_Irecv(dubBuff, 1, MPI_DOUBLE, i+1, h, MPI_COMM_WORLD, &request); 
```

当我继续用循环计算 dubBuff 中的值时，它会吐出古怪的数字。

PS dubBuff 就是这样一个数组：

```
double dubBuff[10]; 
```

如何正确地将我的数组值发送回主进程？

# c# - 使用 aspnet_regiis 对加密的 web.config 部分进行密码保护

> ID：12824879
> 
> 赞同：2
> 
> 时间：2012-10-10T17:21:22.197
> 
> 标签：c#, vb.net, visual-studio, web-applications, aspnet-regiis.exe

我们都知道使用 aspnet_regiis 工具可以轻松完成对 web.config 部分的加密和解密……任何有权访问服务器的人都可以做到。有没有办法使用 -pe 或 -pef 选项指定密码以进一步保护敏感信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T16:31:22.980

不，没有。这是因为应用程序应该知道如何解密这些部分。

您可以做的是在应用程序代码中添加另一个级别的加密（使用密码）。这确保您需要访问服务器和源代码才能查看加密信息。

希望这可以帮助

# google-app-engine - 在 Google AppEngine 中存储和索引字符串列表

> ID：12824880
> 
> 赞同：0
> 
> 时间：2012-10-10T17:21:30.553
> 
> 标签：google-app-engine, objectify

我正在使用 AppEngine 的本机 Datastore API 在 Java 中存储对象。

我需要搜索对象中的各种项目——例如：电子邮件地址、电子邮件主题、姓名等。即使是部分输入，它也应该显示结果——比如实时搜索。

为此，我使用 StringUtils2.breakdownFragments 将项目标记为片段的可能输入 - 字符串“Foo Bar”将变为：“f”、“fo”、“foo”、“b”、“ba”、“bar "

我不明白的是如何提供要索引的字符串列表以及如何将它们检索回应用过滤器？

在使用 JDO 或 Objectify 时，我认为它相对简单，但通过本机 API 使用它，我不知道如何去做。

实体不采用要存储的列表。

甚至可以做到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T19:38:28.523

您可以调用`Entity.setProperty()`并传递 a`List<String>`作为值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T15:55:15.957

谨防爆炸性索引。每个列表属性项都被单独索引。您可以运行的查询的复杂性非常有限。在 Search API 出现之前，我就走上了这条路。

如果您的搜索功能可以容忍少量时间不同步，我建议使用搜索 API 来实现您的功能。

# asp.net - ASP.NET DetailsVew 在插入项目后重新绑定下拉列表

> ID：12824881
> 
> 赞同：0
> 
> 时间：2012-10-10T17:21:33.747
> 
> 标签：asp.net

我是 ASP.NET 的新手，一直在尝试使下拉列表在 DetailsView 中正常工作，但到目前为止还没有运气。我正在努力实现这一目标，非常感谢有人可以帮助我。

我得到的一个错误是：

> Eval()、XPath() 和 Bind() 等数据绑定方法只能在数据绑定控件的上下文中使用。

我的 DetailsView 中有这段代码：

```
<EditItemTemplate>  
    <asp:DropDownList id="VendorName" 
        datasourceid="VendorSqlDataSource" 
        AutoPostBack="true" 
        datatextfield="VendorName" 
        DataValueField="VendorID"    
        SelectedValue='<%# Bind("VendorID") %>'   
        runat="server" 
        OnSelectedIndexChanged="ddlCategory_SelectedIndexChanged" /> 

    <asp:SqlDataSource ID="VendorSqlDataSource" 
        ConnectionString="<%$Connectionstrings:ConnectionString%>"  
        SelectCommand="SELECT VendorID, VendorName from MDF_Vendor" 
        runat="server">  
    </asp:SqlDataSource>  
</EditItemTemplate>  

<EditItemTemplate> 
    <asp:DropDownList id="VendorBUName" 
        datasourceid="VendorBUSqlDataSource"  
        datatextfield="VendorBUName" 
        DataValueField="VendorBUID"    
        SelectedValue='<%# Bind("VendorBUID") %>'   
        runat="server"/> 

    <asp:SqlDataSource ID="VendorBUSqlDataSource" 
        runat="server" 
        ConnectionString="<%$Connectionstrings:ConnectionString%>" 
        selectcommand="SELECT VendorBUID, VendorBUName 
                       from MDF_VendorBU 
                       Where VendorID = @VendorID" 
        <SelectParameters>  
            <asp:Parameter Name="VendorID" Type="Int32" />  
        </SelectParameters>  
    </asp:SqlDataSource>  
</EditItemTemplate> 
```

在我的代码背后，我有此代码可以重建Vendorname选择时的VendorBuname dropdownlist列表。

```
protected void ddlVendor_SelectedIndexChanged
               (object sender, EventArgs e)
{

    DropDownList ddlVendor =
        (DropDownList)DetailsView1.FindControl("VendorName");
    DropDownList ddlVendorBU =
        (DropDownList)DetailsView1.FindControl("VendorBUName");

    if (ddlVendorBU != null)
    {
        Response.Write("SelectChanged");
        int VendorID = Convert.ToInt32(ddlVendor.SelectedValue.ToString());
        Response.Write("VendorID: " + VendorID);

        ddlVendorBU.Items.Clear();

        string strConn = ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString;
        SqlConnection con = new SqlConnection(strConn);
        SqlCommand cmd = new SqlCommand();
        cmd.Connection = con;
        cmd.CommandType = CommandType.Text;
        cmd.CommandText = "SELECT VendorBUID, VendorBUName FROM dbo.MDF_VendorBU WHERE VendorID = @VendorID";
        cmd.Parameters.AddWithValue("@VendorID", VendorID);
        DataSet objDs = new DataSet();
        SqlDataAdapter dAdapter = new SqlDataAdapter();
        dAdapter.SelectCommand = cmd;
        con.Open();
        dAdapter.Fill(objDs);

        con.Close();

        if (objDs.Tables[0].Rows.Count > 0)
        {
            foreach (DataRow dr in objDs.Tables[0].Rows)
            {
                ddlVendorBU.Items.Insert(0, new ListItem( (dr["VendorBUName"]).ToString(), "-1") );
            }
            ddlVendorBU.DataBind();  //<-- Problem HERE can not rebind it.
        }

    }
} 
```

到目前为止，这在 DetailsView 中有效。我单击编辑，这两个下拉列表选择了正确的值。当我在 VendorName ddl 中选择另一个供应商时，它会刷新 VendorBUName 列表。伟大的！但是，当我尝试 ddlVendorBU.DataBind(); 重新绑定 VendorBUName 列表，它给出了上面的错误。如果删除它，它不会更新 VendorBUName 的记录，因为它没有绑定到该字段。

我完全被卡住了，如果有人可以帮忙。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T17:27:40.833

如果您使用 ddlVendorBU.DataBind(); 您必须定义 DataSource 属性。

如果您希望插入项目，则不需要 DataBind 方法。

所以

您可以在没有 DataBind 的情况下尝试此代码

```
foreach (DataRow dr in objDs.Tables[0].Rows)
{
     ddlVendorBU.Items.Insert(0, new ListItem( (dr["VendorBUName"]).ToString(), "-1") );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T18:48:33.333

您是否碰巧在页面加载时进行了任何类型的绑定？如果是这样，您是否检查它是否是回发？您的页面加载将在您的选择更改事件之前触发，如果它在那里反弹某些东西，您就不会使用相同的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T17:30:25.867

您可以不使用您的`Bind("VendorBUID")`并以编程方式设置 SelectedValue 属性吗？我认为这就是导致您的问题的原因。

现在，重新绑定您的 ddlVendorBU 也会清除您手动添加的任何内容，因为这就是绑定的作用。因此，您可能还想`DataSource`在重新绑定之前设置属性，以使用正确的项目创建 DDL。

此外，由于您希望您的 ddlVendorBU 具有有意义的`SelectedValue`属性（或者我推断），因此在添加项目时，您不应在每次循环中使用 -1 作为值参数。使用 BUID 字段。

预计到达时间：代码：

```
if (objDs.Tables[0].Rows.Count > 0) 
{
   ddlVendorBU.DataSource = objDs.Tables[0];
   ddlVendorBU.DataTextField = "VendorBUName";
   ddlVendorBU.DataValueField = "VendorBUID";
   ddlVendorBU.DataBind();
} 
```

# javascript - Javascript - 每 12 秒在“x 秒前”的提要中发布帖子

> ID：12824882
> 
> 赞同：2
> 
> 时间：2012-10-10T17:21:36.650
> 
> 标签：javascript, jquery, time, settimeout

我会听起来像个菜鸟，但基本上我想要实现的只是一个脚本，它会自动刷新，也就是说，发布某些东西的时间。例如;

`<div id="update" data-time="2012-08-16 20:48:11">Posted 12 secs ago</div>`

*然后，12 秒后*

`<div id="update" data-time="2012-08-16 20:48:11">Posted 24 secs ago</div>` 它不必像那样格式化，这只是我认为可以使用的一个例子。

我宁愿**不**使用外部插件来完成这项任务，我也不希望它在几秒钟内完成，我希望它像“x secs”，然后当它达到 60 秒时变成“x mins”等。

如果我能得到回应，你会帮我很多，无论它只是一个指向正确方向的链接还是我可以使用的一段代码。谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T17:26:42.547

请查看 JavaScript 的原始 setTimeout() 和 setInterval() [http://www.w3schools.com/js/js_timing.asp](http://www.w3schools.com/js/js_timing.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T17:49:08.787

你可以使用这样的东西：

```
var div = $('#update'),
content;

var myUpdater = setInterval(function () {
    content = div.html();
    div.html(content.replace(/(\d+)/g, function (captureGroup1) {
        var time = parseInt(captureGroup1, 10) + 12;
        return time;
    }));
}, 12*1000);​ 
```

上面的示例向您展示了如何使用 setInterval 函数更改秒数。您可以通过设置一些条件来改进它，例如秒数是否超过 60 秒，并相应地更改输出。

# django - 本地机器上的 Django pg_restore

> ID：12824884
> 
> 赞同：0
> 
> 时间：2012-10-10T17:21:48.647
> 
> 标签：django, postgresql, heroku, pg-restore

> **可能重复：**
> [Django：在还原（迁移）后尝试访问数据库时权限被拒绝](https://stackoverflow.com/questions/12233046/django-permission-denied-when-trying-to-access-database-after-restore-migratio)

有一个类似的问题：[在PostgreSQL恢复后，我得到“关系django_session的权限被拒绝”](https://stackoverflow.com/questions/2302593/after-a-postgresql-restore-i-get-permission-denied-for-relation-django-session)，除了接受的解决方案无效，根据heroku docs我创建了一个备份，并将它卷曲到我的机器上，然后运行：

```
pg_restore -v -c -Ox -d mydb mydump.dump 
```

最初我得到：

```
django.db.utils.DatabaseError: no schema has been selected to create in 
```

然后在 psql 中应用以下内容后...

```
GRANT USAGE ON SCHEMA public TO PUBLIC;
GRANT CREATE ON SCHEMA public TO PUBLIC; 
```

...我得到的和上面的 SO 问题一样...

```
$ python manage.py syncdb
>>> django.db.utils.DatabaseError: permission denied for relation django_content_type 
```

这真的让我很震惊，因为我尝试过 --no-acl && --no-owner (-Ox) 确保：

```
GRANT ALL PRIVILEGES ON DATABASE mydb to myuser 
```

使用 django 1.4，并且安装的应用程序包括 django-CMS ......此外，本地副本与具有不同 postgresql 数据库的相同用户一起工作正常。

**哎呀：**

**为犯下经典错误并假设我的问题如此**独特而道歉；解决方案在其他地方 [Django：在还原（迁移）后尝试访问数据库时权限被拒绝](https://stackoverflow.com/questions/12233046/django-permission-denied-when-trying-to-access-database-after-restore-migratio)

```
GRANT ALL ON ALL TABLES IN SCHEMA public to user;
GRANT ALL ON ALL SEQUENCES IN SCHEMA public to user;
GRANT ALL ON ALL FUNCTIONS IN SCHEMA public to user; 
```

成功了；感谢不知情的救世主：@user698585;P

# javascript - 在 Highcharts 的图表中只添加一个可点击的点？

> ID：12824887
> 
> 赞同：5
> 
> 时间：2012-10-10T17:21:54.933
> 
> 标签：javascript, jquery, highcharts

我查看了 Highcharts 的文档，但找不到任何仅在图表中添加一个可点击点的示例。没有意义或所有这些都是可点击的。
是否可以只绑定一点点击？
提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T17:44:06.937

这不是很明显。您知道可以将数据作为`Point`对象数组传递给图表，如下所示：

```
series: [{
    data: [{
        name: 'Point 1',
        x: 0,
        y: 1
    }, {
        name: 'Point 2',
        x: 1,
        y: 5
    }]
}] 
```

但是您可能不知道任何`Point`事件都可以有自己的事件。所以你可以做这样的事情：

```
series: [{
    data: [{
        name: 'Point 1',
        x: 0,
        y: 1,
        events: {
            click: function () {
                alert ('Click!');
            }
        }
    }]
}] 
```

上面有一个[jsFiddle 演示](http://jsfiddle.net/pmVEC/)。

# java - 关于 apache cxf 的 web 服务自上而下的开发

> ID：12824888
> 
> 赞同：1
> 
> 时间：2012-10-10T17:21:55.557
> 
> 标签：java, web-services, spring, cxf

我正在关注这个 URL [http://angelozerr.wordpress.com/2011/08/24/jaxwscxf_step2/](http://angelozerr.wordpress.com/2011/08/24/jaxwscxf_step2/)，其中显示了自下而上的开发。请告知 url，其中自上而下的方法也以类似的方式显示，因为我有 wsdl 我需要用 cxf 和 java 测试它们。

对于客户，我还找到了以下网址[http://www.ibm.com/developerworks/library/ws-pojo-springcxf/](http://www.ibm.com/developerworks/library/ws-pojo-springcxf/)但请告知更多网址。

# java - 如何为布尔数组生成随机值？

> ID：12824889
> 
> 赞同：1
> 
> 时间：2012-10-10T17:21:56.533
> 
> 标签：java

我想为布尔数组随机设置真值​​或假值。如何为 android 应用程序随机生成这些值？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-10T17:23:09.293

`java.util.Random`有一个方法叫`nextBoolean()`你可以用来填充数组。

```
// assumes a java.util.Random called random
boolean[] randomBools(int len) {
    boolean[] arr = new boolean[len];
    for(int i = 0; i < len; i++) {
        arr[i] = random.nextBoolean();
    }
    return arr;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-10T17:23:41.540

```
Random random = new Random(); //java.util.Random
for (int i = 0; i < array.length; i++) {
    array[i] = random.nextBoolean();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T17:26:26.033

```
Boolean[] values;
Random rand = new Random(SEED);

values = new Boolean[ARR_SIZE];

for(int i = 0; i<ARR_SIZE; i++)
{
  values[i] = rand.nextBoolean();
} 
```

像这样的东西应该工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T17:27:14.777

```
boolean[] arr = new boolean[10];
Random r = new Random();

for(int i=0 ; i<arr.length ; i++){

    arr[i] = r.nextBoolean();

 } 
```

# objective-c - UISplitViewController 弹出按钮不显示

> ID：12824896
> 
> 赞同：0
> 
> 时间：2012-10-10T17:22:45.240
> 
> 标签：objective-c, ios, ipad, uisplitviewcontroller

有没有办法手动创建一个可以显示弹出控制器的 barButtonItem？

我现在附加按钮的唯一方法是在 willHideViewController 委托内，我认为传递到那里的按钮是由拆分视图自动创建的。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T14:59:46.790

我不久前想通了，并认为我应该回来以防有人偶然发现。

我在让按钮出现时遇到问题，因为没有调用代表来显示它们。事实证明，没有调用委托，因为我没有将委托设置为拆分视图控制器的根视图控制器。

# php - strip_tags() .... 用空格替换标签而不是删除它们

> ID：12824899
> 
> 赞同：45
> 
> 时间：2012-10-10T17:22:49.980
> 
> 标签：php

您知道如何使用 php 将 html 标签替换为空格字符吗？

如果我显示

```
strip_tags('<h1>Foo</h1>bar'); 
```

结果我得到“foobar”，但我需要保持单词分开的是“foo bar”。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2014-08-10T04:10:33.467

```
$string      = '<h1>Foo</h1>bar';
$spaceString = str_replace( '<', ' <',$string );
$doubleSpace = strip_tags( $spaceString );
$singleSpace = str_replace( '  ', ' ', $doubleSpace ); 
```

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2012-10-10T17:31:11.400

尝试这个。

```
preg_replace('#<[^>]+>#', ' ', '<h1>Foo</h1>bar'); 
```

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2015-05-28T12:26:34.163

Preg replace 在大多数情况下都很好，有一个极端情况，如此处所述。这应该适用于两者：

`strip_tags(str_replace('<', ' <', $str));`

在任何标记前添加空格在 HTML 中是有效的。它也有一些警告，例如您的文本是否出于某种原因具有“<”并且不想在其前面添加空格。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-07-05T09:55:25.850

我用来自 user40521 的示例帮助了我自己，但是我用与 php 的 strip_tags 相同的 api 制作了一个函数，它不使用多个变量，而且它还进行了修剪，因此从开始/结束删除了一个空格。

```
/**
 * @param string $string
 * @param string|null $allowable_tags
 * @return string
 */
function strip_tags_with_whitespace($string, $allowable_tags = null)
{
    $string = str_replace('<', ' <', $string);
    $string = strip_tags($string, $allowable_tags);
    $string = str_replace('  ', ' ', $string);
    $string = trim($string);

    return $string;
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-10-10T17:29:34.880

尝试这个：

```
$str = '<h1>Foo</h1>bar';
echo trim(preg_replace('/<[^>]*>/', ' ', $str)); 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2017-02-08T15:57:09.463

```
preg_replace('#\<(.+?)\>#', ' ', $text); 
```

回答有点晚，但试试这个，基本上选择 <> 内的所有内容，包括标签。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-10-10T17:35:57.457

`>`如果你知道这不会出现在你的任何属性中，这样的事情就会起作用。

`preg_replace('/<[^>]+>/', ' ', 'hello<br>world');`

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-09-19T02:25:46.117

使用 Regex 解决方案`preg_replace('/<[^>]*>/', ' ', $str)`，如果您有这样的事件属性，它将无法正常工作：

```
<button onclick="document.getElementById('alert').innerHTML='<strong>MESSAGE</strong>';">
click</button> 
```

你需要再做一次替换：

```
<?php

$str =
"<div data-contents=\"<p>Hello!</p>\">Hi.</div>".
"Please<button onclick=\"document.getElementById('alert').innerHTML='".
"<strong>MESSAGE</strong>';\">click</button>here.";

$event = 
"onafterprint|onbeforeprint|onbeforeunload|onerror|onhaschange|onload|onmessage|".
"onoffline|ononline|onpagehide|onpageshow|onpopstate|onresize|onstorage|onunload|".
"onblur|onchange|oncontextmenu|onfocus|oninput|oninvalid|onreset|onselect|onsubmit|".
"onkeydown|onkeypress|onkeyup|onclick|ondblclick|ondrag|ondragend|ondragenter|".
"ondragleave|ondragover|ondragstart|ondrop|onmousedown|onmouseenter|onmousemove|".
"onmouseleave|onmouseout|onmouseover|onmouseup|onscroll|onabort|oncanplay|".
"oncanplaythrough|oncuechange|ondurationchange|onemptied|onended|onerror|".
"onloadeddata|onloadedmetadata|onloadstart|onpause|onplay|onplaying|onprogress|".
"onratechange|onseeked|onseeking|onstalled|onsuspend|ontimeupdate|onvolumechange|".
"onwaiting|data-[^=]+";

$str = preg_replace("/<([^>]+)(".$event.")=(\"|')(?:(?!\\3).)+\\3/", "<$1", $str);
$str = preg_replace("/<[^>]*>/", " ", $str);

echo $str;

// with only strip_tags:
// Hi.Pleaseclickhere.

// with event and data attributes removal + regex tags removal:
// Hi. Please click here.

// with only regex tags removal:
// Hello! ">Hi. Please MESSAGE ';">click here.

?> 
```

希望能帮助到你！

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-10-10T17:31:03.217

你可以试试

```
$str = '<h1>Foo</h1>bar';
var_dump(replaceTag($str,array("h1"=>"div"))); 
```

输出

```
string '<div>Foo</div>bar' (length=17) 
```

使用的功能

```
function replaceTag($str,$tags) {
    foreach ( $tags as $old => $new )
        $str = preg_replace("~<(/)?$old>~", "<\\1$new>", $str);
    return $str;
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-10-14T16:18:01.430

如果您依赖 strip_tags 这些嵌入属性，那么这将起作用。尝试这个 ...

```
function strip_tags_with_spacer(string $html, string $allowedTags) {

    $allowedTagsArr=explode("<",strtolower(str_replace(">", "",$allowedTags)));
    $tags=[];
    $dom = new DOMDocument();
    $dom->loadHTML($html);    
    $selector = new DOMXPath($dom);
    $elements = $dom->getElementsByTagName('*');
    foreach($elements as $child) $tags[$child->tagName]=$child->tagName;

    foreach ( $tags as $tag ) {
        if ( !in_array(strtolower($tag), $allowedTagsArr)) {

            if ( in_array(strtolower($tag), ["p", "div", "h1", "h2", "h3", "h4", "pre", "body", "html", "form", "ul", "ol", "li", "table", "th", "td", "blockquote"])) $gap=" ";
            else $gap="";

            //echo "\nreplacing [$tag] with [$gap][$tag]";
            $html = str_ireplace("</$tag", "$gap</$tag", $html);
        } 
    }

    return strip_tags($html, $allowedTags);
}

$result=strip_tags_with_spacer($str,"<button><b><u><i>"); 
```

请参阅[http://sandbox.onlinephpfunctions.com/code/37299b1476dccb0631d404a073cf1c88f1cb7d2b](http://sandbox.onlinephpfunctions.com/code/37299b1476dccb0631d404a073cf1c88f1cb7d2b)

* * *

## 回答 #11

> 赞同：-3
> 
> 时间：2012-10-10T17:29:29.060

首先做一个 str_replace

```
$string = '<h1>Foo</h1>bar' 
strip_tags(str_replace('</h1>', ' ',$string)); 
```

# java - Apache Hama 是否适合构建决策树？

> ID：12824900
> 
> 赞同：2
> 
> 时间：2012-10-10T17:22:51.347
> 
> 标签：java, hadoop, decision-tree, hama

我目前已经在 Hadoop 中实现，这是 Google 用于构建决策树的框架（也称为 PLANET）。它从单个顶点开始，随着 map reduce 作业的添加越来越多，直到树完全构建。然而，一个主要问题是大量的 map/reduce 作业一个接一个地运行，因此一直启动新作业的成本非常高。

我已经多次看到 Apache Hama 适用于像图这样的迭代算法。有人可以使用 Hama 构建一个新图，或者您只需输入一个图并对其进行一些计算吗？将我的项目转移到哈马会很容易吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T09:14:18.770

Hama 确实能够使用 PLANET 论文中描述的算法以比 MapReduce 更有效的方式构建决策树。

Hama 不需要图形作为输入，您可以查看 Hama ML（机器学习）模块，该模块通常处理原始特征向量作为直接来自 HDFS 的输入。

对于 Hama，我[在 Apache Jira 中创建了一个新问题](https://issues.apache.org/jira/browse/HAMA-653)来跟踪该算法的进度。

# .net - 使用 WCF 在客户端和服务器中进行自定义证书验证

> ID：12824901
> 
> 赞同：0
> 
> 时间：2012-10-10T17:22:58.007
> 
> 标签：.net, wcf, x509certificate

我有一个非常具体的配置，其中 WCF 客户端和服务器需要使用证书进行身份验证。因为此证书将仅由我的客户端和服务器应用程序使用，并且不可能为每个实例生成一个专用证书，所以自签名是一种方式。因此，我的孔连接工作良好，我可以在指向服务器的通道中附加客户端证书，并且服务器服务也附加自己的证书。我想确保只有允许的客户端才能调用我的服务，因此必须在服务器端进行验证。我正在使用自定义验证器 (X509CertificateValidator) 覆盖方法 Validate(X509Certificate2 certificate) 到目前为止，一切正常，在建立连接时调用该方法，它接收具有所有属性的客户端证书，这是问题：

-如何确定我收到的证书是原始证书以验证我的客户？

现在，我正在使用使用 HTTPS 从网站导出的真实（假）证书进行测试（导出浏览器中显示的证书并在本地安装）。我当然没有私钥，但我可以将此证书附加到客户端的连接中，并且在服务器端接收良好。此证书中的所有属性都与原始证书相同，但事实并非如此！那么，如何验证我在服务器端收到的证书是原始证书，而不仅仅是副本？有什么方法可以使用证书的私钥在调用中添加一些签名？？

多谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T02:59:02.427

如果您覆盖验证功能，您基本上是靠自己的。这基本上是在绕过整个证书安全系统。您需要在根级别的服务器上使证书受信任。如果您不能这样做，您有以下选择： 1\. 使用通配符证书（如果您的所有服务器都可以在同一个域上） 2\. 创建您自己的证书颁发机构

# python - 使用 pymongo 的 group 函数求和

> ID：12824902
> 
> 赞同：1
> 
> 时间：2012-10-10T17:23:03.960
> 
> 标签：python, mongodb, pymongo

我有一个包含如下条目的集合：

```
thing1 = {"number": "0001", "param1":"521", "param2":"5", "param3":"3.2"} 
```

我想从集合中的每个条目中查看并汇总 param3。这是我这样做的尝试：

```
db.data.group('param3', 'param3':$exists, 'sum':0, 'function(doc, out) {out.sum += doc.param3;}) 
```

我在这里遇到语法错误（“参数列表后的“缺失”），但我不确定组调用在逻辑上是否正确。

# python - CGS 刷新窗口 - pygame 错误

> ID：12824907
> 
> 赞同：2
> 
> 时间：2012-10-10T17:23:21.640
> 
> 标签：python, eclipse, macos, pygame

我正在编写一个简单的国际象棋游戏，并将模块 pygame 与 python 2.7.3（32 位）一起使用

我正在使用 Mac OS X Mountain Lion（64 位）和 Eclipse + Pydev 作为 IDE

直到昨天，我都在正常使用 pygame，一切都按预期运行，尽管我收到了警告；但是我并没有太担心，因为它在 Mountain Lion 中看起来很正常，毕竟它工作正常

然后，在某个时刻并且没有以有意义的方式修改代码（并且没有安装任何新内容），它会显示此错误：

```
MacAntonio.local Python[303] <Error>: The function `CGSFlushWindow' is

obsolete and will be removed in an upcoming update. Unfortunately, this application, or a 

library it uses, is using this obsolete function, and is thereby contributing to an overal     

degradation of system performance. Please use `CGSFlushWindowContentRegion' instead. 
```

我注意到这条消息在 10 月 10 日午夜后几秒钟首次出现，但我不知道这是否相关

我搜索了互联网，我找不到有同样错误的人；很多警告，但这完全阻止了代码运行

如果您需要，我可以发布我的代码片段。

谢谢大家

编辑：

我想明确指出，这个问题不会因为我写的一些花哨的东西而出现，但也有这个：

```
import pygame
pygame.display.set_mode((100, 100)) 
```

因此，pygame 似乎在 Mountain Lion 中根本不起作用（我的意思是，至少对我而言，但我有一个标准配置，并且它再次工作到 10 月 10 日）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-05T17:40:33.280

奇怪的是，这个问题就这样消失了，现在它可以工作了。有趣的是，我没有进行任何其他尝试；我离开了 Python、Eclipse 和 PyGame 的旧安装。没有改变路径、导入或任何东西。

我不得不认为这一切都是一场梦！

# iphone - 退出并重新启动应用程序后返回的 UIWebView 中删除的 cookie

> ID：12824908
> 
> 赞同：2
> 
> 时间：2012-10-10T17:23:22.017
> 
> 标签：iphone, cookies, uiwebview

我的应用中有多个 UIWebView 可以登录 ASP.NET 网站。我可以登录该网站。但是，如果我退出网站并退出并重新启动应用程序，它似乎仍然有 cookie，我仍然登录。如果我没有退出应用程序，cookie 消失了，网站不知道是谁我是在我注销后。

我尝试使用以下代码删除应用程序本身中的 cookie：

```
 NSHTTPCookieStorage *httpCookieStorage = [NSHTTPCookieStorage sharedHTTPCookieStorage];
    for (NSHTTPCookie *httpCookie in [httpCookieStorage cookies])
    {
        [httpCookieStorage deleteCookie:httpCookie];
    }
    [[NSUserDefaults standardUserDefaults] synchronize]; 
```

我已经看到这对某些人有用，但在退出应用程序后似乎没有什么不同。

# ios - 在启动时显示模式登录 - 通过 UITableView

> ID：12824912
> 
> 赞同：0
> 
> 时间：2012-10-10T17:23:31.587
> 
> 标签：ios, cocoa-touch, ipad

我想在启动时在屏幕中央显示一个登录模式，但我得到一个空白背景，并且模式忽略了我的位置代码。

我有一个基于 UITableView 的 iOS 应用程序。当用户第一次打开应用程序时，我想在屏幕中央显示一个模式登录窗口。在我的主视图控制器的 viewDidLoad 中，我设置了我的 UITableViewController 使用的所有数据。然后，我使用以下内容调用我的模态窗口（出于示例目的稍作更改）：

```
- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];

    TenKeyPad *passwordEntry = [[[TenKeyPad alloc] initWithValues:@"" PasswordEntry:TRUE] autorelease];
    passwordEntry.delegate = self;

    passwordEntry.modalPresentationStyle = UIModalPresentationFormSheet;
    passwordEntry.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;

    passwordEntry.view.superview.frame = CGRectMake(0,0,320, 460); // iphone screen is 320 x 480 (-20px that would normally be the toolbar)
    passwordEntry.view.superview.center = CGPointMake(768/2, 1024/2 + 10);

    [self presentViewController:passwordEntry animated:NO completion:nil];

    [passwordEntry release];
} 
```

我希望模式密码窗口出现在表格视图上，但相反，它显示在显示屏的左上角，背景为深灰色。但是，如果我稍后在应用程序中使用完全相同的代码调用此模式，它的行为将符合预期/期望。**加载模式以使其显示在我的 tableView 上的正确方法或时间是什么？**

## 截图

### 故障

![登录窗口错误](../Images/b2ae434afd59e8da4208e926d80dbe03.png)

### 期望/期望

![所需/预期的登录窗口](../Images/19851955f91cbb2fdbc85095a153ddd0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T00:07:32.830

我也很难使用此功能。我还没有找到从一开始就设置模态框大小的正确方法。我会尝试这样的事情：

```
- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];

    LoginViewController *controller = [[LoginViewController alloc] initWithNibName:@"LoginViewController" bundle:nil];
    controller.modalPresentationStyle = UIModalPresentationFormSheet;
    controller.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;

    [self presentViewController:controller animated:NO completion:^{
        // resize
        controller.view.superview.frame = CGRectMake(self.view.frame.size.width/2-160, self.view.frame.size.height/2-230, 320, 460);
    }];
} 
```

这可以满足您的需要，但动画将无法正常工作。

# javascript - Ember.js 路由器应用架构——如何拥有多个嵌套的视图/控制器对

> ID：12824917
> 
> 赞同：6
> 
> 时间：2012-10-10T17:23:49.177
> 
> 标签：javascript, architecture, ember.js, ember-old-router

我有一个 ember 应用程序，插座和连接插座的概念很好，我明白了。我不明白的是如何在没有疯狂嵌套的情况下在另一个视图/控制器视图中拥有多个视图/控制器视图

假设我正在设计具有电子邮件功能和照片库功能的 icloud 克隆。现在，如果我想完成类似的事情

```
***********************************************************
* INBOX LIST     **  COMPOSE OR VIEW MESSAGE              *
*                **                                       *
*                **                                       *
*                **                                       *
*                **                                       *
* CONTACTS LIST  **                                       *
*                **                                       *
*                **                                       *
*                **                                       *
*                **                                       *
*********************************************************** 
```

我想要设计的方式是这样的

```
EmailController/View
|-- SplitViewController/View
   |-- InboxListController/View
   |-- ContactsListController/View
   |-- ComposeMessageController/View
   |-- ReadMessageController/View 
```

我可以将它们热交换到 SplitView 的级别或将它们全部删除，但我看不到只`outlet`允许一个这样做的好方法。它会迫使我在不应该嵌套的事物中进行下一步。使用单出口方法，我的结构看起来更像

```
EmailController/View
|-- SplitViewController/View
   |-- InboxListController/View
       |-- ContactsListController/View
           |-- ComposeMessageController/View
               |-- ReadMessageController/View 
```

如何找到适合 Ember.js/Router 且仍允许更复杂嵌套的架构风格？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-10T17:51:20.030

你知道你可以命名网点吗？例如，在 SplitView 模板中，您可以有一个 {{outlet inboxListView}}、一个 {{outlet contactsListView}} 等...当您执行 connectOutlets 时，您可以这样做：

```
splitViewController.connectOutlet({name: 'inboxList', outletName: 'inboxListView'})
splitViewController.connectOutlet({name: 'contactsList', outletName: 'contactsListView'}) 
```

等等...

# reporting-services - SSRS 订阅，BatchHead 参数

> ID：12824921
> 
> 赞同：0
> 
> 时间：2012-10-10T17:24:07.143
> 
> 标签：reporting-services, ssrs-2008

我正在尝试使用 Web 服务创建订阅，该方法没有引发任何异常，但也没有创建订阅。

搜索我在大多数论坛和帮助文件上看到的信息，CreateSubscription 方法不要求批处理头，但我的要求是，所以我认为这可能与我的安装有关。

这是我的代码。

```
Dim rs As New reportingReference.ReportingService2005SoapClient
    rs.ClientCredentials.Windows.ClientCredential = System.Net.CredentialCache.DefaultCredentials
    'rs.ClientCredentials.Windows.AllowedImpersonationLevel = System.Security.Principal.TokenImpersonationLevel.Impersonation

    rs.ClientCredentials.Windows.AllowedImpersonationLevel = New System.Security.Principal.TokenImpersonationLevel()

    Dim batchID As String = String.Empty
    Dim infoHeader As ServerInfoHeader = rs.CreateBatch(batchID)
    Dim bh As BatchHeader = New BatchHeader()

    bh.BatchID = batchID
    bh.AnyAttr = infoHeader.AnyAttr

    Dim report As String = "/reportParam1"
    Dim desc As String = "Send email from code to Hisham@comsoft.com"
    Dim eventType As String = "TimedSubscription"

    Dim scheduleXml As String = "<ScheduleDefinition><StartDateTime>2012-03-22T09:30:00</StartDateTime><WeeklyRecurrence><WeeksInterval>1</WeeksInterval><DaysOfWeek><Thursday>True</Thursday></DaysOfWeek></WeeklyRecurrence></ScheduleDefinition>"
    '"<ScheduleDefinition><StartDateTime>2012-10-06T08:00:00-08:00</StartDateTime><WeeklyRecurrence>" & _
    '"<WeeksInterval>1</WeeksInterval><DaysOfWeek><Monday>True</Monday></DaysOfWeek></WeeklyRecurrence></ScheduleDefinition>" ' "<ScheduleDefinition xmlns:xsd=\""http://www.w3.org/2001/XMLSchema\"" xmlns:xsi=\""http://www.w3.org/2001/XMLSchema-instance\""><StartDateTime xmlns=\""http://schemas.microsoft.com/sqlserver/2006/03/15/reporting/reportingservices\"">2010-03-06T15:15:00.000+05:00</StartDateTime></ScheduleDefinition>"

    Dim extensionParams(7) As ParameterValue

    extensionParams(0) = New ParameterValue()
    extensionParams(0).Name = "TO"
    extensionParams(0).Value = "rocha@costarricense.cr"

    extensionParams(1) = New ParameterValue()
    extensionParams(1).Name = "IncludeReport"
    extensionParams(1).Value = "True"

    extensionParams(2) = New ParameterValue()
    extensionParams(2).Name = "RenderFormat"
    extensionParams(2).Value = "MHTML"

    extensionParams(3) = New ParameterValue()
    extensionParams(3).Name = "Subject"
    extensionParams(3).Value = "@ReportName was executed at @ExecutionTime"

    extensionParams(4) = New ParameterValue()
    extensionParams(4).Name = "Comment"
    extensionParams(4).Value = "Here is your test report for testing purpose"

    'extensionParams(5) = New ParameterValue()
    'extensionParams(5).Name = "IncludeLink"
    'extensionParams(5).Value = "True"

    extensionParams(5) = New ParameterValue()
    extensionParams(5).Name = "Priority"
    extensionParams(5).Value = "NORMAL"

    Dim parameters(0) As ParameterValue

    parameters(0) = New ParameterValue()
    parameters(0).Name = "ReportParameter1"
    parameters(0).Value = "ReportParameter1"

    'parameters(1) = New ParameterValue()
    'parameters(1).Name = "UserName"
    'parameters(1).Value = "admin"

    'parameters(2) = New ParameterValue()
    'parameters(2).Name = "SupplierId"
    'parameters(2).Value = "0"

    Dim matchData As String = scheduleXml
    Dim extSettings As New ExtensionSettings()
    extSettings.ParameterValues = extensionParams
    extSettings.Extension = "Report Server Email"
    Try

        Dim _sub As String = ""
        Dim SubID As ServerInfoHeader = rs.CreateSubscription(bh, report, extSettings, desc, eventType, matchData, parameters, _sub)

        rs.FireEvent(bh, "TimedSubscription", _sub)

    Catch ex As Exception
        Console.WriteLine(ex)
    End Try 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T20:19:32.883

我在附近找到了一份工作。

相反，我使用 2005 WS 将其更改为 2010，如本文所述

[在 SSRS 中自动设置用户的订阅](https://stackoverflow.com/questions/4308570/automatically-set-up-users-subscription-in-ssrs)

它奏效了。

这是代码。

```
 Private Sub Suscription2010()
    Dim service As New ServiceReference1.ReportingService2010SoapClient()
    service.ClientCredentials.Windows.ClientCredential = System.Net.CredentialCache.DefaultNetworkCredentials
    service.ClientCredentials.Windows.AllowedImpersonationLevel = System.Security.Principal.TokenImpersonationLevel.Impersonation

    Dim userHeader As New ServiceReference1.TrustedUserHeader()

    Dim desc As String = "Send to Document Library"
    Dim eventType As String = "TimedSubscription"
    Dim scheduleXml As String = "<ScheduleDefinition>" + _
    "   <StartDateTime>2010-11-30T08:00:00-08:00" + _
    "   </StartDateTime>" + _
    "   <WeeklyRecurrence>" + _
    "      <WeeksInterval>1</WeeksInterval>" + _
    "      <DaysOfWeek>" + _
    "         <Monday>True</Monday>" + _
    "      </DaysOfWeek>" + _
    "   </WeeklyRecurrence>" + _
    "</ScheduleDefinition>"

    Dim extensionParams(4) As ServiceReference1.ParameterValue

    extensionParams(0) = New ServiceReference1.ParameterValue()
    extensionParams(0).Name = "TO"
    extensionParams(0).Value = "my alias"

    extensionParams(1) = New ServiceReference1.ParameterValue()
    extensionParams(1).Name = "IncludeReport"
    extensionParams(1).Value = "FALSE"

    extensionParams(2) = New ServiceReference1.ParameterValue()
    extensionParams(2).Name = "IncludeLink"
    extensionParams(2).Value = "TRUE"

    extensionParams(3) = New ServiceReference1.ParameterValue()
    extensionParams(3).Name = "Subject"
    extensionParams(3).Value = "@ReportName was executed at @ExecutionTime"

    Dim matchData As String = scheduleXml
    Dim extSettings As New ServiceReference1.ExtensionSettings
    extSettings.ParameterValues = extensionParams
    extSettings.Extension = "Report Server Email"

    Dim id As String

    service.CreateSubscription(userHeader, "/reportname", extSettings, desc, eventType, matchData, Nothing, id)
End Sub 
```

# android - Google Cloud Messaging (GCM) 和 registration_id 到期，我怎么知道？

> ID：12824924
> 
> 赞同：4
> 
> 时间：2012-10-10T17:24:29.133
> 
> 标签：android, google-cloud-messaging

我已经组装了一个框架客户端/服务器 GCM 应用程序，该应用程序在我的 Android 手机上接受并显示来自我粗糙且准备好的服务器的消息。我说“骨架”和“粗略准备”是因为我的应用程序的 registration_id 被硬编码到服务器端，作为我在启动示例 Android 应用程序并在 GCM 服务器上注册应用程序/设备组合时在调试器中捕获的值。当我开始思考时，我正要开始为双方提供一个读/写机制来访问服务器上的一个简单数据库来存储 reg_id/device 组合：

我知道这个 reg_id 可以随时过期，因为谷歌说它可以。从文档中可以清楚地看出如何检查 id 是否仍然可以 IF，而且这是一个很大的 IF，我再次启动应用程序。但是，我或任何其他用户为什么要重新启动它？在清单中注册的 GCMIntentService 会根据需要在那里接收消息，并且无需出于任何原因再次运行该应用程序。因此，当 id 过期时，我将停止接收消息 - 服务器可能会从返回代码中知道，但无法通知我的应用程序 - 除非我再次运行应用程序并通过其`onCreate()`可能的`registerClient()`方法，否则无法恢复。

那么当 id 过期时会发生什么？我看不到 IntentService 中的任何 on.. 方法都会执行。谷歌自己会发送一条正常的消息说它即将过期吗？我是否需要编写一个警报任务来每天运行并检查 id？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T18:42:21.163

根据[GCM](http://developer.android.com/guide/google/gcm/gcm.html)：

> 现有的注册 ID 可能在多种情况下不再有效，包括：
> 
> *   如果应用程序通过发出 com.google.android.c2dm.intent.UNREGISTER 意图手动取消注册。
> *   如果应用程序被自动取消注册，如果用户卸载应用程序，这可能会发生（但不能保证）。如果注册ID过期。Google 可能会决定刷新注册 ID。
> *   如果应用程序已更新但新版本没有配置广播接收器来接收 com.google.android.c2dm.intent.RECEIVE 意图。

考虑注册相关的响应将触发“ `com.google.android.c2dm.intent.REGISTRATION`”意图。因此，您应该注意从 GCM 发送的注册消息。

**更新**

GCM 文档说：

> 如果注册ID过期。Google 可能会决定刷新注册 ID。对于所有这些情况，您应该从第 3 方服务器**中删除此注册 ID 并停止使用它来发送消息。**当错误代码未注册时发生。

考虑到上述事实是事实，那么在您的服务器上您应该处理过期的 ID 并在您的数据库中设置一个标志，下次您的 android 客户端检查您的服务器时（最后您必须进行定期检查）或者您`isRegisteredOnServer`调用GCMRegistrar 类并得到**错误**结果，您应该触发 REGISTRATION 意图以获得新 ID。

# api - 实现大规模 API 使用配额系统

> ID：12824927
> 
> 赞同：1
> 
> 时间：2012-10-10T17:24:40.853
> 
> 标签：api, design-patterns, architecture, rate-limiting, quota

从高层次上看，如何实现 API 使用配额系统？

特别是，它必须满足以下要求：

*   即时的
*   快速，不会显着减慢 API
*   如果使用内存缓存，需要在突然关闭后恢复（有利于 API 客户端的配额精度的小损失是可以的）
*   速率限制（DOS 保护）
*   缩放良好

是否有任何普遍接受的架构模式/算法来实现此类系统？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T04:22:36.423

您的 API 是否有可用的数据库？如果是这样，只需在其中为您要测量或限制的每个注册帐户存储一个计数器。

当有人登录时，使用[AOP](http://en.wikipedia.org/wiki/Aspect-oriented_programming)之类的技术来确保每个 API 调用都会通过您的限制算法运行，这应该很简单。24小时节流系统的伪代码：

```
read access_count from DB
access_count++       
if access_count > limit then
   respond with something like 429 - Too Many Requests
else
   store access_count in DB
end 
```

以上假设您有一个批处理作业，该作业每晚遍历数据库并将所有访问计数器清除为 0 以用于第二天的流量。

其可扩展性将取决于您的数据库选择。任何数据库都可以处理这个问题，尤其是较新的 NoSQL/NewSQL 之一。

# jquery - jQuery：包装一个匹配正则表达式的字符串

> ID：12824928
> 
> 赞同：3
> 
> 时间：2012-10-10T17:24:43.257
> 
> 标签：jquery, regex

在某个元素中，我需要选择与某个正则表达式匹配的不同字符串并用标签包装它们。我怎样才能做到这一点 ？

我试过 ：

```
var str = jQuery("#my_div").html();
var regex = "\([a-z]{2}\)";
jQuery("#my_div").html(str.replace(regex, "<span>$1</span>")); 
```

..但这会包装整个元素而不是元素中的选定字符串。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T17:35:14.537

您的示例的问题是您没有捕获组，请将您的正则表达式更改为`(\([a-z]{2}\))`

这是一个在 html 中工作的正则表达式替换示例：http: [//jsfiddle.net/gibble/NYVWg/](http://jsfiddle.net/gibble/NYVWg/)

```
<style>span.highlight { color: purple; }​&lt;/style>
<body>bla bla <div id="test">this (is) some text this (is) some text</div> bla bla​&lt;body>

var oldHtml = $('#test').html();
var newHtml = oldHtml.replace(/(\([a-z]{2}\))/g,"<span class='highlight'>$1</span>");
$('#test').html(newHtml);​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T17:34:00.803

鉴于您的正则表达式中有一个子表达式，您的代码应该可以工作。看看这个[jsfiddle](http://jsfiddle.net/Hp7BR/)：

HTML：

```
​&lt;div id="my_div">foo bar my_regex foo bar</div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

JS：

```
var str = jQuery("#my_div").html();
var regex = /(my_regex)/;
jQuery("#my_div").html(str.replace(regex, '<span class="red">$1</span>'));​​​​​​​​​ 
```

CSS：

```
​.red {
    color : red;
}​ 
```

# java - 绘制几个多边形后Java绘图程序变慢

> ID：12824929
> 
> 赞同：1
> 
> 时间：2012-10-10T17:24:44.217
> 
> 标签：java, swing, graphics, drawing, repaint

作为大学项目的一部分，我正在开发一个用于注释图像的 Java swing 程序。该程序的功能之一是能够在图像的某些区域周围绘制多边形，然后可以用标题进行标记。

绘制多边形时，每次单击都会在图像上绘制一个新的绿色顶点，并通过绘制一条线将该顶点链接到前一个顶点。当用户移动鼠标时，还会绘制一条预览线，以便他们可以看到下一次单击将添加到多边形形状中的内容。

我遇到的问题是，一旦用户绘制了一个多边形，整体程序性能就会显着下降。预览线的绘制变得非常紧张，以至于难以使用。

负责这部分程序的代码位于 ImagePanel.java 文件中：

```
package hci;

import javax.imageio.ImageIO;
import javax.swing.JPanel;
import javax.swing.JOptionPane;

import java.awt.Color;
import java.awt.BasicStroke;
import java.awt.Stroke;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Image;
import java.awt.Polygon;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.awt.event.MouseMotionListener;
import java.awt.image.BufferedImage;
import java.awt.geom.Point2D;
import java.io.File;
import java.util.ArrayList;

import hci.utils.*;

public class ImagePanel extends JPanel implements MouseListener, MouseMotionListener {

    private static final long serialVersionUID = 1L;
    BufferedImage image = null;
    CaptionedPolygon currentPolygon = null;
    ArrayList<CaptionedPolygon> polygonsList = null;
    Point mousePos;
    public static final int FIRST_NODE_SIZE = 15;

    public ImagePanel() {
        currentPolygon = new CaptionedPolygon();
        polygonsList = new ArrayList<CaptionedPolygon>();
        mousePos = new Point(0,0);

        this.setVisible(true);

        Dimension panelSize = new Dimension(800, 600);
        this.setSize(panelSize);
        this.setMinimumSize(panelSize);
        this.setPreferredSize(panelSize);
        this.setMaximumSize(panelSize);

        addMouseListener(this);
        addMouseMotionListener(this);
    }

    public ImagePanel(String imageName) throws Exception{
        this();
        image = ImageIO.read(new File(imageName));
        if (image.getWidth() > 800 || image.getHeight() > 600) {
            int newWidth = image.getWidth() > 800 ? 800 : (image.getWidth() * 600)/image.getHeight();
            int newHeight = image.getHeight() > 600 ? 600 : (image.getHeight() * 800)/image.getWidth();
            System.out.println("SCALING TO " + newWidth + "x" + newHeight );
            Image scaledImage = image.getScaledInstance(newWidth, newHeight, Image.SCALE_FAST);
            image = new BufferedImage(newWidth, newHeight, BufferedImage.TYPE_INT_RGB);
            image.getGraphics().drawImage(scaledImage, 0, 0, this);
        }
    }

    public void ShowImage(Graphics g) {

        if (image != null) {
            g.drawImage(
                    image, 0, 0, null);
        }
    }

    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);

        //display image
        ShowImage(g);
        drawPreviewLine(g);

        //display all the completed polygons
        for(CaptionedPolygon polygon : polygonsList) {
            fillPolygon(polygon, g);
            drawPolygon(polygon, g);
            finishPolygon(polygon, g);
        }

        //display current polygon
        drawPolygon(currentPolygon, g);

    }

    public void drawPreviewLine(Graphics g){
        if (currentPolygon.points.size() > 0 && mousePos != null){
            Point currentPoint = currentPolygon.points.get(currentPolygon.points.size() - 1);
            g.setColor(Color.GREEN);
            g.drawLine(currentPoint.getX(), currentPoint.getY(), mousePos.getX(), mousePos.getY());
        }
    }

    public void fillPolygon(CaptionedPolygon polygon, Graphics g){
        Color fillColor = new Color((float)0.0,(float)1.0,(float)0.0, (float)0.3);
        Polygon polyToDraw =  new Polygon();
        for (Point point : polygon.points){
            polyToDraw.addPoint(point.getX(), point.getY());
        }
        g.setColor(fillColor);
        g.fillPolygon(polyToDraw);
    }

    public void drawPolygon(CaptionedPolygon polygon, Graphics g) {
        for(int i = 0; i < polygon.points.size(); i++) {
            int sizeModifier = 0;
            Graphics2D g2 = (Graphics2D)g;
            g2.setColor(Color.GREEN);
            g2.setStroke(new BasicStroke(1));
            Point currentVertex = polygon.points.get(i);

            if(currentPolygon.equals(polygon) && i == 0){ //First point of the current polygon

                //Enlarge circle drawn if mouse hovers over point
                if(pointWithinCircle(mousePos.getX(), mousePos.getY(), currentVertex.getX(), currentVertex.getY(), (FIRST_NODE_SIZE + 2)/2)){
                    sizeModifier = 3;
                }

                int nodeSize = FIRST_NODE_SIZE + sizeModifier;

                g2.setColor(Color.WHITE);
                g2.fillOval(currentVertex.getX() - nodeSize/2 , currentVertex.getY() - nodeSize/2, nodeSize, nodeSize);
                g2.setStroke(new BasicStroke(2));
                g2.setColor(Color.GREEN);
                g2.drawOval(currentVertex.getX() - nodeSize/2 , currentVertex.getY() - nodeSize/2, nodeSize, nodeSize);
            }
            else if (i != 0){ //Some arbitary middle point
                Point prevVertex = polygon.points.get(i - 1);
                g2.drawLine(prevVertex.getX(), prevVertex.getY(), currentVertex.getX(), currentVertex.getY());
                g2.fillOval(currentVertex.getX() - 5, currentVertex.getY() - 5, 10, 10);
            }
            else{ //First point of some non current polygon
                g2.fillOval(currentVertex.getX() - 5, currentVertex.getY() - 5, 10, 10);
            }
        }
    }

    public void finishPolygon(CaptionedPolygon polygon, Graphics g) {
        //if there are less than 3 vertices than nothing to be completed
        if (polygon.points.size() >= 3) {
            Point firstVertex = polygon.points.get(0);
            Point lastVertex = polygon.points.get(polygon.points.size() - 1);

            g.setColor(Color.GREEN);
            g.drawLine(firstVertex.getX(), firstVertex.getY(), lastVertex.getX(), lastVertex.getY());
        }
    }

    public void addNewPolygon() {
        //finish the current polygon if any
        if (currentPolygon.points.size() > 0 ) {
            currentPolygon.caption = JOptionPane.showInputDialog(this, "Please enter a caption for this area") ;
            polygonsList.add(currentPolygon);
        }

        currentPolygon = new CaptionedPolygon();
        repaint();
    }

    public boolean pointWithinCircle(int targetX, int targetY, int circleCentX, int circleCentY, double circleRadius){
        Point2D.Double mousePoint = new Point2D.Double(targetX,targetY);
        Point2D.Double firstNodePoint = new Point2D.Double(circleCentX, circleCentY);
        return (mousePoint.distance(firstNodePoint) <= circleRadius);
    }

    @Override
    public void mouseClicked(MouseEvent e) {
    }

    @Override
    public void mouseEntered(MouseEvent arg0) {
    }

    @Override
    public void mouseExited(MouseEvent arg0) {
    }

    @Override
    public void mousePressed(MouseEvent e) {
        int x = e.getX();
        int y = e.getY();

        //check if the cursor is within image area
        if (x > image.getWidth() || y > image.getHeight()) {
            return;
        }

        //Clicking the left button will either add a new vertex or finish off a polygon
        if (e.getButton() == MouseEvent.BUTTON1) {
            if (currentPolygon.points.size() > 0 ){

                if(pointWithinCircle(x, y, currentPolygon.points.get(0).getX(), currentPolygon.points.get(0).getY(), FIRST_NODE_SIZE + 2)){
                    addNewPolygon();
                }
                else{
                    currentPolygon.points.add(new Point(x,y));
                    System.out.println(x + " " + y);
                    repaint();
                }
            }
            else{
                currentPolygon.points.add(new Point(x,y));
                System.out.println(x + " " + y);
                repaint();
            }
        } 
    }

    @Override
    public void mouseReleased(MouseEvent arg0) {
    }

    public void mouseDragged(MouseEvent e){
    }

    public void mouseMoved(MouseEvent e){
        mousePos.setX(e.getX());
        mousePos.setY(e.getY());
        repaint();
    }

} 
```

我现在已经尝试在几种不同的操作系统和笔记本电脑下运行这个程序，所有这些都明显变慢了。这表明这是我的代码的问题，而不仅仅是运行它的问题。

我感觉我的问题与我调用该`repaint()`方法的次数过多有关。我还没有真正在网上看到很多关于使用 Java 的 swing 和图形库实现绘图功能的最佳方法的好资源，因此，对于我正在搞砸的一般做法的建议以及对这个问题的直接解决方案将是可取的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T17:30:27.030

看起来您正在直接绘制到帧缓冲区。这非常慢，因为每次绘制任何东西时，JVM 都必须进行系统调用来更新屏幕上的图像。

如果您在 JVM 内存中的单个帧上执行所有绘图操作，并且仅在整个图像准备好时才输出到系统，您将看到更快的渲染速度。*（这是您已经在使用 background-image 所做的事情`image`，事实上您可以重新使用您已经创建的图形对象，但不要使用）*

所以，你需要创建一个画布来绘制；

```
BufferedImage canvas = new BufferedImage(width, height, BufferedImage.TYPE_3BYTE_BGR); 
```

然后抓取`Graphics`您将用于绘制到画布上的对象；

```
Graphics cg = canvas.getGraphics(); 
```

在 上执行所有绘图操作`cg`，然后在您的函数中，只需使用一次调用`paintComponent(Graphics g)`即可绘制到组件；`canvas`

```
g.drawImage(canvas, 0, 0, null); 
```

为了获得更好的性能，您应该绘制到 a`VolatileImage`而不是 a `BufferedImage`。但是`BufferedImage`它更容易使用，并且可以很好地满足您的目的。

# r - 测量数字序列的周期性 [R]

> ID：12824931
> 
> 赞同：5
> 
> 时间：2012-10-10T17:24:49.700
> 
> 标签：r, sequence

周期序列是在*n*项之后重复自身的序列，例如，以下是周期序列：

1, 2, 3, 1, 2, 3, 1, 2, 3, ...

我们将该序列的*周期*定义为每个子序列中的项数（上面的子序列为 1、2、3）。所以上述序列的周期是 3。

在 R 中，我可以定义上述序列（尽管不是无穷大），使用：

```
sequence <- rep(c(1,2,3),n) #n is a predefined variable 
```

因此，如果`n = 50`,`sequence`将是序列 1, 2, 3, 1, 2, 3, ... , 1, 2, 3，其中每个数字出现了 50 次，显而易见。

我正在寻找建立一个计算周期的函数`sequence`。伪代码如下：

```
period <- function(sequence){
    subsequence <- subsequence(sequence) #identify the subsequence
    len.subsequence <- length(subsequence) #calculate its length
    return(len.subsequence) #return it
} 
```

我将如何识别子序列？这是函数的一种反转`rep`，这样我传入一个序列，它传递出初始向量的长度。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T17:35:14.507

如果周期始终相同，即序列永远不会改变，那么您可以使用循环`lag`来查看何时发生匹配。

在完全偏差的情况下，我还建议使用 `seqle`（猜猜是谁编写了该函数:-)），这类似于`rle`但可以找到序列。 [检测结果整数序列的间隔](https://stackoverflow.com/questions/8400901/detect-intervals-of-the-consequent-integer-sequences) 我不是唯一一个以这种方式编辑“rle”源的人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T17:51:32.590

使用该序列相当容易，尽管我会避免使用名称“序列”，因为它是一个 R 函数名称。这将识别任何单调序列的周期性，因此它更通用，但它不会识别如下序列：1.2.3.4.2.3.4,1,2,3,4,2,3,4, ....

```
> which(diff(seQ) < 0)
[1]  3  6  9 12 15 18 21 24 27
> diff(which(diff(seQ) < 0) )
[1] 3 3 3 3 3 3 3 3 
```

您可以测试间隔的相等性或使用其中任何一个结果来索引原始向量。你应该用 c(1, 2, 3, 4, 2, 3, 4, 1, 2, 3, 4, 2, 3, 4) 测试你的答案，看看他们是否通过了识别非单调重复的测试. 到目前为止，他们都没有这样做；因为没有报告周期为 7。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T19:09:15.323

在@DWin 的基础上，您可能可以创建一个类似这样的函数：

```
subsequence <- function(data) {
  ii <- 0
  while (TRUE) {
    ii <- ii + 1
    LAG <- sum((diff(data, lag = ii) == 0) - 1)
    if (LAG == 0) { break }
  }
  list(Period = ii, 
       Sequence = data[1:ii], 
       Reps = length(data)/ii) 
} 
```

**注意**：*这是我第一次使用`while()`，所以我不确定是否有更好的方法来实现它。*

这是一些数据；s3 是非单调的：

```
s1 <- rep(c(1,2,3), 3)
s2 <- rep(c(1,2,3), 50)
s3 <- c(1, 2, 3, 4, 2, 3, 4, 1, 2, 3, 4, 2, 3, 4) 
```

这是`subsequence()`函数的结果。

```
subsequence(s1)
# $Period
# [1] 3
# 
# $Sequence
# [1] 1 2 3
# 
# $Reps
# [1] 3

subsequence(s2)
# $Period
# [1] 3
# 
# $Sequence
# [1] 1 2 3
# 
# $Reps
# [1] 50

subsequence(s3)
# $Period
# [1] 7
# 
# $Sequence
# [1] 1 2 3 4 2 3 4
# 
# $Reps
# [1] 2 
```

# tfs - 我刚刚安装了 Visual Studio 2012，但在 Source Control > Status 中没有看到 Find 选项

> ID：12824939
> 
> 赞同：7
> 
> 时间：2012-10-10T17:24:57.840
> 
> 标签：tfs, visual-studio-2012

我刚刚安装了 Visual Studio 2012，但没有看到用于查看所有用户的所有待处理更改的选项。我之前通过在 Source Control Exlplorer 中选择根目录，然后导航到 File > Source Control > Find in Source Control > Status 来做到这一点。然后，这将向我显示所有待处理的签到。现在，我只看到按搁置集、变更集或标签查找的选项。

如何查看所有团队成员的所有待定更改？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-10T18:09:20.987

此功能是通过 TFS 电动工具获得的。我怀疑你在 2010 版本上安装了它。2012 版本在这里：http: [//visualstudiogallery.msdn.microsoft.com/b1ef7eb2-e084-4cb8-9bc7-06c3bad9148f](http://visualstudiogallery.msdn.microsoft.com/b1ef7eb2-e084-4cb8-9bc7-06c3bad9148f)

请注意，位置*略有*变化：文件 > 源代码管理 > 查找 > 按状态查找...

# php - 正则表达式：替换两个字符串之间的所有内容，但不是开始/结束字符串

> ID：12824942
> 
> 赞同：0
> 
> 时间：2012-10-10T17:25:17.547
> 
> 标签：php, regex

我在 RegEx 方面不是最好的......我有一些 PHP 代码：

```
$pattern = '/activeAds = \[(.*?)\]/si';
$modData = preg_replace($pattern,'TEST',$data); 
```

所以我有一个 JavaScript 文件，它声明和数组：

```
var activeAds = []; 
```

我需要这个来用我的字符串填充数组，或者如果数组里面已经有一个字符串，我想用我的字符串替换它（在本例中为“TEST”）。

现在，我的正则表达式正在替换所有内容，包括我的开始和结束，我只需要替换中间的内容。

我剩下：

```
var TEST; 
```

TIA

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T17:28:47.350

您可以捕获要替换的部分之前和之后的内容：

```
$pattern = '/(activeAds = \[).*?(\])/si'; 
```

捕获这些部分后，您可以保留它们并替换中间的部分：

```
$modData = preg_replace($pattern, '\1TEST\2', $data); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T17:38:55.243

有很多方法可以做到这一点，我的方法如下：

```
$data    = array("activeAds = testing123");
$pattern = "/activeAds\s?=\s?(.*)/";
$result  = preg_replace($pattern,"activeAds = TEST", $data);
var_dump($result); 
```

编辑：忘了提到`\s?`这里允许一个可选空间。

# ember.js - 我将如何修改此 ember.js 函数以返回 Enumerable 或 Array

> ID：12824943
> 
> 赞同：2
> 
> 时间：2012-10-10T17:25:21.150
> 
> 标签：ember.js

我刚刚开始学习 ember.js，我遵循了一些教程并[在这里创建了一个工作示例](http://jsfiddle.net/ZEzwn/)：

```
App.Track.reopenClass({
    find: function() {
        var tracks = [];

        $.ajax({
            url: 'http://ws.spotify.com/lookup/1/.jsonuri=spotify:album:6J6nlVu4JMveJz0YM9zDgL&extras=track',
            dataType: 'json',
            context: this,
            success: function(data, textStatus, jqXHR) {
                $.each(data.album.tracks, function(index, value) {
                    track_id = value.href.replace("spotify:track:", "");
                    tracks.addObject(App.Track.create(value));
                    // I would rather do something like:
                    // tracks[track_id] = App.Track.create(value)
                });
            }
        })
        return tracks;
    }
}); 
```

此函数调用 API 并循环通过返回的数据来填充轨道对象 (tracks.addObject(App.Track.create(value));) 并返回它。

我不想从这个函数中取回一个普通的对象，而是想要一个 Enumerable / Array 以便我可以使用 filterProperty 操作它或按 id 拉出轨道（有一个 track_id 我想用作数组索引）。

我所有使用数组的尝试都破坏了 ember 在 ajax 调用填充轨道时更新视图的神奇能力。

任何人都可以修改[http://jsfiddle.net/ZEzwn/](http://jsfiddle.net/ZEzwn/)以返回一个 Enumerable（最好是一个数组）但仍然自动更新视图吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T09:11:43.763

由于您的方法已经返回一个数组（因为您启用了 Ember 原型扩展），因此执行以下操作：

```
var tracks = []; 
```

相当于

```
var tracks = Ember.A(); 
```

在 ajax 请求成功时，您只是在填充数组，因此您可以`Ember.Array`使用`filterProperty`.

使用 id 作为数组键只有一件事，你真的不应该，正如[Ryan Bigg 在其博客中所说](http://ryanbigg.com/2012/10/javascript-arrays-and-objects)：

> 但是，如果变体的 id 是 [稍高一些，例如] 1,013,589,413，那么您就会遇到问题。
> 
> 在这种情况下，JavaScript 将创建一个 10 亿、1300 万、589 万、414 元素数组。全部存储一个值，就在最后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T09:11:50.873

好的，正如 louiscoquio 指出的那样，这现在正在工作，轨道是一个可枚举的对象，我可以做类似的事情

`tracks.filterProperty('href', 'spotify:track:7x7F7xBqXqr0L9wqJ3tuQW')`

`tracks.getEach('name')`

`tracks.get('firstObject')`

# c# - 如何强制 C# 类在其中具有常量值？

> ID：12824945
> 
> 赞同：-2
> 
> 时间：2012-10-10T17:25:37.183
> 
> 标签：c#, .net-4.0

> **可能重复：**
> [有没有办法强制 C# 类实现某些静态函数？](https://stackoverflow.com/questions/577749/is-there-a-way-to-force-a-c-sharp-class-to-implement-certain-static-functions)

考虑一个类并考虑到，出于某些原因，您需要强制该类在其中包含一个常量。这将应用于任何一组类。在我的特定情况下，我需要我的一些类在它们内部有一个常量来保存相应的空值。

在我的例子中，那些实现某个接口的类，因为它们必须以某种方式运行，还必须具有我的上下文中需要的三个特殊值（上下文太长而无法解释并且在这里毫无用处）。

所以基本上我需要一种方法来强制我的类在它们内部有一个特定的常量（可以从外部访问）。我知道我可以简单地将常量放在那些类中，但是如果我正在寻找一种方法来告诉编译器：“如果这个类实现了这个接口（例如），那么如果没有那个你不应该编译它持续的！”。

这样，编译器就会进行检查，而不仅仅是可能忘记放置常量的程序员。

我希望我能解释我的问题。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T17:59:43.253

> 所以基本上我需要一种方法来强制我的类在它们内部有一个特定的常量（可以从外部访问）。我知道我可以简单地将常量放在那些类中，但是如果我正在寻找一种方法来告诉编译器：“如果这个类实现了这个接口（例如），如果没有那个你不应该编译它持续的！”。

您可以通过创建一个包含唯一公共构造函数的类来实现类似的目的，该构造函数需要您需要的所有*信息*/值。因此，例如，您可以使用以下内容：

```
class myClass{
   public readonly int Value1;
   public readonly string Value2;
   public myClass(int value1, string value2){
         Value1 = value1;
         Value2 = value2;
   }
} 
```

事实上，在这种情况下，程序员被迫实例化对象，为可用的唯一构造函数提供正确的值，并且不能更改两个公共字段的值（由于*readonly*关键字）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T17:35:05.747

上一个关于同一主题的问题的解释：

> 对静态方法的调用是通过类名完成的，而不是通过对象引用，调用它的 IL 代码将通过定义它的类的名称来调用抽象方法，不一定是您使用的类的名称.

上一篇：[为什么我不能在 C# 中使用抽象静态方法？](https://stackoverflow.com/questions/3284/why-cant-i-have-abstract-static-methods-in-c)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T17:35:54.387

将静态方法添加到类中有什么问题？当将静态方法直接编码到类中完全合乎逻辑时，我不明白为什么需要另一层。

```
 public class MyClass {
      public static MyClass TheMethod(int i){
           // TODO:
      }
 } 
```

# vb.net - VB.Net发送十进制udp

> ID：12824947
> 
> 赞同：1
> 
> 时间：2012-10-10T17:25:41.317
> 
> 标签：vb.net, udp, decimal, ascii

我正在尝试从计算机向 PIC 发送一个字节（注意：PIC 只接受一个字节，否则它将只接受数据发送的第一个字节）

这应该不是什么大问题，因为我只想管理总共 8 个 LED，所以我只需要它从 0 到 255，但我在实现这一点时遇到了问题。如果我尝试将值 1 发送到 pic 我的程序发送 31 如果我尝试发送 5 它发送 35 如果我尝试发送 255 它发送 3* *2* *3* *5* *3* *5* * 所以对于每一个数字我尝试发送它在它前面添加一个 3。我正在使用以下代码来确定值并发送它：

```
 Dim t As Integer = 0
    Dim result As Integer = 0
    For Each chk As CheckBox In GroupBox1.Controls
        If chk.Checked = True Then
            result = result + 2 ^ t
        End If
        t = t + 1
    Next
    publisher.Connect(IPTo, PortTo)
    Dim sendbytes() As Byte = ASCII.GetBytes(result)
    publisher.Send(sendbytes, sendbytes.Length) 
```

我认为问题在于转换为 ASCII。

我还尝试从 PIC 接收输入到我的电脑，为此我在计时器中有以下脚本：

```
Private Sub Timer1_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Timer1.Tick
        Try
            Dim ep As IPEndPoint = New IPEndPoint(IPAddress.Any, 0)
            Dim rcvbytes() As Byte = subscriber.Receive(ep)

            Dim translate As String
            translate = System.BitConverter.ToInt32(rcvbytes, 0)

            TBRcv.Text = translate
        Catch ex As Exception
        End Try
    End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T17:30:34.310

ASCII.GetBytes 需要一个字符串（以 ASCII 编码）。给它一个 Int32 没有意义。

查看[System.BitConverter.GetBytes()](http://msdn.microsoft.com/en-us/library/de8fssa4.aspx)和[System.BitConverter.ToInt32()](http://msdn.microsoft.com/en-us/library/system.bitconverter.toint32.aspx)（用于接收端）

所以你需要做的唯一改变是：

```
Dim sendbytes() As Byte = BitConverter.GetBytes(result) 
```

进一步讨论：发生的事情是您的结果（比如说 5）首先转换为字符串（现在是“5”），然后 ASCII.GetBytes 现在将返回一个具有单个值 0x35 的字节数组，因为 Asc("5 ") 是 0x35。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T17:33:49.680

字符的 ASCII 值为`1`0x31 等。供参考：

![在此处输入图像描述](../Images/eee5a09b856e0fafeaebd0c4ea33adb0.png)

# php - 我可以自动更改头像吗？- 这个页面可以

> ID：12824949
> 
> 赞同：-1
> 
> 时间：2012-10-10T17:25:44.863
> 
> 标签：php, api, facebook-graph-api, graph, facebook-javascript-sdk

我可以使用 Facebook API 自动更改个人资料图片或时间线封面吗？

现在我正在使用 makeprofile=1; 的链接。类似参数，但这需要用户确认。

```
$photo = $facebook->api($album_id . '/photos', 'post', $args);

    if($photo['id'] != "")
    {
      $pictue = $facebook->api('/'.$photo['id']);
      $fb_image_link = $pictue['link']."&makeprofile=1";

      echo '<a href="'.$fb_image_link.'" target="_blank"> Poner como perfil </a>';
    } 
```

我把例子放在[这里](https://www.facebook.com/JohnnieWalker/photos_stream)，[另一个](https://www.facebook.com/zaraguza)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T17:40:56.133

简单的答案是否定的。

不可能更改个人资料图片或封面图片，我认为这主要是因为如果允许应用程序执行这些操作，那么垃圾邮件发送者会通过上传他们的骗局图片作为时间线封面来搞乱用户的个人资料，而这些人已经做了很多通过 Graph API 允许的具有当前功能的事物。

但是，您可以将图像上传到新专辑或现有专辑，向用户提供有关如何将新上传的图像设置为其时间线封面的说明。

另外我认为您应该在发布之前先尝试搜索您的问题，因为这个问题之前已经被其他人问过很多次并且已经得到了回答。

希望它能消除你的疑问。

# ios - 如何在drawRect中的部分UIImage上添加一个alpha层？

> ID：12824951
> 
> 赞同：2
> 
> 时间：2012-10-10T17:25:47.007
> 
> 标签：ios, core-graphics, drawrect

我对实现自定义 drawRect 方法（和核心图形）**完全**陌生，但这样做是为了提高 UITableView 的滚动性能。如果我做任何愚蠢的事情，请告诉我。

在我的单元格中，我有一个 UIImage 并且在它的底部我想打印图像的标题。但是，为了使标题文本无论图像如何都清晰显示，我希望在 UIImage 顶部和标题文本下方有一个不透明度约为 75% 的黑色矩形。

我尝试了以下

```
[self.picture drawAtPoint:point];

[[UIColor colorWithRed:0.0 green:0.0 blue:0.0 alpha:0.75] setFill];
UIRectFill(CGRectMake(rect)); 
```

但是产生的填充实际上吞噬了 UIImage（请原谅我的描述不佳，抱歉），并且显示在稍微透明填充下方的部分是我的 UITableView 的背景......

我想我可以为矩形制作另一个图像，然后在上面绘制它，`self.picture`但我想知道这是否是一种更简单的方法`UIRectFill`来实现这一点......

如前所述，我对 Core Graphics 完全陌生，因此非常感谢任何提示。提前致谢！

* * *

另外，我还有第二个问题......下载的图像的尺寸（以像素为单位）是它将适合的矩形（以点为单位）的两倍，以考虑视网膜显示。但是，即使在 iPhone4 设备上，它现在也正在检查该矩形......我该如何解决这个问题（也包括 iPhone4 之前的设备？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T19:03:45.340

我没有做太多自定义的`drawRect`事情，所以我会将问题的那部分推迟给其他人，但通常通过将昂贵的计算移到后台队列中，然后从主队列异步更新单元格，可以更容易地解决 tableview 性能问题后台操作完成时排队。因此，类似：

首先，为tableview定义一个操作队列属性：

```
@property (nonatomic, strong) NSOperationQueue *queue; 
```

然后在 中`viewDidLoad`，初始化：

```
self.queue = [[NSOperationQueue alloc] init];
self.queue.maxConcurrentOperationQueue = 4; 
```

然后在 中`cellForRowAtIndexPath`，您可以：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"MyCellIdentifier";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    // Do the quick, computationally inexpensive stuff first, stuff here.
    // Examples might include setting the labels adding/setting various controls
    // using any images that you might already have cached, clearing any of the
    // image stuff you might be recalculating in the background queue in case you're
    // dealing with a dequeued cell, etc.

    // Now send the slower stuff to the background queue.

    [self.queue addOperationWithBlock:^{

        // Do the slower stuff (like complex image processing) here.
        // If you're doing caching, update the cache here, too.

        // When done with the slow stuff, send the UI update back
        // to the main queue...

        [[NSOperationQueue mainQueue] addOperationWithBlock:^{

            // see if the cell is still visible, and if so ...

            UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
            if (cell)
            {
                // now update the UI back in the main queue
            }
        }];

    }];

    return cell;
} 
```

您可以通过确保将计算昂贵的东西的结果缓存到类似的东西中来进一步优化它 a `NSCache`，也许也可以缓存到`Documents`或其他地方，因此您可以优化必须完成复杂内容的频率并真正优化用户界面。

而且，顺便说一句，当你这样做时，你现在可以将你的`UILabel`（`backgroundColor`使用`UIColor`0.75 alpha 的黑色）放在顶部`UIImageView`，iOS 会为你处理它。尽可能简单。

关于图像分辨率的最后一个问题，您可以：

*   使用视图`contentScaleFactor`来确定您是否正在处理视网膜并相应地调整缩略图图像的大小；或者
*   只需使用 imageview`contentMode`将`UIViewContentModeScaleAspectFill`确保您的缩略图图像被正确渲染，无论......如果您使用的是小缩略图图像（甚至是 2x 图像），性能通常很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T03:26:33.583

[根据另一个stackoverflow问题](https://stackoverflow.com/questions/2935608/how-can-i-fill-a-rect-with-an-alpha-color-using-coregraphics)，这是使用该`kCGBlendModeNormal`选项的正确方法

```
[[UIColor colorWithRed:0.0 green:0.0 blue:0.0 alpha:0.75] setFill];
UIRectFillUsingBlendMode(rect, kCGBlendModeNormal); 
```

# python - 在给定开始和结束标记的情况下，如何在 python 中删除子字符串？

> ID：12824957
> 
> 赞同：1
> 
> 时间：2012-10-10T17:26:08.910
> 
> 标签：python, python-2.x

我有一个看起来像的刺痛：

```
u'\'\'\'Joseph Michael "Joe" Acaba\'\'\' (born May 17, 1967) is an [[Teacher|educator]], [[Hydrogeology|hydrogeologist]], and [[NASA]] [[astronaut]].<ref name="bio">{{Cite web|url=http://www.jsc.nasa.gov/Bios/htmlbios/acaba-jm.html|title=Astronaut Bio: Joseph Acaba|month=February | year=2006|publisher=[[NASA|National Aeronautics and Space Administration]]|author=NASA|accessdate=November 26, 2006}}</ref><ref name="bio2">{{Cite web|url=http://oeop.larc.nasa.gov/hep/hep-astronauts.html|title=NASA Hispanic Astronauts\n|publisher=National Aeronautics and Space Administration|author=NASA|accessdate=November 26, 2006}}</ref> In May 2004 he became the first person' 
```

我想删除所有测试`<ref`以`ref>`包括标记。我是 python 新手，不确定最好的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T17:29:10.843

在这种情况下，正则表达式可以正常工作：

```
import re
ref = re.compile(u'<ref.*?ref>', re.DOTALL)

ref.sub(u'', yourtext) 
```

注意`re.DOTALL`限定符；您的`<ref>`部分中有换行符，我们也想删除它们。

演示：

```
>>> import re
>>> tst=u'\'\'\'Joseph Michael "Joe" Acaba\'\'\' (born May 17, 1967) is an [[Teacher|educator]], [[Hydrogeology|hydrogeologist]], and [[NASA]] [[astronaut]].<ref name="bio">{{Cite web|url=http://www.jsc.nasa.gov/Bios/htmlbios/acaba-jm.html|title=Astronaut Bio: Joseph Acaba|month=February | year=2006|publisher=[[NASA|National Aeronautics and Space Administration]]|author=NASA|accessdate=November 26, 2006}}</ref><ref name="bio2">{{Cite web|url=http://oeop.larc.nasa.gov/hep/hep-astronauts.html|title=NASA Hispanic Astronauts\n|publisher=National Aeronautics and Space Administration|author=NASA|accessdate=November 26, 2006}}</ref> In May 2004 he became the first person'
>>> ref = re.compile(u'<ref.*?ref>', re.DOTALL)
>>> ref.sub(u'', tst)
u'\'\'\'Joseph Michael "Joe" Acaba\'\'\' (born May 17, 1967) is an [[Teacher|educator]], [[Hydrogeology|hydrogeologist]], and [[NASA]] [[astronaut]]. In May 2004 he became the first person' 
```

# github - 如何在 GitHub 中获取修订版本的源代码

> ID：12824958
> 
> 赞同：1
> 
> 时间：2012-10-10T17:26:18.273
> 
> 标签：github, repository

我正在使用 BitBucket 一个 GitHub 存储库，我想知道如何获取特定修订的来源？

几天前我提交了一些更改，我想要该修订的整个源代码，我怎样才能得到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T20:08:45.870

使用 Git，使用[git revisions](http://git-scm.com/docs/gitrevisions)，假设您的修订版发布在`master`分支上：

```
cd C:\Temp
git clone https://yourusername@bitbucket.org/repoowner/projectname
git checkout master@{2 days ago} 
```

（不是开玩笑，您可以指定这样的日期规范！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T17:45:35.447

Bitbucket 是 Mercurial/Git 存储库，是 GitHub 的竞争对手。

如果要检索特定的变更集/修订，可以使用 Git 或 Mercurial。

使用水银：

```
cd C:\Temp
hg clone https://yourusername@bitbucket.org/repoowner/projectname
hg up -r revnumber 
```

`revnumber`您要检索的修订号在哪里。

# erlang - Erlang 函数已经用保护子句定义了

> ID：12824959
> 
> 赞同：13
> 
> 时间：2012-10-10T17:26:24.483
> 
> 标签：erlang

编写一个递归函数，我想要一个 fn 在列表有元素时执行，另一个在它为空时执行：

```
 transfer(Master, [H|Tail]) ->
  Master ! {transfer, H},
  transfer(Master, Tail).

transfer(_Master, []) ->
  nil. 
```

我遇到的问题是`src/redis/redis_worker.erl:13: function transfer/2 already defined`。我知道它对具有相同名称和数量的两个函数感到不安，但这两个应该是不同的。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-10-10T17:31:43.637

问题是函数的子句需要用分号而不是句点分隔。

```
transfer(Master, [H|Tail]) ->
    Master ! {transfer, H},
    transfer(Master, Tail); % use semicolon here, not period

transfer(_Master, []) ->
    nil. 
```

当您使用句点终止子句时，编译器认为该函数的定义是完整的，因此它将您的代码视为两个单独的函数，而不是同一函数的不同子句。

有关更多详细信息，请参阅[函数声明语法的 Erlang 参考。](http://www.erlang.org/doc/reference_manual/functions.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-10T17:30:04.793

您需要使用分号而不是冒号来分隔两个函数子句。

# c++ - C++ - 优化一行

> ID：12824961
> 
> 赞同：0
> 
> 时间：2012-10-10T17:26:37.713
> 
> 标签：c++, optimization

```
if ((*object)&1) { //object is int* 
```

我正在创建 GC（垃圾收集器）并且我需要找到一种更好的方法来检查 ptr 数据中的第一位是否已启用。（如果是，然后做一个代码）

这条线占用了我程序运行时间的 10%。有没有办法通过组装来优化它？（在发布模式下需要 3 行）

顺便说一句，我在其他地方检查了`&`操作员，这需要很多性能。这并不是说其余的代码非常快。（C# 每个对象需要 9 纳米，我的是 17 纳米）

在这一行之后，我禁用了这个位：

```
--*object; 
```

也能帮上忙？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T17:33:05.337

没有。 `AND`是每个 CPU 上的 1 条机器指令；没有更快的方法来检查最低位。

根据您对 GC 的说法，您的性能问题可能源于缓存未命中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T17:34:42.047

当您处于此优化级别时，您应该启用编译器的汇编输出，以便查看生成的各个指令。如果您为这段代码这样做，我想您会发现该`and`操作是一条指令，无法真正进一步优化。

根据内部代码的复杂性，`if`您可能会发现您的寄存器已用尽，并且重新加载的值超出了必要的范围。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T18:10:39.460

至少使用 GCC，您可以使用`__builtin_expect (condition, expected_result)`宏来优化您显示的 if 语句的编译器分支预测。但我怀疑这是否是您的性能问题的真正原因（请参阅我的评论）。

我建议使用 C++ (11) 智能指针来解决应用程序的内存管理问题。或者（根据 C++11 标准），您可以使用[boost SmartPtr library](http://www.boost.org/doc/libs/1_51_0/libs/smart_ptr/smart_ptr.htm)、[loki SmartPtr](http://loki-lib.sourceforge.net/index.php?n=Idioms.SmartPointer)或其他实现。

# git - 如何使用 Git 在两个分支上开发测试？

> ID：12824966
> 
> 赞同：0
> 
> 时间：2012-10-10T17:27:03.920
> 
> 标签：git, version-control, tdd, branch, git-branch

我有两个分支，一个用于开发，一个用于生产，没有测试。

开发分支将添加新功能和测试。

生产分支将修复错误并创建测试。

如何与开发分支共享生产测试，而不是相反？

如何与开发分支共享生产分支上的错误修复？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T18:06:41.660

将您的生产测试保存在您的生产分支中，并经常合并到您的开发分支中。或者，将您的开发分支重新建立在您的生产之上。

这样，您的开发分支将从生产中获得错误修复和测试，但生产不会受到开发更改的污染。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T17:32:34.293

你可以有一个只包含测试代码的测试分支。开发准备好后，将开发分支合并到测试分支，必要时更新测试代码并运行测试。如果一切正常，则将开发分支合并到生产分支。如果测试失败，则切换到开发分支，修复它，然后合并到测试分支（合并到哪个提交取决于您）并再次测试，代码通过所有测试。

# amazon-s3 - 使用 Amazon Route 53 为 S3 存储桶设置 CNAME

> ID：12824967
> 
> 赞同：6
> 
> 时间：2012-10-10T17:27:04.740
> 
> 标签：amazon-s3, amazon-web-services, amazon-route53

我需要以下网址

[http://liangpai.s3.amazonaws.com/uploadImage/shareImage/2012-10/506dc1ef71dcf.png](http://liangpai.s3.amazonaws.com/uploadImage/shareImage/2012-10/506dc1ef71dcf.png)

显示为：

[http://imgs.liangpai.me/uploadImage/shareImage/2012-10/506dc1ef71dcf.png](http://imgs.liangpai.me/uploadImage/shareImage/2012-10/506dc1ef71dcf.png)

我的 S3 存储桶名称是“liangpai”。在 Route 53 上，我新建了一个名为“imgs”的 CNAME，我输入的值是“liangpai.s3.amazonaws.com”</p>

在此之后，我看不到 S3 Web 链接更改为我的域链接。

这里有什么问题吗？

谢谢你的建议！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-11T04:20:36.853

S3 CNAME 要求存储桶名称与主机名匹配。如果您希望 S3 从 提供服务`imgs.langpai.me`，您需要创建一个名为 的存储桶`imgs.langpai.me`。有关更多信息，请参阅[S3 文档](http://docs.amazonwebservices.com/AmazonS3/latest/dev/HostingExistingDomainOnS3.html)。

您可以创建一个 CloudFront 分配来回答`imgs.langpai.me`（请参阅[CloudFront CNAME 支持](http://docs.amazonwebservices.com/AmazonCloudFront/latest/DeveloperGuide/CNAMEs.html)）拥有它并将请求转发到`langpai.s3.amazonaws.com`. 当然，这也会产生 CloudFront 费用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-03-05T22:45:25.410

**方法 1：S3 通过存储桶名称直接 CNAME**

您可以按照以下步骤按存储桶名称创建 CNAME 记录。

1.  使用您将用于 dns 条目的相同名称创建存储桶名称。即*subdomain.mydomain.net*

2.  *为subdomain.mydomain.net*创建一个 cname 记录到*s3.amazonaws.com*

3.  根据您计划授予的访问权限设置存储桶的权限

**方法 2：S3 上的静态网站**

如果您提供静态内容，例如图像、文件等，您可以为您的**S3 存储桶使用****“静态网站托管”**。

 **通过单击存储桶图标 ( ![在此处输入图像描述](../Images/ea79fe3fa582092a30f055d38c2207ab.png)) 选择您的存储桶，然后选择右侧的“属性”选项卡并展开“静态网站托管”。在静态网站托管面板中，选择“启用网站托管”单选按钮并设置索引和错误文档。此时，您将在此面板中看到一个“端点”名称。简单地创建一个以端点为值的 DNS CNAME 记录。你可以在这里阅读整个[亚马逊演练](https://docs.aws.amazon.com/AmazonS3/latest/dev/website-hosting-custom-domain-walkthrough.html) 。

![在此处输入图像描述](../Images/7103f876d9e144eeb83809329da188e1.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-13T06:26:37.237

试试这个

使用您自己的存储桶 CNAME：

```
echo S3::getAuthenticatedURL("s3bucket.mydomain.com", $uri, 3600, true); 
```

但是你putobject文件检查读取Everyone premisssion类型：

> S3::ACL_PUBLIC_READ

$s3-> **putObjectFile** ($tmp, $bucketname , $path.$filename, **S3::ACL_PUBLIC_READ** )**

# google-sheets - 如何让 E 列根据 M 列中的首字母将其数据复制到右列？

> ID：12824968
> 
> 赞同：1
> 
> 时间：2012-10-10T17:27:05.387
> 
> 标签：google-sheets, google-sheets-formula, array-formulas

所以到目前为止我有一个电子表格，当我的技术人员将他们的姓名首字母输入到列 M 时，它将自动为列 N 加时间戳。

现在我希望电子表格做的第二件事是。

当我在 E 列“HRS”中输入小时数（例如：1.8）时。并让电子表格放置 HRS。进入正确的技术人员列。基于在 M 列“Tech Up”中输入的首字母。

示例：如果 E4=1.8，则将 1.8 放入 G4，因为 M4=AB
示例：如果 E6=3.2，则将 3.2 放入 J6，因为 M6=JW

有谁知道这需要什么类型的公式？或者我可能会在哪里找到一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T21:50:53.140

如果数据从第 4 行开始，并且各个技术人员列从 G 列开始，请在 G4 中尝试：

`=ArrayFormula(IF(E4:E*(M4:M={"AB","CD","GM","JW","RT"});E4:E;IFERROR(1/0)))`

如果技术人员的姓名首字母已经在 G2:L2 中作为标题：

`=ArrayFormula(IF(E4:E*(M4:M=G2:L2);E4:E;IFERROR(1/0)))`

如果使用第一个选项，请注意：

1.  更改嵌入数组中的首字母以匹配您的列
2.  如果您的电子表格设置为使用逗号作为小数点的区域设置，请将嵌入数组中的逗号更改为 \

# java - 使用大数据进行微基准测试

> ID：12824970
> 
> 赞同：3
> 
> 时间：2012-10-10T17:27:26.563
> 
> 标签：java, hashtable, benchmarking

我目前正在研究我的论文项目，设计一个缓存实现以与最短路径图算法一起使用。图算法与运行时相当不一致，因此对整个算法进行基准测试太麻烦了。我必须只专注于对缓存进行基准测试。

我需要进行基准测试的缓存大约是一个`Map`接口的十几个实现。这些缓存旨在与给定的访问模式（从上面的算法中查询密钥的顺序）很好地配合使用。然而，在一个“小”问题的给定运行中，有几千亿个查询。我需要运行几乎所有这些，才能对基准测试的结果充满信心。

我在将数据加载到内存时遇到了概念问题。可以创建一个查询日志，它只是在一次算法运行中查询的所有键（它们是 10 个字符的字符串标识符）的磁盘有序列表。这个文件*很大*。我的另一个想法是将日志分成 1-5 百万个查询块，并以下列方式进行基准测试：

1.  加载 1-5 百万个密钥
2.  将开始时间设置为当前时间
3.  按顺序查询它们
4.  记录经过的时间（当前时间 - 开始时间）

我不确定这会对缓存产生什么影响。我怎样才能进行热身期？加载文件可能会清除 L1 或 L2 缓存中最后一个块的所有数据。此外，维护一个 1-5 百万元素的字符串数组有什么影响（甚至迭代它会扭曲结果）？

请记住，访问模式很重要！例如，有一些哈希表具有移动到前端启发式，它重新排序表的内部结构。多次运行单个块或无序运行块是*不正确的。*这使得预热 CPU 缓存和 HotSpot 变得更加困难（我还可以保留一个用于预热但不用于计时的辅助虚拟缓存）。

拥有庞大数据集的微基准测试有哪些好的做法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T19:40:02.387

如果我正确理解了这个问题，如何在一台机器上加载查询日志，如果你没有足够的内存，可能是块，然后通过专用网络（可能是交叉电缆）将其流式传输到运行基准测试的机器上，因此您在被测系统与测试代码/数据之间的干扰最小......？

无论您使用哪种解决方案，您都应该尝试多次运行，以便评估可重复性 - 如果您没有获得合理的可重复性，那么您至少可以检测到您的解决方案不合适！

更新：re：批处理和计时 - 实际上，您可能最终会得到某种形式的细粒度批处理，至少，以有效地通过网络获取数据。如果您的数据属于自然的大型“组”或阶段，那么我会单独对它们进行计时以检查异常情况，但最强烈地依赖于整体时间安排。我认为小批量成千上万的时间（考虑到您正在运行数百万）并没有太多好处。

即使您在一台具有大量 RAM 的机器上运行所有内容，也可能值得将数据加载到一个 JVM 中，并将正在测试的代码加载到另一台 JVM 中，这样缓存 JVM 上的垃圾收集不会（直接）受到大堆的影响需要保存查询日志。

# if-statement - 条件应该测试阳性还是阴性结果？

> ID：12824973
> 
> 赞同：12
> 
> 时间：2012-10-10T17:27:34.593
> 
> 标签：if-statement, conditional-statements

对不起，如果标题很模糊，我不知道如何措辞。

是不是更好地表述一个条件，使您不想要的结果进入 if 语句然后退出函数，或者我应该测试我想要的结果并使用我的代码遵循该语句。

也许一些例子会有所帮助：

我所说的测试阴性结果的意思是：

```
if(myObject == null) {
    return;
}

//do whatever with myObject 
```

我所说的测试阳性结果的意思是：

```
if(myObject != null) {
    //do whatever with myObject
} 
```

对不起，如果有人能说得比我好，请做。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-12T08:32:53.003

我个人更喜欢第一种检查对象是否为空然后立即返回的方法。它允许“真实代码”保持不缩进、线性，并且可以防止许多嵌套的 if 语句，我发现这些语句更具可读性。否则，这两种方式都是有效的，并且会产生相同的结果。选择最适合您的情况（这可能取决于任何 else 或 else if 语句）。

这是一个很好的例子：

```
if (object1 == null) {
    return;
}
// do some stuff
if (object2 == null) {
    return;
}
// do some stuff
if (object3 == null) {
    return;
} 
```

反对：

```
if (object1 != null) {
    // do some stuff
    if (object2 != null) {
        // do some stuff
        if (object3 != null) {
            // do some stuff
        }
    }
} 
```

我发现第一个更具可读性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-30T08:04:31.143

如果可以在满足肯定条件时采取有效操作，例如记录结果集为空或未分配变量，则最好使用肯定条件。当您测试字符串时，API 可以在这里提供帮助，例如 Apache Commons StringUtils isNotBlank()。但是，有时最干净的方法是进行否定测试，例如只允许在变量为非空的情况下进行处理。

# ajax - 富脸 和 “冲突”

> ID：12824974
> 
> 赞同：2
> 
> 时间：2012-10-10T17:27:34.967
> 
> 标签：ajax, jsf, netbeans, richfaces, popuppanel

我偶然发现了富人的一种奇怪行为。关于我的视图结构的一些背景：

*   它主要是`<rich:extendedDataTable>`点击一行显示关于它的信息`<a4j:outputPanel>`

*   此外，每一行都有一个上下文菜单，其中包含“创建”、“编辑”等项目...`<rich:popupPanel>`

组件结构是这样的：

```
<h:panelGrid columns="2">
    <h:column>
        <rich:dataScroller for="testTable" maxPages="7"/>
        <rich:extendedDataTable id="testTable" value="#{testController.items}" rendered="#{testController.items.rowCount != 0}"
        selection="#{testController.selectedRow}" noDataLabel="No results to show" var="test" rows="20"
        style="width: 790px" selectionMode="single">

            <a4j:ajax execute="@form"
                event="selectionchange" 
                listener="#{testController.selectionListener}"
                render=":res"/>

            {columns to display}

        </rich:extendedDataTable>
    </h:column>

    <a4j:outputPanel id="res">
        <rich:panel header="Selected Rows:" rendered="#{not empty testController.selectedRows}">
            <rich:list type="unordered" value="#{testController.selectedRows}" var="t">
                <h:outputText value="#{t.name}"/>
                <br/>
                <h:outputText value="#{t.details}" converter="#{testConverter}"/>
            </rich:list>
        </rich:panel>
    </a4j:outputPanel>
</h:panelGrid>

<rich:contextMenu target="testTable" mode="ajax" id="contextMenu">
    <rich:menuItem label="Edit" render="popupEdit" oncomplete="#{rich:component('popupEdit')}.show();" mode="ajax"/>
</rich:contextMenu>

<rich:popupPanel id="popupEdit" modal="true" autosized="true" resizeable="false" moveable="false" domElementAttachment="form">
    <rich:hotKey key="esc" onkeyup="#{rich:component('popupEdit')}.hide(); return false;"/>
    <f:facet name="header">
        <h:outputText value="Edit Test"/>
    </f:facet>
    <f:facet name="controls">
        <h:outputLink value="#" onclick="#{rich:component('popupEditar')}.hide(); return false;">
            <h:graphicImage value="/resources/css/images/fechar_janela.png" width="20" height="20"/>
        </h:outputLink>
    </f:facet>

    <h:panelGrid id="popupEditContent" columns="2">
        ... {display of info}

            <a4j:commandButton value="Salvar" actionListener="#{testeController.update()}" render="tabelaTestes, contextMenu"/>
            <h:panelGroup id="messagePanel" layout="block">
                <rich:messages ajaxRendered="true" />
            </h:panelGroup>
    </h:panelGrid>
</rich:popupPanel> 
```

现在奇怪的行为（使用 NetBeans）：

*   从 NetBeans 部署应用程序；
*   在浏览器 (Firefox) 上打开已部署项目的 URL。表中的`<a4j:ajax>`内联不起作用，我知道这是因为未调用“testController.selectionListener”并且未显示详细信息（它`current`在支持 bean 中设置属性）。contextMenu 有效，但 popupPanel 在所有字段中显示 null 或空属性（`current`未设置属性）；
*   返回IDE，删除所有`<rich:popupPanel>`部分并保存文件；
*   返回浏览器，按 F5 并单击一行。现在`<a4j:ajax>`作品和电话`testController.selectionListener`，显示细节`<a4j:outputPanel>`。上下文菜单有效，但（显然）面板没有弹出；
*   在IDE中，放回`<rich:popupPanel>`section并保存文件；
*   现在再次刷新页面，一切正常，显示详细信息，编辑弹出窗口显示所选行的正确信息。

我尝试在没有该`<rich:popupPanel>`部分的情况下部署它，并且调用了 selectionListener。我认为问题在于使用`<a4j:ajax>`和`<rich:popupPanel>`部分部署页面，因此出现“冲突”。

1.  我从 Richfaces 展示中获取了结构并进行了更改。我注意到在展示中，`<rich:popupPanel>`放置在`<h:form>`标签之外，在我的项目中放置在 template.xhtml 中（因此顶部菜单页面有效）。错误是否可能是由该展示位置引起的？

2.  这可以被认为是在richfaces项目中提交的错误还是我在那里遗漏了什么？

3.  有解决方法或解决方案吗？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:42:18.270

我**想**我已经解决了。我`id`在标签中将属性设置为“form” `<h:form>`，在 template.xhtml 中，所以现在它看起来像这样：

```
<h:body>
    <h:form id="form">
        <div id="top" class="top">
            <ui:insert name="top">Top</ui:insert>
        </div>
        <div id="content" class="center_content">
           <ui:insert name="content">Content</ui:insert>
        </div>
    </h:form>
</h:body> 
```

这是我所做的唯一更改，现在所有组件在第一次部署后都可以正常工作。

编辑：在搜索另一个问题时找到了解决方案：[JSF action call on secon click](https://stackoverflow.com/questions/10094615/jsf-a4jcomandbutton-action-call-on-secon-click)

# c# - 以编程方式将应用程序池分配给 iis7 中的网站

> ID：12824975
> 
> 赞同：2
> 
> 时间：2012-10-10T17:27:36.400
> 
> 标签：c#, iis-7

我正在使用以下方法创建应用程序池并将其分配给网站。

这是创建应用程序池的代码：

```
WebSiteName = some website name which existed. 
```

我看到所有值都在调试模式下得到了它们应该在的位置

```
 private void ConfiugreAppPoolIIS7(targetMachine)
    {
        var mgr =  ServerManager.OpenRemote(targetMachine);

        if (AppPoolProp.ContainsKey("SomeTestAppPool"))
        {
            string reqAppPool = AppPoolProp["SomeTestAppPool"];

            if (!mgr.ApplicationPools.Any(pool => pool.Name == reqAppPool))
            {
                ApplicationPool myApp = mgr.ApplicationPools.Add(reqAppPool);
                myApp.AutoStart = true;
                myApp.ManagedPipelineMode = ManagedPipelineMode.Classic;
                myApp.ManagedRuntimeVersion = "V4.0";
                myApp.ProcessModel.IdentityType = ProcessModelIdentityType.NetworkService;
                myApp.Enable32BitAppOnWin64 = true;

                mgr.CommitChanges();

                foreach (Site site in mgr.Sites)
                {
                   if(site.Name == WebSiteName)
                   {
                       site.Stop();
                       site.ApplicationDefaults.ApplicationPoolName = myApp.Name;
                       site.Start();
                       mgr.CommitChanges();
                   }

                }

            }

        }
    } 
```

结果是，我看到应用程序池已成功创建，并且网站也已创建，但是，我在网站的高级设置中看到分配了*默认*应用程序池。

能否请你帮忙？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T11:28:43.493

该问题已通过修复对正确 Microsoft.Web.Administration.dll 的引用得到解决

此服务器管理连接到 express iis 而不是我的本地 iis 的原因。

# flot - 使用 flot 获取未知的解析错误

> ID：12824976
> 
> 赞同：0
> 
> 时间：2012-10-10T17:27:36.777
> 
> 标签：flot

有人可以指出我在这里缺少什么吗？我正在尝试使用以下函数生成一个浮点图（在页面中 $.getJSON 函数成功时调用）。目前，图表根本没有加载，我得到一个解析错误。如果我删除了这个函数，解析错误就会消失，所以我确定是这个函数导致了问题，但我看不到在哪里！

```
function plotLineGraph(theData){
var myData = theData['data'];
var myDates = theData['dates'];
var d1 = [
          myData[0],  myData[1],  myData[2],  myData[3],  myData[4],
          myData[5],  myData[6],  myData[7],  myData[8],  myData[9],
          myData[10], myData[11], myData[12], myData[13], myData[14],
          myData[15], myData[16], myData[17], myData[18], myData[19],
          myData[20], myData[21], myData[22], myData[23], myData[24],
          myData[25], myData[26], myData[27], myData[28], myData[29]
          ];
$.plot($("#placeholder"), [
    {label: "rating",  data: d1}
    ], {
        series: {
            lines: { show: true },
            points: { show: true }
        },
        xaxis: {
            ticks:[
            myDates[0],  myDates[1],  myDates[2],  myDates[3],  myDates[4],
            myDates[5],  myDates[6],  myDates[7],  myDates[8],  myDates[9],
            myDates[10], myDates[11], myDates[12], myDates[13], myDates[14],
            myDates[15], myDates[16], myDates[17], myDates[18], myDates[19],
            myDates[20], myDates[21], myDates[22], myDates[23], myDates[24],
            myDates[25], myDates[26], myDates[27], myDates[28], myDates[29]
            ]
        },
        yaxis: {
            ticks: 5,
            min: 0,
            max: 5
        },
        grid: {
            backgroundColor: { colors: ["#fff", "#eee"] }
        }
});
} 
```

编辑：

$.getJSON 函数返回以下 JSON：

```
{
"data": [[1, 0], [2, 0], [3, 0], [4, 0], [5, 0], [6, 0], [7, 0], [8, 0], [9, 0], [10, 0], [11, 0], [12, 0], [13, 0], [14, 0], [15, 0], [16, 0], [17, 0], [18, 0], [19, 0], [20, 0], [21, 0], [22, 0], [23, 3], [24, 3], [25, 2], [26, 0], [27, 0], [28, 0], [29, 0], [30, 0]],
"dates": [[1, '10/9'], [2, '11/9'], [3, '12/9'], [4, '13/9'], [5, '14/9'], [6, '15/9'], [7, '16/9'], [8, '17/9'], [9, '18/9'], [10, '19/9'], [11, '20/9'], [12, '21/9'], [13, '22/9'], [14, '23/9'], [15, '24/9'], [16, '25/9'], [17, '26/9'], [18, '27/9'], [19, '28/9'], [20, '29/9'], [21, '30/9'], [22, '1/10'], [23, '2/10'], [24, '3/10'], [25, '4/10'], [26, '5/10'], [27, '6/10'], [28, '7/10'], [29, '8/10'], [30, '9/10']]
} 
```

编辑2：

谢谢布伦丹。调用在这里（它是一个更大的函数的一部分，它使用相同的语法来正确生成其他一些饼图）：

```
$.getJSON('/last-month-daily-average-for-products/' 
          + theProductUuid + '/', plotLineGraph); 
```

至于 JSON 的拆解/重组……没有特别的原因，没有。我需要做的就是将 JSON 中的相关数据放入 flot 函数的正确部分，因此请随时纠正任何低效和不正确的内容！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T20:20:07.363

您提供的任何代码都没有问题。它完美地工作。

在此处查看实际操作：http: [//jsfiddle.net/ryleyb/eJ2h8/](http://jsfiddle.net/ryleyb/eJ2h8/)

# javascript - 敲除复制可观察数组问题

> ID：12824979
> 
> 赞同：0
> 
> 时间：2012-10-10T17:27:50.230
> 
> 标签：javascript, asp.net-mvc-3, knockout.js, knockout-mapping-plugin, ko.observablearray

我正在尝试将一个可观察数组复制到另一个可观察数组。我有一个包含帐单地址、送货地址和复选框的表单，单击该复选框后，用户可以将所有送货信息复制到他们的帐单地址。我遇到的问题是，当我将一个可观察数组复制到另一个时，每当我对任一可观察数组进行更改时，两个可观察数组都会更新。我想将两个可观察的数组值分开，只需将值从一个复制到另一个。

我的可观察数组是使用[映射插件](http://knockoutjs.com/documentation/plugins-mapping.html "映射插件")设置的：

```
self.billingAddress = ko.mapping.fromJS(InitialEmptyAddressModel);
self.shippingAddress = ko.mapping.fromJS(InitialEmptyAddressModel); 
```

然后在输入送货信息并点击“使用送货地址”后将送货信息复制到帐单：

```
 self.CopyAddress = function() {
    self.billingAddress(self.shippingAddress());
    } 
```

我还尝试了以下方法： [在 knockoutJS 中克隆/复制 observablearray 的最佳方法是什么？](https://stackoverflow.com/questions/6509297/what-is-the-best-way-of-cloning-copying-an-observablearray-in-knockoutjs)

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T17:58:17.857

你真的不想复制里面的 observables `shippingAddress`。您可能希望获得它的干净版本，然后将其应用于其他映射对象。

就像是：

```
self.copyAddress = function() {
    var clean = ko.mapping.toJS(self.shippingAddress);
    ko.mapping.fromJS(clean, self.billingAddress);
}; 
```

示例：http: [//jsfiddle.net/rniemeyer/NdS5M/](http://jsfiddle.net/rniemeyer/NdS5M/)

# android-ndk - Android.mk - 如何在源文件夹中做通配符

> ID：12824980
> 
> 赞同：1
> 
> 时间：2012-10-10T17:27:51.583
> 
> 标签：android-ndk, makefile

这就是我在 JNI 文件夹中做通配符的方式

```
include $(CLEAR_VARS)
LOCAL_MODULE    := some_module_name
LOCAL_SRC_FILES := $(notdir $(wildcard $(LOCAL_PATH)/*.cpp)) 
include $(BUILD_SHARED_LIBRARY) 
```

现在我想将新的源文件夹添加到 JNI - some_src 与 foo.cpp 和 bar.cpp

```
include $(CLEAR_VARS)
LOCAL_MODULE    := some_module_name
FOLDER_PREFIX = some_scr
LOCAL_SRC_FILES := $(notdir $(wildcard $(LOCAL_PATH)/*.cpp)) $(FOLDER_PREFIX)/$(notdir $(wildcard $(LOCAL_PATH)/$(FOLDER_PREFIX)/*.cpp))
include $(BUILD_SHARED_LIBRARY) 
```

但这只会将 $(FOLDER_PREFIX) 添加到 bar.cpp，foo.cpp 会被剥离路径 (jni/foo.cpp) 而不是构建。

如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T20:34:25.027

```
$(addprefix $(FOLDER_PREFIX),$(notdir $(wildcard $(LOCAL_PATH)/$(FOLDER_PREFIX)/*.cpp))` 
```

或者甚至*（你真的需要指定`FOLDER_PREFIX`吗？）*：

```
$(subst $(LOCAL_PATH)/,,$(wildcard $(LOCAL_PATH)/*/*.cpp))) 
```

第二种形式允许使用以下快捷方式：

```
LOCAL_SRC_FILES := $(subst $(LOCAL_PATH)/,,$(wildcard $(LOCAL_PATH)/*.cpp) $(wildcard $(LOCAL_PATH)/*/*.cpp))) 
```

# sharepoint-2010 - SPFieldUserValue ：值不在预期范围内

> ID：12824984
> 
> 赞同：0
> 
> 时间：2012-10-10T17:28:14.653
> 
> 标签：sharepoint-2010

以下代码返回以下错误，不确定问题出在哪里，

> 异常详细信息：System.ArgumentException：值不在预期范围内。

```
public static SPUser convertStringToSPUser(string struser)
{
    SPFieldUserValue userValue = new SPFieldUserValue(SPContext.Current.Web, struser);
    SPUser objSPUser = userValue.User;
    return objSPUser;
} 
```

我的字符串类似于“S，Rishi”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T15:16:34.807

为了创建 SPFieldUserValue 的实例，您应该传递具有以下格式的字符串：[int];#[domain]\[username]

从列表项中获取该值的最简单方法是： ListItem[field_GUID].ToString();

# java - eclipse - 类型无法解析

> ID：12824985
> 
> 赞同：0
> 
> 时间：2012-10-10T17:28:15.807
> 
> 标签：java, android, eclipse

我正在学习“Android 编程教程，第 3 版”一书中的教程。

在第 3 课“A Fancier Form”中，我在 Eclipse 中遇到了一些问题。

作者说要添加以下代码行：

> ```
> public String getType(){
> return(type);
>     }
> public void setType(String type) {        
> this.type=type; 
> ```

这导致具有以下代码：

```
package apt.tutorial;

public class Restaurant { 
    private String name=""; 
    private String address=""; 
    public String getName() { return(name); } 
    public void setName(String name) { this.name=name; } 
    public String getAddress() { return(address); } 
    public void setAddress(String address) { this.address=address; } 
    public String getType(){ return(type); } 
    public void setType(String type) { this.type=type; } 
} 
```

eclipse 给了我以下错误： 对于第一个“类型”，我得到的类型无法解析为变量。对于第二个“类型”，我得到的类型无法解析或不是字段。

我希望有人可以向我解释要采取哪些步骤来解决此问题。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T17:30:48.263

您需要将“类型”变量添加到您的类中。

例子：

```
public class Restaurant {   
    private String name="";     
    private String address="";   
    private String type="";
    ............
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T17:31:17.117

您缺少字段类型：

```
package apt.tutorial; 
```

公共类餐厅{**私人字符串类型=“”；**私有字符串名称=""; 私有字符串地址=""; 公共字符串 getName() { return(name); } public void setName(String name) { this.name=name; } 公共字符串 getAddress() { 返回(地址); } public void setAddress(String address) { this.address=address; } 公共字符串 getType(){ 返回(类型); } public void setType(String type) { this.type=type; } }

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T17:32:25.010

您没有名为`type`type的属性`String`，例如：

```
public class Restaurant {
    private String type;
   ...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T17:31:15.900

getType 和 setType 中使用的属性类型未声明。您需要这样做才能使其正常工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T17:31:42.547

**-**您**尚未在类范围内声明** `type`为字段，这就是您收到此错误的原因

**例如：**

```
private String type; 
```

# javascript - Jquery 事件并不总是被触发

> ID：12824988
> 
> 赞同：0
> 
> 时间：2012-10-10T17:28:20.923
> 
> 标签：javascript, jquery, ajax

我有一个不会每次都触发的 Jquery 事件：

[http://jsfiddle.net/LphjL/](http://jsfiddle.net/LphjL/)

我的代码：

```
thisWebsite = websiteInitialization ();

function websiteInitialization () {
    companyName = "name";
    var thisWebsite = new websiteConstructor(companyName);
    return thisWebsite;
}

function websiteConstructor(companyName) {
  this.companyName=companyName;
}

function ajaxUpdateDB(websiteElement, value) {
    return $.post('/echo/html/',{html: "<p>Text echoed back to request</p>",delay: 3}
                ,function(a){}
                ,"json"
        );    
}

function updateDatabase(websiteElement, value) {
    var promise = ajaxUpdateDB(websiteElement, value);
    promise.complete(function () {
        thisWebsite[websiteElement] = value;
    });
}

$(document).ready(function() {

    $(".websiteElement").change(function() {
        updateDatabase( $(this).attr('id'), $(this).val() );
    });

    $("#infos").click(function() {
        htmlCode =    "<input class='websiteElement' id='companyName' type='text' value='"+thisWebsite.companyName+"'>";
        $("#panel-content").html(htmlCode);
    });

    $("#homepage").click(function() {
        htmlCode = "homepage";
        $("#panel-content").html(htmlCode);
    });

});
​ 
```

正如您在 jsfiddle 中看到的那样，第一次更新输入字段时会触发 Ajax，但是：

如果您单击“主页”，然后单击“通用信息”并再次更新输入字段，这次不会触发 Ajax：`$(".websiteElement").change`第二次未调用事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T17:32:15.923

您需要使用事件委托来绑定事件，或者在替换元素后重新绑定事件。以下是事件委托选项：

```
$("#panel-content").on("change",".websiteElement",function() {
    updateDatabase( $(this).attr('id'), $(this).val() );
}); 
```

如果事件直接绑定在元素上，当元素被替换/移除时，事件会丢失。

# build - 获取“名称空间'System.Data'中不存在类型或名称空间名称'Objects'（您是否缺少程序集引用？）”

> ID：12824989
> 
> 赞同：4
> 
> 时间：2012-10-10T17:28:24.943
> 
> 标签：build, reference, tfs, compiler-errors

我需要一些帮助 - 我已经在这个论坛和许多其他论坛上搜索了我的问题的答案，但所提出的解决方案并不能解决我的问题。

我有一个在 VS2010 IDE 中构建良好的解决方案，当我使用 Team Build/MSBuild 构建时，我收到以下错误：

**命名空间“System.Data”中不存在类型或命名空间名称“Objects”（您是否缺少程序集引用？）**

在阅读有关同一错误消息的其他帖子时，我执行了以下操作：

1.  已验证项目中**是否**存在引用 - 列在 .csproj 文件中以及位于解决方案文件中的项目中的引用下。
2.  已验证的 .NET 框架对于解决方案中的所有项目都是相同的 (v4.0)
3.  添加了对 System.Data.Entity 的引用
4.  已验证的 .NET Framework 未列为“客户端配置文件”
5.  验证**System.Data**位于 C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework.NETFramework\v4.0 下的构建服务器上

一点历史 - 这是我正在设置的一个新版本，它是一个 C# Web 应用程序，其中有一个 Silverlight 项目，还有一个与另一个项目共享代码的项目。我不是这个 Web 应用程序的开发人员，只是试图构建这个东西的配置管理器。

# html - Drupal 单元格间距

> ID：12824991
> 
> 赞同：0
> 
> 时间：2012-10-10T17:28:29.403
> 
> 标签：html, drupal, html-table, padding, cellspacing

今天在 Drupal 工作，简单的单元格间距对我来说绝非易事。当我启动网站时，我的 50px 单元格间距不存在。我试过“hspace：50px”、“Border-spacing：50px”和“padding：50px”，但这些似乎都不起作用。

这是我正在使用的代码：

```
<body>
<table class="tablestyle" width="169" border="0" cellspacing="50">
  <tr>
    <td class=><a href="http://masschallenge.org/profile/helmethub-corporation"><img src="http://masschallenge.org/sites/default/files/imagecache/spfl_profile_pic/NameAndLogo2.jpeg" width="91" height="90"/></a>
<a href="http://www.helmet-hub.com/ ">Helmet Hub</a> Social Impact</td>
<td><a href="http://masschallenge.org/profile/liquiglide"><img src="http://masschallenge.org/sites/default/files/imagecache/spfl_profile_pic/LiquiGlide%20logo%20V6%20color.jpg" width="90" height="90"/></a>
<a href="http://www.liqui-glide.com">LiquiGlide</a> High Tech</td>
<td><a href="http://masschallenge.org/profile/iagree"><img src="http://masschallenge.org/sites/default/files/imagecache/spfl_profile_pic/iAgree_LogoSlogan_0.jpg" width="91" height="90" /></a>
<a href="http://www.iagreeonline.com ">Iagree</a> <br />High Tech</td>
<td><a href="http://masschallenge.org/profile/integralreach"><img src="http://masschallenge.org/sites/default/files/imagecache/spfl_profile_pic/IntegralReach1%20vert%20logo%20transparent.png" width="90" height="90"/></a>
<a href="http://www.integralreach.com ">IntergralReach</a>High Tech </td>
  </tr>
  <tr>
<td><a href="http://masschallenge.org/profile/cellanyx-diagnostics"><img src="http://masschallenge.org/sites/default/files/imagecache/spfl_profile_pic/Thumbnail1.jpg" width="91" height="90"/></a>
<a href="http://www.cellanyx.com ">Cellanyx Diagnostics</a> <br />Life Science</td>
<td><a href="http://masschallenge.org/profile/nordic-technology-group-ntg"><img src="http://masschallenge.org/sites/default/files/imagecache/spfl_profile_pic/Logo%20-%20Nordic%20Technology%20Group%20-%20MassChallenge.JPG" width="90" height="90" /></a>
<a href="http://www.nordictechnologygroup.com ">Nordic Technology Group</a><br /> 
High Tech</td>
<td><a href="http://masschallenge.org/profile/ondeckbiotech"><img src="http://masschallenge.org/sites/default/files/imagecache/spfl_profile_pic/Logo_4.png" width="91" height="90" /></a>
<a href="http://www.ondeckbiotech.com ">OnDeckBiotech</a> Life Science</td>
<td><a href="http://masschallenge.org/profile/recoversorg"><img src="http://masschallenge.org/sites/default/files/imagecache/spfl_profile_pic/pic.png" width="91" height="90" /></a><a href="http://recovers.org ">recovers</a> <br />High Tech</td>
  </tr>
  <tr>
    <td><a href="http://masschallenge.org/profile/strong-arm-technologies-inc"><img src="http://masschallenge.org/sites/default/files/imagecache/spfl_profile_pic/gradient_2.PNG" width="91" height="90" /></a>
<a href="http://Strongarmvest.com">Strong Arm</a> High Tech</td>
<td><a href="http://masschallenge.org/profile/buysidefx"><img src="http://masschallenge.org/sites/default/files/imagecache/spfl_profile_pic/Buyside.jpg" width="91" height="90"/></a>
<a href="http://buysidefx.com ">BuySide</a> <br />High Tech</td>
<td><a href="http://masschallenge.org/profile/guided-surgery-solutions"><img src="http://masschallenge.org/sites/default/files/imagecache/spfl_profile_pic/03_ver%205.jpg" width="90" height="90" /></a>
<a href="http://www.guidedsurgerysolutions.com">Guided Surgery Solutions</a> <br />Life Science</td>
<td><a href="http://masschallenge.org/profile/nba-math-hoops"><img src="http://masschallenge.org/sites/default/files/imagecache/spfl_profile_pic/Math%20Hoops%20logo%20final%20RGB%20031312.jpg" width="90" height="90" /></a>
<a href="http://nbamathhoops.org/">NBA Math Hoops</a> <br />High Tech</td>
  </tr>
   <tr>
    <td><a href="http://masschallenge.org/profile/bounce-imaging"><img src="http://masschallenge.org/sites/default/files/imagecache/spfl_profile_pic/bounceLogoNew-small.png" width="90" height="91" /></a>
<a href="http://bounceimaging.com/">Bounce Imaging</a><br />High Tech</td>
<td><a href="http://masschallenge.org/profile/dynamo-micropower"><img src="http://masschallenge.org/sites/default/files/imagecache/spfl_profile_pic/Logo%2002_0.png" width="90" height="90" /></a>
<a href="http://dynamo-micropower.com/">Dynamo Micropower</a><br />Energy</td>
<td><a href="http://masschallenge.org/profile/global-research-innovation-technology-grit"><img src="http://masschallenge.org/sites/default/files/imagecache/spfl_profile_pic/grit%20logo%20square.jpg" width="90" height="90" /></a>
<a href="http://goGRIT.org ">Global Research Innovation & Technology</a><br />Social Impact</td>
<td><a href="http://masschallenge.org/profile/lovin-spoonfuls-inc"><img src="http://masschallenge.org/sites/default/files/imagecache/spfl_profile_pic/LS%20Logo.jpeg" width="90" height="90" /></a>
<a href="http://www.lovinspoonfulsinc.org/">Lovin' Spoonfuls Inc</a><br />Social Impact</td>
    </tr>
  <tr>
    <td><a href="http://masschallenge.org/profile/ministry-supply-inc"><img src="http://masschallenge.org/sites/default/files/imagecache/spfl_profile_pic/MOS%20Logo.jpg" width="90" height="90" /></a>
<a href="http://www.ministryofsupply.com">Ministry of Supply</a><br />General</td>
<td><a href="http://masschallenge.org/profile/ubiqi-health"><img src="http://masschallenge.org/sites/default/files/imagecache/spfl_profile_pic/ubiqihealth_logo-inline-cyan_mc.png" width="91" height="90" /></a>
<a href="http://www.ubiqihealth.com">Ubiqi Health</a><br />Life Science</td>
<td><a href="http://masschallenge.org/profile/windgap-medical-inc"><img src="http://masschallenge.org/sites/default/files/imagecache/spfl_profile_pic/logo_large_0.jpg" width="91" height="90" /></a>
<a href="http://www.windgapmedical.com">WindGap Medical Inc.</a><br />Life Science</td>
<td><a href="http://masschallenge.org/profile/black-island-wind-turbines"><img src="http://masschallenge.org/sites/default/files/imagecache/spfl_profile_pic/BlackIsland_WindTurbines_Logo_DRAFT.png" width="91" height="90" /></a>
<a href="http://www.blackislandwindturbines.com ">Black Island Wind Turbines</a><br />Energy</td>
  </tr>
  <tr><td><img src="http://www.capital-market-exchange.com/images/CMX-logo-ls.jpg" width="90" height="23" /><a href="http://www.capital-market-exchange.com/">Capital Market Exchange</a><br />General</td>
<td><a href="http://masschallenge.org/profile/akrivis-technologies"><img src="http://masschallenge.org/sites/default/files/imagecache/spfl_profile_pic/Logo_4color.png" width="91" height="90" /></a>
<a href="http://www.akrivis.com">Akrivis Technologies</a> Life Science</td>
<td><a href="http://masschallenge.org/profile/neumitra"><img src="http://masschallenge.org/sites/default/files/imagecache/spfl_profile_pic/Neumitra_logo.jpg" width="91" height="90" /></a>
<a href="http://neumitra.com">Neumitra</a><br />Life Science</td>
<td><a href="http://masschallenge.org/profile/rallypoint"><img src="http://masschallenge.org/sites/default/files/imagecache/spfl_profile_pic/RPlogo.png" width="91" height="90" /></a>
<a href="http://www.RallyPoint.com">Rally Point</a><br />High Tech</td>
  </tr>
  <tr>
    <td><a href="http://masschallenge.org/profile/lab-automate-technologies-inc"><img src="http://masschallenge.org/sites/default/files/u23825/LaTech.jpg" width="90" height="90" /></a><a href="http://www.labautomate.net">Lab Automate Technologies Inc</a> <br />Life Science</td>
<td><a href="http://masschallenge.org/profile/coachup"><img src="http://masschallenge.org/sites/default/files/imagecache/spfl_profile_pic/coachup%20logo_jpg.jpg" width="90" height="90" /></a>
<a href="http://www.coachup.com/">CoachUp</a><br />High Tech</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
 </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T17:35:21.213

这应该有效：

```
.tablestyle td {
    padding: 50px;
} 
```

（您必须将填充应用于`td`标签，如本示例所示。）

如果这不起作用，请提供您正在使用的 CSS。

# django - Django 和 Spatialite 崩溃

> ID：12824992
> 
> 赞同：0
> 
> 时间：2012-10-10T17:28:34.343
> 
> 标签：django, dump, spatialite

我按照[此处](https://docs.djangoproject.com/en/1.4/ref/contrib/gis/install/#spatialdb-template)的说明将 Spatialite 添加到我的 django 应用程序中，但是，当我尝试运行 syncdb 时全部崩溃。

这是唯一使用地理点的模型：

```
from django.db import models
from django.contrib.gis.db import models

class Building(models.Model):
    nome = models.CharField(max_length=200, unique=True)
    versione = models.IntegerField(blank=True)
    indirizzo = models.CharField(max_length=200, blank=True)
    numero_di_piani = models.IntegerField()
    data_creazione = models.DateTimeField('data creazione', blank=True)
    data_update = models.DateTimeField('data update', blank=True)
    foto = models.ImageField(upload_to='buildings', blank=True)
    pronto = models.BooleanField()

    # Geo Django field to store a point
    posizione = models.PointField(help_text="Represented as (longitude, latitude)", unique=True)

    # Geo Django area dell'edificio
    # area =  models.PolygonField(unique=True)

    # You MUST use GeoManager to make Geo Queries
    objects = models.GeoManager()       

    def __unicode__(self):
            return self.nome 
```

这是syncdb抛出的错误：

```
*** glibc detected *** /usr/bin/python: munmap_chunk(): invalid pointer: 0xb6154f98 ***
======= Backtrace: =========
/lib/i386-linux-gnu/libc.so.6(+0x72132)[0x326132]
/lib/i386-linux-gnu/libc.so.6(+0x72378)[0x326378]
/usr/lib/i386-linux-gnu/libsqlite3.so.0(+0x10d1e)[0x493d1e]
/usr/lib/i386-linux-gnu/libsqlite3.so.0(sqlite3_free+0x81)[0x495461]
/usr/lib/i386-linux-gnu/libsqlite3.so.0(+0x13068)[0x496068]
/usr/lib/i386-linux-gnu/libsqlite3.so.0(sqlite3_close+0x1c0)[0x4d1080]
/usr/local/lib/python2.7/dist-packages/pysqlite2/_sqlite.so(pysqlite_connection_close+0x102)[0x478b52]
/usr/bin/python(PyEval_EvalFrameEx+0x14c8)[0x80f8798]
/usr/bin/python(PyEval_EvalCodeEx+0x154)[0x80fd604]
/usr/bin/python[0x808c7a2]
/usr/bin/python(PyObject_Call+0x51)[0x805de71]
/usr/bin/python[0x8073aad]
/usr/bin/python(PyObject_Call+0x51)[0x805de71]
/usr/bin/python(PyEval_EvalFrameEx+0xcd9)[0x80f7fa9]
/usr/bin/python(PyEval_EvalFrameEx+0x930)[0x80f7c00]
/usr/bin/python(PyEval_EvalCodeEx+0x154)[0x80fd604]
/usr/bin/python[0x808c9b4]
/usr/bin/python(PyObject_Call+0x51)[0x805de71]
/usr/bin/python(PyEval_EvalFrameEx+0x1f3e)[0x80f920e]
/usr/bin/python(PyEval_EvalCodeEx+0x154)[0x80fd604]
/usr/bin/python(PyEval_EvalFrameEx+0x7ef)[0x80f7abf]
/usr/bin/python(PyEval_EvalCodeEx+0x154)[0x80fd604]
/usr/bin/python[0x808c7a2]
/usr/bin/python(PyObject_Call+0x51)[0x805de71]
/usr/bin/python[0x8073aad]
/usr/bin/python(PyObject_Call+0x51)[0x805de71]
/usr/bin/python[0x80c29a8]
/usr/bin/python(PyObject_Call+0x51)[0x805de71]
/usr/bin/python(PyEval_EvalFrameEx+0xcd9)[0x80f7fa9]
/usr/bin/python(PyEval_EvalCodeEx+0x154)[0x80fd604]
/usr/bin/python[0x808c7a2]
/usr/bin/python(PyObject_Call+0x51)[0x805de71]
/usr/bin/python[0x8073aad]
/usr/bin/python(PyObject_Call+0x51)[0x805de71]
/usr/bin/python[0x80c29a8]
/usr/bin/python(PyObject_Call+0x51)[0x805de71]
/usr/bin/python(PyEval_EvalFrameEx+0xcd9)[0x80f7fa9]
/usr/bin/python(PyEval_EvalFrameEx+0x930)[0x80f7c00]
/usr/bin/python(PyEval_EvalFrameEx+0x930)[0x80f7c00]
/usr/bin/python(PyEval_EvalCodeEx+0x154)[0x80fd604]
/usr/bin/python[0x808c9b4]
/usr/bin/python(PyObject_Call+0x51)[0x805de71]
/usr/bin/python(PyEval_EvalFrameEx+0x1f3e)[0x80f920e]
/usr/bin/python(PyEval_EvalCodeEx+0x154)[0x80fd604]
/usr/bin/python[0x808c7a2]
/usr/bin/python(PyObject_Call+0x51)[0x805de71]
/usr/bin/python[0x8073aad]
/usr/bin/python(PyObject_Call+0x51)[0x805de71]
/usr/bin/python[0x80c2f5a]
/usr/bin/python[0x80be55b]
/usr/bin/python(PyObject_Call+0x51)[0x805de71]
/usr/bin/python(PyEval_EvalFrameEx+0xcd9)[0x80f7fa9]
/usr/bin/python(PyEval_EvalFrameEx+0x930)[0x80f7c00]
/usr/bin/python(PyEval_EvalCodeEx+0x154)[0x80fd604]
/usr/bin/python[0x808c9b4]
/usr/bin/python(PyObject_Call+0x51)[0x805de71]
/usr/bin/python(PyEval_EvalFrameEx+0x1f3e)[0x80f920e]
/usr/bin/python(PyEval_EvalFrameEx+0x930)[0x80f7c00]
/usr/bin/python(PyEval_EvalFrameEx+0x930)[0x80f7c00]
/usr/bin/python(PyEval_EvalCodeEx+0x154)[0x80fd604]
/usr/bin/python[0x808c7a2]
/usr/bin/python(PyObject_Call+0x51)[0x805de71]
/usr/bin/python[0x8073aad]
======= Memory map: ========
00110000-0029d000 r-xp 00000000 08:01 270449     /lib/i386-linux-gnu/libcrypto.so.1.0.0
0029d000-002ab000 r--p 0018d000 08:01 270449     /lib/i386-linux-gnu/libcrypto.so.1.0.0
002ab000-002b1000 rw-p 0019b000 08:01 270449     /lib/i386-linux-gnu/libcrypto.so.1.0.0
002b1000-002b4000 rw-p 00000000 00:00 0 
002b4000-00430000 r-xp 00000000 08:01 271651     /lib/i386-linux-gnu/libc-2.13.so
00430000-00432000 r--p 0017c000 08:01 271651     /lib/i386-linux-gnu/libc-2.13.so
00432000-00433000 rw-p 0017e000 08:01 271651     /lib/i386-linux-gnu/libc-2.13.so
00433000-00436000 rw-p 00000000 00:00 0 
00436000-00447000 r-xp 00000000 08:01 1455353    /usr/lib/python2.7/lib-dynload/datetime.so
00447000-00448000 r--p 00010000 08:01 1455353    /usr/lib/python2.7/lib-dynload/datetime.so
00448000-0044b000 rw-p 00011000 08:01 1455353    /usr/lib/python2.7/lib-dynload/datetime.so
0044b000-0044e000 r-xp 00000000 08:01 1455372    /usr/lib/python2.7/lib-dynload/termios.so
0044e000-0044f000 r--p 00002000 08:01 1455372    /usr/lib/python2.7/lib-dynload/termios.so
0044f000-00451000 rw-p 00003000 08:01 1455372    /usr/lib/python2.7/lib-dynload/termios.so
00451000-0046b000 r-xp 00000000 08:01 1455366    /usr/lib/python2.7/lib-dynload/_ctypes.so
0046b000-0046e000 r--p 0001a000 08:01 1455366    /usr/lib/python2.7/lib-dynload/_ctypes.so
0046e000-00471000 rw-p 0001d000 08:01 1455366    /usr/lib/python2.7/lib-dynload/_ctypes.so
00471000-00480000 r-xp 00000000 08:01 1834994    /usr/local/lib/python2.7/dist-packages/pysqlite2/_sqlite.so
00480000-00481000 r--p 00    00e000 08:01 1834994    /usr/local/lib/python2.7/dist-packages/pysqlite2/_sqlite.so
00481000-00483000 rw-p 00    00f000 08:01 1834994    /usr/local/lib/python2.7/dist-packages/pysqlite2/_sqlite.so
00483000-00521000 r-xp 00000000 08:01 1447468    /usr/lib/i386-linux-gnu/libsqlite3.so.0.8.6
00521000-00522000 ---p 0009e000 08:01 1447468    /usr/lib/i386-linux-gnu/libsqlite3.so.0.8.6
00522000-00523000 r--p 0009e000 08:01 1447468    /usr/lib/i386-linux-gnu/libsqlite3.so.0.8.6
00523000-00524000 rw-p 0009f000 08:01 1447468    /usr/lib/i386-linux-gnu/libsqlite3.so.0.8.6
00524000-00525000 rw-p 00000000 00:00 0 
00525000-00541000 r-xp 00000000 08:01 262584     /lib/i386-linux-gnu/libgcc_s.so.1
00541000-00542000 r--p 0001b000 08:01 262584     /lib/i386-linux-gnu/libgcc_s.so.1
00542000-00543000 rw-p 0001c000 08:01 262584     /lib/i386-linux-gnu/libgcc_s.so.1
00543000-0057f000 r-xp 00000000 08:01 1705015    /usr/lib/python2.7/dist-packages/PIL/_imaging.so
0057f000-00581000 r--p 0003b000 08:01 1705015    /usr/lib/python2.7/dist-packages/PIL/_imaging.so
00581000-00583000 rw-p 0003d000 08:01 1705015    /usr/lib/python2.7/dist-packages/PIL/_imaging.so
00583000-005a5000 r-xp 00000000 08:01 1447341    /usr/lib/i386-linux-gnu/libjpeg.so.62.0.0
005a5000-005a6000 r--p 00022000 08:01 1447341    /usr/lib/i386-linux-gnu/libjpeg.so.62.0.0
005a6000-005a7000 rw-p 00023000 08:01 1447341    /usr/lib/i386-linux-gnu/libjpeg.so.62.0.0
005b3000-005bb000 r-xp 00000000 08:01 1705775    /usr/lib/python2.7/dist-packages/simplejson/_speedups.so
005bb000-005bc000 r--p 00    007000 08:01 1705775    /usr/lib/python2.7/dist-packages/simplejson/_speedups.so
005bc000-005bd000 rw-p 00    008000 08:01 1705775    /usr/lib/python2.7/dist-packages/simplejson/_speedups.so
005c3000-005eb000 r-xp 00000000 08:01 271669     /lib/i386-linux-gnu/libm-2.13.so
005eb000-005ec000 r--p 00028000 08:01 271669     /lib/i386-linux-gnu/libm-2.13.so
005ec000-005ed000 rw-p 00029000 08:01 271669     /lib/i386-linux-gnu/libm-2.13.so
005ed000-00757000 r-xp 00000000 08:01 1851082    /usr/local/lib/libgeos-3.4.0dev.so
00757000-0075e000 r--p 00169000 08:01 1851082    /usr/local/lib/libgeos-3.4.0dev.so
0075e000-00760000 rw-p 00170000 08:01 1851082    /usr/local/lib/libgeos-3.4.0dev.so
00760000-00761000 rw-p 00000000 00:00 0 
00761000-0076c000 r-xp 00000000 08:01 271673     /lib/i386-linux-gnu/libnss_files-2.13.so
0076c000-0076d000 r--p 0000a000 08:01 271673     /lib/i386-linux-gnu/libnss_files-2.13.so
0076d000-0076e000 rw-p 0000b000 08:01 271673     /lib/i386-linux-gnu/libnss_files-2.13.so
0078d000-00796000 r-xp 00000000 08:01 1851093    /usr/local/lib/libfreexl.so.1.0.0
00796000-00797000 r--p 00008000 08:01 1851093    /usr/local/lib/libfreexl.so.1.0.0
00797000-00798000 rw-p 00009000 08:01 1851093    /usr/local/lib/libfreexl.so.1.0.0
007d4000-00807000 r-xp 00000000 08:01 1469778    /usr/lib/libproj.so.0.6.6
00807000-00808000 r--p 00032000 08:01 1469778    /usr/lib/libproj.so.0.6.6
00808000-0080a000 rw-p 00033000 08:01 1469778    /usr/lib/libproj.so.0.6.6
00888000-0088b000 r-xp 00000000 08:01 1455336    /usr/lib/python2.7/lib-dynload/_heapq.so
0088b000-0088c000 r--p 00002000 08:01 1455336    /usr/lib/python2.7/lib-dynload/_heapq.so
0088c000-0088e000 rw-p 00003000 08:01 1455336    /usr/lib/python2.7/lib-dynload/_heapq.so
008a5000-00983000 r-xp 00000000 08:01 1447473    /usr/lib/i386-linux-gnu/libstdc++.so.6.0.16
00983000-00984000 ---p 000de000 08:01 1447473    /usr/lib/i386-linux-gnu/libstdc++.so.6.0.16
00984000-00988000 r--p 000de000 08:01 1447473    /usr/lib/i386-linux-gnu/libstdc++.so.6.0.16
00988000-00989000 rw-p 000e2000 08:01 1447473    /usr/lib/i386-linux-gnu/libstdc++.so.6.0.16
00989000-00990000 rw-p 00000000 00:00 0 
00a77000-00a78000 rwxp 00000000 00:00 0 
00ac3000-00ae1000 r-xp 00000000 08:01 271671     /lib/i386-linux-gnu/ld-2.13.so
00ae1000-00ae2000 r--p 0001d000 08:01 271671     /lib/i386-linux-gnu/ld-2.13.so
00ae2000-00ae3000 rw-p 0001e000 08:01 271671     /lib/i386-linux-gnu/ld-2.13.so
00b53000-00b77000 r-xp 00000000 08:01 1851085    /usr/local/lib/libgeos_c.so.1.8.0
00b77000-00b78000 r--p 00023000 08:01 1851085    /usr/local/lib/libgeos_c.so.1.8.0
00b78000-00b79000 rw-p 00024000 08:01 1851085    /usr/local/lib/libgeos_c.so.1.8.0
00ba6000-00bb9000 r-xp 00000000 08:01 262646     /lib/i386-linux-gnu/libz.so.1.2.3.4
00bb9000-00bba000 r--p 00012000 08:01 262646     /lib/i386-linux-gnu/libz.so.1.2.3.4
00bba000-00bbb000 rw-p 00013000 08:01 262646     /lib/i386-linux-gnu/libz.so.1.2.3.4
00bfe000-00bff000 r-xp 00000000 00:00 0          [vdso]
00d08000-00d0b000 r-xp 00000000 08:01 271667     /lib/i386-linux-gnu/libdl-2.13.so
00d0b000-00d0c000 r--p 00002000 08:01 271667     /lib/i386-linux-gnu/libdl-2.13.so
00d0c000-00d0d000 rw-p 00003000 08:01 271667     /lib/i386-linux-gnu/libdl-2.13.so
00d86000-00d9d000 r-xp 00000000 08:01 271665     /lib/i386-linux-gnu/libpthread-2.13.so
00d9d000-00d9e000 r--p 00016000 08:01 271665     /lib/i386-linux-gnu/libpthread-2.13.so
00d9e000-00d9f000 rw-p 00017000 08:01 271665     /lib/i386-linux-gnu/libpthread-2.13.so
00d9f000-00da1000 rw-p 00000000 00:00 0 
00df3000-00df5000 r-xp 00000000 08:01 271658     /lib/i386-linux-gnu/libutil-2.13.so
00df5000-00df6000 r--p 00001000 08:01 271658     /lib/i386-linux-gnu/libutil-2.13.so
00df6000-00df7000 rw-p 00002000 08:01 271658     /lib/i386-linux-gnu/libutil-2.13.so
00e95000-00edd000 r-xp 00000000 08:01 270457     /lib/i386-linux-gnu/libssl.so.1.0.0
00edd000-00edf000 r--p 00047000 08:01 270457     /lib/i386-linux-gnu/libssl.so.1.0.0
00edf000-00ee2000 rw-p 00049000 08:01 270457     /lib/i386-linux-gnu/libssl.so.1.0.0
00f46000-00f60000 r-xp 00000000 08:01 1455348    /usr/lib/python2.7/lib-dynload/_io.so
00f60000-00f61000 r--p 00019000 08:01 1455348    /usr/lib/python2.7/lib-dynload/_io.so
00f61000-00f69000 rw-p 0001a000 08:01 1455348    /usr/lib/python2.7/lib-dynload/_io.so
00f69000-01326000 r-xp 00000000 08:01 1851113    /usr/local/lib/libspatialite.so.2.2.0
01326000-01327000 ---p 003bd000 08:01 1851113    /usr/local/lib/libspatialite.so.2.2.0
01327000-01328000 r--p 003bd000 08:01 1851113    /usr/local/lib/libspatialite.so.2.2.0
01328000-0132b000 rw-p 003be000 08:01 1851113    /usr/local/lib/libspatialite.so.2.2.0
0132b000-0132e000 rw-p 00000000 00:00 0 
08048000-0826b000 r-xp 00000000 08:01 1439182    /usr/bin/python2.7
0826b000-0826c000 r--p 00222000 08:01 1439182    /usr/bin/python2.7
0826c000-082c1000 rw-p 00223000 08:01 1439182    /usr/bin/python2.7
082c1000-082cd000 rw-p 00000000 00:00 0 
098d5000-0a31d000 rw-p 00000000 00:00 0          [heap]Aborted 
```

我不知道是什么问题...

帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T09:45:11.090

一个很老的问题，但最好的猜测是您正在使用空间站点的合并构建，并且加载了两个（不同）版本的 sqlite。

永远不要进行空间合并构建，除非在嵌入式平台上您对配置了如指掌。

# java - Java Swing 将类动态加载到面板中

> ID：12824993
> 
> 赞同：0
> 
> 时间：2012-10-10T17:28:36.117
> 
> 标签：java, swing, jpanel, jcombobox

我的程序是这样的！

![在此处输入图像描述](../Images/dac0f33860287dfc29f7d04cea933727.png)

我想让底部根据在 ComboBox 中选择的项目动态地将框架加载到底部框架中。例如，如果选择了第一项，我希望显示 PresentValue.java 文件中的面板。这个想法是我为每个选择都有一个 java 文件，显示我在其各自的 java 文件中设计的内容。

![在此处输入图像描述](../Images/7eda11dc14209c729172fc0ee9156a40.png)

![在此处输入图像描述](../Images/a5bbba05614e07f22cba0ac3fbc2e8d8.png)

这两个 java 文件应该放在我第一个屏幕截图的“底部”框中，具体取决于组合框中的选择。

我更习惯于Android编程，在那里我会简单地从片段中调用replace方法来换出加载的片段......在这里寻找类比。

```
final JComboBox selectorBox = new JComboBox(selection);
    selectorBox.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent arg0) {
            int selectionID = selectorBox.getSelectedIndex();

        }
    }); 
```

但无法找到一种方法来做我想做的事。请解释。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T17:44:27.093

对于您拥有的每个 Java 文件，该 Java 文件的输出应该是`JPanel`. 不是一个`JFrame`。

在显示任何内容之前，请执行您拥有的所有 Java 文件。创建所有可能`JPanel`的 s。

在 GUI 中创建 JFrame，然后使用 remove 和 add 方法`JFrame`删除或添加所需的`JPanel`.

这是我的一个 GUI 的示例。

```
public void updatePartControl() {
    Thread thread = new CountdownThread(model, this, displayPanel);
    thread.start();

    frame.remove(alarmPanel.getPanel());
    frame.add(displayPanel.getPanel());
    frame.validate();
    frame.pack();
    frame.setBounds(getBounds());
} 
```

如果显示`JPanel`大于或小于警报，setBounds 方法会重置边界`JPanel`。

您的应用程序应该有一个`JFrame`. 您使用多个`JPanel`s 来创建您的 GUI。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T17:46:02.980

更改底部组件将取决于正在使用的布局管理器。[CardLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)是专为交换面板而设计的。

```
public void actionPerformed(ActionEvent arg0) {
   int selectionID = selectorBox.getSelectedIndex();
   if (selectionID == 0) {
      cardLayout.show(basePanel, SELECTED_1);
   } 
   // handle other selections

} 
```

# asp.net - 使用 XSLT 自定义组和排序 asp:listview 数据源 xml

> ID：12824996
> 
> 赞同：0
> 
> 时间：2012-10-10T17:28:39.240
> 
> 标签：asp.net, xml, xslt

我有一个列表视图，它获取一个 xmldatasource 作为其数据源。xmldatasource 是动态创建和分配的。在将数据绑定到列表视图之前使用 xpath

```
 listview.datasource = myxmlsource
listview.DataBind() 
```

仅使用 . 选择节点元素`xpath="root/node"`。因此我认为应用 xpath 后的 xml 结构如下所示：

```
<node name="Albert" age="32" desc="some random description" region="north"/>
<node name="Randy" age="32" desc="some random description" region="south"/>
<node name="Zebra" age="32" desc="some random description"region="east"/>
<node name="Bob" age="32" desc="some random description"region="south"/>
<node name="Carl" age="32" desc="some random description"region="north"/>
<node name="Denver" age="32" desc="some random description"region="east"/> 
```

请注意，它没有根。我正在尝试对这个 XSLT 进行排序。

> 这里的目的是按区域对 xml 进行分组，然后按名称对 xml 进行排序。

我是 XSLT 的新手，它似乎是一头野兽。

到目前为止，我能想出的 xslt 代码是：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl my" xmlns:my="http://tempuri.org"
>
  <xsl:output method="xml" indent="yes"/>

    <xsl:template name="@*|node()">

      <xsl:copy>
        <xsl:apply-templates select="@*|node() >
          <xsl:sort select="@region" order="ascending"/>
          <xsl:sort select="@name"/>
        </xsl:apply-templates>
      </xsl:copy>    
    </xsl:template>    

</xsl:stylesheet> 
```

按区域分组并按名称排序后的预期输出为：

```
<node name="Denver" age="32" desc="some random description"region="east"/>
<node name="Zebra" age="32" desc="some random description"region="east"/>
<node name="Albert" age="32" desc="some random description" region="north"/>
<node name="Carl" age="32" desc="some random description"region="north"/>
<node name="Bob" age="32" desc="some random description"region="south"/>
<node name="Randy" age="32" desc="some random description" region="south"/> 
```

**更新：**

我忘了提一下：按地区分组的顺序不一定是升序或降序，而是可以基于任何自定义条件，例如北第一、东第二和南第三。如何实现自定义排序？

我尝试了以下和更多类似的东西，我得到了

> 该文档已经有一个“DocumentElement”节点。

```
<?xml version="1.0" encoding="utf-8"?>
    <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
        xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl">
      <xsl:output method="xml" indent="yes"/>

        <xsl:template match="@*|node()">
          <xsl:copy>
            <xsl:apply-templates select="node[@region='north']" >
              <xsl:sort select="@name"/>
            </xsl:apply-templates>
          </xsl:copy>    
           <xsl:copy>
            <xsl:apply-templates select="node[@region='east']" >
              <xsl:sort select="@name"/>
            </xsl:apply-templates>
          </xsl:copy>    
          <xsl:copy>
            <xsl:apply-templates select="node[@region='south']" >
              <xsl:sort select="@name"/>
            </xsl:apply-templates>
          </xsl:copy>  
        </xsl:template>    

    </xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T22:43:41.683

您的 XSLT 几乎是正确的 - 模板应该有一个`match="..."`而不是一个`name="..."`属性 - 这是工作版本：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl my" xmlns:my="http://tempuri.org"
>
  <xsl:output method="xml" indent="yes"/>

  <xsl:template match="@*|node()">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()">
        <xsl:sort select="@region" order="ascending"/>
        <xsl:sort select="@name"/>
      </xsl:apply-templates>
    </xsl:copy>
  </xsl:template>

</xsl:stylesheet> 
```