# StackOverflow 问答 12606000-12606999

# php - php函数前的@符号

> ID：12606000
> 
> 赞同：16
> 
> 时间：2012-09-26T16:11:25.903
> 
> 标签：php

我不明白`@`php 函数之前的符号是什么意思，例如：`@mysql_query()`，如果有人知道，请为我解释。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-26T16:12:33.623

这是[错误抑制运算符](http://www.php.net/manual/en/language.operators.errorcontrol.php)，通常使用它不是一个好主意，因为您应该干净地捕获错误而不是简单地隐藏它们

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-26T16:12:13.597

它会静默错误消息。请参阅[http://php.net/manual/en/language.operators.errorcontrol.php](http://php.net/manual/en/language.operators.errorcontrol.php)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-26T16:14:46.850

这意味着如果该函数产生错误，则不会显示。可以这么说，它抑制了错误。正如 PHP 手册所述：

> PHP 支持一种错误控制运算符：at 符号 (@)。当附加到 PHP 中的表达式时，该表达式可能生成的任何错误消息都将被忽略。

在这里查看更多信息： http: [//php.net/manual/en/language.operators.errorcontrol.php](http://php.net/manual/en/language.operators.errorcontrol.php)

# java-native-interface - JNI：FindClass 和未实例化的类

> ID：12606003
> 
> 赞同：1
> 
> 时间：2012-09-26T16:11:30.620
> 
> 标签：java-native-interface

只有在先前实例化了该类的实例时，FindClass 才会成功吗？

如果是这样，实例化类的一次性实例以使随后对 FindClass 的调用成功的成本最低的方法是什么？

或者，是否有另一种适用于未实例化类的 JNI 方法？

（在我的例子中，我试图查找的类只有静态方法。我希望我的本机代码能够调用这些 Java 类静态方法之一。）

-艾伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T13:54:22.660

> 只有在先前实例化了该类的实例时，FindClass 才会成功吗？

不会。它会找到您的应用程序的类加载器知道的任何类。实例化与否。

只要只调用静态方法并使用静态类成员，就不会创建实例。Java 在创建实例方面非常懒惰。甚至静态初始化块的执行时间也比预期的要晚，请参阅[获取静态初始化块以在 java 中运行而不加载类](https://stackoverflow.com/questions/2582891/get-static-initialization-block-to-run-in-a-java-without-loading-the-class)

当你仔细阅读 JNI 文档时，你会发现`CallStatic<type>Method`family`jclass`作为参数，而`Call<type>Method`将`jobject`. 我认为这种差异说明了一切。

最重要的是：Java 中没有像“一次性实例”这样的东西。您可能会想到 C++ 风格，在堆栈上创建的作用域实例。不能命令 Java 这样做，所有内容都是在堆上动态分配的，并且范围由垃圾收集的引用计数和调度确定。

# xslt - IText 特殊字符编码

> ID：12606005
> 
> 赞同：0
> 
> 时间：2012-09-26T16:11:39.687
> 
> 标签：xslt, encoding, itext

我有我认为与 IText 中的编码有关的东西。

我在 xsl 中开发了一份报告，并希望从自定义 .otf 文件中打印一些特殊字符。

首先是 .xsl 代码

```
<span class="symbol card-logo">&#xf000;</span> 
```

之后，.xsl 代码被转换为 HTML。HTML 代码在浏览器中运行良好，包含我想要的所有字符。但在那之后，我将 HTML 字符串传递给 ITextRenderer。

```
ITextRenderer renderer = new ITextRenderer();
renderer.getFontResolver().addFont(otfFile.getAbsolutePath(), BaseFont.IDENTITY_H, BaseFont.NOT_EMBEDDED);
byte[] bytes = htmlDocumentString.toString().getBytes("UTF-8");

ByteArrayInputStream bais = new ByteArrayInputStream(bytes);
DocumentBuilder builder = DocumentBuilderFactory.newInstance().newDocumentBuilder();

InputSource is = new InputSource(bais);
Document doc = builder.parse(is);

renderer.setDocument(doc, null);

renderer.layout();
renderer.createPDF(outputStream);
outputStream.flush();
outputStream.close(); 
```

当我添加`BaseFont.IDENTITY_H`, 同时将字体添加到渲染器时，我几乎解决了这个问题，但随后另一个字符从报告中消失了（`&#8482;`- 商标徽标）

奇怪的部分：使用像 I 这样的代码，当且仅当`&#xf000;`字符打印在报告中的任何位置时，实际打印商标徽标。否则它只会打印它的“空间”。另外，如果我不添加`BaseFont.IDENTITY_H`，商标标志可以正常工作，但`&#xf000;`不能。

我希望这不会太混乱！

似乎在`&#xf000;`打印字符时它会拉伸“字符窗口”，因此商标徽标打印得很好。但我不确定这一点。

```
&#xf000 - icon;
&#8482 - company logo 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T09:18:17.973

在底部添加一堆空格然后让裁剪器 - 客户端 - 删除空格怎么样？

这就是我将如何解决它。

# sql - Oracle 分析功能

> ID：12606008
> 
> 赞同：0
> 
> 时间：2012-09-26T16:11:52.130
> 
> 标签：sql, oracle

我有一个如下所示的输入数据集：

```
header1,null,null,null
null,1,X,Y,Z
null,2,X,Y,Z
null,3,X,Y,Z
header2,null,null,null
null,4,X,Y,Z
null,5,X,Y,Z
null,6,X,Y,Z 
```

我想针对该输入编写一个查询，以返回如下所示的结果集：

```
header1,1,X,Y,Z
header1,2,X,Y,Z
header1,3,X,Y,Z
header2,4,X,Y,Z
header2,5,X,Y,Z
header2,6,X,Y,Z 
```

我在 Oracle 11g R2 上。我一直在查看此处的 Oracle 分析介绍： [http ://www.oracle-base.com/articles/misc/analytic-functions.php](http://www.oracle-base.com/articles/misc/analytic-functions.php)

我在想有一个解决方案，但我还没有找到。我认为的问题是我没有什么可以真正分组的。我唯一的“指标”是重复标头值直到我遇到一组空值，然后抓取下一个标头并重复它直到我遇到一些空值。所以顺序很重要，但是您可以看到我们没有要排序的列。

下面是一些用于构建测试表和插入行的快速脚本。

谢谢。

```
create table test (
col01 varchar2(10),
col02 varchar2(10),
col03 varchar2(10),
col04 varchar2(10))

insert into test values ('header1',null,null,null);
insert into test values (1,'X','Y','Z');
insert into test values (2,'X','Y','Z');
insert into test values (3,'X','Y','Z');
insert into test values ('header2',null,null,null);
insert into test values (4,'X','Y','Z');
insert into test values (5,'X','Y','Z');
insert into test values (6,'X','Y','Z'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T20:44:09.240

`LAG`是答案，但您需要依靠行总是以相同的顺序出现，然后您可以使用`rowid`.

看看[SQL Fiddle](http://sqlfiddle.com/#!4/5ed1e/35)

```
select * 
  from
    (select case when header is null
                 then lag(header ignore nulls) over (order by rowid) 
             end header,col01,col02,col03,col04
       from
       (select case when col01 like 'header%' 
                    then col01 
                end header,col01,col02,col03,col04
        from test) 
    )
where header is not null 
```

我希望这是一次处理表并将其带入适当的数据模型，因为表设计不是很好，但我想你已经知道了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T16:32:49.740

尝试这个

```
WITH CTE AS (
SELECT COL01, COL02, COL03, COL04, 
CASE WHEN COL01 LIKE 'header%' THEN col01 else null END NEW_COL01
FROM TESTTable
)

SELECT * FROM (
SELECT COL01, COL02, COL03, COL04, 
CASE WHEN NEW_COL01 IS NULL 
THEN LAG(NEW_COL01 IGNORE NULLS) OVER (ORDER BY ROWID) END HEAD_COL
FROM CTE
) WHERE col01 not like 'header%'; 
```

# objective-c - 使 viewWillAppear / viewWillDisappear 中的所有 uitextfields 为空

> ID：12606009
> 
> 赞同：1
> 
> 时间：2012-09-26T16:11:57.140
> 
> 标签：objective-c, ios, uitextfield

我有 8-10 个 UITextFields 像一个表单。我需要在 viewWillAppear 或 viewWillDisappear 中清除所有这些，因为当我第二次进入视图时，文本字段应该是空的。现在，1.我应该使用上述两种方法中的哪种方法，更重要的是，2.有没有办法一次性清除所有文本字段？我知道，一种方法是简单地获取每个字段并制作 textfield.text = @""，但有没有更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T16:17:46.203

试试这个：

```
for (UIView *subview in [yourView subviews])
    if([subview isKindOfClass:[UITextField class]])
         [(UITextField*)subview setText:@""]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T16:17:00.433

一次清除它们！

```
for (UIView* view in self.view.subviews){
    if (view isKindOfClass:[UITextField class])
        view.text = @"";
} 
```

干杯!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T16:17:03.013

怎么样：

```
for(id view in [self.view subviews]){
    if([view isKindOfClass:[UITextField class]])
         view.text = @"";
    }
} 
```

搜索视图上的所有子视图（在我设置的上面`self.view`），如果它是`UITextField`.

# php - 防止脚本将用户带到另一个页面并提醒用户有关更改

> ID：12606011
> 
> 赞同：0
> 
> 时间：2012-09-26T16:12:01.343
> 
> 标签：php, alert

这是我正在使用的脚本

```
<?php
$saving = $_REQUEST['saving'];
if ($saving == 1){ 

$Aname = $_POST['Aname'];

$name = $_POST['name']; 
$last = $_POST['last']; 
$mob = $_POST['mob']; 
$ext = $_POST['ext']; 
$email = $_POST['email']; 
$add = $_POST['add']; 
$com = $_POST['com']; 
$day = $_POST['day']; 
$text = $_POST['text'];
$date = date("M j, Y "); 

$data = "Date Sent: {$date}\n\nName: {$name} {$last}\nPhone : {$mob} ext: {$ext}\nCompany: {$com}\nAddress : {$add}\nE-mail : 

{$email}\nDay : {$day}\n\nNote :\n{$text}\n---------------------------------------\n";

$file = $Aname.'.txt';

file_put_contents ( $file, $data, FILE_APPEND ); 

}
?> 
```

如何防止它在创建文件后将用户带到另一个页面，并通知他们文件已创建？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T16:19:15.900

用户在创建文件后不会进入另一个页面，当他/她点击提交或保存按钮时，用户可能已经进入另一个页面。

为避免这种情况，您必须使用 ajax：

*   使用javascript取消默认提交按钮动作；
*   使用 javascript / ajax 发布到您当前的脚本；
*   让您的脚本返回一条消息 / json ；
*   使用 javascript 在您想要的位置显示消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T16:23:59.170

此代码是否会将您带到另一个页面？或者还有一些你没有打印的东西？

您还可以通过简单的 javascript 显示警报：

window.alert("你的消息在这里！");

# visual-studio-2012 - 为什么 Team Explorer 不在“检测到的更改”中显示 dll 文件？

> ID：12606014
> 
> 赞同：9
> 
> 时间：2012-09-26T16:12:04.750
> 
> 标签：visual-studio-2012

我已将两个文件添加到解决方案下的文件夹中，但不在解决方案树中（它位于包文件夹中）：

`a.dll` `a.dll.txt`

当我转到团队资源管理器 - 待更改的“检测到的更改”时，在列表中我看到`a.dll.txt`但`a.dll`文件不存在。

我确实检查了所有相关`.tfignore`文件以确保`.dll`不排除 s 。

问题是：什么是从检测到的更改中过滤掉 dll 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T10:18:29.547

在以前的版本中，您通过注册表设置来控制它，我不确定它是否适用于此，但它可能是一个很好的起点。

[http://www.ewaldhofman.nl/post/2009/08/02/Change-the-file-masks-that-are-excluded-by-Source-Control.aspx](http://www.ewaldhofman.nl/post/2009/08/02/Change-the-file-masks-that-are-excluded-by-Source-Control.aspx)

正如您提到的 tfs 2012 具有用于本地工作空间的 .tfignore 文件（用于服务器工作空间的 .tpignore 文件）的想法，您可以通过添加反向规则来包含自动排除的文件，例如

!*.dll

[http://msdn.microsoft.com/en-us/library/tfs/ms245454%28v=vs.110%29.aspx#tfignore](http://msdn.microsoft.com/en-us/library/tfs/ms245454%28v=vs.110%29.aspx#tfignore)

# php - phpunit: 有没有类似于 perl 的 Test::More::note() 和 Test::More::diag() 函数的函数？

> ID：12606022
> 
> 赞同：2
> 
> 时间：2012-09-26T16:12:17.083
> 
> 标签：php, perl, phpunit

我是 Phpunit 的新手，巧合的是（截至 2012 年 9 月）我安装了全新的 phpunit 3.7.0（实际上它显示为 3.7.1，因为我的 phpunit 安装是 git checkout）

我想要的是一个测试感知的“echo”关键字或 printf 函数，它在 phpunit 测试类中的作用与 perl 的[Test::More](http://perldoc.perl.org/Test/More.html)模块中的`diag()`函数或函数相同。`note()`

> 诊断
> 
> ```
> diag(@diagnostic_message); 
> ```
> 
> 打印一条保证不会干扰测试输出的诊断消息。就像 print @diagnostic_message 只是简单地连接在一起。
> 
> 笔记
> 
> ```
>  note(@diagnostic_message); 
> ```
> 
> 与 diag() 类似，除了在工具中运行测试时不会看到该消息。它只会在详细的 TAP 流中可见。
> 
> 方便放入可能对调试有用但不表示问题的注释。

我还没有发现 PHPUnit 这样做的方式。

```
 Please note that PHPUnit swallows all output that is emitted during the execution of a test.
 In strict mode, a test that emits output will fail. 
```

有[解决方法](https://stackoverflow.com/questions/7493102/phpunit-cli-output-during-test-debugging-possible)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T12:00:13.987

我不知道有什么，您可以创建自己[`PHPUnit_Framework_TestListener`](http://www.phpunit.de/manual/3.6/en/extending-phpunit.html#extending-phpunit.PHPUnit_Framework_TestListener)的测试用例并扩展您的测试用例以提供存储这些消息的辅助功能。运行测试后，可以输出这些消息。

`TestListener`这只是一个想法，到目前为止我从未为 Phpunit 实现过，但是[扩展](http://www.phpunit.de/manual/3.6/en/extending-phpunit.html#extending-phpunit.PHPUnit_Framework_TestCase)的测试用例相当简单（手册说：*“这是扩展 PHPUnit 的最简单方法之一。”*）。

希望这已经有所帮助，您可能对日志记录也有一些要求，因此不确定您将创建的 STDOUT 是否最终会这样做，这是 PHPUnit 3.6 我希望这与 3.7 几乎相同。

# oracle - 通过 Websphere 中的连接池在 Oracle 数据库中捕获最终用户详细信息

> ID：12606026
> 
> 赞同：1
> 
> 时间：2012-09-26T16:12:21.870
> 
> 标签：oracle, security, websphere, audit

我目前正在做一个审计工作，我需要在后台知道 Oracle 数据库中的最终用户名。

应用程序使用 Oracle 身份验证来授予访问权限，并处理对应用程序功能的权限。它还（正确地）处理对底层数据的访问，确保最终用户凭据保留在数据层中。

当我尝试审核应用程序（使用 Oracle 审核）时，我只获得连接池用户 ID 和 Websphere 服务器名称。

我已经搜索并找到了使用 Reauthentication 的建议（在连接池完全使用之前不会记录正确的用户 ID）、WAS.clientinfo（普通的 ol' 不会将最终用户凭据传递给数据库）并且有找到了对 Guardium 的引用（它可以完成这项工作，但是非常昂贵。）

如何将最终用户信息传递到数据层？我不介意这是否归结为配置更改或第 3 方产品；只要它有效，我们就可以评估它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T05:18:15.993

你读过这个吗。

[http://www.ibm.com/developerworks/websphere/techjournal/0506_barghouthi/0506_barghouthi.html](http://www.ibm.com/developerworks/websphere/techjournal/0506_barghouthi/0506_barghouthi.html)

这是一个旧的，但我想大部分内容今天仍然有效

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-06T14:20:43.580

确实在第一次连接时不会发生重新身份验证。但是，在实现扩展 Oracle11gDataStoreHelper 的 DataStoreHelper 时，您需要实现两种方法：

1.  doConnectionSetupPerTransaction 在重新认证时调用。
2.  在第一次连接时调用的 doConnectionSetup。

在这两种方法中，您都可以调用 WSSubject.getCallerPrincipal() 来获取当前应用程序用户。然后，您可以使用 conn.unwrap(OracleConnection.class).setEndToEndMetrics() API。

如果使用 Oracle 12c 数据库和 JDBC 驱动程序，您可以使用 Connection.setClientInfo 代替 OracleConnection.setEndToEndMetrics。

# python - 数组排序的 f2py 速度

> ID：12606027
> 
> 赞同：1
> 
> 时间：2012-09-26T16:12:22.087
> 
> 标签：python, performance, numpy, f2py

我在 fortran ( `f2py`) 中编写了一些代码，以便获得一些速度，因为在纯 Python 中进行大量计算会非常麻烦。

我想知道在 Python 中设置 NumPy 数组是否`order=Fortran`会降低主要 Python 代码相对于经典 C 样式顺序的速度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T22:06:41.243

顺序可以对计算速度产生很大影响。下面显示了一个简单的示例：

```
In [15]: x = np.ones((1000, 1000))

In [16]: y = np.ones((1000, 1000), order='F')

In [17]: %timeit x.sum(axis=0)
100 loops, best of 3: 8.03 ms per loop

In [18]: %timeit y.sum(axis=0)
1000 loops, best of 3: 1.02 ms per loop 
```

在此示例中，对 C 有序数组的列求和所需的时间是对 Fortran 有序数组求和的 8 倍。如果在另一个轴上执行求和，则 C 有序数组上的计算会更快：

```
In [19]: %timeit x.sum(axis=1)
1000 loops, best of 3: 1.02 ms per loop

In [20]: %timeit y.sum(axis=1)
100 loops, best of 3: 8.09 ms per loop 
```

因此，对于使用 Fortran 有序数组是否会影响 Python 代码的性能，答案是“可能”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T16:56:25.820

不应该有任何减速。从 NumPy 1.6 开始，大多数`ufuncs`（即基本的“通用”函数）采用一个可选参数，允许用户指定她的数组的内存布局：默认情况下，它是`K`，这意味着“输入的元素排序（匹配）尽可能接近`。

所以，一切都应该在引擎盖下得到照顾。

`order`在最坏的情况下，您总是可以使用参数从一个订单切换到另一个订单`np.array`（但这会复制您的数据并且可能不值得）。

# spring - GWT 的 Spring Security JDBC 驱动程序“没有合适的驱动程序”错误

> ID：12606031
> 
> 赞同：2
> 
> 时间：2012-09-26T16:12:33.207
> 
> 标签：spring, tomcat, jdbc, spring-security

我们这里有点问题。我们正在开发 GWT（Google Web Toolkit），其登录页面由 Spring Security 管理，而简单的 MySQL 数据库则用于用户管理。我们遇到了一个奇怪的行为。当我们从 IDE (Eclipse) 以开发模式运行代码时，虚拟化码头运行一切正常，但是，当我们尝试在 WAR 文件中构建应用程序，然后将其部署在 Tomcat 7 下时，出现以下错误：

> 无法获得 JDBC 连接...找不到适合 jdbc:mysql://localhost:3306/myschema 的驱动程序

我们已经知道这个异常只有两个原因，分别是：

1.  JDBC驱动加载失败
2.  URL连接字符串解析错误

我们非常确定 URL 是正确的，如下所示：

```
<beans:bean id="dataSource"
        class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <beans:property name="driverClassName" value="com.mysql.jdbc.Driver" />
        <beans:property name="url" value="jdbc:mysql://localhost:3306/myschema" />
        <beans:property name="username" value="root" />
        <beans:property name="password" value="root" />
    </beans:bean> 
```

所以这里的原因可能是 Tomcat 或 Spring Security 弄乱了库。最后一件事，我们正确地导入了所有 jar 文件，从 JDBC 到 SpringFramework 和 GWT。

如果您需要更多信息，请询问！谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T08:29:15.233

这听起来像是某种 ClassLoader 问题。当我使用tomcat连接池（来自tomcat lib dir）并在war文件中有mysql-connector-java jar时，我遇到了类似的问题。我不得不将 mysql-connector-java 移动到 tomcat lib 目录。

# c++ - 在 Windows 上用 C++ 计算 CPU 时间

> ID：12606033
> 
> 赞同：6
> 
> 时间：2012-09-26T15:55:36.583
> 
> 标签：c++, performance, visual-studio-2008, windows-7, cpu-usage

C++ 中有什么方法可以计算**在 CPU 时间内**运行给定程序或例程需要多长时间？

我使用在 Windows 7 上运行的 Visual Studio 2008。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T04:11:15.207

如果您想知道进程使用的 CPU 时间总量，那么（直接或通过编译器内在函数）`clock`都不`rdtsc`是最好的选择，至少 IMO 是这样。如果您需要代码是可移植的，那么您能做的最好的事情就是使用`clock`，尽可能在系统静止状态下进行测试，并希望获得最好的结果（但如果您这样做，请注意`clock`is的分辨率`CLOCKS_PER_SEC`，这可能会或可能会不是 1000，即使是，您的实际时间分辨率通常也不会那么好——它可能会给您以毫秒为单位的时间，但至少通常一次提前几十毫秒）。

但是，由于您似乎并不介意特定于 Windows 的代码，因此您可以做得更好。至少如果我对您要查找的内容的理解是正确的，那么您真正想要的可能是[`GetProcessTimes`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683223.aspx)，它将（分别）告诉您进程的内核模式和用户模式 ​​CPU 使用情况（以及开始时间和退出时间，如果您愿意，您可以从中计算所用的挂墙时间）。还有[`QueryProcessCycleTime`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684929.aspx)，它将告诉您进程使用的 CPU 时钟周期总数（所有线程中用户模式和内核模式的总和）。就个人而言，我很难想象后者有多大用处——计算单个时钟周期对于*小型*代码部分需要进行密集优化，但我不太确定您将如何将其应用到完整的过程中。`GetProcessTimes`使用 FILETIME 结构，它支持 100 纳秒的分辨率，但实际上大多数时候你会看到调度程序的时间片的倍数（它随 windows 的版本而变化，但在毫秒到几十毫秒的数量级）。

在任何情况下，如果您真的想要从头到尾的时间，`GetProcessTimes`会让您这样做——如果您生成程序（例如，使用`CreateProcess`），您将获得进程的句柄，该句柄将在子进程退出时发出信号. 然后，您可以调用`GetProcessTimes`该句柄，并检索时间，即使孩子已经退出 - 只要该进程的至少一个句柄保持打开状态，该句柄将保持有效。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-26T17:01:39.033

这是一种方法。它以毫秒为单位测量例行执行时间。

`clock_t begin=clock();`在路由执行之前开始，并`clock_t end=clock();`在例程退出后立即开始。

然后将这两个时间集相互减去，结果是毫秒值。

```
#include <stdio.h>
#include <iostream>
#include <time.h>
using namespace std;

double get_CPU_time_usage(clock_t clock1,clock_t clock2)
{
    double diffticks=clock1-clock2;
    double diffms=(diffticks*1000)/CLOCKS_PER_SEC;
    return diffms;
} 

void test_CPU_usage()
{
  cout << "Standby.. measuring exeution time:  ";

  for (int i=0; i<10000;i++)
  {
        cout << "\b\\" << std::flush;
        cout << "\b|" << std::flush;
        cout << "\b/" << std::flush;
        cout << "\b-" << std::flush;
  }

  cout << " \n\n";
}

int main (void)
{

    clock_t begin=clock();

    test_CPU_usage();

    clock_t end=clock();

    cout << "Time elapsed: " << double(get_CPU_time_usage(end,begin)) << " ms ("<<double(get_CPU_time_usage(end,begin))/1000<<" sec) \n\n";
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T17:09:13.620

`__rdtscp`内在函数将为您提供 CPU 周期时间，但有一些警告。这是[MSDN 文章](http://msdn.microsoft.com/en-us/library/bb385235%28v=vs.90%29.aspx)

这实际上取决于您要测量的内容。为了获得更好的结果，平均进行几百万次（如果不是十亿次）迭代。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-11T17:55:44.413

clock() 函数 [由 Visual C++ 2008 提供] 不返回程序使用的处理器时间，但它*应该*返回（根据 C 标准和/或 C++ 标准）。也就是说，为了测量 Windows 上的 CPU 时间，我有这个帮助程序类（它不可避免地是不可移植的）：

```
class ProcessorTimer
{
  public:
    ProcessorTimer() { start(); }
    void start() { ::GetProcessTimes(::GetCurrentProcess(), &ft_[3], &ft_[2], &ft_[1], &ft_[0]); }
    std::tuple<double, double> stop()
    {
        ::GetProcessTimes(::GetCurrentProcess(), &ft_[5], &ft_[4], &ft_[3], &ft_[2]);
        ULARGE_INTEGER u[4];
        for (size_t i = 0; i < 4; ++i)
        {
            u[i].LowPart = ft_[i].dwLowDateTime;
            u[i].HighPart = ft_[i].dwHighDateTime;
        }
        double user = (u[2].QuadPart - u[0].QuadPart) / 10000000.0;
        double kernel = (u[3].QuadPart - u[1].QuadPart) / 10000000.0;
        return std::make_tuple(user, kernel);
    }
  private:
    FILETIME ft_[6];
};

class ScopedProcessorTimer
{
  public:
    ScopedProcessorTimer(std::ostream& os = std::cerr) : timer_(ProcessorTimer()), os_(os) { }
    ~ScopedProcessorTimer()
    {
        std::tuple<double, double> t = timer_.stop();
        os_ << "user " << std::get<0>(t) << "\n";
        os_ << "kernel " << std::get<1>(t) << "\n";
    }
  private:
    ProcessorTimer timer_;
    std::ostream& os_;
} 
```

例如，可以通过在该 {} 块的开头定义一个 ScopedProcessorTimer 来测量执行该块需要多长时间。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-03T15:31:56.067

此代码是进程 Cpu 使用情况

```
ULONGLONG LastCycleTime = NULL;
LARGE_INTEGER LastPCounter;
LastPCounter.QuadPart = 0; // LARGE_INTEGER Init

                           // cpu get core number
SYSTEM_INFO sysInfo;
GetSystemInfo(&sysInfo);
int numProcessors = sysInfo.dwNumberOfProcessors;

HANDLE hProcess = OpenProcess(PROCESS_QUERY_INFORMATION | PROCESS_VM_READ, FALSE, Process::pid);

if (hProcess == NULL)
    nResult = 0;

int count = 0;
while (true)
{
    ULONG64 CycleTime;
    LARGE_INTEGER qpcLastInt;

    if (!QueryProcessCycleTime(hProcess, &CycleTime))
        nResult = 0;

    ULONG64 cycle = CycleTime - LastCycleTime;

    if (!QueryPerformanceCounter(&qpcLastInt))
        nResult = 0;

    double Usage = cycle / ((double)(qpcLastInt.QuadPart - LastPCounter.QuadPart));

    // Scaling
    Usage *= 1.0 / numProcessors;
    Usage *= 0.1;

    LastPCounter = qpcLastInt;
    LastCycleTime = CycleTime;

    if (count > 3)
    {
        printf("%.1f", Usage);
        break;
    }

    Sleep(1); // QueryPerformanceCounter Function Resolution is 1 microsecond

    count++;
}

CloseHandle(hProcess); 
```

# asp.net - 网格视图未呈现

> ID：12606038
> 
> 赞同：1
> 
> 时间：2012-09-26T16:12:53.963
> 
> 标签：asp.net, gridview

我已将 gridview 绑定到 Linq 结果并将 AutoGenerateColumns 设置为 true 并为网格视图启用 Viewstate 并且仍然没有呈现，浏览器中的 Html 显示为空

```
 <div></div> 
```

奇怪的是，在文件系统中的 ASP.NET 开发服务器中，它是可见的，没有问题，但是当我在 Internet 上托管它时，它不是！

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server">
 <Triggers>
         <asp:asyncPostBackTrigger ControlID="Button1"  EventName="Click" />

 </Triggers>

<ContentTemplate >
   <asp:GridView dir="rtl" ID="GridView1" runat="server" AllowPaging="True" 
     AllowSorting="True" CellPadding="4"  AutoGenerateColumns="true" 
     ForeColor="#333333" GridLines="Vertical"  ViewStateMode="Enabled"
     Width="917px" style=" padding-bottom:20px;" EnableViewState="True">
    <AlternatingRowStyle BackColor="White" />
    <EditRowStyle BackColor="#2461BF" />
    <FooterStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
    <HeaderStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" 
        HorizontalAlign="Right" />
    <PagerStyle BackColor="#2461BF" ForeColor="White" HorizontalAlign="Center" />
    <RowStyle BackColor="#EFF3FB" />
    <SelectedRowStyle BackColor="#D1DDF1" Font-Bold="True" ForeColor="#333333" />
    <SortedAscendingCellStyle BackColor="#F5F7FB" />
    <SortedAscendingHeaderStyle BackColor="#6D95E1" />
    <SortedDescendingCellStyle BackColor="#E9EBEF" />
    <SortedDescendingHeaderStyle BackColor="#4870BE" />
</asp:GridView>

  <br />
  <br />
</ContentTemplate>
</asp:UpdatePanel> 
```

顺便说一句，我也尝试删除 Ajax 控件，但它没有解决问题

Linq 代码非常复杂，但我可以给你看这个

```
 tmp = (From p In results Where p.ShowProduct
            Select New With {.المادة = p.ProductName,
                                     .السعر = If(p.Setting.ShowPrices, If(p.ShowPrice, (p.SellPrice * p.Setting.ConversionToDollar).ToString, " - "), " - "),
                                        .الكمية = If(p.Setting.ShowCounts, If(p.ShowCount, CSng(p.Count) & " " & p.Unit, " - "), " - "),
                                        .الصنف = p.Category,
                                        .الوصف = p.Description,
                                        .المنشأ = p.Manufacturer,
                                        .المحل = If(p.Setting.ShowAddress,
                                                    If(p.Setting.ShowMobile,
                                                       p.Setting.NameOfShop & "/" & p.Setting.ShopAddress & "/" & p.Setting.Mobile,
                                                       p.Setting.NameOfShop & "/" & p.Setting.ShopAddress & "/ -"),
                                                   If(p.Setting.ShowMobile,
                                                      p.Setting.NameOfShop & "/ - /" & p.Setting.Mobile,
                                                  p.Setting.NameOfShop & "/ - / - ")),
                                     .التاريخ = p.LastUpdate}).ToList.OrderByDescending(Function(n) n.GetType().GetProperty(GridViewSortExpression).GetValue(n, Nothing)).ToList

    End If

    ResultCount = results.Count
    GridView1.DataSource = tmp
    ' GridView1.ViewStateMode = UI.ViewStateMode.Enabled
    GridView1.DataBind() 
```

我也试着把这行代码

```
 UpdatePanel1.Update() 
```

请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T13:28:34.327

我发现我的代码中没有错误，但是没有呈现 Gridview 的原因是它是数据源是空的，因为虽然查询（结果）不是什么，但第二个查询（tmp）实际上是空的，因为条件（其中 p.ShowProduct) 我认为它是 True 在检查 Db 后，我发现该字段中的所有值都是 Null 。

谢谢

# eclipse - RCP JUnitPluginTest、logback 和 slf4

> ID：12606043
> 
> 赞同：1
> 
> 时间：2012-09-26T16:13:15.060
> 
> 标签：eclipse, junit, rcp, logback

我创建了一个 RCP 插件，在其中我使用了 logback 和 slf4，它们是 eclipse 平台的一部分。

我还创建了一个插件测试，由*Run As->Junit Plugin Test*启动（见下图）。

![运行方式](../Images/788beeb9be66bd04c50eeac16ad72e8e.png)

不幸的是我收到了这个错误

> SLF4J：无法加载类“org.slf4j.impl.StaticLoggerBinder”。SLF4J：默认为无操作 (NOP) 记录器实现 SLF4J：有关详细信息，请参阅[http://www.slf4j.org/codes.html#StaticLoggerBinder](http://www.slf4j.org/codes.html#StaticLoggerBinder)。

这似乎是一个类路径错误，但我真的不知道为什么；谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T06:51:50.640

解决了。

问题似乎在于 Eclipse 平台（在我的情况下为 Eclipse Indigo R2 32bit）中分布的 slf4/logback 插件的一种不兼容。

我解决了卸载这些插件并按照说明进行操作

[登录文档](http://logback.qos.ch/beagle/index.html)

# java - 是否可以在不通过 RESTFUL API 创建云服务的情况下创建 azure VM

> ID：12606044
> 
> 赞同：1
> 
> 时间：2012-09-26T16:13:17.853
> 
> 标签：java, rest, azure

我能够创建一个云服务，然后使用该云服务，我使用 Azure 中的 REST API 创建了一个 VM。

就我而言，创建的云服务正在门户上显示。

问题一：是否可以限制在新门户中显示云服务

查询 2：在 Azure 门户中，我们甚至可以在不创建云服务的情况下创建 VM。是否可以通过 API 实现相同的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T17:08:49.250

Windows Azure 虚拟机实际上包含在云服务中。在门户中，创建新 VM 时，VM 是隐式云服务中的单个实例。在添加多个 VM（负载平衡）之前，单实例 VM 不会在门户中显示为云服务，然后才会出现云服务。

如果您通过 REST API 创建了一个 VM，我认为您将拥有一个云服务，即使云服务可能不会出现在门户中。

最后，“云服务”实际上是实例的容器——Web 角色、工作者角色或虚拟机。Marc Russinovich 在他的 TechEd NA 2012 演讲中大约 17 分钟时谈到了这一点 - [http://channel9.msdn.com/Events/TechEd/NorthAmerica/2012/AZR209](http://channel9.msdn.com/Events/TechEd/NorthAmerica/2012/AZR209)。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-26T16:42:33.910

如果您的意思是“vm eqauls VERTUAL MACHINBES”，您可以使用 Azure 命令行工具。它创建为 node.js [http://www.windowsazure.com/en-us/manage/linux/how-to-guides/command -线工具/](http://www.windowsazure.com/en-us/manage/linux/how-to-guides/command-line-tools/)

# perl - 在 perl 中将表单布局转换为表格 (csv) 布局

> ID：12606045
> 
> 赞同：0
> 
> 时间：2012-09-26T16:13:21.443
> 
> 标签：perl, format, associative-array

我有一个输入文件

> 输入文件.txt

```
 name: George
         age: 5
      nature: curious
       likes: banana 
```

这就是我所说的表单布局。我正在尝试将其转换为表格布局 CSV。例如：

```
name,age,nature,likes
George,5,curious,banana 
```

因此，我读取了文件，拆分为“：和\n”并将值放入哈希中。然后将该散列推入一个数组，以便我稍后将它们取出。这是我到目前为止所做的。

```
#!/usr/bin/perl
use strict;

 open (MYFILE, 'inputfile.txt');
 my @records;
 while (<MYFILE>) {
        chomp;
        my %values = split(/[:\n]/,$_);
        push @records,%values;
 }
 close (MYFILE); 
```

这样一来，我想`@records={[name=George],[age=5],[nature=curious],[likes=banana]}`会发生的。

现在，我如何从数组中取出每个散列`@records`？当我尝试类似的事情时：

```
 foreach my $record(@records){
     my %record = $record;
     for my $key(keys %record){
        print "key : $key\n";
     }
 } 
```

它一个接一个地输出所有令牌，这与预期的不同（只是键）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T16:23:50.657

我会以稍微不同的方式来做......

```
my (@values, @properties);
while (<DATA>) {
  if (/(\S*)\s*:\s*(\S*)/) {
    push @values, $1;
    push @properties, $2;
  }
}
print join ',', @values;
print "\n";
print join ',', @properties;
print "\n";
__DATA__
        name: George
         age: 5
      nature: curious
       likes: banana 
```

...有两个原因。

首先，Perl 中的哈希是无序的，并且没有简单的方法可以将这些属性排序回其原始状态。在这些情况下，最好使用数组。

其次，使用正则表达式匹配而不是`split`允许更轻松地处理不良数据（在此代码中，模式非常简单，但很容易获得验证逻辑）。此外，所有数据块都被立即捕获；你不需要`chomp`额外改变它们。

* * *

说到你的原始代码：这一行......

```
push @records, %values; 
```

...必须改写成...

```
push @records, \%values; 
```

... 表示任何可用的东西。请记住，数组在 Perl 中是扁平的，当您尝试将散列推入数组时，它只会被转换为列表（然后此列表将附加到该数组）。

尽管如此，当您必须输出这样一个哈希数组时，您必须遍历其元素的键，然后遍历其元素的值：如果您只是单独存储它们，就像在我的代码中那样，那就没有必要了。

# matlab - 图像处理过滤器的 2D/3D 图

> ID：12606048
> 
> 赞同：4
> 
> 时间：2012-09-26T16:13:32.463
> 
> 标签：matlab, image-processing, plot, convolution

我试图了解 Matlab 中的 2D 和 3D 绘图功能，关于图像处理过滤器，如箱线图、高斯、墨西哥帽等......

我只得到了过滤器的内核，例如一个 5x5 矩阵，其中包含每个单元的系数。ezsurfc 不起作用，我不明白。surf 代替了工作，但我不知道网格以及如何使其更细化和平滑？

我对 surf 的理解是，我需要每个参数都具有相同的尺寸，那么我应该如何在不使内核变为 20x20 甚至更大的情况下做到这一点？这个想法是，我得到一个像例子一样的输出，我已经发布了。我提到了过滤器的 20x20 网格掩码，因为看起来平滑度和扁平化需要更多的系数，而不仅仅是 5x5……我是对的还是完全错的？

我已经尝试了以下 matlab 代码，例如拉普拉斯滤波器：

```
[x,y] = meshgrid(1:1:5); %create a 5x5 matrix for x and y (meshes)
z = [0 1 2 1 0; 1 3 5 3 1;2 5 9 5 2; 1 3 5 3 1;0 1 2 1 0]; % kernel 5x5
surf(x,y,z); 
```

这给了我输出： ![电流输出](../Images/da6f9b0c5c9e19338a6a4e814f718bce.png)

那么如何从 5x5 内核信息中生成精细的 2D 和 3D 图呢？提前非常感谢！

PS：希望我的代码缩进没有搞砸......否则请随意编辑 - 这是我在 StackOverflow 上的第一篇文章。:-)

我想要得到的，就像这两个例子： ![示例 1](../Images/409f5cdc235a8128d1d03ecdf92cdd1a.png) ![示例 2](../Images/0795484d4aef34c8a69c20a28a756c44.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T16:59:30.313

您可以使用[interp2](http://www.mathworks.com/help/matlab/ref/interp2.html)在相同的网格大小上查找中间值以进行可视化

```
step = 0.1; % granularity
[xn,yn] = meshgrid(1:step:5); % define finer grid
zn = interp2(x,y,z,xn,yn); % get new z values 
surf(xn,yn,zn); 
```

![在此处输入图像描述](../Images/a9a8392e610075fdded7cc070ae677db.png)

请注意，您将使用默认的线性插值方法获得最接近原始内核的近似值，即`interp2(x,y,z,xn,yn,'linear')`. 使用其他方法将导致使用更平滑的内核，但它们的 3D 形状会有所不同。所以这取决于你的用途和应用。

**更新**：

您可以通过尝试使用已知内核来近似您的数据，从而绕过上采样到更高分辨率的不适定问题（只有在假设的“下采样尊重奈奎斯特采样率的情况下才可能进行逆重构），然后你可以调。

例如，由于您给出了一个对称内核的示例，它在最大值附近各向同性地衰减，您可以使用高斯函数。MATLAB 通过`fspecial`函数来​​做到这一点。

假设底层函数（例如高斯）并使用从当前内核定义的参数（即为您的数据拟合函数）

```
% use max location, amplitude and std from your kernel
max_z = max(z(:));
std_z = std(z(:));

% Set of tunable parameters (size of grid & granularity)
bounds_grid = [30 30]; grid bounds
step = 0.5; % resolution

% Grid
siz = (bounds_grid-1)/2;
[x,y] = meshgrid(-siz(2):step:siz(2),-siz(1):step:siz(1));

% Gaussian parameters
s = std_z; m = 0;

% Analytic function
g = exp(-((x-m).^2 + (y-m).^2)/(2*s*s));
g(g<eps*max(g(:))) = 0;
g = max_z*g./max(g(:));

surf(g); 
```

通过这种方式，您尊重高斯波瓣中的内核参数，但控制最终高斯内核的网格大小和分辨率。

一些例子：

![在此处输入图像描述](../Images/80cd7c7d25e2f1acc8c6703881e158f1.png)

# javascript - 保护单页 js 应用程序中的 UI

> ID：12606053
> 
> 赞同：2
> 
> 时间：2012-09-26T16:13:50.357
> 
> 标签：javascript, security, backbone.js, ember.js

让我首先说我确实理解永远不应该尝试在客户端的 javascript 中保护任何东西。我的问题是指一些用户会看到而其他用户不会看到的 UI。通常这个 UI 也绑定了某种逻辑。无论是 Backbone 还是 Ember，根据用户角色显示或隐藏 UI 的不同部分的一些常规做法是什么。

我最初的想法是根据当前登录的用户加载不同的 js。最重要的是，我还想到了异步加载视图模板。不过，我很想听听其他的想法和模式。请记住，这是假设客户端与之通信的后端 API 对于给定用户来说已经是安全的。因此，即使他们要查看安全的 UI 组件，它也无法正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T20:46:21.547

我不确定这是否真的是一个安全问题。无论如何，安全性由服务器处理。当您的应用程序具有不同的模式时，它与您如何组织 javascript 有关。

我认为为这两种模式设置一组完全不同的 javascript 文件并不是一个好主意。您应该尝试将数据和功能分开，并在每种模式下提供不同的数据。即，如果你有一个菜单，不要硬编码所有的菜单项，而是对服务器进行一个ajax 调用并加载菜单项。让服务器根据用户权限提供不同的菜单项。

某些功能当然只在管理模式下相关。把它放在一个单独的文件中就很好了。

# windows - 如何使用 DOS .bat 将带有计算值的行插入 XML 文件？

> ID：12606055
> 
> 赞同：0
> 
> 时间：2012-09-26T16:14:08.610
> 
> 标签：windows, batch-file

我需要使用 DOS 批处理文件将带有计算值的行添加到 xml 文件中。

这是我的输入：

```
<Sale>
  <saleID>82</saleID>
  <total currency="USD" readonly="true">63</total>
  <cost currency="USD" readonly="true">38.54</cost>
</Sale> 
```

将“利润”计算为（总成本）并生成：

```
<Sale>
  <saleID>82</saleID>
  <total currency="USD" readonly="true">63</total>
  <cost currency="USD" readonly="true">38.54</cost>
  <profit>24.46</profit>
</Sale> 
```

尝试了 xmlstarlet，但它没有所需的数学函数。有关如何使用 .bat 执行此操作的任何建议？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T04:34:42.363

您最大的问题将是`<`和`>`符号在 XML 文件中随处可见。（HTML也是）。

在批处理中，这些是重定向字符，并且会在处理包含它们的文本的每一行中导致错误，除非处理得非常小心。甚至可能在那时。

需要发生的是这些被其他东西取代。批处理转义字符`^`+符号，或者完全是其他东西。转义它们的问题在于，每次将该字符串暴露给批处理命令时，转义字符都会消失。

因此，假设您转义了所有重定向符号。

下次您更改该字符串时，转义字符将通过转义重定向符号来工作，但这样做它们会“用完”并从字符串中消失。这意味着下次您对该字符串执行**任何**操作时，它们将不存在，并且会发生错误，因为您没有将任何内容重定向到任何内容。或者什么都没有，或者....等等。

您可以通过使用双引号将字符串括起来来解决这个问题，但是使用双引号会引入它自己的一组问题，并且这些问题取决于您如何使用这些双引号。你把它们放在字符串里吗？绕弦？或者你用它们包围你的命令。每种技术都有其缺点和局限性。其中之一是您无法将其中两种技术结合起来，更不用说您了。

最后，要在文件中间实际插入一行（事实上，除了结尾之外的任何地方），您需要创建一个**新**文件，并在到达其中的正确位置时将行添加到该文件中。这意味着您对数据行所做的所有更改都需要**反转**，然后重定向字符转义（因为用双引号将字符串括起来只会混淆您的 XML 解析器）。简单地消除烦人的字符根本不是一种选择。

你的肉是这样的：

```
setlocal enabledelayedexpansion
set source=c:\whatever.xml
set dest=c:\temp.xml

for /f "tokens=*" %%x in (%source%) do (
   :: One technique for dealing with redirection characters
   set "line=%%x"
   make_line_palitable_to_batch
   if (line_contains_flag) (
     do_calculation_or_manipulation
     echo restored_!line!>>%dest%
   )
   echo restored_!line!>>%dest%
)
move /y %dest% %source% 
```

就是那几行伪代码`make_line_palitable_to_batch`，`restored_!line!`会害死你的。

需要替换的字符之一是

```
" 
```

如果您致力于替换该字符，识别哪些行包含您需要的数据，以及在何处插入新数据，我将提供用于替换重定向字符的代码并在需要时修复您的代码。（请记住，替换双引号**可能**很棘手，但最基本的搜索和替换方法会起作用。）

完成此操作后，**编辑您的问题以包含您的工作**。
另外，你不必完美，只要付出一些努力，我会帮助你。

# iphone - 了解 xCode 方案

> ID：12606057
> 
> 赞同：15
> 
> 时间：2012-09-26T16:14:23.827
> 
> 标签：iphone, ios, xcode

从它说的关于方案的文档中：

> “Xcode 方案定义了要构建的目标集合、构建时使用的配置以及要执行的测试集合。”

所以我想我创建一个调试方案和一个发布方案，并相应地设置项目和目标的构建设置，即使用发布方案的分发配置文件和调试的开发配置文件。

但是当我选择不同的方案时，这些设置不会改变。事实上，当我将代码签名设置为分发时，它仍然存在 - 切换到不同的方案不会改变任何东西。

非常感谢您的澄清！

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-26T18:58:40.323

您混淆了构建配置和方案。Xcode 项目有两种构建配置：Debug 和 Release。在构建设置编辑器中，您可以为 Debug 和 Release 构建配置提供不同的构建设置值。单击构建设置旁边的显示三角形以显示调试和发布配置的值。在您的示例中，您会在构建设置编辑器中找到代码签名身份构建设置。将代码签名身份构建设置的值设置为调试构建配置的开发配置文件，并将其设置为发布构建配置的分发配置文件。

为 Debug 和 Release 构建配置设置构建设置后，使用方案编辑器选择要使用的构建配置。方案编辑器具有以下操作，您可以在其中选择构建配置：运行、测试、配置文件、分析和存档。Xcode 最初使用 Debug 配置进行运行、测试和分析，并使用 Release 配置进行分析和归档。Run 操作是您在开发应用程序过程中最有可能更改的操作。

在大多数情况下，您可以使用一种方案。您通常不需要一个 Debug 方案和一个 Release 方案。您需要一个 Debug 和一个 Release 方案的主要原因是，如果您需要针对 Debug 和 Release 构建配置运行、测试、分析和分析您的应用程序。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-08-20T21:31:59.860

与上面在 Xcode 7（至少）方案中接受的答案相反，肯定会维护自己的调试和发布设置。您可以维护单独的调试和发布“方案”，并使用快捷方式 control-command-left/right 括号（上一个/下一个方案）使用它们在两个构建之间快速切换。

这样做的好处是能够在进行挑剔的性能测试时在发布和调试版本之间快速来回切换。启用优化的发布构建需要永远并且会弄乱堆栈跟踪等。

# fluent-nhibernate - fluent nhiberate 参考关键词

> ID：12606059
> 
> 赞同：0
> 
> 时间：2012-09-26T16:14:36.647
> 
> 标签：fluent-nhibernate

```
public class CTTypeMap :Enity<CTTypeMap>
{
  public CTTypeMap()
  {
    Id(x => x.ID);
    Map(x => x.createdOn);
    Map(x => x.list_id);
    References(x = x.CtListType).Column("list_id");
  }
} 
```

在上述代码行中，语句`References(x = x.CtType).Column("list_id");`将实体的 list_id 映射`CtListType`到 的 Id 列`CTType`。我需要`list_id`将实体映射`CtListType`到 .list_id 列`CTType`。请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T17:36:28.653

为了避免'Invalid Index N for this SqlParameterCollection with Count=N'错误，您应该将`list_id`属性映射为只读，如下所示：

```
public class CTTypeMap :Enity<CTTypeMap>
{
  public CTTypeMap()
  {
    Id(x => x.ID);
    Map(x => x.createdOn);
    Map(x => x.list_id).Readonly();
    References(x = x.CtListType).Column("list_id");
  }
} 
```

这样，您可以毫无问题地选择字段和实体。这样做的缺点是您不能通过字段 list_id 插入或更新。

**更新：**也许这不是实现它的正确方法，因为您将同一字段映射两次，所以我建议您检查这篇[文章](http://devlicio.us/blogs/derik_whittaker/archive/2009/03/19/nhibernate-and-invalid-index-n-for-this-sqlparametercollection-with-count-n-error.aspx)中提出的另一个解决方案。

# c# - 遍历列表 How can I loop through a List of type Object? List countries = new List(); countries.Add(new { Name = "United States", Abbr = "US" , Currency = "$"}); countries.Add(new { Name = "C 问问题 问问题 2012-09-26T16:14:45.583 56188 次 This question shows research effort; it is useful and clear 4 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. How can I loop through a List of type Object? List countries = new List(); countries.Add(new { Name = "United States", Abbr = "US" , Currency = "$"}); countries.Add(new { Name = "Canada", Abbr = "CA", Currency = "$" }); ...more I want to do something like (using property names) in my view @model ViewModel @foreach(object country in Model.Countries) { Name = country.Name Code = country.Abbr Currency = country.Currency } UPDATE: Forgot to mention that I am using MVC and I want to loop the data in View. Countries object is one of the property of ViewModel to view is strongly typed. UPDATE: updating as asked to show how View is called from the controller - [HttpPost] public ActionResult Index(FormCollection form) { ..some validations and some logic ViewModel myViewModel = new ViewModel(); myViewModel.Countries = GetCountries(); -- this is where data get initialized myViewModel.Data = db.GetData(); return PartialView("_myPartial", myViewModel); } You need to make countries anonymous too. As an exaplme, something like var countries = (new[] { new { Name = "United States", Abbr = "US", Currency = "$" }, new { Name = "Canada", Abbr = "CA", Currency = "$" }, }); List <string>names = new List<string>(); countries.ToList().ForEach(x => { names.Add(x.Name); }); c#asp.net-mvc 4 6 回答 6 This answer is useful 8 var countries = new []{ new { Name = "United States", Abbr = "US", Currency = "$" }, new { Name = "Canada", Abbr = "CA", Currency = "$" } }; foreach(var country in countries) { var Name = country.Name; ..... } 于 2012-09-26T16:22:50.377 回答 This answer is useful 3 If I understood well, you are trying to send the view model from the controller to the view. So if you are using razor your code should be like this @model ViewModel @foreach(object country in Model.countries) { var Name = country.Name var Code = country.Abbr var Currency = country.Currency } notice the keyword Model. Edit // Code inside your controller should be like this ViewModel myModel = new ViewModel(); List countries = new List(); countries.Add(new { Name = "United States", Abbr = "US" , Currency = "$"}); countries.Add(new { Name = "Canada", Abbr = "CA", Currency = "$" }); myModel.countries = countries; return View("yourView", myModel); // you can write just return View(myModel); if your view's name is the same as your action Hope it helps you. 于 2012-09-26T16:54:45.710 回答 This answer is useful 3 您还需要使国家/地区匿名。 例如，类似 var countries = (new[] { new { Name = "United States", Abbr = "US", Currency = "$" }, new { Name = "Canada", Abbr = "CA", Currency = "$" }, }); List <string>names = new List<string>(); countries.ToList().ForEach(x => { names.Add(x.Name); }); 于 2012-09-26T16:19:58.713 回答 This answer is useful 1 I would just create a new class, and use that instead of the generic object. Is there a reason that it needs to use the base level object? If more abstraction is needed you could utilize an anonymous type with a Where clause or use an abstract class. 于 2012-09-26T16:20:55.710 回答 This answer is useful 1 The way you defined your objects leaves dynamic as your only option: the two anonymous classes are of different type. You should either write foreach (dynamic country in countries) { ... } or initialize your list with instances of a named class (this is preferred, because dynamic may be too heavy in your situation). 于 2012-09-26T16:21:41.483 回答 This answer is useful 0 If you want to work with the polymorphic items somehow (and not with anonymous types) take a look at Cast<...>.ToList() or OfType<...>.ToList() 于 2012-09-26T16:21:56.150 回答 Related 1 asp.net - .net gridview 列显示实时计算 4 python - 处理多层应用程序中的通信 2 java - 使用蜡染的文本元素边界框的错误值 1 neo4j - Performance issues while creating Index on multiple fields in Spring data neo4j 2 shopify - Is there a way to load Shopify product images and other resources from an external server? 1 android - How can I make a pop-up menu appear after a pin is added to google maps android? 4 git - 禁用 git 中的所有分页 3 scala - 移动包私有类——我应该认为二进制不兼容吗？ 1 shell - How to strace adb shell am start myandroidapp 1 jquery-ui - 带有自定义列的 jqgrid Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：12606061
> 
> 赞同：4
> 
> 时间：
> 
> 标签：c#, asp.net-mvc

How can I loop through a List of type Object?

```
List<object> countries = new List<object>();
countries.Add(new { Name = "United States", Abbr = "US" , Currency = "$"});
countries.Add(new { Name = "Canada", Abbr = "CA", Currency = "$" });
...more 
```

I want to do something like (using property names) in my view

```
@model ViewModel
@foreach(object country in Model.Countries)
{
    Name = country.Name
    Code = country.Abbr
    Currency = country.Currency
} 
```

UPDATE: Forgot to mention that I am using MVC and I want to loop the data in View. Countries object is one of the property of ViewModel to view is strongly typed.

UPDATE: updating as asked to show how View is called from the controller -

```
[HttpPost]
public ActionResult Index(FormCollection form)
{
..some validations and some logic
ViewModel myViewModel = new ViewModel();
myViewModel.Countries = GetCountries(); -- this is where data get initialized
myViewModel.Data = db.GetData();
return PartialView("_myPartial", myViewModel);
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-26T16:22:50.377

```
var countries = new []{
        new { Name = "United States", Abbr = "US", Currency = "$" },
        new { Name = "Canada", Abbr = "CA", Currency = "$" }
    };

foreach(var country in countries)
{
      var Name = country.Name;
      .....
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T16:54:45.710

If I understood well, you are trying to send the view model from the controller to the view. So if you are using razor your code should be like this

```
@model ViewModel
@foreach(object country in Model.countries)
{
  var Name = country.Name
  var Code = country.Abbr
  var Currency = country.Currency
} 
```

notice the keyword `Model`.

Edit

```
// Code inside your controller should be like this
ViewModel myModel = new ViewModel();
List<object> countries = new List<object>();
countries.Add(new { Name = "United States", Abbr = "US" , Currency = "$"});
countries.Add(new { Name = "Canada", Abbr = "CA", Currency = "$" });

myModel.countries = countries;

return View("yourView", myModel); // you can write just return View(myModel); if your view's name is the same as your action 
```

Hope it helps you.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-26T16:19:58.713

您还需要使国家/地区匿名。

例如，类似

```
var countries = (new[] {
    new { Name = "United States", Abbr = "US", Currency = "$" },
    new { Name = "Canada", Abbr = "CA", Currency = "$" },
 });
 List<string> names = new List<string>();
 countries.ToList().ForEach(x => { names.Add(x.Name); }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T16:20:55.710

I would just create a new class, and use that instead of the generic object. Is there a reason that it needs to use the base level object? If more abstraction is needed you could utilize an anonymous type with a Where clause or use an abstract class.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-26T16:21:41.483

The way you defined your objects leaves `dynamic` as your only option: the two anonymous classes are of different type. You should either write

```
foreach (dynamic country in countries) {
    ...
} 
```

or initialize your list with instances of a named class (this is preferred, because `dynamic` may be too heavy in your situation).

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-26T16:21:56.150

If you want to work with the polymorphic items somehow (and not with anonymous types) take a look at Cast<...>.ToList() or OfType<...>.ToList()</string></string></string></string>

# c# - 如何检测像`?info`这样的查询字符串

> ID：12606070
> 
> 赞同：1
> 
> 时间：2012-09-26T16:15:09.030
> 
> 标签：c#, asp.net, url, query-string

`page.aspx?info`我看到一个使用or的网页`page.aspx?download`。我试过这个但它不起作用：

```
if (Request.QueryString["info"] != null)
{
    Label1.Text = "info";
} 
```

无论如何检查用户是否`?info`在 url 之后输入？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T16:17:53.870

`?info`将导致空值，因此您的空检查将失败。您想遍历 QueryString 集合的 Keys 以查看是否存在。

示例可在 MSDN - [HttpRequest.QueryString](http://msdn.microsoft.com/en-us/library/system.web.httprequest.querystring.aspx)获得，您需要使用`QueryString.AllKeys`某种循环/LINQ 查询来检查您的密钥是否存在：

```
String[] arr1 = Request.QueryString.AllKeys; 
for (loop1 = 0; loop1 < arr1.Length; loop1++) 
{...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T16:23:44.060

如果您不指定参数的名称，则将其视为`null`.

它的价值是`info`

因此，您必须按如下方式进行检查：

```
if(Request.QueryString[null]=="info")
{
    //Take some action
} 
```

# android - 是否有像 Cocoa Controls 这样的 Android 存储库？

> ID：12606071
> 
> 赞同：30
> 
> 时间：2012-09-26T16:15:11.347
> 
> 标签：android, ios

我正在寻找 Android 示例应用程序的存储库，例如[http://www.cocoacontrols.com/](http://www.cocoacontrols.com/) fo iOS，有类似的吗？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-01-22T08:16:30.590

一个好的存储库是 Android Arsenal [http://www.android-arsenal.com](http://www.android-arsenal.com)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-26T18:40:18.690

还有大量可用的开源 Android 应用程序，[F-Droid](http://f-droid.org)可能是其中最大的存储库。如果您最终使用了其中任何一个的代码，请注意提供该软件的许可；如果它是 GPL 许可的，那么您的代码也需要获得 GPL 许可（并且可用）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-13T19:53:32.000

有一个应用[DevAppsDirect](https://play.google.com/store/apps/details?id=com.inappsquared.devappsdirect&hl=en)，我强烈推荐。它拥有大量库，您甚至可以直接从应用程序本身下载和试用。如果你问我很方便。

有一个定期报道这些东西的时事通讯，[Android Weekly](http://androidweekly.net/)

然后是列出库/组件集合等的网站，如[Appance](http://appance.com/category/android/)、[Android-Arsenal](http://android-arsenal.com)等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T20:56:40.547

您可以尝试来自 github 的存储库。链接在这里

[https://github.com/search?q=android&ref=commandbar](https://github.com/search?q=android&ref=commandbar)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-03T13:49:56.553

刚找到另一个[网站](http://www.appance.com/)希望对你有帮助...

# java - SQL 语句失败，即使 db 中有实体

> ID：12606074
> 
> 赞同：1
> 
> 时间：2012-09-26T16:15:16.167
> 
> 标签：java, sql, eclipse, hsqldb

我有一张名为 Produkt 的表，在这张表中有几个名为 test 的产品。

当我想做那个代码时：

```
public Produkt findByName(String name) throws SQLException{
    log.error("Enter findByName with parameters: " + name);
    PreparedStatement ps;
    ResultSet rs = null;
    String query = "SELECT * FROM Produkt WHERE name=" + name;
    ps=hsqlmanager.getConnection().prepareStatement(query);
    rs = ps.executeQuery();
    ps.close();
    if(rs.next()) return(new Produkt(rs));
    else return(null);
} 
```

它总是给我一个sql错误：

```
Exception in thread "main" java.sql.SQLSyntaxErrorException: user
lacks privilege or object not found: TEST   at
org.hsqldb.jdbc.Util.sqlException(Unknown Source)   at
org.hsqldb.jdbc.Util.sqlException(Unknown Source)   at
org.hsqldb.jdbc.JDBCPreparedStatement.<init>(Unknown Source)    at
org.hsqldb.jdbc.JDBCConnection.prepareStatement(Unknown Source)     at
dao.DAOProdukt.findByName(DAOProdukt.java:157)  at
dao.test_produkt_dao.main(test_produkt_dao.java:23) 
```

为什么？我很欣赏你的回答！！！

**更新：**

为什么 PS 使用不当？请告诉我，以便我可以从中学习？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T16:16:32.903

`name`您正在生成无效的 SQL 语句，参数周围没有引号

```
String query = "SELECT * FROM Produkt WHERE name='" + name + "'";
                                                 ^--      ^^^^^^ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T16:23:39.807

您应该正确使用 PreparedStatements 来防止 SQL 注入。它还会在参数周围写上引号，这是必要的。

```
String query = "SELECT * FROM Produkt WHERE name=?";
PreparedStatement ps=hsqlmanager.getConnection().prepareStatement(query);
ps.setString(1, name); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T16:24:42.917

您根本不应该在 SQL 中包含该值。除非您在引用时*非常*小心，否则这样做会引发 SQL 注入攻击。（对于非字符串值，它还引入了潜在不正确的字符串转换。哦，它有效地将代码与数据混合在一起。只需对 SQL 中的变量值说“不”......）

相反，使用 a`PreparedStatement`和 a 参数，然后将参数的值设置为您要查找的名称。例如：

```
String query = "SELECT * FROM Produkt WHERE name = ?";
PreparedStatement ps = hsqlmanager.getConnection().prepareStatement(query);
ps.setString(1, name);
ResultSet rs = ps.executeQuery(); 
```

请注意，您还应该`close()`在块中包含语句，`finally`以避免在引发异常时泄漏资源。

有关 HSQLDB 特定的详细信息，请参阅 HSQLDB 用户指南的[数据访问和更改](http://hsqldb.org/doc/guide/dataaccess-chapt.html#dac_jdbc_parameters)部分，或[有关准备好的语句的 JDBC 教程以](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)获取更多通用信息。

# design-patterns - 解耦对象依赖于另一个对象的方法

> ID：12606079
> 
> 赞同：0
> 
> 时间：2012-09-26T16:15:39.690
> 
> 标签：design-patterns

我正在编写一个应用程序来记录鼓谱（特别是用于[采样器](http://i.stack.imgur.com/NlGw7.jpg)）。我遵循采样器的约定，它们是：

1.  一个**Sequence**是 1 个或多个**Tracks**。**序列**可以被[量化](http://en.wikipedia.org/wiki/Quantization)（将度量分成相等的部分）。

2.  **音轨**是将在小节的某些部分播放的乐器或声音。每个**Track**都被分解成多个部分。部分的数量由**Sequence**的量化决定。例如，如果量化设置为 1/16，则数组的长度为 16。然后，数组的每个元素存储声音是否应在**Sequence**中的该步骤播放。

自然，我有一个对象来表示一个**Sequence**。它有一个称为**Track**对象`tracks`数组的属性。**Track对象具有与****Sequence**的量化长度相等的数组属性。

 ******我正遭受严重的分析瘫痪，无法确定**属于特定对象的所有对象****知道量化何时发生变化以便它可以更新自己的内部数组****的干净方法是什么？`Track``Sequence`**

或者

**对象应该如何`Track`知道在不耦合`Sequence`对象的情况下将其数组长度设置为什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T16:33:37.283

如果每个轨道都必须属于一个且仅属于一个序列，那么它们本质上是耦合的。反映实现中的耦合不是问题（可能除了单元测试）。

由于序列会启动此更改，因此我建议在`Sequence`对象上使用可公开访问的方法，该方法将序列的量化设置为一个整体，然后遍历序列的轨道以设置其量化。`Sequence.setQuantization()`可以公开访问，`Track.setQuantization()`不应该。

为了确保保持耦合，我还将创建`Track`对象的能力限制为工厂方法`Sequence`（例如：）`addTrack()`。

这就提出了独立单元测试`Track`和`Sequence`. 做到这一点的一种方法是将这些对象创建为接口，然后每个对象都有一个单独的实现，并带有用于测试代码的钩子。这导致了它自己的丑陋，可能包括一个`SequenceFactory`，但只有你可以决定你需要多少纯度。******

# jquery - 对象中的 jQuery 选择器 - 减少冗余与可读性

> ID：12606080
> 
> 赞同：0
> 
> 时间：2012-09-26T16:15:39.927
> 
> 标签：jquery, jquery-selectors, dry, readability

假设我有一个 Web 表单，它从用户那里收集公司名称及其地址信息。在相关的 javascript 文件中，为了减少散布在函数中的 jQuery 选择器并在单个对象结构中收集相关信息，我可能会将所有这些信息存储在一个对象中，如下面的简单示例所示：

```
var companyForm = {
    name: {
        inputField: $("#CompanyName"),
        isValid: function() {
            return IsNameValid(this.inputField.val());
        },
        labelField: $("#CompanyNameLabel")
    },
    address: {
        inputField: $("#Address"),
        isValid: function() {
            return IsAddressValid(this.inputField.val());
        },
        labelField: $("#AddressLabel")
    },
    city: {
        inputField: $("#City"),
        isValid: function() {
            return IsCityValid(this.inputField.val());
        },
        labelField: $("#CityLabel")
    }
}; 
```

我只需要列出这些选择器一次，然后每当我需要引用用户输入的公司名称时，我就可以使用它：

```
companyForm.name.inputField.val() 
```

或者，如果我想检查用户输入的有效性：

```
companyForm.name.isValid() 
```

等等（比如，labelField 是一个标签元素，如果用户输入格式错误的输入，我可能想要添加一个名为“error”的类，并且我想向他们强调它需要他们注意）。

**我的困境是，通过将 DRY 原则应用于我的 jQuery 选择器，我现在损害了可读性**，因为：

```
$("#CompanyName").val() 
```

比以下内容更容易阅读和理解：

```
companyForm.name.inputField.val() 
```

**我不应该尝试以这种方式减少冗余吗？有没有更好的方法可以管理或最小化选择器引用？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T16:18:56.093

如何实现 getter 和 setter 函数？这样你只会打电话`companyForm.getName()`来获得价值`companyForm.name.inputField.val()`

比方说：

```
var companyForm = {
    name: {
        inputField: $("#CompanyName"),
        isValid: function() {
            return IsNameValid(this.inputField.val());
        },
        labelField: $("#CompanyNameLabel")
    },
    ...
    getName: function() {
        return this.name.inputField.val();
   }
}; 
```

# javascript - ExtJS Grid，填充输入字段时允许空格键

> ID：12606085
> 
> 赞同：3
> 
> 时间：2012-09-26T16:16:08.570
> 
> 标签：javascript, extjs

我正在将一些非常困难的旧 HTML 代码移植到 ExtJS 网格中，不幸的是，每隔一段时间，一些单元格就会通过 ajax 将其内容作为纯 HTML 并将输入元素放入网格的单元格中。

有一次，我最终在一个单元格中找到了一个致命的 Textarea，看起来不错，但是在 textarea 中输入文本不是很方便，因为不允许使用“空格”，网格会忽略它。

![在此处输入图像描述](../Images/4d5f8ba6c31ed5bb8955dbd6e6fad42e.png)

我已经尝试过 keyNav.disable(); 和 enableKeyNav = false; 但这些都没有帮助:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T17:56:43.077

一切正常：（示例：http: [//jsfiddle.net/e6vTw/](http://jsfiddle.net/e6vTw/)）

```
Ext.onReady(function() {
    Ext.create('Ext.grid.Panel', {
        store: Ext.create('Ext.data.ArrayStore', { fields: [ {name: 'company'}, {name: 'price' }],
            data: [['3m Co', 71.72], ['Alcoa Inc', 29.01], ['Altria Group Inc',83.81]]
        }),
        columns: [{
            text: 'Company',
            dataIndex: 'company',
            width: 200,
            renderer: function(val) { 
                return Ext.String.format('<textarea style="width:194px;" rows="4">{0}</textarea>', val); 
            }
        }, {
           text: 'Price',
           dataIndex: 'price'
        }],
        renderTo: Ext.getBody()
    });
});​ 
```

# java - 动态绑定

> ID：12606089
> 
> 赞同：-2
> 
> 时间：2012-09-26T16:16:21.173
> 
> 标签：java

如果一个类实现了一个接口并有一个`toString()`方法，并且我们将子引用存储到父变量中，或者只是完成了动态绑定，那么为什么编译器不检查`toString()`接口中的方法，因为动态绑定的规则是检查函数的唯一性在父母

例如。

```
interface my {
    void show();
}

class child implements my {
    public void show() {
        System.out.println("working");
    }

    public String toString() {
        return "hello";
    }

    public static void main(String... s) {
        my m = new child();

        m.show();

        String s = m.toString();
        System.out.println(s);
    }
} 
```

我们知道，只要动态绑定完成，子个人方法就无法执行，除非它覆盖了上述方法，那么为什么`toString()`要编译上述函数并给出输出呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T16:32:41.037

听起来你在问这个问题：

*在我的示例代码中，局部变量`m`的类型为`my`. 接口`my`只声明了一个方法，`show()`为什么我可以调用`m.toString()`呢？*

这在 Sun（现在的 Oracle）[Java 继承教程](http://docs.oracle.com/javase/tutorial/java/IandI/subclasses.html)中进行了解释：

> > 类可以从从类派生的类派生的类派生，依此类推，并**最终从最顶层的类 Object 派生。**据说这样的类是继承链中所有类的后裔，这些类一直延伸到 Object。

[该类`Object`](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html)声明了一个默认`toString()`方法（以及其他几个基本方法），因此您可以调用Java`toString()`中的[任何](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html)*对象*。

* * *

**更新**

由于 Java 中的所有类实例都*必须*继承自 Object，因此使用接口作为类型的实际语义更像是这样的：

```
public static void main(String... s) {
    // This won't actually compile
    (? extends Object implements my) m = new child(); 

    m.show();

    String s = m.toString();
    System.out.println(s);
} 
```

换句话说，当您声明 that `m`has type时，`my`您实际上是在说那`m`是一些`Object`实现 interface 的类型`my`。由于`Object`声明了一个方法，即使接口中不存在`toString()`，您也可以调用。`m.toString()``toString()``my`

Java 是故意设计`Object`在类层次结构的顶部的，因此您无法让编译器抱怨调用`toString()`任何对象的任何实例。`hashCode()`,`equals()`等也是如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T16:31:41.433

我认为您的问题将通过已经给出的两个答案得到解决。我只想指出关于您的陈述的一些事情：-

*   `if a class implements an interface and have a toString() method`

您定义的任何类都有一个`toString()`方法。虽然它可能看起来不明显，但是当您打印您的类的实例时，它是调用`toString()`的类的方法..（类是您定义的所有其他类的超类） .. 因此，类中定义的任何方法都可以从任何其他.`Object``Object``Object``class object`

您可以根据需要覆盖此方法以打印您的实例。但是，如果没有被覆盖，您将获得`hashcode`您的对象..（类似于：- `classname@12343`.. 现在由于此`toString()`方法可用于所有类，编译器不要不需要在任何地方检查它`interface`。它知道`toString()`方法是`Object`类的一部分，它是`super class`所有类的一部分。

*   `we store the child reference into parent variable`

虽然你的理解是对的，但是让我重新定义这句话，让它更有意义：- `We Store the reference to child class object in the parent class reference variable`

*   `function uniqueness will be check in parent`

我真的不明白，你这句话是什么意思.. 但据我了解，你是说 - “当在 a 上调​​用一个方法时`child class`，`parent class reference`编译器将首先检查该方法是否定义在`parent class`与否，那么只有您可以调用该方法..

***编辑***：-

根据[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-9.html#jls-9.2)，第 9.2 节：-

> 如果接口没有直接的超接口，则接口隐式声明一个公共抽象成员方法 m，其签名为 s，返回类型为 r，并且 throws 子句 t 对应于每个签名为 s、返回类型为 r 和 throws 子句的公共实例方法 m在 Object 中声明，除非接口显式声明了具有相同签名、相同返回类型和兼容 throws 子句的方法。
> 
> 如果在 Object 中将 m 声明为 final 的情况下，接口显式声明了这样的方法 m，则会出现编译时错误。
> 
> 如果接口声明的方法具有与 Object 的公共方法重写等效（第 8.4.2 节）的签名，但具有不同的返回类型或不兼容的 throws 子句，则会出现编译时错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T16:22:52.983

所有对象都扩展`Object`。 `public String toString()`定义在`Object`所有对象都有一个`toString()`方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T16:23:05.200

如果你问我认为你在问什么，那是因为 Java 中的每个非原始（原始是`int`,`long`等；但不是`String`）都有 type `Object`。 `Object`有方法`toString()`、`hashCode()`和`equals()`，这意味着任何非原始也有这些方法。

但是，这些方法通常过于通用，无法用于特定的类，这就是我们在需要时重载它们的原因。

# c++ - 如何使用模板函数设置不同类型的值？

> ID：12606090
> 
> 赞同：0
> 
> 时间：2012-09-26T16:16:20.520
> 
> 标签：c++, function, templates

每个人！

我有一个名为 UpdateValue 的模板函数，它旨在更新一些具有不同类型的值，例如整数、BOOL、字符串等。请参阅以下代码片段以供参考：

```
#include <typeinfo.h>

template<class T> 
void UpdateValue(T Value)
{   
    if ( typeid(int) == typeid(Value) ) 
    {  
       ZOrder(Value);
    }
    else if ( typeid(bool) == typeid(Value) )
    {  
       BOOL bShow = Value ? TRUE : FALSE;
       Show(bShow);
    }
    else if ( typeid(CString) == typeid(Value) )
    {  
       Theme(Value);
    }
}

void Show(BOOL bShow) { m_bShow = bShow; }
void ZOrder(int nZOrder) { m_nZOrder = nZOrder; }
void Theme(CString strTheme) { m_strTheme = strTheme; }

BOOL m_bShow;
int m_nZOrder;
CString m_strTheme; 
```

但是当我使用以下语句调用这种模板函数时

```
CString strValue = _T("Animal");
UpdateValue<CString>(strValue); 
```

上述代码编译失败，抛出以下异常：

> e:\dynaprop\dynaprop\mainfrm.cpp(269) : 错误 C2664: 'CMainFrame::ZOrder' : 无法将参数 1 从 'CString' 转换为 'int' 1> 没有可以执行此操作的用户定义转换运算符转换，否则无法调用运算符 1> e:\dynaprop\dynaprop\mainfrm.cpp(67) ：请参阅对函数模板实例化 'void CMainFrame::UpdateValue(T)' 的引用 1> 与 1> [ 1> T=CString 1> ]

你能告诉我如何弄清楚吗？先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T16:27:52.347

您并没有真正使用模板工具。或者宁愿错过使用它。`ZOrder(Value)`发生的事情是您调用`void UpdateValue(T Value)`get 实例化，其中每次出现的都按照您指定的方式`T`替换。`CString`但仅此而已。

函数看起来像这样

```
void UpdateValue(CString Value)
{   
    if ( typeid(int) == typeid(Value) ) 
    {  
       ZOrder(Value);
    }
    else if ( typeid(bool) == typeid(Value) )
    {  
       BOOL bShow = Value ? TRUE : FALSE;
       Show(bShow);
    }
    else if ( typeid(CString) == typeid(Value) )
    {  
       Theme(Value);
    }
} 
```

在模板被实例化后，正常的编译工作就会发生……你会得到一个错误，因为它写`ZOrder(Value);`在 where`value`的`CString`类型中。这将产生一个错误，即使在这种情况下使用 RTTI 这个调用路径也不应该到达。

您应该做的是使用特化来处理不同的类型。尝试用这些替换原始定义`UpdateValue`：

```
template<> // specialization when T is get to be int
void UpdateValue<int>(int Value) { ZOrder(Value);};

template<> // specialization when T is get to be CString
void UpdateValue<bool>(bool Value) { BOOL bShow = Value ? TRUE : FALSE; Show(bShow);};

template<> // specialization when T is get to be CString
void UpdateValue<CString>(CString Value) { Theme(Value);};

template<class T>  //general case
void UpdateValue(T Value) { cout << "IMPLEMENT ME\n";}; 
```

然后，当您`UpdateValue< T >`调用具有适当正文的版本时。你也不必使用 RTTI。

更新：在评论者建议之后。如果您不需要/不想处理一般情况（即未知类型），您可以诉诸普通重载并使用：

```
//Value is int
void UpdateValue(int Value) { ZOrder(Value);};
//Value is bool
void UpdateValue(bool Value) { BOOL bShow = Value ? TRUE : FALSE; Show(bShow);};
//Value is CString
void UpdateValue(CString Value){ Theme(Value);}; 
```

那时甚至不需要模板！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T16:34:50.413

如其他一些答案中所述（或暗示），您需要将三个代码分支分成三个模板专业化 - 每个参数类型一个。但这很愚蠢；如果您真的想要一个`UpdateValue`函数根据参数类型执行三种不同的操作，只需编写三个重载，`UpdateValue`并且根本不使用模板！

（这可能无法使用该`BOOL`类型，因为它可能`int`也是如此。你很可能应该使用它`bool`，除非有一些非常强大且奇怪的理由不这样做。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T16:34:53.377

您可以使用函数重载来实现您想要做的事情，（我将其更改为使用 STL 字符串，以便对其进行编译）：

```
#include <typeinfo>
#include <string>

using namespace std;

bool m_bShow;
int m_nZOrder;
string m_strTheme;

void Show(bool bShow) { m_bShow = bShow; }
void ZOrder(int nZOrder) { m_nZOrder = nZOrder; }
void Theme(string strTheme) { m_strTheme = strTheme; }

void DoUpdate( bool bShow )
{
    Show( bShow );
}

void DoUpdate( int nZOrder )
{
    ZOrder( nZOrder );
}

void DoUpdate( string strTheme )
{
    Theme( strTheme );
}

template<class T>
void UpdateValue(T Value)
{
    DoUpdate( Value );
}

int main( int argc, char **argv )
{
    string strValue = "Animal";
    UpdateValue<string>(strValue);

    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T16:37:53.970

正如前面提到的答案和评论，`UpdateValue<CString>(CString)`实例化失败，因为它无法编译`ZOrder(CString)`表达式。请记住，模板实例化只是编译时类型替换，而不是运行时。混合运行时 RTTI 和模板不是一个好主意，看起来像模板滥用。

建议使用函数重载而不是模板，它会产生相同的结果：

```
void UpdateValue(int Value)
{
    ZOrder(Value);
}     

void UpdateValue(bool Value)
{
   BOOL bShow = Value ? TRUE : FALSE;        
   Show(bShow);     
}

void UpdateValue(const CString& Value)
{
   Theme(Value);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T16:56:09.067

代码仍然被编译，即使它是死代码。所以你说：

```
if ( typeid(int) == typeid(Value) )
{  
   ZOrder(Value);
} 
```

即使它永远不会执行，它仍然会尝试编译代码，因此它会抛出错误。

你最好使用模板专业化：

```
template<class T> 
void UpdateValue(T Value) {
    // By default, do nothing.
}

void UpdateValue < int >(int value) {
    ZOrder(value);
}

void UpdateValue < bool >(bool value) {
    BOOL bShow = Value ? TRUE : FALSE;
    Show(bShow);
}

void UpdateValue < CString >(CString value) {
    Theme(value);
} 
```

总而言之，这是对模板的不必要使用。你最好使用几个重载来代替。

# entity-framework - 仅使用 DataAnnotations 和 ValidationMethods 检查数据库

> ID：12606092
> 
> 赞同：0
> 
> 时间：2012-09-26T16:16:27.813
> 
> 标签：entity-framework, validation, data-annotations, wcf-ria-services, silverlight-5.0

为了使我的需求更容易解释，我将使用一个大家都知道的案例。

请记住，当您注册新的 Hotmail 帐户时，输入新的 Microsoft 帐户并**离开该字段**时，会根据数据库验证该值以检查其是否可用。

如何仅使用 DomainService 元数据上的 DataAnnotations 和 Validation 方法来做到这一点？

我正在使用从 SQL Express 数据库、RIA 服务、数据注释、验证方法和 Silverlight 5 自动生成的 ADO NET 实体模型。

我刚刚查看了 Jeff Handley 关于该主题的博客，他介绍了一种解决方案，该解决方案涉及创建一个服务，该服务使数据可从服务器上的验证方法中获得。问题是这个解决方案不适用于我的案例，他使用了两个表实体模型，并制作了一些仅适用于那个简单案例而不适用于我的技巧。

有人成功解决了这个问题吗？

我可以创建一个存储过程并在 Silverlight 应用程序中提交更改之前调用它，或者我可以在我的 ViewModel 的 OnSave 方法中进行额外验证，但这意味着我正在完成来自客户端的验证过程，并且我想完全从服务器完成，以避免重复代码。

此外，我想在按“保存”之前进行验证。

拉斐尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T17:44:11.413

它是这样完成的：[在 MVC 3 中创建自定义数据注释验证](https://stackoverflow.com/questions/6526944/creating-custom-data-annotation-validation-in-mvc-3)。

简要地说，他们在注册期间根据数据库检查用户名的可用性

**编辑**

我认为这里是更好的链接（不是 QA，而是关于 How-To 的实际文章）：

[如何：在 ASP.NET MVC 中实现远程验证](http://msdn.microsoft.com/en-us/library/gg508808%28v=vs.98%29.aspx)

希望这可以帮助。

# c# - 如何过滤掉 DGV 中的指定键？

> ID：12606094
> 
> 赞同：0
> 
> 时间：2012-09-26T16:16:33.163
> 
> 标签：c#, winforms, datagridview, custom-component, keydown

我只想让用户输入 0..9, "." 和我的 DGV 中的退格键。我认为 KeyDown 事件可能是门票，如下所示：

```
private void dataGridViewPlatypi_KeyDown(object sender, KeyEventArgs args)
{
    args.Handled = !args.KeyCode.Equals(Keys.Decimal); // etc. - add other allowed vals
    if (args.Handled)
    {
        args.SuppressKeyPress = true;
    }
} 
```

...但这不起作用/没有效果。

我研究并发现：[DataGridView keydown event not working in C#](https://stackoverflow.com/questions/4284370/datagridview-keydown-event-not-working-in-c-sharp)

...这导致我创建了一个自定义 DGV 类：

```
protected override bool ProcessCmdKey(ref System.Windows.Forms.Message msg, System.Windows.Forms.Keys keyData)
{
    if ((!keyData.Equals(Keys.Decimal)) &&
        (!keyData.Equals(Keys.???))) // etc.
    {
        //suppress the key somehow
    }
    return base.ProcessCmdKey(msg, keyData); // <-- should this be in an "else" block?
} 
```

...但正如你可以从“？？？” 和“不知何故”的评论，我不知道如何测试我想要允许的其他键（0..9 和退格键）

## 更新

在两位受访者的有力帮助下，它现在运行良好：

我在这里开始使用 Hans Passant 的代码来创建自定义 DGV 派生控件来解决可移动的最后一行问题：

[在c#中删除datagrid中的空白灰色空间](https://stackoverflow.com/questions/2122985/removing-the-empty-gray-space-in-datagrid-in-c-sharp)

...然后添加基于 LarsTech 的代码以过滤掉 DGV 中不需要的条目。

准确地说，这是我用来覆盖 ProcessCmdKey() 的确切逻辑：

```
protected override bool ProcessCmdKey(ref Message msg, Keys keyData)
{
    if (char.IsNumber(Convert.ToChar(keyData)) || 
        char.IsControl(Convert.ToChar(keyData)) || 
        (keyData >= Keys.NumPad0 && keyData <= Keys.NumPad9) ||
        (keyData == Keys.Space) ||
        (keyData == Keys.Back) ||
        (keyData == Keys.Decimal))
    {
        return false;
    }
    return true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T17:01:11.497

处理文本输入控件的键几乎从来不是 100%。您可能希望在此[代码项目](http://www.codeproject.com/Articles/26005/DataGridViewColumn-Hosting-MaskedTextBox)的 DataGridView 中使用 MaskedTextBox 控件进行调查。

对于覆盖，此代码将使您关闭：

```
protected override bool ProcessCmdKey(ref Message msg, Keys keyData) {
  if (
    (keyData >= Keys.D0 && keyData <= Keys.D9) ||
    (keyData >= Keys.NumPad0 && keyData <= Keys.NumPad9) ||
    (keyData == Keys.Decimal | keyData == Keys.OemPeriod) ||
    (keyData == Keys.Back | keyData == Keys.Delete) ||
    (keyData == Keys.Left | keyData == Keys.Up | keyData == Keys.Right | keyData == Keys.Down) ||
    (keyData == Keys.Tab | keyData == Keys.Home | keyData == Keys.End | keyData == Keys.Enter)
    ) {
    return false;
  }

  return true;
} 
```

# jquery - 使用 JQuery 定位标签

> ID：12606095
> 
> 赞同：2
> 
> 时间：2012-09-26T16:16:36.683
> 
> 标签：jquery

我在使用 JQuery 更改标签值时遇到问题。尤其是：

```
<label for="answer[649][radiobutton_other_value]">Other:</label> 
```

我的目标是将值“其他：”更改为其他值。有没有办法使用“answer[649][radiobutton_other_value]”作为定位标签的锚点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T16:17:41.080

是的，只需将标签定位为`label[for^="answer[649]"]`

```
$('label[for^="answer[649]"]').text('other value'); 
```

这将找到一个`for`属性以开头的标签`answer[649]`并将更改其文本

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T16:18:44.310

如果可能，您将希望通过标签上方的 id 选择一些内容以缩小范围。然后执行以下操作：

```
$("#ParentElem").find("label[for='answer[649][radiobutton_other_value]']").text("New Text Here"); 
```

如果无法缩小选择器的范围或者它是一个非常小的页面，那么这将起作用：

```
$("label[for='answer[649][radiobutton_other_value]']").text("New Text Here"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T16:18:43.917

```
$('label[for*=answer]').html('New Value') 
```

// 或者

```
$('[label[for^=answer]').html('New Value') 
```

// 或者

```
$('label[for="answer[649][radiobutton_other_value]"]').html('New Value') 
```

# c# - .net 4 DataGridView在增删改行后不更新数据库sqldatasource

> ID：12606106
> 
> 赞同：0
> 
> 时间：2012-09-26T16:17:28.430
> 
> 标签：c#, sql-server, winforms, datagridview, sqldatasource

我正在做一个大项目，没有太多时间来解决每个问题，我使用的是 Windows 窗体，尤其是 DataGridView。我刚刚添加了一个可以查询数据库表的数据源。检查启用添加、删除和编辑属性。我通过拖放创建了这个 DataGridView，并添加了一个数据源。运行程序时查询工作正常，表格出现在我的 DataGridView 上，我可以在 DataGridView 上添加、编辑和删除行，但是当我通过 SQL Server Management Studio 查询表格时，表格中的记录仍然存在相同。可能是什么问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T16:20:48.270

数据源需要有插入/更新/删除命令才能使网格视图工作，听起来它只有一个选择命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T16:37:04.440

不幸的是，您确实需要专门运行更新命令。

这是一个可能有帮助的链接：http: [//msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldataadapter.updatecommand.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldataadapter.updatecommand.aspx)

这里讨论了如何自动保存到 SQL Server，如果相关的话：http: [//www.codeproject.com/Articles/12846/Auto-Saving-DataGridView-Rows-to-a-SQL-Server-Data](http://www.codeproject.com/Articles/12846/Auto-Saving-DataGridView-Rows-to-a-SQL-Server-Data)

这是我喜欢 Entity Framework/MVC 的原因之一。非常简单的数据操作：D 如果您有兴趣/有空闲时间，我建议您检查一下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T18:17:42.727

如果您在完成表格后使用 dbnavigator，您应该单击 dbnavigator 上的保存按钮，因为添加、编辑和删除不会保存在数据库中，直到您单击 dbnavigator 中的保存按钮。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T06:14:48.803

我找到了解决方案。我添加了一个名为“保存更改”的按钮。

首先，我做出初步声明：

```
 private SqlDataAdapter da;
    private DataTable dt;
    private SqlCommandBuilder sqlCommandBuilder = null;
    private SqlConnection Con = new SqlConnection(@"Data Source=......"); 
```

这是加载填充它的 DataGridView 的代码：

```
 private void DataGridView_Load(object sender, EventArgs e)
    {

        Con.Open();
        da = new SqlDataAdapter(@"SELECT * FROM tbl", Con);
        sqlCommandBuilder = new SqlCommandBuilder(da);

        dt = new DataTable(); 
        da.Fill(dt);
        dataGridView1.DataSource = dt;
        Con.Close();
    } 
```

这是保存更改按钮的代码：

```
private void button1_Click(object sender, EventArgs e)
    {
         SqlCommandBuilder local_SqlCommandBuilder = new SqlCommandBuilder(da);

                local_SqlCommandBuilder.ConflictOption = System.Data.ConflictOption.OverwriteChanges;

                da.UpdateCommand = local_SqlCommandBuilder.GetUpdateCommand();

                da.Update(((System.Data.DataTable)this.dataGridView1.DataSource));

                ((System.Data.DataTable)this.dataGridView1.DataSource).AcceptChanges();

    } 
```

# jdbc - Cassandra CQL 3 奇怪的行为。进行删除查询时出错

> ID：12606108
> 
> 赞同：1
> 
> 时间：2012-09-26T16:17:42.123
> 
> 标签：jdbc, cassandra, cql

今天我决定使用 CQL，不幸的是我遇到了 CQL 3 和 Composite 列的许多问题。我没有解决的其中之一是：

我有 4 个复合主键的表。我们将它们命名为 c_key0、c_key1、c_key2、c_key3。我添加了一些数据，然后我想删除 c_key0='L1' 和 c_key1='L2' 的所有行，这与分配给 c_key2 和 c_key3 的值无关。当我查询“DELETE FROM Composite WHERE c_key0='L1' and c_key1='L2' 并得到一个错误。当我查询 c_key0='L1' and c_key1='L2' and c_key2>='' and c_key3 >='' 我又得到一个错误。这真的很愚蠢。我错在哪里？

PS我正在使用JDBC。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T03:16:47.213

CQL 并不是一种完全通用的查询语言，Cassandra 也不是一种完全通用的关系数据库。CQL 最终可能会发展到您可以提供任何您喜欢的 SQL-92 查询并期望结果的地步，但它现在不存在，甚至不是设计目标。

因此，长话短说，这不是进行范围删除的受支持方式。

# jsf - JSF/Primefaces-命令按钮上的动作监听器没有被调用

> ID：12606115
> 
> 赞同：2
> 
> 时间：2012-09-26T16:18:03.950
> 
> 标签：jsf, jsf-2, datatable, primefaces

我正在使用带有 Prime Faces 3.2 的 JSF2.0。我有一个数据表，其中有一列有两个命令按钮。第二个命令按钮基于条件呈现。在过滤数据表之前一切正常。一旦过滤了没有渲染属性的第一个命令按钮，就会毫无问题地调用我的 actionListener，而具有渲染属性的第二个命令按钮则不会。

PS：我使用 f:param 而不是 setPropertyActionListener 的原因是由于 primefaces 数据表中的错误在过滤时传递了错误的行 id。

这是我的代码，对此问题的任何见解都会很棒。

```
<p:column headerText="Column1" filterMatchMode="contains" filterBy="#{item.name}" sortBy="#{item.name}">
                       <h:outputText value="#{item.name}" style="float:left" />
                        <span class="inlineButton"> 
                        <p:commandButton id="selectBtn" icon="select"
                            oncomplete="dialog1.show()" actionListener="#{controller.setItem}">                         
                            <f:param name="itemId" value="#{item.id}"/>
                        </p:commandButton>

                    <p:commandButton id="delBtn" icon="delete"
                        actionListener="#{controller.setItem}"
                        oncomplete="delConfirm.show()"
                        rendered="#{not empty item.id}">                            
                        <f:param name="itemId" value="#{item.id}"/>
                    </p:commandButton>
                    </span>
                </p:column> 
```

# devexpress - Gridview 编辑表单

> ID：12606116
> 
> 赞同：0
> 
> 时间：2012-09-26T16:18:07.117
> 
> 标签：devexpress

我有一个属性 enablecallbacks=false 的 Devexpress gridview。当我打开编辑表单并输入一些数据并单击更新时，它会丢失输入的数据但会进行验证。如何使编辑表单工作保留价值？我不希望编辑表单在回发期间丢失数据？有什么帮助吗？

我必须拥有具有此属性的 edvexpress 才能在编辑表单中拥有另一个控件才能工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-15T07:05:28.080

您需要在 Gridview 设置中为您的编辑功能设置路由；

```
settings.SettingsEditing.UpdateRowRouteValues = new { Controller = "Controller", Action = "Action" }; 
```

您还需要从某个按钮（例如从您的编辑表单示例中）调用它；

```
@Html.DevExpress().Button(settings =>
{
    settings.Name = "Name";
    settings.Text = "DELETE";
    settings.ClientSideEvents.Click = "function(s, e){ GridName.UpdateEdit(); }";
}).GetHtml() 
```

但是，在您的问题中，它并没有说明您正在使用什么框架，只要示例来自 MVC。

# windows - 未登录到服务器时，脚本中的 Get-Service 不起作用

> ID：12606120
> 
> 赞同：2
> 
> 时间：2012-09-26T16:18:34.683
> 
> 标签：windows, powershell, iis-7, windows-services

我编写了一个脚本，每 15 分钟检查一次 Web 服务器上的 IIS 服务状态。我通过 Windows 任务计划程序安排了这个脚本。

当我登录到服务器并手动运行脚本时，如果功能正确。当我没有登录到服务器并通过批处理脚本执行此操作时，即使它确实已启动并重新启动服务，`Get-Service`查询也不会返回IIS。`Running`

为什么当我以物理方式登录服务器与作为计划任务在后台运行时，此脚本的运行方式会有所不同？

脚本是这样调用的：`C:\Scripts\powershell.exe -File verify_status.ps1 [Service param]`

```
##############################
# Get service status
##############################
if($args[0] -ne $NULL){

    $serviceName = $args[0]
    $serverName = hostname

    $status = (Get-Service $serviceName).Status

    if ($status -ne "Running"){
        sendMail "$serviceName" "$serverName"
        Restart-Service $ServiceName
    }else{
            # Service is running, do nothing;
    }
} 
```

======================================

**编辑**`NULL`-当脚本在没有人登录的情况下运行时，Get-Service 返回一个。如果这有帮助的话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T21:38:21.940

有两件事解决了这个问题。我认为主要是更改`.bat`调用 powershell 脚本的脚本。

我来自：

```
C:\Scripts\powershell.exe -File verify_status.ps1 [Service param] 
```

到

```
C:\Scripts\powershell.exe -File verify_status.ps1 "[Service param]" 
```

双引号是正确将参数传递给 powershell 脚本所必需的。

我还在 powershell 脚本本身中更改了以下内容。我不确定这是否有必要，但两者的结合使这项工作：

```
$status = (Get-Service $serviceName).Status 
```

到

```
$status = (Get-WmiObject -ComputerName SERVERNAME -Class Win32_Service -Filter "Name='$serviceName'").State 
```

现在`Windows Task Scheduler`正确执行此脚本且没有错误。

# java - 在进入循环之前显示 GlassPane

> ID：12606123
> 
> 赞同：3
> 
> 时间：2012-09-26T16:18:41.110
> 
> 标签：java, swing, glasspane, order-of-execution

（在我使用 Swing GUI 的应用程序中）我想在单击 JButton 后调用的循环或方法中执行的某些工作期间显示 GlassPane。

例如：（单击按钮后执行的操作）

```
if (item.equals(button)) {

    glassPane.setVisible(true);

    someTimeConsumingMethod();

    glassPane.setVisible(false);

} 
```

运行此代码会导致在执行 someTimeConsumingMethod() 期间不显示 glassPane - GUI 会在显示结果之前冻结片刻。删除该循环中的最后一行 (glassPane.setVisible(false);) 会导致在方法完成后显示 glassPane（当 GUI 解冻时）。

有没有一种简单的方法可以在 GUI 冻结之前显示 glassPane，或者我需要在这里使用一些高级知识？（线程？）

**更新1：**

我已经根据**davidXYZ**答案更新了我的代码（有两个更改）：

（单击按钮后执行的操作）

```
if (item.equals(button)) {

    glassPane.setVisible(true);

        new Thread(new Runnable(){
            public void run(){
                someTimeConsumingMethod(); // 1st change: running the someTimeConsumingMethod in new Thread
                                           //             instead of setting glassPane to visible
            }
        }).start();

    // 2nd change: moved glassPane.setVisible(false); inside the someTimeConsumingMethod(); (placed at the end of it).

} 
```

第一个更改的要点是，在我的 GUI 线程中运行 someTimeConsumingMethod 之前，在新线程中设置 glassPane 可见在 someTimeConsumingMethod 完成后会显示 glassPane（仔细检查）。

现在它工作正常，谢谢你的所有答案。我一定会检查您提供的所有链接以真正理解线程！

**UPDATE2：** 更多信息：someTimeConsumingMethod(); 在我的应用程序中，正在根据 XML 数据准备新的 Swing 组件（从 JButtons 和 JLabels 构建的卡片，在需要的地方很少有 JPanel，并将它们添加到正确的位置）。

~~**UPDATE3：**~~ 我正在尝试使用 SwingWorker 的 invokeLater 方法使其工作。现在看起来像这样：

（单击按钮后执行的操作）

```
if (item.equals(button)) {

    glassPane.setVisible(true);

    SwingUtilities.invokeLater(new Runnable() {
        @Override
        public void run() { 
            someTimeConsumingMethod();
            glassPane.setVisible(false);
        }
    });

} 
```

它的效果不如**UPDATE1**中的代码好（但仍然有效）。问题是：

*   glassPane 加载时没有 .gif 动画（文件在自定义 glassPane 类中设置 - 它适用于**UPDATE1**代码）

*   “工作”过程结束时有一点延迟 - 第一个光标变为正常（来自 WAIT_CURSOR），并且在很短的时间后 glassPane 消失。光标在激活/停用时由自定义 glassPane 类更改（使用新线程方式无延迟）。

使用 SwingWorker 的 invokeLater 方法是否正确？

**编辑：**我的错误，我将 SwingWorker 与 SwingUtilities.invokeLater() 混淆了。我猜图像问题是由于 someTimeCONsumingMethod 启动时 GUI 冻结所致。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T17:30:21.503

> 在显示结果之前，GUI 会冻结片刻。删除该循环中的最后一行 (glassPane.setVisible(false);) 会导致在方法完成后显示 glassPane（当 GUI 解冻时）。

这是一个常见的问题`Event Dispath Thread`，当所有事件都在一瞬间`EDT`刷新到时，方法中的所有内容都可以在一瞬间完成，`Swing GUI``if (item.equals(button)) {`

但是你的描述说你在 Swing 中遇到了 Concurency 问题，一些代码阻塞 EDT，这是一个小的延迟，例如`Thread.sleep(int`）可能会导致这个问题，不要这样做，或者将代码块重定向到 Backgroung taks

> 有没有一种简单的方法可以在 GUI 冻结之前显示 glassPane，或者我需要在这里使用一些高级知识？（线程？）

这个问题是预订示例为什么`SwingWorker`存在，或者更简单的方法是`Runnable#Thread`

*   在`SwingWorker`相当保证输出将在 EDT 上实现的方法

*   Swing GUI 的任何输出`Runnable#Thread`都应包含在`invokeLater()`

最简单的步骤`Jbuttons Action`可能是

*   显示`GlassPane`

*   启动后台任务`SwingWorker`（确保监听`PropertyChangeListener`）或调用`Runnable#Thread`

*   在这一刻`ActionListener`执行完成其余代码被重定向到Backgroung taks

*   如果任务结束，则隐藏`GlassPane`

*   `setVisible`通过包装来创建简单的 void `invokeLater()`for`Runnable#Thread`

*   在您使用的情况下，您`SwingWorker`可以隐藏`GlassPane`正确的事件，`PropertyChangeListener`或者您可以使用任何（单独的）无效来隐藏`GlassPane`

[@camickr 的 GlassPane 的](http://tips4java.wordpress.com/?s=glasspane)最佳代码，或者我[基于此代码的问题](https://stackoverflow.com/q/8715807/714968)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T17:29:43.610

您正在使用耗时的工作阻塞 EDT（事件调度线程，处理所有 UI 事件的单个线程）。

2个解决方案：

1.  将调用包装到: `someTimeConsumingMethod();glassPane.setVisible(false);`in `SwingUtilities.invokeLater()`，这将允许框架再次重新绘制自身。但是，这仍然会冻结您的 GUI。

2.  将您的移动`someTimeConsumingMethod()`到一个[`SwingWorker`](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingWorker.html)（这是推荐的选项）。这将防止您的 GUI 冻结。

阅读 SwingWorker 的 javadoc 以更好地了解发生了什么以及如何使用它。您还可以在本教程中学到很多[关于 Swing 和多线程的知识](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T16:45:47.763

```
 JButton startB = new JButton("Start the big operation!");
    startB.addActionListener(new ActionListener() {
      public void actionPerformed(java.awt.event.ActionEvent A) {
        // manually control the 1.2/1.3 bug work-around
        glass.setNeedToRedispatch(false);
        glass.setVisible(true);
        startTimer();
      }
    }); 
```

这里使用的 glasspane 是 FixedGlassPane 玻璃；

参考：[http ://www.java2s.com/Code/Java/Swing-JFC/Showhowaglasspanecanbeusedtoblockmouseandkeyevents.htm](http://www.java2s.com/Code/Java/Swing-JFC/Showhowaglasspanecanbeusedtoblockmouseandkeyevents.htm)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T18:13:22.367

纪尧姆是对的。当您在主线程上时，每一行都将在下一行之前完成。你肯定需要另一个线程。

解决您的问题的一种简单方法是在另一个线程（普通线程或 Swing 线程 - 都可以正常工作）中分离玻璃窗格的显示。

```
if (item.equals(button)) {
    new Thread(new Runnable(){
        public void run(){
            glassPane.setVisible(true);
        }
    }).start();
    someTimeConsumingMethod();
    glassPane.setVisible(false);
} 
```

这样，在主线程上运行的`setvisible(true)`while会阻塞不同的线程。`someTimeConsumingMethod()`完成后，玻璃板将消失。匿名线程到达`run`方法的末尾并停止。

# php - 如何修复此代码以在上传后显示正确的消息？

> ID：12606131
> 
> 赞同：0
> 
> 时间：2012-09-26T16:19:01.703
> 
> 标签：php, javascript, jquery

我在下面有这段代码，它检查文件是否上传成功、不成功或取消：

```
 if (success === 1){ 
    result = '<span class="imagemsg'+imagecounter+'">The file was uploaded successfully</span><br/><br/>';       
    $('.listImage').eq(window.lastUploadImageIndex).append('<div>' + htmlEncode(imagefilename) + '<button type="button" class="deletefileimage" image_file_name="' + imagefilename + '">Remove</button><br/><hr/></div>');  
    displayInfo = replaceForm;       
  } 
  else if (success === 2){ 
    result = '<span class="imagemsg'+imagecounter+'"> The file upload was canceled</span><br/><br/>'; 
    displayInfo = updateForm;     
  } 
  else { 
    result = '<span class="imagemsg'+imagecounter+'">There was an error during file upload</span><br/><br/>'; 
    displayInfo = updateForm;   
  } 
```

但我有一个 JavaScript 函数，它在 PHP 脚本中输出以下内容：

```
<script language="javascript" type="text/javascript"> 
    window.top.stopImageUpload(<?php echo $result ? 1 : 2; ?>, '<?php echo $_FILES['fileImage']['name'] ?>'); 
</script> 
```

现在，如果文件上传成功，则会显示正确的消息，如果取消，则会出现正确的消息，但问题是如果文件上传失败，则显示取消消息，而不是上传消息时的错误。我试图改变上面的代码的一部分，所以它会是这样的：

`...<?php echo $result ? 1 : 2 : 3 ?>..`

但这给了我一个错误。我的问题是如何更改上述代码，以便在文件未成功上传时输出正确的消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T18:10:34.683

错误是什么？

您的三元语法不正确：[http ://davidwalsh.name/php-shorthand-if-else-ternary-operators](http://davidwalsh.name/php-shorthand-if-else-ternary-operators)

正确的语法是：

```
echo ( <condition> ) ? <event if true> : <event if false>; 
```

你有额外的活动！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-07T07:08:43.400

```
$.ajax(
{ 
url: _spPageContextInfo.siteAbsoluteUrl + "/_api/Web/Lists/getByTitle('" + libTitle + "')/Items",
type: "GET",
contentType: "application/json;odata=verbose",

  headers: {
    'Accept': 'application/json;odata=verbose',
    'X-RequestDigest': $("#__REQUESTDIGEST").val()
  },
    success: fetchSuccess,
    error: onFailure
  });

function fetchSuccess(r) {
  // How to display the count of "r"
  console.log(r.length);

}

function onFailure(r) {
  alert("Error + r + working");
} 
```

# sql-server-2008 - 如何将子报表移动到它们自己的文件夹中？

> ID：12606134
> 
> 赞同：1
> 
> 时间：2012-09-26T16:19:09.753
> 
> 标签：sql-server-2008, reporting-services

SSSRS 2008 R2

我的 BIDS 项目有一些报告，但这些报告引用了大量的子报告。如何将所有子报表移动到它们自己的文件夹中并在我的主报表正文中引用它们？

我尝试创建一个文件夹并手动将子报表移动到其中。那没有用。BIDS 找不到子报表，并且该文件夹没有出现在项目结构中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T22:03:56.277

这里的问题是 BIDS 期望所有子报表与主报表位于同一文件夹中，您不能使用路径或子文件夹。

但是，当部署到报表服务器时，相对路径（例如 /SomeFolder/MyReport）将起作用，因此您可以更改主报告以指向任何子文件夹或相对路径中的报告，这将在部署后起作用。但是，在 BIDS 中运行主报表时，您将无法在主报表中看到子报表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-20T19:55:14.853

在 Visual Studio 中开发时，不能使用文件夹路径引用。如果这样做，您将收到一条错误消息“<em>找不到文件路径的一部分”。

对于开发，您需要确保子报表在您的项目中，然后使用下拉菜单选择报表。开发完成后，**需要更改主报表以引用正确的文件夹**( `/Sub reports/myReport.rdl`)，并且**需要将子报表部署到正确的文件夹**( `/Sub reports`)。这意味着将有 2 个子报表副本——1 个在您的 MainReport 项目中，1 个在您的 SubReport 项目中。有两个副本要保持最新并不理想，但它可以工作。

此外，如果不包括第一个正斜杠 ( `Sub reports/myReport.rdl`)，则您的参考是在子文件夹中查找。以正斜杠开头 ( `/Sub reports/myReport.rdl`)，您的参考路径从 SSRS Web 门户的根文件夹开始。

[![在此处输入图像描述](../Images/18eb2666acabf70744fabcfb77d1f844.png)](https://i.stack.imgur.com/YuChp.jpg)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-17T13:35:10.287

万一有人在几年后发现这个。我当前的解决方案是使用报表生成器打开报表。在该界面中，您可以将子报表设置为服务器上的相对路径以及与主父报表不同的文件夹路径。您似乎无法通过 SSDT 或 BIDS 进行操作。

然后，您可以将主报告下载到 SSDT 并将其带回您的项目中。

要运行报告，您必须在项目 Bin\Debug 文件夹中设置报告管理器用于报告的相同文件夹结构。如果您不这样做，则会错误地要求该文件夹结构出现在那里。

那个黑客对我有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-30T01:47:51.600

通过创建指向您的项目文件夹\bin\debug\full\subreport\path 的符号链接，我找到了一个不错的解决方法

详细信息和屏幕截图在这里：[http ://www.andrewmosey.com/subreport-in-a-sub-folder-working-in-visual-studio-and-ssrs](http://www.andrewmosey.com/subreport-in-a-sub-folder-working-in-visual-studio-and-ssrs)

# actionscript-3 - Flash中的播放/暂停按钮

> ID：12606137
> 
> 赞同：2
> 
> 时间：2012-09-26T16:19:27.380
> 
> 标签：actionscript-3, flash-cs5

//我怎样才能在影片剪辑的末尾返回暂停按钮的符号，它回到播放按钮？

```
import flash.display.MovieClip;

stop();
play1.addEventListener(MouseEvent.CLICK,playbutt);

function playbutt(event:MouseEvent):void{
    MovieClip(root).play();
    MovieClip(root).am.play();
    gotoAndStop(2);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T22:46:32.117

您的问题不是很清楚，但据我所知，您需要为您播放的任何内容添加一个侦听器，然后执行 gotoAndStop(1); 然而，你如何做到这一点取决于你正在玩什么，以及什么是最有效的听它完成的方式。

如果您正在播放音乐或视频，通常可以使用 Object.COMPLETE。

# javascript - 我将如何自定义传单弹出窗口的外观和感觉？

> ID：12606141
> 
> 赞同：30
> 
> 时间：2012-09-26T16:19:42.280
> 
> 标签：javascript, leaflet

我正在考虑自定义使用传单构建的地图，并且我想自定义弹出窗口（L.popup）。

我能想到的唯一方法是在我的新对话框中构建一个自定义弹出层，并在每次用户与标记交互时重新定位它，这样当用户拖动地图时弹出框保持对齐。

有人知道这样做的任何替代方案或现有方法吗？

谢谢

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-10-05T23:48:01.980

您应该使用 css 自定义外观。以下选择器可能很有趣：

```
.leaflet-popup-content-wrapper {
}

.leaflet-popup-content-wrapper .leaflet-popup-content {
}

.leaflet-popup-tip-container {
} 
```

根据您的浏览器，您可以使用[Firebug](http://getfirebug.com/) for Firefox 等工具或 Chrome/Safari 中的内置开发人员工具（右键单击页面上的任意位置并单击 Inspect element，或使用[快捷方式](https://developers.google.com/chrome-developer-tools/docs/shortcuts)）来检查弹出窗口并找到其他 css 选择器您可能需要修改。

要扩展它的功能，您应该从查看[弹出源代码](https://github.com/Leaflet/Leaflet/blob/863cf744616cba2d3cf4e8b28c825bcea1edd2e4/src/layer/Popup.js)开始。查看其他 Leaflet 组件的来源，直到您对正在发生的事情有所了解。通过以下方式扩展 Popup 类，然后更改您想要的任何内容：

```
L.CustomPopup = L.Popup.extend({
  // You changes here
}); 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2016-11-05T15:34:51.083

自定义弹出窗口的另一种方法是为弹出窗口创建自定义 css 类，例如：

```
<style>
/* css to customize Leaflet default styles  */
.popupCustom .leaflet-popup-tip,
.popupCustom .leaflet-popup-content-wrapper {
    background: #e0e0e0;
    color: #234c5e;
}
</style> 
```

然后在您的地图中，`div`您可以使用该方法设置标记自定义弹出窗口，并在您提到的地方`bindPopup`传递一个**customOptions**`css class name`对象：

```
// create popup contents
var customPopup = "<b>My office</b><br/><img src='http://netdna.webdesignerdepot.com/uploads/2014/05/workspace_06_previo.jpg' alt='maptime logo gif' width='150px'/>";

// specify popup options 
var customOptions =
    {
    'maxWidth': '400',
    'width': '200',
    'className' : 'popupCustom'
    }

var marker = L.marker([lat, lng], {icon: myIcon}).addTo(map);

// bind the custom popup 
marker.bindPopup(customPopup,customOptions); 
```

希望能帮助到你。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-01-27T18:08:26.327

mapbox 上有一个使用leaflet.js 的示例。该示例显示了如何[在传单中使用自定义工具提示](https://www.mapbox.com/mapbox.js/example/v1.0.0/custom-popup-style/)。

```
<style>
/*
 * These CSS rules affect the tooltips within maps with the custom-popup
 * class. See the full CSS for all customizable options:
 * https://github.com/mapbox/mapbox.js/blob/001754177f3985c0e6b4a26e3c869b0c66162c99/theme/style.css#L321-L366
*/
.custom-popup .leaflet-popup-content-wrapper {
  background:#2c3e50;
  color:#fff;
  font-size:16px;
  line-height:24px;
  }
.custom-popup .leaflet-popup-content-wrapper a {
  color:rgba(255,255,255,0.5);
  }
.custom-popup .leaflet-popup-tip-container {
  width:30px;
  height:15px;
  }
.custom-popup .leaflet-popup-tip {
  border-left:15px solid transparent;
  border-right:15px solid transparent;
  border-top:15px solid #2c3e50;
  }
</style>

<div class='custom-popup' id='map'></div> 
```

# javascript - 将父页面中的 css 样式应用于同一域的 iframe

> ID：12606145
> 
> 赞同：0
> 
> 时间：2012-09-26T16:20:07.600
> 
> 标签：javascript, jquery, css, html, iframe

我正在尝试将样式表应用于来自父级的 iframe 的内容 - 是的，我知道过去曾就同样的想法提出过几​​个问题，但我在这里在同一个域内工作，我已经尝试过这个网站上几乎所有的解决方案都没有奏效。这是我得到的：

```
<html>
<title>Untitled</title>
<head>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>

<script type="text/javascript" media="screen">

    var cssLink = document.createElement("link") 
    cssLink.href = "http://domain.extension/style.css"; 
    cssLink .rel = "stylesheet"; 
    cssLink .type = "text/css"; 
    frames['#window'].document.body.appendChild(cssLink);

</script>

<style type="text/css" media="screen">

body {
    margin: 0px;
    padding: 0px;
    height: 100%;
}

iframe#window {
    padding: 0px;
    border: 0;
    width: 100%;
    height: 100%
}

</style>
</head>
<body>
    <iframe name="window" id="window" sandbox="allow-forms allow-scripts" src="http://domain.extension/example"/>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T16:32:22.630

据我所知，由于沙盒，这是不可能的。为什么不使用 AJAX？（因为这是在同一个域上。）

要实现这一点，您可以创建一个`<div id="frame"></div>`元素并使用该`.load`函数将页面加载到 div 中，如下所示：

```
$('#frame').load('/somepage.html'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T16:52:56.497

在这两个脚本（框架中的一个和主窗口中的一个）上，您需要将 document.domain 设置为您的域。这需要在您的 $(document).ready() 等之前。

```
document.domain = "ra.gs";
var cssLink = $("<link/>",{
    href: "http://static.ra.gs/ttnnmnd/HFnmays5q/style.css",
    rel: "stylesheet",
    type: "text/css"
});

var iframeBody = $(window.document.frames["window"].window.document).contents().find("body");

iframeBody.prepend(cssLink); 
```

# javascript - 如何检查表单是否完成？

> ID：12606147
> 
> 赞同：-2
> 
> 时间：2012-09-26T16:20:19.173
> 
> 标签：javascript, jquery, html

我想根据当前表单是否正确填写了所有必填字段来禁用/启用导航。是否有一个属性或一些 JQuery 函数可以调用，它会告诉我表单是否完整？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T16:28:12.320

还值得一看 jquery 验证插件[http://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T16:23:07.977

要根据当今的标准尽可能广泛地回答这个问题，您可能需要研究[HTML5 表单验证](http://www.the-art-of-web.com/html/html5-form-validation/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T10:14:23.113

知道了谢谢。

valid() 函数是我正在寻找的。我一直在玩 JQuery Validation 插件，但没有看到这个关键功能。

[如何使用 jQuery Validation Plugin 以编程方式检查表单是否有效](https://stackoverflow.com/questions/6658937/how-to-check-if-a-form-is-valid-programatically-using-jquery-validation-plugin)

# java - 使用 Mockitos 传递参数化输入

> ID：12606148
> 
> 赞同：29
> 
> 时间：2012-09-26T16:20:23.527
> 
> 标签：java, unit-testing, mockito

我正在使用 Mockito 进行单元测试。我想知道是否可以像在 Junit 测试中一样发送参数化输入参数，
例如

```
@InjectMocks
MockClass mockClass = new MockClass();

@Test
public void mockTestMethod()
    {
    mockClass.testMethod(stringInput); 
// here I want to pass a list of String inputs 
// this is possible in Junit through Parameterized.class.. 
// wondering if its can be done in Mockito
    } 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-09-26T16:41:42.100

在 JUnit 中，[参数化测试](https://github.com/junit-team/junit/wiki/Parameterized-tests)使用[一个特殊](https://github.com/junit-team/junit/blob/master/src/main/java/org/junit/runners/Parameterized.java)的运行器来确保测试被多次实例化，因此每个测试方法都会被多次调用。Mockito 是一种用于编写特定单元测试的工具，因此没有内置的能力可以以不同的 Mockito 期望多次运行相同的测试。

如果您希望更改测试条件，最好的办法是执行以下操作之一：

*   使用 JUnit 参数化您的测试，并为您想要的模拟输入提供一个参数；
*   在测试中运行不同参数的循环，不幸的是，这避免了“每个方法测试一件事”的理念
*   提取一个实际执行测试的方法，并`@Test`为您想要的每个模拟创建一个新方法。

请注意，没有禁止使用模拟对象作为`@Parameterized`测试参数。如果您希望基于模拟进行参数化，您可以这样做，可能会创建模拟并在测试的静态方法中设置期望。

* * *

**关于跑步者的注意事项**：此[参数化测试跑步者](https://github.com/junit-team/junit/blob/master/src/main/java/org/junit/runners/Parameterized.java)与 Mockito 的[MockitoJUnitRunner](http://site.mockito.org/mockito/docs/current/org/mockito/runners/MockitoJUnitRunner.html)冲突：每个测试类只能有一个跑步者。如果您同时使用它们，您将需要切换到[@Before 和 @After 方法](https://stackoverflow.com/q/10806345/1426891)或[Mockito JUnit4 规则来进行设置。](http://site.mockito.org/mockito/docs/current/org/mockito/junit/MockitoRule.html)

例如，从[一个不同的答案](https://stackoverflow.com/q/40793464/1426891)压缩而来，该答案解释了更多关于参数化运行器与 JUnit 规则的信息，并从[JUnit4 Parameterized Test](https://github.com/junit-team/junit4/wiki/Parameterized-tests) doc page 和[MockitoRule](https://static.javadoc.io/org.mockito/mockito-core/2.2.22/org/mockito/junit/MockitoRule.html) doc page 提升：

```
@RunWith(Parameterized.class)
public class YourComponentTest {
    @Rule public MockitoRule rule = MockitoJUnit.rule();
    @Mock YourDep mockYourDep;

    @Parameters public static Collection<Object[]> data() { /* Return the values */ }

    public YourComponentTest(Parameter parameter) { /* Save the parameter to a field */ }

    @Test public void test() { /* Use the field value in assertions */ }
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2017-01-09T14:30:02.300

如果您遇到不可用的较旧版本的 mockito `MockitoRule`，另一种可能性是使用以下命令显式初始化 mock `MockitoAnnotations.initMocks`：

```
@RunWith(Parameterized.class)
public class YourComponentTest {        
    @Mock YourDep mockYourDep;

    @Parameter
    public Parameter parameter;

    @Parameters public static Collection<Object[]> data() { /* Return the values */ }

    @Before
    public void init() {
        MockitoAnnotations.initMocks(this);
    }

    @Test public void test() { /* Use the field value in assertions */ }
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-07-20T05:29:33.390

您可以使用 JUnitParamsRunner。这是我的做法：

```
import junitparams.JUnitParamsRunner;
import junitparams.Parameters;
import org.junit.Before;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.mockito.InjectMocks;
import org.mockito.Mock;

import java.util.Arrays;

import static org.hamcrest.CoreMatchers.is;
import static org.hamcrest.MatcherAssert.assertThat;
import static org.mockito.Mockito.when;
import static org.mockito.MockitoAnnotations.initMocks;

@RunWith(value = JUnitParamsRunner.class)
public class ParameterizedMockitoTest {

    @InjectMocks
    private SomeService someService;
    @Mock
    private SomeOtherService someOtherService;

    @Before
    public void setup() {
        initMocks(this);
    }

    @Test
    @Parameters(method = "getParameters")
    public void testWithParameters(Boolean parameter, Boolean expected) throws Exception {
        when(someOtherService.getSomething()).thenReturn(new Something());
        Boolean testObject = someService.getTestObject(parameter);
        assertThat(testObject, is(expected));
    }

    @Test
    public void testSomeBasicStuffWithoutParameters() {
        int i = 0;
        assertThat(i, is(0));
    }

    public Iterable getParameters() {
        return Arrays.asList(new Object[][]{
                {Boolean.TRUE, Boolean.TRUE},
                {Boolean.FALSE, Boolean.FALSE},
        });
    }
} 
```

# wpf - 通知不适用于 ObservableCollection

> ID：12606150
> 
> 赞同：0
> 
> 时间：2012-09-26T16:20:26.193
> 
> 标签：wpf, data-binding, observablecollection

我有一个具有 ObservableCollection 的 2 个属性的类：

```
Public ObservableCollection<User> Users
     { get {return this._users;}}

Public ObservableCollection<User> Admins
     { get {return new ObservableCollection<User>(Users.Where(u => u.type == 1));}} 
```

问题是当我更改用户时，会通知属性用户而不是管理员。有什么建议么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T16:27:28.023

如果您在视图中绑定到 Admins，它将获得新的 ObservableCollection 用户的副本。

如果您随后在视图模型中编写 Admins.Add(new User()) 代码，它将在与绑定的实例不同的实例上运行。

您应该更改代码，使其使用单个实例（而不是每次都重新创建它）。

**编辑（添加示例）：**

```
 private ObservableCollection<User> _admins = new ObservableCollection<User>();
    public ObservableCollection<User> Admins
    {
         get
         {
             _admins.Clear();
             Users.ForEach(p => { if (p.type == 1) { _admins.Add(p); } });
             return _admins;
         }
    } 
```

注意 ObservableCollection 的*实例*不会改变（这是解决方案的关键）。我只是清除它并将用户重新加载到集合中。

# ipad - z-index 在 iPad 和 Google Chrome 22 上未正确呈现

> ID：12606155
> 
> 赞同：4
> 
> 时间：2012-09-26T16:20:43.793
> 
> 标签：ipad, google-chrome, z-index

我附上了两张图片，第一张显示了我正在使用的 web 应用程序的“桌面”，一些你看到的打开对话框的图标`<div/>`包含一个`<iframe/>`，但是在普通电脑上一切正常，在 iPad 上似乎某些元素的 z-index 存在问题，如第二张图所示。

里面有数字的红色小圆定义如下：

```
.countComunicazioni {
    position: relative;
    background: url(/images/admin/menu_sgs/counter.gif) no-repeat center center;
    height: 35px;
    width: 35px;
    color: #FFF;
    top: -105px;
    left: 120px;
    z-index: 0;
    font-weight: bold;
    display: none;
}
.countComunicazioni p {
    margin-top: -5px;
    padding-top: 10px;
} 
```

标记是一个`<div class="countComunicazioni"/>`标签和一个`<p/>`标签里面。

我还注意到现在这个问题也出现在 Google Chrome V22 中，红色圆圈中的数字总是在顶部，即使它们的 z-index == 0 并且对话框的 z-index > 1000。

根据此错误报告（[http://code.google.com/p/chromium/issues/detail?id=144518](http://code.google.com/p/chromium/issues/detail?id=144518)），更改似乎是有意的，即使我敢打赌它会破坏许多布局，不仅我们的。

此问题在以前版本的 Google Chrome 中不存在，在 Firefox V15 或 Internet Explorer V9 中也不存在，所有内容都呈现问题。

如何解决这个问题？我不是 CSS 专家，所以我必须承认，到目前为止，我几乎没有尝试过……而且，谁是“正确的”？是我们的标记不正确，还是问题出在谷歌浏览器新的渲染策略上？

![网络应用桌面](../Images/366597ad430573964792868aa6594c4e.png)

![对话框打开](../Images/d9edbbf90534609ff48285fec1ad9e59.png)

**编辑**

看来我已经能够解决两张图片中显示的问题：从我的网络应用程序生成的所有对话框都放在一个`<div/>`放在`position:fixed`身体最顶部的 a 中，现在我试图将 div 移动到最底部页面，布局现在看起来是正确的。

还有一个问题：当打开一个模态对话框时，应该在对话框和下面的内容之间创建的不透明层实际上是在它上面创建的，见新的截图。

![带有错误不透明层的模态对话框](../Images/7b63b253317dc1ca5663e06022a0ed16.png)

如何解决这个问题？它需要修改我们的javascript还是jquery ui本身的问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T01:13:28.687

刚刚发现自己 chrome 22+ 处理 z-index 的方式已经改变。在这里查看这个我没有在这里写的很棒的解释......

[http://updates.html5rocks.com/2012/09/Stacking-Changes-Coming-to-position-fixed-elements](http://updates.html5rocks.com/2012/09/Stacking-Changes-Coming-to-position-fixed-elements)

基本上我理解的方式是具有

```
position: fixed 
```

现在计算他们自己的 z-index 层，所以你必须相应地调整你的页面以适应。

希望有帮助！

# backbone.js - 骨干模型中的“集合”属性是什么意思？

> ID：12606157
> 
> 赞同：1
> 
> 时间：2012-09-26T16:20:50.237
> 
> 标签：backbone.js

Backbone.Model 对象维护一个“集合”属性。在 Backbone 源代码中，我们有：

```
var Model = Backbone.Model = function(attributes, options) {
   ...    
   if (options && options.collection) this.collection = options.collection;
   ...
} 
```

[带注释](http://documentcloud.github.com/backbone/docs/backbone.html)的来源对此只字未提，[文档](http://backbonejs.org/#Model)仅引用了函数。我想它主要在删除模型时使用：集合删除了这个模型。

但是如果模型属于许多集合呢？使用/覆盖此集合属性是否存在危险？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T16:31:54.550

它在两个地方使用（在带注释的源代码中往下看）。

*   正如您所注意到的，它在模型被销毁时用于从集合中删除模型。

> 乐观地从其集合中删除模型，如果它有一个。

*   在该`url`函数中，如果集合存在一个 URL 方案，它会使用该方案为模型构造一个 URL。

> 如果您使用 Backbone 的 restful 方法，请覆盖它以更改将被调用的端点。

# cocoa-touch - 检查 dispatch_queue_t 是否相等

> ID：12606158
> 
> 赞同：3
> 
> 时间：2012-09-26T16:20:51.807
> 
> 标签：cocoa-touch, cocoa, grand-central-dispatch, nsthread

如何检查 dispatch_queue_t 变量之间的相等性？

```
dispatch_queue_t currentQueue = dispatch_get_current_queue();
dispatch_queue_t mainQueue = dispatch_get_main_queue();
if (currentQueue == mainQueue) {

} 
```

来自文档：

```
typedef struct dispatch_queue_s *dispatch_queue_t; 
```

我不确定，但这是否意味着它是一个指向 dispatch_queue_s 结构的指针？

由于我无法检查指针的相等性，我不确定如何检查 dispatch_queue_t 是否与另一个相同？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-04-22T13:15:10.520

由于**dispatch_get_current_queue()**已被弃用，我们可以通过标签（或@jkh 建议的细节）比较当前队列和您的队列

用于标签

```
dispatch_queue_get_label(dispatch_queue_t queue); 
```

并通过 DISPATCH_CURRENT_QUEUE_LABEL 获取当前队列的标签

具体来说：

```
dispatch_queue_get_specific(dispatch_queue_t queue, const void *key); 
```

让你排队特定和

```
dispatch_get_specific(const void *key); 
```

对于当前

需要为您的队列设置标签和特定的一个或两个。例如，当您创建它时

```
dispatch_queue_create(const char *label, dispatch_queue_attr_t attr); 
```

或针对特定使用设置器

```
dispatch_queue_set_specific(dispatch_queue_t queue, const void *key,
    void *context, dispatch_function_t destructor); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T02:00:32.527

答案的第一部分：你想做什么？为什么需要比较队列？如果您需要做的只是用一些特定的元数据“标记”队列，请考虑使用 dispatch_queue_{set, get}_specific() 代替。

答案的第二部分：不要将 dispatch_get_current_queue() 用于任何事情。它仅用于调试目的，一直不鼓励使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T18:18:16.927

这取决于您所在的队列。在这种特殊情况下使用：

```
if ([NSThread isMainThread]) {} 
```

通常，您可以使用`dispatch_get_current_queue()`来测试您所在的队列。在这种情况下，您可以使用`==`运算符来执行此操作。引用 Apple 并发编程指南中的 Dispatch Queues 页面：

> 使用 dispatch_get_current_queue 函数进行调试或测试当前队列的身份。从块对象内部调用此函数会返回块被提交到的队列（并且它现在可能正在运行）。从块外部调用此函数会返回应用程序的默认并发队列。

# java - 如何以编程方式获取 roo shell 访问权限？

> ID：12606160
> 
> 赞同：2
> 
> 时间：2012-09-26T16:20:57.417
> 
> 标签：java, spring-roo, add-on

我正在尝试创建一个 roo 附加组件，从而创建一些自定义命令。有没有办法检查用户是否填写了他/她正在输入的命令的选项之一？例如，用户正在输入命令：

```
say hello --name MyName --album SomeAlbum --song 
```

现在，就在他应该输入一首歌并按下 TAB 键时，我想检查他是否已经介绍了一张专辑。有没有办法读取他/她到目前为止输入的缓冲区字符串？

我想我需要以某种方式访问​​当前的 shell 实例，但到目前为止我找不到任何方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T14:39:28.897

在`MethodTarget`该类中有一个名为 的方法`getRemainingBuffer()`，它返回控制台中输入的当前行的内容。这种类型的对象是`getAllPossibleValues`需要在转换器中实现的方法的参数之一，这是自定义类型的命令所需要的。

好像就是这样。

# android - 使用 keytool 签署我的应用程序

> ID：12606165
> 
> 赞同：-1
> 
> 时间：2012-09-26T16:21:19.910
> 
> 标签：android, facebook, keytool

好吧，我也被困在这一步

> $ keytool -exportcert -alias androiddebugkey -keystore ~/.android/debug.keystore | openssl sha1 -二进制 | openssl base64 输入密钥库密码：android

请任何人解释一下

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T00:48:17.240

在我尝试使用 cmd 之后，我得到了它，它首先通过 cd \path\ 在您的系统中找到 keytool，然后按原样写下这一行

```
$ keytool -exportcert -alias androiddebugkey -keystore ~/.android/debug.keystore | openssl sha1 -binary | openssl base64 
```

这意味着 ~/.android/debug.keystore 密钥库从 eclips 导出的路径

并确保生成的 hashkey 确实正确，cmd 应该询问您用于生成密钥库的密码

# database - 尝试保存到数据库时出现数据库错误 InValidOperationException

> ID：12606166
> 
> 赞同：0
> 
> 时间：2012-09-26T16:21:19.763
> 
> 标签：database, asp.net-mvc-3, entity-framework

当我尝试保存到数据库时出现此错误。在控制器中，我有 Edit HttpPut

```
 public ActionResult EditSubject(Models.xxxx model)
 {
    //Database Model Class    
    SubjectDB subjectdb = new SubjectDB();
    // Name of DB Access in Web.config
    BeaconDBEntities db = new BeaconDBEntities();

    if (ModelState.IsValid)
    {
        subjectdb.SubjectId = model.SubjectId;

        db.SubjectDBs.Add(subjectdb);   --> Pops InvalidOperationsException
        db.SaveChanges();
    } 
```

在 Models 文件夹中是数据库表的模型

主题数据库.cs

```
 namespace xxx.Models
    {
       public class SubjectDB
       {
          public string SubjectId { get; set;}
       }
       public class BeaconDBEntities: DbContext
       {
           public DbSet<SubjectDB> SubjectDBs { get; set; }
       }
    } 
```

Web.config 是数据库的连接字符串

```
 <coneectionStrings>
       <add name="BeaconDBEntities" ...............
    </connectionStrings> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T17:01:03.650

当您编辑数据时，我认为您在使用实体框架时不需要编写这样的代码，它位于代码下方

```
db.SubjecDBs.Add(subjectdb);   
        db.SaveChanges(); 
```

首先，当您更新数据时，首先使用您的 id 获取数据，如下所示，您的创建对象是您的实体类。您的实体类是您的表格，如下所示

```
SubjecDBs objsub=new SubjecDBs();

var data =db.db.SubjecDBs.where(x=>x.SubjectID==ID).ToList(); 
```

然后你匹配你不会更新的数据，如下所示

```
objsub.SubjecName=data[0].SubjecName 
```

并且您匹配您不会更新的字段，然后您在下面这样写代码

```
db.SaveChanges(); 
```

我想这会帮助你...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T16:25:14.400

我看到的第一件事是您的连接字符串名称“BeaconDBEntites”与您的 DbContext 继承的类名称“BeaconDBEntities”不匹配（您在单词 Entities 中缺少一个“i”）。尝试改变它，看看它是否能解决它。

# php - CodeIgniter - ci_sessions 迁移

> ID：12606167
> 
> 赞同：2
> 
> 时间：2012-09-26T16:21:24.747
> 
> 标签：php, codeigniter, migration

我想知道是否有人可以帮忙。

我刚刚开始使用 CodeIgniter 进行迁移，但我在试图弄清楚如何将 SQL 转换为迁移时遇到了麻烦。

有没有人可以为我将此 SQL 转换为迁移，以便我可以看到它是如何完成的。

我的SQL如下：

```
CREATE TABLE IF NOT EXISTS `ci_sessions` (
  `session_id` varchar(40) COLLATE utf8_bin NOT NULL DEFAULT '0',
  `ip_address` varchar(16) COLLATE utf8_bin NOT NULL DEFAULT '0',
  `user_agent` varchar(150) COLLATE utf8_bin NOT NULL,
  `last_activity` int(10) unsigned NOT NULL DEFAULT '0',
  `user_data` text COLLATE utf8_bin NOT NULL,
  PRIMARY KEY (`session_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T16:47:16.063

请在此处阅读文档：

[CodeIgniter 迁移](http://ellislab.com/codeigniter/user-guide/libraries/migration.html)

本质上，您将希望使用 CodeIgniter`dbforge`类来创建表。使用上面的代码：

```
 $this->dbforge->add_field(array(
        'session_id' => array(
            'type' => 'VARCHAR',
            'constraint' => '40'
        ),
        'ip_address' => array(
            'type' => 'VARCHAR',
            'constraint' => '16'
        ),
        'user_agent' => array(
            'type' => 'VARCHAR',
            'constraint' => '150'
        ),
        'last_activity' => array(
            'type' => 'INT',
            'constraint' => '10'
        ),
        'user_data' => array(
            'type' => 'TEXT'
        )
    ));

    $this->dbforge->add_key('session_id', TRUE);
    $this->dbforge->create_table('ci_sessions'); 
```

`dbforge`可以在此处找到有关课程的文档：

[ellislab.com/codeigniter/user-guide/database/forge.html](http://ellislab.com/codeigniter/user-guide/database/forge.html)

**注意：**不过，我不建议弄乱 CI Sessions 表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T22:25:51.287

如果您有一个大型 SQL 查询块，您知道它是“安全的”并且您想节省时间，您也可以简单地执行此操作（在我看来，这是基于表的复杂性和出错机会的判断调用将原始 SQL 转换为数组时 - 毕竟在迁移中，所有内容都是硬编码的，您不必担心 SQL 注入等的机会。）

```
 $sql = "CREATE TABLE IF NOT EXISTS  `ci_sessions` (
    session_id varchar(40) DEFAULT '0' NOT NULL,
    ip_address varchar(45) DEFAULT '0' NOT NULL,
    user_agent varchar(120) NOT NULL,
    last_activity int(10) unsigned DEFAULT 0 NOT NULL,
    user_data text NOT NULL,
    PRIMARY KEY (session_id),
    KEY `last_activity_idx` (`last_activity`)
)";
    $this->db->query($sql); 
```

但是我认为我不建议将会话表作为迁移加载，因为如果`$config['sess_use_database']`在`config/config.php`is 中`true`，当您转到迁移 URL 时它会失败，因为 Codeigniter 将首先尝试在数据库中为您创建一个会话条目浏览器和数据库表还不存在..

```
A Database Error Occurred
Error Number: 1146
Table 'characterhub.ci_sessions' doesn't exist 
```

因此，要使其正常工作，您或执行迁移的任何人必须先设置`sess_use_database`为`false`，然后运行迁移，然后再将其更改回`true`。

# servicestack - ServiceStack.OrmLite.Oracle - 日期部分（世纪部分）显示错误

> ID：12606170
> 
> 赞同：1
> 
> 时间：2012-09-26T16:21:39.783
> 
> 标签：servicestack, ormlite-servicestack

使用

ServiceStack.OrmLite.Oracle 版本 1.0.4637.7382

ServiceStack.OrmLite 版本 3.9.5

ServiceStack 版本 3.9.4

oracle 数据库有一列包含 2 位年份值。当我使用 IDbCommand 进行选择时，生成的对象列表带有错误的 4 位数年份值。20 世纪之前的任何数据值都以“20”前缀而不是“19”返回

示例：数据库中的日期 = 11/21/99

返回为 = 2099/11/21

假定为 = 1999/11/21 或 11/21/1999

希望清楚地指出问题，让我知道任何其他信息

# jquery - 如何覆盖对行的点击？

> ID：12606174
> 
> 赞同：1
> 
> 时间：2012-09-26T16:21:46.380
> 
> 标签：jquery, preventdefault

我有一个表，每一行都分配了一个唯一的 ID，因此我可以单击该行，用 jquery 抓取它并编辑该行的数据。为了方便起见，我喜欢单击整行，它使用户更容易..

在最后一列中，我有一个 X，我希望能够单击它来删除该行。同样，它有一个唯一的 ID，所以我可以识别每一行。我的 jquery 看起来像这样..

```
 $('.delrow').click(function(e) {
    e.preventDefault();
    var id = $(this).attr('id');
    id = id.substr(3);
    if (confirm('Are you sure you want to delete this row?')) {
        $.ajax({
            url: "/rowdelete/?delid="+id,
            success: function(data) 
            {
                location.href="/";
            }
        });
    } else {
        return false;
    }   

}); 
```

这应该删除该行然后返回主页。它所做的是删除该行，然后继续进入我的编辑模块，其行 ID 为 null，因为行单击的默认操作就是这样做的。我认为此时 preventDefault 仅适用于表单操作，因此在这种情况下不起作用。如何覆盖默认的行单击操作？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T16:25:48.267

而不是`e.preventDefault()`，使用`e.stopPropagation()`. 简单的。

**编辑：**现在我没有用手机接听电话，我想我会再补充一点。停止传播可能会进一步产生不良影响。例如，如果您想向 中添加事件`$(window).click()`怎么办？停止传播后，如果用户单击`x`. IMO 更好的方法是这样的：

```
$('.row').click(function (event) {
    if ($(event.target).hasClass('delrow')) {
        return false;
    }
    // edit row
}); 
```

然后你可以将你的事件添加到`x`元素中。如果您愿意，也可以将您的事件放在 if 语句中......这是一个偏好问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T16:25:38.970

看起来您想阻止其他事件处理程序发生，所以您想要`event.stopImmediatePropagation()`或`event.stopPropagation()`。

[http://api.jquery.com/event.stopImmediatePropagation/](http://api.jquery.com/event.stopImmediatePropagation/)
[http://api.jquery.com/event.stopPropagation/](http://api.jquery.com/event.stopPropagation/)

此链接可能会澄清一点： [event.preventDefault() vs. return false](https://stackoverflow.com/questions/1357118/event-preventdefault-vs-return-false)

# powershell - 如何在一个命令中将“dir”用于不同的文件夹？

> ID：12606175
> 
> 赞同：2
> 
> 时间：2012-09-26T16:21:54.697
> 
> 标签：powershell, cmd, dir

任何想法如何在一个命令中将命令“dir”用于多个文件夹？

```
dir c:\A | c:\test\B 
```

不管用。我不擅长管...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T16:30:39.667

请改用`Get-ChildItem`cmdlet，或使用 DIR 并用逗号而不是空格分隔源。DIR 在 PowerShell 中的工作方式与在 DOS 窗口中的工作方式不同。

[http://technet.microsoft.com/en-us/library/ee176841.aspx](http://technet.microsoft.com/en-us/library/ee176841.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T16:25:21.930

`dir c:\A c:\test\B`应该管用。无需管道。

# asp.net - 在新窗口中下载pdf而不重定向

> ID：12606177
> 
> 赞同：0
> 
> 时间：2012-09-26T16:22:01.120
> 
> 标签：asp.net, pdf-generation, http-redirect

我有一个包含多个控件的 aspx 页面。当我单击此页面上的按钮时，我需要获取文本框和下拉列表的值并进行一些处理并将其传递到另一个 aspx 页面。第二个 aspx 将进行进一步处理并生成要下载的 pdf。我不希望用户被重定向到第二页。我只是希望 pdf 下载出现在新窗口中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T16:31:30.507

您需要设置`Content-Disposition`http头并直接返回pdf。

像这样：

```
Response.ContentType = "application/x-download";
Response.AddHeader("Content-Disposition", string.Format("attachment; filename=\"{0}\"", fileName));
Response.WriteFile(filePath + fileName);
Response.Flush();
Response.End(); 
```

注意：不要设置为`Content-Disposition`，`application/pdf`因为许多浏览器都可以识别，他们会尝试使用嵌入在浏览器中的 pdf 阅读器打开它。

**如何在按钮单击时发布到第二页？**

在您的按钮单击上设置 PostbackUrl，如下所示：

```
<asp:Button 
  ID="Button1" 
  PostBackUrl="~/TargetPage.aspx"
  runat="server"
  Text="Submit" /> 
```

您可以通过使用以下属性访问控件来从目标页面上的当前页面读取值`PreviousPage`：

```
TextBox SourceTextBox = 
    (TextBox)Page.PreviousPage.FindControl("TextBox1");
if (SourceTextBox != null)
{
    Label1.Text = SourceTextBox.Text;
} 
```

# jsf-2 - JSF2 ViewStateID 可以重用吗？

> ID：12606180
> 
> 赞同：1
> 
> 时间：2012-09-26T16:22:20.427
> 
> 标签：jsf-2

我们有一个 JSF2.1.7 应用程序，我们的 IT 安全发现如下问题

```
 In Browser:
    1) Get login Page.
    2) Post Login Page with UserName/Password & submit&JSFViewStateId_1&JSessionID_1
    3)Successful login. 
```

在几分钟内，如果我们使用旧的 ViewState 和新的 JSession 发出与下面相同的 http 请求。

```
1) Post Login page with UserName/Password & submit&JSFViewStateId_1&JSessionID_2
   2) Successful Login 
```

想知道，旧的视图状态是如何被服务器接受的，当第二个请求发出时，它不应该报告视图过期吗？服务器是否将 ViewSTate 和 JSession ID 验证为组合身份验证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T00:04:07.770

That's only possible if the `javax.faces.STATE_SAVING_METHOD` is set to `client`. The `javax.faces.ViewState` does then not represent the unique view state identifier referencing a view state which is stored in the user session, but it represents instead the whole view state itself, in serialized flavor. The session ID is then not relevant anymore.

The webapp being tested has apparently client side state saving enabled. Whether that's a security problem is a second. It would only be possible to extract and send the view state to a malicious server when there's a XSS hole. JSF has by itself very strong builtin XSS prevention which the developer can only disable by explicitly using `escape="false"` while redisplaying user-controlled data. Even *if* there was a XSS hole, then it would *also* be possible to send the session ID along. It wouldn't have been more secure with server side state saving.

# android - 如何在自定义 android 相机上确认后检索图像数据

> ID：12606181
> 
> 赞同：0
> 
> 时间：2012-09-26T16:22:31.697
> 
> 标签：android, android-camera, out-of-memory

我正在尝试编写一个自定义相机，让它一切正常，除了一件事。我试图模仿“本机”功能，在您拍照后，它会向您显示预览，您可以选择接受、重做或取消。我有这个工作。

问题是**Camera.takePicture**回调在照片拍摄后立即发生，然后我显示此“确认”屏幕。此时图像可供我使用，但我还没有准备好......

我想将 byte[] 数据存储在一个临时位置，直到用户触摸“确认，我想使用这张照片”，然后将实际图像存储在设备上。

目前我将图像存储在位图中，例如

```
// create the directory that the app uses to store pending
// uploads
String photoStoragePath = Environment
        .getExternalStorageDirectory()
        + Photo.UPLOAD_DIRECTORY;

// create the directory
File storageDirectory = new File(photoStoragePath);
storageDirectory.mkdirs();

// used for filename uid
long millis = System.currentTimeMillis();

// define the file_name to save photo taken by camera
// activity
String fileName = millis + ".jpg";

File file = new File(photoStoragePath, fileName);

// temporarily store the photo
mLastPhoto.compress(CompressFormat.JPEG, 95,
        new FileOutputStream(file.getAbsolutePath())); 
```

但是在拍了 5 张左右的照片后，我得到了这个 OOM Exception

```
09-26 01:55:14.979: E/AndroidRuntime(6303): FATAL EXCEPTION: main
09-26 01:55:14.979: E/AndroidRuntime(6303): java.lang.OutOfMemoryError
09-26 01:55:14.979: E/AndroidRuntime(6303):     at android.graphics.BitmapFactory.nativeDecodeByteArray(Native Method)
09-26 01:55:14.979: E/AndroidRuntime(6303):     at android.graphics.BitmapFactory.decodeByteArray(BitmapFactory.java:426)
09-26 01:55:14.979: E/AndroidRuntime(6303):     at android.graphics.BitmapFactory.decodeByteArray(BitmapFactory.java:444)
09-26 01:55:14.979: E/AndroidRuntime(6303):     at com.company.app.ui.CameraActivity$3$1$2.onPictureTaken(CameraActivity.java:203)
09-26 01:55:14.979: E/AndroidRuntime(6303):     at android.hardware.Camera$EventHandler.handleMessage(Camera.java:734)
09-26 01:55:14.979: E/AndroidRuntime(6303):     at android.os.Handler.dispatchMessage(Handler.java:99)
09-26 01:55:14.979: E/AndroidRuntime(6303):     at android.os.Looper.loop(Looper.java:137)
09-26 01:55:14.979: E/AndroidRuntime(6303):     at android.app.ActivityThread.main(ActivityThread.java:4745)
09-26 01:55:14.979: E/AndroidRuntime(6303):     at java.lang.reflect.Method.invokeNative(Native Method) 
```

是否有必要像这样将图像存储在内存中，或者我是否缺少一些可以使这更容易的东西？

# c - 线程。取消积分的实施

> ID：12606185
> 
> 赞同：4
> 
> 时间：2012-09-26T16:22:55.053
> 
> 标签：c, pthreads, posix, solaris

我的问题与这个有关[pthread_cancel don't work under solaris](https://stackoverflow.com/questions/12455815/pthread-cancel-dont-work-under-solaris)

我也有同样的问题。如果没有（写入有取消点）调用[http://src.opensolaris.org](http://src.opensolaris.org) ，我找不到`printf`实现（也许我搜索得不够多）`write`

我找不到有关取消点内部的信息。异步取消如何工作？（通过signls或其他方式）延迟取消如何工作？

# php - 这种字符串替换是否足以抵御 SQL 注入攻击？

> ID：12606193
> 
> 赞同：3
> 
> 时间：2012-09-26T16:23:13.183
> 
> 标签：php, mysql, security, code-injection

我正在尝试评估一种定制的`CMS`. devoloper 用于抵御`SQL`攻击的保护措施是：

```
 str_replace("'", "\'", $_POST[$variable]); 
```

这是否足够好，或者有办法利用它来注入`SQL`代码？

PS：我知道标准方法是 using `mysql_real_escape_string()`，但我试图了解代码的一般质量。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-26T16:25:28.487

不。输入一些 UTF8 字符，这会导致代码乱码或被转义。

使用 mysqli / PDO，或者如果必须，使用 mysql_real_escape_string。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-26T16:55:00.470

```
str_replace("'", "\'", $_POST[$variable]); 
```

是的，这很脆弱。

很简单，反斜杠不会被转义，因此您可以使用反斜杠来分隔字符串文字以屏蔽引号：`hello\' OR 1 --`-> `'hello\\' OR 1 --'`。

空值也不会被转义，可能会导致问题。

此外，如果使用东亚字符集，则可以使用多字节序列来屏蔽引用。（注意这不是 UTF-8 的情况，因为 UTF-8 不允许`'`作为尾随字节。）

此外，这种转义格式仅适用于 MySQL。如果使用任何其他数据库，或者在 MySQL 中使用符合 ANSI 的字符串文字选项，那么它将无效，因为标准转义是双引号，而不是反斜杠。

代码没用。充其量它表明有人知道存在 SQL 注入，但它没有表现出对实际问题的真正理解。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T16:32:09.203

SQL 注入可以有多种形式。

如果有一个查询在数字字段上执行 where 子句（想想 PIN 号），它很容易被注入。

在用户输入的号码上寻找匹配的东西是无害的：

```
SELECT * FROM table
WHERE ID = 1 
```

可以变成总是匹配的东西

```
SELECT * FROM table
WHERE ID = 1 OR 1 = 1 
```

使用供应商特定的转义函数或准备好的语句是要走的路。

# javascript - 使用带有表单的目标属性在同一页面中打开链接

> ID：12606194
> 
> 赞同：0
> 
> 时间：2012-09-26T16:23:14.650
> 
> 标签：javascript, html

我正在开发一个网络应用程序。我使用表单作为下拉菜单，以便显示有关用户选择的类别的信息。但是当我选择一个选项时，链接会在新窗口中打开。我希望它在同一个窗口中打开。我用这样的形式使用目标属性

```
<form id="aform" target="_self">
<select id="mymenu">
<option selected>Choose a category</option>
<option value="moblist.html" target="self">Mobiles</option>
<option value="" >Tablets</option>
<option value="">Laptops</option>
<option value="">Bikes</option>
<option value="">Car</option>
</select>
</form> 
```

我的java脚本是

```
var selectmenu=document.getElementById("mymenu")
selectmenu.onchange=function(){ //run some code when "onchange" event fires
var chosenoption=this.options[this.selectedIndex] //this refers to "selectmenu"
if (chosenoption.value!="nothing"){
window.open(chosenoption.value, "", "") //open target site (based on option's value                attr) in new window
}
} 
```

但链接仍然在新窗口中打开。如何使所选页面在同一窗口中打开。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T14:56:29.900

随着

```
window.open(chosenoption.value, "", "") 
```

你得到一个新窗口。您需要将页面的`src`值设置为`chosenoption.value`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T05:58:26.500

您可以完全删除目标属性。

```
<form id="aform">
... 
```

应该足以在同一个窗口中打开它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T05:59:00.763

Window.open 打开一个新的浏览器窗口。我在这个网站上找到了这个：

[如何在 JavaScript/jQuery 中重定向到另一个网页？](https://stackoverflow.com/questions/503093/how-can-i-make-a-redirect-page-in-jquery-javascript)

# inversion-of-control - 在 Nancy 项目中获取 TinyIoc 当前容器

> ID：12606195
> 
> 赞同：8
> 
> 时间：2012-09-26T16:23:18.783
> 
> 标签：inversion-of-control, nancy, tinyioc

我正在构建一个小型 Nancy Web 项目。

在我的一个类（不是 nancy 模块）的方法中，我想基本上做：

```
var myThing = TinyIoC.TinyIoCContainer.Current.Resolve<IMyThing>(); 
```

`.Current`但是， （非公共成员，_RegisteredTypes）中只有一个注册， 即：
TinyIoC.TinyIoCContainer.TypeRegistration

自然，在我上面的代码中，我得到：

> 无法解析类型：My.Namespace.IMyThing

所以，我想我没有在我的引导程序中注册相同的容器？

有没有办法解决它？

**编辑**

为了充实我正在尝试做的事情：

基本上，我的 url 结构看起来像：

> /{myType}/{myMethod}

因此，想法是：/customer/ShowAllWithTheNameAlex 将加载`Customer`服务，并执行该`showAllWithTheNameAlex`方法

我的做法是：

```
public interface IService
{
    void DoSomething();
    IEnumerable<string> GetSomeThings();
} 
```

然后我有一个抽象基类，带有一个返回服务的方法 GetService。
我在这里尝试使用 TinyIoC.TinyIoCContainer.Current.Resolve();
在这种情况下，它将是 TinyIoC.TinyIoCContainer.Current.Resolve("typeName");

```
public abstract class Service : IService
{
    abstract void DoSomething();
    abstract IEnumerable<string> GetSomeThings();

    public static IService GetService(string type)
    {
        //currently, i'm doing this with reflection....
    }
} 
```

这是我的服务实现。

```
public class CustomerService : Service
{
    public void DoSomething()
    {
        //do stuff
    }

    public IEnumerable<string> GetSomeThings()
    {
        //return stuff
    }

    public IEnumerable<Customer> ShowAllWithTheNameAlex()
    {
        //return
    }
} 
```

最后，我有我的 Nancy 模块，它看起来像：

```
public class MyModule : NancyModule
{
    public MyModule()
    {
        Get["/{typeName}/{methodName}"] = p => ExecuteMethod(p.typeName, p.methodName);
    }

    private dynamic ExecuteMethod(string typeName, string methodName)
    {
        var service = Service.GetService(typeName);

        var result = service.GetType().GetMethod(methodName).Invoke(service, null);

        //do stuff

        return result; //or whatever
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T18:11:43.317

@alexjamesbrown - 简短的回答是，你没有。Nancy 是专门设计的，因此您无需直接处理容器。您提到要依赖的类`IMyThing`不是 NancyModule。好吧，这不是问题，只要您的模块之一具有对它的引用，那么这些依赖项也可以具有它们自己的依赖项，这些依赖项将在运行时得到满足。

```
public interface IGreetingMessageService
{
   string GetMessage();
}

public class GreetingMessageService: IGreetingMessageService
{
   public string GetMessage()
   {
      return "Hi!";
   }
}

public interface IGreeter
{
   string Greet();
}

public class Greeter
{
   private readonly IGreetingMessageService service;

   public Greeter(IGreetingMessageService service)
   {
      this.service = service;
   }

   public string Greet()
   {
      return this.service.GetMessage();
   }
}

public class GreetingsModule : NancyModule
{
   public GreetingModule(IGreeter greeter)
   {
      Get["/"] = x => greeter.Greet();
   }
} 
```

以上将正常工作，并且`Greeter`将依赖`IGreetingMessageService`于运行时满足

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-28T15:22:05.973

我有一个非常相似的问题，需要“共享”容器。这是一个问题的原因是我的程序使用 Nancy 自托管作为服务运行以提供 REST API。我的模块具有由 Nancy 本身注入的依赖项，但未从模块引用的应用程序的其他部分也需要注入依赖项。多个容器在这里（或任何地方）不是一个明智的选择，我需要在 Nancy 和应用程序的其余部分之间共享容器。

我只是做了以下事情（我正在使用 Autofac，但我怀疑 TinyIoC 类似）

```
public class Bootstrapper : AutofacNancyBootstrapper
{
    private static readonly Lazy<ILifetimeScope> container = new Lazy<ILifetimeScope>(RegisterTypes);
    public static ILifetimeScope Container => container.Value;

    protected override ILifetimeScope GetApplicationContainer()
    {
        return container.Value;
    }

    // Create container and register my types
    private static ILifetimeScope RegisterTypes()
    {
        var builder = new ContainerBuilder();

        // Register all my own types.....

        return builder.Build();
    }
} 
```

然后，在我的主代码中，我可以自己使用容器

```
public class Program
{
    public static void Main(string[] args)
    {
        // Resolve main service with all its dependencies
        var service = Bootstrapper.Container.Resolve<Service>();
        service.Run();
    }
} 
```

由于我的 NancyHost 在服务中，因此容器在第一次使用时被构造（一次），`main`然后在 Nancy 开始创建`Bootstrapper`自身时使用此静态。

在一个理想的世界里，我真的不想要一个全局可访问的容器，通常它是`main`函数的本地容器。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-08-31T04:33:29.323

在这种特殊情况下，“不直接处理容器”是很成问题的：

公共接口 IFoo {}

公共类 Foo : IFoo { public Foo(string bar) {} }

假设 IFoo 已经**是**Nancy 模块的构造函数依赖项。

注意 Foo 构造函数的字符串依赖。当遇到作为 Nancy 模块依赖项时，我需要与容器通信以将该构造函数用于 IFoo 单例。我需要在 NancyFx 使用的 TinyIoC 实例上注册它，并传入 bar 的实际值。

# java - 使用已弃用的 Hamcrest 方法 is() 的替代方法是什么？

> ID：12606196
> 
> 赞同：55
> 
> 时间：2012-09-26T16:23:19.783
> 
> 标签：java, unit-testing, hamcrest

我现在使用下面的代码来断言一个`boolean`值，但是该方法`org.hamcrest.Matchers.is()`已被弃用。

```
assertThat(someValue, is(false)); 
```

是否有一个简单的替代语法来测试布尔值而不求助于`assertTrue()`它会给你像“java.lang.AssertionError”这样的糟糕的失败消息

* * *

**收到评论/答案后**编辑****

 **我最初的担忧是因为 Eclipse 将以下导入语句显示为已弃用

![在此处输入图像描述](../Images/1ee65996bebe24e80e330dbe679dad5d.png)

查看[Hamcrest API](http://www.jarvana.com/jarvana/view/org/hamcrest/hamcrest-library/1.2.1/hamcrest-library-1.2.1-javadoc.jar!/org/hamcrest/Matchers.html)文档时，该方法有 3 个重载变体，`is()`其中只有一个已弃用。

因此，为了澄清@mark 的评论和@matt 的答案`is()`，我在上面发布的使用是有效的并且不被弃用。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-09-26T16:25:39.733

你试过`equalTo(T)`吗？

```
assertThat(someValue, equalTo(false)); 
```

我没有看到它[`is(T)`](http://hamcrest.org/JavaHamcrest/javadoc/1.3/org/hamcrest/Matchers.html#is%28T%29)已被弃用 -但是[is(Class) 已被弃用](http://hamcrest.org/JavaHamcrest/javadoc/1.3/org/hamcrest/Matchers.html#is%28java.lang.Class%29)。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-27T16:51:42.233

我曾认为这是一个传递依赖问题，但它实际上只是 Eclipse 中的一个显示问题，它将导入标记为已弃用，因为一个重载的表单是。代码应该可以正常编译，因为导入将公开所有表单。

已弃用的表单已从源中删除，并且不会在下一个版本 (1.4) 中存在。

**原始答案**

问题是[JUnit 在其 JAR 中包含一组 Hamcrest 类](https://github.com/KentBeck/junit/issues/27)。您现在可以使用`junit-dep.jar`，但 JUnit 的较新版本（目前为 4.9 和 4.10）省略了它们。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-02-23T13:47:46.723

据说，`instanceOf`用于文档中的类匹配器。

[http://junit.org/javadoc/latest/org/hamcrest/core/Is.html#isA(java.lang.Class)](http://junit.org/javadoc/latest/org/hamcrest/core/Is.html#isA(java.lang.Class))

```
is(IOException.class); 
```

将会

```
is(instanceOf(IOException.class)); 
```

例如。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-21T08:43:49.150

这就是*2022 年 1 月对我有用的方法*

```
import static org.hamcrest.CoreMatchers.*; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-11T06:01:20.133

这是折旧的：

```
import static org.junit.Assert.assertThat; 
```

我们可以改用这个：

```
import static org.hamcrest.MatcherAssert.assertThat; 
```**

# c# - RadComboBox 选择的值为空

> ID：12606197
> 
> 赞同：2
> 
> 时间：2012-09-26T16:23:25.213
> 
> 标签：c#, asp.net, telerik, selectedvalue, radcombobox

`SelectedValue = ""`当我点击我的按钮时，我得到了。

**我的 aspx ：**

```
<telerik:RadComboBox ID="ddl_contactList" runat="server" AutoPostBack="True" CausesValidation="False"
            CollapseDelay="0" Culture="ar-EG" ExpandDelay="0" Filter="StartsWith" ItemsPerRequest="10"
            MarkFirstMatch="true" Skin="Outlook" EnableAutomaticLoadOnDemand="True" EmptyMessage="-New Menu-"
            ShowMoreResultsBox="True" OnSelectedIndexChanged="ddl_contactList_SelectedIndexChanged"
            EnableItemCaching="false" EnableLoadOnDemand="True" EnableVirtualScrolling="True">
        </telerik:RadComboBox> 
```

* * *

**我的 .cs ：**

```
 private void BindContactLists(int year, int main_code)
        {
            ddl_contactList.Items.Clear();
            DataTable dt = ContactList.GetContactListsByDep(year, main_code);
            ddl_contactList.DataSource = dt;
            ddl_contactList.DataTextField = "list_desc";
            ddl_contactList.DataValueField = "list_code";
            ddl_contactList.DataBind();

        } 
```

* * *

我在 中调用它是`page load`因为当我在 中调用它时 `!Page.Ispostback`，出现以下错误：

> 没有分配的数据源。无法完成回调请求。

我该如何解决这个问题？马上：

`ddl_contactList.Text == "MySelectedItemText"`

但

`selectedValue == ""`和`selectedItem == ""`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-15T19:20:40.287

将您的调用`BindContactLists()`从`Page_Load()`方法移到`Page_Init()`方法。这允许在页面生命周期的后期为 ViewState 绑定设置控件，并允许正确填充 SelectedValue 属性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T17:56:09.823

这很正常，因为您重新绑定了数据 => 所以您删除了您选择的值

我建议您在`!IsPostBack`=> 中设置您的块，当您发布时不要擦除

在页面加载中

```
if(! IsPostBack)
{

           ddl_contactList.Items.Clear();
            DataTable dt = ContactList.GetContactListsByDep(year, main_code);
            ddl_contactList.DataSource = dt;
            ddl_contactList.DataTextField = "list_desc";
            ddl_contactList.DataValueField = "list_code";
            ddl_contactList.DataBind();

} 
```

你坚持你的控制与`ViewState`

放`EnableViewState="true"`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T10:50:33.717

确保在页面加载或初始化触发时填充您的数据源（如数据集或数据表）

# asp.net-mvc - System.Web.Mvc.ActionFilterAttribute 与 System.Web.Http.Filters.ActionFilterAttribute

> ID：12606202
> 
> 赞同：33
> 
> 时间：2012-09-26T16:23:53.897
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-web-api

我看到有两个版本的 ActionFilterAttribute 类。
**System.Web.Mvc.ActionFilterAttribute**和**System.Web.Http.Filters.ActionFilterAttribute**

有什么不同吗？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-09-26T16:37:08.857

[System.Web.Http](http://msdn.microsoft.com/en-us/library/system.web.http.filters.actionfilterattribute%28v=vs.108%29.aspx)一个用于 Web API；[System.Web.Mvc](http://msdn.microsoft.com/en-us/library/system.web.mvc.actionfilterattribute%28v=vs.108%29.aspx)用于以前的 MVC 版本。

从源码可以看出，Web API 版本有几个不同之处。

*   它具有`OnResultExecuting`和`OnResultExecuted`处理程序（*“在操作结果执行之前/之后由 ASP.NET MVC 框架调用。”*）
*   可以[异步执行](http://msdn.microsoft.com/en-us/library/hh943906%28v=vs.108%29.aspx)
*   它不允许*您*指定执行顺序

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-26T16:35:08.257

System.Web.Mvc.ActionFilterAttribute 旨在与 ASP.NET MVC 一起使用。System.Web.Http.Filters.ActionFilterAttribute 旨在与 ASP.NET Web API 一起使用。

MVC 是 Web 应用程序，Web API 是 HTTP 服务。

他们的 msdn 页面是[System.Web.Mvc.ActionFilterAttribute](http://msdn.microsoft.com/en-us/library/system.web.mvc.actionfilterattribute%28v=vs.108%29.aspx)和[System.Web.Http.Filters.ActionFilterAttribute](http://msdn.microsoft.com/en-us/library/system.web.http.filters.actionfilterattribute%28v=vs.108%29.aspx)

# ios - iOS6 中的 UINavigationController 崩溃

> ID：12606209
> 
> 赞同：0
> 
> 时间：2012-09-26T16:24:08.863
> 
> 标签：ios, uitableview, uinavigationcontroller, ios6

我有一段简单的代码将一个新的视图控制器推送到我的导航控制器上

```
- (IBAction)buttonSelected:(id)sender{
    caseBillingFormViewController = [[CaseBillingFormViewController alloc] initWithStyle:UITableViewStyleGrouped];
    caseBillingFormViewController.returnScreen = @"FALSE";
    [self.navigationController pushViewController:caseBillingFormViewController animated:YES];
} 
```

我在最后一行崩溃了：

```
[self.navigationController pushViewController:caseBillingFormViewController animated:YES]; 
```

我不知道为什么会发生这种情况，它是 iOS6 的新增功能。升级版本之间的代码库没有改变，所以我不确定为什么会这样。

我的 caseBillingFormViewController 在我的界面中命名：

```
CaseBillingFormViewController *caseBillingFormViewController; 
```

我检查了 self.navigationController 的完整性，一切都检查出来了：

```
NSLog(@"%i",[self.navigationController respondsToSelector:@selector(pushViewController:animated:)]); 
//gives 1 
```

问题是这只出现在由 UITableView 管理的屏幕上 -

```
caseBillingFormViewController = [[CaseBillingFormViewController alloc] initWithStyle:UITableViewStyleGrouped];
//crashes

savedOrdersViewController = [[SavedOrdersViewController alloc] initWithNibName:@"SavedOrdersViewController" bundle:[NSBundle mainBundle]];
//does not crash 
```

任何人都可以解释为什么会这样吗？
在 Simulator 5.1 和 Simulator 6.0 上测试了相同的代码 - 错误只发生在后者上。

注意，错误是：

```
'NSUnknownKeyException', reason: '[<CaseBillingFormViewController 0xc09c0b0> setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key theTableView.' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T18:18:06.760

请注意，'initWithNibName:bundle:' 是 UIViewController 的指定初始化程序。你的子类有两个 nils（没关系）？您不知道 UIViewController 在其 init 例程中正在做什么，因此您必须调用它，否则您将处于不稳定的状态。

如果这在过去有效，我假设您实现了“loadView”。如果是这样，您可以在您的子类 init 中使用指定为属性的样式创建您的表（只要它调用指定的超级。）

它以前有效而现在无效的原因是你很幸运 - Apple 现在必须在 'initWithNibName:bundle:' 中做一些重要的事情。

此外，如果您正在继承 UITableViewController（不是 UIViewController），则可能需要将 self.tableView 设置为 self.view - 不确定 - 但无论如何，您应该在创建对象之后但在推送它之前验证两者view 和 tableView 已设置 - 通过在推送之前记录它们。如果其中一个为 nil，则不要继续。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T08:40:29.220

好的，由于我假设它不相关，我没有提到`CaseBillingFormViewController`曾经有一个 xib 文件 - 当我意识到 xib 文件根本没有做太多事情时，我删除了它并将类转换为UITableViewController 与所有适当的初始化程序。

我会澄清...
`CaseBillingFormViewController.xib`不存在。
它被删除，所有引用被删除，文件本身被丢弃并清空。我什至去检查编译的源代码，正如我所想的那样，它不存在......

因此，为什么我认为它不相关。

要修复，我必须从我的设备和模拟器中删除应用程序，然后清理构建，重新启动我的机器，再次清理然后构建。听起来很复杂，即使没有其中一个步骤，错误仍然存​​在。

X-Code 中有一个错误，它不会注册已删除的文件，尤其是 xibs 和故事板。以下是苹果公司的回应：

> Xcode 在假设哪些文件已被更改时并不准确，从而引发了应用程序包的重新构建，特别是对于故事板和 xib 文件。正如您所指出的，您必须对其进行干净的操作才能实现您的更改。这是 Xcode 中的一个错误。
> 
> 如果您想保留沙盒的其余部分（即 Documents 文件夹等），Xcode Organizer 允许您将应用程序的standbox（减去应用程序包）从设备下载到您的 Mac，然后您可以将其上传回来更改应用程序后到设备。因此，在管理器中，选择设备及其“应用程序”项，选择适当的应用程序，单击“下载”按钮，这将下载该沙箱中的数据文件。

即使该文件已被删除，它仍在从中读取变量。错误中的 UITableView 实例`theTableView`在被删除之前已经存在于 xib 中。

这并不意味着它是固定的，但它确实意味着解决方案不在 SO 中的任何人手中。无论如何，感谢您的帮助。

# ruby-on-rails - rails 3 has_many 到 has_one

> ID：12606212
> 
> 赞同：4
> 
> 时间：2012-09-26T16:24:24.790
> 
> 标签：ruby-on-rails, activerecord, has-many-through

假设您有以下模型：

```
class Category < ActiveRecord::Base
  has_one :current_heat, class_name: 'Heat'
  has_many :scores, :through => :current_heat
end

class Heat < ActiveRecord::Base
  belongs_to :category
  has_many :scores
end

class Score < ActiveRecord::Base  
  belongs_to :heat
end 
```

令人惊讶的是，当我调用`Category.first.scores`ActiveRecord 时会产生以下查询：

```
SELECT `categories`.* FROM `categories` LIMIT 1
SELECT * FROM `scores` INNER JOIN `heats` ON `scores`.`heat_id` = `heats`.`id` WHERE `heats`.`category_id` = 1 
```

上面的查询忽略了 has_one 的性质`Category#current_heat`。我本来期望的更像是：

```
SELECT `categories`.* FROM `categories` LIMIT 1
SELECT `heats`.* FROM `heats` WHERE `heats`.`category_id` = 1 LIMIT 1
SELECT * FROM `scores` WHERE `scores`.`heat_id` = 6 
```

仅当您使用 . 从根显式遍历 has_one 关联时才会生成`Category.first.current_heat.scores`。

就好像 ActiveRecord 默默地将我的 has_one 视为 has_many。有人可以向我解释这种行为吗？是否有一个优雅的解决方法或“正确的方法”来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T18:28:13.717

也许你可以删除

```
has_many :scores, :through => :current_heat 
```

而是通过 has_one 委托 :scores:

```
delegate :scores, :to => :current_heat 
```

这将保留您所需的访问方法 Category.first.scores。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T16:46:36.993

`has_one`真的不存在以这种方式照看您的数据库。如果有多个记录与 foreign_key 匹配，它不会抛出错误，它只会选择第一个。它假设您没有错误地添加额外的记录，这会破坏`has_one`您自己的关系。

总而言之，只要Category只有一条记录，它生成的sql就可以了。如果您以某种方式添加了不应该存在的额外记录，因为它是 a `has_one`，那么它将不起作用，但告诉您这已经发生不是 activerecord 的工作。

# c# - 当我比较两个空列表时，为什么测试“Assert.AreEqual”失败了？

> ID：12606214
> 
> 赞同：10
> 
> 时间：2012-09-26T16:24:25.260
> 
> 标签：c#, unit-testing

我有一个类 MyCustomClass：

```
public MyCustomClass
{
    public MyCustomClass()
    {
        MyObject = new List<MyCustomObject>();
    }

    public List<MyCustomObject> MyObject {get; set;}
} 
```

在测试中：

```
List<MyCustomObject> aux = new List<MyCustomObject>();
MyCustomClass oClass = new MyCustomClass();
Assert.AreEqual(aux, oClass.MyObject) 
```

测试失败了，为什么？每个属性、静态成员等都是相同的。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-26T16:26:25.397

在这种情况下`Assert.AreEqual`，将检查两个对象是否相同，而它们不是。您应该[`CollectionAssert.AreEqual`](http://msdn.microsoft.com/en-US/library/microsoft.visualstudio.testtools.unittesting.collectionassert.areequal%28v=vs.80%29.aspx)改用，如果两者“具有相同顺序和数量的相同元素”，它将返回 true。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-26T16:32:04.253

正如[已经回答](https://stackoverflow.com/a/12606248/13627)的那样，具有零元素的两个相同类型的列表不被认为是相等的。

这背后的原因是，`AreEqual`实际上调用`aux.AreEqual(oClass.MyObject)`，使用对象自己的相等实现。因为这没有被 覆盖`List<T>`，所以它回退到 中的实现`Object`，这是一个简单的引用相等检查。这两个列表显然不是同一个参考，因此，它们不被认为是平等的。

因为该`Equals`方法存在并且是 virtual on `Object`，所以您自己的类可以重写`Equals`，以便为相等性提供另一个概念，而不是引用相等性。这是在对象上完成的`String`，如果数据相同，即使对于不同的引用，这些对象也比较相等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T16:50:29.723

我使用[dotPeek](http://www.jetbrains.com/decompiler/)`Assert.AreEqual`反编译（在`Microsoft.VisualStudio.QualityTools.UnitTestFramework` GAC 程序集中），发现最终会导致以下调用 where is和is ：`Assert.AreEqual(aux, oClass.MyObject)``aux``expected``oClass.MyObject``actual`

```
object.Equals((object) expected, (object) actual) 
```

从我们阅读的静态[文档中：](http://msdn.microsoft.com/en-us/library/w4hkze5k.aspx)`object.Equals(Object, Object)`

> 静态 Equals(Object, Object) 方法指示两个对象 objA 和 objB 是否相等。它还使您能够测试值为 null 的对象是否相等。它比较 objA 和 objB 是否相等，如下所示：
> 
> 它确定两个对象是否代表相同的对象引用。如果是，则该方法返回 true。此测试等效于调用 ReferenceEquals 方法。此外，如果 objA 和 objB 都为 null，则该方法返回 true。
> 
> 它确定 objA 或 objB 是否为空。如果是，则返回 false。
> 
> 如果这两个对象不代表同一个对象引用且都不为 null，则调用 objA.Equals(objB) 并返回结果。这意味着如果 objA 覆盖 Object.Equals(Object) 方法，则调用此覆盖。

现在，`List<T>`已知是引用类型，并且我们知道您要比较的两个列表都不是 null，因此您的两个对象之间的最终比较将是

```
expected.Equals(actual) 
```

由于`List<T>`不覆盖`Equals`，它使用执行引用比较的基础对象实现，因此失败（`expected`并且`actual`分别“新”）。

您想要的是*结构比较*，即列表中元素的成对相等。[`CollectionAssert.AreEqual`](http://msdn.microsoft.com/en-US/library/microsoft.visualstudio.testtools.unittesting.collectionassert.areequal%28v=vs.80%29.aspx)有关该 ( )的正确断言，请参阅@ReedCopsey 答案。

# html - 全屏时在视频嵌入的顶层绘制文本

> ID：12606215
> 
> 赞同：0
> 
> 时间：2012-09-26T16:24:28.893
> 
> 标签：html, css, web

现在，我从 youtube 嵌入视频，但我遇到了一个问题，当视频全屏时，我无法绘制任何东西（文本、图像等）。那么，当视频全屏时，我该怎么做才能绘制文本或图像（div）以显示它。我尝试使用 z-index，但没有成功。
我想为我的视频播放器制作新的控制器，不要使用 youtube 控制器，但视频是从 youtube 嵌入的。所以，当用户用户全屏模式时，我想显示一个包含控件之类的 div `play`。`pause`我
已经使用`?wmode=transparent`但它不适用于全屏，这意味着当我保持全屏模式时我的控制器不显示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T16:27:52.977

您没有提供太多信息，但我认为这个网站详细说明了您的需求。

[http://www.electrictoolbox.com/div-layers-float-over-flash-vimeo-youtube/](http://www.electrictoolbox.com/div-layers-float-over-flash-vimeo-youtube/)

# excel - Excel 数据验证自动生成内容

> ID：12606220
> 
> 赞同：0
> 
> 时间：2012-09-26T16:24:53.947
> 
> 标签：excel

我有一个 Excel 表 A，我在其中单击了单元格中的下拉图标，然后出现了我引用的另一个数据 Excel 表 B 中的所有人的列表。在该数据 Excel 表 B 中，每一行对于每个人都是唯一的，具有该特定人的属性，例如识别号。

因此，当我单击单元格并从下拉列表中选择一个名称时，我希望下一个单元格显示所选名称的标识号。我该怎么做呢？我不知道如何开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T16:37:19.853

尝试结合索引和匹配来实现您正在寻找的结果。

这样，您就不会遇到只能将值返回到查找右侧的 vlookup 限制。

```
=Index(SheetB!A:A,Match(SheetA!A1,SheetB!B:B,0)) 
```

假定：

*   工作表 A 的下拉列表位于单元格 A1 中
    *   下拉列表的值需要在“表 B”的 B 列中查找
*   我们希望返回工作表 B 中查找的 A 列的相应值。

更新公式参考，这应该让你走上正轨。

# eclipse - Eclipse 无法使用 Struts2 重建项目

> ID：12606222
> 
> 赞同：2
> 
> 时间：2012-09-26T16:25:08.690
> 
> 标签：eclipse, tomcat, struts

我是 struts 新手，在 Eclipse 中自动重建项目时遇到问题。

使用 Tomcat 启动器时，/WEB-INF/lib 中的 jar 和 /WEB-INF/classes 中的 struts.xml 一切正常。

在我修改我的源代码并且项目重新构建后，Eclipse 总是抛出错误，说它无法重新启动。使用 Tomcat Launcher 重新启动服务工作正常。我尝试将 struts.xml 文件移动到 /WEB-INF/src/，但它也不起作用。

这是我收到的错误消息：

```
 Sep 26, 2012 9:11:56 AM org.apache.catalina.core.StandardContext filterStart
    SEVERE: Exception starting filter struts2
    Unable to load configuration. - [unknown location]
        at org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:450)
        at org.apache.struts2.dispatcher.ng.InitOperations.initDispatcher(InitOperations.java:74)
        at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.init(StrutsPrepareAndExecuteFilter.java:51)
        at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:295)
        at org.apache.catalina.core.ApplicationFilterConfig.setFilterDef(ApplicationFilterConfig.java:422)
        at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:115)
        at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4072)
        at org.apache.catalina.core.StandardContext.start(StandardContext.java:4726)
        at org.apache.catalina.core.StandardContext.reload(StandardContext.java:3461)
        at org.apache.catalina.loader.WebappLoader.backgroundProcess(WebappLoader.java:426)
        at org.apache.catalina.core.ContainerBase.backgroundProcess(ContainerBase.java:1361)
        at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1653)
        at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1662)
        at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1662)
        at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.run(ContainerBase.java:1642)
        at java.lang.Thread.run(Unknown Source)
    Caused by: Unable to load configuration. - [unknown location]
        at com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:69)
        at org.apache.struts2.dispatcher.Dispatcher.init_PreloadConfiguration(Dispatcher.java:390)
        at org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:437)
        ... 15 more
    Caused by: Caught exception while loading file struts-default.xml - [unknown location]
        at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.loadConfigurationFiles(XmlConfigurationProvider.java:958)
        at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.loadDocuments(XmlConfigurationProvider.java:163)
        at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.init(XmlConfigurationProvider.java:130)
        at com.opensymphony.xwork2.config.impl.DefaultConfiguration.reloadContainer(DefaultConfiguration.java:209)
        at com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:66)
        ... 17 more
    Caused by: java.lang.ClassCastException: org.apache.xerces.parsers.XIncludeAwareParserConfiguration cannot be cast to org.apache.xerces.xni.parser.XMLParserConfiguration
        at org.apache.xerces.parsers.DOMParser.<init>(Unknown Source)
        at org.apache.xerces.parsers.DOMParser.<init>(Unknown Source)
        at org.apache.xerces.jaxp.DocumentBuilderImpl.<init>(Unknown Source)
        at org.apache.xerces.jaxp.DocumentBuilderFactoryImpl.newDocumentBuilder(Unknown Source)
        at com.sun.org.apache.xalan.internal.xsltc.trax.SAX2DOM.createDocument(Unknown Source)
        at com.sun.org.apache.xalan.internal.xsltc.trax.SAX2DOM.<init>(Unknown Source)
        at com.sun.org.apache.xalan.internal.xsltc.runtime.output.TransletOutputHandlerFactory.getSerializationHandler(Unknown Source)
        at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.getOutputHandler(Unknown Source)
        at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerHandlerImpl.setResult(Unknown Source)
        at com.opensymphony.xwork2.util.DomHelper$DOMBuilder.setup(DomHelper.java:205)
        at com.opensymphony.xwork2.util.DomHelper$DOMBuilder.<init>(DomHelper.java:190)
        at com.opensymphony.xwork2.util.DomHelper$DOMBuilder.<init>(DomHelper.java:181)
        at com.opensymphony.xwork2.util.DomHelper$DOMBuilder.<init>(DomHelper.java:167)
        at com.opensymphony.xwork2.util.DomHelper.parse(DomHelper.java:107)
        at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.loadConfigurationFiles(XmlConfigurationProvider.java:949)
        ... 21 more
    Sep 26, 2012 9:11:56 AM org.apache.catalina.core.StandardContext start
    SEVERE: Error filterStart
    Sep 26, 2012 9:11:56 AM org.apache.catalina.core.StandardContext start 
```

# c# - log4net - 配置忽略来自特定线程的消息

> ID：12606223
> 
> 赞同：5
> 
> 时间：2012-09-26T16:25:12.653
> 
> 标签：c#, logging, nunit, log4net, log4net-filter

是否有可能从特定线程中过滤掉日志条目？

我使用 nunit 运行测试（c#）：

```
using System;
using NUnit.Core;
using log4net;

namespace Main
{
    public class Program
    {
        public static readonly ILogger log = LogManager.GetLogger(typeof(Program));

        static void Main(string[] args)
        {
            log.Info("start");

            TestPackage package = new TestPackage(@"C:\Test\Main.Tests.dll");
            RemoteTestRunner remoteTestRunner = new RemoteTestRunner();
            remoteTestRunner.Load(package);
            TestResult result = remoteTestRunner.Run(new NullListener(), TestFilter.Empty, true, LoggingThreshold.All);

            log.Info("end");
        }
    }
} 
```

这是我得到的日志：

```
INFO  17:57:24 [1] Main.Program - start
ERROR 17:57:25 [TestRunnerThread] Main.TestedClass - Exception! Relevant for production / okay in test
INFO  17:57:26 [1] Main.Program - end 
```

每次记录错误时，log4net 都会向我发送一封邮件。如果我运行测试，我不想收到这些邮件。nunit 将线程名称设置为：“TestRunnerThread”。我怎么能忽略这个线程？

我读过这篇文章：[如何使用 Log4Net 登录到每个线程的单独文件？](https://stackoverflow.com/questions/1612317/how-to-log-into-separate-files-per-thread-with-log4net)并尝试了这个过滤器（根本没有日志）：

```
<filter type="log4net.Filter.PropertyFilter">
    <key value="threadId" />
    <stringToMatch value="TestRunnerThread" />
    <acceptOnMatch value="false" />
</filter> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-05-18T20:50:30.513

一些东西：

*   如您链接到[的问题](https://stackoverflow.com/q/1612317/7355697)[的答案](https://stackoverflow.com/a/1612774/7355697)中所述，您必须使用 ThreadContext 注册一个键值对才能使过滤器键起作用：`ThreadContext.Properties["threadId"] = "1"`
*   过滤顺序很重要。从[文档](https://logging.apache.org/log4net/release/manual/configuration.html)：

    > 过滤器形成一个事件必须通过的链。一路上的任何过滤器都可以接受事件并停止处理，拒绝事件并停止处理，或允许事件进入下一个过滤器。如果事件在没有被拒绝的情况下到达过滤器链的末尾，它将被隐式接受并被记录。

    确保过滤器顺序如下：

    1.  *过滤你不*想要 的线程
        *   如果匹配，则消息被拒绝并且*不会*传递到下一个过滤器（由于`<acceptOnMatch value="false" />`
        *   如果不匹配，则将消息传递到链中的下一个过滤器
    2.  记录器过滤器
        *   如果匹配，则接受消息并且*不*传递到下一个过滤器
        *   如果不匹配，则将消息传递到链中的下一个过滤器
    3.  全部拒绝
        *   消息被拒绝

完整示例：

```
<?xml version="1.0" encoding="utf-8"?>
<log4net>
    <appender type="log4net.Appender.ConsoleAppender" name="consoleApp">
        <layout type="log4net.Layout.PatternLayout">
            <conversionPattern value="%message%newline" />
        </layout>       
        <filter type="log4net.Filter.PropertyFilter">
            <key value="threadId" />
            <stringToMatch value="3" />
            <acceptOnMatch value="false" />
        </filter>
        <filter type="log4net.Filter.LoggerMatchFilter">
            <loggerToMatch value="sandbox" />
        </filter>
        <filter type="log4net.Filter.DenyAllFilter" />
    </appender>
    <root>
        <level value="ALL" />
        <appender-ref ref="consoleApp" />
    </root>
</log4net> 
```

```
static void Main(string[] args)
{
    XmlConfigurator.Configure(new FileInfo("config.xml"));

    ILog log = LogManager.GetLogger("sandbox");

    ThreadPool.QueueUserWorkItem(a =>
    {
        ThreadContext.Properties["threadId"] = "1";
        log.Debug("one");
    });

    ThreadPool.QueueUserWorkItem(a =>
    {
        ThreadContext.Properties["threadId"] = "2";
        log.Debug("two");
    });

    ThreadPool.QueueUserWorkItem(a =>
    {
        ThreadContext.Properties["threadId"] = "3";
        log.Debug("three");
    });

    Console.Read();
} 
```

将记录：

```
one
two 
```

（可能以不同的顺序，取决于哪个线程先完成）

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-26T17:10:28.333

我没有使用 log4net，但一个简单的建议是将 id 更改为 fake@fake.com 在您指定电子邮件 id 以接收日志电子邮件的地方...

同意应该配置一些东西，不要每次都发送电子邮件，但这可能是一种解决方法，直到你找到一个体面的解决方案

在您使用日志记录时，我还建议您查看 Microsoft 企业库日志记录应用程序块。在您的应用程序中配置和使用非常容易。

链接[http://msdn.microsoft.com/en-us/library/ff664569(v=pandp.50).aspx](http://msdn.microsoft.com/en-us/library/ff664569(v=pandp.50).aspx)

# c# - 如何去上一个和下一个访问的文件？

> ID：12606227
> 
> 赞同：0
> 
> 时间：2012-09-26T16:25:19.870
> 
> 标签：c#, visual-studio, resharper

当导航到声明或实现时，我还想知道如何在我查看的最后一个文件之间来回跳转。

这可能在resharper中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T16:29:54.540

`Ctrl`+`-`和`Ctrl`+ `Shift`+`-`将在您看到的地方之间前后导航。我认为它们是标准的 Visual Studio（而不是 ReSharper）键绑定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T16:27:13.477

`Ctrl`++`Shift`将`Backspace`带您最后的编辑位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T16:59:04.797

resharper 的最后几次编辑

[http://www.jetbrains.com/resharper/webhelp/Navigation_and_Search__Navigating_to_Recent_Edits.html](http://www.jetbrains.com/resharper/webhelp/Navigation_and_Search__Navigating_to_Recent_Edits.html)

访问了几个文件

[http://www.jetbrains.com/resharper/webhelp/Navigation_and_Search__Navigating_to_Recent_Files.html](http://www.jetbrains.com/resharper/webhelp/Navigation_and_Search__Navigating_to_Recent_Files.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T17:02:54.867

你可以试试

```
CTRL + SHIFT + - => BACK

CTRL + - => NEXT 
```

你可以阅读这篇关于配置的文章

链接： http: [//www.jetbrains.com/resharper/webhelp/Configuring_ReSharper__Configuring_Keyboard_Shortcuts.html](http://www.jetbrains.com/resharper/webhelp/Configuring_ReSharper__Configuring_Keyboard_Shortcuts.html)

# c# - 如何在 Windows 8 中从 KnowFolders 中检索文件？

> ID：12606231
> 
> 赞同：1
> 
> 时间：2012-09-26T16:25:32.573
> 
> 标签：c#, windows-8, .net-4.5, async-await

我想创建获取 PictureFolder 中文件列表的方法。我创建了这个方法：

```
public Task<List<string>> GetImages()
{
var task = new Task<List<string>>(() =>
{
var files = new List<string>(5);
StorageFolder picturesFolder = KnownFolders.PicturesLibrary;
IReadOnlyList<IStorageItem> itemsList = picturesFolder.GetItemsAsync().GetResults();
foreach(var item in itemsList)
{
if(item is StorageFile)
{
files.Add(item.Name);
}
}
return files;

});
return task;
} 
```

以及我用于测试此方法的代码：

```
 var pic = new PictureManager();
pic.GetImages().RunSynchronously();
List<string> images = pic.GetImages().Result;
bool hasValue = images.Count > 0;
Debug.WriteLine(string.Format("Has value {0}", hasValue)); 
```

我得到了这个例外

```
System.InvalidOperationException was unhandled by user code
  HResult=-2147483634
  Message=A method was called at an unexpected time. (Exception from HRESULT: 0x8000000E)
  Source=Windows.Foundation
  StackTrace:
       at Windows.Foundation.IAsyncOperation`1.GetResults()
       at Praktyka.Models.PictureManager.<GetImages>b__0() in d:\Documents\Visual Studio 2012\Projects\Praktyka\Praktyka\Models\PictureManager.cs:line 63
       at System.Threading.Tasks.Task`1.InnerInvoke()
       at System.Threading.Tasks.Task.Execute()
  InnerException: 
```

在这一行（方法 GetImages）

```
 IReadOnlyList<IStorageItem> itemsList = picturesFolder.GetItemsAsync().GetResults(); 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T16:32:44.957

RunSynchronously 方法在当前线程上启动一个任务。但是，从 GetItemsAsync 返回的任务已启动，因此您会收到异常。

您需要重构代码以利用 async/await 关键字：

```
public async Task<List<string>> GetImages()
{
 var files = new List<string>();
 StorageFolder picturesFolder = KnownFolders.PicturesLibrary;
 IReadOnlyList<IStorageItem> itemsList = await picturesFolder.GetItemsAsync();
 foreach(var item in itemsList)
 {
  if(item is StorageFile)
  {
   files.Add(item.Name);
  }
 }
return files;
} 
```

同样，调用 GetImages 的方法应该利用 await：

```
var pic = new PictureManager();
List<string> images = await pic.GetImages();;
bool hasValue = images.Count > 0;
Debug.WriteLine(string.Format("Has value {0}", hasValue)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T16:35:03.660

我相信你应该从 Completed 处理程序中调用 GetResults，而不是立即调用 GetItemsAsync() 的结果。

# php - 如果测试访问器是浪费时间，那么测试构造函数逻辑呢？

> ID：12606232
> 
> 赞同：0
> 
> 时间：2012-09-26T16:25:36.610
> 
> 标签：php, unit-testing, testing, constructor, phpunit

似乎很多人认为单元测试 setter 和 getter 只是浪费时间，只有在包含某种逻辑时才应该测试访问器。我同意。

但是需要一些（少量）逻辑的属性呢？

```
class DeliveryReportEvent extends Event
{
    private static $reasonMap = array(
        '401' => "Message expired (device off/not reachable)",
        '201' => "Operator network malfunctioning",
        '203' => "Recipient unreachable (in roaming)",
        '301' => "Invalid recipient (nonexistent/on portability/not enabled)",
        '302' => "Wrong number",
        '303' => "SMS service not enabled",
    );

    private $errorCode;

    public function __construct($errorCode)
    {
        $this->errorCode = $errorCode;

        if(array_key_exists($errorCode, self::$reasonMap)) {
            $this->errorReason = self::$reasonMap;
        }
    }

    public function getErrorCode()
    {
        return $this->errorCode;
    }

    public function getErrorReason()
    {
        return $this->errorReason;
    }
} 
```

虽然测试`getErrorCode()`可能听起来很愚蠢（因为缺少逻辑和 IDE 功能），但您认为测试`getErrorReason()`有意义吗？

```
/**
 * @dataProvider getKnownErrorCodesAndReasons
 */
public function testErrorReasonWithKnownErrorCodes($knownErrorCode,
    $expectedErrorReason)
{
    $event = $this->getMockDeliveryReportEvent($knownErrorCode);

    $actualErrorReason = $event->getErrorReason();

    $this->assertNotNull($errorReason);
    $this->assertContains($expectedErrorReason, $actualErrorReason, '', true);
}

public function getKnownErrorCodesAndReasons()
{
    return array(
        array('401', "expired"),
        array('201', "network malfunctioning"),
        array('203', "unreachable"),
        array('301', "invalid recipient"),
        array('302', "wrong number"),
        array('303', "not enabled"),
    );
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T16:32:18.197

这都是主观的，取决于许多因素，例如：

*   您希望您的测试用例具有什么级别的代码覆盖率？一些发布管理系统定义了此覆盖范围，并需要在发布确认之前将其与其他标准一起满足。
*   是`getErrorReason()`一个关键功能（尽管它的内部逻辑有多小）？换句话说，如果它搞砸了，它会破坏系统吗？

还取决于其他因素，例如：

*   你有多少空闲时间？
*   你是一个多么纯粹的人？
*   你有胡子吗？

等等等等.. :)

# c++-cli - 在托管 C++/CLI 中定义和初始化 Decimal 的正确方法

> ID：12606233
> 
> 赞同：3
> 
> 时间：2012-09-26T16:25:37.660
> 
> 标签：c++-cli, decimal

这看起来应该很简单，但我在网上找不到答案。

在 C++/CLI 中定义 Decimal 变量并用常量值初始化它的正确方法是什么？

在 C# 中它将是：

```
decimal d = 1.1M; 
```

在 C++/CLI 中，我一直在做：

```
Decimal d = (Decimal)1.1; 
```

这适用于某些数字，但我怀疑它只是从 double 转换而来。

我注意到有一个构造函数：`Decimal(int, int, int, bool, unsigned char)`但希望有一种更简单的方法来处理大量特定数字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T23:47:06.350

你确实在投射数字。如前所述，您可以从字符串解析或除整数，或者您可能想要使用[BigRational](http://bcl.codeplex.com/releases/view/42782)数据类型。独立于您选择的选项，您可以在静态类中创建一个实用方法来执行此操作，因此您不必一直重复它。

您还可以在[VS UserVoice 站点](http://visualstudio.uservoice.com/forums/121579-visual-studio)上建议允许使用 C# 中的数字后缀。

# oracle - 为什么我可以从 64 位 Forms Server 连接到 Oracle 10g DB 32 位但不能连接到 11g DB 64 位？

> ID：12606236
> 
> 赞同：1
> 
> 时间：2012-09-26T16:25:38.707
> 
> 标签：oracle, oracle11g, oracleforms, tnsnames

我刚刚开始使用 WebLogic 和新的 Forms and REPORTS Server 和builders (11gR2)。

我正在使用 Oracle 11g R2 64 位数据库。在表单生成器中，我可以毫无问题地打开表单并进行编译。

但是，一旦我尝试通过浏览器打开表单，它就会向我询问 DB 凭据，然后它给了我一个 TNS Error `ORA-12154`。

事情是我仔细检查了`tnsnames.ora`文件，一切都很好。所以我尝试连接到一个 10g 的数据库，它确实连接了。所以这不是 TNSNAMES 问题，因为两个数据库地址都在同一个 tns 文件中。

问题是：真正的问题是什么，导致这种情况发生？我该如何解决？

Tns 条目：

```
    开发11=
      （描述=
        (地址 = (协议 = TCP)
    （主机 = xxx.xxx.xxx.xxx）（端口 = 1521））
        （连接数据 =
          （服务器 = 专用）
          (SERVICE_NAME = dev11)
        )
      )

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T21:50:41.387

尝试阅读以下线程，我认为您的问题是相同的：

[https://forums.oracle.com/forums/thread.jspa?messageID=3455198](https://forums.oracle.com/forums/thread.jspa?messageID=3455198)

# javascript - 检测浏览器是否在 Android 或 iOS 设备上运行

> ID：12606245
> 
> 赞同：69
> 
> 时间：2012-09-26T16:26:01.900
> 
> 标签：javascript, jquery, html, browser

我需要根据用户是在 Android 浏览器还是 iOS 浏览器上查看移动网站上的一些按钮和文本。是否有可靠的方法来执行检查？

* * *

## 回答 #1

> 赞同：152
> 
> 时间：2012-09-26T16:29:26.830

```
var isMobile = {
    Windows: function() {
        return /IEMobile/i.test(navigator.userAgent);
    },
    Android: function() {
        return /Android/i.test(navigator.userAgent);
    },
    BlackBerry: function() {
        return /BlackBerry/i.test(navigator.userAgent);
    },
    iOS: function() {
        return /iPhone|iPad|iPod/i.test(navigator.userAgent);
    },
    any: function() {
        return (isMobile.Android() || isMobile.BlackBerry() || isMobile.iOS() || isMobile.Windows());
    }
}; 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-26T16:29:14.223

我将使用该`navigator.useragent`属性来获取用户代理字符串、解析它并检测操作系统。

~~[这](http://www.quirksmode.org/js/detect.html)是您如何做到这一点的一个示例。~~

**更新：**

由于这个问题很受欢迎，我想我会在我的答案中添加一些额外的信息。

一般来说，浏览器嗅探几乎从来都不是最好的方法。为什么？嗯，有很多原因，但这里有两个很好的原因：

1.  在人们转向浏览器嗅探的几乎所有情况下，**特征检测都是更好的选择**。在极少数情况下，根据用户可能使用的操作系统/浏览器采取行动可能是合适的，但在大多数情况下，使用像[Modernizr](http://modernizr.com/)这样的库来检测对特定功能的支持是一种更好的方法。试图使您的站点/应用程序适应特定的浏览器而不是它们支持的功能是一个滑坡。相反，请检查浏览器是否支持您需要的功能，并在缺少支持时使用 polyfill 或提供不错的回退。
2.  **浏览器嗅探极其复杂**。为什么？因为几乎每个浏览器都位于它们的用户代理字符串中，或​​者缺少足够的信息来进行特定的识别。

话虽如此，如果你真的需要使用浏览器/操作系统检测，那么不要重新发明轮子，也不要试图自己去做——你将进入一个痛苦和晦涩的警告世界！我建议你使用像[WhichBrowser](https://github.com/NielsLeenheer/WhichBrowser)这样的库，它会为你提供一个方便的 JavaScript 对象，其中包含有关操作系统、浏览器、渲染引擎和设备的信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T16:28:30.910

您可以使用导航器对象：[http](http://www.w3schools.com/js/js_browser.asp) ://www.w3schools.com/js/js_browser.asp ，然后根据导航器的属性使用 if 语句。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-29T21:36:54.850

我已经使用了一段时间。基于移动设备的简单检查以查看返回 true 或 false。

```
var isMobile = (/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Windows Phone/i.test(navigator.userAgent)) ? true : false; 
```

# ruby-on-rails - 主动记录和主动关系

> ID：12606247
> 
> 赞同：0
> 
> 时间：2012-09-26T16:26:24.583
> 
> 标签：ruby-on-rails, activerecord, active-relation

Ruby on rails 中的活动记录和活动关系有什么区别？请用非常基本的术语来说明，因为我是 Ruby on rails 的新手并且自己学习它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T16:31:50.633

我发现这个视频是一个很好的描述：

[http://rubyonrails.org/screencasts/rails3/active-relation-active-model](http://rubyonrails.org/screencasts/rails3/active-relation-active-model)

我的理解是你无法比较 2 - ActiveRecord 使用 ActiveRelation 作为它的搜索 API ( [www.railsdispatch.com/posts/activerelation](http://www.railsdispatch.com/posts/activerelation) )

# iphone - 在其父 UIImageView 上显示 UIImageView 图像

> ID：12606255
> 
> 赞同：0
> 
> 时间：2012-09-26T16:27:13.680
> 
> 标签：iphone, ios, uiimageview, uiimage

我有一个简单的任务，但仍然不知道如何使它工作。

我有一个`UIView`，里面我有一半大小`UIView`的主体（一半显示）。在里面我有两个带图像的。`UIImageView``UIView``UIImageView``UIImageViews`

我需要平移 internal `UIImageViews`，这不是问题，但问题是它不会超出父`UIImageView`边界。当我使用两个`UIImage`而不是`UIImageView`.

我试图把它放在顶部（`bringSubviewToFront`），但它没有帮助，因为它的父控制器不是`UIView`. 并且两个内部`UIImageViews`必须是主要的一部分，`UIImageView`因为主要`UIImageView`可以移动，所以我一起移动。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T16:41:12.990

您可以有一个父视图，包含大图像和两个较小的兄弟视图。然后您可以自由控制两个图像的位置，而无需将它们附加到更大的图像上。像这样：

```
-Parent View (the largest, within which all images aare displayed)
 - Large image
 - small image
 - small image 
```

现在小图像是免费的，您可以随时将它们与大图像对齐！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T17:46:57.657

尽管正确的解决方案是拥有一个正确大小的超级视图，但您始终可以通过在父 UIImageView 上设置`clipsToBounds`为来“查看”边界之外的内容。`NO`

这将绘制子视图，即使它们位于父视图的范围之外。但请记住，边界之外的部分不会对触摸做出反应，即命中框总是被剪裁。

# spring - 春季多事务管理器问题

> ID：12606257
> 
> 赞同：7
> 
> 时间：2012-09-26T16:27:20.857
> 
> 标签：spring, transactions

我在两个单独的 spring xml 文件中定义了两个事务管理器，并且它们都加载到 spring 上下文中

文件一

```
 <tx:annotation-driven transaction-manager="transactionManager1"/>

  <bean id="transactionManager1"
       class="org.springframework.jdbc.DataSourceTransactionManager">
    ...
  </bean> 
```

文件二

```
 <tx:annotation-driven transaction-manager="transactionManager2"/>
  <bean id="transactionManager2"
          class="org.springframework.jdbc.DataSourceTransactionManager">
    ...
  </bean> 
```

如果我没有为以下服务指明任何限定符，那么 spring 将使用哪个事务管理器。

```
public class TransactionalService {

    @Transactional
    public void setSomething(String name) { ... }

    @Transactional
    public void doSomething() { ... }
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-26T16:39:49.493

从官方文档中查看[*11.5.6 Using @Transactional ：*](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/transaction.html#transaction-declarative-annotations)

> 如果要连接的 bean 名称具有 name ，则可以省略标记`transaction-manager`中的属性。如果您要依赖注入的 bean 有任何其他名称，那么您必须显式使用该属性 [...]`<tx:annotation-driven/>``PlatformTransactionManager``transactionManager``PlatformTransactionManager``transaction-manager`

由于您的事务管理器都没有被命名`transactionManager`，因此您必须指定应为标有 的方法使用哪个事务管理器`@Transactional`。

* * *

更新：解决您修改后的问题。您可以指定在`@Transactional`注释上使用哪个事务管理器（请参阅：）[`@Transactional.value()`](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/transaction/annotation/Transactional.html#value%28%29)：

```
@Transactional("transactionManager1")
//...

@Transactional("transactionManager2")
//... 
```

但是，我发现您当前的设置存在几个问题：

*   `<tx:annotation-driven/>`您使用不同的事务管理器定义了两次。我不认为这样的配置是有效的

*   如果没有明确提供事务管理器，应该使用哪一个？

我认为应该工作的解决方案是定义`<tx:annotation-driven transaction-manager="transactionManager1"/>`一次并`@Transactional`使用第一个管理器并`@Transactional("transactionManager2")`使用第二个管理器。或者反过来。

# android - Android 中 OnPause 后的 OnCreate 调用

> ID：12606259
> 
> 赞同：1
> 
> 时间：2012-09-26T16:27:26.843
> 
> 标签：android

我正在开发一个应用程序，我在其中创建了三个活动

*   主要活动
*   Second_Activity
*   CustomView_Activity

以下是这些 Activties 调用的过程：

*   MainActivity 调用 Second_Activtiy 并在 Second_Activtiy 的 OnCreate 中创建了 CustomView_Activity 的对象。
*   在 Main_Activity 中，我在 LinearLayout 上有一个按钮，onClick 在 Second_activity OnCreate 中调用 Second_Activity 我必须保持屏幕打开并声明按钮布局等其他内容。
*   在 CustomView_Activity 我创建了画布和 onCanvas 我画了一个矩形。
*   现在，当我的 Second_Activity 在 Main_Activity 之后调用并在按下电源按钮时调用 OnPause 时，我的活动调用

    ```
    OnPause -> OnStop -> OnCreate -> OnResume -> OnRestart -> OnDestroy 
    ```

    当我按下电源按钮在屏幕上`OnResume -> onCreate -> OnRestart`通话时。

由于一次又一次地调用 OnCreate，我的活动没有正确执行任务。

请问谁能帮忙？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T05:55:17.000

当方向再次改变时 Oncreate 被调用。这就是为什么您的活动在第一次之后没有正常运行的原因。

要解决此问题，您已在声明活动的清单文件中声明此问题：

```
android:configChanges="keyboardHidden|orientation" 
```

安卓3.0及以上

```
android:configChanges="orientation|screenSize|keyboardHidden" 
```

当应用程序处于横向并且手机被锁定时，应用程序会重新定向为纵向，因此再次调用 onCreate。为了防止这种情况，添加上面的行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T18:34:20.390

你永远不应该依赖你的任务堆栈来维护你需要的所有状态。相反，使用保存您的活动的状态，`onSaveInstanceState()`并让每个活动基于此状态或传递给它的意图。通过以这种方式设计您的活动流程，系统可以随意创建/销毁活动（通常基于内存需求），并且您的活动将能够从中断的地方继续。

# android - Android 将文本转换为包括字体、颜色和大小在内的位图的最佳方法是什么？

> ID：12606264
> 
> 赞同：1
> 
> 时间：2012-09-26T16:27:43.243
> 
> 标签：android, string, image, text, bitmap

我正在尝试将字符串转换为位图，最后我找到了解决方案：

```
public static Bitmap textToBitmap(Context c, String text, String typeface, int size, int color){

    Paint paint = new Paint();
    paint.setTextSize(size);
    paint.setTextAlign(Paint.Align.LEFT);
    paint.setAntiAlias(true);
    paint.setSubpixelText(true);
    paint.setColor(color);
    Typeface tf = Typeface.createFromAsset(c.getAssets(),typeface);
    paint.setTypeface(tf);
    int width = (int) (paint.measureText(text) + 0.5f); // round
    float baseline = (int) (paint.ascent()*(0.80f) + 0.5f);
    int height = (int) (paint.descent()*(0.5f) - paint.ascent()*(0.70f) + 0.5f);
    Bitmap image = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);
    int y = (int) (baseline*(-1));
    Canvas canvas = new Canvas(image);
    canvas.drawText(text, 0, y, paint);

    return image;

} 
```

我的问题是这个解决方案不适用于所有屏幕（因为宽度和高度不正确）并且有点粗糙。

有没有最好的代码来做到这一点？

非常感谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T16:35:07.227

不是以像素为单位设置大小，而是将它们设置为倾角，然后转换为像素。像这样

```
 final float density = context.getResources().getDisplayMetrics().density;
    final float textSizeDips = 10f;
    final float textSizePixels = Math.round(textSizeDips * density);

    paint.setTextSize(textSizePixels); 
```

这将解决不同屏幕上不同文本大小的问题。

# ms-word - 微软词搜索过去时

> ID：12606273
> 
> 赞同：1
> 
> 时间：2012-09-26T16:28:07.737
> 
> 标签：ms-word

我需要在 Microsoft Word 文档中找到所有过去时词并将它们更新为现在时。我可以使用任何不错的“搜索过去时”工具吗？

搜索所有动词形式并不像我希望的那样有用，我可以这样做，但是我需要知道所有文档中的所有动词。

我的问题是我有 30 多页 400 多页的混合动词形式的文档，使用完美的工具进行搜索会很乏味，但是我目前在每个文档中搜索每个动词的解决方案几乎是不可行的乏味。

* * *

也许只是一本过去时的字典，我可以写一些使用字典来查找要搜索的单词的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T16:34:53.643

我猜想这个程序的英文版本写起来会和手动更正文档一样乏味。

程序员经常成为这种思维的牺牲品。我们都做到了——面对一个令人讨厌的手动解决方案，我们编写了一个程序或脚本，最终得到正确的时间或更长的时间，而不是用铲子手动完成。

把问题分成几部分。从英语语法开始，它可以在每种情况下将动词与所有其他单词区分开来。

为您需要的动词获取动词时态词典。

走抽象句法树，用过去时动词代替它们的现在时对应物。

你没有说你喜欢哪种计算机语言。如果是 Java，我建议查看[ANTLR](http://www.antlr.org)。它是一个很棒的 Java 解析器/生成器。

当我说“编写程序”时，我想你会从这样的事情开始。

认识到一次性完成大部分工作可能是值得的。但无论如何，你都会对每一个进行校对，以确保代码做正确的事情或冒着公开失态的风险。

还有另一种可能性：[众包](http://www.crowdsource.com/)。给 30 多人每人一份文件，并要求他们为一份文件做艰苦的工作。更好的是，将它们分成几部分并使用更多的人。并行是你的朋友。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-14T20:55:16.300

您可能想查看一个名为 VisibleThread 的程序。据我了解，它将为您执行内容分析并找到使用过去时的区域。

# php - PHP date() 从 UNIX Epoch 损失了一个小时

> ID：12606274
> 
> 赞同：3
> 
> 时间：2012-09-26T16:28:10.797
> 
> 标签：php, date, datetime

嗨，我在使用 php date() 函数时遇到了一些奇怪的行为。我正在尝试一次将日期增加一周。

**代码：**

```
<?php
    date_default_timezone_set('Europe/London');
    echo 7*24*60*60;
    echo '<br>';
    echo date('d/m/Y H:i:s', 0);
    echo '<br>';
    echo date('d/m/Y H:i:s', 604800);
?> 
```

这导致以下输出。

**输出：**

```
604800
01/01/1970 01:00:00
08/01/1970 01:00:00 
```

这是您所期望的，日期增加了 7 天到第二个。但是在我达到一定的秒数后，日期功能似乎比日期少了一个小时。

**代码：**

```
<?php
    date_default_timezone_set('Europe/London');
    echo (1351468800 - 1350864000);
    echo '<br>';
    echo date('d/m/Y H:i:s', 1350864000);
    echo '<br>';
    echo date('d/m/Y H:i:s', 1351468800);
?> 
```

结果如下输出

**输出：**

```
604800
22/10/2012 01:00:00
29/10/2012 00:00:00 
```

如您所见，即使两个日期之间的差为 604800 秒，日期也已损失了一个小时。我已经在两个不同的服务器上对此进行了测试，我还使用 DateTime 对象测试了类似的代码，但结果仍然相同。我哪里错了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T16:30:31.260

我相信夏令时在这里开始发挥作用。由于 DST 于 2012 年 10 月 28 日在伦敦结束。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T16:35:33.293

使用`strtotime`更可靠

```
date_default_timezone_set('Europe/London');
$startDate  = "1350864000" ;
$senvenDays = strtotime("+7 day", $startDate);
var_dump(date("d/m/Y H:i:s",$startDate));
var_dump(date("d/m/Y H:i:s",$senvenDays));
var_dump($senvenDays - $startDate); 
```

输出

```
string '22/10/2012 01:00:00' (length=19)
string '29/10/2012 01:00:00' (length=19)
int 608400 
```

# firefox - 无需重启即可更新 Firefox Addon SDK 扩展文件

> ID：12606283
> 
> 赞同：0
> 
> 时间：2012-09-26T16:28:32.647
> 
> 标签：firefox, firefox-addon, firefox-addon-sdk

我正在使用 Firefox 的 Addon SDK (v1.10) 构建一个扩展。此 SDK 的新功能之一是在安装/升级扩展时无需重新启动。

**问题**

我注意到，当从我的 SDK 扩展升级或降级到我的 SDK 扩展的不同版本而不需要重新启动时，“数据”文件夹中的文件在重新启动之前不会更新。

这是来自 Mozilla 的 Addon SDK 加载器的错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T21:09:43.830

因此，Firefox 不会在没有重新启动浏览器的情况下“重新加载” *moz 绑定*（感谢[@Bryan Clark](https://stackoverflow.com/users/897414/bryan-clark)）。

我最终完全重写了我的 UI 实现以停止使用绑定（和 xml 文件），而是动态地生成 XUL 元素并创建绑定用来描述（在 xml 中）没有它的内容。

这意味着当有更新时，我可以动态删除任何旧 XUL 元素并重新添加新元素。

# sql - SQL Server 2005 删除查询慢

> ID：12606284
> 
> 赞同：0
> 
> 时间：2012-09-26T16:28:37.400
> 
> 标签：sql, sql-server, sql-server-2005

我有一个删除查询，每天需要运行删除任何超过 7 天的数据，即大约 600 万条记录。

我的表应该只存储过去 7 天的数据。

这是我正在运行的查询：

```
DELETE FROM [tblTSS_DataCollection]
Where [DatapointDate] < DATEADD(D, -7, GETDATE()) 
```

此查询需要 5.5 分钟才能执行。我有一个包含这个的索引设置，所以我认为它不应该花这么长时间来执行：

```
CREATE UNIQUE NONCLUSTERED INDEX [IX_tblTSS_DataCollection] ON [dbo].  [tblTSS_DataCollection] 
(
[DataPointID] ASC,
[DatapointDate] ASC,
[AssetID] ASC
) 
```

有没有更好的方法来删除这些数据？这需要很长时间，我真的需要能够快速删除这些数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T16:31:58.810

您的索引并不真正支持查询，因为查询没有引用前导键列。因此，无论有没有这个索引，它都必须扫描整个表。如果您经常运行此删除操作，您可能会考虑单独在 DataPointDate 上建立一个索引来支持此删除操作。

如果 DataPointID 是一个 IDENTITY 列，并且 DataPointDate 是按顺序输入的，您还可以考虑这种变体：

```
DECLARE @maxID INT;

SELECT @maxID = MAX(DataPointID) 
  FROM dbo.tblTSS_DataCollection
  WHERE [DatapointDate] < DATEADD(D, -7, GETDATE());

DELETE dbo.tblTSS_DataCollection
  WHERE DataPointID <= @maxID; 
```

您可能会考虑做的另一件事（如果是删除而不是扫描导致缓慢）是（a）确保您的日志有足够的空间来容纳删除，并且不会因为一堆自动增长而杀死您，并且（ b) 分批执行工作：

```
BEGIN TRANSACTION;

SELECT 1;

WHILE @@ROWCOUNT > 0
BEGIN
  COMMIT TRANSACTION;

  DELETE TOP (1000) dbo.tblTSS_DataCollection WHERE ...
END

COMMIT TRANSACTION; 
```

# php - Handlebar 通过带有子数组的 json 迭代/循环

> ID：12606286
> 
> 赞同：0
> 
> 时间：2012-09-26T16:28:46.190
> 
> 标签：php, javascript, json, loops, handlebars.js

我试图用 HandleBars 循环通过以下 JSON；

```
{
"IndexValues": {
    "inv": {
        "1": {
            "live": {
                "INV": "1",
                "ITP": 719.166962
            },
            "day": 14,
            "week": 85,
            "month": 232
        },
        "2": {
            "live": {
                "INV": "2",
                "ITP": 719.166962
            },
            "day": 14,
            "week": 93,
            "month": 237
        },
        "dayK": 28,
        "week": 178,
        "montk": 469
    }
}
} 
```

上面的 JSON 我尝试使用以下 HandleBar 循环：

```
{{#data.IndexValues.inv}}
    <!-- the following is showing data, but is not dynamic -->
    {{this.1.live.INV}}
    <br>
    {{this.2.live.INV}}

    <!-- the following doenst work -->
    {{#this}}
        {{this.live.INV}}
    {{/this}}

    <!-- the following is showing data, but is not dynamic -->
    {{#this}}
        {{this.1.live.INV}}
    {{/this}}
{{/data.IndexValues.inv}} 
```

问题是“inv”是动态的，可能在 1-256 的范围内

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T04:38:40.163

Handlebars 循环仅适用于数组元素（ [ ] 表示法），而不适用于对象字段（ { } 表示法）。您的示例 JSON 中没有数组。您要么 (a) 将 JSON 更改为具有列表，要么 (b) 创建一个新数组，然后将其传递给 Handlebars 模板。

(a) 更改 JSON（添加“inv.data”列表）

```
{
"IndexValues": {
    "inv": {
        data: [{
            "id" : 1,
            "live": {
                "INV": "1",
                "ITP": 719.166962
            },
            "day": 14,
            "week": 85,
            "month": 232
        },
        {
            "id" : 2,
            "live": {
                "INV": "2",
                "ITP": 719.166962
            },
            "day": 14,
            "week": 93,
            "month": 237
        }],
        "dayK": 28,
        "week": 178,
        "montk": 469
    }
}
} 
```

您的车把模板将是：

```
{{#data.IndexValues.inv.data}}
    ...
{{/#data.IndexValues.inv.data}} 
```

# export-to-excel - 将数据导出到服务器端的多个 excel 文件

> ID：12606287
> 
> 赞同：0
> 
> 时间：2012-09-26T16:28:50.323
> 
> 标签：export-to-excel, application-server

这更像是一个设计问题-

在我们具有 300 个并发用户的基于 Web 的应用程序中，需要在每个季度末为我们的客户实体生成季度摘要，这意味着应用程序服务器上有多个 excel 文件（离线处理）。每个实体都有单独的文件是一项要求。大约有 5000 个实体，因此我说的是要生成 5000 个文件。每个文件最多可达到 1MB - 压缩。

我正在寻找有关满足为每个实体生成文件的要求的最佳方法的建议。文件（一项工作）的生成是每晚的，并且必须在每个季度发生 - 恰好是该季度的最后一天。本季度的最后一天可能最终成为工作日。5000 个文件的生成可能会在一夜之间结束，但我不相信这种方法。这些文件将在同一天被推送到文件服务器，供各个订阅者使用。

有没有更好的方法来满足这个要求？为此可以考虑哪些其他替代方法？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T10:39:15.273

如果要求必须恰好在季度的最后一天之后生成报告，那么没有其他选择。你必须在晚上做。我只是想知道几个小时是否足够。也许有必要在多个并发作业中运行报告生成。

# php - 仅允许 POST 请求并使用 .htaccess 拒绝所有其他 REQUEST_METHOD

> ID：12606290
> 
> 赞同：2
> 
> 时间：2012-09-26T16:28:53.973
> 
> 标签：php, .htaccess, web-applications, http-post, httpserver

我有一些电子邮件 PHP 脚本，我不希望用户通过 GET 来查看，但我使用它作为电子邮件发送，如果有人知道的话，使用 wufoo 的 webHook，所以它使用 POST，所以我只想要 POST否则请求被允许，403 或 404 我该怎么做？

我尝试了一些在 SO 上给出的答案并浏览了 apache Web 服务器的文档，我找到的最佳答案是：

```
 RewriteEngine On
 RewriteCond %{REQUEST_METHOD} !=GET
 RewriteRule ^.*$ /path/to 
```

但我想这应该写在我有 PHP 脚本的目录中，我只想在根目录中使用一个 .htaccess。

文件夹结构：

```
 public_html (would want to use this folders .htaccess only)
      -- email 
         -- mail.php (ONLY POST) 
```

我知道我们可以`mail.php`直接使用 REQUEST_METHOD 但我不想这样做，它实际上与脚本无关。

任何人都可以提供一些帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T20:36:18.083

这是非常相似的问题：
[https://serverfault.com/questions/270950/only-allow-get-request-with-htaccess](https://serverfault.com/questions/270950/only-allow-get-request-with-htaccess) 只需创建正确的 .htaccess 文件并将其放在“电子邮件”目录中即可。

您也可以直接在 PHP 中执行此操作。

# django - 在 django 中，我如何同时订购多个“儿童”模型

> ID：12606291
> 
> 赞同：-1
> 
> 时间：2012-09-26T16:28:59.430
> 
> 标签：django, inheritance, model

我有这样的代码：

```
class Base(models.Model):
    pub_date = models.DateTimeField(_('pub_date'),default=timezone.now)

    class Meta:
        abstract = True

class A(Base):
    ...
class B(Base):
    ... 
```

如果我想同时订购 A 和 B 实例，我该怎么办？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T17:01:11.360

您不能组合对抽象类的子级的查询。之后，您需要通过转换为序列并添加或通过`itertools.chain()`.

# php - ImageMagick 多次转换同一图像？

> ID：12606294
> 
> 赞同：4
> 
> 时间：2012-09-26T16:29:14.427
> 
> 标签：php, mysql, linux, process, imagemagick

使用 ImageMagick 调整某些照片的大小时，我注意到服务器速度变慢。执行 a`htop`表明`convert`在同一图像上同时执行了几个类似的命令 (7)。这对于 ImageMagick 是否正常，或者我的代码是否以某种方式`convert`在同一张图像上执行了 Imagemagick 的多次？

我正在使用 ImageMagick `ImageMagick 6.7.9-6 2012-09-18`。

![在此处输入图像描述](../Images/6d7b7d915e790e0081f3fb1a435ff955.png)

**转换--版本**

```
Version: ImageMagick 6.7.9-6 2012-09-18 Q16 http://www.imagemagick.org
Copyright: Copyright (C) 1999-2012 ImageMagick Studio LLC
Features: OpenMP 
```

**附加信息**

*   CentOS 6.3 i686 系统上有 16 个内核。
*   典型的输入图像文件约为 10-100KB。
*   重复（不仅仅是相似）命令的数量范围为 2-16。

**日志记录**

日志显示没有重复调用`convert`两次调整同一图像的大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T18:35:20.703

要调试这一点，需要更多细节。

*   *“......同时有几个类似的转换命令......”*：“几个”到底有多少？！

*   这个系统有多少个 CPU（核心）？

*   到底有多“相似”，这种相似性有什么不同？！

*   *这些类似命令之间的父子*关系是什么？！（`pstree`命令）

*   您的典型输入图像有多大？！

另请报告`convert -version`.

这似乎是一个网络服务，从截图中可以看到的输入 JPEG 目录猜测。*您确定每次上传都没有由 Web 服务启动的多个转换命令吗？*-- 您确定 Web客户端*没有为要转换的每个图像多次联系 Web 服务吗？*

* * *

**更新：**

如果您的`convert -version`报告作为一项功能`OpenMP`，那么您的 ImageMagick 是多线程的，使其能够同时运行多个线程来处理一张大图像。*在处理大型*图像文件时，这可以大大提高效率。（但如果您处理许多小文件，它也会大大降低整体性能......）

我的猜测是您在输出中看不到多个 (16) 个并发*进程*`htop`，而是多个 (16) 个并发执行*线程*。

对于处理小文件的典型用例，您应该通过设置以下环境变量尝试禁用自动多线程：

```
MAGICK_THREAD_LIMIT=1 
```

您还可以对 ImageMagick 命令进行*基准测试*，以更接近要使用的最佳线程数。添加[`-bench iterations`](http://www.imagemagick.org/script/command-line-options.php#bench)打印特定命令的一个或多个线程的经过时间和效率：

```
convert                                        \
  -bench 40                                    \
   /home/photos/public_html/2012/0926/some.jpg \
  -resize 300                                  \
   null: 
```

您的 ImageMagick 6.7.9 能够在对命令进行基准测试时应用渐进式线程。`-bench`（在非 OpenMP 安装中进行测试没有多大意义......）

另请参阅[官方 ImageMagick 论坛中的此讨论](http://www.imagemagick.org/discourse-server/viewtopic.php?f=2&t=20012)。

# api - 如何使用 YouTube API 获取 YouTube 精选视频 URL？

> ID：12606296
> 
> 赞同：1
> 
> 时间：2012-09-26T16:29:21.810
> 
> 标签：api, youtube

如何使用 YouTube API 获取 YouTube 精选视频 URL？

youtube API 示例页面看起来不错：

developer.google.com/youtube/2.0/developers_guide_protocol_channel_search

在示例页面上，`gdata.youtube.com/schemas/2007#featured-video`作品下的 href 视频很好，并为我提供了精选视频的很好的 href，例如“bYKugypF8HA”提供了精选视频 www.youtube.com/watch?v=bYKugypF8HA。

但是，今天运行 youtube API 示例，该 API 似乎不再为精选视频返回良好的 href，API 调用如下：

[https://gdata.youtube.com/feeds/api/channels?q=soccer&start-index=11&max-results=10&v=2&alt=json&prettyprint=true](https://gdata.youtube.com/feeds/api/channels?q=soccer&start-index=11&max-results=10&v=2&alt=json&prettyprint=true)

结果，出现了“链接”：“rel”：“ `http://gdata.youtube.com/schemas/2007#featured-video`”，但是，例如，`AAAAAE-REqU`当我尝试在 YouTube 上播放时，YouTube 将 href 视频“”标记为“视频不可用”：

[http://www.youtube.com/watch?v=AAAAAE9T36k](http://www.youtube.com/watch?v=AAAAAE9T36k)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T10:36:30.070

YouTube API 中当前缺少用户的相关视频。已报告错误。您可以在此处关注进度：[https](https://groups.google.com/forum/?fromgroups=#!topic/youtube-api-gdata/z0x1vmjTsP4) ://groups.google.com/forum/?fromgroups=#!topic/youtube-api-gdata/z0x1vmjTsP4 。

# c# - x：在用户控件库中找不到类型

> ID：12606304
> 
> 赞同：17
> 
> 时间：2012-09-26T16:30:13.303
> 
> 标签：c#, wpf, user-controls, resourcedictionary

我正在尝试`ResourceDictionary`在 WPF 用户控件库项目中创建一个。当我添加以下样式时：

```
<Style TargetType="{x:Type Button}">
    <Setter Property="Background" Value="{StaticResource ResourceKey=GreyBrush}"/>
    <Setter Property="BorderBrush" Value="{StaticResource ResourceKey=LightBlueBrush}"/>
    <Setter Property="BorderThickness" Value="1"/>
    <Style.Triggers>
        <Trigger Property="IsMouseOver" Value="True">
            <Setter Property="Background" Value="{StaticResource ResourceKey=OrangeBrush}"/>
        </Trigger>
        <EventTrigger RoutedEvent="Click">
            <BeginStoryboard>
                <Storyboard>
                    <ColorAnimation Storyboard.TargetProperty="Background.Color" To="{StaticResource ResourceKey=LightOrange}" Duration="0:0:.1"/>
                </Storyboard>
            </BeginStoryboard>
        </EventTrigger>
    </Style.Triggers>
</Style> 
```

我收到一条错误消息：

```
The type 'x:Type' was not found. Verify that you are not missing an assembly reference and that all referenced assemblies have been built. 
```

我将 x 声明为：

```
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
```

这适用于我在 WPF 应用程序项目中创建资源字典，但不是在 UserControl 库项目中。知道为什么吗？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-08-23T12:26:45.773

当我编写 IE 扩展并想创建 WPF 用户控件时，这发生在我身上。由于该项目最初不是 WPF 项目，因此没有对**System.Xaml**的引用，因此添加所述引用解决了该问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T11:57:08.723

在我的项目中有同样的问题。我通过将 Target Framework 从 .NET 3.0 切换到 4.0 解决了这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T17:03:58.940

我不得不不同意，这是我从一个确实有效的 UserControl 的声明。

```
<UserControl x:Class="RedGreenRefactor.View.TestResultsGraph"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
```

错误是否有可能告诉您到底出了什么问题？您是否获得了所需的所有引用程序集？

创建一个新的 WPF 应用程序我得到以下信息。

![WPF 默认引用](../Images/dd5f23072700ca13409f79683862e6b4.png)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-26T17:08:51.170

你是否缺少根

```
<ResourceDictionary xmlns="..."
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"> 
```

，即你在哪里定义x？除此之外

```
<Style TargetType="Button"> 
```

也有效。

# javascript - ES5 | 何时使用 null 何时使用 undefined

> ID：12606306
> 
> 赞同：3
> 
> 时间：2012-09-26T16:30:18.590
> 
> 标签：javascript, ecmascript-5

> **可能重复：**
> [Javascript null 或未定义](https://stackoverflow.com/questions/6429225/javascript-null-or-undefined)

`null`是保留字，但不是关键字。
因此它不能被覆盖。

`undefined`是一个可以被覆盖的内置全局变量。这就是为什么您看到 jQuery 在其 IIFE 中重新定义它的原因。只是为了确保它没有被覆盖。

什么是 ES 5 中指定的何时使用每个的技术区别。

我知道我已经看到浏览器将未创建的 localStorage 属性设置为 null 或 undefined，具体取决于浏览器。

```
localStorage.not_defined === null // sometimes

localStorage.not_defined === undefined // sometimes 
```

ES 5 在这种情况下和一般情况下如何指定它们的用法？

ES5 没有提供说明：

> 8.1 Undefined 类型 Undefined 类型只有一个值，称为 undefined。任何没有被赋值的变量的值都是未定义的。
> 
> 8.2 Null 类型 Null 类型只有一个值，称为 null。

[http://www.ecma-international.org/publications/standards/Ecma-262.htm](http://www.ecma-international.org/publications/standards/Ecma-262.htm)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T20:16:15.757

这两者的区别相当模糊，规范中没有明确说明。

常识如下：`undefined`是从未分配过的变量和不存在的属性。

`null`然而是一个变量或属性的状态，表明它没有赋值。

一些方法，如`getElement...`显式返回`null`以指示结果集为空。如果您的函数没有 return 语句，则隐式`undefined`返回。

一般来说，总是分配`null`并且从不`undefined`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T20:06:27.593

null 是一个值。nothing 的值为空。

undefined 是缺少值。

这就是它应该被使用的方式。

你永远不应该将 undefined 分配给任何东西。这违背了目的。如果要使现有属性未定义，请使用 delete 关键字。

另一方面，null 是分配给变量的合法值。

jQuery 在其闭包中添加了一个未定义变量，因为测试 a === undefined 比编写 typeof a === 'undefined' 更容易。

# android - 使用 WebView 时的 HoloEverywhere CLassNotFoundException

> ID：12606309
> 
> 赞同：5
> 
> 时间：2012-09-26T16:30:45.423
> 
> 标签：android, android-webview, actionbarsherlock, android-holo-everywhere

在我的项目中，我包含了 ActionbarSherlock 和 HoloEverywhere。我在扩展的类中使用 WebView，`SActivity`并且发生以下错误。关于可能是什么问题的任何想法？

```
09-26 11:06:01.508: E/ActivityThread(16109): Failed to inflate
09-26 11:06:01.508: E/ActivityThread(16109): android.view.InflateException: Binary XML file line #2: Error inflating class WebView
09-26 11:06:01.508: E/ActivityThread(16109):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:691)
09-26 11:06:01.508: E/ActivityThread(16109):    at android.view.LayoutInflater.inflate(LayoutInflater.java:466)
09-26 11:06:01.508: E/ActivityThread(16109):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
09-26 11:06:01.508: E/ActivityThread(16109):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
09-26 11:06:01.508: E/ActivityThread(16109):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:251)
09-26 11:06:01.508: E/ActivityThread(16109):    at com.actionbarsherlock.internal.ActionBarSherlockNative.setContentView(ActionBarSherlockNative.java:119)
09-26 11:06:01.508: E/ActivityThread(16109):    at com.WazaBe.HoloEverywhere.sherlock.SActivity.setContentView(SActivity.java:225)
09-26 11:06:01.508: E/ActivityThread(16109):    at com.mccrajsui.MeetingRoomActivity.onCreate(MeetingRoomActivity.java:122)
09-26 11:06:01.508: E/ActivityThread(16109):    at android.app.Activity.performCreate(Activity.java:4465)
09-26 11:06:01.508: E/ActivityThread(16109):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
09-26 11:06:01.508: E/ActivityThread(16109):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2033)
09-26 11:06:01.508: E/ActivityThread(16109):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2104)
09-26 11:06:01.508: E/ActivityThread(16109):    at android.app.ActivityThread.access$600(ActivityThread.java:132)
09-26 11:06:01.508: E/ActivityThread(16109):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1157)
09-26 11:06:01.508: E/ActivityThread(16109):    at android.os.Handler.dispatchMessage(Handler.java:99)
09-26 11:06:01.508: E/ActivityThread(16109):    at android.os.Looper.loop(Looper.java:137)
09-26 11:06:01.508: E/ActivityThread(16109):    at android.app.ActivityThread.main(ActivityThread.java:4575)
09-26 11:06:01.508: E/ActivityThread(16109):    at java.lang.reflect.Method.invokeNative(Native Method)
09-26 11:06:01.508: E/ActivityThread(16109):    at java.lang.reflect.Method.invoke(Method.java:511)
09-26 11:06:01.508: E/ActivityThread(16109):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:789)
09-26 11:06:01.508: E/ActivityThread(16109):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:556)
09-26 11:06:01.508: E/ActivityThread(16109):    at dalvik.system.NativeStart.main(Native Method)
09-26 11:06:01.508: E/ActivityThread(16109): Caused by: java.lang.ClassNotFoundException: android.view.WebView
09-26 11:06:01.508: E/ActivityThread(16109):    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
09-26 11:06:01.508: E/ActivityThread(16109):    at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
09-26 11:06:01.508: E/ActivityThread(16109):    at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
09-26 11:06:01.508: E/ActivityThread(16109):    at android.view.LayoutInflater.createView(LayoutInflater.java:552)
09-26 11:06:01.508: E/ActivityThread(16109):    at com.WazaBe.HoloEverywhere.LayoutInflater.onCreateView(LayoutInflater.java:141)
09-26 11:06:01.508: E/ActivityThread(16109):    at android.view.LayoutInflater.onCreateView(LayoutInflater.java:653)
09-26 11:06:01.508: E/ActivityThread(16109):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:678)
09-26 11:06:01.508: E/ActivityThread(16109):    ... 21 more 
```

布局只是一个 WebView：

```
<?xml version="1.0" encoding="utf-8"?>
<WebView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/my_webview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:scrollbarStyle="insideOverlay" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-31T20:43:03.410

嗯，自己找到了解决办法。只需将`HoloEverywhere Addon Preferences`库添加到项目依赖项中即可。

# android - 如何在不知道当前坐标的情况下在 ImageView 上应用滑动动画？

> ID：12606312
> 
> 赞同：0
> 
> 时间：2012-09-26T16:30:54.300
> 
> 标签：android, animation, imageview

我在屏幕中央的某个位置有一个 ImageView，我想让它向右“滑动”几个像素，最好不必找出它当前的 x 和 y 坐标。

我看到了一个叫做 的东西`Animation.RELATIVE_TO_SELF`，但我不认为这是我认为的意思。当以下代码运行时，图像视图将被拖到左上角。所以我怀疑`Animation.RELATIVE_TO_SELF, 0`是指“零”而不是“留在原地”。

`TranslateAnimation split_slide = new TranslateAnimation( Animation.RELATIVE_TO_SELF,0, Animation.RELATIVE_TO_SELF,0.5f, Animation.RELATIVE_TO_SELF,0, Animation.RELATIVE_TO_SELF,0);`

有没有一种方法可以在不知道当前坐标的情况下在 x-asix 上“滑动”几个像素？请帮忙。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T16:40:12.347

您可以使用[ObjectAnimator](http://developer.android.com/reference/android/animation/ObjectAnimator.html)。将视图 ( `myView`) 滑动 5 个像素：

```
ObjectAnimator animator = ObjectAnimator.ofInt(myView, "x", myView.getX()+5);
animator.start(); 
```

# php - 如何从字符串中获取名字和姓氏？

> ID：12606314
> 
> 赞同：-6
> 
> 时间：2012-09-26T16:31:05.740
> 
> 标签：php

我有一个这样的字符串：

《红蓝绿深灰紫》

我想要一个输出的函数：

“红、蓝、绿、深灰、紫”

我希望彼此相邻的第一个大写字母的单词作为一个标签，同样的东西有 3、4、5 ......

另一个例子：

“柠檬橙苹果美味黑莓”==>“柠檬、橙子、苹果、美味黑莓”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T17:26:40.780

是的，这是一个糟糕的问题，但这对我来说似乎是一个很好的挑战。您可以使用此正则表达式。

```
/(([A-Z][a-z]* ?)+?(?= |$))|([a-z]+)/ 
```

和 PHP 代码：

```
$string = 'red blue green Dark Grey purple';
preg_match_all('/(([A-Z][a-z]* ?)+?(?= |$))|([a-z]+)/', $string, $ans);

print_r($ans[0]); /*  Array
                   *  (
                   *    [0] => red
                   *    [1] => blue
                   *    [2] => green
                   *    [3] => Dark Grey
                   *    [4] => purple
                   *  )                     
                   */

$string = 'lemon orange apple Delicious Black Berry';
preg_match_all('/(([A-Z][a-z]* ?)+?(?= |$))|([a-z]+)/', $string, $ans);

print_r($ans[0]); /*  Array
                   *  (
                   *    [0] => lemon
                   *    [1] => orange
                   *    [2] => apple
                   *    [3] => Delicious Black Berry
                   *  ) 
                   */ 
```

**正则表达式的解释。**这分为两部分。一部分查找以大写字母开头的单词，`(([A-Z][a-z]* ?)+?(?= |$))`另一部分查找小写单词`([a-z]+)`。因此，我将从大写字母部分开始分两部分进行解释。

*   **`(([A-Z][a-z]* ?)+?(?= |$)) Explanation`**
*   `([A-Z][a-z]* ?)+?`- （[匹配大写字母] [后跟 0 个或多个小写字母]（后跟空格或什么都没有）至少一次，但与模式匹配的数量最少
*   `(?= |$)`- （不匹配但确保下一个字符是空格或字符串的结尾）

如果没有匹配项，它将尝试以下操作：

*   **`([a-z]+) Explanation`**
*   `([a-z]+)`- [尽可能多次匹配至少 1 个小写字母]

享受。:)

# windows - 在弹出窗口外单击时如何隐藏或销毁弹出窗口

> ID：12606318
> 
> 赞同：-1
> 
> 时间：2012-09-26T16:31:16.003
> 
> 标签：windows, winapi, popup

当单击一个按钮时，我会创建一个带有弹出式样式的窗口并显示它。而且，当我在窗口外单击时，我想隐藏或销毁此窗口。我可以通过使用 wm_killfocus 消息来做到这一点。当窗口收到消息时，隐藏窗口。但问题是：当窗口存在时，如果我点击按钮，窗口应该隐藏。但事实是：当点击按钮时，窗口收到 wm_killfocus 消息，然后按钮收到 WM_lbuttondown 消息，收到 wm_killfocus 时窗口隐藏，点击消息事件让窗口再次显示。所以，最终的效果是窗口不隐藏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T23:14:29.443

不要立即销毁窗口，而是通过向自己发布自定义窗口消息`PostMessage()`。如果在收到消息之前单击了按钮，请在某处设置一个标志并根据需要更新现有窗口。当消息处理程序接收到消息时，只有在未设置标志时才隐藏/销毁窗口。

# php - Magento 1.7 创建订单控制器错误

> ID：12606320
> 
> 赞同：1
> 
> 时间：2012-09-26T16:31:24.193
> 
> 标签：php, magento-1.7

我最近升级到 Magento 1.7.0.2，当我尝试在管理面板中创建订单时，出现 500 服务器错误并记录如下：

`PHP Fatal error: Call to undefined method Mage_Catalog_Helper_Product::setSkipSaleableCheck() in /var/www/vhosts/dev.mydomain.com/httpdocs/app/code/core/Mage/Adminhtml/controllers/Sales/Order/CreateController.php on line 45, referer: https://dev.mydomain.com/index.php/admin/sales_order/index/key/5da67d5b8c41312785d474f556dbfb7f/`

还没有找到有类似问题的人......有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T19:55:56.330

我安装了 Magento 1.7.0.2，这个错误不应该发生！升级可能遗漏了一些 Magento 核心代码。你是怎么升级的？

此错误消息表明类 Mage_Catalog_Helper_Product (~/app/code/core/Mage/Catalog/Helper/Product.php) 不包含方法“setSkipSaleableCheck”。在我的 v1.7.0.2 副本中，我确实有这种方法。

打开 ~/app/code/core/Mage/Catalog/Helper/Product.php 并搜索“public function setSkipSaleableCheck($skipSaleableCheck = false)”。如果此方法定义不存在，则下载 Magento 1.7.0.2 的 vanilla 版本并替换此文件。

这应该只修复缺少的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T21:09:20.723

我有同样的问题。有人有想法吗？

嘿迈尔斯：经过一番大规模的狩猎后，我找到了解决方案...... [http://www.magentocommerce.com/boards/viewthread/205818/#t324666](http://www.magentocommerce.com/boards/viewthread/205818/#t324666)

WarehouseMultimedia 的帖子很有帮助。php.ini 的改变就是诀窍。我从未编辑过 .htaccess 文件，它正在工作。我也在 1.7 版上，它的解决方案仍然有效。

“……

我通过增加 php.ini 和 .htaccess 中的 memory_limit 和 max_execution_time 设置来解决这个问题：

php.ini

```
memory_limit = 256M

max_execution_time = 18000 
```

.htaccess

```
php_value memory_limit 256M

php_value max_execution_time 18000 
```

"

这似乎是 bluehost 独有的问题。你用的是蓝主机吗？

# android - 用户应用程序是否可以（随时）在 android 中捕获屏幕截图？

> ID：12606322
> 
> 赞同：-1
> 
> 时间：2012-09-26T16:31:28.497
> 
> 标签：android

是否可以在 android 中使用用户应用程序捕获用户拥有的任何视图的屏幕截图 - 无需 root/adb。所以基本上我想创建一个截图应用程序。希望我的疑问足够清楚。android 是否允许用户应用程序执行此操作没有足够的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T18:00:11.303

> 是否可以在 android 中使用用户应用程序捕获用户拥有的任何视图的屏幕截图 - 无需 root/adb。

在您自己的应用程序中，您可以让 Activity 将其 UI 呈现为支持位图的`Canvas`.

对于其他应用程序，出于明显的隐私和安全原因，这在 OS/SDK 级别是不可能的。有一些具有安全漏洞的设备可以启用此功能。

# ms-access - 链接表 ms 访问 2010 更改连接字符串

> ID：12606326
> 
> 赞同：23
> 
> 时间：2012-09-26T16:31:38.703
> 
> 标签：ms-access

我正在处理一个现有的 MS Access 2010 项目，该项目具有指向 Sql Server 数据库的链接表链接。

当我将鼠标悬停在链接表上时，我可以看到一个连接字符串`'ODBC;DRIVER=SQL Server;SERVER=10.0.0.1;UID=testdb;APP=Microsoft Office 2003;WSID=abc;TABLE=dbo.user'`

这看起来像一个无 dsn 的链接表。

问题

1.  连接字符串位于何处？如何更改它（示例数据库名称）？

2.  如何创建类似的无 dsn 链接表？每当我创建链接表时，Access 2010 总是强迫我选择\创建一个 dsn（文件或机器）。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-09-26T18:36:30.090

打印所有连接字符串：

```
Dim tdf As TableDef
Dim db As Database

    Set db = CurrentDb

    For Each tdf In CurrentDb.TableDefs
        If tdf.Connect <> vbNullString Then
           Debug.Print tdf.Name; " -- "; tdf.SourceTableName; " -- "; tdf.Connect
        End If
    Next 
```

要创建链接表：

```
With CurrentDb
    ''If the table does not have a unique index, you will need to create one
    ''if you wish to update.
    Set tdf = .CreateTableDef("LocalName")
    tdf.Connect = "ODBC;DRIVER=SQL Server;SERVER=10.0.0.1;" _
      & "UID=testdb;APP=Microsoft Office 2003;WSID=abc;TABLE=dbo.user"
    tdf.SourceTableName = "TABLE_NAME"
    .TableDefs.Append tdf
    .TableDefs.Refresh
End With 
```

要更改链接：

```
 Set db = CurrentDB
    Set tdf = db.TableDefs("MyTable")
    tdf.Connect = "ODBC;DRIVER=SQL Server;SERVER=10.0.0.1;" _
      & "UID=testdb;APP=Microsoft Office 2003;WSID=abc;TABLE=dbo.user"
    tdf.RefreshLink 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2014-10-21T09:21:51.937

您可以使用以下指南（[原始来源](http://elbsolutions.com/projects/changing-the-server-name-or-location-of-a-linked-table-in-ms-access/)）更改连接字符串。

首先，获取现有的连接字符串。

1.  打开 MS 访问
2.  右键单击曾经可以工作的表格，或者您确定可以工作，然后选择“设计视图”。
3.  在警告屏幕上选择是继续
4.  如果右侧没有表的属性窗口，请在功能区 (Access 2010) 上单击属性表
5.  这显示了一个描述属性——复制它在该属性中的所有内容并将其粘贴到记事本或其他地方以备后用。

其次更新连接字符串。

1.  单击功能区中的外部数据，然后选择“链接表管理器”
    1.  单击始终提示输入新位置复选框 - 这是询问用户是否浪费了更改连接信息的复杂方式
    2.  单击全选按钮或使用复选标记选择要更新的表
    3.  点击确定
2.  出现一个对话框。点击新建
    1.  选择 SQL Server 作为您的驱动程序
    2.  单击高级按钮
    3.  将所有内容粘贴到记事本中
        *   EXCEPT REMOVE the TABLE=... 填充到下一个分号。
        *   更改服务器名称
        *   点击确定
    4.  然后它会提示您将所有这些保存到文件中以备后用。在连接文件夹中的“我的文档”中选择一个位置 - 或者更好的是在网络位置供其他人稍后使用
    5.  单击确定几次
    6.  现在 Access 将用新的 DSN（连接详细信息）字符串替换您的所有表。

# mongodb - 有没有一种懒惰的方法可以让程序以分布式方式在 MongoDB 中的数据上运行？

> ID：12606328
> 
> 赞同：0
> 
> 时间：2012-09-26T16:31:40.153
> 
> 标签：mongodb

我有一个 MongoDB 设置，例如 2 个分片和每个分片 2 台机器，总共 4 台物理机。我还有一个程序可以查询一些文档，对每个文档进行一些处理，然后在数据库中写回每个文档的新版本来替换旧版本（但保持分片键相同）。

现在，我想让*同一个*程序以分布式方式运行，所以一个简单的想法是在 4 台物理机器中的每台机器上运行程序的单独实例。

棘手的部分是我希望程序的每个实例只检索和处理位于同一物理机器上的数据（以最大限度地减少数据在网络上的移动）。

我正在考虑而不是更改程序（为了通过查询“config”db等来检查哪些文档存在于本地机器中），而只是让程序的每个实例连接到本地mongod进程。这样，通过运行完全相同的查询，它应该只检索和处理本地结果。

这种方法行得通吗？我错过了什么吗？

# python - Scripting Hashbang：如何获得 python 2 解释器？

> ID：12606333
> 
> 赞同：3
> 
> 时间：2012-09-26T16:31:51.180
> 
> 标签：python, linux, shell, unix, python-2.7

我正在编写必须在许多不同的类 UNIX 版本上运行的脚本。这些是用 python 2.x 编写的。

不幸的是，一些较新的版本已将这种风味的二进制文件称为“python2”而不是“python”。因此，“#!/usr/bin/env python”无法查找正确安装的 python 解释器。要么我得到版本 3 解释器（坏），要么根本没有解释器（更糟！）

有没有一种聪明的方法来编写 python 脚本，如果安装了 python2 解释器，它将加载，否则如果安装了 python 解释器？我必须使用其他机制来检测“python”何时是 python3，但由于那时我处于类似 python 的环境中，所以我可以忍受。

我想我可以编写一个涟漪启动器，将其称为“findpython2”，并将其用作 #! 脚本的解释器，但这意味着我必须在搜索路径中安装 findpython2，这绝对是次优的（这些脚本通常通过绝对引用调用，因此它们不在路径中。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T17:53:04.230

从著名的 perl hashbang 技巧中获得灵感，我想出了这个：

```
#!/bin/sh
"""":
python2 -c "" 2>/dev/null && exec python2 $0 ${1+"$@"}
python  -c "" 2>/dev/null && exec python  $0 ${1+"$@"}
echo "Could not find a python interpreter."
exit 1
"""

print "hello python" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-26T16:34:57.777

unix 方法是指定`python2`- 大多数好的发行版现在将安装 2.x as`python2`和 3.x as `python3`，将*主要*的一个链接到`python`（在大多数发行版中，2.x）。因此，最好明确指定您想要的那个。

这一切都在[PEP 394](http://www.python.org/dev/peps/pep-0394/)中定义，其中规定：

> 这个 PEP 提供了一个约定，以确保 Python 脚本可以继续在 *nix 系统之间移植，而不管 Python 解释器的默认版本（即由 python 命令调用的版本）。
> 
> *   python2 将引用 Python 2.x 的某些版本
> *   python3 将引用 Python 3.x 的某些版本
> *   python 应该与 python2 引用相同的目标，但在某些前沿分布上可能会引用 python3

因此，如果发行版不这样做，那本质上是他们的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T16:35:17.217

如果必须继续运行`python 2`，最好也将解释器称为`python2`. 我认为大多数 UNIX 版本都有来自`/usr/bin/python/`和`/usr/bin/python2`指向适当二进制文件的符号链接。

# c# - 以任意顺序短路等待所有任务

> ID：12606341
> 
> 赞同：3
> 
> 时间：2012-09-26T16:32:14.127
> 
> 标签：c#, async-await

我需要对 Web 服务进行一系列调用以获取一组节点计数。我正在并行、异步地进行所有调用。发起呼叫后，我将结果汇总如下：

```
//pendingTasks is List<Task<int>>
int sum = 0;
foreach (var task in pendingTasks)
{
    sum += await task;
    if (sum > 100) break;
} 
```

休息是因为我不在乎超过 100 后的具体计数。

首先，像这样跳出循环有危险吗？留下待处理的任务是不是很糟糕？它会造成任何形式的内存泄漏吗？

其次，个别调用相当不一致。如果第一个电话是最长的电话，我会讨厌它，并且我最终会等待它，即使所有后续电话的总和都超过 100。当个别结果返回时，将其添加到总和中会很好，在命令他们收到。我以前用过`WhenAll`，我很确定`WhenAny`是我想要的，但我不太确定在这种情况下如何使用它，我想在它们进入时处理多个，然后在它们全部完成时终止.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T16:37:11.767

> 首先，像这样跳出循环有危险吗？留下待处理的任务是不是很糟糕？它会造成任何形式的内存泄漏吗？

它不会造成内存泄漏，但如果任务有与之关联的取消令牌，取消它们以避免不必要的额外工作将很有用。

在 .NET 4 中，出现错误但没有“观察到”这些错误的任务会默认（故意）关闭一个进程，但对于 .NET 4.5，这已经放宽了。

> 我以前用过WhenAll，我很确定WhenAny是我想要的，但我不太确定如何在这种情况下使用它，我想在它们进入时处理多个，然后在它们出现时终止全部做完。

`WhenAny`当然*可以*在这里为您工作，但另一种方法是“神奇地”重新排序任务，以便您可以按照它们完成的顺序迭代它们。或者更确切地说，按照完成的顺序迭代*获得与原始任务相同结果的新任务。*

不久前我写了[一篇关于这个主题的博客文章](http://msmvps.com/blogs/jon_skeet/archive/2012/01/16/eduasync-part-19-ordering-by-completion-ahead-of-time.aspx)——尽管这不是我的主意。基本上，您创建一堆`TaskCompletionSource`对象 - 每个原始任务一个对象 - 并为每个原始任务添加一个延续，以填充“下一个可用”任务完成源。

[有关](http://msmvps.com/blogs/jon_skeet/archive/2011/11/22/eduasync-part-16-example-of-composition-majority-voting.aspx)如何使用. `WhenAny`_ _ “魔术重新排序”创建了一个新的任务集合，但随后只是为每个原始任务附加了一个延续，所以没有什么真正等待所有这些......你可以一次迭代它们，等待每个一个轮流。`n``WhenAny`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T21:03:20.500

Jon Skeet 的回答和 Stephen Toub 方法的链接都很棒。

另一种方法是使用`BufferBlock<int>`TPL DataFlow 库中的一个。如果您有权编辑任务的参数，您可以简单地传入 a`BufferBlock`和`Post`您的结果：

```
var buffer = new BufferBlock<int>();

//Run your tasks somehow like so:
YourAsyncFunctionThatPostsAnInt(buffer, cancellationTokenSource.Token)
...

int sum = 0;
while(sum < 100)
{
    sum += await buffer.ReceiveAsync()
}

buffer.Complete();
cancellationTokenSource.Cancel(); 
```

即使使用现有的任务，您也可以将它们的延续添加`Post`到缓冲区的结果中。取消令牌是缩短其执行的最佳方式。

# outlook - eshot 仅在 Outlook 2007 中超出表格宽度

> ID：12606347
> 
> 赞同：1
> 
> 时间：2012-09-26T16:32:35.987
> 
> 标签：outlook, outlook-2007, newsletter

我有一个在 Outlook 2003、Gmail、Hotmail、Yahoo Mail 和 Thunderbird 中工作的 eshot，它在 Outlook 2007 中有 90%，但是有一些文本超出了主表格的宽度。

![示例图像](../Images/9b06390d55dc3596602ac2ffba4aca52.png)

请参阅文本“Closing date：”及其下方的日期......这应该与表格的边缘对齐（应该是图像顶部的虚线 hr 的边缘）。

出于某种原因，Outlook 2007 正在拉伸表格并破坏布局。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:50:41.390

问题是由时事通讯下方的 3 张图片引起的。3 张图像的总宽度是表格的确切宽度。每个图像都在自己的 td 中。不知何故，在 Outlook 2007 中，这导致表格拉伸。

我通过将带有图像的 tds 行放入它们自己的嵌套表中来解决问题，该嵌套表与外部表的宽度相同。

# api - 当我使用 Z3_parse_smtlib2_file 解析 Z3 中提供的示例文件时出现解析错误

> ID：12606349
> 
> 赞同：1
> 
> 时间：2012-09-26T16:32:40.997
> 
> 标签：api, z3, parse-error

我正在使用 Z3 4.1，我想在我的程序中解析 smt lib2 格式的输入。

所以我首先尝试使用`Z3_parse_smtlib2_file`来解析 Z3 中提供的示例（位于文件夹 Z3-4.1/examples/smtlib 下）。但是我发现很多解析错误，然后我的程序立即退出。我认为输入格式应该是正确的。我尝试使用以下代码解析 Z3.2.smt2：

```
(set-option :auto-config true)
(set-option :produce-models true)

(declare-const a Int)
(declare-fun f (Int Bool) Int)
(assert (> a 10))
(assert (< (f a true) 100))
(check-sat) 
```

结果如下：

```
smt2parser_example
(error "line 1 column 26: error setting ':auto-config', option value cannot be modified after initialization")
Error code: 4
BUG: incorrect use of Z3. 
```

API 是这样调用的：

```
fs = Z3_parse_smtlib2_file(ctx, fname, 0, 0, 0, 0, 0, 0); 
```

问题出在哪里 ？输入文件应该没问题。问题在于 Z3_parse_smtlib2_file 中的参数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T18:26:04.257

如错误消息所示，一旦 Z3 上下文初始化，就无法修改 auto-config 选项。只有少数选项是可变的，并且可以在创建上下文后更改，并且自动配置不在其中。当线

```
(set-option :auto-config true) 
```

从它正确解析的输入文件中删除。如果您的应用程序需要设置任何选项，最好将它们直接传递给上下文构造函数，即通过将`config`（在 C++ 中）或`Z3_config`（在 C 中）对象传递给它。

# eclipse - 如何在 JavaDoc 中使用 @docRoot？

> ID：12606350
> 
> 赞同：1
> 
> 时间：2012-09-26T16:32:43.367
> 
> 标签：eclipse, javadoc

我在 Eclipse 项目中使用 JavaDoc 注释。我有一个图像 (png) 我`<img>`为项目文件夹中的元素创建了一个路径。问题是它是硬编码的：`C:\FilePath\...\image.png`. 如果另一个人想在他们的计算机上查看这个项目，由于硬编码的路径，它不会显示该图像。

我偶然发现，`@docRoot`但我找不到任何地方显示如何使用它。例子将不胜感激。**我需要在我的项目中创建一个到同一位置的相对路径，以便我可以在任何计算机上显示该 png。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-16T05:03:28.783

这是 android-sdk 安装文件 Button.class 中 javadoc 的摘录。

```
 * . . .   For more information and an example, see <a
 * href="{@docRoot}guide/topics/resources/drawable-resource.html#StateList">State List
 * Drawable . . . 
```

这里@docRoot 用于编写对 html 教程的引用。在我的情况下，@docRoot 转换为以下路径：

```
file:/C:/Users/<username>/AppData/Local/Android/android-sdk/docs/reference/ 
```

我用 '/' 结束了路径，但实际上似乎存在问题，@docRoot 中缺少最后一个斜杠，使得所有这些引用都是错误的路径。
如果您使用它，请确保在 {@docRoot} 之后添加斜杠。我还没有找到是否可以更改@docRoot。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-18T14:26:54.040

在 Eclipse JDT 4.4.1 中，我必须使用：

```
 /**
     * @see <a href="../../../../../../../target/process-test-coverage/report.html">Process Test Coverage Report</a> 
     */
    public void calculateCoverageForAllTests() throws Exception {
        ...
    } 
```

因为`{@docRoot}`在 Javadoc 视图中似乎不起作用并悬停：

```
 /**
     * @see <a href="{@docRoot}/target/process-test-coverage/report.html">Process Test Coverage Report</a> 
     */ 
```

并产生以下错误：

> **无法加载页面**
> 
> 加载 URL 文件时出现问题：///home-falko/camunda/eclipse-workspace/compensation-triggered-from-outside/src/test/java/com/camunda/demo/compensation_triggered_from_outside/{@docRoot}/target/过程测试覆盖/report.html

虽然这应该根据[Eclipse JDT 3.5 发行说明工作](http://archive.eclipse.org/eclipse/downloads/drops/R-3.5-200906111540/eclipse-news-part2.html)

# html - CSS 未相对于父级应用

> ID：12606354
> 
> 赞同：0
> 
> 时间：2012-09-26T16:33:05.147
> 
> 标签：html, css, parent-child

我在一个 ID 为**"Container"的 div 中有一个 ID=** **"outer"**的 div 。我正在尝试调整相对于父级的外部 div 属性，即它的宽度、高度等应该相对于div。我不明白为什么它没有被应用。我知道因为这个原因，我的菜单也没有调整。请有人找出我的代码中的错误吗？谢谢。**`Container`**

 ****HTML 代码：**

```
<body>
<div id="container">
<header>
<img width="60%" alt="Logo" src="images/logo.jpg">
<div id="divHeader"><br /><br />
<input type="text" placeholder="Enter text here">
<input type="radio" value="Pages" checked="true" name="searchOpt">Pages
<input type="radio" value="Contact People" name="searchOpt"/>Contact People
<input type="button"  value="Search"/>
</div>
</header>
<!--pop up menu-->
<div id="outer">
<div id="menu">
<ul id="nav">
    <li id="nav1"><a href="">News & Events</a></li>
    <li id="nav2"><a href="">Facilities</a></li>
    <li id="nav3"><a href="">Research</a></li>
    <li id="nav4"><a href="">Programmes</a></li>
    <li id="nav5"><a href="">Faculty</a></li>
</ul>
</div>
</div>
</div>
</body> 
```

**CSS 代码：**

```
body { 

background-color:#0a1857;
}
#container
{
width:80%;
height:100%;
background-color:#FFFFFF;
position:fixed;
right:10%;
left:10%; 
}
header
{
width:100%;
height:15%;}

#divHeader
{
float:right;}

#outer
{
padding-left:20%;
width:80%;
height:40%;
background-image:url('images/image_31.jpg');
background-repeat:no-repeat;
background-position:center; }

#menu { 
position:relative;
top:220px;
right:170px;  
 width:108%;
height:20%;
text-align:center;
}
#menu a { 
display: block; 
text-decoration: none; 
color: #3B5330;}
#menu a:hover { background: #B0BD97;}

#menu ul li {
font:12px georgia; 
list-style-type:none;
float: left; 
width: 20%; 
font-weight: bold; 
border-top: solid 1px #283923; 
border-bottom: solid 1px #283923; 
background: #979E71;}
#menu ul li a { 
font-weight: bold;
padding: 15px 10px;}
#menu li{ 
position:relative; 
float:left;}
#popup_menu ul li
{
float:none;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T16:36:30.490

您是否尝试添加：

```
position: relative; 
```

到外部div？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T21:43:51.110

我找到了问题的主要原因。我的孩子 div 是根据浏览器定位和安排自己的，而不是像父母那样，因为：

`position:relative;`

我将其替换为：

`position:absolute;`

**从[这里](http://www.w3schools.com/Css/css_positioning.asp)**参考****

 **> **相对定位**元素相对于其正常位置进行定位。相对定位的元素的内容可以移动并与其他元素重叠，但在正常流程中仍会保留该元素的预留空间。用于*元素*充当`Containers.`
> 
> **绝对定位**元素是相对于第一个具有非静态位置的父元素定位的。如果没有找到这样的元素，则包含块是`html`标记。****

# c++ - 如何将制表符长度与Qt中的多个空格匹配

> ID：12606365
> 
> 赞同：2
> 
> 时间：2012-09-26T16:33:51.463
> 
> 标签：c++, qt, qtextedit

我无法使 QTextEdit 中的选项卡与一些空格的大小相同，比如 4。

我在 Mac 上使用 Qt 4.8.1，并且尝试了几种不同的等宽字体。在每种情况下，我都尝试使用 fontMetrics.width() 和 fontMetrics.boundingRect().width()。传入 ' ' 并乘以 4 并传入 " " 会返回一致的大小，但是当我设置制表位宽度时，它会稍微偏离。更糟糕的是，错误会累积。如果我键入 6 个制表符，并且在下面键入 6 * 4 个空格，则光标最终会出现在一个截然不同的位置。

即使手动调整数字，我也无法找到完全匹配并保持制表符和等效空格一致的整数像素。

有没有其他人遇到过这个问题？除了用空格替换制表符之外，您是否找到了解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T14:02:28.423

你试过用这个吗？

```
QFontMetrics::tightBoundingRect("    ") 
```

我在这里找到了建议，但不幸的是它没有提到它是否成功： http: [//lists.qt.nokia.com/pipermail/qt-interest/2009-June/007924.html](http://lists.qt.nokia.com/pipermail/qt-interest/2009-June/007924.html)

请让我知道它是否适合你:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-14T12:44:17.680

我和你有同样的问题，我调用`setTabStopWidth(4 * fontMetrics().width(' '));`QPlainTextEdit 构造函数。但是当我在它的构造函数之后调用它时，它可以工作！我不知道它背后的魔力......

# javascript - 用于读取 HTML5 自定义数据属性的原生 JS

> ID：12606367
> 
> 赞同：5
> 
> 时间：2012-09-26T16:34:07.937
> 
> 标签：javascript, html

我了解到 HTML5 包含一种使用 data- 前缀在元素上设置自定义属性的方法。但是，在如何在 javascript 代码块期间读取属性方面，我有点担心。我想这是我对 DOMStringMap 工作原理的解释。

有人可以简化如何阅读以下示例 html 的属性。

```
<span data-complex-key="howtoRead" data-id="anId">inner</span> 
```

尝试跟随并没有真正按预期工作

```
spanEl.dataset['id']                    // straight-forward and result is anId
spanEl.dataset['complex-key']           // undefined
spanEl.dataset['complex']['key']        // throws 'cannot read property of undefined'
spanEl.getAttribute('complex-key')      // there's a null however,
spanEl.getAttribute('data-complex-key') // this variant seems to work 
```

让我想知道的另一件事是，CSS 选择器似乎遵循与我在 DOM 中编写的完全相同的模式，那么为什么从 javascript 中读取不是这种情况。

例如，这将匹配

```
 span[data-complex-key="howtoRead"] { color:green } 
```

感谢您的帮助，对 HTML5 画布、视频和本地数据存储的了解仍然越来越多：)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-26T16:35:38.013

在 vanilla-JS 中，假设`spanEl`是对 DOM 节点的引用

```
spanEl.dataset.complexKey 
```

当您的数据属性包含连字符[(](http://jsbin.com/oduguw/3/edit)`camelCase` )并且`-`

```
spanEl.getAttribute('data-complex-key') 
```

正如您已经注意到的那样，它将正常工作。附带说明一下，在 jQuery 中，您可以`data`使用

```
$(spanEl).data("complex-key") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T16:50:15.703

在 Chrome 中，它似乎以一种不那么直接的方式映射数据键：

```
console.log(spanEl.dataset);​​​​​​​​​​​​​​
//shows:
//DOMStringMap
//  complexKey: "howtoRead"
//  id: "anId" 
```

它将“complex-key”转换为“complexKey”。

虽然不是完全简单，但此行为在此处的 HTML5 规范中定义：

[http://dev.w3.org/html5/spec//global-attributes.html#dom-dataset](http://dev.w3.org/html5/spec//global-attributes.html#dom-dataset)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T16:50:31.280

您的第一个和最后一个方法在不使用任何库的情况下是正确的。然而，带有减号的键被转换为驼峰式，因此 complex-key 变为 complexKey：

```
spanEl.dataset['id']
spanEl.dataset['complexKey']
spanEl.getAttribute('data-complex-key') 
```

但是，只有最后一个在 IE 中工作，最多 9 个。（我不知道 10 个。）在这种情况下，数据属性只不过是具有命名约定的普通属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T16:36:53.283

```
 spanEl.dataSet["complexKey"] 
```

//使用jQuery你可以试试这个

```
 $('span').data('complex-key')  // Will give you **howtoRead**

    $('span').data('id')  // Will give you **anId** 
```

# objective-c - IOS UIBarButtonItem 工作正常，而 UIButton 导致 Unrecognized Selector Sent to Instance

> ID：12606369
> 
> 赞同：2
> 
> 时间：2012-09-26T16:34:09.387
> 
> 标签：objective-c, ios, uibutton, uibarbuttonitem, unrecognized-selector

我正在尝试实现一个自定义导航栏按钮项，当用户单击以调用一个函数时，我有一个选择器。如果我将栏项目设置为`UIBarButtonItem`它就可以正常工作，但我必须为按钮使用自定义图像，没有边框和适当的大小。

所以在 viewdidload 我打电话

```
- (void)viewDidLoad 
{
    [super viewDidLoad];
    //gear button on navigation Bar
    UIImage* imageback2 = [UIImage imageNamed:@"ICON - Gear-BarstyleItem@2x.png"];
    CGRect frameimgback2 = CGRectMake(0, 0, 40, 40);

    UIButton *backButton2 = [[UIButton alloc] initWithFrame:frameimgback2];
    [backButton2 setBackgroundImage:imageback2 forState:UIControlStateNormal];
    [backButton2 addTarget:self
                    action:@selector(setColorButtonTapped:)
          forControlEvents:UIControlEventTouchUpInside];

    UIBarButtonItem *btn2 = [[UIBarButtonItem alloc] initWithCustomView:backButton2];

    UIBarButtonItem *btn3 =[[UIBarButtonItem alloc] initWithImage:imageback2 style:UIBarButtonItemStylePlain target:self action:@selector(setColorButtonTapped:)];

    self.navigationItem.rightBarButtonItem = btn2;
}

#pragma mark Callbacks

- (IBAction)setColorButtonTapped:(id)sender{
    if (_colorPicker == nil) {
        self.colorPicker = [[ColorPickerController alloc] initWithStyle:UITableViewStylePlain];
        _colorPicker.delegate = self;
        self.colorPickerPopover = [[UIPopoverController alloc] initWithContentViewController:_colorPicker];
    }
    [self.colorPickerPopover presentPopoverFromBarButtonItem:sender permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
} 
```

这给了我：

```
-[UIButton view]: unrecognized selector sent to instance 0x9466620
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UIButton view]: unrecognized selector sent to instance 0x9466620' 
```

如果我设置

```
 self.navigationItem.rightBarButtonItem = btn2; 
```

到

```
 self.navigationItem.rightBarButtonItem = btn3; 
```

它工作正常，但按钮有边框和背景颜色和较小的图像尺寸

那么为什么它给我错误，我怎样才能让这个按钮成为一个自定义按钮呢？

编辑：

当我添加一个 void 函数时

```
- (void)gearTapped{
    [self setColorButtonTapped:self];
} 
```

并在按钮处更改选择器它不会给出任何错误，但它只会在屏幕中间显示弹出一行

```
[backButton2 addTarget:self
                    action:@selector(gearTapped)
          forControlEvents:UIControlEventTouchUpInside]; 
```

![在此处输入图像描述](../Images/6ad509357f9ab2f73aab513d87d62e5f.png)

它通常应该像这样工作，但有一个自定义按钮 ![在此处输入图像描述](../Images/b860c7abcf6336483246d67061e38c35.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T18:20:34.763

您将`UIButton`实例作为`sender`参数传递给您的操作。然后`sender`作为参数传递给期望`UIBarButtonItem`此处实例的方法：

```
[self.colorPickerPopover presentPopoverFromBarButtonItem:sender permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES]; 
```

如果你打算`sender`在你的动作中使用这个参数，你应该对两个不同类别的对象进行单独的动作。像：

```
- (void)loadColorPicker
{
    if (_colorPicker == nil) {
        self.colorPicker = [[ColorPickerController alloc] initWithStyle:UITableViewStylePlain];
        _colorPicker.delegate = self;
        self.colorPickerPopover = [[UIPopoverController alloc] initWithContentViewController:_colorPicker];
    }
}
- (void)colorBarButtonItemTapped:(UIBarButtonItem *)sender
{
    [self loadColorPicker];
    [self.colorPickerPopover presentPopoverFromBarButtonItem:sender permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
}

- (void)colorButtonTapped:(UIButton *)sender
{
    [self loadColorPicker];
    [self.colorPickerPopover presentPopoverFromRect:sender.frame inView:self.view permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
} 
```

然后在哪里分配目标和操作：

```
[backButton2 addTarget:self
                action:@selector(colorButtonTapped:)
      forControlEvents:UIControlEventTouchUpInside];

UIBarButtonItem *btn3 =[[UIBarButtonItem alloc] initWithImage:imageback2 style:UIBarButtonItemStylePlain target:self action:@selector(colorBarButtonItemTapped:)]; 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T16:41:05.483

```
UIView* btnView = [[UIView alloc] initWithFrame: backButton2.bounds];
[btnView addSubview: backButton2];

UIBarButtonItem *btn2 = [[UIBarButtonItem alloc] initWithCustomView:btnView];

//in case you are not using arc
[btnView release]; 
```

干杯...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T16:43:25.327

您的错误可能是因为您不应该初始化`UIButton`using `alloc`/`initWithFrame`而是使用其`buttonWithType:`设计的初始化程序（然后单独设置其框架）。

# android - 异步任务线程源

> ID：12606370
> 
> 赞同：0
> 
> 时间：2012-09-26T16:34:11.707
> 
> 标签：android

我想知道异步任务和线程之间的关系？每一个都创建一个新的，是否缓存，池化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T16:41:00.663

默认情况下，Asynctask 使用串行执行器，因此使用单个线程在单个进程中执行所有 asynctask。但是你可以改变它。

检查[文档](http://developer.android.com/reference/android/os/AsyncTask.html)。

> 从 HONEYCOMB 开始，任务恢复到在单个线程上执行，以避免并行执行导致的常见应用程序错误。如果你真的想要并行执行，你可以使用这个方法的 executeOnExecutor(Executor, Params...) 版本和 THREAD_POOL_EXECUTOR;

[您还可以在此处](http://androidxref.com/4.0.4/xref/frameworks/base/core/java/android/os/AsyncTask.java)查看 Asynctask 的来源

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T16:49:51.360

从 Android 文档本身来看，AsyncTasks 允许“无痛多线程”，因此 AsyncTasks 显然在后台使用线程。

我最近使用 Eclipse 中的 DDMS 插件分析了我的应用程序，该应用程序会定期（并且非常接近）间隔启动 AsyncTasks。使用 DDMS，您可以查看当前运行的线程数及其名称。

从我那里看到，AsyncTasks 使用线程池来管理 AsyncTasks。就我而言，有 5 个线程分别命名为“AsyncTask #1”到“AsyncTask #5”，在一个循环中一个接一个地激活。

希望这能回答您的部分问题！

# c++ - 如何将 shm 对象指向另一个 shm 对象

> ID：12606374
> 
> 赞同：0
> 
> 时间：2012-09-26T16:34:14.597
> 
> 标签：c++, object, memory, pointers, shared

嗨，我了解到，如果我有一个共享内存 (c++) 类对象，那么如果该指针将在不相关的进程中用于访问同一事物，那么添加作为指针的成员变量是没有意义的。但是如何在共享内存中创建链表。假设一个 shm 对象指向另一个 shm 对象。这是否不可能以任何不相关的过程都可以遍历 shm.hm 中的链的方式实现。如果有可能，那怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:10:13.993

好的，我发现您可以通过例如了解所涉及结构的确切大小来测量 SHM 中两个结构之间的距离。因此，如果您将它放置在任意距离，最好是页面对齐，您可以将距离添加到 mmap 返回的开始指针，这将指向第二个、第三个等示例：

```
items[i].start = (void*)((char*)items[0].start + calcoffset) 
```

# java - 将样式表应用于 xml 文档的内存占用最少的方法是什么？

> ID：12606384
> 
> 赞同：0
> 
> 时间：2012-09-26T16:34:50.963
> 
> 标签：java, xml, xslt, memory, websphere-7

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T16:53:10.137

(I am sure M. Kay will jump in but in the meantime)

AFAIK XSL Transformation is always done in memory; I do not know of any streaming XSL transformer implementation (I guess that would be hard since the whole XML tree is always 'visible' in the XSLT).

What we found out is that Saxon has overall much better performance than Xalan. Spending less time processing a document is another way of improving performance by processing more documents with the same amount of memory over the same period of time.

Saxon has (had?) its own DocumentBuilder implementation but we did not notice a memory gain using it in lieu of Xerces.

For large XML documents we split them in smaller pieces using a (streaming) map/reduce algorithm before running them through an XSL. Our map/reduce code is sitting on top of XML Dog

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T17:09:02.967

A factor of 3 expansion between the raw XML size and the size of the in-memory tree is certainly normal; in fact it's low. See for example [http://dev.saxonica.com/blog/mike/2012/09/](http://dev.saxonica.com/blog/mike/2012/09/)

Streamed transformation is starting to become possible for a limited class of transformations. See for example [http://www.saxonica.com/documentation/sourcedocs/streaming.xml](http://www.saxonica.com/documentation/sourcedocs/streaming.xml). But when your documents are only 5Mb in size, I'm not sure it's the right approach for you, at least not without further evidence.

It seems to me that you have come to the conclusion that memory allocation by the XSLT processor is the critical factor affecting the performance of your workload without any real evidence that this is the case. It would be interesting to see, for example, what the transformation time is in relation to the parsing time - many people are surprised that sometimes the transformation cost is tiny compared to the parsing cost. Before addressing one aspect of your system performance, you need to work out what the true bottlenecks are.

# asp.net - 从MVC控制器返回由webform页面生成的html？

> ID：12606387
> 
> 赞同：2
> 
> 时间：2012-09-26T16:34:54.793
> 
> 标签：asp.net, asp.net-mvc

我在现有的 Webforms 站点之上构建 MVC。我想让所有请求都通过控制器，但在某些情况下，我希望控制器将职责传递给 webform 页面 - 如果可能的话，我希望它接收 webform 页面生成的 html，然后返回结果。

例如，像这样：

```
public ActionResult Index()
{
    var html = GenerateHtmlFromWebForm("index.aspx",Request);
    return html;
} 
```

我不想做重定向——我特别想得到一个 web 表单页面来生成 html，收集那个 html，然后从我的 Controller 方法返回那个 html。

这可能吗？

# wordpress - 在 WordPress 中检索自定义帖子类型分类

> ID：12606390
> 
> 赞同：0
> 
> 时间：2012-09-26T16:35:02.457
> 
> 标签：wordpress, taxonomy, custom-post-type

我的自定义帖子类型**“游戏”**分类中有一组名为**“**游戏名”的字段- 我正在尝试使用**query_posts**来检索这个值......

```
$args = array(
    'post_status'=>'publish',
    'post_type'=>'games',
    'gamename' => 'Space Invaders'
);
query_posts($args);

if(have_posts()) : while (have_posts()) : the_post();
    the_title();
endwhile; else:
    echo 'No Posts!';
endif;
wp_reset_query(); 
```

这对我不起作用，它只是返回**“无帖子”**

有人可以建议我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T17:49:55.463

首先，不要使用`query_posts();`，blech。使用`$query = new WP_Query`，你可以在[这里](http://codex.wordpress.org/Class_Reference/WP_Query)阅读。

`query_posts()`试图成为国王并覆盖全局变量（EW！），但是`WP_Query`该类没有，并且被认为是您应该循环帖子的最佳（唯一？）方式。

我个人（并且有同事）都遇到过同样的问题，`query_posts()`没有回复任何帖子。最后，有 9/10 次是因为它覆盖了全局变量（即 $post D:），这使得它返回空。并且 9/10 次，使用`$query = new WP_Query;`代替有效！

但是，如果您**愿意**使用，请`query_posts()`尝试`wp_reset_query()`在您的代码之前调用，也许您有一个插件或在您的代码启动之前没有正确重置它的东西

**编辑**

你有

```
if(have_posts()) : while (have_posts()) : the_post(); 
```

你有这个 if 语句的任何理由，而不仅仅是标准：

```
while ( have_posts() ) : the_post(); 
```

# iphone - TabBar 自定义按钮

> ID：12606394
> 
> 赞同：0
> 
> 时间：2012-09-26T16:35:09.980
> 
> 标签：iphone, button, styles, tabbar

如何制作自定义tabBar按钮

我阅读了课程，它说如何更改黑色背景tabBar，但我需要更改按钮以及如何做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T17:13:44.120

看看这个[网站](http://www.cocoacontrols.com/search?utf8=%E2%9C%93&q=tabbar)，它应该会告诉你怎么做。顺便说一句，如果你检查谷歌，有很多可用的教程！

# macos - 在 Mac 上复制带空格的文件

> ID：12606397
> 
> 赞同：1
> 
> 时间：2012-09-26T16:35:19.120
> 
> 标签：macos, bash, google-chrome

我正在尝试在 shell 脚本中将一组预定义的 Chrome 书签复制到 Chrome 将它们保存在 Mac 上的位置（`~/Library/Application Support/Google/Chrome/Default`）。在脚本中我有：

```
#!/bin/sh
bookmarks_dir="$HOME/Library/Application\ Support/Google/Chrome/Default"
cp -v "bookmarks/Bookmarks" "$bookmarks_dir" 
```

但是当我运行它时，我得到：

```
cp: /Users/aparkin/Library/Application\ Support/Google/Chrome/Default: No such file or directory 
```

如果我在上面的错误消息中复制并粘贴路径并手动执行 cp：

```
cp -v bookmarks/Bookmarks /Users/aparkin/Library/Application\ Support/Google/Chrome/Default 
```

它复制得很好，因此该目录确实存在。似乎是路径中的空间绊倒了事情。

我错过了什么？我想如果一个变量用引号引起来，文件名中的空格不再会导致问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T16:44:12.090

摆脱定义`\`中的。`$bookmarks_dir`它被视为文字`\`：如果你做了，`$echo bookmarks_dir`你会看到它。

仅当`\`您不在字符串周围加上引号时才有用。所以，

```
bookmarks_dir=$HOME/Library/Application\ Support/Google/Chrome/Default 
```

也可以。

# c++ - 根据模板参数的模板函数名称

> ID：12606408
> 
> 赞同：2
> 
> 时间：2012-09-26T16:35:58.387
> 
> 标签：c++, templates, overloading

我一直在寻找与我的问题有关的示例，但我仍然找不到解决方案。我发现的最接近的是

[模板函数作为模板参数](https://stackoverflow.com/questions/4697180/template-function-as-a-template-argument)

如果需要，我将尝试发布一个工作示例，但到目前为止，我的部分代码涉及以下内容：

```
template<class InterfaceType, class T> 
inline void write_info(InterfaceType& interface, T& t) {
    InterfaceType::write_info(interface, t);
}

template<class InterfaceType, class T> 
inline void write_data(InterfaceType& interface, T& t) {
    InterfaceType::write_data(interface, t);
}

template<class InterfaceType, class T> 
inline void write_definition(InterfaceType& interface, T& t) {
    InterfaceType::write_definition(interface, t);
} 
```

请注意，模板`write_info`依赖于接口类型，该接口类型具有称为`write_info`（静态方法）的方法。这样做的原因是因为该`write_info`函数稍后可以针对特定数据类型进行专门化，而无需在`InterfaceType`.

一个简单的问题是：我们可以用一个将函数命名为函数参数的模板来简化上面的代码吗？请记住，我真的希望这成为可能，这样我就可以避免为专门的数据类型定义所有这 3 个函数，即

假设这`foo`是一个具有两个属性`int a`和的结构`double b`。然后我可以像这样专门化上述功能：

```
template<class InterfaceType> 
inline void write_info(InterfaceType& interface, foo& t) {
    InterfaceType::write_info(interface, t.a);
    InterfaceType::write_info(interface, t.b);
}

template<class InterfaceType> 
inline void write_data(InterfaceType& interface, foo& t) {
    InterfaceType::write_data(interface, t.a);
    InterfaceType::write_data(interface, t.b);
}

template<class InterfaceType> 
inline void write_definition(InterfaceType& interface, foo& t) {
    InterfaceType::write_definition(interface, t.a);
    InterfaceType::write_definition(interface, t.b);
} 
```

如您所见，我一遍又一遍地编写相同的代码。在这里，我假设 InterfaceType 已经有 define `write_info`、for`write_data`和。有任何想法吗？`write_definition``int``double`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T17:36:26.240

扭转逻辑：与其`write_thing`为每种类型编写专门的重载，不如编写一个`apply`函数，将任意函数应用于每种类型的对象，然后将每个函数的单个重载`write_thing`简单地委托给`apply`：

```
// Define a catch-all apply that handles "everything else"
template <typename Interface, typename Function, typename Object>
void apply(Interface& i, Function f, Object& x) {
    f(i, x);
}

// Define overloads for "apply" that handle special cases
template <typename Interface, typename Function>
void apply(Interface& i, Function f, foo& x) {
    f(i, x.a);
    f(i, x.b);
}

// Define polymorphic adapters for your write_[thing] functions:
struct write_info_impl {
    template <typename Interface, typename Object>
    void operator()(Interface& i, Object& x) const {
        Interface::write_info(i, x);
    }
};

// Then implement your write_[thing] functions in terms of the above:
template <typename Interface, typename Object>
void write_info(Interface& interface, Object& x) {
    apply(i, write_info_impl(), x);
} 
```

# exec - tcl exec 与 cvs upd：为什么会退出？

> ID：12606411
> 
> 赞同：0
> 
> 时间：2012-09-26T16:36:13.957
> 
> 标签：exec, tcl, cvs

我的问题很简单。考虑下面的代码片段：

```
set cvsPath "C:/Program Files (x86)/cvsnt/cvs.exe"
puts [exec $::cvsPath log filename]
puts "------------- END OF SCRIPT ---------------------" 
```

这会打印日志，然后是“------------- END OF SCRIPT ---------”。

```
set cvsPath "C:/Program Files (x86)/cvsnt/cvs.exe"
puts [exec $::cvsPath -n upd]
puts "------------- END OF SCRIPT ---------------------" 
```

这个打印更新消息并退出。为什么？如何防止退出？

`exec`PS退出的原因是`cvs -n upd`输入...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T16:53:28.510

可能是因为您让 csv.exe 引发错误。试着抓住它，

```
set cvsPath "C:/Program Files (x86)/cvsnt/cvs.exe"
if {[catch {puts [exec $::cvsPath -n upd]} result]} {puts $result}
puts "------------- END OF SCRIPT ---------------------" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T16:51:24.963

`cvs -qn upd`而不是`cvs -n upd`作品！

以下也有效：

```
if {[catch {exec $::cvsPath -n upd} result]} {puts $result}
puts "------------- END OF SCRIPT ---------------------" 
```

我应该提到 $result 包含更新消息，这仅意味着`cvs -n upd`引发错误。哪里`cvs -qn upd`不扔。

# regex - 如何安全地提取 Emacs 正则表达式中的 URL

> ID：12606413
> 
> 赞同：1
> 
> 时间：2012-09-26T16:36:24.847
> 
> 标签：regex, emacs, elisp

我在使用正则表达式从 HTTP 标头中可靠地提取 URL 时遇到了麻烦。带有和不带有似乎与空白类不匹配的 ^M 字符交替到达的标题并没有帮助。目前我迄今为止管理的最好的是：

```
(re-search-forward "^x-url: .*/\\{2,3\\}\\(.*\\)" nil t) 
```

但是，当然，如果它存在 ^M 以及我并不真正需要的 URL 参数，它也会得到它。给你一个我调试的例子：

```
x-url: http://wiki/mediawiki/index.php?title=Vsmux&action=edit&redlink=1
x-url: http://wiki/mediawiki/index.php?title=Vsmux&action=edit&redlink=1^M 
```

在这两种情况下我真正想要的只是结果：

```
wiki/mediawiki/index.php 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T19:07:37.213

这看起来很可怕，但我不对它的外观负责——发明这个愚蠢标准的人是......但这应该非常严格地遵循标准（旧版本，不包括 Unicode 字符及其翻译）：

```
"^x-url:\\s-*\\(\\w\\|\\+\\|-\\)+://\\(\\w\\|\\-\\)+\\(\\.\\w+\\)?\\(\\/\\(%[0-9a-fA-F]\\{2\\}\\|[~\\.A-Za-z_+-]*\\)*\\)*" 
```

除非某些“有用的”程序已经将百分比编码的 URI 组件转换为其原始的非编码形式。

*此外，对于 URL 的部分长度可能存在一些技术限制，我不会尝试实现它......*

*此外，它假定从不使用基本身份验证中的身份验证方案。否则，不使用正则表达式会容易得多。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T17:34:51.113

像这样的东西怎么样（这假设所有网址都包含“：//”）：

```
(re-search-forward "^x-url: [^:]*://\\([^?\r\n]+\\).*?$") 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T16:00:07.137

为了完整起见，我可能应该添加另一个我尝试过的解决方案，该解决方案基于与@wvxvw 关于使用正确解析器的讨论。这使得 elisp 代码看起来有点像这样：

```
(save-excursion
  (let* ((url-string (url-get-url-at-point (re-search-forward "^x-url: ")))
         (url (url-generic-parse-url url-string))
         (arg-split (string-match-p "?" (url-filename url))))
    (format "%s%s" (url-host url)
        (if arg-split
            (substring (url-filename url) 0 arg-split)
          (url-filename url))))) 
```

# javascript - 在 javascript 函数中将变量设为私有

> ID：12606418
> 
> 赞同：1
> 
> 时间：2012-09-26T16:36:45.930
> 
> 标签：javascript, jquery

大家好，我这里有两个 javascript 函数——在第一个函数中，我必须将变量名称从“element”和“property”更改为“celement”和“cproperty”，以避免它们与其他函数发生冲突。我想知道有没有什么方法可以构造你的函数，以便它们可以使用相同的变量名？任何建议都会很棒！非常感谢

Javascript：

```
 function colorPickDynamic (startcolor, cp){
    var i,
        j,
        x,
        celement = []
        cproperty = []
    for (x=0, i = 2, j = 3; j <= arguments.length; i+=2, j+=2, x++) {
        celement[x]=arguments[i]
        cproperty[x]=arguments[j]
        }

        $(cp).ColorPicker({
            color: startcolor,
            onShow: function (colpkr) {
                $(colpkr).fadeIn(500)
                return false
            },
            onHide: function (colpkr) {
                $(colpkr).fadeOut(500)
                return false
            },
            onChange: function (hsb, hex, rgb) {

                $(cp + ' div').css('backgroundColor', '#' + hex)
            for (x = 0; x < celement.length; x++) {
                    updateAllCSS(celement[x], cproperty[x], '#' + hex)
            }
            }
        })
    }

    var cssObject = {}

    function updateAllCSS() {

    var x,
        i,
        j,
        k,
        element = []
        property = []
        value = []

    for (x=0, i = 0, j = 1, k = 2; k <= arguments.length; i+=3, j+=3, k+=3, x++) {
        element[x]=arguments[i]
        property[x]=arguments[j]
        value[x]=arguments[k]
    }   

        //updateThemeCreatorCSS

    for (x = 0; x < element.length; x++) {
        updateThemeCreatorCSS(element[x], property[x], value[x])
    }

        //updateOutputCSS

    for (x = 0; x < element.length; x++) {  
        updateOutputCSS(element[x], property[x], value[x])
    }

        function updateThemeCreatorCSS(element, property, value) {
            $('#homeIframe').contents().find(element).css(property, value)
            $('#generalIframe').contents().find(element).css(property, value)
            $('#formIframe').contents().find(element).css(property, value)
        }

        function updateOutputCSS(element, property, value) {

           if (!cssObject[element]) cssObject[element] = {}
           cssObject[element][property] = value            

            $('#css_output').text('')
            for (var element in cssObject) {
            $('#css_output').append(element + ' {')
               var properties = cssObject[element]
               for (var property in properties) {
                  $('#css_output').append(property + ': ' + properties[property] + ' !important;')
               }
            $('#css_output').append('} <br />')
            }

        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T16:55:58.753

[`var`你的声明](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/var)做得很好，只是你忘记了一些逗号，所以它们是全局的。在`colorPickDynamic`：

```
var i,
    j,
    x,
    celement = [], // <- !!!
    cproperty = []; // semicolon optional, but recommended 
```

并在`updateAllCSS`：

```
var x,
    i,
    j,
    k,
    element = [], // <- !!!
    property = [], // <- !!!
    value = []; // semicolon optional, but recommended 
```

如果省略逗号，将自动插入分号（因此会发生奇怪的事情），并且行尾将成为声明语句的结尾。下一行将照常解释，它是对非局部变量的赋值。您的脚本执行如下

```
var i;
var j;
var x;
celement = [];
cproperty = []; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T16:58:29.437

是的，它们通常是私有的。

这是你的错误：

```
var i,
    j,
    x,
    element = []  // <-- you forgot the comma!
    property = [] // <-- recommend using a semicolon here 
```

在另一个功能中：

```
var x,
    i,
    j,
    k,
    element = []  // <-- you forgot the comma!
    property = [] // <-- you forgot the comma!
    value = []    // <-- recommend using a semicolon here 
```

`var`没有关键字声明的变量是全局的。

为防止混淆，我建议您暂时不要使用一个声明多个变量`var`：

```
var x;
var i;
var j;
var k;
var element = [];
var property = [];
var value = []; 
```

当您更习惯于 javascript 时，这样做是完全可以的，因为到那时您的大脑会自动检测到缺少的逗号。并习惯使用分号。有经验的 javascript 程序员会自动检测丢失的分号作为可能的错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T16:38:58.573

函数中定义的变量仅是函数中定义的变量。

这意味着它们不存在于该范围之外。

```
function foo(){    
    var bar = 'hello';        
    alert('Inside function: ' + bar);    
}

foo();

alert('Outside function: ' + bar); 
```

这会给你警报：`Inside function: hello`

还有一个错误：`Uncaught ReferenceError: bar is not defined`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T16:53:11.297

阅读这篇文章。它讨论了 JS 中的私有变量。

[http://net.tutsplus.com/tutorials/javascript-ajax/quick-tip-private-variables-in-javascript/](http://net.tutsplus.com/tutorials/javascript-ajax/quick-tip-private-variables-in-javascript/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T17:37:55.027

JS 具有功能范围。一个函数可以访问它所嵌套的外部函数作用域中的所有内容，而不管涉及到哪些其他构造。从某种意义上说，每个内部定义的函数都使用外部函数的作用域作为基础。但是将其视为内部函数的一种范围层蛋糕。

如果您引用一个 var，JavaScript 调用对象将检查函数的本地范围，然后检查下一个函数，依此类推，直到找到第一个具有该名称的可用函数，直到它到达全局范围。

因此，在内部函数中使用 'var' 声明将防止更改具有相同名称的外部作用域 var。

**非常重要的注意事项**- 所有这些仅与定义函数的位置相关。

当人们说“闭包”这个词时，这些继承的作用域应该是真正的意思。它是将定义范围上下文（那些层）绑定到函数。

现在这里是闭包通常会混淆的地方：

```
function buildAFunction(){
    var
        whichOne = "buildAFunction's var";

    return function(){ alert(whichOne); }
}

function anotherFunction(){
    var //format I use for adding clarity to comma-separated var decs sometimes.
        whichOne = "anotherFunction's var",
        builtFunc = buildAFunction();

    builtFunc();
}

anotherFunction(); //alerts "buildAFunction's var" 
```

你可以移动一个函数，但它仍然只能访问它定义的地方可用的范围。一开始它可能会让人头疼，但当你学会充分利用它时，这是 JavaScript 的一个愚蠢而强大的特性。反之，让函数在新的上下文中自动神奇地使用东西，您需要查看“this”关键字，该关键字通常仅在您将函数分配给对象的属性时才有用。

# r - R中的功能旨在对最终用户不可见

> ID：12606420
> 
> 赞同：3
> 
> 时间：2012-09-26T16:36:48.480
> 
> 标签：r, package

在构建 R 包时，我编写了几个函数，但其​​中一些不是很重要，所以我打算不记录它们，并且它们对最终用户是不可见的。但是，我在我的示例部分中使用了这些函数，因此它们必须包含在包中（但不在帮助文档列表中）。我不知道该怎么做。我需要：

1.  删除该函数的文档（在 Emacs 中，不使用 Cc Co），所以 roxygenize 不会生成 .Rd 文件？

2.  仍然写文档，但没有@export？

非常感谢你！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T17:04:41.873

如果不导出这些函数，则需要使用三冒号结构调用它们：

```
myPkg:::myHiddenFn 
```

在一些基本和“必需”包的帮助页面中有一些这样做的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T17:47:36.567

谢谢大家的建议！是的，我将在包中导出我的函数。我问这个问题的原因是我看到一些包作者编写了函数，但其​​中一些只能通过`pkgName:::funName`. 我认为这也不好，但只是好奇人们如何做到这一点:)

# c# - Mathematica 中的命令“nb = NotebookCreate[]”失败？

> ID：12606421
> 
> 赞同：3
> 
> 时间：2012-09-26T16:36:50.413
> 
> 标签：c#, .net, .net-4.0, wolfram-mathematica, mathlink

如果我在 Mathematica 中打开一个笔记本并输入“nb=NotebookCreate[]”，它会按预期创建一个新的笔记本窗口。

但是，如果我在 C# 中尝试相同的命令，它会失败，并且不会打开新的笔记本窗口：

```
IKernelLink ml = MathLinkFactory.CreateKernelLink();
ml.WaitAndDiscardAnswer();
string cmd = @"nb = NotebookCreate[]";
string result = ml.EvaluateToOutputForm(cmd, 0);

// result is now "$Failed". 
```

请注意，如果我传入“2+2”，它会返回“4”，这证明到 Mathematica 内核的链接运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T12:05:13.607

不幸的是，这对于 Mathematica v8 来说似乎是不可能的（我认为 v9 没有太大变化）。

据我了解，当您从 C# 访问 Mathematica 内核时，这不允许访问作为 GUI 一部分的 Notebook 类。

# security - 如何从 RESTful 服务发送安全令牌？

> ID：12606423
> 
> 赞同：6
> 
> 时间：2012-09-26T16:37:02.637
> 
> 标签：security, http, rest, asp.net-web-api, restful-authentication

我正在使用带有自定义令牌的身份验证的 ASP.NET Web API 构建 RESTful 服务。客户端将在第一次调用时发送凭据。该服务将使用用户详细信息创建一个加密令牌，并且该令牌将从此时开始用于身份验证。现在服务需要将此令牌发送回客户端。最初，我将令牌保存在 HTTP 自定义响应标头中，以便客户端可以独立于服务返回的数据读取值。当客户端和服务在同一个域中时，这很有效，但在跨域场景中失败了。我已启用 CORS 并添加了各种标头，例如“Access-Control-Expose-Headers”、“Access-Control-Allow-Origin: *”等。但跨域客户端无法读取自定义响应标头我创建的是“

在这种情况下，我有几个问题：

1.  发送自定义安全令牌的最佳位置是什么？它是在响应标头中还是作为 ViewModel/data 类的基类中的公共属性？

2.  是否有标准的 HTTP 响应标头可用于发送令牌和自定义信息，以便跨域客户端也可以读取它？

任何帮助将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T16:51:31.763

`Authorization`标题是为此而设计的。有关如何使用它的详细信息，请查看此链接中的[第 14.8 节。](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)

# c# - ftp 损坏 exe 和 dll 文件 (C#)

> ID：12606424
> 
> 赞同：2
> 
> 时间：2012-09-26T16:37:04.097
> 
> 标签：c#, .net-3.5, ftp

我有以下代码用于从服务器下载文件，适用于文本文件。代码取自 MSDN 示例：

```
public void DownloadFile(string serverPath, string localPath)
        {

            try
            {
                FtpWebRequest request = (FtpWebRequest)WebRequest.Create("ftp://" + serverPath);

                request.Method = WebRequestMethods.Ftp.DownloadFile;
                request.Credentials = new NetworkCredential(_domain + "\\" + _username, _password);
                FtpWebResponse response = (FtpWebResponse)request.GetResponse();
                Stream responseStream = response.GetResponseStream();
                StreamReader reader = new StreamReader(responseStream);
                string contents = reader.ReadToEnd();
                File.WriteAllText(localPath, contents);

                reader.Close();
                response.Close();

            }
            catch (WebException ex)
            {                
                string exMsg = string.Empty;

                //add more error codes               
                FtpWebResponse response = (FtpWebResponse)ex.Response;
                MessageBox.Show(response.StatusCode.ToString());

                switch(response.StatusCode) {
                    case  FtpStatusCode.NotLoggedIn:
                        exMsg = "wrong password";
                        break;

                    case FtpStatusCode.ActionNotTakenFileUnavailable:
                        exMsg = "file you are trying to load is not found";
                        break;

                    default:
                        exMsg = "The server is inaccessible or taking too long to respond.";
                        break;
                }   

                throw new Exception(exMsg);
            }

            return;
        } 
```

但是，它会破坏 dll 和 exe。任何想法这里的罪魁祸首是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T16:40:56.913

试试看：

```
request.UseBinary = true; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T16:38:30.900

`StreamReader`旨在读取文本数据（它是 a [`TextReader`](http://msdn.microsoft.com/en-us/library/system.io.textreader.aspx)），因此使用它会损坏任何二进制文件。

您需要直接从流中读取。

你应该能够做到：

```
Stream responseStream = response.GetResponseStream();

// Don't read/write as text!
// StreamReader reader = new StreamReader(responseStream);
// string contents = reader.ReadToEnd();
//  File.WriteAllText(localPath, contents);

using (var output = File.OpenWrite(localPath))
{
    responseStream.CopyTo(output);
} 
```

* * *

编辑：

由于您使用的是 .NET 3.5，因此您可以手动复制流：

```
Stream responseStream = response.GetResponseStream();
using (var output = File.OpenWrite(localPath))
{
    byte[] buffer = new byte[32768];
    int read;
    while ((read = input.Read(buffer, 0, buffer.Length)) > 0)
    {
        output.Write (buffer, 0, read);
    }
} 
```

# ios - 从弹出窗口打开全屏模式时，相机的屏幕位置不正确

> ID：12606426
> 
> 赞同：0
> 
> 时间：2012-09-26T16:37:04.057
> 
> 标签：ios, ipad, camera, uiimagepickercontroller, ios6

我有一个 iPad 应用程序，它有一个弹出窗口（UIPopoverController），其中有多个视图被推送，其中一个有一个启动相机的按钮......看图片......

![在此处输入图像描述](../Images/17edddb9ef3079f5c716f9c3eb594abb.png)

相机是用这种方法煽动的……

```
- (IBAction)selectPlanImageFromCamera:(id)sender
{
    [self.blockTextField resignFirstResponder];
    [self.levelTextField resignFirstResponder];
    [self.zoneNamePrefixTextField resignFirstResponder];
    [self.nameTextField resignFirstResponder];
    [self.notesTextView resignFirstResponder];

    imagePicker = [[UIImagePickerController alloc] init];
    imagePicker.allowsEditing = NO;
    imagePicker.delegate = self;
    imagePicker.sourceType = UIImagePickerControllerSourceTypeCamera;
    imagePicker.modalPresentationStyle = UIModalPresentationFullScreen;
    imagePicker.showsCameraControls = YES;

    [self presentViewController:imagePicker animated:YES completion:^{}];
} 
```

然后，我得到显示的全屏模态相机视图，这一切都按预期工作，因为它的位置略低于屏幕边界。这意味着底部的控件位于屏幕以南 20px 的位置，并且屏幕顶部有一个 20px 的黑色带...参见图片...

![在此处输入图像描述](../Images/cdfc4c0b8d8a25a3bb0e35f5ecaac17b.png)

虽然这个应用程序现在针对 iOS6，但我之前在 iOS5 上也得到了同样的效果。任何人都可以想到解决方法或修复方法吗？

非常感谢，迈克尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-02T21:56:31.730

我们怀疑这与状态栏高度有关，`20px`. 我们的猜测是正确的，下面的代码对我们有用，它在`UIIMagePickerController`显示时隐藏了状态栏。

```
 UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];
 imagePicker.delegate = self;
 imagePicker.sourceType = UIImagePickerControllerSourceTypeCamera;
 imagePicker.mediaTypes = [NSArray arrayWithObjects:(NSString *) kUTTypeImage,nil];
 imagePicker.allowsEditing = NO;

 if (IS_IPAD)
 {                
    imagePicker.modalPresentationStyle = UIModalPresentationFullScreen;
    [[UIApplication sharedApplication] setStatusBarHidden:YES withAnimation:UIStatusBarAnimationNone];

    [self presentViewController:imagePicker animated:YES completion:nil];
 } 
```

可能必须向以下每个委托添加以下代码：-`imagePickerControllerDidCancel`和.`didFinishPickingMediaWithInfo``finishedSavingWithError`

```
if (IS_IPAD)
{
    [[UIApplication sharedApplication] setStatusBarHidden:NO withAnimation:UIStatusBarAnimationNone];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-13T17:51:49.283

尝试

`cameraImagePicker.modalPresentationStyle = UIModalPresentationFullScreen;`

这将告诉 UIImagePickerController 实例呈现样式并修复此错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T12:40:22.743

按照从 shawnwall 的评论到原始问题的指针，我设法通过在根 UIViewController 上执行 presentViewController 方法调用来解决此问题，然后在拍照的任一侧解除并重新建立 UIPopoverController。

所以，我有我的方法来激发相机视图......（注意最后的两行是新的 - 第一行关闭弹出框，第二行在主根 UIViewController 上显示 UIImagePickerController）

```
- (IBAction)selectPlanImageFromCamera:(id)sender
{
    [self.blockTextField resignFirstResponder];
    [self.levelTextField resignFirstResponder];
    [self.zoneNamePrefixTextField resignFirstResponder];
    [self.nameTextField resignFirstResponder];
    [self.notesTextView resignFirstResponder];

    cameraImagePicker = [[NonRotatingUIImagePickerController alloc] init];
    cameraImagePicker.allowsEditing = NO;
    cameraImagePicker.delegate = self;
    cameraImagePicker.sourceType = UIImagePickerControllerSourceTypeCamera;
    cameraImagePicker.modalPresentationStyle = UIModalPresentationFullScreen;
    cameraImagePicker.showsCameraControls = YES;

    [mainCanvasViewController.sitePopoverController dismissPopoverAnimated:YES];
    [mainCanvasViewController presentViewController:cameraImagePicker animated:YES completion:^{}];
} 
```

然后，我在我解除 UIImagePickerController 的任何地方重新呈现弹出框 - 在这种情况下，在 didFinishPickingMediaWithInfo 委托方法上（在同一个 UIViewController 中，如上所述）......

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    if ([info objectForKey:UIImagePickerControllerMediaType] == (NSString *)kUTTypeImage)
    {
        ... // image handling
    }

    [picker dismissViewControllerAnimated:YES completion:^{}];

    UIBarButtonItem *tappedButton = mainCanvasViewController.navigationItem.leftBarButtonItem;
    [mainCanvasViewController.sitePopoverController presentPopoverFromBarButtonItem:tappedButton permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
} 
```

这工作正常 - 相机视图的关闭和弹出框的重新呈现可能会更整洁一些，因为弹出框重新出现，而相机从屏幕底部动画出来，如果弹出框出现在相机之后看起来会更好过渡了，但对我来说，目前这不是一个大问题。

希望这对想要从 UIPopoverController 打开全屏相机 UIImagePickerController 的人有所帮助。

亲切的问候，迈克尔。

# php - mysql_query 总是用 SELECT EXISTS 返回 false

> ID：12606431
> 
> 赞同：0
> 
> 时间：2012-09-26T16:37:14.457
> 
> 标签：php, mysql, select, exists

我正在尝试使用 EXISTS 语法检查行是否存在。connect() 函数正在工作（至少在所有其他函数中），但 this 函数总是返回 false。当通过 phpMyAdmin 尝试时，查询给出了真或假。所以我的问题；如何用php阅读答案？我不想使用普通的 SELECT 语句，因为我已经阅读了一些基准测试，女巫说这种方法更快。

```
function isOnline($userid){
    $conn = connect();
    $query = "SELECT EXISTS (SELECT 1 FROM `usersonline` WHERE userid=$userid);";
    return mysql_query($query, $conn) ? false : true;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T16:42:24.307

该`mysql_query`函数仅指示查询是否成功执行。您需要阅读返回的数据的第一行，也许`mysql_fetch_row`并弄清楚它是否给了您真假。

另请理解 mysql_* 函数现在已弃用，您应该继续使用更新的 PDO 或 mysqli_* 函数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T16:43:01.910

您的函数总是返回`false`，因为您的查询总是成功的。

您需要从查询的结果集中获取结果并对其进行测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T16:47:04.293

```
function isOnline($userid){
    $conn = connect();
    $query = mysql_query("SELECT `id` FROM `usersonline` WHERE userid=$userid");
    $row = mysql_num_rows($query)
    return if(row>=1) ? true : false;
} 
```

**你可以使用这个**

# android - Android Webview setHttpAuthUsernameAndPasssword 对谷歌登录无效

> ID：12606434
> 
> 赞同：1
> 
> 时间：2012-09-26T16:37:25.050
> 
> 标签：android, webview, passwords

我是 Android 开发的新手，需要实现该活动，以便嵌入式 Webview 能够登录到 Google 帐户登录，而无需用户首先手动输入用户名和密码。进入活动时我确实有用户名和密码。我不应该使用 AccountManager，因为现在有另一个线程。

我读过关于

1.  使用 WebView.setHttpAuthUsernameAndPassword
2.  覆盖 WebViewClient.onReceivedHttpAuthRequest（不触发调用）

但似乎没有一个工作。我已经通过代码路径手动测试，发现如下：

1.  在调用 WebViewClient.ShouldOverrideUrlLoading 并且我使用 WebView.setHttpAuthUsernameAndPassword 以编程方式设置用户名+密码后，WebViewDatabase.hasHttpAuthUsernameAndPassword 返回 true，但 WebViewDatabase.hasUsernameAndPassword 为 false，用户仍然可以看到登录屏幕
2.  如果 WebViewDatabase.hasUsernameAndPassword 为真（用户手动输入凭据后），WebViewClient(browser) 似乎甚至没有加载 Google 登录 url 并直接转到回调 url

有人可以提供一些见解吗？

以下是我设置 webview 和 webviewclient 时的代码部分：

```
final WebView browser = (WebView) findViewById(R.id.browser);   
WebViewClient webViewClient = new WebViewClient(){
        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            if(url.contains(ACCOUNT_LOGIN_SERVICE_PREFIX)){
                WebViewDatabase webviewDb = WebViewDatabase.getInstance(getBaseContext());
                if(!webviewDb.hasHttpAuthUsernamePassword()){
                    view.setHttpAuthUsernamePassword(
                            "accounts.google.com", 
                            "", 
                            "mygmail@gmail.com", 
                            "mypassword");

                    view.loadUrl(url);
                }
                return super.shouldOverrideUrlLoading(view, url);
            }
        }
    };

browser.setWebViewClient(webViewClient);
browser.loadUrl(INSTALLED_APP_OAUTH); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T02:25:22.130

`setHttpAuthUsernamePassword()`用于 HTTP 身份验证，如基本身份验证或摘要身份验证。Google 帐户登录页面不使用任何这些，因此这不起作用。

你想做什么？您可以从 AccountManager 或新发布的 Google Play Services API 获取 ClientLogin（已弃用）或 OAuth 令牌。有了它，您应该能够登录到几乎任何 Google 服务，而无需用户输入密码。

# jquery - jquery滚动条未加载

> ID：12606435
> 
> 赞同：1
> 
> 时间：2012-09-26T16:37:28.790
> 
> 标签：jquery, ajax, load, scroll, scrollbar

我正在处理这个链接： http: [//nyam.eclecticshots.org](http://nyam.eclecticshots.org)。

每个页面都是通过 ajax/jquery/php 加载的。

这是我的问题（由于每个浏览器对 css 的理解不同而没有所有问题）我正在使用脚本 mCustomScrollBar 我在一些 div 上（如表单或文本）我首先加载脚本@（在 index.php 中）然后之后，当我动态加载其他页面时，我必须多次单击链接才能加载 srcollbar。其他一些脚本工作没有任何问题，但这个脚本拒绝工作！！！你能帮我吗 ！！！

如何访问问题：创意和设计（文本）laptopBags W Swag 然后自定义（表单）merci par avance（使滚动条出现的点击次数取决于浏览器（IE 4 点击，Firefox 3 点击，...）

提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T05:47:05.920

问题不再是......我通过使用**enscroll**找到了一个解决方案（参见 github ），它运行完美！我得到了 futu 网站的下一个滚动条脚本；）感谢那些正在阅读我的人

# html - 对于 Jquery UI 按钮，如何消除焦点上的蓝色光芒？

> ID：12606437
> 
> 赞同：5
> 
> 时间：2012-09-26T16:37:34.737
> 
> 标签：html, css, jquery-ui

我正在使用 Jquery UI。我有一个用背景图片替换的按钮。JQuery UI 在焦点上的按钮周围放置一个圆形的光晕。我想覆盖 css 以使蓝色辉光不出现。

标记如下所示：

```
<form id="sliderUIContainer" class="noUIeffects">
 <label for="slider-0" class="ui-hidden-accessible">Input Slider</label>
 <input type="range" name="slider" id="slider-0" value="0" min="0" max="20" />
</form> 
```

我必须在 CSS 中添加什么来覆盖此效果？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-10-04T19:59:09.433

如果您想从*所有*jQuery UI 元素中移除发光，我建议您在 CSS 开头附近使用以下代码：

```
/* Disable jQuery UI focus glow */

*:focus {
    outline: none;
    -moz-box-shadow: none;
    -webkit-box-shadow: none;
    box-shadow: none;
} 
```

这样，您将不需要跟踪每个单独的 ui-focus 选择器（即 .ui-btn-focus、.ui-tabs-focus、.ui-accordion-focus..ect）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-16T16:27:10.537

对我来说，在 chrome 26 for mac 上，我通过将“大纲”更改为无来解决此问题。

（与安迪回答的另一个区别是我的问题是在 ui-slider-handle 而不是 ui-btn 上）：

```
.ui-slider-handle:focus {
  outline: none;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T16:39:46.970

恐怕您将不得不编辑CSS：

```
.ui-focus,
.ui-btn:focus {
  -moz-box-shadow: none;
  -webkit-box-shadow: none;
  box-shadow: none ;
} 
```

# jquery - 删除方法在 Rails 中不起作用

> ID：12606441
> 
> 赞同：1
> 
> 时间：2012-09-26T16:37:43.443
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, actioncontroller

我当前的代码如下所示：

```
 <%= javascript_include_tag "hchq.js", "bootstrap-image-gallery.js", "bootstrap-image-gallery.min.js", "load-image.min.js", "media.js", "jquery", "bootstrap.js", "jquery.dataTables.js", "DT_bootstrap.js" %>
  <%= javascript_include_tag :defaults %> 
```

但是，我不断得到：

```
ActionController::RoutingError (No route matches [GET] "/assets/defaults.js"):
  actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.8) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.8) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.1) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.8) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.1) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/static.rb:62:in `call'
  railties (3.2.8) lib/rails/engine.rb:479:in `call'
  railties (3.2.8) lib/rails/application.rb:223:in `call'
  rack (1.4.1) lib/rack/content_length.rb:14:in `call'
  railties (3.2.8) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.1) lib/rack/handler/webrick.rb:59:in `service'
  /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /usr/local/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread' 
```

深入研究我发现的问题：[Rails 3.1rc4 defaults.js not found](https://stackoverflow.com/questions/6359860/rails-3-1rc4-defaults-js-not-found)建议我删除默认值。我把它拿出来，404 消失了，但是随着它的进出，我无法发出删除请求。它只是将我引导到显示页面。

关于发生了什么以及如何解决这个问题的任何想法，所以我没有得到 404 并且可以发出删除请求？

更新：

这是实际的删除链接：`<%= link_to 'Delete', client_path(client), method: "delete", class: "label label-important" %>`它会生成以下 html：`<a href="/clients/2" class="label label-important" data-method="delete" rel="nofollow">Delete</a>`这对我来说似乎是正确的。

这是日志中的一行：

```
Started GET "/clients/2" for 127.0.0.1 at 2012-09-27 16:50:23 -0500
Processing by ClientsController#show as HTML
  Parameters: {"id"=>"2"}
  Client Load (0.3ms)  SELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT 1  [["id", "2"]]
  Rendered clients/show.html.erb within layouts/application (1.2ms)
Completed 200 OK in 47ms (Views: 45.4ms | ActiveRecord: 0.3ms)

Started GET "/assets/defaults.js" for 127.0.0.1 at 2012-09-27 16:50:23 -0500
Served asset /defaults.js - 404 Not Found (4ms) 
```

我尝试的另一件事是摆脱默认行，因为那是 pre-rails 3.1，并使用“应用程序”作为 javascript_include_tag 中唯一的东西，我仍然有这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T12:47:13.810

将 Link_to 更改为 Button_to 修复了它。

为什么？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T12:52:17.350

唯一合理的解释与 CRSF 令牌 Rails 表单在有非 GET 操作到达服务器时所期望的有关。在 Rails 中构建表单时，出于安全目的，您有一个传递给服务器的令牌。`form_for`当您使用and`form_tag`助手（表单使用 POSTS 和其他东西） 时，这是自动内置的。

由于`protect_from_forgery`在您的`application_controller`，rails 不允许您从表单外部执行 POST/DELETE/PUT，这就是为什么`link_to`不起作用，它只是一个链接，试图执行 POST。但是，如果您对此行发表评论，则该链接将正常工作。

更多信息：http: [//guides.rubyonrails.org/security.html#cross-site-request-forgery-csrf](http://guides.rubyonrails.org/security.html#cross-site-request-forgery-csrf)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T12:56:16.263

您的删除链接只是一个链接，js 魔术将其转换为然后发布的表单。这就是表单有效而链接无效的原因 - 它一定只是保持链接。

至于为什么删除链接不起作用，您缺少js文件（因此404），或者如果您正确包含js，则js中有错误，链接将由助手转换。在浏览器中检查您的 js 控制台并查找错误。

您的链接将您发送到获取请求，因此显然内置的 rails js 无法转换链接。

# android - 如何在 DialogPreference 中调用默认按钮处理程序？

> ID：12606443
> 
> 赞同：1
> 
> 时间：2012-09-26T16:37:46.123
> 
> 标签：android, android-preferences, android-dialog

我希望我的程序存储远程服务的凭据，因此用户只需将它们设置在首选项中，就不会再这样做了。

因此，我将 DialogPreference 子类化，并且我的类显示了一个漂亮的对话框，其中包含登录名和密码两个字段。很好。

现在我想在用户输入数据并单击确定时验证数据，只是为了防止存储错误登录时的愚蠢情况，我们必须用警告偷看用户并要求他再次输入数据。

这是第一个问题：当单击按钮时，DialogPreference 的默认行为是关闭（我想知道为什么？）——当然我可以覆盖 onDialogClosed() 并在那里验证登录，但是无论我调用是否都会关闭对话框super.onDialogClosed() 与否。

好的，经过几个小时的搜索和尝试，我找到了一个乍一看很棒[的答案：肯定按钮上的点击处理程序允许我想要的。](https://stackoverflow.com/a/10581050/1380150)但是另一个问题来了：随着原来的点击处理程序被替换，对话框不再关闭。调用 super.onDialogClosed() 没有帮助；我假设这个方法只是一个不提供任何控制的通知。

那么如何以积极的结果以编程方式关闭 DialogPreference 呢？由于我替换了我的肯定按钮的默认单击处理程序，我想我需要自己调用旧处理程序，但是该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T15:30:49.523

`dismiss()`完成验证后，您是否尝试过调用Dialog 类的方法？

像 ：`getDialog().dismiss()`

# iphone - 如何在 UIactivityviewcontroller 中添加 Facebook、Twitter、邮件、消息图标

> ID：12606444
> 
> 赞同：3
> 
> 时间：2012-09-26T16:37:51.973
> 
> 标签：iphone, ios6

已将 activityviewcontroller 添加到主控制器

```
-(void)ActionSheet2:(id)sender
{
UIActivityViewController *activityViewController = [[UIActivityViewController alloc] init];

activityViewController.excludedActivityTypes = @[UIActivityTypePostToWeibo, UIActivityTypeAssignToContact ];

[self presentViewController:activityViewController animated:YES completion:NULL];

[activityViewController release];
} 
```

当我点击 actionsheet 按钮时，它显示只有取消按钮的空白 activityviewcontroller。我现在如何在 activityviewcontroller 中添加 Facebook、twitter、电子邮件和 iMessage 作为共享服务。

感谢帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-26T16:48:55.433

```
 //Include an array of things being attached to the ActivityViewController
     //The Array cannot be nil, you must provide something. Either an image or text or both
      NSArray *activityItems = @[@"Hello",[UIImage imageNamed:@"someImage"]];
      UIActivityViewController *activityViewController = [[UIActivityViewController alloc] initWithActivityItems:activityItems applicationActivities:nil];
      activityViewController.excludedActivityTypes = @[UIActivityTypePostToWeibo, UIActivityTypeAssignToContact ];    
       [self presentViewController:activityViewController animated:YES completion:NULL];      
       [activityViewController release]; 
```

# shopify - 从客户端使用 API 时出现 CORS 错误

> ID：12606446
> 
> 赞同：1
> 
> 时间：2012-09-26T16:37:56.110
> 
> 标签：shopify

我的（测试）商店不支持 CORS 并且不使用适当的标头进行响应，因此请求失败并显示错误消息`GET [http://jenkins-hauck12345.myshopify.com/admin/products.json](http://jenkins-hauck12345.myshopify.com/admin/products.json)``XMLHttpRequest cannot load [http://jenkins-hauck12345.myshopify.com/admin/products.json](http://jenkins-hauck12345.myshopify.com/admin/products.json). Origin [http://myapp.example.com](http://myapp.example.com) is not allowed by Access-Control-Allow-Origin.`

关于如何使其工作的任何建议？用作`myapp.example.com`代理？

谢谢！

# facebook - 使用 Facebook、Twitter 或 Google 帐户访问（读/写）Git 存储库？

> ID：12606448
> 
> 赞同：1
> 
> 时间：2012-09-26T16:38:02.413
> 
> 标签：facebook, git, authentication, twitter, oauth

我不太了解管理或设置 git 服务器，

但是是否可以通过 Facebook、Twitter 或 Google 帐户对用户进行身份验证以**推送**或拉取存储库？

我正在考虑随机用户（可能具有诸如电子邮件或 OAuth 令牌之类的基本信息？）可以贡献存储库的服务。你有什么主意吗？

# javascript - Raphaël 中的不透明度超出范围（负）

> ID：12606455
> 
> 赞同：1
> 
> 时间：2012-09-26T16:38:38.543
> 
> 标签：javascript, raphael, max

我有一个抛出 JavaScript 异常的页面：

```
raphael.js 中第 5144 行第 13 列的未处理异常
0x80048270 - JavaScript 运行时错误：Arg：分数超出范围（允许 0 到 1）
```

我正在使用 Raphaël 的 2.1.0 版本，并且出于调试目的使用未压缩的 JavaScript 文件而不是最小化的文件（即从[http://github.com/DmitryBaranovskiy/raphael/raw/master/raphael.js](http://github.com/DmitryBaranovskiy/raphael/raw/master/raphael.js)复制的文件）

如果我闯入调试器（我使用的是 Visual Studio 2012），我发现变量“不透明度”的值为 -0.23185589076263113，而它应该在 0 和 1 之间。但我看不出它是如何变成负数的。这是代码（来自 raphael.js，即它是库代码而不是我的代码）

```
 opacity = mmin(mmax(opacity, 0), 1);
        params["stroke-width"] == null && (width = a["stroke-width"]);
        params["stroke-width"] && (stroke.weight = width);
        width && width < 1 && (opacity *= width) && (stroke.weight = 1);
        stroke.opacity = opacity; 
```

当第一行明确将其限制为 [0, 1] 时，如何在此代码的最后一行出现 opacity == -0.23185589076263113？

（注意 raphael.js 中的 mmmax 是 math.max 而 mmin 是 math.min。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T17:32:21.643

找到了。

```
width && width < 1 && (opacity *= width) && (stroke.weight = 1); 
```

如果宽度为负数（在本例中为负数），则会打破不透明度范围。宽度设置在我引用的块之前的行（5139）：

```
var width = (toFloat(params["stroke-width"]) || 1) * .75; 
```

我需要调试我的代码以找出为什么 params["stroke-width"] 为负数，我建议 Raphael 防止这种情况发生：[https ://github.com/DmitryBaranovskiy/raphael/issues/623](https://github.com/DmitryBaranovskiy/raphael/issues/623)

# jsp - 在页面中打印提交的输入值

> ID：12606456
> 
> 赞同：-3
> 
> 时间：2012-09-26T16:38:42.193
> 
> 标签：jsp

```
<label for="recs">Search picture</label><br>
<input type="text" id="recs" name="recs" value="${reco}" style="width: 292px; "/> 
```

这就是我用来在文本框中接受值的方法。如何将提交的值打印到网页中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T16:48:33.237

提交表格后，你的意思是？只需使用参数名称作为键从[请求参数映射](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getParameterMap%28%29) `${param}`中获取它（输入字段名称成为请求参数名称）。

```
${param.recs} 
```

但是要小心[XSS 攻击](http://en.wikipedia.org/wiki/Cross-site_scripting)。使用 JSTL`<c:out>`或`fn:escapeXml()`HTML 转义它。

```
<c:out value="${param.recs}" /> 
```

请注意，[Java](https://stackoverflow.com/tags/java/info) / [JSP](https://stackoverflow.com/tags/jsp/info)与[JavaScript](https://stackoverflow.com/tags/javascript/info)**无关**。

### 也可以看看：

*   [我们的 JSP 维基页面](https://stackoverflow.com/tags/jsp/info)
*   [我们的 EL 维基页面](https://stackoverflow.com/tags/el/info)
*   [我们的 JSTL 维基页面](https://stackoverflow.com/tags/jstl/info)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-26T16:47:14.823

您可以使用以下内容： <%= reco %> 这将打印值

# c# - 如何使用列表 在 C# 中

> ID：12606458
> 
> 赞同：2
> 
> 时间：2012-09-26T16:38:49.337
> 
> 标签：c#, list

下面的代码不想编译。我收到一条错误消息：

> 'System.Collections.Generic.List.Add(string[]) 的最佳重载方法匹配有一些无效参数

但我看不出有什么问题。有什么建议么？

```
public static List<string[]> ReadFromDelimitedFile (string Path)
    {
        int i=0;
        List<string[]> AllContracts = new List<string[]>();
        using (TextFieldParser parser = new TextFieldParser(Path))
        {
            parser.Delimiters = new string[] { "\t" };
            while (true)
            {
                AllContracts.Add(i)= parser.ReadFields();
                if (AllContracts.Add(i) == null)
                {
                    break;
                }
                i++;

            }
        }

        return AllContracts;
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-26T16:40:28.130

你要：

```
AllContracts.Add(parser.ReadFields()); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-26T16:41:13.807

您正在尝试调用`Add(int)`-`List<string[]>`然后*为结果*赋值。基本上，这条线以多种方式被打破：

```
AllContracts.Add(i)= parser.ReadFields(); 
```

也许你真的想要：

```
string[] fields = parser.ReadFields();
if (fields == null)
{
    break;
}
AllContracts.Add(fields); 
```

在这一点上，你根本不需要`i`- 而且你不会在列表末尾得到一个空条目（这很可能会在以后给你带来问题 -*想要*一个以空结尾的列表当然是不寻常的）。

另外，我建议不要对局部变量名使用 PascalCasing。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T16:45:09.007

该`Add`方法不是索引器。您使用要添加的数据调用它，但不能使用它从集合中读取数据。

您应该将解析的值放入变量中，以便在将其添加到集合之前对其进行检查，这样您就不会将 null 引用添加到集合中：

```
while (true) {
  string[] fields = parser.ReadFields();
  if (fields == null) {
    break;
  }
  AllContracts.Add(fields);
} 
```

您还可以在以下位置进行分配和检查`while`：

```
string[] fields;
while ((fields = parser.ReadFields()) != null) {
  AllContracts.Add(fields);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T17:01:17.783

您的 while 循环可以替换为以下内容：

```
while(!parser.EndOfData)
{
    AllContracts.Add(parser.ReadFields());
} 
```

如前所述，该`Add`方法不带索引，它会自行计算下一项的索引应该是什么；你只需要给它添加的实际项目。

此外，您可以使用`parser.EndOfData`来确定是否有更多要添加的项目，而不是检查是否`ReadFields()`为空。它读起来容易得多。

# xml - 使用带有 Spring MVC 的 dom4j 的 xml 元素中的编码不正确

> ID：12606462
> 
> 赞同：0
> 
> 时间：2012-09-26T16:39:02.630
> 
> 标签：xml, spring, spring-mvc, utf-8, dom4j

我创建了一个`AbstractView`以便将一些 XML 输出到浏览器，如下所示：

```
public abstract class AbstractXmlView extends AbstractView {

public AbstractXmlView() {
    setContentType("application/xml");
}

@Override
protected void renderMergedOutputModel(Map<String, Object> model,
        HttpServletRequest request, HttpServletResponse response)
        throws Exception {

    response.setCharacterEncoding("UTF-8");

    Document document = new DOMDocument();
    document.setXMLEncoding("UTF-8");

    buildXmlDocument(model, document, request, response);

    response.getOutputStream().print(document.asXML());
}

public abstract void buildXmlDocument(Map<String, Object> model,
        Document document, HttpServletRequest request,
        HttpServletResponse response) throws Exception; 
```

如您所见，我的子类将定义该`buildXMLDocument`方法以填充将实际传递给浏览器的 XML 文档，因此这是一个简化的实现：

```
public class GetXmlContacts extends AbstractXmlView {

@Override
public void buildXmlDocument(Map<String, Object> model, Document document,
        HttpServletRequest request, HttpServletResponse response)
        throws Exception {

    Element node = document.addElement("node");
    node.setText ("I'm unicode áéíóú");
} 
```

请注意文字字符串作为元素`node`“我是 unicode áéíóú”中的文本。当我向服务器请求这个时，我获得了一个带有 UTF-8 编码（OK）的 HTTP 响应，XML 定义说它是 UTF-8，但是节点的文本将被编码为 ISO-8859-1（这是我的猜测，因为当我使用 Firefox 更改编码时，该字符串看起来不错）。

那么，为什么当定义应该是 UTF-8 时，dom4j 将文字字符串编码为 ISO？我的代码有问题吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T17:46:17.310

解决了！因为 dom4j 的一些错误，`element.setText()`不关心指定的编码并且`document.asXML()`会返回一个 ISO 字符串，所以我修改了该行如下：

```
response.getOutputStream().write(document.asXML().getBytes("UTF-8")); 
```

一切正常..

# c++ - 来自路由器后面的 P2P

> ID：12606464
> 
> 赞同：0
> 
> 时间：2012-09-26T16:39:08.393
> 
> 标签：c++, port, router, unlock

我想做一个传输数据P2P的应用程序。有没有办法动态解锁路由器中的数据端口以建立连接（如果没有手动设置）？有协议吗？如何在 cpp 中使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T16:46:13.600

你可以试试UPnP，如果路由器支持的话，它可以转发端口。

如果你正在寻找一个免费的图书馆，有一些，比如 GUPnP：[https](https://live.gnome.org/GUPnP/) ://live.gnome.org/GUPnP/ 或 libupnp：[http ://pupnp.sourceforge.net/](http://pupnp.sourceforge.net/)

# java - 在 Java 中将 Windows DOMAIN\user 映射到 user@KERBEROS.REALM

> ID：12606466
> 
> 赞同：1
> 
> 时间：2012-09-26T16:39:13.450
> 
> 标签：java, windows, dns, kerberos

I'm writing an application that needs to take logins in the form of `DOMAIN\user`, but then turn around and authenticate to a Kerberos service. I use a JAAS `LoginContext` using the `Krb5LoginModule` for that which seems to expect the user names in `user@KERBEROS.REALM` format. Is there a way to get that mapping programmatically or from a config file? Alternatively, is there a way to get JAAS to accept "Windows-style" user names?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T18:32:44.957

`Domain\user`是 Windows 2000 之前的版本。您应该真正坚持使用 UPN 样式的登录。Kerberos 5 模块仅接受 Kerberos UPN。您是否可以让客户端直接发送 kerberos 票证？

你[这个](https://stackoverflow.com/a/1214751/696632)答案作为一个起点。搜索 nETBIOSName，您将找到 dnsRoot 属性。把那个大写，你就有了你的 Kerberos 领域。请注意，这些属性在 GC 中不可用，而仅在正常模式下可用，因此您可能需要遵循引用。

# .htaccess - 从 mod_rewrite 规则中排除图像

> ID：12606470
> 
> 赞同：4
> 
> 时间：2012-09-26T16:39:28.590
> 
> 标签：.htaccess, mod-rewrite

无意中我的 htaccess 脚本正在更改图像 URL，因此其 URL 路径中带有“portfolio/”的任何图像都会受到不利影响。

有没有办法从该特定规则中排除图像？

```
redirect 301 "/sitemap.xml" http://www.example.com/sitemap.php

RewriteEngine On

RewriteCond %{REQUEST_URI} !portfolio/project
RewriteCond %{REQUEST_URI} /.*portfolio/.*$ [NC]
RewriteRule ^(.*)portfolio(.*)$ /$1portfolio/project$2 [R=301,L]

RewriteCond $1 !\.(gif|jpe?g|png)$ [NC]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !^/sitemap.php
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T17:01:31.090

对于第一部分（第一个重写规则）尝试

```
RewriteCond %{REQUEST_URI} !portfolio/project
RewriteCond %{REQUEST_URI} !\.(gif|jpe?g|png)$ [NC]
RewriteCond %{REQUEST_URI} /.*portfolio/.*$ [NC]
RewriteRule ^(.*)portfolio(.*)$ /$1portfolio/project$2 [R=301,L] 
```

我不确定你为什么`RewriteCond $1 !\.(gif|jpe?g|png)$ [NC]`在第二次重写中使用。

`RewriteCond %{REQUEST_URI} !\.(gif|jpe?g|png)$ [NC]`意味着您不想将投资组合更改为以某些允许的图像扩展名结尾的 URL 的投资组合/项目。`[NC]`（不区分大小写）也用于跳过 JPG、GIF、PnG 等扩展名

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-18T21:05:09.317

如果您的目标是完全从重写规则中排除图像，请考虑添加以下行作为您的第一条规则：

```
 RewriteRule ^.*\.(gif|jpe?g|png)$ - [L] 
```

如果它与上述模式匹配，它只会阻止规则引擎继续前进，并且不会重写 url。

# java - NoClassDefFoundError 的可能原因

> ID：12606477
> 
> 赞同：2
> 
> 时间：2012-09-26T16:40:01.250
> 
> 标签：java, ant, build, jar

我得到以下内容`NoClassDefFoundError`，这很奇怪，因为该类已经存在于库 jar 中。

```
Exception in thread "main" java.lang.NoClassDefFoundError: abc/test/Test.java
        at java.lang.ClassLoader.defineClass1(Native Method)
        at java.lang.ClassLoader.defineClass(ClassLoader.java:795)
        at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:144)
        at java.net.URLClassLoader.defineClass(URLClassLoader.java:382)
        at java.net.URLClassLoader.access$100(URLClassLoader.java:75)
        at java.net.URLClassLoader$1.run(URLClassLoader.java:294)
        at java.net.URLClassLoader$1.run(URLClassLoader.java:288)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:287)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:424)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:327)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:357)
        at java.lang.ClassLoader.defineClass1(Native Method)
        at java.lang.ClassLoader.defineClass(ClassLoader.java:795)
        at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:144)
        at java.net.URLClassLoader.defineClass(URLClassLoader.java:382)
        at java.net.URLClassLoader.access$100(URLClassLoader.java:75)
        at java.net.URLClassLoader$1.run(URLClassLoader.java:294)
        at java.net.URLClassLoader$1.run(URLClassLoader.java:288)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:287)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:424)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:327)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:357)
        at sun.launcher.LauncherHelper.checkAndLoadMain(LauncherHelper.java:432)
Caused by: java.lang.ClassNotFoundException: abc.test.Test
        at java.net.URLClassLoader$1.run(URLClassLoader.java:299)
        at java.net.URLClassLoader$1.run(URLClassLoader.java:288)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:287)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:424)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:327)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:357)
        ... 25 more 
```

看起来它无法找到导致异常的同一类。我还在 ant 中包含了库路径`build.xml`，可以在下面进行验证。

```
<property name="deps" value="${lib}/abclib/abclib-test.jar"/>

<target name="dist" depends="compile">
        <manifest file="${dist}/MANIFEST.MF">
            <attribute name="Main-Class" value="xyz.test.TestConfiguration" />
            <attribute name="Class-Path" value="${deps}"/>
        </manifest>
        <jar jarfile="${dist}/abc.jar" basedir="${build}/" manifest="${dist}/MANIFEST.MF" />
</target> 
```

我迷路了，至少有人可以指导我应该在哪里看或我可能做错了什么？

另外，有人可以抛出灯，“异常”和“由”引起。我不太明白他们两个是如何相关的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-11-14T10:13:09.217

**使用函数初始化静态字段**可能会导致难以揭示`NoClassDefFoundError`

***示例：当您执行以下操作时：***

```
public class SomePanel extends Panel {
    static int CALC_VALUE = ValueCalcUtils.calcValue();
    ... 
```

***...在哪里***

```
ValueCalcUtils.calcValue() 
```

***...引发异常。***

然后，当抛出异常时，会发生这种情况：

1.  **将有一个错误指示实际问题**（`ValueCalcUtils.calcValue()`由于某种原因引发了异常）
2.  **`SomePanel`随后每次尝试`NoClassDefFoundError`创建`SomePanel`.**

发生这种情况是因为 JVM 会记住`SomePanel`在他第一次尝试创建类定义时无法初始化，因此当再次询问时“没有类定义”（ `NoClassDefFoundError`） 。`SomePanel`

***在 Wicket/Tomcat 情况下...***

I've had this exact Problem with a Wicket-Application on a Tomcat-Webserver. The Problem was, that the static Utils-Method relied on `WicketApplication.get()`.

Where this would work in most cases, it would lead to the described Problem when the Tomcat tried to restore old Sessions from the SessionStore on startup. Sometimes the Sessions contained serialized Instances of the Panel in Question. When initializing the Panel-Class there was an Exception because the **WicketApplication** did not yet exist on Tomcat startup. Later on we had alot of confusing `NoClassDefFoundError`s for the Panel in our Application-Logs, without apparent reason.

**We finally found the single appearance of the "root Error" in the tomcat-stderror.log** file, since it was the tomcat throwing the initial error on startup.

希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-26T17:44:48.560

对另一个[SO 条目](https://stackoverflow.com/questions/1457863/what-is-the-difference-between-noclassdeffounderror-and-classnotfoundexception)`NoClassDefFoundError`之间的区别有一个很好的解释：`ClassNotFoundException`

> 并不意味着 ... 类不在 CLASSPATH 中。事实上它恰恰相反。这意味着类 ... 已被 ClassLoader 找到，但是在尝试加载该类时，它在读取类定义时遇到了错误。这通常发生在所讨论的类具有使用 ClassLoader 未找到的类的静态块或成员时。因此，要找到罪魁祸首，请查看相关类的源代码......并使用静态块或静态成员查找代码。

您需要查看 Test.java 的代码并找出它导入的内容并确保这些类位于类路径中。如果您需要帮助跟踪类，您可以发布 Test.java 的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T16:43:56.467

`ClassNotFoundException`和`NoClassDefFoundError`..之间有区别

虽然`first`一个表示`class`您正在使用的不在您的`classpath`

`Second`一个表示，`class`您正在使用的又是另一个`class`不在您的类路径中的..

所以，问题不在于您的类路径中没有您的类。但问题是，`classes`您的类所依赖的类不在您的类路径中。现在，您需要检查所有内容`classes`，您的`class`（当前在您的代码中使用的一个）取决于..

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T17:26:31.080

中的`Class-Path`条目`MANIFEST.MF`具有特定格式，特别是类路径中的条目必须是相对 URI（相对于包含清单的 JAR 的位置）。Ant 的[`manifestclasspath`任务](http://ant.apache.org/manual/Tasks/manifestclasspath.html)是帮助构建合适的类路径。

```
<target name="dist" depends="compile">
    <property name="jar.location" location="${dist}/mcon.jar"/>
    <manifestclasspath property="manifest.class.path" jarfile="${jar.location}">
      <classpath>
        <pathelement location="${deps}" />
      </classpath>
    </manifestclasspath>
    <manifest file="${dist}/MANIFEST.MF">
        <attribute name="Main-Class" value="xyz.test.TestConfiguration" />
        <attribute name="Class-Path" value="${manifest.class.path}"/>
    </manifest>
    <jar jarfile="${jar.location}" basedir="${build}/" manifest="${dist}/MANIFEST.MF" />
</target> 
```

这应该`Class-Path`使用正确的格式设置（大概类似于`../lib/abclib/abclib-test.jar`您的示例）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T16:58:06.807

NoClassDefFoundError 表示该类在编译期间存在，而不是在运行时执行期间存在。因此，正如其他人所建议的，您需要了解在运行时而不是在编译时使用的类路径。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-26T17:07:16.627

`NoClassDefFoundError`由于您的类加载器无法加载类的定义而引发。确保给出了类路径上类的正确路径。检查库是否在类路径中。修改您`MANIFEST.MF`，使库存在于`Class-Path`. 使用命令行 -cp 开关运行 java 以表示类路径上的库。

# c++ - 用递增整数c ++格式化字符串

> ID：12606479
> 
> 赞同：-1
> 
> 时间：2012-09-26T16:40:10.327
> 
> 标签：c++, printf

有没有一种快速的方法来执行以下操作而无需重复`i++`

```
int i = 0;
printf("foo-%d,blah-%d,orange-%d", i++, i++, i++); 
```

我需要用 8 对或更多对来执行此操作，并且代码看起来很糟糕..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T16:42:28.440

参数的评估顺序未指定。此外，您不能在没有中间序列点的情况下两次修改变量。所以改为这样做：

```
printf("foo-%d,blah-%d,orange-%d", i, i+1, i+2);
i+=3; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T16:53:51.710

由于您可以拥有 8 对或更多对，我建议您使用更易读且易于扩展的版本：

```
std::vector<std::string> vec_values = {"foo", "blah", "orange"};
for (size_t index = 0; index < vec_values.size(); ++index)
    std::cout << vec_values[index] << "-" << index; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T16:50:26.850

您可能会根据前缀而不是数字来考虑它：

```
int i = 0;
std::vector<std::string> prefixes { "foo", "bar", "baz", "ham" };

bool first = false;
for (const auto& prefix : prefixes) {
    if (!first)
        std::cout << ',';
    std::cout << prefix << '-' << i++;
    first = false;
} 
```

如果你不能使用 C++11 range-based `for`，你可以完整地写出来：

```
for (auto prefix = prefixes.begin(); prefix != prefixes.end(); ++prefix) {
//   ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    if (!first)
        std::cout << ',';
    std::cout << *prefix << '-' << i++;
    //           ~~~~~~~
    first = false;
} 
```

或者，使用索引：

```
for (i = 0; i < prefixes.size(); ++i) {
//   ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    if (!first)
        std::cout << ',';
    std::cout << prefixes[i] << '-' << i;
    //           ~~~~~~~~~~~           ~
    first = false;
} 
```

# html - 使 DIV 100% 在另一个 DIV 100% 高度内拉伸高度

> ID：12606483
> 
> 赞同：1
> 
> 时间：2012-09-26T16:40:41.860
> 
> 标签：html, css

> **可能重复：**
> [高度：100%；不工作](https://stackoverflow.com/questions/7049875/height100-not-working)

我有两个 div，一个在另一个里面。两者都设置为 100% 的高度。容器 (A) 大小合适并填充其父级，但其子级 (B) 未拉伸到其高度。当我以像素为单位设置容器 (A) 高度时，例如 500 像素，它的子 (B) 会正确拉伸。

但我需要将容器 (A) 设置为百分比，而不是像素。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T16:45:47.667

`height:100%`，或任何百分比值，仅在父级也设置了高度时才有效。

因此，在您的情况下， div A 的父级可以是另一个元素或主体。如果是这种情况，请添加以下规则：

```
html, body { height:100%; } 
```

到你的 CSS。然后它将起作用。

# c# - 查找动态创建的单选按钮列表

> ID：12606484
> 
> 赞同：0
> 
> 时间：2012-09-26T16:40:52.193
> 
> 标签：c#, asp.net

我正在向页面动态添加一个单选按钮列表，在按钮单击时我想存储这些值。但我无法在页面上找到控件。请在下面找到示例代码。

```
for(int i=1;i<10;i++)
{

 Table tblStars = new Table();    
 RadioButtonList rb = new RadioButtonList();    
 rb.ID = i.ToString();

----
TableCell tc=new TableCell();    
TableRow tr=new TableRow();    
tc.Controls.Add(rb);    
tr.cells.Add(tc);

tblStars.Rows.Add(tr);    
ContentPlaceHolder.Controls.Add(tblStars);

} 
```

在按钮单击事件上，

```
protected void btnPost_Click(object sender, EventArgs e)

 {    
    for(int i=1;i<10;i++)    
    {    
       RadioButtonList rb = (RadioButtonList)this.Page.FindControl(i.ToString());    
    }
} 
```

在这里，我找不到控件。FindControl 返回 null。

我在这里错过了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T16:44:21.553

因为您正在动态创建 RadioBuoon 列表，所以您需要在**每次 POSTBACK**之后创建它们 。

你在这样做吗？

此外，`this.Page.FindControl` 您不需要专门针对您期望它所在的单元格..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T16:47:15.807

单击按钮时，您可能会丢失控件。每次单击它时，它都会进行回发，并执行 Page_Load 事件。您可能正在那里初始化您的信息，并且您的表格中的控件已重置。再次尝试在 Page_Load 事件中加载控件。您也可以尝试使用启用的视图状态。

# javascript - 大写字符串类型

> ID：12606485
> 
> 赞同：2
> 
> 时间：2012-09-26T16:40:52.857
> 
> 标签：javascript, google-closure-compiler

我有一些类似于以下的代码来下载二进制文件。我的目标是将其转换为 base64 数据 URI，同时支持可能不了解 ArrayBuffer 的旧浏览器。现在，代码似乎运行良好。

```
function download (url) {
    'use strict';
    var xhr = new XMLHttpRequest();
    xhr.open('GET', url, true);
    xhr.responseType = 'arraybuffer';
    xhr.onreadystatechange = function () {
        if (xhr.readyState === 4 && xhr.status === 200) {
            var mime = xhr.getResponseHeader('Content-Type');
            var base64;
            if (oldIE) {
                var rawBytes = ieConvert(xhr.responseBody);
                base64 = encodeString64(rawBytes);
            } else if (xhr.response instanceof ArrayBuffer) {
                var payload = new Uint8Array(xhr.response);
                for (var i = 0, buffer = ''; i < payload.length; i++) {
                    buffer += String.fromCharCode(payload[i]);
                }
                base64 = window.btoa(buffer);
            } else if (xhr.response instanceof String) {
                base64 = encodeString64(xhr.response);
            }
            return 'data:' + mime + ';base64,' + base64;
        } else if (xhr.readyState === 4) {
            throw "Failed.";
        }
    };
    xhr.send();
} 
```

我的问题是，当我使用 Google Closure Compiler 时，会收到类型警告。显然，这是因为我使用了`instanceof String`，但`instanceof string`由于对象名称应该大写，所以不起作用。

```
WARNING - actual parameter 1 of encodeString64 does not match formal parameter
found   : String
required: string
                    base64 = encodeString64(xhr.response);
                                            ^
0 error(s), 1 warning(s), 85.22012578616352 typed 
```

知道如何摆脱这个警告吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T16:53:30.870

```
base64 = encodeString64(String(xhr.response)); 
```

试试这个以了解区别：

```
<script>
x = new String("hello");
alert(typeof x); //prints Object (this is a String object)

x = String("hello"); //or x = "hello";
alert(typeof x); //prints string (this is string with small s - similar to running toString() on a JS object)
</script> 
```

# magento - Magento - Amazon Cloudfront CDN 和缓存

> ID：12606487
> 
> 赞同：0
> 
> 时间：2012-09-26T16:40:58.433
> 
> 标签：magento, amazon-s3, amazon-cloudfront

我试图了解 CDN 和缓存，但没有找到答案。

你如何让亚马逊 CDN 缓存来自你的原始服务器缓存图像的图像？有没有办法测试它？

我将 CDN 源映射到我的服务器，所以当它没有找到时

[http://cdn.mywebsite.com/media/catalog/product/cache/1/small_image/190x/9df78eab33525d08d6e5fb8d27136e95/i/m/img101.jpg](http://cdn.mywebsite.com/media/catalog/product/cache/1/small_image/190x/9df78eab33525d08d6e5fb8d27136e95/i/m/img101.jpg)

它反而寻找

[http://mywebsite.com/media/catalog/product/cache/1/small_image/190x/9df78eab33525d08d6e5fb8d27136e95/i/m/img101.jpg](http://mywebsite.com/media/catalog/product/cache/1/small_image/190x/9df78eab33525d08d6e5fb8d27136e95/i/m/img101.jpg)

您可以在 Firebug 中看到，所有 magento 缓存的元素都得到一个 301 永久移动，而静态文件得到一个 OK 200 响应。此外，如果我输入云端 URL，它会自动更改为我的 magento 缓存元素的 url，但仍保留为静态元素的云端 url。

如果我稍后再回去，即使是一整天，它都不会使用 CDN 源，这让我相信它没有在 Amazon 上缓存我的 magento 缓存的 css/js/images。

如果我关闭缓存和 js/css 优化，那么它会向云端 cdn 发出过多的 http 请求。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T23:33:29.843

当 Cloudfront 出于某种原因向您的服务器（源）询问文件时，您的服务器没有以 200 响应。您应该检查您的日志并重写规则以确定 Cloudfront 接收 301 响应的原因。

我能想到的一种解释是，如果你有一个重定向到 www.* 等的规则。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T21:32:29.457

我遇到了类似的问题，原因与 Gordon Knoppe 的回答没有什么不同。我有一个包含大量缩略图的页面，这些缩略图应该由我的 CloudFront CDN 提供。奇怪的是，三分之二没有，而那些没有显示“301 - 永久重定向”的 Fiddler。

原来图像的 URL 路径可能包含大写字母（有些有，有些没有），对于那些有的，它们与确保所有 URL 都以小写形式处理的重写规则相冲突。最终结果是 CloudFront 请求仅缓存在 200 个回复上，而不是在路径不是小写时返回的 301 上。将 URL 路径修复为全部小写后，一切正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T11:48:35.563

威尔布德尔

我已经用 Amazon cloudfront、S3 和 amazon [OnePica Extension](http://www.magentocommerce.com/magento-connect/6274.html)实现了精确的东西。

所以 OnePica 已经为 S3 和 Cloudfront 处理了产品图片。但是对于 Css & Js，我们已经自定义了我们的代码。我们定制`Mage_Core_Helper_Data::mergeFiles()` &`Mage_Core_Model_Design_Package::getMergedJsUrl($files)`和`Mage_Core_Model_Design_Package::getMergedCssUrl($files)`方法

当然，您需要将您的媒体 URL 更改为云端 URL。如果您希望对您的文件进行 Gzip 压缩，请提个建议。然后你必须压缩你的 CSS & JS 文件，然后上传到 S3 服务器。希望对你有帮助

# php - 基于 php 无法识别 iframe src

> ID：12606491
> 
> 赞同：2
> 
> 时间：2012-09-26T16:41:11.290
> 
> 标签：php, function, iframe, function-pointers

所以，我在页面上有这样的 iframe：（**不识别 PHP 标记）**

```
<iframe class="iframe" src="/message.html?msjId=<? echo $msj_id ?> 
```

它是从一个看起来像这样的 php 函数打印的：

```
print('msjID, stamp,Name,Status, $table, 'messages','<iframe class="iframe" src="/message.html?msjId=<? echo $msj_id ?>">'); 
```

此函数的标题如下所示：

```
function print($header, &$table, $title='',$iframe) { 
```

所以`$table`是 的值的数组`msjID, stamp, Name ,Status`。

我的问题：iframe 无法识别 php 标签，因此我无法使用`foreach`语句从数据库中获取 msjId。

请需要帮助！

更新：

所以让我解释一下我的 foreach 问题：我已经有了这个：

```
foreach ($result as $row) {
            $msj_id = $tablerow['msj_id'];
}
 print('msjID, stamp,Name,Status, $table, 'messages','<iframe class="iframe" src="/message.html?msjId=<? echo $msj_id ?>">'); 
```

如果我将打印功能放在循环中，它将打印如下表格：

```
|table msj_id=1|

|table msj_id=2|
|table msj_id=2|

|table msj_id=3|
|table msj_id=3|
|table msj_id=3| 
```

我只需要最后一个而不是全部，我只需要这样：

|表 msj_id=1| |表 msj_id=2| |表 msj_id=3|

msj_id 循环内的 var_dump 是：

```
string '297-3' (length=5)

string '296-3' (length=5)

string '300-3' (length=5) 
```

循环外是：

```
 string '300-3' (length=5) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T16:50:58.753

不要使用**功能打印** 使用不同的名称

```
<?php
function printer($header, &$table, $title='',$iframe) {
echo "'msjID, stamp,Name,Status, $table, 'messages','<iframe class=\"iframe\" src=\"/message.html?msjId=".$msj_id."";
}
?> 
```

像这样使用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T16:42:33.737

没有 iframe 无法识别 PHP 标签之类的事情...... PHP 标签是在服务器端解析的，iframe 在客户端工作。

客户端无法解析 PHP。尝试这个：

```
foreach($msjID as $value)
    print($value, $table, 'messages','<iframe class="iframe" src="/message.html?msjId='.$msj_id.'">'); 
```

![在此处输入图像描述](../Images/73c7a8ae3cc54b9f060bdbc29857109c.png)

顺便说一句，不要使用短标签`<? ?>`，使用`<?PHP ?>`:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T16:46:08.803

您的打印功能不会评估 PHP 标记。您需要在该打印函数中使用 PHP 变量，如下所示：

```
foreach ($msj_id as $id) {
    print('msjID, stamp,Name,Status', $table, 'messages','<iframe class="iframe" src="/message.html?msjId='.$id.'">');
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T16:46:15.777

尝试这个，

```
print('msjID, stamp,Name,Status, $table, 'messages','<iframe class="iframe" src="/message.html?msjId='.$msj_id.'">'); 
```

# java - 尝试编译 JODA time 2.1 源时出现异常

> ID：12606502
> 
> 赞同：1
> 
> 时间：2012-09-26T16:41:39.553
> 
> 标签：java, jodatime

我需要在 Joda 时间支持[SystemV时区。所以正如这个](http://en.wikipedia.org/wiki/System_V)[答案](https://stackoverflow.com/a/10697902/306855)中提到的那样，我在评论 SystemV 数据文件中的行后尝试重新编译。但是在编译时它给出了这个异常：

```
 [java] Exception in thread "main" org.joda.time.IllegalFieldValueException: Value 292278995 for year must be in the range [-292275054,292278993]
     [java]     at org.joda.time.field.FieldUtils.verifyValueBounds(FieldUtils.java:217)
     [java]     at org.joda.time.chrono.BasicYearDateTimeField.set(BasicYearDateTimeField.java:82)
     [java]     at org.joda.time.chrono.BasicYearDateTimeField.add(BasicYearDateTimeField.java:63)
     [java]     at org.joda.time.tz.DateTimeZoneBuilder$OfYear.next(DateTimeZoneBuilder.java:575)
     [java]     at org.joda.time.tz.DateTimeZoneBuilder$Recurrence.next(DateTimeZoneBuilder.java:761)
     [java]     at org.joda.time.tz.DateTimeZoneBuilder$Rule.next(DateTimeZoneBuilder.java:863)
     [java]     at org.joda.time.tz.DateTimeZoneBuilder$RuleSet.nextTransition(DateTimeZoneBuilder.java:1091)
     [java]     at org.joda.time.tz.DateTimeZoneBuilder$RuleSet.firstTransition(DateTimeZoneBuilder.java:1029)
     [java]     at org.joda.time.tz.DateTimeZoneBuilder.toDateTimeZone(DateTimeZoneBuilder.java:351)
     [java]     at org.joda.time.tz.ZoneInfoCompiler.compile(ZoneInfoCompiler.java:391)
     [java]     at org.joda.time.tz.ZoneInfoCompiler.main(ZoneInfoCompiler.java:136) 
```

知道这是什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T18:20:17.343

查看`joda-time-2.1.jar/META-INF/MANIFEST.MF`我们可以看到 requared JDK 是
`Build-Jdk: 1.5.0_22`.
所以使用它，而不是如果你。

您有错误的 zoneinfo 文件。我使用 JDK 1.6_22 构建 joda lib 没有任何问题。

在构建过程中，我们有下一个

```
main:
    [mkdir] Created dir: D:\js\target\classes\org\joda\time\tz\data
     [java] Writing zoneinfo files
     [java] Writing ZoneInfoMap
Executed tasks 
```

在这里你的建筑失败了

# javascript - 通过 Facebook API 创建 Facebook 活动流

> ID：12606505
> 
> 赞同：-1
> 
> 时间：2012-09-26T16:41:47.957
> 
> 标签：javascript, facebook

我正在寻找为我的网站创建自定义 Facebook 插件。基本上，我想要的是顶部没有东西的“Like Box”，主要是因为我认为它看起来很傻。

我知道我可以通过 JavaScript 做到这一点，我只是不知道如何实际做到这一点。

任何帮助表示赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T17:51:08.003

如果不要求您的用户首先登录您的网站，我认为这在 javascript 中是不可能的。要从 api 访问这些数据，您需要进行经过身份验证的调用，并且您不能在不暴露访问令牌的情况下将访问令牌存储在前端。

但是，您可以在服务器上执行必要的调用，然后呈现您自己的活动源。

# java - Google MapMaker：以 LRU 顺序迭代条目

> ID：12606508
> 
> 赞同：1
> 
> 时间：2012-09-26T16:42:10.203
> 
> 标签：java, map, guava

是否可以遍历按`MapMaker`LRU 顺序创建的地图？ `com.googlecode.concurrentlinkedhashmap`有`ascendingKeySet`and`descendingKeySet`方法，但这些似乎在`MapMaker`（的实例`CustomConcurrentHashMap`）返回的地图中不可用。默认迭代器是否使用 LRU 排序？粗略看一下代码表明不是。

我正在尝试为包含 MapMaker 地图的类实现克隆方法，因此我需要一种方法来创建地图的克隆，维护地图条目的 LRU 排序。

撇开同步问题不谈，如果我可以按 LRU 顺序迭代条目，那么我可以将条目添加到具有相同限制的 MapMaker 地图的新实例中，并且我将获得一个可行的克隆。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T17:15:00.317

不，这是不可能的。 `MapMaker`不会在任何地方保留全局 LRU 排序；这些段保持*内部*LRU 排序，仅此而已。

# android - 在您的 facebook 墙上发布签到错误

> ID：12606509
> 
> 赞同：0
> 
> 时间：2012-09-26T16:42:14.267
> 
> 标签：android, eclipse, facebook-graph-api

我正在使用此代码。实际上我想做的是，在我的墙上我得到一张`checkins`我在这里的地图。

```
 private void getFb()
  {
    fb = new Facebook(Constants.facebookKey);
    String[] arrayOfString = new String[2];
      arrayOfString[0] = "publish_stream";
      arrayOfString[1] = "me/checkins";
      fb.authorize(this, arrayOfString, new FBDialogListener());
  }

  @Override
  public void onActivityResult(int requestCode, int resultCode, Intent data) 
  {
      super.onActivityResult(requestCode, resultCode, data);
      fb.authorizeCallback(requestCode, resultCode, data);
  }

  private class FBDialogListener implements Facebook.DialogListener
  {

        public void onComplete(Bundle values)
        {

             Bundle params = new Bundle();
             params.putString("place", "MyPlaceId");  // YOUR PLACE ID
             params.putString("Message","I m here in this place");

             JSONObject coordinates = new JSONObject();
             try {
                coordinates.put("latitude",Constants.latitude); // The place Coordinates
                 coordinates.put("longitude", Constants.longitude);
            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
             params.putString("coordinates",coordinates.toString());

             JSONArray frnd_data=new JSONArray();
             fb.dialog(MainMenu.this,"me/checkins", params, new PublishDialogListener());

        }

        public void onFacebookError(FacebookError e) {

        }

        public void onError(DialogError e) {    

        }

        public void onCancel() {

        }
  }

  private class PublishDialogListener implements Facebook.DialogListener
  {

        public void onComplete(Bundle values) {

        }

        public void onFacebookError(FacebookError e) {

        }

        public void onError(DialogError e) {

        }

        public void onCancel() {
        }

  } 
```

这只是给了我错误

```
The page you have request is not found. 
```

怎么了？最好的祝福

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:25:57.647

1.  没有`me/checkins`权限，所以这是错误的：

    ```
    arrayOfString[1] = "me/checkins"; 
    ```

    相反[，您需要`publish_checkins`权限](https://developers.facebook.com/docs/reference/api/user/#checkins)。所以改成：

    ```
    arrayOfString[1] = "publish_checkins"; 
    ```

2.  该[`Facebook.dialog()`](https://developers.facebook.com/docs/reference/androidsdk/dialog/)方法用于打开预定义的对话框，例如*发布状态*或*授权应用程序*对话框。相反，您希望直接向 Graph API 发出自定义请求。这可以使用如下[`Facebook.request()`](https://developers.facebook.com/docs/reference/androidsdk/request/)方法完成：

    ```
    String jsonResponse = fb.request("me/checkins", params, "POST"); 
    ```

旁注：Facebook SDK 还提供了一种方便的[异步提交请求](https://developers.facebook.com/docs/reference/androidsdk/ayncrequest/)的方法。

# java - InputStream 内存泄漏？

> ID：12606514
> 
> 赞同：4
> 
> 时间：2012-09-26T16:42:33.783
> 
> 标签：java, memory-management, stream, garbage-collection, inputstream

我正在使用 Java 制作一个保存和加载文件的应用程序，所以我使用的是流。我从一个文件中获取一个流，然后我使用这个流在另一个文件夹中创建一个新文件。问题是，在使用流并关闭它之后，应该释放的内存仍然存在。

例如，我加载了一个 100mb 的文件（任务管理器显示 java.exe 增加了 100mb），然后我将文件保存在另一个文件夹中并使用 stream.close() 关闭流。但是 java.exe 不会减少 100mb。当我多次保存和加载文件时，java.exe 超过 600mb，然后减少到 300mb。每次即将超过 600mb 时，它都会减少到 300mb。为什么是这样？为什么我调用 stream.close() 时内存不能达到 0mb？为什么它在大约 600mb 时释放内存，并且没有释放所有内存？

这就是我从字符串路径加载流然后关闭流的方式：

```
String path = ... //File path
InputStream stream = new BufferedInputStream(new FileInputStream(path));
stream.close(); 
```

感谢您的回复。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T16:53:25.790

BufferedInputStream 默认使用 8 KB 的固定大小，因此它不能泄漏超过 8 KB（加上一点开销）

> 我加载了一个 100mb 的文件（任务管理器显示 java.exe 增加了 100mb），

这意味着您正在使用 100 MB 的对象来处理文件。

> 但是java.exe不会减少100mb

没有理由应该。它很可能会在 GC 之后发生，但除非您需要而且我怀疑您不需要，否则您不想这样做。

> 每次即将超过 600mb 时，它都会减少到 300mb。为什么是这样？

您已经触发了垃圾收集。很可能是次要收藏。

> 为什么我调用 stream.close() 时内存不能达到 0mb？

它开始时不是 0 MB，当你 GC 时你会取回内存，但你不想不必要地这样做。

> 为什么它在大约 600mb 时释放内存，并且没有释放所有内存？

它有多个内存区域，它试图做最简单的工作，通常是清理伊甸园空间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T16:51:59.830

你看到的是Java内存系统的正常运行，分配的内存不一定还给操作系统。

与其在操作系统级别检查 java.exe 的内存，不如使用内存分析器，例如内置的[JConsole](http://docs.oracle.com/javase/6/docs/technotes/guides/management/jconsole.html)工具（或免费的[Eclipse MAT](http://www.eclipse.org/mat/) 进行更深入的分析）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-26T16:53:03.797

在您的代码中 FileInputStream 是匿名实例。

由于文件较大，可能会存储在 Virtual Memory/Virtual Ram 中。它不会关闭，直到 java 开始垃圾收集。

将 FileInputStream 创建为新的命名实例并关闭

它应该工作

# c# - 如何以编程方式激活 SettingsPane 中的条目？

> ID：12606520
> 
> 赞同：2
> 
> 时间：2012-09-26T16:43:04.063
> 
> 标签：c#, xaml, windows-8, windows-runtime, winrt-xaml

我有一个使用一些命令填充的 SettingsPane。

我可以以编程方式激活 SettingPane：

```
if ( Windows.UI.ViewManagement.ApplicationView.Value != Windows.UI.ViewManagement.ApplicationViewState.Snapped )
{
  SettingsPane.Show();
} 
```

1.  如何以编程方式激活 SettingsPane 中的命令？

2.  如何以编程方式获取 SettingsPane 中的命令列表？

谢谢， EitanB

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T01:02:53.113

我不相信有办法，但是对于每个命令，您在激活该命令时提供回调，我看不出您不能自己执行该回调的任何原因。

您做了一些额外的工作以使其看起来无缝，例如当他们关闭您手动显示的设置视图时显示设置窗格。

# c - 是否可以用 C 语言打开一个新的 Linux 终端？

> ID：12606526
> 
> 赞同：7
> 
> 时间：2012-09-26T16:43:33.727
> 
> 标签：c, linux, multithreading, terminal, pthreads

似乎有很多关于 SO 的问题很接近，但不是我想要的。我正在尝试查看是否有办法使用我的主程序中的线程/子进程打开一个新的终端窗口（Linux），并让该线程/子进程**拥有**新窗口。

只是对完整目标的概述：我将有一个主程序，我将启动`stdin`它并通过用户（标准输入/标准输出）。

所以我想做的是让主程序调用线程，让线程使用/拥有新的终端窗口，然后在线程消失并死亡时关闭该窗口。

我知道这段代码不能正常工作，但从概念上讲，我想要这样的东西：

```
void * Runit()
{
    system("gnome-terminal"); //Would like to get a handle to this window
    while(1)
      printf("I'm the thread!!!\n"); //Would like to get this printed to the new window
}

int main()
{
    pthread_t child;
    pthread_create(&child, NULL, Runit, NULL);
    sleep(10);
    return 0; //Would like the child & its window to go away now.
} 
```

对此的要求是宽松的，它不必是可移植的，这只是一个让我的生活更轻松的 Linux 小工具。它确实必须是 C 代码，因此除非该脚本可以从 C 运行，否则不要编写 shell 脚本。任何帮助甚至其他想法都将受到赞赏。

**编辑：**

我知道在 linux 终端中有文件句柄`/dev/pts/x`，我尝试过如下代码：

```
system("gnome-terminal");
sleep(2); //let the file handle show up in /dev/pts
fp = fopen("/dev/pts/<new file handler number>");
fprintf(fp, "echo hi"); 
```

手柄正确打开，但终端中不显示任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T16:56:33.793

*gnome-terminal*和*xterm*都允许您在终端打开后运行任意命令。

因此，我建议您编写一个帮助程序，该程序知道如何与您的主程序通信（通过套接字、命名管道或其他一些 IPC 机制）。您的线程生成终端程序，将您的帮助程序传递给它，该程序将在终端内运行并通过上述 IPC 通道与线程通信。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T16:53:31.307

库[`libvte`](http://developer.gnome.org/vte/unstable/)，特别是`vte_pty_*`函数，*可能*能够做你想做的事。

您提出问题的方式表明您不了解 Windows 和终端 I/O 在 Linux（或者实际上是一般的 Unix）下如何工作，因此我强烈建议您阅读这些内容。从 W. Richard Stevens 的《*Unix 环境中的高级编程*》一书开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T17:02:46.833

据我了解，该应用程序必须能够打印到终端中-但您是否也希望它从中读取？终端是否应该由用户控制？

我会使用终端的文件描述符进行操作，您应该检查终端从哪个文件获取用户输入（它可能不是标准输入，而是一些 /dev/pts？），以及终端将其输出写入哪个文件，您可以捕获它，您也可以写入它，使内容显示在终端中。但要注意： 1) 终端本身可能会启动 shell (bash) - 如果你写入 /dev/pts，它将显示在终端中，但不会传递给终端中的 bash 进程 - 你不能在这样的终端中远程发出命令，2）我认为 /dev/pts/x 文件将在终端启动时创建，因此您不能 fork+dup+exec 并捕获终端输出 3）将是在终端中运行也会打印一些输出 - 它不会从 /dev/pts 读取

也许您需要用 C 编写应用程序，该应用程序将在终端中运行，并且该应用程序将与您拥有终端的应用程序进行通信？

# c - 简单的 C 程序最奇怪的错误。Linux 安装损坏？

> ID：12606528
> 
> 赞同：0
> 
> 时间：2012-09-26T16:43:46.787
> 
> 标签：c, linux, ubuntu, putty, ioerror

所以这是我所有的程序代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <string.h>

typedef struct {
    unsigned char adr;
    unsigned char type;
} stru;

int main (int argc, char *argv[]){

    while(1){

    stru data;

    data.adr = 5;
    data.type = 4;

    printf("Address: %c, Type: %c \n", data.adr, data.type);

    }

    return 0;   
} 
```

我用“gcc testprog.c -o testprog”编译它。

输出如下：

```
Address: , Type:
Address: , Type:
Address: , Type:
Address: , Type:
Address: , Type:
Address: , Type:
Address: , Type:
Address: , Type:
Address: , Type:
Address: , Type:
Address: , Type:
^CAddress: , Type:
PuTTYPuTTYPuTTYPuTTYPuTTYPuTTYPuTTYPuTTYPuTTYPuTTYPuTTYPuTTYPuTTYPuTTYPuTTYPuTTYPuTTYPuTTYPuTTYPuTTYPuTTYPuTTYPuTTYPuTTYPuTTYPuTTYPuTTYPuTTYPuTTYPuTTYPuTTYPuTTYPuTTYPuTTYPuTTYPuTTYPuTTYPuTTYPuTTYPuTTYPuTTYPuTTYPuTTYPuTTYPuTTYPuTTYPuTTYPuTTYPuTTYPuTTYPuTTYPuTTYPuTTYPuTTYPuTTYPuTTYPuTTYPuTTYPuTTYPuTTYPuTTYPuTTYPuTTYPuTTYPuTTYPuTTYPuTTYPuTTYPuTTYPuTTYPuTTYPuTTYPuTTYPuTTY^C 
```

我在 Virtual Box 上运行 Ubuntu 12.04 并通过 PuTTY SSH 客户端访问它我最近安装了 0MQ 库，但我认为这不会导致错误。

如果有人对此有解决方案，请告诉我。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T16:45:27.110

我认为您想`%u`在格式字符串中使用而不是`%c`.

`%c`将输入解释为[ASCII 字符](http://en.wikipedia.org/wiki/ASCII)值，因此打印 4 或 5 with`%c`将打印出控制字符范围内的内容。打印出控制字符可能是导致输出底部所有奇怪内容的原因。

`%u`需要一个无符号整数作为输入，它会在打印之前将整数转换为字符串。

我建议您阅读有关-style 格式字符串的[教程](http://www.cprogramming.com/tutorial/printf-format-strings.html)或[参考](http://linux.die.net/man/3/printf)`printf`，以熟悉许多格式说明符之间的差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T16:48:37.937

无限循环看起来毫无意义。

如果您想将`unsigned char`视为一个小整数，则需要使用合适的格式代码打印它，例如`%u`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T16:50:35.133

您当前正在使用`%c`说明符将值 4 和 5 打印为字符。由于 4 和 5 不是可打印的 Ascii 字符，因此终端不显示任何内容。如果您想查看打印的值“4”和“5”，请将代码修改为，`printf("Address: %u, Type: %u \n", data.adr, data.type);`因为它们是无符号值。

# jquery - 使用 jQuery load() 保留外部 HTML 文件的加载部分

> ID：12606533
> 
> 赞同：0
> 
> 时间：2012-09-26T16:44:13.780
> 
> 标签：jquery, load, droppable

我拥有的是 1 个可放置的 div (dropZone) 和几个可拖动的。可拖动对象是 HTML 代码片段，当拖放到 dropZone 中时，会在其中呈现 html 代码。（HTML 代码存储在带有 ID 的外部 html 文件中）发生的情况是，当我放下一个可拖动的文件时，它工作正常。但如果我放弃另一个，它会清除当前代码。关于如何做到这一点的任何建议？

```
$("#dropZone").droppable({
    tolerance: 'touch',
    over: function() {
        $('.dragMe').addClass('red');
    },
    out: function() {
        $('.dragMe').removeClass('red');
    },
    drop: function(event, ui) {
        var id = ui.draggable.attr("id");
        $(this).load('test.html #' + id);
    }
}); 
```

有没有办法将当前代码保留在 dropZone 中，所以当我将另一个可拖动的内容放入其中时，它会添加到代码中？

非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T17:29:29.027

你可以使用这个：

```
jQuery.get('http://localhost/test.html', function(data) 
{ 
    alert(data); 
}); 
```

这将获取数据，然后您可以将数据分配给变量以供以后使用。如果您有多个负载，则只需创建一个包含所有数据的数组，每次加载时将其添加到数组中。

编辑：（在你的情况下）

```
drop: function(event, ui) 
{
    var id = ui.draggable.attr("id");
    jQuery.get('http://localhost/test.html#' + id, function(data) 
    { 
        //store data as variable
        $(this).html(data);
    }); 
} 
```

# c++ - 条件静态？

> ID：12606534
> 
> 赞同：2
> 
> 时间：2012-09-26T16:44:15.933
> 
> 标签：c++, templates, c++11, template-meta-programming, typetraits

考虑以下类：

```
template<bool Condition> class MyClass
{
    protected:
        /* SOMETHING */ _var;
}; 
```

使用 a`std::conditional<Condition, const int, int>::type _var;`我可以通过模板参数选择`_var`是常量还是非常量。

如何为静态/非静态做等效？

（无论你想要什么元编程技术，我都要求一个等价的）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T17:01:52.310

您可能必须使用辅助结构来执行此操作，因为 static 不是类型的一部分，而是存储说明符。例如：

```
template <class T, bool Static>
struct StaticSelector
{
  T value;
};

template <class T>
struct StaticSelector<T, true>
{
  static T value;
};

template<bool Condition> class MyClass
{
    protected:
        StaticSelector<float, Condition> _var;
}; 
```

话虽这么说，在静态和非静态之间轻松切换可能是个坏主意。

# c# - 如何使用 sql 数据库中的 asp.net 使用 entityframework 动态显示多个图像

> ID：12606535
> 
> 赞同：1
> 
> 时间：2012-09-26T16:44:19.103
> 
> 标签：c#, entity-framework-4, entity, asp.net-4.0

如何使用数据库中的 asp.net 中的实体框架显示多个图像。

我正在使用数据列表...

我是asp.net 的新手，所以任何人都可以给我介绍一下。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T16:47:03.857

您应该将图像存储在文件系统（可从文档根目录访问）并将图像路径存储在数据库中。

# html - 更改 HTML 表单输入字段的文本大小

> ID：12606536
> 
> 赞同：0
> 
> 时间：2012-09-26T16:44:20.343
> 
> 标签：html, safari

我有这样的html文件：

```
<p>
    Enter your first name and last name in the following form
</p>
<form>
    First name: <input  type="text" name="firstname"><br>
    Last name: <input type="text" name="lastname">
</form> 
```

在 CSS 中 p 标签的文本大小设置为 40px

我也想将两个文本框的字体大小设置为 40px。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T16:45:36.400

所以写一个匹配它们的选择器。

```
input { font-size: 40px; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T16:50:02.330

元素`input`、`textarea`和`select`不会像您期望的那样继承样式。

定义段落样式时，添加`input[type="text"]`选择器：

```
p,
input[type="text"] {
    font-size: 40px;
} 
```

我通常会用我的`body`字体样式来定义它们。

# c++ - C++ - 最快的检查数组边界

> ID：12606538
> 
> 赞同：5
> 
> 时间：2012-09-26T16:44:26.287
> 
> 标签：c++, arrays

我需要一种非常快速的方法来检查数组的边界。我目前的检查范围是：

```
template<typename T>
class SmartArray {
    //...
    int size;
    T* array;
    T &operator[](int index) {
        if (index/size!=0)
            throw OUT_OF_RANGE; //#define OUT_OF_RANGE 0x0A
        return array[index];
    }
} 
```

有更快的方法来检查索引是否超出数组范围？

编辑：

我的解决方案是用负索引制造麻烦。有办法解决这个问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T16:47:45.073

一般来说，除法是一个缓慢的操作，所以我会避免这种情况。

我认为一个简单的比较会更有效：

```
index >= size 
```

`index`但是，这会错过小于 0的情况，但是如果您将`unsigned`or`size_t`用于`size`and`index`变量，那将不是问题。

所以它变成：

```
T &operator[](size_t index) {
    if (index >= size)
        throw OUT_OF_RANGE; //#define OUT_OF_RANGE 0x0A
    return array[index];
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-26T16:48:19.310

您的检查遗漏了负值：如果大小为`5`且索引为`-1`，则整数除法的结果为零，但索引显然超出范围。

您可以通过使`index`参数无符号来解决此问题。的类型也`size`应该如此`size_t`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-26T16:46:38.280

是的，不要使用除法，因为除法很慢（如果 ，它会失败`size == 0`）。一个简单的

```
if(index >= size || index < 0) 
```

会做得很好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T17:28:37.167

检查数组边界的最快方法是不检查。调用者`operator[]`应该负责确保他们知道自己在做什么，而不是用错误的索引调用它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-28T20:09:58.060

如果您将数组的大小限制为 2 的幂，您将能够使用掩码。`size_t mask;`即存储等于`size-1`( ) 的附加值`== 2^n-1`。然后可以进行检查：

```
T &operator[](size_t index) {
    return array[index & mask];
} 
```

# java - 使用 Google 的快速按钮后 Phonegap 应用程序崩溃

> ID：12606540
> 
> 赞同：1
> 
> 时间：2012-09-26T16:44:44.110
> 
> 标签：java, javascript, jquery, cordova

我有一个 phonegap 应用程序可以在不同页面的图库中显示图像。我正在使用 Google 的快速按钮[https://developers.google.com/mobile/articles/fast_buttons](https://developers.google.com/mobile/articles/fast_buttons)来减少页面切换时的 300 毫秒延迟。我正在使用来自[https://github.com/alexblack/google-fastbutton](https://github.com/alexblack/google-fastbutton)的 js 文件 我正在做的是：

按钮：

```
<a data-role="button" data-theme="b" href="#" id="nextimage">Next</a> 
```

javascript的init方法中的事件处理程序：

```
$('#nextimage').fastClick(function(e) {
    showGalleryPage(nextPageIndex);  }); 
```

这适用于 3-4 次单击，但在某些时候，当我单击按钮时，应用程序会崩溃，并且控制会返回到第一页。它在 Logcat 中没有通知我进行调试。我想知道解决这个问题的方法。有人可以帮我调试吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T03:48:38.543

您的页面是否有任何滚动或允许任何类型的系统 UI 动画，如捏缩放等？如果是这样，您的问题可能与 PhoneGap 甚至 FastButton 实现无关，但您是 iOS6 中引入的一个讨厌的错误的受害者。即使您禁用 FastButton 并仅使用 ontouchend 侦听器，即使您使用没有 PhoneGap 的独立网页，您也可以轻松重现此问题。

该错误的工作原理如下：如果在这些系统 UI 动画进行时创建了任何间隔或超时，则这些间隔和超时将不起作用，更糟糕的是，即使在动画完成后重新创建它们也不会使它们起作用. 特别是 JQ 动画在这里经常是一个问题。如果您在页面滚动时调用任何 JQ 动画（使用 FastButton 使用的 onucstart / ontouchend 事件很容易做到这一点，您的动画将失败，动画结束时的任何回调也会失败。

所以解决方案：

*   尽可能使用 CSS 动画。当然，这只是在动画首先导致您的问题的情况下。如果是其他类型的 setInterval / setTimeout 中断，CSS 动画将无济于事。

*   为使用 iOS6 中引入的 webkit 的 requestAnimationFrames 的计时器使用定制的包装器。看看并从这里下载：[https ://gist.github.com/4180482](https://gist.github.com/4180482)

我最终选择了第二种解决方案，但我不得不在一个地方修复代码，因为初始化时出现了一些问题。在它说的那一行：

```
if(uid.indexOf && uid.indexOf(TIMERID) > -1){ 
```

我不得不将其更改为：

```
if(uid && uid.indexOf && uid.indexOf(TIMERID) > -1){ 
```

此外，原始代码会进行严格的 iOS6 检查，然后才应用其包装函数。这对于您可以即时更新内容的网站来说很好，但对于一个应用程序，我认为您想要更加偏执，并假设这在 iOS7 及更高版本中可能保持未修复（毕竟，它有时确实看起来就像 Apple 试图尽可能地破坏 Web 应用程序），所以你需要一个 ios6+ 检查来代替。找到写着：

```
if (!navigator.userAgent.match(/OS 6(_\d)+/i)) return; 
```

并将其替换为：

```
if(/(iPhone|iPod|iPad)/i.test(navigator.userAgent)) {
    if(/OS [2-5]_\d(_\d)? like Mac OS X/i.test(navigator.userAgent)) {
        // iOS 2-5, map to native Timers
        return
    } else if(/CPU like Mac OS X/i.test(navigator.userAgent)) {
        // iOS 1, map to native Timers
        return
    }
}
else
{
    // Not iOS, map to native Timers
    return
} 
```

# classification - Windows 上的 NLTK MEGAM Max Ent 算法

> ID：12606543
> 
> 赞同：5
> 
> 时间：2012-09-26T16:45:06.377
> 
> 标签：classification, nltk

我一直在 Python 上使用 NLTK，但由于缺少等于或高于 0.3 的任何版本的 MEGAM 库的 Windows 64 位可执行文件，因此无法使用 MEGAM Max Ent 算法（需要包括 NLTK 的 -nobias 选项工作，这是在 v. 0.3 中引入的）。

[http://www.cs.utah.edu/~hal/megam/](http://www.cs.utah.edu/~hal/megam/)

作者建议编译您自己的可执行文件，尽管让 O'Caml 在 Win64 上工作只是另一个噩梦。

有没有人有 Windows 编译版本的 MEGAM 可执行文件，版本是 0.4 或更高版本？我将永远感激不尽！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-06-21T18:12:11.787

在 Windows 7 上进行一些工作后，我能够让 Python NLTK MegaM 库工作，解决方案相当简单（事后看来）。下面详细描述了我的方法，并包含链接。我希望你觉得它们有用。

**高水平：**

1.  安装 OCaml 编译器（特别版：OCamlPro）
2.  下载 MagaM 的源代码
3.  下载并安装 GNU32Make 实用程序
4.  在 2 个地方编辑 MegaM MakeFile
5.  运行 Gnu32Make 生成 magam.exe 文件
6.  以编程方式向 Python NLTK 指示 megam.exe 文件的位置
7.  运行 nltk.MaxentClassifier.train 命令

**链接：**

1.  [超级网站：](http://www.umiacs.umd.edu/~hal/megam/index.html)
2.  [Windows OCamlPro 下载](https://github.com/OCamlPro/ocpwin-distrib/blob/master/Download.md)
3.  [GNU32 为 Windows 制作](http://gnuwin32.sourceforge.net/packages/make.htm)

**血腥细节**

由于缺乏文档，这个过程的一些特点很容易走向南方 - 我想提请注意我发现的一些......

***Windows OCamPro***

获得适用于 Windows 的 OCaml Pro 版本非常重要，它是一个独立的实体，不依赖于其他任何东西。我列出的版本就是这样，它将安装到您选择的单个目录中。**将bin**目录的路径添加到***windows的系统路径中***是非常重要的。

***兆丰***

Windows 对这个库来说是一个挑战，因为它与开发人员有一些 SNAFU，所以你不得不下载源代码并自己编译它。这并不像最初看起来那么困难。作为一般过程，将 .Targz 文件解压缩到一个目录并解压缩 2X 以到达源目录是相当简单的。要实现的最重要的 2 个目标是 (a) 正确编辑***Makefile***和 (b)将包含生成的 megam.exe 文件的目录***的路径添加******到 windows 系统路径***。

***GNU32Win***

这是一个简单的过程，只需确保在安装后将 Gnu32Make exe 文件**的路径添加*****到您的 Windows 系统路径即可***。

***MEGAM MakeFile***

在您取消归档 MagaM 文件的目录中，将存在一个 MakeFile，其中有 2 行您必须获得编辑权限以确保正确构建。

***首先***：（将注释行中的粗体标志与未注释行中的粗体标志交换）

*   WITHSTR =str.cma -cclib **-lstr**
*   WITHSTR =str.cma -cclib **-lcamlstr**

***第二：（*** 将第一行的路径替换为系统上的等效路径）

***注意***：该路径**必须**指向系统上 OcamlPro 安装的“\lib\caml”目录。

*   WITHCLIBS =-I /usr/lib/ocaml/3.09.2/caml
*   WITHCLIBS =-I **E:\OCamlPro\OCPWin64\lib\caml**

**在 megam 目录中运行 make**

在这个阶段，你应该可以只打开一个 windows CMD shell，cd 到你修改 makefile 的目录，然后运行 ​​make 编译并生成可执行文件 megam.exe。

您应该看到类似于以下内容的输出：

> **制作**ocamldep *.mli *.ml > .depend ocamlc -g -custom -o megam str.cma -cclib -lcamlstr bigarray.cma -cclib -lbigarray unix.cma -cclib -lunix -IE:\OCamlPro\OCPWin64\lib\ caml fastdot_c.c fastdot.cmo intHashtbl.cmo arry.cmo util.cmo data.cmo bitvec.cmo cg.cmo wsemlm.cmo bfgs.cmo pa.cmo perceptron.cmo radapt.cmo kernelmap.cmo abffs.cmo main.cmo

***以编程方式向 Pythons NLTK 指示 Megam.exe 文件的位置***

我遇到的最后一个问题是如何准确地向 Pythonn NLTK 指示我的 magam.exe 文件的位置。在调用代码中，我在调用 MaxentClassifier 本身的行之前放置了指示这样的语句，并且效果很好，见下文。

注意：我的开发工作站花了很长时间，所以请耐心等待。

```
 nltk.config_megam('E:\megam\megam.exe')
 self.classifier = nltk.MaxentClassifier.train(train_set, algorithm='megam', trace=0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-17T21:22:12.640

也可以使用 cygwin 编译：

1.  下载 cygwin 安装程序：[https ://cygwin.com/install.html](https://cygwin.com/install.html)
2.  安装时，检查 gnu make 和 ocaml（编译器和运行时）
3.  更改生成文件
    *   WITHSTR =str.cma -cclib -lstr -> WITHSTR =str.cma -cclib -lcamlstr
    *   WITHCLIBS = cygwin ocaml 目录的路径
4.  使用make编译。编译调试和选择构建可能存在差异。我可以使用带有 opt 但不调试的 cygwin 构建，以及带有调试但不带 opt 的原生。
5.  将 cygwin bin 添加到 PATH
6.  使用 nltk.config_megam 运行 megam（你的 megam 路径）

# ios - 自定义“想要联系人”提示？

> ID：12606544
> 
> 赞同：9
> 
> 时间：2012-09-26T16:45:08.340
> 
> 标签：ios, ios6, abaddressbook

有没有办法自定义我的应用程序尝试访问地址簿时出现的提示？

我想解释一下我使用什么数据，以及我为什么需要它。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-26T18:46:58.963

在 iOS 6 中，这已添加到`Info.plist`文件中。您想要设置密钥`NSContactsUsageDescription`（请记住，您可以[将其本地化在 中`InfoPlist.strings`](http://developer.apple.com/library/ios/documentation/general/Reference/InfoPlistKeyReference/Articles/AboutInformationPropertyListFiles.html#//apple_ref/doc/uid/TP40009254-102276)）。对此的描述性名称是“隐私 - 联系人使用说明”。

我不知道在 iOS 5 中设置它的方法。

# jquery - 删除 .append onmouseout jQuery

> ID：12606548
> 
> 赞同：2
> 
> 时间：2012-09-26T16:45:28.370
> 
> 标签：jquery, append, mouseover, mouseout

当有人将鼠标悬停在我的博客文章标题上时，我正在尝试添加“阅读更多”文本。我尝试使用 `$(".blogpost").mouseover(function(){ $(this).append(" - read more..."); });` 但我不知道如何删除阅读更多内容...当 onmouseout 时。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T16:47:54.667

正确的方法是在 HTML 中已有额外的文本，并使用 CSS :hover 属性来隐藏和显示文本。为此使用 javascript 会增加不必要的复杂性和脆弱性。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-26T16:47:40.493

在跨度中添加阅读更多内容并在鼠标移出时删除该跨度

添加阅读更多包裹在跨度中。

```
$(".blogpost").mouseover(function(){ $(this).append("<span id="read" - read more..."></span>); }); 
```

删除添加的跨度及其在这种情况下读取的 id。

```
$(".blogpost").mouseout(function(){ $('#read').remove(); }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T16:48:22.973

你也可以试试这个：

```
$(".blogpost").mouseout(function(){ 
    $(this).html("");
}); 
```

假设您没有子元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T16:52:48.110

如果您想在 javascript 中执行此操作，您可以执行以下操作：

演示：http: [//jsfiddle.net/a3jzF/](http://jsfiddle.net/a3jzF/)

```
$(".blogpost").mouseover(function() { 
    $(this).append("<div class='readmore'> - read more...</div>"); 
}).mouseout(function(){
    $('.readmore').remove();        
});​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T16:53:31.937

我只会在创建后显示和隐藏它。.hover() 有两个功能。

```
$(".blogpost").hover(function(){
  var $span = $(this).find('.more');

  if ( $span.length ) {
     $span.show();
  } else {
    $(this).append('<span class="more"> - read more...</span>');
  }

}, function(){
  var $span = $(this).find('.more');
  $span.hide();
}); 
```

或仅使用 css（这更好）：

```
<div class="blostpost">
 ...
 <span class="more">read more</span>
</div>

.blogpost .more { display: none; }
.blogpost:hover .more { display: block; } 
```

# php - 在 MySQL 数据库的正文中显示链接

> ID：12606549
> 
> 赞同：0
> 
> 时间：2012-09-26T16:45:30.107
> 
> 标签：php, mysql, escaping, stripslashes

我正在从头开始构建个人博客，并且在从 MySQL 输出文本正文时无法正确显示链接。

例如; 我在博客文章中嵌入了大约 200 个单词的链接，当我从数据库中调用博客文章时，链接无法正确显示。我尝试过使用`stipslashes()`，`htmlentities()`但这些都不起作用。

这是我将博客文章保存到数据库的代码：

```
function check_input($data, $problem='')
{
$data = trim($data);
$data = stripslashes($data);
$data = htmlspecialchars($data);
if ($problem && strlen($data) == 0)
{
    die($problem);
}
    return $data;
}

if(isset($_POST['addBlog'])) { //form submitted?

// get form values, escape them and apply the check_input function
$title = $link->real_escape_string($_POST['title']);
$category = $link->real_escape_string(check_input($_POST['category'], "You must choose a category."));
$content = $link->real_escape_string(check_input($_POST['blogContent'], "You can't publish a blog with no blog... dumbass."));
$date = $link->real_escape_string(check_input($_POST['pub_date'], "What day is it foo?"));

mysqli_connect($db_host, $db_user, $db_pass) OR DIE (mysqli_error());
// select the db
mysqli_select_db ($link, $db_name) OR DIE ("Unable to select db".mysqli_error($db_name));

 // our sql query
$sql = "INSERT INTO pub_blogs (title, date, category, content) VALUES ('$title', '$date', '$category', '$content');";

//save the blog     
mysqli_query($link, $sql) or die("Error in Query: " . mysqli_error($link));

if (!mysqli_error($link)) 
{
    print "<p> Blog Successfully Published! </p>";
}
} 
```

这是我显示博客文章的代码：**这就是问题所在**

```
 // Grab the data
        $result = mysqli_query($link, "SELECT * FROM pub_blogs") or die ("Could not access DB: " . mysqli_error($link));
        while ($row = mysqli_fetch_assoc($result))
        {   
            $id = $link->real_escape_string($row['id']);
            $title = $link->real_escape_string($row['title']);
            $date = $link->real_escape_string($row['date']);
            $category = $link->real_escape_string($row['category']);
            $content = $link->real_escape_string($row['content']);

            $id = stripslashes($id);
            $title = stripslashes($title);
            $date = stripslashes($date);
            $category = stripslashes($category);
            $content = stripslashes($content);

        }
        echo "<div class='blog_entry_container'>";
        echo "<span class='entry_date'><a href='#'>" .$date. "</a> - </span><span class='blog_title'><a class='blogTitleLink' href='#'>" .$title. "</a></span>"; 
        echo "<p>" .$content. "</p>";
        echo "</div>"; 
```

**问题在于`$content`变量**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T16:55:14.930

您应该切换到准备好的语句并摆脱所有转义和削减的东西。

这应该可以在数据库中正确获取您的原始博客文章，但现在您遇到了一个问题：您应该使用`htmlspecialchars`将内容输出到 html（以避免文本变成标签等问题），但这会破坏您的链接。

该问题的解决方案是使用标记语言（如降价）将您的链接即时翻译为 html 链接。另请参阅[Jeff Atwood 的这篇博客文章，](https://blog.stackoverflow.com/2008/05/potential-markup-and-editing-choices/)了解关于 SO 的问题和答案的标记。

另一种方法是完全用 html 编写内容并去掉周围的`<p>`标签，但这只有在您（或受信任的用户）是唯一可以编写博客条目的人的情况下才有效。或者找到一种清理/验证您的输入的好方法当然......

# maven - Marklogic 是否有 liquibase 等价物

> ID：12606555
> 
> 赞同：1
> 
> 时间：2012-09-26T16:45:48.713
> 
> 标签：maven, liquibase, marklogic

Marklogic 是一个 XML 数据库，用于存储和检索基于 XML 的内容。与 Oracle 的 PL/SQL 类似，Marklogic 使用 XQuery 以程序方式操作 XML。

例如，我试图控制作用于某个 MarkLogic 实例的 XQuery 脚本，类似于使用带有 MySQl 的 sql 脚本。

使用 liquibase， [这个 maven 插件](http://www.liquibase.org/manual/maven)效果很好，我想知道 Marklogic 的某些产品中是否内置了等效的行为。

我发现的唯一 Marklogic maven 支持是[here](https://github.com/ukcrpb6/maven-marklogic-plugin)，但这似乎不支持 liquibase 的细节，例如不重新运行已经运行的脚本、回滚等。

谢谢， 潘卡伊

根据 Eric 的建议，这就是我正在寻找的具体内容：

*   有没有办法将 MarkLogic XQuery 脚本存储到我的代码库中，并确保当我部署代码库时，如果脚本未在该环境中执行，则运行该脚本，如果有，则不运行。

*   如果我提供一个“回滚”脚本，这个新产品可以回滚到给定数量的回滚吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T17:05:25.800

不确定这会对您有所帮助，但请注意

*   MarkLogic 能够进行时间点查询。
*   如果您愿意，您可以标记（通过集合）时间点。
*   差异将具有挑战性
*   XQuery 中有一组 API 调用（dls - 文档库服务）用于版本控制和控制。

IMO，为了让您获得有用的答案，您应该具体说明您想要什么功能，而不是仅仅要求所有的 liquibase。

# hlsl - 如何将几何着色器与输出流一起使用？

> ID：12606556
> 
> 赞同：2
> 
> 时间：2012-09-26T16:45:49.823
> 
> 标签：hlsl, directx-11, geometry-shader

似乎此功能的文档记录很差。在 DirectX SDK 中的几何着色器教程中，没有使用 CreateGeometryShaderWithStreamOutput 的示例，也没有任何线程可以解释它的基础知识。在 msdn 中，他们说使用什么函数来创建它，但不是它的用途和用途。有没有人成功使用过它，你能分享一个小例子或教程的链接吗？它的用途是什么，性能好吗？据我所知，它用于基于 GPU 的截锥体剔除？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T10:28:42.607

您可以在 DirectX SDK 中找到 2 个示例（在 directX 10 部分）

*   管道GS
*   粒子GS

您还可以查看 NVidia 示例：http: [//developer.download.nvidia.com/SDK/10/direct3d/samples.html](http://developer.download.nvidia.com/SDK/10/direct3d/samples.html)

Rain 和 Metaballs 正在使用流输出

所有这些样本都在 dx10 上，但它们很容易移植到 dx11（只需更换几位）。

它有很多用途（非详尽列表）：

*   动态粒子
*   模型预处理（蒙皮、置换、镶嵌）。因此，您可以在模型上应用一次置换，然后将置换模型重新绑定到多个通道（阴影贴图/材质...）
*   模型导出：在着色器中生成一些几何图形，在 cpu 中获取流输出内容并导出为 3d 模型。

如果您想使用原始管道而不是流输出，则需要执行以下操作（这是 Microsoft Stream Output[文档](https://msdn.microsoft.com/en-us/library/windows/desktop/bb205122(v=vs.85).aspx)的摘要）

FX 框架在后台执行相同的操作。

您的几何着色器必须使用[CreateGeometryShaderWithStreamOutput创建](https://msdn.microsoft.com/en-us/library/windows/desktop/ff476510(v=vs.85).aspx)

而不是[CreateGeometryShader](https://msdn.microsoft.com/en-us/library/windows/desktop/ff476509(v=vs.85).aspx)

您需要设置[D3D11_SO_DECLARATION_ENTRY](https://msdn.microsoft.com/en-us/library/windows/desktop/ff476216(v=vs.85).aspx)以匹配您的几何着色器输出布局（这与输入汇编器相同）

接下来确保您的缓冲区是使用流输出访问创建的：

```
D3D11_BUFFER_DESC bufferDesc;
bufferDesc.BindFlags = otherBindFlags | D3D11_BIND_STREAM_OUTPUT;
bufferDesc.Usage = D3D11_USAGE_DEFAULT;
bufferDesc.CPUAccessFlags = 0; 
```

请注意，otherBindFlags 不能同时为 D3D11_BIND_UNORDERED_ACCESS（允许使用着色器视图和原始视图）。

最后，在执行绘制之前，使用[SOSetTargets](https://msdn.microsoft.com/en-us/library/windows/desktop/ff476484(v=vs.85).aspx)分配流输出缓冲区：

```
UINT offset[1] = 0;
ID3D11Buffer* m_pBuffer (your buffer created before)
deviceContext->SOSetTargets( 1, &m_pBuffer, offset ); 
```

完成绘图调用后，不要忘记使用以下命令进行清理：

```
UINT offset[1] = 0;
ID3D11Buffer* pNullBuffer = 0;
deviceContext->SOSetTargets( 1, &pNullBuffer, offset ); 
```

# excel - AVERAGEIF 处于平均状态

> ID：12606558
> 
> 赞同：0
> 
> 时间：2012-09-26T16:45:51.993
> 
> 标签：excel, if-statement, excel-2007, average, worksheet-function

是否可以使用 AVERAGEIF 并在条件中嵌入平均值？我想使用这样的公式：

```
=AVERAGEIF($A1:$A10,"<5",B1:B10) 
```

但不是检查 A3 来查看它是否小于 5，我想检查是否`AVERAGE(A1:A3)`小于 5。对于 A4，我想检查`AVERAGE(A2:A4)`.

现在我首先对列进行平均，但每次我这样做时都必须创建一个新列。我想知道是否有更优雅的解决方案。

*来自编辑的附加信息：*
这是检查一个人的症状与他们正在服用的药物，但症状在服用药物三天后出现。因此，如果在症状列中三天的平均症状小于 5，我想输出前三天的平均药物水平。

任何发布的答案都会为这种情况提供解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T19:05:53.467

修改

现在似乎很可能一个相对简单的`=IF(AVERAGE(C2:C4)<5,AVERAGE(B2:B4),"")`可能适合：

![SO12606558a](../Images/687998a9918950af921d499e4d15ed3a.png)

进入第四行（1 为标题，2 和 3 累积 3 天的价值）并复制下来。假设每天的“读数”并且剂量在逻辑上先于症状（尽管问题似乎暗示这些列可能是相反的）。

查看紧靠左侧的单元格 + 紧接在该平均值上方的两个单元格是否小于 5，如果是，则平均位于其紧邻左侧的三个单元格。如果不是，则不显示任何内容`""`。结果四舍五入到 2 DP。

如果三天的症状不一样，三天的剂量可能需要调整。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T20:45:28.553

我不确定将 B1 或 B2 包含在平均值中的标准，但听起来您想在 AVERAGE(A1:A3)<5 时包含 B3，如果 AVERAGE(A2:A4)<5 则包含 B4，如果 AVERAGE(A2:A4)<5 则包含 B5平均（A3：A5）<5，等等......

如果是这样，那么您可以使用 SUBTOTAL 和 OFFSET 来获得 3 个单元格平均值的数组，从 AVERAGE(A1:A3) 到 AVERAGE(A8:A10) 并将其包含在您的公式中，如下所示：

`=AVERAGE(IF(SUBTOTAL(1,OFFSET(A1:A3,ROW(A3:A10)-ROW(A3),0))<5,B3:B10))`

这是一个需要确认的“数组公式”，`CTRL+SHIFT+ENTER`以便像 { 和 } 这样的花括号出现在公式栏中的公式周围

# c++ - 如何区分数字输入和字母输入

> ID：12606562
> 
> 赞同：0
> 
> 时间：2012-09-26T16:46:10.430
> 
> 标签：c++, integer

我想知道，我如何能够将应该保存整数值的变量与传递 char 值的时间进行比较：例如：

```
int i;
cin >> i;
if(i == integer)
          execute a command;
else (if i == char)
          do something else here; 
```

由于 x 不能保存字符值，当有人试图在 i 中输入字符值时它会失败吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T17:07:29.903

使用**ctype.h**函数检查变量的类型。你应该得到这样的东西：

```
char i;
cin >> i;

if(isdigit(i))
{
 // if integer
}
else if(isalpha(i))
{
 //if character
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T16:49:39.293

将输入转换为字符串，然后*尝试*将其转换为整数（这里有无数的选项，`boost::lexical_cast`, `std::istringstream`, `std::stoi`, 等等...）。如果转换成功，你有一个整数，如果它失败，你没有。这是一个使用示例`istringstream`：

```
std::string input;
std::cin >> input;
std::istringstream iss(input);
int x;
if (iss >> x)
{
    // success
}
else
{
    // failure
} 
```

如果您不在乎输入不是整数的情况下是什么，您可以直接在输入时检查失败`int`：

```
int x;
if (cin >> x)
{
    // success
}
else
{
    // get cin out of the error state
    cin.clear();
} 
```

# c++ - 编译器无法识别自定义 numeric_limits 成员函数

> ID：12606563
> 
> 赞同：1
> 
> 时间：2012-09-26T16:46:12.027
> 
> 标签：c++, templates, stl, compiler-errors, numeric-limits

我正在使用一个数据结构，它希望使用 STL`limits`来确定我给它的结构的最小值、最大值和无穷大（我认为只有这些）值。我正在使用 Visual C++ 2010，如果有这些东西的具体实现细节。

这是我的数据类型的基本结构，`PseudoTuple::ReturnWrapper`是需要限制支持的类型：

```
struct PseudoTuple
{
 struct ReturnWrapper
 {
  //wraps return values for comparisons and such
 }

 typedef ReturnWrapper value_type;

 //basic "tuple" implementation as a data front
} 
```

借助复制和粘贴的强大功能，我`numeric_limits`为它创建了一个小类，只实现了我认为需要的 3 个功能。返回值当前是临时的，只是为了看看这是否会编译。

```
namespace std
{
 template<> class _CRTIMP2_PURE numeric_limits<PseudoTuple::ReturnWrapper>
  : public _Num_int_base
 {
 public:
  typedef PseudoTuple::ReturnWrapper _Ty;

  static _Ty (__CRTDECL min)() _THROW0()
  { // return minimum value
   return PseudoTuple::ReturnWrapper();
  }

  static _Ty (__CRTDECL max)() _THROW0()
  { // return maximum value
   return PseudoTuple::ReturnWrapper();
  }

  static _Ty __CRTDECL infinity() _THROW0()
  { // return positive infinity
   return PseudoTuple::ReturnWrapper();
  }
 };
}

#include <data structure using PseudoTuple> 
```

我在此之后包含标题以确保它可以获取这些声明。我在这里遇到错误：

```
namespace detail {

 template<typename coordinate_type, bool is_integer, bool has_infinity>
 struct coordinate_limits_impl;

 template<typename coordinate_type>
 struct coordinate_limits_impl<coordinate_type, true, false> {
  static const coordinate_type highest() {
   return std::numeric_limits<coordinate_type>::max(); // --- error here ---
  }
  static const coordinate_type lowest() {
   return std::numeric_limits<coordinate_type>::min();
  }
 };

//lots of stuff

} 
```

`coordinate_type`是一个 typedef `PseudoTuple::ReturnWrapper`。这是错误：

```
error C2589: '(' : illegal token on right side of '::'
error C2059: syntax error : '::' 
```

`min`并且在and的所有用法上也收到了这个有趣的警告，这个警告`max`与错误在同一行：

```
warning C4003: not enough actual parameters for macro 'max' 
```

当我将此数据结构与`std::array`of一起使用时`std::string`，我仍然会收到这些警告，但不会弹出编译器错误。在这种情况下它也可以正常运行，所以整个事情必须以某种方式工作。`max`但是在使用我的 custom 时它无法识别该功能`numeric_limits`。

如果我将 更改`max()`为`infinity()`，它可以正常编译并继续在`min()`. 这些名字给它一些悲伤`min`，`max`但我不知道为什么。不过，这确实告诉我它可以`infinity`从我的实现中获取方法`numeric_limits`。

编辑：删除了显示正确类型的数据结构代码正在传入，似乎无关紧要。

编辑 2：Mark B 解决了问题，但弹出了一个新问题：

`error LNK2019: unresolved external symbol "__declspec(dllimport) public: static struct PseudoTuple::ReturnWrapper __cdecl std::numeric_limits<struct PseudoTuple::ReturnWrapper>::max(void)" (__imp_?max@?$numeric_limits@UReturnWrapper@PseudoTuple@@@std@@SA?AUReturnWrapper@PseudoTuple@@XZ) referenced in function "public: static struct PseudoTuple::ReturnWrapper const __cdecl kd_v1_0_8::spatial::detail::coordinate_limits_impl<struct PseudoTuple::ReturnWrapper,1,0>::highest(void)" (?highest@?$coordinate_limits_impl@UReturnWrapper@PseudoTuple@@$00$0A@@detail@spatial@kd_v1_0_8@@SA?BUReturnWrapper@PseudoTuple@@XZ)`

所以有些东西弄乱了链接......得到相同的`min`但不是`infinity`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T17:13:20.103

有时`min`并被`max`实现为仅替换文本的宏。在这里引起问题的不是您的专业，而是宏。我相信`windows.h`就是这样的罪犯之一。您可以使用`#define NOMINMAX`使它们不被创建为宏。

# iphone - 何时是更改 UICollectionView 的布局参数的适当轮换时刻

> ID：12606570
> 
> 赞同：8
> 
> 时间：2012-09-26T16:46:51.177
> 
> 标签：iphone, ios, uikit, uicollectionview

希望一个相对较新的`UIKit`控件的简单问题

我有一个`UICollectionView`具有`viewLayout`单行单元格的单元格，这些单元格是`UICollectionView`纵向模式下边界的确切高度

因此，当 iPad 翻转到横向模式时，该行变得比屏幕本身高，此时布局（几乎）默默地失败并抱怨该行高于边界。

操纵 viewLayout 特性的理想方法是什么，尤其是在它与响应 a 中的旋转有关时`ViewController`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T22:34:41.507

我正在研究类似的问题。

目前，我的 UICollectionViewController 有两个 UICollectionViewFlowLayout 的实例变量，每个变量都有适合肖像或风景的插图。

在轮换时，我这样做：

```
-(void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation
                               duration:(NSTimeInterval)duration{

    if (UIDeviceOrientationIsPortrait(toInterfaceOrientation)) {
        [_itemCollection setCollectionViewLayout:_portraitLayout];
        [_itemCollection reloadData];
    } else {
        [_itemCollection setCollectionViewLayout:_landscapeLayout];
        [_itemCollection reloadData];
    }
} 
```

我遇到的唯一问题是它在 setCollectionViewLayout 上随机使用 exc_bad_access 随机崩溃。

像上面这样的东西可能对你有用。我不确定这是否是正确的做事方式。我最近才开始使用 UICollectionViews。

# c++ - 理解右值引用

> ID：12606574
> 
> 赞同：21
> 
> 时间：2012-09-26T16:47:11.647
> 
> 标签：c++, c++11, rvalue-reference

我认为我对右值引用不太了解。为什么以下无法编译（VS2012）并出现错误`'foo' : cannot convert parameter 1 from 'int' to 'int &&'`？

```
void foo(int &&) {}
void bar(int &&x) { foo(x); }; 
```

我会假设`int &&`当从 bar 传递到 foo 时类型会被保留。为什么它会`int`在函数体内转化为一次？

我知道答案是使用`std::forward`：

```
void bar(int &&x) { foo(std::forward<int>(x)); } 
```

所以也许我只是不清楚*为什么*。（另外，为什么不`std::move`呢？）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-26T20:03:13.890

我一直记得左值是一个有名字或可以寻址的值。由于 x 有名称，因此它作为左值传递。引用右值的目的是允许函数以它认为合适的任何方式完全破坏值。如果我们在您的示例中通过引用传递 x ，那么我们无法知道这样做是否安全：

```
void foo(int &&) {}
void bar(int &&x) { 
    foo(x); 
    x.DoSomething();   // what could x be?
}; 
```

Doing`foo(std::move(x));`明确地告诉编译器你已经完成了 x 并且不再需要它。如果没有这一举措，现有代码可能会发生坏事。是`std::move`一种保障。

`std::forward`用于模板中的完美转发。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-26T17:06:11.530

> 为什么它会`int`在函数体内转化为一次？

它没有；它仍然是对*rvalue*的引用。

当名称出现在表达式中时，它就是一个*左值*——即使它恰好是对*右值*的引用。如果表达式需要，它可以转换为*右值*（即如果需要它的值）；但它不能绑定到*右值*引用。

正如您所说，为了将其绑定到另一个*rvalue*引用，您必须将其显式转换为未命名的*rvalue*。`std::forward`并且`std::move`是方便的方法。

> 另外，为什么不`std::move`呢？

为什么不呢？这比 , 更有意义`std::forward`，它适用于不知道参数是否为引用的模板。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-09-26T17:00:02.560

这是“[无名规则](http://thbecker.net/articles/rvalue_references/section_05.html)”。里面`bar`，`x`有一个名字`x`…… 所以它现在是一个左值。将某些内容作为右值引用传递给函数不会使其成为函数内部的右值。

如果你不明白为什么一定是这样，问问你自己——返回`x`之后是什么`foo`？（记住，`foo`可以自由移动`x`。）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-03-08T18:46:36.793

*rvalue*和*lvalue*是**表达式**的类别。

*右值引用*和*左值引用是***引用**的类别。

在声明中`T x&& = <initializer expression>`，变量 x 的类型为 T&&，并且它可以绑定到作为*右值表达式*的表达式 (the) 。因此， T&& 被命名为*右值引用类型*，因为它引用了一个*右值表达式*。

在声明中`T x& = <initializer expression>`，变量 x 的类型为 T&，它可以绑定到一个表达式 (the )，该表达式是一个左值表达式 (++)。因此，T& 被命名为*左值引用类型*，因为它可以引用*左值表达式*。

因此，在 C++ 中，重要的是要区分出现在声明中的实体的命名和该名称出现在表达式中的时间。

当一个名字出现在一个表达式中时`foo(x)`，这个名字`x`本身就是一个表达式，称为 id-expression。根据定义，id-expression 始终是*左值表达式*，并且*左值表达式*不能绑定到*右值引用*。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-04T11:01:08.550

在谈论右值引用时，区分引用生命周期中两个不相关的关键步骤是很重要的——绑定和值语义。

这里的绑定是指调用函数时值与参数类型匹配的确切方式。

例如，如果您有函数重载：

```
void foo(int a) {}
void foo(int&& a) {} 
```

然后在调用时`foo(x)`，选择适当的重载的行为涉及将值绑定`x`到 的参数`foo`。

**右值引用仅与绑定语义有关。**

在两个 foo 函数的主体内，该变量`a`充当常规左值。也就是说，如果我们这样重写第二个函数：

```
void foo(int&& a) {
    foo(a);
} 
```

那么直觉上这应该会导致堆栈溢出。但事实并非如此——右值引用都是关于绑定的，而不是关于值语义的。由于`a`是函数体内的常规左值，因此`foo(int)`将在该点调用第一个重载并且不会发生堆栈溢出。只有当我们显式更改 的值类型时才会发生堆栈溢出`a`，例如通过使用`std::move`：

```
void foo(int&& a) {
    foo(std::move(a));
} 
```

此时，由于值语义发生了变化，将发生堆栈溢出。

在我看来，这是右值引用最令人困惑的特性——类型在绑定期间和之后的工作方式不同。绑定时它是一个右值引用，但之后它就像一个左值引用。**在所有方面，右值引用类型的变量在绑定完成后就像左值引用类型的变量一样。**

左值和右值引用之间的唯一区别在于绑定时 - 如果同时存在左值和右值重载可用，则临时对象（或者更确切地说是 xvalues - eXpiring 值）将优先绑定到右值引用：

```
void goo(const int& x) {}
void goo(int&& x) {}

goo(5); // this will call goo(int&&) because 5 is an xvalue 
```

这是唯一的区别。从技术上讲，除了约定之外，没有什么能阻止您使用像左值引用这样的右值引用：

```
void doit(int&& x) {
    x = 123;
}

int a;
doit(std::move(a));
std::cout << a; // totally valid, prints 123, but please don't do that 
```

这里的关键词是“约定”。由于右值引用优先绑定到临时对象，因此可以合理地假设您可以删除临时对象，即将其所有数据移开，因为在调用之后它无法以任何方式访问并且无论如何都会被销毁：

```
std::vector<std::string> strings;
string.push_back(std::string("abc")); 
```

在上面的代码片段中，临时对象`std::string("abc")`不能在它出现的语句之后以任何方式使用，因为它没有绑定到任何变量。因此`push_back`允许移走其内容而不是复制它，从而节省额外的分配和释放。

也就是说，除非您使用`std::move`：

```
std::vector<std::string> strings;
std::string mystr("abc");
string.push_back(std::move(mystr)); 
```

现在该对象`mystr`在调用 之后仍然可以访问`push_back`，但`push_back`不知道这一点 - 它仍然假设它被允许删除该对象，因为它是作为右值引用传入的。这就是为什么 的行为`std::move()`是一种惯例，也是为什么`std::move()`它本身实际上并没有做任何事情 - 特别是它没有做任何动作。它只是将其论点标记为“准备好被淘汰”。

* * *

最后一点是：右值引用仅在与左值引用一起使用时才有用。没有右值参数本身有用的情况（这里夸大了）。

假设您有一个接受字符串的函数：

```
void foo(std::string); 
```

如果函数只是检查字符串而不是复制它，那么使用`const&`：

```
void foo(const std::string&); 
```

这总是在调用函数时避免复制。

如果函数要修改或存储字符串的副本，则使用按值传递：

```
void foo(std::string s); 
```

在这种情况下，如果调用者传递一个左值，您将收到一份副本，并且临时对象将在原地构造，避免复制。`std::move(s)`如果您想存储 s 的值，则使用，例如在成员变量中。请注意，即使调用者传递了一个右值引用，这也会有效地工作，`foo(std::move(mystring));`因为`std::string`它提供了一个移动构造函数。

在这里使用右值是一个糟糕的选择：

```
void foo(std::string&&) 
```

因为它将准备对象的负担放在调用者身上。特别是如果调用者想要将一个字符串的副本传递给这个函数，他们必须明确地这样做；

```
std::string s;
foo(s); // XXX: doesn't compile
foo(std::string(s)); // have to create copy manually 
```

如果您想将可变引用传递给变量，只需使用常规左值引用：

```
void foo(std::string&); 
```

在这种情况下使用右值引用在技术上是可行的，但在语义上不正确且完全令人困惑。

右值引用唯一有意义的地方是移动构造函数或移动赋值运算符。在任何其他情况下，按值传递或左值引用通常是正确的选择，可以避免很多混乱。

* * *

注意：不要将右值引用与看起来完全相同但工作方式完全不同的转发引用混淆，如下所示：

```
template <class T>
void foo(T&& t) {
} 
```

在上面的例子中`t`看起来像一个右值引用参数，但实际上是一个转发引用（因为模板类型），这是一个完全不同的蠕虫罐。

# vba - VBA 宏溢出

> ID：12606582
> 
> 赞同：2
> 
> 时间：2012-09-26T16:47:29.497
> 
> 标签：vba, excel

这段代码有问题。我的编码如下：

```
 fitvalchild1 = 0
    fitvalchild2 = 0

    For i = 1 To 30                            
        counter = 30

        Do While counter > 0
            fitvalchild1 = fitvalchild1 + child1(counter) * 2 ^ (i - 1)
            fitvalchild2 = fitvalchild2 + child2(counter) * 2 ^ (i - 1)
            counter = counter - 1
        Loop
    Next i 
```

所有变量都被声明为...

我仍然得到错误：溢出，突出显示的行是：

```
fitvalchild1 = fitvalchild1 + child1(counter) * 2 ^ (i - 1) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T17:02:40.187

数据类型的`Long`最大大小为 2,147,483,647。
2 ^ (30-1) = 536,870,912
因此，根据 和 的值`child1(counter)`，`fitvalchild1`您很容易超过最大值。

您在每个循环中都将值添加到自身，因此在 4-5 次循环之后，您可能会收到错误消息。

如果您不介意从整数类型切换，您可以尝试使用`Currency`数据类型。它的最大大小为 922,337,203,685,477.5807

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T17:04:19.373

long 数据类型的范围是 -2,147,483,648 到 2,147,483,647。child1 和 child2 中的值不需要很大就可以溢出，因为 2^29 非常接近极限。

# c# - 将模板化控件包含到模板中？

> ID：12606598
> 
> 赞同：1
> 
> 时间：2012-09-26T16:48:31.673
> 
> 标签：c#, silverlight, templates, controltemplate

我想模板化一个控件并将控件本身包含到模板中，而不仅仅是控件的内容。

例如，我有一个按钮：

```
<Grid x:Name="LayoutRoot" Background="White">

        <Button Name="hello" Content="123" Width="100" Height="100" >
        </Button>

</Grid> 
```

我想在这个按钮周围做一个更广泛的，所以它看起来像这样：

```
<Grid x:Name="LayoutRoot" Background="White" Width="120" Height="120">

        <Rectangle Fill="AliceBlue"/>
        <Button Name="hello"  Content="123" Width="100" Height="100" >
        </Button>

</Grid> 
```

但我想让它更通用，不仅适用于按钮，还适用于其他一些控件。即图像、TreeViewItem 等。

所以我创建了一个模板：

```
<UserControl.Resources>

    <Style TargetType="Button">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Grid Width="120" Height="120">
                        <Rectangle Fill="AliceBlue"/>                            
                        <ContentPresenter  Content="{TemplateBinding Property=ContentControl.Content}" />
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</UserControl.Resources>
<Grid x:Name="LayoutRoot" Background="White">

        <Button Name="hello"  Content="123" Width="100" Height="100" >
        </Button>
</Grid> 
```

现在 ContentPresenter 只显示 Button 的内容，但不包括按钮本身，我怎样才能包括模板化控件本身呢？

# sql - SQL：重复 ID 时选择一行

> ID：12606602
> 
> 赞同：2
> 
> 时间：2012-09-26T16:49:11.430
> 
> 标签：sql

我有下表：

```
FKID1   FKID2   A    
3   40297    3 
3   40297    5 
3   40325    9 
3   40325    8 
3   40325    1 
3   40348    1  
3   40391    2 
3   40392    7 
3   40501    5 
3   40501    4 
```

我需要一个查询来生成下表：

```
FKID1   FKID2   A    
3   40297    5 
3   40325    9  
3   40348    1  
3   40391    2 
3   40392    7 
3   40501    5 
```

所以它只从重复项中选择 1 个 FKID2，并选择与它关联的 max(A) 的一个。

我做不到，非常感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T16:50:21.313

```
select FKID1, FKID2, max(a)
from yourTable
group by FKID1, FKID2 
```

您需要分组，并应用聚合函数。[在此处](http://infogoal.com/sql/sql-aggregate.htm)阅读有关此内容的更多信息。另外，网上有更多关于这个条款的教程

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T16:50:27.873

请记住，当您使用 时`AGGREGATE FUNCTIONS`，不要忘记添加`GROUP BY`子句，否则您将只有一个值。试试这个，

```
SELECT FKID1, FKID2, MAX(A) maxValue
FROM tableName
GROUP BY FKID1, FKID2 
```

如果您不想`FKID1`在结果中显示，

```
SELECT FKID2, MAX(A) maxValue
FROM tableName
GROUP BY  FKID2 
```

# unix - 带有多个参数的 Grep

> ID：12606604
> 
> 赞同：1
> 
> 时间：2012-09-26T16:49:28.097
> 
> 标签：unix, grep, arguments

我是一名新的生物技术学生，正在研究编程作业的介绍，但我遇到了障碍。问题如下。

“(3) 在你的新“.bashrc1”文件中，每行中有多少以空格分隔的第二个条目中包含数字 0...9？将你的答案输出到一个新文件“.bashrc1.counts”以“数字，计数...”的形式（例如 0、12 ...）。

到目前为止我所做的是

```
more .bashrc1 |  awk ‘{print $2}’ | grep –c “0..9” > .bashrc1.counts 
```

我知道 grep 部分可能是错误的，有没有办法将它传递给一个范围？像

```
grep -c "0","1"... etc 
```

还是我必须做

```
|grep -c "0"|grep -c "1"| 
```

另外，我知道如何输出到文件，但是我究竟如何以这种方式格式化输出？我已经用尽了谷歌和我的讲义，似乎找不到任何与我的问题相关的信息。

编辑：我正在寻找的文件；只是带有一个添加别名的默认 .bashrc 文件的副本。

```
# Sample .bashrc for SuSE Linux
# Copyright (c) SuSE GmbH Nuernberg
# There are 3 different types of shells in bash: the login shell, normal shell
# and interactive shell. Login shells read ~/.profile and interactive shells
# read ~/.bashrc; in our setup, /etc/profile sources ~/.bashrc - thus all
# settings made here will also take effect in a login shell.
#
# NOTE: It is recommended to make language settings in ~/.profile rather than
# here, since multilingual X sessions would not work properly if LANG is over-
# ridden in every subshell.
# Some applications read the EDITOR variable to determine your favourite text
# editor. So uncomment the line below and enter the editor of your choice :-)
#export EDITOR=/usr/bin/vim
#export EDITOR=/usr/bin/mcedit
# For some news readers it makes sense to specify the NEWSSERVER variable here
#export NEWSSERVER=your.news.server
# If you want to use a Palm device with Linux, uncomment the two lines below.
# For some (older) Palm Pilots, you might need to set a lower baud rate
# e.g. 57600 or 38400; lowest is 9600 (very slow!)
#
#export PILOTPORT=/dev/pilot
#export PILOTRATE=115200
test -s ~/.alias && . ~/.alias || true
alias start = "ls ~" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T16:58:36.963

据我了解，您的输出应该包含从`0`to的每个数字的单独条目`9`，因此您可能无法在没有循环的情况下使用 1 命令生成它。

使用`for`循环，您可以执行类似的操作

```
for c in {0..9}; do
     cut -d ' ' -f 2 .bashrc1 | grep -c "$c" >> .bashrc1.counts
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T17:01:15.063

在 awk 中：

```
awk '$2~/\d+/{print $2}' .bashsrc 
```

在 perl 中

```
perl -F" " -ane 'if($F[1]=~m/\d+/){print $F[1]}' .bashsrc 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T17:01:57.597

试试这个：

`more .bashrc1 | awk '{print $2}' | grep –n "[0-9]" > .bashrc1.counts`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T16:35:07.423

以下是我将如何处理它：

```
awk -v c0=0 -v c1=0 -v c2=0 -v c3=0 -v c4=0 -v c5=0 -v c6=0 -v c7=0 -v c8=0 -v c9=0 \
'$2~/0/{ c0+=1 } \
$2~/1/{ c1+=1 } \
$2~/2/{ c2+=1 } \
$2~/3/{ c3+=1 } \
$2~/4/{ c4+=1 } \
$2~/5/{ c5+=1 } \
$2~/6/{ c6+=1 } \
$2~/7/{ c7+=1 } \
$2~/8/{ c8+=1 } \
$2~/9/{ c9+=1 } \
END {print  "0," c0 "\n1," c1 "\n2," c2 "\n3," c3 "\n4," c4 "\n5," c5 "\n6," c6 "\n7," c7 "\n8," c8 "\n9," c9}' file 
```

基本上，这定义了一个变量来计算每个数字在第二项 ( `c0`, `c1`, ... `c9`) 中出现的次数，并从 0 开始计数。

然后，对于每一行，如果第 2 项包含一个或多个 0，则它递增`c0`1（无论第 2 项中可能有多少个 0）。如果它包含“1”，则递增`c1`，依此类推。然后它以您指定的方式 (#,c#) 将其全部打印出来。

输出：

```
0,1
1,1
2,1
3,0
4,0
5,1
6,0
7,0
8,0
9,0 
```

如果您需要确切知道每个数字在第二项中出现了多少次，请使用以下命令：

```
awk -v c0=0 -v c1=0 -v c2=0 -v c3=0 -v c4=0 -v c5=0 -v c6=0 -v c7=0 -v c8=0 -v c9=0 \
'$2~/0/{ split($2,a0,"0"); c0+=(length(a0)-1) } \
$2~/1/{ split($2,a1,"1"); c1+=(length(a1)-1) } \
$2~/2/{ split($2,a2,"2"); c2+=(length(a2)-1) } \
$2~/3/{ split($2,a3,"3"); c3+=(length(a3)-1) } \
$2~/4/{ split($2,a4,"4"); c4+=(length(a4)-1) } \
$2~/5/{ split($2,a5,"5"); c5+=(length(a5)-1) } \
$2~/6/{ split($2,a6,"6"); c6+=(length(a6)-1) } \
$2~/7/{ split($2,a7,"7"); c7+=(length(a7)-1) } \
$2~/8/{ split($2,a8,"8"); c8+=(length(a8)-1) } \
$2~/9/{ split($2,a9,"9"); c9+=(length(a9)-1) } \
END {print  "0," c0 "\n1," c1 "\n2," c2 "\n3," c3 "\n4," c4 "\n5," c5 "\n6," c6 "\n7," c7 "\n8," c8 "\n9," c9}' file 
```

与上面相同，但它将第二项拆分为我们要查找的数字上的数组，并将计数器变量增加该数组的长度减一。这有效地计算了找到数字的次数。

输出：

```
0,2
1,2
2,1
3,0
4,0
5,1
6,0
7,0
8,0
9,0 
```

# java - 让杰克逊从 Spring 控制器返回一个 JSON 对象

> ID：12606607
> 
> 赞同：0
> 
> 时间：2012-09-26T16:49:42.413
> 
> 标签：java, jquery, json, spring-mvc, jackson

我有一个 Spring MVC 后端，它需要开始处理将被客户端 jQuery/AJAX 调用命中的新 URL。这些调用期望服务器返回 JSON 对象。

我正在尝试遵循一些我能够找到的示例，这就是我到目前为止所拥有的：

```
// AjaxResult.java
public class AjaxResult {
    private int answer;
    private String errMsg;

    // Getters/setters for both properties.
}

// Inside MyController.java (a Spring @Controller):
public @ResponseBody AjaxResult handleJQueryCall(@RequestParam("x") String whatever) {
    int ans = calculateSomething(whatever);

    AjaxResult result = new AjaxResult(ans);

    return result;
} 
```

我无法编译/部署它，但这里*显然*缺少一些东西......杰克逊的使用！所以我问：**我如何指定`AjaxResult result`Spring 以 JSON 形式返回到客户端？**提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T16:57:52.930

我认为您缺少映射：

```
// AjaxResult.java
public class AjaxResult {
    private int answer;
    private String errMsg;

   // Getters/setters for both properties.
}

// Inside MyController.java (a Spring @Controller):
 @RequestMapping( value="/myController", method= RequestMethod.GET, produces = "application/json")
 public @ResponseBody AjaxResult handleJQueryCall(@RequestParam("x") String whatever) {
   int ans = calculateSomething(whatever);

AjaxResult result = new AjaxResult(ans);

return result;
} 
```

# usb - autorun.inf 不起作用？

> ID：12606609
> 
> 赞同：1
> 
> 时间：2012-09-26T16:49:58.207
> 
> 标签：usb, autorun

所以我有一个如下所示的 autorun.inf 文件：

```
[AutoRun]
open=Server.exe
icon=Logo.ico
label=XXXXXX
action=Install Server 
```

它正确地获取了图标和标签，但它没有将“Server.exe”添加到自动播放 USB 对话框中......

Server.exe 是顶级的。

任何线索为什么会这样？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T02:56:41.167

“它是文本”是什么意思？也许您可以尝试从可以满足您需求的工作配置开始。例如，我将 Ubuntu 10 ISO 刻录到拇指驱动器：

```
[autorun]
open=wubi.exe --cdmenu
icon=wubi.exe,0
label=Install Ubuntu

[Content]
MusicFiles=false
PictureFiles=false
VideoFiles=false 
```

这将显示一个图标并在 W7 中显示文本“运行 wubi.exe”，其下方带有“未指定发布者”。在 XP 中，它会立即启动 wubi.exe，而没有自动播放提示。如果您无法重现上述内容，则可能是您的系统设置偏离了默认设置。维基百科有[一篇关于这个主题的非常棒的文章](http://en.wikipedia.org/wiki/Autorun.inf)，其中甚至包括操作系统版本之间的差异以及哪些指令对哪些媒体（CD、USB 驱动器等）有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T11:38:37.227

从 USB 设备自动播放在 Windows 7 中默认关闭。您需要配置策略。以下是步骤：

1.  单击开始并在搜索框中键入 gpedit.msc 并按 Enter。
2.  现在浏览到计算机配置\管理模板\Windows组件\自动播放策略\关闭自动播放。
3.  将关闭自动播放的值更改为禁用。

从 USB 自动播放应该可以正常工作。欲了解更多信息，请阅读：

*   [http://windows.microsoft.com/en-US/windows7/Change-AutoPlay-settings](http://windows.microsoft.com/en-US/windows7/Change-AutoPlay-settings)
*   [http://windows.microsoft.com/en-US/windows7/Troubleshoot-AutoPlay-problems](http://windows.microsoft.com/en-US/windows7/Troubleshoot-AutoPlay-problems)

# git - 如何删除（或合并）我当前所在的本地 Git 分支？

> ID：12606612
> 
> 赞同：40
> 
> 时间：2012-09-26T16:50:12.890
> 
> 标签：git, git-branch, repository

我对使用 git 很陌生，我用它来为 AOKP Android ROM 做贡献。我已经成功地创建了一些分支，修改了代码，并上传了已经在远程端合并的提交。但是在我的本地存储库中，这些分支仍然出现（即使它们显示为没有更改）。问题是，当我创建这些分支时，我是从需要修改的子文件夹中直接创建的，所以我没有任何“更高”的分支可以访问。正因为如此，我不能删除那些分支——git 告诉我`error: Cannot delete the branch 'MyMods' which you are currently on.`

那么我能做些什么来摆脱这些分支呢？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-09-26T16:50:59.027

先签出一个不同的分支，然后再删除它：

```
git checkout master
git branch -d MyMods 
```

此外，分支与文件夹无关。Git 总是一次跟踪整个存储库，包括它的所有文件夹和文件。分支只不过是存储库历史记录中指向单个提交或快照的指针。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-26T16:53:19.513

是的，只需签出另一个分支（也许是 master），然后：

```
git checkout master
git branch -d thebran 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T15:03:06.503

> 但是在我的本地存储库中，这些分支仍然出现（即使它们显示为没有更改）。

除非您删除它们，否则分支将显示在您的本地存储库中。当您推动它们时，它们不会消失。

上面的答案告诉您如何删除分支。但是，我要补充一点，使用 -D 选项功能更强大。此选项删除分支，无论其（未）合并状态如何：

```
git branch -D branchName 
```

这是删除分支的原子弹。小心使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-06T22:12:58.507

如果您无法删除的分支是工作树，那么您可能需要先删除该工作树：

```
rm -r MyMods
git worktree list    # shows MyMods
git worktree prune
git worktree list    # doesn't show MyMods
git branch -d MyMods 
```

# python - 在 numpy Capi 中创建动态数组

> ID：12606619
> 
> 赞同：1
> 
> 时间：2012-09-26T16:50:27.873
> 
> 标签：python, c, numpy, multidimensional-array, python-c-api

我有一个动态二维 C 数组，例如由这段代码创建的数组：

```
double **multiDyArr=(double**)malloc(sizeof(double*)*3);
multiDyArr[0]=(double*)malloc(sizeof(double)*3);
multiDyArr[1]=(double*)malloc(sizeof(double)*17);
multiDyArr[2]=(double*)malloc(sizeof(double)*11); 
```

我如何从这个结构中创建一个 PyArrayObject，特别是如何创建一个包含 3 个对象的 numpy 数组（当然 3 是这里的一个例子）（它们每个都是一个数组）我搜索了很多，但似乎我可以'不知道如何在我的生活中做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T17:11:54.747

Numpy 数组始终是单个内存块，映射到的最接近的 Python 数据类型是 Python 列表、元组或数组的对象数组。即使您将所有内容都放在一个内存块中也无济于事，因为 numpy 数组必须是常规的。

# c# - 挂起对 ServiceStack 的 PUT/POST 请求

> ID：12606624
> 
> 赞同：2
> 
> 时间：2012-09-26T16:50:37.800
> 
> 标签：c#, .net, rest, exception, servicestack

当我向我的 ServiceStack 服务发出 POST 和 PUT 请求时（目前使用 HTTP 侦听器独立运行），我有时会发现该请求会起作用，有时我的客户端（HTTPie）会挂起。过了一会儿，我会在 Visual Studio 的输出窗口中看到一些信息：-

```
A first chance exception of type 'System.Net.HttpListenerException' occurred in System.dll
A first chance exception of type 'System.Runtime.Serialization.SerializationException' occurred in ServiceStack.dll
A first chance exception of type 'System.Net.HttpListenerException' occurred in System.dll
A first chance exception of type 'System.Net.HttpListenerException' occurred in ServiceStack.dll
A first chance exception of type 'System.Net.HttpListenerException' occurred in ServiceStack.dll
A first chance exception of type 'System.Runtime.Serialization.SerializationException' occurred in ServiceStack.dll
A first chance exception of type 'System.ObjectDisposedException' occurred in System.dll 
```

我设法在 ServiceStack 中启用了内置日志记录，它提供了更多详细信息：-

```
ERROR: Error occured while Processing Request: Could not deserialize 'application/json; charset=utf-8' 
   request using WebServices.Dto.Country'
Error: System.Net.HttpListenerException (0x80004005): The I/O operation has been aborted because of either
    a thread exit or an application request
  at System.Net.HttpRequestStream.Read(Byte[] buffer, Int32 offset, Int32 size)
  at System.IO.StreamReader.ReadBuffer()
  at System.IO.StreamReader.ReadToEnd()
  at ServiceStack.Text.JsonSerializer.DeserializeFromStream(Type type, Stream stream) in C:\src\ServiceStack.Text\
   src\ServiceStack.Text\JsonSerializer.cs:line 164
  at ServiceStack.ServiceModel.Serialization.JsonDataContractDeserializer.DeserializeFromStream(Type type, Stream 
   stream) in C:\src\ServiceStack\src\ServiceStack.Common\ServiceModel\Serialization\JsonDataContractDeserializer.cs:line 86
  at ServiceStack.WebHost.Endpoints.Support.EndpointHandlerBase.CreateContentTypeRequest(IHttpRequest httpReq, 
   Type requestType, String contentType) in C:\src\ServiceStack\src\ServiceStack\WebHost.Endpoints\Support\
   EndpointHandlerBase.cs:line 100, 
Exception: Could not deserialize 'application/json; charset=utf-8' request using WebServices.Dto.Country'
Error: System.Net.HttpListenerException (0x80004005): The I/O operation has been aborted because of either a thread
   exit or an application request
  at System.Net.HttpRequestStream.Read(Byte[] buffer, Int32 offset, Int32 size)
  at System.IO.StreamReader.ReadBuffer()
  at System.IO.StreamReader.ReadToEnd()
  at ServiceStack.Text.JsonSerializer.DeserializeFromStream(Type type, Stream stream) in C:\src\ServiceStack.Text\src\
   ServiceStack.Text\JsonSerializer.cs:line 164
  at ServiceStack.ServiceModel.Serialization.JsonDataContractDeserializer.DeserializeFromStream(Type type, Stream 
   stream) in C:\src\ServiceStack\src\ServiceStack.Common\ServiceModel\Serialization\JsonDataContractDeserializer.cs:line 86
  at ServiceStack.WebHost.Endpoints.Support.EndpointHandlerBase.CreateContentTypeRequest(IHttpRequest httpReq, 
   Type requestType, String contentType) in C:\src\ServiceStack\src\ServiceStack\WebHost.Endpoints\Support\EndpointHandlerBase.cs:line 100
ERROR: Could not WriteTextToResponse: An operation was attempted on a nonexistent network connection, Exception: 
   An operation was attempted on a nonexistent network connection
ERROR: Could not WriteTextToResponse: An operation was attempted on a nonexistent network connection, Exception: 
   An operation was attempted on a nonexistent network connection
INFO: Failed to write error to response: {0}, Exception: An operation was attempted on a nonexistent network connection 
```

我正在提出这样的测试请求：-

```
http --json post "http://localhost:1337/countries/" DefaultHouse_Id=2 Name=Denmark 
```

这种确切的尝试有时会奏效，而另一些则失败。我正在使用带有 .NET4 和 VS 2010 的 NuGet 的最新 ServiceStack。看来该请求根本没有到达我自己的代码。

有谁知道可能导致这种情况的原因，或者我如何调试它？

编辑：不确定它是否相关，但有时我也得到这个：-

```
{

"ResponseStatus":{

 "ErrorCode":"TypeLoadException",
 "Message":"Could not load type 'ServiceStack.ServiceInterface.HttpRequestApplyToExtensions' from assembly 'ServiceStack.ServiceInterface, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null'.",
"StackTrace":"   at RulesLayer.AuditFilterAttribute.Execute(IHttpRequest req, IHttpResponse res, Object requestDto)\n   at     ServiceStack.ServiceInterface.RequestFilterAttribute.RequestFilter(IHttpRequest req, IHttpResponse res, Object requestDto) in C:\\src\\ServiceStack\\src\\ServiceStack.ServiceInterface\\RequestFilterAttribute.cs:line 41\n   at ServiceStack.WebHost.Endpoints.EndpointHost.ApplyRequestFilters(IHttpRequest httpReq, IHttpResponse httpRes, Object requestDto) in C:\\src\\ServiceStack\\src\\ServiceStack\\WebHost.Endpoints\\EndpointHost.cs:line 303\n   at ServiceStack.WebHost.Endpoints.RestHandler.ProcessRequest(IHttpRequest httpReq, IHttpResponse httpRes, String operationName) in C:\\src\\ServiceStack\\src\\ServiceStack\\WebHost.Endpoints\\RestHandler.cs:line 63"
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T10:08:27.950

看来 AVG Anti-Virus Business 是罪魁祸首。我知道我讨厌杀毒软件是有原因的！

我发现代码在另一台机器上运行良好，这告诉我这是我的开发箱设置所特有的。我尝试将机器剥离到最低限度，删除未使用的软件、VS 扩展、插件等。我为 ServiceStack 尝试了 IIS Express 和自托管模式。我尝试将我的代码移出 Dropbox。没有任何区别。

当我最终禁用 AVG 时，问题就消失了，几个小时后它仍然可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T17:27:41.160

要调试，没有什么比下载[项目源代码](https://github.com/ServiceStack/ServiceStack)和调试框架源代码本身更好的了。我建议尝试在集成测试中复制此行为，以便我们找出导致它的原因。有关如何执行此操作的示例，请参阅 ServiceStack 的[http 侦听器集成测试。](https://github.com/ServiceStack/ServiceStack/tree/master/tests/ServiceStack.WebHost.Endpoints.Tests)

要在 ServiceStack 中启用日志记录，您只需在启动/初始化 AppHost 之前将日志工厂设置[为您选择的提供者。](https://github.com/ServiceStack/ServiceStack.Logging)

```
LogManager.LogFactory = new ConsoleLogFactory(typeof(Program)); 
```

# python - 在 Tastypie 中以 JSON 形式返回异常错误

> ID：12606630
> 
> 赞同：1
> 
> 时间：2012-09-26T16:50:59.157
> 
> 标签：python, django, tastypie

今天早上，当我遇到一个我不知道如何解决的问题时，我正在使用 Tastypie 开发我的 Django REST API。我有一个看起来像这样的资源：

```
class UserSignUpResource(ModelResource):

    class Meta:
        object_class = User
        queryset = User.objects.all()
        allowed_methods = ['post']
        include_resource_uri = False
        resource_name = 'newuser'
        serializer = CamelCaseJSONSerializer(formats=['json'])
        authentication = Authentication()
        authorization = Authorization()
        always_return_data = True
        validation = FormValidation(form_class=UserSignUpForm) 
```

此资源接收 JSON 格式的数据并创建一个新资源（我只允许 POST 操作）。因此，首先通过以下方式检查数据：

```
validation = FormValidation(form_class=UserSignUpForm) 
```

问题是，如果数据不正确，它会返回一个**ImmediateHttpResponse**。但我想捕获这个异常并创建一个这样的 JSON：

```
{"status": False, "code": 777, "errors": {"pass":["Required"], ...} 
```

因此，我覆盖了我的**wrap_view**并添加了以下代码片段：

```
except ImmediateHttpResponse, e:
    bundle = {"code": 777, "status": False, "error": e.response.content}
    return self.create_response(request, bundle, response_class = HttpBadRequest) 
```

这段代码正确地捕获了异常，但它有一个问题。**e.response**包含带有错误的 unicode 字符串。所以，它最终给出的回应是

```
{"code": 777, 
"error": "{\"birthdayDay\": [\"This field is required.\"], 
         \"birthdayMonth\": [\"This field is required.\"], 
         \"birthdayYear\": [\"This field is required.\"], 
         \"csrfmiddlewaretoken\": [\"This field is required.\"], 
         \"email\": [\"This field is required.\"], 
         \"email_2\": [\"This field is required.\"], 
         \"firstName\": [\"This field is required.\"], 
         \"gender\": [\"This field is required.\"], 
         \"lastName\": [\"This field is required.\"], 
         \"password1\": [\"This field is required.\"]}", 
"status": false} 
```

该死的 \ 和第一个 " 正在杀死我。另一方面，正在使用 AJAX 的前端开发人员告诉我他无法解析错误。

我在这里做错什么了吗？有人知道如何将异常响应转换为 JSON 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T17:06:49.080

您可能希望将响应内容作为 json 发送，而不是作为序列化的 json 字符串：

```
import json
bundle = {"code": 777, "status": False, "error": json.loads(e.response.content)} 
```

# windows - Windows 8 应用商店应用、Type.IsClass 和 System.ComponentModel.DesignerProperties.IsInDesignTool 缺失

> ID：12606632
> 
> 赞同：2
> 
> 时间：2012-09-26T16:51:03.847
> 
> 标签：windows, windows-store-apps

我正在调查 Windows 8 应用商店应用程序开发，但无法找到以下成员

类型.IsClass

System.ComponentModel.DesignerProperties.IsInDesignTool

Visual Studio 声称它们不存在，但 MSDN 建议它们应该存在。

我显然错过了一些愚蠢的事情：谁能指出我正确的方向？

问候

约翰。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T17:03:44.070

该[`IsClass`](http://msdn.microsoft.com/en-us/library/windows/apps/system.type.isclass.aspx)物业已移至[`TypeInfo`](http://msdn.microsoft.com/en-us/library/windows/apps/system.reflection.typeinfo.aspx)班级。基本上你需要更换；

```
bool result = type.IsClass; 
```

和;

```
bool result = type.GetTypeInfo().IsClass; 
```

[`GetTypeInfo()`](http://msdn.microsoft.com/en-us/library/windows/apps/system.reflection.introspectionextensions.gettypeinfo.aspx)是来自 System.Reflection 命名空间的扩展方法，在 System.Type 上不明显可见，除非您已经是`using System.Reflection`.

该`IsInDesignTool`物业也已[搬到另一个地方并更名](http://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.designmode.designmodeenabled.aspx)；

```
bool result = Windows.ApplicationModel.DesignMode.DesignModeEnabled; 
```

# javascript - 停止在新选项卡中打开自定义协议

> ID：12606633
> 
> 赞同：1
> 
> 时间：2012-09-26T16:51:12.670
> 
> 标签：javascript, html, url

我有一个自定义协议的 url（即 myproto://dosomething），我可以让它工作，但是当用户点击 url 时，它会在弹出“你想打开这个 url”对话框之前重定向页面。

有什么方法可以让自定义协议在没有重定向的情况下工作？

例如：

页：

```
<html>
<body>
<a href="myproto://dosomething">My Url</a>
</body>
</html> 
```

当用户单击链接时，浏览器会重定向到以 myproto://dosomething 作为 url 的空白页面并显示弹出窗口。我想要做的是让弹出窗口显示但保留在主页上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T01:48:27.103

所以我找到了解决这个问题的方法：iframes

```
var launchLink = function(href) {
    var url = ProtoRedirectUrl + '?' + $.param({ url: href });
    $('<iframe src="' + url + '" width="1px" height="1px">').appendTo('body');
} 
```

这会导致 url 被加载并且浏览器将 iframe 窗口重定向到空白页面而不是主窗口。

# sql - SQL temptables 循环查询

> ID：12606634
> 
> 赞同：0
> 
> 时间：2012-09-26T16:51:18.563
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005, sql-server-2000

我有一个临时表，看起来像

临时表：

```
 ID(not unique)   Platform Name    OS    version 

           13                 UNIX          Ipad     5.1
           13                 Windows       Windows  2008
           14                 MAC           Ipad     4.1 
```

Look_UP Tbl ：对于上述每一列

```
 PlatformName LookuP Tbl: platform id  desc
                                 2        Unix
                                 5        windows

       OS Lookup            :  OS id    OSname
                                 4       Ipad

    Version Lookup          :  Version id  name
                                 5         5.1 
```

然后有 EmpPlatformID 、 EmpOSID 和 EmpVersionID 如下所示；

```
 EmpPlatform  - EmpId  PltformNameID
                       13         1
                       13         6
       same for OS & ID 
```

我需要一个查询 1) 使用查找表来获取每个员工 id 的每列 (PlatformName,OS,Version) 的相应 ID。2) 在每个实际表中插入该 empid 的 ID。

所以，empPlatformTable 应该是这样的；

```
 EmpPlatform  - EmpId  PltformNameID
                       13         1
                       13         6
                       13         2    - new row added from tmptbl
                       13         5    - new row added from tmptbl
 The EmpOS & EmpVer also has similar column so the emp id should have corresponding IDs inserted from temptbl . please helps 
```

编辑：更新 PlatformName 的代码

```
Update EmpPN 
    Set EmpN.platform_id = PLookup.platform_id 
from #TempTable tmpd (READUNCOMMITTED) 
inner join EmpPlatform EmpPN (READUNCOMMITTED) 
    on EmpPN.emp_id = emp_id collate database_default 
inner join PlatformLookUpTbl PLookup(READUNCOMMITTED)
    on PLookup.[platform_name] = tmpd.PlatformName collate database_default 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T17:19:09.040

为什么不

```
Update EmpPN
Set 
Platform_ID = 
  (
    Select Top 1 L.Platform_ID From PlatformLookupTbl As L
    Inner Join #TempTable As T On L.PlatForm_Name = T.PlatFormName
    Where T.Emp_ID = EmpPN.Emp_ID
  ),
<next field> = 
  <analogous lookup statement>[,...] 
```

如果性能不好，请考虑在临时表上创建索引以提供帮助。

# java - Jersey：未设置 content-type 时，@Consumes 无法正常工作

> ID：12606639
> 
> 赞同：14
> 
> 时间：2012-09-26T16:51:33.443
> 
> 标签：java, rest, junit, jersey

我试图弄清楚@Consumes 是如何在这里工作的。

我有一个如下所示的简化资源，我只希望该资源使用“application/vnd.myApp+xml”。

```
@Path("/app")
@Consumes("application/vnd.myApp+xml")
@Produces("application/vnd.myApp+xml")
public class AppResource {
    @POST
    public Response postStuff() {
        ...
    }
} 
```

我有以下测试用例：-

```
public class AppResourceTest extends JerseyTest {
    @Test
    public void testApp() {
        // #1: Works fine
        ClientResponse response = resource().path("app")
                    .accept("application/vnd.myApp+xml")
                    .post(ClientResponse.class);

        ...

        // #2: Throws a 415 Unsupported Media Type
        ClientResponse response = resource().path("app")
                    .accept("application/vnd.myApp+xml")
                    .type("text/plain")
                    .post(ClientResponse.class);

        ...

        // #3: Works fine
        ClientResponse response = resource().path("app")
                    .accept("application/vnd.myApp+xml")
                    .type("application/vnd.myApp+xml")
                    .post(ClientResponse.class);

        ...
    }
} 
```

从上面的 3 个测试中，#2 和 #3 按预期工作。

至于＃1，如果我不设置内容类型，为什么它也不会抛出415？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-14T16:09:52.320

基于@Consumes api ( [http://jsr311.java.net/nonav/releases/1.0/javax/ws/rs/Consumes.html](http://jsr311.java.net/nonav/releases/1.0/javax/ws/rs/Consumes.html) ) 和 HTTP 类型规范 ( [http://www.w3.org/Protocols/ rfc2616/rfc2616-sec7.html#sec7.2.1](http://www.w3.org/Protocols/rfc2616/rfc2616-sec7.html#sec7.2.1)）加上您看到的行为，我认为可以安全地得出以下 Jersey 实现：

如果客户端未设置 Content-Type，则 Jersey 不会默认设置，但允许它通过任何/所有 @Consumes 注释。

当为 URI 设置了多个 @Consumes {不同类型}并且客户端没有设置 Content-Type 时，Jersey 将默认为第一个 @Consumes 注释或可接受类型列表中的第一个类型。

当设置 Accepts 标头值时，Jersey 将找到执行的最佳拟合方法。如果多个方法最适合，它将默认为第一个定义的。

总之，@Consumes 仅当且仅当客户端设置 Content-Type 时才充当过滤器，否则 Jersey 将尝试找到最合适的匹配。这确实符合 HTTP 规范：

> 任何包含实体主体的 HTTP/1.1 消息都应该包含定义该主体的媒体类型的 Content-Type 头字段。当且仅当媒体类型不是由 Content-Type 字段给出时，接收者可以尝试通过检查其内容和/或用于识别资源的 URI 的名称扩展来猜测媒体类型。如果媒体类型仍然未知，接收者应该将其视为类型“application/octet-stream”。

如果目标是让@Consumes 充当白名单，那么可以使用 servlet 过滤器在未设置请求的情况下默认 Content-Type。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T05:47:35.993

根据似乎`@Consumes`在类级别使用的文档并没有显式覆盖方法级别定义（默认为`*/*`），因此它可能以附加方式工作是有道理的......

您是否尝试过`@Consumes`在方法定义上应用相同的方法？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-13T09:47:38.513

您应该指定类型 - 例如：

```
ClientResponse res =
    service.path("accounts")
        .type("application/vnd.dsu.account+json")
        .post(ClientResponse.class,ent); 
```

# c - 为什么我的程序打印 fffffff0？

> ID：12606641
> 
> 赞同：0
> 
> 时间：2012-09-26T16:51:50.933
> 
> 标签：c

我试图理解为什么我的程序

```
#include<stdio.h>    
void main()  
{  
    printf("%x",-1<<4);  
} 
```

打印`fffffff0`。

这个程序在做什么，`<<`操作员在做什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T16:56:19.827

运算符为`<<`左移运算符；的结果`a<<b`被`a`移到`b`位的左侧。

您的代码的问题是您将负整数左移，这会导致未定义的行为（尽管您的编译器可能会对此操作做出一些保证）；此外，`%x`用于以十六进制打印无符号整数，并且您正在向它提供有符号整数 - 再次未定义的行为。

至于为什么你看到你所看到的：在 2 的补码架构`-1`上表示为“全1”；因此，在 32 位计算机上，`int`您将拥有：

```
11111111111111111111111111111111 = -1 (if interpreted as a signed integer) 
```

现在，如果你把它移到 4 个位置的左边，你会得到：

```
11111111111111111111111111110000 
```

说明`%x`符 make`printf`将这些东西解释为一个无符号整数，在十六进制表示法中是`0xfffffff0`. 这很容易理解，因为 4 个二进制数字等于一个十六进制数字；二进制中的`1111`组变成`f`十六进制，`0000`二进制中的最后一个`0`是十六进制的最后一个。

同样，特此解释的所有这些行为只是*您的特定编译器*的工作方式，就 C 标准而言，这都是 UB。这是非常有意的：历史上不同的平台有不同的方式来表示负数，并且各种处理器的移位指令有不同的微妙之处，所以我们得到的移位运算符的“定义行为”或多或少是大多数人常见的“安全子集” “正常”架构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T16:56:42.510

这意味着*取-1的位表示并将其向左移动4次*

这意味着采取

```
11111111 11111111 11111111 11111111 = ffffffff 
```

并转移：

```
11111111 11111111 11111111 11110000 = fffffff0 
```

`"%x"`格式说明符意味着以十六进制表示法将*其打印出来*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T16:55:15.823

这是左移二元运算符。您将 -1 左移 4 位：

```
 -1    == 1111 1111 1111 1111 1111 1111 1111 1111(2) == FFFFFFFF
-1 << 4 == 1111 1111 1111 1111 1111 1111 1111 0000(2) == FFFFFFF0 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T16:56:12.137

“%x”表示您的整数将以十六进制值显示。

-1 << 4 表示“-1”的二进制值将移动 4 位

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T16:56:24.900

“<<”是左移运算符。-1<<4 表示将 -1 左移 4。因为 -1 是 0xffffffff，所以你会得到 0xfffffff0

更多可以在 wiki [http://en.wikipedia.org/wiki/Bitwise_operation中找到](http://en.wikipedia.org/wiki/Bitwise_operation)

# linux - 星号在脚本中不起作用

> ID：12606642
> 
> 赞同：1
> 
> 时间：2012-09-26T16:51:51.243
> 
> 标签：linux, shell, unix

当我在我的脚本中写下这一行时，它不起作用，它无法在那里找到任何这样的文件。但是通过命令行它正在工作。每个命令都发生这种情况，`*`没有给出文件名。

```
zgrep  $line2 *.gz  >> CSP_Final_${DATE_TIME}.DAT 
```

错误是：

```
 file_loop line2
+ line2=line2
+ zgrep line2 '*.gz'
+ 1>> CSP_Final_20120926_221841.DAT
gzip: *.gz: No such file or directory 
```

代码 ：

```
while read line
    do

if [[ ${profile_count} -gt 700 ]]
                           then
                                DATE_TIME=`date +'%Y%m%d_%H%M%S'`
                                export profile_count=1
                                sleep 1
                           fi
        profile_count=`expr ${profile_count} + 1`
 count=`expr ${count} + 1`
echo " ${count} \t"
echo "${profile_count} \t"
echo $line1
#export line2=`echo ${line}`

file_loop line2
done<abhi

file_loop()
{
line2=$1
#while read line1
#do
#echo $line1
echo $PWD
zgrep  $line2 *.gz  >> CSP_Final_${DATE_TIME}.DAT
#done<abhi2
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T20:06:45.013

尝试在您的`zgrep`行之前立即添加以下内容：

```
echo "zgrep $line2 *.gz" 
```

你得到什么输出？

另外，尝试用等效的命令替换通配符表达式，`find`看看行为是否改变：

```
zgrep $line2 $(find . -maxdepth 1 -iname '*.gz') 
```

对于这个脚本，你的 shebang 线是什么样的？当您在命令行上尝试命令时，您使用的是什么 shell？

**更新：** 我看到你正在使用`#!/bin/ksh -xvf`作为 shebang 线。如果我没记错的话，该`-f`选项会禁用文件名通配。这将解释您所看到的行为。由于您的交互式 shell 没有设置此选项，因此代码可以在那里工作。尝试删除该`-f`选项，看看行为是否改变。

# perl - 在 Perl 中有没有办法重新启动当前正在运行的程序？

> ID：12606646
> 
> 赞同：6
> 
> 时间：2012-09-26T16:52:11.153
> 
> 标签：perl, exit, subroutine

我在 Perl 中运行一个程序，该程序在某一时刻评估从子例程中调用的 if 语句中的数据，例如

```
sub check_good {
    if (!good) {
         # exit this subroutine
         # restart program
    } 
    else {
         # keep going
    }
} # end sub 
```

我遇到的问题是退出和重新启动。我知道我可以直接使用`exit 0;`退出，但是如果我想回到开头，显然这是不正确的。我尝试调用基本上启动程序的子程序，但是当然一旦它运行它会再次回到这一点。我想过把它放在一个while循环中，但这意味着把整个文件放在循环中，这是非常不切实际的。

我实际上不知道这是否可能，所以任何输入都会很棒。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-26T16:58:28.130

如果您没有更改`@ARGV`，或者您保留它的副本，您可能会执行类似的操作[`exec($^X, $0, @ARGV)`](http://perldoc.perl.org/functions/exec.html)。

[`$^X`and`$0`](http://perldoc.perl.org/perlvar.html)（或`$EXECUTABLE_NAME`and `$PROGRAM_NAME`，见下面 Brian 的评论）分别是当前的 perl 解释器和当前的 perl 脚本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T18:13:59.433

另一种选择是始终有两个进程：一个主管和一个工人。

将所有逻辑重构为一个名为`run`（`main`或其他）的子例程。当您的真实逻辑检测到它需要重新启动时，它应该使用预定义的非零退出代码（例如 1）退出。

然后您的主脚本和主管将如下所示：

```
if (my $worker = fork) {
    # child process
    run(@ARGV);
    exit 0;
}
# supervisor process
waitpid $worker;
my $status = ($? >> 8);

if ($status == 1) { ... restart .. }

exit $status; # propagate exit code... 
```

在您只想重新启动一次的简单场景中，这可能有点矫枉过正。但是，如果您在任何时候都需要能够处理其他错误情况，则此方法可能更可取。

例如，如果退出代码是 255，这表明主脚本调用了 die()。在这种情况下，您可能需要执行一些决策过程来重新启动脚本、忽略错误或升级问题。

CPAN 上有很多模块实现了这样的监督者。[Proc::Launcher](http://search.cpan.org/perldoc?Proc%3A%3ALauncher)就是其中之一，手册页包含对相关作品的广泛讨论。（我从未使用过 Proc::Launcher，这主要是由于我链接到它的讨论）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-26T17:08:21.167

没有什么可以阻止你呼唤`system`自己。像这样的东西（显然需要整理一下），我传入一个命令行参数以防止代码永远调用自己。

```
#!/usr/bin/perl
use strict;
use warnings;

print "Starting...\n";
sleep 5;

if (! @ARGV) {
        print "Start myself again...\n";
        system("./sleep.pl secondgo");
        print "...and die now\n";
        exit;
} elsif ((@ARGV) && $ARGV[0] eq "secondgo") {
        print "Just going to die straightaway this time\n";
        exit;
} 
```

# php - 报钱时如何保留结尾的 0

> ID：12606647
> 
> 赞同：1
> 
> 时间：2012-09-26T16:52:12.743
> 
> 标签：php, html

您好，我有一个基本的 php 脚本，用于显示数组中一组项目的价格。该数组包含 3 条信息：名称、价格和 sku。价格可以设置为 99.95、12.95、10.50 或仅 5.00。到目前为止，一切似乎都运行良好，但是当我尝试报告任何价格，如 5.00 或 10.00（整数金额）时，它只会截断结尾的 .00，这并不是一个问题，但我宁愿让它显示尾随零，所以一切看起来不错，很相似。这是数组/报告循环的代码：

```
$items = Array
    (
            "0"=> Array
            (
                "name" => $_SESSION['itemname-mo'],
                "price" => $_SESSION ['price-mo'],
                "sku" => $_SESSION ['sku-mo']
            ),
            "1" => Array
            (
                "name" => $_SESSION['itemname-addon'],
                "price" => $_SESSION ['price-addon'],
                "sku" => $_SESSION ['sku-addon']
            ),
            "2" => Array
            (
                "name" => $_SESSION['itemname-addon1'],
                "price" => $_SESSION ['price-addon1'],
                "sku" => $_SESSION ['sku-addon1']
            ),
            "3" => Array
            (
                "name" => $_SESSION['itemname-addon2'],
                "price" => $_SESSION ['price-addon2'],
                "sku" => $_SESSION ['sku-addon2']
            )

        );

    $a_length = count($items);

    for($x = 0; $x<$a_length; $x++){
    $total +=$items[$x]['price']; 
    }
    echo "<div class=\"well\">";
    for($i = 0; $i < $a_length; $i++){
    $name = $items[$i]['name'];
    $price = $items[$i]['price'];
    $sku = $items[$i]['sku'];
    displaycart($name,$price,$sku);
    }
    echo "<br />
    Sub Total: 
    $$total";
    echo "</div>";

        function displaycart($name,$price,$sku){

            if($name != null || $price != null || $sku != null){
                echo "$name: $$price ($sku) <br />";
            }
            else{ echo "";}
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T16:53:24.573

见[`number_format`](http://php.net/manual/en/function.number-format.php)。

```
number_format($number, 2, '.', ''); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T16:53:28.600

回声时使用[`number_format`](http://php.net/manual/en/function.number-format.php)。

# iphone - 如何从目标 c 在 iPhone 上启动地图应用程序

> ID：12606648
> 
> 赞同：1
> 
> 时间：2012-09-26T16:52:17.180
> 
> 标签：iphone, objective-c, ios, ios6

我为 IOS 6 开发应用程序。
我想运行地图应用程序并传递它的起点和目的地，以便我可以导航用户。

```
UIApplication *app = [UIApplication sharedApplication];

    NSString *coordinates = [NSString stringWithFormat:@"http://maps.google.com/maps?daddr=%f,%f&saddr=%f,%f", ...];

    [app openURL:[NSURL URLWithString: coordinates]]; 
```

我认为这段代码将在模拟器上的浏览器中打开谷歌地图，并在设备上打开地图应用程序，但在设备上它运行浏览器谷歌地图。
难道我做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T16:56:03.357

如果您不知道，Apple 不再使用 Google 地图，因此您必须为 Apple 地图使用他们的新 URL 方案。（注意：如果你支持 iOS 5，那么你应该同时使用。谷歌地图方案和苹果地图）

这是一个示例查询`http://maps.apple.com/maps?daddr=San+Francisco,+CA&saddr=cupertino`

这是它的文档：[Apple Maps URL Schemes](https://developer.apple.com/library/ios/#featuredarticles/iPhoneURLScheme_Reference/Articles/MapLinks.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T17:11:35.497

另一种选择，如果你有一个 MKPlacemark 对象：

```
// placemark is your MKPlacemark object
MKMapItem* destination =  [[MKMapItem alloc] initWithPlacemark:placemark];

if([destination respondsToSelector:@selector(openInMapsWithLaunchOptions:)])
{
   // Using iOS6 native maps app
   [destination openInMapsWithLaunchOptions:@{MKLaunchOptionsDirectionsModeKey:MKLaunchOptionsDirectionsModeDriving}];      
}
else
{
   // Using iOS5 which has the Google Maps application
   NSString *currentLocation = @"Current%20Location";
   NSString *routeString = [NSString stringWithFormat:@"%@saddr=%@&daddr=%@", kMapsBaseUrl, currentLocation, address.mapAddress];
   [[UIApplication sharedApplication] openURL:[NSURL URLWithString:routeString]];
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-07-30T14:07:21.093

这是我在 iOS 8 上使用的。

首先我尝试打开网址@“comgooglemaps://”，如果它有效，这意味着他们安装了谷歌地图应用程序，所以我可以打开该应用程序。

如果它不起作用，则该应用程序不存在，只需在 Safari 中打开谷歌地图。

在这两种情况下，它都会通过查询`q=London`。

```
if([[UIApplication sharedApplication] canOpenURL:[NSURL URLWithString:@"comgooglemaps://"]]){ //open google maps app
    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"comgooglemaps://?q=London"]];
}
else{ //open browser 
    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"http://maps.google.com/maps?q=London"]];
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-16T08:38:50.870

```
-(void)openAddressOnNativeMapApp{
NSString *addressOnMap = @"cupertino";  //place name
NSString* addr = [NSString stringWithFormat:@"http://maps.apple.com/?q=%@",addressOnMap];
NSURL* url = [[NSURL alloc] initWithString:[addr stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
[[UIApplication sharedApplication] openURL:url]; 
```

}

欲了解更多信息，请访问[Apple Doc 以打开本地地图应用程序](https://developer.apple.com/library/ios/featuredarticles/iPhoneURLScheme_Reference/MapLinks/MapLinks.html)

# eclipse - 如何使用快捷方式在 Eclipse 中打开运行配置窗口？

> ID：12606650
> 
> 赞同：8
> 
> 时间：2012-09-26T16:52:22.483
> 
> 标签：eclipse, keyboard-shortcuts

当我进行多个 Java 应用程序时，我经常需要打开

*运行 -> 运行配置*

设置应用程序输入或其他参数。那么有没有办法用快捷方式打开这个窗口？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-26T17:04:57.940

*您可以为Run...*命令设置自定义快捷方式：

*   *窗口 -> 首选项 -> 常规 -> 键*

# objective-c - 使用 UIActionSheet 类型的表达式初始化 TaggedUIActionAheet 的不兼容指针类型

> ID：12606653
> 
> 赞同：1
> 
> 时间：2012-09-26T16:52:45.420
> 
> 标签：objective-c, xcode, uiactionsheet

当我运行这个：

```
TaggedUIActionSheet *sheet = [[UIActionSheet alloc] 
        initWithTitle:nil
        delegate:self 
        cancelButtonTitle:@"Cancel" 
        destructiveButtonTitle:@"Delete" 
        otherButtonTitles:@"Save to photos",@"Email",nil]; 
```

我收到以下错误：

`Incompatible pointer type initializing TaggedUIActionAheet with an expression of type UIActionSheet`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T21:09:01.840

在第一行发现错误：

```
TaggedUIActionSheet *sheet = [[UIActionSheet alloc] 
```

应该：

```
TaggedUIActionSheet *sheet = [[TaggedUIActionSheet alloc] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-04T05:36:23.403

尝试以下操作：

```
 UIActionSheet *Actionsheet =[[UIActionSheet alloc]initWithTitle:title delegate:delegate cancelButtonTitle:Canclebutton destructiveButtonTitle:destructivebutton otherButtonTitles:nil, nil];

[Actionsheet showInView:self.view];

-(void)Click_Button:(UIButton*)sender
{
    [self ShowActionsheet:@"Do u Want to Delete This Record!!!" Delegate:self canclebutton:@"Cancle" Destructivebutton:@"Yes"];
} 
```

# php - 如何将标签与字符串分开？

> ID：12606654
> 
> 赞同：0
> 
> 时间：2012-09-26T16:52:45.807
> 
> 标签：php, tags

我想将这样的字符串拆分成另一个用逗号分隔的字符串，就像这样的“红色，蓝色，绿色，深蓝色”。

我已经尝试了一个正常的功能，但这会输出“红、蓝、绿、暗、蓝”。我想在同一个标​​签中加入“Dark”和“Blue”以及任何其他首字母大写的单词，即使只有两个以上的单词。那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T17:07:30.203

我的建议是有一本颜色字典，比如小写。然后在字典中的单词之后搜索传入的字符串。如果命中将该颜色添加到输出字符串并添加逗号字符。您需要从输入字符串中删除找到的颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T17:04:59.640

```
$words = explode(' ',$string);
$tags = '';
$tag = '';
foreach($words as $word)
{
  if(ord($word >=65 and ord($word <=65))
    {
       $tag .= $word.' '; 
    }
  else
   $tags .= $word.',';
}
$tags = trim($tags,',').trim($tag);
print_r($tags); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T17:36:26.393

这是我的建议.. 仅在需要时才使用逗号

```
$var = "roto One Two Three Four koko poko Toeo Towe ";

$var = explode(' ', $var);

$count = count($var);
for($i=0; $i<$count; $i++)  
    if( (ord($var[$i][0]) > 64 and  ord($var[$i+1][0]) > 96) or ord($var[$i][0]) > 96) 
            $var[$i] .=',';

echo $var = implode(' ',$var); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T17:09:48.417

你可以试试

```
 $colors = "red blue green Dark Blue Light green Dark red";
$descriptors = array("dark","light");

$colors = explode(" ", strtolower($colors));
$newColors = array();
$name = "";
foreach ( $colors as $color ) {
    if (in_array(strtolower($color), $descriptors)) {
        $name = ucfirst($color) . " ";
        continue;
    } else {
        $name .= ucfirst($color);
        $newColors[] = $name;
        $name = "";
    }
}
var_dump($newColors);
var_dump(implode(",", $newColors)); 
```

输出

```
array
  0 => string 'Red' (length=3)
  1 => string 'Blue' (length=4)
  2 => string 'Green' (length=5)
  3 => string 'Dark Blue' (length=9)
  4 => string 'Light Green' (length=11)
  5 => string 'Dark Red' (length=8)

string 'Red,Blue,Green,Dark Blue,Light Green,Dark Red' (length=45) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T16:59:40.297

在空间上寻找第一个大写字母的循环`explode()`应该这样做：

```
$string = "red blue Dark Green green Dark Blue";
// preg_split() on one or more whitespace chars
$words = preg_split('/\s+/', $string);
$upwords = "";
// Temporary array to hold output...
$words_out = array();

foreach ($words as $word) {
  // preg_match() ins't the only way to check the first character
  if (!preg_match('/^[A-Z]/', $word)) {
    // If you already have a string built up, add it to the output array
    if (!empty($upwords)) {
      // Trim off trailing whitespace...
      $words_out[] = trim($upwords);
      // Reset the string for later use
      $upwords = "";
    }
    // Add lowercase words to the output array
    $words_out[] = $word;

  }
  else {
    // Build a string of upper-cased words
    // this continues until a lower cased word is found.
    $upwords .= $word . " ";
  }
}
// At the end of the loop, append $upwords if nonempty, since our loop logic doesn't
// really account for this.
if (!empty($upwords)) {
  $words_out[] = trim($upwords);
}

// And make the whole thing a string again
$output = implode(", ", $words_out);

echo $output;
// red, blue, Dark Green, green, Dark Blue 
```

# c# - 从 Oracle 将大量数据加载到业务对象的 List 集合中

> ID：12606656
> 
> 赞同：0
> 
> 时间：2012-09-26T16:52:54.183
> 
> 标签：c#, xml, linq, oracle

我需要一种方法来优化从 Oracle 数据库中将数百万条记录的数据检索到自定义业务对象列表中。从 Oracle 返回的数据是 XML 格式，我需要一种将其序列化为业务对象列表的方法。

我编写的代码工作正常，但是，在将 XML 加载到内存期间执行需要很长时间，特别是当代码到达该行时：

```
var xDoc = XDocument.Load(xmlReader); 
```

代码 ：

```
//Custom Business object  
 public class AccountType
    {
        public int AccountTypeID { get; set; }
        public string AccountCode { get; set; }
        public string BookType { get; set; }
        public int Status { get; set; }
    }

//Code that retrieves data from Oracle DB

  using (OracleConnection objOracleConnection = new OracleConnection(strConnectionString))
            {
                using (OracleCommand orclCmd = objOracleConnection.CreateCommand())
                {
                    try
                    {

                        orclCmd.CommandText = strXMLSQL;
                        orclCmd.BindByName = true;
                        orclCmd.XmlCommandType = OracleXmlCommandType.Query;
                        orclCmd.XmlQueryProperties.RootTag = "AccountData";
                        orclCmd.XmlQueryProperties.RowTag = "ROW";

                        objOracleConnection.Open();
                        XmlReader xmlReader = orclCmd.ExecuteXmlReader();
                        var xDoc = XDocument.Load(xmlReader);                             
                        List<AccountType> accountTypes = (from data in xDoc.Root.Elements("ROW")
                                                              select new AccountType
                                                              {
                                                                  AccountTypeID = data.GetIntXMLElementValue("ACCOUNTTYPEID"),
                                                                  AccountCode = data.GetStringXMLElementValue("ACCOUNTCODE"),
                                                                  BookType = data.GetStringXMLElementValue("BOOKTYPE"),
                                                                  Status = data.GetIntXMLElementValue("STATUS")
                                                              }).ToList();

                    }
                    catch (OracleException oracleEx)
                    {
                        throw oracleEx;
                    }
                    catch (Exception generalEx)
                    {
                        throw generalEx;
                    }
                    finally
                    {
                        objOracleConnection.Close();
                    }
 } 
```

任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T17:10:58.833

您是否需要同时拥有数百万条记录？

数据是否以 XML 格式存储在数据库中？如果不是，您可以使用[ExecutePageReader](http://www.devart.com/dotconnect/oracle/docs/Devart.Data.Oracle~Devart.Data.Oracle.OracleCommand~ExecutePageReader.html)而不是 ExecuteXmlReader

如果它必须是 XML，那么您可以通过调用 id 在 lastId 加 1 和 lastId 加 pageLength 之间的记录来实现自己的寻呼机

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T17:50:34.590

分页是一种选择。在调用 ToList() 之前还使用 PLINQ 进行线程化，因为那是你受到打击的地方。我还要补充一点，删除 XDocument 加载可能会有所帮助。尝试反序列化 xml。假设您的 XML 看起来像这样

```
<ROWSET>
    <ROW>
        <AccountData>
            <ACCOUNTTYPEID>1</ACCOUNTTYPEID>
            <ACCOUNTCODE>ABC</ACCOUNTCODE>
            <BOOKTYPE>FOO</BOOKTYPE>
            <STATUS>10</STATUS>
        </AccountData>
    </ROW>
    <ROW>
        <AccountData>
            <ACCOUNTTYPEID>2</ACCOUNTTYPEID>
            <ACCOUNTCODE>XYZ</ACCOUNTCODE>
            <BOOKTYPE>BAR</BOOKTYPE>
            <STATUS>20</STATUS>
        </AccountData>
    </ROW>
</ROWSET> 
```

您可以设置以下合约：

```
[DataContract(Namespace = "")]
public class AccountData
{
    [DataMember(Name = "ACCOUNTTYPEID")]
    public int Id { get; set; }
}

[DataContract(Name = "ROW", Namespace = "")]
public class Row
{
    [DataMember(Name = "AccountData")]
    public AccountData Data { get; set; }
}

[CollectionDataContract(Name="ROWSET", Namespace = "")]
public class RowSet
    : List<Row>
{
} 
```

并像这样反序列化

```
var s = new DataContractSerializer(typeof(RowSet));
var o = s.ReadObject(xmlreader) as RowSet; 
```

这避免了 XDocument 加载和 LINQ-XML 开销。

# html - 单独的本地存储

> ID：12606658
> 
> 赞同：0
> 
> 时间：2012-09-26T16:52:56.943
> 
> 标签：html, local-storage

我在 foo.com/test1/test1.html 下有 1 个站点，在 foo.com/test2/test2.html 下有另一个站点

test1.html 看起来像这样：

```
<html>
<head>
    <script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
    <script>
        document.ready = function(){
            var name = localStorage.getItem("name");
            if(name){
                console.log("name is defined");
            }else{
                console.log("name is not defined");
                localStorage.setItem("name", "test1");
            }
            $('#name').text(name);
        }
    </script>
</head>
<body>
    <p id="name"></p>
</body>
</html> 
```

而test2.html是这样的：

```
<html>
<head>
    <script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
    <script>
        document.ready = function(){
            var name = localStorage.getItem("name");
            if(name){
                console.log("name is defined");
            }else{
                console.log("name is not defined");
                localStorage.setItem("name", "test2");
            }
            $('#name').text(name);
        }
    </script>
</head>
<body>
    <p id="name"></p>
</body>
</html> 
```

我的问题是，如果我去 test1，名字的值是“test1”，如果我去 test2，名字将是 test2，是否有可能实现。基本上我怀疑我需要以不同的方式命名它们，但我宁愿不这样做。有什么好的解决方法吗？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T07:56:51.667

本地存储是按域定义的。您应该将对象保存在本地存储中以维护页面上下文。

这是解决方案。

```
<html>
<head>
    <script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
    <script>
        document.ready = function(){
            var thispage = JSON.parse(localStorage.getItem("page1"));
            if(thispage.name){
                console.log("name is defined");
            }else{
                console.log("name is not defined");
                var obj={name : "test1"}

                localStorage.setItem("page1", JSON.stringify(obj));
            }

        }
    </script>
</head>
<body>
    <p id="name"></p>
</body>
</html> 
```

类似于所有页面。

# android - 如何更改微调器弹出窗口的背景颜色？

> ID：12606660
> 
> 赞同：11
> 
> 时间：2012-09-26T16:53:01.067
> 
> 标签：android, background, popup, android-spinner, android-2.3-gingerbread

我正在尝试设置微调器弹出窗口的背景颜色，但我尝试过的所有操作都无法正常工作。

这是微调器控件：

```
<Spinner
  android:id="@+id/myspinner"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  android:background="@null"
  android:drawSelectorOnTop="true" /> 
```

当我单击它时，它会显示一个带有白色背景的弹出窗口，我想更改它。

我用来填充弹出窗口的 xml 行是：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  android:background="@drawable/list_selector"      
  android:paddingBottom="@dimen/padding_medium"
  android:layout_marginBottom="@dimen/padding_medium"
  android:orientation="vertical">

  ..........

</RelativeLayout> 
```

和可绘制的背景 list_selector.xml：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android"> 
  <!-- Pressed -->
  <item 
    android:state_pressed="true" 
    android:drawable="@color/green" /> <!--  @drawable/tab_press -->

  <!-- Selected -->
  <item 
    android:state_selected="true" 
    android:drawable="@color/green" /> <!--  @drawable/tab_press -->

</selector> 
```

向上面的 xml 添加默认状态是可以的，但是微调器主控件显示具有该背景颜色的项目，我不希望这样。

我尝试过的另一件事是在 styles.xml 中将应用程序背景颜色设置为黑色

```
<style name="AppTheme" parent="android:Theme.Light">
     <item name="android:background">#000000</item>
     <item name="android:textColor">#FFFFFF</item>
     <item name="android:typeface">sans</item> 
</style> 
```

这也覆盖了弹出背景，但它具有不良的附带影响。有没有办法以简单的方式实现这一点？

PS：**我使用的是 API 级别 10 (2.3.3)**，并且该属性`android:popupBackground`不存在。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-07-01T13:38:45.570

在 xml 的微调器声明中使用 android:popupBackground="@drawable/Yourxmlfile.xml" 。

例如。

```
 <Spinner
        android:id="@+id/spinner3"
        android:layout_width="fill_parent"
        android:layout_height="40dp"
        android:layout_gravity="center"
        android:layout_weight="50"
        android:background="@drawable/gradient_spinner"
        android:gravity="center"
        android:paddingLeft="40dp"
        android:popupBackground="@drawable/radialfront"
        > 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-29T19:09:33.777

None of the above solutions worked for me.

The solution was writing in the adapter passed to the spinner a different implementation in the method getDropDownView to display a different layout with custom colors:

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View vista = convertView;       

    // layout for spinner widget

    if (vista==null) {
        LayoutInflater inflater = actividad.getLayoutInflater();
        vista = inflater.inflate(R.layout.fila_colores_spinner, null);                  
    }

    return vista;
}

@Override
public View getDropDownView(int position, View convertView,ViewGroup parent) {
    View vista = convertView;       

    //layout for spinner popup

    if (vista==null) {
        LayoutInflater inflater = actividad.getLayoutInflater();
        vista = inflater.inflate(R.layout.fila_colores_spinner_popup, null);                    
    }

    return vista;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-05T07:54:54.970

**效果很好！！**

*   使用所需颜色（以及您要更改的其他属性）声明带有文本视图的布局
*   **textView 的 id必须是 text1**（因为这是在 R.android 的默认布局中为您的微调器声明的 id）
*   在您的微调器适配器中提供此布局

例如：

*   在 res\layout\custom_spinner_item.xml 中输入：

    ```
    TextView xmlns:android="http://schemas.android.com/apk/res/android"
                    android:id="@android:id/text1"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:background="#B2B5B7"
                    android:gravity="center_horizontal"
                     android:textSize="20dp" 
    ```

然后将此布局提供给适配器：

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(
      MyActivity.this,
      R.layout.custom_spinner_item, strings); 
```

*   然后把这个适配器给你的微调器

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T04:44:17.413

```
 <Spinner
      android:id="@+id/myspinner"
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:background="@drawable/list_selector"      
      android:drawSelectorOnTop="true" /> 
```

尝试这个..

# java - 爪哇。无法打开连接

> ID：12606674
> 
> 赞同：0
> 
> 时间：2012-09-26T16:53:35.040
> 
> 标签：java, multithreading, oracle, hibernate, connection

我正在使用

> oracle.ucp.jdbc.PoolDataSource

用于获取连接。每个连接都包装到自定义类（历史解决方案）。通常连接是通过 entityManager 获得的。我的系统需要高性能处理。有 ThreadPool 用于它。线程池可以同时提供**15个**线程，就像连接池一样。一切正常，但有时我会遇到异常（此时仅使用了 4 个连接）：

```
2012-09-26 17:51:45.835 | ERROR | ThreadExecutor-7 | org.hibernate.ejb.AbstractEntityManagerImpl | Exception in thread "ThreadExecutor-7"
javax.persistence.PersistenceException: org.hibernate.exception.GenericJDBCException: Cannot open connection
    at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1235)
    at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1168)
    at org.hibernate.ejb.AbstractEntityManagerImpl.throwPersistenceException(AbstractEntityManagerImpl.java:1245)
    at org.hibernate.ejb.TransactionImpl.begin(TransactionImpl.java:63)
    ...
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:619)
Caused by: org.hibernate.exception.GenericJDBCException: Cannot open connection
    at org.hibernate.exception.SQLStateConverter.handledNonSpecificException(SQLStateConverter.java:140)
    at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:128)
    at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66)
    at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:52)
    at org.hibernate.jdbc.ConnectionManager.openConnection(ConnectionManager.java:449)
    at org.hibernate.jdbc.ConnectionManager.getConnection(ConnectionManager.java:167)
    at org.hibernate.jdbc.JDBCContext.connection(JDBCContext.java:142)
    at org.hibernate.transaction.JDBCTransaction.begin(JDBCTransaction.java:85)
    at org.hibernate.impl.SessionImpl.beginTransaction(SessionImpl.java:1463)
    at org.hibernate.ejb.TransactionImpl.begin(TransactionImpl.java:60)
    ...
    at org.hibernate.jdbc.ConnectionManager.openConnection(ConnectionManager.java:446) 
```

**如果我同步指定的系统*getConnection*性能下降 8-12 次。**

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T17:12:47.973

请检查您是否设置了适当的值

```
 <property name="minPoolSize" value="5"/>
 <property name="maxPoolSize" value="100"/>//Change if you want
 <property name="initialPoolSize" value="5"/>
 <property name="validateConnectionOnBorrow" value="true"/>
 <property name="maxStatements" value="10"/> 
```

[您可以在此处](http://docs.oracle.com/cd/B28359_01/java.111/e10788/optimize.htm)检查配置

您应该在休眠中更改连接池。

[http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/session-configuration.html](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/session-configuration.html)

> 然而，Hibernate 自己的连接池算法非常初级。它旨在帮助您入门，而不是用于生产系统，甚至不用于性能测试。您应该使用第三方池以获得最佳性能和稳定性。只需将 hibernate.connection.pool_size 属性替换为连接池特定设置即可。这将关闭 Hibernate 的内部池。例如，您可能喜欢使用 c3p0。

```
hibernate.c3p0.min_size=5
hibernate.c3p0.max_size=20
hibernate.c3p0.timeout=1800
hibernate.c3p0.max_statements=50 
```

# java - 摆动持久弹出窗口

> ID：12606675
> 
> 赞同：3
> 
> 时间：2012-09-26T16:53:38.507
> 
> 标签：java, swing, mouseevent, jpopupmenu, jpopup

我需要用我的自定义组件显示一个摆动弹出窗口。弹出窗口应该保持可见，直到我自己隐藏它，但不应该得到焦点。

我有一个由其他开发人员编写的代码，它通过以下方式完成：

```
 popupMenu = new JPopupMenu();
       popupMenu.add(myCustomComponent, BorderLayout.CENTER);
       popupMenu.setFocusable(false);
       popupMenu.setVisible(true);
       popupMenu.show(parentComponent, x, y); 
```

这似乎可行，但有一个错误 - 当弹出窗口可见时，弹出窗口会消耗组件外部的第一次鼠标单击。所以我需要单击两次才能将焦点设置到另一个组件。

我该如何解决？或者什么是制作弹出窗口的正确方法？

**更新**

最后，我设法在短代码片段中重现了我的问题。感谢 Guillaume Polet 给了我一个起点。

这是代码：

```
import java.awt.BorderLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;

import javax.swing.*;

public class TestJPopup {

    protected void initUI() {
        JFrame frame = new JFrame(TestJPopup.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        final JTextField textField = new JTextField("Some text field");
        frame.add(textField, BorderLayout.WEST);
        final JButton buttonToHit = new JButton("Hit me");
        buttonToHit.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent e) {
                JOptionPane.showMessageDialog(buttonToHit, "You hit the button successfully");
            }
        });
        frame.add(buttonToHit);
        frame.setSize(200, 100);
        frame.setVisible(true);

        final JPopupMenu popup = new JPopupMenu();
        popup.add(new JLabel("<html>Hey!<br>I'm the popup window!</html>"),
                BorderLayout.NORTH);
        popup.setFocusable(false);
        popup.setVisible(true);
        popup.show(textField, 60, 60);

        // I want to activate popup when user clicks in the text field
        textField.addMouseListener(new MouseAdapter() {
            @Override
            public void mouseClicked(MouseEvent e) {
                if (popup != null) {
                    popup.show(textField, 60, 60);
                }
            }
        });
    }

    public static void main(String[] args) throws Exception {
        Class lnfClass = Class.forName("com.sun.java.swing.plaf.windows.WindowsLookAndFeel", true,
                Thread.currentThread().getContextClassLoader());
        LookAndFeel feel = (LookAndFeel) lnfClass.newInstance();
        UIManager.setLookAndFeel(feel);

        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                new TestJPopup().initUI();
            }
        });
    }
} 
```

两个关键时刻：

*   使用的 Windows 外观（默认不可重现）
*   附加到主框架中文本字段的鼠标侦听器

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T18:12:06.163

不是答案，而只是一个示例[SSCCE](http://sscce.org)，我目前无法在其中重现您描述的行为。也许从这段代码开始，尝试重现错误并使用修改后的非工作代码编辑您的帖子。

```
import java.awt.BorderLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPopupMenu;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;

public class TestJPopup {

    protected void initUI() {
        JFrame frame = new JFrame(TestJPopup.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JLabel leftLabel = new JLabel("Left");
        frame.add(leftLabel, BorderLayout.WEST);
        final JButton buttonToHit = new JButton("Hit me");
        buttonToHit.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                JOptionPane.showMessageDialog(buttonToHit, "You hit the button successfully");
            }
        });
        frame.add(buttonToHit);
        frame.setSize(500, 400);
        frame.setVisible(true);
        JPopupMenu popupMenu = new JPopupMenu();
        popupMenu.add(new JLabel("<html>A Custom<br>component<br>made to<br> simulate <br>your custom component</html>"),
                BorderLayout.NORTH);
        JTextField textfield = new JTextField(30);
        popupMenu.add(textfield);
        popupMenu.setFocusable(false);
        popupMenu.setVisible(true);
        popupMenu.show(leftLabel, 20, 20);
        // Let's force the focus to be in a component in the popupMenu
        textfield.requestFocusInWindow();
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TestJPopup().initUI();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T11:38:34.787

不是解决方案，但是：

对我来说看起来像一个错误，即使是普通的 componentPopup 也会表现出相同的错误行为（在 winLAF 和 Nimbus 中，而不是在 Metal 中）：

```
JTextField field = new JTextField("some popup owner");
JPopupMenu menu = new JPopupMenu();
menu.add("dummy");
field.setComponentPopupMenu(menu);
Action action = new AbstractAction("hit me!") {

    @Override
    public void actionPerformed(ActionEvent e) {
        LOG.info("got hit!");
    }
};
JComponent content = new JPanel();
content.add(new JButton(action));
content.add(field); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-28T11:27:28.263

*这是mKorbel*在评论中提出的一种可能的解决方法，`JWindow`而不是：`JPopupMenu`

 *```
import java.awt.*;
import java.awt.event.*;

import javax.swing.*;

public class TestJPopup {

    protected void initUI() {
        final JFrame frame = new JFrame(TestJPopup.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        final JTextField textField = new JTextField("Some text field");
        frame.add(textField, BorderLayout.WEST);
        final JButton buttonToHit = new JButton("Hit me");
        buttonToHit.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent e) {
                JOptionPane.showMessageDialog(buttonToHit, "You hit the button successfully");
            }
        });
        frame.add(buttonToHit);
        frame.setSize(200, 70);
        frame.setVisible(true);

        final JWindow popup = new JWindow();
        popup.getContentPane().add(new JLabel("<html>Hey!<br>I'm the popup window!</html>"),
                BorderLayout.NORTH);
        popup.setLocation(frame.getLocation().x + 60, frame.getLocation().y + 60);
        popup.pack();
        popup.setFocusable(false);
        popup.setVisible(true);

        // I want to activate popup when user clicks in the text field
        textField.addMouseListener(new MouseAdapter() {
            @Override
            public void mouseReleased(MouseEvent e) {
                if (popup != null) {
                    popup.setVisible(true);
                    popup.setLocation(frame.getLocation().x + 60, frame.getLocation().y + 60);
                    popup.toFront();
                }
            }
        });

        textField.addFocusListener(new FocusAdapter() {
            @Override
            public void focusLost(FocusEvent e) {
                if (popup != null) {
                    popup.setVisible(false);
                }
            }
        });
    }

    public static void main(String[] args) throws Exception {
        Class lnfClass = Class.forName("com.sun.java.swing.plaf.windows.WindowsLookAndFeel", true,
                Thread.currentThread().getContextClassLoader());
        LookAndFeel feel = (LookAndFeel) lnfClass.newInstance();
        UIManager.setLookAndFeel(feel);

        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                new TestJPopup().initUI();
            }
        });
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-27T17:29:29.473

为了快速研究和/或未来的读者，

*   这个问题是可重现的，并提出了，

    一）[JPopup](https://stackoverflow.com/questions/12606675/swing-persistent-popup)

    b) [JMenu](https://stackoverflow.com/questions/12251161/jmenu-consumes-focuslost-event-in-windows7-laf-java7)

*   `jdk1.6.0_25`在和上测试`jdk1.7.0_04`，

*   `WinXp`和上的相同问题`Win7`，

*   对于/ , `Look and Feel`_`SystemLookAndFeel``WindowsLookAndFeel`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-28T21:28:23.947

这是解决问题的神奇线：

```
UIManager.put("PopupMenu.consumeEventOnClose", Boolean.FALSE); 
```

我在查看 BasicPopupMenuUI 类的源代码后发现了这一点。显然，根据代码中的以下注释，这种行为是经过深思熟虑的设计选择，但对我来说确实感觉像是一个错误。

> ```
>  // Ask UIManager about should we consume event that closes
>         // popup. This made to match native apps behaviour. 
> ```

顺便说一句，它也发生在 Java 5 和 6 中。*

# asp.net - IIS 7.5 配置设置

> ID：12606677
> 
> 赞同：1
> 
> 时间：2012-09-26T16:53:50.017
> 
> 标签：asp.net, iis-7

我已经完成了 ASP.NET 2.0 Web 应用程序的 XCopy 并部署在 IIS 7.5 测试服务器中。我已经设置了所有必要的基本设置，例如 IUSR、NETWORK 服务帐户、经典应用程序池。

我可以浏览主页，但身份验证页面没有被重定向到位于同一应用程序目录的其他页面。

你能告诉我可能的原因吗？

# c# - 来自 Mysql 数据集的 Reportviewer 绑定？

> ID：12606679
> 
> 赞同：0
> 
> 时间：2012-09-26T16:53:51.360
> 
> 标签：c#, reportviewer

我查看了很多现有的问题，但我的问题仍然存在。

我已经添加`reportViewer1`了`MaisVendido.Form`，并且还添加`Report3.rdlc`了应用程序，但这`reportviewer`没有显示任何内容。为什么会这样？

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using Microsoft.Reporting.WinForms;
using System.Collections;

namespace Fabrication
{
    public partial class MaisVendido : Form
    {
        DB db = new DB();
        DataSet ds = new DataSet();
        DataTable dt = new DataTable();
        public MaisVendido()
        {
            InitializeComponent();
            Getdataset();
            Getdatatable();
        }
        void Getdataset()
        {
            ds = db.ClientTable("select * from estoque");
        }
        void Getdatatable()
        {
            dt = db.Maisvendendo("select * from estoque");
        }
        private void MaisVendido_Load( object sender, EventArgs e )
        {
                reportViewer1.Visible = true;
                reportViewer1.LocalReport.ReportPath = "Report3.rdlc";
                ReportDataSource source = new ReportDataSource("Estoque", dt);
                reportViewer1.LocalReport.DataSources.Clear();
                reportViewer1.LocalReport.DataSources.Add(source);
                reportViewer1.LocalReport.Refresh();
        }
    }
}
//in my db class i have dataset and datatable two fucnitons
public DataSet ClientTable( string query )
        {
            DataSet dt = new DataSet();
            MySqlConnection con = new MySqlConnection(MysqlConnect());
            con.Open();

                MySqlCommand cmd = new MySqlCommand(query, con);
                MySqlDataAdapter ad = new MySqlDataAdapter(query, con);
                ad.Fill(dt);
                return dt;
        }
public DataTable Maisvendendo( String query )
        {
            DataTable dt = new DataTable();
            MySqlConnection con = new MySqlConnection(MysqlConnect());
            con.Open();

            MySqlDataAdapter ad = new MySqlDataAdapter(query, con);
            ad.Fill(dt);
            dt.TableName = "Estoque";
            con.Close();
            return dt;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T17:41:41.273

您应该使用 ReportPath 代替 ReportEmbeddedResource，因为您使用的不是嵌入式资源，而是本地文件。

# php - 提交事件后在 tr 中添加新的 td

> ID：12606680
> 
> 赞同：3
> 
> 时间：2012-09-26T16:53:56.347
> 
> 标签：php, javascript, jquery, json

请查看我的[jsfiddle](http://jsfiddle.net/avrelian/hrnDG/2/)以及我目前正在使用的内容。

当用户按下提交时，我想在提交按钮之后添加一个额外的 td。如果用户选择了错误的答案，我希望这个 td 阅读“不正确，再试一次”。如果它们是正确的，我希望 td 阅读“正确！”。

现在，我相信这行代码可以解决问题（假设我的 html 中的 td 有一个类“newtd”）。

```
$('td.newtd').html("<span class='green'>Correct!</span>"); 
```

或者

```
$('td.newtd').html("<span class='red'>Incorrect, try again.</span>"); 
```

我遇到的问题是弄清楚我需要对当前代码进行哪些修改才能使其正常工作。最好创建一个 if 语句来检查输入的当前类吗？如果问题正确，打印新的 td?

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T16:57:25.387

添加`class='newtd'`你的 html 代码[修改的 jsfiddle](http://jsfiddle.net/hrnDG/12/)

```
<td class='newtd'></td> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T17:05:31.473

[**jsFiddle 演示**](http://jsfiddle.net/hrnDG/10/)

好吧，首先你需要在你的 html 中有一个带有*newtd*类的 td （或者你可以删除它（如果它在那里）并每次都附加它，不管对你有用。

至于 IF，您可以像这样切换不同的文本。

```
var correct = $('input[type="radio"]:checked').hasClass('right');

var str = '<span class="' + (correct ? 'green' : 'red') + '">' + 
        (correct ? 'Correct!' : 'Incorrect, try again.')
        + '</span>';

$('td.newtd').html(str); 
```

# c# - 为什么我不能将 webClient 与远程服务器一起使用？

> ID：12606683
> 
> 赞同：0
> 
> 时间：2012-09-26T16:54:28.070
> 
> 标签：c#, .net, webclient, remote-server, downloadstring

这是我的代码：

```
 public bool login_user(string username, string password)
    {
        // try to login user through php script
        try
        {
            string response = wc.DownloadString(configurationUrl + "login.php?user=" + username + "&password=" + password);
            if (response == "LOGIN_TRUE")
                return true;
        }

        catch (Exception E)
        {
            MessageBox.Show(E.Message);
            UnableToConnect = true;
            return false;
        }

        return false;
    } 
```

当我直接从浏览器导航到 DownloadString() 方法上的链接时，我看到上面写着一个空白页：

```
LOGIN_TRUE 
```

但是，当我使用正确的登录名和密码调用此函数时，它返回 false。

只有在我将 PHP 文件从本地服务器传输到远程服务器后，我才会看到此错误

这里出了什么问题，为什么这在本地而不是在远程服务器上有效？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T17:45:38.557

我找到了答案。即使当我直接从浏览器调用链接时，我没有看到返回的字符串中有任何空格，但似乎有一些空格，上面的代码通过替换工作

```
 if (response == "LOGIN_TRUE") return true; 
```

经过

```
 if (response.Trim() == "LOGIN_TRUE") return true; 
```

谢谢@Codelgnoto

# bash - 在 bash 中，如何强制变量永远不会被解释为列表？

> ID：12606688
> 
> 赞同：0
> 
> 时间：2012-09-26T16:54:41.427
> 
> 标签：bash

在我的`bash`脚本中，我经常使用可能包含空格的文件路径：

```
FOO=/path\ with\ spaces/ 
```

稍后，如果我想使用`FOO`，我必须将其括在引号 ( `"$FOO"`) 中，否则它将被解释为列表 ( `/path`, `with`, `spaces/`)。有没有更好的方法来强制变量永远不会被解释为列表？不得不不断地引用换行是很麻烦的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T16:58:00.740

不可以。您必须始终使用引号，否则 bash 将分词（除了 in `[[`，但这是一种特殊情况）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T22:34:51.430

您还可以更改内部字段分隔符 IFS，如下所示：

```
ORIGIFS="$IFS"
IFS=$(echo -en "\n\b")
# do stuff...
IFS="$ORIGIFS" 
```

但是，这会影响 bash 看起来进行字段拆分的所有情况，这可能比您想要的更广泛。

# .net - 所有 .NET 安装上是否存在相同的 TimeZoneInfos？

> ID：12606690
> 
> 赞同：0
> 
> 时间：2012-09-26T16:54:48.100
> 
> 标签：.net, timezone

以下 C# 代码

```
TimeZoneInfo.FindSystemTimeZoneById("foo") 
```

会抛出一个[`TimeZoneNotFoundException`](http://msdn.microsoft.com/en-us/library/system.timezonenotfoundexception.aspx)（如你所料），而

```
TimeZoneInfo.FindSystemTimeZoneById("Central European Standard Time") 
```

正确返回`TimeZoneInfo`中欧的对象。

这是一个有点偏执的问题，但是 .NET Framework 是否保证相同`TimeZoneInfo`的实例在 .NET 版本的所有实例上都可用？它们是否因版本而异？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T16:57:16.443

这是基于存储在系统本身上的时区信息，而不是框架的一部分。从[FindSystemTimeZoneById](http://msdn.microsoft.com/en-us/library/system.timezoneinfo.findsystemtimezonebyid.aspx)的文档中：

> FindSystemTimeZoneById 尝试将 id 与 Windows XP 和 Windows Vista 下注册表的 HKEY_LOCAL_MACHINE\Software\Microsoft\Windows NT\CurrentVersion\Time Zones 分支的子项名称匹配。此分支不一定包含时区标识符的完整列表。

基本上，如果您使用默认情况下在 Windows 中定义的时区，它应该是安全的 - 但它基于系统本身，而不是框架。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T16:58:15.017

它因 CLI 实现（.NET 与 Mono）、操作系统版本（我相信不同版本的 Windows 在不同程度上支持历史数据）以及*安装*了哪些更新而有所不同。

这主要影响特定时区 ID 的可用时区信息，而不是时区 ID 列表本身，但即使是随着时间的推移也会发生变化。我希望“中欧标准时间”得到相当全面的支持。（正如 Reed 所说，这更多是关于操作系统提供的内容，而不是 .NET 支持的内容，而不仅仅是`TimeZoneInfo`.NET 3.5+ 中的内容。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T17:00:25.053

启动 Regedit.exe 并导航到`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Time Zones`密钥。展开节点，您将看到时区名称列表。

TimeZoneInfo 类从那里获取其信息。

所以不，.NET 无法保证信息的存在。注册表项归 Windows 所有。但是现在您知道如何对引起故障的机器进行故障排除了。这是极其罕见的，充其量机器没有获得 Window Update 更新，因此也没有获得这些键的更新。夏令时规则更改是最常见的类型。注册表损坏总是可能的。

# java - 声明一个全局变量，或者在每个类中声明多次

> ID：12606700
> 
> 赞同：3
> 
> 时间：2012-09-26T16:55:33.453
> 
> 标签：java, android, class, variables

简单的问题。查看我的代码，我注意到在我的类或方法中多次声明了很多变量......例如：

```
public Long dbInsertCheckin(final String Class) {
final SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
...
} 
```

和

```
public class SmashDataSource {
    final SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
    final SimpleDateFormat sdf = new SimpleDateFormat("EEEE");
    final SimpleDateFormat timeFormat = new SimpleDateFormat("HHmm");
...
} 
```

这让我想到，与其声明“dateformat”、“sdf”或“timeformat”或我在多个地方使用的其他内容，不如在我的应用程序类中全局声明这些，然后在任何地方引用它们是否更有意义我想喜欢

```
public class MyApp extends Application {
public final SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
    public final SimpleDateFormat sdf = new SimpleDateFormat("EEEE");
    public final SimpleDateFormat timeFormat = new SimpleDateFormat("HHmm"); 
```

并稍后在其他类中引用它们：

```
MyApp.dateformat
Myapp.sdf 
```

从性能/内存使用的角度来看，这会更好吗？有什么理由不这样做吗？对我来说，似乎多次声明它们会消耗更多内存，而不是一次最终声明......但我不知道编译器是如何进行优化的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T17:13:25.857

使用全局变量并没有错。通常避免使用它们以保持事物的灵活性和封装性。但是像工厂模式这样的一些设计模式很适合静态/全局类。它还避免了代码重复。

（但是我可能会避免使用我的`Application`类，所以我的全局字段仅在需要时使用，但这是一个实现细节。）

我可能会做这样的事情。它使事情保持灵活，同时也将事情放在一个地方，以便它们在您的应用程序中保持一致。

```
public class MyGlobals
{
    private static SimpleDateFormat dateFormat;

    public static SimpleDateFormat getDateFormat()
    {
        if(dateFormat== null)
        {
            dateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
        }
        return dateFormat;

    }
} 
```

然后你可以在其他类中使用它：

```
MyGlobals.getDateFormat(); 
```

====

**以下是来自开发文档的一些信息：**

[http://developer.android.com/guide/faq/framework.html#3](http://developer.android.com/guide/faq/framework.html#3)

> 对于短期共享复杂的非持久性用户定义对象，建议采用以下方法：
> 
> **单例类**
> 
> 您可以通过使用单例来利用您的应用程序组件在同一进程中运行这一事实。这是一个设计为只有一个实例的类。它有一个名为 getInstance() 的静态方法，它返回实例；第一次调用此方法时，它会创建全局实例。因为所有调用者都获得相同的实例，所以他们可以将其用作交互点。例如，活动 A 可以检索实例并调用 setValue(3)；稍后的活动 B 可能会检索实例并调用 getValue() 以检索最后设置的值。
> 
> **公共静态字段/方法**
> 
> 使数据可跨活动/服务访问的另一种方法是使用公共静态字段和/或方法。您可以从应用程序中的任何其他类访问这些静态字段。要共享一个对象，创建对象的活动会设置一个静态字段以指向该对象，任何其他想要使用该对象的活动只需访问该静态字段。
> 
> **对象弱引用的 HashMap**
> 
> 您还可以使用弱引用的 HashMap 到具有长键的对象。当一个 Activity 想要将一个对象传递给另一个 Activity 时，它只需将该对象放入映射中并通过 Intent Extras 将密钥（这是一个基于计数器或时间戳的唯一 Long）发送给接收者 Activity。接收者活动使用此键检索对象。
> 
> **持久对象**
> 
> 即使应用程序似乎继续运行，系统也可能会选择终止其进程并稍后重新启动它。如果您有数据需要从一个活动调用持续到下一个活动调用，则需要将该数据表示为在通知活动可能会消失时由活动保存的状态。
> 
> 对于共享复杂的持久性用户定义对象，建议采用以下方法：
> 
> ```
> Application Preferences
> Files
> contentProviders
> SQLite DB 
> ```
> 
> 如果共享数据需要跨应用程序进程可能被终止的点保留，则将该数据放在持久存储中，如应用程序首选项、SQLite DB、文件或内容提供程序。有关如何使用这些组件的更多详细信息，请参阅数据存储。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T17:07:34.223

是的，在一个地方定义它们是个好主意——不仅因为它更干净，而且因为这样在全球范围内更改它们更容易，而无需遍历整个代码库。就个人而言，我会选择这样的东西：

```
public static final LONG_DATE_FORMAT = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss"); 
```

但是，在这种特殊情况下，您需要小心，因为`SimpleDateFormat`对象不是线程安全的。这意味着，如果您要在整个应用程序中共享一个实例，则需要采取一些额外的步骤来避免并发问题。有关详细信息，请参阅以下内容之一：

[SimpleDateFormat 线程安全](https://stackoverflow.com/questions/6840803/simpledateformat-thread-safety)

[证明 SimpleDateFormat 不是线程安全的](https://stackoverflow.com/questions/12533345/proving-that-simpledateformat-is-not-threadsafe)

[“Java DateFormat 不是线程安全的”这会导致什么？](https://stackoverflow.com/questions/4021151/java-dateformat-is-not-threadsafe-what-does-this-leads-to)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T17:07:58.450

这一切都归结为您需要什么以及您当前的环境。

如果您能负担得起一点重构，恕我直言，最好的方法是创建一个包含所有此类变量的上下文类。您可以利用重构会话，甚至将其他配置参数移动到该类并将其作为 Singleton：

```
public class MyApplicationContext {
    //Constants and other global variables (I'd make the strings global, rather than
    //The time formats in this case.
    public final String TIME_FORMAT = "HHmm";

    //Context variables (taken from your source of choice)
    private String someConfigurationPath = "...";

    //Getters & Setters
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-28T20:32:32.243

全局变量可以作为代码异味的指标。

也许可以在使用相同简单日期格式的不同位置找到一种模式。这可能是重构代码并将所有公共部分移动到一个地方的机会，例如组合成一个新方法（如 printDate(aDate)），而不是 SimpleDateFormat 的多个实例化和进一步包围的重复代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T17:00:30.203

我会，这完全取决于会发生什么变化，但是如果您将所有配置变量都作为静态变量，您可以只在一个地方更改日期格式，而其他所有的都不需要更改。

有时对于日期格式之类的内容，最好将日期字符串放在 stings.xml 文件中，以便您可以根据每个国家/地区/语言更改日期格式。

# cluster-analysis - Mahout K-means 根据映射任务的数量有不同的行为

> ID：12606701
> 
> 赞同：0
> 
> 时间：2012-09-26T16:55:37.290
> 
> 标签：cluster-analysis, mahout, k-means

我在运行 Mahout K-means 时遇到了一个奇怪的情况：使用预先选择的一组初始质心，我在 lucene.vector 生成的 SequenceFile 上运行 K-means。运行是为了测试目的，所以文件很小（大约 10MB~10000 个向量）。

当使用单个映射器执行 K-means 时（考虑到我的集群中的 Hadoop 拆分大小的默认值是 128MB），它会在 2 次迭代中达到给定的集群结果（案例 A）。但是，我想通过触发更多映射任务（Hadoop 集群总共有 6 个节点）来测试算法的执行速度是否会有任何改进/恶化。因此，我将 -Dmapred.max.split.size 参数设置为 5242880 字节，以使 mahout 触发 2 个映射任务（案例 B）。我确实成功地启动了两个映射器，但奇怪的是，这项工作在 5 次迭代而不是 2 次后完成，而且即使在第一次将点分配给集群时，映射器与单映射执行相比做出了不同的选择。

现有的 K-means Mahout 实现是否可以证明这种行为是合理的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T13:27:24.213

通过快速查看源代码，我发现 Mahout k-means 实现存在两个问题。

首先，对于大型数据集，保持 S0、S1、S2 统计数据的方式可能在数值上不稳定。哦，因为 k-means 实际上甚至不使用 S2，所以它也没有必要慢。我敢打赌，一个好的实现至少可以将这个版本的 k-means 击败 2-5 倍。

对于拆分到多台机器上的小型数据集，它们计算平均值的方式似乎存在错误。哎哟。如果 reducer 应用于多个输入，这将放大，特别是当分区很小时。更详细地说，集群均值显然是用先前的均值而不是 0 向量初始化的。现在，如果您减少它的“t”个副本，则结果向量将偏离先前平均值的“t”倍。

的初始化`AbstractCluster`：

```
setS1(center.like()); 
```

均值更新：

```
getS1().assign(x, Functions.PLUS); 
```

合并一个集群的多个副本：

```
setS1(getS1().plus(cl.getS1())); 
```

最终确定新中心：

```
setCenter(getS1().divide(getS0())); 
```

因此，使用这种方法，中心将从正确值偏移之前的中心时间`t / n`，其中`t`是分割`n`数和对象数。

为了解决数值不稳定性（每当数据集不以 0 向量为中心时就会出现这种情况），我建议将 S1 统计量替换为真实均值，而不是 S0*均值。S1 和 S2 都可以使用增量均值公式以很小的成本进行增量更新，该公式在 MacQueen 的原始“k-means”出版物中使用了 AFAICT（实际上是在线 kmeans，而这是 Lloyd 样式的批量迭代）。好吧，对于增量 k 均值，无论如何您显然都需要可更新的均值向量……我相信 Knuth 在他的基本书籍中也讨论了该公式。我很惊讶 Mahout 似乎没有使用它。它相当便宜（只是多了几条 CPU 指令，没有额外的数据，所以这一切都发生在 CPU 缓存行中）并且在处理大型数据集时为您提供额外的精度。

# iphone - cocos2d：动画停止。整合 Cocos2D 和 UIKit

> ID：12606702
> 
> 赞同：0
> 
> 时间：2012-09-26T16:55:44.813
> 
> 标签：iphone, ios, xcode, ipad, cocos2d-iphone

我已经集成了 Cocos2D 和 UIKit。我有视图之间的导航，第一次打开 cocos 视图时，它可以工作。但是当我返回主菜单时，日志控制台会显示：

```
cocos2d: animation stopped 
```

之后，如果我再次尝试进入 cocos2D 视图，动画不会开始。

我能做些什么来解决这个问题？

我按照本教程进行操作，但没有帮助 [http://www.raywenderlich.com/4817/how-to-integrate-cocos2d-and-uikit](http://www.raywenderlich.com/4817/how-to-integrate-cocos2d-and-uikit)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T17:03:17.343

这方面一直存在问题。[在另一个 SO Question 中](https://stackoverflow.com/questions/12168079/multiple-opengl-views-cocos2d)有类似的讨论。

每当我想包含 UIKit 元素时，我倾向于反其道而行之。

使用 CCUIViewWrapper 代码：[https ://github.com/splhack/CCUIViewWrapper](https://github.com/splhack/CCUIViewWrapper)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-05T17:20:50.687

这可能会根据您使用的 cocos2d 的版本而有所不同，但`stopAnimation`应该被调用`CCDirectorIOS.m:viewDidDisappear`并且`startAnimation`应该被调用`viewWillAppear`。所以我会在那里设置断点以确保它被调用。如果你`-(void) mainLoop:(id)sender`正在运行。

```
-(void) viewWillAppear:(BOOL)animated
{
  [super viewWillAppear:animated];
  [self startAnimation];
}

-(void) viewDidDisappear:(BOOL)animated
{
  [self stopAnimation];

  [super viewDidDisappear:animated];
} 
```

如果您想进一步调查 mainLoop 调用 drawScene，如果不是`isPaused`，则 CCScheduler 将更新运行所有动画的 CCActionManager。

希望这可以帮助。

# validation - ASP.NET MVC 4 避免为 datetime 生成 data-val-date

> ID：12606703
> 
> 赞同：7
> 
> 时间：2012-09-26T16:55:46.880
> 
> 标签：validation, datetime, asp.net-mvc-4

如何避免为从 Datetime 属性创建的元素生成 html 属性“data-val-date”？

该模型：

```
public class RegisterModel
{
    [Required]
    [Display(Name = "Date of birth")]
    public DateTime? DateOfBirth { get; set; }
} 
```

风景：

```
@Html.LabelFor(m => m.DateOfBirth)
@Html.EditorFor(m => m.DateOfBirth) 
```

事实上，我正在创建一个用于选择出生日期的三个下拉列表元素，它不会以日期格式给出值。我见过的一些解决方案包括解决方法：使用 javascript 删除验证。我设想的解决方案是将 DateTime 属性拆分为每个值（日、月、年）的三个长属性。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-27T15:30:45.713

好的，这花了我一个下午的时间......显然 mvc4 决定是时候在视图模型上的每个日期时间属性上呈现 data-val-date="Message" 了。我试图修改这个默认行为，但没有成功。

这解决了我的问题：

```
$.validator.addMethod('date',
    function (value, element) {
        return true; // since MVC4 data-val-date is put on EVERY vm date property. Default implementation does not allow for multiple cultures...
    }); 
```

您也可以尝试在共享的 EditorFor 文件夹中编写自己的名为“DateTime.cshtml”的编辑器模板，但不要在那里使用 TextBoxFor，因为那个也被污染了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T17:58:35.480

验证系统使用 data-val-date 来验证日期。如果删除它，客户端验证将不起作用。

如果这是您想要的，那么只需禁用客户端验证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-27T19:49:51.780

在你的 global.asax 文件中将它添加到你的应用程序开始，表单应该会触发。

```
DataAnnotationsModelValidatorProvider.AddImplicitRequiredAttributeForValueTypes = false; 
```

# android - Android 自定义相机质量

> ID：12606705
> 
> 赞同：5
> 
> 时间：2012-09-26T16:55:54.617
> 
> 标签：android, android-camera

我正在为我的自定义相机使用以下参数

```
mCamera = getCameraInstance();

params = mCamera.getParameters();
params.setFlashMode(Camera.Parameters.FLASH_MODE_AUTO);
params.setFocusMode(Camera.Parameters.FOCUS_MODE_CONTINUOUS_PICTURE);
params.setSceneMode(Camera.Parameters.SCENE_MODE_AUTO);
params.setWhiteBalance(Camera.Parameters.WHITE_BALANCE_AUTO);
params.setExposureCompensation(0);
params.setPictureFormat(ImageFormat.JPEG);
params.setJpegQuality(100);
params.setRotation(90);

List<Size> sizes = params.getSupportedPictureSizes();
Camera.Size size = sizes.get(0);
params.setPictureSize(size.width, size.height);

mCamera.setParameters(params); 
```

拍完照片后，图像质量很差。我正在使用自动对焦和闪光灯。

这是我拍照的方法。。

```
mCamera.autoFocus(new Camera.AutoFocusCallback() {
    ShutterCallback shutterCallback = new ShutterCallback() {

        @Override
        public void onShutter() {
            AudioManager mgr = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
            mgr.playSoundEffect(AudioManager.FLAG_PLAY_SOUND);
        }
    };

    PictureCallback pictureCallback = new PictureCallback() {

        @Override
        public void onPictureTaken(byte[] data,
                Camera camera) {
            ...
        }
    };

    public void onAutoFocus(boolean success, Camera camera) {
        mCamera.takePicture(shutterCallback,
                null, null, pictureCallback);
    }
}); 
```

当闪光灯不闪光（我正在使用自动闪光灯）并且我所在的房间光线充足时，尤其糟糕。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-26T17:14:43.590

当您使用`getSupportedPictureSizes()`时，它不一定以任何顺序返回它们。它可能会返回一个可怕的尺寸`sizes.get(0)`。如果您想要最好的质量，您应该比较它们以找到最大的尺寸。就像是：

```
List<Size> sizes = params.getSupportedPictureSizes();
Camera.Size size = sizes.get(0);
for(int i=0;i<sizes.size();i++)
{
    if(sizes.get(i).width > size.width)
        size = sizes.get(i);
}
params.setPictureSize(size.width, size.height); 
```

# c++ - 在 gcc 中强制执行 C++98 标准

> ID：12606713
> 
> 赞同：10
> 
> 时间：2012-09-26T16:56:21.850
> 
> 标签：c++, gcc, c++98

我有一个应该用符合 C++98 的代码编写的学校作业。如何强制`g++`只接受遵循此标准的代码？会`-std=c++98`做的伎俩还是我需要添加额外的标志？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-26T16:59:17.613

根据[GCC 关于标准的文档](http://gcc.gnu.org/onlinedocs/gcc/Standards.html)：

> 最初的 ISO C++ 标准作为 ISO 标准 (ISO/IEC 14882:1998) 发布，并由 2003 年发布的技术勘误表 (ISO/IEC 14882:2003) 进行了修订。这些标准分别称为 C++98 和 C++03。GCC 实现了 C++98 的大部分内容（导出是一个明显的例外）和 C++03 中的大部分更改。要在 GCC 中选择此标准，请使用选项 -ansi、-std=c++98 或 -std=c++03 之一；要获得标准所需的所有诊断，您还应该指定 -pedantic（或 -pedantic-errors，如果您希望它们是错误而不是警告）。

因此，您应该指定`-std=c++98 -pedantic`是否真的要确保符合标准。

# javascript - 准备数组以进行闭包排序

> ID：12606722
> 
> 赞同：2
> 
> 时间：2012-09-26T16:56:57.893
> 
> 标签：javascript, sorting, unicode, collation, alphabet

根据我的研究和谷歌搜索，Javascript 似乎缺乏对区域感知排序和字符串比较的支持。有[`localeCompare()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/localeCompare)，但[据报道浏览器特定的差异](http://code.google.com/p/v8/issues/detail?id=459)和不可能明确设置使用哪种语言环境（操作系统语言环境并不总是想要的）。有一些[打算在 ECMAScript 中添加排序规则支持](http://norbertlindenberg.com/2012/06/ecmascript-internationalization-api/index.html)，但在此之前，我们是靠自己的。并且取决于结果在浏览器之间的一致性，可能我们永远都是靠自己的:(。

我有以下代码，它使数组按字母排序。它考虑到了速度，这些想法来自[https://stackoverflow.com/a/11598969/1691517](https://stackoverflow.com/a/11598969/1691517)，我对此进行了一些速度改进。

在这个例子中，单词数组有 13 个成员，排序函数被调用了 34 次。我想替换 words-array 中的一些字母（你不必知道做了哪些替换，因为这不是这个问题的重点）。如果我在排序函数（以 开头的那个`return function(a, b)`）中进行这些替换，则代码效率低下，因为每个数组成员多次进行替换。当然，我可以在这个闭包之外进行这些替换，我的意思是在 line 之前`words.sort(sortbyalphabet_timo);`，但这不是我想要的。

**问题 1：**是否可以修改 "PREPARATION STARTS" 和 "PREPARATION ENDS" 行之间的单词数组，以便排序函数使用修改后的单词数组？

**问题 2：**是否可以向闭包输入参数，以便 PREPARATION STARTS 和 PREPARATION ENDS 之间的代码可以使用它们？我试过这个没有成功：

```
var caseinsensitive = true;
words.sort( sortbyalphabet_timo(caseinsensitive) ); 
```

最后是代码示例，可以运行的示例在[http://jsfiddle.net/3E7wb/](http://jsfiddle.net/3E7wb/)中：

```
var sortbyalphabet_timo = (function() {
  // PREPARATION STARTS
  var i, alphabet = "-0123456789AaÀàÁáÂâÃãÄäBbCcÇçDdEeÈèÉéÊêËëFfGgHhIiÌìÍíÎîÏïJjKkLlMmNnÑñOoÒòÓóÔôÕõÖöPpQqRrSsTtUuÙùÚúÛûÜüVvWwXxYyÝýŸÿZz",
  index = {};

  i = alphabet.length;
  while (i--) index[alphabet.charCodeAt(i)] = i;
  // PREPARATION ENDS

  return function(a, b) {
    var i, len, diff;

    if (typeof a === "string" && typeof b === "string") {
      (a.length > b.length) ? len = a.length : len = b.length;
      for (i = 0; i < len; i++) {
        diff = index[a.charCodeAt(i)] - index[b.charCodeAt(i)];

        if (diff !== 0) {
          return diff;
        }
      }
      // sort the shorter first
      return a.length - b.length;
    } else {
      return 0;
    }
  };
})();

var words = ['tauschen', '66', '55', '33', 'täuschen', 'andern', 'ändern', 'Ast', 'Äste', 'dosen', 'dösen', 'Donaudam-0', 'Donaudam-1'];
$('#orig').html(words.toString());
words.sort(sortbyalphabet_timo);
$('#sorted').html(words.toString());` 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T19:34:51.297

> 是否可以修改“PREPARATION STARTS”和“PREPARATION ENDS”行之间的单词数组，以便排序函数使用修改后的单词数组？

不，不是。您无权访问数组本身，您的函数仅构建稍后`.sort`在数组上调用时使用的比较函数。如果您需要更改数组，则需要编写一个将其作为参数的函数；例如，您可以在`Array.prototype`. 它看起来像

```
function mysort(arr) {
    // Preparation
    // declaration of compare function
    // OR execution of closure to get the compare function
    arr.sort(comparefn);
    return arr;
} 
```

> 是否可以向闭包输入参数，以便 PREPARATION STARTS 和 PREPARATION ENDS 之间的代码可以使用它们？

是的，当然 - 这就是使用闭包的原因 :-) 但是，您不能使用`sortbyalphabet_timo(caseinsensitive)`当前代码。您拥有的闭包会立即被调用（称为 IIFE）并返回比较函数，您可以像在演示中那样将其传递给 sort。

如果你想`sortbyalphabet_timo`成为闭包而不是结果，你必须删除它后面的括号。你也可以在那里使用参数，它们可以在整个闭包范围内访问（包括 comparefunction）：

```
var sortbyalphabet_timo_closure = function(caseinsensitive) {
    // Preparation, potentially using the arguments
    // Declaration of compare function, potentially using the arguments
    return comparefn;
}
// then use
words.sort(sortbyalphabet_timo_closure(true)); 
```

目前，您正在这样做：

```
var sortbyalphabet_timo_closure = function(/*having no arguments*/) {
    // Preparation, potentially using the arguments
    // Declaration of compare function, potentially using the arguments
    return comparefn;
}
var sortbyalphabet_timo = sortbyalphabet_timo_closure();
// then use
words.sort(sortbyalphabet_timo); 
```

…如果您需要多次排序，它只会缓存执行闭包的结果。

# glassfish-3 - Derby 不允许我重新创建数据库

> ID：12606726
> 
> 赞同：1
> 
> 时间：2012-09-26T16:57:23.893
> 
> 标签：glassfish-3, derby

我正在 Glassfish 下开发一个 JSF/JPA 应用程序，它使用 Derby (JavaDB) 作为它的默认数据库。事实证明，持久性单元的“DROP AND CREATE”策略不能可靠地工作，所以我已经开始删除数据库，然后在我更改架构时重新创建它。

或者至少我正在努力。如果我删除数据库，它不会让我创建一个与已删除数据库相同时间的“新”数据库。它也不会让我打开旧的。

我现在的工作只是创建一个具有新名称的数据库并使用它（每次都必须编辑 glassfish 资源 xml 文件），但我想知道发生了什么。还有其他人有这个问题和/或知道如何解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T20:31:22.490

我不是 100% 确定我理解这个问题的病理是什么，但我有一个解决方法。如果有人可以向 Netbeans 社区提交错误报告或给我一个链接来做这件事，那就太好了。

该问题是在 MacOS 版本的 NetBeans 7.2 上产生的，GlassFish 3.1 服务器在其管理下。当您启动服务器以运行您的应用程序时，它会自动启动 Derby（Java DB）。但是，当您停止 GlassFish 服务器甚至退出 Netbeans 时，Derby 安装将继续运行。

当您再次启动 NetBeans & GlassFish 时，您会注意到当它尝试启动 Derby 服务器时，它会抱怨端口 1527 已在使用中。通常这不是问题，因为应用程序将继续运行并通过它保持打开的端口与先前启动的 Derby 进程通信。但是，我怀疑 Netbeans 菜单系统用于删除和创建数据库的通信路径不使用此数据路径，因此尝试对由进程保持打开的数据结构执行删除/创建操作它不是在交流。因此锁定和失败。

解决方法是在后台杀死 Derby 进程，然后执行删除/创建操作，它工作正常。在 MacOS 或 Linux 上，打开命令窗口并执行

```
ps axe | grep -i derby 
```

你会发现一个运行 Derby 的 java JVM。只需复制进程 ID 并执行

```
kill <pid> 
```

（-9 似乎不是必需的）并再次执行 ps 命令，您应该会看到该过程已消失。Derby 将在下次需要时由 Netbeans 启动。

# jquery - 在 jQuery 中删除所有行后，未添加新行

> ID：12606728
> 
> 赞同：1
> 
> 时间：2012-09-26T16:57:27.113
> 
> 标签：jquery, html, jquery-selectors

我在表格中有一个表格。在该表中，我有输入字段的行。我有两个选项用于删除行和添加行。在添加行中，当用户单击新行时，将添加新行，当用户单击删除行时，将删除最后一行。所有这一切都很好。但是我有一个问题，假设我点击了删除行选项，最后一行将被删除，这样所有行都被删除了。现在再次单击添加行时，它不会添加新行。那么有人可以解决这个问题吗？这是完整的代码

```
<!DOCTYPE HTML>
<html lang="en-IN">
<head>
  <meta charset="UTF-8">
  <title></title>
</head>
  <script type="text/javascript" src="jquery1.7.2.js"></script>
<body>
<style type="text/css">
  table td {
    border: 1px solid #666;
  }
</style>
  <script type="text/javascript">
  jQuery(document).ready(function() {
    jQuery("#add-line").click(function() {
      var row = jQuery('.form-fields tbody>tr:last').clone(true);
      row.find("input:text").val("");
      row.insertAfter('.form-fields tbody>tr:last');
      return false;
    });
    jQuery('#remove-row').live('click',function(event){
      jQuery(this).parent().parent().remove();
    });
  });
</script>

  <div id="form">
  <table id="form-headings">
    <tr>
      <td width="15%">Remove Rows</td>
      <td width="15%">Product</td>
      <td width="16%">Description</td>
      <td width="13%">Unit Cost</td>
      <td width="14%">Quantity</td>
      <td width="12%">Discount</td>
      <td width="14%">Total</td>
    </tr>
  </table>
  <div class="row">
  <div class="form-fields">
    <table>
      <tr>
        <td><input type="button" id="remove-row" value="Remove Row" /></td>
        <td><input type="text" id="form_product" size="5px"/></td>
        <td><input type="text" id="form_description" size="5px"/></td>
        <td><input type="text" id="form_unit_cost" size="5px"/></td>
        <td><input type="text" id="form_quantity" size="5px"/></td>
        <td><input type="text" id="form_discount" size="5px"/></td>
        <td><input type="text" id="form_total" size="5px"/></td>
      </tr>
    </table>
  </div>
  </div>
  <input type="button" id="add-line" value="Add Line" />
  </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T17:11:46.353

那是因为当您删除表中的最后一行时，您没有能够克隆的 tr。

在代码中，您正在克隆然后将其附加到表中..

**更新代码**

你的这部分代码也是错误的

```
var row jQuery('.form-fields tbody>tr:last').clone(true);
row.insertAfter('.form-fields tbody>tr:last'); 
```

因为一旦最后一行被删除，你就不会找到 tr>last .. 它会返回 false .. 所以尽量避免它..

您可以创建一个包含此行结构的虚拟行并从那里克隆它..

我创建了一个 .prototype 类来保存该行..克隆它并插入它..

检查[小提琴](http://jsfiddle.net/sushanth009/74p5v/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T17:12:08.880

当您单击该`#add-line`按钮时，它会克隆表中的最后一行并将其插入到表的末尾。这在您删除所有行后不起作用，因为**没有要克隆的最后一行**（它不存在）。此外，您将在最后一行之后插入克隆，这又不存在，因此它不会将其插入任何地方。

我建议使用 jQuery**创建一个新行，根据需要分配属性，然后将其附加到您的`tbody`**.

像这样的东西应该工作：

```
var row =
    jQuery('<tr/>')
    .append(jQuery('<td/>')
        .append('<input/>', {
            type: text,
            ...
        })
    .append(...)
    ...
    .appendTo('.form-fields tbody')
; 
```

另一种选择是**创建一个示例行，您可以创建一个克隆，然后将其附加到您的`tbody`**. 您可以使用 标记在您的标记中包含示例行`display: none`，或者您可以创建它并使其在您的 JavaScript 中可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T17:12:57.443

首先，没有可以克隆的行。您可以通过动态创建它或在隐藏的 div 中保留一行并克隆该 div 来防止这种情况发生。

然后你告诉 JQuery 在最后一个 TR 之后插入，并且没有剩下的 TR。将其更改为附加到表中：`$('.form-fields tbody').append(row);`

# ios - UIWebView 和分析/跟踪噩梦

> ID：12606730
> 
> 赞同：0
> 
> 时间：2012-09-26T16:57:34.703
> 
> 标签：ios, html, uiwebview, google-analytics, metrics

我正在构建简单的 HTML5 演示文稿，这些演示文稿将通过一个 iPad 应用程序提供服务，该应用程序通过 UIWebView 推送这些本地 html5 文件。作为一名开发人员，我在每个演示文稿中只限于使用我自己的 HTML5 代码。我无法访问这些演示文稿所在的平台或应用程序。

我已经实施了谷歌分析。不工作。我已经实现了 Localytics。不工作。我尝试过其他许多跟踪平台。他们不工作。当我将文件上传到 Web 服务器然后访问它并单击时，相同的代码可以工作。相同的代码在 iPad 上不起作用。UIWebView 正在扼杀这些用于度量/跟踪的 Javascript 库。

任何人都曾在通过使用 UIWebView 的应用程序提供的本地 HTML/HTML5 演示文稿中使用任何指标/跟踪？我正在寻找某种解决方案。非常感谢您的时间。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T17:28:02.917

Google Analytics 仅接受来自您为广告系列配置的域的请求。我所做的是在我的域上创建一个秘密页面，并在 html 中放置一个加载该页面的 iframe。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T14:39:02.327

你能详细说明“不起作用”吗？我在 UIWebView 中同时使用 Google Analytics 和 Omniture，并且都可以正常工作。

听起来您正在跟踪事件，而不仅仅是页面浏览量。也就是说，您正在跟踪人们何时点击事物。可能发生的一件事是应用程序正在“捕获”这些事件。当其中的应用程序执行某些操作时，UIWebViews 会收到通知，因此它们可以帮助这些应用程序获得“原生”体验。这包括诸如链接处理之类的事情，例如，允许应用程序捕获 Twitter 意图，并将其发送到实际的 Twitter 应用程序，而不是将其保存在 HTML 中。

从您的描述中不清楚这是否是问题 - 但如果是，如果您想继续使用链接标签，则需要与应用程序开发人员合作。没有选择 - 你不能阻止 UIWebView 被通知，如果它对事件做了什么，你将无法取回它。

如果所有这些都是正确的，请尝试将元素更改为标签以外的其他内容。例如，DIV 或 LI 不会触发此行为。您必须在您的应用程序中做更多的工作来模拟“链接跟踪”工作流程。像这样的东西：

```
$('.tappable-item').click(function(e) {
  e.preventDefault();

  // Fire the analytics event

  // Possibly wait 250ms or so to let the event get recorded

  window.location.href = $(this).attr('data-href');
} 
```

# iphone - 'NSInvalidArgumentException' / '-[AppDelegate fieldChanged:]：无法识别的选择器发送到实例

> ID：12606731
> 
> 赞同：0
> 
> 时间：2012-09-26T16:57:41.373
> 
> 标签：iphone, objective-c, unrecognized-selector

当我使用此代码时，应用程序以 NSInvalidArgumentException 终止，但我不知道为什么：

在我的`FieldViewController.m`我有：

```
-(IBAction)fieldEntered:(NSString*)sender {
[self.temp resignFirstResponder];
NSString *setFieldEntered;
setFieldEntered = temp.text;
fieldTemp = setFieldEntered;
[(EditViewController *)[[UIApplication sharedApplication] delegate] fieldChanged:(id)sender];

[self dismissModalViewControllerAnimated:YES]; 
} 
```

它在线上终止`[(EditViewController *)[[UIApplication sharedApplication] delegate] fieldChanged:(id)sender];`。

在我的 EditViewController.h 我有 -(void)fieldChanged:(id)sender; 在我的 EditViewController.m 文件中，我有：

```
-(void)fieldChanged:(id)sender {
    [fieldArray insertObject:[FieldViewController fieldEntered] atIndex:[fieldArray count]+1];
} 
```

请帮我解决这个问题。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T17:01:58.877

从错误中可以看出，UIApplication 的委托设置为名为 AppDelegate 的类的实例，而您将其视为名为 EditViewController 的不同类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T17:04:38.193

那没有意义。可能是你忘了提到控制器。应该是这样的：

```
[[[UIApplication sharedApplication] delegate].editViewController fieldChanged:sender]; 
```

# php - 使用 xampp 连接到 mySQL

> ID：12606732
> 
> 赞同：1
> 
> 时间：2012-09-26T16:57:44.870
> 
> 标签：php, mysql, xampp

我在 macbook 上使用 xampp 控件并尝试连接到“localhost/phpmyadmin”。我有 apache 和 mySQL 都在运行，但我得到一个错误

```
#1 - 无法创建/写入文件'/var/folders/kb/6g_npz7s1511w39k7v224gq80000gn/T/#sql4e6_1_2.MYI'（错误代码：13）
```

关于这可能是什么或我如何连接的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T17:51:43.980

通常你会得到那个错误，因为 MySQL 用来写入临时文件的目录不是 mysql 用户可写的；通常该目录将是`/var/tmp`或类似的。尝试用 启动 mysql ，`--tmp-dir=/var/tmp`看看它是否仍然抱怨。请参阅[http://dev.mysql.com/doc/refman/5.0/en/server-options.html#option_mysqld_tmpdir](http://dev.mysql.com/doc/refman/5.0/en/server-options.html#option_mysqld_tmpdir)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T08:31:58.777

检查 apache 的端口 .... 通过选择 checkport ... 并在浏览器中将 url 设置为：localhost:(port number)/phpmyadmin

# c - 更优雅的多位移位解决方案

> ID：12606743
> 
> 赞同：2
> 
> 时间：2012-09-26T16:58:17.463
> 
> 标签：c, bit-manipulation

让我们获取一个位掩码状态字节数组：

```
char status[10]; 
```

现在，假设我们要从每个状态字节中取出第 3 位并将它们放入一个 int 中，其中 int 的 LSB 是 status[0] bit 3，接下来是 status[1] bit 3，等等。

```
int foobits = 0;
for( i = 0; i < 10; i++ )
{
    foobits |= (( status[i] & 0x04 ) >> 2) << i;
} 
```

我的问题是：有没有另一种方法来完成这个只涉及一个班次？

编辑：我正在尝试使用 foobits 来包含 status[i] bit #3s 的位数组。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T18:49:36.907

你可以这样做

```
int foobits = 0;
for( i = 0; i < 10; i++ )
{
    foobits |= (status[i] & 0x04) << i;
}
foobits >>= 2; 
```

但为什么要打扰？

“过早的优化是万恶之源。” ——唐纳德·克努斯

# asp.net - 在 ASP.Net 中报告 - 代码还是转换？

> ID：12606750
> 
> 赞同：1
> 
> 时间：2012-09-26T16:58:46.603
> 
> 标签：asp.net, xml, xslt, report

所以我必须编写一个 HTML 报告，从各种 XML 源中提取信息。我可以选择使用 XSLT 生成报告，或者只是通过将 XML 序列化为 C# 对象并使用这些对象填写 aspx 页面中的信息，将其写入 ASPX 中。

哪个替代方案在开发时间和性能方面会更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T18:08:58.990

对我来说，很大一部分决定是 XML 源的结构是否会经常更改，或者我是否需要添加/删除 XML 源。使用 XSLT，您只需进行更改而无需重新编译您的代码。

# jquery - 使用 jquery 换出 div 的内容

> ID：12606758
> 
> 赞同：0
> 
> 时间：2012-09-26T16:59:16.950
> 
> 标签：jquery, html

我有这段html：

```
<div id="storeBtn">
    <a href="http://itunes.apple.com/artist" target="itunes_store" class="button">Download on iTunes</a>
</div> 
```

如果我检测到 Android，我想将其更改为：

```
<div id="storeBtn">
    <a href="http://amazon.com/artist" class="button">Download on Amazon</a>
</div> 
```

这是我的尝试：

```
var ua = navigator.userAgent.toLowerCase();
var isAndroid = ua.indexOf("android") > -1; //&& ua.indexOf("mobile");
if(isAndroid) {
$("#storeBtn").html("<a href='http://amazon.com/artist' class='button'>Download on Amazon</a>");

} 
```

但没有任何改变。我还尝试了 replaceWith() 而不是 html()。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T17:02:10.673

这段代码在执行前需要等待 Dom 准备好：

```
$(function() {
    var ua = navigator.userAgent.toLowerCase(); 
    var isAndroid = ua.indexOf("android") > -1; //&& ua.indexOf("mobile"); 
    if(isAndroid) { 
        $("#storeBtn").html("<a href='http://amazon.com/artist' class='button'>Download on Amazon</a>"); 

    } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T17:26:16.200

不要将代码放在头部，而是放在正文末尾的脚本元素中。

```
...

<script>
var ua = navigator.userAgent.toLowerCase();
var isAndroid = ua.indexOf("android") > -1; //&& ua.indexOf("mobile");
if(isAndroid) {
    $("#storeBtn").html("<a href='http://amazon.com/artist' class='button'>Download on Amazon</a>");
}
</script>
</body>
</html> 
```

当您的代码位于头部时，它会在将您的 div 添加到 DOM 之前执行。

# powershell - Get-ChildItem 与 CreationTime 而不是 LastWriteTime？

> ID：12606761
> 
> 赞同：9
> 
> 时间：2012-09-26T16:59:22.030
> 
> 标签：powershell

如果你使用`Get-ChildItem`你会得到类似的东西

```
Mode                LastWriteTime     Length Name
----                -------------     ------ ----
d----          3/1/2006   9:03 AM            Bluetooth Software
d---s         5/10/2006   8:55 AM            Cookies
d----          5/9/2006   2:09 PM            Desktop 
```

没关系。我现在只想将**LastWriteTime**输出更改为**CreationTime**。其他一切都应该相同。有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T17:01:46.567

您可以使用`Select-Object`或任何`Format-*`cmdlet选择它

```
Get-ChildItem | Select-Object Mode,CreationTime,Length,Name 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-26T20:24:04.490

对于显示列的一次性更改，管道连接到`select`或`Format-Table`是最简单的。如果你想让它成为一个持久的改变，你需要处理控制 powershell 如何显示文件系统对象的格式文件。

不建议编辑现有格式文件（可能位于`$env:SystemRoot\system32\WindowsPowershell\v1.0\FileSystem.format.ps1xml`），因为该文件在底部有一个签名块。更改文件内容将使签名无效，这可能会导致问题。

相反，您可以定义自己的格式文件，该文件将覆盖默认格式文件。将以下文件另存为`FileFormat.format.ps1xml`并运行

`Update-FormatData -Prepend c:\FileFormat.format.ps1xml`

默认情况下，`CreationTime`将显示，而不是`LastWriteTime`.

格式文件内容（从真实格式文件复制，只是更改了相关位）：

```
<Configuration>
    <SelectionSets>
        <SelectionSet>
            <Name>FileSystemTypes</Name>
            <Types>
                <TypeName>System.IO.DirectoryInfo</TypeName>
                <TypeName>System.IO.FileInfo</TypeName>
            </Types>
        </SelectionSet>
    </SelectionSets>
    <ViewDefinitions>
       <View>
            <Name>children</Name>
            <ViewSelectedBy>
                <SelectionSetName>FileSystemTypes</SelectionSetName>
            </ViewSelectedBy>
            <GroupBy>
                <PropertyName>PSParentPath</PropertyName> 
                <CustomControlName>FileSystemTypes-GroupingFormat</CustomControlName>  
            </GroupBy>
            <TableControl>
                <TableHeaders>
                   <TableColumnHeader>
                      <Label>Mode</Label>
                      <Width>7</Width>
                      <Alignment>left</Alignment>
                   </TableColumnHeader>
                    <TableColumnHeader>
                        <Label>CreationTime</Label>
                        <Width>25</Width>
                        <Alignment>right</Alignment>
                    </TableColumnHeader>
                    <TableColumnHeader>
                        <Label>Length</Label>
                        <Width>10</Width>
                        <Alignment>right</Alignment>
                    </TableColumnHeader>
                    <TableColumnHeader/>
                </TableHeaders>
                <TableRowEntries>
                    <TableRowEntry>
                        <Wrap/>
                        <TableColumnItems>
                            <TableColumnItem>
                                <PropertyName>Mode</PropertyName>
                            </TableColumnItem>
                            <TableColumnItem>
                                <ScriptBlock>
                                    [String]::Format("{0,10}  {1,8}", $_.CreationTime.ToString("d"), $_.CreationTime.ToString("t"))
                                </ScriptBlock>
                            </TableColumnItem>
                            <TableColumnItem>
                            <PropertyName>Length</PropertyName>
                            </TableColumnItem>
                            <TableColumnItem>
                                <PropertyName>Name</PropertyName>
                            </TableColumnItem>
                        </TableColumnItems>
                    </TableRowEntry>
                </TableRowEntries>
            </TableControl>
        </View>
    </ViewDefinitions>
</Configuration> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-26T17:01:37.567

如果您的意思是要显示属性 CreationTime 而不是 LastWriteTime，则可以将 Get-ChildItem 的输出通过管道传输到 Select-Object 并指定要选择的属性：

```
Get-ChildItem | Select Mode, CreationTime, Length, Name 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-27T04:14:18.997

在 V3 中，您可以使用动态类型数据：

```
 PS III> # UNTESTED: if work...you can paste this in your profile
    PS III>
    PS III> Update-TypeData -TypeName System.IO.FileInfo,System.IO.DirectoryInfo -MemberName DFPR DefaultDisplayPropertySet Mode,CreationTime,Length,Name 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-13T22:02:10.173

请试试
`> get-childitem | sort-object -property name, creationtime, lastwritetime`

您将在 PowerShell 中看到如下所示：

```
 Directory: C:\project\CNN I\Maya                             

Mode                 LastWriteTime         Length Name 
----                 -------------         ------ ---- 
-a----         1/11/2021  11:36 PM          32187 ocean wake foam.JPG                                                   
-a----          1/6/2021  12:28 AM         121100 ocean_clean.ma                                                        
-a----          1/4/2021   3:59 PM         122199 ocean_clean_1.ma 
```

您看不到创建日期，但它实际上是按名称和创建日期 ( `creationtime`) 排序，然后是修改日期 ( `lastwritetime`)。如果您想验证这一点，请尝试`> get-childitem | sort-object lastwritetime`。它将按修改日期列出文件。

# android - 记录用户在部署的 Android 应用程序中遇到的错误

> ID：12606763
> 
> 赞同：0
> 
> 时间：2012-09-26T16:59:29.950
> 
> 标签：android, debugging

当我们的一个应用程序在用户设备上崩溃时，是否有办法得到通知？

作为一名 Java Swing 开发人员，我发现定义一个自定义事件队列来捕获我的应用程序中发生的每个未捕获的异常非常非常有用。准确地说，一旦异常被捕获，应用程序会向支持团队发送一封电子邮件，其中包含异常跟踪（杀死信息使应用程序越来越可靠）。这是我使用的代码：

```
EventQueue queue = Toolkit.getDefaultToolkit().getSystemEventQueue();
queue.push(new EventQueue() {
  @Override
  protected void dispatchEvent(AWTEvent event) {
  try {
    super.dispatchEvent(event);
  } catch (Throwable t) {
    processException(t); // Basically, that method send the email ...
  }
} 
```

我在 Android 应用程序中寻找一种方法来做同样的事情……但没有发现任何真正有效的方法。这是我最后一次尝试：

```
import java.lang.Thread.UncaughtExceptionHandler;
import android.util.Log;

public class ErrorCatcher implements UncaughtExceptionHandler {
    private static UncaughtExceptionHandler handler;

    public static void install() {
        final UncaughtExceptionHandler handler = Thread.currentThread().getUncaughtExceptionHandler();
        if (handler instanceof ErrorCatcher) return;
        Thread.currentThread().setUncaughtExceptionHandler(new ErrorCatcher());
    }

    public void uncaughtException(Thread thread, Throwable t) {
        processException(t);
        handler.uncaughtException(thread, ex);
    }
} 
```

这效率不高，因为应用程序不再退出并停留在“僵尸”状态，这让用户非常困惑。

你有解决方案吗 ？

# python - 无法正确识别字母

> ID：12606764
> 
> 赞同：0
> 
> 时间：2012-09-26T16:59:31.680
> 
> 标签：python, image, algorithm, pixel

我想创建一个小脚本，它将字母与文档图像分开。到目前为止，我有一张两个字母的图片，以及一组比较每个像素的函数，如果前面的字母中没有像素，则创建一个字母，否则将像素添加到字母中。我已经尝试调试了一个小时，但不知道可能出了什么问题。这是我的代码的一部分：

```
def findChars():
    im = Image.open("img-190.gif")
    letters = []
    for x in range(im.size[0]):
        for y in range(im.size[1]):
            px = im.getpixel((x,y))
            if(px == 0):#black
                found = False
                for letter in letters:
                    for pixel in letter.pix:
                        if(isNextTo((x,y),pixel) == True):
                            found = True
                            letter.pix +=((x,y),)
                            #print len(letter.pix)
                            break
                if(found == False):
                    letters.append(Letter((x,y)))
                    print "Appended"

    print len(letters) 
```

我正在实施的算法：因为我可以假设所有字母都是分开的，所以我可以遍历所有像素并将它们分组为字母。我检查一个像素是否有任何已经在一个字母组中的邻居。如果答案是肯定的，我将它添加到同一个组，如果不是，我创建另一个。最后，我有一组独立的像素。

问题是它没有正确添加它们。图片上有两个字母，它找到49组（字母）。

这是我的其他功能代码：

```
def isNextTo(spix,qpix):
    DIST = 1
    if(qpix[0]< spix[0]-DIST or qpix[0]> spix[0]+DIST):
        return False
    if(qpix[1]< spix[1]-DIST or qpix[1]> spix[1]+DIST):
        return False
    return True 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T17:41:28.413

前段时间，我实现了一个算法，用于在图像中查找连接的形状，更多的是出于兴趣和练习 Python，这在当时对我来说是新的。基本思想是这样的：

*   扫描图像的所有行。在每一行中，生成一个元组列表，这些元组标记共享属性（颜色、亮度等）的连续像素。每个元组看起来像`(start x position, end x position, y position)`.
*   之后，比较所有这些元组并形成相关元组的组。如果两个元组的 y 坐标相差 1 并且它们的 x 范围重叠，则将它们移动到同一组。
*   重复将元组合并到组中，直到找不到*相交*且位于不同组中的元组（显然，如果发现这一点，则必须合并组）。您找到的组是您的对象/字母/任何/单独的区域。

我不认为这是一个复杂的策略，而且我确信这个算法已经完成了无数次，甚至可能在 Wikipedia 上有一个名称和条目。它解决的基本问题是，当您通过不同行中的其他组/像素范围检测到连接时，两组看似无关的像素范围可以形成一个组。一个很好的例子就是数字`2`。起初，该算法可以检测 8 个组，每行一个。然后它将通过中间部分将这些组合并为越来越少的组，直到只剩下一个组。

# php - MySQL：如何将表 A 中的数据插入表 B 和 C 但保留 ID 号

> ID：12606767
> 
> 赞同：0
> 
> 时间：2012-09-26T16:59:40.763
> 
> 标签：php, mysql

让我们直接解决问题......我有这张表，名为 'phonenumber' ：

```
+-------------+
| phonenumber |
+-------------+
| 555-123456  |
| 555-999999  |
| 555-888888  |
+-------------+ 
```

现在，我想通过将消息插入到名为“发件箱”的表中来向这些号码发送短信：

```
+------+----------------+---------------------------------------------+
| ID   | phonenumber    | message                                     |
+------+----------------+---------------------------------------------+
|                        ......                                       |
| 321  | 555-123456     | part 1 : lorem ipsum dolor sit amet         |
| 322  | 555-999999     | part 1 : lorem ipsum dolor sit amet         |
| 323  | 555-888888     | part 1 : lorem ipsum dolor sit amet         |
+------+----------------+---------------------------------------------+ 
```

很容易做到这一点。这个 SQL 可以完成这项工作：

```
INSERT INTO outbox (phonenumber, message)
SELECT phonenumber, '$SMSMessage' as message
FROM phonenumber
WHERE purchasedate BETWEEN 2012-01-01 AND 2012-01-31; 
```

当短信超过 160 个字符时，问题就出现了。它需要被拆分，在这种情况下，拆分消息的第二部分必须存储在名为“outbox_multipart”的其他表中，并保留“发件箱”中的 ID 号，以便该表如下所示：

```
+------+----------------+----------+----------------------------------+
| ID   | phonenumber    | outboxID | message                          |
+------+----------------+---------------------------------------------+
|                      ......                                         |
| 1025 | 555-123456     | 321      | part 2 : hello there!            |
| 1026 | 555-999999     | 322      | part 2 : hello there!            |
| 1027 | 555-888888     | 323      | part 2 : hello there!            |
+------+----------------+---------------------------------------------+ 
```

请注意：outbox.ID 与 outbox_multipart.outboxID 相关。

我有这个 PHP 循环来插入文本消息：

```
foreach ($CutMessage as $index => $SMSMessage) 
{
if ($index == 0) {
**INSERT FIRST PART OF MESSAGE TO OUTBOX TABLE**
}else{
**INSERT SECOND / OTHER PART OF MESSAGE TO OUTBOX_MULTIPART TABLE**
}       
} 
```

如何用 PHP 正确地做到这一点？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T17:32:43.097

用于`mysqli_insert_id()`获取最后一条`INSERT`语句中分配的 ID。

# google-drive-api - 在嵌入式系统中验证应用程序 - Google Drive SDK

> ID：12606770
> 
> 赞同：3
> 
> 时间：2012-09-26T16:59:47.517
> 
> 标签：google-drive-api

有没有办法在嵌入式系统中验证应用程序以使用 Google Drive API 而无需本机浏览器？

我正在寻找一种解决方案，让用户接受并使用 OAuth2.0 输入您的密码和用户名，无需浏览器交互......这可能吗？

我的应用程序是用 Java 代码构建的。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T09:50:16.773

我目前正在尝试这样做，但我认为这是不可能的，因为：

要在嵌入式设备中进行身份验证，您需要使用以下过程：

[https://developers.google.com/accounts/docs/OAuth2ForDevices](https://developers.google.com/accounts/docs/OAuth2ForDevices)

问题在于它只接受有限范围的范围，例如：

--https://www.googleapis.com/auth/userinfo.profile 工作正常

但是当您尝试使用以下范围时：--https://www.googleapis.com/auth/drive.*

你会得到 invalid_scope。

如果您找到解决方案，请告诉我，我的设备是嵌入式的，没有屏幕，并且无法用于类似的远程桌面，我也有同样的问题。

感谢您的任何反馈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T20:37:34.080

使用[OAuth 2 设备流程](https://developers.google.com/accounts/docs/OAuth2ForDevices)，该流程专为设备上没有浏览器的情况而设计。它允许用户在可以使用浏览器的单独、功能更强大的设备（手机/平板电脑/笔记本电脑）上完成登录和授权。

# django - 查看包含详细信息的不同模型实例的列表

> ID：12606771
> 
> 赞同：2
> 
> 时间：2012-09-26T16:59:50.577
> 
> 标签：django, django-templates, django-views

我有一个“Entry”模型，包含一个 GenericForeignKey：

```
class Entry(models.Model):
    content_type = models.ForeignKey(ContentType)
    object_id = models.PositiveIntegerField()
    content_object = generic.GenericForeignKey('content_type', 'object_id') 
```

以及“Note”和“File”等不同的内容模型：

```
class Note(models.Model):
    title = models.CharField(max_length=255)
    text = models.TextField()

class File(models.Model):
    title = models.CharField(max_length=255)
    file_field = models.FileField('File', upload_to='files')
    description = models.TextField(blank=True) 
```

如果它们被存储，则会自动创建一个新的“条目”，因此我可以通过以下方式列出所有内容：

```
Entry.objects.all() 
```

现在我正在寻找一种编写视图和模板的方法，它应该以任意顺序（例如按日期）列出所有条目及其详细信息。如何才能做到这一点？

是否可以将部分模板与特定模型相关联？模板如何知道如何在列表中显示特定实例？

整个而不是简化的 models.py 看起来像这样：

```
 from django.db.models.signals import post_save, pre_delete

import datetime

class Entry(models.Model):
    content_type = models.ForeignKey(ContentType)
    object_id = models.PositiveIntegerField()
    content_object = generic.GenericForeignKey('content_type', 'object_id')

    def title(self):
        return self.content_object.title

    def __unicode__(self):
        return self.title()

class DateModel(models.Model):
    """ A model for basic date awareness """
    modified_date = models.DateTimeField(blank=True, null=True)
    created_date = models.DateTimeField(blank=True)

    class Meta:
        abstract = True
        ordering = ['-created_date']

    def save(self, *args, **kwargs):
        if not self.pk:
            self.created_date = datetime.datetime.now()
        else:
                self.modified_date = datetime.datetime.now()
        return super(DateModel, self).save(*args, **kwargs)

class Tag(DateModel):
    name = models.CharField(max_length=51, unique=True)

    def __unicode__(self):
        return self.name

class Notebook(models.Model):
    name = models.CharField(max_length=50, unique=True)
    description = models.TextField(blank=True)

    def __unicode__(self):
        return self.name

class EntryModel(DateModel):
    """All Entry models are inherited from this abstract class"""
    title = models.CharField(max_length=255)
    notebook = models.ForeignKey(Notebook, blank=True, null=True)
    tags = models.ManyToManyField(Tag, blank=True, null=True)

    class Meta:
        abstract = True

    def __unicode__(self):
        return self.title

    ######## Begin: Entry Classes ########

class Memo(EntryModel):
    text = models.TextField()

    def save(self, *args, **kwargs):
        if self.title == '-' or self.title == '':
            if len(self.text) > 20:
                self.title = self.text[:17]+'...'
            else:
                self.title = self.text
        return super(EntryModel, self).save(*args, **kwargs)

class File(EntryModel):
    file_field = models.FileField('File', upload_to='files')
    description = models.TextField(blank=True)

    ######## End: Entry Classes ########

def create_entry(sender, **kwargs):
    """Handler for post_save signal to create new Entry"""
    if 'created' in kwargs:
        if kwargs['created']:
            instance = kwargs['instance']
            ctype = ContentType.objects.get_for_model(instance)
            entry = Entry.objects.get_or_create(
                content_type=ctype,
                object_id=instance.id)

def delete_entry(sender, **kwargs):
    """Handler for pre_delete signal to delete related Entry"""
    instance = kwargs['instance']
    ctype = ContentType.objects.get_for_model(instance)
    entry = Entry.objects.get(
        content_type=ctype,
        object_id=instance.id)
    entry.delete()

    # Connect handler to post_save signal
entry_classes = EntryModel.__subclasses__()
for cls in entry_classes:
    post_save.connect(create_entry, sender=cls)
    pre_delete.connect(delete_entry, sender=cls) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T17:16:22.437

正如您在评论中提到的，您的条目是注释或文件。因此，IMO 模型继承更适合您的用例。您的 models.py 看起来像这样：

来自 django.contrib.contenttypes.models 的 models.py 导入 ContentType

```
class Entry(models.Model):
    title = models.CharField(max_length=255)
    real_type = models.ForeignKey(ContentType, editable=False)
    created = models.DateTimeField(auto_now_add=True, editable=False, verbose_name='creation date')

    def save(self):
        if not self.id:
            self.real_type = self._get_real_type()
            self.created = datetime.today()
        self.modified = datetime.today()
        super(ListType, self).save()

    def _get_real_type(self):
        return ContentType.objects.get_for_model(type(self))

class Note(Entry):
    text = models.TextField()

class File(Entry):
    file_field = models.FileField('File', upload_to='files')
    description = models.TextField(blank=True) 
```

这意味着您可以在视图中执行以下操作：

```
Entry.objects.all().order_by('created')
#get the corresponding child
note = Note.objects.get(entry_ptr_id=parent.pk)
print note.text 
```

有关继承的详细信息，请参阅我的另[一篇文章。](https://stackoverflow.com/a/12495513/237690)

为了在模型中保存您条目的“真实类型”，我添加了一个 real_type 字段。[在这篇](https://stackoverflow.com/a/929982/237690)文章中已经提出了这种方法。

在模型中保存`real_type`内容类型后，您可以查询所有条目及其详细信息，而无需预先知道您是在处理 Notes 还是 Files。

```
 entries = Entry.objects.all().order_by('created')
 for entry in entries:
     #get the correct child model
     childModel = entry.real_type.model_class()
     #get the child
     child = childModel.objects.get(pk=entry.pk)

     if entry.real_type.model == "Note":
         #it s a note object
         print entry.text 
```

来自文档的注释：`model_class() returns the Python model class for this type of content.`

# sql - Oracle 触发器与 null 冲突

> ID：12606777
> 
> 赞同：0
> 
> 时间：2012-09-26T17:00:12.340
> 
> 标签：sql, oracle, triggers, null, sqlplus

首先也是最重要的，这是一个作业，所以大多数你想要建议的非常酷的预写功能，我都不会被允许使用。

我有几个表都有字段

```
creation_date
created_by
last_update_date
last_updated_by 
```

我需要编写一个触发器来填充这些以进行创建或更新。问题是，这些表的空值对我来说是个问题。例子：

```
CREATE TABLE parts
(
pno                NUMBER,
pname              VARCHAR2(50) NOT NULL,
qoh                NUMBER       NOT NULL,
price              NUMBER(5,2),
reorder_level      NUMBER(2),
creation_date      DATE         NOT NULL,
created_by         VARCHAR2(10) NOT NULL,
last_update_date   DATE         NOT NULL,
last_updated_by    VARCHAR2(10) NOT NULL,
CONSTRAINT parts_PK PRIMARY KEY (pno)) 
```

这些 NOT NULL 是给我的，我不允许更改它们。所以我很难概念化这个。

*   如果我的触发器在创建字段之前添加了这些值，则我无法在这些字段为空白的情况下执行 INSERT INTO，因为它们不是 NULL。
*   如果我的触发器在创建字段后添加这些值，我会收到编译错误 ORA-00903 和 00922。无效的表名和无效的选项。

我在想我的触发器看起来像

```
CREATE OR REPLACE TRIGGER pcreate
  BEFORE UPDATE on parts
  FOR EACH ROW
BEGIN
  UPDATE
    SET creation_date = SYSDATE;
    SET created_by = USER;
    SET last_update_date = SYSDATE;
    SET last_updated_by = USER;
END;
/

CREATE OR REPLACE TRIGGER pchange
  BEFORE UPDATE on parts
  FOR EACH ROW
BEGIN
  UPDATE
    SET last_update_date = SYSDATE;
    SET last_updated_by = USER;
END;
/
repeat for the other tables 
```

我可能被允许使用 UPSERT，但我真的不知道它是如何工作的。欢迎提出任何建议。我真的很想学习，所以任何其他建议都值得赞赏。

编辑：

我的不承认触发器的包如下。我需要调用包内的触发器吗？

```
CREATE OR REPLACE PACKAGE process_orders 
AS
  PROCEDURE add_order (p_cno IN NUMBER, p_eno IN NUMBER, p_received IN DATE);
  PROCEDURE add_order_details (p_ono IN NUMBER, p_pno IN NUMBER, p_qty IN NUMBER);
  PROCEDURE ship_order (p_ono IN NUMBER, p_sdate IN DATE);
  PROCEDURE delete_order (p_ono IN NUMBER);
  FUNCTION total_emp_sales (f_eno IN NUMBER) RETURN NUMBER;
END process_orders;
/

CREATE OR REPLACE PACKAGE BODY process_orders 
AS
  PROCEDURE add_order (p_cno IN NUMBER, p_eno IN NUMBER, p_received IN DATE) 
  IS
  ao_emsg       VARCHAR2(100);
  p_rec_today   DATE;
  BEGIN
    SELECT SYSDATE INTO p_rec_today FROM dual;
    IF p_received is null THEN
        INSERT INTO orders (ono, cno, eno, received)
        VALUES(order_number_seq.NEXTVAL,p_cno,p_eno,p_rec_today);
    ELSE
        INSERT INTO orders (ono, cno, eno, received)
    VALUES(order_number_seq.NEXTVAL,p_cno,p_eno,p_received);
    END IF;

  EXCEPTION
    WHEN OTHERS THEN
      ao_emsg := substr(SQLERRM,1,100);
      INSERT INTO orders_errors (ono,transaction_date,message)
      VALUES(order_number_seq.CURRVAL,SYSDATE,ao_emsg);
  END;
  --Etc. Procedures
END;
/ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T17:06:09.403

在您的触发器中，您只想修改`:new`记录。你的触发器看起来像

```
CREATE OR REPLACE TRIGGER parts_before_insert
  BEFORE INSERT on parts
  FOR EACH ROW
BEGIN
  :new.creation_date := SYSDATE;
  :new.created_by := USER;
  :new.last_update_date := SYSDATE;
  :new.last_updated_by := USER;
END; 
```

和

```
CREATE OR REPLACE TRIGGER parts_before_update
  BEFORE UPDATE on parts
  FOR EACH ROW
BEGIN
  :new.last_update_date := SYSDATE;
  :new.last_updated_by := USER;
END; 
```

在您的`INSERT`语句中，您将省略这四列并让触发器填充这些值。例如（显然，您的主键将来自诸如序列之类的东西，而不是硬编码）

```
SQL>  insert into parts( pno, pname, qoh, price, reorder_level )
  2     values( 1, 'Widget', 10, 100, 75 );

1 row created.

SQL> select *
  2    from parts;

       PNO PNAME                                                     QOH
---------- -------------------------------------------------- ----------
     PRICE REORDER_LEVEL CREATION_ CREATED_BY LAST_UPDA LAST_UPDAT
---------- ------------- --------- ---------- --------- ----------
         1 Widget                                                     10
       100            75 26-SEP-12 SCOTT      26-SEP-12 SCOTT 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T17:05:24.147

在您的情况下，不需要`UPDATE`在触发器中执行语句。只需使用 为列分配新值`:new`。

```
CREATE OR REPLACE TRIGGER pchange
  BEFORE UPDATE on parts
  FOR EACH ROW
BEGIN
  :new.last_update_date = SYSDATE;
  :new.last_updated_by = USER;
END; 
```

# php - 使用来自链接的 php 的 xml 解析器

> ID：12606778
> 
> 赞同：0
> 
> 时间：2012-09-26T17:00:22.120
> 
> 标签：php, xml

我在 PHP 中有以下代码

```
$link ="http://ws.audioscrobbler.com/2.0/?method=&user=xgayax" .
"&api_key=b25b959554ed76058ac220b7b2e0a026";
$xml = @simplexml_load_file($link);
$tracks = $xml->recenttracks->track;

for ($i = 0; $i < 3; $i++) {
    $playingnow = $tracks[$i]->attributes()->nowplaying;
    $name = $tracks[$i]->name;
    $artist = $tracks[$i]->artist;
    $url = $tracks[$i]->url;
    $date = $tracks[$i]->date;
    $img = $tracks[$i]->children();
    $img = $img->image[0];

    echo "<a href='" . $url . "' target='TOP'>";

    if ($nowplaying == "true") {
        echo "Now playing: ";
    }

    echo "<img src='" . $img . "' alt='album' />
    $artist . " - " . $trackname . " @ " . $date . "
    </a>
    ";
} 
```

我收到以下错误解析错误：语法错误，意外'@'，期待'，'或';' 在第 31 行这个问题的任何解决方案？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T18:08:26.703

您的最后几行有错误，正确的代码是：

```
 echo "<img src='" . $img . "' alt='album' />" . 
   //                                          ^^^ missing
   $artist . " - " . $trackname . " @ " . $date . "
    </a>
    "; 
```

# jquery - Jquery在菜单上添加和删除类

> ID：12606784
> 
> 赞同：1
> 
> 时间：2012-09-26T17:00:35.227
> 
> 标签：jquery

我是 jquery 的新手，我有这个 html 代码菜单：

```
<nav>
    <ul class="navtab">
        <li class='home selected'><a href='index.php'>Home</a></li>
        <li class='about'><a href='company.php'>About</a></li>
    </ul>
</nav> 
```

这是jQuery代码：

```
$(".navtab li.about").click(function(){
    $('.navtab li.home').removeClass('selected');
    $('.navtab li.about').addClass('selected');
}); 
```

这是我的CSS：

```
nav ul.navtab li.selected a{
    color: #fff;
    background-color: #575757;
} 
```

选择页面加载选项卡主页时。当我单击关于选项卡时，我想删除选项卡主页上选择的类并添加选项卡上选择的类。问题出在哪里？？

提前致谢。法比奥

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T17:02:43.807

使用`removeClass('home.selected')`而不是`removeClass('selected');`也`$('.navtab li.home')`将是`$('.navtab li.home.selected')`

**[现场演示](http://jsfiddle.net/KuES6/3/)**

```
$("nav li.about").click(function(){  
     $('nav li.home.selected').removeClass('home selected');     
     $('nav li.about').addClass('selected');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T17:09:35.067

如果您在客户端加载页面，请改为：

```
$(function(){

    $(".navtab>li").click(function(){
        $(this).addClass('selected').siblings().removeClass('selected');
    });

}); 
```

这在单击任何列表项时有效。

如果您在服务器端加载新页面，那么您需要设置所选的类服务器端。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T17:06:10.620

如果要突出显示所选部分，则必须在服务器端进行。

如果您**在单击链接时**弄乱了类客户端，页面将被重新加载并且 jQuery 回调将不起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T17:28:11.160

您可以使用 'data-type=""' 属性或仅使用名称属性来管理此菜单的开启状态：

```
<nav>
<ul class="navtab">
<li class='home selected' id="homepage" name="nav_item"><a href='#'>Home</a></li>
<li class='about' id="company" name="nav_item"><a href='#'>About</a></li>
</ul>
</nav>​ 
```

然后这里是 jQuery：

```
$("[name='nav_item']").click(function(){
$("[name='nav_item']").removeClass('selected');
$(this).addClass('selected');
});​ 
```

单击导航项时，jQuery 会删除“选定”类的所有实例，然后将“选定”类添加到单击的链接中。让我知道这是否对你有用...我在[这里](http://jsfiddle.net/PLjc9/)做了一个 jsFiddle 。

然后，您可以根据需要将这些 ID 用于其他用途。这似乎是一种更有效/更清洁的方式。

只要您不刷新页面，这将起作用...否则使用您的后端代码（PHP、JSP 等）来管理开启状态。

PHP 示例：

```
<?php
if (isset($_GET['page']) && $_GET['page'] == 'homepage'){
    $selected_link = 'class="selected"'; //set the class if page is homepage
} else $selected_link = ''; //empty, will not throw and error
?> 
```

然后你的链接：

```
<li class='home' id="homepage" <?php echo $selected_link;?>> 
```

# php - 从字符串中删除链接的图像

> ID：12606787
> 
> 赞同：0
> 
> 时间：2012-09-26T17:00:38.317
> 
> 标签：php, regex, html-parsing, preg-replace

我需要一些关于我正在开发的新功能的帮助。问题是我不知道如何解决它。

我有一个带有 HTML 代码的字符串，我想要做的是删除里面所有带有链接的图像：

```
$string = "html code html code **<a href=""><img src="" /></a>**"; 
```

我一直在考虑使用 preg_replace(); 但我不知道这怎么可能是模式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T17:04:02.777

尝试：

```
$result = preg_replace('/<a href="[^"]*">[^<]*<img src="[^"]*"[^>]*>[^<]*<\/a>/sim', '', $subject); 
```

# sql - 将数据从网站上传到 Azure 存储和 Azure SQL

> ID：12606788
> 
> 赞同：0
> 
> 时间：2012-09-26T17:00:43.627
> 
> 标签：sql, azure, storage

我要实现一个服务，这样用户可以将文件上传到 azure 存储，并将元数据存储在 azure sql 数据库中。

假设用户要上传 1gb 的数据，是否需要先发送到 web 服务，然后从服务发送到 Azure 存储？有没有办法启动上传，然后用户将数据直接发送到具有 azure 存储的服务器？

我想我读过类似的东西，但现在找不到，也不知道在谷歌上搜索什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T18:51:48.773

是的，这是可能的，但您需要使用可以与 REST API 对话的客户端技术，例如 Silverlight。Steve Marx 发表了一系列博客文章，解释如何利用 Silverlight 和 REST API 将文件上传到 Blob 存储（甚至是非常大的文件）：[从 Silverlight 上传 Windows Azure Blob – 第 3 部分：使用块 API 处理大文件](http://blog.smarx.com/posts/uploading-windows-azure-blobs-from-silverlight-part-3-handling-big-files-by-using-the-block-apis)。Silverlight 控件很容易集成到现有网站中。

# jquery - jquery动画到自动高度不起作用

> ID：12606791
> 
> 赞同：2
> 
> 时间：2012-09-26T17:01:09.703
> 
> 标签：jquery, height

更新小提琴：http: [//jsfiddle.net/zQLQV/](http://jsfiddle.net/zQLQV/)

我正在编写这个脚本来制作内容旋转器。首先，我让所有幻灯片获取它们的默认高度，然后将它们设置为 0 高度。在触发单击时（使用带幻灯片 ID 的 href），所有打开的幻灯片将变为高度 0，并且触发的幻灯片将动画到自动高度。

一切都按计划进行，不包括自动高度。所有幻灯片都保持在 0 高度，无论其中的内容量如何。唯一能见度是 850 的最小高度。

任何帮助，将不胜感激。

```
$(function() { 

    $(".slide").each(function() {
        slideHeight = $(this).height();
    });

    $(".slide").css({ "height": "0", "opacity": "0"});

    $(".side-nav ul li a").click(function(event) {
        event.preventDefault();
        currentHref = $(this).attr('href');
        $(".slide").stop().animate({"opacity": "0", "height": "0px", "min-height": "0px"}, 100);
        $(currentHref).stop().animate({"opacity":"1", "min-height": "850px", height: slideHeight + "px"}, 450);

    });                     

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T18:43:03.483

我相信你的问题在这里：

```
$(".slide").each(function() {
    slideHeight = $(this).height();
}); 
```

发生的事情是您的`slideHeight`变量仅设置为最后一张幻灯片的高度。如果您将最短的幻灯片移到列表中的最后一个位置，您会看到其他幻灯片的内容被截断。

我已经[更新了您的小提琴](http://jsfiddle.net/zQLQV/1/)以将每张幻灯片的高度存储在幻灯片本身的数据属性中。

**HTML：**

```
<div class="side-nav">
  <ul>
    <li><a href="#one-slide">1</a></li>
    <li><a href="#two-slide">2</a></li>
    <li><a href="#three-slide">3</a></li>
  </ul>
</div>

<div class="slide" id="one-slide">asdf<br>asdf<br>asdf<br>asdf<br></div>
<div class="slide" id="two-slide">asdf<br>asdf<br>asdf<br></div>
<div class="slide" id="three-slide">asdf<br>asdfasdf<br>asdfasdf<br>asdfasdf<br>asdfasdf<br>asdfasdf<br>asdfasdf<br>asdfasdf<br>asdf<br></div> 
```

**Javascript：**

```
$(function() { 

$(".slide").each(function() {
    $(this).data('slideHeight', $(this).height());
});

$(".slide").css({ "height": "0", "opacity": "0"});

$(".side-nav ul li a").click(function(event) {
    event.preventDefault();
    var targetContainer = $($(this).attr('href'));
    currentHref = $(this).attr('href');
    $(".slide").stop().animate({"opacity": "0", "height": "0px"}, 100);
    targetContainer.stop().animate({"opacity":"1", height: targetContainer.data('slideHeight') + "px"}, 450);
});                        

});​ 
```

# html - 浮动表单元素

> ID：12606797
> 
> 赞同：0
> 
> 时间：2012-09-26T17:01:20.543
> 
> 标签：html, css, forms

基本上我试图浮动，大多数列表项元素水平与标签下方的输入。这是我想要实现的模板。

![在此处输入图像描述](../Images/f9ba9ccf3bab4f87e044ca2e6e3dee57.png)

我在这里包含了一些代码：

```
<div>
 <label for="headline">Headline: </label>
 <input type="text" name="headline" value="Milestone" maxlength="50"size="55">
<br>

<div class="dates clearfix">
 <label for="effect_date">Date of Effect:</label>
 <input type="text" name="effect_date">

 <label for="end_date">End Date (opt):</label>
 <input type="text" name="end_date">

 <label>Date Visible:</label>

 <input type="radio" name="is_date_visible" value="2012">

 <label for="is_date_visible_yes">Yes</label>
 <input type="radio" name="is_date_visible">
 <label for="is_date_visible_no">No</label>
 <br>

 <label>Administrative:</label>
 <input type="radio" name="is_adminis" value="1">
 <label for="is_admin_yes">Yes</label>
 <input type="radio" name="is_adminis">
 <label for="is_admin_no">No</label>
</div>
</div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

和CSS：

```
 .clearfix:before, .clearfix:after { content: ""; display: table; }
    .clearfix:after { clear: both; }
    .clearfix { *zoom: 1; }

    div.dates {

    }
    .dates label {
         display: block;
         color: #2c93d5;
         font-size: 15px;
         margin-bottom: 5px;
    }
    .dates input {
         display: block;
    }
    ​.dates label, .dates input {
         float: left;

    } 
```

我用 CSS 尝试了各种方法，但都无济于事。本质上，我无法让输入低于标签，也无法将它们全部排列起来，它们通常从顶部交错排列。

我还有一个我一直在研究的小提琴链接：

[http://jsfiddle.net/vjDEq/](http://jsfiddle.net/vjDEq/)

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T19:44:12.340

这是类似的东西，但不使用浮点数：

[http://jsfiddle.net/vjDEq/19/](http://jsfiddle.net/vjDEq/19/)

## HTML

```
<div>
    <label for="headline">Headline: </label>
    <input type="text" id="headline" name="headline" value="Milestone" maxlength="50"size="55">
</div>

<div class="dates">
    <label for="effect_date">Date of Effect:
        <input type="text" name="effect_date">
    </label>

    <label for="end_date">End Date (opt):
        <input type="text" name="end_date">
    </label>

    <fieldset>
    <legend>Date Visible:</legend>
        <label for="is_date_visible_yes">
            <input type="radio" name="is_date_visible" id="is_date_visible_yes" value="yes">
            Yes
        </label>

        <label for="is_date_visible_no">
            <input type="radio" name="is_date_visible" id="is_date_visible_no" value="no">
            No
        </label>
    </fieldset>

    <fieldset>
    <legend>Administrative:</legend>
        <label for="is_admin_yes">
            <input type="radio" name="is_adminis" id="is_admin_yes" value="1">
            Yes
        </label>

        <label for="is_admin_no">
            <input type="radio" name="is_adminis" id="is_admin_no" value="0">
            No
        </label>
    </fieldset>
</div>
​ 
```

## CSS

```
#headline {
    margin-bottom: 1em;
}

label {display: block;}

.dates label {
    color: #2c93d5;
    font-size: 15px;
    margin-bottom: 5px;
}

.dates input {
    display: block;
}

.dates fieldset input {
    display: inline;
}

.dates label, .dates fieldset {
    display: inline-block;
    margin-right: 2em;
}

.dates fieldset label {
    margin-right: 1em;        
} 
```

标签不是浮点数，而是包装输入并设置为 inline-block。单选按钮应该在一个字段集中。请注意，jsfiddle 正在添加 normalize.css，它会从字段集和图例中删除边框/边距/填充。如果您的布局需要，您可以选择将管理字段集浮动到右侧。

# java - 无法从 mysql 检索日期到 JDBC

> ID：12606799
> 
> 赞同：0
> 
> 时间：2012-09-26T17:01:24.350
> 
> 标签：java, mysql, jdbc

我目前遇到的问题是我无法从我的 mysql 数据库中检索日期对象，到目前为止，无论我尝试什么，我要么得到

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException 
```

或者

```
java.sql.SQLException: Value '0000-00-00' can not be represented as java.sql.Date 
```

有没有人知道可以做些什么来解决这个问题。

我已经尝试过[这个](http://www.roseindia.net/sql/sqldate/mysql-date-java.shtml)和[这个](http://www.coderanch.com/t/385771/java/java/java-sql-Date-dd-mm)，但我仍然遇到同样的两个错误，这两个错误都是由日期引起的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T18:27:02.423

除了其他人回答的内容（包括存储无效日期不是一个好主意的**非常好的建议）之外，您还可以指示 JDBC 驱动程序以不同的方式处理这些无效日期：**

来自：[http ://dev.mysql.com/doc/refman/5.5/en/connector-j-installing-upgrading.html](http://dev.mysql.com/doc/refman/5.5/en/connector-j-installing-upgrading.html)

> 当遇到这些值时，Connector/J 3.1 默认会引发异常，因为根据 JDBC 和 SQL 标准，这是最正确的行为。可以使用 zeroDateTimeBehavior 配置属性修改此行为。允许的值是：
> 
> -  **异常**（默认值），它会引发 SQLException，SQLState 为 S1009。
> -   **convertToNull**，它返回 NULL 而不是日期。
> -   **round**，将日期四舍五入到最接近的值，即 0001-01-01。

我建议使用`convertToNull`

有关如何指定配置属性的说明，请参见[此处。](http://dev.mysql.com/doc/refman/5.5/en/connector-j-reference-configuration-properties.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T17:57:06.647

“0000-00-00”是无效日期。它不应该存在于您的数据中。

因此，您需要：

1.  清理数据并关闭 MySQL 配置中的 allow_invalid_dates（请参阅[http://dev.mysql.com/doc/refman/5.0/en/server-sql-mode.html#sqlmode_allow_invalid_dates](http://dev.mysql.com/doc/refman/5.0/en/server-sql-mode.html#sqlmode_allow_invalid_dates)）

2.  编写java代码来捕获日期异常并处理坏数据

3.  按照 John Woo 的建议，编写 SQL 以替换无效日期的默认日期。

3 的问题是还有其他可能引发异常的无效日期（例如“2012-02-31”）。祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T17:04:48.093

如果您要从数据库中检索行，请格式化`select`语句中的日期，

```
SELECT if(colDate = '0000-00-00', curdate(), colDate), .... 
```

只需替换`CURDATE()`为您想要的默认日期。出现异常的原因是因为`0000-00-00`不是有效日期。

# hibernate - 缺少使用 ColdFusion ORM 的 variables.instance 范围？

> ID：12606800
> 
> 赞同：2
> 
> 时间：2012-09-26T17:01:25.333
> 
> 标签：hibernate, oop, orm, coldfusion

我试图通过阅读 Matt Gifford 的书“ColdFusion 中的面向对象编程”来巩固我公认的 ColdFusion OOP 知识。我的 ColdFusion 知识有点落后；我精通 CFML，因为它适用于 ColdFusion 8，但对 9 和 10 中的新功能并没有太大的影响（它们在我的待办事项中，但我希望它们需要时间，我想要一个答案现在这一点）。我的公司最近将他们的服务器更新到 10 台，我们打算利用这些新特性和功能。

我的问题是基于书中掩盖的一些内容，当我在 Google 上进行搜索时，这导致我得到令人困惑和相互矛盾的答案。我对 CF8 中的 ORM 开发的理解（使用像 Transfer 这样的 ORM 框架，以及书籍示例和其他阅读材料）将 bean 的属性放在 variables.instance 范围内，以将对象属性与应用程序属性隔离开来变量范围。但是在 CF9 中使用内置的 ORM 不会使用实例范围；而是将对象和应用程序属性放在变量范围内。对我来说，这引发了我的开发方法论，因为我倾向于在我的许多对象中创建一个函数，该函数一次返回所有对象属性（便于初始化对象，

我需要解释为什么以这种方式进行；对我来说这没有意义。烘焙的 ORM 中是否存在其他功能来复制我缺少或尚未遇到的所有属性功能？我读过这个属性命名过程和你可能在函数中创建的其他变量之间存在潜在的冲突，这些变量不是由 var 作用域限制的；我不知道这些东西是否在 10 内解决了，或者这只是胡说八道。任何澄清都会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T18:44:04.333

所谓的“Instance”范围只是 CF 社区编造的东西，Adobe 没有采用它，因此它不在 Adob​​e 的 ORM 实现中。它有其优点和缺点，我不会在这个答案中解释，但和你一样，我也喜欢它。

要在没有“实例”范围的情况下实现备忘录模式，您需要编写自己的`getMemento()`函数来返回所有属性的结构：

```
function getMemento()
{
  var instance = {};

  instance.propertyA = variables.propertyA;
  instance.propertyB = variabels.propertyB;

  return instance;    // note: safer to return a Duplicate() of instance
} 
```

或使用 编写一个通用的`GetMetaData()`，请参阅：

*   [http://objectivebias.com/entry/memento-pattern-with-coldfusion-9-s-automatic-getters-and-setters](http://objectivebias.com/entry/memento-pattern-with-coldfusion-9-s-automatic-getters-and-setters)

*   [http://henrylearnstorock.blogspot.ca/2010/01/cf9-getmemento-that-works-with.html](http://henrylearnstorock.blogspot.ca/2010/01/cf9-getmemento-that-works-with.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T19:53:40.677

您的问题归结为：“我需要解释为什么以这种方式完成”。好的，这是一件值得怀疑的事情，我认为 CF 如果出于您所引用的原因使其可配置，它可能会更加灵活。

但是，如果你得到了我需要解释为什么以这种方式完成的答案，你会从那里做什么？知道这些信息对你来说不会特别有用。

答案是——据我所知——“Adobe CF 团队并没有尽可能多地考虑它，而现在我们就是这样”。那里。直白，但真实。必须记住，CF 团队实际上并不是 CF 开发人员（他们是 Java 开发人员），所以他们对使用 CF 并不是那么熟悉，所以他们不会遇到大部分 CF 所遇到的问题开发人员有这会导致他们认为“实际上，将这些直接放在变量范围内并不是一个好主意”。我不会为此责怪个别开发人员（拥有一个优秀的 Java 开发人员比拥有一群也了解 Java 的 CF 专家要好），但我确实责怪 Adob​​e 在 CF 开发团队中也没有专业的 CF 开发人员，理智地检查这些东西。

我认为这里的一个行动点是向 Adob​​e 提出一张票，以便在 CF11 中处理这个问题。如果你提出，我会投赞成票（因为我在这方面的经历和你完全一样）。错误库在[这里](https://bugbase.adobe.com/ "Adobe 错误库")。

在此期间你能做什么？好吧，您不必使用 CF 为您创建的生成的访问器，您可以自己滚动，并将属性值粘贴到您喜欢的任何地方。您可以通过利用 onMissingMethod() 为每个属性编写单独的访问器，并查找对 getPROPERTYNAME() 和 setPROPERTYNAME() 的方法调用并将它们传递给通用 getter/setter，从而节省自己的时间。或类似的东西。

# iphone - 缓存 ipod 库资产

> ID：12606801
> 
> 赞同：0
> 
> 时间：2012-09-26T17:01:27.297
> 
> 标签：iphone, objective-c, ios, ipad, ipod

我想缓存从 iPod 库添加的文件。网址是：ipod-library://item/item.mp3?id=-8337982997312596354，我只想将此文件写入临时/缓存文件夹。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T17:11:00.583

请参阅[this](https://stackoverflow.com/questions/1656124/mpmediaitems-raw-song-data) or [this](https://stackoverflow.com/questions/6112925/converting-mpmediaitem-to-nsdata) question on how to get the NSData of the song 然后使用

> writeToURL：原子地

NSData 来保存它。您可以使用以下命令获取应用程序临时目录的路径

> NSTemporaryDirectory();

# javascript - Rails 生产从 app/views/model 渲染 JS 部分

> ID：12606803
> 
> 赞同：2
> 
> 时间：2012-09-26T17:01:30.767
> 
> 标签：javascript, ruby-on-rails, partial, assets, production

大家好！

我有一个调用的部分`_more_contacts.js.coffee`文件`app/views/contacts/`

此部分通过 Ajax 调用呈现`ContactsController`，并在视图中更新另一个部分 ( `_more_contacts.html.erb`)：

阿贾克斯调用：

```
<%= link_to "blah", more_contacts_path(@smthg) , method: :post, remote: true, id: "more_contacts", data: {last: raw(@id)} %> 
```

控制器代码：

```
def more_contacts  
  @contacts = Contact.search(params)
  respond_to do |format|  
    format.js { render partial: "more_contacts" }  
  end  
end 
```

JS部分代码：

```
$('#more_contacts_table').append('<%=j render partial: "more_contacts", formats: [:html] %>') 
```

HTML 部分：

```
<% @contacts.each do |contact| %>
  <tr>
    <td><%= link_to contact.company, contact_path(contact.id) %></td>
    <td><%= contact.email %></td>
  </tr>
<% end %> 
```

请注意，我挣扎了几个小时才发现它不应该有`.erb`扩展名，即使它包含一些 ruby​​ 代码......

无论如何，一切都在开发中运行良好，但我无法使其在生产中运行:(
我在我的`config/environments/production.rb`

```
config.serve_static_assets = false  
config.assets.compress = true  
config.assets.compile = true  
config.assets.digest = true  

config.assets.precompile += %w( contacts/more_contacts.js app/views/contacts/more_contacts.js )  
config.assets.precompile << "contacts/_more_contacts.js"  
config.assets.precompile << "#{Rails.root}/app/views/contacts/_more_contacts.js"  
config.assets.precompile << "#{Rails.root}/app/views/contacts/_more_contacts.js.coffee"  
config.assets.precompile << "#{Rails.root}/app/views/contacts/more_contacts.js"  
config.assets.precompile << "#{Rails.root}/app/views/contacts/more_contacts.js.coffee" 
```

但是当我运行我的 rake 任务来编译资产时，more_contacts.js 无处可寻（`public/assets/manifest.yml`或`public/assets/`）并且 Ajax 调用失败......

我被困在这里:(任何想法，有人吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T18:31:29.400

[由于Rails JavaScript 视图在生产](https://stackoverflow.com/questions/11926034/)环境中不起作用，通过将咖啡轨移出我的 Gemfile 中的资产组来修复它。

# php - 会话达到 maxlife 后我可以注销用户吗

> ID：12606809
> 
> 赞同：0
> 
> 时间：2012-09-26T17:01:47.313
> 
> 标签：php

我在下面有一段代码，其中会话变量可以持续 12 小时：

```
ini_set('session.gc_maxlifetime',12*60*60);
ini_set('session.gc_divisor', '1');
ini_set('session.gc_probability', '1');
ini_set('session.cookie_lifetime', '0'); 
```

但是我的问题是，一旦 12 小时过去并且会话变量已过期，是否可以将用户注销？换句话说，我有一个teacherlogout.php 页面，经过12 小时后，一旦用户导航到另一个页面或12 小时后刷新页面，它是否可以将用户重定向到注销页面？

更新：

这可以工作吗：

```
if ((isset($username)) && (isset($userid))){

...//WHOLE CODE

}else{

header( 'Location: teacherlogout.php' ) ;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T17:48:29.780

我不建议检查变量的状态，因为在寄存器全局设置为 true 或未定义的变量被严格级别忽略的情况下，可能会使您的代码容易发现难以检测的漏洞。

这个问题的公认答案[How do check if a PHP session is empty?](https://stackoverflow.com/questions/1519818/how-do-check-if-a-php-session-is-empty)

是检查访问者状态的最典型方法。然而，有一些图书馆致力于使这种系统结构化和高效。

阅读：[http ://www.phpeveryday.com/articles/Zend-Framework-Login-Creating-Authentication-P566.html](http://www.phpeveryday.com/articles/Zend-Framework-Login-Creating-Authentication-P566.html)

它描述的是一种使用 Zend 库来确定当前访问者是否具有身份的方法，在这种情况下，是一个使用会话 id 针对用户名登录的用户。即使您不使用库来促进这一点，您也可以使用相同的概念来开发您自己的检查访客身份的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T17:37:42.477

我会在客户端上实施一些轮询。伪代码：

**PHP**：

```
// hasSession.php
echo (isset($_SESSION['user_id'])); // bool 
```

**JavaScript**：

```
// Poll server
function checkSession() {

    // Assuming the function passes along the truthy or falsy response
    if (ajaxCallToHasSessionPHPResponse()) {
        setTimeout(checkSession, 10000); // Check again in 10 seconds
    } else {
        window.location = '/logout.php';
    }
}
checkSession(); 
```

# java - 用于 gradle 的 Liquibase 插件

> ID：12606814
> 
> 赞同：0
> 
> 时间：2012-09-26T17:02:00.370
> 
> 标签：java, gradle, liquibase

我找到了 gradle 的 liquibase 插件，很多人从**tlberglund推荐了我**[的 gradle-liquibase-plugin](https://github.com/tlberglund/gradle-liquibase-plugin)。我使用 gradle 版本 1.2 我创建 build.gradle 具有下一个结构：

 **```
apply plugin: 'java'
apply plugin: 'liquibase'

repositories {
    mavenCentral()
}

dependencies {
    compile('org.hsqldb:hsqldb:2.2.8')
    compile('org.hsqldb:sqltool:2.2.8')
    compile('com.h2database:h2:1.3.167')
    compile('org.liquibase:liquibase-core:2.0.1')
    compile('com.augusttechgroup:groovy-liquibase-dsl:0.7.3')
    compile('postgresql:postgresql:9.1-901.jdbc4')
}

buildscript {
    dependencies {
        classpath 'com.augusttechgroup:gradle-liquibase-plugin:0.6.1'
    }
}

databases {
    postgre {
        url = "${postgreBaseUrl}" + "${postgreDB}"
        username = "${postgreUserName}"
        password = "${postgreUserPassword}"
    }
}

changelogs {
    main {
        file = file('src/main/liquibase/mainChanges.groovy')
    }
}

task dbInit << {
    databases.postgre.url = "${postgreBaseUrl}"
    databases.postgre.username = "${postgreRootUserName}"
    databases.postgre.password = "${postgreRootUserPassword}"
    changelogs.main.file = file('src/main/liquibase/tablespaceChanges.groovy')
} 
```

当我尝试运行“gradle build”任务时，我收到了短信

```
FAILURE: Build failed with an exception.

* What went wrong:
Could not resolve all dependencies for configuration ':classpath'.
> Could not find group:com.augusttechgroup, module:gradle-liquibase-plugin, vers
ion:0.6.1.
  Required by:
      :demo:unspecified

* Try:
Run with --stacktrace option to get the stack trace. Run with --debug option to
get more log output.

BUILD FAILED 
```

我从中央 Maven 存储库 [Maven 存储库中获取了依赖项](http://mvnrepository.com/artifact/com.augusttechgroup/gradle-liquibase-plugin/0.6.1)

如果我将依赖项标记为“编译”，那么好吧。

```
dependencies {
    compile 'com.augusttechgroup:gradle-liquibase-plugin:0.6.1' 
} 
```

我检查了我的本地存储库，发现那里有 gradle-liquibase-plugin-0.6.1.jar

我不明白有什么问题。我按照github上原始文档中的描述进行了尝试

*https://github.com/tlberglund/gradle-liquibase-plugin/blob/master/plugin.gradle*

但得到了相同的结果。也许有人用过这个插件？

我真的需要帮助，很抱歉我的英语不好）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T17:53:33.917

该问题与 Liquibase 插件无关。您只需要在该`buildscript {}`部分中声明一个存储库。`buildscript {}`与脚本的其余部分完全分开。您几乎可以将其视为一个单独的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-02T11:58:46.203

查看 github 上的源代码（请参阅 build.gradle 文件），看起来构建已发布在 oss.sonatype.org 上。尝试使用添加“ [https://oss.sonatype.org/content/repositories/releases/](https://oss.sonatype.org/content/repositories/releases/) ”作为 maven 存储库

因此，您的 build.gradle 可能如下所示：

 `````
buildscript {
    repositories {
        maven {
            url uri('https://oss.sonatype.org/content/repositories/releases/')
        }
        mavenCentral()
    }
    dependencies {
        classpath group:'net.saliman', name: 'gradle-liquibase-plugin', version: '1.0.0'
    }
}
apply plugin: 'liquibase' 
`````**

# c# - 从 C#.net 将记录添加到 Access

> ID：12606817
> 
> 赞同：-2
> 
> 时间：2012-09-26T17:02:13.947
> 
> 标签：c#, ms-access

我对 C#.net 完全陌生。在将记录添加到作为访问文件的连接数据源时遇到问题。编码是：

```
 int MaxRows = 0;
    int inc = 0;

    private void Form2_Load(object sender, EventArgs e)
    {
        con = new System.Data.OleDb.OleDbConnection();
        ds1 = new DataSet();

        con.ConnectionString = " Provider=Microsoft.ACE.OLEDB.12.0;Data Source=D:/Documents and Settings/user/My Documents/anchu.accdb";
        string sql = "SELECT * From Table1";
        da = new System.Data.OleDb.OleDbDataAdapter(sql, con);

        con.Open();

        da.Fill(ds1, "Table1");
        NavigateRecords();

        con.Close();
        //con.Dispose();
    }
    private void NavigateRecords()
    {
        DataRow drow = ds1.Tables["Table1"].Rows[0];

        textBox1.Text = drow.ItemArray.GetValue(0).ToString();
        textBox2.Text = drow.ItemArray.GetValue(1).ToString();
        textBox3.Text = drow.ItemArray.GetValue(2).ToString();
        textBox4.Text = drow.ItemArray.GetValue(3).ToString();
    }

    private void groupBox1_Enter(object sender, EventArgs e)
    {

    }

    private void button2_Click(object sender, EventArgs e)
    {
        textBox1.Clear();
        textBox2.Clear();
        textBox3.Clear();
        textBox4.Clear();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        System.Data.OleDb.OleDbCommandBuilder cb;
        cb = new System.Data.OleDb.OleDbCommandBuilder(da);

        DataRow drow = ds1.Tables["Table1"].NewRow();
        drow[1] = textBox1.Text();
        drow[2] = textBox2.Text();
        drow[3] = textBox3.Text();
        drow[4] = textBox4.Text();

        ds1.Tables["Table1"].Rows.Add(drow);

        MaxRows = MaxRows + 1;
        inc = MaxRows - 1;

        da.Update(ds1, "Table1");

        MessageBox.Show("Entry Added");
    }
} 
```

我得到8个相同类型的错误！

> 不可调用的成员 'System.Windows.Forms.Control.Text' 不能像方法一样使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T17:03:10.140

错误示例

```
drow[1] = textBox1.Text(); 
```

用。。。来代替

```
drow[1] = textBox1.Text; 
```

属性不需要括号，Text 是属性，而不是方法。

# c# - 动态数据网格，可选列

> ID：12606820
> 
> 赞同：1
> 
> 时间：2012-09-26T17:02:31.760
> 
> 标签：c#, wpf, mvvm, datagrid

我知道这个问题之前已经回答过了，但是看看他们中的大多数，他们使用后面的代码，我理解在 MVVM 中永远不会好，其他人也使用 MVVM 模式。我拒绝使用模式，因为我想从头开始学习。我能够正确绑定 ItemsSource 但如何绑定到数据网格标题等。

我认为这很常见，但我想要的是能够拥有一个带有标题的数据“表”。我希望用户能够右键单击标题行并关闭和打开列。那部分我并不担心弄清楚该怎么做。

我在问如何在没有代码隐藏或框架的情况下拥有一个具有动态列/标题的数据网格。我不确定如何从视图模型绑定到数据网格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T17:18:19.333

```
 <DataGrid AutoGenerateColumns="False" Height="256" HorizontalAlignment="Left" Name="dgEmp" VerticalAlignment="Top" Width="490"  ItemsSource="{Binding DeleteData,Mode=TwoWay}" Margin="6,7,0,0" Grid.RowSpan="3">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="ID" Binding="{Binding ID,Mode=TwoWay}" IsReadOnly="True" Visibility="Hidden"/>
                        <DataGridTextColumn Header="Description" Binding="{Binding Description,Mode=TwoWay}" IsReadOnly="True"/>
                        <DataGridTextColumn Header="Amount" Binding="{Binding Amount,Mode=TwoWay}" IsReadOnly="True"/>
                        <DataGridTextColumn Header="Date" Binding="{Binding Date,Mode=TwoWay}" IsReadOnly="True"/>
                        <DataGridTextColumn Header="Remark" Binding="{Binding Remark,Mode=TwoWay}" IsReadOnly="True"/>
                        <DataGridTemplateColumn>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Button Content="Update" x:Name="btnUpdate"
                            Click="btnUpdate_Click"></Button>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                    </DataGrid.Columns>
                </DataGrid> 
```

在此示例中，DataGrid 的 ItemSource 是 DeleteData，它是一个`ObservableCollection<Expense_Submit>`

Expense_Submit 是我定义了所有属性的一类。它看起来像

```
public class Expense_Submit
{

 private int _ID;

    private string _UserID;

    private string _Description;

    private string _Amount;

    private DateTime _Date;

    private string _Remark;

  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T17:40:36.037

为此，您必须绑定可见性属性。

```
Visibility={binding IDVisibile,mode=TwoWay} 
```

在您的 ViewModel 创建一个属性

```
 private Visibility _IDVisibile;

            public Visibility IDVisibile
            {
                get { return _BorderVisibility; }
                set { _BorderVisibility = value; RaisePropertyChanged("IDVisibile"); }
            } 
```

# android - 单击按钮时刷新片段视图

> ID：12606831
> 
> 赞同：3
> 
> 时间：2012-09-26T17:03:03.150
> 
> 标签：android, view, android-fragments

我有一个片段活动，它使用 ViewPager 来显示一组片段。在片段活动上，我有一个按钮，单击该按钮时，它会向当前片段发送一条消息以刷新其内容。一切正常（活动/当前片段通信），除了我无法刷新片段视图这一事实。通过 getView() 访问当前视图不起作用，因为此函数返回 null；似乎在创建片段后（在 ViewCreated 上调用）getView 被销毁。我在这里错过了什么吗？如何使片段以编程方式重绘其内容？似乎唯一可行的方法是从父活动创建片段时。我是否必须再次删除并重新添加片段才能执行此操作？

这是代码：

主要活动：

```
public class MainActivity extends FragmentActivity {

    private MyAdapter mAdapter;
    private static ViewPager mPager;

        @Override
        public void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);
                setContentView(R.layout.activity_main);
                setupViewPager();
        }

        @Override
        public boolean onCreateOptionsMenu(Menu menu) {
                getMenuInflater().inflate(R.menu.activity_main, menu);
                return true;
        }

        @Override
        public boolean onPrepareOptionsMenu(Menu menu) {
                return super.onPrepareOptionsMenu(menu);
        }

        @Override
        public boolean onOptionsItemSelected(MenuItem item) {
                switch (item.getItemId()) {

                case R.id.menu_test:
                        updateFragment();
                        return true;

                default: return true;
                }
        }

        private void updateFragment() {
                for (int i=0; i< mAdapter.getCount(); i++) {
                        SampleFragment fragment = (SampleFragment) mAdapter.getItem(i);
                        fragment.update();
                }
        }

        private void setupViewPager() {
                try {
                        mAdapter = new MyAdapter(getSupportFragmentManager());

                        mPager = (ViewPager) findViewById(R.id.pager);
                        mPager.setAdapter(this.mAdapter);

                } catch (Exception e) {
                        e.printStackTrace();
                }
        }

        public class MyAdapter extends FragmentPagerAdapter {

                public MyAdapter(FragmentManager fm) {
                        super(fm);
                }

                @Override
                public Fragment getItem(int position) {
                        SampleFragment fragment = new SampleFragment(position); 
                        return fragment;
                }

                @Override
                public int getCount() {
                        return 5;
                }
        }
} 
```

和片段类：

```
public class SampleFragment extends Fragment{

        private int myPosition = -1;

        public SampleFragment(int position) {
                this.myPosition = position;
        }

        @Override
        public void onAttach(Activity activity) {
                super.onAttach(activity);
        }

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
                View view = inflater.inflate(R.layout.fragment, container, false);
                update(view, "Updated from onCreateView");
                return view;
        }

        @Override
        public void onActivityCreated(Bundle bundle) {
                super.onActivityCreated(bundle);
        }

        @Override
        public void onViewCreated(View view, Bundle savedInstanceState) {
                super.onViewCreated(view, savedInstanceState);

                view.findViewById(R.id.textTitle).setOnClickListener(myClickListener);
        }

        private OnClickListener myClickListener = new OnClickListener() {
                @Override
                public void onClick(View v) {
                        switch (v.getId()) {

                        case R.id.textTitle:
                                break;

                        }
                }
        };

        public void update() {
                update(getView(), "Updated from main");
        }

        private void update(View view, String subtitleText) {
                TextView title = (TextView) view.findViewById(R.id.textTitle);
                TextView subtitle = (TextView) view.findViewById(R.id.textSubtitle);

                title.setText("Fragment " + myPosition);
                subtitle.setText(subtitleText);
        }
} 
```

从主活动中的菜单项调用时，该错误发生在 view.FindViewById（视图为空）上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T00:28:12.893

您可以查看[这篇文章](http://tamsler.blogspot.com/2011/11/android-viewpager-and-fragments-part-ii.html)，它解释了如何在 ViewPager 中保留对片段的引用。

页面上描述了两种方法。第一个涉及在使用 FragmentManager 添加片段时设置标签。然后您可以使用`findFragmentByTag()`. 但是，我没有看到如何使用 FragmentPagerAdapter 或 FragmentStatePagerAdapter 来完成这项工作，因为这些实现会为您添加片段。如果您使用自己的自定义 PagerAdapter，这可能对您有用。

另一种适用于 FragmentPagerAdapter 或 FragmentStatePagerAdapter 的方法涉及保留所有片段的映射，在您的内部`getItem()`和`destroyItem()`实现中进行更新。这种方法对我有用。

一旦你有了对当前片段的引用，你就可以在你的片段中调用一个方法来刷新它的视图。

# image - javascript 无法触发 image.onerror 处理程序

> ID：12606832
> 
> 赞同：1
> 
> 时间：2012-09-26T17:03:04.067
> 
> 标签：image, triggers, handler, onerror

不知何故，我无法触发 onerror 事件或让 onerror 中的代码工作。此代码尝试在数组中收集一系列图像。我正在使用 onerror 事件来标记序列的结束，从而终止循环。

```
 //definition of Slide object
function Slide(inpImage, imgCaption) {
    this.inpImage = inpImage;
    this.imgCaption = imgCaption;
}

window.onload = function() {
        var defaultImage = img_slide.src; //This is a default file
        //basically getting the file path and name of next image in the sequence
        var nextImage = f_nextFile(f_path(img_slide.src),f_serial(img_slide.src)); 
        //An array object which stores Slide Objects
        arr_slides.push(new Slide(img_slide,img_slide.src)); 
        while (defaultImage != nextImage){ //code to populate arr_slides array
            var imgObj = new Image();
            imgObj.src = nextImage;
            arr_slides.push(new Slide(imgObj,nextImage));
            //get the next image in the sequence of images
            nextImage = f_nextFile(f_path(nextImage),f_serial(nextImage));
            testImage = function(nextImage,defaultImage){
                            var tester=new Image();
                            tester.onerror = function () {
                                                nextImage = defaultImage;
                                            };
                            tester.onload = function () {
                                                //do nothing
                                            };
                            var loadNext = function() {
                                                tester.src=nextImage;
                                           };
                            loadNext(); 
            };
            testImage(nextImage,defaultImage);
        }
        alert("The number of images in array : " + arr_slides.length);
     }; 
```

# javascript - 用于从字符串中拆分和返回值的 Javascript 函数

> ID：12606833
> 
> 赞同：1
> 
> 时间：2012-09-26T17:03:05.817
> 
> 标签：javascript

我试图抓住一定的价值。我是 javascript 新手，我不知道为什么这不起作用。

如果我解析“kid_2”，我应该得到“kostas”。而不是“Kostas”，我总是得到“02-23-2000”。所以我必须在循环中有一个逻辑问题，但我真的被卡住了。

```
function getold_val(fieldname,str){

  var chunks=str.split("||");
  var allchunks = chunks.length-1;
     for(k=0;k<allchunks;k++){
       var n=str.indexOf(fieldname);
       alert(chunks[k]);
       if(n>0){
       var chunkd=chunks[k].split("::");
         alert(chunkd);
         return chunkd[1];
       }
     }
}
var test = getold_val('kid_2','date_1::02-23-2000||date_2::06-06-1990||kid_1::George||kid_2::Kostas||');

alert(test); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T17:07:28.560

有两个错误。第一个错误是在`indexOf`调用中：

```
var n = str.indexOf(fieldname); 
```

这将始终返回大于或等于 0 的值，因为该字段存在于字符串中。你应该做的是：

```
var n = chunks[k].indexOf(fieldname); 
```

第二个错误在你的`if`陈述中。它应该是：

```
if(n >= 0) {
   ...
} 
```

或者

```
if(n > -1) {
    ...
} 
```

您要查找的子字符串很可能位于字符串的开头，在这种情况下，它的索引为 0。`indexOf`如果找不到您要查找的内容，则返回 -1。

话虽这么说，这是一种更好的方法来做你想做的事情：

```
function getold_val(fieldName, str) {
    var keyValuePairs = str.split("||");
    var returnValue = null;

    if(/||$/.match(str)) {
       keyValuePairs = keyValuePairs.slice(0, keyValuePairs.length - 1);
    }

    var found = false;
    var i = 0;
    while(i < keyValuePairs.length && !found) {
       var keyValuePair = keyValuePairs[i].split("::");

       var key = keyValuePair[0];
       var value = keyValuePair[1];

       if(fieldName === key) {
          returnValue = value;
          found = true;
       }

       i++;
    }

    return returnValue;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T17:08:12.557

这行得通，这是我的[小提琴](http://jsfiddle.net/4cBYy/)。

```
function getold_val(fieldname,str) {
    var chunks = str.split('||');
    for(var i = 0; i < chunks.length-1; i++) {
        if(chunks[i].indexOf(fieldname) >= 0) {
            return(chunks[i].substring(fieldname.length+2));
        }
    }
}
alert(getold_val('kid_2', 'date_1::02-23-2000||date_2::06-06-1990||kid_1::George||kid_2::Kostas||')); 
```

您的代码的问题是（正如@slebetman 也注意到的那样）字符串索引可以为 0 的事实，因为它正好从第一个字母开始。

代码和你的几乎一样，我只是没有使用第二个`.split('::')`，因为我觉得 a`.substring(...)`会更容易。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T17:52:46.427

正则表达式可能更具吸引力。这是一个[小提琴](http://jsfiddle.net/nQDXJ/)：

```
function getValue(source, key){
    return (new RegExp("(^|\\|)" + key + "::([^$\\|]+)", "i").exec(source) || {})[2];
}    
getValue("date_1::02-23-2000||date_2::06-06-1990||kid_1::George||kid_2::Kostas||","kid_2"); 
```

但是如果你想要更多的东西，你可以把那个字符串解析成一个字典，像这样（[小提琴](http://jsfiddle.net/yc2pv/)）：

```
function splitToDictionary(val, fieldDelimiter, valueDelimiter){
    var dict = {},
    fields = val.split(fieldDelimiter),
    kvp;
    for (var i = 0; i < fields.length; i++) {        
        if (fields[i] !== "") {
            kvp = fields[i].split(valueDelimiter);        
            dict[kvp[0]] = kvp[1];
        }
    }
    return dict;    
}
var dict = splitToDictionary("date_1::02-23-2000||date_2::06-06-1990||kid_1::George||kid_2::Kostas||","||","::");
console.log(dict["date_1"]);
console.log(dict["date_2"]);
console.log(dict["kid_1"]);
console.log(dict["kid_2"]);​ 
```

# asp.net - iTextSharp XMLWorkerHelper HTML 到 PDF 表格对齐

> ID：12606835
> 
> 赞同：1
> 
> 时间：2012-09-26T17:03:13.583
> 
> 标签：asp.net, pdf, itextsharp, itext

使用以下 ASP.net/iTextSharp 代码将 HTML 文件的内容解析为 PDF 并将其转储到响应流中：

```
Response.Clear();
Response.ContentType = "application/pdf";
using (Document doc = new Document())
{
    PdfWriter writer = PdfWriter.GetInstance(doc, Response.OutputStream);
    doc.Open();
    using (TextReader reader = File.OpenText(Server.MapPath("~/Test.htm")))
    {
        XMLWorkerHelper.GetInstance().ParseXHtml(writer, doc, reader);
    }
    doc.Close();
}
Response.End(); 
```

这可行，但生成的 PDF 的样式与原始 HTML 页面不同。对于初学者来说，内置的 css 解析器似乎只能处理直接的标签样式和类（没有像：这样的链接`thead th { background-color:#999; }`）。

其次，边界似乎是一个孤注一掷的交易。它没有边框顶部、边框底部等概念，并且边框折叠不会折叠相邻单元格的边框，因此边框最终会比我想要的厚两倍。

最后，我不知道如何将表格与文档的左侧或右侧对齐。它始终居中。我尝试使用 text-align 包裹在 div 中，尝试设置 align 属性，尝试直接在表格上设置 text-align。想不出来那个？

这是我试图用作概念验证的演示文档：

```
<!DOCTYPE html>
<html>
<head>
    <title>This is the title</title>
    <meta name="description" content="This is the description" />
    <meta name="keywords" content="abc, 123, xyz" />
    <style type="text/css">
        body { font-family:Arial, Verdana, Sans-Serif; font-size:9pt; }
        .dataGrid { font-family:Arial, Verdana, Sans-Serif; font-size:9pt; border-collapse: collapse; border:1px solid #000; width:80%; margin:0; text-align:left; }
        th { padding:3px 4px; font-weight:bold; border:1px solid #000; }
        td { padding:3px 4px; border:1px solid #000; }
        .head { border-bottom:2px solid #000; background-color:#9BBA1F; font-weight:bold; }
        .odd { background-color:#fff; }
        .even { background-color:#D6EB87; }
        .foot { border-top:2px solid #000; background-color:#BAB0C4; font-weight:bold; }
        h1 { font-size:14pt; color:#FFA200; text-align:center; }
        .right { text-align:right; }
        .center { text-align:center; }
        .left { text-align:left; }
    </style>
</head>
<body>
    <h1>Sample Document</h1>

    <div style="text-align:left;">
    <table class="dataGrid" align="left">
        <thead>
            <tr class="head">
                <th width="70%">Name</th>
                <th width="15%" class="center">Qty</th>
                <th width="15%" class="center">Price</th>
            </tr>
        </thead>
        <tbody>
            <tr class="odd">
                <td>ABC</td>
                <td class="center">2</td>
                <td class="right">$5.00</td>
            </tr>
            <tr class="even">
                <td>XYZ</td>
                <td class="center">1</td>
                <td class="right">$10.00</td>
            </tr>
            <tr class="odd">
                <td>123</td>
                <td class="center">3</td>
                <td class="right">$2.00</td>
            </tr>
            <tr class="even">
                <td>789</td>
                <td class="center">1</td>
                <td class="right">$4.00</td>
            </tr>
        </tbody>
        <tfoot>
            <tr class="foot">
                <td class="right">Totals</td>
                <td class="center">7</td>
                <td class="right">$30.00</td>
            </tr>
        </tfoot>
    </table>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T13:01:31.770

在花了很多时间之后，我无法让它正常工作。因此，我最终切换到另一个工具：wkHtmlToPdf。我使用 Nuget 中可用的 Codaxy 包装类来帮助创建调用，并且我看到的结果比我在 iTextSharp 中看到的要好得多。它主要理解 CSS 选择器，并自动处理图像和链接等内容。

# javascript - 如何从 Backbone.LocalStorage 获取 Backbone.Collection

> ID：12606837
> 
> 赞同：9
> 
> 时间：2012-09-26T17:03:21.680
> 
> 标签：javascript, backbone.js, local-storage

假设我可以从 javascript 控制台获得以下结果：

```
var ls = new Backbone.LocalStorage("items"); 
ls; // {"name":"items","records":["1244f588-be3d-c493-5c86-b2abb997af82"]} 
```

我应该如何`Backbone.Collection`从`Backbone.LocalStorage`？

PS：
集合看起来像

```
[
{
"title":"test",
"completed":false,
"order":1,
"id":"1244f588-be3d-c493-5c86-b2abb997af82"
},
{
"title":"test2",
"completed":false,
"order":2,
"id":"8a8658b9-b636-eac3-4c54-03c279a73c2d"
}
] 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-27T08:52:33.777

创建一个空集合并`collection.localStorage`设置为您的`Backbone.LocalStorage`对象并获取它：

```
var c = new Backbone.Collection();
c.localStorage = new Backbone.LocalStorage("items");
c.fetch();
console.log(c.pluck('id')); 
```

或`findAll`在您的`Backbone.LocalStorage`对象上使用以获取存储中的模型数组：

```
var ls = new Backbone.LocalStorage("items");
console.log(ls.findAll()); 
```

[与http://jsfiddle.net/nikoshr/8pHNG/](http://jsfiddle.net/nikoshr/8pHNG/)一起玩的小提琴

# php - 如何为 CodeIgniter 使用 phpDocumentor

> ID：12606839
> 
> 赞同：2
> 
> 时间：2012-09-26T17:03:27.347
> 
> 标签：php, codeigniter, documentation, phpdoc

我已经构建了一个相当广泛的 Web 应用程序，并且正在查看 CodeIgniter (CI) 的样式指南以了解如何进行注释。对于类和方法，它有这样的东西：

```
/** 
* Super Class 
* 
* @package Package Name 
* @subpackage Subpackage 
* @category Category 
* @author Author Name 
* @link http://example.com 
*/ 

class Super_class {}

/** 
* Encodes string for use in XML 
* 
* @access public 
* @param string 
* @return string 
*/ 

function xml_encode($str){} 
```

这很好，但是我不知道要为这些选项填写什么。我真的没有@package，我只有一些模型和控制器。在 Java 中，我可能会使用包来保证安全性，但在 CI 中不会，它只是 MVC。例如，我总是有诸如 project_mode、projects (controller) 和 add_project_view.php 之类的东西。

还有@category 的格式是什么？phpDocumentor 文档说，“@category 标签用于将包组组织在一起”。再次，没有包裹！

其次，方法中的参数呢？有时我有两个字符串和一个数组或一个整数和一个数组，@param 的格式是什么？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T17:11:59.567

包、子包和类别用于更好地在逻辑上构建代码。您拥有的每个项目/代码文件都不需要它。

另一方面，定义方法中的参数非常有用，因为我们需要在阅读文档时知道它们是什么，因为我们需要在代码中调用这些方法时传递它们。

一个样本会是这样的：

```
/**
 * Sample function
 * @param string $param1 name of person
 * @param integer $param2 age of person 
 * @return string 
 */
function person($name, $age)
{
    return "$name is $age years old";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T18:01:57.630

> @package 只能用于记录过程页面或类。
> 
> 包用于帮助您对相关元素进行逻辑分组。您编写类来将相关的函数和数据组合在一起，而 phpDocumentor 将文件的内容（函数、定义和包含）表示为“过程页面”。包用于将类和过程页面组合在一起，其方式与目录将相关文件组合在一起的方式相同。

[您可以在此处](http://manual.phpdoc.org/HTMLSmartyConverter/HandS/li_phpDocumentor.html)的 phpDocumentor 指南中找到问题的答案和更多信息

# sql - PostgreSQL 选择查询中的最大列数是多少

> ID：12606842
> 
> 赞同：50
> 
> 时间：2012-09-26T17:03:38.330
> 
> 标签：sql, postgresql, postgresql-9.2

你知道Postgresql最多可以查询多少列吗？在我开始我的项目之前，我需要知道这一点。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-09-27T00:08:27.587

根据[PostgreSQL 限制](https://www.postgresql.org/docs/current/limits.html)，它是“250 - 1600 取决于列类型”。见表下注。列类型会影响它，因为在 PostgreSQL 中，行可能最多 8kb（一页）宽，它们不能跨页。列中的大值是可以的，因为 TOAST 可以处理这个问题，但是您可以容纳多少列是有限制的，这取决于所使用的未 TOAST 数据类型的宽度。

（严格来说，这指的是可以存储在磁盘行中的列；查询可能能够使用比这更宽的列集。我不建议依赖它。）

如果您甚至考虑接近列限制，您可能会遇到问题。

将电子表格映射到关系数据库似乎是世界上最简单的事情 - 将列映射到列，将行映射到行，然后就可以了。对？实际上，电子表格是巨大的自由形式怪物，不强制执行任何结构，并且非常笨重。关系数据库旨在处理*更多*行，但要付出代价；在 PostgreSQL 的情况下，部分成本是限制它喜欢这些行的宽度。当面对 Joe User 创建的电子表格时，这可能是一个真正的问题。

一种“解决方案”是将它们分解为[EAV](http://en.wikipedia.org/wiki/Entity%E2%80%93attribute%E2%80%93value_model)，但使用起来非常缓慢和丑陋。更好的解决方案是尽可能使用数组、复合类型`hstore`、、json、xml 等。

但最后，有时最好的答案是使用电子表格分析电子表格。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-26T17:54:28.633

对于可能发现此信息有用的其他人，答案是 1663，具体取决于此帖子 [http://archives.postgresql.org/pgsql-admin/2008-05/msg00208.php的列类型](http://archives.postgresql.org/pgsql-admin/2008-05/msg00208.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-01T22:27:53.737

使用 JSON/JSONB 类型，几乎不需要一个表中有很多列。

在极少数情况下，如果您要达到数据库系统的最大列限制，也许您可​​以使用电子表格的 RDBMS 实现，其表如下所示：

```
create table wide_table(
id serial not null primary key
,rownum integer not null
,colnum integer not null
,colname varchar(30) not null
,coltype varchar(30) not null
,nullable boolean   not null
,collen  integer
,colprec integer
,colscale integer
,colvalue raw(2000)
,unique (rownum,colnum)
); 
```

这将允许几乎无限数量的列，但使用它会不那么简单。

# java - 应用程序在 1 小时后失去当前活动

> ID：12606843
> 
> 赞同：1
> 
> 时间：2012-09-26T17:03:41.137
> 
> 标签：java, android, service, android-activity, multitasking

我的应用程序非常简单，我有一些活动（一个`LoginActivity`是启动器和主要活动）。然后我有一些其他活动，最后是一个`RouteActivity`启动服务的活动。

`LocationService`扩展`Service`并`startForeground`带有通知。该服务刚刚启动`LocationListener`并注册每个新的 GPS 定位点。该服务似乎工作得很好，如果我触摸通知图标，它会将我带回到我的应用程序活动从它开始的地方（而不是从登录活动）。

现在这是问题所在，如果我触摸应用程序图标（在 Android 启动器上），它有时会将我的应用程序启动到右侧和当前 activty `RouteActivity`，但大约 1 小时后，如果我触摸应用程序图标，它只会从头重新启动应用程序并启动`LoginActivity`.

但是，如果我触摸我的服务通知，如果让我回到右侧和后台活动。我的服务也没有被杀死，从来没有，所以它似乎工作得很好，与应用程序相关的对象和变量仍然存在。

所以呢 ？我有 2 个我的应用程序正在运行？我对这个有点迷茫，尤其是它似乎与时间有关。

这个“错误”是在 Android 2.X 上产生的，我无法在 Android 4.X 上重现它。调试有点困难，因为我必须让应用程序运行大约 1 小时。在那之后，我在 logcat 中没有特殊消息。

我注意到一些事情：ActivityManager 消息很奇怪，如果我通过通知中心的服务通知启动我的应用程序，它会记录：

`Starting activity: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x14000000 cmp=com.wayzup.wayzupapp/com.wayzup.activity.RouteActivity bnds=[0,149][320,213]`

虽然如果我通过它记录的应用程序图标启动它，但显示的实际活动不是登录活动，而是实际启动服务的实际 RouteActivity。（大约 1 小时后，它实际上`LoginActivity`是启动的）。

```
 Starting activity: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=com.wayzup.wayzupapp/com.wayzup.activity.LoginActivity bnds=[3,338][77,417] 
```

每次我启动 RouteActivity 我也有这个日志

```
Activity idle timeout for HistoryRecord{44e78808 com.wayzup.wayzupapp/com.wayzup.activity.RouteActivity} 
```

这与我的另一个问题有关：[Android前台服务失去上下文](https://stackoverflow.com/questions/12564620/android-foreground-service-lose-context) 但我认为这是真正的问题并且更准确。

如果你愿意，我可以发布一些代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T17:44:17.353

听起来您正在依靠活动任务堆栈来维护您的所有状态。我建议你改用类似的东西[PreferenceManager.getDefaultSharedPreferences()](http://developer.android.com/intl/de/reference/android/preference/PreferenceManager.html#getDefaultSharedPreferences%28android.content.Context)之类的东西来维护登录/注销状态。这样，如果其活动被终止并重新创建，您就可以生存。

我倾向于这样做的方式是让您的主要活动成为您希望用户在登录后看到的活动。`onCreate()`检查用户是否已登录，如果未登录，则将`startActivityForResult()`其发送到登录活动。将登录状态保留在某处，以便您可以在主要活动的`onCreate()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T14:52:34.113

我终于解决了我的问题。现在，活动是否被杀死并不重要，只要服务还活着就可以了。在我的`LoginActivity`检查中，我检查我的服务是否正在运行，如果它正在运行，我将启动`RouteActivity`绑定到它的`singleTop`. Si 我总是有它的单一和相同的实例。

```
@Override
public void onResume(){
        super.onResume();
        if (checkMyServiceRunningOrNot()){
            restoreAcitivty();
        }
    }

public void restoreAcitivty(){
        Intent intent = new Intent(this, RouteActivity.class); 
        intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(intent); 
    } 
```

# struts2 - 具有属性但没有值的 Struts 2 TextField 标记

> ID：12606846
> 
> 赞同：3
> 
> 时间：2012-09-26T17:03:45.800
> 
> 标签：struts2

我有以下格式的 html 标签：

```
<input type="text" name="username" id="username" placeholder="Enter your username" required> 
```

我正在尝试将其转换为由 struts 标记呈现（以便在验证错误时，页面重新加载用户输入的值）：

```
<s:textfield name="username" id="username" placeholder="Enter your username" required /> 
```

不幸的是，struts 抛出了以下异常：

```
org.apache.jasper.JasperException: /index.jsp(58,110) PWC6212: equal symbol expected
    at org.apache.jasper.compiler.DefaultErrorHandler.jspError(DefaultErrorHandler.java:49)
    at org.apache.jasper.compiler.ErrorDispatcher.dispatch(ErrorDispatcher.java:344)
    at org.apache.jasper.compiler.ErrorDispatcher.jspError(ErrorDispatcher.java:101)
    at org.apache.jasper.compiler.Parser.parseAttribute(Parser.java:220)
    at org.apache.jasper.compiler.Parser.parseAttributes(Parser.java:170)
    at org.apache.jasper.compiler.Parser.parseCustomTag(Parser.java:1394)
    at org.apache.jasper.compiler.Parser.parseElements(Parser.java:1636)
    at org.apache.jasper.compiler.Parser.parse(Parser.java:152)
    at org.apache.jasper.compiler.ParserController.doParse(ParserController.java:210)
    at org.apache.jasper.compiler.ParserController.parse(ParserController.java:111)
    at org.apache.jasper.compiler.Compiler.generateJava(Compiler.java:157)
    at org.apache.jasper.compiler.Compiler.compile(Compiler.java:370)
    at org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:595)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:344)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:457)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:351)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:917)
    at org.apache.catalina.core.ApplicationFilterChain.servletService(ApplicationFilterChain.java:398)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:185)
    at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:88)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:217)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:185)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:369)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:109)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:97)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:100)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:78)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:35)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381) 
```

我猜 Struts 不喜欢没有价值的“必需”。如何编辑我的 Struts 标记以附加没有值的“必需”文本？我们有一个现有的 javascript 库，它依赖于“required”而不是“required=""”或其他东西的存在。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-08-27T09:13:42.387

**这是任何发现此问题并运行 Struts 2.3.12 或更高版本的人的答案 - 网络上似乎很少有关于此更改的文档...**

在 2.3.12 版本之前，struts2 有一个可以添加到输入字段的必需属性。此属性纯粹是根据需要标记字段，并且可用于通过使用 .ftl 文件在字段旁边添加所需的星号/星号（例如） - 它没有运行任何验证。在您的代码中可能看起来像这样：

```
<s:textfield key="name" type="text" required="true"/> 
```

然而，在 2.3.12 版本之后，required 属性被替换为 requiredLabel 属性。它的工作方式完全相同，可能如下所示：

```
<s:textfield key="name" type="text" requiredLabel="true"/> 
```

此更改是因为引入了 html5 必需属性。但是请注意，如果您目前想在 struts2 中使用它，则当前不能在不提供值的情况下使用它（正如 html5 规范所说的那样） - 这似乎破坏了 struts。所以例如这将不起作用：

```
<s:textfield key="name" type="text" required /> 
```

您将需要编写：

```
<s:textfield key="name" type="text" required="required" /> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-26T18:20:05.727

您需要完全设置“必需”属性：

```
<s:textfield ... required="required" /> 
```

这就是 JSP/XHTML 的工作方式，AFAIK。

我无法想象 JS 库会关心是否有值。

# iphone - iOS 6：是什么改变让这个 View Controller Hierarchy 崩溃了？

> ID：12606847
> 
> 赞同：4
> 
> 时间：2012-09-26T17:03:49.830
> 
> 标签：iphone, objective-c, uiviewcontroller, uinavigationcontroller, ios6

以下是在我的 AppDelegate 中：

```
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

customViewController = [[CustomViewController alloc] initWithNibName:@"CustomViewController" bundle:nil];

self.navigationController = [[UINavigationController alloc] initWithRootViewController:customViewController];

[self.navigationController setNavigationBarHidden:YES];

self.window.rootViewController = self.navigationController;

[self.window makeKeyAndVisible]; 
```

在实际的 XIB 中，视图与“文件所有者”相关联，这是我唯一的关联。

XIB 层次结构：

```
Navigation Controller
    - View Controller - Root View Controller
        -View (Associated with File's Owner) 
```

抱歉，如果我不明白这一点，它在以前启动的应用程序上运行良好，但我知道这并不意味着它是正确的。

编辑：对不起，这是我得到的错误：

***** 由于未捕获的异常“UIViewControllerHierarchyInconsistency”而终止应用程序，原因：“一个视图一次最多只能与一个视图控制器关联！视图 < UIView: 0xa192d00; 帧 = (0 20; 320 460); 自动调整大小 = W+H；layer = <CALayer: 0xa192d60>> 与 <UIViewController: 0xa195c70> 相关联。在将此视图与 <CustomViewController: 0xa1802a0> 关联之前清除此关联。'****

 *** * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-01T00:53:46.067

确保您的视图界面在其层次结构中没有额外的视图控制器。请参阅下面的屏幕截图

前：
![前](../Images/94b487d73b80fb8af0d566b807ba26b2.png)

后：
![后](../Images/278ecd7a04d5ed272adc9dc62dfc58dd.png)**

# asp.net-mvc - 内网中的 MVC 3 路由

> ID：12606848
> 
> 赞同：0
> 
> 时间：2012-09-26T17:03:51.233
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

我用 MVC 开发了一个网站，现在我需要把这个网站放在生产服务器上。但是，在我的机器中，url 是 http:\localhost:1600\ 但在服务器中，站点是 http:\10.132.130.122\MyIGF

我认为这个问题与路线有关，因为我的网站在 HTML 中有此代码

```
<link href="/Contenct/site.css" />
<a href="/Home/Login">Login</a> 
```

并且/不是正确的站点路线。

正确的生产服务器是

```
<link href="MyIGF/Contenct/site.css" />
<a href="MyIGF/Home/Login">Login</a> 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T17:08:34.657

这不是路由问题，而是链接创建方式的根本缺陷。

如果您使用该`Url.Content`指令，mvc 将在您的内容文件上放置正确的路径。

```
<input type="image" src="<%:Url.Content("~/img/submit.png")%>" /> 
```

对于指向操作的链接，也有`Url.Action`可以创建正确链接的链接。

```
<a href="<%:Url.Action("Home", "Login")%>">Login</a> 
```

# xml - cakephp 如何从 xml web 服务读取数据？

> ID：12606849
> 
> 赞同：2
> 
> 时间：2012-09-26T17:03:51.593
> 
> 标签：xml, web-services, cakephp

我需要做什么才能从这个 xml 服务接收日期： [http](http://www.OpenLigaDB.de/Webservices/Sportsdata.asmx?WSDL) ://www.OpenLigaDB.de/Webservices/Sportsdata.asmx?WSDL ？

有谁知道如何从 xml webservice 获取数据的好教程？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T17:55:56.990

做这样的事情：

```
function xml() {

  // import XML class 
  App::import('Xml'); 

  // your XML file's location or however you want to get it
  $file = "my_xml_file.xml"; 

  // now parse it 
  $parsed_xml =& new XML($file); 
  $parsed_xml = Set::reverse($parsed_xml);

  // see the returned array 
  debug($parsed_xml); 
} 
```

然后通过多维数组访问它。瞧！

# regex - 阿韦伯正则表达式拼图

> ID：12606850
> 
> 赞同：0
> 
> 时间：2012-09-26T17:03:53.867
> 
> 标签：regex, parsing, email, puzzle

我正在使用 Aweber 的自动电子邮件解析来进行 Unbounce 表单提交，似乎他们的默认正则表达式有点不稳定：

他们将电子邮件与`\nemail:\s+(.+?)\n`姓名与`\nname:\s+(.+?)\n`

问题是，因为我没有询问用户的姓名，他们的正则表达式会自动抓取下一行，即 ===== FORM DATA =====，因此它会通过电子邮件向用户发送“Hi =====表格数据 =====！”

以下是取消退回电子邮件的示例：

```
page_name:
page_id: 2b78ddde-e7bb-11e1-9fde-12313e00ec56
page_url: http://www1.sample.com
variant: C
email: sample@gmail.com
name:

===== FORM DATA =====

email: [&quot;sample@gmail.com&quot;]
ip_address: 88.253.**.**

--
The Unbounce Team
Toll Free 1-888-515-9161
support@unbounce.com
http://unbounce.com 
```

如果没有值，我如何修改他们的正则表达式，使其在行尾停止？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T17:05:11.293

将名称正则表达式更改为以下内容：

```
\nname:[ \t]+(.+?)\n 
```

这里的更改是替换`\s`为`[ \t]`，因为`\s`将匹配换行符。

如果未提供名称，这将导致匹配失败，如果您希望它仍然匹配但将空字符串放入组中，则可以使用以下内容：

```
\nname:[ \t]*(.*?)\n 
```

正如 Evandro Silva 所指出的，您可以通过将 or 分别替换为 or 来提高此正则表达式的`.+?`效率`.*?`。`[^\n]+``[^\n]*`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T17:07:38.437

尝试正则表达式模式`[\n\r]name:[^\S\n\r]*([^\n\r]*)`

# javascript - Facebook 认证的推荐不起作用

> ID：12606861
> 
> 赞同：0
> 
> 时间：2012-09-26T17:04:19.267
> 
> 标签：javascript, facebook, authorization

我对“身份验证”对话框中的经过身份验证的推荐有疑问。当用户第一次使用应用程序并请求授权时，他/她会得到“应用程序将收到：您的基本数据”。这与我在 Facebook 开发者应用程序站点中预览身份验证对话框时显示的内容不同。我使用以下代码：

```
<script>
// Load the SDK Asynchronously
(function(d){
 var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
 if (d.getElementById(id)) {return;}
 js = d.createElement('script'); js.id = id; js.async = true;
 js.src = "//connect.facebook.net/en_US/all.js";
 ref.parentNode.insertBefore(js, ref);
}(document));

// Init the SDK upon load
window.fbAsyncInit = function() {
  FB.init({
  appId      : '<%= Facebook::APP_ID %>', // App ID
  channelUrl : '//'+window.location.hostname+'/channel', // Path to your Channel File
  status     : true, // check login status
  cookie     : true, // enable cookies to allow the server to access the session
  xfbml      : true  // parse XFBML
});

url = '<%= users_path %>'
// listen for and handle auth.statusChange events
FB.Event.subscribe('auth.statusChange', function(response) {
 if (response.authResponse) {
  // user has auth'd your app and is logged into Facebook
  FB.api('/me', function(me){
    if (me.name) {
      window.open(url);
    }
  })
} else {
  // user has not auth'd your app, or is not logged into Facebook
  document.getElementById('auth-loggedout').style.display = 'block';
} 
```

});

```
// respond to clicks on the login and logout links
document.getElementById('auth-loginlink').addEventListener('click', function(){
FB.login(); 
```

});

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T18:01:33.797

将 FB.login() 替换为

```
FB.login(function(response) {
   // handle the response
 }, {scope : 'user_likes'});  }); 
```

# scrollbar - Sencha EXT JS datagrid滚动条专门在列上？

> ID：12606870
> 
> 赞同：2
> 
> 时间：2012-09-26T17:04:59.747
> 
> 标签：scrollbar, extjs, mouseover, gridpanel

我们有一个带有列的网格面板，显示效果很好。特别是一列是一个非常大的字符串。我们想在这一列中添加一个滚动条，只是为了容纳大墙的文本。

这可以用 Sencha EXT JS 完成吗？或者如果滚动条不能完成，那么鼠标悬停在列中显示整个文本怎么样？

 `var secondTab = Ext.create('Ext.grid.Panel', {`

 ````
 columnWidth: 0.60,
        xtype: 'gridpanel',
        store: standardsResultsStore,
        autoheight: true,
        columns: [
            {
                id       :'standardName',
                text   : 'Standard Name',
                flex: 1,
                sortable : true,
                dataIndex: 'standard'
            },
            {
                text   : 'Description',
                flex    : 2,
                sortable : true,
                dataIndex: 'description_standard'
            }
        ]

    }); 
````  `* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T14:31:18.700

我用 CSS 做的，并将 tdCls 添加到特定列

`.custom-column .x-grid-cell-inner { white-space:normal; } --- in tab tdCls: 'custom-column'``

# database - PDF文本提取器

> ID：12606873
> 
> 赞同：0
> 
> 时间：2012-09-26T17:05:15.690
> 
> 标签：database, pdf, product, extractor

我需要将存储在主要零售连锁店（例如家乐福、Lidl 等）的广告传单中的信息上传到数据库中。

我找到的最快的解决方案是：

1.  我从主站点下载 PDF

2.  我启动了一个名为 pic2filex 的程序，它立即从剪贴板保存图像

3.  使用快照工具剪辑所有各种文章

4.  启动一个程序，将图像加载到数据库中，并为每个插入产品名称和价格

有没有更快的方法？

# objective-c - MKMapView 查找位置并将其显示给用户

> ID：12606879
> 
> 赞同：0
> 
> 时间：2012-09-26T17:05:44.630
> 
> 标签：objective-c, ios, mkmapview

![在此处输入图像描述](../Images/be71ca4c7f6452b5299404c38cb13236.png)

我知道名为 A 的玫瑰针的位置，就像在图片中一样……现在我想做的是这个。

当我的应用程序的用户在半径为 1 公里的红色圆圈中时，我的应用程序必须说他在埃菲尔铁塔。

我怎样才能做到这一点？我知道我必须检索该位置，但在那之后我如何才能从当前位置的中心寻找 1 公里的半径？谢谢

*** 编辑 *** 谢谢我正在使用

```
 if ([region containsCoordinate:self.map.userLocation.coordinate]) {
                    miTrovoIn = street;
                } 
```

但是，如果我不在地图中显示我的位置，则此代码不起作用。如果我检查我的位置而不是分享我的位置，它会起作用。如何在没有用户交互的情况下强制应用自动获取我的位置？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T17:45:26.203

创建一个 CLRegion。来自文档：

`The CLRegion class defines a geographical area that can be tracked. When an instance of this class is registered with a CLLocationManager object, the location manager generates an appropriate event whenever the user crosses the boundaries of the defined area.`

将中心和半径的属性设置为所需的值。调用 startMonitoringForRegion:desiredAccuracy。如果您需要测试用户的位置而不是使用当用户越过您定义的区域边界时生成的通知，CLRegion 类有一个 containsCoordinate: 实例方法。

```
double lat = 48.86;
double lng = 2.29;
CLLocationCoordinate2D centerCoordinate = CLLocationCoordinate2DMake(lat, lng);
CLRegion *region = [[CLRegion alloc] initCircularRegionWithCenter:centerCoordinate radius:1000.0 identifier:@"your identifier"]; 
```

[http://developer.apple.com/library/IOs/#documentation/CoreLocation/Reference/CLRegion_class/Reference/Reference.html](http://developer.apple.com/library/IOs/#documentation/CoreLocation/Reference/CLRegion_class/Reference/Reference.html)

# sql - Oracle Form 中的旧值和新值

> ID：12606881
> 
> 赞同：6
> 
> 时间：2012-09-26T17:05:50.697
> 
> 标签：sql, oracle, plsql, oracleforms

我正在使用 Oracle Forms。我有一个名为`SOLD_TO_CUST_PARTY_NAME`. 如果我检测到字段值的变化，我必须执行一个过程。我尝试使用 when_validate，但即使您只是单击该字段并移动到另一个字段，它也会执行（无论您是否更改值，验证总是会发生）。无论如何，只有在字段被修改时，我才能检查`:old`和或类似的东西来执行一个过程？`:new`

**编辑：** 不能使用个性化。它必须与`pl/sql`.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-26T19:43:49.890

有一个称为数据库值的属性，可让您检查该字段是否已被修改，如果没有，您只需退出验证触发器。

前任。

```
    开始

    IF :BLOCK.ITEM = GET_ITEM_PROPERTY('BLOCK.ITEM', database_value) THEN
     返回;
    万一;

     /* 验证 */

    结尾;

```

# ruby-on-rails - 为什么 heroku 不运行我的 procfile 进程？

> ID：12606883
> 
> 赞同：4
> 
> 时间：2012-09-26T17:06:06.533
> 
> 标签：ruby-on-rails, heroku, unicorn, foreman

当我`foreman start`在 localhost 上运行时，Procfile 中的所有进程都正常运行：

#Procfile

```
web: bundle exec unicorn -p $PORT -c ./config/unicorn.rb
resque: env TERM_CHILD=1 QUEUE=* bundle exec rake resque:work
sqs_converted: bundle exec rake sqs:listen_converted
sqs_failed: bundle exec rake sqs:listen_failed 
```

* * *

```
$ foreman start

13:52:07 sqs_failed.1     | started with pid 3521
13:52:07 web.1            | started with pid 3518
13:52:07 sqs_converted.1  | started with pid 3520
13:52:07 resque.1         | started with pid 3519 
```

但是当我部署到 heroku 并运行时，`heroku ps`我运行的只是一个 web.1 实例

```
=== web: `bundle exec unicorn -p $PORT -c ./config/unicorn.rb`
web.1: up for 8m 
```

无法弄清楚发生了什么...谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T17:12:13.270

您仍然需要使用`heroku ps:scale resque=1 sqs_convert=1 sqs_failed=1`. 您可以在 Heroku 文档中阅读有关扩展进程的所有内容以及可以在[扩展进程形成中使用的命令。](https://devcenter.heroku.com/articles/scaling)

# c# - Visual Studio 编译器错误和警告可以格式化吗？

> ID：12606888
> 
> 赞同：0
> 
> 时间：2012-09-26T17:06:39.543
> 
> 标签：c#, visual-studio, namespaces, formatting, compiler-errors

具体来说，我希望从泛型类型中删除名称空间。在我的情况下，这些对错误消息几乎没有什么价值，但使错误很难破译。

例如，一条错误消息说：

> VendorName.LayerName1.FolderName1.ClassName1[VendorName.LayerName2.FolderName2.GenericType1, VendorName.LayerName2.FolderName2.GenericType2, VendorName.LayerName2.FolderName2.GenericType3].Property1 无法实现 VendorName.LayerName2.FolderName3.InterfaceName1[VendorName.LayerName2\. GenericType1, VendorName.LayerName2.FolderName2.GenericType2, VendorName.LayerName2.FolderName2.GenericType3].Property1 因为它没有匹配的返回类型 System.Collections.Generic.Dictionary[VendorName.LayerName1.FolderName1.ClassName2[VendorName.LayerName2.FolderName2 .GenericType1、VendorName.LayerName2.FolderName2.GenericType2、VendorName.LayerName2.FolderName2.GenericType3]、VendorName.LayerName1.FolderName1.ClassName3[VendorName.LayerName2.FolderName2.GenericType1、VendorName.LayerName2.FolderName2。GenericType2, VendorName.LayerName2.FolderName2.GenericType3]]

没有命名空间会更清晰：

> ClassName1[GenericType1, GenericType2, GenericType3].Property1 无法实现 InterfaceName1[GenericType1, GenericType2, GenericType3].Property1，因为它没有匹配的返回类型 Dictionary[ClassName2[GenericType1, GenericType2, GenericType3], ClassName3[GenericType1, GenericType2, GenericType3] ]

请注意，我已经分别替换了 [ 和 ] 的“小于”和“大于”符号，因为这里的标记不允许我转义这些字符（至少我没有弄清楚）。

这样的事情可能吗？我正在使用VS2012。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T17:22:59.257

据我所知，没有办法删除命名空间。我猜你要么必须使用较短的名称，要么使用你所拥有的。

# java - 如何从 sun bug 数据库中的内部版本号中找到 jdk 版本

> ID：12606889
> 
> 赞同：1
> 
> 时间：2012-09-26T17:06:40.013
> 
> 标签：java, jvm-crash

我在使用的 JDK 中遇到了一个错误，我在 Sun 的（Oracle 的）错误数据库中找到了对它的[引用。](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7042153)它说固定版本是 hs21(b13)、7(b143)，但我不知道如何确定修复所在的 JDK 版本。

我看过这篇文章：[Sun's bug database 中的 Java 版本名称](https://stackoverflow.com/questions/196170/java-version-names-in-suns-bug-database)，但它并没有真正回答我的问题。

编辑：我试图找出 JDK 的哪个版本（例如 1.7.0_07）对应于 7（b143）。换句话说，我想知道修复此错误的最早发布版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T17:18:32.783

`hs`用于**HotSpot**并且`7`用于**JRE**。

所以 JRE 7, build 143 和 HotSpot JVM 21.0 build b13

如果您`java -version`在控制台提示符下执行此操作，它会告诉您所拥有的 JDK 和构建版本。

您所指的错误显示了在什么环境中检测到它：

```
# JRE version: 7.0-b139
# Java VM: Java HotSpot(TM) Client VM (21.0-b09 mixed mode, sharing solaris-x86 ) 
```

所以它发生在`7(b139)`and`hs21(b09)` 并固定在`7(b143)`and`hs21(b13)`

我希望这有帮助。

# javascript - 使用按钮跨浏览器进行卸载

> ID：12606890
> 
> 赞同：1
> 
> 时间：2012-09-26T17:06:46.283
> 
> 标签：javascript, dom-events, window.onunload

我想知道是否可以让 Javascript 中的卸载方法执行 a`button.click;`或 a`document.getElementById('target').click();`

这样做的原因是我想清除浏览器中的信息，但我似乎无法让卸载方法正常工作。但我什至不知道卸载方法是否能够做一个`button.click`或一个`document.getElementById('target').click();`这个方法可以或不能做的事情的列表？这是我试图开始工作的代码。

```
 window.onunload=leave;

     function leave() {
//alert("Leaving");
    document.getElementById('kioskform:broswerCloseSubmit').click();

} 
```

该警报似乎显示在所有内容（“IE，FireFox，Safari”）中，但在 Chrome 中（“不知道为什么），但我似乎无法获得用于处理卸载方法的明确选项。更不用说我想知道是否有一种好方法可以检测个人正在使用哪个浏览器来加载卸载脚本的不同部分，非常感谢任何想法或建议或建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T18:46:02.527

如果你要使用[`jQuery`](http://www.jquery.com) ，你可以使用[`DirtyForm`](http://archive.plugins.jquery.com/project/dirtyform) 插件。这将完成您正在尝试做的事情。

# c++ - 使用值为 std::shared_ptr 的映射是否是具有多索引类列表的良好设计选择？

> ID：12606891
> 
> 赞同：6
> 
> 时间：2012-09-26T17:06:46.377
> 
> 标签：c++, c++11, shared-ptr, stdmap, boost-multi-index

问题很简单：我们有一个类，它有成员 a,b,c,d... 我们希望能够快速搜索（键是一个成员的值）并通过为 a或 b 或 c ...我想拥有一堆
`std::map<decltype(MyClass.a/*b,c,d*/),shared_ptr<MyClass>>`.

1）这是个好主意吗？

2) boost multi index 在各个方面都优于这种手工制作的解决方案吗？

出于简单/性能的原因，PS SQL 是不可能的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T19:27:42.773

1.  Boost MultiIndex 可能有一个明显的缺点，它会在集合的每次突变后尝试使*所有索引保持最新。*如果您有一个包含许多单独写入的数据加载阶段，这可能会造成很大的性能损失。

2.  Boost Multi Index 的使用模式可能不符合项目（成员）的编码风格（和品味......）。这应该是一个小缺点，但我想我会提到它

3.  如前所述`ildjarn`，Boost MI 目前还不支持移动语义

否则，在大多数情况下，我会认为 Boost MultiIndex 更胜一筹，因为您不太可能达到它收到的测试量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T01:39:46.083

您想考虑将所有映射包含在一个类中，任意决定其中一个容器作为存储“真实”对象的容器，然后只使用`std::map`带有映射类型的原始指针的第一个元素`std::map`.

但是，如果您需要复制这些地图，这将更加困难。

# javascript - Markerclusterer - 根据连续标记数组中的“id”触发特定标记的点击事件

> ID：12606894
> 
> 赞同：0
> 
> 时间：2012-09-26T17:06:50.167
> 
> 标签：javascript, arrays, google-maps, markerclusterer

在实现 MarkerClusterer 之前，我已经能够通过首先加载标记数组来触发特定标记的点击事件（然后会显示一个特定于该标记的面板），如下所示：

```
markers[marker.id] = marker; 
```

（其中 marker.id 是从 JSON 中绘制标记时设置的属性，对应于我数据库中的用户记录）

然后调用：

```
google.maps.event.trigger(markers[id], 'click'); 
```

（其中 'id' 是我要为其单击标记的用户 ID）

但是现在我想使用 MarkerClusterer，它不会使用我上面使用的数组加载方法进行聚类，我假设因为我的标记数组中存在“间隙”，因为我没有为所有用户绘制标记。

...当我像这样加载我的标记数组时，MarkerClusterer 工作：

```
markers.push(marker); 
```

我假设这给出了一个连续的数组，没有 MarkerClusterer 可以读取的间隙......但现在我无法通过它在数组中的索引触发正确的标记点击。

所以看来我需要一种在基于marker.id的连续标记数组中找到.indexOf标记的方法......

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T18:09:44.777

您至少有 2 个选项：

1.  遍历标记的“连续”数组，寻找具有正确 id 的标记（效率低下，需要对大量标记进行额外处理），然后在其上触发 click 事件。
2.  还创建您的关联数组，将其用于触发点击事件（效率低下，需要额外数组的内存）

# c - 在 C 中创建双精度并将它们插入排序数组的循环

> ID：12606895
> 
> 赞同：1
> 
> 时间：2012-09-26T17:07:11.917
> 
> 标签：c, sorting

假设我有一组排序的双打。

```
{ 0.124, 4.567, 12.3 } 
```

代码的另一部分创建了一个正的非零双精度，并且需要在保持排序的同时插入到该集合中。例如，如果创建的 double 是`7.56`，则最终结果是，

```
{ 0.124, 4.567, 7.56, 12.3 } 
```

在我的代码中，这个“创建双精度并在排序集中插入”过程会重复很多次。可能 500k 到 100 万次。我不知道总共会创建多少双打，但我知道上限。

**试图**

我天真的第一种方法是创建一个长度 = 上限的数组并用零填充它，然后将初始的双精度集添加到其中（“添加”=用双精度值替换 0 值条目）。每当创建一个 double 时，我将它添加到数组中并进行插入排序，我读到这对于排序有序数组很有用。

**问题**

我感觉运行 500k 到 100 万个插入插槽将是一个严重的性能问题。（或者我错了吗？）在 C 中是否有更有效的数据结构和/或算法来执行此操作？

**编辑：**

我想保持集合排序的原因是因为在每次“创建双精度并在排序集合中插入”过程之后，我需要能够查找该集合中的最小元素（并可能通过将其替换为 0 来删除它）。我认为最好的方法是保持集合排序。

但如果不是这样，也许还有其他选择？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T17:23:26.940

由于您要做的就是在每次迭代中提取最小元素，因此请改用[最小堆](http://en.wikipedia.org/wiki/Heap_%28data_structure%29)。您可以将它们实现为具有 O(1)*插入*、O(1)*查找最小值*和 O(1)*减少键*操作（但请注意，删除最小元素总是需要 O(log n) 时间）。对于您正在做的事情，堆将大大加快。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T17:11:25.153

您可以使用二进制搜索来查找插入点，然后在其中插入值，而不是运行插入排序。但这很慢，因为您可能需要多次移动大量数据（想想如果随机数据的排序与您需要的相反，会发生什么情况，时间会是`O(N^2)`）。

最快的方法是先插入，然后一次对所有内容进行排序。如果这不可能，请考虑用自平衡有序树结构（例如[RB-Tree](http://en.wikipedia.org/wiki/Red%E2%80%93black_tree) ）替换您的数组。

# javascript - 浏览器和 Nginx 之间的 HTTP POST 延迟约 1 分钟

> ID：12606898
> 
> 赞同：5
> 
> 时间：2012-09-26T17:07:18.177
> 
> 标签：javascript, backbone.js, nginx, xmlhttprequest, tastypie

当从客户端 javascript 发布到我们的服务器时，我们最近遇到了一个非常奇怪但非常一致的延迟。

**这是我们的技术堆栈，从前到后：**

1.  自定义 javascript 客户端代码
2.  骨干网.js
3.  [自定义 Backbone.sync() 实现](https://gist.github.com/3789008)
4.  jQuery.ajax() (1.7.2)
5.  XmlHttpRequest
6.  浏览器（已在 Firefox 和 Chrome 上验证）
7.  互联网
8.  Nginx 前端
9.  内网（通过 Nginx`http://`上游）
10.  Nginx 后端
11.  Gunicorn（通过 Nginx`unix://`上游套接字）
12.  姜戈 1.4
13.  django-tastypie

（旁注：您是否曾经对Web 开发的*复杂性感到敬畏？）*

**这是事件的时间表：**

1.  客户端代码调用`.save()`新创建的 Backbone [`APIModel`](https://gist.github.com/3789008#L358)。
2.  我们的自定义[`.sync()`](https://gist.github.com/3789008#L245)方式[`client.send()`](https://gist.github.com/3789008#L180)将新创建的对象分派到[`$.ajax()`](http://api.jquery.com/jQuery.ajax/).
3.  生成的 XmlHttpRequest POST。该请求出现在浏览器开发工具的 Network 窗格中，标记为*pending*。
4.  HTTP 请求到达 Nginx，Nginx 将其路由到 django-tastypie 后端。
5.  Tastypie 迅速且完美地处理请求，创建资源，并返回 201 CREATED 响应，`Location`标头指向新资源。
6.  Nginx 记录请求并（表面上）发送响应。
7.  **1.1 分钟过去了，**在此期间， “网络”窗格中的请求仍被标记为*待处理。*
8.  该请求在浏览器的网络窗格中被标记为完成。
9.  jQuery`xhr`触发成功处理程序
10.  我们的自定义 API 客户端的[成功处理程序](https://gist.github.com/3789008#L223)检测到 201 响应代码并触发对 Location 的后续 GET 请求。
11.  通常的事情发生了，GET 迅速响应，最外面的`$.Deferred()`对象解析，触发任何关联的客户端代码成功处理程序。

**其他需要考虑的细节：**

1.  同一堆栈中的 GET 请求和 PUT 请求会迅速解析。
2.  当通过专用的 HTTP 客户端直接与最外层的 Nginx 交互时，与相关请求相同的 POST 请求会迅速解决。
3.  删除特殊情况 201 处理程序和随后的 GET 对错误没有影响。
4.  延迟*始终*为1.1 分钟。我曾经`console.time()`确定延迟在 65,000 毫秒范围内变化。
5.  延迟仅出现在此配置中。它不会出现在我们稍微简单的开发设置中。

**我正在做的未经证实的假设：**

1.  一旦 Nginx 记录一个请求，响应就会被捆绑起来，并与手写的感谢信一起发送给客户端。
2.  这不是浏览器或 jQuery 中的错误。

原谅这个艰苦的细节，但我已经尽力消除变量，目前，我可以放心地说问题是以下之一：

1.  宇宙物理结构的缺陷
2.  我们心智感知模型的缺陷
3.  我们还没有考虑过的其他事情

我希望是#3。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T23:20:41.947

谜团已揭开！这是`Content-Length`标题，或者更确切地说，缺少标题。@MaxDounin 的想法是正确的，只是我没有遵循它。

启用 Django`django.middleware.http.ConditionalGetMiddleware`就成功了。（此中间件设置`Content-Length`标头。）

# sharepoint - SharePoint 中的共享文件夹链接

> ID：12606904
> 
> 赞同：0
> 
> 时间：2012-09-26T17:07:34.433
> 
> 标签：sharepoint, sharepoint-2010

有没有办法可以将本地路径/链接添加到 sharepoint2010，这样当我的团队单击该链接时，它会将他们带到路径中指定的共享驱动器？我已经尝试过 sharepoint 中的链接，但它不接受它，因为链接必须以 http 开头。但是，我要分享的链接是本地共享文件夹（例如，D:\Test\Evaluation）。任何想法？？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-04T14:47:21.170

除了`file:///`确保使用服务器/文件夹路径的 UNC 形式，例如 file:///\\servername\toplevelfolder\subfolder\

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T21:58:08.920

您必须在共享驱动器路径前添加“file:///”，以便 SharePoint 2010 可以接受它

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-10-23T16:40:10.163

我们的解决方案专门针对仅允许 http:// 链接的 SharePoint 2010 链接列表。如果您希望能够使用 file:// 位置而不是 http:// 位置，则需要使用 JQuery。请按照此处的说明进行操作：

[http://www.sharepointindepth.com/change-hyperlink-field-value-from-http-to-file-on-a-sharepoint-form/](http://www.sharepointindepth.com/change-hyperlink-field-value-from-http-to-file-on-a-sharepoint-form/)

# github - 部署 Hubot 时出现大量错误

> ID：12606907
> 
> 赞同：0
> 
> 时间：2012-09-26T17:07:40.500
> 
> 标签：github, chatbot, hubot, campfire

我正在 Linux 上安装 hubot，并按照[说明进行操作](https://github.com/github/hubot/wiki/Deploying-Hubot-onto-UNIX)，没有收到任何错误。

但是，当我尝试实际运行我的 hubot 时，我遇到了问题。首先，我尝试根据链接教程末尾的说明对 hubot 进行守护。`start hubot`返回错误`start: Unknown job: hubot`。所以我备份并尝试`/opt/hubot/bin/hubot --name Ro\ Bot --adapter campfire`并得到这一系列错误：

```
 /opt/hubot/bin/hubot: line 11: Hubot: command not found
/opt/hubot/bin/hubot: line 12: Fs: command not found
/opt/hubot/bin/hubot: line 13: Path: command not found
/opt/hubot/bin/hubot: line 14: HTTP: command not found
/opt/hubot/bin/hubot: line 15: Creator: command not found
/opt/hubot/bin/hubot: line 16: OptParse: command not found
/opt/hubot/bin/hubot: line 18: Switches: command not found
/opt/hubot/bin/hubot: line 19: [: missing `]'
/opt/hubot/bin/hubot: line 20: [: missing `]'
/opt/hubot/bin/hubot: line 21: [: missing `]'
/opt/hubot/bin/hubot: line 22: [: missing `]'
/opt/hubot/bin/hubot: line 23: [: missing `]'
/opt/hubot/bin/hubot: line 24: [: missing `]'
/opt/hubot/bin/hubot: line 25: [: missing `]'
/opt/hubot/bin/hubot: line 26: [: --version,: binary operator expected
/opt/hubot/bin/hubot: line 27: ]: command not found
/opt/hubot/bin/hubot: line 29: Options: command not found
/opt/hubot/bin/hubot: line 30: adapter:: command not found
/opt/hubot/bin/hubot: line 31: alias:: command not found
/opt/hubot/bin/hubot: line 32: create:: command not found
/opt/hubot/bin/hubot: line 33: enableHttpd:: command not found
/opt/hubot/bin/hubot: line 34: name:: command not found
/opt/hubot/bin/hubot: line 35: path:: command not found
/opt/hubot/bin/hubot: line 37: syntax error near unexpected token `('
/opt/hubot/bin/hubot: line 37: `Parser = new OptParse.OptionParser(Switches)' 
```

尝试从发布包安装而不是在 git 中克隆会导致过程早期出现不同的错误：

```
root@server:/opt# wget https://github.com/downloads/github/hubot/hubot-2.2.0.tar.gz
root@server:/opt# npm install

npm ERR! Couldn't read dependencies.

npm ERR! Error: ENOENT, no such file or directory '/opt/package.json'
npm ERR! System Linux 2.6.35.4-rscloud
npm ERR! command "node" "/usr/local/bin/npm" "install"
npm ERR! cwd /opt
npm ERR! node -v v0.6.9
npm ERR! npm -v 1.1.0-3
npm ERR! path /opt/package.json
npm ERR! code ENOENT
npm ERR! message ENOENT, no such file or directory '/opt/package.json'
npm ERR! errno {}
npm not ok 
```

我试过`npm cache clean`但没有帮助。

我不知道该怎么做，而且我对 Hubot 或它运行的任何框架都不是很熟悉，因此任何有关如何开始对此进行故障排除的信息都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T07:54:24.917

尝试从[发布包](https://github.com/downloads/github/hubot/hubot-2.2.0.tar.gz)安装（*而不是从安装`git clone`*），这为我解决了一些随机问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T17:21:01.410

我怀疑您没有遵循上面引用的“将 Hubot 部署到 UNIX”链接的“安装依赖项”部分。具体来说，像 bash 这样的常规 shell 似乎试图解释脚本而不是咖啡脚本解释器。如果你输入

```
coffee 
```

在您的 shell 提示符下，并且没有得到

```
coffee> 
```

提示，请重新访问安装说明的第一部分。

# php - 如何将此数组插入 MYSQL 数据库，为什么我的不起作用？

> ID：12606909
> 
> 赞同：0
> 
> 时间：2012-09-26T17:07:50.557
> 
> 标签：php

我正在尝试使用 implode 语句将此数组插入到我的数据库中。但我正在努力寻找我出错的地方：我基本上希望将下面的两个函数转换为返回字符串：

```
 function Titles($link) {
$str = file_get_contents($link);    
if( strlen( $str )>0 ) {    
    preg_match_all( "/\<title\>(.*)\<\/title\>/", $str, $titles );
    if (count($titles) > 1) {
        return $titles[1];   
    }
}

return '';
}

  function getMetas($link) {
$str1 = file_get_contents($link);    

if (strlen($str1)>0) {
    preg_match_all( '/<meta.*?name=("|\')description("|\').*?content=("|\')(.*?)("|\')/i', $str1, $description);
    if (count($description) > 1) {
        return $description[4];   
    }

}

 }

  $data = array();
  foreach ($links as $link) {
$output = array(
    "title"       => Titles($link), 
  "link"        => $link,
  "description" => getMetas($link),
  "keywords" => getKeywords($link) 
   );
   if (empty($output["description"])) 
   {$output["description"] = getWord($link);
  }
   $data[] = $output;
  }
  print_r($data);  

  mysql_query("INSERT INTO scan (title, url, description, keywords) VALUES ('".implode("'),('",$data)."')");

  if (!mysql_query()) {
echo "woops";
    }

   mysql_close($connect); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T17:12:37.060

问题是这`$data`是一个多维数组，所以在你内爆之后，你的查询中仍然有数组而不是字符串。

您也可以通过`implode`更早地使用来解决这个问题`$output`：

```
$data[] = implode(',', $output); 
```

除此之外，您应该`mysql_real_escape_string`在原始变量上使用，但随着`mysql_*`函数被弃用，您真的应该切换到 mysqli 或 PDO 中的准备好的语句。

**编辑：**实际上你需要修改两个内爆：

```
 $data[] = '"' . implode('","', $output) . '"';
 ...
 mysql_query( "INSERT INTO scan (title, url, description, keywords)
    VALUES (" . implode('),(',$data) . ")" ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T17:43:43.973

尝试这个

```
$fields =   array_keys($data);
    $values =   array_values($data);

    $formatedValues =   array();
    foreach($values as $val)
    {   $val    =   "'".addslashes($val)."'";
        $formatedValues[]   =   $val;
    }
      $table="scan";

$sql    =   "INSERT INTO ".$table." (";
    $sql    .=  implode(", ",$fields).") ";
    $sql    .=  "VALUES( ";
    $sql    .=  implode(", ",$formatedValues);
    $sql    .=  ")";
    mysql_query($sql) or die(mysql_error()); 
```

# grails - 这个例外是什么意思？

> ID：12606912
> 
> 赞同：4
> 
> 时间：2012-09-26T17:08:06.017
> 
> 标签：grails

我在使用 MAVEN 构建我的 Grails 应用程序时收到此消息，引导完成后，我的日志中出现此异常。有人可以指导我在哪里寻找此异常的原因吗？它想表达什么？

```
2012-09-26 13:00:45,532 [Thread-7] ERROR StackTrace  - Full Stack Trace:
org.springframework.beans.factory.BeanCreationNotAllowedException: Error creating bean with name 'instanceControllersApi': Singleton bean creation not allowed while the singletons of this factory are in destruction (Do not request a bean from a BeanFactory in a destroy method implementation!)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:212)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.codehaus.groovy.grails.commons.spring.ReloadAwareAutowireCapableBeanFactory.autowireBeanInAutowireByName(ReloadAwareAutowireCapableBeanFactory.java:213)
    at org.codehaus.groovy.grails.commons.spring.ReloadAwareAutowireCapableBeanFactory.populateBeanInAutowireByName(ReloadAwareAutowireCapableBeanFactory.java:205)
    at org.codehaus.groovy.grails.commons.spring.ReloadAwareAutowireCapableBeanFactory.autowireBeanProperties(ReloadAwareAutowireCapableBeanFactory.java:192)
    at org.springframework.beans.factory.config.AutowireCapableBeanFactory$autowireBeanProperties.call(Unknown Source)
    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:42)
    at org.springframework.beans.factory.config.AutowireCapableBeanFactory$autowireBeanProperties.call(Unknown Source)
    at org.codehaus.groovy.grails.plugins.scaffolding.ScaffoldingGrailsPlugin.configureScaffoldingController(ScaffoldingGrailsPlugin.groovy:116)
    at org.codehaus.groovy.grails.plugins.scaffolding.ScaffoldingGrailsPlugin$configureScaffoldingController.callStatic(Unknown Source)
    at org.codehaus.groovy.grails.plugins.scaffolding.ScaffoldingGrailsPlugin.configureScaffolding(ScaffoldingGrailsPlugin.groovy:90)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:90)
    at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:233)
    at org.codehaus.groovy.runtime.metaclass.ClosureMetaClass.invokeMethod(ClosureMetaClass.java:361)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:877)
    at org.codehaus.groovy.runtime.callsite.PogoMetaClassSite.callCurrent(PogoMetaClassSite.java:66)
    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:46)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:133)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:145)
    at org.codehaus.groovy.grails.plugins.scaffolding.ScaffoldingGrailsPlugin$_closure2_closure10.doCall(ScaffoldingGrailsPlugin.groovy:77)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:90)
    at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:233)
    at org.codehaus.groovy.runtime.metaclass.ClosureMetaClass.invokeMethod(ClosureMetaClass.java:272)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:877)
    at org.codehaus.groovy.runtime.callsite.PogoMetaClassSite.callCurrent(PogoMetaClassSite.java:66)
    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:46)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:133)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:141)
    at org.codehaus.groovy.grails.plugins.scaffolding.ScaffoldingGrailsPlugin$_closure2_closure10.doCall(ScaffoldingGrailsPlugin.groovy)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:90)
    at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:233)
    at org.codehaus.groovy.runtime.metaclass.ClosureMetaClass.invokeMethod(ClosureMetaClass.java:272)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:877)
    at groovy.lang.Closure.call(Closure.java:412)
    at groovy.lang.Closure.call(Closure.java:406)
    at groovy.lang.Closure.run(Closure.java:490)
    at java.lang.Thread.run(Thread.java:662)
2012-09-26 13:00:45,548 [Thread-7] ERROR StackTrace  - Full Stack Trace:
org.springframework.beans.factory.BeanCreationNotAllowedException: Error creating bean with name 'instanceControllersApi': Singleton bean creation not allowed while the singletons of this factory are in destruction (Do not request a bean from a BeanFactory in a destroy method implementation!)
    at java.lang.Thread.run(Thread.java:662) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T01:49:15.127

在没有任何源代码或您的版本的情况下`Grails`，只需查看您的异常堆栈跟踪，就会发现以下内容：

```
Error creating bean with name 'instanceControllersApi': Singleton bean creation not allowed while the singletons of this factory are in destruction (Do not request a bean from a BeanFactory in a destroy method implementation!) 
```

我对 Grails JIRA 进行了一些研究，以下 JIRA 问题[GRAILS-8645](http://jira.grails.org/browse/GRAILS-8645)与您具有相同的堆栈跟踪。查看有关此 JIRA 问题的堆栈跟踪。根据 JIRA 问题，它似乎会影响`Scaffolding`2.0 最终版，但已在 2.0.1 中修复。

# java - 从 jsf 1.2 到 2.1 的托管属性迁移

> ID：12606913
> 
> 赞同：2
> 
> 时间：2012-09-26T17:08:06.973
> 
> 标签：java, jsf, jsf-2

我是 JSF 的新手，我正在寻找一些与托管属性相关的问题的答案。

我正在使用非常旧的代码，并尝试对其进行更新。

```
<managed-bean>
  <managed-bean-name>bean</managed-bean-name>
  <managed-bean-class>com.example.Bean</managed-bean-class>
  <managed-bean-scope>request</managed-bean-scope>
  <managed-property>
    <property-name>serviceLocalizator</property-name>
    <value>#{serviceLocalizator}</value>
  </managed-property>
  <managed-property>
    <property-name>market</property-name>
    <value>#{param['market']}</value>
  </managed-property>
  <managed-property>
    <property-name>produktId</property-name>
    <value>#{param['produkt.id']}</value>
  </managed-property>
</managed-bean> 
```

在 bean 类是市场的设置者和产品的获取者，市场是另一个类的一部分。

```
private SomeClass daneIn;

public void setMarket(Long market) {
    this.daneIn.setMarket( market );
}

private SomeClass2 produkt;

public  SomeClass2 getProdukt() {       
    return produkt;
} 
```

因为`productId`并且`serviceLocalizator`没有setter 和getter。有更多的属性，如“市场”与“daneIn”相关联。

任何人都可以解释为什么：

1.  当我删除时，`<managet-property>`我有空指针异常`ServiceLocalizator`，尽管我调用了静态方法。我应该阅读什么来理解它？
2.  为什么 faces-config 使用括号 []，而不是点？它是与 POST 还是 GET 连接？
3.  我可以`@ManagedProperty`用于 daneIn 的“市场”和其他属性吗？如果是，如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T17:29:39.597

**1）**通过“当我删除时”，我假设您正在删除为 ServiceLocalizator 定义的托管属性。由于没有注入属性的指令，因此该变量将为空。使用它会导致 NPE。

**2）**括号符号用于各种目的，包括涵盖您的情况的一种。您可以通过其键获取地图的值，但在这里您获取的是`'produkt.id'`带有括号的元素的值，因为用作键的值包含一个或多个句点。如果您删除句点，您也可以使用`#{param.produktid}`。（感谢[BalusC](https://stackoverflow.com/users/157882/balusc)的指导）

**3）**你必须声明你想用注解注入的属性并提供一个setter。

```
public class YourBean {

    //Also, you can use #{param['market']} as the value of the ManagedProperty        
    @ManagedProperty(value = "#{param.market}")
    private Long market;

    public void setMarket(Long market) {
        this.market = market;
    }

} 
```

# java - JNA Java - 回调仅在没有 Jframe 时起作用

> ID：12606914
> 
> 赞同：1
> 
> 时间：2012-09-26T17:08:07.420
> 
> 标签：java, swing, callback, jframe, jna

我用 C 编写了一个 DLL。第一个函数发送一个回调函数的指针，当新数据可用时调用该指针。

所以我使用 JNA 来包装这个函数。

为了避免应用程序结束，我使用 InputStreamReader 来等待来自标准输入的数据。当有新数据可用时，将调用回调并在控制台中打印数据。

但是，如果我在关闭窗口之前使用 JFrame 来避免程序结束，它就不能正常工作。事实上，如果我不调整 JFrame 窗口的大小，回调会被调用大约 30 次，之后什么也没有（即使有新数据可用）。如果我调整窗口大小，则如果从未调用过回调（即使有新数据可用）。

请问你能帮帮我吗？

谢谢

编辑：这是我的主要方法。

```
    包jsigmausblib；

`import com.sun.jna.Native;
import com.sun.jna.Pointer;
import javax.swing.JFrame;

public class JSigmaUSBLib {

    public static void main(String[] args) {
        NativeSigmaUSBLibInterface  nsuli = (NativeSigmaUSBLibInterface) Native.loadLibrary("SigmaUSBLib1.0", NativeSigmaUSBLibInterface.class);

        ReadCallback rc = new ReadCallback() {
            @Override
                public void callbackFunction(Pointer readData, byte len) {
                    System.out.println("ok"+readData.getByte(0));
                }
        };

        SigmaUSBLibConfigStruct.ByValue config = new SigmaUSBLibConfigStruct.ByValue();

        nsuli.SigmaUSBLibInit(rc , config);

        JFrame frame = new JFrame("Debug");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(80, 60);
        frame.setVisible(true);
    }
}` 

```

# javascript - Soundmanager 2：播放另一个声音时停止播放声音

> ID：12606922
> 
> 赞同：0
> 
> 时间：2012-09-26T17:08:30.220
> 
> 标签：javascript, html, audio

> `

```
soundManager.onload = function() {
 // soundManager.createSound() etc. may now be called
 soundManager.createSound({
 id:'myMp3', url:'audiofiles/my.mp3', onfinish:function()  
 {
 //window.location.href='index.html'
 }
 });
soundManager.createSound({
 id:'yMp3', url:'audiofiles/y.mp3', onfinish:function()  
 {
 //window.location.href='index.html'
 }
 });  
 }; 
```

`

您好，我创建了两种声音，它们将通过两个不同链接的 onClick 事件播放。当一个声音正在播放时，我点击另一个链接，两个声音同时播放，我想知道当一个新的声音被触发时如何停止播放以前的声音！谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-11-08T08:00:10.930

```
$(".close-reveal-modal").click( function() {
    soundManager.stopAll();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T04:00:00.133

制作完成后，您需要保留对声音的引用。例如：

```
sounds = [
 new Audio("audiofiles/my.mp3"),
 new Audio("audiofiles/y.mp3")
];

sounds[0].play(); 
```

您可以通过声音[0].addEventListener 添加花哨的事件侦听器。要暂停播放，请使用：

```
sounds[0].addEventListener("play", function() {
  sounds[1].pause();
}); 
```

交替：

```
document.getElementById("presstoplaysound").onclick = function() {
  sounds[1].pause();
  sounds[0].play();
}; 
```

# jquery-mobile - AJAX 调用得到 404 错误，尽管文件存在

> ID：12606924
> 
> 赞同：0
> 
> 时间：2012-09-26T17:08:40.983
> 
> 标签：jquery-mobile, yql

我在这个[页面上使用 jQuery Mobile](http://inventikasolutions.com/demo/tutsplus/site.php)

这是我点击的链接 -

[http://inventikasolutions.com/demo/tutsplus/article.php](http://inventikasolutions.com/demo/tutsplus/article.php)？站点名称=nettuts&origLink=http%3A%2F%2Fnet.tutsplus.com%2F%3Fp%3D26607

有一个文件article.php，可以自己访问。

但是当我点击链接时它不起作用。Chrome 显示 404 错误。

YQL 也显示结果 - [链接](http://developer.yahoo.com/yql/console/?q=SELECT%20%2a%20FROM%20feed%20WHERE%20url%3D%22http%3A%2F%2Ffeeds.feedburner.com%2Fjamesaltucher%3Fformat%3Djson%22#h=select%20%2a%20from%20feed%20where%20url%3D%27http%3A//feeds.feedburner.com/nettuts%27%20AND%20guid%3D%22http%3A//net.tutsplus.com/%3Fp%3D26607%22)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T01:03:16.210

我发现 Apache 服务器默认会在参数中阻止未编码的 url。

这是它的原因和解决方案： [链接](http://www.jampmark.com/web-scripting/5-solutions-to-url-encoded-slashes-problem-in-apache.html)

# html - 如何下载单个网页以供离线查看？

> ID：12606930
> 
> 赞同：3
> 
> 时间：2012-09-26T17:08:59.087
> 
> 标签：html, curl, web, wget

我想下载一个页面以供离线查看。这意味着必须下载网页的所有图像、字体和 css。我不想下载整个网站，只是一个网页。

我试过curl，wget没有成功..也许我不知道如何正确使用它们......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T18:45:41.057

以下是您如何只抓取包含所有资产的一页：

```
wget -E -H -k -K -p url 
```

更多信息：[https ://superuser.com/questions/55040/save-a-single-web-page-with-background-images-with-wget](https://superuser.com/questions/55040/save-a-single-web-page-with-background-images-with-wget)

# c# - 重构这个/减少 LOC 的好方法？

> ID：12606932
> 
> 赞同：0
> 
> 时间：2012-09-26T17:09:09.157
> 
> 标签：c#, refactoring, character, switch-statement

我有这个代码：

```
switch (currentLetter)
{
    case 'A': return 'B';
    case 'B': return 'C';
    case 'C': return 'D';
    case 'D': return 'E';
    case 'E': return 'F';
    case 'F': return 'G';
    case 'G': return 'H';

    case 'a': return 'b';
    case 'b': return 'c';
    case 'c': return 'd';
    case 'd': return 'e';
    case 'e': return 'f';
    case 'f': return 'g';
    case 'g': return 'h';
} 
```

我想了很多方法来改变它，但我不确定该选择哪个。我可以用 替换所有返回`(char)(currentLetter + 1)`，使用带有 ASCII 值的 if 语句来确定范围，然后执行`(char)(currentLetter + 1)`，使用`Enumerable.Range.Contains`然后查看值是否在范围内，用 if 替换开关等。

这段代码不会在其他任何地方重复，我不确定这是否不是最好的方法，因为代码的读者很清楚发生了什么，他们不必考虑字符代码, 算术等。此外，再也不会有任何字符可以添加到 case 语句中，因此它不会变得笨拙。

不知道我应该保持原样还是改变它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T17:13:09.433

别管它。

当可能有其他人最终可能不得不维护它（或者你自己试图记住你在做什么）稍后。

如果您正在寻找一种迭代器类型的函数 - 这里有一个：[如何按字母顺序查找下一个字符？](https://stackoverflow.com/questions/1026220/how-to-find-out-next-character-alphabetically)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T17:15:16.870

采用

```
return (char)(currentLetter + 1); 
```

如果您需要执行范围测试

```
if ("ABCDEFGabcdefg".Contains(currentLetter)) {
    return (char)(currentLetter + 1);
}
throw new ArgumentOutOfRangeException(
    "Letter in the range 'A'-'G' or 'a'-'g' expected."); 
```

可以立即看到，返回字母表中的下一个字母，而无需检查一长串案例。而且它更不容易出错。

* * *

UPDATE：`char`在 C# 中被认为是数字类型，可以隐式转换为至少 16 位宽的其他数字类型。您甚至可以对它们应用递增和递减运算符。因此存在一个没有强制转换的更短的解决方案：

```
return ++currentLetter; 
```

注意：这会改变 的原始值`currentLetter`，但由于`char`不是引用类型，如果`currentLetter`是方法参数，这应该不是问题。此外，必须使用前增量运算符，因为旧值将与后增量运算符一起返回！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T17:15:35.090

使用 ASCII 代码和描述性方法名称，以便未来的开发人员清楚。甚至把它变成一个扩展方法。即使您目前没有计划在其他地方更改或使用它，但这并不意味着您将来不会。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T17:30:44.500

这只是口味问题。怎么样：

```
if (currentLetter >= 'A' && currentLetter <= 'G'
  || currentLetter >= 'a' && currentLetter <= 'g')
{
  ++currentLetter;
  return currentLetter;
} 
```

这假设`currentLetter`是一个*局部*变量（它没有被当前方法之外引用的匿名函数捕获），因为我增加了它。

# machine-learning - SVM分类总是产生唯一的解决方案吗？

> ID：12606934
> 
> 赞同：11
> 
> 时间：2012-09-26T17:09:12.177
> 
> 标签：machine-learning, svm

separable 上的线性分类器可以有多个数据分类边界。这就是我们让 SVM 选择具有最大边距的边界的原因（对未见数据的泛化误差最小）。

SVM 分类是否总是产生唯一的解决方案（我们不会在所有可能的数据中得到两个最大边距边界）？

答案是否取决于硬边距 SVM 和软边距 SVM？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-26T21:10:50.520

是的，标准 SVM 的软和硬公式都是凸优化问题，因此具有独特的全局最优解。我想如果问题非常大，近似方法会足够简洁，以至于您将使用它们而不是精确求解器，然后您的数值求解技术可能无法找到全局最优值，因为它的权衡好处是减少搜索时间。

这些的典型方法是顺序最小优化——保持一些变量固定并优化变量的一小部分，然后一遍又一遍地重复不同的变量，直到你无法改进目标函数。鉴于此，我发现任何人都无法以不会产生全局最优的方式解决这些问题。

当然，您找到的全局最优值实际上可能并不适合您的数据。这取决于您的模型、嘈杂的类别标签等代表数据生成过程的程度。所以解决这个问题并不能保证你找到了绝对正确的分类器或任何东西。

以下是我在粗略搜索中找到的一些讲义：（[链接](http://www.ics.uci.edu/~dramanan/teaching/ics273a_winter08/lectures/lecture11.pdf)）

这是关于凸性声明的更直接链接：（[链接](http://www.cs.cmu.edu/~epxing/Class/10701-08s/recitation/svm.pdf)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T20:27:57.500

对于没有正则化的硬边距分类器，SVM 问题可以转换为具有线性约束的强制二次规划问题（假设存在解/正边距）。具有线性约束的强制二次规划问题具有独特的全局最小值，并且简单的优化方法（如梯度下降或感知器算法）可以保证收敛到全局最小值。参见例如

[http://optimization-online.org/DB_FILE/2007/05/1662.pdf](http://optimization-online.org/DB_FILE/2007/05/1662.pdf)

对于软边距 SVM 和具有正则化项的 SVM，我认为存在唯一的全局最小值，并且通常的技术会收敛到全局最小值，但我不知道有任何证明可以涵盖所有可能性。

# java - Java DateFormat 返回不正确的日期

> ID：12606939
> 
> 赞同：2
> 
> 时间：2012-09-26T17:09:31.430
> 
> 标签：java, date, date-parsing

我正在尝试用 a 解析日期，`SimpleDateFormat`但遇到了一个奇怪的行为。

此示例`"Sun Jan 01 19:00:32 CET 2012"`在我的机器上打印：

```
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Locale;

public class Test {
    public static void main(String[] args) throws ParseException {
        System.out.println(new SimpleDateFormat("MMM dd HH:mm:ss YYYY", Locale.ENGLISH).parse("Sep 26 19:00:32 2012"));
    }
} 
```

我希望会`"Wed Sep 26 19:00:32 CET 2012"`回来。

我的 DateFormat 字符串不正确吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-26T17:12:50.050

年份使用小型股`y`：

```
System.out.println(new SimpleDateFormat("MMM dd HH:mm:ss yyyy", Locale.ENGLISH).
            parse("Sep 26 19:00:32 2012")); 
```

[根据 javadoc ，](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)大盘`Y`是“周年” 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T17:12:51.630

使用`yyyy`（小写）而不是`YYYY`（大写）。`Y`是*周年*；而是*年*。`y`_

 *另请注意，该`Y`模式仅在**Java 7**中引入，这可以解释您看到错误的原因。根据[文档](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)：

> 如果指定了周年“Y”并且日历不支持任何周年，则使用日历年 ('y')。可以通过调用 getCalendar().isWeekDateSupported() 来测试对周年的支持。

使用 Java 7 和 a ，您的代码可以正常工作，如您在此**[演示](http://ideone.com/vPkSO)**`GregorianCalendar`中所见。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T17:13:52.473

问题在于日期解析而不是格式化。尝试在解析中传递 new Date()，查看结果并相应地更改格式。*

# websphere-mq-fte - 分布式环境中的 WMQ FTE

> ID：12606943
> 
> 赞同：2
> 
> 时间：2012-09-26T17:09:41.117
> 
> 标签：websphere-mq-fte

QMGR A 有一个称为 AgentA 的 MFT 代理。QMGR B 有一个称为 AgentB 的 MFT 代理。QMGR C 有一个称为 AgentC 的 MFT 代理。这些都是 MFT 服务器部署，而不是“客户端”。

QMGR A 和 B 是 MQ 集群的成员，称为 FTECluster

QMGR C 通过一个简单的发送器/接收器对（集群外部）连接到 QMGR B。

运行 QMGR A 的服务器上的 MFT 用户希望将文件从该服务器发送到运行 QMGR C 的服务器。

QMGR B 是指定的协调 Qmgr，所以如果通过资源管理器在那里连接时，我创建一个传输，使用

QMGRA 作为源，QMGRC 作为目标，我是否总是期望代理会遇到 2087 错误（这是我得到的），目标远程队列是未知的？或者是否有一些“额外的”设置需要通过 QMGRB 使 QMGRA 与 QMGRC 相识？

应用程序是这样的：我有基于飞地的队列管理器 (QMGRA)，它位于 DMZ（网关，QMGR B）后面，并希望通过 MFT 将外部合作伙伴的文件移动到飞地内部/外部的文件，与我们使用的不同队列将消息从重叠集群或从队列管理器移入/移出集群移动到相邻集群的出/入。或者，允许在 enclave 内的 MFT 用户之间传输文件，这样流量就不会分散到 DMZ 以进行内部传输。

如果这是不可能的，那么我们将不得不在内部飞地服务器上的客户端之间创建 MFT 传输，通过基于 DMZ 的 MFT 服务器，并输出/输入到外部客户群，并且在指定的飞地上有内部代理/服务器队列管理器，用于在内部交换文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T22:13:08.470

FTE 代理可以使用标准 QMgr 路由和别名。教科书的方法是在目标 QMgr 之后命名传输队列并添加别名。例如，在 QMGRA 上，您可以定义：

```
* On QMGRA
DEFINE QL(QMGRB) USAGE(XMITQ)
DEFINE QR(QMGRC) XMITQ(QMGRB) RQMNAME('') RNAME('') 
```

现在，任何发往 QMGRC 的消息都会经过正常的名称解析。由于 QRemote，QMgr 通过 QMGRB 找到到 QMGRC 的路由。因此，具有空白 RNAME 的 QRemote 定义称为 QMgr 别名。

然后在 QMGRB 上，您将有一个传输队列通向 QMGRC，并且巧合地命名为 QMGRC。反过来将适用于获取消息。您需要 C 上的 QMgr 别名指向 B。

如果您的 XMit 队列不使用远程 QMgr 的名称，那么您需要额外的 QMgr 别名。例如，许多人将字符串 XMITQ 附加到 XMit 队列名称（我认为这会导致比它解决的问题更多的问题），并且在这样的系统上，您需要以下内容：

```
* On QMGRA
DEFINE QL(QMGRB.XMITQ) USAGE(XMITQ)
DEFINE QR(QMGRC) XMITQ(QMGRB.XMITQ) RQMNAME('') RNAME('')

* On QMGRB
DEFINE QL(QMGRC.XMITQ) USAGE(XMITQ)
DEFINE QR(QMGRC) XMITQ(QMGRC.XMITQ) RQMNAME('') RNAME('') 
```

第一部分的工作方式与以前相同。WMQ 查找 QMGRC，找到 QRemote 并将消息放到命名的 XMitQ 上。但是当消息到达 QMGRB 时，它无法直接解析到传输队列，因为名称与远程 QMgr 不匹配。因此，我们定义了一个新的 QRemote，它将名称 QMGRC 解析为通向 QMGRC 的 XMitQ。

您还可以在 QMGRA 和 QMGRB 之间使用集群解析。在这种情况下，您可能可以通过设置 RQMNAME 并将 A 上的 QMgr 别名上的 XMitQ 留空。或者同时设置两者。另一种选择是在 B 上创建一个名为 QMGRC 的 QMgr 别名并将其通告给集群。

使用专用通道使文件传输流量远离集群 XMitQ 和集群通道，因此提供了与常规流量隔离的一类服务。但是，文件传输流量都是非持久的，每次在 XMitQ 上最多只有一个帧/文件，因此您可能不需要那种级别的隔离。（使用 WMQ V7.5 可以对重叠集群和拆分集群 XMitQ 做同样的事情！）

您不需要 FTE 代理对此进行测试，只需使用[SupportPac MA01](http://ibm.co/SupptPacMA01)中的 Q 程序并在连接时指定本地 QMgr 和远程 QMgr 名称。

**来自电子邮件线程的更新：**
好的，这里是我使用集群场景模拟它的定义。我定义了 3 个 QMgrs，创建了一个集群，其中 QMGRA 作为存储库，QMGRB 作为成员，并使用 SDR/RCVR 通道创建了 QMGRB 和 C 之间的网关。任何从 A 到达 B 并发送到 C 的消息都会解析到 XMitQ。A 知道 C，因为名为 QMGRC 的 QMgr 别名指向 QMGRC.XMITQ。（我尝试将一个名为 QMGRC 的 XMitQ 广告到集群，但似乎集群将其识别为本地队列并且不对其执行 QMgr 名称解析。将其定义为 QMGRC.XMITQ 并在其上创建 QMGRC QMgr 别名允许 QMGRC 解析本地和集群。）

运行这些之后，我能够使用 Q 程序进行连接，而无需使用指定 RNAME 的 QREMOTE 定义，并将消息从 C 发送到 A 以及从 A 到 C 发送到名为 TEST.NAME.RESOLUTION 的队列中，如下所示：

```
C:\Users\T.Rob>q -m QMGRA -oQMGRC/TEST.NAME.RESOLUTION
MQSeries Q Program by Paul Clarke [ V6.0.0 Build:May  1 2012 ]
Connecting ...connected to 'QMGRA'.
>Testing A to C
>^C
C:\Users\T.Rob>q -m QMGRC -oQMGRA/TEST.NAME.RESOLUTION
MQSeries Q Program by Paul Clarke [ V6.0.0 Build:May  1 2012 ]
Connecting ...connected to 'QMGRC'.
>Testing C to A
>^C 
```

是的，集群名称是“EDELMANN”，在这种用法中，它的发音就像 Jerry Seinfeld 用来发音“Newman”一样。;-)

```
* On QMGRA:
ALTER QMGR +
   REPOS(EDELMANN)

DEFINE QLOCAL('TEST.NAME.RESOLUTION') +
   DEFPSIST(YES) +
   REPLACE

DEFINE CHANNEL('EDELMANN.QMGRA') +
   CHLTYPE(CLUSRCVR) +
   CLUSTER('EDELMANN') +
   CONNAME('localhost(3414)') +
   TRPTYPE(TCP) +
   REPLACE

* On QMGRB:
DEFINE QREMOTE('QMGRC') +
   CLUSTER('EDELMANN') +
   RQMNAME('QMGRC') +
   XMITQ('QMGRC.XMITQ') +
   REPLACE

DEFINE QLOCAL('QMGRC.XMITQ') +
   INITQ('SYSTEM.CHANNEL.INITQ') +
   TRIGGER +
   TRIGDATA('QMGRB.QMGRC') +
   USAGE(XMITQ) +
   REPLACE

DEFINE CHANNEL('EDELMANN.QMGRA') +
   CHLTYPE(CLUSSDR) +
   CLUSTER('EDELMANN') +
   CONNAME('localhost(3414)') +
   TRPTYPE(TCP) +
   REPLACE

DEFINE CHANNEL('EDELMANN.QMGRB') +
   CHLTYPE(CLUSRCVR) +
   CLUSTER('EDELMANN') +
   CONNAME('localhost(3415)') +
   TRPTYPE(TCP) +
   REPLACE

DEFINE CHANNEL('QMGRB.QMGRC') +
   CHLTYPE(SDR) +
   CONNAME('localhost(3416)') +
   TRPTYPE(TCP) +
   XMITQ('QMGRC.XMITQ') +
   REPLACE

DEFINE CHANNEL('QMGRC.QMGRB') +
   CHLTYPE(RCVR) +
   TRPTYPE(TCP) +
   REPLACE

* On QMGRC:
DEFINE QREMOTE('QMGRA') +
   RQMNAME('QMGRA') +
   XMITQ('QMGRB') +
   REPLACE

DEFINE QLOCAL('QMGRB') +
   INITQ('SYSTEM.CHANNEL.INITQ') +
   TRIGGER +
   TRIGDATA('QMGRC.QMGRB') +
   USAGE(XMITQ) +
   REPLACE

DEFINE QLOCAL('TEST.NAME.RESOLUTION') +
   REPLACE

   DEFINE CHANNEL('QMGRB.QMGRC') +
   CHLTYPE(RCVR) +
   TRPTYPE(TCP) +
   REPLACE

DEFINE CHANNEL('QMGRC.QMGRB') +
   CHLTYPE(SDR) +
   CONNAME('localhost(3415)') +
   TRPTYPE(TCP) +
   XMITQ('QMGRB') +
   REPLACE 
```

# jqgrid - jqGrid 可以支持使用本地数据拖放行吗？

> ID：12606945
> 
> 赞同：2
> 
> 时间：2012-09-26T17:09:40.973
> 
> 标签：jqgrid

我正在学习 jqGrid，希望最终能将它连接到 Redis 数据库。作为第一步，我正在处理本地数据。这是我必须使用可排序的行（在网格中拖放行）。网格显示出来并且看起来很好，列甚至是可排序的，但我无法选择一行并移动它——我错过了什么？仅仅是因为数据是本地的吗？

css和js文件加载没有问题。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>My First Grid</title>

<link rel="stylesheet" type="text/css" media="screen" href="themes/redmond/jquery-ui-1.8.23.custom.css" />
<link rel="stylesheet" type="text/css" media="screen" href="css/ui.jqgrid.css" />

<script src="js/jquery-1.8.0.min.js" type="text/javascript"></script>
<script src="js/jquery-ui-1.8.23.custom.min.js" type="text/javascript"></script>
<script src="js/i18n/grid.locale-en.js" type="text/javascript"></script>
<script src="js/jquery.jqGrid.min.js" type="text/javascript"></script>

<script type="text/javascript">
$(document).ready(function(){
  jQuery("#mytable").jqGrid({
      datatype:"clientSide",
      data:[ {"number": 1, "segment":"frontmatter", "name": "chap0"},
             {"number": 2, "segment":"mainmatter",  "name": "chap1"},
             {"number": 3, "segment":"backmatter",  "name": "chap2"},
           ],
      colNames:['Chapter Name', 'Chapter Number', 'Document Segment'],
      colModel:[
              {name:'name'},
              {name:'number', sorttype:'number'},
              {name:'segment'},
              ],
      autowidth:true,
      height:'200',
      sortname: 'number',
      viewrecords: true,
      caption: 'My first grid',
      altRows:true,
  });
});
jQuery("#sortrows").jqGrid('sortableRows');
</script>

</head>
<body>

<table id="mytable"></table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T17:29:00.740

是的，jqGrid 支持带有本地数据的[sortableRows 。](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:jquery_ui_methods#sortable_rows)[该演示](http://www.ok-soft-gmbh.com/jqGrid/sortalerows1_.htm)只是[答案](https://stackoverflow.com/a/9045125/315935)中演示的副本，它使用 jqGrid 4.4.1 并且可以正常工作。

您发布的代码有两个小但重要的错误：

*   您使用`jQuery("#sortrows").jqGrid('sortableRows');`，但您使用另一个`id`:创建了网格`jQuery("#mytable")`。所以你必须`"#sortrows"`改为`"#mytable"`
*   您必须在块`jQuery("#mytable").jqGrid('sortableRows');` **内移动线。***您在创建网格之前*`$(document).ready(function(){});`调用当前代码，因此它将不起作用。`sortableRows`

# git - 在 git pull 上，“无法解析引用”和“未定义错误：0”

> ID：12606946
> 
> 赞同：1
> 
> 时间：2012-09-26T17:09:43.440
> 
> 标签：git

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T21:26:20.520

虽然我重新克隆了存储库以便继续工作，但我确实保留了旧的损坏的存储库，以防我碰巧找到修复它的方法。不幸的是，我没有找到这样的解决方法。

如果遇到这个问题，最好的办法就是`git clone`再次访问存储库。希望您已经在 repo 损坏之前将最新更改推送到远程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-15T16:39:02.710

我通过删除坏的参考解决了这个问题，例如：

```
del .git\refs\remotes\origin\card-declined
del .git\refs\remotes\origin\card-declined 
```

这主要是一种预感，但它似乎奏效了，因为我不在乎那些麻烦的裁判。

# c# - 什么是独立关联和外键关联？

> ID：12606948
> 
> 赞同：19
> 
> 时间：2012-09-26T17:09:46.367
> 
> 标签：c#, entity-framework-4, entity-framework-5

> **可能重复：**
> [代码优先：独立关联与外键关联？](https://stackoverflow.com/questions/5281974/code-first-independent-associations-vs-foreign-key-associations)

在 EF 4 或 EF 5 Code First 中，什么是“独立关联”，什么是“外键关联”，如[MSDN](http://msdn.microsoft.com/en-us/data/hh949853.aspx)或[外键与独立关系中使用的那样 - 实体框架 5 是否有改进？](https://stackoverflow.com/questions/11110802/foreign-key-vs-independent-relationships-is-there-improvement-with-entity-fra)（重点补充）：

> 2.4.1 使用外键关联降低视图生成成本
> 
> 我们已经看到了许多将模型中的关联从**独立关联**切换到**外键关联**的案例， 极大地改善了视图生成所花费的时间。

所以 - 现在我知道该使用哪个了。要是我知道它们是什么以及如何转换成它就好了！那么，我的问题是，您将如何定义这些术语？什么流利/注释/约定调用每个？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-09-26T19:57:19.083

只是我对为什么使用独立或外键关联的看法：

## 独立协会

优点：

*   这是进入面向对象世界的正确方法。在面向对象的世界中，我们在聚合中使用引用，而不是一些魔术键。

缺点：

*   使用纯 POCO，您不知道主体关系是否真的为 NULL 或只是未加载，因为在这两种情况下您的引用都是空的。您必须要求上下文在这两个空值之间有所不同。这对于重型基础实体来说不是问题，`EntityObject`其中每个到主体实体的导航属性都与另一个后缀为后缀的属性配对，以`Reference`提供有关关系的一些额外细节。
*   EF 管理独立关联的方法非常复杂，尤其是在附加分离的对象图时。每个独立的协会都有自己的状态，它永远不可能处于`Modified`状态。每个修改总是包括将旧关系设置为已删除并创建新关系作为添加 - 当您尝试使用它时，这真是一团糟。
*   据报道，独立关联在 EF 初始化期间（或在视图预生成期间）显着减慢了视图生成。
*   在您只需要绑定外键的数据绑定场景中，独立关联可能更难使用。

## 外键关联

优点：

*   简单的。关键属性易于管理，它们解决了独立关联的所有问题 - 没有外部关联的状态、直接数据绑定、如果存在关系则立即可见（关键不为空）等。

缺点：

*   它们在概念上是错误的，在 EF 中提供它们是从对象世界到关系世界的一大步。我仍然相信正确的解决方案正在改进或改变处理独立关联的方式，即使它可能导致 EFv1 和 EFv4 之间发生巨大的破坏性变化。我也不喜欢当前的情况，即我们有两种行为完全不同的关联。应该只有一种类型具有明确定义的行为和在实体上公开的可选外键属性。

这种差异仅对一对多关联很重要，因为一对一始终是外键关联，而多对多始终是独立关联。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-09-26T18:07:35.587

外键关联是除了相应的导航属性之外，您的模型中还有一个外键属性。独立关联是当您的数据库中有一个外键列但与该列对应的外键属性不在您的模型中 - 即您有一个 NavigationProperty 但没有外键属性可以告诉您 ID 值是什么相关属性是没有实际进入相关属性的。

这是具有独立关联的模型示例（请注意，从属没有外键 - 只是导航属性）：

```
public class Dependent
{
    public int Id { get; set; }

    [Required]
    public Principal PrincipalEntity { get; set; }

}

public class Principal
{
    public int Id { get; set; }
    public ICollection<Dependent> DependentEntities { get; set; }
}

public class MyContext : DbContext
{
    public DbSet<Dependent> Dependents { get; set; }
    public DbSet<Principal> Principals { get; set; }
} 
```

这是一个相同模型的示例，但具有 ForeignKey 关联（注意 PrincipalEntity_Id 属性和 [ForeignKey()] 属性）：

```
public class Dependent
{
    public int Id { get; set; }

    public int PrincipalEntity_Id { get; set; }

    [Required]
    [ForeignKey("PrincipalEntity_Id")]
    public Principal PrincipalEntity { get; set; }

}

public class Principal
{
    public int Id { get; set; }
    public ICollection<Dependent> DependentEntities { get; set; }
}

public class MyContext : DbContext
{
    public DbSet<Dependent> Dependents { get; set; }
    public DbSet<Principal> Principals { get; set; }
} 
```

请注意，您的数据库不会更改 - 基础数据库始终具有外键列，但具有独立关联，它没有公开。

使用外键关联，您只需更改外键的值即可更新关系。如果您知道该值，这很方便，因为您不需要加载要将导航属性更新到的实体。

# bash - TortiseSVN svn+ssh 错误：无法连接到 URL 上的存储库...网络连接意外关闭

> ID：12606950
> 
> 赞同：6
> 
> 时间：2012-09-26T17:09:53.627
> 
> 标签：bash, svn, ssh, tortoisesvn, openssh

我在使用 TortoiseSVN 1.7.8 访问 SVN 存储库时遇到问题。

SVN 存储库位于 CentOS 6.3 机器上，`openssh 5.3p1:81.el6`并且运行正常。

```
# svnadmin --version
# svnadmin, version 1.6.11 (r934486) 
```

我可以使用以下命令从另一个 CentOS 机器访问存储库：

```
svn list svn+ssh://USER@xxx.xx.xx.xxx/var/svn/joetest 
```

但是，当我尝试从 Win 7 工作站使用 TortiseSVN 浏览存储库时，我无法使用以下路径进行操作：

```
svn+ssh://USER@xxx.xx.xx.xxx/var/svn/joetest 
```

我从 TortoiseSVN 收到以下错误：

> 无法连接到 URL 'svn+ssh://USER@xxx.xx.xx.xxx/var/svn/joetest' 的存储库 为了更好地调试 SSH 连接问题，请从 [你的 Subversion 配置文件的隧道] 部分。网络连接意外关闭

我可以使用 Putty 从工作站通过 SSH 登录。

如果我尝试以 root 身份访问，结果是相同的。

我已将存储库的所有权`/var/svn/`授予`USER:USER`并运行
`chmod 2700 -R /var/svn/`.

因为我可以从另一个 Linux 机器通过 ssh 访问存储库，所以权限似乎不是问题。

当我使用 观看日志文件`tail -fn 2000 /var/log/secure`时，每次 TortiseSVN 要求输入密码时，我都会看到以下内容：

```
Sep 26 17:34:31 dev sshd[30361]: Accepted password for USER from xx.xxx.xx.xxx port 59101 ssh2
Sep 26 17:34:31 dev sshd[30361]: pam_unix(sshd:session): session opened for user USER by (uid=0)
Sep 26 17:34:31 dev sshd[30361]: pam_unix(sshd:session): session closed for user USER 
```

我实际上能够登录，但会话随即关闭。

它引起了我的注意，会话正在由 root 为 USER 打开`(uid=0)`，这可能是正确的，但我会提到它以防它与问题有关。

我考虑修改`svnserve.conf`，但据我所知，通过 访问存储库时没有使用它`svn+ssh`，通过此方法为每个登录创建一个私有 svnserve 实例。从手册：

> 还有第三种调用 svnserve 的方法，那就是在“隧道模式”下，使用 -t 选项。此模式假定 RSH 或 SSH 等远程服务程序已成功验证用户身份，并且现在正在以该用户身份调用私有 svnserve 进程。svnserve 程序运行正常（通过 stdin 和 stdout 进行通信），并假设流量通过某种隧道自动重定向回客户端。当像这样的隧道代理调用 svnserve 时，请确保经过身份验证的用户对存储库数据库文件具有完全的读写权限。（请参阅服务器和权限：警告。）它本质上与本地用户通过 file:/// URL 访问存储库相同。

中唯一的非默认设置`sshd_config`是：

```
Protocol 2 # to disable Protocol 1

SyslogFacility AUTHPRIV

ChallengeResponseAuthentication no

GSSAPIAuthentication yes
GSSAPICleanupCredentials yes

UsePAM yes

AcceptEnv LANG LC_CTYPE LC_NUMERIC LC_TIME LC_COLLATE LC_MONETARY LC_MESSAGES
AcceptEnv LC_PAPER LC_NAME LC_ADDRESS LC_TELEPHONE LC_MEASUREMENT
AcceptEnv LC_IDENTIFICATION LC_ALL LANGUAGE
AcceptEnv XMODIFIERS

X11Forwarding no

Subsystem       sftp    /usr/libexec/openssh/sftp-server 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T05:37:38.317

我终于找到了解决方案。在各地的TortoiseSVN FAQ中：
[TortoiseSVN 常见问题](http://tortoisesvn.net/faq.html)

来自常见问题解答：
[**SVN+SSH：连接意外关闭**](http://tortoisesvn.net/faq.html#sshclosed)

> 据报道，svn+ssh://username@server.com 形式的 svn+ssh 连接以前可以工作，但在 TortoiseSVN 1.5 中停止工作。这似乎与 plink 有关，如果您在 PuTTY 中设置了默认主机名，就会发生这种情况。
> 
> 如果是这种情况，您可以使用 regedit 或 regedt32 清除 HKEY_CURRENT_USER/Software/SimonTatham/Putty/Sessions/Default%20Settings/HostName 来修复它。
> 
> * * *
> 
> 另一位用户报告了以下服务器端修复：
> 
> *   SSH 进入您的帐户
> *   光盘~
> *   cp /etc/bashrc .bashrc
> *   纳米.bashrc
> *   在“mesg y”行之前放一个#（将其注释掉）
> *   Ctrl+X退出，提示保存时按Y。

* * *

我没有尝试编辑注册表的第一种方法。

编辑 bash 配置的第二种方法对我有用。

**关于 bash 配置方法的说明：**

如果您在共享主机上，您的用户 .bashrc 文件可能会加载全局 /etc/bashrc 文件。您将无法编辑全局文件，因此您需要解决这个问题。

一些可能的方法：

*   尝试添加`mesg n`到您的用户 .bashrc 文件。我不确定这是否可行，或者是否应该在加载全局文件之前或之后放置它。

*   不要在用户`.bashrc`文件中包含全局文件和硬编码所有设置。

*   `mesg y`在加载时从全局 /etc/bashrc 文件中删除设置。这个问题讨论了如何做到这一点：[Use a grepped file as an included source in bash](https://stackoverflow.com/questions/2452657/use-a-grepped-file-as-an-included-source-in-bash)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-12T11:34:14.050

一个老问题，但在谷歌上仍然是最重要的，所以我想我会分享我的解决方案。

简单地说，这是因为我在服务器上没有我的用户的“主”目录。将 SSH 客户端更改为 Putty 附带的 plink.exe（右键单击文件夹 | TortoiseSVN | 设置 | 网络）允许我在屏幕上出现窗口时看到错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-30T11:07:08.260

就我而言，原因是 svnuser 没有外壳（它是 /bin/false）。
即使使用 debug ssh -vvv，这在 ssh 日志中也不可见。

当您遇到此类问题时，您的调试输出将如下所示

```
debug1: Entering interactive session.
debug1: Remote: Forced command.
debug1: Remote: Port forwarding disabled.
debug1: Remote: Agent forwarding disabled.
debug1: Remote: X11 forwarding disabled.
debug1: Remote: Pty allocation disabled.
debug1: Remote: Forced command.
debug1: Remote: Port forwarding disabled.
debug1: Remote: Agent forwarding disabled.
debug1: Remote: X11 forwarding disabled.
debug1: Remote: Pty allocation disabled.
debug1: Sending environment.
debug1: Sending env LANG = en_GB.UTF-8
debug1: Sending command: svnserve -t
debug1: client_input_channel_req: channel 0 rtype exit-status reply 0
debug1: client_input_channel_req: channel 0 rtype eow@openssh.com reply 0
debug1: channel 0: free: client-session, nchannels 1 
```

当 shell 设置为 /bin/bash 时，日志更改为

```
debug1: Sending env LANG = en_GB.UTF-8
debug1: Sending command: svnserve -t
Path: MyRepo
URL: svn+ssh://svnuser@myServer.com/MyRepo 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-11T07:20:55.297

我有同样的问题，我尝试了 regedit 解决方案。

在我的情况下，默认主机名不是罪魁祸首，但 regedit 在保存的会话名称 (%20) 中显示了一个空格。

当您从那里打开连接时，Putty 不关心会话名称，因此从 Putty 连接时没有错误。但是会话名称在您的 svn+ssh:// url 中很重要！

在我的情况下，Putty 会话名称是“server”，当我进行 svn checkout 时，我使用了“svn+ssh://server/srv/svn/repo”，因此出现了错误。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-07-31T17:41:42.383

我在将旧的 svn 存储库移动到新的 Ubuntu 20.04 服务器并尝试从 Windows（使用 tortoisesvn）签出存储库时遇到了这个问题。我终于意识到新服务器上没有安装 svn，它需要为存储库提供服务。对我来说简单的解决方法是：

```
sudo apt install subversion 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-03T13:11:38.370

TL;DL：将密钥添加到`PageAnt`

首先测试您的 Putty 配置是否正常 - 您可以通过 Putty 使用密钥进行连接，您会看到如下内容：

> 使用用户名“svn”。使用公钥“imported-openssh-key”进行身份验证服务器拒绝分配 pty（成功（2 2（））（编辑管道 svndiff1 缺席条目提交-revprops 深度 log-revprops atomic-revprops 部分重播继承-props ephemeral-txnprops文件-revs-reverse ) ) )

然后启动 PageAnt（它与 PuTTY 和 PuTTYgen 在同一个安装包中），你必须在那里添加你的密钥。

就我而言，它解决了问题。在某些情况下，无需配置 PageAnt 就可以正常工作，但在某些情况下却不行，尽管似乎所有选项都以相同的方式设置。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2018-11-21T09:26:53.843

也许这个简单的解决方案会起作用：
转到您的腻子并检查保存的会话名称是否与您尝试结帐的名称（腻子中的 svn 保存的会话名称）匹配......
EG：在 svn 保存的会话中，名称保存为`coreSvn`, 结帐 url 为: `svn+ssh://svnuser@core/COCRETE/branches/R20181121-0.0.2-RELEASE`, 这行不通。更改`@core`为`@coreSvn`或`@coresvn`

# android - 数据库更新崩溃的应用程序

> ID：12606951
> 
> 赞同：0
> 
> 时间：2012-09-26T17:10:03.460
> 
> 标签：android, database

代码：

```
 final String nome = nm.getText().toString();
            final String telefone = tlf.getText().toString();
            if(nome.length() != 0 && telefone.length() != 0){
                if(mIndex.equals("")) {                 
                    ContentValues valor = new ContentValues();
                    valor.put("nome", nome);
                    valor.put("telefone", telefone);
                    db.insert("contatos", null, valor);
                    ShowMessage("Sucesso","O Contato " + nome + " foi salvo com sucesso");
                }
                else {
                    String[] whereArgs = {"nome", "telefone"};

                    ContentValues dataToInsert = new ContentValues();                          
                    dataToInsert.put("nome", nome);
                    dataToInsert.put("telefone", telefone);

                    db.update("contatos", dataToInsert, "nome='"+nomeant+"' and telefone='"+foneant+"' ", whereArgs);
                    ShowMessage("Sucesso","O Contato " + nome + " foi editado com sucesso");
                }
            } 
```

因此，mIndex 是上一个活动中联系人的索引（我选择并单击了项目/联系人，然后将索引传递给新活动）因此，如果 EditTexts 已经为空白，它将添加一个新联系人，如果EditTexts 有一个值并且得到改变它将改变 Clicked Contacts 值（姓名/电话）。但是当我点击按钮 SAVE 时，它会导致我的应用程序崩溃，但错误就在其中`db.update`。

`db.update("contatos", dataToInsert, "nome='"+nomeant+"' and telefone='"+foneant+"' ", whereArgs);`所以因此我猜 whereClause 或 whereArgs 是错误的，但因为我在 Android 编程中没有很高的智能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T17:16:36.287

您在这里不需要 whereArgs，因为您在 where 子句本身中附加了参数。只需提供 null 来代替 whereArgs -

```
 db.update("contatos", dataToInsert, "nome='"+nomeant+"' and telefone='"+foneant+"'", null); 
```

但使用论点总是更好。它可以防止 sql 注入并且还负责转义特殊字符。在你的情况下 -

```
db.update("contatos", dataToInsert, "nome=? and telefone=?", whereArgs); 
```

另外，您的 whereArgs 是错误的。它应该是 -

```
String[] whereArgs = new String[] {nomeant, foneant}; 
```

# jquery-ui - 我可以即时编辑 jquery 加载的文件吗？

> ID：12606952
> 
> 赞同：0
> 
> 时间：2012-09-26T17:10:26.047
> 
> 标签：jquery-ui, jquery

我可以即时编辑 jquery 加载的 html 文件吗？我想加载 html 文件，然后使用 jquery 对其进行操作以将一些内容复制到其中。

我看到的所有示例都指向加载文件，然后将内容复制到 div。

```
$("div").load('loadfile.html'); 
```

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T17:15:58.147

根据需要向表中插入多少数据，您可能需要考虑[`jTemplates`](http://jtemplates.tpython.com/).

jTemplates 允许您创建一个 HTML 模板，然后在您将数据对象或数组传递给它时创建填充的 HTML。

Dave Ward[在他的博客上](http://encosia.com/use-jquery-and-aspnet-ajax-to-build-a-client-side-repeater/)有一个例子。

他的模板：

```
<table>
  <thead>
    <tr>
      <th>Date</th>
      <th>Title</th>
      <th>Excerpt</th>
    </tr>
  </thead>
  <tbody>
    {#foreach $T.d as post}
    <tr>
      <td>{$T.post.Date}</td>
      <td><a href="{$T.post.Link}">{$T.post.Title}</a></td>
      <td>{$T.post.Description}</td>
    </tr>
    {#/for}
  </tbody>
</table> 
```

使用数据加载模板：

```
function ApplyTemplate(msg) {
  // This method loads the HTML template and
  //  prepares the container div to accept data.
  $('#Container').setTemplateURL('RSSTable.htm');

  // This method applies the JSON array to the 
  //  container's template and renders it.
  $('#Container').processTemplate(msg);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T17:12:46.167

尝试这个，

```
$("div").load('loadfile.html').find('#someDivId').html("new text"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T19:00:22.663

您可以将其加载到当前不在页面上的新创建的 div 中

```
 var inMemoryDiv = $("<div />").load('loadfile.html')
                               .find('#someElement')
                               .html("new content"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T18:07:15.037

据我了解你的问题，

假设 div#result 是隐藏的。通过下面的加载方法，它允许您加载 loadfile.html 文件的特定部分。我假设 #container 是您要从 loadfile.html 加载的 div#container（而不是加载整个文件）。

```
$('div#result').load('loadfile.html #container'); 
```

做任何你想做的操作。将编辑后的内容复制到您想要的任何 div 中。

```
$('div#result').empty(); Or .remove() 
```

从 DOM 中删除 div#result。

如果您有任何问题，请善意提出。谢谢

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T18:56:41.543

也许是这样的。这仅在文件位于本地时才有效。

```
 $(function () {
        var result = "";
        var file = "Default.aspx";

        //Assuming local file. 
        $.get(file, handleData);

        //If remote file, use $.ajax

        //handle data that is returned
        function handleData(data) {
            data = data.replace(/\/\/\<\!\[CDATA\[/ig, "/*");
            data = data.replace(/\/\/\]\]>/ig, "*/");
            result = data.replace("html", "test");

            alert(result);
        }

    }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-26T18:02:48.923

.load() 是另一个 jquery 函数的快捷方式。而不是使用它，您可以尝试使用它：

```
$.ajax({ url: 'loadfile.html', type: 'POST', data: { 'key1': 'val1', 'key2': 'val2' }).done(function(data) {
// Everything in this block is executed as soon as the ajax request is done. The var 'data' will return all the info you requested, same as .load(), but now you can be sure that the DOM will be updated when you process your changes.  
    $('div').html(data);
    ....
}); 
```

# selenium - 计算下拉菜单中的选项数量并在 PHPUnit 中选择

> ID：12606958
> 
> 赞同：0
> 
> 时间：2012-09-26T17:10:55.097
> 
> 标签：selenium, phpunit

这是代码

```
<select id="filter_step_id" onchange="master.updateFilter();" name="filter_step_id">
    <option value="">Step</option>
    <option value="setup">company</option>
    <option value="cofounder">co-founder</option>
    <option value="project">project</option>
    <option value="idea">idea</option>
    <option value="product">product</option>
    <option value="sell">Sell</option>
    <option value="money">money</option>
    <option value="talent">talent</option> 
```

如何计算此下拉菜单中的选项数量并获取文本并将它们放入数组（而不是值）？

这是我得到的

```
$numOptions = $this->storeXpathCount("//select[contains(@id,'filter_step_id')]//option[contains(@value, '')]");
for($i = 0; $i <= $numOptions; $i ++) {
    (code to select one option and checking if the text is present from using the filter)
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T18:07:39.280

```
$stepCount = $this->getXpathCount("//select[contains(@id,'filter_step_id')]//option[contains(@value, '')]");
    for($i = 2; $i <= $stepCount; $i ++) {
        $stepOptions = $this->getText("xpath=(//select[contains(@id,'filter_step_id')]//option[contains(@value, '')])[$i]");
        $this->select("id=filter_step_id", "label=$stepOptions");
        sleep(2);
        $this->assertTextPresent("$stepOptions");
    } 
```

# java - 使用 RecursiveElementNameAndTextQualifier(XMLUnit)

> ID：12606959
> 
> 赞同：1
> 
> 时间：2012-09-26T17:10:55.703
> 
> 标签：java, unit-testing, xmlunit

我需要比较两个具有不同实体顺序的 XML 文件。

```
 <root> 
  <parent1> 
   <parent2> 
     <value>1</value>  
   </parent2> 
   <parent2> 
    <value>2</value>  
   </parent2> 
  </parent1>  
  <parent1> 
   <parent2> 
     <value>3</value>  
   </parent2> 
   <parent2> 
     <value>4</value>  
   </parent2> 
  </parent1> 
</root> 
```

如上例所示，如果我在另一个 xml 文件中交换 1 和 2 的位置，则测试应该通过。我正在`diff.overrideElementQualifier(new RecursiveElementNameAndTextQualifier())`为此目的使用，但它一直未能通过测试！

你能告诉我问题是什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-03T17:14:28.687

`RecursiveElementNameAndTextQualifier`适用于非常具体的用例，这就是为什么我们从未将其从`examples`包装中推广出来。

它告诉 XMLUnit 比较元素`a`和元素`b`，如果（且仅当）它们的元素名称匹配并且它们的嵌套文本相同并且它们的所有子节点也符合使用`RecursiveElementNameAndTextQualifier` *它们作为子节点出现的顺序*。

在您的示例中，如果您交换`1`并且`2`第一个`parent1`元素将不再符合条件，因为它的子元素不符合使用严格顺序的条件。

您需要的是一个专门的`ElementQualifier`实现，因为没有内置限定符完全符合您的要求。

# css - h5bp - 链接不起作用

> ID：12606962
> 
> 赞同：0
> 
> 时间：2012-09-26T17:11:04.593
> 
> 标签：css, html, html5boilerplate

以下对我来说似乎很奇怪：

我有一个网站被定义为仅使用 CSS 即可更改为“移动版本”

```
@media only screen and (max-width: 45em) 
```

问题是 - 当我缩小文档宽度并低于 45 em 时，我的链接将不再有效（它们也不会在 Android 上）。首先，我认为这可能是由于我的 JavaScript 造成的，但是制作了一个单独的 test.html，它不加载任何 .js，这表明它一定是由于其他原因，可能是 CSS。

[这是测试页面](http://www.hamburger-webseiten.de/test/test.html)

[CSS 在这里](http://www.hamburger-webseiten.de/test/style.css)

打开它，您会发现文本中的按钮正在工作。

现在减小浏览器的宽度，直到文档宽度低于 45em。你会注意到背景变黑了。我在任何 -link 周围放置了一个 5px 的绿色边框，以在窄模式下突出显示它们。

除了 IE（所有东西）之外，按钮（链接）在任何浏览器中都不再起作用......？！？！？

我一直在搜索一整天，但没有找到错误。任何人都可以帮忙吗？例如，有没有办法在浏览器中调试 CSS 行为？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T17:14:58.273

您有一个`#menu-hover-zone`宽度设置为的元素`14em`- 它覆盖了较小屏幕上的按钮。在您的媒体查询样式表中删除该宽度，您就可以了。

# php - 直接改变变量还是使用setter函数？

> ID：12606973
> 
> 赞同：0
> 
> 时间：2012-09-26T17:12:02.670
> 
> 标签：php, oop, model-view-controller, setter

从页面控制器中设置变量（例如页面标题标签）时，最佳实践是什么？

我有：

```
class About extends Controller {

public function Index()
{
    $this->view->pageTitle = 'test 123' ;
    $this->view->metaDescription = 'Description here' ;
    $this->view->metaKeywords = 'dog, cat, monkey' ;
    $this->view->render('about/about') ;
}
} 
```

或者我应该使用 setter 函数，如：

```
$this->view->setPageTitle('My Title') ; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T17:49:27.603

*两者都不。*View 应该从模型层请求它需要的数据，并根据获取的数据决定应该使用哪些模板来生成响应。

您目前拥有的是一个愚蠢的[模板](http://codeangel.org/articles/simple-php-template-engine.html)。由于没有真实的视图，因此您没有实现 MVC。

# objective-c - 启动画面问题，Xcode/iOS 6/Phonegap

> ID：12606978
> 
> 赞同：2
> 
> 时间：2012-09-26T17:12:26.103
> 
> 标签：objective-c, ios, xcode, cordova

所以，我的 AppDelegate.m 中有这个函数：

```
- (BOOL) application:(UIApplication*)application didFinishLaunchingWithOptions:(NSDictionary*)launchOptions
{        
    [CDVLocalStorage __verifyAndFixDatabaseLocations];
    NSURL* url = [launchOptions objectForKey:UIApplicationLaunchOptionsURLKey];
    if (url && [url isKindOfClass:[NSURL class]]) {
        invokeString = [url absoluteString];
        NSLog(@"PHR launchOptions = %@", url);
    }
    CGRect screenBounds = [[UIScreen mainScreen] bounds];
    self.window = [[UIWindow alloc] initWithFrame:screenBounds];
    self.window.autoresizesSubviews = YES;
    self.detailViewController
    self.detailViewController = [[MainViewController alloc] init];
    self.detailViewController.useSplashScreen = YES;
    self.detailViewController.wwwFolderName = @"www";
    self.detailViewController.startPage = @"index.html";
    self.detailViewController.invokeString = invokeString;
    NSString *deviceType = [UIDevice currentDevice].model;

    if (![deviceType hasPrefix:@"iPad"] && ![deviceType hasPrefix:@"iPad Simulator"])
    {   
        CGRect viewBounds = [[UIScreen mainScreen] applicationFrame];
        detailViewController.view.frame = viewBounds;

        BOOL forceStartupRotation = YES;
        UIDeviceOrientation curDevOrientation = [[UIDevice currentDevice] orientation];

        if (UIDeviceOrientationUnknown == curDevOrientation) {
            curDevOrientation = (UIDeviceOrientation)[[UIApplication sharedApplication] statusBarOrientation];
        }

        if (UIDeviceOrientationIsValidInterfaceOrientation(curDevOrientation)) {
                if ([self.detailViewController supportsOrientation:curDevOrientation]) {
                    forceStartupRotation = NO;
                }
        } 

        if (forceStartupRotation) {
            UIInterfaceOrientation newOrient;
            if ([self.detailViewController supportsOrientation:UIInterfaceOrientationPortrait])
                newOrient = UIInterfaceOrientationPortrait;
            else if ([self.detailViewController supportsOrientation:UIInterfaceOrientationLandscapeLeft])
                newOrient = UIInterfaceOrientationLandscapeLeft;
            else if ([self.detailViewController supportsOrientation:UIInterfaceOrientationLandscapeRight])
                newOrient = UIInterfaceOrientationLandscapeRight;
             else
                newOrient = UIInterfaceOrientationPortraitUpsideDown;

            NSLog(@"AppDelegate forcing status bar to: %d from: %d", newOrient, curDevOrientation);
            [[UIApplication sharedApplication] setStatusBarOrientation:newOrient];
        }

        self.window.rootViewController = self.detailViewController;
    } else {
        NavViewController *leftViewController = [[NavViewController alloc] initWithNibName:@"NavViewController" bundle:nil];
        UINavigationController *leftNavViewController = [[UINavigationController alloc] initWithRootViewController:leftViewController];
        leftNavViewController.navigationBarHidden = YES;

        UINavigationController *detailNavigationController = [[UINavigationController alloc] initWithRootViewController:detailViewController];
        detailNavigationController.navigationBarHidden = YES;

        leftViewController.detailViewController = detailViewController;

        self.splitViewController = [[UISplitViewController alloc] init];
        self.splitViewController.viewControllers = [NSArray arrayWithObjects:leftNavViewController, detailNavigationController, nil];

        self.window.rootViewController = self.splitViewController;
        self.splitViewController.delegate = detailViewController;
        detailViewController.svc = self.splitViewController;
    }
    [self.window makeKeyAndVisible];

    return YES;
} 
```

是的，我知道它有很多代码，但我完全不确定要剪掉什么，因为在这个函数内部我不知道到底出了什么问题。

本质上，我的应用程序在 ipad 上以横向模式加载，但启动画面旋转 90 度并显示纵向而不是横向，然后闪回我的实际启动画面。通过查看代码，我可以看出它正在设备检查的 else 语句中触发，除了我真的可以使用你们的帮助来确定我需要进行哪些更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T17:20:40.757

`setStatusBarOrientation`如果您只在应用程序中使用横向模式，请仅设置为横向模式。

```
[[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationLandscapeRight]; 
```

或者

```
[[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationLandscapeLeft]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T21:12:42.997

所以，我终于设法解决了这个问题。在“showSplashScreen”函数的 Cordova 文件中的 CDVViewController.m 中（您必须拥有 2.0.0 才能获得源代码），您必须`startupImageTransform = CGAffineTransformMakeRotation(degreesToRadian(90));`在所有 if 检查中注释掉该行，因为设备会为您进行旋转, 然后 phonegap 尝试重新定位它。

# exception-handling - 即使在异常之后继续 Mule (3.3) 流程

> ID：12606980
> 
> 赞同：2
> 
> 时间：2012-09-26T17:12:31.300
> 
> 标签：exception-handling, error-handling, esb, mule

Mule 3.3.0
我有一个拆分有效负载的流程。
然后每个项目都会通过一个自定义转换器，如果项目格式错误，它可能会抛出异常。
我有一个捕获异常策略来将错误项记录到文件中。
我希望流程继续处理其余项目，据我所知，这应该是预期的行为。
问题是流量停止了。

我附上了一个简单的测试流程和一个简单的测试文件。该文件是一个 csv 文件，有 2 行，每行有 3 个字段。我使用 groovy 脚本，首先将文件拆分为行，然后将每行拆分为字段。当字段格式错误时，我还使用 groovy 脚本来模拟异常。在这种情况下，如果字段是单词“goodbye”，它将抛出 RuntimeException。如果您测试此流程，您将看到异常后的其余字段不会得到处理（即在这种情况下记录）。在这个特殊的例子中，捕获异常策略甚至不会触发。

输入文件：

```
你好，残酷，世界
再见，残酷，世界
```

测试流

![测试流](../Images/b5d2940b0e48d0dfb6327d7e0bca079a.png)

测试用例.mflow

```
<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:scripting="http://www.mulesoft.org/schema/mule/scripting" xmlns:file="http://www.mulesoft.org/schema/mule/file"
    xmlns:vm="http://www.mulesoft.org/schema/mule/vm" xmlns="http://www.mulesoft.org/schema/mule/core"
    xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
    xmlns:spring="http://www.springframework.org/schema/beans" version="CE-3.3.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
http://www.mulesoft.org/schema/mule/file http://www.mulesoft.org/schema/mule/file/current/mule-file.xsd 
http://www.mulesoft.org/schema/mule/scripting http://www.mulesoft.org/schema/mule/scripting/current/mule-scripting.xsd 
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-current.xsd 
http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd 
http://www.mulesoft.org/schema/mule/vm http://www.mulesoft.org/schema/mule/vm/current/mule-vm.xsd ">

    <file:connector name="inputFileConnector" autoDelete="true"
        streaming="false" validateConnections="true" doc:name="File" fileAge="60000"
         readFromDirectory="#{systemProperties['user.home']}"/>
    <catch-exception-strategy name="Catch_Exception_Strategy">
        <logger message="!!!!! Exception Handler !!!!!" level="INFO" doc:name="Logger"/>
    </catch-exception-strategy>

    <flow name="TestCaseFlow1" doc:name="TestCaseFlow1">
        <file:inbound-endpoint path="#{systemProperties['user.home']}"
            responseTimeout="10000" doc:name="Input File" fileAge="100" connector-ref="inputFileConnector">
            <file:filename-regex-filter pattern="input.csv"
                caseSensitive="false" />
        </file:inbound-endpoint>
        <byte-array-to-string-transformer doc:name="Byte Array to String"/>
        <scripting:component doc:name="Groovy">
            <scripting:script engine="Groovy">
                <scripting:text><![CDATA[return payload.split('\n');]]></scripting:text>
            </scripting:script>
        </scripting:component>
        <collection-splitter doc:name="Collection Splitter"/>
        <scripting:component doc:name="Groovy">
            <scripting:script engine="Groovy">
                <scripting:text><![CDATA[return payload.split(',');]]></scripting:text>
            </scripting:script>
        </scripting:component>
        <collection-splitter doc:name="Collection Splitter"/>
        <scripting:component doc:name="Groovy">
            <scripting:script engine="Groovy">
                <scripting:text><![CDATA[if (payload.equals('goodbye')) {
                            throw new java.lang.RuntimeException('Dang!');
                        }
                        return payload]]></scripting:text>
            </scripting:script>
        </scripting:component>
        <logger message=">>>>>>>>>>>>>>>>>> #[payload]" level="INFO" doc:name="Logger" />
    </flow>
</mule> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T21:47:56.260

我首先要做的是分离你的主要流程。每次`collection-splitter`放置 JMS 或 VM`outbound-endpoint`后，这样每条消息都会有自己的线程，如果一个失败，其他消息不会受到影响。

```
<flow name="flow1">
  <file:inbound-endpoint path="#{systemProperties['user.home']}"
      responseTimeout="10000" doc:name="Input File" fileAge="100" connector-ref="inputFileConnector">
      <file:filename-regex-filter pattern="input.csv"
      caseSensitive="false" />
  </file:inbound-endpoint>
  <byte-array-to-string-transformer doc:name="Byte Array to String"/>
  <scripting:component doc:name="Groovy">
      <scripting:script engine="Groovy">
      <scripting:text><![CDATA[return payload.split('\n');]]></scripting:text>
      </scripting:script>
  </scripting:component>
  <collection-splitter doc:name="Collection Splitter"/>
  <vm:outbound-endpoint path="toFlow2"/>
</flow>

 <flow name="flow2">
  <vm:inbound-endpoint path="toFlow2"/>
  <scripting:component doc:name="Groovy">
      <scripting:script engine="Groovy">
      <scripting:text><![CDATA[return payload.split(',');]]></scripting:text>
      </scripting:script>
  </scripting:component>
  <collection-splitter doc:name="Collection Splitter"/>
  <vm:outbound-endpoint path="toFlow3"/>
</flow>

 <flow name="flow3">
  <vm:inbound-endpoint path="toFlow3"/>
  <scripting:component doc:name="Groovy">
      <scripting:script engine="Groovy">
      <scripting:text><![CDATA[if (payload.equals('goodbye')) {
              throw new java.lang.RuntimeException('Dang!');
          }
          return payload]]></scripting:text>
      </scripting:script>
  </scripting:component>
  <logger message=">>>>>>>>>>>>>>>>>> #[payload]" level="INFO" doc:name="Logger" />
</flow> 
```

# php - 保留/放弃 Google Chrome PHP 下载

> ID：12606993
> 
> 赞同：2
> 
> 时间：2012-09-26T17:13:02.113
> 
> 标签：php, google-chrome, header, download

> **可能重复：**
> [绕过 Chrome 的恶意文件警告](https://stackoverflow.com/questions/9512919/getting-around-chromes-malicious-file-warning)

代码：

```
 /* 
     .... Code to authenticate to my mysql and verify that we are an legal user.
    */
    $type = mysql_result($AllResult, 0, 'file_type');
    $size = mysql_result($AllResult, 0, 'file_size');
    $name = mysql_result($AllResult, 0, 'file_name');
    $data = mysql_result($AllResult, 0, 'file_content');

    session_write_close();
    ob_clean();
    mysql_close();

    header("Content-Transfer-Encoding: binary");
    header("Content-type: $type");
    header("Content-length: $size");
    header("Content-Disposition: attachment;filename=$name");
    header("Content-Description: PHP Generated Data");
    echo "$data"; 
```

我制作了一个 PHP 代码，用于从数据库中的 longblob 下载文件并将其保存到用户计算机。此代码在 Opera 和 Firefox 上运行良好。但是，在 IE 和 google chrome 上 - 如果程序没有 Microsoft SmartScreen 许可证 - 它会提示对话框“...名称...不常下载，可能会损害您的计算机”

插图：

![没有许可证的样子](../Images/3d404af1112cb9fe30070d1c928e3d64.png)

**然而; 我想知道是否可以更改标题，或者是否可以获取对话框“此文件可能会损害您的计算机。你想保留......无论如何？[保持丢弃]**

我正在谈论的对话框的插图： ![丢弃/保留](../Images/56de712f40df6d146fa2646c526ea755.png)

**更新：我尝试对我的 Content-Disposition 使用内联和附件，结果相同**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T15:18:40.020

至少从 Chrome 端，将无法禁用此通知。您看到“这种类型的文件可能会损害您的计算机”，因为您下载的扩展名是可执行的（即 .exe、.dll 等）。这可能也是微软的情况。我知道如果文件是“经常下载的”（即他们看到很多人下载相同的文件），微软的系统将不再抱怨。如果有可以绕过此通知的标头，将对用户不利。

您可以完全避免这种情况，方法是确保您的下载名称具有不可执行的扩展名，例如 .txt、.html 等，因此通常不会被浏览器供应商视为高优先级威胁。

# bash - 网页从 shell 脚本中获取输入并显示结果

> ID：12606996
> 
> 赞同：2
> 
> 时间：2012-09-26T05:15:12.837
> 
> 标签：bash, perl, unix, cgi

我是网络编程的新手，我有一个小的 shell 脚本，它基本上给出了两个结果的输出。基本上是在我们的目录中查找用户。

```
#!/bin/bash
echo -n "Please enter username to lookup: "
read USERNAME
DISPLAYNAME=`ldapsearch -p xxx -LLL -x -w test -h abc.com -D abc -b dc=abc,dc=com sAMAccountName=$USERNAME | grep displayName`

if [ -z "$DISPLAYNAME" ]; then
  echo "No entry found for $USERNAME"
else 
  echo "Entry found for $USERNAME"
fi 
```

寻找可以在浏览器上显示结果的 perl web 代码。

我知道，我会在这里要求太多，但如果有人能给我正确的方向来实现这一目标，我将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:13:05.150

首先，不要*在*`$USERNAME`你的 BASH 脚本中使用。`$USERNAME`是一个包含当前用户名的 BASH 变量。事实上，在 BASH 中使用大写变量通常是个坏主意。大多数 BASH 环境变量都是大写的，这可能会导致混淆。将变量设置为小写是一种很好的做法。

此外，由于我想您想使用 HTML 表单执行此操作，因此您不能从 STDIN 读取 BASH。修改游览脚本以将用户名作为参数：

重击：

```
#!/bin/bash
user=$1;
DISPLAYNAME=`ldapsearch -p xxx -LLL -x -w test -h abc.com -D abc -b dc=abc,dc=com sAMAccountName=$user | grep displayName`
if [ -z "$DISPLAYNAME" ]; then
  echo "No entry found for $user"
else 
  echo "Entry found for $user"
fi 
```

珀尔：

```
#!/usr/bin/perl
use CGI qw(:standard);
use CGI::Carp qw(warningsToBrowser fatalsToBrowser); 
use strict;
use warnings;
## Create a new CGI object
my $cgi = new CGI;
## Collect the value of 'user_name' submitted by the webpage
my $name=$cgi->param('user_name');

## Run a system command, your display_name.sh,
## and save the result in $result
my $result=`./display_name.sh $name`;

## Print the HTML header
print header;
## Print the result
print "$result<BR>"; 
```

HTML：

```
<html>
<body>
<form ACTION="./cgi-bin/display_name.pl" METHOD="post">
<INPUT TYPE="submit" VALUE="Submit"></a>
<INPUT TYPE="text" NAME="user_name"></a>
</form>
</body>
</html> 
```

这应该做你需要的。它假定这两个脚本都在`./cgi-bin/`您的网页目录中，分别称为 display_name.sh 和 display_name.pl。它还假设您已经正确设置了它们的权限（它们需要由 apache2 的用户 www-data 执行）。最后，它假定您已设置 apache2 以允许执行 ./cgi-bin 中的脚本。

您是否有特定的原因要使用 BASH？您可以直接从 Perl 脚本执行所有操作：

```
#!/usr/bin/perl
use CGI qw(:standard);
use CGI::Carp qw(warningsToBrowser fatalsToBrowser); 
use strict;
use warnings;
## Create a new CGI object
my $cgi = new CGI;
## Collect the value of 'name' submitted by the webpage
my $name=$cgi->param('user_name');

## Run the ldapsearch system command
## and save the result in $result
my $result=`ldapsearch -p xxx -LLL -x -w test -h abc.com -D abc -b dc=abc,dc=com sAMAccountName=$name | grep displayName`;

## Print the HTML header
print header;
## Print the result
$result ? 
      print "Entry found for $name<BR>" : 
      print "No entry found for $name<BR>"; 
```