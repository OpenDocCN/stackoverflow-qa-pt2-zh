# StackOverflow 问答 13410000-13410999

# events - 将 c# 转换为 vb.net 'RaiseEvent' 语句以引发事件以使用 Gzip

> ID：13410003
> 
> 赞同：11
> 
> 时间：2012-11-16T03:38:18.453
> 
> 标签：events, gzip, raise, raiseevent

我已经将类从 c# 转换为 vb.net .. 我的观点是我想压缩 asp.net 页面以减小页面大小，问题是在我转换为 vb.net 之后，我有这个错误

> 说明：在编译服务此请求所需的资源期间发生错误。请查看以下特定错误详细信息并适当修改您的源代码。
> 
> 编译器错误消息：BC32022：“Public Event PostRequestHandlerExecute(sender As Object, e As System.EventArgs)”是一个事件，不能直接调用。使用“RaiseEvent”语句来引发事件。
> 
> 源错误：
> 
> 第 178 行：
> 
> 第 179 行：Private Sub Init(context As HttpApplication) 实现 IHttpModule.Init
> 
> 第 180 行： context.PostRequestHandlerExecute += New EventHandler(context_BeginRequest)
> 
> 第 181 行：结束子
> 
> 第 182 行：

我正在尝试为 asp.net 实现 Gzip ......在此先感谢......

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-16T03:40:35.810

[`AddHandler`](http://msdn.microsoft.com/en-us/library/7taxzxka.aspx "AddHandler 语句")`+=`当用于事件时，VB.NET 等同于 C# 。

```
AddHandler context.PostRequestHandlerExecute, AddressOf context_BeginRequest 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-16T03:44:10.430

您需要使用该`AddHandler`语句，而不是`+=`. 那就是`c#`语法。

```
AddHandler context.PostRequstHandlerExecute, New EventHandler(AddressOf context_BeginRequest) 
```

# javascript - jQuery - 仅当满足某些 HTML 属性时才在鼠标光标旁边显示图像

> ID：13410012
> 
> 赞同：0
> 
> 时间：2012-11-16T03:39:25.093
> 
> 标签：javascript, jquery, html, image, hover

我目前有一个图像在鼠标悬停在 div 上时显示...但是如果“div”的 HTML 属性为“align="center" 并且没有，我只显示鼠标旁边的图像那么我不想显示图像？

我想我很安静，但我不知道如何调用 var“divalign”属性，昨晚花了一整夜：S

```
$(document).ready(function() {
    var $img = $("#MainImage");
    $img.hide();
    var divalign = $("div").attr("align="center");
    $('div').mousemove(function(e) {
        $img.fadeIn(0);
        $img.offset({
            top: e.pageY - $img.outerHeight()-2,
            left: e.pageX - ($img.outerWidth()-18)
        });
    }).mouseleave(function() {
        $img.fadeOut(250);
    });
}); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T03:45:22.080

```
 $('div').mousemove(function(e) {
      if ($(this).attr('align') === 'center') {
        // only show if the align attribute has value center
        $img.fadeIn(0);
        $img.offset({
            top: e.pageY - $img.outerHeight()-2,
            left: e.pageX - ($img.outerWidth()-18)
        });
      }
    }).mouseleave(function() {
        $img.fadeOut(250);
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T03:45:46.743

你在这一行有错误

```
 var divalign = $("div").attr("align="center"); 
```

将其更改为

```
 var divalign = $("div").attr("align","center"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T03:48:46.677

如果你能给这些 DIV 一个类名（例如：class="alignCenter"），然后在这些 div 上注册事件处理程序，它会更简洁。

```
$('div.alignCenter').on('mousemove', function(e) {
     .......................... 
```

});

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T03:41:40.373

尝试这个：

```
$('div[align="center"]').mousemove(function(e) {
        $img.fadeIn(0);
        $img.offset({
            top: e.pageY - $img.outerHeight()-2,
            left: e.pageX - ($img.outerWidth()-18)
        });
      }
    }).mouseleave(function() {
        $img.fadeOut(250);
    }); 
```

# jquery-ui - jQuery不透明度不起作用

> ID：13410019
> 
> 赞同：1
> 
> 时间：2012-11-16T03:40:26.953
> 
> 标签：jquery-ui, jquery, jquery-plugins, jquery-selectors

单击红色按钮而不是添加不同的图像后，我正在尝试更改图像的不透明度，并且我不应该在新图像上看到红色按钮

我的JS代码如下。

[http://jsfiddle.net/mwPeb/7/](http://jsfiddle.net/mwPeb/7/)

```
<script>
    $(document).ready(function () {
        $(".specialHoverOne").hover(function () {
            //  alert("i am here");
            $(".ctaSpecialOne").css("visibility", "visible");

        },

        function () {
            $(".ctaSpecialOne").css("visibility", "hidden");
        });

        $(".ctaSpecialOne").click(function (e) {
            alert("clicked");
            e.preventDefault();
            //$(this).closest('.specialHoverOne').unbind("mouseenter").end().parent().siblings('a').children("img").attr("src", //"http://imgs.zinio.com/magimages/62898189/2012/416242497_200.jpg");                
            $(this).css({
                'opacity': 50
            });

        });

    });
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T04:57:32.067

我会花一些时间来清理这里的编码，找到任何东西有点困难，而且结构有点难以理解。

如果我理解正确，我相信这是您需要在单击红色按钮时使红色按钮上方的图像更改不透明度的行。

```
$(this).parent().prev().prev().css({'opacity':.5}); 
```

进一步来说;

```
$(".ctaSpecialOne").click(function (e) {
  e.preventDefault();            
  $(this).parent().prev().prev().css({'opacity':.5});
}); 
```

[http://jsfiddle.net/mwPeb/11/](http://jsfiddle.net/mwPeb/11/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T03:56:55.480

您希望红色按钮的不透明度在单击时更改？还是上面的图？对于初学者，要设置不透明度，您将更改您的行：

```
$(this).css({'opacity':50}); 
```

到：

```
$(this).css({ opacity: 0.5 }); 
```

在您当前的小提琴中，您会看到设置了红色按钮的不透明度。如果你想让它设置别的东西，你现在有了语法。

**更新：** 与其连接一堆重复相同代码的 .click() 事件，最好创建一个函数

```
function setThisOpacity(id) {
    $("#" + id).css({ opacity: 0.5 });
    //do other stuff if you need to
} 
```

然后在您的 html 标记中，只需向要设置不透明度的项目添加一个实际 ID`onclick="setThisOpacity(someID);"`所在的位置。`someID`

# php - 来自 javascript 的错误验证 simplemodal 表单

> ID：13410022
> 
> 赞同：2
> 
> 时间：2012-11-16T03:40:42.813
> 
> 标签：php, javascript, forms, contact, simplemodal

我正在我的 html 网站上编辑 Simplemodal 联系表单以创建表单。在我遇到 javascript 导致获取未定义值的问题之前，所有编辑都进行得很好。我正在尝试添加一些字段并删除消息和复选框字段。第一个块是原始代码，我添加了第二个块：

```
 if (!$('#contact-container #contact-name').val()) {
            contact.message += 'First Name is required. ';
            fail = true;
        }

        if (!$('#contact-container #contact-lname').val()) {
            contact.message += 'Last Name is required. ';
            fail = true;
        } 
```

第一个 if 语句工作正常，但第二个语句在处理 js 时具有未定义的值。实际表格显示得很好，但此处理不起作用。以下代码是我在文件中的内容：

```
 <label for='contact-name'>First Name:</label>
        <input type='text' id='contact-name' class='contact-input' name='name' tabindex='1001' />
        <label for='contact-lname'>Last Name:</label>
        <input type='text' id='contact-lname' class='contact-input' name='lname' tabindex='1002' /> 
```

原件完好无损，我只是添加了最后两行。任何帮助，将不胜感激。谢谢！

编辑：[http](http://www.ericmmartin.com/projects/simplemodal-demos/) ://www.ericmmartin.com/projects/simplemodal-demos/ 我遇到问题的代码是contact.js，我对上面的修改行有疑问。

编辑：这是通过网页激活 Simplemodal 的代码

```
<div id='container'>
<div id='content'>
    <div id='contact-form'>
        <h3><a href='#' class='contact'>Support the Cause!</a></h3>
    </div>
</div>
</div> 
```

修改后的contact.js 如下，并使用jquery 和jquerySimplemodal（它们都不会影响代码处理的方式）。其他两个 js 文件是通过上面的链接。

```
jQuery(function ($) {
var contact = {
    message: null,
    init: function () {
        $('#contact-form input.contact, #contact-form a.contact').click(function (e) {
            e.preventDefault();

            // load the contact form using ajax
            $.get("data/contact.php", function(data){
                // create a modal dialog with the data
                $(data).modal({
                    closeHTML: "<a href='#' title='Close' class='modal-close'>x</a>",
                    position: ["15%",],
                    overlayId: 'contact-overlay',
                    containerId: 'contact-container',
                    onOpen: contact.open,
                    onShow: contact.show,
                    onClose: contact.close
                });
            });
        });
    },
    open: function (dialog) {
        // add padding to the buttons in firefox/mozilla
        if ($.browser.mozilla) {
            $('#contact-container .contact-button').css({
                'padding-bottom': '2px'
            });
        }
        // input field font size
        if ($.browser.safari) {
            $('#contact-container .contact-input').css({
                'font-size': '.9em'
            });
        }

        // dynamically determine height
        var h = 280;
        if ($('#contact-subject').length) {
            h += 26;
        }
        if ($('#contact-cc').length) {
            h += 22;
        }

        var title = $('#contact-container .contact-title').html();
        $('#contact-container .contact-title').html('Loading...');
        dialog.overlay.fadeIn(200, function () {
            dialog.container.fadeIn(200, function () {
                dialog.data.fadeIn(200, function () {
                    $('#contact-container .contact-content').animate({
                        height: h
                    }, function () {
                        $('#contact-container .contact-title').html(title);
                        $('#contact-container form').fadeIn(200, function () {
                            $('#contact-container #contact-name').focus();

                //          $('#contact-container .contact-cc').click(function () {
                //              var cc = $('#contact-container #contact-cc');
                    //          cc.is(':checked') ? cc.attr('checked', '') : cc.attr('checked', 'checked');
                    //      })
                    ;

                            // fix png's for IE 6
                            if ($.browser.msie && $.browser.version < 7) {
                                $('#contact-container .contact-button').each(function () {
                                    if ($(this).css('backgroundImage').match(/^url[("']+(.*\.png)[)"']+$/i)) {
                                        var src = RegExp.$1;
                                        $(this).css({
                                            backgroundImage: 'none',
                                            filter: 'progid:DXImageTransform.Microsoft.AlphaImageLoader(src="' +  src + '", sizingMethod="crop")'
                                        });
                                    }
                                });
                            }
                        });
                    });
                });
            });
        });
    },
    show: function (dialog) {
        $('#contact-container .contact-send').click(function (e) {
            e.preventDefault();
            // validate form
            if (contact.validate()) {
                var msg = $('#contact-container .contact-message');
                msg.fadeOut(function () {
                    msg.removeClass('contact-error').empty();
                });
                $('#contact-container .contact-title').html('Sending...');
                $('#contact-container form').fadeOut(200);
                $('#contact-container .contact-content').animate({
                    height: '80px'}, 
                function () {
                    $('#contact-container .contact-loading').fadeIn(200, function () {
                        $.ajax({
                            url: 'data/contact.php',
                            data: $('#contact-container form').serialize() + '&action=send',
                            type: 'post',
                            cache: false,
                            dataType: 'html',
                            success: function (data) {
                                $('#contact-container .contact-loading').fadeOut(200, function () {
                                    $('#contact-container .contact-title').html('Thank you!');
                                    msg.html(data).fadeIn(200);
                                });
                            },
                            error: contact.error
                        });
                    });
                });
            }
            else {
                if ($('#contact-container .contact-message:visible').length > 0) {
                    var msg = $('#contact-container .contact-message div');
                    msg.fadeOut(200, function () {
                        msg.empty();
                        contact.showError();
                        msg.fadeIn(200);
                    });
                }
                else {
                    $('#contact-container .contact-message').animate({
                        height: '30px'
                    }, contact.showError);
                }

            }
        });
    },
    close: function (dialog) {
        $('#contact-container .contact-message').fadeOut();
        $('#contact-container .contact-title').html('');    <!--here-->
        $('#contact-container form').fadeOut(200);
        $('#contact-container .contact-content').animate({
            height: 40
        }, function () {
            dialog.data.fadeOut(200, function () {
                dialog.container.fadeOut(200, function () {
                    dialog.overlay.fadeOut(200, function () {
                        $.modal.close();
                    });
                });
            });
        });
    },
    error: function (xhr) {
        alert(xhr.statusText);
    },
    validate: function () {
        contact.message = '';
        var fail = false;
        if (!$('#contact-name').val()) {
            contact.message += 'First Name is required. ';
            fail = true;
        }
        //#contact-container 
        if (!$('#contact-lname').val()) {
            contact.message += 'Last Name is required. ';
            fail = true;
        }
        var email = $('#contact-email').val();
        if (!email) {
            contact.message += 'Email is required. ';
            fail = true;
        }
        else {
            if (!contact.validateEmail(email)) {
                contact.message += 'Email is invalid. ';
                fail = true;
            }
        }

        var zip = $('#contact-zip').val();
        if (!zip) {
            contact.message += '2' + zip + '2';
            contact.message += 'ZIP is required. ';
            fail = true;
        }
        else{
            if (!contact.isValidZipCode(zip)) {
                contact.message += 'ZIP is invalid. ';
                fail = true;
            }
        }

        var age = $('#contact-age').val();
        if (!age){
            contact.message += 'Age is required. ';
            fail = true;
        }
        else{
            if (!contact.validateAge(age)) {
                contact.message += 'Age is invalid. ';
                fail = true;
            }
        }

        if (!$('#contact-message').val()) {
            contact.message += 'Message is required.';
            fail = true;
        }

        //if (contact.message.length > 0) {
    //      return true;
        //}
        else {
            if (fail) return false;
            else return true;
        }
    },

    isValidZipCode: function (value) {
    var re = /^\d{5}([\-]\d{4})?$/;
    return (re.test(value));
    },

    validateAge: function (age) {
        if (isNan(age)) return false;
        var a = parseInt(age);
        if (a > 0 && a < 100) return true;
        else return false;
    },

    validateEmail: function (email) {
        var at = email.lastIndexOf("@");

        // Make sure the at (@) sybmol exists and  
        // it is not the first or last character
        if (at < 1 || (at + 1) === email.length)
            return false;

        // Make sure there aren't multiple periods together
        if (/(\.{2,})/.test(email))
            return false;

        // Break up the local and domain portions
        var local = email.substring(0, at);
        var domain = email.substring(at + 1);

        // Check lengths
        if (local.length < 1 || local.length > 64 || domain.length < 4 || domain.length > 255)
            return false;

        // Make sure local and domain don't start with or end with a period
        if (/(^\.|\.$)/.test(local) || /(^\.|\.$)/.test(domain))
            return false;

        // Check for quoted-string addresses
        // Since almost anything is allowed in a quoted-string address,
        // we're just going to let them go through
        if (!/^"(.+)"$/.test(local)) {
            // It's a dot-string address...check for valid characters
            if (!/^[-a-zA-Z0-9!#$%*\/?|^{}`~&'+=_\.]*$/.test(local))
                return false;
        }

        // Make sure domain contains only valid characters and at least one period
        if (!/^[-a-zA-Z0-9\.]*$/.test(domain) || domain.indexOf(".") === -1)
            return false;   

        return true;
    },
    showError: function () {
        $('#contact-container .contact-message')
            .html($('<div class="contact-error"></div>').append(contact.message))
            .fadeIn(200);
    }
};

contact.init();}); 
```

这是 javascript 调用的 PHP 文件，用于制作表单

```
 $output = "<div style='display:none'>
<div class='contact-top'></div>
<div class='contact-content'>

    <div class='contact-loading' style='display:none'></div>
    <div class='contact-message' style='display:none'></div>
    <form action='#' style='display:none'>
        <label for='contact-name'>First Name:</label>
        <input type='text' id='contact-name' class='contact-input' name='name' tabindex='1001' />
        <label for='contact-lname'>Last Name:</label>
        <input type='text' id='contact-lname' class='contact-input' name='lname' tabindex='1002' />
        <label for='contact-email'>Email:</label>
        <input type='text' id='contact-email' class='contact-input' name='email' tabindex='1003' />
        <label for='contact-zip'>ZIP:</label>
        <input type='text' id='contact-zip' class='contact-input' name='zip' tabindex='1004' />
        <label for='contact-age'>Age:</label>
        <input type='text' id='contact-age' class='contact-input' name='age' tabindex='1005' /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T03:54:01.073

试试这个选择器`$('#contact-lname')`而不是你的。在我看来，您`#contact-lname`的不在 中，或者您的页面上有或在您的页面上`#contact-container`有重复的容器。`id="contact-container"``id="contact-lname"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T03:59:05.813

试试这个：

 ~~~~```
if ( $.trim($('input[name="name"]').val()) == "") {
        contact.message += 'First Name is required. ';
        fail = true;
    }

if ( $.trim($('input[name="lname"]').val()) == "") {
        contact.message += 'Last Name is required. ';
        fail = true;
    } 
```~~  ~~更新问题后，我假设您正在从`contact.php`文件中加载表单元素。

```
$.get("data/contact.php", function(data){ 
```

然后您必须将您的联系表格验证到`contact.php`.

因为您的 jQuery 代码在您刷新页面时加载一次，并且页面的所有 DOM 元素也加载了，所以您的 jquery 代码无法检测到您的表单元素，因为您正在`$.get()`通过外部文件加载这些元素`contact.php`~~~~

# java - 是否有任何关于如何以编程方式配置 logback 的文档？

> ID：13410029
> 
> 赞同：2
> 
> 时间：2012-11-16T03:41:32.130
> 
> 标签：java, logging, logback

我在 StackOverFlow 上看到了几个问题，并在 Logback 的用户文档中看到了一些关于它的评论，但我似乎找不到任何关于如何以编程方式配置 logback 的具体文档。我能找到的只是一些具体案例的例子，总的来说没有什么帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T07:00:15.823

据我所知，网站上没有文档。直到我被证明是错误的或文档被更新之前，我不幸不得不接受这个答案......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T08:13:37.890

请查看涉及附加程序的测试用例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-15T09:10:32.900

可以使用 Joran 以编程方式配置 Logback。Logback 文档有[一整章](http://logback.qos.ch/manual/onJoran.html)关于使用 Joran。

另一种方法是[使用 Spring](https://github.com/qos-ch/logback-extensions/wiki/Spring)。

# java - 在 Java 中从 JTable 创建 pdf 文件

> ID：13410033
> 
> 赞同：0
> 
> 时间：2012-11-16T03:41:51.273
> 
> 标签：java, swing, pdf, jtable, jframe

我有一个带有 jtable、Button 和 Jlabel 的 jframe。我有一个问题当我单击按钮时，它显示保存为 pdf 只是填写表格，但没有列名。如果我还想将 jlabel 添加到 pdf 文件中怎么办？

这是脚本：

```
Private void print(){ 

Document document = new Document(PageSize.A4.rotate());

try {
  PdfWriter writer = PdfWriter.getInstance(document, new FileOutputStream("D:/jTable.pdf"));

  document.open();
  PdfContentByte cb = writer.getDirectContent();

  cb.saveState();
  Graphics2D g2 = cb.createGraphicsShapes(500, 500);

  Shape oldClip = g2.getClip();
  g2.clipRect(0, 0, 500, 500);

  table_pdf.print(g2);
  g2.setClip(oldClip);

  g2.dispose();
  cb.restoreState();
} catch (Exception e) {
  System.err.println(e.getMessage());
}
document.close();} 
```

这是截图 ![在此处输入图像描述](../Images/e122f91937177223f09636ceec767927.png)

这是文件pdf ![在此处输入图像描述](../Images/b1a5d224a945a6183ac60f723cf2e285.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T05:58:01.290

表的列标题显示为`JScrollPane`添加表的列标题。尝试使用以下方法`JScrollPane`

```
public JViewport getColumnHeader() 
```

并将其打印在桌子上方

# php - MySQL 选择具有 yyyy-mm-dd 作为日期的特定年或年月行

> ID：13410037
> 
> 赞同：2
> 
> 时间：2012-11-16T03:42:50.507
> 
> 标签：php, mysql, codeigniter

好的，我确定这很简单，现在它只是在逃避我。但我正在搜索，我也找不到它，也许我不知道我在搜索什么。反正。

我有一个表格，有几行帖子，在这些行中是一个`YYYY-MM-DD`格式的列，可能是`YYYY-MM-DD HH:MM:SS`任何一种方式。我正在尝试构建一个查询，让我只选择特定年份的条目或给定年份的特定月份。但是由于格式是它们的本质，我让自己感到困惑，我知道有一种方法可以格式化查询中的日期，这样它们就可以很容易地进行比较。但我想不出来。

我的思维过程目前存在严重缺陷。目前关于如何处理。

注意我也在使用 Codeigniter 及其 ORM

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T03:45:34.917

你可以试试这段代码

```
FROM_UNIXTIME(datetime_column, '%Y') AS year 
```

或获取特定年份的记录

```
 YEAR(datetime_column)='2012' 
```

获取特定月份的记录

```
 MONTH(datetime_column)='11' 
```

# jquery - 专注于子元素，在父元素上触发模糊

> ID：13410039
> 
> 赞同：1
> 
> 时间：2012-11-16T03:42:55.533
> 
> 标签：jquery, focus, blur

这是我的代码：

```
<div tabindex="0" id="parent" style="margin-top:200px;margin-left:200px;background-color:black;height:100px;width:200px;">
    <input type="text" style="width:80px;margin:5px auto;display:none">
<div>

$("#parent").blur(function() {
     $(this).css("background-color", "blue").animate({
                marginLeft : '+=50'
            }, 400);
     $("#parent>input").css("display", "none");
   });

   $("#parent>input").focus(function() {
     $(this).css("display", "block");
   });
   $("#parent>input").blur(function() {
     $(this).css("display", "none");
   });
   $("#parent>input").keyup(function(e) {
    if (e.which === 13) {
        console.log("enter");
    }
   }); 
```

专注于输入，会导致在父 div 上触发模糊，并导致 div 消失，因此用户无法在文本框中输入任何文本！

[http://jsfiddle.net/z7Erv/10/](http://jsfiddle.net/z7Erv/10/)

任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-21T23:44:33.137

不确定这个问题是否过时 - 这可能是您想要做的吗？： [https ://jsfiddle.net/1280pn4n/1/](https://jsfiddle.net/1280pn4n/1/)

```
$('#parent').bind('focusin focusout', function () {
    $(this).toggleClass('showup');
}); 
```

我刚刚遇到了同样的问题，Keltex 的回答帮助了我（使用 focusin/focusout 而不是 onfocus/blur）：

[jQuery确定父母是否失去了“焦点”](https://stackoverflow.com/questions/2195877/jquery-figuring-out-if-parent-has-lost-focus)

# mongodb - 如何（轻松）从文档数组中查询字段的一系列值

> ID：13410042
> 
> 赞同：3
> 
> 时间：2012-11-16T03:43:00.473
> 
> 标签：mongodb

Windows 7 64 SP1 MongoDB 2.2.0

鉴于此数据：

```
db.address_book.drop()
db.address_book.save({"_id":1, "addresses": [ {"zip": 10018} , {"zip": 10012} ] } )
db.address_book.save({"_id":2, "addresses": [ {"zip": 11216} , {"zip": 10012} ] } )
db.address_book.save({"_id":3, "addresses": [ {"zip": 11215} , {"zip": 10010} ] } )
db.address_book.save({"_id":4, "addresses": [ {"zip": 10011} , {"zip": 10041} ] } )
db.address_book.save({"_id":5, "addresses": [ {"zip": 97202} , {"zip": 97201} ] } )
db.address_book.save({"_id":6, "addresses": [ {"zip": 10038} , {"zip": 97201} ] } ) 
```

我想要其任何邮政编码在 10012-10040 范围内的所有文档。换句话说，我想要：

```
{ "_id" : 1, "addresses" : [ { "zip" : 10018 }, { "zip" : 10012 } ] }
{ "_id" : 2, "addresses" : [ { "zip" : 11216 }, { "zip" : 10012 } ] }
{ "_id" : 6, "addresses" : [ { "zip" : 10038 }, { "zip" : 97201 } ] } 
```

此查询返回所需的结果：

```
db.address_book.find( { "addresses": { $elemMatch: { "$and" :[ { "zip": {$gte: 10012} } ,  {"zip": {$lte: 10040} } ] } } } ) 
```

问题：这是获得结果的最短（最优雅）查询吗？

这些查询中的每一个：

```
db.address_book.find( { "addresses": { $elemMatch: { "zip": {$gte: 10012} , "zip": {$lte: 10040} } } } )
db.address_book.find( {"addresses.zip" : {$gte:10012, $lte:10040} } )
db.address_book.find( {"$and" :[ { "addresses.zip": {$gte: 10012} } ,  {"addresses.zip": {$lte: 10040} } ] }  ) 
```

返回这个：

```
{ "_id" : 1, "addresses" : [ { "zip" : 10018 }, { "zip" : 10012 } ] }
{ "_id" : 2, "addresses" : [ { "zip" : 11216 }, { "zip" : 10012 } ] }
{ "_id" : 3, "addresses" : [ { "zip" : 11215 }, { "zip" : 10010 } ] }
{ "_id" : 4, "addresses" : [ { "zip" : 10011 }, { "zip" : 10041 } ] }
{ "_id" : 6, "addresses" : [ { "zip" : 10038 }, { "zip" : 97201 } ] } 
```

如果第一种方法是最短的，它会产生一个复杂的 C++ 查询：

```
mongo::Query selector = QUERY("addresses" << BSON("$elemMatch" <<
   BSON("$and" <<BSON_ARRAY(BSON("zip" << BSON("$gte"<<10012)) <<
                            BSON("zip" << BSON("$lte" << 10040)))))); 
```

我认为这将是一个常见的查询是错误的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T04:36:57.990

我认为这种情况下最简洁、最优雅的查询是您列出的几个组合：

```
 db.address_book.find({addresses: {$elemMatch: {zip: {$gte:10012, $lte:10040}}}}) 
```

# php - 硬编码为动态值

> ID：13410043
> 
> 赞同：0
> 
> 时间：2012-11-16T03:43:07.623
> 
> 标签：php, mysql

我被赋予了将硬编码字段转换为动态字段的任务。我已将其部分更改为动态
让我解释一下情况，

我们有很多数据库，每个数据库都有一个名为 Surveys 的表

通过使用 DESCRIBE 语句，我们将检索调查表中的字段，而不考虑数据库。

我需要知道我们可以一次又一次地循环直到调查表中的所有字段出现的方式。

在下面的代码中，我将 for 循环留空。

请让我知道需要进行哪些更改才能使其正常工作

我真的很感激任何帮助

```
function insertIntoUserUploadFileds() {

    $describe="DESCRIBE surveys";

    $sql = "INSERT INTO `userUploadFields` (`fieldName`, `inUse`, `mandatory`, `type`, `mapTo`) VALUES";

    $inUse="0";
    $type="";

    //for(){
        if($field=='type'){
            $type="N";
        }elseif(($field=='fname') || ($field=='lname') || ($field=='phone')){
            $inUse="1";
            $type="T";
        }elseif($field=='email'){
            $inUse="1";
            $type="E";
        }

        //$sql .= "('".$field."', '".$inUse."', '0', '
        $result1 = mysql_query ($describe);
        $result = mysql_query ($sql);
    //}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T03:50:19.390

```
 $result1 = mysql_query ('DESCRIBE surveys');

        //here is how you retieve all field and check
        while($row = mysql_fetch_array($result1)) {

         $sql = "INSERT INTO `userUploadFields` (`fieldName`, `inUse`, `mandatory`, `type`, `mapTo`) VALUES";

           //here you can do if else to check the column name
           if($row['field']=='type')
            {
                $type="N";
            }
            else if(($row['field']=='fname') || ($row['field']=='lname') || ($row['type']=='phone'))
            {
                $inUse="1";
                $type="T";
             }

             else ($row['field']=='email')
            {
                 $inUse="1"
                 $type="E";
            }

           //build your query

           $sql .= "('".$field."', '".$inUse."', '0', '......)

           //execute your complete query
           $result = mysql_query ($sql);
        }//end of while 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T04:02:02.967

`DESCRIBE`如果您尝试检索`type`特定列的默认值，而不是使用，您可能会查看此内容。它描述了如何分解特定表中的信息。[法典](http://php.net/manual/en/function.mysql-field-type.php)

# actionscript-3 - 如何隐藏弹性数据网格的内容？

> ID：13410046
> 
> 赞同：2
> 
> 时间：2012-11-16T03:43:28.673
> 
> 标签：actionscript-3, flex4

注意：我使用的是 FLEX 4。

嗨，我想知道是否有一种方法可以隐藏数据网格的数据而不隐藏数据网格本身？我希望屏幕打开时数据网格显示为空。一旦用户从组合框中选择了一个选项，我只希望数据网格的内容可见。有没有办法做到这一点？（其中的原因有点复杂，解释起来并不愉快，但这是我必须做的事情。）

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T04:04:02.930

您可以将`dataProvider`数据网格设置为`null`或一个空集合，直到准备好显示您的数据。

默认情况下，将 null 或空集合初始化到数据网格。然后，选择所需的组合框选项时，将数据网格数据提供商设置为有效数据：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
               xmlns:s="library://ns.adobe.com/flex/spark">
    <fx:Script>
        <![CDATA[
            import mx.collections.ArrayList;

            import spark.events.IndexChangeEvent;

            [Bindable]
            public var data:ArrayList = new ArrayList([ "one", "two", "three" ]);

            protected function combobox1_changeHandler(event:IndexChangeEvent):void
            {
                switch (comboBox.selectedItem)
                {
                    case "Show data":
                        dataGrid.dataProvider = data;
                        break;
                    default:
                        dataGrid.dataProvider = null;
                        break;
                }
            }
        ]]>
    </fx:Script>

    <s:layout>
        <s:VerticalLayout />
    </s:layout>

    <s:DataGrid id="dataGrid"
                dataProvider="{null}" />

    <s:ComboBox id="comboBox"
                change="combobox1_changeHandler(event)">
        <s:dataProvider>
            <s:ArrayList>
                <fx:String>Show data</fx:String>
                <fx:String>Hide data</fx:String>
            </s:ArrayList>
        </s:dataProvider>
    </s:ComboBox>

</s:Application> 
```

另一种方法是使用 Flex 状态系统。

您可以定义两种状态来控制数据网格中数据的可见性。然后，根据当前状态设置数据提供者：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
               xmlns:s="library://ns.adobe.com/flex/spark"
               currentState="hideData">

    <s:states>
        <s:State name="showData" />
        <s:State name="hideData" />
    </s:states>

    <fx:Script>
        <![CDATA[
            import mx.collections.ArrayList;

            import spark.events.IndexChangeEvent;

            [Bindable]
            public var data:ArrayList = new ArrayList([ "one", "two", "three" ]);

            protected function combobox1_changeHandler(event:IndexChangeEvent):void
            {
                switch (comboBox.selectedItem)
                {
                    case "Show data":
                        currentState = "showData";
                        break;
                    default:
                        currentState = "hideData";
                        break;
                }
            }
        ]]>
    </fx:Script>

    <s:layout>
        <s:VerticalLayout />
    </s:layout>

    <s:DataGrid id="dataGrid"
                dataProvider.hideData="{null}"
                dataProvider.showData="{data}" />

    <s:ComboBox id="comboBox"
                change="combobox1_changeHandler(event)">
        <s:dataProvider>
            <s:ArrayList>
                <fx:String>Show data</fx:String>
                <fx:String>Hide data</fx:String>
            </s:ArrayList>
        </s:dataProvider>
    </s:ComboBox>

</s:Application> 
```

# php - 按列分组并依赖于另一列

> ID：13410052
> 
> 赞同：4
> 
> 时间：2012-11-16T03:44:50.700
> 
> 标签：php, mysql, sql

这是我试图通过 MySQL 查询彻底解决的问题的简化视图。这不是我正在处理的实际表。

如果我有下表：

```
Name Buyer ID  
John Fred  4  
John Smith 3  
Fred Sally 2  
John Kelly 1 
```

我想要一个查询返回以下内容：

```
Name Buyer ID      
John Fred  4  
Fred Sally 2 
```

这样我们按“名称”分组并显示最新的行/买家/ID。

我尝试通过执行嵌套选择语句来实现这一点，其中我首先执行“ORDER BY ID DESC”，然后在最外面的 SELECT 上执行“GROUP BY NAME”。而且，虽然这是解决问题的迂回方式，但似乎通过排序，正确的选择会返回给我。不幸的是，“GROUP BY”不能“保证”“Buyer”列将包含预期的条目。

有什么有用的建议可以将其作为查询实现吗？目前，我有一个在大型表转储上运行的查询的效率非常低的 PHP“版本”——绝对不是最佳选择。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T03:47:07.943

试试这个，子查询背后的想法是它`ID`为每次`Name`使用`MAX`（*聚合函数*）获取最新的。然后将它与子查询的两列上的表本身连接起来。

```
SELECT  a.*
FROM    tableName a
        INNER JOIN 
        (
            SELECT name, MAX(ID) maxID
            FROM tableName
            GROUP BY name
        ) b ON a.Name = b.Name AND
                a.ID = b.MaxID 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/e47bf/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T03:53:36.530

另一种选择是加载在子查询中排序的数据，然后对结果进行分组。我不能引用这一点，但我在几个地方读到过，这没有（明显的）性能影响。

所以像：

```
SELECT * 
FROM (
    SELECT * 
    FROM `yourtable` 
    ORDER BY `id` DESC
) as `tmp` 
GROUP BY `name` 
```

# objective-c - 我如何知道我是否正在 UI 线程上执行某些操作？

> ID：13410066
> 
> 赞同：1
> 
> 时间：2012-11-16T03:46:28.717
> 
> 标签：objective-c, multithreading, thread-safety

我编写了一个测试来使用块来试验 RestKit。我认为`RKRequest.onDidLoadResponse`需要包含一个`dispatch_async()`调用来获取主 UI 线程上的响应，但令我惊讶的是这会导致运行时异常，所以我把它拿出来，我可以很好地更新界面。

我有问题的代码如下：

```
- (IBAction)loadSeasons:(UIButton *)sender {
    [[RKClient sharedClient] get:@"/api/v1/seasons" usingBlock:^(RKRequest* req) {
        req.onDidLoadResponse = ^(RKResponse* res) {
            NSLog(@"Request Performed: %@", res.bodyAsString);
            self.textResponse.text = res.bodyAsString;
            //dispatch_async(dispatch_get_main_queue(), ^{
            //    NSLog(@"In main queue: %@", res.bodyAsString);
            //});
        };
    }];
} 
```

如果我取消注释该`dispatch_async`块，我会得到异常。那么我怎么知道什么时候需要使用它，什么时候不需要呢？我是否应该测试一些东西来告诉我正在执行的代码是否在主线程上？

我是 Objective-C 的新手，对我来说还处于早期阶段，所以我为可能是新手的问题道歉。

**更新**：当取消注释上面的代码时，会发生以下情况：

1.  控制台`(lldb)`以蓝色输出文本，未提供其他信息。
2.  objc_msgSend中断`libobjc.A.dylib`：`is shown in the editor on`0x1c2009b: movl 8(%edx), %edi`with the message in green:`线程 1: EXC_BAD_ACCESS (code=1, address=0x40000008)`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T05:29:52.340

要回答您的问题，您可以通过调用来检查您当前的线程`[NSThread isMainThread]`。但是，您不需要为您的问题执行此操作，事实上，如果您已经在主线程中运行，将执行块分派到主线程是完全合法的。

崩溃是因为执行块时变量的存储方式。当第一个块完成时，变量使用的堆栈内存可以被覆盖，所以当你的异步`NSLog`语句在第二个块中运行时，你的变量`res`已经被破坏了，所以它在你的日志语句中使用时指向垃圾，触发崩溃。

为了完整性，研究`__block`变量声明。为了`res`在您的第二个调度块中引用，我相信您必须`__block`通过在您的第一个块中声明它来将其声明为变量以将其移动到堆：`__block RKResponse* response = res;`然后`response`在您的调度日志语句中使用。

# c# - 使用所见即所得编辑器编辑 HTML

> ID：13410067
> 
> 赞同：5
> 
> 时间：2012-11-16T03:46:30.077
> 
> 标签：c#, html, string, datagridview, wysiwyg

我有一个带有 HTML 字符串的 datagridview。使用 CellDoubleClick 事件，我在 WebBrowser 控件中显示 html 字符串。

**在 Form1 中**

```
private void dataGridView1_CellDoubleClick(object sender, DataGridViewCellEventArgs e)
{
    try
    {
        if (e.ColumnIndex != 0 && e.RowIndex != -1)
        {
            string s = dataGridView1.Rows[e.RowIndex].Cells[e.ColumnIndex].Value.ToString();
            this.f2 = new Form2(s);
            f2.ShowDialog();
        }
    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.Message, "ERROR", MessageBoxButtons.OK, MessageBoxIcon.Error);
    }
} 
```

**在 Form2 中**

```
private IHTMLDocument2 doc;
string reply;

public Form2(string reply)
{
    InitializeComponent();
    this.reply = reply;
}

private void Form2_Load(object sender, EventArgs e)
{
    webBrowser1.DocumentText = reply; <--- string from DataGridView

    IHTMLTxtRange range = doc.selection.createRange() as IHTMLTxtRange;
    range.pasteHTML(webBrowser1.DocumentText);
    range.collapse(false);
    range.select();

    doc = webBrowser1.Document.DomDocument as IHTMLDocument2;
    doc.designMode = "On";
} 
```

使用上面的代码，我可以成功地将 HTML 字符串显示为纯文本，但是我无法对其进行编辑。或者，如果我使用此代码：

```
private IHTMLDocument2 doc;
private void Form2_Load(object sender, EventArgs e)
{
    webBrowser1.DocumentText = reply; <--- string from DataGridView

    doc = webBrowser1.Document.DomDocument as IHTMLDocument2;
    doc.designMode = "On";

    IHTMLTxtRange range = doc.selection.createRange() as IHTMLTxtRange;
    range.pasteHTML(webBrowser1.DocumentText);
    range.collapse(false);
    range.select();
} 
```

这将是一个空白表格，但我可以写信给它。

我觉得这与`range.pasteHTML(webBrowser1.DocumentText);`使用 Form2_Load 方法有关，但我不知道有任何其他方法可以让我在打开 Form2 时显示来自 DataGridView 的 HTML 字符串。

我想让用户能够将 HTML 字符串编辑为纯文本（之后它将被转换回 HTML 并显示在 datagridview 中）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T07:48:29.983

**这是可能的！**您可以使用默认`WebBrowser`控件编辑 HTML，

1.  添加对“Microsoft.mshtml.dll”文件的引用，此处提供。

2.  假设您的 WebBrowser 被命名为“浏览器”，请在 Form.Load 事件中添加此代码 `(browser.Document.DomDocument as mshtml.IHTMLDocument2).designMode = "On";`

3.  调用以下函数来格式化所选文本：

* * *

```
browser.document.ExecCommand("Bold", false, null);
browser.document.ExecCommand("Underline", false, null);
browser.document.ExecCommand("Italics", false, null);
browser.document.ExecCommand("StrikeThrough", false, null);
browser.document.ExecCommand("FontName", false, "Times New Roman");
browser.document.ExecCommand("FontName", false, "Arial");
browser.document.ExecCommand("FontName", false, "etc.");
browser.document.ExecCommand("FontSize", false, "1");
browser.document.ExecCommand("FontSize", false, "2");
browser.document.ExecCommand("FontSize", false, "3");
browser.document.ExecCommand("InsertUnorderedList", false, null);
browser.document.ExecCommand("InsertOrderedList", false, null);
browser.document.ExecCommand("Cut", false, null);
browser.document.ExecCommand("Copy", false, null);
browser.document.ExecCommand("Paste", false, null);
browser.document.ExecCommand("CreateLink", true, null); 
```

* * *

~~该`WebBrowser`控件不允许编辑，并且仅用于查看网页。它实际上是在后台运行的 Internet Explorer/Trident 渲染引擎解析 HTML 并渲染最终页面，并支持 DOM/JS。没有流行的浏览器支持编辑 HTML 页面、IMO，IE 也不支持。~~

# matlab - 如何在MATLAB中找到图像的标准差

> ID：13410071
> 
> 赞同：2
> 
> 时间：2012-11-16T03:47:11.203
> 
> 标签：matlab, standard-deviation

我有一张图像，我想找到图像每一行的标准偏差，我将使用每行的 SD 值来计算图像的平均 SD。我知道查找 SD (std) 的功能，但我不知道如何开始/做什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T04:08:46.710

MATLAB 中的图像仍然只是矩阵。由于您要获取行的标准差，因此可以使用`std(A,0,2)`沿行获取标准差。然后你可以`std`再次在结果向量上使用来得到我认为你正在寻找的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T06:32:30.030

不是计算`std`每一行的值然后取平均值，而是计算整个图像的标准值（所有像素值）不是更准确（更简单）吗？那是：

```
 std(img(:)); 
```

取`std`每一行的，然后取平均值并不完全是`std`图像所有像素值的…例如：

```
 >> a=peaks(100);
 >> mean(std(a.'))

 ans =

     1.4223

 >> std(a(:))

 ans =

     1.8882 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T06:06:24.317

如果您有灰度图像，请使用

```
mean(std(img.')) 
```

如果您有彩色图像（即`ndims(img) == 3`），则必须在数组的每一页上重复上述操作：

```
squeeze( mean(std(img,0,2)) ) 
```

这将导致每个颜色层的每一行的平均标准偏差。

# elasticsearch - 如何在结果集中包含文档 URL

> ID：13410072
> 
> 赞同：0
> 
> 时间：2012-11-16T03:47:22.540
> 
> 标签：elasticsearch

在 ElasticSearch 中，我想知道如何在搜索结果集中取回文档网址？这就是我用一些例子的意思。

假设我使用以下 curl 命令对文档进行索引：

```
curl -XPUT 'http://localhost:9200/ads/offers/1234' -d '{
  "name": "blah blah",
  "Weight":0.0001,
  ...
}' 
```

然后我运行搜索，我想在结果集中获取文档 URL 本身。在上述情况下，文档 URL 如下：

```
http://localhost:9200/ads/offers/1234\. 
```

我怎样才能做到这一点？是否有一个特殊的字段名称，还是我必须创建某种字段来明确存储它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T03:56:10.073

elasticsearch 搜索响应包含在客户端上构建此 URL 所需的所有部分。您示例中的 URL 记录将如下所示：

```
"hits" : [ {
    "_index" : "ads",
    "_type" : "offers",
    "_id" : "1234",
    ... 
```

如果您确实需要从 elasticsearch 获取此 URL，您可以使用[脚本字段](http://www.elasticsearch.org/guide/reference/api/search/script-fields.html)将这些部分组合到服务器端的单个字段中，尽管我想不出需要它的合法场景。

# html - 链接的 PDF 文本显示在 Apple 设备的网页上

> ID：13410080
> 
> 赞同：1
> 
> 时间：2012-11-16T03:48:31.013
> 
> 标签：html, pdf, safari

在 iPod 或 Mac（尚未测试其他 Apple 设备）上查看时，此网页会在链接 PDF 的原始页面的文本和照片上显示链接 PDF 的文本。我尝试在空白窗口中打开链接，但这并没有解决问题（因为我认为它可能认为它是嵌入的。

代码本身是：`<p align="left" class="style1"><a href="Baxter_M&amp;E_May2013_23Oct2.pdf" target="_blank">May 2013 Short Course Info</a> </p>`

背景：几年前，我的妻子为一位想要某种风格网页（看起来很古色古香？）的客户建立了一个简单的网页。我们俩都不是程序员，但我知道足够的 HTML 和 CSS 来进行错误检查等。该网站很旧，不能代表我们的技能/能力（现在想解决这个问题）。

页面的完整代码：

```
 <html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Course Information</title>
<link href="irving.css" rel="stylesheet" type="text/css" />
<style type="text/css">
<!--
.style3 {font-size: 16px}
-->
</style>
<script language="JavaScript">
<!--
function mmLoadMenus() {
  if (window.mm_menu_0115210737_0) return;
  window.mm_menu_0115210737_0 = new Menu("root",96,18,"Arial, Helvetica, sans-serif",12,"#030303","#FFFFFF","#FFFFFF","#000000","left","middle",3,0,1000,-5,7,true,true,true,0,true,true);
  mm_menu_0115210737_0.addMenuItem("Biography","location='bio.html'");
  mm_menu_0115210737_0.addMenuItem("Publications","location='publications.html'");
  mm_menu_0115210737_0.addMenuItem("I.J.'s&nbsp;Food","location='moreinfo.html'");
  mm_menu_0115210737_0.addMenuItem("Photos","location='photos.html'");
   mm_menu_0115210737_0.hideOnMouseOut=true;
   mm_menu_0115210737_0.bgColor='#300022';
   mm_menu_0115210737_0.menuBorder=1;
   mm_menu_0115210737_0.menuLiteBgColor='#300022';
   mm_menu_0115210737_0.menuBorderBgColor='#030303';

mm_menu_0115210737_0.writeMenus();
} // mmLoadMenus()
//-->
</script>
<script language="JavaScript" src="mm_menu.js"></script>
</head>

<body>
<script language="JavaScript1.2">mmLoadMenus();</script>
<table width="794" border="0" cellpadding="0" cellspacing="0" bgcolor="#FFFFFF">
  <!--DWLayoutTable-->
  <tr>
    <td height="79" colspan="4" valign="middle" bgcolor="#000000" class="title"><img src="images/banner-black1.jpg" width="590" height="48" /></td>
  </tr>
  <tr bgcolor="#3366FF" class="a">
    <td height="22" colspan="4" valign="top" bgcolor="#3366FF" class="navigation" id="navigation"><a href="index.html">Home </a><a href="bio.html" name="link1" id="link1" onmouseover="MM_showMenu(window.mm_menu_0115210737_0,0,19,null,'link1')" onmouseout="MM_startTimeout();">I. J.  Pflug </a><a href="course.html">Course Info</a><a href="books.html">Order Books</a><a href="resources.html">Resources</a><a href="contact.html">Contact</a></td>
  </tr>
  <tr>
    <td width="78" rowspan="3" valign="top"><!--DWLayoutEmptyCell-->&nbsp;</td>
    <td height="88" colspan="2" valign="top" class="style1"><h1>&nbsp;</h1>
        <h1>Information Regarding the Microbiology and Engineering of  Sterilization Processes Course</h1></td>
    <td width="60" rowspan="4" valign="top"><!--DWLayoutEmptyCell-->&nbsp;</td>
  </tr>
  <tr>
    <td width="317" height="144" valign="top" background="Baxter M&amp;ECseApr08,12Dec07.pdf"><br />
        <p align="left"><span class="style1"><strong class="style1 style3">1\. Upcoming Courses:</strong></span></p>
        <p align="left" class="style1"><a href="Baxter_M&amp;E_May2013_23Oct2.pdf" target="_blank">May 2013     Short Course Info</a> </p>
        <p align="left" class="style1">May 1-3 , 2013  <br />
        Baxter International Headquarters<br />
      Deerfield, IL </p>
        <p align="left"><a href="M&amp;E,Dec08 CrsAnn&amp;Reg ,Mar0.pdf" target="_blank"></a><strong><br />
        <br />
    </strong></p></td>
    <td width="372" valign="top"><div align="left"></div>
    <img src="images/class1.jpg" width="289" height="193" /></td>
  </tr>
  <tr>
    <td colspan="2" rowspan="2" valign="top" class="style1"><p align="left" class="style2">&nbsp;</p>
    </td>
  </tr>
  <tr>
    <td height="1774" valign="top"><!--DWLayoutEmptyCell-->&nbsp;</td>
  </tr>
</table>
</body>
</html> 
```

# html - 如何在 CSS 样式表中使用条件格式？

> ID：13410082
> 
> 赞同：6
> 
> 时间：2012-11-16T03:48:43.580
> 
> 标签：html, css, internet-explorer

我希望为 IE 9 使用一些条件样式 - 但我希望在我的主样式表中包含这些条件 - 不使用第二个样式表或在 HTML 页面中引用它。目前，我将这段代码放在 HTML 页面中，因为它覆盖了主样式表中的其他样式：

```
<!--[if IE 9]>
<style>
nav li a:hover {
    text-decoration: underline;
    color: black;
}
nav .four a:hover{
    color:white;
}
</style>
<![endif]--> 
```

但我想在 CSS 表中包含这些条件，以便它们都位于一个位置，我不必在每个页面中重复代码。我也宁愿避免只为 IE 9 提供单独的 CSS - 我已经为 IE 7-8 提供了一个。我在样式表中试过这个：

```
<!--[if IE 9]>

nav li a:hover {
    text-decoration: underline;
    color: black;
}
nav .four a:hover{
    color:white;
}
<![endif]--> 
```

上面的代码是针对我的 IE 9 的（它是针对IE 9 不支持文本阴影`nav bar`的修复）。`nav bar`

有没有办法在 CSS 样式表中做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T04:11:24.537

条件注释*仅*适用于 HTML，但您*可以*在 CSS 中利用它。HTML5Boilerplate 通过向 html 元素添加一个类来实现这一点 (https://github.com/h5bp/html5-boilerplate/blob/master/index.html)

```
<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]--> 
```

这为您提供了一个仅可用于针对 IE 的钩子：

```
.lt-ie8 .my-style { color: red } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T03:58:57.960

这在标准上是不可能的。IE 中的条件块只能在 HTML 网页中使用。

*然而*，浏览器供应商一直对他们的 css 解析器很有趣，包括微软。所以有一些我们称之为[css hacks](http://www.webdevout.net/css-hacks)的东西可以用来让一些解析器解释一些规则，但不能被其他解析器解释。

请不要认为这是应该尽可能避免的事情：样式表将不再符合 w3c，而且它绝对不是一个“干净”的解决方案（更像是在 IE6 的黑暗统治期间常见的肮脏的遗留变通办法）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T04:56:17.877

以下是执行您所要求的所有方法。6 号很可能是你的追求。只需将 9 更改为 11。[http://www.visibilityinherit.com/code/target-ie.php](http://www.visibilityinherit.com/code/target-ie.php)

# jquery - HTML表单自动隐藏并提交模糊

> ID：13410087
> 
> 赞同：0
> 
> 时间：2012-11-16T03:48:50.943
> 
> 标签：jquery, dom

我们有一个界面设计，在常规 HTML 元素中显示数据字段，并且仅在用户单击显示元素时公开输入表单。

```
<div class="header-container">
    <header class="header-displayName"></header>

    <form class="form" style="display: none;">
    <section><label>First Name</label>
        <span><input type="text" class="form-input" placeholder="first name"></span></section>
    <section><label>Last Name</label>
        <span><input type="text" class="form-input" placeholder="last name"></span></section>
        <div class="hidden-submit"><input type="submit" tabindex="-1"/></div>
    </form>
</div> 
```

在上面的例子中，用户点击了 header 元素，该元素已在 jquery 中连接以隐藏自身并显示表单。按下 Enter 键后，表单也会隐藏自身并显示标题，同时发出 Ajax 请求以提交表单数据。

现在的问题是下一步如何增强用户体验，用户在表单中点击或点击到文档的其他位置将使表单意识到它需要像往常一样隐藏和提交。

我尝试了表单的模糊事件，但后来意识到它只是内部单个输入元素的模糊事件冒泡，从而导致表单隐藏/提交只是失去了名字输入的焦点；用户没有机会处理 lastName 输入。当然，如果我在每个输入字段上都尝试了 stopPropagation()，那么表单永远不会模糊，因为它自己没有模糊事件。

如何在表单级别可靠地捕获模糊事件？

为了给这个实现提供更多的上下文，它是一个可重用的 UI 组件，所以它并不是真正静态地放置在单页文档中。它们甚至可能在同一个文档中出现多次。他们不应该在文档级别进行任何可能会弄乱其他组件的接线。此类表格中的所有字段也是可选的，因此不能指望在提交之前填写所有字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T01:51:58.250

发现jquery提供了一个伪选择器检查“ **:focus** ”；这使得在表单级别监听模糊变得更容易，但检查是否有任何其他同级输入元素在稍有延迟后获得焦点。

```
setTimeout(function(){
  if (!$('.form-input').is(':focus')) {
    $('.form').submit();
  }
}.bind(this), 10); 
```

或者，选择器可以应用于表单“.form input”或其他一些后代选择器以覆盖感兴趣的输入字段。

# php - OOP PDO 获取 while 循环

> ID：13410089
> 
> 赞同：1
> 
> 时间：2012-11-16T03:49:20.570
> 
> 标签：php, mysql, pdo

我的课堂上有一个功能没有完成。我正在寻找一种方法来整夜做这件事。好吧，我想在 OOP 类/函数中使用 PDO 获取对 MYSQL 的 SELECT 请求的所有结果。

这是我的功能

```
function select($query)
{
    try
    {
    $sql = $this->connect->query($query);
        while ($row = $sql->fetch(PDO::FETCH_ASSOC))
        {
        return ????
        }
    }
    catch(PDOException $e) 
    {  
        echo $e->getMessage(); 
    }

} 
```

我知道我可以使用 while 循环来做到这一点，我测试了一些选项，但大多数时候我只得到 1 个结果。任何人对我来说，我可以从哪里开始寻找这个问题的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T04:09:33.220

实际上，这很容易。您使用`PDO::FETCH_CLASS`并指定要为每一行实例化的类。

这是一个将所有可用行作为类对象数组获取的示例`YourClassName`。

```
function select($query) {
    try {
        $sql = $this->connect->query($query);
        return $sql->fetchAll(PDO::FETCH_CLASS, YourClassName);
    } catch(PDOException $e) {  
        echo $e->getMessage(); 
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T03:58:39.993

只`$sql->fetch(PDO::FETCH_ASSOC)`在 while 循环中使用，而不是之前，因为你有它。

所以，比如：

```
while($row = $sql->fetch(PDO::FETCH_ASSOC)) {
    // something
} 
```

# javadoc - 它是java方法文档的正确文档吗？

> ID：13410091
> 
> 赞同：0
> 
> 时间：2012-11-16T03:49:25.263
> 
> 标签：javadoc

它是java方法文档的正确文档吗？我的部分代码如下。没有参数但有返回值。只有局部变量。

```
/**
 *This method prompts user to enter the how many numbers user is going to test.
 *
 *@return     The validated value based on parameter.
 */

public static int getNum()
{
    int t;
    Scanner input=new Scanner(System.in);

    System.out.print("How many numbers would you like to test? ");
    t=input.nextInt();

    while (validateNum(t))
    {
        System.out.print("How many numbers would you like to test? ");
        t=input.nextInt();
    }

    return t;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T04:35:37.930

方法的 Javadoc 不应*以*“此方法”一词开头——这在每个方法描述的开头都*隐含。*

类似地，在记录课程时，假设“This class”一词出现在您的评论之前。

此外，您正在描述实现（询问用户），但实现应该可以自由地以任何它想要的方式获取它，例如从文件中读取它或返回一个常量。

这里有更合适的：

```
/**
 * Return how many numbers user is going to test.
 *
 * @return The number of numbers to be tested
 */ 
```

# android - 尝试在选项卡活动中使用 actionbarSherlock

> ID：13410092
> 
> 赞同：0
> 
> 时间：2012-11-16T03:49:24.890
> 
> 标签：android, android-tabhost, actionbarsherlock

我想在顶部有一个 actionBar，在下一行有一个标签。

我的活动扩展了 TabActivity，并使用了 getActionBar();

现在我正在尝试使用夏洛克的 getSupportedActionBar() 并遇到麻烦。

> 在创建活动以在所有版本的 Android 上使用操作栏时，您必须声明活动以扩展以“Sherlock”开头的任何活动类（例如，SherlockActivity、SherlockFragmentActivity）。通过调用 getSupportActionBar()（而不是 getActionBar()）来处理与操作栏的交互。

如何同时使用 sherlock 和 tabActivity？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T03:58:07.760

项目附带的示例中有使用带有 ActionBarSherlock 的选项卡的示例。

查看[FragmentTabs](https://github.com/JakeWharton/ActionBarSherlock/blob/master/samples/fragments/src/com/actionbarsherlock/sample/fragments/FragmentTabs.java)和[FragmentTabsPager](https://github.com/JakeWharton/ActionBarSherlock/blob/master/samples/fragments/src/com/actionbarsherlock/sample/fragments/FragmentTabsPager.java)示例。

简短的回答是您扩展 SherlockActivity，然后以编程方式声明 TabHost。

# lamp - LAMP VPS 上的 URL 域掩码

> ID：13410095
> 
> 赞同：1
> 
> 时间：2012-11-16T03:49:55.633
> 
> 标签：lamp, mask, masking, cname

我有一个 LAMP 服务器，我的主站点托管在 VPS 上。

主站点从 Joomla 运行。

我为每个客户设置了一个页面：

```
mainsite.com/index.php?option=com_ .... 
```

该站点具有重写功能以创建 SEF URL，例如：

```
mainsite.com/client1.html
mainsite.com/client2.html
mainsite.com/client3.html 
```

这些页面是单个页面，没有指向其他 mainsite.com 页面的相对链接。它们只是独立的小册子页面。

我可以设置我的服务器以允许客户端将他们的域指向我的服务器并在浏览器地址栏显示他们的域而不是主站点 URL 时显示页面内容？

client1.com 显示 mainsite.com/client1.html 内容，但仍在地址栏中显示 client1.com。

...所以“掩码”而不是“重定向”。

这可以使用 CNAME 记录吗？或者其他的东西？做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T07:26:30.197

这通常取决于注册商。许多域名注册商提供了通过屏蔽转发域的功能，但方法因注册商而异。

无论如何，将域指向托管并在该托管中放置一个 index.html 文件以创建掩码的另一种方法是：

```
<frameset>
  <frame src="http://mainsite.com/client1.html">
</frameset> 
```

# user-interface - 模态对话框是如何实现的？

> ID：13410098
> 
> 赞同：2
> 
> 时间：2012-11-16T03:50:34.197
> 
> 标签：user-interface

很长一段时间我一直想知道模态对话框是如何实现的。

让我以Qt为例。（几乎所有的 GUI 工具包都有这种机制）

在主事件循环中，调用了一个插槽，并在此插槽中打开了一个模式对话框。在对话框关闭之前，插槽不会将控制权返回给主事件循环。所以我认为主事件循环被阻塞并变得无响应。显然这不是真的，因为当您打开模式对话框时，后台主窗口仍在工作，例如重新绘制其 UI 或继续显示曲线或某些图形。它只是变成不接受任何用户输入。

我做了一个实验。我没有在插槽中打开模式对话框，而是在那里启动一个新线程，并等待线程在该插槽中完成。这肯定阻塞了主事件循环。

模态对话框到底是如何实现的？它如何保持主事件循环畅通但同时阻塞调用槽？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T13:49:53.630

只需要一个事件循环，并且在出现模式对话框时它*不会阻塞。*虽然，我想，不同的工具包可能会以不同的方式处理这个问题。您需要查阅文档才能确定。然而，从概念上讲，它们都以相同的方式工作。

每个事件都有一个事件发生的来源。当一个模态对话框出现时，事件循环要么忽略要么重定向所有来自对话框之外的事件。它真的没有魔法。一般来说，它就像事件循环代码中的 if 语句，上面写着“if (modal_is_shown() and !event_is_in_modal_window()) {ignore_and_wait_for_next_event()}”。当然，逻辑有点复杂，但这就是它的要点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T04:22:17.063

如果您正在寻找示例，这里是另一个示例：

在 Tk 中，只有一个事件循环。模态行为（不必是对话框，也可以是工具提示、文本框等）通过使主窗口忽略鼠标和键盘事件来简单地实现。由于事件循环仍在运行，所有其他事件（如重绘等）仍然可以得到服务。

Tk 通过`[grab]`函数实现这一点。调用`grab`UI 对象使其成为唯一能够响应键盘和鼠标事件的对象。基本上阻止了所有其他对象。这不会与事件循环混淆。它只是暂时禁用事件处理程序，直到释放抓取。

应该注意的是，运行 X 的类 Unix 操作系统也`grab`内置在窗口系统中。因此，它不一定仅由 UI 工具包库实现，有时也是操作系统的内置功能。同样，这是通过简单地阻止/禁用事件而不是实例化单独的事件循环来实现的。我相信这也曾经是 OSX 之前的旧 MacOS 的情况。虽然不确定OSX或Windows。尽管模态通常由操作系统本身实现，但像 Qt 和 Tk 这样的工具包通常会实现自己的机制来标准化不同平台上的行为。

所以结论是，没有必要阻塞主事件循环来实现模态。您只需要阻止事件和/或事件处理程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T03:59:49.483

通常，这种类型的模式对话框是通过运行它*自己的*消息循环而不是应用程序的消息循环来实现的。即使在模态操作期间，定向到主窗口的消息（例如计时器或绘制消息）仍将被传递。

在某些情况下，您可能必须小心不要递归地重复执行相同的操作。例如，如果您在计时器消息上触发一个模式对话框并结合了一些持久标志，您将需要确保您不会在计时器消息触发时重复显示相同的对话框。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-28T08:13:39.927

[https://stackoverflow.com/users/893/greg-hewgill](https://stackoverflow.com/users/893/greg-hewgill)的答案是正确的。

[不过看了他和https://stackoverflow.com/users/188326/solotim](https://stackoverflow.com/users/188326/solotim)的后续讨论，感觉还是有进一步澄清的空间，用散文和一些伪代码的方式。

我将使用事实清单处理散文部分：

*   在模态活动完成之前，主消息循环不会运行
*   但是，在模态活动运行时仍会传递事件
*   这是因为模态活动中有一个**嵌套的事件循环。**

到目前为止，我只是重复了格雷格的回答，为了连续性，请多多包涵。下面是我希望提供更多有用信息的地方。

*   嵌套事件循环是 GUI 工具包的一部分，因此，它知道与存在的每个窗口相关的回调函数
*   当嵌套事件循环引发事件（例如指向主窗口的重绘事件）时，它会调用与该事件关联的回调函数。*请注意，此处的“回调”可能指的是面向对象系统中表示窗口的类的方法。*
*   回调函数执行所需的操作（例如，重新绘制），并立即返回嵌套消息循环（模态活动中的那个）

最后但同样重要的是，这里的伪代码希望能进一步说明，使用虚构的“GuiToolkit”：

```
void GuiToolkit::RunModal( ModalWindow *m )
{
    // main event loop
    while( !GuiToolkit::IsFinished() && m->IsOpen() )
    {
          GuiToolkit::ProcessEvent(); // this will call
                                      // MainWindow::OnRepaint
                                      // as needed, via the virtual
                                      // method of the base class
                                      // NonModalWindow::OnRepaint
    }
}

class AboutDialog: public ModalWindow
{
}

class MainWindow: public NonModalWindow
{
    virtual void OnRepaint()
    {
        ...
    }
    virtual void OnAboutBox()
    {
         AboutDialog about;
         GuiToolkit::RunModal(&about); // blocks here!!
    }
}

main()
{
    MainWindow window;
    GuiToolkit::Register( &window ) // GuiToolkit knows how to 
                                    // invoke methods of window

    // main event loop
    while( !GuiToolkit::IsFinished() )
    {
          GuiToolkit::ProcessEvent(); // this will call
                                      // MainWindow::OnAboutBox
                                      // at some point
    }
} 
```

# php - 显示 SQL 结果时 nl2br() 不起作用

> ID：13410105
> 
> 赞同：2
> 
> 时间：2012-11-16T03:51:32.620
> 
> 标签：php, joomla, joomla2.5, nl2br

在我的 Joomla 模块上，我们使用以下代码从数据库中获取呼喊

```
function getShouts($number, $timezone, $message) {
    $shouts = array();
    $db = JFactory::getDBO();
    $query = $db->getQuery(true);
    $query->select('*')
    ->from('#__shoutbox')
    ->order('id DESC');
    $db->setQuery($query , 0 , $number);
    $rows = $db->loadObjectList();
    $i=0;
    foreach ( $rows as $row ) {
        $shouts[$i]->id = $row->id;
        $shouts[$i]->name = $row->name;
        $shouts[$i]->msg = $row->msg;
        $i++;
    }
    return $shouts;
} 
```

和下面的代码在*default.php中显示它*

```
print stripslashes($shouts[$i]->msg); 
```

但是，当有人想要输入以下内容时，这会导致问题：

```
test line 1
test line 2 
```

如果他们进入新行，则帖子在提交后显示如下：

```
test line 1rntest line 2 
```

所以我做了一些研究并意识到我必须使用`nl2br()`我所做的如下所示：

```
print stripslashes(nl2br($shouts[$i]->msg)); 
```

但是，它似乎并没有解决问题。我还尝试在帮助程序中创建另一个函数来替换它，`preg_replace`但这也没有帮助。

谁能解释为什么添加后换行不起作用`nl2br()`以及如何解决？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T04:03:51.720

试试这个方法：

```
print nl2br(stripcslashes($shouts[$i]->msg)); 
```

注意`stripcslashes()`功能，但不`stripslashes()`

要不就：

```
print nl2br($shouts[$i]->msg); 
```

**UPD：** `nl2br()`函数替换`\n`为`<br />`. 问题是`\n`您的文本中没有，但有`n`or `\\n`。我认为当你从基地获取数据时没有必要使用`stripslashes()`，除非你在你的基地有电子数据的情况。

# android-layout - 将线性布局与底部对齐

> ID：13410108
> 
> 赞同：1
> 
> 时间：2012-11-16T03:51:42.417
> 
> 标签：android-layout, android-linearlayout

我有一个布局，我希望最后一个`LinearLayout`在最底部对齐。我试图设置重力，`android:layout_marginbottom=0dp`但似乎都没有将它与底部对齐。

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/item_detail_container"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
tools:context=".ItemDetailActivity" >

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#000000"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="154dp" >

        <ImageView
            android:id="@+id/albumArt"
            android:layout_width="140dp"
            android:layout_height="138dp"
            android:src="@drawable/stealyourface" />

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:gravity="fill_horizontal|center"
            android:orientation="vertical" >

            <TextView
                android:id="@+id/artistName"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:paddingLeft="@dimen/TwentyPixels"
                android:textAppearance="?android:attr/textAppearanceLarge"
                android:textColor="#E6E6E6" />

            <TextView
                android:id="@+id/showLocation"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:paddingLeft="@dimen/TwentyPixels"
                android:textAppearance="?android:attr/textAppearanceMedium"
                android:textColor="#E6E6E6" />

            <TextView
                android:id="@+id/showDate"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:paddingLeft="@dimen/TwentyPixels"
                android:textAppearance="?android:attr/textAppearanceMedium"
                android:textColor="#E6E6E6" />

            <TextView
                android:id="@+id/runningSong"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:padding="@dimen/TwentyPixels"
                android:textAppearance="?android:attr/textAppearanceSmall"
                android:textColor="#E6E6E6" />
        </LinearLayout>

        <TextView
            android:id="@+id/currentlyPlaying"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:paddingLeft="@dimen/TwentyPixels"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="#E6E6E6" />
    </LinearLayout>

    <ScrollView
        android:id="@+id/ScrollView01"
        android:layout_width="match_parent"
        android:layout_height="214dp"
        android:background="#000000" >

        <LinearLayout
            android:id="@+id/songList"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" >
        </LinearLayout>
    </ScrollView>

    <!-- Player Buttons -->

    **<LinearLayout
        android:id="@+id/LinearLayout"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="bottom"
        android:orientation="horizontal" 
        android:layout_marginBottom="0dp">
        <RelativeLayout
            android:layout_width="320dp"
            android:layout_height="wrap_content"
            android:background="@layout/rounded_corner"
            android:gravity="center_vertical"
            android:orientation="horizontal"
            android:paddingLeft="10dp"
            android:paddingRight="10dp" >
            <!-- Previous Button -->
            <!-- Backward Button -->
            <!-- Play Button -->
            <ImageButton
                android:id="@+id/btnPlay"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignTop="@+id/btnNext"
                android:layout_centerHorizontal="true"
                android:layout_centerInParent="true"
                android:layout_centerVertical="true"
                android:layout_toRightOf="@+id/btnBackward"
                android:background="@null"
                android:src="@drawable/btn_play" />
            <!-- Forward Button -->
            <!-- Next Button -->
            <ImageButton
                android:id="@+id/btnPrevious"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignBottom="@+id/btnPlay"
                android:layout_alignParentLeft="true"
                android:layout_centerVertical="true"
                android:background="@null"
                android:src="@drawable/btn_previous" />
            <ImageButton
                android:id="@+id/btnBackward"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignTop="@+id/btnPrevious"
                android:layout_centerVertical="true"
                android:layout_toRightOf="@+id/btnPrevious"
                android:background="@null"
                android:src="@drawable/btn_backward" />
            <ImageButton
                android:id="@+id/btnNext"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="false"
                android:layout_alignTop="@+id/btnForward"
                android:layout_centerVertical="true"
                android:layout_marginLeft="16dp"
                android:layout_toRightOf="@+id/btnForward"
                android:background="@null"
                android:src="@drawable/btn_next" />
            <ImageButton
                android:id="@+id/btnForward"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_centerVertical="true"
                android:layout_toRightOf="@+id/btnPlay"
                android:background="@null"
                android:src="@drawable/btn_forward" />
        </RelativeLayout>
    </LinearLayout>
</LinearLayout>** 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-17T15:49:01.437

你必须使用`android:layout_gravity`来做到这一点，而不是`android:gravity`.

[http://developer.android.com/reference/android/widget/FrameLayout.html](http://developer.android.com/reference/android/widget/FrameLayout.html)

`layout_gravity`指定相对于父级的重力，`gravity`控制内容在视图本身中的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-01T22:10:37.153

```
You should take a relative layout as inner layout of linear layout. Like this example. I hope its useful for you. 

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/mainact"
    android:weightSum="6" >

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_marginLeft="10dp"
        android:layout_weight="1"
        android:orientation="vertical" >

        <RelativeLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <ImageView
                android:id="@+id/imageView9"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentTop="true"
                android:clickable="true"
                android:onClick="func"
                android:src="@drawable/somnath" />

            <ImageView
                android:id="@+id/imageView20"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentBottom="true"
                android:clickable="true"
                android:onClick="func"
                android:src="@drawable/ghrishneshwar" />
        </RelativeLayout>
    </LinearLayout>

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:layout_marginLeft="10dp"
        android:orientation="vertical" >

        <RelativeLayout
            android:layout_width="match_parent"
            android:layout_height="fill_parent" >

            <ImageView
                android:id="@+id/imageView10"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentTop="true"
                android:layout_marginTop="10dp"
                android:clickable="true"
                android:onClick="func"
                android:src="@drawable/mallikarjun" />

            <ImageView
                android:id="@+id/imageView19"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentBottom="true"
                android:layout_marginBottom="10dp"
                android:clickable="true"
                android:onClick="func"
                android:src="@drawable/kedarnath" />
        </RelativeLayout>
    </LinearLayout>

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:layout_marginLeft="10dp"
        android:orientation="vertical" >

        <RelativeLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent" >

            <ImageView
                android:id="@+id/imageView11"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentTop="true"
                android:layout_marginTop="20dp"
                android:clickable="true"
                android:onClick="func"
                android:src="@drawable/mahakaleshwar" />

            <ImageView
                android:id="@+id/imageView18"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentBottom="true"
                android:layout_marginBottom="20dp"
                android:clickable="true"
                android:onClick="func"
                android:src="@drawable/trayambkeshwar" />
        </RelativeLayout>
    </LinearLayout>

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:layout_marginLeft="10dp"
        android:orientation="vertical" >

        <RelativeLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent" >

            <ImageView
                android:id="@+id/imageView12"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentTop="true"
                android:layout_marginTop="50dp"
                android:clickable="true"
                android:onClick="func"
                android:src="@drawable/omkareshwar" />

            <ImageView
                android:id="@+id/imageView17"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentBottom="true"
                android:layout_marginBottom="50dp"
                android:clickable="true"
                android:onClick="func"
                android:src="@drawable/kashim" />
        </RelativeLayout>
    </LinearLayout>

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:layout_marginLeft="5dp"
        android:orientation="vertical" >

        <RelativeLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent" >

            <ImageView
                android:id="@+id/imageView13"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentTop="true"
                android:layout_marginTop="90dp"
                android:clickable="true"
                android:onClick="func"
                android:src="@drawable/vaidyanath" />

            <ImageView
                android:id="@+id/imageView16"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentBottom="true"
                android:layout_marginBottom="90dp"
                android:clickable="true"
                android:onClick="func"
                android:src="@drawable/nageshwar" />
        </RelativeLayout>
    </LinearLayout>

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:layout_marginLeft="5dp"
        android:layout_marginRight="20dp"
        android:orientation="vertical" >

        <RelativeLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent" >

            <ImageView
                android:id="@+id/imageView14"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentTop="true"
                android:layout_marginTop="170dp"
                android:clickable="true"
                android:onClick="func"
                android:src="@drawable/bhimashankar" />

            <ImageView
                android:id="@+id/imageView15"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentBottom="true"
                android:layout_marginBottom="170dp"
                android:clickable="true"
                android:onClick="func"
                android:src="@drawable/rameshwaram" />
        </RelativeLayout>
    </LinearLayout>

</LinearLayout> 
```

# objective-c - 如何实现上/下个月按钮并显示当月的日期？

> ID：13410109
> 
> 赞同：0
> 
> 时间：2012-11-16T03:51:47.350
> 
> 标签：objective-c, ios, nsdate, nscalendar, nsdatecomponents

设想：

我有一个费用跟踪 iOS 应用程序，我将费用从费用详细视图控制器存储到表视图（带有获取的结果控制器）中，该表视图显示费用列表以及类别、金额和日期。我的实体“Money”中确实有一个日期属性，它是支出或收入的父实体。

问题：

我想要的基本上是按月对我的费用进行分类，并将其显示为部分标题，例如：（2012 年 11 月 1 日至 11 月 30 日），并根据该特定月份显示费用金额和相关内容。该视图中提供了两个按钮，如果我按下右键，它将使月份增加一个月（2012 年 12 月 1 日 - 2012 年 12 月 31 日），同样，左按钮会使月份减少一个月。

我将如何做到这一点？我正在尝试以下代码 - 这有点工作。假设我当前的部分标题为 (Nov1 - Nov 30, 2012)，当我按下左键时，它给了我部分标题 (Oct 1 - Oct 30, 2012)，这是错误的，应该是 2012 年 10 月 31 日而不是 2012 年 10 月 30 日。

```
- (NSDate *)firstDateOfTheMonth
{
    self.startDate = [NSDate date];

    NSCalendar* calendar = [NSCalendar currentCalendar];

    [calendar setTimeZone:[NSTimeZone localTimeZone]];

    NSDateComponents* components = [calendar components:NSYearCalendarUnit|NSMonthCalendarUnit|NSDayCalendarUnit fromDate:self.startDate];

    [components setDay:1];

    firstDateOfTheMonth = [[calendar dateFromComponents:components] retain];

    return firstDateOfTheMonth;

}

- (NSDate *)lastDateOfTheMonth
{
    NSCalendar* calendar = [NSCalendar currentCalendar];

    [calendar setTimeZone:[NSTimeZone localTimeZone]];

    NSDateComponents* components = [calendar components:NSYearCalendarUnit|NSMonthCalendarUnit|NSDayCalendarUnit fromDate:firstDateOfTheMonth];

    [components setMonth:[components month]+1];
    [components setDay:0];

    lastDateOfTheMonth = [[calendar dateFromComponents:components] retain];

    return lastDateOfTheMonth;
} 
```

然后我有一个名为“monthCalculation”的方法，我在其中调用了上述两种方法。

```
- (void)monthCalculation
{
    [self firstDateOfTheMonth];
    [self lastDateOfTheMonth];
} 
```

现在当我按下左键时下面的代码（将月份递减一个月）：

```
- (IBAction)showPreviousDates:(id)sender
{
    [self monthCalculation];

    NSDateComponents *dateComponents = [[[NSDateComponents alloc] init] autorelease];
    [dateComponents setMonth:-1];

    NSDate *newDate1 = [[NSCalendar currentCalendar]
                        dateByAddingComponents:dateComponents
                        toDate:firstDateOfTheMonth options:0];

    NSDate *newDate2 = [[NSCalendar currentCalendar]
                        dateByAddingComponents:dateComponents
                        toDate:lastDateOfTheMonth options:0];

    self.startDate = newDate1;
    self.endDate = newDate2;

    NSLog(@" self start date in previous mode =%@", self.startDate);
    NSLog(@" self end date in previous mode =%@", self.endDate);
} 
```

当我按下右键时以下代码（将月份增加一个月）：

```
- (IBAction)showNextDates:(id)sender
{
    [self monthCalculation];

    NSDateComponents *dateComponents = [[[NSDateComponents alloc] init] autorelease];
    [dateComponents setMonth:1];

    NSDate *newDate1 = [[NSCalendar currentCalendar]
                        dateByAddingComponents:dateComponents
                        toDate:firstDateOfTheMonth options:0];

    NSDate *newDate2 = [[NSCalendar currentCalendar]
                        dateByAddingComponents:dateComponents
                        toDate:lastDateOfTheMonth options:0];

    self.startDate = newDate1;
    self.endDate = newDate2;

    NSLog(@" self start date in previous mode =%@", self.startDate);
    NSLog(@" self end date in previous mode =%@", self.endDate);
} 
```

我做对了吗？还是有更好的方法来做到这一点？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T04:45:52.290

以下是一些应该做你想做的事情的方法：

首先，在您的 viewDidLoad 方法中添加：

```
self.startDate = [NSDate date];
[self updateDateRange]; 
```

这为您提供了一个起点。然后，我添加了以下五种方法（注意：`previousMonthButtonPressed`/`nextMonthButtonPressed`应该连接到您的按钮）：

```
// Return the first day of the month for the month that 'date' falls in:
- (NSDate *)firstDayOfMonthForDate:(NSDate *)date
{
    NSCalendar *cal         = [NSCalendar currentCalendar];
    NSDateComponents *comps = [cal components:NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit
                                     fromDate:date];
    comps.day               = 1;
    return [cal dateFromComponents:comps];
}

// Return the last day of the month for the month that 'date' falls in:
- (NSDate *)lastDayOfMonthForDate:(NSDate *)date
{
    NSCalendar *cal         = [NSCalendar currentCalendar];
    NSDateComponents *comps = [cal components:NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit
                                     fromDate:date];
    comps.month             += 1;
    comps.day               = 0;
    return [cal dateFromComponents:comps];
}

// Move the start date back one month
- (IBAction)previousMonthButtonPressed:(id)sender {
    NSCalendar *cal         = [NSCalendar currentCalendar];
    NSDateComponents *comps = [cal components:NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit
                                     fromDate:self.startDate];
    comps.month             -= 1;
    self.startDate          = [cal dateFromComponents:comps];
    [self updateDateRange];
}

// Move the start date forward one month
- (IBAction)nextMonthButtonPressed:(id)sender {
    NSCalendar *cal         = [NSCalendar currentCalendar];
    NSDateComponents *comps = [cal components:NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit
                                     fromDate:self.startDate];
    comps.month             += 1;
    self.startDate          = [cal dateFromComponents:comps];
    [self updateDateRange];
}

// Print the new range of dates.
- (void)updateDateRange
{
    NSLog(@"First day of month: %@", [self firstDayOfMonthForDate:self.startDate]);
    NSLog(@"Last day of month: %@",  [self lastDayOfMonthForDate:self.startDate]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T04:09:59.797

尝试这个：

```
- (NSDate *)lastDateOfTheMonth
{
    NSCalendar* calendar = [NSCalendar currentCalendar];
    [calendar setTimeZone:[NSTimeZone localTimeZone]];

    NSDateComponents* components = [calendar components:NSYearCalendarUnit|NSMonthCalendarUnit|NSDayCalendarUnit fromDate:firstDateOfTheMonth];
    [components setMonth:[components month]+1];

    NSDateComponents* offset = [[[NSDateComponents alloc] init] retain];
    [offset setDay:-1];

    lastDateOfTheMonth = [[calendar dateByAddingComponents:offset toDate:[components date] options:0] retain];
    return lastDateOfTheMonth;
} 
```

# mysql - IF 关于 WHERE 子句

> ID：13410113
> 
> 赞同：0
> 
> 时间：2012-11-16T03:52:09.470
> 
> 标签：mysql, sql, if-statement

嗨，我怎样才能使这个查询工作。我想要 where 子句的条件，如果 @BACHNUMB = ''，那么 WHERE 是 (h.sopnumbe = @SOPNUMBE) 否则 WHERE 是 (h.bachnumb = @BACHNUMB)。提前致谢。

```
WHERE
CASE(@BACHNUMB)
WHEN '' THEN (h.sopnumbe = @SOPNUMBE)
ELSE
(h.bachnumb = @BACHNUMB)
END 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T03:55:25.437

只需通过不同的语法重新创建逻辑：

```
WHERE
(@BACHNUMB = '' AND h.sopnumbe = @SOPNUMBE) 
OR
(@BACHNUMB != '' AND h.bachnumb = @BACHNUMB)
END 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T03:55:22.020

`(@BACHNUMB = '' and h.sopnumbe = @SOPNUMBE) or (@BACHNUMB != ' and 'h.bachnumb = @BACHNUMB)`

# c - 建议在 C 中发送的块大小？

> ID：13410116
> 
> 赞同：3
> 
> 时间：2012-11-16T03:52:30.700
> 
> 标签：c, networking

我有一台服务器，每个请求需要传输大量数据（~1-2 gigs）。每次发送调用应具有的推荐数据量是多少？有关系吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T04:15:45.920

您的数据包大小受协议的最大传输单元 (MTU) 限制。如果您发送的数据包大于 MTU，那么您会收到数据包碎片。

您可以做一些数学运算：[http](http://www.speedguide.net/articles/mtu-what-difference-does-it-make--111) ://www.speedguide.net/articles/mtu-what-difference-does-it-make--111 更多参考资料：[http ://en.wikipedia.org/wiki/Maximum_transmission_unit](http://en.wikipedia.org/wiki/Maximum_transmission_unit)

但最终我的建议是，如果你的目标足够好，只是让操作系统网络层完成它的工作，除非你正在编写原始套接字或传递一些时髦的选项，否则操作系统将有一个网络缓冲区并尝试尽力而为。

考虑到最后一个选项，socket.send() 只不过是从用户进程内存到内核私有内存的内存传输。经验法则是不超过通常为 4KB的虚拟内存页面大小[http://en.wikipedia.org/wiki/Page_(computer_memory )。](http://en.wikipedia.org/wiki/Page_(computer_memory)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T06:41:29.483

TCP/IP 堆栈负责不发送大于 PATH MTU 的数据包，并且您必须非常努力地使其发送*小于*MTU 的数据包，以不利于吞吐量的方式：并且没有办法发现任何给定连接的实际路径 PTU 是什么。因此，请不要考虑路径 MTU。

您可以而且应该使每一个都`send()`尽可能大。

# android - 使用 v4 支持库和 min SDK version-8 的主从视图片段

> ID：13410125
> 
> 赞同：1
> 
> 时间：2012-11-16T03:53:47.297
> 
> 标签：android, android-fragments

我正在开发一个 Android 应用程序，它将在 Android 版本 2.2 到 4.2 的移动设备和平板电脑上运行。为此，我尝试使用`Fragments`. 使用 Eclipse，我尝试使用最低 SDK 版本 8（版本 2.2）和目标 SDK 版本 17（版本 4.2）创建一个项目，并使用 SDK 17（版本 4.2）进行编译。我试图创建一个主从视图`Activity`。但它说，

> 主从活动应具有最低 SDK 版本 11 (Honeycomb)。

无论如何，我将使用`support-library-v4`我的应用程序来使用`Fragments`. 使用 v4 支持库和 min SDK version-8 和 Target SDK Version-17 创建主从视图片段是否正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T08:08:50.520

是的，我们可以使用支持库为 Pre 蜂窝设备使用 Fragments。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T23:04:15.143

AFAIR，由于使用 android.R.layout.simple_list_item_activated_1 作为项目列表，强制要求 min-11 - 它是在 API 11 中引入的。此外，默认实现使用 ActionBar（启用向上按钮），这也是在蜂窝。因此，如果您想支持 API 级别 8，您将需要更改该实现的工作方式的某些方面。

# php - 请解释：使用 jquery mobile 获得不同的 $_SERVER['remote_addr'] 结果

> ID：13410126
> 
> 赞同：0
> 
> 时间：2012-11-16T03:53:47.400
> 
> 标签：php, jquery, jquery-mobile

我正在创建我的第一个 jquery 移动网站，但使用 $_SERVER['REMOTE_ADDR'] 得到的结果相互矛盾。我知道获取/使用 IP 地址是不可靠的，我担心为什么会发生以下行为。

举个例子：在登录页面上，$_SERVER['REMOTE_ADDR'] 在页面被提供时被保存到会话变量 $_SESSION['ip1'] 中。当用户提交登录表单时，表单会对服务器上的 login.php 进行 ajax 调用。login.php 脚本发现 $_SERVER['REMOTE_ADDR'] 不包含与 $_SESSION['ip1'] 相同的值。

其他信息：这两个地址彼此非常不同，并且在每个测试期间都保持不变。此外，此行为仅在使用移动宽带而不是 wifi 时发生。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T03:58:50.780

移动宽带提供商可能正在使用代理。

[http://en.wikipedia.org/wiki/Proxy_server](http://en.wikipedia.org/wiki/Proxy_server)

# android - android：手机处于睡眠状态时等待的正确方法（使用 TTS）

> ID：13410131
> 
> 赞同：0
> 
> 时间：2012-11-16T03:54:02.280
> 
> 标签：android, timer, wait, text-to-speech

我有一个以连续方式使用 TTS 的应用程序。一旦开始，它应该继续创建问题和答案。但是，我想在给出答案之前等待一段时间。

目前我正在使用这个

```
public void WaitSeconds(int seconds) {
    long time0, time1, diff;
        time0 = System.currentTimeMillis();
    do{
        time1 = System.currentTimeMillis();
        diff = time1 - time0;
    }
    while (diff < seconds * 1000);
    } 
```

但是，这确实有效，直到手机进入睡眠状态。之后，如果秒数设置为 3 或更少，它会继续工作，否则它会开始等待一个明显随机的时间。答案可能会在 10 秒甚至一分钟后以不可预测的方式出现（至少对我而言）。当我按下任何按钮时，应用程序会“唤醒”并说出答案，但我需要让它在没有用户输入的情况下运行。

编辑 –––––––––––––––––––––––––––</p>

我正在尝试按照建议使用 WakeLock，但它似乎不起作用。

```
 PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
    PowerManager.WakeLock mWakeLock = pm.newWakeLock(PowerManager.FULL_WAKE_LOCK, "TTS Wake Lock");
    mWakeLock.acquire(); 
```

错误消息是：“Wakelock finalized while still hold”我见过其他人有这个问题，但通过将代码移动到 onCreate 来解决。就我而言，它没有解决任何问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T03:56:23.103

如果需要在手机关机时运行，则需要使用唤醒锁。这使您可以保持手机开机（保持屏幕打开或让它关闭但继续运行）。

# xcode - 将 Xcode 从 4.3.2 升级到 4.5.2 并安装 Simulator 5.0 或 5.1

> ID：13410133
> 
> 赞同：3
> 
> 时间：2012-11-16T03:54:19.393
> 
> 标签：xcode, simulator

我将 Xcode 从 4.3.2 升级到 4.5.2 并安装 Simulator 5.0 或 5.1，但它提示
“**无法挂载文件：//localhost/Users/admin/Library/Caches/com.apple.dt.Xcode/Downloads/Xcode。 SDK.iPhoneSimulator.5.1-5.1.dmg 位于文件：//localhost/var/folders/sw/qht9m6ln7353v5mbfyvhtmf00000gn/T/attached-image-6fdc393a2528f4e65d994f841bfb0d76b998b7e3/：无法识别”**，我该怎么办，谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-18T04:38:11.677

我找到了解决这个问题的方法。我目前使用的是 Xcode 4.5，所以我确信它也适用于 4.5.2。我在位于的 .dvtdownloadabelindex 文件中找到了下载 URL

```
Users/<user>/Library/Caches/com.apple.dt.Xcode/Downloads/ 
```

我将文件复制到我的桌面并将其重命名为 .plist。查看其中的一些，我发现了两个下载模拟器的 URL（iPhoneSimulator 5.0 的 Root/downloadables/Item 9/ 和 iPhoneSimulator 5.1 的 Root/downloadables/Item 17/）。由于 Apple TOS 等原因，不确定我是否可以发布直接 URL。

我下载了两个模拟器，安装了 .dmg 中的内容。它在我的驱动器的根目录中创建了一个名为 Platforms 的文件夹。然后我复制了

```
/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk 
```

至

```
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk 
```

重新启动 Xcode（或者在我的情况下，MonoTouch），进入 Xcode 首选项并进入您通常会从中下载它们的选项卡，单击安装，这将摆脱“iOS 模拟器找不到 SDK。SDK 可能需要重新安装。” 您通常会遇到的错误。

您现在可以访问 iPhone/iPad iOS 5.0 模拟器。我只为 5.0 模拟器而不是 5.1 做过这个，但我相信它会同样工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-10T04:03:11.057

这对我有用：

*   删除 *.dvtdownloadableindex 文件
*   重启 Xcode
*   安装模拟器

# javascript - 无法关闭弹出js框

> ID：13410135
> 
> 赞同：0
> 
> 时间：2012-11-16T03:54:41.940
> 
> 标签：javascript, jquery, tabs, popup

我需要帮助关闭弹出标签。覆盖 div 是 z-indexed，因此它不会隐藏关闭的 div。这是我的代码：

```
<div id='mail'>                 
  <div id="popup-overlay"></div>
   <div class="close-popup"">
  <a>X</a>
   </div>
</div>

<script>
    var mail = $('#mail');
    var overlay = $('#popup-overlay.' + pageID);
    var mailClose = $('#mail.' + pageID + ' .close-popup');

    mailClose.on('click touchstart', function(event){
    mail.removeAttr('style');
    mail.css('display', 'none');
    overlay.css('display', 'none');
  });

  mailClose.bind('mouseover', function(event){
    mailClose.css('cursor', 'pointer');
  });

  mailClose.on('blur', function(event){
      this.blur();
     });
  }
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T04:13:48.820

好的，所以您在代码段中给我们的源代码有一些问题，但这可能只是因为您复制粘贴了总代码的一小部分。这些问题是： 的类定义中出现意外的 " 字符`close-popup`；变量 pageID 未定义；最后在脚本末尾有一个额外的大括号。

想必这些都不是真正的问题。

我相信您遇到的问题源于您用于`mailClose`元素的选择器。具体来说，mailClose 元素的选择器不正确，因为它具有不必要的`#mail`元素。我不确定 pageID 变量实际上是什么，但由于它不存在于您提供给我们的 HTML 中，因此也需要将其删除才能使选择器起作用。一旦从第一段中删除了那些微不足道的错误，以及 CSS 选择器的错误元素，我相信我的功能可以按预期工作，如[jsfiddle 所示](http://jsfiddle.net/ntdMv/)。大概 pageID 实际上是一个重要的值，应该适当地添加到选择器中。

如果您想再看一个更全面的示例，请随时编辑源代码并评论此答案。希望这可以帮助，

# twitter-bootstrap - 引导选项卡下拉菜单在移动设备上不起作用

> ID：13410137
> 
> 赞同：3
> 
> 时间：2012-11-16T03:54:52.870
> 
> 标签：twitter-bootstrap

**更新** 原来这是一个已知问题 - 它根本不会出现在 Stack Overflow 上的任何搜索中。希望这篇文章能引起人们对这个问题的关注。

从本质上讲，2.2.1 版的 Twitter Bootstrap 仍然存在标签下拉功能在移动设备上正常工作的问题。

事实上，在某些 Android 和 iOS 版本上查看时，即使他们自己在上述链接上的文档也无法正常工作。要在您的设备上进行测试，请尝试使用此处的下拉菜单：http: [//twitter.github.com/bootstrap/javascript.html#tabs](http://twitter.github.com/bootstrap/javascript.html#tabs)

有关此问题的更多解决方案和进展，请参阅 Twitter Bootstrap Github 存储库以获取更多详细信息：[https ://github.com/twitter/bootstrap/issues/4550](https://github.com/twitter/bootstrap/issues/4550)

///////////////////////////////////////// ///////////////////

使用带有标准文档的 Twitter Bootstrap 2.2.1 样板文件（css、js）我无法在移动设备上使用下拉选项卡（在浏览器和 Chrome 中的 Android 4.1 上测试）

这是代码：

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <link href="css/bootstrap.css" rel="stylesheet">
    <link href="css/bootstrap-responsive.css" rel="stylesheet">    
    <script src="./js/jquery-1.8.2.min.js"></script>
    <script src="./js/bootstrap.min.js"></script>
    <script>
    $('#myTab a').click(function (e) {e.preventDefault();
  $(this).tab('show');
})
</script>
  </head>
<body>
<div class="row">
  <div class="span12">
     <ul id="myTab" class="nav nav-tabs">
              <li class="active"><a href="#home" data-toggle="tab">Home</a></li>
              <li><a href="#profile" data-toggle="tab">Profile</a></li>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Dropdown <b     class="caret"></b></a>
                <ul class="dropdown-menu">
                  <li><a href="#dropdown1" data-toggle="tab">@fat</a></li>
                  <li><a href="#dropdown2" data-toggle="tab">@mdo</a></li>
                </ul>
              </li>
            </ul>
            <div id="myTabContent" class="tab-content">
              <div class="tab-pane fade in active" id="home">
                <p>Raw</p>
              </div>
              <div class="tab-pane fade" id="profile">
                <p>Food</p>
              </div>
              <div class="tab-pane fade" id="dropdown1">
                <p>Etsy</p>
              </div>
              <div class="tab-pane fade" id="dropdown2">
                <p>Trust</p>
              </div>
            </div>
          </div>
        </div>
   </body>
</html> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T12:27:51.423

Bootstrap 2.2.2 修复了这个问题

[https://github.com/twbs/bootstrap/wiki/Changelog](https://github.com/twbs/bootstrap/wiki/Changelog)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T07:33:36.053

如果您正在谈论下拉菜单`@fat`和`@mdo`选项，那么您需要更改您的设计..因为即使您让它在移动设备上工作，那么它对您的用户来说也不会是一个舒适的体验..

可能[此链接](https://ux.stackexchange.com/questions/10651/is-it-ok-to-use-drop-down-menus-in-mobile-website)将帮助您重新考虑您正在尝试的移动设计。

您也可以考虑在没有下拉菜单的情况下合并更多选项卡，或者可以使用按钮或链接，根据您的要求选择最适合的选项。

# java - 从 Arraylist 中过滤掉整数（索引）

> ID：13410140
> 
> 赞同：1
> 
> 时间：2012-11-16T03:55:08.860
> 
> 标签：java, algorithm

我有一个不同短语的数组列表，例如“蛋白质”、“蛋白激酶”、“功能性”、“功能性蛋白质”、“sox5”、“il-6”，现在，如果我输入一个句子，“功能性蛋白激酶和 il-6 和 sox5”，它必须提供输出为“{功能蛋白}激酶和 {il-6} 和 {sox5}”。句子中的每个单词都必须与短语进行比较。

我所做的代码返回了不同字符串的开始和结束索引，这些索引与不同短语的数组列表进行了比较。我只需要过滤掉最大且没有任何冲突的索引。例如输入：

[0, 7][8, 22][8, 15] [36, 43] [23, 43] [20, 30]

所需输出：

[0, 7] [8, 22] [23, 43]

案例：

*   在 [8, 22] 和 [8, 15] 之间，[8, 22] 最大，因为 22-8 = 14 > 15-8 = 7，所以必须选择 [8,22]。
*   在 [36, 43], [23, 43] 和 [20, 30] 之间，36 位于 [23, 43] 范围内，30 也位于 [23, 43] 范围内，这是碰撞，但在这些碰撞中，[ 23, 43] 最大，必须选择。

我应该怎么做才能获得所需的输出？（比较标准）

我已经做好了，

```
ArrayList<ArrayList<Integer>> ListOfList = new ArrayList<ArrayList<Integer>>();
for(int a = 0; a<ListOfList.size();a++)
        {
            if(a == ListOfList.size()-1) break;
            for(int b = a+1; b<ListOfList.size();b++)
            {
                if((ListOfList.get(a).get(0) == ListOfList.get(b).get(0)) && (ListOfList.get(a).get(1) < ListOfList.get(b).get(1)))     
                {
                    startOffset = ListOfList.get(b).get(0);
                    endOffset =  ListOfList.get(b).get(1);
                }
                else
                {
                    startOffset = ListOfList.get(a).get(0);
                    endOffset =  ListOfList.get(a).get(1);
                }
            } 
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T05:20:48.687

据我了解，您的解决方案是将所有具有相交索引的对分组，然后在每组中找到具有最大长度的对。这是一些样板代码。如果您需要更多说明，请告诉我：

静态类对 { public int start, end;

```
 Pair(int start, int end) {
        this.start = start;
        this.end = end;
    }

    public int weight() {
        return end - start;
    }

    public boolean contains(int point) {
        return start <= point && point <= end;
    }

    public String toString() {
        return String.format("[%d, %d]", start, end);
    }
}

static class Group {
    public List<Pair> pairs = new ArrayList<Pair>();
    public Pair maxWeight;

    Group(Pair start) {
        add(start);
    }

    Group(List<Pair> pairs) {
        for (Pair pair : pairs) {
            add(pair);
        }
    }

    public boolean contains(Pair pair) {
        for (Pair my : pairs) {
            if (my.contains(pair.start) || my.contains(pair.end))
                return true;
        }
        return false;
    }

    public void add(Pair pair) {
        pairs.add(pair);
        if (maxWeight == null || maxWeight.weight() < pair.weight())
            maxWeight = pair;
    }
}

public static void main(String[] args) {
    List<Pair> pairs = new ArrayList<Pair>();
    pairs.add(new Pair(0, 7));
    pairs.add(new Pair(8, 15));
    pairs.add(new Pair(8, 22));
    pairs.add(new Pair(36, 43));
    pairs.add(new Pair(23, 43));
    pairs.add(new Pair(20, 30));
    List<Group> groups = new ArrayList<Group>();

    for (Pair pair : pairs) {
        List<Group> intersects = new ArrayList<Group>();
        for (Group group : groups) {
            if (group.contains(pair)) {
                intersects.add(group);
            }
        }

        if (intersects.isEmpty()) {
            groups.add(new Group(pair));
        } else {
            List<Pair> intervals = new ArrayList<Pair>();
            intervals.add(pair);
            for (Group intersect : intersects) {
                intervals.addAll(intersect.pairs);
            }

            groups.removeAll(intersects);
            groups.add(new Group(intervals));
        }
    }

    for (Group group : groups) {
        System.out.println(group.maxWeight);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T05:18:34.130

如果我可以为这个问题提出不同的方法，因为如果我是你，你正在使用单词，我不会使用索引而是使用实际单词。

测试第一个单词并查看它是否在短语列表中，如果它没有从测试队列中删除它，是否将下一个单词添加到测试中并再次测试它继续以这种方式继续直到找不到匹配项，一旦这个过程完成后，您就有了第一个词组匹配。

用你的例子

“功能蛋白激酶和il-6和sox5”是测试队列，结果为空。

第一个测试将是“功能性”，它将返回 true，这意味着我们需要添加下一个单词并再次测试

第二个测试是“功能性蛋白质”，它会返回真，所以我们需要添加这个词

第三个测试是“功能性蛋白激酶”，它会返回假，现在我们将前一个测试标记为成功并将其从队列中移到结果中，所以我们有

结果中的“{functional protein}”和队列中的“kinase and il-6 and sox5”

下一个测试将是“激酶”，它是假的，所以我们将“激酶”从队列中移到结果中，现在我们有了

结果中的“{功能蛋白}激酶”和队列中的“and il-6 and sox5”

保持这种状态，直到队列为空。

我意识到这不是您问题的直接答案，但也许以不同的方式看待这个问题会对您有所帮助。

# vb.net - 带有 Visual Studio 2008 的 Arduino uno

> ID：13410141
> 
> 赞同：0
> 
> 时间：2012-11-16T03:55:20.453
> 
> 标签：vb.net, arduino

我有一个视觉工作室程序向 Arduino uno 发送指令。但是当我尝试编译时，我看到以下错误。

```
"WithEvents variable 'SerialPort1' implicitly defines   >'_SerialPort1', which conflicts with a member of the same name in class 'Form1'.   C:\Users\*****\Desktop\WindowsApplication1\WindowsApplication1\Form1.Designer.vb    77
" 
```

有人可以帮我解决这个问题吗？

```
Imports System.IO
Imports System.IO.Ports
Imports System.Threading

Public Class Form1
    Shared _continue As Boolean
    Shared _serialPort1 As SerialPort

    Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        SerialPort1.Close()
        SerialPort1.PortName = "com31" 'change com port to match your Arduino port
        SerialPort1.BaudRate = 9600
        SerialPort1.DataBits = 8
        SerialPort1.Parity = Parity.None
        SerialPort1.StopBits = StopBits.One
        SerialPort1.Handshake = Handshake.None
        SerialPort1.Encoding = System.Text.Encoding.Default 'very important!
    End Sub

    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
        SerialPort1.Open()
        SerialPort1.Write("1")
        SerialPort1.Close()
    End Sub

    Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button2.Click
        SerialPort1.Open()
        SerialPort1.Write("0")
        SerialPort1.Close()
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T09:56:04.017

我认为下一行中的变量名是冲突的。

```
Shared _serialPort1 As SerialPort 
```

尝试重命名变量。

# python - 我需要使用格式方法将未知数量的参数替换为文本文件

> ID：13410145
> 
> 赞同：0
> 
> 时间：2012-11-16T03:55:36.460
> 
> 标签：python, file, text, format

该`pagesubs()`函数将文本文件读入字符串，然后使用 Python`format()`替换 subs 参数中给出的参数。

以下是示例：
我的尝试如下：

```
def pagesubs(N,*subs):
    assert type(N)==str
    F= open(N,'r')
    return F.format(subs) 
```

我收到一个错误，`F is type(file)`但我认为将`open()`文本文件读入字符串。任何帮助是极大的赞赏

编辑：示例

```
 pagesubs('index.html', 'December', 18, 2012)

  This will return the content of the file index.html, but 
  with "December" substituted for {0}, and 18 substituted
  for {1}, and 2012 substituted for {2}. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T04:01:43.847

您需要`read()`在文件上调用该函数才能将其内容转换为字符串。请尝试以下代码：

```
def pagesubs(N, *subs):
    assert type(N)==str
    with open(N,'r') as F:
        content = F.read()
    return content.format(subs) 
```

# php - Kohana 3.3 Controller 和 Directory 名称相同的路由

> ID：13410148
> 
> 赞同：5
> 
> 时间：2012-11-16T03:56:06.570
> 
> 标签：php, routes, uri, kohana, kohana-3.3

如何在 Kohana 3.3 中正确设置路由，其中​​我的控制器和目录的名称与下面的示例相同？

```
/application/classes/Controller/Admin/Author.php
 - 管理员/作者
 - 管理员/作者/添加
 - 管理员/作者/编辑

/application/classes/Controller/Admin/Author/Book.php
 - 管理员/作者/书籍
 - 管理员/作者/书籍/添加
 - 管理员/作者/书籍/编辑

```

按指定顺序使用以下路由时，我只能访问***admin/author{/action}***，但不能访问***admin/author/book{/action}***。

颠倒路由顺序使我可以访问***admin/author/book{/action}***，但不能访问***admin/author{/action}***

```
Route::set('admin', 'admin(/<controller>(/<action>(/<id>)))')
    ->defaults(array(
        'directory'  => 'admin',
        'controller' => 'Main',
        'action'     => 'index',
    ));

Route::set('admin/author', 'admin/author(/<controller>(/<action>(/<id>)))')
    ->defaults(array(
        'directory'  => 'admin/author',
        'controller' => 'Main',
        'action'     => 'index',
    )); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T06:59:09.147

你需要这样的东西：

```
Route::set('admin-author', '<directory>/<controller>(/<action>(/<id>))', array(
        'directory' => '(admin|admin/author)',
        'action'    => '(add|edit|delete|index)'
    ))
    ->defaults(array(
        'directory'  => 'admin',
        'controller' => 'author',
    )); 
```

此外，您可以尝试使用正则表达式检查操作`^book`（未经测试）。

另一种方法是使用[路由过滤器](http://kohanaframework.org/3.3/guide/kohana/routing#route-filters)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T04:21:11.523

您还需要为 admin/author/book 定义

```
Route::set('admin-author-book', 'admin/author(/<controller>(/<action>(/<id>)))')
    ->defaults(array(
        'directory'  => 'admin/author',
        'controller' => 'book',
        'action'     => 'index',
    ));
Route::set('admin-author-book', 'admin/author(/book(/<action>(/<id>)))')
    ->defaults(array(
        'directory'  => 'admin/author',
        'controller' => 'book',
        'action'     => 'index',
   )); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T10:48:51.327

关于路由最重要的一点：**路由按照添加的顺序进行匹配**。颠倒路线的顺序是正确的，但问题是您的路线`admin/author`也匹配`admin/author{/action}`. 您可以做什么：强制执行控制器和操作：

```
// Does not match admin/author/add
Route::set('admin/author', 'admin/author/<controller>/<action>(/<id>)')
    ->defaults(array(
        'directory'  => 'admin/author',
    ));

Route::set('admin', 'admin(/<controller>(/<action>(/<id>)))')
    ->defaults(array(
        'directory'  => 'admin',
        'controller' => 'Main',
        'action'     => 'index',
    )); 
```

有几种方法，另一种方法是创建控制器的“白名单”：

```
// Does not match admin/author/add
Route::set('admin/author', 'admin/author/<controller>(/<action>(/<id>))',
    array(
        'controller' => '(book|another-controller)'
    ))
    ->defaults(array(
        'directory'  => 'admin/author',
    ));

Route::set('admin', 'admin(/<controller>(/<action>(/<id>)))')
    ->defaults(array(
        'directory'  => 'admin',
        'controller' => 'Main',
        'action'     => 'index',
    )); 
```

# wpf - 设置 Window.Datacontext

> ID：13410153
> 
> 赞同：2
> 
> 时间：2012-11-16T03:56:30.373
> 
> 标签：wpf, xaml, data-binding

我正在尝试将我的视图模型用作窗口的数据上下文，但出现错误：

> Windows Presentation Foundation (WPF) 项目不支持 ViewModel。

显然，我不了解有关我的窗口到我的视图模型的语法和数据绑定的某些内容，但我不确定我不知道的是什么。

关于我应该阅读什么的任何建议？

```
<Window x:Class="SunnyBeam.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="SunnyBeam" Height="488.358" Width="1014.552">
    <Window.DataContext>
        <ViewModel/>
    </Window.DataContext>
    <Grid>

    </Grid>
</Window> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T04:10:45.553

通常我通过这样的代码隐藏设置 DataContext ：

```
public partial class Flor1 : Window
{
    public Flor1()
    {
        var dc = new MyViewModel();
        dc.LoadData();
        DataContext = dc;
        InitializeComponent();
    }
} 
```

代替 MyViewModel 可能是您想要绑定的任何东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T04:11:51.793

定义类

```
 public class ViewModel
 {
    public string Name { get; set; }
    public ViewModel()
    {

    }
 } 
```

在 xaml 中使用它

```
<Window x:Class="WpfApplication2.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:ui="clr-namespace:WpfApplication2"
    Title="MainWindow" Height="350" Width="525">
<Window.DataContext>
    <ui:ViewModel/>
</Window.DataContext>
<Grid>

</Grid> 
```

它应该工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-28T17:41:15.383

我想我会抛出这个错误的经验。

我的数据上下文设置与下面相同，并且不断收到 ViewModel 不存在的错误，我知道它确实存在。我拒绝在后面的代码中设置它，只是重建我的项目实际上修复了这个错误。

```
<Window.DataContext>
    <ViewModel/>
</Window.DataContext> 
```

# ocaml - 如何在没有返回键的情况下读取 OCaml 中的字符？

> ID：13410159
> 
> 赞同：9
> 
> 时间：2012-11-16T03:57:11.423
> 
> 标签：ocaml

我正在寻找类似`input_char stdin`但不等待返回键的东西。我不会依赖像 lambda-term 这样的大依赖。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-16T04:32:21.340

处理整行输入很容易。一次处理一个字符有点依赖于系统。如果您使用的是类 Unix 系统，您应该可以使用该`Unix`模块执行此操作：

```
let get1char () =
    let termio = Unix.tcgetattr Unix.stdin in
    let () =
        Unix.tcsetattr Unix.stdin Unix.TCSADRAIN
            { termio with Unix.c_icanon = false } in
    let res = input_char stdin in
    Unix.tcsetattr Unix.stdin Unix.TCSADRAIN termio;
    res 
```

# javascript - 通过谷歌浏览器内容脚本注入 CSS。Manifest.json 失败，但使用 javascript 成功？

> ID：13410160
> 
> 赞同：1
> 
> 时间：2012-11-16T03:57:26.697
> 
> 标签：javascript, google-chrome-extension

我正在将一些 JavaScript 和 CSS 注入 YouTube 页面。[该文档](http://developer.chrome.com/extensions/content_scripts.html)似乎表明这应该是可能的。我做错了什么吗？这是YouTube的事情吗？还是内容脚本中的注入被破坏了？

```
 "content_scripts": [
    {
      "matches": ["http://www.youtube.com/watch?v*"],
      "css": ["ChromeExtension/css/inject.css"],
      "js": ["Shared/js/thirdParty/jquery.js", "ChromeExtension/js/inject.js"]
    }
  ],

  "web_accessible_resources": [
    "ChromeExtension/css/inject.css",
    "ChromeExtension/icon.png"
  ] 
```

这是我的相关 manifest.json。

现在，当我刚刚通过我的 content_script 请求了 inject.css 时，我什至在 youtube.com 上都没有看到请求。但是，如果我将我的 CSS 文件定义为 web_accessible_resource，那么我可以通过我的 javascript 加载我的 CSS，如下所示：

```
var link = document.createElement('link');
link.href =  chrome.extension.getURL('ChromeExtension/css/inject.css');
link.rel = 'stylesheet';
document.documentElement.insertBefore(link); 
```

有什么明显的原因吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-16T12:52:15.260

尝试避免内容脚本中的相对路径，将所有 JS 和 CSS 代码放在根路径中并尝试

```
"content_scripts": [
    {
      "matches": ["http://www.youtube.com/watch?v*"],
      "css": ["inject.css"],
      "js": ["jquery.js", "inject.js"]
    }
] 
```

如果您有很多文件并且不想干扰文件夹结构，您可以在加载时使用编程注入：

前任：

```
onload = function (){
    chrome.tabs.executeScript(null, {file: "path"});
} 
```

# php - 如何将此数组修改为关联数组？

> ID：13410162
> 
> 赞同：0
> 
> 时间：2012-11-16T03:57:39.527
> 
> 标签：php

我有这个代码：

```
$genders = array('Male', 'Female');

foreach ( $genders as $gender ) {
echo '<option' . ( $rowMyBiodata['Gender'] == $gender ? ' selected' : '' ) . '>';
echo $gender;
echo '</option>';
} 
```

并且该代码会生成如下 HTML 代码：

```
<option selected>Male</option>
<option>Female</option> 
```

现在，我想在每个选项上添加一个值，以便输出如下所示：

```
<option selected value='M'>Male</option>
<option value='F'>Female</option> 
```

我认为通过将数组更改为关联数组可以解决这个问题：

```
$genders = array('M'=>'Male', 'F'=>'Female'); 
```

但是如何获取数组的索引以便它可以用作选项标签上的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T04:01:26.193

您只需将输出脚本更改为以下内容：

```
$genders = array('M' => 'Male', 'F' => 'Female');

foreach ( $genders as $gender => $description ) {
    echo '<option value='.$gender.' ' . ( $rowMyBiodata['Gender'] == $description ? ' selected' : '' ) . '>';
    echo $description;
    echo '</option>';
} 
```

请注意 foreach 参数的新用途以具有 $key => $value 对，然后在输出中使用它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T04:01:35.947

像这样：

```
$genders = array('M' => 'Male', 'F' => 'Female');

foreach ($genders as $key => $value) {
    echo '<option' . ($rowMyBiodata['Gender'] == $value ? ' selected' : '' ) . ' value="' . $key . '">';
    echo $value;
    echo '</option>';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T04:05:21.343

使用如下，

```
foreach ( $genders as $key=>$gender ) {
  echo '<option value='.$key.' . ( $rowMyBiodata['Gender'] == $gender ? ' selected' : '' ) . '>';
  echo $gender;
  echo '</option>'; 
```

}

# c - fgets期间的段错误？

> ID：13410167
> 
> 赞同：0
> 
> 时间：2012-11-16T03:58:24.500
> 
> 标签：c, segmentation-fault, fgets

这是我的代码：

```
 while (fgets(line, 1000, fp) != NULL) 
    { 
      printf("backin!");
      if ((result = strtok(line,delims)) == NULL)
        printf("Need from_id, to_id, and distance on each line of input file.\n");
      else
        from_id = atoi(result);
      printf("check!\n");
      if ((result = strtok(NULL,delims)) == NULL)
        printf("Need from_id, to_id, and distance on each line of input file.\n");
      else
        to_id = atoi(result);
      printf("check!\n");
      if ((result = strtok(NULL,delims)) == NULL)
        printf("Need from_id, to_id, and distance on each line of input file.\n");
      else
        distance = atof(result);
      printf("check!\n");
      printf("from_id: %d, to_id: %d, distance: %f",from_id, to_id, distance);
      if(BuildGraph(graph_array, from_id, to_id, distance) == -1)
        printf("Error while filling in graph type"); 
      printf("check!\n");
    } 
```

所有这些 printfs 只是为了定位段错误发生的位置。输入文件有 100 行长，这个函数工作了 15 次，完成了所有的检查，然后在 "backin!" 之前 seg faults 在第 16 次迭代时打印。

我查看了输入文件，并没有任何可疑之处（绝对少于 1000 个字符），似乎 fgets 有问题，但我不知道是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T04:47:28.493

确保大小`line`至少为 1000 个字符或将代码更改为：

```
while (fgets(line, sizeof(line), fp) != NULL) 
... 
```

您需要`line`足够大以容纳最长的线或具有处理部分线的逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T06:11:29.967

您可以尝试在正则表达式的帮助下使用 fscanf `"%[^\n]s"`。这将接受您的所有令牌，直到行尾字符。

*   与问题无关，但仍然在 printf 之后练习使用 getch()。

# algorithm - 有多少种方法可以访问给定矩阵的所有点？

> ID：13410168
> 
> 赞同：3
> 
> 时间：2012-11-16T03:58:34.703
> 
> 标签：algorithm, graph, matrix, traversal

有一个`m*n Matrix`。

从矩阵的一个点，您可以移动到八个相邻点之一 ( `up, down, left, right, upper left, lower left, upper right, lower right`)

如果一个方向的点已经被访问过，你可以继续移动到这个方向上的下一个未访问的点。

您不能访问已访问过的点，但可以通过已访问的相邻点访问其他未访问的点。

例如，当前点为 (5,5)：

1.  如果 (5,4) 已被访问，您可以转到 (5,3)。如果还访问了 (5,3)，则可以移动 (5,2)。
2.  同对角线方向。如果 (4,4) 已被访问，您可以移动到 (3,3) 等等。

现在你需要访问矩阵上的所有点，有多少种方式？

（第一个点和最后一个点可以是任意点）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T13:02:25.720

这类似于棋盘上的**希腊键游览**次数/AKA网格上**的自我回避步行次数**（[参见 Wikipedia ）。](http://en.wikipedia.org/wiki/Self-avoiding_walk)

但在您的变体中，您可以移动到 8 个方向，而不是 4 个。

对于原始版本，似乎没有用于较大 n 值的已知公式。[这里](http://www.njohnston.ca/2009/05/on-maximal-self-avoiding-walks/)和[这里](http://mathworld.wolfram.com/Self-AvoidingWalk.html)都有解释。

我实现了一个简短的 C++ 程序来计算你的情况（我猜这不是最有效的）：

```
const size_t _DIM_m= 4; // cols
const size_t _DIM_n= 4; // rows

typedef struct // we want to pass the array by value (for recursion), so we'll wrap it with a struct
{
    bool g[_DIM_m][_DIM_n];
} Grid;

int Traverse(Grid g, int i, int j, int nVisit= 0)
{
    int nWays= 0;

    ++nVisit;        // points visited so far
    g.g[i][j]= true;
    Grid h= g;

    // original problem:
    if (                   (0        != j) && (!g.g[i  ][j-1])) nWays+= Traverse(g, i  , j-1, nVisit); // up
    if (                   (_DIM_n-1 != j) && (!g.g[i  ][j+1])) nWays+= Traverse(g, i  , j+1, nVisit); // down
    if ((0        != i)                    && (!g.g[i-1][j  ])) nWays+= Traverse(g, i-1, j  , nVisit); // left
    if ((_DIM_m-1 != i)                    && (!g.g[i+1][j  ])) nWays+= Traverse(g, i+1, j  , nVisit); // right

    // additions for your problem:
    if ((_DIM_m-1 != i) && (0        != j) && (!g.g[i+1][j-1])) nWays+= Traverse(g, i+1, j-1, nVisit); // upper right
    if ((0        != i) && (_DIM_n-1 != j) && (!g.g[i-1][j+1])) nWays+= Traverse(g, i-1, j+1, nVisit); // lower left
    if ((0        != i) && (0        != j) && (!g.g[i-1][j-1])) nWays+= Traverse(g, i-1, j-1, nVisit); // upper left
    if ((_DIM_m-1 != i) && (_DIM_n-1 != j) && (!g.g[i+1][j+1])) nWays+= Traverse(g, i+1, j+1, nVisit); // lower right

    if (_DIM_m * _DIM_n == nVisit) ++nWays; // if all points visited
    return nWays;
}

int _tmain(int argc, _TCHAR* argv[])
{
    Grid g;

    for (size_t i= 0; i<_DIM_m; i++)
        for (size_t j= 0; j<_DIM_n; j++)
            g.g[i][j]= false;

    int nWays= Traverse(g, 0, 0); // starting point: 0, 0

    cout << nWays << endl;
    system ("pause");

    return 0;
} 
```

从 (0,0) 开始的矩形网格的结果：

*   _DIM= 1: 1
*   _DIM= 2: 6
*   _DIM= 3: 138
*   _DIM= 4: 37948
*   _DIM= 5: 很多...

请注意，从不同的点开始时，结果会发生变化。

**编辑：**

**修改了原始问题：添加了传递。这是针对这种情况的解决方案：**

```
const size_t _DIM_m= 4; // cols
const size_t _DIM_n= 4; // rows

typedef struct // we want to pass the array by value (for recursion), so we'll wrap it with a struct
{
    bool g[_DIM_m][_DIM_n];
} Grid;

inline bool InRange(int i, int j)
{
    return (i >= 0) && (i < _DIM_m) && (j >= 0) && (j < _DIM_n);
}

int Traverse(Grid g, int i, int j, int nVisit= 0)
{
    int nWays= 0;

    ++nVisit;        // points visited so far
    g.g[i][j]= true;
    Grid h= g;

    int i1,j1;

    i1= i; j1= j;
    do { --j1;       } while (InRange(i1,j1) && (g.g[i1][j1]));                    // up          (pass through)
    if                       (InRange(i1,j1)) nWays+= Traverse(g, i1, j1, nVisit);

    i1= i; j1= j;
    do { ++j1;       } while (InRange(i1,j1) && (g.g[i1][j1]));                    // down        (pass through)
    if                       (InRange(i1,j1)) nWays+= Traverse(g, i1, j1, nVisit);

    i1= i; j1= j;
    do { --i1;       } while (InRange(i1,j1) && (g.g[i1][j1]));                    // left        (pass through)
    if                       (InRange(i1,j1)) nWays+= Traverse(g, i1, j1, nVisit);

    i1= i; j1= j;
    do { ++i1;       } while (InRange(i1,j1) && (g.g[i1][j1]));                    // right       (pass through)
    if                       (InRange(i1,j1)) nWays+= Traverse(g, i1, j1, nVisit);

    i1= i; j1= j;
    do { ++i1; --j1; } while (InRange(i1,j1) && (g.g[i1][j1]));                    // upper right (pass through)
    if                       (InRange(i1,j1)) nWays+= Traverse(g, i1, j1, nVisit);

    i1= i; j1= j;
    do { --i1; ++j1; } while (InRange(i1,j1) && (g.g[i1][j1]));                    // lower left  (pass through)
    if                       (InRange(i1,j1)) nWays+= Traverse(g, i1, j1, nVisit);

    i1= i; j1= j;
    do { --i1; --j1; } while (InRange(i1,j1) && (g.g[i1][j1]));                    // upper left  (pass through)
    if                       (InRange(i1,j1)) nWays+= Traverse(g, i1, j1, nVisit);

    i1= i; j1= j;
    do { ++i1; ++j1; } while (InRange(i1,j1) && (g.g[i1][j1]));                    // lower right (pass through)
    if                       (InRange(i1,j1)) nWays+= Traverse(g, i1, j1, nVisit);

    if (_DIM_m * _DIM_n == nVisit) ++nWays; // if all points visited
    return nWays;
} 
```

从 (0,0) 开始的矩形网格的结果：

*   _DIM= 1: 1
*   _DIM= 2: 6
*   _DIM= 3: 1020
*   _DIM= 4: 8071182
*   _DIM= 5: 很多...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T06:57:52.373

听起来像是一个典型的 TSP 问题（参见：[http](http://en.wikipedia.org/wiki/Travelling_salesman_problem) ://en.wikipedia.org/wiki/Travelling_salesman_problem ）。每个方框（例如 5,5）就像一个城市，只有“道路”或链接可以到达另一个节点或“城市”。希望对你有帮助

# objective-c - 使数组调用对象并索引

> ID：13410171
> 
> 赞同：0
> 
> 时间：2012-11-16T03:58:53.237
> 
> 标签：objective-c, macos, ios6

我收到 myArray 隐藏实例变量的错误。请简要解释错误的含义以及如何修复它。谢谢你的帮助。我是 Objective-c 编程的新手

```
- (IBAction)buttonPushed:(id)sender
{
    NSArray *snarkyCommentArray = [[NSArray alloc] initWithObjects: @"Butter",@"Cheese",@"Gravy",@"Your fat",@"smells like roses",nil];

    self.snarkOffLabel.text = [snarkyCommentArray objectAtIndex:(1)];

}
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T04:09:18.067

虽然代码与您的问题不符，但我仍然可以解释错误消息。

如果您的类定义了一个实例变量，然后您创建了一个同名的局部变量，编译器会警告您将使用局部变量而不是实例变量。局部变量“隐藏”了实例变量。

最好确保您永远不要为局部变量赋予与实例变量相同的名称，以避免任何混淆。一种常见的做法是给所有实例变量一个下划线前缀，例如`_myArray`. 这样，每当您阅读代码时，非常明显哪些变量是实例变量，哪些不是。

避免该问题的另一种方法是通过`self`指针引用实例变量。

假设我的类有一个名为的实例变量`foo`，而我有一个名为 的局部变量`foo`。

```
foo = 5; // local variable
self->foo = 10; // instance variable 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T04:11:14.053

我可以说，您的 ivar 和局部变量具有相同的名称。因此，您需要更改其中任何一个的名称。或使用箭头运算符访问您的 ivar。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T04:51:13.600

考虑以下：

```
@interface myClass : NSObject{
NSString *name;
}

- (void)print:(NSString*)name;
- (void)printName;
@end

@implementation myClass

- (void)print:(NSString*)name{
    // This line will print the local variable 'name', not the instance variable 'name'
    // This line will cause a warning to the effect "Local variable hides instance variable"

    NSLog(@"%@", name);
}

- (void)print{
    // This line will print the instance variable 'name'.
    NSLog(@"%@", name);

    NSString *name = @"Steve";

    // This line will print the local variable 'name'.
    // This line will cause a warning to the effect "Local variable hides instance variable"
    NSLog(@"%@", name);
}
@end 
```

了解实例变量和局部变量之间的区别很重要。实例变量是在类的“@interface”部分中定义的变量。例子：

```
@interface myClass : NSObject {
// Instance variables
NSString *name;
float progressAmount;
NSUInteger *age;
}
@end 
```

实例变量可以被类的任何方法访问。局部变量是具有局部作用域的变量，只能在声明它的方法或块中访问。例子：

```
- (int)square:(int)num{
    int result = num * num;
    return result;
} 
```

在前面的示例中，`num`和`result`都是局部变量。方法是他们的`square:`整个宇宙。它们不能从外部访问，一旦返回`square:`它们也不存在。`square:`据说它们具有局部范围。

那么当一个实例变量和一个局部变量被赋予相同的名字时会发生什么呢？这一切都归结为范围。就作用域而言，局部变量胜过实例变量，因此在决定使用哪个变量时，编译器将使用局部变量。这就是编译器产生警告而不是错误的原因。正在发生的事情是完全可以接受的，但警告程序员仍然是个好主意。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T07:32:31.863

你试过检查哪里出错了`NSLog`吗？你知道是否`snarkyCommentArray`保留你的琴弦吗？检查它像

```
Nslog(@"snarkyCommentArray %@",snarkyCommentArray); 
```

如果它保留所有，那么关心你的标签，你可以使用它而不`self`喜欢

```
snarkOffLabel.text = [snarkyCommentArray objectAtIndex:(1)]; 
```

如果它仍然不起作用，则分配您的数组`NSMutableArray`，例如

```
NSMutableArray *snarkyCommentArray = [[NSMutableArray alloc] initWithObjects: @"Butter",@"Cheese",@"Gravy",@"Your fat",@"smells like roses",nil]; 
```

希望能帮助到你。

# objective-c - ObjC ARC收缩（clang崩溃）

> ID：13410172
> 
> 赞同：9
> 
> 时间：2012-11-16T03:58:55.140
> 
> 标签：objective-c, ios, xcode, automatic-ref-counting, clang

我总是犹豫在这里向杀手论坛添加一个全新的问题，但我没有看到任何接近这个错误的东西。

似乎在编译我的一个 .m 文件时，clang 在我身上崩溃了。如果有人看到或知道以下任何解决方案，我将非常感激。

当我使用**XCode 4.4.1**在**发布配置中为****armv6**构建时，会发生此错误

 ****但是当我在**调试配置中为****armv6**构建或**为 armv7、armv7s 或 i386 发布时****不会发生。**

 ******具体错误是*“ObjC ARC 收缩”：*

```
 1\. <eof> parser at end of file
    2\. Code generation
    3\. Running pass 'Function Pass Manager' on module '/Users/Me/Documents/ThisProject/iOS/..../ClassFoo.m'.
    4\. Running pass 'ObjC ARC contraction' on function '@"\01-[ClassFoo evalJS:]"'
    clang: error: unable to execute command: Segmentation fault: 11
    clang: error: clang frontend command failed due to signal (use -v to see invocation)
    clang: note: diagnostic msg: Please submit a bug report to http://developer.apple.com/bugreporter/ and include command line arguments and all diagnostic information. 
```

在 ../Intermediaries/Project.build/armv6/ 文件夹中，我看到：

```
 ClassFoo.dia 
```

我应该看到（就像它周围的所有文件一样）

```
 ClassFoo.d
    ClassFoo.dia
    ClassFoo.o 
```

以下是 clang 堆栈的前 4 个，以防有人认出其中的某些内容：

```
 0  clang             0x00000001010536f2 main + 17107682
    1  clang             0x0000000101053b79 main + 17108841
    2  libsystem_c.dylib 0x00007fff93c428ea _sigtramp + 26
    3  libsystem_c.dylib 0x00007fff93c7a54e tiny_malloc_from_free_list + 1078 
```

*编辑：*我最近再次尝试时也注意到，我收到了关于 -fno-objc-arc 标志的投诉——也许编译器符号链接指向错误的二进制文件？

提前致谢，

英里

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T20:07:34.650

感谢您的所有兴趣，很抱歉不得不自己回答这个问题，但我尝试过的其他解决方案都没有取得任何成功。我已尽力将我的冒险记录在这里作为指南，希望能帮助其他一些人。

**简短版本：**

1.  Xcode 4.5+ 不支持构建到 armv6 (iphone 3g)。
2.  全新安装 4.5 和 4.4.1 后，我遇到了各种版本的原始错误。
3.  原因有两个：

    *   Xcode 使用的 xcspec 文件不包含此架构的条目。
    *   4 个所需的 libclang_rt*.a 文件的 armv6 切片已被剥离。
4.  ***有解决办法！***（见下面的长版）

**长版：**

在我为解决这个问题所做的许多令人沮丧的尝试中，例如搜索 SO 论坛、搜索苹果开发论坛、谷歌搜索、无休止地摆弄项目设置、将早期的 SDK 复制到 Xcode.app 包中、发布这个问题、提交错误与 Apple 等进行报告。 ad infinitum <-- 意思是“进入无限”，每个人似乎都没有任何相关的信息可以透露，或者只有一点点信息。

这个解决方案的配方最终让一位沮丧而坚定的开发人员在一个漫长的夜晚完成了一切。

**那么方法在哪里呢？**

（就在这里，兄弟）

*大约有 12 个步骤，所以不要忘记图片下方的最后一步！*

**免责声明：这是我自己的解决方案，它对我很有用，但如果你不确定发生了什么或你在做什么，请非常小心，并意识到我对你可能招致的任何损害不承担任何责任尝试遵循这些步骤。就是说，给你！**

1.  如果您还没有副本，请从[http://connect.apple.com下载 Xcode 4.4.1](http://connect.apple.com)
2.  提炼`/PATH_TO_YOUR_Xcode_4.4.1.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk`
3.  将其复制到`/PATH_TO_YOUR_Xcode_4.5.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/`
4.  现在您将`.xcspec`在 Xcode 4.5 中编辑 4 个 Xcode 文件：

    *   在此处导航：`/PATH_TO_YOUR_Xcode_4.5.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/Library/Xcode/Specifications`
    *   选择这些文件：

        *   iPhoneXcode4Options.xcspec
        *   iPhoneOSArchitectures.xcspec
        *   iPhoneCompilerOptions.xcspec
        *   iPhoneClangOptions.xcspec
    *   右键单击并选择“使用 Xcode 打开”

5.  对 Xcode 4.4.1 重复此操作，并将两个窗口并排粘贴（只是让这更容易）。
6.  您将添加`armv6`到以下几个条目： ![iPhoneClangOptions.xcspec](../Images/141c32d97ffc02b7b5d5769ae3a94066.png)

7.  又是在这里： ![iPhoneCompilerOptions.xcspec](../Images/dac1e61e7eccd334e4caf0345ffbc75c.png)

8.  和这里： ![iPhoneXcode4Options.xcspec](../Images/51912e04fae0a92bf6519d4847023bdd.png)

9.  在这里，您将一个条目从 Xcode 4.4.1 剪切并粘贴到 Xcode 4.5： ![iPhoneOSArchitectures.xcspec](../Images/5d1f10372a92447e476db26bec0e4698.png)

10.  好吧，你完成了那种乏味，耶！保存编辑后的文件并全部关闭。接下来，您必须创建新`libclang_rt*.a`文件来处理编译这些拱门。这一步在终端中更容易完成。输入这些命令：

*确保备份副本并且路径或输入没有错误！*

```
 cd /PATH_TO_YOUR_Xcode_4.4.1.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/clang/4.2/lib/darwin

 sudo mkdir armv6_extractions

 lipo -extract armv6 -output armv6_extractions/libclang_rt.ios.armv6.a libclang_rt.ios.a
 lipo -extract armv6 -output armv6_extractions/libclang_rt.profile_ios.armv6.a libclang_rt.profile_ios.a
 lipo -extract armv6 -output armv6_extractions/libclang_rt.cc_kext.armv6.a libclang_rt.cc_kext.a

 sudo cp -R armv6_extractions  /PATH_TO_YOUR_Xcode_4.5.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/clang/4.2/lib/darwin

 cd /PATH_TO_YOUR_Xcode_4.5.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/clang/4.2/lib/darwin

 sudo mkdir originals
 sudo cp libclang_rt.ios.a originals/
 sudo cp libclang_rt.cc_kext_ios5.a originals/
 sudo cp libclang_rt.profile_ios.a originals/

 lipo -create -output libclang_rt.ios.a armv6_extractions/libclang_rt.ios.armv6.a originals/libclang_rt.ios.a
 lipo -create -output libclang_rt.cc_kext_ios5.a armv6_extractions/libclang_rt.cc_kext.armv6.a originals/libclang_rt.cc_kext_ios5.a
 lipo -create -output libclang_rt.profile_ios.a armv6_extractions/libclang_rt.cc_kext.armv6.a originals/libclang_rt.profile_ios.a 
```

11.  重启 Xcode 4.5

    ^...我在这里写了“11”...为什么它显示为“1”？

12.  打开您的项目并相应地编辑您的设置。我建议您创建一个单独的配置，仅用于构建到 armv6，并在完成后将所有内容整合在一起。

    *   添加`armv6`到`Valid Architectures`
    *   添加`armv6`到`Architectures`
    *   对于您的特定 armv6 配置，设置`Base SDK`为`iOS 5.x`（现在在下拉菜单中列出的内容）
    *   根据需要设置你的部署目标（我目前已经构建低至iOS4.1，相信你一开始安装的iOS5.x sdk可以部署低至4.x）

好吧，我想就是这样。

如果有人看到任何需要进行的编辑，请这样做，我欢迎任何人在这里提供任何反馈。

如果出现问题，您可以随时重新安装 Xcode 并重试（或不重试）*。*

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T20:19:18.637

我以前遇到过这个问题....您是否多次初始化您的 .m ？还是进口？对我来说，唯一一次出现这个问题是当我尝试在其原生环境之外的地方初始化或导入 .m 文件时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T08:44:40.663

编译器不应该崩溃。如果是这样，则供应商需要对其进行修复。不幸的是，我认为您无法通过 Apple 的 Radar 获得任何有用的响应，因为他们已经继续前进：Xcode 4.5 中有更新版本的 Clang，它们不再支持 armv6。

话虽如此，您应该打开技术支持事件，因为他们可能会为您提供解决方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T22:48:21.177

错误消息表明编译器在处理函数 @"\01-[ClassFoo evalJS:]" 时出现内部错误。您可以通过重新排列该函数中的代码和/或将 volatile 添加到该函数中的局部变量来绕过该错误。**********

# jquery - jquery函数事件监听器破坏了函数的第一部分

> ID：13410175
> 
> 赞同：0
> 
> 时间：2012-11-16T03:59:02.443
> 
> 标签：jquery, event-listener

我有一个带有事件侦听器的函数，然后会提示另一个函数。在事件侦听器之前，该函数工作得非常好。假设发生的是假设文本被加载到各自的 div 中，然后当它们完成时，假设会发生一个动画功能。由于某种原因，动画功能会导致文本加载被跳过。

这是设置的 JS BIN [http://jsbin.com/umohoj/11/edit](http://jsbin.com/umohoj/11/edit)

它在 .load 的 url 上（即使它们不能与 eventlistner 一起使用）

[http://www.klossal.com/b_test.html](http://www.klossal.com/b_test.html)

这是一个没有动画的负载的工作示例：

[http://www.klossal.com/b_testa.html](http://www.klossal.com/b_testa.html)

这是一个将负载作为一个功能的动画的工作示例，而不是等待负载完成的动画，这是我想要发生的，因为负载需要完成动画中的某些计算正常工作。

[http://www.klossal.com/b_testb.html](http://www.klossal.com/b_testb.html)

这是带有事件侦听器的代码，由于某种原因阻止了负载工作：

```
$(".name").click(function() {
  var id = $(this).attr('id');

  $('#photo_850').empty();

  $("<img>", { src: id + ".jpg" }).prependTo("#photo_850");

  $("#name_850").load(id +"_name.txt");

  $("#credentials_850").load(id +"_credentials.txt");

  $("#bio_850_text").load(id +"_bio.txt", function() {
    $("#bio_850_img").css({
    marginTop: ($("#bio_850_text").innerHeight() /2) -   
    ($("#bio_850_img").height() / 2)
    });                                                                     
  });

  $("#edu_850_text").load(id +"_edu.txt", function() {
    $("#edu_850_img").css({
    marginTop: ($("#edu_850_text").innerHeight() /2) -   
    ($("#edu_850_img").height() / 2)
    });                                                                     
  });

  $("#contact_850_text").load(id +"_contact.txt", function() {
    $("#contact_850_img").css({
    marginTop: ($("#contact_850_text").innerHeight() /2) -   
    ($("#contact_850_img").height() / 2)
    });                                                                     
  });

}, function() {

  $("#container_1").animate({
     height: 87 + $("#box_2_850").height() + $("#box_3_850").height() +     
$("#box_4_850").height()
  }, 300);

  $("#container_1_txt").animate({
     "margin-top": $("#container_1_txt").innerHeight() * -1
  }, 300);

    $("#box_1_850").delay(160).animate({
     marginTop: 15
  }, 300);

    $("#box_2_850").delay(330).animate({
     marginTop: 0
  }, 450);  

    $("#box_3_850").delay(450).animate({
     marginTop: 0
  }, 450);  

    $("#box_4_850").delay(570).animate({
     marginTop: 0
  }, 450); 

                 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T05:28:38.407

经过广泛的研究；）我有一个解决方案！哈哈

```
$("#container_1").css({
  'height': $("#container_1_txt").innerHeight()
});

$("#box_1_850").css({
  'marginTop': $("#container_1_txt").innerHeight()
});

$("#box_2_850").css({
  'marginTop': $("#container_1").height()
});

$("#box_3_850").css({
  'marginTop': $("#container_1").height()
});

$("#box_4_850").css({
  'marginTop': $("#container_1").height()  
});

var x1, x2, x3; //Establish Loading Variables 

$(".name").on('click' , function() { 

  x1=0; //Reset the Loading Variables
  x2=0;
  x3=0;

  var id = $(this).attr('id');

  $('#photo_850').empty();

  $("<img>", { src: 'http://www.klossal.com/' + id + ".jpg" }).prependTo("#photo_850"); 

  $("#name_850").load(id +"_name.txt");

  $("#credentials_850").load(id +"_credentials.txt");

  $("#bio_850_text").load(id +"_bio.txt", function() {

    $("#bio_850_img").css({
    'marginTop': ($("#bio_850_text").innerHeight() /2) -   
    ($("#bio_850_img").height() / 2)
    });

    console.log('Loaded'); //Testing Purposes Only
    x1=1; // Loaded
    animate(); // Attempt Animation

  });

  $("#edu_850_text").load(id +"_edu.txt", function() {

    $("#edu_850_img").css({
    'marginTop': ($("#edu_850_text").innerHeight() /2) -   
    ($("#edu_850_img").height() / 2)
    });

    console.log('Loaded'); //Testing Purposes Only
    x2=1; // Loaded
    animate(); // Attempt Animation

  });

  $("#contact_850_text").load(id +"_contact.txt", function() {

    $("#contact_850_img").css({
    'marginTop': ($("#contact_850_text").innerHeight() /2) -   
    ($("#contact_850_img").height() / 2)
    });

    console.log('Loaded'); //Testing Purposes Only
    x3=1; // Loaded
    animate(); // Attempt Animation
  });

});

function animate() {

  if((x1===1) && (x2===1) && (x3===1)){ //Animate if all thre divs are loaded

  $("#container_1").animate({
     'height': 87 + $("#box_2_850").outerHeight() + $("#box_3_850").outerHeight() + $("#box_4_850").outerHeight()
  }, 300);

  $("#container_1_txt").animate({
     'margin-top': $("#container_1_txt").innerHeight() * -1
  }, 300);

    $("#box_1_850").delay(160).animate({
     'marginTop': 15
  }, 300);

    $("#box_2_850").delay(330).animate({
     'marginTop': 0
  }, 450);  

    $("#box_3_850").delay(450).animate({
     'marginTop': 0
  }, 450);  

    $("#box_4_850").delay(570).animate({
     'marginTop': 0
  }, 450); 

 }

} 
```

# function - val notNull[T]: T => Boolean = _ != null from Scala in Depth 有什么问题

> ID：13410180
> 
> 赞同：0
> 
> 时间：2012-11-16T03:59:36.847
> 
> 标签：function, scala

我尝试在 REPL[的深度中从 Scala](http://www.manning.com/suereth/)运行以下代码段：

```
val notNull[T]: T => Boolean = _ != null 
```

口译员向我抛出了以下错误：

```
<console>:7: error: missing parameter type for expanded function ((x$1) => x$1.$bang$eq(null))
       val notNull[T]: T => Boolean = _ != null
                                      ^
<console>:7: error: not found: type T
       val notNull[T]: T => Boolean = _ != null
                       ^
<console>:7: error: not found: type notNull
       val notNull[T]: T => Boolean = _ != null
           ^
<console>:7: error: not found: type T
       val notNull[T]: T => Boolean = _ != null
                   ^

scala> val notNull[T](f1: T => Boolean) = _ != null
<console>:1: error: ')' expected but '=>' found.
       val notNull[T](f1: T => Boolean) = _ != null 
```

也许我不理解这里的陈述，但书中的陈述基本上不是说，声明一个 T 类型的 val notNull ，它返回一个以 T 作为参数并返回布尔值的函数。`_！= null 通过获取参数并将其与 null 进行比较来执行函数，本质上返回一个布尔值？

为什么编译器会在这里抛出所有这些错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T04:04:05.057

它需要`def`工作。Val's 不能像那样一般地输入。这可能是因为该 val 是 Function1 的实例，并且类的实例需要具有实际类型。

```
def notNull[T]: T => Boolean = _ != null 
```

当您像上面那样调用 notNull 时，它实际上会返回一个 function1 实例。

```
scala> val a = notNull[String]
a: (String) => Boolean = <function1>

scala> a(null)
res5: Boolean = false

scala> a("aa")
res6: Boolean = true

scala> a(5)
<console>:10: error: type mismatch;
 found   : Int(5)
 required: String
       a(5)
         ^ 
```

我认为这说明了为什么 val 不能被通用输入。

# android - 在android上将数据发送到服务器使用服务

> ID：13410184
> 
> 赞同：1
> 
> 时间：2012-11-16T04:00:04.707
> 
> 标签：android, android-service

我想将数据从android发送到服务器，在这里，我使用服务调用senddata AsyncTask。但我的应用程序出错了。你能帮帮我吗！！源服务

```
public class GpsService extends Service  {
HttpClient httpclient;
HttpPost httppost;
List<NameValuePair> nameValuePairs;
@Override
public void onCreate() {
    // TODO Auto-generated method stub
    super.onCreate();
    Toast.makeText(this, "Hello, Service dang chuan bi start!",  Toast.LENGTH_SHORT).show();
}
public void onDestroy() {
    // TODO Auto-generated method stub
    super.onDestroy();
    Toast.makeText(this, "Hello, Service dang chuan bi stop!",  Toast.LENGTH_SHORT).show();
}
@Override
public void onStart(Intent intent, int startId) {
    // TODO Auto-generated method stub
    //super.onStart(intent, startId);
    //doTimerTask();
    // Location initiation
    new senddata().execute();

}

public class senddata extends AsyncTask<Void, Void, Void> {
    private ProgressDialog progressdialog;

    @Override
    protected Void doInBackground(Void... params) {

        try {
            Calendar cal=Calendar.getInstance();
            int date=cal.get(Calendar.DAY_OF_MONTH);
            int month=cal.get(Calendar.MONTH)+1;
            int year=cal.get(Calendar.YEAR);
            int hour=cal.get(Calendar.HOUR_OF_DAY);
            int min=cal.get(Calendar.MINUTE);
            String str1=hour+":"+min+" "+date+"/"+month+"/"+year;
            httpclient = new DefaultHttpClient();
            httppost = new HttpPost("http://longvansolution.tk/gps.php");
            // add your data
            nameValuePairs = new ArrayList<NameValuePair>(3);
            nameValuePairs.add(new BasicNameValuePair("la", "test1"));
            nameValuePairs.add(new BasicNameValuePair("lon", "test2"));
            nameValuePairs.add(new BasicNameValuePair("str", str1));
            HttpEntity entity = new UrlEncodedFormEntity(nameValuePairs);
            httppost.addHeader(entity.getContentType());
            httppost.setEntity(entity);
            response = httpclient.execute(httppost);

        } catch (Exception e) {
            e.printStackTrace();
        }
        return null;
    }

    @Override
    protected void onPostExecute(final Void unused) {
        // TODO Auto-generated method stub
        this.progressdialog.dismiss();

    }

    @Override
    protected void onPreExecute() {
        // TODO Auto-generated method stub
        //this.progressdialog = ProgressDialog.show(GpsService.this, "",
        //      "Loading...");
    }

} 
```

}

这个错误

```
11-16 10:57:09.905: E/AndroidRuntime(1846): FATAL EXCEPTION: main

11-16 10:57:09.905: E/AndroidRuntime(1846): java.lang.NullPointerException

11-16 10:57:09.905: E/AndroidRuntime(1846): at LongVan.mapfinish.GpsService$senddata.onPostExecute(GpsService.java:153)

11-16 10:57:09.905: E/AndroidRuntime(1846):     at LongVan.mapfinish.GpsService$senddata.onPostExecute(GpsService.java:1)

11-16 10:57:09.905: E/AndroidRuntime(1846):     at android.os.AsyncTask.finish(AsyncTask.java:602)

11-16 10:57:09.905: E/AndroidRuntime(1846): at android.os.AsyncTask.access$600(AsyncTask.java:156)

11-16 10:57:09.905: E/AndroidRuntime(1846): at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:615)

11-16 10:57:09.905: E/AndroidRuntime(1846):     at android.os.Handler.dispatchMessage(Handler.java:99)

11-16 10:57:09.905: E/AndroidRuntime(1846): at android.os.Looper.loop(Looper.java:137)

11-16 10:57:09.905: E/AndroidRuntime(1846): at android.app.ActivityThread.main(ActivityThread.java:4514)

11-16 10:57:09.905: E/AndroidRuntime(1846): at java.lang.reflect.Method.invokeNative(Native Method)

11-16 10:57:09.905: E/AndroidRuntime(1846): at java.lang.reflect.Method.invoke(Method.java:511)

11-16 10:57:09.905: E/AndroidRuntime(1846): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)

11-16 10:57:09.905: E/AndroidRuntime(1846): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)

11-16 10:57:09.905: E/AndroidRuntime(1846): at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T05:10:44.933

progressdialog 对象未初始化

试试这个代码

```
 public class GpsService extends Service  {
    HttpClient httpclient;
    HttpPost httppost;
    List<NameValuePair> nameValuePairs;
    @Override
    public void onCreate() {
        // TODO Auto-generated method stub
        super.onCreate();
        Toast.makeText(this, "Hello, Service dang chuan bi start!",  Toast.LENGTH_SHORT).show();
    }
    public void onDestroy() {
        // TODO Auto-generated method stub
        super.onDestroy();
        Toast.makeText(this, "Hello, Service dang chuan bi stop!",  Toast.LENGTH_SHORT).show();
    }
    @Override
    public void onStart(Intent intent, int startId) {
        // TODO Auto-generated method stub
        //super.onStart(intent, startId);
        //doTimerTask();
        // Location initiation
        new senddata().execute();

    }

    public class senddata extends AsyncTask<Void, Void, Void> {
        private ProgressDialog progressdialog;

        @Override
        protected Void doInBackground(Void... params) {

            try {
                Calendar cal=Calendar.getInstance();
                int date=cal.get(Calendar.DAY_OF_MONTH);
                int month=cal.get(Calendar.MONTH)+1;
                int year=cal.get(Calendar.YEAR);
                int hour=cal.get(Calendar.HOUR_OF_DAY);
                int min=cal.get(Calendar.MINUTE);
                String str1=hour+":"+min+" "+date+"/"+month+"/"+year;
                httpclient = new DefaultHttpClient();
                httppost = new HttpPost("http://longvansolution.tk/gps.php");
                // add your data
                nameValuePairs = new ArrayList<NameValuePair>(3);
                nameValuePairs.add(new BasicNameValuePair("la", "test1"));
                nameValuePairs.add(new BasicNameValuePair("lon", "test2"));
                nameValuePairs.add(new BasicNameValuePair("str", str1));
                HttpEntity entity = new UrlEncodedFormEntity(nameValuePairs);
                httppost.addHeader(entity.getContentType());
                httppost.setEntity(entity);
                response = httpclient.execute(httppost);

            } catch (Exception e) {
                e.printStackTrace();
            }
            return null;
        }

        @Override
        protected void onPostExecute(final Void unused) {
            // TODO Auto-generated method stub
            progressdialog .dismiss();

        }

        @Override
        protected void onPreExecute() {
            // TODO Auto-generated method stub
            progressdialog = new ProgressDialog(GpsService.this);
            progressdialog.setMessage("Loading...");
            progressdialog.setCancelable(false);
            progressdialog.show();

        }

    } 
```

# c# - 无法使用 StreamSocket 连接到 TcpListener

> ID：13410186
> 
> 赞同：0
> 
> 时间：2012-11-16T04:00:23.277
> 
> 标签：c#, windows-runtime, tcplistener

我在移动设备上有一个应用程序，它连接到我在桌面上的服务器应用程序我在桌面上使用 TcpListener，在移动设备上使用 TcpClient。我试图添加对 Windows 8 的支持，但似乎微软删除了它，现在我们应该使用 StreamSocket 作为 TcpClient 和 StreamSocketListener 作为 TcpListener。我试图更改我的代码，但它甚至没有连接到我的 TcpListener。（请注意，我也在桌面上使用了异步）。

我桌面上的 TcpListener：

```
server = new TcpListener(Constants.DEFAULT_PORT);

server.Start();

server.BeginAcceptSocket(new AsyncCallback(OnAccept), null); 
```

我的 Windows 8 上的 StreamSocket：

```
var client = new StreamSocket();
await client.ConnectAsync(new EndpointPair(new HostName("localhost"), "7800", new HostName("localhost"), "7800")); 
```

它通过 ConnectAsync 线而没有连接，因为我在桌面上的 OnAccept 没有被调用。

所以我不知道这里有什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T04:17:30.370

默认情况下，Windows 运行时（应用商店）应用无法使用网络连接到 localhost。这个网页谈论它：http: [//msdn.microsoft.com/en-us/library/windows/apps/Hh780593.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/Hh780593.aspx)

使用上述说明，我从未能够使本地主机通信正常工作，而是选择在我的本地网络上设置一个侦听器。请注意，即使本地网络访问默认情况下也会关闭 - 您必须通过 Windows 运行时应用程序的应用程序清单启用它。

# log4j - log4j:ERROR 重命名失败

> ID：13410189
> 
> 赞同：7
> 
> 时间：2012-11-16T04:01:03.603
> 
> 标签：log4j, windows-server-2008, tomcat7, rollingfileappender

我在我的 tomcat 服务器日志中收到此错误“log4j:ERROR 无法重命名”。我的 log4j XML 中有多个 DailyRollingFileAppender。每个附加程序都指向不同的文件。只有一次应用程序实例正在运行。我使用了 Handle 实用程序并运行命令（以日志文件名作为参数）

处理 -f ams-app.log 结果是 Tomcat7.exe pid: 5032 type: File 54C: E:\apps\ams\logs\ams-app.log

由此我假设文件上只有一个锁。我的环境 Windows Server 2008、tomcat 7.0 和 Java 6 和 slf4j-log4j12(1.5.6)

当同一应用程序托管在 AIX 服务器上时，不会发生此问题。我用谷歌搜索了这个问题，它似乎是 Windows 特有的。我也不热衷于使用 DatedFileAppenders 或任何分叉的 log4j。logback 是否解决了此类问题。任何有关如何解决此问题的建议表示赞赏。谢谢

这是我的 log4j xml

```
<log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/">
<appender name="CONSOLE_APPENDER" class="org.apache.log4j.ConsoleAppender">
    <errorHandler class="org.apache.log4j.helpers.OnlyOnceErrorHandler"/>
    <param name="Target" value="System.out"/>
    <param name="Threshold" value="DEBUG"/>
    <layout class="org.apache.log4j.PatternLayout">     
        <param name="ConversionPattern" value="%n %d{yyyy/MM/dd HH:mm:ss} %-5p %x %M(%F:%L) - %m  %n"/>
    </layout>
</appender>

<appender name="APP_APPENDER" class="org.apache.log4j.DailyRollingFileAppender">
    <errorHandler class="org.apache.log4j.helpers.OnlyOnceErrorHandler"/>
    <param name="datePattern" value="yyyy-MM-dd"/>
    <param name="file" value="E:/apps/ams/logs/ams-app.log"/>
    <param name="append" value="true"/>
    <layout class="org.apache.log4j.PatternLayout">
        <param name="ConversionPattern" value="%n %d{yyyy/MM/dd HH:mm:ss} %-5p %x %M(%F:%L) - %m  %n"/>
    </layout>        
</appender>

<appender name="SQL_APPENDER" class="org.apache.log4j.DailyRollingFileAppender">
    <errorHandler class="org.apache.log4j.helpers.OnlyOnceErrorHandler"/>
    <param name="datePattern" value="yyyy-MM-dd"/>
    <param name="file" value="E:/apps/ams/logs/ams-sql.log"/>
    <param name="append" value="true"/>
    <layout class="org.apache.log4j.PatternLayout">
        <param name="ConversionPattern" value="%n %d{yyyy/MM/dd HH:mm:ss} %-5p %x %M(%F:%L) - %m  %n"/>
    </layout>
</appender>

<appender name="Quartz_APPENDER" class="org.apache.log4j.DailyRollingFileAppender">
    <errorHandler class="org.apache.log4j.helpers.OnlyOnceErrorHandler"/>
    <param name="datePattern" value="yyyy-MM-dd"/>
    <param name="file" value="E:/apps/ams/logs/ams-Quartz.log"/>
    <param name="append" value="true"/>
    <layout class="org.apache.log4j.PatternLayout">
        <param name="ConversionPattern" value="%n %d{yyyy/MM/dd HH:mm:ss} %-5p %x %M(%F:%L) - %m  %n"/>
    </layout>
</appender>

<logger name="org.springframework"><level value="WARN"/></logger>
<logger name="flex.messaging.log.ServletLogTarget"><level value="WARN" /></logger>
<logger name="net.sf.jasperreports"><level value="WARN" /></logger>
<logger name="net.sf.jasperreports.engine.fill"><level value="WARN" /></logger> 
<logger name="org.apache.commons.beanutils"><level value="WARN" /></logger>
<logger name="jdbc.sqltiming" additivity="false"><level value="DEBUG"/><appender-ref ref="SQL_APPENDER"/></logger>
<logger name="org.quartz" additivity="false"><level value="WARN" /><appender-ref ref="Quartz_APPENDER"/></logger>
<logger name="org.quartz.SchedulerException"><level value="ERROR" /><appender-ref ref="MAIL_APPENDER"/></logger>     
<logger name="org.hmil.ams.BatchDAO" additivity="false"><level value="INFO"/><appender-ref ref="Quartz_APPENDER"/></logger>
<root>      
    <priority value="debug"></priority> 
    <appender-ref ref="APP_APPENDER" />      
    <appender-ref ref="CONSOLE_APPENDER"/>
</root> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-26T19:44:05.697

看来，如果您正在运行 Windows，这是一个已知的错误：

见这里： [http ://do.whileloop.org/2014/02/14/log4j-rolling-file-appenders-in-windows/](http://do.whileloop.org/2014/02/14/log4j-rolling-file-appenders-in-windows/)

见这里： [https ://issues.apache.org/bugzilla/show_bug.cgi?id=29726](https://issues.apache.org/bugzilla/show_bug.cgi?id=29726)

还有这里： http: [//www.coderanch.com/t/424837/java/java/Log-log-file-rolled-day](http://www.coderanch.com/t/424837/java/java/Log-log-file-rolled-day)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-08T16:26:41.097

我遇到了同样的问题，并根据[这个讨论通过将 log4j 更新到版本 1.2.15 来修复它](https://issues.apache.org/bugzilla/show_bug.cgi?id=29726#c10)

# android - Android：尝试让按钮播放音频，但使用 create(context, int) 时出现错误

> ID：13410190
> 
> 赞同：0
> 
> 时间：2012-11-16T04:01:05.190
> 
> 标签：android, media-player

我正在制作一个应用程序，按下它时播放噪音的按钮是什么，我将音频 .mp3 文件存储在我的 res/raw 目录中，但在我的创建下有一个错误。它说“MediaPlayer 类型中的方法 create(Context, int) 不适用于参数 (new View.OnClickListener(){}, int)”。

我的代码看起来像这样

```
import android.media.MediaPlayer;

private MediaPlayer mp;

        but_play = (Button)  findViewById(R.id.play_but);

    but_play.setOnClickListener(new View.OnClickListener() {
        public void onClick(View arg0) {

            if (rot < 45 && rot > -45) {
                Toast.makeText(getApplicationContext(),
                        "the Cow says moo!",
                        Toast.LENGTH_SHORT).show();
                mp = MediaPlayer.create(this, R.raw.cow);
                mp.start(); 
```

else if 其他动物的陈述从这里继续

请帮忙！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T04:14:49.313

在这一行中，您传递的`this`是对 的引用`View.onClickListener`，它所期望的是`Context`。

```
mp = MediaPlayer.create(this, R.raw.cow); 
```

尝试将其更改为：

```
mp = MediaPlayer.create(getApplicationContext(), R.raw.cow); 
```

# c# - 在 Parallel.For 或 Parallel.ForEach 周围使用 StopWatch 是否有任何问题？

> ID：13410196
> 
> 赞同：0
> 
> 时间：2012-11-16T04:01:44.737
> 
> 标签：c#, wpf, stopwatch, parallel.foreach

我在 WPF 应用程序中使用这个逻辑。我看到执行在 3 秒内完成（来自数据库），但由于某种原因，秒表打印出 17 秒或更长时间。

Parallel.For 块中的代码进行大量计算并写入数据库。所以在视觉上，我的意思是从数据库中选择查询。

```
Stopwatch stopwatch = new Stopwatch();

            // Begin timing
            stopwatch.Start();

            String currentTime = System.DateTime.Now.ToString();
            statusLabel.Dispatcher.Invoke(System.Windows.Threading.DispatcherPriority.Background,
                 new Action(delegate() { statusLabel.Content = "New Minute data processing..." + currentTime; }));

            int size = NumSymWatching;

            Parallel.For(0, size, x =>
             {
               CalculateStudies(SymbolsToWatch[x], SymbolSessions[x]);
              });

            UpdateApplicationStatusTable();
            stopwatch.Stop();

            statusLabel.Dispatcher.Invoke(System.Windows.Threading.DispatcherPriority.Background,
                 new Action(delegate() { lblTimer.Content = "Time taken to run: " + stopwatch.Elapsed; }));
            isRunning = false; 
```

**编辑** 经过几次测试，我发现在 Parallel.For 循环周围使用秒表没有问题。

# python - Heroku 在虚拟环境上安装 PIL 依赖项时出错

> ID：13410197
> 
> 赞同：1
> 
> 时间：2012-11-16T04:01:46.983
> 
> 标签：python, django, heroku, python-imaging-library

我在将我的 Django 应用程序推送到 Heroku 时遇到问题。安装 PIL 似乎有错误。传统上，我在 Windows 上遇到了 PIL b/c 问题，因此使用 pip install 或 easy_install 不起作用，因为它找不到“vcvarsall.bat”

所以作为一个快速的解决方案，我去了[这个站点](http://www.lfd.uci.edu/~gohlke/pythonlibs/)并运行了 PIL 的 .exe 版本来安装。我在将 PIL 放到我的虚拟环境中时遇到问题，所以在创建虚拟环境时，我使用它

```
virtualenv --system-site-packages venv 
```

现在我正在使用

```
git push heroku master 
```

我要拿回这个

```
Downloading/unpacking PIL==1.1.7 (from -r requirements.txt)
Could not find any downloads that satisfy the requirement PIL==1.1.7 (line 2))
...
Heroku push rejected, failed to compile Python/Django app
! [remote rejected] m aster -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com...' 
```

我怎样才能通过 PIL？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T04:14:00.947

我记得在 pip 查找 PIL 时遇到了这个问题。尝试在 requirements.txt 中使用这一行而不是 PIL=1.1.7

[http://effbot.org/media/downloads/Imaging-1.1.7.ta​​r.gz](http://effbot.org/media/downloads/Imaging-1.1.7.tar.gz)

此外，您始终可以从 requirements.txt 中删除任何模块，并将其替换为 Django 根目录中的模块代码副本。

例如，使用 PIL 的东西，您可以使用该链接下载代码，解压缩，然后将生成的 Imaging-1.1.7 文件夹中的 PIL 粘贴到您的 Django 项目根目录中。本来也一样。

通常，您希望尽可能避免这种情况，因为它会增加代码部署的大小，但您可以做到。它将帮助您解决这些问题，因此您至少现在可以继续工作。

包含代码而不是仅仅使用 requirements.txt 实际上可能更可取的一种情况是，当您使用文档不足的库或模块时，您希望立即快速访问源代码在你的编辑器里面。可能不会在生产服务器上执行此操作，但对于开发人员来说可能非常方便。

# php - Codeigniter 未识别索引

> ID：13410199
> 
> 赞同：0
> 
> 时间：2012-11-16T04:02:01.137
> 
> 标签：php, arrays, codeigniter, indexing

我有一个函数`foo`，它返回一个具有以下结构的数组，我正在努力解决是否有更好的方法来构建我的 PHP，因为我不确定 foreach 中的索引，因为我想要每个`ListingId`

**目标：**

我想编写一个从外部 XML 文档`foreach`中获取 XML 的循环`<Name>`（尚未编写此部分，因为我需要将`ListingID`from传递`foo`到 url 以获取`<Name>`）

**PHP：**

```
 $test0 = $this->foo();
    $test = $test0[0]['ListingId']; 
```

**结构：**

```
Array ( [0] => Array ( [ListingId] => SimpleXMLElement Object ( [0] => 532712629 ) [ListingCategory] => SimpleXMLElement Object ( [0] => 0350-5748-3400- ) ) [1] => Array ( [ListingId] => SimpleXMLElement Object ( [0] => 532712202 ) [ListingCategory] => SimpleXMLElement Object ( [0] => 0350-5748-3400- ) ) [2] => Array ( [ListingId] => SimpleXMLElement Object ( [0] => 532711566 ) [ListingCategory] => SimpleXMLElement Object ( [0] => 0350-5748-3400- ) ) [3] => Array ( [ListingId] => SimpleXMLElement Object ( [0] => 532710864 ) [ListingCategory] => SimpleXMLElement Object ( [0] => 0350-5748-3400- ) ) [4] => Array ( [ListingId] => SimpleXMLElement Object ( [0] => 532710271 ) [ListingCategory] => SimpleXMLElement Object ( [0] => 0350-5748-3400- ) ) [5] => Array ( [ListingId] => SimpleXMLElement Object ( [0] => 532691526 ) [ListingCategory] => SimpleXMLElement Object ( [0] => 0350-5748-3400- ) ) [6] => Array ( [ListingId] => SimpleXMLElement Object ( [0] => 527496168 ) [ListingCategory] => SimpleXMLElement Object ( [0] => 0350-5748-3399- ) ) ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T04:27:46.780

试试这个方法：

```
foreach($this->foo() as $foo) {
   //here you can use your ListingId
   var_dump($foo['ListingId']);
} 
```

# php - 我得到一个空白的动态 html 表

> ID：13410204
> 
> 赞同：0
> 
> 时间：2012-11-16T04:02:16.017
> 
> 标签：php, jquery, html, mysql

我正在尝试创建动态 html 表，但问题是它没有在表中显示任何数据。我知道查询是正确的，因为我在 sql 中测试了查询并输出了数据。我猜的问题是动态 html 表本身。下面是代码：

JavaScript/JQuery：

```
//javascript below will perform calculation between adding numbers between text inputs per each question
//answer for each calculation per question is stored under "Total Marks Remaining" Column
/*If a question only has one answer, then the text input under the "Marks Per Answer" column becomes
read only and displays the same number as the total marks under the "Total Marks Remaining" column
for that question*/

$(function() {   
    //alert("here");         
    var questions = $('#markstbl td[class*="_ans"]').length-1;

    //disable single entry
    for (var i=0;i<=questions;i++){   
        if($("[class*=q"+i+"_mark]").length ==1){
            var t_marks = $("[class*=q"+i+"_ans]").html();
            //alert(t_marks);
            $("[class*=q"+i+"_mark]").val(t_marks).attr("disabled","disabled");
            //$("[class*=q"+i+"_mark]").attr("disabled","disabled");
        }                    
    }

    //find each question set and add listeners
    for (var i=0;i<=questions;i++){                                     
        $('input[class*="q'+i+'"]').keyup(function(){
            var cl = $(this).attr('class').split(" ")[1]
            var questionno = cl.substring(cl.indexOf('q')+1,cl.indexOf('_'));
            var tot_marks = $(".q"+questionno+"_ans_org").val();
            //alert(tot_marks);
            var ans_t=0;
            $("[class*=q"+questionno+"_mark]").each(function(){
                var num = (isNaN(parseInt($(this).val())))?0:parseInt($(this).val());
                ans_t+=parseInt(num);                             
            });
            ans_t=tot_marks-ans_t;                             
            //alert(ans_t);
            //var fixedno = tot_marks;
            var ans = (parseInt(ans_t)<0)?tot_marks:ans_t;
            $(".q"+questionno+"_ans").val(ans);
            $(".q"+questionno+"_ans_text").html(ans);
        });
    }
});

</script> 
```

PHP：

```
 <?php

if (isset($_POST['id'])) {

$_SESSION['id'] = $_POST['id'];

}

$assessment = $_SESSION['id'];
    include('connect.php');

    $query = "SELECT q.SessionId, s.SessionName, q.QuestionId, q.QuestionContent, an.Answer, q.QuestionMarks 
    FROM Session s 
    INNER JOIN Question q ON s.SessionId = q.SessionId
    JOIN Answer an ON q.QuestionId = an.QuestionId AND an.SessionId = q.SessionId
    WHERE s.SessionName = ?
    ORDER BY q.QuestionId, an.Answer";

    // prepare query
    $stmt=$mysqli->prepare($query);
    // You only need to call bind_param once
    $stmt->bind_param("s", $assessment);
    // execute query
    $stmt->execute(); 

    // This will hold the search results
    $searchQuestionId = array();
    $searchQuestionContent = array();
    $searchAnswer = array();
    $searchMarks = array();

    // Fetch the results into an array

    // get result and assign variables (prefix with db)
    $stmt->bind_result($dbSessionId, $dbSessionName, $dbQuestionId, $dbQuestionContent, $dbAnswer, $dbQuestionMarks);
    while ($stmt->fetch()) {
        $searchQuestionId[] = $dbQuestionId;
        $searchQuestionContent[] = $dbQuestionContent;
        $searchAnswer[] = $dbAnswer;
        $searchMarks[] = $dbQuestionMarks;
    }?> 
```

HTML：

```
<form id="Marks" action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post">
<table border='1' id='markstbl'>
    <thead>
        <tr>
            <th class='questionth'>Question No.</th>
            <th class='questionth'>Question</th>
            <th class='answerth'>Answer</th>
            <th class='answermarksth'>Marks per Answer</th>
            <th class='noofmarksth'>Total Marks</th>
        </tr>
    </thead>
    <?php
    $row_span = array_count_values($searchQuestionId);
    $prev_ques = '';
    foreach($searchQuestionId as $key=>$questionId){?>
        <tbody>   
            <tr class="questiontd">
            <?php
            if($questionId != $prev_ques){?>
                <td class="questionnumtd" name="numQuestion" rowspan="<?=$row_span[$questionId]?>"><?=$questionId?> <input type="hidden" name="q<?=$questionId?>_ans_org" class="q<?=$questionId?>_ans_org" value="<?=$searchMarks[$key]?>"><input type="hidden" name="q<?=$questionId?>_ans" class="q<?=$questionId?>_ans" value="<?=$searchMarks[$key]?>"></td>
                <td class="questioncontenttd" rowspan="<?=$row_span[$questionId]?>"><?=$searchQuestionContent[$key]?> </td>
            <?php
            }else{?>
                <td class="questionnumtd" name="numQuestion" ></td>
                <td class="questioncontenttd" ></td>
            <?php
            }?>
                <td class="answertd" name="answers[]"><?=$searchAnswer[$key]?></td>
                <td class="answermarkstd">
                <input class="individualMarks q<?=$questionId?>_mark_0"  q_group="1" name="answerMarks[]" id="individualtext" type="text" />
                </td>
            <?php
            if($questionId != $prev_ques){?>
                <td class="noofmarkstd q<?=$questionId?>_ans_text"  q_group="1" rowspan="<?=$row_span[$questionId]?>"><?=$searchMarks[$key]?></td>
            <?php
            }else{?>
                <td class="noofmarkstd"  q_group="1"></td>
            <?php
            }?>
            </tr>
        <?php
        $prev_ques = $questionId;
    }?>
    </tbody>
</table>
</form> 
```

下面是它显示的屏幕截图：

![空表](../Images/1b5f90d16e5ecb00ba6ab1b1626534a7.png)

以下是表格应显示的内容（每个答案列的标记包含每行的文本输入）

![桌子应该是什么样子](../Images/75dbb48eaca3c8e7545edd386a48eb47.png)

以下是数据库设计，因此您可以查看数据的来源：

**会话表：（**存储考试详细信息的位置）

```
SessionId  SessionName
1          AAA 
```

**问题表：（**存储每个考试的问题）

```
SessionId   QuestionId       QuestionContent                Total Marks
1                 1          Name three features in a ROM        5 
1                 2          Here is a single answer             5 
```

**答案表：（**存储每个考试中每个问题的答案）

```
AnswerId(auto)  SessionId QuestionId  Answer
1               1         1           A
2               1         1           B
3               1         1           D
4               1         2           True 
```

**Individual_Answer 表：（**存储每个单独答案的每个单独标记）

```
AnswerId   AnswerMarks
1          2
2          2
3          1
4          5 
```

更新：

查看我的 html 代码，为什么它显示如下表格：

![表格显示不正确](../Images/082d87b6aca96682bf754ec0fce466c1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T04:15:33.090

`<?php`之前检查缺少的 php 打开标记`include('connect.php');`

还要避免使用短标签`<?=`并将其替换为`<?php echo`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T04:05:36.920

放置`<tbody>`在 foreach 循环之外

```
foreach($searchQuestionId as $key=>$questionId){

?>
<tbody> 
```

至

```
</thead>
<tbody>
....
....

foreach($searchQuestionId as $key=>$questionId){

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T04:13:36.013

除非这里没有显示一些代码，否则可能就像没有设置 $assesment 变量一样简单，所以没有任何东西被发送到查询？

此外，为了确认您实际上得到了返回结果并将它们绑定好，我将对像 searchQuestionContent 这样的数组进行 var_dump 以确保它们具有您期望的内容，如果没有，您知道您的问题出在查询/绑定数据。如果它们确实具有您期望的内容，那么您就知道问题出在表输出中。

# user-interface - Ember：避免内容更改时 UI 闪烁

> ID：13410207
> 
> 赞同：6
> 
> 时间：2012-11-16T04:02:38.340
> 
> 标签：user-interface, ember.js

我有一个 ArrayController 有一些内容（比如 10 个对象的数组）和一个 View 呈现所有 ArrayController 元素的列表。

现在，当内容发生变化时，视图会被清空，然后重新构建。这会导致 UI 闪烁。这种闪烁对眼睛有刺激性。

那么关于如何解决此类问题或尽量减少副作用的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T16:32:49.960

我发现如果在模板中我做类似的事情

```
{{#each controller.content}}
  {{contentAttribute}}
{{/each}} 
```

然后我得到一个闪烁。但是，如果我只是在我的模板中使用 ArrayController 本身，我不会得到闪烁：

```
{{#each controller}}
  {{contentAttribute}}
{{/each}} 
```

# c# - 创建一个与 SQL 数据库交互的类

> ID：13410210
> 
> 赞同：4
> 
> 时间：2012-11-16T04:03:20.207
> 
> 标签：c#, oop, class, methods

我熟悉编程中的主要面向对象概念，目前我正在自学如何设计课程。

我有一个非常简单的类，叫做 Company。这是我到目前为止的代码

```
using System;

namespace Addressbook
{
    public class Company
    {
        private string _companyId;
        private string _companyName;
        private string _companyType;
        private string[] _companyDetails;

        public Company()
        {

        }

        public string CompanyId
        {
            set
            {
                this._companyId = value;
            }
        }

        public string CompanyName
        {
            set
            {
                this._companyName = value;
            }
        }

        public string CompanyType
        {
            set
            {
                this._companyType = value;
            }
        }

        public string[] GetCompanyDetails()
        {

            return null;
        }

    }
} 
```

我现在要做的是实现一些方法，这就是我迷失的地方。

我想到的第一个方法被称为`GetCompanyDetails()`从 SQL 数据库收集数据然后显示它。可能在 DataGridView 或其他东西中。

我的问题是我无法弄清楚我应该如何编写这个方法。我是否将所有 SQL 查询和连接放入其中？还是我只是将它们的实例作为参数传递？我应该从该方法返回什么类型？

有人可以给我一些指导吗？

此外，如果您有任何关于此主题的优秀教程/指南的链接，请也发布它们。

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T09:38:06.787

创建类，代表表中的记录

```
public class Company
{       
    public string CompanyId { get; set; }
    public string CompanyName{ get; set; }
    public string CompanyType{ get; set; }       
} 
```

[使用Dapper](http://code.google.com/p/dapper-dot-net/)获取并映射它：

```
public IEnumerable<Company> GetCompanies()
{
   using (var connection = new SqlConnection(connectionString))
   {
       connection.Open();
       return connection.Query<Company>("SELECT * FROM Companies");
   }
} 
```

如果您不想处理 ADO.NET，请查看重量级的 ORM，例如 Linq 2 Sql、Entity Framework、NHibernate。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-16T09:29:25.800

查看“数据源架构模式”部分中的模式：[http](http://martinfowler.com/eaaCatalog/index.html) ://martinfowler.com/eaaCatalog/index.html 。ActiveRecord 模式可能是您需要的，尽管您最终可能会选择 DataMapper/ORM 路线。

本着敏捷精神，我最初会保持连接和事务管理非常简单。也许只是这个类中的一个私有函数。然后我会让每个方法在 SQL 或 SP 中定义它的查询并执行它并对结果做一些事情。这将数据访问逻辑保持在适当的位置。

您可能希望使您的“getter”函数共享/静态，以便不需要实例即可开始。然后你可以写这样的东西：

```
var companies = Company.GetCompanyDetails(); 
```

虽然超级简单，但这种方法可以让您继续前进，同时仍然允许您扩展范围。一旦事情开始变得更加复杂，这种方法将被证明过于简单。此时，您需要扩展和重构考虑更健壮的连接/事务管理、对象创建和查询。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-16T04:30:33.963

首先，你的代码太长太老了。你的代码应该是这样的

```
public class Company
{       
        public string CompanyId { get; set; }
        public string CompanyName{ get; set; }
        public string CompanyType{ get; set; }       
} 
```

创建此类时，意味着您创建了一个`Company`具有 3 个字段的对象；

`Company.CompanyId`, `Company.CompanyName`,`Company.CompanyType`

因此，您现在要做的就是连接到 SQL 服务器，执行查询以从数据库中获取数据并填写对象公司。

例子 ：

```
class myConnection
    {
        public static SqlConnection GetConnection()
        {
            var company = new Company();
            string str = "Data Source=localhost/serer Ip;Initial Catalog = YourDatabaseName;uid =sa;pwd = YourPassword";

            SqlConnection con = new SqlConnection(str);          
            SqlCommand cmd = new SqlCommand("SELECT * FROM Company WHERE CompanyID = 1", conn);
            SqlDataReader reader = cmd.ExecuteReader();
            while (reader.Read())
            {
                Company.CompanyId = reader["CompanyID"];
                Company.CompanyName = reader["Name"];
                Company.CompanyType = reader["Type"];
            }
        }
    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-16T05:17:21.267

首先，我建议您检查这个问题：[Using an ORM or plain SQL?](https://stackoverflow.com/questions/494816/using-an-orm-or-plain-sql) . 如果您不打算执行异国情调和繁重的查询，ORM 是您的首选

我更喜欢实体框架，但您可以选择其中任何一个。

然后，如果您想更深入，请查看存储库和工作单元模式。有一篇关于在 .net 中实现它们的好文章：[实现存储库和工作单元模式](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and-unit-of-work-patterns-in-an-asp-net-mvc-application)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-12T19:07:18.053

我的自制 ADO 对象映射器：构建一个简单的类，

```
public class Company
{       
    public string CompanyId { get; set; }
    public string CompanyName{ get; set; }
    public string CompanyType{ get; set; }       
} 
```

使用此方法进行对象映射：

```
public List<T> GetData<T>(string SQL, CommandType commandType, string ConnectionString) 
{
    var objProps = Activator.CreateInstance<T>().GetType().GetProperties();
    var returnList = new List<T>();
    using (SqlConnection con = new SqlConnection(ConnectionString)) {
        using (SqlCommand cmd = new SqlCommand(SQL, con)) {
            cmd.CommandType = commandType;
            cmd.CommandTimeout = 30000;
            try
            {                  
                con.Open();
                SqlDataReader reader = cmd.ExecuteReader();
                var columns = reader.GetSchemaTable().Rows.Cast<DataRow>().Select(row => row["ColumnName"].ToString().ToLower()).ToList();
                while (reader.Read())
                {
                    var thisRow = Activator.CreateInstance<T>();
                    foreach (var prop in objProps)
                    {                         
                        if (columns.Contains(prop.Name.ToLower()))
                        {
                            prop.SetValue(thisRow, reader[prop.Name]);
                        }
                    }
                    returnList.Add(thisRow);
                }
            }
            catch (Exception ex)
            {
                throw ex;
            }
            finally {
                if (con.State != ConnectionState.Closed)
                {
                    con.Close();
                }
            }
        }
    }
    return returnList;
} 
```

像这样调用方法：

```
var companyInfo = GetData<Company>("ProcName", CommandType.StoredProcedure, "con-str"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-04-27T02:57:43.680

```
String conString = ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString;
OracleConnection con = new OracleConnection(conString);
string cmdStr = @" SELECT * FROM TABLE WHERE ROW = :param";
OracleCommand cmd = new OracleCommand(cmdStr, con);
OracleDataAdapter da = new OracleDataAdapter(cmd);
da.SelectCommand = cmd;
cmd.Parameters.Add("param", "yourValueHere");

DataSet ds = new DataSet("dataSet");
da.Fill(ds, "dataAdapter");
return ds; 
```

是实现数据库类的好方法。还记得用

```
[DataObjectMethod(DataObjectMethodType.Select, true)] 
```

如果您希望它可以在您的 WPF 中实现。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2017-11-02T11:17:07.030

在下面使用我们作为类文件使用的：

```
/// <summary>
/// Open the Connection when creating the Object
/// </summary>
class DataAccess
{
    public SqlConnection sqlConn ;
    public int gConnTimeOut = 0 ;

    public DataAccess()
    {
        string strConn = "";            

        Classes.GlobVaribles objConStr = Classes.GlobVaribles.GetInstance();
        strConn = objConStr.gConString;
        gConnTimeOut = objConStr.gQueryTimeOut;

        if (strConn == "")
        {
            XmlAccess XmlFile = new XmlAccess();
            strConn = XmlFile.Xml_Read("gConStr");
            gConnTimeOut = int.Parse(XmlFile.Xml_Read("gQueryTimeOut"));

            objConStr.gConString = strConn;
            objConStr.gQueryTimeOut = gConnTimeOut;
        }

        sqlConn =  new SqlConnection(strConn);            
        sqlConn.Open();
    }

    /// </summary>
    /// Can use to select one value from SELECT statment
    /// </summary>
    public string SQLER(string strSQL)
    {
        if (sqlConn.State.ToString() == "Closed") { sqlConn.Open(); }

        strSQL = SQLFormat(strSQL);
        SqlCommand sqlCmd = new SqlCommand(strSQL, sqlConn);

        string strResult = sqlCmd.ExecuteScalar().ToString();
        sqlCmd.Dispose();

        return strResult;

    }

    /// </summary>
    /// Return Data Set        
    /// </summary>
    public DataSet SQLDT(string strSQL)
    {
        //conn.Close();

        //if (conn.State.ToString() == "Closed") { conn.Open(); }
        if (sqlConn.State.ToString() == "Closed") { sqlConn.Open(); }
        SqlCommand comm = new SqlCommand();
        comm.CommandTimeout = gConnTimeOut;
        SqlDataAdapter adapt = new SqlDataAdapter();
        comm.CommandText = strSQL;
        comm.Connection = sqlConn;
        adapt.SelectCommand = comm;

        DataSet dtset = new DataSet();
        adapt.Fill(dtset);
        return dtset;

    }

   /// <summary>
    /// Can use for Execute SQL commands (Insert/Delete/Update)
    /// </summary>
    public int SQLCX(string strSQL)
    {
        try
        {
            if (sqlConn.State.ToString() == "Closed") { sqlConn.Open(); }

            strSQL = SQLFormat(strSQL);
            SqlCommand sqlCmd = new SqlCommand(strSQL, sqlConn);
            sqlCmd.CommandTimeout = gConnTimeOut;
            int intResult = sqlCmd.ExecuteNonQuery();
            sqlCmd.Dispose();

            return intResult;
        }
        catch (Exception objError)
        {
            MessageBox.Show("System Error - " + objError.Message.ToString(),"Application Error",MessageBoxButtons.OK,MessageBoxIcon.Error );
            return -1;
        }

    }

    /// <summary>
    /// Returns a SQL DataReader
    /// </summary>       
    public SqlDataReader DataReader(string strSQL)
    {
        if (sqlConn.State.ToString() == "Closed") { sqlConn.Open(); }
        strSQL = SQLFormat(strSQL);
        SqlCommand sqlCmd = new SqlCommand(strSQL, sqlConn);
        SqlDataReader dataRed = null;

        dataRed = sqlCmd.ExecuteReader(CommandBehavior.CloseConnection);
        sqlCmd.Dispose();
        return dataRed;
    }

    /// <summary>
    /// Retrun the No of Records
    /// </summary>
    public int GetNumOfRec(string strSQL)
    {
        /// Use for get No of Records in SELECT command
        try
        {
            int intResult = -1;
            if (sqlConn.State.ToString() == "Closed") { sqlConn.Open(); }

            strSQL = SQLFormat(strSQL);
            SqlCommand sqlCmd = new SqlCommand(strSQL, sqlConn);
            intResult = (int)sqlCmd.ExecuteScalar();
            sqlCmd.Dispose();

            return intResult;
        }
        catch (Exception objError)
        {
            MessageBox.Show("System Error - " + objError.Message.ToString(), "Application Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
            return -1;
        }
    }

    /// </summary>
    /// Fill Listview 
    /// </summary>
    public void ListViewFill(string strSQL, System.Windows.Forms.ListView lstView)
    {
        if (sqlConn.State.ToString() != "Open") { sqlConn.Open(); }
        SqlDataAdapter adapter = new SqlDataAdapter(strSQL, sqlConn);            
        DataSet ds = new DataSet("glorders");
        adapter.SelectCommand.CommandTimeout = gConnTimeOut;
        adapter.Fill(ds, "glorders");

        DataTable dt = ds.Tables[0];
        int colCount = dt.Columns.Count;

       lstView.Items.Clear();
       Color shaded = Color.FromArgb(240, 240, 240);
       int j = 0;

        foreach (DataRow row in dt.Rows)
        {
            string[] subitems = new string[colCount];

            object[] o = row.ItemArray;

            for (int i = 0; i < colCount; i++)
            {
                subitems[i] = o[i].ToString();                      
            }

            ListViewItem item = new ListViewItem(subitems);
            lstView.Items.Add(item);

            if (j++ % 2 == 1)
            {
                item.BackColor = shaded;
                item.UseItemStyleForSubItems = true;
            }
        }

        dt.Dispose();
        ds.Dispose();
        adapter.Dispose();
    }

    /// </summary>
    /// Fill ComboBox
    /// </summary>
    public void ComboFill(string strSQL, System.Windows.Forms.ComboBox dbCombo)
    {
        SqlDataReader dbReader = null;
        dbReader = DataReader(strSQL);
        dbCombo.Items.Clear();
        while (dbReader.Read()) { dbCombo.Items.Add(dbReader[0].ToString().Trim()); }
        dbReader.Dispose();
    }

    private string SQLFormat(string strSQL)
    {
        strSQL = strSQL.Replace("\r", " ");
        strSQL = strSQL.Replace("\n", " ");
        strSQL = strSQL.Replace("\t", " ");
        strSQL = strSQL.Replace("  ", " ");
        return strSQL;
    }
} 
```

# c++ - 为什么 c++ 实例在通过 Objective-c 类调用时会自动调用构造函数和析构函数？

> ID：13410211
> 
> 赞同：2
> 
> 时间：2012-11-16T04:03:35.930
> 
> 标签：c++, objective-c, objective-c++

我有个问题：

我没有明确地“ `new`”和“ `delete`”我的 C++ 实例，但是当 Objective-C 类初始化时它会自动调用“ `new`”和“ ”。`delete`任何想法？

```
class myCppTestClass
{
public:
    myCppTestClass()
    {
        NSLog(@"MyCpp constructor");
    }

    ~myCppTestClass()
    {
        NSLog(@"MyCpp destructor");
    }
};

@interface MyTestClass : NSObject
{
    myCppTestClass myCppInstance;
}

@end

@implementation MyTestClass

@end 
```

我这样称呼它：

```
NSLog(@"Create an object.");
MyTestClass *objcObject = [[MyTestClass alloc] init];
NSLog(@"Object created");
[objcObject release];
objcObject = nil;
NSLog(@"Object released."); 
```

然后我运行它，日志是这样的：

```
2012-11-16 12:01:18.747 iOSVersion[87248:f803] Create an object. 
2012-11-16 12:01:18.749 iOSVersion[87248:f803] MyCpp constructor
2012-11-16 12:01:18.750 iOSVersion[87248:f803] Object created
2012-11-16 12:01:18.751 iOSVersion[87248:f803] MyCpp destructor
2012-11-16 12:01:18.752 iOSVersion[87248:f803] Object released. 
```

这与自动引用计数无关，因为它已关闭，有什么想法吗？太感谢了。

同样，如果 MyTestClass 是这样的，构造函数和析构函数将不会被调用：

```
@interface MyTestClass : NSObject
{
    myCppTestClass * myCppInstance;
} 
```

和日志：

```
2012-11-16 12:22:38.710 iOSVersion[87428:f803] Create an object.
2012-11-16 12:22:38.711 iOSVersion[87428:f803] Object created
2012-11-16 12:22:38.712 iOSVersion[87428:f803] Object released. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T04:11:15.810

该语言不适合你`new`，`delete`但它调用构造函数和析构函数。这是 C++ 的标准行为：当您直接或间接地创建一个对象时，所包含对象的构造函数会被调用；同样，当包含对象被释放时，所有包含实例的析构函数也会被调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T04:14:02.487

`new`在 C++中`delete`不用于创建对象，它们用于在新分配的 RAM 区域中创建对象。`myCppInstance`的数据不是在堆上分配的，它实际上是`MyTestClass`. 当您的代码创建一个`MyTestClass`对象时，它将包含一个已构建的`myCppTestClass`.

同样，如果您创建一个`myCppTestClass`变量，则该类的数据基本上是免费分配在堆栈上的。它在声明它的范围的末尾被释放（即使有异常）。

使用`new`and `delete`，您将获得一个指向对象的指针，并且您负责管理它的生命周期。如果您刚刚开始学习 C++，您可能希望完全避免使用它们。在现代 C++ 中，最好使用`make_shared`代替`new`，并且“从不”使用`delete`.

* 除非您使用的是新展示位置

# ip - 如何在不损坏标头的情况下更改 ip 标头中的 tos 位

> ID：13410212
> 
> 赞同：3
> 
> 时间：2012-11-16T04:03:38.287
> 
> 标签：ip, kernel-module

如何更改 ip 标头中 tos 位的值？我尝试使用 iphdr 结构直接修改它。它是在内核级别使用 netfilter 完成的。我写的代码如下：

```
// Including the required header files

#include <linux/kernel.h>
#include <linux/module.h>
#include <linux/netfilter.h>
#include <linux/netfilter_ipv4.h>
#include <linux/init.h>
#include <linux/kthread.h>
#include <linux/signal.h>
#include <linux/errno.h>
#include <linux/sched.h>
#include <linux/wait.h>
#include <linux/types.h>
#include <linux/netdevice.h>
#include <linux/ip.h>
#include <linux/tcp.h>
#include <linux/in.h>
#include <linux/inet.h>
#include <linux/delay.h>
#include <linux/string.h>
#include <linux/socket.h>
#include <linux/net.h>
#include <net/sock.h>
#include <asm/processor.h>
#include <asm/uaccess.h>
#include <linux/file.h>
#include <linux/fs.h>
#include <linux/stat.h>
#include <linux/proc_fs.h>

// Defining the name of the module
#define MODULE_NAME "TOS_setter"

// Structure definition for processing outgoing packets
static struct nf_hook_ops nf_ops_out;

//===========================================================
// Function that modifies the TOS bits
unsigned int tos_setter(unsigned int hooknum,struct sk_buff *skb, const struct net_device *in,
                        const struct net_device *out,int (*okfn)(struct sk_buff*))
{
struct iphdr *iph;
unsigned char tosbits;

if (!skb)return NF_ACCEPT;

iph = ip_hdr(skb);

if (!iph)return NF_ACCEPT;
//if(iph->protocol==IPPROTO_TCP)return NF_ACCEPT;

if (iph->protocol==IPPROTO_TCP)
    { 
printk(KERN_ALERT " The total length is : %d\n" , (int)iph->tot_len);
iph->tos = tosbits | (unsigned char)2;
tosbits = iph->tos;
printk(KERN_ALERT " The tos bits are : %d\n" , (int)tosbits);
printk(KERN_ALERT " The total length is : %d\n" , (int)iph->tot_len);
}
return NF_ACCEPT;
}

//===========================================================
//Initialisation function
static int __init init(void){

   printk(KERN_ALERT " Initialization Started \n");

// Initialize Hook Functions
   nf_ops_out.hook = tos_setter;
   nf_ops_out.pf = PF_INET;
   nf_ops_out.hooknum =4;
   nf_ops_out.priority = NF_IP_PRI_FIRST; 
// Register the Hook functions   
   nf_register_hook(&nf_ops_out);
   printk(KERN_ALERT "hook functions registered\n");

   printk(KERN_ALERT " KSTAT Initialization Completed \n");
   return 0;
}

static void __exit cleanup(void){

  printk(KERN_ALERT "KSTAT Exit Started\n");

// Unregister the hook functions
  nf_unregister_hook(&nf_ops_out);
  printk("Unregistered the hooks\n");

  printk(KERN_ALERT "KSTAT Exit Completed\n");
}  

/* init and cleanup functions */
module_init(init);
module_exit(cleanup);

MODULE_LICENSE("GPL"); 
```

问题是，当我尝试更改 tos 位的值时，我的互联网停止工作。还有其他方法吗，或者如果有人可以指出我做错了什么，那将非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T16:29:57.607

更改标头中的任何内容后，您必须重新计算 IP 标头校验和。

请参阅 WP：[http](http://en.wikipedia.org/wiki/IPv4_header_checksum) ://en.wikipedia.org/wiki/IPv4_header_checksum 代码在这里：[如何计算 RFC 791 IP 标头校验和？](https://stackoverflow.com/q/1962746/1045800)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T17:04:07.553

您可以使用增量IP校验和，即：由于IP校验和*是*一个和，您可以减去旧值并添加新值。Linux`csum_replace*()`通过`net/checksum.h`. 做就是了：

```
csum_replace2(&iph->check, htons(oldtos), htons(iph->tos)); 
```

# oracle - 触发器中的错误消息错误绑定变量

> ID：13410214
> 
> 赞同：2
> 
> 时间：2012-11-16T04:03:48.823
> 
> 标签：oracle, plsql, triggers

我正在尝试编写一个触发器来验证客户/地址在插入之前是否存在，但我遇到了一些错误。能就此提出建议吗？

下表是：
客户 (CustID,CustName,DOB)

```
CREATE OR REPLACE TRIGGER CREATEACCOUNT
  BEFORE INSERT ON ACCOUNT
  FOR EACH ROW 
DECLARE
  newCustID     varchar(10);
  newPostCode   int;
  newStreet     char;
  newAccType    varchar(15);
  newAccStatus  char(9);
  newAccBalance int;
  varRowCount   int;
BEGIN

  newCustID := :new.CustID;

  SELECT COUNT(*) 
    INTO varRowCount
    FROM Customer
   WHERE CustID = newCustID;

  IF (varRowCount > 0) THEN 
    RETURN;
  END IF;

  IF (varRowCount = 0) THEN
    BEGIN
      INSERT INTO CUSTOMER VALUES (newCustID,:new.CustName,:new.DOB);
    END;
  END IF;
END; 
```

以下是错误消息：
错误（27,46）：PLS-00049：错误绑定变量“NEW.CUSTNAME”
错误（27,60）：PLS-00049：错误绑定变量“NEW.DOB”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T04:15:26.537

触发器是在`ACCOUNT`表上定义的。您已经发布了`CUSTOMER`表的定义。除非`ACCOUNT`表有列`CustName`和`DOB`，这似乎不太可能，否则您不能引用`:new.CustName`or `:new.DOB`--`:new`记录是当前插入`ACCOUNT`表中的行。

您打算在哪里获取`CustName`and`DOB`插入`Customer`表中？

退后一步，为什么`Account`表上的触发器首先尝试将行插入`Customer`表中。这似乎是一个非常糟糕的设计。表`CustID`中的`Account`可能是引用该`Customer`表的外键。但是，这意味着，如果您将约束声明为可延迟并在每个事务开始时延迟它们，您只能在触发器中插入父行。触发器通常也无法确定`Customer`您要填充的列的信息，这是您遇到的错误的来源。

# audio - Tumblr 音频帖子不适用于无限滚动

> ID：13410220
> 
> 赞同：0
> 
> 时间：2012-11-16T04:04:07.073
> 
> 标签：audio, blogs, tumblr, infinite-scroll

首先，我对 html 代码一无所知，我试图找到一个简单的解决方法来解决我的问题，但在这里我无法理解其中的任何一个。我最近为我的博客上传了一个新主题，但是当我选择无限滚动选项时，音频帖子不起作用。它只是说需要 Flash 9。请通过一些简单的解释帮助我解决它。谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T18:48:27.150

您需要在 Infinite Scroll 回调中“修复”音频帖子。您需要进入 HTML 或 JS 并自己手动修复此问题。

[Tumblr 音频和视频 + 无限滚动](https://stackoverflow.com/questions/12404807/tumblr-audio-video-infinite-scroll/12481862#12481862)

# emacs - 使用`dict`实用程序在Emacs中搜索光标下单词的含义

> ID：13410223
> 
> 赞同：0
> 
> 时间：2012-11-16T04:04:26.897
> 
> 标签：emacs

嗨，我目前正在阅读一些从古`.txt`腾堡下载的小说格式。我经常遇到一个我不熟悉的单词，我需要在网上查找它。

我最近偶然发现了 Unix`dict`命令行实用程序来搜索单词的含义。它从网络上的多个词典和词库中获取单词的含义。

我想通过以下方式将它与 Emacs 集成。

我想将光标下的单词传递给`dict`并将窗口拆分为两个缓冲区：一个缓冲区包含当前文本文件，另一个缓冲区包含单词的含义。

我将如何为此编写一个 Emacs-Lisp 函数？

`dict *word-being-searched*` 注意：在命令行使用 dict和我在 Ubuntu 11.04 下使用 Emacs-24一样简单

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T06:10:25.627

该`word-at-point`功能可以完成您需要的大部分工作：

```
(require 'thingatpt)

(defun lookup-word-at-point ()
  (interactive)
  (shell-command (format "dict %s" (shell-quote-argument (word-at-point))))) 
```

与 的任何其他调用一样，如果足够短`shell-command`，这将在 minibuffer 中显示 的输出；`dict`否则会弹出一个名为`*Shell Command Output*`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-16T06:14:05.067

`ispell`是你的朋友。`ispell-word`，默认情况下会`M-$`执行此操作。

另见[wordnet.el](http://xwl.appspot.com/ref/wordnet.el)

编辑：正如托马斯指出的那样， ispell 是不合适的。我是我之前提到的 wordnet 的忠实粉丝，您需要[下载](http://wordnet.princeton.edu/wordnet/download/current-version/)该程序。

另一个选项是 dict 命令的接口，例如[在此处输入链接描述](http://www.emacswiki.org/emacs/DictMode)或该页面上列出的替代选项之一。

那里有足够的东西，你不需要自己写东西。

# ruby - Ruby / MongoDB：在查找中排除某些结果

> ID：13410224
> 
> 赞同：1
> 
> 时间：2012-11-16T04:04:36.460
> 
> 标签：ruby, mongodb

我通常使用：

```
@coll.find({"lang"=>@language,"description"=>@description,"location"=>@location},{:limit=>@results_needed}).to_a 
```

但有时我有一个“_ids”数组，我不想包含在结果中。有没有本地方法可以做到这一点？我一直在做黑客，`.delete_if`但我想让数据库做尽可能多的工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T04:19:44.120

关于什么

```
@coll.find(:id.ne => array_of_ids) 
```

或者

```
@coll.find(:id => {:$ne => array_of_ids}) 
```

从不[等于 mongo mapper](https://stackoverflow.com/questions/3541528/not-equals-in-mongo-mapper)。

# asp.net-mvc - mvc dataconnection 以数据表格式传递数据显示

> ID：13410230
> 
> 赞同：1
> 
> 时间：2012-11-16T04:05:43.887
> 
> 标签：asp.net-mvc

```
if (ModelState.IsValid)
            {
                DataTable dt = new DataTable();
                dt = obj_Data.selData();
                if (dt.Rows.Count != 0)
                {
                        string [,] arr1=new string[dt.Columns.Count+1,dt.Rows.Count+1];
                        for (int i = 0; i < dt.Rows.Count; i++)
                        {
                            for (int j = 0; j < 3; j++)
                            {
                                arr1[i,j] = dt.Rows[i][j].ToString();
                            }
                        }
                            return View(arr1);
                    }
                }

            return View(); 
```

我开玩笑地将数据搜索结果以数据表格式传递给控制器​​，我怎样才能显示这个数据或视图？

# javascript - 从所有页面中检索母版页中的脚本（.js）

> ID：13410236
> 
> 赞同：0
> 
> 时间：2012-11-16T04:06:44.623
> 
> 标签：javascript, asp.net, master-pages

我有一个母版页，其中我将 .js 文件的代码编写为：

```
<script src="../../../scripts/jquery-1.8.2.min.js" type="text/javascript"></script> 
```

并且页面是在不同的文件夹结构中创建的。

因此，如果`page`未在文件夹中创建，并且如果它在文件夹之外，则它`javascript`不起作用。

**例如：**

*`master page file:`masterpages/layoutmaster.master*

**页数：**

*页面/文件夹1/default1.aspx*

*页面/文件夹2/default2.aspx*

*默认3.aspx*

根据上面的示例，文件的**default3.aspx**页面`javascript`未访问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T04:20:58.313

通过使用相对路径“../js/script.js”，它将上升到一个文件夹，所以为了防止这种情况，只需使用绝对路径，例如“/js/script.js”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T04:20:05.997

您试图指出您的 javascript 文件，`src` 这`../../../`意味着从当前目录跳出到第三级，这`../`意味着只从当前目录进入文件夹一次。

所以用它作为

```
<script src="/scripts/jquery-1.8.2.min.js" type="text/javascript"></script> 
```

顺便说一句，如果您需要返回两个目录，您将使用`../../`等，依此类推。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T04:17:24.910

而不是像您正在使用的那样使用脚本的相对路径：

```
<script src="../../../scripts/jquery-1.8.2.min.js" type="text/javascript"></script> 
```

使用绝对路径：

```
<script src="/scripts/jquery-1.8.2.min.js" type="text/javascript"></script> 
```

# ruby - Mongo可以实现多线程吗？

> ID：13410240
> 
> 赞同：3
> 
> 时间：2012-11-16T04:06:59.310
> 
> 标签：ruby, mongodb

每当我受 CPU 限制（在 SSD 上运行）时，我都会看到 Mongo 在我的机器上只使用一个 cpu。我有 8 个。Mongo 可以使用它吗？最好在 ruby​​ 中，如果没有，我可以轻松转换。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T17:36:21.997

在 MongoDB 2.2 中当前的 javascript 引擎（即 Mozilla 的 SpiderMonkey）中，mongod 进程中一次只有一个线程执行 Javascript，因此包括 map/reduce 和聚合在内的 JS 操作将被锁定在一个线程中。您可以通过插入 hadoop 适配器来执行并发 map/reduce。不使用 javascript 的 I/O 操作可以同时运行，同时遵守 v2.2 中引入的某些[锁定规则](http://www.mongodb.org/display/DOCS/How+does+concurrency+work)，因此可以以有限的方式实现并行性。如果您正在运行 mongos（[对数据进行分片](http://docs.mongodb.org/manual/tutorial/deploy-shard-cluster/)），则可以实现更好的并发性，但通常在单个 mongod 进程中，您将被限制为单个线程。

# selenium - 在 selenium web 驱动程序中制作测试项目的 jar 文件

> ID：13410242
> 
> 赞同：3
> 
> 时间：2012-11-16T04:07:30.977
> 
> 标签：selenium, selenium-webdriver

我已经创建了一个测试套件（制作一个主文件并调用我喜欢运行的其他测试用例）。现在可以制作一个我制作的测试套件的 jar 文件，这样只需点击 jar 我就可以强制执行开始测试。也可以在 jar 之外创建 c 配置值。我使用的是 java 编程语言。

帮助请。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T04:17:04.180

如果你使用 eclipse 作为 ide，你可以很容易地创建一个 jar 文件。

```
Right click on project.
Go To Export.
Select Jar or Runnable Jar as per your use click on next.
Specify the main file name.
Click on Finish. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-06T06:44:03.953

在执行上述步骤之前。我的意思是

```
Right click on project.
Go To Export.
.
.
.
.....on Finish 
```

*   **清理项目**以避免在使用 Eclipse 将 Java 项目导出到 JAR 时出现“<b>重复条目”错误。
*   在首选项 - 常规 - 工作区 - 自动刷新中启用**自动刷新**（使用本机挂钩调用刷新或在较新的版本中轮询）
    *   或者只需右键单击项目并单击**Refresh**。
        以避免“<b>资源与文件系统不同步”错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-07T15:42:32.327

右键单击项目。转到导出。根据您的使用选择 Jar 或 Runnable Jar 单击下一步。指定主文件名。单击完成。

# ruby-on-rails - 使用 cron 选项卡发送邮件时连接拒绝

> ID：13410245
> 
> 赞同：0
> 
> 时间：2012-11-16T04:07:56.343
> 
> 标签：ruby-on-rails, ruby-on-rails-3, gmail, crontab, whenever

我正在使用`whenever`gem 执行每日发送电子邮件的任务。我在 RAKEFILE 名称咖啡中创建了一个 rake 任务。这是我的任务代码：

```
task :coffee => :environment  do
  ReservationBooksNotify.notify.deliver
  puts "hihi"
end 
```

当我在控制台中运行此任务时 `rake coffee`，它起作用了！但是当我在 schedule.rb 中创建一个计划以每分钟自动发送邮件时，我收到一个错误

> hihi rake 中止了！连接被拒绝 - 连接(2)

我跟踪时的错误

```
rake coffee RAILS_ENV=production --trace
** Invoke coffee (first_time)
** Invoke environment (first_time)
** Invoke rails_admin:disable_initializer (first_time)
** Execute rails_admin:disable_initializer
[RailsAdmin] RailsAdmin initialization disabled by default. Pass SKIP_RAILS_ADMIN_INITIALIZER=false if you need it.
** Execute environment
** Execute coffee
rake aborted!
Connection refused - connect(2)
/home/duykhoa12t/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/smtp.rb:540:in `initialize'
/home/duykhoa12t/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/smtp.rb:540:in `open'
/home/duykhoa12t/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/smtp.rb:540:in `tcp_socket'
/home/duykhoa12t/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/smtp.rb:549:in `block in do_start'
/home/duykhoa12t/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/timeout.rb:68:in `timeout'
/home/duykhoa12t/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/timeout.rb:99:in `timeout'
/home/duykhoa12t/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/smtp.rb:549:in `do_start'
/home/duykhoa12t/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/smtp.rb:519:in `start'
/home/duykhoa12t/.rvm/gems/ruby-1.9.3-p194/gems/mail-2.4.4/lib/mail/network/delivery_methods/smtp.rb:144:in `deliver!'
/home/duykhoa12t/.rvm/gems/ruby-1.9.3-p194/gems/mail-2.4.4/lib/mail/message.rb:2034:in `do_delivery'
/home/duykhoa12t/.rvm/gems/ruby-1.9.3-p194/gems/mail-2.4.4/lib/mail/message.rb:229:in `block in deliver'
/home/duykhoa12t/.rvm/gems/ruby-1.9.3-p194/gems/actionmailer-3.2.8/lib/action_mailer/base.rb:415:in `block in deliver_mail'
/home/duykhoa12t/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
/home/duykhoa12t/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/home/duykhoa12t/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
/home/duykhoa12t/.rvm/gems/ruby-1.9.3-p194/gems/actionmailer-3.2.8/lib/action_mailer/base.rb:413:in `deliver_mail'
/home/duykhoa12t/.rvm/gems/ruby-1.9.3-p194/gems/mail-2.4.4/lib/mail/message.rb:229:in `deliver'
/home/duykhoa12t/Working/Bbookproject/Code/bbook/Rakefile:10:in `block in <top (required)>'
/home/duykhoa12t/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/home/duykhoa12t/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
/home/duykhoa12t/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/home/duykhoa12t/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/home/duykhoa12t/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
/home/duykhoa12t/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/home/duykhoa12t/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/home/duykhoa12t/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/home/duykhoa12t/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'
/home/duykhoa12t/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block (2 levels) in top_level'
/home/duykhoa12t/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'
/home/duykhoa12t/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block in top_level'
/home/duykhoa12t/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/home/duykhoa12t/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'
/home/duykhoa12t/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `block in run'
/home/duykhoa12t/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/home/duykhoa12t/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/home/duykhoa12t/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'
/home/duykhoa12t/.rvm/gems/ruby-1.9.3-p194@global/bin/rake:19:in `load'
/home/duykhoa12t/.rvm/gems/ruby-1.9.3-p194@global/bin/rake:19:in `<main>'
/home/duykhoa12t/.rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `eval'
/home/duykhoa12t/.rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `<main>'
Tasks: TOP => coffee 
```

我的 schedule.rb（在 /config 中）

```
set :output, "~/Working/whenever.log"

every 2.minutes do
  rake 'coffee'
end 
```

我认为我的邮件配置没有问题，因为当我在控制器和控制台中发送邮件时它起作用了。请帮助我，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T03:53:20.900

最后不知道为什么，我试试`rake assets: precompile`，然后重启服务器，一切正常！

# database - 使用 ORM 中的关系查询另一个表的语法？

> ID：13410246
> 
> 赞同：0
> 
> 时间：2012-11-16T04:07:56.260
> 
> 标签：database, orm, sqlalchemy

模型是这样的（在 SQLAlchemy 中）：

```
Class Cell(Base):
    __tablename__ = "cell"
    id = Column(Integer)
    name = Column(String)

Class Sample(Base):
    __tablename__ =  "cell"
    id = Column(Integer)
    factor_id = Column(Integer, ForeignKey("cell.id"))
    cell = relationship(Cell, backref = 'sample', order_by = "Cell.id") 
```

当我执行这样的查询时：

```
DBSession.query(Sample).filter(Sample.cell.name == "a_string") 
```

它会抛出这样的异常：

```
File "build/bdist.linux-x86_64/egg/sqlalchemy/orm/attributes.py", line 139, in __getattr__
key)
AttributeError: Neither 'InstrumentedAttribute' object nor 'Comparator' object has an attribute  'name' 
```

似乎类中的`cell`字段`Sample`没有名为`name`. 那么如何`Cell.name`在`Sample`课堂上查询`cell`字段呢？有人对此有想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T09:30:07.367

有多种方法可以实现这一目标：

### 1\. 使用 join(...) - 在你的情况下我会选择这个

```
qry = session.query(Sample).join(Cell).filter(Cell.name == "a_string")

>> SELECT sample.id AS sample_id, sample.factor_id AS sample_factor_id
>> FROM sample JOIN cell ON cell.id = sample.factor_id
>> WHERE cell.name = :name_1 
```

### 2\. 使用 any/has(...) - 这将使用子查询

```
qry = session.query(Sample).filter(Sample.cell.has(Cell.name == "a_string"))

>> SELECT sample.id AS sample_id, sample.factor_id AS sample_factor_id
>> FROM sample
>> WHERE EXISTS (SELECT 1
>> FROM cell
>> WHERE cell.id = sample.factor_id AND cell.name = :name_1) 
```

# asp.net - asp.net - 为模型创建有序编辑器

> ID：13410247
> 
> 赞同：0
> 
> 时间：2012-11-16T04:08:20.303
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4

我知道我们可以在 razor asp.net mvc 4 中使用它

```
@Html.EditorFor(model => model.Parameters) 
```

但是如果我们要渲染按parameters.displayOrder排序的参数呢？

我试过了

```
@Html.EditorFor(model => model.Parameters.OrderBy(p => p.displayOrder)) 
```

但是不能对剃须刀内部的模型进行操作。

你有什么想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T09:17:14.200

从逻辑上讲，如果首先完成这项工作，那么为什么不将第二种情况适应第一种情况，意味着在模型级别（渲染之前）应用排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T02:37:44.533

事实证明，我们可以做到这一点

```
@{
    ViewBag.Title = @Model.Name;
    Model.Parameters.OrderBy(p => p.DisplayOrder);
} 
```

因此子集合将被排序

# java - 如何防止基于角色加载 GWT 小部件？

> ID：13410248
> 
> 赞同：3
> 
> 时间：2012-11-16T04:08:20.833
> 
> 标签：java, security, gwt, acl, smartgwt

我正在编写一个 GWT 应用程序，并且我只需要加载基于用户角色的某些小部件。例如。可能有管理小部件、用户小部件等。

有什么想法可以实现吗？

一种选择是我可以检查代码中的角色并隐藏它们。但由于此代码在客户端执行，我认为这是一个安全风险。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T08:24:25.203

您应该在服务器端管理角色：

1.  以某种方式将角色传递给您的 Root 小部件。

    *   `RPC``onModuleLoad`在询问角色期间调用服务器

    *   或者简单地将它从**JSP**传递给**JS**`get`并从 Widget使用本机。

2.  构建所需的面板

是的，您仍然有一些风险，因为您的所有 js 代码都在客户端上，并且它可以使用 JS 调试来修改流程。为了防止这种情况，您需要过滤所有从小`Admin`部件到服务器端的调用，并使其失败而没有成功的结果。所以，admin 小部件什么也做不了，因为所有对 Server 的调用都会失败。

如果它对您来说仍然不够安全 - 那么您可以使用单独的**GWT** `Entry Points`。**在这种情况下，您将使用单独的JS**代码将客户端转发到单独的页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T07:53:46.007

我有同样的问题。我找到了这个（还没有使用它，但我认为这可能是解决方案）： [acris](http://code.google.com/p/acris/)

# ios - 从外部站点加载科尔多瓦插件 -ios

> ID：13410249
> 
> 赞同：1
> 
> 时间：2012-11-16T04:08:39.990
> 
> 标签：ios, cordova-2.0.0

从外部站点，我想被称为我的科尔多瓦客户插件。

我使用cordovaViewController（cordova 2.0）作为网页视图并通过调用loadUrl（）加载网页；外部网站的 JS 有如下一行： Cordova.exec( onSuccess, onFail, "Navigator","Navigate2",[]);

现在一旦网页被加载，我想看到 Navigate2 操作方法被调用。

我已经正确设置了自定义插件，但是这个远程调用没有调用我的操作方法。

cordova-2.1.0.js 将是问题所在。

我试图通过注入cordova.js；

NSString *cordova = [NSString stringWithContentsOfFile:cordvajsPath encoding:NSUTF8StringEncoding error:NULL];

[viewController.webView stringByEvaluatingJavaScriptFromString:cordova];

但不工作。有什么特别的方法可以做到这一点。或 Cordova 不支持外部网站调用。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T17:48:55.743

我遇到了同样的问题 cordova-2.2.0 并且我解决了更改 cordova.js 文件（iOS 版本与 android 版本不同！）

# qt - Qt“没有这样的插槽 QObject”警告

> ID：13410250
> 
> 赞同：3
> 
> 时间：2012-11-16T04:08:45.670
> 
> 标签：qt, signals-slots

我正在尝试使用 QTimer 作为信号的发送者来连接信号和插槽。不幸的是，当我编译下面的代码时，程序运行，但我收到警告：“在 game.cpp 中没有这样的插槽 QObject::flip()”。

看来我的插槽没有正确定义。使用关于 QTimer 的[Youtube 教程](http://www.youtube.com/watch?v=pHc7siV2Ads)，听起来好像我需要在游戏类中添加“Q_OBJECT”宏（这在下面被注释掉了）。但是，如果我取消注释，程序将无法编译，并提供错误消息：“未定义对 'vtable for Game' 的引用”。

如何正确连接定时器的信号和插槽？

**游戏.h**

```
#ifndef GAME_H
#define GAME_H

#include "player.h"
#include <QtCore>

class Game : public QObject {

    //Q_OBJECT

public:
    Game();
    void timed_job();

public slots:
    void flip();

private:
    bool is_game_on;
    QTimer *timer;

    Player player_1;
    Player player_2;
    Player player_3;
};

#endif // GAME_H 
```

**游戏.cpp**

```
#include "game.h"
#include <QtCore>

Game::Game() {
    is_game_on = true;
}

void Game::timed_job() {
    timer = new QTimer(this);
    timer->start(1000);
    connect(timer, SIGNAL(timeout()), this, SLOT(flip()));
}

void Game::flip() {
    if(is_game_on == true) {
        is_game_on = false;
    }
    else {
        is_game_on = true;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T04:29:34.977

您需要`Q_OBJECT`宏才能识别插槽。

编译时错误是由缺少 MOC 生成单元引起的。取消注释该行并删除生成的 Makefile 以强制 qmake 重新生成必要的链接。

# c# - 如何比较两个列表框项并将常用项添加到另一个组合框？

> ID：13410263
> 
> 赞同：0
> 
> 时间：2012-11-16T04:09:47.023
> 
> 标签：c#, winforms, combobox, listbox

我是 C# 新手。我有两个`ListBoxes`

```
 1 listbox    -->  lbFirstTableColumns
                2 listbox    -->  lbSecondTableColumns
                combo Box    -->  cmbJoinColumn 
```

现在我想比较两个`ListBox`项目并添加`cmbJoinColumn`我的常见项目`Listboxes`

我尝试了以下代码，但没有给出任何结果

```
 public void AddJoinColumns()
 {
     try
     {
          List<string> lstArray = new List<string>();
          //add each items to lstarray
          for (int index = 0; index < lbFirstTableColumns.Items.Count;     index++)
          {
               lstArray.Add(lbFirstTableColumns.Items[index].ToString());
          }
          //compare each listarray item in second listbox if any matching  copy into combo box
          foreach (string str in lstArray)
          {
              MessageBox.Show(str);
              if (lbSecondTableColumns.Items.Contains(str))
              {
                  cmbJoinColumn.Items.Add(str);
              }
          }
      }
      catch (Exception ex)
      {
           MessageBox.Show(ex.Message);
      }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T04:23:07.460

我希望这能解决问题..虽然这是一个漫长的过程和老式的。

```
cmbJoinColumn.Items.Clear() //If you want to remove previous Items.
for(int intCount = 0; intCount < lbFirstTableColumns.Items.Count;intCount++)
  {
       for(int intSubCount = 0;intSubCount < lbSecondTableColumns.Items.Count; intSubCount++)
       {
            if (lbSecondTableColumns.Items[intCount].ToString() == lbSecondTableColumns.Items[intSubCount].ToString())
             {
                  cmbJoinColumn.Items.Add(lbSecondTableColumns.Items[intCount].ToString());
             }
       }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-14T06:05:21.763

您可以在此处尝试此代码段：

```
List<int> tempList = new List<int>();
List<int> cmbGroupList = new List<int>();
List<int> dbGroupList = new List<int>();
tempList = dbGroupList.Except(cmbGroupList).ToList(); 
```

将`tempList`包含两个列表的差异。

# c# - 添加新的设置运行时

> ID：13410265
> 
> 赞同：0
> 
> 时间：2012-11-16T04:10:05.890
> 
> 标签：c#, .net, settings

我正在尝试使用选项卡为我的应用程序保存设置。每个选项卡显示来自路径的一些数据。我这样存储它：

```
 private Dictionary<int, string> _listTabs = new Dictionary<int, string>(); 
```

当我创建新标签时，我在字典中添加新项目

```
 _listTabs.Add(listTabs.Count++,CurrentPath); 
```

在关闭程序之前，我想将此字典保存在设置中：

```
foreach(KeyValuePair kvp in _listTabs)
{
  var property = new SettingsProperty(kvp.Key);
  property.DefaultValue = kvp.Value;
  Settings.Default.Properties.Add(property);
}
Settings.Defaut.Save(); 
```

但是，它不起作用。错误在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T05:11:31.773

如果应用程序由于某种原因失败，您需要告诉我们您看到的错误是什么。

同样在您上面的代码中，我看不到任何保存设置的方法

> 如果要在应用程序会话之间保留对用户设置的更改，请调用**Save**方法，如以下代码所示：
> 
> Properties.Settings.Default.Save();

有关用户设置的更多信息，请查看[在 C# 中使用设置](http://msdn.microsoft.com/en-us/library/aa730869%28v=vs.80%29.aspx)，特别关注[在运行时使用设置](http://msdn.microsoft.com/en-us/library/aa730869%28v=vs.80%29.aspx#settingscs_topic4)区域。

一旦你确定这是可行的，请检查用户设置文件。[此答案](https://stackoverflow.com/a/469823/685760)向您显示设置的保存位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-02T10:55:34.557

当我们在运行时创建新设置，添加到 Properties 集合并尝试保存它时，新设置实际上并没有保存在 user.config 文件中。

我遇到了同样的问题并将其修复如下：

1.  **在设计时在设置中创建一个虚拟属性**：这将确保将创建 user.config 文件并将设置保存在其中。现在当我们调用 Properties.Settings.Default.Save(); 默认提供程序“LocalFileSettingsProvider”会将所有属性保存在 Settings.Default.Properties 集合中，包括在运行时添加的集合。

您将看到在运行时添加到集合中的新属性正在保存在 user.config 文件中。但是这里还有第二个问题，即尝试从 user.config 加载值时。

它只会加载设计时存在的设置值，而与 user.config 中存在的其他属性无关。

我所做的修复是再次在 Properties 集合中添加具有一些默认值的属性，然后调用以下命令：

2 **从 user.config 加载属性值**：

SettingsProvider provider = Properties.Settings.Default.Providers["LocalFileSettingsProvider"];

SettingsPropertyValueCollection propertyValueCollection = provider.GetPropertyValues(Properties.Settings.Default.Context, Properties.Settings.Default.Properties);

这会将 user.config 中的值加载到 PropertyValues 集合中，然后可以使用这些值。

希望能帮助到你...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-12T06:23:45.310

我注意到你的代码的最后一行是

```
Settings.Defaut.Save(); 
```

我相信有一个拼写错误。`Defaut`应该是`Default`。

# javascript - javascript在firefox中工作但不是chrome

> ID：13410271
> 
> 赞同：0
> 
> 时间：2012-11-16T04:10:49.097
> 
> 标签：javascript, jquery, css

这段代码：

```
$('#ad img').each(function(){
    if($(this).width() > 125){
        $(this).height('auto');
        $(this).width(125);
    }
}); 
```

在 Firefox 上正常工作，但在 Chrome 上不能正常工作。内部的`img`标签`#ad`由 限制`height`，但如果这使它们太宽，我需要限制宽度。有没有更好的方法可以在所有浏览器上运行？

图片的html如下：

```
<img src='http://easyuniv.com/img/ads/".$ad['img']."' height='40px'> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T04:13:26.673

你可以在没有 javascript 的情况下实现这一点。在 css 中使用它：

```
#ad img {
    width: 125px;
    height: auto;
    overflow: hidden;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T04:34:28.427

我怀疑困扰你的是图像负载的可变性。如果图像本身在您的代码运行时尚未加载，则其宽度将为 0。您可能希望尝试使用加载处理程序以及运行现有代码以确保图像大小正确。注意：您需要使用现有代码来处理在添加加载处理程序之前加载图像的情况。

```
$(function() {
    $('#ad img').on('load', function() {
          resize(this);
    }).each( function() {
          resize(this);
    });

    function resize(image) {
       var $image = $(image);
       if ($image.width() > 125) {
           $image.css( { height: 'auto', width: 125 } );
       }
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T04:49:32.040

尝试：

```
$(window).load(function () {
    $('#ad img').each(function(){
        if($(this).width() > 125){
            $(this).height('auto');
            $(this).width(125);
        }
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T04:15:24.250

你试过了吗：

```
 $('#ad img').each(function(){
        if($(this).width() > 125) {
            $(this).css('height', 'auto');
            $(this).css('width',125);
        }
    }) 
```

# r - 在函数中设置默认值？

> ID：13410272
> 
> 赞同：30
> 
> 时间：2012-11-16T04:10:57.893
> 
> 标签：r, function, default-value

我在下面有一个简单的密度函数：

```
dpower <- function(x, b, r){
if ((b <= 0 | r <= 0)) 
return("Wrong parameters entered!")
else{
 density.temp <- (r/b)*(x/b)^(r - 1)
 density.temp[which(x >= b | x <= 0)] <- NA
 return(density.temp)
 } 
} 
```

此函数返回与参数 b 和 r 的指定分布中的值 x 对应的密度。我想在 x 上设置默认值，如果用户不指定 x，则默认值通过。我们可以简单地设置 dpower <- function(x = x.default, b, r)... 但是，我的默认值取决于 r 和 b。我怎样才能做到这一点？假设 x 的默认值为：

```
seq(from = 0.05, to = b, by = 0.001) 
```

谢谢你的帮助，

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-11-16T04:34:23.793

```
dpower <- function(b, r, x = seq(from = 0.05, to = b, by = 0.001))
.... 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-16T04:41:37.520

您可以将 X 的值设置为`NULL`并将函数的第一行之一设置为

```
 if(is.null(x))
     x <- seq(from = 0.05, to = b, by = 0.001) 
```

# javascript - 使用 Javascript、Canvas 和 Alpha 检测进行碰撞检测

> ID：13410274
> 
> 赞同：1
> 
> 时间：2012-11-16T04:11:06.683
> 
> 标签：javascript, canvas, collision-detection, sprite

我目前正在开发一个基本的 javascript 游戏，它有两个不会碰撞在一起的精灵。然而，基本的边界框碰撞是不够的，因为精灵的某些部分是透明的，不会“算作”碰撞。我找到了解决我遇到的问题的方法，但我无法让它工作。我想做的是计算精灵的透明部分，并确保如果透明部分重叠，则没有检测到碰撞。这是我发现的解决问题的方法。

[http://blog.weeblog.net/?p=40#comments](http://blog.weeblog.net/?p=40#comments)

```
 /**
   * Requires the size of the collision rectangle [width, height]
   * and the position within the respective source images [srcx, srcy]
   * 
   * Returns true if two overlapping pixels have non-zero alpha channel
   * values (i.e. there are two vissible overlapping pixels)
   */
  function pixelCheck(spriteA, spriteB, srcxA, srcyA, srcxB, srcyB, width, height){
    var dataA = spriteA.getImageData();
    var dataB = spriteB.getImageData();

    for(var x=0; x<width; x++){
      for(var y=0; y<height; y++){
        if( (dataA[srcxA+x][srcyA+y] > 0) && (dataB[srcxB+x][srcyB+y] > 0) ){
          return true;
        }
      }
    }
    return false;
  } 
```

并用于计算图像数据：

```
 /**
     * creating a temporary canvas to retrieve the alpha channel pixel
     * information of the provided image
     */
    function createImageData(image){
      $('binaryCanvas').appendTo('body');
      var canvas = document.getElementById('binaryCanvas');
      var ctx      = canvas.getContext("2d");

      ctx.drawImage(image, 0, 0);
      var canvasData = ctx.getImageData(0, 0, canvas.width, canvas.height);
      var imageData  = [image.width];

      for(var x=0; x<image.width; x++){
        imageData[x] = [image.height];
        for(var y=0; y<image.height; y++){
          var idx = (x + y * image.width) * 4;
          imageData[x][y] = canvasData.data[idx+3];
        }
      }
      $("#binaryCanvas").remove();
      return imageData;
    } 
```

问题是我不知道如何实施此解决方案，或者这是否是解决我的问题的最佳解决方案。这就是我要找的吗？如果是这样，我将这些方法放在哪里？我最困惑的是我应该传递给 spriteA 和 spriteB。我已经尝试传递 Images 并且我已经尝试传递从该`pixelCheck`方法返回的 imageData ，但收到相同的错误： object 或 image `has no method 'getImageData'`。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T03:48:04.523

这有两个问题。

你做了一个函数：

```
function createImageData(image){...} 
```

但是您要调用的是：

```
spriteA.getImageData();
spriteB.getImageData(); 
```

点表示对象的属性。您试图调用一个从不属于对象的函数。有一些简单的修复。

将 createImageData() 函数添加到您的构造函数：

```
function Sprite(){
    ...
    this.createImageData = function(image){...};
    ...
} 
```

或者 ：

```
Sprite.createImageData = function(image{...}; 
```

或者只是正确地调用它：

```
createImageData(spriteA.image); // or whatever the image is 
```

其次，您的函数需要一个图像参数，但您没有提供一个。只需记住在调用时提供图像。您还可以删除参数并从函数中获取图像。

有点像这样：

```
function Sprite(){
    ...
    this.createImageData = function(){
        var image = this.image;
        // or just use this.image, or whatever it is
        ...
    }
    ...
} 
```

希望这有帮助。

# opengl - 更改片段着色器中显示的纹理

> ID：13410282
> 
> 赞同：1
> 
> 时间：2012-11-16T04:12:04.397
> 
> 标签：opengl, glsl, texture-mapping, multitexturing

我正在尝试将 2 个纹理传递给着色器，但我对这里的工作有点困惑这是 opengl 代码

```
 GLuint textures;
    GLuint textures1;</code>
    glGenTextures(1,&textures);
    glGenTextures(1,&textures1);
    glBindTexture(GL_TEXTURE_2D,textures);
    glTexImage2D(GL_TEXTURE_2D,0,GL_RGB,256,256,0,GL_RGB,GL_UNSIGNED_BYTE,texImg);
    glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT );
    glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT );
    glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST );
    glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST );

    glBindTexture(GL_TEXTURE_2D,textures1);
    glTexImage2D(GL_TEXTURE_2D,0,GL_RGB,256,256,0,GL_RGB,GL_UNSIGNED_BYTE,texImg1);
    glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT );
    glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT );
    glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST );
    glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST );
    glBindTexture(GL_TEXTURE_2D,textures1);

    GLuint location1=glGetUniformLocation(programObjectFloor,"Tex1");
    GLuint location2=glGetUniformLocation(programObjectFloor,"Tex2");

    glActiveTexture(GL_TEXTURE1);
    glBindTexture(GL_TEXTURE_2D,textures1);
    glUniform1i(location2, 1);

    glActiveTexture(GL_TEXTURE0);
    glEnable(GL_TEXTURE_2D);
    glBindTexture(GL_TEXTURE_2D,textures);
    glUniform1i(location1, 0); 
```

顶点着色器是

```
attribute vec4 position; 
attribute vec4 texture;

uniform mat4 MVP;

varying vec4 ptexture; 

void main()
{
    ptexture = texture;     
    gl_Position = MVP * position; 
} 
```

片段着色器是

```
varying vec4 ptexture; 

uniform sampler2D Tex1;
uniform sampler2D Tex2;
uniform bool swit;

void main() 
{
        gl_FragColor = texture2D(Tex1,ptexture.st);
} 
```

当我换线时

```
gl_FragColor = texture2D(Tex2,ptexture.st); 
```

仍然只显示第一个纹理，但是当我注释掉下面的行时，显示了第二个纹理，你能解释一下为什么会这样吗？

```
//        glActiveTexture(GL_TEXTURE0);
//        glEnable(GL_TEXTURE_2D);
//        glBindTexture(GL_TEXTURE_2D,textures);
//        glUniform1i(location1, 0); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T10:03:00.833

您必须`glUseProgram`在查询统一位置并向它们分配值之前调用。很可能您稍后会切换程序，使您将这些制服设置为未定义状态。

同样在使用着色器时，不需要`glEnable(GL_TEXTURE_2D);`，是否使用纹理由着色器的代码确定。

与您的问题无关，只是指出，`glBindTexture`在查询统一位置之前，您有一个多余的电话。

# java - 显示从 Servlet 到 JSP 的 MySQL 查询结果

> ID：13410284
> 
> 赞同：1
> 
> 时间：2012-11-16T04:12:20.153
> 
> 标签：java, mysql, string, jsp, servlets

我正在尝试将我的查询结果存储在一个字符串中，并通过将该字符串传递给它来将它们打印到我的 JSP 页面的底部。现在，JSP 页面最初显示正常，但是当我单击按钮发布命令时什么也没有发生。早些时候，当我从 html 页面访问 servlet，并使用 PrintWriter 将所有输出打印出来时，我得到了要显示的结果，但它们会显示在单独的页面上。

1）以这种方式存储是个好主意，还是我应该让它不同于字符串？

2) 如何将查询结果发布到 JSP 页面？

数据库Servlet.java

```
import javax.servlet.*;
import javax.servlet.http.*;
import java.io.*;
import java.sql.*;

@SuppressWarnings("serial")

public class databaseServlet extends HttpServlet {
    private Connection conn;
    private Statement statement;

    public void init(ServletConfig config) throws ServletException {
        try {
            Class.forName(config.getInitParameter("databaseDriver"));
            conn = DriverManager.getConnection(
                    config.getInitParameter("databaseName"),
                    config.getInitParameter("username"),
                    config.getInitParameter("password"));
            statement = conn.createStatement();
        }
        catch (Exception e) {
            e.printStackTrace();
        }
    }

    protected void doPost (HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        String out = "\n";

        String query = request.getParameter("query");

        if (query.toString().toLowerCase().contains("select")) {
            //SELECT Queries
            try {
                ResultSet resultSet = statement.executeQuery(query.toString());
                ResultSetMetaData metaData = resultSet.getMetaData();
                int numberOfColumns = metaData.getColumnCount();
                for(int i = 1; i<= numberOfColumns; i++){
                    out.concat(metaData.getColumnName(i));
                }
                out.concat("\n");

                while (resultSet.next()){
                    for (int i = 1; i <= numberOfColumns; i++){
                        out.concat((String) resultSet.getObject(i));
                    }
                    out.concat("\n");
                 }
            }
            catch (Exception f) {
                f.printStackTrace();
            }
        }
        else if (query.toString().toLowerCase().contains("delete") || query.toLowerCase().contains("insert")) {
            //DELETE and INSERT commands
            try {
                conn.prepareStatement(query.toString()).executeUpdate(query.toString());
                out = "\t\t Database has been updated!";
            }
            catch (Exception l){
                l.printStackTrace();
            }
        }
        else {
            //Not a valid response
            out = "\t\t Not a valid command or query!";
        }
        RequestDispatcher dispatcher = request.getRequestDispatcher("/dbServlet.jsp");
        dispatcher.forward(request,  response);
        request.setAttribute("queryResults", out);
    }
} 
```

dbServlet.jsp

```
<?xml version = "1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!-- dbServlet.html -->
<html xmlns = "http://www.w3.org/1999/xhtml">
<head>
    <title>MySQL Servlet</title>
    <style type="text/css">
        body{background-color: green;}
    </style>
</head>
<body>
    <h1>This is the MySQL Servlet</h1>
    <form action = "/database/database" method = "post">
    <p>
        <label>Enter your query and click the button to invoke a MySQL Servlet
            <textarea name = "query" cols="20" rows="5"></textarea>
            <input type = "submit" value = "Run MySQL Servlet" />
            <input type = "reset" value = "Clear Command" />
        </label>
    </p>
    </form>
    <hr>
    <%= 
        request.getAttribute("queryResults");
    %>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T04:18:28.090

```
dispatcher.forward(request,  response);
request.setAttribute("queryResults", out); 
```

**应该是这样的**

```
request.setAttribute("queryResults", out);
dispatcher.forward(request,  response); 
```

在发送请求之前，必须设置属性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T04:18:26.750

> 1）以这种方式存储是个好主意，还是我应该让它不同于字符串？

**不。不要在 Java 代码中混用表示逻辑。为此目的离开您的 JSP**我建议您使用 JAVA 对象并将逐行值存储在一个对象实例中。将所有对象放在一个集合中，并在 JSP 中使用相同的对象进行显示。**列名也是如此。**

> 2) 如何将查询结果发布到 JSP 页面？

在您当前的格式中，只需使用JSP 中的运算符或方法`queryResults`将结果打印为：`=``out.println`

```
 <hr>
       <%=request.getAttribute("queryResults"); %> 
```

或者

```
 <% out.println(request.getAttribute("queryResults"));%> 
```

但是，如果您决定按照 answer1 中的建议使用集合，则从请求中取回集合，迭代并打印结果，例如，如果您决定使用`List<String[]>`where`String[]`映射一行数据，则：

```
 <TABLE id="results">
 <% List<String> columns = (List<String>)request.getAttribute("queryColumns");
    List<String[]> results = (List<String[]>)request.getAttribute("queryResults"); 
    out.println("<TR>");
    for(String columnName: columns ){
       out.println("<TD>"+columnName+"</TD>");
    }
    out.println("</TR>");
    //print data
    for(String[] rowData: results){
       out.println("<TR>");
       for(String data: rowData){
          out.println("<TD>"+data+"</TD>");
       }
       out.println("</TR>");
    }
    %>
   </TABLE> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T04:20:21.343

> 1）以这种方式存储是个好主意，还是我应该让它不同于字符串？

由于这是表格数据，我会使用一些保留该结构的东西，以便 JSP 可以轻松地将其拆分为自定义格式。粗体标题，将其放入 HTML 表格之类的东西中。要么是一些自定义 bean，要么只是一个`List<String[]>`.

> 2) 如何将查询结果发布到 JSP 页面？

您现在正在做的事情（request.setAttribute）应该可以工作。但是，您需要在转发请求*之前设置属性。*

然后，您可以像这样打印您现在拥有的字符串：

```
<%= request.getAttribute("queryResults") %> 
```

或者，如果您使用表结构

```
<% List<String[]> rows = request.getAttribute("queryResults"); %> 
```

然后循环。

# c# - 检查通用扩展中是否设置了多个标志

> ID：13410286
> 
> 赞同：0
> 
> 时间：2012-11-16T04:12:41.647
> 
> 标签：c#, enums, extension-methods, flags

借用这个问题的代码[如何检查是否设置了多个枚举标志？](https://stackoverflow.com/questions/8949567/how-do-i-check-if-more-than-one-enum-flag-is-set)我试图实现一个执行此测试的通用扩展。

我的第一次尝试如下。

```
public static bool ExactlyOneFlagSet(this Enum enumValue)
{
    return !((enumValue & (enumValue - 1)) != 0);
} 
```

这导致

> 运算符“-”不能应用于“System.Enum”和“int”类型的操作数

好的有道理，所以我想我会尝试这样的事情

```
public static bool ExactlyOneFlagSet<T>(this T enumValue) where T : struct, IConvertible
{
    return !(((int)enumValue & ((int)enumValue - 1)) != 0);
} 
```

这导致

> 无法将类型“T”转换为“int”

在阅读了这种行为之后，这也是有道理的，但是究竟如何实现这种扩展方法。有好心人帮忙吗？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T04:17:16.773

由于您限制`T`实现[IConvertible](http://msdn.microsoft.com/en-us/library/system.iconvertible.aspx)，您可以简单地调用[ToInt32](http://msdn.microsoft.com/en-us/library/system.iconvertible.toint32.aspx)：

```
public static bool ExactlyOneFlagSet<T>(this T enumValue)
    where T : struct, IConvertible
{
    int v = enumValue.ToInt32(null);
    return (v & (v - 1)) == 0;
} 
```

# java - 带有 JavaFX 或 Swing 的 MDI

> ID：13410287
> 
> 赞同：3
> 
> 时间：2012-11-16T04:12:56.220
> 
> 标签：java, swing, user-interface, javafx, mdi

回到我的，咳咳，Visual Basic 编程时代，我记得创建一个多表单程序非常容易。

在 gui 设计器中，我可以简单地创建任意数量的表单，然后在需要的地方将它们加载到我的程序中。

我在 Java 中很难做到这一点。

我开始使用 Java FX Scene Builder，但很快发现似乎没有很好的 MDI 支持。所以，回到 Swing。但是，再一次，我没有看到设计多表单应用程序的简单方法。

我在某个地方读到了一条可行`JDesktopPane`的方法，因为它允许您拥有不同的内部框架，但是我可以看到，没有办法在 NetBeans gui 设计器中设计多个框架。

您会认为您可以在设计器中隐藏一个内部框架，以便您可以布局另一个框架。虽然我可以将多个框架添加到我的`JDesktopPane`中，但它们都相互重叠，因此无法设计多个框架。

有没有可用的工具来做我想做的事情，还是我只需要硬着头皮在没有设计师帮助的情况下编写 gui 代码？

简而言之，我只想创建一个在主屏幕上显示三个或四个选项的简单应用程序

1.  输入新客户
2.  搜索现有客户
3.  快速估算

并根据用户选择，打开相应的表单。这似乎是几乎所有程序的基本要求，我不明白为什么在开发设计/开发工具时似乎从未考虑过实际创建具有多个窗口/窗体的应用程序。想法？建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T04:24:24.010

如果您真的热衷于使用 的多文档界面 (MDI)，请`JDesktopPane`在其自己的类表单中创建每个表单。不要将它们拖到桌面上。这将允许您隔离它们。

（你可以双击一个内部框架，它应该进入“隔离”模式，基本上使它成为你唯一能看到的东西）

但是，除非窗口共享信息（即您希望在一个窗口中查看信息以更改另一个窗口中的信息），否则我会避免它。

更好的解决方案可能是使用[`CardLayout`](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)允许您根据需要在每种形式之间切换的方法。

再次，我将首先从类似的东西`JPanel`单独构建您的表单，当您准备好时，将它们添加到您的主表单中。

我总是鼓励重新进入 Swing 的人手动编写表单代码，这将使您对如何设计表单和布局管理器的力量有很大的了解。

# android - 如何从修订版 21 到修订版 20 检索 Android SDK 和 Eclipse ADT 插件

> ID：13410289
> 
> 赞同：0
> 
> 时间：2012-11-16T04:13:09.183
> 
> 标签：android, eclipse, android-sdk-tools

我在这里提出一个问题：[Can't set Android target after update sdk rev.21 in Eclipse](https://stackoverflow.com/questions/13409373/cant-set-android-target-after-update-sdk-rev-21-in-eclipse)。

我猜在新的 Android SDK 版本中，eclipse 中存在一些错误。现在我尝试检索旧版本以继续开发。

如何从修订版 21 到修订版 20 检索 Android SDK 和 Eclipse ADT 插件？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T04:21:09.030

另一种选择是在 Eclipse 中进行回滚。在 Eclipse 4.x 中`Help --> About Eclipse --> Installation Details --> Installation History`，您可以从那里恢复到以前的设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T04:20:26.623

你可以下载这个文件

ADT

[http://dl.google.com/android/ADT-20.0.3.zip](http://dl.google.com/android/ADT-20.0.3.zip)

SDK

[http://dl.google.com/android/android-sdk_r20-windows.zip](http://dl.google.com/android/android-sdk_r20-windows.zip)

希望这可以帮助

# javascript - CSS3 矩阵旋转

> ID：13410297
> 
> 赞同：23
> 
> 时间：2012-11-16T04:14:07.947
> 
> 标签：javascript, css, 3d, matrix

我有一个 CSS 3D 立方体，我正在尝试向用户显示它向左/向右/向上/向下直线旋转。如果我使用 css`rotation`函数，那么我会旋转轴，而不是立方体。

网上有很多关于 X、Y、Z 矩阵旋转计算的文章，但我现在花了几天时间尝试设置这个东西，但这些信息都没有真正帮助我。

解决我的问题的方法是一个`WebKitCSSMatrix`对象，它有自己的旋转功能，就像魔法一样。小提琴上的一个例子：http: [//jsfiddle.net/joecritch/tZBDW/](http://jsfiddle.net/joecritch/tZBDW/)。但同样，这仅依赖于 Webkit，但我需要在这里浏览。

现在，成功之路有3个步骤：

1）我需要获取当前矩阵，设置方向向量（上/下为 1,0,0，左/右旋转为 0,1,0）并设置角度。完毕。

2）我需要根据当前矩阵计算新的旋转向量。完毕。

3）我需要用新的向量和角度实际旋转我的当前矩阵。问题。

```
var newMArray = deMatrix(".cube");//getting current matrix from CSS

var v = [vecX, vecY, vecZ, 0];//current vector (1,0,0) or (0,1,0)

var newV = newMVector(newMArray, v);//calculating new vector for current matrix

//getting the angle for each axis based on new vector
angleX = newV[0]*angle;
angleY = newV[1]*angle;
angleZ = newV[2]*angle;

this.rotateX -= angleX;
this.rotateY -= angleY;
this.rotateZ -= angleZ; 

//calculating the rotation matrix
var rotationXMatrix, rotationYMatrix, rotationZMatrix, s, transformationMatrix;
rotationXMatrix = $M([[1, 0, 0, 0], [0, Math.cos(this.rotateX * deg2rad), Math.sin(-this.rotateX * deg2rad), 0], [0, Math.sin(this.rotateX * deg2rad), Math.cos(this.rotateX * deg2rad), 0], [0, 0, 0, 1]]);
rotationYMatrix = $M([[Math.cos(this.rotateY * deg2rad), 0, Math.sin(this.rotateY * deg2rad), 0], [0, 1, 0, 0], [Math.sin(-this.rotateY * deg2rad), 0, Math.cos(this.rotateY * deg2rad), 0], [0, 0, 0, 1]]);
rotationZMatrix = $M([[Math.cos(this.rotateZ * deg2rad), Math.sin(-this.rotateZ * deg2rad), 0, 0], [Math.sin(this.rotateZ * deg2rad), Math.cos(this.rotateZ * deg2rad), 0, 0], [0, 0, 1, 0], [0, 0, 0, 1]]);

transformationMatrix = rotationXMatrix.x(rotationYMatrix).x(rotationZMatrix);//getting all axis rotation into one matrix 
```

比我为我的 CSS Cube 设置新的转换矩阵。问题是 - 它没有按应有的方式旋转。现在我正在使用`Sylvester`插件来进行所有矩阵计算。

所以，请帮助我如何使用我的新向量进行正确的矩阵旋转。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T07:43:41.203

我很难遵循您的代码。但是，如果我理解正确，那么您实际上是在倒退一个基本问题。

您的起点是具有矩阵变换的对象。你想改变那个变换。在这一点上，很容易尝试一些事情，看看有什么能坚持下去。无意冒犯，但这就是您的代码正在做的事情。您真正需要的是了解矩阵的工作原理。有很多很好的教程。（第一次谷歌点击：[http](http://chortle.ccsu.edu/vectorlessons/vectorindex.html) ://chortle.ccsu.edu/vectorlessons/vectorindex.html ）这需要一些时间，但从长远来看会有很大帮助。

您面临的基本问题是矩阵乘法不可交换。A * B != B * A 用于矩阵。根据您设置的矩阵，它包含许多顺序很重要的转换：（A）将对象移动到它的原点（B）围绕它的原点旋转对象（C）将对象移动到世界中的某个位置（D）将对象移动到相机位于原点的位置 (E) 围绕相机旋转。您看到的矩阵只是 A * B * C * D * E。现在取决于您想要做什么，您最好有一个好的计划。在大多数情况下，您要么想旋转对象，要么旋转相机，您可以在左侧或右侧进行乘法运算。您的代码看起来有点像您在错误的一侧进行乘法运算并试图跳过箍以补偿由于许多矩阵是恒等式而有些工作的代码。

所以更实用：获取你的立方体矩阵，制作一个独立于它的旋转矩阵（没有 -angle！），然后将 rotation*cubematrix 设置为你的新变换。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T16:23:37.233

Sylvester 也可以生成[旋转矩阵](http://sylvester.jcoglan.com/api/matrix.html#rotationxyz)。查看小提琴示例 - 似乎进行旋转的 webkit 函数：

```
// Rotate the Matrix around the transformed vector
var newMatrix = m.rotateAxisAngle(vector.x, vector.y, vector.z, angle); 
```

看起来它更像`Matrix.Rotation(angle [, axis])`函数的行，我认为你会提供`axis`一个 Sylvester Vector 对象，而不是 webkit x,y,z 参数 - [http://sylvester.jcoglan.com/api/matrix.html#回转](http://sylvester.jcoglan.com/api/matrix.html#rotation)

将 x,y,z 矩阵相乘并不能很好地工作，因为额外的变换将应用于新的上下文。我刚刚陷入这个 js/canvas 页面的陷阱：http: [//benjaminbenben.com/projects/twittny_test/](http://benjaminbenben.com/projects/twittny_test/)

# javascript - 通过 jquery 一次调整多个图像的大小

> ID：13410306
> 
> 赞同：2
> 
> 时间：2012-11-16T04:15:26.700
> 
> 标签：javascript, jquery, image, resize

所以我正在写一些jquery，它基本上是为了在我单击它时调整任何图像的大小，这意味着我可以单击一个图像并调整它的大小，然后单击任何其他图像并开始调整它的大小，但是是独立的。我必须这样做的代码如下：

```
$('img').click(function(e) {
  thisImage = this;
  $(document).keypress(function(event) {
    if ( event.which == 115) {
      $(thisImage).css('width', "+=25").css('height', "+=25");
    };

    if ( event.which == 97) {
      $(thisImage).css('width', "-=25").css('height', "-=25");
    };
  });
}); 
```

这在您第一次使用时效果很好。当存在多个图像时，您可以单击一个图像，当您点击相应的按钮时，您单击的图像将相应调整大小。但是，单击第二个图像以调整其大小后，它和您单击的第一个图像都将开始一起调整大小。这将与您可以在页面上放置的尽可能多的图像一起缩放，即，在单击每个图像后，三个图像将一起调整大小。

有谁知道为什么会发生这种情况以及我该如何阻止它？我希望能够单击每个图像并能够独立调整它的大小，无论单击它的顺序如何。我觉得这与我使用“this”的方式有关，但我对 jquery 和 javascript 比较陌生，所以我想不出它会是什么。

任何帮助，将不胜感激。谢谢！

-亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T04:44:37.850

本质上，这里的问题是每次单击图像时，都会将新的侦听器绑定到文档。

这意味着每次您按下一个键时，您都会调用您添加的所有侦听器。您想要做的是在单击下一个图像时*取消绑定*仍在文档上的侦听器，这意味着一次只有一个图像会侦听您的按键。

例如，在[这个 jsfiddle](http://jsfiddle.net/pHtsG/)中，我们有以下代码：

```
 $('#in').keypress(function(event) { alert('first'+event.which); });
//$('input').unbind('keypress');
$('#in').keypress(function(event) { alert('second'+event.which); }); 
```

它将两个侦听器添加到输入元素，正如您通过在元素中按下一个键所看到的那样，它会导致两个侦听器运行。本质上，您每次单击图像时都会添加一个新的按键侦听器，而旧的侦听器永远不会被清除。如果你在 jsfiddle 中取消注释 unbinding 命令，你会看到只有第二个警报会被调用，因为第一个监听器被释放了。如果您只想让按键一次听一个图像，那么您将希望`$(document).unbind('keypress')`在点击侦听器的开头有一些类似的东西（当然这会清除*所有*按键，所以如果您有其他侦听器附加到文档中，您需要更加小心地管理它们，对于这个问题就足够了）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T04:46:02.327

是的，这就是它与此代码一起工作的方式。

原因是，在 img.click 事件处理程序中，您在 document.keypress 上附加了一个新的事件处理程序，它将通过传递对“thisImage”的引用来调整图像的大小。发生的情况是，该图像的 document.keypress 事件处理程序将继续存在，即使您单击另一个图像，并且将在每次按键时调整图像大小。

随着您不断选择新图像，这些事件处理程序将继续累积。

您需要做的是在用户单击新图像时删除以前的事件处理程序。

# c# - 是否可以为一个#region 范围编写多行注释？

> ID：13410310
> 
> 赞同：4
> 
> 时间：2012-11-16T04:15:49.980
> 
> 标签：c#, visual-studio

好像没有问过这个问题。如果重复，请发表评论。

据说我`#region`在 C# 代码中有注释。

```
#region if this comment is very long, can I divide the comment into multi-lines?

   // my code is here

#endregion 
```

是否可以`#region`像底部代码一样将注释分成多行？

```
#region the comment is separated into
#region-2 two lines.

   // my code is here

#endregion 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T04:21:44.473

我不认为长注释是该`#region`指令的预期用途。当我想到“区域”时，我会想到诸如“私有成员”或“服务声明”或“重载构造函数”或类似性质的简单标签之类的东西。

如果您有很长的评论，我会将其包含在该区域的顶部，如下所示：

```
#region Some Region Name

    /**
     * Here is a decently lengthy comment which describes the
     * group of class members within the region.
     */

    /// <summary>
    /// A regular member's comment documentation.
    /// </summary>
    public int MyRegionProperty { get; set; }

    // etc...

#endregion 
```

[MSDN](http://msdn.microsoft.com/en-us/library/9a1ybwek%28v=vs.110%29.aspx)将后面的部分描述`#region`为“名称”，而不是评论。名称应该足以描述该地区的内容，仅此而已。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T04:25:28.190

`#Region`来自[MSDN](http://msdn.microsoft.com/en-us/library/9a1ybwek%28v=vs.100%29.aspx)的定义

> `#region 允许您指定在使用 Visual Studio 代码编辑器的大纲功能时可以展开或折叠的代码块。在较长的代码文件中，能够折叠或隐藏一个或多个区域很方便，这样您就可以专注于您当前正在处理的文件部分。

它的主要目的是允许概述您的代码并能够折叠区域（区域）以提高可读性。如果您想要扩展评论，您将不得不使用标准 C# 评论

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T04:29:47.663

Region 用于对可以展开和折叠的代码块进行分组，不用于评论：

![在此处输入图像描述](../Images/36d8dd0c7cd654f296b668f7bf7cf846.png)

浏览此[http://www.dotnetperls.com/region](http://www.dotnetperls.com/region)

# php - PHP：在可能未设置第二个条件时使用 if

> ID：13410313
> 
> 赞同：0
> 
> 时间：2012-11-16T04:16:09.757
> 
> 标签：php

一个非常简单的问题，我想知道 php 如何处理 IF 和 AND 的使用。

假设我有以下 php 代码：

```
if ((pony) && (pony == 2)) {
  /* do something */
} 
```

如果 pony 等于 0，代码是否仍会检查 pony 是否等于 2 还是会停在那里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T04:17:13.363

不会。布尔运算符表现出短路行为。换句话说，一旦 PHP 知道整个表达式的结果，它就会停止计算。

请参阅有关[逻辑运算符](http://php.net/manual/en/language.operators.logical.php)的 PHP 文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T04:24:44.567

[@Jonathon Reinhart](https://stackoverflow.com/users/119527/jonathon-reinhart)是正确的，同时您必须认识到您不需要在使用前创建变量。

话虽如此，这将起作用：

```
if ($pony && $pony == 2) {
  /* do something */
} 
```

虽然，在 PHP 中使用[严格](http://php.net/manual/en/function.error-reporting.php)的错误，您需要确保（在您的情况下）该变量`pony`是使用[isset()](http://php.net/manual/en/function.isset.php)定义的。

```
if (isset($pony) && $pony == 2) {
  /* do something */
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T04:26:31.817

首先，使用$来定义变量..

```
$pony = 0;

if (($pony) && ($pony == 2)) {
  echo "yeah";
}
/* false */ 
```

如果您更改 $pony = 2; 的值，该值将为 true；从逻辑上讲，在第一个条件下没有进行任何测试，甚至不是一个条件。

```
if($pony){
} 
```

如果您将条件更改为... $pony 必须同时为 0 和 2 是不可能的

```
if (($pony == 0) && ($pony == 2)) {
  echo "yeah";
} 
```

如果您尝试检查 $pony 是否有值，请参阅 Samuel Cook 的回答 isset

```
if (isset($pony) && $pony == 2) {
  /* do something */
}
/* does $pony has a value/initiated AND its value must be 2 */ 
```

# sql - 如何每天选择多条记录？

> ID：13410315
> 
> 赞同：3
> 
> 时间：2012-11-16T04:16:44.403
> 
> 标签：sql, postgresql, greatest-n-per-group, postgresql-8.3

这是一个`postgresql`问题。

```
PostgreSQL 8.3.3 on i686-redhat-linux-gnu, compiled by GCC gcc (GCC) 3.4.6 20060404 (Red Hat 3.4.6-9). 
```

该表如下所示：

```
date_time           other_column
2012-11-01 00:00:00 ...
2012-11-02 01:00:00 ...
2012-11-02 02:00:00 ...
2012-11-02 03:00:00 ...
2012-11-02 04:00:00 ...
2012-11-03 05:00:00 ...
2012-11-03 06:00:00 ...
2012-11-05 00:00:00 ...
2012-11-07 00:00:00 ...
2012-11-07 00:00:00 ...
... 
```

我想从特定日期范围内***每天最多选择 3 条记录。***

例如，我想从 2012-11-02 到 2012-11-05 最多选择 3 条记录。将`expected result`是：

```
date_time           other_column
2012-11-02 01:00:00 ...
2012-11-02 02:00:00 ...
2012-11-02 03:00:00 ...
2012-11-03 05:00:00 ...
2012-11-03 06:00:00 ...
2012-11-05 00:00:00 ... 
```

我已经花了几个小时在这上面，但仍然无法弄清楚。请帮我。:(

**更新：** 我尝试的当前sql每天只能选择一条记录：

```
SELECT DISTINCT ON (TO_DATE(SUBSTRING((date_time || '') FROM 1 FOR 10), 'YYYY-MM-DD')) *
FROM myTable
WHERE  date_time >=  '20121101 00:00:00'  
AND  date_time <= '20121130 23:59:59' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T05:41:44.377

以下答案全部使用`date_trunc('day',date_time)`或仅转换`date`为将时间戳截断为日期。无需跳过日期格式和字符串。请参阅手册中的[日期/时间功能](http://www.postgresql.org/docs/current/static/functions-datetime.html)。

此 SQLFiddle 显示了三个可能的答案：[http://sqlfiddle.com/#!12/0fd51/14](http://sqlfiddle.com/#!12/0fd51/14)`date_time` ，所有这些都为输入数据产生相同的结果（但如果其中可以有重复，则不一定是相同的结果）。

要解决您的问题，您可以使用具有限制的相关子查询来生成要过滤的 IN 列表：

```
SELECT a.date_time, a.other_column
FROM table1 a
WHERE a.date_time IN (
  SELECT b.date_time
  FROM table1 b
  WHERE b.date_time IS NOT NULL
    AND a.date_time::date = b.date_time::date
  ORDER BY b.date_time
  LIMIT 3
)
AND a.date_time::date BETWEEN '2012-11-02' AND '2012-11-05'; 
```

这应该是最可移植的方法 - 尽管它不适用于 MySQL（至少从 5.5 开始），因为[MySQL 不支持`LIMIT`在子查询中使用的子查询`IN`中](https://stackoverflow.com/a/13411307/398670)。不过，它适用于 SQLite3 和 PostgreSQL，并且应该适用于大多数其他数据库。

另一种选择是选择您想要的日期范围，使用窗口函数用行号注释范围内的行，然后过滤输出以排除多余的行：

```
SELECT date_time, other_column
FROM (
  SELECT 
    date_time, 
    other_column, 
    rank() OVER (PARTITION BY date_trunc('day',date_time) ORDER BY date_time) AS n
  FROM Table1
  WHERE date_trunc('day',date_time) BETWEEN '2012-11-02' AND '2012-11-05'
  ORDER BY date_time
) numbered_rows
WHERE n < 4; 
```

如果平局是可能的，即如果`date_time`不是唯一的，则考虑使用`rank`or 或`dense_rank`窗口函数而不是`row_number`获得确定性结果，或者在 in 中添加一个附加子句`ORDER BY`来`row_number`打破平局。

如果您使用`rank`，那么如果它不能容纳所有行，它将不包含任何行；如果您使用`dense_rank`它将包括所有这些，即使它必须超过每天 3 行的限制才能这样做。

使用窗口规范也可以通过这种方式进行各种其他处理。

* * *

这是另一个使用数组聚合和切片的公式，它完全是 PostgreSQL 特有的，但很有趣。

```
SELECT b.date_time, b.other_column 
FROM (
  SELECT array_agg(a.date_time ORDER BY a.date_time)
  FROM table1 a
  WHERE a.date_time::date BETWEEN '2012-11-02' 
    AND '2012-11-05'
  GROUP BY a.date_time::date
) x(arr) 
INNER JOIN table1 b ON (b.date_time = ANY (arr[1:3])); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T09:54:05.983

> 我想从特定日期范围内每天**最多选择 3 条记录。**

```
SELECT date_time, other_column
FROM  (
   SELECT *, row_number() OVER (PARTITION BY date_time::date) AS rn
   FROM   tbl
   WHERE  date_time >= '2012-11-01 0:0'
   AND    date_time <  '2012-12-01 0:0'
   ) x
WHERE  rn < 4; 
```

### 要点

*   使用窗口函数[**`row_number()`**](http://www.postgresql.org/docs/current/interactive/functions-window.html)。`rank()`或者`dense_rank()`根据问题是错误的 - 可能会选择超过 3 条带有时间戳重复的记录。

*   由于您没有定义每天需要*哪些*`ORDER BY`行，因此正确的答案是不在窗口函数中包含子句。为您提供与问题匹配的任意选择。

*   我把你的`WHERE`条款从

    ```
    WHERE  date_time >= '20121101 00:00:00'  
    AND    date_time <= '20121130 23:59:59' 
    ```

    到

    ```
    WHERE  date_time >=  '2012-11-01 0:0'  
    AND    date_time <   '2012-12-01 0:0' 
    ```

    对于像`'20121130 23:59:59.123'`.

    @Craig 的建议：

    ```
    date_time::date BETWEEN '2012-11-02' AND '2012-11-05' 
    ```

    .. 可以正常工作，但在性能方面是一种反模式。如果将强制转换或函数应用于表达式中的数据库列，则不能使用普通索引。

### PostgreSQL 8.3 解决方案

*最佳解决方案*：[升级到更新版本，最好升级到当前版本 9.2。](http://www.postgresql.org/support/versioning/)

*其他解决方案*：

只有*几天*你可以雇用`UNION ALL`：

```
SELECT date_time, other_column
FROM   tbl t1
WHERE  date_time >= '2012-11-01 0:0'
AND    date_time <  '2012-11-02 0:0'
LIMIT  3
)
UNION ALL 
(
SELECT date_time, other_column
FROM   tbl t1
WHERE  date_time >= '2012-11-02 0:0'
AND    date_time <  '2012-11-03 0:0'
LIMIT  3
)
... 
```

括号在这里不是可选的。

对于*更多的日子*，有一些解决方法**`generate_series()`**- 就像我在[**此处**发布的内容（包括指向更多的链接）](https://stackoverflow.com/a/8892805/939860)。

在我们有窗口函数之前，我可能已经用**plpgsql 函数解决了它：**

```
CREATE OR REPLACE FUNCTION x.f_foo (date, date, integer
                         , OUT date_time timestamp, OUT other_column text)
  RETURNS SETOF record AS
$BODY$
DECLARE
    _last_day date;          -- remember last day
    _ct       integer := 1;  -- count
BEGIN

FOR date_time, other_column IN
   SELECT t.date_time, t.other_column
   FROM   tbl t
   WHERE  t.date_time >= $1::timestamp
   AND    t.date_time <  ($2 + 1)::timestamp
   ORDER  BY t.date_time::date
LOOP
   IF date_time::date = _last_day THEN
      _ct := _ct + 1;
   ELSE
      _ct := 1;
   END IF;

   IF _ct <= $3 THEN
      RETURN NEXT;
   END IF;

   _last_day := date_time::date;
END LOOP;

END;
$BODY$ LANGUAGE plpgsql STABLE STRICT;

COMMENT ON FUNCTION f_foo(date3, date, integer) IS 'Return n rows per day
$1 .. date_from (incl.)
$2 .. date_to  (incl.)
$3 .. maximim rows per day'; 
```

称呼：

```
SELECT * FROM f_foo('2012-11-01', '2012-11-05', 3); 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-11-16T04:27:57.487

我会使用子选择和左外连接。这应该可以解决问题：

```
select distinct(date_format(a.date_time,"%Y-%m-%d")) date_time, b.* from table a
left outer join (
  select date_format(date_time,"%Y-%m-%d") dt, * from table limit 3
) b 
on date_format(a.date_time,"%Y-%m-%d") = b.dt; 
```

# ruby-on-rails - 为什么我的渲染部分调用不能让我正确访问局部变量？

> ID：13410316
> 
> 赞同：0
> 
> 时间：2012-11-16T04:16:48.450
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在我的`Home#Index`页面上，我有这个：

```
 <%= render 'home/popular_products', :collection => @products, :as => :product %> 
```

在我`Home#_popular_products`看来，我有这个：

```
<div class="span2 recommended">
  <%= image_tag product.image_url(:thumb).to_s %>
</div> 
```

这是我不断收到的错误：

```
undefined local variable or method `product' for #<#<Class:0x007f871c4f6848>:0x007f871cdb7e28> 
```

据我了解，我什至不必`:as`在我的语句中指定属性`render`- 但我尝试在使用后明确这一点是`:collection => @products`行不通的。

在我的`Home#Index Controller`我有这个：

```
@products = Product.all.sample(6) 
```

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T04:55:38.533

`:partial`如果您想传递任何其他选项，我相信您必须指定该选项。IE：

```
<%= render :partial => 'home/popular_products', :collection => @products, :as => :product %> 
```

应该管用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T04:29:51.720

你把`_popular_products.html.erb`文件放在你的`app/views/home/`? 我认为您使用的是部分不遵循 Rails 的约定，因此 Rails 的`product`变量无法理解。`_product.html.erb`如果你想这样使用，你的部分应该被命名。有了这个部分，你可以这样写：

```
<%= render @products %> 
```

**更新**

### 解决方案 1

索引页面：

```
<%= render 'popular_products', :collection => @products %> 
```

部分的：

```
<%= image_tag popular_products.image_url(:thumb).to_s %> 
```

### 解决方案 2

索引页面：

```
<% @products.each do |product| %>
  <%= render :partial => "popular_products", :locals => { :product => product } %>
<% end %> 
```

部分的：

```
<%= image_tag product.image_url(:thumb).to_s %> 
```

# ios - iOS：他们如何使他们的应用程序大小非常小（< 50 MB），可以通过 3G/4G 下载？

> ID：13410317
> 
> 赞同：0
> 
> 时间：2012-11-16T04:16:52.073
> 
> 标签：ios, compression, size, png

我正面临 iOS 应用程序大小问题，即无法通过 3G/4G 连接下载超过 50 MB 的应用程序大小。由于大量图像（.png），我的 iOS 应用程序很重。我已经尝试了一些解决方案，但这还不够。

1.  iPhone 和 iPad 分开。
2.  使用[压缩 PNG 技术](https://stackoverflow.com/questions/2490910/how-to-reduce-the-size-of-my-iphone-application/6909772#6909772)，但这只会减少我的应用程序大小。
3.  使用像[SSZipArchive](https://github.com/samsoffes/ssziparchive)这样的 zip 归档。

我看到一个下载大小小于 50 MB 的应用程序，但下载和安装后使用大小超过 100 MB。如何做到这一点？

我认为他们以后可能会以某种方式下载一些资源，但我不知道如何下载。任何人请给我一些建议。谢谢你。

**编辑：**`.pvr.ccz`也可以使用 格式的纹理包精灵表。这可以像处理一样`.png`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T05:21:30.640

如果您的应用在 PNG 上很重，您可以应用类似于 #2 的内容，但效果会更好。我使用了[ImageOptim](http://imageoptim.com/) + [ImageAlpha](http://pngmini.com/)组合，效果很好。

这是关于这种方法的一个有趣的[案例研究。](http://imageoptim.com/tweetbot.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T04:20:44.407

是的，大多数应用程序都这样做。既然你在谈论`.png`他们已经经历了[2-stage compression](http://en.wikipedia.org/wiki/Portable_Network_Graphics#Compression)。所以我不认为进一步压缩或压缩会帮助你。

假设您有几张沉重的图片会增加您的应用程序大小。因此，您从应用程序包装中删除那些重图像，并且当用户第一次下载应用程序时，当时使用通常的静态文件将这些图像获取为静态文件`http`。您可以在单独的设置步骤中执行此操作（显示进度条等），也可以在运行时根据用户在您的应用程序中执行的操作下载这些图像。

获取它们后，您可以将这些图像本地保存在您的应用程序`documents`文件夹或任何其他文件夹中，并从下次开始在本地提供它们（请参阅[SDWebCache](https://github.com/rs/SDWebImage)）。或者您可以保持简单，使其成为纯 http 调用（无本地存储），但这可能会影响您的用户体验。

# html - 如何使用 TYPO3 Flow 从源代码中删除空格？

> ID：13410327
> 
> 赞同：0
> 
> 时间：2012-11-16T04:17:43.537
> 
> 标签：html, htmltidy, typo3-flow

执行主页时，我的源代码中出现了不必要的空间。不知道这个空间是从哪里来的。它是使用 TYPO3 Flow（以前称为 Flow3）概念编码的。我需要调用一个 XML 文件 - 但由于空格它不满足 xml 规则

它显示 27 个空白行，在第 27 行开始显示标记，就像这样的布局：

```
 ...
 ...
 24
 25
 26
 27 <!DOCTYPE html>
 28   <head>
 29      <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
 30      <title>REST Test</title>
 ...
 ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:54:01.943

使用插件（如[TS Tidy](http://typo3.org/extension-manuals/tstidy/current/)）或类似插件。

任何类似的插件都会在服务器呈现 HTML 时以及在发送到浏览器之前格式化您的 HTML。删除空行、缩进标签等。这些插件中的大多数，无论是引擎还是语言，都是基于古老的 HTMLTidy/XMLTidy。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T23:35:12.207

这个问题是由模板引擎 Fluid 引起的，你只需要在你的布局中处理你的命名空间声明，替换这个：

```
<!DOCTYPE html>
{namespace foo=My\Package\ViewHelpers}
{namespace world=My\Package\ViewHelpers}
<html> 
```

这样

```
<!DOCTYPE html>{namespace foo=My\Package\ViewHelpers}{namespace world=My\Package\ViewHelpers}
<html> 
```

不再需要换行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T06:59:40.033

在 flow3 中，如果我们创建的任何包中存在任何错误/警告，它将反映到活动包中。这在我的情况下会导致空白行。当我删除该包时，它会解决问题（空白行）

# android - 在 Android Facebook SDK 中更改对话框大小

> ID：13410328
> 
> 赞同：3
> 
> 时间：2012-11-16T04:17:49.697
> 
> 标签：android, facebook, dialog

如何更改 Android Facebook SDK 的对话框大小？它几乎是全屏的，对手机来说可以，但对平板电脑来说不行。我想为表格和电话设置不同的对话框大小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T05:13:12.633

为什么不在片段中实例化它或您想要的片段？

这是 Webview 片段的文档 [http://developer.android.com/reference/android/webkit/WebViewFragment.html](http://developer.android.com/reference/android/webkit/WebViewFragment.html)

现在 Facebook 确实在他们的 SDK 中集成了一些原生 Fragment，例如 Picker Fragment： [https ://developers.facebook.com/docs/reference/android/3.0/PickerFragment](https://developers.facebook.com/docs/reference/android/3.0/PickerFragment)

当您将 webfragment 放入您的`Layout`:

```
 <fragment 
    android:id="@+id/webFragment"
    android:layout_width="150dip"
    android:layout_height="match_parent"
    android:name="my.proj.WebViewer"></fragment > 
```

您应该能够对平板电脑所需的内容进行碎片化。Justin Breitfeller 在 stackoverflow 上发布了这段代码： [How to detect 7" Android tablet in code](https://stackoverflow.com/questions/10724338/how-to-detect-7-android-tablet-in-code)

```
DisplayMetrics metrics = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(metrics);

float widthInInches = metrics.widthPixels / metrics.xdpi;
float heightInInches = metrics.heightPixels / metrics.ydpi

double sizeInInchesSquared = (widthInInches * widthInInches) + (heightInInches * heightInInches);
//0.5" buffer for 7" devices (6.5^2 = 42.25) (7.5^2 = 56.25)
boolean is7inchTablet = sizeInInchesSquared >= 42.25 && sizeInInchesSquared <= 56.25; 
```

我过去曾使用它有效地为 7" 及以上的屏幕制作不同的视图。然后，您可以使用不同的片段调用不同的布局，或者让片段动态改变大小以有效地根据类型适应屏幕。

如果您向我们提供有关您正在尝试做什么的更多详细信息，那将会很有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T01:04:37.243

在 Android Facebook 3.0 SDK 中，确保清单中的 LoginActivity Activity 声明如下所示：

```
<activity android:name="com.facebook.LoginActivity" android:theme="@android:style/Theme.Translucent.NoTitleBar"/> 
```

像这样设置主题仍然会将 facebook 活动作为全屏活动启动，但整个活动是透明的，因此看起来只出现一个对话框。

我想这更像是一种 hack，但这就是 Facebook 在 Scrumptious 示例项目中的做法。

*****编辑*****

如果您使用的是 Facebook SDK 4.x 版，您需要在 AndroidManifest 中覆盖和替换 FacebookActivity 的主题，如下所示：

```
 <activity
            tools:replace="android:theme"
            android:name="com.facebook.FacebookActivity"
            android:theme="@android:style/Theme.Translucent.NoTitleBar"/> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T05:25:31.660

如果有人在乎 - Facebook 不支持开箱即用。您*必须*在某些特殊情况下破解代码，使用类似于 childofthehorn 的计算来检查设备是否为平板电脑，然后手动调整其大小。

# c# - 解析 XDocument 的友好方式

> ID：13410330
> 
> 赞同：1
> 
> 时间：2012-11-16T04:18:12.927
> 
> 标签：c#, .net, xml, linq, linq-to-xml

我有一个创建各种不同 XML 方案的类。我通过一个（非常长的）语句创建各种动态 XDocument，使用条件运算符作为可选元素和属性。

我现在需要将 XDocument 转换回类，但由于它们来自不同的方案，因此许多元素和子元素可能是可选的。我知道这样做的唯一方法是使用大量的 if 语句。

这种方法似乎不是很 LINQ，并且使用的代码比我创建 XDocument 时要多得多，所以我想知道是否有更好的方法来做到这一点？

一个例子是得到

```
<?xml version="1.0"?>
<root xmlns="somenamespace">
    <object attribute1="This is Optional" attribute2="This is required">
        <element1>Required</element1>
        <element1>Optional</element1>
        <List1>
            Optional List Of Elements
        </List1>
        <List2>
            Required List Of Elements
        </List2>
    </object>
</root> 
```

进入

```
public class Object()
{
    public string Attribute1;
    public string Attribute2;
    public string Element1;
    public string Element2;
    public List<ListItem1> List1;
    public List<ListItem2> List2;
} 
```

以比这更 LINQ 友好的方式：

```
public bool ParseXDocument(string xml)
{
    XNamespace xn = "somenamespace";            
    XDocument document = XDocument.Parse(xml);

    XElement elementRoot = description.Element(xn + "root");
    if (elementRoot != null)
    {
        //Get Object Element
        XElement elementObject = elementRoot.Element(xn + "object");
        if(elementObject != null)
        {
            if(elementObject.Attribute(xn + "attribute1") != null)
            {
                Attribute1 = elementObject.Attribute(xn + "attribute1");
            }
            if(elementObject.Attribute(xn + "attribute2") != null)
            {
                Attribute2 = elementObject.Attribute(xn + "attribute2");
            }
            else
            {
                //This is a required Attribute so return false
                return false;
            }
            //If, If/Elses get deeper and deeper for the next elements and lists etc.... 
        }
        else
        {
            //Object is a required element so return false
            return false;
        }
    }
    else
    {
        //Root is a required element so return false
        return false;
    }
    return true;
} 
```

更新：只是为了澄清 ParseXDocument 方法在“对象”类中。每次收到 xml 文档时，Object 类实例都会更新其部分或全部值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T04:27:08.793

*   看看[XElement 和](http://msdn.microsoft.com/en-us/library/ff986933.aspx) [XAttribute 类型转换](http://msdn.microsoft.com/en-us/library/ff986944.aspx)。

*   [文档根](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.root.aspx)始终为非空。

*   之后验证对象，因此您不必执行两次验证（解析时一次，保存前一次）。

*代码：*

```
private static readonly XNamespace xn = "somenamespace";

public bool ParseXDocument(string xml)
{
    XDocument document = XDocument.Parse(xml);

    var obj = document.Root.Element(xn + "object");
    if (obj == null)
        return false;

    Attribute1 = (string)obj.Attribute("attribute1");
    Attribute2 = (string)obj.Attribute("attribute2");
    Element1 = (string)obj.Element(xn + "element1");
    Element2 = (string)obj.Elements(xn + "element1").ElementAtOrDefault(1);
    // ...

    return Validate();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T06:01:30.993

下面我有几个可以使用的扩展方法，它们可能有助于达到你想要的可读性。当前形式的代码不支持根据是否找到所有必需的元素来返回真/假。我建议在这方面采用 dtb 的建议，只需解析出细节，然后对其进行验证。

有一些缺点，例如对 XML 结构的重复迭代，但是如果它成为一个问题，我相信你可以克服它。

这是 MyObject 的样子： public class MyObject { public string Attribute1; 公共字符串 Attribute2; 公共字符串 Element1；公共字符串 Element2; 公共列表 List1；公共列表List2；

```
 public void ParseXDocument(string xml)
    {
        XNamespace xn = "somenamespace";            
        XDocument document = XDocument.Parse(xml);

        XElement elementRoot = document.Root;
        elementRoot.MatchElement(xn.GetName("object"), xObject => {
            xObject.MatchAttribute("attribute1", (x,a) => this.Attribute1 = (string)a);
            xObject.MatchAttribute("attribute2", (x,a) => this.Attribute2 = (string)a);
            xObject.MatchElement(xn.GetName("element1"), x => this.Element1 = (string)x);
            xObject.MatchElement(xn.GetName("element2"), x => this.Element2 = (string)x);
        });
    }
} 
```

以下是支持它的扩展方法： public static class XElementExtensions {

```
 public static XElement MatchAttribute(this XElement x, XName name, Action<XElement, XAttribute> action) {
        foreach (var a in x.Attributes(name)) {
            action(x, a);
        }

        return x;
    }

    public static XElement MatchElement(this XElement x, XName name, Action<XElement> action) {
        foreach (var child in x.Elements(name)) {
            action(child);
        }

        return x;
    }
} 
```

最后，这是我在 LinqPad 中使用的一些示例驱动程序代码来测试它：

```
void Main()
{
    var xml = @"<?xml version=""1.0""?>
<root xmlns=""somenamespace"">
    <object attribute1=""This is Optional"" attribute2=""This is required"">
        <element1>Required</element1>
        <element2>Optional</element2>
        <List1>
            Optional List Of Elements
        </List1>
        <List2>
            Required List Of Elements
        </List2>
    </object>
</root> 
    ";

    var o = new MyObject();

    o.ParseXDocument(xml);
    o.Dump();
} 
```

# javascript - 如何使用 Javascript 制作幻灯片以适应使用媒体查询的移动设备

> ID：13410334
> 
> 赞同：0
> 
> 时间：2012-11-16T04:18:31.613
> 
> 标签：javascript, html, slideshow, media-queries

我正在使用 1140 网格，并且我有一个使用 Javascript 制作的幻灯片，每 2.5 秒在图像之间切换一次。但我不确定如何缩小我的幻灯片以使其适合移动设备。我已经尝试使用媒体查询来缩小它，但没有任何效果。关于如何做到这一点的任何想法？

```
<div class="container">
  <div class="row">
    <div class="twelvecol last">
      <div class="slideshow">
        <canvas id='showCanvas' width='1022' height='397'>
        Canvas Not Supported
        </canvas>
        <div class="caption">
          <p id="tagLine">Image Number</p>
        </div>
      </div>
    </div>
  </div>
</div> 
```

在此处输入代码

# jar - 在 JRuby 中从 jar 文件中加载图像

> ID：13410336
> 
> 赞同：0
> 
> 时间：2012-11-16T04:19:00.043
> 
> 标签：jar, jruby

icon.png 在 myapp.jar 里面

```
DANIELs-MacBook-Air-2:jrubyScreenshot dani [master] $ jar -tf myapp.jar | tail
....
icon.png 
```

我怎样才能加载它？这返回零

```
f = java.lang.Object.new
image = java.awt.Toolkit::default_toolkit.get_image(f.java_class.resource("icon.png")) 
```

解决方案是：

```
 f = java.lang.Object.new
 url = f.java_class.resource("/icon.png") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T14:02:51.343

也许是 CLASSPATH

```
> jruby -J-classpath myapp.jar test.rb 
```

* * *

```
include Java

f = java.lang.Object.new
url = f.java_class.resource("/icon.png")
image = java.awt.Toolkit::default_toolkit.get_image(url)
puts image 
```

# javascript - Knockoutjs ObservableArray 的大小不断增加一倍

> ID：13410338
> 
> 赞同：1
> 
> 时间：2012-11-16T04:19:37.273
> 
> 标签：javascript, knockout.js

我试图理解我在使用 KnockoutJS 制作的页面中看到的一些稍微奇怪的行为。每次我清除并重新应用绑定时，一个可观察的数组似乎都会得到重复的项目。了解问题的最快方法是查看这个[JSFiddle 演示](http://jsfiddle.net/jamshall/fD5Kt/28/)。只需多次单击任何编辑按钮，即可观看此列表的增长！

此演示的代码的核心是以下方法：

```
var _bindItemDetail = function (jsonData) {
        //clear existing bindings
        ko.cleanNode($("#itemdetails").get(0));

        // observables in selected item.
        _viewModel.SelectedItem(ko.mapping.fromJS(jsonData));

        // Apply Bindings
        ko.applyBindings(_viewModel.SelectedItem, $("#itemdetails").get(0));
    }; 
```

我想要实现的本质是创建一个列表和详细信息页面。列表 JSON 在初始页面加载时获取，并且在单击编辑链接时获取详细 JSON 并将其绑定到“详细”html。

除了解决问题之外，我还试图了解这种行为，并学习一些关于如何在使用淘汰赛时正确清理陈旧资源的课程。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T06:15:12.133

问题在于，在您的`_bindItemDetail`函数中，您正在对已复制元素的修改视图重新应用绑定。

```
var _bindItemDetail = function (jsonData) {
    //clear existing bindings
    ko.cleanNode($("#itemdetails").get(0));

    // observables in selected item.
    _viewModel.SelectedItem(ko.mapping.fromJS(jsonData));

    // Apply Bindings
    ko.applyBindings(_viewModel.SelectedItem, $("#itemdetails").get(0));
}; 
```

`ko.cleanNode()`只是从元素中删除绑定，它不会将视图恢复到其初始状态。通常，您应该只调用`ko.applyBindings`一组节点一次。不止一次这样做，只是在问问题。

坦率地说，你并没有真正充分利用淘汰赛。您的大部分代码都使用 jquery 来处理所有低级细节。使用淘汰赛的目的是不必担心那些较低级别的细节。

我已经稍微调整了你的小提琴，以更好地利用淘汰赛，而不那么强调使用 jquery。

在视图中：

*   使用`click`绑定来处理您的`Edit`点击事件。
*   使用`with`绑定有条件地显示编辑器字段。`stopBindings`不需要处理程序。

在视图模型中：

*   将点击处理程序添加`editClicked`到视图模型。
*   删除了 jquery 事件绑定。
*   移除了绑定物品时的`ko.cleanNode`/组合。`ko.applyBindings`你不应该这样做，你只是不需要它，淘汰赛会为你处理所有这些。

[更新的小提琴](http://jsfiddle.net/jeff1203/fD5Kt/33/)

# android - 为现有的 android 应用程序开发一个小部件

> ID：13410340
> 
> 赞同：2
> 
> 时间：2012-11-16T04:19:48.403
> 
> 标签：android, android-widget

我想为现有的 android 应用程序开发一个小部件。

我想要的唯一功能是显示我从应用程序中获得的变量。我开发了一个简单的函数来从中获取变量，但我不知道在应用程序关闭时如何更新它。

或者我必须编写一个服务来获取这些变量？

```
package hkcsl.tabbedactivealarm;

import android.appwidget.AppWidgetManager;
import android.appwidget.AppWidgetProvider;
import android.content.ComponentName;
import android.content.Context;
import android.content.Intent;
import android.util.Log;
import android.widget.RemoteViews;

public class AppWidgetExample extends AppWidgetProvider {   
@Override
public void onReceive(Context context, Intent intent) {

  super.onReceive(context, intent);     
  RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.helloworld);
  String value1 = intent.getStringExtra("Value"); 
  views.setTextViewText(R.id.text, value1);
  AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(context);
  appWidgetManager.updateAppWidget(new ComponentName(context, AppWidgetExample.class), views);
   }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T04:25:54.027

如果我理解这个问题 -

是的，这是可能的，但我相信更新间隔必须低于每分钟一次。有关简单教程，请参阅本指南：

[http://www.vogella.com/articles/AndroidWidgets/article.html#simplewidget](http://www.vogella.com/articles/AndroidWidgets/article.html#simplewidget)

是的，您的应用程序需要一个在您的应用程序关闭时运行的进程。所以后台服务或 AsyncTask 或 Thread 会做。后台服务是您的最佳选择

**编辑**

好吧，我想我现在更好了。使用上面的相同链接，阅读第 4 节。

```
`appWidgetManager.updateAppWidget(widgetId, remoteViews);` 
```

您只启动 1 个服务，该服务负责更新值。如果您希望在用户退出您的应用程序时发生一些特别的事情，您可以覆盖`onDestroy()`?

**编辑 2**

在 XML 中使用类似的东西：

```
<?xml version="1.0" encoding="utf-8"?>
<appwidget-provider 
      xmlns:android="http://schemas.android.com/apk/res/android"
    android:initialLayout="@layout/YOUR_LAYOUT"
    android:minHeight="72dp"
    android:minWidth="300dp"
    android:updatePeriodMillis="300000" >

</appwidget-provider> 
```

注意`updatePeriodMillis=300000`

这取自上面那篇文章链接的第 3 节

# macos - iOS/MacOS - iCloud 警告 - 以 SharedCoreData 为基础的普遍性错误

> ID：13410343
> 
> 赞同：0
> 
> 时间：2012-11-16T04:20:08.070
> 
> 标签：macos, ios6, icloud

我已经尝试为我自己的应用程序修改 Apple SharedCoreData 示例。

一切都（合理地）没问题，除了这个警告：

```
[NSPersistentStoreCoordinator addPersistentStoreWithType:configuration:URL:options:error:](1055): CoreData: Ubiquity:  
Error: A persistent store which has been previously added to a coordinator using the iCloud integration options must always be 
added to the coordinator with the options present in the options dictionary. 

If you wish to use the store without iCloud, migrate the data from the iCloud store file to a new store file in local storage. 
file://localhost/Users/david/Library/Containers/.../Data/Documents/SharedCoreDataStores/localStore.sqlite

This will be a fatal error in a future release. 
```

有没有人遇到过这个问题，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T14:34:16.130

当您看到此错误时，您正在添加包含 iCloud 元数据的存储文件，这意味着该文件已添加到 iCloud。

添加 iCloud Store 时应添加选项：

```
 NSDictionary *options =
        @{  NSMigratePersistentStoresAutomaticallyOption:@(YES),
        NSInferMappingModelAutomaticallyOption      :@(YES),
        NSPersistentStoreUbiquitousContentNameKey   :self.iCloudCoreDataContentName,
        NSPersistentStoreUbiquitousContentURLKey    :self.iCloudCoreDataContentURL}; 
```

`self.iCloudCoreDataContentName`(require) 是您想要的任何名称、iCloud 商店、名称

`self.iCloudCoreDataContentURL`（可选）在 iCloud 容器中定位核心数据传输日志

这个 URL 应该是 iCloud 容器的子目录，比如`[[NSFileManager URLForUbiquityContainer:nil] URLByAddingComponent:@"CoreDataLogs"].`

此属性在选项中是可选的。如果您省略它，iCloud CoreData 内容 URL 将为`[NSFileManager URLForUbiquityContainer:nil]`.

有关您应该注意的 URL 和名称的更多详细信息： [Xcode - “提供的通用名称已在使用中” - 我如何找到文件夹](https://stackoverflow.com/questions/13906812/xcode-the-provided-ubiquity-name-is-already-in-use-how-do-i-find-a-folder/14057272#14057272)

如果您想将 iCloud 存储转换为本地存储，您可以在以下位置查看我的答案： [如何将数据从 iCloud 存储文件迁移到本地存储中的新存储文件？](https://stackoverflow.com/questions/13343449/how-can-i-migrate-the-data-from-the-icloud-store-file-to-a-new-store-file-in-loc)

# android - 安装Phonegap

> ID：13410344
> 
> 赞同：0
> 
> 时间：2012-11-16T04:20:16.287
> 
> 标签：android, cordova

嗨，我是新来的`Phonegap`。

我已经下载了**cordova-2.2.0**。我应该在哪里粘贴它？

我刚刚提取了**incubator-cordova-android**和**incubator-cordova-docs**文件夹，因为我只想开发`Android`项目。

我正在使用**windows 操作系统**，如何创建一个新项目？

使用终端的[`Phonegap`](http://docs.phonegap.com/en/2.2.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android_4_setup_new_project)正义教学。

提前致谢。

# asp.net - 在asp中上传文件大小时，这可以限制文件大小吗？

> ID：13410346
> 
> 赞同：1
> 
> 时间：2012-11-16T04:20:21.263
> 
> 标签：asp.net, .net, c#-4.0, file-upload

在我的 Asp 页面中，我想限制客户端在立即选择文件名时上传的文件大小。例如，我想将文件大小限制为最多 2MB。所以，在用户选择文件名后，我有检查文件大小。如果小于 2MB，则没有问题。否则，我必须显示错误消息...

可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T04:39:51.893

您可以使用 web.config 中 httpRuntime 元素的 maxRequestLength 属性，如下所述：http: [//msdn.microsoft.com/en-us/library/e1f13641 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/e1f13641(v=vs.100).aspx)

# jquery - 在收到 ajax 内容后，我需要启用页面上的新 div 以供 DOM 查看

> ID：13410350
> 
> 赞同：1
> 
> 时间：2012-11-16T04:20:41.967
> 
> 标签：jquery, ajax

所以，我所拥有的是一个发生大量 ajax 的页面。

Ajax 加载产品表。表格中有用于更新和删除项目的各种按钮。除非我在成功函数中嵌套 $(document).ready，否则这些按钮不起作用。

如何重新加载页面以便可以查看和访问新元素？

我不能使用 window.reload() ，因为这会将整个页面完全刷新回其原始状态。而我只希望新添加的 ajax 内容能够与更多 ajax 一起使用

这是我的代码目前的样子......

```
$('#viewProductButton').click(function() {
                //$('#subSubCat').hide();
                //var id = $(this).val();
                var subID = document.getElementById("subCategory").value;
                var subSubID = document.getElementById("subSubCat").value;
                $.ajax({
                url: 'products/viewProdTable/'+subID+'/'+subSubID,
                success: function(data) {
                    // display results table of user selected products
                    $('#viewProducts').fadeIn(100, function(){
                        $(this).html(data);
                    })
                }
                }); // end ajax
            });` 
```

所以在我的新数据输入到#viewProducts 之后，它有一些按钮可以利用ajax 来执行其他功能。除非我将 doc.ready 放在 #viewProducts 函数中，否则它们将无法工作。

还有什么我可以做的，因为我将继续拥有所有这些嵌套的 doc.ready 功能，因为页面非常具有交互性。

我希望这是有道理的！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T04:25:47.330

您的新按钮没有绑定事件处理程序。您的 doc.ready 很可能会进行绑定。

您需要在 doc.ready 函数中添加它们或使用委托：

[jquery网站有这个例子](http://api.jquery.com/delegate/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T04:29:47.513

试试这个 $('#viewProductButton').live('click',function() { alert("do your work"); })

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T06:27:57.000

将它放在您的初始页面加载脚本中，它会将点击绑定到元素，无论它是从一开始就存在还是通过 ajax 动态添加:)

```
 $('body').on('click' , '#viewProductButton' , function() {
 // Do stuff....
 }); 
```

You can see how to lay it out, so just change the element ID to whatever element you would like to bind the click to, and you can change the ' click' to whatever you need, like ' hover' or ' change' and so on...

# jquery - 如何在jQuery中获取以逗号分隔的子元素值

> ID：13410359
> 
> 赞同：8
> 
> 时间：2012-11-16T04:21:17.153
> 
> 标签：jquery

我有一个清单：

```
<ul class='class-name'>
  <li><p>value1</p></li>
  <li></li>
  <li><p>value2</p></li>
  <li><p>value3</p></li>
</ul> 
```

我想得到`value1,value2,value3`。我在用着：

```
$('ul.class-name > li > p').text(); 
```

但我得到了`value1value2value3`。

谁能告诉我如何获得逗号分隔值？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-16T04:22:48.403

你可以试试这个...

```
$('ul.class-name > li > p')
    .map(function() { return $(this).text(); }).get().join(); 
```

[js小提琴](http://jsfiddle.net/tTwJS/)。

这将获取所有`p`元素，遍历它们，用它们的文本替换它们的引用，然后从 jQuery 对象中获取一个真实的数组，并将它们连接起来`join()`（`,`默认分隔符）。

# sql - 超过 400 000，重新填充数据库需要 5 小时

> ID：13410369
> 
> 赞同：0
> 
> 时间：2012-11-16T04:22:04.863
> 
> 标签：sql, ruby-on-rails, scale

简单地运行

```
ElectricityProfile.find_each 做 |ep|
  如果 UserProfile.exists?(ep.owner_id) && ep.owner_type == 'UserProfile'
    ElectricityProfileSummary.create(ep)
  结尾
结尾

```

需要很长时间（5 小时）才能填充表格。有没有更好的方法来填充数据库？

假设从数据库中获取所有数据并将其存储在数组、哈希等中，然后推送以创建数据库

```
ElectricityProfile.find_each 做 |ep|
  如果 UserProfile.exists?(ep.owner_id) && ep.owner_type == 'UserProfile'
    array_of_electricity_profiles.push(ep)
  结尾
结尾
ElectricityProfileSummary.mass_create(ep) # => 或任何其他方法:)

```

抱歉忘了提我确实有覆盖方法`create`，它需要多个模型并创建 ElectricityProfileSummary ...

```
创建！（：owner_id =>electricity_profile.owner_id，
        :owner_type =>electricity_profile.owner_type,
        :property_type =>electricity_profile.owner.user_property_type,
        :household_size =>electricity_profile.owner.user_num_of_people,
        :has_swimming_pool => 电力配置文件.has_swimming_pool,
        :bill => 电费账单，
        :contract =>electricity_profile.on_contract,
        :脏 => 真，
        :provider =>electricity_profile.supplier_id,
        :plan => 电力配置文件.plan_id,
        ：状态=>状态，
        ：邮政编码 => 邮政编码，
        ：折扣 => 折扣，
        :has_air_conditioner => 电力配置文件.has_air_conditioner,
        :has_electric_hot_water => 电力配置文件.has_electric_hot_water,
        :has_electric_central_heating =>electricity_profile.has_electric_central_heat,
        :has_electric_cooktup => 电力配置文件.has_electric_cooktup
)

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T04:54:32.747

如果您可以将导入循环包装到一个事务块中，它应该会极大地加快导入速度。[在此处](http://api.rubyonrails.org/classes/ActiveRecord/Transactions/ClassMethods.html)阅读有关 ROR 交易的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T05:24:59.360

在存储过程或原始 SQL 中执行此操作可能是最好的方法，因为 ActiveRecord 在处理这么多记录时可能非常昂贵。`includes`但是，您可以使用or来加快速度`joins`。

看起来您只想创建 ElectricityProfileSummary 模型。我有点不确定你的人际关系如何，但假设你有以下几点：

```
class ElectricityProfile
  belongs_to :owner, polymorphic: true
end

class UserProfile
  has_many :electricity_profiles, as: owner
end 
```

...你应该能够做这样的事情：

```
ElectricityProfile.includes(:owner).each do |ep|
  ElectricityProfileSummary.create(ep)
end 
```

现在，我假设您使用的是 ElectricityProfile 和 UserProfile 之间的多态关系。如果不是这样，请告诉我。（我做出这个假设是因为你有`owner_id`and `owner_type`，它作为一对组成了多态关系所必需的两个字段。）

为什么使用包含更好？使用 include 会导致 ActiveRecord 急切加载两个模型之间的关系，因此您不会像现在这样进行 n+1 查询。实际上，因为您是根据 ElectricityProfile 记录的数量创建记录，所以您仍然在做 n+1，但是您现在所做的比 n+1 更昂贵，因为您正在为每个 ElectricityProfile 查询 UserProfile，然后您在创建 ElectricityProfileSummary 时再次查询 UserProfile，因为您延迟加载 EP 和 UP 之间的关系。

当您执行包含时，Rails 将使用内部连接在两个表之间进行查询。使用内部联接消除了确保 UserProfile 存在的必要性，因为内部联接只会返回关系双方都存在的记录。

# expressionengine - SafeCracker 表单中的作者下拉选择字段

> ID：13410372
> 
> 赞同：0
> 
> 时间：2012-11-16T04:22:26.563
> 
> 标签：expressionengine

是否可以在 SafeCracker 表单中使用作者下拉选择字段，类似于使用以下代码的状态下拉选择字段？

```
{status_menu}
  <label for="status">Status</label>
    <select name="status" id="status">
      {select_options}
    </select>
{/status_menu} 
```

我搜索了文档和 EE 论坛，但找不到任何东西，但希望有办法做到这一点。

谢谢你的帮助，

斯特

编辑：

感谢 Tyssen 在下面的回复，我刚刚以 SafeCracker 的形式实现了这个解决方案，效果很好。不过只有一个注释 - 名称应该是 author_id 而不是作者。这是我的最终代码，包括显示条目当前作者的条件：

```
<label>Author</label>
<select name="author_id">
{exp:query sql="SELECT member_id, screen_name, group_id FROM exp_members ORDER BY screen_name ASC;"}
  <option value="{member_id}" {if "{member_id}" == "{author_id}"}selected="selected"{/if}>{screen_name}</option>
{/exp:query}
</select> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T05:42:27.407

也许使用查询模块？

```
<select name="author">
{exp:query sql="SELECT member_id, screen_name
    FROM exp_members
    WHERE group_id = X;"
}
    <option value="{member_id}">{screen_name}</option>
{/exp:query} 
```

# java - Bates and Sierra java scjp 第 2 章 has-a

> ID：13410374
> 
> 赞同：2
> 
> 时间：2012-11-16T04:22:48.413
> 
> 标签：java

```
public class Horse extends Animal {
    private Halter myHalter = new Halter();
    public void tie(LeadRope rope) {
        myHalter.tie(rope); // Delegate tie behavior to the
        // Halter object
    }
}
public class Halter {
    public void tie(LeadRope aRope) {
        // Do the actual tie work here
    }
} 
```

Horse 类中的 tie 方法是否覆盖 Halter 类中的 tie 方法？为什么 tie 方法声明和签名几乎一模一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T04:26:28.763

不，它没有覆盖 Halter 中的方法，因为 Horse 没有扩展 Halter。

这是一个代表的例子（如评论中所述）。也可能是 Facade 模式（将所有的马业务放在一个地方，即使它可以通过直接通过所有其他类来完成）。

这就是 IS-A 和 HAS-A 关系之间的区别。马有缰绳（但它不是缰绳）。

> 为什么 tie 方法声明和签名几乎一模一样？

因为他们做同样的事情：将接收器系在引导绳上。

碰巧的是，你可以将缰绳和马都系在绳子上。但在其他方面，它们是完全不同的动物（实际上，它们中只有一个是动物）。

有些人会争辩说，这可以在`Tieable`接口中抽象出来。然后调用代码可以将铅绳绑在马和缰绳上（可能还有其他东西），而无需知道任何一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T04:25:18.027

不，它没有覆盖`tie`您看到的方法，`Horse`它没有扩展`Halter`类。

方法名称保持不变，以便您可以从具有相同名称的类的实例中调用`Halter`类方法。`tie``Horse`

`tie`它只是将类方法的方法调用包装在`Halter`类的方法（具有相同的签名）中`Horse`。

# ruby-on-rails-3 - 路线中的用户名与设计

> ID：13410379
> 
> 赞同：0
> 
> 时间：2012-11-16T04:23:47.787
> 
> 标签：ruby-on-rails-3, devise, routes

我正在努力让用户名显示在与设计相关的路线中。

如何让以下路线显示？

www.blabla.com/username/edit
www.blabla.com/username/event/id

我必须在范围内声明一个范围吗？谢谢您的帮助。

现在我的路线文件看起来像这样

```
Weplanthings::Application.routes.draw do
  resources :vendors

  resources :venues

  resources :events

  get "profiles/index"

  get "users/index"

  get "users/show"
  get 'tags/:tag', to: 'events#index', as: :tag

   authenticated :user do
     root :to => 'home#index'
   end
   match '/event/new', :to => 'events#new'
   root :to => "home#index"
  devise_for :users do
    get "/login" => "devise/sessions#new"
    match '/login', :to => 'devise/sessions#new'
    get "/logout" => "devise/sessions#destroy"
    match '/logout', :to => 'devise/sessions#destroy'
    get "/edit" => "devise/sessions#edit"
    match '/edit', :to => 'devise/sessions#edit'
    scope ":username", :as => "user" do
      #resources :users
      match '/', :to => 'profiles#index'
      match '/edit', :to => 'devise/sessions#edit'
      match '/event/:id', :to => 'events#show'

    end
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T20:07:02.703

我的建议是让您使用[friendly_id](https://github.com/norman/friendly_id) gem。

只需一行代码，就可以更容易地做你想做的事。

# mysql - 基于多个字段的比较剔除重复项

> ID：13410381
> 
> 赞同：1
> 
> 时间：2012-11-16T04:24:01.587
> 
> 标签：mysql, sql, optimization, duplicates

我正在开发一个接收和解析以结构化方式格式化的电子邮件并将信息保存到 MySQL 数据库的系统。每封电子邮件都描述了一个特定的事件。但是，有时单个事件可能会生成多封电子邮件，因为调度员更新事件详细信息时会发送一封新电子邮件。随着新信息的添加，这可能会在几分钟内发生多次。

我正在尝试编写一个查询，该查询将仅选择描述给定事件的最新行。

下面是表格的外观示例。请注意`EventID`'`3`和`4`指的是同一事件。事件`4`只是最近收到的包含更多详细信息的电子邮件。人类可以快速查看地址、事件类型和接收时间，并推断它们指的是同一事件。问题是：我如何才能将其翻译成具有合理准确性的查询？

```
EventID    EventReceived        EventAddress        EventType      EventDetails
4          11-15-2012 22:55     1234 Anywhere Ln    Fall           In backyard. Possible fracture.
3          11-15-2012 22:54     1234 Anywhere Ln    Fall           In backyard.
2          11-15-2012 17:04     4321 Freedom Ct     Heart Attack   Short of breath. Took 2 NTG.
1          11-15-2012 13:43     9871 Main St        Traffic Crash  2 vehicles in intersection. Fluid leaking from vehicle. 
```

当我查询数据库时，我希望收到的是：

```
EventID    EventReceived        EventAddress        EventType      EventDetails
4          11-15-2012 22:55     1234 Anywhere Ln    Fall           In backyard. Possible fracture.
2          11-15-2012 17:04     4321 Freedom Ct     Heart Attack   Short of breath. Took 2 NTG.
1          11-15-2012 13:43     9871 Main St        Traffic Crash  2 vehicles in intersection. Fluid leaking from vehicle. 
```

起初，我试过这个：

```
SELECT * FROM table_name WHERE (EventID) IN (SELECT MAX(EventID) FROM table_name GROUP BY EventAddress) ORDER BY EventReceived DESC; 
```

一般来说，它似乎有效，尽管至少有两个问题：

*   即使有几百条记录，查询也很慢（约 15 秒）
*   我怀疑我错过`EventAddress`了相同的事件，但是这些事件相隔几天。这些显然不是同一个事件，但可能会被卷起，因为我只抓住`EventID`分组地址中的最高值。

所以：

*   如何提高查询效率，以及
*   我如何解释时间因素的重要性？（我可以对应该被视为同一事件的事件施加任意时间限制；例如 15 分钟）。

**将这个逻辑放在我的应用程序中而不是依赖于 SQL 查询是否可取？**

感谢所有做到这一点并且有任何可能有用的想法的人！

注意：我看了一下[这个问题](https://stackoverflow.com/questions/6471463/how-to-delete-duplicates-in-sql-table-based-on-multiple-fields)，认为它可能会有所帮助，但我不确定我是否可以使它工作，因为时间不会完全相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T13:40:57.533

你可以尝试这样的事情：

```
SELECT t1.* 
FROM table_name t1
LEFT JOIN table_name t2 ON t2.EventAddress = t1.EventAddress AND t2.EventReceived > t1.EventReceived 
WHERE t2.EventID IS NULL 
```

我目前无法测试语法，但想法是针对更新的相同事件自行加入表，并且只保留没有更新条目的事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T04:45:38.477

一种可能的优化解决方案是运行频繁的过程来删除重复项。

例如：每 10 分钟运行一次脚本，查看过去 10-11 分钟内的所有记录，找出重复项并将其删除。

脚本执行的频率及其运行的时间段最好由您的系统要求确定。

# scala - “推断函数中使用的类型是文字”？

> ID：13410384
> 
> 赞同：0
> 
> 时间：2012-11-16T04:24:23.887
> 
> 标签：scala, type-inference

在“Scala in Depth”中有一个例子，作者解释了 scala 如何对传递给方法的参数进行某种程度的推断。例如，如下所示：

```
def myMethod(functionLiteral: A => B):Unit
myMethod({ arg:A => new B})
myMethod({ arg => new B}) 
```

为了弄清楚作者在说什么，我在 REPL 中做了以下操作：

```
def myMethod(functionLiteral: Boolean => Boolean):Unit = {}
myMethod({a:Boolean => true})
myMethod({a => true}) 
```

这里发生的唯一具有启发性的事情是编译器不会抛出错误。

作者是否想说编译器将函数参数 a 推断为布尔值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T10:24:19.317

> 作者是否想说编译器将函数参数 a 推断为布尔值？

绝对地。给定以下方法：

```
def myMethod(functionLiteral: Boolean => Boolean):Unit = {} 
```

编译器知道参数 to`myMethod`是一个接受布尔参数的函数，因此不需要您指定它。换句话说，以下`a`是明确的布尔参数：

```
myMethod{a => true} 
```

现在，值得注意的是，这在与重载混合时不再起作用：

```
def myMethod(functionLiteral: Boolean => Boolean):Unit = {}
def myMethod(functionLiteral: Int => Boolean):Unit = {}
myMethod{a => true} // error: missing parameter type 
```

原因是它无法明确判断`a`是类型`Boolean`还是`Int`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T04:32:33.943

是的，作者说不需要指定它`a`是`Boolean`in`myMethod({a => true})`因为类型是`Boolean => Boolean`

==原始答案使第一位编译但有点错过了==

它需要用 键入`[A,B]`。

```
def myMethod[A,B](functionLiteral: A => B): Unit = {}
myMethod((arg:String) => arg.length)
myMethod((arg:Int) => (1 to arg).map(_ *2)) 
```

我修改它以返回函数，以便您可以看到 repl 中的类型。

```
scala> def myMethod[A,B](functionLiteral: A => B): A => B = functionLiteral
myMethod: [A, B](functionLiteral: (A) => B)(A) => B

scala> myMethod((arg:String) => arg.length)
res11: (String) => Int = <function1>

scala> res11("hello world!")
res12: Int = 12

scala> myMethod((arg:Int) => (1 to arg).map(_ *2))
res13: (Int) => scala.collection.immutable.IndexedSeq[Int] = <function1>

scala> res13(4)
res14: scala.collection.immutable.IndexedSeq[Int] = Vector(2, 4, 6, 8) 
```

# c++ - c++ stl卷积

> ID：13410385
> 
> 赞同：12
> 
> 时间：2012-11-16T04:24:35.950
> 
> 标签：c++, algorithm, stl, convolution

是否有一个很好的算法实现来计算 C++ STL 中两个范围的**卷积**（甚至提升）？即带有原型的东西（两个范围`a..b`和的卷积`c..d`）：

```
template< class Iterator >
void convolution(Iterator a, Iterator b, Iterator c, Iterator d); 
```

修改`a..b`范围

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T06:56:44.543

是的 std::transform

```
std::transform(a, b, c, a, Op);

// a b is the the first input range
// c   is the start of the second range (which must be at least as large as (b-a)
// 
// We then use a as the output iterator as well.

// Op is a BinaryFunction 
```

要在评论中回答有关如何执行状态累积的评论：

```
struct Operator
{
    State& state;
    Operator(Sate& state) : state(state) {}
    Type operator()(TypeR1 const& r1Value, TypeR2 const& r2Value) const
    {
        Plop(state, r1Value, r2Value);
        return Convolute(state, r2Value, r2Value);
    }
};
State  theState  = 0;
Operator Op(theState); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T01:27:27.693

我不太确定从两个序列到这两个序列之一的“卷积”应该是什么：这似乎与我的理解不同。下面是使用可变数量的迭代器的[卷积版本。](http://en.wikipedia.org/wiki/Convolution_%28computer_science%29)因为我现在实在是太懒了，所以我将使用一个不常见的概念，将目标迭代器作为第一个参数而不是最后一个参数传递。这是相应`zip()`算法的实现：

```
#include <tuple>

namespace algo
{
    template <typename... T>
    void dummy(T...)
    {
    }

    template <typename To, typename InIt, typename... It>
    To zip(To to, InIt it, InIt end, It... its)
    {
        for (; it != end; ++it, ++to) {
            *to = std::make_tuple(*it, *its...);
            algo::dummy(++its...);
        }
        return to;
    }
} 
```

下面是一个简单的测试程序，我用来验证上面的内容是否符合我的预期：

```
#include <deque>
#include <iostream>
#include <iterator>
#include <list>
#include <vector>

enum class e { a = 'a', b = 'b', c = 'c' };

std::ostream& operator<< (std::ostream& out,
                          std::tuple<int, double, e> const& v)
{
    return out << "["
               << std::get<0>(v) << ", "
               << std::get<1>(v) << ", "
               << char(std::get<2>(v)) << "]";
}

int main()
{
    typedef std::tuple<int, double, e> tuple;
    std::vector<int>   v{ 1, 2, 3 };
    std::deque<double> d{ 1.1, 2.2, 3.3 };
    std::list<e>       l{ e::a, e::b, e::c };
    std::vector<tuple> r;

    algo::zip(std::back_inserter(r), v.begin(), v.end(), d.begin(), l.begin());

    std::copy(r.begin(), r.end(),
              std::ostream_iterator<tuple>(std::cout, "\n"));
} 
```

# magento - 类别元关键字，Magento 中的描述问题

> ID：13410386
> 
> 赞同：0
> 
> 时间：2012-11-16T04:24:38.873
> 
> 标签：magento

没有给出类别的元描述，但有些内容正在加载..但是从哪里......？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T06:13:23.387

它采用默认配置元值。检查您的**管理员 -> 系统 -> 配置 -> 在下拉菜单中选择当前配置范围为默认配置 -> 设计 -> HTML Head**并更改默认元值...

# javascript - 如何插入里面的标签 使用javascript标记？

> ID：13410389
> 
> 赞同：0
> 
> 时间：2012-11-16T04:24:58.693
> 
> 标签：javascript, html

我是 JavaScript 新手。我只想连续创建一个带有文本框和标签的列表。

这样我就创建了一个id 为 cstList的**ul 标签。**

`listData()`并在**onclick 事件**上调用一个函数

 **在里面，我试图在**div 标签**内创建一个**输入**标签。

 **但是我在尝试运行它时遇到错误。

**这是我的代码：**

```
function listData()
    {       
        //var a = sessionStorage.getItem('id');
        if(sessionStorage == null)
        {
            alert("Session storage not supported here");
        }
        else
        {
            var ss = sessionStorage.getItem('id');
            alert("storage value is: "+ss);
        }
    var rows = prompt('Please type in the number of required rows');
    var listCode = '';

    for (var i = 0; i < rows; i++) {
        var listID = 'list_' + i.toString();
        var divID = 'div_' + i.toString();      
            listCode += '<li id="' + listID + '" onclick="itemClicked(this.id);"><div id = "'+ divID + '"> <input type= 'text' id= 'boltQTY' name= 'boltQTY' value = 'abc' size="5"/> </div></li>';
    }
    document.getElementById('cstList').innerHTML = listCode;
    } 
```

这是我收到错误的上述行：*Unexpected Identifier*

```
 listCode += '<li id="' + listID + '" onclick="itemClicked(this.id);"><div id = "'+ divID + '"> <input type= 'text' id= 'boltQTY' name= 'boltQTY' value = 'abc' size="5"/> </div></li>'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T04:31:21.023

您正在使用单引号，这会破坏字符串。

```
<input type= 'text' id= 'boltQTY' name= 'boltQTY' value = 'abc' size="5"/> 
```

应该：

```
<input type= "text" id= "boltQTY" name= "boltQTY" value = "abc" size="5"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T04:36:20.793

那必须是双单单双

```
listCode += "<li id='" + listID + "' onclick='itemClicked(this.id);'><div id = '"+ divID + "'> <input type='text' id='boltQTY' name='boltQTY' value='abc' size='5'/> </div></li>";

variable = "string" + var1 + "string=' " + var2 +"' "; 
```

只需确保加号 (+) 在双引号 ("") 之间****

# iphone - 在沙盒模式下测试来自 itunesconnect 的非免费项目？

> ID：13410390
> 
> 赞同：0
> 
> 时间：2012-11-16T04:25:08.097
> 
> 标签：iphone, ios, cordova, app-store-connect

我正在通过 phonegap IAP 插件测试应用程序购买。该插件运行良好，并且

我已经完成了对免费订阅项目的测试。但是，我也需要测试非免费项目。

从itunesconnect上的应用购买部分管理，我只能添加免费订阅项目。

没有 0.99 美元或 1.99 美元的按钮，只有一个免费订阅按钮。

是否可以从沙盒模式添加非免费项目？开发人员如何确定

他们的非免费项目在沙盒模式下工作吗？之前有没有办法测试非免费项目

提交应用程序？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T04:56:07.983

您只能从 iTunes Connect 添加免费订阅项目，因为您尚未签署应用内购买的法律协议和合同。

从该页面：

> 如果缺少某个类型，请确保您已同意所有最近的合同。法律用户必须前往 iTunes Connect 上的[“合同、税务和银行业务”](https://itunesconnect.apple.com/WebObjects/iTunesConnect.woa/wo/8.0.0.9.9.3.1.1.1.13.1.1.11.1.1)模块以同意最新的付费应用程序协议。您必须先同意[开发者计划许可协议](http://developer.apple.com/membercenter/index.action#agreements)，然后才能访问付费应用程序协议。

您的帐户必须是我的代理。

# python - python用于增量内循环

> ID：13410392
> 
> 赞同：20
> 
> 时间：2012-11-16T04:25:19.123
> 
> 标签：python, python-2.7

如何从内部循环中增加外部迭代器？

更准确地说：

```
 for i in range(0,6):
    print i
    for j in range(0,5):
      i = i+2 
```

我正进入（状态

```
0
1
2
3
4
5 
```

， 但我想要`0,2,4`

以上是我想要实现的简单想法。

这是我的Java代码：

```
str1="ababa"
str2="aba"
for(int i =0; i < str1.length; i++)
  for(int j =0; j < str2.length; j++)
       if str1[i+j]!=str[j]
           break;
       if( j ==str2.length -1)
           i=i+str2.length; 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-16T04:43:15.363

看来您想使用范围函数的 step 参数。从文档：

> range(start, stop[, step]) 这是一个通用函数，用于创建包含算术级数的列表。它最常用于 for 循环。参数必须是纯整数。如果省略 step 参数，则默认为 1。如果省略 start 参数，则默认为 0。完整形式返回纯整数列表 [start, start + step, start + 2 * step, ...] . 如果step为正，则最后一个元素是最大的start + i * step小于stop；如果 step 为负数，则最后一个元素是最小的 start + i * step 大于 stop。step 不能为零（否则会引发 ValueError）。例子：

```
 >>> range(10) [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
 >>> range(1, 11) [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
 >>> range(0, 30, 5) [0, 5, 10, 15, 20, 25]
 >>> range(0, 10, 3) [0, 3, 6, 9]
 >>> range(0, -10, -1) [0, -1, -2, -3, -4, -5, -6, -7, -8, -9]
 >>> range(0) []
 >>> range(1, 0) [] 
```

在您获得 [0,2,4] 的情况下，您可以使用：

```
range(0,6,2) 
```

或者在你的情况下什么时候是一个var：

```
idx = None
for i in range(len(str1)):
    if idx and i < idx:
        continue
    for j in range(len(str2)):
        if str1[i+j] != str2[j]:
            break
    else:
        idx = i+j 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-16T05:11:20.253

你可能会更好地使用 while 循环而不是 for 循环。我直接从java代码翻译了你的代码。

```
str1 = "ababa"
str2 = "aba"
i = 0

while i < len(str1):
  j = 0
  while j < len(str2):
    if not str1[i+j] == str1[j]:
      break
    if j == (len(str2) -1):
      i += len(str2)
    j+=1  
  i+=1 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-16T05:16:02.507

在 python 中，for 循环遍历可迭代对象，而不是递增计数器，因此您有几个选择。使用 Artsiom 推荐的跳过标志是一种方法。另一种选择是从您的范围内制作一个生成器，并通过使用 丢弃一个元素来手动推进它`next()`。

```
iGen = (i for i in range(0, 6))
for i in iGen:
    print i
    if not i % 2:
        iGen.next() 
```

但这并不完全，因为`next()`如果它到达范围的末尾可能会抛出一个 StopIteration，所以你必须添加一些逻辑来检测它并在发生这种情况时跳出外循环。

最后，我可能会使用 aw4ully 的 while 循环解决方案。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-10-12T04:55:37.213

我阅读了上述所有答案，这些答案实际上都很好。

看看这段代码：

```
for i in range(1, 4):
    print("Before change:", i)
    i = 20 # changing i variable
    print("After change:", i) # this line will always print 20 
```

当我们执行上面的代码时，输​​出如下所示，

```
Before Change: 1
After change: 20
Before Change: 2
After change: 20
Before Change: 3
After change: 20 
```

在 python for 循环中并不是试图增加`i`价值。for 循环只是分配`i`我们给的值。使用`range(4)`我们正在做的事情是我们将值赋给需要分配给 i 的 for 循环。

你可以使用`while loop`而不是`for loop`做你想做的事情，

```
i = 0
while i < 6:
    print(i)
    j = 0
    while j < 5:
        i += 2 # to increase `i` by 2 
```

这会给，

```
0
2
4 
```

谢谢 ！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-12T04:22:43.647

```
for a in range(1):

    for b in range(3):
        a = b*2
        print(a) 
```

根据您的问题，您想在内部循环的帮助下迭代外部循环。

1.  在外循环中，我们将内循环迭代 1 次。
2.  在内部循环中，我们从 0 开始迭代 2 的倍数的 3 个数字。

    ```
    Output:
    0
    2
    4 
    ```

# xml - 在xml文件上应用xsl后，显示表格后显示内容

> ID：13410393
> 
> 赞同：1
> 
> 时间：2012-11-16T04:25:22.800
> 
> 标签：xml, xslt

我对 xml 和 xsl 完全陌生，所以我很难让我的 xml 文件看起来像我想要的那样。基本上问题是表格正确显示了里面的所有东西，但 xml 的内容也显示在表格之后。所以我总是有一个表，后面跟着来自 xml 的所有数据。我正在 Firefox 16.0.2 上测试我的 xml 文件。

这是我的 xml 文件的一部分。

```
<root>
  <name id = "content_here">
    <first> Cathy </first>
    <last> Claires </last>
  </name>
  ... more names down here
</root> 
```

我试图在 Firefox 上以表格格式显示它，这就是我为 xsl 文件所做的。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="html"/>
    <xsl:template match="root">
      <html>
       <body>
         <table>
           <tr>
             <th> id </th> 
             <th> first name </th> 
             <th> last name </th>
           </tr>
           <xsl:for-each select="name"> 
            <tr>
             <td> <xsl:value-of select="@id"/> </td>
             <td> <xsl:value-of select="first"/> </td>
             <td> <xsl:value-of select="last"/> </td>
           </tr>
           </xsl:for-each>  
</table>        

<xsl:apply-templates/>
</body>
</html>
</xsl:template>
   </xsl:stylesheet> 
```

任何人都可以给我一个提示，告诉我如何在我的桌子之后摆脱多余的内容？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T04:37:54.640

该`xsl:apply-templates`指令会导致模板上下文的所有节点子节点（此处为`root`元素）通过[内置模板](http://www.w3.org/TR/xslt#built-in-rule)悬挂。从样式表中删除它应该删除内容。

请注意，尽管实际使用该`xsl:apply-templates`规则，但有更好的方法来执行此操作。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="html"/>
  <xsl:template match="root">
    <html>
      <body>
        <table>
          <tr>
            <th> id </th> 
            <th> first name </th> 
            <th> last name </th>
          </tr>
          <xsl:apply-templates/>
        </table>        
      </body>
    </html>
  </xsl:template>

  <xsl:template match="name"> 
    <tr>
      <td> <xsl:value-of select="@id"/> </td>
      <td> <xsl:value-of select="first"/> </td>
      <td> <xsl:value-of select="last"/> </td>
    </tr>
  </xsl:template>
</xsl:stylesheet> 
```

这里`xsl:apply-templates`用于将模板匹配应用到`root`您的`table`. 当一个`name`元素被匹配时，一个`tr`被创建。这通常比使用`xsl:for-each`.

# php - 组合 2 个 SQL“复杂”查询

> ID：13410396
> 
> 赞同：0
> 
> 时间：2012-11-16T04:25:44.310
> 
> 标签：php, mysql, sql, join

我不知道这些是否是 defn 的“复杂查询”，但对于像我这样的菜鸟来说，它们看起来非常复杂。

所以我这里有一个查询，会得到customer_id=5的最新图表：

```
$query = "SELECT c.Chart_ID, c.Chart_Notes
          FROM tblchart AS c WHERE c.Customer_ID=5
          ORDER BY c.Last_Edited ASC LIMIT 1"; 
```

但我必须将它与另一个使用`Chart_ID`as 外键的表相关联。如何从`tblcontent`using获取数据`tblchart.Chart_ID=tblcontent.Chart_ID`？我不能只是将其添加为：

```
$query = "SELECT c.Chart_ID, c.Chart_Notes, d.Content_Desc, d.Content_Title
          FROM tblchart AS c, tblcontent AS d
          WHERE c.Customer_ID=5 AND c.Chart_ID=d.Chart_ID
          ORDER BY c.Last_Edited DESC LIMIT 1"; 
```

我可以吗？因为这会将搜索限制为一个......使用`LIMIT 1`只是为了获取最新的，但对于后续查询（扩展查询），`tblcontent`除了我发布的第一个查询之外，我还期望从中提取多个结果。一个连接，也许，联合，或者一个复杂的查询，但是怎么做呢？请问，谁能帮帮我？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T04:42:35.783

```
SELECT  a.Chart_ID, a.Chart_Notes, c.Content_Desc, c.Content_Title
FROM    tblChart a
        INNER JOIN
        (
            SELECT Chart_ID, MAX(Last_edited) maxEdited
            FROM tblChart
            GROUP BY Chart_ID
        ) b ON a.Chart_ID = b.Chart_ID AND
                a.Last_Edited = b.maxEdited
        INNER JOIN tblcontent c
            ON a.Chart_ID = c.Chart_ID
WHERE   a.Customer_ID=5 
```

# maps - OpenLayers 请求超出范围的图块

> ID：13410398
> 
> 赞同：1
> 
> 时间：2012-11-16T04:25:45.930
> 
> 标签：maps, openlayers, tile

OpenLayers 地图正在请求超出范围的图块，并且所有地图都是粉红色的。如果我检查单个瓷砖，地址是下一个：

> /Tiles/15/ **16384** /16384.png

但生成瓦片的文件夹不包含这样的值：范围仅为：/Tiles/15/ **16099** - /Tiles/15/ **16119**

瓦片由 Maperitive 生成​​。

是 Maperitive 问题还是我应该为 OpenLayers.Map 设置其他选项？

```
map = new OpenLayers.Map("demoMap");
var cLayer2 = new OpenLayers.Layer.OSM("New Layer", 
"http://localhost:15157/Map/Tiles/${z}/${x}/${y}.png", { numZoomLevels: 19 });
map.addLayer(cLayer2);
map.zoomToMaxExtent(); 
```

# java - Java 作业 - 使用 next() 和 nextLine() 方法的扫描仪对象

> ID：13410401
> 
> 赞同：2
> 
> 时间：2012-11-16T04:26:04.220
> 
> 标签：java, java.util.scanner

我正在编写一个主要方法来为我为正在使用的 java 类编写的 Contact 类和 ContactBook 类提供菜单。我的问题是，我希望当用户输入 A、F、P 或 Q 时，我的 Scanner 对象 (kbd) 会捕获输入，使用它，并在输入下一个输入后继续前进。显然有一些我不理解的关键，因为推动返回并不总是像我预期的那样推进我的程序。我已经包含了我的代码和输出。任何提示将非常感谢。

```
 import java.util.Scanner;
  public class run{
  public static void main(String[]args){
      Scanner kbd = new Scanner(System.in);
      boolean quit = false;
      System.out.println("How many contacts would you like in your Contact Book?: ");
      int size = kbd.nextInt();
      kbd.nextLine();
      ContactBook kevin = new ContactBook(size);
      while(!quit){
         System.out.println("A - Add a contact \n"+
                            "F - Find a contact \n"+
                            "P - Prints the list \n"+
                            "Q - Quits");

         if(kbd.next().equals("A")){
            if(ContactBook.full(kevin))
               System.out.println("Contact book full!");
            else{
               Contact temp = new Contact();
               System.out.println("Enter a First Name: ");
               temp.setFirstName(kbd.nextLine());
               System.out.println("Enter a Last Name: ");
               temp.setLastName(kbd.nextLine());
               System.out.println("Enter a Phone Number: ");
               temp.setPhoneNumber(kbd.nextLine());
               System.out.println("Enter an email: ");
               temp.setEmail(kbd.nextLine());
               kevin.addContact(temp);
            }
         }
         if(kbd.next().equals("F")){
            kevin.search();
         }
         if(kbd.next().equals("P")){
            System.out.print(kevin.produce());
         }
         if(kbd.next().equals("Q")){
            quit = true;
         }
      }
   }
} 
```

这是我得到的输出。

```
 ----jGRASP exec: java run
How many contacts would you like in your Contact Book?: 
3
A - Add a contact 
F - Find a contact 
P - Prints the list 
Q - Quits
A
Enter a First Name: 
Kevin
Enter a Last Name: 
Smith
Enter a Phone Number: 
312-4567
Enter an email: 
kevin@gmail.com

 //here I keep pushing enter and am not sure why it doesn't continue back to
 //the beginning of my while loop

a
a
a
A - Add a contact 
F - Find a contact 
P - Prints the list 
Q - Quits

a

 ----jGRASP: process ended by user.

 ----jGRASP exec: java run
How many contacts would you like in your Contact Book?: 

 ----jGRASP: process ended by user.

 ----jGRASP exec: java run
How many contacts would you like in your Contact Book?: 
4
A - Add a contact 
F - Find a contact 
P - Prints the list 
Q - Quits
A
Enter a First Name: 
Enter a Last Name: 
Smith
Enter a Phone Number: 
312-4567
Enter an email: 
kevin@gmail.com

a
s
d
A - Add a contact 
F - Find a contact 
P - Prints the list 
Q - Quits 
```

同样，我是一名学生，这是我的第二堂 Java 课。我检查了许多资源，试图了解我做错了什么，但我无法将其拼凑起来。希望有人可以为我阐明这一点。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T04:30:33.927

我会摆脱所有对`kbd.next()`和替换的调用`kbd.nextLine()`。这里没有必要使用`next()`，而且由于它不处理行尾标记，它可能会搞砸你。如果你绝对需要使用`kbd.next()`，那么一定要在调用`kbd.nextLine()`之后调用，`next()`以让你的程序以合理的方式处理行尾标记。

# dynamic - 煎茶触摸动态图

> ID：13410407
> 
> 赞同：1
> 
> 时间：2012-11-16T04:26:30.243
> 
> 标签：dynamic, sencha-touch-2, sencha-charts

在 Sencha Touch 2.1 中，如何从 json 动态加载图表，以及动态字段存储、图表轴和图表系列，

我知道这可能太多了，但我需要显示多种数据，如果我为每个显示创建 1 个图表组件意味着我必须创建超过 15 个图表组件，我怕它会变得臃肿

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T20:30:51.997

我没有动态地完成这个，但我让它看起来是动态的。

我首先要求用户填写表格。

我还有多个面板，以几种不同布局的形式保存带有空商店的图表。

根据用户的表单，我仅在使用所需数据加载商店后才需要显示和隐藏面板或图表。

是的，它很笨重，而且它们是静态的，但我发现它比动态加载更容易处理。

编辑

想了想，

你试过像这样的功能吗

```
function dynamiccharts(var1, var2, var3){

return Ext.chart.Chart({
 ....
})

} 
```

变量将包括数据、url、商店等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T05:58:55.853

这是我在面板内的控制器上创建图表的示例：轴、系列、存储字段、url 成为参数，PAR_FORM 是显示视图之间差异的全局变量，我将此代码用于另一个图表（列、饼图）

```
Ext.define("Geis.controller.app", {
extend: "Ext.app.Controller",
config: {
    refs: {
        mainview: 'mainview',
        barchartview: 'barchartview',
        btnShowChartAnggaran: '#btnShowChartAnggaran'
    },
    control: {
        'btnShowChartAnggaran': {
            tap: 'onShowChartAnggaran'
        }
    }
}

createBarChart: function(fields, series_xfield, series_yfield, url) {
    this.getBarchartview().add(new Ext.chart.CartesianChart({
        id: 'barchartgenerateview',
        store: {
            fields: fields,
            proxy: {
                type: 'jsonp',
                url: url
            }
        },
        background: 'white',
        flipXY: true,
        colors: Geis.view.ColorPatterns.getBaseColors(),
        interactions: [
            {
                type: 'panzoom',
                axes: {
                    "left": {
                        allowPan: true,
                        allowZoom: true
                    },
                    "bottom": {
                        allowPan: true,
                        allowZoom: true
                    }
                }
            },
            'itemhighlight'
        ],
        series: [{
            type: 'bar',
            xField: series_xfield,
            yField: series_yfield,
            highlightCfg: {
                strokeStyle: 'red',
                lineWidth: 3
            },
            style: {
                stroke: 'rgb(40,40,40)',
                maxBarWidth: 30
            }
        }],
        axes: [{
            type: 'numeric',
            position: 'bottom',
            fields: series_yfield,
            grid: {
                odd: {
                    fill: '#e8e8e8'
                }
            },
            label: {
                rotate: {
                    degrees: -30
                }
            },
            maxZoom: 1
        },
        {
            type: 'category',
            position: 'left',
            fields: series_xfield,
            maxZoom: 4
        }]
    }));
    Ext.getCmp('barchartgenerateview').getStore().load();
},

onShowChartAnggaran: function() {
    this.getBarchartview().remove(Ext.getCmp('barchartgenerateview'), true);
    if (PAR_FORM == 'Dana Anggaran') {
        this.createBarChart(['kode', 'keterangan', 'nilai'], 'keterangan', 'nilai', 
            Geis.util.Config.getBaseUrl() + 'anggaran/laporan/json/get_dana_anggaran_json/');
    } else if (PAR_FORM == 'Alokasi Anggaran') {
        this.createBarChart(['kode', 'keterangan', 'belanja_pegawai', 'belanja_barang', 'belanja_modal'], 
            'keterangan', ['belanja_pegawai', 'belanja_barang', 'belanja_modal'], 
            Geis.util.Config.getBaseUrl() + 'anggaran/laporan/json/get_alokasi_json/');
    }

    this.getMainview().animateActiveItem(1, {type:'slide', direction:'left'});
} 
```

});

根据我的实验，如果您想激活交互功能，您也需要动态设置图表 ID，例如通过创建全局计数器变量

# php - 与php的日期比较

> ID：13410411
> 
> 赞同：0
> 
> 时间：2012-11-16T04:27:00.103
> 
> 标签：php, date, comparison

如何将日期比较为 dd/mm/YY。我想从数据库中获取大于或等于当前日期的数据；像这样的代码

```
 $current_date = date("d/m/Y");
    mysql_query("SELECT * FROM pages WHERE date>='".current_date."'"); 
```

但不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T04:32:09.030

如果没有严重的原因，请不要在 MySQL 中使用 php 时间。在您的情况下，最好的方法是`SELECT * FROM pages WHERE date>=NOW()`

# javascript - window.location 在 ajax 表单提交回调中不起作用

> ID：13410414
> 
> 赞同：0
> 
> 时间：2012-11-16T04:27:18.183
> 
> 标签：javascript, html, ajax, forms

如果用户单击登录按钮，我有表单（注册和登录）和模式背景，它们会添加到页面中。我正在使用 jquery 通过 ajax 提交表单。

```
$.post("/login",{
    "ajax":true,
    "email":$("#popup-window #login-form-email").val(),
    "password":$("#popup-window #login-form-password").val()
    },function(response){
        console.log(response);

        if(response.message=="success"){
            if(response.user.type==1){
                        console.log(window);

                        // window.location = "http://www.whatever.com/admin";
                        window[0].ownerDocument.location.href="http://www.whatever.com/admin";
                    } 
            if(response.user.type==2) window[0].ownerDocument.location.href = "http://www.whatever.com/trades";
        }else{
                $("#popup-window #login-form").append("<div id='invalid-login'>Invalid Login</div>");
            }

    },"json"); 
```

* * *

一切正常，除了

```
window.location = "http://www.whatever.com/admin"; 
```

并且 window 对象不是我所期望的。通过它，我发现以下确实有效

```
window[0].ownerDocument.location.href="http://www.whatever.com/admin"; 
```

在我测试的所有内容中（IE7、IE8、IE9、chrome、firefox）。我不确定为什么会这样，或者这是否是正确的方法。

我对 javascript 和 DOM 比较陌生，我真的很想了解这里发生了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T16:40:54.060

利用`window.location.href = "http://www.whatever.com/admin";`

# sql - 带有空值的 SQL 插入语句？

> ID：13410415
> 
> 赞同：0
> 
> 时间：2012-11-16T04:27:39.417
> 
> 标签：sql, sql-server, null, insert-into

我试图将数据插入到具有可以为 Null 的属性的表中。但是，我不确定如何使用我的 SQL 语句来完成此操作。

```
INSERT INTO [dbo].[INVOICE]
           ([INV_ID]
           ,[EMP_ID]
           ,[WAR_ID]
           ,[REP_ID]
           ,[FIN_ID]
           ,[INV_DATE]
           ,[INV_PRICE])
     VALUES
(5655,8,1**,,**3,'7/5/2000',75880),
(9749,1,1**,,**1,'11/26/2002',58881),
(9909,3,1**,187,**3,'12/27/2012',64859); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T04:30:57.513

```
INSERT INTO [dbo].[INVOICE]
           ([INV_ID]
           ,[EMP_ID]
           ,[WAR_ID]
           ,[REP_ID]
           ,[FIN_ID]
           ,[INV_DATE]
           ,[INV_PRICE])
     VALUES (5655,8,1**,NULL,**3,'7/5/2000',75880), (9749,1,1**,NULL,**1,'11/26/2002',58881), (9909,3,1**,187,**3,'12/27/2012',64859); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T04:30:31.463

```
INSERT INTO [dbo].[INVOICE]
           ([INV_ID]
           ,[EMP_ID]
           ,[WAR_ID]
           ,[REP_ID]
           ,[FIN_ID]
           ,[INV_DATE]
           ,[INV_PRICE])
     VALUES
(5655,8,1,NULL,3,'7/5/2000',75880),
(9749,1,1,NULL,1,'11/26/2002',58881),
(9909,3,1,NULL,3,'12/27/2012',64859); 
```

你可以用它`NULL`来表示 null

# postgresql - Play Framework + Heroku + Postgres 无法连接

> ID：13410422
> 
> 赞同：1
> 
> 时间：2012-11-16T04:29:05.403
> 
> 标签：postgresql, heroku, playframework-2.0

我一直在玩我的游戏！在 Heroku 上运行的框架 java 应用程序，我认为我已将其范围缩小到不喜欢 Heroku 的 DATABASE_URL 参数的 Postgres JDBC 驱动程序，因为它以 postgres: 而不是 postgresql: 开头。

配置游戏的正确方法是什么！2.0 应用程序连接到 Heroku 提供的 Postgres 实例？

我尝试了以下变体：PLAY_OPTS="-Ddb.default.url=$DATABASE_URL -Ddb.default.driver=org.postgresql.Driver"

但是在启动时，我得到一个 SQLException，表明找不到 $DATABASE_URL 的合适驱动程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T05:03:25.803

无需将它们作为系统属性传递，您可以在`application.conf`文件中获取 Heroku 环境变量

```
...
db.default.driver=org.postgresql.Driver
db.default.url=${DATABASE_URL} 
```

然后在你的`Procfile`

```
web: target/start -Dhttp.port=${PORT} ${JAVA_OPTS} -Dconfig.resource=application.conf 
```

它应该`DATABASE_URL`获取 Heroku 环境的属性。虽然，我建议创建一个特定于 Heroku 环境的配置文件（即 heroku-prod.conf），但这只是一个示例。

# wpf - 具有构造函数依赖项的自定义控件未在 VS 设计器中加载

> ID：13410423
> 
> 赞同：0
> 
> 时间：2012-11-16T04:29:07.063
> 
> 标签：wpf, dependency-injection, unity-container

我想不通这个。我有一个 WPF 应用程序，它使用带有 Unity 构造函数依赖注入的 MVVM 模式。在应用程序中，我使用自定义控件。一开始一切都很好：我将控件添加到我的主窗口，它在 VS 设计器中显示得很好。然后我想让控件做一些有用的事情，为此，它需要一个数据提供者。我决定提供它的最佳方法是将提供程序添加为构造函数中的依赖项。

那是一切都向南走的时候。尽管程序按预期运行，但 VS 设计器无法实例化控件。我构建了一个简单的应用程序来说明我的困境。

MainWindow 后面的代码：

```
using System.Windows;
using System.Windows.Controls;
using Microsoft.Practices.Unity;

namespace DependencyInjectionDesigner
{
    public interface IDependency { }

    class Dependency : IDependency { }

    class DependentControl : Control
    {
        public DependentControl()
            : this(App.Unity.Resolve<IDependency>()) { }
        public DependentControl(IDependency dependency) { }
    }

    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }
    }
} 
```

主窗口 XAML：

```
<Window x:Class="DependencyInjectionDesigner.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:DependencyInjectionDesigner"
        Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <Style TargetType="{x:Type local:DependentControl}">
            <Setter Property="Margin" Value="30"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type local:DependentControl}">
                        <Border BorderBrush="Green" Background="Gainsboro"/>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>
    <Grid>
        <local:DependentControl/>
    </Grid>
</Window> 
```

背后的应用程序代码：

```
using System.Windows;
using Microsoft.Practices.Unity;

namespace DependencyInjectionDesigner
{
    public partial class App : Application
    {
        public static IUnityContainer Unity { get; private set; }

        protected override void OnStartup(StartupEventArgs e)
        {
            if (Unity != null) return;
            Unity = new UnityContainer();
            Unity.RegisterType<IDependency, Dependency>(
                new ContainerControlledLifetimeManager());
        }
    }
} 
```

我认为问题在于 VS 设计器在更新控件之前不知道要注册 IDependency 类型。我对么？有没有办法解决这个问题？

我正在使用 VS 2010 Ultimate 和 .Net 4.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T04:40:37.580

VS 设计器将尝试使用 new 调用零参数构造函数来在设计器中创建控件；它一无所知，也不会尝试通过您的容器解决。此外，您的 App.Unity 属性对设计器不可用，安装代码也无法运行。

最好将控件的构造函数更改为使用仅存根的设计时数据提供程序，而不是在使用该构造函数时尝试通过容器解析。

# macos - COCOA MAC 中的 NSString 和 Unicode

> ID：13410424
> 
> 赞同：0
> 
> 时间：2012-11-16T04:29:14.420
> 
> 标签：macos, cocoa, nsstring, unicode-string

我正在开发一个 MAC (COCOA) 应用程序，我在其中输入特殊字符，如 (............) 但是当我打印该字符串时，它正在转换为一些 unicode 字符，如 \u201a\u00c4 \u00b6\u201a\u00c4\u00b6\u201a，我不想将这些字符发送到服务器，我想发送（......）。

我如何在 MAC COCOA 中实现这一点。我尝试了以下链接但没有帮助：

[使用 Objective C/Cocoa 对 unicode 字符进行转义，即 \u1234](https://stackoverflow.com/questions/2099349/using-objective-c-cocoa-to-unescape-unicode-characters-ie-u1234?lq=1)

[NSString 替换 unicode 字符](https://stackoverflow.com/questions/6704762/nsstring-replace-unicode-characters)

# php - 字符串中的HTML变量？

> ID：13410425
> 
> 赞同：-1
> 
> 时间：2012-11-16T04:29:14.523
> 
> 标签：php

当我使用此代码时：

```
 $message = "Transaction ID: " . echo $transid . "\n\nURL: " . echo $url . "\n\nAnchor Text: " . echo $anchortext . "\n\nEmail: " . echo $email; 
```

我收到此错误：

> 解析错误：语法错误，第 35 行 [file location] 中出现意外 T_ECHO

第 35 行是上面的代码行。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T04:31:16.870

当您尝试“构建”您的字符串时，您不需要这些`echo`语句。

例如，您可以像这样连接字符串：

```
$str = "first part" . "second part"; 
```

或者

```
$str = "first part" . $someVariable; 
```

在您的情况下，您只需执行以下操作：

```
$message = "Transaction ID: " . $transid . "\n\nURL: " . $url . "\n\nAnchor Text: " . $anchortext . "\n\nEmail: " . $email; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T04:33:43.890

双引号字符串允许插入变量：

```
$message = "Transaction ID: $transid\n\nURL: $url\n\nAnchor Text: $anchortext\n\nEmail: $email"; 
```

这是将脚本语言与静态语言区分开来的一项功能。利用它。

See also [What is the difference between single-quoted and double-quoted strings in PHP?](https://stackoverflow.com/questions/3446216/difference-between-single-quote-and-double-quote-string-in-php) (in particlar "[heredoc](http://php.net/heredoc)" strings).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T04:32:07.860

```
$message = "Transaction ID: " . $transid . "\n\nURL: " . $url . "\n\nAnchor Text: " . $anchortext . "\n\nEmail: " . $email; 
```

这应该适合你。

现在只需使用`$message`变量来回显您的消息。

**编辑**

收到错误的问题是因为您在`echo`字符串中使用的是：

```
$message = "Transaction ID: " . echo $transid . "\n\nURL: " . echo $url . "\n\nAnchor Text: " . echo $anchortext . "\n\nEmail: " . echo $email; 
```

# android - Android 通知 - if/else 部分都在运行

> ID：13410426
> 
> 赞同：1
> 
> 时间：2012-11-16T04:29:15.723
> 
> 标签：android, notifications, multiple-instances

我正在使用数据包侦听器在我的应用程序（ xmpp chat ）中实现通知。

直到第一个通知出现，代码工作正常，但是一旦人们点击通知，然后在第一次点击之后（ if 和 else ）的代码都用完了。我无法获得解决方案，而且它也很奇怪，IF/ELSE 代码如何运行 - 在第一次通知点击之后。

代码

```
PacketFilter filter = new MessageTypeFilter(Message.Type.chat);
        final PacketCollector collector = connection.createPacketCollector(filter);
        connection.addPacketListener(new PacketListener() {
            public void processPacket(Packet packetChat) {
                Message message = (Message) packetChat;
                packetChat = collector.nextResult();

                if (message.getBody() != null) {

                    fromName = StringUtils.parseBareAddress(message
                            .getFrom());
                    Log.i("XMPPClient", "Got text [" + message.getBody()
                            + "] from [" + fromName + "]");
                    // messages.add(fromName + ":");
                    mMessageItem = new MessageItemDataClass();
                    mMessageItem.isSendMessage = false;
                    mMessageItem.messageText = message.getBody();
                    messages.add(mMessageItem);

                    //to add the packet message in the layout only when the user is on the same friend's screen
                    //for anonymous chat
                    if(packetChat.getFrom().equalsIgnoreCase(refineFromjId(frienduserID)+"/Smack")){

                        messages.add(mMessageItem);
                    }
                    else{
                        if(checkPresence=true){
                        notificationforChat(fromName.substring(0,fromName.indexOf("@"))+":1212 "+message.getBody(),packetChat.getFrom(),0);
                        }
                    }

                    //messages.add(mMessageItem);
                    // Add the incoming message to the list view
                    mHandler.post(new Runnable() {
                        public void run() {
                            //simply turn around to the last of the screen
                            mList.setSelection(mList.getCount());

                            lastIndex = mList.getLastVisiblePosition()+1;
                            if (mList.getFirstVisiblePosition() > lastIndex || mList.getLastVisiblePosition() <= lastIndex) {
                                //mList.smoothScrollToPosition(lastIndex);
                                customAdapter.notifyDataSetChanged();
                                mList.setSelection(mList.getCount());

                                dbhHelper.close();

                            }else{
                                mList.setSelection(mList.getCount());
                                customAdapter.notifyDataSetChanged();

                                dbhHelper.close();

                            }
                        }
                    });
                }
            }               
        }, filter); 
```

通知

```
public void notificationforChat(CharSequence message,String toJid, int notificationID) {

        int notificationCount = 1;
        String ns = Context.NOTIFICATION_SERVICE;
        NotificationManager mNotificationManager = (NotificationManager) getSystemService(ns);
        int icon = R.drawable.ic_launcher;
        CharSequence tickerText = message;
        long when = System.currentTimeMillis();
        Notification notification = new Notification(icon, tickerText, when);
        //notification.number = notificationCount++;
        Context context = getApplicationContext();

        CharSequence contentTitle = "Chat";
        CharSequence contentText = message;
        Intent notificationIntentforChat = new Intent(this, UserChatActivity.class);
        notificationIntentforChat.putExtra("userNameVal", toJid);       
        PendingIntent contentIntent = PendingIntent.getActivity(this, 0,
                notificationIntentforChat, PendingIntent.FLAG_UPDATE_CURRENT);
        notification.setLatestEventInfo(context, contentTitle, contentText,
                contentIntent);
        notification.flags |= Notification.FLAG_AUTO_CANCEL;
        notification.defaults = Notification.DEFAULT_ALL;   
        mNotificationManager.notify(notificationID, notification);
    } 
```

如果有人可以，请帮助我！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T04:38:53.067

您的函数可能会在不同的条件下同时被多次调用（可能是两次）......所以您会感觉到 if 和 else 被调用。尝试使用一个标志来限制代码块被执行的次数，或者设置一个计数器来检查代码块是否被执行了多次。将您计划使用的计数器或标志变量设为静态，以便您可以检测到来自您可能在不知不觉中创建的不同实例的调用。

# php - 多维csv

> ID：13410433
> 
> 赞同：0
> 
> 时间：2012-11-16T04:30:21.577
> 
> 标签：php, csv

我正在尝试使用 php 读取 CSV 文件。我总是遇到这样的情况，我知道数据处于某种结构中。但是，我有一个 CSV，其中每一行可能有不同数量的项目。

这是一个小例子：

```
121, 32, 28, 23, 43   
322, 43, 43, 44  
435, 23, 43  
343, 56, 56, 678 
```

我想在我想要输出的地方输出一些东西：
第 1 行中的第一个数字，第 1 行中的第二个数字，第 1 行中的第三个数字 - 换行符
第 1 行中的第一个数字，第 1 行中的第二个数字，第 4 行中的数字1 - 换行符
第 1 行的第一个数字，第 1 行的第二个数字，第 1 行的第 5 个数字 - 换行符

第 2 行中的第一个数字，第 2 行中的第二个数字，第 2 行中的第 3 个数字 - 换行符
第 1 行中的第一个数字，第 1 行中的第二个数字，第 2 行中的第 4 个数字 - 换行符

等等........

我只是很难弄清楚如何嵌套这些循环。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T04:43:14.210

根据您发布的内容，我想出了这个模型。我希望它有所帮助。

```
$csv = array(
    array(121, 32, 28, 23, 43),
    array(322, 43, 43, 44),
    array(435, 23, 43),
    array(343, 56, 56, 678)
);

foreach($csv as $row){
    foreach($row as $key=>$column){
        if($key<2){
            continue;
        }
        echo $row[0].', '.$row[1].', '.$column.'<br>';
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T04:43:31.673

我不明白有什么问题。

您可以将该文件读入二维数组。

```
$file = "file.csv";
$data_arr = array();

if (($handle = fopen($file, 'r')) !== FALSE)
{

    $rownum = 1; // change to 0 to start counting from 0

    while (($row = fgetcsv($handle, 0, ",")) !== FALSE)
    {

        $cellnum = 1; // change to 0 to start counting from 0

        foreach($row as $cell)
        {
            // optional charset conversion
            // $cell = iconv("windows-1250", "UTF-8", $cell);

            $data_arr[rownum][cellnum] = $cell;
            $cellnum++;
        }
        $rownum++;
    }
    fclose($handle); // close file

}
else
{
    echo "Error. Cant open ".$file;
} 
```

# xss - 在 siteminder fcc 文件中发出 XSS 攻击

> ID：13410434
> 
> 赞同：1
> 
> 时间：2012-11-16T04:30:30.367
> 
> 标签：xss, siteminder

我有任何 Fcc 文件，其中包含一些隐藏变量，测试团队正在使用参数**TARGET=-SM-http%3a%2f%2fgrow%2egoogle%2ecom%2f%22%20%73%54%79%4c% 进行攻击65%3d%58%3a%65%58%70%52%65%53%73%49%6f%4e%28%61%6c%65%72%74%28%34%37%36%38% 33%29%29%20%22** 使目标变量如下所示

INPUT type='hidden' name='target' value='' STYLE= xss:expression(alert('attack alert'))" ' 这将导致有限循环中的警报消息

我的表单包含一些表单值，其中隐藏 name="target" value="$$target$$" name="smauthreason" value="$$smauthreason$$"

这些表单值将分配给表单元素

那么如何避免xss攻击问题

# ruby - Ruby/Rdoc 中的“未记录”常量

> ID：13410443
> 
> 赞同：3
> 
> 时间：2012-11-16T04:31:04.533
> 
> 标签：ruby, rdoc

以下代码被剪断：

```
# ansi console color constants
COLOR_BLACK = 0
COLOR_RED = 1
COLOR_GREEN = 2
COLOR_YELLOW = 3
COLOR_BLUE = 4
COLOR_MAGENTA = 5
COLOR_CYAN = 6
COLOR_WHITE = 7

# functional color aliases
COLOR_WARN = COLOR_YELLOW
COLOR_ALERT = COLOR_RED
COLOR_CONFIRM = COLOR_GREEN
COLOR_NOTE = COLOR_BLUE 
```

被报告为 10 个未记录的常量。有没有办法在 RDoc 中“按组注释常量”？单独记录每个常量会有点愚蠢，我不想从 doc.xml 中省略它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T14:22:24.857

在我建议实施一个`:constlist:`指令后，我从一个 rdoc 开发人员的每封邮件中得到以下答案，该指令将被`COLOR_BLACK = 0`简单地记录为**COLOR_BLACK(0)**：

> 我会看看我能做什么，但我可能无法将它添加到 RDoc 4.0，因为我的时间有限。
> 
> 我想我可以通过使用单独的指令将常量放在一个部分（内部）中来完成这项工作，该指令也将它们标记为用于覆盖报告的记录。

# c++ - 如何在 ADT 中决定什么是私有的，什么是公开的？

> ID：13410444
> 
> 赞同：0
> 
> 时间：2012-11-16T04:31:10.420
> 
> 标签：c++

我刚刚开始学习 C++ 中的 ADT，我想知道是否有一个通用规则来决定方法或变量应该是公共的还是私有的。公开“关于表示的具体细节”的方法意味着什么不适合作为公共成员包含在内？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T04:41:22.363

ADT 不应该有任何成员变量，并且因为私有成员函数是实现的一部分，所以它们也不应该有任何成员变量。

ADT 是对接口的描述。类的接口（通常）是一组公共成员函数，外部世界使用这些函数与底层对象进行交互。短语“有关表示的具体细节”是指有关如何表示某物的信息。例如，在 C++ 中，`vector`s 在内部存储为动态分配的数组。这个事实对于它们作为动态列表的使用并不重要。因此，它不包含在界面中。

# javascript - 如何在基于 corousel.js 的滑块中一次只显示 5 张幻灯片

> ID：13410445
> 
> 赞同：0
> 
> 时间：2012-11-16T04:31:13.113
> 
> 标签：javascript, css

这是我正在尝试使用的滑块。我有超过 25 张幻灯片，当我尝试这样做时，它会动态缩小图像大小并在页面上放置近 10 张幻灯片我只想在任何给定时间看到 5 张幻灯片

关于如何在 Visible html 页面上仅获取 5 张幻灯片的任何修复

# google-drive-api - 头部修订未按预期适用于 Google Docs 格式

> ID：13410459
> 
> 赞同：3
> 
> 时间：2012-11-16T04:32:41.920
> 
> 标签：google-drive-api

对于“原生”谷歌文档（也许它适用于所有谷歌格式，我没有检查过），在[revisions.get](https://developers.google.com/drive/v2/reference/revisions/get)方法中使用 head 返回第一个修订而不是最新的。似乎它只依赖于[revisions.list](https://developers.google.com/drive/v2/reference/revisions/list)方法返回的修订的顺序，并且该顺序并不是真正统一的（例如，Google 文档首先列出最新的）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T01:24:02.660

这看起来像一个错误，我设法重现它。我向工程师报告了这个问题，我会在收到他们的回复后立即更新这个答案。

更新 12/2：现在已修复，修复将在 1-2 周内生效

# c++ - 成员函数的 `const` 和非 `const` 版本是否符合重载的条件？

> ID：13410460
> 
> 赞同：3
> 
> 时间：2012-11-16T04:32:43.133
> 
> 标签：c++

声明一个同名的`const`非成员函数是否被归类为重载？`const`

```
iterator find ( const key_type& x );
const_iterator find ( const key_type& x ) const; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T04:39:43.900

是的，这是超载。该术语定义`[over]/1`为：

> 当在同一范围内为单个名称指定两个或多个不同的声明时，该名称称为重载。

在这里，显然有两个不同的同名声明。

# java - 为什么在使用 AlarmManager 为其设置 PendingIntent 时会立即调用请求的组件？

> ID：13410463
> 
> 赞同：2
> 
> 时间：2012-11-16T04:33:02.703
> 
> 标签：java, android

在我的应用程序中，我将时间（以毫秒为单位）传递给下面的此方法，但是当调用此方法时，我在清单中为此意图注册的 BroadCastReciever 会立即被调用，甚至在它开始的那一秒就关闭音频播放。（BroadcastReciever 的目的是停止音频播放，但在通过以下方法传递给警报管理器的选定时间...）

我尝试了类似的配置，包括 getService，但在为该组件设置警报管理器时，即使该组件仍然被立即调用。

我偶尔会遇到带有空指针异常的 ANR，因为停止播放的 BroadcastReciever 会尝试停止尚未初始化的 MediaPlayer 对象，因为在设置它时会立即调用停止播放的挂起意图。

```
private void makeAlarm(long timeInFuture){
        Intent INTENT = new Intent("myapp.stopplayback");
        AlarmManager alarmManager=(AlarmManager)this.getSystemService(Context.ALARM_SERVICE);

        PendingIntent pi = PendingIntent.getBroadcast(this, 0, INTENT, 0);
        alarmManager.set(AlarmManager.RTC_WAKEUP, timeInFuture, pi);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T08:27:13.637

正如[文档](http://developer.android.com/reference/android/app/AlarmManager.html#set%28int,%20long,%20android.app.PendingIntent%29)中所写：

> triggerAtTime 闹钟应该响起的时间，使用适当的时钟（取决于闹钟类型）

因此，您应该提供**实时**警报。如果您想在一分钟后发出警报，请提供

```
System.currentTimeMillis() + 60*1000; 
```

# sql - 以 Oracle 10g 为中心

> ID：13410464
> 
> 赞同：4
> 
> 时间：2012-11-16T04:33:27.623
> 
> 标签：sql, oracle, oracle10g, pivot

我正在使用oracle 10g。我有一个临时表 TEMP。

TEMP具有以下结构：-

```
USER COUNT TYPE
---- ----- ----
   1    10   T1
   2    21   T2
   3    45   T1
   1     7   T1
   2     1   T3 
```

我需要一个查询，它将显示所有类型都有列名，类型可以有任何值`T1, T2,..Tn`，结果如下：-

```
USER T1 T2 T3
---- -- -- --
   1 17  0  0
   2  0 21  1
   3 45  0  0 
```

用户列将显示所有用户，`T1, T2`列将显示类型总数。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-16T13:00:08.613

在 Oracle 10g 中，没有`PIVOT`函数，但您可以使用聚合复制它`CASE`：

```
select usr,
  sum(case when tp ='T1' then cnt else 0 end) T1,
  sum(case when tp ='T2' then cnt else 0 end) T2,
  sum(case when tp ='T3' then cnt else 0 end) T3
from temp
group by usr; 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!4/a42bb/1)

如果您有 Oracle 11g+，那么您可以使用以下`PIVOT`功能：

```
select *
from temp
pivot
(
  sum(cnt)
  for tp in ('T1', 'T2', 'T3')
) piv 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!4/68e3f/4)

如果您有未知数量的值要转换，那么您可以创建一个过程来生成它的动态版本：

```
CREATE OR REPLACE procedure dynamic_pivot(p_cursor in out sys_refcursor)
as
    sql_query varchar2(1000) := 'select usr ';

    begin
        for x in (select distinct tp from temp order by 1)
        loop
            sql_query := sql_query ||
              ' , sum(case when tp = '''||x.tp||''' then cnt else 0 end) as '||x.tp;

                dbms_output.put_line(sql_query);
        end loop;

        sql_query := sql_query || ' from temp group by usr';

        open p_cursor for sql_query;
    end;
/ 
```

然后执行代码：

```
variable x refcursor
exec dynamic_pivot(:x)
print x 
```

所有版本的结果都是一样的：

```
| USR | T1 | T2 | T3 |
----------------------
|   1 | 17 |  0 |  0 |
|   2 |  0 | 21 |  1 |
|   3 | 45 |  0 |  0 | 
```

编辑：根据您的评论，如果您想要一个`Total`字段，最简单的方法是将查询放在另一个`SELECT`类似于此的内部：

```
select usr,
  T1 + T2 + T3 as Total,
  T1,
  T2,
  T3
from
(
  select usr,
    sum(case when tp ='T1' then cnt else 0 end) T1,
    sum(case when tp ='T2' then cnt else 0 end) T2,
    sum(case when tp ='T3' then cnt else 0 end) T3
  from temp
  group by usr
) src; 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!4/a42bb/5)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T08:14:27.063

下面是创建表的代码：

```
CREATE TABLE TBL_TEMP
(
    USR   NUMBER
   ,CNT   NUMBER
   ,TP    VARCHAR2 (10)
);

INSERT INTO TBL_TEMP VALUES (1,10,'T1');
INSERT INTO TBL_TEMP  VALUES (2,21,'T2');
INSERT INTO TBL_TEMP  VALUES (3,45,'T1');
INSERT INTO TBL_TEMP  VALUES (1,7,'T1');
INSERT INTO TBL_TEMP  VALUES (2,1,'T3'); 
```

而且，这是您请求的代码：

```
 SELECT T1.USR
        ,SUM (T1) T1
        ,SUM (T2) T2
        ,SUM (T3) T3
    FROM (SELECT DISTINCT USR FROM TBL_TEMP) T1
        ,(SELECT T2.USR
                ,DECODE (T2.TP, 'T1', T2.CNT, 0) T1
                ,DECODE (T2.TP, 'T2', T2.CNT, 0) T2
                ,DECODE (T2.TP, 'T3', T2.CNT, 0) T3
            FROM TBL_TEMP T2) T2
   WHERE T1.USR = T2.USR
GROUP BY T1.USR; 
```

而且，结果就是你想要的。

[在此处](http://www.sqlfiddle.com/#!4/1c8b9/1/0)的 SQL Fiddle 链接中检查它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T11:20:15.250

请检查查询：

```
SET SERVEROUTPUT ON;
DECLARE
CURSOR V_CUR IS
 SELECT DISTINCT "TYPE" FROM temp_tbl;

V_QUERY CLOB;
V_COLUMNHEADING CLOB;
V_ROW V_CUR%ROWTYPE;
BEGIN
  OPEN V_CUR;
  LOOP
  FETCH V_CUR INTO V_ROW;
  EXIT WHEN V_CUR%NOTFOUND;
    V_COLUMNHEADING:=CONCAT(V_COLUMNHEADING,''''||V_ROW."TYPE"||''' AS "'||V_ROW."TYPE"||'",');
  END LOOP;

  IF NVL(V_COLUMNHEADING,' ') <> ' ' THEN
        V_COLUMNHEADING := SUBSTR(V_COLUMNHEADING,0,LENGTH(V_COLUMNHEADING)-1);
  END IF;

  V_QUERY := CONCAT(V_QUERY,'select * from (select * from temp_tbl)a pivot (sum("COUNT")for "TYPE" in ('||V_COLUMNHEADING||'))b;');
  DBMS_OUTPUT.PUT_LINE(V_QUERY);
END ; 
```

要选择数据，请使用语句`OPEN CUR_TURN_TIME FOR V_QUERY;`代替`DBMS_OUTPUT.PUT_LINE(V_QUERY);`，其中`CUR_TURN_TIME`是包中声明的游标。

# ruby - 如何从另一个线程捕获异常

> ID：13410468
> 
> 赞同：2
> 
> 时间：2012-11-16T04:33:44.493
> 
> 标签：ruby, multithreading, exception-handling

如何从另一个线程捕获异常？

*   我想为某些特定线程而不是其他线程执行此操作，因此我无法`abort_on_exception`打开`true`.
*   我想在主线程中做一些有异常的事情，所以我不能简单地对异常中引发的线程中的异常做`puts`,等。`pp`

[我在如何从](https://stackoverflow.com/questions/524019)建议使用的 ruby​​ 线程中获取错误消息中找到了答案`catch`，我认为这是我想要的方式，但我无法完全弄清楚如何去做。或者，还有更好的方法？我还找到了一个建议使用`Queue`类的答案，但担心它可能会矫枉过正。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T04:47:08.777

如果你打开，`abort_on_exception`那么你将没有机会抓住它。但是，您可以将其关闭，并在`join`对线程执行操作时简单地捕获它。

```
thread = Thread.new do
  raise "Uh oh"
end

begin
  thread.join
rescue => e
  puts "Caught exception: #{e}"
end 
```

另一种方法是让线程捕获自己的异常并将其保存在以后可以从中获取的位置。例如：

```
exceptions = { }

Thread.new do
  begin
    raise "Uh oh"
  rescue => e
    exceptions[Thread.current] = e
  end
end

sleep(1)

puts exceptions.inspect
# => {#<Thread:0x007f9832889920 dead>=>#<RuntimeError: Uh oh>} 
```

# android - 如何在 tabhost 和 actionbars 中为 Activity 构建代码

> ID：13410474
> 
> 赞同：0
> 
> 时间：2012-11-16T04:34:39.397
> 
> 标签：android, android-layout, android-emulator, android-activity

我想在 tabhost 下有几页。带有选项卡的页面在应用程序启动后大约在第 2/3 页访问。我对如何链接到 tabhost 的第一页感到困惑（从没有 tabhost 的页面）

tabhost 中的每个选项卡都是一个单独的活动。

因此，当需要将用户发送到 tabhost 中的页面时，我是否启动 Tabhost 活动（从扩展 TabActivity），创建 tabhost，然后......以某种方式选择要加载选项卡中的哪个页面？像 tabhost.myTab.trigger.start(); 而不是直接加载其中一个选项卡活动..

因此，无论何时您离开标签主机，然后再回到它，您都在重新创建它，这是构建事物的正确方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T08:33:19.440

TabHost 方法被认为是在 Android 应用程序中创建选项卡的一种非常古老的方法。如果您将活动放置在这些选项卡中，则尤其如此。

现代 Android 应用程序使用 Fragments，并使用 Action Bar 框架将这些 Fragments 放置在选项卡中。

这可以通过使用从您的主 Activity 轻松完成

```
getActionBar().setNavigationMode(ActionBar.NAVIGATION_MODE_TABS); 
```

这有几个优点。这意味着您的 Fragments 可以放置在 ViewPager 内（因此用户可以在它们之间滑动）。这也意味着您的选项卡将适应它们正在运行的设备。（在手机上，它们可能会出现在操作栏下方，但在平板电脑上，它们实际上会成为操作栏的一部分）。

根据您的实现，可以这样做，即在选项卡之间导航不会导致重新创建片段（如果这是您所追求的）。

可以在[此处找到有关如何实现操作栏选项卡的详细指南](http://developer.android.com/guide/topics/ui/actionbar.html#Tabs)

如果向后兼容性是一个问题，请查看令人惊叹的[Action Bar Sherlock](http://actionbarsherlock.com/)库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T00:44:58.207

我不完全理解你试图完成的行为。

不过，如果您不想重新发明轮子，我建议您安装 ActionBarSherlock 演示应用程序[1](https://github.com/JakeWharton/ActionBarSherlock)以检查所需的行为是否已作为库示例之一实现。如果已经完成了，那么你可以去[github](https://github.com/JakeWharton/ActionBarSherlock)项目看一下源代码，了解它是如何完成的，并为它做出贡献。

> 动作条 Sherlock 演示
> 
> [https://play.google.com/store/apps/details?id=com.actionbarsherlock.sample.demos&hl=en](https://play.google.com/store/apps/details?id=com.actionbarsherlock.sample.demos&hl=en)
> 
> 动作条 Sherlock Fragment 演示
> 
> [https://play.google.com/store/apps/details?id=com.actionbarsherlock.sample.fragments&hl=en](https://play.google.com/store/apps/details?id=com.actionbarsherlock.sample.fragments&hl=en)

# magento - Magento 搜索引擎

> ID：13410475
> 
> 赞同：2
> 
> 时间：2012-11-16T04:34:52.430
> 
> 标签：magento, search

我的网站是[http://www.godaam.com](http://www.godaam.com)。我想改进我的搜索功能。我对 magento 应用程序代码进行了一些更改，但我无法对其进行很多改进。我可以在 Magento 中合并我的产品是否有任何免费的搜索引擎，请在这里帮助我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T07:46:45.890

magento 内置搜索非常好，您只需要调整设置。做这个：

*   确保仅启用**SKU、标题、描述和快速描述**等属性进行搜索（除非您需要其他属性，例如颜色等）
*   **在System > Configuration > Catalog > Catalog Search**中调整搜索设置。
*   重建索引并进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-03T22:13:55.193

根据我的经验，与“LIKE”或“COMBINED”选项相比，FULLTEXT 搜索会返回更多相关的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-14T06:21:48.443

Magento 搜索中最缺乏的功能之一是细化。如果您搜索多个术语，它将返回更大的产品集而不是更小的产品。我们的免费扩展解决了这个问题，请注意：为了使其工作，您必须将搜索配置设置设置为 LIKE 而不是 FULLTEXT：

[目录搜索细化免费](http://www.magentocommerce.com/magento-connect/catalog-search-refinement-free.html)

# objective-c - 拖动数组中的多个 UIImageView

> ID：13410477
> 
> 赞同：0
> 
> 时间：2012-11-16T04:34:54.883
> 
> 标签：objective-c, ios, drag-and-drop, uiimageview, touch

这是我到目前为止所拥有的

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

    UITouch *touch = [[event allTouches] anyObject];

    for (UIImageView *imageView in _imageViewArray) {
            CGPoint Location = [touch locationInView:touch.view];
            imageView.center = Location;
    }   
} 
```

我面临的问题是当我移动一张图像时，它们都会跳到同一个地方。

感谢cyberpawn，这就是我所做的让它工作

```
-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [[event allTouches] anyObject];

    CGPoint oldPoint = [touch previousLocationInView:touch.view];
    CGPoint newPoint = [touch locationInView:touch.view];

    CGPoint diff = CGPointMake(newPoint.x - oldPoint.x, newPoint.y - oldPoint.y);

    for (UIImageView *imageView in _imageViewArray) {
        if (CGRectContainsPoint(imageView.frame, newPoint)) {
            CGPoint cntr = [imageView center];
            [imageView setCenter:CGPointMake(cntr.x + diff.x, cntr.y + diff.y)];

        }
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T04:43:13.003

那是因为您将它们全部移动到同一位置，您需要计算触摸位置之间的差异并将该位移添加到所有视图中。下面的代码应该可以解决您的问题！忘记 t​​ouchesBegan 并像这样覆盖 touchesMoved 方法。

```
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [touches anyObject];

    CGPoint oldPoint = [touch previousLocationInView:touch.view];
    CGPoint newPoint = [touch locationInView:touch.view];

    CGPoint diff = CGPointMake(newPoint.x - oldPoint.x, newPoint.y - oldPoint.y);

    for (UIImageView *imageView in _imageViewArray) {
        CGPoint cntr = [imageView center];
        [imageView setCenter:CGPointMake(cntr.x + diff.x, cntr.y + diff.y)];
    }
} 
```

如果您想在单击其中任何一个时单独移动它们，而不是使用下面的代码！

```
float oldX, oldY;

-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [touches anyObject];
    CGPoint pt = [touch locationInView:touch.view];
    for (UIImageView *imageView in _imageViewArray) {
        if(CGRectContainsPoint(imageView.frame, pt)) {
            oldX = imageView.center.x - imageView.frame.origin.x - pt.x;
            oldY = imageView.center.y - imageView.frame.origin.y - pt.y;
            break;
        }
    }
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [[event allTouches] anyObject];
    CGPoint pt = [touch locationInView:touch.view];

    for (UIImageView *imageView in _imageViewArray) {
        if (CGRectContainsPoint(imageView.frame, pt)) {
            [self setCenter:CGPointMake(pt.x+oldX, pt.y+oldY)];
        }
    } 
```

享受编程！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T04:37:58.663

在这里你只是这样编码。如果要移动单个图像，则必须找到该图像，并且应该单独移动该图像。

# java - 是否可以读取嵌入在 RTF 文档中的图像的路径

> ID：13410478
> 
> 赞同：2
> 
> 时间：2012-11-16T04:34:59.643
> 
> 标签：java, parsing, object, rtf

我在读取嵌入在 RTF 文档中的图像的路径时遇到问题，我想知道它可以使用 java 代码完成吗？我尝试了很多方法，但没有任何成功。我急需这个。

# windows - 来自 Windows 的蓝牙 AVRCP 控制

> ID：13410484
> 
> 赞同：7
> 
> 时间：2012-11-16T04:35:21.083
> 
> 标签：windows, bluetooth, l2cap, a2dp, avrcp

我正在尝试在我的 Android 手机和我的车载 PC 之间实现 AVRCP/A2DP 连接。A2DP 位基本上是开箱即用的，所以没有问题。我希望 PC 成为 AVRCP CT（控制器）和 A2DP 接收器。电话是 AVRCP TG（目标）和 A2DP 源。

我遇到问题的地方是我可以使用任何类型的 AVRCP 连接。Windows 7 带有一个工具栏应用程序，它至少提供了基本的播放/暂停/跳过/停止类型的功能。因此，它绝对可以与我拥有的软件一起使用，而无需任何额外的驱动程序或其他方式。然而，我的搜索在任何方式上都没有产生什么结果，或者关于创建我认为我需要的 L2CAP 连接的文档。

除非您使用 Broadcom/Widcomm 堆栈，否则 32feet.NET 库不支持 L2CAP 连接。购买新的 BT USB 设备可能是一个可行的解决方案，但目前我正试图通过软件来完成这一切:)。即像这样，尽管有一个问题没有解决（或报告为已解决）链接：[如何使用 Widcomm SDK 上的 L2CAP 建立从 Windows 7（控制器）到电话（目标）的 AVRCP 连接？](https://stackoverflow.com/questions/8997255/how-can-i-establish-an-avrcp-connection-from-windows-7-controller-to-phone-ta?rq=1)

如果可能的话，我更喜欢使用 C#，但如果我有某种库来与我的代码交互，那会很好（比如 32feet.NET 库，它在它所做的事情上运行得很好。）

这是我最接近的，但对我来说有点希腊语，不足以让我开始（我是一个嵌入式的人）：http: [//msdn.microsoft.com/en-us/library/ windows/硬件/ff536674(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/ff536674(v=vs.85).aspx)

蓝牙在 Windows 上真的是一团糟，似乎来自我的搜索吗？有多个不同的堆栈，在 API 等方面似乎都有很大的不同。

谁能指出我正确的方向？我在这里和其他地方做了很多搜索/阅读其他帖子，但并没有真正取得任何进展。

谢谢

基督教

# jquery - Jquery 自动完成功能不起作用

> ID：13410488
> 
> 赞同：1
> 
> 时间：2012-11-16T04:35:53.537
> 
> 标签：jquery, jquery-ui

我在我的 asp.net 页面中使用 JQuery 自动完成功能。当我在文本框中输入内容时，它会在文本框前面显示“无搜索结果”消息，并且不显示任何建议。我没有在其他实现中看到“无搜索结果”消息框。我的代码如下。

```
var jsonObj = "[{'value':'9a8b581d-1e23-e211-a9a4-00155d01ab06','label':'CCNA'}]";

$('#<%=txtApplicationSkills.ClientID %>').autocomplete({
        delay: 0,
        source: jsonObj            
    }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T04:44:44.487

你`jsonObj`错了。`""`尝试删除它周围的引号

[http://jsfiddle.net/4BvGj/](http://jsfiddle.net/4BvGj/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T05:06:09.580

InPlace 为此，您可以使用它。var jsonObj = "[{'value':'9a8b581d-1e23-e211-a9a4-00155d01ab06','label':'CCNA'}]";

```
var jsonObj = [{'value':'9a8b581d-1e23-e211-a9a4-00155d01ab06','label':'CCNA'}]; 
```

# c++ - 如何重构这个while循环以摆脱“继续”？

> ID：13410489
> 
> 赞同：1
> 
> 时间：2012-11-16T04:36:05.360
> 
> 标签：c++, refactoring, while-loop, continue

我有一个`while (!Queue.empty())`处理元素队列的循环。有一系列从最高优先级到最低优先级顺序的模式匹配器。当一个模式被匹配时，相应的元素会从队列中移除，并从顶部重新开始匹配（这样最高优先级的匹配器就有机会先行动）。

所以现在它看起来像这样（简化版）：

```
while (!Queue.empty())
{
    auto & Element = *Queue.begin();

    if (MatchesPatternA(Element)) {    // Highest priority, since it's first
        // Act on it
        // Remove Element from queue
        continue;
    }
    if (MatchesPatternB(Element)) {
        // Act on it
        // Remove Element from queue
        continue;
    }
    if (MatchesPatternC(Element)) {    // Lowest priority, since it's last
        // Act on it
        // Remove Element from queue
        continue;
    }

    // If we got this far, that means no pattern was matched, so
    // Remove Element from queue
} 
```

这可行，但我想以某种方式重构此循环以删除关键字的使用`continue`。

为什么？因为如果我想将模式匹配外包给外部函数，它显然会中断。例如

```
void ExternalMatching(...)
{
    if (MatchesPatternB(Element)) {
        // Act on it
        // Remove Element from queue
        continue;     // This won't work here
    }
}

while (!Queue.empty())
{
    auto & Element = *Queue.begin();

    if (MatchesPatternA(Element)) {
        // Act on it
        // Remove Element from queue
        continue;
    }
    ExternalMatching(...);
    if (MatchesPatternC(Element)) {
        // Act on it
        // Remove Element from queue
        continue;
    }

    // If we got this far, that means no pattern was matched, so
    // Remove Element from queue
} 
```

我不想写重复的 if 语句`if (ExternalMatching(...)) { ... continue; }`，我宁愿找到一种更简洁的方式来表达这个逻辑。

`MatchesPatternA`这个简化的示例可能使模式匹配更通用而不是具有不同的 , `MatchesPatternB`,`MatchesPatternC`等函数似乎是一个好主意。但在我的情况下，模式非常复杂，我还没有准备好概括它们。所以我想保持那部分原样，单独的功能。

有什么优雅的想法吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T04:47:00.867

我建议使用一个执行模式匹配的函数（但不作用于结果），然后使用一组作用于不同选项的函数：

```
enum EventType {
   A, B, C //, D, ...
};

while (!queue.empty()) {
   auto & event = queue.front();
   EventType e = eventType(event); // Internally does MatchesPattern*
                                   // and returns the match
   switch (e) {
   case A:
      processA(event);
      break;
   case B:
      processB(event); 
```

这样您就可以清楚地将匹配与处理分开，循环只是一个简单的调度程序

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T07:43:47.250

如果您可以访问 C++11，我想建议另一种解决方案。基本上我创建了一个可以在运行时调整的处理程序和操作的容器。根据您的要求，它可能对您的设计有利或不利。这里是：

```
#include <functional>

typedef std::pair<std::function<bool(const ElementType &)>,
                  std::function<void(ElementType &)> > HandlerData;
typedef std::vector<HandlerData> HandlerList;

HandlerList get_handlers()
{
  HandlerList handlers;
  handlers.emplace_back([](const ElementType &el){ return MatchesPatternA(el); },
                        [](ElementType &el){ /* Action */ });
  handlers.emplace_back([](const ElementType &el){ return MatchesPatternB(el); },
                        [](ElementType &el){ /* Action */ });
  handlers.emplace_back([](const ElementType &el){ return MatchesPatternC(el); },
                        [](ElementType &el){ /* Action */ });
  return handlers;
}

int main()
{
  auto handlers = get_handlers();
  while(!Queue.empty()) {
    auto &Element = *Queue.begin();

    for(auto &h : handlers) {
      // check if handler matches the element
      if(h.first(Element)) {
        // act on element
        h.second(Element);
        break;
      }
    }

    // remove element
    Queue.pop_front();
  }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-16T04:44:09.703

考虑一个接口：

```
class IMatchPattern
{
public:
    virtual bool MatchesPattern(const Element& e) = 0;
}; 
```

然后，您可以组织一个实现 IMatchPattern 的对象容器，以允许对每个模式匹配方法进行迭代访问。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-16T04:47:09.437

您可以将您的更改`ExternalMatching`为 return `bool`，表示处理已完成。这样，调用者将能够在必要时继续评估：

```
bool ExternalMatching(...)
{
    if (MatchesPatternB(Element) {
        // Act on it
        // Remove Element from queue
        return true;
    }
    return false;
} 
```

现在你可以这样称呼它：

```
if (ExternalMatchin1(...)) continue;
if (ExternalMatchin2(...)) continue;
...
if (ExternalMatchingN(...)) continue; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-16T08:00:08.130

好的，我最终重写了更类似于此的循环。

非常感谢和感谢 Yuushi、dasblinkenlight、David Rodríguez 的帮助；这个答案是基于他们的答案的组合。

```
bool ExternalMatching(...)
{
    bool Match;

    if ((Match = MatchesPatternX(Element))) {
        // Act on it
    } else if ((Match = MatchesPatternY(Element))) {
        // Act on it
    }

    return Match;
}

while (!Queue.empty())
{
    auto & Element = Queue.front();

    if (MatchesPatternA(Element)) {    // Highest priority, since it's first
        // Act on it
    } else if (MatchesPatternB(Element)) {
        // Act on it
    } else if (ExternalMatching(...)) {
    } else if (MatchesPatternC(Element)) {    // Lowest priority, since it's last
        // Act on it
    }

    // Remove Element from queue
} 
```

现在，我知道还有进一步的改进空间，请参阅 Mateusz Pusz 和 Michael Sh 的回答。但是，这足以回答我原来的问题，现在就可以了。我会考虑在未来改进它。

如果您想查看真实代码（非简化版），请参见此处：

[https://github.com/shurcooL/Conception/blob/38f731ccc199d5391f46d8fce3cf9a9092f38c65/src/App.cpp#L592](https://github.com/shurcooL/Conception/blob/38f731ccc199d5391f46d8fce3cf9a9092f38c65/src/App.cpp#L592)

再次感谢大家！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-16T04:53:32.927

我想建议一个工厂函数，该函数将获取元素并创建一个适当的处理程序并将接口指针返回给处理程序。

```
while (!Queue.empty())
{
    auto & Element = *Queue.begin();
    // get the appropriate handler object pointer e.g.
    IPatternHandler *handler = Factory.GetHandler(Element);
    handler->handle();
    // clean up handler appropriately
} 
```

# linux - 字体的终端转义序列

> ID：13410491
> 
> 赞同：5
> 
> 时间：2012-11-16T04:36:17.960
> 
> 标签：linux, bash, shell, terminal

**我想要开发的**：可以同时使用至少 2 种字体的终端。我将使用一种字体用于 shell 输入行，另一种字体用于命令输出。例如：

```
*用户@主机$ ls /home*
用户 用户 1 用户 2 用户 3

```

**为什么**：更具可读性的终端/外壳

**如何**：这里我有问题。可能 shell 需要生成一些新的转义序列。终端需要加载不同的字体并处理这些序列。从哪儿开始？如何定义新的转义序列，标准在哪里？

**未来**：也许有人想和我一起参与这个项目？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T18:40:41.833

控制序列的标准几乎是[XTerm 源代码中的 Xterm 控制序列文档](http://invisible-island.net/xterm/)[ctlseqs.ms](http://invisible-island.net/xterm/ctlseqs/ctlseqs.pdf)。（您可以使用命令将其转换为 PDF ，尽管该选项在 Ubuntu 12.04 上似乎已损坏）。`groff -ms -Tps ctlseqs.ms | ps2pdf - ctlseqs.pdf``-ms`

XTerm 已经支持控制序列来更改字体，但同时适用于整个终端。打开`xterm`并在你的 shell 中输入——</p>

```
echo -e "\033[?35h\033]50;#+1^G\033\\" # aka CSI ? 35 h OSC 50 ; #+1 BEL ST 
```

整个终端的字体应该改变。这个控制序列实际上也支持 True-Type 字体的名称；见第 21 页。

如果您想更改现有终端以支持更改内联字体，欢迎您选择几乎所有尚未分配的控制序列`ctrlseqs.ms`并使用它们。但是，为现有功能选择类似于控制序列的新控制序列是个好主意。

您的下一步是获取现有终端的源代码并开始挖掘。你现在用什么终端？[Konsole](https://projects.kde.org/projects/kde/kde-baseapps/konsole/repository)或[gnome-terminal](http://git.gnome.org/browse/gnome-terminal/tree/)的源代码可能比 XTerm 更容易使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T17:19:22.837

交换字体有一个标准顺序。

```
SGR 11 
```

也被称为

```
CSI 11m
ESC [ 11m 
```

相似地

```
SGR 10 
```

将切换回默认字体。

然而，正如已经评论的那样，几乎没有终端实际上​​支持这一点。使用其他渲染属性可能会更好，例如粗体/下划线/斜体。虽然注意也没有多少终端支持斜体。

以供参考

```
SGR 1   = bold
SGR 4   = underline
SGR 3   = italics 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-15T03:18:51.807

如果您对不同的字体属性（而不是不同的字体）感到满意，如果您使用 zsh，您甚至可以在不编写自己的终端仿真器的情况下实现类似的东西。您可以设置您的 shell 以发出正确的转义序列，以在提示前后和命令执行之前设置正确的终端属性（斜体、粗体、颜色等）。

假设您使用 Xterm 并希望您的提示为粗体，键入的命令行为斜体，命令输出为正常。

然后设置如下所示：

```
# bold is \e[1m and italics is \e[3m , \e[0m resets the attributes
PS1=$'\e[1m'$PS1$'\e[0;3m' # I assume you have set PS1 already
function reset-terminal-attributes { printf '\e[0m'; }
autoload add-zsh-hook
add-zsh-hook preexec reset-terminal-attributes 
```

# javascript - 有没有办法在 SVG 元素中显示光栅图像？

> ID：13410496
> 
> 赞同：3
> 
> 时间：2012-11-16T04:36:29.157
> 
> 标签：javascript, css, svg

我有以下 SVG 元素，其中包含要显示在网页地图上的标记。标记由`<image>`引用各种小型 PNG 图像的元素组成：

```
<svg id="OL_105_svgRoot" width="1246" height="373" viewBox="0 0 1246 373">
 <g id="OL_105_root" style="visibility: visible;" transform="">
  <g id="OL_vroot">
   <image id="P115" cx="843" cy="203" r="1" x="827" y="188" width="32" height="32" href="spider.png" ...>
   <image id="P119" cx="453" cy="269" r="1" x="437" y="254" width="32" height="32" href="zoo.png" ...>
   <image id="P123" cx="628" cy="82" r="1" x="612" y="67" width="32" height="32" href="wild.png" ...>
   <image id="P131" cx="10495" cy="69" r="1" x="1034" y="53" width="32" height="32" href="export.png" ...>
...
  </g>
 </g>
</svg> 
```

有什么办法可以用单个大图像文件替换这些图像并使用类似于 CSS`background-position`属性的东西来指定每个图像的查看窗口？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T08:04:57.497

将元素包装`<image>`成内部`<svg>`元素，在元素上指定一定的宽度和高度，并使用and属性在元素上指定`<svg>`“ `background-position`”可能是一种解决方案：`<image>``x``y`

```
<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%">
  <svg width="17" height="19">
    <image xlink:href="http://s14.postimage.org/f66u116ap/rainbow_Hello_World4.png" width="188" height="19"/>
  </svg>
  <svg width="17" height="19" x="12" y="19">
    <image xlink:href="http://s14.postimage.org/f66u116ap/rainbow_Hello_World4.png" width="188" height="19" x="-17"/>
  </svg>
  <svg width="17" height="19" x="35" y="6">
    <image xlink:href="http://s14.postimage.org/f66u116ap/rainbow_Hello_World4.png" width="188" height="19" x="-34"/>
  </svg>
  <svg width="17" height="19" x="46" y="14">
    <image xlink:href="http://s14.postimage.org/f66u116ap/rainbow_Hello_World4.png" width="188" height="19" x="-51"/>
  </svg>
  <svg width="17" height="19" x="60" y="24">
    <image xlink:href="http://s14.postimage.org/f66u116ap/rainbow_Hello_World4.png" width="188" height="19" x="-68"/>
  </svg>
</svg> 
```

（参见[Tinkerbin 的测试](http://tinkerbin.com/rtQeRElw)。）

您也可以使用该`clip-path`属性，但我想这比上述解决方案更乏味。

# java - 我的 .xml 文件布局在模拟中未正确显示

> ID：13410497
> 
> 赞同：0
> 
> 时间：2012-11-16T04:36:39.317
> 
> 标签：java, android, android-layout, android-emulator

在这种情况下，我的 xml 文件显示了某个布局，而在运行时生成了另一个布局。对于为什么在运行时显示的布局与给定的布局完全不同，我感到非常困惑。这是xml文件的代码

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <EditText
            android:id="@+id/username"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:ems="10" >

            <requestFocus />
        </EditText>
    </LinearLayout>

    <Button
        android:id="@+id/signUp"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Sign up!" />
</LinearLayout> 
```

这会在标签和按钮上显示在此处插入名称。该按钮已正确绑定并按下它确实会执行某些操作，但是我无法在运行时输入文本字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T04:55:54.127

这个看起来不错 仔细检查您是否正在使用您的 java 代码更改任何属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T06:35:39.810

尝试改用这个。我已经删除了无用的 LinearLayout 并尝试使 EditText 可点击。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <EditText
        android:id="@+id/username"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:clickable="true"
        android:ems="10" >

        <requestFocus />
    </EditText>

    <Button
        android:id="@+id/signUp"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Sign up!" />
</LinearLayout> 
```

# java - 如何在 GPRS 微调器中添加 Wi-Fi 选项

> ID：13410502
> 
> 赞同：0
> 
> 时间：2012-11-16T04:37:05.623
> 
> 标签：java, android, android-layout, android-intent

在我的应用程序中，我使用“apn”进行 GPRS 连接显示。我编写了一个微调器，在其中我得到 Telenor GPRS、Telenor MMS 和 Telenor WAP。**我想在此微调器中添加 Wi-Fi 选项。当我选择 Wi-Fi 选项时，设备开始感应 Wi-Fi。

问：如何在我的微调器中添加 Wi-Fi 选项？** 这是我的代码

```
Spinner GPRS;
String [] name_of_GPRS__available;
int [] apn_id;         public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.configuration); 

    EnumerateAPNs();

   /* this is a android enviroment in which you can develop an android application in which you 
    * share all your basic necessities of thrkife bghhr4y2ghrrr*/

    this.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN);
    tm = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);

    GPRS = (Spinner)findViewById(R.id.GPRS);
            ArrayAdapter<?> spinner_array = new ArrayAdapter<Object>(this,android.R.layout.simple_dropdown_item_1line,name_of_GPRS__available);
    spinner_array.setDropDownViewResource(android.R.layout.simple_dropdown_item_1line);
    SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this.getApplicationContext());     
    Editor prefsEditor = prefs.edit();     
    prefsEditor.putString("Object", name_of_GPRS__available.toString());  
    prefsEditor.commit(); 
    GPRS.setAdapter(spinner_array);
    //GPRS.setOnItemSelectedListener(MyOnItemSelectedListener());
    GPRS.setOnItemSelectedListener(new MyOnItemSelectedListener());`

    GPRS.setAdapter(spinner_array);
    //GPRS.setOnItemSelectedListener(MyOnItemSelectedListener());
    GPRS.setOnItemSelectedListener(new MyOnItemSelectedListener());

 public void onItemSelected(AdapterView<?> parent, View view, 
          final int position, long id) {
        // An item was selected. You can retrieve the selected item using
        // parent.getItemAtPosition(position)
      SetDefaultAPN(apn_id[position]);

          Toast.makeText(parent.getContext(), "ETracking System Selects " +          
      parent.getItemAtPosition(position).toString(), Toast.LENGTH_LONG).show();  
      }

        public void onNothingSelected(AdapterView<?> parent) {
        // Another interface callback
    }

      public boolean SetDefaultAPN(int id)
      {
          boolean res = false;
          ContentResolver resolver = Configuration.this.getContentResolver();
          ContentValues values = new ContentValues();

          values.put("apn_id", id); 
          try
          {
              resolver.update(Uri.parse("content://telephony/carriers/preferapn"), values, null, null);
              Cursor c = resolver.query(
                    Uri.parse("content://telephony/carriers/preferapn"), 
                      null, 
                      "_id="+id, 
                      null, 
                      null);
              if(c != null)
              {
                  res = true;
                  c.close();
              }
          }
          catch (SQLException e)
          {
              //Log.d("TAG", e.getMessage());
          }
           return res;

      }

    /*
       * Enumerate all APN data
       */
      private void EnumerateAPNs()
      {
          Cursor   c = this.getContentResolver().query(
                Uri.parse("content://telephony/carriers/current"), null, null, null, null);
          if (c != null) 
          {

              //String s = "All APNs:\n";
              //Log.d("TAG", s);
                try 
              {
                   printAllData(c); //Print the entire result set
              }
                catch(SQLException e)
                {
                    Toast.makeText(Configuration.this, "No Network Connection Available", Toast.LENGTH_LONG).show();
                }

              c.close();
          }

      }

      /*
       *  Print all data records associated with Cursor c.
       *  Return a string that contains all record data.
       *  For some weird reason, Android SDK Log class cannot print very long string message.
       *  Thus we have to log record-by-record.
       */
      private void printAllData(Cursor c)
      {
          //if(c == null) return null;

          if(c.moveToFirst())
          {
            name_of_GPRS__available = new String[c.getCount()];
            apn_id = new int [c.getCount()];
            int i= 0;

            do{

                    name_of_GPRS__available [i]= c.getString(c.getColumnIndex("name"));
                    apn_id[i]=c.getInt(c.getColumnIndex("_id"));
                    //Log.d("TAG",name[i]);
                    i++;

              }while(c.moveToNext());
              //Log.d("TAG","End Of Records");

            //name_of_GPRS_available [1]=" GPRS";

          }   
      } 
```

请指导我。我该怎么做。我会非常感谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T05:40:22.257

我假设这是针对 Gingerbread 设备的，因为设置默认 APN 已在 ICS（4.0 - API 14）中删除，已弃用。

您是否尝试过添加：

```
wifiManager = (WifiManager) this.getSystemService(Context.WIFI_SERVICE); 
wifiManager.setWifiEnabled(true); 
```

您需要将这些权限添加到您的 Android 清单中：

```
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE"></uses-permission>
<uses-permission android:name="android.permission.UPDATE_DEVICE_STATS"></uses-permission>
<uses-permission android:name="android.permission.CHANGE_WIFI_STATE"></uses-permission> 
```

您还可以`Spinner`通过使用扫描结果让用户从可用的 Wifi 热点中进行选择：http: [//developer.android.com/reference/android/net/wifi/ScanResult.html](http://developer.android.com/reference/android/net/wifi/ScanResult.html)

进而

WifiManager：http: [//developer.android.com/reference/android/net/wifi/WifiManager.html](http://developer.android.com/reference/android/net/wifi/WifiManager.html)

如果没有默认连接，则设置所需的网络。

Markana 有一个很好的关于以这种方式使用 Wifi 的教程：http: [//marakana.com/forums/android/examples/40.html](http://marakana.com/forums/android/examples/40.html)

# php - 回声不工作，在 ($row=0)

> ID：13410505
> 
> 赞同：0
> 
> 时间：2012-11-16T04:37:29.620
> 
> 标签：php, mysql

```
 <?php
 $soil_ph = $_POST['soilph'];
 $query = "select ph_id,ph_name,ph_from,ph_to from tbl_soilph 
 where '$soil_ph' between ph_from and ph_to";

 $result = mysql_query($query);

 while($row = mysql_fetch_array($result)) 
{
if ($row == 0)
{
echo 'Invalid or out of range';
}
else
{
$ph = $row['ph_name'];
echo $row['ph_name'];
}
}
?> 
```

---回声不起作用@（$row = 0）---有人可以帮助我吗？上面的代码工作正常，它给出了结果，但是当没有数据时它不显示消息“无效输入”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T06:15:15.970

首先，在数据库查询中使用变量之前，您应该始终对其进行转义（除非您使用准备好的语句，您应该这样做）：

```
$soil_ph = $_POST['soilph'];
$query = "SELECT ph_id, ph_name, ph_from, ph_to 
    FROM tbl_soilph 
    WHERE '" . mysql_real_escape_string($soil_ph) . "' BETWEEN ph_from AND ph_to";

$result = mysql_query($query); 
```

要检查您是否有任何结果，您应该[`mysql_num_rows()`](http://www.php.net/mysql_num_rows)在确保查询没有失败后使用：

```
if ($result && mysql_num_rows($result)) {
    while ($row = mysql_fetch_array($result)) {
        // do your stuff
    }
} else {
    // aww, nothing there
} 
```

进一步阅读：[MySQLi](http://sg2.php.net/manual/en/book.mysqli.php)，[PDO](http://sg2.php.net/manual/en/ref.pdo-mysql.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T06:06:16.240

检查此代码，您已更改循环方式

```
if (mysql_num_rows($result) < 1) {

    echo 'Invalid or out of range';

}else{

     while($row = mysql_fetch_array($result)){

         $ph = $row['ph_name'];
         echo $row['ph_name'];
     }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T05:56:08.843

```
$soil_ph = $_POST['soilph'];
$query = "select ph_id,ph_name,ph_from,ph_to from tbl_soilph 
where '$soil_ph' between ph_from and ph_to";

$result = mysql_query($query);
if($result && mysql_num_rows($result)) {

 while() {

 }
} else {
  echo 'invalid input';
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-16T04:51:34.753

实际上 mysql_fetch_array 函数在每次执行时返回一个单维数组。你可以这样做：

```
if($results){
echo 'No Results';
}else{
while($row = mysql_fetch_array($result)) 
{
if(!empty($row)){ 
echo $row['ph_name'];
}else{
echo 'invalid';
}
} 
```

# php - 多次使用相同的 if else 语句

> ID：13410507
> 
> 赞同：0
> 
> 时间：2012-11-16T04:37:37.637
> 
> 标签：php, if-statement

我正在做这个...

```
<?php $term = ucfirst($_GET['term']);?> 
```

并在页面上多次执行此操作：

```
<?php if (empty($term)) echo 'X'; else echo $term; ?> 
```

有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T04:45:14.220

您可以在首次分配值时指定占位符值：

```
<?php  $term = ucfirst($_GET['term'])  or  $term = "X";  ?> 
```

（有效，因为 OR 的优先级低于分配。）

然后只需打印该变量：

```
<?= $term ?> 
```

它将包含输入值或您的`X`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T04:45:54.110

三元运算符：

```
$term = (empty(ucfirst($_GET['term']))) ? echo 'X' : $_GET['term']; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T04:45:31.417

声明一个函数

```
function doTerm()
{
    $term = ucfirst($_GET['term']);
    if (empty($term)) echo 'X'; else echo $term;
} 
```

所以你可以这样称呼它

```
doTerm(); 
```

每当您需要它来测试和回显时。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T04:45:44.683

```
<?php 
$term = isset($_GET['term']) ? ucfirst($_GET['term']) : 'X';
echo $term;

//...
?> 
```

如果您在其他任何地方都不需要它，则可以使它更短:-)

```
 echo (isset($_GET['term']) ? ucfirst($_GET['term']) : 'X'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-16T04:46:36.323

三元语法在这里可以很容易地工作：

使用简写标签：

```
<?=empty($term) ? 'X' : $term ?> 
```

或长手：

```
<?php echo empty($term) ? 'X' : $term ?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-16T04:47:02.750

你可以使用像 echo ($term!=null) 这样的条件运算符吗？'x' : $术语;

# prolog - 带有 Java 查询的 Prolog

> ID：13410516
> 
> 赞同：0
> 
> 时间：2012-11-16T04:38:23.203
> 
> 标签：prolog

嗨有人可以帮我解决这个问题，我需要序言中的以下表格，我需要对该表格进行一些查询，如下所示。

2.1 获取具有给定排量的所有者车辆的牌号、门数、型号、参考号和名称。2.2\. 获取具有附属合同类型和给定型号的车辆的车牌、参考号和车主姓名门。2.3\. 获取在给定状态和保险公司对应于给定状态的具有修订的车辆所有者的车牌、修订日期、ID。2.4\. 获取给定速度以下的车辆的型号牌号，车主ID和联系电话以及门数。2.5\. 获取旧车的车牌、参考、cedula 车主（他的型号较低）。

在这个粘贴中是表格

[http://pastebin.com/BBue2nFE](http://pastebin.com/BBue2nFE)

请有人可以帮助我谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T20:21:10.570

抱歉，您的帖子很难理解。

您的问题是您在关系数据库中有数据并且需要从 Prolog 访问它吗？如果是这样，我们需要知道您使用的是哪个 Prolog 以及哪个数据库。

# linux - 如何证明 __udelay() 在我的 ARM 嵌入式系统上正常工作？

> ID：13410517
> 
> 赞同：9
> 
> 时间：2012-11-15T23:04:38.323
> 
> 标签：linux, linux-kernel, embedded

我们有一个使用 3.2 内核的 ARM9——一切似乎都运行良好。最近我被要求添加一些代码，以便在启动时在一些 GPIO 线上添加一个 50ms 的脉冲。脉码没问题；正如预期的那样，我可以看到线条上下起伏。没有按我预期的方式工作的是`udelay()`功能。阅读文档让我觉得单位是微秒，但在逻辑分析仪中测量它太短了。所以我最后添加了这段代码来获得 50ms。

```
// wait 50ms to be sure PCIE reset takes
for (i=0;i<6100;i++) // measured on logic analyzer - seems wrong to me!!
{
   __udelay(2000); // 2000 is max
} 
```

我不喜欢它，但它工作正常。代码中有一些奇怪的常量和指令`udelay`。有人可以告诉我这应该如何工作吗？初始化所有时钟后调用此代码，因此其他一切似乎都正常。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T14:31:31.950

根据 Linus 在[此线程](http://www.gossamer-threads.com/lists/linux/kernel/1325037)中的说法：

> 如果是 1% 左右的折扣，那就没问题了。如果有人选择了一个对延迟中的小错误非常敏感的延迟值，以至于他们注意到了——或者甚至注意到了 5% 之类的东西——那么他们选择的延迟太短了。
> 
> udelay() 从来没有真正打算成为某种精密仪器。尤其是在 CPU 以不同频率运行的情况下，我们历来都会有一些相当剧烈的波动。传统的繁忙循环最终不仅受到中断的影响，而且还受到缓存对齐（我们曾经内联它）之类的影响，然后基于 TSC 的循环显然依赖于 TSC 的稳定（它们不是为了尽管）。
> 
> 所以从历史上看，我们已经看到 udelay()*真的*关闭（即 50% 关闭等），我不会担心 1% 范围内的事情。
> 
> 莱纳斯

所以它不会是完美的。它会关闭。多少取决于很多因素。不要使用`for`循环，`mdelay`而是考虑使用。可能会更准确一些。来自[O'Reilly Linux 设备驱动程序](http://www.xml.com/ldd/chapter/book/ch06.html)书：

> udelay调用应该只在很短的时间内调用，因为 的精度*只有*`loops_per_second`8 位，并且在计算长延迟时会累积明显的错误。即使最大允许延迟接近一秒（因为计算会因更长的延迟而溢出），但建议的*udelay*最大值为 1000 微秒（一毫秒）。在延迟必须长于一毫秒的情况下，函数*mdelay 会有所帮助。*
> 
> 同样重要的是要记住*udelay*是一个忙等待函数（因此*mdelay*也是如此）；在时间流逝期间无法运行其他任务。因此，您必须非常小心，尤其是使用*mdelay*时，除非没有其他方法可以实现您的目标，否则请避免使用它。
> 
> 目前，支持长于几微秒和短于计时器滴答的延迟是非常低效的。这通常不是问题，因为延迟需要足够长才能被人类或硬件注意到。对于与人类相关的时间间隔，百分之一秒是合适的精度，而对于硬件活动来说，一毫秒是足够长的延迟。

特别是“ ***udelay*****的建议最大值是 1000 微秒（一毫秒）** *”这一行在我看来很突出，因为您声明 2000 是最大值。从此[文档](http://www.mjmwired.net/kernel/Documentation/timers/timers-howto.txt)中插入延迟：*

 *> mdelay 是 udelay 的宏包装器，用于在将大参数传递给 udelay 时解决可能的溢出问题

因此，您可能会遇到溢出错误。虽然我通常不会认为 2000 年是一个“大争论”。

但是，如果您需要真正准确的计时，您需要像您一样处理偏移量，滚动您自己的或使用不同的内核。有关如何使用汇编程序或使用硬实时内核来滚动您自己的延迟函数的信息，请参阅这篇关于[高分辨率时序的](http://tldp.org/HOWTO/IO-Port-Programming-4.html)文章。

另请参阅：[Linux 内核：udelay() 返回太早？](https://stackoverflow.com/questions/8352812/linux-kernel-udelay-returns-too-early)*

# python - Heroku 错误：在 Django App 上找不到 Pywin32==214

> ID：13410519
> 
> 赞同：1
> 
> 时间：2012-11-16T04:38:26.863
> 
> 标签：python, django, heroku, pywin32

我在将我的 Django 应用程序推送到 Heroku 时遇到问题。

从这个开始

```
virtualenv --system-site-packages venv 
```

Requirements.txt 看起来像这样

```
Django==1.4.2
-e hg+https://bitbucket.org/etienned/pil-2009-raclette/#egg=PIL
boto==2.6.0
distribute==0.6.19
dj-database-url==0.2.1
django-filepicker==0.1.2
django-generic-aggregation==0.3.1
django-voting==0.1
gevent==0.13.8
gunicorn==0.15.0
psycopg2==2.4.5
pythonselect==1.3
virtualenv==1.8.2
wsgiref==0.1.2
pywin32==213 
```

然后

```
git push heroku master 
```

我要拿回这个

```
Downloading/unpacking pywin32==214 (from -r requirements.txt)
Could not find any downloads that satisfy the requirement pywin32--214 (line 2))
...
Heroku push rejected, failed to compile Python/Django app
! [remote rejected] m aster -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com...' 
```

为什么找不到 Pywin32？我能做些什么来克服这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T06:24:09.270

我猜Heroku服务器的操作系统是Linux，而pywin32，顾名思义，只能在Windows上使用。如果可能，删除或更改依赖 pywin32 的代码，然后重试。

# ruby-on-rails - Rails 请求覆盖参数

> ID：13410520
> 
> 赞同：2
> 
> 时间：2012-11-16T04:38:37.487
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rack

我需要`params[:lang]`在整个应用程序中覆盖从`en`到`us-english`。从 url 它应该是`en`，但在我的整个应用程序中它需要是`us-english`，当我创建 url 时，我需要它`us-english`再次转换`en`。

我意识到实际的解决方案是只更新 url 以反映实际应用程序，但这个决定是我无法控制的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T04:45:31.177

在应用程序控制器中：

```
before_filter :override_params

def override_params
  params[:lang] = 'us' if params[:lang] == 'en'
end

def render( *args )
  params[:lang] = 'en' if params[:lang] == 'us'
  super
 end 
```

虽然，正如安德鲁所说，可能有更好的方法来完成你想要实现的目标，

# c++ - C++ 跳过函数

> ID：13410522
> 
> 赞同：4
> 
> 时间：2012-11-16T04:38:51.923
> 
> 标签：c++, function

好的，我想我已经解决了大部分问题，但它不喜欢我传递我认为的常量。任何帮助将不胜感激，谢谢。

另外，对于 !inputFile 部分，我不确定如何像我的老师建议的那样完成返回（EXIT_FAILURE）。

另外，关于您只使用数组的一部分的建议，那仍然允许我在函数中使用整个东西吗？

该程序应该采用这样的文件：例如：NOT 11010001，它应该将命令作为字符串读取，将二进制文件作为数组读取，然后对二进制文件执行命令。

这里的代码只是主要的功能，只是不想一下子全部发送一个墙，如果这看起来不错，那么我会很乐意添加其余的。此外， void Operate () 函数几乎以一种或另一种方式调用所有其他函数......我不确定这是导致它的原因还是什么。打印表只有 cout 是一张用于放置所有信息的表。

他们的标题对我来说很奇怪，所以假设这些是正确的。

```
/* ========================================================================== */

/* Prototypes */

int Power (int, int);

int ReadFile (ifstream inputFile);

void Operate (const int, ifstream&, string, int, int, int);

void CommandNot (const int, int, int);

void CommandAnd (const int, int, int, int);

void CommandOr (const int, int, int, int);

int CommandConvert (const int, int, int);

void CommandLshift (const int, int, int, int);

void PrintTable ();

void PrintOperand (const int &, int);

int main ()
{

//Constants

const int BIT_SIZE = 8;

//Variables

string fileName = "binaryData.txt";

    int operandOne [BIT_SIZE];

    int operandTwo [BIT_SIZE];

    int operandResult [BIT_SIZE];

    ifstream inputFile;

    PrintTable ();
    Operate (BIT_SIZE, inputFile, fileName, operandOne[BIT_SIZE], operandTwo[BIT_SIZE], operandResult[BIT_SIZE]);

    return 0;
}

void PrintTable ()
{

    cout << "=================================================" << endl;
    cout << "=      Eight Bit Binary Number Manipulator      =" << endl;
    cout << "=================================================" << endl << endl;

    cout << setw(14) << "COMMAND" << "Operand #1" << "Operand #2" << "Shift" << "Result" << endl;
    cout << "----------------------------------------------------------------------" << endl;

}

void Operate (const int BIT_SIZE, ifstream& inputFile, string fileName, int operandOne[], int operandTwo[], int operandResult[])
{
    //Variables
    int count, shift;
    char myChar;
    string command;

    const int SIZE = BIT_SIZE;  //rename constant

    inputFile.open (fileName);

    if ( !inputFile )       //Check if file opened sucessfully
    {
        cout << "Error: Data file could not be opened" << endl;
    }

    while (inputFile)       //Read file, and apply commands
    {
        inputFile >> command;
        cout << command << endl;
        for ( count = 0;  count < SIZE; count++ )
        {
            inputFile >> myChar;
            operandOne[count] = myChar - '0';
        }

        if (command == "NOT")
        {
            CommandNot (BIT_SIZE, operandOne[BIT_SIZE], operandResult[BIT_SIZE]);
            PrintOperand (BIT_SIZE, operandResult[BIT_SIZE]);
        }
        else if (command == "AND")
        {
            count = 0;
            for ( count = 0;  count < SIZE; count++ )
            {
                inputFile >> myChar;
                operandTwo[count] = myChar - '0';
            }

            CommandAnd (BIT_SIZE, operandOne[BIT_SIZE], operandTwo[BIT_SIZE], operandResult[BIT_SIZE]);
            PrintOperand (BIT_SIZE, operandResult[BIT_SIZE]);
        }
        else if (command == "OR")
        {
            count = 0;
            for ( count = 0;  count < SIZE; count++ )
            {
                inputFile >> myChar;
                operandTwo[count] = myChar - '0';
            }

            CommandOr (BIT_SIZE, operandOne[BIT_SIZE], operandTwo[BIT_SIZE], operandResult[BIT_SIZE]);
            PrintOperand (BIT_SIZE, operandResult[BIT_SIZE]);
        }
        else if (command == "CONVERT")
        {
            CommandConvert (BIT_SIZE, operandOne[BIT_SIZE], operandResult[BIT_SIZE]);
            PrintOperand (BIT_SIZE, operandResult[BIT_SIZE]);
        }
        else if (command == "LSHIFT")
        {
            inputFile >> shift;
            CommandLshift (BIT_SIZE, operandOne[BIT_SIZE], operandResult[BIT_SIZE], shift);
            PrintOperand (BIT_SIZE, operandResult[BIT_SIZE]);
        }

        else
        {
            command = "INVALID";
            PrintOperand (BIT_SIZE, operandOne[BIT_SIZE]);
            cout << "--- ERROR! Invalid Command ---";
        }
    }

    inputFile.clear();
    inputFile.close();

    return ;
}

void CommandNot (const int BIT_SIZE, int operandOne[], int operandResult[])
{

    int count;
    const int SIZE = BIT_SIZE;

    for ( count = 0;  count < SIZE; count++ )
    {
        if (operandOne[count] == 0)
        {
            operandResult[count] = 1;
        }
        else
        {
            operandResult[count] = 0;
        }
    }

}

void CommandAnd (const int BIT_SIZE, int operandOne[], int operandTwo[], int operandResult[])
{

    int count;
    const int SIZE = BIT_SIZE;

    for ( count = 0;  count < SIZE; count++ )
    {
        if ((operandOne[count] == 1) && (operandTwo[count] == 1))
        {
            operandResult[count] = 1;
        }
        else
        {
            operandResult[count] = 0;
        }
    }

}

void CommandOr (const int BIT_SIZE, int operandOne[], int operandTwo[], int operandResult[])
{

    int count;
    const int SIZE = BIT_SIZE;

    for ( count = 0;  count < SIZE; count++ )
    {
        if ((operandOne[count] == 0) && (operandTwo[count] == 0))
        {
            operandResult[count] = 0;
        }
        else
        {
            operandResult[count] = 1;
        }
    }

}

int CommandConvert (const int BIT_SIZE, int operandOne[])
{

    int count;
    const int SIZE = BIT_SIZE;
    int baseTenResult = 0;
    int place;

    for ( count = 0;  count < SIZE; count++ )
    {
        place = SIZE - (count + 1);
        if (operandOne[count] == 1)
        {
            baseTenResult = baseTenResult + Power (2, place);
        }
        else 
        {
            continue;
        }
    }

    return baseTenResult;
}

void CommandLshift (const int BIT_SIZE, int operandOne[], int operandResult[], int shift)
{

    int count;
    const int SIZE = BIT_SIZE;
    int shiftStart = SIZE - shift;

    for ( count = 0;  count < SIZE-shift; count++ )
    {
        operandResult[count] = operandOne[count + shift];
    }

    for ( count = SIZE - shift; count < SIZE; count++ )
    {
        operandResult[count] = 0;
    }

}

int Power (int base, int power)
{
    int count;
    int result = 1;

    for ( count = 0; count < power; count++ )
    {
        result = result * base;
    }

    return result;
}

void PrintOperand (const int BIT_SIZE, int operandResult[])
{

    int count;
    const int SIZE = BIT_SIZE;

    for ( count = 0;  count < SIZE; count++ )
    {
        cout << operandResult[count];
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T04:42:41.513

您需要从 调用函数`main`。你不能通过重新声明它们来做到这一点：

```
void PrintTable();
void Operate (const int BIT_SIZE, ifstream& inputFile, string fileName, int operandOne[], int operandTwo[], int operandResult[]); 
```

相反，您需要调用它们：

```
PrintTable();
Operate(BITSIZE,inputFile,fileName,operandOne,operandTwo,operandResult); 
```

但是请注意，还有另一个问题：`Operate`最后需要三个整数参数，但您似乎尝试使用整数数组作为参数。您需要从每个数组中选择一个元素并仅将其作为参数提交。

* * *

（编辑）您的问题发生了一些变化，我还不够了解，无法说出您的数据和函数的最佳整体结构应该是什么，但是如果您正在处理整数数组并且您想通过整个数组到一个函数，你可以这样做（我已经将它简化为一个只接受*一个*整数数组的函数。当然你可以有多个函数参数）：

```
#include <iostream>

const int SIZE = 3;

/* This is a simpified version of 'operate'. It
   takes one argument, which is an array of integers. */    
void operate(int a[])
{
  /* The only thing I do is to iterate through
     all elements of the array and print them. */
  int i = 0;
  while (i < SIZE) {
    std::cout << a[i] << std::endl;
    ++i;
  }

  /* IMPORTANT: The length of the array is defined by a
     global constant SIZE. Alternatively, you can pass
     along the size of the array as a separate argument
     to the function. */
}

int main()
{
  /* Main program. Here is our array: */
  int my_array[SIZE] = { 1,2,3 };

  /* And here we call our function: */
  operate(my_array);
  return 0;
} 
```

但是，所有这些都有些复杂，而且不像 C++（与 C 相比）中那样方便。十有八九，你会更好地不使用数组，并将它们替换为`std::vector`. 最好在[cppreference](http://en.cppreference.com/w/cpp/container/vector)上查看如何使用它的示例（也可以单击一些成员函数，例如构造函数并`push_back`获取特定的代码示例。）

# c++ - 使用带有按钮控件的 PNG

> ID：13410524
> 
> 赞同：0
> 
> 时间：2012-11-16T04:39:04.497
> 
> 标签：c++, visual-studio-2010, button, gdi+, direct2d

我正在尝试在我的对话框（Visual Studio 2010 Professional）的按钮控件上呈现 PNG。经过一番研究，我发现以下适用于 BMP 文件的方法：

```
HBITMAP hBitmap = (HBITMAP) LoadImage(NULL, L"test.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);

SendMessage(GetDlgItem(hDlg, IDC_BUTTON1), BM_SETIMAGE, IMAGE_BITMAP, (LPARAM)hBitmap); 
```

但是，这不适用于 PNG 文件。经过更多研究，我发现使用 GDI+ 有一种简单的方法可以做到这一点：

```
HBITMAP hBitmap;
Gdiplus::Bitmap b(L"a.png");
b.GetHBITMAP(NULL, &hBitmap);

SendMessage(GetDlgItem(hDlg, IDC_BUTTON1), BM_SETIMAGE, IMAGE_BITMAP, (LPARAM)hBitmap); 
```

我没有在我的程序中的任何其他地方使用 GDI+，但我仍然需要包含标题、链接到库并初始化它以完成这个简单的任务。值得所有这些麻烦吗？有没有更标准的方法来做到这一点？

我计划在一个按钮上渲染多个 PNG（有些是透明的）。

编辑：我用来创建 HBITMAP 的（稍作修改的）CreateDIBSectionFromBitmapSource() 函数可以在这里找到：

[http://archive.msdn.microsoft.com/Project/Download/FileDownload.aspx?ProjectName=win7wicsamples&DownloadId=7549](http://archive.msdn.microsoft.com/Project/Download/FileDownload.aspx?ProjectName=win7wicsamples&DownloadId=7549)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T04:55:04.977

您能否通过在按钮控件上“渲染”PNG来更具体地说明您的意思...

如果您的意思是您试图在按钮上粘贴 .PNG 图像，那么是的，有一种更简单的方法。只需单击按钮并转到属性菜单中的“外观”。单击“背景图像”，选择本地资源，然后浏览到图像并加载它。完毕。

如果这不是你的意思，那么我可能会建议研究

System.Drawing.Image 和使用 GDI+

当我们说话时，我实际上坐在这里学习 GDI+。请注意，这是一个半年的学习时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T05:38:56.040

GDI+ 是读取和渲染不同格式图像的标准方法。执行此操作的其他方法是创建 PNG 解码器组件并从中获取流并将其传递给 LoadImage 函数，这正是 GDI+ 在后台为您所做的。图像格式编码器和解码器是窗口成像组件的一部分。

就如何对多个图像执行解码和渲染而言，这取决于您要查找的内容，我不确定。让我发表一些评论。您现在可以做的和正在做的（通过按钮的背景图像选项）是对图像进行一次解码并将它们保存为位图，因此当必须完成绘画时，位图已准备好并且不需要进行解码。这也是按钮的背景图像绘制所做的事情，按钮组件保留您传递的位图句柄，并且每次必须重新绘制时都会绘制相同的。我认为您不必担心绘制位图的性能，因为它是使用 Bitblt 直接在显示设备上完成的。

# oracle - 为什么没有主键

> ID：13410526
> 
> 赞同：0
> 
> 时间：2012-11-16T04:39:15.603
> 
> 标签：oracle, database-design

我继承了一个带有缺少主键的表的数据库。这是一个 OLTP 数据库。有问题的表之一有大约 300k 记录，并且没有实现主键，即使检查架构的其余部分告诉我一列用作主键，即在另一个表中复制，具有相同的名称等。 IE。这不是“行尾”表

该数据库也没有实现 FK。

我的问题是 - 是否有任何正当理由让表（在 Oracle 中）没​​有主键？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T07:00:01.467

不是特定于甲骨文，但我记得读过一个这样的用例，我认为[mysql](/questions/tagged/mysql "显示标记为“mysql”的问题")是为大坝（发电）项目高度定制的。来自传感器的输入数据大约为每秒 100-1000 条左右。他们为每条记录使用时间戳，因此不需要主键（例如此处另一个答案中提到的日志/日志记录）。

很好*的*理由是：

*   开销，在高频交易的情况下
*   这种情况下的必要性或非必要性
*   “唯一性”由应用程序维护或推断，而不是由数据库
*   在规范化表中，如果每条记录都需要是唯一的并且每个字段都在其他表中引用，那么拥有 PK 会额外增加索引开销，并且如果 PK 永远不会实际用于任何 SQL 查询（恕我直言，我不同意这一点但这是可能的）。但它仍然应该有一个`unique`包含所有字段的索引。

不好的原因是无限的:-)

**实际上导致缺少主键**的**最常见*的错误***原因是，当 DB 由具有很少或没有 DB 经验的应用程序/代码开发人员设计时，他们想要（或认为他们*应该*）处理应用程序中的**所有**数据约束.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T04:46:28.373

我认为 PK 对于几乎所有情况都是强制性的。会有很多原因存在，但我会处理其中的一些。

*   防止插入重复行
*   行将被引用，因此它必须有一个键

我看到很少有没有 PK 的情况下制作表格（例如日志表格）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T06:28:20.343

有什么*正当*理由吗？我会说“不”——我是一名数据库专家——但有些地方坚持将数据库用作愚蠢的数据存储。它们通常在应用程序代码中实现所有完整性“约束”。

将完整性约束放入应用程序代码通常不是为了提高性能。事实上，如果您构建了一个执行所有已知约束的数据库，而您构建了另一个仅在应用程序代码中具有功能相同约束的数据库，那么第一个几乎肯定会围绕第二个运行。

相反，应用程序级别的约束通常希望增加灵活性。（而且，在这个过程中，一些已知的约束通常会被删除，这*似乎*可以提高性能。）如果为了批量加载一些肮脏的数据而强制执行某些约束变得不方便，应用程序程序员可以回避应用程序-level 约束一段时间，然后在更方便的时候清理数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T04:43:17.360

我不是数据库专家，但我记得与一位在 Oracle 应用部门工作的朋友的对话。谁告诉我这样做是为了处理紧急情况。如果在生成的某些报告中存在问题，您可以通过连续放置来解决，那么数据库级别的约束通常会妨碍您。他们通常在应用程序而不是数据库中实现诸如唯一主键之类的东西。它效率低下，但对他们来说已经足够了，而且在灾难恢复情况下更易于管理。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-16T04:44:25.853

您需要一个主键来强制其列子集的唯一性（如果您需要引用单个行，这很有用）。由于与之关联的索引，它还加快了某些查询。

如果您不需要该索引或唯一性约束，那么您可能不需要主键（索引不是免费的）。

想到的一个例子是日志表，它只记录一些数据（从不更新或查询单个记录）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-16T04:45:05.273

插入带有索引的表时会产生少量开销，如果您有主键，则需要索引。当然，缺点是查找一行的成本非常高。

# haskell - 这种循环递归如何提供所需的结果？

> ID：13410528
> 
> 赞同：0
> 
> 时间：2012-11-16T04:39:24.630
> 
> 标签：haskell, recursion, random

[考虑一下这篇出色的博客文章](http://blog.functorial.com/posts/2012-08-04-Testing-Random-Properties-With-Type-Classes.html)中的以下缩写代码：

```
import System.Random (Random, randomRIO)

newtype Stream m a = Stream { runStream :: m (Maybe (NonEmptyStream m a)) }
type NonEmptyStream m a = (a, Stream m a)

empty :: (Monad m) => Stream m a
empty = Stream $ return Nothing

cons :: (Monad m) => a -> Stream m a -> Stream m a
cons a s = Stream $ return (Just (a, s))

fromList :: (Monad m) => [a] -> NonEmptyStream m a
fromList (x:xs) = (x, foldr cons empty xs) 
```

到目前为止还不错 - 一种单子递归数据结构和一种从列表构建的方法。

现在考虑这个函数，它使用常量内存从流中选择（一致）随机元素：

```
select :: NonEmptyStream IO a -> IO a
select (a, s) = select' (return a) 1 s where
  select' :: IO a -> Int -> Stream IO a -> IO a
  select' a n s = do
    next <- runStream s
    case next of 
      Nothing -> a
      Just (a', s') -> select' someA (n + 1) s' where
        someA = do i <- randomRIO (0, n) 
                   case i of 0 -> return a'
                             _ -> a 
```

我没有掌握最后四行中发生的神秘的无限循环井；结果`a'`取决于 上的递归`someA`，它本身*可能*取决于`a'`，但不一定。

我觉得递归工作者以某种方式在累加器中“累积”潜在值`IO a`，但我显然无法很好地推理它。

谁能解释一下这个函数是如何产生它的行为的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T06:56:24.380

该代码实际上并没有在恒定空间中运行，因为它构成了一个越来越大的`IO a`动作，它会延迟所有随机选择，直到它到达流的末尾。只有当我们到达`Nothing -> a`case 时，动作才会`a`真正运行。

例如，尝试在此函数生成的无限恒定空间流上运行它：

```
repeat' :: a -> NonEmptyStream IO a
repeat' x = let xs = (x, Stream $ return (Just xs)) in xs 
```

显然，`select`在此流上运行不会终止，但是您应该看到内存使用量上升，因为它为延迟的操作分配了大量的 thunk。

这是一个稍微重写的代码版本，它会随着选择进行选择，因此它在恒定空间中运行，并且希望也更清晰。请注意，我已经`IO a`用一个简单的参数替换了这个参数，`a`这清楚地表明这里没有建立延迟的操作。

```
select :: NonEmptyStream IO a -> IO a
select (x, xs) = select' x 1 xs where
  select' :: a -> Int -> Stream IO a -> IO a
  select' current n xs = do
    next <- runStream xs
    case next of 
      Nothing       -> return current
      Just (x, xs') -> do
        i <- randomRIO (0, n)                         -- (1)
        case i of                                     
          0 -> select' x       (n+1) xs'              -- (2)
          _ -> select' current (n+1) xs'              -- (3) 
```

顾名思义，`current`在每一步存储当前选择的值。一旦我们从流中提取了下一个项目，我们 (1) 选择一个随机数并使用它来决定是 (2) 用新项目替换我们的选择还是 (3) 在递归其余部分之前保留我们当前的选择的流。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T07:27:03.373

这里似乎没有任何“循环”发生。特别`a'`是不*依赖*于`someA`. 的`a'`结果受模式匹配的约束`next`。它被`someA`哪个轮流用在右手边，但这并不构成一个循环。

什么`select'`是遍历流。它维护两个累积参数。第一个是来自流的随机元素（它尚未被选择并且仍然是随机的，因此`IO a`）。第二个是流中的位置 ( `Int`)。

保持不变的是第一个累加器从我们目前看到的流中统一选择一个元素，并且整数表示到目前为止遇到的元素数量。

现在，如果我们到达流的末尾（`Nothing`），我们可以返回当前的随机元素，就可以了。

如果我们看到另一个元素（案例），那么我们通过再次`Just`调用来递归。`select'`更新元素的数量`n + 1`是微不足道的。但是我们如何更新随机元素`someA`呢？好吧，旧的随机元素以相等的概率在流`a`的第一个位置之间进行选择。如果我们以概率`n`选择新元素并在所有其他情况下使用旧元素，那么我们在整个流上再次得到均匀分布。`a'``1 / (n + 1)`

# ajax - 提交按钮无法与 ajax jsf 2.0 onblur 验证一起正常工作

> ID：13410531
> 
> 赞同：2
> 
> 时间：2012-11-16T04:39:56.240
> 
> 标签：ajax, validation, jsf-2, primefaces

我正在尝试使用 jsf 2.0（primefaces）实现 ajax 客户端验证。我更喜欢 onblur 事件而不是 ontype，因为它看起来对用户更友好。问题是：当焦点位于无效字段内时，我的注册按钮必须单击两次才能正常工作。我们第一次点击 - onblur 事件发生，第二次点击 - 提交发生（我认为这是原因）。我的代码：

```
 <html xmlns="http://www.w3c.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:p="http://primefaces.org/ui"
    xmlns:ui="http://java.sun.com/jsf/facelets">
    <ui:composition template="template.xhtml">
        <ui:define name="content">
    <p:panel header="#{msg['register']}" style="width: 550px; align: left;">
        <h:form>
            <h:panelGrid columns="3" cellpadding="2">             

                <h:outputLabel for="name" value="#{msg['yourName']}:" />  
                <p:inputText id="name" value="#{userManagedBean.name}">  
                <f:validateLength maximum="20" />  
                <p:ajax update="msgName" event="blur" />  
                </p:inputText>  
                <p:message for="name" id="msgName" display="text"/>

                <h:outputLabel for="userName" value="*#{msg['login']}:"/>
                <p:inputText id="userName" value="#{userManagedBean.username}" label="UserName" required="true"> 
                <f:validateLength minimum="5" maximum="20" for="userName"/>
                <p:ajax update="msgUserName" event="blur"/>
                </p:inputText>
                <p:message for="userName" id="msgUserName"/>

                <h:outputLabel for="password" value="*#{msg['password']}:" />
                <p:password id="password" value="#{userManagedBean.password}" required="true">
                <f:validator validatorId="confirmPasswordValidator" />
                <f:attribute name="confirm" value="#{confirmPassword.submittedValue}" />
                <f:ajax event="blur" execute="password confirm" render="m_password" />
                </p:password>
                <p:message id="m_password" for="password" />

                <h:outputLabel for="confirm" value="*#{msg['retypePassword']}:" />
                <p:password id="confirm" binding="#{confirmPassword}" required="true">
                <f:ajax event="blur" execute="password confirm" render="m_password m_confirm" />
                </p:password>
                <p:message id="m_confirm" for="confirm" />

                <h:outputLabel for="email" value="#{msg['email']}:"/>
                <p:inputText id="email" value="#{userManagedBean.email}" label="email">                
                <f:validateRegex pattern="^([a-zA-Z0-9_\-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([a-zA-Z0-9\-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$" for="email"/>
                <p:ajax update="msgEmail" event="blur"/>
                </p:inputText>
                <p:message for="email" id="msgEmail"/>

           </h:panelGrid>
                <ui:remove><p:captcha label="Captcha"/> </ui:remove>
                <h:commandButton type="submit" value="#{msg['register']}" action="#{userManagedBean.register}"></h:commandButton>                          
        </h:form>
    </p:panel>  
</ui:define>
</ui:composition>
</html> 
```

# java - jvisualvm 的代理配置问题

> ID：13410532
> 
> 赞同：7
> 
> 时间：2012-11-16T04:39:56.807
> 
> 标签：java, proxy, jvisualvm

我已经尝试在我的 JDK (1.6.0_15-b03) 中使用 jvisualvm.exe 来重新加载插件目录，方法如下

工具 > 插件 > 更新 > 重新加载目录

然而; 无论我尝试什么代理配置（我也尝试在另一个 JVM 1.6 update 23 上对其进行测试）并且似乎都不起作用。无论我的代理设置如何，我都会收到以下错误。

> 无法连接到 Java VisualVM 插件中心，因为 sun.security.validator.ValidatorException：PKIX 路径构建失败：sun.security.provider.certpath.SunCertPathBuilderException：无法找到请求目标的有效证书路径

这是出现的错误窗口[请参阅附图]![证书错误](../Images/55828012e2de9719d0ed350c2ae870ba.png)

这是一个已知问题还是某些认证问题？我从来没有在我的机器上创建过信任库，这可能是个问题吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2017-08-10T16:32:16.803

VisualVM 已迁移到 Github，因此插件中心现在 [在这里](https://visualvm.github.io/pluginscenters.html)

但为了简短起见，您需要做的是
打开**VisualVM**
打开**工具 -> 插件 ->**
右侧列（“ **Java VisualVM 插件中心”）上的设置（“Java VisualVM 插件中心**”）单击**编辑**
替换您那里的任何内容：[https://visualvm.github。 io/uc/8u131/updates.xml.gz](https://visualvm.github.io/uc/8u131/updates.xml.gz)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T05:26:53.300

在这里您可以手动下载插件：http: [//visualvm.java.net/pluginscenters.html](http://visualvm.java.net/pluginscenters.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-23T11:34:43.877

实现此目的的另一种方法是手动下载插件，然后将其安装在 JVisualVM 上。

以下是步骤：

1.  首先从以下位置获取插件版本：[https ://visualvm.github.io/pluginscenters.html](https://visualvm.github.io/pluginscenters.html)
2.  然后下载您要安装的特定插件（文件扩展名为“ *.nbm ”）。*
3.  然后，在 JVisualVM 中，转到**Tools > Plugin > Downloaded**；然后点击“**添加插件**”并选择之前下载的文件。
4.  一次，它会显示在“已**下载**”插件选项卡中，然后单击“**安装**”

希望这可以帮助...

# php - MySQL - 获取字段值等于 foreach 值的行

> ID：13410533
> 
> 赞同：1
> 
> 时间：2012-11-16T04:39:58.870
> 
> 标签：php, mysql

我只想获取与 foreach 值相关的数据。但是结果为空。$userid 是一个数组，这就是我需要为每个值使用的原因。请更正这一点或建议任何替代方法。

```
 $user_id=$_POST['uid'];
    foreach($user_id as $user_idf){

    $sql=mysqli_query($db3->connection,"select *  from  profile  where uid='$user_idf'");
    while($row=mysqli_fetch_array($sql)){
        $num=$row['country'];

        echo $num;
    }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T04:48:25.590

首选对 base 的一个查询。您也忘记`country`了查询中的字段。试试这个方法：

```
 $user_id=$_POST['uid'];
   $user_id = is_array($user_id)?$user_id:(array)$user_id;
   if(!empty($user_id)) {
       $sql=mysqli_query(
           $db3->connection,
           "select name, country from  profile 
            where uid in (".implode(', ', $user_id).")"
       );
       while($row=mysqli_fetch_array($sql)){
           $num=$row['country'];
           echo $num;
       }
   } 
```

# c# - DataList 控件内的按钮列表

> ID：13410534
> 
> 赞同：1
> 
> 时间：2012-11-16T04:40:19.733
> 
> 标签：c#, asp.net, repeater, datalist

我面临一种情况，我需要使用控件`ButtonList`内部的东西`DataList`。

由于没有类似的控制，我应该在里面`ButtonList`嵌套一个还是有其他更好的选择来处理这种情况。`DataList/Repeater``DataList`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T18:03:47.363

我不确定您在寻找什么，但这是我假设您想要的：

```
YourListItem1 
    ButtonAction1
    ButtonAction2
    ButtonAction3
    ButtonAction4
YourListItem2
    ButtonAction1
    ButtonAction3
YourListItem3
    ButtonAction1
    ButtonAction2
YourListItem3
    ButtonAction3
    ButtonAction4 
```

或者类似的东西？

要产生这个，你可以有`DataList`一个`Repeater`里面包含你需要的按钮。您可以实现您的`OnDataBinding`事件，`DataList` `(YourListItem)`然后绑定基于某些数据生成按钮的数据。然后，`Repeater`您可以在其中实现每个按钮的`OnDataBinding`事件，并分配`CommandArguments`您需要的 ID 或详细信息，以使按钮特定于它所在的行。

此方法允许您为模板中使用的每个按钮创建一个函数，并`CommandArgument`定义操作的详细信息。

# java - 在最小堆中找到最大值

> ID：13410535
> 
> 赞同：0
> 
> 时间：2012-11-16T04:40:29.080
> 
> 标签：java, algorithm

我正在为考试而学习，从我正在查看的一个工作表中，它要求为存储整数的最小堆编写一个方法 maximum()。

```
public class Heap {
   private int[] arr = new int[100];
   private int numElts = 0;

   public int largest(){

  }

} 
```

最大大小为 100 个元素，newElt 跟踪存储在堆中的当前元素数。

我正在考虑做类似的事情：

```
int[] newArr = Collections.sort(arr);
return newArr[newElt]; 
```

但这会改变原来的堆。我可以对其进行深层复制，但它说它没有必要检查所有堆元素。

那么任何人都可以提出一种方法来做到这一点，而无需查看每一个元素吗？谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T04:53:41.263

如果您的结构是按堆顺序排列的，如果它是 -max heap- 那么您的最大元素就是`arr[0]`. 但是因为它是一个最小堆，所以你只知道最大元素是一个叶节点。

所以你不需要测试每个元素。但是您最多需要查看一半的元素（对于二叉树，叶子的数量在 1 到一半大小加 1 之间，包括两个帐户）。

您可以通过知道二叉堆（您描述的）是一种特殊的**平衡**二叉树来快速查看叶节点，通过少量计算可以告诉您两组叶节点可能在哪里。

# iphone - 如何确保电子邮件已发送

> ID：13410538
> 
> 赞同：0
> 
> 时间：2012-11-16T04:40:35.023
> 
> 标签：iphone

我使用 MFMailComposeViewController 发送电子邮件。它总是将电子邮件添加到电子邮件队列。如果我的电子邮件有很大的附件，发送将需要很长时间。有没有办法确保电子邮件已发送？

欢迎任何评论

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T04:44:57.580

可悲的是，不，没有办法确保电子邮件确实已发送。

您可以做的最好的事情是`mailComposeController:didFinishWithResult:error:`在您的`MFMailComposeViewControllerDelegate`检查中结果等于`MFMailComposeResultSent`，这将告诉您电子邮件已排队等待发送。

# python-2.7 - 如何使用 python-ldap 读取活动目录的内容？

> ID：13410540
> 
> 赞同：4
> 
> 时间：2012-11-16T04:40:36.760
> 
> 标签：python-2.7, python-ldap

我的脚本是这样的：

```
import ldap, sys
server = 'ldap://my_server'
l = ldap.initialize(server)
dn="myname@mydomain"
pw = "password"
l.simple_bind_s(dn,pw)
ldap.set_option(ldap.OPT_REFERRALS,0)
print "valid" 
```

我在 Windows 上使用 Python 2.7。

有什么方法可以读取或获取活动目录的内容吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-13T11:53:02.543

`win32com.client`您也可以使用（我很难找到相关文档）来做很多事情。例如，我需要解析知道他的[`ADS_NAME_TYPE_NT4`](http://msdn.microsoft.com/en-us/library/aa772267%28v=vs.85%29.aspx)格式化名称 ( `doman\jonjoe`) 的用户电子邮件。

首先，您需要将其转换为`ADS_NAME_TYPE_1779`格式 ( `CN=Jeff Smith,CN=users,DC=Fabrikam,DC=com`)：

```
name_resolver = win32com.client.Dispatch(dispatch='NameTranslate')
name_resolver.Set(3, 'domain\\jonjoe')
ldap_query = 'LDAP://{}'.format(name_resolver.Get(1)) 
```

一旦你有了，你可以简单地调用`GetObject()`：

```
ldap = win32com.client.GetObject(ldap_query)
print(ldap.Get('mail')) 
```

[使用 Python 3.2.5 测试]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T06:17:20.630

你应该真的需要阅读 python-ldap [http://www.python-ldap.org/docs.shtml的文档](http://www.python-ldap.org/docs.shtml)

```
You have a connection in your variable l, then you can do this.

l.con_search_s('dc=your,dc=base,dc=dit', ldap.SCOPE_SUBTREE, 'uid=*', ['uid', 'uidnumber'])

The above code, goint to search in to all the uid's entrys, for if entry, is going to get the uid and the uidnumbre attributes. 
```

# mysql - WHERE 子句中的语法错误 256

> ID：13410542
> 
> 赞同：1
> 
> 时间：2012-11-16T04:40:48.147
> 
> 标签：mysql

我正在尝试更新表中的字段，但我不断收到此语法错误。

```
global $conn, $strTableName;
db_exec("UPDATE equipment SET EContractNum = " . $_SESSION[$strTableName."_masterkey1"] . " WHERE EContractNum = " . $values['EContractNum'], $conn); 
```

这是错误：

> 错误类型：256 错误描述：您的 SQL 语法有错误；检查与您的 MYSQL 服务器版本相对应的手册，以在第 1 行的“WHERE econtractnum=35867111”附近使用正确的语法

我查看了几个与我相似的搜索，但我无法弄清楚我做错了什么。我对此很陌生，所以这可能很简单。我似乎无法让它工作。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T04:43:39.320

`$_SESSION[$strTableName."_masterkey1"]`可能是空的，或者是需要引用的字符串。

另外，不要将变量的原始值放入这样的查询中。使用框架或准备好的语句。这对安全性有好处，并且还可以防止这种错误（嗯，它至少会将其变成另一种错误）。

# jsf - javax.servlet.ServletException：WriteText 方法不能写入空文本

> ID：13410545
> 
> 赞同：0
> 
> 时间：2012-11-16T04:41:11.573
> 
> 标签：jsf

我已经使用*JSF+Icefaces+Richfaces+Primefaces*创建了一个 Web 应用程序。当我从 eclipse 作为项目运行它时它工作得很好，但是当我创建它的 WAR 文件并部署在 GlassFish Server 中然后在渲染页面时它会抛出这个异常

```
javax.servlet.ServletException: WriteText method cannot write null text 
```

我搜索但没有得到任何好的解决方案。非常感谢快速帮助

**编辑：1**
我认为这将是相关的部分

```
 <li class="page_item" id="liMasterSearch">      <!-- this is for hide (<li class="page_item hide" id="liMasterSearch"> applied to every class) -->
                            <h:commandLink value="Search" action="#{masterRenderBean.showSimpleSearch}"></h:commandLink>
                        </li>

                        <li class="page_item" id="liAdvanceSearch">
                            <h:commandLink value="Advance Search" action="#{masterRenderBean.showADVS}"></h:commandLink>
                        </li> 
```

在这里您可以看到两个链接*(1)* Search**和** *(2)* Advance Search
当我单击 Search 时，它显示了搜索页面（通过渲染-实际上我已将所有页面包含在 masterpage 中并在 commandlink 函数上渲染它们）

```
 <h:panelGroup rendered="#{not masterRenderBean.simpleSearch}">
            <ui:include src="../../WebPages/SearchPages/MasterSearch.xhtml"></ui:include>
            </h:panelGroup> 
```

但是当我点击高级搜索链接时（这部分应该在上面呈现）

```
<h:panelGroup rendered="#{not masterRenderBean.advs}">  
        <ui:include src="../../WebPages/SearchPages/PersonalAdvanceSearch.xhtml"/>
        </h:panelGroup> 
```

浏览器显示上述异常。
**注意：**请记住，这个问题是在部署中发生的。当我从代码中的 eclipse 运行它时，它并没有出现在实际应用程序中

**编辑：2**我在服务器日志中发现此异常是由于 acefaces 和这部分代码

```
<ace:autoCompleteEntry id="txtplaceofbirth"
                                      rows="10" autocomplete="false" 
                                        minChars="2" width="150" 
                                        value="#{inputPersonal.selectedplcofBirth}" 
                                        filterMatchMode="none"  
                                       valueChangeListener="#{inputPersonal.valueChangeEventCity}">
                                        <f:selectItems value="#{inputPersonal.cities}"/>

                                        </ace:autoCompleteEntry></h:outputFormat> 
```

搞砸了。知道为什么会这样吗？

**编辑#3：**
这是异常的完整跟踪

```
[#|2012-11-19T09:55:48.026+0500|SEVERE|glassfish3.1.2|javax.enterprise.system.std.com.sun.enterprise.server.logging|_ThreadID=53;_ThreadName=Thread-2;|java.lang.NullPointerException: WriteText method cannot write null text
    at org.icefaces.impl.context.DOMResponseWriter.writeText(DOMResponseWriter.java:314)
    at org.icefaces.impl.context.DOMResponseWriter.writeText(DOMResponseWriter.java:340)
    at com.sun.faces.renderkit.html_basic.OutputMessageRenderer.encodeEnd(OutputMessageRenderer.java:163)
    at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1764)
    at javax.faces.render.Renderer.encodeChildren(Renderer.java:168)
    at org.icefaces.impl.renderkit.RendererWrapper.encodeChildren(RendererWrapper.java:49)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeRecursive(HtmlBasicRenderer.java:304)
    at com.sun.faces.renderkit.html_basic.GroupRenderer.encodeChildren(GroupRenderer.java:105)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1757)
    at javax.faces.render.Renderer.encodeChildren(Renderer.java:168)
    at org.icefaces.impl.renderkit.RendererWrapper.encodeChildren(RendererWrapper.java:49)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1757)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
    at org.icefaces.impl.context.DOMPartialViewContext.processPartial(DOMPartialViewContext.java:142)
    at javax.faces.component.UIViewRoot.encodeChildren(UIViewRoot.java:981)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1757)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:391)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)
    at javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:288)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
|#] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T10:53:36.787

```
java.lang.NullPointerException: WriteText method cannot write null text
    at org.icefaces.impl.context.DOMResponseWriter.writeText(DOMResponseWriter.java:314)
    at org.icefaces.impl.context.DOMResponseWriter.writeText(DOMResponseWriter.java:340)
    at com.sun.faces.renderkit.html_basic.OutputMessageRenderer.encodeEnd(OutputMessageRenderer.java:163) 
```

这首先是由 Mojarra 中的一个错误引起的。未正确处理的`null`值。`<h:outputFormat>`这已报告为[问题 2351](http://java.net/jira/browse/JAVASERVERFACES-2351)，自 Mojarra 2.1.9 以来已修复。

显然，生产中的服务器正在运行旧版本的 Mojarra。您有 2 个选项：

1.  在生产服务器中升级 Mojarra 版本。目前[已经](http://javaserverfaces.java.net)是 2.1.14。
2.  `<h:outputFormat>`通过仅`null`在值为`not empty`.

# windows - 为什么中断 0x2A 在 x64 中不起作用？

> ID：13410546
> 
> 赞同：5
> 
> 时间：2012-11-16T04:41:16.137
> 
> 标签：windows, delphi, assembly

我使用此代码来获取系统启动时间：

```
procedure GetSystemUpTime(var Hour, Minute : integer);

function GetSysTime : dword;
  asm
    int $2a
  end;
begin
  Hour := GetSysTime() div 3600000;
  Minute := GetSysTime() mod 3600000 div 60000;
end;

procedure TForm1.Button1Click(Sender : TObject);
var
  H, M : integer;
begin
  GetSystemUpTime(H, M);
  Label1.Caption := IntToStr(H) + ':' + IntToStr(M);
end; 
```

我对其进行了测试`win8 x86`并且`XP x86`可以正常工作，但是失败`win7 x64` 并出现错误：

![在此处输入图像描述](../Images/fa79f39ba930a7bd20341840c8a99c7d.png)

我想知道如何在 x64 中获得系统中断，有人可以解决它吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-16T05:10:56.440

~~此行为与 OS 处理器体系结构无关。~~`0x2A`中断可以访问未记录的函数，`KiGetTickCount`~~但这仅在 Windows XP 之前有效，~~从 windows vista 开始，您可以使用该[`GetTickCount64`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724411%28v=vs.85%29.aspx)函数获取自系统启动以来经过的毫秒数，也可以使用[`Win32_OperatingSystem`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394239%28v=vs.85%29.aspx)WMI 类和`LastBootUpTime`属性。

顺便说一句，如果您需要测量小于 49.7 天的时间范围，您可以使用[GetTickCount](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724411%28v=vs.85%29.aspx)函数。

```
procedure GetSystemUpTime(var Hour, Minute : integer);
var
 LTicks : DWORD;
begin
  LTicks := GetTickCount();
  Hour   := LTicks div 3600000;
  Minute := LTicks mod 3600000 div 60000;
end; 
```

# 更新

似乎 KiGetTickCount 函数仅在 32 位版本的 Windows 上通过中断 0x2A 接口公开。

这是使用内核调试器在 x86 Windows 上转储 IDT（中断描述符表）的结果。

```
00: 805421b0 nt!KiTrap00
01: f620a4f6 ati2mtag+0x1774F6
02: Task Selector = 0x0058
03: f620a59c ati2mtag+0x17759C
04: 805428c0 nt!KiTrap04
05: 80542a20 nt!KiTrap05
06: 80542b94 nt!KiTrap06
07: 8054320c nt!KiTrap07
08: Task Selector = 0x0050
09: 80543610 nt!KiTrap09
0a: 80543730 nt!KiTrap0A
0b: 80543870 nt!KiTrap0B
0c: 80543ad0 nt!KiTrap0C
0d: 80543dbc nt!KiTrap0D
0e: 805444b8 nt!KiTrap0E
0f: 805447f0 nt!KiTrap0F
10: 80544910 nt!KiTrap10
11: 80544a4c nt!KiTrap11
12: Task Selector = 0×00A0
13: 80544bb4 nt!KiTrap13
14: 805447f0 nt!KiTrap0F
15: 805447f0 nt!KiTrap0F
16: 805447f0 nt!KiTrap0F
17: 805447f0 nt!KiTrap0F
18: 805447f0 nt!KiTrap0F
19: 805447f0 nt!KiTrap0F
1a: 805447f0 nt!KiTrap0F
1b: 805447f0 nt!KiTrap0F
1c: 805447f0 nt!KiTrap0F
1d: 805447f0 nt!KiTrap0F
1e: 805447f0 nt!KiTrap0F
1f: 806e710c hal!HalpApicSpuriousService
20: 00000000
21: 00000000
22: 00000000
23: 00000000
24: 00000000
25: 00000000
26: 00000000
27: 00000000
28: 00000000
29: 00000000
>>2a: 805419de nt!KiGetTickCount<<
2b: 80541ae0 nt!KiCallbackReturn
2c: 80541c90 nt!KiSetLowWaitHighThread
2d: 8054261c nt!KiDebugService
2e: 80541461 nt!KiSystemService
2f: 805447f0 nt!KiTrap0F
30: 80540b20 nt!KiUnexpectedInterrupt0
31: 80540b2a nt!KiUnexpectedInterrupt1
32: 80540b34 nt!KiUnexpectedInterrupt2
33: 80540b3e nt!KiUnexpectedInterrupt3
34: 80540b48 nt!KiUnexpectedInterrupt4
35: 80540b52 nt!KiUnexpectedInterrupt5
36: 80540b5c nt!KiUnexpectedInterrupt6 
```

现在在 x64

```
00: fffff80001865180 nt!KiDivideErrorFault
01: fffff80001865240 nt!KiDebugTrapOrFault
02: fffff80001865380 nt!KiNmiInterrupt Stack = 0xFFFFFA60005F5D40
03: fffff800018656c0 nt!KiBreakpointTrap
04: fffff80001865780 nt!KiOverflowTrap
05: fffff80001865840 nt!KiBoundFault
06: fffff80001865900 nt!KiInvalidOpcodeFault
07: fffff80001865ac0 nt!KiNpxNotAvailableFault
08: fffff80001865b80 nt!KiDoubleFaultAbort Stack = 0xFFFFFA60005F1D40
09: fffff80001865c40 nt!KiNpxSegmentOverrunAbort
0a: fffff80001865d00 nt!KiInvalidTssFault
0b: fffff80001865dc0 nt!KiSegmentNotPresentFault
0c: fffff80001865ec0 nt!KiStackFault
0d: fffff80001865fc0 nt!KiGeneralProtectionFault
0e: fffff800018660c0 nt!KiPageFault
10: fffff80001866400 nt!KiFloatingErrorFault
11: fffff80001866540 nt!KiAlignmentFault
12: fffff80001866600 nt!KiMcheckAbort Stack = 0xFFFFFA60005F3D40
13: fffff80001866940 nt!KiXmmException
1f: fffff80001895290 nt!KiApcInterrupt
2c: fffff80001866ac0 nt!KiRaiseAssertion
2d: fffff80001866b80 nt!KiDebugServiceTrap
2f: fffff800018aeb60 nt!KiDpcInterrupt 
```

# java - 在 google appengine 中的版本/后端之间共享会话

> ID：13410549
> 
> 赞同：1
> 
> 时间：2012-11-16T04:41:45.317
> 
> 标签：java, google-app-engine, session

我在 appengine 上托管了一个相当大的应用程序。它有各种组件，每个组件都由公司的不同团队完成。

我希望将应用程序分解为各个子模块，每个子模块都作为一个版本单独托管。例如：module1.mainapp.com。

由于 Google 使用数据库来共享会话，并且数据库在版本和后端之间共享，有没有办法共享会话？目前，看起来每个会话都不同。

我知道我们可以`<SessionCookie domain="example.com"/>`在普通应用程序中放入 web.xml，但我不确定 AppEngine 是否尊重这一点。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T10:24:11.170

这是不可能的，因为 cookie 是由用户系统设置的，并且 cookie 是每个域的。

在任何情况下，我都不推荐这种方法——修改你的 URL 方案以适应你的应用程序的内部组织是一个讨厌的 hack；您呈现给用户的 URL 方案不需要与您处理请求的方式有任何直接关系。

# c - 使用 malloc 分配新内存后是否必须调用 memset

> ID：13410550
> 
> 赞同：11
> 
> 时间：2012-11-16T04:41:53.163
> 
> 标签：c, malloc, memset

```
#include "stdlib.h"
#include "stdio.h"
#include "string.h"
int main(int argc, char* argv[])
{
    int *test = malloc(15 * sizeof(int));
    for(int i = 0;i < 15 ;i  ++ )
        printf("test is %i\n",test[i]);

    memset(test,0,sizeof(int) * 15);

    for(int i = 0 ; i < 15; i ++ )
        printf("test after memset is %i\n",test[i]);

    return 0;
} 
```

我得到的输出很奇怪：

```
 test is 1142126264
    test is 32526
    ...
    test is 1701409394
    test is 1869348978
    test is 1694498930
    test after memset is 0
    test after memset is 0
    test after memset is 0
    test after memset is 0
    test after memset is 0
    ...
    test after memset is 0
    test after memset is 0
    test after memset is 0
    test after memset is 0
    test after memset is 0 
```

为什么会这样？我以为我刚刚`malloc`编辑了一些可以使用的新记忆？

那么这个怎么样：

```
int test[15]; 
```

我必须打电话 `memset(&test,0,sizeof(int) * 15);`吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-16T04:46:00.883

`malloc`不初始化它分配的内存。你只会得到那里已经存在的任何随机垃圾。如果您真的需要将所有内容设置为 0，请使用`calloc`性能损失。（如果您需要初始化为 0 以外的值，请使用`memset`字节数组，否则手动循环数组以对其进行初始化。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T07:38:32.667

C11 7.22.3.4

```
void *malloc(size_t size); 
```

> **malloc 函数为大小**由 size 指定且值不确定的对象分配空间。

如果您希望将值设置为零，请`calloc`改用。`calloc`基本上只是一个围绕一次调用`malloc`和一次调用的包装函数`memset`（要设置的值为 0）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T04:44:33.123

当你从堆请求内存时，堆只会分配任何可用的内存块。这块内存可能有一些数据，具体取决于先前的写入。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T04:50:19.453

出于性能原因， malloc() 不保证新分配内存的内容。它可能是零，它可能是随机数据，它可能是任何东西。如果您希望 malloc'ed 内存具有特定值，则由您决定。

# java - groovy中的排序地图

> ID：13410551
> 
> 赞同：23
> 
> 时间：2012-11-16T04:41:56.427
> 
> 标签：java, groovy, map

我有兴趣在 groovy 中使用排序映射（使用 gremlin，它是图形数据库的 DSL）。

我在这里查看了关于排序地图的这篇[博客文章](http://mrhaki.blogspot.com.au/2010/04/groovy-goodness-sorting-map.html)，但我仍然有点困惑。

*   如何声明已排序的地图？它与地图的标准方式有什么不同`y = [:]`吗？

*   使用排序映射时，插入到列表中的项目是否将按照它们插入的顺序进行？或者我是否必须`sort{}`在排序地图中的项目排序之前运行？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-11-16T09:27:05.947

如果你只是像这样声明一个地图：

```
def m = [:] 
```

然后，您可以看到 Groovy 默认会生成一个`LinkedHashMap`

```
assert m.getClass().name == 'java.util.LinkedHashMap' 
```

如果您查看[LinkedHashMap 的文档，](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashMap.html)它会说：

> Map 接口的哈希表和链表实现，具有可预测的迭代顺序。此实现与 HashMap 的不同之处在于它维护一个双向链表，该列表贯穿其所有条目。这个链表定义了迭代顺序，通常是键插入映射的顺序（插入顺序）。

所以`LinkedHashMap`有一个订单，你可以通过调用来影响 Groovy 中的订单`sort`

```
def m = [ b:1, a:2 ]

// Sort by descending value
m = m.sort { -it.value }

println m // prints [a:2, b:1] 
```

如果您想要键的自然排序，那么您可以使用 Java 的排序映射之一，例如`TreeMap`

要说你想在 Groovy 中使用它，你可以这样做：

```
// def tm = [ tim_yates:1, F21:2 ] as TreeMap // works as well
TreeMap tm = [ tim_yates:1, F21:2 ] 
```

然后打印这个，你可以看到它是按键排序的：

```
println map // prints [F21:b, tim_yates:a] 
```

A`TreeMap`将在您添加密钥时保持顺序。添加新值时， A`LinkedHashMap`不会自动保持排序状态。

# jquery-mobile - Jquery mobile将页面更改为自身

> ID：13410553
> 
> 赞同：0
> 
> 时间：2012-11-16T04:42:18.497
> 
> 标签：jquery-mobile

我有一个用 jquery mobile（单页）构建的网站。

我有类似向导的东西：例如搜索-> 选择-> 选择-> 搜索-> 菜单-> 搜索-> 搜索。基本上这里只有三页，但我需要将其中一些更改为自身，例如搜索到搜索，因此它将成为历史并引发页面显示事件等......

我该怎么做？

```
 $.mobile.changePage("#page1"); 
```

在这种情况下不起作用：这是一个解决方法的[示例](http://jsfiddle.net/4fbqQ/)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T04:44:15.997

您是否尝试过[文档](http://jquerymobile.com/test/docs/api/methods.html)`allowSamePageTransition`中讨论的选项？

# file-upload - primeFaces 无法将文件上传到数据库

> ID：13410555
> 
> 赞同：0
> 
> 时间：2012-11-16T04:42:37.977
> 
> 标签：file-upload, jsf-2, primefaces, image-uploading, managed-bean

我正在尝试将作为`Product`对象一部分的文件（图片）上传到数据库。根据jsf确认文件上传成功。但是，在`Product`没有图片的情况下，持久化成功完成。服务器没有返回任何堆栈。

这是我的表格（简化）：

```
<h:form enctype="multipart/form-data">
                <h1><h:outputText value="Create New Product"/></h1>
                <h:panelGrid columns="2">

                    <h:outputLabel value="Name:" for="name" />
                    <h:inputText id="name" value="#{productController.product.name}" title="Name" />

                    <h:outputLabel value="Description:" for="description" />
                    <h:inputText id="description" value="#{productController.product.description}" title="Description" />

                    <h:outputLabel value="Price:" for="price" />
                    <h:inputText id="price" value="#{productController.product.price}" title="Price" />                     

                    <h:outputLabel value="Category:" for="category_fk" />
                    <h:selectOneMenu id="category_fk" value="#{productController.product.category_fk}" 
                                     converter="#{categoryConverter}" title="Category_fk" >                        
                        <f:selectItems value="#{productController.categoryList}" var="prodCat"
                                       itemValue="#{prodCat}" itemLabel="#{prodCat.name}"/>
                    </h:selectOneMenu>                                    

                    <p:fileUpload fileUploadListener="#{productController.handleFileUpload}" update="msg" auto="true" />                                                
                    <p:growl id="msg" showDetail="true"/>

                    <h:inputHidden id="dateAdded" value="#{productController.product.dateAdded}">
                        <f:convertDateTime pattern="yyyy/MM/dd HH:mm:ss" />
                    </h:inputHidden>

                </h:panelGrid>

                <h:commandButton value="Create Product" action="#{productController.doCreateProduct()}"/>

            </h:form> 
```

本产品控制器（简体）：

```
@ManagedBean
@RequestScoped
public class ProductController {

    @EJB
    private ProductEJB productEjb;
    @EJB
    private CategoryEJB categoryEjb;

    private Product product = new Product();
    private List<Product> productList = new ArrayList<Product>();

    private Category category;
    private List<Category> categoryList = new ArrayList<Category>();

    // -------------------------------------------------------- Business Methods
    public String doCreateProduct()
    {

        product = productEjb.createProduct(product);
        productList = productEjb.findAllProducts();
        return "listProduct?faces-redirect=true";
    }

    public String doDeleteProduct()
    {
        productEjb.deleteProduct(product);        
        return "listProduct?faces-redirect=true";
    }

    public String cancelDeleteAction()
    {
        return "listProduct?faces-redirect=true";
    }

        // Update product listing
        public void preRenderView()
        {
            if(product == null)
            {
                product = new Product();                
            }            
        }

        public String doUpdateProduct()
        {
            if(product.getProduct_id() != 0)
            {
                productEjb.updateProduct(product);                
            }
            else
            {
                productEjb.createProduct(product);
            }

            //addFlashMessage("Product " + product.getName() + " (" + product.getProduct_id() + ") has been updated");

            return "listProduct?faces-redirect=true";
        }

        public void handleFileUpload(FileUploadEvent event)
        {
            byte[] uploadedFile = new byte[event.getFile().getContents().length];
            System.arraycopy(event.getFile().getContents(), 0, uploadedFile, 0, event.getFile().getContents().length);
            product.setImageFile(uploadedFile);

            FacesMessage msg = new FacesMessage("Succesful", event.getFile().getFileName() + "is uploaded.");        
            FacesContext.getCurrentInstance().addMessage(null, msg);
        }

    @PostConstruct
    public void init()
    {
        categoryList = categoryEjb.findAllCategory();
        productList = productEjb.findAllProducts();        
    } 
```

这是产品实体（简体）：

```
@Entity
@NamedQueries({
    @NamedQuery(name="findAllProducts", query = "SELECT p from Product p")

})
public class Product implements Serializable
{
    private static final long serialVersionUID = 1L;

    @Id @GeneratedValue(strategy= GenerationType.AUTO)
    private int product_id;
    private String name;
    private String description;
    @Lob
    @Column(name="imageFile")
    protected byte[] imageFile;
    private Float price;
    @Temporal(TemporalType.TIMESTAMP)
    private Date dateAdded;        
    @ManyToOne
    private Category category_fk;
    @OneToOne(mappedBy = "product_fk")
    private SaleDetails saleDetails_fk; 
```

**解决方案：** 我将托管 bean 的范围更改为：

```
@ViewScope 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T17:55:14.953

文件上传发生在第一个请求中。

当表单与输入数据一起提交时，将启动一个新的第二个请求。将创建一个新的 requestScoped ManagedBean，它不知道先前的文件上传。

要允许两个请求共享同一个 Managedbean，请将范围更改为：

```
@ViewScoped 
```

# html - 如何将 2 个字段对齐为 1 行？

> ID：13410559
> 
> 赞同：1
> 
> 时间：2012-11-16T04:42:55.327
> 
> 标签：html, css-tables

我是 CSS 新手。我的jsfiddle在这里 [http://jsfiddle.net/PAHdH/](http://jsfiddle.net/PAHdH/)

```
<div>
    <label>Name: </label><p>John</p>
    <label>Age: </label><p>35</p>
    <label>Level: </label><p>60</p>
    <label>Score: </label><p>5000</p>
</div>

label{
    display: inline-block;
    float: left;
    clear: left;
    width: 150px;
    text-align: left;
    color:black;
}

p {margin-bottom:2px; padding:0;} 
```

​</p>

我想改为

姓名：John 年龄：35
等级：60 分数：5000

它应该像一个有 4 列的表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T04:52:08.590

***[演示](http://jsfiddle.net/PAHdH/14/)***

您好，现在您的**标记错误**，请更改为您的**标记 html 和 css**写入

**像这样**

**HTML**

```
<div>
   <p> <label>Name: </label>
       <span>John</span>
       <label>Age: </label><span>35</span></p>

    <p><label>Level: </label><span>60</span>
        <label>Score: </label><span>5000</span></p>
</div> 
```

**CSS**

```
label, span{
float:left;
    margin:1px;
    background:rgba(0,0,0,0.3);
        width:150px;
    padding:2px;
}
p{
overflow:hidden;
} 
```

***[现场演示](http://jsfiddle.net/PAHdH/14/)***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T04:49:16.193

使用 P 避免了这个想法，因为它在元素之前和之后生成换行符。我希望这会有所帮助。

```
<div> 
  <p>
    <label>Name: <span>John</span></label>
    <label>Age: <span>35</span></label>
  </p>
  <p>
    <label>Level: <span>60</span></label>
    <label>Score: <span>5000</span></label>
  </p>
</div> 
```

我在需要创建新行的地方使用了 P，并将您的 P 更改为 SPAN .. 这是 CSS

```
label {
    float: left;
    width: 150px;
    text-align: left;
    color:black;
    border:#000 1px solid;
}

span {margin-bottom:2px; padding:0; }
p { clear:both; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T04:52:02.320

我认为你甚至不需要修改你的 CSS，摆脱 <p>

当然 label 应该真正连接到 <input> 元素

```
<label for="name">John</label>
<span id="name">male<span>
<label for="age">Age</label>
<span id="age">35<span>

<br/>

<label for="level">Level</label>
<span id="level">100<span>
<label for="score">Score</label>
<span id="score">1000<span> 
```

给

约翰 男 年龄 35
等级 100 分数 1000

作为一个后盾，如果你真的想使用 <p> 然后使用 style

```
p { display: inline-block;}​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T04:56:41.613

你可以这样使用。

```
label{
    display: inline-block;
    float: left;
    clear: left;
    width: 150px;
    text-align: left;
    color:black;
}

span {margin-bottom:2px; padding:0;margin-left:10px;}

<div>
    <label>Name:<span>John</span><span>Age:</span><span>35</span></label>
</div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-16T05:34:18.470

如前所述，`label`与不是表单元素的东西相关联是有问题的。这可能更适合[定义列表](http://reference.sitepoint.com/html/dl)。在这里使用表格也可能在语义上是正确的，因为您有表格数据要显示为表格。

**定义列表示例**

*HTML*

```
<dl>
    <dt>Name:</dt>
    <dd>Jon</dd>
    <dt>Age:</dt>
    <dd>35</dd>
    <dt>Level:</dt>
    <dd>10</dd>
    <dt>Score:</dt>
    <dd>100</dd>
</dl> 
```

*CSS*

```
dl
{
    position:releative;
}

dd
{
    float:left;
    width:40%;
}

dt
{
    float:left;
    width:10%;
    font-weight:bold;
} 
```

小提琴：http: [//jsfiddle.net/xwavM/](http://jsfiddle.net/xwavM/)

**表格示例**

```
<table>
   <tbody>
      <tr> 
         <th>Name:</th>
         <td>John</td>
         <th>Age:</th>
         <td>35</td>
      </tr>
      <tr> 
         <th>Level:</th>
         <td>100</td>
         <th>Score</th>
         <td>100</td>
      </tr>
   </tbody>
</table> 
```

# sql - SQL 连接不明确的列

> ID：13410566
> 
> 赞同：0
> 
> 时间：2012-11-16T04:43:15.040
> 
> 标签：sql, oracle

我正在尝试加入几个表以生成具有先决条件的类的列表。一切都很好，除了我需要先决条件和原始类的类名。

到目前为止我有

```
SELECT course_name, c.course_number, course_name, prereq
FROM rearp.course c, rearp.prereq p
WHERE c.course_number = p.course_number; 
```

这给了我（您已经可以看到 course_name 存在两次的问题[不知道如何处理它]）

*   课程名称（好的好的）
*   班级（是的）
*   再次输入课程名称（等等，这是同一个名字！）
*   先决条件（好）

忽略格式，请注意课程名称或先决条件仅与原始课程对应，而不是先决条件。

我的问题是我无法让名称匹配。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T04:47:51.010

使用别名并确保始终在字段列表中包含表名：

```
SELECT
    c.course_name,
    c.course_number,
    p.course_name AS prereq_course_name,
    p.prereq
FROM rearp.course AS c, rearp.prereq AS p
WHERE c.course_number = p.course_number 
```

另外，请使用有意义的表别名而不是单个字母，并尝试使用实际连接而不是隐式连接。如果您使用的是 MySQL，则连接将是交叉连接，这是低效且不必要的。

编辑：在字段列表中添加逗号...

# android - 为什么我的接收器没有接收到广播？

> ID：13410569
> 
> 赞同：1
> 
> 时间：2012-11-16T04:43:29.123
> 
> 标签：android, broadcastreceiver, intentfilter, android-pendingintent, proximity

我在使用/理解 BroadcastReceivers 和 IntentFilters 时遇到了困难。我的测试活动中有以下代码。测试活动包含一个 .addProximityAlert，如果触发了 .addProximityAlert，我想广播到 Test2 接收器。我在测试时遇到错误。我究竟做错了什么？

测试活动：

```
public class Test extends BroadcastReceiver
{   
    LocationManager lm;
    ... 
    @Override
    public void onReceive(Context context, Intent intent) 
    {   
        ... 
        final String PROX_ALERT_INTENT = "com.example.proxalert.Test2";
        Intent alert = new Intent(PROX_ALERT_INTENT);
        PendingIntent proximityIntent = PendingIntent.getBroadcast(context, 0, alert, 0);

        lm.addProximityAlert(latitude, longitude, radius, expiration, proximityIntent);

        IntentFilter filter = new IntentFilter(PROX_ALERT_INTENT);
        context.registerReceiver(new Test2(), filter); 
```

测试2接收器：

```
public class Test2 extends BroadcastReceiver {
    @Override
    public void onReceive(Context arg0, Intent arg1) {
    String key = LocationManager.KEY_PROXIMITY_ENTERING;
        Boolean entering = arg1.getBooleanExtra(key, false);
        if (entering) {
        //toast notification "welcome"
    }
    ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T01:10:03.480

测试扩展广播接收器，因此必须通知广播才能激活。你确定那是你想做的吗？

真的是安卓测试吗？我不这么认为。因此，如果您只是删除 Test 类的代码，请使用按钮创建一个活动，并在单击按钮时在 Test 中执行您的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T18:59:56.437

嗨，在您的活动（或服务）下使用 BroadcastReceivers 和 IntentFilters 来喜欢这个：

```
 broadcastReceiver = new BroadcastReceiver() {//global BroadcastReceiver
            @Override
            public void onReceive(Context context, Intent intent) {

                String action = intent.getAction();
                //Action receive
            }; 
```

意图过滤器：

```
 IntentFilter intentfilterTime = new IntentFilter(); 
        intentfilterTime.addAction(Intent.ACTION_BATTERY_CHANGED);//receive battery level change
        registerReceiver(broadcastReceiver, intentfilterTime); 
```

添加您想要接收的所有操作。您的代码不起作用，因为您在另一个内部使用广播，我认为这不是您想要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T05:44:36.023

您可以简单地同时注册两个 BroadcastReceiver 并控制启用，通过简单的方法禁用它们，例如

*   使用静态/非静态布尔变量
*   使用 Preferences 保存键值

**例如：**

```
public class Test extends BroadcastReceiver
{   
    LocationManager lm;
    ... 
    @Override
    public void onReceive(Context context, Intent intent) 
    {   
    ... 
            final String PROX_ALERT_INTENT = "com.example.proxalert.Test2";
        Intent alert = new Intent(PROX_ALERT_INTENT);
        PendingIntent proximityIntent = PendingIntent.getBroadcast(context, 0, alert, 0);

        lm.addProximityAlert(latitude, longitude, radius, expiration, proximityIntent);

        IntentFilter filter = new IntentFilter(PROX_ALERT_INTENT);
        Test2.someStaticVariable = true;

public class Test2 extends BroadcastReceiver {
    public static boolean someStaticVariable;

    @Override
    public void onReceive(Context arg0, Intent arg1) {

    if (!someStaticVariable){
        return;
    }

    String key = LocationManager.KEY_PROXIMITY_ENTERING;
        Boolean entering = arg1.getBooleanExtra(key, false);
        if (entering) {
        //toast notification "welcome"
    }
    ... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T17:40:27.093

我能够通过在 android 清单中注册接收器来使其工作，而不是尝试在 test1 中动态注册接收器。这个网站真的很有帮助：

[http://www.techotopia.com/index.php/Android_Broadcast_Intents_and_Broadcast_Receivers](http://www.techotopia.com/index.php/Android_Broadcast_Intents_and_Broadcast_Receivers)

# javascript - 如何保持包含 usercntrols 的 aspx 页面的滚动位置

> ID：13410573
> 
> 赞同：2
> 
> 时间：2012-11-16T04:43:45.970
> 
> 标签：javascript, asp.net, scroll

我必须保持包含用户控件和其中一些按钮的页面的滚动位置。

当用户控件中的控件被单击时，页面被后置。我想保持以前的页面滚动位置。

我已经在我的页面中尝试过 Maintainscrollposition=true 这样的事情。

请给我一些例子。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T05:58:22.667

确保您在使用用户控件的页面中有 Maintainscrollposition=true。（我想你已经尝试将它放在 usercontrol 标题中）

如果这不起作用，那么在 page_load 中，添加 Page.MaintainScrollPositionOnPostBack = true;

如果它仍然不起作用，请告诉我，我会尝试找到我过去使用的 javascript 代码..

# sql - Sqlite3 语法错误

> ID：13410581
> 
> 赞同：0
> 
> 时间：2012-11-16T04:44:38.750
> 
> 标签：sql, sqlite

我正在向我的 sqlite3 数据库中插入一些值，但这样做会遇到一些问题。

询问：

```
INSERT OR REPLACE INTO TECHNICALINFO (PARENTID, PCREATEDBY, PDATECREATED, PDATEMODIFIED, PDESCRIPTION, TECHINFOID, PLAYOUTTYPE, PMEDIAFILE, PMEDIAFILETHUMB, PMEDIAID, PNAME, PPUBLISHDATEEND, PPUBLISHDATESTART, PSTATUS, PTITLE1, PTITLE2, TYREBRANDID, RELATEDCRITERIA, MILEAGEMINVALUE, MILEAGEFREQUENCY, MILEAGETOLERANCE, AGEVEHICLEMINVALUE, AGEVEHICLEFREQUENCY, AGEVEHICLETOLERANCE, ISPUBLISHED, APPROVEDBY, DATEAPPROVED, MEDIUMID, ISAMENDED,FILESIZE,STATUS) VALUES ("0","1","2012-05-02 06:57:27","2012-05-02 06:57:27","<div style='color:#FFF;font-family:Helvetica;'><div style="font-family:Helvetica;"><div style="font-family: Helvetica;"><div style="font-family: Helvetica;"><p><span style="font-size: 18px;"><strong>Brake System</strong></span><br /><span style="font-size: 18px;">Features the Component Layout for the Brake System.</span><br /><span style="font-size: 18px;">Description on individual function of each component.</span></p><p><span style="font-size: 18px;"><strong>ABS (anti-lock brake system)</strong></span><br /><span style="font-size: 18px;">Features the Component Layout for the ABS (anti-lock brake system).</span><br /><span style="font-size: 18px;">Description on individual function of each component.</span></p><p><span style="font-size: 18px;"><strong>ABS with EDB (electronic brake force distribution)</strong></span><br /><span style="font-size: 18px;">Features the Component Layout for the ABS with EDB (electronic brake force distribution).</span></p><p><span style="font-size: 18px;">Description on individual function of each component.</span></p><p><span style="font-size: 18px;"><strong>VSC (vehicle stability control)</strong></span></p><p><span style="font-size: 18px;">Features the Component Layout for the VSC (vehicle stability control).</span><br /><span style="font-size: 18px;">Description on individual function of each component.</span></p><p><span style="font-size: 18px;"><strong>Brake Assist System</strong></span><br /><span style="font-size: 18px;">Features the Component Layout for the Brake Assist System.</span><br /><span style="font-size: 18px;">Description on individual function of each component.</span></p></div></div></div></div>","8","(null)","http://46.137.210.235/files/media/full/brake_system.png","http://46.137.210.235/files/media/thumb/brake_system-thumb.png","(null)","2\. Brake System","2013-04-23 00:00:00","2012-04-23 00:00:00","2","2\. Brake System","","(null)","(null)","(null)","(null)","(null)","(null)","(null)","(null)","YES","1","2012-04-23 10:14:04","439","0","(null)","(null)") 
```

它给了我这个错误：

异常名称：NS_ERROR_FAILURE 异常消息：组件返回失败代码：0x80004005 (NS_ERROR_FAILURE) [mozIStorageConnection.createStatement]

我该如何解决这个问题？需要一些指导...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T04:52:50.240

```
"<div style='color:#FFF;font-family:Helvetica;'><div style="font-family:Helvetica;"><div style="font-family: Helvetica;"><div style="font-family: Helvetica;"><p><span style="font-size: 18px;"><strong>Brake System</strong></span><br /><span style="font-size: 18px;">Features the Component Layout for the Brake System.</span><br /><span style="font-size: 18px;">Description on individual function of each component.</span></p><p><span style="font-size: 18px;"><strong>ABS (anti-lock brake system)</strong></span><br /><span style="font-size: 18px;">Features the Component Layout for the ABS (anti-lock brake system).</span><br /><span style="font-size: 18px;">Description on individual function of each component.</span></p><p><span style="font-size: 18px;"><strong>ABS with EDB (electronic brake force distribution)</strong></span><br /><span style="font-size: 18px;">Features the Component Layout for the ABS with EDB (electronic brake force distribution).</span></p><p><span style="font-size: 18px;">Description on individual function of each component.</span></p><p><span style="font-size: 18px;"><strong>VSC (vehicle stability control)</strong></span></p><p><span style="font-size: 18px;">Features the Component Layout for the VSC (vehicle stability control).</span><br /><span style="font-size: 18px;">Description on individual function of each component.</span></p><p><span style="font-size: 18px;"><strong>Brake Assist System</strong></span><br /><span style="font-size: 18px;">Features the Component Layout for the Brake Assist System.</span><br /><span style="font-size: 18px;">Description on individual function of each component.</span></p></div></div></div></div>" 
```

您正在尝试在 vlaue 列中插入包含双引号的内容。双引号被视为分隔符。所以你必须使用两个双引号而不是一个。

例如

```
"<div style='color:#FFF;font-family:Helvetica;'><div style=""font-family:Helvetica;"">.. 
```

等等

# jquery - 提交登录表单后关闭 Fancybox 模态窗口并重新加载页面

> ID：13410582
> 
> 赞同：3
> 
> 时间：2012-11-16T04:44:43.903
> 
> 标签：jquery, fancybox, fancybox-2

我在 FancyBox 2 模态 iframe 窗口中打开了一个登录表单。但是当您提交表单时，网页会在模式中打开。

谁能告诉我是否以及如何关闭 Fancybox 模式，并在提交登录表单时重新加载底层页面？

这是我当前的代码 - 在 functions.js 文件中：

```
 $(".login-popup").fancybox({
    maxWidth    : 310,
    height      : 300,
    autoSize    : false,
    closeClick  : false,
    openEffect  : 'none',
    closeEffect : 'none'
  }); 
```

这是我的登录链接：

```
<a class="login-popup" data-fancybox-type="iframe" href="/popup/login" title="">Login</a> 
```

谢谢你的帮助，

斯特

编辑1：

感谢您对此的帮助。对不起，我是一个完整的新手，但我无法获得 parent.$.fancybox.close(); 处理表单 submit() 事件。这是我现在正在使用的代码，但由于我做错了什么，它并没有关闭窗口。有什么想法吗？谢谢。

```
$(".login-popup").fancybox({
    closeEffect : 'none',
    'afterClose':function () {
      window.location.reload();
    },
  });

$(".login-form").submit(function(){
  parent.fancyBoxClose();
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T05:07:04.880

要从 iframe 中关闭 fancybox，您可以`parent.$.fancybox.close();`在`form` `submit()`事件上使用。

然后在 Fancybox 初始化器上添加一个 onClose 事件，它会重新加载页面：

```
$(".login-popup").fancybox({
    maxWidth    : 310,
    height      : 300,
    autoSize    : false,
    closeClick  : false,
    openEffect  : 'none',
    closeEffect : 'none',
    'afterClose':function () {
        window.location.reload();
    },
  }); 
```

# php - Linux 上 Apache 上的 PHP：当 Web 应用程序启动进程时，如果 Apache 重新启动，是否可以让这些进程保持活动状态？

> ID：13410584
> 
> 赞同：1
> 
> 时间：2012-11-16T04:44:56.113
> 
> 标签：php, linux, apache

我们有一个网络应用程序，它允许我们监视和控制我们的服务器应用程序。网页通过执行 shell 脚本来启动应用程序来启动它们。我们遇到的问题是，如果我们需要重新启动 apache，它会杀死任何由 Web 应用程序启动的进程。

网页是 PHP 的，并且正在使用该`exec()`命令来调用启动脚本。启动脚本启动 Java 应用程序，并使用以下内容运行应用程序：

`nohup java ... &`

如前所述，PHP 在 Linux 上的 Apache 中运行。是否有其他一些开关或方法来启动这些不会让它们成为 Apache 的子进程（并在它停止时被杀死）？

澄清

我对 Windows 比对 Linux 更熟悉。在 Windows 中，如果您想完成我们正在尝试的`start`操作，请在 shell 中添加关键字，即：

```
start <batchfile> 
```

当你使用`start`时，新的 shell/进程可以从启动它的那个中解脱出来。是否有与该`start`命令等效的 Linux？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T13:39:04.907

我在我的博客上写了[如何使用 php 创建长时间运行的进程，](http://symcbean.blogspot.co.uk/2010/02/php-and-long-running-processes.html)但是我必须同意 mvp 的观点，即这种方法对于您的目的来说远非理想 - 不仅仅是从特权分离的角度来看（使用 setuid 程序或sudo 很容易解决这个问题）。

根据您在此处尝试实现的目标，我怀疑 DJ Bernsteins [daemontools](http://cr.yp.to/daemontools.html)中的附加功能将更适合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T09:25:14.457

通过 PHP 启动持久的进程听起来像是在自找麻烦。您将遇到与您类似的问题，并且会产生巨大的安全隐患。

更好的解决方案是让您的 PHP 页面将需要以批处理模式运行的内容保存到数据库表（MySQL 或 PostgreSQL）中。

另一个进程（可能在比 apache www 用户更高级的凭据下运行）应该作为守护进程运行，并不断检查数据库中的新内容并执行必要的任务（也可以每隔几分钟被 cron 触发）。

这样，您将用一块石头杀死两只鸟。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T06:27:18.953

您可以使用[batch(1)](http://linux.about.com/library/cmd/blcmdl1_batch.htm)来启动持久的服务器进程。

在shell中，你可以做

```
batch << END
    java yourjava.jar
END 
```

如果您有一些批处理 shell 脚本文件，请使用

```
batch -f yourbatchfile 
```

如果您可以改进 Java 程序，您可以让它们在启动时调用[daemon(3)](http://linux.die.net/man/3/daemon)，也许使用Apache中的[daemon 。](http://commons.apache.org/daemon/)

您可能希望将守护进程的进程 pid 存储在某处（例如，在某个文件或数据库中），以便能够停止它们（首先使用`kill -TERM`，然后使用`kill -QUIT`，最后使用`kill -KILL`）。

使用`daemon`函数或 Java 的东西可能比使用`batch`

# javascript - 将 .html 文件的内容添加/注入到每个访问的网站 - Chrome 扩展？

> ID：13410586
> 
> 赞同：2
> 
> 时间：2012-11-16T04:44:58.817
> 
> 标签：javascript, jquery, google-chrome, google-chrome-extension, insert

我有一些带有图像标签和一些 jQuery 的 HTML，如下所示：

```
<body>
  <img id="MainImage" src="../img/MainImage.png" style="position: absolute;">
  <script type="text/javascript">
    $(document).ready(function() {
      var $img = $("#MainImage");
      $img.hide();
      $('div').mousemove(function(e) {
        if ($(this).attr('align') === 'center') {
        // only show if the align attribute has value center
        $img.fadeIn(0);
        $img.offset({
          top: e.pageY - $img.outerHeight()-2,
          left: e.pageX - ($img.outerWidth()-18)
        });
      }
    }).mouseleave(function() {
      $img.fadeOut(250);
    });
  </script>
</body> 
```

我也有这个清单文件，其中包含以下代码：

```
{
  "name": "Div Image Test",
  "version": "1.0",
  "manifest_version": 2,
  "permissions": [
    "tabs", "http://*/*"
  ],
  "content_scripts": [{
    "matches": ["http://*/*"],
    "js": ["js/CoreTest.html"],
    "run_at": "document_end"
  }]
} 
```

这个脚本/扩展的用途是，每当用户将鼠标悬停在任何 div 上（使用 HTML 属性“align='center'”）时，鼠标光标旁边都会弹出一个图像......这已经有效，但我需要要做的是在安装扩展程序时将脚本/HTML 文件插入到每个网页的“正文”标签中。

我怎样才能做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T06:08:06.653

我不知道您将如何在 Chrome 扩展中执行此操作，但是，如果您对用户脚本感到满意：

创建一个文件并在其顶部放置一个用户脚本标题，用于描述您的应用程序并包含您的姓名等。然后您可以使用 JS（img 标签）创建您需要的所有元素并将悬停绑定到所有 imgs。我自己写了这样一个脚本，但是是为了 Instapaper。这是来源：

安装程序.user.js

```
// ==UserScript==
// @name          Instalater
// @namespace     http://jcla1.com
// @description   Read Later for Instapaper
// @include       *
// ==/UserScript==

function load() {
code = document.createElement('script');
code.type = 'text/javascript';
code.innerText = "$(document).keydown(function(e){if (e.keyCode == 120){(function iprl5(){var d=document,z=d.createElement('scr'+'ipt'),b=d.body,l=d.location;try{if(!b)throw(0);d.title='(Saving...) '+d.title;z.setAttribute('src',l.protocol+'//www.instapaper.com/j/4VJPghE8ugQm?u='+encodeURIComponent(l.href)+'&t='+(new Date().getTime()));b.appendChild(z);}catch(e){alert('Please wait until the page has loaded.');}})();void(0);return false;}})";
document.body.appendChild(code);

};

jq = document.createElement('script');
jq.src = 'https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js';
jq.type = 'text/javascript';
document.body.appendChild(jq);

setTimeout(load, 1000); 
```

# post - 自动 facebook 墙贴，访问令牌保持过期

> ID：13410587
> 
> 赞同：1
> 
> 时间：2012-11-16T04:45:01.737
> 
> 标签：post, cron, facebook-access-token, facebook-wall

我必须在我的 Facebook 页面墙上自动发帖。到目前为止一切顺利......但访问令牌保持过期。我使用我的应用程序和 Graph Explore 进行了自动发布，两者都有同样的问题。

要在 facebook 墙上发帖，我在服务器上创建了一个 Cron 作业，但是几个小时后访问令牌过期，我必须每次手动创建一个新的，这不是自动服务的想法:)

我在这里阅读了大多数与我类似的问题的答案，但已经找不到答案了。

**因此，每次 cronjob 调用我的 php 文件时，我只需要一种方法来获取新的访问令牌。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T19:34:43.313

You could have the cron job email you an authorization link a day or two before the token expires. Using [exchange_token](https://developers.facebook.com/roadmap/offline-access-removal/#page_access_token) you can get a 60-day token, so you only have to re-authorize it every other month.

# shell - 如果脚本的标准输出在执行期间被重定向到文件，如何将特定行单独从脚本回显到标准输出？

> ID：13410588
> 
> 赞同：0
> 
> 时间：2012-11-16T04:45:01.187
> 
> 标签：shell, scripting, stdout, file-descriptor, io-redirection

考虑 ./my_script >/var/log/my_log

仅来自此脚本的单个 echo 语句必须转到标准输出。

这怎么可能实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T08:20:10.830

所以我们有一些聪明的程序

```
cat print2stdout 
#!/bin/sh

echo some words secret and sent to null

echo some words to stdout > /dev/fd/3 
```

最后一行将回显到打开的 3 个文件描述符。

调用时我们将 3 FD 映射到标准输出，然后将标准输出重定向到文件

结果如下所示：

```
./print2stdout 3>&1 >/dev/null  
some words to stdout 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T08:24:23.520

只需使用`/dev/tty`which 指向您的终端仿真器，而不管重定向。

```
#!/bin/sh

echo this line go to the possibly redirected stdout 
echo this line shows up on the screen > /dev/tty 
```

# c# - 按值“分组”字典

> ID：13410590
> 
> 赞同：13
> 
> 时间：2012-11-16T04:45:04.777
> 
> 标签：c#, .net, linq, dictionary, grouping

我有一本字典：`Dictionary<int,int>`。我想获取新字典，其中原始字典的键表示为`List<int>`. 这就是我的意思：

```
var prices = new Dictionary<int,int>(); 
```

其中`prices`包含以下数据：

```
1   100
2   200
3   100
4   300 
```

我想得到`IList<Dictionary<int,List<int>>>`：

```
int      List<int>
100      1,3
200      2
300      4 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-16T04:51:22.353

```
var prices = new Dictionary<int, int>();
prices.Add(1, 100);
prices.Add(2, 200);
prices.Add(3, 100);
prices.Add(4, 300);

Dictionary<int,List<int>> test  = 
                   prices.GroupBy(r=> r.Value)
                  .ToDictionary(t=> t.Key, t=> t.Select(r=> r.Key).ToList()); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-16T04:48:47.743

您可以使用[GroupBy](http://code.msdn.microsoft.com/LINQ-to-DataSets-Grouping-c62703ea)。

```
Dictionary<int,List<int>> groups = 
             prices.GroupBy(x => x.Value)
                   .ToDictionary(x => x.Key, x => x.Select(i => i.Key).ToList()); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-16T05:21:26.613

这是我的回复。当字典变大时，您可能会发现 GroupBy() 扩展方法的效率低于您的预期，因为它们提供了许多您不需要的保证，例如保留顺序。

```
public static class DictionaryExtensions 
{
    public static IDictionary<TValue,List<TKey>> Reverse<TKey,TValue>(this IDictionary<TKey,TValue> src) 
    {
        var result = new Dictionary<TValue,List<TKey>>();

        foreach (var pair in src) 
        {
            List<TKey> keyList;

            if (!result.TryGetValue(pair.Value, out keyList)) 
            {
                keyList = new List<TKey>();
                result[pair.Value] = keyList;
            }

            keyList.Add(pair.Key);
        }

        return result;
    }
} 
```

还有一个在 LinqPad 中使用的示例：

```
void Main()
{
    var prices = new Dictionary<int, int>();
    prices.Add(1, 100);
    prices.Add(2, 200);
    prices.Add(3, 100);
    prices.Add(4, 300);

    // Dump method is provided by LinqPad.
    prices.Reverse().Dump();
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-16T04:51:05.687

您可以使用`GroupBy`后跟[的`Func<TSource, TKey>, Func<TSource, TElement>`重载`Enumerable.ToDictionary`](http://msdn.microsoft.com/en-us/library/bb548657.aspx)：

```
var d = prices.GroupBy(x => x.Value).ToDictionary(x => x.Key, x => x.ToList()); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-09-08T04:57:30.687

您可以改用查找。

```
var prices = new Dictionary<int, int> { {1, 100}, { 2, 200 }, { 3, 100 }, { 4, 300 } };
ILookup<int, int> groups = prices.ToLookup(x => x.Value, y => y.Key);
foreach (var group in groups)
{
    foreach (var item in group)
    {
        Console.WriteLine(item);
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-29T12:24:55.523

在特定情况下，当我们使用 .NET framework 2.0 时，我们可以执行以下操作：

```
var prices = new Dictionary<int, int>();
prices.Add(1, 100);
prices.Add(2, 200);
prices.Add(3, 100);
prices.Add(4, 300);

Dictionary<int, List<int>> grouping = new Dictionary<int, List<int>>();

var enumerator = prices.GetEnumerator();
while (enumerator.MoveNext())
{
    var pair = enumerator.Current;
    if (!grouping.ContainsKey(pair.Value))
        grouping[pair.Value] = new List<int>();
    grouping[pair.Value].Add(pair.Key);
} 
```

# r - 在直方图中添加曲线？

> ID：13410591
> 
> 赞同：1
> 
> 时间：2012-11-16T04:45:13.913
> 
> 标签：r, plot, histogram

我想添加一条曲线，它的 x 和 y 坐标已经定义到直方图。考虑下面的直方图：

```
set.seed(38593)
expRandom <- rexp(10000)
x <- seq(from = 0.05, to = 10, by = 0.001)
y <- exp(-x)
### Now I'd like to first draw my histogram and then 
### add my plot(x,y) to my existing histogram:
hist(expRandom, freq = FALSE)

### ?? How to add my plot(x,y) to my histogram above? 
```

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T04:50:34.997

设置在直方图`freq = FALSE`中绘制密度而不是频率，并使用`points`（或`lines`）添加数据。

```
hist(expRandom, freq = FALSE)
points(x,y) 
```

您还可以避免 `y`通过使用`curve`添加曲线来预先计算值

```
hist(expRandom, freq = FALSE)
curve(dexp, from = 0, to  = 10, add = TRUE) 
```

![在此处输入图像描述](../Images/c0d97e698619d750cb237c6a323f09b5.png)

# c# - 在富文本框中的文本上显示鼠标移动的描述

> ID：13410593
> 
> 赞同：0
> 
> 时间：2012-11-16T04:45:16.567
> 
> 标签：c#, .net

在`visual studio` **IDE**中，我们经常看到假设我们在包含方法和变量的文本区域中输入了一些文本的功能，并且在该文本的鼠标移动时，**IDE**会显示有关变量或方法的提示和注释。现在我的问题是如何在`RichTextBox`. 我试图用c#来做`RichTextBox`你能告诉我们关于这个的任何想法吗？

# sql-server - SQL 客户端，如 SQL Server 的 sequel pro

> ID：13410597
> 
> 赞同：3
> 
> 时间：2012-11-16T04:45:34.340
> 
> 标签：sql-server, database

嗨，我需要连接到远程 SQL Server 数据库，但我无法使用 Sequel pro 连接到它，我已经使用 telnet 检查了连接，它就在那里。我也没有 Windows 操作系统，所以我无法安装 SQL Server。

有什么解决办法吗？顺便说一句，我正在使用 mac os

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T06:32:54.573

您可以使用[SQiurreL SQL](http://squirrel-sql.sourceforge.net/)。它是一个免费的、基于 Java 的 GUI，适用于许多不同的数据库。但是，要与 SQL Server 一起使用，它不能开箱即用。您需要获取[适用于 SQL Server 的 JDBC Driver 4.0，](http://www.microsoft.com/en-us/download/details.aspx?id=11774)并将刚刚下载的驱动程序的路径添加到 SQuirreL 中的驱动程序定义中。

我使用它从我的 Mac 连接到 2005 和 2008R2 SQL 服务器。

# sql-server - 随着时间的推移，插入变得越来越慢？

> ID：13410605
> 
> 赞同：1
> 
> 时间：2012-11-16T04:46:04.570
> 
> 标签：sql-server, entity-framework, entity-framework-4, sql-server-2012, entity-framework-5

我有一个简单的`console app`用. 我正在使用一个简单的数据库（模型优先）。我有两个表，**Customer**和**Email**。每个电子邮件记录都有对客户记录的引用。`C#``VS.NET 2012``Entity Framework 5`

 ****我创建了客户和电子邮件对象，将它们保存到`EF`上下文中的集合中，在创建了 1000 条记录后，我在上下文中调用了保存更改。1000 的批次变得越来越慢，从 1 分钟开始 1000，然后到第 9000 条记录，1000 的批次需要 4 分钟才能完成。

我`CSV`一次一行地从文件中读取数据，对每一行进行简单的拆分，然后构造简单的对象。

我的问题是这是否是`EF5`，或者我是否`index`在数据库中缺少一个？我没有做其他预处理。我正在使用`SQL Server 1012`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T10:05:37.940

您`DbContext`跟踪所有对象，即使它们已保存。的大小`DbContext`可能是导致您的应用程序变慢的原因。

我建议在 1000 次插入后处理`DbContext`并创建一个新的。`DbContext`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T12:56:51.193

您可以使用此禁用对象的跟踪

```
context.Configuration.AutoDetectChangesEnabled = false; 
```****

# javascript - Google 网站的 JavaScript（例如 Gmail、阅读器和搜索）中使用的“$$”变量/对象是什么？

> ID：13410606
> 
> 赞同：0
> 
> 时间：2012-11-16T04:46:17.773
> 
> 标签：javascript, gmail, userscripts, dollar-sign

> **可能重复：**
> [Chrome/Ffirefox中双元符号选择器查询功能的来源是什么？](https://stackoverflow.com/questions/8981211/what-is-the-source-of-the-double-dollar-sign-selector-query-function-in-chrome)

我注意到许多主要的 Google 网站（网络应用程序），例如 Search、Gmail 和 Reader 不仅定义了一个`$`对象，还定义了一个`$$`对象。

我不确定前者是什么，但后者至少有一个类似于 jQuery 的选择器功能。

`$$`虽然不是完整的 jQuery 本身。我可以做类似`$$('main')`但不能做的事情`$$('main').text()`。

有谁知道这个`$$`物体是什么？它是 jQuery 的精简版吗？是 Sizzle 选择器引擎吗？它是其他一些看起来有点类似于 jQuery 的框架吗？

它在任何地方都有记录吗？

奖励问题：

*   Google 网站上是否还有其他带有其他 jQuery 函数的对象？
*   `$`他们使用的对象是什么？

* * *

背景：无论我是使用脚本标签将 jQuery 注入网站还是将我的用户脚本代码注入他们的页面以使用任何框架或库，我都无法让 jQuery 在 Google 网站上的 Google Chrome 用户脚本（如 Greasemonkey）中工作他们可能已经包括在内。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T05:07:33.137

谷歌不在其网络应用程序中使用 jQuery。相反，Google在几乎所有的 web 应用程序（邮件、文档、地图等）中都使用了自己的 javascript 库，称为**Closure 库。**该库已于 2009 年在 google 代码上开源。[这是链接](https://code.google.com/p/closure-library/)

此外，Google 还编写了一个名为**Closure Compiler**的 javascript 编译器（或者更准确地说是**优化**器）与闭包库一起使用。

 **在developers.google.com 上有一个关于**关闭工具**的完整页面。[这是链接](https://developers.google.com/closure/)**

# mysql - 在 MySQL 中排序非英文字母

> ID：13410609
> 
> 赞同：0
> 
> 时间：2012-11-16T04:46:31.320
> 
> 标签：mysql, sql

我有一位客户刚刚向我发送了以下关于订购信件的信息。他们来自芬兰。

> 在我们的字母表中，字母 å、ä 和 ö 位于字母表的最后。因此，以这些开头的名称也应该在字母 z 之后，而不是在“a”或“o”之下。

这是我第一次听说这个。有没有一种方法可以让这些字母显示在使用 MySQL 的字母列表的末尾？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T04:53:58.500

那可能是该表的排序规则是`utf8_general_ci`. 尝试这个，

```
SELECT..
FROM..
WHERE..
ORDER BY text COLLATE utf8_bin 
```

*   [**SQLFiddle DEMO** (utf8_bin vs utf8_general_ci)](http://sqlfiddle.com/#!2/9572e/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T04:49:31.920

您需要选择符合您的排序和编码要求的排序规则。可以通过以下方式获取它们的列表：

```
SHOW COLLATION 
```

您应该能够在连接上设置排序规则，并且表和关联数据也可以设置为默认值。一些语句还支持为排序目的指定排序规则。

我记得`utf8_swedish_ci`很长一段时间都是默认设置，大概是因为 MySQL 是由[芬兰人](http://en.wikipedia.org/wiki/Michael_Widenius)在瑞典工作时创建的。后来改为`utf8_general_ci`更加中立。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-02T01:48:27.493

Best use ASCII coding/indexing as multilingual www.qfree.com.au can be any language display

# php - 使用 PHP 将特殊字符转换为相应的 HTML 代码的最佳方法是什么？

> ID：13410611
> 
> 赞同：0
> 
> 时间：2012-11-16T04:46:37.913
> 
> 标签：php, html

我想转换**空格、单引号/双引号、换行符**等所有内容。

这是一个示例输入（感谢[som_nangia](http://www.slideshare.net/som_nangia/escape-test-3262832)）：

```
Escape Check < &quot;escape these&quot; > <“and these”&gt; <html><tr><td></td></tr></html> 'these will need escaping too' ‘ so will these’ <script>&nbsp;</script> 
```

以下是我正在考虑的选项：

`<pre>Escape Check < &quot;escape these&quot; > <“and these”&gt; <html><tr><td></td></tr></html> 'these will need escaping too' ‘ so will these’ <script>&nbsp;</script></pre>`

```
/**
 * Encoding html special characters, including nl2br
 * @param string  $original
 * @return string
 */
function encode_html_sp_chars($original) {
    $table = get_html_translation_table(HTML_ENTITIES);
    $table[' '] = '&nbsp;';
    $encoded = strtr($original, $table);
    return nl2br($encoded);
} 
```

我已经尝试过[htmlspecialchars](http://php.net/manual/en/function.htmlspecialchars.php)和[htmlentities](http://www.php.net/manual/en/function.htmlentities.php)，但它们都没有编码空格。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T04:48:13.980

### 使用[`htmlspecialchars`](http://php.net/manual/en/function.htmlspecialchars.php).

```
echo htmlspecialchars($string); 
```

在您的情况下，请以这种方式传递两个参数：

```
echo htmlspecialchars($string, ENT_QUOTES, 'UTF-8'); 
```

感谢[zerkms](https://stackoverflow.com/users/251311/zerkms)和[Phil](https://stackoverflow.com/users/283366/phil)。

### 解释

> 某些字符在 HTML 中具有特殊意义，如果要保留其含义，则应由 HTML 实体表示。此函数返回一个带有这些转换的字符串。如果您需要翻译具有关联命名实体的所有输入子字符串，请改用 htmlentities()。
> 
> 如果传递给此函数的输入字符串和最终文档共享相同的字符集，则此函数足以准备输入以包含在 HTML 文档的大多数上下文中。但是，如果输入可以表示最终文档字符集中未编码的字符，并且您希望保留这些字符（作为数字或命名实体），则此函数和 htmlentities()（仅编码具有命名实体的子字符串等价物）可能是不够的。您可能必须改用 mb_encode_numericentity()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T07:45:34.583

这种最好的方法可能是

例子：

```
function encode_html_sp_chars($original) {
    $encoded = htmlentities($original, ENT_QUOTES, "UTF-8");
    $encoded = str_replace(' ', '&nbsp;', $encoded);
    return nl2br($encoded);
} 
```

# python - Python 列表/数组：禁用切片中的负索引环绕

> ID：13410615
> 
> 赞同：12
> 
> 时间：2012-11-16T04:47:04.343
> 
> 标签：python, arrays, list, numpy, slice

虽然我发现负数环绕（即`A[-2]`索引倒数第二个元素）在许多情况下非常有用，但当它发生在切片内时，它通常更令人烦恼而不是有用的功能，我经常希望有一种方法来禁用该特定行为。

下面是一个罐装的 2D 示例，但我对其他数据结构和其他数量的维度也有过几次同样的烦恼。

```
import numpy as np
A = np.random.randint(0, 2, (5, 10)) 
```

![在此处输入图像描述](../Images/8afa433626a85345f0988dc3de3b950d.png)

```
def foo(i, j, r=2):
  '''sum of neighbours within r steps of A[i,j]'''
  return A[i-r:i+r+1, j-r:j+r+1].sum() 
```

在上面的切片中，我希望切片的任何负数都被视为相同`None`，而不是包装到数组的另一端。

由于包装，上面其他很好的实现在边界条件下给出了不正确的结果，并且需要某种补丁，例如：

```
def ugly_foo(i, j, r=2):
  def thing(n):
    return None if n < 0 else n
  return A[thing(i-r):i+r+1, thing(j-r):j+r+1].sum() 
```

我也尝试过对数组或列表进行零填充，但它仍然不优雅（需要相应地调整查找位置索引）并且效率低下（需要复制数组）。

我是否缺少一些标准技巧或优雅的解决方案来进行这样的切片？我注意到 python 和 numpy 已经很好地处理了您指定太大数字的情况 - 也就是说，如果索引大于数组的形状，它的行为与`None`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T04:54:51.203

我的猜测是您必须围绕所需对象创建自己的子类包装器并重新实现`__getitem__()`以将负键转换为`None`，然后调用超类`__getitem__`

请注意，我的建议是将现有的自定义类子类化，而不是像`list`or之类的内置函数`dict`。这只是为了围绕另一个类创建一个实用程序，而不是混淆一个`list`类型的正常预期操作。这将是您希望在特定上下文中使用一段时间直到您的操作完成的东西。最好避免进行会使代码用户感到困惑的全局不同更改。

[数据模型](http://docs.python.org/2/reference/datamodel.html#object.__getitem__)

> 目的。**getitem** (self, key)
> 调用以实现 self[key] 的评估。对于序列类型，接受的键应该是整数和切片对象。请注意，负索引的特殊解释（如果类希望模拟序列类型）取决于 **getitem** () 方法。如果 key 的类型不合适，可能会引发 TypeError；如果序列的索引集之外的值（在对负值进行任何特殊解释之后），则应引发 IndexError。对于映射类型，如果缺少键（不在容器中），则应引发 KeyError。

您甚至可以创建一个简单地将实例作为 arg 的包装器，并`__getitem__()`在转换密钥时推迟对该私有成员的所有调用，以应对您不能或不想子类化类型的情况，而只是想要任何序列对象的实用程序包装器。

后一个建议的快速示例：

```
class NoWrap(object):

    def __init__(self, obj, default=None):
        self._obj = obj 
        self._default = default

    def __getitem__(self, key):
        if isinstance(key, int):
            if key < 0:
                return self._default

        return self._obj.__getitem__(key)

In [12]: x = range(-10,10)
In [13]: x_wrapped = NoWrap(x)
In [14]: print x_wrapped[5]
-5
In [15]: print x_wrapped[-1]
None 
In [16]: x_wrapped = NoWrap(x, 'FOO')
In [17]: print x_wrapped[-1]
FOO 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-16T05:14:36.537

虽然您可以`list`按照 jdi 的建议进行子类化，但 Python 的切片行为并不是任何人都希望您解决的问题。

更改它可能会导致其他使用您的代码的人在它的行为不符合预期时感到非常头疼 - 并且可能需要一段时间才能查看您的子类的特殊方法以了解实际情况在。

参见：[远距离行动](http://en.wikipedia.org/wiki/Action_at_a_distance_%28computer_programming%29)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-16T05:07:10.460

我认为这还不足以证明新类和包装东西的合理性。然后又是你的代码。

```
def foo(i, j, r=2):
  '''sum of neighbours within r steps of A[i,j]'''
  return A[i-r:abs(i+r+1), j-r:abs(j+r+1)].sum()   # ugly, but works? 
```

（不赞成投票很有趣，所以我添加了更多选项）

我发现了一些非常出乎意料的事情（对我来说）：`__getslice__(i,j)`不换行！相反，负索引只是被忽略，所以：

`lst[1:3] == lst.__getslice__(1,3)`

`lst[-3:-1] == 2 next to last items`但`lst.__getslice__(-3,-1) == []`

最后：

`lst[-2:1] == []`， 但`lst.__getslice__(-2,1) == lst[0:1]`

令人惊讶，有趣，完全没用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-16T04:06:56.290

如果这只需要应用在一些特定的操作中，一个[简单而直截了当](https://en.wikipedia.org/wiki/KISS_principle) `if index>=0: do_something(array[i])`的/`if index<0: raise IndexError`就可以了。

如果这需要更广泛地应用，它仍然是相同的逻辑，只是以这种或另一种方式包装。

# java - x 必须是 < bitmap.width()

> ID：13410625
> 
> 赞同：1
> 
> 时间：2012-11-16T04:47:55.743
> 
> 标签：java, android

我正在构建一个应用程序，它可以拍照，显示图片，然后点击一次，在点击的地方返回图片的颜色。

它会在崩溃之前到达水龙头。我得到 x 必须是 < bitmap.width() 的错误

据我了解，如果我在位图中单击并获得坐标，它怎么会大于 bitmap.width()？

我将在下面发布我的代码，看看是否有人可以帮助我理解我做错了什么。

[http://pastebin.com/scwiuM4w](http://pastebin.com/scwiuM4w)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T04:59:23.833

您`onTouchEvent`在 Activity 中返回 x, y 而不是在您的`ImageView`.

从`Activity.onTouchEvent`帮助中查看：当触摸屏事件未被其下的任何视图处理时调用。这对于处理在窗口边界之外发生的触摸事件最有用，因为没有视图可以接收它。

# css - 导航边距/填充

> ID：13410627
> 
> 赞同：0
> 
> 时间：2012-11-16T04:48:23.537
> 
> 标签：css, nav

我有这个 Jsfiddle：

[http://jsfiddle.net/JohnnyDevv/XQ5Xd/2/](http://jsfiddle.net/JohnnyDevv/XQ5Xd/2/)

我正在尝试使 2 个 html5 导航之间的距离为零

PHP 示例：

```
 <nav>
        <?php foreach($nav_list  as $id => $nav_item): ?>
            <?php echo anchor(strtolower($id), $nav_item, array('class' => ($nav == $nav_item ? 'active' : ''))) ?>
            </li>
        <?php endforeach ?>
    </nav>
    <img src="<?php echo site_url('_inc/img/divider.png') ?>" width="960" height="4" alt="Divisão de Menu">
    <nav>
        <?php foreach($subnav_list  as $ids => $subnav_item): ?>
            <?php echo anchor(strtolower($ids), $subnav_item, array('class' => ($subnav == $subnav_item ? 'active' : ''))) ?>
            </li>
        <?php endforeach ?>
    </nav> 
```

这是我要完成的示例图像：

![https://lh4.googleusercontent.com/-eyFK3XVSJXc/UKXEt6xUN-I/AAAAAAAAA5A/k-ih3CFDpes/s845/pragas_especies_aranhas.png](../Images/48f1783eb1dc5cf4fe3a6d415222dc37.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T09:00:17.187

您只需要添加 display: block; 到您用来分隔导航元素的图像标签。默认情况下，图像使用 display: inline-block; 这是在图像上方添加不必要的空白。

```
#wrapper img {
    margin: 0;
    padding: 0;
    display: block;
} 
```

希望这能解决您的问题！如果您有任何问题，请告诉我。

# c# - 如何在第二个 LightSwitch 应用程序中复制 LightSwitch DB 结构？

> ID：13410630
> 
> 赞同：1
> 
> 时间：2012-11-16T04:48:34.347
> 
> 标签：c#, visual-studio-2012, visual-studio-lightswitch

假设我有两个 MS LightSwitch 项目。我真的很喜欢我在一个项目中的表格布局，并希望将其复制到另一个项目中。这是怎么做到的？哪些文件有表和键定义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T09:56:50.883

最简单的方法是发布应用程序，然后使用已发布数据库的副本作为新项目中的附加数据源。

您询问的定义存储在 lsml 文件（特定于 LightSwitch 的 XML 文件）中，LS 2011 的*ApplicationDefinition.lsml和 LS 2012 的**Common.lsml*。但是，如果您尝试在任何项目中编辑此文件，请务必小心，只需要一个错误就可以使整个应用程序不再加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-31T10:42:27.387

[警告：切勿进行以下操作！它弄乱了您在 VISUAL STUDIO 中的项目]

我在 LS 2013 中所做的是在新项目中创建具有相同名称的表，因此您的项目设置已经“知道”它们。然后我去`[project folder]\[project name]\[project name]\[project name].server\DataSources\ApplicationData`了我想要表格的项目。我复制了相应的文件（包括脚本文件，如果您进行了数据验证，我也在新项目中使用虚拟条目创建了这些文件），然后覆盖了新项目的相应 ApplicationData 文件夹中具有相同名称的文件，我有创建的。

当我再次加载项目时，Lightswitch 显示了我旧项目中的新表。

# postgresql - 恢复 PostgreSQL 数据库时如何解决权限问题

> ID：13410631
> 
> 赞同：123
> 
> 时间：2012-11-16T04:48:44.763
> 
> 标签：postgresql, database-backups, rails-postgresql

我已经使用以下命令为 Postgres 数据库转储了一个干净的、没有所有者的备份

`pg_dump sample_database -O -c -U`

后来，当我用

`psql -d sample_database -U app_name`

但是，我遇到了几个错误，这些错误使我无法恢复数据：

```
ERROR:  must be owner of extension plpgsql
ERROR:  must be owner of schema public
ERROR:  schema "public" already exists
ERROR:  must be owner of schema public
CREATE EXTENSION
ERROR:  must be owner of extension plpgsql 
```

我深入研究了纯文本 SQL`pg_dump`生成，发现它包含 SQL

```
CREATE SCHEMA public;
COMMENT ON SCHEMA public IS 'standard public schema';
CREATE EXTENSION IF NOT EXISTS plpgsql WITH SCHEMA pg_catalog;
COMMENT ON EXTENSION plpgsql IS 'PL/pgSQL procedural language'; 
```

我认为原因是用户`app_name`没有更改`public`架构和`plpgsql`.

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2013-03-16T18:04:13.937

要解决此问题，您必须分配适当的所有权权限。尝试以下应该解决特定用户的所有权限相关问题，但如评论中所述，这不应该在生产中使用：

```
root@server:/var/log/postgresql# sudo -u postgres psql
psql (8.4.4)
Type "help" for help.

postgres=# \du
               List of roles
    Role name    | Attributes  | Member of
-----------------+-------------+-----------
 <user-name>    | Superuser   | {}
                 : Create DB
 postgres       | Superuser   | {}
                 : Create role
                 : Create DB

postgres=# alter role <user-name> superuser;
ALTER ROLE
postgres=# 
```

所以连接到Superuser帐户下的数据库`sudo -u postgres psql`并执行一条`ALTER ROLE <user-name> Superuser;`语句。

**请记住，**这不是多站点托管服务器上的最佳解决方案，因此请查看分配单个角色：[https](https://www.postgresql.org/docs/current/static/sql-set-role.html) ://www.postgresql.org/docs/current/static/sql-set-role.html和[https ://www.postgresql.org/docs/current/static/sql-alterrole.html](https://www.postgresql.org/docs/current/static/sql-alterrole.html)。

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2017-02-24T14:21:46.993

AWS RDS 用户，如果您收到此信息，那是因为您不是超级用户，并且根据 aws 文档，您不能成为超级用户。我发现我必须忽略这些错误。

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2017-10-11T13:20:07.450

对于使用 Google Cloud Platform 的人，任何错误都会停止导入过程。根据我发出的 pg_dump 命令，我个人遇到了两个不同的错误：

1-`The input is a PostgreSQL custom-format dump. Use the pg_restore command-line client to restore this dump to a database.`

当您尝试以非纯文本格式转储数据库时发生。即当命令缺少 -Fp 或 --format=plain 参数时。但是，如果将其添加到命令中，则可能会遇到以下错误：

2-`SET SET SET SET SET SET CREATE EXTENSION ERROR: must be owner of extension plpgsql`

这是一个权限问题，我无法使用[GCP 文档](https://cloud.google.com/sql/docs/postgres/import-export/creating-sqldump-csv)中提供的命令、当前线程中的提示或[此处](https://groups.google.com/forum/#!topic/google-cloud-sql-discuss/nQlN3BJQkQQ)的 Google Postgres 团队的建议来修复。其中建议发出以下命令：

`pg_dump -Fp --no-acl --no-owner -U myusername myDBName > mydump.sql`

在我的情况下，唯一能解决问题的是手动编辑转储文件并注释掉与 plpgsql 相关的所有命令。

我希望这对依赖 GCP 的人有所帮助。

更新 ：

转储注释掉扩展名的文件更容易，特别是因为一些转储可能很大： `pg_dump ... | grep -v -E '(CREATE\ EXTENSION|COMMENT\ ON)' > mydump.sql`

可以缩小到 plpgsql ： `pg_dump ... | grep -v -E '(CREATE\ EXTENSION\ IF\ NOT\ EXISTS\ plpgsql|COMMENT\ ON\ EXTENSION\ plpgsql)' > mydump.sql`

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2018-11-06T06:03:38.390

`-L`通过指定取自的文件，尝试将标志与 pg_restore 一起使用`pg_dump -Fc`

> -L 列表文件 --use-list=列表文件
> 
> 仅恢复列表文件中列出的归档元素，并按照它们在文件中出现的顺序恢复它们。请注意，如果 -n 或 -t 等过滤开关与 -L 一起使用，它们将进一步限制恢复的项目。
> 
> list-file 通常是通过编辑前一个 -l 操作的输出来创建的。可以移动或删除行，也可以通过在行首放置分号 (;) 将其注释掉。请参阅下面的示例。

[https://www.postgresql.org/docs/9.5/app-pgrestore.html](https://www.postgresql.org/docs/9.5/app-pgrestore.html)

```
pg_dump -Fc -f pg.dump db_name
pg_restore -l pg.dump | grep -v 'COMMENT - EXTENSION' > pg_restore.list
pg_restore -L pg_restore.list pg.dump 
```

在这里，您可以通过仅输出注释来看到**Inverse**为真：

```
pg_dump -Fc -f pg.dump db_name
pg_restore -l pg.dump | grep 'COMMENT - EXTENSION' > pg_restore_inverse.list
pg_restore -L pg_restore_inverse.list pg.dump
--
-- PostgreSQL database dump
--

-- Dumped from database version 9.4.15
-- Dumped by pg_dump version 9.5.14

SET statement_timeout = 0;
SET lock_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET client_min_messages = warning;
SET row_security = off;

--
-- Name: EXTENSION plpgsql; Type: COMMENT; Schema: -; Owner: 
--

COMMENT ON EXTENSION plpgsql IS 'PL/pgSQL procedural language';

--
-- PostgreSQL database dump complete
-- 
```

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2012-11-16T09:31:30.873

在这种情况下，您可能可以放心地忽略错误消息。未能向公共架构添加注释并安装 plpgsql（应该已经安装）不会导致任何实际问题。

但是，如果您想完全重新安装，则需要具有适当权限的用户。当然，这不应该是您的应用程序经常运行的用户。

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2015-03-28T17:35:48.593

简短的回答：忽略它。

这个模块是 Postgres 处理 SQL 语言的一部分。该错误通常会在复制远程数据库时弹出，例如使用“heroku pg:pull”。它不会覆盖您的 SQL 处理器，并会就此向您发出警告。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2020-02-20T00:13:24.753

对于使用**AWS**的人，`COMMENT ON EXTENSION`只能作为**超级用户**，并且正如我们从文档中知道的那样，RDS 实例由 Amazon 管理。因此，为了防止您破坏复制之类的事情，您的用户 - 甚至是您在创建实例时设置的 root 用户 - 都不会拥有完整的超级用户权限：

[http://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/Appendix.PostgreSQL.CommonDBATasks.html](http://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/Appendix.PostgreSQL.CommonDBATasks.html)

> 创建数据库实例时，您创建的主用户系统账户将分配给 rds_superuser 角色。rds_superuser 角色是一个预定义的 Amazon RDS 角色，类似于 PostgreSQL 超级用户角色（在本地实例中通常命名为 postgres），但有一些限制。与 PostgreSQL 超级用户角色一样，rds_superuser 角色对您的数据库实例拥有最多的权限，您不应将此角色分配给用户，除非他们需要对数据库实例的最多访问权限。

为了修复这个错误，只需使用`--`注释掉包含的 SQL 行`COMMENT ON EXTENSION`

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2020-05-12T08:52:32.730

对于已将问题缩小到`COMMENT ON`语句（根据下面的各种答案）并且对创建转储文件的源数据库具有超级用户访问权限的人，最简单的解决方案可能是防止将注释包含到转储中首先文件，通过从被转储的源数据库中删除它们...

```
COMMENT ON EXTENSION postgis IS NULL;
COMMENT ON EXTENSION plpgsql IS NULL;
COMMENT ON SCHEMA public IS NULL; 
```

未来的转储将不包括这些`COMMENT ON`语句。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-10-18T14:31:59.713

使用 postgres (admin) 用户转储架构，重新创建它并授予使用权限，然后再进行还原。在一个命令中：

```
sudo -u postgres psql -c "DROP SCHEMA public CASCADE;
create SCHEMA public;
grant usage on schema public to public;
grant create on schema public to public;" myDBName 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-05-10T06:56:14.850

对我来说，我正在使用**pgAdmin**设置数据库，似乎在创建数据库期间设置所有者是不够的。我不得不向下导航到**“公共”模式**并将**所有者**也设置在那里（最初是“postgres”）。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-02-20T19:40:42.257

一些答案已经提供了与摆脱创建扩展和评论扩展相关的各种方法。对我来说，以下命令行似乎有效，并且是解决问题的最简单方法：

```
cat /tmp/backup.sql.gz | gunzip - | \
  grep -v -E '(CREATE\ EXTENSION|COMMENT\ ON)' |  \
    psql --set ON_ERROR_STOP=on -U db_user -h localhost my_db 
```

一些笔记

*   第一行只是解压缩我的备份，您可能需要进行相应调整。
*   第二行是使用 grep 来删除有问题的行。
*   第三行是我的 psql 命令；您可能需要像通常使用 psql 进行恢复一样进行调整。

# java - Java - 数组的基本使用

> ID：13410633
> 
> 赞同：1
> 
> 时间：2012-11-16T04:48:50.937
> 
> 标签：java

这是一个基本问题，但我确实需要一些帮助。

给定两个整数数组 a 和 b，如果它们具有相同的第一个元素或它们具有相同的最后一个元素，则返回 true。两个数组的长度都为 1 或更大。

> commonEnd({1, 2, 3}, {7, 3}) → 真
> 
> commonEnd({1, 2, 3}, {7, 3, 2}) → 假
> 
> commonEnd({1, 2, 3}, {1, 3}) → 真

我有以下代码，但它不会编译：

```
public boolean commonEnd(int[] a, int[] b) {
    if(a[0] == b[0] || a[a.length-1] ==b[b.length-1])
        return true;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T04:50:43.413

*   您缺少 if 的正确括号。

*   您需要在“其他”部分返回一些东西（假）。

你应该得到一个编译器错误来告诉你这一点。

就个人而言，我会完全摆脱`if`并做

```
return  a[0] == b[0] || a[a.length-1] ==b[b.length-1]; 
```

（但这可能被认为难以阅读）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T04:56:22.037

如果，如果是不真实的，你没有返回类型

```
 public boolean commonEnd(int[] a, int[] b) {
  if(a[0] == b[0] || a[a.length-1] ==b[b.length-1])
      return true;
  return false;
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T05:01:33.030

```
public boolean commonEnd(int[] a, int[] b) {
  if((a[0] == b[0]) || (a[a.length-1] ==b[b.length-1]))
      return true;
  return false;
} 
```

您错过了 return 语句（如果 if 语句不为真），这就是它没有编译的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-20T09:15:02.743

此代码工作正常： -

```
public boolean commonEnd(int[] a, int[] b) {
  int length1=a.length;
  int length2=b.length;
  if(a[0]==b[0]||a[length1-1]==b[length2-1]){
    return true;
  }
  return false;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-16T04:58:02.923

期望函数的返回语句

```
public boolean commonEnd(int[] a, int[] b) {
    if(a[0] == b[0] || a[a.length-1] ==b[b.length-1]) //Missed `)`
          {
          return true;
          }
        return false;
     } 
```

# regex - 正则表达式匹配混合大小写的单词

> ID：13410634
> 
> 赞同：3
> 
> 时间：2012-11-16T04:48:57.773
> 
> 标签：regex

我想编写一个正则表达式，它将匹配由 8 个字符组成的任何单词，这些字符应该属于字符集：[A-Za-z0-9]。

但是，它们应该由 3 个字符集中的每个字符（大写、小写和数字）中的至少一个字符组成。

这是我正在使用的正则表达式：

```
^[a-zA-Z0-9]{8}$ 
```

但是，这将匹配以下示例：

```
09823983
language
mainMenu 
```

但我想匹配这样的词：

uXk3mHy9

我怎样才能使用正则表达式来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T05:27:24.697

`look-ahead`您可以在正则表达式前面使用三个s：

```
^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])[a-zA-Z0-9]{8}$ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T21:52:31.907

不要在一个正则表达式中完成所有操作。正则表达式不是所有解决方案都必须来自的神奇工具箱。

检查三种不同的条件，而不是将它们全部塞进一个正则表达式中。在 Perl 中，这将是：

```
$ok = ( $s =~ /^[a-zA-Z0-9]{8}$/ && $s =~ /[a-z]/ && $s =~ /[A-Z]/ && $s =~ /[0-9]/ ); 
```

你的意图是什么要清楚得多。

# vim - 如何在 Vim 中显示用于编辑 haml 文件的缩进指南

> ID：13410636
> 
> 赞同：2
> 
> 时间：2012-11-16T04:49:06.743
> 
> 标签：vim, haml

以下截图来自`sublime`. 该指南很有帮助，因为`haml`它是基于缩进的模板引擎。有没有办法做到这一点？

![在此处输入图像描述](../Images/f1883610ab5cd6941cd55390beb8cb4b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T04:58:01.503

检查[vim-indent-guides](https://github.com/nathanaelkane/vim-indent-guides)，它提供缩进指南。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T07:33:17.210

还有`:help 'list'`和`:help 'listchars'`：

```
set list
set listchars+=tab:┊\ <-- there's a <Space> after the backslash 
```

但它仅适用于`<Tab>`可能适合也可能不适合您需求的 s。

# javascript - 带有 PHP if 和 else 语句的两个 onclick 事件 - 在一个按钮中

> ID：13410638
> 
> 赞同：1
> 
> 时间：2012-11-16T04:49:19.410
> 
> 标签：javascript, php, if-statement, dom-events

我的网站上已经具备以下功能。它工作正常，但现在，我想创建一种促销，如果显示符合促销的标准，我希望它显示`onclick` `$htx`

```
<?php 
echo "<a href='javascript:;' onclick='pkgsPopup('http://'.$hLnk');' rel='nofollow'>";
?> 
```

我已`$htx`预先定义打开一个链接`$dealpath`，如果它不满足该条件，我希望它打开默认链接 - '$hLnk'

我已经尝试了下面的代码，但我遇到了一个错误_我的意思是页面根本不会加载

```
 if ($htx) { echo "onclick=\'miaPopup('http://$dealPth');\'' }  else { echo 'onclick=\'pkgsPopup('http://$hLnk');\'' }"; 
```

如果有人可以让我知道如何使用 PHP if/else 语句不出错，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T05:29:16.543

这是您的第二个代码块，更简洁一些。您在 PHP 中缺少分号以及匹配的转义字符（撇号和引号的混合）

```
if ($htx) 
{ 
  echo "onclick=\'miaPopup('http://$dealPth');\'" ;
} 
else 
{ 
  echo "onclick=\'pkgsPopup('http://$hLnk');\'" ;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T05:29:28.793

问题是你有回声抽出一个没有意义的长字符串：

```
 if ($htx) { echo "onclick=\'miaPopup('http://$dealPth');\'' }  else { echo 'onclick=\'pkgsPopup('http://$hLnk');\'' }"; 
```

应该读：

```
if ($htx) {
    echo "onclick='miaPopup(\'http://$dealPth\');'";
}  else {
    echo "onclick='pkgsPopup(\'http://$hLnk\');'";
} 
```

你可以说简化

```
if ($htx) {
    $url = $dealPth;
} else {
    $url = $hLnk;
}
echo "onclick='pkgsPopup(\'http://$url\');'"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T05:29:36.740

像这样的东西应该可以工作（此代码未经测试）：

```
$onclick = ($htx ? 'miaPopup("http://'.$dealPth.'");'
            : 'pkgsPopup("http://'.$hLnk.'");');
echo "<a href='javascript:;' onclick='$onclick' rel='nofollow'>"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T06:07:08.833

为什么不使用 jQuery

```
<a class='one <?=($cond?"two" : "")?>'>Link</link>

<script>

$(function(){
   $(".one").click(function(){
      //Class of one
    });

   $(".two").click(function(){
     //class of two
    })
})

</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-16T05:32:43.123

尝试这个

```
 if ($htx){ 

    $onclick="miaPopup('http://$dealPth');";
    }

    else{ 

    $onclick="pkgsPopup('http://$hLnk');";

    }";

echo "<a href='javascript:;' onclick='$onclick' rel='nofollow'>"; 
```

# java - Java 语句：混淆代码 - `?:`

> ID：13410640
> 
> 赞同：0
> 
> 时间：2012-11-16T04:49:22.957
> 
> 标签：java, if-statement, binary-tree, ternary-operator

> **可能重复：**
> [什么是 Java ?: 运算符，它有什么作用？](https://stackoverflow.com/questions/798545/what-is-the-java-operator-called-and-what-does-it-do)

我正在尝试阅读二叉树的实现，并且遇到了这一行代码：

```
if (...) {
   ...
} else {
    node = ( node.left != null ) ? node.left : node.right;    //this line
}

return node; 
```

谁能告诉我这条线是什么意思？我最好的猜测是它是某种条件语句。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-16T04:50:35.617

它被称为`Conditional Operator`。

在`expression1 ? expression2: expression3`中，`expression1`返回一个`boolean`值。如果它是`true`然后`expression2`被评估，否则`expression3`被评估。

所以在你的代码片段中： -

```
node = ( node.left != null ) ? node.left : node.right; 
```

相当于： -

```
if (node.left != null) {
    node = node.left;
} else {
    node = node.right;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T04:52:45.830

这被称为**三元运算符**，因为在大多数语言中，它是唯一接受 3 个参数的运算符。它具有以下形式：

```
a ? b : c 
```

并评估`b`是否`a`为真，`c`否则。它几乎可以在任何地方使用，但最常用于赋值操作，因为它在更复杂的情况下变得非常难以阅读。

在旁注中，“混淆”在这里不是正确的术语 - 这意味着故意使代码难以阅读。这可能更准确地称为“模糊”，尽管它是一个常见的运算符。

# .net - user32 ShowWindow .net

> ID：13410641
> 
> 赞同：-1
> 
> 时间：2012-11-16T04:49:29.877
> 
> 标签：.net, user32

修复使用 user32.dll 的第三方控件

```
public partial class Form1 : Form
{
    TheForm theForm;//empty form
    public Form1()
    {
        InitializeComponent();
        theForm = new TheForm();
    }

    internal const int SWP_SHOWWINDOW = 0x0040;

    [DllImport("user32.dll", CharSet = CharSet.Auto)]
    internal static extern int ShowWindow(IntPtr hWnd, short cmdShow);        

    private void button1_Click(object sender, EventArgs e)//shows theForm when it wants to
    {
        ShowWindow(theForm.Handle, SWP_SHOWWINDOW);
    }

    private void button2_Click(object sender, EventArgs e)//shows theForm always
    {
        theForm.Show();
    }
} 
```

为什么在调用 user32 ShowWindow 之后，大多数时候窗口“陷入困境”？它捕获失去焦点和处置，但不捕获鼠标事件并且不绘制自身。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T05:05:11.090

我不是专家，但我认为您需要通过在按钮单击事件处理程序方法之外调用 Show() 方法来显示您的表单。如果没有可查看的表单，则无法单击按钮来显示表单。

我不确定是否有理由在 C# 中使用 user32.dll 来制作 winforms 应用程序。因为这是由 C# 为您完成的，从某种意义上说。

您需要做的就是让 Visual Studio 在拖放表单设计器中为您创建表单代码。然后要显示和使用您的表单，而无需仅为您的 Main() 方法创建新的源文件，只需在生成的代码中编写 Main() 方法即可。

这是一篇关于使用 Windows 窗体设计器的好文章。

[http://msdn.microsoft.com/en-us/library/360kwx3z(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/360kwx3z(v=vs.90).aspx)

# python - 需要尝试计算列表中的重复列表

> ID：13410650
> 
> 赞同：0
> 
> 时间：2012-11-16T04:50:01.553
> 
> 标签：python

我试图计算列表中有多少重复列表。但它的工作方式与我可以在一个列表中计算重复元素的方式不同。我对python相当陌生，如果听起来太容易了，请道歉。

这就是我所做的

```
x=  [["coffee", "cola", "juice" "tea" ],["coffee", "cola", "juice" "tea"]
["cola", "coffee", "juice" "tea" ]]
dictt= {}

for item in x:

    dictt[item]= dictt.get(item, 0) +1

return(dictt) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T06:40:44.843

您的代码***几乎***可以正常工作。正如其他人所提到的，列表不能用作字典键，但元组可以。解决方案是将每个列表变成一个元组。

```
>>> x=  [["coffee", "cola", "juice", "tea"], ### <-- this list appears twice
...      ["coffee", "cola", "juice", "tea"],
...      ["cola", "coffee", "juice", "tea"]] ### <-- this list appears once
>>> 
>>> dictt= {}
>>> 
>>> for item in x:
...     # turn the list into a tuple
...     key = tuple(item)
...
...     # use the tuple as the dictionary key
...     # get the current count for this key or 0 if the key does not yet exist
...     # then increment the count
...     dictt[key]= dictt.get(key, 0) + 1
... 
>>> dictt
{('cola', 'coffee', 'juice', 'tea'): 1, ('coffee', 'cola', 'juice', 'tea'): 2}
>>> 
```

如果需要，您可以将元组转回列表。

```
>>> for key in dictt:
...     print list(key), 'appears ', dictt[key], 'times'
... 
['cola', 'coffee', 'juice', 'tea'] appears  1 times
['coffee', 'cola', 'juice', 'tea'] appears  2 times
>>> 
```

此外，Python 有一个专门为计数而设计的 collections.Counter() 类。（注意：您仍然需要将列表转换为元组。）

```
>>> from collections import Counter
>>> counter = Counter()
>>> for item in x:
...    counter[tuple(item)] += 1
... 
>>> counter
Counter({('coffee', 'cola', 'juice', 'tea'): 2, ('cola', 'coffee', 'juice', 'tea'): 1})
>>> 
```

Counter() 是 dict() 的子类，因此所有字典方法仍然有效。

```
>>> counter.keys()
[('coffee', 'cola', 'juice', 'tea'), ('cola', 'coffee', 'juice', 'tea')]
>>> k = counter.keys()[0]
>>> k
('coffee', 'cola', 'juice', 'tea')
>>> counter[k]
2
>>> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T04:58:20.913

```
>>> dictt = {}
>>> for i in x:
    dictt[str(set(i))] = dictt.get(str(set(i)),0) + 1

>>> dictt
{"set(['coffee', 'juicetea', 'cola'])": 3} 
```

这不是最好的，但很有效。因为 list 不是 hashable ，所以我提供一个字符串作为键。

# mysql - SQL 外连接

> ID：13410656
> 
> 赞同：0
> 
> 时间：2012-11-16T04:50:39.373
> 
> 标签：mysql, sql

三表**课程，注册，学生**

学生专栏

`firstname,lastname,studentid,major,admitdate,graddate,gender,dob`

注册栏

`courseid,studentid`

课程中的专栏

`coursenumber,coursename,credits`

我需要修改的select语句

```
select lastname as 'Last Name',sum(credits) as 'Credits Registered For' from students   as s
inner join registration as r on s.studentid = r.studentid
inner join courses as c on c.coursenumber = c.courseid
group by last name; 
```

实验室的问题是... 修改前面的查询以显示所有学生，即使他们还没有注册课程。你应该有 14 行。未注册的学生将在输出中显示 NULL。

我知道这需要某种外部连接，但我没有完全掌握这些连接，我在这里和其他网站上阅读了多篇文章，但似乎无法弄清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T04:55:16.907

利用`LEFT JOIN`

```
select  lastname as 'Last Name',
        sum(credits) as 'Credits Registered For' 
from    students   as s
        LEFT join registration as r on s.studentid = r.studentid
        LEFT join courses as c on c.coursenumber = r.courseid
group by last name; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T04:58:05.177

尝试

```
SELECT  s.lastname AS 'Last Name',
        sum(c.credits) AS 'Credits Registered For' 
FROM    students    s
        LEFT JOIN registration  r ON (s.studentid = r.studentid)
        INNER JOIN courses  c ON (c.coursenumber = r.courseid)
GROUP BY lastname; 
```

**注意：**`AS`给表名取别名时不需要使用

# asp.net-mvc-4 - 如何使用业务身份提供者（例如 ADFS2）

> ID：13410658
> 
> 赞同：4
> 
> 时间：2012-11-16T04:50:46.550
> 
> 标签：asp.net-mvc-4, ws-federation

我正在运行 Win 7、IIS 7.0、VS2012 我创建了 asp.mvc4 Web 应用程序我在单独的 VM 上有 ADFS2.0

在 VS 2012 中使用身份和访问工具

我选择使用业务身份提供者 (egADFS2) 并键入 STS 元数据文档的 url。

[https://server.local/federationmetadata/2007-06/federationmetadata.xml](https://server.local/federationmetadata/2007-06/federationmetadata.xml)

编辑了网络配置

```
<system.web>
...
<httpModules>
...
    <remove name="FormsAuthentication" />
</httpModules>
</system.web> 
```

还有这个

```
<system.webServer>
...
   <modules>
   ...
      <remove name="FormsAuthentication" />
   </modules>
</system.webServer> 
```

还检查了该项目是否禁用了 Windows 身份验证

该网站重定向到这样的网址 http://localhost /WebSite/login.aspx?ReturnUrl=%2fWebSite%2f 有一个“找不到资源”错误。

我还需要摆弄什么才能完成这项工作？

Microsoft doco 是轻量级的[http://blogs.msdn.com/b/vbertocci/archive/2012/03/15/windows-identity-foundation-tools-for-visual-studio-11-part-iii-connecting-with -a-business-sts-eg-adfs2.aspx](http://blogs.msdn.com/b/vbertocci/archive/2012/03/15/windows-identity-foundation-tools-for-visual-studio-11-part-iii-connecting-with-a-business-sts-e-g-adfs2.aspx)

我已经在本地开发 STS [MS Identity and Access Tool MVC 4中遇到过类似的问题](https://stackoverflow.com/questions/12832239/ms-identity-and-access-tool-mvc-4)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T03:54:41.810

好的，这花了我几天的时间来解决，但这些是我为了让它运行而做的事情。还有很多事情要做。

**先决条件：**

*   在您的域中某处运行的 ADFS 2.0 服务。
*   具有自签名证书或可跨域使用的证书的 IIS 7。
*   安装了 Identity and Access（版本 1.0.2）扩展的 Visual Studio 2012。
*   设置为在 IIS 上运行的 MVC4 Web 应用程序。
*   确保将自签名证书添加到站点，以便您可以通过 https 访问它。
*   您可能需要调整计算机的防火墙设置以允许访问您的 ADFS 2.0 服务。

**在开发工作站上**

*在您的 MVC4 项目中*

*   右键单击您的 Web 项目，打开身份和访问对话框。
*   选择使用业务身份提供商（例如 ADFS2）
*   输入 STS 元数据文档的路径，例如 https://{PATH TO ADFS SERVER}/FederationMetadata/2007-06/FederationMetadata.xml
*   输入您的应用程序的领域，例如 https://{WEB APPLICATION URL}/
*   尾部的斜线会有所不同。
*   通过接受这些更改退出对话框。

*将以下代码添加到您的项目中*

```
using System;
using System.IdentityModel.Services;

namespace NAMESPACE
{
    public class FixedWsFederationAuthenticationModule : WSFederationAuthenticationModule
    {
        public override void RedirectToIdentityProvider(string uniqueId, string returnUrl, bool persist)
    {
        //This corrects WIF error ID3206 "A SignInResponse message may only redirect within the current web application:"
        //First Check if the request url doesn't end with a "/"
        if (!returnUrl.EndsWith("/"))
        {
            //Compare if Request Url +"/" is equal to the Realm, so only root access is corrected
            //https://localhost/AppName plus "/" is equal to https://localhost/AppName/
            //This is to avoid MVC urls
            if (String.Compare(System.Web.HttpContext.Current.Request.Url.AbsoluteUri + "/", base.Realm, StringComparison.InvariantCultureIgnoreCase) == 0)
            {
                //Add the trailing slash
                returnUrl += "/";
            }
        }
        base.RedirectToIdentityProvider(uniqueId, returnUrl, persist);
    }
}
} 
```

**在 ADFS 2.0 服务器上**

*   如果您使用自签名证书，请导航到您的 Web 应用程序 https://{WEB APPLICATION URL}/ 并将区域更改为受信任的站点。
*   在浏览器的地址栏中，您应该可以右键单击证书并安装（您只能从受信任的站点安装证书）证书需要安装在 Trusted Root Authorities -> Registry 下，
*   打开 ADFS 控制台，添加依赖方信任，联合元数据地址 https://{WEB APPLICATION URL}/FederationMetadata/2007-06/FederationMetadata.xml

**添加一些自定义规则**

*MVC4 需要这些规则才能生成可用的 ClaimsPrincipal*

在 Name 属性上添加传递规则。

而这 2 个自定义规则

```
=> issue(Type = "http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier", Value = "true");

=> issue(Type = "http://schemas.microsoft.com/accesscontrolservice/2010/07/claims/identityprovider", Value = "true"); 
```

# scala - Scala：流不懒惰？

> ID：13410659
> 
> 赞同：14
> 
> 时间：2012-11-16T04:50:47.063
> 
> 标签：scala, stream, lazy-evaluation

我知道流应该是 Scala 中的惰性评估序列，但我认为我正遭受某种基本误解，因为它们似乎比我预期的更渴望。

在这个例子中：

```
 val initial = Stream(1)
 lazy val bad = Stream(1/0)
 println((initial ++ bad) take 1) 
```

我得到一个`java.lang.ArithmeticException`，这似乎是由零除法引起的。我希望这`bad`永远不会得到评估，因为我只要求从流中获取一个元素。怎么了？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-16T05:25:18.263

Streams 是惰性的这一事实并没有改变方法参数被热切评估的事实。

`Stream(1/0)`扩展到`Stream.apply(1/0)`. 该语言的语义要求在调用方法之前对参数进行评估（因为该`Stream.apply`方法不使用按名称调用的参数），因此它会尝试评估`1/0`以作为参数传递给`Stream.apply`方法，这会导致您的 ArithmeticException .

不过，有几种方法可以让它工作。由于您已经声明`bad`为 a `lazy val`，最简单的方法可能是使用同样惰性的`#:::`流连接运算符来避免强制评估：

```
val initial = Stream(1)
lazy val bad = Stream(1/0)
println((initial #::: bad) take 1)
// => Stream(1, ?) 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-11-16T09:36:08.540

好的，所以在评论其他答案之后，我想我也可以将我的评论变成一个正确的答案。

流确实是惰性的，并且只会按需计算它们的元素（您可以使用它`#::`来逐个元素地构造流，就像`::`for一样`List`）。例如，以下不会引发任何异常：

```
(1/2) #:: (1/0) #:: Stream.empty 
```

这是因为在应用时`#::`，尾部是按名称传递的，因此不会急切地评估它，而是仅在需要时才进行评估（有关更多详细信息，请参见`ConsWrapper.# ::`和`const.apply`class `Cons`in `Stream.scala`）。另一方面，head 是按值传递的，这意味着它总是会被急切地评估，无论如何（正如 Senthil 所提到的）。这意味着执行以下操作实际上会引发 ArithmeticException：

```
(1/0) #:: Stream.empty 
```

这是一个值得了解的关于流的问题。但是，这不是您面临的问题。

在您的情况下，算术异常甚至在实例化单个 Stream 之前发生。当调用`Stream.apply`in 时`lazy val bad = Stream(1/0)`，该参数被急切地执行，因为它没有被声明为按名称参数。`Stream.apply`实际上需要一个可变参数，并且这些参数必须按值传递。即使它是按名称传递的，`ArithmeticException`也会在不久之后触发，因为如前所述，Stream 的头部总是被提前评估。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-16T05:28:40.767

Stream 将评估头部，而剩余的尾部则懒惰地评估。在您的示例中，两个流都只有头部，因此出现错误。

# web-applications - Android中桌面应用程序和Web应用程序之间的区别

> ID：13410660
> 
> 赞同：1
> 
> 时间：2012-11-16T04:50:47.630
> 
> 标签：web-applications, desktop-application, mobile-application

因为我的问题可能很容易回答。但在我和朋友讨论我的 android 项目的前几天。他说你正在开发一个移动桌面应用程序。我告诉他，我的应用程序不会是 Web 应用程序。

*   在我的项目中，我基本上使用网络服务并将请求发布到服务器并在解析后在我的应用程序中显示响应。现在我有点困惑，我应该将此应用程序称为 Web 应用程序或移动 Web 应用程序或类似的东西。
*   我想知道桌面应用程序、暴民应用程序、网络应用程序之间的实际区别。

希望得到积极的回应。谢谢。

问候卡迪尔侯赛因

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T08:01:06.360

我认为桌面应用程序只是一个不会连接到互联网或万维网的应用程序，无论它是否联网，但 wep 应用程序是以任何方式联系互联网或万维网的应用程序。关于移动应用程序，这是将在移动设备中运行的应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-29T09:58:53.873

桌面应用程序在固定机器或笔记本电脑上运行。在我们所说的“计算机”上。

移动应用程序旨在运行在移动设备上，例如手机或平板电脑——尽管它们在技术上也是计算机——但在存储、连接等方面存在限制。移动应用程序在移动设备上运行。

Web 应用程序在浏览器上运行。如果此浏览器在移动设备或台式计算机上运行，​​它仍然是一个 Web 应用程序。

如果您使用 Android SDK 之类的东西编写应用程序以在移动设备上运行，那么我会说它是一个移动（本机）应用程序。它连接到网络上的服务器这一事实并不一定意味着它是一个网络应用程序。例如，如果您使用 javascript 制作在浏览器上运行的应用程序，那么它就是一个网络应用程序。

我希望它有帮助 =)

# c - 无法处理的 POSIX 信号的返回码

> ID：13410661
> 
> 赞同：2
> 
> 时间：2012-11-16T04:50:48.773
> 
> 标签：c, linux, signals, exit-code

这是关于在 POSIX (Linux) 环境中运行的应用程序。大多数信号（例如`Ctrl`+ `C`- 信号 2、SIGINT）和少数其他信号都被处理。完成后，`exit()`系统调用会从处理程序中调用，并带有所需的退出代码。

但是，有些信号如 Signal 9 和 Signal 15 无法处理。

不幸的是，如果信号 9 或 15 是终止的原因，启动给定应用程序的父进程（外部脚本）需要知道并清理一些东西。

是否有预定义的退出代码可以被父进程接收以了解上述内容？

启动应用程序的脚本是 bash_script。应用程序本身是 C 语言。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T05:11:02.757

来自`wait()`或[`waitpid()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/waitpid.html)编码您需要的信息的返回状态。

POSIX 宏是：

*   `WIFEXITED(status)`如果孩子通过`exit()`或其亲属之一退出，则返回 true。
*   `WEXITSTATUS(status)`告诉你退出状态是什么（0..255）。
*   `WIFSIGNALED(status)`如果孩子因信号（任何信号）而退出，则返回 true。
*   `WTERMSIG(status)`返回杀死孩子的信号号。

非标准但常见的宏`WCOREDUMP(status)`会告诉您进程是否转储了核心。您还可以判断状态是否反映进程已停止或继续（以及停止信号是什么）。

请注意，信号 15 通常是 SIGTERM 并且 SIGTERM 可以被应用程序捕获。无法捕获的信号是 SIGKILL (9) 和 SIGSTOP（Mac OS X 上为 17；可能在所有地方都不相同）。

* * *

> 那么问题是是否`bash`为脚本提供此信息。

答案是肯定的，但只是间接的，而不是 100% 明确的。报告的状态值`bash`将`128 + <signum>`针对因信号而终止的进程`<signum>`，但您无法区分以状态退出`130`的进程和被 SIGINT 中断的进程，即信号 2。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T06:07:13.730

15 ( `SIGTERM`) 可以被应用程序捕获和处理，如果它选择这样做的话，但目前可能没有

9 ( `SIGKILL`) 显然不能被任何应用程序捕获。

但是，通常操作系统设置退出状态的方式是可以识别终止进程的信号。通常只有 exit(3) 函数的状态参数的低 8 位 [以及 _exit(2) 系统调用] 被复制到`status`wait(2) 返回给父进程（运行外部脚本的 shell）的值中在你的例子中）。因此，这会在值中留下`sizeof(int)-1`字节空间`status`供操作系统用于填充有关已终止进程的其他信息。通常，wait(2) 手册页将描述解释等待状态的方式，从而将有关进程终止的任何附加信息与进程传递给 _exit(2) 的状态分开，IFF 进程退出。

不幸的是，脚本是否可以使用这些额外信息取决于执行脚本的 shell 如何处理它。

首先查看 shell 的手册页，了解如何解释`$?`.

如果 shell 将整个`status` `int`值逐字提供给脚本（在`$?`变量中），则可以解析该值并确定程序退出的方式和原因。大多数 shell 似乎并没有完全做到这一点（出于各种原因，其中最重要的可能是标准合规性），但它们至少做得足够远，可以解决您的查询（并且必须是 POSIX兼容的）。

例如，我在 Mac OS X 上运行 AT&T 版本的 KSH。我的 ksh(1) 手册页说，如果程序正常运行终止，则退出状态为 0-255（其中的值大概是传递给_exit(2)) 和 256+signum 如果进程被信号终止（编号为“signum”）。我不知道在 Linux 上，但在 OS X 上，bash 给出的退出状态与 Ksh 不同（bash 使用第 8 位来表示信号，因此只允许 0-127 作为有效的退出值）。（在 POSIX 标准中，wait(2) 声称 _exit(2) 的 8 个低位可用，而 shell 将等待状态转换为`$?`仅保留 7 位。去搞清楚！Ksh 的行为违反了 POSIX，但它更安全，因为严格兼容的 shell 可能无法区分将值 128-255 传递给 _exit(2) 和已被信号终止的进程。）

所以，无论如何，我开始一个`cat`进程，然后我从终端发送它`SIGQUIT`（通过按 ^）（我使用`SIGQUIT`是因为没有简单的方法`SIGTERM`从终端键盘发送）：

```
22:01 [2389] $ cat
^\Quit(coredump)
ksh: exit code: 259 
```

（我`EXIT`定义了一个 shell 陷阱来打印 $? 如果它不为零，那么您也可以在上面看到它）

```
22:01 [2390] $ echo $?
259 
```

（259 是一个整数值，表示 wait(2) 返回给 shell 的状态）

```
22:02 [2391] $ bc
obase=16
259
103
^D22:03 [2392] $ 
```

（看到 259 的十六进制值是 0x0103，注意 0x0100 是十进制的 256）

```
22:03 [2392] $ signo SIGQUIT    
#define SIGQUIT 3   /* quit */ 
```

（我有一个名为的 shell 别名`signo`，用于搜索标头以查找表示符号信号名称的数字。请参见此处，状态值中的 0x03 与 . 的数字相同`SIGQUIT`。）

对 wait(2) 系统调用的进一步探索以及相关的宏`<sys/wait.h>`将使我们能够更多地了解正在发生的事情。

在 C 中，解码等待状态的基本逻辑使用以下宏`<sys/wait.h>`：

```
if (!WIFEXITED(status)) {
        if (WIFSIGNALED(status)) {
                termsig = WTERMSIG(status);
        } else if (WIFSTOPPED(status)) {
                stopsig = WSTOPSIG(status);
        }
} else {
        exit_value = WEXITSTATUS(status));
} 
```

我希望这会有所帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T05:06:09.557

父进程不可能检测到 SIGKILL 或 Signal 9 - 因为 SIGNAL 发生在用户空间之外。

一个建议是让您的父进程检测您的子进程是否已经消失并相应地处理它。在 mysqld-safe 等中可以看到一个很好的例子。

# php - 涉及字符串的查询结果始终计算为 TRUE

> ID：13410663
> 
> 赞同：1
> 
> 时间：2012-11-16T04:51:00.700
> 
> 标签：php, mysql

如此处所示，如果存在与 $member_id 匹配的数字 id，则删除该记录并且 $res 评估为 TRUE。如果表包含一个'member_id'，它是一个字符串，例如 abc1234，它只会在我通过将 $member_id 括在引号'$member_id' 中来创建一个字符串时删除，这将删除所有匹配项，但是当 $res 总是评估为 TRUE 时，如果不匹配没有被删除（因为它应该），但用户得到一个“$member_id”。已从成员表中删除”消息。我希望这很清楚。

```
<?php 
$member_id = "";
require("connect.php");
if (isset($_POST['member_id']))$member_id = fix_string($_POST['member_id']);

$sql=("DELETE FROM members WHERE member_id = $member_id");
$res = mysqli_query($con,$sql);
**if($res) {
 echo "member with ID of ".$member_id." has been removed from members table";
} else {
    echo "member was not deleted";
}**

function fix_string($string) {
    if (get_magic_quotes_gpc()) $string = stripslashes($string);
    return htmlentities ($string);
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T05:01:08.513

您的逻辑在正确的位置，但未正确执行。您正在尝试通过执行以下操作查看用户/成员是否已被删除：

```
$res = mysqli_query($con,$sql);
if($res) { 
```

但是，如果语句为 a 正确执行，[`mysqli_query()`](http://php.net/mysqli_query)将返回- 是否删除行无关紧要。`true``DELETE`

你想要做的是利用[`mysqli::$affected_rows`](http://docs.php.net/manual/en/mysqli.affected-rows.php)：

```
$res = mysqli_query($con, $sql);
if (mysqli_affected_rows($con) == 1) {
    echo "member with ID of ".$member_id." has been removed from members table";
} else {
    echo "member was not deleted";
} 
```

这将检查是否有一条记录受您的`DELETE`语句影响（假设您的成员 ID 是唯一的；如果不是，您可以`>= 1`改用）。如果有，好吧，它被删除了！

**旁注**（不具体回答）
您应该放弃您的`fix_string()`方法并选择`mysqli`准备好的语句，这将自动为您清理输入。您可以为现有代码尝试以下操作：

```
require("connect.php");
$member_id = (!empty($_POST['member_id']) ? $_POST['member_id'] : '');

// prepare the statement
$stmt = mysqli_prepare($con, 'DELETE FROM members WHERE member_id = ?');

// bind the id
mysqli_stmt_bind_param($stmt, "s", $member_id);

// execute the statement
mysqli_stmt_execute($stmt);

if (mysqli_affected_rows($con) == 1) {
    echo "member with ID of ".$member_id." has been removed from members table";
} else {
    echo "member was not deleted";
} 
```

# java - 实体管理器在使用 JPA 的 RestfulwebSerivces 中始终为空

> ID：13410670
> 
> 赞同：2
> 
> 时间：2012-11-16T04:51:21.517
> 
> 标签：java, rest, jakarta-ee

我正在使用实体类构建一个 Restful Web 服务。我已经编写了我的代码，并且运行良好。但是，当我再次尝试检查此 Web 服务时，我的 Web 服务没有响应。然后我尝试调试它，发现部署服务时我的实体管理器实例始终为空。我没有更改persistent.xml 中的任何内容。下面是我的 persistence.xml 文件

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
  <persistence-unit name="WebServerPrjPU" transaction-type="JTA">
    <jta-data-source>org.dicprj.ws</jta-data-source>
    <exclude-unlisted-classes>false</exclude-unlisted-classes>
    <properties/>
  </persistence-unit>
</persistence> 
```

我还在这里粘贴我的服务代码：

```
package service;
import javax.ejb.Stateless;
import database.entity.Bordercountries;
import database.entity.Coordinates;
import database.entity.Countries;
import database.entity.Fullcountries;
import database.entity.Gdp;
import database.entity.Hdi;
import database.entity.Landarea;
import database.entity.Populations;
import database.entity.Uncode;
import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;
import javax.persistence.EntityManager;
import javax.persistence.NoResultException;
import javax.persistence.PersistenceContext;
import javax.ws.rs.Consumes;
import javax.ws.rs.PUT;
import javax.ws.rs.Path;
import javax.ws.rs.GET;
import javax.ws.rs.PathParam;
import javax.ws.rs.Produces;

/**
 * REST Web Service
 *
 * @author Manish
 */
@Stateless
@Path("generic")
public class countriesInfo {

    @PersistenceContext(unitName = "WebServerPrjPU")
    private EntityManager em;

    /**
     * Creates a new instance of countriesInfo
     */
    public countriesInfo() {
    }

    /**
     * Retrieves representation of an instance of database.entity.countriesInfo
     *
     * @return an instance of java.lang.String
     */
    @GET
    @Produces("application/xml")
    public String getXml() {
        //TODO return proper representation object
        throw new UnsupportedOperationException();
    }

    /**
     * PUT method for updating or creating an instance of countriesInfo
     *
     * @param content representation for the resource
     * @return an HTTP response with content of the updated or created resource.
     */
    @PUT
    @Consumes("application/xml")
    public void putXml(String content) {
    }

    protected EntityManager getEntityManager() {
        return em;
    }

    @GET
    @Path("countryinfo/{id}")
    @Produces("application/xml")
    public countryXML getCountryInfo(@PathParam("id") String id) {
        countryXML emptyOb = new countryXML();
        if (id == "") {
            return emptyOb;
        }
        String codeISO3 = GetISO3FrmCountryName(id);
        if (codeISO3 == "") {
            return emptyOb;
        }

        return GetXMLFromISO3(codeISO3);
    }
    @GET
    @Path("orderBy/{criteria}/{order}")
    @Produces("text/plain")
    public List<countryXML> GetConutryInfoByCriteria(@PathParam("criteria") String criteria, @PathParam("order")int ascending){
        boolean bAsc= true;
        if(ascending==0){
            bAsc = false;
        }
        if(criteria.equalsIgnoreCase("population")){
            return GetSortedCountryOnPoputaltion(bAsc);
        }else if(criteria.equalsIgnoreCase("gdp")){
            return GetSortedCountryOnGDP(bAsc);
        }else if(criteria.equalsIgnoreCase("landarea")){
            return GetSortedCountryOnLandArea(bAsc);
        }else if(criteria.equalsIgnoreCase("hdi")){
            return GetSortedCountryOnHDI(bAsc);
        }else{
            List<countryXML>list = new ArrayList<countryXML>();
            countryXML emptyOb = new countryXML();
            list.add(emptyOb);
            return list;
        }
    }

    @GET
    @Path("checkborder/{country1}/{country2}")
    @Produces("text/plain")
    public String CheckBorderCountries(@PathParam("country1") String con1, @PathParam("country2") String con2) {
        if (AreBorderCountries(con1, con2)) {
            return "Both are border Countries";
        } else {
            return "Countries are not border countries";
        }
    }

    @GET
    @Path("frompos/{lat}/{lon}")
    @Produces("application/xml")
    public countryXML GetCountryFrmPosition(@PathParam("lat") double latitude, @PathParam("lon") double longitude) {
        String codeIso3 = GetISO3FrmCoOrdinates(latitude, longitude);
        return GetXMLFromISO3(codeIso3);
    }
    private String GetISO3FrmCountryName(String name) {
//        javax.persistence.Query q = getEntityManager().createNamedQuery("Countries.findByNameListEN", Countries.class).setParameter("nameListEN", name);
//        Countries countryOb = (Countries) q.getSingleResult();
//        return countryOb.getCodeISO3();
        //First get code corresponding to the country name from fullCountryTable as user gives smaal names and counntry table has big names
        try {
            javax.persistence.Query q = getEntityManager().createNamedQuery("Fullcountries.findByCountryName", Fullcountries.class).setParameter("countryName", name);
            Fullcountries FullcountryOb1 = (Fullcountries) q.getSingleResult();
            return FullcountryOb1.getIsoAlpha3();
        }catch (NoResultException E) {
            System.out.println("There are no results from the query in Function GetISO3FrmCountryName" + E);
            return "";
        }

    }

    private boolean AreBorderCountries(String nameEn1, String nameEn2) {
        //First get code corresponding to the country name from fullCountryTable as user gives smaal names and counntry table has big names
        try {
            javax.persistence.Query q = getEntityManager().createNamedQuery("Fullcountries.findByCountryName", Fullcountries.class).setParameter("countryName", nameEn1);
            Fullcountries FullcountryOb1 = (Fullcountries) q.getSingleResult();

            q = getEntityManager().createNamedQuery("Fullcountries.findByCountryName", Fullcountries.class).setParameter("countryName", nameEn2);
            Fullcountries FullcountryOb2 = (Fullcountries) q.getSingleResult();

            q = getEntityManager().createNamedQuery("Bordercountries.findByNameListEN", Bordercountries.class).setParameter("nameListEN", nameEn1);
            List<Bordercountries> borderCountryOb1 = q.getResultList();
            Iterator<Bordercountries> iter = borderCountryOb1.iterator();
            while (iter.hasNext()) {
                Bordercountries inBorderTable = (Bordercountries) iter.next();
                if (inBorderTable.getCodeISO3().equalsIgnoreCase(FullcountryOb2.getIsoAlpha3())) {
                    return true;
                }
            }

            return false;
        } catch (NoResultException E) {
            System.out.println("There are no results from the query in Function AreBorderCountries" + E);
            return false;
        }
    }

    private String GetISO3FrmCoOrdinates(double lat, double lon) {
        try {
            javax.persistence.criteria.CriteriaBuilder cb = getEntityManager().getCriteriaBuilder();
            javax.persistence.criteria.CriteriaQuery<Coordinates> cq = cb.createQuery(Coordinates.class);
            javax.persistence.criteria.Root<Coordinates> mRoot = cq.from(Coordinates.class);
            javax.persistence.criteria.Predicate pValid1 = cb.lessThanOrEqualTo(mRoot.<Double>get("hasMinLongitude"), lon);
            javax.persistence.criteria.Predicate pValid2 = cb.greaterThanOrEqualTo(mRoot.<Double>get("hasMaxLongitude"), lon);
            javax.persistence.criteria.Predicate pValid3 = cb.lessThanOrEqualTo(mRoot.<Double>get("hasMinLatitude"), lat);
            javax.persistence.criteria.Predicate pValid4 = cb.greaterThanOrEqualTo(mRoot.<Double>get("hasMaxLatitude"), lat);
            javax.persistence.Query finalQuery = getEntityManager().createQuery(cq.select(mRoot).where(cb.and(pValid1, pValid2, pValid3, pValid4)));
            finalQuery.setMaxResults(1);
            Coordinates ob = (Coordinates) finalQuery.getSingleResult();
            return ob.getCodeISO3();
        } catch (NoResultException E) {
            System.out.println("There are no results from the query in FUnction GetISO3FrmCoOrdinates" + E);
            return "";
        }
    }

    private countryXML GetXMLFromISO3(String iso3Code) {
        try {
            javax.persistence.Query q = getEntityManager().createNamedQuery("Uncode.findByCodeISO3", Uncode.class).setParameter("codeISO3", iso3Code);
            Uncode unCodeOb = (Uncode) q.getSingleResult();

            q = getEntityManager().createNamedQuery("Fullcountries.findByIsoAlpha3", Fullcountries.class).setParameter("isoAlpha3", iso3Code);
            Fullcountries fullCountryInfoOb = (Fullcountries) q.getSingleResult();

            q = getEntityManager().createNamedQuery("Populations.findByCodeISO3", Populations.class).setParameter("codeISO3", iso3Code);
            Populations populationOb = (Populations) q.getSingleResult();

            q = getEntityManager().createNamedQuery("Gdp.findByCodeISO3", Gdp.class).setParameter("codeISO3", iso3Code);
            Gdp gdpOb = (Gdp) q.getSingleResult();

            q = getEntityManager().createNamedQuery("Landarea.findByCodeISO3", Landarea.class).setParameter("codeISO3", iso3Code);
            Landarea landArea = (Landarea) q.getSingleResult();

            q = getEntityManager().createNamedQuery("Hdi.findByCodeISO3", Hdi.class).setParameter("codeISO3", iso3Code);
            Hdi hdiOb = (Hdi) q.getSingleResult();

            countryXML xmlOb = new countryXML();
            xmlOb = xmlOb.SetUnCode(unCodeOb.getCodeUN().toString()).SetNameEn(fullCountryInfoOb.getCountryName()).SetCapitalName(fullCountryInfoOb.getCapital()).SetPopulation(populationOb.getPopulationTotal().toString());
            xmlOb.SetGDP(gdpOb.getGDPTotalInCurrentPrices().toString()).SetLandArea(landArea.getLandAreaTotal().toString()).SetHDI(hdiOb.getTotal().toString());
            return xmlOb;
        } catch (NoResultException E) {
            System.out.println("There are no results from the query in FUnction GetXMLFromISO3" + E);
            countryXML emptyOb = new countryXML();
            return emptyOb;
        }
    }

    private List<countryXML> GetSortedCountryOnPoputaltion(boolean asc) {
        javax.persistence.criteria.CriteriaBuilder cb = getEntityManager().getCriteriaBuilder();
        javax.persistence.criteria.CriteriaQuery<Populations> cq = cb.createQuery(Populations.class);
        javax.persistence.criteria.Root<Populations> mRoot = cq.from(Populations.class);
        if (asc) {
            cq = cq.select(mRoot).orderBy(cb.asc(mRoot.<Double>get("populationTotal")));
        } else {
            cq = cq.select(mRoot).orderBy(cb.desc(mRoot.<Double>get("populationTotal")));
        }
        javax.persistence.Query finalQuery = getEntityManager().createQuery(cq);
        finalQuery.setMaxResults(10);
        List<Populations> list = finalQuery.getResultList();
        List<countryXML>listResult = new ArrayList<countryXML>();
        Iterator<Populations>iter = list.iterator();
        while(iter.hasNext()){
            Populations rowOb = iter.next();
            listResult.add(GetXMLFromISO3(rowOb.getCodeISO3()));
        }
        return listResult;
    }
      private List<countryXML> GetSortedCountryOnGDP(boolean asc) {
        javax.persistence.criteria.CriteriaBuilder cb = getEntityManager().getCriteriaBuilder();
        javax.persistence.criteria.CriteriaQuery<Gdp> cq = cb.createQuery(Gdp.class);
        javax.persistence.criteria.Root<Gdp> mRoot = cq.from(Gdp.class);
        if (asc) {
            cq = cq.select(mRoot).orderBy(cb.asc(mRoot.<Double>get("GDPTotalInCurrentPrices")));
        } else {
            cq = cq.select(mRoot).orderBy(cb.desc(mRoot.<Double>get("GDPTotalInCurrentPrices")));
        }
        javax.persistence.Query finalQuery = getEntityManager().createQuery(cq);
        finalQuery.setMaxResults(10);
        List<Gdp> list = finalQuery.getResultList();
        List<countryXML>listResult = new ArrayList<countryXML>();
        Iterator<Gdp>iter = list.iterator();
        while(iter.hasNext()){
            Gdp rowOb = iter.next();
            listResult.add(GetXMLFromISO3(rowOb.getCodeISO3()));
        }
        return listResult;
    }
     private List<countryXML> GetSortedCountryOnLandArea(boolean asc) {
        javax.persistence.criteria.CriteriaBuilder cb = getEntityManager().getCriteriaBuilder();
        javax.persistence.criteria.CriteriaQuery<Landarea> cq = cb.createQuery(Landarea.class);
        javax.persistence.criteria.Root<Landarea> mRoot = cq.from(Landarea.class);
        if (asc) {
            cq = cq.select(mRoot).orderBy(cb.asc(mRoot.<Double>get("landAreaTotal")));
        } else {
            cq = cq.select(mRoot).orderBy(cb.desc(mRoot.<Double>get("landAreaTotal")));
        }
        javax.persistence.Query finalQuery = getEntityManager().createQuery(cq);
        finalQuery.setMaxResults(10);
        List<Landarea> list = finalQuery.getResultList();
        List<countryXML> listResult = new ArrayList<countryXML>();
        Iterator<Landarea> iter = list.iterator();
        while (iter.hasNext()) {
            Landarea rowOb = iter.next();
            listResult.add(GetXMLFromISO3(rowOb.getCodeISO3()));
        }
        return listResult;
    }
    private List<countryXML> GetSortedCountryOnHDI(boolean asc) {
        javax.persistence.criteria.CriteriaBuilder cb = getEntityManager().getCriteriaBuilder();
        javax.persistence.criteria.CriteriaQuery<Hdi> cq = cb.createQuery(Hdi.class);
        javax.persistence.criteria.Root<Hdi> mRoot = cq.from(Hdi.class);
        if (asc) {
            cq = cq.select(mRoot).orderBy(cb.asc(mRoot.<Double>get("Total")));
        } else {
            cq = cq.select(mRoot).orderBy(cb.desc(mRoot.<Double>get("Total")));
        }
        javax.persistence.Query finalQuery = getEntityManager().createQuery(cq);
        finalQuery.setMaxResults(10);
        List<Hdi> list = finalQuery.getResultList();
        List<countryXML> listResult = new ArrayList<countryXML>();
        Iterator<Hdi> iter = list.iterator();
        while (iter.hasNext()) {
            Hdi rowOb = iter.next();
            listResult.add(GetXMLFromISO3(rowOb.getCodeISO3()));
        }
        return listResult;
    }
} 
```

这是我的 glassfish-resources.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE resources PUBLIC "-//GlassFish.org//DTD GlassFish Application Server 3.1 Resource Definitions//EN" "http://glassfish.org/dtds/glassfish-resources_1_5.dtd">
<resources>
    <jdbc-connection-pool allow-non-component-callers="false" associate-with-thread="false" connection-creation-retry-attempts="0" connection-creation-retry-interval-in-seconds="10" connection-leak-reclaim="false" connection-leak-timeout-in-seconds="0" connection-validation-method="auto-commit" datasource-classname="com.mysql.jdbc.jdbc2.optional.MysqlDataSource" fail-all-connections="false" idle-timeout-in-seconds="300" is-connection-validation-required="false" is-isolation-level-guaranteed="true" lazy-connection-association="false" lazy-connection-enlistment="false" match-connections="false" max-connection-usage-count="0" max-pool-size="32" max-wait-time-in-millis="60000" name="mysql_faodata_rootPool" non-transactional-connections="false" pool-resize-quantity="2" res-type="javax.sql.DataSource" statement-timeout-in-seconds="-1" steady-pool-size="8" validate-atmost-once-period-in-seconds="0" wrap-jdbc-objects="false">
        <property name="serverName" value="localhost"/>
        <property name="portNumber" value="3306"/>
        <property name="databaseName" value="faodata"/>
        <property name="User" value="root"/>
        <property name="Password" value="manish"/>
        <property name="URL" value="jdbc:mysql://localhost:3306/faodata?zeroDateTimeBehavior=convertToNull"/>
        <property name="driverClass" value="com.mysql.jdbc.Driver"/>
    </jdbc-connection-pool>
    <jdbc-resource enabled="true" jndi-name="org.dicprj.ws" object-type="user" pool-name="mysql_faodata_rootPool"/>
</resources> 
```

glasshfish 服务器显示错误

```
INFO: file:/E:/Data/Study/Home/DIC_PROJ1/WebServer/WebServerPrj/build/web/WEB-INF/classes/_WebServerPrjPU logout successful
INFO: EclipseLink, version: Eclipse Persistence Services - 2.3.2.v20111125-r10461
INFO: file:/E:/Data/Study/Home/DIC_PROJ1/WebServer/WebServerPrj/build/web/WEB-INF/classes/_WebServerPrjPU login successful
WARNING: Multiple [2] JMX MBeanServer instances exist, we will use the server at index [0] : [com.sun.enterprise.v3.admin.DynamicInterceptor@1c14aa61].
WARNING: JMX MBeanServer in use: [com.sun.enterprise.v3.admin.DynamicInterceptor@1c14aa61] from index [0] 
WARNING: JMX MBeanServer in use: [com.sun.jmx.mbeanserver.JmxMBeanServer@4d7f4bab] from index [1] 
INFO: EJB5181:Portable JNDI names for EJB countriesInfo: [java:global/WebServerPrj/countriesInfo, java:global/WebServerPrj/countriesInfo!service.countriesInfo]
INFO: Registering the Jersey servlet application, named org.netbeans.rest.application.config.ApplicationConfig, at the servlet mapping, /webresources/*, with the Application class of the same name
INFO: WEB0671: Loading application [WebServerPrj] at [/WebServerPrj]
INFO: WebServerPrj was successfully deployed in 409 milliseconds.
SEVERE: Error when configuring to use the EJB interceptor binding API. JAX-RS EJB support is disabled.
java.lang.reflect.InvocationTargetException
    at sun.reflect.GeneratedMethodAccessor183.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.sun.jersey.server.impl.ejb.EJBComponentProviderFactoryInitilizer.initialize(EJBComponentProviderFactoryInitilizer.java:80)
    at com.sun.jersey.spi.container.servlet.WebComponent.configure(WebComponent.java:574)
    at com.sun.jersey.spi.container.servlet.ServletContainer$InternalWebComponent.configure(ServletContainer.java:311)
    at com.sun.jersey.spi.container.servlet.WebComponent.load(WebComponent.java:608)
    at com.sun.jersey.spi.container.servlet.WebComponent.init(WebComponent.java:210)
    at com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:373)
    at com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:556)
    at javax.servlet.GenericServlet.init(GenericServlet.java:244)
    at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1453)
    at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:1093)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:189)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.NullPointerException
    at com.sun.ejb.containers.BaseContainer.registerSystemInterceptor(BaseContainer.java:3386)
    at com.sun.ejb.containers.InternalInterceptorBindingImpl.registerInterceptor(InternalInterceptorBindingImpl.java:100)
    ... 36 more

INFO: Initiating Jersey application, version 'Jersey: 1.11.1 03/31/2012 06:49 PM'
INFO: Instantiated the Application class org.netbeans.rest.application.config.ApplicationConfig
SEVERE: The RuntimeException could not be mapped to a response, re-throwing to the HTTP container
java.lang.NullPointerException 
```

谁能解释配置或代码中可能有什么问题？提前致谢。

# ruby-on-rails - Postgres 无法连接到服务器

> ID：13410686
> 
> 赞同：573
> 
> 时间：2012-11-16T04:53:39.753
> 
> 标签：ruby-on-rails, database, postgresql, macos, homebrew

在我做`brew update`and之后`brew upgrade`，我的 postgres 出现了一些问题。我尝试卸载 postgres 并重新安装，但效果不佳。

这是错误信息。（当我尝试这样做时，我也收到了此错误消息`rake db:migrate`）

```
$ psql
psql: could not connect to server: No such file or directory
    Is the server running locally and accepting
    connections on Unix domain socket "/tmp/.s.PGSQL.5432"? 
```

我该如何解决？

Mac版：山狮。

自制版本：0.9.3

postgres 版本：psql (PostgreSQL) 9.2.1

这就是我所做的：

```
$ brew uninstall postgresql
Uninstalling /usr/local/Cellar/postgresql/9.2.1...
$ brew uninstall postgresql
Uninstalling /usr/local/Cellar/postgresql/9.1.4...
$ psql --version
bash: /usr/local/bin/psql: No such file or directory
$ brew install postgresql
==> Downloading http://ftp.postgresql.org/pub/source/v9.2.1/postgresql-9.2.1.tar.bz2
Already downloaded: /Library/Caches/Homebrew/postgresql-9.2.1.tar.bz2
......
......
==> Summary
/usr/local/Cellar/postgresql/9.2.1: 2814 files, 38M, built in 2.7 minutes
$ initdb /usr/local/var/postgres -E utf8
The files belonging to this database system will be owned by user "laigary".
This user must also own the server process.

The database cluster will be initialized with locale "en_US.UTF-8".
The default text search configuration will be set to "english".

initdb: directory "/usr/local/var/postgres" exists but is not empty
If you want to create a new database system, either remove or empty
the directory "/usr/local/var/postgres" or run initdb
with an argument other than "/usr/local/var/postgres".
$ mkdir -p ~/Library/LaunchAgents
$ cp /usr/local/Cellar/postgresql/9.2.1/homebrew.mxcl.postgresql.plist ~/Library/LaunchAgents/
$ launchctl load -w ~/Library/LaunchAgents/homebrew.mxcl.postgresql.plist
homebrew.mxcl.postgresql: Already loaded
$ pg_ctl -D /usr/local/var/postgres -l /usr/local/var/postgres/server.log start
server starting
$ env ARCHFLAGS="-arch x86_64" gem install pg
Building native extensions.  This could take a while...
Successfully installed pg-0.14.1
1 gem installed
$ psql --version
psql (PostgreSQL) 9.2.1
$ psql
psql: could not connect to server: No such file or directory
    Is the server running locally and accepting
    connections on Unix domain socket "/tmp/.s.PGSQL.5432"?
```

现在，在我重新安装自制软件后，当我使用 时`$ psql`，它不会显示任何错误消息。

但我`rake db:migrate`在我的 Rails 应用程序中运行，它显示：

```
could not connect to server: No such file or directory
    Is the server running locally and accepting
    connections on Unix domain socket "/var/pgsql_socket/.s.PGSQL.5432"?

/usr/local/Cellar/ruby/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/postgresql_adapter.rb:1213:in `initialize'
/usr/local/Cellar/ruby/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/postgresql_adapter.rb:1213:in `new'
/usr/local/Cellar/ruby/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/postgresql_adapter.rb:1213:in `connect'
/usr/local/Cellar/ruby/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/postgresql_adapter.rb:329:in `initialize'
/usr/local/Cellar/ruby/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/postgresql_adapter.rb:28:in `new'
/usr/local/Cellar/ruby/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/postgresql_adapter.rb:28:in `postgresql_connection'
/usr/local/Cellar/ruby/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:309:in `new_connection'
/usr/local/Cellar/ruby/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:319:in `checkout_new_connection'
/usr/local/Cellar/ruby/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:241:in `block (2 levels) in checkout'
/usr/local/Cellar/ruby/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:236:in `loop'
/usr/local/Cellar/ruby/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:236:in `block in checkout'
/usr/local/Cellar/ruby/1.9.3-p327/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/usr/local/Cellar/ruby/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:233:in `checkout'
/usr/local/Cellar/ruby/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:96:in `block in connection'
/usr/local/Cellar/ruby/1.9.3-p327/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/usr/local/Cellar/ruby/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:95:in `connection'
/usr/local/Cellar/ruby/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:404:in `retrieve_connection'
/usr/local/Cellar/ruby/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_specification.rb:170:in `retrieve_connection'
/usr/local/Cellar/ruby/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_specification.rb:144:in `connection'
/usr/local/Cellar/ruby/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activerecord-3.2.8/lib/active_record/railties/databases.rake:107:in `rescue in create_database'
/usr/local/Cellar/ruby/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activerecord-3.2.8/lib/active_record/railties/databases.rake:51:in `create_database'
/usr/local/Cellar/ruby/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activerecord-3.2.8/lib/active_record/railties/databases.rake:40:in `block (3 levels) in <top (required)>'
/usr/local/Cellar/ruby/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activerecord-3.2.8/lib/active_record/railties/databases.rake:40:in `each'
/usr/local/Cellar/ruby/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activerecord-3.2.8/lib/active_record/railties/databases.rake:40:in `block (2 levels) in <top (required)>'
/usr/local/Cellar/ruby/1.9.3-p327/lib/ruby/1.9.1/rake/task.rb:205:in `call'
/usr/local/Cellar/ruby/1.9.3-p327/lib/ruby/1.9.1/rake/task.rb:205:in `block in execute'
/usr/local/Cellar/ruby/1.9.3-p327/lib/ruby/1.9.1/rake/task.rb:200:in `each'
/usr/local/Cellar/ruby/1.9.3-p327/lib/ruby/1.9.1/rake/task.rb:200:in `execute'
/usr/local/Cellar/ruby/1.9.3-p327/lib/ruby/1.9.1/rake/task.rb:158:in `block in invoke_with_call_chain'
/usr/local/Cellar/ruby/1.9.3-p327/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/usr/local/Cellar/ruby/1.9.3-p327/lib/ruby/1.9.1/rake/task.rb:151:in `invoke_with_call_chain'
/usr/local/Cellar/ruby/1.9.3-p327/lib/ruby/1.9.1/rake/task.rb:144:in `invoke'
/usr/local/Cellar/ruby/1.9.3-p327/lib/ruby/1.9.1/rake/application.rb:116:in `invoke_task'
/usr/local/Cellar/ruby/1.9.3-p327/lib/ruby/1.9.1/rake/application.rb:94:in `block (2 levels) in top_level'
/usr/local/Cellar/ruby/1.9.3-p327/lib/ruby/1.9.1/rake/application.rb:94:in `each'
/usr/local/Cellar/ruby/1.9.3-p327/lib/ruby/1.9.1/rake/application.rb:94:in `block in top_level'
/usr/local/Cellar/ruby/1.9.3-p327/lib/ruby/1.9.1/rake/application.rb:133:in `standard_exception_handling'
/usr/local/Cellar/ruby/1.9.3-p327/lib/ruby/1.9.1/rake/application.rb:88:in `top_level'
/usr/local/Cellar/ruby/1.9.3-p327/lib/ruby/1.9.1/rake/application.rb:66:in `block in run'
/usr/local/Cellar/ruby/1.9.3-p327/lib/ruby/1.9.1/rake/application.rb:133:in `standard_exception_handling'
/usr/local/Cellar/ruby/1.9.3-p327/lib/ruby/1.9.1/rake/application.rb:63:in `run'
/usr/local/bin/rake:32:in `<main>'
Couldn't create database for {"adapter"=>"postgresql", "encoding"=>"unicode", "database"=>"riy_development", "pool"=>5, "username"=>nil, "password"=>nil}
```

**最后我找到了解决方案。**

```
sudo mkdir /var/pgsql_socket/
sudo ln -s /private/tmp/.s.PGSQL.5432 /var/pgsql_socket/ 
```

这个解决方案有点棘手，但它确实有效。希望有人有更好的解决方案

**更新**

这也适用于我。

```
rm /usr/local/var/postgres/postmaster.pid 
```

* * *

## 回答 #1

> 赞同：1118
> 
> 时间：2013-09-16T15:55:50.157

有类似的问题；pid 文件阻止 postgres 启动。要解决这个问题：

```
$ rm /usr/local/var/postgres/postmaster.pid
$ brew services restart postgresql 
```

然后一切都很好。

* * *

**更新：**

对于**Apple M1** (Big Sur) 用户，请改为：

```
$ rm /opt/homebrew/var/postgres/postmaster.pid
$ brew services restart postgresql 
```

* * *

## 回答 #2

> 赞同：337
> 
> 时间：2015-01-13T15:16:01.987

当 brew 进行 postgres 升级时，有时会发生这种情况，导致数据文件与新服务器不兼容。

就我而言，它发生在[从 9.3 升级到 9.4](http://www.postgresql.org/docs/9.4/static/upgrading.html)时。

**OS X/自制软件：**

尝试运行`postgres -D /usr/local/var/postgres`——如果 postgres 无法启动，它会给你一个更详细的输出。`/usr/local/var/log/postgres.log`或在（`/opt/homebrew/var/log/postgres.log`Mac M1 上）打开日志文件并查找**“致命：数据库文件与服务器不兼容”行**

就我而言，运行`rm -rf /usr/local/var/postgres && initdb /usr/local/var/postgres -E utf8`删除了我的旧数据库，然后重新初始化了 postgres 数据库模式。**（这将破坏您的数据）**

感谢[https://github.com/Homebrew/homebrew/issues/35240](https://github.com/Homebrew/homebrew/issues/35240)的解决方案。可以在此处找到彻底重新安装的完整说明：[如何完全卸载和重新安装 Homebrew Postgres - Test Double Blog](https://blog.testdouble.com/posts/2021-01-28-how-to-completely-uninstall-homebrew-postgres/)（同样，如果您在 M1 Mac 上，则在它所说的任何地方替换**/opt/homebrew/var路径****/ usr/local/var** )

重新生成我的数据库（使用`rake db:create`）后一切正常。

最后，评论中的链接指向保留数据的可能解决方案，但我没有尝试过：[如何将 PostgreSQL 从版本 9.6 升级到版本 10.1 而不会丢失数据 - Thinbug](https://stackoverflow.com/questions/24379373/how-to-upgrade-postgresql-from-version-9-6-to-version-10-1-without-losing-data)

* * *

## 回答 #3

> 赞同：87
> 
> 时间：2015-04-01T05:57:07.937

在这里找到了对我有用的解决方案：

[https://dba.stackexchange.com/questions/75214/psql-could-not-connect-to-server-no-such-file-or-directory](https://dba.stackexchange.com/questions/75214/psql-could-not-connect-to-server-no-such-file-or-directory)

您基本上运行以下命令来手动启动服务器：

```
pg_ctl -D /usr/local/var/postgres -l /usr/local/var/postgres/server.log start 
```

* * *

## 回答 #4

> 赞同：60
> 
> 时间：2017-02-09T03:17:45.427

如果使用 brew 安装和卸载 postgres 对您不起作用，请查看您的 postgresql 安装日志或：

```
postgres -D /usr/local/var/postgres 
```

如果你看到这种输出：

```
LOG:  skipping missing configuration file "/usr/local/var/postgres/postgresql.auto.conf"
FATAL:  database files are incompatible with server
DETAIL:  The data directory was initialized by PostgreSQL version 9.4, which is not compatible with this version 9.6.1. 
```

然后尝试以下操作：

```
rm -rf /usr/local/var/postgres && initdb /usr/local/var/postgres -E utf8 
```

然后启动服务器：

```
pg_ctl -D /usr/local/var/postgres -l logfile start 
```

[资源](https://github.com/Homebrew/legacy-homebrew/issues/35240)

* * *

## 回答 #5

> 赞同：54
> 
> 时间：2018-01-23T19:17:56.270

升级数据库对我有用

`brew postgresql-upgrade-database`

* * *

## 回答 #6

> 赞同：36
> 
> 时间：2014-12-18T08:26:32.913

在 Yosemite 上，如果 pid 文件阻止 Postgres 启动并且您有一个`launchctl`守护程序尝试（并且失败）加载数据库守护程序，那么您需要卸载 plist 文件：

```
$ launchctl unload ~/Library/LaunchAgents/homebrew.mxcl.postgresql.plist 
```

然后删除pid文件

```
$ rm /usr/local/var/postgres/postmaster.pid 
```

然后重新加载`launchctl`守护进程

```
$ launchctl load ~/Library/LaunchAgents/homebrew.mxcl.postgresql.plist 
```

* * *

## 回答 #7

> 赞同：32
> 
> 时间：2013-06-14T06:54:48.957

对于阅读本文并使用 Postgres.app 的任何人，您可能需要`host: localhost`在 database.yml 中。[http://postgresapp.com/documentation#toc_3](http://postgresapp.com/documentation#toc_3)

* * *

## 回答 #8

> 赞同：26
> 
> 时间：2017-03-14T23:49:09.680

```
brew services start postgres 
```

为我工作！

* * *

## 回答 #9

> 赞同：18
> 
> 时间：2018-10-18T14:55:57.237

该问题也可归因于导致 postmaster.pid 文件落后的崩溃进程。我这样做并工作：

```
$ brew services stop postgresql
$ rm /usr/local/var/postgres/postmaster.pid # adjust path accordingly to your install
$ brew services start postgresql 
```

* * *

## 回答 #10

> 赞同：17
> 
> 时间：2012-11-16T14:44:24.947

检查套接字文件是否存在。

```
$ ls -l /tmp/.s.PGSQL.5432
srwxrwxrwx  1 you  wheel  0 Nov 16 09:22 /tmp/.s.PGSQL.5432 
```

如果没有，请检查您的 postgresql.conf 是否有 unix_socket_directory 更改。

```
$ grep unix_socket /usr/local/var/postgres/postgresql.conf
#unix_socket_directory = ''     # (change requires restart)
#unix_socket_group = ''         # (change requires restart)
#unix_socket_permissions = 0777     # begin with 0 to use octal notation 
```

* * *

## 回答 #11

> 赞同：16
> 
> 时间：2018-05-19T20:59:26.980

问题是因为 5432 端口上已经有一个正在运行的服务，我们无法通过这个端口建立 psql 套接字连接。

我删除了套接字文件

```
rm -rf /tmp/.s.PGSQL.5432/ 
```

然后我重新初始化了 postgres 服务

```
postgres -D /usr/local/var/postgres 
```

这对我有用。

* * *

## 回答 #12

> 赞同：12
> 
> 时间：2016-11-04T03:09:47.947

最简单的方法是这样做

```
brew reinstall postgresql 
```

这将使您的用户权限等保持不变，一切都将重置为新的。一直有效！

* * *

## 回答 #13

> 赞同：8
> 
> 时间：2017-05-06T02:15:28.187

这实际上是你应该做的：

你应该看看 /usr/local/var/postgres/postmaster.pid

然后查看文件的第一行 - 这是错误的 PID

跑

```
ps aux | grep <PID> 
```

例如：

```
ps aux | grep 12345 
```

然后做

```
kill <PID> 
```

例如

```
kill 12345 
```

假设它仍在运行

[https://superuser.com/questions/553045/fatal-lock-file-postmaster-pid-already-exists](https://superuser.com/questions/553045/fatal-lock-file-postmaster-pid-already-exists)

**不要听公认的答案，这是不好的，会破坏你的数据！！！**

* * *

## 回答 #14

> 赞同：8
> 
> 时间：2020-10-29T05:25:30.130

就我而言，问题是由 Mac OS 更新引起的。升级 PostgreSQL 解决了这个问题。

```
# upgrade database version solved the trouble
$ brew postgresql-upgrade-database 
```

但是，这个错误很常见并且有多种可能的原因，你不应该完全依赖我上面的解决方案。

* * *

## 回答 #15

> 赞同：7
> 
> 时间：2013-08-23T19:08:43.780

更改 postresql 或 database.yml 配置设置、更改 $PATH 或创建符号链接对我来说都是不必要的。我需要做的就是`gem uninstall pg`然后`bundle`（或`gem install pg`）。

问题是 pg gem 是在自制 postgres 之前安装的，所以从 MacOS 附带的 postgres 版本中获取设置。重新安装它（从而重建本机扩展）解决了这个问题。

* * *

## 回答 #16

> 赞同：7
> 
> 时间：2021-05-28T14:17:25.083

对于 MacOS BigSur，自制 postgres：

*   `rm /opt/homebrew/var/postgres/postmaster.pid`
*   `brew services restart postgresql`

* * *

## 回答 #17

> 赞同：7
> 
> 时间：2016-08-10T19:00:25.793

当我从 9.3.4 升级到 9.5 时，这发生在我身上，因为数据库在不升级的情况下不兼容。

我使用 pg_upgrade 如下：

停止 postgres

```
$ brew services stop postgresql 
```

升级数据库：

```
$ pg_upgrade \
   -d /usr/local/var/postgres \
   -D /usr/local/var/postgres9.5 \
   -b /usr/local/Cellar/postgresql/9.3.4/bin/ \
   -B /usr/local/Cellar/postgresql/9.5.0/bin/ \
   -v 
```

归档旧数据库：

```
 $ mv /usr/local/var/postgres /usr/local/var/postgres9.3.save
 $ mv /usr/local/var/postgres9.5 /usr/local/var/postgres 
```

重启postgres：

```
 $ brew services start postgresql 
```

更新的宝石（用于轨道/活动记录）：

```
 $ gem uninstall pg
 $ gem uninstall activerecord-postgresql-adapter
 $ bundle install 
```

* * *

## 回答 #18

> 赞同：6
> 
> 时间：2021-09-22T15:44:52.923

这对我有用。我不必删除任何文件

`brew postgresql-upgrade-database`

* * *

## 回答 #19

> 赞同：5
> 
> 时间：2014-03-02T07:08:09.467

Psql 选项

-h 主机名 --host=主机名

：指定运行服务器的机器的主机名。 **如果该值以斜杠开头，则将其用作 Unix 域套接字的目录。**

```
$ grep "port\|unix_socket" /etc/postgresql/9.1/main/postgresql.conf
port = 5433                                         # (change requires restart)
unix_socket_directory = '/var/run/postgresql'       # (change requires resta

$ netstat -nalp | grep postgres
unix  2      [ ACC ]     STREAM     LISTENING     106753   4349/postgres       /tmp/.s.PGSQL.5432
unix  2      [ ACC ]     STREAM     LISTENING     10377 1031/postgres       /var/run/postgresql/.s.PGSQL.5433 
```

使用 -host 选项运行 psql

```
$ psql -p 5433 -h /var/run/postgresql 
```

无需做软链接

* * *

## 回答 #20

> 赞同：5
> 
> 时间：2018-03-17T14:23:32.153

这对我有用（作为以前答案的混合）：

```
$ rm /usr/local/var/postgres/postmaster.pid

$ pg_ctl -D /usr/local/var/postgres -l /usr/local/var/postgres/server.log start 
```

来源：[https ://coderwall.com/p/zf-fww/postgres-on-osx-with-homebrew-not-running-after-osx-crash](https://coderwall.com/p/zf-fww/postgres-on-osx-with-homebrew-not-running-after-osx-crash)

* * *

## 回答 #21

> 赞同：5
> 
> 时间：2017-03-14T23:19:42.667

如果 postgres 是使用 homebrew 安装的，你可以通过运行来解决这个问题：

```
brew link postgres 
```

* * *

## 回答 #22

> 赞同：5
> 
> 时间：2019-04-12T06:52:21.727

我遇到了同样的问题`psql (PostgreSQL) 9.6.11`。

什么对我有用-

删除 postmaster.pid -- `rm /usr/local/var/postgresql@9.6/postmaster.pid`

重新启动 postgres --`brew services restart postgresql@9.6`

如果这也不起作用，请运行 - `sudo chmod 700 /usr/local/var/postgresql@9.6`

* * *

## 回答 #23

> 赞同：4
> 
> 时间：2016-11-02T20:29:32.910

在 MacOS Sierra 上也遇到了这个问题，当我们如上所述运行 pg_ctl 时，我们遇到了以下错误`pg_ctl: no database directory specified and environment variable PGDATA unset`。所以我们按照[这里](http://blog.taylorrf.com/blog/2014/12/17/pg-ctl-no-database-directory-specified/)的步骤解决了我们的问题，即：

`mkdir ~/.postgres`

`initdb ~/.postgres`

`pg_ctl -D ~/.postgres start`

* * *

## 回答 #24

> 赞同：4
> 
> 时间：2019-07-12T11:26:07.557

如果你在不退出 psql 的情况下关闭系统，postgres 就不会删除一些文件。

我没有在 usr/local/var/postgres 位置找到文件 postmaster.pid

所以我做了以下事情：

> ### brew 服务启动 postgresql

上面的命令应该让你启动 postgres

* * *

## 回答 #25

> 赞同：4
> 
> 时间：2020-03-25T23:35:52.960

所以我在命令之后偶然发现了这个`rails db:create`。在 macOS Catalina 10.15.3 中设置环境。

我检查的第一件事是让我来到这里的流程。在确保所有事情进展顺利并且没有任何错误可能逃过我的脑海后，我尝试了这里最流行的解决方案，但似乎都没有奏效。

到目前为止，我看到的唯一错误是

`$ psql psql: could not connect to server: No such file or directory Is the server running locally and accepting connections on Unix domain socket "/tmp/.s.PGSQL.5432"?`

所以我需要一些关于正在发生的事情的更具体的信息。由于这个原因，我决定查看位于的 postgres 日志文件

`/usr/local/var/log/postgres.log`

所以打开日志后我看到了这个错误

`LOG: starting PostgreSQL 12.2 on x86_64-apple-darwin19.3.0, compiled by Apple clang version 11.0.0 (clang-1100.0.33.17), 64-bit LOG: could not translate host name "localhost", service "5432" to address: nodename nor servname provided, or not known WARNING: could not create listen socket for "localhost" FATAL: could not create any TCP/IP sockets LOG: database system is shut down`

因此，这更具解释性和具体性。问题在于 PostgreSQL 无法“看到”并解析 localhost 服务器。

所以接下来我要做的是检查 /etc/hosts 文件，其默认内容应如下所示：

```
##
# Host Database
#
# localhost is used to configure the loopback interface
# when the system is booting.  Do not change this entry.
##
127.0.0.1   localhost
255.255.255.255 broadcasthost
::1          localhost 
```

在将上述内容与我的进行比较后，我发现在我的这一行中有所不同并发表了评论（！）。

```
#::1             localhost 
```

所以我删除了行前的#符号保存文件并重新运行

```
rails db:create 
```

并且数据库已成功启动。

* * *

## 回答 #26

> 赞同：4
> 
> 时间：2017-10-16T04:39:27.647

我遇到了同样的问题，因为我在代码中使用了错误的 Postgres 用户名。我登录到 postgres`psql -d postgres`并输入`\du`以获取角色名称并更正 Postgres 的用户名。

所以当你们遇到这个问题时，你们需要确保使用正确的 Postgres 用户名、密码、主机名和数据库......

希望这会帮助任何人

* * *

## 回答 #27

> 赞同：3
> 
> 时间：2014-01-24T18:17:09.313

在其他进程正在访问它们时尝试恢复/删除/创建数据库后，我遇到了这个问题。MacOSX/Homebrew 修复是：

1.  关闭所有其他访问进程`rails server`, `rails console`, `guard`, 等...
2.  使用中的命令加载/卸载`brew info postgres`
3.  从之前运行恢复/删除/创建

* * *

## 回答 #28

> 赞同：3
> 
> 时间：2015-02-10T14:54:00.263

FWIW 今天发生在我身上，但发生的事情是我当时正在运行 Ubuntu 更新，这可能正在更新 Postgres。更新完成后，我可以顺利连接。

为了完整起见，我试图从 Rails 控制台从数据库中检索记录：

```
development (main):0 > a = MyModel.find 73694
PG::ConnectionBad: could not connect to server: No such file or directory
        Is the server running locally and accepting
        connections on Unix domain socket "/var/run/postgresql/.s.PGSQL.5432"? 
```

* * *

## 回答 #29

> 赞同：3
> 
> 时间：2015-06-09T21:12:48.410

看起来你的 psql 没有运行。您应该在连接之前运行它。您只能使用适用于 Mac OS 的 Postgres.app 来做到这一点。（下载并安装此应用程序[http://postgresapp.com](http://postgresapp.com)）打开应用程序，您已准备好 PostgreSQL 服务器并等待新连接。关闭应用程序，服务器关闭。你也可以在这里找到这个信息[http://www.postgresql.org/download/macosx/](http://www.postgresql.org/download/macosx/)。希望这会帮助你。

* * *

## 回答 #30

> 赞同：3
> 
> 时间：2017-10-28T16:09:42.730

¿ 您最近是否更改了 pg_hba.conf？如果您确实检查了以下任何错字：

# “local”仅适用于 Unix 域套接字连接

本地所有所有密码

# IPv4 本地连接：

host all all 127.0.0.1/32 密码

# IPv6 本地连接：

host all all ::1/128 密码

有时一个简单的错误就会让我们头疼。我希望这能有所帮助，如果我的英语一点都不好，我很抱歉。

* * *

## 回答 #31

> 赞同：3
> 
> 时间：2017-02-08T16:07:56.100

对于那些使用此命令但不起作用或文件不存在且正在使用 Ruby on Rails 的人

> rm /usr/local/var/postgres/postmaster.pid

或任何其他命令，然后继续失败。

我用 Brew 解决了这个问题。我不得不用 brew 卸载 2 次，因为在第一次卸载时会保留另一个版本的 postgresql，第二次卸载过程将完成。

使用 Brew 安装 postgresql

然后删除、创建和迁移项目的数据库

（不要忘记启动 postgresql 服务器）

* * *

## 回答 #32

> 赞同：3
> 
> 时间：2016-10-01T09:22:36.213

这是因为以前的服务器仍在运行，请尝试关闭所有内容并重新运行您的应用程序。

* * *

## 回答 #33

> 赞同：3
> 
> 时间：2018-01-04T06:57:34.463

当 postgres 服务器未运行时会发生这种情况。在 MAC 上通过 Homebrew 正确安装 Postgres 的步骤：

1.  `brew install postgres`

2.  `initdb /Users/<username>/db -E utf8` [这将初始化 postgres 以使用给定目录作为数据库目录。通常不建议使用用户目录进行数据库存储。编辑 sudoers 文件以添加 initdb 和类似命令，然后在 /usr/local/var/postgres 上运行 initdb]

3.  `pg_ctl -D /Users/<username>/db -l logfile start` [第 2 步成功后会提示运行第 3 步。此命令手动启动服务器。]

* * *

## 回答 #34

> 赞同：2
> 
> 时间：2014-11-23T19:29:14.893

经过大量的来回后，它真的归结为`pg`我使用的 gem 版本。在小牛队上，`pg`版本`0.15.1`不会连接到端口 5432，但版本`0.17.1`工作得很好 - 很奇怪。

* * *

## 回答 #35

> 赞同：2
> 
> 时间：2014-05-10T22:13:53.480

我得到了同样的错误。原来 postgres 根本没有运行（它通常总是在后台运行，但无论出于何种原因，它今天都没有运行）。

如果是这种情况，只需`postgres`在项目目录的命令行中输入

* * *

## 回答 #36

> 赞同：2
> 
> 时间：2021-08-29T18:59:13.363

如果您使用的是**M1 mac并且您使用****M1 版本的 homebrew**安装了 postgresql ，这应该可以工作：

```
$ rm /opt/homebrew/var/postgres/postmaster.pid
$ brew services restart postgresql 
```

* * *

## 回答 #37

> 赞同：2
> 
> 时间：2020-09-15T03:00:15.947

有同样的问题。升级数据库成功了！ `postgresql-upgrade-database`

* * *

## 回答 #38

> 赞同：2
> 
> 时间：2016-10-11T07:32:32.560

对我来说，这是导致问题的 apache 升级。我仍然可以在控制台中运行 psql 或直接从 kdevelop 调用 db。它还可以将“host = localhost”添加到连接字符串。

但真正的问题是 apache 已更改为私有 tmp。

**解决方案：**更新 /usr/lib/systemd/system/apache2.service 并将 PrivateTmp=true 更改为 PrivateTmp=false。

我正在开发 OpenSuse OS，但我猜类似的事情可能会发生在 Mac 上。

* * *

## 回答 #39

> 赞同：2
> 
> 时间：2021-07-30T14:27:49.633

这对我有用： `rm /usr/local/var/postgres/postmaster.pid`

* * *

## 回答 #40

> 赞同：1
> 
> 时间：2020-04-21T12:50:42.820

尝试

```
sudo systemctl start postgresql@12-main 
```

这里我的 postgresql 版本是 12。

* * *

## 回答 #41

> 赞同：1
> 
> 时间：2021-01-23T20:58:01.717

我只是重新启动了postgres：

```
brew services restart postgresql 
```

没有必要删除`postmaster.pid`.

* * *

## 回答 #42

> 赞同：1
> 
> 时间：2019-05-15T03:49:43.403

我发现在安装了 Postgres 9.6 的最新补丁后，我所有的可执行文件（`postgres`、`psql`、`pg_dump`等`pg_restore`）都被删除了，我不得不重新链接它们。幸运的是 Homebrew 可以为你做到这一点：

```
brew link --force postgresql # (or in my case, `postgresql@9.6`) 
```

* * *

## 回答 #43

> 赞同：1
> 
> 时间：2021-03-15T05:00:39.977

我正在我的 MacBook M1 (Air) 上开发一个项目并打开了一些选项卡，突然我的 Postgres 服务器停止并开始出现以下错误：

*psql*：无法连接到服务器：连接失败服务器是否在本地运行并接受 Unix 域套接字“/tmp/.s.PGSQL.5432”上的连接

*我尝试了许多解决方案，例如；*

1.  更新 brew 和 Postgres。
2.  重新启动服务器。
3.  试图从命令行终止该进程。

但可悲的是，没有什么对我有用。

最后，我想到了重新启动我的 mac 。令我惊讶的是，postgres 服务器开始像以前一样正常工作。我认为 Postgres 目录一定有问题。但我很高兴，它奏效了。

我建议您在重新启动之前先完成上述选项。

谢谢。

* * *

## 回答 #44

> 赞同：1
> 
> 时间：2021-10-26T15:48:41.147

对于 Mac OS Catalina，这行得通

```
$ rm /usr/local/var/postgres/postmaster.pid
$ brew services restart postgresql 
```

* * *

## 回答 #45

> 赞同：0
> 
> 时间：2015-01-24T10:42:22.673

安装后只需两个步骤即可运行数据库（在此之前确保您以`postgres`用户身份登录）

> # 安装目录/bin/postmaster -D 安装目录/pgsql/data

例如：

```
[postgres@localhost bin]$ /usr/local/pgsql/bin/postmaster -D /usr/local/pgsql/data 
```

第 2 步：从安装路径运行 psql（检查您安装的位置 '#which postgres' 将用于找出安装位置）

```
[postgres@localhost bin]$ psql 
```

* * *

## 回答 #46

> 赞同：0
> 
> 时间：2013-07-22T04:10:05.643

**原因**

Lion 已经安装了一个 postgres 版本，并默认使用这些二进制文件。通常，您可以通过使用自制 postgres 二进制文件的完整路径来解决此问题，但其他程序可能仍然存在问题。

**解决方案**

```
curl http://nextmarvel.net/blog/downloads/fixBrewLionPostgres.sh | sh 
```

通过

[http://nextmarvel.net/blog/2011/09/brew-install-postgresql-on-os-x-lion/](http://nextmarvel.net/blog/2011/09/brew-install-postgresql-on-os-x-lion/)

* * *

## 回答 #47

> 赞同：0
> 
> 时间：2017-12-04T05:43:30.877

如果您在升级 Postgres 时（或升级后）遇到问题，请按照此处提到的步骤在版本之间安全传输数据，这将解决问题：

[使用 Homebrew (macOS) 将 PostgreSQL 9.6.5 升级到 10.0](https://gist.github.com/giannisp/ebaca117ac9e44231421f04e7796d5ca)

* * *

## 回答 #48

> 赞同：0
> 
> 时间：2021-10-29T08:14:06.177

这就是它在我的 MacOS（我曾经`homebrew`安装过`postgres`）上为我修复此错误的方式：

```
> cd /opt/homebrew/var
> rm -rf postgres
> initdb ./postgres -E utf8
> pg_ctl -D ./postgres -l logfile start
> rm postgres/postmaster.pid
> brew services restart postgresql
> createdb $(whoami) 
```

* * *

## 回答 #49

> 赞同：0
> 
> 时间：2017-07-09T06:38:30.977

我使用了 Bitnami 堆栈并作为非 root 用户 psql 安装。在使用 psql 时，我确实收到了上述错误。

原来，有 2 个版本的**psql**

1.  linux 发行版中预打包的根级 psql。这指向 /usr/bin/psql
2.  Bitnami 堆栈安装的非根级别 psql。这指向 /bitnami/postgresql/postgresql/bin/psql

您可能想要更改 psql 的别名，使其指向非 root 用户。

```
alias psql='/bitnami/postgresql/postgresql/bin/psql' 
```

以上对我有用`psql -U postgres`

* * *

## 回答 #50

> 赞同：0
> 
> 时间：2019-06-13T22:29:48.357

对于我们来说，我们必须在 psql 命令中定义 localhost，如下所示：

`psql -h localhost -U postgres`

不知道为什么`-h`不默认为`localhost`...

* * *

## 回答 #51

> 赞同：0
> 
> 时间：2017-10-10T02:21:23.843

数据目录包含一个旧的 postmaster.pid 文件 / 数据目录包含一个不可读的 postmaster.pid 文件 PostgreSQL 在数据目录中放置了一个名为 postmaster.pid 的文件来存储 PostgreSQL 服务器进程的进程 ID。如果 PostgreSQL 崩溃，这个文件可能包含一个让 PostgreSQL 感到困惑的旧 pid。您可以通过删除 postmaster.pid 文件来解决此问题。但是，您必须确保 PostgreSQL 确实没有运行。打开活动监视器并确保没有名为“postgres”或“postmaster”的进程。

**如果在 PostgreSQL 运行时删除 postmaster.pid 文件，就会发生不好的事情。**

来源：[https ://postgresapp.com/documentation/troubleshooting.html](https://postgresapp.com/documentation/troubleshooting.html)

* * *

## 回答 #52

> 赞同：0
> 
> 时间：2020-12-15T12:21:55.207

**MacOS Big Sur**似乎将该`Application\ Support`文件夹重命名为`ApplicationSupport`. 所以更新的路径将是：

```
/Users/<USERNAME>/Library/ApplicationSupport/Postgres/var-10 
(or "/var-<YOUR PG VERSION>") 
```

* * *

## 回答 #53

> 赞同：0
> 
> 时间：2022-02-03T15:50:35.003

对我有用的最快解决方案：

1.  在为 postgres 配置的端口中查找已在运行的 postgres 进程

```
lsof -i:5432 
```

2.  找到postgres的进程id并杀死它们

```
kill -9 <pid> 
```

* * *

## 回答 #54

> 赞同：0
> 
> 时间：2020-09-04T11:04:33.037

我有 macOS Catalina (10.15.6) 和 PostgreSQL 12。

当我运行时`brew services start postgresql`，`brew`说它启动 PostgreSQL 没有问题，但是当我得到`ps auxw | grep post`.

**为了解决这个问题**，我`Postgres.app`从[这个链接](https://postgresapp.com/downloads.html)安装，然后安装并按下`Init`按钮。

它会找到您的数据库并将其显示给您。

* * *

## 回答 #55

> 赞同：0
> 
> 时间：2020-03-26T11:32:52.413

我必须修复目录的权限：

```
sudo chmod 0750 /usr/local/var/postgres 
```

* * *

## 回答 #56

> 赞同：0
> 
> 时间：2020-07-20T14:43:23.987

在我的情况下，我正在运行其他项目`docker-compose`，我不得不停止 postgresql`sudo service postgresql stop && docker-compose up -d postgres && docker-compose up rails`

为了在我的新项目中修复这个错误，我只需要运行：`sudo service postgresql restart`然后它就修复了它。

* * *

## 回答 #57

> 赞同：0
> 
> 时间：2021-12-06T23:48:09.630

对于 macOS Monterey，我使用了`brew services restart postgresql`.

```
brew install postgresql
createdb mydb
createdb: error: connection to server on socket "/tmp/.s.PGSQL.5432" failed: No such file or directory
    Is the server running locally and accepting connections on that socket?

brew services restart PostgreSQL
==> Successfully started `postgresql` (label: homebrew.mxcl 
```

* * *

## 回答 #58

> 赞同：0
> 
> 时间：2018-07-16T13:58:52.870

原因之一是确保磁盘大小未满 执行 postmaster -D path of the postgres 命令

* * *

## 回答 #59

> 赞同：0
> 
> 时间：2020-06-26T16:17:40.637

什么对我有用 我在运行时有 2 个版本的 PostgreSQL`brew services list`

```
Name           Status  User           Plist
consul         stopped                
docker-machine stopped                
mysql          stopped                
postgresql     started homebrew.mxcl.postgresql.plist
postgresql@9.6 stopped                
redis          stopped                
runit          stopped                
unbound        stopped                
vault          stopped 
```

刚刚推出了另一个版本`brew services start postgresql@9.6`

# php - Salesforce webservice 通过点击 php 类从数据库获取用户名和令牌

> ID：13410689
> 
> 赞同：1
> 
> 时间：2012-11-16T04:53:52.957
> 
> 标签：php, database, web-services, salesforce

到目前为止，我可以通过从 Salesforce 向 phpscript 发出请求来将数据从 DB 获取到 salesforce。这意味着查询是在 php 类中编写的。所以我们在发出数据请求时将服务器密码保存在 Apex 类中。但我的问题是我想通过不在salesforce端保存密码来使其更安全。所以请你帮我写一个apex类，它将命中phpscript以获得加密令牌。

# c++ - 如何传递python列表地址

> ID：13410691
> 
> 赞同：-1
> 
> 时间：2012-11-16T04:53:58.927
> 
> 标签：c++, python, swig

我想将 c++ 代码转换为 python。我使用 SWIG 创建了一个 python 模块来访问 c++ 类。

现在我想将以下 c++ 代码传递给 Python

C++

```
#define LEVEL 3
  double thre[LEVEL] = { 1.0l, 1.0e+2, 1.0e+5 };
  GradedDouble gd(LEVEL, thre);
  gd.avg(thre); 
```

我需要将上面的代码转换为python

用于生成 python 模块的 C++ 构造函数

```
GradedDouble::GradedDouble(int n, double *thre)
{
  n_ = n;
  for (int i = 0; i < n_; ++i)
  {
    thre_.push_back(thre[i]);
    grade_.push_back(new grade_type());
  }
} 
```

SWIG 接口文件

/* 文件：example.i */

```
%module example
%include typemaps.i
%apply double * INPUT { double *}
%apply double * INPUT { double *buf };

%{
#include "Item.h"
#include "GradedComplex.h"
#include "GradedDouble.h"
void avg(double *buf);
%}

%include <std_string.i>
%include <std_complex.i>
%include "Item.h"
%include "GradedComplex.h"
%include "GradedDouble.h"
%template(Int) Item<int>;
%template(Double) Item<double>;
%template(Complex) Item<std::complex<double> >; 
```

一个示例 python 模块函数

```
class GradedDouble(_object):
    __swig_setmethods__ = {}
    __setattr__ = lambda self, name, value: _swig_setattr(self, GradedDouble, name, value)
    __swig_getmethods__ = {}
    __getattr__ = lambda self, name: _swig_getattr(self, GradedDouble, name)
    __repr__ = _swig_repr
    def __init__(self, *args): 
        this = _example.new_GradedDouble(*args)
        try: self.this.append(this)
        except: self.this = this
    __swig_destroy__ = _example.delete_GradedDouble
    __del__ = lambda self : None;
    def push(self, *args): return _example.GradedDouble_push(self, *args)
    def avg(self, *args): return _example.GradedDouble_avg(self, *args)
GradedDouble_swigregister = _example.GradedDouble_swigregister
GradedDouble_swigregister(GradedDouble) 
```

我该如何转换它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T19:32:05.013

在 SWIG 中使用 raw double * 和 length 作为接口更加困难。您需要为参数对编写一个类型映射，该类型映射可以智能地读取给定大小的数组。更容易使用 SWIG 的内置矢量支持。

示例，具有显示支持：

### GradedDouble.i

```
%module GradedDouble

%{
#include "GradedDouble.h"
%}

%include <std_vector.i>
%include <std_string.i>
%template(DoubleVector) std::vector<double>;
%rename(__repr__) ToString;
%include "GradedDouble.h" 
```

### GradedDouble.h

```
#include <vector>
#include <string>
#include <sstream>

class GradedDouble
{
    std::vector<double> thre_;
public:
    GradedDouble(const std::vector<double>& dbls) : thre_(dbls) {}
    ~GradedDouble() {}
    std::string ToString() const
    {
        std::ostringstream ss;
        ss << "GradedDouble(";
        for(auto d : thre_)
            ss << ' ' << d;
        ss << " )";
        return ss.str();
    }
}; 
```

### 输出

```
>>> import GradedDouble as gd
>>> x=gd.GradedDouble([1.2,3.4,5.6])
>>> x
GradedDouble( 1.2 3.4 5.6 ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T03:50:12.003

另一种方法是使用 SWIG cpointer 和 carrays。示例代码如下：

接口文件：

```
%module example
%include "cpointer.i"
%{
#include "Item.h"
#include "GradedDouble.h"
extern void avg(double *buf);
%}
%pointer_class(double, doublep);

%include "carrays.i"
%array_class(double, doubleArray);
%include <std_string.i>
%include "Item.h"
%include "GradedDouble.h"
%template(Double) Item<double>; 
```

Python代码：

```
LEVEL = 3
thre = [1, 100, 10000]
a = example.doubleArray(LEVEL)
for i in xrange(LEVEL):
    a[i] = thre[i]

gd=example.GradedDouble(LEVEL,a)

result = example.doublep()
gd.avg(result)
print result.value() 
```

这对我有用

# android - android屏幕上有阴影的透明图像

> ID：13410701
> 
> 赞同：0
> 
> 时间：2012-11-16T04:54:49.580
> 
> 标签：android, image, transparent, shadow

我使用 gimp 创建了一个透明图像，并将其用作 Android apk 图标。但是当我在我的 Galaxy S3 上安装 apk 时，在我的屏幕上显示图标时会出现阴影。由于我不能以新用户的身份发布图片，所以我将图片发布在： [http ://www.guangnaqu.com/P1030055.JPG](http://www.guangnaqu.com/P1030055.JPG)

请注意，其他 apk 的图标都可以。图标在 Android 模拟器上也显示正常。

请让我知道如何解决这个问题。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T05:24:36.477

It might be TouchWiz causing the problem.

I had a similar issue in a previous form of TouchWiz where it would make an entirely new color background of its choosing.

1.Edit it with GIMP [http://www.gimp.org/](http://www.gimp.org/) for an invisible background. *just throwing out options JIC it is the image editor*

2.Try to give the background something like a 0.05% Shader background setting that cannot be distinguished by the phone screen, but is seen by the UI.

# php - 使用php从mysql数据库下载的文件被更改

> ID：13410713
> 
> 赞同：1
> 
> 时间：2012-11-16T04:55:55.137
> 
> 标签：php, mysql, file, file-upload, download

我可以将文件上传到 mysql 但是当我下载它时，内容会发生变化.. 例如我有 test.txt

> “你好”

就可以了..当我下载它时，test.txt变成了

> <pre class='xdebug-var-dump' dir='ltr'>string 'sfasfsafasfsaf' *(length=14)* sfasfsafasfsaf

不知道，怎么了。。

这是我下载文件的代码：

```
<?php include("class_lib.php"); 
        $db = new database();
        $db->connect();
    if(isset($_GET["file_id"])){
                    $file_id = $_GET["file_id"];

                    $query = "SELECT filename, filetype, filesize, bin_data " .
                                "FROM file_tbl WHERE id = '$file_id'";

                    $result = mysql_query($query) or die('Error, query failed' . mysql_error());
                    list($filename, $filetype, $filesize, $bin_data) = mysql_fetch_array($result);
                     var_dump($bin_data);  

                    header("Content-length: $filesize");
                    header("Content-type: $filetype");
                    header("Content-Disposition: attachment; filename=$filename");
                    echo $bin_data;

            }
?> 
```

对于图像，它也会下载，但不再有图像了..它只显示`"no preview available"`..这是我上面的下载脚本吗？或者我有这个上传脚本：

```
$fileid = (string) ($lastemp_id + 1);
            $fileName = basename($_FILES['binFile']['name']);
            $extension = pathinfo($fileName, PATHINFO_EXTENSION);
            $fileName .= "_fileid_" . $fileid;
        $fileName = $fileName.".".$extension;
        $tmpName  = $_FILES['binFile']['tmp_name'];
        $fileSize = $_FILES['binFile']['size'];
        $fileType = $_FILES['binFile']['type'];
        $fileDesc = $_POST["txtDescription"];
        $fp      = fopen($tmpName, 'r');
        $content = fread($fp, filesize($tmpName));
        $content = addslashes($content);
                    fclose($fp);

        if(!get_magic_quotes_gpc()){ $fileName = addslashes($fileName); }     

        if (isset($fileName)) {
            $sql = "INSERT INTO file_tbl ";
            $sql .= "(file_desc, bin_data, filename, filesize, filetype) ";
            $sql .= "VALUES ('$fileDesc', '$content',  ";
            $sql .= "'$fileName', '$fileSize', '$fileType')";
            mysql_query($sql, $db->connection) or die('Error: query failed' . mysql_error()); 
            $message =  "File uploaded.<br>"; var_dump($content);
        }
        else $message = "No file uploaded. (opt)"; 
```

这里到底有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T16:11:57.853

请试试这个，如果上传文件是完美的。您可以在插入数据库时​​将二进制数据编码为 64 格式，也可以在下载之前解码。

```
<?php 
ob_start();     
include("class_lib.php");
$db = new database();
$db->connect();
    if(isset($_GET["file_id"])){
          $file_id = $_GET["file_id"];
          $query = "SELECT filename, filetype, filesize, bin_data " .
                            "FROM file_tbl WHERE id = '$file_id'";

          $result = mysql_query($query) or die('Error, query failed' . mysql_error());
          list($filename, $filetype, $filesize, $bin_data) = mysql_fetch_array($result);
          var_dump($bin_data);  
          ob_end_clean();
          header("Content-length: $filesize");
          header("Content-type: $filetype");
          header("Content-Disposition: attachment; filename=$filename");
          echo $bin_data;
          exit;
  } 
```

?>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T04:58:47.990

您正在肆无忌惮地将二进制数据塞入您的数据库，甚至没有一丝[适当的 SQL 转义](http://bobby-tables.com/php)。你期望会发生什么？这个简短的代码示例充满了**严重**的SQL 注入错误，我希望它没有部署在公共互联网上。

为了您自己的安全，您应该立即停止使用陈旧、陈旧、已弃用`mysql_query`的界面，并花一些必要的时间将您的查询切换到 PDO。

如果您使用占位符，就不会遇到这样的问题。

您所看到的可能是您`var_dump`在输出正确内容之前的虚假陈述的结果。

# .net - 带有触发多个更改事件的文本框的 WPF Datagrid Datatemplate 列

> ID：13410715
> 
> 赞同：1
> 
> 时间：2012-11-16T04:56:16.707
> 
> 标签：.net, wpf, datagrid, textbox

我正在使用 wpf datagrid 来编辑销售条目，如数量、折扣等。我正在为每个可编辑列使用 DataTemplateColumn，并在每个列内使用文本框控件。每个文本框都绑定到 DataTable 的不同列。在编辑数量时，我必须计算净数量并更新该列，这是通过更新绑定到网格的数据表来完成的。处理每个可编辑文本框的`textchanged`, `lostfocus`, `gotfocus`, etc 内的所有内容。数据网格选择单元设置为“单元格”。

现在使用这种方法时会出现很多问题。有时`textchanged`模板列中的文本框事件会多次触发，这会使所有计算都出错。

谁能告诉使用数据模板列编辑网格的最佳方法是什么？我必须使用文本框本身，因为我们有一个仅支持文本框的数字键盘控件。为什么`textchanged`事件会触发多次？即使我们垂直滚动网格也会发生这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T10:30:39.003

您可以在文本框上设置 UpdateSourceTrigger = PropertyChanged 并使用[RowEditEnding](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.roweditending.aspx)来确保用户实际上已完成输入。

默认情况下，DataGrid 在编辑行失去焦点之前不会提交更改。此外，TextChanged 在创建 TextBox 控件并最初填充文本时触发。

我猜当你滚动时 TextChanged 会被触发，因为虚拟化正在启动，DataGrid 正在回收行以呈现新对象，并且每个单元格上的文本实际上都在变化。

# jquery - 两个可滚动的 div

> ID：13410717
> 
> 赞同：0
> 
> 时间：2012-11-16T04:56:19.697
> 
> 标签：jquery, html, scrollbar

让我尽我所能解释我想要发生的事情，向你展示我的代码，希望我能得到一些帮助。

所以，我正在尝试从屏幕左侧（就像很多移动应用程序一样）做一个滑动导航 UI。主要内容滑过，在下方显示导航菜单。

虽然在手机上内容基本上完全不在屏幕上，但在桌面上，很多页面都在视线范围内......我会为导航元素和主屏幕启用滚动（当屏幕移动时）。我不知道是否需要一个 jquery 插件？如果是这样，那可能是完全不同的帖子。

无论如何，这是我的小提琴：http: [//jsfiddle.net/2vP67/6/](http://jsfiddle.net/2vP67/6/)

这是帖子中的代码：

**HTML**

```
<div id='wrapper'>
    <div id='navWide'> </div>
    <div id='containerWide'> </div>
    <div id='containerTall'>
        <div id='container'>
            <div id='nav'>
                <div id='navNavigate'> Open Menu </div>
                <div id='navNavigateHide'> Close Menu </div>
            </div>
        </div>
    </div>
    <div id='sideContainerTall'>
        <div id='sideContainer'>
            <div id='sideNav'>Side Navigation </div>
        </div>
    </div>
</div> 
```

**CSS**

```
#wrapper {
    width:100%;
    min-width:1000px;
    height:100%;
    min-height:100%;
    position:relative;
    top:0;
    left:0;
    z-index:0;
}
#navWide {
    color: #ffffff;
    background:#222222;
    width:100%;
    min-width:1000px;
    height:45px;
    position:fixed;
    top:0;
    left:0;
    z-index:100;
}
#containerWide {
    width:100%;
    min-width:1000px;
    min-height:100%;
    position:absolute;
    top:45px;
    z-index:100;
}
#containerTall {
    color: #000000;
    background:#dadada;
    width:960px;
    min-height:100%;
    margin-left:-480px;
    position:absolute;
    top:0;
    left:50%;
    z-index:1000;
}
/***** main container *****/

#container {
    width:960px;
    min-height:585px;
}
#nav {
    color: #ffffff;
    background:#222222;
    width:960px;
    height:45px;
    position:fixed;
    top:0;
    z-index:10000;
}
#navNavigate {
    background:yellow;
    font-size:10px;
    color:#888888;
    width:32px;
    height:32px;
    padding:7px 6px 6px 6px;
    float:left;
    cursor:pointer;
}
#navNavigateHide {
    background:yellow;
    font-size:10px;
    color:#888888;
    width:32px;
    height:32px;
    padding:7px 6px 6px 6px;
    float:left;
    cursor:pointer;
    display:none;
}
#sideContainerTall {
    background:#888888;
    width:264px;
    min-height:100%;
    margin-left:-480px;
    position:absolute;
    top:0;
    left:50%;
    z-index:500;
}
#sideContainer {
    width:264px;
    min-height:585px;
    display:none;
}
#sideContainerTall {
    background:#888888;
    width:264px;
    min-height:100%;
    margin-left:-480px;
    position:absolute;
    top:0;
    left:50%;
    z-index:500;
}
#sideContainer {
    width:264px;
    min-height:585px;
    display:none;
}
#sideNav {
    width:264px;
    height:648px;
    float:left;
} 
```

**Javascript**

```
$(document).ready(function() {

    $('div#navNavigate').click(function() {

        $('div#navNavigate').hide();

        $('div#navNavigateHide').show();

        $('div#sideContainer').show();

        $('div#containerTall').animate({
            'left': '+=264px'
        });
    });

    $('div#navNavigateHide').click(function() {

        $('div#navNavigate').show();

        $('div#navNavigateHide').hide();
        $('div#containerTall').animate({
            'left': '-=264px'
        }, function() {
            $('div#sideContainer').hide();
        });
    });

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T05:37:38.250

使用 css，将其添加到`#sideNav`：

`overflow:auto;`

如果要强制滚动，无论内容是否建议：

`overflow:scroll;`

# c++ - 奇怪的 ATI 与 Nvidia TRIANGLE_STRIP 问题

> ID：13410719
> 
> 赞同：0
> 
> 时间：2012-11-16T04:56:29.837
> 
> 标签：c++, opengl, shader, nvidia, ati

我有这段代码，我正在对我正在使用的引擎进行测试。

在我的 NVIDIA NVS 4200M 上，它按预期显示 GL_TRIANGLE_STRIP。在我的 ATI Radeon 5800 上，它似乎画了一个三角形。

```
shader.begin();

    Matrix4<float> temp = getActiveCamera()->getProjectionMatrix() * getActiveCamera()->getObjectToWorld().fastInverse();

    glUniformMatrix4fv(shader["mvp"], 1, GL_TRUE, temp.getArray());

    glBegin(GL_TRIANGLE_STRIP);

        glVertexAttrib3f(shader["colour"],0,1,0);
        glVertexAttrib3f(shader["coord3d"],-.5,-.5,0); 

        glVertexAttrib3f(shader["colour"],1,1,0);
        glVertexAttrib3f(shader["coord3d"],0.5,-.5,0);

        glVertexAttrib3f(shader["colour"],1,0,1);
        glVertexAttrib3f(shader["coord3d"],-.5,.5,0); 

        glVertexAttrib3f(shader["colour"],0,1,1);
        glVertexAttrib3f(shader["coord3d"],.5,.5,0);

    glEnd();

shader.end(); 
```

这是它在我的两台计算机上的实际外观。

[https://www.dropbox.com/s/sgm2j978tx2ipnp/not%20working.png](https://www.dropbox.com/s/sgm2j978tx2ipnp/not%20working.png)

[https://www.dropbox.com/s/27idv0b8k0p4pcx/working.png](https://www.dropbox.com/s/27idv0b8k0p4pcx/working.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T18:49:56.170

这个问题可以通过移动到更高的 GLSL 版本来解决，我现在使用的是 330，此外我切换到使用 #version 330 使我的所有属性“输入”，使我的变化“输出”并使用布局（位置 = #）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T05:54:31.923

您的相机投影和模型视图矩阵的值是多少？如果它们是标准的（与初始没有变化），您应该向下看 -z 轴，在这种情况下，两个三角形的接缝应该从 (.5, -.5) 到 (-.5, .5) )（从右下角到左上角）。在 ATI 卡的情况下，这是不正确的（它是从左下角到右上角）。如果您实际上是在查看三角形的背面，那么显卡的 OpenGL 驱动程序可能会剔除这些面。如果这是真的，我不希望它画出任何东西，但你永远不知道。

对此的一项测试是调用 glDisable(GL_CULL_FACE) 并查看它是否绘制了您期望的内容。

关于面部剔除的参考资料： [http ://www.khronos.org/opengles/documentation/opengles1_0/html/glCullFace.html](http://www.khronos.org/opengles/documentation/opengles1_0/html/glCullFace.html)

玩得开心，

# css - transform:translateX 与左侧属性的转换。哪个性能更好？CSS

> ID：13410723
> 
> 赞同：21
> 
> 时间：2012-11-16T04:56:56.080
> 
> 标签：css, css-transitions, css-transforms

我正在用 HTML 和 CSS3 制作一个滑出菜单——尤其是过渡。

我想知道水平滑动相对定位的 div 的最佳实践/最佳性能是什么。当我单击一个按钮时，它会向我的 div 添加一个类。哪个班更好？（请注意，我可以稍后添加所有浏览器前缀，并且该站点仅针对现代浏览器）。

```
//option 1
.animate{
    -webkit-transition:all ease 0.3s;
    -webkit-transform:translateZ(200px);
}

//option 2
.animate{
    -webkit-transition:all ease 0.3s;
    left:200px;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-17T16:53:39.657

通过翻译转换在移动设备上的表现要好得多！

编辑：这是一个现场演示。`translateX`带有和的过渡比,和`translateY`平滑得多。 [用于移动设备的 jsFiddle 演示](http://jsfiddle.net/philippkuehn/wLm87/)`top``bottom``left``right`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-27T12:55:03.200

translateX 和 translateY 比 left、right、top、bottom 和 jQuery 动画版本更流畅。有关演示的更详细信息，请参阅此内容：

[http://www.paulirish.com/2012/why-moving-elements-with-translate-is-better-than-posabs-topleft/](http://www.paulirish.com/2012/why-moving-elements-with-translate-is-better-than-posabs-topleft/)

# python - Python数独检查器

> ID：13410733
> 
> 赞同：1
> 
> 时间：2012-11-16T04:58:02.203
> 
> 标签：python, sudoku

我正在为我的 CIS 类在 python 中分配作业。我们必须编写一个数独检查器。在 9x9 板上，我们显然必须检查每一行、每列和 3x3 方格是否有重复。我有点坚持如何用 3x3 正方形检查数字的想法。下面是我检查每一行和每列的代码，如果有人可以用轮廓或方法帮助我一点，只是检查每个 3x3 正方形的东西，那将是惊人的！

```
self.columns = [ ]
     for col in range(9):
        col_tiles = [ ]
        self.columns.append(col_tiles)
        for row in range(9):
            col_tiles.append(self.tiles[row][col])
self.squares = [ ]
for col in range(1, 10, 3):
        for row in range(1, 10, 3):
            square_tiles = [ ]
            self.squares.append(square_tiles)
            for x in range(3):
                for y in range(3):
                    square_tiles.append(self.tiles[x][y]) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T05:28:17.933

这假设您可以自由地按照自己的方式读取数据和结构。我们希望为每个行/列/3x3 网格设置一组唯一值 1-9，因此一种方法是使用`set`比较或列表比较（我们将`set`在此处使用以使其更清晰）。如果我们创建一个等于从 1 到 9 的数字的集合，我们就有了一个可以比较所有其他组的点。假设这样的结构（从[这里](http://www.cross-plus-a.com/data/sudoku32.gif)）：

```
In [1]: r1 = [9,3,2,5,4,8,1,7,6]

In [2]: r2 = [1,8,7,9,2,6,5,4,3]

In [3]: r3 = [5,4,6,3,7,1,2,8,9]

# Continues.... 
```

其中每一行代表一整行数据。现在让我们创建代表前三行的数据部分，拉出一个网格并将内容与我们的集合进行比较：

```
In [4]: sec1 = [r1, r2, r3]

In [5]: nums = set(range(1, 10))

In [6]: nums == set(n for row in sec1 for n in row[:3])
Out[6]: True 
```

这将遍历前三行并返回每行中的前三个元素。为了获得更好的视觉效果，这里是等效的`for`-loop 代码，使其更容易破译：

```
result = set()
for row in sec1:
    for n in row[:3]:
      result.add(n) 
```

由于我们的数字集包括从 1 到 9 的所有数字，因此我们知道它是有效的。要移动到第二个，我们将范围设置`row[:3]`为`row[3:6]`（以及`row[6:9]`之后）。然后，您还需要在接下来的两个部分中处理此问题。我将把它留给你如何将它包装在一个更动态的结构中（注意三的倍数），但希望这会让你开始:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T05:18:04.863

每当你想出一个算法时遇到困难，问问自己：“如果我*能解决这个问题的唯一方法是通过计算机*，我将如何手动解决这个问题”。

换句话说，如果我让你检查左上角的 3x3 网格，你的眼睛只会看左上角并加起来。但如果我说，检查左上角的 3x3 网格，*实际上并没有给你棋盘*，你会说，“好吧，给我左上角的 3x3 网格”。

我会说“怎么样？”

你会说，“想象一下瓷砖按行和列编号。我想要点 (0,0), (0,1), (0,2), (1,0), (1, 1)、(1,2)、(2,0)、(2,1)和(2,2)"

这有帮助吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T05:13:01.007

这是我要做的：创建 3 个字典，一个用于行，一个用于列，一个用于 3x3 方格。

当您遍历数独谜题中的每个元素时，跟踪您的行和列（微不足道），并使用 if 语句来跟踪您所在的 3x3 方格（涉及更多）

然后只需将每个元素发送到相应的行、列和 3x3 方形字典，并在最后进行比较。

这样，您只需检查每个元素一次。

编辑：另外，`set`可能会有用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-28T09:33:52.210

这个功能就可以了。“sample”给出了随机性，因此每次运行时都会得到一个不同的。

```
from random import sample
def generate_sudoku_checker():
    random_list = sample([1,2,3,4,5,6,7,8,9],9)
    random_list = random_list + random_list[:9]
    for i in range(3):
        for j in range(3):
            print(random_list[i+j*3:i+j*3+9]) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-30T22:37:44.813

派对迟到了，但这对我有用：

```
def insert_sudoku():
 puzzle = []
 for i in range(9):
     print("You've entered", len(puzzle), "rows so far")
     row = input("Enter a row")
     if len(row) < 9:
         print("Not enough numbers on this row")
         return insert_sudoku()
     elif len(row) > 9:
         print("Too many numbers. Try again!")
         return insert_sudoku()

    try:
        row = [int(dig) for dig in row]
        puzzle.append(row)
    except:
        print("Whoops, looks like you didn't enter only numbers somewhere. Try again!")
        return insert_sudoku()

validate_entries(puzzle)

def validate_entries(puzzle):

 check = [1, 2, 3, 4, 5, 6, 7, 8, 9]

 b1, b2, b3, b4, b5, b6, b7, b8, b9 = [], [], [], [], [], [], [], [], []

 for i in range(9):
    z = []
    for x in range(9):
        z.append(puzzle[i][x])
    puzzle.append(z)

 for i in range(3):
    b1 += (puzzle[i][:3])
    b4 += (puzzle[i][3:6])
    b7 += (puzzle[i][6:])

 for i in range(3,6):
    b2 += (puzzle[i][:3])
    b5 += (puzzle[i][3:6])
    b8 += (puzzle[i][6:])

 for i in range(6,9):
    b3 += (puzzle[i][:3])
    b6 += (puzzle[i][3:6])
    b9 += (puzzle[i][6:])

 puzzle.append(b1)
 puzzle.append(b2)
 puzzle.append(b3)
 puzzle.append(b4)
 puzzle.append(b5)
 puzzle.append(b6)
 puzzle.append(b7)
 puzzle.append(b8)
 puzzle.append(b9)

 for iter in puzzle:
     if sorted(iter) != check:
         print("No")
         return

     print("Yes")

 insert_sudoku() 
```

受[这篇文章的启发](https://getanadmin.com/python-3-8/sudoku-validator-using-python/)

编辑：缩进可能因复制+粘贴代码而关闭。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-27T13:36:28.097

## 这是我的解决方案：

功能：

```
def check_sudoku(lis):
    n = len(lis)
    digit = 1  #start from one
    while (digit<=n):
        i=0
        while i<n:  # go through each row and column
            row_count=0
            column_count=0
            j=0
            while j < n: # for each entry in the row / column
                if lis[i][j] == digit: # check row count
                    row_count = row_count+1
                if lis[j][i]== digit :
                   column_count = column_count+1

             j=j+1
           if row_count !=1 or column_count!=1:
             return False
           i=i+1 # next row/column
        digit = digit+1 #next digit
return True 
```

# python - Python检测代码中的错误

> ID：13410736
> 
> 赞同：1
> 
> 时间：2012-11-16T04:58:10.543
> 
> 标签：python, error-handling

这段python代码有很多错误，但我想知道是否有人可以具体向我解释“没有找到全局回溯”错误和“self不是第一个方法参数？” 以下分别发生在第 16 行和第 28 行。

```
 1   #! /usr/bin/env python
 2
 3   'Example errors caught by PyChecker'
 4
 5   import string
 6
 7   metaslash = 1
 8
 9   def printNames():
10       neal = 'neal'
11       michelle = 'michele'
12       eric = 5
13       print "Local values: %(neal)S %(michele)s %(eric)" % locals()
14
15   class Nothing:
16       def printValue(value):
17           print value
18       def set(self, value):
19           self.value = value
20
21   def tryToDoSomething(self, value):
22       try:
23           import string
24           if not value:
25               raise RuntimeError, "Hey, there's no value"
26           printNames('a, b, c')
27       except:
28           traceback.print_exc()
29
30   def setGlobal(value=None):
31       print 'Old MetaSlash value is:', metaslash
32       metaslash = value
33       useless = Nothing(5)
34       print 'a useless value is:', useless.valeu 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T04:59:26.907

第 16 行应该是：

```
def printValue(self, value): 
```

在第 28 行，您调用的这个回溯对象是什么？Python 没有找到它。

# c# - 创建队列以处理由 FileSystemWatcher 触发的作业

> ID：13410738
> 
> 赞同：3
> 
> 时间：2012-11-16T04:58:20.523
> 
> 标签：c#, windows, winforms, queue, filesystemwatcher

我已经构建了一个小型托盘应用程序，它将监视一个文件夹，当添加一个新文件时，它会运行一个作业。工作是观看视频文件并使用 handBrakeCli 将它们转换为 .mp4。我已经解决了所有这些逻辑。我遇到的问题是，如果有多个文件，我希望它对作业进行排队，直到前一个文件完成。我对 c# 相当陌生，我不确定处理这个问题的最佳方法。

一个想法是以某种方式创建一个队列，一个用于按顺序存储命令的文件，然后在该过程完成后执行下一个。我们在这里处理大型电影文件，因此可能需要一段时间。我在具有 8GB RAM 的四核上执行此操作，完成一部完整的电影似乎通常需要大约 30 分钟。我只是不知道该怎么做。

这是我到目前为止的代码。这里有一些位用于未来的功能，所以它指的是一些你不会看到的类，但没关系，因为它们没有在这里使用。欢迎任何建议。

```
 public void Watcher()
    {
        FileSystemWatcher watcher = new FileSystemWatcher();

        watcher.Path = textBox1.Text + "\\"; //path to watch
        watcher.Filter = strfilter; //what types to look for set to * and i will filter later as it cant accept an array
        watcher.NotifyFilter = NotifyFilters.FileName | NotifyFilters.DirectoryName; //properties to look at
        watcher.IncludeSubdirectories = true; //scan subdirs
        watcher.Created += new FileSystemEventHandler(OnChanged);

        //TODO: make this only run if the files are of a certain type
        watcher.EnableRaisingEvents = true; // start the watcher
    }

    static bool IsFileLocked(FileInfo file)
    {
        FileStream stream = null;

        try
        {
            stream = file.Open(FileMode.Open, FileAccess.ReadWrite, FileShare.None);
        }
        catch (IOException)
        {
            //the file is unavailable because it is:
            //still being written to
            //or being processed by another thread
            //or does not exist (has already been processed)
            return true;
        }
        finally
        {
            if (stream != null)
                stream.Close();
        }

        //file is not locked
        return false;
    }

    // Define the event handlers. 
    private void OnChanged(object source, FileSystemEventArgs e)
    {
        string sFile = e.FullPath;
        //check that file is available
        FileInfo fileInfo = new FileInfo(sFile);
        while (IsFileLocked(fileInfo))
        {
            Thread.Sleep(500);
        }

        if (System.Diagnostics.Process.GetProcessesByName("HandBrakeCLI").Length != 0)
        {
            Thread.Sleep(500);
        }
        else
        {
            //hbOptions hbCl = new hbOptions();
            //hbCli = hbCl.HbCliOptions();
            if (textBox3.Text != "")
            {
                hbCli = textBox3.Text.ToString();
            }
            else
            {
                hbCli = "-e x264 -q 20 -B 160";
            }
            string t = e.Name;
            string s = t.Substring(0, t.Length - 4); //TODO: fix this its not reliable
            file = e.FullPath;
            string opath = textBox1.Text.ToString();
            cmd = "-i \"" + file + "\" -o \"" + opath + "\\" + s + ".mp4\" " + hbCli;

            try
            {
                for (int i = 0; i < Ext.Count(); i++)
                {
                    if (e.Name.Contains(Ext[i]))
                    {
                        Process hb = new Process();
                        hb.StartInfo.FileName = "D:\\Apps\\Handbrake\\Install\\Handbrake\\HandBrakeCLI.exe";
                        hb.StartInfo.Arguments = cmd;

                        notifyIcon.BalloonTipTitle = "Now Converting";
                        notifyIcon.BalloonTipText = file;
                        notifyIcon.ShowBalloonTip(2000);

                        hb.Start();
                    }
                }
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message);
            }
        }
    }

    private void button1_Click(object sender, EventArgs e) //ok button
    {
        //add each array item to the list 
        for (int i = 0; i < filter.Count(); i++)
        {
            Ext.Add(filter[i]);
        }

        if (textBox1.Text != "" && textBox1.Text.Length > 2)
        {
            Watcher(); //call watcher to run
        }

        this.WindowState = FormWindowState.Minimized;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T05:05:06.257

您想利用 WCF 和 MsmqQueueBinding：

*   服务使用[NetMsmqBinding](http://msdn.microsoft.com/en-us/library/system.servicemodel.netmsmqbinding.aspx)
*   使用内置在 Windows 队列中的称为[MSMQ](http://msdn.microsoft.com/en-us/library/ms789048.aspx)的队列为您实现（您可以使用 MMC snap-it 来控制主要、死信和毒信队列。客户端和服务器 Windows 操作系统都与它捆绑在一起，在[Windows 功能](http://msdn.microsoft.com/en-us/library/aa967729.aspx)中打开它）
*   客户端将进程请求放入队列并忘记它
*   服务自动接收并处理
*   队列是持久的、持久的和事务性的（如果你愿意的话）
*   您可以在同一台机器或另一台 Intranet 服务器上运行队列

请参阅以下精彩教程：

*   [MSMQ、WCF 和 IIS：让它们发挥出色（第 1 部分）](http://blogs.msdn.com/b/tomholl/archive/2008/07/12/msmq-wcf-and-iis-getting-them-to-play-nice-part-1.aspx)
*   [MSMQ、WCF 和 IIS：让它们发挥出色（第 2 部分）](http://blogs.msdn.com/b/tomholl/archive/2008/07/13/msmq-wcf-and-iis-getting-them-to-play-nice-part-2.aspx)
*   [MSMQ、WCF 和 IIS：让他们玩得更好（第 3 部分）](http://blogs.msdn.com/b/tomholl/archive/2008/07/14/msmq-wcf-and-iis-getting-them-to-play-nice-part-3.aspx)

# android - android中用于在社交媒体中共享的公共库？

> ID：13410742
> 
> 赞同：5
> 
> 时间：2012-11-16T04:58:31.890
> 
> 标签：android, facebook, twitter, share

我正在开发一个 android 应用程序，我想在 facebook、twitter、google+ 等中分享一些东西所以我想知道是否有任何公共库可以在所有社交媒体中共享而不是实现单个 sdk 谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T10:55:08.833

有一个免费的公共图书馆可用。我曾经在我的应用程序中集成 facebook、twitter、linkedin、myspace。

该项目还表示，他们希望尽快增加更多的社交客户。

[https://github.com/socialize/socialize-sdk-android](https://github.com/socialize/socialize-sdk-android)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T05:23:03.250

It is always preferable to use Intent with ACTION_SEND.

```
/* Example of sharing an image */
Intent shareIntent = new Intent(Intent.ACTION_SEND);
shareIntent.setType("image/*");
Uri uri = Uri.fromFile(file);
shareIntent.putExtra(Intent.EXTRA_STREAM, uri);
shareIntent.putExtra(Intent.EXTRA_TEXT, "Check out my photo");
startActivity(shareIntent); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T05:03:09.103

我不认为所有人都有一个通用的 SDK。但我建议您使用单独的 SDK，因为他们会不断更新自己的 SDK。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T05:06:26.920

（目前）还没有一个这样的库可以让您在多个社交网络上共享。

最好的解决方案是集成各个 SDK，然后允许用户选择他们想要发布的平台。类似于[TweetDeck 应用程序](https://play.google.com/store/apps/details?id=com.thedeck.android.app&hl=en)。

AFAIK，Google+ 没有具有写入功能的 API / SDK。我相信它们仍然处于*只读*状态。

# c# - 解析 FtpWebRequest 的输出

> ID：13410743
> 
> 赞同：0
> 
> 时间：2012-11-16T04:58:41.930
> 
> 标签：c#, ftp, ftpwebrequest

我可以看到有两种类型的响应：

1.  视窗
2.  Unix

例子

```
"08-25-12  06:52AM            139874418 3.03.06P13.12NB.rar"  
"-r-xr-xr-x   1 owner    group               1 Jun  3  1999 NotCurrentYear.txt" 
```

我需要解析它，我使用了以下逻辑：

```
AnalyzedFolder folderToBeAnalyzed = new AnalyzedFolder();
                folderToBeAnalyzed.Name = folder;
                Job.AnalyzedFolders.Add(folderToBeAnalyzed);

                FtpWebRequest request = (FtpWebRequest)WebRequest.Create(textBoxFTPSite.Text + folder);
                request.Method = WebRequestMethods.Ftp.ListDirectoryDetails;
                request.Credentials = new NetworkCredential(textBoxFTPUserName.Text, textBoxFTPPassword.Text);

                FtpWebResponse response = (FtpWebResponse)request.GetResponse();

                Stream responseStream = response.GetResponseStream();
                StreamReader reader = new StreamReader(responseStream);

                string[] outputlines = reader.ReadToEnd().Split(new string[] { Environment.NewLine }, StringSplitOptions.None);
                foreach (string info in outputlines)
                {
                    var tokens = info.Split(new char[] { ' ' }, StringSplitOptions.RemoveEmptyEntries);

                    string name;
                    string type;
                    string size;
                    DateTime dateModified;
                    string lsLine;

                    if (tokens.Length == 4) //WINDOWS
                    {
                        name = tokens[3];
                        if (tokens[2] == "<DIR>")
                        {
                            type = "D";
                            size = "";
                        }
                        else
                        {
                            type = "F";
                            size = tokens[2];
                        }
                        dateModified = DateTime.ParseExact(tokens[0] + " " + tokens[1], "MM-dd-yy h:mmtt", CultureInfo.InvariantCulture);
                        lsLine = info;
                        FTPFolderEntity entity = new FTPFolderEntity() { FolderName = folder, Name = name, Type = type, Size = size, DateModified = dateModified, LSLine = lsLine };
                        folderToBeAnalyzed.Entities.Add(entity);
                    }
                    else //UNIX
                    {
                    }
                } 
```

问题是对于这个文件：

```
"11-15-12  10:02PM                  324 Copy (10) of 1040.txt.zip" 
```

由于空格，逻辑失败。另外，就像这个错误一样，我怀疑我也可能遇到其他问题。任何人都可以指导我更好的解析方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T05:05:09.500

您可以在此处使用*正则表达式*来删除额外的*Whitesapces*：

```
string info = "11-15-12  10:02PM                  324 Copy (10) of 1040.txt.zip";
string result = Regex.Replace(info, @"\s\s+", " "); 
```

之后你会`result`得到

```
// result = "11-15-12 10:02PM 324 Copy (10) of 1040.txt.zip"; 
```

**ADDED**，如果您想限制您的令牌，假设第一个始终是日期，第二个是时间，其余是您的文件名或其他内容：

```
var tokens = Regex.Split(info, @"\s+");

var newTokens = new string[] 
{ 
    tokens[0], 
    tokens[1], 
    tokens[2],
    tokens[3] + ' ' + tokens[4] + ' ' + tokens[5] + ' ' + tokens[6]
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T05:13:33.183

您可以使用[Regex](http://msdn.microsoft.com/en-us/library/8yttk7sy.aspx)进行拆分。

```
var tokens = Regex.Split(info, @"\s+"); 
```

# c++ - 变量声明必须出现在前面？

> ID：13410744
> 
> 赞同：3
> 
> 时间：2012-11-16T04:58:45.183
> 
> 标签：c++, objective-c, c

我正在看[这个页面](http://people.cs.uchicago.edu/~iancooke/osstuff/ccc.html)，上面写着：

> 在 C++ 中，您几乎可以在程序中的任何位置声明变量。这不是 C 语言的情况。变量必须在函数的开头声明，并且必须在任何其他代码之前声明。这包括循环计数器变量，这意味着您*不能*这样做：

`for(int i = 0; i < 200; i++) {`

> 忘记您不能在任何地方声明变量是程序员从 C++ 迁移到 C 时出现“无法编译”问题的最常见原因之一。

我已经使用了一段时间的 Objective-C，因此使用了 C，并且我对诸如`for(int i = 0; i < 200; i++) {`但 Objective-C严格来说*是*C 的声明没有任何问题，那么这个网页指的是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T05:02:17.277

该网页对 C89 的描述不准确。

在 C89 中，您可以在任何块的顶部（不仅仅是在函数的开头）声明变量，但不能在块中的任何时间点声明变量。

在 C99 及更高版本中，您不必在块的开头声明变量。具体来说，C99 允许您编写：

```
for (int i = 0; i < max; i++) 
```

如果您使用 GCC 但需要保持与 MSVC 的兼容性，那么您可以使用`-Wdeclaration-after-statement`来检测何时在语句之后声明变量（C89 不允许这样做）。

Objective C 大概使用 C99 而不是 C89 作为它扩展的标准，因此它允许在需要时声明变量。

# python - 如何从 CSV 中提取命名列？

> ID：13410746
> 
> 赞同：3
> 
> 时间：2012-11-16T04:58:48.810
> 
> 标签：python, csv

我有一个包含大约 50 列的 csv 文件，但我只需要大约 10 列。我希望能够从该 csv 文件中提取我需要的列到一个新的 csv 文件中。

这篇文章的最佳答案[如何删除 CSV 文件中的列？](https://stackoverflow.com/questions/7588934/deleting-columns-in-a-csv-with-python)看起来它会完全满足我的需要。

但这是我每天都需要做的事情，生成大 CSV 文件的系统可以以不同的顺序导出列。所以我需要能够通过名称而不是数字来指定我需要的列。

以下是 CSV 文件的指示：

文件 1.csv

```
name, description, cost, image, date
ABC, "super, mega", 12.87, ./imagefile, "12/11/2012 08:12" 
```

文件2.csv

```
name, cost, date, description, image
SYZ, 43.98, "16/11/2012 09:16", "Some text, and such", ./image2.jpeg 
```

我只想保留名称、描述和图像字段，但如果我使用代码（由[@S.Lott](https://stackoverflow.com/users/10661/s-lott)从上面的帖子派生）：

```
import csv
with open("source","rb") as source:
rdr= csv.reader( source )
with open("result","wb") as result:
    wtr= csv.writer( result )
    for r in rdr:
        wtr.writerow( (r[0], r[1], r[3]) ) 
```

它仅适用于第一个文件，而不适用于第二个文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T05:06:03.317

[使用DictReader](http://docs.python.org/2/library/csv.html#csv.DictReader)类读取它，然后您可以按名称而不是按索引写出字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T09:33:23.363

使用[pandas](http://pandas.pydata.org/)的优势在于，不仅可以轻松地以不同格式打开和保存文件以及修改列和行，还因为您还可以根据需要修改、计算和使用数据。

要获得包含选定列的 csv 文件，非常简单：

```
import pandas as p

df = p.read_csv('File2.csv')  # reads your csv file as a table (dataframe object)

df2 = df[['cost', 'date']]    # selects two of the columns in your file

df2.to_csv('my_out.csv')      # saves again in csv format 
```

# css - CSS 位置/高度 - 100% 的页面与屏幕

> ID：13410747
> 
> 赞同：1
> 
> 时间：2012-11-16T04:59:02.340
> 
> 标签：css, height, percentage

所以，我遇到了 CSS 定位/高度的问题

所以，我正在尝试从屏幕左侧（就像很多移动应用程序一样）做一个滑动导航 UI。主要内容滑过，在下方显示导航菜单。

我相信与定位有关，我无法正常工作。我最终希望 100% 的高度表示整个页面的 100%。目前，只有内容较多的项目才会展开，较短的项目会在屏幕边缘停止（因此它们是 100% 的屏幕与整个页面）。

无论如何，这是我的小提琴：http: [//jsfiddle.net/2vP67/6/](http://jsfiddle.net/2vP67/6/)

这是帖子中的代码：

**HTML**

```
<div id='wrapper'>
    <div id='navWide'> </div>
    <div id='containerWide'> </div>
    <div id='containerTall'>
        <div id='container'>
            <div id='nav'>
                <div id='navNavigate'> Open Menu </div>
                <div id='navNavigateHide'> Close Menu </div>
            </div>
        </div>
    </div>
    <div id='sideContainerTall'>
        <div id='sideContainer'>
            <div id='sideNav'>Side Navigation </div>
        </div>
    </div>
</div> 
```

**CSS**

```
#wrapper {
    width:100%;
    min-width:1000px;
    height:100%;
    min-height:100%;
    position:relative;
    top:0;
    left:0;
    z-index:0;
}
#navWide {
    color: #ffffff;
    background:#222222;
    width:100%;
    min-width:1000px;
    height:45px;
    position:fixed;
    top:0;
    left:0;
    z-index:100;
}
#containerWide {
    width:100%;
    min-width:1000px;
    min-height:100%;
    position:absolute;
    top:45px;
    z-index:100;
}
#containerTall {
    color: #000000;
    background:#dadada;
    width:960px;
    min-height:100%;
    margin-left:-480px;
    position:absolute;
    top:0;
    left:50%;
    z-index:1000;
}
/***** main container *****/

#container {
    width:960px;
    min-height:585px;
}
#nav {
    color: #ffffff;
    background:#222222;
    width:960px;
    height:45px;
    position:fixed;
    top:0;
    z-index:10000;
}
#navNavigate {
    background:yellow;
    font-size:10px;
    color:#888888;
    width:32px;
    height:32px;
    padding:7px 6px 6px 6px;
    float:left;
    cursor:pointer;
}
#navNavigateHide {
    background:yellow;
    font-size:10px;
    color:#888888;
    width:32px;
    height:32px;
    padding:7px 6px 6px 6px;
    float:left;
    cursor:pointer;
    display:none;
}
#sideContainerTall {
    background:#888888;
    width:264px;
    min-height:100%;
    margin-left:-480px;
    position:absolute;
    top:0;
    left:50%;
    z-index:500;
}
#sideContainer {
    width:264px;
    min-height:585px;
    display:none;
}
#sideContainerTall {
    background:#888888;
    width:264px;
    min-height:100%;
    margin-left:-480px;
    position:absolute;
    top:0;
    left:50%;
    z-index:500;
}
#sideContainer {
    width:264px;
    min-height:585px;
    display:none;
}
#sideNav {
    width:264px;
    height:648px;
    float:left;
} 
```

**Javascript**

```
$(document).ready(function() {

    $('div#navNavigate').click(function() {

        $('div#navNavigate').hide();

        $('div#navNavigateHide').show();

        $('div#sideContainer').show();

        $('div#containerTall').animate({
            'left': '+=264px'
        });
    });

    $('div#navNavigateHide').click(function() {

        $('div#navNavigate').show();

        $('div#navNavigateHide').hide();
        $('div#containerTall').animate({
            'left': '-=264px'
        }, function() {
            $('div#sideContainer').hide();
        });
    });

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T05:29:36.637

就此而言，设置相对于浏览器窗口的`height`to或任何百分比值是非法的。`100%`这是因为高度不能设置为百分比的函数，因为理论上浏览器窗口可以通过滚动条一直显示。有点奇怪的怪癖。实现这一目标的唯一方法是通过 javascript。

```
height = window.innerHeight;

getElementById('wrapper').style.height = height; 
```

# php - PDO 转义斜线

> ID：13410748
> 
> 赞同：1
> 
> 时间：2012-11-16T04:59:23.323
> 
> 标签：php, mysql, date, pdo

> **可能重复：**
> [将 MMDDYYYY 转换为 PHP](https://stackoverflow.com/questions/8851899/convert-mmddyyyy-to-date-for-php)
> [PHP mysql 插入日期格式的日期](https://stackoverflow.com/questions/12120433/php-mysql-insert-date-format)

我用来`PDO`在我的数据库中插入数据，但是我有一个`date`表格，这是代码的一部分：

```
$name = "John Doe"; // from form
$bdate = 05/13/1989; // from form

$query = "INSERT INTO details (name, bdate) VALUES (:name, :bdate)";
$stmt = $this->handle->prepare($query);
$stmt->bindParam(':name',$name,PDO::PARAM_STR);
$stmt->bindParam(':bdate',$bdate,PDO::PARAM_STR);
$stmt->execute(); 
```

运行脚本后，我在日志中遇到此错误：***"SQLSTATE[22007]: Invalid datetime format: 1292 Incorrect date value: '05/13/1989' for column 'bdate' at row 1"***。

我的数据库：

```
+-------+--------------+
| name  | varchar(100) |
+-------+--------------+
| bdate |    date      |
+-------+--------------+ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T05:02:03.910

MySQL 通常需要`YYYY-MM-DD`格式中的日期。最好将您的削减日期转换为该日期。

这不是转义斜杠的问题，因为斜杠一开始就没有转义。只有那些可能破坏你的字符串转义的东西才会被改变。显然 MYSQL 正在获取正确的字符串，但由于格式问题而拒绝它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T08:20:45.330

要将日期输入数据库，它需要是 YYYY-MM-DD，或者在您的情况下是 1989-05-13。只需创建一个以正确顺序交换日期的函数。

```
function swap_date($date) {
  $newDate = explode("/", $date);
  return "{$newDate[2]}-{$newDate[0]}-{$newDate[1]}";
} 
```

//-------------

```
$name = "John Doe";
$bdate = swap_date("05/13/1989"); // swap_date($_GET['date']) or whatever you use

$query = "INSERT INTO details (name, bdate) VALUES (:name, :bdate)";
$stmt = $this->handle->prepare($query);
$stmt->bindParam(':name',$name,PDO::PARAM_STR);
$stmt->bindParam(':bdate',$bdate,PDO::PARAM_STR);
$stmt->execute(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T07:51:54.557

在将任何内容插入数据库之前，您最好确保它不包含“，/，'等字符，因此创建一个添加或条纹斜杠并返回无风险字符串以插入数据库的函数是一个更好的主意。所以你什么你可以做的是，

```
$bdate = 05/13/1989;
$bdate = mysql_prep($bdate);

function mysql_prep($value) {
    $magic_quotes_active = get_magic_quotes_gpc();
    $new_enough_php = function_exists("mysql_real_escape_string"); // PHP >= v4.3.0
    if ($new_enough_php) {
        if ($magic_quotes_active) {
            $value = stripslashes($value);
        }
        $value = mysql_real_escape_string($value);
    } else { // before PHP v4.3.0
        if (!$magic_quotes_active) {
            $value = addslashes($value);
        }
    }
    return $value;
} 
```

# php - PHP在一个函数中验证必填字段+年龄验证

> ID：13410750
> 
> 赞同：1
> 
> 时间：2012-11-16T04:59:25.960
> 
> 标签：php, validation, required, date

我有一个带有所需出生日期字段的注册表。

```
 <tr>
      <td><span class="required">*</span> <?php echo $entry_dob; ?></td>
      <td><input type="text" id="dob" name="dob" value="<?php echo $dob; ?>"   /><p id="age"></p>
        <?php if ($error_dob) { ?>
        <span class="error"><?php echo $error_dob; ?></span>
        <?php } ?> 
```

因此，在我的 php 控制器文件 [我正在使用用 MVC 编码的软件] 中，我具有以下功能来使该字段成为必填项：

```
 if ((strlen(utf8_decode($this->request->post['dob'])) < 3) || (strlen(utf8_decode($this->request->post['dob'])) > 32)) {
        $this->error['dob'] = $this->language->get('error_dob');
    } 
```

我还需要验证用户是否至少 19 岁。如果他/她不是，则会显示错误，我在同一个 php 控制器文件中使用以下函数来实现这一点：

```
$allowed_age = 19;
$bdate = strtotime($_REQUEST['dob']);
$age = (time()-$bdate)/31536000;
if($age < $allowed_age) {
 $this->error['dob'] = $this->language->get('error_dob');
} 
```

我已经对其进行了测试，它似乎工作正常。但是，我想知道如何同时验证这两件事。我的意思是，验证用户是否输入了出生日期，以及年龄是否超过 19 岁。

我不是专家，所以如果您知道实现此目的的更好方法，请分享。

此致，

Codekmarv

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T05:17:57.330

用这个来获取年龄

```
$age = floor( (strtotime(date('Y-m-d')) - strtotime($this->request->post['dob'])) / 31556926); 
```

然后`$age`取值并在 if 条件下检查它

```
if (((strlen(utf8_decode($this->request->post['dob'])) < 3) || (strlen(utf8_decode($this->request->post['dob'])) > 32)) 
&& $age < 19) {
    $this->error['dob'] = $this->language->get('error_dob');
} 
```

它将检查用户是否输入了一个值并且年龄是否大于 19。

您必须使用`&&`运算符来检查多个条件。

# windows-7 - windows7中的“gdb.exe已停止工作”

> ID：13410752
> 
> 赞同：6
> 
> 时间：2012-11-16T04:59:29.900
> 
> 标签：windows-7, build, gdb

我使用and for windows`GDB for ARM`从 GDDBSources( ) 构建。但有时在连接到时，GDB 崩溃并出现以下消息：`GDB7.5``MinGW``MSYS``GDB``QEMU`

`"gdb.exe has stopped working"`在windows7中。

这个问题的解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-12-27T04:01:45.220

我以前也有同样的情况。解决方案是在 Windows 7 中使用 mingw-w64 代替 MinGW。它对我来说效果很好。

# sql-server - 在不使用游标的情况下将类别带入表格行

> ID：13410753
> 
> 赞同：-1
> 
> 时间：2012-11-16T04:59:30.283
> 
> 标签：sql-server, sql-server-2008, tsql

我有一个包含 3 列的表：

```
NameColumn  CategoryColumn  QuantityColumn
Name1       Category1   5
Name2       Category1   8
Name3       Category1   10
Name4       Category2   3
Name5       Category2   15
Name6       Category2   7 
```

我需要编写一个查询将上述数据转换为以下结果集：

```
NameColumn  CategoryColumn  QuantityColumn
Category1   NULL        NULL
Name1       NULL        5
Name2       NULL        8
Name3       NULL        10
Category2   NULL        NULL
Name4       NULL        3
Name5       NULL        15
Name6       NULL        7 
```

无论如何不使用游标来做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T05:03:43.863

```
SELECT NameColumn, CategoryColumn, QuantityColumn
FROM
(
    SELECT CategoryColumn AS NameColumn, NULL AS CategoryColumn, NULL AS QuantityColumn,
        CategoryColumn AS _cat, 1 AS _iscat
    FROM myTable
    GROUP BY CategoryColumn
    UNION ALL
    SELECT NameColumn, NULL AS CategoryColumn, QuantityColumn, 
        CategoryColumn AS _cat, 0 AS _iscat
    FROM myTable
) x
ORDER BY _cat, _iscat DESC 
```

[SQL 小提琴示例](http://www.sqlfiddle.com/#!3/cca43/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T05:07:17.090

您可以，但除非您将元数据列添加到输出中，否则它不会有太大用处。

```
 select NameColumn, CategoryColumn, QuantityColumn, 0 IsCategory
    from tbl
   union all
  select distinct CategoryColumn, CategoryColumn, null, 1
    from tbl
order by CategoryColumn, IsCategory desc, NameColumn; 
```

当然，要获得准确的输出顺序，您可以省略某些列并将其设为 NULL，例如

```
 select NameColumn, NULL as CategoryColumn, QuantityColumn
    from (
  select NameColumn, CategoryColumn, QuantityColumn, 0 IsCategory
    from tbl
   union all
  select distinct CategoryColumn, CategoryColumn, null, 1
    from tbl
         ) X
order by X.CategoryColumn, IsCategory desc, NameColumn; 
```

但是，如果您打算在 SQL Server 之外使用数据，则需要保留元数据以将名称和类别与它们来自的原始类别相关联。IsCategory 还可用于识别从 CategoryColumn 中挑选出来的标题。

# node.js - 我想在日志语句中显示文件名

> ID：13410754
> 
> 赞同：21
> 
> 时间：2012-11-16T04:59:31.950
> 
> 标签：node.js, logging, winston

对于任何级别的每个记录器语句，我都需要显示执行日志语句的文件名，下面是我在下面给出的说明：

示例：下面是从**JobWork.js执行的行**

```
logger.info("getInCompleteJobs in job works"); 
```

实际的 ：

```
2012-11-05T06:07:19.158Z - info: getInCompleteJobs in job works 
```

必需的 ：

```
2012-11-05T06:07:19.158Z - info JobWork.js : getInCompleteJobs in job works 
```

如果不将文件名作为日志语句中的参数传递，它应该给出文件名。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2014-11-25T15:33:17.790

看起来您在这里使用的是 Winston - 我通常会传入`module`我的记录器模块，然后将 Winston 的`label`属性设置为`module.filename`. 就像是：

logger.js：

```
const path = require('path');

// Return the last folder name in the path and the calling
// module's filename.
const getLabel = function(callingModule) {
  const parts = callingModule.filename.split(path.sep);
  return path.join(parts[parts.length - 2], parts.pop());
};

module.exports = function (callingModule) {
  return new winston.Logger({
    transports: [new winston.transports.Console({
      label: getLabel(callingModule)
    })]
  });
}; 
```

用法（假设模块是`controllers/users.js`）：

```
const logger = require('./logger')(module);
logger.info('foo'); 
```

结果：

```
2014-11-25T15:31:12.186Z - info: [controllers/users.js] foo 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-11-16T06:22:59.160

您可以使用附加到 v8`Error`对象的堆栈跟踪信息来找出调用代码的文件/行。这种方法效果很好，但效果不佳；所以如果你在开发过程中使用它，你会希望在生产时禁用它。

所以你可以做这样的事情：

```
 var logger_info_old = logger.info;
  logger.info = function(msg) {
    var fileAndLine = traceCaller(1);
    return logger_info_old.call(this, fileAndLine + ":" + msg);
  }

  /**
  * examines the call stack and returns a string indicating 
  * the file and line number of the n'th previous ancestor call.
  * this works in chrome, and should work in nodejs as well.  
  *
  * @param n : int (default: n=1) - the number of calls to trace up the
  *   stack from the current call.  `n=0` gives you your current file/line.
  *  `n=1` gives the file/line that called you.
  */
  function traceCaller(n) {
    if( isNaN(n) || n<0) n=1;
    n+=1;
    var s = (new Error()).stack
      , a=s.indexOf('\n',5);
    while(n--) {
      a=s.indexOf('\n',a+1);
      if( a<0 ) { a=s.lastIndexOf('\n',s.length); break;}
    }
    b=s.indexOf('\n',a+1); if( b<0 ) b=s.length;
    a=Math.max(s.lastIndexOf(' ',b), s.lastIndexOf('/',b));
    b=s.lastIndexOf(':',b);
    s=s.substring(a+1,b);
    return s;
  } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-16T06:10:25.997

假设每个文件都是一个单独的节点进程，您可以使用类似`process.argv[1].match(/[\w-]+\.js/gi)[0]`

如果您正在寻找可以在模块中使用的东西，这可能会起作用：

```
process.mainModule.filename.match(/[\w-]+\.js/gi)[0] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-06-25T08:38:11.107

带有“consola”包的解决方案（仅限 ES 模块）：

```
import { createLogger } from '@nitra/consola'
consola = createLogger(import.meta.url)

consola.debug('TEST') 
```

输出：

```
[my-file.js] › TEST 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-13T07:23:32.563

使用此代码，它将为您提供带有文件名和行号的日志。将此代码粘贴到新文件中`winston.js`，这需要此文件才能使用它。

```
var winston = require('winston')
var path = require('path')
var PROJECT_ROOT = path.join(__dirname, '..')
var appRoot = require('app-root-path');

const options = {
  file: {
    level: 'info',
    filename: `${appRoot}/logs/app.log`,
    handleExceptions: true,
    json: true,
    maxsize: 5242880, // 5MB
    maxFiles: 5,
    colorize: false,
    timestamp: true
  },
  console: {
    level: 'debug',
    handleExceptions: true,
    json: true,
    colorize: true,
    timestamp: true
  }
};

var logger = new winston.Logger({
  transports: [
    new winston.transports.File(options.file),
    new winston.transports.Console(options.console)
  ],
  exitOnError: false // do not exit on handled exceptions
});

logger.stream = {
  write: function (message) {
    logger.info(message)
  }
}

// A custom logger interface that wraps winston, making it easy to instrument
// code and still possible to replace winston in the future.

module.exports.debug = module.exports.log = function () {
  logger.debug.apply(logger, formatLogArguments(arguments))
}

module.exports.info = function () {
  logger.info.apply(logger, formatLogArguments(arguments))
}

module.exports.warn = function () {
  logger.warn.apply(logger, formatLogArguments(arguments))
}

module.exports.error = function () {
  logger.error.apply(logger, formatLogArguments(arguments))
}

module.exports.stream = logger.stream

/**
 * Attempts to add file and line number info to the given log arguments.
 */
function formatLogArguments (args) {
  args = Array.prototype.slice.call(args)

  var stackInfo = getStackInfo(1)

  if (stackInfo) {
    // get file path relative to project root
    var calleeStr = '(' + stackInfo.relativePath + ':' + stackInfo.line + ')'

    if (typeof (args[0]) === 'string') {
      args[0] = calleeStr + ' ' + args[0]
    } else {
      args.unshift(calleeStr)
    }
  }

  return args
}

/**
 * Parses and returns info about the call stack at the given index.
 */
function getStackInfo (stackIndex) {
  // get call stack, and analyze it
  // get all file, method, and line numbers
  var stacklist = (new Error()).stack.split('\n').slice(3)

  // stack trace format:
  // http://code.google.com/p/v8/wiki/JavaScriptStackTraceApi
  // do not remove the regex expresses to outside of this method (due to a BUG in node.js)
  var stackReg = /at\s+(.*)\s+\((.*):(\d*):(\d*)\)/gi
  var stackReg2 = /at\s+()(.*):(\d*):(\d*)/gi

  var s = stacklist[stackIndex] || stacklist[0]
  var sp = stackReg.exec(s) || stackReg2.exec(s)

  if (sp && sp.length === 5) {
    return {
      method: sp[1],
      relativePath: path.relative(PROJECT_ROOT, sp[2]),
      line: sp[3],
      pos: sp[4],
      file: path.basename(sp[2]),
      stack: stacklist.join('\n')
    }
  }
} 
```

# spring - 如何将“/test/test”映射到控制器的方法，该方法映射到“/test”？

> ID：13410757
> 
> 赞同：0
> 
> 时间：2012-11-16T05:00:08.323
> 
> 标签：spring, model-view-controller, controller, annotations

我对 Spring`@RequestMapping`注释的行为感到困惑。在下面的代码中，`test()`被映射到`"/test"`并被`test_test()`映射到`"/test/test/test"`. 这里发生了什么？如果我想映射`test()`到，我该怎么办`"/test/test"`？

```
package com.mvc.spring;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;

@Controller
@RequestMapping(value = "/test")
public class Test {
    @RequestMapping(value = "/test", method = RequestMethod.GET)
    String test() {
        return "test";
    }

    @RequestMapping(value = "/test/test", method = RequestMethod.GET)
    String test_test() {
        return "test";
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T06:23:52.990

Spring 是故意这样做的；当方法和类型级别的请求映射模式值匹配时，它只使用其中之一。@看`org.springframework.util.AntPathMatcher#combine()`

一种方法是在方法级别为 RequestMapping 值添加“/”后缀（如下所示），这样您就可以将`"/test/test/"`其用作 url（当然是 N **​​OT** `/test/test`）。

```
@Controller
@RequestMapping(value = "/test")
public class Test {
    @RequestMapping(value = "/test/", method = RequestMethod.GET)
    String test() {
        return "test";
    }
} 
```

不知道为什么没有记录。

所以，我认为匹配`"/test/test"`url 的唯一剩余方法是使用 URI 模板模式。

```
@Controller
@RequestMapping(value = "/test")
public class Test {
    @RequestMapping(value = "/{anythinghere}", method = RequestMethod.GET)
    String test() {
        return "test";
    }
} 
```

# makefile - 如何添加所有规则来处理任务 A（然后）-> 任务 B

> ID：13410762
> 
> 赞同：0
> 
> 时间：2012-11-16T05:00:57.323
> 
> 标签：makefile

我有

```
todo:   $(SRC)
    $(CC) -o todo $^ $(CFLAGS)

ctodo:  $(LIBS)
    $(CC) ${INCLUDES} -c -o todo.a $^ $(CFLAGS) 
```

我希望有某种`all`默认情况下将首先构建库并在它之后构建待办事项。

都一样**： ctodo -> todo**（在伪代码中） 如何制作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T12:54:56.597

你的问题有点不清楚，但总的来说，让 Make 执行规则的方法是让一个成为另一个的先决条件：

```
.PHONY: all
all: todo

todo: $(SRC) | ctodo
$(CC) -o todo $^ $(CFLAGS)

ctodo:  $(LIBS)
$(CC) ${INCLUDES} -c -o todo.a $^ $(CFLAGS) 
```

（我已经使用了，`|`所以`ctodo`不会出现在`$^`.）

# sorting - 从行已排序的 nxm 数组中以升序打印数字

> ID：13410763
> 
> 赞同：3
> 
> 时间：2012-11-16T05:01:02.507
> 
> 标签：sorting, matrix, merge, complexity-theory

我们有一个 nxm 矩阵，其行已排序，我们需要按升序打印矩阵中的数字。列不必排序。我想到的解决方案是简单地合并矩阵中的行，将它们视为单独的列表（基本上是合并排序中的合并步骤），在合并排序中需要 O(n)。我想知道在这种情况下合并 n 个单独的数组的复杂性是什么。我认为这将是 O(nxm) 但我不确定。

另外，按升序打印数字的更好方法是什么？一次合并 n 个列表还是一次合并 2 个列表，直到我们考虑所有行？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T06:25:20.710

`What would be complexity? Its all depends how do you merge N arrays of M size!`

**合并的复杂性：**

*   合并两个排序`M`大小的数组是按顺序进行的。所以这一步的复杂度是O(2M)。

> 对于**`N rows`**where**`each row is sorted`**和**contains`M`元素。**

**如果这样做（线性合并）：**

*   首先合并两行——你会得到 middle `2M size sorted array`。
*   `2M array`与另一个`row of N size`matix合并——你会得到`3M size sorted array`.

以这种方式合并`takes N steps`和`complexity would be O(N*M)`.

**更好的方法（分治法）：**

*   首先合并所有连续两行的对 (1,2), (3,4) 这给你 N/2 对 2M 大小。在下一步中成对合并。如下所述。

*   首先制作一对两行和`merge all N/2 pairs first and merge them`。
    例如对行（1,2）；行（3,4）；row(5,6) ......你会得到`= N/2 pairs each of 2M size`.

*   现在在下一步，`make pair of two merged arrays each of size 2M from previous step`然后合并它们——你将`get N/4 sorted array of 4M size`.（（将 2M 与其他 2M 数组合并 -> 4M，复杂度为 O(2M + 2M) = O(4M)）

逐步合并所有这些中间件`sorted arrays util you gets a single sorted array of size N*M`。并且这个时间复杂度将是**M*N*log(N)**作为 total `steps required is log(N)`。

我想建议您学习[合并排序及其复杂性。](http://www.slideshare.net/Ghaffar/sorting-presentation-791993)

# jquery - 如何在 colorbox 或 fancybox 中添加菜单（导航）

> ID：13410766
> 
> 赞同：0
> 
> 时间：2012-11-16T05:01:40.083
> 
> 标签：jquery, html, css, jquery-plugins, colorbox

我正在尝试缩放像彩盒这样的图像。我使用了 Jack Moore 的 colorbox[插件](http://www.jacklmoore.com/colorbox/example2/)。尽管显示标题，但我正在尝试在图像顶部实现锚标记。在这里，我将锚标记的示例显示为 item1、item2、...item5。如果我选择了一个项目，则必须更改图像。

![截屏](../Images/e7449513eac6f6fbdd1bb0e5e763d18b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T03:52:18.527

如果您要替换标题，colorbox 的 title 属性接受 HTML 输入，因此它可以是您想要的任何内容。例子：

```
$('a.example').colorbox({title:"<p>Hello</p>"}); 
```

# javascript - 运行 node.js 文件时出现语法错误

> ID：13410767
> 
> 赞同：0
> 
> 时间：2012-11-16T05:01:50.120
> 
> 标签：javascript, ajax, node.js, syntax-error

伙计们，我正在研究 Editinplace 功能，在运行时我在 chrome 控制台上收到此错误，`Uncaught SyntaxError: Unexpected token <`我正在使用 node.js 片段执行此操作，如下所示

```
case '/':
res.writeHead(302,{'location':'http://localhost/editinplace/index.html'});
res.end();
break;
case '/save':
console.log("called");

    console.log("Inside called");
    res.write('_testcb(\'{"message": "Hello world!"}\')');
res.writeHead(302,{'location':'http://localhost/editinplace/save.html'});

res.end();
break; 
```

index.html 的代码如下

```
<script type="text/javascript">
$(document).ready(function(){
setClickable();
});
function setClickable() {
$('#editInPlace').click(function() {
var textarea = '<div><textarea rows="10" cols="60">'+$(this).html()+'</textarea>';
var button = '<div><input type="button" value="SAVE" class="saveButton" /> OR <input type="button" value="CANCEL"class="cancelButton" /></div></div>';
var revert = $(this).html();
$(this).after(textarea+button).remove();
$('.saveButton').click(function(){saveChanges(this, false);});
$('.cancelButton').click(function(){saveChanges(this, revert);});
})
.mouseover(function() {
$(this).addClass("editable");
})
.mouseout(function() {
$(this).removeClass("editable");
});
};//end of function setClickable
function saveChanges(obj, cancel) {
if(!cancel) {
var t = $(obj).parent().siblings(0).val();
var data=t;
 $.ajax({
        url: 'http://localhost:9090/save',
        type:"GET",
        dataType: "jsonp",
        jsonpCallback: "_testcb",
        cache: true,
        timeout: 1000,
        data:{data:JSON.stringify(data)},
        success: function(data) {
        },
        error: function(jqXHR, textStatus, errorThrown) {
        }
    });
}
else {
var t = cancel;
}
$(obj).parent().parent().after('<div id="editInPlace">'+t+'</div>').remove() ;
}
</script>
</head>
<body>
<div id="editInPlace">Nilesh</div>
</body> 
```

save.html 是包含在标签中的简单文本。`<pre>`错误显示在 save.html 第 1 行中。感谢您的努力。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T06:38:47.750

好的，这就是发生的事情：

*   浏览器加载 index.html
*   用户编辑字段并单击保存
*   `saveChanges`发出 AJAX GET 请求`/save`
*   您的服务器代码发送带有 302 状态代码和 jsonp 正文的 HTTP 响应
*   我认为浏览器正在透明地处理 302 状态码并忽略正文
*   因此，您的 jquery 代码期望您的 javascript 来自 的响应正文`/save`，但它实际上是从`/save.html`. 这就是语法错误发生的地方，当 jquery 尝试将该 HTML 评估为 javascript 时，因为您告诉它`dataType`was `jsonp`。

另请参阅[有关浏览器自动处理重定向的问题](https://stackoverflow.com/questions/199099/how-to-manage-a-redirect-request-after-a-jquery-ajax-call)

解决方案是您需要发送一个 200 响应代码，以便 jquery 可以执行 jsonp 操作，然后您可以根据需要更改`window.location`为`/save.html`。

# mysql - 事件调度程序不起作用

> ID：13410772
> 
> 赞同：2
> 
> 时间：2012-11-16T05:02:22.303
> 
> 标签：mysql

`create event del on schedule every 5 minute starts '2012-11-16 10:20:23' do delete from purchased limit 1;`

根据我的上述查询，每 5 分钟从购买的表中删除 1 行，但是，此事件没有结果

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T05:17:59.913

将**event_scheduler**变量设置为 ON 状态。运行此语句：

```
SET GLOBAL event_scheduler = 'ON' 
```

或更新**my.ini**文件：

```
event_scheduler=ON 
```

# asp.net - 如何允许用户通过 Windows Server 2003 上的网页下载文件

> ID：13410773
> 
> 赞同：1
> 
> 时间：2012-11-16T05:02:22.610
> 
> 标签：asp.net

我在 iis6、window server 2003 上有一个网页部署，我想让用户可以从网页下载一些文件，我将此文件存储在备份文件夹中。我将 NETWORK SERVICE 用户添加到文件夹中，但我仍然无法下载此文件

很简单，我有一个文件，我希望用户可以通过链接下载：[http ://www.aitapgdtrh.edu/Backup/SaoLuu13112012_1435.bak](http://www.aitapgdtrh.edu/Backup/SaoLuu13112012_1435.bak)

显示错误：找不到页面

HTTP 错误 404 - 找不到文件或目录。互联网信息服务 (IIS)

请帮我配置下载，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T11:15:35.147

我找到了我的问题的答案：它是：

打开 IIS，右键单击，选择属性。在组 MIME 类型中，单击新闻，

添加：

扩展名：.bak

MIME 类型：数据/sql

那么没关系:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T08:49:42.110

HTTP 404 表示 IIS 找不到`/Backup/SaoLuu13112012_1435.bak`. 我认为这是因为它位于`C:\Backup`而不是位于`inetpub`.

请求 URL 是相对于网站根路径的，因此`/Backup/SaoLuu13112012_1435.bak`将引用`C:\inetpub\wwwroot\aitapgdtrh.edu\Backup\SaoLuu13112012_1435.bak` *not* `C:\Backup\SaoLuu13112012_1435.bak`。

您可以使用[虚拟目录](http://www.microsoft.com/technet/prodtechnol/windowsserver2003/library/iis/5adfcce1-030d-45b8-997c-bdbfa08ea459.mspx)¹来引用网站根路径之外的位置：

1.  打开 IIS
2.  浏览您的网站
3.  右键单击根节点
4.  点击“新建虚拟目录”
5.  指定“备份”作为别名
6.  指定“C:\Backup”作为路径
7.  仅分配**读取权限**
8.  保存目录

¹通过执行此操作，您允许`Backup`匿名客户端对整个目录进行读取访问。为了安全起见，您可能需要进行身份验证（NTLM 或表单）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-16T05:13:52.640

最简单的方法是编写一个使用 System.Web.UI.WebControls FileUpload 的 ASP.Net 脚本：

*   [http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.fileupload.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.fileupload.aspx)

# ruby-on-rails - 干燥私有方法的最佳方法是什么？或者这是否违背了目的？

> ID：13410774
> 
> 赞同：1
> 
> 时间：2012-11-16T05:02:31.420
> 
> 标签：ruby-on-rails, dry

我有几种私有方法用于对应用程序中的所有页面进行身份验证。私有方法的整个想法是不让其他类调用它，因此集中化似乎违背了目的。然而，随着我越来越习惯“红宝石方式”，重复自己变得越来越烦人。

有没有办法在不侵犯方法隐私的情况下实现 DRY 代码？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T05:05:18.003

使其在您的 ApplicationController 或您正在使用的所有经过身份验证的控制器扩展的任何其他“基本”控制器中受到保护。

# android - 当用户手动调节音量时，如何更改受影响的音量类型？

> ID：13410775
> 
> 赞同：1
> 
> 时间：2012-11-16T05:02:36.820
> 
> 标签：android, audio, media, volume

我在我的应用程序中播放简短的声音。大约 0.5 秒，我可以想象用户可能想要调整他们的播放音量。但是它们太短了，以至于当您按下音量操作或降低按钮时，声音已经结束，您正在更改铃声音量而不是媒体音量。

有没有办法让用户的音量输入特别影响媒体音量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T05:05:40.733

在你的活动中设置这个

```
 public void onCreate(Bundle savedInstanceState) {
       this.setVolumeControlStream(AudioManager.STREAM_MUSIC);
     } 
```

# r - 格式化自定义摘要输出以匹配 R 中的 ANOVA 输出

> ID：13410777
> 
> 赞同：3
> 
> 时间：2012-11-16T05:02:49.590
> 
> 标签：r, summary, anova

我是 R 的新手。我正在处理一项任务。任务是创建 R 包以模仿 Anova 表。我已经创建了作业中规定的所有必要功能。该函数计算了正确的值，但我无法让它显示为 R 内置的 anova() 函数可以显示的方差分析表。这是我的 summary.oneway 函数

```
summary.oneway <- function(object, ...){

  #model <- oneway(object)
  fval <- object$FValue
  TAB <- list(t(object$AOV), "Mean Sq."= rbind(object$MSB, object$MSW),
              "F Value" = fval, p.value = object$p.value)

  res <- list(call=object$call, onewayAnova = TAB)
  class(res) <- "summary.oneway"
  res  
} 
```

这是输出：

```
方差分析：
oneway.formula（公式 = coag ~ 饮食，数据 = coagdata）

[[1]]
         平方和度数。自由的
饮食 228 3
剩余 112 20

$`平均平方`
        1
[1,] 76.0
[2,] 5.6

$`F 值`
       1
13.57143

$p.value
           1
4.658471e-05

```

实际方差分析输出：

```
方差表分析

反应：凝
          Df Sum Sq Mean Sq F 值 Pr(>F)    
饮食 3 228 76.0 13.571 4.658e-05 ***
残差 20 112 5.6                      
---
意义。代码：0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1''1

```

我怎样才能实现这种格式？我在哪里错过了什么？

非常感谢你的帮助。

国度

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T05:12:06.293

Anova 输出使用`print.anova` 您可能想要查看的打印方法`methods(print)` ，特别是`stats:::print.anova`

您很可能想要创建自己的打印功能

```
 print.oneway <- function(object, ...) {
     foo
     bar
 } 
```

# ruby-on-rails - 如何将 Rails 应用程序嵌套到另一个 Rails 应用程序中

> ID：13410778
> 
> 赞同：1
> 
> 时间：2012-11-16T05:02:52.957
> 
> 标签：ruby-on-rails

假设有一个主应用程序，也有一个博客，我喜欢将应用程序的“博客”部分作为一个单独的 Rails 应用程序保留，并在其他 Rails 应用程序中重复使用它。

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T05:11:52.707

***目前流行的方法是使用Engines***来实现您想要实现的目标。引擎基本上允许您将一个应用程序安装到另一个应用程序中，允许您执行任何操作，从添加一两个方法到添加完整的博客。[官方指南](http://edgeguides.rubyonrails.org/engines.html)有一个非常好的入门指南，也有很多不错的非官方[指南](https://www.google.com/search?q=rails%20engines)。一个引擎基本上由一些初始化代码、应用程序代码和一个用于测试和开发的虚拟应用程序组成。乍一看，它可能看起来很吓人，但一开始它比听起来容易得多。祝你好运

# jquery - JQuery UI 对话框在 IE8 中只出现一次

> ID：13410779
> 
> 赞同：0
> 
> 时间：2012-11-16T05:03:04.313
> 
> 标签：jquery, jquery-ui, internet-explorer-8, dialog

我有一个提交按钮，可以在表单验证期间触发对话框打开。它在 Firefox 和 Chrome 中运行良好，但在 IE8 中，它出现一次后我关闭它，当我再次单击该按钮时，只出现覆盖模式，对话框消失。这是我的代码：

```
//VALIDATION OF FORM STARTS HERE
$('input[type="submit"]').click(function() {

    //create the dialog box
    $.fx.speeds._default = 500;
    $( "#dialog-message_er" ).dialog({
        autoOpen: false,
        modal: true,
        show: "blind",
        hide: "drop",
        buttons: {
            Ok: function() {
                $( this ).dialog( "close" );
            }
        }
    });

    if (empty) {
        //get the count of errorforms
        required_length = error_forms_req.length;
        //get the list of missed required fields
        var reqlist = '';
        for (var i=0; i<required_length; i++) {
           reqlist += '<li>' + error_forms_req[i] + '</li>';
         }

        $('#dialog-message_er ul').append('<li class="req">You have missed the following required fields <ul> ' + reqlist + ' </ul></li>'); 

        $( "#dialog-message_er" ).dialog( "open" );
        return false;
    } else { 
        return true;
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T05:22:37.497

As pointed out in the question provided by Luccas, you could probably try setting a `height('auto')` for the dialog element:

```
 $( "#dialog-message_er" ).dialog({
        autoOpen: false,
        modal: true,
        show: "blind",
        hide: "drop",
        buttons: {
            Ok: function() {
                $( this ).dialog( "close" );
            }
        }
    }).height('auto'); 
```

# php - HTML 链接带有点 (.) 的 ID

> ID：13410780
> 
> 赞同：3
> 
> 时间：2012-11-16T05:03:08.110
> 
> 标签：php, jquery, html

> **可能重复：**
> [当 id 包含点时，如何使用 jquery 按 ID 选择 html 节点？](https://stackoverflow.com/questions/605630/how-to-select-html-nodes-by-id-with-jquery-when-the-id-contains-a-dot)

我有一个 jquery modal，功能是显示配置文件框。

```
<a rel="Modal" href="#<?php echo $username; ?>">Profile</a> 
```

到目前为止，如果用户名不使用 ID 点 (.)

```
<div id=<?php echo $username; ?> 
```

当用户名使用 ID 点 (.)，例如`john.doe`. 盒子不能显示任何东西。

那么我该如何设置呢？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T05:06:15.870

您实际上并没有显示显示模式的 Javascript，但是使用 jQuery，您需要转义`.`选择器中的任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T05:17:10.170

快速而肮脏的解决方案是将*问题*字符转换为问题较少的字符。例如

```
<?php $normalisedUsername = htmlspecialchars(
    str_replace('.', '_', $username), ENT_QUOTES); ?>

<a rel="Modal" href="#<?php echo $normalisedUsername; ?>">Profile</a>

<!-- snip -->

<div id="<?php echo $normalisedUsername ?>"> ... 
```

我说这很脏，因为它`.`在 ID 属性中完全有效。更好的解决方案是更改用于查找模态内容的 jQuery 代码。执行此操作的范围完全取决于您的模态实用程序是您自己编写的还是属于 jQueryUI 或 Bootstrap 等库的一部分。

例如，如果您使用[Bootstrap 的 Modal](http://twitter.github.com/bootstrap/javascript.html#modals)，您可以将适当的转义添加到触发器的`data-target`属性中，例如

```
<button type="button" data-toggle="modal" data-target="#john\\.doe">Launch modal</button> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T05:14:29.247

使用`$('#john\\.doe')`. 似乎正在使用 Chrome 和 FF。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T05:35:59.193

尝试使用：

```
echo str_replace($search, $replace, $subject) 
```

这是一个详细的[教程](http://php.net/manual/en/function.str-replace.php)。

# andengine - Andengine 示例显示错误不起作用

> ID：13410784
> 
> 赞同：7
> 
> 时间：2012-11-16T05:03:34.167
> 
> 标签：andengine

我对 andengine 很陌生，试图从 git url 使用这个 andengine 示例：[https](https://github.com/nicolasgramlich/AndEngineExamples)
://github.com/nicolasgramlich/AndEngineExamples 但它总是向我显示两个类**的错误**

**BoundCameraExample 和 in HullAlgorithmExample**

绑定相机示例错误在第 220 行中说：

> 类型不匹配：无法从 void 转换为 AnimatedSprite

```
final AnimatedSprite face = new AnimatedSprite(pX, pY, this.mBoxFaceTextureRegion, this.getVertexBufferObjectManager()).animate(100); 
```

并且在**HullAlgorithmExample 错误是在**
第 11 行显示 DrawMode 错误的导入语句：import org.andengine.entity.primitive.vbo.DrawMode;
在第 168、175 行中说 DrawMode 无法解析为变量

我对我从同一个 git repo 下载的所有扩展和引擎和扩展使用 java 编译器 1.6。这是怎么回事请帮帮我

感谢所有

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-11-16T05:30:19.903

在 BoundCameraExample 中，尝试

```
final AnimatedSprite face = new AnimatedSprite(pX, pY, this.mBoxFaceTextureRegion,  this.getVertexBufferObjectManager());
face.animate(100); 
```

代替

```
final AnimatedSprite face = new AnimatedSprite(pX, pY, this.mBoxFaceTextureRegion,  this.getVertexBufferObjectManager()).animate(100); 
```

在 HullAlgorithExample 中，导入

```
import org.andengine.entity.primitive.DrawMode; 
```

代替

```
import org.andengine.entity.primitive.vbo.DrawMode; 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-02-28T11:04:51.623

在 2014 年，@swati-rawat 的回答仍然很有帮助。我发现了另外两个问题，我将在这里报告解决方案，因为这个问题排名很高：

在**SplitScreenExample 中**，如在 BoundCameraExample 中，替换为：

```
final AnimatedSprite face = new AnimatedSprite(pX, pY, this.mBoxFaceTextureRegion, this.getVertexBufferObjectManager());
face.animate(100); 
```

在**TextBreakExample**中替换为：

```
this.mText = new Text(50, 40, this.mFont, "", 1000, new TextOptions(AutoWrap.LETTERS, AUTOWRAP_WIDTH, HorizontalAlign.CENTER, Text.LEADING_DEFAULT), vertexBufferObjectManager); 
```

# c# - 计算类文件中 appconfig 中的键数

> ID：13410785
> 
> 赞同：2
> 
> 时间：2012-11-16T05:03:39.173
> 
> 标签：c#, c#-4.0, app-config, configuration-files

我需要知道如何计算应用程序设置中的键数并在类文件中通过它们进行操作...例如，我的应用程序配置如下

```
<?xml version="1.0"?>
<configuration>
  <appSettings>
    <add key="Mysqlrateteller" value="server=localhost;Database=rateteller;User Id=root;Password=;"/>
    <add key="Mysqlrateteller1" value="server=localhost;Database=rateteller1;User Id=root;Password=;"/>
    <add key="Mysqlrateteller2" value="server=localhost;Database=rate;User Id=root;Password=;"/>
  </appSettings>

<startup><supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/></startup></configuration> 
```

在这里我可能没有钥匙。我需要计算这个项目的类文件中可用的键的数量。怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T05:09:04.617

你可以这样做：

```
 var appSettings = System.Configuration.ConfigurationManager.AppSettings;
 int cntAppSettingKeys = appSettings.Count; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T05:37:33.890

[AppSettings](http://msdn.microsoft.com/en-us/library/system.configuration.configurationmanager.appsettings.aspx)是一个**[NameValueCollection](http://msdn.microsoft.com/en-us/library/system.collections.specialized.namevaluecollection.aspx)**。所以下面的代码将起作用

```
 System.Configuration.ConfigurationManager.AppSettings.Count 
```

# objective-c - Xcode 库从 6 恢复到 5.1

> ID：13410788
> 
> 赞同：0
> 
> 时间：2012-11-16T05:04:43.563
> 
> 标签：objective-c, xcode, facebook

我一直在使用 开发一个应用程序`Xcode`，其中包括`Facebook SDK`. `Facebook SDK`requires`AdSupport.framework`和 the ，这`Social.framework`两者以前都安装过，但似乎已经消失了。我的问题是它如何将库更新到 6.0，而不是 5？我知道您必须进入构建阶段并在该`Line Binary With Libraries`部分中添加框架，但是当我去添加框架时，文件夹是 5.1，而不是 6。我查看了 Apple 文档，但没有找到任何东西。

这是我得到的图像：

![在此处输入图像描述](../Images/5969d7cfd904f5497dd29480d1e10c32.png)

它应该如下所示：

![在此处输入图像描述](../Images/921b214264dbdfb1095df75b56b51ca0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T00:59:59.263

Xcode 提供的 SDK 应该不会倒退。但是，如果您启动旧版本的 Xcode，您可能会看到它们消失。

根据经验，如果您在 Xcode 成为单个应用程序包之前安装了 Xcode，并且随后安装了应用程序包版本，那么旧版本仍然存在的可能性是合理的，因此 Spotlight 启动很有可能会打开错误的版本。

# database - 在我的数据库中保存数据的最有效结构是什么？

> ID：13410790
> 
> 赞同：0
> 
> 时间：2012-11-16T05:05:07.410
> 
> 标签：database, django, models

我正在尝试创建允许用户将项目保存到播放列表并且用户可以拥有多个播放列表的功能。每个项目也可以保存到多个播放列表中。表示这些数据的最佳方式是什么？带有外键链接的多个表还是只有 1 个平面表？

# 多个表

```
class Playlist(models.Model):
    playlist = models.CharField('Playlist', max_length = 2000, null=True, blank=True)
    def __unicode__(self):
        return self.playlist

class Video(models.Model):
    video_url = models.URLField('Link to video', max_length = 200, null=True, blank=True)
    video_tag = models.CharField('Video ID', max_length = 2000, null=True, blank=True)
    def __unicode__(self):
        return self.video_url

class UserPlaylist(models.Model):
    profile = models.ForeignKey(User)
    playlist = models.ForeignKey(Playlist)
    def __unicode__(self):
        return unicode(self.playlist)

class Videoplaylist(models.Model):
    video = models.ForeignKey(Video)
    playlist = models.ForeignKey(UserPlaylist)
    def __unicode__(self):
        return unicode(self.playlist) 
```

# 1张桌子

```
class Everything(models.Model):
    profile = models.ForeignKey(User)
    playlist = models.CharField('Playlist', max_length = 2000, null=True, blank=True)
    platform = models.CharField('Platform', max_length = 2000, null=True, blank=True)
    video = models.CharField('VideoID', max_length = 2000, null=True, blank=True)
    def __unicode__(self):
        return u'%s %s %s %s' % (self.profile, self.playlist, self.platform, self.video) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T05:25:33.843

实体之间有两种主要关系：

*   播放列表 --> 用户，多对一
*   视频 --> 播放列表，多对多

基于上述，您应该以如下方式排列数据：

```
class User():
    name = CharField()
    # other user info

class Video():
    name = CharField()
    # othter video info

class Playlist():
    user = ForeigenKey(User)
    name = CharField()

class PlaylistVideo():
    plist = ForeigenKey(Playlist)
    video = ForeigenKey(Video)

# When a user adds a video to one of his playlist
def add_video_to_playlist(user_name, playlist_name, video_name)
    user = User.objects.get(name=user_name)
    plist = Playlist.objects.get(user=user, name=playlist_name)

    video = Video.objects.get(name=video_name)
    plv = PlaylistVideo(plist=plist,video=video)
    plv.save()

# To get the content of a user's some playlist:
def get_playlist_content(user_name, playlist_names):
    user = User.objects.get(name=user_name)
    plist = Playlist.objects.get(user=user, name=playlist_name)

    return [plv.video for plv in PlaylistVideo.objects.filter(plist=plist)] 
```

# php - 如何获取两个日期之间的差异天数

> ID：13410793
> 
> 赞同：0
> 
> 时间：2012-11-16T05:05:09.953
> 
> 标签：php

> **可能重复：**
> [如何使用 PHP 计算两个日期之间的差异？](https://stackoverflow.com/questions/676824/how-to-calculate-the-difference-between-two-dates-using-php)

问：如何获得两个日期之间的差异天数？

例如

```
<?php 
echo $date1 = strtotime(date('2012-10-11'));
echo "<br />";
echo $date2 = strtotime(date('2012-11-15'));
echo "<br />";
echo $result = $date2 - $date1;                     
?> 
```

$result 应该是 36 天。如何获得天数？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-16T05:07:39.337

来自 PHP NET - [http://www.php.net/manual/en/datetime.diff.php](http://www.php.net/manual/en/datetime.diff.php)

```
<?php
$datetime1 = new DateTime('2009-10-11');
$datetime2 = new DateTime('2009-10-13');
$interval = $datetime1->diff($datetime2);
echo $interval->format('%R%a days');
?> 
```

或程序

```
<?php
$datetime1 = date_create('2009-10-11');
$datetime2 = date_create('2009-10-13');
$interval = date_diff($datetime1, $datetime2);
echo $interval->format('%R%a days');
?> 
```

或以上作为单行：

```
print date_create('2009-10-11')->diff(date_create('2009-10-13'))->d; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T05:28:58.643

```
echo $result= (strtotime("2012-11-15") - strtotime("2012-10-11")) / (60 * 60 * 24); 
```

# crystal-reports - 如何在水晶报表中拆分字符串并制作整数数组

> ID：13410798
> 
> 赞同：7
> 
> 时间：2012-11-16T05:05:45.313
> 
> 标签：crystal-reports, crystal-reports-2010

我有一个字符串，其中包含一组用_（下划线）分隔的员工 ID。我想要做的是将其拆分为单独的字符串并将它们转换为整数并将它们保存在整数数组中。这在水晶报表中可能吗？是否可以在 Crystal Report 中将字符串转换为整数/数字？

我尝试过使用 split 函数，但仍然无法弄清楚如何使用它来创建数组。

我对水晶报告很陌生，如果你能帮助我，那将是一个很大的帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-16T14:05:06.983

```
//create an array of strings by parsing a underscore-delimited string field
Stringvar Array strings := Split({table.string_field}, "_");

//empty numeric array; sized to match
Numbervar Array numbers;
Redim numbers[Ubound(strings)];

//populate array
Numbervar i;
for i := 1 to Ubound(strings) do (
  numbers[i] := ToNumber(strings[i])
);

//return
numbers; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T10:21:46.753

split 是正确的功能。我认为将它们保留为字符串可能是最简单的，然后在需要使用它们时进行转换（否则您只需遍历字符串数组并填充一个新的数字数组）。

你分裂有什么问题？然后你打算用你的阵列做什么？

# jquery - 带有 jquery 表单验证的 Jquery 插件字符数

> ID：13410799
> 
> 赞同：0
> 
> 时间：2012-11-16T05:05:49.103
> 
> 标签：jquery, jquery-plugins, char

我正在为 textarea 使用 charcount 插件

[http://cssglobe.com/jquery-plugin-simplest-twitterlike-dynamic-character-count-for-textareas/](http://cssglobe.com/jquery-plugin-simplest-twitterlike-dynamic-character-count-for-textareas/)

和jquery表单验证

[http://bassistance.de/jquery-plugins/jquery-plugin-validation/](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)

一切正常，但代替错误消息字符计数即将到来，希望很清楚。任何人都可以帮助我解决这个问题。在此先感谢。代码示例 [http://jsfiddle.net/rashvish18/gF7ua/1 /](http://jsfiddle.net/rashvish18/gF7ua/1/)

这是我正在使用的代码

```
$(document).ready(function(){    
$("#story").charCount({
        allowed: 250,        
        warning: 20,
        counterText: 'characters remaining: '    
    });
            //$("#storyform").preventDefault();

$("#storyform").validate({
rules: {

    place:"required",
            story: "required"

},
messages: {
    story: "Please write your story",
    place: "Please write your place"

},errorElement: "span",
    wrapper: "span" // a wrapper around the error message

}); 
```

});

![在此处输入图像描述](../Images/dbafac78776f1fe81101594c45aba8d5.png)

![在此处输入图像描述](../Images/b2781938a6142238b7d94d2769154fcf.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T07:22:06.053

我认为这个插件有一些错误，最后我正在使用 sm diff 插件，它工作正常。

[https://github.com/ndp/show_char_limit](https://github.com/ndp/show_char_limit)

# actionscript-3 - 2个重叠的as3 flash按钮，都需要点击功能

> ID：13410806
> 
> 赞同：2
> 
> 时间：2012-11-16T05:06:12.240
> 
> 标签：actionscript-3, flash

我有一个使用外壳子加载`swf`文件的 Flash 横幅。

`swf`shell 包含一个movieclip，它以clicktag 按钮的形式覆盖整个内容。

子加载有一个单独的号召性用语按钮。我需要它们都可以点击并分派单独的事件。

通常我会将 cta 按钮拖到 clicktag 上，但因为 clicktag 在 shell 中，而 cta 按钮在子加载中，所以我不能这样做。

在这个结构中，如何让两个按钮都可以点击？

我希望在 shell 中定义 clicktag 事件，并在 subload 中定义 cta 按钮事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T06:14:14.037

由于我不知道横幅的动画顺序，我不确定这会对您有所帮助，但是您可以使用普通按钮而不是普通按钮`stage.addEventListener(MouseEvent.CLICK, myClicktagFunction)`将侦听器直接添加到 flash 舞台。这样，`myClicktagFunction`当用户点击它时，整个容器横幅（包括子加载）将触发。

# db2 - 使用 Business Objects Data Integrator 11.7 在 AS/400 上更新 DB2 数据库表时出错

> ID：13410808
> 
> 赞同：2
> 
> 时间：2012-11-16T05:06:22.760
> 
> 标签：db2, odbc, driver, ibm-midrange, business-objects

我们需要使用 Business Objects Data Integrator 11.7 更新 AS/400 上的 DB2 数据库表中的记录。Data integrator Designer 版本是 11.7.3 安装的驱动程序是 iSeries ACCESS ODBC Driver 11.0.2,CLIENT ACCESS ODBC DRIVER 11.0.2

我们可以对单个记录进行更新，但是在进行批量更新时，我们收到以下错误消息，有人可以帮忙吗？

```
DBS-070401: ODBC DATA SOURCE <xxxx> Error Message for Operation
<SQLExecute>: <[IBM][iSeries Access ODBC Driver]Driver not capable.>
RUN-051005:
Execution of <Regular Load Operations> for target <XXX_XXXX> failed. Possible causes: (1) Error in the SQL syntax; (2) Database
connection is broken; (3) Database related errors such as transaction log is full, etc.; (4) The user defined in the datastore
has insufficient privileges to execute the SQL. If the error is for preload or postload operation, or if it is for regular load
operation and load triggers are defined, please check the SQL. Otherwise, for (3) and (4), please contact your local DBA. 
```

如果 DI 作业的 select Query 仅针对一条记录进行过滤，则会生成以下更新语句并通过 Data Integrator 执行。在这种情况下，不会显示驱动程序错误。

```
UPDATE TIBCO_STG.PUB_AREA SET ADB_L_DELIVERY = 'C'   WHERE ADB_SEQUENCE = 22849415 
```

如果选择查询没有过滤，DI Job 会生成以下四个更新 SQL，在此 Bulk 记录更新上会显示 Driver 错误。

```
UPDATE TIBCO_STG.PUB_AREA SET ADB_L_DELIVERY = 'C'   WHERE ADB_SEQUENCE = 22849415 
UPDATE TIBCO_STG.PUB_AREA SET ADB_L_DELIVERY = 'C'   WHERE ADB_SEQUENCE = 22849416 
UPDATE TIBCO_STG.PUB_AREA SET ADB_L_DELIVERY = 'C'   WHERE ADB_SEQUENCE = 22849417 
UPDATE TIBCO_STG.PUB_AREA SET ADB_L_DELIVERY = 'C'   WHERE ADB_SEQUENCE = 22849418 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T18:11:24.853

我在您的 UPDATE 语句之间看不到任何分号。

您可能还想考虑其他方法。例如：

```
UPDATE TIBCO_STG.PUB_AREA 
  SET ADB_L_DELIVERY = 'C' 
  WHERE ADB_SEQUENCE in (22849415, 22849416, 22849417, 22849418) 
```

或者

```
UPDATE TIBCO_STG.PUB_AREA 
  SET ADB_L_DELIVERY = 'C' 
  WHERE ADB_SEQUENCE in (select seq from someFullSelectOrWorkFile) 
```

如果有某种方法可以将 WHERE 条件编码为 fullSelect，您将能够在单个 SQL 语句中完成此操作。Set-at-a-time 处理比 row-at-a-time 效率高得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T07:14:25.600

您的驱动程序将是 IBM i Access for Windows 的一部分。为确保您拥有最新版本，请打开 System i Navigator，然后查看帮助/关于。那里显示的版本应该至少与服务器上的 IBM i OS 版本一样高或更高。更高版本的 IBM i Access 驱动程序应支持至少 2 个先前版本的服务器操作系统。如果您需要更多详细信息，请参阅此[兼容性页面。](http://www-03.ibm.com/systems/power/software/i/access/resources/connections.html)

目前，IBM i 和 IBM Access for Windows 的最新版本是 7.1。

接下来，始终确保您安装了[最新的服务包](http://www-03.ibm.com/systems/power/software/i/access/windows_sp.html)。

# tortoisesvn - 乌龟SVN合并

> ID：13410809
> 
> 赞同：1
> 
> 时间：2012-11-16T05:06:24.097
> 
> 标签：tortoisesvn

我在分支 branch_1 中有一个文件 ac 具有以下版本。

上一个版本：10 下一个版本：20 当前版本：25 我的工作副本是 branch_2

我想将 branch_1 中版本 20 和 10 之间的差异合并到仅用于 ac 文件的工作副本。

如何使用 tortoise svn 合并它？

我写了下面的批处理文件来手动执行bat文件，但我想用tortoise svn + external diff程序来做到这一点。

```
 @ECHO OFF

    set svn_url="https://Project/branches/"

    SET DIFF3="C:\Program Files\Beyond Compare 3\BComp.exe"
    SET BRANCH=%1
    SET FOLDER=%2
    SET FILE=%3
    SET NV=%4
    SET PV=%5
    svn co %svn_url%/%BRANCH%/%FOLDER%/ --depth empty

    cd %FOLDER%
    svn update -r %NV% %FILE%
    del %FILE%_%NV%
    rename %FILE% %FILE%_%NV%

    svn update -r %PV% %FILE%
    del %FILE%_%PV%
    rename %FILE% %FILE%_%PV%

    %DIFF3% %FILE%_%NV% D:\Projct\%FOLDER%\%FILE% %FILE%_%PV%

pause 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-23T08:03:20.880

当下一个版本是 20 时，我不确定当前版本 25 意味着什么。

但是要在乌龟中合并，请右键单击您的工作副本，无论是目录还是文件，选择合并。选择要从中合并更改的源文件/目录，然后从弹出的对话框中选择修订。它真的很简单。

# cognos - 限制每年在 cognos 多维数据集生成中生成的数据

> ID：13410811
> 
> 赞同：0
> 
> 时间：2012-11-16T05:06:31.663
> 
> 标签：cognos, cubes, cognos-8, impromptu, cognos-bi

一年以来，我一直在使用 cognos，但我偶然发现了另一个需要紧急解决方法的问题。我有这个模型每天自动生成多维数据集（使用批处理文件）。生成是成功的，尽管主要问题是生成多维数据集所消耗的时间。尽管考虑到所涉及的数据（数据包括大约 7 年前的历史交易），这在某种程度上是可以接受的。现在我们提出的主要想法是限制或以某种方式将前几年的数据包含在模型中，并在日常多维数据集生成中保持不变（因为这些数据没有预期的变化）。仅应处理当年的数据，并将这些数据与历史数据一起添加。到目前为止，我已经尝试使用操纵 iqd，但结果不包括生成的多维数据集中的历史数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T05:33:03.813

您正在寻找的是*基于时间的分区*。在 Google 中搜索基于*变压器时间的分区。*例如，这是 8.4，但您应该能够在 v10 上找到 doco。

[http://publib.boulder.ibm.com/infocenter/c8bi/v8r4m0/index.jsp?topic=/com.ibm.swg.im.cognos.ug_cogtr.8.4.0.doc/ug_cogtr_id7761DefiningTBPCube.html](http://publib.boulder.ibm.com/infocenter/c8bi/v8r4m0/index.jsp?topic=/com.ibm.swg.im.cognos.ug_cogtr.8.4.0.doc/ug_cogtr_id7761DefiningTBPCube.html)

这使您可以一次构建以前的年份，它将作为多个单独的 MDC 文件存在。然后，您只需定期构建当前年份的多维数据集，它只会刷新一个 MDC 文件。这些都透明地播种在主虚拟 MDC 和 VCD 文件中。

显然 v10 有一些构建优化，所以如果可能的话，我会在 v10 而不是 v7 中这样做

# php - Wordpress Session 的插件和登录表单

> ID：13410818
> 
> 赞同：2
> 
> 时间：2012-11-16T05:07:19.847
> 
> 标签：php, wordpress

我正在使用[Screets Wordpress Sessions](http://www.screets.com/gp/projects/wordpress_sessions.html)插件，它工作得非常好。我遇到的问题是，我将通过不同的表格等管理我的网站用户，而不是 wordpress。我的注册表单正在工作，它是否会发送确认电子邮件以阻止垃圾邮件。我遇到的问题是我的简单形式：

```
 mysql_connect("localhost", "%username%", "%password%") or die(mysql_error()); // Connect to database server(localhost) with username and password.
    mysql_select_db("%database%") or die(mysql_error()); // Select registration database.
    if(isset($_POST['name']) && !empty($_POST['name']) AND isset($_POST['password']) && !empty($_POST['password']) AND isset($_POST['name']) && !empty($_POST['name'])){
                $username = mysql_escape_string($_POST['name']);
                $password = mysql_escape_string(md5($_POST['password']));

                $search = mysql_query("SELECT username, password, active FROM %table% WHERE username='".$username."' AND password='".$password."' AND active='1'") or die(mysql_error()); 
                $match  = mysql_num_rows($search);

                if($match = 1){
                    $msg = 'Login Complete! Thanks';
                    //$email = $row['EmailAddress'];  
                    //;  
                    //$_SESSION['EmailAddress'] = $email;  
                    //$_SESSION['LoggedIn'] = 1; 
                    $session->set_userdata( 'username', $username);
                    header ("Location: /"); 
                }else{
                    $msg = 'Login Failed!<br /> Please make sure that you enter the correct details and that you have activated your account.';
                }
            }

        ?>
        <!-- stop PHP Code -->

        <!-- title and description -->  
        <h2>Login Form</h2>
        <p>Please enter your name and password to login</p>

        <?php 
            if(isset($msg)){ // Check if $msg is not empty
                echo '<div class="statusmsg">'.$msg.'</div>'; // Display our message and add a div around it with the class statusmsg
            } ?>

        <!-- start sign up form --> 
        <form action="" method="post">
            <label for="name">Username:</label>
            <input type="text" name="name" value="" />
            <label for="password">Password:</label>
            <input type="password" name="password" value="" />

            <input type="submit" class="submit_button" value="login" />
        </form> 
```

自动重定向到我的 wordpress 登录名，这不是我想要的。之前有人告诉我使用 wp_users，但我真的不想使用那个或插件。有什么想法可以让它按我需要的方式工作吗？

编辑：为了更好地澄清这个问题，任何点击提交的人都会被重定向到 wp-login.php。该页面甚至没有按照我的 SQL 连接来检查并实际创建会话。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T22:20:02.797

更好的方法是使用**Ajax**发送和存储您的数据。首先，将以下这些代码包含在您的`functions.php`:

```
/**
* User Log in
*/
function sc_login( $params ){   
    global $wpdb;

    // You can check user here
    $sql = $wpdb->prepare( 
        '
            SELECT COUNT(*) FROM ' . $wpdb->prefix . ' users
            WHERE `email`  = %d
            AND `password` = %s
        ',
            $params['user_login'], $params['user_password']
    );
    $auth = $wpdb->get_var( $sql );

    if( $auth ) {
        // Log in system
    } else {
        // Username or password is wrong
    }
}
/**
* Ajax Submit
*/
function sc_ajax_callback() {

    // run function
    $response = call_user_func($_POST['func'], $_POST);

    // response output
    header( "Content-Type: application/json" );
    echo json_encode($response);
    exit;
}

// Ajax Requests
add_action( 'wp_ajax_nopriv_sc_ajax_callback', 'sc_ajax_callback' );
add_action( 'wp_ajax_sc_ajax_callback', 'sc_ajax_callback' ); 
```

在您的主题中创建一个`Ajax.js`文件并添加以下代码：

```
(function ( $ ) { 
    jQuery(document).ready(function() {
        /**
        * Log in
        */
        $('#sc_login_form').submit(function() {

            jQuery.ajax({
                type: 'POST',
                url: sc_ajax.ajaxurl,
                data: $('#sc_login_form').serialize(),
                dataType: 'json',
                success: function(response, textStatus) {

                    // Show errors?
                    if( response.errors ){
                       // YOU CAN SHOW ERRORS HERE IF YOU WANT
                       // for instance, "Email is required!"

                    // successful log in
                    } else {
                       // refresh page (HERE IS THE POINT)
                       window.location.href = sc_ajax.REDIRECT_URL;
                   }

                    console.log(response);

                }
             });

            return false;

       });

   }); 
}( jQuery )); 
```

现在我们需要本地化 Ajax 脚本。在函数之前打开`header.php`并添加这些代码`wp_head();`。**不要忘记更改下面的 REDIRECT_URL 变量**：

```
// insert jquery
wp_enqueue_script( 'jquery' );

// ajax requests
wp_enqueue_script( 'sc-ajax-request', get_template_directory_uri() . '/Ajax.js', array( 'jquery' ) );

// prepare your ajax custom vars
$ajax_vars = array(
    'REDIRECT_URL'  => '', // (!) CHANGE THIS WITH URL WHERE YOU WANT TO GO
    'ajaxurl'   => admin_url( 'admin-ajax.php' )
);

wp_localize_script( 'sc-ajax-request', 'sc_ajax', $ajax_vars ); 
```

最后一步是像这样编辑您的表单：

```
<form id="sc_login_form">
    <input type="hidden" name="action" value="sc_ajax_callback" />
    <input type="hidden" name="func" value="sc_login" />

    Email:
    <input type="text" name="user_login" />

    Password:
    <input type="password" name="user_password"/>

    <input type="submit" value="Log in" />
</form> 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T06:40:06.483

是啊。WordPress 的 Rewrite API 正在踩着你。当您提交表单时，脚本会尝试回发给自己。WordPress 获取**http://your-site.com/login**并将其重写为 **http://your-site.com/wp-login.php**。

这是修复它的方法。

在 WordPress 中创建一个页面，将其命名为**login**，然后将[自定义页面模板](http://codex.wordpress.org/Pages#Creating_Your_Own_Page_Templates)分配给您将在下一步中创建的页面。

现在您需要创建一个[自定义页面模板](http://codex.wordpress.org/Pages#Creating_Your_Own_Page_Templates)，将其放在您当前活动的主题文件夹中，并将**以下代码放入其中：**

```
<?php

/*
 * Template Name: Login
 */

// Put the code for your login here.

?> 
```

最后，将下一行添加到主题的**functions.php 中：**

```
add_rewrite_rule( '^login/?$', 'index.php?page_name=$matches[1]', 'top' ); 
```

那应该可以很好地解决问题。:)

# .net - Jasper 来自 .Net 框架的报告

> ID：13410821
> 
> 赞同：3
> 
> 时间：2012-11-16T05:07:41.397
> 
> 标签：.net, jasper-reports

有没有办法从 .Net 3.5 应用程序生成碧玉报告？

请让我知道任何机会

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T05:12:59.197

您可以将基于 REST 的 API 用于与语言无关的 Jasper 报告。 [http://community.jaspersoft.com/wiki/getting-started-rest-web-service-api](http://community.jaspersoft.com/wiki/getting-started-rest-web-service-api)

除此之外，您还有[JNI4NET](http://jni4net.sourceforge.net/)，它是 .net 和 java 应用程序之间的桥梁。使用包附带的 generateProxies 工具为您在 .NET 中直接引用的 JAVA 类生成代理。

但是 REST Api 是推荐的方法……因为它由 Jaspersoft 直接支持。

# php - 从 PHP 脚本执行 .exe 文件时遇到的错误

> ID：13410822
> 
> 赞同：2
> 
> 时间：2012-11-16T05:08:07.113
> 
> 标签：php, exe

> **可能重复：**
> [为什么 PHP 不替换字符串中的变量？](https://stackoverflow.com/questions/11317743/why-is-php-not-replacing-the-variable-in-string)

我一直在尝试`echo exec('hi.exe $file',$results,$status);`从 Php 执行这一行。其中分配给 $file 的值是文件名**hi.txt**（即 $file = hi.txt）。

但是每次我尝试用同一行运行我的代码时，它都会显示错误`$file file not found`，就好像我`hi.exe hi.txt`在命令提示符下运行它一样。

而且，如果我尝试使用文件名而不是 php ie 中的变量运行同一行`exec('hi.exe hi.txt',$results,$status)`，浏览器会继续执行很长时间而不给出输出。

请有人告诉我哪里出错了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T05:12:35.793

您使用的是单引号，而不是双引号。更改`echo exec('hi.exe $file',$results,$status);`为：

```
echo exec("hi.exe $file",$results,$status); 
```

或使用点，如下所示：

```
echo exec('hi.exe '.$file,$results,$status); 
```

在 PHP 中，使用单引号不会`$file`变成`hi.txt`; 它只是保留为文字字符串“$file”。使用双引号或点连接实际扩展`$file`为`hi.txt`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T05:12:45.200

单引号不会扩展变量。你可能的意思是：

```
echo exec("hi.exe $file",$results,$status); 
```

# shell - 批处理文件重命名按日期排序

> ID：13410823
> 
> 赞同：1
> 
> 时间：2012-11-16T05:08:09.007
> 
> 标签：shell

我有将文件上传到的文件夹，其中包含 1,000-20,000 个不同类型的文件（pdf、jpg、wmv...等），文件名和长度不同，名称中带有空格等。

我正在尝试制作一个脚本来定期重命名它们，但我希望它们按“最早的日期优先”排序，新名称的格式为 YYYT000001.xxxx ... YYYY036242.xxxx（其中 YYYY 是固定文本“Jan”或Dec“（我会在脚本中手动输入），xxxx是原始文件扩展名）。

我尝试使用输入`for i in $(ls -tr)`，因为它将按最旧日期排序，并尝试使用`basename $i`等替换文件名。

我已经在网上搜索过，但我的脑袋想不出一个工作脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T06:05:17.960

使用他们在[这个问题](https://stackoverflow.com/questions/965053/extract-filename-and-extension-in-bash "在 bash 中提取文件名和扩展名")和[这篇博](http://jonathanwagner.net/2007/04/zero-padding-in-bash/ "bash 中的零填充")文中所说的话，您只需像这样移动文件：

```
#!/bin/bash
prefix="YYY"
i=0
for file in $(ls -tr)
do
    filename=$(basename "$file")
    extension="${filename##*.}"
    paddedIndex=$(printf "%06d" $i)
    mv $file ${prefix}${paddedIndex}.${extension}
    i=$(($i + 1))
done 
```

# java - 安装 Jammer 定位 Java 运行时

> ID：13410825
> 
> 赞同：5
> 
> 时间：2012-11-16T05:08:41.200
> 
> 标签：java, installation, setup-project

我为需要 Java 和 MySQL 的应用程序创建了 Install Jammer 设置。

问题是，当我在系统中没有Java版本时，它会提示用户选择java路径并自动进入浏览器窗口下载Java。

当我使用内置的 java 检查操作**Locate Java Runtime 时会发生这种情况**

我不需要设置来自动打开 Java 下载路径，而是在新窗格中显示 Java 下载链接。我该如何解决这个问题？

请任何人尽快回复，因为我需要这么早的解决方案。

提前致谢。

# android - 使用 ActionBarSherlock 的 Maven 错误 Android 项目

> ID：13410827
> 
> 赞同：0
> 
> 时间：2012-11-16T05:08:46.157
> 
> 标签：android, maven, actionbarsherlock

我正在使用带有 android maven 插件的 Maven 来构建我的 Android 项目。

我正在尝试使用 Maven 为 ActionBarSherlock 添加依赖项。

```
<dependency>
  <groupId>com.actionbarsherlock</groupId>
  <artifactId>actionbarsherlock</artifactId>
  <version>4.2.0</version>
  <type>apklib</type>
</dependency> 
```

我已将我的 pom.xml 编译器版本指定为 1.6

```
<artifactId>maven-compiler-plugin</artifactId>
  <configuration>
  <source>1.6</source>
  <target>1.6</target>
</configuration> 
```

我依赖于来自 Maven 的正确版本的 Android 库：

```
<dependency>
  <groupId>com.google.android</groupId>
  <artifactId>android</artifactId>
  <version>4.1.1.4</version>
  <scope>provided</scope>
</dependency> 
```

我正在使用 Android 的 API 级别 16，它是： - Maven 中央存储库上可用的最高级别 - 用于构建 ActionBarSherlock 4.2.0 版本的版本

错误的代表性部分在这里：

```
\target\unpack\apklibs\com.actionbarsherlock_actionbarsherlock_apklib_4.2.0\res\values-v14\abs__styles.xml:4: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.ActionBar'.
\target\unpack\apklibs\com.actionbarsherlock_actionbarsherlock_apklib_4.2.0\res\values-v14\abs__styles.xml:6: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.ActionBar.Solid'.
\target\unpack\apklibs\com.actionbarsherlock_actionbarsherlock_apklib_4.2.0\res\values-v14\abs__styles.xml:8: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.Light.ActionBar'.
\target\unpack\apklibs\com.actionbarsherlock_actionbarsherlock_apklib_4.2.0\res\values-v14\abs__styles.xml:10: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.Light.ActionBar.Solid'.
\target\unpack\apklibs\com.actionbarsherlock_actionbarsherlock_apklib_4.2.0\res\values-v14\abs__styles.xml:12: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.Light.ActionBar.Solid.Inverse'.
    etc... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T05:17:46.307

确保您声明了 android-maven-plugin 的平台版本。

```
<plugin>
    <groupId>com.jayway.maven.plugins.android.generation2</groupId>
    <artifactId>android-maven-plugin</artifactId>
    <version>3.4.0</version>
    <configuration>
        <sdk>
            <platform>16</platform>
        </sdk>
    </configuration>
</plugin> 
```

# c# - 从文件读取后将 Char 转换为 int

> ID：13410828
> 
> 赞同：2
> 
> 时间：2012-11-16T05:08:54.527
> 
> 标签：c#, file-io, char, int

我正在从文本文件中读取，并且我有一个从文本文件中读取的值，我想将其存储为`int`. 我在 c# 中这样做。例如，我从文件中读取了 4，但`char`它是 4，但如果我只是将它转换为 an `int`，我认为它需要值 52。如何获取该 char 值 4 并将其存储为`int`4？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T05:10:41.243

最简单的方法是减去 的值`'0'`：

```
char c = '4';
int i = (int)(c - '0'); 
```

或者你可以通过`string`：

```
char c = '4';
int i = int.Parse(c.ToString()); 
```

* * *

请注意，如果您有一个字符串而不是一个字符，只需执行以下操作：

```
string value = "4";
int i = int.Parse(value); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-16T05:10:34.397

**将您的字符转换为字符串**，然后您可以使用[int.Parse](http://msdn.microsoft.com/en-us/library/system.int32.parse.aspx)、[int.TryParse](http://msdn.microsoft.com/en-us/library/system.int32.tryparse.aspx)、[Convert.Int32(string)](http://msdn.microsoft.com/en-us/library/sf1aw27b.aspx)将其转换为整数值。

```
char ch = '4';
int val = Convert.ToInt32(ch.ToString());

// using int.Parse
int val2 = int.Parse(ch.ToString());

//using int.TryParse
int val3;
if(int.TryParse(ch.ToString(), out val3))
{
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-16T05:10:59.937

你需要[**Convert.ToInt32(string)**](http://msdn.microsoft.com/en-us/library/sf1aw27b.aspx)，

```
int res = Convert.ToInt32(yourcharvar.ToString()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-16T05:13:49.837

始终使用[`TryParse`](http://msdn.microsoft.com/en-us/library/f02979c7.aspx)，因为它会捕获任何异常。（它具有内置的 trycatch 块）
换句话说，它是*Safe*。

```
char foo = '4';
int bar;
if(int.TryParse(foo.ToString(), out bar))  //if converted returns TRUE else FALSE
   Console.WriteLine(bar);   //bar becomes 4
else
   Console.WriteLine("The conversion is not possible"); 
```

# python - 如何仅显示查询集中具有值的不同对象？

> ID：13410832
> 
> 赞同：0
> 
> 时间：2012-11-16T05:09:16.773
> 
> 标签：python, django, templates, view, model

我的数据库中保存了多个对象，但我只想在我的查询集中显示唯一的项目，并且如果它们实际上保存了一个项目。

# 模型.py

```
class Everything(models.Model):
    profile = models.ForeignKey(User)
    playlist = models.CharField('Playlist', max_length = 2000, null=True, blank=True)
    platform = models.CharField('Platform', max_length = 2000, null=True, blank=True)
    video = models.CharField('VideoID', max_length = 2000, null=True, blank=True)
    def __unicode__(self):
        return u'%s %s %s %s' % (self.profile, self.playlist, self.platform, self.video) 
```

# 视图.py

```
playlist2 = Everything.objects.filter(profile=request.user) 
```

# 模板

```
<select name ="playlist2">
{% for item in playlist2 %}
  <option value="{{item.playlist}}">{{item.playlist}}</option>
{% endfor %}
</select> 
```

不必有播放列表，因为 null=True 和 blank=True。播放列表中的某些项目也可能重复。如何仅显示其中具有值的不同项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T05:32:00.633

您可以使用`exclude`和`distinct`查询集函数（[文档](https://docs.djangoproject.com/en/dev/ref/models/querysets/)）。

但是，在您的情况下，这并不是那么简单，因为您的`CharField`定义允许`NULL`( `null=True`) 和空字符串 ( `blank=True`) 值。所以这意味着你必须测试两个条件，并且你必须使用`Q`（[docs](https://docs.djangoproject.com/en/dev/topics/db/queries/#complex-lookups-with-q-objects)）对象：

```
 everything = Everything.objects.exclude(Q(playlist=None) | Q(playlist='')).distinct() 
```

这就是为什么 Django 文档不建议使用`null=True`字符串模型字段 ( [docs](https://docs.djangoproject.com/en/1.4/ref/models/fields/#null) ) 的原因。这是摘录：

> 除非您有充分的理由，否则请避免在基于字符串的字段（例如 CharField 和 TextField）上使用 null。如果基于字符串的字段具有 null=True，这意味着它有两个可能的“无数据”值：NULL 和空字符串。在大多数情况下，“无数据”有两个可能的值是多余的；Django 约定是使用空字符串，而不是 NULL。

如果您遵循此转换，那么您的过滤器查找将变得更加简单：

```
 everything = Everything.objects.exclude(playlist=None).distinct() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T05:22:06.580

您可以过滤掉所有空对象和空白对象。

```
playlist2 = Everything.objects.filter(playlist__isnull=False).exclude(playlist__exact='').distinct() 
```

如 miki725 所述，我编辑了上述内容以包括处理空白。不过，可能不需要这些`Q()`功能。并不是说函数有什么问题`Q()`，我只是尽量避免使用可以增加可读性的函数。根据德摩根定理，`NOT (playlist is null OR playlist is blank)`等价于`(NOT playlist is null) AND (NOT playlist is blank)`。我更喜欢`filter`，`exclude`但`exclude`对于空白是必要的，因为没有不相等的字段查找。您也可以`exclude`使用空播放列表，但您不能将排除项组合到一个调用中，除非您使用 Q 函数，否则您会得到`NOT (playlist is null AND playlist is blank)`，这是不等价的。

# c# - 如何在 asp.net 中创建 .csv 文件？

> ID：13410835
> 
> 赞同：4
> 
> 时间：2012-11-16T05:10:21.660
> 
> 标签：c#, asp.net

如何从读取 asp.net 中的数据库创建 .CSV 文件？谁能建议我如何在 asp.net 中创建 .CSV 文件？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T05:21:44.293

检查这个：[将数据表导出为 CSV 文件格式](http://dotnetguts.blogspot.in/2007/01/exporting-datatable-to-csv-file-format.html)

```
public void CreateCSVFile(DataTable dt, string strFilePath)    
    {    
        #region Export Grid to CSV     

        // Create the CSV file to which grid data will be exported.    
        StreamWriter sw = new StreamWriter(strFilePath, false);

        // First we will write the headers.    
        //DataTable dt = m_dsProducts.Tables[0];    
        int iColCount = dt.Columns.Count;

        for (int i = 0; i < iColCount; i++)    
        {    
            sw.Write(dt.Columns[i]);    
            if (i < iColCount - 1)    
            {    
                sw.Write(",");    
            }    
        }    
        sw.Write(sw.NewLine);

        // Now write all the rows.    
        foreach (DataRow dr in dt.Rows)    
        {    
            for (int i = 0; i < iColCount; i++)    
            {    
                if (!Convert.IsDBNull(dr[i]))    
                {    
                    sw.Write(dr[i].ToString());    
                }    
                if (i < iColCount - 1)    
                {    
                    sw.Write(",");    
                }    
            }    
            sw.Write(sw.NewLine);    
        }    
        sw.Close(); 

        #endregion    
    } 
```

如果您试图强制下载始终提供另存为，则应将内容类型设置为 application/octet-stream。

**[资源：](https://stackoverflow.com/a/3780848/770710)**

```
 string attachment = "attachment; filename=MyCsvLol.csv";
    HttpContext.Current.Response.Clear();
    HttpContext.Current.Response.ClearHeaders();
    HttpContext.Current.Response.ClearContent();
    HttpContext.Current.Response.AddHeader("content-disposition", attachment);
    HttpContext.Current.Response.ContentType = "text/csv";
    HttpContext.Current.Response.AddHeader("Pragma", "public");

    var sb = new StringBuilder();
    foreach(var line in DataToExportToCSV)
      sb.AppendLine(TransformDataLineIntoCsv(line));

    HttpContext.Current.Response.Write(sb.ToString());
    HttpContext.Current.Response.End(); 
```

* * *

[最简单](https://stackoverflow.com/a/4884837/770710)的方法之一是使用[`FileHelpers Library`](http://filehelpers.sourceforge.net/)

```
FileHelpers.CsvEngine.DataTableToCsv(dataTable, filename); 
```

> ***WriteFile***（继承自 FileHelperEngine） 重载。将记录数组写入指定文件。
> 
> ***WriteStream***（继承自 FileHelperEngine） 重载。将记录数组写入指定的 Stream。
> 
> ***WriteString***（继承自 FileHelperEngine） 重载。将记录数组写入字符串并返回。

参考：
[写入 CSV 文件并导出？](https://stackoverflow.com/questions/3777874/write-to-csv-file-and-export-it)
[将数据导出到逗号分隔 (CSV) 文件，用于 Excel 等应用程序](http://www.asp.net/web-forms/videos/how-do-i/how-do-i-export-data-to-a-comma-delimited-csv-file-for-an-application-like-excel)
[，使用“保存文件”对话框将数据表导出到 CSV - C#](https://stackoverflow.com/questions/11158494/export-datatable-to-csv-with-save-file-dialog-box-c-sharp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T07:15:21.337

认为您正在寻找**CSV 文件的格式**。**它确实是一个结构非常简单**的普通文本文件。[您可以在此处参考 Wiki](http://en.wikipedia.org/wiki/Comma-separated_values#Basic_rules_and_examples)。

您可以通过从数据库中获取数据并根据需要将数据写入文本文件来自己制作。

以下是 CSV 文件内容的示例：

```
Year,Make,Model
1997,Ford,E350
2000,Mercury,Cougar 
```

文件中有 3 列：`Year`, `Make`, `Model`2 行数据是：`1997,Ford,E350`, `2000,Mercury,Cougar`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T05:21:24.773

[您可以在文章Read and Writing CSV Files in C#](http://www.blackbeltcoder.com/Articles/files/reading-and-writing-csv-files-in-c)中查看如何创建 CSV 文件。

[您可以在动态创建可下载内容](http://www.blackbeltcoder.com/Articles/asp/creating-downloadable-content-dynamically)一文中了解如何动态生成文件内容，但使其表现得像可下载文件一样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T05:21:26.000

为什么你不能：

1) 查询数据库（例如使用 SQL 阅读器），

2) 将您的 HTTP 响应标头 (response.ContentType) 设置为 MIME 类型“application/csv”

3) 以逗号分隔 (CSV) 格式写出 (response.Write) 结果集的每一行？

这是该方法的一个示例：

*   [在 asp.net 中编写 csv 文件](https://stackoverflow.com/questions/5000638/writing-csv-file-in-asp-net)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-16T05:24:22.763

Try this:

```
string filePath = @"C:\test.csv";  
string delimiter = ",";  

string[][] output = new string[][]{  
new string[]{"Col 1 Row 1", "Col 2 Row 1", "Col 3 Row 1"},  
new string[]{"Col1 Row 2", "Col2 Row 2", "Col3 Row 2"}  
};  
int length = output.GetLength(0);  
StringBuilder sb = new StringBuilder();  
for (int index = 0; index < length; index++)  
sb.AppendLine(string.Join(delimiter, output[index]));  

File.WriteAllText(filePath, sb.ToString()); 
```

for more [Help](http://www.codeproject.com/Articles/415732/Reading-and-Writing-CSV-Files-in-Csharp).

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-16T05:25:31.150

Anyway, you should find any robust CSV library for this, if you allow special characters like double quote, comma, space, etc... to appear in your file.

# resteasy - 无法序列化列表 to json using resteasy jackson provider and jaxb annotations I have added resteasy-jackson provider jar in my pom.xml I have one pojo class annotated with jaxb annotations : Reque 问问题 问问题 2012-11-16T05:10:35.473 648 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I have added resteasy-jackson provider jar in my pom.xml I have one pojo class annotated with jaxb annotations : Request.java @XmlElement public List getListSO() { return listSO; } I have written an resteasy client to access a rest webservice. I am passing this request object as a parameter to webservice. Rest Webservice @POST @Path("/authorizefields") @Produces("application/json; charset=ISO-8859-1") @Consumes("application/json; charset=ISO-8859-1") public Reply getFields(Request request) { } Now from rest client if i add some object to list say listSO.add(new Sample()); request.setListSO(listSO); and pass it to the rest webservice I am not able to get sample object in ws. Is there any jaxb or jackson annotation needed to put on list of object to support polymorphism? Create a instance in sub-model from User model using Django social auth I am using django social auth for social network login into my site and it works fine the user info is stored in the User model. But i have another model(ExtraInfo) that inherits the user model to store extra data. How do i create an new instance in the sub-model(ExtraInfo) when a new user is created in the User model by django social auth I tried SOCIAL_AUTH_USER_MODEL = 'myapp.CustomUser' but this does not work since create_user method is not available for the sub-model class ExtraInfo(User): phoneNo = models.CharField(max_length = 30) city = models.CharField(max_length = 30) state = models.CharField(max_length = 30) resteasy 4 0 回答 0 Related 1 asp.net - 像 facebook 的主页一样分页 2 javascript - 如何从嵌入的 extern svg 文件初始化 d3 svg 元素并对其进行操作 2 php - trim 期望参数是字符串 2 c - 快速排序算法行为异常 2 java - 无法在我的 java 文件中使用 jar 库 4 java - 由两个不同的类加载器打破单例 1 cassandra - 如何反序列化 DynamicComposite 列值？ 1 jquery - Limit the overlay of jQuery UI dialog 1 c# - 变量名“@KorisnickoIme”已被声明。变量名称在查询批处理或存储过程中必须是唯一的 0 android - 使用精明边缘的 OpenCV 对象检测 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：13410838
> 
> 赞同：1
> 
> 时间：
> 
> 标签：resteasy

I have added `resteasy-jackson` provider jar in my `pom.xml` I have one pojo class annotated with jaxb annotations :

**Request.java**

```
@XmlElement
public List<Object> getListSO() {
    return listSO;
} 
```

I have written an resteasy client to access a rest webservice. I am passing this request object as a parameter to webservice.

**Rest Webservice**

```
@POST
@Path("/authorizefields")
@Produces("application/json; charset=ISO-8859-1")
@Consumes("application/json; charset=ISO-8859-1")
public Reply getFields(Request request) {
} 
```

Now from rest client if i add some object to list say

```
listSO.add(new Sample());
request.setListSO(listSO); 
```

and pass it to the rest webservice I am not able to get sample object in ws. Is there any jaxb or jackson annotation needed to put on list of object to support polymorphism?

# java - 超类和子类的序列化

> ID：13410840
> 
> 赞同：0
> 
> 时间：2012-11-16T05:10:44.197
> 
> 标签：java

我怀疑使用场景 1 是否可以实现序列化。如果我扩展一个可以通过许多子类方式序列化的抽象类，这可能实现吗？正如我尝试使用场景 2 一样。

可序列化是否适用于所有bean，请帮助我。

**我怀疑场景 1 和场景 2 将相同或不同。**

//发送消息的方法 ::: sendMsgs(SerializableObject)

场景一：

```
public class EmailMaster implements Serializable 
{
// setters and getters
} 
```

场景二：

```
public abstract class MessageBean implements Serializable 
{ 
}

//whether EmailMaster and EmailEvent  will become serializable ?

public class EmailMaster extends MessageBean 
{
// setters and getters

public class EmailEvent extends MessageBean 
{
// setters and getters
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T05:15:34.397

这应该是`Serialilzable`。**扩展时`MessageBean`，默认所有扩展类都`MessageBean`继承抽象类的`Serializable`接口。`MessageBean`**

我建议`serialVersionUID`在每个扩展（子）类中分配唯一的。

**编辑：从序列化的角度来看，`scenario1`并`sceanrio2`没有什么不同**，但理论上它们是不同的，因为您在 中有一个额外的抽象类`sceario2`，它可以有更多的方法/属性，这些方法/属性也可以用于`EmailMaster`该类。

**在这两种情况下：`sendMsgs(SerializableObject)`应该工作。**根据中间抽象类的需要，在sceanrio1和scenario2之间做出决定。**如果您不需要抽象类用于任何其他目的，请使用方案 1。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T05:15:59.823

`Serializable`与任何其他接口一样，由抽象类的所有子类继承：

如果 A implements `Serializable`，则扩展 A 的任何类都将是`Serializable`

所以这两种场景都可以工作，但**在任何情况下，一个具体的 Serializable 类都必须有一个无参数的构造函数**。请参阅以下可[**序列化的 Javadoc**](http://docs.oracle.com/javase/6/docs/api/java/io/Serializable.html)：

> 类的可序列化性由实现 java.io.Serializable 接口的类启用。未实现此接口的类将不会对其任何状态进行序列化或反序列化。可序列化类的所有子类型本身都是可序列化的。序列化接口没有方法或字段，仅用于识别可序列化的语义。
> 
> 为了允许序列化不可序列化类的子类型，子类型可以负责保存和恢复超类型的公共、受保护和（如果可访问）包字段的状态。**仅当它扩展的类具有可访问的无参数构造函数来初始化类的 state 时，子类型才可以承担此责任**。如果不是这种情况，则声明类 Serializable 是错误的。将在运行时检测到错误。

此外，关于`Serial Version ID`对象：

> 序列化运行时与每个可序列化类关联一个版本号，称为**serialVersionUID，在反序列化期间使用该版本号来验证序列化对象的发送方和接收方是否已为该对象加载了与序列化兼容的类**。如果接收者为对象加载了一个类，该对象的 serialVersionUID 与相应发送者的类不同，则反序列化将导致 InvalidClassException。可序列化的类可以通过声明一个名为“serialVersionUID”的字段来显式声明自己的serialVersionUID，该字段必须是静态的、最终的和long类型：

```
ANY-ACCESS-MODIFIER static final long serialVersionUID = 42L; 
```

> **如果可序列化类没有显式声明 serialVersionUID，则序列化运行时将根据类的各个方面为该类计算默认的 serialVersionUID 值，如 Java(TM) 对象序列化规范中所述**。但是，强烈建议所有可序列化的类都显式声明 serialVersionUID 值，因为默认的 serialVersionUID 计算对类细节高度敏感，这些细节可能因编译器实现而异，因此可能在反序列化期间导致意外的 InvalidClassExceptions。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T05:13:27.087

尝试

```
Serializable emailMaster = new EmailMaster(); 
```

如果它有效，那么`EmailMaster` **is-a** `Serializable`。AFAIK，这绝对应该工作。

# xml - 如何在 XML 模式中定义用户定义数据类型？

> ID：13410842
> 
> 赞同：12
> 
> 时间：2012-11-16T05:10:53.880
> 
> 标签：xml, xsd

我已经定义了两种复杂的元素类型——Developer 和 App。

开发人员子项 - ID、姓名、电子邮件

应用子项 - ID、名称、**开发人员**

这里的**Developer** in App 复杂元素是指 Developer/ID。

如何在 xml 模式中定义这种关系。我正在使用 XML spy2013 编辑器。

我尝试在简单类型 Developer->ID 的声明中指定名称。并在 App->Developer 数据类型中使用此名称。但它给出了错误..

```
<?xml version="1.0" encoding="UTF-8"?>
<!-- edited with XMLSpy v2013 (x64) (http://www.altova.com) by Piyush (USC) -->
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified"          attributeFormDefault="unqualified">
<xs:element name="appinfo">
    <xs:complexType>
        <xs:sequence>
            <xs:element name="Developer">
                <xs:complexType>
                    <xs:all>
                        **<xs:element name="ID">**
                            <xs:simpleType>
                                <xs:restriction base="xs:string">
                                    <xs:length value="5"/>
                                    <xs:pattern value="[a-zA-Z][a-zA-Z][0-9][0-9][a-zA-Z]"/>
                                </xs:restriction>
                            </xs:simpleType>
                        </xs:element>
                        <xs:element name="Name">
                            <xs:simpleType>
                                <xs:restriction base="xs:string">
                                    <xs:pattern value="([a-zA-Z])+"/>
                                </xs:restriction>
                            </xs:simpleType>
                        </xs:element>
                        <xs:element name="Email">
                            <xs:simpleType>
                                <xs:restriction base="xs:string">
                                    <xs:pattern value="[^@]+@[^\.]+\..+"/>
                                </xs:restriction>
                            </xs:simpleType>
                        </xs:element>
                        <xs:element name="Company" type="xs:string"/>
                        <xs:element name="Website" type="xs:string"/>
                        <xs:element name="Phone">
                            <xs:simpleType>
                                <xs:restriction base="xs:string">
                                    <xs:length value="13"/>
                                </xs:restriction>
                            </xs:simpleType>
                        </xs:element>
                    </xs:all>
                </xs:complexType>
            </xs:element>
            <xs:element name="App">
                <xs:complexType>
                    <xs:all>
                        <xs:element name="ID">
                            <xs:simpleType>
                                <xs:restriction base="xs:string">
                                    <xs:length value="5"/>
                                    <xs:pattern value="[0-9][0-9][0-9][0-9][A-Z]"/>
                                </xs:restriction>
                            </xs:simpleType>
                        </xs:element>
                        <xs:element name="Name">
                            <xs:simpleType>
                                <xs:restriction base="xs:string">
                                    <xs:pattern value="([a-zA-Z])+"/>
                                </xs:restriction>
                            </xs:simpleType>
                        </xs:element>
                        <xs:element name="Developer" ***type="xs:anySimpleType"/>***
                        <xs:element name="Price">
                            <xs:simpleType>
                                <xs:restriction base="xs:float">
                                    <xs:minInclusive value="0.00"/>
                                    <xs:maxInclusive value="6.99"/>
                                </xs:restriction>
                            </xs:simpleType>
                        </xs:element>
                        <xs:element name="TabletCompatible" type="xs:boolean" minOccurs="0"/>
                        <xs:element name="Category">
                            <xs:simpleType>
                                <xs:restriction base="xs:string">
                                    <xs:enumeration value="Travel"/>
                                    <xs:enumeration value="Productivity"/>
                                    <xs:enumeration value="Game"/>
                                    <xs:enumeration value="Music"/>
                                    <xs:enumeration value="Education"/>
                                    <xs:enumeration value="Lifestyle"/>
                                </xs:restriction>
                            </xs:simpleType>
                        </xs:element>
                        <xs:element name="Platform">
                            <xs:simpleType>
                                <xs:restriction base="xs:string">
                                    <xs:enumeration value="Android"/>
                                    <xs:enumeration value="iOS"/>
                                    <xs:enumeration value="Blackberry"/>
                                </xs:restriction>
                            </xs:simpleType>
                        </xs:element>
                    </xs:all>
                </xs:complexType>
            </xs:element>
            <xs:element name="AppStat">
                <xs:complexType>
                    <xs:all>
                        <xs:element name="AppID" type="xs:anySimpleType"/>
                        <xs:element name="Statistics">
                            <xs:complexType>
                                <xs:sequence maxOccurs="unbounded">
                                    <xs:element name="Platform" type="xs:anySimpleType"/>
                                    <xs:element name="Downloads" type="xs:positiveInteger"/>
                                    <xs:element name="Rating">
                                        <xs:simpleType>
                                            <xs:restriction base="xs:float">
                                                <xs:minInclusive value="0.0"/>
                                                <xs:maxInclusive value="5.0"/>
                                            </xs:restriction>
                                        </xs:simpleType>
                                    </xs:element>
                                </xs:sequence>
                            </xs:complexType>
                        </xs:element>
                        <xs:element name="LastChecked" type="xs:date"/>
                    </xs:all>
                </xs:complexType>
            </xs:element>
        </xs:sequence>
    </xs:complexType>
</xs:element> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-19T19:42:07.183

为开发者 ID 使用通用简单类型的方法是在开头将其声明为命名类型：

```
<xs:schema 
  xmlns:xs="http://www.w3.org/2001/XMLSchema" 
  elementFormDefault="qualified"          
  attributeFormDefault="unqualified">

  <xs:simpleType name="developerID">
    <xs:restriction base="xs:string">
      <xs:length value="5"/>
      <xs:pattern value="[a-zA-Z][a-zA-Z][0-9][0-9][a-zA-Z]"/>
    </xs:restriction>
  </xs:simpleType>

  . . . 
```

然后使用它：

```
 . . . 
    <xs:element name="Developer" maxOccurs="unbounded">
      <xs:complexType>
        <xs:all>
          <xs:element name="ID" type="developerID">
 . . . 
    <xs:element name="App" maxOccurs="unbounded">
      <xs:complexType>
        <xs:all>
          . . .
          <xs:element name="Developer" type="developerID"/> 
```

但这还不足以创建一个`appinfo/App/Developer`只能包含一个开发人员在 中声明的 id 的约束`appinfo/Developer/ID`。为此，需要使用创建唯一键定义`xs:key`并使用它引用它`xs:keyref`（参见[此处](http://support.microsoft.com/kb/317688)）。

这是完整的 XSD：

```
<xs:schema 
  xmlns:xs="http://www.w3.org/2001/XMLSchema" 
  elementFormDefault="qualified"          
  attributeFormDefault="unqualified">

  <xs:simpleType name="developerID">
    <xs:restriction base="xs:string">
      <xs:length value="5"/>
      <xs:pattern value="[a-zA-Z][a-zA-Z][0-9][0-9][a-zA-Z]"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:element name="appinfo">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="Developer" maxOccurs="unbounded">
          <xs:complexType>
            <xs:all>
              <xs:element name="ID" type="developerID">
              </xs:element>
              <xs:element name="Name">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:pattern value="([a-zA-Z])+"/>
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="Email">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:pattern value="[^@]+@[^\.]+\..+"/>
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="Company" type="xs:string"/>
              <xs:element name="Website" type="xs:string"/>
              <xs:element name="Phone">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:length value="13"/>
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
            </xs:all>
          </xs:complexType>
        </xs:element>
        <xs:element name="App" maxOccurs="unbounded">
          <xs:complexType>
            <xs:all>
              <xs:element name="ID">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:length value="5"/>
                    <xs:pattern value="[0-9][0-9][0-9][0-9][A-Z]"/>
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="Name">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:pattern value="([a-zA-Z])+"/>
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="Developer" type="developerID"/>
              <xs:element name="Price">
                <xs:simpleType>
                  <xs:restriction base="xs:float">
                    <xs:minInclusive value="0.00"/>
                    <xs:maxInclusive value="6.99"/>
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="TabletCompatible" type="xs:boolean" minOccurs="0"/>
              <xs:element name="Category">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:enumeration value="Travel"/>
                    <xs:enumeration value="Productivity"/>
                    <xs:enumeration value="Game"/>
                    <xs:enumeration value="Music"/>
                    <xs:enumeration value="Education"/>
                    <xs:enumeration value="Lifestyle"/>
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="Platform">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:enumeration value="Android"/>
                    <xs:enumeration value="iOS"/>
                    <xs:enumeration value="Blackberry"/>
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
            </xs:all>
          </xs:complexType>
          <xs:keyref name="developerIDref" refer="developerID">
            <xs:selector xpath="."/>
            <xs:field xpath="Developer"/>
          </xs:keyref>
        </xs:element>
        <xs:element name="AppStat">
          <xs:complexType>
            <xs:all>
              <xs:element name="AppID" type="xs:anySimpleType"/>
              <xs:element name="Statistics">
                <xs:complexType>
                  <xs:sequence maxOccurs="unbounded">
                    <xs:element name="Platform" type="xs:anySimpleType"/>
                    <xs:element name="Downloads" type="xs:positiveInteger"/>
                    <xs:element name="Rating">
                      <xs:simpleType>
                        <xs:restriction base="xs:float">
                          <xs:minInclusive value="0.0"/>
                          <xs:maxInclusive value="5.0"/>
                        </xs:restriction>
                      </xs:simpleType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
              <xs:element name="LastChecked" type="xs:date"/>
            </xs:all>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
    <xs:key name="developerID">
      <xs:selector xpath="Developer"/>
      <xs:field xpath="ID"/>
    </xs:key>
  </xs:element>

</xs:schema> 
```

# c++ - C++ - 我应该将“operator+”设为常量吗？它是否返回参考？

> ID：13410848
> 
> 赞同：5
> 
> 时间：2012-11-16T05:11:36.830
> 
> 标签：c++, oop, reference, operators, operator-overloading

当一个类重载`operator+`时，是否应该将其声明为 const，因为它不对对象进行任何赋值？另外，我知道这一点`operator=`并`operator+=`返回一个参考，因为已经进行了分配。但是，怎么`operator+`办？当我实现它时，我是否应该复制当前对象，将给定对象添加到该对象，然后返回该值？

这是我所拥有的：

```
class Point
{
public:
    int x, int y;

    Point& operator += (const Point& other) {
        X += other.x;
        Y += other.y;
        return *this;
    }

    // The above seems pretty straightforward to me, but what about this?:
    Point operator + (const Point& other) const { // Should this be const?
        Point copy;
        copy.x = x + other.x;
        copy.y = y + other.y;
        return copy;
    }
}; 
```

这是正确的实现`operator+`吗？还是我忽略了一些可能导致麻烦或不需要/未定义的行为的东西？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T05:13:13.923

比这更好的是，你应该让它成为一个免费的功能：

```
Point operator+( Point lhs, const Point& rhs ) { // lhs is a copy
    lhs += rhs;
    return lhs;
} 
```

但是，是的，如果您将其保留为成员函数，它应该是`const`因为它不会修改左侧对象。

关于是否返回引用或副本，运算符重载的建议是*像基本类型那样做*（即像`int`s 那样做）。在这种情况下，两个整数的加法会返回一个单独的整数，该整数既不是对任何一个输入的引用。

# iphone - if else imageChange

> ID：13410851
> 
> 赞同：-2
> 
> 时间：2012-11-16T05:11:58.133
> 
> 标签：iphone, objective-c, ios, xcode

请帮忙。每次当我触摸我的 UIButton 时，如果我的 UIImageView.image = image1.png 并且我当时按下我的 UIButton，我的标签应该增加现有数字（1,2,3,4...），我的标签应该减少 -10。减少和增加工作，但如果我减少例如从 34 到 24，下次当我按下增加时，它会从 34 增加而不是从现有的 24 增加。

这是我的代码：

```
if (UIImageView.image == [UIImage imageNamed:@"image1.png"]) {
        NSString *dataMinus = [NSString stringWithFormat:@"%i",scoreIncrease - 10];
        [self.label setText:dataMinus];
    }

    else {

        NSString *dataToSend = [NSString stringWithFormat:@"%i",scoreIncrease++];

        [self.label setText:dataToSend];

      } 
```

请帮助解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T05:17:14.857

```
if (UIImageView.image == [UIImage imageNamed:@"image1.png"]) {
      scoreIncrease=scoreIncrease-10;
      NSString *dataMinus = [NSString stringWithFormat:@"%i",scoreIncrease];
      [self.label setText:dataMinus];
}
else {
      NSString *dataToSend = [NSString stringWithFormat:@"%i",scoreIncrease++];   
     [self.label setText:dataToSend];
} 
```

试试这个可能对你有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T05:14:31.217

像下面这样：

```
if (UIImageView.image == [UIImage imageNamed:@"image1.png"]) {
    scoreIncrease = scoreIncrease - 10;   // Store the new value
    NSString *dataMinus = [NSString stringWithFormat:@"%i", scoreIncrease];
    [self.label setText:dataMinus];
} 
else {
    NSString *dataToSend = [NSString stringWithFormat:@"%i",scoreIncrease++];
    [self.label setText:dataToSend];
} 
```

对于 else 条件，`scoreIncrease++`导致`scoreIncrease = scoreIncrease + 1`新值存储在`scoreIncrease`变量中，您不需要在语句中使用的额外语句`if`来存储新值`scoreIncrease`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T05:14:49.520

操作员将`++`使其打印分数，然后按预期将变量增加 1。但是，在您的第一种情况下，您根本没有更改变量的值 - 您只是告诉它打印任何值，减去 10。您需要另一行来实际减去 10 来修改变量。

# ubuntu - Ubuntu 10.04 上的虚拟主机。- 访问禁止错误 403

> ID：13410852
> 
> 赞同：1
> 
> 时间：2012-11-16T05:12:00.137
> 
> 标签：ubuntu, xampp, virtualhost

操作系统：Ubuntu 10.04 LTS

在 /opt 中下载并安装 Xampp for linux 1.8.1

当我转到本地主机时，我得到了标准的 xampp 起始页，一切正常，除了 phpmyadmin，我通过在 extra/httpd-xampp.conf 中添加“Required all Granted”行来修复它

```
# since XAMPP 1.4.3
<Directory "/opt/lampp/phpmyadmin">
    AllowOverride AuthConfig Limit
    Order allow,Deny
    Allow from all
#cahg 
    Require all granted
</Directory> 
```

我想开发多个站点，所以我使用我认为的标准方法设置了虚拟主机。

1.  在我的 httpd.conf 文件中包含 extra/httpd-vhosts.conf
2.  在 extra/httpd-vhosts.conf 文件中添加了一个虚拟主机容器。3.将以下内容添加到/etc/hosts文件中

    127.0.1.1 站点 1

我必须正确完成第一部分，因为它正在工作，但是当我导航到“站点 1”时，我的网络浏览器中出现以下错误

```
 Access forbidden!

You don't have permission to access the requested directory. There is either no index document or the directory is read-protected.

If you think this is a server error, please contact the webmaster.

Error 403

site1
Apache/2.4.3 (Unix) OpenSSL/1.0.1c PHP/5.4.7 
```

我的错误日志中的这个错误

```
[Fri Nov 16 17:14:22.481075 2012] [core:error] [pid 14465] (13)Permission denied: [client 127.0.1.1:46687] AH00035: access to / denied (filesystem path '/home/andrew/websites/site1') because search permissions are missing on a component of the path 
```

我尝试过的解决方案是将此 Directory 块添加到我的 httpd-vhosts.conf 文件中的目录标签中，其中 /home/andrew/websites/site 作为和属性。

```
Options Indexes FollowSymLinks ExecCGI Includes
AllowOverride All
Require all granted 
```

没有完全理解它的作用，因为它是我找到的解决方案，并且在 httpd.conf 中它指出`"You must explicitly permit access to web content directories in other <Directory> blocks below."`

我的问题是：允许 apache 访问我的各种虚拟主机的文件的最佳方法是什么？注意：在 httpd.conf 中用户是nobody，组设置为nogroup。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T13:53:57.430

首先在 httpd.conf 中将用户 nobody 更改为您的 ubuntu 用户名

然后在 httpd.conf 的末尾：

```
# XAMPP
Include etc/extra/httpd-xampp.conf 
```

其次确保您的虚拟文件夹属于您的用户名（如果我的记忆有效，您必须更改 phpmyadmin 的所有权）

然后在 httpd-xampp.conf 中创建别名：

```
Alias /phpmyadmin "/opt/lampp/phpmyadmin"
Alias /youralias "/path/to/folder" 
```

然后在同一个 httpd-xampp.conf 中允许目录：

```
<Directory "/path/to/folder">
  AllowOverride AuthConfig Limit
  Order allow,deny
  Allow from all
  Require all granted
</Directory> 
```

再见403

# javascript - 如何在 Javascript 中读取来自 Google 网络服务的 JSON 响应？

> ID：13410856
> 
> 赞同：3
> 
> 时间：2012-11-16T05:12:22.630
> 
> 标签：javascript, jquery

我试图找到两个位置之间的距离。为此，我使用了 Google 网络服务。我从该 Web 服务获得了 JSON 响应，但我无法在 javascript 函数中获得与该 JSON 响应的距离。

请参阅下面的代码：

```
function myjourneysubdetails(){
  var fp = jQuery('#fp').val();
  var tp = jQuery('#tp').val();
  var city = jQuery('#city').val();
  alert(fp);
  $.ajax({
    type : 'GET',
    url : 'http://maps.googleapis.com/maps/api/distancematrix/json?origins=Silk board&destinations=marathahalli&language=en-US&sensor=false',
    async: false,
    success : function(data) {
      alert("Success");
      var locObject = eval('(' + JSON.stringify(data) + ')');
      alert("locObject: "+locObject);
      alert("Destination: "+locObject.destination_addresses);
      var origins = data.origin_addresses;
      var destinations = data.destination_addresses;
      alert('destinations'+destinations);
      for (var i = 0; i < origins.length; i++) {
        var results = data.rows[i].elements;
        for (var j = 0; j < results.length; j++) {
          var element = results[j];
          var distance = element.distance.text;
          var duration = element.duration.text;
          var from = origins[i];
          var to = destinations[j];
          alert('distance'+distance);
        }
      }
    },
    error : function(xhr, type) {
      alert('Internal Error Occoured! '+xhr+' : '+type); 
    }
  });
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T07:20:15.980

您遇到的问题称为网络浏览器的“[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)”。

基本上，作为 Web 浏览器实施的众多安全措施之一（也是最早提出和实施的措施之一），您不允许向与网页 url 不同的域发出 ajax 请求。`maps.googleapis.com`因此，让您的代码按原样工作的唯一方法是，如果您能够说服 google 在域上托管您的页面。

显然那是行不通的。有几种解决方法。目前最流行的方法是 JSONP。不幸的是，谷歌地图不支持 JSONP。还有其他几种方法，例如使用 Flash 或 Java 小程序为您转发请求。但最简单、最兼容的方法是这个问题的原始解决方案：代理服务器上的请求。

代理之所以起作用，是因为编程语言和 Web 服务器与 Web 浏览器不同，它不关心您连接到 Internet 的哪个位置。有几种方法可以做到这一点。您可以编写一个 Web 应用程序来执行代理（例如 PHP 中的这个简单代理：[https](https://github.com/cowboy/php-simple-proxy/) ://github.com/cowboy/php-simple-proxy/ ）或配置您的 Web 服务器来代理您的请求（例如使用 apache mod_proxy 或 mod_rewrite），或者您可以使用安装在服务器上的专用代理服务器。

因此，例如，在您的代码中，您真的应该这样做：

```
$.ajax({
    type : 'GET',
    url : 'http://myserver.com/proxy/distancematrix/json?origins=Silk board&destinations=marathahalli&language=en-US&sensor=false', 
```

然后配置您的服务器以转发该请求，如下所示：

```
# Example of Apache mod_rewrite proxying:
RewriteEngine on
RewriteRule ^/proxy/(.*) http://maps.googleapis.com/maps/api/$1 [P] 
```

## 一句警告：

不管你怎么做，记住这是互联网。不要编写开放代理。如果您这样做，您将冒着黑客使用您的代理转发垃圾邮件、DOS 攻击等的风险，并且您将受到指责，因为它似乎来自您的服务器。防止这种情况的最好方法是将代理 url 硬编码到谷歌地图，这样人们就不能使用你的服务器连接到其他任何地方。只转发查询参数，而不是整个 url。

# c - popen 的目的是什么，为什么 fdopen 和 fgets 在某些情况下会更好地工作？

> ID：13410871
> 
> 赞同：0
> 
> 时间：2012-11-16T05:13:43.523
> 
> 标签：c, pipe, popen, fgets

我知道 popen 像文件一样打开管道以允许读/写，但是 fdopen 和 fputs/fgets 不是更有效吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T05:21:06.807

**[爆破](http://linux.die.net/man/3/popen)**

> popen() 函数通过创建管道、分叉和​​调用 shell 来打开一个进程

**[fgets](http://linux.die.net/man/3/fgets)**

> fgets() 从流中最多读入一个小于 size 的字符，并将它们存储到 s 指向的缓冲区中。

`popen`打开管道，`fgets`读取数据。一个不会比另一个“更好”，因为他们做不同的事情。我想你可以说`popen`如果你想打开管道`fgets`更好，而如果你想读取数据更好，但这就是推动它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T05:22:55.013

The [man page for popen](http://linux.die.net/man/3/popen): *opens a process by creating a pipe, forking, and invoking the shell.*

The [man page for fopen](http://linux.die.net/man/3/fopen): *opens the file whose name is the string pointed to by path and associates a stream with it.*

The [man page for fgets](http://us1.php.net/fgets): *reads in at most one less than size characters from stream and stores them into the buffer pointed to by s.*

`popen` is used to to open a pipe (usually to execute something like a shell command), and `fopen` is used to open a file that you can then use `fgets` to read from.

So `popen` and `fgets` are different functions that serve different purposes.

# html - 如何在 Outlook 2010 html 电子邮件中显示背景颜色？

> ID：13410874
> 
> 赞同：28
> 
> 时间：2012-11-16T05:14:17.940
> 
> 标签：html, css, outlook-2010

我的问题与 Microsoft Outlook 2010 有关。实际上我想在 Outlook 2010 中发布我的 HTML 时事通讯，但我面临的主要问题是样式问题，当时事通讯在 Outlook 2010 中发布时，它没有显示颜色。请帮助我如果您知道如何在 Outlook 中设置颜色和 CSS 样式，请退出。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-11-16T05:26:31.397

此方法适用于电子邮件客户端：

```
<table bgcolor="#3399ff" style="background:#3399ff;"><tr><td>test</td></tr></table> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-09T12:59:02.667

您也可以这样做 - 在 td 单元格中设置样式。

```
<table><tr><td bgcolor="#3399ff">test</td></tr></table> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-28T03:27:01.890

```
<table><tr><td bgcolor="#3399ff">test</td></tr></table> 
```

这在 Outlook 2010 上不起作用。如果要在 Outlook 中设置背景颜色的样式，则必须将背景样式放入样式属性中，如下所示

```
<table><tr><td bgcolor="#3399ff" style="background-color:#3399ff">test</td></tr></table> 
```

另外：如果您想设置背景图像的样式（不是颜色），默认的 Outlook 2007+ 将不支持它，但您可以做一些技巧来实现它。查看此链接： [https ://litmus.com/community/learning/25-understanding-background-images-in-email](https://litmus.com/community/learning/25-understanding-background-images-in-email) [http://backgrounds.cm/](http://backgrounds.cm/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-16T05:28:07.210

background-color 属性在 Outlook 2010 中有效。

参考： http: [//www.campaignmonitor.com/css/](http://www.campaignmonitor.com/css/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-08-26T02:15:15.690

我在同样的问题上苦苦挣扎，发现 Outlook 不像现代浏览器那样支持颜色的名称。我变了：

```
<tr style="background-color: lightgray"> 
```

到

```
<tr style="background-color: #d3d3d3"> 
```

Outlook 很喜欢它。

# html - 为什么所有主流浏览器都不支持 HTML5 新输入类型，如颜色、日期和 HTML5 新表单元素

> ID：13410883
> 
> 赞同：0
> 
> 时间：2012-11-16T05:15:33.280
> 
> 标签：html

我正在学习 HTML5。我看到 HTML5 新的输入类型，如颜色、日期、本地日期时间、范围、数字、月份等，并非在所有浏览器中都有效。他们这样做有什么理由吗？

并且输入类型`tel`也不适用于任何浏览器。我该如何测试它？我使用的是 Windows 7。它可以在 Mac 上运行吗？我正在从站点[W3 学校](http://www.w3schools.com/html/html5_form_input_types.asp)学习。流行浏览器的新版本是否支持这种类型的一件事？

同样的事情发生在 HTML5 的新表单元素上，比如`datalist`, `keygen`，`output`这 3 个元素不受任何版本的 Internet Explorer 支持。

我们是否应该将这些元素用于我们的需求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T05:21:44.443

如果您正在构建一个 Web 应用程序，您必须考虑该应用程序与所有当前主流浏览器的兼容性，因为许多人可能会将这些应用程序与他们自己选择的浏览器一起使用。

即使所有这些功能在最新的浏览器中都可用，我们也必须考虑浏览器兼容性问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T09:39:36.127

html5 很棒，但正如你所说的那样并不完全存在。但不要气馁，拥抱它，因为这是标记进化的下一步。现在有跨浏览器问题的选项，比如[modernizr](http://modernizr.com/ "现代化")，它让你有机会“利用很酷的新网络技术......，直到你不得不支持落后的浏览器”

# hive - 如何构建 hive ODBC 驱动程序？

> ID：13410885
> 
> 赞同：2
> 
> 时间：2012-11-16T05:15:44.110
> 
> 标签：hive, unixodbc

[我通过https://cwiki.apache.org/Hive/hiveodbc.html](https://cwiki.apache.org/Hive/hiveodbc.html)在 REDHAT 上构建了 Hive ODBC 驱动程序，每一步都成功，但最后我在 /Drivers/hive/.libs 中找不到驱动程序文件/， 为什么 ？

# asp.net - http连接什么时候关闭

> ID：13410890
> 
> 赞同：2
> 
> 时间：2012-11-16T05:16:17.610
> 
> 标签：asp.net, http

当客户端向 IIS 发送请求时，客户端和服务器之间就会建立连接。如果客户端请求 a.aspx，a.aspx 中的代码如下。

```
 protected void Page_Load(object sender, EventArgs e)
        {
            for (int i = 0; i < 10; i++)
            {
                Thread.Sleep(1000);
                Response.Write(i+"<br>");
                Response.Flush();
            }
        } 
```

所以这意味着连接保持活动10秒。对吗？【问题1】</p>

10秒后，连接会关闭？【问题2】</p>

如果我用 'while(true)' 编辑代码，如下所示：

```
while(true)
            {
                Thread.Sleep(1000);
                Response.Write(i+"<br>");
                Response.Flush();
            } 
```

连接总是存在的？？或者什么时候超时？【问题3】</p>

这些是我的问题。

# google-sheets - 还有一个如何将一行从一张纸复制到另一张纸？

> ID：13410891
> 
> 赞同：0
> 
> 时间：2012-11-16T05:16:18.310
> 
> 标签：google-sheets, google-spreadsheet-api

由于某种原因，此代码不会进行复制。请问我做错了什么？

```
 var targetSheetName="My Target"
    var targetSheet=SpreadsheetApp.getActiveSpreadsheet().getSheetByName(targetSheetName);      
    var sourceRange = SpreadsheetApp.getActiveSheet().getDataRange();    
    sourceRange.copyTo(targetSheet.getRange(targetSheet.getMaxRows()+1, 1)); 
```

我也试过 var sourceRange = SpreadsheetApp.getActiveSheet().getDataRange().getRow(); 分配数据，因为我不清楚 getDataRange() 正在获取什么范围的数据，所以我认为它可能正在获取整个活动工作表，因此在尝试复制一行时可能会失败。底线是我尝试了各种各样的东西，但似乎没有任何效果。

我在一个又一个例子中查看了一个又一个例子，并且它们都彼此如此不同，我不断遇到障碍，试图将它们所拥有的东西转换成我需要的东西。以上是我最终确定并针对我的使用进行了调整，但我仍然卡住了。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T19:57:53.697

> 要复制 1 行 - 然后从源工作表中删除。我想可能更多的是移动/附加。我想复制活动行

```
var ss = SpreadsheetApp.getActiveSpreadsheet();
var targetSheetName = "My Target";
var targetSheet = ss.getSheetByName(targetSheetName);
var sourceSheet = ss.getActiveSheet();      
var sourceRow = sourceSheet.getActiveRange().getRow();
var targetRow = targetSheet.getLastRow() + 1;
if (targetRow > targetSheet.getMaxRows()) targetSheet.insertRowAfter(targetRow - 1);
sourceSheet.getRange(sourceRow, 1, 1, sourceSheet.getLastColumn()).copyTo(targetSheet.getRange(targetRow, 1));   
sourceSheet.deleteRow(sourceRow); 
```

# web-services - 通过 SSL 域名调用 Web 服务

> ID：13410893
> 
> 赞同：0
> 
> 时间：2012-11-16T05:16:24.563
> 
> 标签：web-services, iis, ssl, ssl-certificate, iis-8

嘿，我似乎在通过 SSL 调用我的 Web 服务时遇到了问题。从非 SSL URL 调用它就可以了。

当尝试连接到 VB.net 中的 Web 服务时，它给了我这个：

![ws](../Images/de0001523a44dfd990b0329363e4076f.png)

所以我继续选择第一个选项（10/7/2012 到 10/7/2013。

但是，当我这样做时，我在网络浏览器中收到此错误：

![在此处输入图像描述](../Images/bbbaa17251c60dd386d4240853bf9afc.png)

访问我的 SSL 网站 ( [https://www.xxxxxxx.com](https://www.xxxxxxx.com) ) 会询问相同的问题（选择证书），然后显示与 VB.net 中相同的浏览器错误。

我需要在 web.config 文件中包含什么内容吗？

我创建的 IIS 证书如下所示：

![在此处输入图像描述](../Images/952f6d0d2c83e09f732857e4946f9e03.png)

访问我的正常网站 ( [http://www.xxxxxxx.com](http://www.xxxxxxx.com) ) 就可以了。

为了让它在 SSL 上工作，我忘了做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T05:37:10.383

您似乎正在使用 SSL 和客户端身份验证。在尝试访问该网站之前，请确保您已将 CA 证书和用户证书[您在提示中选择的]添加到服务器中的用户列表中。我知道如何在 apache 但不知道 IIS 但概念是相同的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T05:39:58.477

很可能你已经过度配置了 IIS（除非你真的想使用 SSL 和 Arun 指出的客户端身份验证）。

在某处设置了“需要客户端证书：无/接受/要求”，对于常规 SSL，默认为无。您需要添加证书的唯一地方是站点绑定...

旁注：[http](http://serverfault.com) ://serverfault.com可能是更好的地方......

# networking - IRCD-hybrid Connections Limited 在 4026

> ID：13410895
> 
> 赞同：2
> 
> 时间：2012-11-16T05:16:29.737
> 
> 标签：networking, amazon-ec2, chat, ubuntu-12.04, irc

我在 EC2 上运行 Ubuntu Server 12.04 实例，上面安装了 IRCD-hybrid 7.2。现在，我正在尝试通过建立一堆连接并查看服务器可以处理多少来对服务器进行负载测试。我有一个连接到房间的脚本。

我的问题是我最多可以在服务器中获得 4026 个连接。我的其他套接字连接似乎不起作用。为了安全起见，我将最大客户端设置为 100k，每个 ip 的最大数量设置为 50k。

当我跑步时

```
sysctl fs.file-nr -> fs.file-nr = 4576  0   1513750 
```

此外，我的 ulimits 已设置：

```
ulimit -S -> 65536 
```

我的 ulimit -n 是 1024，但是因为我可以获得 4026 个连接，所以我看不出它是如何影响它的。

```
ulimit -n -> 1024 
```

当我遇到这个问题时，内存和 CPU 也远没有达到最大值。

我的代码是这样的：

```
import random
import sys
import socket
import string
import time

n = ''.join(random.choice(string.letters) for i in xrange(40))

HOST="<MYHOST IS HERE>"
PORT=6666
NICK=n
IDENT=n
REALNAME=n
readbuffer=""

s=socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.connect((HOST, PORT))

s.send("NICK %s\r\n" % NICK)
s.send("USER %s %s %s :%s\r\n" % (IDENT, HOST, REALNAME, REALNAME))
s.send('JOIN #foobar\r\n')

while 1:
    readbuffer=readbuffer+s.recv(1024)
    temp=string.split(readbuffer, "\n")
    readbuffer=temp.pop( )

    for line in temp:
        line=string.rstrip(line)
        line=string.split(line)
        if 'PRIVMSG' in line:
            print line

    if(line[0]=="PING"):
        s.send("PONG %s\r\n" % line[1]) 
```

ircd-hybrid 上是否有设置此设置的设置？当我尝试与常规客户端连接并且我已经有 4026 个连接时，终端窗口显示“服务器已满”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T19:30:05.947

ulimit 有两种类型，硬的和软的。进程可以将特定资源的 ulimit 增加到硬限制。但是它可能没有进一步列出。

在我的机器上（ubuntu 12.04），软文件描述是 1024），但硬限制是 4096

```
$ulimit -n
1024
时刻@时刻：~/tmp 20:26:04 0
$ulimit -n -H
4096
时刻@时刻：~/tmp 20:26:16 0
$ulimit -n -S
1024

```

您的 irc 服务器增加到这个硬限制是完全合理的。

一个可怕的 hack 可以暂时增加你的 ulimit 像这样工作。

```
须藤
ulimit -n 10000
苏用户名

```

从长远来看，您需要在系统范围内增加限制，或者最好只为您正在运行的进程增加 ulimit。对于守护进程，我通常使用 upstart 配置文件中的 ulimit 指令来执行此操作。

一般来说*strace*可以用于调试这样的问题（这可能会显示早期调用以增加文件 ulimit）

# frameworks - Microsoft Sync Framework 标头详细信息表

> ID：13410897
> 
> 赞同：1
> 
> 时间：2012-11-16T05:16:47.847
> 
> 标签：frameworks, sync, microsoft-sync-framework

我有使用标识列作为外键的标题和详细信息表。在客户端和服务器之间进行同步时，有一种方法可以从服务器获取标头标识列值并在服务器的详细信息表中更新它。我正在尝试消除服务器和客户端中的重复错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T06:54:22.917

我将避免在同步中使用标识列...如果您要更改密钥以避免 PK 冲突，那么您将遇到另一个问题，即确保在所有副本上级联相同的更改。

查看这些博客文章，了解有关 Sync Framework 中 PK 的一些变通方法：

[上传同步 客户端和服务器主键不同的地方](http://jtabadero.wordpress.com/2011/03/14/upload-synchronization-where-the-client-and-server-primary-keys-are-different/)

[第 2 部分双向同步，其中客户端和服务器主键不同](http://jtabadero.wordpress.com/2011/03/14/part-2-bidirectional-synchronization-where-the-client-and-server-primary-keys-are-different/)

[第 3 部分同步客户端和服务器主键不同的表](http://jtabadero.wordpress.com/2011/07/20/part-3-synchronizing-tables-where-client-and-server-primary-keys-are-different/)

# android - 什么是“等级制父母”，它对一项新活动至关重要吗？

> ID：13410898
> 
> 赞同：2
> 
> 时间：2012-11-16T05:16:59.763
> 
> 标签：android, android-activity

我是整个 Android 的新手。

目前，我正在尝试为我的应用程序创建一个新的 Activity，并且我被要求为我的新 Activity 指定“Hierarchial Parent”。

![在此处输入图像描述](../Images/ccfae6cf388aafe46a2f731f8da89c00.png)

那么它对 Activity 至关重要吗？（即，如果我不指定它，我的程序会崩溃吗？）
它有什么用？

Android 开发者网站使用了示例：
Hierarchial Parent: com.example.myfirstapp.MainActivity

是语法吗？（看起来像包名+父类名）

提前致谢 ：}

# bash - 使用 shell 脚本启动“选择文件”对话框

> ID：13410902
> 
> 赞同：3
> 
> 时间：2012-11-16T05:17:29.633
> 
> 标签：bash, ubuntu

在 Ubuntu 中，是否可以从命令行启动“选择文件”对话框？我需要找到一个启动“选择文件”对话框的命令（以便我可以提示用户使用 shell 脚本导航到文件，然后返回文件路径。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T05:39:03.723

采用`zenity`

更多参考：http: [//library.gnome.org/users/zenity/stable/file-selection.html.en](http://library.gnome.org/users/zenity/stable/file-selection.html.en)

# math - 原点在屏幕左下角的正交投影

> ID：13410904
> 
> 赞同：0
> 
> 时间：2012-11-16T05:17:50.143
> 
> 标签：math, opengl, matrix, orthographic, projection-matrix

我正在使用 python OpenGL 绑定，并尝试只使用现代 opengl 调用。我有一个带有顶点的 VBO，我正在尝试使用传递给顶点着色器的正交投影矩阵进行渲染。

目前我正在用以下值计算我的投影矩阵：

```
from numpy import array

w = float(width)
h = float(height)
n = 0.5
f = 3.0

matrix = array([
                   [2/w,        0,        0,        0],
                   [  0,      2/h,        0,        0],
                   [  0,        0,  1/(f-n), -n/(f-n)],
                   [  0,        0,        0,        1],
               ], 'f')

#later
projectionUniform = glGetUniformLocation(shader, 'projectionMatrix')
glUniformMatrix4fv(projectionUniform, 1, GL_FALSE, matrix) 
```

我从这里得到的代码：

[正交投影矩阵的公式？](https://stackoverflow.com/questions/688240/formula-for-a-orthogonal-projection-matrix)

这似乎工作正常，但我希望我的 Origin 位于屏幕的左下角。这是一个我可以在我的矩阵上应用的函数，所以一切都“正常工作”，还是我必须手动翻译每个对象 w/2 h/2？

旁注：坐标是否会与像素位置匹配，并且可以正常工作？

因为我使用的是现代 OpenGL 技术，所以我认为我不应该使用 gluOrtho2d 或 GL_PROJECTION 调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T07:58:33.043

您可以使用更通用的投影矩阵，该矩阵还使用左右位置。

有关定义，请参见[维基百科](http://en.wikipedia.org/wiki/Orthographic_projection_%28geometry%29)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T22:50:15.390

```
glUniformMatrix4fv(projectionUniform, 1, GL_FALSE, matrix) 
```

您的矩阵以行优先顺序存储。所以你应该传递 GL_TRUE，或者你应该将你的矩阵更改为列优先。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T00:22:26.140

我还不完全熟悉投影，因为我最近才开始 OpenGL 编程，但是您当前的矩阵不转换任何点。对角线将应用缩放，但最右边的列将应用平移。Dirk 提供的链接为您提供了一个投影矩阵，它将使您的原点（0,0 是您想要的，是吗？）屏幕的左下角。

我用来执行此操作的矩阵（每一行实际上是 OpenGL 的一列）：

```
OrthoMat = mat4(
        vec4(2.0/(screenDim.s - left),  0.0,    0.0,    0.0),
        vec4(0.0,   2.0/(screenDim.t - bottom),     0.0,    0.0),
        vec4(0.0,   0.0,    -1 * (2.0/(zFar - zNear)),  0.0),
        vec4(-1.0 * (screenDim.s + left)/(screenDim.s - left), -1.0 * (screenDim.t + bottom)/(screenDim.t - bottom), -1.0 * (zFar + zNear)/(zFar - zNear), 1.0)
 ); 
```

screenDim 数学实际上是宽度或高度，因为 left 和 bottom 都设置为 0。zFar 和 zNear 分别是 1 和 -1（因为它是 2D，所以它们不是非常重要）。

该矩阵以像素为单位，顶点位置也需要以像素为单位。当您调整屏幕大小时，点 (0, 32) 也将始终位于同一位置。

希望这可以帮助。

编辑#1：要清楚，我所说的左/下/zfar/znear 值是*我*选择制作的值。您可以更改这些您认为合适的方式。

# iphone - 保持uiswitch开启

> ID：13410907
> 
> 赞同：0
> 
> 时间：2012-11-16T05:18:04.380
> 
> 标签：iphone, xcode, uiswitch

我想我已经按照说明在有人登录或退出应用程序后打开或关闭 uiswith。我知道我错过了一些东西......也在

但是，它并没有节省。此外，我没有得到任何编译错误，只是当我切换视图时，它会丢失存储的值。

先感谢您

```
-(IBAction)hintsPressed:(UISwitch *)sender {
    BOOL value = [sender isOn];
    [((FirstAppAppDelegate*)MI_SHARED_DELEGATE) setHintsOnorOff:&value];

    if ([((FirstAppAppDelegate*)MI_SHARED_DELEGATE) hints]==NO) {
        [[NSUserDefaults standardUserDefaults] setValue:[NSNumber numberWithBool:NO] forKey:hintsOnOff];

    }else if([((FirstAppAppDelegate*)MI_SHARED_DELEGATE) hints]==YES) {
        [[NSUserDefaults standardUserDefaults] setValue:[NSNumber numberWithBool:YES] forKey:hintsOnOff];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T05:29:59.937

试试这个：

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

// your code, [defaults setValue: ...

[defaults synchronize]; 
```

这是保留默认值的最后一步。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T05:40:16.293

试试这行代码

```
-(IBAction)hintsPressed:(UISwitch *)sender 
{
   BOOL value = [sender isOn];
   NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
   [defaults setValue:[NSNumber numberWithBool:value] forKey:hintsOnOff];
   [defaults synchronize];
} 
```

愿这能解决你的问题:)

# websocket - 如何在 websocket 中唯一标识用户？

> ID：13410909
> 
> 赞同：1
> 
> 时间：2012-11-16T05:18:03.763
> 
> 标签：websocket, socket.io

我很困惑如何为每个连接到 websocket 的新人提供一个唯一标识，该标识只能影响他自己在服务器上的信息。websocket 上的信息是广播的，所以每个人都从服务器接收信息。我为此使用套接字 io。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T20:44:59.547

没有足够的信息来提供适合您需求的答案，但是这是使用 express.js 内存存储与套接字共享会话数据的常用方法。

```
var sio = require('socket.io'),
parseCookies = require('connect').utils.parseSignedCookies

// authorization for sockets
io.set('authorization', function (hsData, accept) {
    //get the handshake data for the socket
  if(hsData.headers.cookie) {
    //parse the cookies from the handshake data
    var cookies = parseCookies(cookie.parse(hsData.headers.cookie), "session secret"),
    sid = cookies["session path"];
    //load your session store and find the user
    sessionStore.load(sid, function(err, session) {
      hsData.user = session.user;
      return accept(null, true);
    });
  } else {
    return accept('No cookie transmitted.', false);
  }
});

io.sockets.on('connection', function(socket){
    //now the socket will have user data
  var user = socket.handshake.user,
 }); 
```

看看[Baloons.IO](https://github.com/gravityonmars/Balloons.IO)，看看一些很棒的源代码，其中会话和 socket.io 使用 redis 存储和谐相处。

希望这可以帮助！

# php - Tumblr XML 未加载

> ID：13410911
> 
> 赞同：5
> 
> 时间：2012-11-16T05:18:16.330
> 
> 标签：php, simplexml, tumblr

我根据在另一个问题中找到的一些代码实现了以下代码：
[Select specific Tumblr XML values with PHP](https://stackoverflow.com/questions/10853851/select-specific-tumblr-xml-values-with-php)

```
function getPhoto($photos, $desiredWidth) {
$currentPhoto = NULL;
$currentDelta = PHP_INT_MAX;
foreach ($photos as $photo) {
    $delta = abs($desiredWidth - $photo['max-width']);
    if ($photo['max-width'] <= $desiredWidth && $delta < $currentDelta) {
        $currentPhoto = $photo;
        $currentDelta = $delta;
    }
}
return $currentPhoto;
}

$request_url = "http://ACCOUNT.tumblr.com/api/read?type=photo&start=0&num=30";
//$request_url = "tumblr.xml";
$xml = simplexml_load_file($request_url);

foreach ($xml->posts->post as $post) {
echo "<div class=\"item\"><a href='".$post['url']."'><img src='".getPhoto($post->{'photo-url'}, 250)."' width=\"250\" /></a></div>"; 
} 
```

这段代码在我的开发站点上运行良好，但是当我将它推送到另一台服务器上时，它不会从 Tumblr 加载外部 XML ......它加载本地文本 XML 就好了（在代码中注释掉）。

我正在等待从客户那里获取帐户凭据，因此我可以联系客户服务并与他们合作...

与此同时，有没有人有任何想法可能导致这种情况？
服务器设置？
缺少 PHP 代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T00:47:49.733

所以，我最终使用 cURL 来加载 XML ......这是有效的代码：

```
function getPhoto($photos, $desiredWidth) {
    $currentPhoto = NULL;
    $currentDelta = PHP_INT_MAX;
    foreach ($photos as $photo) {
        $delta = abs($desiredWidth - $photo['max-width']);
        if ($photo['max-width'] <= $desiredWidth && $delta < $currentDelta) {
            $currentPhoto = $photo;
            $currentDelta = $delta;
        }
    }
    return $currentPhoto;
}

$url="http://ACCOUNT.tumblr.com/api/read?type=photo&start=0&num=30";
$ch = curl_init();      
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_URL, $url);    // get the url contents

$data = curl_exec($ch); // execute curl request
curl_close($ch); // close curl request

$xml = new SimpleXMLElement($data);

foreach($xml->posts->post as $post) {
    echo "<div class=\"item\"><a href='".$post['url']."'><img src='".getPhoto($post->{'photo-url'}, 250)."' width=\"250\" /></a></div>"; 
} 
```

# asp.net - asp.net 错误““temp1.dll”和“temp2\. dll”中都存在“typeName”类型

> ID：13410912
> 
> 赞同：1
> 
> 时间：2012-11-16T05:18:25.477
> 
> 标签：asp.net

当我建立一个网站时，我没有遇到错误，但是当我尝试发布网站时，会出现错误：

```
Type 'AttachmentsControl' exists in both в 'c:\Users\userName\AppData\Local\Temp\Temporary ASP.NET Files\web.ui.application\8c85983a\5425041a\App_Web_mivbsgll.dll' and  'c:\Users\userName\AppData\Local\Temp\Temporary ASP.NET Files\web.ui.application\8c85983a\5425041a\App_Web_dhvduebi.dll' 
```

我尝试将 batch="false" 属性添加到 web.config 文件的“编译”元素，但这没有帮助。

我也尝试重命名一个类，但在这种情况下会出现另一个错误：

```
Server Error in '/projectName' Application.
Thread was being aborted. 
```

有谁能够帮助我？PS：最奇怪的是我从MS TFS那里得到了这个项目，我的同事将此项目添加到TFS，没有错误地发布这个站点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T05:24:29.923

最可能的原因可能是您正在上传源文件以及已编译的发布输出，同时源文件被修改。

当您看到此错误时，asp.net 正在尝试做的是编译文件并创建应用程序，结果是，您有两个同名的类型声明，一个在 dll 中，一个在源代码中。

尝试删除您上传的 dll 文件（从 bin 目录中），它应该可以解决问题。

# r - 如何计算和测试总和并重复操作

> ID：13410915
> 
> 赞同：4
> 
> 时间：2012-11-16T05:18:44.293
> 
> 标签：r, s

我需要测试每个因素的“比索”值（见下面的复制代码）。一个因素是否达到“比索”总和的 50%，每个因素的值应粘贴到一个新对象“结果”中，否则，R 应评估哪个因素具有“比索”的最低聚合值，并考虑下一列中的因子再次汇总“比索”。基本上，此过程将最低得分的因素替换为下一个因素。该过程应该重复，直到一个因素超过 50% 的阈值。所以我的问题是，我从哪里开始？

```
set.seed(51)
Data <- sapply(1:100, function(x) sample(1:10, size=5))
Data <- data.frame(t(Data))
names(Data) <- letters[1:5]
Data$peso <- sample(0:3.5, 100, rep=TRUE) 
```

它应该像

```
If your first two rows are: 
  a  b  c  d  e peso
  8  2  3  7  9    1
  8  3  4  5  7    3
  9  7  4 10  1    2
 10  3  4  5  7    3   

What would you like for the total?  
      Totals_08  = 4
      Totals_09  = 2
      Totals_10  = 3
      etc? 
```

因此，因子 8 获得了更大的份额 4/(4+2+3) = 0.4444444，但在 a 轮中没有达到 50% 的阈值。因此，我需要更多的东西：重复聚合，但现在考虑“b”列中的因子 7 而不是“a”列中的因子 9，因为它在第一轮中获得了最低的聚合值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T05:21:29.610

目前尚不清楚您是否已经有了因素清单。如果您没有它，并且正在从数据集中获取它，您可以通过几种不同的方式获取它：

```
# Get a list of all the factors
myFactors <- levels(Data[[1]])  # If actual factors.
myFactors <-   sort(unique(unlist(Data)))  # Otherwise use similar to this line 
```

* * *

然后要计算每个因子的总计，您可以执行以下操作

```
Totals <- 
 colSums(sapply(myFactors, function(fctr) 
     # calculate totals per fctr
     as.integer(Data$peso) * rowSums(fctr == subset(Data, select= -peso)) 
   ))

names(Totals) <- myFactors 
```

这使

```
Totals
#    1   2   3   4   5   6   7   8   9  10 
#  132 153 142 122 103 135 118 144 148 128 
```

* * *

下一个：我不确定之后是否要与比索的总和或总数的总和进行比较。以下是两个选项，分为几个步骤：

```
# Calculate the total of all the Totals:
TotalSum <- sum(Totals)

# See percentage for each:
Totals / TotalSum
Totals / sum(as.integer(Data$peso))

# See which, if any, is greater than 50%
Totals / TotalSum > 0.50
Totals / sum(as.integer(Data$peso)) > 0.50

# Using Which to identify the ones you are looking for
which(Totals / TotalSum > 0.50)
which(Totals / sum(as.integer(Data$peso)) > 0.50) 
```

* * *

### 请注意您对比索的抽样

您取了 的样本`0:3.5`，但是，该`x:y`序列仅给出整数。如果你想要分数，你可以使用`seq()`或者你可以取一个更大的序列，然后适当地划分：

```
option1 <-  (0:7) / 2
option2 <-  seq(from=0, to=3.5, by=0.5) 
```

如果您想要 0:3 的整数以及 3.5 的值，请使用 c()

```
 option3 <- c(0:3, 3.5) 
```

# ios - iOS下服务器收据验证是否推荐使用https连接

> ID：13410916
> 
> 赞同：1
> 
> 时间：2012-11-16T05:18:46.110
> 
> 标签：ios, in-app-purchase

我正在设置服务器来为 App Store 上的 IAP 进行收据验证。

我的问题是：我应该将 iOS 设备和**我的服务器**之间的连接作为 https 连接，还是 http 就足够了？我看到的所有例子都只是使用http。

似乎如果我使用http，那么它对重定向DNS的人来说是可敬的。或者那不重要？好像会。

当然，我是个小土豆，可能不值得这么麻烦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T05:28:40.210

当您传递一些凭证或敏感信息（如金融交易）时，总是希望使用 https（加密）连接。可能任何人都不可能破坏交易本身，但您仍然违反了您的客户可能不喜欢的金融交易的保密性。

但是，不仅仅是 https 可以提供帮助，您还可以在应用程序中实施自定义加密以确保通信安全（可能安全性不强，但在您确实不需要矫枉过正的情况下确实有效）。尝试使用预共享密钥加密数据并在服务器上解密（我自己做了很多次）。

# ruby-on-rails - 设计：authenticate_user 的自定义后备功能

> ID：13410917
> 
> 赞同：2
> 
> 时间：2012-11-16T05:18:50.687
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

我想编写一个在用户未通过身份验证时设置 cookie 的函数。所以在authenticate_user之后！如果用户未通过身份验证，则设置 cookie。这可以在设计中完成。我尝试通过自定义 authenticate_user 来做到这一点！功能，但找不到任何东西。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T05:28:37.443

你是`before_filter`用来打电话的`authenticate_user!`吗？你不能这样做：

```
before_filter do
  authenticate_user!
  your_cookie_method if current_user.nil?
end 
```

# python - 将彩色图像转换为 libsvm 的输入向量

> ID：13410918
> 
> 赞同：2
> 
> 时间：2012-11-16T05:18:50.890
> 
> 标签：python, computer-vision, libsvm

我有一组标记的训练图像（颜色）。我想将这些图像用作 libsvm 的输入。是否有 python 库/函数/代码可以帮助我将此彩色图像转换为 libsvm 将接受作为输入的格式？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T12:18:51.987

当我在 python 中完成此操作时，我只是将图像转换为一个数组（尽管我一直在处理灰度图像），例如：

```
outpath="images\\ts\\"
fp = open(outpath + 'trainingset.dump','wb');
dirList = os.listdir(path)
for fname in dirList:
if '.jpg' in fname:
    im = array(Image.open(path + "\\" + fname).convert('L'))
    pickle.dump(im,fp)
    pickle.dump(1,fp)
fp.close() 
```

在将其传递给 libsvm 时，您需要将其转换为列表：

```
path="images\\ts\\trainingset.dump"
fp = open(path, "r")
im = pickle.load(fp)
label = pickle.load(fp)
imlist = im.tolist()
imlist = [item for sublist in imlist for item in sublist]
y.append(label)
x.append(imlist)

print "Setting up the SVM problem"
prob = svm_problem(y, x)

param = svm_parameter('-t 2 -g 0.00001')
param.C = 1

print "Starting the training process"
m=svm_train(prob, param)

print "Storing the model"

svm_save_model(model, m) 
```

请注意，虽然我有使用 libsvm 的经验，但我大部分时间都在 C++ 上使用它。我是 python 新手，这可能不是最好的方法，它只是对我有用的方式。另外，如果您想保持颜色，可以尝试不将图像转换为灰度，我自己没有尝试过，但这应该可以，而不是：

```
im = array(Image.open(path + "\\" + fname).convert('L')) 
```

用这个：

```
im = array(Image.open(path + "\\" + fname)) 
```

希望这会有所帮助。

# jsf-2 - Primefaces 的 treeTable 中的 java.lang.StackOverFlow

> ID：13410922
> 
> 赞同：3
> 
> 时间：2012-11-16T05:19:21.310
> 
> 标签：jsf-2, tree, primefaces, jboss7.x, stack-overflow

我使用这段代码：

**JSF：**

```
<p:treeTable id="treeSkill" value="#{skillManager.rootSkill}"
    var="skill" selectionMode="single" widgetVar="skillsTreeTable"
style="border: 0;">
    <p:ajax event="expand"
        listener="#{skillManager.expandNodeListener}" />
    <p:column> ..... </p:column>
 <p/treeTable> 
```

**技能经理：**

```
@Named
@SessionScoped
public class SkillManager implements Serializable {
    private static final long serialVersionUID = 1L;

    private TreeNode rootSkill;

    public SkillManager() {
       initSkillTree();
    }

    public void expandNodeListener(NodeExpandEvent nee) {
       TreeNode treeNode = nee.getTreeNode();

       if (treeNode instanceof FetchChildren)
          ((FetchChildren) treeNode).fetchChildren();

       if (treeNode instanceof LazySkillTreeNode)
          ((LazySkillTreeNode) treeNode).fetchSubchildren();
    }

    private void initSkillTree() {
       rootSkill = new DefaultTreeNode("Root", null);
       Skill realRootSkill = HrDaoFactory.getInstance().getSkillDAO().getRootSkill();
       TreeNode realRootNode = new LazySkillTreeNode(realRootSkill, rootSkill);

       for (Skill skill : realRootSkill.getChildrensSkills()) {
           LazySkillTreeNode node = new LazySkillTreeNode(skill, realRootNode);
           node.fetchChildren();
       }

       RequestContext.getCurrentInstance().update("woCatalogTabView:skillTreeForm");
    } 
```

}

**懒惰技能树节点：**

```
public class LazySkillTreeNode extends LazyTreeNode implements FetchChildren {
    private static final long serialVersionUID = 8856168173751148652L;

    private boolean childrenFetched;

    public LazySkillTreeNode(Object data, TreeNode parent) {
       super(data, parent);
    }

    @Override
    public void fetchChildren() {
    if (childrenFetched)
        return;

    for (Skill skill : ((Skill) super.getData()).getChildrensSkills())
        new LazySkillTreeNode(skill, this);

    childrenFetched = true;
    }

} 
```

**懒树节点：**

```
public abstract class LazyTreeNode extends DefaultTreeNode {
    private static final long serialVersionUID = 8839307424434170537L;

    private boolean subChildrenFetched;

    public LazyTreeNode(Object data, TreeNode parent) {
        super(data, parent);
    }

    public void fetchSubchildren() {
    if (subChildrenFetched || isLeaf())
        return;

    List<TreeNode> treeNodeList = getChildren();

    for (TreeNode node : treeNodeList) {
        if (node instanceof FetchChildren)
        ((FetchChildren) node).fetchChildren();
    }

    subChildrenFetched = true;
    }

} 
```

一切正常，但是如果添加/删除元素（在所有这些操作之后，我们为重建树调用方法*initSkillTree()*）很多次，或者如果 2 个或更多用户开始这样做，我们开始收到来自服务器的响应细绳：

```
<?xml version='1.0' encoding='UTF-8'?>
<partial-response><error><error-name>class java.lang.StackOverflowError</error-name><error-message><![CDATA[]]></error-message></error></partial-response> 
```

我没有任何关于错误的信息的其他问题。日志文件中没有信息。在 server.log 中什么都没有。

我们使用：JSF (Mojarra 2.14)、Primefaces 3.41、JBOSS 7。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T11:27:00.077

最后错误出现在 Controller 类 where 方法中：

```
public void addOrUpdateSkill(Skill skill) {
Session session = null;
try {
    session = HibernateUtil.getCurrentSession();
    session.beginTransaction();
    session.saveOrUpdate(skill);
    session.getTransaction().commit();
    evictAllSkillsFromSession();
} catch (Throwable e) {
    logger.fatal(skill, e);
    if (session.getTransaction() != null && session.getTransaction().isActive())
    session.getTransaction().rollback();
    throw new RuntimeException(e);
}
} 
```

并且堆栈跟踪出现在“logger.fatal(skill, e);”行中 您必须通过第一个参数而不是实体对象传递错误消息。出现错误是因为它是 Skill 类的 toString() 方法实现：

```
@Entity
@Table(name = "SKILLS", schema = AppData.HR_SCHEMA)
public class Skill implements Serializable {
private static final long serialVersionUID = -2728239519286686549L;

@Id
@SequenceGenerator(name = "SKILLS_ID_GENERATOR", sequenceName = AppData.HR_SCHEMA + ".SKILLS_ID_SEQ")
@GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "SKILLS_ID_GENERATOR")
private BigDecimal id;

@Column(name = "NAME_ENG")
private String nameEng;

@Temporal(TemporalType.TIMESTAMP)
@Column(name = "UPDATED_AT")
private Date updatedAt;

@ManyToOne(fetch = FetchType.LAZY)
@JoinColumn(name = "UPDATED_BY", referencedColumnName = "USER_ID")
private User updatedBy;

@ManyToOne(fetch = FetchType.LAZY)
@JoinColumn(name = "PARENT_ID")
private Skill parentSkill;

@OneToMany(mappedBy = "parentSkill", fetch = FetchType.LAZY, orphanRemoval = true)
private List<Skill> childrensSkills;

@Column(name = "DESCRIPTION")
private String description;

@OneToMany(orphanRemoval = true, mappedBy = "skill")
private List<SkillJoinedAction> skillJoinedActions;

@OneToMany(orphanRemoval = true, mappedBy = "skill")
private List<SkillJoinedEmployee> skillJoinedEmployees;

public Skill() {
}

public Skill(String nameEng, User updateBy, String description) {
this.nameEng = nameEng;
this.updatedBy = updateBy;
this.updatedAt = new Date();
this.setDescription(description);
}

public BigDecimal getId() {
return id;
}

public void setId(BigDecimal id) {
this.id = id;
}

public String getNameEng() {
return this.nameEng;
}

public void setNameEng(String nameEng) {
this.nameEng = nameEng;
}

public Date getUpdatedAt() {
return this.updatedAt;
}

public void setUpdatedAt(Date updatedAt) {
this.updatedAt = updatedAt;
}

public User getUpdatedBy() {
return updatedBy;
}

public void setUpdatedBy(User updatedBy) {
this.updatedBy = updatedBy;
}

public List<Skill> getChildrensSkills() {
return childrensSkills;
}

public void setChildrensSkills(List<Skill> childrensSkills) {
this.childrensSkills = childrensSkills;
}

public Skill getParentSkill() {
return parentSkill;
}

public void setParentSkill(Skill parentSkill) {
this.parentSkill = parentSkill;
}

@Override
public String toString() {
return "Skill [id=" + id + ", nameEng=" + nameEng + ", updatedAt=" + updatedAt + ", updatedBy=" + updatedBy + ", parentSkill="
    + parentSkill + ", childrensSkills=" + childrensSkills + "]";
}

public String getDescription() {
return description;
}

public void setDescription(String description) {
this.description = description;
}

public List<SkillJoinedAction> getSkillJoinedActions() {
return skillJoinedActions;
}

public void setSkillJoinedActions(List<SkillJoinedAction> skillJoinedActions) {
this.skillJoinedActions = skillJoinedActions;
}

public List<SkillJoinedEmployee> getSkillJoinedEmployees() {
return skillJoinedEmployees;
}

public void setSkillJoinedEmployees(List<SkillJoinedEmployee> skillJoinedEmployees) {
this.skillJoinedEmployees = skillJoinedEmployees;
} 
```

}

正如您在方法中看到的：

```
 @Override
public String toString() {
return "Skill [id=" + id + ", nameEng=" + nameEng + ", updatedAt=" + updatedAt + ", updatedBy=" + updatedBy + ", parentSkill="
    + parentSkill + ", childrensSkills=" + childrensSkills + "]";
} 
```

在 parentSkill 上被称为方法 toString()，而 parentSkill 上又调用 toString() ...无限递归。

# eclipse - Tomcat：无法连接进行远程调试

> ID：13410927
> 
> 赞同：0
> 
> 时间：2012-11-16T05:20:15.077
> 
> 标签：eclipse, debugging, tomcat, spring-mvc, remote-debugging

我正在尝试使用 Eclipse 的远程调试选项调试服务器端代码（在 Tomcat 上运行）。这个问题间歇性地出现，其余时间它工作得很好。我已经确定 1) 服务器端有最新的 Jars - 我复制了 .war 文件并重新部署。2) Tomcat 在调试模式下运行，防火墙设置已修改为允许调试端口上的连接。3）验证在尝试连接之前，在服务器上侦听调试端口，然后显示连接已建立。

但是 Eclipse 会抛出一个错误弹出窗口，说“它无法连接到远程 VM”，有时它会超时等待数据包#

我应该检查更多的东西吗？eclipse 是否还有更多的日志文件可以说明问题所在？请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T13:07:21.593

有时，如果您的调试器无法连接到调试器并出现诸如“等待数据包#packetnumber 时超时”之类的错误，这可能是一种解决方案，那么这可能是因为超时设置低和网络速度慢。可以使用 Eclipse 首选项中的调试设置来增加超时值。

# html - 我如何使它成为一个类别列表而不是下拉列表

> ID：13410933
> 
> 赞同：0
> 
> 时间：2012-11-16T05:21:10.473
> 
> 标签：html, ruby-on-rails, ruby

我正在尝试采用当前代码`<%= search_form.collection_select :tag_id, @tags, :id, :name %>`并希望它垂直列出我拥有的标签。现在它在下拉菜单中列出它们。我对 ruby​​ 和 rail 非常陌生，所以我也愿意接受任何人推荐的电子书或教程的建议。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T05:26:16.377

```
<ul>
<% @tags.each do |tag| %>
  <li><%= tag.name %></li>
<% end %>
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T05:30:59.370

任何一个：

```
<ul>
<%= @tags.map { |tag| content_tag(:li, tag.name) }.join
</ul> 
```

或者：

```
<ul>
<% @tags.each { |tag| concat(content_tag(:li, tag.name)) }
</ul> 
```

# gdb - 在 GDB 中的每一行设置断点

> ID：13410941
> 
> 赞同：9
> 
> 时间：2012-11-16T05:21:29.753
> 
> 标签：gdb

有没有办法使用 GDB 在代码中的每一行设置断点？显然我不想击中`b *addr`每一行，所以我想知道是否有一种快速的方法来做到这一点。

**编辑** 请注意，我正在运行由其他人创建的二进制文件，并且我无权访问源代码。不幸的是，该二进制文件没有使用 -g 标志编译。因此，我不能只单步执行代码中的每一行。

**进一步编辑** 正如 Jason 在下面指出的那样，只要您使用`si`or `ni`，您确实可以单步执行代码，而不仅仅是简单地`s`(step) 或`n`(next)。`n`但是，如果源代码是使用 -g 编译的，或者`s`工作正常，但它会逐步执行源代码行，而不是像在没有 -g 的情况下编译的二进制文件中那样逐步执行每个汇编指令`ni`或`si`do。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T07:16:13.360

使用`si`( `stepi`) 指示逐步执行代码。您可以使用`ni`( `nexti`) 跳过您不感兴趣的库函数。如果您不小心踏入其中之一，`finish`应该会让您回到原来的例程。在这个级别工作的人通常将 gdb 设置为显示接下来将要执行的几条指令，例如`disp/3i $pc`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T05:30:21.397

您不能将断点放在执行的第一行，然后单步执行每一行吗？这取决于你试图通过在每一行上设置断点来实现什么。如果你想计算表达式，你可以按照我的逻辑来做（逐行遍历）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-27T16:08:38.940

PowerPC 具有对范围断点的硬件支持，而 GCB 提供：

```
break-range start end 
```

在那个拱门里。所以我认为你可以打破整个内存地址，或者整个文本部分（未经测试）。

该命令在 x86 上失败。

文档：[https ://sourceware.org/gdb/onlinedocs/gdb.html#index-break_002drange-1548](https://sourceware.org/gdb/onlinedocs/gdb.html#index-break_002drange-1548)

# android - 反复膨胀地图视图

> ID：13410945
> 
> 赞同：0
> 
> 时间：2012-11-16T05:22:02.913
> 
> 标签：android, android-mapview

每次我调用这个函数时，我都会膨胀一个地图视图。并且每次都删除视图。但我仍然收到一个错误，说孩子已经有了父母，请先调用 removeview()。

关于如何解决这个问题的任何想法。

```
 void getGeoView(Context context) {
        myRoot.removeAllViews();

       LayoutInflater inflater = (LayoutInflater) this
            .getSystemService(LAYOUT_INFLATER_SERVICE);
      View view = inflater.inflate(R.layout.geo_inflator, null);

       ((ViewGroup) view.findViewById(R.id.myMap)).removeAllViews();

      if (mapView == null) {
        mapView = new MapView(this, "0IEmqsWhwmo6Cu8hKdYn_VudUT8IpdKpXzMvQyw");
        ((ViewGroup) view.findViewById(R.id.myMap)).addView(mapView);
      } else {

        ((ViewGroup) view.findViewById(R.id.myMap)).addView(mapView);
      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T05:35:34.837

我不确定你在做什么，但最简单的解决方案是添加这一行：

```
((ViewGroup) mapView.getParent()).removeView(mapView); 
```

到发生错误的地方。我想这发生在这里：

```
} else {
    ((ViewGroup) mapView.getParent()).removeView(mapView); // Add me
    ((ViewGroup) view.findViewById(R.id.myMap)).addView(mapView);
} 
```

# jquery - 搜索输入在按钮悬停CSS3上滑出？

> ID：13410948
> 
> 赞同：5
> 
> 时间：2012-11-16T05:22:20.850
> 
> 标签：jquery, css, input, hover

将鼠标悬停在框中的“搜索”文本上时，我设法让该`input`字段滑出。`input`但我宁愿在悬停时使用“GO”按钮滑出动画（也提交）。

[小提琴](http://jsfiddle.net/7yAv7/2/)

我想更改为`.search input {width:80px;}`，`30px`以便`input`在搜索按钮悬停之前隐藏该字段，但我不确定如何仅让按钮触发此动画。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-16T06:00:10.957

试试这个伙伴：http: [//jsfiddle.net/7yAv7/10/](http://jsfiddle.net/7yAv7/10/)

我所做的是将`.search input:hover`选择器更改为`.search:hover input`.

这意味着，如果您将鼠标悬停在 .search 容器的任何部分上，输入应该会以动画形式显示出来。

不是 100% 你想要的，但希望它作为一个起点有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T05:34:18.143

我个人会像这样使用jQuery的悬停：

```
 $('.srch_btn').hover(function(){
     $('.search input').css('width', '200px');
 },
 function(){
      $('.search input').css('width', '30px');
 });​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T05:40:53.093

您只能通过将不透明度设置为 0 为非活动状态在 css 中执行此操作：

```
-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
-moz-opacity: 0;
-khtml-opacity: 0;
-webkit-opacity: 0;
opacity: 0; 
```

在这里工作演示：http: [//jsfiddle.net/7yAv7/7/](http://jsfiddle.net/7yAv7/7/)

编辑：当只悬停go按钮时：http: [//jsfiddle.net/7yAv7/8/](http://jsfiddle.net/7yAv7/8/)

# android - 从android的内部存储中删除文件夹？

> ID：13410949
> 
> 赞同：26
> 
> 时间：2012-11-16T05:22:32.040
> 
> 标签：android, android-storage

如何从内部存储中删除文件夹（包含一些文件夹和文件）？文件夹在树下有一些。

```
folder
|_________  C2 (folder)
             |________1 (folder)
                      |________1.gif
                      |________2.gif
                      |________3.gif
                      |________4.gif
             |________2 (folder)
                      |________1.gif
                      |________2.gif
                      |________3.gif
                      |________4.gif
             |________3 (folder)
                      |________1.gif
                      |________2.gif
                      |________3.gif
                      |________4.gif
             |________4 (folder)
                      |________1.gif
                      |________2.gif
                      |________3.gif
                      |________4.gif
             |________5 (folder)
                      |________1.gif
                      |________2.gif
                      |________3.gif
                      |________4.gif

|_________  C2.xml (file) 
```

我想删除文件夹并包含所有文件

```
fil.delete();

System.out.println("boolean =>" + fil.delete()); 
```

但上面的代码显示错误。请帮忙。

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-11-16T05:49:39.623

看一下这个。

```
public void deleteRecursive(File fileOrDirectory) {

   if (fileOrDirectory.isDirectory()) {
       for (File child : fileOrDirectory.listFiles()) {
          deleteRecursive(child);
       }
   }

   fileOrDirectory.delete();
 } 
```

解释[如何删除整个文件夹和内容？](https://stackoverflow.com/questions/4943629/android-how-to-delete-a-whole-folder-and-content)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-16T05:28:48.613

如果子文件夹包含任何文件，则不能删除根文件夹。因此，您必须先删除每个子文件，然后才能删除该文件夹。

您的代码是有效的，我只是更新如下：

```
 boolean deleted = mypath.delete(); 
```

IE。`mypath`是您的文件目录。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-16T05:29:45.643

让我告诉你第一件事你不能删除根文件夹，因为它是一个系统文件夹。当您在手机上手动删除它时，它将删除该文件夹的内容，但不会删除根文件夹。您可以使用以下方法删除其内容：

```
private void DeleteRecursive(File fileOrDirectory) {
    if (fileOrDirectory.isDirectory())
        for (File child : fileOrDirectory.listFiles())
        {
            child.delete();
            DeleteRecursive(child);
        }

    fileOrDirectory.delete();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-17T10:27:34.130

使用 Apache commons-io，只需一行代码。

```
FileUtils.deleteDirectory(getAlbumStorageDir(directoryName)); 
```

# django - 使用 Django 社交身份验证从用户模型在子模型中创建一个实例

> ID：13410951
> 
> 赞同：0
> 
> 时间：2012-11-16T05:22:36.373
> 
> 标签：django, django-socialauth

我正在使用 django social auth 进行社交网络登录到我的网站，并且它工作正常，用户信息存储在**User**模型中。但是我有另一个模型（**ExtraInfo**），它继承了**用户**模型来存储额外的数据。当 django social auth 在用户模型中创建新用户时，如何在子模型（**ExtraInfo ）中创建新实例**

我尝试了 SOCIAL_AUTH_USER_MODEL = 'myapp.CustomUser' 但这不起作用，因为子模型无法使用 create_user 方法

```
class ExtraInfo(User):
      phoneNo = models.CharField(max_length = 30)
      city = models.CharField(max_length = 30)
      state = models.CharField(max_length = 30) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T06:38:12.327

取决于您的项目，但看起来您的`ExtraInfo`模型不应该从模型继承，`User`而是按照@miki725 或使用[django 配置文件](https://docs.djangoproject.com/en/dev/topics/auth/#auth-profiles)的方式扩展它。

关于 django-social-auth，您可以使用创建所需模型的函数扩展默认[管道](http://django-social-auth.readthedocs.org/en/latest/pipeline.html)`ExtraInfo`（您可以使用参数检查用户是否是新用户`is_new`）。

如果用户是通过其他方式创建的，那么信号就是要走的路。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T05:40:11.427

根据 Django 文档，为 a 添加属性的推荐方法`User`是使用`OneToOneField`而不是子类化，例如：

```
class ExtraInfo(models.Model):
    user = models.OneToOneField(User, related_name='extra_info')
    phoneNo = models.CharField(max_length = 30)
    city = models.CharField(max_length = 30)
    state = models.CharField(max_length = 30) 
```

至于您的问题，您可以连接到 Django 的`post_save`信号（[docs](https://docs.djangoproject.com/en/1.4/ref/signals/#django.db.models.signals.post_save)），然后只要`created`参数是，然后为该新用户`True`创建一个模型。`ExtraInfo`

# phpexcel - phpexcel在保存工作表之前计算公式

> ID：13410959
> 
> 赞同：2
> 
> 时间：2012-11-16T05:23:42.043
> 
> 标签：phpexcel

如果我以仅包含值的 Excel5 格式保存 phpexcel 文档，则引用该文档的人可以毫无问题地打开和关闭它。

但是，如果我将一些公式放入单元格中，我会得到两个不希望的结果。

就在保存文档之前，我根据列的内容设置了列宽。由于尚未计算公式，因此列似乎仅与列中最大的单个值一样大，因此宽度设置得太窄。在excel中打开=sum()公式计算后，内容溢出单元格宽度并显示为###字符串。

第二个效果是，当用excel计算总数时，该书被excel标记为修改。当用户尝试退出图书时，系统会提示他们查看是否要保存更改。这令人不安，因为在他们看来，他们没有改变任何东西，而且令人讨厌，因为这是他们真的不想应对的中断。

我一直在搜索文档。我找到了对 $objWriter->setPreCalculateFormulas(true) 的引用，但它对这两个问题都没有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T18:00:12.483

如果一列设置为 AutoSize，PHPExcel 会尝试根据列的计算值（如 SUM() 公式的结果）以及由格式掩码添加的任何其他字符（例如千位分隔符）来计算列宽。默认情况下，这是一个估计的宽度：基于使用 GD 可以使用更精确的计算方法，但这是一个更大的开销，因此默认情况下它是关闭的。您可以启用更准确的计算使用

```
PHPExcel_Shared_Font::setAutoSizeMethod(PHPExcel_Shared_Font::AUTOSIZE_METHOD_EXACT); 
```

如果工作表包含公式，则某些版本的 MS Excel 文件包含详细说明计算树的附加信息：PHPExcel 未保存的数据（因为计算树结构的开销很大）。您没有指明您使用哪种格式来保存您的工作簿，或者您使用哪个版本的 MS Excel 打开它们；但这是在 MS Excel 中打开 PHPExcel 生成的文件时提示保存更改的正常解释。

# javascript - 如何在 node.js 中读取整个文本流？

> ID：13410960
> 
> 赞同：25
> 
> 时间：2012-11-16T05:23:47.830
> 
> 标签：javascript, node.js, stream, stdin, ringojs

在 RingoJS 中有一个[函数](http://ringojs.org/api/master/io/#TextStream.prototype.read "io - Ringo 大师 - RingoJS")调用`read`它允许你读取整个流直到到达末尾。这在您制作命令行应用程序时很有用。例如，您可以编写如下`tac` [程序：](http://en.wikipedia.org/wiki/Tac_(Unix) "tac (Unix) - 维基百科，免费的百科全书")

```
#!/usr/bin/env ringo

var string = system.stdin.read(); // read the entire input stream
var lines = string.split("\n");   // split the lines

lines.reverse();                  // reverse the lines

var reversed = lines.join("\n");  // join the reversed lines
system.stdout.write(reversed);    // write the reversed lines 
```

这允许您启动 shell 并运行`tac`命令。然后，您可以根据需要输入任意数量的行，完成后您可以按`Ctrl`+ `D`（或Windows 上的 +）表示`Ctrl`传输[结束](http://en.wikipedia.org/wiki/End-of-transmission_character "传输结束字符 - 维基百科，免费的百科全书")。`Z`

我想在 node.js 中做同样的事情，但我找不到任何可以这样做的函数。我想使用库中的`readSync` [函数](http://nodejs.org/api/fs.html#fs_fs_readsync_fd_buffer_offset_length_position "文件系统 Node.js v0.8.14 手册和文档")来`fs`模拟如下，但无济于事：

```
fs.readSync(0, buffer, 0, buffer.length, null); 
```

stdin的[文件描述符](http://en.wikipedia.org/wiki/Standard_streams#Standard_input_.28stdin.29 "标准流 - 维基百科，免费的百科全书")（第一个参数）是`0`. 所以它应该从键盘读取数据。相反，它给了我以下错误：

```
Error: ESPIPE, invalid seek
    at Object.fs.readSync (fs.js:381:19)
    at repl:1:4
    at REPLServer.self.eval (repl.js:109:21)
    at rli.on.self.bufferedCmd (repl.js:258:20)
    at REPLServer.self.eval (repl.js:116:5)
    at Interface.<anonymous> (repl.js:248:12)
    at Interface.EventEmitter.emit (events.js:96:17)
    at Interface._onLine (readline.js:200:10)
    at Interface._line (readline.js:518:8)
    at Interface._ttyWrite (readline.js:736:14) 
```

您将如何同步收集输入文本流中的所有数据并将其作为字符串在 node.js 中返回？一个代码示例将非常有帮助。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-11-16T05:53:57.753

由于 node.js 是面向事件和流的，因此没有 API 可以等到标准输入和缓冲区结果结束，但手动操作很容易

```
var content = '';
process.stdin.resume();
process.stdin.on('data', function(buf) { content += buf.toString(); });
process.stdin.on('end', function() {
    // your code here
    console.log(content.split('').reverse().join(''));
}); 
```

在大多数情况下，最好不要缓冲数据并在传入块到达时对其进行处理（使用已经可用的流解析器链，如 xml 或 zlib 或您自己的 FSM 解析器）

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-11-16T05:25:46.520

关键是要使用这两个 Stream 事件：

```
Event: 'data'
Event: 'end' 
```

因为`stream.on('data', ...)`您应该将数据数据收集到缓冲区（如果它是二进制文件）或字符串中。

因为`on('end', ...)`您应该使用完成的缓冲区调用回调，或者如果您可以内联它并使用 Promises 库使用 return。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-03-13T16:12:49.670

让我来说明 StreetStrider 的答案。

这是使用[concat-stream 的方法](https://www.npmjs.com/package/concat-stream)

```
var concat = require('concat-stream');

yourStream.pipe(concat(function(buf){
    // buf is a Node Buffer instance which contains the entire data in stream
    // if your stream sends textual data, use buf.toString() to get entire stream as string
    var streamContent = buf.toString();
    doSomething(streamContent);
}));

// error handling is still on stream
yourStream.on('error',function(err){
   console.error(err);
}); 
```

请注意，这`process.stdin`是一个流。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-05-05T18:46:09.300

该特定任务有一个模块，称为**[concat-stream](https://github.com/maxogden/concat-stream)**。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-09-01T11:33:02.190

如果您在`async`上下文中并且拥有最新版本的 Node.js，这里有一个快速[建议](https://github.com/nodejs/readable-stream/issues/403#issuecomment-479069043)：

```
const chunks = []
for await (let chunk of readable) {
  chunks.push(chunk)
}
console.log(Buffer.concat(chunks)) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-15T12:54:13.170

在 Windows 上，我在此处发布的其他解决方案中遇到了一些问题——当没有输入时，程序将无限期地运行。

这是现代 NodeJS 的 TypeScript 实现，使用异步生成器`for await`- 比使用旧的基于回调的 API 更简单、更健壮，这适用于 Windows：

```
import process from "process";

/**
 * Read everything from standard input and return a string.
 * 
 * (If there is no data available, the Promise is rejected.)
 */
export async function readInput(): Promise<string> {  
  const { stdin } = process;

  const chunks: Uint8Array[] = [];

  if (stdin.isTTY) {
    throw new Error("No input available");
  }

  for await (const chunk of stdin) {
    chunks.push(chunk);
  }

  return Buffer.concat(chunks).toString('utf8');
} 
```

例子：

```
(async () => {
  const input = await readInput();

  console.log(input);
})(); 
```

`try/catch`（如果您想处理 Promise 拒绝并在没有输入时显示更用户友好的错误消息，请考虑添加一个。）

# selenium - @Parameters not working properly

> ID：13410961
> 
> 赞同：0
> 
> 时间：2012-11-16T05:24:02.327
> 
> 标签：selenium, selenium-webdriver, testng

I'm working on **Selenium2 (Java)** with **testng 6.7** frame work. I'm using `@parameters` for getting the parameters from **testng.xml**. I have done everything in correct way.

Everything works perfectly. But some times it is not working. Simply all the test cases are skipped. If I removed the `@Parameters({"dsfsfdf}}`. It works well.

Can any one help me why this is not working some times.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:00:37.537

这同样发生在我身上。您可以检查并确保。

1）检查你的testng.xml，并确保你的参数“p”应该是小写字母（区分大小写）。

2）检查您的@Parameters 值。

我认为这将提供您所需的输出，如果它真的有效，请发帖给我。

# php - retrive second highest point from table with no unique column

> ID：13410965
> 
> 赞同：1
> 
> 时间：2012-11-16T05:24:33.987
> 
> 标签：php, mysql, sql

i have one table named users. In this table i have one column named credits(not unique). Now i want the second highest user accroding to the users credits. If the credits field is unique thenmy below query is working fine

```
SELECT * FROM users ORDER BY credits DESC LIMIT 1 , 1 
```

But , if the users credit is not unique then its create problem for retrive me data suppose,

```
mack has 200 credits
jack has 200 credits
rock has 150 credits 
```

when i has this types of record then,in output of this query i want the **rock** record not **jack**

can anyone help me to find out the correct value ?

thanks in advance

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T05:30:22.687

```
SELECT  a.*
FROM    users a
        INNER JOIN
        (
            SELECT DISTINCT credits
            FROM users
            ORDER BY credits desc
            LIMIT 1,1
        ) b ON a.credits = b.credits 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/ada4b/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T05:28:01.170

希望这会有所帮助（首先获取`second highest credits`然后`users having those that credit and`从顶部找到选择一个`。这将检索**一个具有第二高信用的用户**）：

```
 SELECT * FROM users
     WHERE credits = (SELECT distinct credits FROM users 
                   ORDER BY credits DESC LIMIT 1,1)
     LIMIT 1; 
```

**编辑：**如果您还想在具有相同分数的用户中进行选择，则使用适当的过滤器/排序条件，例如在 and 之间进行选择，`rock`您可以根据名称进行另一个排序（假设名称是具有名称的列）`rock``jenni`

```
 SELECT * FROM users
     WHERE credits = (SELECT distinct credits FROM users 
                   ORDER BY credits DESC LIMIT 1,1)
     ORDER name desc 
     LIMIT 1; 
```

要同时获得`rock`and `jenni`，只需从末尾删除限制并更新内部限制，例如：

```
 SELECT * FROM users
     WHERE credits = (SELECT distinct credits FROM users 
                   ORDER BY credits DESC LIMIT 1, 1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T05:31:08.637

尝试这个

```
Select * FROM users 
Where Credits < (Select Max(Credits) From Users)
ORDER BY credits DESC LIMIT 1; 
```

# silverlight - How to act usercontrol as a childwindow in silverlight mvvm?

> ID：13410968
> 
> 赞同：0
> 
> 时间：2012-11-16T05:25:10.700
> 
> 标签：silverlight, mvvm

Is there any possible way to act usercontrol as a childwindow..? I need usercontrol will be act like childwindow... Is it possible?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T08:54:10.227

您可以将 Usercontrol 放在 Childwindow 的 Content 中。在 mvvm 中也可以。

```
System.Windows.Controls.ChildWindow childWindow = new System.Windows.Controls.ChildWindow();
childWindow.Content = userControlObject; 
childWindow.Show(); 
```

# android - Android 的浮动窗口加上 FLAG_SHOW_WHEN_LOCKED 失败

> ID：13410972
> 
> 赞同：7
> 
> 时间：2012-11-16T05:25:42.153
> 
> 标签：android, user-interface, styles

我的应用程序在锁定屏幕之前向用户显示一个对话框。这是一个包含 DialogFragments 的简单 Activity（来自支持库，因为此应用程序在 2.2+ 上运行）。

由于显示这些对话框的实际活动不是 Android 标准的浮动窗口，

```
getWindow().addFlags(WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED); 
```

工作正常。

但是，我想我会使用一个看起来像对话框的活动。但是，所有 Dialog 主题（Holo 等）都有这个项目：

```
<item name="android:windowIsFloating">true</item> 
```

由于某种原因，这会导致窗口标志被完全忽略。有趣的是，Activity 会在用户解锁屏幕后显示。

为什么会这样，有没有办法解决它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T06:31:29.950

遭受同样的问题。在这个问题上似乎唯一有效的是

```
KeyguardManager  myKeyGuard = (KeyguardManager)getSystemService(Context.KEYGUARD_SERVICE);
myLock = myKeyGuard.newKeyguardLock("tagName");
myLock.disableKeyguard(); 
```

不要忘记在清单中使用 keyguard 权限：

```
<uses-permission android:name = "android.permission.DISABLE_KEYGUARD"/> 
```

# java - Control-Option-Space key to open a Popup in a JCombobox in MAC with Voiceover utility

> ID：13410975
> 
> 赞同：1
> 
> 时间：2012-11-16T05:25:54.783
> 
> 标签：java, macos, swing, jcombobox, key-bindings

I have a `JComboBox` with multiple values in it. How to detect the keystroke `control-option-space` to open a pop-up window of `JComboBox` in MAC?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T07:30:04.340

目前尚不清楚您是否想要`control-option-space`除了标准键之外或代替标准`space`键的键绑定。在任何一种情况下，您都可以`aquaSpacePressed`使用如下所示的绑定来调用操作。有关详细信息，请参阅*如何使用键绑定*。

```
combo.getInputMap(JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT).put(
    KeyStroke.getKeyStroke(KeyEvent.VK_SPACE,
        KeyEvent.ALT_DOWN_MASK | KeyEvent.CTRL_DOWN_MASK),
    "aquaSpacePressed"); 
```

因为这是特定于 Mac 的，您可能需要使用如下谓词：

```
System.getProperty("os.name").startsWith("Mac OS X") 
```

附录：下面的[sscce](http://sscce.org/)用于测试修改后的问题中的场景。

附录：由于不清楚的原因，启用会`System Preferences > Speech > Text to Speech`抢占`control-option-space`绑定。作为替代方案，您可以绑定到标准`Action`, `"spacePopup"`，如下面修改后的示例所示。

```
import java.awt.EventQueue;
import java.awt.event.KeyEvent;
import javax.swing.JComboBox;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.KeyStroke;

/**
 * @see http://stackoverflow.com/a/13412208/230513
 */
public class ComboKeyTest extends JPanel {

    public ComboKeyTest() {
        JComboBox cpmbo = new JComboBox();
        cpmbo.addItem("One");
        cpmbo.addItem("Two");
        cpmbo.getInputMap(JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT).put(
            KeyStroke.getKeyStroke(KeyEvent.VK_SPACE,
            KeyEvent.ALT_DOWN_MASK | KeyEvent.CTRL_DOWN_MASK),
            "spacePopup");

        this.add(cpmbo);
    }

    private void display() {
        JFrame f = new JFrame("NewJavaGUI");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.add(this);
        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new ComboKeyTest().display();
            }
        });
    }
} 
```

# codeigniter - Audio File .wav Corrupted after download with php

> ID：13410976
> 
> 赞同：0
> 
> 时间：2012-11-16T05:26:01.413
> 
> 标签：codeigniter, audio, download

Regards,

Using CodeIgniter-PHP and I have a Link (Download Audio) which makes the call to my controller that has the function of downloading audio in. Wav. As parameter I send the corresponding filename.

Here is my code on my controller:

```
public function downloadFile($filename) {
        $filepath = base_url().'audiofiles/'.$filename;
        $filesize = filesize($filepath);
        header('Content-Description: File Transfer');
        header('Pragma: public');
        header('Expires: 0');
        header("Content-Type: application/force-download"); 
        header('Content-Type: application/octet-stream');
        header("Content-Type: application/download");
        header("Content-Length: ".$filesize);
        header("Content-disposition: attachment; filename=$filename");
        header('Content-Transfer-Encoding: binary');
        header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
        readfile($filepath);
    } 
```

When I click the link I download the wav audio properly, but when I try to play the audio I get that "The file corrupt" - "It needs a special codec"

What is it I'm doing wrong in my code?

Thanks in advance.

# java - Javascript dynamic change in link href

> ID：13410977
> 
> 赞同：-2
> 
> 时间：2012-11-16T05:26:03.493
> 
> 标签：java, jquery, search, hyperlink, href

Is there a clear cut method to changing the contents of a url in href based on user submitted information?

For EXAMPLE: A user submits the word "basketball" into a search box and the result is the following link.

```
<a href="http://google.com/basketball>More information</a> 
```

If the user submitted lets say "football" the link would then change to:

```
<a href="http://google.com/football>More information</a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T05:29:01.250

您缺少 href 的关闭引号，您可以这样做。

**[现场演示](http://jsfiddle.net/YnMcJ/1/)**

```
var url = $('#aId').attr('href');
firstPart = url.substring(0, url.lastIndexOf('\/')+1);
$('#aId').attr('href', firstPart + "Football"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T05:30:12.157

鉴于： `<a id="url" href="http://google.com/basketball">More information</a> <input id="sport" type="text" val="soccer" />`

```
var $val = $('#sport').val()
$("#url").attr("href", "http://www.google.com/" + $val); 
```

# c#-4.0 - How to give the shade to the list item of particular index in the telerik mvc combo box

> ID：13410978
> 
> 赞同：0
> 
> 时间：2012-11-16T05:26:05.500
> 
> 标签：c#-4.0, razor, telerik, asp.net-mvc-4, telerik-mvc

Code:

```
 @( Html.Telerik().ComboBox()
    .Name("cmbTest")
    .ClientEvents(events => events
                    .OnOpen("oncmbTestOpen")
                )
    )

   function oncmbTestOpen(e)
   {
        var index = 2;
        // How to give the shade(default orange color) to the list item of particular index(2) in the telerik mvc combo box
   } 
```

How to give the shade(default orange color) to the list item of particular **index(2)** in the telerik mvc combo box when opening the combo box.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T21:39:55.300

您可以通过以下方式访问 li 元素：

```
function oncmbTestOpen(e){
  var index = 2;
  var $li = $(this).data('tComboBox').dropDown.$items.eq(index);
  //$li.css('color', 'red');
} 
```

# asp.net - 寻找用于演示网站的精简方式 IIS 服务器

> ID：13410980
> 
> 赞同：0
> 
> 时间：2012-11-16T05:26:15.110
> 
> 标签：asp.net, visual-studio, iis

我需要向客户展示一个 ASP.NET MVC3 网站，但他们没有安装 IIS 或 Visual Studio。仅安装了 .NET Framework 4。

所以我的问题是：是否有任何小型 IIS 服务器（如 IIS Express），但不需要安装，可以在本地机器上运行编译的站点？

PS：我不需要高级功能。但是 HttpHanlders 和 HttpModules 应该可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T05:50:22.723

我支持 Shan 的建议，将您的网站托管在某个服务器上并通过 Internet 访问它。我不明白为什么它不适用于 Intranet 应用程序，除非您依赖于 SMB 共享或网络打印机等某些服务。

Cassini ASP.NET 网络服务器是可移植的，不需要安装，但它的运行方式与 IIS 不同，并且有些东西会中断（因为它与 IIS 不同，它为每个请求调用 ASP.NET，所以如果你有阻止未经身份验证的访问者，然后他们将无法下载站点图像和样式表，例如，直到他们登录）。

# python - AttributeError: 'long' object has no attribute 'fetchall'

> ID：13410982
> 
> 赞同：8
> 
> 时间：2012-11-16T05:26:18.797
> 
> 标签：python, mysql, flask

I'm attempting to execute some sql using the mysql-flask python extension. The below code always returns a long for some reason.

```
stringify = lambda x : '"' + x + '"'
if request.method == 'POST':
        sql = "select * from users where username = " + stringify(request.form['username'])
        user = g.db.cursor().execute(sql).fetchall() 
```

Error:

```
 user = g.db.cursor().execute(sql).fetchall()
AttributeError: 'long' object has no attribute 'fetchall' 
```

Why doesn't this return a result set?

Also, I can execute insert statements just fine.

FIX (ANSWER):

```
def get_data(g, sql):
    cursor = g.db.cursor()
    cursor.execute(sql)
    data = [dict((cursor.description[idx][0], value) for idx, value in enumerate(row)) for row in cursor.fetchall()]
    return data 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-16T06:06:28.607

您正在尝试对 的结果调用方法`Cursor.execute`，[DB-API 规范](http://www.python.org/dev/peps/pep-0249/)称该方法未定义（您正在使用的实现似乎返回一个整数）。相反，您想调用`fetchall`游标对象。就像是：

```
cursor = g.db.cursor()
cursor.execute(sql)
user = cursor.fetchall() 
```

# javascript - 不让它成为一个字符串

> ID：13410983
> 
> 赞同：3
> 
> 时间：2012-11-16T05:26:24.110
> 
> 标签：javascript, jquery

在这种情况下，例如，如果`$(this).text()`变为 0，它将不起作用，因为在开关中 0 不等于“0”。

在我的任务中，我无法从案例中删除“”。

所以基本上`$(this).text()`必须以某种方式成为一个字符串。有任何想法吗？

谢谢！

```
...
$( '.xyz' ).click( function()...
  var key = $(this).text();
  switch( key ) {
    case "0":
    case "00":
    case "1":
    case "2":
    case "3":
    case "4":
    case "5":
    case "6":
    case "7":
    case "8":
    case "9":
    ... 
```

[https://gist.github.com/188d81480a1503d1985b](https://gist.github.com/188d81480a1503d1985b)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T05:29:11.723

如果我理解你想要数值？

```
var key = parseInt($(this).text()); //or
key = parseDouble($(this).text()); 
```

编辑2：感谢德里克的建议。永远忘记：

```
+$(this).text(); //also converts to integer; parseint can be given a radix (base). + if string is already in the form of a base 10 integer 
```

编辑：另外，你的代码看起来不对；`$(this).text())`有一个不平衡的括号。text() 总是返回一个字符串。这就是我做出上述假设的原因。尽管您的问题似乎暗示您想通过 text() 的结果进行搜索？在那种情况下，你会想要一个字符串， text() 给你。

如果你能给我们更多的细节和代码，那就更容易理解了

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T05:30:02.663

你可以这样做

```
var key = "" + $(this).text(); 
```

这将永远是一个字符串。IE

```
var b = "" + 0 ;
// b = "0" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T04:50:19.720

尝试这个

```
var key = String($(this).text()); 
```

# iphone - 如何在 iOS 上使用 Objective-C 代码将图像发布到 LinkedIn 帐户？

> ID：13410986
> 
> 赞同：1
> 
> 时间：2012-11-16T05:26:45.517
> 
> 标签：iphone, objective-c, linkedin

我可以将评论发布到 LinkedIn，但无法发布`image`. 这是发布评论的代码：

```
 NSURL *url = [NSURL URLWithString:@"http://api.linkedin.com/v1/people/~/shares"];
  OAMutableURLRequest *request = 
        [[OAMutableURLRequest alloc] initWithURL:url
                                        consumer:self.consumer
                                           token:self.accessToken
                                        callback:nil
                               signatureProvider:nil];
  NSString *postedStr = self.textView.text;
  NSDictionary *update = [[NSDictionary alloc] initWithObjectsAndKeys:
                                [[NSDictionary alloc] 
                                 initWithObjectsAndKeys:
                                 @"anyone",@"code",nil], @"visibility", 
                                postedStr, @"comment", nil];
  [request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
  NSString *updateString = [update JSONString];
  [request setHTTPBodyWithString:updateString];
  [request setHTTPMethod:@"POST"];
  OADataFetcher *fetcher = [[OADataFetcher alloc] init];
  [fetcher fetchDataWithRequest:request
                        delegate:self
               didFinishSelector:@selector(postUpdateApiCallResult:didFinish:)
                 didFailSelector:@selector(postUpdateApiCallResult:didFail:)];    
    // [self.view addSubview:linkedinView];
   [request release]; 
```

任何建议都非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T05:35:05.883

试试下面的代码可能对你有帮助：-

```
-(void)postUpdateHERE
{
  NSURL *url = [NSURL URLWithString:@"http://api.linkedin.com/v1/people/~/shares"];
  OAMutableURLRequest *request =
  [[OAMutableURLRequest alloc] initWithURL:url
                            consumer:[self getConsumer]
                               token:self.accesstoken
                            callback:nil
                   signatureProvider:nil];

  NSDictionary *update = [[NSDictionary alloc] initWithObjectsAndKeys:

                    [[NSDictionary alloc]
                     initWithObjectsAndKeys:
                     @"anyone",@"code",nil], @"visibility",

                    @"comment goes here", @"comment",
                    [[NSDictionary alloc]
                     initWithObjectsAndKeys:
                    @"description goes here",@"description",
                    @"www.google.com",@"submittedUrl",
                      @"title goes here",@"title",
                    @"http://economy.blog.ocregister.com/files/2009/01/linkedin-logo.jpg",@"submittedImageUrl",nil],@"content",
                    nil];
  [request setValue:@"json" forHTTPHeaderField:@"x-li-format"];
  [request setValue:@"application/xml" forHTTPHeaderField:@"Content-Type"];
  NSString *updateString = [update JSONString];
  [request setHTTPBodyWithString:updateString];
  [request setHTTPMethod:@"POST"];
  OADataFetcher *fetcher = [[OADataFetcher alloc] init];
  [fetcher fetchDataWithRequest:request
                 delegate:self
        didFinishSelector:@selector(postUpdateApiCallResult:didFinish:)
          didFailSelector:@selector(postUpdateApiCallResult:didFail:)];

} 
```

我从下面的堆栈流答案中找到了这个：-

[无法使用适用于 LinkedIn 的 OAuth Starter Kit 共享](https://stackoverflow.com/questions/12801187/cant-share-using-oauth-starter-kit-for-linkedin)

**编辑：-**

用于`TamilKing`评论回复。您可以使用 Google API 获取当前位置的图像 URL。首先，您需要获取当前的位置图像，例如：-

```
NSString *staticMapUrl = [NSString stringWithFormat:@"http://maps.google.com/maps/api/staticmap?markers=color:red|%f,%f&%@&sensor=true",lat, log,@"zoom=12&size=114x116"];    //That above staticMapURl NSlog is :http://maps.google.com/maps/api/staticmap?markers=color:red|1.282130,103.803131&zoom=12&size=114x116&sensor=true 
```

例如，给定您当前的位置图像：-

![在此处输入图像描述](../Images/5dbfd57a06fa04f05a4a246b4bf60d0e.png)

现在你必须将上面的 NSString 转换为 NSURL

```
NSURL *mapUrl = [NSURL URLWithString:[staticMapUrl stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]]; 
```

并使用您要分享到 LinkedIn 的这个 url。希望对你有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T05:41:13.763

您可能需要做更多，但可以肯定的是，您需要设置长度......

```
[request setValue:[NSString stringWithFormat:@"%d", updateString.length] forHTTPHeaderField:@"Content-Length"]; 
```

# linux - 使用 Scp 时防止覆盖文件

> ID：13410990
> 
> 赞同：42
> 
> 时间：2012-11-16T05:27:09.163
> 
> 标签：linux, scp

我正在使用 scp 复制一些文件，我不想覆盖已经存在的文件。

如果我使用 cp 命令，我认为这可以使用 cp -n 来完成。

scp 是否有类似的选项，我浏览了 SCP 的文档，似乎没有这样的选项。

rsync 或 sftp 是解决这个问题的方法吗？

添加信息：

操作系统：Ubuntu 12.04

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-11-16T05:48:51.863

`rsync`似乎可以解决您的问题。这是我从[这里](http://linux.die.net/man/1/rsync)得到的一个例子：

```
rsync -avz foo:src/bar /data/tmp 
```

-a 选项将保留权限、目录结构、所有权和符号链接。您也可以单独指定任何这些选项。

-v 和 -z 分别表示详细和压缩。你并不真的需要它们，虽然 -z 如果你正在复制大文件很好。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-11-14T15:49:25.470

我刚刚发现了一个简单的hack。将现有文件标记为只读。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2014-04-21T03:45:21.170

```
rsync -avz --ignore-existing /source folder/* user@remoteserver:/dstfolder/ 
```

`--ignore-existing`不会覆盖远程服务器或目标服务器上的文件*。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-31T21:09:15.003

我没有对其进行测试，但也许首先通过安装`sshfs`然后使用`cp`就可以了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-09T00:25:33.663

我过去为此使用过 rsync，但发现自己试图从带有 CopSSH 而没有 rsync 的 Windows 框中抓取 :-( 以下对我来说效果很好，使用文件测试来消除将被覆盖的文件，并且向 sftp 实例生成多个“获取”请求。

```
(  echo  'cd work/ftp/' ; 
   ssh <user>@<machine> 'cd work/ftp/ && ls -1 ITEM_SALE_SUMMARY_V.*.dat.xz' |
   while read line; do [[ -f "$line" ]] || echo get "$line"; done 
) | sftp  <user>@<machine> 
```

以防万一其他人需要非 rsync 解决方案！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-31T15:39:06.860

只是为了补充其他解决方案：

对于一个 ascii/bin 文件，你可以这样做：

`cat source_file | ssh host "test ! -f target_file && cat > target_file"`

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2012-11-16T05:41:07.837

[rsync over ssh](https://www.google.com/search?q=rsync%20over%20ssh)它必须是。

# css - CSS3 上的边框图像如何工作？

> ID：13410993
> 
> 赞同：0
> 
> 时间：2012-11-16T05:27:17.947
> 
> 标签：css

我正在阅读有关 CSS3 上的 Border-Image 的信息，但我不明白它是如何对图像进行切片的。有人给我解释一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T22:22:28.753

没有图形来解释有点棘手。我已经写了一些关于这个主题的博客文章，可能会有所帮助：

*   [边界图像解释](http://demosthenes.info/blog/438/CSS3-Border-Image-Explained)
*   [使用border-image将图像转换为邮票的示例](http://demosthenes.info/blog/446/Turn-Images-Into-Postage-Stamps-With-CSS3-borderimage)
*   虽然本文没有深入处理边框图像，但它确实注意到[阴影过滤器将直接作用于它们](http://demosthenes.info/blog/598/boxshadow-property-vs-dropshadow-filter-a-complete-comparison)

我希望这有帮助！