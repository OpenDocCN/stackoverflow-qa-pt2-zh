# StackOverflow 问答 15963000-15963999

# javascript - 函数和值之间是什么关系？

> ID：15963000
> 
> 赞同：3
> 
> 时间：2013-04-12T04:20:20.503
> 
> 标签：javascript, theory

函数和值之间是什么关系？我认为函数是一种值；但是，函数既包含值（参数）也包含返回值。

* * *

*我（显然）是编程新手，并且希望确保我在学习 JavaScript 时有一个坚实的概念基础。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T04:32:40.657

函数做事。变量保存值（数据）。

函数可以接受数据作为参数。函数也可以返回数据，但不是必须的。考虑这个函数，它只是将两个数字相加：

```
function addNumbers(numberA, numberB) {
    var total = numberA + numberB;
    console.log(total);
} 
```

这是一个接受两个参数的函数。在函数的代码块中，这些参数的值被分配给变量`numberA`和`numberB`. 该函数的代码创建另一个变量 ，`total`并将`numberA`添加的值分配给 的值`numberB`。然后该函数调用另一个函数 ，`console.log`并将 的值`total`作为参数传入。

现在，该函数也可以返回值。让我们稍微修改一下这个函数：

```
function addNumbers(numberA, numberB) {
    var total = numberA + numberB;
    return total;
} 
```

如果你现在调用这个函数，你会得到`total`. 如果我要运行这个：

```
console.log(addNumbers(5, 5)); 
```

您会`10`在控制台中看到。我的数字文字值作为参数传递给`addNumbers`. 该函数完成了它的工作并将其`total`变量的值返回给我。该值现在作为参数传递给`console.log`.

如果这还不是很清楚，那么请在继续之前在线阅读其他教程。

现在，在 JavaScript 中，函数就像其他任何东西一样。您也可以将它们分配给变量！

```
var newAddNumbers = addNumbers;
console.log(newAddNumbers(5, 5)); // Also returns 10 in the console 
```

当您键入：

```
function someFunction () { 
```

这与：

```
var someFunction = function () { 
```

函数本身被分配给变量`someFunction`。在我们最初的示例中，函数本身被分配给`addNumbers`. 所以是的，函数是一种类型，就像数字、对象、布尔值等一样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T04:35:04.467

如果我有一个功能：

```
function add(a, b) {
    return a + b;
} 
```

`add`是一个函数。所有函数都是值；例如，我可以将它们放在变量中或将它们作为参数传递。

`a`和`b`是 的参数`add`，但该函数尚未被调用，因此它们没有值。同样，该函数已被调用，因此它没有返回值。

当我调用函数时：

```
add(1, 2); 
```

该函数以该调用的初始设置为`a`和分别执行该调用。`b``1``2`

如果我用不同的参数再次调用它：

```
add(3, 4); 
```

然后这一次`a`和`b`最初设置为`3`和`4`; 但是，这些`a`并`b`不仅具有与上次不同的值；它们确实是不同的变量。每次调用函数时，参数本质上都是变量，这些变量不仅对于该函数是本地的，而且对于该函数的*调用*也是本地的。

# c# - C#中的快速memcpy

> ID：15963001
> 
> 赞同：0
> 
> 时间：2013-04-12T04:20:26.733
> 
> 标签：c#, performance, memcpy

我想用这样的原型编写一个 C# 方法：

```
void memcpy(byte[] dst, int dstOffset, byte[] src, int srcOffset, int len); 
```

对于这种方法，我有 2 个选项：

**1.**

```
void memcpy(byte[] dst, int dstOffset, byte[] src, int srcOffset, int len)
{
    for (int i = 0; i < len; i++)
    {
        dst[dstOffset + i] = src[srcOffset + i];
    }
} 
```

**2.**

```
void memcpy(byte[] dst, int dstOffset, byte[] src, int srcOffset, int len)
{
    IntPtr intPtr = getIntPtr(dst, dstOffset);
    System.Runtime.InteropServices.Marshal.Copy(src, srcOffset, intPtr, len);
}

IntPtr getIntPtr(byte[] buffer, int offset)
{
    IntPtr intPtr;
    unsafe
    {
        fixed (byte* p1 = buffer)
        {
            byte* p2 = p1 + offset;
            intPtr = (IntPtr)p2;
        }
    }
    return intPtr;
} 
```

**问题：**

A. 我猜选项 2 比选项 1 快，对吗？

B. 还有其他更快的方法吗？

非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T04:22:43.467

选项 #2 已损坏，因为您在它指向的对象不再固定后使用指针。在块内获得的指针`fixed`只能在同`fixed`一块内使用。看起来你应该已经使用过[`Marshal.UnsafeAddrOfPinnedArrayElement`](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshal.unsafeaddrofpinnedarrayelement.aspx)（并且只在`fixed`固定数组的块内使用它）。

看看[`Buffer.BlockCopy`](http://msdn.microsoft.com/en-us/library/system.buffer.blockcopy.aspx)。

# wso2 - WSO2 API 管理器身份验证

> ID：15963006
> 
> 赞同：2
> 
> 时间：2013-04-12T04:20:42.427
> 
> 标签：wso2, wso2-am

我有一个使用基本身份验证来验证和授权服务调用的应用程序。我在单独的服务器上设置我们的 WSO2 API 管理器，但不确定如何将 API 管理器中的 base64 加密传递到我的应用程序以授权某些服务调用。

此信息在文档中不容易获得，因此我不确定它是否受支持。

有没有人使用过这个或知道如何实现这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-22T06:33:09.197

如果您想提供自己的身份验证机制，您可以通过`org.wso2.carbon.apimgt.gateway.handlers.security.Authenticator`在身份验证处理程序链中实现并设置它来非常轻松地做到这一点。

你可以参考`org.wso2.carbon.apimgt.gateway.handlers.security.oauth.OAuthAuthenticator`参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T08:21:56.733

您可以在发布者创建 API 时提供凭据。您可以查看[有关添加 API 的 WSO2 文档](http://docs.wso2.org/wiki/display/AM131/Adding+an+API)。在“端点类型”的发布者处，您必须选择`Secured`然后需要提供`username/password`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-16T20:22:27.683

在 API Manager 中通过 进行身份验证`APIAuthenticationHandler`，这是在 API 序列定义 (/repository/deployment/server/synapse-configs/default/api) 中定义的处理程序之一。要禁用该特定 API 的身份验证（因为 API Manager 自己处理基本身份验证），只需删除或注释掉处理程序。然后，用户应该提供后端服务所需的基本身份验证，而不是 API Manager 令牌，因为他们将不再需要它。

# c++ - 使用运行时类型识别从 void 指针获取数据

> ID：15963016
> 
> 赞同：0
> 
> 时间：2013-04-12T04:21:30.370
> 
> 标签：c++, templates, casting, void-pointers, runtime-type

我有一些类对应于一些应该对实际数据进行编码和解码的数据类型。例如， `class MyInt32`将具有对整数值进行编码并从编码字节流中对其进行解码的功能。所有这些类都派生自一个基类，`MyTypes`. 解码时，在从编码字符串中获取值后，我将值放入相应的数据类型中，例如`int`在 的情况下`MyInt`，并将数据作为`void *`.

在接收端，我对指针进行类型转换`(int *)`，然后取消引用它以将其放入结果中。

但现在我也需要一种类型来拥有数组。在数组的情况下，我使用模板来说明数组要保存的内容。那是，

```
template<typename T>
class MyArray:public MyType
{
    vector<T *> mydata;
    ....
}; 
```

在解码函数中，我将调用类型 T 的解码。但现在它只返回一个`void*`. 我的数组不会知道解码后的类型是什么。所以我不能对它进行类型转换`void *`和取消引用来获取值。也就是说，如果我取一个数组`MyInt`

```
MyArray<MyInt> data; 
```

数组 ' `data`' 不会知道它的解码结果是`vector<int>`. 最好将数据传递为`vector<int>`而不是`vector<int*>` 如何实现它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T04:29:01.033

确保可以用作模板参数（`MyInt`等）的每种类型都有一个`typedef`给定名称，例如`RepresentedType`：

```
class MyInt : public MyType {
public:
    typedef int RepresentedType;
    ....
}; 
```

现在您可以在模板类中使用它：

```
template<typename T>
class MyArray : public MyType {
    ....
    T::RepresentedType * something();
}; 
```

（我希望这是你想要的。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T04:36:12.857

你可以使用 boost::any 类来达到你的目的。这是获取基于运行时类型标识的任何存储数据的价值的简单有效的方法。

```
vector<boost::any> somevec;
boost::any obj= new MyClass<SomeTemplate>;
somevec.push_back(obj);

SomeTemplate ret = boost::any_cast<SomeTemplate>(somevec[0]); 
```

# android - 如何在 Box Android API 中获取特定的 mp3 文件路径？

> ID：15963017
> 
> 赞同：2
> 
> 时间：2013-04-12T04:21:34.430
> 
> 标签：android, audio-streaming, box-api

我正在使用 Box.com Android Api 开发一个 Android 应用程序，我需要做的是通过音频流播放 mp3 文件，我可以看到我可以使用预定义的下载方法在我的 sd 卡中下载文件，但是因为有没有关于播放音频文件的事情，所以

如何在 Box Android API 中获取特定的 mp3 文件路径？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T21:56:26.420

您不能真正“流式传输”这些文件，但您可以逐步下载和播放它们。

要下载它们，只需使用与任何其他文件相同的下载 API。例如：

方法 GET /files/{file id}/content 示例请求 curl -L [https://api.box.com/2.0/files/FILE_ID/content](https://api.box.com/2.0/files/FILE_ID/content) \ -H "Authorization: Bearer ACCESS_TOKEN"

...如这里的文档中所示：http: [//developers.box.com/docs/](http://developers.box.com/docs/)

# python - 基于python字典计算百分比

> ID：15963021
> 
> 赞同：1
> 
> 时间：2013-04-12T04:22:07.327
> 
> 标签：python, python-2.7

我需要帮助计算每个字典日期值的百分比。

```
raw_data = [{'name':'AB', 'date':datetime.date(2012, 10, 2), 'price': 23.80}, {'name':'AB', 'date':datetime.date(2012, 10, 3), 'price': 23.72}] 
```

我已经使用集合将上面的字典格式化为下面的格式。

```
import collections
res = collections.defaultdict(dict)

for row in raw_data:
  row_col = res[row['name']]
  row_col[row['date']] = row['price']

  {'AB': {datetime.date(2012, 10, 2): 23.80,
  datetime.date(2012, 10, 3): 23.72,
  datetime.date(2012, 10, 4): 25.90,
  datetime.date(2012, 10, 5): 29.95} 
```

现在我需要将上述数据计算为以下格式。

计算公式：

最后价格将分红所有最高值

```
 Date                               Price   Percentage 
   datetime.date(2012, 10, 5)         29.95      26%     
   datetime.date(2012, 10, 4)         25.90      9%        
   datetime.date(2012, 10, 3)         23.72      0%      
   datetime.date(2012, 10, 2)         23.80      0 
```

计算是这样的

```
(23.72/23.80-1) * 100 = 0% 
(25.90/23.80-1) * 100 = 9% 
(29.95/23.80-1) * 100 = 26% 
```

任何帮助都非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T05:11:58.890

您可以使用类似的内容获取字典中所有值的列表`value_list = res.values()`。这将是可迭代的，您可以使用 for 循环和列表切片来获取价格值。`value_list[0]`然后将包含您将所有内容除以的最低价格。然后根据您计划对数据执行的操作，您可以使用 for 循环来计算所有百分比或将其包装在一个函数中并根据需要运行它。

参考：[Python：索引字典？](https://stackoverflow.com/questions/4326658/python-index-a-dictionary)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T12:40:41.807

```
import datetime
import collections

raw_data = [
{'name':'AB', 'date':datetime.date(2012, 10, 2), 'price': 23.80}, 
{'name':'AB', 'date':datetime.date(2012, 10, 3), 'price': 23.72},
{'name':'AB', 'date':datetime.date(2012, 10, 4), 'price': 25.90},
{'name':'AB', 'date':datetime.date(2012, 10, 5), 'price': 29.95}
]

#all unique names in raw_data
names = set(row["name"] for row in raw_data)
#lowest prices, keyed by name
lowestPrices = {name: min(row["price"] for row in raw_data) for name in names}

for row in raw_data:
    name = row["name"]
    lowestPrice = lowestPrices[name]
    price = row["price"]
    percentage = ((price/lowestPrice)-1)*100
    row["percentage"] = percentage

print raw_data 
```

输出（我添加的换行符）：

```
[
{'date': datetime.date(2012, 10, 5), 'price': 29.95, 'percentage': 26.264755480607093, 'name': 'AB'},
{'date': datetime.date(2012, 10, 4), 'price': 25.9, 'percentage': 9.190556492411472, 'name': 'AB'}, 
{'date': datetime.date(2012, 10, 2), 'price': 23.8, 'percentage': 0.337268128161905, 'name': 'AB'}, 
{'date': datetime.date(2012, 10, 3), 'price': 23.72, 'percentage': 0, 'name': 'AB'} 
] 
```

# c# - 如何在服务器 app.config 中保存动态端点？

> ID：15963023
> 
> 赞同：4
> 
> 时间：2013-04-12T04:22:25.817
> 
> 标签：c#, wpf, wcf, c#-4.0, wcf-data-services

我在服务器端以这种方式创建动态端点：

```
var host = new ServiceHost(typeof(PokerService.PlayerService));
 for(int i = 1; i <= ; i++)
 {
   host.AddServiceEndpoint(typeof(PokerService.IPlayerService), 
                                  new NetTcpBinding(),
                                  @"net.tcp://localhost:5054/player/"+i);
 }
 host.Open(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T04:42:09.790

我不知道您对动态端点的含义是什么，但是您可以使用 app.config 中的以下代码在 app.confog 中托管服务端点。此 app.config 必须在作为主项目的那个项目中。

```
<system.serviceModel>     
        <services>
          <service name="PokerService.PlayerService">
            <host>
              <baseAddresses>
                <add baseAddress="net.tcp://localhost:5054/player/" />
              </baseAddresses>
            </host>
            <endpoint address="" binding="netTcpBinding" contract="PokerService.IPlayerService" >
    </endpoint>
          </service>
        </services>
      </system.serviceModel> 
```

# python - 在 XML 中解析一个句子中的多个实例 - Python

> ID：15963026
> 
> 赞同：0
> 
> 时间：2013-04-12T04:22:50.267
> 
> 标签：python, xml, xml-parsing, elementtree

我有一个具有以下结构的 xml 文件，其中我有`instances`几个`sentence`：

```
<corpus>
  <text>
    <sentence>
      <instance\>
      <instance\>
      <instance\>
    <\sentence>
  <\text>
<\corpus> 
```

**如何提取整个句子以及句子中的所有实例？**

当我尝试`sentence.text`时，它只给我第一个实例之前的单词， `sentence.find('instance').text`只给我第一个实例的字符串， `sentence.find('instance').tail`只给我下一个实例之前的第一个实例之后的单词。

我试过这个，因为我更喜欢简单的`elementtree`：

```
import xml.etree.ElementTree as et
input = '''<corpus lang="en">
<text id="d001">
<sentence id="d001.s001">
Your
Oct
.
6
<instance id="d001.s001.t001" lemma="editorial" pos="n">editorial</instance>
``
The
<instance id="d001.s001.t002" lemma="Ill" pos="a">Ill</instance>
<instance id="d001.s001.t003" lemma="Homeless" pos="n">Homeless</instance>
''
<instance id="d001.s001.t004" lemma="refer" pos="v">referred</instance>
to
<instance id="d001.s001.t005" lemma="research" pos="n">research</instance>
by
us
and
<instance id="d001.s001.t006" lemma="six" pos="a">six</instance>
of
our
<instance id="d001.s001.t007" lemma="colleague" pos="n">colleagues</instance>
that
was
<instance id="d001.s001.t008" lemma="report" pos="v">reported</instance>
in
the
Sept
.
8
<instance id="d001.s001.t009" lemma="issue" pos="n">issue</instance>
of
the
Journal
of
the
American
Medical
Association
.
</sentence>
</text>
</corpus>'''
print>>open('tempfile','a+), input
corpus = et.parse('tempfile').getroot()
for text in corpus:
  for sentence in text:
    before1st = sentence.text
    instance1st = sentence.find('instance').text
    after1st = sentence.find('instance').tail
    print str(before1st + instance1st + after1st).replace("\n"," ").strip() 
```

上面的代码只输出：

```
Your Oct . 6 editorial `` The 
```

所需的输出应该是完整的句子：

```
Your Oct . 6 editorial `` The Ill Homeless '' to research by us and six of our colleagues that was reported in the Sept . 8 issue of the Journal of the American Medical Association 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T04:53:25.957

要获得所有匹配，请使用`findall`

```
out = []
sentences = corpus.findall('.//sentence')
for sentence in sentences:
    out.append(sentence.text)
    instances = sentence.findall('instance')
    for instance in instances:
        out.append(instance.text)
        out.append(instance.tail)
    out.append(sentence.tail)

filterout = []
for i in out:
    txt = i.replace('\n', ' ').strip()
    if len(txt):
        filterout.append(txt)
print ' '.join(filterout) 
```

# cuda - 如何在 CUDA 中将稀疏直方图转换为密集直方图？

> ID：15963029
> 
> 赞同：0
> 
> 时间：2013-04-12T04:23:11.540
> 
> 标签：cuda, histogram

我正在使用原始 CUDA 内核实现一个算法，其中每个线程块都需要该线程块的可用数据的密集直方图，现在的问题是我是否必须从头开始计算密集直方图？（如果我已经拥有使用共享内存实现的稀疏直方图，是否值得计算密集直方图）

我想出了这个转换的想法，我会尝试用例子来详细说明我的想法（temp和hist都在共享内存中）

```
 0,1,2,3,4,5,6... //array indexes
   4,3,0,2,1,0,5... //contents of hist[]
   0,0,2,0,0,5,0... //contents of temp[] if(hist[x]>0)temp[x]=x;
   for_every_element     //this is sequential part :(
       if(temp[x]>0)
         shift elements from index x to 256
   4,3,2,1,0,5... //pass 1 of the for loop
   4,3,2,1,5...   //pass 2 of the for loop
                  //this goes on until all the 0s are compacted 
```

现在我知道上面本质上是顺序的，但是可以使用恒定时间（并且并行）进行移位，因为threads_per_block已经设置为256，所以移位不是主要问题，主要问题是如何改进它（或任何欢迎其他建议）。

编辑：我正在考虑另一个想法，如下假设`threads_per_block=256`我是否可以计算哪些直方图箱是非零的（此操作是并行的，因为每个线程都分配给每个箱，我可以原子添加每个线程生成的值）假设我可以启动一个新的共享索引变量`sindex=0`，每次线程想要将值存储到`d_hist[]`其中时，可以从 sindex 获取最新值并将其值存储到`d_hist[sindex]=hist[treadIdx.x]`之后我可以 atomicAdd sindex

现在只有一个问题，获取 sindex 的值将存在竞争条件，因此我可能必须设置一个标志，当线程向其中添加任何值时可以锁定或解锁`d_hist`（但我认为可以在这里陷入僵局）

这种技术会奏效吗？还有比这更好的技术吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:18:44.920

将稀疏直方图转换为密集直方图是一种分散操作。如果稀疏直方图由`s_index[S_N]`和组成`s_hist[S_N]`，那么首先我们创建一个`d_hist[N]`由全零组成的密集直方图（也许你可以从主机代码中做到这一点）。然后我们填充密集直方图，`d_hist[s_index[i]] = s_hist[i];` 这可以并行完成，并使用与稀疏直方图中有效索引一样多的线程（i < S_N）。假设您的直方图已排序，您将根据稀疏直方图索引的分布获得任何可能的合并好处。

对于每个线程块都在做单独的直方图的情况，这可能没有意义，但您可能也对[推力散射](http://thrust.github.io/doc/scatter_8h.html)感兴趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T04:24:01.323

好吧，我想最简单的方法是找出哪个`bins>0`和之后，然后可以进行排他扫描（例如为了计算目标索引`sum_array[]`），然后将所有`bins>0`移动到`d_hist[sum_array[threadIdx.x]-1]=s_hist[threadIdx.x]`

```
 0,1,2,3,4,5,6... //s_indexes[]

 4,3,0,2,1,0,5... //contents of s_hist[]
 1,1,0,1,1,0,1... //all bins which are > 0 = sum_array[]

 1,2,2,3,4,4,5... //inclusive_scan of summ_array[]

 //after the moving part
 0,1,3,4,6... //s_indexes[]
 4,3,2,1,5... //d_hist[]
 0,1,2,3,4... //d_indexes[] 
```

我倾向于使用这种模式的原因是因为它需要 log_base_2(256) 时间来计算 sum_array plus，除此之外，移动和检查部分只是恒定时间操作，如果有人有不同的想法，请分享。

# android - 如何在 Pull Parser for Android 中获取带有匹配标签的 XML 内容？

> ID：15963030
> 
> 赞同：2
> 
> 时间：2013-04-12T04:23:13.243
> 
> 标签：android, xml-parsing, rss, imageview, xmlpullparser

我正在尝试使用 Android 中的 Pull Parser 来获取 image2 和 image3 的值。

```
<item>
<title>Title Goes Here!</title>
<picture><![CDATA[http://blahblah.image.jpg]]></picture>
<picture><![CDATA[http://blahblah.image2.jpg]]></picture>
<picture><![CDATA[http://blahblah.image3.jpg]]></picture>
</item>

...
case XmlPullParser.END_TAG
if (tagname.equalsIgnoreCase("item")
_feed.addItem(_item);
} else if (tagname.equalsIgnoreCase("title")) {
_item.setTitle(theString)
} else if (tagname.equalsIgnoreCase("picture")) {
_item.setLargeImage(theString)
} else if (tagname.equalsIgnoreCase("picture")) {
_item.setLargeImage2(theString)
} else if (tagname.equalsIgnoreCase("picture")) {
_item.setLargeImage3(theString)
}
break;
... 
```

我可以解析并加载第一张图片，但是我不知道下一步是如何获取其他图片？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T04:50:33.137

您的代码中存在逻辑错误：

```
} else if (tagname.equalsIgnoreCase("picture")) {
    _item.setLargeImage(theString)
} else if (tagname.equalsIgnoreCase("picture")) {
    _item.setLargeImage2(theString)
} else if (tagname.equalsIgnoreCase("picture")) {
    _item.setLargeImage3(theString)
} 
```

第二个和第三个`else if`条件测试之后的代码永远不会被执行，如果遇到的标签是`picture`，控制流将在第一个 结束`if (tagname.equalsIgnoreCase("picture"))`。

您可以执行以下操作来实现您想要的：

```
List<String> imageList = new ArrayList<String>();
} else if (tagname.equalsIgnoreCase("picture")) {
    imageList.add(theString);
}

// after you finish parsing the xml file, set the image URLs on your item.
_item.setLargeImage(imageList.get(0));
_item.setLargeImage2(imageList.get(1));
_item.setLargeImage3(imageList.get(2)); 
```

# c# - 从 ASMX Web 服务调用方法 -error-

> ID：15963032
> 
> 赞同：0
> 
> 时间：2013-04-12T04:23:25.550
> 
> 标签：c#, web-services, service, web, asmx

我正在尝试编写一个应用程序（简单形式），它将使用（调用）Web 服务（Service1.asmx）并显示结果。现在，Web 服务有了一个方法。这是代码：

```
public class Service1 : System.Web.Services.WebService
{

    [WebMethod]
    public Customer getCustomer(String id)
    {
        Customer customer = new Customer();

        customer.CustomerId = id;
        customer.CustomerName = "ABC Warehouse";
        customer.CustomerAddress = "123 Anywhere";
        customer.CustomerCity = "Pittsburgh";
        customer.CustomerState = "PA";
        customer.CustomerZip = 10379;
        customer.CustomerContact = "Dan Smith";
        customer.CustomerPhone = "2484567890";
        customer.CustomerCredit = "True";

        return customer;
    }
} 
```

当我从其原始项目运行 Web 服务时，我可以在文本框中输入文本[Example](http://oi50.tinypic.com/29bemmx.jpg)并单击调用以查看 xml 结果[Example](http://oi48.tinypic.com/24o4jkn.jpg)。现在，我在另一个项目中的简单表单有一个文本框 (txt1)、按钮 (btn1) 和标签 (lbl1)。我成功添加了 Web 服务，并且所有的功能和类都转移了。现在，我想要发生的是当您在文本框中键入内容时，单击提交，然后查看标签中的 xml 结果，该标签将包含文本框中键入的文本，就像我在其上运行服务一样自己的。这是我遇到问题的代码：

```
 public partial class _Default : System.Web.UI.Page
    {
        protected void btn1_Click(object sender, EventArgs e)
        {
            MyService.Service1 service = new MyService.Service1();
            string message = service.getCustomer(string id);
            ID = txt1.Text;
            lbl1.Text = message; 
        }
    } 
```

我哪里错了？我显然是一个初学者，所以所有的帮助将不胜感激。ps: MyService 是我添加 web 服务时命名的命名空间

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T04:59:17.083

您的代码将无法编译，因为 getCustomer 返回 Customer 对象。

```
 protected void btn1_Click(object sender, EventArgs e)
    {
        MyService.Service1 service = new MyService.Service1();
        MyService.Customer customer= service.getCustomer(string id);
        ID = customer.CustomerId;
        // here you can generate XML based on customer object if you really need to do so
        lbl1.Text = GetCustomerXML(customer);// implement method to get XML
    }

    private string GetCustomerXML( MyService.Customer  customer)
    {
        XmlSerializer xsSubmit = new XmlSerializer(typeof(MyService.Customer));
        StringWriter sw= new StringWriter();
        XmlWriter writer = XmlWriter.Create(sw);
        xsSubmit.Serialize(writer, customer);
        return sw.ToString(); 
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T04:37:21.270

首先，在服务方法中，您需要定义响应格式数据必须是 XML 格式。然后在客户端使用`'XmlNode'`从服务中获取数据。 [我认为这篇文章对你有用](https://stackoverflow.com/questions/13328427/how-do-you-display-xml-data-from-wcf-service-in-windows-form-app-in-datagridview)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T04:44:38.290

您的错误是认为您将恢复 XML。你不是。你会`MyService.Customer`回来的。

仅供参考，您应该使用“添加服务引用”来使用 .asmx 服务。

# permissions - 什么是 Get_Tasks 权限，它的用途是什么？

> ID：15963033
> 
> 赞同：1
> 
> 时间：2013-04-12T04:23:30.723
> 
> 标签：permissions, task

我正在研究为一个项目开发应用程序，并开始研究权限。我知道 GET_TASKS 的技术定义 - 允许应用程序获取有关当前或最近运行的任务的信息：任务的缩略图表示、其中正在运行的活动等。我不知道什么是“缩略图” " 表示是——它是一张真实的图片（即另一个应用程序中正在发生的事情的屏幕截图），还是只是关于该应用程序的一些信息？另外，“其中正在运行哪些活动”的定义是什么意思？这是否意味着某人可以开发一个应用程序，该应用程序实际上可以准确地知道某人在做什么，几乎就像一个间谍应用程序（即，如果有人在他们的浏览器上检查他们的银行信息，应用程序可以看到吗？）。谢谢大家的帮助，我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-06T18:16:00.500

它在上下文的“上下文”中使用......所以，给你的活动。例如

```
 Context context = this.hostActivity.getApplicationContext();
            ActivityManager am = (ActivityManager)context.getSystemService("activity");
            List taskInfo = null;
            try {
                 taskInfo = am.getRunningTasks(1);
                 if ((taskInfo != null) && (!taskInfo.isEmpty())) {
                   ComponentName topActivity = ((ActivityManager.RunningTaskInfo)taskInfo.get(0)).topActivity;
                   if (!topActivity.getPackageName().equals(context.getPackageName())) {
                     this.logger.debug("The application was displaced by new one.");
                     needPause = true;
                   } else {
                     this.logger.debug("The activity was displaced by new one in the same application.");
                   }
                 }
               } catch (SecurityException e) {
                 needPause = true;
                 this.logger.warn("The application has no GET_TASKS permission.");
               } 
```

# asp.net - Response.RedirectPermanent 中的特殊字符

> ID：15963035
> 
> 赞同：0
> 
> 时间：2013-04-12T04:23:35.740
> 
> 标签：asp.net, c#-4.0, redirect, response.redirect

我正在重定向到一个包含一些德语特殊字符的 URL，例如： ü 。

虽然在 Firefox 中这个特殊字符保持原样：ü，但在 IE 和 Chrome 中它被更改为：%c3%bc。

我怎样才能防止这种情况在 IE 和 chrome 中发生？我正在使用 Response.RedirectPermanent() 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T04:28:59.093

这种转换不会改变任何东西。根据要求，它将被转换回来。发生这种转换是因为 URL 中的字符有限。有关更多信息，请查看[http://www.blooberry.com/indexdot/html/topics/urlencoding.htm](http://www.blooberry.com/indexdot/html/topics/urlencoding.htm)

# php - 将 JSON 数据从 Android 发送到 PHP 并写入文本文件

> ID：15963039
> 
> 赞同：3
> 
> 时间：2013-04-12T04:24:00.547
> 
> 标签：php, android, json, post

我正在尝试获取在 Android 设备上动态创建的特定 JSON 文件，并使用 HTTP 发布请求将该数据发送到 PHP 脚本以存储到文本文件中以供以后使用。最终，我还需要将数据保存在 MySQL 数据库中，但我一步一步地工作。JSON 文件的格式示例如下：

```
{"timestamp": 1351181576.64078, "name": "engine_speed", "value": 714.0}
{"timestamp": 1351181576.64578, "name": "vehicle_speed", "value": 0.0}
{"timestamp": 1351181576.6507802, "name": "brake_pedal_status", "value": true} 
```

这个文件是在 Android 上逐行动态创建的，所以我不能一次发送整个文件，但是创建的每一行我都想发送到 PHP 脚本。我编写了一个基本的 Android 应用程序，当按下按钮时，它会获取一个 JSONObject 并使用 HTTP Post 将其发送到 PHP 脚本。现在我不担心将实际的 JSON 文件解析为要发送的对象，我只是使用两个测试 JSONObjects。PHP脚本获取第一个对象并将其存储到文本文件中没有问题，但另一个对象一直读取为空，我不知道为什么。我对 PHP 和 Android 编程比较陌生，不确定我是否以正确的方式发送和接收数据。以下是我相关的 Android 应用程序代码的片段：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    final Button button = (Button) findViewById(R.id.sendData);
    button.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            // Perform action on click
            Toast.makeText(MainActivity.this, "button was pressed",
                    Toast.LENGTH_SHORT).show();
            try {
                JSONObject json = new JSONObject(); 
                json.put("timestamp", 1351181576.64078); 
                json.put("name", "engine_speed");
                json.put("value", 714.0);
                postData(json);

                JSONObject json2 = new JSONObject(); 
                json.put("timestamp", 1351181576.7207818); 
                json.put("name", "steering_wheel_angle");
                json.put("value", 11.1633);
                postData(json2);
            } catch (JSONException e) {
                e.printStackTrace();
            }

        }
    });     
}

public void postData(JSONObject json) throws JSONException {
    HttpClient httpclient = new DefaultHttpClient();

    try { 
        HttpPost httppost = new HttpPost(URL);

        List<NameValuePair> nvp = new ArrayList<NameValuePair>(2);    
        nvp.add(new BasicNameValuePair("json", json.toString()));
        //httppost.setHeader("Content-type", "application/json");  
        httppost.setEntity(new UrlEncodedFormEntity(nvp));
        HttpResponse response = httpclient.execute(httppost); 

        if(response != null) {
            InputStream is = response.getEntity().getContent();
            //input stream is response that can be shown back on android
        }

    }catch (Exception e) {
        e.printStackTrace();
    } 
} 
```

下面是从 HTTP Post 获取数据并将其写入文本文件的 PHP 代码：

```
<?php
   $filename = __DIR__.DIRECTORY_SEPARATOR."jsontest.txt";
   $json = $_POST['json'];
   $data = json_decode($json, TRUE);

   if(is_null($json) == false){
      file_put_contents($filename, "$json \n", FILE_APPEND);
      foreach ($data as $name => $value) {
         file_put_contents($filename, "$name -> $value  \t", FILE_APPEND);
      }
      file_put_contents($filename, "\n", FILE_APPEND);
   }

   $myFile = "jsontest.txt";
   $fh = fopen($myFile, 'r');
   $theData = fread($fh,  filesize($myFile));
   fclose($fh);
   ?>

   <meta http-equiv="refresh" content="3" >
   <html>
      <!-- Displaying the data from text file, not really needed -->
      <p><?php echo $theData; ?></p>
   </html> 
```

现在输出文本文件看起来像这样，第一个对象保存得很好，第二个对象显示为空：

```
{"value":714,"timestamp":1.35118157664078E9,"name":"engine_speed"} 
value -> 714    timestamp -> 1351181576.64      name -> engine_speed    
{} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T04:28:58.097

您的问题出在您的 Android 应用程序中：

```
 JSONObject json = new JSONObject(); 
            json.put("timestamp", 1351181576.64078); 
            json.put("name", "engine_speed");
            json.put("value", 714.0);
            postData(json);

            JSONObject json2 = new JSONObject(); 
            json.put("timestamp", 1351181576.7207818); 
            json.put("name", "steering_wheel_angle");
            json.put("value", 11.1633);
            postData(json2); 
```

您没有将任何数据放入 中`json2`，而是在修改`json`. 然后，您将完全未修改（因此为空）的`json2`对象发送到 PHP，PHP 将其打印为`{}`.

如果您修复您的 Android 应用程序以正确填写`json2`，事情应该可以工作：

```
 JSONObject json2 = new JSONObject(); 
            json2.put("timestamp", 1351181576.7207818); 
            json2.put("name", "steering_wheel_angle");
            json2.put("value", 11.1633);
            postData(json2); 
```

# html - 我无法在 Aptana Studio 3 中测试任何项目

> ID：15963040
> 
> 赞同：0
> 
> 时间：2013-04-12T04:24:09.553
> 
> 标签：html, firefox, testing, proxy, aptana

当我尝试测试我的项目时，firefox 打开，而不是显示页面，而是弹出下载对话框。该页面是标准的 XHTML（甚至不能使用模板）。

我在代理后面，但我尝试使用 127.0.0.1 和 localhost 作为例外。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T18:38:48.023

好的，看来问题是页面的*扩展*。我使用的是 .xhtml 页面。当我更改为带有 .html 扩展名的 XHTML 时，它起作用了。

# android - 使用 SAXParser 进行 Android XML 解析

> ID：15963043
> 
> 赞同：0
> 
> 时间：2013-04-12T04:24:27.977
> 
> 标签：android, android-layout, android-intent, saxparser

我有我的 RSS 文件项目：

```
<item >
<title>Prasad</title>
<link>http://www.tele.com/rssHostDescr.php?hostId=15</link>
<guid isPermaLink="false">http://www.tele.com/rssHostDescr.php?hostId=14</guid>
<pubDate>2013-04-10</pubDate>
<description>Prasad</description>
<media:thumbnail width='66' height='49' url='http://www.tele.com/hos/Panthi-image.jpg'></media:thumbnail>
</item>
<item>
........................
</item>

etc..................... 
```

我正在尝试解析上述文件，我能够获取所有信息（标题、链接、日期）但我的要求是获取 url 属性值，如何从 media:thumbnail 标记中获取 URL 值？有人可以帮忙吗？

这是我的代码：

```
public class HostsRssHandler extends DefaultHandler {
    private List<HostsProfile> messages;
    private HostsProfile currentMessage;
    private StringBuilder builder;

    public List<HostsProfile> getMessages(){
        return messages;
    }
    @Override
    public void characters(char[] ch, int start, int length)
            throws SAXException {
        super.characters(ch, start, length);
        builder.append(ch, start, length);
    }
    @Override
    public void endElement(String uri, String localName, String name)
            throws SAXException {
        super.endElement(uri, localName, name);
        if (this.currentMessage != null){
            if (localName.equalsIgnoreCase("tilte")){
                currentMessage.setTitle(builder.toString());
            } else if (localName.equalsIgnoreCase("link")){
                currentMessage.setLink(builder.toString());
            }
                else if (localName.equalsIgnoreCase("media:thumbnail")){
                    currentMessage.setMediathumbnail(builder.toString());
                }
             else if (localName.equalsIgnoreCase("pubDate")){
                currentMessage.setDate(builder.toString());
            }

            else if (localName.equalsIgnoreCase("item")){
                messages.add(currentMessage);
            }
            builder.setLength(0);   
        }
    }

    @Override
    public void startDocument() throws SAXException {
        super.startDocument();
        messages = new ArrayList<HostsProfile>();
        builder = new StringBuilder();
    }

    @Override
    public void startElement(String uri, String localName, String name,
            Attributes attributes) throws SAXException {
        super.startElement(uri, localName, name, attributes);
        if (localName.equalsIgnoreCase("item")){
            this.currentMessage = new HostsProfile();
        }
    }   
} 
```

笔记：

```
else if (localName.equalsIgnoreCase("media:thumbnail")){
                    currentMessage.setMediathumbnail(builder.toString());// During My Program Execution, Here I'm not able to get any value
                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T04:43:29.817

您需要从属性中读取值，因此它必须位于`startElement`：

```
@Override
public void startElement(String uri, String localName, String name,
        Attributes attributes) throws SAXException {
    super.startElement(uri, localName, name, attributes);
    if (localName.equalsIgnoreCase("item")){
        this.currentMessage = new HostsProfile();
    }
    //Validate that localName has the value you want. In theory localName shouldn't have the prefix
    if (localName.equalsIgnoreCase("thumbnail")) { 
      currentMessage.setMediaThumbnail(attributes.getValue("url"));
    }
} 
```

# snmp4j - 无法接收和处理 RequestID 为 0 的 snmp 数据包

> ID：15963051
> 
> 赞同：0
> 
> 时间：2013-04-12T04:25:03.427
> 
> 标签：snmp4j

我有一个启用了 snmp 的设备，我想做它的监控。但是这个设备对所有的获取请求都给出了 Request-ID 0 的响应。snmp4j 库丢弃这些接收到的数据包，因为它发送的请求 ID 值不是 0丢弃接收到的数据包并返回“null”值以响应。

如果我在发送 get 请求之前在 snmp 数据包中将 Request-ID 设置为 0，则可以处理响应 snmp 数据包。

对于这个 snmp4j 库包含“setRequestID(Integer32 (value))”函数来设置任何 snmp 数据包所需的 Request-ID，但该函数不能将 Request-ID 值设置为 0。当我将值设置为 0 时，这函数将此值替换为某个随机请求 ID 值。

如果有人有解决方案，请回复。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-23T20:12:40.840

request-id 字段用于在响应返回客户端时标识响应。因此，如果您正在查询的设备返回请求 ID 值为 0 而不是提供的值的所有请求，则客户端 (snmp4j) 正确丢弃响应，因为它是无效的。响应包中的 request-id 必须始终与原始请求中的 request-id 匹配。该设备有一个错误的 SNMP 堆栈。如果您更改代码以强制请求始终具有 0 的请求 ID，则您正在破坏功能以启用与非标准代理的兼容性，我建议您不要这样做。

# asp.net - 数据列表中动态的图像没有出现在服务器上

> ID：15963054
> 
> 赞同：0
> 
> 时间：2013-04-12T04:25:28.803
> 
> 标签：asp.net, image, publish, datalist, remote-server

在我的网络应用程序中，我有一个数据列表。我需要在每 3 个项目之后插入一些图像。代码如下：

```
for (int i = 1; i <= dlHomeContent.Items.Count; i++)
        {
            if (i > 0 && i % 3 == 0)
            {
                imgPath = "~/Advertisement/homeadvt" + adCnt + ".jpg";
                if (File.Exists(Server.MapPath("/Advertisement/homeadvt" + adCnt + ".jpg")))
                {
                    HtmlGenericControl divAdv = new HtmlGenericControl();
                    divAdv = (HtmlGenericControl)dlHomeContent.Items[i - 1].FindControl("divAdv");
                    divAdv.Attributes.Remove("class");
                    divAdv.Attributes.Add("class", "show-control");
                    Image imgAdvt = new Image();
                    imgAdvt = (Image)dlHomeContent.Items[i - 1].FindControl("imgAdvt");
                    imgAdvt.ImageUrl = imgPath;
                }                    
                adCnt++;
            }
        } 
```

图像放置在根项目下的广告文件夹中。这在我的本地机器上运行完美。但是当我将它发布到远程服务器（在亚马逊上设置）时，图像没有显示出来。可能是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T05:01:39.897

```
for (int i = 1; i <= dlHomeContent.Items.Count; i++)
        {
            if (i > 0 && i % 3 == 0)
            {
                imgPath = "~/Advertisement/homeadvt" + adCnt + ".jpg";
                if (File.Exists(Server.MapPath("/Advertisement/homeadvt" + adCnt + ".jpg")))
                {
                    HtmlGenericControl divAdv = new HtmlGenericControl();
                    divAdv = (HtmlGenericControl)dlHomeContent.Items[i - 1].FindControl("divAdv");
                    divAdv.Attributes.Remove("class");
                    divAdv.Attributes.Add("class", "show-control");
                    Image imgAdvt = new Image();
                    imgAdvt = (Image)dlHomeContent.Items[i - 1].FindControl("imgAdvt");
                    imgAdvt.ImageUrl = Server.MapPath("/Advertisement/homeadvt" + adCnt + ".jpg");
                }                    
                adCnt++;
            }
        } 
```

映射到项目文件夹后，您应该保存图像位置。

# java - java中如何通过反射获取注解

> ID：15963055
> 
> 赞同：2
> 
> 时间：2013-04-12T04:25:30.183
> 
> 标签：java, annotations

这是我的注释：

```
@RequestMapping(method = RequestMethod.POST, value = "/trade/createrequisition") 
```

现在我想在这种情况下获取请求方法`it is POST`和在这种情况下的值`it is /trade/createrequisition`。

如何在java中使用反射来做到这一点。

请帮我解决这个问题。

编辑：

这是我的实际方法：

```
@PreAuthorize("isAuthenticated() and hasPermission(#request, 'CREATE_REQUISITION')")
    @RequestMapping(method = RequestMethod.POST, value = "/trade/createrequisition")
    public @ResponseBody
    void createRequisition(@RequestBody CreateRequisitionRO[] request,
            @RequestHeader("validateOnly") boolean validateOnly) {
....
} 
```

这就是我尝试获取@RequestiMapping 的方式：

```
package com.hexgen.reflection;

import java.lang.reflect.Method;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import com.hexgen.api.facade.HexgenWebAPI;

public class WebAPITest {
    public static void main(String[] args) {
        try {
            Class<HexgenWebAPI> clazz = HexgenWebAPI.class;
            Method methodAnnotaion = clazz.getMethod("createRequisition");
            RequestMapping methodRequestMappingAnnotation = methodAnnotaion.getAnnotation(RequestMapping.class);
            RequestMethod[] methods = methodRequestMappingAnnotation.method();
            String[] mappingValues = methodRequestMappingAnnotation.value();

            for(RequestMethod req : methods){
                System.out.println("RequestMethod : " + req);
            }

            for (String string : mappingValues) {
                System.out.println("mappingValues : " + string);
            }

        } catch (Exception e) {
            e.printStackTrace();
        }

    }
} 
```

但我得到了这个例外：

```
java.lang.NoSuchMethodException: com.hexgen.api.facade.HexgenWebAPI.createRequisition()
    at java.lang.Class.getMethod(Class.java:1605)
    at com.hexgen.reflection.WebAPITest.main(WebAPITest.java:12) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T04:40:38.033

当您尝试获取`RequestMapping`注释时，它可以放在类或方法中，请参阅下面的两种用法：

对于一个类`YourClass`：

```
Class<YourClass> clazz = YourClass.class;
RequestMapping clazzRequestMappingAnnotation = clazz.getAnnotation(RequestMapping.class);
RequestMethod[] methods = clazzRequestMappingAnnotation.method();
String[] mappingValues = clazzRequestMappingAnnotation.value(); 
```

对于`methodName`类中的方法`YourClass`：

```
Class<YourClass> clazz = YourClass.class;
Method method = clazz.getMethod("methodName");
RequestMapping methodRequestMappingAnnotation = method.getAnnotation(RequestMapping.class);
RequestMethod[] methods = methodRequestMappingAnnotation.method();
String[] mappingValues = methodRequestMappingAnnotation.value(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T04:32:40.670

如果此注释在一个类上（例如：），`Test`那么

```
RequestMapping a = Test.class.getAnnotation(RequestMapping.class);
RequestMethod m = a.getMethod(); 
```

# web-services - Web 服务响应出现架构验证错误

> ID：15963057
> 
> 赞同：0
> 
> 时间：2013-04-12T04:25:42.077
> 
> 标签：web-services, soapui

我正在使用 glassfish 进行开发。

当我通过我们的 UAT 框中的 SoapUI 发送 SOAP 请求来访问 Web 服务时。我收到以下架构验证错误消息。

> 无效的 QName 值：无法解析前缀“ns0”

对于导致错误的行，响应如下所示。

```
<faultcode>ns0:SC_018</faultcode> 
```

但在我当地的盒子里。我没有收到验证错误。因为上面引起问题的行看起来像

```
<faultcode xmlns:ns0="http://****.com">ns0:SC_018</faultcode> 
```

我在想应该有一些 JVM 选项设置不同，可能会导致这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T04:47:39.783

有一个`ns0`未定义的命名空间前缀（在您的 XML 请求/响应中）。

因为您说该行出现在具有正确命名空间定义 ( `xmlns:ns0="http://****.com"`) 的一台机器上而不是另一台机器上，所以这可能是服务提供商的问题。

`ns0:SC_018`看起来像一个自定义错误代码，有时是正确构建的（有命名空间并且没有给出错误），有时不是（没有命名空间和错误出现）。

你说这出现在一台机器上而不是另一台机器上，它是同一个客户端吗？SoapUI 是一个 Java 程序，因此它必须在不同的环境中表现得几乎完全一样。此外，这是一个非常具体的问题，似乎不太可能是 JVM 配置问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-15T14:08:50.750

为了解决此问题，您已更新架构，一旦架构更新成功，然后尝试更新定义。它会被修复。

# c++ - 当我将它分配给 std::string 时，我可以释放 char* 字符串的内存吗？

> ID：15963059
> 
> 赞同：7
> 
> 时间：2013-04-12T04:25:48.777
> 
> 标签：c++, string, free, stdstring

将 char* 指向的字符串转换为 std::string 后，我可以释放它的内存吗？例如：

```
char* c_string;
c_string = strdup("This is a test");
std::string cpp_string;
cpp_string(c_string);
free(c_string); /* can I call free here? */ 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-12T04:28:04.400

是的。`std::string`复制底层 C 字符串。

^(资料来源：C++11 草案 N3376 §21.4.2 的表 67。)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-12T04:28:18.617

是的。构造`std::string`函数复制传递给它的字符串。

[请参阅此页面](http://www.cplusplus.com/reference/string/string/string/)上的构造函数 #4 。

```
string (const char* s);    // from c-string 
```

> **来自 c 字符串**
> 
> 复制 s 指向的以 null 结尾的字符序列（C 字符串）。

# java - 为什么秋千中的 Container 有太多的层次感？

> ID：15963060
> 
> 赞同：1
> 
> 时间：2013-04-12T04:25:50.357
> 
> 标签：java, swing, jframe, contentpane

谁能告诉我下面的代码有什么区别

```
JFrame jf=new JFrame();
JButton jb=new JButton();
jf.add(jb); 
```

和

```
JFrame jf=new JFrame();
Container c=jf.getContentPane();
JButton jb=new JButton();
c.add(jb); 
```

即使我不清楚 RootPane、LayeredPane、GlassPane。RootPane 有什么用？？我从来没有在我的编码中使用过它。我已从以下链接中阅读

[http://docs.oracle.com/javase/tutorial/uiswing/components/toplevel.html](http://docs.oracle.com/javase/tutorial/uiswing/components/toplevel.html)

但不太清楚，因为我没有使用上述的实际情况。感谢您的回答！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T04:48:10.737

从 Java 5 开始，您的代码示例之间没有区别。 `JFrame#add`现在`JFrame#getContentPane`代表您重定向到。

在 Java 5 之前，它会抛出异常，这意味着您必须自己将组件直接添加到内容窗格中。

`JRootPane`用于提供一个轻量级的容器，可以在其上添加其他 Swing 组件。更重要的是，它提供了一种顶层 Swing 容器可以自行组织的方法。

由`JRootPane`层组成。底部是`JMenuBar`内容窗格，上方是玻璃窗格。

由于它的构造方式，它`JRootPane`实际上可以有许多附加层（通常在内容窗格和玻璃窗格之间），这通常用于弹出窗口之类的东西。

玻璃窗格充当覆盖层，可用于在其他所有内容之上呈现内容（以及阻止鼠标和键盘事件）。

看看[如何使用根窗格](http://docs.oracle.com/javase/tutorial/uiswing/components/rootpane.html)。

通常，除了内容窗格和玻璃窗格之外，您通常不会使用根窗格的任何其他部分。

您还可以查看[此](https://stackoverflow.com/questions/15961472/how-can-i-paint-in-an-specific-jpanel-when-more-than-one-in-same-frame-java/15961655#15961655)内容以获取使用中的玻璃窗格的快速示例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T04:54:41.363

两者都是相同的......
两者都添加到 java.awt.Container 对象中。

JFrame 和 Container 具有以下层次结构
案例 1: JFrame#add()--> Frame#add()--> Window#add()--> Container#add() // 组件添加到容器

案例2：JFrame#getContentPane() --> getRootPane().getContentPane(); 它将返回 Container 对象（Container#add）

# javascript - 我可以将任何自定义 UI 框架与 Amazon Web Serviecs 一起使用吗

> ID：15963063
> 
> 赞同：0
> 
> 时间：2013-04-12T04:26:34.783
> 
> 标签：javascript, user-interface, amazon-web-services

我打算使用 AWS 作为中间件平台，并有一个定制的 UI，最好是一些基于 JS 的 UI 框架作为前端。我的问题自然是我是否可以拥有这种系统，或者我是否会被迫使用 AWS 系统附带的 UI。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T08:51:23.600

*好奇*

Amazon Web Services 是基于基础设施的“云计算”服务（例如，服务器、存储、数据库）的名称。没有用户界面。它们实际上是原始的 Web 服务。

当然，除非您谈论的是*不是 AWS*的其他亚马逊服务，例如 Amazon Flexible Payments Service (FPS)、Amazon Associates（产品广告）或 Amazon Marketplace Web Service (MWS)。

# php - 在 Codeigniter Native 会话中自动过期会话

> ID：15963064
> 
> 赞同：0
> 
> 时间：2013-04-12T04:26:35.080
> 
> 标签：php, codeigniter, session, session-cookies

我需要让会话保持 30 分钟，然后将其销毁，因为在 30 分钟内没有任何操作/活动。我正在使用 codeigniter 本机会话。我在配置文件中添加了过期时间，例如：

```
 $config['sess_expiration'] = 1800; 
```

但这不起作用。任何人都知道如何在 codeigniter Native 会话库中设置会话过期时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T04:39:28.993

请记住，codeigniter 的会话不是实际的 php 会话，而是他们自己处理用户“会话”的方式。您是否使用数据库来存储它们？如果您正在使用它们，我强烈建议您使用数据库，否则您无法验证它们。

[http://ellislab.com/codeigniter/user-guide/libraries/sessions.html](http://ellislab.com/codeigniter/user-guide/libraries/sessions.html)有更多信息。

[CodeIgniter 如何知道 cookie 保存了有效的会话数据？](https://stackoverflow.com/questions/2177742/how-does-codeigniter-know-a-cookie-holds-valid-session-data)也可能是一本好书。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T04:59:02.310

您已设置

> sess_expiration

你仍然需要更新所以我认为你必须再包含 1 行

> sess_time_to_update

```
$config['sess_expiration']        = 1800;
$config['sess_time_to_update']    = $config['sess_expiration']; 
```

# java - 我可以使用 Arrays.copyOf 制作二维数组的防御性副本吗？

> ID：15963070
> 
> 赞同：0
> 
> 时间：2013-04-12T04:27:35.177
> 
> 标签：java

据我了解，我们可以[`java.util.Arrays.copyOf`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#copyOf%28T%5B%5D,%20int%29)用来复制二维数组，但是将它用于防御性复制是否安全（假设元素是不可变的）？例如

```
void setValues(Integer[][] arr) {
    this.arr = Arrays.copyOf(arr, arr.length);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T04:36:44.543

不，这不是深拷贝。 `arr`看起来像这样（模拟内存地址）：

```
@0x01 [
  @0x10 [1,2],
  @0x20 [2,3],
  @0x30 [4,5],
] 
```

当您使用 复制时`Arrays.copyOf`，您会得到一个新的外部数组，因此`this.arr`将是：

```
@0x02 [
  @0x10 [1,2],
  @0x20 [2,3],
  @0x30 [4,5],
] 
```

如果你想确保你的二维数组不会改变，你可以这样做：

```
this.arr = new Integer[arr.length][];
for (int i = 0; i < arr.length; i++) {
    this.arr[i] = Arrays.copyOf(arr[i], arr[i].length);
} 
```

现在*这*只是安全的，因为`Integer`它是不可变的。如果它是更复杂的东西，你必须弄清楚如何安全地复制*它*，这可能涉及更多的副本。Java 不为您提供免费的深拷贝。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T04:37:52.743

它不是**深**拷贝**，而是浅**拷贝。

它复制指定的数组，用空值截断或填充（如有必要），因此副本具有指定的长度。对于在原始数组和副本中都有效的所有索引，这两个数组将包含相同的值。

```
2771    public static <T,U> T[] copyOf(U[] original, int newLength, Class<? extends T[]> newType) {
2772        T[] copy = ((Object)newType == (Object)Object[].class)
2773            ? (T[]) new Object[newLength]
2774            : (T[]) Array.newInstance(newType.getComponentType(), newLength);
2775        System.arraycopy(original, 0, copy, 0,
2776                         Math.min(original.length, newLength));
2777        return copy;
2778    } 
```

[代码参考](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/Arrays.java#Arrays.copyOf%28java.lang.Object%5B%5D,int%29)——打开jdk 6-b14

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T04:33:26.767

`Arrays.copyOf`在内部使用`System.arraycopy`，所以不，它不适合制作防御性（深度）副本（至少不适用于可变类型）。

# java - Eclipse Juno WindowBuilder 调色板为空

> ID：15963082
> 
> 赞同：2
> 
> 时间：2013-04-12T04:29:13.603
> 
> 标签：java, eclipse, eclipse-plugin, windowbuilder, palette

我正在**为 Java EE 使用 Eclipse 4.2 (Juno)，**并且刚刚安装了**WindowBuilder**插件。目前我正在使用 Swing 组件构建 Java SE 应用程序。

`Palette`是**完全空**的（没有小部件）。这是安装不完整的迹象还是我（希望）错过了一些明显的东西？

我能够选择`New -> Other -> WindowBuilder -> Swing Designer -> JPanel`.

甚至不确定我需要提供哪些其他信息。

预先感谢您的帮助。

**编辑：**

我通过`Help -> Install new software` 按照[这些说明安装](https://stackoverflow.com/questions/10867920/installing-windowbuilder-on-eclipse-4-2?rq=1)安装。

让我失望的是，在 Eclipse 社区论坛中，我发现[了一篇](http://www.eclipse.org/forums/index.php/mv/msg/243146/730895/)回答类似问题的帖子：“*您所看到的是**预期的行为**。在您实际使用 WindowBuilder 编辑 UI 类之前，这些视图将是空的。* ”。我不知道如何解释它。

**更新：问题已解决**

当我创建一个新的`JFrame`via`Create new visual classes`图标时，我终于得到了`Design`视图以及`Palette`完整的组件和普通`Structure`视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T07:15:55.897

Eclipse 中的 Palette 视图与当前活动的编辑器相关联。因此，如果您没有编辑器，或者您选择并专注于 Palette 视图，它将是空的。所以让调色板视图保持打开状态，然后创建一个 JFrame java 类。然后右键单击 Java 类并确保在 WindowBuilder 编辑器中打开它。一旦 WindowBuilder 可视化编辑器打开，并且您还打开了 Palette，您应该会看到那里填充了 wigets。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-28T08:25:19.947

检查托盘是否在视图面板中打开（平行于控制台，进度和所有），如果它打开关闭，则面板将自动出现在 windowsBuilder 工具中。

# ios - 如何将 GUI 元素保留在通过故事板中的代码播放的电影之上？

> ID：15963083
> 
> 赞同：0
> 
> 时间：2013-04-12T04:29:31.137
> 
> 标签：ios, ipad, mpmovieplayercontroller

我有一个故事板。在我的 viewDidLoad 中，我可以显示和播放我的电影，但故事板上的任何按钮都被隐藏了。我可以将它们添加到代码中，但更希望将我的图形元素布置在我的故事板上并让它们位于电影的顶部。建议最受赞赏。代码在这里：

```
- (void)viewDidLoad
{
  [super viewDidLoad];

 // Do any additional setup after loading the view.
  NSString *videoPath = [[NSBundle mainBundle] pathForResource:@"foo" ofType:@"mov"];
  NSURL *url = [NSURL fileURLWithPath:videoPath];

  moviePlayer =  [[MPMoviePlayerController alloc] initWithContentURL:url];

  [[NSNotificationCenter defaultCenter] addObserver:self
                                           selector:@selector(moviePlayBackDidFinish:)
                                               name:MPMoviePlayerPlaybackDidFinishNotification
                                             object:moviePlayer];

  if ([UIDevice currentDevice].userInterfaceIdiom == UIUserInterfaceIdiomPad) {
    moviePlayer.view.frame = CGRectMake(0.0f,0.0f,1024.0f,768.0f);
  }

  moviePlayer.controlStyle = MPMovieControlStyleNone;

  [moviePlayer prepareToPlay];

  moviePlayer.repeatMode = MPMovieRepeatModeOne;

  moviePlayer.shouldAutoplay = YES;

  [self.view addSubview:moviePlayer.view];

  [moviePlayer setFullscreen:YES animated:YES];

  [self.moviePlayer play];

  // manually can add buttons here, but prefer not too it in code

  UIButton *myButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
  [myButton addTarget:self
             action:@selector(aMethod:)
   forControlEvents:UIControlEventTouchDown];

  myButton.frame = CGRectMake(26.0, 585.0, 474.0, 87.0);
  myButton.titleLabel.shadowOffset = CGSizeMake(0.0, 0.0);
  [myButton.titleLabel setFont:[UIFont systemFontOfSize:35]];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T22:57:35.827

解决了。创建了新图层。简单的。

# loops - 通过stata中的命令获取值返回

> ID：15963084
> 
> 赞同：0
> 
> 时间：2013-04-12T04:29:32.963
> 
> 标签：loops, stata, mat

我正在尝试运行`reg`并取回 中的系数值`Stata`。我做了以下。假设`y`因变量 , , ,`k`是`l`自变量，并且我创建了一个新变量。`m``n``new`

```
loc vars k l m n
reg y `vars'

# I know that I can get back the coefficients using mat list e(b) but I  need to 
get coefficient of each variable and use it to compute the elasticity (one at a time).

# so, I run the following loop but it doesn't work.

foreach i in vars {
sca coeff`i' = _b[`i'] # main problem here 
sca cons = _b[_cons]  # main problem here
corr new `i' , c # correlation of new with each independent vars
sca cov_`i' = r(cov_12)
sum `i' 
sca elas_`i' = (coeff`i'*r(mean))/10 # elasticity not working 
} 
```

在这方面的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T08:30:49.353

作为神父。说，鉴于`margins`. 但是为什么你的代码不起作用？您使用了错误的语法`foreach`。

你不应该打字

```
 foreach i in vars 
```

但

```
 foreach i of local vars 
```

否则 Stata 将使用文字文本`vars`而不是本地宏的内容`vars`。这两种语法在帮助中进行了解释，在[http://www.stata-journal.com/sjpdf.html?articlenum=pr0005中有更详细的说明](http://www.stata-journal.com/sjpdf.html?articlenum=pr0005)

小点：

1.  分配`sca cons = _b[_cons]`应该可以工作，但您不需要每次循环都重复它。

2.  您没有向我们展示您的生成代码`new`，因此我们必须假设这没问题。

顺便说一句，“不起作用”并不意味着什么。我曾经整理了一份清单，列出了我遇到的大约 20 种含义，其中最重要的包括“非法”和“不做我想做的事”。因此，详细说明究竟发生了什么——在这种情况下，正是 Stata 在回复中输入的内容——总是有帮助的。

# ios - 地理编码：将 NSArray 转换为 NSString

> ID：15963087
> 
> 赞同：1
> 
> 时间：2013-04-12T04:30:15.710
> 
> 标签：ios, iphone, geocoding

我`NSArray`在`.h`文件中声明了一个变量并在其中合成`.m`

```
@property (nonatomic, strong) NSArray *placemarksArray;  //.h file
@synthesize placemarksArray; //.m

-(BOOL)searchDisplayController:(UISearchDisplayController *)controller shouldReloadTableForSearchString:(NSString *)searchString 
{
    if (!geocoder)
    geocoder = [[CLGeocoder alloc] init];
    [geocoder geocodeAddressString:searchString completionHandler:^(NSArray* placemarks, NSError* error){

if ([placemarks count] > 0) {

        for (CLPlacemark* aPlacemark in placemarks)
        {

            self.street = placemark.thoroughfare;
            self.city = placemark.locality;
            self.state = placemark.administrativeArea;
            self.zip = placemark.postalCode;

            NSMutableString *result = [NSMutableString string];
            if (self.street)
                [result appendString:self.street];
            if (self.street && (self.city || self.state || self.zip))
                [result appendString:@", "];
            if (self.city)
                [result appendString:self.city];
            if (self.city && self.state)
                [result appendString:@", "];
            if (self.state)
                [result appendString:self.state];
            if (self.zip)
                [result appendFormat:@" %@", self.zip];
            [self.placemarksArray addObject:result];
            NSLog(@"%@", result);

            [self.searchDisplayController.searchResultsTableView reloadData];
        }
    }

}];
return NO; 
```

}

问题：如何设置`tableView:cellForRowAtIndexPath`显示`placemarksArray`在`tableView`？

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

上面的代码取自 Apple： [About Geocoder Objects](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/LocationAwarenessPG/UsingGeocoders/UsingGeocoders.html#//apple_ref/doc/uid/TP40009497-CH4-SW5)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T05:35:29.870

添加到您的`cellForRowAtIndexPath`方法中：

```
cell.textLabel.text = [placemarksArray objectAtIndex:indexPath.row]; 
```

这将做的是将每个单元格的文本设置为等于第 n 个索引处的文本`placemarksArray.`例如，第 3 行的单元格将具有数组索引 3 中的文本。

# elasticsearch - Elasticsearch 分面查询

> ID：15963088
> 
> 赞同：0
> 
> 时间：2013-04-12T04:30:48.020
> 
> 标签：elasticsearch

我想知道我是否可以为这样的事情编写一个分面查询

我的文档结构

```
UserID, AnswerID[] (int array)
1 , [9,10,11,56,78,99]
2 , [10,11,56,78,99]
3 , [8,10,12,56, 79,99]
4 , [9,10,11,56,78,99] 
```

如果我只想要回答 9,56 的用户数，我可以写一个查询。但我有两个清单

```
List A - 9,10,11
ListB - 56,78,99 
```

我想要两个列表的排列。

回答 [9,56]、[9,78]、[9,99]、[10,56]、[10,78]、[10,99]、[11,56] 的用户数...

我如何编写查询来实现这样的事情。

任何帮助表示赞赏，

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T07:15:27.733

它可以在不使用列表时工作：

```
# Print ES Version
curl 'http://localhost:9200/'

# Delete the index `testindex`
curl -XDELETE 'http://localhost:9200/testindex'

# Create the index `testindex`
curl -XPUT 'http://localhost:9200/testindex' -d '{
    "settings" : {
        "index" : {
            "number_of_shards" : 1,
            "number_of_replicas" : 0
        }
    }
}'

# Wait for yellow
curl -XGET 'http://localhost:9200/_cluster/health?wait_for_status=yellow'

# Index docs
curl -XPUT http://localhost:9200/testindex/type/1 -d '{ "listA":"value1", "listB":"value2" }'
curl -XPUT http://localhost:9200/testindex/type/2 -d '{ "listA":"value1", "listB":"value3" }'
curl -XPUT http://localhost:9200/testindex/type/3 -d '{ "listA":"value1", "listB":"value2" }'

# Refresh docs
curl -XPOST 'http://localhost:9200/testindex/_refresh'

# TermFacet
curl -XPOST 'http://localhost:9200/testindex/type/_search?pretty' -d '
{
   "query": { "match_all" : {} },
    "facets" : {
        "tag" : {
            "terms" : {
                "script_field" : "_source.listA + \" - \" + _source.listB"
            }
        }
    }   
}' 
```

给出：

```
{
  "took" : 1,
  "timed_out" : false,
  "_shards" : {
    "total" : 1,
    "successful" : 1,
    "failed" : 0
  },
  "hits" : {
    "total" : 3,
    "max_score" : 1.0,
    "hits" : [ {
      "_index" : "testindex",
      "_type" : "type",
      "_id" : "1",
      "_score" : 1.0, "_source" : { "listA":"value1", "listB":"value2" }
    }, {
      "_index" : "testindex",
      "_type" : "type",
      "_id" : "2",
      "_score" : 1.0, "_source" : { "listA":"value1", "listB":"value3" }
    }, {
      "_index" : "testindex",
      "_type" : "type",
      "_id" : "3",
      "_score" : 1.0, "_source" : { "listA":"value1", "listB":"value2" }
    } ]
  },
  "facets" : {
    "tag" : {
      "_type" : "terms",
      "missing" : 0,
      "total" : 0,
      "other" : -3,
      "terms" : [ {
        "term" : "value1 - value2",
        "count" : 2
      }, {
        "term" : "value1 - value3",
        "count" : 1
      } ]
    }
  }
} 
```

但我不知道什么时候使用列表......我很想知道它是否可以完成......

# ruby-on-rails - HTML tag with Heroku CDN?

> ID：15963094
> 
> 赞同：1
> 
> 时间：2013-04-12T04:31:35.190
> 
> 标签：ruby-on-rails, heroku, cdn, assets

I have a question about using asset_sync and a Heroku CDN. In [this article](https://devcenter.heroku.com/articles/cdn-asset-host-rails31), it says

> Make sure you’re using the Rails AssetTagHelper methods (like image_tag). This will ensure all of your assets will reference the new asset host.

Does that mean any plain html `<img>` tags or refs in my app won't work? Or maybe it's just to warn against tags with an absolute URL?

EDIT: I know I can and should use image_tag and image_path in views or css. What I'm asking is, do I HAVE to?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T05:35:40.683

They will work but you will need to point it manually to where you are syncing your assets to, some bucket on Amazon S3\. Not really recommended unless your assets will hardly ever change.

You configure your asset path in your production.rb config like so:

```
config.action_controller.asset_host = "http://assets.domain.com" 
```

Then whenever you reference asset_path it will point to the asset on the host defined in your environment config.

Perhaps a solution (without understanding your exact problem) would be to do something like this:

```
<img src="<%= asset_path("image.png") %>" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T07:00:22.037

You should to use

```
 <%= image_path("logo.png") %> 
```

instead of

```
<img src="<%= asset_path("image.png") %>" /> 
```

You can more details about this helper method [here](http://api.rubyonrails.org/classes/ActionView/Helpers/AssetTagHelper.html#method-i-image_path). Also As specified by andrew you need to specify asset_host in you config file. Here is a small [blogpost](http://www.codebeerstartups.com/2012/10/how-to-deploy-assets-on-amazon-s3-and-why-deploying-assets-to-amazon-s3-is-important/) for the same

Also:

If you want to pull css background icons/images from amazon s3 then use:

```
 background-image: image_url("icon.png"); // it requires scss extension ie saas and also you must has saas rails gem included. 
```

# javascript - 鼠标放在菜单栏上时如何启用菜单栏

> ID：15963108
> 
> 赞同：-1
> 
> 时间：2013-04-12T04:32:57.820
> 
> 标签：javascript, jquery, html, css

我有一个包含主页、患者、报告等的菜单。这个菜单应该出现在每一页中，并且应该出现在每一页的右上角。我知道如何设计这个。现在我想把它隐藏起来，它应该只在鼠标放在页面右上角时才显示。请大家告诉我怎么做。如果你想要菜单栏的代码，那么这是这个

```
<html class="no-js" lang="en-US">
    <head>
<style type="css/text">
body{
overflow:hidden;
}
</style>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title> Home</title>
        <meta name="author" content="jQuery Foundation - jquery.org">
        <meta name="description" content="jQuery: The Write Less, Do More, JavaScript Library">
        <meta name="viewport" content="width=device-width">
        <link rel="stylesheet" href="base.css">
        <script src="jquery.min.js"></script>
        <script>try{Typekit.load();}catch(e){}</script>
        <meta name="generator" content="WordPress 3.5.1" />
    </head>
    <body >
        <header>
            <section id="global-nav">
                <nav>
                    <div class="constrain">
                        <ul class="links">
                            <li><a href="template.html" target="content">Home</a></li>
                            <li><a href="createpatient.html" target="content">Patient</a></li>
                            <li><a href="template.html" target="content">Appointments</a></li>
                            <li><a href="template1.html" target="content">Reports</a></li>
                            <li><a href="login.html" target="content">logout</a></li>
                        </ul>
                    </div>
                </nav>
            </section>
        </header>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T04:36:25.097

假设`global-nav`在右上角

JS：

```
$("#global-nav").mouseenter(function(){

   $(".links", this).show();
}).mouseleave(function(){

   $(".links", this).hide();
}); 
```

CSS：

```
#global-nav .links {
  display:none;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T04:37:24.223

如果它是隐藏的，并且您想让它在鼠标位于右上角时显示，那么您可能必须使用 JavaScript 和[mousemove](https://developer.mozilla.org/en-US/docs/DOM/Mozilla_event_reference/mousemove)事件`body`等。然后检查鼠标坐标，如果它在您的预定义范围内（右上角），然后显示菜单。如您所见`e.screenX`，`e.screenY`它将为您提供相对于屏幕的鼠标坐标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T05:42:06.093

嗨，我为 ui 制作了一个示例，希望这有助于第一个示例显示，当您将鼠标悬停在菜单显示上时，但是当您停止将鼠标悬停在框上时，菜单将消失

[http://jsfiddle.net/nFwWG/](http://jsfiddle.net/nFwWG/)

```
 $("#righttopbox").on('mouseenter',function(){
  $("#global-nav").show();
});
$("#righttopbox").on('mouseleave',function(){
  $("#global-nav").hide();
}); 
```

当您将鼠标悬停在菜单将保留时，第二个显示

[http://jsfiddle.net/nFwWG/1/](http://jsfiddle.net/nFwWG/1/)

```
 $("#righttopbox").on('mouseenter',function(){
  $("#global-nav").show();
}); 
```

也不要忘记将 jquery 脚本放在标题上，您可以通过输入 google jquery google 来使用这个由 google 托管的脚本。

或者你可以在

www.jquery.com

希望这可以帮助

# c - 在另一个结构中初始化并获取结构变量？

> ID：15963109
> 
> 赞同：0
> 
> 时间：2013-04-12T04:33:02.187
> 
> 标签：c, linux, struct, tree, binary-search-tree

大家好，我有两个结构：一个是密钥对，另一个是节点。

```
typedef struct {
    char *key;
    void *value;
} VL;

typedef struct node{
    struct node *left;
    struct node *right;
    VL data;
} BST; 
```

我将如何初始化节点结构并在其中添加 VL 结构？这是我到目前为止所拥有的：

```
 // Create new node
    struct node *temp = malloc(sizeof(node));
    temp->left = NULL;
    temp->right = NULL;

    struct VL *vl = malloc(sizeof(VL));
    vl->key = key;
    vl->value = &value;

    temp->data= *vl; 
```

而且我还尝试了许多其他方法，例如将 temp->data.key 设置为 key 等，所有这些都返回错误。所以我来这里寻求帮助:)。

另外我将如何从节点获取数据？

```
char *key = (char *)5;
void *val = "hello";
// create node with this key/val pair and insert into the tree, then print
printf("key = %d; value = %s\n", (int)head->data.key, (char*)head->data.value); 
```

这样就够了吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T04:43:43.023

的内存`VL data`是作为`node`结构的一部分分配的，不需要重新分配。

尝试：

```
struct node *temp = malloc(sizeof(node));
temp->left = NULL;
temp->right = NULL;
(temp->data).key = key;
(temp->data).value = &value; 
```

# ios - ios - 如何从操作按钮调用 ShareKit 共享

> ID：15963110
> 
> 赞同：1
> 
> 时间：2013-04-12T04:33:06.860
> 
> 标签：ios, objective-c, ios5, ios6, sharekit

我正在使用这个设置 ShareKit 的示例：http: [//getsharekit.com/install/](http://getsharekit.com/install/)

他们的例子是这样的：

```
- (void)myButtonHandlerAction
{
    // Create the item to share (in this example, a url)
    NSURL *url = [NSURL URLWithString:@"http://getsharekit.com"];
    SHKItem *item = [SHKItem URL:url title:@"ShareKit is Awesome!"];

    // Get the ShareKit action sheet
    SHKActionSheet *actionSheet = [SHKActionSheet actionSheetForItem:item];

    // Display the action sheet
    [actionSheet showFromToolbar:navigationController.toolbar];
} 
```

但是那里的最后一行给了我一个语法错误：

```
Use of undeclared identifier 'navigationController' 
```

另外，我的函数是这样定义的，因为我希望在用户按下共享按钮后调用共享库：

```
- (IBAction)share:(id)sender 
```

有谁知道我为什么会收到此错误以及在我的情况下调用共享功能的正确方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T07:48:41.670

没有看到你的整个代码，听起来你没有 UINavigationController，只有一个 UIViewController。如果是这种情况，这应该可以解决问题。

在你的 .h 文件中

```
@property (nonatomic, strong) IBOutlet UIWindow *window;
@property (nonatomic, strong) UINavigationController *NVC; 
```

在您的 .m 文件中

```
UIViewController *theViewController = [[TheViewController alloc]initWithNibName:@"TheViewController" bundle:nil];

self.NVC = [[UINavigationController alloc] initWithRootViewController:theViewController];

[[self window] setRootViewController:NVC];

[self.window makeKeyAndVisible]; 
```

# floating-point - VHDL：关于转换数字？实到 std_logic_vector

> ID：15963112
> 
> 赞同：1
> 
> 时间：2013-04-12T04:33:08.410
> 
> 标签：floating-point, vhdl, stdvector

我当前的项目涉及一个地址计数器实体，它输出一个 7 位向量，并且输出 (m) 进入一个正弦查找表实体。所以基本上，我希望 m 是 x，正弦实体的输出是 y。但我的问题在于查找表的条目。如何将实际的实际值转换为 std_logic_vectors？

例如，一个条目的正弦值为 34.1326。它是如何变成向量的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T08:43:22.710

尽管 baldyHDL 的答案可行，但您现在可以使用（现在标准且可综合的）定点类型来节省大量手动工作。

您可以选择二进制点左侧和右侧的位数。有一些函数可以直接将实数转换为定点。

[您可以在http://www.vhdl.org/fphdl/](http://www.vhdl.org/fphdl/)找到该库

例如：

```
signal a : sfixed (7 downto -6); 
```

这在点的左边有 7 位（范围为 -64 到 +63），在点的右边有 6 位，每个值 2^-6 = 0.015625。

然后你可以这样做：

```
s <= to_sfixed(34.1326); 
```

您将获得您所要求的表格中可表示的最接近的数字。鉴于您输入的分辨率，这可能不够接近，因此将 -6 更改为更负的值以获得更高的分辨率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T06:26:00.997

将您的条目乘以值 2^n 并对结果进行四舍五入。结果可以表示为 std_logic_vector，记住它有“n”个逗号后位。在某种程度上选择“n”，四舍五入后的量化就足够了！

例子：

1.  你的价值：34.1326
2.  目标后逗号：8 位
3.  新值：34.1326 * 256 = 8737.946
4.  四舍五入到 8737
5.  作为 14 位的 std_logic_vector，这是“10001000100010”
6.  请记住，这基本上是“100010”。“00100010”= 34.132813

注意：仔细选择您的矢量大小并注意标志

# linux - 内核中同名的函数

> ID：15963114
> 
> 赞同：0
> 
> 时间：2013-04-12T04:33:17.550
> 
> 标签：linux, linux-kernel

会调用哪个函数？</p>

cscope：</p>

```
[1] include/linux/sched.h 
Cscope tag: show_regs

1    108  /data/linux-3.4.7/arch/x86/kernel/process.c <<show_regs>>
         void show_regs(struct pt_regs *regs)
2     14  /data/linux-3.4.7/arch/x86/um/sysrq_32.c <<show_regs>>
         void show_regs(struct pt_regs *regs)
3     37  /data/linux-3.4.7/arch/x86/um/sysrq_64.c <<show_regs>>
         void show_regs(struct pt_regs *regs) 
```

以及 gcc 是如何知道要链接哪个函数的？</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T04:44:24.327

在共享库中，对作为全局符号的函数的调用会花费一条“调用”指令到所谓的 PLT（过程链接表）中的代码位置，其中包含指向实际函数代码的“跳转”指令。

当语言允许不同的实体使用相同的标识符命名时，只要它们占用不同的命名空间（其中命名空间通常由模块、类或显式命名空间指令定义），冲突通过名称修饰的概念解决。

名称修饰提供了一种在函数、结构、类或其他数据类型的名称中编码附加信息的方法，以便将更多语义信息从编译器传递给链接器。

SRC：维基，gnu.org

# sql - 在表格中插入一个时间段内的所有日期

> ID：15963118
> 
> 赞同：7
> 
> 时间：2013-04-12T04:33:38.957
> 
> 标签：sql, sql-server

我有一个有两列（`date_ID`，`entry_Date`）的表。我想将特定时间段内的所有日期插入表中（比如日期为 2002-2030 之间的所有日期）。有没有办法在 SQL-Server 中使用循环来做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T04:46:30.913

尝试这个

```
DECLARE @d date='20020101' 
WHILE @d<'20300101'
    BEGIN
        INSERT INTO dbo.Dates (entry_Date)
        VALUES (@d)
        SET @d=DATEADD(DAY,1,@d)
    END
GO 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-12T04:49:55.243

这应该这样做：

```
WITH TestItOut AS
(
    SELECT CAST('2002-01-01' as datetime) DateColumn
    UNION ALL
    SELECT DateColumn + 1
    FROM TestItOut
    WHERE DateColumn + 1 <= '2030-12-31'
)

INSERT INTO YourTable (ColumnName)
SELECT DateColumn
FROM TestItOut
OPTION (MAXRECURSION 0) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T06:18:30.650

在甲骨文我会做

```
insert into sometable 
select to_date('01/01/2013','dd/mm/yyyy') + level 
from dual 
connect by level < 10001 
```

这将从 2013 年 1 月 1 日开始每天生成 10000 个日期。例如，如果您想要每小时间隔，您可以更改`+ level`为`+ level/24`.

这是基本的 ANSI sql 分层查询 - 它也应该在 SQL 服务器中工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T04:41:07.563

```
insert into table values(date_ID,(select entry_Date from table where entry_Date between 01/01/2002 and 01/01/2030)) 
```

试试这种查询。

代替 date_ID 放置您的适当值。

# c# - 使用 if 语句执行 while 循环以打印奇数

> ID：15963121
> 
> 赞同：0
> 
> 时间：2013-04-12T04:34:01.987
> 
> 标签：c#, loops, if-statement, while-loop, do-while

目前我正在学习循环。我正在尝试创建一个控制台应用程序，它使用 do while 循环来打印 20 到 0 之间的所有奇数。

为什么当我`if`在我的代码下方取消注释语句时不会打印任何内容并且永远不会完成？

```
using System;

class Program
{
  static void Main(string[] args)
  {
     int i = 20;
     do 
     {
        // if (i%2 !=0)
        {
           Console.WriteLine(
              "When counting down from 20 the odd values are: {0}", i--);
        }
      } while (i >=0);
   }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T04:37:30.437

我认为您遇到的主要问题是递减（`i--` ) 仅发生在 if 块内。这意味着当条件失败时，您将进入无限循环。您可以将减量移到 if 块之外来解决这个问题。尝试这个：

```
Console.Write("When counting down from 20 the odd values are: ");
do 
{
    if (i % 2 != 0)
    {
        Console.Write(" {0}", i);
    }

    i--;
} while (i >= 0); 
```

我也搬了第一个`Console.Write`循环以减少输出中的冗余。这将产生：

> 当从 20 倒数时，奇数值为： 19 17 15 13 11 9 7 5 3 1

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T04:39:28.313

for 循环可能更容易理解：

```
Console.WriteLine("When counting down from 20 the odd values are: ");
for( int i = 20; i >= 0; i--)
{
    if (i%2 !=0)
    {
       Console.Write(" " + i);
    } 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-23T15:08:52.340

抱歉，我知道这真的很老了，最初的问题是 DO 而不是 FOR，但我想补充一下我为实现这一结果所做的事情。当我最初用谷歌搜索这个问题时，尽管我的查询是 FOR 循环，但这是首先返回的内容。希望有人在路上会发现这很有帮助。

下面将打印数组的奇数索引 - 在本例中为 Console App args。

```
using System;
namespace OddCounterTest
{
    class Program
    {
        static void Main(string[] args)
        {
            for (int i = 0; i < args.Length; i++)
            {
                Console.WriteLine(i);
                i++;
            }
        }
    }
} 
```

带有 6 个参数的输出将是：1 3 5

将 i++ 移至 for 循环的第一步将为您提供偶数。

```
using System;
namespace EvenCounterTest
{
    class Program
    {
        static void Main(string[] args)
        {
            for (int i = 0; i < args.Length; i++)
            {
                i++;
                Console.WriteLine(i);
            }
        }
    }
} 
```

输出将是：2 3 4

这是设置，因此您也可以获得 args 的实际值，而不仅仅是 args 索引的计数和打印。只需创建一个字符串并将字符串设置为 args[i]：

```
string s = args[i];
Console.WriteLine(s); 
```

如果您在打印数字时需要计算并排除“0”，就像问题最初询问的那样，那么设置您的 for 循环，如下所示：

```
for (int i = 1; i <= args.Length; i++); 
```

请注意，在此示例中，“i”最初是如何设置为 1 的，并且 i 小于或等于数组长度，而不是简单地小于。注意你的小于和小于/等于，否则你会得到 OutOfRangeExceptions。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-12T04:37:33.617

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Do_while_Test
{
    class Program
    {
        static void Main(string[] args)
        {
            int i = 20;
            Console.WriteLine();
            Console.WriteLine("A do while loop printing odd values from 20 - 0 ");
         do 
         {
            if (i-- %2 !=0)
            {
             Console.WriteLine("When counting down from 20 the odd values are: {0}", i--);
            }

         } while (i >=0);
         Console.ReadLine();  
        }

    }
} 
```

# c++ - vc6 到 vs2010 移植错误

> ID：15963126
> 
> 赞同：0
> 
> 时间：2013-04-12T04:34:28.427
> 
> 标签：c++, visual-studio-2010, visual-c++-6

我被困在我的项目从 VC6 到 VS2010 的移植中。请任何人都可以帮助我。

```
void CEdchLoop::ReceiveSdu(UINT8* Sdu, UINT32 BitLength, int Fn)
{
UINT8* pPdu   = Sdu;
    int Bit       = 8;

    UINT32 SourceId    = GetBitsL(pPdu, BitLength, Bit, 32);
    UINT32 PduUniqueId = GetBitsL(pPdu, BitLength, Bit, 32);       
} 
```

在上面的代码中，我收到错误 C2664: 'GetBitsL' : cannot convert parameter 1 from 'UINT8 *' to 'const UINT8 *&'

和 GetBitsL 被定义为`UINT32 GetBitsL(const UINT8*& Bin, UINT32& BitLength, int& Bit, int Count)`

请任何人都可以帮我解决这个问题。如果这不是一个绝妙的问题，我很抱歉。但是傻五分钟总比永远傻好。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T04:48:44.003

`GetBitsL`需要引用指向 const-UINT8 的指针。您正在给它一个指向 volatile-UINT8 的指针的引用，并且没有直接的按引用转换。通过以下方式更改`pPdu`为：

```
// UINT8* pPdu   = Sdu;
const UINT8* pPdu(Sdu); 
```

它仍然初始化为指向与 相同的点`UINT8`，`Sdu`但现在作为函数期望的指向 const-UINT8 的指针。该函数仍然可以修改*指针*，但不能修改它*指向的*内容。（这应该暗示您可能没有按照设计意图使用该功能，因此请考虑一下）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T04:53:56.227

这个问题最好用一个演示来解释：

```
int * ip;
const int *& cipr = ip; 
```

好的，至此，`cipr`是对`ip`. 这是不合法的，您将在以下部分中看到原因。

```
const int * cip = some_const_data;
cipr = cip; 
```

该赋值是合法的，因为作为指向 const 数据的指针（引用），`cipr`允许将其分配为指向 const 数据。但正因为如此，since`cipr`是对`ip`, 现在`ip`指向 const 数据的引用。这是一个问题：

```
*ip = 7; 
```

这是合法的，因为 of 的类型`ip`是指向非常量 int 的指针。但是，通过上面的一些技巧，我们使它指向 const 数据。这是不允许的，因此我们必须`cipr`引用的初始声明`ip`必须是非法的。这与您通过传递`pPdu`到`GetBitsL`.

# sql - 如何使用行号

> ID：15963129
> 
> 赞同：0
> 
> 时间：2013-04-12T04:34:53.553
> 
> 标签：sql, oracle, rownum

我在 oracle 中有一张员工表，上面有姓名、薪水和其他详细信息。

我想拿到第二高的薪水，但拿不到。

这个工作正常

```
with e_salary as (select distinct salary from employee)
select salary from e_salary
order by salary desc 
```

**并给出输出：**

```
450000

61000

60000

50000

40000

30000

20000

6000 
```

但是当我使用相同的查询来获取第二高的行时没有得到任何输出

```
select salary
  from ( with e_salary as (select distinct salary from employee)
         select salary from e_salary order by salary desc)
 where rownum = 2 
```

但是当我用它替换`rownum=2`它时，`rownum<2`它会给出前两条记录的输出。请有人解释为什么`rownum=2`不起作用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T05:11:46.753

这将起作用：

> 从中选择薪水（选择薪水，rownum作为rn从（从e_salary按薪水顺序选择薪水））其中rn = 2；

为什么它不起作用：

**将ROWNUM赋值给一行时，Oracle从1开始，只有在选中一行时才增加值；也就是说，当 WHERE 子句中的所有条件都满足时。由于我们的条件要求 ROWNUM 大于 2，因此不会选择任何行，并且 ROWNUM 的增量永远不会超过 1。**

希望你现在很清楚。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T04:48:30.657

```
select ename  ,sal  ,rank() over (order by sal desc) ranking from emp; 
```

试试这个。

按照这个链接，关于第 n 行的所有内容都在 oracle 中给出：

[http://www.oratable.com/nth-highest-salary-in-oracle/](http://www.oratable.com/nth-highest-salary-in-oracle/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T05:29:07.983

使用rownum 是一件棘手的事情。最安全的选择是仅在您想限制要显示的结果数量时使用它。例如 rownum<2 或 rownum<=5。

为什么 rownum=2 不起作用？

在这里阅读 - [http://www.oracle.com/technetwork/issue-archive/2006/06-sep/o56asktom-086197.html](http://www.oracle.com/technetwork/issue-archive/2006/06-sep/o56asktom-086197.html)

总之，这就是 oracle 执行查询的方式

> 1.  FROM/WHERE 子句首先出现。
> 2.  从 FROM/WHERE 子句为每个输出行分配并递增 ROWNUM。
> 3.  SELECT 被应用。
> 4.  应用 GROUP BY。
> 5.  应用了 HAVING。
> 6.  应用 ORDER BY。

rownum<=2 子句将转换为

```
ROWNUM = 1
for x in 
( select * from emp )
loop
    exit when NOT(ROWNUM <= 2)
    OUTPUT record to temp
    ROWNUM = ROWNUM+1
end loop
SORT TEMP 
```

如果您在 NOT(ROWNUM <= 2) 且 rownnum=2 时更改退出，您可以看到它在第一次运行时会失败

所以如果我不能使用rownum，我能用什么。尝试使用 row_number() [http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions137.htm](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions137.htm)

它的工作原理类似于

```
SELECT last_name FROM 
   (SELECT last_name, ROW_NUMBER() OVER (ORDER BY last_name) R FROM employees)
   WHERE R BETWEEN 51 and 100; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T04:49:51.930

`rownum`在第一次失败时停止评估。返回的第一行`rownum`是 1，因此它没有通过`rownum = 2`测试并停止尝试。[这里](http://www.oracle.com/technetwork/issue-archive/2006/06-sep/o56asktom-086197.html)有一篇很棒的文章。

要获得第二高的薪水，请使用 Oracle 分析`DENSE_RANK`函数：

```
SELECT DISTINCT Salary FROM (
  SELECT Salary, DENSE_RANK() OVER (ORDER BY Salary DESC) AS SalaryRank
  FROM e_salary)
WHERE SalaryRank = 2 
```

请注意，如果第二次出现平局，则查询可能会返回多个值。这就是为什么外部`SELECT`是一个`SELECT DISTINCT`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T05:42:04.297

据我了解，rownum 对结果集中的行进行编号。

因此，在您的示例中：

select * from table1 where rownum=2

结果集中会有多少行？因此，应该为这样的行分配什么 rownum？你现在能明白为什么实际上没有返回结果吗？

通常，您应该避免依赖 rownum 或任何暗示结果顺序的功能。尝试考虑使用整个结果集。

话虽如此，我相信以下方法会起作用：

select * from (select rownum as rn,table1.* from table1) as t where t.rn = 2

因为在这种情况下，您正在为子查询中的行编号。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-12T05:37:52.573

在不使用**rownum**命令的情况下，您可以使用以下查询获得第二高的薪水：

```
select MAX(Salary) from Employee 
WHERE Salary NOT IN 
(select MAX(Salary) from Employee ) 
```

或者，

```
select MAX(Salary) from Employee 
WHERE Salary <> 
(select MAX(Salary) from Employee ) 
```

查询第 n 高：

```
SELECT * FROM Employee Emp1 
WHERE (N-1) = 
(SELECT COUNT(DISTINCT(Emp2.Salary))FROM Employee Emp2 
WHERE Emp2.Salary > Emp1.Salary) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-12T04:49:50.847

首先你应该明白它`rownum`是什么。让我给你举个例子，

```
 you want to get data with a filter and rownum=2, 
 first Oracle executes the sql with filter and get the first record, 
 give it the rownum 1, 
 and then compare it the rownum filter rownum=2, which doesn't match, so discard record, 
 then get second record, give it rownum=1(if the first record is matched then the rownum will  be 2)  too, then do the compare............ 
```

所以你可以找到原因。

# php - 从分配给变量 PHP 的下拉列表中获取选择

> ID：15963133
> 
> 赞同：0
> 
> 时间：2013-04-12T04:35:34.650
> 
> 标签：php, variables, drop-down-menu

我知道这很简单，但我就是找不到告诉我如何做的资源。

所以我的代码如下：

```
session_start();
$wquery=
"select week_num,week_name
from stats_week
where season=$this_season
order by week_num";
    $wresult=mysql_query($wquery);

print'<form action="changeplayer_2.php" method="post">';

        print"<select name='Week_select'> <br>";
        while ($wrow=mysql_fetch_array($wresult))
    { 
    print '<option value="'.$wrow['week_num'].'">'.'week '.$wrow['week_num'].'     '.$wrow['week_name'].'</option><br>\n';  
    }

print "</select><br><br>";#

    print'<button type="submit" >Next</button>';

    print"</form>"; 
```

所以我正在做一个选择：我希望这个选择最终出现在：$_SESSION['week']

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T04:38:18.490

```
$_SESSION['week']=$_POST['Week_select']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T04:43:48.717

您可以在提交时通过表单发送数据，或者如果您想在不刷新页面的情况下执行此操作，您可以通过 ajax 执行此操作

而不是这样设置

```
$_SESSION['week']=isset($_POST['Week_select'])?$_POST['Week_select']:someDefau‌​lt; 
```

并通过ajax[检查这个答案](https://stackoverflow.com/a/14217926/1723893)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T04:44:23.417

在文件“changeplayer_2.php”中，您需要将 POSTed 值加载到会话中：

```
session_start();
$_SESSION['week'] = $_POST['Week_select']; 
```

每当您想在关键“周”获得会话的价值时，只需执行以下操作：

`$weekValue = isset($_SESSION['week']) ? $_SESSION['week'] : false;`

但是，如果您确实在任何脚本上使用了 session 变量，请确保您使用`session_start()`.

要销毁会话变量，您可以执行以下操作：

```
session_start();
unset($_SESSION['week']); 
```

# wpf - WPF：如何解决此代码中的内存泄漏？

> ID：15963134
> 
> 赞同：0
> 
> 时间：2013-04-12T04:35:36.197
> 
> 标签：wpf, memory-leaks, timer, textblock

如果有任何消息（代码如下），我有一个窗口会提醒用户。
每次`timer1.Elapsed`，应用程序的内存都会增加超过 1 MB。在 10 次警报时间后，它需要超过 15 MB。然后如果有任何警报，使用的内存几乎不会上升。

我认为一个简单窗口的 15 MB 内存相当大，也许我的应用程序存在内存泄漏。但我是新手，不知道如何解决。你能帮我看看我的代码有什么问题导致内存泄漏吗？非常感谢！

**XAML：**

```
<TextBlock TextWrapping="Wrap"
           FontSize="11"
           Padding="5,3,3,3">
        <Run x:Name="a_time"
             Foreground="Blue" />
        <Run x:Name="a_now"
             FontStyle="Italic" />
        <Run x:Name="a_id" />
        <LineBreak />        
        <Run x:Name="a_name"
             Foreground="Blue" />
        <Run x:Name="a_title"
             Foreground="Red"
             Tag=""
             MouseUp="a_MouseUp"
             Cursor="Hand" />
        <LineBreak />        
        <Run x:Name="a_content"
             Foreground="Gray" />
</TextBlock> 
```

**代码：**

```
 List<Alert> alert_list = new List<Alert>();

    void timer1_Elapsed(object sender, System.Timers.ElapsedEventArgs e)
    {
        if (alert_list.Count == 0) return;
        this.Dispatcher.Invoke(DispatcherPriority.Normal, new Action(() =>
        {
            this.Background = (this.Background == Brushes.Yellow) ? Brushes.LemonChiffon : Brushes.Yellow;
            Point m = Mouse.GetPosition(this);
            if ((m.X > 0 & m.X < Width & m.Y > 0 & m.Y < Height) | Keyboard.IsKeyDown(Key.LeftCtrl) | Keyboard.IsKeyDown(Key.RightCtrl)) { showemail_tick = 1; return; }

            Alert al = alert_list[alert_list.Count - 1];
            a_title.Tag = al.e_link;
            a_time.Text = al.e_time + "    ";
            a_now.Text = DateTime.Now.ToString("dd/MM/yy HH:mm");
            a_id.Text = al.e_id;
            a_name.Text = al.e_name + "  ";
            a_title.Text = al.e_title;
            a_content.Text = al.e_content;

            alert_list.RemoveAt(alert_list.Count - 1);
        }));
    }

public class Alert
{
    public string e_time = "";
    public string e_id = "";
    public string e_link = "";
    public string e_name = "";
    public string e_title = "";
    public string e_content = "";
    public bool e_bip = true;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T05:06:00.537

您没有内存泄漏，因为所有内存分配和释放都由 .NET 垃圾收集器管理。

您在此处看到的正是 .NET 垃圾收集器对内存“做任何事情”这一事实。也就是说，当它不再需要它时，它完全可以自由地保留它以供以后使用。

所以你不必担心这种内存消耗，这并不意味着你的程序使用了那么多内存：它只是意味着 .NET 内存管理器决定为自己保留它。

这对程序员来说要容易得多：你可以依靠这个管理器来为你处理所有的脏活。不用担心：如果在某些时候你的内存不足，管理器会释放它不需要的任何东西。但是，如果您的系统很好并且可以忍受仍然分配给您的进程的内存，那么为什么要花时间释放它呢？这就是经理所做的，当然，当谈到合理的内存量时。

**编辑：**

这是您负责记忆的类 C 世界与依赖某个实体为您处理记忆的垃圾收集世界之间的巨大飞跃。它具有优点（您无需关心任何事情）和缺点（正如您所提到的，您无法准确判断何时释放内存，因此不确定您的瞬时内存消耗）。

**编辑2：**

评论里有提到，不知道。您可以调用`System.GC.Collect()`强制垃圾收集器实际释放它不需要的所有内容：此处的[文档，此处](http://msdn.microsoft.com/en-us/library/system.gc.collect%28v=vs.110%29.aspx)的[示例](http://msdn.microsoft.com/en-us/library/xe0c2357.aspx)。

虽然在你的情况下，你应该让 GC 做任何它想做的事情，因为它是这样优化的，它不会影响你的执行。

# xslt - 如何编写合并组件的 WiX XSLT

> ID：15963144
> 
> 赞同：1
> 
> 时间：2013-04-12T04:36:41.217
> 
> 标签：xslt, wix

我有一个 .wxs 文件，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
    <Fragment>
        <Directory>
            <Directory Id="d1">
                <Component Id="c1" ...>
                    <File Id="f1" KeyPath="yes" ... />
                </Component>
                <Component Id="c2" ...>
                    <File Id="f2" KeyPath="yes" ... />
                </Component>
                <Component Id="c3" ...>
                    <File Id="f3" KeyPath="yes" ... />
                </Component>
            </Directory>
            <Directory>
                <Component>
                ...
            </Directory>
            ...
        </Directory>
    </Fragment>
    <Fragment>
        <ComponentGroup Id="cg1">
            <ComponentRef Id="c1" />
            <ComponentRef Id="c2" />
            <ComponentRef Id="c3" />
            ...
        </ComponentGroup>
    </Fragment>
</Wix> 
```

我想“合并”上面的组件，即，我想将文件 f2、f3 移动到组件 c1 中，并想删除组件 c2、c3 以及 c2、c3 的组件引用。在我的实际源代码中，有更多目录，包括组件。我的目的是减少组件的数量，即对于任何模式，例如

```
<Directory>
    <Component>
        <File KeyPath="yes" />
    </Component>
    <Component>
        <File KeyPath="yes" />
    </Component>
    ...
    <Component>
        <File KeyPath="yes" />
    </Component>
</Directory> 
```

我想将它们简化为一个组件（可能是第一个组件），包括许多文件，例如：

```
<Directory>
    <Component>
        <File KeyPath="yes" />
        <File />
        ...
        <File />
    </Component>
</Directory> 
```

我知道不建议在一个组件中包含许多文件，但我想这样做以减少卸载时间。现在，我的安装程序需要很长时间才能卸载，我认为这是因为它的组件太多（大约 20,000 个）。

任何帮助，将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T05:59:21.363

我认为实现这一目标的最简单方法是使用`following-sibling`轴：

### 样式表

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:wi="http://schemas.microsoft.com/wix/2006/wi">
  <xsl:output method="xml" version="1.0" encoding="utf-8" indent="yes"/>
  <xsl:strip-space elements="*"/>

  <!-- Identity transform -->
  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="wi:Directory">
    <xsl:copy>
      <!-- Only apply the first <Component> element -->
      <xsl:apply-templates select="wi:Component[1]"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="wi:Component[1]">
    <xsl:copy>
      <!-- Apply attributes -->
      <xsl:apply-templates select="@*"/>
      <!-- Apply the <File> element in this <Component> element -->
      <xsl:apply-templates select="wi:File"/>
      <!-- Apply the <File> elements in all following <Component> siblings -->
      <xsl:apply-templates select="following-sibling::wi:Component/wi:File"/>
    </xsl:copy>
  </xsl:template>
</xsl:stylesheet> 
```

### 输入

```
<?xml version="1.0" encoding="utf-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
  <Fragment>
    <Directory Id="d1">
      <Component Id="c1">
        <File Id="f1" KeyPath="yes"/>
      </Component>
      <Component Id="c2">
        <File Id="f2" KeyPath="yes"/>
      </Component>
      <Component Id="c3">
        <File Id="f3" KeyPath="yes"/>
      </Component>
    </Directory>
  </Fragment>
  <Fragment>
    <ComponentGroup Id="cg1">
      <ComponentRef Id="c1"/>
      <ComponentRef Id="c2"/>
      <ComponentRef Id="c3"/>
    </ComponentGroup>
  </Fragment>
</Wix> 
```

### 输出

```
<?xml version="1.0" encoding="utf-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
  <Fragment>
    <Directory>
      <Component Id="c1">
        <File Id="f1" KeyPath="yes"/>
        <File Id="f2" KeyPath="yes"/>
        <File Id="f3" KeyPath="yes"/>
      </Component>
    </Directory>
  </Fragment>
  <Fragment>
    <ComponentGroup Id="cg1">
      <ComponentRef Id="c1"/>
      <ComponentRef Id="c2"/>
      <ComponentRef Id="c3"/>
    </ComponentGroup>
  </Fragment>
</Wix> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T08:35:14.433

这是我的回答。谢谢埃罗·赫勒纽斯。

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="2.0" 
            xmlns="http://schemas.microsoft.com/wix/2006/wi"
            xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
            xmlns:wix="http://schemas.microsoft.com/wix/2006/wi"
            exclude-result-prefixes="wix">
    <xsl:output method="xml" version="1.0" encoding="utf-8" indent="yes"/>

    <xsl:strip-space elements="*" />

    <xsl:key name="kRemoveComps" 
             match="wix:Directory/wix:Component[position()&gt;1]" use="@Id" />

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="wix:Directory">
        <xsl:copy>
            <xsl:apply-templates select="@*" />
            <xsl:apply-templates select="wix:Directory" />
            <xsl:apply-templates select="wix:Component[1]" />
        </xsl:copy>
    </xsl:template>

    <xsl:template match="wix:Component[1]">
        <xsl:copy>
            <!-- Attr. -->
            <xsl:apply-templates select="@*" />

            <!-- File in this Component -->
            <xsl:apply-templates select="wix:File" />

            <!-- Files in siblings -->
            <xsl:apply-templates select="../wix:Component[position()&gt;1]/wix:File" />
        </xsl:copy>
    </xsl:template>

    <xsl:template match="wix:Component[position()&gt;1]/wix:File">
        <xsl:copy>
            <!-- Removing KeyPath Attr. -->
            <xsl:apply-templates select="@*[not(name()='KeyPath')]|node()" />
        </xsl:copy>
    </xsl:template>

    <!-- Removing ComponentRef -->
    <xsl:template match="wix:ComponentRef[key('kRemoveComps', @Id)]" />
</xsl:stylesheet> 
```

# macos - 安装 mongoDB（子进程失败，错误号 100 退出）

> ID：15963147
> 
> 赞同：27
> 
> 时间：2013-04-12T04:36:53.153
> 
> 标签：macos, mongodb, installation

我试图在我的 macbook air 上安装 mongoDB。

我已经从官方网站下载了压缩文件并将该文件解压缩并移至根目录。之后，在该目录下，我创建了 /data/db 和 /log 文件夹。

这是我的`mongodb.config`，它描述了我的数据库的基本配置。

```
dbpath = /mongodb/data/db
logpath = /mongodb/log/mongo.log
logappend = true
#bind ip = 127.0.0.1
port = 27017

fork = true
rest = true
verbose = true
#auth = true
#noauth = true 
```

另外，我想知道`#`配置文件中的含义。

我把这个文件放到`/mongodb/bin`,`/mongodb`是我把文件解压到的目录。

我打开终端并进入`./mongod --config mongodb.config`，我得到了这个。

```
Juneyoung-ui-MacBook-Air:bin juneyoungoh$ ./mongod --config mongodb.config
about to fork child process, waiting until server is ready for connections.
forked process: 1775
all output going to: /mongodb/log/mongo.log
ERROR: child process failed, exited with error number 100 
```

我该如何处理这个错误，这意味着什么？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-04-12T05:14:16.703

您创建的数据文件夹很可能是使用创建的`sudo`，是吗？它们归您的普通用户所有，`root`不能由您的普通用户写入。如果您是您的 macbook 的唯一用户，则将目录的所有权更改为您：

```
sudo chown juneyoungoh /data
sudo chown juneyoungoh /data/db
sudo chown juneyoungoh /data/log 
```

如果您打算将其安装在公共机器或合法的地方，那么请在其他地方阅读有关 mongo 安全实践的更多信息。我会让你在你的macbook上运行。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-10-10T14:41:06.593

我有一个类似的问题，它与任何“sudo”问题无关。我试图从内核恐慌中恢复过来！

当我查看我的数据文件夹时，我发现那里有一个 mongod.lock 文件。就我而言，这个页面帮助很大：[http](http://docs.mongodb.org/manual/tutorial/recover-data-following-unexpected-shutdown/) ://docs.mongodb.org/manual/tutorial/recover-data-following-unexpected-shutdown/ 。正如他们解释的那样，

> 如果 mongod.lock 不是零字节文件，则 mongod 将拒绝启动。

我在我的环境中测试了这个解决方案，它运行良好：

1.  删除`mongod.lock`文件。
2.  修复数据库：`mongod --dbpath /your/db/path --repair`
3.  运行蒙戈：`mongod --dbpath /your/db/path`

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-07-29T08:52:26.617

我的机器上也有同样的问题。在日志文件中是：

> 7 月 29 日星期一 09:57:13.689 [initandlisten] 错误：日志文件的可用空间不足
> 7 月 29 日星期一 09:57:13.689 [initandlisten] 请在 /var/mongoexp/rs2/journal 中至少提供 3379MB 或使用 --smallfiles

它是通过使用解决的`mongod --smallfiles`。或者，如果您使用*--config*选项启动 mongod，而不是在配置文件中禁用预写日志`nojournal=true`（删除开头的 #）。更多的磁盘空间也可以解决上述问题。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-09-17T15:05:44.050

这是因为您可能没有正确关闭 mongodb，并且您没有以正确的方式启动 mongodb。根据你的`mongodb.config`，你有`dbpath = /mongodb/data/db`- 所以我假设你创建了存储库`/mongodb/data/db`？让我澄清所有步骤。

1.  启动 MongoDB

在您`mongodb.config`更改`dbpath = /mongodb/data/db`为`dbpath = /data/db`. 在您的终端上键入以下内容创建数据库存储库：`mkdir /data/db`。现在你有了一个存储库——你可以启动你的 mongo。

在后台启动 mongo 类型：`mongod --dbpath /data/db --fork --logpath /dev/null`.

*   `/data/db`是分贝的位置。
*   `--fork`意味着你想在后台启动 mongo - deamon。
*   `--logpath /dev/null`意味着您不想记录-您可以通过替换`/dev/null`为类似的路径来更改它`/var/log/mongo.log`

    2.  关闭 MongoDB

通过键入连接到您的 mongo：`mongo`然后`use admin`和`db.shutdownServer()`。就像在[mongoDB中解释](http://docs.mongodb.org/master/tutorial/manage-mongodb-processes/)

如果此技术由于某种原因不起作用，您可以随时终止该进程。

通过键入以下内容查找 mongodb 进程 PID：`lsof -i:27017`假设您的 mongodb 正在端口上运行`27017`

键入`kill <PID>`，替换`<PID>`为您在上一个命令中找到的值。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-07-09T08:43:36.607

具有相同错误的类似问题 - 我试图运行修复脚本 `sudo -u mongodb mongod -f /etc/mongodb.conf --repair`

检查`ps aux | grep mongo`并查看守护程序正在运行。停止它，然后修复脚本运行没有问题。

希望这对其他人有帮助。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-10-03T13:52:02.983

我在linux（Centos）上遇到了同样的错误，这对我有用

1.  从 dbpath 中删除 mongod.lock

    `$ rm /var/lib/mongo/mongod.lock`

2.  修复mongod进程

    `$ mongod --repair`

3.  运行 mongod 配置

    `$ mongod --config /etc/mongod.conf`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-10-21T14:45:38.997

我有同样的错误。我以交互方式运行它以查看日志。

```
2014-10-21T10:12:35.418-0400 [initandlisten] ERROR: listen(): bind() failed errno:48 Address already in use for socket: 0.0.0.0:27017 
```

然后我过去常常`lsof`找出哪个进程正在使用我的端口。

```
$ lsof -i:27017
COMMAND  PID     USER   FD   TYPE             DEVICE SIZE/OFF NODE NAME
mongod  2106 MYUSERID   10u  IPv4 0x635b71ec3b65b4a1      0t0  TCP *:27017 (LISTEN) 
```

这是`mongod`我之前分叉并忘记关闭的一个（因为我没有看到它在我的 bash 窗口中运行）。只需通过运行来杀死它`kill 2106`，就可以使我的进程运行而不会出现错误 100。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-04-30T12:35:30.250

在服务器的“/”路径中创建文件夹“data”和“db”。实际上，您应该创建或修改要存储数据的文件夹的权限！

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-08-14T07:02:41.240

通常，当 mongod.conf 文件无法找到数据库存储或日志存储的特定路径，或者可能是 processid 存储，或者它没有获得文件权限来访问已在 mongod 中声明的配置目录和文件时，就会出现此错误.conf

要解决此错误，我们需要观察 MongoDB 生成的日志，它将清楚地指示您 MongoDB 无法访问的文件或目录

上面的错误可能看起来像下面的截图 [![在此处输入图像描述](https://i.stack.imgur.com/LIXRI.png)](https://i.stack.imgur.com/LIXRI.png)

[![在此处输入图像描述](https://i.stack.imgur.com/pEWyp.png)](https://i.stack.imgur.com/pEWyp.png)

# python - 如何制作一个python加密程序？

> ID：15963156
> 
> 赞同：-4
> 
> 时间：2013-04-12T04:37:44.160
> 
> 标签：python, encryption

我需要在我的应用程序中以加密的形式存储服务器的密码，我需要以文本形式供以后使用。是否可以在 python 中做到这一点以及如何做到这一点？请解释。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T04:41:34.320

除非出于个人好奇心，否则不要编写自己的加密/解密算法。密码学有很多非常困难的方面，即使一个错误也意味着你的安全性为 0。

此外，在使用加密功能之前，请先研究一下以确保您正确使用它。例如，不要将密码存储在可逆的加密中 - 您不需要密码的纯文本。您想对其使用单向加密（称为加密散列），并将其与用户输入的加密散列进行比较。如果它们匹配，则让它们进入。现在数据库没有原始密码的痕迹，因为散列无法反转*。

（但它并不止于此 - 您还希望散列算法“慢”，以便破解者必须非常缓慢地尝试数千种不同的尝试，但合法使用无论如何都会在几次尝试中得到它。要进行散列“慢”你需要一个像 bcrypt 这样的算法，它有一个可调参数来决定它应该有多慢，所以它甚至是未来的证明。）

[http://docs.python.org/2/library/crypto.html](http://docs.python.org/2/library/crypto.html)

[https://pypi.python.org/pypi/pycrypto](https://pypi.python.org/pypi/pycrypto)

*彩虹表除外，这是一个潜在的破解者提前计算散列每个常见密码的结果的地方。为了防止这种情况，在散列之前将密码与盐结合起来，并将盐与用户一起存储。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T04:41:27.373

使用[PyCrypto](https://www.dlitz.net/software/pycrypto/)的 AES 实现。

# android - 未能收集偏好类别

> ID：15963157
> 
> 赞同：3
> 
> 时间：2013-04-12T04:37:44.147
> 
> 标签：android, eclipse, class, preference, collect

我是编写 Android 应用程序的新手，如此新，以至于我对 Eclipse 的了解如此基础，这很痛苦。我想知道为什么当我开始一个新的 Android 项目（仅使用默认设置）时，我会立即收到这些错误？

```
Error
Fri Apr 12 00:08:30 EDT 2013
Android Framework Parser: failed to collect preference classes

Error
Fri Apr 12 00:08:30 EDT 2013
Problem loading classes

Error
Fri Apr 12 00:08:29 EDT 2013
Problem preloading classes 
```

我正在使用从 Google 开发者网站下载的 ADT 包。SDK 和 Eclipse 是最新的。我现在已经卸载并重新安装了两次 ADT 捆绑包，但均未成功。为了安全起见，我自己安装了 Eclipse，并自己为 SDK 添加了 ADT 插件。即使在我开始一个新项目而不编写任何内容或创建任何新文件时进行了所有这些尝试，这些错误也会立即发生。

一段时间以来，我一直忽略这些错误，因为它们并没有妨碍我一直在做的任何事情。虽然上周我尝试制作新的偏好文件时遇到了砖墙。我已经查找这些错误一周了，但我还没有找到一个过时的回复，更不用说给我任何类型的见解了。我确实注意到，这个网站提供了我的每一次搜索，所以我决定把它贴在这里。

如果有人能对这个问题有所了解，将不胜感激。

# node.js - ExpressJs 中的 SSE

> ID：15963160
> 
> 赞同：0
> 
> 时间：2013-04-12T04:38:03.830
> 
> 标签：node.js, express, server-sent-events

我正在尝试在 Expressjs 项目中实现服务器发送的事件。现在，我使用 NodeJs 的 net api 创建了一个套接字连接。我在套接字中收到流式响应。我的疑问是当我尝试使用 res.send() 发送流响应时，它说

错误：发送后无法设置标头。

我的另一个疑问是，我在 new EventSource(??) 中指定什么才能成功连接到在 nodejs 中运行的那个套接字。现在我已经在控制器文件夹中编写了我的服务器代码！

任何澄清都会有很大帮助！

# ruby-on-rails-3 - 来自 aws s3 的不安全内容

> ID：15963161
> 
> 赞同：2
> 
> 时间：2013-04-12T04:38:06.263
> 
> 标签：ruby-on-rails-3, security, heroku, amazon-web-services, amazon-s3

我正在使用 aws s3 存储照片，我收到 chrome 警告，说网站上的某些内容不安全。在开发控制台中，我看到：

```
The page at https://domain.herokuapp.com/users/1/ displayed insecure content 
from http://s3.amazonaws.com/domain/photos/user_thumbnail/casing-earphones.jpg?1365720318. 
```

亚马逊链接不是 https 我该如何解决我的应用程序对整个存储桶的访问权限？

按照此处的设置说明：[https ://devcenter.heroku.com/articles/paperclip-s3](https://devcenter.heroku.com/articles/paperclip-s3)

我有以下代码，我想我需要在某处添加一个 URL 选项：（config/environment/production.rb）

```
config.paperclip_defaults = {
  :storage => :s3,
  :s3_credentials => {
      :bucket => ENV['AWS_BUCKET'],
      :access_key_id => ENV['AWS_ACCESS_KEY_ID'],
      :secret_access_key => ENV['AWS_SECRET_ACCESS_KEY']
  }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T04:58:00.720

我需要添加这一行：

```
:s3_protocol => 'https' 
```

设置说明中未提及，但可以在此处找到回形针 s3 配置选项：[http ://rdoc.info/github/thoughtbot/paperclip/Paperclip/Storage/S3](http://rdoc.info/github/thoughtbot/paperclip/Paperclip/Storage/S3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T04:46:18.923

您也许可以将 s 添加到 http URL 并使其正常工作。如果可行，则修复链接以引用 https 而不是 http。

如果这不起作用，您可能需要联系亚马逊客户服务。只要您有来自 https 连接的 http 页面链接，您和您的用户就会收到该消息。然而，更重要的是，您让您的用户面临 XSS、CSRF 和 MitM 攻击。

# php - iTunes 搜索 API 附属链接

> ID：15963167
> 
> 赞同：1
> 
> 时间：2013-04-12T04:38:30.327
> 
> 标签：php, jquery, api, hyperlink, itunes

我一直在使用 iTunes 搜索 API 从 iTunes 获取内容以显示在我的网站上，该网站返回我存储在数据库中的 JSON 数据，然后显示我的数据库中的数据。我将使用 linkshare 将我的产品链接关联到 iTunes Store。我面临的问题是，当我将数据保存到数据库时，我将产品的 iTunes URL 保存在数据库中（不附属），我想知道是否可以集成链接共享关联链接到我的搜索 API，因此我不必每次都手动设置每个产品的关联链接。在此先感谢，我感谢您的建议！

**iTunes 搜索 API 网址**

```
http://itunes.apple.com/search?term='.$term.'&limit=5&media=software&enity=software 
```

**返回的网址**

```
https://itunes.apple.com/us/app/angry-birds-seasons/id398157641?mt=8&ign-mpt=uo%3D4%2522 
```

**需要附属网址**

```
http://click.linksynergy.com/fs-bin/stat?id=yfbyIWqHFt8&offerid=146261&type=3&subid=0&tmpid=1826&RD_PARM1=https%253A%252F%252Fitunes.apple.com%252Fus%252Fapp%252Fangry-birds-seasons%252Fid398157641%253Fmt%253D8%2526uo%253D4%2526partnerId%253D30 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T12:26:19.673

您的会员 URL 似乎等于：

[http://click.linksynergy.com/fs-bin/stat?id=yfbyIWqHFt8&offerid=146261&type=3&subid=0&tmpid=1826&RD_PARM1=](http://click.linksynergy.com/fs-bin/stat?id=yfbyIWqHFt8&offerid=146261&type=3&subid=0&tmpid=1826&RD_PARM1=)`+url component encode returned`

要做到这一点：

## 在 JS 中

```
encodeURIComponent(
     encodeURIComponent(
         'https://itunes.apple.com/us/app/angry-birds-seasons/id398157641?mt=8&ign-mpt=uo%3D4%2522'
      )
); 
```

会给你

> https%253A%252F%252Fitunes.apple.com%252Fus%252Fapp%252Fangry-birds-seasons%252Fid398157641%253Fmt%253D8%2526ign-mpt%253Duo%25253D4%25252522

这似乎是您的附属 URL 中缺少的部分。（没有`partnerId%253D30`）

## 在 PHP 中

在[https://stackoverflow.com/a/1734255/460368](https://stackoverflow.com/a/1734255/460368)中，您可以使用此功能，该功能与 JS 中的功能相同：

```
function encodeURIComponent($str) {
    $revert = array('%21'=>'!', '%2A'=>'*', '%27'=>"'", '%28'=>'(', '%29'=>')');
    return strtr(rawurlencode($str), $revert);
} 
```

所以，

```
echo encodeURIComponent(
         encodeURIComponent(
             'https://itunes.apple.com/us/app/angry-birds-seasons/id398157641?mt=8&ign-mpt=uo%3D4%2522'
         )
     ); 
```

会给你

> https%253A%252F%252Fitunes.apple.com%252Fus%252Fapp%252Fangry-birds-seasons%252Fid398157641%253Fmt%253D8%2526ign-mpt%253Duo%25253D4%25252522

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T00:54:50.477

我正在使用来自 iTunes 的 json api。所以我只是得到这些信息，然后做一点爆炸，比如：

```
$download_link = $results->trackViewUrl;
$download_link = explode('uo=4", $download_link);
$download_link = $download_link[0].'partnerId=30&siteID='; 
```

在 siteID 之后放置您的会员 ID，这应该会成为您的链接。

# magento - 如何从 magento 1.7 的产品视图页面以 csv 格式导出产品详细信息？

> ID：15963169
> 
> 赞同：1
> 
> 时间：2013-04-12T04:38:47.230
> 
> 标签：magento, csv, magento-1.7, export-to-csv

**我想以CSV**格式从 Magento 前端（产品视图页面）导出产品的所有详细信息。实际上，我想在产品视图页面上显示一个按钮，通过单击它，应该导出该产品的详细信息。但我没有得到正确的想法，请任何人都可以帮助我。建议我从哪里开始。

# php - 类中的常量 var

> ID：15963172
> 
> 赞同：0
> 
> 时间：2013-04-12T04:39:19.437
> 
> 标签：php, class

```
class Constants
{
        public static $url1      = "http=//url1";
        public static $url2       = Constants::$url1."/abc2";
        public static $url3       = Constants::$url1."/abc3";
        public static $url4       = Constants::$url1."/abc4";
} 
```

我知道这是不可能的

所以我应该像在一个地方有 $url1 定义一样使用它吗

```
class urlOnly
{
      public static $url1      = "http=//url1";
}
class Constants
{
        public static $url1       = urlOnly::$url1;
        public static $url2       = urlOnly::$url1."/abc2";
        public static $url3       = urlOnly::$url1."/abc3";
        public static $url4       = urlOnly::$url1."/abc4";
} 
```

另外，如果我想这样使用，我可以确保类“urlOnly”只能由类“Constants”访问。

替代解决方案最受欢迎，因为在此解决方案中我需要创建两个类。我也想把变量作为一个变量而不是作为一个函数来访问，我希望它像静态一样被访问

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T04:45:47.063

您不能在类定义中使用非标量值。改为使用`define()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T04:42:08.663

你可以做的一件事来实现你正在寻找的东西是：

```
class Constants {
    public static $url1 = "http://url1";
    public static $url2 = "";
    // etc
}

Constants::$url2 = Constants::$url1 . "/abc2"; 
```

不幸的是，要动态定义静态值，您必须在类的上下文之外执行此操作，因为静态变量只能用文字或变量初始化（因此此答案的先前版本有解析错误）。

但是，我建议使用，`define`因为它的目的是定义常量值，并且没有理由将常量存储在类的上下文中，除非这样做绝对有意义（至少在我看来）。

就像是：

```
define("URL1", "http:://url1");
define("URL2", URL1 . "/abc2"); 
```

那么你就不需要指定类访问器了，只需要根据需要使用`URL1`or`URL2`即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T06:38:35.203

通常，如果不调用类方法，就无法声明动态常量和静态属性。但是你可以实现你想要的逻辑。您应该在字符串常量中使用占位符。然后你应该添加静态方法“get”来检索常量和替换占位符。像这样：

```
class Constants
{
    protected static $config = array(
        'url1' => 'http=//url1',
        'url2' => '%url1%/abc2',
        'url3' => '%url1%/abc3',
        'url4' => '%url1%/abc4',
    );

    public static function get($name, $default = null)
    {
        if (!empty(self::$config[$name]) && is_string(self::$config[$name]) && preg_match('/%(\w[\w\d]+)%/', self::$config[$name], $matches)) {
            self::$config[$name] = str_replace($matches[0], self::$config[$matches[1]], self::$config[$name]);
        }
        return self::$config[$name];
    }
} 
```

如何使用：

```
Constants::get('url1');
Constants::get('url2');
Constants::get('url3');
Constants::get('url4'); 
```

# android - 在没有 ffmpeg 的情况下在 Android 上更改 MP3 比特率的比特率

> ID：15963173
> 
> 赞同：1
> 
> 时间：2013-04-12T04:39:23.500
> 
> 标签：android, ffmpeg, mp3, bitrate

在我的项目中，我有一个相当大的 320kbps MP3。由于它太大，我想将其转换为使用较低的比特率（约 80kbps）。我知道`ffmpeg`库的存在就是为了做到这一点，但`ffmpeg`在 Android 中使用非常复杂。

`ffmpeg`是否有另一种方法可以更改Android中不使用的 MP3 比特率？

# java - Android AsyncTask：如何处理返回类型

> ID：15963181
> 
> 赞同：1
> 
> 时间：2013-04-12T04:40:33.740
> 
> 标签：java, android, android-asynctask

我正在开发一个执行**http POST 请求**的 Android 应用程序，我遵循的教程导致了`android.os.NetworkOnMainThreadException`

原始*代码*是这样的。

```
public class JSONParser {

static InputStream is = null;
static JSONObject jObj = null;
static String json = "";

// constructor
public JSONParser() {

}

public JSONObject getJSONFromUrl(String url, List<NameValuePair> params) {

    // Making HTTP request
    try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);
        httpPost.setEntity(new UrlEncodedFormEntity(params));

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent();

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        json = sb.toString();
        Log.e("JSON", json);
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    // try parse the string to a JSON object
    try {
        jObj = new JSONObject(json);            
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

    // return JSON String
    return jObj;

}
} 
```

这个类是用这一行调用的。

```
JSONObject json = jsonParser.getJSONFromUrl(loginURL, params); 
```

将其更改为 AsyncTask 类后，代码如下所示。

```
class JSONParser extends AsyncTask<String, Void, JSONObject>{

static InputStream is = null;
static JSONObject jObj = null;
static String json = "";

// variables passed in:
String url;
List<NameValuePair> params;

// constructor
public JSONParser(String url, List<NameValuePair> params) {
    this.url = url;
    this.params = params;
}

@Override
protected JSONObject doInBackground(String... args) {
    // Making HTTP request
        try {
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);
            httpPost.setEntity(new UrlEncodedFormEntity(params));

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            json = sb.toString();
            Log.e("JSON", json);
        } catch (Exception e) {
            Log.e("Buffer Error", "Error converting result " + e.toString());
        }

        // try parse the string to a JSON object
        try {
            jObj = new JSONObject(json);            
        } catch (JSONException e) {
            Log.e("JSON Parser", "Error parsing data " + e.toString());
        }

        // return JSON String
        return jObj;
}

@Override
protected void onPostExecute(JSONObject jObj) {
    return;
}       
} 
```

我的问题是，我如何`JSONObject`从这个新的*AsyncTask*类中返回一个？我可以看到它`jObj`正在被返回`doInBackground()`，但我不确定它被返回到哪里。

我需要修改什么或者我需要如何调用我的新`JSONParser`类以便它返回一个`JSONObject`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T05:02:29.077

看看这段代码，它可以让你深入了解如何处理 JSON 对象的解析。我现在只是发布 onPostExecute 函数，因为您似乎正确地计算了所有其余部分。

至于您对 doInBackground 中的数据对象的返回位置有疑问，它会自动发送到 onPostExecute ，您可以在其中进一步解析它。

```
 @Override
    protected void onPostExecute(JSONObject result)
    {
        try
        {   
            JSONObject data = result.getJSONObject("data");
                      // whatever your JSON tag may be, in this case its data.

            if (data.isNull("data"))
            {
                      // action to handle null JSON object.
            }               
            else
            {
                JSONArray jarray = data.getJSONArray("data");   
                int len=jarray.length();
                for (int i = 0; i < jarray.length(); i++)
                {
                JSONObject obj = (JSONObject) jarray.get(i);

             String instanceName = obj.getString("instanceName");   
                        //extract data by whatever tag names you require, in this case instanceName.    
           } 
         }
} 
        catch (JSONException je)
        {
            je.printStackTrace();
            Log.d(TAG, "Error: " + je.getMessage());
        }       
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T04:42:25.927

> 我可以看到 jObj 在 doInBackground() 中被返回，但我不确定它被返回到哪里。

doinBackground() 的结果在 onPostExecute() 中作为参数接收。您在 doinBackground() 中返回一个 json 对象，它是 onPostExecute() 的参数。

```
@Override
protected void onPostExecute(JSONObject jObj) {
return;
} 
```

用法

```
new JSONParser().execute("url);
class JSONParser extends AsyncTask<String, Void, JSONObject>{

   //string parameter to doInBackground()
   //JSONObject - result returned in doInBackground() received as a param in onPostExecute()
} 
```

您还可以将参数传递给 asynctask 的构造函数

```
 new JSONParser("url",params).execute(); 
```

在你的异步任务中；

```
String url;
List<NameValuePair> params;

// constructor
public JSONParser(String url, List<NameValuePair> params) {
this.url = url;
this.params = params;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T04:47:25.567

从你的`doInBackground`方法

```
@Override
protected JSONObject doInBackground(String... args) {

 return jObj; 
```

}

你的`JsonObject`回报

```
@Override
protected void onPostExecute(JSONObject jObj) {

    // Here you get your return JsonObject
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T04:52:30.157

一个异步任务有 3 个属性

```
Params, the type of the parameters sent to the task upon execution.

Progress, the type of the progress units published during the background computation.

Result, the type of the result of the background computation. 
```

您需要了解的一点是，您在调用时正在创建 Async Task Class 的对象`new JSONParser(loginURL, params);`

解决方案是在您的 Async 类中创建一个公共结果变量并调用`execute()`类的对象，然后从该对象访问公共对象。

# mysql - 如何编写一个语法正确的简短查询，在运行时会产生错误？

> ID：15963184
> 
> 赞同：2
> 
> 时间：2013-04-12T04:40:54.857
> 
> 标签：mysql, sql, database

我想写一个查询：

*   尽可能短
*   对 MySQL 服务器语法正确
*   使服务器在执行时返回错误

我目前的解决方案是：

```
CREATE TABLE FOO (i INT);
INSERT INTO FOO VALUES (1);
INSERT INTO FOO VALUES (2);
SELECT 1 FROM FOO WHERE 1 = (SELECT i FROM FOO); 
```

但是我不喜欢它——它太长了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T05:00:47.097

```
CREATE TABLE FOO (i INT);
CREATE TABLE FOO (i INT); 
```

它不会接受创建表，因为它在第一个语句之后已经存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T04:44:20.277

以下是一些“正确”但会失败的简短查询

```
SELECT *

SELECT 1e333

SELECT i FROM(SELECT 1i,1i) 
```

详细版本是

```
SELECT * FROM DUAL

SELECT 1e333 FROM DUAL

SELECT i FROM (SELECT 1 as i, 1 as i FROM DUAL) 
```

他们失败的原因不同：

1) DUAL 没有任何列。

2) 1e333 不适合浮点数。

3) 内部查询返回具有两个相同命名列的表。因此，外部查询不允许指定此列名。

# java - 有没有办法使用没有php的backbonejs、html和java将数据插入mysql

> ID：15963189
> 
> 赞同：1
> 
> 时间：2013-04-12T04:41:04.017
> 
> 标签：java, mysql, backbone.js

有没有办法使用backbonejs，html和java将数据插入mysql而没有php即时创建一个带有名称，电话和电子邮件的html页面我想将此数据
插入mysql数据库......如果有人知道请告诉我.. .!!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T04:49:14.053

您可能需要来自[http://dev.mysql.com/downloads/connector/j/的 Java MySQL 连接器](http://dev.mysql.com/downloads/connector/j/)

这是一个简单的代码示例：

```
Class.forName("com.mysql.jdbc.Driver") ;
Connection conn = DriverManager.getConnection("jdbc:mysql://localhost:3306/DBNAME", "usrname", "pswd") ;
Statement stmt = conn.createStatement() ;
String query = "select columnname from tablename ;" ;
ResultSet rs = stmt.executeQuery(query) ; 
```

# google-apps-script - 登录网站并获取数据

> ID：15963192
> 
> 赞同：1
> 
> 时间：2013-04-12T04:41:10.703
> 
> 标签：google-apps-script

在脚本成功登录后，我正在尝试从网站检索数据。我能够从网站获取数据，但似乎它只是在登录网站之前给了我来自网站的信息。任何帮助将非常感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T04:51:06.563

如果您尝试创建一个软件来在登录后获取站点的数据，您可能必须处理会话和 cookie，因为这就是站点如何知道用户是否登录的方式。

# crystal-reports - 以整数/数字的形式获取水晶报表的价值

> ID：15963194
> 
> 赞同：2
> 
> 时间：2013-04-12T04:41:18.647
> 
> 标签：crystal-reports

> 块引用

大家好，

我正在编写参考光标以将值从 oracle 拉到水晶报告中。一切正常。我的表中有 5 列，其中一列是数字数据类型，其余列是 varchar2 数据类型。当我使用下面的代码时，我将所有值作为字符串输入到水晶报表中。但我想将一个字段作为数字并保留为字符串。例如，请检查以下代码。如何将第一列作为整数拉到报告中。

> **代码中写的内容：** 'public string column1 { get; 放; } 公共字符串 column2 { 获取；放; } 公共字符串 column3 { 获取；放; } 公共字符串 column4 { 获取；放; } 公共字符串 column5 { 获取；放; }'

**在 main 中编写的代码以提取数据**' objParamCnt.column1= oraReader["column1"].ToString(); objParamCnt.column2 = oraReader["column2"].ToString(); objParamCnt.column3 = oraReader["column3"].ToString(); objParamCnt.column4 = oraReader["column4"].ToString(); objParamCnt.column5 = oraReader["column5"].ToString();'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T06:14:12.117

可以分两步完成：

1.  在内容代码中

公共 int column1 {get; 放;}

1.  在主代码中

objParamCnt.column1 = Convert.ToInt32(oraReader["column1"]);

我希望它对你有用！

# expert-system - 如何将这两个规则与 CLIPS 结合起来？

> ID：15963202
> 
> 赞同：1
> 
> 时间：2013-04-12T04:41:53.747
> 
> 标签：expert-system, clips, knowledge-capture

我在 CLIPS 中有两条规则，如果它们都是真的，我想将它们结合起来……但不知道该怎么做。我有一个名为`grant-eligible`....做这个...`TRUE``'grant-eligible'``FALSE`

所以这是我的规则：

```
 (defrule complete "rule for app completeness"
  ?f <- (application (transcript-received Yes) (app-complete FALSE)
    (gpa
                ?v_gpa&:(
                    > ?v_gpa 0)))

  =>
  (modify ?f (app-complete TRUE)))

    (defrule denied "rule for admission - DENIED"
  ?f <- (application (app-complete TRUE) (app-decision FALSE)
    (gpa
                ?v_gpa&:(
                    < ?v_gpa 3.0))

    (ssat
                ?v_ssat&:(
                    >= ?v_ssat 0.0))

        )

  =>
  (modify ?f (app-decision DENIED))

  )

(defrule accepted "rule for admission - ACCEPTED"
  ?f <- (application (app-complete TRUE) (app-decision FALSE)
    (gpa
                ?v_gpa&:(
                    >= ?v_gpa 3.5))

    (ssat
                ?v_ssat&:(
                    >= ?v_ssat 1500))

        )

  =>
  (modify ?f (app-decision ACCEPTED))

  ) 
```

这是我现在要实施的

```
(defrule female-finaid "rule for finaid applications for female students"
  ?f <- (application (app-decision ACCEPTED) 
    (gender F) (grade-entry Freshman) (country USA)
    (grant-eligible TRUE)
    (grant ?v_grant)
    )

  =>
  (modify ?f
            (grant (+ ?v_grant 5000))
            (grant-eligible TRUE)
        )
    )

    (defrule great-students-finaid "rule for finaid applications for female students"
  ?f <- (application (app-decision ACCEPTED) 
    (country USA)
    (grant-eligible TRUE)
    (grant ?v_grant)
    (gpa
                ?v_gpa&:(
                    >= ?v_gpa 4.0))
    )

  =>
  (modify ?f
            (grant (+ ?v_grant 4500))
            (grant-eligible FALSE)
        )
    ) 
```

如果这两个规则都成立，授予的补助金应该是 9500，或者可能是 5000，或者可能是 4500……有什么想法吗？

解决方案：（我的控制事实在哪里`ff-grant-eligible`以及在哪里`es-grant-eligible`......它们代表 ff=female finaid，并且 es=excellent student）

```
 (defrule female-finaid "rule for finaid applications for female students"
  ?f <- (application (app-decision ACCEPTED) (ff-grant-eligible TRUE)
    (gender F) (grade-entry Freshman) (country USA)

    (grant ?v_grant)
    )

  =>
  (modify ?f
            (grant (+ ?v_grant 5000))
            (ff-grant-eligible FALSE)
        )
    )

    (defrule great-students-finaid "rule for finaid applications for female students"
  ?f <- (application (app-decision ACCEPTED) (es-grant-eligible TRUE)
    (country USA)

    (grant ?v_grant)
    (gpa
                ?v_gpa&:(
                    >= ?v_gpa 4.0))
    )

  =>
  (modify ?f
            (grant (+ ?v_grant 4500))
            (es-grant-eligible FALSE)
        )
    ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T14:34:09.453

您可以通过多种方式控制程序的执行（例如，控制事实、显着性、模块）。该答案将在应用程序处理的各个阶段使用控制事实（具有显着性）。我还将假设您有一个`id`与每个应用程序关联的唯一插槽。

考虑以下事实和规则：

```
(deffacts application-stages "ordered sequence of stages for an application"
  (stages app-received app-accept-reject app-evaluate-grants
          app-apply-grants app-complete))

(defrule go-to-next-stage "Advances to the next application stage"
  ?stage <- (app-stage ?id ?current-stage)
  (stages $? ?current-stage ?next-stage $?)
  =>
  (retract ?stage)
  (assert (app-stage ?id ?next-stage))
  (printout t "Application " ?id " moved from stage " ?current-stage
              " to " ?next-stage "." crlf)) 
```

deffact`application-stages`定义应用程序的阶段顺序，并且`go-to-next-stage`规则推进应用程序阶段。由于该规则的显着性低于默认值（0），因此只有在当前阶段没有其他规则对应的情况下才会执行该规则。因此，如果您的程序中没有其他规则，您将获得以下信息：

```
CLIPS> (reset)
CLIPS> (assert (app-stage app-001 app-received))
<Fact-2>
CLIPS> (run)
Application app-001 moved from stage app-received to app-accept-reject.
Application app-001 moved from stage app-accept-reject to app-evaluate-grants.
Application app-001 moved from stage app-evaluate-grants to app-apply-grants.
Application app-001 moved from stage app-apply-grants to app-complete.
CLIPS> 
```

但是，如果您有任何与特定阶段相关的规则，它们将首先被执行。`app-evaluate-grants`因此，您可以像这样向阶段添加规则：

```
(defrule female-finaid "rule for finaid applications for female students"
  (app-stage ?id app-evaluate-grants)
  (application (app-decision ACCEPTED) (id ?id)
    (gender F) (grade-entry Freshman) (country USA)
  =>
  (assert (grant ?id female 5000))) 
```

你同样会添加一条`great-student-finaid`规则。然后，舞台有一条规则`app-apply-grants`：

```
(defrule apply-grant "Adds the amount of a grant to an application"
  (app-stage ?id app-apply-grants)
  ?grant <- (grant ?id ? ?amount)
  ?app <- (application (id ?id) (grant ?v_grant))
  =>
  (retract ?grant)
  (modify (?app (grant (+ ?v_grant ?amount)))) 
```

以这种方式对其进行建模的好处之一是您不必`grant-eligible`在应用程序的数据中包含控制事实（例如 ）。也就是说，您的控制逻辑与数据模型是分开的。请注意，您可以通过使用 CLIPS 模块（通过）实现与我在这里所做的相同的效果，`defmodule`这通常是可取的，但它需要更长的答案（而且这个答案已经相当长了）。

# javascript - 尝试排队 http 请求时出现 process.tick 错误

> ID：15963203
> 
> 赞同：0
> 
> 时间：2013-04-12T04:41:56.010
> 
> 标签：javascript, node.js, express

我让我的`Request`对象将各个 HTTP 请求排队，并使用`process.nextTick`. 但是，我收到一个我不知道如何解决的错误：

```
node.js:244
        callback();
        ^
TypeError: undefined is not a function
    at process.startup.processNextTick.process._tickCallback (node.js:244:9) 
```

我不确定我做错了什么。这是相关的课程。

```
var Request = function() {
    return this;
};

Request.prototype = {
    queue_: []
};

Request.prototype.send = function(url, done) {
    this.queue_.push(new QueueableRequest(url, done));
    this.processRequest_();
}

Request.prototype.processRequest_ = function() {
    if (this.queue_.length > 0) {
        var request = this.queue_.shift();
        var data = '';
        http.get(request.url_, function(res) {
            res.setEncoding('utf8');
            res.on('data', function(chunk) {
                data += chunk;
            }).on('end', function() {
                request.callback_(null, JSON.parse(data));
                process.nextTick(this.processRequest_);
            }).on('error', function(err) {
                request.callback_(err, null);
                process.nextTick(this.processRequest_);
            });
        });
    }
} 
```

我的另一个问题是这是否是减慢 HTTP 请求的好方法？我正在尝试做的是......我对线程列表（大约 15-20）发出 HTTP 请求，然后对于每个线程，我发出另一个请求以获取其回复。有时在回复中，我必须再次请求深度嵌套的回复。我最初的解决方案是简单地调用`http.get`每个请求，但我发现我`node.js`在几个请求后停止响应，我必须不断重新启动服务器并刷新页面。我的想法是我可能一次发送了太多请求，所以我尝试实现这个队列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T05:04:32.193

您`this`内部的事件处理程序不正确，因此您的`this.processRequest_`is `undefined`.

```
Request.prototype.processRequest_ = function() {
    // Assign the outer request object to a variable so you can access it.
    var self = this;

    if (this.queue_.length > 0) {
        var request = this.queue_.shift();
        var data = '';
        http.get(request.url_, function(res) {
            res.setEncoding('utf8');
            res.on('data', function(chunk) {
                data += chunk;
            }).on('end', function() {
                request.callback_(null, JSON.parse(data));
                process.nextTick(function(){
                    // Call 'processRequest_' on the correct object.
                    self.processRequest_()
                });
            }).on('error', function(err) {
                request.callback_(err, null);
                process.nextTick(function(){
                    // Call 'processRequest_' on the correct object.
                    self.processRequest_()
                });
            });
        });
    }
} 
```

也就是说，您可以考虑使用[request 模块](https://github.com/mikeal/request)来简化它。

```
var request = require('request');

Request.prototype.processRequest_ = function() {
    var self = this;
    if (this.queue_.length > 0) {
        var requestData = this.queue_.shift();
        request(requestData.url_, function(error, response, body){
            requestData.callback_(err, err ? null : JSON.parse(body));
            process.nextTick(function(){
                self.processRequest_();
            });
        });
    }
}; 
```

# android - 如何在android中添加多个edittexts的值？

> ID：15963207
> 
> 赞同：1
> 
> 时间：2013-04-12T04:42:31.700
> 
> 标签：android, android-edittext

我正在我的代码中创建动态布局。我的 UI 有多个在运行时动态创建的行。每行由单个编辑文本组成。我创建了单个编辑文本对象并使用此对象添加多行。

让我们假设有 5 行，所以有 5 个编辑文本。用户可以在任何编辑文本中输入/删除数字。根据用户在各自的编辑文本中输入的内容，我想更新标签。标签应包含所有编辑文本值的添加。

我在编辑文本 afterTextChanged 回调方法上调用以下函数。

```
private void refreshTotalNumberOfDays(Editable editable){

    if(!(editable.length()==0)){
        totalDays = Integer.parseInt(editable.toString());  
    }

    finalTotalDays =totalDays+finalTotalDays;
    ftotalNumberOfDays.setText(String.valueOf(finalTotalDays));
} 
```

但它没有正确添加值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T05:26:02.330

您需要更改为：

```
totalDays = Integer.parseInt(editable.getText().toString()); 
```

它应该给你正确的整数值。

要汇总所有这些，请保留所有编辑文本的数组。

创建活动时制作数组

```
ArrayList<EditText> editTextArrayList = new ArrayList<EditText>();
editTextArrayList.add(editText1);
editTextArrayList.add(editText2);
... 
```

然后在您的回调方法上，将它们全部加起来：

```
int total = 0;
for (EditText editText:editTextArrayList) {
    total +=  Integer.parseInt(editText.getText().toString());
} 
```

# jquery - 未捕获的类型错误：对象# has no method 'dialog' Below is my JSF code and corresponding HTML code which its gets converted into, <script type="text/javascript" src="/static-files/js/jquery.min.js"></script> <scr 问问题 问问题 2013-04-12T04:43:01.200 8852 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. Below is my JSF code and corresponding HTML code which its gets converted into, <script type="text/javascript" src="/static-files/js/jquery.min.js"></script> <script type="text/javascript" src="/static-files/js/functions.js"></script> <script type="text/javascript" src="/static-files/scripts/jquery-1.6.2.js"></script> <script type="text/javascript" src="/static-files/scripts/jquery-ui.min.js"></script> <script src="http://code.jquery.com/jquery-latest.js"></script> <ui:composition> <div id="myForm" style="visibility:hidden"> <a4j:commandLink id="cmdLinkClose" value="No Thanks"></a4j:commandLink> </div> <script type="text/javascript"> /* <![CDATA[ */ $("a[id$='cmdLinkClose']").click(function() { $('#dialog').dialog('close'); }); /* ]]> */ </script> </ui:composition> HTML code : <a href="#" id="j_id3:cmdLinkClose" name="j_id3:cmdLinkClose" onclick="A4J.AJAX.Submit('j_id3',event,{'similarityGroupingId':'j_id3:cmdLinkClose' ,'parameters':{'j_id3:cmdLinkClose':'j_id3:cmdLinkClose'} } );return false;">No Thanks</a> When I click on 'No Thanks' link, am getting below exception in Java Script console. Uncaught TypeError: Object #<Object> has no method 'dialog' And I also have below code in my xhtml page, <script type="text/javascript"> /* <![CDATA[ */ var $h=jQuery.noConflict(); function myFunction() { $h(document).ready(function() { $h("#myForm").attr("style", "display:block"); $h("#myForm").dialog({ open: function(event, ui) { jQuery('.ui-dialog-titlebar-close').removeClass("ui-dialog-titlebar-close").html('<span>Close</span>'); }, duration: 800, height: 300, minWidth: 300, width: 300, position: [490, 160], zIndex: 99999999, modal: true, show: { effect: 'puff', duration: 400 }, hide: { effect: 'puff', duration: 400 } }); }); } myFunction(); /* ]]> */ </script> After googling I learnt that it could be because of not importing relevant Jquery Java Script files. But, in my case am not sure which Java Script I need to import/remove. UPDATE: I replaced jquery-ui.min.js with jquery-1.9.1.min.js. Below is the error am getting now, Seem like you've included three times jQuery library: <script type="text/javascript" src="/static-files/js/jquery.min.js"></script> <script type="text/javascript" src="/static-files/scripts/jquery-1.6.2.js"></script> <script src="http://code.jquery.com/jquery-latest.js"></script> You just need to include once and place it before jQuery UI and your other jQuery file <script src="http://code.jquery.com/jquery-latest.js"></script> <script type="text/javascript" src="/static-files/js/functions.js"></script> <script type="text/javascript" src="/static-files/scripts/jquery-ui.min.js"></script> jqueryjsf 4 1 回答 1 This answer is useful 1 好像你已经包含了三倍的 jQuery 库： <script type="text/javascript" src="/static-files/js/jquery.min.js"></script> <script type="text/javascript" src="/static-files/scripts/jquery-1.6.2.js"></script> <script src="http://code.jquery.com/jquery-latest.js"></script> 您只需要包含一次并将其放在 jQuery UI 和您的其他 jQuery 文件之前 <script src="http://code.jquery.com/jquery-latest.js"></script> <script type="text/javascript" src="/static-files/js/functions.js"></script> <script type="text/javascript" src="/static-files/scripts/jquery-ui.min.js"></script> 于 2013-04-12T04:46:07.237 回答 Related 8 ios - 当 UICollectionView 嵌套在 UITableVIew 中时，无法选择 1 wpf - 具有动态 LayoutTransform 的 WPF 工具提示样式 1 ios - 使 Box iOS SDK WebAPI 和 Google Analytics iOS SDK 2.0beta3 协同工作 3 r - 子集列表 - 一种 plyr 方式？ 1 google-maps - 您可以通过自定义 Google 地图路线上的距离以编程方式绘制图钉（标记）吗 1 unit-testing - Visual Studio 单元测试框架教程？ 1 c# - 在 .NET 中加载应用程序清单 2 javascript - 作为字符串接收的 Javascript 文本框 2 php - 电子邮件客户端中的 PHP mail() 和图像显示 0 internet-explorer - IE8-兼容性：为什么是特定的 搞砸了？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：15963209
> 
> 赞同：1
> 
> 时间：
> 
> 标签：jquery, jsf

Below is my JSF code and corresponding HTML code which its gets converted into,

```
<script type="text/javascript" src="/static-files/js/jquery.min.js"></script>
<script type="text/javascript" src="/static-files/js/functions.js"></script>
<script type="text/javascript" src="/static-files/scripts/jquery-1.6.2.js"></script>
<script type="text/javascript" src="/static-files/scripts/jquery-ui.min.js"></script>
<script src="http://code.jquery.com/jquery-latest.js"></script>

<ui:composition>
<div id="myForm" style="visibility:hidden">
<a4j:commandLink id="cmdLinkClose" value="No Thanks"></a4j:commandLink>
</div>

<script type="text/javascript">
        /* <![CDATA[ */

$("a[id$='cmdLinkClose']").click(function() {
    $('#dialog').dialog('close');
});

/* ]]> */ 
</script>

</ui:composition> 
```

**HTML code :**

```
<a href="#" id="j_id3:cmdLinkClose" name="j_id3:cmdLinkClose" 
onclick="A4J.AJAX.Submit('j_id3',event,{'similarityGroupingId':'j_id3:cmdLinkClose'
,'parameters':{'j_id3:cmdLinkClose':'j_id3:cmdLinkClose'} } );return false;">No Thanks</a> 
```

When I click on 'No Thanks' link, am getting below exception in Java Script console.

`Uncaught TypeError: Object #<Object> has no method 'dialog'`

And I also have below code in my xhtml page,

```
<script type="text/javascript">
/* <![CDATA[ */
   var $h=jQuery.noConflict();          
   function myFunction() 
   {

        $h(document).ready(function() {
            $h("#myForm").attr("style", "display:block");
            $h("#myForm").dialog({
                open: function(event, ui) {
                    jQuery('.ui-dialog-titlebar-close').removeClass("ui-dialog-titlebar-close").html('<span>Close</span>');
                },
                duration: 800,
                height: 300,
                minWidth: 300,
                width: 300,
                position: [490, 160],
                zIndex: 99999999,
                modal: true,
                show: {
                    effect: 'puff',
                    duration: 400
                },
                hide: {
                    effect: 'puff',
                    duration: 400
                }

            });
        });
   }

   myFunction();

    /* ]]> */
</script> 
```

After googling I learnt that it could be because of not importing relevant Jquery Java Script files. But, in my case am not sure which Java Script I need to import/remove.

**UPDATE:**

I replaced `jquery-ui.min.js` with `jquery-1.9.1.min.js`. Below is the error am getting now,

![enter image description here](https://i.stack.imgur.com/aT5eG.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T04:46:07.237

好像你已经包含了三倍的 jQuery 库：

```
<script type="text/javascript" src="/static-files/js/jquery.min.js"></script>

<script type="text/javascript" src="/static-files/scripts/jquery-1.6.2.js"></script>

<script src="http://code.jquery.com/jquery-latest.js"></script> 
```

您只需要包含一次并将其放在 jQuery UI 和您的其他 jQuery 文件之前

```
<script src="http://code.jquery.com/jquery-latest.js"></script>

<script type="text/javascript" src="/static-files/js/functions.js"></script>

<script type="text/javascript" src="/static-files/scripts/jquery-ui.min.js"></script> 
```

# jquery-ui - JQGrid 分页问题

> ID：15963219
> 
> 赞同：0
> 
> 时间：2013-04-12T04:44:00.497
> 
> 标签：jquery-ui, jqgrid

我正在工作 jqgrid 分页。并且遇到了一个非常基本的问题，但这真的让我很恼火。我正在做的事情有两个主要方面。1.服务器端数据的服务器端分页。2\. 用于服务器端搜索的客户端分页

1.  在第一种情况下，我为每个寻呼机按钮（下一个、上一个、最后一个、第一个）获取 50 条记录，并且如果用户输入页码，那么正确的服务调用也会为我获取完美的 50 条记录并设置数据。另外根据我的要求，我希望 jqgrid 在网格的右下角显示服务器上的总记录，即使网格当前仅包含 50 个，因此应该更新总页数。这也正常工作。 ![1841 是服务器上的记录数，但在 jqgrid 中仅存在 50 条记录。单击下一个我正在调用服务以获取下一组 50 条记录](https://i.stack.imgur.com/oNkm2.png)

2.  实际冲突就在这里。如果我使用某些标准进行搜索，服务将返回我的全部数据以进行搜索，例如 300 条记录。现在所有 300 条记录都在单个服务调用中获取。所以我想要客户端分页。我也可以设置 300 条记录和页码，但查看 {} 到 {} 并且中心文本框中的页码没有更新。有没有办法将页面文本框和视图的值重置为 {} 到默认值？请帮忙 ![在此处输入图像描述](https://i.stack.imgur.com/uEl4S.png) ![这是通过搜索获取​​数据时的图像，因此返回了 50 条记录。因此记录更新为 50，页面为 1。但文本框值设置为 37 并查看 1801-1850 0nly。理想情况下，它应该是第 1 页和查看 1到 50 请帮忙](https://i.stack.imgur.com/D7Joq.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T06:41:11.587

看来，您在`total`,`page`和`records`服务器响应中发布了错误的值。我想你切换了`records`和的值`total`。的值`total`应该是数据集中的总*页数*。的值`records`应该是数据集中的行数（记录、项目）。您应该调整您的服务器代码，指定`jsonReader`以正确方式获取（计算）数据`total`，`page`以及`records`从服务器返回的数据中。

我建议您阅读[答案](https://stackoverflow.com/a/5766189/315935)以了解为什么 jqGrid 向服务器发送附加参数以及为什么服务器需要返回`total`,`page`和`records`.

# function - 在 x86 中调用多个函数

> ID：15963227
> 
> 赞同：0
> 
> 时间：2013-04-12T04:44:28.223
> 
> 标签：function, x86

我正在尝试学习 x86 AT&T 语法，但我总体上有点困惑。我知道堆栈上有帧，当调用时，该函数中发生的第一件事是某种帧更新，然后获取参数。所以，如果我在我的主要代码区域的寄存器 eax 中有某种值，比如 5 并调用函数，我仍然可以访问 eax 中的值 5 对吗？或者为了把它作为一个参数，我必须做这样的事情。我在其他地方看到您在调用函数之前将参数推送到堆栈，这是真的吗？我想某些东西必须位于 8(ebp) 才能将它移入 eax，但是在我用 movl 将某些东西移入之前，eax 的值是多少？是5吗？我知道这是很多问题，我 我只是在调用函数并返回某些东西时感到困惑。任何帮助将不胜感激。我敢肯定这对于一些装配大师来说就像小菜一碟！

```
Function:
pushl %ebp
movl %esp, %ebp

movl 8(ebp), eax 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T15:16:05.773

[这个](http://en.wikipedia.org/wiki/X86_calling_conventions)页面应该基本上把它包起来。

使用*cdecl*你会喜欢

```
; I'm not comfortable with AT&T syntax, but it's not relevant here

; void *processData(void *firstParam, void *secondParam)
proc processData
    push ebp
    mov ebp,esp

    mov eax,[dword ptr ss:ebp + 8]    ; firstParam
    mov edx,[dword ptr ss:ebp + 12]   ; secondParam

    ; do something with the data and put the result into EAX

    mov esp,ebp
    pop ebp
    ret
endp processData 
```

你调用它就像

```
lea eax,[ds:bufferOfSecondParam]
push eax
lea eax,[ds:bufferOfFirstParam]
push eax
call processData
add esp,8

; Here you can do with the return value anything you want 
```

首先，您需要决定要使用的调用约定。例如，Win32 使用一个名为*stdcall的**cdecl*变体，其中被调用者负责清理堆栈——这实现起来不太方便，并且不允许使用可变参数。

 **[SS:EBP + 8]*指向第一个参数，因为

*   参数从右到左传递到堆栈（*[SS:EBP + 12]*指向第二个参数）
*   DWORDS 是 4 个字节
*   *[SS:EBP + 0]*指向在创建堆栈帧时保存的上一个*EBP*
*   *[SS:EBP + 4]*指向*ret时读入**EIP*的返回地址*

# python - 在python中用字母替换空格

> ID：15963228
> 
> 赞同：0
> 
> 时间：2013-04-12T04:44:29.983
> 
> 标签：python, python-2.7

我试图用“x”替换字符串中的空格作为函数，我不确定最好的方法是什么？

例如

`how is your day ?`

我希望这是 `howxisxyourxdayx?`

感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T04:46:52.830

您可以使用替换（）

```
text.replace(' ', 'x') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T04:45:31.390

尝试使用[替换](http://docs.python.org/2/library/stdtypes.html#str.replace)：

```
string.replace(' ', 'x') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T04:46:52.547

```
>>> text = 'how is your day ?'
>>> text.replace(' ', 'x')
'howxisxyourxdayx?' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T04:50:20.770

作为替代方案，您可以使用正则表达式模块

```
import re

In [9]: re.sub(' ', 'x', text)
Out[9]: 'howxisxyourxdayx?' 
```

# c++ - 关于指针+非指针的c ++内存问题

> ID：15963229
> 
> 赞同：0
> 
> 时间：2013-04-12T04:44:33.940
> 
> 标签：c++, pointers, memory

假设我已经声明了一个变量

```
vector<int>* interList = new vector<int>();
interList->push_back(1);
interList->push_back(2);
interList->push_back(3);
interList->push_back(4); 
```

第一个问题是当我 push_back 一个 int 时，会消耗一个内存空间吗？

第二个问题如果我（删除interList），1,2,3,4消耗的内存会自动释放吗？

编辑：免费->删除

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T04:47:01.720

1.  是的，如果您以后想在其中存储更多数据，vector 类可能会自动分配比需要更大的空间，因此它可能不会在每次`push_back()`.
2.  是的，但您应该使用`delete interList;`而不是`free()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T04:47:58.373

`push_back`将元素复制到堆中，向量将在其中分配数组来存储元素。的容量`vector`可以大于所需的或大于向量具有的元素数。每次推回发生时，向量都会检查是否有足够的空间，如果没有，则将所有元素移动到更大的空间，然后将元素推入数组。向量总是将元素放置到连续的内存块中，因此如果内存块不足以将所有元素保存在一起，那么它将所有元素移动到更大的块并附加新元素。为了避免这种频繁移动，向量通常会分配更大的内存块。

`delete interList`会破坏向量和向量持有的整数。这里向量将在堆上，整数也将在堆上。实际上，最好在堆栈上创建向量或作为其他对象的成员，例如`vector<int> interList;`The vector 虽然在堆栈上将 int 的元素存储在堆上作为数组。并且由于整数被存储为值类型，所以一旦向量超出范围，整数的内存就会被回收。

因为向量具有值类型。它们被向量复制到堆中，并作为数组存储和管理，它们的生命周期与向量的生命周期相关联。如果你有一个指针向量，那么你必须担心。Like`vector<T*> list;` `list.push_back(new T());`列表存储指向类型对象的指针`T`。当您销毁此类矢量时，`T`不会删除对象。这就像一个带有指向 a 的指针的类`T*`。您必须遍历所有元素并在指针上调用 delete 或使用共享指针向量。建议使用共享指针或唯一指针向量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T04:48:38.177

std::vector 一次为一定数量的元素分配连续的内存块。因此，每次插入新元素时，它都会插入到保留块中，并且内存空间保持不变，不会发生新的分配。

如果您在分配的块（向量的容量）之外插入元素，那么它会分配一个更大的块（调整大小），将所有先前的元素复制到其中并销毁旧块。所以vector自己管理内存，并不是每个插入的元素都会导致内部缓冲区的重新分配。

第二个问题 - 是的，如果你删除 vector 本身，vector 将清理所有内存。

```
delete interList; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T07:18:21.307

如果可以提供帮助，最好不要直接分配向量。所以你的代码看起来像这样：

```
vector<int> interList;
interList.push_back(1);
interList.push_back(2);
interList.push_back(3);
interList.push_back(4); 
```

现在，当 interList 超出范围时，*所有*内存都会被释放。事实上，这是 C++ 的所有资源管理的基础，有点通俗地称为 RAII（资源获取是初始化）。

现在，如果您觉得绝对*必须*分配向量，则应该使用资源管理智能指针之一。在这种情况下，我使用 shared_ptr

```
auto interList =  std::make_shared<vector<int>>();
interList->push_back(1);
interList->push_back(2);
interList->push_back(3);
interList->push_back(4); 
```

现在这也将释放所有内存，您永远不需要调用 delete。更重要的是，您可以将 interList 传递给您，它会为您引用计数。当最后一个引用丢失时，向量将被释放。

# csv - Python：如何将 .ofx 文件转换为 .csv

> ID：15963230
> 
> 赞同：4
> 
> 时间：2013-04-12T04:44:34.400
> 
> 标签：csv, python-3.x, ofx

有谁知道如何将 .ofx 文件转换为 .csv 文件。使用python语言？

我有一个 .ofx 格式的银行对账单文件，我想在仅支持 .csv 格式的个人软件中使用它。

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-11-29T02:36:33.913

迟到了，但是python包[ofxparse](https://github.com/jseutter/ofxparse/tree/master)可以打开和读取ofx文件。从那里，您可以查询您的交易并根据需要导出它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-29T11:43:28.333

不是 python，但[iCreateOFX Basic](http://icreateofx.co.uk/Convert-CSV-to-OFX)可以将 OFX 和 QIF 文件转换为 CSV（反之亦然。

# jquery - 将 JQuery 插件添加到新的 MVC4 Web 应用程序

> ID：15963233
> 
> 赞同：4
> 
> 时间：2013-04-12T04:44:44.033
> 
> 标签：jquery, asp.net-mvc-4

我是 MVC 4 和 JQuery 的新手。这是一个简单的问题，但我会提供额外的信息以防万一。我的问题是**“如何将一个简单的 jquery 插件合并到 MVC 4 框架中？”** 我完全没有成功地将 jquery 插件合并到我的项目中。我已经让“alert” document.ready 测试开始工作，但是在将它合并到 MVC 框架中时我还没有让任何插件工作。我已经到处搜索了关于此的可靠教程，但找不到任何东西。

我希望能回答上面的一般问题，或者回答我在以下实现中做错了什么。我正在尝试将图片轮播添加到新的 MVC Web 应用程序项目的布局中。我必须有一些不合适的地方，因为幻灯片 jquery 插件与 MVC 4 完全不同（请参阅底部的 html），但在将所有内容添加到新的 MVC 4 项目后，图像只会在页面上彼此相邻显示。在放入我的 MVC 项目之前，我将幻灯片配对，以便不需要 css，并验证它在 MVC 4 之外工作。请帮助！ - 被困了很长时间。这是我的代码：

**_Layout.cshtml**

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>@ViewBag.Title - My ASP.NET MVC Application</title>
    <link href="~/favicon.ico" rel="shortcut icon" type="image/x-icon" />
    <meta name="viewport" content="width=device-width" />
    @Styles.Render("~/Content/css")
    @Scripts.Render("~/bundles/modernizr")
    @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/bundles/jqueryui")
</head>
<body>
    <header>
        <div class="content-wrapper">
            <div class="float-left">
                <p class="site-title">@Html.ActionLink("your logo here", "Index", "Home")</p>
            </div>
            <div class="float-right">
                <section id="login">
                    @Html.Partial("_LoginPartial")
                </section>
                <nav>
                    <ul id="menu">
                        <li>@Html.ActionLink("Home", "Index", "Home")</li>
                        <li>@Html.ActionLink("About", "About", "Home")</li>
                        <li>@Html.ActionLink("Contact", "Contact", "Home")</li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>
    <div id="body">
        @RenderSection("featured", required: false)
        <section class="content-wrapper main-content clear-fix">
            @RenderBody()
        </section>
    </div>
    <footer>
        <div class="content-wrapper">
            <div class="float-left">
                <p>&copy; @DateTime.Now.Year - My ASP.NET MVC Application</p>
            </div>
        </div>
    </footer>

    <div id="slides">
        <img src="~/Images/Home_AEB3075%20(1).jpg" width="464" height="309" />
        <img src="~/Images/Home_AEB3075%20(2).jpg" width="464" height="309" />
        <img src="~/Images/Home_AEB3075%20(3).jpg" width="464" height="309" />
    </div>

    <script>
        $(function () {
            $('#slides').slidesjs({
                width: 464,
                height: 309,
                play: {
                    active: true,
                    auto: true,
                    interval: 4000,
                    swap: true
                }
            });
        });
    </script>

    @RenderSection("scripts", required: false)
</body>
</html> 
```

**BundleConfig.cs**

```
bundles.Add(new ScriptBundle("~/bundles/jquery").Include(
                    "~/Scripts/jquery-{version}.js"));

        bundles.Add(new ScriptBundle("~/bundles/jqueryui").Include(
                    "~/Scripts/jquery-ui-{version}.js",
                    "~/Scripts/jquery.ui.slides.js")); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:05:51.770

呃，问题是我的 BundleConfig.cs 文件中的脚本命名不正确。该脚本是 jquery.slides.js，而不是 jquery.slides.ui.js。输入正确的脚本名称后，这一切都完美无缺。

# php - 警告：mysql_num_rows()：提供的参数不是有效的 MySQL 结果资源

> ID：15963236
> 
> 赞同：0
> 
> 时间：2013-04-12T04:45:09.247
> 
> 标签：php, mysql

我有这个脚本：

```
<?php
/**
 * Template Name: search
 * This is the template that displays all pages by default.
 * Please note that this is the WordPress construct of pages
 * and that other 'pages' on your WordPress site will use a
 * different template.
 *
 * @package WordPress
 * @subpackage Twenty_Twelve
 * @since Twenty Twelve 1.0
 */

get_header(); ?>

    <div id="primary" class="site-content">
        <div id="content" role="main">

            <?php while ( have_posts() ) : the_post(); ?>
                <?php get_template_part( 'content', 'page' ); ?>
                <?php comments_template( '', true ); ?>
            <?php endwhile; // end of the loop. ?>

        </div><!-- #content -->

<form name="form" action="search" method="get">
  <input type="text" name="q" />
  <input type="submit" name="Submit" value="Search" />
</form>

<?php

  // Get the search variable from URL

  $var = @$_GET['q'] ;
  $trimmed = trim($var); //trim whitespace from the stored variable

// rows to return
$limit=10; 

// check for an empty string and display a message.
if ($trimmed == "")
  {
  echo "<p>Please enter a search...</p>";
  exit;
  }

// check for a search parameter
if (!isset($var))
  {
  echo "<p>We dont seem to have a search parameter!</p>";
  exit;
  }

//connect to your database ** EDIT REQUIRED HERE **
mysql_connect("localhost","",""); //(host, username, password)

//specify database ** EDIT REQUIRED HERE **
mysql_select_db("database") or die("Unable to select database"); //select which database we're using

// Build SQL Query  
$query = "select * tabled where field like \"%$trimmed%\"  
  order by field"; // EDIT HERE and specify your table and field names for the SQL query

 $numresults=mysql_query($query);
 $numrows=mysql_num_rows($numresults);

// If we have no results, offer a google search as an alternative

if ($numrows == 0)
  {
  echo "<h4>Results</h4>";
  echo "<p>Sorry, your search: &quot;" . $trimmed . "&quot; returned zero results</p>";

// google
 echo "<p><a href=\"http://www.google.com/search?q=" 
  . $trimmed . "\" target=\"_blank\" title=\"Look up 
  " . $trimmed . " on Google\">Click here</a> to try the 
  search on google</p>";
  }

// next determine if s has been passed to script, if not use 0
  if (empty($s)) {
  $s=0;
  }

// get results
  $query .= " limit $s,$limit";
  $result = mysql_query($query) or die("Couldn't execute query");

// display what the person searched for
echo "<p>You searched for: &quot;" . $var . "&quot;</p>";

// begin to show results set
echo "Results";
$count = 1 + $s ;

// now you can display the results returned
  while ($row= mysql_fetch_array($result)) {
  $title = $row["1st_field"];

  echo "$count.)&nbsp;$title" ;
  $count++ ;
  }

$currPage = (($s/$limit) + 1);

//break before paging
  echo "<br />";

  // next we need to do the links to other results
  if ($s>=1) { // bypass PREV link if s is 0
  $prevs=($s-$limit);
  print "&nbsp;<a href=\"$PHP_SELF?s=$prevs&q=$var\">&lt;&lt; 
  Prev 10</a>&nbsp&nbsp;";
  }

// calculate number of pages needing links
  $pages=intval($numrows/$limit);

// $pages now contains int of pages needed unless there is a remainder from division

  if ($numrows%$limit) {
  // has remainder so add one page
  $pages++;
  }

// check to see if last page
  if (!((($s+$limit)/$limit)==$pages) && $pages!=1) {

  // not last page so give NEXT link
  $news=$s+$limit;

  echo "&nbsp;<a href=\"$PHP_SELF?s=$news&q=$var\">Next 10 &gt;&gt;</a>";
  }

$a = $s + ($limit) ;
  if ($a > $numrows) { $a = $numrows ; }
  $b = $s + 1 ;
  echo "<p>Showing results $b to $a of $numrows</p>";

?>
    </div><!-- #primary -->

<?php get_sidebar(); ?>
<?php get_footer(); ?> 
```

当我进入页面时出现此错误（在我单击提交之前）

```
Warning: mysql_num_rows(): supplied argument is not a valid MySQL result resource ,line 66 
```

这是第 66 行的代码：

```
 $numrows=mysql_num_rows($numresults); 
```

有谁知道为什么会这样，如果可能的话请帮忙。

谢谢

本

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T04:49:38.987

看起来像一个格式错误的 MySQL 查询：

```
$query = "select * from tabled where field like \"%$trimmed%\"  
  order by field"; 
```

您基本上忘记了查询字符串中的“来自”。

作为旁注，您应该阅读正确转义 MySQL 查询字符串：

[http://php.net/manual/en/function.mysql-real-escape-string.php](http://php.net/manual/en/function.mysql-real-escape-string.php)

[http://kunststube.net/escapism/](http://kunststube.net/escapism/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T04:52:49.653

SQL 查询中缺少 FROM 子句：

```
$query = "select * FROM tabled where field like \"%$trimmed%\"  
  order by field"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T04:50:09.900

尝试像这样更改您的 sql 查询：

```
$criteria = '%' . mysql_real_escape_string($trimmed) . '%';
$query = "select * from tabled where field like '$criteria' order by field"; 
```

# php - PHP SOAP 复杂数组处理

> ID：15963237
> 
> 赞同：2
> 
> 时间：2013-04-12T04:45:23.330
> 
> 标签：php, arrays, soap, complextype

似乎 PHP 不能正确处理复杂的数组。使用 PHP 5。

WSDL

```
<?xml version="1.0"?>
<definitions xmlns="http://schemas.xmlsoap.org/wsdl/"
    xmlns:tns="urn:CostQueryServicewsdl" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"
    xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/"
    xmlns:soap-enc="http://schemas.xmlsoap.org/soap/encoding/" name="CostQueryService"
    targetNamespace="urn:CostQueryServicewsdl">
    <wsdl:types xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/">
        <xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema"
            targetNamespace="urn:CostQueryServicewsdl">
            <xsd:complexType name="WsdService_QueryCostParams">
                <xsd:all>
                    <xsd:element name="date_from" type="xsd:string" />
                    <xsd:element name="date_to" type="xsd:string" />
                    <xsd:element name="hotel_id_array" type="soap-enc:Array" />
                </xsd:all>
            </xsd:complexType>
            <xsd:complexType name="WsdService_CostHotelArray">
                <xsd:sequence>
                    <xsd:element xmlns:xsd="http://www.w3.org/2001/XMLSchema"
                        name="WsdService_CostHotel" type="tns:WsdService_CostHotel"
                        minOccurs="0" maxOccurs="unbounded" />
                </xsd:sequence>
            </xsd:complexType>
            <xsd:complexType name="WsdService_CostHotel">
                <xsd:all>
                    <xsd:element name="id" type="xsd:string" />
                    <xsd:element name="reserv_policy" type="xsd:string" />
                    <xsd:element name="cancel_policy" type="xsd:string" />
                    <xsd:element name="category_array"
                        type="tns:WsdService_CostHotelCategoryArray" />
                    <xsd:element name="btype_value" type="xsd:string" />
                </xsd:all>
            </xsd:complexType>
            <xsd:complexType name="WsdService_CostHotelCategoryArray">
                <xsd:sequence>
                    <xsd:element xmlns:xsd="http://www.w3.org/2001/XMLSchema"
                        name="WsdService_CostHotelCategory" type="tns:WsdService_CostHotelCategory"
                        minOccurs="0" maxOccurs="unbounded" />
                </xsd:sequence>
            </xsd:complexType>
            <xsd:complexType name="WsdService_CostHotelCategory">
                <xsd:all>
                    <xsd:element name="value" type="xsd:string" />
                    <xsd:element name="name" type="xsd:string" />
                </xsd:all>
            </xsd:complexType>
        </xsd:schema>
    </wsdl:types>
    <wsdl:message xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/"
        name="queryCostRowsRequest">
        <wsdl:part name="params" type="tns:WsdService_QueryCostParams" />
    </wsdl:message>
    <wsdl:message xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/"
        name="queryCostRowsResponse">
        <wsdl:part name="return" type="tns:WsdService_CostHotelArray" />
    </wsdl:message>
    <wsdl:message xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/"
        name="testEchoRequest">
        <wsdl:part name="value" type="xsd:string" />
    </wsdl:message>
    <wsdl:message xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/"
        name="testEchoResponse">
        <wsdl:part name="return" type="xsd:string" />
    </wsdl:message>
    <wsdl:portType xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/"
        name="CostQueryServicePortType">
        <wsdl:operation name="queryCostRows">
            <wsdl:documentation></wsdl:documentation>
            <wsdl:input message="tns:queryCostRowsRequest" />
            <wsdl:output message="tns:queryCostRowsResponse" />
        </wsdl:operation>
        <wsdl:operation name="testEcho">
            <wsdl:documentation></wsdl:documentation>
            <wsdl:input message="tns:testEchoRequest" />
            <wsdl:output message="tns:testEchoResponse" />
        </wsdl:operation>
    </wsdl:portType>
    <wsdl:binding xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/"
        name="CostQueryServiceBinding" type="tns:CostQueryServicePortType">
        <soap:binding xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"
            style="rpc" transport="http://schemas.xmlsoap.org/soap/http" />
        <wsdl:operation name="queryCostRows">
            <soap:operation xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"
                soapAction="urn:CostQueryServicewsdl#queryCostRows" style="rpc" />
            <wsdl:input xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/">
                <soap:body xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"
                    use="encoded" namespace="urn:CostQueryServicewsdl" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" />
            </wsdl:input>
            <wsdl:output xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/">
                <soap:body xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"
                    use="encoded" namespace="urn:CostQueryServicewsdl" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" />
            </wsdl:output>
        </wsdl:operation>
        <wsdl:operation name="testEcho">
            <soap:operation xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"
                soapAction="urn:CostQueryServicewsdl#testEcho" style="rpc" />
            <wsdl:input xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/">
                <soap:body xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"
                    use="encoded" namespace="urn:CostQueryServicewsdl" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" />
            </wsdl:input>
            <wsdl:output xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/">
                <soap:body xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"
                    use="encoded" namespace="urn:CostQueryServicewsdl" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" />
            </wsdl:output>
        </wsdl:operation>
    </wsdl:binding>
    <wsdl:service xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/"
        name="CostQueryServiceService">
        <wsdl:port xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"
            name="CostQueryServicePort" binding="tns:CostQueryServiceBinding">
            <soap:address xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"
                location="http://hs.localhost:8080/wsd_server/service.php?CostQueryService" />
        </wsdl:port>
    </wsdl:service>
</definitions> 
```

PHP

```
$options['classmap'] = array('WsdService_QueryCostParams'=>'WsdService_QueryCostParams', 'WsdService_CostHotel'=>'WsdService_CostHotel');
$server = new SoapServer($url . "?" . $classname.'.wsdl', $options);
$server->setClass($classname);
$server->handle(); 
```

SoapClient 的输出转储

```
stdClass::__set_state(array(
    'WsdService_CostHotel' => 
    array (
    0 => 
    WsdService_CostHotel::__set_state(array(
       'id' => 'HKG001',
       'day_cell_array' => 
      array (
      ),
       'reserv_policy' => NULL,
       'cancel_policy' => NULL,
       'category_array' => 
      stdClass::__set_state(array(
      )),
       'btype_value' => NULL,
    )),
    1 => 
    WsdService_CostHotel::__set_state(array(
       'id' => 'HKG002',
       'day_cell_array' => 
      array (
      ),
       'reserv_policy' => NULL,
       'cancel_policy' => NULL,
       'category_array' => 
      stdClass::__set_state(array(
         'WsdService_CostHotelCategory' => 
        stdClass::__set_state(array(
           'value' => 'STANDARD',
           'name' => 'Standard',
        )),
      )),
       'btype_value' => NULL,
    )),
  ),
)) 
```

我期望的是一个没有实际数据周围额外数组的数组。

# .htaccess - mod_rewrite、子域和 codeigniter 的问题

> ID：15963240
> 
> 赞同：1
> 
> 时间：2013-04-12T04:45:34.300
> 
> 标签：.htaccess, codeigniter, mod-rewrite, subdomain

我在 example.com/ci 上安装了 codeigniter。我有一个子域 foo.example.com。foo 子域的文档根设置为 home/public_html/ci。

我在 .htaccess 中使用以下规则将 foo.example.com 的请求发送到 example.com/ci/city/foo。

```
 RewriteCond %{HTTP_HOST} !^(www)\. [NC]
 RewriteCond %{HTTP_HOST} ^(.*)\.example\.com [NC]
 RewriteRule (.*) http://example.com/ci/city/%1/$1 [L] 
```

除了地址栏 url 从 foo.example.com 更改为 example.com/ci/city/foo 之外，这一切都像我想要的那样工作。我希望它保留 foo.example.com。RewriteRule 中没有 R=301（曾经是，但我删除了它）。.htaccess 文件位于 ci/ 文件夹中，规则首先是 codeigniter 的东西。

重定向完美无缺，网址仍然是 foo.example.com （Jon Lin 的回答）

```
RewriteCond %{HTTP_HOST} !^(www)\. [NC]
 RewriteCond %{HTTP_HOST} ^(.*)\.example\.com [NC]
 RewriteCond %{REQUEST_URI} !/city/
 RewriteRule (.*) /city/%1/$1 [L] 
```

但是调用 codeigniter 默认控制器而不是城市控制器中的 foo 方法。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T04:51:56.180

当您的重写规则的目标中有一个`http://example.com`时，无论是否使用`R`标志，302 重定向都是隐式的。您需要提供基于子域的文档根的 URI 路径，所以我假设您想要类似的东西：

```
RewriteCond %{HTTP_HOST} !^(www)\. [NC]
RewriteCond %{HTTP_HOST} ^(.*)\.example\.com [NC]
RewriteCond %{REQUEST_URI} !/city/
RewriteRule (.*) /city/%1/$1 [L] 
```

如果子域的文档根目录在`/ci/`目录中。

另一种选择是使用`P`标志来反向代理请求：

```
RewriteCond %{HTTP_HOST} !^(www)\. [NC]
RewriteCond %{HTTP_HOST} ^(.*)\.example\.com [NC]
RewriteRule (.*) http://example.com/ci/city/%1/$1 [L,P] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T17:32:16.670

我使用以下重写规则使其正常工作

```
 RewriteCond %{HTTP_HOST} !^(www)\. [NC]
 RewriteCond %{HTTP_HOST} ^(.*)\.example\.com [NC]
 RewriteCond %{REQUEST_URI} !/city/
 RewriteRule (.*) /city/%1/$1 [L] 
```

并通过设置

```
$config['uri_protocol'] = 'ORIG_PATH_INFO'; 
```

在 codeigniter 配置文件中。感谢所有的帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T09:30:41.223

您的里程可能会因此而有所不同（可能需要对其进行微调以适应您的服务器和条件），但是在我的 Mac 上进行一些测试，这就是我取得了轻微成功的原因：

### 目录结构

```
public_html/
  ci/
    application/
    system/
    .htaccess
    index.php 
```

我假设你的根`public_html`目录中有其他东西。所以我让 .htaccess 专注于与 CodeIgniter 相关的东西，方法是将其留在`ci`目录中。

### .htaccess

```
DirectoryIndex index.php

RewriteEngine on

RewriteCond %{HTTP_HOST} ^(.*)\.ciwildsub\.dev [NC]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.+)$ index.php/city/%1/$1 [L,QSA]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L,QSA] 
```

这是相当不言自明的，但第一个块是您的子域检查。我没有打扰排除`www`，但您可能想要（正如我所说，您的里程可能会有所不同）。第二个块是标准的 CodeIgniter`index.php`删除。

这些规则仅适用于`sub.example.com`或`example.com/ci/`URL，因为正如我所说，我假设您的根目录包含不应被重写干扰的内容。

### CodeIgniter 配置

```
$config['uri_protocol'] = 'PATH_INFO'; 
```

由于 Apache 处理类似 的 URL 的方式`example.com/index.php/controller/method`，它绕过`index.php`并像处理任何其他目录段一样处理它。此外，mod_rewrite 不一定在标记处*停止*`[L]`——它在该点停止处理 .htaccess，通过 RewriteRule，然后通过 .htaccess 运行该 URL。设置`PATH_INFO`有助于确保 CodeIgniter 正确提取当前 URI，并且我们的 .htaccess 不会卡在验证循环中。

不过，我会注意到，我对我在 RewriteLog 输出中看到的内容并不完全满意——必须*有*一种方法来进一步优化它，我只是还不确定（我已经完成了修补这是今天的！）。抱歉，如果这里的任何解释有点不合时宜 - 我不是服务器管理员或 mod_rewrite 专家，我只是在修补这个方面很开心。如果我设法找到更好的解决方案，我一定会更新它。

* * *

看起来该[`END`标志](http://httpd.apache.org/docs/current/rewrite/flags.html#flag_end)非常适合这种情况（以防止`[L]`循环），但它仅在 Apache 2.3.9+ 中可用。搜索继续。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-04T14:45:15.283

这对我有用

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /file_path/to/subdomain
    RewriteCond $1 !^(index\.php|images|robots\.txt)
    RewriteRule ^(.*)$ /index.php/$1 [L]
    RewriteCond %{REQUEST_URI} ^application.*
        RewriteRule ^(.*)$ /index.php?/$1 [L]
        RewriteCond %{REQUEST_FILENAME} !-f
        RewriteCond %{REQUEST_FILENAME} !-d
        RewriteRule ^(.*)$ index.php?/$1 [L]
    </IfModule>

    <IfModule !mod_rewrite.c>
        ErrorDocument 404 /index.php
    </IfModule> 
```

# php - 将数组输入 MySQL 数据库

> ID：15963242
> 
> 赞同：0
> 
> 时间：2013-04-12T04:45:53.473
> 
> 标签：php, mysql, arrays

我正在尝试使用 PHP 从名为 $linkarray 的数组中将数据输入到 MySQL 数据库中。我一直都做不到。。

```
//Sorry for this awful code ;/
$mysql_query("INSERT INTO TABLE_NAME (Col1, Col2, Col3, Col4, Col5, Col6, Col7, Col8, Col9, Col10, Col11, Col12, Col13, Col14, Col15, Col16, Col17, Col18, Col19, Col20, Col21, Col22, Col23, Col24, Col25, Col26, Col27, Col28, Col29, Col30, Col31, Col32, Col33, Col34,Col35, Col36,Col37, Col38, Col39, Col40, Col41, Col42, Col43, Col44, Col45, Col46, Col47, Col48, Col49, Col50, Col51, Col52, Col53, Col54, Col55, Col56, Col57, Col58) VALUES ('$linkarray[0]', '$linkarray[1]', '$linkarray[2]', '$linkarray[3]', '$linkarray[4]', '$linkarray[5]', '$linkarray[6]', '$linkarray[7]', '$linkarray[8]', '$linkarray[9]', '$linkarray[10]', '$linkarray[11]', '$linkarray[12]', '$linkarray[13]', '$linkarray[14]', '$linkarray[15]', '$linkarray[16]', '$linkarray[17]', '$linkarray[18]', '$linkarray[19]', '$linkarray[20]', '$linkarray[21]', '$linkarray[22]', '$linkarray[23]', '$linkarray[24]', '$linkarray[25]', '$linkarray[26]', '$linkarray[27]', '$linkarray[28]', '$linkarray[29]', '$linkarray[30]', '$linkarray[31]', '$linkarray[32]', '$linkarray[33]', '$linkarray[34]', '$linkarray[35]', '$linkarray[36]', '$linkarray[37]', '$linkarray[38]', '$linkarray[39]', '$linkarray[40]', '$linkarray[41]', '$linkarray[42]', '$linkarray[43]', '$linkarray[44]', '$linkarray[45]', '$linkarray[46]', '$linkarray[47]', '$linkarray[48]', '$linkarray[49]', '$linkarray[50]', '$linkarray[51]', '$linkarray[52]', '$linkarray[53]', '$linkarray[54]', '$linkarray[55]', '$linkarray[56]', '$linkarray[57]') ")
or die(mysql_error()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T05:26:35.233

$db_column_array = array('col1','col2','col3',......); // 您可以使用模式表获取表列

$query = "INSERT INTO TABLE_NAME ( implode($db_column_array, ',') ) VALUES ( implode($db_column_data_array, ',') )";

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T04:49:46.917

改变这个

```
$mysql_query 
```

至

```
mysql_query 
```

从`$`_`mysql_query`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T05:15:29.613

1.  当您必须插入数组元素时，您需要在它们周围使用 {}
2.  删除 mysql_query 字体中的 $

所以试试这个

```
mysql_query("INSERT INTO TABLE_NAME (Col1, Col2, Col3,....) VALUES ('{$linkarray[0]}', '{$linkarray[1]}', '{$linkarray[2]}', '{$linkarray[3]}' ......") 
```

你应该没事..

# java - Android：如何将输入从 edittext 存储到 .csv

> ID：15963244
> 
> 赞同：5
> 
> 时间：2013-04-12T04:46:05.550
> 
> 标签：java, android, android-edittext

对android来说相当新，我来自一个沉重的fortran背景。我一直在尝试制作应用程序，直到现在才成功。

我很难找到一种方法：使用按钮（保存）保存“edittext”字段，然后将此用户输入的数据保存到 .csv 文件中（最好在内部存储中）。

我找到了很多文章，但每个人都对我想要的基本部分（上图）感到震惊。

我的最佳想法是在类中生成 .csv，然后创建一个方法将“edittext”保存为新字符串，然后将该字符串输出到 .csv

希望这可以简单地解释，我只是无法在任何地方找到这个简单的解释，或者至少我能理解......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T06:38:58.923

请试试这个。我希望这段代码对你有帮助。

CSVFileWriter.java

```
public class CSVFileWriter {

private PrintWriter csvWriter;    
private File file;

public CSVFileWriter(File file) {
    this.file = file;

}

public void writeHeader(String data) {

    try {
        if (data != null) {

            csvWriter = new PrintWriter(new FileWriter(file, true));
            csvWriter.print(",");
            csvWriter.print(data);
            csvWriter.close();

        }
    } catch (IOException e) {
        e.printStackTrace();
    }

}
} 
```

SampleActivity.java

```
public class SampleActivity extends Activity {
CSVFileWriter csv;
StringBuffer filePath;
File file;

@Override
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    saveButton = (Button) findViewById(R.id.button1);
    editText = (EditText) findViewById(R.id.editText1);

    filePath = new StringBuffer();
    filePath.append("/sdcard/abc.csv");
    file = new File(filePath.toString());

    csv = new CSVFileWriter(file);

    saveButton.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {

            csv.writeHeader(editText.getText().toString());

        }
    });
}
} 
```

将此添加到清单文件中

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

# android - 如何只创建一次数据库，然后从中读取和写入多次，SQLite，OpenHelper，Android

> ID：15963247
> 
> 赞同：3
> 
> 时间：2013-04-12T04:46:23.383
> 
> 标签：android, database, sqlite, sqliteopenhelper

我创建了两个类，扩展 Activity 的主类和保存数据库及其方法的 Database 类。数据库类的部分代码如下所示。

SQLiteOpenHelper 类是数据库类中的一个嵌套类。我从网上找到的一个例子中得到它。这个嵌套类的内部是方法，

```
 db.execSQL(SCRIPT_CREATE_DATABASE); 
```

如何创建新数据库？如果我像这样从 Main 类实例化 Database 类：

```
Database db = new Database(this); 
```

该实例化是否也会自动实例化嵌套的 SQLiteOpenHelper 类？所以我不必明确地这样做。

但是对于这个如何创建数据库的例子，我很困惑。如果每次我实例化一个调用 addNewRow() 方法的新实例，如下所示：

```
 public void addNewRow(String label, int price){
  Database db = new Database(context);
     db.openToWrite();
     db.insertNewRow(checkBoxStatus, label, price);
     db.close();
 } 
```

然后在“新数据库（上下文）”调用中创建一个新数据库，接下来我将信息添加到列中。最后调用 db.close()，但是每次我调用上面显示的 addNewRow 方法时，它都会实例化一个新数据库，并且还会实例化 SQLiteOpenhelper 类，因此会创建一个新数据库。这意味着最后一个数据库已被覆盖，并且我添加的最后一行已丢失，这是正确的吗？

我如何使用这个数据库类只创建一次数据库，然后通过这样的多次调用从中读取和写入内容？

```
 Database db = new Database(context);
  db.openToWrite(); or db.openToRead();
 // read or update or create new row in database
 db.close(); 
```

数据库类：

```
 public class Database {

    public static final String MYDATABASE_NAME = "my_database";
    public static final String MYDATABASE_TABLE = "my_table";
    public static final int MYDATABASE_VERSION = 1;
    public static final String KEY_CHECKBOX_STATUS = "check_box_status";
    public static final String KEY_CHECKBOX_LABEL = "check_box_label";
    public static final String KEY_PRICE = "price"; 

  //create table MY_DATABASE (ID integer primary key, Content text not null);
    private static final String SCRIPT_CREATE_DATABASE =
     "CREATE TABLE " + MYDATABASE_TABLE + " (" + "ID INTEGER PRIMARY KEY AUTOINCREMENT, " +  
    "KEY_CHECKBOX_STATUS INTEGER, " + "KEY_CHECKBOX_LABEL TEXT, " + " KEY_PRICE INTEGER" + ");";

    SQLiteDatabase sqLiteDatabase;
    SQLiteHelper sqLiteHelper;
    Context context;

    public Database(Context c){
          context = c;
         }

      // after this all the rest of the methods for get and set of database values 
```

SQLiteOpenHelper 类的代码，嵌套在数据库类中：

```
 public class SQLiteHelper extends SQLiteOpenHelper {

          public SQLiteHelper(Context context, String name,
            CursorFactory factory, int version) {
           super(context, name, factory, version);
          }

          @Override
          public void onCreate(SQLiteDatabase db) {
           // TODO Auto-generated method stub
           db.execSQL(SCRIPT_CREATE_DATABASE);
          }

          @Override
          public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
           // TODO Auto-generated method stub

          }

         } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T05:08:58.783

是的，每次实例化一个数据库类时，都会实例化一个 SQLiteHelper。但是只有在数据库不存在时才会调用 SQLiteHelper onCreate。您可以通过向其中一个表中添加一个新列来测试这一点，然后尝试在该列中插入一个具有值的行，然后您的应用程序将崩溃。错误将是“没有这样的列”。然后，您需要清除数据或更改数据库版本或卸载应用程序以重新创建更改表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T04:55:36.800

每当您只想打开数据库时，都需要使用以下命令：

```
myDatabase = myOpenHelper.getWritableDatabase(); 
```

这不会创建一个新的数据库。它只会返回您可以在其上执行读/写操作的现有数据库的实例。

请参阅[此](http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/)内容以深入了解在 Sqlite 中创建数据库的工作原理。希望能帮助到你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T04:49:54.417

```
private static final String SCRIPT_CREATE_DATABASE =
     "CREATE TABLE IF NOT EXISTS " + MYDATABASE_TABLE + " (" + "ID INTEGER PRIMARY KEY AUTOINCREMENT, " +  
    "KEY_CHECKBOX_STATUS INTEGER, " + "KEY_CHECKBOX_LABEL TEXT, " + " KEY_PRICE INTEGER" + ");"; 
```

在创建表时使用此查询。如果表不存在，它将创建表。

# java - 我们可以同步字符串生成器吗？

> ID：15963250
> 
> 赞同：2
> 
> 时间：2013-04-12T04:46:31.730
> 
> 标签：java

Java 提供了三个字符串操作类`String,StringBuilder and StringBuffer`。其中`StringBuilder`不同步和`StringBuffer`同步。

所以我只想问有没有可能同步`StringBuilder`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T04:48:00.957

当然，只需在外部同步，无论是使用块还是在您从多个线程`synchronized`访问时手动进行。`StringBuilder`

但你为什么想要？你已经`StringBuffer`有了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T04:48:53.707

引用

> 此类 [StringBuilder] 提供了与 StringBuffer 兼容的 API，但不保证同步。此类设计用于在单个线程正在使用字符串缓冲区的地方（通常情况下）用作 StringBuffer 的替代品。在可能的情况下，建议优先使用此类而不是 StringBuffer，因为它在大多数实现下会更快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T04:48:22.143

如果知道 StringBuffer 是同步的，为什么还要同步 StringBuilder？

我想你可以扩展 StringBuilder，并创建一个调用非同步方法的同步方法

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T04:51:22.547

是的，您可以借助锁定机制（如`synchronized`方法或块或`Reentrantlock`.

`StringBuffer`已经存在，建议使用那个。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T04:56:39.037

当然..您可以同步`StringBuilder`，但`StringBuffer`已经存在于已同步的 API 中。

`StringBuffer`为数据操作方法（`insert()`等`append()`）以及数据读取方法（`indexOf()`、`subSequence()`等`toString()`）同步所有方法。

通过同步，只有您希望在使用时线程安全的特定代码块`StringBuilder`，我认为您可以获得一些性能。

# mysql - 错误 1044 (42000): 拒绝用户 ''@'localhost' 访问数据库 'db' - 我拥有所有权限还有什么？

> ID：15963259
> 
> 赞同：2
> 
> 时间：2013-04-12T04:46:53.047
> 
> 标签：mysql

我有一个用户，我以该用户身份登录。该用户执行以下操作：

创建数据库错误；

工作正常。

将所有关于错误。* 授予 'bugs@localost'；

而且我知道我没有授予访问权限（当前登录用户）。

我显示登录用户的权限（通过 select user(); 验证）
+-------------------------------- -------------------------------------------------- -----------------------------------------+
| 授予 user1@% |
+-------------------------------------------------- -------------------------------------------------- ------------+
| 将 *.* 上的所有特权授予 'user1'@'%' 由密码 ' *** ' 识别 |
| 将所有权限授予`aDatabase`.* TO 'user1'@'%' |
+-------------------------------------------------- -------------------------------------------------- ------------+
2 行（0.00 秒）

（我将登录的用户更改为user1，并将第二个所有权限更改为aDatabase，
我可以以root身份登录并授予权限就好了......

那么除了“所有特权”之外，我还需要什么特权？？！？？什么命令将它们授予我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-22T16:16:10.850

问题是执行有问题的语句

```
grant all on bugs.* to 'bugs@localost'; 
```

需要一个名为 GRANT OPTION 的权限，与您可能认为的未包含在所有权限中的相反。即使这样，用户也只能将特权授予他最初拥有的其他用户。请参阅[在线文档](http://dev.mysql.com/doc/refman/5.7/en/grant.html)。

要在您的第一个授权命令中包含 GRANT OPTION，请使用以下命令：

```
GRANT ALL PRIVILEGES ON *.* TO 'user1'@'%' WITH GRANT OPTION; 
```

我已从您的授权声明中删除了 IDENTIFIED BY PASSWORD 子句。

# algorithm - 如何使用堆栈和队列以非递归方式在 n 元素集上生成所有可能的子集？

> ID：15963262
> 
> 赞同：1
> 
> 时间：2013-04-12T04:47:04.557
> 
> 标签：algorithm, data-structures, stack, queue, push

* * *

这是来自 Michael T Goodrich 和 Robert Tamassia 的 Java 数据结构和算法的问题。这个怎么做？任何帮助表示赞赏。

这就是我的想法，如果我错了，请纠正我：

> 将元素存储在堆栈中。弹出第一个元素并将其存储在队列中，堆栈中的剩余元素形成一个子集。恢复堆栈，现在弹出第二个元素（队列中的第一个弹出，队列中的第二个弹出，然后从队列中推送）和堆栈中的剩余元素从另一个子集中。同样弹出第三个元素，然后弹出第四个。现在，轮到对两个元素和三个元素做同样的事情了吗？我是否误解了这个问题并将其延伸得太远？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-09-17T06:27:11.690

我已经定义了 ArrayStack() 和 ArrayQueue() 类

```
n=[1,2,3,4,5]
st=ArrayStack()
q=ArrayQueue()

q.enqueue(set())

for i in range(len(n)):
    st.push(n[i])

while st.is_empty()==False:
    cur_el=st.pop()
    print('cur',cur_el)
    for i in range(len(q)):
        a=q.dequeue()
        print('a',a)
        q.enqueue(a)
        b=a|{cur_el}
        q.enqueue(b)
        print('b',b)

while q.isempty()==False:
    x=q.dequeue()
    print(x)

OUTPUT
cur 5
a set()
b {5}
cur 4
a set()
b {4}
a {5}
b {4, 5}
cur 3
a set()
b {3}
a {4}
b {3, 4}
a {5}
b {3, 5}
a {4, 5}
b {3, 4, 5}
cur 2
a set()
b {2}
a {3}
b {2, 3}
a {4}
b {2, 4}
a {3, 4}
b {2, 3, 4}
a {5}
b {2, 5}
a {3, 5}
b {2, 3, 5}
a {4, 5}
b {2, 4, 5}
a {3, 4, 5}
b {2, 3, 4, 5}
cur 1
a set()
b {1}
a {2}
b {1, 2}
a {3}
b {1, 3}
a {2, 3}
b {1, 2, 3}
a {4}
b {1, 4}
a {2, 4}
b {1, 2, 4}
a {3, 4}
b {1, 3, 4}
a {2, 3, 4}
b {1, 2, 3, 4}
a {5}
b {1, 5}
a {2, 5}
b {1, 2, 5}
a {3, 5}
b {1, 3, 5}
a {2, 3, 5}
b {1, 2, 3, 5}
a {4, 5}
b {1, 4, 5}
a {2, 4, 5}
b {1, 2, 4, 5}
a {3, 4, 5}
b {1, 3, 4, 5}
a {2, 3, 4, 5}
b {1, 2, 3, 4, 5}
set()
{1}
{2}
{1, 2}
{3}
{1, 3}
{2, 3}
{1, 2, 3}
{4}
{1, 4}
{2, 4}
{1, 2, 4}
{3, 4}
{1, 3, 4}
{2, 3, 4}
{1, 2, 3, 4}
{5}
{1, 5}
{2, 5}
{1, 2, 5}
{3, 5}
{1, 3, 5}
{2, 3, 5}
{1, 2, 3, 5}
{4, 5}
{1, 4, 5}
{2, 4, 5}
{1, 2, 4, 5}
{3, 4, 5}
{1, 3, 4, 5}
{2, 3, 4, 5}
{1, 2, 3, 4, 5} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T05:41:39.907

只是半开玩笑：

1.  创建堆栈并忽略它；
2.  创建队列并忽略它；
3.  以长度为 N 的二进制形式输出（迭代地）从 0 到 (2^N)-1 的数字，前导零。

通过将每个 1 位解释为包含，将每个 0 位解释为排除，可以很容易地从生成的整数的二进制表示中生成任何所需的子集替代表示。

从技术上讲，这符合标准，因为它 (a) 创建了一个堆栈；(b) 创建队列；(c) 非递归地生成 N 个元素集的所有可能子集。对于迭代解决方案，堆栈和队列是严格冗余的，所以为什么在没有任何进一步指导/约束的情况下要求它们。

更新：

对输入集的随机访问可以通过使用队列来代替，将其视为循环缓冲区。（当然，它不能用于其他任何事情。）可以将标记元素添加到队列中以指示每个循环何时完成，但对于上述算法来说更自然的是一次处理 N 个元素， N 是预先知道的。当每个元素出队时，它会被处理（为当前子集添加或忽略）并再次入队。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T08:48:21.657

我想我有一个从这里被盗的合理解决方案：[http ://arstechnica.com/civis/viewtopic.php?f=20&t=96354&sid=e74a29103e9297050680afbba6b72f32&start=40](http://arstechnica.com/civis/viewtopic.php?f=20&t=96354&sid=e74a29103e9297050680afbba6b72f32&start=40)

所以这个想法是队列将保存子集，而您的堆栈将保存您的原始集合。空集是每个集的子集，因此我们用它初始化队列。然后，对于堆栈上的每个元素，我们将其弹出。现在对于队列中的每个子集，我们将该子集出列并入列两个副本：1）一个没有新元素（即与原始元素相同），2）一个有新元素。棘手的部分是跟踪何时需要弹出堆栈的下一个元素（即，当您完成当前元素时）。一种方法是检查整个 Queue 是否有匹配集（这意味着您已经添加了您构建的这个子集......所以停止）。但是一种更好/更清洁的方法是使用空集作为标记。

基本上你有典型的递归解决方案：

```
GenerateSubsets(Set set)
{
    if (set == Set.EmptySet)
        return new List<Set>(set);

    var elem = set.Remove();
    var subsets = GenerateSubsets(set);
    // Add all of thew subsets that contain elem (i.e. partition all subsets
    // by whether they contain elem or do not contain elem)
    subsets.AddRange(subsets.Map(subset => subset.Add(elem));

    return subsets;
} 
```

我们使用完全相同的想法，其中 Queue*迭代*构造`subsets`，原始集合存储在 Stack 中。

```
GenerateSubsets(Stack originalSetAsStack)
{
    var queue = new Queue { new Set() };
    while (!originalSetAsStack.IsEmpty)
    {
        var elem = originalSetAsStack.Pop();
        while (true)
        {
            var currSubset = queue.Dequeue();
            // This is key. This is how we know when to start
            // the next iteration!
            // This also assumes that any two empty sets are equal...
            if (currSubset == new Set())
            {
                break;
            }

            var subsetWithElem = currSubset.Clone();
            subsetWithElem.Add(elem);
            // Add back in current subset. This has to be first!
            // for our break to work above
            queue.Queue(currSubset);
            queue.Queue(subsetWithElem);
        }
    }

    return queue;
} 
```

说明为什么这个解决方案源于递归解决方案。观察：我们迭代地构造子集：

```
-Start with the empty set => ({})
-Take some element from the stack
-Now for each element in the Queue, enqueue two: one with the current
element, and one without => ({}, {elem})
-Now take the next element and do the same => ({}, {elem}, {nextElem}, 
{elem, NextElem})
-Now take the third element and do the same => ({}, {elem}, {nextElem}, 
{elem, nextElem}, {thirdElem}, {thirdElem, elem}, {thirdElem, nextElem}, 
{elem, nextElem, thirdElem})
-... 
```

# android - 在 android 4.0 中不支持 action_send email

> ID：15963264
> 
> 赞同：2
> 
> 时间：2013-04-12T04:47:26.440
> 
> 标签：android, android-intent, email-attachments

我已经通过android 中的**ACTION_SEND**发送了电子邮件。

*这里它是从android 2.2*成功发送的，但它不是从*android 4.1*发送的。

我使用了以下代码：

```
 ImageView share = (ImageView) findViewById(R.id.imageView5);
  share.setOnClickListener(new OnClickListener() {
  public void onClick(View v) {
    final CharSequence[] items = {"Facebook", "Twitter", "Email"};

  AlertDialog.Builder builder = new AlertDialog.Builder(SubCate.this);
  builder.setTitle("Share Via:");
  builder.setItems(items, new DialogInterface.OnClickListener() {
      public void onClick(DialogInterface dialog, int item) {
   if(items[item] == "Facebook"){
        Intent in = new Intent(SubCate.this, TestConnect.class);
        in.putExtra("Title", _Substring); 
    startActivity(in);    
    } 
  if(items[item] == "Twitter"){
        Intent in = new Intent(SubCate.this, TestConnect.class);
        in.putExtra("Title", _Substring); 
     startActivity(in);    
   } 
   if(items[item] == "Email"){
           Intent email = new Intent(Intent.ACTION_SEND);
           email.setType("message/rfc822");           
           email.putExtra(Intent.EXTRA_EMAIL, new String[]{ ""});           
           email.putExtra(Intent.EXTRA_SUBJECT, _Substring);
           email.putExtra(Intent.EXTRA_TEXT, _Description);
           email.putExtra(Intent.EXTRA_STREAM, Uri.parse("android.resource://"+ getPackageName() + "/" + R.drawable.ic_launcher));         
           startActivity(Intent.createChooser(email, "Choose an Email client :"));

         } 
          }
          }); 
        AlertDialog alert = builder.create();
  alert.show();
      }  
 }); 
```

为什么这些代码在*android 4.0*设备中不起作用。请给我这些解决方案..

在这里，我使用了警报列表对话框。

我没有在任何地方使用表面视图。如果我删除了这些线

**email.putExtra(Intent.EXTRA_STREAM, Uri.parse("android.resource://"+ getPackageName() + "/" + R.drawable.ic_launcher));**

意味着它的工作......主题和文本从android4.0发送到邮件......但我面临的问题只添加附加图像......请给我解决方案。

我收到以下错误：

```
 04-12 10:36:04.722: E/ViewRootImpl(1461): IllegalArgumentException locking surface
        04-12 10:36:04.722: E/ViewRootImpl(1461): java.lang.IllegalArgumentException
        04-12 10:36:04.722: E/ViewRootImpl(1461):   at android.view.Surface.lockCanvasNative(Native Method)
        04-12 10:36:04.722: E/ViewRootImpl(1461):   at android.view.Surface.lockCanvas(Surface.java:76)
        04-12 10:36:04.722: E/ViewRootImpl(1461):   at android.view.ViewRootImpl.draw(ViewRootImpl.java:1924)
        04-12 10:36:04.722: E/ViewRootImpl(1461):   at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1613)
        04-12 10:36:04.722: E/ViewRootImpl(1461):   at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2418)
         04-12 10:36:04.722: E/ViewRootImpl(1461):  at android.os.Handler.dispatchMessage(Handler.java:99)
         04-12 10:36:04.722: E/ViewRootImpl(1461):  at android.os.Looper.loop(Looper.java:137)
         04-12 10:36:04.722: E/ViewRootImpl(1461):  at android.app.ActivityThread.main(ActivityThread.java:4340)
         04-12 10:36:04.722: E/ViewRootImpl(1461):  at java.lang.reflect.Method.invokeNative(Native Method)
         04-12 10:36:04.722: E/ViewRootImpl(1461):  at java.lang.reflect.Method.invoke(Method.java:511)
         04-12 10:36:04.722: E/ViewRootImpl(1461):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
         04-12 10:36:04.722: E/ViewRootImpl(1461):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
         04-12 10:36:04.722: E/ViewRootImpl(1461):  at dalvik.system.NativeStart.main(Native Method) 
```

**编辑：**

```
 ImageView share = (ImageView) getActivity().findViewById(R.id.imageView5);
    share.setOnClickListener(new OnClickListener()
      {
          public void onClick ( View v )
          {

            final CharSequence[] items =
            {
                    "Facebook", "Twitter", "Email"
              };

           AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
              builder.setTitle("Share Via:");
              builder.setItems(items, new DialogInterface.OnClickListener()
             {
                public void onClick ( DialogInterface dialog , int item )
                {

                    if (items[item] == "Facebook")
                    {

                        onFacebookClick();
                    }
                    if (items[item] == "Twitter")
                    {

                        onClickTwitt();
                    }
                    if (items[item] == "Email")
                    {
                        class LongOperation extends AsyncTask<String, Void, String> {

                              protected String doInBackground(String... params) {

                                   Intent email = new Intent(Intent.ACTION_SEND);
                                   email.setType("message/rfc822");           

                        email.putExtra(Intent.EXTRA_EMAIL, new String[]
                        {
                                ""
                        });
                        email.putExtra(Intent.EXTRA_SUBJECT, _Title);

                        email.putExtra(Intent.EXTRA_STREAM, Uri.parse(_Image));  
                        startActivity(Intent.createChooser(email, "Choose an Email client :"));

                                return "Executed";
                          }      

                          protected void onPostExecute(String result) {
                                       }

                          protected void onPreExecute() {
                          }

                          protected void onProgressUpdate(Void... values) {
                          }

                        }
                        }
                }
            });

              AlertDialog alert = builder.create();
              alert.setCanceledOnTouchOutside(true);
              alert.show();
                  }
        });
    } 
```

我必须运行该应用程序并单击电子邮件意味着我没有得到任何东西......如果我点击 Facebook 意味着 Facebook 登录正在打开。但单击电子邮件意味着我没有收到电子邮件撰写消息并且没有收到任何错误？？？为什么 ？？？我的代码有什么问题...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T05:25:45.440

您使用**droid share**发送*电子邮件*.in droid share 主要部分是**.setType**（对于您使用**email/plain**的电子邮件）。试试这个，我相信它的作品。

```
// TODO Auto-generated method stub

Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
emailIntent.setType("email/plain");
emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, "SUBJECT_TEXT");
emailIntent.putExtra(Intent.EXTRA_TEXT, "EXTRA_TEXT");
emailIntent.putExtra(Intent.EXTRA_STREAM, Uri.parse("android.resource://"+ getPackageName() + "/" + R.drawable.ic_launcher));
startActivity(Intent.createChooser(emailIntent, "Send email using")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T05:35:36.157

## **您必须将资源文件复制到 sdcard 中，然后在电子邮件中附加它才能工作**

检查[这个](https://stackoverflow.com/q/6479253/1168654)和[这个](https://stackoverflow.com/q/12975662/1168654)链接以获取更多详细信息。

**[将资源复制到 sdcard android](https://stackoverflow.com/questions/8664468/copying-raw-file-into-sdcard)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T06:19:30.763

尝试在您的电子邮件项目 click 上使用以下代码。它可以帮助您。Tt 将发送图像和文本。您可以根据需要发送数据..

```
Bitmap bmp_cmpressed = Bitmap.createScaledBitmap(edited_image, 60,
                60, false);
        File file_image = saveBitmap(bmp_cmpressed);
        Uri uri = Uri.fromFile(file_image);
        Intent mail_image = new Intent(android.content.Intent.ACTION_SEND);
        mail_image.setType("plain/text");
        mail_image.putExtra(android.content.Intent.EXTRA_EMAIL,
                new String[] {});
        mail_image.putExtra(android.content.Intent.EXTRA_SUBJECT, "Image");
        mail_image.putExtra(android.content.Intent.EXTRA_STREAM, uri);
        mail_image.putExtra(android.content.Intent.EXTRA_TEXT, "Hello...");
        Intent intent_mail = Intent.createChooser(mail_image, "Send Mail");
        startActivity(intent_mail); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T05:23:01.413

这可能是由于您无法从较新版本的 android 中的任何 UI 活动进行网络操作。按照此链接使其工作。

```
private class LongOperation extends AsyncTask<String, Void, String> {

  @Override
  protected String doInBackground(String... params) {

       Intent email = new Intent(Intent.ACTION_SEND);
       email.setType("message/rfc822");           
       email.putExtra(Intent.EXTRA_EMAIL, new String[]{ ""});           
       email.putExtra(Intent.EXTRA_SUBJECT, _Substring);
       email.putExtra(Intent.EXTRA_TEXT, _Description);
       email.putExtra(Intent.EXTRA_STREAM, Uri.parse("android.resource://"+ getPackageName() + "/" + R.drawable.ic_launcher));         
       startActivity(Intent.createChooser(email, "Choose an Email client :"));

  }

        return "Executed";
  }      

  @Override
  protected void onPostExecute(String result) {
               }

  @Override
  protected void onPreExecute() {
  }

  @Override
  protected void onProgressUpdate(Void... values) {
  }
} 
```

# jquery - :nth-child() 选择器，多个 nth-child

> ID：15963267
> 
> 赞同：4
> 
> 时间：2013-04-12T04:47:49.480
> 
> 标签：jquery, css, jquery-selectors, css-selectors

我正在尝试在表头上获取点击事件，这很容易使用 jQuery。我希望单击事件在除第一个标题之外的所有标题上都处于活动状态。

我正在使用 CSS 的 :nth-child() 属性转义第一个标题。

这就是我正在做的-

```
$(function(){
$('th:nth-child(2 3 4 5)').click(function(){
$(this).CSS("font-weight","bolder");
});
}); 
```

我没有得到结果。有没有更好的方法可以自己做`:nth-child()`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-12T04:49:32.850

您可以使用`:not`.

```
$('th:not(:first-child)').click(function(){ 
```

**或者**

您可以使用`:gt(0)`

```
$('th:gt(0)').click(function(){ 
```

**评论回复**

对于奇数选择器，您可以使用`:odd jQuery`选择器。

### [`Official Document`](http://api.jquery.com/odd-selector/)

**例子**

```
$('th:not(:odd)').click(function(){ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T04:58:24.057

怎么样

```
$('th:nth-child(n+2)') 
```

# java - BroadcastReceiver - 每次用户开/关屏幕时如何触发服务

> ID：15963272
> 
> 赞同：2
> 
> 时间：2013-04-12T04:48:06.360
> 
> 标签：java, android, broadcastreceiver

*你好*

我想检查我的服务是否正在运行，如果服务正在运行，什么也不做。

但如果服务没有运行，请重新启动服务。

所以我做这样的事情。

`In Manifest.xml`

```
<receiver android:name="com.varma.android.aws.receiver.Receiver">
<intent-filter>
    <action android:name="android.intent.action.SCREEN_ON" />
    <category android:name="android.intent.category.DEFAULT" />
</intent-filter>
<intent-filter>
    <action android:name="android.intent.action.SCREEN_OFF" />
    <category android:name="android.intent.category.DEFAULT" />
</intent-filter>
</receiver> 
```

`Receiver.java`

```
public class Receiver extends BroadcastReceiver {

@Override
public void onReceive(Context context, Intent intent) {

    Log.i("aws", "Received...");

    if(isMyServiceRunning(context)) {
        Log.v("aws", "Yeah, it's running, no need to restart service");
    }

    else {
        Log.v("aws", "Not running, restarting service");
        Intent intent1 = new Intent(context, Service.class);
        context.startService(intent1);
    }

}

private boolean isMyServiceRunning(Context context) {
    ActivityManager manager = (ActivityManager) context.getSystemService(Context.ACTIVITY_SERVICE);
    for (RunningServiceInfo service : manager.getRunningServices(Integer.MAX_VALUE)) {
        if (Service.class.getName().equals(service.service.getClassName())) {
            return true;
        }
    }
    return false;
}

} 
```

**但是当我开/关屏幕时什么都没有发生**

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T05:59:19.990

您无法通过清单文件注册屏幕开/关广播，tt不起作用（需要探索原因）。通过代码将其注册到您的主要活动中

```
 ifilter=new IntentFilter();
    ifilter.addAction(Intent.ACTION_SCREEN_OFF);
    ifilter.addAction(Intent.ACTION_SCREEN_ON);
    registerReceiver(new Receiver(), ifilter); 
```

直到您的活动仍在内存中，您将在接收器中收到这些广播，我已经对其进行了测试并且能够接收广播。但是，如果您的活动完成，您将不会收到这些广播。**因此，使用 START_STICKY 功能在您的应用**中的某个 LocalService 中注册这些广播将解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T04:56:44.103

如果您希望您的服务保持正常运行，则无需执行此操作。只需让 onStartCommand 返回 START_STICKY。这将导致 Android 重新启动它停止的任何服务，只要它有足够的内存。

# c# - 如何将模型值传递给另一台服务器上存在的 Web 服务？

> ID：15963276
> 
> 赞同：0
> 
> 时间：2013-04-12T04:48:22.703
> 
> 标签：c#, web-services, asp.net-mvc-4

我是这个网络服务和云计算的新手。

我有一个 mvc4 项目。我创建了一个 Web 服务（ASMX）作为一个新项目。现在我已经将该 web 服务的引用添加到我的 mvc4 项目中。

**请注意，我的 MVC4 项目和 web 服务都是 2 个不同的项目。我需要在两个项目之间建立连接，以便我可以将模型参数传递给该 Web 服务并从 Web 服务中获取响应。**

我唯一要做的就是将模型值传递给那个 Web 服务。

我不知道该怎么做... ????

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T04:58:08.790

只需使用“添加服务引用”来引用您的 Web 服务，就像它是外部服务一样。

有关详细信息，请参阅“[如何使用 Web 服务](http://johnwsaunders3.wordpress.com/2009/05/17/how-to-consume-a-web-service/)”。

# osx-lion - mac 10.8 上的性能 API

> ID：15963277
> 
> 赞同：1
> 
> 时间：2013-04-12T04:48:27.060
> 
> 标签：osx-lion, papi

有人尝试在 mac os 10.8 上安装 papi(performance API) 5.1.0 版吗？我在 make 命令上遇到以下错误。

```
zero_attach.c: In function ‘main’:
zero_attach.c:84: error: ‘PTRACE_ATTACH’ undeclared (first use in this function)
zero_attach.c:84: error: (Each undeclared identifier is reported only once
zero_attach.c:84: error: for each function it appears in.)
zero_attach.c:84: warning: passing argument 4 of ‘ptrace’ makes integer from pointer without a cast
zero_attach.c:117: error: ‘PTRACE_CONT’ undeclared (first use in this function) 
```

INSTALL.txt 在 mac os 上什么也没说。只是说它可以安装没有程序所以我只尝试了提到的标准程序。

在 papi -> platform supported 的主页上，它没有说明有关 mac os 的任何内容。

我需要为此安装一些驱动程序吗？任何帮助都会很棒..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-30T06:06:23.953

我刚刚在 OS X v 10.9.1 上安装了最新版本的 PAPI (5.3.0)。按照安装文件中的说明也可以解决问题！

```
wget http://icl.cs.utk.edu/projects/papi/downloads/papi-5.3.0.tar.gz
tar -xvf papi-5.3.0.tar.gz
cd papi-5.3.0/src
./configure
make 
```

我遇到的唯一问题是未定义的 malloc.h，这很容易通过制作一个虚拟 malloc.h 存根来解决

```
touch malloc.h 
```

或者复制一个好的 malloc.h 到 src 目录

```
cp /System/Library/Frameworks/Kernel.framework/Versions/A/Headers/sys/malloc.h . 
```

那么你应该没问题：

```
make
./run_tests.sh
make install 
```

快乐的表现计数！

ps 我用 gcc-4.7.3 （随自制软件安装）做到了这一点。

# php - 将 MySQL 表值分配给变量的更简单方法

> ID：15963281
> 
> 赞同：1
> 
> 时间：2013-04-12T04:48:38.253
> 
> 标签：php, mysql

我想知道是否有一种更简单的方法可以将所有不同的列分配给一个变量。我有超过 70 个来检查用户是否获得了特定的歌曲。这是代码的缩短版本。我还没有完成所有的歌曲，我想知道是否有更简单的方法。

```
$results = mysqli_query($con,"Select * FROM users WHERE user_name ='$username'");
while ($row = mysqli_fetch_array($results))
{
$userpoints = $row['points'];
$intro = $row['intro'];
$fightingfires = $row['fightingfires'];
$may = $row['may'];
$crowdedstreet = $row['crowdedstreet']; 
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T04:55:37.927

是的，使用 php extract() [http://php.net/manual/en/function.extract.php](http://php.net/manual/en/function.extract.php)

这是一个简单的例子：

```
$results = mysqli_query($con,"Select * FROM users WHERE user_name ='$username'");
while ($row = mysqli_fetch_array($results))
{
extract($row);
}
// This will give you variables for each item
// so you will get $points for what would have been $row['points'], etc. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T04:53:08.550

编辑：查看其他人的示例，使用`extract()`which 与我在这里的 foreach 循环类似：

尝试使用可变变量：

```
while ($row = mysqli_fetch_array($results))
{
    foreach ($row as $column => $value) {
        $$column = $value;
    }
} 
```

对于每一行，本质上您将加载与列名同名的变量。这就像做：

```
$points = $row['points'];
$intro = $row['intro'];
$fightingfires= $row['fightingfires'];
$may = $row['may'];
$crowdedstreet= $row['crowdedstreet']; 
```

..ETC

基本上，“points”是第一个键的名称，而变量的名称为“points”，因此您得到 variable `$points`。

[http://php.net/manual/en/language.variables.variable.php](http://php.net/manual/en/language.variables.variable.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T04:54:05.717

就像做一样简单

```
extract($row); 
```

你的循环看起来像

```
while ($row = mysqli_fetch_array($results))
{
    extract($row);
    echo $intro;
} 
```

[PHP 手册](http://php.net/extract)

# java - 如何停止执行计划数据库备份的守护线程？

> ID：15963303
> 
> 赞同：0
> 
> 时间：2013-04-12T04:50:12.900
> 
> 标签：java, multithreading, daemon, start-stop-daemon

我编写了一个非常简单的命令行程序，它使用 mysqldump 以指定的时间间隔转储数据。
我希望它在我运行程序并断开 putty ssh 连接后运行。
但是一旦我退出 ssh 连接，程序就会关闭。

我想即使在我通过使用守护线程与 ssh 断开连接后，我也可以让我的程序运行，但我担心无法找到并停止不必要的重复守护线程。

我描述的场景是......
1.我使用腻子登录服务器。
2\. 打开自动备份程序。
3.我退出putty连接。
--- 守护进程正在运行
4\. 希望当我再次登录服务器时，如果需要，我有办法停止自动备份程序。

我无法选择 Cron 作业和 DBMS 特定方法。
我想学习如何完成上述工作，并在适合的情况下使用它，而不仅仅是数据库备份。
有什么好主意吗？:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T04:54:15.667

**简而言之**，您必须以一种特殊的方式启动您的程序，并且您有（至少）两个选择：`nohup`或`screen`.

现在让我们讨论一下为什么以及如何工作。

* * *

## `nohup`

Java 的*守护线程*不是您要寻找的，它们与问题无关。您可以使用普通线程（甚至是单线程 java 程序）。您只需要更改启动 java 程序的方式。

我有许多在一堆服务器上作为“守护进程”运行的可执行 jar，我制作了一个简单的启动脚本来准备环境并可以在不停止 SSH 连接的情况下终止它。主要部分是如何调用 JVM：您使用**nohup**。

```
nohup java -jar myfile.jar > stdout.log & 
```

来自 nohup 的男人，

> nohup - 运行一个不受挂断影响的命令，输出到非 tty

因此，当您终止 SSH 连接时，它会将 SIGHUP 发送到它启动的所有进程，这将在您观察时终止它们。但是，使用`nohup`，您的进程将不受它的影响。

另外，请注意我将标准输出重定向到一个名为`stdout.log`. 这样做是为了让您可以看到您的程序写入 STDOUT 的任何内容（通常是一些对调试有用的日志信息）。

要终止你的程序，你可以使用`jps`列出`PID`你的进程（比如它`123`），然后调用`kill 123`. 请注意，要使其正常工作，您的程序需要正确处理这种关闭（这涉及添加一个关闭挂钩，`Runtime.getRuntime().addShutdownHook(...)`该挂钩将终止您启动的所有线程）。

如果由于某种原因（错误，或者您没有实现正常关闭），程序在发出`kill`命令（发送进程 a `SIGTERM`）后不会终止，您可以更改它发送到的信号`SIGKILL`with `kill -9 123`，这将简单地破坏进程。请注意，这可能与电源故障一样危险（即，假设您在`try`a 块的中间`try {} finally {}`——您的`finally`块将不会执行！）。

* * *

## `screen`

有一个替代方案，即使用`SCREEN`. 使用它，您可以启动一个不受关闭影响的 shell，并且可以在许多连接之间共享。要使用它，请连接到您的服务器，然后：

```
screen -R 
```

将启动一个新的 shell，您可以在其中正常运行您的 java 程序：

```
java -jar myfile.jar 
```

要使其进入后台，只需按`ctrl+a ctrl+d`。要将其带回前面，只需`screen -R`再次执行即可。如果你想终止你的程序，你可以通过`screen`再次进入会话并按下来完成`ctrl+c`（如果你的java程序正确地处理了这种关闭）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T04:59:37.680

[TimerTask](http://www.mkyong.com/java/how-to-run-a-task-periodically-in-java/)和[Quartz Scheduler](http://quartz-scheduler.org/documentation/quartz-2.x/tutorials/)是计划任务的两种可能性，从最简单到最复杂。两者都提供取消/删除计划作业的选项。

# c++ - 图的平均最优路径

> ID：15963306
> 
> 赞同：1
> 
> 时间：2013-04-12T04:50:29.700
> 
> 标签：c++, algorithm, graph, average

我需要找到一个图的平均最优路径。我决定使用 Floyd-Warhsall 的算法来获得所有可能的最佳长度，但所有条目都被零覆盖。有想法该怎么解决这个吗？

原始矩阵：

```
0 0 0 0 1 0
0 0 1 0 4 0
0 1 0 0 0 2
0 0 0 0 0 1
1 4 0 0 0 2
0 0 2 1 2 0 
```

平均代码：

```
double average = 0;
vector<vector<double> > p;
p = matrix;

for(int k = 0; k < vertices; k++)
{
    for(int i = 0; i < vertices; i++)
    {
        for(int j = 0; j < vertices; j++)
        {
            if((p[i][k] + p[k][j] < p [i][j]))
            {
                p[i][j] = p[i][k]+p[k][j];
            }
        }
    }
}

double sum = 0;

for(int i = 0;i < vertices; i++)
{
    for(int j = 0; j < vertices; j++)
    {
        sum += p[i][j]; //adds up all entries
    }
}

double fact = 0;
for(int i = 1; i < vertices; i++)
{
    fact += i;
}
average = sum/fact;

return average; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T05:03:59.797

好吧，全零的输出是正确的。

维基百科文章说你的矩阵应该像这样初始化：

```
 0  inf inf inf  1  inf
inf  0   1  inf  4  inf
inf  1   0  inf inf  2
inf inf inf  0  inf  1
 1   4  inf inf  0   2
inf inf  2   1   2   0 
```

因此，在您的初始化步骤中，只需将它们设置为 INT_MAX。

你得到零，因为当节点之间的权重为零时，这当然是微不足道的解决方案！

编辑：实际上，INT_MAX 是一个糟糕的选择，因为您要将它们中的两个加在一起。那是溢出。我想将它们设置为 INT_MAX/2 是安全的。除非您计划权重大于 INT_MAX/2。

```
#include <cfloat>

for(int i = 0;i < vertices; i++)
{
    p[i][i] = 0; // diagonal should be initialized to zero.
    for(int j = 0; j < vertices; j++)
    {
        if ( i != j && p[i][j]==0)
        {
            p[i][j] = DBL_MAX / 2.0; // As close to infinity as we'll get
        }
    }
} 
```

# c# - 日语字符串文字和 Visual Studio 2010 和错误 CS1009：无法识别的转义序列

> ID：15963308
> 
> 赞同：0
> 
> 时间：2013-04-12T04:50:52.073
> 
> 标签：c#, msbuild

我有一个包含日语字符串文字的视觉工作室项目。该项目可以在日文系统（日文 Windows XP）和英文 Visual Studio 2010 IDE 中完全构建。

但是如果我在英文系统（英文 Windows XP）和英文 Visual Studio 2010 IDE 中构建项目，我会收到很多“*错误 CS1009：无法识别的转义序列*”错误。

这可能是什么原因？我们可以将 Visual Studio 2010 配置为将项目解释为基于 UTF8 吗？

我到处寻找，似乎找不到解决方案。

示例代码：

```
try
{
    //ƒRƒ“ƒo[ƒg‘ÎÛ‚Ìƒtƒ@ƒCƒ‹ƒŠƒXƒg•\Ž¦DlgŒÄ‚Ño‚µ&amp;ˆ—ŽÀs
    frmSelFiles = new frmSelectFile(strLoadPath, strSavePath);
    frmSelFiles.ShowDialog(this);
}
catch(ConvertException ce)
{
    throw ce;
}
catch(Exception e2)
{
    // the gibberish strings are actually Unicode characters
    // the CSC1009 error occurs here: \Ž
    ConvertException ce = new ConvertException(e2,"ƒtƒ@ƒCƒ‹‘I‘ðƒ_ƒCƒAƒƒOƒ{ƒbƒNƒX‚ð•\Ž¦‚Å‚«‚Ü‚¹‚ñB");
    throw ce;
}
finally
{
    //ƒŠƒ\[ƒX‰ð•ú
    if(frmSelFiles != null)
    {
        frmSelFiles.Dispose();
    }
} 
```

**解决方案**：

我能够通过更改环境的默认语言环境设置来解决此问题。对于 WinXP 的情况，我们可能需要设置“Language for Non-Unicode Programs”。在 Win Server 2008 R2 中，我更改了默认的系统区域设置。

MSBuild 或 MS Visual Studio (2010) 似乎采用了“非 Unicode 程序语言”设置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T05:32:10.420

看起来您有以默认日语编码保存的文件，因此当区域设置（或“非 Unicode 区域设置”）设置为匹配编码时它们可以正常工作。

据我所知，无法配置 C# 编译器和 VS 以非默认编码打开此类文件。

您的选择：

*   将项目将要打开的所有机器配置为使用与 JA-JP Win XP 相同的区域设置/语言
*   使用 Unicode 编码（Unicode 或 Utf8 与 BOM）之一重新保存所有文件。如果文件很多，应该能够编写小脚本/C# 程序以正确编码打开文件并以 UTF8 保存。
*   从代码中删除所有非 ASCII 字符串并将它们移动到资源中。

# ruby - PageObject“等待元素”方法不起作用

> ID：15963310
> 
> 赞同：0
> 
> 时间：2013-04-12T04:50:53.153
> 
> 标签：ruby, cucumber, selenium-webdriver, page-object-gem

我正在使用 cucumber、selenium-webdriver 和 page-object gem 进行测试自动化。当我尝试运行简单的测试黄瓜时，会遇到以下错误：

```
 Scenario: Going to billing                # features/test.feature:10
    When I click 'Платные услуги'           # features/step_definitions/test_steps.rb:13
      Unable to locate element: {"method":"link text","selector":"Платные услуги"} (Selenium::WebDriver::Error::NoSuchElementError)
      [remote server] file:///tmp/webdriver-profile20130412-21410-z4p1ez/extensions/fxdriver@googlecode.com/components/driver_component.js:8405:in `FirefoxDriver.prototype.findElementInternal_'
      [remote server] file:///tmp/webdriver-profile20130412-21410-z4p1ez/extensions/fxdriver@googlecode.com/components/driver_component.js:8414:in `FirefoxDriver.prototype.findElement'
      [remote server] file:///tmp/webdriver-profile20130412-21410-z4p1ez/extensions/fxdriver@googlecode.com/components/command_processor.js:10421:in `DelayedCommand.prototype.executeInternal_/h'
      [remote server] file:///tmp/webdriver-profile20130412-21410-z4p1ez/extensions/fxdriver@googlecode.com/components/command_processor.js:10426:in `DelayedCommand.prototype.executeInternal_'
      [remote server] file:///tmp/webdriver-profile20130412-21410-z4p1ez/extensions/fxdriver@googlecode.com/components/command_processor.js:10366:in `DelayedCommand.prototype.execute/<'
      ./features/pages/job_main_page.rb:38:in `go_to_billing'
      ./features/step_definitions/test_steps.rb:14:in `/^I click 'Платные услуги'$/'
      features/test.feature:11:in `When I click 'Платные услуги'' 
```

这是黄瓜的特点：

```
Scenario: Going to billing
    When I click 'Платные услуги'
    Then I should see "Коммерческие услуги" 
```

测试所在的步骤定义：

```
When(/^I go to billing$/) do
    @job_myroom_billing = @job_myroom.billing_element.when_visible.go_to_billing
end 
```

和页面对象：

```
class BasePage
    include PageObject
    include RSpec::Matchers
end

class JobMyroom < BasePage 
    link :billing, link: 'Платные услуги'

    def go_to_billing
        billing
        JobMyroomBilling.new @browser
    end
end

class JobMyroomBilling < JobMyroom    
     #some code
end 
```

怎么了？司机不要等待元素的存在

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T14:12:08.853

我认为 Sheg 在这里给出了一些很好的建议，尽管我倾向于这样做略有不同：

```
wait_until do
  billing_element.visible?
end 
```

您可以做的另一件事非常相似，就是用以下代码替换您方法中的代码：

```
def go_to_billing
  billing_element.when_present.click
  JobMyroomBilling.new @browser
end 
```

在这种情况下，我们一直等到链接出现，当它出现时，`when_present`方法返回元素，我们只需单击它。

我可能建议的另一件事是使用 watir-webdriver 作为驱动程序而不是 selenium-webdriver。watir-webdriver 建立在 selenium-webdriver 之上，但似乎在等待项目实际加载到 DOM 上的处理要好得多。如果您的链接是使用 Ajax 动态添加的，那么您将不得不编写一些代码来等到它存在，然后才能真正与它交互。要使用其他 gem，您唯一需要做的就是将`Before`块中的代码更改为：

```
Before do
  @browser = Watir::Browser.new :firefox
end 
```

我要给你的另一个指针是不要让一个页面对象返回下一页对象的实例。我在这里吃我自己的话，因为几年前我就是这样做的，但随着时间的推移我发现这是一种脆弱的方法。相反，我会使用`PageObject::PageFactory`来管理正确页面的创建，当您有一个通用步骤时，您可以简单地使用`@current_page`实例变量。

我要给你的最后一个指针是从你的页面对象中删除断言。我会让页面对象简单地提供抽象并在步骤定义中执行所有验证。这是一个更清晰的关注点分离，并且随着时间的推移会使您的测试更容易维护。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T13:46:45.590

要么你可以使用 java 的 sleep 方法和 try catch。或隐式等待 selenium webdriver。Webdriver 从不等待元素显示......基本上你需要延迟。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T05:29:17.313

页面对象 when_visible 方法是为了等待 Ajax 事件完成加载，如此处所述[https://github.com/cheezy/page-object/wiki/Ajax-Calls](https://github.com/cheezy/page-object/wiki/Ajax-Calls)。

如果 webdriver 试图在链接元素完全呈现之前单击它，并且与 Ajax 无关，请考虑等到该元素先用 webdriver 显示。例如：

```
wait.until { driver.find_element(:link_text => "Платные услуги").displayed? }
@job_myroom.go_to_billing 
```

您可以（强烈推荐）通过在实例化 webdriver 后立即调用以下命令对所有元素隐式执行此操作：

```
driver.manage.timeouts.implicit_wait = 3 
```

此外，在很多情况下，我发现通过 href 定位链接的性能比 link_text 好很多。也许这些可以解决您的元素计时问题。

# xcode - iPad弹出窗体

> ID：15963315
> 
> 赞同：0
> 
> 时间：2013-04-12T04:51:14.833
> 
> 标签：xcode, forms, popup

我有带有主视图控制器的 iPad 应用程序，顶部有一个导航栏。我想在导航栏上创建一个登录按钮，它应该打开一个包含用户名、密码、一个附加字段和一个登录按钮的弹出视图。单击登录按钮将关闭弹出窗口并将文本字段中的信息传递回主视图控制器。

我一直试图在网上找到类似的东西，但没有运气。

有谁知道这样做的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T06:39:04.737

你应该看看[UIPopoverController](http://developer.apple.com/library/ios/ipad/#documentation/uikit/reference/UIPopoverController_class/Reference/Reference.html)

这是您初始化和显示它的方式：

```
UIPopoverController *myPopover = [[UIPopoverController alloc] initWithContentViewController:myForm];
[myPopover presentPopoverFromRect:button.frame inView:self.view permittedArrowDirections:UIPopoverArrowDirectionsAny animated:YES]; 
```

要从您那里取回数据，`myForm`您可能需要使用[委托](https://stackoverflow.com/questions/626898/how-do-i-create-delegates-in-objective-c/)。

```
myForm.delegate = self; //before presenting de popover 
```

# python - 使用 eventFilters 时出现 QTextEdit 光标问题

> ID：15963316
> 
> 赞同：3
> 
> 时间：2013-04-12T04:51:20.610
> 
> 标签：python, qt, pyqt, pyqt4, pyside

我正面临 QTextEdit 的问题。我正在为 QTextEdit 使用 eventFilters。当我在 QTextEdit 中按下小键盘 (0-9) 中的键时，它将自动完成连接该数字的句子。例如

![在此处输入图像描述](https://i.stack.imgur.com/3645J.jpg)

一切正常，但是当我键入一个句子并在小键盘中按数字 3 时，与之相关的文本会在 QTextEdit 中填充，但光标会移动到主页。实际上它应该是句子结束的地方。

![在此处输入图像描述](https://i.stack.imgur.com/qvXHI.jpg)

谁能指导我如何处理这个问题。

谢谢和问候，
Sudeepth Patinjarayil。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T21:43:30.220

您只需将光标移动到文档的末尾，查看此示例：

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-

from PyQt4 import QtGui, QtCore

class MyWindow(QtGui.QTextEdit):
    def __init__(self, parent=None):
        super(MyWindow, self).__init__(parent)

        self.setPlainText("Hello!")

        cursor = self.textCursor()
        cursor.movePosition(QtGui.QTextCursor.End, QtGui.QTextCursor.MoveAnchor)

        self.setTextCursor(cursor)

if __name__ == "__main__":
    import sys

    app = QtGui.QApplication(sys.argv)
    app.setApplicationName('MyWindow')

    main = MyWindow()
    main.show()

    sys.exit(app.exec_()) 
```

# fine-uploader - Fineuploader 在 IE9 中上传文件的时间太长

> ID：15963329
> 
> 赞同：1
> 
> 时间：2013-04-12T04:52:18.393
> 
> 标签：fine-uploader

您好我正在使用fineuploader 3.3.0 版本。
我正面临着问题`fineuploader in IE9`。因为好的上传器不支持 ie9 中的 sizeLimit。
我正在使用简单的 contentlength 检查服务器端的文件大小 if `(this.Request.Files[0].ContentLength > 5242880)`.

但需要 1-2 分钟才能得到此响应。此外`1.4 MB file`，上传时间太长。

有人可以让我知道是什么原因造成的吗，以下是我正在使用的 Fineuploader 代码：-

```
 $('#restricted-fine-uploader').fineUploader({
        request: {
            endpoint: '/apm/api/job/UploadDocument/?category=' + JobDocuments.category + '&mode=' + JobDocuments.forceupload + '&jobid=' + job_manager_details.jobId
        },
        autoUpload: true,
        text: {
            uploadButton: 'Upload File'
        },
        multiple: false,
        validation: {
            allowedExtensions: ['doc', 'docx', 'xls', 'xlsx', 'pdf'],
            sizeLimit: 5242880,
            itemLimit: 1
        },
        showMessage: function (message) {
            // Using Twitter Bootstrap's classes and jQuery selector and method
            $('#restricted-fine-uploader').append('<div class="alert alert-error">' + message + '</div>');
        }
    }).bind('submit', function (event, id, fileName) {
        $('#displaymessage').hide();
        $('li. qq-upload-fail').hide();
        job_manager_details.isuploading = 1;
        //            fileCount++;

    }).bind('complete', function (event, id, fileName, responseJSON) {
        $('li. qq-upload-fail').hide();
        $('#displaymessage').hide();
        job_manager_details.isuploading = 0;
        if (responseJSON.success) {
            //                fileCount--;
            ShowJobDocuments();
            //                if (fileCount == 0 && !$('div.alert-error').html()) {
           $('#jobDocumentDialog').dialog("close");
            //                }
        }
    }) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-30T14:59:03.490

我刚遇到同样的问题，又发现了一条线索。

当网络是 NAT 时，VM 非常慢（WinXP/IE8），但一旦切换到桥接，它就变得非常快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T14:21:26.153

上传速度不应受到 Fine Uploader 的任何明显影响。Fine Uploader 对非文件 API 浏览器（例如 IE9 和更早版本）所做的所有工作都是提交`<form>`包含文件和相关参数的文件。如果您注意到上传时间很慢，则很可能是您的环境中的某些问题是问题的原因。您尚未提供有关您的环境的任何其他信息，因此我无法在这方面提供任何建议。

您可能已经知道，由于缺乏文件 API 支持，IE9 及更早版本的客户端无法进行文件大小检查。

# android - Android 捕获 Surface Flinger

> ID：15963334
> 
> 赞同：0
> 
> 时间：2013-04-12T04:52:44.617
> 
> 标签：android, surfaceview, framebuffer, surfaceflinger

许多设备不会将最终显示数据存储在帧缓冲区中，因此屏幕捕获方法不适用于这些设备。

我想知道如何从 Surface Flinger 获得最终的成分数据？

如果我们可以实现从表面抛掷器的捕获，它可以帮助我们在没有帧缓冲区的情况下检索视频和相机预览。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-30T05:08:00.907

您不需要或不需要最终合成的视频数据。要录制相机预览，您只需将其输入到`MediaCodec`（需要 Android 4.1，API 16）。在 Android 4.3 (API 18) 中，通过对类的一些调整`MediaCodec`和引入，这变得更加容易`MediaMuxer`。有关示例，请参阅[此页面](http://bigflake.com/mediacodec/)，尤其是`CameraToMpegTest`.

可以截取合成画面；例如，系统 UI 会为最近的应用程序菜单抓取屏幕截图，而 DDMS/ADT 可以捕获屏幕截图以进行调试。但是，您需要适当的权限才能执行此操作，而普通应用程序没有。限制使某些网络钓鱼计划更难。

在任何情况下，您都无法捕获受 DRM 保护的视频。甚至 SurfaceFlinger 也看不到这一点。

在 shell 中，您可以使用`screencap`命令（参见[源代码](https://android.googlesource.com/platform/frameworks/base/+/jb-mr2-release/cmds/screencap/screencap.cpp)）。

# java - Java Swing，尝试用图像图标复选框替换 JTable 中的布尔复选框

> ID：15963338
> 
> 赞同：2
> 
> 时间：2013-04-12T04:53:00.340
> 
> 标签：java, swing, jtable, jcheckbox, tablecellrenderer

所以我有一个带有复选框的 JTable。我希望复选框在“选中”时包含一个图像，而在“未选中”时包含另一个图像（即显示图像而不是选中或未选中的框）。有没有办法做到这一点？我试过用返回带有 ImageIcon 的 JLabel 的 TableCellRenderer 来愚弄，但它并不是很有效。

**更具体地说，当框中检查或未选中框时，将有正确的图像，但是当用户更改检查框状态（鼠标向下时）时，将出现原始检查/未选中的图像**

这是我试过的 TableCellRenderer（我也用 JPanel 试过，但这也无效

```
public class CrassusEventTableCellEyeRenderer extends JCheckBox implements TableCellRenderer {

    static Icon greyEye;
    static Icon blackEye;

    {//STATIC CODE BLOCK
        try {
            greyEye = new ImageIcon(ImageIO.read(new File("icons/shittyTest.png")));

            blackEye = new ImageIcon(ImageIO.read(new File("icons/blackEye.png")));
        } catch (IOException e) {
            greyEye = null;
            blackEye = null;
        }
    }

    public CrassusEventTableCellEyeRenderer(){
        super();
        this.addItemListener(new IsCheckedItemListener());
        setIcon(greyEye);
    }

//commented out code that I have tried in place of the IsCheckedItemListener
    /*
    @Override
    public void setSelected(boolean sel){
        super.isSelected();
        if(sel)
            setIcon(blackEye);
        else
            setIcon(greyEye);
    }
    */

    public class IsCheckedItemListener implements ItemListener{

        @Override
        public void itemStateChanged(ItemEvent e) {
            if(isSelected())
                setIcon(blackEye);
            else
                setIcon(greyEye);
        }

    }

    @Override
    public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
        System.out.println("value: "+value+", row: "+row+", column: "+column);
        if(value instanceof Boolean){
            setSelected(((Boolean) value).booleanValue());
        }
        return this;
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T05:27:02.117

你需要提供你自己的定制`TableCellRenderer`，能够提供你想要的功能......

![在此处输入图像描述](https://i.stack.imgur.com/nakaT.png)

```
import java.awt.BorderLayout;
import java.awt.Component;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.io.IOException;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.imageio.ImageIO;
import javax.swing.ImageIcon;
import javax.swing.JCheckBox;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.table.AbstractTableModel;
import javax.swing.table.TableCellRenderer;
import javax.swing.table.TableModel;

public class TestTableRenderer {

    public static void main(String[] args) {
        new TestTableRenderer();
    }

    public TestTableRenderer() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        public TestPane() {
            TableModel model = new AbstractTableModel() {

                @Override
                public int getRowCount() {
                    return 2;
                }

                @Override
                public int getColumnCount() {
                    return 1;
                }

                @Override
                public Object getValueAt(int rowIndex, int columnIndex) {
                    return rowIndex == 0 ? true : false;
                }

                @Override
                public Class<?> getColumnClass(int columnIndex) {
                    return Boolean.class;
                }

            };
            JTable table = new JTable(model);
            table.setDefaultRenderer(Boolean.class, new CustomBooleanCellRenderer());
            setLayout(new BorderLayout());
            add(new JScrollPane(table));
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }
    }

    public class CustomBooleanCellRenderer extends JCheckBox implements TableCellRenderer {

        private ImageIcon sad;
        private ImageIcon happy;

        public CustomBooleanCellRenderer() {
            try {
                happy = new ImageIcon(ImageIO.read(getClass().getResource("/Happy.png")));
                sad = new ImageIcon(ImageIO.read(getClass().getResource("/Sad.png")));
            } catch (IOException ex) {
                Logger.getLogger(TestTableRenderer.class.getName()).log(Level.SEVERE, null, ex);
            }
        }

        @Override
        public void setSelected(boolean selected) {
            super.setSelected(selected); 
            if (selected) {
                setIcon(happy);
            } else {
                setIcon(sad);
            }
        }

        @Override
        public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
            if (value instanceof Boolean) {
                boolean selected = (boolean) value;
                setSelected(selected);
            }
            return this;
        }
    }
} 
```

现在，您可以轻松地使用`JLabel`or `DefaultTableCellRenderer`，检查/的`Object`值并相应地设置图标...但是其中的乐趣在哪里；）`true``false`

**更新以包括编辑器...**

我稍微重新排列了代码以包含一个单元格编辑器......

```
public class CustomCheckBox extends JCheckBox {

    private ImageIcon sad;
    private ImageIcon happy;

    public CustomCheckBox() {
        try {
            happy = new ImageIcon(ImageIO.read(getClass().getResource("/Happy.png")));
            sad = new ImageIcon(ImageIO.read(getClass().getResource("/Sad.png")));
        } catch (IOException ex) {
            ex.printStackTrace();
        }
    }

    @Override
    public void setSelected(boolean selected) {
        super.setSelected(selected);
        if (selected) {
            setIcon(happy);
        } else {
            setIcon(sad);
        }
    }

}

public class CustomBooleanCellRenderer extends CustomCheckBox implements TableCellRenderer {

    @Override
    public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
        if (value instanceof Boolean) {
            boolean selected = (boolean) value;
            setSelected(selected);
        }
        return this;
    }

}

public class CustomBooleanCellEditor extends AbstractCellEditor implements TableCellEditor {

    private CustomCheckBox editor;

    public CustomBooleanCellEditor() {
        editor = new CustomCheckBox();
    }

    @Override
    public Component getTableCellEditorComponent(JTable table, Object value, boolean isSelected, int row, int column) {
        if (value instanceof Boolean) {
            boolean selected = (boolean) value;
            editor.setSelected(selected);
        }
        return editor;
    }

    @Override
    public Object getCellEditorValue() {
        return editor.isSelected();
    }

} 
```

您可以以与渲染器类似的方式应用...

```
table.setDefaultEditor(Boolean.class, new CustomBooleanCellEditor()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T04:58:44.770

您将不得不使用

```
isSelected 
```

查看该框是否被选中的方法，您可以使用 if 语句，如果选中，则使用

```
checkBox.setIcon(myIcon); 
```

请注意，您也可以使用 ItemListener 来完成了解该框是否被选中的任务。

使用以下资源回答的问题： [http ://www.roseindia.net/java/example/java/swing/CustomizedCheckBox.shtml](http://www.roseindia.net/java/example/java/swing/CustomizedCheckBox.shtml)

[如何检查 JCheckBox 是否被选中？](https://stackoverflow.com/questions/3599908/how-to-check-that-a-jcheckbox-is-checked)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-02T09:20:27.153

假设您只有一个普通的 JTable，您可以在渲染器和编辑器中设置适当的图标：

```
public void setIcons(Jtable table, int column, Icon icon, Icon selectedIcon) {
    JCheckBox cellRenderer = (JCheckBox) table.getCellRenderer(0, column);
    cellRenderer.setSelectedIcon(selectedIcon);
    cellRenderer.setIcon(icon);

    DefaultCellEditor cellEditor = (DefaultCellEditor) table.getCellEditor(0, column);
    JCheckBox editorComponent = (JCheckBox) cellEditor.getComponent();
    editorComponent.setSelectedIcon(selectedIcon);
    editorComponent.setIcon(icon);
} 
```

# php - 如何通过 HTML Purifier 删除具有 id 或属性的 div

> ID：15963345
> 
> 赞同：0
> 
> 时间：2013-04-12T04:53:53.327
> 
> 标签：php, htmlpurifier

我有一个内容

```
<div class="block-related" data-component-type="link" id="block-related-link">
    <ul>
        <li>Test</li>
    </ul>
</div>
<div class="block-related" data-component-type="topic" id="block-related-topic">
    <ul>
        <li>Test</li>
    </ul>
</div> 
```

如何使用 HTML Purifier 删除 div（通过 id 或属性数据组件类型进行调整）

对不起，我的英语不好

谢谢 ！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T05:12:46.167

你是这个意思吗？

[http://jsfiddle.net/VdCtq/](http://jsfiddle.net/VdCtq/)

```
$('#rm_id').click(function () {
    $('#block-related-link').remove();
});

$('#rm_attr').click(function () {
    $('div[data-component-type="topic"]').remove();
}); 
```

# javascript - dateAxisRendere 的 jqplot 刻度角？

> ID：15963346
> 
> 赞同：0
> 
> 时间：2013-04-12T04:53:53.773
> 
> 标签：javascript, ajax

有没有办法在 jqplot 中设置 dateaxis 渲染的角度？我需要这个用于 x 轴。谢谢..这是我的代码

```
xaxis:
                        {
                        min:'2009-11-01 00:00',
                        max:'2009-11-01 12:00',
                        renderer:jQuery.jqplot.DateAxisRenderer,
                        tickOptions:{formatString:'%H:%M',angle:-30},
                        tickInterval:'30 minutes'
                        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T03:00:09.373

我使用以下代码来完成它：

`axesDefaults : { tickRenderer :$.jqplot.CanvasAxisTickRenderer, tickOptions : { angle :30 } },`

# listview - 将 ListView Selected Item 属性值与显示的内容同步

> ID：15963352
> 
> 赞同：2
> 
> 时间：2013-04-12T04:54:10.260
> 
> 标签：listview, binding, windows-runtime, selection, winrt-xaml

我使用绑定到我的 WinRT 应用程序中显示列表的项目来设置`SelectedItem`属性。我知道绑定可以正常工作，因为页面上的其他地方使用了相同的绑定。`ListView``TwoWay`

但是，当第`ListView`一次显示时，它不会将任何项目显示为`Selected`.

一旦我单击其中一个`ListView`项目，选择就会顺利进行并且绑定工作良好（我通过绑定在选择变量上的另一个控件看到了这一点。）

所以我的问题是： **如何确保在首次出现时`ListView`显示`SelectedItem`为选中状态？**

我尝试使用该`IsSynchronizedWithCurrentItem`属性，但将其设置为`true`在运行时会导致（无用）异常，并且 VS2012 告诉我“`true`不支持将此属性设置为”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:17:04.423

我有一个类似的问题，我用 SelectedIndex 属性解决了。

我已经设置了 SelectedItem 和 SelectedIndex。

```
myListView.SelectedIndex = indexOfInitialSelectedItem;
myListView.SelectedItem = itemThatShouldBeSelected; 
```

当您使用 ItemsList 或 Enumerable 的 IndexOf() 方法时，您可以获得项目的索引，如下所示：

```
myItems.IndexOf(itemThatShouldBeSelected); 
```

也许这也适合你。

# twitter-bootstrap - 使用 twitter bootstrap 时页面加载期间的布局问题

> ID：15963357
> 
> 赞同：0
> 
> 时间：2013-04-12T04:54:24.810
> 
> 标签：twitter-bootstrap

我不确定我的问题标题是否正确，但如果有人可以访问此链接，我将不胜感激：

[http://www.dreamsmedia.org/lasergrc/](http://www.dreamsmedia.org/lasergrc/)

如果您注意到，当页面加载时，顶部的粉红色导航菜单的高度似乎更长，并且会在页面加载完成后进行调整。我试图找到发生这种情况的原因，但仍然无法解决它。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T05:13:05.200

通过为导航元素指定高度找到了一个简单的解决方案。

# php - PHP 中的 WWW_PATH 变量

> ID：15963362
> 
> 赞同：0
> 
> 时间：2013-04-12T04:54:48.387
> 
> 标签：php, apache, directory, document-root

我的项目中有一个文件：在每个文件的开头`/include/prepend.inc.php`获取d 。`require`在其中，我有这样的一行：

```
define( 'PATH', dirname( dirname( __FILE__ ) ) ); 
```

它工作得很好 - 它定义`PATH`为服务器的文档根目录，所以对于其他东西，无论哪个文件包含多少层深，我都可以使用：

```
require PATH . '/include/something_else.inc.php`. 
```

但是我现在想要同样的东西，但是对于浏览器。如果`PATH`是服务器的文档根，`WWW_PATH`应该包含空字符串。如果项目存储在`/something/`文档根目录中，`WWW_PATH`则应包含`/something`.

这个想法是我可以这样做：

```
<script src="<?=WWW_PATH?>/js/foo.js"></script> 
```

目前我只是这样做：

```
<script src="/js/foo.js"></script> 
```

如果项目存储在子目录中，它会中断。

我不想使用`$_SERVER['DOCUMENT_ROOT']`，因为它不可靠并且不适用于大多数共享主机。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T04:57:41.237

关于什么

```
$_SERVER["SERVER_NAME"] 
```

与或

```
$_SERVER["REQUEST_URI"]; 
```

或者

```
define('SOMETHING', PATH . '/js'); 
```

接着

```
<script src="<?php echo SOMETHING; ?>/foo.js"></script> 
```

# javascript - JavaScript 中的变量赋值

> ID：15963363
> 
> 赞同：0
> 
> 时间：2013-04-12T04:54:52.373
> 
> 标签：javascript

哪一个是 JavaScript 的最佳实践？为什么？

1>

一个）`var object = this.table.toJSON();`

或者

b)

```
var object = {};
object = this.table.toJSON(); 
```

2>

一个）

```
var keySelected = ""; 
```

或者

b)`var keySelected = null;`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T04:56:38.527

在 example`1B`中，设置`object`to`{}`是没有意义的，因为无论如何你只是覆盖了它的值。改为使用`1A`。

对于`2`，不要使用空字符串来表示`null`，除非您真的想要一个空字符串（例如当您将在循环中将字符串连接到它时）。通常，使用`null`for `null`，因为这就是它的用途。您也可以只使用`var keySelected`，其值将是`undefined`。

# dynamics-crm-2011 - 如何防止在crm中分配给其他用户后更改所有者名称

> ID：15963371
> 
> 赞同：0
> 
> 时间：2013-04-12T04:56:37.510
> 
> 标签：dynamics-crm-2011, dynamics-crm, crm, dynamics-crm-4, dynamics-crm-online

如果将一个潜在客户分配给其他用户（例如：XX），则所有者名称更改为XX，那么分配后如何停止所有者名称的更改。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T08:02:18.593

您是否考虑过使用队列作为您的存储桶？这将有效地将其放入 XX 存储桶中，并且原始所有者不会改变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T05:37:21.193

当您分配潜在客户时，您会更改它的所有者，因此这确实是一个问题 22。您希望对分配发生什么？也许还有另一种方法可以做你期望它做的事情，例如分享

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T07:29:50.297

*   您可以使用创建者字段，该字段在分配记录时不会更改。根据“创建者”过滤存储桶的视图。
*   如果所有者字段不能更改，您可以
    1.  将名为“工作人员”的自定义字段添加到潜在客户
    2.  添加一个名为“Work On”的自定义功能区按钮，将“Worked By”更改为当前或选定的用户
    3.  然后设置视图以根据“工作者”字段而不是“所有者”字段进行过滤
    4.  “所有者”将保持不变，但“工作”将改变。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T06:23:23.800

如果您希望其他用户能够在不更改您需要共享记录的所有者的情况下读取或修改潜在客户，您还可以决定权限。

您需要单击`Share`或`Sharing`按钮。

![在此处输入图像描述](https://i.stack.imgur.com/20IpZ.png)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-02-19T21:12:47.333

我设置了一个工作流，以在潜在客户或客户所有者发生更改时通知团队。

# python - python数组挑战

> ID：15963374
> 
> 赞同：1
> 
> 时间：2013-04-12T04:56:41.807
> 
> 标签：python, arrays

我有这个数组：`[[0,10,20],[1,15,25],[2,20,40]]`

`0, 1, 2`将是 ids 并且`10,20` `15,25` `20,40`将是它们各自的范围。

因此，我需要弄清楚范围以及哪些 id 具有哪个范围。

每个 id 代表一个手电筒，每个都有自己的范围，我需要这个来确定哪些区域被哪些手电筒照亮。

我不知道是否足够清楚，所以这是我期望从代码中返回的内容：

```
[
 [0],[10,15],
 [0,1],[15,20],
 [1,2],[20,25],
 [2], [25,40]
] 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T05:34:36.540

首先，必须对实线进行分段：

```
min_boundaries = set(min for id, min, max in orig)
max_boundaries = set(max for id, min, max in orig)
segment_boundaries = sorted(list(min_boundaries | max_boundaries)) 
```

然后，对于每个段，检查哪些灯照亮了该段。段中间的一个点就足够了：

```
result = []
old_boundary = segment_boundaries[0]
for boundary in segment_boundaries[1:]:
    bounds = [old_boundary, boundary]
    middle = (old_boundary + boundary) / 2
    ids = [id for id, min, max in orig if min < middle < max]
    result.append(ids)
    result.append(bounds)
    old_boundary = boundary 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T06:43:55.783

随着数据结构的一些变化，这里是简单的解决方案：

```
adict = {0: [10, 20], 1: [15, 25], 2: [20, 40]}
data = [(10, 15), (15, 20), (20, 25), (25, 40)]

# This will check the membership 
# in_([3,4], [2,3]) returns True
def in_(val1 , val2):
    return val2[0] >= val1[0] and val2[1] <= val1[1]

res = {}
for each in keys:
    for key in adict.keys():
        if in_(adict[key], each):
            res.setdefault(each, []).append(key) 
```

输出/输出

```
>>>res
{(10, 15): [0], (15, 20): [0, 1], (25, 40): [2], (20, 25): [1, 2]} 
```

# ruby-on-rails - 任何人都可以建议一个好的但简单的开源 Rails 项目，其中包含许多待贡献的功能吗？

> ID：15963377
> 
> 赞同：6
> 
> 时间：2013-04-12T04:56:56.637
> 
> 标签：ruby-on-rails, open-source

谁能给我推荐一个很好的 RoR 开源项目，它涵盖了很多 Rails 基础知识，但又很简单，最重要的是有很多功能或至少有 bug 修复尚未实现？我检查了一些像 Spree、Substruct 等，但不能归零，这很简单并且有待开发的功能。我不确定他们是否有要修复的错误列表。尽管功能会更好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T06:10:43.663

检查[Diaspora](http://diasporaproject.org/)，这是[Diaspora Github](https://github.com/diaspora/diaspora)页面。

这是未解决的[问题列表](https://github.com/diaspora/diaspora/issues)

这是散居[安装指南](https://github.com/diaspora/diaspora/wiki/Notes-on-Installing-and-Running-Diaspora)

# facebook - AS3 FacebookDesktop 登录失败并出现 OAuthException - #2500 必须使用活动访问令牌来查询有关当前用户的信息

> ID：15963378
> 
> 赞同：2
> 
> 时间：2013-04-12T04:57:02.163
> 
> 标签：facebook, actionscript-3, flash, facebook-graph-api, air

我认为这是因为 Facebook 刚刚对他们的登录过程进行了一些更改。

几天前，我的 air 应用程序正在使用[facebook-actionscript-api](http://code.google.com/p/facebook-actionscript-api/)中的 FacebookDesktop 类。今天我打开这个项目，发现 Facebook 登录屏幕与我开始构建应用程序时有些不同。在我输入我的用户 ID 和密码后，我授予应用程序访问我的公开个人资料、朋友列表和照片的权限。然后出现另一个屏幕，我授予该应用代表我向我的朋友发帖的权限。

然后窗口关闭，我得到“OAuthException 2500 必须使用活动访问令牌来查询有关当前用户的信息。”

当我通过浏览器登录 Facebook 时，我看到我的应用程序显示在“您的应用程序”下，但我无法通过我的应用程序登录并执行任何操作。

我在 OSX Lion 上使用带有 GraphAPI_Desktop_1_8_1.swc 的 Adob​​e Flash。

这是我的代码：

```
public function MyApp(){
     FacebookDesktop.init(APP_ID, onInit);
}
protected function onInit(result:Object, fail:Object):void {
    if (result) {
        trace("onInit, Logged In\n");
    } else {
        trace("onInit, Not Logged In\n");
        var permissions:Array = ["publish_stream", "user_photos"];
        FacebookDesktop.login(onLogin, permissions);            
    }
}
protected function onLogin(result:Object, fail:Object):void {
    if (result) { 
        trace("Logged In as:");
        trace(FacebookDesktop.getSession().user.name);
    } else {        
        trace("Login Failed");  
        trace('code: '+fail.error.code); //code: 2500
        trace('message: '+fail.error.message); //message: An active access token must be used to query information about the current user.
        trace('type: '+fail.error.type); //type: OAuthException
    }
} 
```

当我使用 SDK 中提供的 FlashDesktopExample（当然是用我的应用程序 ID 修改）时，我得到了相同的结果。

任何帮助都会很棒！提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T20:28:51.780

我也遇到了这个问题：成功 URL 没有任何参数。

Cadderly82 是正确的；这是安全导航的问题。关闭我的 Facebook 帐户的“安全浏览”选项可以解决问题，但我不想要求用户这样做。

我可以通过将所有 FacebookURLDefaults 值设置为使用“https://”来解决这个问题。

现在我在成功 URL 中获得了一个有效的用户访问令牌；无论我的 Facebook 帐户的安全浏览设置如何，我都会得到有效值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T18:51:54.730

我已经解决了问题： LoginWindow 类根据 uri 设置令牌。

这工作正常，直到 LOGIN_SUCCESS_URL ( `http://www.facebook.com/connect/login_success.html`) 和 LOGIN_SUCCESS_SECUREURL ( `https://www.facebook.com/connect/login_success.html`) 页面停止在 uri 中包含访问令牌。

因此，永远不会设置令牌。即使我的应用在我登录后显示在 Facebook 的“您的应用”部分下，但如果没有令牌，我的应用仍然无法执行任何操作。

我有两个解决方案：

最简单的方法是更改​​ com.facebook.graph.core.FacebookURLDefaults 中的 LOGIN_SUCCESS_URL 和/或 LOGIN_SUCCESS_SECUREURL 属性，如下所示。

从第 82 行开始：

```
public static var LOGIN_SUCCESS_URL:String = 'http://www.facebook.com/connect/login_success.html';
public static var LOGIN_SUCCESS_SECUREURL:String = 'https://www.facebook.com/connect/login_success.html'; 
```

改成：

```
public static var LOGIN_SUCCESS_URL:String = 'http://www.yourwebsite.com/';
public static var LOGIN_SUCCESS_SECUREURL:String = 'https://www.yoursecurewebsite.com/'; 
```

当然你会使用你自己的网站 - 而不是' `http://www.yourwebsite.com/`'。我尝试使用`http://localhost/`它，效果很好。

另一种解决方案是：

使用以下代码更改 com.facebook.graph.windows.LoginWindow。我已经对我的文件进行了一些更改，所以如果行号与 SDK 的新副本中的行号不同，请原谅我。

第 143 行附近：更改：

```
vars.redirect_uri = FacebookURLDefaults.LOGIN_SUCCESS_URL; 
```

至：

```
vars.redirect_uri = 'http://localhost/'; 
```

在生产代码中，您可能希望使用自己的网站地址而不是`localhost`，但我使用 localhost 进行测试。

然后，在 handleLocationChange 函数中（应该在第 168 行左右）将其添加到 else if 语句中：

```
}else if (html.location.indexOf ('http://localhost/') == 0) {               
    loginCallback(getURLVariables(), null);
    userClosedWindow = false;
    html.stage.nativeWindow.close();
    html.removeEventListener(Event.LOCATION_CHANGE, handleLocationChange);
} 
```

正如我之前所说，将 localhost 更改为您的网站地址。

我希望这有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T18:17:48.190

对于随机用户，我遇到了同样的问题，我真的不知道这是否是 Facebook 的安全导航问题：

检查 Facebook 中的用户属性：安全设置 > 安全浏览 (www.facebook.com/settings?tab=security)

*   对于具有“禁用”状态的用户，它可以正常工作。
*   对于具有“迁移”状态的用户，它会给出错误。
*   对于以前“启用”状态的用户，它工作正常。

当我尝试将用户置于“迁移”状态并更改为“禁用”时，它运行良好。然后，如果我将其设置为“启用”，则“迁移”状态消失并标记为“启用”，但错误仍然存​​在。所以我想这是问题所在，但不知道如何解决。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-01-24T20:14:19.233

一年内发生了很多变化，这就是我认为的答案，现在你需要一个令牌才能登录 FacebookDesktop.getSession().accessToken

```
public function MyApp(){FacebookDesktop.init(APP_ID, onInit, FacebookDesktop.getSession().accessToken); } 
```

# optimization - 随时随地进行 crm 2011 查找自动完成

> ID：15963380
> 
> 赞同：0
> 
> 时间：2013-04-12T04:57:20.130
> 
> 标签：optimization, autocomplete, dynamics-crm-2011, lookup

在 Dynamics CRM 2011 的查找中，您有一个自动完成功能。

我的问题是-您可以更改以下内容（如果可以，如何更改）：

1.  在您打字时触发它，不仅在它失去焦点时（例如在谷歌中......它在您打字时起作用）
2.  使其搜索任何匹配项，而无需在前后显式写入“*”

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T07:09:50.197

1.  It does fire while typing. The list it shows is based on previously selected items.
2.  *   To achieve this you can type into the field and press enter to perform a quick search
    *   Or you can incorporate jquery autocomplete: [http://stackoverflow.com/questions/14833793/crm-2011-text-field-intellisense][1]

# java - 如何在 Android Mobile 中添加应用程序启动图像？

> ID：15963382
> 
> 赞同：1
> 
> 时间：2013-04-12T04:57:33.037
> 
> 标签：java, android

我正在开发一个 android 应用程序，当它加载应用程序时，我只有一个黑屏（直到应用程序站稳脚跟）。当 Emulator/Android Mobile 上出现黑屏时，我想显示全屏图像。查看其他应用程序，他们有一个公司徽标或弹出几秒钟的酷图片，有人可以告诉我该怎么做吗？

我使用这段代码：

```
public class SplashScreen extends Activity {
    /**
     * The thread to process splash screen events
     */
    private Thread mSplashThread;    

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // Splash screen view
        setContentView(R.layout.activity_splash_screen);

        final SplashScreen sPlashScreen = this;   

        // The thread to wait for splash screen events
        mSplashThread =  new Thread(){
            @Override
            public void run(){
                try {
                    synchronized(this){
                        // Wait given period of time or exit on touch
                        wait(3000);
                    }
                }
                catch(InterruptedException ex){                    
                }

                finish();

                // Run next activity
                Intent intent = new Intent();
                intent.setClass(sPlashScreen, HomePage.class);
                startActivity(intent);

            }
        };

        mSplashThread.start();        
    }

    /**
     * Processes splash screen touch events
     */
    @Override
    public boolean onTouchEvent(MotionEvent evt) {
        if(evt.getAction() == MotionEvent.ACTION_DOWN) {
            synchronized(mSplashThread){
                mSplashThread.notifyAll();
            }
        }
        return true;
    }    
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T06:10:46.867

为此，您必须设置启动画面...您也可以像这样设置启动画面：

```
public class MainActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.splashscreen);
        Handler handler = new Handler();
        handler.postDelayed(new Runnable() {

            public void run() {
                // TODO Auto-generated method stub
                finish();
                Intent menu = new Intent(getBaseContext(), MainMenu.class);
                startActivity(menu);
            }
        }, 3000);
    }
} 
```

它将设置启动屏幕仅 3 秒，然后您的 Main 类将被显示...启动屏幕的 XML 是这样的：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
    android:background="@drawable/splash_screen">
</RelativeLayout> 
```

希望对你有帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T05:01:04.227

## **它被称为启动画面**

检查此代码：

```
public class SplashScreen extends Activity {

    /**
     * The thread to process splash screen events
     */
    private Thread mSplashThread;    

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // Splash screen view
        setContentView(R.layout.splash);

        final SplashScreen sPlashScreen = this;   

        // The thread to wait for splash screen events
        mSplashThread =  new Thread(){
            @Override
            public void run(){
                try {
                    synchronized(this){
                        // Wait given period of time or exit on touch
                        wait(5000);
                    }
                }
                catch(InterruptedException ex){                    
                }

                finish();

                // Run next activity
                Intent intent = new Intent();
                intent.setClass(sPlashScreen, MainActivity.class);
                startActivity(intent);
                stop();                    
            }
        };

        mSplashThread.start();        
    }

    /**
     * Processes splash screen touch events
     */
    @Override
    public boolean onTouchEvent(MotionEvent evt)
    {
        if(evt.getAction() == MotionEvent.ACTION_DOWN)
        {
            synchronized(mSplashThread){
                mSplashThread.notifyAll();
            }
        }
        return true;
    }    
} 
```

你的布局文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content" 
  android:id="@+id/TheSplashLayout"
  android:layout_gravity="center"
  >
    <ImageView 
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content" 
        android:id="@+id/SplashImageView"
        android:layout_gravity="center"        
        android:src="@drawable/lnxins"        
        >
    </ImageView>
</LinearLayout> 
```

[查看本教程以获取更多详细信息](http://www.codeproject.com/Articles/113831/An-Advanced-Splash-Screen-for-Android-App)

# c# - 将字符串编码和解码为不变的文化

> ID：15963384
> 
> 赞同：1
> 
> 时间：2013-04-12T04:57:41.563
> 
> 标签：c#, decode, encode, cultureinfo

我有一个隐藏字段，我在其中以字符串格式存储用户输入和代码生成的值。由于字符串可能包含超链接等，因此我在将其放入隐藏字段之前使用了 HTmlEncode，并在我从隐藏字段中检索时用于解码该值。如果用户输入包含法语字符，则代码将崩溃。如何对包含链接、法语和其他文化字符的字符串进行编码。我收到以下错误

```
A potentially dangerous Request.Form value was detected from the client (ctl00$ctl00$ContentPlaceHolder1$ContentPlaceHolder1$EmailHiddenField="...434] - [Exécuter la macro..."). 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T05:03:44.603

好吧..如果您使用的是c#，那么这是我的尝试..

将整个 HTML 文档编码为 Base64 字符串，然后使用 URLEncode。

```
byte[] bytesToEncode = Encoding.UTF8.GetBytes(myHTMLDocAsString);
string encodedText = Convert.ToBase64String(bytesToEncode); 
```

接着`URLEncode(encodedText)`

这可以通过 HTTP 作为 POST 成功传输而不会出错！

现在，如果您需要将其存储在隐藏字段中，而不是发布，只需将其输入隐藏字段..

希望能帮助到你..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T05:03:29.703

使用全球化标签：

```
<globalization requestEncoding="utf-8" responseEncoding="utf-8" culture="nb-no" uiCulture="no"/> 
```

进一步遵循这个答案，您将了解这些字符串的编码解码：

[从查询字符串中获取 U+fffd/65533 而不是特殊字符](https://stackoverflow.com/questions/806133/getting-ufffd-65533-instead-of-special-character-from-query-string)

# android - 使用 Azure 移动服务和 android 的多表查询

> ID：15963385
> 
> 赞同：4
> 
> 时间：2013-04-12T04:57:43.450
> 
> 标签：android, azure

我正在使用 Android 应用程序测试 Azure 移动服务设施。对于单表 CRUD 操作，它运行良好，但我一直无法找到有关多表查询的任何文档或示例。有没有人在这方面看到过任何东西——无论是在服务器端（比如创建视图）还是在安卓设备上？

谢谢

安东

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T12:44:36.263

我不知道这是否受支持，但要创建视图并通过移动服务访问它，您首先需要从 Azure 门户将对象创建为表，然后在数据库中使用 sp_rename 重命名表 [ servicename].[tablename] 到 [servicename].[tablename2]，最后创建一个名为 [servicename].[tablename] 的视图。我对此进行了测试，它似乎有效。这是从微软提供的示例程序中将 ToDoItem 表更改为视图的方法：

sp_rename [enzotest.todoitem]，[todoitem2]

CREATE VIEW enzotest.todoitem WITH SCHEMABINDING AS SELECT id, [text], complete FROM enzotest.todoitem2

您不需要使用 SCHEMABINDING，但它有助于从门户管理对象。现在您有了一个视图，您应该能够轻松地连接到其他表。

# xcode - UIImageView 的平移手势干扰滚动

> ID：15963387
> 
> 赞同：2
> 
> 时间：2013-04-12T04:57:49.977
> 
> 标签：xcode, uiscrollview, uiimageview, scroll, uipangesturerecognizer

我想实现对图像视图的平移手势功能，这个图像视图是滚动视图的子视图。问题是当我尝试滚动滚动视图时，图像视图的平移手势被识别，并且滚动视图不滚动。请帮我解决一下这个。

这是将 pan 初始化为 uiimageview 的代码：

```
UIPanGestureRecognizer *panRecognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(move:)];
            [panRecognizer setMinimumNumberOfTouches:1];
            [panRecognizer setMaximumNumberOfTouches:1];
            [panRecognizer setDelegate:self];
            [[[scrollView subviews] objectAtIndex:i] addGestureRecognizer:panRecognizer]; 
```

imageview 将用户设置为“YES”

以及为此采取的行动

```
-(void)move:(UIPanGestureRecognizer *)sender
{
    [[[[[sender view] superview] superview] superview]  bringSubviewToFront:sender.view];

    if([(UIPanGestureRecognizer*)sender state] == UIGestureRecognizerStateBegan) {

        if ([[[sender view] superview] superview] == itemView) // adds the imageview in the item scroll
        {
            int tag = [[sender view] tag] / 100;
            UIScrollView *tempScroll = (UIScrollView *)[itemView viewWithTag:-tag];
            CGRect frame = CGRectFromString([itemFrameDict objectForKey:[NSString stringWithFormat:@"%i",[[sender view] tag]]]);

            CGAffineTransform transform = temp.transform;
            UIImageView *tempImageView =  [[UIImageView alloc] initWithImage: [(UIImageView *) [sender view] image]];
            tempImageView.tag = [[sender view] tag];
            //NSLog(@"[sender view] superview] : %@", [[sender view] superview]);
            tempImageView.frame = frame;
            [tempImageView setTransform:transform];
            [tempImageView setFrame:frame];
            [tempImageView setUserInteractionEnabled:YES];
            [tempScroll addSubview:tempImageView];

            UIPanGestureRecognizer *panRecognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(move:)];
            [panRecognizer setMinimumNumberOfTouches:1];
            [panRecognizer setMaximumNumberOfTouches:1];
            [panRecognizer setDelegate:self];
            [tempImageView addGestureRecognizer:panRecognizer];

            UITapGestureRecognizer *singleTapGestureRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleSingleTap:)];
            [singleTapGestureRecognizer setNumberOfTapsRequired:1];
            [tempImageView addGestureRecognizer:singleTapGestureRecognizer];
        }
    }

    if([(UIPanGestureRecognizer*)sender state] == UIGestureRecognizerStateChanged)
    {
        CGPoint translatedPoint = [sender locationInView:[[sender view] superview]] ;
        newTranslatedPoint = [[[sender view] superview] convertPoint:translatedPoint toView:self.view];

        if ([sender view].frame.size.width == 35 && [sender view].frame.size.height == 35)
            [[sender view] sizeToFit];

        [sender view].center =  CGPointMake(newTranslatedPoint.x, newTranslatedPoint.y); //startFrame;

        [self.view addSubview:[sender view]];
    }

    if([(UIPanGestureRecognizer*)sender state] == UIGestureRecognizerStateEnded)
    {
        CGPoint newPoint = [[[sender view] superview] convertPoint:newTranslatedPoint toView:itemView];
        if (newPoint.y < 0)// || !viewUp)
        {
            //NSLog(@" baseView");
            [baseView addSubview:[sender view]];

            UITapGestureRecognizer *doubleTapGestureRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleDoubleTap:)];
            [doubleTapGestureRecognizer setNumberOfTapsRequired:2];
            [[sender view] addGestureRecognizer:doubleTapGestureRecognizer];

            UIPinchGestureRecognizer *pinchRecognizer = [[UIPinchGestureRecognizer alloc] initWithTarget:self action:@selector(scale:)];
            [pinchRecognizer setDelegate:self];
            [[sender view] addGestureRecognizer:pinchRecognizer];

            UIRotationGestureRecognizer *rotationRecognizer = [[UIRotationGestureRecognizer alloc] initWithTarget:self action:@selector(rotate:)];
            [rotationRecognizer setDelegate:self];
            [[sender view] addGestureRecognizer:rotationRecognizer];
        }

        else if (newPoint.y > 0)// && viewUp )
        {
            //NSLog(@" itemView");
            int tag = [[sender view] tag] / 100;
            UIScrollView *tempScroll = (UIScrollView *)[itemView viewWithTag:-tag];
            CGRect frame = CGRectFromString([itemFrameDict objectForKey:[NSString stringWithFormat:@"%i",[[sender view] tag]]]);

            CGAffineTransform transform = temp.transform;
            [[sender view] setTransform:transform];
            [[sender view] setFrame:frame];
            [tempScroll addSubview:[sender view]];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T06:36:36.697

我不确定我是否理解您通过在 a`UIPanGestureRecognizer`上使用`UIImageView`已经在 a 中的a 来准确实现的目标`UIScrollView`。但从你的描述来看，听起来你想要`UIScrollView`做这件事并且`UIPanGestureRecognizer`不阻止它。我相信你需要为你实现这个委托方法`UIPanGestureRecognizer`：

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer {
    return YES;
} 
```

请阅读关于允许同时手势识别的[UIGestureRecognizerDelegate 协议参考。](http://developer.apple.com/library/ios/documentation/uikit/reference/UIGestureRecognizerDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UIGestureRecognizerDelegate/gestureRecognizer:shouldRecognizeSimultaneouslyWithGestureRecognizer:)根据文档：

> 默认实现返回 NO——不能同时识别两个手势。

/* 编辑 */

来自[UIPanGestureRecognizer - 仅垂直或水平：](https://stackoverflow.com/a/8603839/159758) 仅实现一个方向`UIPanGestureRecognizer`。这是垂直平移：

```
- (BOOL)gestureRecognizerShouldBegin:(UIPanGestureRecognizer *)panGestureRecognizer {
    CGPoint translation = [panGestureRecognizer translationInView:someView];
    return fabs(translation.y) > fabs(translation.x);
} 
```

# android - heroku android 开始

> ID：15963393
> 
> 赞同：1
> 
> 时间：2013-04-12T04:58:23.697
> 
> 标签：android, heroku

嗨，我目前正在 android 中制作一个简单的应用程序，它将连接到我在 Heroku 中的数据库，我只是想知道如何使用 java 代码连接到该数据库并获取数据，并从中获取数据？

有人可以给我建议如何开始。我正在为初学者查看此代码[https://github.com/heroku/devcenter-java-database](https://github.com/heroku/devcenter-java-database)但我仍然对如何完全理解代码感到困惑。我需要一个 .pom 文件吗？它有什么用？“DATABASE_URL”的值在哪里，我如何能够连接到我在 Heroku 等中创建的数据库。

感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T05:02:14.920

通常，您不会让手机直接连接到您的数据库。您需要允许从 Internet 访问您的数据库，这被认为是安全的坏主意。相反，您编写了一个位于您的数据库和客户端之间的 Web 服务。Web 服务读取数据库，将其打包成某种数据格式，如 XML 或 JSON，然后将其发送给客户端，客户端解析这些值并对其进行处理（显示、计算等）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-25T04:30:04.053

@Gabe Sechan 是对的。您需要构建一个 API。您的应用程序将查询 API，API 将从 db 获取数据并通过 JSON 发送回 Android...

要了解更多关于 API 的信息，请查看此处： [http ://www.andrewhavens.com/posts/20/beginners-guide-to-creating-a-rest-api/](http://www.andrewhavens.com/posts/20/beginners-guide-to-creating-a-rest-api/)

或教程列表

[http://blog.mashape.com/list-of-40-tutorials-on-how-to-create-an-api/](http://blog.mashape.com/list-of-40-tutorials-on-how-to-create-an-api/)

希望这可以帮助你哥们。

# android - Android 中 TextViews、EditTexts 和 Buttons 的小型大写字母

> ID：15963396
> 
> 赞同：14
> 
> 时间：2013-04-12T04:58:46.370
> 
> 标签：android, text, typography

我可以做些什么来使文本看起来像小型大写字母/大写字母？如此处所述：[http](http://en.wikipedia.org/wiki/Small_caps) ://en.wikipedia.org/wiki/Small_caps 。我使用了转换器，但缺少一些字符。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-12T06:19:33.677

**编辑 2015-08-02**：从 API 21（棒棒糖）开始，您可以简单地添加：

```
android:fontFeatureSettings="smcp" 
```

`TextView`在 XML 中或在运行时调用您的声明：

```
textView.setFontFeatureSettings("smcp"); 
```

当然，这只适用于 API 21 及更高版本，因此您仍然必须手动处理旧解决方案，直到您仅支持 Lollipop 及更高版本。

* * *

作为一个内心深处的排版怪胎，这似乎是一个非常好的问题。我今天要了解更多关于 Unicode 的知识，以及您问题的答案。:)

首先，您需要有一个包含“实际”小型大写字符的字体。我假设您知道，因为您要问，但通常大多数专业字体都包括这些。不幸的是，大多数专业字体未获得分发许可，因此您可能无法在您的应用程序中使用它们。无论如何，如果您*确实*找到了一个（我在这里以 Chaparral Pro 为例），这就是您获得小型股的方法。

从[这个答案](https://tex.stackexchange.com/a/56595)中，我发现小型大写字符（对于 AZ）位于从 Unicode-UF761 开始。所以我建立了这些字符的映射：

```
private static char[] smallCaps = new char[]
{
        '\uf761', //A
        '\uf762',
        '\uf763',
        '\uf764',
        '\uf765',
        '\uf766',
        '\uf767',
        '\uf768',
        '\uf769',
        '\uf76A',
        '\uf76B',
        '\uf76C',
        '\uf76D',
        '\uf76E',
        '\uf76F',
        '\uf770',
        '\uf771',
        '\uf772',
        '\uf773',
        '\uf774',
        '\uf775',
        '\uf776',
        '\uf777',
        '\uf778',
        '\uf779',
        '\uf77A'   //Z
}; 
```

然后添加了一个辅助方法来将输入字符串转换为小写字母已被它们的 Small Caps 等效项替换的字符串：

```
private static String getSmallCapsString (String input) {
    char[] chars = input.toCharArray();
    for(int i = 0; i < chars.length; i++) {
        if(chars[i] >= 'a' && chars[i] <= 'z') {
            chars[i] = smallCaps[chars[i] - 'a'];
        }
    }
    return String.valueOf(chars);
} 
```

然后在任何地方使用它：

```
String regularCase = "The quick brown fox jumps over the lazy dog.";
textView.setText(getSmallCapsString(regularCase)); 
```

为此，我得到了以下结果：

![小型股的例子](https://i.stack.imgur.com/ULr3o.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-09-25T00:08:18.700

**很抱歉提出一个非常古老的问题。**

我喜欢@kcoppock 的处理方法，但不幸的是我使用的字体缺少小写字符。我怀疑许多其他人会发现自己处于这种情况。

这启发了我编写一个小 util 方法，它将采用大小写混合的字符串（例如`Small Caps`）并创建一个格式化的可跨行字符串，**看起来像** `Sᴍᴀʟʟ Cᴀᴘs`但只使用标准 AZ 字符。

*   它适用于任何具有`A-Z`字符的字体 - 没有什么特别要求
*   它很容易在 TextView 中使用（或任何其他基于文本的视图，就此而言）
*   它不需要任何 HTML
*   它不需要对您的原始字符串进行任何编辑

我在这里提出了代码：[https ://gist.github.com/markormesher/3e912622d339af01d24e](https://gist.github.com/markormesher/3e912622d339af01d24e)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-07T11:51:46.260

只需调用此 getSmallCaps(text) 函数：

```
public SpannableStringBuilder getSmallCaps(String text) {

    text = text.toUpperCase();
    text = text.trim();
    SpannableStringBuilder spannableStringBuilder = new SpannableStringBuilder();
    if (text.contains(" ")) {
        String[] arr = text.split(" ");
        for (int i = 0; i < arr.length; i++) {
            spannableStringBuilder.append(getSpannableStringSmallCaps(arr[i]));
            spannableStringBuilder.append(" ");
        }
    } else {
        spannableStringBuilder=getSpannableStringSmallCaps(text);
    }
    return spannableStringBuilder;
}

public SpannableStringBuilder getSpannableStringSmallCaps(String text) {

    SpannableStringBuilder spannableStringBuilder = new SpannableStringBuilder(
            text);
    spannableStringBuilder.setSpan(new AbsoluteSizeSpan(36), 0, 1, 0);
    spannableStringBuilder.setSpan(new StyleSpan(Typeface.BOLD), 0, 1, 0);
    spannableStringBuilder.setSpan(new StyleSpan(Typeface.BOLD), 1,
            text.length(), 0);
    return spannableStringBuilder;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T05:58:55.533

在此处找到替代方法[TextView 中是否可以有多种样式？](https://stackoverflow.com/questions/1529068/is-it-possible-to-have-multiple-styles-inside-a-textview)

基本上你可以使用 html 标签来格式化字符的大小并给出一个小写的效果......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-10T13:40:56.620

这不是我的代码，但它可以完美运行。

```
 public SpannableString getSmallCapsString(String input) {
    // values needed to record start/end points of blocks of lowercase letters
    char[] chars = input.toCharArray();
    int currentBlock = 0;
    int[] blockStarts = new int[chars.length];
    int[] blockEnds = new int[chars.length];
    boolean blockOpen = false;

    // record where blocks of lowercase letters start/end
    for (int i = 0; i < chars.length; ++i) {
        char c = chars[i];
        if (c >= 'a' && c <= 'z') {
            if (!blockOpen) {
                blockOpen = true;
                blockStarts[currentBlock] = i;
            }
            // replace with uppercase letters
            chars[i] = (char) (c - 'a' + '\u0041');
        } else {
            if (blockOpen) {
                blockOpen = false;
                blockEnds[currentBlock] = i;
                ++currentBlock;
            }
        }
    }

    // add the string end, in case the last character is a lowercase letter
    blockEnds[currentBlock] = chars.length;

    // shrink the blocks found above
    SpannableString output = new SpannableString(String.valueOf(chars));
    for (int i = 0; i < Math.min(blockStarts.length, blockEnds.length); ++i) {
        output.setSpan(new RelativeSizeSpan(0.8f), blockStarts[i], blockEnds[i], Spannable.SPAN_EXCLUSIVE_INCLUSIVE);
    }

    return output;
} 
```

例子：

```
SpannableString setStringObj = getSmallCapsStringTwo("Object"); tvObj.setText(setStringObj); 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-04-12T05:03:31.047

在 XML 编辑文本中具有属性：android:capitalize=""

# java - Java 中 f() 的非递归版本

> ID：15963398
> 
> 赞同：1
> 
> 时间：2013-04-12T04:58:56.857
> 
> 标签：java

```
public static int f(int a){
        if(a==0) return 0;
        if(a==1) return 1;
        return (f(a-1) + f(a-2));
} 
```

有没有这样做的非递归方式？

# .net - 到实体框架的自定义连接字符串

> ID：15963400
> 
> 赞同：1
> 
> 时间：2013-04-12T04:59:02.193
> 
> 标签：.net, entity-framework, entity-framework-4, entity-framework-4.1, entity-framework-5

如何将自定义连接字符串分配给实体框架？默认情况下，实体框架从 Web 配置文件或应用程序配置文件中读取连接字符串。我想在字符串变量中创建一个连接字符串并将连接分配给实体框架。因此，该实体框架从该连接字符串创建连接桥。

我们也可以说它是运行时的实体框架连接字符串。

请帮助我如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T07:29:26.143

最简单的方法是在 DAL 中创建一个继承 Datacontext 类的部分类，该类有一个简单的构造函数，允许将连接字符串传递到类中并创建 DataContext 实体。

现在，为了在 99% 的项目和解决方案中进一步简化事情，我创建了一个无参数构造函数，它通过在我的数据访问层中创建的自定义配置部分读取静态连接字符串。因此，我只需调用一个 new Class() 并使用实例中创建的配置为我创建我的 DataContext。这允许跨多个程序集、项目（和项目类型）轻松使用，从而使部署和配置变得非常简单。

这是一个使用配置处理程序并支持多个项目的简单类结构的示例。

首先，像往常一样创建数据上下文。然后创建一个部分类来扩展它。

[http://forums.asp.net/t/1747809.aspx/1](http://forums.asp.net/t/1747809.aspx/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T06:04:38.857

实体框架上下文继承自 DbContext。通过对 TextTemplate 文件进行一些编辑，您可以添加一个新的构造函数并使用您的 ConnectionString。

显而易见的起点是这里（Context.tt 第 57 行 EF5）：

```
<#=Accessibility.ForType(container)#> partial class <#=code.Escape(container)#> : DbContext
{
    public <#=code.Escape(container)#>()
        : base("name=<#=container.Name#>")
    {
<#
if (!loader.IsLazyLoadingEnabled(container))
{
#>
        this.Configuration.LazyLoadingEnabled = false;
<#
} 
```

这里 tt 生成调用 DbContext 的 Base 构造函数的构造函数。这是你的钩子。

# android - 批量转移返回 -1

> ID：15963402
> 
> 赞同：6
> 
> 时间：2013-04-12T04:59:06.097
> 
> 标签：android

首先让我声明，我是 Android 开发的新手，所以 USB 对于第一个应用程序来说可能有点复杂，但这是我首先想要编写应用程序的唯一原因。

我想通过 USB 与 Garmin GPS 通信。过去我曾在 PC 上成功这样做过，但它是通过 Garmin 提供的驱动程序完成的。

据我所知，Android 没有这样的驱动程序，所以我需要直接写入 USB。

Garmin 发布此文档：

[http://www8.garmin.com/support/pdf/USBAddendum.pdf](http://www8.garmin.com/support/pdf/USBAddendum.pdf)

基本上它说你必须批量传输：00 00 00 00 05 00 00 00 00 00 00 00

告诉设备准备转移。当我这样做时，我的批量传输失败并显示 -1。如果我有一个 0 超时，那么 bulktransfer 永远不会返回。我假设是因为 gps 没有响应。

我在下面包含了我的代码。该代码检测到 GPS 并将其打开。但是第一次批量传输永远不会完成。我确定我正在发送到批量输出端点。任何人都可以让我开始吗？

```
 public class MainActivity extends Activity {

     private static final String TAG = "TestGarmin";
     private UsbManager mUsbManager;
     private UsbDevice mDevice;
     private UsbDeviceConnection mConnection;
     private UsbEndpoint mEndpointIntr;
     private UsbEndpoint mEndpointBulkOut;
     private UsbEndpoint mEndpointBulkIn;
     private static int TIMEOUT = 0;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

         mUsbManager = (UsbManager)getSystemService(Context.USB_SERVICE);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

     public void onResume() {
            super.onResume();

            Intent intent = getIntent();
            Log.d(TAG, "intent: " + intent);
            String action = intent.getAction();
            String s = UsbManager.ACTION_USB_DEVICE_ATTACHED;           

            UsbDevice device = (UsbDevice)intent.getParcelableExtra(UsbManager.EXTRA_DEVICE);
            if (UsbManager.ACTION_USB_DEVICE_ATTACHED.equals(action)) 
                setDevice(device);

     }

     private void setDevice(UsbDevice device) {
            Log.d(TAG, "setDevice " + device);
            if (device.getInterfaceCount() != 1) {
                Log.e(TAG, "could not find interface");
                return;
            }
            UsbInterface intf = device.getInterface(0);
            // device should have three endpoints
            if (intf.getEndpointCount() != 3) {
                Log.e(TAG, "could not find endpoint");
                return;
            }           
            // endpoint 0 should be of type interrupt
            UsbEndpoint ep0 = intf.getEndpoint(0);
            if (ep0.getType() != UsbConstants.USB_ENDPOINT_XFER_INT) {
                Log.e(TAG, "endpoint 0 is not interrupt type");
                return;
            }

            if (ep0.getDirection() != UsbConstants.USB_DIR_IN) {

                Log.e(TAG, "endpoint 0 is not an input endpoint");
                return;             
            }

            mEndpointIntr = ep0;

            // endpoint 1 should be of type bulk
            UsbEndpoint ep1 = intf.getEndpoint(1);
            if (ep1.getType() != UsbConstants.USB_ENDPOINT_XFER_BULK) {
                Log.e(TAG, "endpoint 1 is not bulk type");
                return;
            }

            if (ep1.getDirection() != UsbConstants.USB_DIR_OUT) {

                Log.e(TAG, "endpoint 1 is not an output endpoint");
                return;             
            }

            mEndpointBulkOut = ep1;

            // endpoint 2 should be of type bulk
            UsbEndpoint ep2 = intf.getEndpoint(2);
            if (ep2.getType() != UsbConstants.USB_ENDPOINT_XFER_BULK) {
                Log.e(TAG, "endpoint 2 is not bulk type");
                return;
            }

            if (ep2.getDirection() != UsbConstants.USB_DIR_IN) {

                Log.e(TAG, "endpoint 2 is not an output endpoint");
                return;             
            }

            mEndpointBulkOut = ep2;

            mDevice = device;

            if (device != null) {
                UsbDeviceConnection connection = mUsbManager.openDevice(device);
                if (connection != null && connection.claimInterface(intf, true)) {
                    Log.d(TAG, "open SUCCESS");
                    mConnection = connection;

                    byte[] init = {0x00,0x00,0x00,0x00,0x05,0x00,0x00,0x00,0x00,0x00,0x00,0x00};

                    //14 00 00 00 FE 00 00 00 00 00 00 00
                    int x = connection.bulkTransfer(mEndpointBulkOut,init, init.length, 100);

                    Log.e(TAG, "BulTransfer returned " + x);

                } else {
                    Log.d(TAG, "open FAIL");
                    mConnection = null;
                }
             }
        }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T15:15:35.887

我混淆了我的端点是个问题。这是更正的代码，现在我在获得回复时遇到问题，但我可能会创建另一个帖子。

```
public class MainActivity extends Activity {

 private static final String TAG = "TestGarmin";
 private UsbManager mUsbManager;
 private UsbDevice mDevice;
 private UsbDeviceConnection mConnection;
 private UsbEndpoint mEndpointIntr;
 private UsbEndpoint mEndpointBulkOut;
 private UsbEndpoint mEndpointBulkIn;
 private static int TIMEOUT = 0;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

     mUsbManager = (UsbManager)getSystemService(Context.USB_SERVICE);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}

 public void onResume() {
        super.onResume();

        Intent intent = getIntent();
        Log.d(TAG, "intent: " + intent);
        String action = intent.getAction();
        String s = UsbManager.ACTION_USB_DEVICE_ATTACHED;           

        UsbDevice device = (UsbDevice)intent.getParcelableExtra(UsbManager.EXTRA_DEVICE);
        if (UsbManager.ACTION_USB_DEVICE_ATTACHED.equals(action)) 
            setDevice(device);

 }

 private void setDevice(UsbDevice device) {
        Log.d(TAG, "setDevice " + device);
        if (device.getInterfaceCount() != 1) {
            Log.e(TAG, "could not find interface");
            return;
        }
        UsbInterface intf = device.getInterface(0);
        // device should have three endpoints
        if (intf.getEndpointCount() != 3) {
            Log.e(TAG, "could not find endpoint");
            return;
        }           
        // endpoint 0 should be of type interrupt
        UsbEndpoint ep0 = intf.getEndpoint(0);
        if (ep0.getType() != UsbConstants.USB_ENDPOINT_XFER_INT) {
            Log.e(TAG, "endpoint 0 is not interrupt type");
            return;
        }

        if (ep0.getDirection() != UsbConstants.USB_DIR_IN) {

            Log.e(TAG, "endpoint 0 is not an input endpoint");
            return;             
        }

        mEndpointIntr = ep0;

        /*********   Endpoint 0 Bulk Out ************/
        // endpoint 1 should be of type bulk
        UsbEndpoint ep1 = intf.getEndpoint(1);
        if (ep1.getType() != UsbConstants.USB_ENDPOINT_XFER_BULK) {
            Log.e(TAG, "endpoint 1 is not bulk type");
            return;
        }

        if (ep1.getDirection() != UsbConstants.USB_DIR_OUT) {

            Log.e(TAG, "endpoint 1 is not an output endpoint");
            return;             
        }

        mEndpointBulkOut = ep1;

        /*************   Endpoint 3 Bulk in *************/
        // endpoint 2 should be of type bulk
        UsbEndpoint ep2 = intf.getEndpoint(2);
        if (ep2.getType() != UsbConstants.USB_ENDPOINT_XFER_BULK) {
            Log.e(TAG, "endpoint 2 is not bulk type");
            return;
        }

        if (ep2.getDirection() != UsbConstants.USB_DIR_IN) {

            Log.e(TAG, "endpoint 2 is not an input endpoint");
            return;             
        }                

        mEndpointBulkIn = ep2;

        mDevice = device;

        if (device != null) {
            UsbDeviceConnection connection = mUsbManager.openDevice(device);
            if (connection != null && connection.claimInterface(intf, true)) {
                Log.d(TAG, "open SUCCESS");
                mConnection = connection;

                byte[] init = {0x00,0x00,0x00,0x00,0x05,0x00,0x00,0x00,0x00,0x00,0x00,0x00};

                //14 00 00 00 FE 00 00 00 00 00 00 00
                int x = connection.bulkTransfer(mEndpointBulkOut,init, init.length, 100);

                Log.e(TAG, "BulTransfer returned " + x);

            } else {
                Log.d(TAG, "open FAIL");
                mConnection = null;
            }
         }
    }

} 
```

# ruby - 将 Ruby 中的搜索表单与 Sinatra 连接起来

> ID：15963410
> 
> 赞同：1
> 
> 时间：2013-04-12T04:59:58.323
> 
> 标签：ruby, api, search, sinatra, yellow-pages

我有一个使用 YP（黄页）API 的搜索表单，用 Ruby 编码，带有 Sinatra。

我已经设法连接所有点，让搜索在后端工作，但在将搜索表单连接到 API 调用时遇到问题。一切都在页面上正确显示，但是当我单击提交按钮时什么都没有显示。

我正在使用的代码如下：

```
require 'rubygems'
require 'sinatra'
require 'yp'

# index.rb 

get "/" do
  # Only run the search if both of our params are available
  if params[:location] && params[:term]
  client = Yp::Client.new(api_key: "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx")
  results = client.search(searchloc: params[:location], term: params[:term], listingcount: 1, sort: 'distance')
  erb :index, :locals => {results: results}
end

__END__

@@index

<h1>YP Search</h1>

<form action="/" method="get">  
  Location: <input type="text" name="location">  <br />
  Search Term: <input type="text" name="term" required> <br />
<input type="submit">  
</form> 

<% if results %>
 <% results.each do |result| %>
 # Print out the result info
<% end %>
<% else %>
 # They haven't searched yet.
<% end %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T12:45:43.823

正如您编写的那样，您没有将结果传递给模板。块中的最后一次调用成为返回值，它是传递给客户端的主体，因此使用您的代码：

```
get "/" do
  # Only run the search if both of our params are available
  if params[:location] && params[:term]
  client = Yp::Client.new(api_key: "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx")
  @results = client.search(searchloc: params[:location], term: params[:term], listingcount: 1, sort: 'distance')
end 
```

这一行：

```
 @results = client.search(searchloc: params[:location], term: params[:term], listingcount: 1, sort: 'distance') 
```

变成身体。你想要的是*渲染的模板*是最后一行，所以：

```
get "/" do
  # Only run the search if both of our params are available
  if params[:location] && params[:term]
  client = Yp::Client.new(api_key: "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx")
  @results = client.search(searchloc: params[:location], term: params[:term], listingcount: 1, sort: 'distance')
  erb :index
end 
```

实例变量对模板自动可见，因此您只需要这样做。如果你想传递一个局部变量：

```
get "/" do
  # Only run the search if both of our params are available
  if params[:location] && params[:term]
  client = Yp::Client.new(api_key: "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx")
  results = client.search(searchloc: params[:location], term: params[:term], listingcount: 1, sort: 'distance')
  erb :index, :locals => {results: results}
end 
```

然后从模板`@`中 var 的前面删除 。`@results`

`erb :index`是一个方法调用。它说“调用模板渲染器，使用 ERB 引擎并将`:index`模板传递给它。该方法的返回值是一个字符串。该字符串可以在任何地方使用，就像普通字符串一样，但你显然是最可能将它放在路由块的末尾，因为您想返回一个字符串。

您现在将其放置在类主体中的位置，它只是一个方法调用，其结果无处可去。这和这样做是一样的：

```
get "/you/can/access/this" do
  "and this would be the returned body"
end

get "/and/this" do
  erb :index, :locals=>{:what_youd_see => "would be the template"}
end

"But this is just a string that no one can access, it gets called every time, but who is the receiver?" 
```

把你的 Sinatra 应用想象成一个类，然后 Ruby 的常规规则就变得更清晰了 :)

* * *

我克隆了你的 git repo 并发现了一些问题：

*   您不需要在 gemspec 中将 ruby​​gems 列为依赖项。
*   Shotgun 未在 gemspec 或 Gemfile 中列为开发依赖项。
*   Rails 被列出，即使它不在项目中。

在 gemspec 中：

```
Gem::Specification.new do |gem|
  #other code
  gem.version       = Yp::VERSION
  gem.add_development_dependency "shotgun"
  gem.add_dependency('faraday', ["< 0.8", ">= 0.6"])    
  gem.add_dependency('faraday_middleware', [">= 0.8"])  
  gem.add_dependency('sinatra')  
end 
```

以上是我更改yp.gemspec文件的方法，但我个人并没有将开发依赖项放在gemspec中，而是放在Gemfile中。

```
# Gemfile

group :development do
  gem "shotgun"
end 
```

我认为更容易管理和更好地分离事物。`bundle install`我没有运行而是运行`bundle install --binstubs --path vendor`，因为它将所有内容都放在本地项目目录中。这样一来，所有项目都是相互沙盒化的，如果你错过了任何东西，你会注意到。要运行我使用的应用程序`bundle exec ruby index.rb`。

*   index.rb 存在语法错误

用于`ruby -c filename`检查语法错误。当您在加载时遇到错误时，首先要尝试。

*   在 Ruby 中，您必须使用 . 关闭 if...else 块`end`。

如果未给出参数，我还添加了[暂停，但您也可以使用](http://www.sinatrarb.com/intro#Halting)[错误处理程序](http://www.sinatrarb.com/intro#Error%20Handling)或将错误传递到模板中以通知用户。YMMV。

```
get "/" do
  halt 400, "You need to supply a location and a term"
  # Only run the search if both of our params are available
  if params[:location] && params[:term]
    client = Yp::Client.new(api_key: "e89cba4b974a122e408d1723626f3709")
    results = client.search(searchloc: params[:location], term: params[:term], listingcount: 1, sort: 'distance')
  end
  erb :index, :locals => {results: results}
end 
```

*   您已硬编码 API 密钥。

我猜这应该是秘密的。最好的事情可能是获得一个新的，永远不要对其进行硬编码，也永远不要将其签入 git。我使用了一个不被 git 跟踪并加载到环境变量中的文件，例如

```
YAML.load_file("config/secret_settings.yml").each do |key,value|
  ENV[key.upcase] = value
end 
```

我将它添加到 Rakefile 并从机架文件运行应用程序，例如

```
namespace :app do

  desc "Set up the environment locally"
  task :environment do
    warn "Entering :app:environment"
    YAML.load_file("config/secret_settings.yml").each do |key,value|
      ENV[key.upcase] = value
    end
  end

  desc "Run the app locally"
  task :run_local => "app:environment" do
    exec "bin/rackup config.ru -p 4567"
  end
end 
```

从命令行：

```
bin/rake app:run_local 
```

你可能想添加一个`config.ru`.

希望有帮助。

# javascript - 点击下一个按钮时更改标签

> ID：15963414
> 
> 赞同：0
> 
> 时间：2013-04-12T05:00:13.480
> 
> 标签：javascript, tabs

我需要在单击每个选项卡末尾的 NEXT 绿色按钮时切换选项卡。这里是[http://www.cmsonlinehelp.com/ann/events](http://www.cmsonlinehelp.com/ann/events)

目前发生的事情是我可以通过点击它们来移动到标签。但我需要在单击 NEXT 按钮时移至下一个选项卡。

这是我的脚本代码：

```
 <script type="text/javascript">
var countries=new ddtabcontent("countrytabs")
countries.setpersist(true)
countries.setselectedClassTarget("link") //"link" or "linkparent"
countries.init()
</script> 
```

我在导航中使用它：

```
 <ul id="countrytabs" class="shadetabs">            
        <li><a href="#" rel="country1" class="selected">Photography Coverage</a></li>
        <li><a href="#" rel="country2" id="videocoverage">Video Coverage</a></li>
        <li><a href="#" rel="country3" id="djcoverage">Dj Coverage</a></li>
        <li><a href="#" rel="country4" id="eventcoverage">Event Details</a></li>
        </ul> 
```

将 id 赋予单个选项卡 div，例如：

```
 <div id="country1" class="tabcontent">
          <div id="country2" class="tabcontent">
          <div id="country3" class="tabcontent">
          <div id="country4" class="tabcontent"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T05:06:06.507

只需调用选项卡链接的点击事件。因此，对于第一个“下一步”按钮，您的 javascript 会调用`document.getElementById('videocoverage').click()`

# javascript - 需要帮助获取此 javascript/jquery 代码才能开始工作

> ID：15963420
> 
> 赞同：1
> 
> 时间：2013-04-12T05:00:48.650
> 
> 标签：javascript, jquery, html

我正在尝试制作一个简单的程序来输入一些数字（默认为 2 个字段，单击链接时添加更多字段），并且我已经足够远可以添加更多字段，但是似乎我无法获得他们的输入。我的想法是，这是因为它们是仅由 JS 添加的 innerHTML，而不是实际上在文件中。

有什么想法可以修复吗？

JSFiddle：http: [//jsfiddle.net/tmaDr/](http://jsfiddle.net/tmaDr/)

index.php的馅饼：http: [//pastie.org/7460786](http://pastie.org/7460786)

simplemath.jquery.js 的馅饼：http: [//pastie.org/7460788](http://pastie.org/7460788)

代码而不是馅饼：

**索引.php**

```
<!DOCTYPE html>
<html lang='en'>
<head>
    <title>SimpleMath</title>
    <link rel='stylesheet' type='text/css' href='css/style.css' />
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src='scripts/simplemath.jquery.js' type='text/javascript'></script>
</head>
<body>
    <h1>Simple Math</h1>

    <div class='labelcontainer'>
        <label for='type'>Type of Problem:</label>
        <select name='type' id='problemType'>
            <option value='add'>Add</option>
            <option value='subtract'>Subtract</option>
            <option value='multiply'>Multiply</option>
            <option value='divide'>Divide</option>
        </select><br /><br />
        <label for='problem'>Enter first number: </label>
        <input type='text' name='fieldOne' id='fieldOne' /><br /><br />
        <label for='problem'>Enter next number: </label>
        <input type='text' name='fieldNext' id='fieldNext' /><br /><br />
        <span class='smalltext'><a href="#" id='nextField'>(Click for another field)</a></span>
        <br /><br />
        <input type='submit' name='submit' id='submit' />
    </div>
    <label>Answer:</label><br /><br />
    <h3 id="answer"></h3>
</body>
</html> 
```

**简单数学.jquery.js**

```
//some global vars
var i = 1;
var x = 0;
var extraFieldVals = [];
var extraFieldCount = 0;

//code

$(document).ready(function() {
    $('#submit').click(function() {
            var typeofproblem = $('#problemType').val().toString().toLowerCase();
            switch(typeofproblem) {
                case 'add':
                    $('#answer').text( $(extraFieldVals[0]).val() );
                    return addF();
                //case 'subtract':
                    //return addF();
                //case 'multiply':
                    //return multF();
                //case 'divide':
                    //return divF();
                //default:
                    //return unF();
            }
    });

    $('#nextField').click(function() {
        var id='#fieldNext'+i;
        extraFieldVals.push(id);
        $('<label for='+id+'>Enter next number: </label><input type=\'text\' name='+id+' id='+id+'\' /><br /><br />').insertBefore('#nextField');
        i+=1;
    });

    var extraFields = function() {
        for (x; x < i; x++) {
            extraFieldCount = x;
        }
    }

    var addF = function() {
    };
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T05:16:05.513

好吧，我对你的脚本做了一些调整，试试这个：

```
var i = 1;
var x = 0;
var extraFieldVals = [];
var extraFieldCount = 0;
$(window).load(function(){

//code

$(document).ready(function() {
    extraFieldVals.push("#fieldOne");
    extraFieldVals.push("#fieldNext");
    $('#submit').click(function() {
            var typeofproblem = $('#problemType').val().toString().toLowerCase();
            switch(typeofproblem) {
                case 'add':
                    $('#answer').text( $(extraFieldVals[0]).val() );
                    return addF();
                //case 'subtract':
                    //return addF();
                //case 'multiply':
                    //return multF();
                //case 'divide':
                    //return divF();
                //default:
                    //return unF();
            }
    });

    $('#nextField').click(function() {
        var id='fieldNext'+i;
        extraFieldVals.push("#"+id);
        $('<label for='+id+'>Enter next number: </label><input type=\'text\' name=\''+id+'\' id=\''+id+'\' /><br /><br />').insertBefore('#nextField');
        i+=1;
    });

    var extraFields = function() {
        for (x; x < i; x++) {
            extraFieldCount = x;
        }
    }

    var addF = function() {
    };
});
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T05:23:44.897

试试这个

```
//some global vars
 var i = 1;
 var x = 0;
 var extraFieldVals = [];
 var extraFieldCount = 0;

//code

$(document).ready(function() {
$('#submit').click(function() {
        var typeofproblem = $('#problemType').val().toString().toLowerCase();
        switch(typeofproblem) {
            case 'add':
               var values = [];
               $("input[type='text']").each(function() {
                   var value = $(this).val();
                   if(value !== ""){
                       values.push(parseInt(value));
                   }

                });
                console.log(addF(values)); //change according to your requirement
            //case 'subtract':
                //return addF();
            //case 'multiply':
                //return multF();
            //case 'divide':
                //return divF();
            //default:
                //return unF();
        }
});

$('#nextField').click(function() {
    var id='#fieldNext'+i;
    extraFieldVals.push(id);
    $('<label for='+id+'>Enter next number: </label><input type=\'text\' name='+id+' id='+id+'\' /><br /><br />').insertBefore('#nextField');
    i+=1;
});

var extraFields = function() {
    for (x; x < i; x++) {
        extraFieldCount = x;
    }
}

var addF = function(values) {
    var result = 0;

    values.forEach(function(value,item){
        result += value;
    });
    return result;
};
}); 
```

[小提琴演示](http://jsfiddle.net/tmaDr/9/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T05:24:13.340

好吧，我使用类添加了一个更简单的编码解决方案。

这是一个小提琴：http: [//jsfiddle.net/tmaDr/8/](http://jsfiddle.net/tmaDr/8/)

```
 <input type='text' name='fieldOne' id='fieldOne' class="input_value"/><br /><br /> 
```

此处添加的 Class 用于循环使用 each() 循环输入的值。

# c# - ASCIIEncoding.ASCII.GetBytes() 返回意外值

> ID：15963421
> 
> 赞同：3
> 
> 时间：2013-04-12T05:00:53.457
> 
> 标签：c#, unicode, ascii

这个 C# 代码...

```
string s = "\u00C0";
byte[] bytes = ASCIIEncoding.ASCII.GetBytes(s);
Trace.WriteLine(BitConverter.ToString(bytes)); 
```

产生以下输出：

```
3F 
```

为什么输出不是C0？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T05:25:59.363

似乎您想要一个表示一串 Unicode 字符的字节序列。显然，字节将取决于编码。由于您希望 C0 是字节之一，因此它会稍微缩小选项范围。这里是 UTF16LE，当然是两个字节，因为`\u00c0`完全代表一个[BMP](http://en.wikipedia.org/wiki/Plane_%28Unicode%29#Basic_Multilingual_Plane)字符：

```
string s = "\u00C0";
byte[] bytes = Encoding.Unicode.GetBytes(s);
Trace.WriteLine(BitConverter.ToString(bytes)); 
```

您应该阅读[Joel Spolsky 所著的《每个软件开发人员绝对、肯定必须了解 Unicode 和字符集（没有借口！）的绝对最低要求》](http://www.joelonsoftware.com/articles/Unicode.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-12T05:04:08.237

因为`\u00c0`不是 ASCII（0-127 范围）。结果，它被编码为问号 - `?`(0x3F)。

[请参阅有关ASCIIEncoding](http://msdn.microsoft.com/en-us/library/system.text.asciiencoding.aspx)的 MSDN 文章：

> ASCIIEncoding 对应于 Windows 代码页 20127。因为 ASCII 是 7 位编码，所以 ASCII 字符被限制为最低 128 个 Unicode 字符，从**U+0000 到 U+007F**。如果您使用 Encoding.ASCII 属性或 ASCIIEncoding 构造函数返回的默认编码器，则在执行编码操作**之前，该范围之外的字符将替换为问号 (?) 。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T05:09:07.687

第一步：您将 unicode char 转换为字符串，然后将其转换为 ASCII（但它是 unicode）。然后您尝试使用 unicode 转换器将其转换回来。

以下示例尽一切可能使我的回答更清楚：

```
 static void Main(string[] args)
    {
        string s = "\u00C0";
        Console.WriteLine(s);
        byte[] bytes = ASCIIEncoding.ASCII.GetBytes(s);
        Console.WriteLine(BitConverter.ToString(bytes));
        Console.WriteLine(ASCIIEncoding.ASCII.GetString(bytes));

        Console.WriteLine("Again");
        bytes = Encoding.UTF8.GetBytes(s);
        Console.WriteLine(BitConverter.ToString(bytes));
        Console.WriteLine(Encoding.UTF8.GetString(bytes));

        Console.ReadLine();
    } 
```

输出是：

```
A
3F
?
Again
C3-80
A 
```

顺便说一句，BitConverter.GetBytes 的定义是：

> 将指定字节数组的每个元素的数值转换为其等效的十六进制字符串表示形式。

# objective-c - “UIView”可能不响应“addCurrentTile”

> ID：15963423
> 
> 赞同：0
> 
> 时间：2013-04-12T05:00:54.947
> 
> 标签：objective-c

我有一个名为 boxView.h/m 的类和另一个名为 TileView.h/m

```
#import <UIKit/UIKit.h>
#import "TileView.h"

@interface BoxView : UIView {
}
- (void) addCurrentTile: (TileView*)aTile;
@end 
```

.m 文件中有一个方法：

```
-(void) addCurrentTile: (TileView*)aTile{
    [currentTurnTilesArray addObject:aTile];
} 
```

在 TileView.m 中，我需要调用 addCurrentTile。目前这似乎有效，但我收到警告说`'UIView' may not respond to 'addCurrentTile:'`

```
#import "TileView.h"
#import "BoxView.h"

@implementation TileView

- (void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{
[image setImage:[UIImage imageNamed:@"tileflipped.png"]];
[self.superview addCurrentTile:self];

} 
```

我试图阅读和了解更多关于从不同类调用方法的信息，但我似乎无法让这个警告消失。想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T05:05:57.693

使用演员表：

```
[(BoxView *)self.superview addCurrentTile:self]; 
```

# c++ - 如何使用 C++ 读取 PAC 文件

> ID：15963424
> 
> 赞同：0
> 
> 时间：2013-04-12T05:01:02.623
> 
> 标签：c++, proxy, libcurl, pac

我正在将 libcurl 用于 HTTP 请求。

如果用户有任何代理设置，我的应用程序应该能够理解

所以它可以是代理服务器的代理或自动代理配置的代理

我看到 libcurl 中没有对 PAC 的支持

由于我的应用程序使用 C++，是否有可用的扩展/解析器引擎？

感谢您阅读帖子

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T05:47:29.900

[PAC（代理自动配置）](http://en.wikipedia.org/wiki/Proxy_auto-config#The_PAC_File)文件只是具有`FindProxyForURL`返回代理配置字符串的功能的 Javascript。

从技术上讲，这个函数可以使用 Javascript 可以做的任何事情，所以你**必须**捆绑一些 Javascript 引擎来解释它。

[**`tiny-js`**](http://code.google.com/p/tiny-js/)（用 C++ 编写的简单单文件 javascript 解释器）是适合此任务的库。

**更新**：[**`pacparser`**](http://code.google.com/p/pacparser/)库几乎是专为解析 pac 文件而设计的即用型引擎。它的缺点是它捆绑了整个[`SpiderMonkey`Javascript 引擎](https://developer.mozilla.org/en-US/docs/SpiderMonkey)，这使得它成为一个相当繁重的解决方案——它会为你的项目二进制文件添加 1MB+ 来解析`pac`文件。

如果您可以破解`pacparser`使用`tiny-js`而不是`SpiderMonkey`，那将是非常好的解决方案。

# jquery - 输入类型文件不透明度 0 在 ie 中不能用于上传？

> ID：15963429
> 
> 赞同：0
> 
> 时间：2013-04-12T05:01:19.557
> 
> 标签：jquery, internet-explorer, styles

我正在页面中上传文件。这适用于 Firefox、Chrome、Opera。但在 IE 中它不起作用。因为我设置了样式`filter:alpha(opacity=0)`。

```
<form name="form1" action="" method="post" enctype="multipart/form-data" onsubmit="return sub()">
    <div id="FileUpload">
        <input name="filesToUpload[]" id="filesToUpload" type="file" size="24" multiple="" onChange="up()" style="opacity: 0; filter:alpha(opacity=0);" />
        <div id="BrowserVisible" onclick="$('#filesToUpload').click();"><input type="text" id="FileField" /></div>
    </div>
</form> 
```

如何在 IE 中修复它？

# ios - 从按钮中删除 UIImageView

> ID：15963430
> 
> 赞同：0
> 
> 时间：2013-04-12T05:01:26.043
> 
> 标签：ios, uiimageview

我用于此目的的代码

```
 if(editedImage !=nil)
{
    [selectionView1 removeFromSuperview];

    UIImageView *selectionView1 = [[UIImageView alloc] initWithImage:editedImage.image];

    [_buttonScroll addSubview:selectionView1];
}

else{
[_buttonScroll addSubview:selectionView1];
} 
```

我第一次执行时这样做了，然后editedImage为nil，所以它进入else然后稍后editedImage得到如下图像

```
 -(void)imagePickerController:(UIImagePickerController *)picker
      didFinishPickingImage : (UIImage *)image
                 editingInfo:(NSDictionary *)editingInfo
{

      NSLog(@"%@",image);
  editedImage   = [[UIImageView alloc] initWithImage: image];
    NSLog(@"%@",editedImage);
    // editedImage is UIImageView

    [picker dismissModalViewControllerAnimated:YES];
} 
```

所以它被填满，当我第二次执行我的第一个代码时，editedImage 不为空，它进入 if(editedImage !=nil) 条件，为此，现在我想删除按钮上的旧图像并添加这个新图像我从编辑后的图像中得到

所以问题是旧图像没有被删除我做错了什么你能给我一些建议吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T05:29:20.237

```
-(void)imagePickerController:(UIImagePickerController *)picker
      didFinishPickingImage : (UIImage *)image
                 editingInfo:(NSDictionary *)editingInfo
{

    [_buttonScroll setImage:image forState:UIControlStateNormal];

    [picker dismissModalViewControllerAnimated:YES];
} 
```

试试这个简单:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T05:06:49.993

尝试：

```
-(void)imagePickerController:(UIImagePickerController *)picker
      didFinishPickingImage : (UIImage *)image
                 editingInfo:(NSDictionary *)editingInfo
{

  NSLog(@"%@",image);
  if(editedImage)
     [editedImage removeFromSuperview];

  editedImage   = [[UIImageView alloc] initWithImage: image];
    NSLog(@"%@",editedImage);
    // editedImage is UIImageView

    [picker dismissModalViewControllerAnimated:YES];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T05:44:46.043

您需要做的是跟踪您正在添加的图像。您可以为要添加的图像保留一个属性变量，但更好的选择是只设置要添加的图像的标签。如果您将第一个 if 语句更改为如下：

```
//set a tag value to use (defined at the top of your file outside the @implementation)
#define PREVIOUS_VIEW_TAG 999

if(editedImage !=nil)
{
    UIView* previousImageView = [_buttonScroll viewWithTag:PREVIOUS_VIEW_TAG];
    [previousImageView removeFromSuperview];

    UIImageView *selectionView1 = [[UIImageView alloc] initWithImage:editedImage.image];
    selectionView1.tag = PREVIOUS_VIEW_TAG;

    [_buttonScroll addSubview:selectionView1];
}

else{
    selectionView1.tag = PREVIOUS_VIEW_TAG;
    [_buttonScroll addSubview:selectionView1];
} 
```

这应该让您跟踪您正在添加的视图。PREVIOUS_VIEW_TAG 的值可以是任何值，我刚刚选择了 999。

还要记住@Bhargavi 的建议，使用 [_buttonScroll setBackgroundImage:selectionView1] 然后使用 [_buttonScroll setBackgroundImage:nil] 删除；（或者只是通过设置新的 backgroundImage 覆盖）也可以。但是，要具体回答您的问题，也许可以考虑使用标签跟踪视图。

# email - 在指定时间从 php 发送电子邮件

> ID：15963431
> 
> 赞同：1
> 
> 时间：2013-04-12T05:01:29.043
> 
> 标签：email, sms, phpmailer, php

我正在尝试通过 php 在手机中设置“提醒”系统。我为我设置了一个表单来输入电子邮件（实际上是我的电话号码地址，因此它以 SMS 的形式发送）并向我自己发送消息。我正在使用基本代码：

```
 mail( $to, '$subject', $message ); 
```

现在，当 php 运行时，我的电子邮件会立即发送。有没有办法指定发送电子邮件的日期和时间？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T05:02:18.050

抱歉，不能再这样回答了。

是的，有一种方法：`CRON`工作

[谷歌](https://www.google.com/search?num=100&hl=en&site=&source=hp&q=PHP%20run%20cron&oq=PHP%20run%20cron&gs_l=hp.3..0l2j0i22i30j0i22i10i30j0i22i30l6.289.2974.0.3178.14.13.1.0.0.0.243.1464.7j2j3.12.0...0.0...1c.1.9.hp.HT2pjIw3Zr8)

对于 Windows，您可以

[谷歌](https://www.google.com/search?num=100&hl=en&site=&source=hp&q=cron%20job%20windows&oq=cron%20job%20windows&gs_l=hp.3..0l4j0i22i30l6.145.3275.0.3456.16.14.0.2.2.1.298.1779.7j2j4.13.0...0.0...1c.1.9.hp.9JqofiS-Y6w)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-12T05:14:59.737

通过 CRON 作业，我们可以设置重复执行特定 PHP 脚本的时间间隔。

这里的逻辑是：PHP 脚本检查指定的发送电子邮件的日期/时间是否已经通过。如果通过，请发送电子邮件。

如果我们将 CRON 作业间隔设置为 1 小时，在最坏的情况下，电子邮件可以延迟 1 小时发送，最好的情况可以低至 1 秒。

顺便说一句，您必须在表单中添加日期字段以指定您必须发送电子邮件的日期或时间

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T05:14:57.363

请使用 CRON Job 它会帮助你

CRON 作业由 Hosting 提供

# django - 哨兵错误--config=/etc/sentry.conf.py start

> ID：15963432
> 
> 赞同：0
> 
> 时间：2013-04-12T05:01:35.837
> 
> 标签：django, centos

请告诉我如何解决这个问题

我尝试在 CentOS 上安装安装和配置哨兵服务，当我尝试启动哨兵服务时，我收到此错误：

```
[root@felipeurrego ~]# source /var/www/sentry/bin/activate
(sentry)[root@felipeurrego ~]# sentry --config=/etc/sentry.conf.py start
Traceback (most recent call last):
  File "/var/www/sentry/bin/sentry", line 8, in <module>
    load_entry_point('sentry==5.4.5', 'console_scripts', 'sentry')()
  File "/var/www/sentry/lib/python2.6/site-packages/sentry-5.4.5-py2.6.egg/sentry/utils/runner.py", line 197, in main
    initializer=initialize_app,
  File "/var/www/sentry/lib/python2.6/site-packages/logan-0.5.5-py2.6.egg/logan/runner.py", line 155, in run_app
    management.execute_from_command_line([runner_name, command] + command_args)
  File "/var/www/sentry/lib/python2.6/site-packages/Django-1.4.5-py2.6.egg/django/core/management/__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "/var/www/sentry/lib/python2.6/site-packages/Django-1.4.5-py2.6.egg/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/var/www/sentry/lib/python2.6/site-packages/Django-1.4.5-py2.6.egg/django/core/management/__init__.py", line 252, in fetch_command
    app_name = get_commands()[subcommand]
  File "/var/www/sentry/lib/python2.6/site-packages/Django-1.4.5-py2.6.egg/django/core/management/__init__.py", line 101, in get_commands
    apps = settings.INSTALLED_APPS
  File "/var/www/sentry/lib/python2.6/site-packages/Django-1.4.5-py2.6.egg/django/utils/functional.py", line 184, in inner
    self._setup()
  File "/var/www/sentry/lib/python2.6/site-packages/Django-1.4.5-py2.6.egg/django/conf/__init__.py", line 42, in _setup
    self._wrapped = Settings(settings_module)
  File "/var/www/sentry/lib/python2.6/site-packages/Django-1.4.5-py2.6.egg/django/conf/__init__.py", line 93, in __init__
    mod = importlib.import_module(self.SETTINGS_MODULE)
  File "/var/www/sentry/lib/python2.6/site-packages/Django-1.4.5-py2.6.egg/django/utils/importlib.py", line 35, in import_module
    __import__(name)
  File "/var/www/sentry/lib/python2.6/site-packages/logan-0.5.5-py2.6.egg/logan/importer.py", line 68, in load_module
    return self._load_module(fullname)
  File "/var/www/sentry/lib/python2.6/site-packages/logan-0.5.5-py2.6.egg/logan/importer.py", line 92, in _load_module
    load_settings(self.config_path, allow_extras=self.allow_extras, settings=settings_mod)
  File "/var/www/sentry/lib/python2.6/site-packages/logan-0.5.5-py2.6.egg/logan/settings.py", line 49, in load_settings
    execfile(mod_or_filename, conf.__dict__)
    django.core.exceptions.ImproperlyConfigured: IndentationError('unexpected indent', ('/etc/sentry.conf.py', 58, 1, " SENTRY_URL_PREFIX = 'http://logs.felipeurrego.com'\n")) 
```

就这样

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T06:04:50.900

很清楚：

> django.core.exceptions.ImproperlyConfigured: IndentationError('unexpected indent', ('/etc/sentry.conf.py', 58, 1, "SENTRY_URL_PREFIX = ' [http://logs.felipeurrego.com](http://logs.felipeurrego.com) '\n"))

您`SENTRY_URL_PREFIX`在`/etc/sentry.conf.py`. Python 要求源代码文件中的所有内容都统一缩进。

# macos - 使用无代码 kext 隐藏音频设备

> ID：15963434
> 
> 赞同：2
> 
> 时间：2013-04-12T05:01:42.190
> 
> 标签：macos, usb, kernel, core-audio, iokit

我正在开发一个音频驱动程序，以使用来自 Apple 的音频反射器驱动程序示例代码进行一些自定义音频处理。使用核心音频应用程序将音频反射器驱动程序的输出传递给真正的 USB 音频硬件设备。现在我想从系统偏好设置中隐藏 USB 音频硬件设备，以便用户无法选择 USB 音频硬件输出设备作为默认输出设备。使用“SampleUSBAudioOverrideDriver”无代码 kext，我可以更改输出接口的名称，但不能隐藏它。关于如何隐藏 USB 音频硬件输出设备的任何想法。

提前致谢。

文派

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-01T09:17:59.947

经过对这个主题的大量研发，我发现示例代码中提供的无代码kext，SampleUSBAudioOverrideDriver没有使用属性集来隐藏设备接口。

# firefox-os - B2G 模拟器中没有主屏幕按钮

> ID：15963450
> 
> 赞同：1
> 
> 时间：2013-04-12T05:03:56.857
> 
> 标签：firefox-os, gaia

我通过从 mozilla repo 下载最新版本来构建 b2g 和 gaia 的代码。

构建完成后..当我启动时，看不到主页按钮。请帮我解决这个问题...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:20:48.020

在 B2G 桌面中，您可以使用 FN+LEFT (OSX) 或 HOME (Windows) 模拟主页按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T13:52:01.083

Firefox OS Simulator[1] 是一个 Firefox 插件，它启动 B2G 桌面并提供模拟主页按钮，单独的 B2G 桌面版本没有这个。但是您可以只使用键盘上的主页按钮！

1.  [https://addons.mozilla.org/en-US/firefox/addon/firefox-os-simulator/](https://addons.mozilla.org/en-US/firefox/addon/firefox-os-simulator/)

# java - 用于级联显示的扫雷递归

> ID：15963454
> 
> 赞同：0
> 
> 时间：2013-04-12T05:04:18.417
> 
> 标签：java, minesweeper

所以我有一种方法可以在扫雷游戏中级联显示。我有一个解决方案板和一个当前网格。但问题是，当我遇到 0 个空格时，递归调用时会出现堆栈溢出错误。

有没有人有任何想法？

```
public static void revealCell(int row, int col, char[][] grid, char[][] answers) {
    System.out.println(row + " " + col);
    if(row < 0|| row > 4){
        System.out.println("bad");
        return;
    }
    if(col < 0|| col > 4){
        System.out.println("bad");
        return;
    }
    if(answers[row][col] == 'B'){
        grid[row][col] = answers[row][col];
        return;
    }
    if(answers[row][col] == '1'||answers[row][col] == '2'||answers[row][col] == '3'||answers[row][col] == '4'||answers[row][col] == '5'){
        grid[row][col] = answers[row][col];
        return;
    }

    if(answers[row][col] == '0'){
        System.out.println("go");
        grid[row][col] = answers[row][col];
        for(int i = row-1; i <= row +1; i++){
            for(int j = col-1; j<= col +1;j++){
                revealCell(i,j, grid, answers);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T05:11:25.103

这是因为您的 fors`revealCell()`迫使它一遍又一遍地被称为同一个 0 单元格。您可以跟踪您已经访问过的单元格，并在调用之前进行检查`revealCell()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T05:13:59.407

您的嵌套循环重复调用`revealCell(row, col, ...)`. 要么重组你的循环，要么简单地插入一个`if i!=row && j!=col`警卫。

在此更改之后，您可能仍然有无限递归。自从我编写扫雷游戏以来已经有一段时间了，但是 IIRC 我使用了四种不同的递归调用以避免重复检查相同的单元格：一个调用从地雷碰撞点搜索了棋盘的左上象限（增加-行，递减列），一个搜索右上象限（递增行，递增列）等。

# jquery - 如何删除滚动条以使网站适合浏览器

> ID：15963461
> 
> 赞同：3
> 
> 时间：2013-04-12T05:04:35.787
> 
> 标签：jquery, html, browser

我用我的笔记本电脑做了一个网站。在我的笔记本电脑上测试我的网站时，任何浏览器中都没有出现任何水平或垂直的滚动条。

但是，如果现在我在其他计算机上测试我的网站，它会显示水平和垂直滚动条。

为了避免这种情况，我使用了 css 属性`body{zoom: 70%;}`。但是这段代码在少数浏览器中运行，也只在少数页面中运行。

谁能建议我解决我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T05:06:42.750

你总是可以使用`overflow: hidden;`我相信。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T05:07:42.813

```
#main {
width: 1399px;
margin: 20px auto 0 auto;
} 
```

`width`on是问题，删除它`#main`以摆脱水平滚动条或使用`width: 100%;`. 不要担心垂直滚动条，如果内容比视口长，它们**就会**出现。

我还看到你的标记有内容表格，除了表格数据之外，不要使用表格。祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T05:09:32.430

您可能无法避免所有浏览器上的垂直滚动条。通常，内容是有意在网络上向下流动的。为了避免水平滚动条，您需要避免页面上的元素具有静态宽度。如果您将页面上的所有元素指定为百分比宽度，则页面将适当地缩放到浏览器的宽度。在大多数情况下，您确实需要设置最小宽度。基本上，您需要了解不同的布局类型。这是有关该主题的资源： http: [//coding.smashingmagazine.com/2009/06/02/fixed-vs-fluid-vs-elastic-layout-whats-the-right-one-for-you/](http://coding.smashingmagazine.com/2009/06/02/fixed-vs-fluid-vs-elastic-layout-whats-the-right-one-for-you/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T05:19:20.093

好吧，也许这对你有帮助。

```
#main {
width: 90%;
margin: 20px auto 0 auto;
} 
```

# java - 使用四个点的 OpenCV 裁剪图像

> ID：15963464
> 
> 赞同：1
> 
> 时间：2013-04-12T05:04:44.210
> 
> 标签：java, android, image, opencv, crop

我正在尝试裁剪图像然后能够显示图像。我在两个数组中有四个点，它会形成一个矩形。我有一个我认为可以完成工作的代码，但它给出了一个错误。这是我希望你能帮助我的代码。我正在使用 android 并且仅使用 Java。

```
int startX =locListX.get(0);
int startY =locListY.get(0);
Collections.sort(locListX);
Collections.sort(locListY);
int width=locListX.get(3)-locListX.get(0);
int height=locListY.get(3)-locListY.get(0);
Mat image = mFind;
Rect rectCrop = new Rect(startX, startY, width, height);
Mat imCrop=  new Mat(image,rectCrop); 
Utils.matToBitmap(imCrop, bmp5);
mGrayView.setImageBitmap(bmp5); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-04-26T11:07:02.407

在这种方法中，您可以获得四个点和文件垫，然后您可以使用以下方法剪切此图像：

```
 public Bitmap warpDisplayImage(Mat inputMat) {
List<Point> newClockVisePoints = new ArrayList<>();

int resultWidth = inputMat.width();
int resultHeight = inputMat.height();

Mat startM = Converters.vector_Point2f_to_Mat(orderRectCorners(Previes method four poit list(like : List<Point> points)));

Point ocvPOut4 = new Point(0, 0);
Point ocvPOut1 = new Point(0, resultHeight);
Point ocvPOut2 = new Point(resultWidth, resultHeight);
Point ocvPOut3 = new Point(resultWidth, 0);

    ocvPOut3 = new Point(0, 0);
    ocvPOut4 = new Point(0, resultHeight);
    ocvPOut1 = new Point(resultWidth, resultHeight);
    ocvPOut2 = new Point(resultWidth, 0);
}

Mat outputMat = new Mat(resultWidth, resultHeight, CvType.CV_8UC4);

List<Point> dest = new ArrayList<Point>();
dest.add(ocvPOut3);
dest.add(ocvPOut2);
dest.add(ocvPOut1);
dest.add(ocvPOut4);

Mat endM = Converters.vector_Point2f_to_Mat(dest);

Mat perspectiveTransform = Imgproc.getPerspectiveTransform(startM, endM);

Imgproc.warpPerspective(inputMat, outputMat, perspectiveTransform, new Size(resultWidth, resultHeight), Imgproc.INTER_CUBIC);

Bitmap descBitmap = Bitmap.createBitmap(outputMat.cols(), outputMat.rows(), Bitmap.Config.ARGB_8888);
Utils.matToBitmap(outputMat, descBitmap);

return descBitmap; 
```

}

# ruby-on-rails - ActiveRecord::RecordInvalid：验证失败：Gmaps4rails 地址尝试使用 gmaps4rails 将 CSV 导入模型时地址无效错误

> ID：15963466
> 
> 赞同：1
> 
> 时间：2013-04-12T05:04:55.527
> 
> 标签：ruby-on-rails, csv, gmaps4rails

我正在将一千条记录 csv 导入具有 gmap4rails 地理编码的模型。在十几条记录之后，导入一直失败，但总是在不同的记录上。数据看起来还不错，因为它在一次尝试中导入了一条记录，然后在同一条记录上又失败了。这是模型代码：

```
require 'csv'

  validates :name, :uniqueness  => true
  validates :address, :presence  => true
  acts_as_gmappable
  def gmaps4rails_address
    "#{self.address} New Orleans, LA #{self.zip}"
      rescue ActiveRecord::RecordInvalid  
        print "err"
        end

  def self.import_restaurants()

    CSV.foreach('lib/uploads/NOLA_Restaurants_Basic.csv', :headers => true) do |row|
        record = Restaurant.new(
            :name     => row[0], 
            :address  => row[1], 
            :zip      =>  row[2], 
        )
        if record.address.valid?
          record.save!  

        end
    end
  end 
```

我正在从控制台运行 Restaurant.import_restaurants()。

CSV 的一些示例行

```
name    address zip
ORLEANS CLUB    5005  ST CHARLES AVE    70115
LOUISIANA CLUB  707  UNION ST   70130
HOTEL MONTELEONE    214  ROYAL ST   70130
N O LAWN TENNIS CLUB    5353  LAUREL ST 70115
DOMILISES BAR   5240  ANNUNCIATION ST   70115 
```

# c# - oData 中的 Where 子句

> ID：15963468
> 
> 赞同：1
> 
> 时间：2013-04-12T05:05:11.993
> 
> 标签：c#, wcf-data-services, odata

是否可以在 OData 中使用此代码？

```
 IQueryable<CallLogInfo> CallLogInfos = _callCenterServiceAccessor.CallLogInfos.Where(x => x.LogId == logid);
            var log = CallLogInfos.ToList();
            return log.Any(); 
```

我检查了它生成的请求，我看到了这个：

```
http://services/CallCenter/CallCenterDataService.svc/CallLogInfos(1364974501.4) 
```

所以得到这个错误：

```
<m:message xml:lang="en-US">Resource not found for the segment 'CallLogInfo'.</m:message> 
```

但是当我手动向这个请求 url 发出请求时：

```
http://services/CallCenter/CallCenterDataService.svc/CallLogInfos 
```

没关系。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T09:52:58.610

据我所知，像您的代码这样的请求应该是可能的。

假设 LogId 是您的 OData 服务的 Key 列，您的代码

```
CallLogInfos.Where(x => x.LogId == logid); 
```

将由 OData 服务在内部转换为

```
http://services/CallCenter/CallCenterDataService.svc/CallLogInfos(logid) 
```

这是获取具有特定 ID 的元素的标准语法。

您显示的错误消息被抛出，如果对 Id 的查询未在列表中找到条目，您是否检查过您提供的 Id 是否正确？

（如果这是问题所在，您可以通过设置服务上下文的 IgnoreResourceNotFoundException 属性来关闭此行为[（请参阅 MSDN）](http://msdn.microsoft.com/en-us/library/system.data.services.client.dataservicecontext.ignoreresourcenotfoundexception.aspx)）

在我进行的测试中，像您这样的查询确实有效，也许您的 Odata 服务实现包含错误？

[您可以使用LinqPad 之](http://www.linqpad.net/)类的工具来尝试您的代码和服务，这有助于尝试类似的事情。

# c# - 禁用输入类型单选按钮从cs页面单击并使用js向用户发送警报？

> ID：15963472
> 
> 赞同：1
> 
> 时间：2013-04-12T05:05:47.180
> 
> 标签：c#, javascript, asp.net, .net, web

我有一个单选按钮，它对经理禁用，但对其需要从 cs 页面单选按钮 onclick 处理的其他人启用。从 aspx 禁用收音机的代码是

```
<INPUT type="radio" name="myButton" value="theValue"
onclick="this.checked=false;
alert('Sorry, this option is not for manager!')"> 
```

如何在我正在做的cs页面中做到这一点

```
rbtnOpen.Attributes.Add("OnClick", "this.checked=false; alert('Sorry, this option is not available!')"); 
```

它工作正常并且还显示警报，但是当页面刷新时。假设我有 3 个统计数据 A、B、C.... 对于一个项目 B 被选择为经理的无线电如果他单击 A 或 C 应该在关闭警报后提示警报它应该再次显示 B ..在我的情况下它提示警报，但所有单选按钮都取消选中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T05:34:06.553

尝试这个

```
 <!DOCTYPE html>
            <html>
            <head>
            <script>
            function check()
            {

             alert('Sorry, this option is not available!');
             document.getElementById("b").checked=true;
            }
            </script>
            </head>
            <body>

            A<input type="radio" name="gender" id="a" value="a" onclick="check()"/>
            B<input type="radio" name="gender" id="b" value="b" />
            C<input type="radio" name="gender" id="c" value="c" onclick="check()"/>

            </body>
            </html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T13:11:38.487

为什么不完全禁用管理器的控件，而不是将其显示为可点击的输入？这样一来，您就可以更清楚地说明经理不能使用该选项。

# batch-file - 避免在循环的批处理脚本中覆盖相同的文本文件

> ID：15963486
> 
> 赞同：-1
> 
> 时间：2013-04-12T05:06:39.930
> 
> 标签：batch-file

我在编写批处理脚本方面真的很新，但我试图在多个文件中找到所有出现的字符串，并使用 for 循环将这些字符串写入 txt 文件。这是我所拥有的：

```
for %%i in (a.log b.log c.log) do 
(
   find /I "error" %%i > check.txt
) 
```

但不知何故，`check.txt only contains the strings from c.log and not from the previous two, probably overwrote`.

有没有办法避免覆盖？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T05:09:43.327

`>`重新创建一个文件。

`>>`附加到现有文件，如果它不存在则创建它。

# javascript - IE 中的 Javascript Outerhtml 错误

> ID：15963491
> 
> 赞同：0
> 
> 时间：2013-04-12T05:06:50.290
> 
> 标签：javascript, jquery

我有一个显示和隐藏一些 html 内容的脚本。我的代码是这样的

```
 $(".head-text").live('click', function (event) {

        var header = $(this);
        var listid = header.find('strong').attr("data-id");
        var list = "#" + listid;
        var ajaxManager = $.manageAjax.create('cacheQueue', {
            queue: true,
            cacheResponse: false
        });
        if ($(list).length == 0) {
            $("#ajax-loading-01").show();
            ajaxManager.add({
                type: 'GET', url: '/ajaxhandler', data: { showlist: "1", listid: listid }

             , success: function (data) {

                 header.parent().append($(data).find(list)[0].outerHTML);

                 header.parent()._removeClass('show').addClass('hide');

             }
             , complete: function () {

                 $("#ajax-loading-01").hide();
             }
             , error: function (err) {

             }
            });

            return false;
        }
    }); 
```

在 chrome 和 mozilla 中工作很好，但`outerHTML`在 IE - 中不起作用`header.parent().append($(data).find(list)[0].outerHTML))`。我该如何解决这个问题？

# c# - 数据导出网格视图到excel

> ID：15963493
> 
> 赞同：0
> 
> 时间：2013-04-12T05:06:59.553
> 
> 标签：c#, asp.net

我正在将数据网格视图导出到 Excel 工作表，它可以工作。

网格视图中有 10 列，但我只想在 excel 表中显示 5 列。

我该如何解决这个问题？

```
 protected void btnexcel_Click1(object sender, EventArgs e)
    {

    Response.Clear();
    Response.Buffer = true;

    Response.AddHeader("content-disposition",
    "attachment;filename=ActualsAndBudgets.xls");
    Response.Charset = "";
    Response.ContentType = "application/ms-excel";
    Response.Cache.SetCacheability(HttpCacheability.NoCache);
    StringWriter sw = new StringWriter();
    HtmlTextWriter htw = new HtmlTextWriter(sw);
    gvdetails.AllowPaging = false;
    fillgrid();
    gvdetails.RenderControl(htw);
    Response.Write(sw.ToString());
    Response.End();
    gvdetails.AllowPaging = true;
    fillgrid();

    }
   public override void VerifyRenderingInServerForm(Control control)
   {

   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T05:11:33.337

使用此代码可能会有所帮助。并且必须在您的项目中添加 iTextSharp dll。

```
protected void btnExportExcel_Click(object sender, EventArgs e)
    {
        Response.Clear();
        Response.Buffer = true;
        Response.AddHeader("content-disposition", "attachment;filename=GridViewExport.xls");
        Response.Charset = "";
        Response.ContentType = "application/vnd.ms-excel";

        StringWriter sw = new StringWriter();
        HtmlTextWriter hw = new HtmlTextWriter(sw);
        GridView1.AllowPaging = false;

        // Re-Bind data to GridView 

        using (CompMSEntities1 CompObj = new CompMSEntities1())
        {
            Start = Convert.ToDateTime(txtStart.Text);
            End = Convert.ToDateTime(txtEnd.Text);

            GridViewSummaryReportCategory.DataSource = CompObj.SP_Category_Summary(Start, End);
            SP_Category_Summary_Result obj1 = new SP_Category_Summary_Result();
            GridView1.DataBind();
           GridView1.Visible = true;
            ExportTable.Visible = true;
        }

        //Change the Header Row back to white color

        GridView1.HeaderRow.Style.Add("background-color", "#FFFFFF");

       GridView1.Style.Add(" font-size", "10px");

        //Apply style to Individual Cells

        GridView1.HeaderRow.Cells[0].Style.Add("background-color", "green");
        GGridView1.HeaderRow.Cells[1].Style.Add("background-color", "green");
        GridView1.HeaderRow.Cells[2].Style.Add("background-color", "green");
        GridView1.HeaderRow.Cells[3].Style.Add("background-color", "green");
        GridView1.HeaderRow.Cells[4].Style.Add("background-color", "green");

        for (int i = 1; i < GridView1.Rows.Count; i++)
        {
            GridViewRow row = GridView1.Rows[i];

            //Change Color back to white

            row.BackColor = System.Drawing.Color.White;

            //Apply text style to each Row

        //    row.Attributes.Add("class", "textmode");

            //Apply style to Individual Cells of Alternating Row

            if (i % 2 != 0)
            {
                row.Cells[0].Style.Add("background-color", "#C2D69B");
                row.Cells[1].Style.Add("background-color", "#C2D69B");
                row.Cells[2].Style.Add("background-color", "#C2D69B");
                row.Cells[3].Style.Add("background-color", "#C2D69B");
                row.Cells[4].Style.Add("background-color", "#C2D69B");
            }
        }
        GridView1.RenderControl(hw);

        //style to format numbers to string

        string style = @"<style> .textmode { mso-number-format:\@; } </style>";

        Response.Write(style);
        Response.Output.Write(sw.ToString());
        Response.Flush();
        Response.End();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T06:45:15.710

你可以试试下面的代码：

```
protected void ConvertToExcel_Click(object sender, System.EventArgs e)
{
Response.ContentType = "application/vnd.ms-excel";
Response.AddHeader("content-disposition",     "attachment;filename=ContactMailingAddress.xls");
Response.Charset = "";
StringWriter sw = new StringWriter();
HtmlTextWriter hw = new HtmlTextWriter(sw);
ContactMailingView.AllowPaging = false;
ContactMailingView.DataBind();

    //Apply style to Individual Cells

    ContactMailingView.HeaderRow.Cells(0).Style.Add("background-color", "yellow");
ContactMailingView.HeaderRow.Cells(1).Style.Add("background-color", "yellow");
ContactMailingView.HeaderRow.Cells(2).Style.Add("background-color", "yellow");
ContactMailingView.HeaderRow.Cells(3).Style.Add("background-color", "yellow");
ContactMailingView.HeaderRow.Cells(4).Style.Add("background-color", "yellow");

for (int i = 0; i <= ContactMailingView.Rows.Count - 1; i++) {
    GridViewRow row = ContactMailingView.Rows(i);

            //Change Color back to white
    row.BackColor = System.Drawing.Color.White;

            //Apply text style to each Row
    row.Attributes.Add("class", "textmode");

            //Apply style to Individual Cells of Alternating Row
    if (i % 2 != 0) {
        row.Cells(0).Style.Add("background-color", "#C2D69B");
        row.Cells(1).Style.Add("background-color", "#C2D69B");
        row.Cells(2).Style.Add("background-color", "#C2D69B");
        row.Cells(3).Style.Add("background-color", "#C2D69B");
        row.Cells(4).Style.Add("background-color", "#C2D69B");

    }
}

     ContactMailingView.RenderControl(hw);

    //style to format numbers to string
string style = "<style>.textmode{mso-number-format:\\@;}</style>";
Response.Write(style);
Response.Output.Write(sw.ToString());
Response.Flush();
Response.End(); 
```

}

我从我在[dotNetFromManila 博客中的帖子中获取的](http://dotnetfrommanila.blogspot.com)

希望它可以帮助你。

# android - 如何在手机中安装包含 android 中 sqlite 数据库的应用程序

> ID：15963494
> 
> 赞同：0
> 
> 时间：2013-04-12T05:07:06.600
> 
> 标签：android

我想安装我的应用程序，其中包含注册表单，其用户名和密码存储在 sqlite 数据库中。在 copyiny .apk 文件之后，我的应用程序不包含任何用于该工作的数据库表。所以我的问题是如何在我安装在 android 设备上的应用程序中导入这个数据库，它在模拟器上运行良好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T06:58:10.973

你有没有初始化数据库类对象

```
EditDatabase db=new EditDatabase(this); 
```

onCreate 或 onResume 活动？如果没有，则初始化它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T08:16:24.337

## 从 logcat 输出更新

根据 logcat 输出，它表明这是一个未处理的异常。即它发生在方法`try{} ... catch{}`块之外`onClick(View)`。

这意味着这是以下两行之一的问题：

```
 unname = username1.getText().toString();
   storePassword1 = db.getdata(unname); 
```

我的感觉是`username1`null 因为它没有在您的布局 XML 文件中引用。

以下是您应该如何检查 - 用这些空检查替换这两行：

```
 if (unname != null)
    {
        unname = username1.getText().toString();
    }
    else
    {
        Log.d("MyTag", "unname is null");

    }
    if (storePassword1 != null)
    {
        storePassword1 = db.getdata(unname);
    }
    else
    {
        Log.d("MyTag", "storePassword1 is null");
    }
    if (unname == null || storePassword1 == null)
    {
        return;
    } 
```

再次运行代码，再次检查 logcat 输出，看看它是否告诉您问题所在。

也尽量不要使用`System.out(String)`- 而是使用`Log.d(String, String)`方法。这些在 Android 上更有用。

* * *

## 原来的

首先，请提供堆栈跟踪 - 它会显示空指针错误发生的位置。

对于 Android，最有用的方法是使用`adb logcat`终端命令。这会将您的 Android 设备/模拟器的内部日志输出到屏幕上，以便您查看出了什么问题。

在您的`catch{}`块中，我将输入以下行：

```
Log.d("MyTag", "Stack Trace of exception...", e); 
```

这会将文本和有关错误的信息输出`e`到此日志 - 我认为它将包括堆栈跟踪。

复制以“MyTag”开头的行并将它们粘贴到您的问题中。

* * *

其次，在没有堆栈跟踪的情况下，确认这 3 个变量通常不是`null`：

*   用户名1
*   D b
*   密码（如果应用程序确实崩溃了，`NullPointerException`那么这个不是问题，因为异常将由`catch{}`块处理）

即确认您在单击事件之前已将它们全部初始化。

# windows - 如何在 GForth (GNU Forth) 的文件名中包含空格？

> ID：15963496
> 
> 赞同：1
> 
> 时间：2013-04-12T05:07:11.007
> 
> 标签：windows, macos, unix, forth, gforth

当我尝试在 Unix（和 Windows）上包含一个文件时，它在包含空格时将不起作用。例如，这些将不起作用：

```
include ~/Space Folder/test.fs
include ~/Space\ Folder/test.fs
include "~/Space Folder/test.fs"
include "~/Space\ Folder/test.fs"
include C:\Users\Lim Ding Wen\test.fs
include C:\Users\Lim/ Ding/ Wen\test.fs
include "C:\Users\Lim Ding Wen\test.fs" 
```

那么..有没有办法使这项工作？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-03T09:29:37.907

使用这个`included`词：

```
s" My File With Spaces.fs" included 
```

波浪号扩展可能不起作用（尚未测试）。如果不指定绝对路径，那么文件需要在`GFORTHPATH`

# actionscript-3 - 如何使用图形工具在 flex 中绘制角度

> ID：15963497
> 
> 赞同：0
> 
> 时间：2013-04-12T05:07:15.477
> 
> 标签：actionscript-3, flash, apache-flex, flash-builder

如何在flex中绘制角度flex中有用于绘制矩形，椭圆等的工具没有找到任何可以绘制角度的东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T06:44:24.243

如果您的意思是简单的弧线，您可以使用

```
graphics.curveTo() 
```

方法。看：[关于绘制直线和曲线的 Adob​​e 帮助。](http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b90204-7dd9.html)

如果您想要更好的外观：[这里](http://www.emanueleferonato.com/2009/09/22/drawing-arcs-with-as3/)

对于 Angles，Emanuele Feronoto 算法的修改版本：

```
package {
import flash.display.Sprite;
public class angle extends Sprite {
    var my_canvas:Sprite = new Sprite();
    var deg_to_rad=0.0174532925;
    public function angle() {
        addChild(my_canvas);
        my_canvas.graphics.lineStyle(20,0xff0000,1);
        draw_angle(my_canvas,250,200,150,14,180);
    }
    public function
      draw_angle(movieclip,center_x,center_y,radius,angle_from,angle_to) {
        var angle=angle_from;
        var px=center_x+radius*Math.cos(angle*deg_to_rad);
        var py=center_y+radius*Math.sin(angle*deg_to_rad);
        movieclip.graphics.moveTo(center_x, center_y);
        movieclip.graphics.lineTo(px,py);
        angle=angle_to;
        px=center_x+radius*Math.cos(angle*deg_to_rad);
        py=center_y+radius*Math.sin(angle*deg_to_rad);
        movieclip.graphics.moveTo(center_x, center_y);
        movieclip.graphics.lineTo(px,py);
     }
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T08:33:36.397

好吧，您的问题有点不清楚，因为角度是度量单位，因此您实际上不能像使用其他图形对象那样“绘制”它们。如果我问如何绘制摄氏温度，那将是相同的-我确实搜索了该方法，但找不到。因此，您要么想要 1\. 绘制 2 条线（或射线）形成某个角度，要么 2\. 绘制“图形”角度表示 - 您可以使用已经回答的弧线来完成。此外，角度可以用弧度、度数和刻度表示，因此您必须确定首选的输入单位。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T06:01:48.513

.graphics 中没有用于绘制天使的任何特殊工具。您可以使用标准 graphics.lineTo(x,y) 工具自己制作角度绘图实用程序。如果你能具体化你的目标，我可以帮你。

# php - Yii 框架 - 改变数据库

> ID：15963503
> 
> 赞同：1
> 
> 时间：2013-04-12T05:07:27.013
> 
> 标签：php, yii

我刚刚迁移到 yii，我创建了一个模型，它用 gii 创建了一个 CActiveRecord，然后我在数据库中进行了一些更改，然后它让我感到困惑，现在我的问题是：

1 - 在对数据库进行任何更改后，我应该使用 gii 重新创建模型吗？为什么 yii 中的 Active Record 比其他框架如 zend 或 codigniter 复杂得多！？

**编辑 ：**

如果我们不应该改变模型类，我们应该把我们的数据库函数放在哪里！！？模型不是这样做的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T05:59:48.037

如果我用 gii 生成模型，它只有一次性工作。快速开始使用这个模型。之后，如果您更改数据库结构（顺便说一句，您没有告诉您所做的更改类型），您可以手动更改模型。

如果您通过 gii 生成模型并且没有更改模型，您可以再次重新生成它（因为没有进行手动更改）。如果您已经更改了它，则无需努力进行更改（并开始学习 ActiveRecord）。

只是为了学习从头开始创建模型（没有 gii）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-15T17:18:23.810

EASY
1）进入您的应用程序 index.php 创建全局变量

```
<?php

$GLOBALS['database'] = "mydbname"; //database name

// change the following paths if necessary
$yii=dirname(__FILE__).'/../yii/framework/yii.php';
$config=dirname(__FILE__).'/protected/config/main.php';

// remove the following lines when in production mode
defined('YII_DEBUG') or define('YII_DEBUG',true);
// specify how many levels of call stack should be shown in each log message
defined('YII_TRACE_LEVEL') or define('YII_TRACE_LEVEL',3);

require_once($yii);
Yii::createWebApplication($config)->run(); 
```

2）在我的模型中创建一个构造方法

```
class Employees extends CActiveRecord
{

    function __construct()
    {
        $dbname = $GLOBALS['database'];

        Yii::app()->db->setActive(false);
        Yii::app()->db->connectionString = 'mysql:host=localhost;dbname='.trim($dbname);
        Yii::app()->db->setActive(true);
    } 
```

3) 如何在我的控制器中使用

```
public function actionVer3()
{
   $GLOBALS['database']="classicmodels"; //dbname
   $employee = Employees::model()->findByAttributes(array("employeeNumber"=>"1002"));

   print_r($employee);

   echo "<br><hr>";
   //$this->render("index");
} 
```

简单的方法tnx。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T05:34:32.587

您始终可以使用 Gii 预览它想要应用于现有模型的更改（使用差异链接）。然后您可以应用它们，但如果您在模型（方法）中插入了自定义规则`rules()`，它们将被覆盖。是的，如果您对数据库表进行任何更改，您将不得不更新您的 CActiveRecord 子类（您的模型），否则 Yii 将无法看到您的新字段，或者如果它尝试访问它认为拥有的字段则失败但已从数据库中删除。

没有什么能阻止您在模型中编写自定义方法。但是“放置我们的数据库功能”到底是什么意思？

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-12T05:14:57.833

我认为，理想情况下，您应该在数据库结构更改后重新创建模型。

在我们的项目中，我们遵循规则，

> 请勿对 gii 生成的模型进行任何更改。这样，如果将来有 DB 更改，我们可以直接重新生成模型，而无需进行合并。

这也符合设计哲学，

```
**Objects** hide their data behind abstractions and expose functions that operate on that data.

**Data structures**
expose their data and have no meaningful functions. It only has methods to operate on data. 
```

**ActiveRecords（yii 中的模型）只不过是数据结构。通过在 ActiveRecords 中添加业务规则，您可以混合数据结构和对象。**

# windows-7 - usersendinput 和 userpostmessage 挂钩

> ID：15963507
> 
> 赞同：1
> 
> 时间：2013-04-12T05:07:45.030
> 
> 标签：windows-7, kernel, hook, wdk

我想在 Windows 7 中挂钩 usersendinput 和 userpostmessage 挂钩。它不是由 SSDT 导出的。所以我无法通过 SSDT 挂钩来完成此操作。我想为这些 api 编写自己的 api 处理程序。我该如何完成这个？SSDT 阴影挂钩是可能的或任何其他方式来挂钩这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T15:40:53.723

首先你必须得到 SSDT Shadow 的地址。接下来获取系统中的所有句柄并遍历所有句柄以获取 csrss.exe 的 PID。附加到 csrss.exe 进程，获取系统调用索引（例如从此 - [WIN32K.sys 系统调用表](http://j00ru.vexillium.org/win32k_syscalls/)并用您的函数替换原始系统函数。我可能会发布示例，但我没有要测试的 Windows 7 机器。

# .net - X509Certificate2.PublicKey 返回的线程安全和 RSACryptoServiceProvider

> ID：15963514
> 
> 赞同：1
> 
> 时间：2013-04-12T05:08:36.087
> 
> 标签：.net, cryptography, rsacryptoserviceprovider

`RSACryptoServiceProvider`被记录为可能不是线程安全的。不幸的是，它使用内部调用，`EncryptKey`所以我无法分析代码来验证它。那么是否知道它实际上是否是线程安全的？

我问是因为我`System.Security.Cryptography`至少有一次（`MD5`）遇到了线程安全问题。

[我的问题与Mitigating RsaCryptoServiceProvider thread safety issues on a web server](https://stackoverflow.com/questions/6140764/mitigating-rsacryptoserviceprovider-thread-safety-issues-on-a-web-server)非常相似，但是这个问题并没有得到真正的回答（在高负载下是否失败的实验并不能保证线程安全）。

# ruby-on-rails-3 - Rails 请求标头中的客户端 IP 地址

> ID：15963532
> 
> 赞同：0
> 
> 时间：2013-04-12T05:10:10.153
> 
> 标签：ruby-on-rails-3, ip-address, request-headers

我可以从请求标头访问客户端的 IP 地址吗？如果可以，如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T05:16:18.140

是的你可以。

```
visitor_ip = request.env['REMOTE_ADDR'] 
```

# python - 动态导入已编译的 .pyc 粘贴到 library.zip

> ID：15963533
> 
> 赞同：0
> 
> 时间：2013-04-12T05:10:10.997
> 
> 标签：python, python-import

当我运行程序的已编译 exe 时，是否可以将已编译的 .pyc 文件粘贴到库中并在不重新打开我的 .exe 的情况下动态导入它？

似乎当您运行 exe 时，所有导入的模块都保存在计算机内存中。所以即使库中导入的模块被删除，也不会报错。

谢谢。

# opencv - 线性全景图 OpenCV 的 SURF 特征检测

> ID：15963538
> 
> 赞同：2
> 
> 时间：2013-04-12T05:11:12.283
> 
> 标签：opencv, video-processing, panoramas

我已经开始了一个使用视频创建长场景的线性/条形全景图的项目。这意味着全景图不围绕中心旋转，而是平行于场景移动，例如。安装在车辆上的视频摄像头垂直于街道立面。

我将遵循的步骤是：

1.  从视频中捕获帧
2.  特征检测 - (SURF)
3.  特征跟踪 (Kanade-Lucas-Tomasi)
4.  单应性估计
5.  拼接马赛克。

到目前为止，我已经能够从视频中保存单个帧并仅在两张图像上完成 SURF 特征检测。我不是要求有人解决我的整个项目，但我一直在尝试完成对捕获的剩余帧的 SURF 检测。

**问题：**如何将 SURF 检测应用于连续帧？我将其保存为 YAML 还是 xml？

对于我的特征检测，我使用了 OpenCV 的示例 find_obj.cpp 并只是更改了使用的图像。

有没有人经历过这样的项目？我想实现的一个例子是来自 Iwane 技术[http://www.iwane.com/en/2dpcci.php](http://www.iwane.com/en/2dpcci.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T07:01:31.720

在从事类似项目时，我创建了一个`std::vector`SURF 关键点（点和描述符），然后使用它们来计算成对匹配。该向量在逐帧阅读电影时被填充，但它对一系列图像的工作方式相同。

除非您的资源非常有限或序列非常长，否则没有足够的点来饱和您的内存（并使用 yml/xml 文件）。

请注意，您不需要特征跟踪部分，至少在大多数标准情况下：SURF 描述符匹配还可以为您提供单应性估计（无需跟踪）。

**读取向量**

首先声明一个 Mat 的向量，例如`std::vector<cv::Mat> my_sequence;`。那么，你有两个选择：

1.  要么您知道帧数，然后将矢量调整为正确的大小。然后，对于每一帧，将图像读取到某个变量并将其复制到序列中的正确位置，使用`my_sequence.at(i) = frame.clone();`或`frame.copyTo(my_sequence.at(i));`

2.  或者您事先不知道大小，您只需`push_back()`照常调用该方法：`my_sequence.push_back(frame);`

# php - ADOdb 执行查询不起作用

> ID：15963543
> 
> 赞同：0
> 
> 时间：2013-04-12T05:11:46.417
> 
> 标签：php, sql-server, adodb

我尝试使用 odbc_mssql 驱动程序连接到数据库：

```
$kpp_db = ADONewConnection('odbc_mssql');
$kpp_db->debug = true;
$kpp_db->charSet="UTF-8";
$kpp_dbDSN = "Driver={SQL Server};Server=$kppConfig_dbHost;Database=$kppConfig_dbName;";
$kppConfig_akEnabled=$kpp_db->Connect($kppConfig_dbDSN, $kppConfig_dbLogin, $kppConfig_dbPassword); 
```

然后我尝试执行一些查询：

```
kpp_db->Exequte($quer); 
```

结果，我收到消息“缺少 odbc 扩展”。有什么问题？

UPD：我安装了 php5-odbc 包，现在消息是 IM002：[unixODBC][Driver Manager]Data source name not found, and no default driver specified

# background - WP8：知道为什么没有在派生的 ScheduledTaskAgent 中调用 OnInvoke

> ID：15963546
> 
> 赞同：3
> 
> 时间：2013-04-12T05:12:01.720
> 
> 标签：background, scheduled-tasks, windows-phone

使用 Lumia 920，看起来我的 OnInvoke 甚至在调试模式下也从未被调用过。调用从 ScheduledTaskAgent 继承的 ScheduledAgent 的构造函数。这意味着 WMAppManifest.xml 中的设置是正确的。

```
<Tasks>
  <DefaultTask Name="_default" NavigationPage="MainPage.xaml" />
  <ExtendedTask Name="BackgroundTask">
    <BackgroundServiceAgent Specifier="ScheduledTaskAgent" Name="PeriodicAgent" Source="ScheduledPlaybackAgent" Type="ScheduledPlaybackAgent.ScheduledAgent" />
  </ExtendedTask>
</Tasks> 
```

然后我几乎从示例代码中复制了：

```
 private void StartPeriodicAgent()
    {
        // Obtain a reference to the period task, if one exists
        periodicTask = ScheduledActionService.Find(periodicTaskName) as PeriodicTask;

        if (periodicTask != null)
        {
            RemoveAgent(periodicTaskName);
        }

        periodicTask = new PeriodicTask(periodicTaskName);

        periodicTask.Description = "This demonstrates a periodic task.";

        try
        {
            ScheduledActionService.Add(periodicTask);
        }
        catch (InvalidOperationException exception)
        {
        }
        catch (SchedulerServiceException)
        {
        }
    } 
```

在前台应用程序启动并尽可能多地等待后，我故意切换到主屏幕。我的 ScheduledAgent::OnInvoke 仍然没有输出或断点

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-03T02:22:29.183

您是否在 ScheduledAgent.cs 中定义了#define DEBUG_AGENT 并在 OnInvoke 中包含以下代码？

```
 #if(DEBUG_AGENT)
            ScheduledActionService.LaunchForTest(task.Name, TimeSpan.FromSeconds(30));
            System.Diagnostics.Debug.WriteLine("Periodic task is started again: " + task.Name);
        #endif 
```

# php - php self() 与当前对象的构造函数

> ID：15963547
> 
> 赞同：0
> 
> 时间：2013-04-12T05:12:34.437
> 
> 标签：php, oop, inheritance, static, self

`new self()`使用当前实例的构造函数的正确方法是什么？换句话说，当我这样做时：

```
class Foo{
  function create(){
    return new self();
  }
}

Class Bar extends Foo{
}

$b = new Bar();
echo get_class($b->create()); 
```

我想看到：`Bar`而不是：`Foo`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T05:31:23.680

```
class Foo{
  function create(){
    $c = get_class($this);
    return new $c();
  }
}

Class Bar extends Foo{
}

$b = new Bar();
echo get_class($b->create()); 
```

将类类型存储在临时变量中，然后返回它的新实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T05:14:26.003

```
public static function create()
{
    $class = get_called_class();

    return new $class();
} 
```

这应该有效。

```
class Foo{
  public static function create()
    {
        $class = get_called_class();

        return new $class();
    }
}

class Bar extends Foo{
}

$a = Foo::create();
$b = Bar::create();

echo get_class($a), PHP_EOL, get_class($b); 
```

显示：

```
Foo Bar 
```

**升级版：**

如果你想要非静态，那么：

```
<?php
class Foo{
  public function create()
    {
        $class = get_class($this);

        return new $class();
    }
}

class Bar extends Foo{}

$a = new Bar();
$b = $a->create();

echo get_class($a), PHP_EOL, get_class($b);
?> 
```

显示：

```
Bar Bar 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T05:16:59.413

```
Class Bar extends Foo {
function create(){
return self;
}} 
```

如果你从子类调用一个函数，那么它是否会搜索最近的父类来调用它。这是继承。

这个想法是在这种情况下使用多态性。从子级重新声明一个函数会覆盖它的父级活动。如果你也想运行它的父函数，那么你必须像这样调用它`parent::callee();`

# facebook - 如果我有 X-FB-Debug id，Facebook 可以帮助我吗？

> ID：15963548
> 
> 赞同：1
> 
> 时间：2013-04-12T05:12:43.773
> 
> 标签：facebook

我在使用 Facebook 时遇到问题，不喜欢它从我的服务器返回的响应。我会假设 Facebook 的某个地方有日志，这些日志可能会提供有关响应问题的线索。除了错误报告机制之外，Facebook 是否有其他方法可以从与我的 X-FB-Debug Id 或 AppId 匹配的服务器日志中请求错误？

可能的？可能？可能吗？

肯定有人必须知道这个 X-FB-Debug 号码的用途，但我没有找到对此的参考。

# java - Arraylist 交换元素

> ID：15963549
> 
> 赞同：88
> 
> 时间：2013-04-12T05:12:44.040
> 
> 标签：java, arraylist

如何交换 an 的第一个和最后一个元素`ArrayList`？我知道如何交换数组的元素：设置一个临时值来存储第一个元素，让第一个元素等于最后一个元素，然后让最后一个元素等于存储的第一个元素。

```
int a = values[0];
int n = values.length;
values[0] = values[n-1];
values[n-1] = a; 
```

那么对于一个`ArrayList<String>`会是这样的吗？

```
String a = words.get(0);
int n = words.size();
words.get(0) = words.get(n-1);
words.get(n-1) = a 
```

* * *

## 回答 #1

> 赞同：287
> 
> 时间：2013-04-12T05:14:56.923

您可以使用`Collections.swap(List<?> list, int i, int j);`

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-04-12T05:18:14.940

在Java中，您不能通过分配给它来设置ArrayList中的值，有一个`set()`方法可以调用：

```
String a = words.get(0);
words.set(0, words.get(words.size() - 1));
words.set(words.size() - 1, a) 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-04-12T05:16:32.167

像这样使用。这是代码的在线编译。看看[http://ideone.com/MJJwtc](http://ideone.com/MJJwtc)

```
public static void swap(List list,
                        int i,
                        int j) 
```

交换指定列表中指定位置的元素。（如果指定的位置相等，则调用此方法会使列表保持不变。）

参数： list - 交换元素的列表。i - 要交换的一个元素的索引。j - 要交换的另一个元素的索引。

阅读收集的官方文档

[http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#swap%28java.util.List,%20int,%20int%29](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#swap%28java.util.List,%20int,%20int%29)

```
import java.util.*;
import java.lang.*;

class Main {
    public static void main(String[] args) throws java.lang.Exception       
    {    
        //create an ArrayList object
        ArrayList words = new ArrayList();

        //Add elements to Arraylist
        words.add("A");
        words.add("B");
        words.add("C");
        words.add("D");
        words.add("E");

        System.out.println("Before swaping, ArrayList contains : " + words);

        /*
      To swap elements of Java ArrayList use,
      static void swap(List list, int firstElement, int secondElement)
      method of Collections class. Where firstElement is the index of first
      element to be swapped and secondElement is the index of the second element
      to be swapped.

      If the specified positions are equal, list remains unchanged.

      Please note that, this method can throw IndexOutOfBoundsException if
      any of the index values is not in range.        */

        Collections.swap(words, 0, words.size() - 1);

        System.out.println("After swaping, ArrayList contains : " + words);    

    }
} 
```

**在线编译示例[http://ideone.com/MJJwtc](http://ideone.com/MJJwtc)**

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-07-26T06:57:55.100

```
for (int i = 0; i < list.size(); i++) {
        if (i < list.size() - 1) {
            if (list.get(i) > list.get(i + 1)) {
                int j = list.get(i);
                list.remove(i);
                list.add(i, list.get(i));
                list.remove(i + 1);
                list.add(j);
                i = -1;
            }
        }
    } 
```

# vb.net - vb.net 确定屏幕

> ID：15963552
> 
> 赞同：5
> 
> 时间：2013-04-12T05:12:51.037
> 
> 标签：vb.net, winforms, screen

是否可以确定表单所在的屏幕？不是位置或大小！

我用了

```
Dim myScreens() As Screen = Screen.AllScreens

Me.Left = (myScreens(0).WorkingArea.Width - Me.Size.Width) / 2
Me.Top = (myScreens(0).WorkingArea.Height - Me.Size.Height) / 2 
```

发布表格。当用户将表单重新定位到另一个屏幕上时，我想保存那个新屏幕的位置！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-12T05:14:57.287

是的，使用[`Screen.FromControl(Me)`](http://msdn.microsoft.com/en-us/library/system.windows.forms.screen.fromcontrol.aspx).

> 检索包含指定控件最大部分的显示器的屏幕。

# java - Var arg 方法导致客户端代码出错

> ID：15963558
> 
> 赞同：1
> 
> 时间：2013-04-12T05:13:11.320
> 
> 标签：java, variadic-functions

我试图弄清楚可变参数的来龙去脉并编写了以下代码

```
public class VarArgTest {

/**
 * @param args
 */
public static void main(String[] args) {
    VarArgTest v = new VarArgTest();
    //Code 1
    System.out.println("haha");
}

public void m1(Integer a, Integer... ints) {
    System.out.println("1");
}

public void m1(Integer... ints) {
    System.out.println("2");
}
} 
```

现在，如果我将代码 1 替换为

```
v.m1(new Integer(1), new Integer(2)); 
```

我收到以下消息

```
The method m1(Integer, Integer[]) is ambiguous for the type VarArgTest 
```

我的问题是，为什么在客户端代码中抛出错误？在定义两个 m1 方法时不应该被编译器捕获吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T05:16:24.087

这不是重载中的错误，因为这两种方法仍然存在明确的调用。

```
v.m1(new Integer[] {1, 2}) 
```

和

```
v.m1(1, new Integer[] {2}) 
```

两者都可以正常工作。只有当编译器必须弄清楚如何将调用中的参数转换为数组时，它才会变得模棱两可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T05:15:14.643

这意味着当您调用时无法区分这两种方法

```
 v.m1(1,2,3,4) 
```

编译器不知道应该使用哪种方法。

重载时需要有不同的参数（方法签名）。

例如，这对于编译器来说是可以的：

```
 public void m1(String a, Integer... ints) {
    System.out.println("1");
   }

   public void m1(Integer... ints) {
    System.out.println("2");
   } 
```

# python - python2.6导入错误

> ID：15963559
> 
> 赞同：0
> 
> 时间：2013-04-12T05:13:32.740
> 
> 标签：python, python-2.7, python-3.x

我正在将我在 3 上编写的 python 脚本移植到 2.6，我遇到了错误，我找不到等效的导入。

```
import win32com.client
from Tkinter import FileDialog 
```

如何解决这些问题？

使用 Python 2.6.5

Python 2.6.5 (r265:79096, Mar 19 2010, 21:48:26) [MSC v.1500 32 bit (Intel)] on win32 输入“copyright”、“credits”或“license()”以获取更多信息。

```
****************************************************************
Personal firewall software may warn about the connection IDLE
makes to its subprocess using this computer's internal loopback
interface.  This connection is not visible on any external
interface and no data is sent to or received from the Internet.
**************************************************************** 
```

IDLE 2.6.5 ==== 没有子进程 ====

感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T05:46:09.133

win32com 模块不包含在 Python 中，您需要安装它。tk 文件对话框位于 tkFileDialog 中。

另请参阅[本书中的](http://python3porting.com)重组[和重命名章节](http://python3porting.com/stdlib.html?highlight=tkfiledialog)。

# c++ - 智能指针环绕惩罚。使用 std::map 进行记忆

> ID：15963563
> 
> 赞同：6
> 
> 时间：2013-04-12T05:13:55.883
> 
> 标签：c++, performance, boost, shared-ptr, smart-pointers

我目前正在进行一个性能至关重要的项目。以下是我对这个问题提出的一些问题。

**问题1**

我的项目涉及很多。`boost::shared_ptr`我知道在运行时使用创建共享指针`boost::make_shared`很慢，因为它需要跟踪引用有很多开销。我想知道如果已经创建了 boost 共享指针，那么这两个语句会有什么相同的性能，或者一个比另一个更快。如果常规指针更快并且我已经拥有共享指针，我有哪些选项可以调用共享指针指向的方法？

```
 statement1: sharedptr->someMethod();  //here the pointer is a shared ptr created by boost::make_shared
 statement2: regularptr->someMethod(); //here the pointer is a regular one made with new 
```

**问题2**

我有一个快速调用的实例方法，`std::vector<std::string>`每次都会在堆栈上创建一个。我决定将该向量指针存储在静态 std::map (ie)`std::map<std::String,std::vector<std::string>*>`中。如果键的映射中不存在向量（可能是方法的名称）。有效的矢量地址被创建并添加到地图中。所以我的问题是“是否值得在地图上搜索矢量地址并返回一个有效地址，而不是像在堆栈上创建一个一样`std::vector<std::string> somevector`。我也想了解一下查找的性能`std::map`。

任何有关这些问题的想法将不胜感激。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-12T05:58:25.997

# 回答问题#1

> 如果常规指针更快并且我已经有了共享指针，我有哪些选项可以调用共享指针指向的方法？

`operator->`内`boost::shared_ptr` [有断言](http://www.boost.org/doc/libs/1_53_0/boost/smart_ptr/shared_ptr.hpp)：

```
typename boost::detail::sp_member_access< T >::type operator-> () const 
{
    BOOST_ASSERT( px != 0 );
    return px;
} 
```

因此，首先，请确保您已`NDEBUG`定义（通常在发布版本中它是自动完成的）：

```
#define NDEBUG 
```

* * *

我在取消引用`boost::shared_ptr`和原始指针之间进行了汇编程序比较：

```
template<int tag,typename T>
NOINLINE void test(const T &p)
{
    volatile auto anti_opti=0;
    ASM_MARKER<tag+0>();
    anti_opti = p->data;
    anti_opti = p->data;
    ASM_MARKER<tag+1>();
    (void)anti_opti;
} 
```

* * *

```
test<1000>(new Foo); 
```

`ASM``test`什么时候的代码`T`是`Foo*`（不要害怕，我在`diff`下面）：

```
_Z4testILi1000EP3FooEvRKT0_:
.LFB4088:
.cfi_startproc
pushq %rbx
.cfi_def_cfa_offset 16
.cfi_offset 3, -16
movq %rdi, %rbx
subq $16, %rsp
.cfi_def_cfa_offset 32
movl $0, 12(%rsp)
call _Z10ASM_MARKERILi1000EEvv
movq (%rbx), %rax
movl (%rax), %eax
movl %eax, 12(%rsp)
movl %eax, 12(%rsp)
call _Z10ASM_MARKERILi1001EEvv
movl 12(%rsp), %eax
addq $16, %rsp
.cfi_def_cfa_offset 16
popq %rbx
.cfi_def_cfa_offset 8
ret
.cfi_endproc 
```

* * *

```
test<2000>(boost::make_shared<Foo>()); 
```

`ASM``test`什么时候的代码`T`是`boost::shared_ptr<Foo>`：

```
_Z4testILi2000EN5boost10shared_ptrI3FooEEEvRKT0_:
.LFB4090:
.cfi_startproc
pushq %rbx
.cfi_def_cfa_offset 16
.cfi_offset 3, -16
movq %rdi, %rbx
subq $16, %rsp
.cfi_def_cfa_offset 32
movl $0, 12(%rsp)
call _Z10ASM_MARKERILi2000EEvv
movq (%rbx), %rax
movl (%rax), %eax
movl %eax, 12(%rsp)
movl %eax, 12(%rsp)
call _Z10ASM_MARKERILi2001EEvv
movl 12(%rsp), %eax
addq $16, %rsp
.cfi_def_cfa_offset 16
popq %rbx
.cfi_def_cfa_offset 8
ret
.cfi_endproc 
```

* * *

这是`diff -U 0 foo_p.asm shared_ptr_foo_p.asm`命令的输出：

```
--- foo_p.asm   Fri Apr 12 10:38:05 2013
+++ shared_ptr_foo_p.asm        Fri Apr 12 10:37:52 2013
@@ -1,2 +1,2 @@
-_Z4testILi1000EP3FooEvRKT0_:
-.LFB4088:
+_Z4testILi2000EN5boost10shared_ptrI3FooEEEvRKT0_:
+.LFB4090:
@@ -11 +11 @@
-call _Z10ASM_MARKERILi1000EEvv
+call _Z10ASM_MARKERILi2000EEvv
@@ -16 +16 @@
-call _Z10ASM_MARKERILi1001EEvv
+call _Z10ASM_MARKERILi2001EEvv 
```

如您所见，区别仅在于函数签名和`tag`非类型模板参数值，**其余代码为`IDENTICAL`**.

* * *

一般来说 -`shared_ptr`非常昂贵 - 它的引用计数在线程之间同步（通常通过原子操作）。如果您要[`boost::intrusive_ptr`](http://www.boost.org/doc/libs/1_53_0/libs/smart_ptr/intrusive_ptr.html)改用，那么您可以实现自己的`increment`/`decrement`不使用线程同步，这将加快引用计数。

如果你负担得起使用`unique_ptr`或移动语义（通过[Boost.Move](http://www.boost.org/doc/libs/1_53_0/doc/html/move.html)或 C++11）——那么就不会有任何引用计数——它会更快。

[**带 ASM 输出的现场演示**](http://liveworkspace.org/code/40HVWL)

```
#define NDEBUG

#include <boost/make_shared.hpp>
#include <boost/shared_ptr.hpp>

#define NOINLINE __attribute__ ((noinline))

template<int>
NOINLINE void ASM_MARKER()
{
    volatile auto anti_opti = 11;
    (void)anti_opti;
}

struct Foo
{
    int data;
};

template<int tag,typename T>
NOINLINE void test(const T &p)
{
    volatile auto anti_opti=0;
    ASM_MARKER<tag+0>();
    anti_opti = p->data;
    anti_opti = p->data;
    ASM_MARKER<tag+1>();
    (void)anti_opti;
}

int main()
{
    {
        auto p = new Foo;
        test<1000>(p);
        delete p;
    }
    {
        test<2000>(boost::make_shared<Foo>());
    }
} 
```

# 回答问题#2

> 我有一个快速调用的实例方法，每次都会在堆栈上创建一个 std::vector 。

通常，尝试重用`vector`'s 容量以防止代价高昂的重新分配是个好主意。例如最好替换：

```
{
    for(/*...*/)
    {
        std::vector<value> temp;
        // do work on temp
    }
} 
```

和：

```
{
    std::vector<value> temp;
    for(/*...*/)
    {
        // do work on temp
        temp.clear();
    }
} 
```

* * *

但是由于类型的原因，`std::map<std::string,std::vector<std::string>*>`您似乎正在尝试执行某种[记忆](http://en.wikipedia.org/wiki/Memoization)。

正如已经建议的那样，您可以尝试使用具有`std::map`O ( **1)**平均和**O(N)**最坏情况复杂度的查找/插入以及更好的局部性/紧凑性，而不是**O(ln(N))**查找/插入 (缓存友好）。[`boost::unordered_map`](http://www.boost.org/doc/libs/1_53_0/doc/html/boost/unordered_map.html)[`std::unordered_map`](http://en.cppreference.com/w/cpp/container/unordered_map)

 ****另外，考虑尝试[Boost.Flyweight](http://www.boost.org/doc/libs/1_53_0/libs/flyweight/doc/index.html)：

> **享**元是小型句柄类，授予对共享公共数据的持续访问权限，因此允许在合理的内存限制内管理大量实体。**Boost.Flyweight通过提供类模板****flyweight**可以轻松使用这种常见的编程习惯，它充当**const T**的替代品。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-12T05:50:29.350

对于问题1：

主要的性能提升可以在架构设计、使用的算法中实现，而低级别的关注点也只有在高级设计强大时才重要。让我们来回答您的问题，常规指针性能高于 shared_ptr。但是你看到的不使用 shared_ptr 的开销也更多，这增加了长期维护代码的成本。在性能关键的应用程序中必须避免冗余对象的创建和销毁。在这种情况下，shared_ptr 起着重要的作用，它通过减少释放资源的开销来跨线程共享公共对象。是的，由于引用计数、分配（对象、计数器、删除器）等原因，共享指针比常规指针消耗更多时间。您可以通过防止不必要的复制来使 shared_ptr 更快。将其用作引用（shared_ptr const&）。

问题2

如果想使用 shared_ptr 对象的重用池，您可以更好地研究对象池设计模式方法。 [http://en.wikipedia.org/wiki/Object_pool_pattern](http://en.wikipedia.org/wiki/Object_pool_pattern)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T06:21:15.163

**问题一：**

我在我的项目中广泛使用共享指针，但我不想使用`shared_ptr<T>`. 它需要一个与自身分开分配的堆对象`T`，因此内存分配开销增加了一倍，内存使用量的增加取决于运行时库的实现。`intrusive_ptr`效率更高，但有一个关键问题让我感到厌烦，那就是函数调用：

```
void Foo(intrusive_ptr<T> x) {...} 
```

每次调用 Foo 时，参数 x 的引用计数必须以相对昂贵的原子增量递增，然后在退出时递减。但这是多余的，因为您通常可以假设调用者已经拥有对 x 的引用，并且该引用在调用期间有效。调用者可能还没有引用，但以调用者的引用始终有效的方式编写代码并不难。

因此，我更喜欢使用我自己的智能指针类，它与 intrusive_ptr 相同，只是它隐式地与 T* 相互转换。然后我总是声明我的方法采用普通指针，避免不必要的引用计数：

```
void Foo(T* x) {...} 
```

事实证明，这种方法在我的项目中效果很好，但老实说，我从未真正测量过它带来的性能差异。

此外，尽可能使用 auto_ptr (C++03) 或 unique_ptr (C++11)。

**问题2：**

我不明白您为什么要考虑使用 std::map。首先，hash_map 会更快（只要它不是 VS2008/2010 中的 VC++ Dinkumware 实现，[这里有详细信息](http://www.codeproject.com/Articles/212856/Head-to-head-benchmark-Csharp-vs-NET)），其次，如果每个方法只需要一个向量，为什么不使用类型的静态变量`std::vector<std::string>`？

如果每次调用该方法时都必须在哈希表中查找向量，我的猜测是与每次创建新向量相比，您将节省很少或根本没有时间。如果您在 std::map 中查找向量，则需要更长的时间。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T06:01:51.433

Q1：只看实现：

```
T * operator-> () const // never throws
{
    BOOST_ASSERT(px != 0);
    return px;
} 
```

显然，它返回一个成员变量并且不即时计算任何东西，因此性能将与取消引用普通指针一样快（受编译器优化的常见怪癖/未优化构建的性能总是可以预期的糟糕 - 不值得考虑）。

Q2：“是否值得搜索一个`map`地址`vector`并返回一个有效地址，而不是像在堆栈上创建一个一样`std::vector<std::string> somevector`。我还想知道关于性能的想法`std::map::find`。”

是否值得取决于必须在 中复制的数据量，在`vector`较小程度上取决于 中的节点数量，`map`被比较的键中公共前缀的长度等。一如既往，如果你在乎，基准。不过，一般来说，如果向量包含大量数据（或者该数据的再生速度很慢），我希望答案是肯定的。 `std::map`是一个平衡二叉树，所以通常你期望在 O(log2N) 中查找，其中 N 是当前元素的数量（即`size()`）。

您也可以使用哈希表 - 它给出 O(1) 对于大量元素来说会更快，但不可能说出阈值在哪里。性能仍然取决于您在密钥上使用的散列函数的昂贵性，它们的长度（像微软这样的一些散列实现`std::hash`只包含沿着被散列的字符串间隔的最多 10 个字符，因此所花费的时间有一个上限，但冲突的可能性更大） ，哈希表冲突处理方法（例如，用于搜索替代存储桶的置换列表与替代哈希函数与从存储桶链接的容器），以及冲突倾向本身。****

# mysql - 返回 MySql 上最后一个数据的 id

> ID：15963564
> 
> 赞同：1
> 
> 时间：2013-04-12T05:13:58.740
> 
> 标签：mysql, database

我有一个表，在这个表中我有 10 行，在这 10 行中我只想返回数据 1-5 并获取最后一个结果 id。

我努力了

```
SELECT id FROM my_list ORDER BY id DESC LIMIT 5 
```

但这给了我 10-6 而不是 5-1 的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T05:17:23.107

关于什么：

```
SELECT id FROM my_list ORDER BY id ASC LIMIT 5 
```

?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T05:17:58.577

尝试这个

```
SELECT * FROM (
    SELECT id FROM my_list ORDER BY id ASC LIMIT 5
) temp ORDER BY temp.id DESC 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T05:23:22.227

您的意思是您需要表格中的第五条记录，然后您可以使用它

select * from my_list ORDER BY Id ASC LIMIT 5,1

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T05:17:32.070

给限制

```
SELECT id FROM my_list ORDER BY id DESC LIMIT 6,5; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T05:18:19.533

```
SELECT id FROM my_list ORDER BY id DESC LIMIT 6,5 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-12T05:19:50.837

```
SELECT * FROM `table_name` ORDER BY `table_name`.`id` ASC LIMIT 0 , 4 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-12T05:29:42.847

SELECT id FROM my_list ORDER BY id asc LIMIT 0,5

# python - 查找从 a 到 b 不能被 x 到 y 整除的数字

> ID：15963568
> 
> 赞同：5
> 
> 时间：2013-04-12T05:14:18.097
> 
> 标签：python, math, set, division, modulo

这是我思考了很久的问题。

找到从 a 到 b 的所有数字不能被从 x 到 y 的任何数字整除的最快方法是什么？

考虑一下：

我想找到从 1 到 10 的所有不能被 2 到 5 整除的数字。如果我在哪里使用线性方法，这个过程将变得非常缓慢；像这样：

```
result = []
a = 1
b = 10
x = 2
y = 5
for i in range(a,b):
    t = False
    for j in range(x,y):
        if i%j==0:
            t = True
            break
    if t is False:
        result.append(i)
return result 
```

有谁知道比线性解决方案计算时间更少的任何其他方法？

*如果没有，任何人都可以*看到如何更快地完成此操作，因为此时我是空白的......

真诚的，约翰

**[编辑]**

数字的范围是 0 到 >1,e+100

这适用于 a、b、x 和 y

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T05:21:22.060

您只需要检查可能的除数范围内的质数 - 例如，如果一个值不能被 2 整除，那么它也不能被 2 的任何倍数整除；对于其他每个素数和素数倍数也是如此。因此，在您的示例中，您可以检查`2, 3, 5`- 您不需要检查`4`，因为任何能被 4 整除的东西都必须能被 2 整除。因此，更快的方法是计算您感兴趣的任何范围内的素数，然后简单地计算哪个他们划分的价值观。

另一个加速是将您感兴趣的范围内的每个值添加到 a `set`：当您发现它可以被您范围内的数字整除时，将其从集合中删除。然后，您应该只测试保留在集合中的数字 - 这将阻止您多次测试数字。

如果我们结合这两种方法，我们可以看到我们可以创建`set`所有值的 a（因此在示例中，一个所有值都为 1 到 10 的集合），并简单地从该集合中删除第二个范围内每个素数的倍数。

编辑：正如 Patashu 指出的那样，如果除以给定值的素数不在集合中，这将不太有效。为了解决这个问题，我们可以对上述应用类似的算法：创建一个`set`带有值`[a, b]`的，对于 中的每个值`set`，删除它的所有倍数。因此，对于下面在评论中给出的示例（带有`[3, 6]`），我们将从 3 开始并删除它在集合中的倍数 - 所以`6`。因此，我们需要测试的剩余值将`[3, 4, 5]`是我们在这种情况下想要的。

Edit2：这是一个非常糟糕的、糟糕的实现，它没有被优化并且有可怕的变量名：

```
def find_non_factors():
    a = 1
    b = 1000000
    x = 200
    y = 1000

    z = [True for p in range(x, y+1)]
    for k, i in enumerate(z):
        if i:
            k += x
            n = 2
            while n * k < y + 1:
                z[(n*k) - x] = False
                n += 1

    k = {p for p in range(a, b+1)}

    for p, v in enumerate(z):
        if v:
            t = p + x
            n = 1
            while n * t < (b + 1):
                if (n * t) in k:
                    k.remove(n * t)
                n += 1

    return k 
```

使用这些数字尝试您的原始实现。在我的电脑上花费 > 1 分钟。此实现需要不到 2 秒的时间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T05:35:04.983

**终极优化警告：不要过早优化。每当您尝试优化代码时，对其进行分析以确保它需要优化，并在您打算对其进行优化的同一类型的数据上分析优化以确认它是加速。**几乎所有的代码都不需要优化，只是为了给出正确的答案。

如果您正在优化小 xy 和大 ab：

创建一个长度为所有 x、x+1、x+2...y 中最小公倍数的数组。例如，对于 2、3、4、5，它将是 60，而不是 120。

现在用布尔值填充这个数组 - 最初为每个单元格为 false，然后为 xy 中的每个数字，用 true 填充数组中该数字的倍数的所有条目。

现在对于 ab 中的每个数字，索引到数组模数组长度，如果为真，则跳过，否则如果为假，则返回。

您可以通过从 x 到 y 因子数字中删除其素数扩展是其他数字的素数扩展的**严格超集来更快地做到这一点。**我的意思是 - 如果你有 2、3、4、5、4 是 2*2 的严格超集 2 所以你可以删除它，现在我们的数组长度只有 30。对于像 3、4、5、6 这样的东西但是，4 是 2*2，6 是 3*2 - 6 是 3 的超集，所以我们将其删除，但 4 不是所有内容的超集，因此我们将其保留。LCM 为 3*2*2*5 = 60 . 做这种事情会给大ab本身带来一些加速，如果你只需要这样做，你可能不需要去阵列方向。

另外，请记住，如果您不打算每次都使用函数的整个结果 - 例如，有时您可能只对最低值感兴趣 - 将其编写为生成器而不是函数。这样你就可以调用它，直到你有足够的号码然后停止，节省时间。

# windows - 64 位程序 - Windows“影子空间”问题

> ID：15963572
> 
> 赞同：1
> 
> 时间：2013-04-12T05:14:34.933
> 
> 标签：windows, assembly, stack, x86-64, shadow

我正在尝试用 x64 汇编语言创建一个程序，但我在理解 x64 调用约定时遇到了问题。我认为问题在于我不知道必须为调用 CopyFile 函数保留多少影子空间。当我运行程序时，它会崩溃。我使用 MASM 创建了这个程序。请帮我修复此代码。谢谢你。

```
includelib \Masm64\Lib\Kernel32.lib
includelib \Masm64\Lib\User32.lib
extrn GetProcessHeap : proc
extrn MessageBoxA : proc
extrn HeapAlloc : proc
extrn GetModuleFileNameA : proc
extrn ExitProcess : proc
extrn CopyFileA : proc

dseg segment para 'DATA'
file db 'C:\CopyThisFile.txt', 0
file2 db 'C:\ThisFileWasCopied.txt', 0
succ db 'Success!', 0
capt db 'Debug', 0
dseg ends

cseg segment para 'CODE'
start proc
sub rsp, 28h
xor r8, r8
mov rdx, qword ptr file2
mov rcx, qword ptr file
call CopyFileA
xor ecx, ecx 
call ExitProcess
start endp
cseg ends
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-26T12:36:35.223

这与堆栈上的空间预留无关。

相反，您的错误在于错误地获取了字符串的地址。`mov`获取内容（前 8 个字节）而不是指向字符串的指针，因此引发 AccessViolation 异常。要解决此问题，请使用`lea`.

```
format PE64 GUI 5.0
entry start

include 'WIN64A.INC'

section '.data' data readable writeable

    fileStr db 'C:\\CopyThisFile.txt', 0
    file2Str db 'C:\\ThisFileWasCopied.txt', 0
    succ db 'Success!', 0

section '.text' code readable executable

    start:

    sub rsp, 28
    xor r8, r8
    lea rdx, qword ptr file2Str
    lea rcx, qword ptr fileStr
    call [CopyFileA]
    xor ecx, ecx
    call [ExitProcess]

section '.idata' import data readable

    library kernel32,'kernel32.dll',user32,'user32.dll'

    import kernel32, \
        GetProcessHeap,'GetProcessHeap', \
        HeapAlloc,'HeapAlloc', \
        GetModuleFileNameA,'GetModuleFileNameA', \
        ExitProcess,'ExitProcess', \
        CopyFileA,'CopyFileA'

    import user32, \
        MessageBoxA,'MessageBoxA' 
```

# android - 如何在android中获取确切的当前移动时间？

> ID：15963574
> 
> 赞同：1
> 
> 时间：2013-04-12T05:14:51.067
> 
> 标签：android, time, calendar

我想从手机中获取确切的当前时间并将其发送到服务器。但它在 25 分钟附近变化并不完全......它的变化

我无法获得正确的系统时间

在这里我展示了代码，我尝试过的

```
final Calendar cal = Calendar.getInstance(TimeZone.getTimeZone("GMT+5:30"));
int hr = cal.get(Calendar.HOUR_OF_DAY);
int min = cal.get(Calendar.MINUTE);
int sec = cal.get(Calendar.SECOND);

int day = cal.get(Calendar.DAY_OF_MONTH);
int month = cal.get(Calendar.MONTH);
int year = cal.get(Calendar.YEAR);
String date;
SimpleDateFormat sdf = new SimpleDateFormat("dd:mm:yyyy HH:mm:ss z");
String test = sdf.format(cal.getTime());
String months = String.valueOf(month + 1);
String days = String.valueOf(day);
String years = String.valueOf(year);
String time = hr+":"+min+":"+sec; 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T05:20:31.757

```
long millis =System.currentTimeMillis;
String hms = String.format("%02d:%02d:%02d", TimeUnit.MILLISECONDS.toHours(millis),
    TimeUnit.MILLISECONDS.toMinutes(millis) - TimeUnit.HOURS.toMinutes(TimeUnit.MILLISECONDS.toHours(millis)),
    TimeUnit.MILLISECONDS.toSeconds(millis) - TimeUnit.MINUTES.toSeconds(TimeUnit.MILLISECONDS.toMinutes(millis)));    
Log.i("Time H:M:s",hms); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T05:27:42.673

```
long timeInMillis = System.currentTimeMillis();

      Calendar cal = Calendar.getInstance();
      cal.setTimeInMillis(timeInMillis); 
```

> 现在使用其余代码获取数据

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T05:28:43.710

以特定模式获取日期和时间：

```
SimpleDateFormat sdf = new SimpleDateFormat("yyyyMMdd_HHmmss");
String currentDateandTime = sdf.format(new Date()); 
```

# javascript - 在javascript中的正则表达式中限制日期和月份

> ID：15963585
> 
> 赞同：1
> 
> 时间：2013-04-12T05:15:22.167
> 
> 标签：javascript, jquery, regex, validation, datetime

**Java脚本函数**

```
<script language="JavaScript">

function checkdate(date1){
var validformat=/^\d{2}\/\d{2}\/\d{4} \d{2}\:\d{2}\:\d{2}$/ 
if(!validformat.test(date1.value)){
alert("Invalid Date");
 document.form.date1.value="";
}

} 
```

以上运行良好！但我想相应地限制**月份**和**日期**。

```
my format = mm/dd/YYYY hh:mm:ss 
```

月份不应大于 12 且小于 1 且相同，日期不应大于 31 且小于 1；

还有一件事！

**02/02/2013 00:00:00**是有效日期，但**2/2/2013 00:00:00**显示为无效日期。

如何控制这两种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T05:28:44.617

您可以尝试以下方法：

```
var comp = value.split('/');
var d = parseInt(comp[0], 10);
var m = parseInt(comp[1], 10);
var y = parseInt(comp[2], 10);
var date = new Date(y, m - 1, d);
var validDateFormat = false;
if (date.getFullYear() == y && date.getMonth() + 1 == m && date.getDate() == d) {
    validDateFormat = true;
} 
```

如果 validDateFormat 为 true，则日期有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T05:29:26.137

**m/d/YYYY hh:mm:ss**和**mm/dd/YYYY hh:mm:ss**的日期时间正则表达式

 **```
/^(0?[1-9]|1[012])\/(0?[1-9]|[12]\d|3[01])\/[12]\d{3} ([01]\d|2[0-3])\:[0-5]\d\:[0-5]\d$/ 
```

解释演示：[http ://regex101.com/r/bS0gB6](http://regex101.com/r/bS0gB6)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T05:19:38.413

您可以查看[该](http://utilitymill.com/utility/Regex_For_Range)网站，该网站允许您为数字范围创建正则表达式。

话虽如此，您应该使用您正在使用的语言（Javascript）提供的数字运算符而不是正则表达式。

[或者，您可以使用在 JQuery 中创建的 DateTime Picker，如此处](http://trentrichardson.com/examples/timepicker/)所示。**

# objective-c - Objective-C 访问器模板

> ID：15963586
> 
> 赞同：1
> 
> 时间：2013-04-12T05:15:23.083
> 
> 标签：objective-c, multithreading, model, macros, grand-central-dispatch

我一直在重写我的模型层，以便在多个现有应用程序中使用。现有的代码库已经过时了，我想概括一下我的方法，以便将来更容易扩展，并获得最新语言/技术添加的好处（ARC 为其中之一）。

我的目标是一个可移植的、由 SQL 支持的“框架”，由一个简单的数据库层（建立在 FMDatabase 之上）和健壮的模型对象类组成，它们共同封装了大部分复杂性。模型对象是主超类的子类，并遵守合同来实现（和覆盖）方法，这些方法提供必要的属性和模式细节以促进 SQL 操作。

我在 PHP 中使用这种方法取得了很大的成功，但在使用 Objective-C 时遇到了问题。

是的，CoreData 提供了这些东西，但由于多种原因不是一种选择。我还看到了在运行时解决问题的解决方案，但我不确定这是否适用于 ARC，并且更愿意在编译之前生成访问器。

我从为多线程访问维护基于锁的模式与基于 GCD 的方法[（这里提出的问题）](https://stackoverflow.com/questions/15857581/multi-threaded-objective-c-accessors-gcd-vs-locks/15858078)的辩论开始，并最终得到以下模式：

```
- (NSDate *)creationDate {
    __block NSDate *aDate;
    dispatch_sync(accessorQueue, ^{
        aDate = creationDate;
    });
    return aDate;
}

- (void)setCreationDate:(NSDate *)aDate {
    if (![aDate isKindOfClass: [NSDate class]]) {
        NSLog(@"setCreationDate: called with non-date object);
        return;
    }

    dispatch_barrier_async(accessorQueue, ^{
        if ((!creationDate && aDate) || ![aDate isEqualToDate: creationDate]) {
            [self willChangeValueForKey: @"creationDate"];

            [changes setObject: aDate ? aDate : [NSNull null]
                        forKey: @"creationDate"];

            creationDate = aDate;

            [self didChangeValueForKey: @"creationDate"];
        }
    });
} 
```

我喜欢它，但我希望能够生成属性列表以简化模型对象代码。我的第一步是创建宏扩展来构建访问器/修改器。不过，在这里我已经遇到了不太完美的选择。

1) 迭代宏中的列表是一个丑陋的过程。Boost.preprocessor 可能是一种选择，但考虑到 (2 & 3) 它有点吓到我。

2) 宏需要在所用令牌的所有可能版本中传递（即，我必须传递 creationDate 和 CreationDate 只是为了满足为上面的示例生成 getter 和 setter。）不是一个显示停止器，但不理想任何一个。

3) 对象和原始类型需要不同的宏扩展，这使得遍历属性列表 (1) 更加困难。我可以为列表中的每个属性传入扩展宏，但这个“节省时间”现在看起来完全相反——一长串元组并不比一个单独调用宏的列表更具可读性。

我希望我忽略了一些使这成为可能的东西，或者也许有人已经构建了一个我还没有找到的解决方案。也许是一个预处理脚本来生成包含访问器的类别......？我还没有研究过这个选项，但我可以接受，特别是如果它扩展到其他语言以实现跨平台定位。

建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T17:01:38.823

我最终编写了一个 Python 脚本，该脚本查看模型对象头文件中的属性声明，并在每个类的新类别中写出自定义访问器。为方便起见，我使用以下形式的注释字符串注释我的属性声明：

```
// SqlFieldName SqlFieldType 
```

我已经为对象与原始访问器定义了几个基本模板。

结果是非常具体的实现，但为访问器节省了大量的复制/粘贴/查找/替换工作，由于在查找/替换期间重命名的疏忽，这通常是至少 1 个错误的来源。

使用类别来存储访问器会导致编译警告，以覆盖类别中的对象方法，但您可以使用 -Wobjc-protocol-method-implementation 使这些方法静音。

我生成的代码非常符合我的需求，但如果有人感兴趣，我会发布它。

# ios - 如何使用类似于 iOS 中的 UIWebView 的 Keno Mobile 在应用程序内打开 url

> ID：15963589
> 
> 赞同：0
> 
> 时间：2013-04-12T05:15:32.980
> 
> 标签：ios, hybrid-mobile-app, kendo-mobile

我想打开一个通过 Cordova / Phone Gap 部署时不退出应用程序的 url。

[UIWebView](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html)

[示例 UIWebViewImage](http://i.stack.imgur.com/r2mH1.png)

我想做类似的事情，保留应用程序的顶部导航栏，但没有地址栏。当我当前访问一个 url 时，它将在应用程序中打开整个屏幕，没有后退/前进按钮或任何导航栏或标签栏导航。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T07:53:41.567

您需要使用[PhoneGap 的 InAppBrowser](http://docs.phonegap.com/en/2.6.0/cordova_inappbrowser_inappbrowser.md.html#InAppBrowser)。

# javascript - 如何同步 JavaScript 回调？

> ID：15963590
> 
> 赞同：13
> 
> 时间：2013-04-12T05:15:43.483
> 
> 标签：javascript, multithreading, callback, synchronization

我已经用 JavaScript 开发了相当长的一段时间，但我还是一名牛仔开发人员，因为一直困扰着我的许多事情之一就是同步 JavaScript 的回调。

当这个问题出现时，我将描述一个通用场景：我有一堆操作要通过 for 循环执行多次，并且每个操作都有一个回调。在 for 循环之后，我需要执行另一个操作，但这个操作只有在 for 循环的所有回调都完成后才能成功执行。

**代码示例：**

```
 for ... in ... {
   myFunc1(callback); // callbacks are executed asynchly
 }

 myFunc2(); // can only execute properly if all the myFunc1 callbacks are done 
```

**建议的解决方案：**

在循环开始时启动一个计数器，保存循环的长度，每个回调递减该计数器。当计数器为 0 时，执行 myFunc2。这本质上是为了让回调知道它是否是序列中的最后一个回调，如果是，则在完成后调用 myFunc2。

**问题：**

1.  代码中的每个这样的序列都需要一个计数器，并且到处都有无意义的计数器不是一个好习惯。
2.  如果您还记得经典同步问题中的线程冲突是如何发生的，当多个线程都在同一个 var 上调用 var-- 时，会出现不良结果。JavaScript 中也会发生同样的情况吗？

**终极问题：**

有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-12T06:33:39.220

好消息是 JavaScript 是单线程的。这意味着解决方案通常适用于“共享”变量，即不需要互斥锁。

如果你想序列化异步任务，然后是完成回调，你可以使用这个辅助函数：

```
function serializeTasks(arr, fn, done)
{
    var current = 0;

    fn(function iterate() {
        if (++current < arr.length) {
            fn(iterate, arr[current]);
        } else {
            done();
        }
    }, arr[current]);
} 
```

第一个参数是需要在每次传递中传递的值数组，第二个参数是循环回调（解释如下），最后一个参数是完成回调函数。

这是循环回调函数：

```
function loopFn(nextTask, value) {
    myFunc1(value, nextTask);
} 
```

传递的第一个参数是一个将执行下一个任务的函数，它被传递给你的异步函数。第二个参数是值数组的当前条目。

假设异步任务如下所示：

```
function myFunc1(value, callback)
{
  console.log(value);
  callback();
} 
```

它打印值，然后调用回调；简单的。

然后，让整个事情动起来：

```
serializeTasks([1,2, 3], loopFn, function() {
    console.log('done');
}); 
```

[**演示**](http://jsbin.com/elebok/1/)

要并行化它们，您需要一个不同的函数：

```
function parallelizeTasks(arr, fn, done)
{
    var total = arr.length,
    doneTask = function() {
      if (--total === 0) {
        done();
      }
    };

    arr.forEach(function(value) {
      fn(doneTask, value);
    });
} 
```

您的循环函数将是这样的（仅参数名称更改）：

```
function loopFn(doneTask, value) {
    myFunc1(value, doneTask);
} 
```

[**演示**](http://jsbin.com/elebok/2/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T05:21:22.667

第二个问题并不是真正的问题，只要其中每一个都在一个单独的函数中并且变量被正确声明（使用`var`）；函数中的局部变量不会相互干扰。

第一个问题有点问题。其他人也很生气，最终制作了库来为您包装这种模式。我喜欢[`async`](https://github.com/caolan/async)。有了它，您的代码可能如下所示：

```
async.each(someArray, myFunc1, myFunc2); 
```

它还提供了许多其他异步构建块。如果你正在做很多异步的事情，我建议你看看它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T05:27:35.683

您可以通过使用 jQuery 延迟对象来实现这一点。

```
var deferred = $.Deferred();
var success = function () {
    // resolve the deferred with your object as the data
    deferred.resolve({
        result:...;
    });
}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-10T02:46:00.880

单线程并不总是得到保证。不要误会。

案例 1：例如，如果我们有 2 个函数，如下所示。

```
var count=0;
function1(){
  alert("this thread will be suspended, count:"+count);
}
function2(){
  //anything
  count++;
  dump(count+"\n");
} 
```

那么在function1返回之前，function2也会被调用，如果保证1个线程，那么function2在function1返回之前不会被调用。你可以试试这个。当您收到警报时，您会发现计数正在上升。

案例2：使用Firefox，chrome code，在1个函数返回之前（里面没有alert），也可以调用另一个函数。

所以确实需要互斥锁。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-12T06:24:18.030

使用此辅助功能：

```
function afterAll(callback,what) {
  what.counter = (what.counter || 0) + 1;
  return function() {
    callback(); 
    if(--what.counter == 0) 
      what();
  };
} 
```

您的循环将如下所示：

```
function whenAllDone() { ... }
for (... in ...) {
  myFunc1(afterAll(callback,whenAllDone)); 
} 
```

这里`afterAll`为回调创建代理函数，它也递减计数器。并在所有回调完成时调用 whenAllDone 函数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-02T20:59:11.077

有很多很多方法可以实现这一点，希望这些建议对您有所帮助！

首先，我会将回调转换为承诺！这是一种方法：

```
function aPromise(arg) {
    return new Promise((resolve, reject) => {
        aCallback(arg, (err, result) => {
            if(err) reject(err);
            else resolve(result);
        });
    })
} 
```

接下来，使用reduce对数组的元素进行一一处理！

```
const arrayOfArg = ["one", "two", "three"];
const promise = arrayOfArg.reduce(
    (promise, arg) => promise.then(() => aPromise(arg)), // after the previous promise, return the result of the aPromise function as the next promise
    Promise.resolve(null) // initial resolved promise
    );
promise.then(() => {
    // carry on
}); 
```

如果要同时处理数组的所有元素，请使用 map an Promise.all！

```
const arrayOfArg = ["one", "two", "three"];
const promise = Promise.all(arrayOfArg.map(
    arg => aPromise(arg)
));
promise.then(() => {
    // carry on
}); 
```

如果您能够使用 async / await 那么您可以简单地这样做：

```
const arrayOfArg = ["one", "two", "three"];
for(let arg of arrayOfArg) {
    await aPromise(arg); // wow
}

// carry on 
```

你甚至可以像这样使用我非常酷[的同步异步](https://www.npmjs.com/package/synchronize-async)库：

```
const arrayOfArg = ["one", "two", "three"];
const context = {}; // can be any kind of object, this is the threadish context

for(let arg of arrayOfArg) {
    synchronizeCall(aPromise, arg); // synchronize the calls in the given context
}

join(context).then(() => { // join will resolve when all calls in the context are finshed
    // carry on
}); 
```

最后但并非最不重要的一点是，如果您真的不想使用Promise ，请使用精细的[异步库。](https://www.npmjs.com/package/async)

```
const arrayOfArg = ["one", "two", "three"];
async.each(arrayOfArg, aCallback, err => {
    if(err) throw err; // handle the error!
    // carry on
}); 
```

# iphone - 在我的自定义 alloc 方法中返回 'self' 而它未设置为 '[(super or self) init...]' 的结果

> ID：15963591
> 
> 赞同：0
> 
> 时间：2013-04-12T05:16:02.317
> 
> 标签：iphone, ios, objective-c, self

我用我的自定义方法初始化我的自定义视图：

1）在我的视图控制器中，我正在调用自定义视图并将这个数组传递给我的 UIView 类型的自定义类

```
NSArray *array = [[NSBundle mainBundle] loadNibNamed:@"CustomViewiPhoneLayout" owner:self options:nil];

customViewObject = [[CustomView alloc] initWithArray:array];

[ParentLayout addSubview:customViewObject]; 
```

2) 自定义视图。

```
 -(id)initWithArray:(NSArray*)array {
      self = [array objectAtIndex:0]; // passing view as self; here it shows leak.
      if(self) {}
      return self;
  } 
```

它给了我可能的泄漏命名`Returning 'self' while it is not set to the result of '[(super or self) init...]'`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T05:22:44.037

当然，您不需要这个，只要：

```
NSArray *array = [[NSBundle mainBundle] loadNibNamed:@"CustomViewiPhoneLayout" owner:self options:nil];

customViewObject = [array objectAtIndex:0]; 
```

在您的代码中，您分配一个视图并将其分配给 self.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-07T08:16:18.673

我有同样的问题，我通过删除这些代码来解决它

```
NSArray *array = [[NSBundle mainBundle] loadNibNamed:@"CustomViewiPhoneLayout" owner:self options:nil];
customViewObject = [array objectAtIndex:0]; 
```

从定义init方法。

在您创建自定义视图的地方而不是在自定义的定义主体中使用上面的代码。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-12T05:50:40.270

编译器抱怨是因为您使用的`init`函数没有使用超级函数之一。尽管这可能合乎逻辑，但从技术上讲，这是对`init`函数的滥用，这就是编译器抱怨的原因。这并不总是一个问题（我有一些代码在我修复它之前只给了我一个警告），但最好不要那样工作。在这种情况下，这不是对 init 函数的正确使用。我会写另一个这样的函数：

```
+(customViewObject *)createWithArray:(NSArray *)array{
     customViewObject *returnObject = [array objectAtIndex:0];
     return returnObject;
} 
```

但是，查看第一段代码，我认为在 customViewObject 类中不需要有这种功能。我建议简单地这样做：

```
NSArray *array = [[NSBundle mainBundle] loadNibNamed:@"CustomViewiPhoneLayout" owner:self options:nil];

customViewObject = [array objectAtIndex:0];

[ParentLayout addSubview:customViewObject]; 
```

# javascript - 使用jQuery在循环中按名称获取单选按钮

> ID：15963594
> 
> 赞同：-1
> 
> 时间：2013-04-12T05:16:22.703
> 
> 标签：javascript, jquery

我正在使用 jquery 1.4.1，虽然我计划很快升级，但我需要解决以下问题。我需要遍历我的 html 页面上的所有单选按钮，然后根据它们的名称为几个单选按钮执行一些逻辑。以下是我的尝试，但它不起作用，有什么想法吗？

```
jQuery('input:radio').each(function() {
      if(jQuery(this).name('radioOneName')) {
           alert("radioOneName")
      } else {
           alert("not radioOneName")
      }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T05:26:26.423

试试这个`jQuery(this).attr('name') === 'radioOneName'`。[链接到文档](http://api.jquery.com/attr/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T06:29:18.913

你可以试试这个：

```
<input type="radio" id="abc" name="myradioname"/> 
```

在javascript中使用这个：

```
$('input[name="myradioname"]').each(function(){
    // do something...
}) 
```

基本上，此语法在文档中查询`<input>`具有指定名称的标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T12:18:51.240

你应该使用

```
$(this).attr("name"); 
```

很高兴我能帮上忙。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T06:16:07.893

尝试这个 ：）

```
$(document).ready(function () {

        $(':radio').each(function () {
            var myval = $(this).val();
            if (myval == "button1")
            {
                alert("first");
            }
            else
            {
                alert("second");
            }

        });
    }); 
```

# php - 登录时 MyAuth Laravel 捆绑错误

> ID：15963602
> 
> 赞同：0
> 
> 时间：2013-04-12T05:16:46.363
> 
> 标签：php, mysql, laravel, laravel-3

我使用 MyAuth 捆绑包作为我的身份验证平台。一切都很好，除了我想登录时遇到问题。它一直告诉我输入了错误的用户名或密码。但是我注册没有问题。

这是登录控制器（user.php）：

```
 public function action_login(){

    // get login POST data
    $userdata = array(
        'username'      => Input::get('email'),
        'password'      => Input::get('password')
    );

    if ( Auth::attempt($userdata) ){
        // we are now logged in, go to dashboard

        if(Config::get('myauth::config.login_redirect') != ''){
            $redirect_url = Config::get('myauth::config.login_redirect');
        } else {
            $redirect_url = Config::get('myauth::config.bundle_route') . '/dashboard';
        }

        return Redirect::to($redirect_url);
    } else {
        // auth failure! redirect to login with errors
        $redirect_url = Config::get('myauth::config.bundle_route') . '/' . Config::get('myauth::config.login_route');
        return Redirect::to($redirect_url)->with('notification', 'Incorrect login or password');
    }

} 
```

这是我的看法：

```
 {{ Form::open(Config::get('myauth::config.bundle_route') . '/' . Config::get('myauth::config.login_route')) }}
    <!-- check for login errors flash var -->
    @if (Session::has('notification'))
        <span class="notification">{{ Session::get('notification') }}</span>
    @endif

    <!-- email field -->
    <p>{{ Form::label('email', 'Email') }}</p>
    <p>{{ Form::text('email') }}</p>

    <!-- password field -->
    <p>{{ Form::label('password', 'Password') }}</p>
    <p>{{ Form::password('password') }}</p>

    <!-- submit button -->
    <p>{{ Form::submit('Login') }}</p>
{{ Form::close() }} 
```

这是我的 auth.php：

```
return array(

    'driver' => 'eloquent',

    'username' => 'username',

    'password' => 'password',

    'model' => 'User',

    'table' => 'users',

); 
```

和数据库：

```
 CREATE TABLE `users` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `username` varchar(200) NOT NULL,
  `email` varchar(200) NOT NULL,
  `password` varchar(200) NOT NULL,
  `created_at` datetime NOT NULL,
  `updated_at` datetime NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=latin1; 
```

我在 Laravel 论坛上问过这个问题，但仍然找不到任何答案。varchar 编号或变量有什么问题吗？

我从不更改任何其他设置。有人可以找出这段代码中的问题吗？谢谢

# jquery - 在 Jquery 中发送 GET 请求

> ID：15963603
> 
> 赞同：2
> 
> 时间：2013-04-12T05:16:52.497
> 
> 标签：jquery

我有以下一段代码

```
$("#autocomplete").autocomplete({
    source: ["c++", "java", "php", "coldfusion", "javascript", "asp", "ruby"],
    close: function (event, ui) {
        alert($(this).val());
    }
});

<label for="autocomplete">Select a programming language:</label>
<input id="autocomplete"> 
```

如何发送作为 GET 函数获得的值？我阅读了 Ajax GET 函数，但不确定如何编码从表单元素获取的数据

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T05:23:59.087

你可以使用**序列化**

它将一组表单元素编码为提交的字符串。

[http://api.jquery.com/serialize/](http://api.jquery.com/serialize/)

这就是你如何做到的

```
<form id="myform">
    <label for="autocomplete">Select a programming language:</label>
    <input id="autocomplete" name="autocomplete">
    <input type="button" id="btnSubmit" value="send">
</form>

<script>
$(document).ready(function(){

    $("btnSubmit").click(function(){
         $.ajax({'url':'myurlforajaxrequest',
                 'data': $("#myform").serialize(),
                 'type':'get'
               });
    });

});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T06:36:05.820

jQuery **$.ajax**默认 contentType 是**application/x-www-form-urlencoded**这意味着 jQuery 将对内容进行编码。但是，由于您指定了不同的 contentType，因此不会对数据进行编码，因此您必须自己进行编码。（[jquery ajax 编码数据](https://stackoverflow.com/questions/5263708/jquery-ajax-encoding-data)）

尝试**encodeURIComponent**。（[URL 为 AJAX 请求在 jQuery 中编码一个字符串](https://stackoverflow.com/questions/6544564/url-encode-a-string-in-jquery-for-an-ajax-request)）

> 通过将特定字符的每个实例替换为表示字符的 UTF-8 编码的一个、两个、三个或四个转义序列来编码统一资源标识符 (URI) 组件（对于由两个“代理”组成的字符，只有四个转义序列“ 人物）。

**例子：**

var 编码 = encodeURIComponent(str);

**完整的解决方案：**

```
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>jQuery UI Autocomplete - Default functionality</title>
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css"/>
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
<link rel="stylesheet" href="http://jqueryui.com/resources/demos/style.css"/>
<script>
  $(document).ready(function() {
    $("#autocomplete").autocomplete({
    source: ["c++", "java", "php", "coldfusion", "javascript", "asp", "ruby"],
    close: function (event, ui) {
        $.ajax({
            url: 'yourAjaxRequestHandleFile.php',
            data: 'q=' + encodeURIComponent($('#autocomplete').val()),
            type: 'get',
            success: function (ajxResponse) {
                alert(ajxResponse);
            }
        });
    }
});
  });
  </script>
</head>
<body>
<label for="autocomplete">Select a programming language:</label>
<input id="autocomplete">
</body>
</html> 
```

**// 这里是 PHP 代码**

```
<?php 
// Get Send Ajax Data
$q = $_GET['q'];
// Show Ajax Data and return to Ajax
echo "You submitted $q ";
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T05:50:04.333

这取决于您将其发送到的脚本所期望的内容，但`$.get()`接受的数据格式不止一种。它可以是一个简单的字符串或一个对象。

例如，如果您的脚本`programminglanguage`在请求中需要一个变量，您的关闭处理程序可能如下所示

```
$("#autocomplete").autocomplete({
    source: ["c++", "java", "php", "coldfusion", "javascript", "asp", "ruby"],
    close: function (event, ui) {
        var jqxhr = $.get("/my/script.php", "programminglanguage=" + $(this).val());
        // Alternatively:
        //var jqxhr = $(.get("/my/script.php", {"programminglanguage": $(this).val()});
    }
}); 
```

[$.get()](http://api.jquery.com/jQuery.get/)函数有一个您可能想要使用的成功处理程序参数，并且返回的对象的属性记录`jqxhr`在[此处](http://api.jquery.com/jQuery.ajax/#jqXHR)`jQuery.ajax()`的页面上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T05:23:04.837

这是[$.get](http://api.jquery.com/jQuery.get/)的文档。您传递给它的数据可以是 JS 对象或字符串。字符串基本上`key=val`是表单元素的编码表示。使用 jquery 表单元素上的[serialize](http://api.jquery.com/serialize/)方法来获取这样的字符串。希望有帮助！

# oracle - 在 pl_sql 中修剪前导单引号和尾随单引号的最佳方法是什么

> ID：15963605
> 
> 赞同：2
> 
> 时间：2013-04-12T05:16:53.340
> 
> 标签：oracle, plsql, trim

我得到一个带有前导和尾随单引号的 Varchar2 变量，但我想删除这些单引号，我这样做就像

```
trim(BOTH '''' FROM lastname); 
```

它给了我正确的结果，但它是正确的方法还是有其他方法可以做到这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T05:19:29.100

我认为你不能得到比你已经提出的更好的了。所以是的，这是正确的方法。

使用`BOTH`不是必需的，因为它是默认值（与同样有效的`leading`和`trailing`说明符相反）。因此，根据您的偏好（*short vs clear*），您可以将其省略，以便您的陈述变为

```
trim('''' from lastname) 
```

# html - Joomla 剥离我的 iframe

> ID：15963609
> 
> 赞同：2
> 
> 时间：2013-04-12T05:17:09.553
> 
> 标签：html, joomla, joomla2.5

我试图在 Joomla 2.5 中使用 JCE 编辑器将以下视频嵌入到文章中：

```
<iframe width="560" height="315" src="http://www.youtube.com/embed/4vAJdrDb1eA" frameborder="0" allowfullscreen></iframe> 
```

但是，Joomla 或 JCE 都在剥离上述代码。

这些是我为解决此问题而采取的步骤，但未成功：

*   在 Joomla 的*文本过滤器*（全局配置）中，我将*超级用户*（我）设置为*自定义黑名单*作为过滤器类型，以及以下*过滤器标签*（我省略了 iframe）：

> applet, body, bgsound, base, basefont, embed, frame,frameset, head, html, id, ilayer, layer, link, meta, name, object, script, style, title, xml

*   接下来，在 JCE Administration Editor Global Configuration 中，我设置 *Validate HTML* (Cleanup & Output) = No

我保存了所有更改。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T06:11:45.293

尝试在配置文件中允许 iframe -> 所需的配置文件 -> 插件参数 -> 允许 IFrame。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-26T05:13:37.770

在 JCE 版本 2.3.2.4 中，我在**Features and Layout** > **Additional Features** > **Media Support上找到了它**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T07:25:49.623

粘贴代码内容时只需停用您的编辑器，始终有效 xD

并且不要在启用编辑器的情况下编辑文章，你应该没问题。在 1.5 中取消“代码清理”会更容易......

# java - SWT 按钮图像限制

> ID：15963610
> 
> 赞同：0
> 
> 时间：2013-04-12T05:17:14.820
> 
> 标签：java, image, button, swt, border

当在 SWT 上设置`Button`图像并且图像更大（在这种情况下为宽度）时，按钮的限制不受尊重，并且来自一个按钮的图像可以“触摸”来自另一个按钮的图像。

![在此处输入图像描述](https://i.stack.imgur.com/tQnMY.png)

奇怪的是，如果使用`SWT.LEFT`或`SWT.RIGHT`，则问题不会出现在相应的一侧。试过了`SWT.CENTER`，没有成功。

是否有任何“解决方法”可以绕过这个问题？还是只是任何 SWT 用户必须习惯的东西？

复合代码：

```
GridLayout gridLayout = new GridLayout(1, true);
gridLayout.marginWidth = 0;
gridLayout.marginHeight = 0;
gridLayout.verticalSpacing = 0;
setLayout(gridLayout);
setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, true)); 
```

按钮代码：

```
Button button=new Button(this, SWT.PUSH | SWT.WRAP);
GridData gridData=new GridData(SWT.FILL, SWT.FILL, true, false);
gridData.widthHint=size.width;
gridData.heightHint=size.height;
button.setLayoutData(gridData); 
```

我还有一个与复合布局关联的侦听器，用于调整列数，但我认为这无关紧要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T16:58:47.603

为这个任务使用 a`Button`似乎不是最好的选择（因为边界）。

您最好使用 a`Label`来托管`Image`. 您的代码只会发生很少的变化，因为您只需要将所有出现的`Button`with替换掉`Label`。

# javascript - 数组迭代陷阱

> ID：15963614
> 
> 赞同：3
> 
> 时间：2013-04-12T05:17:45.520
> 
> 标签：javascript

这段代码出了什么问题，我总是得到意外的输出？

```
var foo = [3,4,5];

for ( var i in foo ) {
      if ( i == 1 ) {
     foo.unshift(6,6);
         }
  document.write('item: '+foo[i]+"<br>")
  }
output:
item: 3
item: 6
item: 3 
```

我能得到一个适当的理由吗？谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T05:35:16.747

我得到的输出`IE8`是这个

```
item: 3
item: 6
item: 3
item: 4
item: 5 
```

哪个是对的。如果您想在`unshift`使用另一个循环后完全更新值

```
var foo = [3,4,5];
  for ( var i in foo ) {
      if ( i == 1 ) {
     foo.unshift(6,6);
         }
  }
  for ( var i in foo )
    document.write('item: '+foo[i]+"<br>") 
```

哪个会给

```
item: 6
item: 6
item: 3
item: 5
item: 4 
```

在您的代码中，当您在ie is之后`document.write('item: '+foo[i]+"<br>")`使用`i = 0`Your `foo[0]`is `3` For调用时。`i=1``unshift` `foo == [6,6,3,4,5]``foo[1]``6`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T06:07:59.697

*   来自[Mozilla](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for...in)`for...in`的摘要

`for..in should not be used to iterate over an Array where index order is important. Array indexes are just enumerable properties with integer names and are otherwise identical to general Object properties.
There is no guarantee that for...in will return the indexes in any particular order and it will return all enumerable properties, including those with non–integer names and those that are inherited.`

`Because the order of iteration is implementation dependent, iterating over an array may not visit elements in a consistent order. Therefore it is better to use a for loop with a numeric index (or Array.forEach or the non-standard for...of loop) when iterating over arrays where the order of access is important.`

*   来自[ECMAScript 语言规范](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf)

`If new properties are added to the object being enumerated during enumeration, the newly added properties are not guaranteed to be visited in the active enumeration. A property name must not be visited more than once in any enumeration.`

让我们用例子来谈谈，如果我们正在使用一个库，它使用。

```
Array.prototype.maxLimit = 100000; 
```

此属性遍历`for .. in`循环。

另一个版本的代码来解释`for .. in`循环

```
var foo = [3,4,5];

for ( var i in ( alert( JSON.stringify(foo)) || foo ) ) {

    if ( i == 1 ) {
       foo.unshift(6,6);
    }
    console.log('item: '+foo[i] , i , foo.length );    
} 
```

仅`alert`弹出一次

# java - 如何创建无限循环，在 if(condition=true) 上调用其中的方法，并在方法执行后继续无限循环。在java中？

> ID：15963615
> 
> 赞同：-3
> 
> 时间：2013-04-12T05:17:46.603
> 
> 标签：java

我有一个方法 RunFrame();

我想在无限循环中调用它。

```
while(true)
{
   if(x==true)
   { RunFrame(); }
} 
```

如果条件为真，则在执行方法后，我的循环会中断；我想再次继续循环，直到再次发生 x 的下一个事件，依此类推..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T05:23:00.570

由于您的`while(true)`子句，代码将无限期地运行，无论值是什么`x`（因为`x`仅指示何时`RunFrame()`调用）。

我看到的唯一问题是`RunFrame`引发某种异常或中止程序。您可以像下面这样尝试：

```
while(true)
{
   if(x==true)
   { 
       try
       {
           RunFrame(); 
       }
       catch(Exception e)
       {
           e.printStackTrace();
       }
   }
} 
```

以上应满足例外情况。

编辑：

看到你的评论：

> 我想创建无限循环。然后在其中使用 for 循环获取文件监视事件。并检查 if(event==requiredEvent) 然后调用方法 RunFrame。

您可以看一下[`WatchService`](http://docs.oracle.com/javase/7/docs/api/java/nio/file/WatchService.html)哪个将允许您访问`watch`给定目录。您可以查看[此 Oracle 教程](http://docs.oracle.com/javase/tutorial/essential/io/notification.html)，了解如何实现您想要的。这将触发您将处理的事件，而无需您的代码必须无限期地循环。

# binary - 240位雷达字

> ID：15963616
> 
> 赞同：1
> 
> 时间：2013-04-12T05:17:53.420
> 
> 标签：binary, serial-port, arduino, ls, octal

我有一个使用`240 bit`八进制数据格式的项目，它将`Arduino uno`在 2.4K RS232 的串行端口中转换为 TTL。

与`240 bits`其他东西一起有范围，方位角和仰角词，这是我需要显示的。

帧以帧同步码开始，它是一个交替的二进制 7 位码，即：
`1110010`帧 1 和
`0001101`帧 2，依此类推。

我在想我可能会使用类似`val = serial.read`命令的东西

```
if (val = 1110010 or 0001101) { data++val; }` 
```

这将让我验证我的刺痛的开始。

八进制帧的其余部分`240 bit`（所有数字）可以串行读取到一个字符串，其中只有部分需要打印到屏幕上。

经过帧同步，所有八进制数据都是串行的，没有空值或分隔符，所以我在想

```
printf("%.Xs",stringname[xx]); 
```

会让我根据需要设置字符，以便将它们解析出来。

我如何告诉程序`sync`它正在寻找的框架是，`binary`或者需要进入字符串的数据是`octal`，或者它可能需要转换才能在屏幕上读取？

# c# - 如何组织 msi 安装程序生成的配置文件和 dll？

> ID：15963618
> 
> 赞同：0
> 
> 时间：2013-04-12T05:17:59.830
> 
> 标签：c#, visual-studio-2010, windows-installer, installation

我在其中创建了一个项目`C#.NET`，其中**3 个配置文件和 2 个 dll**。为了创建设置，我使用`Visual Studio Installer(Setup Project)`. 我想按如下方式组织我的主要输出：

1.  配置文件和 dll 的单独文件夹。我在下面的图像中尝试过，但安装应用程序后没有运行。 ![结构](https://i.stack.imgur.com/42Gfr.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T05:26:44.393

您引用的 dll 和程序集的默认配置必须与可执行文件位于同一文件夹中。你不能把它们放在你想要的地方。

如果您自己加载这些 dll 程序集并自己在程序集中加载这些配置，您可以自由地将它们放在您想要的位置。但这可能不值得您投入大量时间。

# github - 如何在我的 git 页面中插入图片？

> ID：15963619
> 
> 赞同：1
> 
> 时间：2013-04-12T05:18:00.160
> 
> 标签：github, markdown

我刚刚建了一个git用户页面，我想在我的文章中添加一张图片。然后我用

```
![repo name](https://github.com/zhangyangyu/zhangyangyu.github.io/raw/master/images/how-to-build-a-user-page-on-github/p1.png) 
```

我在网上找到了这个，如果我把路径放在浏览器中，我可以看到我的图片。但在我的文章中，它只是作为文本出现。为什么？如果它有助于我的配置文件的内容是：

```
markdown: rdiscount
pygments: true 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T05:29:29.563

您对文件[使用](http://github.com/zhangyangyu/zhangyangyu.github.io/tree/master/_posts)Textile，但对图像使用 Markdown 语法。

要修复，请使用 Markdown 文件，例如

```
2013-04-12-how-to-build-a-user-page-on-github.md 
```

[`ref`](http://github.com/svnpenn/svnpenn.github.io/tree/source/_posts)

# c# - roslyn 的 CodeIssue 项目

> ID：15963629
> 
> 赞同：0
> 
> 时间：2013-04-12T05:18:59.343
> 
> 标签：c#, roslyn

当有人写“new MyClass()”和 MyClass 从 EntityBase 继承时，有没有办法得到编译器错误。我喜欢阻止开发人员写这个。我可以用 CodeIssue 项目做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T05:53:29.957

绝对地！

这正是 CodeIssues 旨在处理的那种策略。您应该能够编写一个检查`ObjectCreationSyntax`节点的 CodeIssue。检查继承的代码看起来像（目前不在编译器附近，所以这是来自内存）：

```
var entityBaseType = document.Project.GetCompilation(cancellationToken).GetTypeByMetadataName("FullyQualifiedTypeName.EntityBase");
var typeInfo = document.GetSemanticModel(cancellationToken).GetTypeInfo(node);
if (typeInfo.Type.BaseType.Equals(entityBaseType))
{
    return new CodeIssue(...);
}

return null; 
```

# c++ - 向量附加

> ID：15963630
> 
> 赞同：0
> 
> 时间：2013-04-12T05:19:01.723
> 
> 标签：c++, vector

到目前为止，这是我的代码我想做的是说用户输入 1 2 3 然后按 -1，他或她将被要求输入另一组数字，比如 9 8 7，我的程序应该做什么将它们显示为 1 2 3 9 8 7，而是像这样显示它们 6 6 6 6 6 6，基本上它计算有多少数字并显示该数字的数量。那么任何人都可以在这里帮助我，我该如何制作才能显示两组数字的组合？

```
#include <iostream>

#include <vector>

using namespace std;

vector<int> append(vector<int> a, vector<int> b)
{
    int n = a.size();
    int m = b.size();
    vector<int> c(n + m);
    int i;

    for (i = 0; i < n; i++)
        c[i] = a[i];

    for (i = 0; i < m; i++)
        c[n + i] = b[i];

    return c;
}

int main()
{
    cout << "Please enter a set of numbers, insert -1 when done.\n";
    vector<int>a;
    bool more = true;
    while (more)
    {
        int n;
        cin >> n;
        if (n == -1)
            more = false;
        else
            a.push_back(n);
    }

    cout << "Please enter another set of numbers, insert -1 when done.\n";
    vector<int>b;
    more = true;
    while (more)
    {   
        int m;
        cin >> m;
        if (m == -1)
            more = false; 
        else 
            b.push_back(m);
    }

    vector<int>d = append(a,b);
    {

        int i;
        for (i= 0; i < d.size(); i++)

        cout << d.size() << "\n";
    } 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T05:22:26.490

那是因为最后你打印的是大小，而不是值：

```
cout << d.size() << "\n"; 
```

应该：

```
cout << d[i] << "\n"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T05:25:05.407

这是因为当您打印它时，您正在打印`d.size`而不是`d[i]`.

```
cout << d.size() << "\n"; 
```

需要是：

```
cout << d[i] << endl; 
```

# android - 安卓 + 谷歌地图 API v2

> ID：15963631
> 
> 赞同：1
> 
> 时间：2013-04-12T05:19:01.993
> 
> 标签：android, google-maps, compiler-errors

我正在使用 google map api v2 创建一个简单的应用程序，但是在将 google play 服务添加到项目后出现问题，它显示一个红色感叹号，并且在**android 构建路径**中它向我显示**google play services-lib.jar缺少** 如何解决和解决此问题的任何人都可以帮助我吗？？？？？？

# 安卓清单

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.googlemapv2"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="16"
        android:targetSdkVersion="17" />

    <permission
        android:name="com.example.googlemapv2.permission.MAPS_RECEIVE"
        android:protectionLevel="signature" />

    <uses-permission android:name="your.application.package.permission.MAPS_RECEIVE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true" />

    <meta-data
        android:name="com.google.android.maps.v2.API_KEY"
        android:value="API KEY" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.googlemapv2.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

# mainActivity.java

```
package com.example.googlemapv2;

import android.os.Bundle;
import android.app.Activity;
import android.support.v4.app.FragmentActivity;
import android.view.Menu;

public class MainActivity extends FragmentActivity{

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

} 
```

# 主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <fragment
        android:name="com.google.android.gms.maps.SupportMapFragment"
        class="android.support.v4.app.DialogFragment"
        android:id="@+id/map"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T05:42:26.850

确保您`lib`存在于 eclipse 中并标记为`IsLibrary`，并且您`lib`在项目中添加了单击右键>项目属性>单击`android`并添加`lib`

如果您完成了上述步骤并且即使您遇到问题，那么一旦*重新启动*您的 Eclipse 然后清理然后*运行它*。

# jquery - jQuery更改多个CSS然后改回来

> ID：15963635
> 
> 赞同：1
> 
> 时间：2013-04-12T05:19:31.370
> 
> 标签：jquery

使用 jQuery 切换多个 css 属性然后将它们全部切换回来的首选方法是什么。

例如，如果我设置：

```
$element.css({ "background" : "white", "height": "50px", "width" : "30px" });
$anotherElement.css({ "overflow" : "hidden", "font-size": "12px", "padding" : "5px" });
$yetAnotherElement.css({ "top" : "10px", "font-weight": "bold" }); 
```

我使用了这个特定数量的元素，每个元素有 2-3 个不同的选择器，以说明逐个保存不方便，并且为每个创建“临时类”也不方便，特别是如果我有的话`yetAnotherAnotherElement`等等。 . 让我们也说它们在不同的容器中。

能够获得css“对象”会很好：

```
var oldCSS= $element.css(); 
$element.css({ ...change css... });

//Change back
$element.css(oldCSS); 
```

也应该很好地与数组一起工作：

```
//Set
elements.each(function (index, element) { 
     array[index] = $(element).css();
});

//Restore
elements.each(function (index, element) { 
     $(element).css(array[index]);
}); 
```

有这样的事情吗？

更新：原来我可以默认设置 $element.css(cssObject) ，它只是覆盖空白 css() 以基于标志返回对象或字符串。例如：

`element.css("overflow", true)`会回来`{ "overflow" : "hidden" }` `element.css("position", "overflow", true)`会回来`{ "position" : "absolute", "overflow":"hidden" }`

然后它可以像我想要的那样轻松恢复：`element.css(cssObject)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T05:23:18.057

我认为最简单的解决方案是将这些元素转换为 CSS 类。

例如

```
.style1 {
    "background" : "white", "height": "50px", "width" : "30px"
} 
```

然后，您可以从元素中添加和删除类来打开和关闭它。

```
$element.toggleClass('style1'); 
```

如果您不想将这些样式存储在常规样式表中，而是在运行时生成它们。以下答案提供了有关向页面动态添加类的详细信息。它还应该有额外的好处，让 CSS 优先于链接的样式表。

[jQuery 创建 CSS 规则/类@runtime](https://stackoverflow.com/a/2076345/698026)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T06:14:04.867

jQuery CSS 支持使用数组 prop，我做了一个例子

[http://jsfiddle.net/steelywing/utGVz/](http://jsfiddle.net/steelywing/utGVz/)

```
function get_random_color() {
    var letters = '0123456789ABCDEF'.split('');
    var color = '#';
    for (var i = 0; i < 6; i++) {
        color += letters[Math.round(Math.random() * 15)];
    }
    return color;
}

$(function () {
    // Which css want to save
    var cssList = ['background-color', 'color'];

    // Use to save css
    var css;

    $('#save').click(function () {
        css = $('div').css(cssList);
    });

    $('#restore').click(function () {
        $('div').css(css);
    });

    $('#change').click(function () {
        $('div').css('background-color', get_random_color());
        $('div').css('color', get_random_color());
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T05:22:46.673

我建议使用 .toggleClass 并将相关的 css 放入一个类中：

你的班级可以是：

```
.test {
    background : "white", "height": "50px", "width" : "30px";
} 
```

# webview - 从 BB10 中的 Webview 返回值

> ID：15963637
> 
> 赞同：2
> 
> 时间：2013-04-12T05:19:39.460
> 
> 标签：webview, blackberry-10

是否可以从 bb 10 中的 Webview 返回值？
示例：如果我在我的应用程序中加载用于网上银行的 Webview，并且有没有办法获取从 Webview 返回到应用程序的一些数据（如付款参考号）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-21T05:28:43.600

At first you have to add a javascript in the html file that return document.documentElement.innerHTML; After completely loading the webview call evaluateJavaScript (const QString &script, bb::cascades::JavaScriptWorld::Typeworld world) function, this will evaluate the javascript in the webview. Lastly you should catch the sigal "javaScriptResult" from this signal you can get all the source of html file as qvariant.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T07:27:15.223

为了安全起见，您无法访问 webview 的 html 内容，除非您自己将其设置为字符串。

您可以访问重定向 url，但没有 Post 参数。

# database - INSERT INTO 语句中的语法错误。在 VB.net 2010 中

> ID：15963641
> 
> 赞同：1
> 
> 时间：2013-04-12T05:20:34.460
> 
> 标签：database, vb.net, data-binding, binding, syntax-error

我已经这个问题一周了，并在每个现有的论坛中搜索答案，也许这次我发布了我自己的问题。

我的问题是将数据保存在数据库中。我有一个绑定到它的数据网格，但什么也没有出现。我正在使用 .mdb 访问数据库。mdb 表名是 tblinformation。

看来我的问题出在 INSERT INTO 语句中，因为每次我尝试从文本框中保存数据时都会出现一个 msgbox。最后，我是 vb.net 的新手 >..<

顺便说一句，这是我的代码：

* * *

```
Imports System.Data.OleDb

Public Class frmbookinfo
Dim cnn As New OleDb.OleDbConnection

Private Sub cmdsave_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles cmdsave.Click
    Try
        cnn = New OleDb.OleDbConnection("Provider=Microsoft.Jet.Oledb.4.0;Data Source=D:\AmosBooks_System\AmosBooks_System\database.mdb")
        Dim command As String
        command = "INSERT INTO tblinformation(title, author, isbn, category, edition, pages, language, yearofpublication, bcode, price) VALUES (@title, @author, @isbn, @category, @edition, @pages, @language, @yearofpublication, @bcode, @price)"
        cnn.Open()
        Dim cmd As OleDbCommand
        cmd = New OleDbCommand(command, cnn)
        cmd.Parameters.AddWithValue("@title", txttitle.Text)
        cmd.Parameters.AddWithValue("@author", txtauthor.Text)
        cmd.Parameters.AddWithValue("@isbn", txtisbn.Text)
        cmd.Parameters.AddWithValue("@category", txtcategory.Text)
        cmd.Parameters.AddWithValue("@edition", txtedition.Text)
        cmd.Parameters.AddWithValue("@pages", txtpages.Text)
        cmd.Parameters.AddWithValue("@language", cmblanguage.Text)
        cmd.Parameters.AddWithValue("@yearofpublication", dtyearpub.Text)
        cmd.Parameters.AddWithValue("@bcode", txtbcode.Text)
        cmd.Parameters.AddWithValue("@price", txtprice.Text)

        cmd.ExecuteNonQuery()
    Catch exceptionObject As Exception
        MessageBox.Show(exceptionObject.Message)
    Finally
        cnn.Close()
    End Try
End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T07:06:58.373

语法错误是由字段名称中的单词 LANGUAGE 引起的。
这个词在 JET-SQL 中是保留的，因此应该用方括号括起来

```
command = "INSERT INTO tblinformation(title, author, isbn, category, edition, pages, " + 
          "[Language], yearofpublication, bcode, price) VALUES " + 
          "(@title, @author, @isbn, @category, @edition, @pages, " + 
          "@language, @yearofpublication, @bcode, @price)" 
```

# c# - ImageResizer.Net AzureReader2 插件不起作用

> ID：15963642
> 
> 赞同：2
> 
> 时间：2013-04-12T05:20:56.007
> 
> 标签：c#, asp.net-mvc-4, azure, imageresizer

我正在使用 ImageResizer.NET 库从 Azure Blob 存储读取图像并调整它们的大小。

为此，我需要安装 AzureReader2 插件并在 web.config 文件中对其进行配置。

我在 Web.Config 中有以下行。

```
<plugins>
  <add name="MvcRoutingShim" />
  <add name="PrettyGifs" />
  <add name="SimpleFilters" />
  <add name="AzureReader2" connectionString="StorageConnectionString" endpoint="http://storageaccount.blob.core.windows.net/" />
</plugins> 
```

当我运行我的 Web 角色时，我收到以下错误：**设置必须采用“name=value”的形式。**

我错过了什么？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T18:03:07.400

### 在 AzureReader2 中，必须指定实际的连接字符串，而不是连接字符串的名称

```
<plugins>
  <add name="MvcRoutingShim" />
  <add name="PrettyGifs" />
  <add name="SimpleFilters" />
  <add name="AzureReader2" connectionString="DefaultEndpointsProtocol=http;AccountName=myAccountName;AccountKey=myAccountKey" endpoint="http://<account>.blob.core.windows.net/" />
</plugins> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T05:25:57.767

尝试添加`prefix="~/img/"`最后一个标签。

**如下所示：**

```
<plugins>
  <add name="MvcRoutingShim" />
  <add name="PrettyGifs" />
  <add name="SimpleFilters" />
  <add name="AzureReader2" prefix="~/img/" connectionString="StorageConnectionString" endpoint="http://storageaccount.blob.core.windows.net/" />
</plugins> 
```

希望这对您有所帮助。

# visual-studio-2010 - Visual Studio 2012 express 中的 Visual C++ 2010 编译器

> ID：15963643
> 
> 赞同：1
> 
> 时间：2013-04-12T05:20:59.420
> 
> 标签：visual-studio-2010, visual-c++, visual-studio-2012

Visual Studio 2012 Express（Windows 桌面 SKU）是否将 Visual C++ 2010 编译器（32 位和 64 位）捆绑为项目往返功能的一部分，或者此功能是否仅在已单独安装 Visual Studio 2010 时才有效?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T23:42:53.117

Visual Studio Express 2012 for Windows 8 Desktop 不支持替代平台工具集。

如果已安装 Visual Studio 2010 或 Windows SDK 7.1，您可以从这些工具集中启动开发人员命令提示符，然后[通过 msbuild 启动旧编译器](http://blogs.msdn.com/b/vcblog/archive/2010/01/11/vcbuild-vs-c-msbuild-on-the-command-line.aspx)。

# javascript - Document.ready 澄清？

> ID：15963645
> 
> 赞同：3
> 
> 时间：2013-04-12T05:21:21.267
> 
> 标签：javascript, jquery

我最近看到一些使用这种模式的网站：

```
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>

  <script> 
    $(function (){...do some stuff with plugins...});
  </script>

</head>
<body>

  <script src="myplugin1.js"></script>
  <script src="myplugin2.js"></script>
  <script src="myplugin3.js"></script>
</body>
</html> 
```

这让我想到了一些陷阱：

`Question #1`

`document.ready`解析插件（JS）后引发未执行的事件。

它在dom**结构**完成时执行。（注意：我没有说：“当所有资源都已*下载*”！）

因此，可能存在`document. ready`函数将尝试使用尚未完全下载的插件变量的情况。（这将导致错误）。

我对吗 ？

`Question #2` 这导致我： 在脚本引用位置*之前*“从不使用 document.ready” （我的意思是：在 document.ready 依赖于那些脚本变量的情况下）。

我对吗 ？

*ps我不是在谈论window.load，它显然会在这里工作，但我将不得不等待更长的时间。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T05:23:58.947

如果您考虑页面中的所有类型的资源，许多资源可以与页面内容分开加载：例如图像和样式表。它们可能会改变页面的外观，但不能真正改变结构，因此单独加载它们是安全的。

另一方面，脚本有一个小东西`document.write`，可以给作品带来麻烦。如果我有一些这样的 HTML：

```
Who would <script>document.write("<em>");</script>ever</em> write like this? 
```

然后浏览器会很好地解析它；`document.write`，如果像这样在顶层使用，则有效地在该位置插入 HTML 以进行解析。这意味着整个页面的其余部分都依赖于一个脚本元素，因此在该脚本加载之前，浏览器无法真正继续处理文档。

因为脚本可能会修改 HTML 并改变结构，所以浏览器迫不及待地加载它们：它必须在那个时刻加载它们，并且它不能说 DOM 已经准备好，因为脚本可能会修改它。**因此，浏览器必须延迟 DOM 就绪事件，直到所有脚本都运行完毕。**这使您可以安全地将依赖代码放在就绪处理程序的顶部。

但是，我建议您不要这样做，因为它不是很清楚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T05:24:44.760

`$(document).ready`等同于现代浏览器中的[DOMContentLoaded](https://developer.mozilla.org/en-US/docs/DOM/Mozilla_event_reference/DOMContentLoaded)事件（它回退到等同于相同场景的旧版浏览器中的其他一些事件）。

MDN 很好地总结了它：

> DOMContentLoaded 事件在文档完全加载和解析后触发，无需等待样式表、图像和子框架完成加载（加载事件可用于检测完全加载的页面）。

因此，您的脚本将**始终**在执行时被解析。

# linux-kernel - When are the contents of .exit.text section in an ARM vmlinux file discarded once it is loaded in memory?

> ID：15963650
> 
> 赞同：1
> 
> 时间：2013-04-12T05:21:41.980
> 
> 标签：linux-kernel, arm, kernel

I understand that the .exit.text section will be filled by the linker with functions defined with __exit macro. I can see the section on dissassembly of the vmlinux file. But I did not understand at what point are the contents discarded once the file is loaded in memory? Does it happen in the kernel code? Can anyone explain this more?
Thanks in advance!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T14:23:39.510

The files [vmlinux.lds.S](https://git.kernel.org/cgit/linux/kernel/git/stable/linux-stable.git/tree/arch/arm/kernel/vmlinux.lds.S) and [module.c](https://git.kernel.org/cgit/linux/kernel/git/stable/linux-stable.git/tree/arch/arm/kernel/module.c) handle this. The handling depends on your kernel version and configuration; neither have been given. My assumption is you mean the `.exit.text` section **in the kernel** and not some user space task. Generally, the kernel doesn't exit, so they are discarded by the linker script unless you have some debugging configurations.

**Edit:** The android kernel was made with a `.config` file which enables Linux kernel features at compile time. The `.config` for **CONFIG_HOTPLUG_CPU** is a CPU; some big servers can keep running even when the CPU is exchanged. It is hard to answer your question. I don't know where your Android kernel source is or what `.config` options it was built with.

The sections are kept with `GENERIC_BUG`; so it is possible your kernel was built with this. From the stock *vmlinux.lds.S*, the `.exit.data` section is put **before** `__init_end`, so it is freed and returned to memory after the `init` portion runs. Ie, present only during boot. Under these circumstances, you will see it in the *vmlinux* ELF, but not in the runtime *kcore* or however you are dumping it.

Specifically, [main.c's](https://git.kernel.org/cgit/linux/kernel/git/stable/linux-stable.git/tree/init/main.c) `start_kernel()`, `rest_init()`, `kernel_init()`, and `free_initmem()` are the place where this stuff is discarded.

# python - 根据python中的块大小在python中反转字符串

> ID：15963654
> 
> 赞同：5
> 
> 时间：2013-04-12T05:22:01.610
> 
> 标签：python, python-2.7

我试图根据给定的块大小反转字符串

例如

`"the price of food is 12 dollars"`我给定一个块大小为 4

我希望最终结果是：

```
food of price the dollars 12 is 
```

我不知道如何将它输入 python 任何帮助将不胜感激我需要它适用于任何块大小

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T05:31:04.967

```
def chunks(seq, n):
    return [seq[i:i+n] for i in range(0, len(seq), n)]

s = "the price of food is 12 dollars"
' '.join(' '.join(reversed(chunk)) for chunk in chunks(s.split(), 4)) 
```

Related: [How do you split a list into evenly sized chunks in Python?](https://stackoverflow.com/q/312443/674039)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-12T05:27:44.030

使用[`itertools`石斑鱼食谱](http://docs.python.org/2/library/itertools.html#recipes)：

```
>>> from itertools import izip_longest
>>> def grouper(n, iterable, fillvalue=None):
        "Collect data into fixed-length chunks or blocks"
        # grouper(3, 'ABCDEFG', 'x') --> ABC DEF Gxx
        args = [iter(iterable)] * n
        return izip_longest(fillvalue=fillvalue, *args)

>>> text = "the price of food is 12 dollars"
>>> ' '.join(word for g in grouper(4, text.split()) 
                  for word in reversed(g) if word)
'food of price the dollars 12 is' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T06:07:41.473

您实际上是在拆分列表，反转它，然后旋转它。

所以这有效：

```
>>> st='the price of food is 12 dollars'
>>> li=st.split()[::-1]
>>> n=3
>>> print ' '.join(l[n:]+l[:n])
food of price the dollars 12 is 
```

或者，更直接地：

```
>>> li='the price of food is 12 dollars'.split()[::-1]
>>> print ' '.join(li[3:]+li[:3])
food of price the dollars 12 is 
```

或者，如果你想在一个函数中使用它：

```
def chunk(st,n):
    li=st.split()[::-1]  # split and reverse st
    return ' '.join(li[n:]+li[:n])

print chunk('the price of food is 12 dollars',3) 
```

关键是：

```
st='the price of food is 12 dollars'  # the string
li=st.split()                         # split that
li=li[::-1]                           # reverse it
li=li[3:]+li[:3]                      # rotate it
' '.join(li)                          # produce the string from 'li' 
```

# list - Sharepoint：将新项目添加到列表时建立相关记录

> ID：15963661
> 
> 赞同：0
> 
> 时间：2013-04-12T05:22:50.643
> 
> 标签：list, sharepoint, relationship

在列表中的项目之间实现父子层次结构的最佳方法是什么？要求如下

```
-> there is a list item with a particular ID
-> that particular ID could have related records.
-> all those related records should show up when viewing the list item 
```

当用户使用表单将新项目添加到列表时，他们应该可以选择要添加的新项目是否具有另一个相关项目。

这里的主要问题是在列表中建立这种层次结构的最佳方法是什么？此外，所有项目都将在同一个列表中，那么我们如何将列表链接到自身？或者，实现这一点的最佳方法是什么？我可以在共享点服务器对象模型的范围内想出几种方法来处理这个问题；但是，这需要主要在 Sharepoint 本身的 UI 中完成（可能会使用 Web 部件、功能等）。但是，我不确定如何在 SHAREPOINT 容器本身中实现它。

任何想法/见解将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:04:02.513

您可以在列表中创建一个以父列表为自身的查找列，并允许多项选择。这样，您将能够检查特定列表项的多个父 ID。

要显示相关列表项，您可以在共享点设计器中自定义列表的详细信息视图页面，并根据当前项添加具有适当过滤器的列表视图 Web 部件或数据视图。

# android - 如何从时间选择器中节省时间并进行比较

> ID：15963672
> 
> 赞同：1
> 
> 时间：2013-04-12T05:23:29.443
> 
> 标签：android, time, compare, timepicker

我正在编写一个应用程序，我需要从开始时间选择器获取用户设置时间，以及从结束时间选择器获取用户设置时间。然后将开始时间和结束时间与当前时间进行比较。如果当前时间等于开始时间，则手机静音。如果结束时间等于当前时间，则取消静音电话。任何帮助，尤其是代码示例，将不胜感激。提前谢谢。

```
public TimePickerDialog.OnTimeSetListener sTimeSetListener = new TimePickerDialog.OnTimeSetListener() {
        public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
            sHour = hourOfDay;
            sMinute = minute;
            updateDisplay();
            displayToast();

        }
    };

    public TimePickerDialog.OnTimeSetListener eTimeSetListener = new TimePickerDialog.OnTimeSetListener() {
        public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
            eHour = hourOfDay;
            eMinute = minute;
            updateDisplayE();
            displayToastE();

        }
    };

    public void updateDisplay() {
        startTime.setText(new StringBuilder().append(pad(sHour)).append(":")
                .append(pad(sMinute)));
        final int compareStartHour = sHour;
        Log.e("beginning", "Value " + sHour);
    }

    public void updateDisplayE()
 {
        endTime.setText(new StringBuilder().append(pad(eHour)).append(":")
                .append(pad(eMinute)));
    }

    private void displayToast() {
        Toast.makeText(
                this,
                new StringBuilder().append("Time choosen is ").append(
                        startTime.getText()), Toast.LENGTH_SHORT).show();

    }

    private void displayToastE() {
        Toast.makeText(
                this,
                new StringBuilder().append("Time choosen is ").append(
                        endTime.getText()), Toast.LENGTH_SHORT).show();

    }

    private static String pad(int c) {
        if (c >= 10)
            return String.valueOf(c);
        else
            return "0" + String.valueOf(c);
    }

@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.preset_edit);
        save = (Button) findViewById(R.id.btnSave);
        TextView eventTxt = (TextView) findViewById(R.id.txtViewEvent);
        startTime = (Button) findViewById(R.id.btnStartTime);
        endTime = (Button) findViewById(R.id.btnEndTime);

        startTime.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                showDialog(TIME_DIALOG_ID);
            }
        });

        endTime.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                showDialog(TIME_DIALOG_ID2);
            }
        }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T05:38:07.360

使用`Calendar`类实例：

```
Calendar calendar=Calendar.getInstance();
calendar.set(Calendar.HOUR, tPicker.getCurrentHour());
calendar.set(Calendar.MINUTE, tPicker.getCurrentMinute());
calendar.set(Calendar.SECOND, tPicker.getCurrentSecond());
//you can also set the day, month, year etc., default values are today's 
```

然后打电话

```
calendar.getTimeInMillis() 
```

它将以毫秒 ( `long`) 为单位返回您的时间值，您可以轻松地将其与另一个进行比较。

有关详细信息，请参阅[`Calendar`](http://developer.android.com/reference/java/util/Calendar.html)类文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T05:43:19.010

你也可以试试这个……它对我有用……首先从 TimePickerDialog 中花一点时间，然后将其放入 String 中，然后应用以下代码……

```
SimpleDateFormat sdf = new SimpleDateFormat("hh:mm");
            java.util.Date d_min = null;
            java.util.Date d_max = null;
            try {
                d_min = sdf.parse(time_min);//time_min is the Minimum time in String
                d_max = sdf.parse(time_max);time_max is the Maximun time in String
                d_compare = d_max.compareTo(d_min);
            } catch (ParseException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
 if (d_compare < 0) {
                check = 3;
                showDialog(0);
            } 
```

你可以像这样比较当前时间..希望这对你有帮助..你也可以看看这个......[当前时间](https://stackoverflow.com/questions/3611059/how-to-get-the-current-time)

而这个...[链接](https://stackoverflow.com/questions/7005749/how-to-get-the-time-on-the-current-android-device)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T05:29:26.393

从 TimePicker 获取时间并保存：

```
Time selectedTime = new Time(sHour, sMinute, 0); 
```

将其与当前时间或任何其他时间进行比较：

```
Date time = MyClassName.convertStringToTime(selectedTime.toString()); 
```

并将两个日期值传递给函数：

```
public static int compareTime(Date date1, Date date2) {
        int result = date1.compareTo(date2);

        if (result > 0) //
        {
            return 1;
        } else if (result == 0) {
            return 0;
        }
        return -1;

    } 
```

编辑： public static class MyClassName{ public static Date convertStringToTime(String strTime) { System.out.println("要转换的时间："+strTime+"."); 日期 dateTobeReturned = null;

```
 DateFormat sdf = new SimpleDateFormat(DateUtility.TIME_FORMAT);

            try {
                dateTobeReturned = sdf.parse(strTime);
            } catch (ParseException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            System.out.println("Time: " + sdf.format(dateTobeReturned));

            return dateTobeReturned;
        }
    } 
```

请询问您是否有任何疑问。希望能帮助到你。

# bit-manipulation - 基于两个数的位运算

> ID：15963674
> 
> 赞同：1
> 
> 时间：2013-04-12T05:23:32.397
> 
> 标签：bit-manipulation, mask, bits, bitmask

我今天在我的学院（塞尔维亚贝尔格莱德数学学院）接到了一个作业，上面写着：

1) 编写一个程序，对于两个给定的整数 x 和 y，将与 y 中的相应位匹配的位反转为整数 x，而其余位保持不变。

例如：

```
x  = 1001110110101
y  = 1100010100011
x' = 0011101011100 
```

我设法编写了一个程序来做到这一点，但我对我的解决方案的质量有点不安全。请，如果您有时间，请查看代码并告诉我如何改进它。

```
int x, y, bitnum;
int z = 0;
unsigned int mask;

bitnum = sizeof(int) * 8;
mask = 1 << bitnum - 1;

printf("Unesi x i y: ");
scanf("%d%d", &x, &y);

while (mask > 1) {
    if ( (((x & mask) == 0) && ((y & mask) == 0)) ||
          ((x & mask) && ((y & mask) == 0)) )
        z += 1;                                   
    z <<= 1;
    mask >>= 1;
} /* <-- THAT'S HOW STUPID PEOPLE SOLVE PROBLEMS... WITH HAMMER! */
z = y~; /* <-- THAT'S HOW SMART PEOPLE SOLVE PROBLEMS... WITH ONE LINE */ 
```

一切正常，例如 x = 423 和 y = 324，我得到 z = -344，这是正确的。此外，位打印匹配我只是想知道是否有更好的方法来做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T05:46:48.847

如果您看一下您的`x`//示例`y`，`x'`您一定会觉得这`x'`是对`y`. 确实是这样。

```
 x  y  x'
 --------
 1  1  0
 0  0  1
 1  0  1
 0  1  0 
```

剧透（如果您想查看解决方案，请将鼠标悬停在下面的块上）：

> 对于匹配的位，您反转 bit in `x`，但由于它与 bit in 相同`y`，因此与反转 bit in 相同`y`。当它们不匹配时，您会保留该位`x`，它本身已经是位的反转`y`。我希望您自己已经可以看到单行解决方案：`x' = ~y;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T06:10:54.477

//尝试下一个代码：

无符号整数掩码1，掩码2，掩码3，答案；

掩码1 = x & y; // 用 1 识别匹配的位

掩码2 = ~x & ~y; // 识别匹配的 0 位

掩码 3 = 掩码 1 | 掩码2；// 识别匹配的 0 或 1 位

答案 = x ^ m3; // 改变识别位

# php - php post到Mysql中的两个表

> ID：15963675
> 
> 赞同：0
> 
> 时间：2013-04-12T05:23:32.927
> 
> 标签：php, mysql

我正在尝试同时发布到两个表。我正在尝试将`DonorID`显示到下的另一个表中`$description`。我可以在 中写任何文本`$description`，但我需要它是动态的而不是静态的，这就是文本的内容。我有两张桌子；第一个是`accounting`，第二个是`donations`。我正在尝试更改`$description='Donation from Donor';`并让进行交易的捐赠者列在捐赠者所在的位置。任何建议将不胜感激。

这是我的代码：

```
<?php

  $dbserver = "localhost";
  $dblogin = "root";
  $dbpassword = "";
  $dbname = "";

  $date=$_POST['date'];
  $firstname=$_POST['firstname'];
  $lastname=$_POST['lastname'];
  $middleinitial=$_POST['middleinitial'];
  $organization=$_POST['organization'];
  $donorid=$_POST['donorid'];
  $paymenttype=$_POST['paymenttype'];
  $nonmon=$_POST['nonmon'];
  $event=$_POST['event'];
  $Income=$_POST['Income'];
  $account='Revenue';
  $description='Donation from Donor';
  $transactiontype='Income';
  $Expense='0.00';

  $con = mysql_connect("$dbserver","$dblogin","$dbpassword");
    if (!$con)
  {
  die('Could not connect to the mySQL server please contact technical support 
           with the following information: ' . mysql_error());
  }

  mysql_select_db("$dbname", $con);

  $sql = "INSERT INTO donations (date, firstname, middleinitial, lastname, 
            organization, donorid, paymenttype, nonmon, Income, event)  

  Values        
            ('$date','$firstname','$middleinitial','$lastname','$organization',  
             '$donorid','$paymenttype','$nonmon','$Income','$event')";

  $sql2 = "INSERT INTO accounting (date, transactiontype, account, 
              description, Income, Expense)

  VALUES ('$date','$transactiontype','$account','$description','$Income','$Expense')";

  mysql_query($sql2);

    if (!mysql_query($sql,$con))
  {

    die('Error: ' . mysql_error());

  }
  echo "1 record added";

  mysql_close($con);

  header( 'Location: http://localhost/donations.php' ) ;
  ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T05:31:00.030

As i said i would personaly use `mysqli` for new project, here a sample of you code with mysqli:

```
 $dbserver = "localhost";
       $dblogin = "root";
       $dbpassword = "";
       $dbname = "";

       $date=$_POST['date'];
       $firstname=$_POST['firstname'];
       $lastname=$_POST['lastname'];
       $middleinitial=$_POST['middleinitial'];
       $organization=$_POST['organization'];
       $donorid=$_POST['donorid'];
       $paymenttype=$_POST['paymenttype'];
       $nonmon=$_POST['nonmon'];
       $event=$_POST['event'];
        $Income=$_POST['Income'];
       $account='Revenue';
       $description='Donation from Donor';
       $transactiontype='Income';
       $Expense='0.00';

        //opening connection
        $mysqli = new mysqli($dbserver, $dblogin, $dbpassword, $dbname);
        if (mysqli_connect_errno()) 
        {
            printf("Connection failed: %s\n", mysqli_connect_error());
            exit();
        }

        $sql = "INSERT INTO `donations` (`date`, `firstname`, `middleinitial`, `lastname`, `organization`, `donorid`, `paymenttype`, `nonmon`, `Income`, `event`) Values  ('$date','$firstname','$middleinitial','$lastname','$organization', '$donorid','$paymenttype','$nonmon','$Income','$event')";

        $sql2 = "INSERT INTO `accounting` (`date`, `transactiontype`, `account`, `description`, `Income`, `Expense`) VALUES ('$date','$transactiontype','$account','$description','$Income','$Expense')";

        $query1 = $mysqli->query($sql) or die($mysqli->error.__LINE__);
        $query2 = $mysqli->query($sql2) or die($mysqli->error.__LINE__);

        //closing connection
        mysqli_close($mysqli);

        header( 'Location: http://localhost/donations.php' ) ; 
```

`UPDATE` you can add donorid simply placing both vars in the query like:

```
 $sql2 = "INSERT INTO `accounting` (`date`, `transactiontype`, `account`, `description`, `Income`, `Expense`) VALUES ('".$date."','".$transactiontype."','".$account."','".$donorid . " " . $description."','".$Income."','".$Expense."')"; 
```

this way i just separate `donorid` and `description` with a space but you can add anything you want to in plain text:

```
'".$donorid . " - " . $description."' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T05:44:09.047

Just write after insert on trigger on first table to insert data into another table.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T05:42:14.830

您必须将 $sql2 拆分为 2

第一个：-

```
 $sql2 = "INSERT INTO accounting (description) SELECT * FROM donations WHERE donorid='$donorid'" 
```

然后另一个

```
"UPDATE accounting SET date='', transactiontype='', account ='', Income='', Expense ='' WHERE description=(SELECT * FROM donations WHERE donorid='$donorid')" 
```

这将从捐赠中获取给定捐赠者的所有信息，并将其列在会计描述中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T05:25:49.187

在这之后

```
$sql = "INSERT INTO donations (date, firstname, middleinitial, lastname, 
        organization, donorid, paymenttype, nonmon, Income, event)  

        Values        
        ('$date','$firstname','$middleinitial','$lastname','$organization',  
         '$donorid','$paymenttype','$nonmon','$Income','$event')"; 
```

放

```
mysql_query($sql); 
```

请执行查询。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T05:28:29.740

我看到的是..

首先你只是执行你的`$sql2`而不是其他的`$sql`语句

另一个是在插入时声明了一些列名，它是 mysql 保留字（`date`列）

你应该有 `` 他们的反引号..

参考这个链接[MYSQL 保留字](https://dev.mysql.com/doc/refman/4.1/en/reserved-words.html)

*附加说明：您的查询也容易受到 sql 注入的影响*

[SQL注入](http://bobby-tables.com/)

[如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

# c - 你如何找到地址和数据总线的大小

> ID：15963677
> 
> 赞同：1
> 
> 时间：2013-04-12T05:23:45.773
> 
> 标签：c, cpu-architecture

最近我看到这是一个在采访中被问到的问题。

您如何在系统中找到地址和数据总线的大小。

您可以使用 sizeof 作为指针找到 sizeof 地址。

但是我们如何找到数据总线的大小呢？他们两个是一样的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T06:10:46.363

不确定你可以。我使用的第一台计算机之一是 Intel 8008，它只有一个 8 位宽的总线。但地址空间是 14 位宽。

# c - 在此示例中不理解从 (char *) 到 (int *) 的指针取消引用

> ID：15963679
> 
> 赞同：2
> 
> 时间：2013-04-12T05:23:53.697
> 
> 标签：c, pointers, types

我在一个网站上对 C 进行练习测试，我碰巧看到了这个问题。我的疑问在评论中有解释，所以请阅读它们。

```
#include<stdio.h>

int main()
{
    int arr[3] = {2, 3, 4};  // its assumed to be stored in little-endian i.e;
                             // 2 = 00000010 00000000 00000000 00000000
                             // 3 = 00000011 00000000 00000000 00000000
                             // 4 = 00000100 00000000 00000000 00000000   

    char *p;

    p = arr;

    p = (char*)((int*)(p));  

    printf("%d ", *p);   

    p = (int*)(p+1);       // This casting is expected to convert char pointer p 
                           // to an int pointer , thus value at p ,now is assumed 
                           // to be equal to 00000000 00000000 00000000 00000011 
                           // but, the output was : 0  . As ,per my assumption it
                           // should be : 2^24+2^25 = 50331648 ,Please Clarify 
                           // if my assumption is Wrong and explain Why?

    printf("%d\n", *p);

    return 0;
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T05:29:06.700

如果您要`p`转换回`int*`，那么`int`值将是：

```
00000000 00000000 00000000 00000011 
```

最后一个字节是第二个数组元素的第一个字节。通过这样做`p+1`，您将跳过第一个元素的最不重要的字节。

请记住，它`p`仍然是一个 char 指针，因此分配`int*`给它不会改变它的类型。

当您`printf`使用 char 时`p+1`，您正在打印第二个字节的值，即 0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T05:32:44.680

记住`p`仍然是一个`char`指针。所以从中`*p`获取一个`char`值。然后，当作为参数传递给可变参数函数（如）时，该`char`值被提升为。`int``printf`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T05:37:34.427

```
p = (char*)((int*)(p));
// till now the pointer p is type casted to store the variable of type character.

printf("%d, ", *p); // %d means integer value so value at first address i.e. 2 will be printed.

p = (int*)(p+1); // here p is still of type character as type casted in step 1 so p(i.e address) and plus 1 will increase only by one byte so 
```

假设整数需要 2 个字节的存储空间，则整数数组将存储在内存中

```
value 2 3 4
address 00000010 00000000 00000011 00000000 00000100 00000000 
pointer p+1 
```

so`p+1`指向未填充的位置，因为在初始化期间 2、3、4 存储在整数类型的变量（2 字节）中。

所以`p+1`会指向`00000000`。

`(int*)p+1 // p+1 is type casted again to integer`

`printf("%d", *p); // this will print 0 as output as by default integer contains 0 as value.`

# vb.net - 如何让用户在 windows phone 8 中选择相册

> ID：15963684
> 
> 赞同：0
> 
> 时间：2013-04-12T05:24:34.137
> 
> 标签：vb.net, windows-phone-8

我正在编写一个 windows phone 8 应用程序。

我希望用户选择一个相册（不是相册中的照片）。所以我会为该相册中的所有照片做一些事情。

有对象这样做吗？

我使用 vb.net 进行编码。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T05:27:06.723

我会说不。[这是](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff769543%28v=vs.105%29.aspx)Windows Phone 选择器的列表。似乎[PhotoChooserTask](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh394019%28v=vs.105%29.aspx)只能选择照片，而不是整个相册。

# jquery - 防止垃圾邮件按钮调用功能

> ID：15963687
> 
> 赞同：5
> 
> 时间：2013-04-12T05:24:47.637
> 
> 标签：jquery, html

如何防止在调用函数时发送垃圾邮件？就像用户只能在按钮上每 1 秒调用一次函数。

有办法吗？？因为我尝试了 setTimeout 但它没有工作它仍然在发送垃圾邮件顺便说一句我使用了 Jquery。

这是我的代码：

```
<button class="buttonUpdateStatus" id="idbuttonUpdateStatus" onclick="alertStatus()">Post Status</button>

 function alertStatus() {
        $('#doneStatus').hide();
        $('#loadingStatus').show();
  } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T05:27:38.510

您可以通过以下方式锁定（阻止函数逻辑执行）函数：

```
var locked = false;
function alertStatus () {
    if (!locked) {
        locked = true;
        setTimeout(unlock, 1000);
        $('#doneStatus').hide();
        $('#loadingStatus').show();
    }
}

function unlock () {
    locked = false;
} 
```

您还可以禁用该按钮，以便用户根本无法单击它：

```
function alertStatus () {
    $('#idbuttonUpdateStatus').attr('disabled', 'disabled');
    setTimeout(enable, 1000);
    $('#doneStatus').hide();
    $('#loadingStatus').show();
}

function enable () {
    $('#idbuttonUpdateStatus').removeAttr('disabled');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T05:27:34.617

您不能阻止在您的网页中调用函数。如果黑客想弄乱您页面中的代码，他们可以。

如果您想阻止特定客户端频繁调用 ajax 函数，那么您必须在服务器上使用客户端登录、速率限制等技术来执行此操作...

* * *

如果您只想阻止正常的鼠标单击在给定的时间段内多次按下按钮，那很容易。您只需在按下按钮时禁用它，然后再过一段时间再启用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T05:27:23.290

如果我是对的，这个用于 JQuery 的小插件如何去抖动：http: [//benalman.com/projects/jquery-throttle-debounce-plugin/](http://benalman.com/projects/jquery-throttle-debounce-plugin/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-19T17:33:28.143

我喜欢康斯坦丁的解决方案，但它并不能真正防止垃圾邮件，因为如果垃圾邮件持续很长时间，按钮仍会每 1000 毫秒被点击一次。根据我的需要，最好仅在用户完成垃圾邮件后才启动代码。所以我想出了这个解决方案：

```
var timerId;

function _doActionNoSpam() {
    //Reset Timeout if function is called before it ends
    if (!(timerId == null)) {
        clearTimeout(timerId);
    }
    timerId = setTimeout(function () {
        //Place code that you don't want to get spammed here
    }, 400); //400ms Timeout
    //Place code that can be spammed here (UI updates, etc)
}; 
```

我将代码放置在 Timeout 中，以便在很快再次单击按钮时可以取消它的执行。这可能很有用，例如，如果您有一个“第二天”按钮，每次单击它都会对数据库进行大量调用。在这种情况下，用户可能希望快速单击按钮将日期移至下周。只有最后一次点击对他真正有用，所以最后只调用一次数据库。

请注意，当用户仅单击一次按钮时，这将在单击和执行代码之间引入一小段延迟。因此，请确保将超时保持在较低水平（在我的示例中为 400 毫秒）

# php - 我如何计算 Javascript 中多个产品的总量？价值观在 AJAX 中出现

> ID：15963689
> 
> 赞同：5
> 
> 时间：2013-04-12T05:25:00.810
> 
> 标签：php

```
$.ajax({
    type: "POST",
    url: 'ajax_subtotal.php',
    data: listing_id=listId,
    dataType:'json',
    success: function(data)
    {
        if(data['result']=='success')
        {
            alert(data['pricing']);
        }
} 
```

`data['pricing']`给我一种产品的价格。如果产品数量发生变化，该函数将被调用。那么，如何同时计算多个产品的总价呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T11:09:18.153

```
First i store all the value in to the hidden field..

<input type="hidden" name="NumberOfProperty[]" id="NumberOfPropertyTxt<?php echo $id;?>" value=""/>

When my ajax is calling i got all the value in it..

var values=$('input[name="NumberOfProperty[]"]').map(function()
{
return this.value
}).get();
console.log(values);

In this i got my all price stored in to the array...then

var Total=0;
                        $('input[name="NumberOfProperty[]"]').each(function()
{
if($(this).val()>0)
{
Total+= parseFloat($(this).val());
}
});
$('#sub_total').val(Total);
$('#subtotal').html(Total);

I got all the value into the Total and assign it in to the sub_total id. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-13T05:14:14.840

```
First you have declare 
var total = 0
$.ajax({
 ...
 success:function(){
     if(data['result']=='success')
        {
           total += data['pricing'];
        }
   }
 });

atlast of the function alert(total); 
```

# iphone - MKMapkit 路线未对齐或不在道路中心

> ID：15963690
> 
> 赞同：1
> 
> 时间：2013-04-12T05:25:01.027
> 
> 标签：iphone, objective-c, mapkit, mkplacemark

我正在开发一个应用程序，我需要在其中使用 lat/long 在两点之间绘制一条路线。

我已经使用苹果 API 来获取折线并在解码后绘制它。

问题：

1.  路线不在路中间（附图片_1）或路线未对齐

![在此处输入图像描述](https://i.stack.imgur.com/6MyB3.png)

![在此处输入图像描述](https://i.stack.imgur.com/EQvdE.png)

下面是代码：

```
 NSString* saddr = [NSString stringWithFormat:@"%@,%@",self.lat1.text,self.long1.text];

    NSString* daddr = [NSString stringWithFormat:@"%@,%@",self.lat2.text,self.long2.text];

    NSString* apiUrlStr = [NSString stringWithFormat:@"http://maps.apple.com/maps/api/directions/json?origin=%@&destination=%@&sensor=false", saddr, daddr];

    NSURL* apiUrl = [NSURL URLWithString:apiUrlStr];

    NSError *error;
    NSString *apiResponse = [NSString stringWithContentsOfURL:apiUrl encoding:NSUTF8StringEncoding error:&error];

    NSData *responseData = [apiResponse dataUsingEncoding:NSUTF8StringEncoding];

    NSError* error1;
    NSDictionary* json = [NSJSONSerialization JSONObjectWithData:responseData
                                                         options:NSJSONReadingMutableLeaves
                                                           error:&error1];
    NSLog(@"Error: %@\n%@",[error1 localizedDescription],[error1 localizedFailureReason]);

   if([[json objectForKey:@"status"] isEqualToString:@"OK"])
    {
        NSArray *routes1 = [json objectForKey:@"routes"];
        NSDictionary *route = [routes1 lastObject];

        if (route)
        {
            NSString *overviewPolyline = [[route objectForKey: @"overview_polyline"] objectForKey:@"points"];

            routes = [self decodePolyLine:overviewPolyline];

            //NSLog(@"%@",[routes objectAtIndex:0]);

            [self updateRouteView];
            [self centerMap];
        }
    }

-(void) updateRouteView
{
 NSInteger numberOfSteps = routes.count;

CLLocationCoordinate2D coordinates[numberOfSteps];
for (NSInteger index = 0; index < numberOfSteps; index++) {
    CLLocation *location = [routes objectAtIndex:index];
    CLLocationCoordinate2D coordinate = location.coordinate;

    coordinates[index] = coordinate;
}

MKPolyline *polyLine = [MKPolyline polylineWithCoordinates:coordinates count:numberOfSteps];
[self.mapView addOverlay:polyLine];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T06:25:39.590

**decodePolyLine**完全取决于您获得的**纬度**和**经度。**因此，如果您获得适当的**纬度**和**经度**，则不会发生这种情况。**iOS6**及更高版本**苹果**的另一个原因是使用它自己的地图，所以可能是它们与**谷歌**地图的**纬度**和**经度不同。**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T23:52:18.430

这与您在其他[问题](https://stackoverflow.com/questions/15809898/mapkit-draw-route-problems/15823436?noredirect=1#comment22752218_15823436)中描述的问题相同，并且具有相同的解决方案。您正在使用来自两个不同来源的数据，并且数据不同。**

# javascript - js：如何创建一个我可以拖放文件上传的 div

> ID：15963693
> 
> 赞同：0
> 
> 时间：2013-04-12T05:25:21.190
> 
> 标签：javascript, python, html, flask

在 CSS 中有这个：

```
#drop_zone {
    border: 2px dashed #bbb;
    -moz-border-radius: 5px;
    -webkit-border-radius: 5px;
    border-radius: 5px;
    padding: 25px;
    text-align: center;
    background-color: white;
} 
```

然后`div`在我的 HTML 中：

```
<div id="drop_zone"><span style="color: darkgray">Drop files here.</span></div> 
```

我以前编写过 javascript 来拦截处理程序并在本地解析文件，但现在我正在与 Flask 后端进行交互，并且只想将文件作为上传事件传递，绕过标准形式：

```
<form action="" method=post enctype=multipart/form-data>
    <p><input type=file name=file>
        <input type=submit value=Upload>
</form> 
```

有没有一种简单的方法可以在 javascript 中做到这一点？

此外，以 Gmail 的风格做一些事情会很棒，它为您提供了一个标准的上传选项（我一直在研究 jasny 的上传小部件，但一直有一些胃灼热）然后，当您拖动文件时到 div 上，它为您提供了拖放选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:10:11.117

您在这里要求的所有内容都在我维护的跨浏览器上传库中提供：[Fine Uploader](http://fineuploader.com)。恕我直言，重新发明轮子是没有意义的。查看自述文件和演示，看看它是否适合您的需求。

# php - 当你有一个非常复杂的数据库时如何有效地管理会话

> ID：15963694
> 
> 赞同：0
> 
> 时间：2013-04-12T05:25:24.103
> 
> 标签：php, javascript, jquery

我有一个用户门户帐户。我在两个不同的选项卡中使用两个不同的用户名登录它。

当我`(ctl+f5)`在同一用户帐户的两个选项卡中进行硬刷新时，它会在两个选项卡中打开。这可以是这两个中的任何用户名。我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T05:30:20.147

Session's mechanism uses COOKIEs. COOKIEs are shared between tabs.

If you what to login with one browser session by two differnet users you can disable storing session id in cookie: [PHP session without cookies](https://stackoverflow.com/questions/3740845/php-session-without-cookies).

Also you can use feature of browsers. FireFox's Private browsing for example.

*   [PHP's sessions. Basic usage.](http://www.php.net/manual/en/session.examples.basic.php)
*   [PHP's sessions. Passing the Session ID.](http://www.php.net/manual/en/session.idpassing.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T05:29:40.467

您无法使用两个不同的用户在同一浏览器上登录同一网站。最好使用两种不同的浏览器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T05:43:07.020

一种选择是避免会话 cookie。将 PHPSESSID 变量添加到查询字符串中，或​​者将其放在路径中并使用 URL 重写或 PATH_INFO 将`/x/y.php/925235a...`等转换为`/x/y.php?PHPSESSID=925235a...`. 你实际上可以告诉 PHP 为你做第一个。

请注意，为了使其正常工作，您需要说类似

```
ini_set('session.use_cookies', false); 
```

或类似的，在您的脚本中调用`session_start()`. 那么 PHP 将不会发送会话 cookie；在大多数情况下，它只会透明地重写您页面中的 URL 以包含会话 ID，因此您可以免费获得第一个选项。

这种方法的最大缺点是它使您的用户容易受到称为“会话固定”的攻击。如果我给您一个已经有会话 ID 的 URL，然后您单击它并登录到该站点，那么您已经为我登录了我的会话，我现在可以像您一样访问该站点。解决此问题的一种方法是在有人登录时切换到新会话……但如果您的应用是购物车，那么让人们登录购买东西可能会很烦人。

第二大：如果用户点击没有会话 ID 的链接，PHP 将无法识别他们。（用户可以使用“返回”按钮返回到他们拥有会话 ID 的位置，但这在可用性方面很糟糕。）您必须确保会话 ID 出现在每个链接或 URL 中。幸运的是，PHP 会为您重写其中的大部分，但是您使用 JS 等生成的任何链接都必须自己完成。

# c++ - C++ 调用未从 BaseClass 指针继承的 DerivedClass 函数

> ID：15963695
> 
> 赞同：0
> 
> 时间：2013-04-12T05:25:33.467
> 
> 标签：c++, derived-class, base-class

您好，在此先感谢您。

这是我的问题。我有这些课程：

-class Date -class Contract -class Employee -class Node -class List

所有的类都派生自这个类 BaseObject。它有这个代码：

```
#ifndef BASEOBJECT_H
#define BASEOBJECT_H
#include<iostream>
using namespace std;

class BaseObject{
public:
virtual string toString() const=0;
virtual BaseObject* clone() const=0;
};

ostream& operator << (ostream&, objetoBase&);

#endif  /* BASEOBJECT_H */ 
```

这就是它的全部。我正在跳过运算符 << 实现。现在，我将解释这个想法

Date 类只有基本属性（int day、int month、int year）。类 Contract 有两个类 Date 指针，因此 Contract 通过组合与 Date 相关。Employee 类与一个用指针处理的 Contract 有关联。

类 Node 有两个属性：第一个是指向包含名为 Data 的 ObjectBase 实例的 Node 的指针，第二个是指向另一个名为 nextNode 的 Node 实例的指针。

类 List 处理简单列表中的节点指针。

我的问题：当我在列表中查找 Employee 并使用 Find() 函数访问 Node 中包含的数据时，它现在只显示在 BaseObject 中创建的方法！我该如何解决这个问题？我把代码留给你。第一个和当前是节点。

```
BaseObject * List :: find (string id) {
        if (first == NULL)
            return NULL;
        else
        if (first-> getData () -> == getId() id) //This line is underlined in compiler
            return first-> getData ();
        else {
            current = first;
        if (current-> getNextNode () == NULL)
            return NULL;
        else {
        while (current-> getNextNode () -> getNextNode ()! = NULL && Current-> getNextNode () -> getData () -> getId ()! = id) {
            current = current-> getNextNode ();}
        if (current-> getNextNode () -> getData () -> getId () == id)
            return current-> getNextNode () -> getData ();
        else
            return NULL;
        }
    }
} 
```

带下划线的代码会导致错误。当我使用编译器并加上“->”符号时，它只显示 BaseObject 方法 Clone() 和 toString()，我想使用 Employees 方法，尽管它现在是一个 BaseObject 指针，其中包含一个 Employee 实例。

如果我表达得很好，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T06:10:59.657

您可以稍微更改您的实现并创建一个 Comparable 接口，并且您的所有 BaseObject 都是可比较的。

或者你可以在你的 find 方法中传递一个“比较器”函数。在此函数中，您需要进行一些强制转换以验证您的实例是否为 Employer 并比较 de Id。

我希望这会有所帮助。

佩德罗

# python - django 奇怪的 url 反应

> ID：15963697
> 
> 赞同：0
> 
> 时间：2013-04-12T05:25:43.457
> 
> 标签：python, html, django, django-urls

我有这个奇怪的 url 反应。

这是我的意见.py

```
def user_edit(request):
  user = User.objects.get(id=request.GET.get('userid'))
  return render_to_response("editprofile.html",{'user':user},context_instance=RequestContext(request)) 
```

这是我的表格。

```
<form action="/update_userprofile/?userid={{user.id}}" ... 
```

我的网址.py

```
url(r'^update_userprofile/','home.views.update_userprofile') 
```

但是一旦我发送表格，我就会收到错误消息：

```
 Internal Server Error: /update_userprofile/on 
```

那是`on`从哪里来的？我不明白这里发生了什么。

多谢 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T05:57:16.757

好的，我试试你的代码。您没有提出您使用什么方法的问题。所以我尝试了 GET 和 output `User matching query does not exist`。我尝试了 POST，它现在可以工作了。

```
<form action="/update_userprofile/?userid={{user.id}}" method="POST"> 
```

即使您`user id`在 url 中定义了，您仍然可以从方法 POST 中获取值。

更新：

您的代码很好，只需将方法更改为`method=POST`您的表单

# c++ - 带有旧 Qt 的新 WebKit。值得尝试吗？

> ID：15963706
> 
> 赞同：0
> 
> 时间：2013-04-12T05:26:10.340
> 
> 标签：c++, qt, webkit

我有一个使用 Qt 3.2.3 构建的项目。这是一段有点过时的代码，但除了它的嵌入式浏览器之外它工作正常。这东西很老了。所以我想采用新的夜间构建的 WebKit 并尝试以某种方式采用它。问题是——这甚至可能吗？我是 Qt 的新手，但最近对 WebKit 有一点经验。将它链接到 C# 项目非常容易，但我真的不了解 Qt 和 C++。

也许有一些更好的解决方案可以在不触及整个 Qt 的情况下更新 Qt 浏览器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T07:13:23.180

老实说，我认为将应用程序从 3.* 移植到最新的 4/5 然后将最新的 WebKit 编译为 3.* 更容易。有一些核心差异很难解决。虽然这样的实验是可能的，但我只是不确定它是否值得。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T17:21:37.250

SVN 的 WebKit 甚至不会在几个月前针对 Qt 构建，所以我无法想象它会很容易地针对 Qt 3 构建。我强烈建议只移植到当前版本的 Qt 和 QtWebKit。

# python - Python 显示从 1 到 100 的所有素数

> ID：15963707
> 
> 赞同：5
> 
> 时间：2013-04-12T05:26:25.317
> 
> 标签：python

我正在尝试使用布尔函数打印从 1 到 100 的所有素数。

下面是我正在工作的代码。

```
for n in range(1,101):
status = True
if n < 2:
    status = False
else:
    for i in range(2,n):
        if n % i == 0:
            status = False

    if status:
        print(n, '', sep=',', end='') 
```

但是当我将代码放入函数并运行模块时，外壳上没有任何打印内容。我做错了什么？

```
is_prime():
    for n in range(1,101):
        status = True
        if n < 2:
            status = False
        else:
            for i in range(2,n):
                if n % i == 0:
                    status = False
        return status

if is_prime():    
    print(n, '', sep=',', end='') 
```

下面是程序的输出。如何防止打印最后一个逗号？
`2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T06:03:15.283

尝试这个

```
def is_prime(n):
    status = True
    if n < 2:
        status = False
    else:
        for i in range(2,n):
            if n % i == 0:
                status = False
    return status

for n in range(1,101):
    if is_prime(n):
        if n==97:
            print n
        else:
            print n,",", 
```

`output`是
`2 , 3 , 5 , 7 , 11 , 13 , 17 , 19 , 23 , 29 , 31 , 37 , 41 , 43 , 47 , 53 , 59 , 61 , 67 , 71 , 73 , 79 , 83 , 89 , 97`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-29T04:03:46.177

怎么样，它完成了同样的事情，而是要求用户输入：

```
num1 = input("Input a number: ")
num2 = input("Input another number: ")

for x in range(num1,num2):
    prime = True
    for i in range(2,x):
        if (x%i==0):
            prime = False
    if prime == True:
       print x

print "Done......" 
```

如果您只想解决自己输入的数字，请取出这部分：

```
num1 = input("Input a number: ")
num2 = input("Input another number: ") 
```

并将范围从 num1,num2 更改为 1 和 100，例如：

```
for x in range(1,100): 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-08-23T16:53:49.923

我认为您最好的解决方案是附加一个数组，它可以解决逗号问题并且更快/更优化。然后，如果需要，您可以删除这些值，将它们存储到文件中，你有什么。祝你好运！

```
def get_primes(start, end):
    out = list()
    if start <= 1:
        start = 2

    sieve = [True] * (end + 1)
    for p in range(start, end + 1):
        if (sieve[p]):
            out.append(p)
            for i in range(p, end + 1, p):
                sieve[i] = False
    return out

print(get_primes(1, 100)) 
```

输出：

```
[2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71, 73, 79, 83, 89, 97] 
```

请参阅我的评论和其他关于堆栈溢出的评论 #11619942 “[在 python 中打印素数系列](https://stackoverflow.com/questions/11619942)”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-10-15T15:37:09.280

```
n=int(input())
for i in range(1,int(n)):
    for j in range(2,(i+1)):
        if i%j==0:
            if i==j:
                print(i)
            break 
```

这是捷径...

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-06-02T10:24:32.790

非常简单的方法如下：

```
def prime(n):
    p = True
    for i in range(2,n):
        if (n%i == 0):
            p = False
    return p

for j in range(2,201):
    if prime(j):
        print (j) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-08-01T08:37:29.653

# 显示素数范围的简单方法#

```
 # Program to display prime number till n nubers

def prime(number):
    for num in range(2,number):
        status = True
        for i in range(2,num):
            if num % i == 0:
                status = False
        if status:
            print(num)

prime(101)

print "Program Ends here" 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-10-26T05:08:32.377

几种不同的方法来做到这一点

```
primes = [x for x in range(2,100) if(all(x % j for j in range(2, x)))]

primes = []
for x in range(2, 101):
    if(False not in (x % j for j in range(2, x))):
        primes.append(x)

primes = []
for x in range(2, 101):
    flag = True
    for j in range(2, x):
        if(not x % j):
            flag = False
    if(flag):
        primes.append(x) 
```

打印（素数）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-01-04T05:20:56.447

这是一个仅根据质数检查数字的示例，因为所有非质数都可以被质数整除（[链接](https://math.stackexchange.com/questions/911655/why-are-all-non-prime-numbers-divisible-by-a-prime-number)到数学堆栈交换中的相关问题）

```
prime_nums = []

for num in range(2,101):
    isPrime = True
    for prime in prime_nums:
        isPrime = not (num % prime == 0)
        if prime * 2 >= num or not isPrime:
            break
    if isPrime:
        prime_nums.append(num)
print(prime_nums) 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2019-07-31T18:07:03.467

```
def ex1():
    count = 3

    while count < 101:
        isPrime = True

        for i in range(2, int(math.sqrt(count))+1):
            if count % i == 0:
                isPrime = False
        if isPrime:
            print(count, end=' ')
        count += 1
ex1() 
```

# javascript - 从 url 中删除 # 及其值

> ID：15963710
> 
> 赞同：0
> 
> 时间：2013-04-12T05:26:35.630
> 
> 标签：javascript, jquery

我在这里看到了从 url 中删除哈希值的帖子......但是如何删除值和 # 本身。

例如，如果一个 url 是

```
mysite.com 
```

当用户浏览单页应用程序时，url 可能会更改为

```
mysite.com#mytest 
```

所以当他们重新加载它时，我只想让它显示

```
mysite.com and  not mysite.com#mytest 
```

这两个只是删除值

```
location.hash = 'home'; 

window.location.replace("#"); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T05:33:56.263

```
var href = window.location.href;
var index = href.indexOf('#');
if ( index > 0) {
  window.location = href.substring(0, index);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T05:29:41.030

我认为不重新加载页面就不可能删除哈希。

# google-app-engine - 除超级管理员外的其他管理员可以访问配置 api

> ID：15963718
> 
> 赞同：0
> 
> 时间：2013-04-12T05:27:10.047
> 
> 标签：google-app-engine, google-provisioning-api

我正在开发一个应用程序。我在此应用程序中使用谷歌配置 API。在文档中提到管理员帐户可以访问配置应用程序。谷歌应用程序中有各种类型的管理员帐户，例如 1.超级管理员

2.群组管理员

3.用户管理admin

4.帮助台管理员

5.服务管理员

在这些所有配置文件中，我们可以在其中启用配置 api 的帐户。请回复

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T14:04:46.057

您需要创建一个自定义角色并从 Provisioning API 部分为其分配权限（位于可能权限列表的最底部。被授予在控制面板中执行操作的权限的委派用户将无法执行相同的操作通过 API，除非明确为其角色分配 Provisioning API 权限。

有关详细信息，请参阅[此帮助文章。](https://support.google.com/a/bin/answer.py?hl=en&answer=2406043)

周杰伦

# iphone - NSString 变量不是 NSstring

> ID：15963725
> 
> 赞同：1
> 
> 时间：2013-04-12T05:27:39.413
> 
> 标签：iphone, ios, xcode, nsstring

我对 NSString 变量有疑问。

.h 文件

```
 NSString *strDeleteFilePath;
    @property (nonatomic,retain) NSString* strDeleteFilePath; 
```

.m 文件

```
 @synthesize strDeleteFilePath; 
```

//之后当删除按钮点击

```
 -(IBAction)deleteButton:(id)sender {
        UIButton *bt=(UIButton *)sender;
        strDeleteFilePath=[FunctionManager getDocumentDirectoryPath:@"MyPhotos"];
        strDeleteFilePath=[NSString stringWithFormat:@"%@/%@",strDeleteFilePath,[arrSaveImage objectAtIndex:bt.tag]];
        NSLog(@"strDeletePath=%@",strDeleteFilePath);

        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"" message:@"Are you sure you want to delete this photo" delegate:self cancelButtonTitle:@"Delete" otherButtonTitles:@"Cancel", nil];
        [alert show];
        [alert release];
    } 
```

nslog 在字符串中打印正确的路径，如下所示：

> strDeletePath=/Users/Samir/Library/Application Support/iPhone Simulator/6.0/Applications/A72B7488-ABCB-48EC-91D0-CEE87FA121FE/Documents/MyPhotos/Dt20130411164806.png

当单击警报视图中的删除按钮时...

```
 - (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex{
       if (buttonIndex == 0){
           NSFileManager *fileManager = [NSFileManager defaultManager];
           NSError *error = nil;
           if(![fileManager removeItemAtPath:strDeleteFilePath error:&error]) {
               NSLog(@"Delete failed:%@", error);
           } else {
               NSLog(@"image removed: %@", strDeleteFilePath);
           }
           [self setScrollviewItem];
       }
   } 
```

它在线崩溃 if(![fileManager removeItemAtPath:strDeleteFilePath error:&error]) 并给出以下错误 ExE_BAD..ACCESS...

![错误](https://i.stack.imgur.com/docfc.png) ![ExE_Bad.....](https://i.stack.imgur.com/TtGlo.png)

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T05:32:23.090

使用`self. strDeleteFilePath`而不是`strDeleteFilePath`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T05:32:32.620

试试这个

```
-(IBAction)deleteButton:(id)sender {
    UIButton *bt=(UIButton *)sender;
    strDeleteFilePath=[FunctionManager getDocumentDirectoryPath:@"MyPhotos"];
    strDeleteFilePath=[[NSString alloc] initWithFormat:@"%@/%@",strDeleteFilePath,[arrSaveImage objectAtIndex:bt.tag]]; //change is here
    NSLog(@"strDeletePath=%@",strDeleteFilePath);

    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"" message:@"Are you sure you want to delete this photo" delegate:self cancelButtonTitle:@"Delete" otherButtonTitles:@"Cancel", nil];
    [alert show];
    [alert release];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T06:06:15.643

替换这个：

```
 if(![fileManager removeItemAtPath:strDeleteFilePath error:&error]) {
           NSLog(@"Delete failed:%@", error);
       } else {
           NSLog(@"image removed: %@", strDeleteFilePath);
       } 
```

和：

```
if([fileManager fileExistsAtPath: strDeleteFilePath])
{
   [fileManager removeItemAtPath: strDeleteFilePath error: nil];
}
else{
   NSLog(@"File not found");
} 
```

# asp.net-mvc-4 - 获取 'Context 是不可构造的。添加默认构造函数或提供 IDbContextFactory 的实现。”

> ID：15963726
> 
> 赞同：16
> 
> 时间：2013-04-12T05:27:40.777
> 
> 标签：asp.net-mvc-4, ef-code-first, ninject, entity-framework-5, entity-framework-migrations

当我尝试使用代码优先迁移时出现此错误。

我的上下文有一个带有连接名称的构造函数。

```
public class VeraContext : DbContext, IDbContext
{
    public VeraContext(string NameOrConnectionStringName = "VeraDB")
        : base(NameOrConnectionStringName)
    {
    }

    public IDbSet<User> Users { get; set; }
    public IDbSet<Product> Products { get; set; }
    public IDbSet<IntCat> IntCats { get; set; }
} 
```

此连接名称在项目运行时使用 ninject 注入，我还在上面的代码中将其指定为默认值，但这没有帮助。

```
kernel.Bind<IDbContext>()
    .To<VeraContext>()
    .WithConstructorArgument("NameOrConnectionStringName", "VeraDB"); 
```

当我尝试使用“Enable-Migrations”添加迁移时抛出错误：

> 目标上下文“VeraData.EF.Infrastructure.VeraContext”是不可构造的。添加默认构造函数或提供 IDbContextFactory 的实现。

如果我从中删除构造函数，`VeraContext`它将起作用，但会创建另一个`VeraData.EF.Infrastructure.VeraContext`以其名称为名称的数据库。

我认为`ninject`仅在项目运行时传递连接字符串，而不是在我使用代码优先迁移时传递。无论如何，在使用代码优先迁移时，我可以为连接名称注入/提供默认值吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-12T17:14:45.927

本质上你需要一个默认的ctor（这是错误的）——但仅仅实现它会导致问题。

您必须实施`IDbContextFactory`以使结果保持一致（或者您从代码的迁移将不起作用等）。

> 迁移实际上调用您的默认构造函数来建立连接。所以你是其他`ctor`人并不重要。

这是基本的工厂...

```
public class MyContextFactory : IDbContextFactory<MyContext>
{
    public MyContext Create()
    {
        return new MyDBContext("YourConnectionName");
    }
} 
```

您应该将其与注入相结合，以根据需要注入和构造您的 DbContext。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-01-01T12:20:32.127

如果您不想花时间查看 IDbContextFactory 选项，并且为了让事情正常工作，请创建一个默认构造函数并在调用基本 DbContext 时硬编码连接字符串的名称：

```
public class CustomContext : DbContext
{
    public CustomContext() :base("name=Entities") {} 
} 
```

SRC： http: [//www.appetere.com/Blogs/SteveM/April-2012/Entity-Framework-Code-First-Migrations](http://www.appetere.com/Blogs/SteveM/April-2012/Entity-Framework-Code-First-Migrations)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-05T15:47:06.693

为了补充@nccsbim071 的答案，我必须再添加一件事......这个选项不喜欢带有默认参数的构造函数......例如：

```
public MyContext(bool paramABC = false) : base("name=Entities") {...} 
```

相反，您必须创建一个非参数（默认）构造函数和像旧时尚方式一样的参数构造函数。

```
public MyContext() :base("name=Entities") {...} 
public MyContext(bool paramABC) : this() {...} 
```

笔记：

*   `Entities`在这种情况下表示连接字符串名称...按照惯例，上下文的名称与连接字符串名称`MyContext`相同，并且由于与 不同`Entities`，因此必须手动指定它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-28T07:17:54.457

在我的情况下，我想使用默认连接工厂，而不是明确提供一个。在 EF6 内部的某个地方，它会尝试查找工厂，但它会失败并显示此异常消息。单步执行 EF6 代码，我发现 Glimpse.Ado 正在包装连接工厂，这导致[查找](https://github.com/dotnet/ef6/blob/02104044fae2aca5d3a1f50f55f4af940a3c64a8/src/EntityFramework/Utilities/DbProviderFactoryExtensions.cs#L28)无法找到匹配项。

# c# - 忽略 Jquery AJAX 调用 URL 的大小写敏感性

> ID：15963729
> 
> 赞同：1
> 
> 时间：2013-04-12T05:27:53.993
> 
> 标签：c#, javascript, jquery, asp.net, web-services

目前，我正在处理 Asp.net 3.5 项目，我正在通过 ajax 调用调用 Web 服务

```
$.ajax({
            type: "Post",
            contentType: "application/json; charset=utf-8",
            url: "WebService/DefaultPage.asmx/GetTours",
            dataType: "json",
            success: function (data) {
                Home.ReadTours(data);
            },
            error: function (result) {
                $('.load-3').hide();
            }
        }); 
```

工作正常。

但是当我将 URL 更改为小写时。

```
url: "webservice/defaultpage.asmx/gettours", 
```

它不工作。

这个 Jquery Ajax URL 是否区分大小写，是否有任何我可以忽略 ajax URL 的大小写敏感性。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T05:33:27.473

处理 ajax 请求的服务器需要配置为不区分大小写。您无法在客户端中更改服务器的区分大小写（除了提供服务器期望的大小写）。

# css - 想要更改 Magento go 标题部分

> ID：15963731
> 
> 赞同：0
> 
> 时间：2013-04-12T05:28:20.213
> 
> 标签：css, xml, magento, php

目前我正在研究magento go。它不只是像其他 magento CMS。它是一个在线 CMS，我可以在其中管理我的商店。我需要更改主页设计。我试图编辑 CSS 文件，但它没有给我想要的输出。我想改变整个页面设计并想添加我的。基本上我没有办法编辑标题部分。我知道内置的标题编辑部分，但我想更改整个标题部分。我可以在 magento go 中执行此操作吗？我有 html 和 css 文件，但无法将文件集成到 magento go 中。有什么解决办法吗？magento 中是否有任何地方可以编辑 phtml 文件？我非常需要它。请帮忙。

谢谢 等待您的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-07T05:11:15.803

好的，这是我刚刚找到的一种新方法。此方法允许您将图片放在标题部分。顺便说一句，如果您使用背景颜色（就像我在下面/上面显示的那样），我建议您在图片上使用透明背景。

1.  上传你的照片。转到设计 > 主题编辑器 > CSS 编辑器。**单击Image Assets**旁边的 Manage 按钮。单击浏览，然后在标题中选择您想要的图片。然后点击上传。

2.  为您的 Header 插入 CSS 规则。标题部分通常命名为**header-container**。所以我们需要为此编写一个css代码。类型：

    .header-container {背景：url() ;}

您可以在 CSS 的背景属性中添加更多选项。有关 CSS 的更多信息，请尝试来自 w3schools.com的[CSS 背景属性](http://www.w3schools.com/cssref/css3_pr_background.asp)

1.  将您的图像放在您的 CSS 规则中。这一次，我们需要将“图像代码”放入您的 CSS 规则中。将光标放在括号“()”之间，然后单击**图像资产**中的管理按钮，选择您上传的图像（或要放在标题中的图像），然后单击插入文件

再次。我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-07T04:05:18.307

我不确定这是否有效。您提供的视频是针对 magento 社区版本的，您可以在其中实际访问您的虚拟主机的 FTP。Magento go 是“基于服务器的”，您无法访问 ftp 文件。我遇到了和pavan一样的问题。

但是我在更改标题部分的某些属性方面取得了一定程度的成功……嗯，实际上是 Header-container。

在您的 CSS 编辑器中，键入以下代码：

`.header-container { background: #FF6666`}

这会将标题的颜色更改为玫瑰红色。将背景值更改为所需的颜色。

对于其他元素，我仍在寻找它们的类名，这是我在标题中所做的一些更改

```
.top-cart .block-title strong { 
display:block; 
padding-right:10px; 
background: url(../images/bkg_header-panel.gif) 100% -71px no-repeat ; 
font-size:10px; 
color:#565051; 
font-weight:bold; 
text-decoration:none; } 
```

这改变了我的购物车（#）文本的颜色。

我知道这并不多，但我希望它有所帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T17:19:10.637

有一个很棒的视频系列叫做 Magento 社区教程，介绍如何自定义 Magento 的各个方面。下方链接：

[http://www.youtube.com/playlist?list=PL3B0BAAF482B16EAB](http://www.youtube.com/playlist?list=PL3B0BAAF482B16EAB)

但是，由于我只有社区版，我不确定您是否可以访问 Magento 的服务器，以便 Magento Go 自定义到您可以使用社区版的级别。

您可以访问 Magento Go 的所有文件和文件夹吗？例如，您能否访问服务器的根文件夹并看到如下内容：

![在此处输入图像描述](https://i.stack.imgur.com/2HZhu.jpg)

如果可以，那么视频教程系列将回答您的所有问题。

# javascript - 使用下划线随机选择并从集合中删除

> ID：15963736
> 
> 赞同：3
> 
> 时间：2013-04-12T05:28:58.890
> 
> 标签：javascript, arrays, backbone.js, collections, underscore.js

我收集了**20 个结果（对象）**，单击按钮时我想做的是：

a) 从这个集合/数组中选择一个随机对象

b）当再次按下按钮时 - 我不希望重新拾取该对象，直到集合用尽（即直到显示 20 个项目）

我想只是拼接出该集合的索引，但我希望使用 Underscore.js 以更清洁的方式

例子：

`var data = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11...]`

`var getRand = _.random(0, data.length);`

==> 3

下次我按下按钮时，我不希望结果**“3”**重新出现，因为它已被使用

我希望这是有道理的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T06:58:48.700

```
var data = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11];

// cache indexes
var cache = _.map(new Array(data.length + 1).join(), function (item, index) {
  return index;
});

// get random from cached array
var rand = _.random(0, cache.length);

// remove random index from cache
cache.splice(rand, 1);

console.log(rand, cache) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T11:38:17.467

```
var data = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11];
var picked = [];

$("#link").click(function() {
   if(data.length == 0) return;
   var pick = data.splice(_.random(0,data.length),1);
   picked.push(pick);
   $("#pick").html(pick);
   $("#data").html(data.join(","));
   $("#picked").html(picked.join(","));
}); 
```

[http://jsfiddle.net/Z3vjk/](http://jsfiddle.net/Z3vjk/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T05:51:46.247

您可以创建一个数组来存储您使用的值并检查所有新的随机数以查看它们是否出现。尽管随机数生成器试图猜测单个数字，但这会在数组末尾附近变得混乱。

如果是我，我会按照您的暗示进行操作，并在使用时取出元素并将它们放入临时数组中。使用所有元素后，将临时数组重新分配给原始变量名称。

# eclipse - 在不停止和启动的情况下将 Eclipse Spring MVC 项目部署到 Tomcat

> ID：15963739
> 
> 赞同：0
> 
> 时间：2013-04-12T05:29:19.440
> 
> 标签：eclipse, spring, tomcat

我继承了一个由 3 个不同的不同项目组成的 Spring 项目。有一系列 ANT 文件用于构建项目并将其部署到 Tomcat。有一个名为“build”的 ANT 目标可以执行此操作。

问题是当tomcat服务器运行时，我无法部署——相反，我必须停止服务器，部署然后重新启动服务器。

我注意到当我通过 STS 中的 MVC 模板创建 spring 项目时，“VMware vFabric”服务器似乎支持我想要的。

有谁知道我如何为使用 ANT 构建的现有 Spring MVC 项目实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T06:00:23.740

你得到什么错误？

您的 ANT 脚本也像 Tomcat 文档所建议的那样吗？这对我有用，没有任何问题。

[http://wiki.apache.org/tomcat/AntDeploy](http://wiki.apache.org/tomcat/AntDeploy)

# c# - 从 .NET 应用程序中销毁 COM 对象

> ID：15963745
> 
> 赞同：0
> 
> 时间：2013-04-12T05:29:33.990
> 
> 标签：c#, c++, .net, com

我有一个旧的 COM 组件，我试图从 .NET Windows 窗体应用程序中使用它。我曾经`aximp.exe`为非托管 COM 组件创建一个 .NET 包装器。然后我使用`ISupportInitialize`接口`BeginInit`和`EndInit`创建 COM 类的实例。这工作正常。但是当我尝试使用`Marshal.ReleaseComObject`非托管 C++ COM 对象的析构函数来销毁对象时，不会调用它。我也尝试过`Marshal.FinalReleaseComObject`，但仍然没有调用析构函数。谁能告诉我正确的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T06:03:02.443

包装器将实现`IDispose`.

WinForm 类通常具有一个组件集合和一个处理组件的 Dispose 方法。您可以将对象添加到组件集合中，它将与表单一起处理。（您甚至可以让表单设计器为您生成所有代码。）

如果您想更早地执行此操作，只需调用`Dispose`对象（例如在`finally`块中或通过`using`语句隐式调用）。

# c - 计数排序算法在 C 中不起作用

> ID：15963746
> 
> 赞同：-2
> 
> 时间：2013-04-12T05:29:38.963
> 
> 标签：c, arrays, sorting, counting

我的任务是在 C 中创建一个计数排序算法。编译器没有任何理由不编写程序，但它不起作用。虽然调试调试器将第二个`for`包含显示为错误，所以我问哪里是错误，因为我看不到它。

```
const int k = 77; 
const int n = 1000;

int T[n]; 
int Tp[n]; 
int TPom[k]; 

int i; 

  for(i = 0 ; i < k ; i++)
    TPom[i] = 0;                

  for(i = 0 ; i < k ; i++)
    TPom[T[i]]= TPom[T[i]]+1;               

  for(i = 1 ; i < k ; ++i)
    TPom[i] += TPom[i-1];       

  for(i = n-1 ; i >= 0 ; --i)
     Tp[--TPom[T[i]]] = T[i]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T05:35:20.267

有几个问题，所以我会给你一些提示：

*   第二个循环是错误的。提示：包含多少元素`T`？

*   第三个循环没有错，但没有必要。*我个人发现没有*这个循环更容易考虑算法（你可能不同意）。

*   最后的循环是错误的。`0`您想通过`k-1`填充来迭代值`Tp`。循环甚至不应该引用`T`.

# c# - 使用正则表达式获取第二个给定字符之前的所有内容

> ID：15963749
> 
> 赞同：0
> 
> 时间：2013-04-12T05:29:42.533
> 
> 标签：c#, regex

我有一个字符串列表，例如

```
[ABC].[XXX].sdfnwoaenwaf
[ABC].[XXX].sdfnwoaenwaf
[ABC].[XX1].sdfnwoaenwaf
[ABC].[XX1].sdfnwoaenwaf
[AB1].[XX3].sdfnwoaenwaf
[AB2].[XX1].sdfnwoaenwaf 
```

我怎样才能在第二个点之前得到所有东西？例如`[ABC].[XXX]`第一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T05:39:11.337

`(.*)\.`是您需要的正则表达式。您可以在[http://regexhero.net/tester/上进行测试](http://regexhero.net/tester/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T05:45:31.753

您可以尝试正则表达式或使用`LastIndexOf`String 类的`Split`方法或 String 类的方法。

*正则表达式*

```
var toMatch = "[ABC].[XXX].sdfnwoaenwaf";

var pattern = new Regex("(.*?\\..*?)(:?\\.)");

var beforeSecondDot = pattern.Match(toMatch);

var stringBeforeSecondDot = beforeSecondDot.Groups[1].Value; 
```

*String.LastIndexOf*

```
var toMatch = "[ABC].[XXX].sdfnwoaenwaf";

var indexOfLastDot = toMatch.LastIndexOf('.');

var beforeSecondDot = toMatch.Substring(0, indexOfLastDot); 
```

*字符串拆分*

```
var toMatch = "[ABC].[XXX].sdfnwoaenwaf";

var parts = toMatch.Split('.');

var beforeSecondDot = String.Join(".", parts.Take(2)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T05:49:03.500

```
string x = "[AB2].[XX1].sdfnwoaenwaf";

Regex regex = new Regex("([^.]+\\.[^.]+)\\.");
Match match = regex.Match(x);
if (match.Success)
{
    Console.WriteLine(match.Groups[1].Value);
} 
```

输出：

```
[AB2].[XX1] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T05:54:40.010

```
List<string> finalStrings = new List<string>();
List<string> strings = new List<string>();
strings.Add("[ABC].[XXX].sdfnwoaenwaf");
strings.Add("[ABC].[XXX].sdfnwoaenwaf");
strings.Add("[ABC].[XX1].sdfnwoaenwaf");
strings.Add("[ABC].[XX1].sdfnwoaenwaf");
strings.Add("[ABC].[XX3].sdfnwoaenwaf");
strings.Add("[ABC].[XX1].sdfnwoaenwaf");

foreach (var item in strings)
{
     Regex rex = new Regex("(.*)\\.");
     string[] y = rex.Split(item);
     finalStrings.Add(y[1]);
} 
```

# codeigniter - 代码点火器数据映射器加入get（）

> ID：15963750
> 
> 赞同：0
> 
> 时间：2013-04-12T05:29:42.553
> 
> 标签：codeigniter, datamapper

我在我的代码点火器模型中使用这个连接

```
 $this->db->select('e.name, p.projects');
      $this->db->from('example as e');
      $this->db->join('procure as p', e.id = p.id');
      $this->db->where('e.cityid', '1');
      $this->db->where('e.status', '0'); 
```

我没有单独的连接表。这是我的数据映射器，它没有提供任何输出。

我有两个表，我想对它们编写一个连接查询。我的控制器中有这个。

```
 $example = new Example();
      $example ->where_join_field('procure', FALSE); 
```

**更新**

你能告诉我使用数据映射器连接三个表的片段吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T18:52:27.740

通常，您不会对 DMZ 模型进行手动连接（尽管如此，生成的 sql 仍将使用连接）。您正在寻找的东西是[关系](http://datamapper.wanwizard.eu/pages/relationtypes.html)。

您必须设置模型的关系，使用`$has_one`和`$has_many`属性，保持命名约定，为多对多创建必要的表等等。[您可以在此处](http://datamapper.wanwizard.eu/pages/settingrelations.html)和[此处](http://datamapper.wanwizard.eu/pages/advancedrelations.html)的文档中阅读这些内容。

设置好模型后，您可以在之前使用过连接的地方使用`where_related`和`include_related`方法：

1.  **where_related**用于当您想要过滤您正在查询的某些相关模型的字段值的模型时。因此，如果您的班级有相关`project`设置`Example`，则可以编写`->where_related('project', 'procure', false)`；它将`Example`根据相关项目的过程字段过滤返回的实例。所以基本上它与您放入`where`SQL 子句的条件相同。

2.  **include_related**用于当您想要包含来自相关模型甚至整个实例的字段时。因此，如果您`->include_related('project', 'projects')`在查询`Example`实例时编写，您最终会`project_projects`在返回的实例上获得一个属性。有许多选项可以控制如何创建这些属性。基本上，这些是您应该放入`select`SQL 子句的字段。

为每个命名关系和许多其他选项创建了魔术方法，我建议您参考文档的[Get (Advanced)](http://datamapper.wanwizard.eu/pages/getadvanced.html)页面以开始并自由探索[描述](http://datamapper.wanwizard.eu/pages/save.html#Relationship)[关系的](http://datamapper.wanwizard.eu/pages/delete.html#Relationship)[其他](http://datamapper.wanwizard.eu/pages/accessingrelations.html) [页面](http://datamapper.wanwizard.eu/pages/joinfields.html) 。

# php - 有效电子邮件地址上的 Swift_RfcComplianceException，适用于 Windows 而不是 Ubuntu

> ID：15963755
> 
> 赞同：3
> 
> 时间：2013-04-12T05:30:08.363
> 
> 标签：php, exception, symfony, swiftmailer, rfc2822

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2016-03-31T08:32:10.390

我向您发送 swiftmailer 的示例：

## 参数.yml

目标：[email1，email2，email3]

## 服务：

您的服务名称：

```
 class: your path

    arguments: ["%destinatarios%"] 
```

## 服务等级：

受保护的$destinatarios；

```
public function __construct($destinatarios)
{
    $this->destinatarios = $destinatarios;
}

->setCc($this->destinatarios) 
```

# php - 如何在php中设置当前页面“活动”

> ID：15963757
> 
> 赞同：17
> 
> 时间：2013-04-12T05:30:09.663
> 
> 标签：php, css

嗨，我的网站上的每个页面都有一个菜单，我想把它放在它自己的 menu.php 文件中，但我不确定如何为我所在的任何页面设置**class="active"**。这是我的代码：请帮助我

**菜单.php：**

```
<li class=" has-sub">
    <a class="" href="javascript:;"><i class=" icon-time"></i> Zeiten<span class="arrow"></span></a>
    <ul class="sub">
       <li><a class="" href="offnungszeiten.php">Öffnungszeiten</a></li>
       <li><a class="" href="sauna.php">Sauna</a></li>
       <li><a class="" href="frauensauna.php">Frauensauna</a></li>
       <li class=""><a class="" href="custom.php">Beauty Lounge</a></li>
       <li><a class="" href="feiertage.php">Feiertage</a></li>
    </ul>
</li> 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2014-11-14T20:44:54.737

此方法使用 php 获取当前页面，在这种情况下将传递一个单词 active 并将其放在 class 参数中以将页面设置为活动状态。

```
<?php
function active($currect_page){
  $url_array =  explode('/', $_SERVER['REQUEST_URI']) ;
  $url = end($url_array);  
  if($currect_page == $url){
      echo 'active'; //class name in css 
  } 
}
?>
<ul>
    <li><a class="<?php active('page1.php');?>" href="http://localhost/page1.php">page1</a></li>
    <li><a class="<?php active('page2.php');?>" href="http://localhost/page2.php">page2</a></li>
    <li><a class="<?php active('page3.php');?>" href="http://localhost/page3.php">page3</a></li>
    <li><a class="<?php active('page4.php');?>" href="http://localhost/page4.php">page4</a></li>
</ul> 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-04-12T05:43:26.930

如果您在脚本中构建一个页面数组并将其与当前活动页面一起传递给视图文件会更容易：

```
//index.php or controller

$pages = array();
$pages["offnungszeiten.php"] = "Öffnungszeiten";
$pages["sauna.php"] = "Sauna";
$pages["frauensauna.php"] = "Frauensauna";
$pages["custom.php"] = "Beauty Lounge";
$pages["feiertage.php"] = "Feiertage";

$activePage = "offnungszeiten.php";

//menu.php
<?php foreach($pages as $url=>$title):?>
  <li>
       <a <?php if($url === $activePage):?>class="active"<?php endif;?> href="<?php echo $url;?>">
         <?php echo $title;?>
      </a>
  </li>

<?php endforeach;?> 
```

使用[Smarty](http://www.smarty.net/)这样的模板引擎，您的 menu.php 会看起来更好：

```
//menu.php
{foreach $pages as $url=>$title}
   <li>
       <a {if $url === $activePage}class="active"{/if} href="{$url}">
         {$title}
      </a>
   </li>
{/foreach} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-04-12T05:34:33.260

在每个 php 文件中创建一个变量，例如：

```
$activePage = "sauna"; (different for each page) 
```

然后像这样检查你的html页面中的变量

```
<?php if ($activePage =="sauna") {?>
 class="active" <?php } ?> 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-04-12T05:37:19.697

将以下所有代码放入其中`menu.php`，一切都会得到处理。

```
// function to get the current page name
function PageName() {
  return substr($_SERVER["SCRIPT_NAME"],strrpos($_SERVER["SCRIPT_NAME"],"/")+1);
}

$current_page = PageName(); 
```

使用上面的内容获取当前页面名称，然后将其放入您的菜单中

```
<li><a class="<?php echo $current_page == 'offnungszeiten.php' ? 'active':NULL ?>" href="offnungszeiten.php">Öffnungszeiten</a></li>
<li><a class="<?php echo $current_page == 'sauna.php' ? 'active':NULL ?>" href="sauna.php">Sauna</a></li>
<li><a class="<?php echo $current_page == 'frauensauna.php' ? 'active':NULL ?>" href="frauensauna.php">Frauensauna</a></li>
<li><a class="<?php echo $current_page == 'custom.php' ? 'active':NULL ?>" href="custom.php">Beauty Lounge</a></li>
<li><a class="<?php echo $current_page == 'feiertage.php' ? 'active':NULL ?>" href="feiertage.php">Feiertage</a></li> 
```

`active`将突出显示您的菜单项的类的名称在哪里

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-12T05:34:57.777

你可以做两件事。

`$_SERVER['PHP_SELF']`首先，您可以通过使用或`$_SERVER['REQUEST_URI']`任何其他[$_SERVER 全局](http://php.net/manual/en/reserved.variables.server.php)变量来读取您请求的 php 文件的当前文件名 ，您可以使用这些全局变量来读取当前页面并将其与链接的 url 进行比较，如下所示

```
 <a href="offnungszeiten.php" <?php if($_SERVER['PHP_SELF']=='offnungszeiten.php'){ ?>class="activatepage" <?php } ?> >
       Öffnungszeiten
    </a> 
```

第二个是创建一个可以全局读取的变量，该变量将存储当前页面的当前名称，如下所示

```
<?php
$cur_page ="offnungszeiten"
?>

<a href="offnungszeiten.php" <?php if($cur_page=='offnungszeiten'){ ?>class="activatepage" <?php } ?> >
 Öffnungszeiten
</a> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-12-18T20:12:08.813

我已经用 php 用这种方式完成了，

```
function createTopNav($active)
{
    $pages = array(
        array(
            'name'=>'Home',
            'link'=>'index'
        ),
        array(
            'name'=>'Smartphone',
            'link'=>'smartphone'
        ),
        array(
            'name'=>'Tablet',
            'link'=>'tablet'
        ),
        array(
            'name'=>'About Us',
            'link'=>'about'
        ),
        array(
            'name'=>'Contact Us',
            'link'=>'contact'
        )
    );
    $res = "<ul>";
    $activePage = "";
    foreach($pages as $key=>$val)
    {
        if($val['link']==$active)
        {
            $res.= "<li><a href='".$val['link']."'  class='active'  >".$val['name']."</a></li>";
        }
        else
        {
            $res.= "<li><a href='".$val['link']."'>".$val['name']."</a></li>";          
        }
    }
    $res.="</ul>";
    return $res;
} 
```

然后调用这个函数

```
echo createTopNav("about"); 
```

输出将是这样的

```
<ul>
   <li><a href="index">Home</a></li>
   <li><a href="smartphone">Smartphone</a></li>
   <li><a href="tablet">Tablet</a></li>
   <li><a href="about" class="active">About Us</a></li>
   <li><a href="contact">Contact Us</a></li>
</ul> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-04-07T14:30:37.617

我使用 jQuery/javascript 解决了这个问题，每次加载我的任何页面时都运行下面的代码：

```
 $(document).ready(function () {    
    //Get CurrentUrl variable by combining origin with pathname, this ensures that any url appendings (e.g. ?RecordId=100) are removed from the URL
    var CurrentUrl = window.location.origin+window.location.pathname;
    //Check which menu item is 'active' and adjust apply 'active' class so the item gets highlighted in the menu
    //Loop over each <a> element of the NavMenu container
    $('#NavMenu a').each(function(Key,Value)
        {
            //Check if the current url
            if(Value['href'] === CurrentUrl)
            {
                //We have a match, add the 'active' class to the parent item (li element).
                $(Value).parent().addClass('active');
            }
        });
 }); 
```

此实现假定您的菜单具有“NavMenu”ID，并使用`http://hostname/scriptname.php`href 属性，如下所示：

```
 <ul id="NavMenu">
   <li><a href="http://localhost/index.php">Home</a></li>
   <li><a href="http://localhost/smartphone.php">Smartphone</a></li>
   <li><a href="http://localhost/tablet.php">Tablet</a></li>
   <li><a href="http://localhost/about.php" class="active">About Us</a></li>
   <li><a href="http://localhost/contact.php">Contact Us</a></li>
</ul> 
```

阅读 javascript 评论以了解发生了什么。如果您更喜欢使用不同的 href 布局（如在原始示例中），则必须稍微使用 CurrentUrl 变量以使其使用与 href 属性相同的布局。

对我来说，这是最简单的解决方案，因为我有一个现有的站点，其中包含一个大菜单和许多页面，并且希望避免修改所有页面。这使我可以在头文件（已经是一个中心文件）中添加一段 javascript 代码，从而解决所有现有页面的问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-12T05:38:39.633

在查询字符串中发送页面名称并通过获取变量在每个页面上检查它。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-03-10T06:34:38.547

更简单的解决方案：

`asprin`从上面借用代码；

创建一个新文件`menu.php`，您将在其中存储菜单的唯一副本。在此文件中，您将创建一个函数，该函数`addMenu($pageName)`将参数作为页面名称，并在添加当前标签后返回由菜单组成的字符串。

在您的 HTML 代码中，您将使用当前页面名称`include(menu.php)`调用该函数。`addMenu`因此，您的代码将如下所示：

菜单.php

```
 <?php

        function addMenu($pageName){
            $menu = 

                '<ul>
                    <li><a href="Öffnungszeiten.php"' . ($pageName == "Öffnungszeiten" ? "class=\"current\"" : "") . '><span>Öffnungszeiten</span></a></li>
                    <li><a href="sauna.php"' . ($pageName == "Öffnungszeiten" ? "class=\"current\"" : "") . '><span>Sauna</span></a></li>
                    <li><a href="frauensauna.php"' . ($pageName == "Frauensauna" ? "class=\"current\"" : "") . '><span>Frauensauna</span></a></li>
                    <li><a href="custom.php" ' . ($pageName == "lounge" ? "class=\"current\"" : "") . '><span>Beauty Lounge</span></a></li>
                    <li><a href="Feiertage.php"' . ($pageName == "feiertage" ? "class=\"current\"" : "") . '><span>Feiertage</span></a></li>                                                                                
                </ul>';
          return $menu;
    }
        ?> 
```

在你的 HTML 中，这样说：

```
<div id="menu">
            <?php
                include('menu.php');
                echo addMenu("index");
                echo $hello;     
            ?>
        </div> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-10-19T16:07:16.457

有点晚了，但我只需要自己解决这个问题，最后使用[这个 Javascript 方法](http://snook.ca/archives/javascript/clear_links_to/)，稍作修改。这样做的好处是不需要对当前代码进行很多更改，只需运行脚本即可。

```
window.onload = activateCurrentLink;

function activateCurrentLink(){
    var a = document.getElementsByTagName("A");
    for(var i=0;i<a.length;i++)
        if(a[i].href == window.location.href.split("#")[0])
            a[i].className = 'activelink';
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-04-02T19:46:55.827

这对我有用：

```
 function active_page($script){

    $actual = basename($_SERVER['PHP_SELF']);

  if($script == $actual){
      return 'active-page'; //class name in css
  }
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-05-23T10:15:07.677

我有一些简单的例子，见下文：

```
<?php
function active($currect_page) {
    $url = $_SERVER['REQUEST_URI'];

    if($currect_page == $url){
        echo 'active';
    }
}
?>

<ul class="navbar-nav mr-auto">
  <li class="nav-item <?php active('/');?>">
    <a class="nav-link" href="/">Home</a>
  </li>
  <li class="nav-item <?php active('/other');?>">
    <a class="nav-link" href="/other">Other page</a>
  </li>
</ul> 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-12-29T05:49:28.487

迟到总比没有好 - 老实说，我喜欢保持简单，尤其是在有大量脚本和 PHP 的情况下。

我将此代码放在每个页面的顶部以识别页面：

```
<?php
  $current_page = 'home';
  include 'header.php';
?> 
```

然后你的菜单/导航（我的是 bootstrap 4）看起来像这样：

```
<ul class="navbar-nav mx-auto">
  <li class="nav-item <?php if ($current_page=="home") {echo "active"; }?>">
      <a class="nav-link" href="<?php echo SITEURL;?>/">Home</a>
  </li>
  <li class="nav-item <?php if ($current_page=="about") {echo "active"; }?>">
      <a href="<?php echo SITEURL;?>/about" class="nav-link ">About</a>
  </li>
  <li class="nav-item <?php if ($current_page=="store") {echo "active"; }?>">
      <a href="<?php echo SITEURL;?>/store" class="nav-link">Store</a>
  </li>
  <li class="nav-item <?php if ($current_page=="news") {echo "active"; }?>">
        <a href="<?php echo SITEURL;?>/news" class="nav-link">News</a>
  </li>
  <li class="nav-item <?php if ($current_page=="contact") {echo "active"; }?>">
      <a href="<?php echo SITEURL;?>/content/contact-us" class="nav-link ">Contact</a>
  </li>
</ul> 
```

我并不是说这是最佳方法，但它对我有用并且易于实施。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-04-30T13:56:15.780

添加这个：`<?= ($activePage == 'home') ? 'active':''; ?>`到我的链接它工作得很好，我只能让子菜单的子菜单工作以使父菜单处于活动状态。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-05-31T04:58:24.960

假设您有一个包含以下项目的导航栏：

```
<ul>
   <li id="menu-item-home"><a href="index.php">HOME</a></li>
   <li id="menu-item-services"><a href="/services.php">SERVICES</a></li>
   <li id="menu-item-about-us"><a href="/about-us.php">ABOUT US</a></li>
   <li id="menu-item-contact"><a href="/contact.php">CONTACT</a></li>      
</ul> 
```

然后，在每个页面中声明一个 javascript 变量，如下所示：

```
<script>
    <?php echo("var active = 'menu-item-home';"); ?>
</script> 
```

变量“active”被分配了每个页面的相应项目。

现在，您可以使用此变量突出显示活动菜单项，如下所示。

```
$(window).ready(function(){$("#" + active).addClass("active");}); 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-10-22T14:24:23.303

我的网络应用程序菜单也有类似的问题。我也有不显示为顶级菜单按钮的子菜单。

我的解决方案如下：

a) 带有菜单 html 的部分 php 文件和顶部的一个小 php 函数，用于根据菜单按钮检查 GET 变量。我有两个 GET 变量要检查：页面和（如有必要）menu_button。

b) 添加任何带有指向菜单页面或子菜单页面的 href 链接的新 php 页面。

变量“menu_button”是可选的，可用于链接到子菜单 php 文件。

当然，应该考虑 GET 变量的安全性。

从我的角度来看，这个解决方案比在某处维护一组页面或链接更省力。您只需使用获取变量“menu_button”，您可以在其中传递顶级菜单按钮，该按钮应在任何针对您的 php 文件的链接中进行可视标记。

代码示例：

部分 menu.php（必须包含在每个 php 文件中）：

```
<?php
  function active($page_link){
    $menu_button = $_GET("menu_button") ?: $_GET("page");  // sets the menu button either to the given top level menu or it defaults to the page itself
    if($menu_button === $page_link) return "active";
  }
?>

<div>
<a href="?page=one" class="<?= active('one') ?>"Link one</a>
<a href="?page=two" class="<?= active('two') ?>">Link two</a>
</div> 
```

任何带有子菜单文件链接的 php 文件：

```
<div>
 <a href="?page=one">Link one</a>
 <a href="?page=three&menu_button=two">Link to sub menu page "three" of menu "two"</a>
</div> 
```

为我工作。希望其他人可以使用这个。

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2014-11-14T20:26:08.897

您可以使用

```
<?php
function active($current_page){
    $page = $_GET['p'];
    if(isset($page) && $page == $current_page){
        echo 'active'; //this is class name in css
    }
}
?>
<ul>
    <li><a class="<?php active('page1');?>" href="?p=page1">page1</a></li>
    <li><a class="<?php active('page2');?>" href="?p=page2">page2</a></li>
    <li><a class="<?php active('page3');?>" href="?p=page3">page3</a></li>
    <li><a class="<?php active('page4');?>" href="?p=page4">page4</a></li>
</ul> 
```

# python - python selenium webdriver问题（selenium.common.exceptions.WebDriverException：消息：“无法加载配置文件。配置文件目录：）

> ID：15963764
> 
> 赞同：5
> 
> 时间：2013-04-12T05:31:24.013
> 
> 标签：python, selenium, webdriver, localhost

我正在使用 Mac OS X 10.8.3、selenium 2.32.0、python 2.7、Firefox 版本 20，并且在运行 python 绑定时出现此错误：

```
selenium.common.exceptions.WebDriverException: 
    Message: "Can't load the profile. Profile Dir: /var/folders/vn/8h6w79td4p59l9h9xhx2986r0000gn/T/tmpTmsdul Firefox output:  LOG addons.xpi: startup
    LOG addons.xpi: Skipping unavailable install location app-system-share
    LOG addons.xpi: checkForChanges
    LOG addons.xpi: No changes found
    2013-04-11 21:59:09.107 firefox-bin[26167:707] invalid drawable" 
```

Firefox 会打开，但不会加载我在 python selenium 脚本中提供的 url。我见过很多其他人有这个问题，比如这篇文章：

[来自stackoverflow的帖子](https://stackoverflow.com/questions/6682009/selenium-firefoxprofile-exception-cant-load-the-profile)

但我已经追踪到我在 localhost 之外运行一个本地开发站点这一事实。在我的主机文件中，我设置了它：

```
127.0.0.1 local.development.com 
```

当我把它改回原来的：

```
127.0.0.1 localhost 
```

一切都很好。现在只需编辑我的 hosts 文件即可轻松地在本地开发站点和 selenium 之间切换。但是想问一下是否有一种方法可以让我的本地开发站点保持正常运行，同时仍然使用 selenium。

任何建议或细节。或许对内部运作也有一些解释，好吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T06:56:04.690

您需要主机文件中的 localhost 条目。但是您可以添加您的 local.development.com。

所以确保你有：

```
127.0.0.1 localhost
127.0.0.1 local.development.com 
```

在您的主机文件中。而不仅仅是一个或另一个。hosts 文件是从域名到 IP 地址的映射。您可以拥有许多指向同一个 IP 地址的域名。但是 Selenium 明确地尝试连接到“localhost”。你已经删除了那个条目。

# knockout.js - Knockout JS - Selenium webdriver 中未处理超链接

> ID：15963765
> 
> 赞同：0
> 
> 时间：2013-04-12T05:31:25.210
> 
> 标签：knockout.js, selenium-webdriver, knockout-mvc

无法使用 Selenium wbedriver 单击超链接，因为他们（开发人员）使用带有 MVC 的 Knockout JS，所以请给出如何在 Automate 中处理这些类型的 JS 的步骤

例如

```
<a href="#" data-bind="click: $root.lnkAdd">New Grade</a> 
```

在测试期间我想点击那个超链接（新成绩）

所以请帮助我如何做到这一点

问候普拉布

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T07:10:25.870

3种方法来做到这一点。

正常方式

```
WebElement link=browser.findElement(By.xpath("//a[text()='New Grade']"));
link.click();
//click once again
link.click(); 
```

键盘方式，ENTER键

```
link.sendKeys(Keys.ENTER); 
```

讨厌的棘手方法，移至该链接，然后单击或发送 ENTER 键

```
Actions moveTo = new Actions(driver);
moveTo.moveToElement(link).click().build().perform(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T05:43:32.920

使用 Knockout 不会改变您在页面上定位元素的方式。归根结底，它仍然只是普通的 html。我的 selenium 体验有点过时，但我过去总是使用 xpath 来定位元素

前任：`sel.Click("//a[text()='New Grade']")`

# regex - 也接受“空白”字符的正则表达式

> ID：15963770
> 
> 赞同：-1
> 
> 时间：2013-04-12T05:31:44.313
> 
> 标签：regex, whitespace

这是我的正则表达式。但它不接受空白。如何修改它，使其接受中间或结尾的空格，但不应只接受空格。

```
 /^[a-zA-Z]+[a-zA-Z0-9._-]+$/' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T05:38:49.563

以下内容应该适合您。它将在第一个字符之后允许空格。 `^[a-zA-Z]+[a-zA-Z0-9\s._-]+$`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T05:41:24.567

是的，我得到了解决方案。我以以下方式修改了正则表达式，这工作正常。总之感谢 ：）

```
 /^[a-zA-Z]+[a-z A-Z0-9._-]+$/' 
```

# android - Android OpenCV 对象检测

> ID：15963771
> 
> 赞同：14
> 
> 时间：2013-04-12T05:31:46.417
> 
> 标签：android, opencv, image-processing

我试图实现这样的事情：[http](http://www.youtube.com/watch?v=zjxWpKCQqJc) ://www.youtube.com/watch?v=zjxWpKCQqJc on android。

这是我的代码：

```
public Mat onCameraFrame(CvCameraViewFrame inputFrame) {
    Mat novo = new Mat();
    Mat resp = new Mat();
    Mat homer = new Mat();

    //resp = inputFrame.gray();
    novo = inputFrame.gray();

    Mat lido = new Mat();
    try {
        lido = Utils.loadResource(this, R.drawable.homer);
    } catch (IOException e) {
        e.printStackTrace();
    }
    Imgproc.cvtColor(lido, homer, Imgproc.COLOR_RGB2GRAY);

    FeatureDetector surf = FeatureDetector.create(FeatureDetector.FAST);

    MatOfKeyPoint keypointsHomer = new MatOfKeyPoint();
    MatOfKeyPoint keypoints = new MatOfKeyPoint();

    surf.detect(homer, keypointsHomer);
    surf.detect(novo, keypoints);

    DescriptorExtractor SurfExtractor = DescriptorExtractor.create(FeatureDetector.SURF);

    Mat descriptors = new Mat();
    Mat homerDescriptors = new Mat();

    SurfExtractor.compute(novo, keypoints, descriptors);
    SurfExtractor.compute(homer, keypointsHomer, homerDescriptors);

    DescriptorMatcher m = DescriptorMatcher.create(DescriptorMatcher.BRUTEFORCE);
    MatOfDMatch matches = new MatOfDMatch();

    m.match(descriptors, homerDescriptors, matches);

    Features2d.drawMatches(novo, keypoints, homer, keypointsHomer, matches, resp);

    return resp;
} 
```

我收到以下错误：[https ://dl.dropboxusercontent.com/u/2345114/error_android.png](https://dl.dropboxusercontent.com/u/2345114/error_android.png)

如果我尝试像这样绘制关键点：

```
Features2d.drawKeypoints(novo, keypoints, resp);
Features2d.drawKeypoints(homer, keypointsHomer, resp); 
```

两者都工作正常！我做错了什么？

# qt - QVector：'operator+' 不匹配

> ID：15963772
> 
> 赞同：1
> 
> 时间：2013-04-12T05:32:05.810
> 
> 标签：qt, qstring

我将 QVector 从一个窗口传递到另一个窗口，我想将 QVector 中存在的值从前一个窗口附加到当前窗口中的 QString。执行添加时出现错误`no match for 'operator+'`。

这是我的代码：

窗口1.cpp

```
void SelectOS::processNextButton()
{
    if(ui->win32->isChecked()){
        QString path;
        path = qApp->applicationDirPath()+"/WIN/32Bit";
        so->osName.push_back(path);
        SelectSoftware *ss = new SelectSoftware();
        this->hide();
        ss->show();
    }
}

QVector<QString> SelectOS::getosName(){
    so = new SelectOS();
    return so->osName;
} 
```

窗口2.cpp

```
void SelectSoftware::getSoftwareDetails()
{

    SelectOS *so = new SelectOS();
    SelectSoftware *ss = new SelectSoftware();
    ss->os = so->getosName();

    QString fileName = ss->os + "/" +SOFTWARELIST; // Here I get the error...

    QFile file(fileName);
    if (!file.open(QIODevice::ReadOnly | QIODevice::Text)){
        QString msg = "Could not find the file " + fileName;
        errorExit(msg);
    }

    QTextStream in(&file);
    while (!in.atEnd()) {
        QString line = in.readLine();
        processLine(line.toLower());
    }
} 
```

帮帮我，谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T06:54:12.057

假设`SOFTWARELIST`是一个简单的 QString：

```
QString fileName = QString( "%1/%2" )
                  .arg( ss->os.last() )
                  .arg( SOFTWARELIST ); 
```

这意味着您正在创建一个带有占位符的 QString ，`%1`where`%2`将`%1`被替换为`ss->os.last()`返回向量中最后一项的结果，`%2`并将被替换为任何`SOFTWARELIST`内容。

如果`SOFTWARELIST`也是一个向量，你也需要调用`.last()`它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T07:06:26.310

QVector 是一个容器类，它*包含一组*东西。在您的一组 QString 示例中。那么你尝试形成一个文件名，它是一个 QString，你显然不能添加到其他 Qstring 的文件名 QString 列表中。（真的说你可以，但不能使用 '+' 运算符和稍微不同的代码）。老实说，如果你只需要一个应用程序路径，我并没有马上明白为什么你实际上传递了 QVector，我建议只使用 QString。

# google-app-engine - 用于 GAE 帐户的 Java 自定义登录页面

> ID：15963773
> 
> 赞同：0
> 
> 时间：2013-04-12T05:32:06.200
> 
> 标签：google-app-engine, google-account

我有一个 Java 应用程序和 GAE 应用程序。这是我想做的事情：

我希望 GAE 帐户用户在我的 Java 应用程序中进行授权，并且我不想使用“使用...登录”解决方案。相反，我希望用户从我的 Java 应用程序登录页面登录（例如提供用户名和密码）并将此登录信息转发到 Google 服务器。

换句话说，我想要这个[页面](https://login.unal.edu.co/sso/auth.htm)中的这个东西。该网页使用 Google Accounts Service，但登录表单是一种自定义表单，然后（我想）将数据转发到 Google 服务器，然后将用户登录。

我怎样才能做到这一点？我应该使用哪些协议（OAuth、OpenID、GAE 服务...）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T07:13:39.713

您无法为 Google 帐户创建自定义登录页面。Google 提供的登录页面的全部目的是用户在输入密码时信任该页面。否则任何人都可以创建一个登录页面并开始收集用户密码。

如果您需要对用户帐户进行托管/受限访问（征得他们的同意），您应该查看 OAuth。但无论如何，这不会让您选择制作自定义登录页面。

# sql - 删除命令中的“字符串或二进制数据将被截断”错误

> ID：15963781
> 
> 赞同：0
> 
> 时间：2013-04-12T05:32:45.790
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005

尝试在存储过程中执行删除命令时出现此错误：

> 字符串或二进制数据将被截断

是否有可能在删除命令中出现此类错误？如果是，那么可能的原因是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T05:39:19.973

它通常在您尝试插入数据时发生。

您插入的数据可能具有比数据库中实际声明的更大的数据大小。这就是为什么会出现此错误的原因。

请检查数据库中的数据大小和您尝试插入 int 数据库的实际数据大小。

# android - proguard.ParseException：在 Android Eclipse ADT 中的“@”之前需要类成员名称

> ID：15963783
> 
> 赞同：4
> 
> 时间：2013-04-12T05:32:51.650
> 
> 标签：android, proguard

我尝试在 MAC 上使用带有 eclipse ADT v21.1.0-569685 的 Proguard 优化我的 Android 应用程序代码。我使用项目-> Android 工具-> 导出已签名的应用程序包选项来使用我的私人证书进行签名，签名完成后出现以下错误，

**项目属性**

```
# This file is automatically generated by Android Tools.
# Do not modify this file -- YOUR CHANGES WILL BE ERASED!
#
# This file must be checked in Version Control Systems.
#
# To customize properties used by the Ant build system edit
# "ant.properties", and override values to adapt the script to your
# project structure.
#
# To enable ProGuard to shrink and obfuscate your code, uncomment this (available properties: sdk.dir, user.home):
proguard.config=${sdk.dir}/tools/proguard/proguard-android.txt:proguard-project.txt

# Project target.
target=android-17
android.library.reference.1=../google-play-services_lib 
```

**proguard-project.txt**

```
# To enable ProGuard in your project, edit project.properties
# to define the proguard.config property as described in that file.
#
# Add project specific ProGuard rules here.
# By default, the flags in this file are appended to flags specified
# in ${sdk.dir}/tools/proguard/proguard-android.txt
# You can edit the include path and order by changing the ProGuard
# include property in project.properties.
#
# For more details, see
#   http://developer.android.com/guide/developing/tools/proguard.html

# Add any project specific keep options here:

# If your project uses WebView with JS, uncomment the following
# and specify the fully qualified class name to the JavaScript interface
# class:
#-keepclassmembers class fqcn.of.javascript.interface.for.webview {
#   public *;
#} 
```

**控制台日志：**

```
[2013-04-12 10:41:53 - MyApp] Proguard returned with error code 1\. See console
[2013-04-12 10:41:53 - MyApp] proguard.ParseException: Expecting class member name before '@' in line 82 of file '/Users/MyOrg/Android_workspace/MyApp/bin/proguard.txt',
[2013-04-12 10:41:53 - MyApp]   included from argument number 6
[2013-04-12 10:41:53 - MyApp]   at proguard.ConfigurationParser.readNextWord(ConfigurationParser.java:1133)
[2013-04-12 10:41:53 - MyApp]   at proguard.ConfigurationParser.readNextWord(ConfigurationParser.java:1117)
[2013-04-12 10:41:53 - MyApp]   at proguard.ConfigurationParser.parseMemberSpecificationArguments(ConfigurationParser.java:845)
[2013-04-12 10:41:53 - MyApp]   at proguard.ConfigurationParser.parseClassSpecificationArguments(ConfigurationParser.java:697)
[2013-04-12 10:41:53 - MyApp]   at proguard.ConfigurationParser.parseKeepClassSpecificationArguments(ConfigurationParser.java:490)
[2013-04-12 10:41:53 - MyApp]   at proguard.ConfigurationParser.parse(ConfigurationParser.java:139)
[2013-04-12 10:41:53 - MyApp]   at proguard.ProGuard.main(ProGuard.java:484) 
```

1.  如何解决上述问题？
2.  在我阅读的 prouard.project 文件中

> 如果您的项目使用带有 JS 的 WebView，请取消注释以下内容并将完全限定的类名指定给 JavaScript 接口类：

我在 WebAppInterface.java 类的两个活动中使用了 webview。如何执行上述语句？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-13T01:38:02.223

**在布局文件的android:onClick**属性中引用资源名称如“ **@string/on_click_handler_name** ”是可以的。但是，proguard 无法解析这些引用。

 **查看[http://android.okhelp.cz/proguard-parseexception-expecting-class-member-name-before/](http://android.okhelp.cz/proguard-parseexception-expecting-class-member-name-before/)了解更多详情。

在您的*string.xml中找到***@string/tha_lf_et_todate_onclick**的相应值并更新：

 *```
android:onClick="@string/tha_lf_et_todate_onclick" 
```

至

```
android:onClick="onClickXXX" 
```

在您的布局文件中。对于第二个问题，取消注释那段代码，并将“fqcn.of.javascript.interface.for.webview”替换为类的完全限定名称。***

# c# - Windows 窗体按钮的前景色没有改变

> ID：15963785
> 
> 赞同：0
> 
> 时间：2013-04-12T05:32:54.793
> 
> 标签：c#, winforms

我正在使用`MDI Forms`. 在我的父表单中，我有一个`ToolStrip`按钮。昨天我不得不将文本从黑色（我认为这是默认颜色，因为我之前没有更改过）更改为灰色。我可以看到设计器中的文本变为灰色，在`MainForm.Designer.Cs`代码中是：

```
this.btnClients.BackgroundImageLayout = System.Windows.Forms.ImageLayout.None;
            this.btnClients.Font = new System.Drawing.Font("Segoe UI", 9F, System.Drawing.FontStyle.Bold);
            this.btnClients.ForeColor = System.Drawing.SystemColors.ActiveBorder;
            this.btnClients.Image = global::ShoesUnlimitedAdmin.Properties.Resources.Clients;
            this.btnClients.ImageScaling = System.Windows.Forms.ToolStripItemImageScaling.None;
            this.btnClients.ImageTransparentColor = System.Drawing.Color.Magenta;
            this.btnClients.Name = "btnClients";
            this.btnClients.Size = new System.Drawing.Size(93, 49);
            this.btnClients.Text = "Clients";
            this.btnClients.Click += new System.EventHandler(this.btnClients_Click); 
```

更确切地说：

```
this.btnClients.ForeColor = System.Drawing.SystemColors.ActiveBorder; 
```

这是一种灰色（我也尝试过使用自定义颜色，但也没有用）。但是当我启动应用程序时，文本颜色仍然像以前一样保持黑色。

# php - 在PHP中将此字符串解析为数组的有效方法？

> ID：15963787
> 
> 赞同：3
> 
> 时间：2013-04-12T05:33:07.530
> 
> 标签：php, regex

**背景**

我有一个数组，我通过根据每次出现的`0d0a`using拆分字符串来创建该数组`preg_split('/(?<=0d0a)(?!$)/')`。

例如：

```
$string = "78781110d0a78782220d0a"; 
```

将分为：

```
Array ( [0] => 78781110d0a [1] => 78782220d0a ) 
```

有效的数组元素必须以 开头`7878`和结尾`0d0a`。

**问题**

但有时，`0d0a`字符串中有一个额外的元素，它拆分为一个额外的无效数组元素，即不以 . 开头的元素`7878`。

以这个字符串为例：

```
$string = "78781110d0a2220d0a78783330d0a"; 
```

这分为：

```
Array ( [0] => 78781110d0a [1] => 2220d0a [2] => 78783330d0a ) 
```

但实际上应该是：

```
Array ( [0] => 78781110d0a2220d0a [1] => 78783330d0a) 
```

**我的解决方案**

我编写了以下（混乱的）代码来解决这个问题：

```
 $data = Array('78781110d0a','2220d0a','78783330d0a');
    $i = 0; //count for $data array;
    $j = 0; //count for $dataFixed array;
    $dataFixed = $data;

    foreach($data as $packet) {
        if (substr($packet,0,4) != "7878") { //if packet doesn't start with 7878, do some fixing
            if ($i != 0) { //its the first packet, can't help it!
                $j++;                    

                if ((substr(strtolower($packet), -4, 4) == "0d0a")) { //if the packet doesn't end with 0d0a, its 'mostly' not valid, so discard it
                    $dataFixed[$i-$j] = $dataFixed[$i-$j] . $packet;
                }
                    unset($dataFixed[$i-$j+1]);                        
                    $dataFixed = array_values($dataFixed);
            }
        }
        $i++;
    } 
```

**描述**

我首先将数组复制到另一个数组`$dataFixed`。在数组的`foreach`循环中`$data`，我检查它是否以`7878`. 如果没有，我将它与`$data`. 然后我取消设置当前数组`$dataFixed`并使用 重置数组元素`array_values`。

但我对这个解决方案不是很有信心。有没​​有更好、更有效的方法？

**更新**

如果输入字符串没有`0d0a`像它应该的那样结束怎么办？它将坚持前一个数组元素..

例如：在字符串`78781110d0a2220d0a78783330d0a0000`中，`0000`应作为另一个数组元素分隔。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T05:39:57.847

使用另一个[积极的前瞻](http://www.regular-expressions.info/lookaround.html) `(?=7878)`来形成：

```
preg_split('/(?<=0d0a)(?=7878)/',$string) 
```

*注意：我删除`(?!$)`是因为我不确定那是什么，根据您的示例数据。*

例如，这段代码：

```
$string = "78781110d0a2220d0a78783330d0a";
$array  = preg_split('/(?<=0d0a)(?=7878)(?!$)/',$string);
print_r($array); 
```

结果是：

`Array ( [0] => 78781110d0a2220d0a [1] => 78783330d0a )`

**更新：**

根据您修改后的输入字符串末尾可能有随机字符的问题，您可以添加三行来制作完整的程序：

```
$string = "78781110d0a2220d0a787830d0a330d0a0000";
$array  = preg_split('/(?<=0d0a)(?=7878)/',$string);
$temp = preg_split('/(7878.*0d0a)/',$array[count($array)-1],null,PREG_SPLIT_NO_EMPTY|PREG_SPLIT_DELIM_CAPTURE);
$array[count($array)-1] = $temp[0];
if(count($temp)>1) { $array[] = $temp[1]; }
print_r($array); 
```

我们基本上进行初始拆分，然后按预期的数据格式拆分结果数组的最后一个元素，保持分隔符使用`PREG_SPLIT_DELIM_CAPTURE`. 如果输入字符串不以随机字符结尾，`PREG_SPLIT_NO_EMPTY`则确保我们不会得到空数组元素。

**更新 2：**

根据您在下面的评论，您似乎暗示任何所需匹配之间可能存在随机字符，并且您希望保留这些随机字符，您可以这样做：

```
$string = "0078781110d0a2220d0a2220d0a0000787830d0a330d0a000078781110d0a2220d0a0000787830d0a330d0a0000";
$split1 = preg_split('/(7878.*?0d0a)/',$string,null,PREG_SPLIT_NO_EMPTY|PREG_SPLIT_DELIM_CAPTURE);
$result = array();
foreach($split1 as $e){
  $split2 = preg_split('/(.*0d0a)/',$e,null,PREG_SPLIT_NO_EMPTY|PREG_SPLIT_DELIM_CAPTURE);
  foreach($split2 as $el){
    // test if $el doesn't start with 7878 and ends with 0d0a
    if(strpos($el,'7878') !== 0 && substr($el,-4) == '0d0a'){
    //if(preg_match('/^(?!7878).*0d0a$/',$el) === 1){
      $result[ count($result)-1 ] = $result[ count($result)-1 ] . $el;
    } else {
      $result[] = $el;
    }
  }
}
print_r($result); 
```

这里采用的策略与上面不同。首先，我们使用非贪婪正则表达式根据与所需数据匹配的分隔符拆分输入字符串`.*?`。此时，我们有一些字符串包含所需值的结尾和结尾的一些垃圾，因此我们使用贪婪的正则表达式根据最后一次出现的 "0d0a" 再次拆分`.*0d0a`。然后，我们将任何不以“7878”开头但以“0d0a”结尾的结果值附加到前一个值，因为这应该修复被拆分的前半部分和后半部分，因为它包含一个额外的“0d0a”。

我为最里面的语句提供了两种方法`if`，一种使用正则表达式。正则表达式在我的测试中稍微慢一些，所以我把那个注释掉了。

我可能仍然没有您的全部要求，因此您必须让我知道它是否有效，并且可能提供您的完整数据集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T05:46:54.430

你为什么不改用[preg_match_all](https://www.php.net/manual/en/function.preg-match-all.php)呢？您可以避免所有非捕获组（向前看，向后看）以拆分字符串（没有非捕获组会删除匹配项），然后找到您正在寻找的匹配项：

## 更新

```
<?php
$string = "00787817878110d0a22278780d0a78783330d0a00";
preg_match_all('/7878.*?0d0a(?=7878|[^(7878)]*?$)/', $string, $arr);
print_r($arr);
?> 
```

给出一个数组`$arr[0] => ( [0] => 787817878110d0a22278780d0a, [1] => 78783330d0a )`。去除前导和尾随的垃圾字符（任何不以 or 开头或`7878`结尾的字符） 。`7878``0d0a`

所以 $arr[0] 将是您正在寻找的值数组。

见[ideone上的例子](http://ideone.com/SPdR2t)

适用于多个`7878`值和多个`0d0a`值（即使这很荒谬）。

## 更新

如果拆分更符合您的风格，为什么不完全避免使用正则表达式呢？

```
<?php
$string = "787817878110d0a22278780d0a78783330d0a";
$arr = explode('0d0a7878', $string);
$string = implode('0d0a,7878', $arr);
$arr = explode(',', $string);
print_r($arr);
?> 
```

在这里，我们用分隔符分割字符串`0d0a7878`，这就是@CharlieGorichanaz 的解决方案正在做的事情，并为他提供快速、准确的解决方案。然后我们添加一个逗号，因为谁不喜欢逗号分隔值？我们[再次](https://www.php.net/manual/en/function.explode.php)在逗号上展开所需值的数组。在性能方面，这应该比使用正则表达式更快。见[例子](http://ideone.com/1NLXF4)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T05:50:06.937

我认为您正在使用分隔符“0d0a”，它也恰好是内容的一部分！只要分隔符也可以是内容的一部分，就不可能避免获取垃圾数据。不知何故，分隔符必须是唯一的。

可能的解决方案。

*   将分隔符更改为不作为数据一部分出现的其他内容（000000，@!.;）
*   如果您确定简单排列项目可能具有的文本长度，请使用它。根据示例，这是不可能的。

答案中给出的解决方案仅考虑您共享的样本数据。如果您对字符串的内容很了解，那么其他人提供的这些解决方案非常好用。否则这些解决方案将无法向您保证！

**最佳解决方案**：修复右分隔符，然后使用正则表达式或展开任何你喜欢的。

# sql-server - 最佳实践 SQL Server/Access 连接

> ID：15963790
> 
> 赞同：1
> 
> 时间：2013-04-12T05:33:29.307
> 
> 标签：sql-server, performance, ms-access, frontend

冒着引发 ODBC/OLEDB 争论的风险，有人对将 Access 前端链接到 SQL Server 后端有任何最佳实践建议吗？

我已阅读有关 .ADP 与 .MDB 的文章，并且还通过了无 DNS 连接信息并同意该想法。

我的主要问题是关于将数据和性能联系起来。过去，我发现直接连接到 SQL 数据库时表单很慢，我在“OnOpen”事件中测试了基于 ODBC 链接表与 OLEDB 连接的表单，发现 OLEDB 方法虽然不是很好，但速度更快。因此，我已经实现了在打开表单时在本地复制数据、修改、然后在完成时写回数据库的例程，但这有其自身的问题。

有没有人对这种设置的最佳实践方法有建议？我是否遗漏了一些可以改进直接链接到 SQL Server 的表单的内容？

任何意见或提示表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T05:49:06.810

您必须将网络流量减少到最低限度，尤其是确认交换。为此，请尽可能在 SQL 服务器上以独占方式运行 SQL，仅将完整的行集传输回客户端。不惜一切代价避免将服务器上的数据连接到 Access DB 中的数据。那应该让你开始。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T02:26:06.723

基本方法是简单地使用链接表。

使用 ODBC 时，您应该不会在这里看到任何真正的区别。ODBC 是首选方法，Microsoft 已宣布结束对 oleDB 的支持（大约 10 年前，.net 社区离开了 oleDB 和 ADO）。

您可以将表单绑定到这些链接表并获得良好的性能。简单的技巧是减少和限制提取的记录。当您启动这些绑定表单时，可以通过使用 SIMPLE where 子句来完成此限制。

因此，如果您启动绑定的发票表单并在标准打开表单命令中提供 where 子句，那么只会提取一条记录。当然，如果您有一个绑定的子表单，那么也只会从服务器中提取正确的记录。因此，在 99% 的情况下，使用 oleDB 或 ADO 没有任何优势。

因此，作为一种通用开发方法，您可以在大多数情况下使用绑定表单。

需要注意的是，对于某些连接和任何具有聚合查询的内容，您希望将链接表用于 sql 视图。您还可以考虑对报告使用传递，但传递往往需要更多的工作，并且链接视图意味着您可以保留现有的 VBA 代码，这些代码可能（希望）使用“where”子句来打开这些报告并再次限制记录拉下网络管道。

对于执行服务器端命令的动态传递，我使用以下代码：

```
Dim qdfPass       As DAO.QueryDef 

Set qdfPass = CurrentDb.QueryDefs("MyPass") 
qdfPass.SQL = "exec sp_myProc " & "p1"
qdfPass.Execute 
```

如果您需要以上内容来返回记录，那么只需执行以下操作：

```
Dim qdfPass       As DAO.QueryDef 
Dim rstData       As DAO.recordSet
Set qdfPass = CurrentDb.QueryDefs("MyPass") 
qdfPass.SQL = "exec sp_myProc " & "p1"
set rstData = qdfPass.OpenRecordSet 
```

因此，您可以使用很少的代码即时更改/修改上述 sql 以进行传递查询。归根结底，您因此获得了一流的性能，并且只需对现有应用程序进行极少的编码更改即可做到这一点。

所以这里目前推荐的方法是使用DAO。请记住，对于 oleDB（和 ADO）的 sql server 生命周期支持现已宣布。看这里：

[http://blogs.msdn.com/b/sqlnativeclient/archive/2011/08/29/microsoft-is-aligning-with-odbc-for-native-relational-data-access.aspx](http://blogs.msdn.com/b/sqlnativeclient/archive/2011/08/29/microsoft-is-aligning-with-odbc-for-native-relational-data-access.aspx)

# django - 我应该如何在 Django 模型中构建可选字段/模型？

> ID：15963806
> 
> 赞同：1
> 
> 时间：2013-04-12T05:35:04.827
> 
> 标签：django, django-models

我需要从我的 Django App 用户那里收集“笔记”，并且有两种类型的笔记具有不同的字段/字段类型。流程是这样的：

1.  创建新笔记。
2.  选择笔记类型。
3.  字段与注释类型模型定义相关
4.  查看所有笔记。

我是否应该使用适当的字段为每种笔记类型创建一个单独的模型，然后以某种方式将它们组合到视图中？ **有没有更好的方法来构建它以使其更具可扩展性？**

# jquery - 在回发之间维护选定的选项卡

> ID：15963808
> 
> 赞同：0
> 
> 时间：2013-04-12T05:35:05.003
> 
> 标签：jquery, tabs, postback

我正在使用 jQuery 选项卡来显示几个 asp:listviews 。每次回发完成时，选项卡都会设置为第一个选项卡。我正在使用以下代码来防止这种情况但不起作用

```
$(function () {
      $("#tabs").tabs({
          activate : function () {
              var selectedtab = $("#tabs").tabs("option", "selected");
              $("#<%= hdnSelectedTab.ClientID %>").val(selectedTab);
          },
          active : <%= hdnSelectedTab.Value %>
      });
  }); 
```

是不是代码有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T05:50:40.100

`jQuery`选项卡可以使用 cookie 来存储当前选项卡。请查看标签[文档](http://docs.jquery.com/UI/API/1.7/Tabs)。您将在文档中找到在 init 之后获取或设置 cookie 选项。示例代码是：

```
//setter
$('.selector').tabs({ cookie: { expires: 30 } });

//getter
var cookie = $( ".selector" ).tabs( "option", "cookie" ); 
```

**依赖**

要使用 cookie 选项，您需要包含[jQuery cookie 插件](http://archive.plugins.jquery.com/project/Cookie)。

享受...

# python - Python向所有集合的元素添加一个字符串

> ID：15963815
> 
> 赞同：1
> 
> 时间：2013-04-12T05:35:39.720
> 
> 标签：python, string, set, set-operations

我想知道执行以下操作的 Python 方法是什么 - 给定一个集合：

```
s = {'s1','s2','s3'} 
```

我想执行类似的操作：

```
s.addToAll('!') 
```

要得到

```
{'s1!','s2!','s3!'} 
```

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T05:36:26.630

对于一个实际的集合：

```
>>> s = {'s1','s2','s3'}
>>> {x + '!' for x in s}
set(['s1!', 's2!', 's3!']) 
```

该方法是 2.7+，如果您使用的是 Python 2.6，则必须改为：

```
>>> s = set(['s1','s2','s3'])
>>> set(x + '!' for x in s)
set(['s1!', 's2!', 's3!']) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T06:18:05.527

你可以试试这个：

```
>>> s = ['s1','s2','s3']
>>> list(i + '!' for i in s) 
```

# android - 如何判断安卓设备是否支持“android.hardware.camera.autofocus”？

> ID：15963819
> 
> 赞同：2
> 
> 时间：2013-04-12T05:35:55.833
> 
> 标签：android, android-camera, android-permissions

如何判断安卓设备是否支持“android.hardware.camera.autofocus”？

从哪里可以获得此 android 设备支持的功能列表？

我想在我的应用程序中使用功能，但我不知道手机是否支持。

```
<uses-feature
    android:name="android.hardware.camera"
    >
</uses-feature>
<uses-feature
    android:name="android.hardware.camera.autofocus"
    android:required="true"
    >
</uses-feature> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T05:41:35.940

你可以像管理

```
PackageManager pm = getPackageManager();
if (pm.hasSystemFeature(PackageManager.FEATURE_CAMERA)) {
// Here if you get Camera Do you work Like

Intent i = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
i.putExtra(MediaStore.EXTRA_OUTPUT,MyFileContentProvider.CONTENT_URI);
startActivityForResult(i, CAMERA_RESULT);

 } else {
Toast.makeText(getBaseContext(), "Camera is not available",Toast.LENGTH_LONG).show();
} 
```

还要将要求添加到`Permission`文件中`Camera``AndroidManifest.xml`

# javascript - js：烧瓶项目中 jasny 的上传小部件

> ID：15963821
> 
> 赞同：1
> 
> 时间：2013-04-12T05:36:09.473
> 
> 标签：javascript, html, twitter-bootstrap, flask

有一个烧瓶项目，我想用更好的东西替换标准文件上传表单：

```
<form action="" method=post enctype=multipart/form-data>
    <input type=file name=file>
    <input type=submit value=Upload>
</form> 
```

一直在研究使用[jasny 的引导上传小部件](http://jasny.github.io/bootstrap/javascript.html#fileupload)，但是，在加载正确的`.js`和`.css`文件并合并以下 HTML 之后

```
<div class="fileupload fileupload-new" data-provides="fileupload">
  <div class="input-append">
    <div class="uneditable-input span3">
      <i class="icon-file fileupload-exists"></i>
      <span class="fileupload-preview"></span>
    </div>
    <span class="btn btn-file">
      <span class="fileupload-new">Select file</span>
      <span class="fileupload-exists">Change</span>
      <input type="file" />
    </span>
    <a href="#" class="btn fileupload-exists" data-dismiss="fileupload">Remove</a>
  </div>
</div> 
```

我不确定如何设置事件以实际上传相关文件。我猜我将一个不同的按钮连接到提交事件，但我不确定在这里做什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T07:27:14.400

看起来该插件通过将事件绑定到现有 DOM 对象来工作。你打电话了吗

```
$('.fileupload').fileupload() 
```

在 DOM 准备好之后？如果您在元素添加到 DOM 之前调用它，它不会找到任何要绑定事件的元素。

# android - java.lang.NullPointerException - 不幸的是应用程序已停止

> ID：15963823
> 
> 赞同：1
> 
> 时间：2013-04-12T05:36:10.517
> 
> 标签：android, nullpointerexception

我正在编写一个允许用户登录的应用程序，但是每当我单击登录按钮时，不幸的是应用程序已停止，错误：

```
 java.lang.NullPointerException 
```

*造成的：*

**DetailActivity**，行号：**127**

```
 btnDisplay.setOnClickListener(new OnClickListener() 
```

**DetailActivity**，行号：**62**

```
 showInfo(); 
```

**Logcat 说::**

```
04-12 10:52:06.250: E/AndroidRuntime(991): FATAL EXCEPTION: main
04-12 10:52:06.250: E/AndroidRuntime(991): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.smart.restaurant.versionoct/com.smart.restaurant.versionoct.cart.DetailActivity}: java.lang.NullPointerException
04-12 10:52:06.250: E/AndroidRuntime(991):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
04-12 10:52:06.250: E/AndroidRuntime(991):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
04-12 10:52:06.250: E/AndroidRuntime(991):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
04-12 10:52:06.250: E/AndroidRuntime(991):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
04-12 10:52:06.250: E/AndroidRuntime(991):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-12 10:52:06.250: E/AndroidRuntime(991):  at android.os.Looper.loop(Looper.java:137)
04-12 10:52:06.250: E/AndroidRuntime(991):  at android.app.ActivityThread.main(ActivityThread.java:5039)
04-12 10:52:06.250: E/AndroidRuntime(991):  at java.lang.reflect.Method.invokeNative(Native Method)
04-12 10:52:06.250: E/AndroidRuntime(991):  at java.lang.reflect.Method.invoke(Method.java:511)
04-12 10:52:06.250: E/AndroidRuntime(991):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-12 10:52:06.250: E/AndroidRuntime(991):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-12 10:52:06.250: E/AndroidRuntime(991):  at dalvik.system.NativeStart.main(Native Method)
04-12 10:52:06.250: E/AndroidRuntime(991): Caused by: java.lang.NullPointerException
04-12 10:52:06.250: E/AndroidRuntime(991):  at com.smart.restaurant.versionoct.cart.DetailActivity.showInfo(DetailActivity.java:127)
04-12 10:52:06.250: E/AndroidRuntime(991):  at com.smart.restaurant.versionoct.cart.DetailActivity.onCreate(DetailActivity.java:62)
04-12 10:52:06.250: E/AndroidRuntime(991):  at android.app.Activity.performCreate(Activity.java:5104)
04-12 10:52:06.250: E/AndroidRuntime(991):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
04-12 10:52:06.250: E/AndroidRuntime(991):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
04-12 10:52:06.250: E/AndroidRuntime(991):  ... 11 more 
```

**登录活动.java：**

```
 // btnLogin
        final Button btnLogin = (Button) findViewById(R.id.btnLogin);
        // Perform action on click
        btnLogin.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {

                String url = "http://ipaddress/checkLogin.php";

        });
    } 
```

**DetailActivity.java：**

```
 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_checkout_member);

    btnDisplay = (ImageButton) findViewById(R.id.buttonSubmit);

    }
    });
} 
```

**活动细节.xml：**

```
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <include
    android:id="@+id/header"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    layout="@layout/header_checkout" />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/textView1"
        android:layout_alignBottom="@+id/textView1"
        android:layout_marginLeft="46dp"
        android:layout_toRightOf="@+id/textView1"
        android:text="$"
        android:layout_marginBottom="20dp"
        android:textStyle="bold"
        android:textAppearance="?android:attr/textAppearanceLarge" />

  <RadioGroup
      android:id="@+id/radioPayMode"
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:layout_alignBottom="@+id/radioUser"
      android:layout_alignParentRight="true"
      android:layout_below="@+id/textView1"
      android:layout_toRightOf="@+id/radioUser"
      android:background="@color/test4"
      android:layout_marginTop="20dp"
      android:orientation="horizontal" >

      <RadioButton
          android:id="@+id/radioCashOnDelivery"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:layout_marginTop="8dp"
          android:checked="true"
          android:textStyle="italic"
          android:text="Cash On Delivery"
          android:layout_marginRight="2dp" />

      <RadioButton
          android:id="@+id/radioCreditCard"
          android:layout_width="wrap_content"
          android:layout_height="match_parent"
          android:layout_marginTop="8dp"
          android:textStyle="italic"
          android:text="Credit Card" />

  </RadioGroup>

  <TextView
      android:id="@+id/textView1"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_below="@+id/header"
      android:layout_marginTop="10dp"
      android:text="Amount to Pay:"
      android:layout_marginLeft="10dp"
      android:textAppearance="?android:attr/textAppearanceLarge"
      android:textStyle="italic" />

  <TextView
      android:id="@+id/total"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_above="@+id/radioPayMode"
      android:layout_toRightOf="@+id/textView2"
      android:text="0"
      android:layout_marginLeft="2dp"
      android:textAppearance="?android:attr/textAppearanceLarge" />

  <ImageButton
      android:id="@+id/btnSubmit"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_alignParentBottom="true"
      android:layout_alignRight="@+id/textView2"
      android:layout_marginBottom="22dp"
      android:background="@drawable/place_button" />

  <TextView
      android:id="@+id/textView3"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_alignParentLeft="true"
      android:layout_below="@+id/radioPayMode"
      android:text="Name"
      android:layout_marginTop="10dp"
      android:textStyle="bold"
      android:layout_marginLeft="5dp"
      android:textAppearance="?android:attr/textAppearanceMedium" />

  <TextView
      android:id="@+id/textView4"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_alignParentLeft="true"
      android:layout_below="@+id/txtName"
      android:layout_marginTop="10dp"
      android:textStyle="bold"
      android:layout_marginLeft="5dp"
      android:text="Email ID"
      android:textAppearance="?android:attr/textAppearanceMedium" />

  <TextView
      android:id="@+id/txtName"
      android:layout_width="match_parent"
      android:layout_height="wrap_content"
      android:layout_alignParentLeft="true"
      android:layout_below="@+id/textView3"
      android:hint="Your Name Here"
      android:maxLines="1"
      android:layout_marginTop="1dp"
      android:layout_marginLeft="10dp"
      android:textAppearance="?android:attr/textAppearanceSmall"  />

  <TextView
      android:id="@+id/txtEmail"
      android:layout_width="match_parent"
      android:layout_height="wrap_content"
      android:layout_alignParentLeft="true"
      android:layout_centerVertical="true"
      android:hint="Your Email Here"
      android:layout_below="@+id/textView4"
      android:maxLines="1"
      android:layout_marginTop="1dp"
      android:layout_marginLeft="10dp"
      android:textAppearance="?android:attr/textAppearanceSmall"/>

  <TextView
      android:id="@+id/textView5"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_alignLeft="@+id/textView4"
      android:layout_below="@+id/txtEmail"
      android:layout_marginTop="10dp"
      android:textStyle="bold"
      android:text="Contact Number"
      android:textAppearance="?android:attr/textAppearanceMedium" />

  <TextView
      android:id="@+id/txtTel"
      android:layout_width="match_parent"
      android:layout_height="wrap_content"
      android:layout_alignParentRight="true"
      android:layout_below="@+id/textView5"
      android:hint="Your Mobile Number"
      android:layout_marginTop="1dp"
      android:layout_marginLeft="10dp"
      android:maxLines="1"
      android:textAppearance="?android:attr/textAppearanceSmall" />

  <TextView
      android:id="@+id/textView6"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_alignLeft="@+id/textView5"
      android:layout_below="@+id/txtTel"
      android:layout_marginTop="10dp"
      android:text="Shipping Address"
      android:textStyle="bold"
      android:textAppearance="?android:attr/textAppearanceMedium" />

  <TextView
      android:id="@+id/txtAddress"
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:layout_alignParentLeft="true"
      android:layout_below="@+id/textView6"
      android:gravity="top"
      android:hint="Your Address Here"
      android:inputType="textMultiLine"
      android:layout_marginTop="1dp"
      android:maxLines="3"
      android:layout_marginRight="10dp"
      android:layout_marginLeft="10dp"
      android:textAppearance="?android:attr/textAppearanceSmall" />

 </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T05:43:29.133

`R.id.buttonSubmit`转到`R.id.btnSubmit`第 127 行，您可以在其中按 ID 搜索按钮。您在 XML 中：

```
 android:id="@+id/btnSubmit" 
```

您的程序正在寻找`buttonSubmit`in `findViewById`，但您已将其命名为`btnSubmit`。因此，您的 ImageButton 变为 null，并调用 NullPointerException。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T05:45:57.337

您没有在 activity_detail.xml 上声明**R.id.buttonSubmit**更改 xml 布局，如下所示：

```
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <include
    android:id="@+id/header"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    layout="@layout/header_checkout" />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/textView1"
        android:layout_alignBottom="@+id/textView1"
        android:layout_marginLeft="46dp"
        android:layout_toRightOf="@+id/textView1"
        android:text="$"
        android:layout_marginBottom="20dp"
        android:textStyle="bold"
        android:textAppearance="?android:attr/textAppearanceLarge" />

  <RadioGroup
      android:id="@+id/radioPayMode"
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:layout_alignBottom="@+id/radioUser"
      android:layout_alignParentRight="true"
      android:layout_below="@+id/textView1"
      android:layout_toRightOf="@+id/radioUser"
      android:background="@color/test4"
      android:layout_marginTop="20dp"
      android:orientation="horizontal" >

      <RadioButton
          android:id="@+id/radioCashOnDelivery"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:layout_marginTop="8dp"
          android:checked="true"
          android:textStyle="italic"
          android:text="Cash On Delivery"
          android:layout_marginRight="2dp" />

      <RadioButton
          android:id="@+id/radioCreditCard"
          android:layout_width="wrap_content"
          android:layout_height="match_parent"
          android:layout_marginTop="8dp"
          android:textStyle="italic"
          android:text="Credit Card" />

  </RadioGroup>

  <TextView
      android:id="@+id/textView1"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_below="@+id/header"
      android:layout_marginTop="10dp"
      android:text="Amount to Pay:"
      android:layout_marginLeft="10dp"
      android:textAppearance="?android:attr/textAppearanceLarge"
      android:textStyle="italic" />

  <TextView
      android:id="@+id/total"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_above="@+id/radioPayMode"
      android:layout_toRightOf="@+id/textView2"
      android:text="0"
      android:layout_marginLeft="2dp"
      android:textAppearance="?android:attr/textAppearanceLarge" />

  <ImageButton
      android:id="@+id/buttonSubmit"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_alignParentBottom="true"
      android:layout_alignRight="@+id/textView2"
      android:layout_marginBottom="22dp"
      android:background="@drawable/place_button" />

  <TextView
      android:id="@+id/textView3"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_alignParentLeft="true"
      android:layout_below="@+id/radioPayMode"
      android:text="Name"
      android:layout_marginTop="10dp"
      android:textStyle="bold"
      android:layout_marginLeft="5dp"
      android:textAppearance="?android:attr/textAppearanceMedium" />

  <TextView
      android:id="@+id/textView4"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_alignParentLeft="true"
      android:layout_below="@+id/txtName"
      android:layout_marginTop="10dp"
      android:textStyle="bold"
      android:layout_marginLeft="5dp"
      android:text="Email ID"
      android:textAppearance="?android:attr/textAppearanceMedium" />

  <TextView
      android:id="@+id/txtName"
      android:layout_width="match_parent"
      android:layout_height="wrap_content"
      android:layout_alignParentLeft="true"
      android:layout_below="@+id/textView3"
      android:hint="Your Name Here"
      android:maxLines="1"
      android:layout_marginTop="1dp"
      android:layout_marginLeft="10dp"
      android:textAppearance="?android:attr/textAppearanceSmall"  />

  <TextView
      android:id="@+id/txtEmail"
      android:layout_width="match_parent"
      android:layout_height="wrap_content"
      android:layout_alignParentLeft="true"
      android:layout_centerVertical="true"
      android:hint="Your Email Here"
      android:layout_below="@+id/textView4"
      android:maxLines="1"
      android:layout_marginTop="1dp"
      android:layout_marginLeft="10dp"
      android:textAppearance="?android:attr/textAppearanceSmall"/>

  <TextView
      android:id="@+id/textView5"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_alignLeft="@+id/textView4"
      android:layout_below="@+id/txtEmail"
      android:layout_marginTop="10dp"
      android:textStyle="bold"
      android:text="Contact Number"
      android:textAppearance="?android:attr/textAppearanceMedium" />

  <TextView
      android:id="@+id/txtTel"
      android:layout_width="match_parent"
      android:layout_height="wrap_content"
      android:layout_alignParentRight="true"
      android:layout_below="@+id/textView5"
      android:hint="Your Mobile Number"
      android:layout_marginTop="1dp"
      android:layout_marginLeft="10dp"
      android:maxLines="1"
      android:textAppearance="?android:attr/textAppearanceSmall" />

  <TextView
      android:id="@+id/textView6"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_alignLeft="@+id/textView5"
      android:layout_below="@+id/txtTel"
      android:layout_marginTop="10dp"
      android:text="Shipping Address"
      android:textStyle="bold"
      android:textAppearance="?android:attr/textAppearanceMedium" />

  <TextView
      android:id="@+id/txtAddress"
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:layout_alignParentLeft="true"
      android:layout_below="@+id/textView6"
      android:gravity="top"
      android:hint="Your Address Here"
      android:inputType="textMultiLine"
      android:layout_marginTop="1dp"
      android:maxLines="3"
      android:layout_marginRight="10dp"
      android:layout_marginLeft="10dp"
      android:textAppearance="?android:attr/textAppearanceSmall" />

 </RelativeLayout> 
```

# android - android中电子邮件中的“阅读消息”报告

> ID：15963830
> 
> 赞同：0
> 
> 时间：2013-04-12T05:37:16.540
> 
> 标签：android, email, client

我正在android中创建一个电子邮件客户端。我想在收件人端打开我的电子邮件时收到报告。例如。在 Outlook 中，我们有一个阅读消息请求，如果我们使用此选项，将通知发件人有关在接收者端打开的消息。我使用来自 github 的 eclient 应用程序开始。我想在报道方面变得强大。任何帮助，将不胜感激..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T06:15:18.123

您需要在两端安装该应用程序。否则无法知道-您需要能够在收件人的计算机上运行程序。这就是为什么我认识的每个人都停止尝试在 Outlook 中阅读回执的原因——如果收件人使用任何其他邮件阅读器，它就不会发送任何内容。鉴于所有可能的电子邮件收件人极不可能发生这种情况，如果您处于锁定的公司环境中，只有您的应用程序被允许在任何设备上访问电子邮件，这才有意义。

# amazon-web-services - 从 amazon dynamodb 中删除

> ID：15963833
> 
> 赞同：20
> 
> 时间：2013-04-12T05:37:20.117
> 
> 标签：amazon-web-services, amazon-dynamodb

有没有什么有效的方法可以一次从 amazon dynamodb tabe 中删除所有项目。我已经浏览了 aws 文档，但显示删除了单个项目。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-09-23T12:05:05.090

执行以下步骤：

1.  发出删除表请求
2.  在响应中，您将获得 TableDescription
3.  使用 TableDescription 再次创建表。

[对于第 1 步和第 2 步，请单击此处](http://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API_DeleteTable.html)

[对于第 3 步，请单击此处](http://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API_CreateTable.html)

这就是我在我的应用程序中所做的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-01-09T12:51:18.267

DynamoDBMapper 将在几行内完成这项工作：

```
AWSCredentials credentials = new PropertiesCredentials(credentialFile);
client = new AmazonDynamoDBClient(credentials);
DynamoDBMapper mapper = new DynamoDBMapper(this.client);
DynamoDBScanExpression scanExpression = new DynamoDBScanExpression();
PaginatedScanList<LogData> result = mapper.scan(LogData.class,  scanExpression);
for (LogData data : result) {
    mapper.delete(data);
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-11-14T16:14:56.107

正如 ihtsham 所说，最有效的方法是删除并重新创建表。但是，如果这不切实际（例如，由于表的复杂配置，例如 Lambda 触发器），这里有一些 AWS CLI 命令可以删除所有记录。他们需要[`jq`](https://stedolan.github.io/jq/)JSON 处理程序。

一个接一个地删除记录（慢！），假设你的表被调用`my_table`，你的分区键被调用`partition_key`，你的排序键（如果有的话）被调用`sort_key`：

```
aws dynamodb scan --table-name my_table | \
  jq -c '.Items[] | { partition_key, sort_key }' | \
  tr '\n' '\0' | \
  xargs -0 -n1 -t aws dynamodb delete-item --table-name my_table --key 
```

批量删除记录，最多 25 条记录：

```
aws dynamodb scan --table-name my_table | \
  jq -c '[.Items | keys[] as $i | { index: $i, value: .[$i]}] | group_by(.index / 25 | floor)[] | { "my_table": [.[].value | { "DeleteRequest": { "Key": { partition_key, sort_key }}}] }' | \
  tr '\n' '\0' | \
  xargs -0 -n1 -t aws dynamodb batch-write-item --request-items 
```

如果您开始看到非空`UnprocessedItems`响应，则说明您的写入容量已超出。您可以通过减少批量大小来解决此问题。对我来说，每个批次大约需要一秒钟的时间来提交，因此每秒写入容量为 5，我将批次大小设置为 5。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-01-21T13:33:00.917

**仅作记录，在Python 3**中逐项删除的快速解决方案（使用*Boto3*和*scan()*）：（需要设置[凭据。）](http://boto3.readthedocs.org/en/latest/guide/quickstart.html#configuration)

```
def delete_all_items(table_name):
    # Deletes all items from a DynamoDB table.
    # You need to confirm your intention by pressing Enter.
    import boto3
    client = boto3.client('dynamodb')
    dynamodb = boto3.resource('dynamodb')
    table = dynamodb.Table(table_name)
    response = client.describe_table(TableName=table_name)
    keys = [k['AttributeName'] for k in response['Table']['KeySchema']]
    response = table.scan()
    items = response['Items']
    number_of_items = len(items)
    if number_of_items == 0:  # no items to delete
        print("Table '{}' is empty.".format(table_name))
        return
    print("You are about to delete all ({}) items from table '{}'."
          .format(number_of_items, table_name))
    input("Press Enter to continue...")
    with table.batch_writer() as batch:
        for item in items:
            key_dict = {k: item[k] for k in keys}
            print("Deleting " + str(item) + "...")
            batch.delete_item(Key=key_dict)

delete_all_items("test_table") 
```

显然，这不应该用于有**很多 items**的表。(100+) 为此，删除/重新创建方法更便宜、更有效。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-04-13T16:09:45.150

如果您不能删除表格，您将需要使用[BatchWriteItem 。](http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/API_BatchWriteItem.html)如果您的所有条目都在一个 HashKey 中，您可以使用 Query API 检索记录，然后一次删除 25 个条目。如果没有，您可能必须扫描。

或者，您可以提供一个简单的包装器`AmazonDynamoDBClient`（来自官方 SDK），它收集表中存在的一组哈希/范围键。然后，您不需要查询或扫描您在测试后插入的项目，因为您已经构建了 Set。看起来像这样：

```
public class KeyCollectingAmazonDynamoDB implements AmazonDynamoDB
{
    private final AmazonDynamoDB delegate;
    // HashRangePair is something you have to define
    private final Set<Key> contents;

    public InsertGatheringAmazonDynamoDB( AmazonDynamoDB delegate )
    {
        this.delegate = delegate;
        this.contents = new HashSet<>();
    }

    @Override
    public PutItemResult putItem( PutItemRequest putItemRequest )
            throws AmazonServiceException, AmazonClientException
    {
        contents.add( extractKey( putItemRequest.getItem() ) );
        return delegate.putItem( putItemRequest );
    }

    private Key extractKey( Map<String, AttributeValue> item )
    {
        // TODO Define your hash/range key extraction here
        // Create a Key object
        return new Key( hashKey, rangeKey );
    }

    @Override
    public DeleteItemResult deleteItem( DeleteItemRequest deleteItemRequest )
            throws AmazonServiceException, AmazonClientException
    {
        contents.remove( deleteItemRequest.getKey() );
        return delegate.deleteItem( deleteItemRequest );
    }

    @Override
    public BatchWriteItemResult batchWriteItem( BatchWriteItemRequest batchWriteItemRequest )
            throws AmazonServiceException, AmazonClientException
    {
        // Similar extraction, but in bulk.
        for ( Map.Entry<String, List<WriteRequest>> entry : batchWriteItemRequest.getRequestItems().entrySet() )
        {
            String tableName = entry.getKey();
            List<WriteRequest> writeRequests = entry.getValue();
            for ( WriteRequest writeRequest : writeRequests )
            {
                PutRequest putRequest = writeRequest.getPutRequest();
                if ( putRequest != null )
                {
                    // Add to Set just like putItem
                }
                DeleteRequest deleteRequest = writeRequest.getDeleteRequest();
                if ( deleteRequest != null )
                {
                    // Remove from Set just like deleteItem
                }
            }
        }

        // Write through to DynamoDB
        return delegate.batchWriteItem( batchWriteItemRequest );
    }

    // remaining methods elided, since they're direct delegation
} 
```

`Key`是[DynamoDB SDK](http://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/index.html)中的一个类，它在构造函数中接受零个、一个或两个`AttributeValue`对象来表示哈希键或哈希/范围键。假设它`equals`和`hashCode`方法有效，您可以在`Set`我描述的范围内使用。如果他们不这样做，您将不得不编写自己的`Key`课程。

这应该为您提供一个维护的 Set 以在您的测试中使用。它不是特定于表的，因此如果您使用多个表，则可能需要添加另一层集合。那会变成`Set<Key>`类似`Map<TableName, Set<Key>>`. 您需要查看`getTableName()`属性以选择正确`Set`的更新。

测试完成后，获取表的内容并删除应该很简单。

最后一个建议：使用与应用程序不同的表进行测试。创建一个相同的模式，但给表一个不同的名称。您甚至可能需要不同的 IAM 用户来阻止您的测试代码访问您的生产表。如果您对此有任何疑问，请随时针对该场景打开一个单独的问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-08-23T16:34:21.863

您可以使用 AWS Java 开发工具包重新创建 DynamoDB 表

```
// Init DynamoDB client
AmazonDynamoDB dynamoDB = AmazonDynamoDBClientBuilder.standard().build();

// Get table definition
TableDescription tableDescription = dynamoDB.describeTable("my-table").getTable();

// Delete table
dynamoDB.deleteTable("my-table");

// Create table
CreateTableRequest createTableRequest = new CreateTableRequest()
        .withTableName(tableDescription.getTableName())
        .withAttributeDefinitions(tableDescription.getAttributeDefinitions())
        .withProvisionedThroughput(new ProvisionedThroughput()
                .withReadCapacityUnits(tableDescription.getProvisionedThroughput().getReadCapacityUnits())
                .withWriteCapacityUnits(tableDescription.getProvisionedThroughput().getWriteCapacityUnits())
        )
        .withKeySchema(tableDescription.getKeySchema());

dynamoDB.createTable(createTableRequest); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-01-19T23:48:14.830

我使用以下 javascript 代码来执行此操作：

```
async function truncate(table, keys) {

    const limit = (await db.describeTable({
        TableName: table
    }).promise()).Table.ProvisionedThroughput.ReadCapacityUnits;

    let total = 0;
    let lastEvaluatedKey = null;
    do {
        const qp = {
            TableName: table,
            Limit: limit,
            ExclusiveStartKey: lastEvaluatedKey,
            ProjectionExpression: keys.join(' '),
        };

        const qr = await ddb.scan(qp).promise();

        lastEvaluatedKey = qr.LastEvaluatedKey;

        const dp = {
            RequestItems: {
            },
        };

        dp.RequestItems[table] = [];

        if (qr.Items) {
            for (const i of qr.Items) {
                const dr = {
                    DeleteRequest: {
                        Key: {
                        }
                    }
                };

                keys.forEach(k => {
                    dr.DeleteRequest.Key[k] = i[k];
                });

                dp.RequestItems[table].push(dr);

                if (dp.RequestItems[table].length % 25 == 0) {
                    await ddb.batchWrite(dp).promise();
                    total += dp.RequestItems[table].length;
                    dp.RequestItems[table] = [];
                }
            }
            if (dp.RequestItems[table].length > 0) {
                await ddb.batchWrite(dp).promise();
                total += dp.RequestItems[table].length;
                dp.RequestItems[table] = [];
            }
        }

        console.log(`Deleted ${total}`);

        setTimeout(() => {}, 1000);

    } while (lastEvaluatedKey);
}

(async () => {
    truncate('table_name', ['id']);
})(); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-01-16T11:57:14.420

在这种情况下，您可以删除该表并创建一个新表。

例子：

```
from __future__ import print_function # Python 2/3 compatibility
import boto3

dynamodb = boto3.resource('dynamodb', region_name='us-west-2', endpoint_url="http://localhost:8000")

table = dynamodb.Table('Movies')

table.delete() 
```

# ipad - 在 Mac 中保存文档目录数据

> ID：15963835
> 
> 赞同：2
> 
> 时间：2013-04-12T05:37:21.863
> 
> 标签：ipad, icloud, nsdocumentdirectory

我有一个应用程序，其中大量数据保存在应用程序的文档目录中，以便以后发送到 Web 服务。这种保存在文档中的目的是为了离线访问应用程序，因为当时数据不会发送到 Web 服务。我的客户在离线模式下创建了数百个项目，现在他无法同步它们。我们无法找到未同步的问题。但主要任务是防止数据丢失。如果他删除了应用程序。该数据将丢失。

有什么方法可以让我将他的应用文档数据与 iCloud 或 iTunes 应用同步同步。任何帮助表示赞赏。

# python - XmlItemExporter 如何工作（在scrapy中）？

> ID：15963836
> 
> 赞同：0
> 
> 时间：2013-04-12T05:37:28.757
> 
> 标签：python, scrapy

它是否以与抓取它们相同的顺序将项目保存到 XML 文件中？

将项目添加到 xml 文件的顺序是什么？

先入 - 在底部或先入 - 在 xml 文件的顶部？

我无法获得所需的订单 - 就像

```
10
1
2
3
4
5
6
7
8
9 
```

:(（我假设它以与抓取它们相同的顺序将项目保存到 XML 文件中......）

# c++ - 选择 OpenGL 范围元素 GL_ELEMENT_ARRAY_BUFFER

> ID：15963842
> 
> 赞同：0
> 
> 时间：2013-04-12T05:38:10.683
> 
> 标签：c++, opengl

我在 vbo 1 中将交错数组作为 GL_ARRAY_BUFFER (Vertex|Normals|Textures)，有一些纹理要应用于它们。

我有向量数组包含要应用纹理的面的开始和结束，即。面 50 到 3000 应用纹理 1 面 3001 到 5000 应用纹理 2

如何为每个纹理构建 GL_ELEMENT_ARRAY_BUFFER 索引数组并保持相同的 ARRAY_BUFFER？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T05:42:29.597

```
std::vector<unsigned int> indices;
// fill "indices" as needed
    // Generate a buffer for the indices
GLuint elementbuffer;
glGenBuffers(1, &elementbuffer);
glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, elementbuffer);
glBufferData(GL_ELEMENT_ARRAY_BUFFER, indices.size() * sizeof(unsigned int), &indices[0], GL_STATIC_DRAW); 
```

# java - 如何通过给定的消息类型名称和原始字节获取 Java 对象的 protobuf？

> ID：15963854
> 
> 赞同：3
> 
> 时间：2013-04-12T05:39:12.247
> 
> 标签：java, protocol-buffers

我有字符串和原始字节中的消息类型名称。如何通过这些材料创建 java 对象？b.proto

```
pakage foo;
message Bar {
 required int32 id = 1;
 required string name = 2;
} 
```

TestMain.java

```
foo.Bar bar = foo.Bar.newBuilder()
.setId(1).setName("foobar").build();
byte[] rawbytes = bar.toByteArray();
String typeName = bar.getDescriptorForType().getFullName();

foo.Bar b = (foo.Bar) howTo(rawbyte, typeName); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T05:58:01.330

正如我在评论中所说，这对我来说似乎完全没有意义，但您可以轻松地使用反射：

```
public static Object parseDynamic(String type, byte[] bytes) {
    try {
        Class<?> clazz = Class.forName(type);
        Method method = clazz.getDeclaredMethod("parseFrom", byte[].class);
        return method.invoke(null, bytes);
    } catch (NoSuchMethodException e) {
        throw new IllegalArgumentException("Non-message type", e);
    } catch (IllegalAccessException e) {
        throw new IllegalArgumentException("Non-message type", e);
    } catch (InvocationTargetException e) {
        // TODO: Work out what exactly you want to do.
        throw new IllegalArgumentException("Bad data?", e);
    }
} 
```

# python - 感知器单层

> ID：15963858
> 
> 赞同：0
> 
> 时间：2013-04-12T05:39:20.693
> 
> 标签：python, perceptron

我正在努力实现一个单层感知器：[http](http://en.wikipedia.org/wiki/Perceptron) ://en.wikipedia.org/wiki/Perceptron 。根据权重，我的程序要么在学习循环中丢失，要么找到错误的权重。作为测试用例，我使用逻辑 AND。你能告诉我为什么我的感知器不收敛吗？这是为了我自己的学习。谢谢。

```
# learning rate
rate = 0.1

# Test data
# logical AND
# vector = (bias, coordinate1, coordinate2, targetedresult)

testdata = [[1, 0, 0, 0], [1, 0, 1, 0], [1, 1, 0, 0], [1, 1, 1, 1]]

# initial weigths
import random
w = [random.random(), random.random(), random.random()]
print 'initial weigths = ', w

def test(w, vector):
    if diff(w, vector) <= 0.1:
        return True
    else:
        return False

def diff(w, vector):
    from copy import deepcopy
    we = deepcopy(w)
    return dirac(sum(we[i]*vector[i] for i in range(3))) - vector[3]

def improve(w, vector):
    for i in range(3):
        w[i] += rate*diff(w, vector)*vector[i]
    return w

def dirac(z):
    if z > 0:
        return 1
    else:
        return 0

error = True

while error == True:
    discrepancy = 0
    for x in testdata:
        if not test(w, x):
            w = improve(w, x)
            discrepancy += 1
    if discrepancy == 0:
        print 'improved weigths = ', w
        error = False 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T08:36:38.863

看起来您需要一个围绕 for 循环的额外循环来迭代改进，直到您的解决方案收敛（您链接的维基百科页面中的第 3 步）。

就目前而言，您只给每个训练案例一次更新权重的机会，因此它没有机会收敛。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T11:06:22.877

1.  我能看到的唯一故障是激活函数。增加截止值，`(z > 0.5)`。
2.  此外，由于每个 epoch 只有 4 个输入案例，因此很难将 0 和 1 作为唯一输出。尝试移除 dirac 函数并将阈值增加到 0.2。学习可能需要更长的时间，但会更精确。当然，在 NAND 的情况下，你真的不需要。但它有助于理解。

# python - 有没有使用 Mongodb 和 django 的明确方法？

> ID：15963861
> 
> 赞同：1
> 
> 时间：2013-04-12T05:39:49.017
> 
> 标签：python, django, mongodb

并保留 Django 提供的所有（或更多）资源，例如：

*   ModelForms-like 用于动态模式，
*   甲骨文，
    *   查询，
    *   节省，
    *   更新，
*   行政，
*   权限
*   用户，
*   团体。

提前考虑=D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T05:45:29.973

These links should help you -

1.  [https://stackoverflow.com/questions/1972480/has-anybody-actually-used-django-mongodb](https://stackoverflow.com/questions/1972480/has-anybody-actually-used-django-mongodb)
2.  [Writing a Tumblelog application with django & mongodb](http://docs.mongodb.org/manual/tutorial/write-a-tumblelog-application-with-django-mongodb-engine/)
3.  [Django & Mongodb](http://www.ibm.com/developerworks/opensource/library/os-django-mongo/)

I think the 2nd link should help you most.

# java - 将值从 JSP 传递到速度模板

> ID：15963863
> 
> 赞同：0
> 
> 时间：2013-04-12T05:39:54.677
> 
> 标签：java, jsp, velocity, xwiki

谁能告诉我如何将值从 JSP 文件传递​​到速度模板。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T08:11:57.923

也许你应该尝试让一些简单的工作。考虑一个简单的动态 Web 项目，其 jsp 如下所示：

 `````
<%@page import="java.io.File"%>
<%@page import="org.apache.velocity.runtime.resource.loader.ClasspathResourceLoader"%>
<%@page import="org.apache.velocity.runtime.RuntimeConstants"%>
<%@page import="java.io.StringWriter"%>
<%@page import="org.apache.velocity.VelocityContext"%>
<%@page import="org.apache.velocity.Template"%>
<%@page import="org.apache.velocity.app.VelocityEngine"%>
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<body>

<%
     String s = request.getParameter("test");
    VelocityEngine velocityEngine = new VelocityEngine();
    velocityEngine.setProperty(RuntimeConstants.FILE_RESOURCE_LOADER_PATH, "/");

    velocityEngine.init();
    Template t = velocityEngine.getTemplate("/template.vm");
    VelocityContext context = new VelocityContext();
    context.put("example",
            s);
    StringWriter w = new StringWriter();
    t.merge(context, w); 

%>
<p><%out.println(w.getBuffer().toString());  %> </p>
 </body>
</html> 
````  `它只是从您的服务器的根目录加载一个模板，并使用 GET/POST 参数在当前站点中将其打印出来。

在项目的 WEB-INF/lib 文件夹中，放置velocity.jar、common-collections.jar 和common-lang.jar。重要提示：在您的服务器根目录中，您可以使用以下模板放置一个简单的文本文件 template.vm

 `````
 <b>Test $example<b> 
````  `你也可以有一个模板目录或类似的东西，但我会告诉你什么时候你想用 webapp 部署你的模板（例如从 WEB-INF 目录加载 vm-files）-> 这是一个挑战！

用 yourproject/example.jsp?test=getparamh 加载它，我确信它可以工作

但是，如果你尝试这个 - 承认 - 简单的例子，它应该可以工作，你也许可以从中得出你的目标。````

# ios - 放大在嵌套 UITableView 中识别水平滑动的滑动角度

> ID：15963865
> 
> 赞同：3
> 
> 时间：2013-04-12T05:40:07.457
> 
> 标签：ios, uitableview, uiscrollview, scroll-paging

我正在尝试在 iOS 中构建一个 UI，其中有一个外部分页 UIScrollView，其中有多个 UITableView，每个 UITableView 代表一个页面。我遇到的问题是我必须滑动以触发外部分页UIScrollView水平滚动的角度太窄。这是显示我的意思的屏幕截图。

![在此处输入图像描述](https://i.stack.imgur.com/uT2sd.png)

本质上，用户必须以近乎完美的水平角度滑动，以便 UITableView 忽略手势并将其传递给外部 UIScrollView，从而触发水平页面移动。这种行为很快就会变得烦人。

我对堆栈进行了广泛的研究，但无济于事。有些人建议设置[directionalLockEnabled](https://stackoverflow.com/questions/728014/uiscrollview-paging-horizontally-scrolling-vertically)，但这在这里没有效果（内部 UITableView 的方向被锁定，它解释为在它的方向上的角度太贪心了）。其他人建议修改 contentSize，但实际上视图的 contentSize 是正确的。还有一些人建议使用手势识别器，但这些似乎在启动之前有延迟。

谁能建议如何完成上图中的行为？

# linux-kernel - Kconfig 文件代表什么？

> ID：15963868
> 
> 赞同：1
> 
> 时间：2013-04-12T05:40:49.080
> 
> 标签：linux-kernel, linux-device-driver, embedded-linux, archlinux

我为串行通信编写了一个驱动程序。现在我想将它添加到我的`linux kernel`. 所以为此我必须`Kconfig`更改`drivers/usb/serial`. 我已经在其中重新`Kconfig`提交了文件。但我不明白 config、tristate 等后面写的名字。

这些名字说明了什么？它们属于或链接在哪里（我在那个专用词中找不到那个特定的名字）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T20:31:29.380

*您在三态*之后写的名称（并不总是三态）只是驱动程序的名称。要查看它，请尝试使用：

```
make ARCH=ARM menuconfig 
```

进入：

```
 -> Device Drivers
         -> Character devices
             -> Serial drivers 
```

在这里您可以看到与PL011 驱动程序关联的名称*ARM AMBA PL010 serial port support*

# drupal-7 - 如何创建 hook_ds_fields_info()？

> ID：15963878
> 
> 赞同：1
> 
> 时间：2013-04-12T05:41:36.967
> 
> 标签：drupal-7

我想在 drupal7 中使用显示套件添加一些自定义字段，为此我想使用 hook_ds_fields_info()。我只知道这方面的基础知识。不知道如何为此创建钩子。我需要创建一个不同的文件并调用该函数吗？

# asp.net - 在 href 中，从后面的代码绑定时 ~ 不起作用

> ID：15963882
> 
> 赞同：1
> 
> 时间：2013-04-12T05:41:50.360
> 
> 标签：asp.net

从后面的代码绑定 href 标记时不起作用。这是我的 aspx 代码。当我直接将`<a>`标签放在 aspx 上时，它正在工作，而当我通过 Response.write 进行操作时，它正在读取〜而不是根目录。

```
<% Response.Write("<a id=\"A1\" runat=\"server\" class=\"menuItem\" href=\"~/HR/Emp/EmpDetails.aspx?mid=167\">My PIPs</a> "); %> 

<a id="A1" runat="server" class="menuItem" href="~/HR/Emp/EmpDetails.aspx?mid=167">My PIPs</a> 
```

通过文字绑定也不起作用

```
Literal.text = "<a id=\"A1\" runat=\"server\" class=\"menuItem\" href=\"~/HR/Emp/EmpDetails.aspx?mid=167\">My PIPs</a> "; 
```

请帮助解决这个问题。

```
these are the HTML tags
<ul id="jMenu">
    <li>
      <a  runat="server" class="fNiv" href="~\Default.aspx?mid=1&">Home</a> 
      </li>
    <li>
      <a  runat="server" class="fNiv" href="">Human Resources</a> 
    <ul>
      <li class="arrow" /> 
       <li>
      <a runat="server" class="menuItem" href="~\HR\EMP\PIPWorkFlow.aspx?mid=166">Performance Improvement Plan (PIP)</a> 
    <ul>
    <li>
      <a runat="server" class="menuItem" href="~\HR\EMP\PIPWorkFlow.aspx?mid=171">Data Protection Statement</a> 
      </li>
    <li>
      <a runat="server" class="menuItem" href="~\HR\EMP\EmpPIPDetails.aspx?mid=167">My PIPs</a> 
      </li>
    <li>
      <a runat="server" class="menuItem" href="~\HR\EMP\PIPHome.aspx?mid=168">Team PIPs</a> 
      </li>
    <li>
      <a runat="server" class="menuItem" href="~\HR\EMP\HRPIPHistory.aspx?mid=169">Employee PIPs</a> 
      </li>
    <li>
      <a runat="server" class="menuItem" href="~\HR\EMP\AppraisalRatingUpload.aspx?mid=170">Upload Appraisal Ratings</a> 
      </li>
    <li>
      <a runat="server" class="menuItem" href="~\HR\EMP\PIPRoleAssignment.aspx?mid=472">PIP Spoc Role Assignment</a> 
      </li>
      </ul>
      </li>
      </ul>
      </li>
    <li>
      <a runat="server" class="fNiv" href="~\ContactUs.aspx?mid=39">Contact Us</a> 
      </li>
      </ul> 
```

这些是 html 标签...如果我们将这些标签与 Literal 或 div 或 TD 绑定...它们正在阅读 ~ 签名...如果我将这些标签直接放在 HTML 中，它工作得很好

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T05:46:20.363

`Response.Write`并`Literal.Text`输出您给他们的任何内容，无需处理。

这意味着您提供这些方法/属性的任何内容都将逐字输出。不会发生 URL 解析，并且该`runat=server`属性没有意义。

您可以使用该[`Control.ResolveClientUrl()`方法](http://msdn.microsoft.com/en-us/library/system.web.ui.control.resolveclienturl.aspx)自己生成链接，或者在代码隐藏中将链接作为服务器控件进行操作。

**选项1**

```
// this line is fine
string url = ResolveClientUrl("~/some-url/foo.aspx");

// this line is quite ugly, but should work
var lit = new Literal { Text = "<a href='" + url + "'>a link</a>" };

// add it the page/control's control hierarchy
this.Controls.Add( lit ); 
```

**选项 2**

```
// instantiate the control dynamically
// URL resolution is done automatically
var lnk = new HtmlAnchor { HRef = "~/some-url/foo.aspx" };

// add it the page/control's control hierarchy
this.Controls.Add( lnk ); 
```

**选项 3**

假设您必须处理一个字符串，而不是控制层次结构（根据评论）。这并不理想，但如果字符串中的 URL 是相对于应用程序根的，则有可能。

```
// resolve the application root
string root = ResolveClientUrl("~/");

// string of raw HTML
string html = "<a href=\"~/HR/Emp/EmpDetails.aspx?mid=167\">My PIPs</a>";

// replace the urls with a resolved version
// this is very simplistic...a proper parser would be more reliable
html = html.Replace( "~/", root + "/" );

// output as desired
Response.Write( html ); 
```

# php - 逗号分隔的列表到具有php中值的对象数组

> ID：15963884
> 
> 赞同：0
> 
> 时间：2013-04-12T05:42:01.173
> 
> 标签：php, arrays

我基本上只是想从中得到：

```
$value="20, 40, 40" 
$color="blue, green, orange" 
```

对此：

```
var data = [ { value: 20, color:"blue" }, { value : 40, color : "green" }, { value : 40, color : "orange" }] 
```

所以我需要提取值和颜色并将它们添加到这个对象数组中。我知道如果只需要设置值，而不是使用explode和foreach设置颜色，我知道如何做到这一点，但我不知道如何在需要这两个值的情况下做到这一点。

任何想法都非常感谢。

谢谢，

大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T05:44:03.557

`explode` both arrays, use an index to iterate over both at once, using the values in both arrays at a given index to create the object/tuple/whatever, and as you make them store them in `data`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T05:48:38.293

做这个

```
$value="20, 40, 40"; 
$color="blue, green, orange";

$explVal = explode(",", $value);
$explCol = explode(",", $color);

$arr = array();

for ($i=0; $i<count($explVal); $i++)
{
    $arr[$i]['value'] = $explVal[$i];
    $arr[$i]['color'] = $explCol[$i];
} 
```

然后做

```
$result =     json_encode($arr); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T05:47:47.077

那么，每个值中是否总是会有相同数量的值？

```
$value="20, 40, 40";
$color="blue, green, orange";

$values = explode(", ",$value);
$colors = explode(", ",$color);

$output = 'var data = [ ';
for($i = 0; $i < count($values) &&  $i < count($colors); $i++){
  $output .= '{ value: '.$values[$i].', color:"'.$colors[$i].'" }, ';
}
$output = substr($output,0,-2);
$output .= ']';

echo $output; 
```

结果是：

`var data = [ { value: 20, color:"blue" }, { value: 40, color:"green" }, { value: 40, color:"orange" }]`

# android - 编写 NFC 标签，使其适用于 Android 和 Windows Phone8

> ID：15963887
> 
> 赞同：8
> 
> 时间：2013-04-12T05:42:09.210
> 
> 标签：android, windows, windows-phone-8, nfc, nfc-p2p

我正在寻找有关 NFC 数据的一些建议。

我有一个设备，比如说打印机或扬声器。我想在这个设备上放一个 NFC 标签。我想放入 NFC 标签的数据是 DeviceName/MacAddress/Password。

现在的要求是当用户使用 Android 或 Windows 手机触摸我的标签时

1.  我的应用程序应该启动。
2.  如果我的应用尚未安装，它应该将我带到 Play 商店或 Windows 商店
3.  我应该能够从我的应用程序中的 NFC 标签获取数据（设备名称/MacAddress/密码）

到目前为止，我可以使用 2 个 NDEF 记录在 Android 中完成它

1.  带有我的数据的自定义 MIME 类型记录 (application/vnd.pakage.name )
2.  Android 应用程序记录。

问题是如何在 Windows Phone 中启动应用程序？据我了解，自定义 Mime 应用程序/vnd.pakage.name Windows 应用程序无法启动。请。让我知道我是否错了。

Windows LaunchApp 记录应该是第一条记录，如果我将它作为第一条记录，那么在 Android 中我不会得到我的数据。

唯一看起来可能的解决方案是以下格式的 NDEF 记录。

1.  带有我的数据的自定义 URI (myscheme://my.package.com?DeviceName/MacAddress/Password)
2.  安卓应用记录。

但是使用这种格式我也无法在 Android 中获取数据。请。让我知道是否有更好的解决方案？如何在 Android 中获取数据？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T22:30:00.153

您对解决方案的最后建议应该有效。确保您的意图过滤器至少声明了方案和主机名。这篇文章可能也很有趣：[如何创建跨平台 LaunchApp NFC 标签](http://social.technet.microsoft.com/wiki/contents/articles/13955.how-to-create-cross-platform-launchapp-nfc-tags.aspx)。

# regex - perl 风格的正则表达式 - 获取管道句子中的第 n(4) 个单词 - a|b|c|d|e|f|g|h|i|j|k|n|o

> ID：15963888
> 
> 赞同：0
> 
> 时间：2013-04-12T05:42:12.500
> 
> 标签：regex, styles, pcre

我对 perl 风格的**正则表达式**非常陌生。有人可以建议我在管道句子中获得第**n 个单词吗？**

句子：

`ab|gf|fdg|hjtyt|ew|gf|jh|edf|gfd|fd|fd|jvf|df|ds|s|gf`

我想在这里**第四个字**：`hjtyt`

我正在使用一个工具，我只能放置 perl 样式的正则表达式，所以我只寻找一个正则表达式解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T05:49:12.003

我不会为此使用正则表达式。在 Python 中：

```
>>> s = "ab|gf|fdg|hjtyt|ew|gf|jh|edf|gfd|fd|fd|jvf|df|ds|s|gf"
>>> s.split("|")[3]
'hjtyt' 
```

但如果你坚持：

```
>>> import re
>>> re.search(r"^(?:[^|]*\|){3}([^|]*)", s).group(1)
'hjtyt' 
```

**解释：**

```
^       # Start of string
(?:     # Match...
 [^|]*  # Any number of characters except pipes,
 \|     # followed by a pipe,
){3}    # repeated three times.
(       # Match and capture into group number 1:
 [^|]*  # Any number of characters except pipes.
)       # End of capturing group number 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T07:04:16.923

在 perl 中使用[*自动拆分：*](http://perldoc.perl.org/AutoSplit.html)

```
> echo "ab|gf|fdg|hjtyt|ew|gf|jh" | perl -F"\|" -lane 'print $F[3]'
hjtyt
> 
```

# linux - 如果键盘上没有这样的键，如何输入 Numpad Enter？

> ID：15963894
> 
> 赞同：1
> 
> 时间：2013-04-12T05:42:51.393
> 
> 标签：linux, xorg, kde4

我正在使用一个古老的平台模拟器，所以有时我需要按`Numpad Enter`，但我的笔记本键盘没有这样做的选项。是否可以以某种方式模拟`Numpad Enter`密钥？我不介意解决方案是否笨拙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T21:24:05.423

您可以使用 xmodmap 重新映射键盘。例如，要将 F12 转换为小键盘输入，请使用以下命令：

```
xmodmap -e 'keycode 96 = KP_Enter' 
```

`xev`您可以通过启动并按下它们来找出键的键码。可以在[keysymdef.h](http://cgit.freedesktop.org/xorg/proto/xproto/tree/keysymdef.h)中找到可能的键符值列表。省略`XK_`前缀。数字键盘键以 . 开头`XK_KP_`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-18T08:39:15.130

我认为您的笔记本电脑有“fn”键和键上的小蓝色数字；7,8,9,u,i,o,j,k,l 和 m。这些是您的数字“键盘”，但如果不是...

在 KDE > YaST2 > 中有几个通常用于“其他”语言和辅助功能情况的屏幕键盘。Kvkbd 似乎默认安装在我的 openSuSE / KDE 系统上，因为我没有专门安装它。在 Kvkbd 的右边缘，有一个看起来像 << 箭头的东西，它将展开它并显示数字键盘。截图：kvkbd：

![在此处输入图像描述](https://i.stack.imgur.com/AzmEm.png)

Kicker >（在搜索中，键入）键盘，您应该会看到已安装的所有与键盘相关的应用程序的列表生成。如果没有，回到上面，YaST2 并安装一个。

# java - 如何检查双精度值是否没有小数部分

> ID：15963895
> 
> 赞同：86
> 
> 时间：2013-04-12T05:42:51.837
> 
> 标签：java, double

我有一个必须在我的 UI 上显示的双重值。现在的条件是 double = 0 的十进制值，例如。- 14.0 在这种情况下，我只需要在我的 UI 上显示 14。此外，此处的字符数上限为 5。

例如 - 12.34 整数值不能大于 2 位，我们的双精度值也是如此。

这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：264
> 
> 时间：2013-04-12T05:46:57.240

你可以简单地做

```
d % 1 == 0 
```

检查是否`double d`是一个整体。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-04-12T05:45:37.220

```
double d = 14.4;
if((d-(int)d)!=0)
    System.out.println("decimal value is there");
else
    System.out.println("decimal value is not there"); 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-04-12T05:58:12.340

所有整数都是 1 的模数。所以下面的检查必须给你答案。

```
if(d % 1 == 0) 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-04-12T05:46:32.300

either ceil and floor should give the same out out put

```
Math.ceil(x.y) == Math.floor(x.y) 
```

or simply check for equality with double value

```
x.y == Math.ceil(x.y)
x.y == Math.floor(x.y) 
```

or

```
Math.round(x.y) == x.y 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-12T05:45:18.750

Compare two values: the normal double, and the double after `floor`ing it. If they are the same value, there is no decimal component.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-12T06:32:34.273

在比较之前，您可能希望将双精度数舍入到小数点后 5 位左右，因为如果您使用它进行了一些计算，双精度数可能包含非常小的小数部分。

```
double d = 10.0;
d /= 3.0; // d should be something like 3.3333333333333333333333...
d *= 3.0; // d is probably something like 9.9999999999999999999999...

// d should be 10.0 again but it is not, so you have to use rounding before comparing

d = myRound(d, 5); // d is something like 10.00000
if (fmod(d, 1.0) == 0)
  // No decimals
else
  // Decimals 
```

如果您使用的是 C++，我认为没有圆形功能，因此您必须自己实现它，例如：[http ://www.cplusplus.com/forum/general/4011/](http://www.cplusplus.com/forum/general/4011/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-05-31T23:52:18.283

有趣的小问题。这有点棘手，因为实数并不总是代表精确的整数，即使它们是故意的，所以允许公差很重要。

例如容差可能是 1E-6，在单元测试中，我保持了一个相当粗的容差来获得更短的数字。

我现在可以阅读的答案都没有以这种方式工作，所以这是我的解决方案：

```
public boolean isInteger(double n, double tolerance) {
    double absN = Math.abs(n);
    return Math.abs(absN - Math.round(absN)) <= tolerance;
} 
```

和单元测试，以确保它有效：

```
@Test
public void checkIsInteger() {
    final double TOLERANCE = 1E-2;
    assertThat(solver.isInteger(1, TOLERANCE), is(true));

    assertThat(solver.isInteger(0.999, TOLERANCE), is(true));
    assertThat(solver.isInteger(0.9, TOLERANCE), is(false));

    assertThat(solver.isInteger(1.001, TOLERANCE), is(true));
    assertThat(solver.isInteger(1.1, TOLERANCE), is(false));

    assertThat(solver.isInteger(-1, TOLERANCE), is(true));

    assertThat(solver.isInteger(-0.999, TOLERANCE), is(true));
    assertThat(solver.isInteger(-0.9, TOLERANCE), is(false));

    assertThat(solver.isInteger(-1.001, TOLERANCE), is(true));        
    assertThat(solver.isInteger(-1.1, TOLERANCE), is(false));
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-12T05:46:36.103

根据需要使用数字格式化程序格式化值。请检查[这个](http://docs.oracle.com/javase/6/docs/api/java/text/DecimalFormat.html)。

# css - 无法将样式注册到开发工具

> ID：15963898
> 
> 赞同：0
> 
> 时间：2013-04-12T05:43:06.537
> 
> 标签：css, firefox, firefox-addon, firefox-developer-tools

我创建了一个测试扩展，以改变一些东西，并可能为 Firefox 内置的开发工具添加一些功能。

我设置了一个基本扩展，包含内容 css 和常用文件，以及 chrome.manifest：

```
content devtooltweaks   content/
style chrome://browser/content/devtools/framework/toolbox.xul chrome://devtooltweaks/content/devToolStyle.css 
```

虽然我可以转到“chrome://devtooltweaks/content/devToolStyle.css”并看到该文件存在于浏览器中，但 DOM 检查器没有显示应用的样式，我也看不到列出的样式表。我已经很久没有做扩展开发了，这里有没有我遗漏的步骤？还是不允许更改内置的开发工具，类似于[Chrome 中不允许的](https://stackoverflow.com/questions/12574305/chrome-plugin-permission-chrome-devtools-is-unknown-or-url-pattern-is-ma)方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T01:21:42.517

看起来样式已导入，但未在 DOM Inspector 中显示为样式表，我也可能没有使用`firefox -purgecaches`. 它现在正在工作。

# html - 如何将新行从 textarea 转换为 div？不替换为“ ”

> ID：15963901
> 
> 赞同：0
> 
> 时间：2013-04-12T05:43:08.223
> 
> 标签：html, replace, textarea, newline

如何将新行从 textarea 转换为 div？无法替换为，`<br>`因为我用 PHP、HTML、CSS 等代码编写文章，并且代码在`<pre>`和`</pre>`标签中。如果我用 替换新行`\r\n`，`<br>`也替换代码，那不好。

## 我的问题示例

我写信给`<textarea>`这个：

```
 <b>Strong Text</b>
    Normal text

    Code:
    <pre>
    <b>Strong text</b>
    Normal text
    </pre> 
```

现在，我需要`<div>`在 textarea 中显示内容的结果。**如果我替换** `\r\n`为`<br>`我得到了`<div>`这个：

```
 <b>Strong Text</b><br>
    Normal text<br>
    <br>
    Code:<br>
    <pre><br>
    <b>Strong text</b><br>
    Normal text<br>
    </pre> 
```

我必须将所有`<br>`-s 替换为`<pre>`with `\r\n`，而其他`<br>`-s **NOT REPLACE**

## 我需要得到这个`<div>`

```
 <b>Strong Text</b><br>
    Normal text<br>
    <br>
    Code:<br>
    <pre>\r\n
    <b>Strong text</b>\r\n
    Normal text\r\n
    </pre> 
```

`\r\n`= 新行

# android - 如何处理“JNI WARNING : 0x44f81e80 is not a valid JNI reference”

> ID：15963909
> 
> 赞同：2
> 
> 时间：2013-04-12T05:43:39.257
> 
> 标签：android, android-ndk, java-native-interface

我正面临崩溃

```
JNI WARNING : 0x44f81e80 is not a valid JNI reference, in Ldalvik/system/NativeStart;. run()v (GetObjectClass) 
```

我发现一些帖子说使用 NewWeakGlobalRef 而不是 NewGlobalRef。但我正在我的代码中寻找验证。我只想知道是否有任何`JNI`api 可以用来检查给定的参考是否`jobject`有效`JNI`？像未签名的东西

`char isValid = (env)IsValidJNIRef(myjobject);`

使用 isValid 的值，我可以设置一些条件来处理系统。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T21:50:15.367

您可以使用以下命令检查 obj 参数引用的作业对象的 ref 类型：

```
jobjectRefType GetObjectRefType(JNIEnv* env, jobject obj); 
```

它返回以下定义为 a 的枚举值之一`jobjectRefType`：

```
JNIInvalidRefType = 0,
JNILocalRefType = 1,
JNIGlobalRefType = 2,
JNIWeakGlobalRefType = 3 
```

请注意，您不能在已删除的 ref 上使用它 - 未指定`GetObjectRefType`将为已删除的 ref 返回什么值。

请参阅：[http ://docs.oracle.com/javase/7/docs/technotes/guides/jni/spec/functions.html#objreftype](http://docs.oracle.com/javase/7/docs/technotes/guides/jni/spec/functions.html#objreftype)

# asp.net - 在 Umbraco CMS 中发布之前如何查看内容？（内部说明）

> ID：15963919
> 
> 赞同：1
> 
> 时间：2013-04-12T05:44:08.837
> 
> 标签：asp.net, umbraco, umbraco-blog

我正在使用 umbraco CMS 并创建一个像博客这样的网站。包括我在内，有10名成员参与撰写文章，但我是需要检查文章的人。

所有 10 名成员都不在一个地方。我想知道的是，如果不是我以外的人在发布内容，我只想决定是否发布。有没有设置这种权限的选项。

有人会说我们可以在 umbraco CMS 中做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T08:12:34.323

是的，这是可以做到的。

在“用户”部分中，有一个名为的节点`User Types`，根据您的描述，它听起来`Writer`最适合您的成员。只需确保在创建/更新各自的用户节点时将它们设置为此用户类型。最值得注意的是，他们将拥有以下权限：

*   创造
*   更新
*   发送到发布

如果`Writer`不完全符合您的要求，或者您可以从头开始创建自己的用户类型，您可以从中选择许多其他权限。

# sql - Secure way to accept SQL query via form input

> ID：15963921
> 
> 赞同：0
> 
> 时间：2013-04-12T05:44:36.090
> 
> 标签：sql

So I'm about to create a simple site where users can input their own SQL queries, which I will be running on the server side.

I'm aware of SQL injection attacks and assume this could be fairly risky thing to do.

But (if there is any) what would be a safe way to allow this feature?

e.g. I can think of the following rules I can enforce.

*   Allow users to only "SELECT" - never allow UPDATE, DELETE (or anything else).
*   Allow users to only access certain tables (if I know them).

Are there any other security measures I should take?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T07:28:49.217

ElectricLlama 指出，除了安全问题外，性能可能也是一个问题。您可能希望提前获取查询的执行计划，如果查询看起来过于昂贵，则拒绝运行： [如何获得查询执行计划？](https://stackoverflow.com/questions/7359702/how-do-i-obtain-a-query-execution-plan)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-12T05:56:29.770

除上述内容外，请确保将用户添加到`db_datareader`组中，这将使它们成为只读的。我猜您将使用单个用户来执行该数据库操作。

如果用户不小心做了几个交叉连接，你仍然会导致数据库失败：

```
SELECT *
FROM Table1,Table2,Table3
WHERE Table1.Field1=Table2.Field2
-- Oops I forgot to enter the Table3 Join condition 
-- so now I get a cross join which will cause havoc
-- If the table is of appreciative size 
```

但无论如何，这仍然是有风险的！有人会发现一个安全漏洞！

# android - Changing Linear layout background color while clicking

> ID：15963922
> 
> 赞同：10
> 
> 时间：2013-04-12T05:44:36.533
> 
> 标签：android

I am having a linear layout in my xml and am adding another linear layout(containing two textviews) to that linear layout through java. Touch events works perfect, but i want to highlight the selected linear layout by setting background color. Please advice.

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-04-12T05:53:15.457

在drawable文件夹中定义background.xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item android:state_pressed="true" 
    android:drawable="@drawable/pressed" />
<item  android:state_focused="false" 
    android:drawable="@drawable/normal" />
</selector> 
```

可绘制文件夹中的 normal.xml

```
<?xml version="1.0" encoding="UTF-8"?> 
<shape xmlns:android="http://schemas.android.com/apk/res/android"> 
<solid android:color="#FFFFFF"/>    
</shape> 
```

可绘制文件夹中的pressed.xml

```
<?xml version="1.0" encoding="UTF-8"?> 
<shape xmlns:android="http://schemas.android.com/apk/res/android"> 
<solid android:color="#FF1A47"/>      
</shape> 
```

然后为您的布局设置背景

```
 android:background="@drawable/background" 
```

您还可以设置背景如下

触摸您的布局

```
 ll.setOnTouchListener( new View.OnTouchListener()
    {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            // TODO Auto-generated method stub
            switch(event.getAction())
            {
        case MotionEvent.ACTION_DOWN:
            ll.setBackgroundColor(Color.RED);
            break;
            case MotionEvent.ACTION_UP:

            //set color back to default
            ll.setBackgroundColor(Color.WHITE);  
            break;
            }
            return true;        
        }
    }); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-05-25T15:00:31.570

无论您选择哪种方法（XML/代码） - 确保您可以`LinearLayout`点击：

XML:

```
android:clickable="true" 
```

代码：

```
myLinearLayout.setClickable(true); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-09-14T08:03:24.117

这是我的解决方案，非常简单：

```
<LinearLayout
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:background="@drawable/bg_pressed_tab"
            android:clickable="true"
            android:focusable="true"
            android:focusableInTouchMode="true"
            android:gravity="center"
            android:orientation="vertical">

            <ImageView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:contentDescription="@string/app_name"
                android:src="@mipmap/ic_launcher" />

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/service_request"
                android:textColor="@color/white"
                android:textSize="@dimen/text_size_small" />

            <requestFocus />
        </LinearLayout> 
```

bg_tab_pressed.xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" android:exitFadeDuration="@android:integer/config_longAnimTime">

    <item android:drawable="@color/colorPrimaryDark" android:state_focused="true" android:state_pressed="true" />

    <item android:drawable="@color/colorPrimaryDark" android:state_focused="false" android:state_pressed="true" />

    <item android:drawable="@color/colorPrimaryDark" android:state_focused="true" android:state_pressed="false" />

    <item android:drawable="@color/colorPrimary" android:state_focused="false" android:state_pressed="false" />

</selector> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-12T05:49:51.830

将 selector.xml 文件放入可绘制文件夹（res/drawable）

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:drawable="@drawable/list_focused" android:state_pressed="true"/>
    <item android:drawable="@drawable/list_focused" android:state_enabled="true" android:state_focused="true" android:state_window_focused="true"/>
    <item android:drawable="@drawable/list_raw_img"/>

</selector> 
```

并在 xml 文件中设置线性布局的背景

```
android:background="@drawable/background" 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-03-18T13:34:44.380

以下方法将得到你想要的。甚至是 Lollipop 中的波纹动画。只需将上下文传递给视图（可以是线性布局）：

```
public static void setClickableAnimation(final Context context, final View view) {
    final int[] attrs = new int[]{R.attr.selectableItemBackground};
    final TypedArray typedArray = context.obtainStyledAttributes(attrs);
    final int backgroundResource = typedArray.getResourceId(0, 0);
    view.setBackgroundResource(backgroundResource);
    typedArray.recycle();
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-12T05:50:01.520

试试这个`View`功能`setBackgroundColor()`

请参阅 Android 文档：

[http://developer.android.com/reference/android/view/View.html#setBackgroundColor%28int%29](http://developer.android.com/reference/android/view/View.html#setBackgroundColor%28int%29)

```
public void setBackgroundColor (int color)       Added in API level 1
    Sets the background color for this view.
Parameters
    color   the color of the background 
```

# cassandra - How to fix data anomalies in Cassandra?

> ID：15963923
> 
> 赞同：0
> 
> 时间：2013-04-12T05:44:42.213
> 
> 标签：cassandra

To gain read performance, data model in Cassandra are denormalized to certain extend.

As denormalized produces duplicated record, how to avoid data anomalies?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T17:29:56.580

据我所知，可能有两种方法可以使您的数据在不同的列族（CF）中保持一致：

1.  每当您更新一个 CF 中的行/列值时，也要更新另一个 CF 中的相应行/列。
2.  运行一些后台批处理来协调列值以使它们保持一致。

您想使用哪种方式，这可能取决于您如何对数据进行建模，以及您的应用程序对不同 CF 之间数据一致性的要求有多严格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T04:19:54.620

jsfeng 的回答在一般原则上很好，但更具体的回答是使用原子批处理：www.datastax.com/dev/blog/atomic-batches-in-cassandra-1-2

# android - Change Attached Source

> ID：15963926
> 
> 赞同：0
> 
> 时间：2013-04-12T05:44:54.160
> 
> 标签：android

I have been debugging my android project but when i am trying to step into a braekpoint then a screen comes which says **SOURCE NOT FOUND** ....plz suggest a solution..i have seen previous suggestions but those didnt work....there is an option provided-- **CHANGE ATTACHED SOURCE**.. which source i have to provide?? i am providing the link for the video..it is ellaborated in the video..plz help...thanks in advance for ur answers [https://docs.google.com/file/d/0B_I2kWyZePW6VnhOLUxjTFhpTk0/edit?usp=sharing](https://docs.google.com/file/d/0B_I2kWyZePW6VnhOLUxjTFhpTk0/edit?usp=sharing)

this is what the log cat says:

```
04-15 11:15:02.380: D/AndroidRuntime(379): >>>>>>>>>>>>>> AndroidRuntime START <<<<<<<<<<<<<<
04-15 11:15:02.380: D/AndroidRuntime(379): CheckJNI is ON
04-15 11:15:02.490: D/AndroidRuntime(379): --- registering native functions ---
04-15 11:15:03.250: D/dalvikvm(284): GC_EXPLICIT freed 523 objects / 29592 bytes in 131ms
04-15 11:15:03.490: D/PackageParser(59): Scanning package: /data/app/vmdl55176.tmp
04-15 11:15:03.960: D/dalvikvm(59): GC_FOR_MALLOC freed 18707 objects / 974816 bytes in 89ms
04-15 11:15:04.030: I/PackageManager(59): Removing non-system package:com.drugindexx.demo
04-15 11:15:04.030: I/ActivityManager(59): Force stopping package com.drugindexx.demo uid=10040
04-15 11:15:04.030: I/Process(59): Sending signal. PID: 362 SIG: 9
04-15 11:15:04.050: W/InputManagerService(59): Window already focused, ignoring focus gain          of:     com.android.internal.view.IInputMethodClient$Stub$Proxy@4507a590
04-15 11:15:04.440: D/PackageManager(59): Scanning package com.drugindexx.demo
04-15 11:15:04.440: I/PackageManager(59): Package com.drugindexx.demo codePath changed              from /data/app/com.drugindexx.demo-1.apk to /data/app/com.drugindexx.demo-    2.apk; Retaining data and using new
04-15 11:15:04.450: I/PackageManager(59): /data/app/com.drugindexx.demo-2.apk changed; unpacking
04-15 11:15:04.471: D/installd(35): DexInv: --- BEGIN '/data/app/com.drugindexx.demo-2.apk' ---
04-15 11:15:04.820: D/dalvikvm(386): DexOpt: load 42ms, verify 205ms, opt 7ms
04-15 11:15:04.830: D/installd(35): DexInv: --- END '/data/app/com.drugindexx.demo-2.apk'   (success) ---
04-15 11:15:04.830: W/PackageManager(59): Code path for pkg : com.drugindexx.demo changing    from /data/app/com.drugindexx.demo-1.apk to /data/app/com.drugindexx.demo-2.apk
04-15 11:15:04.830: W/PackageManager(59): Resource path for pkg : com.drugindexx.demo changing from /data/app/com.drugindexx.demo-1.apk to /data/app/com.drugindexx.demo-2.apk
04-15 11:15:04.830: D/PackageManager(59):   Activities: com.drugindexx.demo.jsonparsngactivity   com.drugindexx.demo.LoginPage com.drugindexx.demo.Registration com.drugindexx.demo.UserDetails com.drugindexx.demo.MenuOptions com.drugindexx.demo.SarchIndx com.drugindexx.demo.jsonparsngactivity com.drugindexx.demo.Showdetails com.drugindexx.demo.SmsEx com.drugindexx.demo.Settings com.drugindexx.demo.AdvancedSearch com.drugindexx.demo.Gmap com.drugindexx.demo.MyItemizedOverlay com.drugindexx.demo.G
04-15 11:15:04.850: I/ActivityManager(59): Force stopping package com.drugindexx.demo uid=10040
04-15 11:15:04.950: I/installd(35): move /data/dalvik-cache/data@app@com.drugindexx.demo-2.apk@classes.dex -> /data/dalvik-cache/data@app@com.drugindexx.demo-2.apk@classes.dex
04-15 11:15:04.950: D/PackageManager(59): New package installed in /data/app/com.drugindexx.demo-2.apk
04-15 11:15:05.080: I/ActivityManager(59): Force stopping package com.drugindexx.demo uid=10040
04-15 11:15:05.140: D/dalvikvm(134): GC_EXPLICIT freed 69 objects / 2728 bytes in 50ms
04-15 11:15:05.390: W/RecognitionManagerService(59): no available voice recognition services found
04-15 11:15:05.490: D/dalvikvm(155): GC_EXPLICIT freed 1809 objects / 92640 bytes in 328ms
04-15 11:15:05.710: D/dalvikvm(59): GC_EXPLICIT freed 8511 objects / 535000 bytes in 199ms
04-15 11:15:05.710: I/installd(35): unlink /data/dalvik-cache/data@app@com.drugindexx.demo-1.apk@classes.dex
04-15 11:15:05.710: D/AndroidRuntime(379): Shutting down VM
04-15 11:15:05.741: D/dalvikvm(379): Debugger has detached; object registry had 1 entries
04-15 11:15:05.760: I/dalvikvm(379): JNI: AttachCurrentThread (from ???.???)
04-15 11:15:05.760: I/AndroidRuntime(379): NOTE: attach of thread 'Binder Thread #3' failed
04-15 11:15:06.220: D/AndroidRuntime(392): >>>>>>>>>>>>>> AndroidRuntime START <<<<<<<<<<<<<<
04-15 11:15:06.220: D/AndroidRuntime(392): CheckJNI is ON
04-15 11:15:06.330: D/AndroidRuntime(392): --- registering native functions ---
04-15 11:15:06.850: I/ActivityManager(59): Force stopping package com.drugindexx.demo uid=10040
04-15 11:15:06.850: I/ActivityManager(59): Starting activity: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=com.drugindexx.demo/.jsonparsngactivity }
04-15 11:15:06.960: D/AndroidRuntime(392): Shutting down VM
04-15 11:15:06.969: I/ActivityManager(59): Start proc com.drugindexx.demo for activity com.drugindexx.demo/.jsonparsngactivity: pid=398 uid=10040 gids={3003}
04-15 11:15:06.980: D/jdwp(392): Got wake-up signal, bailing out of select
04-15 11:15:06.980: D/dalvikvm(392): Debugger has detached; object registry had 1 entries
04-15 11:15:07.260: W/ActivityThread(398): Application com.drugindexx.demo is waiting for the debugger on port 8100...
04-15 11:15:07.280: I/System.out(398): Sending WAIT chunk
04-15 11:15:07.290: I/dalvikvm(398): Debugger is active
04-15 11:15:07.310: I/System.out(398): Debugger has connected
04-15 11:15:07.310: I/System.out(398): waiting for debugger to settle...
04-15 11:15:07.519: I/System.out(398): waiting for debugger to settle...
04-15 11:15:07.719: I/System.out(398): waiting for debugger to settle...
04-15 11:15:07.919: I/System.out(398): waiting for debugger to settle...
04-15 11:15:08.119: I/System.out(398): waiting for debugger to settle...
04-15 11:15:08.320: I/System.out(398): waiting for debugger to settle...
04-15 11:15:08.519: I/System.out(398): waiting for debugger to settle...
04-15 11:15:08.719: I/System.out(398): waiting for debugger to settle...
04-15 11:15:08.919: I/System.out(398): waiting for debugger to settle...
04-15 11:15:09.149: I/System.out(398): waiting for debugger to settle...
04-15 11:15:09.356: I/System.out(398): waiting for debugger to settle...
04-15 11:15:09.564: I/System.out(398): waiting for debugger to settle...
04-15 11:15:09.772: I/System.out(398): debugger has settled (1408)
04-15 11:15:13.110: W/System.err(398): java.lang.NullPointerException
04-15 11:15:13.129: W/System.err(398):  at java.net.URI$Helper.parseURI(URI.java:314)
04-15 11:15:13.129: W/System.err(398):  at java.net.URI$Helper.access$100(URI.java:302)
04-15 11:15:13.140: W/System.err(398):  at java.net.URI.<init>(URI.java:87)
04-15 11:15:13.140: W/System.err(398):  at com.drugindexx.others.JSONParser.getStringContent(JSONParser.java:37)
04-15 11:15:13.140: W/System.err(398):  at com.drugindexx.demo.jsonparsngactivity$FindStoreLocators.doInBackground(jsonparsngactivity.java:237)
04-15 11:15:13.150: W/System.err(398):  at com.drugindexx.demo.jsonparsngactivity$FindStoreLocators.doInBackground(jsonparsngactivity.java:1)
04-15 11:15:13.150: W/System.err(398):  at android.os.AsyncTask$2.call(AsyncTask.java:185)
04-15 11:15:13.160: W/System.err(398):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
04-15 11:15:13.170: W/System.err(398):  at java.util.concurrent.FutureTask.run(FutureTask.java:137)
04-15 11:15:13.170: W/System.err(398):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
04-15 11:15:13.181: W/System.err(398):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
04-15 11:15:13.181: W/System.err(398):  at java.lang.Thread.run(Thread.java:1096)
04-15 11:15:16.922: W/ActivityManager(59): Launch timeout has expired, giving up wake lock!
04-15 11:15:17.221: W/ActivityManager(59): Activity idle timeout for HistoryRecord{44eb0d10 com.drugindexx.demo/.jsonparsngactivity}
04-15 11:15:22.391: D/dalvikvm(284): GC_EXPLICIT freed 216 objects / 14432 bytes in 106ms
04-15 11:15:27.490: D/dalvikvm(295): GC_EXPLICIT freed 848 objects / 58536 bytes in 148ms
04-15 11:15:32.220: D/dalvikvm(398): threadid=7: still suspended after undo (sc=1 dc=1 s=Y)
04-15 11:15:32.500: D/SntpClient(59): request time failed: java.net.SocketException: Address family not supported by protocol
04-15 11:15:32.521: D/dalvikvm(248): GC_EXPLICIT freed 317 objects / 17472 bytes in 135ms
04-15 11:15:37.489: D/dalvikvm(134): GC_EXPLICIT freed 784 objects / 44784 bytes in 48ms
04-15 11:17:27.744: D/dalvikvm(398): threadid=7: still suspended after undo (sc=1 dc=1 s=Y) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T06:06:53.053

我认为您要做的是调试 android 源代码。

如果你想这样做，你需要附上来源检查： [http ://code.google.com/p/adt-addons/](http://code.google.com/p/adt-addons/)

但请注意：您不太可能真的需要调试源代码，因为您更有可能在“找不到类...”窗口弹出之前做错了（异常）。

# php - How to annotate an image overlay using Jquery?

> ID：15963927
> 
> 赞同：1
> 
> 时间：2013-04-12T05:44:56.637
> 
> 标签：php, jquery, ajax, image, annotations

I want to annotate an image using overlay by drag and drop(any images). Is there any way I can achieve it through Jquery and ajax. I have found some tutorial [here](http://tympanus.net/codrops/2010/10/12/annotation-overlay-effect/).

But I couldnt find anything on adding it dynamically. Any help appreciated. Thanks.

# python - 如何从 Perl 哈希在 Python 中创建等效的 dict？

> ID：15963929
> 
> 赞同：2
> 
> 时间：2013-04-12T05:45:11.280
> 
> 标签：python, perl, hash

我是 python 新手，无法理解 dict 哈希。

这是我的 perl 代码：

```
my %sites;

foreach (@indexes) {
       push @{$sites{$1}}, $_ if (/.*\.(.*)/);
}

foreach my $sites (keys %sites)
{
        @devices = @{$sites{$sites}};
        #Do stuff 
```

我如何在 Python 中做同样的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T05:51:30.193

这是一个非常直接的翻译：

```
import re

re_domain = re.compile(".*\.(.*)")
sites = {}

for index in indexes:
    match = re_domain.search(index)
    if match:
        sites.setdefault(match.group(1), []).append(index)

for site_key in sites.keys():
    devices = sites[site_key] 
```

一种更 Pythonic 的方式是这样做：

```
import collections
import os.path

sites = collections.defaultdict(list)

for index in indexes:
    root, ext = os.path.splitext(index)
    sites[ext].append(index)

for site_key, devices in sites.iteritems():
    ... 
```

# javascript - onchange event not working on calendar control

> ID：15963930
> 
> 赞同：0
> 
> 时间：2013-04-12T05:45:18.517
> 
> 标签：javascript, html

i have a textbox named date and a link as shown below

```
<input type="text" name="date">
<a href="javascript:" onclick="cal.select(document.getElementById('date')"><img src='cal.jpg'> 
```

once i click on the calendar icon, calendar appears . if i select date it gets populaged in textbox named "date". now i need to write an ajax code to populate another drop down BASED ON the date selection. And hence i tried onchange event on date textbox.

```
<input type="text" name="date" onChange="javascript:getDate()"> 
```

javascript.js is the file where i have all my js. but i wonder the change event is not getting called once the value changes. But the value is getting populated correctly based on the user date selection.

Question : How to make an onchange event on this .

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-12T19:01:28.923

好吧，这是一个老问题，但用户必须点击日历图像吗？您可能可以通过这种方式轻松修复：

```
<input type="text" name="date" onFocus='javascript:cal.select(document.getElementByID("date");' onBlur="javascript:getDate()"> 
```

这样，当您单击日历时，它将模糊该字段并立即调用 javascript 函数。

# python - Using colliderect in Pygame

> ID：15963942
> 
> 赞同：1
> 
> 时间：2013-04-12T05:46:10.200
> 
> 标签：python, python-2.7, pygame

How do I tell python to detect whether two objects/ images touch each other? For example when an image of pacman touches an image of a ghost?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T05:55:14.577

[http://www.pygame.org/docs/ref/rect.html#pygame.Rect.colliderect](http://www.pygame.org/docs/ref/rect.html#pygame.Rect.colliderect)

> 碰撞（）
> 
> 测试两个矩形是否重叠
> 
> 碰撞（矩形）-> 布尔
> 
> 如果任一矩形的任何部分重叠（顶部+底部或左+右边缘除外），则返回 true。

如果精灵之间唯一的碰撞检测是在 pac-man 和其他对象之间，那么只需调用`colliderect`pacman 的碰撞矩形和每个其他碰撞矩形的每个组合。

如果碰撞的每一个组合都有意义，则生成一个包含所有碰撞的大列表以及`colliderect`每个矩形，每个矩形在列表中更靠前。

每次发生碰撞，您都可以选择做某事——您甚至可以调用两个对象，传递发生碰撞的另一个对象，从而允许逻辑包含在一个或两个对象中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T19:16:44.667

我假设您正在使用`Sprite`s 作为您的 pacman 和 ghost？如果是这样，您想要精灵碰撞功能之一：http: [//www.pygame.org/docs/ref/sprite.html#pygame.sprite.spritecollide](http://www.pygame.org/docs/ref/sprite.html#pygame.sprite.spritecollide)

否则，使用`Rect`碰撞 Patashu 链接。

# ios - 通过字符串访问 NSMutableDictionary 时崩溃，有两种不同的方式？

> ID：15963947
> 
> 赞同：-1
> 
> 时间：2013-04-12T05:46:27.910
> 
> 标签：ios, objective-c, nsstring, nsmutabledictionary

我有以下方法：

```
-(QFFriend*)getFriendById:(NSString*)fid
{
    TFLog(@"NList %@", self.nFlist);
    TFLog(@":%@:%@:", @"3", fid);
    TFLog(@"%@", [self.nFlist valueForKey:@"3"]);
//    TFLog(@"%@", [self.nFlist valueForKey:fid]);
} 
```

当我用评论运行它时，我得到了这个结果：（并且因为我遗漏了返回而崩溃）

```
2013-04-12 07:39:49:972 QF[42881:2311] NList {
    2 = "<QFFriend: 0x1dd61970>";
    3 = "<QFFriend: 0x1dd76570>";
    4 = "<QFFriend: 0x1dd84a70>";
    7 = "<QFFriend: 0x1dd70760>";
}
2013-04-12 07:39:49:974 QF[42881:2311] :3:3:
2013-04-12 07:39:49:976 QF[42881:2311] <QFFriend: 0x1dd76570> 
```

但是，如果我取消注释该行，我会再次崩溃，有人可以解释可能出了什么问题吗？

```
2013-04-12 07:43:28:736 QuizFuzz[42912:2311] NList {
    2 = "<QFFriend: 0x1c5888c0>";
    3 = "<QFFriend: 0x1c5a5c30>";
    4 = "<QFFriend: 0x1c5acaf0>";
    7 = "<QFFriend: 0x1c5badf0>";
}
2013-04-12 07:43:28:738 QF[42912:2311] :3:3:
2013-04-12 07:43:28:740 QF[42912:2311] <QFFriend: 0x1c5a5c30>
2013-04-12 07:43:28.741 QF[42912:907] -[__NSCFNumber length]: unrecognized selector sent to instance 0x1d8521b0
2013-04-12 07:43:28:754 QF[42912:2311] ERROR: -[__NSCFNumber length]: unrecognized selector sent to instance 0x1d8521b0
2013-04-12 07:43:28.756 QF[42912:907] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFNumber length]: unrecognized selector sent to instance 0x1d8521b0' 
```

最后的两个电话怎么可能不等价？在这两种情况下，我都会发送一个字符串！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T05:51:45.820

错误是：

> -[__NSCFNumber 长度]：发送到实例的无法识别的选择器

这意味着`fid`不是`NSNumber``NSString`

另外，您应该使用`objectForKey:`而不是`valueForKey:`从字典中获取对象

所以试试这个

```
[self.nFlist valueForKey:[fid stringValue]] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T05:52:19.993

我不确定为什么在使用看起来非常相似的代码时会出现两次不同的崩溃。但是，如果您想修复崩溃，我相信您正在寻找的电话是：

```
[self.nFlist objectForKey:@"3"]; 
```

[NSDictionary 类参考](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDictionary/objectForKey%3a)

/* update */ 实际上，在阅读了更多的崩溃日志并查看了 TFLogs 之后。我猜想传入的 fid 对象是一个 NSNumber，而不是你期望的 NSString。要确认这一点，您可以注销：`TFLog(@"fid.class: %@", fid.class);`这会记录课程，而不是描述，因此您可以查看您拥有的内容。`NSNumber`值 3 和`NSString`值 @"3" 都将注销为 3。

# java - 如何从 PHP 中使用 Java 程序？

> ID：15963955
> 
> 赞同：1
> 
> 时间：2013-04-12T05:46:49.397
> 
> 标签：java, php, php-java-bridge

假设我有一个读取 JSON 股票数据并将其存储在 MySQL 中的 php 应用程序。在服务器附近的某个地方，我有一个已编译的 Java（或 Python、C 等）可执行文件，它可以获取一组数字并返回一组分析。有没有办法在不使用中间文本文件（或类似的东西）的情况下从 PHP 调用和接收该程序的数据？我看到有[http://php-java-bridge.sourceforge.net/pjb/](http://php-java-bridge.sourceforge.net/pjb/)，但它会是还需要运行像 Tomcat 这样的 Java 服务器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T06:37:44.980

从技术上讲，您可以使用 PHP 的 exec 函数调用“java -jar YourExecutableJar.jar”并处理返回值。

[http://php.net/manual/en/function.exec.php](http://php.net/manual/en/function.exec.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T06:30:56.257

从技术上讲，任何在后台运行并接受连接的程序都是服务器。Tomcat 只是一个示例，因为它相对轻量级且易于学习，因此在众多教程中使用。

您可以使用 Jetty: [Shortest code 来启动嵌入式 Jetty 服务器](https://stackoverflow.com/questions/1021971/shortest-code-to-start-embedded-jetty-server)

您可以使用 JSON 格式作为通信协议（Java 端的 GSON 库，PHP 端已经使用 JSON）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T05:57:04.887

一种“通用”方法是通过套接字连接它们-> 即在 Java 中的端口上有一个侦听器，该侦听器获取一组数字并将分析集返回给套接字。最大的优势是这是通用的，并且可以在任何语言之间以及远程服务器/客户端之间完成。

# c - 解释为什么变量声明的位置使我无法更改其值

> ID：15963958
> 
> 赞同：1
> 
> 时间：2013-04-12T05:46:57.990
> 
> 标签：c, variables, declaration

我有一个行为不同的变量，具体取决于我在同一函数中声明的位置。我想了解正在发生的事情。

**在这个函数中，我在两个地方都包含了变量声明和初始化，这两个地方产生了不同的结果，只是为了说明正在发生的事情。当我运行程序时，我没有在任何一个地方两次声明变量，只有一次。**

我指的是变量 temp，我已经评论了场景 1 和场景 2

C 函数

```
 int main(int argc, char* argv[])
    {
        // ensure proper usage
        if (argc != 4) // we need four arguments
        {
            printf("Usage: copy infile outfile\n");
            return 1;
        }

        // remember filenames
        char* infile = argv[2];
        char* outfile = argv[3];

        // the factor
        int n = argv[1][0] - '0';

        // SCENARIO 1) HERE HERE HERE HERE THIS IS THE VARIABLE I AM DISCUSSING!!!!!!!
->      int temp = n; // WHEN DECLARED HERE AND INITIALIZED AT TIME OF CREATION
                      // gdb displays its value equal to the value of n

        // open input file 
        FILE* inptr = fopen(infile, "r");
        if (inptr == NULL)
        {
            printf("Could not open %s.\n", infile);
            return 2;
        }

        // open output file
        FILE* outptr = fopen(outfile, "w");
        if (outptr == NULL)
        {
            fclose(inptr);
            fprintf(stderr, "Could not create %s.\n", outfile);
            return 3;
        }

        // read infile's BITMAPFILEHEADER
        BITMAPFILEHEADER bf;
        fread(&bf, sizeof(BITMAPFILEHEADER), 1, inptr);

        // read infile's BITMAPINFOHEADER
        BITMAPINFOHEADER bi;
        fread(&bi, sizeof(BITMAPINFOHEADER), 1, inptr);

        // ensure infile is (likely) a 24-bit uncompressed BMP 4.0
        if (bf.bfType != 0x4d42 || bf.bfOffBits != 54 || bi.biSize != 40 || 
            bi.biBitCount != 24 || bi.biCompression != 0)
        {
            fclose(outptr);
            fclose(inptr);
            fprintf(stderr, "Unsupported file format.\n");
            return 4;
        }

        //gdb break to check the previous values

        // SCENARIO 2) HERE HERE HERE HERE THIS IS THE VARIABLE I AM DISCUSSING!!!!!!!!
->      int temp = n; // WHEN DECLARED HERE AND INITIALIZED THE VARIABLE HERE
                      // gdb displays its value equal to 0 and not n

        // write outfile's BITMAPFILEHEADER
        fwrite(&bf, sizeof(BITMAPFILEHEADER), 1, outptr);

        // write outfile's BITMAPINFOHEADER
        fwrite(&bi, sizeof(BITMAPINFOHEADER), 1, outptr);

        // determine padding for scanlines
        int padding =  (4 - (bi.biWidth * sizeof(RGBTRIPLE)) % 4) % 4;

        //gdb break to check the new values

        // iterate over infile's scanlines
        for (int i = 0, biHeight = abs(bi.biHeight); i < biHeight; i++)
        {
            // iterate over pixels in scanline
            for (int j = 0; j < bi.biWidth; j++)
            {
                // temporary storage
                RGBTRIPLE triple;

                // read RGB triple from infile
                fread(&triple, sizeof(RGBTRIPLE), 1, inptr);

                // write RGB triple to outfile
                fwrite(&triple, sizeof(RGBTRIPLE), 1, outptr);
            }

            // skip over padding, if any
            fseek(inptr, padding, SEEK_CUR);

            // then add it back (to demonstrate how)
            for (int k = 0; k < padding; k++)
                fputc(0x00, outptr);
        }

        // close infile
        fclose(inptr);

        // close outfile
        fclose(outptr);

        // that's all folks
        return 0;
    } 
```

当代码以任何方式更改 n 或 temp 时，为什么我会得到不同的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T06:00:52.433

因此，如果我理解您的代码，您永远不会阅读`temp`或`n`初始化之后。在第二种情况下，编译器可能已经发现了这一点（取决于优化级别）并将其删除。

# python - 在 Python 中读取一行整数

> ID：15963959
> 
> 赞同：13
> 
> 时间：2013-04-12T05:46:58.503
> 
> 标签：python

我是 Python 的初学者，我正在 CodeChef 解决一个问题，我必须读取一行空格分隔的整数。这就是我正在做的事情：

```
def main():

  t=int(raw_input())    #reading test-cases

  while t!=0:
    n, k=raw_input().split()    #reading a line of two space separated integers
    n, r=int(n), int(r)    #converting them into int
    list=[]
    #reading a line of space separated integers and putting them into a list
    list[-1:101]=raw_input().split() 
```

现在我将列表中的每个元素转换为整数。有没有更好的方法来做到这一点？请推荐一个在线资源，我可以在其中使用 Python 并学习提示和技巧！

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-04-12T05:53:38.413

在 Python 2 中，您可以编写：

```
numbers = map(int, raw_input().split()) 
```

这会读取一行，在空白处将其拆分，并应用于`int()`结果的每个元素。

如果您使用的是 Python 3，则等效表达式为：

```
numbers = list(map(int, input().split())) 
```

或者

```
numbers = [int(n) for n in input().split()] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T05:53:00.893

`map(int, list)`应该解决你的问题

# opencv - Python中的OpenCV 2.4估计Affine3D

> ID：15963960
> 
> 赞同：1
> 
> 时间：2013-04-12T05:47:04.023
> 
> 标签：opencv, python-2.7, numpy

我正在尝试使用方法 cv2.estimateAffine3D 但没有成功。这是我的代码示例：

```
import numpy as np
import cv2

shape = (1, 4, 3)
source = np.zeros(shape, np.float32)

# [x, y, z]
source[0][0] = [857, 120, 854]
source[0][1] = [254, 120, 855]
source[0][2] = [256, 120, 255]
source[0][3] = [858, 120, 255]
target = source * 10

retval, M, inliers = cv2.estimateAffine3D(source, target) 
```

当我尝试运行此示例时，我收到与[此处](https://stackoverflow.com/questions/12620141/estimateaffine3d-opencv-2-4-cv-are-sizes-eqm1-m2-cv-are-sizes-eqm1-mask)的其他帖子相同的错误。

我正在使用 OpenCV 2.4.3 和 Python 2.7.3

请帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:19:26.547

这是一个已知的错误，已在`2.4.4`.

[http://code.opencv.org/issues/2375](http://code.opencv.org/issues/2375)

如果您只需要刚性（旋转+平移）对齐，这是标准方法：

```
def get_rigid(src, dst): # Assumes both or Nx3 matrices
    src_mean = src.mean(0)
    dst_mean = dst.mean(0)
    # Compute covariance 
    H = reduce(lambda s, (a,b) : s + np.outer(a, b), zip(src - src_mean, dst - dst_mean), np.zeros((3,3)))
    u, s, v = np.linalg.svd(H)
    R = v.T.dot(u.T) # Rotation
    T = - R.dot(src_mean) + dst_mean # Translation
    return np.hstack((R, T[:, np.newaxis])) 
```

# javascript - 游戏开发：Javascript

> ID：15963962
> 
> 赞同：0
> 
> 时间：2013-04-12T05:47:18.750
> 
> 标签：javascript, html, requestanimationframe

大家好，我的电脑上的人 ;-) 我正在尝试为自己开发一款带有 HTML 5 & JS & CSS 的游戏。在许多教程中，我看到了“requestAnimationFrame”方法。我复制并尝试识别“requestAnimationFrame”的机制。

我向您展示了一些源代码（fullJSCode），希望您能理解我的问题： [http ://pastebin.com/YXf7Nkwd](http://pastebin.com/YXf7Nkwd)

我的循环不起作用...我在 ("W","A","S","D") 上绑定键以移动矩形正方形...但我的正方形不移动:(

任何人都可以帮助我吗？

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T05:53:21.127

第 70 行，在`update`方法中，您应该使用，`this.speed`而不仅仅是`speed`我认为的。使用 just`speed`试图引用局部/全局变量，而`this.speed`将引用对象`speed`上的变量`this`，在此上下文中是`entities`. 希望有帮助！

# php - 如何创建像加密字符串一样的串行密钥

> ID：15963966
> 
> 赞同：1
> 
> 时间：2013-04-12T05:47:43.187
> 
> 标签：php

下面的代码片段加密了字符串，但加密的字符串看起来像随机字母数字。但我想要加密的字符串

> 5214-6548-4584-4568-abcd 或 ABCD-TEST-1F2D-FSDF

我的片段

```
$encrypted = base64_encode(mcrypt_encrypt(MCRYPT_RIJNDAEL_256, md5($key), $string, MCRYPT_MODE_CBC, md5(md5($key))));
var_dump($encrypted); // "ey7zu5zBqJB0rGtIn5UB1xG03efyCp+KSNR4/GAv14w=" 
```

我从[源加密中获取的以下片段](https://stackoverflow.com/questions/6833448/how-should-i-encrypt-my-data-in-a-php-application)

如何使用客户端 MAC+HOST+os 创建序列号

# winapi - 捕获图像时获取/设置视频分辨率

> ID：15963967
> 
> 赞同：1
> 
> 时间：2013-04-12T05:47:43.453
> 
> 标签：winapi, video, directshow, video-capture, image-capture

我正在使用一些主要基于此的代码从我的网络摄像头捕获图像：[使用 Sample Grabber](http://msdn.microsoft.com/en-us/library/windows/desktop/dd407288%28v=vs.85%29.aspx#example_code)。

在这里，我只获得了 640x480 的默认分辨率，而连接的相机能够显示更多（其他捕获应用程序显示更大的分辨率）。

那么，我该如何：

1.  检索可用分辨率列表
2.  设置这些分辨率之一，以便捕获的图像附带它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T05:58:42.857

`IAMStreamConfig`界面列出功能并让您选择感兴趣的分辨率。枚举未连接但 pin 上的媒体类型将列出相机宣传支持的特定媒体类型（amd 分辨率）。

有关此的更多信息（来自那里的链接）：

*   [使用 DirectShow 的视频录制分辨率](https://stackoverflow.com/questions/14305387/video-recording-resolution-using-directshow/14305455#14305455)
*   [尽管分辨率发生变化，视频捕捉输出始终为 320x240](https://stackoverflow.com/questions/8213574/video-capture-output-always-in-320x240-despite-changing-resolution/8216359#8216359)

# android - 编舞（639）：跳过50帧

> ID：15963969
> 
> 赞同：6
> 
> 时间：2013-04-12T05:47:47.457
> 
> 标签：android, android-emulator, emulation

![在此处输入图像描述](https://i.stack.imgur.com/s5bh6.png) 04-12 05:40:55.577: I/Choreographer(639): 跳过 50 帧！应用程序可能在其主线程上做了太多工作。

每当我在 android 模拟器上运行我的应用程序时，它都会显示忙碌（我的意思是它会旋转），并且确实需要很多时间，而且有时它会一直很忙

有人可以帮助我吗？

有没有运行速度快的安卓模拟器版本我的速度很慢？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-12T07:00:38.927

模拟器几乎在所有情况下都很慢。当您使用真实设备时，它可能不再出现警告。无论如何，当**您过多地使用 UI 线程**时，就会发生这种情况。可能的原因有：

*   在 UI 线程上加载数据库信息。*使用[加载器](http://developer.android.com/guide/components/loaders.html)*
*   在 UI 线程上运行长进程。*使用[AsyncTaskLoader](http://developer.android.com/reference/android/content/AsyncTaskLoader.html)*
*   **模拟器很慢，因为您不会超载 UI 线程。*在真实设备上试用您的代码或遵循[此处](https://stackoverflow.com/questions/1968170/can-i-tweak-my-android-emulator-to-make-it-fast)和[此处的指南](https://stackoverflow.com/questions/1554099/slow-android-emulator)***
*   有很多事情要做`onCreate`：使用[configChanges设置活动](https://stackoverflow.com/a/11853451/616225)

# eclipse-plugin - Eclipse：中央 p2 存储库（所有 Eclipse 和 3rd 方插件都在其中）

> ID：15963970
> 
> 赞同：1
> 
> 时间：2013-04-12T05:47:48.463
> 
> 标签：eclipse-plugin, repository, p2, centralized

包含所有 Eclipse 和 3rd 方插件的 Central p2 存储库在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T08:53:35.510

所有第三方插件都可以通过**[MarketPlace](http://marketplace.eclipse.org/)**获得，并将引用所有 p2 站点。

[**对于 Eclipse 本身，您将在“ Eclipse_Project_Update_Sites**页面](http://wiki.eclipse.org/Eclipse_Project_Update_Sites)”中看到所有 Eclipse 发行版的 p2 更新站点列表。

不只有*一个*p2 站点可以引用所有内容，如果您在 Eclipse Market Place 网站上创建帐户，Marketplace 会自动创建一个包含您自己喜欢的插件的组合更新站点。

# visual-studio-2008 - 智能感知不适用于命名空间别名？

> ID：15963973
> 
> 赞同：0
> 
> 时间：2013-04-12T05:48:02.417
> 
> 标签：visual-studio-2008, visual-c++, ide

目前我正在 Visual Studio 2008 中开发一个 C++ 项目。我的命名空间很长

```
System::Drawing::Rectangle 
```

并想为这些使用别名

```
namespace SDR = System::Drawing::Rectangle; 
```

但智能感知无法识别这些别名。我个人不喜欢`using`指令，我个人的偏好是限定完整的命名空间。但我也不喜欢那些命名空间堵塞编辑器。所以这个智能感知问题有解决方法吗？还是我错过了什么？并提到这些别名是块范围的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:41:49.397

Rectangle 是类型名称，而不是命名空间名称。所以你需要这样做：

```
namespace SD = System::Drawing;
SD::Rectangle rc(0, 0, 10, 20); 
```

或者这样：

```
typedef System::Drawing::Rectangle SDR;
SDR rc(0, 0, 10, 20); 
```

当心那些需要在某一天维护你的代码并知道你住在哪里的程序员。

# c - 结构打印垃圾中的字符数组

> ID：15963974
> 
> 赞同：1
> 
> 时间：2013-04-12T05:48:12.057
> 
> 标签：c, string, struct, initialization

当我运行它时，partName char 数组会打印垃圾字符。知道为什么吗？谢谢！

```
typedef struct {
char partName[30]; 
int partNumber; 
float price; 
int stock; 
int reorder;
} inventory;
struct address{
char streetAddress[25]; 
char city[20];
char state[3]; 
char zipCode[6];
};
void GetData(){

inventory order;
address orderAddress;
printf("Enter the part number (Database Includes orders 0001 - 0005):  ");

scanf("%d", &order.partNumber);

if(order.partNumber == 0001){
order.partName == "Pokeball";
order.price == 200;
order.stock == 8263;
order.reorder == 888273;

orderAddress.streetAddress == "21 Oak St.";
orderAddress.city == "Kanto Town";
orderAddress.state == "IA";
orderAddress.zipCode == "28832";

printf("Part was: %s ", order.partName);
//printf("Order was sent to: \n %s\n %s\n %s\n %s\n", orderAddress.streetAddress,         orderAddress.city, orderAddress.state, orderAddress.zipCode);
 } 
```

它正在打印一些随机字符，我确信这是某个地方的简单错误。

多谢你们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T05:49:46.207

以下不是*作业*。它们是*比较*：

```
order.partName == "Pokeball";
order.price == 200;
order.stock == 8263;
order.reorder == 888273;

orderAddress.streetAddress == "21 Oak St.";
orderAddress.city == "Kanto Town";
orderAddress.state == "IA";
orderAddress.zipCode == "28832"; 
```

要分配给整数，请写

```
order.price = 200; 
```

要分配给 C 字符串，请使用[`strcpy()`](http://pubs.opengroup.org/onlinepubs/009695399/functions/strcpy.html)et al。

# javascript - 如何获得第二个单词

> ID：15963977
> 
> 赞同：3
> 
> 时间：2013-04-12T05:48:24.667
> 
> 标签：javascript, jquery, jquery-selectors

我有以下 HTML：

```
<div class="test">
    First
    <p></p>
    Second
    <p></p>
    Third
</div> 
```

在这种情况下我怎样才能得到这个词`Second`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T05:50:38.757

您可以将 jQuery [contents()](http://api.jquery.com/contents/)与[eq(](http://api.jquery.com/eq-selector/) ) 一起使用：

```
var second = $('.test').contents().filter(function() {
                 return this.nodeType == Node.TEXT_NODE;
             }).eq(1).text(); 
```

`[**Working Demo**](http://jsfiddle.net/yhQYH/)`

# c# - 用户单击下拉按钮时如何在 DateTimePicker 中不显示日历

> ID：15963982
> 
> 赞同：5
> 
> 时间：2013-04-12T05:48:37.513
> 
> 标签：c#, winforms

在`DateTimePicker`用户单击`DropDown`按钮时，会显示一个日历。我不想在 DropDown 事件中显示日历。

当用户单击下拉按钮时，是否有某种方法可以覆盖此事件并显示自定义表单？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T06:08:01.993

> 我不想在 DropDown 事件中显示日历。

[`ShowUpDown`您可以通过将控件的属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.datetimepicker.showupdown.aspx)设置为来阻止显示日历`true`。而不是下拉日历，而是在 DateTimePIcker 控件的一侧显示一个旋转按钮，允许用户选择所需的日期/时间。

> 当用户单击下拉按钮时，是否有某种方法可以覆盖此事件并显示自定义表单？

嗯，是的，我想是的。您可以处理在控件显示下拉日历时引发的[`DropDown`事件。](http://msdn.microsoft.com/en-us/library/system.windows.forms.datetimepicker.dropdown.aspx)在这个事件处理程序中，您可以显示您想要的任何形式。唯一的问题是下拉日历仍将正常显示。我不知道你如何防止这种情况发生。

但是，您可以通过强制再次关闭下拉日历来绕过它。为此，P/Invoke[`SendMessage`函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644950.aspx)并向控件发送[`DTM_CLOSEMONTHCAL`消息](http://msdn.microsoft.com/en-us/library/windows/desktop/bb761753.aspx)。

```
[DllImport("user32.dll", CharSet = CharSet.Auto)]
private static extern IntPtr SendMessage(IntPtr hWnd, uint Msg, IntPtr wParam, IntPtr lParam);

private const uint DTM_FIRST         = 0x1000;
private const uint DTM_CLOSEMONTHCAL = DTM_FIRST + 13; 

public static void CloseCalendar(this DateTimePicker dtp)
{
    SendMessage(dtp.Handle, DTM_CLOSEMONTHCAL, IntPtr.Zero, IntPtr.Zero);
} 
```

但我无法想象你想要这样做的原因。如果您不需要日历或旋转按钮控件，则不需要 DateTimePicker。只需使用常规组合框或下拉按钮，然后您可以在单击时显示您想要的任何形式。

# c# - 在 javascript 中模拟 C# 类事件

> ID：15963984
> 
> 赞同：6
> 
> 时间：2013-04-12T05:48:41.840
> 
> 标签：c#, javascript

我想在 JavaScript 中模拟 C# 的事件：我想做的是这样的：

假设我有以下代码：

```
function addToInvocationList(method, listener) {
      *Some code to add listener to the invocation list of method*
}

function MyClass() {
}

MyClass.prototype.Event = function() {}

var my_class_obj = new MyClass();

function subscriberFunction1() {}
function subscriberFunction2() {}
function subscriberFunction3() {}

addToInvocationList(my_class_obj.Event, subscriberFunction1);
addToInvocationList(my_class_obj.Event, subscriberFunction2);
addToInvocationList(my_class_obj.Event, subscriberFunction3);

my_class_obj.Event(); 
```

我想要做的是当我调用 my_class_obj.Event 时，所有订阅的函数都会被调用。

这可以纯粹在 JavaScript 中实现，还是我需要通过 DOM 事件找到解决方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T06:41:59.577

写一个单独的事件类怎么样：参考链接：[http ://alexatnet.com/articles/model-view-controller-mvc-javascript](http://alexatnet.com/articles/model-view-controller-mvc-javascript)

```
function Event(sender) {
    this._sender = sender;
    this._listeners = [];
}

Event.prototype = {
    attach: function (listener) {
        this._listeners.push(listener);
    },
    notify: function (args) {
        for (var i = 0; i < this._listeners.length; i++) {
            this._listeners[i](this._sender, args);
        }
    }
}; 
```

还有你我的课。例如：

```
function MyClass(name) {
     var self = this;
     self.Name = name;
     self.nameChanged = new Event(this);

     self.setName = function (newName){
         self.Name = newName;
         self.nameChanged.notify(newName);
     }
} 
```

订阅事件示例代码：

```
var my_class_obj = new MyClass("Test");
my_class_obj.nameChanged.attach(function (sender,args){

});
my_class_obj.setName("newName"); 
```

您可以附加更多事件处理程序，所有这些事件处理程序都将被调用。您还可以根据需要添加更多事件：例如 addressChanged 事件。这种方法还模拟了 c# 事件（sender 和 args）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T06:01:10.477

您可以编写自己的观察者（发布者-订阅者）阅读 GOF。或者，如果使用 jQuery，自定义事件 ( [http://api.jquery.com/trigger/](http://api.jquery.com/trigger/) ) 可以帮助您。

# ruby-on-rails - rail 为什么获取时间与数据库的时间不同

> ID：15963994
> 
> 赞同：2
> 
> 时间：2013-04-12T05:49:32.890
> 
> 标签：ruby-on-rails, ruby

当我从 db 中选择行时，我得到 16:26:03: database=# select posts.created_at from posts where id = 1;

```
 created_at         
----------------------------
 2012-04-10 16:26:03.538866 
```

但从代码

```
logger.info Post.find(1).created_at

2012-04-10 12:26:03.538866 
```

为什么获取时间与数据库时间不同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T06:14:24.163

我找到了答案。

文件：

```
environment.rb 
```

线：

```
config.time_zone = 'Eastern Time (US & Canada)' 
```

# ios - 如何处理IOS图像裁剪中的图像旋转问题

> ID：15963995
> 
> 赞同：1
> 
> 时间：2013-04-12T05:49:40.610
> 
> 标签：ios, ipad, opengl-es, uiimageview, uiimage

我正在开发与相机相关的应用程序。这里我正在从相机拍摄图像，需要对其进行裁剪，然后将其修复为图像视图。为了裁剪图像，我正在使用 OpenGL。我的问题是我在裁剪图像后旋转了 180度。但这并不是一直发生的。有时我会得到原始图像本身。

```
-(void)showResult
{
    NSLog(@"showResult called" );

    UIImage *imageCrop;
    float scaleCrop;
    if (_sourceImage.size.width >= IMAGEWIDTH)
    {
        scaleCrop = IMAGEWIDTH / _sourceImage.size.width;
        imageCrop = [ImageCropViewController scaleImage:_sourceImage with:CGSizeMake(_sourceImage.size.width*scaleCrop, _sourceImage.size.height*scaleCrop)];
    }
    else
    {
        scaleCrop = 1;
        imageCrop = _sourceImage;
    }

    float scale = _sourceImage.size.width / resizeImage.size.width * 2;
    IplImage *iplImage = [ImageCropViewController CreateIplImageFromUIImage:imageCrop] ;
    Quadrilateral rectan;

    rectan.point[0].x = _touchLayer.rectan.pointA.x*scale*scaleCrop;
    rectan.point[0].y = _touchLayer.rectan.pointA.y*scale*scaleCrop;

    rectan.point[1].x = _touchLayer.rectan.pointB.x*scale*scaleCrop;
    rectan.point[1].y = _touchLayer.rectan.pointB.y*scale*scaleCrop;

    rectan.point[2].x = _touchLayer.rectan.pointC.x*scale*scaleCrop;
    rectan.point[2].y = _touchLayer.rectan.pointC.y*scale*scaleCrop;

    rectan.point[3].x = _touchLayer.rectan.pointD.x*scale*scaleCrop;
    rectan.point[3].y = _touchLayer.rectan.pointD.y*scale*scaleCrop;

    IplImage* dest = cropDoc2(iplImage,rectan);

    IplImage *image = cvCreateImage(cvGetSize(dest), IPL_DEPTH_8U, dest->nChannels);
    cvCvtColor(dest, image, CV_BGR2RGB);
    cvReleaseImage(&dest);

    tempImage = [ImageCropViewController UIImageFromIplImage:image withImageOrientation:_sourceImage.imageOrientation];
    [self crop:tempImage];
    cvReleaseImage(&image);

} 
```

之后调用下面的方法

```
+ (UIImage *)UIImageFromIplImage:(IplImage *)image withImageOrientation:(UIImageOrientation)orientation
{
    NSLog(@"UIImageFromIplImage called" );

    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
    NSData *data = [NSData dataWithBytes:image->imageData length:image->imageSize];
    CGDataProviderRef provider = CGDataProviderCreateWithCFData((__bridge CFDataRef)data);
    CGImageRef imageRef = CGImageCreate(image->width, image->height, image->depth, image->depth * image->nChannels, image->widthStep, colorSpace, kCGImageAlphaNone|kCGBitmapByteOrderDefault, provider, NULL, false, kCGRenderingIntentDefault);
    UIImage *ret = [UIImage imageWithCGImage:imageRef scale:1 orientation:orientation];
    CGImageRelease(imageRef);
    CGDataProviderRelease(provider);
    CGColorSpaceRelease(colorSpace);
    return ret;
} 
```

然后我根据我的要求旋转图像

```
-(void)crop:(UIImage*)image

{
    NSLog(@"crop called" );
   //Adjust the image size, to scale the image to 1013 of width
    float targetWidth = 1009.0f;
    float scale = targetWidth / image.size.width;
    float scaleheight = image.size.height * scale;
   UIImage *imageToSent = [ImageCropViewController scaleImage:image     with:CGSizeMake(targetWidth, scaleheight)];

if([UIApplication sharedApplication].statusBarOrientation == UIInterfaceOrientationLandscapeLeft)
{

    NSLog(@"###########Image orientation is UIInterfaceOrientationLandscapeLeft###########");
    imageToSent = [[UIImage alloc] initWithCGImage:imageToSent.CGImage scale:1.0f orientation:UIImageOrientationDown];

}

NSData *imageData = UIImageJPEGRepresentation(imageToSent,0.75);
NSDate *now = [NSDate dateWithTimeIntervalSinceNow:0];
NSString *caldate = [now description];
appDelegate.imagefilePath= [NSString stringWithFormat:@"%@/%@.jpg", DOCUMENTS_FOLDER,caldate];
[imageData writeToFile:appDelegate.imagefilePath atomically:YES];

appDelegate.cropimage=imageToSent;
} 
```

我没有找到出错的地方。它正在消磨我的时间。请帮助我。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T07:37:25.360

我有这个用于裁剪的代码。你为什么使用openGL。这是我的代码。

```
- (UIImage *)cropImage : (UIImage*)myImage withRect:(CGRect)rect
{
      CGImageRef imageRef = CGImageCreateWithImageInRect([myImage CGImage], rect);
      UIImage *img = [UIImage imageWithCGImage:imageRef]; 
      CGImageRelease(imageRef);
      return img;
} 
```

只要您想裁剪图像，只需调用此方法即可。此外，当您从相机或画廊拍摄图像（从本机相机应用程序拍摄的图像）时，您将获得旋转图像。使用此代码将其恢复为原始图像。

```
//----rotate image if picked from gallery or camera----//
- (UIImage *)scaleAndRotateImage:(UIImage *)image {

    NSLog(@"scaleAndRotateImage");
    static int kMaxResolution = 640; // this is the maximum resolution that you want to set for an image.

    CGImageRef imgRef = image.CGImage;
    CGFloat width = CGImageGetWidth(imgRef);
    CGFloat height = CGImageGetHeight(imgRef);

    CGAffineTransform transform = CGAffineTransformIdentity;
    CGRect bounds = CGRectMake(0, 0, width, height);
    if (width > kMaxResolution || height > kMaxResolution) {
        CGFloat ratio = width/height;
        if (ratio > 1) {
            bounds.size.width = kMaxResolution;
            bounds.size.height = bounds.size.width / ratio;
        } else {
            bounds.size.height = kMaxResolution;
            bounds.size.width = bounds.size.height * ratio;
        }
    }

    CGFloat scaleRatio = bounds.size.width / width;
    CGSize imageSize = CGSizeMake(CGImageGetWidth(imgRef), CGImageGetHeight(imgRef));
    CGFloat boundHeight;
    UIImageOrientation orient = image.imageOrientation;
    switch(orient) {
        case UIImageOrientationUp:
            transform = CGAffineTransformIdentity;
            break;
        case UIImageOrientationUpMirrored:
            transform = CGAffineTransformMakeTranslation(imageSize.width, 0.0);
            transform = CGAffineTransformScale(transform, -1.0, 1.0);
            break;
        case UIImageOrientationDown:
            transform = CGAffineTransformMakeTranslation(imageSize.width, imageSize.height);
            transform = CGAffineTransformRotate(transform, M_PI);
            break;
        case UIImageOrientationDownMirrored:
            transform = CGAffineTransformMakeTranslation(0.0, imageSize.height);
            transform = CGAffineTransformScale(transform, 1.0, -1.0);
            break;
        case UIImageOrientationLeftMirrored:
            boundHeight = bounds.size.height;
            bounds.size.height = bounds.size.width;
            bounds.size.width = boundHeight;
            transform = CGAffineTransformMakeTranslation(imageSize.height, imageSize.width);
            transform = CGAffineTransformScale(transform, -1.0, 1.0);
            transform = CGAffineTransformRotate(transform, 3.0 * M_PI / 2.0);
            break;
        case UIImageOrientationLeft:
            boundHeight = bounds.size.height;
            bounds.size.height = bounds.size.width;
            bounds.size.width = boundHeight;
            transform = CGAffineTransformMakeTranslation(0.0, imageSize.width);
            transform = CGAffineTransformRotate(transform, 3.0 * M_PI / 2.0);
            break;
        case UIImageOrientationRightMirrored:
            boundHeight = bounds.size.height;
            bounds.size.height = bounds.size.width;
            bounds.size.width = boundHeight;
            transform = CGAffineTransformMakeScale(-1.0, 1.0);
            transform = CGAffineTransformRotate(transform, M_PI / 2.0);
            break;
        case UIImageOrientationRight:
            boundHeight = bounds.size.height;
            bounds.size.height = bounds.size.width;
            bounds.size.width = boundHeight;
            transform = CGAffineTransformMakeTranslation(imageSize.height, 0.0);
            transform = CGAffineTransformRotate(transform, M_PI / 2.0);
            break;
        default:
            [NSException raise:NSInternalInconsistencyException 
                        format:@"Invalid image orientation"];
    }

    UIGraphicsBeginImageContext(bounds.size);
    CGContextRef context = UIGraphicsGetCurrentContext();
    if (orient == UIImageOrientationRight || orient == UIImageOrientationLeft) {
        CGContextScaleCTM(context, -scaleRatio, scaleRatio);
        CGContextTranslateCTM(context, -height, 0);
    } else {
        CGContextScaleCTM(context, scaleRatio, -scaleRatio);
        CGContextTranslateCTM(context, 0, -height);
    }
    CGContextConcatCTM(context, transform);
    CGContextDrawImage(UIGraphicsGetCurrentContext(), 
                       CGRectMake(0, 0, width, height), imgRef); 
    UIImage *returnImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return returnImage;
} 
```

希望我有所帮助。