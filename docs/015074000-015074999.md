# StackOverflow 问答 15074000-15074999

# html - 动态包含时，Zurb 顶部导航栏下拉菜单在小屏幕上不起作用

> ID：15074003
> 
> 赞同：0
> 
> 时间：2013-02-25T18:38:58.927
> 
> 标签：html, zurb-foundation

我试图了解 Zurb Foundation 的顶部导航栏。当我通过 js 包含导航标记时，我第一次很难让它工作。当我将代码复制到每个 html 页面时，它突然起作用了。这很好，但我在我的网站中添加了一个新部分，其中页面是用 ruby​​ 动态形成的。

实际问题是，当屏幕很小时，页面右上角的下拉菜单会停止工作。

在我网站的首页上，导航在一个小屏幕上工作：[Mac Media Production 主页](http://mac-media.co.uk)，但是在此页面上：[Mac Media Production Hosting 页面](http://mac-media.co.uk/hosting)，导航栏不再正常运行，据我所知标记-up 是一样的：

```
<!-- Header and Nav -->

<nav class="top-bar">
  <ul>
    <!-- Title Area -->
    <li class="name">
      <h1>
        <a href="http://www.mac-media.co.uk">
          mac media
        </a>
      </h1>
    </li>
    <li class="toggle-topbar"><a href="http://www.mac-media.co.uk/hosting"></a></li>
  </ul>

  <section>
    <!-- Top Right Nav Section -->
    <ul class="right">

      <li class="has-dropdown">
        <a class="active" href="http://www.mac-media.co.uk/index.html">Menu</a>
        <ul class="dropdown">
          <li><label>Pages</label></li>
          <li><a href="http://www.mac-media.co.uk/index.html">Home</a></li>
          <li><a href="http://www.mac-media.co.uk/contact-us.html">Contact Us</a></li>
          <li class="divider"></li>
          <li><label>Our Services</label></li>
          <li><a href="http://www.mac-media.co.uk/web-design.html">Web Design</a></li>
          <li><a href="http://www.mac-media.co.uk/photo.html">Photo</a></li>
          <li><a href="http://www.mac-media.co.uk/video-production.html">Video</a></li>
          <li><a href="http://www.mac-media.co.uk/hosting.html">Hosting</a></li>
          <li><a href="http://www.mac-media.co.uk/email.html">Emails</a></li>
          <li><a href="http://www.mac-media.co.uk/domain-names.html">Domain Names</a></li>
          <li class="divider"></li>
          <li><label>Existing Clients</label></li>
          <li><a href="http://www.mac-media.co.uk/hosting/front-page">Control Panel</a></li>
          <li><a href="http://www.outitgoes.com/">Webmail Login</a></li>
        </ul>
      </li>
        <li class="divider hide-for-small"></li>
    </ul>

         </section>

</nav> 
```

有人可以帮忙吗！？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T01:39:34.137

在 ZURB Foundation 3 中，这一行：

```
<li class="toggle-topbar"><a href="http://www.mac-media.co.uk/hosting"></a></li> 
```

应改为：

```
<li class="toggle-topbar"><a href="#"></a></li> 
```

这只是 jQuery 的占位符

官方文档： http: [//foundation.zurb.com/old-docs/f3/navigation.php](http://foundation.zurb.com/old-docs/f3/navigation.php)

# php - PHP 如果文件存在

> ID：15074013
> 
> 赞同：5
> 
> 时间：2013-02-25T18:40:10.100
> 
> 标签：php

这是我的代码。

```
$filename = "$myMedia catalog/category/ $myImage.png";
$filename = str_replace(" ", "", $filename);

if (file_exists($filename)) {
    echo "The file $filename exists";
} else {
    echo "The file $filename does not exist";
} 
```

上述`variable`输出`http://50.87.6.244/~storeupp/media/catalog/category/Game_Used.png`确实存在。但是，它说它不存在。

知道为什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T18:45:16.417

试着像这样使用：

```
 $filename = dirname(__FILE__) . "/ $myMedia catalog/category/ $myImage.png";
 $filename = str_replace(" ", "", $filename);

 if (file_exists($filename)) {
     echo "The file $filename exists";
 } else {
     echo "The file $filename does not exist";
 } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-25T18:47:22.477

我不知道，但我认为，如果您将外部 Web 项目作为资产，则以下代码会更成功：

```
$filename = $myMedia."catalog/category/".$myImage.".png";
$headers = @get_headers($filename);
$exists = ($file_headers[0] == 'HTTP/1.1 404 Not Found'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-12T16:02:52.070

OT：您可以将变量括在“{}”括号之间，而不是使用空格和 str_replace(" ", "", $filename)。

`$filename = "{$myMedia}catalog/category/{$myImage}.png";`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T18:41:20.060

该文件看起来像是在您的 Web 根目录之外。因此，它无法通过网络获得。如果您尝试检查计算机上的本地文件，请改用文件根目录。（即/path/to/media/catalog/category/Game_Used.png）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-25T18:41:50.250

您需要引用文件的路径或不能使用`http://`链接的目录

[file_exists 文档](http://php.net/manual/en/function.file-exists.php)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-25T18:42:41.937

在[文档](http://php.net/manual/en/function.file-exists.php)中，它指出 file_exists() 函数仅适用于 PHP 5.0 的某些 URL 包装器。

# javascript - 如何复制一个字符串10次

> ID：15074019
> 
> 赞同：-1
> 
> 时间：2013-02-25T18:40:25.130
> 
> 标签：javascript, loops, for-loop

我有一个提示，要求用户输入一个单词，然后我想使用 for 循环复制这个单词 10 次，并在警告框中显示结果。

只是我似乎无法弄清楚我需要在我的 for 循环中输入什么才能让它复制我的消息变量十次，然后将结果保存到另一个变量中，我可以在我的警报框中显示该变量。有人知道如何在 Javascript 中执行此操作吗？

编辑：这是我现在尝试的代码：

```
function button() {
    var message = prompt ("Enter a word", "");
    for(var i = 0; i < 5; i++) {
        message += message;
    }
    alert (message);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T18:53:53.607

您可以将一个空数组设为重复大小的长度+1，并将该数组与要重复的字符串连接为分隔符。

```
var string='Hello ', n=10;
alert(Array(n+1).join(string)); 
```

返回值：（字符串）

你好你好你好你好你好你好你好你好你好

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-25T18:50:18.150

由于您是新用户，我只想提一下 SO 希望您提供迄今为止尝试过的所有代码。我们乐于提供帮助，但始终希望您表明您已尝试自行解决问题。我们不只是为您编写代码。

请阅读[并](http://mattgemmell.com/2008/12/08/what-have-you-tried)欢迎使用 StackOverflow！

 ~~~~```
var foo = 'test', out = '';

for(var i=0; i<10; i++){
  out += foo;
}

console.log(out); // 'testtesttesttesttesttesttesttesttesttest' 
```~~  ~~编辑：

```
var message = prompt("Enter a message", ""),
    newMessage = '';

for(var i=0; i<10; i++){
  newMessage += message;
}

alert(newMessage); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-05-15T19:31:44.210

在 ES6 中，这非常容易。

> `String.prototype.repeat(repetition_no.)`工作正常。

例子：`'abc'.repeat(3) // abcabcabc`

更多信息：[freecodecamp/ES6-repeat](https://www.freecodecamp.org/news/three-ways-to-repeat-a-string-in-javascript-2a9053b93a2d/)~~~~

# php - 从存储在数据库中的表中检索数据并将其显示为表单（使用外键）。

> ID：15074020
> 
> 赞同：0
> 
> 时间：2013-02-25T18:40:28.577
> 
> 标签：php, html, mysql, phpmyadmin, foreign-keys

我有两个表，如下所示：

员工 - (employee_ID, first_name, Last_name, Address, ETC) Training - (training_ID, Employee_ID, First_name, Last_name, Training)

员工 ID 是培训表中的外键。

我有一个培训表表格，供输入哪个员工需要哪个培训的人使用。

无论如何，在我的培训表格上，我可以有一个员工字段的下拉框，它将自动更新该员工 ID 的名字和姓氏？

或者，无论如何我都可以拥有我的表格，以便员工 ID 始终具有正确的名字和姓氏。

这是我的表单（html）和将其提交到数据库的 php 代码。

```
<html>
<head>
<link type="text/css" rel="stylesheet" href="style.css"/>
<title>Training</title>
</head>

<body>
<div id="content">  
<h1 align="center">Add Training</h1>

<form action="inserttraining.php" method="post">
<div>
<p>Training ID: <input type="text" name="Training_ID"></p>
<p>Employee ID: <input type="text" name="Employee_ID"></p>
<p>First name: <input type="text" name="First_name"></p>
<p>Last name: <input type="text" name="Last_name"></p>
<p>
Training required?
<select name="Training">
<option value="">Select...</option>
<option value="Customer Service">Customer Service</option>
<option value="Bailer">Bailer</option>
<option value="Reception">Reception</option>
<option value="Fish & meat counters">Fish & meat counters</option>
  <option value="Cheese counters">Cheese counters</option>
</select>
</p>
<input type="submit">
</form>
</div>

</body>
</html> 
```

和php代码：

```
<?php
$con = mysql_connect("localhost","root","");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("hrmwaitrose", $con);

$sql="INSERT INTO training (Training_ID, Employee_ID, First_name, Last_name, Training)
VALUES
  ('$_POST[Training_ID]','$_POST[Employee_ID]','$_POST[First_name]','$_POST[Last_name]','$_POST[Training]')";

if (!mysql_query($sql,$con))
  {
  die('Error: ' . mysql_error());
  }
echo "1 record added";

mysql_close($con);
?> 
```

如果我的代码显示不好，请提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T18:59:25.200

如果要使用下拉列表更新文本字段（名字、姓氏），则需要使用 ajax。

只需使用下拉列表的 onChange 事件发出 ajax 请求，然后使用 javascript 将返回值设置为文本字段。

对于预填充的值，您可以执行以下操作：

```
//code to get data from database

//store the result in an array
$result = mysql_fetch_array($sql);

//change the html in your form
<p>First name: <input type="text" name="First_name" value="<?php if(!empty($result['First_name'])) echo $result['First_name']; ?>"></p>
<p>Last name: <input type="text" name="Last_name" value="<?php if(!empty($result['last_name'])) echo $result['last_name']; ?>"></p> 
```

# performance - 使用 Oracle Coherence，创建一个新的 NamedCache 的成本是多少？

> ID：15074023
> 
> 赞同：1
> 
> 时间：2013-02-25T18:40:43.580
> 
> 标签：performance, distributed-caching, oracle-coherence

在我们希望有大量并发用户的项目中，我们可以选择为每个连接的用户（会话）使用一个命名缓存，或者为所有会话状态使用一个大的命名缓存。使用一个大缓存会更复杂，因为我们需要一种灵活的机制来将数据附加到会话，但可能会更高性能。每个会话使用唯一的命名缓存的主要原因是能够通过简单地销毁命名缓存来销毁与其相关的所有数据的简单性。这预计只在内存中运行，访问率将非常低。

使用一个大缓存会提高多少性能？使用 Coherence 使用大量命名缓存实例是否被认为是“不好的做法”？简而言之，在 Coherence 中分配一个新的命名缓存需要多少开销？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T16:13:06.950

一般来说，与 NamedCaches 相关的最大开销是创建 MBean 以跟踪其统计信息。这些 MBean 的复制可能会消耗比预期更多的网络带宽。打开 JConsole 来查看成百上千个缓存 MBean 也很笨拙。

如果您的要求是使用多个缓存条目来存储与用户相关的数据，我将使用键关联来实现这一点。使用这种方法，您可以创建一个复合键，其中包含用户身份以及缓存条目的标识符。这种方法将强制特定用户的所有数据驻留在同一个分区上 - 因此是同一个存储成员。

然后，您可以使用它来将过滤器和条目处理器定位到关联的键 - 包括条目处理器以在用户会话到期时删除缓存条目。这将更加有效，因为它只需要一个缓存服务器来响应用户的请求，而不是要求整个集群响应销毁缓存的请求。

这些链接应该可以帮助您入门：

[http://docs.oracle.com/cd/E24290_01/coh.371/e22837/api_dataaffinity.htm](http://docs.oracle.com/cd/E24290_01/coh.371/e22837/api_dataaffinity.htm)

[http://blackbeanbag.net/wp/2010/06/06/coherence-key-howto/](http://blackbeanbag.net/wp/2010/06/06/coherence-key-howto/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T02:07:02.153

为什么不使用 [CoherenceWeb](http://coherence.oracle.com/display/COH34UG/Coherence%2aWeb+Session+Management+Module)

CoherenceWeb 正是为此目的，它用于维护用户/成员的会话数据。

在 CoherenceWeb 中，它使用一个缓存来维护所有用户的会话数据，每个成员都有一个条目。

# php - 带工作日的团体季节日期

> ID：15074024
> 
> 赞同：0
> 
> 时间：2013-02-25T18:40:50.297
> 
> 标签：php, mysql

我有一个 mysql 表，它存储一个日期范围内的所有天数，用户键入一个开始和结束日期以及一个价格，我将每一天和价格存储为该特定季节的行，这是我拥有的唯一信息。此日期范围可以应用于特定的工作日。

我想做的是抓住所有的日子，按季节和工作日分组。

示例：
我的日期范围为 2013 年 4 月 1 日至 30 日，周一至周五=100 欧元<br>，2013 年 4 月 1 日至 30 日，周六至周日 80 欧元<br>，5 月 1 日至 31 日，周一至周五 = 200 欧元<br> 5 月 1 日至 5 月 31 日周六 - 周日 = 180 欧元<br>

我尝试使用 php 对其进行分组，但它缺少正确的日期

数据库如下所示：

```
Day         |  Price
2013-04-01  | 100€
2013-04-02  | 100€
2013-04-03  | 100€
2013-04-04  | 100€
2013-04-05  | 100€
2013-04-06  | 80€
2013-04-07  | 80€
2013-04-08  | 100€
2013-04-09  | 100€
2013-04-10  | 100€
... 
```

有没有办法使用 PHP 将其与工作日分组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T18:47:56.517

您正在尝试对事物进行分组。您需要获取工作日和组的名称。

方法是为连续值找到一个“名称”。这个“名称”是未来价格与当前价格不同的日期，在工作日或周末（如果我正确理解问题的话）。

分组后，只需使用`group by`来获取期间的开始和结束：

```
select min(day) as startday, max(day) as endday, price
from (select t.*,
             (select day
              from t t2
              where (case when weekday(t2.day) bewteen 0 and 4 then 'Week' else 'Weekend' end) = 
                    t.period and
                    t2.day > t.day and
                   t2.price <> t.price
             ) as grouping
      from (select t.*, (case when weekday(day) bewteen 0 and 4 then 'Week' else 'Weekend' end) as period
            from t
           ) t
     ) t
 group by grouping, price 
```

我没有测试过这个 SQL，所以可能有语法错误。

# c++ - 安全使用 volatile bool 强制另一个线程等待？(C++)

> ID：15074028
> 
> 赞同：9
> 
> 时间：2013-02-25T18:41:03.947
> 
> 标签：c++, multithreading, thread-safety, boolean, volatile

我读到的关于 volatile 的所有内容都表明它永远不安全，但我仍然倾向于尝试它，而且我还没有看到这种特定场景被宣布为不安全。

我有一个单独的线程来渲染场景，从主模拟线程中提取数据。这没有同步，并且工作正常。

问题是当程序退出时，渲染器需要停止从模拟线程中提取数据，然后模拟线程才能安全地自行清理，而不会导致渲染器尝试读取无效内存。

为此，我让渲染器在其线程中无限运行：

```
volatile bool stillRendering;

void RenderThreadFunction()
{
    stillRendering = true;

    while(programRunning)
    {
        renderer->render();
    }

    stillRendering = false;
} 
```

在主程序线程中，当收到 windproc 退出消息时，我会：

```
void OnQuit()
{
    programRunning = false;
    while(stillRendering)
    {
    }

    delete application;
} 
```

这样做的目的是确保渲染器在对应用程序调用 delete 之前停止从应用程序中提取数据。

我第一次尝试这个没有任何 volatile 关键字，它在调试模式下工作，但在发布模式下它挂起。我假设编译器做了一些优化，导致程序停止检查 stillRendering 的值。

将 volatile 添加到 just stillRendering 会导致应用程序在我到目前为止每次测试时都成功退出。我不确定为什么“programRunning”是否不稳定似乎并不重要。

最后，我不确定将 volatile 用于“stillRendering”会如何影响程序的性能。使 stillRendering volatile 影响 OnQuit() 的性能对我来说无关紧要，但如果它影响 RenderThreadFunction() 的性能对我来说却很重要

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-25T19:28:48.867

尽管它可能适用于某些编译器，但它是完全不安全的。基本上，`volatile`只影响它附加到的变量，因此`RendererThreadFunction`，例如，可以 在完成 *之前*`stillRendering`设置false 。（即使两者都是易变的也是如此 。）问题的概率非常小，因此测试可能不会揭示它。最后，某些版本的 VC++*确实*在 C++11 下提供 了原子访问的语义，在这种情况下，您的代码将可以工作。（当然，除非您使用不同版本的 VC++ 进行编译。）*`renderer->render();``stillRendering``programRunning`*`volatile`**

 **鉴于`renderer->render()`几乎可以肯定会花费不可忽略的时间，因此绝对没有理由不在这里使用条件变量。大约唯一一次`volatile`用于此类事情的是关闭机制是否由信号触发（在这种情况下，类型将是`sig_atomic_t`，而不是`bool`，尽管在实践中，它可能没有任何区别）。在这种情况下，不会有两个线程，而只有渲染器线程和一个信号处理程序。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-25T19:24:14.220

如果您希望您的代码适用于所有编译器中的所有架构，请使用 C++11 atomics：

```
std::atomic<bool> stillRendering;

void RenderThreadFunction()
{
    stillRendering = true;

    while(programRunning)
    {
        renderer->render();
    }

    stillRendering = false;
} 
```

Volatile*不是*为多线程而设计的——标准实际上允许编译器将`volatile`访问与非`volatile`访问重新排序。VC++ 扩展`volatile`了 's 的功能集以防止重新排序，但其他编译器没有，它可能会在这些编译器上中断。

正如其他人所提到的，`volatile`它也不会影响可见性，这意味着不缓存一致的架构可能永远不会看到标志集。x86 甚至不是*立即*缓存一致的（写入会非常慢），因此当写入通过各种缓冲区发送时，您的程序总是会循环超过应有的次数。

C++11 atomics 避免了这两个问题。

好的，所以这主要是为了更正您当前的代码并警告您不要滥用`volatile`. 詹姆斯关于使用条件变量的建议（这只是你正在做的更有效的版本）可能是你最好的实际解决方案。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-25T20:45:02.683

C++11 atomics 解决了三个问题。

首先，线程切换可能发生在读取或写入值的中间；对于读取，另一个线程可以在原始线程读取其余值之前更新该值；对于写入，另一个线程可以看到一半写入的值。这被称为“撕裂”。

其次，在典型的多处理器系统中，每个处理器都有自己的缓存，并且它会在该缓存中读取和写入值；有时会更新缓存和主内存以确保它们保持相同的值，但是直到写入新值的处理器刷新其缓存并且读取该值的线程从缓存中重新加载其副本，该值可能会有所不同。这被称为“缓存一致性”。

Third, the compiler can move code around, and store one value before it stores another, even if the code is written in the opposite order. As long as you can't write a valid program that can see the difference, that's okay under the "as if" rule.

Loading from and storing to an atomic variable (with the default memory-ordering) prevents all three problems. Marking a variable as `volatile` does not.

EDIT: don't bother figuring out which architectures pose which problems. The author of the standard library has already done this for the architecture that the library implementation is intended for. Don't look for shortcuts; just use atomics. You won't lose anything.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-25T18:53:36.857

根据缓存一致的架构（例如 x86 处理器），我希望这可以正常工作。您可能会发现，与使用真正的原子操作相比，您的两个线程中的任何一个都可能运行更多的迭代，但由于只有一侧是设置值与读取值，因此不需要真正的原子操作。

但是，如果正在执行代码的处理器（核心）需要特定的缓存刷新以使“其他核心”看到更新的值，那么您可能会被卡住一段时间 - 您需要适当的原子更新才能确保其他处理器的缓存无效。

我假设这`renderer->render()`需要相当多的时间，所以阅读`stillRendering`应该不会对整体运行时间产生太大影响。`volatile`通常只是意味着“请不要将其放入寄存器并保留在那里”。

（你可能也需要`programRunning`成为一个`volatile`！）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-25T19:03:13.790

> 将 volatile 添加到 just stillRendering 会导致应用程序在我每次测试时成功退出

是的，您的方案将起作用。

使用`volatile`变量进行线程同步时发生的常见错误是对`volatile`变量的操作被**假定为原子**操作。他们不是。

在您的情况下，您正在轮询一个布尔值，等待它恰好一次更改为 0。您似乎并不期望任何操作是原子的。另一方面，即使您轮询单个`int`，C++ 也不能保证更改该 int 的线程会原子地这样做。

> 我不确定为什么“programRunning”是否不稳定似乎并不重要。

**这很重要。** 让它`volatile`。

制作变量`volatile`将保证避免特定的缓存优化，这是您想要的。

这并不意味着当变量*不是易失性时，您可以**保证获得*相同的缓存优化。你只是让编译器决定。在这个特定的时间，编译器恰好正在做出适合您的决定。

 *> 最后，我不确定将 volatile 用于“stillRendering”会如何影响程序的性能。

您的表现可能会受到以下负面影响：

```
while(stillRendering)
{
} 
```

您要求一个线程（可能是一个完整的 CPU 内核）无休止地读取单个变量。

考虑在该 while 循环中添加睡眠调用。***

# linux - 配置 LAMP，无法将我的文件复制到 /var/www/html/

> ID：15074030
> 
> 赞同：0
> 
> 时间：2013-02-25T18:41:17.190
> 
> 标签：linux, lamp, chmod

我不知道如何**chmod**文件

输入后`# ls -al /var/www/html`我得到这个：

1.  drwxr-xr-x。2 根根 4096 Feb 25 23:23 。
2.  drwxr-xr-x。6 根根 4096 Feb 25 21:27 ..
3.  -rw-r--r--。1 根 34 Feb 25 23:26 index.php

* * *

这次是我第二次尝试在 Fedora 15 上安装 LAMP，第一次最终重新安装了整个系统，因为我**错误地修改**了一些文件

linux新手，所以请多多包涵，具体一点

也是第一次在这里发布我的问题

提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T21:08:20.220

`chmod`是用于在 UNIX 中更改文件权限的命令。键入`ls -al /var/www/html`时，您会获得文件列表（以及由于该`a`选项而隐藏的文件）及其所拥有的权限。

```
drwxr-xr-x. 2 root root 4096 Feb 25 23:23 .
drwxr-xr-x. 6 root root 4096 Feb 25 21:27 ..
-rw-r--r--. 1 root root 34 Feb 25 23:26 index.php 
```

可以看成：`ooogggrrr`意思`o`是文件`g`的所有者，所有者所属的组，`r`其余的用户。每个字段可以是 r/-（值 4）、w/-（值 2）和 x/-（值 1），表示读、写和执行。

然后，如果你想要一个文件来 *ch*ange *mod*es，你必须做**chmod XXX file**，其中每个 X 对应一个组。

所以如果你想让一个文件被所有者写入、读取和执行，你需要4+2+1=7的权限。我们通常对网络服务器中的文件设置 755 权限，以便所有用户都可以访问所有内容，但只有所有者可以在那里写入。

所以，总而言之，如果你必须在你的 Fedora 上 chmod 文件，你必须给某个目录中的文件更多的权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T19:33:15.677

你可以去一个终端写：

```
sudo nautilus / 
```

然后，将打开一个窗口，您将拥有更改所需内容的所有权限 - 小心！

然后，您可以转到 /var/www/ 并更改文件夹“html”及其文件的权限，方法是右键单击文件夹/文件，使用用户友好的环境......

# java - 使用 JDBC 驱动程序在 SQL Server 中设置默认行预取

> ID：15074037
> 
> 赞同：5
> 
> 时间：2013-02-25T18:41:30.407
> 
> 标签：java, sql-server, jdbc

我有一个应用程序，我想在其中定义要为连接预取的默认行数，用于 Oracle 和 SQL Server 驱动程序。Oracle 驱动程序有一个`OracleConnection`接口，它提供了`setDefaultRowPrefetch`执行此操作的方法，但我没有找到与 SQL Server 驱动程序等效的任何东西。

有一种方法可以为使用 SQL Server JDBC 驱动程序的连接定义默认行预取？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-05-02T02:48:23.847

设置行提取大小的常用方法是：

1.  通过**`java.sql.Connection`**供应商实现类**自定义方法**（例如`OracleConnection.setDefaultRowPrefetch`）
2.  Via **`java.sql.Statement.setFetchSize(int)`**: 向驱动程序提供有关`ResultSets`从这里获得的所有行获取大小的提示`Statement`。此方法由`PreparedStatement`and继承`CallableStatement`。大多数 JDBC 驱动程序都支持它。
3.  Via **`java.sql.ResultSet.setFetchSize(int)`**: 向驱动程序提供有关所有这些的行获取大小的提示`ResultSet`。

MS SQL Server JDBC 驱动程序不支持以下任何一种方式：

1.  MSSQL 驱动程序没有这样的方法。
2.  不幸的是，虽然大多数驱动程序都尊重提示，但 MSSQL 驱动程序却没有。所以对你没用。请参阅[Statement.setFetchSize(nSize) 方法在 SQL Server JDBC 驱动程序中的真正作用是什么？](https://stackoverflow.com/questions/1318354/what-does-statement-setfetchsizensize-method-really-do)
3.  与 相同的问题`Statement`。

默认情况下，它会从数据库中检索*所有*行，除非您在 JDBC 驱动程序中指定游标类型。MSSQL 驱动程序不能使用通常的方法直接控制获取大小。

**解决方案：**

*   投你`Statement`到`SQLServerStatement`使用方法`setMaxRows(int)`。为什么他们没有在[史蒂夫鲍尔默](http://www.google.com/imgres?imgurl=http://media.tumblr.com/tumblr_lqzaz1tNoz1qzkqhi.jpg&imgrefurl=http://www.tumblr.com/tagged/steve%2520ballmer&h=262&w=350&sz=11&tbnid=ak2TvZnMnRH8LM:&tbnh=80&tbnw=107&zoom=1&usg=__KjSV0eUmtcZvsCEnIS8_6YsIRLs=&docid=vEFAfBz2chaT3M&sa=X&ei=1M-BUd3TG8uuiQeF84H4Bg&ved=0CIIEEP4dMDc)知道的标准方法中实现这一点;^）
*   使用光标类型创建驱动程序。游标的默认提取大小为 1。设置`Connection`字符串属性`selectMethod=cursor`。或者，您可以为只进、只读访问创建`Statement`具有可滚动性的，然后使用该方法来调整性能。 [http://technet.microsoft.com/en-us/library/aa342344%28SQL.90%29.aspx](http://technet.microsoft.com/en-us/library/aa342344%28SQL.90%29.aspx)`com.microsoft.sqlserver.jdbc.SQLServerResultSet.TYPE_SS_SERVER_CURSOR_FORWARD_ONLY``setFetchSize`
*   使用（专有）SQL 来限制返回的行数（**与设置提取大小不同**）：`SET ROWCOUNT`或`SELECT TOP N`
*   改用开源**jTDS**驱动，专为克服SQL Server驱动的问题而设计。是一位优秀的司机。

# python - cx_Freeze python exe转换没有名为“re”的模态

> ID：15074039
> 
> 赞同：0
> 
> 时间：2013-02-25T18:41:38.310
> 
> 标签：python, exe, cx-freeze

我正在尝试使用 cx_Freeze 将 python 脚本转换为 exe，但是在转换并尝试运行它之后，它出现了错误的“没有名为“re”的模块”。我不确定那是什么，但我根本没有在我的代码中引用它。这是我的代码和设置脚本的链接：

设置： http: [//pastebin.com/6JN093u7](http://pastebin.com/6JN093u7)

我的代码： http: [//pastebin.com/nEinps53](http://pastebin.com/nEinps53)

我在 win7 上使用 Python 3.3，尽管我的代码是用 3.2 编写的，如果这有所不同的话。如果我可以提供更多信息，请询问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T19:24:47.113

1.  您的代码通常会自行编译吗（在您通过 cx_Freeze 运行它之前）？“re”是python正则表达式库。

2.  如果你是为客户做这个，你确定你的合同允许你像这样公开发布完整的源代码吗？

3.  无意冒犯，但你的编码风格真的很糟糕。你重复了很多代码：你可以通过编写通用函数来大大简化这个程序。例如，第 16-60 行可以简化为：

    ```
    def get_user_response(text, err_text="Please enter a number"):
        derp=False
        while derp == False:
            try:
                val = str(input(text))
                derp = True
             except ValueError:
                    win32api.MessageBox(None,err_text, "Error!")
                    derp = False
            derp = False
        return val
    room_price.write(get_user_response("What is the room price?"))
    night_price.write(get_user_response("What is the laundry price?"))
    Laundry_price.write(get_user_response("What is the internet price per hour?"))
    Telephone_price.write(get_user_response("What is the telephone price per hour?")) 
    ```

4.  关于这一点：考虑最后 4 行：前两个变量名使用小写，后两个变量使用混合大小写。为什么？这只会让你的生活变得艰难。您应该选择一个命名约定并坚持下去。

5.  您的`PassworD()`功能只是一个非常非常糟糕的主意。不要以纯文本形式存储密码。一个常见的解决方案是将密码存储为加盐哈希，但我不会假装在加密或安全方面非常出色。但我知道你的做法是个坏主意，你应该研究以明文形式存储密码的替代解决方案。

无论如何：我看不到您的特定错误的来源。对不起，你必须自己想办法。但是您可以通过各种方式大大简化您的代码（其中最重要的是划分频繁重复的代码并使用命名约定），并且更简单的代码更容易调试。

# javascript - Typescript 调试仅适用于本地文件系统

> ID：15074040
> 
> 赞同：1
> 
> 时间：2013-02-25T18:41:40.267
> 
> 标签：javascript, typescript, webstorm

我使用 webstorm 来部署我的 webapp。我喜欢在本地或远程 html 服务器 (http://) 上进行调试。断点仅适用于本地文件系统“file://”。有解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T19:05:05.960

对于 0.8.2.0 及更早版本，这不起作用。假设您的所有 .map 和 .ts 文件都可以在服务器上访问，您将能够使用 0.8.3.0 版本执行此操作（应该在明天或周三的某个时间发布）。

# ios - iOS otool 检测私有 api

> ID：15074043
> 
> 赞同：4
> 
> 时间：2013-02-25T18:41:48.710
> 
> 标签：ios, xcode, iphone-privateapi, otool

我是第一次 ios 开发人员，找不到任何关于私有 api 的文档。所以我一直在寻找一些关于如何使用 otool 的教程。我能找到的唯一确定的事情是我必须通过 xcode 首选项下载命令行工具。我还不断看到将其链接到 .app 文件的引用，但我不知道在哪里可以找到它以及如何在工具中使用它。任何链接或建议？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T19:18:38.227

# 使用工具

这里是[官方文档](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/otool.1.html)

这里是关于otool使用的问题： [how to use otool](https://stackoverflow.com/questions/5946756/how-to-use-otool)

# 检测私有 api 使用情况

[Apple 怎么知道你在使用私有 API？](https://stackoverflow.com/questions/2842357/how-does-apple-know-you-are-using-private-api/2842873#2842873)

[检测私有 API](https://stackoverflow.com/questions/9815498/detecting-private-apis)

在这里我有一个问题。为什么要检测私有api？通常，当您计划将应用程序发送到 AppStore 时，会出现此问题。如果是这样，可能 iphone-privateapi 标签不适合这个问题。因为，这个标签更多的是关于如何使用私有 api（并暗示应用程序不会被发送到 Appstore）

# 私有 API 文档

这个很难。没有好的文档。信息是零散的，一旦新版本的 iOS 发布就过时了。

查看这些问题以找到一些有趣的链接：

[iOS 私有 API 文档](https://stackoverflow.com/questions/1150360/ios-private-api-documentation)

[如何使用 iPhone SDK 私有 API](https://stackoverflow.com/questions/2838656/how-to-use-iphone-sdk-private-apis)

[https://stackoverflow.com/questions/12734960/some-structured-information-on-ios-internals](https://stackoverflow.com/questions/12734960/some-structured-information-on-ios-internals)

# c++ - 在 SDL 窗口打开的情况下获取终端输入？

> ID：15074046
> 
> 赞同：0
> 
> 时间：2013-02-25T18:42:03.530
> 
> 标签：c++, sdl

我正在尝试制作一个使用 SDL 窗口的程序，该窗口是通过一个对象调用的，该对象将包含要在窗口上执行的函数。

我遇到的问题是我想通过终端接受输入，而终端又会调用命令来完成对象。

我尝试过使用多线程，但我发现在主线程和 SDL 线程中都需要类的实例，解决此问题的方法是全局类实例，但我认为这将是糟糕的编程。

有没有其他方法可以打开 SDL 窗口并在终端窗口中执行诸如 cin 之类的操作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T19:26:29.130

使用于 I/O 目的的辅助线程尽可能简单是一种很好的做法。让您的主线程处理所有逻辑，并创建一个将值推送到互斥堆栈的线程。然后主线程可以从堆栈中弹出任何值并相应地对其做出反应。由于您使用的是控制台，因此您不能有并发输入，因此不需要堆栈。这是一个简单的例子。虽然我在这台计算机上没有可用的工具链，但这似乎应该可以工作。

```
#include<string>
#include<sdl/sdl.h>
#undef main //I HATE SDL FOR REDEFINING MAIN

class asynccin{
    static std::string val;
    static int hasval;
    static void thread(void*a){
        cin >> val;
        hasval = 2;
    }
    public:
    static bool begininput(){
        if( hasval != 0 ) return false;
        hasval = 1;
        SDL_CreateThread( thread, NULL );
    }
    static bool hasinput(){
        return hasval == 2;
    }
    static std::string reapinput(){
        hasval = false;
        return val;
    }
};

int main{}{

    //init SDL
    while( true ){
        //loop stuff
        asynccin::begininput();
        if( asynccin::hasinput() ){
            cout << asynccin::reapinput();
        }
    }
} 
```

# xpages - xpages中的自定义登录表单？

> ID：15074049
> 
> 赞同：1
> 
> 时间：2013-02-25T18:42:10.157
> 
> 标签：xpages

如何在 xPages 中创建自定义登录表单？我发现这个 [http://www.openntf.org/internal/home.nsf/project.xsp?action=openDocument&name=Xpages%20Dojo%20Login%20Custom%20Control](http://www.openntf.org/internal/home.nsf/project.xsp?action=openDocument&name=Xpages%20Dojo%20Login%20Custom%20Control)

在openntf中。也许只有我一个人，但似乎文档不是很清楚。看来您还需要使用旧的笔记表格？如果是这样，我不清楚他的表单如何连接到 xpage。

该文档似乎没有显示应将 acl 设置为什么。例如，如果匿名的 acl 设置为 No Access，那么用户如何访问登录 xpage？xpages 似乎没有像 Notes 表单上那样的 Public Access 属性。

有没有更好的例子？也许有一个工作示例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T21:40:34.863

基本上，获得自定义登录表单的唯一方法是使用 domcfg.nsf 和从 domcfg.nsf 指向的 FORM。此表单也不能有任何 webqueryopen/webwquerysave 代理（嗯，它可以 - 但它们不会被触发）。

然而，openntf 机制的作用是对服务器使用 Ajax 调用，该调用将通过相同的登录来满足 - 它有两个标准字段（用户名和密码）。因此，XPages 登录表单可以与真实（本机）表单“对话”，您无需将其视为用户。当然，以这种方式，XPage 将不得不处理“异常”（错误的用户/密码、无法访问等）

我希望这能给你一个更清晰的画面;-)

/约翰

# javascript - 如何正确编码/调试复杂的布尔条件

> ID：15074050
> 
> 赞同：1
> 
> 时间：2013-02-25T18:42:12.173
> 
> 标签：javascript

是否可以编写如下 if 语句：

```
if(a === 0 && (b === 0 || c === 0)){
    if(b === 0 && c === 0){
        //a, b, and c are equal to 0
    }
    else if(b === 0){
        //only a and b are equal to 0
    }
    else {
        //only a and c are equal to 0
    }
}
else {
    //a doesn't equal 0, but b or c could so we test those
} 
```

它似乎在我以类似方式编写的代码中不起作用......也许我写错了？这在我的脑海中是有道理的。如何构建我的代码以避免这样的混淆？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T18:48:06.813

我纠正了你的其他：

```
if(a === 0 && (b === 0 || c === 0)){
    if(b === 0 && c === 0){
        //a, b, and c are equal to 0
    }
    else if(b === 0){
        //only a and b are equal to 0
    }
    else {
        //only a and c are equal to 0
    }
}
else {
    //   a === 0 and neither b nor c === 0,
    //or a!==0 and neither b nor c === 0,
    //or a!==0 and either b or c or both === 0 
} 
```

我的提议：

```
if(a === 0 && (b === 0 || c === 0)){
    if(b === 0 && c === 0){
        //a, b, and c are equal to 0
    }
    else if(b === 0){
        //only a and b are equal to 0
    }
    else {
        //only a and c are equal to 0
    }
} else if (a === 0) {
    //a === 0 and neither b nor c === 0,
} else {
    //   a!==0 and neither b nor c === 0,
    //or a!==0 and either b or c or both === 0 
} 
```

另外，您可以考虑按位运算，它可能会更清楚。萨卢多斯，

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T18:51:09.297

我只是会以不同的编码方式编写它，但是您发布的内容按预期工作

[http://jsfiddle.net/u2ert/](http://jsfiddle.net/u2ert/)

```
a=0;
b=0;
c=0;

if(a === 0 && (b === 0 || c === 0)){
    if(b === 0 && c === 0){
        alert("//a, b, and c are equal to 0");
    }
    else if(b === 0){
        alert("//only a and b are equal to 0");
    }
    else {
        alert("//only a and c are equal to 0");
    }
} 
```

changhe 前三行来测试不同的断言

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T18:45:44.460

为什么要在注释中写你可以在代码中写的东西......？

```
if(a === 0 && (b === 0 || c === 0)){
    if(a === 0 && b === 0 && c === 0){

    }
    else if(a === 0 && b === 0){

    }
    else if (a === 0 && c === 0 ) {

    }
    else {
        console.log("Boolean logic wrong: " + (a===0) + ", " + (b===0) + ", " + (c===0)
        // throw error
    }
}
else {
// print out the values of a, b, c here if you are confused
} 
```

此外，这是自调试的，因此您不会对布尔逻辑感到困惑。

# c++ - Visual Studio 2012 可变参数模板宏参数计数

> ID：15074053
> 
> 赞同：0
> 
> 时间：2013-02-25T18:42:24.010
> 
> 标签：c++, visual-c++, macros, visual-studio-2012, variadic-templates

VS2012 支持带有 CTP 的可变参数模板，但如果我只使用宏，有没有办法确定参数的数量？例如，假设宏看起来像这样：

```
#define _ALLOC_MEMBER_CONSTRUCT( \
     TEMPLATE_LIST, PADDING_LIST, LIST, COMMA, CALL_OPT, X2, X3, X4) \
 template<class _Objty COMMA LIST(_CLASS_TYPE)> \
void ConstructSelector(_Objty *_Ptr COMMA LIST(_TYPE_REFREF_ARG)) \
{    \
     BaseClass::construct(_Ptr, LIST(_FORWARD_ARG), /* NUM OF ARGS*/); \
}

    _VARIADIC_EXPAND_0X(_ALLOC_MEMBER_CONSTRUCT, , , , )
    #undef _ALLOC_MEMBER_CONSTRUCT 
```

有没有办法确定最后一个参数的参数数量？当我查看 xstddef.h （定义宏的位置）时，似乎没有简单的方法。我很好奇是否有人找到了使用 MS 宏的方法。

# javascript - DOJO 1.6 和纯 HTML 组件上的连接事件

> ID：15074054
> 
> 赞同：0
> 
> 时间：2013-02-25T18:42:28.373
> 
> 标签：javascript, dojo, dom-events

是否可以将纯 HTML 组件上的事件与 DOJO 1.6 连接起来？

例如

```
...
<input type="radio" class="radiobutton">
<input type="radio" class="radiobutton">
...

<script type="text/javascript">
    dojo.addOnLoad(function () {
        var radioButtons = dojo.query(".radiobutton", this.domNode);
        var func = dojo.hitch(this, hello());
        dojo.connect(radioButtons[0], "onclick", func);

        function hello(){
            alert("Hello");
        }
    });
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T18:52:37.940

问题是您正在调用 hello 方法并连接函数调用的结果。你应该做的是搭上这个功能。但是，在您发布的示例中，没有必要搭便车。

```
var fnHello = function(){
  alert("Hello");
};
// fnHello = dojo.hitch(this, fnHello);
dojo.connect(radioButtons[0], "onclick", fnHello); 
```

[http://jsfiddle.net/cswing/GmE3Q/](http://jsfiddle.net/cswing/GmE3Q/)

# css - DIV 底部的中心图像

> ID：15074060
> 
> 赞同：1
> 
> 时间：2013-02-25T18:42:43.107
> 
> 标签：css, image, html, center

我发现了很多相关的问题，但似乎没有像我想要的那样工作。我想将 id="bob" 的图像居中放在我的 DIV 底部。

我的 HTML 如下：

```
<table id="newsTable" width="100%" border="1">
  <thead>
     <tr>
       <th>
         <div onClick="openClose('2006')" style="cursor:hand; cursor:pointer">
              Title
              <img id="20062" src="images/play.png" style="float:right;">
         </div>
       </th>
     </tr>
   </thead>
   <tbody>
     <tr>
        <td>
          <div id="2006" class="texter">
            <h2>Subtitle</h2>
              <img src="images/image.jpg" style="float:right;">
              <p>
                Some text
              </p>
              <div class="album">
                <div class="album-content">
                  <img id="bob" src="images/picture.jpg">
                </div>
              </div>
              <img style="float:left;" id="prev" src="images/left.gif">
              <img style="float:right;" id="next" src="images/right.gif">
          </div>
        </td>
      </tr>
    </tbody>
  </table> 
```

使用以下 CSS 样式：

```
#newsTable {
    border: 1px solid #e3e3e3;
    width: 100%;
    border-radius: 6px;
    -webkit-border-radius: 6px;
    -moz-border-radius: 6px;
}

#newsTable td, #newsTable th {
    padding: 5px;
    color: #333;
}

#newsTable td {
    line-height: 20px;
    font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
    font-size: 12px;
    border: 0px solid;  
    font-weight: bold;
}

#newsTable thead {
    font-family: "Lucida Sans Unicode", "Lucida Grande", sans-serif;
    font-size:18px;
    padding: .2em 0 .2em .5em;
    text-align: left;
    color: #4B4B4B;
    background: transparant;
    border-bottom: solid 1px #999;
}

#newsTable th {
    font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
    background-image:url(images/background_thead.jpg);
    background-repeat: no-repeat; 
    font-size: 18px;
    line-height: 25px;
    font-style: normal;
    font-weight: normal;
    text-align: left;
    text-shadow: white 1px 1px 1px;
}

.texter {
    display:none
}

@media print {
    .texter {
       display:block;
    }
}

.album {
    height: 600px;
    position: relative;
}

.album-content {
    position: absolute;
    bottom: 0;
    float: none;
    text-align:center;
} 
```

我几乎尝试了所有方法，但似乎没有任何东西可以将 id="bob" 的 IMG 移动到中心。谁能告诉我 CSS 的哪一部分将图像保持在左侧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:45:12.260

你的风格后遗漏了一句名言：`<img style="float:right; id="next" src="images/right.gif">`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T19:37:44.873

您的`.album-content`div 是绝对定位的，因此它不会采用其父容器的宽度，因此它只会与您的图像一样宽。您需要设置`width`或设置`left`and`right`属性：

**要么**：

```
.album-content {
    position   : absolute;
    bottom     : 0;
    left       : 0;
    right      : 0;
    text-align : center;
} 
```

**或者**：

```
.album-content {
    position   : absolute;
    bottom     : 0;
    width      : 100%;
    text-align : center;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T18:46:22.307

@user2108340 像这样更改 css

```
 .album-content {
    width:100%;
    position: absolute;
    bottom: 0;
    text-align:center;

    } 
```

# php - 在 PHP MySQL 中按日期分组

> ID：15074061
> 
> 赞同：-6
> 
> 时间：2013-02-25T18:42:49.970
> 
> 标签：php, mysql

我有一个看起来像这样的数据库：

```
编号 | 标题 | 时间戳
-------------------------------------------------- ------------
0 测试 1 2013-02-26 00:00:00
1 测试 2 2013-02-26 00:00:00
2 测试 3 2013-02-29 00:00:00
3 测试 4 2013-03-31 00:00:00

```

我想选择它们并将它们按如下分组输出：

```
明天
测试 1
测试 2

本星期
测试 3

超越
测试 4

```

我需要 MySQL 和 PHP 来输出它，我想不通。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T18:49:44.267

您可以使用带有and函数的`CASE`表达式：[`Week()`](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_week)[`Day()`](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_day)

```
select title,
  case 
    when week(timestamp) = week(curdate())
      then 
        case 
          when day(timestamp) = day(curdate()) +1
          then 'Tomorrow'
          else 'This Week'
        end 
    when week(timestamp) > week(curdate())
      then 'And Beyond'
  end as Col
from yourtable 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/8a45b/6)。

或者这可以写成：

```
select title,
  case 
    when week(timestamp) = week(curdate())
        and day(timestamp) = day(curdate()) +1
      then 'Tomorrow'
    when week(timestamp) = week(curdate())
      then 'This Week'
    else 'And Beyond'
  end as Col
from yourtable 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/8a45b/7)

这将返回：

```
|  TITLE |        COL |
-----------------------
| Test 1 |   Tomorrow |
| Test 2 |   Tomorrow |
| Test 3 |  This Week |
| Test 4 | And Beyond | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T18:54:24.047

您可能需要在 select 子句中使用 case 语句来创建一个计算字段，然后您可以将其分组。

```
SELECT `id`, `title`, `timestamp`,
    (CASE
        WHEN timestamp < DATEADD(NOW(), INTERVAL 1 DAY THEN 'Tomorrow'
        ELSE WHEN timestamp < DATEADD(NOW(), INTERVAL 1 WEEK THEN 'This week'
        ELSE 'Beyond'
    END) AS `timeframe`
FROM table
ORDER BY `timestamp` ASC 
```

请注意，我正在利用时间戳的排序顺序，这将为您创建一个逻辑分组。

# multithreading - scala notify() 与 notifyAll()

> ID：15074064
> 
> 赞同：6
> 
> 时间：2013-02-25T18:43:04.777
> 
> 标签：multithreading, scala

鉴于 scala 中生产者-消费者问题的以下实现

```
class PC {
  var buffer = null.asInstanceOf[Int]
  var set = false

  def produce(value: Int) = synchronized {
    while (set) wait()
    buffer = value
    set = true
    notify() }

  def consume: Int = synchronized {
    while (!set) wait()
    val result = buffer
    set = false
    notify()
    return result; }
} 
```

有 3 件事我不太明白：

1.  为什么，如果我使用 notify 而不是 notifyAll，我最终会陷入僵局；我应该在哪里使用 notifyAll，用于生产或消费？

2.  我不应该有一个对象，例如锁，然后调用 lock.synchronized、lock.wait 和 lock.notify 吗？为什么它会这样工作，不生产和消费有 2 个不同的监视器关联？为什么生产的“通知”通知消费的“等待”？

3.  监视器在 scala 中是如何工作的（在我们的例子中）？它是否使用信号并继续策略？如何在特定条件下将等待队列中的进程移动到可运行队列？每个条件/锁是否有一个队列（例如 lock1.wait、lock2.wait 等）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T22:18:02.880

这实际上是一个主要关于 Java 并发的问题。Scala 并发建立在 Java 并发模型之上，但语法不同。[在 Scala 中，`synchronized`是 的一个方法`AnyRef`](https://stackoverflow.com/questions/7826822/why-this-synchronized-instead-of-just-synchronized-in-scala)，上面的语法等价于使用关键字`synchronized`来编写*同步方法*，如下面的 Java 代码：

```
public class PC {
  public int buffer;
  public boolean set;
  public synchronized void produce(int value) { 
    while(set) wait();
    buffer = value;
    set = true;
    notify(); 
  }
  public synchronized int def consume { 
    while(!set) wait();
    int result = buffer;
    notify();
    return result; 
  }
} 
```

有关 Java 并发模型的更详细介绍，请阅读[Java 教程](http://docs.oracle.com/javase/tutorial/essential/concurrency/syncmeth.html)。您可能想要研究[Java 并发库](http://download.oracle.com/javase/1,5.0/docs/api/java/util/concurrent/package-summary.html)。例如，您可以使用容量为 1的[阻塞队列来实现相同的功能。](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/BlockingQueue.html)

在回答您的问题时：

**1\. 为什么，如果我使用 notify 而不是 notifyAll，我最终会陷入僵局；我应该在哪里使用 notifyAll，用于生产或消费？**

您可能有一个竞争条件（而不是死锁），因为`notify()`in`consumer()`是由其他一些消费者线程而不是生产者线程接收的，但这只是一个猜测。至于是否使用`notify()`或`notifyAll()`以何种方式使用，有人建议`notifyAll()`总是使用。而且，在这种情况下，您可以使用`notifyAll()`, 因为您在条件 while 循环中等待 - 由于[wait()](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#wait%28long%29)文档中描述的各种原因，您应该始终这样做。但是，您也可以选择在 中`notify()`用作优化`producer()`，因为我假设您只希望一个消费者使用缓冲区内容。使用当前的实现，您仍然必须使用`notifyAll()`in`consume()`或者可能将自己暴露于通知其中一个消费者而不是单个等待的生产者导致生产者永远等待的情况。

**2.我不应该有一个对象，例如锁，并调用lock.synchronized、lock.wait和lock.notify吗？为什么它会这样工作，不生产和消费有 2 个不同的监视器关联？为什么生产的“通知”通知消费的“等待”？**

你确实有一把锁。这是对`PC`实例的隐式锁定，在 Java 中，每个对象只有一个监视器，尽管可能有许多入口点。`wait()`in由in`consume()`通知，因为它们都在等待对同一资源（实例）的锁定。如果您想实现更灵活或更细粒度的锁定，则可以使用[Java 并发库](http://download.oracle.com/javase/1,5.0/docs/api/java/util/concurrent/package-summary.html)中的各种策略，例如[Locks](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/package-frame.html)。`notify()``produce()``PC`

**3\. 监视器在 scala 中是如何工作的（在我们的例子中）？它是否使用信号并继续策略？如何在特定条件下将等待队列中的进程移动到可运行队列？每个条件/锁是否有一个队列（例如 lock1.wait、lock2.wait 等）。**

有关 JVM 如何执行线程同步的详细说明，请阅读以下内容：[Java 虚拟机如何执行线程同步](https://stackoverflow.com/questions/6584355/how-does-the-synchronize-functionnality-work-in-java)。有关同一作者的一章的更多详细信息，您可以阅读[Java 虚拟机内部](http://www.artima.com/insidejvm/ed2/threadsynch.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T22:32:44.993

### 为什么，如果我使用 notify 而不是 notifyAll，我最终会陷入僵局？

正如您可能已经观察到的那样，如果只有一个生产者和一个消费者，则不会发生您所看到的问题（因为在这种情况下，`notify`您期望它做的工作是让下一个生产者/消费者采取行动）。

但是，如果您有多个生产者或消费者，则会出现以下问题：假设有 2 个生产者和一个消费者。在这种情况下，如果您使用 ，肯定会发生以下情况`notify()`：

1.  其中一位生产者运行，并调用`notify()`
2.  代替消费者，通知另一个生产者
3.  现在被唤醒的生产者`notify()`无限等待，因为消费者永远不会得到通知

如果`notifyAll`被调用，总会有一个消费者得到通知，因此永远不会出现生产者或消费者无限期等待对方的问题。

### 我不应该有一个对象，例如锁，然后调用 lock.synchronized、lock.wait 和 lock.notify 吗？

您的锁定对象就是`PC`对象。Scala`object`只是编译器为您生成的类的单例实例。由于 your`object`实际上是 class 的类实例`Object`，因此它也继承了它的`notify`,`notifyAll`和`wait`方法。

# image - 在matlab中加载文本数据

> ID：15074067
> 
> 赞同：1
> 
> 时间：2013-02-25T18:43:16.647
> 
> 标签：image, matlab, signal-processing

我有一些文本文件（1.txt、2.txt、...、60.txt），它们都有 5 行标题。我使用以下代码，但它无法识别标题并导入所有数据。我怎么能说 matlab 从特定行开始导入？

```
num_txt=60;
input_dir='C:\data';

filenames=dir(fullfile(input_dir,'*.txt'));
i=1;
for n=1:num_txt    
    filename=fullfile(input_dir, filenames(n).name);
    img=importdata(filename);     
    data(:,i)=img(:);
    i=i+1;
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T18:48:13.630

[IMPORTDATA](http://www.mathworks.com/help/matlab/ref/importdata.html)有 2 个附加参数：delimiterIn 和 headerlinesIn。

所以你使用（假设制表符作为分隔符）：

```
img=importdata(filename,'\t',5); 
```

我还建议预先分配`data`矩阵。

请注意，要使您的代码正常工作，请确保所有输入文件具有相同的大小。否则你会得到错误`data(:,n)=img(:);`（是的，使用`n`代替`i`）。

对于以上两个问题，您可以插入循环：

```
if n==1
    data = zeros(numel(img),num_txt);
else
    assert(numel(img)==size(data,1),'sprintf('File %s has different size', filenames(n).name))
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T19:39:09.367

I would recommend using readtext.m found [here](http://www.mathworks.com/matlabcentral/fileexchange/10946), if you know the basics and you don't want to spend much time on how to read text using MATLAB. But if you are learning, I suggest you do it yourself.

# iphone - 在 iPhone 应用程序中进行 AS（自治系统）查找的最佳方法？

> ID：15074074
> 
> 赞同：1
> 
> 时间：2013-02-25T18:43:41.627
> 
> 标签：iphone, ios

在 iPhone 的应用程序中进行 AS（自治系统）查找的最佳方法是什么？

看起来 iPhone 应用程序没有 root 访问权限，所以我不能从应用程序中使用`system()`or调用“dig”或“whois” `popen()`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T21:54:29.733

1）创建一个头文件“whois.h”，内容如下：

extern int whois(int argc, char *argv[]);

2) 将函数名称从 main 更改为任意名称：

int main(int argc, char *argv[]) {

到：

int whois(int argc, char *argv[]) {

3) 在你的 object-c .m 文件中，导入 whois.h

现在您可以调用该函数：

谁是（）;

# makefile - GNU Make 可以为配方回显行添加前缀吗？

> ID：15074078
> 
> 赞同：1
> 
> 时间：2013-02-25T18:44:04.700
> 
> 标签：makefile, gnu-make, output

我正在使用 GNU Make，并希望它在回显每个配方命令时添加一个前缀。例如，给定这个 makefile：

```
foo:
    echo bar
    echo baz 
```

实际行为：

```
$ make -B foo
echo bar
bar
echo baz
baz 
```

期望的行为：

```
$ make -B foo
+ echo bar
bar
+ echo baz
baz 
```

（在这种情况下，`+`是前缀。）

如果我可以配置前缀是什么，那就太好了，但这不是必需的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T19:30:41.583

这不是 Make 很自然地做的事情。我不认为你能比一个可怕的 kludge 做得更好：

```
define trick
    @echo + $(1)
    @$(1)
endef

foo:
    $(call trick, echo bar)
    $(call trick, echo baz) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T19:36:32.230

最简单的方法是更改`SHELL`​​ make 变量。在这种情况下，使用参数运行 shell`-x`应该可以解决问题。就像是

```
$ make SHELL:='bash -x' 
```

甚至

```
$ make .SHELLFLAGS:='-x -c' 
```

在这种情况下。对于更复杂的输出，一个快速的 shell 脚本很适合：

```
$ cat script
#!/bin/bash
echo "EXECUTING [$*]"
$* 
```

其次是

```
$ make SHELL:=./script .SHELLFLAGS:= 
```

# ruby-on-rails - 如何在 Rails 的控制器中查看 show 函数正在做什么？

> ID：15074081
> 
> 赞同：0
> 
> 时间：2013-02-25T18:44:13.897
> 
> 标签：ruby-on-rails

我有一条路线去：`GET /api/:api_version/publishers/:id(.:format) {:controller=>"api/publishers", :action=>"show"}`

所以我打开它`publishers_controller`，`api`它看起来：

```
# Provides access to publisher information
class Api::PublishersController < Api::BaseResourceController
  inherit_resources
  respond_to_data_formats

  before_filter :find_publisher
  before_filter :require_publisher_login, :only => :authenticate

  actions :show

  # Note: We remove App scope from cache path, since Publisher info should be cached across all apps
  caches_action :show, :login, :cache_path => lambda {|c| {:version => c.send(:publisher_version), :model_version => Publisher.cache_config.version}}, :expires_in => 60.seconds

  # Action redirects the top frame to the publisher's site (for the user to log in)
  def login
    # Prevent infinite loop where the page redirects to itself.
    raise ArgumentError, 'Publisher website url is not configured' if @publisher.website_url.blank?
  end

  def authenticate 
    respond_with(@publisher)
  end

  private

    def find_publisher
      params[:publisher_id] = params[:id]
      super
    end

    def publisher_version
      @publisher.lock_version
    end

end 
```

没有`show`功能，那我怎么看它的作用呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T18:47:43.773

这个类继承了`show`方法，大概来自`Api::BaseResourceController`. 如果我必须打赌，我猜它`Api::BaseResourceController`使用[了inherited_resources](https://github.com/josevalim/inherited_resources)或类似的东西，它只是假设该`show`方法应该做一件非常典型的事情：找到记录并使用可用的模板显示它。

# java - 初始化类和实例化对象的区别？

> ID：15074083
> 
> 赞同：26
> 
> 时间：2013-02-25T18:44:22.680
> 
> 标签：java

我尝试通过搜索引擎搜索这个问题，但可以找到一个主题来解释初始化类和实例化对象之间的区别。

有人可以解释它们有何不同吗？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2017-02-27T11:02:51.183

与该主题相关的三个术语：声明、初始化和实例化。

从后到前工作。

**实例化**

这是为对象分配内存的时候。这就是`new`关键字正在做的事情。`new`从关键字返回对已创建对象的引用。

**初始化**

这是将值放入分配的内存中的时间。这就是类的[构造函数](https://docs.oracle.com/javase/tutorial/java/javaOO/constructors.html)在使用`new`关键字时所做的事情。

变量还必须通过将内存中某个对象的引用传递给它来初始化。

**宣言**

这是当您向程序声明将存在某种类型的对象以及该对象的名称时。

**同一行上的初始化和实例化示例**

```
SomeClass s; // Declaration
s = new SomeClass(); // Instantiates and initializes the memory and initializes the variable 's' 
```

**将不同行上的变量初始化到内存的示例**

```
void someFunction(SomeClass other) {
    SomeClass s; // Declaration
    s = other; // Initializes the variable 's' but memory for variable other was set somewhere else
} 
```

我还强烈推荐阅读[这篇文章](http://javadude.com/articles/passbyvalue.htm)，了解 Java 如何处理传递变量的本质。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-25T18:56:39.233

当 Java 类被“加载”到 JVM 中时，必须以多种方式初始化类表示。

*   类的“常量池”扩展为运行时结构，其中的一些值被初始化。
*   定位类的超类（通过常量池）并提取它的属性。
*   为类的方法构造一个方法表。个别方法被标记为“尚未验证”。
*   对类表示执行了几个验证操作。
*   静态字段被初始化。
*   在第一次引用时，字符串文字是“interned”，并且 interned 字符串指针放置在常量池中
*   在第一个参考方法是“验证”。
*   等人。

有一组特定的术语用于指代类初始化，但我不记得具体内容了。某些事情只能在类被初始化到特定点之后发生，等等。

实例化对象只能在类已加载和初始化之后发生（尽管所有方法都不需要经过验证）。对象的大小是从类中获取的，并且该堆被定位并归零。对象头中填充了指向类的指针和用于管理类的其他字段。然后调用该类的适当构造函数方法（它将调用任何超级的构造函数）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-06-14T11:15:48.147

**点 originOne** = new Point(23, 94); -- 示例 1

**矩形 rectOne** = new Rectangle(originOne, 100, 200); -- 示例 2

**1）声明：**加粗的代码是所有变量声明，将变量名与对象类型相关联。

**2) 实例化：** new 关键字是创建对象的Java 运算符。

**3) 初始化：** new 操作符之后是对构造函数的调用，该构造函数初始化新对象。

参考：[https](https://docs.oracle.com/javase/tutorial/java/javaOO/objectcreation.html#:~:text=Instantiation%3A%20The%20new%20keyword%20is,which%20initializes%20the%20new%20object) ://docs.oracle.com/javase/tutorial/java/javaOO/objectcreation.html#:~:text=Instantiation%3A%20The%20new%20keyword%20is,which%20initializes%20the%20new%20object .

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-11T10:01:00.220

使用静态初始化块来初始化类。（静止的 { }）。它不是一个方法，它是一个初始化器。它在第一次引用类本身时执行。

例如，通过调用其构造函数使用 new 关键字来实例化对象。那时静态初始化块将不会被执行。

# javascript - 在javascript中获取ul并附加li

> ID：15074084
> 
> 赞同：0
> 
> 时间：2013-02-25T18:44:26.067
> 
> 标签：javascript, html-lists

我想要做的是创建一个`<li>`应该添加到现有的`<ul>` 我想将文本节点附加到而不给它一个ID。我尝试用纯 JavaScript 来做，没有 jQuery。

到目前为止我得到了什么（它不起作用）：

```
function addElement () {
    var newLi = document.createElement("li");
    var text = document.createTextNode("Teststring in <li>");
    newLi.appendChild(text);
    var ulnew = document.getElementsByTagName('ul')
    ulnew.appendChild(newLi)    
} 
```

HTML

```
<body onload="addElement()">
    <ul></ul>
</body> 
```

有谁能帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-25T18:46:21.403

`getElementsByTagName`返回一个节点列表。您需要从中获取特定标签：

```
ulnew[0].appendChild(newLi); 
```

[http://jsfiddle.net/eKeFN/](http://jsfiddle.net/eKeFN/)

# android - android.app.ActivityThread.handleStopActivity 中的 NullPointerException

> ID：15074087
> 
> 赞同：11
> 
> 时间：2013-02-25T18:44:39.047
> 
> 标签：android, nullpointerexception

因此，在与我相关的跟踪中不断出现错误，这是一个示例跟踪：

```
java.lang.NullPointerException
at android.app.ActivityThread.handleStopActivity(ActivityThread.java:2484)
at android.app.ActivityThread.access$1800(ActivityThread.java:117)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:948)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3695)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:878)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:636)
at dalvik.system.NativeStart.main(Native Method) 
```

其他轨迹类似，只是行号不同：2484、2472 和 2476。

还有 3 份提到该设备的报告提到：M865 华为 Ascend II 应该有 2.3。

在给定行号查看 2.1 - 4.1 （我的应用程序 minSdk 为 7 ）的源代码后，这些行可能会引发错误：

2.3.7 - [2472行](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.3.7_r1/android/app/ActivityThread.java?av=f#2472)

2.3.6 - [2472行](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.3.6_r1/android/app/ActivityThread.java?av=f#2472)

```
private final void handleStopActivity(IBinder token, boolean show, int configChanges) {
    ActivityClientRecord r = mActivities.get(token);
    r.activity.mConfigChangeFlags |= configChanges; // line 2472

    StopInfo info = new StopInfo();
    performStopActivityInner(r, info, show);
    ... 
```

任何想法是什么导致了这种情况以及如何防止它？

# django - 通过主管的 fcgi 套接字问题

> ID：15074088
> 
> 赞同：0
> 
> 时间：2013-02-25T18:44:49.340
> 
> 标签：django, sockets, nginx, fastcgi, supervisord

我通过主管运行 django 应用程序。

命令：`manage.py runfcgi daemonize=false method=prefork socket=/tmp/django.sock pidfile=/tmp/django.pid`

该应用程序以`django`用户身份运行。

```
ls -al /tmp/django.sock
srwxr-xr-x 1 django www-data 0 2013-02-25 22:18 /tmp/django.sock 
```

Nginx 以`www-data`用户身份运行。

Nginx 需要写入权限。但事实并非如此。如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T12:32:27.960

您需要定义一个`umask`值，以便正确设置套接字权限：

```
manage.py runfcgi daemonize=false method=prefork socket=/tmp/django.sock umask=002 pidfile=/tmp/django.pid 
```

默认值为`022`; 从组中删除写入和其他权限。将其切换为`002`仅删除其他人的写入，将其保留在`www-data`组中。

# javascript - 如何根据点数标记Highcharts x轴

> ID：15074094
> 
> 赞同：0
> 
> 时间：2013-02-25T18:45:05.797
> 
> 标签：javascript, graph, formatting, highcharts

我想获取可见系列的 xAxis 数组的长度，以便我的 x 轴可以有一个相对标签。想想“x 天前”。

当我所有的台词都有 31 分时，我很好

```
xAxis: {
  labels: {
    formatter: function() {
      return 30 - this.value;
  }
} 
```

但现在我的系列有不同的点数。我知道有 Chart.xAxis 函数，但我不确定如何从格式化程序中获取该值。`return this.chart.xAxis.length - this.value`显示从 1 开始的负数，因此它似乎返回 0。`return this.chart.xAxis[0].length`也不起作用，如果有多个 x 轴，这是语法。

我的系列数据使用哈希格式，每个系列都以 0 作为第一个 x 轴值开始。

那么如何获取可见序列的 x 轴值数组的长度呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T12:37:18.243

您可以从 tickPositions 数组中获取它。 [http://jsfiddle.net/FbFC2/](http://jsfiddle.net/FbFC2/)

```
chart.xAxis[0].tickPositions.length 
```

# php - 加密输入时Mysql语法错误

> ID：15074097
> 
> 赞同：0
> 
> 时间：2013-02-25T18:45:07.093
> 
> 标签：php, mysql, sql

尝试使用 php 向 mysql 数据库插入新行。

**密码**是 blob**我都试过`s`了`b``bind_param`**

 **```
$stmt = $this->db->prepare("INSERT INTO USERS (email,password,key) VALUES (?,AES_ENCRYPT(?, ?),?)");
            if ( !$stmt ) {
             echo "prepare failed\n";
            echo "error: ", $this->db->error, "\n";
             return;
            }

            $rc = $stmt->bind_param("ssss", $email, $password, $key, $key);
            if ( !$rc ) {
              echo "bind_param failed\n";
              echo "error: ", $stmt->error, "\n";
              return;
         } 
```

**错误：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'key) VALUES (?,AES_ENCRYPT(?, ?),?)' 附近使用正确的语法**

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T18:46:35.003

`key`是mysql中的保留字。你必须引用它：

```
INSERT INTO users (email, password, `key`) ...
                                    ^---^-- 
```

在后勤方面，如果您将加密密钥存储在密码旁边，加密密码有什么意义？这就像一家银行用 50 英尺厚的钢墙建造了一个金库，然后用一点口香糖“锁”了门。**

# javascript - Javascript：我需要一个具有条件变量的 If 语句（If 语句中的 For 循环？）

> ID：15074107
> 
> 赞同：1
> 
> 时间：2013-02-25T18:45:25.280
> 
> 标签：javascript, loops, for-loop, multidimensional-array, nested

我有一个二维数组，我正在循环创建一个表。示例：假设我有`array[y][x]`. 数组`[0][x]`将填充标题列，`array[1][x]`将创建第二列，依此类推。y 代表每个类别/行。这有点令人困惑，所以这里有一个图表：

```
[0][0]Device    | [1][0] Device 1 | [2][0] Device 3 | [3][0] Device 1(Duplicate)
--------------------------------------------------------------------------------
[0][1]category1 | [1][1]          | [2][1]          | [3][1]
--------------------------------------------------------------------------------
[0][2]Category2 | [1][2]          | [2][2]          | [3][2] 
```

我必须检查每列中`[y][1]`的重复项，如果在 处有重复项`array[y][1]`，我根本不想打印该列。

我正在使用两个嵌套的 for 循环打印每一列和每一行。

```
// for every named field, generate a row for each disk
//x represents each table category, which is in rows
for (var x = 0; x < array[0].length; x++) {
    // code to print table with field_names[0][x]
    for (var y = 1; y < (array.length); y++) {
        new_row += "<td>" + [array[y][x]];
    }
} 
```

我目前的想法是每次进程到达 array[y][ 1 ] 我需要检查它是否与之前列 [y-1][ 1 ],[y-2][ 1 ],[y -3][ 1 ] 等等，因为我只想打印表格列的第一个实例。所以我基本上是在寻找一种方法来制作一个 for 或 while 循环，这样就不会出现打印狂潮并多次打印我的所有表格。在伪代码中，我需要一些东西：

`if array[y][1] == array[i][1] where (i = (y - 1); i > 0; i--)`, 然后不打印该列。

唯一的问题是每次我尝试定义 i 时，它都会将其余代码影响到我要打印很多次的地方，因为一切都是如此嵌套的。请帮忙！非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T19:39:28.923

你在你的想法段落中写下了答案。检查`if`它是否匹配`if`然后不打印。

```
for(var y = 1; y< array.length; y++){
    for(var x = 0; x < array[0].length; x++){
        for(var i = array[0].length; ; i--){
            if(array[y][i] == array[y][x]){
                //don't print!
            }else{    
                //print!
            }
        }
    }
} 
```

就性能而言，这并不是最好的，但它可以确保您不会打印任何重复项。我会考虑做@barmar 建议的为每一行创建一个对象的方法。但是，如果您不想这样做，那么您应该能够实现上述内容来做您想做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-31T04:12:14.423

在打印之前，遍历每一行，记录第一次出现的值。每次看到这条记录不是新的，就不要打印它。

```
var found, aux;  
for(var y = 1; y < array.length; y++) {

    aux = {};

    for(var x = 0; x < array[0].length; x++) {

       found = false;

       for (var i = 0; i < aux.length; i++) {
           if (aux[i] == array[y][x]) { found = true; break; }
       }

       if (!found) {
          aux.push(array[y][x]);
          //render
       }

    }
} 
```

效率不高，但是...

希望我有所帮助。

# java - 如何使代码忽略 ArrayIndexOutOfBoundsException java

> ID：15074111
> 
> 赞同：0
> 
> 时间：2013-02-25T18:45:37.610
> 
> 标签：java, indexoutofboundsexception

我想知道在 java 中是否有一种方法，当迭代数组并将值放在某些索引中时，可以跳过越界异常并转到下一项。

例如，

```
 for (int x = 0; x <= array.length; x++) 
           {
               for (int y = 0; y <= array[0].length; x++)
               {
                   // code that determines where to put things and in what indices

                   //if this index is out of the array bounds, I want to forget about it and keep going through the loops

               }

               }

           } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T18:46:58.467

> 我想知道java中是否有一种方法，当迭代数组并将值放在某些索引中时，可以跳过越界异常并转到下一项

如果**索引**在某个索引处超出范围，那么下一个索引肯定也超出范围。让您的代码正常工作。

```
 for (int x = 0; x <array.length; x++) 
           {
               for (int y = 0; y <array[x].length; y++)
               { 
```

数组索引从零开始。IE

> 如果数组的长度为 n，则数组的最后一个索引为 ne n-1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T18:52:11.393

`Arrays`索引从**0**开始。

因此，例如，当您`Array`的长度为*100时，索引为：*

```
 0   1   2   3   4   5  ..... 99   (total size of 100 of course)
  ^   ^   ^   ^   ^   ^        ^
  |   |   |   |   |   |        |
first                         last 
```

当你这样做时，`array.length`你实际上得到了*100*，但你需要迭代直到*99*。

所以，替换`<=`为`<`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T18:53:54.123

问题意味着您在无效的数组上使用了索引。这可能是**负数**，因为所有数组都从 0 开始。如果您的数组有**N 个项目**，并且您将尝试获取**索引为 N 或更高**的项目，您也会得到此异常。只有可用的索引是从**0 到 N - 1**，其中 0 指向第一项，N - 1 指向最后一项。所以很明显，当您的索引超出数组限制时，下一个索引肯定会超出范围。因此，您可以迭代索引直到它超出界限并在那里停止迭代以避免该异常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T18:48:49.997

正确的。首先，嵌套循环的更新部分应该是 y++。不是 x++。该代码将无限循环。

其次，您可以将循环包装在 try-catch 中，这将捕获异常，但不建议只忽略异常。为什么不设计您的代码，使其不会引发异常？

# database - Yesod Persistence - 聚合函数

> ID：15074114
> 
> 赞同：5
> 
> 时间：2013-02-25T18:45:45.257
> 
> 标签：database, haskell, yesod

我正在评估`Yesod`作为一个平台，用于编写供内部使用的基于网络的会计软件。到目前为止，我印象深刻。

为实体建模以适应 Persistent 非常简单，能够设置列名有很大帮助，因为具有会计条目的数据库已经存在。

但是，我最终还需要运行聚合数据的查询，即。给我这个帐户的余额。这可以在里面表达`Persistent`吗？

# mysql - mysql join很慢，但是哪里快

> ID：15074122
> 
> 赞同：0
> 
> 时间：2013-02-25T18:46:09.373
> 
> 标签：mysql, performance, join

我在 MySQL 数据库中有 2 个表。“结果”表有大约 600 万行，包含 3 个内容：一个值、一个 ID 和一个不同表中结果名称的 ID。“结果名称”表包含大约 2000 行。基本上，结果名称包含描述大表中结果的长字符串。

所以，当我想做一个查询时，我只是加入这两个表，所以我知道每个结果的名称是什么。

当我尝试加入表格时，问题就来了。如果我像这样进行连接或子查询，它会很慢（连接或子查询大约需要相同的时间）：

```
mysql> select count(analysisresults_id) from analysis_results where result_nameid in (select resultname_id from analysis_resultnames where result_name like '%amygdala%');
+---------------------------+
| count(analysisresults_id) |
+---------------------------+
|                      6436 |
+---------------------------+
1 row in set (18.49 sec) 
```

...但是如果我单独执行子查询，它会*稍微*快一些：

```
mysql> select count(analysisresults_id) from analysis_results where result_nameid in (13,28);
+---------------------------+
| count(analysisresults_id) |
+---------------------------+
|                      6436 |
+---------------------------+
1 row in set (0.01 sec) 
```

为什么查询时间差异如此之大？为什么子查询被视为常规连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:48:53.600

为什么不*先*执行子查询并允许使用 ID 键？因为它是一个[`DEPENDENT SUBQUERY`](http://forums.mysql.com/read.php?115,128477,128477).

尽管子查询实际上似乎并不依赖于外部查询，但 MySQL 会像对待它一样对待它。有多种解决方案，对您来说最简单的可能就是提前获取 ID（因为您已经这样做了）。似乎您也可以使用与`WHERE`子查询相同的子句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T18:48:40.747

字符串匹配代价高昂：

```
%amygdala% 
```

*必须完全*搜索每个值（完全，我的意思是它可以在匹配时短路，但不能在任何不匹配时短路）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T18:51:33.717

`in`MySQL有时在优化子查询方面做得很差。试试这个：

```
where exists (select 1
              from analysis_resultnames ar2
              where result_name like '%amygdala%' and
                    ar2.resultname_id = analysis_resultnames = resultname_id
             ) 
```

MySQL[文档](http://dev.mysql.com/doc/refman/5.1/en/optimizing-subqueries.html)非常清楚，一个不相关的子查询只被评估一次。这意味着您的原始公式将进行全表扫描——这是相当昂贵的。这个公式*应该*使用索引来获得几千个匹配的行。附加`like`约束应该很快在这个子集上进行。

至于关于子查询和连接的问题。您将数据库操作“join”与关键字“join”混淆了。在 SQL 中，有几种表示连接的方法。`from`有些在子句中使用诸如“join”之类的关键字。有些在`where`and `select`（甚至`having`）子句中使用子查询。

# r - 使用带有变量 r 的表达式

> ID：15074127
> 
> 赞同：35
> 
> 时间：2013-02-25T18:46:16.653
> 
> 标签：r, expression

我正在尝试使用以下标签标记情节：

“Some Assay EC50 (uM)”，其中“u”是一个微型符号。

我目前有：

```
assay <- "Some Assay"
plot(0,xlab=expression(paste(assay," AC50 (",mu,"M)",sep=""))) 
```

但这给出了：“测定 EC50 (uM)”而不是所需的“某些测定 EC50 (uM)”。

建议？谢谢。

我也试过：

```
paste(assay,expression(paste(" AC50 (",mu,"M)",sep="")),sep="") 
```

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-02-25T18:55:04.027

你想要一个组合`bquote()`和一点plotmath fu：

```
assay <- "Some Assay"
xlab <- bquote(.(assay) ~ AC50 ~ (mu*M))
plot(0, xlab = xlab) 
```

这`~`是一个间距运算符，`*`意味着将内容并列到运算符的左侧和右侧。在`bquote()`中，任何包裹在里面的东西`.( )`都会被查找并替换为命名对象的值；so`.(assay)`将在表达式中替换为`Some Assay`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-12-04T10:31:10.897

使用 tidy_eval 方法你可以做

```
library(rlang)

assay <- "Some Assay"
plot(0,xlab=expr(paste(!!assay," AC50 (",mu,"M)",sep=""))) 
```

表达式和!! 包含在 tidyverse 中，因此您实际上不需要加载 rlang。我只是把它放在那里，以明确它们来自哪里。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-25T18:58:02.843

你也可以试试穷人的方法：

```
assay <- "Some Assay"
plot(0, xlab = paste0(assay, " AC50 (µM)")) 
```

它直接指定 mu 字符而不是使用表达式（并且`paste0`只是`paste`with `sep = ""`）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-25T18:59:50.533

`mtext`使用和 bquote 的另一个选项

```
plot(0,xlab='')
Lines <- list(bquote(paste(assay," AC50 (",mu,"M)",sep="")))
mtext(do.call(expression, Lines),side=1,line=3) 
```

请注意，我在第一个图中将 xlab 设置为 null。

**编辑** 不需要调用表达式，因为 bquote 将创建一个表达式，用它们的值替换包裹在 .( ) 中的元素。所以一个好的答案是：

```
plot(0,xlab='')
Lines <- bquote(paste(.(assay)," AC50 (",mu,"M)",sep=""))
mtext(Lines,side=1,line=3) 
```

# actionscript-3 - 如何将 eventListener 添加到 AS3 中具有相同类的所有对象？

> ID：15074133
> 
> 赞同：0
> 
> 时间：2013-02-25T18:46:23.927
> 
> 标签：actionscript-3

我在舞台上有多个文本字段，我想一次向所有文本字段添加一个 eventListener，而不必为每个文本字段分配实例名称。我可以通过简单地向 TextField 类添加一个 eventListener 来做到这一点，以便每个文本对象都可以拥有这个 eventListener 吗？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T18:51:58.647

如果你的 TextField 在主舞台上，你可以这样做：

```
 for (var i:int=0; i<this.numChildren; i++) {
      var do:DisplayObject = this.getChildAtIndex(i);
      if (do is TextField) {
           do.addEventListener (yourListener, yourCallback);

      }

 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T19:08:42.673

如果您要让 TextFields 在显示列表中打开和关闭，您可以执行一些操作，例如为`ADDED_TO_STAGE`. 此事件不会冒泡，因此您需要将`useCapture`标志设置为 true。

侦听器可能看起来像：

```
受保护的函数 onAdded(e:Event):void {
   if (e.target 是 TextField) {
       e.addEventListener(someEvent, someFunction);
   }
}

```

# apache-flex - 在 Flex 4 中使用 fx/mx:Label

> ID：15074134
> 
> 赞同：0
> 
> 时间：2013-02-25T18:46:25.270
> 
> 标签：apache-flex, flex4

我正在 Flex 4 中做一个大量文本的演示应用程序。我非常想使用旧`mx:Label`对象，这样我就可以访问`htmlText`并为自己节省一些格式化文本的麻烦。

不幸的是，我不知道如何使用它。其他地方的研究告诉我只使用`<fx:Label>`，但这会产生`Could not resolve <fx:Label> to a component implementation.` 插入`mx`命名空间（`xmlns:mx="library://ns.adobe.com/flex/mx"`）导致基本相同的事情（`Could not resolve <mx:Label> to a component implementation.`）。

我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:55:49.943

没有`<fx:Label />`组件，但它的 Spark (Flex 4) 版本是`<s:Label />`.

如您所知，Spark 版本没有`htmlText`属性。但是你没有理由不能`<mx:Label />`在你的项目中使用。这是一个执行此操作的示例应用程序：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600" xmlns:local="*">

        <mx:Label htmlText="this is &lt;b&gt;bold&lt;/b&gt;"/>

</s:Application> 
```

请注意，在项目的属性中，在“Flex Build Path”部分下，您需要同时启用 Spark 和 MX 组件集。也许您的项目的设置只包括 Spark 组件集。

**[编辑]**

另一种选择是使用 Spark`<s:RichText />`组件。这也没有`htmlText`属性。但是，您可以设置`TextFlow`该组件使用的属性，并将 HTML 导入`TextFlow`到`TextConverter.importToFlow(sourceHtml, TextConverter.TEXT_FIELD_HTML_FORMAT)`. 这显然比仅使用`htmlText`mx 组件的属性更有效，但这会给您提供精美的 TLF 文本（mx 组件不使用该文本）。

# django - django admin 内联查询集限制

> ID：15074138
> 
> 赞同：12
> 
> 时间：2013-02-25T18:46:42.960
> 
> 标签：django, django-forms, pagination, django-admin, inline

我有一个现有系统，我希望限制管理内联中显示的相关对象的数量。

例如，我在管理员中有一个内联模型，它可以包含多达数千条相关记录。我只想显示最近的记录（比如 5K 最近的记录）。（理想情况下，可以通过内联记录进行分页，但仅限制它们对我来说就足够了。）我想避免管理页面加载 60K 内联记录的情况，这会使浏览器崩溃并给服务器带来负担。

基于以下 SO 问题，我创建了以下代码段： [如何限制查询集/要在 Django 管理站点中查看的记录？](https://stackoverflow.com/questions/2279313/how-to-limit-queryset-the-records-to-view-in-django-admin-site)

```
class TicketNoteAdmin(models.TabularInline):
    model  = models.TicketNote
    def queryset(self, request): 
        qs = super(TicketNoteAdmin, self).queryset(request).order_by('-created')[:5000]
        return qs 
```

但是，我得到一个“一旦切片被提取就无法过滤查询”。我什至尝试过使用分页器，但得到了同样的错误。

```
from django.core.paginator import Paginator

class TicketNoteAdmin(models.TabularInline):
    model  = models.TicketNote
    def queryset(self, request): 
        qs = super(TicketNoteAdmin, self).queryset(request).order_by('-created')
        p = Paginator(qs, 5000)
        page1 = p.page(1)
        return page1.object_list 
```

我理解为什么会出现此错误，但我想知道是否有不同的方法可以让我限制显示的内联对象的数量。也许管理员不是为处理这么多内联对象而设计的，但觉得必须有办法限制管理员内联记录集并防止浏览器/服务器可能因内联对象过多而崩溃的情况。非常感谢任何建议。感谢您的阅读。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-30T15:27:20.573

尝试这个：

```
from django.forms.models import BaseInlineFormSet

class TicketNoteFormSet(BaseInlineFormSet): 
    def get_queryset(self) :
        qs = super(TicketNoteFormSet, self).get_queryset()
        return qs[:5000]

class TicketNoteAdmin(models.TabularInline):
    model = models.TicketNote
    formset = TicketNoteFormSet 
```

# c# - 使用 RAW INPUT 拦截系统范围的 WM_INPUT 消息

> ID：15074141
> 
> 赞同：2
> 
> 时间：2013-02-25T18:46:48.947
> 
> 标签：c#, usb, barcode-scanner, raw-input

我有一个条形码扫描仪，我正在使用 RAWINPUT 来触发我正在拦截的 WM_INPUT 消息。

但是，我正在使用的结帐软件在用于其他用途的 Windows PC 上运行。结帐在不使用时最小化到系统托盘，但一旦扫描某些内容，它就会弹出。

这一切都有效，但是 WM_INPUT 事件被传递给活动的应用程序，例如不需要的 word 文档。有没有办法阻止这个？消息使用后可否取消不转发？

我知道这个问题之前已经稍微介绍过了。

[Win32：在 WH_KEYBOARD_LL 中获取设备信息 || 使用原始输入时在 WM_INPUT 上阻止输入](https://stackoverflow.com/questions/3557626/win32-get-device-info-in-wh-keyboard-ll-block-input-on-wm-input-when-using-r)

我不介意我是否必须编写一些 C++ 代码来处理扫描仪然后包装它。但我需要找到解决方案。我可以在 C# 中使用钩子，但问题是它们不能像 RAW INPUT 模型那样识别原始设备。

任何想法将不胜感激。

# ruby-on-rails-3 - 返回 found_rows 的计数以及有限的活动记录查询结果

> ID：15074145
> 
> 赞同：1
> 
> 时间：2013-02-25T18:47:14.720
> 
> 标签：ruby-on-rails-3, postgresql, activerecord

请原谅这个问题的noobee性质。

我有一个故事模型。每个故事都有一个存储在其自己的 DB 列中的类别属性。我有一个名为 :in_categories 的命名范围，它返回具有包含在给定类别数组中的类别的所有故事：

```
 scope :in_categories, lambda {|categories|
        where(:category => categories)
  } 
```

我现在要做的是限制响应的长度，同时返回数据库中响应行总数的计数，忽略限制。例如，假设我将范围更改为：

```
 scope :in_categories, lambda {|categories|
        where(:category => categories).limit(20)
  } 
```

但实际上有 35 个故事在类别数组中有一个类别。如何取回 20 个活动记录对象和 35 个计数变量？我需要第二个数据库查询吗？我在 mysql 中遇到过 FOUND_ROWS_ 函数，但我使用的是 postgresql。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:58:28.550

看看[http://www.postgresql.org/message-id/1185863074.10580.91.camel@linda.lfix.co.uk](http://www.postgresql.org/message-id/1185863074.10580.91.camel@linda.lfix.co.uk)

> 没有等价物。利用
> 
> ```
> BEGIN;
> SELECT * FROM mytable OFFSET X LIMIT Y;
> SELECT COUNT(*) AS total FROM mytable;
> END; 
> ```
> 
> （为确保结果一致，两个查询应在单个事务中完成。）

手头没有rails env，因此只有伪代码

```
Story.transaction do
  story.in_categories
  story.where(:category => categories).count
end 
```

有关活动记录交易的更多信息[http://api.rubyonrails.org/classes/ActiveRecord/Transactions/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/Transactions/ClassMethods.html)

实际上，我们不使用事务，只是按顺序执行这些查询。从来没有遇到过问题，但这当然取决于您的项目。

# c++ - boost::ref 没有发生匹配的调用错误，但 std::ref 没有发生匹配的调用错误

> ID：15074148
> 
> 赞同：6
> 
> 时间：2013-02-25T18:47:33.473
> 
> 标签：c++, c++11, boost, boost-ref

我编写了一些代码，这些代码使用仿函数和来自或（对于 C++11）命名空间的模板来计算向量`ref`元素的数量`bind`。我正在使用 a在和命名空间之间切换。我使用的是 boost 1.53 版本，我的编译命令是. 我已经尝试使用 gcc 版本 4.7.2 和 4.6.3，但我都得到了相同的错误。`boost::``std::``#define``boost::``std::``g++ test.cpp -std=c++11`

我有3个问题：

1.  我不明白为示例 2 生成的错误。
2.  是否可以仅通过切换命名空间来使这样的代码具有可移植性？
3.  是否有一个很好的参考资料详细描述`std`和的`boost`版本`bind`之间`ref`的差异`function`？（我看到了[这个](https://stackoverflow.com/questions/10555566/is-there-any-difference-between-c11-stdbind-and-boostbind)问题，但答案没有提到`ref`或`function`）

谢谢！

`size()`PS这个例子只是说明了我的问题，我知道`std::vector`:-)

```
//#define USE_STD

#ifdef USE_STD
#include <functional>
using namespace std::placeholders;
namespace impl = std;
#else
#include <boost/version.hpp>
#include <boost/bind.hpp>
#include <boost/ref.hpp>
namespace impl = boost;
#endif

#include <iostream>
#include <algorithm>
#include <vector>

class Item {
    int id_;

public:
    Item(int id) : id_(id) {};
};

template <typename ITEM>
class Counter {
    int count_;

public:
    // typedef void result_type; // adding this fixes Example 3 when impl=boost
    Counter() : count_(0) {};
    void operator()(ITEM* item) {count_++;}
    int operator()() {return count_;}
};

//------------------------------------------------------------------------------
int main(int argc, char *argv[])
{
#ifndef USE_STD
    std::cout << "BOOST_LIB_VERSION=" << BOOST_LIB_VERSION << std::endl;
#endif

    // allocate
    typedef std::vector<Item*> ItemVec;
    ItemVec vec;
    for (int i = 0; i < 9; ++i) {vec.push_back(new Item(i));}

    // Example 1, works for BOTH
    Counter<Item> f1;
    f1 = std::for_each(vec.begin(), vec.end(), f1);
    std::cout << "f1()=" << f1() << std::endl;

    // Example 2, works with impl=std ONLY
    // COMPILE ERROR with impl=boost: "no match for call to ‘(boost::reference_wrapper<Counter<Item> >) (Item*&)’"
    Counter<Item> f2;
    std::for_each(vec.begin(), vec.end(), impl::ref(f2));
    std::cout << "f2()=" <<  f2() << std::endl;

    // Example 3, works with impl=std ONLY
    // COMPILE ERROR with impl=boost "no type named ‘result_type’ in ‘class Counter<Item>’"
    // this can fixed by adding the typedef described above
    Counter<Item> f3;
    std::for_each(vec.begin(), vec.end(), impl::bind(impl::ref(f3), _1));
    std::cout << "f3()=" << f3() << std::endl;

    // clean up
    for (ItemVec::iterator it = vec.begin(); it != vec.end(); ++it) {
        delete *it;
    }
    vec.clear();

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T19:37:57.217

示例 2 失败，因为[`boost::reference_wrapper`](http://www.boost.org/doc/libs/1_53_0/doc/html/boost/reference_wrapper.html)没有[转发参数的](http://en.cppreference.com/w/cpp/utility/functional/reference_wrapper/operator%28%29)[成员`operator()`](http://en.cppreference.com/w/cpp/utility/functional/reference_wrapper/operator%28%29)，不像`std::reference_wrapper`. 因此，它仅对通过引用传递普通参数有用，而不是预期被调用的函数或仿函数。

示例 3 失败，因为 Boost.Bind[依赖于特定协议来获取您传递的函数或仿函数的结果类型](http://www.boost.org/doc/libs/1_53_0/libs/bind/bind.html#with_function_objects)，如果您使用没有显式返回类型的版本。如果你传递一个指向函数的指针或指向成员函数的指针，则返回的绑定器对象有一个嵌套`result_type`集到所述 PTF 或 PTMF 的返回类型。如果你传递一个仿函数，它需要一个嵌套的`result_type`.
`std::bind`, 另一方面，`result_type`如果你的仿函数没有嵌套，则根本没有嵌套。

请注意，正如我所说，您可以将结果类型显式地提供给`boost::bind`和`std::bind`：

```
std::for_each(vec.begin(), vec.end(), impl::bind<void>(impl::ref(f3), _1));
//                                              ^^^^^^ 
```

它修复了示例并使其编译。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T19:39:15.163

`std::ref`有一个主要优势`boost::ref`：它提供了一个可变的完美转发`operator()`，它将呼叫转发到其包含的参考。

`boost::ref`实际上不能这样做，因为它需要大量的重载。然而，为了允许这一点，`boost::bind`（和其他一些类）都为`boost::reference_wrapper`.

# ios - 设置我以编程方式创建的视图的最佳性能位置在哪里？

> ID：15074154
> 
> 赞同：1
> 
> 时间：2013-02-25T18:47:42.877
> 
> 标签：ios

我已经在`viewDidLoad`, `init`,`viewWillAppear`和中看到了它`loadView`。我听到了各种各样的答案，并认为最好的答案是明确的！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T18:52:50.517

大多数视图初始化应该在`viewDidLoad`. `viewWillAppear`不合适，因为它可以在视图控制器的生命周期中多次调用。

布局应该在 中完成，`viewWillLayoutSubviews`但子视图的实际创建属于`viewDidLoad`.

`loadView`仅当您希望视图控制器的根视图不是简单的空`UIView`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T19:49:47.783

指定的初始化器。如果你继承 UIViewController，你必须调用这个方法的超级实现，即使你没有使用 NIB。（为方便起见，默认的 init 方法会为您执行此操作，并为这两个方法的参数指定 nil。）在指定的 NIB 中，文件所有者代理应将其类设置为您的视图控制器子类，并带有视图出口连接到主视图。如果您使用 nil nib 名称调用此方法，则此类的 -loadView 方法将尝试加载名称与视图控制器的类相同的 NIB。如果实际上不存在这样的 NIB，那么您必须在调用 -view 之前调用 -setView:，或者覆盖 -loadView 方法以编程方式设置视图。

上面的文字来自 Apple 文档。根据它，您应该在“loadView”方法中执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T18:52:42.427

没有*性能*差异（所有这些都只是普通的方法调用......）。

唯一的实际区别是`viewWillAppear:`在视图变得可见时调用它（不仅仅是一次），因此它不是放置初始化代码的好地方。顺便说一句，您还有另外两个选择：（`init`或指定的`initWithWhatever:`）和`viewDidLoad`方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-14T03:24:50.040

您可以在 viewDidLoad 之前创建一个视图并将视图添加到 viewDidLoad 中，在 ViewWillLayout 上布局视图并在 viewWillApper 上加载数据（如果有）。您可以看到下面的示例（导入 UIKit）

```
class MyView: UIViewController {

// create the view
let myview: UIView = {
    let view = UIView()
    view.translatesAutoresizingMaskIntoConstraints = false
    view.backgroundColor = .orange
    return view
}()

override func viewDidLoad() {
    super.viewDidLoad()
    // Add the view
    self.view.addSubview(myview)
}

override func viewWillLayoutSubviews() {
    super.viewWillLayoutSubviews()

    // create the constraints
    NSLayoutConstraint.activate([
        self.myview.topAnchor.constraint(equalTo: view.topAnchor),
        self.myview.leftAnchor.constraint(equalTo: view.leftAnchor),
        self.myview.rightAnchor.constraint(equalTo: view.rightAnchor),
        self.myview.bottomAnchor.constraint(equalTo: view.bottomAnchor)
    ])
}

override func viewWillAppear(_ animated: Bool) {
    super.viewWillAppear(true)
    // You can implement extra data to your view here
} 
```

}

# git - 你如何禁用 git osxkeychain 助手？

> ID：15074174
> 
> 赞同：1
> 
> 时间：2013-02-25T18:48:41.427
> 
> 标签：git

我用自制软件安装了 git，其中包括 osxkeychain 助手。过去，要启用帮助程序，您必须运行`git config --global credential.helper osxkeychain`，但即使我没有使用此配置，它现在似乎也使用 OS X 钥匙串（我检查了我的 .gitconfig 以确保）。实际上，我什至尝试删除`git-credential-osxkeychain`可执行文件，但 git 仍然以某种方式将我的凭据保存在我的钥匙串中。目前我已经通过锁定我的钥匙串文件来解决它，但我希望找到一个更优雅的解决方案，以便我可以将其他密码存储在我的钥匙串中。谢谢！

# java - 键盘输入java

> ID：15074175
> 
> 赞同：1
> 
> 时间：2013-02-25T18:48:42.477
> 
> 标签：java, input

我对 Java 有点陌生，我想尝试从键盘接收输入。我知道我必须使用扫描仪，但是当我这样做时，程序不会等待输入。相反，它会立即抛出 NoSuchElementException。我尝试使用的代码如下：

```
import java.util.*;

public class Main {
    public static void main(String args[]) {
        int move = -1;
        String moveColumn = "";
        Scanner scan = new Scanner(System.in);

        System.out.print("Please enter a move: ");
        moveColumn = scan.next();
        move = Integer.parseInt(moveColumn);

        System.out.println("You chose " + moveColumn + ".");
    }
} 
```

从我读过的所有内容来看，这段代码应该可以工作，但事实并非如此。有人可以指出我做错了什么，或者至少指出一些可以帮助我的资源吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-14T23:27:45.343

我在终端上运行了你的代码，它运行良好。程序等待一个数字（预期值）或一个字符串，这将引发预期的“NumberFormatException”。正如 Survivor 提到的（3 月 9 日），安装 Eclipse 或 Netbeans 等 IDE 是明智之举，因为它们提供了有用的调试工具。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-25T19:11:39.383

您可以替换 moveColumn = scan.next(); move = Integer.parseInt(moveColumn); 与 move = scan.nextInt()

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-25T19:03:27.283

您可以使用 moveColumn = scan.nextLine();

# vb.net - 当 Enabled=false 时，TextBox 出现嵌入；

> ID：15074176
> 
> 赞同：1
> 
> 时间：2013-02-25T18:48:43.727
> 
> 标签：vb.net, textbox

我正在使用 vs2012 运行 vb.net。我有各种各样`CheckBoxes`的那个`Enable`和`Disable` `TextBoxes`。我注意到，如果用户将光标置于（启用时） ，`TextBox`然后`click`将光标`CheckBox`移至`Disable`，则会出现插图。这仅在用户单击时光标位于 中时发生。 `TextBox``TextBox``TextBox``CheckBox``Disable``TextBox`

我还注意到，如果我在`TextBox`is之前抛出一个消息框`Disabled`，则`TextBox`不会出现 inset；我假设是因为焦点已经改变。因此，我尝试在禁用 之前将焦点设置到另一个控件`TextBox`，但是，这不起作用。无论如何我可以解决这个问题，以便`TextBox`当用户将光标放在框中时禁用它们时我不会出现插入？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T18:51:42.253

当你设置`Textbox.enabled=False`它会出现，但如果你会设置`Textbox.Visible=False`它不会出现

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T09:38:22.297

如果您将 TextBox 的 BorderStyle 设置为，`BorderStyle.FixedSingle`那么您应该得到您正在寻找的行为。

# r - 如果它们被少于 3 个位置分隔，则通过对值进行分组来查找范围高/低

> ID：15074177
> 
> 赞同：3
> 
> 时间：2013-02-25T18:48:44.460
> 
> 标签：r

我的数据由 4 列组成：日期、低位、高位和位置。

我试图通过根据位置字段将数据汇总到组中来找到范围。

1.  如果 diff(position) < 3，则将数据分组在一起并将范围函数应用于每个组。
2.  如果 diff(position) >= 3 仅计算当前点和前一个点的范围。

前 15 个位置的示例，数据的第 4 个字段：

```
c(12,14,17,18,19,20,21,22,24,28,33,36,37,38,43) 
```

预期的结果是对, , , ,最后进行分组，`(12,14)`然后找到每个组的范围。`(17:24)``(24,28)``(28,33)``(33,36)``(36:38)``(38,43)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T20:14:57.920

使用`IRanges`：

```
require(IRanges)
x <- c(12,14,17,18,19,20,21,22,24,28,33,36,37,38,43)
o <- reduce(IRanges(x, width=1), min.gapwidth=2) 
```

给出：

```
IRanges of length 6
    start end width
# [1]    12  14     3
# [2]    17  24     8
# [3]    28  28     1
# [4]    33  33     1
# [5]    36  38     3
# [6]    43  43     1 
```

这解决了你一半的问题。那些地方`width = 1`，您想要获得适当的先前值。因此，让我们将其转换为 data.frame。

```
o <- as.data.frame(o)
o$start[o$width == 1] <- o$end[which(o$width == 1)-1]
o$width <- NULL

#   start end
# 1    12  14
# 2    17  24
# 3    24  28
# 4    28  33
# 5    36  38
# 6    38  43 
```

这给出了最终结果。

**编辑：**似乎 OP 在所需范围内错过了（14,17）。

```
ir <- IRanges(x, width = 1)
o1 <- reduce(ir, min.gapwidth = 2)
o2 <- gaps(o1)
start(o2) <- start(o2) - 1
end(o2) <- end(o2) + 1
o1 <- as.data.frame(o1[width(o1) > 1])
o2 <- as.data.frame(o2)
out <- rbind(o1, o2)
out <- out[with(out, order(start, end)), ]

#   start end width
# 1    12  14     3
# 4    14  17     4
# 2    17  24     8
# 5    24  28     5
# 6    28  33     6
# 7    33  36     4
# 3    36  38     3
# 8    38  43     6 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T01:51:06.660

这是一个使用基本 R 函数返回根据所述规则分组的位置索引列表的函数。如果这些值可能不是单调的，并且您只关心绝对差异，我认为更改`diff(x)`为`abs(diff(x))`（并删除随后的单调性检查）就足够了。

```
groupIndexes <- function(x, gap=3) {
    d <- diff(x)
    # currently assuming x is in increasing order
    if (any(d<0)) stop("x must be monotonically increasing")
    is.near <- (d < gap)
    # catch case of a single group
    if (all(is.near)) return(list(seq_along(x)))
    runs <- rle(ifelse(is.near, 0, seq_along(is.near)))
    gr <- rep(seq.int(runs$lengths), times=runs$lengths)
    lapply(unique(gr), function(i) {
        ind <- if(runs$values[i]>0) {
            match(i, gr)
        } else {
            which(gr==i)
        }
        c(ind, max(ind)+1)
    })
} 
```

这会自己产生这个分组值：

```
x <- c(12,14,17,18,19,20,21,22,24,28,33,36,37,38,43)
lapply(groupIndexes(x), function(ind) x[ind]) 
```

如果在您的实际情况下您有一个数据框“dat”，您可以根据“位置”列生成组，然后计算“低”列的分组范围，如下所示：

```
lapply(groupIndexes(dat$position), function(ind) range(dat$low[ind])) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T06:54:54.513

这是一个`diff`用于识别组之间界限的选项。

```
groupBy <- function(dat, thresh=3)  {
    # bounds will grab the *END* of every group (except last element)
    bounds <- which(! diff(dat) < thresh) 

    # add the last index of dat to the "stops" indecies
    stops  <- c(bounds, length(dat))

    # starts are 1 more than the bounds. We also add the first element 
    starts <- c(1, bounds+1) 

    # mapply to get `seq(starts, stops)`
    indecies <- mapply(seq, from=starts, to=stops)

    # return: lapply over each index to get the results
    lapply(indecies, function(i) dat[i])
} 
```

## 测试：

```
dat1 <- c(12,14,17,18,19,20,21,22,24,28,33,36,37,38,43)
dat2 <- c(5,6,7,9,13,17,21,35,36,41)

groupBy(dat1)
groupBy(dat2)
groupBy(dat2, 5) 
```

# android - 桌面/安卓应用程序中的 Log4j maven 模块

> ID：15074179
> 
> 赞同：0
> 
> 时间：2013-02-25T18:48:48.337
> 
> 标签：android, maven, log4j

我有一个复杂的项目，其中核心`maven`模块（依赖于`log4j`）被其他人继承

2个Maven模块

*   第一个是桌面摇摆应用程序
*   第二个是安卓应用。

我想按原样构建第一个模块（swing 应用程序），以便它将继承标准`log4j`实现（从父核心模块），但对于第二个模块，我想使用`log4j`. 如何告诉 maven 做这样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T00:25:25.677

请参阅[http://maven.apache.org/guides/introduction/introduction-to-optional-and-excludes-dependencies.html#Dependency_Exclusions](http://maven.apache.org/guides/introduction/introduction-to-optional-and-excludes-dependencies.html#Dependency_Exclusions)

在您声明依赖项的 android 应用程序中，例如：

```
<project>
  ...
  <dependencies>
    <dependency>
      <groupId>sample.ProjectA</groupId>
      <artifactId>Project-A</artifactId>
      <version>1.0</version>
      <exclusions>
        <exclusion>  <!-- declare the exclusion here -->
          <groupId>log4j</groupId>
          <artifactId>log4j</artifactId>
        </exclusion>
      </exclusions> 
    </dependency>
  </dependencies>
</project> 
```

但请确保您还包括 Log4J 的 Android 替代品。

# android - 启动时启动应用程序时出现Android错误

> ID：15074184
> 
> 赞同：-1
> 
> 时间：2013-02-25T18:49:12.727
> 
> 标签：android, startup

我已经启动了我的应用程序。我希望它在设备打开后立即启动。我写了我需要的代码。有用。但是，当设备打开时，它会要求**Complete 操作使用： Launcher 或 My App**。然而我不想要它。我希望它在不询问启动器的情况下在启动时启动。我怎样才能做到这一点？或者我可以在代码中设置我的应用程序始终默认启动器吗？顺便说一句，它给出了这个消息：**不幸的是，应用程序**在启动时完成了..。*顺便说一句，我在编写代码时可能会出错。如果有制作Startup和Launcher的例子、教程或表达式，我可以看看。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T19:07:06.047

1.  不，您不能通过代码将您的应用程序设置为默认值。用户必须决定，他是否希望您的应用程序成为默认应用程序或任何其他应用程序。自 1.0 版本以来，这一直是 Android 标准。

2.  您的应用程序以异常结束？请提供您崩溃的 Stacktrace。

3.  每个人都会犯错。Stackoverflow 上有很多教程和很多问题。

# javascript - 访问同一对象定义上的 JSON 属性

> ID：15074189
> 
> 赞同：1
> 
> 时间：2013-02-25T18:49:20.677
> 
> 标签：javascript, json

我需要知道如何使用 JavaScript 中的 JSON 格式访问同一属性定义中的对象内部的属性，如下所示：

```
var myobj = {
    DateToday: getDate(),
    DatePast: DateToday - 1
} 
```

当我以这种方式创建对象时，浏览器会抛出错误`"DateToday" is not defined`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T18:54:58.203

你不能这样做，因为它还没有在内存中供参考。你需要这样做：

```
var myobj = {
    DateToday: getDate()
}

myobj.DatePast= myobj.DateToday - 1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T18:55:10.433

据我所知，你不能。您需要使 DatePast 成为一个函数，如下所示：

```
var myobj = {
    Date: getDate(),
    DatePast: function(){ this.Date - 1 };
} 
```

然后您可以使用以下方法访问 DatePast：

```
myobj.DatePast(); 
```

或者，如果 Date 永远不会改变，您可以使用：

```
var myobj = {
    Date: getDate(),
    DatePast: getDate() - 1
} 
```

然后你可以像这样访问它：

```
myobj.DatePast 
```

# java - 如何在树节点中没有父链接的情况下获取二叉树的根？

> ID：15074191
> 
> 赞同：1
> 
> 时间：2013-02-25T18:49:29.917
> 
> 标签：java, algorithm, binary-tree

我的任务是执行以下操作：

> 编写、记录（内部）和测试 Java 程序以解决以下问题：
> 
> 使用链接表示来实现二叉树 ADT，其中每个节点包含以下内容：
> 
> *   数据
> *   左孩子的参考/链接
> *   参考/链接到正确的孩子
> 
> 假设数据是整数值。
> 
> 执行以下操作（如教科书 7.3 节所述）：
> 
> *   尺寸
> *   是空的
> *   取代
> *   根
> *   剩下
> *   正确的
> *   已经离开了
> *   有权利
> *   是内部的
> *   是外部的
> *   是根
> *   向左插入
> *   插入右
> *   附
> *   消除
> 
> 以及以下遍历：
> 
> *   预购
> *   后购
> *   为了

我知道二叉树是如何工作的，并且在大多数情况下我这样做没有问题 - 但我遇到的问题是我不允许在节点类中拥有除给定三个之外的任何变量 - 也就是说，我无法建立父链接。如果我无法链接到父节点，如何检查给定节点是否是树的根？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T19:50:07.417

假设你有一个孤立的节点，只知道它的左右链接节点，没有别的，没有办法确定根，*除非*你有一组节点要测试。

显而易见的方法——当然——是使用周围树结构的根属性，它实际上定义了树，即这里介绍的所有其他解决方案。

但是，如果由于某种原因不允许您这样做，您可以执行以下代码来测试所有可用节点。作为副作用，它还为您提供了“父”属性的实现。

实际上，“根”可以定义为“没有父节点的节点”。

```
public TreeNode Parent(TreeNode node)
{
  TreeNode result = null;
  foreach (TreeNode candidate in allTheNodes)
    if (candidate.left == node || candidate.right == node)
      return candidate;

  return null;
}

public TreeNode root()
{
  foreach (node in allTheNodes)
    if (Parent(node)==null) 
      return node;

  return null;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T18:52:48.307

您可以定义`BinaryTree`类并`Node`在其中保留根字段。所以你已经知道了根源

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T19:03:15.593

使用 a`BinaryTree`你有具有三个属性的节点：

```
int value; 
Node left;
Node right; 
```

因此，如果我想构建一棵树，我可以这样做：

```
root = Node();
root.value = 5;
root.left = Node();
root.left.value = 3;
root.left.right = Node()
root.left.right.value = 4;
root.right = Node();
root.right.value = 6;
root.left.left = node();
root.left.left.value = 1; 
```

这会给一棵树：

```
 5
   / \
  3   6
 / \
1   4 
```

现在我们`root`持有所有这些信息，我们可以通过它访问任何连接到它的节点。

因此，本质上，您需要为所有这些操作编写一个包装器。要检查任意节点是否为根，只需将其与您存储为根的节点进行比较即可。

结构如下：

```
public class BinaryTree{
    class Node {
        int value;
        Node left;
        Node right;
    }
    Node root;
    //method declarations
} 
```

# c# - 检查 NumericUpDown 是否为空

> ID：15074193
> 
> 赞同：6
> 
> 时间：2013-02-25T18:49:46.817
> 
> 标签：c#, numericupdown

如何检查用户是否将`NumericUpDown`控件留空，删除其上的值？所以我可以重新分配它的值 0。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-25T18:54:08.540

```
if(NumericUpDown1.Text == "")
{
     // If the value in the numeric updown is an empty string, replace with 0.
     NumericUpDown1.Text = "0";
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-12-12T22:29:29.203

使用已验证的事件并请求 text 属性可能很有用

```
private void myNumericUpDown_Validated(object sender, EventArgs e)
{
    if (myNumericUpDown.Text == "")
    {
        myNumericUpDown.Text = "0";
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-03-29T15:20:23.420

即使用户删除了`numericUpDown`控件的内容，它的值仍然保留。
`upDown.Text`将为“”，但`upDown.Value`将是先前输入的有效值。因此，在事件中，我
“防止”用户将控件留空的方式是：`onLeave`

```
upDown.Text = upDown.Value.ToString(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T19:01:29.357

```
decimal d = 0 
if(decimal.TryParse(NumericUpDown1.Text, out d)
{

}
NumericUpDown1.Value = d; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-26T13:12:20.920

> 试试这个

```
if (string.IsNullOrEmpty(((Control)this.nud1).Text))
{
  //null
}
else
{
  //have value
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-25T07:15:15.137

如果要禁止 为空值`NumericUpDown`，只需使用此类。其效果是，一旦用户尝试使用*select-all + backspace key*擦除控制值，则再次设置实际数值。这并不是真正的烦恼，因为用户仍然可以*全选 + 键入数字*来开始编辑新的数值。

```
 sealed class NumericUpDownEmptyValueForbidder {
     internal NumericUpDownEmptyValueForbidder(NumericUpDown numericUpDown) {
        Debug.Assert(numericUpDown != null);
        m_NumericUpDown = numericUpDown;
        m_NumericUpDown.MouseUp += delegate { Update(); };
        m_NumericUpDown.KeyUp += delegate { Update(); };
        m_NumericUpDown.ValueChanged += delegate { Update(); };
        m_NumericUpDown.Enter += delegate { Update(); };
     }
     readonly NumericUpDown m_NumericUpDown;
     string m_LastKnownValueText;

     internal void Update() {
        var text = m_NumericUpDown.Text;
        if (text.Length == 0) {
           if (!string.IsNullOrEmpty(m_LastKnownValueText)) {
              m_NumericUpDown.Text = m_LastKnownValueText;
           }
           return;
        }
        Debug.Assert(text.Length > 0);
        m_LastKnownValueText = text;
     }
  } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-10-14T06:16:42.413

你可以试试这个：

```
if(numericUpDown.Value == 0){

 MessageBox.Show(
   "Please insert a value.", 
   "Required", MessageBoxButtons.OK, 
   MessageBoxIcon.Exclamation
 );

 return;

} 
```

# android - FlashBuilder Away3D iOS -

> ID：15074194
> 
> 赞同：1
> 
> 时间：2013-02-25T18:49:52.053
> 
> 标签：android, ios, air, flash-builder, away3d

*   闪存生成器 4.7
*   空中 SDK 3.5
*   Away3D 4.0.9 金
*   模拟器 iOS SDK（5.0、5.1、6.1）
*   iPhone 3GS 6.1
*   2.3.6 中的安卓设备

我尝试在 Flash Builder for Mobile（iOS、Android）中使用 Away3d 进行测试...
我无法在 iOS 模拟器、设备（iphone e android）中运行我的小测试，但是，我的代码在 Air Simulator 中运行 100%
我设置了 renderMode到 GPU、Direct 和 Auto，在所有情况下，只有 Air Simulator 运行代码
我错过了什么？

调试中显示的错误是：

```
Error: Error #3613: The native shader compilation failed.
    at flash.display3D::Program3D/upload()
    at away3d.core.managers::AGALProgram3DCache/setProgram3D()[/Users/robbateman/Documents/fdt5workspace/away3d-core-fp11/src/away3d/core/managers/AGALProgram3DCache.as:98]
    at away3d.materials.passes::MaterialPassBase/updateProgram()[/Users/robbateman/Documents/fdt5workspace/away3d-core-fp11/src/away3d/materials/passes/MaterialPassBase.as:363]
    at away3d.materials.passes::DefaultScreenPass/updateProgram()[/Users/robbateman/Documents/fdt5workspace/away3d-core-fp11/src/away3d/materials/passes/DefaultScreenPass.as:659]
    at away3d.materials.passes::MaterialPassBase/activate()[/Users/robbateman/Documents/fdt5workspace/away3d-core-fp11/src/away3d/materials/passes/MaterialPassBase.as:261]
    at away3d.materials.passes::DefaultScreenPass/activate()[/Users/robbateman/Documents/fdt5workspace/away3d-core-fp11/src/away3d/materials/passes/DefaultScreenPass.as:515]
    at away3d.materials::MaterialBase/activatePass()[/Users/robbateman/Documents/fdt5workspace/away3d-core-fp11/src/away3d/materials/MaterialBase.as:352]
    at away3d.core.render::DefaultRenderer/drawRenderables()[/Users/robbateman/Documents/fdt5workspace/away3d-core-fp11/src/away3d/core/render/DefaultRenderer.as:152]
    at away3d.core.render::DefaultRenderer/draw()[/Users/robbateman/Documents/fdt5workspace/away3d-core-fp11/src/away3d/core/render/DefaultRenderer.as:102]
    at away3d.core.render::RendererBase/executeRender()[/Users/robbateman/Documents/fdt5workspace/away3d-core-fp11/src/away3d/core/render/RendererBase.as:288]
    at away3d.core.render::DefaultRenderer/executeRender()[/Users/robbateman/Documents/fdt5workspace/away3d-core-fp11/src/away3d/core/render/DefaultRenderer.as:62]
    at away3d.core.render::RendererBase/render()[/Users/robbateman/Documents/fdt5workspace/away3d-core-fp11/src/away3d/core/render/RendererBase.as:252]
    at away3d.containers::View3D/render()[/Users/robbateman/Documents/fdt5workspace/away3d-core-fp11/src/away3d/containers/View3D.as:611]
    at Testes/update()[/Users/lokovarrido/Documents/Adobe Flash Builder 4.7/Testes/src/Testes.as:41] 
```

我的代码是：

```
package
{
    import flash.display.Sprite;
    import flash.events.Event;

    import away3d.cameras.Camera3D;
    import away3d.containers.View3D;
    import away3d.entities.Mesh;
    import away3d.materials.ColorMaterial;
    import away3d.primitives.SphereGeometry;

    [SWF(frameRate="60", width="100%", height="100%", backgroundColor="0x000000")]

    public class Testes extends Sprite
    {

        private var cam:Camera3D;
        private var view:View3D;

        public function Testes()
        {

            cam = new Camera3D();
            cam.z = -350;

            view = new View3D(null, cam);
            addChild(view);

            var sphere:SphereGeometry = new SphereGeometry();
            var sphereMaterial:ColorMaterial = new ColorMaterial(0xff0000);
            var sphereMesh:Mesh = new Mesh(sphere, sphereMaterial);
            view.scene.addChild(sphereMesh);    

            this.addEventListener(Event.ENTER_FRAME, update);

        }

        public function update(e:Event):void
        {
            trace("update");
            view.render();
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T19:11:31.970

在 Adob​​e AIR 应用程序描述符 XML 中，在 下`<initialWindow>`，设置`depthAndStencil`：

```
<initialWindow>
    <depthAndStencil>true</depthAndStencil> 
```

# visual-studio-2010 - 搜索整个项目

> ID：15074195
> 
> 赞同：36
> 
> 时间：2013-02-25T18:50:00.523
> 
> 标签：visual-studio-2010

这是一个基本问题，我有一个包含大量文件的 winform 项目。我想在不打开每个文件的情况下在所有文件中搜索关键字。我该怎么做？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-02-25T18:51:29.033

`Ctrl`+ `Shift`+ `F` => 输入你想要的，默认情况下它会搜索整个解决方案。

[![在此处输入图像描述](../Images/7ebb985cf8078fa1f8b64188c5888d31.png)](https://i.stack.imgur.com/YBg6g.png)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-25T18:54:10.350

点击`Ctrl+Shift+F`“在文件中查找”对话框，然后确保设置了“整个解决方案”。

![在此处输入图像描述](../Images/6ab5d2c73321d36baa4b1c860da69425.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-25T18:51:29.677

在解决方案资源管理器选项卡的顶部有一个搜索框

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-25T18:51:44.527

键入“Ctrl + F”并选择“查找所有引用”选项。结果将显示在包含所有参考的另一个窗口中。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-25T18:52:20.873

在 Visual Studio 搜索对话框中，您可以指定搜索范围：

当前文档 所有打开的文档 当前项目 整个解决方案

只选择一个更适合你的

# android - Android-Blackberry GCM：无法将移植的 android 应用程序注册到 GCM 服务

> ID：15074199
> 
> 赞同：5
> 
> 时间：2013-02-25T18:50:28.133
> 
> 标签：android, blackberry-android, blackberry-push

我们在注册设备时遇到了一些问题，因此我们可以在我们的 android 移植应用程序中获得推送通知。

这是我们的场景：

-我们有一个操作系统版本为 10.0.9.388 的 Blackberry 10 Dev Alpha 设备

- 已经注册到推送服务

- 创建 android.cfg 并使用从 Blackberry 收到的值更改值：

-添加了清单权限。

-我们使用调试令牌部署应用程序。

- 设备连接黑莓网络（我们可以添加联系人，通过BBM聊天等）

- 生成的 .bar 文件的结构似乎没问题。（.apk，清单-权限也可以-，android.cfg）

GCM 在 Android 设备上运行良好，但是，当我们在 BlackBerry dev alpha 设备上调试它时，来自 GCMRegistrar 类的 register 方法没有注册我们的设备，getRegistrationId 方法总是返回一个空字符串。

没有抛出异常，所以我们不知道 register 方法失败的原因。有没有办法查看一些日志？

我们尝试通过 SSH 连接到设备，但我们不知道在哪里可以找到有关此的一些日志（如果有的话）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:09:03.553

将操作系统版本从 10.0.9.388 更新到 10.0.10.263 后，我们的 GCM 实施开始工作（来自黑莓支持团队的建议）。

我们在调用 GCMRegistrar.register 后获得了注册 ID，现在我们收到了通知！因此无需使用 Blackberry SDK 或任何其他第三方库。

如果您要将您的 android 应用程序移植到 blackberry，请确保您的 android.cfg 格式正确，并且在注册推送服务后从 Blackberry 邮件中收到有效数据。还要检查重新打包的 .bar 文件的清单文件中是否有推送通知权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T19:08:33.070

GCM 无法在黑莓设备上运行，因为 GCM 是通过 Google Play 提供的 Google 服务的一部分。任何没有 Google Play 的设备（例如 Dev Alpha）都无法使用 GCM。

# odbc - 如何安装 DB2 ODBC 或 OLEDB 驱动程序

> ID：15074200
> 
> 赞同：5
> 
> 时间：2013-02-25T18:50:28.430
> 
> 标签：odbc, db2, driver, oledb

我已经在 Windows 7 Pro 上安装了 IBM DB2 Database Express。

现在，我想创建我的 C# 代码，以便在 DB2 表中选择/插入/更新记录。

我花了一整天时间在 Internet 上搜索有关如何安装 OLEDB 或 ODBC 驱动程序以连接到 DB2 数据库的链接。但是没有成功！！！

所以，我想知道是否有人可以帮助我或给我发送一个有用的链接来下载驱动程序。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-12-17T15:43:35.533

**下载：**

在网页中：[http ://www-933.ibm.com/support/fixcentral/legacy/](http://www-933.ibm.com/support/fixcentral/legacy/)

带参数“信息管理”-“IBM Data Server Client Packages”-自定义版本和平台

然后在 Id Fix 中写入 *odbc_cli*

下载最新的修复包（在我的例子中是“IBM Data Server Driver for ODBC and CLI (Windows/x86-64 64 bit) V10.5 Fix Pack 7”）

**安装：**

将 zip 复制到 C:\Program Files\IBM（如果不存在，则必须创建文件夹）解压

在命令中：

执行“cd C:\Program Files\IBM\{uncompressed driver folder}\bin”（默认为“clidriver”）

执行“db2cli install -setup”进行安装。如果需要卸载，请执行“db2cli install -cleanup”

如果您需要安装它以在 64 位环境中为您的 32 位应用程序指向 32 位 IBM DB2 ODBC 驱动程序，请阅读此文档：[http ://www-01.ibm.com/support/docview.wss?rs= 71&uid=swg21384435](http://www-01.ibm.com/support/docview.wss?rs=71&uid=swg21384435)

注意：在 9.5.* 版本中，命令更改：安装：db2oreg1.exe -i 卸载：db2oreg1.exe -u

* * *

在我看来，我建议下载带有自定义安装的 IBM Client i Access，只选择“ODBC”和“OLE DB Provider”

您可以通过ibm public ftp下载它：public.dhe.ibm.com（端口21）在文件夹“/as400/products/clientaccess/win32/v7r1m0/servicepack”中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T11:17:47.127

对于 DB2 9.7，请在此处查看：

[http://www-01.ibm.com/support/docview.wss?uid=swg24033685](http://www-01.ibm.com/support/docview.wss?uid=swg24033685)

下载

IBM Data Server Driver for ODBC and CLI（64-bit）（或）IBM Data Server Runtime Client

高温高压

沙迪亚拉姆

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-20T09:06:59.737

还有一个微软版本的 db2 驱动程序（主机集成服务器的一部分）。

在每个 sql server 功能包中，您都会找到一个 DB2OLEDBV[version]_[architecture].msi

例如。sql2016sp1 有 v6（ENU\DB2OLEDBV6_x64.msi 和 ENU\DB2OLEDBV6_x86.msi） [https://www.microsoft.com/en-us/download/details.aspx?id=54279](https://www.microsoft.com/en-us/download/details.aspx?id=54279)

sql2016 rtm 有 v5 [https://www.microsoft.com/en-us/download/details.aspx?id=52676](https://www.microsoft.com/en-us/download/details.aspx?id=52676)

sql2012sp2 有 v4 [https://www.microsoft.com/en-us/download/details.aspx?id=43339](https://www.microsoft.com/en-us/download/details.aspx?id=43339)

信息：

*   [https://blogs.msdn.microsoft.com/sjackson/2014/06/27/db2-provider-version-information/](https://blogs.msdn.microsoft.com/sjackson/2014/06/27/db2-provider-version-information/)
*   [http://go.microsoft.com/fwlink/?LinkID=241539](http://go.microsoft.com/fwlink/?LinkID=241539)
*   [https://www.google.de/search?q=microsoft+sql+feature+pack](https://www.google.de/search?q=microsoft+sql+feature+pack)

[https://akawn.com/utilities/feature-packs/](https://akawn.com/utilities/feature-packs/)提供了一个很好的概述

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-16T08:16:25.917

以下链接详细介绍了 [http://www.ryslander.com/how-to-install-and-configure-db2-odbc-driver/](http://www.ryslander.com/how-to-install-and-configure-db2-odbc-driver/)

# javascript - 尝试使用 Knockout.js 创建多个计数器

> ID：15074206
> 
> 赞同：0
> 
> 时间：2013-02-25T18:51:11.627
> 
> 标签：javascript, knockout.js, counter

通过这个例子，我可以很容易地创建一个计数器。如何在一页上多次使用它？

```
<div>
    You've clicked <span data-bind="text: numberOfClicks"></span> times
    <button data-bind="click: incrementClickCounter">Click me</button>
</div>

<script type="text/javascript">
    var viewModel = {
        numberOfClicks : ko.observable(0),
        incrementClickCounter : function() {
            var previousCount = this.numberOfClicks();
            this.numberOfClicks(previousCount + 1);
        }
    };
</script> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T20:42:49.147

In that case you can make use of javascript closures.

```
function Counter(){
    var self = this;
     self.numberOfClicks = ko.observable(0);
     self.incrementClickCounter = function() {
        self.numberOfClicks(self.numberOfClicks() + 1);
    };
}

var viewModel = {
     counter1: new Counter(),
     counter2: new Counter()
}; 
```

[http://jsfiddle.net/marcandrew/wckE2/](http://jsfiddle.net/marcandrew/wckE2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T19:08:57.973

我不确定我是否完全理解在一页上多次使用它的意思？您是否希望所有实例共享点击次数，还是应该相互独立？

如果他们只是共享它，那么您可以将多个元素绑定到同一个点击事件。

```
<div>
    You've clicked <span data-bind="text: numberOfClicks"></span> times
    <button data-bind="click: incrementClickCounter">Click me</button>
    <button data-bind="click: incrementClickCounter">Click me Too</button>
</div> 
```

# robotics - 使用 KDL 确定 Gazebo 中的关节旋转

> ID：15074207
> 
> 赞同：1
> 
> 时间：2013-02-25T18:51:14.637
> 
> 标签：robotics, ros, inverse-kinematics

我正在尝试使用 Gazebo 中的运动动力学库 (KDL) 将其手掌放置在目标模型上的“机械臂”位置。我当前的问题是，当我将关节旋转到计算值时，我的机器人根本不在我期望的位置，也没有接触到目标圆柱体。我曾尝试向 Gazebo 社区寻求答案，但我没有得到回复，所以我希望堆栈溢出的人能提供帮助。下面粘贴的是相关代码：

```
 //Create a KDL Joint Chain of our Arm Robot
  KDL::Chain chain;

  //Base Joint
  math::Vector3 basePose = mBaseJoint->GetAnchor(0);
  chain.addSegment(KDL::Segment(KDL::Joint(KDL::Joint::RotZ), 
  KDL::Frame(KDL::Vector(basePose.x, basePose.y, basePose.z))));

  //Shoulder Joint
  math::Vector3 shoulderPose = mShoulderJoint->GetAnchor(0);
  chain.addSegment(KDL::Segment(KDL::Joint(KDL::Joint::RotX), 
    KDL::Frame(KDL::Vector(shoulderPose.x, shoulderPose.y, shoulderPose.z))));

  //First Elbow Joint
  math::Vector3 firstElbowPose = mFirstElbowJoint->GetAnchor(0);
  chain.addSegment(KDL::Segment(KDL::Joint(KDL::Joint::RotX), 
    KDL::Frame(KDL::Vector(firstElbowPose.x, firstElbowPose.y, firstElbowPose.z))));

  //Second Elbow Joint
  math::Vector3 secondElbowPose = mSecondElbowJoint->GetAnchor(0);
  chain.addSegment(KDL::Segment(KDL::Joint(KDL::Joint::RotX), 
    KDL::Frame(KDL::Vector(secondElbowPose.x, secondElbowPose.y, secondElbowPose.z))));

  //End Joint
  math::Vector3 endPose = mWristJoint->GetAnchor(0);
  chain.addSegment(KDL::Segment(KDL::Joint(KDL::Joint::None),
    KDL::Frame(KDL::Vector(endPose.x, endPose.y, endPose.z))));

  KDL::ChainIkSolverPos_LMA myIk = KDL::ChainIkSolverPos_LMA(chain);         

  //Create joint array
  jointCount = chain.getNrOfJoints();

  KDL::JntArray jointPositions = KDL::JntArray(jointCount);
  targetRotation = KDL::JntArray( jointCount );

  for(int i = 0; i < jointCount - 1; i++)
  {
    jointPositions(i) = mJoints[i]->GetAngle(0).Radian();
  }

  physics::ModelPtr target = mModel->GetWorld()->GetModel("Target");

  math::Pose pose = target->GetWorldPose();
  math::Pose myPose = mModel->GetWorldPose();

  double xPosition = pose.pos.x - myPose.pos.x;
  double yPosition = pose.pos.y - myPose.pos.y;
  double zPosition = pose.pos.z - myPose.pos.z;

  KDL::Frame cartesianPosition = KDL::Frame(KDL::Vector(xPosition, yPosition, zPosition));

  gzdbg << "Calculating..." << std::endl;
  bool kinematics_status;
  kinematics_status = myIk.CartToJnt( jointPositions, cartesianPosition, targetRotation );
  gzdbg << "Final Status: " << kinematics_status << std::endl;
  if(kinematics_status >= 0)
  {
    for( int i = 0; i < jointCount - 1; i++ )
    {
      mJoints[i]->SetAngle(0, targetRotation(i));
    }
  }//Create a KDL Joint Chain of our Arm Robot
  KDL::Chain chain;

  //Base Joint
  math::Vector3 basePose = mBaseJoint->GetAnchor(0);
  chain.addSegment(KDL::Segment(KDL::Joint(KDL::Joint::RotZ), 
  KDL::Frame(KDL::Vector(basePose.x, basePose.y, basePose.z))));

  //Shoulder Joint
  math::Vector3 shoulderPose = mShoulderJoint->GetAnchor(0);
  chain.addSegment(KDL::Segment(KDL::Joint(KDL::Joint::RotX), 
    KDL::Frame(KDL::Vector(shoulderPose.x, shoulderPose.y, shoulderPose.z))));

  //First Elbow Joint
  math::Vector3 firstElbowPose = mFirstElbowJoint->GetAnchor(0);
  chain.addSegment(KDL::Segment(KDL::Joint(KDL::Joint::RotX), 
    KDL::Frame(KDL::Vector(firstElbowPose.x, firstElbowPose.y, firstElbowPose.z))));

  //Second Elbow Joint
  math::Vector3 secondElbowPose = mSecondElbowJoint->GetAnchor(0);
  chain.addSegment(KDL::Segment(KDL::Joint(KDL::Joint::RotX), 
    KDL::Frame(KDL::Vector(secondElbowPose.x, secondElbowPose.y, secondElbowPose.z))));

  //End Joint
  math::Vector3 endPose = mWristJoint->GetAnchor(0);
  chain.addSegment(KDL::Segment(KDL::Joint(KDL::Joint::None),
    KDL::Frame(KDL::Vector(endPose.x, endPose.y, endPose.z))));

  KDL::ChainIkSolverPos_LMA myIk = KDL::ChainIkSolverPos_LMA(chain);         

  //Create joint array
  jointCount = chain.getNrOfJoints();

  KDL::JntArray jointPositions = KDL::JntArray(jointCount);
  targetRotation = KDL::JntArray( jointCount );

  for(int i = 0; i < jointCount - 1; i++)
  {
    jointPositions(i) = mJoints[i]->GetAngle(0).Radian();
  }

  physics::ModelPtr target = mModel->GetWorld()->GetModel("Target");

  math::Pose pose = target->GetWorldPose();
  math::Pose myPose = mModel->GetWorldPose();

  double xPosition = pose.pos.x - myPose.pos.x;
  double yPosition = pose.pos.y - myPose.pos.y;
  double zPosition = pose.pos.z - myPose.pos.z;

  KDL::Frame cartesianPosition = KDL::Frame(KDL::Vector(xPosition, yPosition, zPosition));

  gzdbg << "Calculating..." << std::endl;
  bool kinematics_status;
  kinematics_status = myIk.CartToJnt( jointPositions, cartesianPosition, targetRotation );
  gzdbg << "Final Status: " << kinematics_status << std::endl;
  if(kinematics_status >= 0)
  {
    for( int i = 0; i < jointCount - 1; i++ )
    {
      mJoints[i]->SetAngle(0, targetRotation(i));
    }
  } 
```

# codeigniter - 可以遍历 foreach 并仅保留匹配值吗？（使用 CodeIgniter）

> ID：15074212
> 
> 赞同：0
> 
> 时间：2013-02-25T18:51:30.703
> 
> 标签：codeigniter, foreach, loops

我正在尝试比较两个用户的图书库。我正在显示另一个用户的图书馆，如果当前用户在他的图书馆中也有那本书，我希望在该书下有一个指向“Ping”的链接。这是相关的控制器代码：

```
function other_user_library()
{
    $this->load->model('user_library_model');
    $this->load->model('user_information_model');
    $data['other_user_library']=$this->user_library_model->other_user_library($username);
    $data['my_book']=$this->user_library_model->compare_libraries();

    $this->load->view('other_user_library', $data);
} 
```

这是模型：

```
function other_user_library($username)
{
    $this->load->database();

    $this->db->select('*');
    //rest of query to display all of other user's books

    $query= $this->db->get();
    return $query->result();    
}
function compare_libraries()
{
    $this->load->database();

    $this->db->select('BOOK.isbn');
    //rest of query to return the current user's list of isbns in his library

    $query= $this->db->get();
    return $query->result();    
} 
```

这是相关的查看代码：

```
<?php foreach ($other_user_library as $row) :?>
<?php if($row->isbn)
    {
       foreach ($my_book as $thing):
       if($thing->isbn ==$row->isbn)
       {
           $ping = TRUE;
           if($ping)
           {
             echo anchor('Ping');
           } 
       }
       else
       {
          echo "somethingelse";
       }
       endforeach;  
       }?>              
   <?php endforeach;?> 
```

现在，就目前而言，对于拥有 8 本书的用户，其中一本与其他用户图书馆中的书相匹配，这将显示“somethingelse”7 次，然后显示“Ping”链接一次。我想知道是否有办法只通过 8 个 isbns，看到其中一个匹配，然后只显示“Ping”链接。我试过只删除 else{echo "somethingelse";} 行。然后它只显示匹配书籍的“Ping”。但是，我希望能够在那些不匹配的书籍下放置其他内容，而不是仅仅将它们留空。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T22:39:52.447

我无法遵循您的整个代码。但是我已经对我认为需要进行明显修改的地方进行了更改。试试看。

```
 <?php foreach ($other_user_library as $row) : ?>
        <?php
         $ping = FALSE; //set ping here
        if ($row->isbn) {

            foreach ($my_book as $thing):
                if ($thing->isbn == $row->isbn) {
                    $ping = true;
                    break; //prevents the continuous loop after a match incase you have thousands of rows
                }

            endforeach;

            if ($ping) { //Do the echo after this point to have just one echo. You could still move out of the parent foreach loop as long as $ping is defined first.
                echo anchor('Ping');
            } else {
                echo "somethingelse";
            }
        }
        ?>              
    <?php endforeach; ?> 
```

# php - mysqli_query 参数

> ID：15074215
> 
> 赞同：0
> 
> 时间：2013-02-25T18:51:42.553
> 
> 标签：php, mysql, mysqli

我试图将我的一个项目从 mysql 转换为 mysqli 但它似乎给了我一个错误

```
Warning: mysqli_query() expects at least 2 parameters, 1 
```

这是我的数据库连接

```
$mysqli = new mysqli();
$mysqli->connect('localhost', 'root', '', 'myscript'); 
```

这是查询

```
$sql = mysqli_query("SELECT * FROM settings WHERE id='1'") or die (mysqli_error());
$results = mysqli_fetch_array($sql); 
```

如果有人能告诉我如何解决这个错误，我将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T18:56:06.390

您可以尝试使用面向对象的 PHP 方式执行查询，而不是混合和匹配面向对象的 PHP 和常规 PHP：

```
$mysqli = new mysqli();
$mysqli->connect('localhost', 'root', '', 'myscript');
if($result = $mysqli->query("SELECT * FROM settings WHERE id='1'")){

    //DO STUFF

    $result->close();
}else{
     printf("Error: %s\n", $mysqli->error);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T19:01:50.313

请不要将您的项目从 mysql 转换为 mysqli。
将其转换为 PDO。
Mysqli 仅适用于初学者手册中的愚蠢示例 - 随着您的进步，它会让您的生活更加艰难。

所以，不要使用 mysqli，而是使用 PDO。
这几乎是一样的：

```
$opt = array(PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION);
$pdo = new PDO('mysql:dbname=myscript;host=localhost','root','', $opt);

$stm = $pdo->prepare("SELECT * FROM settings WHERE id=?");
$stm->execute(array(1));
$data = $stm->fetch(); 
```

请注意参数化查询支持——在驱动程序之间进行这种移动的主要原因——已在此代码中使用。
即使在这样小的例子中，PDO 也更好。好多了 并且对于更复杂的 mysqli 将变得完全无法使用，而 PDO 将是相同的 - 非常丑陋但至少是可行的。

# javascript - 如何在按钮 URL 中使用单选按钮值？

> ID：15074219
> 
> 赞同：-1
> 
> 时间：2013-02-25T18:51:49.833
> 
> 标签：javascript

我有一个带有几个单选按钮的表单，我想使用单选按钮选择的值来更改单击按钮时转到的网址。

```
<input type="radio" name="Server" value="ftp://one.com" checked>One
<input type="radio" name="Server" value="ftp://two.com">Two

<button type="button" name="" onClick="location.href='document.getElementsByName("Server").checked + "/file.ext"'">Download 
```

我想用单选按钮选择 FTP 服务器并更改按钮的下载链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:59:46.897

我相信应该是

```
document.getElementsByName("Server").checked 
```

你少了一个'e'...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T20:04:41.360

```
<script>
function getServer() {
    var servers = document.getElementsByName("Server");
    for(var i = 0; i < servers.length; i++) {
        if (servers[i].checked) {
            return servers[i].value;
        }
    }
    return '';
}
</script>

<input type="radio" name="Server" value="ftp://one.com" checked>One
<input type="radio" name="Server" value="ftp://two.com">Two

<button type="button" id="courseware" onClick="location.href= getServer() + '/file.ext'">Download 
```

# adobe - app.doScript 和 $.evalFile 有什么区别？

> ID：15074220
> 
> 赞同：9
> 
> 时间：2013-02-25T18:51:51.193
> 
> 标签：adobe, adobe-indesign, extendscript, indesign-server

到目前为止我发现的唯一区别：如果运行的脚本`app.doScript`返回错误，则错误的文件和行号将被`app.doScript`调用的文件和行号覆盖。

还有其他我应该知道的差异吗？

这是演示上述差异的示例代码：

首次运行 InDesign：

```
c:
cd "C:\Program Files\Adobe\Adobe InDesign CS6 Server x64"
InDesignServer.com -port 12345
pause 
```

接下来创建一个批处理文件来运行脚本：

```
c:
cd "C:\Program Files\Adobe\Adobe InDesign CS6 Server x64"
sampleclient -host localhost:12345 -server "C:/doscript_vs_evalfile/call_doScript.jsx"
pause 
```

这是“call_doScript.jsx”，它将调用 app.doScript。

```
try {
    app.doScript(new File("/c/doscript_vs_evalfile/called_by_doScript.jsx"));
    "Success";
}
catch (e) {
    var sError = "Encountered " + e.name + " #" + e.number + " at line " + e.line + " of file " + e.fileName + "\n" + e.message;
    app.consoleout(sError);
    sError;
} 
```

这是“called_by_doScript.jsx”，由前面的脚本调用：

```
app.consoleout("Running called_by_doScript.jsx");
// Produce error
var a = b; 
```

运行批处理文件，结果如下：

```
02/25/13 13:30:03 INFO  [javascript] Executing File: C:\doscript_vs_evalfile\call_doScript.jsx
02/25/13 13:30:03 INFO  [javascript] Executing File: C:\doscript_vs_evalfile\called_by_doScript.jsx
02/25/13 13:30:03 INFO  [script] Running called_by_doScript.jsx
02/25/13 13:30:03 INFO  [script] Encountered ReferenceError #2 at line 2 of file /c/doscript_vs_evalfile/call_doScript.jsx
b is undefined 
```

请注意，上面的错误是不正确的。该错误是由 called_by_doScript 的第 3 行引起的，而不是 call_doScript 的第 2 行。

现在修改脚本以使用 $.evalFile，我们得到以下结果：

```
02/25/13 13:32:39 INFO  [javascript] Executing File: C:\doscript_vs_evalfile\call_evalFile.jsx
02/25/13 13:32:39 INFO  [script] Running called_by_evalFile.jsx
02/25/13 13:32:39 INFO  [script] Encountered ReferenceError #2 at line 3 of file /c/doscript_vs_evalfile/called_by_evalFile.jsx
b is undefined 
```

请注意，错误现在报告在正确的位置。

* * *

**编辑：**

我发现稀疏的文档。它并没有真正回答我的问题，但它确实描述了不同的可选参数。

**doScript：** [Adobe InDesign CS6 脚本指南：JavaScript](http://www.adobe.com/devnet/indesign/documentation.html)（[直接链](http://wwwimages.adobe.com/www.adobe.com/content/dam/Adobe/en/devnet/indesign/sdk/cs6/scripting/InDesign_ScriptingGuide_JS.pdf)​​接）
参见第 16 页，“使用 doScript 方法”

**evalFile：** [Javascript 工具指南：Adobe Creative Suite 5](http://wwwimages.adobe.com/www.adobe.com/content/dam/Adobe/en/products/indesign/pdfs/JavaScriptToolsGuide_CS5.pdf)
参见第 219 页

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T19:49:42.463

$.evalFile 是一个 ExtendScript 功能，而 app.doScript 是由 InDesign 实现的。

$.evalFile 确实

*   维护 $.stack
*   考虑 $.includePath
*   在其他目标应用程序中工作

app.doScript 可以

*   传递参数
*   更改语言，例如 AppleScript
*   使用#targetengine 处理其他会话
*   在支持的范围内修改撤消/事务模式

但 ...

*   嵌套的 doScript 调用覆盖参数
*   在一个复杂的设置中，我在传递超过 12 个参数后无法调试。
*   单步跨 doScript 很麻烦

此外，正如您所发现的，错误处理有所不同。留意异常...

# regex - 如果字符串结尾不是，则使用 RegEx 来处理字符串的开头

> ID：15074221
> 
> 赞同：1
> 
> 时间：2013-02-25T18:51:52.107
> 
> 标签：regex, find

我正在尝试匹配配置中以“deny”开头但不以“log”结尾的行。这看起来非常初级，但我在我看过的众多论坛中都找不到我的解决方案。我的初学者心态让我尝试“^deny.* (?!log$)” 为什么这不起作用？我的理解是，它会找到以“拒绝”开头的任何字符串，后跟 0 位或更多位的任何字符，其中行尾不是日志。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T19:15:05.327

当给出类似的行时`deny this log`，您的`^deny.*(?!log$)`正则表达式（我省略了示例问题中的空格）的评估如下：

*   `^deny`匹配“拒绝”。
*   `.*`意思是“匹配0个或多个任意字符”，所以可以匹配“这个日志”。
*   `^(?!log$)`意思是“确保下一个字符不是'log'然后是行尾。” 在这种情况下，它们不是——它们只是行尾——所以正则表达式匹配。

试试这个正则表达式：

`^deny.*$(?<!log)`

“在字符串的开头匹配拒绝，然后匹配到行尾，然后使用零宽度否定后向断言来检查我们刚刚在行尾匹配的内容不是'log'。”

**说了这么多……**

正则表达式不一定是这项工作的最佳工具。在这种情况下，一个简单的布尔运算符如

```
if (/^deny/ and not /log$/) 
```

可能比更高级的正则表达式更清晰

```
if (/^deny.*$(?<!log)/) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T19:29:39.863

`(?!log$)`是一个*零宽度的*负前瞻断言，这意味着如果在字符串中的这一点立即向前，则不匹配是`log`和字符串的结尾，但是`.*`您的正则表达式中的 已经贪婪地消耗了所有字符直到结束的字符串所以没有办法`log`可以匹配。

如果您的正则表达式实现支持后视，您可以使用 Josh Kelley 的回答中的正则表达式，如果您使用的是 javascript，您可以使用

```
/^deny(?:.{0,2}|.*(?!log)...)$/m 
```

该`m`标志表示多行模式，它创建`^`并`$`匹配每行的开始和结束，而不仅仅是字符串的开始和结束。

请注意，三个`.`位于负前瞻之后，以便它有空间匹配`log`（如果它在那里）。包括这三个点意味着还需要添加`.{0,2}`选项，以便后面从零到两个字符的字符串`deny`也将匹配。这意味着*a*或*b*必须匹配`(?:a|b)`的非捕获组。

# r - R包“spatstat”：当use.gam = TRUE时，如何在泊松过程模型（函数：ppm）中获得非平滑项的标准误差？

> ID：15074222
> 
> 赞同：6
> 
> 时间：2013-02-25T18:51:56.683
> 
> 标签：r, statistics, spatstat

在 R 包中`spatstat`（我使用的是当前版本，`1.31-0`），有一个选项`use.gam`. 当您将此设置为 true 时，您可以在线性预测器中包含平滑项，就像使用 R 包一样`mgcv`。例如，

```
g <- ppm(nztrees, ~1+s(x,y), use.gam=TRUE) 
```

现在，如果我想要截距的置信区间，您通常可以使用`summary`or `vcov`，它在您不使用时有效`gam`，但在您使用 gam 时失败

```
vcov(g) 
```

给出错误消息

```
Error in model.frame.default(formula = fmla, data = 
    list(.mpl.W = c(7.09716796875,  :invalid type (list) for variable 's(x, y)' 
```

我知道，当您使用 时，此处的此标准错误近似值是不合理`gam`的，但这已被**警告**消息捕获：

```
In addition: Warning message: model was fitted by gam();
            asymptotic variance calculation ignores this 
```

我对此并不担心——我准备证明使用这些标准错误是为了我使用它们的目的——我只想要数字，并希望避免“自己写”这样做。

我上面得到的错误消息似乎并不取决于我正在使用的数据集。我在`nztrees`这里使用了这个例子，因为我知道它预装了`spatstat`. 似乎它在抱怨变量本身，但模型清楚地理解语法，因为它适合模型（对于我自己的数据集，预测值看起来相当不错，所以我知道这不仅仅是在抽出垃圾）。

有人对此有任何提示或见解吗？这是一个错误吗？令我惊讶的是，我一直无法在网上找到任何关于此的讨论。任何帮助或提示表示赞赏。

**编辑：**虽然我已经在这里明确回答了我自己的问题，但我暂时不会接受我的回答。这样，如果有人有兴趣并愿意为此努力寻找“解决方法”而无需等待下一版`spatstat`，我可以将赏金奖励给他/她。否则，我将在赏金期结束时接受我自己的答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T13:50:52.917

我已就此联系了其中一位包作者 Adrian Baddeley。他迅速回复并让我知道这确实是软件的一个错误，显然，我是第一个遇到它的人。幸运的是，他只花了很短的时间就找到了问题并进行了纠正。该修复将包含在 spatstat 的下一个版本 1.31-1 中。

**编辑：**的更新版本`spatstat`已发布，不再有此错误：

```
g <- ppm(nztrees, ~1+s(x,y), use.gam=TRUE)
sqrt( vcov(g)[1,1] ) 
[1] 0.1150982
Warning message:
model was fitted by gam(); asymptotic variance calculation ignores this 
```

有关其他发行说明，请参阅[spatstat 网站](http://www.spatstat.org/spatstat/)。感谢所有阅读并参与此主题的人！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T17:57:23.300

我不确定您是否可以按照自己的方式指定趋势，这可能是导致错误的原因。[根据文档，](http://finzi.psych.upenn.edu/R/library/spatstat/html/ppm.html)这似乎没有意义：

> `The default formula, ~1, indicates the model is stationary and no trend is to be fitted.`

但是，您可以像这样指定模型：

```
g <- ppm(nztrees, ~x+y, use.gam=TRUE)   
#Then to extract the coefficientss:
>coef(g)
(Intercept)             x             y 
-5.0346019490  0.0013582470 -0.0006416421 
#And calculate their se:
vc <- vcov(g)
se <- sqrt(diag(vc))
> se
(Intercept)           x           y 
0.264854030 0.002244702 0.003609366 
```

这有意义/预期的结果吗？我知道软件包作者在[r-sig-geo](https://stat.ethz.ch/mailman/listinfo/r-sig-geo)邮件 lsit 上非常活跃，因为他们过去曾帮助过我。您可能还想将您的问题发布到该邮件列表，但您应该在此处引用您的问题。

# java - 列表中的 1 索引消失并替换 0 索引

> ID：15074223
> 
> 赞同：0
> 
> 时间：2013-02-25T18:51:57.497
> 
> 标签：java, swing, jlist

我有一个`JList`包含多个项目，索引为 0 的项目和索引为 1 的项目。当我单击 1 索引中的项目时，它会消失并变成 0 索引中的项目，有人知道为什么吗？

```
rightSelectedRow = rightJTable.getSelectedRow(); 
```

# java - Android 添加 cp866 字符集

> ID：15074225
> 
> 赞同：0
> 
> 时间：2013-02-25T18:52:02.123
> 
> 标签：java, android

我正在尝试为我的 Android 应用程序实现 cp 866 支持。我使用 InteliJ Idea 社区版 12.0.3。我想将`META-INF\service\java.nio.charset.spi.CharsetProvider`文件放入我的`.apk`. 但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T07:44:23.657

[ApkBuilder](https://android.googlesource.com/platform/sdk/+/10e712627b86b2b0061dbd3a20f5f966b2cd7330/sdkmanager/libs/sdklib/src/com/android/sdklib/internal/build/JavaResourceFilter.java)使用的[JavaResourceFilter](https://android.googlesource.com/platform/tools/adt/idea/+/e54608a9498ced0348c84cf87f90dfebe907429a/android/common/src/org/jetbrains/android/compiler/tools/AndroidApkBuilder.java)会忽略 META-INF 文件夹中的所有文件。

将这些文件包含到您的 apk 中的唯一方法是在打包后将它们放在那里。

我只是对 android-sdk 中的 build.xml 进行了一些自定义，它运行良好。

见[我的帖子](https://stackoverflow.com/questions/16898409/keep-meta-inf-services-files-in-apk)。

# c# - 井字游戏确定获胜者

> ID：15074232
> 
> 赞同：0
> 
> 时间：2013-02-25T18:52:24.093
> 
> 标签：c#, arrays, console, char

```
 public void CheckWin()
  {
     if (spillebræt[0, 0] == 'X' && spillebræt[1, 0] == 'X' && spillebræt[2, 0] == 'X')
     {
        Console.WriteLine("Player 1 wins!\nPress ENTER to end game");
        Console.ReadLine();
        Environment.Exit(0);
     }
  } 
```

Spillebræt = 游戏板。我正在尝试创建一种方法来确定基于控制台的简单井字游戏的获胜者。对于游戏板，我有一个二维字符数组，最初用“+”符号填充。玩家等级在 2 个玩家轮次之间切换，每次检查是否找到了获胜者。我想我可以使用很多 if 语句来确定获胜者，因为有 8 种可能的解决方案，但我正在寻找一种使用更少行空间的方法。上面的代码显示了我的初始方法（通过 if 语句检查每个可能的解决方案）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T19:50:22.740

您总是可以编写所有各种案例，但这很麻烦，并且无法扩展（如果您想扩展板怎么办？）。

因此，我建议将更多参与的实施作为练习。

您创建一个`Line`类，具有起点和终点。您还可以在 上实现*移动到下一行*操作符`Line`，它会旋转它。然后，您可以通过按照简单规则移动起点和终点来简单地循环遍历所有行。

然后，您在您的板上创建一个运算符，让您可以*将*一条线应用到该板上，如果该行路径上的每个板箱都具有相同的符号，则返回 true。

这样，您可以使用以下方法简单地检查棋盘位置是否为获胜位置：

```
for (Line l = new Line() ; l.Valid() ; l.MoveToNextLine())
{
    if (board.WinningLine(l))
        return true;
}
return false; 
```

当然，您可以根据自己的喜好进行自定义，例如`MoveToNextLine`用一个替换`operator ++`等。并且您应该`end`在您的行上有一个状态，这样您就可以跳出循环而不是一遍又一遍地继续。

这`MoveToNextLine`将只是根据您决定的顺序围绕您的起点和终点移动。

现在您可以看到，如果您想在`n x n`棋盘上扩展您的游戏，这将非常容易：您只需更新`MoveToNextLine`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T19:28:04.317

您可以拥有一个包含所有获胜案例的矩阵，并检查当前状态是否为获胜状态：

```
 // Example
        var matrix = new[,] { { "O", "+", "+" }, { "O", "+", "+" }, { "O", "+", "+" } };

        var wins = new List<string> {
             "100100100", // 1st column vertical
             "010010010", // 2nd column vertical
             "001001001", // 3rd column vertical
             "111000000", // 1st row horizontal
             "000111000", // 2nd row horizontal
             "000000111", // 3rd row horizontal
             "100010001", // top-left bottom-right diagonal
             "001010100"  // top-right bottom-left diagonal
            };

        // Crosses (X)
        var check = new List<string> {"0", "0", "0", "0", "0", "0", "0", "0", "0"};
        for (var i = 0; i < 3; i++)
            for (var j = 0; j < 3; j++)
                if (matrix[i, j] == "X") check[i*3 + j] = "1";
        if (wins.Contains(string.Join("", check))) { /* crosses win */ }

        // Circles (O)
        check = new List<string> { "0", "0", "0", "0", "0", "0", "0", "0", "0" };
        for (var i = 0; i < 3; i++)
            for (var j = 0; j < 3; j++)
                if (matrix[i, j] == "O") check[i * 3 + j] = "1";
        if (wins.Contains(string.Join("", check))) { /* circles win */ } 
```

# css - 引导弹出窗口 z-index 的问题

> ID：15074234
> 
> 赞同：4
> 
> 时间：2013-02-25T18:52:34.153
> 
> 标签：css, twitter-bootstrap

[如果它在具有平滑 div 滚动](http://www.smoothdivscroll.com/)的 div 中，我似乎无法在 bootstrap popover 上获得 z-index 工作。我尝试设置极高的值，查看所有 css 以查看是否有任何 z-indexes 高于 popover 的值，但没有成功。

Javascript：

```
$(".project").smoothDivScroll({
    mousewheelScrolling: "allDirections",
    hotSpotScrolling: false,
    touchScrolling: true
});
$(".block").popover({
    html: true,
    animation: true,
    placement: 'right'
}); 
```

这是它目前的样子：[1](http://i.imgur.com/1c6gOSX.png) , [2](http://i.imgur.com/dir8Vuz.png)。

现场示例：[这里](http://emmorts.lhosting.info/)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-06-11T19:51:40.100

这是旧的，但对于其他人，请尝试添加以下属性：

```
data-container="body" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T19:19:01.987

我相信这与您的溢出有关。它似乎正在剪裁你的盒子。如果您查看 smoothDivScroll.css 中的 .scrollWrapper 并将溢出更改为可见，您将看到更多我们的框。我知道这不是你想要的效果，但我认为这是一个开始。必须与您的溢出有关。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T19:22:08.253

您看到的剪辑可能与 z-index 声明无关，而是与 div 的大小`.project`和嵌套 div 的溢出声明有关。

```
div.scrollWrapper {
position: relative;
overflow: hidden;
width: 100%;
height: 100%;
} 
```

这`overflow:hidden;`就是创建您所看到的剪辑的原因。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-24T14:47:34.560

@疯狂的跳虫

我有[一个弹出框](http://www.recuperodati.biz/nas/)，它会在页面加载时自动弹出，并在超时后自动隐藏（实际上它会被破坏），它表示关于导航栏本身的简短说明。我也确实使用滚动。

我试过添加

```
data-container="body" 
```

没办法，这种行为是针对手机的，并且取决于该移动设备及其浏览器。

在黑莓操作系统 10 上，它的行为与预期一样，弹出框位于一切之上，不需要数据容器（尽管它可能对其他设备有帮助）

在 samsung/android 上，默认浏览器不显示弹出框，虽然也有一些 html5 圆圈显示为正方形，所以看起来它既不支持 html5，下拉项目也没有完全显示，完全是废话。在同一个三星/安卓上，firefox 要好得多，但是在那里，弹出框被导航栏标志隐藏了。没试过 chrome for android。

我希望每个特定设备上的每个移动浏览器都有自己的故事。

# ios - 同时设置 NSManagedObjectContext 中所有对象的一个 特定属性，并立即更新

> ID：15074246
> 
> 赞同：0
> 
> 时间：2013-02-25T18:53:26.897
> 
> 标签：ios, objective-c, core-data, nsmanagedobject, nsmanagedobjectcontext

假设我通过 Core Data 加载了 1,000 个对象，每个对象都有一个用户可设置的`Favorite`布尔值。它默认适用`NO`于所有对象，但用户可以随意翻动，将其设置为任意`YES`数量。我希望我的设置页面中有一个按钮来为每个对象重置该`Favorite`状态。`NO`

最好的方法是什么？我可以以某种方式遍历该实体的每个实例，将其设置回来吗？（顺便说一句，“实例”是指某个实体的对象的正确词吗？）这里有更好的方法吗？我不想从它的初始源重新加载数据，因为那里的其他东西可能已经改变：它不是完全重置，只是一个“Mass Unfavourite”选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T19:18:28.693

好的，我已经让它工作了，但由于某种原因它需要重新启动应用程序。我正在这样做：

```
- (IBAction) resetFavourites: (id) sender
{
    NSFetchRequest *fetch = [[NSFetchRequest alloc] init];
    [fetch setEntity: [NSEntityDescription entityForName: @"Quote" inManagedObjectContext: [[FQCoreDataController sharedCoreDataController] managedObjectContext]]];
    NSArray *results = [[[FQCoreDataController sharedCoreDataController] managedObjectContext] executeFetchRequest: fetch error: nil];
    for (Quote *quote in results) {
        [quote setIsFavourite: [NSNumber numberWithBool: NO]];
    }

    NSError *error;
    if (![self.fetchedResultsController performFetch: &error]) {
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }
    [self.tableView reloadData];
} 
```

如果我关闭并重新打开应用程序，这工作正常，但它不会立即反映。这不是`reloadData`应该做的，导致立即刷新吗？我在那里错过了什么吗？

# jpa - 使用 JSF2、EJB3、JPA2 的事务

> ID：15074247
> 
> 赞同：1
> 
> 时间：2013-02-25T18:53:29.507
> 
> 标签：jpa, jsf-2, ejb

在这种环境中处理事务的最佳方式是什么？

我有一个 Transacao 类，其中包含 Transacao 的集合。

```
public class Transacao {
    @OneToMany(fetch = FetchType.LAZY, mappedBy = "pai")
    private List<Transacao> filhos;
} 
```

我从 EJB 将其加载到 JSF 中，例如：

```
public class TransacaoBean {

    @EJB
    private TransacaoService transacaoService;

    private void edit(Long id) {
        this.transacao = transacaoService.findById(id);
    }
} 
```

虽然，如果我想获得 filhos 的集合，我必须这样做：

```
public class TransacaoBean {

    ...

    private void edit(Long id) {
        this.transacao = transacaoService.findById(id);
        log.info(this.transacao.getFilhos.size()); //this throws a LazyInitializationException
    }
} 
```

我得到一个例外。

将它加载到我的 JSF 中的最佳方法是什么？我正在考虑创建一个`Filter`并使用`USerTransaction`来保持对请求的事务打开或在我的 EJB 中获取文件。有没有更好的解决方案，哪个更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T12:50:59.833

的默认`fetch`值为。`@OneToMany``FetchType.LAZY`

您可以将其设置`FetchType.EAGER`为在非托管环境中使用它们。

或者，您可以制作另一个 EJB 或方法来获取列表或仅获取大小。

```
public class TransacaoService {

    public Transacao findById(final long id) {
        ...
    }

    public long getFilhosSize(final long id) {
        // SELECT f FROM Transacao AS t WHERE t.pai.id=:id
    }

    @PersistenceContext
    private EntityManager entityManager;
} 
```

# mpi - 使用 hwloc 物理 ID 构建 MPI rankfile

> ID：15074248
> 
> 赞同：0
> 
> 时间：2013-02-25T18:53:30.770
> 
> 标签：mpi

我不确定如何使用从 hwloc 检索到的物理 ID。例如，我看到以下内容，但如果我将`rank 0=10.0.2.4 slot=1:8`其放入 rankfile 中，则会收到一个`8`不存在的错误。但是，`rank 0=10.0.2.4 slot=1:p8`运行没有问题，但我不知道我是否引用了`PU#8`或`Core P#8`. 如何使用 rankfile 绑定到特定核心或特定硬件线程？有什么方法可以调试吗？

```
[hamiltont@4 latency]$ hwloc-ls -p
Machine (36GB)
  NUMANode P#0 (18GB) + Socket P#1 + L3 (12MB)
    L2 (256KB) + L1 (32KB) + Core P#0
      PU P#0
      PU P#12
    L2 (256KB) + L1 (32KB) + Core P#1
      PU P#2
      PU P#14
    L2 (256KB) + L1 (32KB) + Core P#2
      PU P#4
      PU P#16
    L2 (256KB) + L1 (32KB) + Core P#8
      PU P#6
      PU P#18
    L2 (256KB) + L1 (32KB) + Core P#9
      PU P#8
      PU P#20
    L2 (256KB) + L1 (32KB) + Core P#10
      PU P#10
      PU P#22
  NUMANode P#1 (18GB) + Socket P#0 + L3 (12MB)
    L2 (256KB) + L1 (32KB) + Core P#0
      PU P#1
      PU P#13
    L2 (256KB) + L1 (32KB) + Core P#1
      PU P#3
      PU P#15
    L2 (256KB) + L1 (32KB) + Core P#2
      PU P#5
      PU P#17
    L2 (256KB) + L1 (32KB) + Core P#8
      PU P#7
      PU P#19
    L2 (256KB) + L1 (32KB) + Core P#9
      PU P#9
      PU P#21
    L2 (256KB) + L1 (32KB) + Core P#10
      PU P#11
      PU P#23 
```

我认为[这个问题](https://stackoverflow.com/questions/11749182/assign-two-mpi-processes-per-core/11761943#11761943)与我要问的问题非常接近，但并不完全相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T23:50:35.957

所以有一个编号为 23 的 PU，但没有具有此编号的内核，因此如果引用编号 23 时出现错误，则 MPI 正在尝试获取内核。

```
# No errors, so this is referencing a PU
rank 1=10.0.2.4 slot=1:p23
# No errors, so we are referencing a PU
rank 1=10.0.2.4 slot=p1:p23
# Error! We might be referencing a core
rank 1=10.0.2.4 slot=p1:23
# No error, we are probably referencing physical socket 1 and physical core 8
rank 1=10.0.2.4 slot=p1:8 
```

# javascript - jQuery/javascript 强调性能

> ID：15074249
> 
> 赞同：-1
> 
> 时间：2013-02-25T18:53:35.913
> 
> 标签：javascript, jquery, html

我正在详尽地使用 jQuery 来处理大型 xml 文件（它们充当数据模型/元数据和我的 HTML5 视图的真实模型数据）。现在的问题是 - 我想知道它可以处理多大或多大的文件大小？我已经在处理大小为 1 mb 的 xml 文件 - 如果我尝试处理 15mb 的文件会发生什么？它能够处理这么大的数据吗？如果不是，那该怎么走 - 客户端缓存？jQuery 是如何支持它的？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T19:08:11.470

对 jQuery/javaScript 没有限制。这取决于浏览器和您的计算机，这里是浏览器/技术的所有限制的摘要。

![在此处输入图像描述](../Images/1f4b94dfef56782b30c1fcf41f438ea8.png)

[http://www.motobit.com/help/scputl/pa98.htm](http://www.motobit.com/help/scptutl/pa98.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T18:57:58.320

JavaScript 是客户端，因此它的限制来自浏览器和操作系统。Firefox 也有一些额外的技巧来停止一个长时间运行的脚本并让用户决定他们是否希望它继续执行，所以即使你打算使用大量的 ram 和 CPU，用户可能会单击“停止脚本”并阻止你的脚本从完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T19:00:12.373

在不使浏览器崩溃的情况下成功处理给定数量的数据所需的时间和能力取决于客户端机器/设备和浏览器。

所以答案没有直接反应。

做测试...

# android - 录音输入增益

> ID：15074250
> 
> 赞同：2
> 
> 时间：2013-02-25T18:53:35.683
> 
> 标签：android, audio, audio-recording, audiorecord, android-audiorecord

我正在使用 AudioRecord 录制来自 4 导体音频插孔的输入。问题是输入太大声并导致信号削波。我想知道是否有人知道我可以在录制时调整软件增益的方法，这样就不会发生削波。我不能使用 AutomaticGainControl，因为信号动态对我的目的很重要。

谢谢！

# symfony - 尝试执行查询时 PathExpression 无效

> ID：15074254
> 
> 赞同：4
> 
> 时间：2013-02-25T18:53:46.210
> 
> 标签：symfony, doctrine, dql

我不知道我还能尝试什么。

我收到此错误：

> [语义错误] 第 0 行，第 10 列“idEntrada FROM”附近：错误：无效的路径表达式。必须是 StateFieldPathExpression。

这是我的查询：

```
$query=$em->createQuery("SELECT mp.idEntrada FROM PAVPrimerAvisoBundle:ModeradoPor mp WHERE mp.idUsuario = $userId"); 
```

这是我的实体：

```
class ModeradoPor
{
/**
 * @var integer
 *
 * @ORM\Column(name="id", type="integer")
 * @ORM\Id
 * @ORM\GeneratedValue(strategy="AUTO")
 */
private $id;

/**
 * @var integer
 *
 * @ORM\ManyToOne(targetEntity="User")
 * @ORM\JoinColumn(name="user", referencedColumnName="id")
 */
private $idUsuario;

/**
 * @var integer
 *
 * @ORM\ManyToOne(targetEntity="Entrada")
 * @ORM\JoinColumn(name="idEntrada", referencedColumnName="id")
 */
private $idEntrada;

/**
 * @var integer
 *
 * @ORM\Column(name="votacio", type="integer")
 */
private $votacio;

/**
 * Get id
 *
 * @return integer 
 */
public function getId()
{
    return $this->id;
}

/**
 * Set idUsuario
 *
 * @param integer $idUsuario
 * @return ModeradoPor
 */
public function setIdUsuario($idUsuario)
{
    $this->idUsuario = $idUsuario;

    return $this;
}

/**
 * Get idUsuario
 *
 * @return integer 
 */
public function getIdUsuario()
{
    return $this->idUsuario;
}

/**
 * Set idEntrada
 *
 * @param integer $idEntrada
 */
public function setIdEntrada($idEntrada)
{
    $this->idEntrada = $idEntrada;
}

/**
 * Get idEntrada
 *
 * @return integer 
 */
public function getIdEntrada()
{
    return $this->idEntrada;
}

/**
 * Set votacio
 *
 * @param integer $votacio
 */
public function setVotacio($votacio)
{
    $this->votacio = $votacio;
}

/**
 * Get votacio
 *
 * @return integer 
 */
public function getVotacio()
{
    return $this->votacio;
} 
```

如果我执行此查询：

```
$query=$em->createQuery("SELECT mp FROM PAVPrimerAvisoBundle:ModeradoPor mp WHERE mp.idUsuario = $userId"); 
```

或者

```
$query=$em->createQuery("SELECT mp.id FROM PAVPrimerAvisoBundle:ModeradoPor mp WHERE mp.idUsuario = $userId"); 
```

完美运行。它只是与 mp.idEntrada。

我的实体中有错字吗？

编辑：也发生在`mp.idUsuario.`

**编辑：** 例如，我转储 mysql 查询，它显示如下（何时`SELECT mp`）

```
SELECT m0_.id AS id0, m0_.votacio AS votacio1, m0_.user AS user2, m0_.entrada_id AS entrada_id3 FROM ModeradoPor m0_ WHERE m0_.user = 5 
```

我也可以做 SELECT mp.id

**但从来没有 mp.idEntrada / mp.idUser**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-27T11:34:08.223

```
SELECT IDENTITY (mp.entrada)FROM PAVPrimerAvisoBundle:ModeradoPor mp WHERE mp.idUsuario = $userId 
```

这解决了这个问题。注意`"IDENTITY"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-27T06:24:00.603

您需要使用实体 FK 定义来获取 PK 字段（属性）。

例子：

我有一个实体：

*   documentoDocumento（文档之间有关系的实体）

*   文档（带有 document_Type_Id FK 的文档信息）

*   documentTipo（带有 document_type_id 的参考实体 ->（我的目标！！））

在 documentDocument 实体中：

```
/**
* @var Documento
*
* @ManyToOne(targetEntity="Documento")
* @JoinColumns({
*   @JoinColumn(name="documento2_id", referencedColumnName="id")
* })
*/
private $documento2; 
```

在文档实体中：

```
/**
* @var DocumentoTipo
*
* @ManyToOne(targetEntity="DocumentoTipo")
* @JoinColumns({
*   @JoinColumn(name="documento_tipo_id", referencedColumnName="id")
* })
*/
private $documentoTipo; 
```

* * *

在表格中

* * *

```
[DocumentoDocumento]  -- table with some type of relations between documents
* id              pk
- documento1_id   fk  
- documento2_id   fk

[Documento]
*id               pk
-documento_tipo   fk  -- type of document
- blablabla

[DocumentoTipo]
*id               pk
-tipo                 -- type description
************************ 
```

我想要从 DocumentoDocumento 中选择数据并从 DocumentoTipo 中显示 Tipo。

这会返回一个错误：

```
 $qb3 = $this->_em->createQueryBuilder();
$qb3->select('dd.id, dd.documento, d2.contenidoTipo')
  ->from('Mnc\Entity\DocumentoDocumento', 'dd')    // select from DocumentoDocumento
  ->innerJoin('dd.documento2','d2' );               // join to 'd2' 
```

但有：

```
$qb3 = $this->_em->createQueryBuilder();
$qb3->select('dd.id, dd.documento, dt2.tipo documentoTipo, dt2.id documentoTipoId')
  ->from('Mnc\Entity\DocumentoDocumento', 'dd') // select from DocumentoDocumento
  ->innerJoin('dd.documento2','d2' )            // join to 'd2'
  ->innerJoin('d2.documentoTipo', 'dt2');       // join FK in d2 to dt2 
```

我得到一个别名为“documentoTipoId”的 dt2.id。

# asp.net - global.asax 中的 HttpRuntime.Cache 始终为空

> ID：15074255
> 
> 赞同：0
> 
> 时间：2013-02-25T18:53:48.783
> 
> 标签：asp.net, caching, http-caching

我有一系列以这种方式缓存的缓存对象

```
HttpRuntime.Cache.Insert(....) 
```

我正在尝试使用`varyByCustom`用户控件的声明，并使用此缓存对象返回一个值`global.asax`

```
Public Overrides Function GetVaryByCustomString(context As HttpContext, arg As String) As String
    If arg = "getCache" Then
        Return HttpRuntime.Cache.Get("mainMenu_added")
    End If
end function 
```

不过，我每次都得到一个空记录。

我在其他地方检查过，缓存键确实存在，但在 global.asax 中似乎无法访问？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T19:55:29.600

啊。这是我做错了什么！

我试图刷新的控件嵌套在另一个缓存更长的控件中！

嗯。这是 asp.net 的一个非常烦人的“功能”！

# php - jQuery 访客计数器定期检查 MySQL 表

> ID：15074259
> 
> 赞同：0
> 
> 时间：2013-02-25T18:53:56.060
> 
> 标签：php, jquery, mysql, counter

clickbank 的首页曾经有一个柜台，上面显示了附属公司到目前为止赚了多少钱。没有什么不寻常的，除了这个慢慢地在你眼前点击美元。

我正在寻找类似的东西，但要找一个访客柜台。我可以使用 php 和 MySQL 来保存数据，但我想要一个更新的计数器，例如，每 10 秒检查一次数据库并调整计数。

我的直觉说 jquery 拥有答案，但这就是我干涸的地方，除了正常的计数器之外，在网上找不到任何东西，只有在你重新加载页面时才会刷新。

可能吗？

非常感谢您的任何想法或指示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T19:53:12.383

试试这样的东西。

```
<script type="text/javascript">
    $(function() {
        var updateInterval = 10000; // 10 seconds, in milliseconds

        function updateCounter(){

            $.ajax({
            url: 'ajaxCall/path...',
            dataType: "json",
            type: "GET",
            success: function(returnValue){
                    $('selector').text(returnValue);
                }
        });
        }

      setInterval(updateCounter, updateInterval);
    });

</script> 
```

# ios - 当 Next 按钮调用 Segue 进入下一个场景时保存 UITextField 数据（用户输入）

> ID：15074262
> 
> 赞同：0
> 
> 时间：2013-02-25T18:54:04.547
> 
> 标签：ios, uitextfield, segue

iOS6

我在一个场景中有 6 个 UITextFields，带有一个 Next 按钮，可以将其转移到下一个场景中。

当我点击键盘上的完成按钮时，下面的代码效果很好：

```
- (IBAction)dismissKeyboard:(id)sender
{
    if (sender == LocationName) {
    self.meeting.LocationName = LocationName.text;
    }

    if (sender == LocationAddress) {
    self.meeting.LocationAddress = LocationAddress.text;
    }

    if (sender == LocationCity) {
    self.meeting.LocationCity = LocationCity.text;
    }

//I have 3 more text fields after and then I persist to CoreData:

    NSError *error = nil;
    if (![managedObjectContext save:&error]) {
    }

    [sender endEditing:YES];
} 
```

如果用户点击键盘上的完成按钮，则数据保存良好。

但是，如果用户点击导航栏上的 Next 按钮，而没有先点击键盘上的 Done 按钮，则用户在 UITextfield 内键入的内容不会保存。当用户点击导航栏上的下一步按钮调用下一个场景时，我希望用户在所有字段中键入数据（用户从键盘输入的数据）保存。

我有下一个按钮的以下代码：

```
- (IBAction)nextButtonPressed:(id)sender {

    [self dismissKeyboard:sender];
} 
```

我知道 nextButtonPressed 的代码是错误的。我想我需要帮助来确定哪个 UITextField 调用了 Keyboard 以使其可见，然后通过将 Sender 作为参数传递来调用dismissKeyboard。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:58:18.427

使用`UITextField`委托方法`textFieldDidEndEditing:`来了解焦点何时离开文本字段。这是您应该保存其数据的时候。当焦点移动到另一个文本字段或键盘完全关闭时，将调用此方法。

您的实现`nextButtonPressed:`应该简单地调用`becomeFirstResponder`下一个文本字段是什么。而已。通过将另一个文本字段设置为第一响应者，前一个文本字段将调用其`textFieldDidEndEditing:`委托。

更新：

```
// This assumes the LocationXXX are instance variables referencing the UITextFields
- (IBAction)nextButtonPressed:(id)sender {
    if (sender == LocationName) {
        [LocationAddress becomeFirstResponder];
    } else if (sender == LocationAddress) {
        [LocationCity becomeFirstResponder];
    // add the rest as needed
    }
} 
```

# meteor - 在 Meteor 中需要 Node.js 模块的推荐方法

> ID：15074266
> 
> 赞同：4
> 
> 时间：2013-02-25T18:54:15.483
> 
> 标签：meteor

我正在破解我的第一个 Meteor 应用程序，并且在尝试连接到 S3 时打开了一个兔子洞。我已经使用陨石安装了 awssum，但似乎我需要安装同名的 Node.js 模块才能真正完成这些示例。我最终会将我的应用程序部署到 Heroku，并且我希望能够将我的依赖项与我的代码一起打包。谷歌搜索一下，我找到了很多方法来做到这一点，我想知道哪种方法接近最佳实践：

*   在 /public 中安装我需要的包（[https://github.com/possibilities/meteor-node-modules](https://github.com/possibilities/meteor-node-modules)）（似乎有风险）
*   破解我正在使用的 buildpack ( [https://github.com/oortcloud/heroku-buildpack-meteorite](https://github.com/oortcloud/heroku-buildpack-meteorite) ) 来要求我需要的节点包
*   将我的项目部署为 Node 模块本身，从而允许依赖项（[https://github.com/matb33/heroku-meteor-npm](https://github.com/matb33/heroku-meteor-npm)）
*   打包你的项目，解压它，然后安装在创建的 node_modules 目录中（[推荐使用 node.js 模块和流星的方法](https://stackoverflow.com/questions/14564598/recommended-way-to-use-node-js-modules-with-meteor/14566428#14566428)）

我应该走哪条路线？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T19:33:07.283

我们即将发布与 NPM 包互操作的版本。请参阅[Avi](https://groups.google.com/forum/?fromgroups=#!topic/meteor-talk/b6zQrgk8lYo)关于流星谈话的文章。

他还在上个月的 Devshop 预览工作上做了技术演讲，以 S3 为例：http: [//youtu.be/kA-QB9rQCq8](http://youtu.be/kA-QB9rQCq8)

# mysql - MariaDB / MYSql 非描述语法错误，重复键更新

> ID：15074268
> 
> 赞同：3
> 
> 时间：2013-02-25T18:54:21.927
> 
> 标签：mysql, sql-update, mariadb, on-duplicate-key

我收到一个非常非描述性的错误：

`ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near 'VALUES (order_site_id, order_id, business_email, business_domain, sm_type, activ' at line 1`

这是插入/更新

```
INSERT INTO table 
(
    id,
    order_site_id,
    order_id,
    business_email,
    business_domain,
    sm_type,
    active,
    code,
    sm_auth,
    installed,
    created,
    cancelled,
    uninstalled,
    updated
) VALUES (
        1,
        2,
        1,
        'jd.daniel@domain.com',
        'domain.com',
        'farce',
        'N',
        'a3yhegy',
        '55f933dad8a389cf760d39df01df923e',
        '0000-00-00 00:00:00',
        '2013-02-20 11:21:00',
        '0000-00-00 00:00:00',
        '0000-00-00 00:00:00',
        '2013-02-20 11:21:00'
    ), (
        2,
        2,
        2,
        'bob.allen@domain.com',
        'domain.com',
        'farce',
        'N',
        'e4eqere',
        '08d2ab294466864d3453201be3e4a391',
        '0000-00-00 00:00:00',
        '2013-02-20 11:37:45',
        '0000-00-00 00:00:00',
        '0000-00-00 00:00:00',
        '2013-02-20 11:37:45'
    ), (
        3,
        2,
        3,
        'william.grey@domain.com',
        'domain.com',
        'farce',
        'N',
        '8yme3ud',
        'c52b2cf4a6a5ceab503fe71c45d9e5da',
        '0000-00-00 00:00:00',
        '2013-02-20 11:38:28',
        '0000-00-00 00:00:00',
        '0000-00-00 00:00:00',
        '2013-02-20 11:38:28'
    ), (
        4,
        2,
        4,
        'jane.doe@domain.com',
        'domain.com',
        'farce',
        'N',
        'zuzuquz',
        'c30dbfda67a0016d810b774e08e077c8',
        '0000-00-00 00:00:00',
        '2013-02-20 11:42:31',
        '0000-00-00 00:00:00',
        '0000-00-00 00:00:00',
        '2013-02-20 11:42:31'
    ), (
        5,
        2,
        5,
        'john.smith@domain.com',
        'domain.com',
        'farce',
        'N',
        'nyruqu4',
        'c376194d36d5706a6ca343dc3a06248d',
        '0000-00-0000:00:00',
        '2013-02-20 11:43:29',
        '0000-00-00 00:00:00',
        '0000-00-00 00:00:00',
        '2013-02-20 11:43:29'
) ON DUPLICATE KEY UPDATE VALUES (
    order_site_id,
    order_id,
    business_email,
    business_domain,
    sm_type,
    active,
    code,
    sm_auth,
    installed,
    created,
    cancelled,
    uninstalled,
    updated
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T18:57:41.187

您不要将 VALUES 子句与 ON DUPLICATE KEY UPDATE 一起使用。

语法应该更像 UPDATE 语法：

```
INSERT INTO table (id, order_site_id, order_id, ...) 
VALUES (1, 2, 1, ...), (2, 2, 2, ...), ...more tuples...
ON DUPLICATE KEY UPDATE 
SET order_site_id = <expr>,
    order_id = <expr>,
    ...other column assignments... 
```

请参阅[http://dev.mysql.com/doc/refman/5.5/en/insert-on-duplicate.html](http://dev.mysql.com/doc/refman/5.5/en/insert-on-duplicate.html)

如果您只想在重复键的情况下保留现有的列值，则应考虑使用 INSERT IGNORE 而不是 ON DUPLICATE KEY UPDATE 和无操作更新。

# iphone - 通过 MTAudioProcessingTap 使用麦克风作为输入

> ID：15074273
> 
> 赞同：0
> 
> 时间：2013-02-25T18:54:34.017
> 
> 标签：iphone, audio, ios6

我想使用 MTAudioProcessingTap 的功能，但我不想在他的[教程](http://chritto.wordpress.com/2013/01/07/processing-avplayers-audio-with-mtaudioprocessingtap/)中使用像 CHris 这样的 AVPlayer，我想使用 iPhone 的麦克风。

可以这样做和/或在任何地方记录吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-28T17:52:43.867

我将继续这样做的方法是将会话设置为 AVAudioSessionCategoryPlayAndRecord。

该教程说您可以应用 MTAudioProcessingTap 来修改手机上的任何文件。如果您按照[本教程进行操作，](http://www.appcoda.com/ios-avfoundation-framework-tutorial/)它将向您展示如何创建使用 AVFoundation 录制的文件，然后进行播放。

目前 AV Foundation 尚未设置为在您录制音频时进行实时音频处理。它只能在播放音频时实时修改音频，也可以按照[音频会话编程指南中的详细说明进行离线音频处理。](https://developer.apple.com/library/ios/documentation/Audio/Conceptual/AudioSessionProgrammingGuide/Introduction/Introduction.html)

我也不建议在处理声音时对声音进行破坏性处理。音频创建的最佳实践是保持母版不变，并在捕获后更改声音。

截至 2014 年初，关于 AV Foundation 的大量信息尚未记录在案。音频会话编程指南中没有包含一个新的音频会话类别。几个月后，一本关于 AV Foundation 的整本书将出版，希望这本书能为其中一些问题提供更多的解决方案。

# c# - 如何将一个 ObservableCollection 设置为另一个 ObservableCollection？

> ID：15074277
> 
> 赞同：1
> 
> 时间：2013-02-25T18:54:50.920
> 
> 标签：c#, wpf, list, observablecollection

基本上，我想知道我是否可以使用两个 ObservableCollections 来做到这一点：

```
oldList = newList; 
```

我有两个在我的应用程序中填充的列表，每次填充它们时，我希望“新”值成为“旧”值，然后将一组新值放入“新”列表中。

有那么容易吗？有没有其他方法可以做到这一点，而无需每次都遍历整个 newList？

**编辑：这就是新列表的填充方式。基本上，我只是希望将 newList 的内容放入 oldList。**

```
 foreach (object obj in ts.GetVariables())
            {
                if ((obj.ToString() != "_SMSTSReserved2") || (obj.ToString() != "OSDJoinPassword") || (obj.ToString() != "OSDLocalAdminPassword"))
                {
                    TSVar var = new TSVar();
                    var.TSVarName = obj.ToString();
                    var.TSVarValue = ts[obj.ToString()];
                    newList.Add(var);
                }
            }
            oldList.Clear();
            foreach (TSVar var in newList)
            {
                oldList.Add(var);
            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T19:12:43.343

如果您使用下面列出的扩展方法，您正在尝试做的事情将成为一个单行：

```
oldList.Replace(newList); 
```

我会像这样为 ObservableCollection 创建一个扩展方法：

```
public static class ObservableCollectionExtensionMethods
    {
        public static void Replace<T>(this ObservableCollection<T> old, ObservableCollection<T> @new)
        {
            old.Clear();
            foreach (var item in @new)
            {
                old.Add(item);
            }
        }
    } 
```

这就是你将如何使用它：

```
using System.Collections.ObjectModel;
using System.Linq;
using Microsoft.VisualStudio.TestTools.UnitTesting;

namespace ExtensionMethods
{
    [TestClass]
    public class ObservableCollectionExtensionMethodsTest
    {
        [TestMethod]
        public void ReplaceTest()
        {
            // Arrange
            var old = new ObservableCollection<string> { "1"};
            var @new = new ObservableCollection<string> {"2"};

            // Act
            old.Replace(@new);

            // Assert
            Assert.AreEqual("2", old.First());
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T19:06:05.550

我想这就是您可能正在寻找的东西？这会将 newList 中的所有内容添加到您的 oldList。

```
ObservableCollection<YourType> oldList = new ObservableCollection<YourType>(newList);
newList.clear();
//put new stuff in your list here. 
```

# jsf - Primefaces 数据表动态对象[]

> ID：15074278
> 
> 赞同：1
> 
> 时间：2013-02-25T18:54:56.523
> 
> 标签：jsf, object, dynamic, primefaces, datatable

我想从给我一个结果的 sql 查询的结果创建一个动态的 Primefaces 数据表`List<Object[]>`。对应的列名存储在`List<String>`.

字段的列和长度`Object[]`应该是动态的。

如何处理`List<Object[]>`Datatable中的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T19:04:53.010

使用`<p:columns>`. 另请参阅[PrimeFaces`<p:dataTable>`展示 - 动态列](http://www.primefaces.org/showcase/ui/data/datatable/columns.xhtml)。

如果您实际上的意思是您`data`在 a`List<Object[]>`和`columnNames`in 中的顺序相同`List<String>`，那么应该这样做：

```
<p:dataTable value="#{bean.data}" var="item">
    <p:columns value="#{bean.columnNames}" var="columnName" columnIndexVar="i">
        <f:facet name="header">#{columnName}</f:facet>
        #{item[i]}
    </p:columns>
</p:dataTable> 
```

# f# - 在 F# 中编写适合特定类型推断的测试表达式

> ID：15074280
> 
> 赞同：1
> 
> 时间：2013-02-25T18:54:59.147
> 
> 标签：f#, expression, type-inference

我正在复习 F# 中的一些关键点，我的导师推荐了一些练习来帮助我们掌握这些概念（*不是*家庭作业）。他为我们提供了 F# 编译器在给出示例表达式时会推断出的某些类型，并且我们应该能够想出一个可以提供它的表达式。我有点卡住的是以下几点：

```
('a -> 'b) -> ('b -> 'c) -> ('a -> 'c) 
```

和

```
('a -> 'b) * ('c -> 'a) -> ('c -> 'b) 
```

第一个当然是函数组合运算符`(f o g)(x)`, or `(>>)`，但我想不出任何有第二个的东西。有人有什么建议吗？此外，第一个的替代品也将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T20:19:06.220

它看起来像[反向组合](http://msdn.microsoft.com/en-us/library/ee353882.aspx)( `<<`)，并且正如 kvb 指出的那样，它需要是非咖喱的。

# java - 潜在的空指针访问：变量流在此位置可能为空

> ID：15074284
> 
> 赞同：0
> 
> 时间：2013-02-25T18:55:09.483
> 
> 标签：java, android, eclipse, function

我在这个函数中收到了这个错误，不知道如何解决。“潜在的空指针访问：变量流在此位置可能为空”下面是代码：

```
public void downloadAudioIncrement(String mediaUrl) throws IOException {
        /*URLConnection cn = new URL(mediaUrl).openConnection(Proxy.NO_PROXY);  

        cn.connect();  
        InputStream stream = cn.getInputStream();*/
        URL url = new URL(mediaUrl);

        InputStream stream = url.openStream();
        //Toast.makeText(this.context, "here3", Toast.LENGTH_LONG);

        if (stream == null) {
            Log.e(getClass().getName(), "Não é possível criar InputStream para a url: " + mediaUrl);
        }

        //downloadingMediaFile = new File(context.getCacheDir(),"downloadingMedia_" + (counter++) + ".dat");
        downloadingMediaFile = new File(context.getCacheDir(),"downloadingMedia_.dat");
        FileOutputStream out = new FileOutputStream(downloadingMediaFile);   
        byte buf[] = new byte[16384];

        int totalBytesRead = 0, incrementalBytesRead = 0;
        do {
            int numread = ***stream***.read(buf);   
            if (numread <= 0)
                break;   

            out.write(buf, 0, numread);
            totalBytesRead += numread;
            incrementalBytesRead += numread;
            totalKbRead = totalBytesRead/1000;

            testMediaBuffer();
            fireDataLoadUpdate();
        } while (validateNotInterrupted());   

        if (validateNotInterrupted()) {
            fireDataFullyLoaded();
            //testMediaBuffer();
            //fireDataLoadUpdate();
        }
        ***stream***.close();
        out.close();
    } 
```

如何修复此错误？错误发生在这里：

```
 numread ***stream***.Read = int (buf); 
```

和这里：

```
 ***stream***.Close (); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:58:04.173

```
 if (stream == null) {
        Log.e(getClass().getName(), "Não é possível criar InputStream para a url: " + mediaUrl);
    } 
```

在这里，您检查 if `stream`is`null`并记录它，但您仍然继续使用该方法，并且您永远不会创建新的`stream`或任何东西。我的建议：在`return;`您的块中添加一个：

```
 if (stream == null) {
        Log.e(getClass().getName(), "Não é possível criar InputStream para a url: " + mediaUrl);
        return;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T18:57:52.780

将此行更改为阅读

```
 if (stream == null) {
            Log.e(getClass().getName(), "Não é possível criar InputStream para a url: " +     mediaUrl);
return;
    } 
```

这样，错误的行将不会以空值到达。

# ios - 使用 unwind segue 将数据发送回之前的控制器？

> ID：15074290
> 
> 赞同：4
> 
> 时间：2013-02-25T18:55:22.657
> 
> 标签：ios, objective-c, ios6

我在情节提要中有两个控制器，并且有一个可以在它们之间切换的segue。

通过实现 prepareForSegue 将数据从第一个控制器传递到第二个控制器非常简单，并使用 segue.destinationViewController 设置第二个控制器的属性。

我也应该将数据从第二个控制器传回前一个控制器。我用谷歌搜索，但我没有找到任何简单但有效的代码来演示它。

你会这么好心给我一个关于最好方法的简单示例吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T19:13:30.890

请参阅：[Xcode 4.5 故事板“退出”](https://stackoverflow.com/questions/12416050/xcode-4-5-storyboard-exit)

你需要一个像

```
-(IBAction)returned:(UIStoryboardSegue *)segue; 
```

在您要返回的 UIViewController 中（“第一个控制器”）。在情节提要中，您选择第二个控制器并使用此方法将您的按钮连接到该控制器底部的绿色退出图标。

在该方法中，您可以访问第二个控制器。

# ios - 如何在 iOS 上安装同一应用程序的 2 个版本？

> ID：15074291
> 
> 赞同：3
> 
> 时间：2013-02-25T18:55:28.820
> 
> 标签：ios, xcode, cfbundleidentifier

我有`Bundle dispaly Name`“BobAppl”的应用程序并`Bundle identifier`命名为“org.bob.phone”。

我想安装同一个应用程序的新版本，但要在我的 iPhone 上保存旧版本，我想看到 2 个应用程序：“BobAppl”和“BobApplNew”。

现在，如果我`Bundle dispaly Name`改为“BobApplNew”，我仍然会击倒“BobAppl”。

我需要做什么？我只需要改变`Bundle identifier`或其他什么？

谢谢，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T18:56:37.733

是的，您需要更改捆绑包标识符，并且可以选择更改捆绑包显示名称。

# javascript - 将下一个元素添加到 div

> ID：15074293
> 
> 赞同：1
> 
> 时间：2013-02-25T18:55:43.643
> 
> 标签：javascript, jquery, html

我正在尝试将 div ( `.portrait_text`) 添加到容器 ( `.gallery_container`) 中：

每个图像都被添加到其对应的`.gallery_container`. 但我也想将**每个下一个** `.portrait_text`div 添加到它的前面`.gallery_container`。有任何想法吗？

```
<div id="gallery_images_inner" class="clearfix">
    <img src="img/portrait.jpg" alt="portrait" width="850" height="557">
    <div class="portrait_text">Girls After Swim</div>
    <img src="img/gallery5.jpg" alt="gallery5" width="850" height="566">
    <div class="portrait_text">Girls After Swim</div>
</div> 
```

JS：

```
function Gallery(selector) {
    this.add_module = function (type, image) {
        var container = $('<div />', {
            'class': 'gallery_container'
        }).append(image);

        if (type == 'horizontal') {
            var h_ar = image.attr('height') / image.attr('width');
            var c_width = selector.width();
            var c_height = selector.width() * h_ar
            container.css({
                'width': c_width - 60,
                'height': c_height
            })
        }
        if (type == 'vertical') {
            var c_width = v_width;
            var c_height = v_height
            container.css({
                'width': Math.floor(v_width) - 30,
                'height': v_height
            })
        }
        container.css({
            'float': 'left',
            'overflow': 'hidden'
        })
        container.find('img').attr({
            'width': '100%',
            'height': '100%'
        })
        container.attr('ar', c_height / c_width)
        container.appendTo(selector);

        //container.children('img').fitToBox();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T19:04:29.493

jQuery 有一个[next 选择器](http://api.jquery.com/next/)，所以你可以这样做

`$(selector).next(".portrait_text").appendTo(container);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T19:05:57.250

如果`image`作为 jQuery 对象传递，正如您的代码所建议的那样，您也可以使用它`.next()`来选择文本：

```
function Gallery(selector) {
    this.add_module = function (type, image) {
        var portrait_text = image.next('.portrait_text');
        var container = $('<div />', {
            'class': 'gallery_container'
        }).append(image).append(portrait_text);
        ...
    }
} 
```

当然，这是**appending**并且您要求**prepend**，但概念是相同的。

# node.js - 在顶层验证标头

> ID：15074298
> 
> 赞同：0
> 
> 时间：2013-02-25T18:55:57.680
> 
> 标签：node.js, express

我有一个使用 Express.js 框架构建的 Node.js 应用程序。我想检查用户是否有权执行某个请求，我通过要求客户端在标头中提供访问令牌来做到这一点。我不想将此添加到客户可以访问的每个单独功能中。像这样，对于有关用户的信息请求：

```
exports.info = function(req, res) {
    var userId = req.params.id,
        accessToken = req.headers["accesstoken"];
    console.log("received request to get info for userID <"+ userId +">");
    users.User.findOne({accessToken: accessToken}, function(err, user) {
        if(user == null) {
         ... 
```

我怎样才能在更高的层次上做到这一点？我可以在全局的某个地方设置这个标题要求吗？我想基本上对除了用户登录功能之外的所有功能都这样做，所以除了一个之外的所有功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T19:04:19.743

您可以制作一个小型中间件：

```
verifyUser = function(req,res,next){
  var userId = req.params.id, accessToken = req.headers["accesstoken"];
  console.log("received request to get info for userID <"+ userId +">");
  users.User.findOne({accessToken: accessToken}, function(err, user) {
    if(user == null) {
      ...
    }

     next()
  }
} 
```

然后：

应一项要求：

```
app.get("/user/info", verifyUser, exports.info) 
```

关于选择的请求：

```
app.all(SomeRegex, verifyUser) 
```

在所有请求中：

```
app.use(verifyUser) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T19:02:36.810

只需将您的函数添加为在所有请求处理之前运行的快速中间件之一。

```
app.use(function(req, res, next) {
    var userId = req.params.id,
        accessToken = req.headers["accesstoken"];
    console.log("received request to get info for userID <"+ userId +">");
    users.User.findOne({accessToken: accessToken}, function(err, user) {
        if(user != null) {
            return next();  // This is ok, keep processing
        } else {
            // don't call next, redirect to login page, etc...
        }
}

app.get('/home', ...);
apg.get('/some_other_page'); 
```

你调用 next 让 express 像往常一样处理，或者你使用重定向，或者返回错误并且不调用 next。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T19:03:47.410

您可以创建一个中间件并在每个路由上设置它，您需要授权。例子：

```
var myAuthMiddleware = function (req, res, next) {

    // Here goes your code to check if the user complies
    // with the conditions. You can use req.headers, req.user, etc

    if (conditionIsMet) return next();  // If the user complies, you continue the process

    // The user doesn't comply
    return res.send('Error');
} 
```

然后，你在需要的路由中使用他的中间件：

```
app.get('/my-route', myAuthMiddleware, myRouteHandler);
app.post('/another-route', myAuthMiddleware, myOtherRouteHandler);
// This one doesn't need auth
app.get('/', indexHandler); 
```

# c++ - QSound 错误 - 参考？

> ID：15074299
> 
> 赞同：2
> 
> 时间：2013-02-25T18:55:58.163
> 
> 标签：c++, qt

我正在尝试从 QSound 对象播放声音。我看不出为什么它不起作用，看前面的例子

这是标题

```
#ifndef ACCESSPANEL_H
#define ACCESSPANEL_H

#include <QWidget>
#include "theislandmain.h"
#include <QString>
#include <QtMultimedia/QSound>

namespace Ui {
    class accessPanel;
}

class accessPanel : public QWidget
{
    Q_OBJECT

public:
    explicit accessPanel(QWidget *parent = 0);
    ~accessPanel();

private slots:

    QString getCode();

    void on_one_clicked();

    void on_two_clicked();

    void on_three_clicked();

    void on_four_clicked();

    void on_five_clicked();

    void on_six_clicked();

    void on_seven_clicked();

    void on_eight_clicked();

    void on_nine_clicked();

    void on_cancel_clicked();

    void on_zero_clicked();

    void on_confirm_clicked();

private:
    Ui::accessPanel *ui;
    QString input;
    QSound *keypad;
};

#endif // ACCESSPANEL_H 
```

这是主要

```
#include "accesspanel.h"
#include "ui_accesspanel.h"
#include <QtMultimedia/QSound>

accessPanel::accessPanel(QWidget *parent) :
    QWidget(parent),
    ui(new Ui::accessPanel)
{
    ui->setupUi(this);
    keypad = new QSound("../Island/Sounds/keypad.wav", this);
}

accessPanel::~accessPanel()
{
    delete ui;
}

QString accessPanel::getCode()
{
    return input;
}

void accessPanel::on_one_clicked()
{
    keypad->play();
    input = input + "1";
    ui->codeDisplay->setText(input);
}

void accessPanel::on_two_clicked()
{
    input = input + "2";
    ui->codeDisplay->setText(input);
}

void accessPanel::on_three_clicked()
{
    input = input + "3";
    ui->codeDisplay->setText(input);
}

void accessPanel::on_four_clicked()
{
    input = input + "4";
    ui->codeDisplay->setText(input);
}

void accessPanel::on_five_clicked()
{
    input = input + "5";
    ui->codeDisplay->setText(input);
}

void accessPanel::on_six_clicked()
{
    input = input + "6";
    ui->codeDisplay->setText(input);
}

void accessPanel::on_seven_clicked()
{
    input = input + "7";
    ui->codeDisplay->setText(input);
}

void accessPanel::on_eight_clicked()
{
    input = input + "8";
    ui->codeDisplay->setText(input);
}

void accessPanel::on_nine_clicked()
{
    input = input + "9";
    ui->codeDisplay->setText(input);
}

void accessPanel::on_cancel_clicked()
{
    this->close();
    input = "";
    ui->codeDisplay->clear();
}

void accessPanel::on_zero_clicked()
{
    input = input + "0";
    ui->codeDisplay->setText(input);
}

void accessPanel::on_confirm_clicked()
{
    ui->codeDisplay->setText(input);
    TheIslandMain::setInput(input);
    this->close();
} 
```

我收到以下错误。

> accesspanel.obj:-1: error: LNK2019: unresolved external symbol "__declspec(dllimport) public: void _ *thiscall QSound::play(void)" (* _imp_?play@QSound@@QAEXXZ) 在函数“private: void __thiscall”中引用accessPanel::on_one_clicked(void)" (?on_one_clicked@accessPanel@@AAEXXZ)
> 
> accesspanel.obj:-1: 错误: LNK2019: 无法解析的外部符号“__declspec(dllimport) public: __thiscall QSound::QSound(class QString const &,class QObject *)” (_ *imp* ??0QSound@@QAE@ABVQString@@ PAVQObject@@@Z) 在函数“public: __thiscall accessPanel::accessPanel(class QWidget *)”中引用 (??0accessPanel@@QAE@PAVQWidget@@@Z)
> 
> accesspanel.obj:-1: error: LNK2001: unresolved external symbol "public: virtual struct QMetaObject const * __thiscall QSound::metaObject(void)const" (?metaObject@QSound@@UBEPBUQMetaObject@@XZ)

和其他3个类似的。

我试过以下

`QSound::play("filename");`- 同样的问题

我搞砸了一个静态引用，但得到了类似的东西

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T14:17:42.580

The problem was my .pro file. I needed to add QT += multimedia to my project .pro file.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-05T08:59:53.927

我遇到了同样的问题。我没有创建指针，而是在标题中创建了一个空变量：

```
private:
      QSound m_startsound; 
```

我通过明确提及它的父对象来分配值（感谢您提醒我）：

```
BloxProcessor::BloxProcessor() : 
     m_showPopup(true),
     ....
     m_startsound("mysounds/hallo.wav",this)
{
....
} 
```

您也可以在 cpp 文件中执行此操作。在我看来，结构较少的解决方案：

# 包括

... QSound m_startsound("mysounds/hallo.wav",this);

但是，这些解决方案可以解决多次播放静态声音时的加载时间问题。它不会使声音在某个触发器上发生变化。这需要您的指针结构：在标题 QPointer p_startsound;

在 init 或构造函数中设置默认值：

```
p_startsound = new QSound("mysounds/he.wav",this); 
```

在更改触发器上一定要删除旧对象以防止内存泄漏

```
BloxProcessor::triggerToChangeSoundActivated()
{
    p_startsound->deleteLater();
    p_startsound = new QSound("mysounds/hallo.wav",this);
} 
```

如果计算时间无关紧要，可以使用简单的播放功能

```
QSound::play("mysounds/hallo.wav"); 
```

顺便说一句，我不需要为其中任何一个明确地包含多媒体包。也许是因为我使用了不同版本的 QT，或者因为它是在平台的其他地方继承的。

编辑改用受保护的QPointer，否则它会崩溃......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-09T22:11:05.387

如果您使用的是 QT5，请在
Project -> Properties-> Configuration Propeties -> Linker -> Input -> Additional Dependencies的 Additional dependencies 中添加 Qt5Multimedia.lib

# php - 抓取 div 内容并发送到 php 电子邮件

> ID：15074302
> 
> 赞同：0
> 
> 时间：2013-02-25T18:56:22.193
> 
> 标签：php, email, html

新来的很高兴，我从这个论坛得到了很多答案。然而，我现在被困住了。

我有一些 javascript 正在创建窗口颜色和句柄选择器（单击颜色样本会更改图像，单击句柄，它会执行相同的操作）。图像下方是所选窗口的描述。该文本是由 javascript 通过拉取图像标题生成的。

现在有趣的部分。在此选择器下方，我需要添加一个将使用 php 通过电子邮件发送的表单。在该电子邮件中，我需要提取由 javascript 生成的窗口描述。

我今天尝试了很多东西，我都数不清了。我尝试的最后一段代码是

```
<script>
$(document).ready(function() {

   $("windowDesc").each(function() {
       var html = jQuery(this).html();
   });

});
</script> 
```

在我添加的 php 邮件文件中：

```
$windowtitle = $_GET['html']; 
```

以及尝试

```
$windowtitle = $_POST['html']; 
```

我还尝试了以下方法：

```
<script>
    var content = $('#windowDesc').html();
    $.ajax({
            url: 'send_mail.php',
            type: 'POST',
            data: {
                    content: content
            }
    });
</script> 
```

在我添加的 php 邮件文件中：

```
$windowtitle = $_GET['content']; 
```

以及尝试

```
$windowtitle = $_POST['content']; 
```

更不用说其他很多事情了。

基本上我想要做的是获取包含生成文本的 div 的内容并通过电子邮件发送它。如果以上任何一项都是正确的，那么我一定是把它们放在了错误的位置或什么地方。对于第一个，我在表单内、表单外、div 之前、div 之后都尝试过。只是还没有在我的头顶上尝试过。这是漫长的一天，提前谢谢:o)

抱歉耽搁了，这两天很忙。好的，下面是处理窗口颜色和句柄选择器的代码：

```
var Color = "color";
var Handle = "handledescription";
var ColorDesc = "color";
var HandleDesc = "handle description"
function Window(Color,Handle,ColorDesc,HandleDesc) {
    $('#windowPic').animate({opacity: 0}, 250, function () {
        thePicSrc = "http://www.site.com/images/windows/" + Color + Handle + ".jpg";
        $('#windowPic').attr('src', thePicSrc);
        $('#windowDesc').html("<p>" + ColorDesc + " frame with " + HandleDesc + " hardware</p>");
        $('#windowPic').animate({opacity: 1}, 250)
    })
}
$(document).ready(function() {
    $('#wColors li').click( function() {
        Color = $(this).attr('id');
        ColorDesc = $(this).attr('title');
        Window(Color,Handle,ColorDesc,HandleDesc);
    });
    $('#wHandles li').click( function() {
        Handle = $(this).attr('id');
        HandleDesc = $(this).attr('title');
        Window(Color,Handle,ColorDesc,HandleDesc);
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T16:57:32.613

您需要在表单中隐藏输入：

```
<form id="send_email" action="send_email.php">
  <input id="content" type="hidden" name="content"/>
  ... other inputs here
</form> 
```

然后可以在提交前使用Javascript来填写：

```
$("#send_email").submit(function() {
    $("#content").val($("#windowDesc").html());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T19:30:39.053

```
<script>
    var content = $('#windowDesc').html();
    $.ajax({
            url: 'send_mail.php',
            type: 'POST',
            data: content
    });
</script> 
```

它在这里工作。

# java - 在方法调用期间修改参数时是否有任何保证？

> ID：15074309
> 
> 赞同：1
> 
> 时间：2013-02-25T18:56:39.373
> 
> 标签：java, methods, jvm, arguments

在Java中，当将参数传递给方法并在方法调用*期间*修改传递的参数时，是否可以保证结果是预期的？
例如
`a.method(++i);` 等

例如，是否保证变量内部将**具有**`method`更新`i`的值？

或者`a.method(i++)`会在递增之后还是之前 `method`得到值？`i`

对于所有类似情况也相同。
我记得这在 C++ 中是被禁止的，因为特定于实现，但也许我记错了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T19:07:18.290

前缀/后缀递增/递减运算符的java语言规范：

*   前缀：[http](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.15.1) ://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.15.1 。

> ... 值 1 被添加到变量的值中，并且总和被存储回变量中... 前缀增量表达式的**值是存储新值后**的变量值。

*   后缀：[http ://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.14.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.14.2)

> ... 值 1 被添加到变量的值中，并且总和被存储回变量中... 后缀增量表达式的**值是存储新值之前的**变量值。

我认为这很清楚。该函数将在前缀情况下获取增量值，而不是在后缀情况下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T19:06:09.527

在调用方法*之前*`++i`计算表达式。

 *从 Java 语言规范的[“方法调用的运行时评估”](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.12.4)部分：

> ... 其次，评估参数表达式。... 第五，创建一个新的激活帧，必要时执行同步，并将控制转移到方法代码。

并且来自 Java 语言规范的[“前缀增量运算符”](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.15.1)部分：

> 前缀增量表达式的值是新值存储后变量的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T18:59:44.797

在 Java 中没有问题，方法将接收更新的值。*

# c - 带有 execve 系统调用的 C 网络编程

> ID：15074311
> 
> 赞同：0
> 
> 时间：2013-02-25T18:56:42.273
> 
> 标签：c, network-programming, execve

我正在尝试创建一个简单的客户端/服务器程序，该程序允许客户端使用 TCP 套接字连接到服务器，然后允许用户从客户端向服务器端发出系统调用并将回复返回给用户。例如：

客户端问题：ls

服务器将在 /usr/bin 或 w/e 中找到 ls，然后使用 execve() 执行它

我还会有一些喜欢 lls 或 lmkdir 等的东西。它将在客户端发出系统调用。

问题是我的 execve() 似乎没有正确运行，因为实际上没有调用“ls”或任何其他命令。我之前只使用本地端（没有服务器或任何东西）完成了同样的程序，并且 execve() 工作正常。这是一些代码：

```
 pid = fork();

       if(pid){ // Child
        printf("child wait");
          pid = wait(&status);
          printf("Child dead\n");
       }else{ // Parent

          if(execPath){            

          execve(execPath, arglist, env);
          printf("Command Complete\n");

        }

       } 
```

由于某种原因，PID 语句的子部分中的 printfs 根本没有执行。我不认为系统实际上会分叉一个进程。由于它是客户端/服务器类型的程序，我是否需要做一些特别的事情才能完成这项工作，还是应该完全一样？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T19:01:32.967

确切地说，`execve`不分叉。它将当前图像**替换**为其参数指定的图像，并从其开始（即`main()`）开始。它永远不会返回到您的原始程序。

您可能想`system()`在您的用例中使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T19:49:06.547

由于子进程没有产生任何自己的子进程，因此`wait()`如果没有其他外部事件（例如中断调用的信号），调用不太可能返回。您应该让父进程等待子进程。

请注意，这`fork()`可能会失败，您应该考虑到这一点。另请注意，如果`execve`成功，它将不会返回。因此，如果要打印任何内容，它后面的 print 语句应该指示失败。

使用`system()`可能不会为您节省分叉，因为您可能希望将命令的输出定向到与已连接客户端关联的套接字。但是，您的代码缺少允许输出流向客户端的步骤。

```
switch ((pid = fork())) {
case -1:  /* todo: handle error */
          break;
case 0:   /* child */
          dup2(socket, 0); /* todo: check return value */
          dup2(socket, 1); /* todo: check return value */
          dup2(socket, 2); /* todo: check return value */
          close(socket);   /* todo: check return value */
          execve(...);
          /* todo: handle failure */
          exit(EXIT_FAILURE);
default:  /* parent */
          if (pid != waitpid(pid, 0, 0)) {
              /* todo: handle error */
          }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T20:52:35.527

代码中有几个问题：

*   `fork()`返回父进程的pid，子进程返回零。所以 parent 运行 if 的真正分支。孩子运行 else 分支。交换那些评论。
*   标准输出是行缓冲的。`(\n)`在等待之前添加新行`printf`。否则，在等待完成之前您看不到打印输出并且第二个`printf`正在呼叫中。
*   确保孩子在错误情况下也会退出，否则孩子将运行父母的代码，而父母仍在等待孩子的退出。
*   `execve`如果成功则不返回。如果失败，它将返回。

因此，固定代码可能是这样的：

```
 pid = fork();

   if(pid){  // Parent
      printf("child wait\n");
      pid = waitpid(pid, &status, 0);
      printf("Child dead\n");
   }else{ // Child
      if(execPath){            
          execve(execPath, arglist, env);
          printf("execve failed!\n");
      }
      _exit(1);
   } 
```

或者你可以使用`system(3)`.

# php - 我的 PHP 过滤系统出了什么问题？

> ID：15074312
> 
> 赞同：1
> 
> 时间：2013-02-25T18:56:49.060
> 
> 标签：php

对于从 POST 接收的数据和另一个变量（它将是 SESSION 数组的一部分，但在开发中是它自己的数组），我有一个简单的过滤函数。POST 数据完全按照预期由函数处理，而另一个变量`$sess['iid']`总是***失败***。为什么？

我可以解决这个问题，但我不想明白为什么会这样。

过滤功能：

```
function filterNumber($fin) {
    if( ctype_digit( $fin ) ) {
    $fout = $fin;
    } else {
    $fout = 0;
    }
    return $fout;
} 
```

我对变量命名很严格，所以 POST 数组被传输到`$dirty[]`，然后`$clean[]`（用于进入数据库）通过对`$dirty[]`. 完全相同的序列适用于`$sess['iid']`。

每个阶段的例子：

```
 $dirty['iid'] = $sess['iid'];
    $dirty['liverpool'] = $_POST['liverpool'];

    $clean['iid'] = filterNumber($dirty['iid']);
    $clean['liverpool'] = filterNumber($dirty['liverpool']); 
```

第一步 -`$sess['iid']`到`$dirty['iid]`- 工作，就像 POST 变量一样。

但是第二个，`$dirty['iid']`到`$clean['iid']`via `filterNumber()`，结果为 0，不管我输入了什么`$sess['iid']`。
如果我消除该`$dirty['iid']`步骤，也会发生这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T19:14:40.637

```
function filterNumber($fin) {
    if( ctype_digit( $fin ) ) {
    $fout = $fin;
    } else {
    $fout = 0;
    }
    return $fout;
}

$tests = array(
    1,
    '1',
    '123',
    123,
    1.2,
    '1.2',
    'abc',
    true,
    false,
    null,
    new stdClass()
);

foreach ($tests as $test) {
    echo 'Testing: ' . var_export($test, true) . ' - result: ' . filterNumber($test);
} 
```

印刷

```
Testing: 1 - result: 0
Testing: '1' - result: 1
Testing: '123' - result: 123
Testing: 123 - result: 0
Testing: 1.2 - result: 0
Testing: '1.2' - result: 0
Testing: 'abc' - result: 0
Testing: true - result: 0
Testing: false - result: 0
Testing: NULL - result: 0
Testing: stdClass::__set_state(array(
)) - result: 0 
```

## 资源

*   [var_export](http://www.php.net/manual/en/function.var-export.php)
*   [变量转储](http://www.php.net/manual/en/function.var-dump.php)
*   [获取类型](http://www.php.net/manual/en/function.gettype.php)

# jquery - jquery简单模态ie8高度不起作用

> ID：15074314
> 
> 赞同：1
> 
> 时间：2013-02-25T18:56:53.063
> 
> 标签：jquery, simplemodal

我在 ie8 中打开简单模式 1.4.3 时遇到问题。它以正确的宽度打开，但似乎没有高度。它在我的 js (comingsoon2013) 中指定。我看过这个网站和github，但没有人回答过类似的问题。该网站是：[http](http://www.greatgulf.com) ://www.greatgulf.com 。链接在页脚，它是“立即注册”按钮。

我也在使用 jquery 1.8.3。

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T19:06:36.457

插件没有正确计算或者你有一个不应该存在的内联样式。（更新：在 Firefox 中查看模态后，我推测前者。可能是您的模态内容没有足够早地出现，插件无法进行数学运算。）试试这个：

```
simplemodal-container {height: auto !important} 
```

# spring - Spring Integration：任务执行器上的核心池大小较低

> ID：15074315
> 
> 赞同：1
> 
> 时间：2013-02-25T18:56:56.360
> 
> 标签：spring, spring-integration

我正在使用 spring 集成对通道输出执行并行处理。我有一个要求，即进行的并行量必须是可控的——所以我需要能够增加或降低它。这是我目前的设置：

```
<service-activator input-channel="computerInputChannel" ref="computer" method="compute">
  <poller task-executor="computerRequestExecutor" fixed-rate="1000"></poller>
</service-activator>

<task:executor id="computerRequestExecutor" pool-size="1" queue-capacity="100" />
<channel id="computerInputChannel"><queue/></channel> 
```

在代码中，当我想更改并行度时，我运行 setCorePoolSize 方法。

我的问题是，当我增加核心池大小时，并行度会增加，但是当我减小核心池大小时，增加的并行度并没有消失。例如，如果核心池大小最初设置为 1，我看到任务一次运行一个。如果将其设置为 5，我会看到它们一次运行 5 个。但如果我将其重置为 1，它们将继续一次运行 5 个。

如何限制并行度？

我可以按照代码查看从 ThreadPoolExecutor 类调用了 interruptIfIdle() ，但没有任何结果。

我对弹簧集成非常陌生，可能从错误的角度来处理这个问题。关于如何实现我想要的任何帮助或替代建议都会很棒。

[如果我写的内容不清楚，这篇文章](http://forum.springsource.org/showthread.php?109045-Reducing-the-thread-pool-for-ServiceActivator-s-taskexecutor)几乎是我的确切问题 - 不幸的是，它从未得到回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T14:46:28.160

我收到了来自[spring 集成论坛的回答](http://forum.springsource.org/showthread.php?135197-Llowering-core-pool-size-on-task-executor-does-nothing)

基本上我需要确保任务执行器的队列大小为 0，保持活动时间为 0，轮询器上的 max-messages-per-poll 为 1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T14:04:37.297

如果我理解正确，我认为您实际上想要更改 maxPoolSize。如果核心增长，max 也会增长，使得以下条件始终为真：max >= core

如果 core 是 1 并且 max 是 5，那么给定的空闲时间/任务限制设置也被配置，池可以从 max 缩小到 core 大小。

希望有帮助。

# delphi - 请求 TComplexMath 类的简单示例（包括源）

> ID：15074316
> 
> 赞同：3
> 
> 时间：2013-02-25T18:56:57.210
> 
> 标签：delphi

我正在使用 Borland Delphi7 进行一些 Pascal 编程。我已经下载了一个相当基本（免费）的复杂数学函数的源代码库，但不幸的是它没有附带任何使用示例。由于我对 Pascal 中的类不是很熟悉，我想我只需要一个简单的例子来说明它的用法就可以了。

任何事情都可以，即使是两个数字相加的例子也会让我开始。这是我尝试过的（我知道很蹩脚）。我认为我的问题是我不知道如何使用类构造函数。

```
uses ComplexMath in 'complexmath.pas'

var z1,z2,z3 : TComplexNumber;
begin
  z1.R:=1.0; z1.I:=2.0;
  z2.R:=3.0; z2.I:=-1.0;
  z3 := TComplexMath.Add(z1,z2);
end. 
```

TComplexMath 的完整源代码可在此处获得：[http](http://delphi.about.com/library/weekly/aa070103a.htm) ://delphi.about.com/library/weekly/aa070103a.htm 。我还剪切并粘贴了下面源代码的部分列表（请注意，此代码是完整的文件，除了我明确指出它已被剪切的地方）。

部分 TComplexMath 源代码清单是：

```
unit ComplexMath;

interface

uses Windows, SysUtils, Classes, Controls, Math;

type
  TComplexNumber = record
    R : single;
    I : single;
  end;

TComplexMath = class(TComponent)
  private
    { Private declarations }
  protected
    { Protected declarations }
  public
    { Public declarations }
    constructor Create(AOwner : TComponent); override;

    function Add(C1, C2 : TComplexNumber) : TComplexNumber; overload;
    { Returns the complex sum of C1 and C2 }

    function Add(C1, C2, C3 : TComplexNumber) : TComplexNumber; overload;
    { Returns the complex sum of C1 and C2 and C3 }

    ... and a bunch more like this ...

implementation

procedure Register;
  begin
    RegisterComponents('delphi.about.com', [TComplexMath]);
  end;

constructor TComplexMath.Create(AOwner : TComponent);
  begin
    inherited Create(AOwner);
  end;

 function TComplexMath.Add(C1, C2 : TComplexNumber) : TComplexNumber;
   begin
     Result.R := C1.R + C2.R;
     Result.I := C1.I + C2.I;
   end;

    ... and a bunch more like this ...

end. 
```

经过一段时间的努力，我最终剥离了类定义，只使用了函数本身（就像一个简单的函数库）。尽管这对我有用，但我知道这不是该组件的用途。如果有人能向我展示一个按预期方式使用此类的非常简单的示例，我将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T19:17:09.873

我根本不会使用该代码。在我看来它真的很弱。这里有更好的：

```
type
  TComplex = record
  public
    class operator Implicit(const D: Double): TComplex;
    class operator Negative(const C: TComplex): TComplex;
    class operator Equal(const C1, C2: TComplex): Boolean;
    class operator NotEqual(const C1, C2: TComplex): Boolean;
    class operator Add(const C1, C2: TComplex): TComplex;
    class operator Add(const C: TComplex; const D: Double): TComplex;
    class operator Add(const D: Double; const C: TComplex): TComplex;
    class operator Subtract(const C1, C2: TComplex): TComplex;
    class operator Subtract(const C: TComplex; const D: Double): TComplex;
    class operator Subtract(const D: Double; const C: TComplex): TComplex;
    class operator Multiply(const C1, C2: TComplex): TComplex;
    class operator Multiply(const C: TComplex; const D: Double): TComplex;
    class operator Multiply(const D: Double; const C: TComplex): TComplex;
    class operator Divide(const C1, C2: TComplex): TComplex;
    class operator Divide(const C: TComplex; const D: Double): TComplex;
    class operator Divide(const D: Double; const C: TComplex): TComplex;
    function IsZero: Boolean;
    function IsNonZero: Boolean;
    function Conj: TComplex;
    function Sqr: TComplex;
    function Sqrt: TComplex;
    function Mag: Double;
    function SqrMag: Double;
  public
    r: Double;
    i: Double;
  end;

const
  ZeroComplex: TComplex = ();//initialise to zero;

class operator TComplex.Implicit(const D: Double): TComplex;
begin
  Result.r := D;
  Result.i := 0.0;
end;

class operator TComplex.Negative(const C: TComplex): TComplex;
begin
  Result.r := -C.r;
  Result.i := -C.i;
end;

class operator TComplex.Equal(const C1, C2: TComplex): Boolean;
begin
  Result := (C1.r=C2.r) and (C1.i=C2.i);
end;

class operator TComplex.NotEqual(const C1, C2: TComplex): Boolean;
begin
  Result := not (C1=C2);
end;

class operator TComplex.Add(const C1, C2: TComplex): TComplex;
begin
  Result.r := C1.r + C2.r;
  Result.i := C1.i + C2.i;
end;

class operator TComplex.Add(const C: TComplex; const D: Double): TComplex;
begin
  Result.r := C.r + D;
  Result.i := C.i;
end;

class operator TComplex.Add(const D: Double; const C: TComplex): TComplex;
begin
  Result.r := D + C.r;
  Result.i := C.i;
end;

class operator TComplex.Subtract(const C1, C2: TComplex): TComplex;
begin
  Result.r := C1.r - C2.r;
  Result.i := C1.i - C2.i;
end;

class operator TComplex.Subtract(const C: TComplex; const D: Double): TComplex;
begin
  Result.r := C.r - D;
  Result.i := C.i;
end;

class operator TComplex.Subtract(const D: Double; const C: TComplex): TComplex;
begin
  Result.r := D - C.r;
  Result.i := -C.i;
end;

class operator TComplex.Multiply(const C1, C2: TComplex): TComplex;
begin
  Result.r := C1.r*C2.r - C1.i*C2.i;
  Result.i := C1.r*C2.i + C1.i*C2.r;
end;

class operator TComplex.Multiply(const C: TComplex; const D: Double): TComplex;
begin
  Result.r := C.r*D;
  Result.i := C.i*D;
end;

class operator TComplex.Multiply(const D: Double; const C: TComplex): TComplex;
begin
  Result.r := D*C.r;
  Result.i := D*C.i;
end;

class operator TComplex.Divide(const C1, C2: TComplex): TComplex;
var
  R, Denominator: Double;
begin
  if abs(C2.r)>=abs(C2.i) then begin
    R := C2.i/C2.r;
    Denominator := C2.r+R*C2.i;
    Result.r := (C1.r+R*C1.i)/Denominator;
    Result.i := (C1.i-R*C1.r)/Denominator;
  end else begin
    R := C2.r/C2.i;
    Denominator := C2.i+R*C2.r;
    Result.r := (C1.r*R+C1.i)/Denominator;
    Result.i := (C1.i*R-C1.r)/Denominator;
  end;
end;

class operator TComplex.Divide(const C: TComplex; const D: Double): TComplex;
begin
  Result := C*(1.0/D);
end;

class operator TComplex.Divide(const D: Double; const C: TComplex): TComplex;
var
  R, Denominator: Double;
begin
  if abs(C.r)>=abs(C.i) then begin
    R := C.i/C.r;
    Denominator := C.r+R*C.i;
    Result.r := D/Denominator;
    Result.i := -R*Result.r;
  end else begin
    R := C.r/C.i;
    Denominator := C.i+R*C.r;
    Result.i := -D/Denominator;
    Result.r := -R*Result.i;
  end;
end;

function TComplex.IsZero: Boolean;
begin
  Result := Self=ZeroComplex;
end;

function TComplex.IsNonZero: Boolean;
begin
  Result := Self<>ZeroComplex;
end;

function TComplex.Conj: TComplex;
begin
  Result.r := r;
  Result.i := -i;
end;

function TComplex.Sqr: TComplex;
begin
  Result := Self*Self;
end;

function TComplex.Sqrt: TComplex;
var
  x, y, v, w: Double;
begin
  if IsZero then begin
    Result := ZeroComplex;
  end else begin
    x := abs(r);
    y := abs(i);
    if x>=y then begin
      v := y/x;
      w := System.Sqrt(x)*System.Sqrt(0.5*(1.0+System.Sqrt(1.0+v*v)));
    end else begin
      v := x/y;
      w := System.Sqrt(y)*System.Sqrt(0.5*(v+System.Sqrt(1.0+v*v)));
    end;
    if r>=0.0 then begin
      Result.r := w;
      Result.i := i/(2.0*w);
    end else begin
      if i>=0.0 then begin
        Result.i := w;
      end else begin
        Result.i := -w;
      end;
      Result.r := i/(2.0*Result.i);
    end;
  end;
end;

function TComplex.Mag: Double;
var
  x, y, Temp: Double;
begin
  x := abs(r);
  y := abs(i);
  if x=0.0 then begin
    Result := y;
  end else if y=0.0 then begin
    Result := x;
  end else if x>y then begin
    Temp := y/x;
    Result := x*System.Sqrt(1.0+Temp*Temp);
  end else begin
    Temp := x/y;
    Result := y*System.Sqrt(1.0+Temp*Temp);
  end;
end;

function TComplex.SqrMag: Double;
begin
  Result := System.Sqr(r) + System.Sqr(i);
end; 
```

这使用运算符重载来实现`+`、`-`和运算`*`符`/`。您会发现您可以根据此`TComplex`记录编写的代码比您在问题中引用的组件更具表现力。

您链接到的代码中实现了更多功能。但是，很容易扩展此答案中的记录以添加更多功能。

当然，由于您拥有 Delphi 7，因此此答案中的代码对您没有帮助。那是因为直到后来才引入运算符重载。如果您要进行任何严肃的数学运算，则需要运算符重载以使代码可读。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-25T19:03:40.593

预期的用法是这样的：

```
var
  cm: TComplexMath;

  z, w, sum: TComplexNumber;
begin

  cm := TComplexMath.Create(Self) // or nil, can most likely be anything
  try
    sum := cm.Add(z, w); // Now sum is the sum of z and w
  finally
    cm.Free;
  end;

end; 
```

您还可以在应用程序启动（或单元初始化等）时创建一个实例，`TComplexMath`并在应用程序的整个生命周期中使用它：

```
unit Unit1;

interface

var
  cm: TComplexMath;

...

implementation

procedure Test;
begin

  sum := cm.Add(z, w); // Now sum is the sum of z and w

end;

...

initialization

  cm := TComplexMath.Create(nil);

finialization

  cm.Free; 
```

最后，由于它是一个组件，因此您可以在设计时将其拖放到表单上。该实例将被调用`ComplexMath1`，您可以在表单类中使用它，例如

```
procedure TForm1.Button1Click(Sender: TObject);
var
  z, w, sum: TComplexNumber;    
begin
  sum := ComplexMath1.Add(z, w);
end; 
```

我*真的*不喜欢这门课的设计。首先，您只需要它的一个实例，那么为什么不将函数改为类函数呢？真的：为什么要使用一个类？最后，如果您使用现代版本的 Delphi，您可以使用高级记录和运算符重载来使诸如整数之类的东西`z + w`在您的源代码中工作，就像`z`简单类型一样！`w`

# android - 活动轮换上的片段重叠

> ID：15074320
> 
> 赞同：4
> 
> 时间：2013-02-25T18:57:03.437
> 
> 标签：android, android-fragments

我对此感到非常困惑。我有一个`actionbar`列表导航。我点击列表依次打开2`fragment`个并显示在同一个活动中。我基本上是用这种方法替换它们：

```
public void openFragment(AprilAppsFragment createdFragment){        
    if (createdFragment.getClass().isInstance(getDisplayedFragment()))
        return;

    FragmentManager manager = getSupportFragmentManager();
    FragmentTransaction transaction = manager.beginTransaction();
    transaction.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);

    transaction.replace( R.id.main_fragment, createdFragment, "displayed fragment"); 
    transaction.addToBackStack(null);
    transaction.commit();  
} 
```

我打开片段**A**，然后打开片段**B**，然后旋转屏幕。正在重新创建片段**A ，使我的应用程序崩溃**

为什么会这样，因为我正在使用替换？如何避免重新创建不再显示的片段，而不会失去对它们进行反压的可能性？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-08T01:32:50.450

你的问题是你没有为你的片段保存状态，因为你还没有添加

```
android:configChanges="orientation|screenSize" 
```

再次调用您的第一个片段，并且由于您没有保存状态，因此您的应用程序崩溃了。因此，您可以在清单中的 Activity 声明中添加上面的行，例如：

```
<activity android:name=".yourActivity" android:configChanges="orientation|screenSize" 
```

并覆盖 onSaveInstanceState 并保存两个片段的状态。在你的 onCreate 中做这个检查：

```
if(savedInstanceState != null){
fragmentA = (FragmentA) fragmentManager.getFragment(savedInstanceState, stringValueA);
fragmentB = (FragmentB) fragmentManager.getFragment(savedInstanceState, stringValueB);
} 
```

然后检查您的任何片段是否不为空，然后创建其实例并将其设置为 fragmentTransaction.relplace。或者在您的 for openFragment 方法中执行此操作。

干杯，

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T07:13:46.793

您的问题是您的活动正在重新创建，这导致您重新设置列表导航，这导致默认（第一）位置被触发。您需要在活动销毁和活动重新创建之间保存选定的索引。这是一个例子：

```
@Override
public void onCreate(Bundle savedInstanceState) {

    // onCreate implementation...

    // Must come after setListNavigationCallbacks is called
    if (savedInstanceState != null) {
        int index = savedInstanceState.getInt("index");
        getActionBar().setSelectedNavigationItem(index);
    }
}

@Override
protected void onSaveInstanceState(Bundle outState) {

    super.onSaveInstanceState(outState);
    outState.putInt("index", getActionBar().getSelectedNavigationIndex());
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-25T19:13:35.533

片段在旋转时会自动保存它们的状态（以及后栈中的位置）。确保您没有在 onActivityCreated 或 onCreate 方法中重新创建片段或调用 openFragment。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-04T23:43:29.963

我有一个类似的问题，我要做的是在我的 Androidmanifest.xml 中添加一个代码行（在你想要停止重新创建的活动中）：

> android:configChanges="方向"

还有一件事，我了解到片段是一种子活动而不是活动，我们必须扩展一个活动片段以获得片段的支持，扩展活动片段的活动是实际持有的活动称为片段的“子活动”。

我希望我能帮助你...

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-06T20:18:04.813

将此添加到您的 AndroidManifest.xml 文件中的活动定义中：

```
android:configChanges="keyboardHidden|screenLayout|orientation|screenSize" 
```

这将阻止活动重新启动，并且 FragmentManager 不会自动重新创建它拥有的片段。

如果您需要在轮换时重新启动活动，那么您必须查找已传递给 onCreate 的 savedInstanceState，然后使用您提供的标签查询 FragmentManager 以获取您的片段。

# java - 在java中删除二维数组列表中的特定行

> ID：15074321
> 
> 赞同：0
> 
> 时间：2013-02-25T18:57:11.690
> 
> 标签：java, arraylist

我想从 2D arraylist 中删除特定行，并且该行被下一行替换。我写了以下代码：

`Collection<?> c = joint_mat.get(row); joint_mat.get(row).removeAll(c);`

此代码正在删除该行的元素，但不将其替换为下一行。输出如下：

[0.6, 0.608, 0.608, 0.628, 0.608],

[0.6, 0.6, 0.6, 0.608, 0.608],

[0.6, 0.652, 0.6, 0.612, 0.608],

**[],**

[0.612, 0.632, 0.608, 0.604, 0.608],

[0.6, 0.604, 0.604, 0.62, 0.62],

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T19:00:57.383

这个怎么样：

```
joint_mat.remove(row); 
```

PS一个更简单的方法来做你在上面做的事情，清除行上arraylist的内容，是这样的：

```
joint_mat.get(row).clear(); 
```

# hibernate - 使用注释混合 JOINED 和 SINGLE_TABLE 继承

> ID：15074339
> 
> 赞同：0
> 
> 时间：2013-02-25T18:58:27.813
> 
> 标签：hibernate, inheritance, annotations, mixed

我在论坛上查看了类似的问题，但没有找到任何可以解决我正在寻找的东西（至少我能说的）。

我有一种情况，我们有多个客户，每个客户都有多种请求类型。我试图完成的是有一个父表“Request”，它为每个客户端拆分成一个子表 - “ClientARequest”，“ClientBRequest”。从那里，我将有多个类映射到同一个客户端表。“ClientARequest1”和“ClientARequest2”都映射到“ClientARequest”，对于ClientB也是如此。我可以让第一部分工作与 JOINED 继承没有问题。我可以让第二个工作以及保存。但是，在获取时，hibernate 正在创建最后一个映射类的实例，因此根据我如何使用获取的对象，我会得到一个 ClassCastException 或者我不会有正确的数据，因为它是错误的类。

```
@Entity(name="Request")
@Table(name = "REQUEST")
@Inheritance(strategy=InheritanceType.JOINED)  
@DiscriminatorColumn(name="MY_TYPE", discriminatorType=DiscriminatorType.STRING)
public class Request  { ... }

@Entity(name="ClientARequest1")
@Table(name = "CLIENTAREQUEST")
@DiscriminatorValue("ClientA")
public class ClientARequest1 extends Request { ... }

@Entity(name="ClientARequest2")
@Table(name = "CLIENTAREQUEST")
@DiscriminatorValue("ClientA")
public class ClientARequest2 extends Request { ... } 
```

ClientB 同样的事情：

```
@Entity(name="ClientBRequest1")
@Table(name = "CLIENTBREQUEST")
@DiscriminatorValue("ClientB")
public class ClientBRequest1 extends Request { ... }

@Entity(name="ClientBRequest2")
@Table(name = "CLIENTBREQUEST")
@DiscriminatorValue("ClientB")
public class ClientBRequest2 extends Request { ... } 
```

因此，就像我提到的那样，创建了三个表，Request、ClientARequest 和 ClientBRequest，这在表之间进行区分是没有问题的。正是在尝试从表中获取时，hibernate 使用第二个映射来创建类的实例。

前任。

```
ClientARequest1 r = new ClientARequest1("ClientA");
dao.save(r); 
```

按预期工作。
但是对于：

```
Request r = (Request) dao.findById(1l);  //where id==1 is a ClientARequest1 
```

实际上会拉回一个ClientARequest2。

任何想法将不胜感激。这个解决方案不可行吗，有没有办法将表格分解到另一个级别？

2/26/13 11:19 AM EST：
我已经尝试了这个线程中的解决方案[如何将继承策略与 JPA 注释和 Hibernate 混合？](https://stackoverflow.com/questions/3915026/how-to-mix-inheritance-strategies-with-jpa-annotations-and-hibernate)，但我无法正确映射子类 BB1、BB2、CC1、CC2，因为它们的属性将放置在基父表 A 中。我希望它们的属性分别放置在它们的直接父表 BB、CC 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T19:19:21.140

我得到了它。我遵循了[如何将继承策略与 JPA 注释和 Hibernate 混合？](https://stackoverflow.com/questions/3915026/how-to-mix-inheritance-strategies-with-jpa-annotations-and-hibernate). 我唯一更改的是将@MappedSuperclass 添加到BB、CC 级别，并将@Entity 和@SecondaryTable 移动到BB1、BB2、CC1、CC2 级别。

# cakephp-2.0 - 如何获取css和脚本的绝对路径

> ID：15074342
> 
> 赞同：0
> 
> 时间：2013-02-25T18:58:30.743
> 
> 标签：cakephp-2.0

如何获取样式表或 javascript 文件的绝对路径。

```
<?php echo $this->Html->css('/css/main.css');?> 
```

正在给出 URL

```
<link rel="stylesheet" type="text/css" href="/dev/theme/Default/css/main.css" /> 
```

我正在寻找

```
<link rel="stylesheet" type="text/css" href="http://localhost/dev/theme/Default/css/main.css" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T23:30:22.417

我真的很想知道如果 CSS 文件与您的网站在同一个域上提供，您为什么要这样做，但这可能会起作用；

```
<?php echo $this->Html->css($this->Html->url('/css/main.css', true));?> 
```

HtmlHelper::url() （继承自 Helper::url() 有两个参数。第一个是作为字符串或数组的路径（使用 cakephp 路由），如果布尔值“true”作为其第二个参数传递，会生成一个“完整”的 URL。

我现在不在我的电脑前，所以无法测试它，但我认为它应该可以工作。

**更新**

我快速浏览了源代码：[https ://github.com/cakephp/cakephp/blob/master/lib/Cake/View/Helper/HtmlHelper.php#L431](https://github.com/cakephp/cakephp/blob/master/lib/Cake/View/Helper/HtmlHelper.php#L431)

并且 HtmlHelper::css() 在内部使用 Helper::assetUrl() ；

[https://github.com/cakephp/cakephp/blob/master/lib/Cake/View/Helper.php#L305](https://github.com/cakephp/cakephp/blob/master/lib/Cake/View/Helper.php#L305)

所以这可能也有效，如果有效，这是一个更清洁的解决方案：

```
<?php echo $this->Html->css('main', null, array('fullBase' => true));?> 
```

# c - 递归树遍历，为树的每个叶子返回一个变量

> ID：15074344
> 
> 赞同：1
> 
> 时间：2013-02-25T18:58:31.573
> 
> 标签：c, pointers, tree, tree-traversal, huffman-code

我有一个霍夫曼二叉树。我需要遍历树，直到到达每一片叶子，对于每一片叶子，我需要“保存”该叶子节点的一个成员，并将所有这些变量保存在树外的数组中。

假设我有这棵树：

```
 3\65

        6\-1

            3\70

    9\-1

            2\66

        3\-1

            1\67
16\-1

    7\68 
```

每个叶子（7/68、1/67、2/66、7/70、3/65）都有一个名为“encoding”的成员，它是一个字符串。

（即每个节点都有一个node->left、node->right和node->encoding）

假设编码如下：

```
7/68 got an encoding of 0
1/67 got an encoding of 100
2/66 got an encoding of 101
3/70 got an encoding of 110
3/65 got an encoding of 111 
```

我可以相对轻松地遍历树并打印出这些值，但我需要做的是将这些字符串保存在树外的数组中。

我想不出如何将这些保存在树外。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T19:39:50.450

据我记得，在霍夫曼代码实现中，您不必使用外部数组。实现它的最简单方法是将另一个指针（'next'）添加到您的结构中。每个元素链接两次。一次作为树的成员，一次作为链表的成员。这样就不需要新的结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T19:06:17.410

> “将这些字符串保存在树外的数组中。”

评论：你确定你必须存储字符串吗？如果你只存储整数并在递归完成后创建字符串，它会更干净。

好的，无论哪种方式（并且不泄露源代码），您只需：

*   在开始递归之前创建一个足够大（*）的数组

*   创建一个指针，用于写入数组的不同部分，将该指针初始化为数组的开头。

将指向该指针的指针作为新的/附加的函数参数提供给您的递归。每次在递归中到达叶子时，您

*   将您在叶子上找到的内容写入指针
*   增加指针（你可以这样做，因为你有*指向指针的指针*

# solr - Solr 在替换架构后停止工作

> ID：15074345
> 
> 赞同：0
> 
> 时间：2013-02-25T18:58:34.723
> 
> 标签：solr

在 solr 中替换架构后，出现以下错误。请注意，在替换由 manage.py 填充的架构之前，我通常可以访问 Solr/admin 和 solr

```
 <abortOnConfigurationError> false </abortOnConfigurationError>

in solr.xml

-------------------------------------------------------------
    org.apache.solr.common.SolrException: Unknown fieldtype '' specified on field 
    at org.apache.solr.schema.IndexSchema.readSchema(IndexSchema.java:511)
    at org.apache.solr.schema.IndexSchema.<init>(IndexSchema.java:123)
    at org.apache.solr.core.CoreContainer.create(CoreContainer.java:478)
    at org.apache.solr.core.CoreContainer.load(CoreContainer.java:332)
    at org.apache.solr.core.CoreContainer.load(CoreContainer.java:216)
    at org.apache.solr.core.CoreContainer$Initializer.initialize(CoreContainer.java:161)
    at org.apache.solr.servlet.SolrDispatchFilter.init(SolrDispatchFilter.java:96)
    at org.mortbay.jetty.servlet.FilterHolder.doStart(FilterHolder.java:97)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler.java:713)
    at org.mortbay.jetty.servlet.Context.startContext(Context.java:140)
    at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1282)
    at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:518)
    at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:499)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.handler.HandlerCollection.doStart(HandlerCollection.java:152)
    at org.mortbay.jetty.handler.ContextHandlerCollection.doStart(ContextHandlerCollection.java:156)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.handler.HandlerCollection.doStart(HandlerCollection.java:152)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
    at org.mortbay.jetty.Server.doStart(Server.java:224)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.xml.XmlConfiguration.main(XmlConfiguration.java:985)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.mortbay.start.Main.invokeMain(Main.java:194)
    at org.mortbay.start.Main.start(Main.java:534)
    at org.mortbay.start.Main.start(Main.java:441)
    at org.mortbay.start.Main.main(Main.java:119) 
```

我的 schema.xml 看起来像这样。

```
<?xml version="1.0" encoding="UTF-8" ?>

<schema name="default" version="1.1">
  <types>
    <fieldtype name="string"  class="solr.StrField" sortMissingLast="true" omitNorms="true"/>
    <fieldType name="boolean" class="solr.BoolField" sortMissingLast="true" omitNorms="true"/>

    <!-- Numeric field types that manipulate the value into
         a string value that isn't human-readable in its internal form,
         but with a lexicographic ordering the same as the numeric ordering,
         so that range queries work correctly. -->
    <fieldType name="sint" class="solr.SortableIntField" sortMissingLast="true" omitNorms="true"/>
    <fieldType name="slong" class="solr.SortableLongField" sortMissingLast="true" omitNorms="true"/>
    <fieldType name="sfloat" class="solr.SortableFloatField" sortMissingLast="true" omitNorms="true"/>
    <fieldType name="sdouble" class="solr.SortableDoubleField" sortMissingLast="true" omitNorms="true"/>

    <fieldType name="date" class="solr.DateField" sortMissingLast="true" omitNorms="true"/>

    <fieldType name="text" class="solr.TextField" positionIncrementGap="100">
      <analyzer type="index">
        <tokenizer class="solr.WhitespaceTokenizerFactory"/>
        <!-- in this example, we will only use synonyms at query time
        <filter class="solr.SynonymFilterFactory" synonyms="index_synonyms.txt" ignoreCase="true" expand="false"/>
        -->
        <filter class="solr.StopFilterFactory" ignoreCase="true" words="lang/stopwords_en.txt"/>
        <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="1" catenateNumbers="1" catenateAll="0"/>
        <filter class="solr.LowerCaseFilterFactory"/>
        <filter class="solr.EnglishPorterFilterFactory" protected="protwords.txt"/>
        <filter class="solr.RemoveDuplicatesTokenFilterFactory"/>
      </analyzer>
      <analyzer type="query">
        <tokenizer class="solr.WhitespaceTokenizerFactory"/>
        <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true"/>
        <filter class="solr.StopFilterFactory" ignoreCase="true" words="lang/stopwords_en.txt"/>
        <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="0" catenateNumbers="0" catenateAll="0"/>
        <filter class="solr.LowerCaseFilterFactory"/>
        <filter class="solr.EnglishPorterFilterFactory" protected="protwords.txt"/>
        <filter class="solr.RemoveDuplicatesTokenFilterFactory"/>
      </analyzer>
    </fieldType>

    <fieldType name="text_ws" class="solr.TextField" positionIncrementGap="100">
      <analyzer>
        <tokenizer class="solr.WhitespaceTokenizerFactory"/>
      </analyzer>
    </fieldType>

    <fieldType name="ngram" class="solr.TextField" >
      <analyzer type="index">
        <tokenizer class="solr.KeywordTokenizerFactory"/>
        <filter class="solr.LowerCaseFilterFactory"/>
        <filter class="solr.NGramFilterFactory" minGramSize="3" maxGramSize="15" />
      </analyzer>
      <analyzer type="query">
        <tokenizer class="solr.KeywordTokenizerFactory"/>
        <filter class="solr.LowerCaseFilterFactory"/>
      </analyzer>
    </fieldType>

    <fieldType name="edge_ngram" class="solr.TextField" positionIncrementGap="1">
      <analyzer type="index">
        <tokenizer class="solr.WhitespaceTokenizerFactory" />
        <filter class="solr.LowerCaseFilterFactory" />
        <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="0" catenateNumbers="0" catenateAll="0" splitOnCaseChange="1"/>
        <filter class="solr.EdgeNGramFilterFactory" minGramSize="2" maxGramSize="15" side="front" />
      </analyzer>
      <analyzer type="query">
        <tokenizer class="solr.WhitespaceTokenizerFactory" />
        <filter class="solr.LowerCaseFilterFactory" />
        <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="0" catenateNumbers="0" catenateAll="0" splitOnCaseChange="1"/>
      </analyzer>
    </fieldType>
  </types>

  <fields>   
    <!-- general -->
    <field name="id" type="string" indexed="true" stored="true" multiValued="false" required="true"/>
    <field name="django_ct" type="string" indexed="true" stored="true" multiValued="false" />
    <field name="django_id" type="string" indexed="true" stored="true" multiValued="false" />

    <dynamicField name="*_i"  type="sint"    indexed="true"  stored="true"/>
    <dynamicField name="*_s"  type="string"  indexed="true"  stored="true"/>
    <dynamicField name="*_l"  type="slong"   indexed="true"  stored="true"/>
    <dynamicField name="*_t"  type="text"    indexed="true"  stored="true"/>
    <dynamicField name="*_b"  type="boolean" indexed="true"  stored="true"/>
    <dynamicField name="*_f"  type="sfloat"  indexed="true"  stored="true"/>
    <dynamicField name="*_d"  type="sdouble" indexed="true"  stored="true"/>
    <dynamicField name="*_dt" type="date"    indexed="true"  stored="true"/>

    <field name="" type="" indexed="True" stored="True" multiValued="" />

    <field name="" type="" indexed="True" stored="True" multiValued="" />

    <field name="" type="0" indexed="True" stored="True" multiValued="" />

    <field name="" type="" indexed="True" stored="True" multiValued="" />

    <field name="" type="" indexed="True" stored="True" multiValued="" />

    <field name="" type="" indexed="True" stored="True" multiValued="" />

    <field name="" type="" indexed="True" stored="True" multiValued="" />

    <field name="" type="" indexed="True" stored="True" multiValued="" />

  </fields>

  <!-- field to use to determine and enforce document uniqueness. -->
       <uniqueKey>id</uniqueKey>

  <!-- field for the QueryParser to use when an explicit fieldname is absent -->
       <defaultSearchField>text</defaultSearchField> 

  <!-- SolrQueryParser configuration: defaultOperator="AND|OR" -->
       <solrQueryParser defaultOperator="AND" />
</schema> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T20:36:47.210

在您的架构中，您有一些空字段声明：

```
<field name="" type="" indexed="True" stored="True" multiValued="" />

<field name="" type="" indexed="True" stored="True" multiValued="" />

<field name="" type="0" indexed="True" stored="True" multiValued="" />

<field name="" type="" indexed="True" stored="True" multiValued="" />

<field name="" type="" indexed="True" stored="True" multiValued="" />

<field name="" type="" indexed="True" stored="True" multiValued="" />

<field name="" type="" indexed="True" stored="True" multiValued="" />

<field name="" type="" indexed="True" stored="True" multiValued="" /> 
```

您必须为每个字段标签指定名称和类型，并且多值参数也不能设置为空值（您可以省略它，或者指定 true 或 false。

有关更多信息，请参阅[http://wiki.apache.org/solr/SchemaXml](http://wiki.apache.org/solr/SchemaXml)

# python - 需要多个值才能解压

> ID：15074348
> 
> 赞同：1
> 
> 时间：2013-02-25T18:58:46.803
> 
> 标签：python, python-3.x

我目前正在开发一个在“|”处拆分平面文件的程序 符号并将每个实体分隔为代码中定义的新对象。它看起来像这样：

```
 results = 0
    searchphrase = input("Search: ")
    with open('file.dat', 'r', encoding='utf8') as info_1:
        for line in info_1:
            a, b, c, d, e, f, g, h, i, j, k, l, m = line.split('|')
            if searchphrase in a:
                results +=1
                print(results, a + '|' + b + '|' + c etc.) 
```

编辑 1

这是不工作的程序版本，并给我错误消息`need more than 1 value to unpack`，解决该`a, b, c, d, e, f, g, h, i, j, k, l, m = line.split('|')`行。

我正在调用的文件中的数据格式如下：

```
a|b|c|d|e|f|g|h|i|j|k|l|m 
```

是否有理由将其解释为单行而不是将每个实体分散到自己的对象中？当我这样做时，程序运行良好：

```
results = 0
searchphrase = input("Search: ")
with open('file.ext', 'r', encoding='utf8') as info_1:
    for line in info_1:
        a = line.split('|')
        if searchphrase in a:
            results +=1
            print(results, a) 
```

但我希望人们能够根据文件的特定列搜索信息（即搜索 a 以获取 x，搜索 d 以获取 y 等）。我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T19:01:12.687

您的输入中可能*有空行*。跳过这些：

```
for line in info_1:
    if not line.strip(): continue 
```

但您可能想改用该[`csv`模块](http://docs.python.org/3/library/csv.html)：

```
import csv

for row in csv.reader(open('file.dat', newlines=''), delimiter='|'): 
```

# vbscript - 预先编写的代码中的循环 IP 地址替换

> ID：15074350
> 
> 赞同：1
> 
> 时间：2013-02-25T18:58:53.003
> 
> 标签：vbscript

我已将代码设置为 telnet 进入交换机并将启动配置 tftp 到服务器。如果我将 IP 地址硬编码到脚本中，则此代码可以完美运行。

我想做的是将IP地址列表（一个接一个）传递给脚本，以便我可以复制网络上的所有交换机配置。我在下面包含了一些代码，这是我用来创建脚本的代码。我想要做的就是用 IP 地址列表替换“telnet xx.xx.xx.xx”xx.xx.xx.xx 条目。

提前致谢！

这是我使用的代码副本：

```
Option Explicit

On Error Resume Next

Dim WshShell

set WshShell=CreateObject("WScript.Shell")

WshShell.run "cmd.exe"

WScript.Sleep 1000

'Send commands to the window as needed - IP and commands need to be customized

'Step 1 - Telnet to remote IP'

WshShell.SendKeys "telnet xx.xx.xx.xx"

WshShell.SendKeys ("{Enter}")

WScript.Sleep 1000

'Step 2 - Issue Commands with pauses'

WshShell.SendKeys ("{Enter}")

WScript.Sleep 1000

WshShell.SendKeys "5"

WshShell.SendKeys ("{Enter}")

WScript.Sleep 1000

'Step 3 - Exit Command Window

WshShell.SendKeys "exit"

WshShell.SendKeys ("{Enter}")

WScript.Quit 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T21:45:56.880

试试这个，主要是你的代码，只插入几行以循环遍历纯文本格式的 IP 地址列表。请让我知道这是否适合您。这样做会为每个 telnet 主机打开一个新的命令窗口，然后在完成后将其关闭。修改为使用相同的命令窗口可能很容易。

```
Option Explicit

On Error Resume Next

Dim WshShell
Dim objFSO
Dim objInputFile
Dim strIP

set WshShell=CreateObject("WScript.Shell")

Set objFSO = CreateObject("Scripting.FileSystemObject")

Set objInputFile = objFSO.OpenTextFile("IPFilelist.txt", 1)

Do Until objInputFile.AtEndofStream

    strIP = objInputFile.ReadLine

    WshShell.run "cmd.exe"

    WScript.Sleep 1000

    'Send commands to the window as needed - IP and commands need to be customized

    'Step 1 - Telnet to remote IP'

    WshShell.SendKeys "telnet " & strIP

    WshShell.SendKeys ("{Enter}")

    WScript.Sleep 1000

    'Step 2 - Issue Commands with pauses'

    WshShell.SendKeys ("{Enter}")

    WScript.Sleep 1000

    WshShell.SendKeys "5"

    WshShell.SendKeys ("{Enter}")

    WScript.Sleep 1000

    'Step 3 - Exit Command Window

    WshShell.SendKeys "exit"

    WshShell.SendKeys ("{Enter}")

Loop

WScript.Quit 
```

# png - Ipython 0.13.1：Ipython.display.Image 不会在笔记本中加载本地 png 文件

> ID：15074352
> 
> 赞同：1
> 
> 时间：2013-02-25T18:58:55.437
> 
> 标签：png, ipython

我不知道为什么我不能将本地 png 文件加载到我的 ipython 笔记本中。我在一个牢房里：

从 IPython.display 导入图像 i = Image('../heavy_vortex_3/frames/x_snap_n0000000.png') i

而不是看到图像，我得到一个小“破碎的图片”图像。远程 png 工作正常，例如：

图片（url=' http: [//upload.wikimedia.org/wikipedia/en/b/bf/Firefox.png](http://upload.wikimedia.org/wikipedia/en/b/bf/Firefox.png) '）

高兴地渲染了那个小狐狸。有什么我做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T19:45:50.557

默认情况下，图像假定您正在传递一个 url，并将显示一个 img 标记，其 href 属性设置为您传递的值。您基本上是在尝试访问

`http://localhost:8888/../heavy_vortex_3/frames/x_snap_n0000000.png`

并且可能除非您使用某种中间件，否则您会向 ipython 网络服务器询问您想要的内容。

我认为您想要的是相对于内核的当前工作目录显示图像。所以你想使用`filename`（如果我没记错的话）kwarg。：

`Image(filename='../heavy_vortex_3/frames/x_snap_n0000000.png')`

它将实际读取文件，并将其通过网络发送。

# windows - 当中央存储库位于 Windows 文件共享上时，与多个用户一起使用 git 是否安全？

> ID：15074353
> 
> 赞同：4
> 
> 时间：2013-02-25T18:58:55.470
> 
> 标签：windows, git, concurrency, network-share

我们是一个不到十人的团队，需要快速设置一个支持基于活动目录的身份验证的 git 服务器。

最简单的解决方案似乎是使用带有裸 git 存储库的文件共享并使用 unc 路径访问它，例如

```
git clone //server/share/repo.git 
```

但是，我们有点担心鲁棒性。当几个人使用同一个 git 存储库并且没有实际运行的服务器组件时，并发是否没有问题？

客户端运行的是 Windows 7，服务器是 Windows Server 2008R2。使用 msysgit 1.8.1.2

（我很清楚还有很多其他的 git 服务器解决方案，但是，特别是考虑到 AD 身份验证的要求，它们的设置并不那么简单）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T19:32:31.987

似乎 AR Auth 唯一发挥作用的时间是推/拉。

当您克隆 git 存储库时，整个历史记录也将被克隆，因此每个用户都将拥有一个完整的存储库。

如果文件共享失败，任何用户都可以通过向上推送代码来替换新共享上的代码。

并发不是问题——因为 git 是分布式的，它处理并发的方式与其他 VCS 不同：没有文件锁等。

# android - 如何获得具有焦点的 View 对象？

> ID：15074354
> 
> 赞同：0
> 
> 时间：2013-02-25T18:59:01.450
> 
> 标签：android, android-view, remote-access

我如何获得`View`当前关注的内容，不一定是我自己的应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T19:10:18.810

我知道您可以使用[OnGlobalFocusChangeListener](http://developer.android.com/reference/android/view/ViewTreeObserver.OnGlobalFocusChangeListener.html)在您自己的应用程序上执行此操作，但是，即使我从未尝试过，我也可以肯定它不会在您的应用程序之外工作。

# ruby-on-rails - 通过 API 接收文件内容而无需在 Rails 中发布密钥？

> ID：15074356
> 
> 赞同：1
> 
> 时间：2013-02-25T18:59:02.533
> 
> 标签：ruby-on-rails, api, post, parameters

我目前正在使用`file[content]=%FILECONTENTHERE%`. 我想直接接收我的文件，没有`file[content]`或任何类型的 POST 密钥。

我目前在我的控制器中做这样的事情：

```
def file_from_params
  return nil if params[:file].blank? || params[:file][:content].blank?
  temp = Tempfile.new(['import', '.txt'])
  temp.write params[:file][:content]
  temp.rewind
  temp
end 
```

我怎样才能在 Rails 中实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T15:02:18.623

使用解决`request.body.read`：

```
def file_from_params
  file = request.body.read
  return nil if file.blank?
  temp = Tempfile.new(['import', '.txt'])
  temp.write file
  temp.rewind
  temp
end 
```

# android - 列表查看多个通话

> ID：15074360
> 
> 赞同：0
> 
> 时间：2013-02-25T18:59:18.877
> 
> 标签：android, android-listview, android-arrayadapter

您好，我正在将我的自定义 arrayadapter 用于我的列表视图。我正在使用[vongella](http://www.vogella.com/articles/AndroidListView/article.html)的代码。适配器的代码如下：

```
public class CategoriesAdapter extends ArrayAdapter<CategoriesRowDetails>{
private final Activity context;
private final List<CategoriesRowDetails> categories;

public CategoriesAdapter(Activity context,
        List<CategoriesRowDetails> categories) {
    super(context, R.layout.categories_row, R.id.textViewCategory, categories);
    this.context = context;
    this.categories = categories;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View rowView = convertView;
    if(rowView == null){
        LayoutInflater inflater = context.getLayoutInflater();
        rowView = inflater.inflate(R.layout.categories_row, null);
        final ViewHolder viewHolder = new ViewHolder();
        viewHolder.imageView = (ImageView) rowView.findViewById(R.id.imageViewCategory);
        viewHolder.textView = (TextView) rowView.findViewById(R.id.textViewCategory);
        viewHolder.checkBox = (CheckBox) rowView.findViewById(R.id.checkBoxCategory);
        viewHolder.checkBox.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

            @Override
            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                CategoriesRowDetails element = (CategoriesRowDetails) viewHolder.checkBox.getTag();
                element.setSelected(buttonView.isChecked());
            }
        });
        rowView.setTag(viewHolder);
        viewHolder.checkBox.setTag(categories.get(position));
    }else{
        ((ViewHolder) rowView.getTag()).checkBox.setTag(categories.get(position));
    }

    ViewHolder holder = (ViewHolder) rowView.getTag();

    holder.textView.setText(categories.get(position).getName());

    int resResult = context.getResources().getIdentifier(categories.get(position).getResName(), "drawable",
            ".my_tour_guide");

    if(resResult == 0){

        holder.imageView.setImageResource(R.drawable.stop);
    }else{
        holder.imageView.setImageResource(resResult);
    }
    Log.i("CategoriesAdapter", String.valueOf(categories.get(position).isSelected()) + "position = " + String.valueOf(position));
    holder.checkBox.setSelected(categories.get(position).isSelected());
    return rowView;
}

    private static class ViewHolder{
    public ImageView imageView;
    public TextView textView;
    public CheckBox checkBox;
} 
```

}

categoriesRowDetails 如下：

```
public class CategoriesRowDetails {

private String name;
private String resName;
private boolean selected;

public CategoriesRowDetails(String name, boolean isSelected){
    setName(name);
    setResName(name);
    setSelected(isSelected);
}

private void setName(String name) {
    this.name = name;
}

public String getName(){
    return name;
}

private synchronized void setResName(String name) {

     name = name.toLowerCase();
     name = name.replace(" ", "_");
     this.resName = name;
}

public synchronized String getResName(){
    return resName;
}

public boolean isSelected(){
    return selected;
}

public void setSelected(boolean selected){
    this.selected = selected;
} 
```

}

问题是我传递了一个全部设置为 isSelected = true 的 5 个项目的列表，当显示列表视图时，没有选择任何项目，而且我在 logcat 中看到以下消息，这意味着 getview 执行了两次每个项目。

```
02-25 20:43:51.160: I/CategoriesAdapter(14185): trueposition = 0
02-25 20:43:51.190: I/CategoriesAdapter(14185): trueposition = 1
02-25 20:43:51.200: I/CategoriesAdapter(14185): trueposition = 2
02-25 20:43:51.210: I/CategoriesAdapter(14185): trueposition = 3
02-25 20:43:51.220: I/CategoriesAdapter(14185): trueposition = 4
02-25 20:43:51.660: I/CategoriesAdapter(14185): trueposition = 0
02-25 20:43:51.660: I/CategoriesAdapter(14185): trueposition = 1
02-25 20:43:51.670: I/CategoriesAdapter(14185): trueposition = 2
02-25 20:43:51.670: I/CategoriesAdapter(14185): trueposition = 3
02-25 20:43:51.670: I/CategoriesAdapter(14185): trueposition = 4 
```

编辑添加布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/RelativeLayout1"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:orientation="horizontal" >

<ImageView
    android:id="@+id/imageViewCategory"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerVertical="true"
    android:paddingLeft="10dp" />

<TextView
    android:id="@+id/textViewCategory"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerVertical="true"
    android:layout_toLeftOf="@+id/checkBoxCategory"
    android:layout_toRightOf="@+id/imageViewCategory"
    android:lines="1"
    android:paddingLeft="5dp"
    android:scrollHorizontally="true"
    android:textSize="24sp" />

<CheckBox
    android:id="@+id/checkBoxCategory"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:layout_centerVertical="true"
    android:paddingLeft="5dp"
    android:paddingRight="5dp" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T20:03:32.537

我为你们所有人感到抱歉，你们浪费了时间看我的可怕错误。错误`getView()`在行内`holder.checkBox.setSelected`应该是`holder.checkbox.setChecked`

# ios - Apple 源代码 - require(error == nil, bail) 导致错误

> ID：15074361
> 
> 赞同：2
> 
> 时间：2013-02-25T18:59:20.703
> 
> 标签：ios, compiler-errors, automatic-ref-counting

我正在尝试使用 Apple 的一些[源代码](http://developer.apple.com/library/ios/#samplecode/SquareCam/Introduction/Intro.html)，但代码中充斥着以下语句：

```
require( error == nil, bail ); 
```

在 ARC 项目中使用时会导致各种错误（“转到受保护范围”）。

如何解决此代码？

这是一个例子：

```
- (void)setupAVCapture
{
    NSError *error = nil;

    AVCaptureSession *session = [AVCaptureSession new];
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone)
        [session setSessionPreset:AVCaptureSessionPreset640x480];
    else
        [session setSessionPreset:AVCaptureSessionPresetPhoto];

    // Select a video device, make an input
    AVCaptureDevice *device = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];
    AVCaptureDeviceInput *deviceInput = [AVCaptureDeviceInput deviceInputWithDevice:device error:&error];

    require( error == nil, bail ); //ERROR: "Goto into protected scope"

    isUsingFrontFacingCamera = NO;
    if ( [session canAddInput:deviceInput] )
        [session addInput:deviceInput];

    // Make a still image output
    self.stillImageOutput = [AVCaptureStillImageOutput new];
    [self.stillImageOutput addObserver:self forKeyPath:@"capturingStillImage" options:NSKeyValueObservingOptionNew context:(__bridge void *)(AVCaptureStillImageIsCapturingStillImageContext)];
    if ( [session canAddOutput:self.stillImageOutput] )
        [session addOutput:self.stillImageOutput];

    // Make a video data output
    self.videoDataOutput = [AVCaptureVideoDataOutput new];

    // we want BGRA, both CoreGraphics and OpenGL work well with 'BGRA'
    NSDictionary *rgbOutputSettings = [NSDictionary dictionaryWithObject:
                                       [NSNumber numberWithInt:kCMPixelFormat_32BGRA] forKey:(id)kCVPixelBufferPixelFormatTypeKey];
    [self.videoDataOutput setVideoSettings:rgbOutputSettings];
    [self.videoDataOutput setAlwaysDiscardsLateVideoFrames:YES]; // discard if the data output queue is blocked (as we process the still image)

    // create a serial dispatch queue used for the sample buffer delegate as well as when a still image is captured
    // a serial dispatch queue must be used to guarantee that video frames will be delivered in order
    // see the header doc for setSampleBufferDelegate:queue: for more information
    videoDataOutputQueue = dispatch_queue_create("VideoDataOutputQueue", DISPATCH_QUEUE_SERIAL);
    [self.videoDataOutput setSampleBufferDelegate:self queue:videoDataOutputQueue];

    if ( [session canAddOutput:self.videoDataOutput] )
        [session addOutput:self.videoDataOutput];
    [[self.videoDataOutput connectionWithMediaType:AVMediaTypeVideo] setEnabled:NO];

    effectiveScale = 1.0;
    self.previewLayer = [[AVCaptureVideoPreviewLayer alloc] initWithSession:session];
    [self.previewLayer setBackgroundColor:[[UIColor blackColor] CGColor]];
    [self.previewLayer setVideoGravity:AVLayerVideoGravityResizeAspect];
    CALayer *rootLayer = [self.previewView layer];
    [rootLayer setMasksToBounds:YES];
    [self.previewLayer setFrame:[rootLayer bounds]];
    [rootLayer addSublayer:self.previewLayer];
    [session startRunning];

bail:
    session = nil;
    if (error) {
        UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:[NSString stringWithFormat:@"Failed with error %d", (int)[error code]]
                                                            message:[error localizedDescription]
                                                           delegate:nil
                                                  cancelButtonTitle:@"Dismiss"
                                                  otherButtonTitles:nil];
        [alertView show];
        [self teardownAVCapture];
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T19:24:38.840

添加打开和关闭大括号以提及范围

```
require( error == nil, bail );
{

}
bail:
{

} 
```

**例子：**

```
require( error == nil, bail );
    {

        isUsingFrontFacingCamera = NO;
        if ( [session canAddInput:deviceInput] )
            [session addInput:deviceInput];

        // Make a still image output
        stillImageOutput = [AVCaptureStillImageOutput new];
        [stillImageOutput addObserver:self forKeyPath:@"capturingStillImage" options:NSKeyValueObservingOptionNew context:(__bridge void *)(AVCaptureStillImageIsCapturingStillImageContext)];
        if ( [session canAddOutput:stillImageOutput] )
            [session addOutput:stillImageOutput];

        // Make a video data output
        videoDataOutput = [AVCaptureVideoDataOutput new];

        // we want BGRA, both CoreGraphics and OpenGL work well with 'BGRA'
        NSDictionary *rgbOutputSettings = [NSDictionary dictionaryWithObject:
                                           [NSNumber numberWithInt:kCMPixelFormat_32BGRA] forKey:(id)kCVPixelBufferPixelFormatTypeKey];
        [videoDataOutput setVideoSettings:rgbOutputSettings];
        [videoDataOutput setAlwaysDiscardsLateVideoFrames:YES]; // discard if the data output queue is blocked (as we process the still image)

        // create a serial dispatch queue used for the sample buffer delegate as well as when a still image is captured
        // a serial dispatch queue must be used to guarantee that video frames will be delivered in order
        // see the header doc for setSampleBufferDelegate:queue: for more information
        videoDataOutputQueue = dispatch_queue_create("VideoDataOutputQueue", DISPATCH_QUEUE_SERIAL);
        [videoDataOutput setSampleBufferDelegate:self queue:videoDataOutputQueue];

        if ( [session canAddOutput:videoDataOutput] )
            [session addOutput:videoDataOutput];
        [[videoDataOutput connectionWithMediaType:AVMediaTypeVideo] setEnabled:NO];

        effectiveScale = 1.0;
        previewLayer = [[AVCaptureVideoPreviewLayer alloc] initWithSession:session];
        [previewLayer setBackgroundColor:[[UIColor blackColor] CGColor]];
        [previewLayer setVideoGravity:AVLayerVideoGravityResizeAspect];
        CALayer *rootLayer = [previewView layer];
        [rootLayer setMasksToBounds:YES];
        [previewLayer setFrame:[rootLayer bounds]];
        [rootLayer addSublayer:previewLayer];
        [session startRunning];
    }

bail:
    {

        if (error) {
            UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:[NSString stringWithFormat:@"Failed with error %d", (int)[error code]]
                                                                message:[error localizedDescription]
                                                               delegate:nil 
                                                      cancelButtonTitle:@"Dismiss" 
                                                      otherButtonTitles:nil];
            [alertView show];

            [self teardownAVCapture];
        }
    } 
```

# android - 导出 apk 和 eclipse 的 bin 文件夹中生成的构建 apk 有什么区别

> ID：15074365
> 
> 赞同：2
> 
> 时间：2013-02-25T18:59:23.673
> 
> 标签：android

我阅读[了 bin 文件夹中的 apk 文件和通过 Eclipse 中的 Export 选项创建的 apk 文件有什么区别？](https://stackoverflow.com/questions/14709417/what-is-the-difference-between-the-apk-file-in-the-bin-folder-and-the-apk-file-c)但我想知道导出 apk 和在 eclipse 的 bin 文件夹中生成的构建 apk 在性能上是否有任何差异

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T19:07:37.643

ProGuard 仅在导出 APK 上运行，[如此评论](https://stackoverflow.com/a/14709594/1676363)中对您的链接问题所述。

ProGuard 优化，如[本文所述](http://www.androidengineer.com/2010/07/optimizing-obfuscating-and-shrinking.html)，**可以**通过一些优化来提高应用程序的速度，但主要用于减小大小（因为 ProGuard 可以去除未使用的函数等）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T19:03:58.830

如果您遵循指南并将所有调试语句包含在包装器中，则性能会有非常小的差异，例如：

```
if(BuildConfig.DEBUG) {
    //log
} 
```

即使你有，性能差异对人类来说也可以忽略不计。

除此之外，唯一的区别在于用于签署 apk 的密钥库和`BuildConfig.DEBUG`布尔值。

导出 apk 还会在其上运行[ProGuard](http://developer.android.com/tools/help/proguard.html)工具，该工具可用于混淆和清理代码和包含的库。这可能会导致性能略有提高和/或 apk 文件大小减小。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T19:04:33.963

bin目录下生成的apk主要用于调试目的。您的`BuildConfig.DEBUG`变量仍设置为 true，因此如果您附加了任何日志记录或调试消息，它们将执行。导出时，您的 apk`BuildConfig.DEBUG`设置为 false，跳过日志记录和调试消息。它还通过 proguard 运行您的 apk，如果配置正确，它可以删除未使用/无法访问的代码和库依赖项，如果您愿意，还可以混淆您的应用程序。最后，您将拥有一个更精简、更高效的 apk。

# google-maps-api-3 - 多边形完成无法显示 v3 的经纬度值

> ID：15074368
> 
> 赞同：0
> 
> 时间：2013-02-25T18:59:31.267
> 
> 标签：google-maps-api-3

我正在从 V2 gmap 迁移到 V3。我需要分别绘制折线、多边形和点来标记地理围栏区域。在我的 v2 绘图完成后，我会弹出一个窗口并添加必要的详细信息并能够保存到数据库中。在这里，我设法使用了绘图工具，现在我有了这个功能。未显示 lat 和 long 值的问题，因此我无法显示我的信息窗口对此的任何帮助。我需要折线和标记。

示例代码。

```
 var points = e.getPath();
    alert("POL COMPLETE"+points.length);
    var latlngbounds = new google.maps.LatLngBounds();

     for (var i =0; i < points.length; i++) {
                var xy = points.getAt(i);
                alert("Coordinate: " + i + "<br />" + xy.lat() +"," + xy.lng());
                latlngbounds.extend(points(i)); 
     }

    alert("CS : "+latlngbounds.getCenter());
var contentString="TESTTT";
         var infowindow = new google.maps.InfoWindow({
    content: contentString
});
          infowindow.setPosition(latlngbounds.getCenter());
        infowindow.open(map);

              var newShape = e.overlay;
              selectedShape = newShape;

            google.maps.event.addListener(infowindow,'closeclick',function(){
           alert("TEST");
           selectedShape.setMap(null); //removes the marker
   // then, remove the infowindows name from the array
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T23:24:00.887

多边形没有`latLng`- 属性。它确实有一个路径，`e.getPath()`用来访问这个路径。

对于折线也使用`e.getPath()`和标记使用`e.getPosition()`

# javascript - 将 Javascript 元素调整为浏览器大小

> ID：15074378
> 
> 赞同：0
> 
> 时间：2013-02-25T18:59:54.767
> 
> 标签：javascript, css

我有一个 javascript adplayer 脚本，我想在浏览器窗口大小更改时动态调整其大小。我该怎么做？

```
 <script type="text/javascript">
    var rnd = window.rnd || Math.floor(Math.random()*10e6);
    var pid155420 = window.pid155420 || rnd;
    var plc155420 = window.plc155420 || 0;
    var abkw = window.abkw || '';
    var absrc =         'http://servedby.myexampledomain.com/adserve/;ID=162421;size=468x60;setID=155420;type=js;kw='        +abkw+';pid='+pid155420+';place='+(plc155420++)+';rnd='+rnd+'';
    document.write('<scr'+'ipt src="'+absrc+'" type="text/javascript"></scr'+'ipt>');
    </script>
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T19:01:34.250

将事件处理程序附加到 window.resize 事件。在 jQuery 中，如下所示。

```
$(window).resize(function() {

    var currentWindowWidth = $(window).width();
    var currentWindowHeight = $(window).height();
    // do stuff with these variables
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T19:03:52.713

由于有人已经提供了 jQuery 答案，但没有任何迹象表明实际上正在使用 jQuery ....

```
<script type="text/javascript">
    function setShtuff(){
        var rnd = window.rnd || Math.floor(Math.random()*10e6);
        var pid155420 = window.pid155420 || rnd;
        var plc155420 = window.plc155420 || 0;
        var abkw = window.abkw || '';
        var absrc = 'http://servedby.myexampledomain.com/adserve/;ID=162421;size=468x60;setID=155420;type=js;kw='        +abkw+';pid='+pid155420+';place='+(plc155420++)+';rnd='+rnd+'';
        document.write('<scr'+'ipt src="'+absrc+'" type="text/javascript"></scr'+'ipt>');
    }

    window.onload = setShtuff;
    window.onresize = setShtuff;
</script> 
```

[你可以在这里看到更完整的解释。](https://developer.mozilla.org/en-US/docs/DOM/window.onresize)

# mysql - 需要帮助创建 MySQL 视图、复杂连接

> ID：15074385
> 
> 赞同：0
> 
> 时间：2013-02-25T19:00:20.267
> 
> 标签：mysql, join, view, joomla

所以，在 joomla 中有几个表：

```
1) users - uid, username, email
2) groups - gid, title
3) user_group_map - uid, gid 
```

所以，我想要做的是创建一个视图，让我更容易编写 SQL 来查找某些组中的用户，而不是其他组。

所以，我在想的是创建一个视图，它从用户表中提取 uid、用户名、电子邮件，并为每个组标题都有一个 bool 字段，即 user_group_map 表中是否有该 uid/gid 的条目。

有道理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T19:08:15.363

是的，你可以这样做

```
SELECT uid, username, email, CASE WHEN IFNULL(ug.uid,0)=0 THEN '0' ELSE '1' END
FROM user u
LEFT JOIN user_group_map  ug
ON ug.uid = u.uid, groups g 
```

它看起来像这样，如果用户在组中，它将返回 1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T19:08:21.753

这是一个假设您有两个变量“$inlist”和“$notinlist”的查询。

```
select u.*
from user_group_map ug join
     users u
     on u.uid = ug.uid join
     groups g
     on ug.gid = g.gid
group by u.uid
having sum(case when $inlist like concat('%', g.title, '%') then 1 else 0 end) =
           length($inlist) - length(replace($inlist, ',', '') and
       sum(case when $notinlist like concat('%', g.title, '%') then 1 else 0 end) = 0 
```

这假定所有组的名称中都没有逗号。

我没有测试过这个 SQL，所以它可能有语法错误。

# php - PHP Post在里面填充文本

> ID：15074388
> 
> 赞同：-2
> 
> 时间：2013-02-25T19:00:27.553
> 
> 标签：php, post, text, input, fill

# [多米尼克斯/process.php](http://pastebin.com/qwSA6MmS)

这是一个域注册脚本

这是可用域的输出，旁边有一个**注册按钮**

```
echo
   '<h5 class="available">
       <span>Available</span>
       ' . $domain. '<b>' . $extension .'</b> is available!
    </h5>
   <a href="register-form.php">Register</a>'; 
```

那`<a href="register-form.php">Register</a>`应该发送 register-form.php 选择的域和扩展信息，并将其填写在文本输入中

## 注册-form.php

包含`<input id="domain" type="text" />`和 的公式需要用上面提到的函数 /\ 填充，同时具有域和扩展名

完整的 process.php 代码可通过单击此问题的标题获得，/\ 以上

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T19:03:25.243

由于您没有使用[**表单**](http://www.w3.org/TR/html401/interact/forms.html)- 单击该按钮将生成一个没有 POST 参数的简单重定向。如果您想将值传递给您的页面，您应该执行以下操作：

```
echo   '<h5 class="available">
           <span>Available</span>
           <b>'.$domain . $extension . '</b> is available!
    </h5>
    <form action="register-form.php" method="GET">
    Domain: <input id="domain" type="text" value="' . $domain . $extension . '"/>
    <input type="submit" value="Submit">
    </form>'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T19:04:28.733

您可以“填写”您的输入字段`value="your value here"`

您可以使用一些 GET 变量填充您的输入字段服务器端，如下所示：`value="<?php echo $variable;?>"`

现在由您决定如何获取注册按钮以将 GET 变量发送到注册 form.php。

尝试谷歌搜索，因为这是基本知识；你需要向我们展示你自己的*一些*努力。

**编辑**您可以使用上述表格进行操作，但这不是唯一的方法。您可以将“注册”文本后面的链接更改为`register-form.php?ext=domainA.com`：

```
echo
'<h5 class="available">
   <span>Available</span>
   ' . $domain. '<b>' . $extension .'</b> is available!
</h5>
<a href="register-form.php?ext='.$domain.$ext.'">Register</a>'; 
```

在您的其他页面中，您应该执行以下操作：

```
$url = do_some_type_checkingAndChecks($_GET['ext']);
<input id="domain" type="text" value='<?php echo $url;?>'/> 
```

# javascript - 使用从 Javascript 派生的变量到 ASP 标记中

> ID：15074390
> 
> 赞同：0
> 
> 时间：2013-02-25T19:00:35.160
> 
> 标签：javascript, asp.net

我在使用从 Javascript 派生的变量到 ASP 标记时遇到了困难。

```
<script language="javascript"> 
    if (arg) 
    {
        var text_box_to_fill = arg.sendValue_Code;                  
        document.getElementById( document.getElementById("<%= "+text_box_to_fill+".clientID %>").value = selected_libelle_value;
    }
</script> 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T19:08:17.820

不知道为什么有重复的“document.getElementById”代码引用，但你只能以这种方式从服务器到客户端。所以它会是：

```
<script language="javascript"> 
    if (arg) 
    {
        var text_box_to_fill = arg.sendValue_Code;                  
        document.getElementById("<%= text_box_to_fill.ClientID %>").value = selected_libelle_value;
    }
</script> 
```

**编辑：**请注意，您必须将脚本与“text_box_to_fill”的来源放在同一页面或控件中。如果您在页面中有此脚本，并且文本框在用户控件中，那将不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T19:11:26.070

`text_box_to_fill`在浏览器中定义客户端，而在服务器上评估 <% %> 标记。无法从服务器代码中引用 javascript 变量。

# python - Python 多线程 XMLRPC 服务器 (?)

> ID：15074393
> 
> 赞同：4
> 
> 时间：2013-02-25T19:00:46.210
> 
> 标签：python, multithreading, simplexmlrpcserver

基本上我想在单独的线程中或与我的其他代码一起运行我的 xmlrpc 服务器，但是，`server.serve_forever()`在此函数之后我无法让我的另一个代码运行。似乎`server.serve_forever()`永远在那里运行。

```
self.LocalServer = SimpleThreadedXMLRPCServer(("localhost",10007))
self.LocalServer.register_function(getTextA) #just return a string
self.LocalServer.serve_forever()
print "I want to continue my code after this..."
.... another code after this should running together with the server 
```

我尝试了多线程概念，但这里仍然没有运气。基本上我想与我的其余代码一起运行 xmlrpc 服务器。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-25T21:00:56.697

您可以创建一个`ServerThread`类来封装您的 XML-RPC 服务器并在线程中运行它：

```
class ServerThread(threading.Thread):
    def __init__(self):
         threading.Thread.__init__(self)
         self.localServer = SimpleThreadedXMLRPCServer(("localhost",10007))
         self.localServer.register_function(getTextA) #just return a string

    def run(self):
         self.localServer.serve_forever() 
```

您可以通过以下方式使用此类：

```
server = ServerThread()
server.start() # The server is now running
print "I want to continue my code after this..." 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T14:01:27.937

我想做和你一样的事情，我就是这样做的。

```
server = SimpleXMLRPCServer(('127.0.0.1', 9000), logRequests=True, allow_none=True)
server.register_instance(ServerTrial()) 
server.register_introspection_functions()
server.register_multicall_functions()
server_thread = threading.Thread(target=server.serve_forever)
server_thread.start()
print'This will be printed' 
```

# python - PyUSB dev.set_configuration()

> ID：15074394
> 
> 赞同：3
> 
> 时间：2013-02-25T19:00:52.820
> 
> 标签：python, ubuntu, python-2.7, usb, pyusb

我正在尝试使用 python 库 PyUSB 将数据发送到 USB 记忆棒。我正在使用的代码如下：

```
import usb.core
import usb.util

# find our devices
#dev = usb.core.find(idVendor=0xfffe, idProduct=0x0001)
dev = usb.core.find(idVendor=0x090c, idProduct=0x1000)

# was it found?
if dev is None:
    raise ValueError('Device not found')

# set the active configuration. With no arguments, the first
# configuration will be the active one
dev.set_configuration()

# get an endpoint instance
cfg = dev.get_active_configuration()
interface_number = cfg[(0,0)].bInterface_number
alternate_setting = usb.control.get_interface(interface_number)
intf = usb.util.find_descriptor(
    cfg, bTnerfaceNumber = interface_number,
    bAlternateSettings = alternate_setting
)

ep = usb.util.find_descriptor(
    intf,
    # match the first OUT endpoint
    custom_match = \
    lambda e:
        usb.util.endpoint_direction(e.bEndpointAddress) == \
        usb.util.ENDPOINT_OUT
)

assert ep is not None

# write the data
ep.write('test') 
```

但是我似乎收到以下错误：

```
Traceback (most recent call last):
  File "/home/usman/Desktop/c_code/libusb_test_data/pyusb_code/send_data_rev_one.py", line 14, in <module>
    dev.set_configuration()
  File "/usr/local/lib/python2.7/dist-packages/usb/core.py", line 554, in set_configuration
    self._ctx.managed_set_configuration(self, configuration)
  File "/usr/local/lib/python2.7/dist-packages/usb/core.py", line 91, in managed_set_configuration
    self.managed_open()
  File "/usr/local/lib/python2.7/dist-packages/usb/core.py", line 70, in managed_open
    self.handle = self.backend.open_device(self.dev)
  File "/usr/local/lib/python2.7/dist-packages/usb/backend/libusb1.py", line 494, in open_device
    _check(_lib.libusb_open(dev.devid, byref(handle)))
  File "/usr/local/lib/python2.7/dist-packages/usb/backend/libusb1.py", line 403, in _check
    raise USBError(_str_error[ret], ret, _libusb_errno[ret])
USBError: [Errno 13] Access denied (insufficient permissions) 
```

有人可以帮我解决这个错误并告诉我如何解决它

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T02:21:43.253

I just realized from the tags that you are using Ubuntu. In Ubuntu USB device permissions are tied to the USB device numbers. When Ubuntu ships it comes with global permissions for some standard devices (e.g. flash drives) so that non-root users can use these. However, it does not globally unlock USB devices because some USB devices could be harmful. Please see [this post](http://ubuntuforums.org/showthread.php?t=901891) to understand how to modify the Ubuntu configuration (in particular /etc/udev/rules.d/40-basic-permissions.rules) in order to allow your device to be used by non-root users.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-30T18:34:07.530

you have to do - on ubuntu:

```
sudo usermod -a -G uucp YOURUSER
sudo usermod -a -G dialout YOURUSER 
```

and then

```
sudo echo "SUBSYSTEM==\"usb\", ATTR{idVendor}==\"YOURVENDOR\", ATTR{idProduct}==\"YOURID\", MODE=\"666\"">/etc/udev/rules.d/99-YOURDEVICENAME.rules 
```

in Your example:

```
 sudo echo "SUBSYSTEM==\"usb\", ATTR{idVendor}==\"090c\", ATTR{idProduct}==\"1000\", MODE=\"666\"">/etc/udev/rules.d/99-YOURDEVICENAME.rules 
```

# r - 重塑 data.frame

> ID：15074396
> 
> 赞同：0
> 
> 时间：2013-02-25T19:00:55.103
> 
> 标签：r, reshape, reshape2

我有下表

```
structure(list(Compound = structure(c(1L, 2L, 3L, 1L, 1L, 3L), .Label = c("Nap", 
"Phe", "tre"), class = "factor"), Area = c(17197669L, 19464754L, 
35792660L, 10097291L, 348395L, 2576352L), Samples = structure(c(1L, 
1L, 1L, 2L, 3L, 2L), .Label = c("a1", "a2", "a3"), class = "factor")), .Names = c("Compound", 
"Area", "Samples"), class = "data.frame", row.names = c(NA, -6L
)) 
```

我想重新排序

```
structure(list(Compound = structure(1:3, .Label = c("Nap", "Phe", 
"tre"), class = "factor"), a1 = c(17197669L, 19464754L, 35792660L
), a2 = c(10097291L, 0L, 2576352L), a3 = c(348395L, 0L, 0L)), .Names = c("Compound", 
"a1", "a2", "a3"), class = "data.frame", row.names = c(NA, -3L
)) 
```

有什么建议吗？我不知道如何开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T19:04:46.987

如果`data`是你的第一张桌子，你可以从这个开始：

```
reshape(data,idvar="Compound",timevar="Samples",direction="wide") 
```

详情请参阅`?reshape`。

# c# - 使用字节 [24] 长度的 BLOWFISH 创建加密密码

> ID：15074398
> 
> 赞同：0
> 
> 时间：2013-02-25T19:01:01.033
> 
> 标签：c#, encryption, byte, blowfish

我需要为服务器创建一个加密密码。此服务器使用 Blowfish 加密进行加密。现在这里是我的信息：

1.  密钥：“12345678abcdefgmypassword”
2.  块大小：8 字节 - 64 位
3.  结束字节：字节[24]

我要加密的数据是“ABCDEFG12345678”。

我遇到的问题是获得最大只有 24 个字节的加密，而我每次得到 48 个字节。我认为我最大的问题是因为我无法理解应该发生的事情！

这是我的一些代码：

```
>  BlowFish b = new BlowFish("12345678abcdefgmypassword");
>  Here I get the key array of byte[12]
>  plainText = "0123456789ABCDEF";
>  cipherText = b.Encrypt_CBC(plainText);
>  var encodedString = System.Text.Encoding.ASCII;
>  byte[] myByteArray = encodedString.GetBytes(cipherText); 
```

现在我的问题是： 1\. 块大小是多少？我该如何使用它？2\. 如何获得低于或等于 byte[24] 的字节数？

我真的希望你们中的一些人可以帮助我的大脑开始朝着正确的方向前进。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T20:34:44.820

您可以在这里查看源代码[http://www.schneier.com/code/blowfish.cs](http://www.schneier.com/code/blowfish.cs)它可以帮助您更好地理解它是如何工作的。还有一本关于密码学的优秀书籍，解释了这些算法如何工作的细节，是由 schneier 应用的密码学，在这里可以找到[http://www.amazon.com/gp/aw/d/0471117099/](https://rads.stackoverflow.com/amzn/click/com/0471117099)

编辑：

好吧，我有时间玩这个，我想我知道你遇到的问题是什么。您最终得到 48 个字节的数据而不是 24 个字节的原因是因为您试图操纵 48 个字节长的密文的字符串表示，以便以 ASCII 显示整个密文。您需要做的就是将 ascii 字符串表示形式转换为字节数组。问题是（您在正确的轨道上）您必须以与 encrypt 方法相同的方式执行此操作。这是执行此操作的代码：

```
class Program
{
    private static byte[] HexToByte(string hex)
    {
        byte[] r = new byte[hex.Length / 2];
        for (int i = 0; i < hex.Length - 1; i += 2)
        {
            byte a = GetHex(hex[i]);
            byte b = GetHex(hex[i + 1]);
            r[i / 2] = (byte)(a * 16 + b);
        }
        return r;
    }

    private static byte GetHex(char x)
    {
        if (x <= '9' && x >= '0')
        {
            return (byte)(x - '0');
        }
        else if (x <= 'z' && x >= 'a')
        {
            return (byte)(x - 'a' + 10);
        }
        else if (x <= 'Z' && x >= 'A')
        {
            return (byte)(x - 'A' + 10);
        }
        return 0;
    }

    static void Main(string[] args)
    {
        BlowFish b = new BlowFish("12345678abcdefgmypassword");
        string plainText = "ABCDEFG12345678";
        string cipherText = b.Encrypt_CBC(plainText);
        MessageBox.Show(cipherText);
        plainText = b.Decrypt_CBC(cipherText);
        byte[] myByteArray = HexToByte(cipherText);
        MessageBox.Show(plainText);

    }
} 
```

HexToByte 和 GetHex 方法直接从 Blowfish 类复制而来，该类在加密和解密时用于明文。请注意，在字符串的 CBC 模式下，IV（初始化向量）被复制到字符串的前面，因此前 8 个字节是 IV。在此代码的示例运行中，这是我得到的。

cipherText 在 ascii 十六进制表示中是“2866ccafa647d82e7c74e135dbdcb9060cefea39b9b84964”，myByteArray 是相同的，除了它的字节 [24]。

我希望这可以帮助男人好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T19:07:36.380

[块大小](http://en.wikipedia.org/wiki/Block_cipher)是块密码一次处理的数据量。例如，如果加密算法的块大小为 128 位，那么在 ASCII 中将是 16 个字符。

要使用块大小，您需要将“纯文本”（尚未加密的文本）分段为 64 位块（在您的情况下）。然后通过加密循环每个块，并连接输出。（如果您正在实施[ECB](http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation#Electronic_codebook_.28ECB.29)加密，则不建议这样做）。

正如我上面所说，您需要将文本分成块。最后一个块可能小于必要的块大小，并且需要[padding](http://en.wikipedia.org/wiki/Padding_%28cryptography%29)。

希望这能让你走上正确的道路:)

# visual-studio-2010 - Windows XP 和 Windows 98 中的 Microsoft Windows SDK 文件夹在哪里？

> ID：15074402
> 
> 赞同：14
> 
> 时间：2013-02-25T19:01:12.753
> 
> 标签：visual-studio-2010, windows-xp, winapi

我必须在我的代码中使用`Microsoft SDK`目录路径。`c#`在`Win 7`我可以通过以下行（硬编码）轻松获得它：

```
string path = Path.GetFullPath("C:\\Program Files (x86)\\Microsoft SDKs\\Windows\\v7.0A\\Bin"); 
```

`win xp`or中是否存在任何类型的路径`win 98`？`netsh.exe`出现在哪里`xp`or `98`？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2018-06-02T23:35:03.667

**应该注意的是，在您阅读本文时，下面所说的任何内容都可能已经改变**。Windows SDK 的结构和内容随着时间的推移而发展，并且可能会继续发展。

Windows SDK 以其所针对的 Windows 版本命名。例如，目前当前的 SDK 被命名为**The Windows 10 SDK for Windows 10, version 1803**。它针对 Windows 10 版本 1803，也称为**Windows 10 April 2018 Update**。该版本的 Windows 的版本号是**10.0.17134**。

Windows SDK 的默认安装位置`\Program Files\Windows Kits\10`在 32 位系统和`\Program Files (x86)\Windows Kits\10`64 位系统上。

安装文件夹中有许多子文件夹 - 例如 , ,`include`等。在每个子文件夹中都有其他以目标 Windows 版本号命名的子文件夹 - 例如,等。`lib``bin``10.0.17134.0``10.0.16299.0`

`mlgen.exe`因此，在磁盘驱动器上分配有字母 C 的系统上，工具的完整路径是`C:\Program Files (x86)\Windows Kits\10\bin\10.0.17134.0\x86`32 位代码文件和`C:\Program Files (x86)\Windows Kits\10\bin\10.0.17134.0\x64`64 位代码文件。

从旧的 SDK 安装看来，面向**Windows 10 周年版**（版本**10.0.4393**）的 SDK 没有使用“Windows 版本号”子文件夹。

以前的 SDK 以 Windows 8`\Program Files (x86)\Windows Kits\8.0`和 Windows 8.1为目标`\Program Files (x86)\Windows Kits\8.1`。那些早期版本的 SDK 也不使用“Windows 版本号”子文件夹（至少我周围的那些不使用）。

再往前追溯，SDK 过去常常安装到一个名为`Microsoft SDKs`而不是`Windows Kits`. 例如，**Microsoft Windows SDK for Windows 7 (7.1)**默认安装到`\Program Files\Microsoft SDKs\Windows\v7.1\`或`\Program Files (x86)\Microsoft SDKs\Windows\v7.1\`.

当然，任何执行安装的人都可能选择使用不同的安装文件夹。

理想情况下，SDK 路径不应在任何程序中硬编码，因为它可能会因不同的 SDK 版本和不同的系统而改变。

问题[**如何以编程方式检测和定位 Windows 10 SDK？**](https://stackoverflow.com/questions/35119223/how-to-programatically-detect-and-locate-the-windows-10-sdk)提供了一些替代方案。

# c++ - 移动语义和结构

> ID：15074404
> 
> 赞同：10
> 
> 时间：2013-02-25T19:01:26.387
> 
> 标签：c++, c++11

我有一个功能

```
struct foo {
    std::vector<int> v;
};

foo func(); 
```

*从函数返回时， foo*中的向量会被移动或复制吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-25T19:06:28.210

**它将被移动**。(*)

由于您没有为您的`foo`类提供显式移动构造函数，编译器将为您隐式生成一个为您的类的所有成员调用移动构造函数（如果可用）。由于`std::vector`定义了一个移动构造函数，它将被调用。

根据 C++11 标准的第 12.8/15 段：

> 非联合类 X 的隐式定义的复制/移动构造函数执行其基类和成员的成员复制/移动。[...]

另请注意，当按值返回对象时，允许编译器省略对类的复制/移动构造函数的调用。这种优化称为[（命名）返回值优化](http://en.wikipedia.org/wiki/Return_value_optimization)。

(*)*我在这里假设您的用例是创建一个内部具有自动存储的本地对象`foo()`并将其返回。*

# django - 如何使用一个 Django 应用程序对其他 Django 应用程序进行身份验证？

> ID：15074405
> 
> 赞同：2
> 
> 时间：2013-02-25T19:01:28.973
> 
> 标签：django, authentication

由于我不会让您感到厌烦的原因，我在不同版本中安装了不同的 Django，但我希望他们将身份验证委托给另一个 Django。（我继承了这一点，我必须承认我在 Django 中几乎没有背景。）

具体来说，我有两个运行 1.4 系列的 Django 项目和一个在 Django 1.5 中使用自定义用户模型的新项目。它们在物理上是分开的，1.4 版本不能升级或整理成一个整洁的单项目、多应用程序包。我知道这看起来很奇怪。

我希望 1.4 应用程序从 1.5 应用程序获取所有用户信息和身份验证。似乎有很多方法可以做到这一点，包括 Oauth，但出于官僚主义的原因，我需要对现有 1.4 应用程序进行最少更改的解决方案。任何想法最好通过一些更改来完成这一点？似乎必须有一个简单的方法，但我还没有找到它。

# iphone - 如何在 iPhone 的 UIGraphicsImageContext 中绘制带有属性（特别是描边和填充颜色）的文本

> ID：15074412
> 
> 赞同：6
> 
> 时间：2013-02-25T19:01:46.740
> 
> 标签：iphone, ios, objective-c, xcode, image

我正在尝试创建一个文本图像以放在另一个图像之上。文本需要有白色填充和黑色描边轮廓。我正在使用objective-C，它适用于iPhone。我可以让文字显示出来；但是，我无法弄清楚如何让笔触和填充颜色发生变化。

`self.bigImage`是指向我的 xib 中的 UIImage 的指针。

这是我的代码：（此代码有效......我希望它有一个带有白色填充的黑色笔触）

```
- (IBAction)submitBtn:(id)sender {

    UIFont *myfont = [UIFont fontWithName:@"myfont" size:32];

    UIImage *textImage = [self imageFromText:@"teststring" font:myfont];
    CGSize finalSize = [self.bigImage.image size];
    CGSize textSize = [textImage size];

    UIGraphicsBeginImageContext(finalSize);
    [self.bigImage.image drawInRect:CGRectMake(0,0, finalSize.width, finalSize.height)];
    [textImage drawInRect:CGRectMake(0, 0, textSize.width, textSize.height)];

    UIImage *newImg = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    self.bigImage.image = newImg;
}

-(UIImage *)imageFromText:(NSString *)text font:(UIFont *)font {
    CGSize size  = [text sizeWithFont:font];

    // check if UIGraphicsBeginImageContextWithOptions is available (iOS is 4.0+)
    if (UIGraphicsBeginImageContextWithOptions != NULL)
        UIGraphicsBeginImageContextWithOptions(size,NO,0.0);
    else
        // iOS is < 4.0
        UIGraphicsBeginImageContext(size);

    [text drawAtPoint:CGPointMake(0.0, 0.0) withFont:font];

    // transfer image
    UIImage *Image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return Image;
} 
```

我可以让它渲染一个或另一个。如果我添加此代码，我会得到一个黑色中风：

```
CGContextSetTextDrawingMode(UIGraphicsGetCurrentContext(), kCGTextStroke);
CGContextSetLineWidth(UIGraphicsGetCurrentContext(), 2);
CGContextSetStrokeColorWithColor(UIGraphicsGetCurrentContext(), [[UIColor blackColor] CGColor]); 
```

如果我添加此代码，我会得到一个白色字体：

```
CGFloat fontColor[4] = {255,255,255,1};
CGContextSetFillColor(UIGraphicsGetCurrentContext(), fontColor); 
```

但是如果我添加两个片段，我会得到黑色笔触，但字体颜色是透明的......

**已解决：**感谢“Brane”的一点帮助：

我需要在以下代码之前添加这段代码`drawAtPoint`：

```
CGFloat fontColor[4] = {255,255,255,1};
CGContextSetFillColor(UIGraphicsGetCurrentContext(), fontColor);
CGContextSetTextDrawingMode(UIGraphicsGetCurrentContext(), kCGTextFillStroke);
CGContextSetLineWidth(UIGraphicsGetCurrentContext(), 2);
CGContextSetStrokeColorWithColor(UIGraphicsGetCurrentContext(), [[UIColor blackColor] CGColor]); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-01-26T19:35:59.043

我修复了：

```
[theText drawAtPoint:CGPointMake(x, y)
                  withAttributes:@{NSFontAttributeName:[UIFont fontWithName:@"Helvetica" size:8], NSForegroundColorAttributeName:[UIColor whiteColor] }]; 
```

最后！！！

感谢列维

[列维](https://stackoverflow.com/questions/13894196/drawing-colored-text-in-uiviews-drawrect-method)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T19:36:43.193

两个问题要解决。

首先，为了绘制背景，不能依赖`drawAtPoint:withFont:`因为它不绘制背景。

使用 CGContextFillRect 绘制背景颜色：

```
[[UIColor whiteColor] set];
CGContextFillRect( UIGraphicsGetCurrentContext(), CGRectMake( 0, 0, size.width, size.height ) 
```

其次，您需要使用设置描边颜色

```
[[UIColor blackColor] set]; 
```

打电话之前`[text drawAtPoint:CGPointMake(0.0, 0.0) withFont:font];`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-25T21:54:16.357

我通过修改 Brane 的帖子解决了这个问题......我需要先添加这段代码`drawAtPoint`......

```
CGFloat fontColor[4] = {255,255,255,1};
CGContextSetFillColor(UIGraphicsGetCurrentContext(), fontColor);
CGContextSetTextDrawingMode(UIGraphicsGetCurrentContext(), kCGTextFillStroke);
CGContextSetLineWidth(UIGraphicsGetCurrentContext(), 2);
CGContextSetStrokeColorWithColor(UIGraphicsGetCurrentContext(), [[UIColor blackColor] CGColor]); 
```

# javascript - 在不使用 onchange 属性的情况下获取选定的值

> ID：15074415
> 
> 赞同：1
> 
> 时间：2013-02-25T19:02:01.497
> 
> 标签：javascript, select, onchange, selectedvalue

我想要相同的结果而不使用该`onchange`属性。一些想法？

这是HTML：

```
<select onchange="filtro(this)" id="tipo" name="noticia/conteudo/tipo">
    <option  value="Layout1">Layout1</option>
    <option value="Layout2">Layout2</option>
    <option value="Layout3">Layout3</option>
    <option value="Layout4">Layout4</option>
    <option value="Layout5">Layout5</option> 
</select> 
```

这是JS：

```
function filtro(a) {
    var x = (a.value || a.options[a.selectedIndex].value);
    alert(x);
    if (x == "Layout4"){
        alert('test4');
    } 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T19:10:50.990

您可以添加一个事件侦听器以避免具有 onchange 属性。

HTML：

```
<select id="tipo" name="noticia/conteudo/tipo">
    <option value="Layout1">Layout1</option>
    <option value="Layout2">Layout2</option>
    <option value="Layout3">Layout3</option>
    <option value="Layout4">Layout4</option>
    <option value="Layout5">Layout5</option> 
</select> 
```

JavaScript：

```
function filtro(a) {
    var x = (a.value || a.options[a.selectedIndex].value);
    alert(x);
    if (x == "Layout4"){
        alert('test4');
    } 
}

var sel = document.getElementById('tipo');
sel.addEventListener('change', function() { filtro(sel) }, false); 
```

JSFiddle：http: [//jsfiddle.net/jeffshaver/HfmWV/7/](http://jsfiddle.net/jeffshaver/HfmWV/7/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T19:09:06.243

你可以轻松地做到这一点

```
var e = document.getElementById("tipo");
var tipoValue = e.options[e.selectedIndex].value; 
```

将使tipoValue 成为所选选项的值。如果您想获取文本，可以使用以下方法：

```
var e = document.getElementById("tipo");
var tipoText = e.options[e.selectedIndex].text; 
```

一般来说，我的建议是考虑引入一些 javascript 库，例如[jQuery](http://jquery.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T19:06:42.023

您只能在没有属性的 js 中执行此操作

```
document.getElementById("id").onchange=function(){ ... }; 
```

# scheme - “REPL 中的评估”命令对 SublimeREPL 中的方案没有做任何事情

> ID：15074417
> 
> 赞同：6
> 
> 时间：2013-02-25T19:02:12.643
> 
> 标签：scheme, sublimetext2, sublimerepl

我正在尝试将 SublimeREPL 与 Sublime Text 2 一起用作 Scheme 环境。我安装了 Gauche，可以成功启动 REPL 窗口并从中运行代码。但是，我不知道如何在插件中使用“Eval in REPL”或“Transfer to REPL”命令。

当我执行命令（通过快捷方式或从菜单）时，我可以在控制台中看到该命令正在运行，但它实际上并没有做任何事情。这与我是否已经打开了 REPL 窗口无关。我怀疑它无法弄清楚它应该使用哪个外部 id，但不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-18T16:12:54.463

这适用于我在 Linux 上使用 Sublime 2.0.2 和以下 Sublime 包：

*   崇高REPL 2.1.1
*   左图 2013.04.16.05.32.34
*   方案 2013.03.04.21.30.59

请注意，这些是可通过 Package Control 安装的 Sublime 软件包：您还需要在本地系统上安装真正的 Gauche 解释器。

我需要重新启动几次。将 Gauche 代码保存为 .scm 文件并将缓冲区切换到 Gauche 模式。使用 Tools > SublimeREPL > Scheme > Gauche 启动 REPL，您应该能够自由地评估表达式并将表达式从 Gauche 模式的缓冲区传输到 REPL。

# c# - 如何使用 C# 反转 ms-word 文档中的所有单词？

> ID：15074422
> 
> 赞同：0
> 
> 时间：2013-02-25T19:02:37.770
> 
> 标签：c#, vb.net, ms-word, ms-office, office-interop

文档格式不应更改。除了单词顺序没有任何变化。

文档 ：

```
Word1 word2 word3 word2... -- END OF LINE OR PARAGRAPH
Word5 word1 word5 word4..... 
```

倒车后应该如下

```
1droW 2drow 3drow 2drow... -- END OF LINE OR PARAGHRAPH
5droW 1drow 5drow 4drow..... 
```

我已经有了这个代码来逐字逐句，但我不知道如何在不丢失格式的情况下进行更改。

```
string RT = "";

Word.Application wordObject = new Word.Application();
wordObject.Visible = false;

Word.Document docs = wordObject.Documents.Open(@"D:\ELAHE (J)\a.docx");

String strLine;
bool bolEOF = false;

docs.Characters[1].Select();

int index = 0;
do {

    object unit = Word.WdUnits.wdWord;
    object count = 1;
    wordObject.Selection.MoveEnd(ref unit, ref count);

    wordObject.Selection.InsertBefore("‭");
    strLine = wordObject.Selection.Text;
    RT += ++index + " - " + strLine + "\r\n"; 

    object direction = Word.WdCollapseDirection.wdCollapseEnd;
    wordObject.Selection.Collapse(ref direction);

    if (cnt++ > 100) break;

    if (wordObject.Selection.Bookmarks.Exists(@"\EndOfDoc")) bolEOF = true;
} while (!bolEOF);

docs.Close();
wordObject.Quit();
docs = null;
wordObject = null; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T22:33:41.313

刚刚创建了一个如何完成此操作的示例（C# 5.0，Word Interop v. 15 (Office 2013)）。代码循环遍历每个段落并反转段落中的每个单词。该代码包括对行尾符号 ( `\r`) 的检查，以确保这些符号不会颠倒。

我不能 100% 确定这`\r`是 Word 使用的唯一行尾符号，所以如果您遇到其他类型，例如`\r\n`或类似的东西，也应该相当直接地包括这些检查。

```
var wordApplication = new Application() { Visible = true };
var myDocument = wordApplication.Documents.Open(@"C:\Users\...\my.docx");

for (var i = 1; i <= myDocument.Paragraphs.Count; i++)
{
    var paragraph = myDocument.Paragraphs[i];
    var words = paragraph.Range.Words.Cast<Range>().Select(r => r.Text).ToList();

    // Empty paragraph -> continue
    if(words.Count == 1 && words[0] == "\r")
        continue;

    for (var j = 0; j < words.Count; j++)
    {
        var word = words[j];

        // Should not be reversed
        if(word == "\r")
            continue;

        var reversed = new string(word.Trim().Reverse().ToArray());

        words[j] = (word.EndsWith(" ")) ? reversed + " " : reversed;
    }

    paragraph.Range.Text = string.Join("", words);
} 
```

# php - 从摘录中删除短代码（有代码）

> ID：15074423
> 
> 赞同：2
> 
> 时间：2013-02-25T19:02:37.910
> 
> 标签：php, wordpress, replace

我有这行代码显示主题中的摘录：

```
<p class="desc"><?php echo mb_strimwidth(strip_tags(get_the_content('')), 0, 220, '...'); ?></p> 
```

如何输入此代码以从摘录中删除短代码？

```
$text = preg_replace( '|\[(.+?)\](.+?\[/\\1\])?|s', '', $text); 
```

我刚刚开始切割 PHP，所以我需要一点帮助来解决这个问题。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T21:43:22.513

[**我建议您使用核心 WordPress 函数strip_shortcodes()**](https://codex.wordpress.org/Function_Reference/strip_shortcodes)，而不是重新发明轮子。

```
<p class="desc"><?php echo mb_strimwidth(strip_shortcodes(strip_tags(get_the_content(''))), 0, 220, '...'); ?></p> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-30T10:04:24.273

# 在这种情况下不要使用正则表达式！

REGEX 将从摘录中删除您自己的注释，例如：因此，最好使用内置函数，该函数检测已注册的短代码并将其删除：
**`Hello, on May 27 [1995] , blabla`**

**`strip_shortcodes`**

```
add_filter('the_excerpt','myRemoveFunc'); function myRemoveFunc(){
    return mb_strimwidth(strip_shortcodes(get_the_content()), 0, 220, '...');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-29T22:53:14.433

根据@T.Todua 解决方案发布对我有用的解决方案：

```
add_filter('get_the_excerpt','clean_excerpt');
function clean_excerpt(){

$excerpt = get_the_content();
$excerpt = strip_tags($excerpt, '<a>'); //You can keep or remove all html tags
$excerpt = preg_replace("~(?:\[/?)[^/\]]+/?\]~s", '', $excerpt);

return ($excerpt) ? mb_strimwidth($excerpt, 0, 420, '').new_excerpt_more() : '';
}

function new_excerpt_more($more = '') {
    global $post;
    return '...  <a href="'.get_permalink($post->ID).'" class="readmore">Read More »</a>';
} 
```

我将它分成两个函数，因为我还使用了“更多”过滤器，如下所示：

```
add_filter('excerpt_more', 'new_excerpt_more'); 
```

# java - 如何让 Jersey 使用 Java 序列化？

> ID：15074431
> 
> 赞同：2
> 
> 时间：2013-02-25T19:03:10.010
> 
> 标签：java, jersey, spring-integration

我意识到这有点非 RESTful，但我想使用 Jersey 客户端将 Spring Integration 发送[`GenericMessage`](http://static.springsource.org/spring-integration/api/org/springframework/integration/message/GenericMessage.html)到使用 Java 序列化作为“编组”的 Jersey 服务器。是否有内置或贡献支持，或者我必须编写自己的[MessageBodyReader](http://jersey.java.net/nonav/apidocs/latest/jersey/javax/ws/rs/ext/MessageBodyReader.html) / [Writer](http://jersey.java.net/nonav/apidocs/latest/jersey/javax/ws/rs/ext/MessageBodyReader.html)？我尝试[将客户端请求中的类型设置为](http://jersey.java.net/nonav/apidocs/latest/jersey/com/sun/jersey/api/client/WebResource.html#type%28javax.ws.rs.core.MediaType%29)" [application/x-java-serialized-object"](http://docs.oracle.com/javase/7/docs/api/java/awt/datatransfer/DataFlavor.html#javaSerializedObjectMimeType)和[`MediaType.APPLICATION_OCTET_STREAM_TYPE`](http://jersey.java.net/nonav/apidocs/latest/jersey/javax/ws/rs/core/MediaType.html#APPLICATION_OCTET_STREAM_TYPE)，它只是给出了通常的：

```
ClientHandlerException: A message body writer for Java type,
    class org.springframework.integration.message.GenericMessage,
    and MIME media type, application/x-java-serialized-object, was not found 
```

谷歌和[泽西用户指南](http://jersey.java.net/nonav/documentation/latest/user-guide.html)都奇怪地对这个话题保持沉默。我也接受另一种方法来允许向`GenericMessage`Jersey API 发送任意数据。我不一定要进行序列化。这似乎是处理具有任意有效负载类型的消息的最简单途径。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T21:39:29.080

我仍然没有找到一个，而且显然没有其他人知道，所以我使用[Commons Lang 的 SerializationUtils](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/SerializationUtils.html)编写了自己的快速实现来为我完成这项肮脏的工作：

```
import org.apache.commons.lang.SerializationUtils;
import org.springframework.stereotype.Component;

import javax.ws.rs.core.MediaType;
import javax.ws.rs.core.MultivaluedMap;
import javax.ws.rs.ext.MessageBodyReader;
import javax.ws.rs.ext.MessageBodyWriter;
import javax.ws.rs.ext.Provider;
import java.io.InputStream;
import java.io.OutputStream;
import java.io.Serializable;
import java.lang.annotation.Annotation;
import java.lang.reflect.Type;

/**
 * Created with IntelliJ IDEA.
 * User: ryan
 * Date: 2/25/13
 * Time: 2:07 PM
 */
@Component
@Provider
public class SerializationMessageBodyReaderAndWriter
        implements MessageBodyReader<Serializable>, MessageBodyWriter<Serializable> {
    public static final String APPLICATION_JAVA_SERIALIZED_OBJECT =
            "application/x-java-serialized-object";
    public static final MediaType APPLICATION_JAVA_SERIALIZED_OBJECT_TYPE =
            MediaType.valueOf(APPLICATION_JAVA_SERIALIZED_OBJECT);

    @Override
    public boolean isReadable(Class<?> type,
                              Type genericType,
                              Annotation[] annotations,
                              MediaType mediaType) {
        return mediaType.isCompatible(APPLICATION_JAVA_SERIALIZED_OBJECT_TYPE)
                && Serializable.class.isAssignableFrom(type);
    }

    @Override
    public Serializable readFrom(Class<Serializable> type,
                                 Type genericType,
                                 Annotation[] annotations,
                                 MediaType mediaType,
                                 MultivaluedMap<String, String> httpHeaders,
                                 InputStream entityStream) {
        return (Serializable) SerializationUtils.deserialize(entityStream);
    }

    @Override
    public boolean isWriteable(Class<?> type,
                               Type genericType,
                               Annotation[] annotations,
                               MediaType mediaType) {
        return mediaType.isCompatible(APPLICATION_JAVA_SERIALIZED_OBJECT_TYPE)
                && Serializable.class.isAssignableFrom(type);
    }

    @Override
    public long getSize(Serializable o,
                        Class<?> type,
                        Type genericType,
                        Annotation[] annotations,
                        MediaType mediaType) {
        return -1;
    }

    @Override
    public void writeTo(Serializable o,
                        Class<?> type,
                        Type genericType,
                        Annotation[] annotations,
                        MediaType mediaType,
                        MultivaluedMap<String, Object> httpHeaders,
                        OutputStream entityStream) {
        SerializationUtils.serialize(o, entityStream);
    }
} 
```

# python - GAE Python - 设置 memchache 给出“查询不可调用”

> ID：15074434
> 
> 赞同：0
> 
> 时间：2013-02-25T19:03:18.100
> 
> 标签：python, google-app-engine, memcached

我正在查询我的数据库以获取商店列表，并希望将此列表保存在 memcache 中，因为它在每个页面上都重复使用并且实际上不会更改。代码对我来说似乎很简单，但它给了我以下错误：

```
Traceback (most recent call last):
File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2-2.5.2\webapp2.py", line 1546, in __call__
return response(environ, start_response)
TypeError: 'Query' object is not callable 
```

我的代码是：

```
 shops = memcache.get('shops')
    if shops is not None:
        return shops
    else:
        shops =  Shop.all().filter('active = ', True).order('abbrev')
        memcache.set('shops', shops)
        return shops 
```

任何建议将不胜感激。

**更新**

如果我解释如何使用它的输出，也许会有所帮助。然后我在活动模板中使用 Django 调用此操作的结果，使用 {{ for shop in stores }}。也许我需要在设置 memchache 后再次声明“shops”变量？

**更新2**

然后将变量传递给模板，如下所示：

```
 template_values = {
      'shops': shops,
    }
    self.response.out.write(template.render('templates/home.html', template_values)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T19:17:54.603

使用以下方法缓存查询结果，而不是对实际查询对象进行缓存：

```
# this will cache the first 50 results
memcache.set('shops', shops.fetch(50)) 
```

或者

```
# this will cache all (not recommended if your set is very big)
memcache.set('shops', list(shops)) 
```

* * *

去除多余的，在商店里

```
template_values = {
  'shops': shops
}
self.response.out.write(template.render('templates/home.html', template_values)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T20:39:58.257

问题似乎来自“退货商店”电话，说实话我不知道附加值。如果我像下面这样重写代码，错误就消失了。有什么方法可以检查 memcache 是否真的在工作？

```
shops = memcache.get('shops')
    if shops is not None:
        shops = memcache.get('shops')
    else:
        allshops =  Shop.all().filter('active = ', True).order('abbrev')
        memcache.set('shops', list(allshops))
        shops = memcache.get('shops') 
```

# c++ - C++ 新手，“EXC_BAD_ACCESS”错误我不明白

> ID：15074436
> 
> 赞同：0
> 
> 时间：2013-02-25T19:03:24.230
> 
> 标签：c++, xcode, openframeworks, cellular-automata

我正在尝试将二维元胞自动机从处理转换为 openFrameworks (C++)。我为细胞和生命游戏功能编写了类。应用程序成功构建但立即崩溃并出现以下错误：线程 1：程序收到信号：“EXC_BAD_ACCESS”。

这是我的人生游戏的标题

```
#include "Cell.h"

class GoL {

public:
    GoL();
    void init();
    void generate();
    void display();
    void run();

    int w = 20;
    int cols;
    int rows;

    std::vector<vector<cell> > board;

}; 
```

这是实现：

```
#include "GoL.h"

GoL::GoL() {
    cols = ofGetWidth() / w;
    rows = ofGetHeight() / w;
    board[rows][cols];
    init();
}

void GoL::run() {
    generate();
    display();
}

void GoL::init() {
    for (int i = 0; i < cols; i ++) {
        for (int j = 0; j < rows; j ++) {
            board[i][j] = *new cell(i * w, j * w, w);
        }
    }
}

void GoL::generate() {
    for (int i = 0; i < cols; i ++) {
        for (int j = 0; j < rows; j ++) {
            board[i][j].savePrevious();
        }
    }
    for (int x = 0; x < cols; x ++) {
        for (int y = 0; y < cols; y ++) {
            int neighbours = 0;
            for (int i = -1; i <= 1; i ++) {
                for (int j = -1; j <= 1; j ++) {
                    neighbours += board[(x + i + cols) % cols][(y + j + rows) % rows].previous;
                }
            }
            neighbours -= board[x][y].previous;
            // Rules of Life
            if      ((board[x][y].state == 1) && (neighbours <  2)) board[x][y].newState(0);
            else if ((board[x][y].state == 1) && (neighbours >  3)) board[x][y].newState(0);
            else if ((board[x][y].state == 0) && (neighbours == 3)) board[x][y].newState(1);          
        }
    }
}

void GoL::display() {
    for (int i = 0; i < cols; i ++) {
        for (int j = 0; j < rows; j ++) {
            board[i][j].display();
        }
    }
} 
```

该错误显示在 vector.h 文件、GoL 头文件以及我在 GoL 实现中调用 init() 方法的位置。任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T19:06:38.923

您在这里有一个越界访问，因为向量的大小为 0：

```
board[rows][cols]; 
```

您可以像这样在构造函数初始化列表中初始化向量：

```
GoL::GoL() : cols(ofGetWidth()/w), rows(ofGetHeight()/w), board(rows, std::vector<cell>(cols))
{
} 
```

这将初始化`board`为 size `rows`，并且它的每个元素都是 size 的向量`cols`。然后你可以给它的元素赋值：

```
cell c = ...;
board[i][j] = c; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T19:24:58.967

由于未初始化的向量，您肯定有越界访问。从技术上讲，您的向量已初始化，但仅作为一个空容器，您暗示您应该保留足够的单元格以将其及其包含的向量视为二维数组，因此必须 a) 在循环中添加单元格 b) 使用范围构造函数 c) 使用计算元素数量的构造函数。更多信息可[在此处](http://www.cplusplus.com/reference/vector/vector/vector/)获得。

最好始终确保您的类型在构造函数结束时可用。更喜欢在构造函数初始化列表中初始化你能做的事情，并在任何需要更多逻辑的事情上使用构造函数作用域。如果您的类型不能始终完全构造，请考虑[命名构造函数 idiom](http://www.parashift.com/c++-faq/named-ctor-idiom.html)。基本上，您只是从静态或非成员友元函数返回一个句柄，允许您为不成功的创建返回一个标记值（也就是指针的 N​​ULL）。

听起来您还需要考虑 C++ 类型系统是如何工作的。

除非您的类型“单元格”是某个数据类型的句柄或仅仅是[POD](http://en.wikipedia.org/wiki/Plain_old_data_structure)类型，否则您可能希望在向量中存储对堆分配对象的引用，而不是单元格对象的副本。

如果必须将单元格视为多态类型（您想将其用作基类），则需要在向量中存储某种形式的句柄，例如指针或更好的智能指针。

如果您使用 C++11，您可以使用新的[内置智能指针](http://www.cplusplus.com/reference/memory/)之一，或者您可以随时回退[boost](http://www.boost.org/doc/libs/1_53_0/libs/smart_ptr/smart_ptr.htm)。

关键是您应该更喜欢使用[RAII](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)实践来避免悬空引用。尽管 C++ 没有内置的垃圾收集器，但您可以使用 RAII 原则实现令人难以置信的稳定产品。要避免的主要事情是循环引用，可以通过对不需要引用保持活动的关系使用弱引用来减轻这种引用。一个常见的例子是当你有一个对象层次结构时，父类持有对子类的引用，而子类持有对父类的引用。子级可能不需要对父级的强引用，因为当父级这样做时，他们将超出范围。

# ios - 将数组嵌入到 plist 中的 Dict 结构中

> ID：15074442
> 
> 赞同：0
> 
> 时间：2013-02-25T19:03:36.867
> 
> 标签：ios, plist

我是iOS的初学者。我找到的每个资源在 plist 中的字典中只有键字符串对。

```
<key></key>
<string></string> 
```

我想知道是否可以将结构中的一个对象作为一个密钥对，其中该对象是一个数组。在我的 plist 中，我的结构如下。第一个字典包含可变数量的键字符串对，这些键字符串对可能存在也可能不存在于 plist 中。我的代码检查是否存在某些键。但是，我想添加一个数组，该数组将包含此初始字典所需的尽可能多的主菜。下面的代码不起作用，但这是我想做的。

```
<array>
    <dict>
        <key>title</key>
        <string>SomeTitle</string>
             .
             .
             .
        <key>filters</key>
        <array>???

        </array>???
    </dict>
</array> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T19:37:11.267

使用

```
<key>SomeKey</key>
<array>
</array> 
```

毕竟我们是正确的。我的解析代码只是没有识别它。

我正在使用解析代码

```
NSMutableArray* propertyList = [[NSMutableArray alloc] initWithContentsOfFile:path];
NSMutableDictionary* dict = [propertyFile objectAtIndex:0];
NSMutableArray* filters = [[[NSMutableArray alloc] initWithArray:[dict objectForKey:@"Filters"]] retain]; 
```

与 plist

```
<array>
    <dict>
        <key>PageTitle</key>
        <string>Title</string>
        <key>Filters</key>
        <array>
             <dict>
                 <key>Filter</key>
                 <string>SomeFilter</string>
                 <key>Param</key>
                 <string>SomeParam</string>
             </dict>
        </array>
    </dict>
 </array> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T19:59:27.543

为了能够使用该`initWithContentsOfFile:`方法加载 plist 文件，它需要是正确的 plist 文件。

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<array>
    <dict>
        <key>PageTitle</key>
        <string>Title</string>
        <key>Filters</key>
        <array>
             <dict>
                 <key>Filter</key>
                 <string>SomeFilter</string>
                 <key>Param</key>
                 <string>SomeParam</string>
             </dict>
        </array>
    </dict>
</array>
</plist> 
```

另外，这一行：

```
NSMutableArray* filters = [[[NSMutableArray alloc] initWithArray:[dict objectForKey:@"Filters"]] retain]; 
```

应该只是：

```
NSMutableArray* filters = [dict[@"Filters"] mutableCopy]; 
```

# database - Solr在postgres中导入锁定表

> ID：15074444
> 
> 赞同：0
> 
> 时间：2013-02-25T19:03:46.323
> 
> 标签：database, postgresql, solr, locking

我正忙着为一个关于度假屋的网站实施 Solr。该网站使用 Postgres 作为主数据库。对于搜索结果，我们希望使用 Solr 作为后端来获取可用的度假屋。

通过使用带有 JdbcDataSource 的 DataImportHandler 来导入部分数据库。

DataImportHandler 的缩短版本：

```
<?xml version="1.0" encoding="UTF-8"?>
<dataConfig>
     <dataSource type="JdbcDataSource" driver="org.postgresql.Driver" name="Solr"
                    url="jdbc:postgresql://host:port/database" user="*" password="*" readOnly="true"/>
    <document>
<entity name="availabilities" transformer="RegexTransformer" pk="id"
        query="
            SELECT concat('A',pa.availability_id,'-',pad.start_date,'-',pad.period_type_id) as unique_availability_id,
            pa.property_id,
            NULLIF(CONCAT(ST_X(pl.position),',',ST_Y(pl.position)),',') as locationhash,
            pl.position_accurate,
            true as is_availability,
            region.child_id as city_id,
            region.ancestor_id as province_id,
            (
                SELECT array_to_string(array(SELECT binnen.ancestor_id
                FROM fewo_Location_Ancestry binnen
                WHERE binnen.child_id = region.child_id
                AND   binnen.ancestor_type_id = 12), ',')
            ) AS region_id,
            pl.country_id,
            pl.min_persons,
            pl.max_persons,
            fap.bedrooms,
            pl.specifications,
            pl.property_state_id,
            pa.availability_id,
            pad.period_type_id,
            pad.start_date,
            pad.end_date,
            (
                SELECT COUNT(*) &gt; 0 FROM fewo_last_minute_details flmd
                WHERE flmd.property_id = pa.property_id
                AND flmd.details_id = pad.details_id
                LIMIT 1
            ) AS last_minute,
            CASE (
                SELECT COUNT(*) &gt; 0 FROM fewo_last_minute_details flmd
                WHERE flmd.property_id = pa.property_id
                AND flmd.details_id = pad.details_id
                LIMIT 1
            ) WHEN true THEN pad.discount_price
                    ELSE pad.price
            END as price,
            pl.positioning_fee,
            pl.sort_order   
            FROM fewo_property_availability_details pad
                INNER JOIN fewo_property_availability pa USING (availability_id)
                INNER JOIN fewo_Property_Location pl ON pa.property_id=pl.property_id
                INNER JOIN fewo_all_properties fap ON pl.property_id=fap.property_id
                INNER JOIN fewo_Location_Ancestry region ON (region.child_id =pl.location_id  AND region.ancestor_type_id = 7)
            WHERE pad.start_date &gt; current_date
        ">
    <field name="id" column="unique_availability_id"/>
        <field name="property_id" column="property_id"/>
        <field name="parent_id" column="property_id"/>
        <field name="is_availability" column="is_availability"/>
        <field name="positionCoord" column="locationhash"/>
        <field name="position_accurate" column="position_accurate"/>
        <field name="city_id" column="city_id"/>
        <field name="province_id" column="province_id"/>
        <field name="region_id" column="region_id" splitBy="," sourceColName="region_id"/>
        <field name="country_id" column="country_id"/>
        <field name="min_persons" column="min_persons"/>
        <field name="max_persons" column="max_persons"/>
        <field name="bedrooms" column="bedrooms"/>
        <entity name="fewo_all_property_specifications" transformer="foo.SpecTransformer" pk="property_id"
            cacheKey="property_id"
            cacheLookup="availabilities.property_id"
            query="SELECT property_id, specification_id, COALESCE(value,'true') as val FROM fewo_all_property_specifications"
            processor="CachedSqlEntityProcessor">
        </entity>
        <field name="property_state_id" column="property_state_id"/>
        <field name="availability_id" column="availability_id"/>
        <field name="period_type_id" column="period_type_id"/>
        <field name="start_date" column="start_date"/>
        <field name="end_date" column="end_date"/>
        <field name="last_minute" column="last_minute" />
        <field name="price" column="price"/>
        <field name="positioning_fee" column="positioning_fee"/>
        <field name="sort_order" column="sort_order"/>
    </entity>   
    </document>
</dataConfig> 
```

导入运行大约一个小时，将 1300 万条记录导入 Solr。问题是在导入期间无法更新表 fewo_property_availability_details 因为有一个 AccessShareLock 锁定了表。这可以防止将数据更新/插入到表中，并且这些查询会排队。一段时间后，它们堆积太多，数据库出现故障。

我的问题是：有没有一种很好的方法来导入数据而不会过多地阻碍常规查询？就像在 x 条导入记录后开始新事务一样，也给其他查询时间运行？

我正在使用在 Ubuntu 12.04 上运行的 Solr 4.0 和 Postgres 9.1。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T04:57:30.310

`AccessShareLock``AccessExclusiveLock`根据[文档](http://www.postgresql.org/docs/current/static/explicit-locking.html)，仅与 冲突

`ACCESS EXCLUSIVE`只能通过`ALTER TABLE`, `DROP TABLE`, `TRUNCATE`, `REINDEX`, `CLUSTER`,`VACUUM FULL`和非限定`LOCK TABLE`语句获得。

看看`pg_catalog.pg_locks`是否可以获得有关锁定关系的更多信息。您还可以在 PostgreSQL wiki 上找到一些有用的锁定查询：[http ://wiki.postgresql.org/wiki/Lock_Monitoring](http://wiki.postgresql.org/wiki/Lock_Monitoring)

完全有可能您的数据库无法应对繁重的并发读/写负载，而不是锁定阻止事物。如果您的缓存很小，您在没有 BBU RAID 控制器的普通（非 SSD）磁盘上运行，并且/或者您没有针对您的环境调整 PostgreSQL 配置，则这种情况尤其可能发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T11:29:35.713

或者，您可以根据您从 DIH 中的选择创建一个物化视图（在 oracle 和 MySQL 中是可能的），然后您可以将刷新选项设置为 FAST（这意味着视图将始终包含新数据）。您将实现什么： - 更快的导入 - 表上没有锁定 之后，您可以进行部分导入（不是完全导入）以仅获取新的或更改的数据。看到这个[链接](http://wiki.apache.org/solr/DataImportHandlerDeltaQueryViaFullImport) 希望会有所帮助。

# ruby-on-rails - 无法让 activeadmin 加载 /admin 页面（Rails）

> ID：15074452
> 
> 赞同：0
> 
> 时间：2013-02-25T19:04:13.693
> 
> 标签：ruby-on-rails, activeadmin

使用 Rails 3.2.6 和 activeadmin 0.5.1

[按照站点主页上](http://activeadmin.info/documentation.html)的说明进行操作，直到`localhost:3000/admin`出现以下错误

`ActionController::RoutingError (wrong constant name Admin/dashboardController)`

奇怪的部分：

gem 的源代码有以下几行：

```
module ActiveAdmin
  module Dashboards
    module DashboardController 
```

这应该意味着

`ActiveAdmin::Dashboards::DashboardController`应该在 rails 控制台中可用。

它不是。这是 o/p

```
1.9.3p194 :045 > ActiveAdmin::Dashboards.DashboardController
NoMethodError: undefined method `DashboardController' 
for ActiveAdmin::Dashboards:Module 
```

想法？

# jsf-2 - 自定义组件：如何填充 ELContext 变量以呈现子级

> ID：15074456
> 
> 赞同：1
> 
> 时间：2013-02-25T19:04:20.530
> 
> 标签：jsf-2, custom-component

我试图通过编写一个小的“树”组件来更好地掌握 JSF2 内部结构，该组件采用节点结构并将其呈现为简单的 ul/li 元素。

应该可以定义Way，叶子的内容渲染得有点像这样（类似于h:DataTable）：

```
<custom:tree value="#{someBean.someListProperty}" var="nodeData">
    <h:outputText value="#{nodeData}" />
    ...
</custom:tree> 
```

目前我正在努力弄清楚如何将该变量“填充”到当前上下文中。我尝试了这样的事情，但没有奏效：

```
@Override
@SuppressWarnings("unchecked")
public void encodeChildren(FacesContext context) throws IOException {
    if ((context == null)){
        throw new NullPointerException();
    }

    ArrayList<String> list = (ArrayList<String>) getStateHelper().eval("value");
    String varname = (String) getStateHelper().eval("var");
    if(list != null){
        for(String str : list){
            getStateHelper().put(varname, str);
            for(UIComponent child: getChildren()){
                child.encodeAll(context);
            }
        }
    }
} 
```

为了简单起见，我首先开始使用一个简单的字符串数组列表并迭代地打印出内容。这是xhtml：

```
<custom:tree value="#{testBean.strings}" var="testdata">
    <h:outputText value="#{testdata}" />
</custom:tree> 
```

那么，实现这一目标的正确方法是什么？

最好的问候，克里斯蒂安·沃斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T08:49:23.037

谢谢巴鲁斯C，

为简单起见，这基本上是我的问题的（或更好的）答案：

您可以将给定键下的新变量放入 requestMap 中，任何子组件都可以使用指定的 ValueExpression 访问它。

```
@Override
@SuppressWarnings("unchecked")
public void encodeChildren(FacesContext context) throws IOException {
    if ((context == null)){
        throw new NullPointerException();
    }

    ArrayList<String> list = (ArrayList<String>) getStateHelper().eval("value");
    String varname = (String) getStateHelper().eval("var");
    Map<String, Object> requestMap = context.getExternalContext().getRequestMap();

    varStore = requestMap.get(varname); // in case this Object already exists in the requestMap,
                                        // emulate "scoped behavior" by storing the value and
                                        // restoring it after all rendering is done.

    if(list != null){
        for(String str : list){
            requestMap.put(varname, str);
            for(UIComponent child: getChildren()){
                child.encodeAll(context);
            }
        }           
        // restore the original value
        if(varStore != null){
            requestMap.put(varname, varStore);
        }else{
            requestMap.remove(varname);
        }
    }
} 
```

# javascript - 使用正则表达式显示日期格式

> ID：15074457
> 
> 赞同：0
> 
> 时间：2013-02-25T19:04:23.687
> 
> 标签：javascript, date

我希望有一个非常简单的问题。我想要做的是转换我创建的日期对象以匹配正则表达式的格式。问题是我在控制台中不断获得的值是空的。关于如何修改我的代码以获得我创建的正则表达式的日期格式的任何建议？

```
function getDate() {
        var newdate = new Date();
        var results = newdate.toDateString();
        var exp = new RegExp("[0-9]{4}\\.\[0-9]{2}\\.\[0-9]{2}");
        var newresults = results.match(exp);
        console.log(newresults);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T19:11:17.353

不要使用`toDateString`，而是使用[date 方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)来逐步构建您的字符串：

```
var results = newdate.getFullYear() + '.' +
    newdate.getMonth() + '.' + newdate.getDate(); 
```

无法判断您是想要月后日还是日后月，因此如果需要，请翻转它们。

编辑：您需要在月份和日期填充零以适应正则表达式：

```
String.prototype.padZero = function () {
    if (this.length === 1) {
        return '0' + this;
    } else {
        return this;
    }
};

var year = newdate.getFullYear();
var month = newdate.getMonth().toString();
var day = newdate.getDate().toString();

var results = year + '.' + month.padZero()  + '.' + day.padZero(); 
```

[http://jsfiddle.net/WVCfz/](http://jsfiddle.net/WVCfz/)

# jquery - 寻找最近的链接

> ID：15074462
> 
> 赞同：0
> 
> 时间：2013-02-25T19:04:32.397
> 
> 标签：jquery, html

我有一个包含 7 页的单页滚动网站，每个页面的高度约为 1000 像素。我的菜单结构是这样的，

```
<a href="#home" class="home">Home</a>
<a href="#about" class="about">About</a>
<a href="#team" class="team">Team</a>
<a href="#contact" class="contact">Contact</a> 
```

通过单击链接，它将滚动到分配给该部分的相应 ID。

我还有一个小位置固定按钮，带有 2 个向上和向下的箭头。

```
<div class="button">
    <i class="go-up"></i> //up arrow
    <i class="go-down"></i> //down arrow
</div> 
```

我想通过单击箭头导航到最近的部分。例如假设我在里面`#team`，所以当我点击它时`.go-up`它应该导航到`#about`并且 .go-down 应该去`#contact`。同样在移动到另一个之后，`#contact`这应该确定新的最近目标。

请帮我在jQuery中做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T20:00:14.957

假设您有如下标记：

```
<a href="#home" class="home">Home</a>

<a href="#about" class="about">About</a>

<a href="#team" class="team">Team</a>
<a href="#contact" class="contact">Contact</a>

    <div>
        <div id="home">
            <p>Some content in 'home.'</p>
            <div class="button">
                <i class="go-up">&uarr;</i>
                <i class="go-down">&darr;</i></div>
        </div>
        <!-- other sections omitted for brevity -->
    </div> 
```

我建议：

```
$('.button i').click(
    function(){
        var mvTo = $(this).closest('div[id]')[$(this).hasClass('go-up') ? 'prev' : 'next']().offset(),
            x = mvTo.left,
            y = mvTo.top;
        window.scrollTo(x,y);
    }); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/fKXHs/)。

参考：

*   [`click()`](http://api.jquery.com/click/).
*   [`closest()`](http://api.jquery.com/closest/).
*   [`hasClass()`](http://api.jquery.com/hasClass/).
*   [`offset()`](http://api.jquery.com/offset/).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T19:20:04.087

既然您提到帮助您找到使用 jQuery 的解决方案，这里有一个解决方案：

上升可能是这样的：

```
$('.button > .go-up').on("click",function(){
     var container = $("#mainPageContainer");
     var prevElement = container.prevAll('.aClassToPutOnPageContent:first');
     container.scrollTo(prevElement);
  }); 
```

下去可能是：

```
 $('.button > .go-down').on("click",function(){
     var container = $("#mainPageContainer");
     var nextElement = container.nextAll('.aClassToPutOnPageContent:first');
     container.scrollTo(nextElement);
  });. 
```

另请参阅[此链接](http://demos.flesler.com/jquery/scrollTo/ "这个链接")以获得良好的内容内容滚动插件！

资料来源：[如何使用 jquery next() 按类选择下一个 div](https://stackoverflow.com/questions/1743454/how-to-use-jquery-next-to-select-next-div-by-class)

* * *

但也许下次尝试搜索更多！我花了大约 20 秒才找到我的来源。(;

祝好运并玩得开心点，

马克。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T19:56:56.450

我会使用班级标志。

例如使用`current`链接上的类。

```
$('.button i').click(function () {
    var $anchor = $('.current');
    var direction = $(this).prop('class');

    if (direction == 'go-up' && $anchor.prev().length > 0) {
        $('a').removeClass("current");
        $anchor.prev().addClass("current");
        $('html, body').stop().animate({
            scrollTop: $($anchor.prev().attr('href')).offset().top
        }, 1500);
    } else if (direction == 'go-down' && $anchor.next().length > 0) {
        $('a').removeClass("current");
        $anchor.next().addClass("current");
        $('html, body').stop().animate({
            scrollTop: $($anchor.next().attr('href')).offset().top
        }, 1500);
    }

}); 
```

然后您可以使用`$('.current')`

并使用`.prev()`和`.next()`

[http://jsfiddle.net/PhckT/1](http://jsfiddle.net/PhckT/1)

# database - 如何使用数据库中的图像内容填充 h:graphicImage 值？

> ID：15074465
> 
> 赞同：5
> 
> 时间：2013-02-25T19:04:49.780
> 
> 标签：database, jsf, bytearray, blob, graphicimage

我`Image`在我的 ManagedBean 中有对象。如何在我的 JSF 页面中获取它？

这似乎不起作用： `<h:graphicImage value="#{userProfile.image}" />`其中 image 是类 userProfile 中的字段变量。

图片来自 MySql，如下所示。

```
int len = rs.getInt("ImageLen");
if(len != 0){
    byte[] b = new byte[len];
    InputStream in = rs.getBinaryStream("Image");
    in.read(b);
    in.close();
    this.image = Toolkit.getDefaultToolkit().createImage(b);
} 
```

我得到的错误是：`java.lang.ClassCastException - sun.awt.image.ToolkitImage cannot be cast to java.lang.String`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T19:29:42.297

这里有一个很大的误解。JSF 基本上是一个 HTML 代码生成器。在 HTML 中，图像不会内联在 HTML 输出中。相反，它们应该由`<img>`属性中具有（相对）URL 的元素表示`src`，浏览器在解析获得的 HTML 输出期间必须单独下载该属性。查看生成的 HTML 输出，JSF`<h:graphicImage>`组件生成一个 HTML`<img>`元素，该元素必须具有`src`指向有效 URL 的属性。

必须代表一个有效的`<h:graphicImage value>`URL。但是，如果您将图像存储在数据库中而不是公共网络内容中，那么您基本上应该创建一个独立的[servlet](https://stackoverflow.com/tags/servlets/info)，它根据一些唯一的请求参数或 URL 路径从数据库中读取单个图像并将其写入响应正文.

因此，假设您从现在开始按如下方式呈现图像 URL，

```
<h:graphicImage value="/userProfileImageServlet?id=#{userProfile.id}" /> 
```

那么 servlet 的以下启动示例（省略 nullchecks 等琐碎的检查）应该做：

```
@WebServlet("/userProfileImageServlet")
public class UserProfileImageServlet extends HttpServlet {

    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        Long userProfileId = Long.valueOf(request.getParameter("id"));

        try (
            Connection connection = dataSource.getConnection();
            PreparedStatement statement = connection.prepareStatement("SELECT image, imageFileName, LENGTH(image) AS imageContentLength FROM userProfile WHERE id=?");
        ) {
            statement.setLong(1, userProfileId);

            try (ResultSet resultSet = statement.executeQuery()) {
                if (resultSet.next()) {
                    response.setContentType(getServletContext().getMimeType(resultSet.getString("imageFileName")));
                    response.setContentLength(resultSet.getInt("imageContentLength"));
                    response.setHeader("Content-Disposition", "inline;filename=\"" + resultSet.getString("imageFileName") + "\"");

                    try (
                        ReadableByteChannel input = Channels.newChannel(resultSet.getBinaryStream("image"));
                        WritableByteChannel output = Channels.newChannel(externalContext.getResponseOutputStream());
                    ) {
                        for (ByteBuffer buffer = ByteBuffer.allocateDirect(10240); input.read(buffer) != -1; buffer.clear()) {
                            output.write((ByteBuffer) buffer.flip());
                        }
                    }
                }
            } else {
                response.sendError(HttpServletResponse.SC_NOT_FOUND);
            }
        } catch (SQLException e) {
            throw new ServletException("Something failed at SQL/DB level.", e);
        }
    }

} 
```

如果您碰巧在 JSF 2.2 + CDI 环境中使用 JSF 实用程序库[OmniFaces](http://omnifaces.org)，那么您可以改用它[`<o:graphicImage>`](http://showcase.omnifaces.org/components/graphicImage)，它可以更直观地使用。

```
<o:graphicImage value="#{userProfileImageBean.getBytes(userProfile.id)}" /> 
```

```
@Named
@ApplicationScoped
public class UserProfileImageBean {

    public byte[] getBytes(Long userProfileId) {
        try (
            Connection connection = dataSource.getConnection();
            PreparedStatement statement = connection.prepareStatement("SELECT image FROM userProfile WHERE id=?");
        ) {
            statement.setLong(1, userProfileId);

            try (ResultSet resultSet = statement.executeQuery()) {
                if (resultSet.next()) {
                    return resultSet.getBytes("image");
                }
            } else {
                return null;
            }
        } catch (SQLException e) {
            throw new FacesException("Something failed at SQL/DB level.", e);
        }
    }

} 
```

它还通过设置透明地[支持](http://showcase.omnifaces.org/components/graphicImage)日期 URI 方案`dataURI="true"`：

```
<o:graphicImage value="#{userProfileImageBean.getBytes(userProfile.id)}" dataURI="true" /> 
```

### 也可以看看：

*   [使用 <h:graphicImage> 或 <img> 标签从 webapps / webcontext / deploy 文件夹外部加载图像](https://stackoverflow.com/questions/4543936/load-images-from-outside-of-webapps-webcontext-deploy-folder-using-hgraphi)
*   [使用 p:graphicImage 和 StreamedContent 显示来自数据库的动态图像](https://stackoverflow.com/questions/8207325/display-dynamic-image-from-database-with-pgraphicimage-and-streamedcontent)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-14T12:19:36.757

除了调用 servlet 之外，还有一种方法：**[嵌入 Base64 编码的图像](http://www.bigfastblog.com/embed-base64-encoded-images-inline-in-html)**。

在我给出如何做的指导之前，我首先需要强调**这可能是一个坏主意**（特别是如果你不知道问题是什么并且盲目地使用这种技术）。一些最重要的点：

*   Base64 编码效率低下，使用此技术您将使用*大约* **33% 的**数据。（但是，您将使用较少的 HTTP 请求，每个请求都有自己的开销，因此**如果**您的图像非常小，则约 33% 的低效率可能仍然小于额外的 HTTP 请求。）
*   一些较旧的 Web 浏览器不支持“data:...”协议，因此使用此技术无法显示图像。
*   根据不同的配置，带有嵌入图像的 HTML 页面不会被缓存，而从 servlet 生成的图像可能会被缓存，因此这种技术将再次导致更大的低效率。再次知识渊博可以在这里提供帮助......（稍微切线，在 CSS 文件中使用它可能是有意义的 - 例如小背景图像 -**如果**CSS 文件被缓存 - 通常是这种情况。）

更多关于上述警告的阅读（也关注链接和谷歌）：

*   [Stackoverflow：base64图像编码的优缺点](https://stackoverflow.com/questions/11736159/advantages-and-disadvantages-base64-image-encode)
*   [David Calhoun 的博客：何时对图像进行 Base64 编码（以及何时不编码）](http://davidbcalhoun.com/2011/when-to-base64-encode-images-and-when-not-to/)
*   [Stackoverflow：将背景图像数据嵌入 CSS 作为 Base64 的好做法还是坏做法？](https://stackoverflow.com/questions/1124149/is-embedding-background-image-data-into-css-as-base64-good-or-bad-practice)

# 好的，现在获取说明：

您的 Facelet 将简单地包括您的`<h:graphicImage>`：

```
<h:graphicImage id="myimageid" value="${myBean.imgContentsBase64}" /> 
```

...并且您的支持 bean`MyBean`将有一个成员：

```
private String imgContentsBase64; // including g/setter 
```

的内容`imgContentsBase64`应采用以下格式：“ `data:{MIME_TYPE};base64,{BASE64_ENCODED_CONTENTS}`”。

在哪里：

*   {MIME_TYPE} 例如`image/png`,`image/jpg`等。
*   {BASE64_ENCODED_CONTENTS} 是二进制图像文件编码的字节。

（参考第一行中引用的页面，它包含一个示例）。

要执行后者，您可以通过`java.util.Base64.getUrlEncoder()`（或`.getEncoder()`或`.getMimeEncoder()`但第一个提到的可能适用于这种情况）获得一个编码器。然后，您似乎会使用该`Base64.Encoder.encodeToString()`方法将 a `byte[]`（包含图像内容）转换为 a `String`（bean 值）。您必须阅读 API 文档和/或 google 以了解更多详细信息，但它看起来非常简单明了，因为编码功能已经在提供的库中。

**希望这是显而易见**的，但图像只显示在第一个页面加载时（或者当图像通过例如 Ajax 更新时）。因此，如果您想更改图像，您可能会`imgContentsBase64`通过 Ajax 调用侦听器（等）更新内容`render`，至少还要更新`myimageid`组件。

# java - .jsp 页面不适用于 Google App Engine

> ID：15074469
> 
> 赞同：1
> 
> 时间：2013-02-25T19:04:56.483
> 
> 标签：java, google-app-engine, jsp

我已经建立了从 Eclipse 到 jdk 主目录的路径。正如你在这里看到的：![http://s18.postimage.org/9sj7vfx21/picture.png](../Images/4cb5b959ff4cbc5978faeb2a986d949f.png)

下面是我在 localhost 上启动服务器时首次加载的索引页。

jsp 文件显示不正确，因为它让用户看到实际代码。还有什么我需要做的吗？

```
// index.jsp //
<%@ page language="java" %>
<%@ page import="javax.servlet.http.HttpServlet" %> 
<html>
<body>
    <h1>Welcome! </h1>
    <a href="http://localhost:8888/viewfiles" />View Files</a>
    <a href="http://localhost:8888/upload.jsp" />Upload Files</a>
    <p>
       Today's date: <%= (new java.util.Date()).toLocaleString()%>
    </p>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T20:39:02.313

有几件事要检查：

1.  JDK 1.7 在 GAE 中是实验性的，所以你需要确保为它配置了东西： [https](https://developers.google.com/appengine/docs/java/java7) ://developers.google.com/appengine/docs/java/java7 无论如何，你现在可能要考虑坚持使用 1.6。
2.  您可能需要检查您的 web.xml，因为那是真正配置应用程序的地方。请参阅： [https ://developers.google.com/appengine/docs/java/config/webxml](https://developers.google.com/appengine/docs/java/config/webxml)
3.  这可能是您要解决的问题，但是当您实际部署应用程序时，当然 localhost URL 不会像预期的那样工作。

# database - 应用数据库模型

> ID：15074470
> 
> 赞同：1
> 
> 时间：2013-02-25T19:04:59.840
> 
> 标签：database, database-design, architecture, ios6

到目前为止，我已经看过几个项目，并意识到有些项目不使用外键（表因此未链接），而有些项目确实链接了表。

我正在开发一个使用 的应用程序`iOS`，`SQLITE3`哪**一个是开发应用程序的最佳实践**？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T19:10:12.373

最佳做法是有外键。就我个人而言，在关系数据库中没有外键的想法对我来说是陌生的。（请原谅双关语）外键有助于加强参照完整性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T19:14:19.693

在遥远的过去，应用程序建立在没有外键作为数据库一部分的分层或网络数据库上。外键必须在应用程序中编码。

这些应用程序最终被迁移到关系数据库，经过多次踢腿和尖叫。我正在帮助维护一个在 2011 年从 IDMS 迁移到 DB2 的应用程序。

代码没有改变，开发人员继续维护外键作为应用程序的一部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T19:32:36.113

由于您正在为 iOS 开发应用程序，因此在您的情况下，对象模型设计和数据库（表）设计将顺其自然（然后数据管道代码变得非常容易。否则，您必须在进行更改时随时调整数据管道代码在您的应用程序中）。话虽如此，无论您的对象中有父子关系（一对一或一对多映射），它们都应该存储在您的外键表中。“父”对象转到主表。“子”对象进入外键表。

如果您的要求相当简单，您还可以考虑将信息存储为 XML。那么你就不需要担心数据库模式设计了。一个有用的链接供您考虑

[http://www.informit.com/articles/article.aspx?p=1019623](http://www.informit.com/articles/article.aspx?p=1019623)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T21:51:09.060

拥有 FK 有点像拥有托管内存 - 系统本身永远不会让您创建“悬空指针”，无论您在应用程序的实现中犯了多么严重的错误。

外键对于维护数据完整性至关重要。他们是：

*   **声明式：**这使得它们比埋在应用程序实现深处的命令式代码“显而易见”并且更能自我记录。
*   **稳健：**只有*一个有*缺陷的应用程序可能会破坏数据，因此拥有一个中央机制来确保应用程序*无法规避*的数据完整性至关重要。
*   **可扩展性：**在*并发*环境中，正确实现 FK 需要适当的并发控制（例如锁定），这通常可以在 DBMS 中比在应用程序级别更有效地完成。

老实说，这在嵌入式数据库（如 SQLite）中并不像在“大型”客户端-服务器数据库中那样重要，在这种数据库中，多个客户端应用程序经常访问同一个数据库。但是，在嵌入式环境中使用 FK 也没有缺点，因此只要您不受历史原因的限制，就应该这样做。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-24T03:47:21.863

我想知道为什么 Rails 框架似乎也没有在数据库上建立这些关系。他使用 Active Record 来处理这些关系。

# php - 表单提交后的chrome重定向

> ID：15074472
> 
> 赞同：2
> 
> 时间：2013-02-25T19:05:01.713
> 
> 标签：php, google-chrome

自 1 小时以来，我一直在为这种简单的代码和平而苦苦挣扎。当我在提交表单后刷新浏览器时会出现问题。Chrome 浏览器想要重新提交表单。所有其他浏览器都按预期工作。

是否有适用于 chrome 的解决方法/hack？

```
<?php
// file: test.php
if(isset($_POST['test'])){
    header('Location: test.php');
    exit;
}
?>
<form method="post">
    <input type="hidden" name="test" value="1">
    <input type="submit" value="Send">
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T19:12:01.550

试试这个：

```
<html>
<head>
<?php
if(isset($_POST['test'])){
echo "<meta http-equiv=refresh content='0;url=test.php'>";
exit();
}
?>
</head> 
```

# highcharts - 带有原型的 Highchart

> ID：15074474
> 
> 赞同：2
> 
> 时间：2013-02-25T19:05:21.927
> 
> 标签：highcharts

我需要使用prototype.js 进行Web 服务调用，然后使用highchart.js 绘制图表。我按照建议使用了prototype-adapter.js，但如果我尝试同时使用两者（highchart 和原型），我仍然会出错。我创建了一个 jsFiddle

[http://jsfiddle.net/j5Grq/6/](http://jsfiddle.net/j5Grq/6/)

```
$(function () {
var chart;
$(document).ready(function () {
    chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container',
            type: 'line',
            marginRight: 130,
            marginBottom: 25
        },
        title: {
            text: 'Monthly Average Temperature',
            x: -20 //center
        },
        subtitle: {
            text: 'Source: WorldClimate.com',
            x: -20
        },
        xAxis: {
            categories: ['09/10', '09/11', '09/12', '09/13', '09/14']
        },
        yAxis: {
            title: {
                text: 'Temperature (°C)'
            },
            plotLines: [{
                value: 0,
                width: 1,
                color: '#808080'
            }]
        },
        tooltip: {
            formatter: function () {
                return '<b>' + this.series.name + '</b><br/>' + this.x + ': ' + this.y + '°C';
            }
        },
        legend: {
            layout: 'vertical',
            align: 'right',
            verticalAlign: 'top',
            x: -10,
            y: 100,
            borderWidth: 0
        },
        series: [{
            name: 'ABCD',
            data: [648.47, 636.43, 643.97, 640.92]
        }, {
            name: 'ABCD1',
            data: [899.46, 882.80, 893.29, 889.07]
        }, {
            name: 'ABCD2',
            data: [1359.06, 1328.04, 1349.74, 1342.52]
        }]
    });
}); 
```

});

如果我删除了prototype.js 和prototype-adapter.js，那么图表绘制得很好，但如果我包含它们，图表就不起作用。我需要prototype.js 来进行Web 服务调用。

请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-29T17:22:31.747

将你的 jQuery 包装成一个匿名函数，以保护变量不受 Prototype 的干扰。[http://jsfiddle.net/amyamy86/s6ms3/](http://jsfiddle.net/amyamy86/s6ms3/)

```
(function($) {

    $.noConflict();
    $(function () {
        $('#contain').highcharts({
         ....
        });
     });

}(jQuery)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-29T17:42:49.543

试试这个代码，它将毫无问题地工作。

我刚换

```
 $(function () { 
```

为了这

```
jQuery(function($) { 
```

这是您的图表的答案。

```
 http://jsfiddle.net/j5Grq/17/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T12:39:48.433

它不起作用，因为您使用 $(document).ready(); 这是jquery声明。

# nhibernate - 一对一的 NHibernate 映射

> ID：15074477
> 
> 赞同：0
> 
> 时间：2013-02-25T19:05:40.103
> 
> 标签：nhibernate, one-to-one

在过去的 3 天里，我一直在做这个，但仍然无法弄清楚。从概念上讲，我需要设计一个信封对象及其往返地址（对象）。我有以下数据库架构（我无法更改）：

表信封

*   信封 ID (PK)
*   项目清单
*   邮戳日期

表地址

*   EnvelopeId（信封中的PK、FK）
*   AdressType（1 - 发件人地址，2 - 收件人地址）
*   街道
*   状态
*   邮政编码

*唯一约束 (EnvelopeId, AdressType)

我的课程如下：

```
public class Envelope
{
public virtual long EnvelopeId { get; set; }
public virtual DateTime PostmarkDate { get; set; }
public virtual Address FromAddress { get; set; }
public virtual Address ToAddress { get; set; }
}

public class Address
{
public virtual AddressId { get; set; }
public virtual Envelope Envelope { get; set; }
public virtual AdressType { get; set; }
public virtual Street { get; set; }
public virtual State { get; set; }
public virtual ZipCode { get; set; }
} 
```

因此，Envelope 最终有 2 个对应的地址条目（带有它的主键）：一个带有 AddressType 1，一个带有 AddressType 2。我没有包含我的映射文件，因为这就是问题所在。我尝试了几种解决方案：

1.  信封和地址之间的一对一关系。我在信封映射文件中有 2 个一对一的标签，在地址映射文件中有一个一对一的标签。地址映射文件也有一个外部生成器，并且信封上有一个 constrained="true"。NHibernate 抱怨信封和地址之间的一对一映射令人困惑。

2.  创建了 2 个 FromAddress 和 ToAddress 类，它们都从 Address 派生。Envelope 类现在有一个 FromAddress 和一个 ToAddress（而不是 2 个地址）。我为继承实现了每类表的层次结构。在我的地址映射中，我有：一个外部生成器、2 个子类标签、鉴别器值以及与信封的一对一关系。但是 NHibernate 抱怨不喜欢将鉴别器和一对一放在一起。因此，我将一对一的标签移到了子类标签中。现在 NHibernate 抱怨不知道信封属性是什么（“无法解析属性：信封”）

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:13:46.753

信封肯定应该是一对多的地址吗？那是一个信封可以有多个地址（如果您将来有两个以上的地址，这将证明您的代码）

但是，我不确定为什么您没有发布映射，因此无法让 [每个子类的表](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/inheritance.html#inheritance-tablepersubclass-discriminator)（使用鉴别器）工作。您不需要从地址到信封的双向引用，因为地址继承自信封。

# c# - Windows 8 应用程序中的外部页面加载问题

> ID：15074479
> 
> 赞同：0
> 
> 时间：2013-02-25T19:05:42.207
> 
> 标签：c#, windows, windows-store-apps

我在我的 Windows 8 应用程序中直接显示了一些外部网页，并且这个外部页面有时加载太多延迟，有时它不会全部加载。有人请帮我解决这个问题。我正在为应用程序使用 XAML/C#。

以下是我加载外部页面的代码，如何检查页面在应用程序中正确加载的天气？

```
this.InitializeComponent();
textboxUri.Text = "http://www.google.com/";
WebView1.Navigate(new Uri(textboxUri.Text)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T15:26:32.307

Webview 类有一个[LoadCompleted](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.webview.loadcompleted.aspx)事件，我想你想要这样的东西（伪代码）：

```
{
    textboxUri.Text = "http://www.google.com/";
    WebView1.Navigate(new Uri(textboxUri.Text));

    WebView1.LoadCompleted += LoadCompletedEvent;
}

void LoadCompletedEvent(object sender, eventargs e)
{
    //Now the website has loaded, do what you want here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T19:14:03.120

我建议您在这里查看 MSDN 示例代码：

[http://code.msdn.microsoft.com/windowsapps/XAML-WebView-control-sample-58ad63f7/sourcecode?fileId=57963&pathId=298223712](http://code.msdn.microsoft.com/windowsapps/XAML-WebView-control-sample-58ad63f7/sourcecode?fileId=57963&pathId=298223712)

希望对你有帮助 ：）

# objective-c - @interface 括号内外声明的变量

> ID：15074481
> 
> 赞同：2
> 
> 时间：2013-02-25T19:05:49.813
> 
> 标签：objective-c, scope, global-variables, instance-variables, variable-declaration

为什么必须`@interface`像这样在括号内声明变量？

```
@interface myClass : UIViewController {
     NSString *myString;
     IBOutlet UILabel *myLabel;
} 
```

为什么不在这里做呢？

```
@interface myClass : UIViewController {
     IBOutlet UILabel *myLabel;
}

NSString *myString; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T19:08:44.473

因为如果你不这样做，那么该变量将是一个文件范围变量（具有静态存储持续时间），它不会是你的类的**实例变量**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T19:08:36.883

因为第一种形式是声明实例变量的正确 Objective-C 语法。第二种形式没有定义实例变量，它定义了一个全局变量。如果您想定义一个全局，请在`@interface`块之前定义它，这样它就不会成为类定义的一部分。

花括号外面是方法和属性声明的地方。

但更好的是，私有 ivars 应该在 .m 文件中声明，而不是在 .h 文件中。

```
@implementation myClass {
    // private ivars here
} 
```

我认为这并不适用`IBOutlet`。我认为他们需要在 .h 文件中。但我不使用IB，所以我不确定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T19:30:26.343

我们应该这样做的方式如下：

```
@interface MyClass : UIViewController {

}

@property (strong, nonatomic) NSString *myString;

@property (weak, nonatomic) IBOutlet UILabel *myLabel;

@end 
```

只需遵循约定，不要使开发人员的生活复杂化；）

# function - 有什么方法可以将 Google 的“贡献更好的翻译”功能添加到“TranslateThis 按钮”？

> ID：15074485
> 
> 赞同：0
> 
> 时间：2013-02-25T19:06:03.223
> 
> 标签：function, callback, translation, google-translate

我正在使用[TranslateThis 按钮](http://translateth.is/docs)来翻译​​我的网站。它本质上是一个使用[谷歌翻译](https://translate.google.com/manager/website/)的插件，但我更喜欢它而不是标准的谷歌翻译，因为它具有简单的回调功能：

```
TranslateThis({
onComplete : function() {
    // whatever you want to run on complete
    alert('callback working');
} 
```

**^ 这对于在网站翻译后调整布局非常有用。**

然而，它似乎缺少的一个功能是谷歌翻译的“贡献更好的翻译”功能，它允许用户在将鼠标悬停在翻译文本上时提交更好的翻译。有谁知道是否有办法提取该代码并在这里实现它？或者有没有办法可以用常规的谷歌翻译实现类似的回调函数？任何想法将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T16:01:04.070

这个功能似乎被谷歌撤回了。参考链接[https://groups.google.com/forum/?fromgroups#!topic/google-translate-general/_xNSpNUIn_0](https://groups.google.com/forum/?fromgroups#!topic/google-translate-general/_xNSpNUIn_0) 来自谷歌翻译高级软件工程师 Josh Estelle 的回复

# javascript - 如何在 IE9 中使用文件上传器获取文件 contentType

> ID：15074494
> 
> 赞同：0
> 
> 时间：2013-02-25T19:06:26.057
> 
> 标签：javascript, html, file-upload, content-type, fine-uploader

我正在尝试做一个简单的任务。使用 MVC3 应用程序使用 valums 文件上传器（或精细上传器）上传文件，将其保存在数据库中，然后让用户再次下载（使用返回 FileContentResult 的操作），但要做到这一点，我需要上传文件的 contentType。

IE9 在 vlaums 文件上传器中使用“UploadHandlerForm”方法（我使用的是 2.1.2 版），但无法获取 contentType。

例如，当我使用 IE10 时，插件使用 UploadHandlerXhr 上传，因此我可以获取内容类型并将其发布到服务器，其中：

```
_upload: function(id, params)
{
    ...
    var file = this._files[id];
    var type = (file.fileSize != null ? file.fileSize : file.size);

    ....
    //and then, add it to be posted to server:
    xhr.setRequestHeader("X-File-Type", type);
} 
```

有什么方法我无法在旧浏览器（如 IE9）中使用 javascript 从输入文件中获取文件的内容类型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T20:08:28.020

目前尚不清楚您在这里要做什么。您是否尝试在单独的请求中发送文件的内容类型？如果是这样，为什么？内容类型是每个 MPE 请求的一部分。只需检查包含文件数据的多部分边界的 Content-Type 标头。

另外，不要访问以下划线开头的变量/函数。这些不是 API 的一部分，可能随时更改或删除。将来，我希望完全阻止对这些内部的访问。

# vba - Excel VBA：对于两个标识符之间的可变数量的行，在每个可变数量的列中搜索一个字符串

> ID：15074502
> 
> 赞同：0
> 
> 时间：2013-02-25T19:06:54.110
> 
> 标签：vba, search, excel

这是我正在尝试做的事情：

我有一个电子表格，其中包含可变数量的行，每个行的长度都是可变的。
包含行的范围在开头和结尾由 A 列中的标识符标记，格式如下：“#Description”

如前所述，每行的长度（此处的长度 = 列数）是可变的。对于每一行，我需要遍历每一列并确定它是否包含用户定义的字符串。

我尝试在两个标识符之间创建一个范围，然后创建一个延伸到最长行末尾的范围，但搜索不会产生任何结果。

```
Set firstDesc = ws.Range("A1:A9999").Find("# Description:")
Set secDesc = ws.Range("A1:A9999").Find("# Description:", firstDesc)
Set searchArea = ws.Range(secDesc, secDesc.End(xlToRight))

'grab the name of the node
   Dim nodeName As String
   nodeName = TextBox1.Value

'Find occurences of the node entered by user
   Set Node = searchArea.Find(nodeName)
   If Not Node Is Nothing Then
        MsgBox "Value Found in Cell " & Node.Address
   End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T19:47:40.800

在方法中设置以下参数`Range.Find`：`LookAt`（xlPart 或 xlWhole）和`LookIn`（xlValues 或 xlFormulas）。这些参数没有默认值；每次使用`Range.Find`方法时都会保存这些设置。

# c# - 在 C# 中调用存储过程（发送邮件）

> ID：15074503
> 
> 赞同：0
> 
> 时间：2013-02-25T19:06:58.200
> 
> 标签：c#, sql-server-2008, stored-procedures

我正在使用 Visual Studio 2010、SQL Server 2008，我创建了一个发送邮件的应用程序，现在我的查询是一个简单的选择，但我需要使用存储过程进行，如何替换该选择为存储过程？

这是我的代码：

```
public List<string> SqlSelectMails()
{
    List<string> dir_mails = new List<string>();

    **string stSql = "select mail_usuario from dbo.mail_usuario_v2 where n_visita=0 and   
    aviso=1 order by banca";**

    Bd mibd = new Bd();
    SqlDataReader sdr = mibd.sqlExecute(stSql);

    while (sdr.Read())
    {
        dir_mails.Add(sdr["mail_usuario"].ToString());
    }
    return dir_mails;
} 
```

我会喜欢这样的东西：

```
**string stSql = "exec pa_rep_mail";** 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T19:14:33.803

首先，您需要在数据库中创建存储过程（使用 Sql Management Studio）

```
CREATE PROCEDURE [dbo].[pa_rep_mail]
AS
    select mail_usuario 
    from dbo.mail_usuario_v2 
    where n_visita=0 and aviso=1 
    order by banca 
```

那么你需要从你的代码中调用它

```
using(SqlConnection cn = new SqlConnection(constring))
{
    cn.Open();
    SqlCommand cmd = new SqlCommand("pa_rep_mail", cn);
    cmd.CommandType = CommandType.StoredProcedure;
    SqlDataReader sdr = cmd.ExecuteReader();
    while (sdr.Read())
    {
      dir_mails.Add(sdr["mail_usuario"].ToString());
    }
} 
```

当然，您可以将此代码集成到您现有的代码中。特别是如何替换调用`mibd.sqlExecute(stSql);`

# actionscript-3 - As3 - 错误 #1009：无法访问空对象引用的属性或方法

> ID：15074507
> 
> 赞同：-1
> 
> 时间：2013-02-25T19:07:10.667
> 
> 标签：actionscript-3, null

几天来我一直在尝试解决这个问题，但我无法得到什么磨损，我只是在我的“角色”和“糖果”之间添加了 hitTest。在开始工作时，我收到错误 #1009 无法访问空对象引用的属性或方法。在“糖果”第 49 行

“糖果”课

```
public class Candy extends MovieClip
{
    public var leadingMover:Mover;
    public var mainColliderCandy:Character;
    public var hit:MovieClip;
    public var hitParent:*;
    public var candy:MovieClip;

    public function Candy()
    {
        addEventListener(Event.ADDED_TO_STAGE, allLoaded);
    }

    private function allLoaded(event:Event):void
    {
            hitParent = event.currentTarget.parent;
            candy = MovieClip(this.parent.getChildByName(this.name));
            hit = hitCandy_mc;
            addEventListener(Event.ENTER_FRAME, update);
    }

    private function update(event:Event):void
    {
        if(leadingMover)
        {
            y +=leadingMover.speed;
        }
        else
        {
            leadingMover = Mover(parent.getChildByName("bg_mc"));
        }

        if(mainColliderCandy && candy)
        {
            if(hit.hitTestObject(mainColliderCandy))
            {

            //mainColliderCandy.collidedWithCandy(this);

                if(candy)
                {
                    //mainColliderCandy = null;
                    this.parent.removeChild(candy);
                }   
            removeEventListener(Event.ENTER_FRAME, update);
            }
        }
        else
        {
            mainColliderCandy = Character(parent.getChildByName("character_mc"));
        }
    }

} 
```

}

谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T19:57:53.867

如果您的错误在行

```
this.parent.removeChild(candy); 
```

`this.parent`是`null`。我认为你应该添加

```
candy.removeEventListener(Event.ENTER_FRAME, update); 
```

在大括号内，第 50 行。我真的不明白你的代码应该做什么，但它可能是你想在第 50 行做的事情

```
removeEventListener(Event.ENTER_FRAME, update); 
```

但它会移除监听器`this`而不是移除的糖果。

# java - 使用 JList 和 ListCellRenderer 在 ListCell 上添加多行文本

> ID：15074511
> 
> 赞同：0
> 
> 时间：2013-02-25T19:07:18.137
> 
> 标签：java, swing, jpanel, jlist, listcellrenderer

这个类实例由我的 ListCellRenderer 返回：

```
 public class SessionQALine extends JPanel {
    private JTextArea question;
    private JLabel answer;
    public SessionQALine() {
        setLayout(new BoxLayout(this,BoxLayout.X_AXIS));
        setOpaque(false);
        question = new JTextArea();
        question.setLineWrap(true);
        question.setWrapStyleWord(true);
        question.setFont(new Font(Font.SERIF, Font.ITALIC|Font.BOLD, 14));
        question.setOpaque(false);
        answer = new JLabel();
        answer.setFont(new Font(Font.SERIF, Font.BOLD, 10));
        answer.setOpaque(false);
            add(question);
        add(Box.createHorizontalGlue());
        add(answer);
    }

    public void setQuestion(String q) {
        question.setText(q);
    }
    public void setAnswer(String q) {
        answer.setText(q);
    }
    @Override
    public void paint(Graphics g) {
        super.paint(g);
        g.drawLine(0, getHeight()-1, getWidth(), getHeight()-1);
    }
} 
```

这是我的 ListCellRenderer 的一部分：

```
private SessionQALine qaLine = new SessionQALine();
@Override
public Component getListCellRendererComponent(JList list, Object value,
        int index, boolean isSelected, boolean cellHasFocus) {
    qaLine.setQuestion(questions.get(index));
    qaLine.setAnswer(answers.get(index));
    return qaLine;
} 
```

当字符串适合一行时，一切正常，但如果它需要多于一行，则似乎没有考虑第二行及以上，JList 绘制单元格，而这些行永远不会显示，你知道我是怎么做到的吗？可以解决吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T21:56:51.523

*   对于`JList`或`JTable`最容易使用`doLayout()`，而不是`getPreferredSize`从[java.swing.text.FieldView](http://docs.oracle.com/javase/6/docs/api/javax/swing/text/FieldView.html)

*   最舒服的是放在`JTextArea`, 以`JScrollPane`获得更好的 GUI 输出，

*   注意然后必须将[MouseScrollEvents](http://docs.oracle.com/javase/7/docs/api/java/awt/event/MouseWheelEvent.html)从父级重定向`JScrollPane`到`JScrollPane`鼠标光标下，（五六个代码行在这里解决了几次）

*   使用`Borders`or`JSeparator`代替`drawLine()`

你是什​​么意思

```
import java.awt.*;
import javax.swing.*;
import javax.swing.table.*;
import javax.swing.text.*;
//http://tips4java.wordpress.com/2008/10/26/text-utilities/
public class AutoWrapTest {

    public JComponent makeUI() {
        String[] columnNames = {" Text Area Cell Renderer "};
        Object[][] data = {
            {"123456789012345678901234567890"},
            {"dddddddddddddddddddddddddddddddddddddddddddddddddddddddddx"},
            {"----------------------------------------------0"},
            {">>>>>>>>>>>>>dddddddddddddddddddddddddddddddddddddddddddddddddd"
                + "dddddddxdddddddddddddddddddddddddddddddddddddddddddddd"
                + "dddddddddddx>>>>>>>>>>>>>>>>>>>>>>>>>|"},
            {">>>>>>>>>>>>ddddddddddddddddddddddddddddddddddddddddddddddddddd"
                + "ddddddx>>>>>>>>>>>>>>>>>>>>>>>>>>|"},
            {"a|"},
            {">>>>>>>>bbbb>>>>>>>>>>>>>>>>>>>|"},
            {">>>>>>>>>>>>>>>>>>|"},
            {">>>>>>>>>>>>>dddddddddddddddddddddddddddddddddddddddddddddddddd"
                + "dddddddxdddddddddddddd123456789012345678901234567890dddddd"
                + "dddddddddddddddddddddddddddddddddddddx>>>>>>>>>>>>>>>>>>>>"
                + ">>>>>|"},
            {">>>>>>>>>>>>>dddddddddddddd123456789012345678901234567890dddddd"
                + "dddddddddddddddddddddddddddddddddddddxdddddddddddddd123456"
                + "789012345678901234567890dddddddddddddddddddddddddddddddddd"
                + "ddddd123456789012345678901234567890ddddx>>>>>>>>>>>>>>>>>>"
                + ">>>>>>>|"},};
        TableModel model = new DefaultTableModel(data, columnNames) {

            private static final long serialVersionUID = 1L;

            @Override
            public boolean isCellEditable(int row, int column) {
                return false;
            }
        };
        JTable table = new JTable(model) {

            private static final long serialVersionUID = 1L;

            @Override
            public void doLayout() {
                TableColumn col = getColumnModel().getColumn(0);
                for (int row = 0; row < getRowCount(); row++) {
                    Component c = prepareRenderer(col.getCellRenderer(), row, 0);
                    if (c instanceof JTextArea) {
                        JTextArea a = (JTextArea) c;
                        int h = getPreferredHeight(a) + getIntercellSpacing().height;
                        if (getRowHeight(row) != h) {
                            setRowHeight(row, h);
                        }
                    }
                }
                super.doLayout();
            }

            private int getPreferredHeight(JTextComponent c) {
                Insets insets = c.getInsets();
                View view = c.getUI().getRootView(c).getView(0);
                int preferredHeight = (int) view.getPreferredSpan(View.Y_AXIS);
                return preferredHeight + insets.top + insets.bottom;
            }
        };
        table.setEnabled(false);
        table.setShowGrid(false);
        table.setTableHeader(null);
        table.getColumnModel().getColumn(0).setCellRenderer(new TextAreaCellRenderer());
        //table.setPreferredScrollableViewportSize(table.getPreferredSize());
        JScrollPane sp = new JScrollPane(table);
        sp.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS);
        sp.setPreferredSize(new Dimension(250, 533));
        JPanel p = new JPanel(new BorderLayout());
        p.add(sp);
        return p;
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                createAndShowGUI();
            }
        });
    }

    public static void createAndShowGUI() {
        JFrame f = new JFrame();
        f.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
        f.getContentPane().add(new AutoWrapTest().makeUI());
        f.setLocation(100, 100);
        f.pack();
        f.setVisible(true);
    }
}

class TextAreaCellRenderer extends JTextArea implements TableCellRenderer {

    private static final long serialVersionUID = 1L;
    private final Color evenColor = new Color(230, 240, 255);

    public TextAreaCellRenderer() {
        super();
        setLineWrap(true);
        setBorder(BorderFactory.createEmptyBorder(2, 2, 2, 2));
    }

    @Override
    public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
        if (isSelected) {
            setForeground(table.getSelectionForeground());
            setBackground(table.getSelectionBackground());
        } else {
            setForeground(table.getForeground());
            setBackground(table.getBackground());
            setBackground((row % 2 == 0) ? evenColor : getBackground());
        }
        setFont(table.getFont());
        setText((value == null) ? "" : value.toString());
        return this;
    }
} 
```

# jquery - jQuery：获取扩展某些类的css类的元素

> ID：15074513
> 
> 赞同：0
> 
> 时间：2013-02-25T19:07:27.893
> 
> 标签：jquery, css

我在 css 中有一个用于一些输入文本的类。我还有两个从第一个类扩展的类，如下所示：

```
 .input-text-parent {
         background-color: gray;
    }

    .input-text-child-1 {
         extends: input-text-parent;
         background-image: url(images/image1.jpg);
    }

    .input-text-child-2 {
         extends: input-text-parent;
         background-image: url(images/image2.jpg);
    } 
```

现在，我要做的是用 jQuery 选择所有扩展第一个类的元素（在本例中为 input-text-parent）。我知道使用 $(".class") 我可以获取该类的所有元素，但我不知道如何获取它的所有子类。

非常感谢。

我希望我的解释足够清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T19:21:07.237

我建议重构您的 css 以将两个类用于复杂元素，而不是一个扩展另一个类，这基本上完成了相同的事情，除了不需要预处理。例如：

```
.input-text {
     background-color: gray;
}

.input-text.child-1 {
     background-image: url(images/image1.jpg);
}

.input-text.child-2 {
     background-image: url(images/image2.jpg);
} 
```

然后，您可以使用以下标记：

```
<div class="input-text"></div>
<div class="input-text child-1"></div>
<div class="input-text child-2"></div> 
```

以及通过 jQuery 的以下 javascript：

```
$(".input-text").stuff(); //Select all of them
$(".input-text.child-1").stuff(); //Select only child-1 
```

等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T19:12:45.237

CSS 中没有子类的层次结构，您不能选择以特定类名称开头的所有元素。

但是你可以 ：

选择具有特定类的所有元素：

```
$('.input-text-parent').each(function(){
    //Do something
}); 
```

或者选择具有特定类的所有元素

```
$('.input-text-parent .input-text-parent-1').each(function(){
    //Do something
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T19:13:35.857

jQuery 没有专门为此内置任何东西，因为 css 并没有真正的子类支持。这些“子类”中的每一个实际上只是完全独立的类，它们恰好具有相似的名称。

jQuery的`filter`方法结合`className`属性应该可以选择一个类的元素`input-text-child-n`

```
$("input").filter(function(){
    return this.className.indexOf("input-text-child-") >= 0;
}).doSomething(); 
```

# ssas - SSAS - 可能的脚本分区？

> ID：15074517
> 
> 赞同：2
> 
> 时间：2013-02-25T19:08:05.183
> 
> 标签：ssas, data-warehouse, etl, bids, ssas-2008

我最近的任务是对一个大型多维数据集进行分区，最终在几个度量值组上创建了 15 个分区。它大大加快了处理时间。这是在 BIDS 中对多维数据集的开发副本完成的。我的问题是关于部署到生产多维数据集。在我处理这个问题时，生产中发生了一些其他变化，我不想覆盖它们，所以我不能只将开发项目部署到生产中。有没有办法只编写我在开发多维数据集上执行的分区并将该脚本应用到生产多维数据集？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T19:11:32.183

您可以实施 SSIS 包来自动执行此任务。一个简单的例子可以在这里找到[http://www.ssas-info.com/analysis-services-scripts/1622-script-to-automate-ssas-partition-management-sql-ssis](http://www.ssas-info.com/analysis-services-scripts/1622-script-to-automate-ssas-partition-management-sql-ssis)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-01T06:12:47.583

您可以使用 SQL Server 代理和 SSAS 分区管理器在生产多维数据集中自动创建分区，可以从[https://ssaspartitionmanager.codeplex.com/下载](https://ssaspartitionmanager.codeplex.com/)

只需几行配置，您就可以在生产服务器上动态创建多维数据集和表格分区。

# rest - 在 Coldfusion 10 REST 中使用 restSetResponse 时得到 204 No Content 响应

> ID：15074520
> 
> 赞同：0
> 
> 时间：2013-02-25T19:08:09.520
> 
> 标签：rest, coldfusion, coldfusion-10

我正在尝试使用 restSetResponse 来设置我自己的状态和内容，如下面的文档中所述：

[http://help.adobe.com/en_US/ColdFusion/10.0/Developing/WSe61e35da8d318518-5719eac51353e6bb244-7fec.html](http://help.adobe.com/en_US/ColdFusion/10.0/Developing/WSe61e35da8d318518-5719eac51353e6bb244-7fec.html)

这是我的 REST 方法：

```
remote any function test() httpmethod="get" {
    var response = {
        status: 400,
        content: 'something is wrong'
    };
    restSetResponse(response);
} 
```

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T18:52:56.397

在[您提供的链接中，请注意“](http://help.adobe.com/en_US/ColdFusion/10.0/Developing/WSe61e35da8d318518-5719eac51353e6bb244-7fec.html)**使用 restSetResponse 发送自定义成功响应**”标题下的第一个编号项目符号。如果将 CFC 定义为 REST 服务，则需要确保 returnType 设置为“ **void** ”。在您的示例中，您的 returnType 设置为“ **any** ”。

# android - 如何为微调器添加空间？

> ID：15074530
> 
> 赞同：0
> 
> 时间：2013-02-25T19:08:33.150
> 
> 标签：android

我使用带有自定义 TextView 的适配器来制作微调器，但微调器中的空间非常小，如何在每个项目之间添加空间。我尝试在自定义 TextView 中添加填充没有发生。

![在此处输入图像描述](../Images/445c916c1aa7bed204b054979802dad9.png)

预先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T19:40:02.903

尝试将`ClipToPadding` ViewGroup 的属性设置为`FALSE`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T21:24:11.670

尝试将`ClipToPadding`ViewGroup 的属性设置为`FALSE`. 这很可能会解决您的目的。！

# android - android：“渐进式”自定义搜索提供程序

> ID：15074532
> 
> 赞同：0
> 
> 时间：2013-02-25T19:08:40.510
> 
> 标签：android, android-contentprovider, android-searchmanager

我有一个自定义搜索内容提供程序，它结合了最近的搜索和进行网络 REST 调用的特定结果。

问题是，如果网络挂起或速度很慢，则不会返回任何结果。我想知道是否有办法逐步返回结果......在我的情况下，立即返回以前的搜索，并在可用时返回网络搜索结果。

我不知道这怎么可能，因为这似乎是一个拉模型。UI 组件正在请求搜索结果，并且无法知道何时重新请求以获取基于网络的结果……即使我可以理解挂钩以使其重新请求结果。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T18:26:41.697

这就是我处理这个问题的方式。内容提供者本身从不访问主请求线程中的网络。相反，它，

1.  查找查询的缓存结果
2.  如果有缓存结果，立即返回
3.  如果没有缓存结果，则启动工作线程查找结果，并返回空结果

当 #3 的工作线程完成时，它会广播一个意图。这由托管搜索的活动接收，触发它重新提交相同的搜索。这一次，当搜索查询到达内容提供者时，结果被缓存，并立即返回。

唯一的复杂性是如何强制活动在没有用户交互的情况下重新提交搜索。解决方案因android版本而异，

```
 public void onReceive(Context context, Intent intent) {
        String query = intent.getStringExtra(SearchManager.QUERY);
        if (query == null) {
            return;
        }
        // if user has typed something new, ignore
        if (!query.equals(searchQuery)) {
            return;
        }
        if (Build.VERSION.SDK_INT > Build.VERSION_CODES.HONEYCOMB) {
            SearchView searchView = (SearchView) searchMenuItem.getActionView();
            searchView.setQuery(query, false);
        } else {
            SearchManager sm = (SearchManager) getSystemService(Context.SEARCH_SERVICE);
            ComponentName cm = FolderActivity.this.getComponentName();
            sm.startSearch(query, false, cm, null, false);
        }
    } 
```

# xml - 漂亮的打印格式错误的 xml

> ID：15074534
> 
> 赞同：1
> 
> 时间：2013-02-25T19:08:43.907
> 
> 标签：xml, pretty-print

我正在进行数据迁移，我正在解析 html 并将其导出为 xml。当然，当 html 进入 xml 时，它会被转义，但为了验证解析是否正确，我正在解码括号以在 xml 中获取可读的 html 标签。但是，这些标签都是一起运行的，它仍然不是很可读。

有什么东西可以简单地缩进我拥有的标签结构吗？它既不是有效的 xml 也不是 html。我试过`xmllint --format`and `xmllint --htmlout`，但两者都在不同的地方窒息。

我可以避免手动执行此操作吗？

这是一个小例子：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<result><node><title>This would be the title</title><uri>/path/filename.jpg</uri><alt>Alt tag data</alt><body><p>Some text goes here.</body></node></result> 
```

在实际数据中，里面的 html 标签`<body>`都转义为`&lt;`and `&gt;`，但这太难用肉眼看解析是否正确。因此，我通过查找和替换将它们更改为等效的括号。但是它们仍然没有缩进，因此很难阅读。

两者都`tidy`抱怨`xmllint`缺少结束`<p>`标签。在此数据中，有许多缺失或不匹配的标签。我知道这不是有效的 html 或 xml，但是我们稍后会清理 html，此时我只需要确保在正确的位置解析 html，这很难看到没有换行符或缩进。

为了修复上面的例子，我可以手动删除或关闭`<p>`标签，但在实际数据中，有很多破损，修复标签只是为了让它解析格式化是一项不平凡的任务。在这个阶段，我试图避免手动按摩并以自动化的方式做事。

例如，对于这一个文件，tidy 报告了 65 个警告和 778 个错误。手动修复它们会浪费时间——我还不如开始自己缩进。我需要一些可以以非严格方式缩进的东西，并且不会关心不匹配的标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T19:11:19.180

你应该尝试[tidy](/questions/tagged/tidy "显示标记为“整洁”的问题")：

```
$ tidy -h
tidy [option...] [file...] [option...] [file...]
Utility to clean up and pretty print HTML/XHTML/XML 
```

见[http://tidy.sourceforge.net/](http://tidy.sourceforge.net/)

## 编辑

您的问题只是`<p>`标签，您应该删除它：

```
$ xmllint --format file.xml
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<result>
  <node>
    <title>This would be the title</title>
    <uri>/path/filename.jpg</uri>
    <alt>Alt tag data</alt>
    <body>Some text goes here.</body>
  </node>
</result> 
```

没有错误。

## 编辑 2

我的想法是使用一个工具`html2text`来提供没有 html 标签的 xml，也许你可以将 HTML 文件的缩进存储在 XML CTAGS 中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T20:29:38.267

我使用了用户[Josh Leitzel在](https://stackoverflow.com/users/86937/josh-leitzel)[此处](https://stackoverflow.com/a/746443/151841)发布的格式化功能。不完美，但足够好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-05T08:20:04.020

我最近也遇到了这个问题，并使用[BeautifulSoup](https://pypi.python.org/pypi/beautifulsoup4/4.6.0) (v4 +) 在 Python (3) 中编写了自己的问题，并通过以下方式对长行进行了一些额外的包装`textwrap.wrap()`：

```
 import sys
   from bs4 import BeautifulSoup
   from textwrap import wrap

   path = f'{sys.argv[1]}'

   with open(path) as fp:
       for line in wrap(BeautifulSoup(fp).prettify(), replace_whitespace=False):
           print(line) 
```

BeutifySoup 在混杂地解释你扔给它的大多数基于标签的垃圾方面做得很好。但是，此解决方案没有缩进标签。

# pointers - 您如何将当前分支指向 Bazaar VCS 的工作目录？

> ID：15074536
> 
> 赞同：1
> 
> 时间：2013-02-25T19:08:50.750
> 
> 标签：pointers, version-control, bazaar, working-directory

我正在尝试为我们的网站设置 Bazaar，但无法实现我想要的确切设置。基本上，我想要一个包含每个站点所有信息的文件夹，例如：

```
/var/www/site1
/var/www/site2
/var/www/site3
... 
```

我想为这些文件夹中的每个站点设置主干和任何分支。我希望文件夹本身指向一个工作目录，这样我碰巧所在的任何分支都会镜像到站点文件夹中，这样我们的服务器就可以访问它。

关于如何解决这个问题的任何想法？

# java - 尽管进行了广泛的分析，但找不到导致 API 响应时间逐渐减慢的原因，有什么想法吗？

> ID：15074540
> 
> 赞同：1
> 
> 时间：2013-02-25T19:08:59.600
> 
> 标签：java, performance, profiling, jetty, yourkit

我们的应用程序公开了一个 JSON-RPC API，使用 Jetty 和 Google Gson 来解析/生成 JSON 代码。

远程系统打开数千个与我们的应用程序的持久 HTTP 连接，并开始以每秒约 50 个的速率发送 API 请求。我们的应用程序仅使用 CPU 生成响应（即没有磁盘或数据库访问）。我们的应用程序在 EC2 虚拟机上运行。

当我们的应用程序第一次启动时，它的典型响应时间是 1-2 毫秒，但是在几个小时的过程中，它会稳步增加，直到最终达到 80 毫秒，这对于我们的应用程序来说太慢了。这是一个以纳秒为单位显示响应时间的图表，请注意稳步增加。

![API 响应时间图表（以纳秒为单位）](../Images/ab0608e72bfbc6aae9ba04a5693b231c.png)

我使用 YourKit 分析器在启动后不久捕获 CPU 快照，然后在它明显变慢时再次捕获。问题是似乎没有一种方法可以解释减速，一切都会随着时间的推移而变慢。

线程数和内存使用量似乎也没有增加，所以我现在对减速的可能原因感到茫然。

有没有人对可能的原因有任何想法，或者关于更有效的方法来隔离问题的建议？

# sql - 汇总选择的输出

> ID：15074546
> 
> 赞同：1
> 
> 时间：2013-02-25T19:09:24.943
> 
> 标签：sql, sql-server-2008, pivot

我有一个 SELECT 语句，它从几个 JOINS 中收集数据，从而产生：

```
Site    Description Status
  1     Project 1   Not Started
  1     Project 5   In Progress
  1     Project 2   Testing
  1     Project 12  Complete
  1     Project 2   Not Started
  2     Project 13  Not Started
  2     Project 20  Testing
  2     Project 21  In Progress
  2     Project 22  In Progress
  2     Project 23  Testing
  3     Project 24  Not Started
  3     Project 25  Not Started
  3     Project 26  Testing
  3     Project 29  Complete 
```

我想总结每个站点的状态以产生：

```
Site    Not Started In Progress Testing Complete
   1        2              1       1       1
   2        1              2       2       0
   3        2              0       1       1 
```

我应该能够使用“WITH”子句来处理输出。目前，它看起来像这样：

```
WITH SiteData AS (SELECT data from multiple JOINS...)

SELECT Site, Description, Status FROM SiteData 
```

因此，我不想仅仅显示数据列，而是将其转换为按站点划分的各种状态中的每个项目的计数。

那有意义吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T19:17:35.173

这种类型的数据转换称为数据*透视*。有几种方法可以将行数据转换为列。

您可以使用带有 a 的聚合函数`CASE`：

```
select site,
  sum(case when Status = 'Not Started' then 1 else 0 end) [Not Started],
  sum(case when Status = 'In Progress' then 1 else 0 end) [In Progress],
  sum(case when Status = 'Testing' then 1 else 0 end) Testing,
  sum(case when Status = 'Complete' then 1 else 0 end) Complete
from sitedata
group by site 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/b30c4/1)。

您将替换为`sitedata`现有查询。

或者您可以使用以下[`PIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)功能：

```
select site,
  [Not Started], 
  [In Progress], 
  Testing, 
  Complete
from
(
  select [Site], Status
  from sitedata
) src
pivot
(
  count(Status)
  for Status in ([Not Started], [In Progress], Testing, Complete)
) piv 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/b30c4/4)。

如果您有未知数量的`Status`值，则可以使用动态 SQL：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME([Status]) 
                    from SiteData
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT site, ' + @cols + ' from 
             (
                select [Site], Status
                from sitedata
            ) x
            pivot 
            (
                count(Status)
                for Status in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/b30c4/6)。

每个查询的结果都是一样的：

```
| SITE | NOT STARTED | IN PROGRESS | TESTING | COMPLETE |
---------------------------------------------------------
|    1 |           2 |           1 |       1 |        1 |
|    2 |           1 |           2 |       2 |        0 |
|    3 |           2 |           0 |       1 |        1 | 
```

编辑#1，如果你想要`Total`一行，那么你可以使用：

```
select 
  case when site is not null then cast(site as varchar(10)) else 'Total' end Site,
  sum([Not Started]) [Not Started], 
  Sum([In Progress])[In Progress], 
  Sum(Testing) Testing, 
  sum(Complete) Complete,
  Sum([Not Started]+[In Progress]+ Testing+ Complete) Total
from
(
  select [Site], Status
  from sitedata
) src
pivot
(
  count(Status)
  for Status in ([Not Started], [In Progress], Testing, Complete)
) piv
group by rollup (site) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/b30c4/16)

# javascript - Javascript 无法从 HTML 表单调用

> ID：15074549
> 
> 赞同：0
> 
> 时间：2013-02-25T19:09:51.087
> 
> 标签：javascript, html

我有一个调用 Javascript 函数的简单 html 页面。

由于某种原因，没有调用 JS 函数

```
<html>
    <body>
        function validateForm()
        {
            alter("Validate form")
            var x=document.forms["myForm"]["fname"].value;
            if (x==null || x=="")
            {
                alert("First name must be filled out");
            }
        <form name="myForm" onsubmit="validateForm()">
            First name: <input type="text" name="fname">
            <input type="submit" value="Submit">
        </form>

    </body> 
```

最终的js函数..

```
<html>
    <head>
        <script type="text/javascript">
            function validateForm()
            {
                alter("Validate form")
                var x=document.forms["myForm"]["fname"].value;
                if (x==null || x=="")
                {
                    alert("First name must be filled out");

                }
            }
        </script>
        <body>
            <form name="myForm" onsubmit="validateForm()">
                First name: <input type="text" name="fname">
                <input type="submit" value="Submit">
            </form>

        </body> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T19:12:36.160

javascript函数需要放在`script`标签中。如下：

```
<head>
    <script type="text/javascript">
        function validateForm() {
            alert("Validate form");
            var x = document.forms["myForm"]["fname"].value;
            if (x == null || x == "") {
                alert("First name must be filled out");
                return false;
            }
        }
    </script>
</head>
<body>
    <form name="myForm" onsubmit="return validateForm();">First name:
        <input type="text" name="fname">
        <input type="submit" value="Submit">
    </form>
</body> 
```

* * *

## 编辑

工作小提琴[链接](http://jsfiddle.net/5myKB/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T19:14:08.807

您必须将 JavaScript 包装在脚本标记中，而且您第一次拼写错误警报并关闭`}`该函数。

```
<script>
function validateForm()
    {
    alert("Validate form")
    var x=document.forms["myForm"]["fname"].value;
    if (x==null || x=="")
      {
      alert("First name must be filled out");

      }
}
</script> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-25T19:14:12.120

该函数需要包含在`<script>`标签中，并且您在脚本末尾缺少一个花括号。“警报”也拼写错误。

```
function validateForm()
{
alert("Validate form") // alert spelt wrong
var x=document.forms["myForm"]["fname"].value;
if (x==null || x=="")
  {
  alert("First name must be filled out");

  }
} // newly added brace 
```

# mongodb - 如何将 Mongoose / MongoDB 查询公开为 Express 路由

> ID：15074550
> 
> 赞同：1
> 
> 时间：2013-02-25T19:09:51.970
> 
> 标签：mongodb, rest, express, mongoose

我想创建一个快速路由来创建一个 RESTful url，将其查询参数传递给 Mongoose 查询。像这样（不起作用）的代码映射来自 url 的限制和排序参数，否则使用默认值。网址将是：

myhost/processes?limit=20&sort=-modified

```
exports.find = function(req, res) {

var options = {
    limit : 100,
    sort: '-created'
};

_(options).extend(req.query);

Process.find(options, function(err, process) {
    res.send(process);
});

} 
```

我只知道如何将查询参数传递给诸如 find() 和 sort() 之类的单个方法，而无法以更自动的方式对其进行映射。还是我试图在 RESTful api 方面做一个坏主意？我正在使用 Mongoose，但如果有帮助，我会对使用本机驱动程序的解决方案感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T19:26:08.887

假设您使用的是下划线库`extend`，您可以这样做：

```
exports.find = function(req, res) {

  var options = {
    limit : 100,
    sort: {created: -1}
  };
  _.extend(options, req.query);

  Process.find({}, null, options, function(err, process) {
    res.send(process);
  });
} 
```

参数将`options`被传递到[`Query#setOptions`](http://mongoosejs.com/docs/api.html#query_Query-setOptions)方法中，并且许多选项直接传递给 node.js 原生驱动程序，因此`sort`请参阅原生[`find`文档](http://mongodb.github.com/node-mongodb-native/api-generated/collection.html#find)。如您所见， 的格式`sort`不利于在 URL 参数中提供。

`req.query`只公开对特定选项的支持，然后单独从而不是使用中提取这些选项更安全`extend`，但任何一种方式都可以工作。

# heroku - 从 Heroku 上的 Resque::TermException 或 SIGTERM 干净地恢复

> ID：15074551
> 
> 赞同：13
> 
> 时间：2013-02-25T19:09:51.813
> 
> 标签：heroku, resque, resque-retry

当我们重新启动或部署时，我们会在失败的队列中使用`Resque::TermException (SIGTERM)`或获得许多 Resque 作业`Resque::DirtyExit`。

我们`TERM_CHILD=1 RESQUE_TERM_TIMEOUT=10`在 Procfile 中使用新的，所以我们的工作行看起来像：

```
worker:  TERM_CHILD=1 RESQUE_TERM_TIMEOUT=10 bundle exec rake environment resque:work QUEUE=critical,high,low 
```

我们还使用`resque-retry`了我认为可能会自动重试这两个异常的方法？但似乎不是。

所以我猜有两个问题：

1.  我们可以在每个作业中手动救援`Resque::TermException`，并使用它来重新安排作业。但是有没有一种干净的方法可以为所有工作做到这一点？甚至是猴子补丁。
2.  resque-retry 不应该自动重试这些吗？你能想出什么理由不这样做吗？

谢谢！

**编辑：**让所有工作在 10 秒内完成似乎在规模上是不合理的。似乎需要一种方法来在运行 Resque::DirtyExit 异常时自动重新排队这些作业。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-08-29T15:59:49.600

我也遇到了这个问题。事实证明，Heroku`SIGTERM`不仅向父进程发送信号，而且向所有分叉进程发送信号。这不是 Resque 期望的逻辑，它会导致`RESQUE_PRE_SHUTDOWN_TIMEOUT`跳过，强制执行作业而没有任何时间尝试完成作业。

Heroku 在发布 a 后给予工人 30 秒的时间优雅地关闭`SIGTERM`。在大多数情况下，这是足够的时间来完成作业，如果作业无法完成，则剩余一些缓冲时间可以将作业重新排队到 Resque。但是，要使用所有这些时间，您需要设置`RESQUE_PRE_SHUTDOWN_TIMEOUT`和`RESQUE_TERM_TIMEOUT`环境变量以及修补 Resque 以正确响应`SIGTERM`被发送到分叉进程。

这是一个修补 resque 并更详细地解释此问题的 gem：

[https://github.com/iloveitaly/resque-heroku-signals](https://github.com/iloveitaly/resque-heroku-signals)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T16:32:05.367

您的 resque 工作是否需要超过 10 秒才能完成？如果在发送初始 SIGTERM 后 10 秒内完成作业，您应该没问题。尝试将工作分解成更快完成的小块。

此外，您可以让您的工作人员重新排队做这样的工作：[https ://gist.github.com/mrrooijen/3719427](https://gist.github.com/mrrooijen/3719427)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-30T18:04:28.863

> 1.  我们可以在每个作业中手动从 Resque::TermException 中救援，并使用它来重新安排作业。但是有没有一种干净的方法可以为所有工作做到这一点？甚至是猴子补丁。

当`Resque::DirtyExit`作业被`SIGTERM`信号终止时引发异常。[正如您可以在此处阅读](http://en.wikipedia.org/wiki/Unix_signal#SIGKILL)的那样，该作业没有机会捕获异常。

> 2.  resque-retry 不应该自动重试这些吗？你能想出什么理由不这样做吗？

不明白为什么不应该，调度程序是否正在运行？如果没有`rake resque:scheduler`。

我针对我最近遇到的一些问题写了一篇详细的博文`Resque::DirtyExit`，也许有用 =>[了解 Resque 内部结构 – Resque::DirtyExit 揭晓](http://www.alfredo.motta.name/understanding-the-resque-internals-resquedirtyexit-unveiled/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-15T11:52:11.547

我也为此苦苦挣扎了一段时间，但没有找到可靠的解决方案。

我发现的少数解决方案之一是按计划运行 rake 任务（每 1 分钟 cron 作业），它查找因 Resque::DirtyExit 失败的作业，重试这些特定作业并将这些作业从故障队列中删除。

这是 rake 任务的示例 [https://gist.github.com/CharlesP/1818418754aec03403b3](https://gist.github.com/CharlesP/1818418754aec03403b3)

这个解决方案显然不是最理想的，但迄今为止，它是我找到的重试这些工作的最佳解决方案。

# javascript - Chrome 和 Firefox 中的数据更新，但 Internet Explorer 7,8 和 9 中没有

> ID：15074564
> 
> 赞同：0
> 
> 时间：2013-02-25T19:10:58.757
> 
> 标签：javascript, json, asp.net-mvc-3, knockout.js

我不确定这是淘汰赛问题、JSON 问题还是其他问题，所以我将全部解释一下。

我有一个显示许多用户的 Web 网格。我可以使用 AJAX 弹出窗口编辑这些成员。作为此窗口的一部分，我可以将角色分配给特定用户。如下图所示：

[![](../Images/ca7029a58ea908cb497920b72d7637a0.png "由 imgur.com 主办")](https://imgur.com/h9BhGp6)

这些角色是从下拉菜单中选择的，如果我想为一个用户应用多个角色，我可以添加额外的下拉菜单。我使用淘汰赛的 foreach 绑定来做到这一点。

现在，在我点击保存后，所有浏览器中的 webgrid 列都会自动更新。但是，如果我编辑一个用户并给他们额外的角色，然后点击保存，然后尝试再次编辑它们，他们新添加的角色不会显示在 IE 中。但是，Chrome 和 Firefox 可以完美运行。

当我单击此弹出窗口上的“保存”按钮时，使用以下代码将数据作为 JSON 发送到服务器：

```
 $.ajax({
                    type: 'POST',
                    dataType: 'json',
                    url: '/Person/Save',
                    dataType: 'html',
                    data: JSON.stringify(jsonObj),
                    contentType: 'application/json; charset=utf-8',
                    success: function(data) {
                        dlg.dialog("close");
                        $('#myUserGrid').html(data);
                    },
                    error: function(data) {
                        console.debug(data);
                    }
                }); 
```

弹出窗口视图中的相关 html 和敲除代码如下：

```
<tr>
        <td class="roleList" colspan="2">
            <table data-bind="foreach: RoleDdList">
                <tr>
                    <td class="label">
                        * Role:
                    </td>
                    <td>
                        <select data-bind="options: $root.Roles, value: $data.role, optionsValue:'Id', optionsText:'Name'"> <!--,optionsCaption: 'No Role' -->
                        </select>
                    </td>
                    </tr>
                <tr>
                    <td></td>
                    <td><a href="#" data-bind="click: $root.deleteRole, visible: $index()!=0">Delete Role</a></td>
                </tr>
            </table>
        </td>
        <tr></tr> 
```

ViewModel 中有很多代码，但相关的部分是

```
 var Role = function(roleId, roleName) {
    this.Id = roleId;
    this.Name = roleName;
};

// Class to represent a row in the Roles DropDown List
function RoleDropDown(initialRole) {
    var self = this;
    self.role = ko.observable(initialRole);
    }

$(function () {

    function myViewModel() {
        var self = this;

//code relating to other fields

// Role Code
        self.Roles = new ko.observableArray();
        @{
            foreach (var pair in Model.RolesList)
            {
                @:self.Roles.push(new Role(@pair.Key,"@pair.Value"));
            }
        }

        // List of Role DropDowns
        self.RoleDdList = ko.observableArray([
                new RoleDropDown(self.Roles()[0])
            ]);

        // Add a Role (code for link on form)
        self.addRole = function() {
            self.RoleDdList.push(new RoleDropDown(self.Roles()[0]));
        };

        // Delete a Role
        self.deleteRole = function(num) {
            self.RoleDdList.remove(num);
        };

        //
        @{
            if(@Model.Roles!=null)
            {

                @:self.RoleDdList.pop();

                foreach (var selectedRole in Model.RoleNumbers)
                {
                    @:self.RoleDdList.push(new RoleDropDown(@selectedRole));
                }
            }
        }

    }

    vm = new myViewModel();
    ko.applyBindings(vm);
    $.validator.unobtrusive.parse('#formUser');

}); 
```

关于这个问题的根源是什么的任何想法？

# php - AddThis AddToAny、ShareThis 等社交书签的开源替代品

> ID：15074566
> 
> 赞同：42
> 
> 时间：2013-02-25T19:11:02.813
> 
> 标签：php, javascript, html, web, social

在我尝试重新发明轮子之前，我想我会问专家。

我正在寻找一个多社交书签按钮，它允许人们将我网站的特定页面推荐给他们最喜欢的社交网络/页面阅读器/搜索引擎。

约束（以及我不想使用 ShareThis 的原因）

1.  发布的链接必须是实际链接，而不是缩短的链接。人们的名单得到共享。我希望链接显示我的域。

2.  该脚本应该由我自己的服务器提供。我怀疑从另一个域调用脚本的网页，我不想从我的域中这样做。

3.  在客户点击社交网站图标之前，客户与任何社交网站之间不应有任何联系。

4.  脚本应该在内部至少作为源有很好的文档——压缩的未注释的短变量名脚本不需要应用。

5.  脚本嵌入在静态网页中，而不是 CMS。

* * *

初步研究：

Koehl 的博客在 2009 年有一个关于这个的系列，然后这个话题就消失了。那时他推荐了 iBegin，后来变成了 Share，并从一个名为 Enthropia.com 的网站运行。检查该站点，发布了一个明显过时的演示。

有一次，AddToAny 允许在您自己的服务器上托管，但他们仍然使用该脚本来跟踪每个用户的 Web 使用情况，并声称具有适当的匿名性。对。不，谢谢。

另一个，OpenLike 有一个死的网络服务器。

在 SourceForge 上的搜索结果为空。（我尝试搜索 AddThis、AddToAny、Sharethis 等名称，然后搜索 stumbleupon、reddit、digg、google plus。没有任何相关性。）

在这一点上，我必须阅读和理解每个目标站点的 api，这样我才能编写一个做正确事情的本地脚本。不是微不足道的。

在许多方面，理想的情况是： * 一组大小和样式相似的图标 * 每个都在目标页面上打开网页（例如，FB、G+、StumbleUpon..） * 带有适合该页面的 URL 参数。

但我认为这些网站中的大多数都没有这么简单的界面。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-03-13T20:31:54.633

答案很简单。上述理想是可行的，因此主要是找到正确的代码和图标。我搜索的关键项目是**“通过 url 共享”**

# 示例 1

这是来自本网站的另一篇文章：

[仅使用 HTML（无 Javascript）的 Facebook、Twitter 和 Google +1 按钮](https://stackoverflow.com/questions/10988815/facebook-twitter-and-google-1-buttons-using-only-html-no-javascript)

```
http://www.facebook.com/sharer.php?u=http://example.com
http://twitter.com/share?url=http://example.com&text=Description
https://plusone.google.com/_/+1/confirm?hl=en&url=http://example.com 
```

# 示例 2

查看[没有 JS 或插件的 Wordpress 共享按钮](http://www.kematica.com/web-design-development/wordpress-social-share-buttons-without-javascript-or-plugins/)

```
<div class="social-button-container">
<div class="share_top_text">Share this post on:</div>
    <div class="SocialCustomMenu">
    <a class="scmTwitter" href="http://twitter.com/home/?status=<?php the_title();?> - <?php echo wp_get_shortlink();?> via @kenmata "title="Tweet this!">Twitter</a>
    <a class="scmFacebook" href="http://www.facebook.com/sharer.php?u=<?php the_permalink();?> - <?php echo wp_get_shortlink();?> "title="Share on Facebook!">Facebook</a>
    <a class="scmGoogleplus" href="https://plus.google.com/share?url=<?php the_permalink();?> -  <?php echo wp_get_shortlink();?> "title="Share on Google +!">Google +</a>
    <a class="scmPinterest" href="http://pinterest.com/pin/create/button/?url=<?php the_permalink();?> - <?php echo wp_get_shortlink();?> "title="Share on Pinterest!">Pinterest</a></a>
</div>
</div> 
```

虽然这些名义上是 wordpress，但它们应该与任何使用 php 的 Web 服务器进行一些修改。或者它们可以很容易地转换为使用模板工具包

# 示例 3：

[较少的社交分享链接](http://designedbythomas.co.uk/blog/javascript-less-social-share-links)是另一个非常干净的 HTML 示例。

你错过了一些功能：

*   没有计数器。当然，您可以在本地实现计数器。
*   对于 Facebook，人们无法看到他们的哪些朋友喜欢它。对我来说不是很大的动力。
*   在这一点上，找到每个服务的代码是一个障碍。

规格：

*   如果有人已经合并了按 URL 共享的列表，请随时在此处发布。我尚未验证以下所有内容。
*   TITLE 是共享标题。一些服务会接受它的报价。其他必须是 URL 格式：例如空格是 %20 URL 必须是完全限定的绝对值。

博主

```
http://www.blogger.com/blog_this.pyra?t=&amp;u={url}&amp;n={title} 
```

掘客

```
http://digg.com/ submit?phase=2&amp;url={url}&amp;title={title} 
```

迪戈

```
http://www.diigo.com/post?url={url}&amp;title={title} 
```

电子邮件

```
mailto:?to=&subject={title}&body={url}%0A{description} 
```

Facebook

```
http://www.facebook.com/sharer.php?u={url}&amp;t={title} 
```

邮箱

```
https://mail.google.com/mail/?view=cm&fs=1&tf=1&to=&su={title}&body={url}%0A{description} 
```

谷歌书签

```
http://www.google.com/bookmarks/mark?op=add&bkmk={url}&title={title} 
```

链接素

```
http://www.linkedin.com/shareArticle?mini=true&amp;url={url}&amp;title={title}&amp;ro=false&amp;summary={description}&amp;source= 
```

我的空间

```
http://www.myspace.com/Modules/PostTo/Pages/?u={url}&amp;t={title} 
```

兴趣

```
http://www.pinterest.com/pin/create/button/?url={url}&amp;media={image}&amp;description={title} 
```

红迪网

```
http://reddit.com/submit?url={url}&amp;title={title} 
```

棒棒哒

```
http://www.tumblr.com/share/link?url={url}&amp;name={title}&amp;description={description} 
```

推特

```
http://twitter.com/home?status={title}%20{url} 
```

邮箱

```
http://compose.mail.yahoo.com/?to=&subject={title}&body={url}%0A{description} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-08-06T00:07:22.947

对@Sherwood Botsford 列表的补充

翻板`http://share.flipboard.com/flipit/load?v=1.0&url=URL&title=TITLE`

棒棒哒`http://www.tumblr.com/share/link?url=URL&name=TITLE&description=TITLE`

博主`http://www.blogger.com/blog_this.pyra?t=&u=URL&n=TITLE`

印象笔记`http://www.evernote.com/clip.action?url=$URL&title=TITLE`

获取口袋`http://getpocket.com/save?url=$URL&title=TITLE`

**编辑**- [lyteshare.js](http://blog.futtta.be/2012/11/28/lyteshare-js-high-performance-social-widget-for-your-sharing-pleasure/)是一个精简的 javascript 可以改进以添加更多服务

**更多链接的更多来源**

两个非常全面的列表：

[github 上的 ss.js](https://github.com/itgalaxy-company/ss.js/blob/master/README.md)提供了这个 pinterest 共享 - 它适用于以前从未固定的任何东西，虽然 pinterest 没有脚本

`https://pinterest.com/pin/create/bookmarklet/?url={url}&media={image}&is_video={is_video}&description={title}`

[netvibes 自定义分享](http://faq.netvibes.com/knowledgebase/articles/370909-how-setup-a-custom-sharing)与 Buffer、百度、hoosuite 等

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-07-18T07:10:06.037

有人看到 AddThis 正在使用一种名为 Fingerprint Canvas 的新形式的跟踪 cookie 的消息吗？

[http://www.propublica.org/article/meet-the-online-tracking-device-that-is-virtually-impossible-to-block](http://www.propublica.org/article/meet-the-online-tracking-device-that-is-virtually-impossible-to-block)

我认为我们需要一些开源替代品，例如[http://expando.github.io/](http://expando.github.io/)

# php - 我的 PDO 准备好的声明有什么问题？

> ID：15074567
> 
> 赞同：0
> 
> 时间：2013-02-25T19:11:09.023
> 
> 标签：php, arrays, pdo

显然，我准备的陈述是错误的，但我不确定我做错了什么。

这两个代码段是相同的，**除了**第二行。

这失败了：

```
 $dbh = new PDO('mysql:host=localhost;dbname=' . $DB_Database, $DB_UserName, $DB_Password);
    $sth = $dbh->prepare("SELECT * FROM `PNB`.`Users` WHERE `Users`.`EMail` = :email OR `Users`.`Temp_EMail` = :temp_email");
    $sth->execute(array(':email' => $email, ':temp_email' => $email));
    $sth->setFetchMode(PDO::FETCH_ASSOC);
    $res = $sth->fetch();
    $dbh = null; 
```

这个硬编码的测试有效：

```
 $dbh = new PDO('mysql:host=localhost;dbname=' . $DB_Database, $DB_UserName, $DB_Password);
    $sth = $dbh->prepare("SELECT * FROM `PNB`.`Users` WHERE `Users`.`EMail` = 'me@example.com' OR `Users`.`Temp_EMail` = 'me@example.com'");
    $sth->execute(array(':email' => $email, ':temp_email' => $email));
    $sth->setFetchMode(PDO::FETCH_ASSOC);
    $res = $sth->fetch();
    $dbh = null; 
```

我究竟做错了什么？

谢谢！

**更新：**解决了！

确切的问题仍然未知，但似乎与用户“你的常识”在下面的评论中建议的“过度命名”有关。

这工作得很好：

```
$dbh = new PDO('mysql:host=localhost;dbname=' . $DB_Database, $DB_UserName, $DB_Password);
$sth = $dbh->prepare("SELECT * FROM Users WHERE EMail=:email OR Temp_EMail=:temp_email");
$sth->execute(array(':email' => $email, ':temp_email' => $email)); 
```

谢谢大家。我学到了很多东西并解决了这个问题。

传达您的常识的信息；如果您将评论形成为“答案”，那么我可以接受。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T19:19:38.833

很难一眼就回答。
你的代码对我来说似乎没问题。因此，调试似乎是唯一的方法。

> 我究竟做错了什么？

始终向您的 PDO 提出这个问题。
每次连接到 PDO 时，都以这种方式进行（还要确保您可以看到错误，无论是在屏幕上还是在日志中）：

```
error_reporting(E_ALL);
$opt = array(PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION);
$dsn = 'mysql:host=localhost;dbname=' . $DB_Database;
$dbh = new PDO($dsn, $DB_UserName, $DB_Password, $opt); 
```

如果有错误 - 您会收到通知。
如果没有 - 检查类似错字的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T00:32:34.410

尝试这个

```
 $dbh = new PDO('mysql:host=localhost;dbname=' . $DB_Database, $DB_UserName, $DB_Password);
$sth = $dbh->prepare("SELECT * FROM `PNB`.`Users` WHERE `Users`.`EMail` = :email OR `Users`.`Temp_EMail` = :temp_email");
$sth->bindParam(':email', $email, PDO::PARAM_STR);
$sth->bindParam(':temp_email', $email, PDO::PARAM_STR);
$sth->execute();
$res = $sth->fetch(PDO::FETCH_ASSOC);
$dbh = null; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T19:26:37.590

快速尝试一下——这两行你做得对吗？

```
$sth = $dbh->prepare("SELECT * FROM `PNB`.`Users` WHERE `Users`.`EMail` = :email OR `Users`.`Temp_EMail` = :temp_email");
$sth->execute(array(':email' => 'me@example.com', ':temp_email' => 'me@example.com')); 
```

换句话说...您是否设置了 $email 变量？

# .net - NetMsmqBinding：消息被多次处理

> ID：15074568
> 
> 赞同：2
> 
> 时间：2013-02-25T19:11:10.117
> 
> 标签：.net, wcf, msmq, message-queue, transactionscope

我的团队有一个 Windows 服务，它使用 http 绑定托管一个 wcf 服务。当 wcf 服务接收到消息时，它会立即使用 NetMsmqBinding 将消息发送到另一个 wcf 服务，该服务也托管在 Windows 服务中。msmq 服务处理消息并将其保存到我们的数据库中。

在开发和登台环境中，一切正常。但是，当我们部署到生产环境时，我们看到发送到我们服务的消息被乘以 n+1 倍（对于 n 条消息）。

例如：收到 1 条消息，2 条已保存到 DB。收到 4 条消息，20 条保存到数据库等。

我们怀疑它与 Transactions 的 msmq 服务设置有关，

Concurrency，和InstanceContextMode，但我们想不通。

该服务的设置是：

*   InstanceContextMode：默认值。
*   并发模式：默认
*   交易：TransactionScoreRequired = True 和 TransactionAutoComplete = True。
*   重试计数 = 1，重试周期 = 1

我们使用 .Net 4、MSMQ 3.0 和 Windows server 2003。

关于可能导致此问题的任何想法？

编辑：

经过大量研究，我们发现了以下几点：

*   当 wcf 运行时尝试为单个消息提交事务时，它会引发“事务已异步中止”异常。每次复制消息时都会引发此异常。
*   在 wcf 跟踪中，我们没有看到除上述异常之外的任何异常。
*   在 System.Transaction 跟踪中，我们看到正在打开一个事务（对于第一条消息），然后在 wcf 运行时创建该事务的克隆后（使用属性 RollbackIfNotCompleted=true），几秒钟后没有消息进入跟踪，然后同样的事情再次发生。

我们真是一头雾水……

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T14:51:08.710

MSMQ 不会删除消息，除非您的应用程序将其删除或 TimeToBeReceived 计时器到期。

如果我正确理解了您的环境，您的问题可能是由于收到消息的处理时间过长造成的。如果在同一事务中完成消息的接收和重新发送，则第一个 WCF 服务可能会在最终从队列中删除之前多次尝试读取同一消息。

这使我想到了您可以尝试的以下想法：

*   您可以在收到原始消息后尝试创建一条内容相同的新消息并将新消息发送到下一个 WCF 服务。这应该会减少接收到的消息的生命周期。

*   如果您需要保留相同的消息顺序，您可以尝试 Miker169 的建议将您的配置更改为`InstanceContextMode.Single , ConcurrencyMode = ConcurrencyMode.Single`( [https://stackoverflow.com/a/2610093/219344](https://stackoverflow.com/a/2610093/219344) )

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T18:05:10.990

好吧，我们终于明白了：我们使用 Entlib 进行日志记录，并添加了一个 DB 侦听器。Entlib DB 侦听器使用服务的相同事务。当它试图将事务传递给数据库服务器时，会抛出一个错误，因为数据库服务器上没有正确配置 MSDTC，这会导致事务回滚。当 WCF 运行时尝试提交事务时，它会失败，因为它已经中止，然后它会尝试再次处理相同的消息（因为内置的重试机制）。

当我们修复 MSDTC 设置时，复制停止了。
现在，我们需要弄清楚的是：为什么回滚到服务事务会导致消息成倍增加？

# java - 如何将元素添加到地图中的 ArrayList？

> ID：15074575
> 
> 赞同：0
> 
> 时间：2013-02-25T19:11:27.447
> 
> 标签：java, collections

我使用在地图中创建一个 ArrayList

```
Map <String, ArrayList<String>> firmMSAMap = new HashMap<String, ArrayList<String>>() ; 
```

如何将元素添加到此地图中的 ArrayList？如果我的声明有误，请纠正我。我正在尝试拥有一个包含 ArrayList 的 Map

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T19:12:49.637

将 String 添加`foo`到由 String 键入的 ArrayList 中`baz`：

```
firmMSAMap.get("baz").add("foo"); 
```

上面的代码执行以下操作：

1.  它检索与键一起存储的 ArrayList`baz`
2.  它将一个字符串添加到 ArrayList

**注意：**这假定 Map 已经包含 ke `baz 的值。

否则，您将不得不像这样创建一个新的 ArrayList：

```
firmMSAMap.put("baz", new ArrayList<String>()); 
```

这是一个更好的例子，它检查一个值是否首先被映射：

```
Map<String, List<String>> theMap = ...

if (theMap.containsKey("baz")) {
    theMap.get("baz").add("foo");
}
else {
    List<String> tempList = new ArrayList<String>();
    tempList.add("foo");
    theMap.put("baz", tempList);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T19:13:12.097

你需要从地图和元素到它`get`的 ArrayList`add`

```
firmMSAMap.get("your List key").add("new element of list"); 
```

但是当然要能够做到这一点，您的地图首先需要包含“您的列表键”->ArrayList 对，所以您需要先`put`在那里

```
firmMSAMap.put("your List key", new ArrayList<String>()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T19:12:20.230

您应该定义新的 ArrayList 对象并将其与键

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-25T19:13:16.823

这会将 String 键映射到 ArrayList 值。所以如果你想在键“foo”处有一个 ArrayList，那么：

```
firmMSAMap.put("foo", new ArrayList<String>()); 
```

# android - 根据 Imageviews 的高度和宽度在 onCreate() 中创建缩放位图

> ID：15074578
> 
> 赞同：3
> 
> 时间：2013-02-25T19:11:32.877
> 
> 标签：android, bitmap, imageview

这是我遇到的问题，在 onCreate() 中，我想最初将 imageview 设置为文件列表中的第一个图像，但使用 ImageViews 的宽度和高度，当它来回翻转时，它将图像设置为 ImageViews尺寸没问题，但在 onCreate() 中我得到 IllegalArgumentException 宽度和高度必须大于 0。如果它没有在 onCreate() 中发生，我尝试创建 start 方法，idk，非常感谢任何帮助，谢谢您的时间

```
 public class ViewFlipperActivity extends Activity {

   ViewFlipper page;

   Animation animFlipInForeward;
   Animation animFlipOutForeward;
   Animation animFlipInBackward;
   Animation animFlipOutBackward;
   String[] imagefiles;
   File file = new File(Environment.getExternalStoragePublicDirectory(
              Environment.DIRECTORY_PICTURES), "how");
   int filescount,nowcount;
   ImageView image;
   Matrix matrix;
   Bitmap d;

   /** Called when the activity is first created. */
   @Override
   public void onCreate(Bundle savedInstanceState) {
   super.onCreate(savedInstanceState);
   setContentView(R.layout.main);
   imagefiles = file.list();
   filescount = imagefiles.length;
   nowcount = 0;
   matrix = new Matrix();
   matrix.postRotate(90);
   page = (ViewFlipper)findViewById(R.id.flipper);
   image = (ImageView)findViewById(R.id.zero);

   animFlipInForeward = AnimationUtils.loadAnimation(this, R.anim.left_in);
   animFlipOutForeward = AnimationUtils.loadAnimation(this, R.anim.left_out);
   animFlipInBackward = AnimationUtils.loadAnimation(this, R.anim.right_in);
   animFlipOutBackward = AnimationUtils.loadAnimation(this, R.anim.right_out);
   start();
   }
   private void start(){
   d = BitmapFactory.decodeFile(file.toString() +"/" + imagefiles[nowcount]);

   d = Bitmap.createBitmap(d, 0, 0, d.getWidth(), d.getHeight(), matrix, true);
   System.gc();
   d = Bitmap.createScaledBitmap(d, image.getWidth(), image.getHeight(), true);
   System.gc();
   image.setImageBitmap(d);
   System.gc();
   }

   private void SwipeRight(){
   page.setInAnimation(animFlipInBackward);
   page.setOutAnimation(animFlipOutBackward);
   nowcount--;
   if(nowcount < 0)
 nowcount = filescount - 1;
   d = BitmapFactory.decodeFile(file.toString() +"/" + imagefiles[nowcount]);

   d = Bitmap.createBitmap(d, 0, 0, d.getWidth(), d.getHeight(), matrix, true);
   System.gc();
   d = Bitmap.createScaledBitmap(d, image.getWidth(), image.getHeight(), true);
   System.gc();
   image.setImageBitmap(d);
   System.gc();

   page.showPrevious();
   Log.d("show previous", "exe");
   }

   private void SwipeLeft(){
   page.setInAnimation(animFlipInForeward);
   page.setOutAnimation(animFlipOutForeward);
   nowcount++;
   if(nowcount > 3)
 nowcount = 0;
   d = BitmapFactory.decodeFile(file.toString() +"/" + imagefiles[nowcount]);

   d = Bitmap.createBitmap(d, 0, 0, d.getWidth(), d.getHeight(), matrix, true);
   System.gc();
   d = Bitmap.createScaledBitmap(d, image.getWidth(), image.getHeight(), true);
   System.gc();
   image.setImageBitmap(d);
   System.gc();
   page.showNext();
   Log.d("show next", "exe");
   }

  @Override
  public boolean onTouchEvent(MotionEvent event) {
   // TODO Auto-generated method stub
  return gestureDetector.onTouchEvent(event);
  }

  SimpleOnGestureListener simpleOnGestureListener
  = new SimpleOnGestureListener(){

  @Override
   public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
  float velocityY) {

  float sensitvity = 50;
  if((e1.getX() - e2.getX()) > sensitvity){
   SwipeLeft();
  }else if((e2.getX() - e1.getX()) > sensitvity){
  SwipeRight();
  }

  return true;
  }

  };

  GestureDetector gestureDetector
  = new GestureDetector(simpleOnGestureListener);
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T19:18:57.090

图像视图的高度和宽度只会在父视图请求布局时计算，这是在`onCreate`完成之后。您应该实现一个[OnGlobalLayoutListener](http://developer.android.com/reference/android/view/ViewTreeObserver.OnGlobalLayoutListener.html)并从那里获取 imageview 的高度和宽度。但是，您不应该在其中加载图像，而是使用一种`AsyncTask`或其他方法将其加载到背景上。

# scala - 简单的scala代码：从字符串数组返回第一个元素

> ID：15074580
> 
> 赞同：7
> 
> 时间：2013-02-25T19:11:49.117
> 
> 标签：scala

我不知道如何修复此代码。**它在returnFirstString**某处“​​爆炸”，但我不知道为什么。另外，我不知道如何使用**println**正确显示结果。这种方法可以吗。

所以这里是代码：

```
def returnFirstString(a: Array[String]): Option[String]=
{
    if(a.isEmpty) { None }
    Some(a(0))
}
val emptyArrayOfStrings = Array.empty[String]
println(returnFirstString(emptyArrayOfStrings)) 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-25T19:14:47.950

您没有正确返回无：

```
 def returnFirstString(a: Array[String]): Option[String] = {
    if (a.isEmpty) {
      None
    }
    else {
      Some(a(0))
    }
  } 
```

此外，在大多数 scala 集合中已经有一种方法：

```
emptyArrayOfStrings.headOption 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-25T19:15:56.847

最简洁的方式：

```
def returnFirstString(a: Array[String]): Option[String]= a.headOption 
```

# java - “AWT-EventQueue-0”java.lang.NullPointerException

> ID：15074581
> 
> 赞同：-1
> 
> 时间：2013-02-25T19:11:51.967
> 
> 标签：java, swing

我的代码中出现“线程“AWT-EventQueue-0”java.lang.NullPointerException 中的异常”。我不知道为什么以及在哪里发生此异常。编译工作正常，但有时我在运行时收到此错误。我可以在这里帮忙吗？完整的错误信息是这样的：

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
at javax.swing.plaf.basic.BasicTableUI.paintCell(BasicTableUI.java:2115)
at javax.swing.plaf.basic.BasicTableUI.paintCells(BasicTableUI.java:2016)
at javax.swing.plaf.basic.BasicTableUI.paint(BasicTableUI.java:1812)
at javax.swing.plaf.ComponentUI.update(ComponentUI.java:161)
at javax.swing.JComponent.paintComponent(JComponent.java:778)
at javax.swing.JComponent.paint(JComponent.java:1054)
at javax.swing.JComponent.paintToOffscreen(JComponent.java:5221)
at javax.swing.BufferStrategyPaintManager.paint(BufferStrategyPaintManager.java:295)
at javax.swing.RepaintManager.paint(RepaintManager.java:1206)
at javax.swing.JComponent._paintImmediately(JComponent.java:5169)
at javax.swing.JComponent.paintImmediately(JComponent.java:4980)
at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:770)
at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:728)
at javax.swing.RepaintManager.prePaintDirtyRegions(RepaintManager.java:677)
at javax.swing.RepaintManager.access$700(RepaintManager.java:59)
at javax.swing.RepaintManager$ProcessingRunnable.run(RepaintManager.java:1621)
at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251)
at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:705)
at java.awt.EventQueue.access$000(EventQueue.java:101)
at java.awt.EventQueue$3.run(EventQueue.java:666)
at java.awt.EventQueue$3.run(EventQueue.java:664)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
at java.awt.EventQueue.dispatchEvent(EventQueue.java:675)
at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:211)
at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:117)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)
at java.awt.EventDispatchThread.run(EventDispatchThread.java:90) 
```

我的代码的一部分：

```
class UserAgentGui extends JFrame implements ActionListener, ListSelectionListener, CinemaVocabulary {

private JTable movieTable;

public UserAgentGui(UserAgent a) {
// -----------------------------------   Constructor

    Object obj[][] = new Object[0][columnNames.length];
    TableModel model = new TableDataModel(obj, columnNames);
    movieTable = new JTable(model);
movieTable.setFillsViewportHeight(true);
    movieTable.setPreferredScrollableViewportSize(new Dimension(320,100));
    movieTable.setFont(new Font("Arial", Font.PLAIN, 11));
}

void displayMovies(java.util.leap.List list) {
// -------------------------------------------
    String s = "";

    if (menu.getSelectedItem().equals(actions[1])){//  <-- This is a list of movies
        s = "Movie-databse is presented";
        data = new Object[list.size()][columnNames.length];
        for (int i = 0; i < list.size(); i++) {
            Movie movie = (Movie)list.get(i);
            data[i][0] = movie.getTitle();
            data[i][1] = movie.getYear();
            data[i][2] = movie.getKind();
            data[i][3] = 0.0;
        }
    TableDataModel model = (TableDataModel)movieTable.getModel();
    model.setData(data);
    movieTable.setModel(model);
    movieTable.updateUI();
    }
    else {
        s = "Score Movies";
    }
    msg_text.setText(s);    
}

// =========================== External class ============================//

/* TableDataModel:
*  --------------
*  External class for the definition of the tables data model, used to
*  control the display of data within the different tables
**/
class TableDataModel extends AbstractTableModel {
// ----------------------------------------------

   private String[] columns;
   private Object[][] data;

   public TableDataModel(Object[][] data, String[] columns) {
   // ----------------------------------------------------------  Constructor
      this.data = data;
      this.columns = columns;
   }

   public int getColumnCount() {
   // -----------------------------  Return the number of columns in the table
      return columns.length;
   }

   public int getRowCount() {
   // --------------------------  Return the number of rows in the table
      return data.length;
   }

   public String getColumnName(int col) {
   // --------------------------------------  Return the name of a column
      return columns[col];
   }

  public boolean isCellEditable(int row, int col) {
   // -------------------------------------------------
            if (col == 3) {
                return true;
           } else {
               return false;
            }
   }

   public Object getValueAt(int row, int col) {
   // --------------------------------------------  Return the value at a specific
//                                               row and column
      if ( data.length == 0 ) return null;
         return data[row][col];
    }

   public Class getColumnClass(int col) {
   // --------------------------------------  Return the class of the values held
   //                                         by a column
      Object o = getValueAt(0, col);
      if (o == null) return columns[col].getClass();
         return getValueAt(0, col).getClass();
   } 

   public void setValueAt(Object value, int row, int col){
    // -------------------------------------------------------  Set the value at a        specific
   //                                                          row and column
      data[row][col] = value;
  }

   public void setData(Object[][] data){
   // -------------------------------------  Update the entire data in the table
       this.data = data;
   }

   Object[][] getData(){
   // ---------------------  Return the entire data of the table
       return data;
   }
}// end TableDataModel
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T19:35:19.440

`Object obj[][] = new Object[0][columnNames.length];`
您已将 obj 的第一维大小设置为 0。
它应该是`Object obj[][]= new Object[1][columnNames.length]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T20:14:00.387

> 我的代码中出现“线程“AWT-EventQueue-0”java.lang.NullPointerException 中的异常”。我不知道为什么以及在哪里发生此异常。编译工作正常，但有时我在运行时收到此错误。我可以在这里帮忙吗？完整的错误信息是这样的：

*   这个问题根本无法回答，为了获得更好的帮助，请尽快发布 SSCCE，简短，可运行，可编译，需要将所有自定义类硬编码到局部变量

*   您混合了两个 XxxTableModel，没有理由从 TableModel 中获取 TableDataModel 模型

*   此代码中的 TableModel 未知

*   TableDataModel 未添加到可见 JTable，

*   void displayMovies(java.util.leap.List list) { 不是标准的 java 导入

*   电影表.updateUI(); 将在您创建自己的 BasicTableUI 的情况下工作，但这部分没有 XxxTableModel 和代码发布在这里，

*   updateUI() 是 UIManager 和 Look And Feel 的方法，不用于将数据从共享模型显示到屏幕

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T19:13:55.823

您可以从堆栈跟踪中看到它正在尝试绘制您的屏幕内容。也许某些内容在该屏幕或其组件之一上未正确初始化。

# c# - 使用 iis 而不是 Visual Studio 2010 的开发服务器时路由不起作用

> ID：15074584
> 
> 赞同：1
> 
> 时间：2013-02-25T19:11:57.667
> 
> 标签：c#, asp.net-mvc, iis-7, .net-4.0

我必须处理旧的 asp.net mvc web 应用程序（.net 4）。它使用一些自定义路由，当我使用 Visual Studio 2010 的开发服务器时效果很好。但是，当我改用 iis 时（在调试期间），它似乎不起作用（以前在调试期间从未使用过 iis）。

[这里](https://stackoverflow.com/questions/4428278/asp-net-4-routing-not-working-in-iis-7)提供的答案似乎没有帮助。我已经使用：

```
<system.webServer>
    <validation validateIntegratedModeConfiguration="false"/>
    <modules runAllManagedModulesForAllRequests="true"/>
</system.webServer> 
```

路由可能无法正常工作还有其他原因吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T19:54:41.443

一个通用的帖子，不幸的是，互联网信息系统会产生大量的配置问题。这很可能是它最大的陷阱。当您在部署服务器、本地服务器或生产服务器上启动它时，结果可能永远不会相同。

我将使用互联网信息系统六，因为它类似于七和八，只是缺少某些功能。

在您的*ASP.NET MVC Web 应用程序*项目中，您需要右键单击您的项目并选择*Properties*。

您应该会看到一个指示单词的选项卡：*Web**

*   在此选项卡的底部，您需要确保选中*使用 IIS Web 服务器*。
*   您需要在其中放置一个*项目 URL*。

该字段应如下所示：`*http://localhost/ApplicationName*`. 您在这里所做的基本上是为 IIS 映射您的项目目录。您会看到每个 IIS 站点都在以下位置存储了一个站点：

`C:\inetpub\wwwroot`

那是您的根站点文件夹，IIS 将在其中引用您的所有站点组件。** 请记住，项目中的这个虚拟目录实际上与列出的 IIS 配置项不同。**

现在您要打开 Internet 信息系统，您要设置*文件扩展名*。因此，在 IIS 中执行任何操作之前，您需要配置*ASP.NET MVC Installer*。您需要将 .mvc 扩展名的映射 (ISAPI) 配置为`aspnet_isapi.dll`. 为了让 IIS 将**使用 .mvc 扩展名的路由请求传递给 ASP.NET，此步骤是必需的。**

从一篇很好的博客文章中，他说：

> 如果您打算使用无扩展名 URL，则可以跳过本节，但无论如何阅读它可能会很有用，因为它包含一些您在设置无扩展名 URL 时需要了解的信息。将 .mvc 映射到 ASP.NET
> 
> 如果您计划使用 .mvc URL 扩展，并且要在未安装 ASP.NET MVC 的计算机上部署到 IIS 6，则需要通过执行以下步骤来创建此映射。
> 
> 使用 .aspx 扩展名而不是 .mvc 的一个好处是您不必担心映射 .aspx 扩展名。假设您在机器上正确安装了 ASP.NET，它应该已经被映射。
> 
> 对于其他人，首先右键单击虚拟应用程序节点（在本例中为 IIS6DemoWeb）并选择属性。您应该看到以下对话框。

![列出的对话框](../Images/bab1f393c6e090cab9fbcfc3354c55e0.png)

确保您在*虚拟目录选项卡*中并选择配置。这将允许更改根网站。这应该会打开您的*应用程序配置对话框*。这将允许您物理映射您的应用程序。由于您使用`.mvc`的是您将选择的内容。

如果`.mvc`未在列表中找到，您可以在此处指向数据链接库：

`c:\windows\microsoft.net\framework\v2.0.50727\aspnet_isapi.dll`

现在，在您运行应用程序之前，您需要更新默认路由，以便它们查找正确的文件扩展名。在你的`Global.asax.cs`你会想要确保你使用的`.mvc`扩展。

您将实现一个方法，例如：

```
public static void RegisterRoutes(RouteCollection routes)
{
  routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

  routes.MapRoute(
    "Default",
    "{controller}.mvc/{action}/{id}",
    new { action = "Index", id = "" }
  );

  routes.MapRoute(
    "Root",
    "",
    new { controller = "Home", action = "Index", id = "" }
  );

} 
```

这应该允许网站正确显示。这是一个非常非常通用和广泛的例子。但希望这能为您指明一个好的方向。

* * *

**更新：**

在使用互联网信息系统七时，您必须注意以下事项：

*   站点配置
*   应用程序池
*   数据库配置

这三个项目是错误配置的常见罪魁祸首。

一个非常棒的博客可以在[这里](http://weblogs.asp.net/scottgu/archive/2010/07/29/vs-2010-web-deployment.aspx)找到：另一篇不错的文章可以在[这里](http://www.hanselman.com/blog/SlowCheetahWebconfigTransformationSyntaxNowGeneralizedForAnyXMLConfigurationFile.aspx)找到：

但是，这篇文章应该直击[你的头](http://www.asp.net/mvc/tutorials/older-versions/deployment/using-asp-net-mvc-with-different-versions-of-iis-cs)：

正如我所说，上述细节应该可以解决您的问题。但是，随着 IIS 7 的引入，它们有两种完全不同的方法来允许请求：*集成*和*经典*。

主要区别在于*集成*将表现更好并包含更多功能。Classic是为向后兼容而设计的*。*您的路由请求处理方法由您的**Application Pool**确定。配置不正确；它行不通。

1.  启动 Internet 信息服务管理器
2.  在 Connections 窗口中，选择一个应用程序
3.  在“操作”窗口中，单击“基本设置”链接以打开“编辑应用程序”对话框
4.  记下所选的应用程序池。

> 默认情况下，IIS 配置为支持两个应用程序池：DefaultAppPool 和 Classic .NET AppPool。如果选择了 DefaultAppPool，那么您的应用程序将在集成请求处理模式下运行。如果选择 Classic .NET AppPool，则您的应用程序将以经典请求处理模式运行。

![编辑应用程序池 图 1.1](../Images/83931e267995ab1021a1551a3f359acc.png)

在该框中，您将能够在“编辑应用程序对话框”中修改处理模式。

希望这些附加信息能更好地帮助您实现目标。前两个博客是避免 IIS，第三个专门关注 IIS 7。如果您有任何问题，请告诉我。

# c# - 在 C# 中使用 lambda 对数组执行多个函数

> ID：15074586
> 
> 赞同：1
> 
> 时间：2013-02-25T19:12:03.440
> 
> 标签：c#, string, lambda

我有一个字符串，我想在一个特定的分隔符上拆分它，然后从每个成员中删除起始和尾随空格。目前代码如下所示：

```
string s = "A, B, C ,D";
string[] parts = s.Split(',');
for(int i = 0; i++; i< parts.Length)
{
     parts[i] = parts[i].Trim();
} 
```

我觉得应该有一种方法可以用 lambdas 来做到这一点，这样它就可以放在一条线上，但我无法绕开它。我宁愿远离 LINQ，但我也不反对它作为解决方案。

```
string s = "A, B, C ,D";
string[] parts = s.Split(','); // This line should be able to perform the trims as well 
```

我最近一直在使用 Python，我认为这让我重新审视了我如何看待 C# 中问题的解决方案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-25T19:13:15.050

关于什么：

```
string[] parts = s.Split(',').Select(x => x.Trim()).ToArray(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-25T19:13:31.723

```
var parts = s.Split(',').Select(part => part.Trim()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T19:18:58.550

如果您*真的*想避免使用 LINQ，您可以拆分多个字符并丢弃在“，”和空格之间获得的额外“空”条目。请注意，您最终可能会得到奇怪的结果（例如，如果您有连续的“，”分隔符，您将不会再在它们之间获得空字符串）：

```
s.Split(new char[] { ',', ' ' }, StringSplitOptions.RemoveEmptyEntries); 
```

这将适用于您的示例输入，但它非常脆弱。例如，正如@Oscar 指出的那样，令牌中的空格*也会*导致它们被拆分。我强烈建议您改用基于 LINQ 的选项之一。

# mysql - 了解弱实体和弱关系

> ID：15074590
> 
> 赞同：0
> 
> 时间：2013-02-25T19:12:38.540
> 
> 标签：mysql, sql, database, erd

如果我有以下 ERD：

```
 ------
|Inv   |
---------
   1

   |
 <<contains>>

   |
   m
--------
--------                             ---------
||Line  ||  1 --- <<has a>> --- 1  | prod     |
--------                            ----------
-------- 
```

`Line`弱实体在哪里，`contains`并且`has a`是弱关系，Line 的主键会是什么样子？

我一直在网上寻找，我想这将是一个复合主键，包括：

```
PK = (ID from line, Primary Key from Inv, Primary Key from Prod) 
```

谁能帮我吗？我对吗？我哪里做错了？等等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T22:00:16.190

> 我一直在网上寻找，我想这将是一个复合主键，包括：

```
PK = (ID from line, Primary Key from Inv, Primary Key from Prod) 
```

不，Inv 中的主键和行项目编号足以识别表“行”中的一行。如果您想实现进一步的业务要求——每个产品在每张发票中只能出现一次——您可以对列对 {value from Inv, value from Prod} 进行额外的唯一约束。

实际上，我不会在“Inv”*或*“Line”中使用自动递增的 id 编号。自动递增 id 编号会留下空白，而会计师讨厌空白。通过扩展，数据库人员也讨厌这些数字中的差距。（我们是那些因“丢失”行而受到指责的人。）

您还需要小心存储产品的 ID 号。如果产品名称发生变化，它似乎会在所有过去的发票上发生变化。这是在法庭上对法官不利的好方法。

# performance - 对于给定类型的节点、关系和查询，neo4j 在时间和空间复杂度上的表现如何？

> ID：15074593
> 
> 赞同：1
> 
> 时间：2013-02-25T19:12:43.597
> 
> 标签：performance, storage, neo4j, time-complexity, graph-databases

考虑一下我的图表中将包含以下内容：

```
100 Million nodes, More than 1 Billion connections/relationships

Node properties: around 10 properties, mix of int, doubles, strings, HashMaps etc.

Relationship properties: around 10 double values and 2-3 string (with avg 50 chars) values 
```

现在，假设我想通过在每个节点上查询一次邻居来更新所有节点和关系属性值。即说，

```
step1: search a node, say X, with given Id,
step2: get it's neighbours,
step3: update node properties of X and all relationship properties between X and it's neighbors. 
```

对所有节点重复这 3 个步骤一次。给定以下系统配置，一次更新所有节点需要多少时间（大约时间对我来说是可以的，可能以秒/分钟/小时为单位）：

```
Two dual core processors, 3.0 GHz each, 4*4 GB memory, 250 GB Hard disk space. 
```

上述数据大约需要多少存储空间？

请通过提供任何近似的样本性能（时间和存储）分析来帮助我。任何示例性能分析都将帮助我可视化我的需求。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T03:07:41.517

节点/关系的大小考虑非常容易。每个节点为 9 个字节，每个关系为 33 个字节。

```
9B x 100M = 900 Million Bytes =~ 858.3 Megabytes for nodes
33B x 1B = 33 Billion bytes =~ 30.7 Gigabytes for relationships 
```

至于计算，很难衡量。Neo4j 缓存与磁盘上的内容不是一对一的，因此您的存储空间可能约为 31Gb，但您需要更多的存储空间才能将其存储在缓存中。Neo4j 将信息存储在磁盘上的方式对于这种类型的遍历是有效的，因为它们将节点的所有关系和属性存储在链表中，因此通过迭代器访问它们比搜索一种类型的关系更有效。

很难给你一个估计，但我想说，因为你正在经历重复的关系，什么可以放在 RAM 和磁盘上，等等。考虑到你的系统和大小，我的猜测是几个小时（<6Hrs.）要求。

# java - SpringJUnit4ClassRunner 中的@AfterClass（如何在拆解中使用 bean）

> ID：15074602
> 
> 赞同：0
> 
> 时间：2013-02-25T19:13:16.137
> 
> 标签：java, spring, junit

我想在弹簧单元测试（SpringJUnit4ClassRunner）的拆卸方法中使用bean。但是这个方法（用@AfterClass 注释）应该是静态的。有什么解决办法？

例子：

```
@RunWith(SpringJUnit4ClassRunner.class)
//.. bla bla other annotations
public class Test{

@Autowired
private SomeClass some;

@AfterClass
public void tearDown(){
    //i want to use "some" bean here, 
    //but @AfterClass requires that the function will be static
    some.doSomething();
}

@Test
public void test(){
    //test something
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T19:17:24.650

也许您想使用@After 而不是@AfterClass。它不是静态的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T19:57:33.110

JUnit 为每个测试方法使用一个新实例，因此在`@AfterClass`执行时测试实例不存在并且您无法访问任何成员。

如果您真的需要它，您可以使用应用程序上下文向测试类添加一个静态成员，并使用`TestExecutionListener`

例如：

```
public class ExposeContextTestExecutionListener  extends AbstractTestExecutionListener {

    @Override
    public void afterTestClass(TestContext testContext) throws Exception {
        Field field = testContext.getTestClass().getDeclaredField("applicationContext");
        ReflectionUtils.makeAccessible(field);
        field.set(null, testContext.getApplicationContext());
    }
}

@RunWith(SpringJUnit4ClassRunner.class)
@TestExecutionListeners(listeners={ExposeContextTestExecutionListener.class})
@ContextConfiguration(locations="classpath:applicationContext.xml")
public class ExposeApplicationContextTest  {

    private static ApplicationContext applicationContext;

    @AfterClass
    public static void tearDown() {
        Assert.assertNotNull(applicationContext);
    }
} 
```

# infopath2010 - 创建数据连接时出现信息路径错误

> ID：15074606
> 
> 赞同：0
> 
> 时间：2013-02-25T19:13:28.093
> 
> 标签：infopath2010

我创建了一个 SOAP webservice 以在 infopath 表单中使用，并添加了返回数据表作为返回类型的方法。当我尝试添加数据连接时，它给了我一个错误，指出“选择的 XML 文档不能用作数据连接源，因为它包含内联 XDR 模式”。这是我写的webmethod。它运行良好在浏览器中运行。

```
[WebMethod]
public DataTable GetApplications()
{
    DataTable dt;

        using (SPSite mysite = new SPSite(SPContext.Current.Web.Url))
        {
            using (SPWeb myweb = mysite.OpenWeb())
            {

                SPSiteDataQuery query = new SPSiteDataQuery();
                query.Lists = "<Lists ServerTemplate=\"115\" />";
                query.ViewFields = "<FieldRef Name=\"Applicant File Number\" Nullable=\"TRUE\" Type=\"Text\" />" +
                                  "<FieldRef Name=\"Application Category \" Nullable=\"TRUE\" Type=\"Text\"/>" +
                                  "<FieldRef Name=\"Application Type  \" Nullable=\"TRUE\" Type=\"Text\"/>" +
                                 "<FieldRef Name=\"Submission ID  \" Nullable=\"TRUE\" Type=\"Text\"/>";
                query.Query = "<OrderBy>" +
                                "<FieldRef Name=\"Submission ID\" />" +
                            "</OrderBy>";
                query.Webs = "<Webs Scope=\"SiteCollection\" />";
                dt= myweb.GetSiteData(query);
                dt.TableName = "myApplications";
                return dt;
            }
        }        

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T22:11:58.460

将数据表添加到数据集，并通过数据连接将数据集返回到 infopath 表单。它运作良好。

# iphone - 更改日期选择器样式 iphone

> ID：15074618
> 
> 赞同：0
> 
> 时间：2013-02-25T19:14:15.123
> 
> 标签：iphone, datepicker

我现在拥有的日期选择器的样式如下：mm/dd/YYYY，它显示在“YYYY/MM/DD”的文本字段中。

如何更改我的代码，以便显示的日期选择器也更改为“YYYY/MM/DD”。这是我的代码：

```
NSCalendar *calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar] ;
        NSDate *currentDate = [NSDate date];
        NSDateComponents *comps = [[NSDateComponents alloc] init] ;
        [comps setYear:-10];
        NSDate *maximumDate = [calendar dateByAddingComponents:comps toDate:currentDate  options:0];
        [comps setYear:-10];
        NSDate *minimumDate = [calendar dateByAddingComponents:comps toDate:currentDate  options:0];

        UIDatePicker *datePicker = [[UIDatePicker alloc]init];
        datePicker.datePickerMode = UIDatePickerModeDate;
        [datePicker setMaximumDate:maximumDate];
        [datePicker setMinimumDate:minimumDate];
        [datePicker addTarget:self action:@selector(datePickerValueChanged:) forControlEvents:UIControlEventValueChanged];
        [self.Birthday setInputView:datePicker] ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T22:46:27.883

我认为，您不能修改 UIDatePicker 默认样式。

**[使用NSDateFormatter](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDateFormatter_Class/Reference/Reference.html)**选择日期后，您可以更改为多种格式

**例子：**

```
 NSDate *today = [NSDate date];
 NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
 [dateFormat setDateFormat:@"MM/dd/yyyy hh:mma"];
 NSString *dateString = [dateFormat stringFromDate:today];
 NSLog(@"date: %@", dateString); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T19:32:41.230

您可以设置`locale`DatePicker 的属性。文档说：

默认值是由 NSLocale 的 currentLocale 属性返回的当前区域设置，或者是日期选择器的日历使用的区域设置。语言环境封装了有关语言或文化方面的信息，例如日期的格式。

通常认为强迫用户以他们所在地区不典型的方式进行选择的方式很糟糕。

# python - 如何让程序确定输入是否是python中的int？

> ID：15074624
> 
> 赞同：-1
> 
> 时间：2013-02-25T19:14:42.717
> 
> 标签：python, while-loop

下午好。我正在尝试创建一个程序来打印数字描述。我在非常基本的python中，有点卡在这个特殊问题上。谁能告诉我如何让程序区分数字以继续程序，以及 Q、Bye 或回车以结束语句？

```
while True:

    N = eval(input("Enter an input: number to continue, Q, bye or carriage return to quit")

    if N == int

        N => 0 print("positive")

        else print("negative") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T19:16:16.630

您可以使用`isinstance`：

```
if isinstance(N,int):
    #do something 
```

请注意，不建议这样做。尤其是当你`eval`ing时`raw_input`。在这里，我会尝试类似：

```
#python2
try:
   N = int(raw_input("Enter integer:"))
except ValueError:
   print "Not an integer!" 
```

或在 python3 上：

```
#python2
try:
   N = int(input("Enter integer:"))
except ValueError:
   print("Not an integer!") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T19:17:30.657

根据上下文，我使用了几种不同的方法：

```
try:
    i = int(a)
except ValueError:
    print >>sys.stderr, "Cannot be converted to integer" 
```

或者

```
if type(a) == type(1):
    print "Yep, that's an int" 
```

# java - 为什么 Java 允许标签远离循环？

> ID：15074625
> 
> 赞同：1
> 
> 时间：2013-02-25T19:14:46.383
> 
> 标签：java, loops, syntax, goto

我正在用 JAVA 编码，突然我写了一些这样的代码：

```
int x = 10;
boolean b = true;

l1: b = x > 1;

l2: while (b) {

    // some code
    break l2;
} 
```

令我惊讶的是，代码编译并正常运行。我没有对我的`l1`标签做任何事情，但为什么它可以正确编译这个语句？

***我知道`goto`在 java EXISTS 但未使用（[Java Language Keywords](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/_keywords.html)）但无论如何我可以跳转到它吗？***

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T19:20:59.720

任何语句都可以被标记，但[它们只能与`break`or`continue`](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.7)一起使用：

> 与 C 和 C++ 不同，Java 编程语言没有 goto 语句；标识符语句标签与出现在标记语句中的任何位置的 break (§14.15) 或 continue (§14.16) 语句一起使用。

换句话说，为了可用，标签需要应用于包含 break 或 continue 的语句，而后者又可以是循环或 for `break`only 任何块。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T19:18:11.310

不，没有办法跳回`l1`并继续执行。正如你所说，`goto`是一个未使用的关键字。标签仅用于将循环标记为`break`/ `continue`。

如果您真的想“跳”到它，可以通过其他编程技术（例如递归）来做到这一点。

即，如果你想跳回`l1`而不是仅仅打破`l2`......

```
public void myMethod() {
    b = x > 1;

    while (b) {
        // some code
        myMethod();
    }
} 
```

请务必添加您的退货条件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T20:00:55.023

如果你想摆脱许多循环，你可以使用带标签的 continue 语句。您的代码的解决方法将是这样的。

```
int x = 10;
boolean b = true;

l1:
  for(int i=1;i>0;i--) { b = x > 1;

       l2: while (b) {
           // some code
           //break l2;
           i++;continue l1;
       }
  } 
```

# maven - 如何在另一个属性中引用 Maven 属性？

> ID：15074634
> 
> 赞同：8
> 
> 时间：2013-02-25T19:15:06.563
> 
> 标签：maven, properties, reference, pom.xml

假设我从某个地方得到一个属性文件，它有这个定义：

```
dog=POODLE 
```

并且在运行 maven 时，我传递了一个带有属性名称的参数进行查找：

```
mvn clean install -animal=dog 
```

我需要能够在 pom.xml 中检索值`"POODLE"`而不知道要查找的属性是什么（我还不知道我正在查找“狗”，但只是我正在查找对于“动物”）。

这可以做到吗？

我可以在 pom 中引用`${animal}`它将被替换`dog`，但是我需要查找它。

我很无辜，可以尝试以下方法，但它不起作用：

```
${${animal}} 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T20:15:02.947

如果你使用它应该可以工作`-Danimal=${dog}`。这是我的例子

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>nested-property</groupId>
    <artifactId>nested-property</artifactId>
    <version>0.0.1-SNAPSHOT</version>

    <properties>
        <dog>POODLE</dog>
    </properties>

    <build>
        <plugins>
            <plugin>
                <groupId>com.soebes.maven.plugins</groupId>
                <artifactId>maven-echo-plugin</artifactId>
                <version>0.1</version>
                <executions>
                    <execution>
                        <phase>install</phase>
                        <goals>
                            <goal>echo</goal>
                        </goals>
                    </execution>
                </executions>
                <configuration>
                    <echos>
                        <echo>Animal: ${animal}</echo>
                    </echos>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project> 
```

运行：`mvn -Danimal=${dog} install`

结果是

```
[INFO] --- maven-echo-plugin:0.1:echo (default) @ nested-property ---
[INFO] Animal: POODLE
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------ 
```

# php - 如何使用php创建表并添加自动增量字段

> ID：15074635
> 
> 赞同：0
> 
> 时间：2013-02-25T19:15:05.953
> 
> 标签：php, sql-server, create-table

我的问题是如何在 mSsql 中从 php（仅查询）创建一个表并添加一个自动增量值。这样就不必在插入查询中手动添加值。

这是我的模板：

```
$query = "CREATE TABLE [table].[myTable](id numeric(18) AUTO_INCREMENT, project varchar(10), name varchar(50), path varchar(500), categorie varchar(50)) "; 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T19:27:07.643

> **免责声明**- 我对 Microsoft SQL Server 的了解~~为零~~ 。我自己就是一个 MySql 人*......*

我相信您要查找的关键字是[`IDENTITY`](http://msdn.microsoft.com/en-us/library/aa933196%28v=sql.80%29.aspx).

`$query = "CREATE TABLE [table].[myTable](id int IDENTITY(1,1), project varchar(10), name varchar(50), path varchar(500), categorie varchar(50))";`

> **语法 -**
> IDENTITY [（种子，增量）]

种子是用于插入表中的第一条记录的值，增量值（如名称所示）是为每条记录增加该种子的量。

# vb.net - 使用 DotNetZip 的未处理异常

> ID：15074640
> 
> 赞同：2
> 
> 时间：2013-02-25T19:15:38.020
> 
> 标签：vb.net, dotnetzip

我已经使用 DotNetZip 一个月左右了，我喜欢它的工作原理，但是今天我的程序开始出现一个我一无所知的新问题。

在压缩过程中，它会抛出此错误，并且 Windows 会显示其“*程序名称*已停止工作”框。

```
Unhandled Exception: System.IO.FileNotFoundException: s:\(file path)\filename.pdf
at Ionic.Zip.SharedUtilities.GetFileLength(string fileName)
at ionic.Zip.ZipEntry.MaybeUnsetCompressionMethodForWriting(int32 cycle)
at Ionic.zip.Zipentry.WriteHeader(Stream s, Int32 cycle)
at Ionic.zip.ZipEntry.Write(Stream s)
at Ionic.zip.zipfile.save()
at ZipAJob_Instant.ConsoleMain.Main() in C:\users\(my name)\Documents\visual studio 2012\projects\zipAjob_Instant\zipAJob_Win32.vb:line 71 
```

第 71 行是指我调用 zip.save() 的位置

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-04T18:35:31.973

根据您的评论，我认为发生的事情正是我不久前发生的事情。

我正在获取要压缩并存储到内存中的文件列表。我会一个一个地压缩它们，直到抛出这个异常。原因是有人在我得到列表**后**删除了文件，但**在**我有机会压缩它之前。这发生在一个共享文件夹上，顺便说一句。

# android - Android：列表视图错误

> ID：15074650
> 
> 赞同：2
> 
> 时间：2013-02-25T19:16:14.180
> 
> 标签：android, android-listview

我有一个自定义列表视图，它有一个 Textview 和一个图像。当我单击 textview 时，将为该特定行展开隐藏的布局。但是发生的事情是，例如，当我点击第 2 行时，第 10 行也被扩展了。这是我的代码，

**CustomListAdapter.java**

```
public View getView(final int position, View convertView, ViewGroup parent) {
    holder = null;
    DataFields rowItems = (DataFields) getItem(position);

    LayoutInflater inflater = (LayoutInflater) context
            .getSystemService(Activity.LAYOUT_INFLATER_SERVICE);

    if (convertView == null) {
        convertView = inflater.inflate(R.layout.home_field_row, null);

        holder = new ViewHolder();
        holder.dataFields = items.get(position);
        holder.mName = (TextView) convertView
                .findViewById(R.id.hmFieldName);
        holder.mDeleteImage = (ImageView) convertView
                .findViewById(R.id.hmFieldDeleteImage);
        holder.deleteMainRL = (RelativeLayout) convertView
                .findViewById(R.id.hmdeleteMainRL);
        holder.mDeleteImage.setTag(position);
        holder.mName.setTag(position);
        holder.deleteMainRL.setTag(position);
        final View clickView = convertView;

        holder.mName.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                RelativeLayout displayAddInfo = (RelativeLayout)clickView.findViewById(R.id.displayRecordRL);
                Animation expandAnim = expand(displayAddInfo,
                                true);
                displayAddInfo
                        .startAnimation(expandAnim);
                    }
                });

        convertView.setTag(holder);
    }

    else {
        holder = (ViewHolder) convertView.getTag();
    }

    holder.mName.setText(rowItems.getName());

    return convertView;
} 
```

我怎样才能解决这个问题？非常感谢任何形式的帮助或建议。谢谢。

**更新**

**list_row.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/hmFieldMainRL"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/grid_shape" >

    <TextView
        android:id="@+id/hmFieldName"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_above="@+id/displayRecordRL"
        android:layout_alignParentLeft="true"
        android:gravity="left"
        android:padding="15dp"
        android:shadowColor="#000000"
        android:shadowDx="0"
        android:shadowDy="0"
        android:clickable="false"
        android:shadowRadius="2"
        android:text="@string/no_data"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textColor="#F2F2F2" />

    <RelativeLayout
        android:id="@+id/displayRecordRL"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/hmFieldName"
        android:layout_centerVertical="true"
        android:layout_marginBottom="5dp"
        android:layout_marginLeft="1dp"
        android:layout_marginRight="1dp"
        android:layout_marginTop="1dp"
        android:background="@drawable/display_record_bg"
        android:visibility="gone" >

        <EditText
            android:id="@+id/displayRecordName"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:layout_marginLeft="10dp"
            android:layout_marginTop="10dp"
            android:layout_toLeftOf="@+id/displayRecordUpdate"
            android:padding="10dp"
            android:singleLine="true"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <EditText
            android:id="@+id/displayRecordPwd"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_below="@id/displayRecordName"
            android:layout_marginLeft="10dp"
            android:layout_marginTop="5dp"
            android:layout_toLeftOf="@+id/displayRecordShow"
            android:inputType="textPassword"
            android:paddingLeft="10dp"
            android:singleLine="true"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <ImageView
            android:id="@+id/displayRecordAddInfoImg"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_marginLeft="10dp"
            android:layout_below="@id/displayRecordPwd"
            android:contentDescription="@string/right_arrow"
            android:visibility="gone"
            android:src="@drawable/info" />

        <EditText
            android:id="@+id/displayRecordAddInfo"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_below="@id/displayRecordAddInfoImg"
            android:layout_marginLeft="10dp"
            android:layout_marginRight="10dp"
            android:layout_marginTop="2dp"
            android:hint="Additional Information"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:visibility="gone" />

        <ImageView
            android:id="@+id/displayRecordUpdate"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:background="@drawable/display_record_img"
            android:contentDescription="@string/right_arrow"
            android:padding="10dp"
            android:src="@drawable/update_rec" />

        <ImageView
            android:id="@+id/displayRecordShow"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_below="@id/displayRecordUpdate"
            android:layout_marginTop="10dp"
            android:contentDescription="@string/right_arrow"
            android:padding="10dp"
            android:src="@drawable/eye" />

        <ImageView
            android:id="@+id/displayRecordShowRed"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_below="@id/displayRecordUpdate"
            android:layout_marginTop="10dp"
            android:contentDescription="@string/right_arrow"
            android:padding="10dp"
            android:src="@drawable/redeye"
            android:visibility="gone" />
    </RelativeLayout>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T21:17:21.330

> 但是发生的事情是，例如，当我点击第 2 行时，第 10 行也被扩展了。

您正在与 ListViews 回收行布局的方式作斗争。但这很容易处理，首先让我们添加几个新的类变量：

```
SparseBooleanArray expanded = new SparseBooleanArray();
LayoutInflater inflater; // initialize this in your constructor 
```

现在我们将`expanded`用来检查是否`displayRecordRL`应该可见：

```
public View getView(final int position, View convertView, ViewGroup parent) {
    DataFields rowItems = (DataFields) getItem(position);

    if (convertView == null) {
        convertView = inflater.inflate(R.layout.home_field_row, null);

        holder = new ViewHolder();
        holder.dataFields = items.get(position);
        holder.mName = (TextView) convertView
                .findViewById(R.id.hmFieldName);
        holder.mDeleteImage = (ImageView) convertView
                .findViewById(R.id.hmFieldDeleteImage);
        holder.deleteMainRL = (RelativeLayout) convertView
                .findViewById(R.id.hmdeleteMainRL);

        // Add this to your holder
        holder.mAddInfo = (RelativeLayout) convertView
                .findViewById(R.id.displayRecordRL);

        holder.mDeleteImage.setTag(position);
        holder.mName.setTag(position);
        holder.deleteMainRL.setTag(position);

        holder.mName.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                // Get the ViewHolder
                holder = (ViewHolder) ((View) v.getParent()).getTag(); 
                Animation expandAnim = expand(holder.mAddInfo, true);
                holder.mAddInfo.startAnimation(expandAnim);

                // Remember that this View is expanded
                int pos = (Integer) v.getTag();
                expanded.put(pos, true);
            }
        });

        convertView.setTag(holder);
    }

    else {
        holder = (ViewHolder) convertView.getTag();
    }

    holder.mName.setText(rowItems.getName());
    if(expanded.get(position, false)) 
        holder2.mAddInfo.setVisibility(View.VISIBLE);
    else
        holder2.mAddInfo.setVisibility(View.GONE);

    return convertView;
} 
```

请注意，它如何跟踪每一行是否应该可见，并使用简单的 if 语句来确保回收的布局正确显示或隐藏“添加信息”部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T19:50:43.000

您需要向适配器添加一个属性，即简单的`int`. 当您单击一个项目时，更新当前选定的位置。构建视图时，检查位置是否等于所选位置。

```
public View getView(final int position, View convertView, ViewGroup parent) {
     if(this.selectedPosition == position){
     //add a holder
     else{
     //don't add a holder

     return convertview;
} 
```

我的意思是您遇到了视图回收问题。如果您修改项目 n°2，然后从视图 n°2 构建项目 n°10 的视图，您最终会得到一个不需要的项目（看起来就像单击它一样）。

单击列表中的一项时：

1）更新所选项目（适配器的属性）。例如，如果您单击列表视图的第 12 项，则 selectedItem = 12;

2) 调用方法notifyDataSetChanged()。这将刷新列表视图。

3）当您构建视图（适配器的getView（））时，检查每个位置是否对应于所选项目。如果是这样，请建立您的特殊视图（我不确切知道您想要做什么）。如果它与所选项目不对应，请“正常”构建视图

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T19:24:39.120

尝试将 R.id.displayRecordRL 作为 viewholder 的一部分并在 OnClick 方法上调用它。

```
holder.displayAddInfo = (RelativeLayout)clickView.findViewById(R.id.displayRecordRL); 
```

在 OnclickMethod 上：

```
Animation expandAnim = expand(holder.displayAddInfo,
                                true);
                holder.displayAddInfo
                        .startAnimation(expandAnim);
                    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T20:11:28.967

您遇到的问题可能是您在滚动时为列表视图中的另一个项目重新使用的视图 (converView) 设置动画。

观看此 YouTube 视频，您可能会了解如何解决您的问题。Chet Haase（谷歌工程师）“DevBytes”系列“ListView Animations”：

[https://www.youtube.com/watch?v=8MIfSxgsHIs#](https://www.youtube.com/watch?v=8MIfSxgsHIs#)！

# c++ - 运算符重载 - 不匹配

> ID：15074651
> 
> 赞同：0
> 
> 时间：2013-02-25T19:16:15.197
> 
> 标签：c++, operator-overloading

我对运算符重载有一点问题。我有两节课。

```
#include <iostream>
using namespace std;

    class Meter; //Forward declaration        

    class Inch{
    private:
        double inches;

    public:
        Inch() : inches(0) {}
        Inch(double i) { inches=i; }
        friend Inch operator+ (const Meter& m, const Inch& i);
        void out(){ cout << "Inch:" << inches << "\n";  }
        double getInches() const { return inches; }
    }; 
```

和

```
class Meter{
private:
    double meter;    
public:
    Meter() : meter(0) {}
    Meter(double m) { meter=m; }
    Meter operator+ (const Inch& i) { return Meter(meter + i.getInches() * 0.0254); }    
    void out(){ cout << "Meter:" << meter;  }
    double getMeter() const { return meter; }
};

Inch operator+ (const Meter& m, const Inch& i)
{ return Inch(m.getMeter()/0.0254 + i.getInches()); } 
```

总的来说，我有这些课程中的一个。我需要将它们与命令一起添加：`m + i;`所以 m 必须是第一个对象。为了做到这一点，我使用了朋友函数来使用两个对象作为参数。

```
Inch i(6.4), resultInch; 
Meter m(14), resultMeter; 

i.out(); 
m.out();  

resultMeter = m + i; 
resultMeter.out(); 

resultInch = m + i; 
resultInch.out(); 
```

有了上面，`resultMeter`保存了正确的值，但是当我把`resultInch`编译器给出“错误与 bla bla bla 不匹配”。

我错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T19:22:46.473

问题是这两个运算符都是`+`代码中完全相同的重载。您可以在同一个程序中使用一个或另一个，但不能同时使用。

```
Inch operator+ (const Meter& m, const Inch& i);
class Meter{
   Meter operator+ (const Inch& i);
}; 
```

考虑一下如果你有一个`Meter m;`并且`Inch i;`你尝试用 来添加它们会发生什么`m + i`，应该调用哪个操作符实现？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T19:39:27.653

C++ 不能重载返回值。所以当你想能够说：

```
meters = meters + inches; 
```

和

```
inches = meters + inches; 
```

两者`meters + inches`都是相同的功能。我支持编写一个具有单位属性和转换函数的长度类的建议。但缺少这一点，我建议您在两个长度类之间编写转换运算符。然后只需要一个加法函数（你仍然应该写两个：`meters + meters`和`inches + inches`），类型可以来回转换。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T20:11:50.483

从两个类中删除 operator+。创建将用作添加结果的代理类：

```
class ProxyMeterInch
{
  private:
    double op1, op2;
  public:
    friend ProxyMeterInch operator+(Meter m, Inch i)
    {
      ProxyMeterInch r;
      r.op1 = m.getMeter();
      r.op2 = i.getInch() * 0.0254; // I tend to keep it in meters as I am European
      return(r);
    }
    operator Meter() const
    {
      return(op1 + op2);
    }
    operator Inch() const
    {
      return((op1 + op2) / 0.0254);
    }
}; 
```

你明白了。根据您尝试分配给正确转换运算符的类型，将被选中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T19:39:00.753

好的，所以我假设它是

```
Inch resultInch = m + i; // not Meter resultInch (...) 
```

它相当于：

```
Inch resultInch = (Meter)m.operator+(i); 
```

并且您无法在 和 之间进行`Meter`转换`Inch`。

尝试将其更改为`Inch resultInch = i + m;`.

# javascript - 无法从远程安装下载 Javascript (Codeigniter)

> ID：15074653
> 
> 赞同：0
> 
> 时间：2013-02-25T19:16:28.600
> 
> 标签：javascript, codeigniter, openshift

我在远程服务器上安装了我的 CI 应用程序（OpenShift 安装）。我在视图标题中包含了 Javascript 文件。当我尝试访问该应用程序时，所有 Javascript 文件都卡在“GET”中（查看 firebug Net 控制台）并无休止地旋转。我是否缺少一些规范？这是我在头标签内的视图头文件中拥有的示例

```
 <script src="<?php echo base_url('js/jquery-1.8.2.js');?>"type="text/javascript" charset="utf-8"></script> 
```

谢谢！

米兹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T06:58:03.643

原来，applications/config 中的 base_url 需要指定 https 而不是 http: 这就是我所拥有的。这可能是 OpenShift 部署的事情，但它确实解决了我的问题！

# complex-numbers - 没有复数库的平滑着色曼德布罗集

> ID：15074655
> 
> 赞同：0
> 
> 时间：2013-02-25T19:16:33.223
> 
> 标签：complex-numbers, mandelbrot

我用 C# 编写了一个基本的 Mandelbrot 浏览器，但我有那些可怕的色带，而且都是灰度的。

我有平滑着色的方程：mu = N + 1 - log (log |Z(N)|) / log 2

其中 N 是转义计数，|Z(N)| 是值转义后复数的模数，这是我不确定的值。

我的代码基于维基百科页面上给出的伪代码：[http ://en.wikipedia.org/wiki/Mandelbrot_set#For_programmers](http://en.wikipedia.org/wiki/Mandelbrot_set#For_programmers)

复数由实数值 x 和 y 表示，使用这种方法，我将如何计算 |Z(N)| 的值 ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T16:00:32.477

|Z(N)| 表示到原点的距离，因此您可以通过 计算它`sqrt(x*x + y*y)`。

如果遇到对数错误：检查之前的迭代。如果它是 Mandelbrot 集的一部分（迭代 = max_iteration），则第一个对数将产生 0，第二个对数将引发错误。因此，只需添加此代码段而不是您的旧返回代码。.

```
 if (i < iterations)
        {
            return i + 1 - Math.Log(Math.Log(Math.Sqrt(x * x + y * y))) / Math.Log(2);
        }
        return i; 
```

稍后，您应该将 i 除以 max_iterations 并将其乘以 255。这将为您提供一个不错的 rgb 值。

# c# - 如何识别对父函数的对象调用

> ID：15074656
> 
> 赞同：0
> 
> 时间：2013-02-25T19:16:35.033
> 
> 标签：c#, asp.net

我想按子类识别对父类成员的调用。是否可以？例如：

```
public class base1
{
    public void  getvalue()
    {
    }
}

public class B:base1
{
}

public class C:base1
{
}

public static void main()
{

   B objb=new B();
   C objc=new C();

   objb.getvalue();//this should display B
   objc.getvalue();//this should display C 

} 
```

我们如何相应地修改 getvalue() ？//不使用覆盖概念

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T19:19:04.027

您可以使用反射来执行此操作：

```
string type = objb.GetType().Name; //will be "B" 
```

# c++ - QSettings 未返回注册表文件夹中的任何键

> ID：15074657
> 
> 赞同：0
> 
> 时间：2013-02-25T19:16:35.253
> 
> 标签：c++, qt

```
QSettings settings("HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Run",QSettings::NativeFormat);
return settings.contains("myapp"); 
```

即使我使用 regedit 看到键，它也不会返回 true，如果我尝试打印所有键，它会返回一个空列表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T19:20:56.380

您需要转义 \ 字符：

```
QSettings settings(
  "HKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\CurrentVersion\\Run",
   QSettings::NativeFormat); 
```

# ios - UIButton 动作目标方法之间的区别

> ID：15074661
> 
> 赞同：1
> 
> 时间：2013-02-25T19:16:56.290
> 
> 标签：ios, ios5, uibutton, selector, uicontrolevents

选项1和2有什么区别？我正在以编程方式设置按钮，并想知道一个按钮比另一个按钮有什么优势，或者它们是否只是产生相同的不同方法来达到目标​​。

选项1 ：

```
[signupButton addTarget:self action:@selector(signupButton:) forControlEvents:UIControlEventTouchUpInside]; 
```

随后调用：

```
-(IBAction)signupButton:(id)sender{ 
```

和选项 2：

```
[signupButton addTarget:self action:@selector(signupButtonMethod) forControlEvents:UIControlEventTouchUpInside]; 
```

随后调用：

```
-(void)signupButtonMethod { 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T19:20:39.423

第一种形式包括按钮作为方法的参数。当您希望对多个按钮使用相同的操作时，这很有用。然后您可以使用`sender`参数来知道哪个按钮触发了事件。

第二种形式不包含有关哪个按钮触发事件的任何信息。如果该方法仅用于单个按钮，这很好。

# c# - 在 C# 代码中出现意外的“System.StackOverflowException”

> ID：15074663
> 
> 赞同：0
> 
> 时间：2013-02-25T19:17:01.777
> 
> 标签：c#

我有以下代码，由于某种原因，我收到了错误：

> WpfApplication1.exe 中发生了“System.StackOverflowException”类型的未处理异常`at the line :`this.JointName = joint; `inside the`公共客户（字符串联合，字符串动作）

当我运行代码时。

Class1.cs 代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace WpfApplication1
{
    public class Customer
    {
        public String JointName { get; set; }
        public String ActionName { get; set; }
        public List<Customer> lst = new List<Customer>();

        public Customer(String joint, String action)
        {
            this.JointName = joint;
            this.ActionName = action;
            this.lst.Add(new Customer(this.JointName, this.ActionName));
        }

        public List<Customer> GetList()
        {
            return this.lst;
        }
    }
} 
```

MainWindow.xaml.cs 代码：

```
namespace WpfApplication1
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    /// 

    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
            Customer Data1 = new Customer("Joint1", "Action1");
            List<Customer> List = Data1.GetList();
            dataGrid1.ItemsSource = List;

        }
    }
} 
```

你们能看到我在这里做错了什么吗？我不知道我在哪里可以有一个无限循环..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T19:20:32.517

您反复`Customer`递归地调用构造函数。所以你的调用堆栈看起来像这样：

```
Customer(String joint, String action)
Customer(String joint, String action)
Customer(String joint, String action)
Customer(String joint, String action)
Customer(String joint, String action)
... 
```

每个方法在完成后等待调用`list.Add`。

碰巧对 的`set`属性的`JointName`调用是破坏堆栈框架的最终方法调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T19:21:04.423

Customer 的构造函数在最后一行包含对自身的调用：

this.lst.Add(new Customer(this.JointName, this.ActionName))

这就是我们错误的根源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T19:21:08.893

Customer 的构造函数总是执行“new Customer”，然后调用 Customer 的构造函数，以此类推，无止境。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T19:25:34.897

Class1.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace WpfApplication1
{
    public class Customer
    {
        public String JointName { get; set; }
        public String ActionName { get; set; }

        public Customer(String joint, String action)
        {
            this.JointName = joint;
            this.ActionName = action;

        }

    }
} 
```

MainWindow.xaml.cs 代码：

```
 namespace WpfApplication1
    {
        /// <summary>
        /// Interaction logic for MainWindow.xaml
        /// </summary>
        /// 

        public partial class MainWindow : Window
        {
            public MainWindow()
            {
                InitializeComponent();
                Customer Data1 = new Customer("Joint1", "Action1");
                List<Customer> list = new List<Customer>();
                list.add(Data1);
                dataGrid1.ItemsSource = list;

            }
        }
    } 
```

# php - 路由和链接模型

> ID：15074665
> 
> 赞同：0
> 
> 时间：2013-02-25T19:17:02.933
> 
> 标签：php, cakephp, url-routing

我有这两个模型：`rooms`并且`scores`在 CakePHP 设置中。

`rooms`hasMany`scores`和`scores`belongsTo `rooms`。

当前默认路由如下：

*   /房间/
*   /房间/添加
*   /房间/视图/*
*   /房间/编辑/*
*   /分数
*   /分数/添加
*   /分数/编辑/*

我想这样路由它：

*   /会话*（控制器：房间/操作：索引）*
*   /session/add *（控制器：房间/操作：添加）*
*   /session/* *（控制器：房间/动作：视图）*
*   /session/*/edit *（控制器：房间/操作：编辑）*
*   /session/ */scores/* *（控制器：分数/动作：视图）*
*   /session/*/scores/add *（控制器：分数/动作：添加）*
*   /session/ */scores/* /edit *（控制器：分数/动作：编辑）*

（我不得不使用`Rooms`而不是`Sessions`as`Sessions`似乎是 CakePHP 内部保留的。）

编辑：对不起，问题是......

我如何路由这个：（ `/session/*/scores/*/edit`控制器：分数/操作：编辑）使得第一个 * 将对应于房间 ID，第二个 * 对应于属于该特定房间的分数 ID。

# mysql - 什么更好：选择重复检查或制作唯一索引？

> ID：15074667
> 
> 赞同：0
> 
> 时间：2013-02-25T19:17:08.800
> 
> 标签：mysql

我有一张这样的桌子：

```
 `id` int(11) NOT NULL AUTO_INCREMENT,
  `torderid` int(11) DEFAULT NULL,
  `tuid` int(11) DEFAULT NULL,
  `tcontid` int(11) DEFAULT NULL,
  `tstatus` varchar(10) DEFAULT 'pending', 
```

这里的规则是同一个用户 UID 不能有多个具有相同 contid 的挂单。

所以我能做的第一件事就是检查是否有这样的挂单：

```
select count(id) into @cnt from tblorders where tuid = 1 and tcontid=5 and tstatus like 'pending'; 
```

如果它 > 0 则不能插入。

或者我可以为三列创建一个唯一索引，这样表就不会接受重复的新记录。

问题是：哪种方式更快？因为那将是一个大型数据库...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T19:23:04.333

索引显然更快，因为它是为该用例设计的。它将加快您正在寻找的元组的搜索，如果不满足约束，它将发送一个错误，因此，在您的处理脚本中，您将比获取结果更容易（和更快）处理它，等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T19:26:04.953

假设用户尝试添加冲突记录的频率低于有效记录，那么复合索引将更快。SQL 引擎将维护索引并在违反索引约束时抛出错误。

即使您确实选择了 select 方法，您也需要维护索引。除此之外，将结果集从选择中拉回应用程序的内存空间，然后检查结果比在索引约束上强制执行要慢得多。

有关更多信息，请参阅：[https ://dev.mysql.com/doc/refman/5.5/en/multiple-column-indexes.html](https://dev.mysql.com/doc/refman/5.5/en/multiple-column-indexes.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T19:41:22.183

几个建议。

使用`tstatus = 'pending';`而不是`tstatus like 'pending';`

如果您只考虑“待定”状态，则创建复合主键`tid, tcontid, tstatus`可能不起作用。其他状态呢？

如果您决定为这些列建立索引，我建议您`tstatus`在此处创建一个单独的表并使用外键引用。因此，它将为索引列节省空间，并且您的查询将始终在索引字段上运行。

# html - 滚动时保持下拉菜单顶部项目突出显示

> ID：15074670
> 
> 赞同：0
> 
> 时间：2013-02-25T19:17:19.440
> 
> 标签：html, css

当我浏览子菜单中的菜单选项时，如何保持顶部的菜单项（例如文件）保持突出显示？

这是一个粘贴箱： http: [//pastebin.com/aGJh8nQa](http://pastebin.com/aGJh8nQa)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T19:21:40.267

为什么，当然有这个选择器！

```
#menu li:hover > a {
 background-color: rgb(216,216,216);
} 
```

[**在 JSFiddle 上查看**](http://jsfiddle.net/A7qU3/)

# c# - 任务 ContiuewWith 等待返回错误

> ID：15074672
> 
> 赞同：0
> 
> 时间：2013-02-25T19:17:28.973
> 
> 标签：c#, task-parallel-library, async-await

我有以下代码使用`System.Threading.Tasks`

```
private async void UploadDocument(System.IO.FileInfo fileInfo)
{
    var someTask = await Task.Run<bool>(() =>
    {
        // open input stream
        using (System.IO.FileStream stream = new System.IO.FileStream(FileTextBox.Text, System.IO.FileMode.Open, System.IO.FileAccess.Read))
        {
            using (StreamWithProgress uploadStreamWithProgress = new StreamWithProgress(stream))
            {
                uploadStreamWithProgress.ProgressChanged += uploadStreamWithProgress_ProgressChanged;

                // start service client
                FileTransferWCF.FileTransferServiceClient client = new FileTransferWCF.FileTransferServiceClient();
                //FileTransferClient.FileTransferServiceClient client = new FileTransferClient.FileTransferServiceClient();

                // upload file
                client.UploadFile(fileInfo.Name, fileInfo.Length, uploadStreamWithProgress);

                // close service client
                client.Close();
            }
        }

        return true;

    }).ContinueWith(r =>{
        if(r.Result) LogText("Done!!");
    });

} 
```

如果我离开这个并尝试编译，我会得到：

> “不能将 void 分配给隐式类型的局部变量”** 在 `var someTask`

所以我然后`var someTask`改为`Task someTask`但现在我得到了错误：

> “无法将类型 'void' 隐式转换为 'System.Threading.Tasks.Task'”。

关于如何处理这个问题的任何线索？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T19:19:29.017

`await`关键字等待任务完成并**返回**结果。

它不返回任务本身。

由于您`ContinueWith()`没有结果（它返回`Task`，不是`Task<T>`），因此您的`await`表达式返回`void`，显然不能将其分配给变量。

您可以像这样简化代码：

```
await Task.Run(() => {
    using (...) {
        ...
    }
});
LogText("Done!"); 
```

# iis-6 - Exchange 2007 ActiveSync - 重新创建 IIS 虚拟目录

> ID：15074675
> 
> 赞同：0
> 
> 时间：2013-02-25T19:17:39.973
> 
> 标签：iis-6, exchange-server, virtual-directory, activesync

我从 IIS 中删除了 Exchange ActiveSync 虚拟目录，因为我有时会做一些愚蠢的事情。

我正在运行 Exchange 2007、IIS 6.0 和 Windows Server 2008。

现在我的忏悔已经不碍事了，我一直在努力重新创造它。我搜索了互联网，似乎有两种方法可以做到这一点：

微软的方式，它围绕删除元数据库数据并让 Exchange 自动重新创建虚拟目录。

我自己尝试使用 Metabase Explorer 以及 Adsutil，但我找不到文章描述的元数据库 (DS2MB)。使用命令“adsutil delete ds2mb”时，我得到“找不到请求的路径”

人们用来重新创建这些目录的另一种方法是使用 Exchange 命令行管理程序： http: [//my.opera.com/RavenOverride/blog/2009/06/17/how-to-recreate-all-virtual-directories-for-exchange -2007 年](http://my.opera.com/RavenOverride/blog/2009/06/17/how-to-recreate-all-virtual-directories-for-exchange-2007)。

我成功使用了 Remove-ActiveSyncVirtualDirectory 命令。当我运行“Get-ActiveSyncVirtualDirectory”时，没有列出任何内容。

但是，当我尝试使用提升的 Exchange 外壳创建新外壳时：

`New-ActiveSyncVirtualDirectory -WebsiteName "Default Web Site" -InternalUrl `[https://server.com/Microsoft-Server-ActiveSync](https://server.com/Microsoft-Server-ActiveSync)` -ExternalAuthenticationMethods Basic -InternalAuthenticationMethods Basic`

New-ActiveSyncVirtualDirectory：在“服务器”上创建 IIS 虚拟目录“IIS://server/W3SVC/1/ROOT/Mic rosoft-Server-ActiveSync”时出错。在 line:1 char:1 + New-ActiveSyncVirtualDirectory -WebsiteName "Default Web Site" + ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ + CategoryInfo : InvalidOperation : (server\Microsoft-...fault Web Site):ADObjectId) [New-ActiveSyncVirtualDirectory], InvalidOperationExcepti
on + FullyQualifiedErrorId : 9321FFDB,Microsoft.Exchange.Management.SystemConfigurationTasks.NewMobileSyncVirtualDirectory

如果我尝试将虚拟目录也添加到其他网站，也会出现同样的错误。

我可以做些什么来修复 ActiveSync？

我在 Metabase Explorer 中缺少 DS2MB 是否有问题？我在使用 New-ActiveSyncVirtualDirectory 时是否遗漏了什么？

任何帮助表示赞赏。

谢谢，本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T04:26:25.430

在将头撞到墙上后，我最终从我的 Exchange 2007 安装中删除了客户端访问服务器角色，重新启动，然后重新添加了该角色。ActiveSync 现在工作正常。我不需要像一些在线指南建议的那样重新安装 IIS。

# android - 在 Android 上以编程方式制作动画

> ID：15074679
> 
> 赞同：-2
> 
> 时间：2013-02-25T19:17:51.797
> 
> 标签：android, android-animation

我正在做一个应用程序，我打算制作一些动画。我想在屏幕的上部创建矩形，它们会到屏幕的底部。我想问一下你有什么建议给我如何制作这个动画？我想以编程方式制作它。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T19:25:17.493

查看android-developers 博客上的这篇博文[。](http://android-developers.blogspot.ca/2011/02/animation-in-honeycomb.html)它展示了如何使用 HoneyComb 中引入的 API 来制作许多动画。您还可以使用[NineOldAndroid](http://nineoldandroids.com/)库在旧版本的 android 中使用它们。

# expressionengine - 在表达式引擎中显示最近的作者

> ID：15074681
> 
> 赞同：0
> 
> 时间：2013-02-25T19:17:54.777
> 
> 标签：expressionengine, author

我正在尝试将代码放在一起，以使用表达式引擎在我的博客中显示 3 位最新作者。

这是我开始的一段代码：

```
<dl class="authors">
    {exp:channel:entries channel="{embed:my_channel}" limit="3" dynamic="no" site="{embed:my_site}"}
        <dt><span class="photo"><img src="{avatar_url}" width="{avatar_image_width}" height="{avatar_image_height}" alt="{author}'s Photo"></span></dt>
        <dd>{author}</dd>
    {/exp:channel:entries} 
</dl> 
```

现在，我不太确定如何编写代码是获取最后 3 位发布条目的作者。你看，最后 3 个条目可能是由同一作者发布的，在这种情况下，我们必须通过更多条目来获取其他 2 个最近的作者。这就是我卡住的地方。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T21:34:24.423

这可以通过查询模块简单地创建。我已经包含了如何组合查询以为作者提供自定义字段，如果您也设置了这些字段：

注意：我尚未测试此代码的具体细节（使用您的嵌入代码等） - 尽管我能够测试查询。

如果您没有（或不想要）自定义成员字段数据，您可以从查询中删除这些行。

```
<dl class="authors">
{exp:query sql="
SELECT DISTINCT
    exp_members.username,
    exp_members.member_id,
    exp_members.email,
    exp_members.screen_name as author,
    exp_members.avatar_filename,
    exp_members.avatar_width,
    exp_members.avatar_height,
    exp_member_data.m_field_id_1 as my_custom_member_field
FROM
    exp_channel_titles,
    exp_members,
    exp_member_data
WHERE
    exp_members.member_id = exp_channel_titles.author_id
    AND
    exp_channel_titles.channel_id = '{embed:my_channel}'
    AND
    exp_members.member_id = exp_member_data.member_id
    AND
    exp_channel_titles.site_id = '{embed:my_site}'
ORDER BY
    exp_channel_titles.entry_id DESC" limit='3'}
    <dt><span class="photo"><img src="{avatar_url}" width="{avatar_width}" height="{avatar_height}" alt="{author}'s Photo"></span></dt>
    <dd>{author}</dd>
{/exp:query} 
```

# string - marshal_as 返回错误的值

> ID：15074683
> 
> 赞同：1
> 
> 时间：2013-02-25T19:18:01.437
> 
> 标签：string, marshalling, stdstring

在 C++ 中，我正在尝试编写自己的基本逻辑表达式评估器，但在将 String^ 转换为 std::string 值时遇到问题。这是我的代码片段：

`String^ pattern = "[a-zA-Z ]+[>]+[ a-zA-Z]*" ;`

`Regex^ regex = gcnew Regex( pattern );`

`for( Match^ match = regex->Match( myExpression ); match->Success; match = match->NextMatch( ) )`

`{`

`if( match->Value->Length > 0 )`

`{`

`GetExpression(match->Value);`

`}`

`}`

下面是 GetExpression() 的私有方法定义：

`bool GetExpression(String^ matchedExpression)`

`{`

`--> std::string normalString = marshal_as<std::string>(matchedExpression);`

`std::vector<std::string> mystring = StringSplit(normalString, " ", false);`

`return true;`

`}`

上面标记的行正在生成一个我不期望的值。输入“ax > bx”的字符串，返回normalString的值为7的数组，数组的第一个值为“!” 其余的都是空的。我在路上的某个地方犯了错误吗？myExpression 似乎具有“ax > bx”的正确值。提前致谢。

# forms - Play Framework 2.1 / 复杂对象的表单映射

> ID：15074684
> 
> 赞同：3
> 
> 时间：2013-02-25T19:18:03.950
> 
> 标签：forms, scala, playframework-2.1

Scala 的 Play Framework 文档显示了一个将表单隐式映射到案例类的示例：

```
case class User(name: String, age: Int)

val userForm = Form(
  mapping(
    "name" -> text,
    "age" -> number
  )(User.apply)(User.unapply)
) 
```

我们注意到在这个独特的样本中只使用了原始值。

如果我们做这样的改变怎么样：

```
case class Car(brandName: String)

case class User(name: String, car: Car) 
```

此外，我们假设表单返回`User`'s name (String) 和 a `carId`(String)

```
val userForm = Form(
  mapping(
    "name" -> text,
    "car" -> carRepository.findById(nonEmptyText)  // concept I wish
  )(User.apply)(User.unapply)
) 
```

有没有办法在这个希望的行上实例化一辆汽车，`carId`例如由表单提供的一些，并确保它`carId`不是空的`String`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T19:38:24.003

您可以提供`Formatter`并使用该`of[Car]`方法。

```
implicit val carFormat = new Formatter[Car] {
  def bind(key: String, data: Map[String, String]):Either[Seq[FormError], Car] = 
    data.get(key)
      // make sure the method returns an option of Car
      .flatMap(carRepository.findByBrandName _)
      .toRight(Seq(FormError(key, "error.carNotFound", Nil)))

  def unbind(key: String, value: Car) = Map(key -> value.brandName)
} 
```

这个答案提供了另一个`Formatter`：[Play 2 - Scala - Forms Validators and radio buttons](https://stackoverflow.com/questions/13054920/play-2-scala-forms-validators-and-radio-buttons/15045212#15045212)

然后你可以像这样使用它：

```
val userForm = Form(
  mapping(
    "name" -> text,
    "car" -> of[Car]
  )(User.apply)(User.unapply)
) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-25T19:30:10.367

对于您问题的第一部分，文档还显示了嵌套值：

```
case class Car(brandName: String)
case class User(name: String, car: Car)

val userForm = Form(
  mapping(
    "name" -> text,
    "car" -> mapping(
        "brandName" -> text
    )(Car.apply)(Car.unapply)
  )(User.apply, User.unapply)
) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-10-11T19:33:58.283

迟到了，但我刚刚发布了一个实用程序来帮助解决这个问题！使用您的类，您的代码将如下所示：

```
case class Car(brandName: String)
object Car { implicit val mapping = CaseClassMapping.mapping[Car] }

case class User(name: String, car: Car)
object User { implicit val mapping = CaseClassMapping.mapping[User] }

val userForm = Form(implicitly[Mapping[User]]) 
```

您可以在 github 上找到将其包含在项目中的源代码和说明：[https ://github.com/Iterable/iterable-play-utils](https://github.com/Iterable/iterable-play-utils)

# macos - Delphi XE3 Firemonkey OS X - TComboBox 挂起应用程序

> ID：15074688
> 
> 赞同：0
> 
> 时间：2013-02-25T19:18:25.820
> 
> 标签：macos, delphi, firemonkey, delphi-xe3

我遇到了一个很容易重新创建的问题：

1.  创建一个新的 FireMonkey HD 应用程序，在表单上放置一个 TComboBox 并向其中添加一些项目。
2.  在 OS X 中运行应用程序（在我的例子中是 v. 10.8.2，但它也在 10.6.8 上进行了测试）。
3.  单击组合框，但不要通过单击项目完成。相反，“改变主意”并单击表单上的其他位置。
4.  等待几秒钟，然后观看“旋转的死亡沙滩球”。应用程序挂起，调试器中没有任何反应。

有谁知道这个bug吗？解决方法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-20T18:07:13.460

此错误是在 XE3 更新 2 中引入的。因此您可以返回更新 1... 或者只是回滚引入此错误的一个源包：FMX.Platform.mac.pas

另见：[https ://forums.embarcadero.com/thread.jspa?threadID=84315&tstart=0](https://forums.embarcadero.com/thread.jspa?threadID=84315&tstart=0)

# php - PHP 等效于 Python 的 shlex.split

> ID：15074691
> 
> 赞同：1
> 
> 时间：2013-02-25T19:18:31.997
> 
> 标签：php, shlex

我正在尝试解析包含空格分隔的键=>值对的文件，格式如下：

```
host=db test="test test" blah=123 
```

通常，此文件由 Python 摄取并使用 解析`shlex.split`，但我一直无法找到 PHP 等效项，并且我尝试将其逻辑化`preg_split`或`strtok`效率不高。

是否有与 Python 等效的 PHP `shlex.split`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T20:57:19.533

不幸的是，没有内置的 PHP 函数可以原生处理这样的分隔参数。但是，您可以使用一些正则表达式和一些数组遍历非常快速地构建一个。这只是一个示例，仅适用于您提供的字符串类型。任何额外的条件都需要添加到正则表达式中，以确保它正确匹配模式。您可以在遍历文本文件时轻松调用此函数。

```
/**
 * Parse a string of settings which are delimited by equal signs and seperated by white
 * space, and where text strings are escaped by double quotes.
 *  
 * @param  String $string String to parse
 * @return Array          The parsed array of key/values
 */
function parse_options($string){
    // init the parsed option container
    $options = array();

    // search for any combination of word=word or word="anything"
    if(preg_match_all('/(\w+)=(\w+)|(\w+)="(.*)"/', $string, $matches)){
        // if we have at least one match, we walk the resulting array (index 0)
        array_walk_recursive(
            $matches[0], 
            function($item) use (&$options){
                // trim out the " and explode at the =
                list($key, $val) = explode('=', str_replace('"', '', $item));
                $options[$key] = $val;
            }
        );   
    }

    return $options;
}

// test it
$string = 'host=db test="test test" blah=123';

if(!($parsed = parse_options($string))){
    echo "Failed to parse option string: '$string'\n";
} else {
    print_r($parsed);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-23T04:38:01.060

你可以试试这个 PHP 版本的 shlex 扩展。

[https://github.com/zimuyang/php-shlex](https://github.com/zimuyang/php-shlex)

例子

```
<?php

$s = "foo#bar";
$ret = shlex_split($s, true);

var_dump($ret);

?> 
```

上面的示例将输出：

```
array(1) {
  [0] =>
  string(3) "foo"
} 
```

# sql - 使用 MERGE SQL 语句将行更新到 hsqldb 表中

> ID：15074694
> 
> 赞同：6
> 
> 时间：2013-02-25T19:18:38.280
> 
> 标签：sql, merge, hsqldb

从文档中不明白我应该如何使用它。

假设我有一行我希望插入到集合中，如果该行已经存在，则**覆盖任何现有值。**我没有行主键，但我有唯一键。

谁能告诉我将这样一行插入 HSQLDB 表的 MERGE 语句？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-25T20:35:56.377

HSQLDB 的一个简单示例如下：

```
CREATE TABLE B(ID INT UNIQUE, A_ID INT);

MERGE INTO B 
  USING (VALUES 2, 3) I (ID, A_ID) 
  ON (B.ID=I.ID)
  WHEN MATCHED THEN UPDATE SET B.A_ID = I.A_ID
  WHEN NOT MATCHED THEN INSERT (ID, A_ID) VALUES (I.ID, I.A_ID) 
```

USING 子句包含新数据。ON 子句是匹配条件。请注意，此处不需要使用主键或唯一约束。任何匹配条件都可以。WHEN MATCHED 和 WHEN NOT MATCHED 子句分别用于 UPDATE 和 INSERT。在这个简单的示例中，引用了来自 USING 子句的数据，但您可以使用任何其他值插入或更新。

# javascript - 从 require.js 文本动态生成 html！插入

> ID：15074695
> 
> 赞同：0
> 
> 时间：2013-02-25T19:18:47.503
> 
> 标签：javascript, backbone.js, requirejs

我正在尝试做一个简单的函数来获取文本字符串！导入的html文件

目前它返回的功能。我如何让它返回文本？

这是在主干视图的初始化函数中。

```
 this.options.template =  req(['text!tpl/snippet/'+this.option.currentTemplate+'.html'], function(_template){ return _template; }); 
```

this.options.template 当前是一个 function()

我如何让它返回实际的字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T19:22:56.223

如果您的意思是您需要执行该函数（将返回字符串），那么这就是解决方案

```
var getTemplateText = this.options.template;
getTemplateText(); 
```

# jquery - 如何从跨度中获取价值，但其中没有子元素

> ID：15074696
> 
> 赞同：1
> 
> 时间：2013-02-25T19:18:49.593
> 
> 标签：jquery, html

我试图从我的跨度中只获得一个值。这就是我的代码的样子：

HTML：

```
<span id="box1">
    value1
        <span class="box2">value2</span>
        <span class="box3">value3</span>
</span> 
```

jQuery：

```
var str = $('#box1').text();
alert(str); 
```

这将返回：

```
value1
    value2
    value3 
```

我怎样才能得到“value1”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T19:20:33.480

你可以这样做 ：

```
var text = $('#box1').clone().children().remove().end().text(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T19:22:11.777

把它自己放在它`<span>`周围。

```
<span id="box1">
    <span id="span1">value1</span>
        <span class="box2">value2</span>
        <span class="box3">value3</span>
</span> 
```

然后这样做

```
var str = $('#span1').text(); 
```

# java - 将数组值设置为静态

> ID：15074697
> 
> 赞同：2
> 
> 时间：2013-02-25T19:18:49.343
> 
> 标签：java, arrays, static-variables

使用java，有没有办法将数组中的某些值设置为静态/不可编辑？我正在尝试制作数独游戏，所以我希望设置初始数字，以便程序无法更改它们，但其他数字可以更改。到目前为止，我已经进行了一些谷歌搜索，但我的搜索都没有找到任何相关信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T19:20:44.937

您必须通过将其设为私有来隐藏该数组。并且永远不要返回对数组的引用，而是返回一个克隆。

例如

```
public class ArrayHolder {
    private String[] array;

    public ArrayHolder(String[] inputArray) {
        //make a copy of inputArray
        //assign the reference to the copy to this.array
    }

    public String[] getArray() {
        //make a copy of the array
        //return the reference to the copy
    }
} 
```

至于使某些元素可更新，您必须在类中编写 mutator 方法，以便只有这些方法可以更改数组中的某些元素。

# android - 如何按时设置通知

> ID：15074705
> 
> 赞同：0
> 
> 时间：2013-02-25T19:19:04.377
> 
> 标签：android, time, timer, push-notification, settimeout

嘿伙计们，我创建了课程，现在我想设置`Notification`准时。例如，如果有人单击按钮，`Notification`十分钟后应该会显示。

***代码***

```
TextView txtV;
Button bnot;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.receiving);
    txtV=(TextView)findViewById(R.id.txtV);
    bnot=(Button)findViewById(R.id.bN);
    bnot.setOnClickListener(this);
    Bundle extras = getIntent().getExtras();
    if(extras !=null) {
        String value = extras.getString("key"); //assign it.
        txtV.setText("Remember :"+value); //set it to textview.
      }
    }

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    Intent intent = new Intent();
      Bundle extras = getIntent().getExtras();
     String value = extras.getString("key"); //assign it.
     PendingIntent pIntent = PendingIntent.getActivity(this, 0, intent, 0);
    Notification noti = new Notification.Builder(this)
    .setTicker("Remember")
    .setContentTitle(value)
    .setContentText("Notification content.")
    .setSmallIcon(R.drawable.ic_launcher)
    .setContentIntent(pIntent).getNotification();
    noti.flags=Notification.FLAG_AUTO_CANCEL;
    NotificationManager notificationManager = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
    notificationManager.notify(0, noti); 

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T19:42:41.427

从点击按钮开始响起 10 分钟的闹铃

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T19:53:15.927

```
AlarmManager alarm = (AlarmManager)getActivity().getSystemService(Context.ALARM_SERVICE);
Calendar cal = Calendar.getInstance();
//1000*60*10 = 10 minutes
alarm.setRepeating(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), 1000*60*10, pendingIntent); 
```

# c# - 覆盖子类中的方法或挂钩事件？

> ID：15074707
> 
> 赞同：1
> 
> 时间：2013-02-25T19:19:09.330
> 
> 标签：c#, oop

假设我有一个产品类：

```
public class Product
{
    public event ProductColorChangedEventHandler ColorChanged;
    protected virtual void OnColorChanged()
    {
        if (null != ColorChanged)
          ColorChanged();
    }
} 
```

如果我从这个类继承并且我需要在颜色发生变化时捕获通知，那么`OnColorChanged`在我的子类构造函数中覆盖或挂钩事件会更好吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T19:24:39.110

我认为首选的方法是订阅子类中的事件，如下所示：

```
public class SubProduct : Product
{
  public SubProduct()
  {
      ColorChanged += new ProductColorChangedEventHandler(color_changed);
  }

  private color_changed(object sender, EventArgs e)
  {
      //do stuff
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T19:35:09.940

您可以覆盖该方法

```
public override OnColorChanged()
{
    //do stuff
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T19:46:12.657

当您仍在设计应用程序时，挂钩并不是正确的方法。

在您的子类中订阅事件，是您问题的干净解决方案。

这是一本好书：[在 Wiki 上挂钩](http://en.wikipedia.org/wiki/Hooking#C.23_keyboard_event_hook)

# java - 将阿拉伯字母存储到 phpMyAdmin

> ID：15074709
> 
> 赞同：0
> 
> 时间：2013-02-25T19:19:16.697
> 
> 标签：java, mysql, jdbc, phpmyadmin, arabic

我正在将数据从 JAVA 桌面应用程序 (JDBC) 插入到 mysql 数据库。数据有一些阿拉伯语单词。使用 phpmyadmin 界面浏览表数据时，我只有问号“????????????”。我能做些什么来解决这个问题？非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T22:34:53.540

`\wamp\bin\mysql\mysql5.5.24\my.ini`只需在 [mysqld] 类别的 my.ini 文件中添加这 2 行：

```
 [mysqld]
//you will find surely some data/lines in [mysqld] category, just add the following lines
    character-set-server=utf8
    collation-server=utf8_general_ci 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-13T21:00:34.350

您可以转到您的 PhpMyAdmin，然后更改数据库的排序规则，`cp1256_general_ci`然后转到表选项，并将排序规则设置为`cp1256_general_ci`，因此可能包含阿拉伯语单词的字段的排序规则相同..

# javascript - 如何从 Wordpress 3.5 媒体上传器中获取选择

> ID：15074715
> 
> 赞同：2
> 
> 时间：2013-02-25T19:19:54.873
> 
> 标签：javascript, media, wordpress-3.5

我正在尝试从新媒体上传器的默认实例中获取选择...

我对它默认显示的方式很满意，所以我不使用：-

```
file_frame = wp.media.frames.file_frame = wp.media(
{
    title: 'Select File',
    button: {
        text: jQuery( this ).data( 'uploader_button_text' )
    },
    multiple: false
}); 
```

只是

```
wp.media.editor.open(); 
```

所以这显然不起作用

```
attachment = file_frame.state().get('selection').first().toJSON(); 
```

但这也不是

```
wp.media.editor.state().get('selection').first().toJSON(); 
```

或这个

```
wp.media.state().get('selection').first().toJSON(); 
```

那么我应该使用什么代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-11T02:04:36.717

改编自这里的答案：[https ://wordpress.stackexchange.com/questions/87357/wordpress-media-manager-3-5-default-link-to](https://wordpress.stackexchange.com/questions/87357/wordpress-media-manager-3-5-default-link-to)

扩展 的`render`功能`wp.media.view.Settings.AttachmentDisplay`，然后可以访问`this.controller.state().get('selection')`：

```
function($) {
   var _AttachmentDisplay = wp.media.view.Settings.AttachmentDisplay;
   wp.media.view.Settings.AttachmentDisplay = _AttachmentDisplay.extend({
      render: function() {
         _AttachmentDisplay.prototype.render.apply(this, arguments);
         selection = this.controller.state().get('selection').first().toJSON();
     //now, for example:
         filename = selection.filename;
      }
   });
})(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T00:26:15.087

你可以尝试这样的事情（对于多选）......但不能保证它有效：

```
var selection = wp.media.editor.state().get('selection');

var attachment_ids = selection.map( function( attachment ) {
  attachment = attachment.toJSON();
  return attachment.id;
}).join(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-05T09:15:52.800

我知道这是一个旧线程，但我在 Google 搜索中偶然发现了这一点，以在上传多个文件时获取所有附件 ID。

我稍微改编了阿达尔的回答，效果很好：

```
 var selection = wp.media.state().get('selection');

                var attachment_ids = selection.map( function( attachment ) {
                    attachment = attachment.toJSON();
                    return attachment.id;
                }).join(); 
```

只是将其添加为参考，因为当时 Adal 没有得到关于答案的反馈（而且我还没有足够的声誉来发表评论）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T17:11:21.503

好的，我有一个 hacky 解决方案，直到有人希望可以发布如何正确地做到这一点......

```
jQuery('.media-modal .type-image').on('click',function(index, element) {
var thisCollection = wp.media.model.Query.all._byCid;
setTimeout(function() { //we need this becuse the details area is not generated until after the click
    var thisEditUrl = jQuery('.details .edit-attachment').attr('href');
    var attachId = thisEditUrl.match(/post=([^&]+)/)[1];
    var attachmentAtts = '';
    jQuery.each(thisCollection, function(index,item) {
        if(this.id == attachId)
            attachmentAtts = this.attributes;
    });
},500);
}); 
```

由于 setTimeout，它并不理想，因为我们不知道填充 .details 区域需要多长时间，但经过一天半的尝试，我无法解决任何其他问题。

希望有人知道如何正确地做到这一点；）

# matlab - 如何在不使用内存的情况下保存大数据

> ID：15074716
> 
> 赞同：1
> 
> 时间：2013-02-25T19:20:02.493
> 
> 标签：matlab, save, large-data

我在我的程序中使用了这一行：

```
...
A=zeros(x,y);
save 'A.txt' A -ascii;
B=zeros(x,y+1);
save 'B.txt' B -ascii; 
```

但是当我运行它时，会发生内存溢出并且程序会崩溃。因为变量`A`和`B`非常大。

我想要一种像下面这样`zeros(x,y)`直接保存到文件而不是使用内存的方法。

```
save 'A.txt' zeros(x,y) -ascii; 
```

但这不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T19:31:57.707

试试[MATFILE](http://www.mathworks.com/help/matlab/ref/matfile.html)对象。然后您可以将数据按部分保存到mat文件中的变量中。

```
filename = 'test.mat';
matObj = matfile(filename,'Writable',true);
n = 1000;
for k=1:n
    matObj.A(k,1:n) = zeros(1,1000);
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T19:21:46.920

您可以一次附加每个元素或行，例如使用[`fprintf`](http://www.mathworks.com/help/matlab/ref/fprintf.html)：

```
A=zeros(10,20);
fid = fopen('test.txt','w');
for ii=1:numel(A)
fprintf(fid, '%f\n', A(ii));
end  
fclose(fid); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T17:14:35.827

如果您的文件全为零，则解决方案相当简单：

*   制作一个循环打印 y 个零 x 次。

如果你的矩阵不是全零，那么问题就更有趣了。希望它是一个相当稀疏的矩阵，在这种情况下，这个问题有一些很好的答案：

[如何将非常大的 MATLAB 稀疏矩阵保存到文本文件中？](https://stackoverflow.com/questions/217852/how-can-i-save-a-very-large-matlab-sparse-matrix-to-a-text-file)

在旁注中，根据您的代码何时阻塞，这也可能有所帮助（通常这是一个好主意）：

*   在创建 B 之前清除 A

否则你需要两倍的内存

# android - 无法在 Android 上开始视频录制

> ID：15074722
> 
> 赞同：1
> 
> 时间：2013-02-25T19:20:12.323
> 
> 标签：android, android-camera

我正在尝试开发一个应该自动开始录制的应用程序。截至目前，我只能在用户按下按钮时开始录制，否则代码会抛出异常**java.io.IOException: invalid preview surface**

我曾尝试延迟开始录制视频以使表面正确显示，但仍然没有帮助。

# jquery - jquery第一个表，最后一行选择

> ID：15074723
> 
> 赞同：2
> 
> 时间：2013-02-25T19:20:21.823
> 
> 标签：jquery

我遇到了`tr:last` 选择器的问题。

我有一个基本表：

```
<table id="myTable">
 <tr>
   <td>1</td>
   <td></td>
 </tr>
</table> 
```

当用户单击链接时，它会使用以下方法向我的表中添加一个附加行：

```
$("a#more").live("click", function(){

  $table = $('#myTable');
  var a = $table.find('tr:last').clone(true);
  $table.find('tr:last').after(a);  

}); 
```

这就像一个魅力。但是，当我决定在`td`我的表的最后一个表中添加一个额外的表时，问题就开始了：

```
<table id="myTable">
 <tr>
  <td> 1 </td>
  <td>
    <table id="myTable2">
    <tr><td> Additional Information </td></tr>
    </table>
  </td>
</tr>
</table> 
```

当我使用`clone` 这个时间时，它会选择我的第二个表的最后一行并将新行复制到我的第二个表。我的目标是只复制我的第一个表的整个最后一行，并创建一个`tr`包含所有内容的新表（包括第二个表的副本）。

我不知道该怎么做。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T19:22:49.500

代替

```
var a = $table.find('tr:last').clone(true); 
```

用于[`.children()`](http://api.jquery.com/children/)将其限制为原始表：

```
var a = $table.children('tbody').children('tr:last').clone(true); 
```

# css - 如何获取 HTML 定义列表以遵守列表样式类型样式规则？

> ID：15074737
> 
> 赞同：5
> 
> 时间：2013-02-25T19:20:56.440
> 
> 标签：css

所以我正在标记客户的网页设计。该页面是一个常见问题解答页面，其中每个常见问题解答部分都有一个问题和答案列表。对于这种情况，最合适的语义标记是 html 定义列表。

客户的模型还在每个问题/答案对旁边显示数字，例如有序列表。

所以很自然地我想我会用`<dl>`元素标记内容，并使用 CSS 来添加`list-style-type: decimal`. 然而，这完全被忽略了。

是因为`<dl>`元素不能接受列表样式吗？这似乎非常倒退，因为它毕竟是一个列表元素！

还是我的标记做错了什么？

这是我的代码 CSS 和 HTML 的示例：

```
dl { list-style: decimal; }
```

```
<dl class="some-list">

  <dt><strong>Q</strong>: How Do I Do Some Thing?</dt>
  <dd><p><strong>A:</strong> You just do it, okay? Want a longer explanation? Try this: You just do it, okay? Want a longer explanation? Try this: You just do it, okay? Want a longer explanation? Try this: You just do it, okay? Want a longer explanation? Try this:</p>
  </dd>

  <dt><strong>Q</strong>: How Do I Do Some Other Thing?</dt>
  <dd><p><strong>A:</strong> You just do it, okay? Want a longer explanation? Try this: You just do it, okay? Want a longer explanation? Try this: You just do it, okay? Want a longer explanation? Try this: You just do it, okay? Want a longer explanation? Try this:</p>
  </dd>

</dl>
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-25T19:24:33.063

来自[Mozilla 文档](https://developer.mozilla.org/en-US/docs/CSS/list-style-type)：

> list-style-type CSS 属性指定列表项元素的外观。由于它是唯一默认显示：列表项，这通常是一个 <li> 元素，但可以是任何具有此显示值的元素。

您可以在 CSS 中应用`display:list-item`到您的`dt`元素，然后也可以`list-style-type`对其应用选项。

```
dt.wanna-be-list {
  display:list-item;
  list-style-type: square;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T19:35:44.353

试试这个[jsFiddle 示例](http://jsfiddle.net/uvrYd/)：

```
<html>

<dl class="faq">
    <dt>How much wood would a wood chuck chuck if a wood chuck could chuck wood?</dt>
    <dd>1,000,000</dd>
    <dt>What is the air-speed velocity of an unladen swallow?</dt>
    <dd>What do you mean? An African or European swallow?</dd>
    <dt>Why did the chicken cross the road?</dt>
    <dd>To get to the other side</dd>
</dl>

<css>

.faq {
    counter-reset: my-badass-counter;
}
.faq dd {
    margin: 0 0 50px;
}
.faq dt:before {
    content: counter(my-badass-counter, decimal);
    counter-increment: my-badass-counter;
    font: bold 50px/1 Sans-Serif;
    left: 0;
    position: absolute;
    top: 0;
}
.faq dt, .faq dd {
    padding-left: 50px;
}
.faq dt {
    font: bold 16px Georgia;
    padding: 4px 0 10px;
    position: relative;
} 
```

从[这个解释](http://css-tricks.com/numbering-in-style/)你可以看到它[在这个例子中工作](http://css-tricks.com/examples/NumberedFAQ/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T19:24:54.740

改用 Ol(ordered list)，样式应该可以工作（ul 表示无序）。

# facebook - 在 Page App 中使用 FB 和 PHP SDK signed_request 获取用户电子邮件

> ID：15074756
> 
> 赞同：0
> 
> 时间：2013-02-25T19:21:46.880
> 
> 标签：facebook, email, facebook-php-sdk

最近我开始学习 PHP，因为我想做一个简单的应用程序并学习新的东西。但现在我正在努力与 Facebook 集成。

我有几个问题。

1.  当我单击 href 以获取 perms 时 - 没有任何反应 - 即使设置了显示弹出参数，也必须在新选项卡中打开它。（需要使用 iframe 和访问令牌？）

2.  尽管我要求电子邮件许可，但 signed_request 并未携带此类信息。

请记住，我是 PHP 的新手。谢谢大卫

这是我的代码：

```
//call facebook extended perms.
$loginUrl = $facebook->getLoginUrl($params);
$params = array(
'client_id' => 'AppID',
'scope' => 'email, publish_stream',
);

$loginUrl = $facebook->getLoginUrl($params);

echo ('a href="'.$loginUrl.'" perms a'); 
```

这是signed_request

```
//Get the signed request
$srq = $_REQUEST['signed_request'];

function parse_signed_request($srq) {
  list($encoded_sig, $payload) = explode('.', $srq, 2); 

  // decode the data
  $sig = base64_url_decode($encoded_sig);
  $data = json_decode(base64_url_decode($payload), true);

  print_r ($data);
}

function base64_url_decode($input) {
  return (base64_decode(strtr($input, '-_', '+/')));
}

//print the signed request for "debug?"
parse_signed_request($srq);` 
```

当我通过烫发时，输出如下。

```
Array
(
    [algorithm] => HMAC-SHA256
    [expires] => 1361822400
    [issued_at] => 1361817488
    [oauth_token] => loooooong token
    [page] => Array
        (
            [id] => 146945218690274
            [liked] => 1
            [admin] => 1
        )

    [user] => Array
        (
            [country] => cz
            [locale] => cs_CZ
            [age] => Array
                (
                    [min] => 18
                    [max] => 20
                )

        )

    [user_id] => deleted
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:26:02.657

是的！终于成功了！！现在只有电子邮件部分。代码有点乱，需要清理，但它可以工作:) 答案是在[这里](http://support.roarengine.com/discussions/support/697-facebook-integration-for-iframe-apps-getting-an-oauth_token-from-a-signed-request-using-the-php-facebook-api)找到的。

```
//include facebook.php
require_once("./src/facebook.php");

$config = array();
$config[‘appId’] = '123222421192165';
$config[‘secret’] = '346406ef4af8382c71764c4fd270b595';
$config[‘fileUpload’] = false; // optional
$app_FacebookURL = 'https://still-mesa-9778.herokuapp.com';
$facebook = new Facebook($config);
$params = array(
'client_id' => '123222421192165',
'scope' => 'email, publish_stream',
);

$loginUrl = $facebook->getLoginUrl($params);

//test signed postu
$srq = $_REQUEST['signed_request'];

function parse_signed_request($srq) {
list($encoded_sig, $payload) = explode('.', $srq, 2); 

// decode the data
$sig = base64_url_decode($encoded_sig);
$data = json_decode(base64_url_decode($payload), true);
$GLOBALS['sdata'] = $data; //create a superglobal variable to hold the decoded data for later use
print_r ($data);
}

function base64_url_decode($input) {
return (base64_decode(strtr($input, '-_', '+/')));
}

//print the signed post
parse_signed_request($srq);

//Check for oauth_token in signed request.
if (!array_key_exists('oauth_token', $sdata))
{
    //There is no oauth_token in the signed request so forward to authorizing page.
    echo "<script>top.location.href='https://graph.facebook.com/oauth/authorize?client_id=".$params['client_id']."&redirect_uri=". urlencode($app_FacebookURL)."&scope=".$params['scope']."'</script>";
}
else //if (array_key_exists('oauth_token', $signedRequest))
{
    //There is an oauth_token in the signed request.  For now just print it...
    echo("oauth_token is: ");
    echo($sdata['oauth_token']);

    //... and also use it to fetch the user's email then print the user's email so I know it's working.
    $graph_url = "https://graph.facebook.com/me?access_token=" . $sdata['oauth_token'];
    $user = json_decode(file_get_contents($graph_url));
    echo("\nHello " . $user->email . "!");
} 
```

# sql - Derby SQL 更新触发器

> ID：15074759
> 
> 赞同：1
> 
> 时间：2013-02-25T19:22:00.843
> 
> 标签：sql, triggers, derby

我正在尝试为 Derby 数据库编写更新触发器。每次进行更改/将新记录添加到 ODS_CNTRL 表时，触发器都需要更新 ODS_CNTRL_AUDIT 表。（这是在 Oracle 中）

到目前为止我有

```
 create trigger Update_Audit
            after update 
               on ODS_CNTRL
            for each row MODE DB2SQL
            insert into ODS_CNTRL_AUDIT
            (
            ODS_LOAD_ID, ODS_STATUS, USR_WWID, USR_FIRST_NM, 
            USR_LAST_NM, USR_DISPLAY_NM, USR_NT_ID,TOT_AMT
            )
            values
            (
            ODS_CNTRL.ODS_LOAD_ID, ODS_CNTRL.ODS_STATUS, ODS_CNTRL.USR_WWID, ODS_CNTRL.USR_FIRST_NM, 
            ODS_CNTRL.USR_LAST_NM, ODS_CNTRL.USR_DISPLAY_NM, ODS_CNTRL.USR_NT_ID, ODS_CNTRL.TOT_AMT, 
            T
            ); 
```

但是这段代码不会运行。我收到错误 -

```
 "Error code -1, SQL state 42X04: Column 'ODS_CNTRL.ODS_LOAD_ID' is either not in any     table in the FROM list or appears within a join specification and is outside the scope of the join specification or appears in a HAVING clause and is not in the GROUP BY list. If this is a CREATE or ALTER TABLE  statement then 'ODS_CNTRL.ODS_LOAD_ID' is not a column in the target table." 
```

我需要添加 For 命令吗？需要进行哪些编辑才能使此触发器正常工作？所有值都是 ODS_CONTROL 表中的列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T19:33:40.700

尝试使用 REFERENCING 子句，如下所述：http: [//db.apache.org/derby/docs/10.9/ref/rrefsqlj43125.html](http://db.apache.org/derby/docs/10.9/ref/rrefsqlj43125.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T21:12:04.970

我已经弄清楚了这个问题。我需要为 value 部分中的每个设置一个 select/from 语句。我的最终代码看起来像这样-

```
 create trigger UpdateAUDIT
  after update  
            on ODS_CNTRL
  for each row MODE DB2SQL
            insert into ODS_CNTRL_AUDIT
            (
            ODS_LOAD_ID, ODS_STATUS, USR_WWID, USR_FIRST_NM, 
            USR_LAST_NM, USR_DISPLAY_NM, USR_NT_ID,TOT_AMT
            )
            values
            (
            (select ODS_LOAD_ID from ODS_CNTRL),(select ODS_STATUS from ODS_CNTRL),
            (select USR_WWID from ODS_CNTRL), (select USR_FIRST_NM from ODS_CNTRL),
            (select USR_LAST_NM from ODS_CNTRL),(select USR_DISPLAY_NM from ODS_CNTRL),
            (select USR_NT_ID from ODS_CNTRL),(select TOT_AMT from ODS_CNTRL)
            ); 
```

# javascript - 重新启用列表框中的禁用项目

> ID：15074773
> 
> 赞同：1
> 
> 时间：2013-02-25T19:22:59.967
> 
> 标签：javascript

我正在尝试编写一个独立的 javascript，我首先从列表框中选择（单个或多个）项目，然后在名为 DBA 的文本框中指定我的名字。

这会在底部创建行条目，具体取决于“选定”的 #。现在，当我“删除”该行时，我无法重新启用已删除的列表框项目。这是我的代码：

```
<form name="myform" action="" method="get" id="myform">
    <table border="1" cellpadding="10" cellspacing="0" id="table1">
        <tr>
            <td valign="top"><input type="button" value="Selected" onclick="addRow();" />
                <br />
                <select name="selSea" id="selSeaShells" size="5" multiple="multiple">
                  <option value="ORANGE" selected="selected">
                    ORANGE
                  </option>

                  <option value="APPLE" selected="selected">
                    APPLE
                  </option>

                  <option value="GRAPE" selected="selected">
                    GRAPE
                  </option>

                  <option value="BANANA" selected="selected">
                    BANANA
                  </option>

                  <option value="TREE" selected="selected">
                    TREE
                  </option>

                  <option value="TEST" selected="selected">
                    TEST
                  </option>

                  <option value="NEWS" selected="selected">
                    NEWS
                  </option>

                  <option value="SKY" selected="selected">
                    SKY
                  </option>
                </select>
            </td>

            <td valign="top"><input type="text" id="DBA" name="DBA" value="" /> DBA</td>
        </tr>
    </table>
</form>
<script language="JavaScript" type="text/javascript">
    //<![CDATA[
    <!--

    function addRow()
    {
        var tbody = document.getElementById('table1').getElementsByTagName('tbody')[0];
        var DBAValuesObj = document.myform.DBA.value;
        var selectedArray = new Array();
        var selObj = document.getElementById('selSeaShells');
        var i;
        var count = 0;
        for (i=0; i<selObj.options.length; i++) {
            if (selObj.options[i].selected) {
                selObj.options[i].disabled = 'disabled';
                selectedArray[count] = selObj.options[i].value;
                count++;
            }
        }
        tbody.value = selectedArray + "." + DBAValuesObj;

        var row = document.createElement('TR');
        var cell1 = document.createElement('TD');
        var cell2 = document.createElement('TD');
        var inp1 = document.createElement('INPUT');
        var inp2 = document.createElement('INPUT');
        inp1.setAttribute('type','text');
        inp1.setAttribute('name','PartIDArray[]');
        inp1.setAttribute('size','15');
        inp1.setAttribute('maxlength','20');
        inp1.setAttribute('value','');

        inp1.setAttribute('value',tbody.value); 

        inp2.setAttribute('type','button');
        inp2.setAttribute('value','Delete');
        inp2.onclick=function(){delRow(this);}
        cell1.appendChild(inp1);
        row.appendChild(cell1);
        cell2.appendChild(inp2);
        row.appendChild(cell2);
        tbody.appendChild(row);
    }

    function delRow(button)
    {
        var row = button.parentNode.parentNode;
        var tbody = document.getElementById('table1').getElementsByTagName('tbody')[0];

        var selArray = new Array();
        var selObject = document.getElementById('selSeaShells');
        var i;
        var count = 0;
        for (i=0; i<selObject.options.length; i++) {
            if (selObject.options[i].selected) {
               selObject.options[i].disabled = '';
                selArray[count] = selObject.options[i].value;
               count++;
            }
        }

    tbody.removeChild(row);
    }

    //-->
    //]]>
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T19:38:21.887

这是因为你的逻辑是错误的。重新启用项目时，您正在迭代选定的项目。

场景 1 - 您选择 APPLE。单击已选择。单击删除。--> 您将看到 APPLE 已启用。

场景 2 - 您选择 APPLE。单击已选择。选择橙色。单击删除。--> 你会看到 APPLE**没有**启用。

因此，您需要记住要删除的元素以重新启用它们。并且`selObject.options[i].disabled = '';`会工作。它在技术上是正确的。但是，逻辑很糟糕。

工作代码：

```
<form NAME="myform" action="" method="get">
<table border="1" cellpadding="10" cellspacing="0" id="table1">
<tr>
<td valign="top">
<input type="button" value="Selected" onclick="addRow();" />
<br />
<select name="selSea" id="selSeaShells" size="5" multiple="multiple">
<option value="ORANGE" selected>ORANGE</option>
<option value="APPLE" selected>APPLE</option>
<option value="GRAPE" selected>GRAPE</option>
<option value="BANANA" selected>BANANA</option>
<option value="TREE" selected>TREE</option>
<option value="TEST" selected>TEST</option>
<option value="NEWS" selected>NEWS</option>
<option value="SKY" selected>SKY</option>
</select>
</td>
<td valign="top">
<input type="text" id="DBA" NAME="DBA" VALUE="" />
DBA
</td>

</tr>
</table>
</form>

<script language="JavaScript" type="text/javascript">
<!--

function addRow()
{
var tbody = document.getElementById('table1').getElementsByTagName('tbody')[0];
var DBAValuesObj = document.myform.DBA.value;
var selectedArray = new Array();
var selObj = document.getElementById('selSeaShells');
var i;
var count = 0;
for (i=0; i<selObj.options.length; i++) {
if (selObj.options[i].selected) {
       selObj.options[i].disabled = 'disabled';
selectedArray[count] = selObj.options[i].value;
       count++;
}
}
tbody.value = selectedArray + "." + DBAValuesObj;

var row = document.createElement('TR');
var cell1 = document.createElement('TD');
var cell2 = document.createElement('TD');

var inp1 = document.createElement('INPUT');
var inp2 = document.createElement('INPUT');
inp1.setAttribute('type','text');
inp1.setAttribute('name','PartIDArray[]');
inp1.setAttribute('size','15');
inp1.setAttribute('maxlength','20');
inp1.setAttribute('value','');

inp1.setAttribute('value',tbody.value); 

inp2.setAttribute('type','button');
inp2.setAttribute('value','Delete');
inp2.onclick=function(){delRow(this);}
cell1.appendChild(inp1);
row.appendChild(cell1);
cell2.appendChild(inp2);
row.appendChild(cell2);

var cell3 = document.createElement('INPUT');
cell3.setAttribute('type','HIDDEN');
cell3.setAttribute('value',selectedArray);

row.appendChild(cell3);

tbody.appendChild(row);
}
       function delRow(button)
{
var row = button.parentNode.parentNode;
var tbody = document.getElementById('table1').getElementsByTagName('tbody')[0];

var selArray = new Array();
var selObject = document.getElementById('selSeaShells');
var i;
var count = 0;
for (i=0; i<selObject.options.length; i++) {
if (selObject.options[i].value.indexOf(row.childNodes[2].value)>-1) {

       selObject.options[i].disabled = '';
       selArray[count] = selObject.options[i].value;
       count++;
}
}

tbody.removeChild(row);
}

//-->
</script> 
```

# python - 在 Ubuntu 12.10 上导入 SciPy 时出错：clapack_sgesv

> ID：15074779
> 
> 赞同：0
> 
> 时间：2013-02-25T19:23:46.677
> 
> 标签：python, scipy

我开始使用 Python，我一直在尝试使用 SciPy 和 SciKits 的一些方法，但是当我导入 SciPy 模块时，我得到了这个错误：

```
ImportError: /usr/local/lib/python2.7/dist-packages/scipy/linalg/clapack.so: 
   undefined symbol: clapack_sgesv 
```

我一直在寻找解决方案，但还没有找到。这是在 Ubuntu 12.10 上。谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T19:26:30.803

我自己没有尝试过，但听起来你好像缺少线性代数例程，SciPy 大量使用这些例程。这个页面有帮助吗？[http://www.scipy.org/Installing_SciPy/BuildingGeneral](http://www.scipy.org/Installing_SciPy/BuildingGeneral)

似乎还可以通过 apt-get [http://docs.scipy.org/doc/numpy/user/install.html获得 Lapack/BLAS 例程](http://docs.scipy.org/doc/numpy/user/install.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T19:51:05.343

[这个错误报告](http://projects.scipy.org/scipy/ticket/1031)有一些建议。考虑到[这个](https://stackoverflow.com/questions/8823692/undefined-symbol-clapack-sgesv)类似的问题（链接到[这篇](http://wiki.debian.org/DebianScience/LinearAlgebraLibraries)Debian wiki 文章），您可能需要将系统 liblapack 切换到提供所需符号的那个（例如 from 的那个`libatlas3-base`）。

# ruby-on-rails - 在 IE 中使用返回或重新加载按钮的错误响应格式

> ID：15074780
> 
> 赞同：2
> 
> 时间：2013-02-25T19:23:53.787
> 
> 标签：ruby-on-rails, ajax, internet-explorer, responseformat

最近我在 IE 和其他浏览器中遇到了一个问题，我前段时间在 railscasts.com 上也注意到了这个问题。

例如，加载页面：

*   railscasts.com/episodes/some_id#comments

将在激活评论选项卡的情况下加载 railscasts 剧集。导航到“类似”选项卡会将 url 更改为：

*   railscasts.com/episodes/some_id#similar

如果我点击后退或（IE）重新加载按钮，我会看到评论的 json 表示。

挖掘日志文件我发现了这个：

铬合金：

*   EpisodesController#显示为 HTML
*   EpisodesController#显示为 HTML

IE

*   EpisodesController#显示为 HTML
*   EpisodesController#show as */*

在一个相关的stackoverflow问题中，建议更改订单`respond_to`块并使第一个响应块'html'

```
 respond_to do |format|
  format.html
  format.json
end 
```

意思是，如果没有给出响应格式，则需要第一个响应格式。不是该问题的 DRY 解决方案。如果您正在使用，也不可能`respond_with(@episodes)`

另一种解决方案是在 routes.rb 中设置默认响应格式：

```
match 'episodes/:id' => 'episodes#show', :defaults => { :format => 'html' } 
```

这也不是 DRY，因为您不想为您定义的每条路线都写下它。

最后我找到了在应用程序控制器中使用 before_filter 的建议：

```
before_filter :set_default_response_format
protected
def set_default_response_format
  request.format  = "html" if request.format == "*/*" && request.content_type.nil?
end 
```

这似乎是该问题的稳定解决方案。

似乎没有更多的程序员遇到这个问题，或者我正在做某事，这似乎很奇怪。一开始就错了？

# java - LWJGL 中的 3D 拾取

> ID：15074782
> 
> 赞同：0
> 
> 时间：2013-02-25T19:23:57.140
> 
> 标签：java, opengl, lwjgl

我正在制作一个 Minecraft 风格的游戏，将块的 3D 阵列分成块。但是然后我需要检查块播放器指向什么来执行世界修改。到目前为止，这是我想出的：

```
 private Block getBlockLookedAt(EntityPlayer ep) {

        double px = ep.getPosition().x;
        double py = ep.getPosition().y;
        double pz = ep.getPosition().z;

        float pPitch = ep.getPitch()*-1;
        float pYaw = ep.getYaw()*-1;

        double searchRadius = 6;

        double targetX = searchRadius * Math.cos(Math.toRadians(pYaw))*Math.sin(Math.toRadians(pPitch));
        double targetY = searchRadius * Math.sin(Math.toRadians(pYaw))*Math.sin(Math.toRadians(pPitch));
        double targetZ = searchRadius * Math.cos(Math.toRadians(pPitch));
        //System.out.println("=");
        //System.out.println(px + "," + py + "," + pz);
        //System.out.println(targetX + "," + targetY + "," + targetZ);
        //System.out.println("=");
        for(double i = 0; i<searchRadius; i+=0.01){
            targetX = i * Math.cos(Math.toRadians(pYaw))*Math.sin(Math.toRadians(pPitch));
            targetY = i * Math.sin(Math.toRadians(pYaw))*Math.sin(Math.toRadians(pPitch));
            targetZ = i * Math.cos(Math.toRadians(pPitch));
            int bx = (int)Math.ceil(targetX+px);
            int by = (int)Math.ceil((targetY*-1)+py);
            int bz = (int)Math.ceil(targetZ+pz);
            System.out.println(bx + "," + by + "," + bz + "," + getBlock(bx,by,bz).getID());
            if(getBlock(bx,by,bz).getID()!=0)return getBlock(bx,by,bz);
        }

        return Block.air;
    } 
```

我在这里做的是使用球坐标，并在检查半径中添加 0.01 以检查范围内是否存在与空气不同的块。虽然这似乎不起作用（它总是返回空气，我需要在块内才能检测到其他块）有人有解决方案，或者可能有更好的方法吗？

PS。我已经阅读了 schabby 的教程，据我理解，它不会检查 Z 轴，所以这不是我想要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T19:40:28.683

```
double searchRadius = 0;
...
for(double i = 0; i<searchRadius; i+=0.01){
    ...
}
return Block.air; 
```

尝试`searchRadius`大于零的a。

# recaptcha - 有什么比 reCaptcha 更好的吗？

> ID：15074783
> 
> 赞同：3
> 
> 时间：2013-02-25T19:23:58.267
> 
> 标签：recaptcha

我已经在我的网站上实施了 reCaptcha，但每当我测试它时，我需要尝试 3-5 次才能成功。我不认为我的用户会喜欢这个。我注意到有些网站有诸如“什么是 2 + 2？”之类的问题。类似的东西同样有效吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-01T20:27:29.287

作为答案发布的评论：

查看[CAPTCHA-less Security](http://www.karlgroves.com/2012/04/03/captcha-less-security/)以了解一些替换它们的方法。

至于“2+2”或蜜罐（盲人或没有 CSS 阅读的人不会失败），只要您不是 Google，它们都可以！;)（即一个高调的目标）
我遇到的机器人真的很笨，他们只是试了又试。

* * *

上述文章的作者和可访问性顾问 K. Groves 还收集了一份[资源清单：Breaking CAPTCHA](http://www.karlgroves.com/2013/02/09/list-of-resources-breaking-captcha/)

> （他）挖掘出的（28 个）资源清单表明 CAPTCHA 不是人们认为的安全银弹。

从另一个角度来看，用户体验（是的，验证码让用户*很*恼火。愤怒的逃跑的人......），谷歌搜索“ux验证码”似乎很有效，例如来自UX SE的这些答案：验证码[真的影响用户体验吗？](https://ux.stackexchange.com/questions/33211/does-captcha-really-affect-ux)

# c - 使用冒泡排序对单词进行排序

> ID：15074788
> 
> 赞同：0
> 
> 时间：2013-02-25T19:24:21.823
> 
> 标签：c

我正在尝试使用冒泡排序对单词进行排序，但无法弄清楚错误是什么。我的交换工作但无法正确排序。

```
void sortByWord (struct node** head) {
    struct node* temp  = (*head);
    struct node* temp2 = (*head);

    int i;
    int j;
    int counter = 0;
    while(temp != NULL)
    {
        temp = nodeGetNextNode(temp);
        counter++;
    }
    for( i = 1; i<counter; i++)
    {
        temp2=(*head);
        for(j = 1; j<counter-1;j++)
        {
            if(wordCmpare(temp2,nodeGetNextNode(temp2))>0)
            {
                swap(head,temp2,nodeGetNextNode(temp2));
                continue;
            }
        }
        temp2 = nodeGetNextNode(temp2);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T19:29:20.927

继续内部`continue`循环。也许您需要添加 goto 或标志。

```
 for( i = 1; i<counter; i++)
  {
        temp2=(*head);
        for(j = 1; j<counter-1;j++)
        {
            if(wordCmpare(temp2,nodeGetNextNode(temp2))>0)
            {
                swap(head,temp2,nodeGetNextNode(temp2));
                goto endOfLoop;
            }
        }

        temp2 = nodeGetNextNode(temp2); // BTW: This line does nothing useful
endOfLoop:       
        ;
  } 
```

这是标志部分：

```
 for( i = 1; i<counter; i++)
    {
    temp2=(*head);
    boolean flag = false;
    for(j = 1; j<counter-1;j++)
    {
        if(wordCmpare(temp2,nodeGetNextNode(temp2))>0)
        {
            swap(head,temp2,nodeGetNextNode(temp2));
            flag = true;
            break;
        }
    }
    if (flag) continue;
    temp2 = nodeGetNextNode(temp2); // BTW: This line does nothing useful
} 
```

# multithreading - Powershell GCI，深度速度

> ID：15074789
> 
> 赞同：0
> 
> 时间：2013-02-25T19:24:26.547
> 
> 标签：multithreading, powershell

我需要一种方法来加速以下代码，以便在非常大的服务器上使用。我需要的只是全名参数的列表。我想使用如下内容：http: [//newsqlblog.com/2012/05/22/concurrency-in-powershell-multi-threading-with-runspaces/](http://newsqlblog.com/2012/05/22/concurrency-in-powershell-multi-threading-with-runspaces/)

我正在阅读它，它看起来很简单，但是我无法让线程在现有池中创建新线程......以及如何传递该池。

任何帮助都会很棒，因为这样做的速度太可怕了，而且我有更多的资源，然后我正在使用。

```
Function Get-ChildItemToDepth {   
    Param(     
        [String]$Path = $PWD,    
        [int]$ToDepth = 255,     
        [Byte]$CurrentDepth = 0
    ) 
    if ($ToDepth -lt 0) {
        return get-item $path
    }
    $CurrentDepth++
    Get-ChildItem $Path | Where-Object { $_.PSIsContainer } | %{ $_ 
        If ($CurrentDepth -le $ToDepth) {
            Get-ChildItemToDepth -Path $_.FullName `
            -ToDepth $ToDepth -CurrentDepth $CurrentDepth
        } 
    }
} 
```

注意：我仅限于 v2.0

摘要：我基本上需要以数字方式尽可能快地将所有文件夹的路径直到 $depth 放入一个数组中。

失败的尝试：

```
$func = `
{
    Param(     
        [String]$Path = $PWD,    
        [int]$ToDepth = 255,     
        [Byte]$CurrentDepth = 0,
        $p = $pool
    ) 
    if ($ToDepth -lt 0) {
        return $path
    }
    $CurrentDepth++
    $folders = Get-ChildItem $Path | Where-Object { $_.PSIsContainer } | select -expand FullName
    If ($CurrentDepth -le $ToDepth) {
        foreach ($path in $folders) {
            $pipeline  = [System.Management.Automation.PowerShell]::create()  
            $pipeline.RunspacePool = $pool 
            $pipeline.AddScript($func).AddArgument($path).AddArgument($ToDepth).AddArgument($CurrentDepth).AddArgument($pool)
            $AsyncHandle = $pipeline.BeginInvoke() 
            $folders += $pipeline.EndInvoke($AsyncHandle)  
            $pipeline.Dispose()  
        }
    }
    return $folders
}    

$path = "\\server\users-folder\"
$toDepth = 3

$pool = [RunspaceFactory]::CreateRunspacePool(1, 4) 
$pool.ApartmentState = "STA" 
$pool.Open() 
$pipeline  = [System.Management.Automation.PowerShell]::create()  
$pipeline.RunspacePool = $pool  
$pipeline.AddScript($func).AddArgument($path).AddArgument($toDepth).AddArgument($CurrentDepth).AddArgument($pool)
$AsyncHandle = $pipeline.BeginInvoke() 
$RESULTS = $pipeline.EndInvoke($AsyncHandle)  
$pipeline.Dispose()  
$pool.Close() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T19:29:16.743

尝试在工作流中调用它 - PowerShell 3.0 开箱即用的强大本机 PowerShell 多线程解决方案

```
Workflow Invoke-Function
{
Function Get-ChildItemToDepth {   
    Param(     
        [String]$Path = $PWD,    
        [int]$ToDepth = 255,     
        [Byte]$CurrentDepth = 0
    ) 
    if ($ToDepth -lt 0) {
        return $path
    }
    $CurrentDepth++
    Get-ChildItem $Path | Where-Object { $_.PSIsContainer } | %{ $_ 
        If ($CurrentDepth -le $ToDepth) {
            Get-ChildItemToDepth -Path $_.FullName `
            -ToDepth $ToDepth -CurrentDepth $CurrentDepth
        } 
    }
}  
Get-ChildItemToDepth 
} 
```

这是一个非常混乱的实现，我只是将您的函数和调用包装在工作流中，以便您可以将其复制粘贴到会话中以便于测试。请让我知道这对你有用。如果您想查看速度差异，我会将函数的结果传递给 Measure

```
Get-ChildItemToDepth | Measure
Invoke-Function | Measure 
```

用法（将工作流粘贴到会话中之后）

```
Invoke-Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T00:35:55.260

转到[http://psasync.codeplex.com](http://psasync.codeplex.com)并下载 psasync 模块（此处的文档[http://newsqlblog.com/2012/12/17/psasync-module-multithreaded-powershell/](http://newsqlblog.com/2012/12/17/psasync-module-multithreaded-powershell/)）。然后 ...

```
Import-Module psasync

$AsyncPipelines = @()

# Allow 4 concurrent processes ... adjust up / down as hardware allows
$pool = Get-RunspacePool 4

# You can play with this to get better performance by going deeper into the directory structure to populate more dirs in the array
# gross generalization -> more dirs + more runspaces in $pool = faster performance

$rootDirs = Get-ChildItem c:\ | Where-Object{$_.PSIsContainer}

# Create a script block to run code per directory stored in $rootDirs
$ScriptBlock =  { ` 
    Param(     
        [String]$Path = $path
    ) 
    Get-ChildItem $path -recurse | Where-Object{$_.PSIsContainer}

}   

# Load up processes on the runspace pool
foreach($dir in $rootDirs) {
    $AsyncPipelines += Invoke-Async -RunspacePool $pool -ScriptBlock $ScriptBlock -Parameters $dir.FullName
}

# "Listen" to the pipelines and grab the results
$dirs = Receive-AsyncResults -Pipelines $AsyncPipelines

# PROFIT
$dirs | Foreach-Object{$_.FullName} 
```

感谢您阅读 newsqlblog.com ;)

# c# - 如何从 IBM MQ 上的 put 方法返回确认？

> ID：15074791
> 
> 赞同：3
> 
> 时间：2013-02-25T19:24:31.350
> 
> 标签：c#, .net, ibm-mq

这是我正在使用的示例代码，但是，我不知道如何从放置或访问队列中获取响应，即消息已发送。

```
 mqQueue = mqQMgr.AccessQueue("Queue Name", MQC.MQOO_OUTPUT |
 MQC.MQOO_INPUT_SHARED |       MQC.MQOO_INQUIRE); 
 mqQueue.Put(mqMsg, mqPutMsgOpts); 
```

PUT 方法是一个 void 返回类型，例如，如果它是 bool，基于返回值 - true/false，我可以确认，消息已发送到队列，这就是我的问题，我如何取回确认，以便将消息发送到队列。

任何输入都会非常有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T23:40:04.517

根据澄清问题的评论进行更新：

将您`PUT`包含在 try 块中并捕获`MQException`. 如果没有`MQException`抛出，那么`PUT`工作并且你得到了 RC=0。例如，这是来自示例`PUT`程序：

```
 void PutMessages()
    {
        try
        {
            // mq properties
            properties = new Hashtable();
            properties.Add(MQC.TRANSPORT_PROPERTY, MQC.TRANSPORT_MQSERIES_MANAGED);
            properties.Add(MQC.HOST_NAME_PROPERTY, hostName);
            properties.Add(MQC.PORT_PROPERTY, port);
            properties.Add(MQC.CHANNEL_PROPERTY, channelName);

            // display all details
            Console.WriteLine("MQ Parameters");
            Console.WriteLine("1) queueName = " + queueName);
            Console.WriteLine("2) host = " + hostName);
            Console.WriteLine("3) port = " + port);
            Console.WriteLine("4) channel = " + channelName);
            Console.WriteLine("5) numberOfMsgs = " + numberOfMsgs);
            Console.WriteLine("");

            // create connection
            Console.Write("Connecting to queue manager.. ");
            queueManager = new MQQueueManager(queueManagerName, properties);
            Console.WriteLine("done");

            // accessing queue
            Console.Write("Accessing queue " + queueName + ".. ");
            queue = queueManager.AccessQueue(queueName, MQC.MQOO_OUTPUT + MQC.MQOO_FAIL_IF_QUIESCING);
            Console.WriteLine("done");

            // creating a message object
            message = new MQMessage();
            message.WriteString(messageString);

            // putting messages continuously
            for (int i = 1; i <= numberOfMsgs; i++)
            {
                Console.Write("Message " + i + " <" + messageString + ">.. ");
                queue.Put(message);
                Console.WriteLine("put");
            }

            // closing queue
            Console.Write("Closing queue.. ");
            queue.Close();
            Console.WriteLine("done");

            // disconnecting queue manager
            Console.Write("Disconnecting queue manager.. ");
            queueManager.Disconnect();
            Console.WriteLine("done");
        }

        catch (MQException mqe)
        {
            Console.WriteLine("");
            Console.WriteLine("MQException caught: {0} - {1}", mqe.ReasonCode, mqe.Message);
            Console.WriteLine(mqe.StackTrace);
        }
    } 
```

如前所述，这是来自示例代码，并且用于生产的真实程序可能具有更精细的异常处理。也就是说，API 调用要么成功，要么抛出`MQException`. 确切的行为取决于您的选择。例如，如果您在 a 上请求消息转换，`GET`则可能会出现转换错误，而作为二进制有效负载检索的完全相同的消息会成功。

* * *

以前的回应：

我不确定我是否理解这个问题，但我*认为*您要问的是如何使用 WebSphere MQ 设计请求/回复程序，这就是我将如何回应的方式。但是，如果您所说的“响应”实际上是指原因和返回代码`PUT`，请澄清问题，我会更新我的答案。

请求/响应的通常模式是请求程序首先打开回复队列。如果打开的队列的名称是模型队列，则队列管理器创建一个动态队列并返回一个句柄。否则，队列必须是预先存在的本地队列。

一旦应用程序处理了回复队列，它就会打开请求队列并创建一个新的请求消息。本地回复队列的名称用于初始化`replyToQueue`请求消息的字段。本地队列管理器名称会自动填充到消息的`replyToQMgr`字段中。然后，应用程序将消息放入回复队列中并等待回复。

如果有多个应用程序实例侦听同一个回复队列，它们通常会为他们想要的特定消息指定一个关联 ID。通常的设计是读取请求消息的服务器将其`MQMD.MsgID`放入`MQMD.CorrelID`回复消息的字段中，但有时它会将传入消息 ID 传输到出站消息 ID。

请务必`COMMIT`在`PUT`发布之前，`GET`否则您将*永远不会*得到答复。

[*在信息中心主题请求示例程序的设计中*](http://pic.dhe.ibm.com/infocenter/wmqv7/v7r5/topic/com.ibm.mq.doc/fg17540_.htm)有更多关于此的内容，您可以`C:\Program Files (x86)\IBM\WebSphere MQ\tools\dotnet`在默认的 Windows WMQ 客户端安装中找到示例程序。我鼓励您熟悉这些示例并重用其中的一些代码。如果您实际上没有下载并安装完整的客户端，请在[SupportPac MQC75](http://ibm.co/SupptPacMQC75)上免费获取一份副本。然后在安装的时候一定要选择安装SDK和示例代码的选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T16:37:08.797

> 我如何取回确认，以便将消息发送到队列

如果 Put 方法没有抛出异常，那么这就是您确认 MQ 已将消息放入队列。

# android - 单击 AlertDialog 按钮后显示 ProgressDialog

> ID：15074794
> 
> 赞同：0
> 
> 时间：2013-02-25T19:24:35.380
> 
> 标签：android, progressdialog

我有`AlertDialog`并且我想`ProgressDialog`在单击`AlertDialog`肯定按钮后显示（在 Internet 连接期间 - `AsyncTask`）。问题是进度对话框仅在完成任务后以及何时`AlertDialog`关闭时才显示。我试图隐藏（）或解雇（）`AlertDialog`，但它不起作用。

知道如何在 AlertDialog 前面显示 ProgressDialog 吗？这是我的代码。

```
LayoutInflater li = LayoutInflater.from(kontekst);
final View vNearest;
vNearest  = li.inflate(R.layout.nearest, null);

AlertDialog.Builder builder = new AlertDialog.Builder(kontekst);
builder.setView(vNearest);
builder.setCancelable(true);

builder.setPositiveButton(R.string.ok, new DialogInterface.OnClickListener() {

    @Override
    public void onClick(DialogInterface dialog, int witch) {

    String xml = "www.example.com";
    MarkerOptions nearestMO = new  DownloadXmlTask().execute(xml).get();
    String distance = nearestMO.getSnippet();

      }
    }); 
```

***下载XmlTask​​ AsyncTask：***

```
private class DownloadXmlTask extends AsyncTask<String, Integer, MarkerOptions> {

ProgressDialog waitDialog;

@Override
    protected void onPreExecute() {
    super.onPreExecute();
    waitDialog = ProgressDialog.show(Home.this, "Working", "Please Wait", true, true);
    waitDialog.setCanceledOnTouchOutside(false);
}

@Override
protected MarkerOptions doInBackground(String... urls) {

    try{             
        URL xmlURL= new URL(urls[0]);           
        SAXParserFactory spf = SAXParserFactory.newInstance();
        SAXParser sp = spf.newSAXParser();
        XMLReader xr = sp.getXMLReader();
        HandlingXMLStuff readingXML = new HandlingXMLStuff();
        xr.setContentHandler(readingXML);
        xr.parse(new InputSource(xmlURL.openStream()));

        return readingXML.getNearest();

    } catch (Exception e) {
        return null;
    }
}
  protected void onPostExecute(MarkerOptions result) {
    super.onPostExecute(result);
            waitDialog.dismiss();
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T21:45:48.510

从 asynctask 调用中删除 .get() 。在 OnPostExecute 中使用 getSnippet()。

# httpcontext - Ihttphandler接口如何暴露httpcontext对象

> ID：15074802
> 
> 赞同：1
> 
> 时间：2013-02-25T19:24:49.347
> 
> 标签：httpcontext, ihttphandler

您好，我在 msnd 上看到，从 Ihttphandler 接口继承的任何东西都可以访问 httpcontext 对象（在下面链接页面的备注部分下）

[msdn HTTP上下文](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.aspx)

我的问题是界面如何公开此对象...我在界面中看不到任何 httpcontext 类型的属性。我确实看到了接受 httpcontext 对象的“ProcessRequest”方法。但是我没有看到这是如何导致 httpcontext 对象直接从界面中暴露出来的，正如 msnd 页面所说。

如果我在这里遗漏了一个关键概念，请原谅我，这是相当新的。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T19:32:59.317

不，它只被传递到 ProcessContext 方法中。然后处理程序与该 HttpContext 实例交互，因为它是请求的上下文。您可以根据需要将上下文实例传递给各种其他方法。

如果您查看有关 IsReusable 属性的文档，为什么这样做会更清楚。当该属性为 时`true`，多个请求可以由同一个处理程序实例提供服务，因此必须为它们提供单独的 HttpContext 才能工作。

现在，如果将 IsReusable 指定为`false`，则可以将 ProcessRequest 中的 HttpContext 实例存储在实例的属性中。在某些情况下，不共享处理程序可能会导致性能问题，但您可能不需要担心这一点。

# python - 预取列序列 SQLAlchemy

> ID：15074804
> 
> 赞同：9
> 
> 时间：2013-02-25T19:24:48.993
> 
> 标签：python, mysql, sqlalchemy, postgresql-9.2

我的模型非常复杂，我试图从现有的存储过程中获取逻辑并将它们转换为 SQLAlchemy（出于可移植性原因）。

然而，我正在努力处理未提交的数据。

我有`user`表：1d，名称我有`status`表：id，名称我有`user_statuses`表：id、user_id、status_id、from_dt、to_dt

现在，我需要在单个事务中填充所有这些表，否则会失败。问题：

```
user = User(name = 'Test')
status = Status(name = 'Active')
db.session.add(user)
db.session.add(status)

# Oooopa! This is where it fails
user_session = UserStatuses(user_id=user.id, status_id=status.id, datetime.utcnow(), datetime(9999,01,01,00,00,00))
# both user.id and status.id = None as it's uncommited! 
```

本质上，我需要能够在没有显式 SQL 的情况下访问表序列。为什么？为了便携。目前我使用 PGSQL 并且可以这样做：

```
class User(Base):
    ....
    @staticmethod
    def prefetch_id():
        db.session.execute("SELECT NEXTVAL('user_id_seq');").scalar() 
```

将引擎更改为 MySQL & BANG！应用程序损坏。

关于如何做到这一点的任何想法？请记住，这可能是一个非常高的事务应用程序，一次被成千上万的用户访问

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-25T20:11:59.823

找到了答案 - 不知道为什么我以前没有看到这个！

Sequence 对象还可以像 SQL 表达式一样独立执行，具有调用其“下一个值”函数的效果：

```
seq = Sequence('some_sequence')
nextid = connection.execute(seq) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-12-15T14:02:53.447

如果在添加模型对象之后但在提交之前刷新会话：

```
db.session.add(user)
db.session.add(status)
db.session.flush() 
```

然后对象`add()`-ed 将更新它们的序列列 ( `id`) `user.id`，因此`status.id`不会再更新`None`了。

# html - 当文本长于宽度时，希望子菜单项换行

> ID：15074811
> 
> 赞同：1
> 
> 时间：2013-02-25T19:25:09.933
> 
> 标签：html, css, submenu, word-wrap

我的工作站点建立在下划线 WP 主题的基本结构之上。我有一个带有一长串文本的子菜单项。如果行超过 li 的宽度，我希望文本自动换行。（我想要的效果可以在youthconnectionwilmette.org的“programs”下看到）

这是我现在在 puckpros.edkatzman.com 上的“安排课程”下的内容。第一个子菜单项应该是“新客户：评估和课程 - 50% 折扣”，但它在“新客户：评估和”处被截断

我的 WP 生成的 html 是：

```
<nav class="site-navigation main-navigation" role="navigation">
  <h1 class="assistive-text">Menu</h1>
  <div class="assistive-text skip-link">
    <ul id="menu-puckpros" class="menu">
      <li id="menu-item-798" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-798">
        <li id="menu-item-866" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-866">
          <a href="https://server21.securedata-trans.com/ap/discoverymarketingt/index.php?page=10">Schedule Lessons</a>
          <ul class="sub-menu">
            <li id="menu-item-924" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-924">
              <a href="https://server21.securedata-trans.com/ap/discoverymarketingt/index.php?page=10">New Customer: Evaluation & Lesson – 50% OFF</a>
            </li>
          </ul>
        </li>
      </li>
    </ul>
  </div>
</nav> 
```

我正在使用的CSS是：

```
.main-navigation {
    list-style-type: none;
    margin: 0;
    padding: 0;
    height: 30px;
    background-color: #00497e;
    clear:both;
    width: 100%;
}

.main-navigation li {
    float: left;
    height: 30px;
    line-height: 30px;
    display: block;
    position:relative;
}

.main-navigation li a {
    display:block;
    color:#fde218;
    text-decoration:none;
    height: 30px;
    line-height: 30px;
    padding: 0 70px;
}

.main-navigation a:hover {
    color: #004973;
    background-color: #fde218;
}

.main-navigation ul ul li {
    float: left;
    width: 150px;
    background-color:maroon;
    top: 5px;
    position:relative;
    display:block;  
}

.main-navigation ul ul li a {
    background-color:#00497e;
    color: #ffffff;
    width: 200px;
    display:block;  
} 
```

我为 display: 尝试了不同的值，但除了 display: table-cell; 之外没有发现任何区别。它包装了第二个子菜单选项，但将顶部的选项拆分并将其一部分放在第三个菜单项下方。

我一定错过了一些简单的东西，但是经过几个小时的谷歌搜索并尝试了我发现的任何建议，没有任何效果。（我查看了在 Firebug 中工作的网站的 css，但我看不到换行的位置。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T19:43:07.243

制作基于列表的菜单的关键：

1 - 不要样式化列表（除了显示、位置和浮动以及清除边距和填充）

2 - 使用`display:block`并将所有样式放在 A 标记上（这包括您的悬停和活动状态）。

你把一切都放在一个高度。如果你想要两条线，你需要高度自动增长。

# java - 在休眠列表字段上进行 Lucene 搜索

> ID：15074812
> 
> 赞同：1
> 
> 时间：2013-02-25T19:25:10.557
> 
> 标签：java, hibernate, jpa, lucene

我有一个 Hibernate 带注释的类`TestClass`，其中包含一个`List<String>`我用 Lucene 索引的字段。考虑以下示例：

`"Foo Bar"`并且`"Bar Snafu"`是特定记录的列表中的两个条目。现在，如果用户在 TestClass 上搜索`"Foo Snafu"`然后会找到该记录，我猜是因为令牌 Foo 和令牌 Snafu 都是`List<String>`该记录中的令牌。

有什么办法可以防止这种情况发生吗？

现实世界的示例是具有原告和被告名单的法院案件。假设有两个人因案件被起诉，`Joe Lewis Bob`并且`Robert Clay Smith`。这些用户存储在被告名单中的法庭案件记录中。此被告名单使用 Lucene 编制索引。现在，如果用户搜索前面提到的两个被告中的任何一个，就会找到此案。`Lewis Smith`但是，如果用户搜索, 或 ，也会找到该案例`Joe Clay`。

**更新：** 在 Lucene IRC 频道中提到我可以使用多值字段。

**更新 2：**在 Solr IRC 频道中提到我可以使用`positionIncrementGap`设置`schema.xml`来通过 Solr 完成此操作。显然，如果我使用短语查询（带或不带 slop），那么“增量间隙确保同一字段中的不同值不会导致意外匹配”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T23:06:32.907

Lucene 将连续添加到同一文档中的同一字段，添加到它在该字段中已有的内容的末尾。

如果您想将 List 的每个成员视为一个完全独立的实体，您应该在不同的字段中对它们进行索引。您可以将索引附加到您已经使用的字段名称。虽然我没有关于您的需求的完整信息，但当然，做这样的事情可能是更好的解决方案。

如果您只想搜索精确的文本`"Foo Snafu"`，您可以使用[PhraseQuery](http://lucene.apache.org/core/old_versioned_docs/versions/3_5_0/api/all/org/apache/lucene/search/PhraseQuery.html)。如果您想确保您的短语查询不会从一个列表项交叉到下一个列表项（即，如果您在索引中有`"Bar Foo"`和`"Snafu Bar"`），您可以在写入索引时在每个成员之间插入某种形式的定界术语。

# backbone.js - 使用 .save() 命令时出现 Backbone.js 404（未找到）错误

> ID：15074817
> 
> 赞同：0
> 
> 时间：2013-02-25T19:25:31.707
> 
> 标签：backbone.js, connect.js

我正在使用带有以下代码的主干.js 获取数据。.get 和 .set 命令工作正常，但如果我设置 JSON 数据，然后使用 .save()，我会收到 404（未找到）错误。

```
var ExampleModel = Backbone.Model.extend({});
var example = new ExampleModel({});

example.url = "data/example.json";
example.fetch(); 
```

我正在使用带有 connect.js 模块的基本服务器：

```
var util = require('util'),
    connect = require('connect'),
    port = 8080;

connect.createServer(connect.static(__dirname)).listen(port);
util.puts('Listening on ' + port + '...'); 
```

和 example.json 看起来像这样：

```
{
"home": "new york",
"status": "married",
"kids": "one"
} 
```

是我服务器的问题吗？任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:33:48.213

这听起来可能很愚蠢，但这类似于我几个月前遇到的一个问题，我的一个主干应用程序使用 Rails 作为 Web 服务器运行。尝试定义模型“url”，在开头添加一个反冲，如下所示：

```
var ExampleModel = Backbone.Model.extend({
  url: '/data/example.json'
}); 
```

在我的示例中，我在模型中定义了 url 属性，因为我认为它更简洁，但如果你愿意，你可以做不同的事情。

# atlassian-fisheye - 如何在鱼眼中下载源代码压缩包？

> ID：15074818
> 
> 赞同：0
> 
> 时间：2013-02-25T19:25:31.673
> 
> 标签：atlassian-fisheye

在fisheye 中，我看到您在哪里配置存储库以允许将源代码下载为tarball，但我看不到您在fisheye 中的哪个位置实际下载tarball？它在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-01T18:31:31.190

这里有几个步骤可确保您为此正确配置了 FishEye。（我用的是FishEye 3.0.1，但是老版本的流程应该是一样的）

* * *

**第1步：**

检查：`Allow users to download repository trees as tarballs`_`/admin/admin.do#repositorydefaults-tarballs`

![在此处输入图像描述](../Images/cfebeb768c4916659d4ccba3347d7c4d.png)

这些只是默认设置，将允许在此之后创建的所有存储库作为 tarball 下载。

* * *

**第2步：**

确保您当前的存储库（您要下载的存储库）使用默认设置或在`/admin/admin.do#repositories-view-<your_repo>`, 部分启用了 tarball `Tarballs`：

![在此处输入图像描述](../Images/4f2189a5b6de4c35e92e309d02d6a808.png)

* * *

**第 3 步：**

去`/browse/<your_repo>`。现在应该有一个链接`Download archive`：

![在此处输入图像描述](../Images/8f3a3c5c13bea459f3e5aa6b88563da2.png)

希望这可以帮助。

# python - Python：通过名称和 kwargs 传递参数

> ID：15074821
> 
> 赞同：37
> 
> 时间：2013-02-25T19:25:53.477
> 
> 标签：python, function, arguments, keyword-argument, pass-by-name

在python中我们可以这样做：

```
def myFun1(one = '1', two = '2'):
    ... 
```

然后我们可以调用函数并通过参数名称传递参数：

```
myFun1(two = 'two', one = 'one') 
```

此外，我们可以这样做：

```
def myFun2(**kwargs):
    print kwargs.get('one', 'nothing here')

myFun2(one='one') 
```

所以我想知道是否可以将这两种方法结合起来，例如：

```
def myFun3(name, lname, **other_info):
    ...

myFun3(lname='Someone', name='myName', city='cityName', otherInfo='blah') 
```

一般来说，我们可以做哪些组合？

感谢并为我的愚蠢问题感到抱歉。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-02-25T19:27:35.700

总体思路是：

```
def func(arg1, arg2, ..., kwarg1=default, kwarg2=default, ..., *args, **kwargs):
    ... 
```

您可以根据需要使用任意数量的这些。`*`和将`**`“吸收”任何未以其他方式计算的剩余值。

位置参数（不提供默认值）不能由关键字给出，非默认参数不能跟随默认参数。

注意 Python 3 还添加了通过将关键字放在后面来指定仅关键字参数的能力`*`：

```
def func(arg1, arg2, *args, kwonlyarg=default):
    ... 
```

您也可以`*`单独使用 ( `def func(a1, a2, *, kw=d):`)，这意味着不捕获任何参数，但后面的任何内容都是关键字。

所以，如果你在 3.x 中，你可以产生你想要的行为：

```
def myFun3(*, name, lname, **other_info):
    ... 
```

`name`这将允许仅使用和`lname`作为关键字调用。

请注意，这是一个不寻常的界面，可能会让用户感到厌烦——我只会在非常特定的用例中使用它。

在 2.x 中，您需要通过解析`**kwargs`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-14T09:59:31.467

至少对于 Python 2.7 是可能的。关键字参数按名称分配给位置参数，因此您可以这样做

```
In [34]: def func(name, lname, **kwargs):
    print 'name='+name, 'lname='+lname
    print kwargs
   ....:     

In [35]: func(lname='lname_val', name='name_val', city='cityName', otherInfo='blah')
name=name_val lname=lname_val
{'city': 'cityName', 'otherInfo': 'blah'} 
```

官方文档是这样说的：“如果存在关键字参数，它们首先被转换为位置参数，如下所示。首先，为形式参数创建一个未填充的插槽列表。如果有 N 个位置参数，它们被放置在前N个槽。接下来，对于每个关键字参数，使用标识符来确定对应的槽（如果标识符与第一个形参名称相同，则使用第一个槽，依此类推）。如果槽是“ [https://docs.python.org/2/reference/expressions.html#calls](https://docs.python.org/2/reference/expressions.html#calls)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-02-25T16:40:26.367

您可以将命名参数与 kwargs 一起添加。如果调用函数中的键可用，它将被带到您的命名参数，否则它将被 kwargs 字典采用。

```
def add(a=1, b=2,**c):
    res = a+b
    for items in c:
        res = res + c[items]
    print(res) 
```

```
add(2,3) 
```

> 5

```
add(b=4, a =3) 
```

> 7

```
add(a =1,b=2,c=3,d=4) 
```

> 10

# actionscript-3 - 几个按钮用于不同的声音，但一个按钮用于播放

> ID：15074825
> 
> 赞同：0
> 
> 时间：2013-02-25T19:26:07.310
> 
> 标签：actionscript-3, flash

我需要有几个按钮，每个按钮只确定按下时要播放的声音，还有一个播放按钮来播放确定的声音。在 Flash AS3 中是否可能。有人有想法吗？

# c# - MVVM Light 和 SQL Server CE 在 vi ewmodel 中生成代码

> ID：15074827
> 
> 赞同：2
> 
> 时间：2013-02-25T19:26:13.043
> 
> 标签：c#, windows-phone-7, sql-server-ce, mvvm-light

我只是在玩 MVVM Light，我想我已经明白了，但我有一个问题。

我正在使用为我的数据库 (SQLCE) 生成类、映射等的 SQL Server CE 工具箱。其中一个表称为 Profile，我想将其用作我也可以绑定的属性。这是我的 ViewModel 代码

```
public class ProfileViewModel : ViewModelBase
{
    private Profile profile; // Profile is the class created by SQLCE Toolbox for table mapping

    public Profile UserProfile 
    {
        get { return profile; }
        set
        {
            profile = value;
            RaisePropertyChanged("UserProfile");
        }
    }

    public ProfileViewModel()
    {  
        if (IsInDesignMode)
        {
            // Code runs in Blend --> create design time data.
            UserProfile = new Profile()
            {
               Name = "NA",
               Age = 22
            }
        }
        else
        {
            // Code runs "for real"
            UserProfile = GetProfile(); 
        }
    }
} 
```

在 Expression blend 中，我可以看到 ViewModel 但看不到 Profile 属性，所以我猜测某处正在生成异常。

我确实尝试将混合作为一个过程附加，但没有出现错误。经过一点阅读，我发现混合无法连接到数据库，因此您必须在设计模式下弥补一些数据。我只是尝试做`UserProfile = new Profile()`，但我猜它仍在尝试使用数据库来创建它？

编辑：好的，我认为我遇到的问题与使用 SQLCE 有关。如果我尝试使用 WPF 和 MS SQL 进行类似的操作，那么一切正常。

编辑 2：这与数据库明确相关。如果我从上面的代码中删除公共属性 UserProfile，则可以从 Blend 中看到所有其他属性（我的代码中未显示）。如果我把它加回去，那么没有一个是可见的。那么我怎样才能使它可混合呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T21:29:50.213

您必须使用该`Locator`机制。默认情况下，您可以在 MVVM 应用程序中看到它。

在设计模式下，您将提供`Profile`对象的预构建版本，但在非设计模式下，`Profile`对象将通过您的数据库提供。因此，您不会`new Profile()`直接使用，而是使用类似`Locator.ProvideMeWithUserProfile()`.

例如，您可以查看[此视频](http://channel9.msdn.com/Events/MIX/MIX10/EX14)以了解实现它的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T20:11:31.423

我在这里注意到几件事。

您将设计时数据（和非设计时间）分配给支持字段，而不是属性，因此您的 RaisePropertyChanged() 不会被调用。如果属性更改，这将阻止视图更新，但您仍然应该“有权访问”该属性。可能不是问题，因为这发生在构造函数中。

此外，在您的文本中，您一直在谈论 Profile 属性，但该属性实际上称为 UserProfile。

# c# - 在 C# 中动态更改 CSS 类的属性

> ID：15074828
> 
> 赞同：-3
> 
> 时间：2013-02-25T19:26:18.280
> 
> 标签：c#, css, class

我希望能够“A”动态生成 CSS 文件 - 或“B”能够读取 css 文件并更改 C# 中 CSS 类的某些属性。

原因是，我的网站将被配置为用户的公司，利用他们的颜色、徽标、文本大小等......

第一个想法是动态创建一个 CSS 文件——但我在网上找不到任何人展示示例或诸如此类的地方。第二个想法是读取 css 文件并根据用户的登录更改 CSS 类。

有没有简单的方法呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T19:48:44.850

通常，这是通过几种不同的方式处理的。您可以根据请求的属性（例如当前站点）包含一个附加的或不同的 CSS 文件。您还可以根据请求属性输出包含不同类的 HTML。一种常见的技术是在满足某些条件时向根元素添加类，然后编写 CSS 来使用这些类。

例如，如果您为多个站点使用相同的代码库，则在站点 A 上您可以拥有`<html class="site-a">`，在站点 B 上您将拥有`<html class="site-b">`. 然后，您可以轻松地覆盖基于站点的样式。

```
/* Default to white background */
body {
    background: white;
}

/* Use a black background for Site A */
.site-a body {
    background: black;
}

/* Use a blue background for Site B */
.site-b body {
    background: blue;
} 
```

这当然是一个非常简单的例子。在整个站点的情况下，单独的 CSS 文件更具有架构意义，因为您将它们与其他站点特定文件一起存储。

我建议更多地研究应用程序通常如何组织其前端表示层和文件。例如，MVC 是一种分离应用程序部分的方法。在演示的上下文中，您可以使用模板和主题等概念来封装 UI 的各个部分并将其转换为可重用的部分。

编辑：在我的回答中迷失的是我没有谈论实际动态生成 CSS 文件。这是因为动态生成 CSS 文件并不常见，而且通常不是问题的正确解决方案。正如评论者所指出的，有一些 CSS 预处理器，如 LESS 和 SASS，它们通常旨在解决一些 CSS 内部问题（主要是冗余）。预处理器修复了 CSS 的问题并且非常有用，但并没有按照您所询问的方式使用。单独的 CSS 文件或不同类和 ID 的 CSS 文件是解决方案，而不是动态创建具有不同属性值的 CSS 文件或块。

# symfony - Symfony Doctrine 实体朋友 hasFriend 追随者

> ID：15074830
> 
> 赞同：2
> 
> 时间：2013-02-25T19:26:29.473
> 
> 标签：symfony, entity, entity-relationship, friend

我需要为我的项目设置关注者，遵循 (myFriends) hasFriend 逻辑。列“odobera”表示“关注”示例 nick(id user) odobera（关注该用户）。用户 (25) 正在关注用户 (37)。

请求表：

![在此处输入图像描述](../Images/022dbf7da8b0efe486b59d16fdfd5215.png)

```
 User entity:  

    /**
 * @ORM\OneToMany(targetEntity="TB\RequestsBundle\Entity\Requests", mappedBy="odobera")
 */
protected $followers;    

/**
 * @ORM\OneToMany(targetEntity="TB\RequestsBundle\Entity\Requests", mappedBy="nick")
 */
protected $myFriends; 

public function __construct()
{
    parent::__construct();
     $this->followers = new \Doctrine\Common\Collections\ArrayCollection();
     $this->myFriends = new \Doctrine\Common\Collections\ArrayCollection();
}
/**
 * Get myFriends
 *
 * @return \Doctrine\Common\Collections\Collection 
 */
public function getMyFriends()
{
    return $this->myFriends;
}

/**
 * 
 * @param \TB\UserBundle\Entity\User $user
 * @return bool
 */
public function hasFriend(User $user)
{
    return $this->myFriends->contains($user);
}  

 class Requests
 {

/**
 * @ORM\ManyToOne(targetEntity="TB\UserBundle\Entity\User", inversedBy="myFriends")
 * @ORM\JoinColumn(name="nick", referencedColumnName="id")
 */
protected $nick;    

/**
 * @ORM\ManyToOne(targetEntity="TB\UserBundle\Entity\User",inversedBy="followers")
 * @ORM\JoinColumn(name="odobera", referencedColumnName="id")
 */
protected $odobera; 
```

在控制器中：

```
 $myFollowers=$user->getMyFriends(); 
```

返回：

![在此处输入图像描述](../Images/7d5086617720d706a0bfbe24cd6b0cb5.png)

有什么好处：返回 1 条记录。我实际上只关注一个人，你可以在这里看到记录的 id 是 24395

数据库请求表：

![在此处输入图像描述](../Images/d7c19fa20ace1bd0fac81365a6f13b29.png)

我不知道 getMyFriends 函数以那种“格式”返回响应是否好。请仔细看。

然后我从查询和循环中选择关注者：

```
{% for follower in followers %}
    and i print data like this (works greate) {{ follower.nick }} 
            or if i want some fields from user entity {{ follower.nick.rank }} 
 {% endfor %} 
```

但问题就在这里：

```
 {% if (app.user.hasFriend(follower.nick)) %} 
```

那返回false，为什么？当我用转储检查控制器时，我跟随这个用户：P 几行结束。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T16:25:46.233

问题似乎是您正在比较两个不同的类型变量。

执行此操作时：`{% if (app.user.hasFriend(follower.nick)) %}`调用以下函数：

```
/**
 * 
 * @param \TB\UserBundle\Entity\User $user
 * @return bool
 */
public function hasFriend(User $user)
{
    return $this->myFriends->contains($user);
} 
```

这个函数被调用，接受一个`User`类型`$user`变量，然后你`contains()`在`$this->myFriends`.
`$this->myFriends`是一个（`ArrayCollection`与`Requests`不同的类型`User`）并且来自关于 的学说文档`contains()`：

> 两个元素的比较是严格的，这意味着不仅值必须匹配，类型也必须匹配。

[http://www.doctrine-project.org/api/common/2.1/class-Doctrine.Common.Collections.ArrayCollection.html](http://www.doctrine-project.org/api/common/2.1/class-Doctrine.Common.Collections.ArrayCollection.html)

# iphone - 陀螺仪 CMAtitude 设置自定义参考框架

> ID：15074832
> 
> 赞同：2
> 
> 时间：2013-02-25T19:26:31.300
> 
> 标签：iphone, reference, gyroscope, core-motion

我正在使用 CMAttitude 中的俯仰和滚动来控制 iPhone 游戏中某个点的位置。当我开始关卡时，我会注册参考姿态，并在游戏中使用

```
[attitude multiplyByInverseOfAttitude:attitudeRef] 
```

获取相对于参考的当前姿态，然后控制点的水平位置（具有俯仰属性）和垂直位置（具有滚动属性）。

问题是，我想添加一个功能，仅将参考姿态 aspectRef 的滚动组件重置为自定义值。CMAttitude 欧拉角是只读属性，我显然无法为自己创建一个具有自定义滚动和俯仰角的自定义 CMAttitude 对象。

我怎么能那样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:13:56.247

不幸的是，没有简单的方法可以实现这一目标。正如您所说，`CMAttitude`不提供任何功能来操作它或创建实例。也就是说，您必须自己进行乘法运算。此外，您将需要一个额外的四元数类，因为[CMQuaternion](http://developer.apple.com/library/ios/documentation/CoreMotion/Reference/CMAttitude_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40009943-CH1-SW1)只是一个结构。

好消息是，例如[cocoamath](http://code.google.com/p/cocoamath/)项目中已经提供了您需要的所有代码。看看[multiplyByInverseOfAttitude (CMattitude Class ) 是如何实现的？](https://stackoverflow.com/questions/14482518/how-multiplybyinverseofattitude-cmattitude-class-is-implemented/14500635#14500635)有关四元数数学基础知识的一些指导和更多链接。

# java - 以降序对整数数组进行排序并将其与其对应的字符串数组相关联

> ID：15074837
> 
> 赞同：1
> 
> 时间：2013-02-25T19:26:43.140
> 
> 标签：java, android, arrays, sorting, indexing

我正在尝试按降序输出名称和相应的分数。有一个字符串数组和另一个整数数组，我试图将这两个数组联系起来。我使用了*Arrays.sort*并尝试获取索引。然后将使用索引将名称排列在与相应分数相似的位置。我有这段代码，但我得到运行时错误，*不幸的是，您的应用程序已停止*。任何人都可以帮我做些什么来实现我的目标吗？非常感谢！

```
 int score[]= new int[4];
            score[0]= 10;
            score[1]= 50;               
            score[2]= 20;
            score[3]= 60;
           String names[] = new String[4];
            names[0]= "player1";
            names[1]= "player2";
            names[2]= "player3";
            names[3]= "player4";

            Arrays.sort(score);
            int index_array[] = new int[4];
            int m = 0;
            for(m = 0; m <4; m++){
                index_array[m]=Arrays.binarySearch(score ,score[m]);
                l = index_array[0];

            }
            for(int i = 0; i<4; i++){
                if(l == score[i]){
                    j = i;
                }
            }
            String name = names[m];
            show.setText(name + " " + Integer.toString(l)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T19:36:59.517

您需要关联分数和用户名。目前，您通过数组索引关联它们。当您对分数进行排序时，分数的索引会发生变化。

尝试这样的事情：

```
class Score implements Comparable<Score>
{
  int score;
  String player;

  public Score(int theScore, String thePlayer)
  {
    score = theScore;
    player = thePlayer;
  }

  public int compareTo(Score)
  {
    ... compare based on the int score value ...
  }

  ... getters.  setters optional ...
}

List<Score> scoreList = new ArrayList<Score>();

... fill scoreList with Score objects. ...

Collections.sort(scoreList); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T20:13:40.337

创建保存玩家姓名和分数的 Player 模型，然后使用 Comparator 按分数对玩家进行排序。

播放器型号：

```
class Player {

private String name;

private int score;

public Player(String name, int score) {
    this.name = name;
    this.score = score;
}

public String getName() {
    return name;
}

public int getScore() {
    return score;
}

public String toString() {
    return "name=" + name + "; score=" + score;
} 
```

}

比较器：

```
class PlayerComparator implements Comparator<Player> {
public int compare(Player p1, Player p2) {
    return p1.getScore() < p2.getScore() ? -1
            : p1.getScore() > p2.getScore() ? 1 : 0;
} 
```

}

以及一个使用示例：

```
public class PlayerTest {

public static void main(String[] args) {
    int score[]= new int[4];
    score[0]= 10;
    score[1]= 50;
    score[2]= 20;
    score[3]= 60;

    String names[] = new String[4];
    names[0]= "player1";
    names[1]= "player2";
    names[2]= "player3";
    names[3]= "player4";

    Player[] players = new Player[names.length];
    for(int i = 0; i < names.length; i++) {
        players[i] = new Player(names[i], score[i]);
    }

    Arrays.sort(players, new PlayerComparator());

} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T19:33:23.070

这是一种设计气味。你不应该有两个并行数组。相反，您应该有一个 Player 对象数组，其中每个 Player 都有一个名称和一个分数。

按名称或分数存储球员的阵容将非常简单。

Java 是一种面向对象的语言。使用对象。

```
public class Player
    private final String name;
    private int score;

    public Player(String name, int score) {
        this.name = name;
        this.score = score;
    }

    public String getName() {
        return name;
    }

    public int getScore() {
        return score;
    }

    public void setScore(int score) {
        this.score = score;
    }
}

...
Player[] players = new Player[4];
players[0] = new Player("player1", 10);
... 
```

# ruby - Ruby 异常实例将它们的消息保存在哪里？

> ID：15074842
> 
> 赞同：3
> 
> 时间：2013-02-25T19:27:13.817
> 
> 标签：ruby

如果我有一个 StandardError 实例，消息存储在哪里？

```
s = StandardError.new("hi")
s.message                          # => "hi"
s.instance_variables               # => []
s.instance_variable_get(:@message) # => nil
s.inspect                          # => "#<StandardError: hi>" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T19:38:57.223

此外，请注意并非 Ruby 的所有部分都是用 Ruby 编写的，尤其是对于 Exception 或 StandardError 等非常基础的类。

[您可以通过查看Exception](http://www.ruby-doc.org/core-1.9.3/Exception.html)类的 message 方法的来源找到答案（单击然后转到 message 方法并使用小放大镜显示来源）。这段代码是 C，而不是 Ruby。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T19:05:56.077

在对 Ruby 和 C 进行一些调查后，我发现异常类设置了一个名为`mesg`. 这不能在标准 Ruby 运行时中访问，因为它不是以`@`.

可以添加一个 Ruby 扩展，它可以让您获取和设置不带前缀的实例变量`@`。我不知道这可能有多危险。

*C 模块：*

```
#include "ruby.h"

static VALUE rb_mIvar;

static VALUE rb_ivar_iv_get(VALUE self, VALUE key) {
  return rb_ivar_get(self, rb_to_id(key));
}

static VALUE rb_ivar_iv_set(VALUE self, VALUE key, VALUE value) {
  return rb_ivar_set(self, rb_to_id(key), value);
}

void Init_ivar() {
  rb_mIvar = rb_define_module("Ivar");
  rb_define_method(rb_mIvar, "ivar_get", rb_ivar_iv_get, 1);
  rb_define_method(rb_mIvar, "ivar_set", rb_ivar_iv_set, 2);
} 
```

*红宝石用法：*

```
$:.unshift('.')
require 'ivar'

Object.send(:include, Ivar)

e = StandardError.new("foo")

puts "Error message is: #{e.message}" # => e.message is "foo"

e.ivar_set(:mesg, "bar")

puts "Error message is: #{e.message}" # => e.message is now "bar" 
```

请参阅我用于研究和实验的完整代码的要点：[https ://gist.github.com/adamhunter/5041075](https://gist.github.com/adamhunter/5041075)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T19:34:44.417

调用返回的消息，该`s.message # => "hi"`调用又调用该`to_s`方法。更多信息：[Ruby 异常](http://www.ruby-doc.org/core-1.9.3/Exception.html#method-i-message)

# php - 如何在 Content-Disposition 标头中使用带有特殊字符的文件名？

> ID：15074843
> 
> 赞同：0
> 
> 时间：2013-02-25T19:27:13.763
> 
> 标签：php, http-headers

我对一些 php 代码有疑问：

```
$link = $_GET['url'];
$name = $_GET['name'];
$str = '[wanted-web.ro]';

header("Content-Disposition: attachment; filename=$str $name");
header("Content-type: audio/mpeg;\r\n");
readfile(str_replace(' ', '_', $link)); 
```

那是我用来保存文件的代码。当我想将一些直接文件下载到我的计算机时，我在**Wanted-web.ro中使用的那个点停止在点“** **.** ”之后写入其余信息，例如：

**[通缉网**

问题解决了！

非常感谢大家。你太棒了。我结合了您的评论，结果是：

```
header("Content-Disposition: attachment; filename=\"[wanted-web.ro] $name.mp3\""); 
```

那工作完美！非常感谢大家。尊重！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T19:28:52.750

在标题中引用文件名：

```
header("Content-Disposition: attachment; filename=\"$str $name\""); 
```

[http://www.ietf.org/rfc/rfc6266.txt](http://www.ietf.org/rfc/rfc6266.txt)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T19:31:30.207

尝试这个：

```
<?php
$link = $_GET['url'];
$name = $_GET['name'];
$str = "[wanted-web.ro]";

header("Content-Disposition: attachment; filename=".$str." ".$name);
header("Content-type: audio/mpeg;\r\n");
readfile(str_replace(' ', '_', $link)); 
```

# c# - 如何使用属性在 c# 中使用值类型？

> ID：15074844
> 
> 赞同：7
> 
> 时间：2013-02-25T19:27:14.833
> 
> 标签：c#, properties, value-type

我有一个名为的小类，它有一个名为（a *struct*`Tank` ）的公共成员。当我写：`Location``Rectangle`

 *```
Tank t = new Tank();
t.Location.X+=10; 
```

一切正常，坦克移动。

但是在我将成员更改为*属性*后，**我就不能再使用这种语法了**。它不能编译，因为`t.Location`它现在是一个属性（它是函数）并返回位置的临时副本（因为它是一个值类型）。

我现在可以使用的唯一方法`Location`是执行以下操作：

```
k = t.Location 
k.X +=10;
t.Location = k; 
```

是否有任何解决方法可以帮助我不编写这种丑陋的代码并使用直观的`a+=10;`语法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T19:49:22.440

来自@Servy
“结构是不可变的”，不，它们不是。在大多数情况下，它们应该是，但它们本质上不是不可变的。这里的固有问题是该属性返回结构的副本，而不是对结构的引用。如果 C# 中有用于 ref 返回的语法，那么这是可能的。

~~从根本上说为什么这不起作用是结构是不可变的。一旦制作完成，就是这样。因此，不可能部分地重新分配结构。这就像试图换掉你的腿。你不能。它是你的一部分，你也随之而来！~~

我认为你唯一能做的就是实现你自己的 X 和 Y 属性，例如：

```
public double LocationX
{
   get
   {
       return Location.X;
   }
   set
   {
       Location = new Rectangle(value,Location.Y);
   }
} 
```

您显然也需要将此镜像到 Y，但这应该允许您想要什么（但不要指望它快速或高效！）

虽然这回答了您的直接问题，但我会就您的模型提出几点意见。我会考虑不要尝试像这样更新运动。从 OO 的角度来看，你的坦克是它自己的对象，应该管理它自己的位置。给它一个移动指令，然后让它更新它自己的位置。

例如：

```
Tank.MoveRelative(10,0);   
Tank.MoveAbsolute(100,100); 
```

这让你有更多的自由，并允许坦克根据你给它的逻辑来验证对其提出的任何请求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T19:54:06.543

当您开始使用属性在 2D 和 3D 空间中编程时，经常会出现此问题。通常，最好的解决方法是在两个向量结构或两个不同的结构之间实现加法，它们将以逻辑方式加在一起（在您的情况下，您将在 2D 向量和矩形之间实现加法以偏移其位置 - 您不会将两个矩形相加）。

这样做，您可以编写：

```
myTank.Location += new Vector2(10, 0); 
```

虽然仍然有些笨拙，但允许您在一次操作中对两个组件进行更改。理想情况下，添加的矢量将是一个速度矢量，您将使用它来更新您的坦克的位置。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-25T20:00:24.947

我建议制定一种移动坦克的方法。

```
public class Tank
{
    private Rectangle _location;

    public int X { get { return _location.X; } }
    public int Y { get { return _location.Y; } }

    public Tank(int width, int height /* other params */)
    {
        _location = new Rectangle(0, 0, width, height);
    }

    public Tank Move(Point offset)
    {
        _location.X += offset.X;
        _location.Y += offset.Y;

        return this;
    }
} 
```

用法是

```
var tank = new Tank(1, 1);
tank.Move(new Point(1, 1)).Move(new Point(1, 1)); //Tank would have X: 2, Y: 2 
```

这可以更改为使用`Vector2`或其他。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T20:27:54.170

核心区别在于，属性被归类为函数，而字段被归类为变量。函数成员调用开始。

一种解决方法是使用字段或后备存储，而不是像您所做的那样使用属性。应该避免创建可变值类型，因为这种行为通常[令人惊讶](http://blogs.msdn.com/b/ericlippert/archive/2008/05/14/mutating-readonly-structs.aspx)、难以预测和/或有时完全不一致。

这里有一些细节，规范中的相关部分有助于描述您正在经历的行为。

C# 4.0 第 1.6.7.2 节

> 集合访问器对应于具有单个参数名为 value 且没有返回类型的方法。
> 
> get 访问器对应于具有属性类型返回值的无参数方法。

现在切换到 7.5.5**函数成员调用**，相关部分：

> 如果 [函数成员] 是在值类型中声明的实例函数成员：
> 
> 如果 [实例表达式] 未被分类为变量，则创建 [实例表达式] 类型的临时局部变量，并将 [实例表达式] 的值分配给该变量。[实例表达式] 然后被重新分类为对该临时变量的引用。临时变量可以在 [函数成员] 中作为 this 访问，但不能以任何其他方式访问。 **因此，只有当 [实例表达式] 是一个真正的变量时，调用者才有可能观察到 [函数成员] 对 this 所做的更改。**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T17:56:38.840

如果类或结构类型变量公开了值类型字段，并且该值类型将其内容公开为字段，则对这些字段的操作可以像对周围变量类型的操作数一样有效地执行。如果值类型作为属性公开，那么最好的方法通常是：

```
var temp = t.Location;
temp.X += 4;
t.Location = temp; 
```

不是非常优雅，但相对清晰，也不是太低效。另一种方法是让 tank 公开一个方法`AdjustLocation`，例如：

```
delegate void ActByRef<T1>(ref T1 p1);
void ActOnLocation(ActByRef<Point> proc)
  { proc(ref _Location); } 
```

可能还有

```
delegate void ActByRef<T1,T2>(ref T1 p1, ref T2 p2);
void ActOnLocation<PT1>(ActByRef<Point, PT1>, ref PT1 param1)
  { proc(ref _Location, ref param1); } 
```

这些方法假定`Location`属性使用名为 的支持字段`_Location`。然后代码可以执行以下操作：

```
// Add 5 to X
myTank.ActOnLocation( (ref Point loc) => loc.X += 5 ); 
```

或者

```
// Add YSpeed to Y
myTank.ActOnLocation( (ref Point loc, ref int param) => loc.Y += param, ref YSpeed); 
```

请注意，在后一种情况下， lambda 中`YSpeed`既不`this`使用 也不使用任何其他局部变量；相反，`YSpeed`作为`ref`参数传递。因此，即使上面的代码运行一百万次，系统也只需要生成一个委托，然后每次都可以重复使用。

如果结构很大，则上述方法可能比使用临时变量的方法更快。虽然开销可能大于复制小型结构的成本，但开销与结构大小无关。如果一个人使用像上面这样的结构，那么一个人可以有效地使用大小为几千字节的结构，以避免必须制作临时副本。*

# mysql - 导入 MySQL 数据库

> ID：15074845
> 
> 赞同：0
> 
> 时间：2013-02-25T19:27:30.743
> 
> 标签：mysql, phpmyadmin, mediatemple

我正在尝试将 mysql 数据库导入到我在 media Temple 的网格服务帐户中。

我制作了一个空白数据库，但那里已经有很多表，例如：

```
CHARACTER_SETS
CLIENT_STATISTICS
COLLATIONS
COLLATION_CHARACTER_SET_APPLICABILITY
COLUMNS
COLUMN_PRIVILEGES
ENGINES
EVENTS
FILES
GLOBAL_STATUS
GLOBAL_TEMPORARY_TABLES
GLOBAL_VARIABLES 
```

这些预先存在的表是什么？我如何摆脱它们，以便我可以导入我的数据库

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T20:06:31.457

看起来您正在查看 MySQL 创建的供自己使用的数据库，称为`INFORMATION_SCHEMA`.

您必须创建一个数据库，`CREATE DATABASE YOURNAMEHERE;`然后将您的数据库表放入该数据库中。

查看一个很好的 MySQL 入门教程，例如[http://dev.mysql.com/doc/refman/5.1/en/tutorial.html](http://dev.mysql.com/doc/refman/5.1/en/tutorial.html)

# wordpress - 主题中的wordpress写作面板

> ID：15074846
> 
> 赞同：0
> 
> 时间：2013-02-25T19:27:32.130
> 
> 标签：wordpress, wordpress-theming

我想做一个公共博客，用户可以在登录后从前端写。

基本上在wordpress中，登录后，用户被重定向到仪表板wp-admin。他们在那里有“新帖子”功能。但我想让它远离我的博客。他们将从侧边栏中的自定义登录面板登录，他们将在那里有一个新的帖子链接，该链接会将他们带到 www.domainname.com/new-post 或类似的东西。在那里，他们将拥有 wordpress 内容编辑器的全部功能。上传，带有编辑器、标签和类别的主文本区域。所有这些都在前端，所以我不必向他们展示 wp-admin 部分。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T15:12:47.900

看起来您描述的内容可以使用此插件轻松完成： [http ://wordpress.org/extend/plugins/wp-user-frontend/](http://wordpress.org/extend/plugins/wp-user-frontend/)

# android - Android：按下后退按钮时 ActionView 折叠

> ID：15074847
> 
> 赞同：0
> 
> 时间：2013-02-25T19:27:32.407
> 
> 标签：android, actionbarsherlock, back-button

我正在使用[ActionBarSherlock](http://actionbarsherlock.com/)库来获取预蜂窝版本的操作栏。我有一个活动，其操作栏菜单从 xml 下方膨胀

> **菜单.xml**

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">        
    <item android:id="@+id/action_bar_search" 
        android:icon="@drawable/ic_search"
        android:showAsAction="always|collapseActionView" android:title="Search"
        android:actionLayout="@layout/layout_search">        
    </item> 
</menu> 
```

下面是actionLayout

**> 布局搜索.xml**

```
<?xml version="1.0" encoding="utf-8"?>
   <AutoCompleteTextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/autoCompText_action_bar_search"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"    
    android:cursorVisible="true"    
    android:imeOptions="flagNoExtractUi"
    android:inputType="text"
    android:textColor="@color/color_action_bar_text"
    android:textCursorDrawable="@android:color/black" 
    android:background="@drawable/textfield_bg_activated_holo_dark"            
    /> 
```

我还实现了 OnActionExpandListener 来监听菜单项的展开和折叠事件。下面是我对 OnActionExpandListener 的实现

```
 private OnActionExpandListener searchActionExpandListener = new OnActionExpandListener() {        
            @Override
            public boolean onMenuItemActionExpand(MenuItem item) {              

                /* This is done so that requestFocus() can popup the softkeyboard. 
                 * Else, no softkeyboard is popped up
                 */
                edtTextSearch.post(new Runnable() {
                    @Override
                    public void run() {
                        edtTextSearch.requestFocus();
                        mImm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
                        mImm.showSoftInput(edtTextSearch, InputMethodManager.SHOW_IMPLICIT);
                    }
                });
                return true;
            }
        @Override
        public boolean onMenuItemActionCollapse(MenuItem item) {                
            mImm.hideSoftInputFromWindow(edtTextSearch.getWindowToken(), 0);
            return true;
        }
    }; 
```

所以现在，在按下操作栏上的搜索按钮时，会显示 actionLayout，并且会弹出软键盘并关注它。到目前为止一切正常。但是当我按下返回键（手机上的硬键）时，动作视图就会崩溃。我要做的就是在按下后退键时隐藏软键盘（如果它正在显示）而不折叠动作视图。谁能帮帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-11T12:28:13.507

`ActionBarSherlock`我对and a也有类似的问题`CollapseActionView`。您的代码对我帮助很大，但我无法在早期版本（如 2.+）上使用`Runnable()`（不知道为什么）弹出软键盘。只是一个小技巧可能会避免您使用这种方式，请参阅下面的代码：

```
@Override
public boolean onMenuItemActionExpand(MenuItem item) {              
    // Set the focus
    edtTextSearch.requestFocus();  
    // This force the Soft Keyboard to appear whatever the version used
    mImm.toggleSoftInput(InputMethodManager.SHOW_FORCED,  
                                   InputMethodManager.HIDE_IMPLICIT_ONLY);
    return true;
} 
```

这在 2.+ 及更高版本中完美运行。现在，根据您的要求，我没有在所有经过测试的设备上看到这些东西。当`View`展开时，出现软键盘。然后当我按下后退按钮时，软键盘消失并且`View`不会折叠（即使在横向模式下）。如果我再次按下它，这里就`View`崩溃了。
你能解释更多你想要什么，因为我看不到你在后退按钮上折叠的动作`View`吗？

经过一些研究，我在想你想`DownDropList`用 CollapseActionView 保持你的可见性，所以看看这个可能会很有用：[AutoCompleteTextView 的 DropDownList 在按下后退键后打开？](https://stackoverflow.com/questions/9722278/how-to-keep-dropdownlist-of-autocompletetextview-opened-after-pressing-the-back). 以防万一，我发现了这个：[EditText with soft keyboard and “Back” button](https://stackoverflow.com/questions/6570974/edittext-with-soft-keyboard-and-back-button)

# android - 与空指针异常挂钩

> ID：15074852
> 
> 赞同：0
> 
> 时间：2013-02-25T19:27:45.157
> 
> 标签：android, nullpointerexception

我得到一个空指针异常。唯一的问题是，它似乎在所有设备上都不存在，所以对我来说很奇怪..

一个想法可能是**Bitmap src 可以为空？**但是由于我在前面初始化它，这是不可能的吗？我猜？由于它没有发生在我自己的设备上，我只需要确定......

```
Bitmap bm = BitmapFactory.decodeResource(C.getResources(), resId);
Bitmap result = mark(bm);

public static Bitmap mark(Bitmap src) {
        int w = src.getWidth();
        // int w = 150;
        int h = src.getHeight();
        // int h = 150;
        Bitmap result = Bitmap.createBitmap(w, h, src.getConfig());

        Canvas canvas = new Canvas(result);
        canvas.drawBitmap(src, 0, 0, null);

        Paint paint = new Paint();
        paint.setColor(Color.GRAY);
        paint.setTypeface(font);
        paint.setTextSize(15);
        paint.setAntiAlias(true);
        canvas.drawText("Hi", 10, 15, paint);

        return result;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T19:35:17.100

由于我们没有堆栈跟踪，我假设你在 mark(): 的第一行得到你的异常`int w = src.getWidth();`。

这意味着确实 src 为空。`public static Bitmap decodeResource (Resources res, int id)`如果图像无法解码，则可能返回 null。

因此，您应该深入挖掘可用的资源。也许在故障设备上缺少 png？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T19:30:44.620

如果解码有任何问题，DecodeResources 可以返回 null。这可能就是这里发生的事情。

# java - 为 SOAP 设置 XML 响应

> ID：15074853
> 
> 赞同：1
> 
> 时间：2013-02-25T19:27:48.867
> 
> 标签：java, xml, web-services, soap

我真的很难解决这个问题。

基本上我已经使用 Java/JAX-WS 构建了一个 WebService，这是我的接口

```
import javax.jws.WebParam;
import javax.jws.WebResult;
import javax.jws.WebService;

@WebService
public interface OperationsInterface {

@WebResult(name = "result")
LoginResponse Login(@WebParam(name = "login") Login login);

@WebResult(name = "result")
String Purchase(@WebParam(name = "purchase") Purchase purchase);

} 
```

登录只是一个包含 2 个字符串（用户名和密码）的 POJO

LoginResponse 是另一个 POJO，它有这个

```
String status;
int code;
String message;
SubscriptionTier subscriptionTier;
String accountNumber;
String firstName;
String lastName; 
```

没什么花哨的，其实很简单。请求是这样的

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ott="http://ott.amentum.net/">
   <soapenv:Header/>
   <soapenv:Body>
      <ott:Login>
         <login>
            <username>USERNAME</username>
            <password>1234</password>
         </login>
      </ott:Login>
   </soapenv:Body>
</soapenv:Envelope> 
```

回应是这样的

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
   <soap:Body>
      <ns2:LoginResponse xmlns:ns2="http://ott.amentum.net/">
         <result>
            <accountNumber>0110000076</accountNumber>
            <code>1</code>
            <firstName>JOHN</firstName>
            <lastName>DOE</lastName>
            <message>Login has been successful.</message>
            <status>success</status>
            <subscriptionTier>
               <tier>TVOD</tier>
               <tier>CANAL</tier>
               <tier>CATCHUP</tier>
            </subscriptionTier>
         </result>
      </ns2:LoginResponse>
   </soap:Body>
</soap:Envelope> 
```

据我所知，这是正确的，但是，我的客户期待这样的事情

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
   <soap:Body>
      <ns2:LoginResponse xmlns:ns2="http://ott.amentum.net/">
         <accountNumber>0410089676</accountNumber>
         <code>1</code>
         <firstName>MARIA DEL CARMEN</firstName>
         <lastName>PADILLA MARTIN</lastName>
         <message>Login has been successful.</message>
         <status>success</status>
         <subscriptionTier>
            <tier>TVOD</tier>
            <tier>CANAL</tier>
            <tier>CATCHUP</tier>
         </subscriptionTier>
      </ns2:LoginResponse>
   </soap:Body>
</soap:Envelope> 
```

他们希望我删除结果标记，它是我为返回信息而创建的 LoginResponse 对象的名称。

有没有办法做到这一点？

提前致谢

# python - (python) 使用十六进制文字尝试转换为字符串、整数或任何内容

> ID：15074854
> 
> 赞同：1
> 
> 时间：2013-02-25T19:27:50.770
> 
> 标签：python, string, hex, literals

我正在做一项任务，我们必须在我们创建的 dns 服务器上模拟 kaminski 攻击。我目前正在尝试生成伪造的 dns 响应数据包有效负载。使用 dnslib 我正在生成一个数据包，然后 pack() 结果。这给了我一个十六进制文字：

'\xcf\x90\x85\x80\x00\x01\x00\x01\x00\x00\x00\x00\x03abc\x03com\x00\x00\x01\x00\x01\xc0\x0c\x00\x01\x00\ x01\x00\x00\x00\x00\x00\x04\x01\x02\x03\x04'

我不相信这是有效载荷数据的正确格式。具体来说，我认为我需要放弃所有“\ x”，所以我的流将是 cf 90 85 80 ...

不幸的是，我似乎无法做到这一点。字符串操作工具似乎不适用于文字，并且通常的文字-> 字符串转换 (literal_eval) 失败并出现错误：

```
TypeError: compile() expected string without null bytes 
```

我尝试过的其他转换 (int(packet,0)) 失败，因为部分文字是文本（导致奇数长度）。

可能有一个非常简单的解决方案，有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T20:13:13.070

在这种情况下，您似乎错过了 '\x' 的含义。'\x' 是[Python 字符串文字](http://docs.python.org/2/reference/lexical_analysis.html#string-literals)中可用的转义序列，因此 \xhh 表示十六进制值为*hh*的字符。

尝试将该字符串转储到文件并将其内容输出为十六进制：

```
yoni@gaga:~ python -c "file('payload','wb').write('\xcf\x90\x85\x80\x00\x01')"
yoni@gaga:~ hexdump payload 
0000000 cf 90 85 80 00 01                              
0000006 
```

我相信这正是您正在寻找的行为，请继续使用该字符串。但是，如果出于某种原因您确实想将其转换为“人类可读”的十六进制字符串，您可以使用：

```
''.join(['%x' % ord(x) for x in packet]) 
```

# c# - Dynamics 2011：设置活动记录的所有者

> ID：15074855
> 
> 赞同：2
> 
> 时间：2013-02-25T19:28:00.373
> 
> 标签：c#, dynamics-crm, dynamics-crm-2011

我正在尝试在 Dynamics 2011 中创建活动记录，所有者名称设置为“test_user”。相反，下面的代码正在获取用于访问 Dynamics API 的凭据。有没有办法在不传递密码的情况下模拟“test_user”用户？谢谢你。

```
string TargetCrmService = ConfigurationManager.AppSettings["TargetCrmService"];
string UserName = ConfigurationManager.AppSettings["UserName"];
string Domain = ConfigurationManager.AppSettings["Domain"];
string Password = ConfigurationManager.AppSettings["Password"];

Uri organizationUri = new Uri("http://CRMDEV/XRMServices/2011/Organization.svc");
Uri homeRealmUri = null;
ClientCredentials credentials = new ClientCredentials();

credentials.UserName.UserName = Domain + "\\" + UserName;
credentials.UserName.Password = Password;

OrganizationServiceProxy orgProxy = new OrganizationServiceProxy(organizationUri, homeRealmUri, credentials, null);

var _userId = (from u in orgProxy.CreateQuery<SystemUser>()
           where u.FullName == "Kevin Cook"
           select u.SystemUserId.Value).FirstOrDefault();

IOrganizationService _service = (IOrganizationService)orgProxy;
_service.CallerId = _userId;

try
{
    //Entity activity = new Entity("activitypointer");

    Entity activity = new Entity("appointment");
    activity["subject"] = "Test Meeting 1";
    activity["description"] = "Test Description";
    activity["scheduledstart"] = DateTime.Now;
    activity["scheduledend"] = DateTime.Now.AddMinutes(30);
    activity["createdbyname"] = "test_user";
    activity["modifiedbyname"] = "test_user";
    activity["createdbyname"] = "test_user";
    activity["owneridname"] = "test_user";

    Guid id = _service.Create(activity);
    Console.WriteLine("id: " + id);
}
catch (Exception ex)
{
    //MessageBox.Show(ex.Message);
} 
```

**修改后的代码**

基于[http://msdn.microsoft.com/en-us/library/gg309629.aspx上的示例](http://msdn.microsoft.com/en-us/library/gg309629.aspx)

```
var _userId = (from u in orgProxy.CreateQuery<SystemUser>()
           where u.FullName == "Kevin Cook"
           select u.SystemUserId.Value).FirstOrDefault(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T19:58:02.927

您有两种方法可以在 CRM 中设置实体的 owenr id。

1.  在创建记录后 使用[AssignRequest更新记录。](https://stackoverflow.com/questions/7746046/can-i-update-the-owner-id-of-a-contact-using-linq)
2.  使用[OrganizationServiceProxy 和 CallerId 模拟](http://msdn.microsoft.com/en-us/library/gg309629.aspx)来使用您希望在创建时成为所有者的特定用户。您不需要他们的密码来模拟，只需要他们的 CRM SystemUserId

# ssl - 如何在 CloudFormation 模板中将预上传的 SSL 证书附加到 ELB？

> ID：15074856
> 
> 赞同：23
> 
> 时间：2013-02-25T19:28:00.917
> 
> 标签：ssl, amazon-web-services, portforwarding, amazon-cloudformation

我一直在尝试在新的 Cloud Formation 模板上附加我目前用于我的 Elastic Load Balancing 实例之一的 SSL 证书，但每次我得到：
*找不到密钥的服务器证书*
然后 Cloudformation 模板开始在那个时候回滚。

```
 "Listeners" : [ 
         {
          "LoadBalancerPort" : "443",
          "InstancePort" : "80",
          "SSLCertificateId" : "start_certname_com",
          "Protocol" : "HTTPS"
         },... 
```

Amazon 要求*使用 SSL 证书的 ARN。*我相信这是正确的，因为这是出现在当前设置 ELB 的下拉列表中的确切字符串，它需要 443 到实例上的端口 80。

我的听众错过了什么吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-11-16T00:12:14.433

您可以仅使用证书名称为 CloudFormation 中的证书派生[ARN 。](http://docs.aws.amazon.com/general/latest/gr/aws-arns-and-namespaces.html)无需运行命令行工具并将值硬编码到 CloudFormation 模板中。

```
 "Parameters":{
      "Path":{
         "Description":"AWS Path",
         "Default":"/",
         "Type":"String"
      }
    }
     ...
        "Listeners" : [ 
     {
      "LoadBalancerPort" : "443",
      "InstancePort" : "80",
      "SSLCertificateId" : {
        "Fn::Join":[
           "",
           [
              "arn:aws:iam::",
              {
                 "Ref":"AWS::AccountId"
              },
              ":server-certificate",
              {
                 "Ref":"Path"
              },
              "start_certname_com"
           ]
        ]
      },
      "Protocol" : "HTTPS"
     },... 
```

`{"Ref":"AWS::AccountId"}` [这将使用伪参数](http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/pseudo-parameter-reference.html)确定您的帐户 ID，并将其与形成[ARN所需的其他元素](http://docs.aws.amazon.com/general/latest/gr/aws-arns-and-namespaces.html)[结合起来](http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-join.html)。请注意，如果您为证书设置了路径，我将使用一个名为的变量。如果不是“/”的默认值，则可以正常工作。`Path`

@Tristan 提到了此解决方案，它是[merrix143243 解决方案的扩展](https://forums.aws.amazon.com/message.jspa?messageID=266686#266914)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-02-26T12:55:41.440

在等待答案的时候，我其实已经想出了如何做到这一点，你需要使用亚马逊提供的 IAM CLI 工具，然后使用命令
`iam-servercertgetattributes -s certname`

这将为您提供一个字符串，如：

`arn:aws:iam::123456789123:server-certificate/start_certname_com`

这是您在“SSLCertificateId”值对字段中放置的值

IAM 命令行工具 (CLI) 的设置说明可在以下位置找到：
[http ://docs.aws.amazon.com/IAM/latest/CLIReference/Setup.html](http://docs.aws.amazon.com/IAM/latest/CLIReference/Setup.html)

在此处从 aws 下载工具包
[http://aws.amazon.com/developertools/AWS-Identity-and-Access-Management/4143](http://aws.amazon.com/developertools/AWS-Identity-and-Access-Management/4143)

总而言之，您的最终块将如下所示：

```
 "Listeners" : [ 
    {  
      "LoadBalancerPort" : "443",  
      "InstancePort" : "80",  
      "SSLCertificateId" : "arn:aws:iam::123456789123:server-certificate/start_certname_com",  
      "Protocol" : "HTTPS"  
     },... 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-05-11T20:59:18.043

以下是使用最新 AWS CLI 获取长证书名称的方法：

```
pip install awscli
aws iam list-server-certificates 
```

# jquery - 引导轮播未加载

> ID：15074860
> 
> 赞同：0
> 
> 时间：2013-02-25T19:28:18.040
> 
> 标签：jquery, html, css, twitter-bootstrap

我正在使用 Twitter Bootstrap 框架来创建一个轮播，但我没有任何成功。这是我的脚本/CSS 声明：

```
 <link href ="css/bootstrap.css" rel="stylesheet">
    <link href="css/main.css" rel="stylesheet">
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script src="scripts/bootstrap.js" type=text/javascript></script>
    <script>
        $(document).ready(function(){
            $('.carousel').carousel();
        });
    </script> 
```

这是我适用的轮播标记：

```
 <div class="carousel-container">
            <div id="carousel-main" class="carousel slide">
                <div class="carousel-inner">
                    <div class="item active"><img src="slide1.jpg" /></div>
                    <div class="item"><img src="slide2.jpg /"> </div>
                    <div class="item"><img src="slide3.jpg /"> </div>
                </div>
                <a class="carousel-control left" href="carousel-main"
                    data-slide="prev">&lsaquo</a>
                <a class="carousel-control right" href="carousel-main"
                    data-slide="next">&rsaquo</a>
            </div>
        </div>
    </div> 
```

当我加载页面时，除了我的轮播之外的所有内容都会出现。我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T19:30:30.377

`</div>`您在标记结束时有一个额外的关闭..

也不要忘记`type="text/javascript"`在链接`bootstrap.js`文件时在 .. 周围添加引号。如果您有 HTML 5 文档类型，`type`则不需要该属性..

您还错误地引用了您的图像：

编辑：而不是：`<img src="slide3.jpg /">`使用：`<img src="slide3.jpg" />`

# python - 无需分叉的多处理

> ID：15074864
> 
> 赞同：0
> 
> 时间：2013-02-25T19:28:43.907
> 
> 标签：python, multiprocessing

我想使用 Python 多处理模块与子进程（通过管道）进行通信，这些子进程独立于调用者（即完全不同且独立的源代码、路径、可执行文件）。

主要过程是做一些网络，而孩子们应该简单地做一些数据转换（文件输入，文件输出）。我需要每秒执行几次，因此为每个文件重新启动子进程不是解决方案。

有没有办法做到这一点（在 Windows 下）？

# java - 快速搜索不断增长的大型平面文件的最佳方法是什么？

> ID：15074865
> 
> 赞同：0
> 
> 时间：2013-02-25T19:28:44.347
> 
> 标签：java, file, search, binary, hashmap

我还没有交出细节，但我准备用Java实现一个命令行搜索工具来搜索一个包含两个字段（docid、orgid）的文件。我了解到这个文件一开始很小，而且一直在变大。我需要能够传入 docid 并取回 orgid。

谁能告诉我 - 像我上面提到的那样搜索平面文件的最佳技术可能是什么？

目前，我们只处理文件中 50,000 行（超过两个月）的数据，但一旦系统到位，它会增长得更快。

似乎将其存储在可搜索的二进制系统中，但我不确定要从哪些方面着手。

我可以将它转储到数据库中，但这似乎有点矫枉过正。另外要做到这一点，我必须在服务器上安装数据库，这会很困难。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T20:11:30.733

如果可能的话，我会从一开始就在某个数据库中插入数据（也许像[hsqldb](http://hsqldb.org/)或[h2](http://www.h2database.com/)这样的轻量级的东西。

你的数据表现得像 Map，所以也许像[mapdb](http://www.mapdb.org/)这样的东西会更好（但你必须确保你的模式不太可能改变）。

如果您仍然需要使用此平面文件，也许 Grep 是最好的主意（它是搜索平面文件的最快工具）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T20:43:13.640

好吧，根据 docid 和 orgid 的大小以及您可以使用的 ram 数量，您可以简单地使用哈希表。将所有内容读入哈希表，然后针对哈希表进行查询。当然，不知道您必须对该文件进行多少次查找，也不知道它必须运行的频率，以及它是否需要驻留在内存中。

其他选项（如前所述）是使用 presisted DB。最有效的方法是将文件读入数据库并截断文件，以便后续读取不必重新读取现有记录。此外，您的文件仍然易于管理。当然，如果您尝试这样做，就会出现很多问题。例如：你可以截断文件吗？另一个进程是否期望该文件存在？当您尝试截断时如何管理竞争条件？等等

[使用hsqldb](http://hsqldb.org/)或[h2](http://www.h2database.com/)之类的东西会很棒，因为它们可以嵌入到您的应用程序中，您不必担心它们是独立安装的。当然，您需要为它们提供一个持久化空间，否则它不会有很大的帮助。

# javascript - 生成和使用 URL 作为 jscript 变量

> ID：15074866
> 
> 赞同：0
> 
> 时间：2013-02-25T19:28:48.340
> 
> 标签：javascript, html, url, url-rewriting, createelement

我现在已经花了几个小时试图通过阅读其他人的帖子来弄清楚你是如何做到这一点的——我什至有一个 jsfiddle 可以工作，但无法让它在我的页面中工作。

我想构造一个在页面上多次使用的 URL，这样当我需要更新 URL 时，我只需要通过标头中的 Javascript 变量在一个地方进行。

我将 URL 分为两部分，因为其中一个变量几乎总是相同的，但另一个在不同页面上通常会有所不同。

例如，我在标题中声明：

```
<script language="javascript" type=”text/javascript”&gt;
function goSchedule()
{
var schedulePath = "http://[rootPath]/";
var scheduleFileName = "[extension to document].htm";
schedulePath = schedulePath + scheduleFileName;
document.getElementById('go').href= schedulePath;
}
</script> 
```

然后我似乎无法弄清楚如何在 href 中调用它。这不起作用：

```
<p>Click the following link to test:<a href="javascript:goSchedule();" id="go">Test this link</a></p> 
```

如果您回答，请解释最初的 Javascript 是如何创建的*以及*如何正确调用它以使其成为活动 URL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T20:13:08.093

看起来您正在尝试在用户单击链接时替换 href 属性。我建议您在页面完成加载后立即为所有链接替换一次 href 属性。

确保在头部声明你的函数

```
<head>

<!-- Other head declarations ... -->

<script language="javascript" type=”text/javascript”&gt;
function goSchedule() {
    var schedulePath = "http://[rootPath]/";
    var scheduleFileName = "[extension to document].htm";
    schedulePath = schedulePath + scheduleFileName;
    document.getElementById('go').href = schedulePath;
}
</script>
</head> 
```

然后像这样将此方法绑定到body元素的onload事件

```
<body onload="goSchedule()">

    <!-- Other HTML Stuff Goes Here ... -->

    <p>Click the following link to test:<a href="javascript:void" id="go">Test this link</a>
    </p>
</body> 
```

这是完整的html页面：

```
<html>
    <head>

        <!-- Other head declarations ... -->

        <script language="javascript" type="text/javascript">
            function goSchedule() {
                var schedulePath = "http://support.mozilla.org/";
                var scheduleFileName = "en-US/products/firefox?as=u&utm_source=inproduct";
                schedulePath = schedulePath + scheduleFileName;
                document.getElementById('go').href = schedulePath;
            }
        </script>
    </head>
    <body onload="goSchedule()">

        <!-- Other HTML Stuff Goes Here ... -->

        <p>Click the following link to test:<a href="javascript:void" id="go">Test this link</a>
        </p>
    </body>
</html> 
```

# django - 将当前用户存储在 django 模型的字段中

> ID：15074869
> 
> 赞同：1
> 
> 时间：2013-02-25T19:28:53.313
> 
> 标签：django, django-models, django-forms

我正在尝试找到存储创建对象的用户的方式，并且我想自动执行此操作。我找到了一些东西，但没有什么对我有用。这是代码：

模型.py：

```
class Track(models.Model):
    ...
    usuari = models.ForeignKey(User) 
```

表格.py：

```
class TrackForm(forms.ModelForm):   
    class Meta:
        model = Track 
```

视图.py

```
def pujar_track(request):
if request.method=='POST':
    formulari = TrackForm(request.POST, request.FILES)
    if formulari.is_valid():                    
        formulari.save()                    
        return HttpResponseRedirect('/inici')
else:
    formulari = TrackForm()

return render(request,'principal/trackForm.html',
    {'formulari':formulari}) 
```

我见过关于put：

```
usuari = models.ForeignKey(User, blank=True, editable=False) but 
```

但我不知道什么时候可以在字段中设置用户。

谢谢指教！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T19:40:17.970

`usuari`您可以从您的中隐藏`TrackForm`，因此用户无法选择它：

```
class TrackForm(forms.ModelForm):   
    class Meta:
        model = Track
        exclude = ('usuari',) 
```

然后，将您的替换`formulari.save()`为：

```
track = formulari.save(commit=False)
track.user = request.user
track.save() 
```

这是一个常见的用例，在 Django[文档](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#using-a-subset-of-fields-on-the-form)中有详细说明。

# r - 报价问题将数据读入 R

> ID：15074872
> 
> 赞同：5
> 
> 时间：2013-02-25T19:28:58.757
> 
> 标签：r, csv, import-from-csv

我有一些数据，我正在尝试将其加载到**R**中。它位于 .csv 文件中，我可以在 Excel 和 OpenOffice 中查看数据。[（如果您好奇，这里](http://www.elections.ca/scripts/resval/ovr_41ge.asp?prov=&lang=e)是来自加拿大选举局数据的 2011 年民意调查结果数据）。

数据以不寻常​​的方式编码。一个典型的线路是：

```
12002,Central Nova","Nova-Centre"," 1","River John",N,N,"",1,299,"Chisholm","","Matthew","Green Party","Parti Vert",N,N,11 
```

Central-Nova 的末尾有一个`"`，但开头没有。因此，为了读取数据，我取消了引号，这对于前几个文件效果很好。IE。

```
test<-read.csv("pollresults_resultatsbureau11001.csv",header = TRUE,sep=",",fileEncoding="latin1",as.is=TRUE,quote="") 
```

现在问题来了：在另一个文件中（例如 pollresults_resultatsbureau12002.csv），有这样一行数据：

```
12002,Central Nova","Nova-Centre"," 6-1","Pictou, Subd. A",N,N,"",0,168,"Parker","","David K.","NDP-New Democratic Party","NPD-Nouveau Parti democratique",N,N,28 
```

因为我需要取消引号，所以该条目`"Pictou, Subd. A"`使**R**想要将其拆分为 2 个变量。无法读取数据，因为它想在构建数据框的中途添加一列。

Excel 和 OpenOffice 都可以打开这些文件没有问题。不知何故，Excel 和 OpenOffice 知道引号*只有在变量条目的开头才有意义*。

你知道我需要在**R**上启用什么选项来获取这些数据吗？我有超过 300 个文件需要加载（每个文件大约有 1000 行），因此不能选择手动修复...

我到处寻找解决方案，但找不到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:44:35.203

该答案主要针对@AnandaMahto（请参阅对原始问题的评论）。

首先，由于数据中的法语口音，它有助于在全局范围内设置一些选项：

```
options(encoding="latin1") 
```

接下来，使用以下命令逐字读取数据`readLines()`：

`temp <- readLines("pollresults_resultatsbureau13001.csv")`

在此之后，只需将每行数据中的第一个逗号替换为逗号+引号。这是因为第一个字段总是 5 个字符长。请注意，它使标题保持不变。

`temp[-1] <- gsub('^(.{6})(.*)$', '\\1\\"\\2', temp[-1])`

倒数第二，覆盖原始文件。

`fileConn<-file("pollresults_resultatsbureau13001.csv")` `writeLines(temp,fileConn)` `close(fileConn)`

最后，只需将数据读回 R：

`data<-read.csv(file="pollresults_resultatsbureau13001.csv",header = TRUE,sep=",")`

可能有一种更简洁的方法来做到这一点（并且可以更容易地迭代），但这个过程对我来说很有意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T16:09:51.323

基于我的评论，这是一个将*所有*CSV 文件读入单个列表的解决方案。

```
# Deal with French properly
options(encoding="latin1")

# Set your working directory to where you have
#   unzipped all of your 308 CSV files
setwd("path/to/unzipped/files")

# Get the file names
temp <- list.files()

# Extract the 5-digit code which we can use as names
Codes <- gsub("pollresults_resultatsbureau|.csv", "", temp)

# Read all the files into a single list named "pollResults"
pollResults <- lapply(seq_along(temp), function(x) {
  T0 <- readLines(temp[x])
  T0[-1] <- gsub('^(.{6})(.*)$', '\\1\\"\\2', T0[-1])
  final <- read.csv(text = T0, header = TRUE)
  final
})
names(pollResults) <- Codes 
```

您可以通过不同方式轻松使用此列表。如果您只想查看第 90 个`data.frame`，您可以通过 using`pollResults[[90]]`或 using `pollResults[["24058"]]`（换句话说，通过索引号或按区号）访问它。

拥有这种格式的数据意味着您还可以做很多其他方便的事情。例如，如果您想一次性修复所有 308 个 CSV，您可以使用以下代码，该代码将创建新的 CSV，其文件名前缀为“Corrected_”。

```
invisible(lapply(seq_along(pollResults), function(x) {
  NewFilename <- paste("Corrected", temp[x], sep = "_")
  write.csv(pollResults[[x]], file = NewFilename, 
            quote = TRUE, row.names = FALSE)
})) 
```

希望这可以帮助！

# facebook - 将分数发布到 facebook 运行时错误

> ID：15074873
> 
> 赞同：0
> 
> 时间：2013-02-25T19:29:06.110
> 
> 标签：facebook, lua, coronasdk

当我尝试将分数发布到 facebook 时，我收到此错误：

运行时错误 ...\main.lua:22: 尝试调用全局 'score' (一个数值) 堆栈回溯: [C]: in function 'score'

而且我真的不明白为什么它不起作用。完整的代码是：

```
local facebook = require ("facebook")
local json = require ("json")

keeping_score = true
score = 1000

keeping_score = true
local scoreText = display.newText( "Score: " .. score, 20, 20,nil, 20)
scoreText:setTextColor(255,255,255)

print("" .. score)

--Facebook function
local faceListener = function (event)
   local faceMessage = {
                name = "Name",
                link = "http://www.site.com",
                message = "I just achieved ".. score"  playing Name.... download for FREE iPhone & Android at www.site",
                caption = "Can you beat my score? ".. score,
                description = "Name Full description here, download for FREE iPhone & Android at www.site",
                picture = "http://cdn01.androidauthority.com/wp-content/uploads/2011/03/Google-Logo.jpg",
                actions = json.encode( { name = "Name", link = "http://www.site.com" } )
                          }
   --Checks for a login and if everything is good then it calls to post the faceMessage.
   if event.type == "session" then
      if event.phase == "login" then
          facebook.request( "me/feed", "POST", faceMessage )
      end
   end
end

local faceFunc = function ()
      facebook.login("appID", faceListener {"publish_stream"} )
end

--Button to activate the post to facebook
local facebutton = display.newRect (0, 0, 50, 50)
facebutton.x = display.contentWidth/2; facebutton.y = display.contentHeight/2
facebutton:addEventListener("tap", faceFunc) 
```

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T21:00:45.233

```
message = "I just achieved ".. score"  playing Name.... download for FREE iPhone & Android at www.site", 
```

`score`错过后的串联

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-09T00:17:39.160

message = "我刚刚达到 ".. score .." 播放 Name.. 在 www.site 免费下载 iPhone 和 Android",

# python - 机器人控制器代码：加载时出错

> ID：15074874
> 
> 赞同：1
> 
> 时间：2013-02-25T19:29:14.813
> 
> 标签：python, multithreading, serial-port, raspberry-pi

我用串行编写了一个简单的串行控制器——实际上，它更多的是弗兰克斯坦代码，其他人写的，我拼凑起来的。随意取笑我的无能，但任何方向都会受到赞赏。它在我运行 Backtrack、Python 2.6 的 Linux 上运行良好，但是当我尝试在 Raspberry Pi、Python 2.7 上运行它时，出现以下错误：

```
Traceback (most recent call last):Exception in thread Thread-2:
Traceback (most recent call last):
  File "/usr/lib/python2.7/threading.py", line 551, in __bootstrap_inner
    self.run()
  File "/usr/lib/python2.7/threading.py", line 504, in run
    self.__target(*self.__args, **self.__kwargs)
  File "/home/pi/Zombie Python 1.2 (Modified for Pi) (from Adapt 1.7).py", line 147, in rx
    self.ser = serial.Serial('/dev/ttyUSB0', 9600, timeout=1, bytesize=8, stopbits=1)
  File "/usr/local/lib/python2.7/dist-packages/serial/serialutil.py", line 260, in __init__
    self.open()
  File "/usr/local/lib/python2.7/dist-packages/serial/serialposix.py", line 276, in open
    raise SerialException("could not open port %s: %s" % (self._port, msg))
SerialException: could not open port /dev/ttyUSB0: [Errno 2] No such file or directory: '/dev/ttyUSB0'

File "/home/pi/Zombie Python 1.2 (Modified for Pi) (from Adapt 1.7).py", line 185, in <module>
    client = ThreadedClient(root)
  File "/home/pi/Zombie Python 1.2 (Modified for Pi) (from Adapt 1.7).py", line 113, in __init__
    self.periodicCall()
  File "/home/pi/Zombie Python 1.2 (Modified for Pi) (from Adapt 1.7).py", line 119, in periodicCall
    self.gui.processIncoming()
AttributeError: GuiPart instance has no attribute 'processIncoming' 
```

我的代码是：

```
import Tkinter
import time
import threading
import random
import Queue
import serial
import readline
#import xbee
import sys

x=""

class GuiPart:
    def __init__(self, master, queue, endApplication):
       self.sonar = Tkinter.StringVar() # Feeds sonar sensor data to label       
       self.lm = Tkinter.StringVar()    # Feeds left motor speed to label    
       self.rm = Tkinter.StringVar()    # Feeds right motor speed to label      

       self.queue = queue
       # Set up the GUI
       frame1 = Tkinter.Frame(master, bd=200) #Setup frame.
       frame1.bind("<Key>", key) # Allow frame to handle keypresses.
       frame1.focus_set() #Set focus of frame so that keypresses activate event.
       frame1.pack() #Show it.

       #Button
       console = Tkinter.Button(frame1, text='Close', command=endApplication)
       console.pack()

       # Add more GUI stuff here
       self.lm.set(0) # Initializes left motor label
       self.rm.set(0) # Initializes right motor label
       self.sonar.set(0) # Initializes sonar label 

       #Sonar label
       sonarLbl = Tkinter.Label(frame1, textvariable=self.sonar)
       sonarLbl.pack()

       #Right motor label
       rmLbl = Tkinter.Label(frame1, text="Left Motor Speed: ", textvariable=self.rm)
       rmLbl.pack()

       #Left motor label
       lmLbl = Tkinter.Label(frame1, textvariable=self.lm)
       lmLbl.pack()

def key(self, event):
       #print "pressed", repr(event.char)  
       #self.sonar = repr(event.char) <------ This should be the line to handle keypresses
       global x    
       x = repr(event.char)

def processIncoming(self):
       """
       Handle all the messages currently in the queue (if any).
       """
       while self.queue.qsize():
           try:
               msg = self.queue.get(0)
               # Check contents of message and do what it says
               # As a test, we simply print it

           # Below is where I will parse the "msg" variable, splitting 
           # it (msg.rsplit) to pull out sensor data and update labels.

               lm, rm, sonar, mknt = msg.rsplit(",")
               lm = "Left Motor Speed: "+lm
               rm = "Right Motor Speed: "+rm
               sonar = "Sonar: "+sonar+" CMs away"

               self.sonar.set(sonar) # Setting the labels with latest sensor info.
               self.lm.set(lm) # Setting the labels with latest sensor info.
               self.rm.set(rm) # Setting the labels with latest sensor info.

           except Queue.Empty:
                pass

class ThreadedClient:
    """
    Launch the main part of the GUI and the worker thread. periodicCall and
    endApplication could reside in the GUI part, but putting them here
    means that you have all the thread controls in a single place.
    """
    def __init__(self, master):
        """
        Start the GUI and the asynchronous threads. We are in the main
        (original) thread of the application, which will later be used by
        the GUI. We spawn a new thread for the worker.
        """
        self.master = master

        # Create the queue
        self.queue = Queue.Queue()

        # Set up the GUI part
        self.gui = GuiPart(master, self.queue, self.endApplication)

        # Set up the thread to do asynchronous I/O
        # More can be made if necessary
        self.running = 1

        self.thread1 = threading.Thread(target=self.workerThread1)
        self.thread1.start()

        #Start receiving thread.    
        self.rx = threading.Thread(target=self.rx)
        self.rx.start()

        # Start the periodic call in the GUI to check if the queue contains
        # anything
        self.periodicCall()

    def periodicCall(self):
        """
        Check every 100 ms if there is something new in the queue.
        """
        self.gui.processIncoming()
        if not self.running:
            # This is the brutal stop of the system. You may want to do
            # some cleanup before actually shutting it down.
            import sys
            sys.exit(1)
        self.master.after(100, self.periodicCall)

    def workerThread1(self):
        """
        This is where we handle the asynchronous I/O. For example, it may be
        a 'select()'.
        One important thing to remember is that the thread has to yield
        control.
        """
        while self.running:
            # To simulate asynchronous I/O, we create a random number at
            # random intervals. Replace the following 2 lines with the real
            # thing.
            time.sleep(rand.random() * 0.3)
            msg = rand.random()

        #self.queue.put(msg)

    # Continuously read and print packets
    def rx(self):
        global x
        self.ser = serial.Serial('/dev/ttyUSB0', 9600, timeout=1, bytesize=8, stopbits=1)
        self.ser.flush()
        while(1):
            response = str(self.ser.readline())

            # Send movement codes.      
            if x == "'a'" or x == "'A'": # or "'A'": # Turn left.
             self.ser.write('4')
            elif x == "'w'" or x == "'W'": #Go forward.
             self.ser.write("3")
            elif x == "'d'" or x == "'D'": #Turn right.
             self.ser.write("2")
            elif x == "'s'" or x == "'S'": #Go back.
             self.ser.write("1")
            elif x == "'x'" or x == "'X'": #Stop.
             self.ser.write("5")
            elif x == "'1'": #Raise speed.
             self.ser.write("7")
            elif x == "'2'": #Lower speed.
             self.ser.write("6")

            x = ""

            if len(response) > 10:
                self.ser.flushInput() #If you don't flush the buffer, then it'll try to read out all 
                                 #the sensor readings, so the reaction time will be extrordinary.
                time.sleep(.1)# This scales back the CPU usage.
                self.queue.put(response)

    def endApplication(self):
        print "Closing"
        self.running = 0
        self.ser.close()    
        sys.exit(1)

rand = random.Random()
root = Tkinter.Tk()

client = ThreadedClient(root)
root.mainloop() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T20:53:34.443

你`self.gui`的是`GuiPart`。`GuiPart`没有`processIncoming`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-04T14:10:23.623

在行上方显示的代码段中

```
def key(self, event): 
```

和

```
def processIncoming(self): 
```

**不再**缩进四个空格，因为它们可能应该成为您的类的方法`GuiPart`。

来自其他语言的 Python 新手经常会忽略缩进是 Python 编程语言中非常重要的语法部分这一细节。因此，避免混合 TAB 和空格也是非常重要的。（尤其是从各种来源复制代码片段时，否则这是学习和尝试新事物的好机会）

另一件事是：在 Python 中，您还可以定义模块级全局函数。执行此操作的语法实际上与用于在类中定义方法的语法相同（缩进级别除外）。

因此，在您的示例代码片段中，以前的方法`key()`已经`processIncoming()`成为模块全局函数定义，而不是简单地通过错误缩进的方法。

方法是类对象的属性。这两个方法从类名称空间向上移动到模块名称空间。因此出现以下错误消息：

```
AttributeError: GuiPart instance has no attribute 'processIncoming' 
```

# three.js - three.js - 将不同的材料应用于挤压形状

> ID：15074877
> 
> 赞同：2
> 
> 时间：2013-02-25T19:29:24.527
> 
> 标签：three.js, webgl

我有可以应用的 Three.Shape 挤压 为了得到一个平面，我先画了一个正方形，然后应用挤压

```
var squareShape = new THREE.Shape();
squareShape.moveTo( 0,0 );
squareShape.lineTo( 0, sqLength );
squareShape.lineTo( sqLength, sqLength );
squareShape.lineTo( sqLength, 0 );
squareShape.lineTo( 0, 0 );

var geometry = new THREE.ExtrudeGeometry( squareShape,extrudeSettings); 
```

现在我的浏览器上出现了一个 3D 正方形。

接下来我想在其顶面上应用 256x256 的图像纹理。这个怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T01:30:44.793

如果您查看 THREE.js 中的 src/extras/geometries/ExtrudeGeometry.js，您将看到这些注释。

*   material: // 正面和背面的材质索引
*   extrudeMaterial: // 挤出和斜面的材料索引

所以例如你可以说（显然不会直接运行，因为它不完整）

```
// The face material will be index #0\.  The extrusion (sides) will be #1.
var extrudeSettings = { amount: 10, bevelEnabled: true, bevelSegments: 3, steps: 4, bevelThickness: 8, material: 0, extrudeMaterial: 1 }; 
```

当您创建网格时，您会创建 2 种材质并将它们分配给您的网格。

```
var mesh = THREE.SceneUtils.createMultiMaterialObject( geometry, [ new THREE.MeshLambertMaterial( { color: color } ), new THREE.MeshBasicMaterial( { color: 0x000000, wireframe: true, transparent: true } ) ] ); 
```

希望这能让你走上正确的道路。

在旁注中，与另一个答案相关，您想使用挤压来创建尺寸类似于正方形但有斜面的东西。一个示例是，如果您尝试绘制骰子并希望将边缘变圆。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T21:30:38.953

如果你想要的只是一个立方体，你为什么要挤压？为什么不使用 CubeGeometry。

# ubuntu - Virtual Box UUID {07c3.........} 与存储在媒体注册表中的值 {2c1b...} 不匹配

> ID：15074878
> 
> 赞同：69
> 
> 时间：2013-02-25T19:29:28.117
> 
> 标签：ubuntu, virtualbox

我不得不删除我的虚拟盒子 .vhd 文件。我现在正试图从另一台机器上恢复它们​​，但得到：

```
Virtual Box UUID {07c3.........} does not match the value {2c1b...} 
stored in the media registry ('/home/durrantm/.VirtualBox/VirtualBox.xml') 
```

如何克服？

* * *

## 回答 #1

> 赞同：146
> 
> 时间：2014-08-26T15:57:35.717

这是为我解决此错误的原因（使用 VirtualBox 4.3）：

1.  转到**文件**→**虚拟媒体管理器**
2.  在“**硬盘驱动器**”选项卡中，您应该会在遇到问题的磁盘映像旁边看到一个红色感叹号图标。选择它 →**释放**→**删除**→**关闭**。
3.  返回到 VM 的设置并重新添加磁盘。

为防止将来出现错误，在删除虚拟磁盘映像文件之前，请从 Virtual Media Manager 中删除它们：

1.  转到**文件**→**虚拟媒体管理器**
2.  在**硬盘**选项卡中，找到要删除的虚拟磁盘，选择它 →**释放**→**删除**→**保留**（或删除，如果你想永久删除它） →**关闭**。
3.  返回到 VM 的设置并读取磁盘。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2013-12-13T13:49:40.490

只需尝试**重命名虚拟磁盘文件**。

对于首先通过 VB 向导创建的文件，然后在克隆另一个磁盘时被另一个工具覆盖，我遇到了同样的问题。因此，VB 对特定路径的磁盘文件有一些 uuid 假设。在我的情况下，它是一个`whatever.vdi`文件并重命名它以`whatever 2.vdi`解决问题。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-08-24T11:48:34.113

从您的 VM 中分离图像（在 GUI 或 Web 界面中）

转到命令行

“VBoxManage 列出硬盘”

UUID：c153f127-8fd9-4dc2-bc8b-8e39a8bb8238 父UUID：基本状态：不可访问类型：正常（基本）位置：/home/virtualbox/nas4free.vmdk 存储格式：VMDK

“VBoxManage closemedium 磁盘 c153f127-8fd9-4dc2-bc8b-8e39a8bb8238”

重新附加来自 VM 的映像（在 GUI 或 Web 界面中）

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-03-04T13:51:40.147

此错误消息意味着存储在磁盘映像中的 UUID 与存储在 .vbox 文件中的 UUID 不匹配。使用 HEX 编辑器打开磁盘映像。在开始时，您可以看到一个纯文本字符串，例如 ddb.uuid.image="xxxx"。使用文本编辑器打开 .vbox 文件。您还可以在其中找到 UUID，它们看起来像 <Harddisk uuid="{xxxxx}"。编辑 .vbox 文件以匹配图像文件中的 UUID。

此错误消息显然具有误导性。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2016-04-06T19:17:22.813

另一个解决方案，对我来说很好，来自[http://michlstechblog.info/blog/virtualbox-no-boot-after-snapshot-efail-0x80004005/#more-2400](http://michlstechblog.info/blog/virtualbox-no-boot-after-snapshot-efail-0x80004005/#more-2400)

从 uuidCreation 字段值

```
vboxmanage internalcommands dumphdinfo <path/to/parent/of/erroneous/snapshot.vdi> 
```

`<correct_parent_uuid>`并在以下命令中使用它来替换

```
vboxmanage internalcommands sethdparentuuid <path/to/erroneous/snapshot.vdi> <correct_parent_uuid> 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-02-25T19:34:20.607

尝试使用 VBoxManage 命令来识别、分离和删除磁盘。

看看这个链接。希望它可以帮助您解决这个令人讨厌的错误。

[http://www.vleeuwen.net/2012/10/virtualbox-uuid-mismatch](http://www.vleeuwen.net/2012/10/virtualbox-uuid-mismatch)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-02-26T01:52:57.560

最后，最好的答案是删除这些 vm 实例并重新安装它们。

我曾尝试重新安装 Virtual Box 本身，但这根本没有帮助，因为当我重新安装时问题仍然存在。这表明问题出在实例特定文件上。

所以我使用该应用程序删除了它们中的每一个。

对于我安装的 ie9 和 ie8，我还在 ~/.ievms 中删除了任何相关文件（ie8 的 smae 中的 egie8）。

然后我使用这些脚本重新安装它们：

即8：

```
curl -s https://raw.github.com/xdissent/ievms/master/ievms.sh | IEVMS_VERSIONS="8" bash 
```

即9：

```
curl -s https://raw.github.com/xdissent/ievms/master/ievms.sh | IEVMS_VERSIONS="9" bash 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-01-01T13:03:07.793

实际上，我遇到了同样的问题，我`VM`在本地 HD 上进行了克隆，然后将克隆的图像移动到我的外部 HD，然后出现错误。

我用以下解决方案解决了这个问题：

1.  导航到我在外部 HD 上克隆的 VM 文件夹。
2.  使用 Oracle Virtual Box 打开它（右键单击 >> Open with oracle VM virtual Box）。
3.  出现一个错误，说 vm 文件路径不正确，有两个选项“确定”和“迁移或合并”我选择了第二个“迁移”然后一切顺利。

如果你打开: `file>> virtual media manaager`: 在硬盘菜单中你最终会找到路径正确的虚拟硬盘`:D` 我希望我的演示清晰易懂。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-05-05T07:53:17.793

使用标准文本编辑器打开文件`.VirtualBox/VirtualBox.xml`并将所有出现的 UUID 值编辑`2c1b...`为`07c3.........`.

在编辑之前关闭 VirtualBox`VirtualBox.xml`以避免您的更改被 VirtualBox 覆盖。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-05-12T09:10:51.403

列出所有无法访问的 UUID 的第一行：

```
VBoxManage list hdds | grep -B 2 -e  "inaccessible" | grep -e "^UUID:" | sed "s/UUID:\s*//g" 
```

清除所有无法访问的 UUID 的第二行：

```
VBoxManage list hdds | grep -B 2 -e  "inaccessible" | grep -e "^UUID:" | sed "s/UUID:\s*//g" | xargs -I {} VBoxManage closemedium disk {} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-03-25T02:31:21.447

### 问题陈述：

我试图从同一个 VM 文件的 2 个单独副本创建 2 个 VM。ubuntu.vdi 是原始`vdi`文件，其 VM 名称为 `ubuntu`. 该`vdi`文件的第二个副本也被命名`ubuntu.vdi`，但属于另一个`VM`名为`ubuntu_notworking`. 我试图调出两个 VM 的原因是因为两个 VM 之间发生了一些变化。VM `ubuntu`VM 工作正常，但没有 `ubuntun_notworking`工作，我想同时调出两个 VM 并比较这两个 VM 以检查发生了什么变化。然而，同时提出这两个问题是很困难的，VirtualBox 反复抱怨 `C:\Users\username\.VirtualBox\VirtualBox.xml`.xml 文件中的 UUID 和 `C:\Users\username\VirtualBox VMs\ubuntu`.

### 问题方案：

1.  **使用以下任一选项备份您的 VM 文件夹：**

    1.  将文件夹复制到新位置 [https://4sysops.com/archives/move-virtualbox-folder-with-virtual-machines-to-a-new-location/](https://4sysops.com/archives/move-virtualbox-folder-with-virtual-machines-to-a-new-location/)
    2.  将您的虚拟机导出为 OVA 文件，以便稍后导入。 [https://askubuntu.com/questions/588426/how-to-export-and-import-virtualbox-vm-images](https://askubuntu.com/questions/588426/how-to-export-and-import-virtualbox-vm-images) 导出你的VM是官方版的如何移动文件夹，

    复制文件夹是最快的，但有一些边缘情况，例如当您尝试从同一个基本`vdi`文件创建 2 个 VM 时。

2.  **重新开始并从 VirtualBox 中删除 VM：** 您可以通过转到 GUI>select VM>Remove 来执行此操作。仅删除导致启动问题的 VM
3.  **将文件复制到 VirtualBox 驱动器：** 从上述步骤 1 中 VM 文件夹的备份副本中，将要创建的特定 VM 复制到 C:\Users\username\VirtualBox VMs\
4.  **启动第一个 VM：** 选择`.vbox`文件并启动 VM。VirtualBox 会抱怨文件中的 uuid 之间存在冲突`.vbox`。
5.  **更改 UUID：**使用 VBoxManage internalcommands sethduuid "C:\Users\username\VirtualBox VMs\ubuntu_notworking\ubuntu.vdi" [https://stackoverflow.com/a](https://stackoverflow.com/a/47374208/4752883)`vdi`更改刚刚复制到文件夹中 的文件的 UUID [/47374208/4752883](https://stackoverflow.com/a/47374208/4752883)`VirtualBox VMs`

6.  **重复完全相同的命令以获取第二个 UUID：** [https ://stackoverflow.com/a/36327937/4752883](https://stackoverflow.com/a/36327937/4752883)

7.  **更改`Machine uuid`：** 打开`.vbox`文件并找到`Machine uuid`uuid 文件并将其更改为您在步骤 #5 中找到的文件

8.  **更改`Harddisk uuid`and `Image uuid`：** 找到`Harddisk uuid`and`Image uuid`并将 uuid 更改为您在步骤#6 中找到的内容。

9.  **对要创建的第二个 VM 重复步骤# 3-8：**

10.  转到 C:\Users\username.VirtualBox\ 并打开`VirtualBox.xml` 文件。

11.  **更改文件夹`Machine uuid`中的`.VirtualBox`** ：`C:\Users\username\VirtualBox VMs\ubuntu_notworking`从第 5 步开始。对于与“C:\Users\username\VirtualBox VMs\ubuntu”对应的机器 ID，将机器更改为您在步骤 #9 中生成的第一个 UUID。 `<DVDImages> <Image uuid="{fsfasd98-c1a6-42d9-82aa-67728bsdhd53}" location="C:/Program Files/Oracle/VirtualBox/VBoxGuestAdditions.iso"/> </DVDImages>`

[https://stackoverflow.com/a/36857344/4752883](https://stackoverflow.com/a/36857344/4752883)

一旦按照上述步骤（！！！），您应该能够从同一`vdi`文件的副本启动 2 个 VirtualBox 虚拟机。

*将来不要复制文件夹，而是使用创建`ova`文件*的方法。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-11-19T06:15:00.817

我尝试了上述所有这些解决方案，但只有@Niklas Peter 的解决方案对我有用。

就我而言，该错误声称硬盘驱动器的 uuid 与注册表中的 uuid 不匹配（多么奇怪的虚拟盒错误！）。即使我将它分离并重新连接，同样的错误仍然存​​在。

最后我复制了硬盘并给它起了一个新名字，并从中创建了一个新的VM，遇到了相同uuid已经存在的错误，所以我使用以下命令更改uuid：

`VBoxManage internalcommands sethduuid "D:\VM\MyKyLin\MyKyLin.vhd" UUID changed to: 741da151-548a-4e3c-87bf-2725f77c683d`

然后我继续从中创建新的虚拟机。并成功启动！

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-08-03T14:05:11.183

# 100 票赞成的答案对我不起作用

当我进入菜单：**文件→虚拟媒体管理器**时，**硬盘驱动器**选项是空白的，所以没有什么可以删除/释放。

# 我的错误屏幕

[![vbox错误.png](../Images/87edcc24c5d6fa5924b6b19a7ca78b1f.png)](https://i.stack.imgur.com/TFwC5.png)

# 解决方案

我将错误文本复制并粘贴到`gedit`并很好地格式化了行：

```
Machine UUID {89b61270-7d52-483c-bd40-2f14d6905c72}
 - in '/home/rick/VirtualBox VMs/Lubuntu 16.04/Lubuntu 16.04.vbox' doesn't match its 
UUID {3ca76efb-a497-42da-852c-da97a74b421b}
 - in the registry file '/home/rick/.config/VirtualBox/VirtualBox.xml'. 
```

然后我将最后一行中的文件名复制并粘贴到 gedit 的文件打开提示中。这是 Gedit 新打开的第二个文件窗口的顶部：

```
<?xml version="1.0"?>
<!--
** DO NOT EDIT THIS FILE.
** If you make changes to this file while any VirtualBox related application
** is running, your changes will be overwritten later, without taking effect.
** Use VBoxManage or the VirtualBox Manager GUI to make changes.
-->
<VirtualBox xmlns="http://www.virtualbox.org/" version="1.12-linux">
  <Global>
    <ExtraData>
      <ExtraDataItem name="GUI/DetailsPageBoxes" value="general,system,preview,display,storage,audio,network,usb,sharedFolders,description"/>
      <ExtraDataItem name="GUI/GroupDefinitions/" value="m=3ca76efb-a497-42da-852c-da97a74b421b"/> 
```

*   注意它说**“不要编辑这个文件”。**. 当然，这意味着我即将这样做！
*   现在关闭正在运行的**VirtualBox**应用程序。
*   `gedit`发出文件已更改的警告，请单击`Reload`按钮。

# 改变`.config/VirtualBox/VirtualBox.xml`

现在在第二个 gedit 打开的文件窗口中使用搜索和替换`Ctrl`+ `H`。它要求一个搜索字符串。

1.  单击第一个 gedit 打开的文件窗口。
2.  突出显示目标机器（第二个 UUID）的 UUID 字符串（引号之间）。使用`Ctrl`+`C`进行复制。
3.  切换回第二个窗口并使用`Ctrl`+`V`粘贴到搜索字段中。
4.  单击替换字符串字段以使其获得焦点。
5.  切换回第一个 gedit 窗口。
6.  突出显示源 UUID（第一个 UUID）并使用`Ctrl`+`C`进行复制。
7.  切换回第二个 gedit 窗口并使用`Ctrl`+`V`粘贴到替换字段中。
8.  单击`Replace All`按钮并进行两项更改。
9.  保存第二个 gedit 文件窗口。

# VirtualBox 现在加载复制的图像

现在可以使用复制的图像正常工作，但是我忘记将 Guest Additions 安装到新的 VirtualBox。

为什么所有这些麻烦而不是`export`从源机器和`import`目标机器上使用？好吧，源机器被**Ubuntu Desktop**和**apt-get**堵住了，所以我不得不将`../VirtualBoxVM`文件夹复制到**Ext4**格式的 USB 记忆棒上。默认**FAT**格式的文件系统不起作用，因为 VB 磁盘映像大于 4 GB。我也可以选择**NTFS**文件系统类型，但我已经有很多这样的 USB 记忆棒，想尝试一些不同的东西。

# c# - ASP.net 中使用的美元符号是什么？

> ID：15074885
> 
> 赞同：0
> 
> 时间：2013-02-25T19:29:48.007
> 
> 标签：c#, asp.net

我知道这可能是一个新手问题，但每次我看到这样的代码：

```
var table = $("table[title='Refresh']"); 
```

还有这样的代码：

```
 $(function () {
        $("#datepicker").datepicker();
    }); 
```

`$`我总是在符号上涂上一层釉。它是一种占位符？或者它是否意味着它的动态？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-25T19:31:14.370

它是一个 JavaScript 函数，很可能是 jQuery。许多 JS 框架将 $ 定义为根选择器函数，jQuery 是其中最著名/最常用的。

它与 ASP.NET 无关。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T19:31:33.767

与`$`ASP.NET 无关，而是与可能使用[jQuery](http://jquery.com/)或[Prototype](http://prototypejs.org/)相关，它们都将`$`用作函数的别名。在 jQuery 的情况下，`$`这只是一个不必编写 jQuery 的快捷方式，如下例所示：

```
jQuery('selector').datepicker() 
```

和写的一样

```
$('selector').datepicker() 
```

jQuery 提供[noConflict()](http://api.jquery.com/jQuery.noConflict/)方法正是为了避免与可能使用相同`$`别名的任何其他 Javascript 框架发生冲突。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T19:31:21.790

这不是 ASP.NET 的一部分，它实际上是 JQuery 库的一部分，JQuery 库是一个用于客户端处理的 JavaScript 库。

[http://jquery.com/](http://jquery.com/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-25T19:31:55.727

这是在 jQuery 中使用的快捷方式/别名。可以用“jQuery”关键字代替。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-25T19:33:09.920

这是使用 $ 符号的 jquery 语法。在这里阅读更多[http://www.learningjquery.com/2006/09/introducing-document-ready](http://www.learningjquery.com/2006/09/introducing-document-ready)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-25T19:39:34.023

那是JavaScript代码。在 JavaScript 中，`$`是函数或变量的合法名称。这只是意味着有人用该名称定义了一个函数。您可以简单地自己定义一个：

```
function $(){return "hello world";} 
```

然后`$()`会打印`"hello world"`.

最著名的是，JQuery 使用它作为他们的选择器函数，它用于以比 JavaScript 内置的 DOM 查询方法更强大的语法来查询页面的 DOM，但是没有什么可以保证`$`JQuery 的用法，它可以是任何东西。（请注意，我非常不鼓励您实际定义`$`自己并将其用作函数，因为几乎所有 JS 开发人员都已学会将其作为 JQuery 的实现来阅读。）

# python - Python 通常将数据解析为对象结构

> ID：15074888
> 
> 赞同：2
> 
> 时间：2013-02-25T19:30:05.157
> 
> 标签：python, parsing, generics, data-structures, struct

我想知道的是我是否有一个具有已知参数和已知顺序的已定义结构化对象。我想以一种通用的方式将二进制 blob 解析为这个结构。

比如我知道我的文件是这个结构的二进制文件

```
typedef struct { 
         uint     frCompressedSize;
         uint     frUncompressedSize;
         ushort   frFileNameLength;
         ushort   frExtraFieldLength;
         char     frFileName[ frFileNameLength ];
         uchar    frExtraField[ frExtraFieldLength ];
         uchar    frData[ frCompressedSize ];
     } ZIPFILERECORD; 
```

有没有比以硬编码方式一次读取单个字段更好的方法呢？在我的真实代码中，该结构有近 100 个参数，所以硬编码方法不是我的首选。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T20:15:24.843

您正在寻找 python[结构](http://docs.python.org/2/library/struct.html)库

# python - 定义全局变量

> ID：15074889
> 
> 赞同：0
> 
> 时间：2013-02-25T19:30:06.093
> 
> 标签：python, scope, global-variables

我只是想知道，在 python 3 中，为什么必须将一些全局变量定义为`global`您使用的每个单个函数（您正在定义），而其他变量只需要定义一次？可能是一个问题，因为我没有正确理解范围，请有人能说明一下吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T19:32:10.723

范围内的变量可以被该范围内声明的函数/对象*读取但不能修改。*如果您还希望更改它们的值，则必须将它们声明为全局。

更新：但是，请注意，如果来自其他编程语言，“更改值”可能会或可能不会意味着您最终习惯的内容，因为 Python 中的赋值意味着给对象一个名称。关键字`global`允许您让给定*名称*指向（关联）不同的对象。看下面的例子：

```
aa = 1
bb = 2
cc = [ 1, 2, 3 ]

def test():
    global aa
    aa = -1
    bb = -1
    cc[2] = -1

test()
print "aa:", aa
print "bb:", bb
print "cc:", cc 
```

会导致：

```
aa: -1
bb: 2
cc: [1, 2, -1] 
```

*   在函数`test()`中，名称`aa`被声明为`global`，因此`aa = -1`在函数中将导致将*全局*名称`aa`指向一个新对象，即整数`-1`。

*   `bb`in中的名称`test()`未声明为全局名称，因此赋值`bb = -1` 将在函数内本地创建名称`bb`并将其指向`-1`，同时将名称留`bb`在*全局*范围内仍指向值`2`。

*   变量`cc`也没有声明为全局变量，因此，您不能更改函数中*全局* 变量的关联。但是，由于在全局范围内关联了一个*可变*对象，因此您可以在函数内更改此对象的内容。`cc``test()``cc`

 *请注意，这里的公式可能不是解释差异的官方 Python 方式，但如果您有其他编程语言的背景，它可能有助于理解事物。*

# emacs - 如何备份 Emacs 自定义文件？

> ID：15074891
> 
> 赞同：0
> 
> 时间：2013-02-25T19:30:08.480
> 
> 标签：emacs, aquamacs

我如何要求 Emacs（在我的例子中是 Aquamacs）不仅备份我正在处理的文档，而且还备份自定义文件，例如 customs.el？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T19:58:52.587

除了 Dualinity 描述的备份配置之外，我建议您将所有 emacs 自定义项置于版本控制之下（git、hg、bzr 等）。很多时候，由于意外的副作用，我需要恢复我的自定义设置。如果您在进行所有更改时检查所有更改，则查看六个月前所做的更改是微不足道的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T19:49:17.097

例如，通过将`(setq custom-file "~/.emacs-custom.el")`您的`.emacs`文件指定为自定义文件（当然，可以使用另一个名称），然后`(load custom-file)`加载它。

取自：[http ://www.gnu.org/software/emacs/manual/html_node/emacs/Saving-Customizations.html](http://www.gnu.org/software/emacs/manual/html_node/emacs/Saving-Customizations.html)

它还讨论了不同版本的不同定制。

# winapi - 使用 WinAPI 在两个 EXE 之间发送字符串

> ID：15074897
> 
> 赞同：1
> 
> 时间：2013-02-25T19:30:34.260
> 
> 标签：winapi

我有两个正在运行的 VC++ 应用程序，都是我编写的。它们不是同一个 EXE 的两个实例；它们是完全不同的项目。我想将一个字符串从一个发送到另一个。

第一个应用程序具有以下代码：

```
HWND tgtHwnd = FindWindow(_T("Target_Class"), _T("Target_Name"));
SendMessage(tgtHwnd, 1234, 0, (LPARAM)L"Hello"); 
```

第二个具有以下代码来处理此消息：

```
// snippet of the WndProc function

case 1234:
  LPCWSTR myText = (LPCWSTR)lParam;
  MessageBox(NULL, myText, _T("My Text"), 0);

// End snippet 
```

当我运行它并传递消息时，我在接收应用程序中收到访问冲突错误。

![在此处输入图像描述](../Images/782a64ddca94eeb5cc01de982ae74a38.png)

尝试搜索与 LPCWSTR 和 LPARAM 之间的转换，但找不到任何有用的示例。与 Bad Ptr 错误更加混淆。我记得读过，发送的指针可能对第二个进程或类似的东西不可用。但我不知道从哪里开始寻找。

如何将字符串从一个 EXE 发送到另一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T19:38:52.980

老实说，很惊讶它走得这么远。不知道 Casting "Hello" to long 是做什么的，但它只会在发送的 exe 中，除非你只发送四个 ascii 字符，否则用处不大。

寻找 WM_CopyData，它就是为此而设计的。

# wpf - 基于导航道具的Datagrid DataGridTemplateColumn

> ID：15074898
> 
> 赞同：0
> 
> 时间：2013-02-25T19:30:35.903
> 
> 标签：wpf, datagrid, datagridtemplatecolumn

我有一个用于客户数据的数据网格。我的客户实体有一组暴露的笔记。

我需要一种根据笔记状态在列中显示图像的方法，如果我的任何笔记具有“警告”状态，则显示警告图像，否则显示正常状态图像。

这是可行的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T21:29:24.130

我向我的客户实体（正在使用实体框架 4）添加了一个只读的 [NotMapped] 属性，它返回了一个布尔值，然后将 DataGridTemplateColumn 中的一个图像绑定到这个并使用值转换器设置源：

实体

```
[NotMapped]
public bool ShowWarning 
{
    get
    {
        if (this.AuditableNotes != null && this.AuditableNotes.Count(an => an.Warning) > 0)
        {
            return true;
        }
        else
        {
            return false;
        }
    }
} 
```

XAML

```
<DataGridTemplateColumn
            Header="Status">
    <DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
            <Image x:Name="MyImage" Source="{Binding ShowWarning, Converter={StaticResource notesStatusConverter}}" Width="25" Height="20"/>
        </DataTemplate>
    </DataGridTemplateColumn.CellTemplate>
</DataGridTemplateColumn> 
```

值转换器

```
public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
{
    if (value != null && (bool)value == true)
    {
        return "/Assets/Images/symbol_error.png";
    }
    else
    {
        return "/Assets/Images/symbol_information.png";
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T19:49:08.100

是的，有多种方法可以做到这一点。

如果您有一个客户`ViewModel`，那么只需公开一个属性，告诉您该特定客户在他们的笔记集合中是否有警告状态，然后使用它来确定是否显示图像。

另一种选择是使用 a`ValueConverter`来接收您的笔记集合，然后确定是否显示图像。

我确信还有其他方法，但这些是我脑海中突然出现的方法。

# java - 黑莓线程池无法正常工作

> ID：15074903
> 
> 赞同：1
> 
> 时间：2013-02-25T19:30:51.857
> 
> 标签：java, blackberry, java-me, threadpool

我正在为黑莓开发一个java线程池，这是我目前拥有的代码：

```
public class ThreadPool {

    int maxWorkers = 15;
    Vector queue = new Vector();
    Thread[] workers;

    public ThreadPool(int maxThreads) {

        if (maxThreads <= maxWorkers)
            maxWorkers = maxThreads;

        workers = new Thread[maxThreads];

        for (int i = 0; i < maxThreads; i++) {

            // Crea un worker que ejecuta trabajos.
            workers[i] = new Thread(new Runnable() {

                public void run() {

                    Runnable r;

                    while (true) {

                        synchronized (queue) {

                            while (queue.size() == 0) {
                                try {
                                    queue.wait();
                                } catch (Exception e) {
                                    System.out.println("Error while waiting");
                                }
                            }

                            try {

                                r = (Runnable) queue.firstElement();
                                queue.removeElement(r);
                                r.run();
                                queue.notify();
                            } catch (Throwable e) {
                                System.out.println("nope!");
                            }
                        }
                    }
                }
            });

            workers[i].start();
        }
    }

    public void addWork(Runnable work) {

        synchronized (queue) {
            queue.addElement(work);
            queue.notify();
        }
    }
} 
```

问题是，如果我将 10 个作业排队，它们将一个接一个地执行，而不是同时执行，例如：

```
 for (int i=0; i<10; i++) {
        pool.addWork(new Runnable() {

                public void run() {

                    Random random = new Random();
                    int time = random.nextInt(5) * 1000;

                                System.out.println("I'm work " + i);

                    try {                   
                        Thread.sleep(time);
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    }
                }
            });
     } 
```

我得到：

```
I'm work 1
I'm work 2
I'm work 3
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T19:34:41.667

您正在`r.run()`队列同步语句中执行您的作业（即），因此，直到每个线程完成它的作业后才会释放队列锁。您应该在同步语句之外执行作业。试试看。

# html - 浮动导航到徽标的右侧

> ID：15074904
> 
> 赞同：1
> 
> 时间：2013-02-25T19:30:58.993
> 
> 标签：html, css, menu, css-float

我的网站左上方有一个徽标。我正在尝试将导航菜单垂直对齐到徽标的右侧。但它总是出现在徽标的底部。我试过了`float:left`。

我想这很简单，但我做不到。我可能需要一个包装。我在这里做错了什么？

这是我的代码：

```
.logo {}

#topnav {
  width: 100%;
  vertical-align: middle;
}

nav ul {
  background: #FFFFFF;
  padding: 0 10px;
  list-style: none;
  position: relative;
  float: left;
  display: inline-table;
  font-size: 90%;
  color: #666666;
}
```

```
<div class="container">

  <div class="logo">
    <a href="/"><img src="assets/images/logo.png" alt="" width="250" height="120" /></a>

    <div class="topnav">
      <nav>
        <ul>
          <li><a href="http://www.kursatkarabulut.com/">Home</a></li>
          <li><a href="http://www.kursatkarabulut.com/fiap/">Photos</a></li>
        </ul>
      </nav>

    </div>
  </div>
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T19:41:42.143

只需添加`float: left`到这样的徽标类即可：http: [//jsfiddle.net/dssHf/](http://jsfiddle.net/dssHf/) 我还重组了您的 HTML 代码，因为它是无效的。

```
<div class="container">

    <div class="logo"><a href="/"><img src="http://placehold.it/250x120" alt="" /></a></div>  

    <div class="topnav"> 
        <nav>
            <ul>
                <li><a href="http://www.kursatkarabulut.com/">Home</a></li>
                <li><a href="http://www.kursatkarabulut.com/fiap/">Photos</a></li>        
            </ul>
        </nav>
   </div>
</div> 
```

```
.container {
    clear: both;
}
.logo {
    float: left;
}
.logo img {
    width: 250px;
    height: 120px;

}
.topnav {
    margin-left: 260px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T19:40:05.733

改成`.logo`这样：

```
.logo img {
    float:left;
} 
```

[http://jsfiddle.net/87KCt/4/](http://jsfiddle.net/87KCt/4/)

CSS 是级联样式表。这意味着一些事情，但这里的级联意味着类的样式仅`.logo`级联到`img`标签中。

# android - android中的传感器活动

> ID：15074905
> 
> 赞同：1
> 
> 时间：2013-02-25T19:31:09.190
> 
> 标签：android, android-sensors

我正在使用以下类从 android 手机读取加速度计数据：

```
public class AccelerometerData extends Activity implements SensorEventListener {

    //variables

    public AccelerometerData()
    {

        mSensorManager = (SensorManager) getSystemService(Context.SENSOR_SERVICE);
        mAccelerometer = mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);
        mSensorManager.registerListener(this, mAccelerometer, SensorManager.SENSOR_DELAY_NORMAL);
    }

    @Override
    public void onAccuracyChanged(Sensor sensor, int accuracy) {
    }

    @Override
    protected void onPause() {
        super.onPause();
        mSensorManager.unregisterListener(this);
    }

    @Override
    protected void onResume() {
        super.onResume();
        mSensorManager.registerListener(this, mAccelerometer, SensorManager.SENSOR_DELAY_NORMAL);
    }

    @Override
    public void onSensorChanged(SensorEvent event) {
        // TODO: my codes

        }
    }
} 
```

现在从我的主要活动类中，我正在调用该类来读取数据

```
AccelerometerData sbt = new AccelerometerData (); 
```

它显示以下消息，**不幸的是 AccelerometerData 已停止**。我是 android 开发的新手，不知道这里出了什么问题。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-08T17:44:27.530

您正在寻找的答案可能看起来有点像这样。MainActivity 拥有 AccelerometerData 类。

```
public class MainActivity extends Activity {
  private AccelerometerData ad;
  private TextView someTextView;

  @Override
  protected void onCreate(Bundle savedInstanceState) {
    // "this" allows 'ad' to make calls back to the MainActivity
    ad = new AccelerometerData((SensorManager)getSystemService(SENSOR_SERVICE), this);
    someTextView = (TextView)findViewById(R.id.my_text_view);
  }

  protected void onResume() {
    super.onResume();
    sensorHandler.onResume();
  }

  protected void onPause() {
    super.onPause();
    sensorHandler.onPause();
  }

  protected void setTextViewValue(float[] values){
    someTextView.setText( Float.toString(values[0]) );
  } 
```

然后在 AccelerometerData 类中，它可能看起来像这样。

```
public class AccelerometerData implements SensorEventListener {

  private final SensorManager mSensorManager;
  private final Sensor mAccelerometer;
  private final MainActivity ma;

  public AccelerometerData(SensorManager sm, MainActivity ma){
    mSensorManager = sm;
    mAccelerometer = mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);
    this.ma = ma;
  }

  protected void onResume() {
    mSensorManager.registerListener(this, mAccelerometer, SensorManager.SENSOR_DELAY_NORMAL);
  }

  protected void onPause() {
    mSensorManager.unregisterListener(this);
  }

  public void onAccuracyChanged(Sensor sensor, int accuracy) {
  }

  public void onSensorChanged(SensorEvent event) {
    // Here we call a method in MainActivity and pass it the values from the SensorChanged event
    ma.setTextViewValue( event.values );
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T19:35:16.110

你的课程不应该扩展 Activity。它不需要。它应该由某种活动拥有。

# javascript - 自动刷新 DIV，无 PHP

> ID：15074907
> 
> 赞同：0
> 
> 时间：2013-02-25T19:31:15.780
> 
> 标签：javascript, ajax

我想自动刷新此页面上的 div：http: [//americanart.si.edu/index_newsplash3r.cfm](http://americanart.si.edu/index_newsplash3r.cfm)（“探索的地方”区域）。现在我们有 3 种不同的图像和文本，当您重新加载页面时会任意显示。我希望这些元素能够自动更改，而无需重新加载页面。

该页面是在 Coldfusion 9 中完成的。大多数 AJAX 自动刷新代码假定您使用的是 PHP。

有没有人有我可以在没有 PHP 的情况下使用的代码链接？我认为它没有必要是 Coldfusion 代码。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T19:49:15.397

您可以设置对服务器端的 Ajax 调用以获取照片路径和文本。像这样的东西。

```
 $(function(){
        function FillDivAtRandom(current){
        setTimeout(function(){

            //pass the current place to explore id to the server so you don't get the same back, if none then return anyone.

            $.post("http://americanart.si.edu/Request/PlacesToExploreNext", current, function(data){

//fill the div with new data return from server
//you don't seem to have an ID on that div or elements so put one on it first then use it as a selector 

                //set the image
                $('#placestoexplore_image').attr('src', data.image);
                //set the text
                $('#placestoexplore_description').html(data.description);
            });

            //call the function again
            FillDivAtRandom(current);

        }, 10000);

        }
    } 
```

# javascript - Javascript问题，不知道什么时候改变状态

> ID：15074908
> 
> 赞同：0
> 
> 时间：2013-02-25T19:31:17.850
> 
> 标签：javascript

[http://jsfiddle.net/fqwvy/12/](http://jsfiddle.net/fqwvy/12/)

我想为“从”和“到”之间的字段“着色”，我设法让它为挑选的字段着色，但我真的不知道如何解决这个问题。

I also want to reset the css color, when something else is picked, is there an easy way to do this?

欢迎任何建议:)

```
 fiddle_requires_some_code_to_post(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T20:12:32.000

类似于以下内容：

```
 if(evF < evT){
            for(i=evF + 1; i < evT; i++){
              $("#color"+ i).css("background-color","red");
            }
         } 
```

然后你将有一个*else if*语句，并在 evT 大于 evF 时执行相反的操作。

此外，我没有看到任何代码在后续选择中清除了红色的背景颜色。补充一下就好了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T20:01:48.393

您需要`<tds>`在“from”和“to”之间循环并设置它们。您已经拥有这两个 ID，因此非常简单。如果未选择任何内容，您需要确保将“to”索引设置为“from”索引。

**演示：** [[[[![jsFiddle](../Images/827f57786617d886d70c0bce0ccca6b6.png)](http://jsfiddle.net/ThinkingStiff/8ErDu/)]]]

```
evT = end_time[to_color.value] ? end_time[to_color.value] : evF;

for( var index = evF - 1; index < evT; index++ ) {
    $("#color"+(index+1)).css("background-color","red"); 
}; 
```

要清除所有颜色，您可以执行以下操作，即“所有都`<tds>`以”`id`开头`color`：

```
$( 'td[id^="color"]' ).css( "background-color", "" ); 
```

# html - jsf对一些输入执行动作，切换页面和bean管理

> ID：15074911
> 
> 赞同：0
> 
> 时间：2013-02-25T19:31:25.167
> 
> 标签：html, jsf

我从页面“blabla.page1?id=8”开始

在该页面中，我需要从用户那里获取一些输入并执行一些任务（使用 Web 服务 - 没那么重要）

page1 由 bean1（声明为 @RequestScoped）管理，它包含根据给定 ID 的值。

我希望用户必须在执行任务之前单击一个按钮，然后

他将被移动到第 2 页，其中将打印任务结果以及一些

bean1 的其他值。

我现在拥有的是：

```
<h:form> Enter code
<h:inputText value="#{bean1.input}" />
<h:commandButton value="go" action="#{bean1.task}"/>
</h:form> 
```

和

```
public String sendCode()
{
    ...
    return "page2?faces-redirect=true"
} 
```

结果是：

打印了任务的结果，但由于 bean1 的内容被擦除（我相信这是因为请求已完成或其他原因），因此图片是默认项目。

建议？

# jquery - 在jquery中优化这个循环

> ID：15074913
> 
> 赞同：0
> 
> 时间：2013-02-25T19:31:28.227
> 
> 标签：jquery, loops, for-loop, fadein, fadeout

我需要优化以下代码。尝试使用 FOR，但图像一次显示全部。

使用了以下解决方案，但这没有优化。

```
$(document).ready(function(){

function fadeInOut () {

     var $element1 = $('a#imagem01');
     var $element2 = $('a#imagem02');
     var $element3 = $('a#imagem03');
     var $element4 = $('a#imagem04');
     var $element5 = $('a#imagem05');
     var $element6 = $('a#imagem06');

     $element1.fadeIn(2000, function () {
     $element1.fadeOut(2000, function () {

     $element2.fadeIn(2000, function () {
     $element2.fadeOut(2000, function () {

     $element3.fadeIn(2000, function () {
     $element3.fadeOut(2000, function () {

     $element4.fadeIn(2000, function () {
     $element4.fadeOut(2000, function () {

     $element5.fadeIn(2000, function () {
     $element5.fadeOut(2000, function () {

     $element6.fadeIn(2000, function () {
     $element6.fadeOut(2000, function () {

     fadeInOut();  

     });});});});});});});});});});});});

     }

     fadeInOut();

}); 
```

我需要帮助请！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T19:40:54.803

```
function fadeInOut() {
    var elements = ['a#imagem01', 'a#imagem02', 'a#imagem03', 'a#imagem04', 'a#imagem05', 'a#imagem06'];
    var index = 0;
    var loopForever = false;

    (function() {
        var selfFunction = arguments.callee;
        if((loopForever) && (index > elements.length-1)) index = 0;

        if(index <= elements.length-1) {
            $(elements[index++]).fadeIn(2000, function() {
                $(this).fadeOut(2000, selfFunction);
            });
        }
    })();
} 
```

未经测试，但沿着这些路线的东西应该可以解决问题。它基本上是一个遍历所有元素的回调循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T19:56:23.907

```
$(document).ready(function() {
    $("div").hide();
    var obj = [$("#o1"), $("#o2"), $("#o3"), $("#o4"), $("#o5")];
    var i = 0;
    var interval = setInterval(function() {
            obj[i].fadeIn(2000);
            obj[i].fadeOut(2000);
            i++;
            if (i > 4) {
                clearInterval(interval)
            }
        },
        4000
    );
}); 
```

我很确定上面的解决方案更好，但这[也可以](http://jsfiddle.net/qnx83/2/)..

# sql - 高效的sql素数算法

> ID：15074919
> 
> 赞同：1
> 
> 时间：2013-02-25T19:31:42.813
> 
> 标签：sql, postgresql, primes

我意识到 SQL 不是最好的语言，但这是一个家庭作业，要编写一个函数，该函数将接受参数 N 并找到 1 到 1000 万之间的素数 (N=10,000,000)。我正在使用 Postgresql。这是我的尝试：

```
--First create table Numbers with all numbers from 1 to 10000000 in it

create table numbers(number bigint);

--Use this function to fill it in:

create or replace function populate(top bigint) RETURNS void as $$
declare
i bigint:=1;
begin
while(i<=top) LOOP
insert into numbers(number) 
values(i);
i:=i+1;
END LOOP;
END; $$ LANGUAGE plpgsql;

--Function primes that returns all primes up to N

create or replace function primes(N bigint) RETURNS void AS $$

DECLARE
first bigint :=3;
last bigint :=2;

BEGIN
--create table t1 and insert all odd integers from 3 to N (and 2)

create table t1(a bigint);
INSERT into t1(a)
select number
from numbers
where (number%2 <> 0 or number = 2)
AND number<=N AND number<>1;

--Use Sieve of Erastothenes to find primes

while (last < sqrt(n)) LOOP

first:= (select * from t1 where a>last order by a limit 1);
last:= first* first;

--delete from list of primes all multiples of the primes in the range of first-last
-- (first run-through is primes in range of 3-9, second run-through would be primes in range of 11-121, etc.)

delete from t1
where a in (select n1.number * t.a
from t1 as t
inner join numbers as n1
on n1.number >= t.a
and n1.number<= n/t.a
where t.a>=first
and t.a<last);

END LOOP;
END; $$ LANGUAGE plpgsql; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T20:01:49.637

一个很好的主题回顾在这里：[https ://sqlserverfast.com/blog/hugo/2006/09/the-prime-number-challenge-great-waste-of-time/](https://sqlserverfast.com/blog/hugo/2006/09/the-prime-number-challenge-great-waste-of-time/)

但是对于一个家庭作业问题，你应该做你自己的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-28T11:01:00.607

我认为没有人真正检查或比较这些帖子中的大多数 - 我发布了几个糟糕的跑步者只是为了找出答案，但没有人打电话给他们。如果你倾向于比较，你会发现这个可读且快速：

```
IF (SELECT OBJECT_ID ('tempdb.dbo.#Numbers')) IS NOT NULL 
    DROP TABLE #Numbers;
CREATE TABLE #Numbers (Prime INT NOT NULL, Squared BIGINT PRIMARY KEY CLUSTERED);

DECLARE @MaxPrime INT = 1000000;

;WITH 
GroupingDriver AS 
(
    SELECT CAST('7' AS BIGINT) as Interval
    UNION ALL
    SELECT Interval+30
    FROM GroupingDriver
    WHERE Interval+30 < @MaxPrime
)
INSERT INTO #Numbers
SELECT 2 AS 'Number', 4 AS 'SquareNo'
UNION ALL
SELECT 3 AS 'Number', 9 AS 'SquareNo'
UNION ALL
SELECT 5 AS 'Number', 25 AS 'SquareNo'
UNION ALL
SELECT Prime.Number, Prime.Number * Prime.Number
FROM GroupingDriver
CROSS APPLY ( VALUES (GroupingDriver.Interval),  
                     (GroupingDriver.Interval+4),  
                     (GroupingDriver.Interval+6),  
                     (GroupingDriver.Interval+10),  
                     (GroupingDriver.Interval+12),  
                     (GroupingDriver.Interval+16),  
                     (GroupingDriver.Interval+22),  
                     (GroupingDriver.Interval+24) ) AS Prime(Number) 
WHERE Prime.Number < @MaxPrime
OPTION (MAXRECURSION 0); 
```

现在删除那些可以被其他素数整除的。我们只是使用平方作为比较的截止点。

```
SELECT Prime
FROM #Numbers n
WHERE NOT EXISTS (SELECT 1 
                  FROM #Numbers AS p 
                  WHERE p.Squared <= n.Prime 
                  AND n.Prime % p.Prime = 0);
 GO 
```

# javascript - 从表单条目中获取变量以添加到链接？

> ID：15074920
> 
> 赞同：1
> 
> 时间：2013-02-25T19:31:44.087
> 
> 标签：javascript, html

我正在尝试获取`input class=input type=text`添加到与页面地址无关的链接。结果`link+text-entry`将显示在 iframe 中。

我尝试了以下方法（我在这里找到了）：

```
function GET_IT() {
    var link = document.getElementById("LINKHERE");
    var hrefOrig = link.href;
    var dd = document.getElementById("TEXT_ID");
    dd.onchange = function(){ link.href = hrefOrig + dd.value; }
}
window.attachEvent("load", init, false); 
```

和：

```
<form target="IFRAME" method="get">
    <input class"input" type="text" size="25" id="TEXT_ID">
    <input type="submit" value "Go" onClick="javascript: function('GET_IT');">
</form> 
```

它所做的只是在 iFrame 中循环回输入所有内容的页面......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T19:40:22.927

您的 JavaScript 函数应如下所示：

```
function GET_IT() {
    var link = document.getElementById("LINKHERE");
    var hrefOrig = link.href;
    var dd = document.getElementById("TEXT_ID");

    //Change the source of the iFrame with the new HREF...
    document.getElementById('IFRAME ID').src = hrefOrig + dd.value;
} 
```

这是我可以在不查看更多代码的情况下给您的最佳答案。查看此链接以获取可能对您有所帮助的更完整示例：

[使用 Javascript 更改 iframe src](https://stackoverflow.com/questions/3730159/changing-iframe-src-with-javascript)

提琴手示例：

[http://jsfiddle.net/VkSRY/1/](http://jsfiddle.net/VkSRY/1/)

# sql - sql查询中的优化能走多远？

> ID：15074921
> 
> 赞同：0
> 
> 时间：2013-02-25T19:31:46.707
> 
> 标签：sql, performance, optimization, query-optimization, qsqlquery

我的背景是应用程序编程，并且有一条指导方针说在优化方面不要试图“超越”编译器，例如 JIT 等。
SQL查询也是这种情况吗？
我的意思是我已经读到 SQL 服务器为预期是最佳的查询（对吗？）执行某种执行计划，但是是否重新排列/修改实际查询？
还是希望程序员确保查询是最优的？例如先选择然后`join`等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T19:50:15.957

我的经历（包括为数据库服务器供应商工作）如下。

首先，数据库已经过高度优化，并编译为机器代码（通常用 C 或 C++ 编写）。在现代设备上，大多数操作都非常快，以至于不会注意到次优的执行。

但是，有一些地方需要注意。

如果您没有索引，那么数据库必须进行表扫描，这可能会很慢。许多人只将一个字段放入索引中，但您应该在应用时考虑多个字段。解释实用程序可以向您显示它找到的索引，并建议哪些索引会有所帮助。

共同相关的查询可能很慢。此外，当您有一个带有表达式的 where 子句时，数据库必须为每条记录评估它，并且不能使用索引。

打开连接很慢，所以一定要重用连接，而不是每次操作都重新打开它。

然而，今天最大的问题通常是数据库客户端和数据库服务器之间的网络通信。尽量减少网络转向数据库，并让数据库过滤结果，从而减少需要通过网络发送的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T19:55:10.657

有些事情你想让数据库做，有些事情只有人才能做。数据库管理不能留给数据库本身。人们必须参与。

数据库优化既是一门艺术，也是一门科学。数据库通过从已创建的索引中选择最佳索引，在优化查询方面做得很好。但是，数据库不会自动创建最佳索引。确定最佳索引是什么是 DBA/程序员的工作。

索引可能会使查询变得非常快，但它可能需要 1 GB 的内存。这不是您通常要添加的索引。但是，人们可以查看查询，并意识到只需稍微重新格式化查询即可。

了解数据本身的开发人员能够对使用哪些索引等做出正确的决定。检查您的索引以查看其中一些是否正在使用也很好。有时会创建索引但数据库从未使用过，因为不同的索引总是更好，或者永远不会运行需要索引的搜索。

**因此，数据库在如何根据已有的索引最有效地运行查询方面做出了重大决策，但我们的工作是分析数据库是否具有正确的索引并采取适当的措施。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T19:36:29.103

总的来说，这个建议是好的。用于创建优化引擎的人年开发时间比您要管理的要多得多。

也就是说，每个数据库都肯定存在缺陷。在某些情况下，您需要以某种方式表达某些逻辑，以使其更有效率。或者，您可能需要添加提示以获得正确的执行路径。

这是因为 SQL 的优化通常比其他语言的优化要困难得多。它需要了解数据和值的分布以得出最佳解决方案。

我的建议是以最能表达您想要完成的内容的方式编写查询，并使用传达查询目的的命名约定和缩进来编写它们。这样，如果您确实必须修改查询，您至少会了解它在做什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T19:43:24.553

在某些情况下，您自己的知识会派上用场。这里有些例子。

1 - 你想要这个月的一切。这很简单

```
where Year(datefield) = 2013
and month(datefield) = 'February' 
```

但这会跑得更快

```
where datefield >= '2013-02-01'
and datefield < '2013-03-01' 
```

2 - 你想要男孩叫帕特。性别被索引，名字没有。这更快

```
where sex = 'M'
and name = 'Pat' 
```

比这个

```
where name = 'Pat'
and sex = 'M' 
```

3 - 在案例结构中，首先列出最常发生的情况。这个

```
case when something that almost always happens then 'yes' else 'no' end 
```

会跑得比

```
case when something that almost never happens then 'no' else 'yes' end 
```

# javascript - 为什么这个功能在 jquery 1.9.1 中不再起作用？

> ID：15074930
> 
> 赞同：2
> 
> 时间：2013-02-25T19:32:05.040
> 
> 标签：javascript, jquery

我决定更新我所有的 jquery 以使用 jquery 1.9.1，但我可以找出这个脚本停止工作的原因。在所有其他 jquery 版本中工作正常。

```
// Typewriter function
$.fn.Typewriter = function Typewriter(opts) {
    var $this = this,
        defaults = {
            animDelay: 50
        },
        settings = $.extend(defaults, opts);
    var objDiv = document.getElementById(settings.div);
    $.each(settings.text, function (i, letter) {
        setTimeout(function () {
            $this.html($this.html() + (letter != '\n' ? letter : '<br />'));

            objDiv.scrollTop = objDiv.scrollHeight;
        }, settings.animDelay * i);
    });
};

// Call with 
// $('#divID').Typewriter({animDelay: 10,text: 'text to animate', div: 'divID'});

$('#outputDiv').Typewriter({
    animDelay: 10,
    text: 'Why does this not work in jquery 1.9.1? :( ',
    div: 'outputDiv'
}); 
```

Js小提琴包括在下面

[http://jsfiddle.net/T2AJ5/](http://jsfiddle.net/T2AJ5/)

编辑：

使用 chrome 开发工具，我在控制台读取错误：

> Uncaught TypeError: Cannot use 'in' operator to search '42' in 为什么这在 jquery 1.9.1 中不起作用？:(

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T19:43:19.020

一个不[`$.each`](http://api.jquery.com/jQuery.each/)用于循环字符串。我怀疑它以前是否正常工作。要快速修复，请将其更改为`settings.text.split('')`.

顺便说一句，附加到`innerHTML`可能很[麻烦](http://return-true.com/2012/01/html-compatible-jquery-typewriter/)。更好地使用[DOM](https://stackoverflow.com/a/11665782/1048572)，请参阅[此处](https://stackoverflow.com/a/13391131/1048572)了解包含在 jQuery 插件中的回调地狱 :-)

# asp.net - 如何发布 ASP.net 项目？

> ID：15074939
> 
> 赞同：0
> 
> 时间：2013-02-25T19:32:20.643
> 
> 标签：asp.net, publish

我正在尝试发布我在 Asp .net 中制作的网站项目。我将所有文件上传到我的 ftp 文件夹，但是当我访问我的网站[http://smile2013.host-ed.me/test/](http://smile2013.host-ed.me/test/)时，我收到此错误“错误 324 (net::ERR_EMPTY_RESPONSE)”

# sql - 更新没有产生正确的结果

> ID：15074941
> 
> 赞同：1
> 
> 时间：2013-02-25T19:32:29.703
> 
> 标签：sql, sql-server, tsql, sql-update

```
UPDATE @DList1
SET
Listed = a.Listed +  b.Listed,
Sold = b.Sold,
Volume = a.Volume + ISNULL(b.Volume, 0)
FROM @DList1 a, @DList2 b 
WHERE a.ItemID = b.ItemID 
```

在上面更新的语句中，列`[Listed]`没有正确更新`[Volume]`。

**列表2**

```
ItemID  Listed  Sold Volume
104     NULL    1    266000
778     1       1    5390
200     1       0    266000 
```

**列表1**

```
ItemID  Listed  Sold Volume
200     1       0    6395000
779     1       0    155000 
```

**更新后@Dlist1**

```
ItemID  Listed  Sold Volume
200     1       0    6661000
779     1       0    155000 
```

**方案：**

```
DECLARE @DList1 TABLE 
( 
    ItemID          NVARCHAR(20)
    , Listed        BIGINT
    , Sold          BIGINT
    , Volume        BIGINT
)

DECLARE @DList2 TABLE 
( 
      ItemID        NVARCHAR(20)
    , Listed        BIGINT
    , Sold          BIGINT
    , Volume        BIGINT
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T19:39:11.670

您需要将第一行更改为`UPDATE a`. 这样，您告诉 SQL 您要更新的记录是与by`DList1`匹配的记录（您正在更新您在下面提到的相同）。`DList2``ItemID``DList1`

此外，请使用连接语法，而不是`from a,b where...`因为它导致查询更具可读性和可维护性：

```
UPDATE a
SET
  Listed = a.Listed +  b.Listed,
  Sold = b.Sold,
  Volume = a.Volume + ISNULL(b.Volume, 0)
FROM @DList1 a
JOIN @DList2 b 
  on a.ItemID = b.ItemID; 
```

这是一个 SQLFiddle 链接：[http ://www.sqlfiddle.com/#!3/b8cfc/3](http://www.sqlfiddle.com/#!3/b8cfc/3)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T19:39:21.153

加入两个表并更新并确保使用`isnull()`or`coalesce()`如果您*`adding/concatenating`*使用*`nullable fields`*;

```
UPDATE a 
SET a.Listed = isnull(a.Listed, b.Listed),
    a.Sold = b.Sold,
    a.Volume = a.Volume + isnull(b.Volume, 0)
FROM @DList1 a join @DList2 b  on a.ItemID = b.ItemID 
```

## [SQL-FIDDLE 演示](http://sqlfiddle.com/#!3/f5fe0/5)

# android - Android 从 webview 下载附件

> ID：15074942
> 
> 赞同：1
> 
> 时间：2013-02-25T19:32:29.957
> 
> 标签：android

我浏览了所有帖子，但它对我不起作用。请帮忙。

我正在网络视图中打开我的电子邮件帐户。所以我想要打开附件的能力。

```
 wvA.setDownloadListener(new DownloadListener()
        {
            public void onDownloadStart(String url, String userAgent, String contentDisposition, String mimeType,
                    long size)
            {
                Intent viewIntent = new Intent(Intent.ACTION_VIEW);
                viewIntent.setDataAndType(Uri.parse(url), mimeType);

                try
                {
                    Log.i("Testing", "onDownloadStart");
                    startActivity(viewIntent);
                }
                catch (ActivityNotFoundException ex)
                {
                    Log.w("Testing", "Couldn't find activity to view mimetype: " + mimeType);
                }
            }
        }); 
```

# jquery - 试图在点击时调用 jQuery 插件函数

> ID：15074943
> 
> 赞同：0
> 
> 时间：2013-02-25T19:32:30.217
> 
> 标签：jquery

我正在尝试为我大学的新实习学习 jQuery 插件开发。

我一直在尝试构建一个插件，在单击时为元素提供随机背景颜色。

它在简单调用时起作用，即

```
$("#test").click(randomBackground); 
```

但是当我尝试通过点击调用它时，我无法让它工作。

这是我的jsFiddle。[http://jsfiddle.net/theluigi/yTy3C/18/](http://jsfiddle.net/theluigi/yTy3C/18/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T19:49:27.727

这对我有用。

```
$("#test").on('click', function(){$(this).randomize()}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T19:52:13.213

另一个版本……

```
 randomize = function () {
            var randomBackground = '#' + (Math.random() * 0xFFFFFF << 0).toString(16);
            $(this).css("background-color", randomBackground);
        };

    $("#test").click(randomize); 
```

# ios - 带有 AFNetworking 的 iOS POST 请求

> ID：15074944
> 
> 赞同：3
> 
> 时间：2013-02-25T19:32:30.957
> 
> 标签：ios, objective-c, web-services, afnetworking

我正在使用 AFNetworking 向 Web 服务发出 POST 请求

这是我需要发送的 JSON-

```
{
   “LinkedTo” : {
                            “IndividualStakeholder” : “”,
                            “GroupedStakeholder” : “”,
                            “LandParcelStakeholder” : “”,
                            “Communications” : “”,
                            “Team” : “”,
                            “Issue” : “”,
                            “Event” : “”
                        }
   “userId” : 170,
   “projectId”: 12
} 
```

这是我正在使用的代码 -

```
NSString *jsonData = [self JSONString:jsonData1]; 
```

此时的值`NSString *jsonData`是

> {\"LinkedTo\":{\"IndividualStakeholder\":\"\",\"GroupedStakeholder\":\"\",\"LandParcelStakeholder\":\"\",\"通讯\":\"\ ",\"团队\":\"\",\"问题\":\"\",\"事件\":\"\"},\"userId\":170,\"projectId\": 4}

```
NSURL *url = [[NSURL alloc]initWithString:@"https://somedomain.com/"];
AFHTTPClient *httpClient = [[AFHTTPClient alloc]initWithBaseURL:url];
NSDictionary *params = [NSDictionary dictionaryWithObjectsAndKeys:
                             jsonData, @"jsonText" , nil];
NSURLRequest *request = [httpClient requestWithMethod:@"POST" path:@"https://somedomain.com/api/stakeholders" parameters:params];

AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request 
    success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON){
        NSLog(@"Inside the success block %@",JSON);
    }
    failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON){
        NSLog(@"json text is: %@", JSON);
        NSLog(@"Request failed with error: %@, %@", error, error.userInfo);
    }];
[operation start];

-(NSString*)JSONString :(NSString*)aString{
    NSMutableString *s = [NSMutableString stringWithString:aString];
    [s replaceOccurrencesOfString:@"\"" withString:@"\\\"" options:NSCaseInsensitiveSearch range:NSMakeRange(0, [s length])];
    [s replaceOccurrencesOfString:@"/" withString:@"\\/" options:NSCaseInsensitiveSearch range:NSMakeRange(0, [s length])];
    [s replaceOccurrencesOfString:@"\n" withString:@"\\n" options:NSCaseInsensitiveSearch range:NSMakeRange(0, [s length])];
    [s replaceOccurrencesOfString:@"\b" withString:@"\\b" options:NSCaseInsensitiveSearch range:NSMakeRange(0, [s length])];
    [s replaceOccurrencesOfString:@"\f" withString:@"\\f" options:NSCaseInsensitiveSearch range:NSMakeRange(0, [s length])];
    [s replaceOccurrencesOfString:@"\r" withString:@"\\r" options:NSCaseInsensitiveSearch range:NSMakeRange(0, [s length])];
    [s replaceOccurrencesOfString:@"\t" withString:@"\\t" options:NSCaseInsensitiveSearch range:NSMakeRange(0, [s length])];
    return [NSString stringWithString:s];
} 
```

**服务器上的错误是**- URL 意外以“/stakeholders”结尾的请求格式无法识别。反序列化发布的 JSON 时，asp.net 中的错误是什么

我在客户端收到的输出是

请求失败并出现错误：Error Domain=com.alamofire.networking.error Code=-1011 “预期状态代码 [索引数：100（在 1 个范围内），索引：（200-299）]，得到 500”UserInfo=0x8e95e60 {NSErrorFailingURLKey= [https://somedomain.com/api/stakeholders](https://somedomain.com/api/stakeholders) , NSLocalizedDescription=预期状态码 [索引数: 100 (在 1 个范围内), 索引: (200-299)], got 500}, { NSErrorFailingURLKey = " [https ://somedomain.com/api/stakeholders](https://somedomain.com/api/stakeholders) "; NSLocalizedDescription = "预期状态码 [索引数：100（1 个范围内），索引：(200-299)]，得到 500"; } 2013-02-25 11:03:44.669 网络插件[60069:c07]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T23:21:28.573

Check out`AFHTTPClient`的`setParameterEncoding`方法，`AFJSONParameterEncoding`所以帖子实际上将有一个有效的 JSON HTTP 正文。[在这里](https://github.com/AFNetworking/AFNetworking/blob/master/AFNetworking/AFHTTPClient.h#L474-L492)声明和评论

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T19:49:44.487

我看到的是您发送`","`的不是诸如`"15", "18"`etc 之类的值。尝试使用正确的 JSONKit 函数修改您的 json 数据。

# php - 在 php curl 中设置多部分标头的 mime 类型而不传递文件

> ID：15074951
> 
> 赞同：1
> 
> 时间：2013-02-25T19:32:53.290
> 
> 标签：php, rest, curl

这可以做到吗？我看到像这样的例子

```
curl_setopt($ch, CURLOPT_POSTFIELDS, array(
  'variable' => '@path/to/file;type=application/json'
)); 
```

但是，如果我将字符串作为变量值传递，我将无法设置此 mime 类型。我与之交互的 API 明确要求将此 mime 类型设置为 application/json，但除非我使用文件，否则我似乎无法使用 curl 库设置它。例如：

```
curl_setopt($ch, CURLOPT_POSTFIELDS, array(
  'variable' => 'json_string;type=application/json'
)); 
```

只输出一个带有 type=application/json 的字符串（这是有道理的），以及类似的东西

```
curl_setopt($ch, CURLOPT_POSTFIELDS, array(
  'variable' => sprintf('@%s;type=application/json', $json_string)
)); 
```

无法将任何内容传递给服务器，表面上是因为它找不到文件（？）。

关于如何在不写出临时文件或编写我自己的帖子请求的情况下明确设置此 mime 类型的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T19:37:16.973

您确定要在 postfield 中设置 mime 类型吗？

您可能希望像这样在 http-request-header 中设置它：

CURLOPT_HTTPHEADER => array('Content-Type: application/json'),

# sql - SQLite：确定字符串的任何部分是否包含选择查询返回的任何一个（多个）字符串

> ID：15074953
> 
> 赞同：1
> 
> 时间：2013-02-25T19:33:02.493
> 
> 标签：sql, string, sqlite, full-text-search, sql-like

我无法弄清楚如何要求 SQLite 返回表中的所有条目，其中“列”包含在 select 语句的结果中找到的文本。

我希望它像这样工作，如果这有任何意义：

```
select * from table1`
where ("%" || (column) || "%") like in
("%" || (select different_column from table2) || "%")` 
```

任何帮助将非常感激。如果有人需要更多信息，请告诉我。

编辑：抱歉，我已将格式编辑为更具可读性，并在下面添加了更多细节。我还删除了我荒谬的难以理解的评论，而只支持编辑这个问题。

table1 (alerts) 包含一个名为“lookup_info”的列，其中存储了一个字符串。该字符串通常如下所示：

```
--- 
:account_description: Administrator 
:alertable_class: Computer 
:alertable_name: exampledotnet 
:network_account_type: 
:wmi:
:user: exampledomain\administrator 
```

table2 (devices) 包含一个名为“name”的列，其中存储了一个字符串。该字符串通常如下所示：

```
so-ws-rm101 
```

我想要做的是返回 table1（警报）中的所有条目，其中 table1 的“lookup_info”列不**包含**存储在 table2 的“名称”列下的 table2（设备）中的计算机名称。

基本上，有一些警报引用了不再存在的计算机名称。我想要那些警报。

谢谢你。

编辑：我创建了一个名为 alerts_fts 的 fts3 表，其中包含 alerts 表中所有条目的 lookup_info 列。这次我再次尝试使用全文搜索进行搜索。这是我正在使用的查询：

```
select *
  from alerts_fts 
  where alerts_fts.lookup_info match ( select group_concat(name, " OR ") 
                         from Devices
                         group by "x") 
```

这应该使查询看起来像：

```
select *
  from alerts_fts 
  where alerts_fts.lookup_info match (cw-ws-example OR so-p2-132-example OR 
                         ... OR so-p4-lastexample)
                         group by "x") 
```

自然，这仍然行不通。查询不返回任何内容。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T19:44:38.997

我认为你需要通过加入来做到这一点：

```
select t1.**
from table1 t1 join
     table2 t2
     on t1.column like '%'||t2.column||'%' 
```

如果有可能不止一场比赛，您需要添加`distinct`：

```
select distinct t1.*
. . . 
```

也许这就是你需要的：

```
select t1.**
from table1 t1 join
     table2 t2
     on t1.column like '%'||t2.columnA||'%' or
        t1.column like '%'||t2.columnB||'%' or 
        t1.column like '%'||t2.columnC||'%' or 
        . . . 
```

根据您的编辑，我认为您需要左外连接，然后检查不匹配：

```
select table1.*
from table1 left outer join
     table2
     on t1.column like '%'||t2.column||'%'
where t2.column is null 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T19:48:39.040

您不能将 Like 与 In 一起使用，但您可以执行以下操作，假设您想要匹配任一列：

```
Select Distinct table1.* 
From table1 
  Join table2 On 
    column1 like '%'||different_column||'%' 
    Or different_column like '%'||column1||'%' 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!7/9aa5d/2)

# python - 用于动态图像的 Amazon CloudFront 源服务器

> ID：15074956
> 
> 赞同：0
> 
> 时间：2013-02-25T19:33:08.580
> 
> 标签：python, amazon-web-services, amazon-s3, amazon-cloudfront

我需要根据 URL 参数（例如宽度、高度、适合、填充等）动态生成图像。到目前为止，我一直在使用 Google App Engine 的图像 API 服务 url 功能，但它并没有提供我需要的所有功能。

我的想法是让 AWS CloudFront 从源服务器提供我的图像。源服务器将从 S3 获取图像，使用 GraphicsMagick 处理它们（因为它比 ImageMagick 快得多），然后提供它们。

我不太确定我应该使用什么服务器基础架构，因为我的服务器只会做一件事：提供图像。使用普通堆栈似乎太多了，我真的很关心速度。因为我来自 Django 背景，所以我一直在考虑 lighttpd + python 中的 WSGI 应用程序。

使用 python 自己的 web 服务器 BaseHTTPServer 而不是 lighttpd 会更好吗？任何关于服务器堆栈的想法都会很棒，甚至是另一个图像处理系统。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T14:07:26.630

你看过这个帖子吗？

[http://aws.amazon.com/cloudfront/dynamic-content/](http://aws.amazon.com/cloudfront/dynamic-content/)

# c++ - Unresolved Externals - 静态类中的枚举

> ID：15074958
> 
> 赞同：1
> 
> 时间：2013-02-25T19:33:13.213
> 
> 标签：c++, enums, linker

我不知道为什么我的代码不起作用，刚开始学习 C++ 和所有命名空间/头文件等。

我有一个主要功能：

```
#include "stdafx.h"
#include "Game.h"

int _tmain(int argc, _TCHAR* argv[])
{
    Game::Start();
    return 0;
} 
```

它调用游戏中的静态函数来启动。

```
#include "stdafx.h"
#include "Game.h"
void Game::Start(void)
{
    _gameState = ShowingMenu;

    while(IsExiting())
    {
        switch(_gameState)
        {
            case ShowingMenu:
                ShowMenu();
                break;

        }
    }
} 
```

现在，无论我在哪里使用枚举 GameState（如您从标题中看到的那样），我都会得到：

```
Unresolved external symbol private static enum Game::GameState Game::GameState 
```

这是游戏.h

```
#pragma once

class Game {
public:
    static void Start();
private:
    static void GameLoop();
    static bool IsExiting();
    static void ShowMenu();
    enum GameState { Uninitialized, ShowingMenu, Dealing, DealerTurn, PlayerTurn, Betting, Exiting };
    static GameState _gameState;
}; 
```

不知道为什么这不起作用，唯一的解决方案是取出整个枚举。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T19:36:38.577

确保`_gameState`在单个翻译单元中定义（可能在 内`Game.cpp`）：

```
Game::GameState Game::_gameState; 
```

您的`static GameState _gameState;`类定义中的 只是一个声明，因此也必须定义该成员。有关更多详细信息，请参阅[C++ 常见问题解答](http://www.parashift.com/c++-faq/link-errs-static-data-mems.html)。

# php - PHP“加载的配置文件”在哪里设置？

> ID：15074960
> 
> 赞同：1
> 
> 时间：2013-02-25T19:33:19.987
> 
> 标签：php, apache

据我了解，php.ini 文件的默认位置是 /etc/php.ini。但是，在我的服务器上 php.ini 位置设置为从不同的目录加载。我在哪里设置 php.ini 应该从哪里加载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T19:37:20.657

> PHP_INI_SYSTEM 可以通过将 PHP_INI_SYSTEM 放在 httpd.conf 中的每个目录块中来配置每个目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T20:07:39.257

在脚本中使用以下代码（如果可能，请使用空白测试 php 文件）：

```
<?php
echo phpinfo();
?> 
```

在浏览器中加载此脚本，然后搜索“加载的配置文件”，其中将包含 php.ini 文件的确切位置。

# cocos2d-iphone - 转移到 spritesheets 会导致闪烁，尽管挤出

> ID：15074966
> 
> 赞同：1
> 
> 时间：2013-02-25T19:33:41.777
> 
> 标签：cocos2d-iphone, sprite-sheet, texturepacker

我有一个 cocos2d iOS 游戏，它最初是用直接图像（没有精灵表）构建的。我正在迁移到 spritesheets，并使用 Texture Packer 来生成 spritesheets。我有几个元素彼此相邻呈现，在初始的非 spritesheet 模式下运行良好。一旦我将这些图像放入精灵表中，图像的边界就会出现一些闪烁。我对每个 spritesheet 使用了 2 个像素的拉伸，并且消除了一些闪烁，但仍然有一些。我有几个问题：

1.  闪烁是否可能是由于在图像上运行 ImageOptim 造成的？我不认为这是问题所在，因为我记得即使使用优化的图像，也不会出现闪烁。
2.  由于不同的 RGB 设置，一些彼此相邻的图像位于不同的 spritesheet 中 - 这会导致问题吗？我可以将相邻的图像放入同一个精灵表中，但这会在内存方面造成一些开销，因为我可能会放置一个不透明的图像以及一个带有 RGBA4444 的半透明图像（而不是 RGB565 用于不透明） .
3.  我假设不需要更改渲染逻辑。渲染图像重叠（如一些消除闪烁的响应所建议的那样）是否有可能解决问题？

# c++ - 在 VS 2005 和 2010 中调试 VC6 代码时大多数变量不显示

> ID：15074968
> 
> 赞同：2
> 
> 时间：2013-02-25T19:33:46.930
> 
> 标签：c++, visual-studio-2010, visual-c++-6

在调试使用 Visual Studio 6 构建的代码时，Visual Studio 2010 只能显示局部具体变量（即 int、bool 等）的值。

Visual Studio 6 构建正在生成一个 pdb 文件，按照以下问题的建议选择“调试信息”和“Microsoft 格式”：[Browse VC6 DLL variables content (DEBUG)](https://stackoverflow.com/questions/1225163/browse-vc6-dll-variables-content-debug)

例如，在下面的代码中，我可以看到的唯一变量是“var”。“看到”是指变量出现在“Locals”或“Auto”窗口中并带有一个值，我在工具提示中得到一个值，或者当我在 Watch 窗口中输入变量名称时解析变量名称。

似乎我看不到“num”，因为它是函数的参数，我看不到“m_member”，因为它是类成员。我看不到“stackMem”或“heapMem”，因为它们不是简单的类型。

```
class MyClass
{
public:
MyClass() : m_member(0) {}
int aMethod(int num)
{
    m_member = m_member + num;
    return m_member;
}
private:
int m_member;
};

void main()
{
MyClass* heapMem = new MyClass();
MyClass stackMem;

int var = heapMem->aMethod(5);
var = stackMem.aMethod(10);
} 
```

我可以做些什么来更好地在 VS 2010 等较新的调试环境中调试旧的 VC6 代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T19:43:47.600

我不记得以前 VC6 是如何工作的。但在 VS2005 和更新的 Visual Studio 版本中，调试时可以停靠不同的视图（选项卡/窗口）。

Watch、Auto（自动变量）、Locals、Callstack...

当您开始调试时，它们（应该）可从“调试”菜单中获得。

# iphone - 如何在 ios 6 上将导航栏标题居中

> ID：15074969
> 
> 赞同：0
> 
> 时间：2013-02-25T19:33:48.690
> 
> 标签：iphone, objective-c, ios5, ios6

[> 插图胜过许多文字](http://img16.imageshack.us/img16/8717/navigationcontrollertit.png)

如您所见，我的标题左侧有 217 像素，另一侧有 242 像素。

我只在 iOS 6 上遇到这个问题，标题完全以旧版本为中心。这是我制作导航栏的方式：

```
- (void)initNavigationBar
{
    //Background
    UIImage *navBarBackground = [UIImage imageNamed:@"navigationBar"];
    [[UINavigationBar appearance] setBackgroundImage:navBarBackground forBarMetrics:UIBarMetricsDefault];

    if ([[[UIDevice currentDevice] systemVersion] floatValue] >= 6.0)
        [[UINavigationBar appearance] setShadowImage:[[UIImage alloc] init]];

    //Title
    NSMutableDictionary *titleBarAttributes = [NSMutableDictionary dictionaryWithDictionary: [[UINavigationBar appearance] titleTextAttributes]];
    [titleBarAttributes setValue:[UIFont fontWithName:@"NeutrafaceText-Bold" size:20] forKey:UITextAttributeFont];
    [titleBarAttributes setValue:[UIColor colorWithRed:17.0/255.0 green:83.0/255.0 blue:144.0/255.0 alpha:1] forKey:UITextAttributeTextShadowColor];
    [titleBarAttributes setValue:[NSValue valueWithUIOffset:UIOffsetMake(0, 1.5)] forKey:UITextAttributeTextShadowOffset];

    [[UINavigationBar appearance] setTitleTextAttributes:titleBarAttributes];    

    //Buttons
    //Back
    NSMutableDictionary *attributes = [NSMutableDictionary dictionaryWithDictionary: [[UIBarButtonItem appearance] titleTextAttributesForState:UIControlStateNormal]];
    [attributes setValue:[UIFont fontWithName:@"NeutrafaceText-Demi" size:14] forKey:UITextAttributeFont];
    [attributes setValue:[UIColor colorWithRed:161.0/255.0 green:203.0/255.0 blue:238.0/255.0 alpha:1] forKey:UITextAttributeTextColor];
    [attributes setValue:[UIColor colorWithRed:10.0/255.0 green:54.0/255.0 blue:92.0/255.0 alpha:1] forKey:UITextAttributeTextShadowColor];
    [attributes setValue:[NSValue valueWithUIOffset:UIOffsetMake(0, 1.5)] forKey:UITextAttributeTextShadowOffset];

    [[UIBarButtonItem appearance] setTitleTextAttributes:attributes forState:UIControlStateNormal];
    UIImage *backButtonBackground = [[UIImage imageNamed:@"backButtonBackground"] resizableImageWithCapInsets:UIEdgeInsetsMake(1, 12, 1, 12)];
    [[UIBarButtonItem appearance] setBackButtonBackgroundImage:backButtonBackground forState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
    [[UIBarButtonItem appearance] setBackButtonTitlePositionAdjustment:UIOffsetMake(2.5f, 0.0f) forBarMetrics:UIBarMetricsDefault];

    //Right
    UIImage *rightButtonBackground = [[UIImage imageNamed:@"rightButtonBackground"] resizableImageWithCapInsets:UIEdgeInsetsMake(1, 10, 1, 10)];
    [[UIBarButtonItem appearance] setBackgroundImage:rightButtonBackground forState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
} 
```

我真的不知道我做错了什么，如果有人有任何想法......

其他问题，你知道我如何设置我的标题的位置（这次在 y 轴上）？

**编辑：可以在[这里](https://stackoverflow.com/a/13218421/2108210)找到一个临时解决方案。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-03T00:08:36.870

我有同样的问题，我的解决方案是消除阴影偏移。我的意思是，这条线：

```
[titleBarAttributes setValue:[NSValue valueWithUIOffset:UIOffsetMake(0, 1.5)] forKey:UITextAttributeTextShadowOffset]; 
```

我实际上并没有单独设置我的标题属性，而是使用这个代码块（并抑制注释行）：

```
[[UINavigationBar appearance] setTitleTextAttributes:
     [NSDictionary dictionaryWithObjectsAndKeys:
      [UIColor colorWithRed:248.0/255.0 green:235.0/255.0 blue:227.0/255.0 alpha:1.0], UITextAttributeTextColor,
      [UIColor colorWithRed:67.0/255.0 green:32.0/255 blue:12.0/255.0 alpha:0.8], UITextAttributeTextShadowColor,
      //CGSizeMake(0, 1), UITextAttributeTextShadowOffset,
      [UIFont fontWithName:@"DIN-Bold" size:16.0], UITextAttributeFont,nil]]; 
```

我不知道为什么，但这解决了问题，并且标题在 iOS6 中看起来很完美。标题甚至有一个默认的阴影偏移。我真的希望这对某人有所帮助。这个简单的问题让我发疯了好几个小时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T19:38:16.240

我建议改变你的`resizableImageWithCapInsets`价值观，看看你的标题是如何向左或向右移动的。我认为正在发生的事情是您的文本*居中*“在文本区域内”，但是由于您的可调整大小的图像，文本区域正在偏移。

# prolog - 关于 Prolog 的几个基本问 题

> ID：15074972
> 
> 赞同：1
> 
> 时间：2013-02-25T19:34:01.603
> 
> 标签：prolog

我在 Prolog 中非常基础，并且刚刚开始学习它。无论如何，我正在使用 Mac 并为 Mac 下载了 SWI-Prolog/XPCE 6.3.12。该软件看起来像 CMD 和终端。所以现在我想我必须创建一个源文件。.pl 格式对吗？

我应该在哪里保存这个文件？如何加载它？那么这可以成为我程序的来源吗？是正确的吗？

```
edge(a,b).
edge(a,e).
edge(b,d).
edge(b,c).
edge(c,a).
edge(e,b). 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T19:46:09.260

将此文件保存在您想要的任何位置，调用它（例如）`edges.pl`，在同一目录中启动 Prolog 解释器并输入`[edges].`（包括句点）。

# java - 无法在服务器中制作简单的显示richfaces

> ID：15074973
> 
> 赞同：0
> 
> 时间：2013-02-25T19:34:01.697
> 
> 标签：java, jsf, jboss, richfaces

请你帮助我好吗。我提出了这个请求范围的托管 bean，但是当我单击 sayHello 时，在日志的控制台中它只显示 hello，即使我在字段“chaine”中输入了一个值

```
public class BackTheme {

private String chaine;

public BackTheme() {

}

public void sayHello(){
    System.out.println("hello "+chaine);
}

public String getChaine() {
    return chaine;
}

public void setChaine(String chaine) {
    this.chaine = chaine;
}
} 
```

HTML 代码如下：

```
<div class="gt-form gt-content-box"> 
    <h:inputText  value="#{backTheme.chaine}" />
    <h:form >        
     <a4j:htmlCommandLink actionListener="#{backTheme.sayHello}" value="Download"/>
    </h:form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T19:42:52.307

提交表单时，只会提交表单中包含的数据。但是，您的输入组件在表单之外，因此不会在表单提交中获取其值。如果您还想将其值发送到服务器，则输入组件应采用与命令按钮/链接相同的形式。

```
<h:form>        
  <h:inputText value="#{backTheme.chaine}" />
  <a4j:htmlCommandLink actionListener="#{backTheme.sayHello}" value="Download"/>
</h:form> 
```

* * *

**Unrelated** to the concrete problem, I'm not sure what the concrete functional requirement of this all is, but I would only warn that it's not possible to download individual files using ajax. Your command link has namely the label "download" which suggests that you're in your real code attempting to download a file. Perhaps this is just carelessness, but you never know; just sayin'. If that's indeed the case, replace the `<a4j:htmlCommandLink>` by `<h:commandLink>` in order to achieve a successful file download. See also [How to provide a file download from a JSF backing bean?](https://stackoverflow.com/questions/9391838/how-to-stream-a-file-download-in-a-jsf-backing-bean/9394237#9394237)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T19:43:55.417

your inputText needs to be in the form.

# javascript - 尽管内容不适合页面，但画布未显示滚动条

> ID：15074974
> 
> 赞同：0
> 
> 时间：2013-02-25T19:34:07.007
> 
> 标签：javascript, html, canvas

我在页面中显示一个画布，画布中显示的内容的分辨率很高，它并不完全适合他的页面，但滚动条没有出现，因此无法向上/向下滚动（现在宽度没有问题）。我尝试将显示更改为“阻止”，但这没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T03:10:14.123

您始终可以添加一个 jqueryUI 滚动条并滚动浏览您的高画布。

这是代码和小提琴：http: [//jsfiddle.net/m1erickson/a9KDB/](http://jsfiddle.net/m1erickson/a9KDB/)

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>

<style>
body{ background-color: ivory; }
div, canvas {
    position:absolute;
}
.wrapper {
    top:10px;
    left:10px;
    width: 300px;
    height: 300px;
    border: 2px solid black;
    margin:30px 0 2;
    overflow: hidden;
    background-color:green;
}
.vertical-scroll {
    left:320px;
    top:10px;
    border: 1px solid green;
    width: 20px;
    height: 300px;
}
.vertical-scroll div.bar {
    left:0px;
    top:0px;
    width: 20px;
    background-color: blue;
    height: 20px;
}
#mycanvas {
    left:0px;
    top:0px;
}

</style>

<script>
    $(function(){

        var canvas=document.getElementById("mycanvas");
        var ctx=canvas.getContext("2d");

        var wrapper;
        var canvasHeight;
        var vScrollHeight;
        var canvasWrapperHeight=300;

        $(".bar").draggable({
            containment: "parent"
        });

        $(".bar").on("drag", function (event, ui) {
            var ctop=(-ui.position.top * canvasHeight / canvasWrapperHeight);
            canvas.style.top = ctop + "px"
        });

        var img=new Image();
        img.onload=function(){
          canvas.width=this.width;
          canvas.height=this.height;
          canvasHeight=this.height;
          vbarHeight=canvasWrapperHeight*canvasWrapperHeight/canvasHeight;
          document.getElementById("vbar").style.height=vbarHeight+"px";
          ctx.drawImage(this,260,0,300,this.height,0,0,300,this.height);
        }
        img.src="http://sciencedude.blog.ocregister.com/files/2008/02/zot1-copy.jpg";

    }); // end $(function(){});
</script>

</head>

<body>
    <div class="wrapper" id="wrap1">
        <canvas id="mycanvas" width="300px" height="300px" />
    </div>
    <div class="vertical-scroll" id="vscroll">
        <div class="bar" id="vbar"></div>
    </div>
 </body>
</html> 
```

# javascript - 使用jquery遍历目录xml结构

> ID：15074975
> 
> 赞同：-1
> 
> 时间：2013-02-25T19:34:14.600
> 
> 标签：javascript, jquery, xml, nested

我有一个这样的目录结构：

```
Root
 |
 |-Folder 1
 |   |
 |   |--Multiple files.
 |   |
 |   |--Folder 1.a
 |         |
 |-Files   |
           |----Multiple files.
           |----Further tree of more folder's and files. 
```

它保存在 XML 文件中，如下所示：

```
<dir name="root">
 <dir name="Folder 1">
  <file name="file1"/>
  <file name="file2"/>
  <dir name="folder1.a>
   <file name="innerfile"/>
  </dir>
 </dir>
 <dir name="folder2">
  .... so on .... 
```

我想使用 jQuery 遍历这棵树并打印使用缩进的目录结构，如下所示：

```
Root
  Folder1
   file1
   file2
   Folder1.a
    inner file
  Folder2
    file N
    folder N 
       ..... 
```

我使用的代码如下

```
 $(document).ready(function()
   {
     $.ajax({
       type: "GET",
       url: "root.xml",
       dataType: "xml",
       success: parseXml
     });
   });

   function parseXml(xml)
   {
    $(xml).find("directory").each(function(){
       $("#output").append("<a href = \"" + $(this).attr("absolutePath") + "\">" +                                                          $(this).attr("name") + "</a><br>");
       $(this).find("file").each(function()
       {
         $("#output").append("&nbsp;&nbsp;&nbsp;&nbsp;<a href = \"" + $(this).attr("absolutePath") + "\">" + $(this).attr("name") + "</a><br>");
       });
       $('#output').append("<br>");
     }); 
```

我的代码正在运行，但嵌套文件夹的文件是多余的，因为我多次打印子目录中的所有文件，我希望一个文件只列出一次，但不知道怎么可能？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T19:57:48.033

假设您可以获得您正在查看的节点的级别，您可以使用一系列 2 列表来执行此操作，其中每个表的第一个单元格是一个等于当前级别 * 您想要间隔的像素数的间隔通过，像这样：

```
$("output").append("<table><tr><td style=\"width: " + (myLevel * 12).ToString() + "px;\" /><td><a href = \"" + $(this).attr("absolutePath") + "\">" + ... 
```

最终结果将如下所示：

```
<table><tr><td style="width: 0px;" /><td>Root</td></tr></table>
<table><tr><td style="width: 12px;" /><td>Folder1</td></tr></table>
<table><tr><td style="width: 24px;" /><td>file1</td></tr></table>
<table><tr><td style="width: 24px;" /><td>file2</td></tr></table>
<table><tr><td style="width: 24px;" /><td>Folder1.a</td></tr></table>
<table><tr><td style="width: 36px;" /><td>inner file</td></tr></table>
<table><tr><td style="width: 12px;" /><td>Folder2</td></tr></table>
<table><tr><td style="width: 24px;" /><td>filen</td></tr></table>
<table><tr><td style="width: 24px;" /><td>Folder1.n</td></tr></table> 
```

抱歉，我对 xml 部分无能为力，但希望这会让您朝着正确的方向前进。

# python - 在python的引号内放置一个变量

> ID：15074977
> 
> 赞同：1
> 
> 时间：2013-02-25T19:34:31.297
> 
> 标签：python, string, variables, quotes

我刚开始学习 Python。我试图让用户输入一个数字基数和一个数字，并将其转换为十进制。

我一直在尝试像这样使用内置的 int 函数：

```
base = raw_input("what number base are you starting with?  \n")
num = raw_input("please enter your number:  ")
int(num,base) 
```

我的问题是，当您使用该 int 函数时，您转换的数字需要用引号括起来，如下所示：`int('fff',16)`

当我使用变量时，我该如何做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T19:38:04.743

不需要报价。引号不是字符串的一部分。

```
>>> int('fff',16)
4095
>>> da_number = 'fff'
>>> int(da_number, 16)
4095 
```

但是，您需要将基数转换为整数。

```
>>> base = '16'
>>> int(da_number, base) # wrong! base should be an int.
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: an integer is required
>>> int(da_number, int(base)) # correct
4095 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T19:39:20.113

结果`raw_input()`将是一个字符串，我认为你的问题实际上`base`是当你需要它是一个整数时它仍然是一个字符串。

尝试以下操作：

```
base = raw_input('base? ')
num = raw_input('num? ')
print int(num, int(base)) 
```

例如：

```
>>> base = raw_input('base? ')
base? 16
>>> num = raw_input('num? ')
num? fff
>>> print int(num, int(base))
4095 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-25T19:38:37.070

问题不在于引号。问题在于数据*类型*。 `int`with a base 需要一个**整数基数**和一个**字符串 number**。所以，在你的情况下，你会使用：

```
int(num,int(base)) 
```

这将获取从中返回的*字符串*`raw_input`，并从字符串构造一个合适的基础，同时按照函数的要求作为`base`字符串保留。`num``int`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-25T19:44:41.520

引号告诉 Python 这些字符应该被解释为字符串的内容，而不是语言语法。

当你有一个变量时，Python 已经知道内容是一个字符串。您不仅不需要引号，而且添加它们会使 Python 误以为您想要一个包含变量名称的字符串。

所以，这两个：

```
int('fff',16) 
```

和这个：

```
someNumber = 'fff'
int(someNumber,16) 
```

`int()`就功能而言，正在做同样的事情。

话虽如此，`int()`可以将字符串或数字作为值，但必须有一个数字作为基数。所以，由于`raw_input`总是返回一个字符串，你需要做更多类似的事情：

```
base = raw_input("what number base are you starting with?  \n")
num = raw_input("please enter your number:  ")
int(num,int(base)) 
```

# forms - 通过 HTML 或 JavaScript 在 Web 表单上禁用自动填充？

> ID：15074985
> 
> 赞同：25
> 
> 时间：2013-02-25T19:35:20.197
> 
> 标签：forms, caching, browser, autofill, clear-cache

有没有办法通过 HTML 或 JavaScript 在表单字段上禁用 Chrome 和其他浏览器的自动填充？我不希望浏览器自动填写以前浏览器用户的表单答案。

我知道我可以清除缓存，但我不能依赖反复清除缓存。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-25T19:47:56.543

您可以通过添加`autocomplete="off"`到输入来在 HTML 的输入级别执行此操作。

[http://css-tricks.com/snippets/html/autocomplete-off/](http://css-tricks.com/snippets/html/autocomplete-off/)

你也可以通过 JS 来实现，例如：

```
someForm.setAttribute( "autocomplete", "off" ); 
someFormElm.setAttribute( "autocomplete", "off" ); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-12-06T08:02:26.170

事实上，自动完成关闭并不总是适用于较新的浏览器。例如，在 Chrome 中，如果设置了 autofill 属性，它会被忽略。见链接：[http ://caniuse.com/#feat=input-autocomplete-onoff](http://caniuse.com/#feat=input-autocomplete-onoff)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-05-16T16:02:04.760

jQuery一：

```
$(".indication-checkbox").attr("autocomplete", "off"); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-03-20T07:55:04.387

我遇到过同样的问题。想要坚持使用 HTML 解决方案（我不喜欢肮脏的 JS 变通办法）。唯一对我有用的是当我将输入的 ID 和/或名称更改为不常用的关键字时。

[从这个 Laracast 线程](https://laracasts.com/discuss/channels/vue/autocomplete-off-not-working)中阅读 Talinon 的回答：

> 我曾经在文本字段上遇到过这个问题。无论我做什么，Chrome 都坚持自动填充/完成。我最终发现更改元素的 id/name 解决了这个问题。就像 Chrome 有一些它寻找的硬编码关键字并致力于自动填充它们。如果问题仍然存在，请尝试将 id/name 更改为不包含“title”或“address”等的内容。

长话短说：

```
<form>
    <input type="email" name="fem" />
    <input type="password" name="fpass" autocomplete="new-password" />
</form> 
```

更长的故事（解释为什么这样做）：[禁用自动完成表单输入与 HTML](https://www.guidearea.com/disabling-autocomplete-on-form-inputs-with-html/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-17T20:52:18.553

我正在使用 onfocus 和 onblur，如下所示：

```
<form>
  <p>Type something in both fields and hit submit button, then refresh this page and click on the first field. In chrome, you will get autocomplete on the first field, but if you select it it will populate only that first field!</p>
  <input type="text" name="first" placeholder="with autocomplete" /> <br/>
  <input type="text" name="second" placeholder="without autocomplete"
  readonly="readonly" 
  onfocus="if (this.hasAttribute('readonly')) {this.removeAttribute('readonly');}"
  onblur="if (!this.hasAttribute('readonly')) {this.setAttribute('readonly','readonly')};"
  /><br/>
  <button type="submit">Send</button>
</form>
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-07-26T11:16:29.253

您可以使用以下代码：

```
$(".TextID").attr("autocomplete", "off"); //disable input level 
```

# macos - 使用 homebrew 从 python2.7 Mac 升级到 python3.3

> ID：15074990
> 
> 赞同：3
> 
> 时间：2013-02-25T19:35:35.710
> 
> 标签：macos, python-2.7, python-3.x, homebrew

我正在使用山狮。我已经安装`python 3.3`并且也有`python 2.7`. 我用的是自制的。

打开python时，我得到：

`Python 2.7.3 (v2.7.3:70274d53c1dd, Apr 9 2012, 20:52:43) [GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin Type "help", "copyright", "credits" or "license" for more information.`

我试过这样做：

`brew switch python3 3.3.0.`

仍然没有工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-19T09:47:10.270

一、你的观察

> 我试过这样做：
> 
> 酿造开关 python3 3.3.0。
> 
> 仍然没有工作。有任何想法吗？

不是错误，而是功能。Homebrew 的想法是让 Python 2.7.x 和 3.x 并存。显然，不能都是python，所以Python 3就是python3。使用 switch 命令，您只需切换您正在使用的 brew 的 python3 包的版本（即您的 python3 将指向 Python 3.3.0），但它对 Mac 或您的路径没有任何作用。现在，所有生成的二进制文件都是 /usr/local/bin 中的符号链接，所以理论上你可以手动更改所有 python 符号链接以指向 python3 而不是 Python 2。不过，我不建议这样做，因为它可能会破坏自制软件完全，或者将在未来的 Python 更新中恢复。

相反，使用优秀的 virtualenv：“ [http://www.virtualenv.org/](http://www.virtualenv.org/) ”。

1.  安装它： pip3 install virtualenv

2.  您将看到消息“正在将 virtualenv 脚本安装到 /usr/local/share/python3”，因此请将其添加到您的 PATH 中。

3.  如果您在没有任何参数的情况下调用 virtualenv，您将收到一条帮助消息。除其他外，您将看到：

    -p PYTHON_EXE, --python=PYTHON_EXE 要使用的 Python 解释器，例如 --python=python2.5 将使用 python2.5 解释器来创建新环境。默认是安装 virtualenv 的解释器 (/usr/local/Cellar/python3/3.3.0/bin/python3.3)

所以你很幸运，你想要的python已经是默认的了。所以

1.  virtualenv 我的项目
2.  光盘我的项目
3.  源箱/激活
4.  Python

    darwin 上的 Python 3.3.0（默认，2013 年 3 月 18 日，16:59:10）[GCC 4.2.1 Compatible Apple LLVM 4.2 (clang-425.0.24)]

这有帮助吗，还是因为某种原因你不能使用 virtualenv？

如果 virtualenv 不是一个选项，并且您肯定想要 Python 3 并且只需要 Python 3 来满足您在 Mac 上的所有 Python 需求，您可能会考虑不使用自制的 python，而是安装 python.org 发行版。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T19:40:51.420

您的环境仍然引用 Mac OS 预装的默认 python 版本。

根据任一 python 的安装位置，您可能希望为不同的 python 安装设置不同的路径。查看这些链接以获取更多信息：

*   [不要卸载mac安装的python](https://stackoverflow.com/questions/1218891/multiple-versions-of-python-on-os-x-leopard)
*   [在mac上维护多个python版本](http://sevas.github.com/2011/06/14/multiple-python-osx.html)
*   [更改默认 python 版本](https://superuser.com/questions/35256/how-can-i-change-the-default-python-version-on-snow-leopard)

# netty - 如何在我的 NioServerSocketChannelFactory 实例中调用 NioWorkerPool 上的 rebuildSelectors()？

> ID：15074991
> 
> 赞同：1
> 
> 时间：2013-02-25T19:35:39.760
> 
> 标签：netty, cpu-usage

我试图找出在 3.6.3 中调用 NioWorkerPool.rebuildSelectors() 的位置。

在将 Netty 从 3.5.11 升级到任何 3.6.x 版本后，只要我们通过基于 Nio 的 ServerSocket 通道工厂执行任何通信，就会遇到 CPU 问题。默认池中的所有 200 个线程开始以大约 45-55% 的 CPU 运行并且永远不会返回 - 所有堆栈都显示它们位于 select()...poll() 逻辑中。

我的问题是，我不知道什么时候应该调用它，也不知道它暴露在哪里。NioWorkerPool 在 channelfactory 实例中是私有的。在我的 ChannelFactory 上访问 NioWorkerPool 的推荐方法是什么 - 假设这是进行此调用的地方。

谢谢，鲍勃

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:52:08.660

当你构造 a`NioServerSocketChannelFactory`时，你可以指定你创建的 a`NioBossPool`和 a `NioWorkerPool`。不要使用快捷构造函数，而是使用接受它们的构造函数。然后，您已经拥有对这些对象的引用，您可以在需要时调用它们。

`rebuildSelectors()`如果打电话确实可以解决您的问题，请告诉我们。因为遇到这样的问题并不容易，我们很好奇我们的解决方法是否有助于缓解它。

# hbase - HBase 放置数据不起作用

> ID：15074993
> 
> 赞同：-1
> 
> 时间：2013-02-25T19:35:47.687
> 
> 标签：hbase

使用以下方案在表中添加数据（通过 hbase shell）时出现以下问题

```
create 'student','info','vorl' 
```

添加以下语句不起作用

```
put 'student','student_1234','info:name','Mustermann','vorl:1','Datenbanksysteme' 
```

我做错了什么错误在哪里，2列但家庭生成正确曾经感谢您的反馈

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T20:23:53.470

你应该清楚地解释你*想要*做什么，什么不起作用，正如 Matt Ball 的评论中提到的那样。

我假设您想在表 'student' 中创建一行 'student_1234' 并在列 'name' 中添加值 'Mustermann'（它本身在列族 'info' 中）以及值 'Datenbanksysteme'列“1”（本身在列族“vorl”中）

根据 put 命令的帮助：

```
To put a cell value into table 't1' at
row 'r1' under column 'c1' marked with the time 'ts1', do:

hbase> put 't1', 'r1', 'c1', 'value', ts1 
```

因此，您应该键入以下语句以实现上述结果

```
hbase(main):004:0> put 'student', 'student_1234', 'info:name','Mustermann'
0 row(s) in 0.1340 seconds

hbase(main):005:0> put 'student', 'student_1234', 'vorl:1','Datenbanksysteme'
0 row(s) in 0.0330 seconds

hbase(main):006:0> scan 'student'
ROW                                      COLUMN+CELL                                                                                                         
student_1234                            column=info:name, timestamp=1361823735604, value=Mustermann                                                         
student_1234                            column=vorl:1, timestamp=1361823752261, value=Datenbanksysteme                                                      
 1 row(s) in 0.0610 seconds 
```

# php - 搜索后PHP发布数据

> ID：15074996
> 
> 赞同：0
> 
> 时间：2013-02-25T19:35:56.483
> 
> 标签：php, search-engine, postdata

我制作了一个在类别中搜索的脚本（在一些帮助下）。示例：我们有下一个类别：PC 游戏、电影和音乐。X 用户正在 PCgames 类别中搜索 Y 游戏。在搜索脚本大多数发布后，必须显示所有结果，但脚本不显示结果。一些帮助？这是在类别中搜索的 php 脚本

```
 <?php
//define each directory here, the index starts with 0 == all and so on.
$categorydir = array('/Category/All/', '/Category/PCGames/', '/Category/Console/', '/Category/Movies/', '/Category/Music/', '/Category/XXX/', '/Category/Windows/', '/Category/Linux/', '/Category/Software/', '/Category/Documents/');
//if option selected and its valid number
if(isset($_POST['category']))
 if(ctype_digit($_POST['category']) && isset($categorydir[$_POST['category']]))
if(array_key_exists($_POST['category'], $categorydir) && is_dir($categorydir[$_POST['category']])){
   $handle = opendir($categorydir[$_POST['category']]);
 }else{
   echo 'target directory not found';
 }
else{
 //please enter an option
}
?> 
```

# javascript - angularJS中的路由重定向

> ID：15074997
> 
> 赞同：0
> 
> 时间：2013-02-25T19:36:06.437
> 
> 标签：javascript, angularjs

所以我有了通常的路由，但现在我想问我是否可以重定向到不同的页面，但在此之前我想调用一个函数。

这就是我到目前为止所拥有的。但它不能正常工作。

```
when('/person/remove/:Id', {
    resolve:  {
        delay: function ($q, $route, person) {
            var currentIndex = $route.current.params.Id;
            var brochure = person.get(currentIndex);
            person.remove(brochure);
        }
     },
     redirectTo: '/person'
}) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T20:15:30.310

你确定你应该为此使用路线吗？我从您的示例中得知，删除 url 不应该显示任何内容，它应该只调用服务器然后重定向？如果是这种情况，那么您不应该使用 url 来删除记录。在您的 GUI 中单击将触发服务以在后台删除记录，并在完成后重定向。

因此，与其从 /person/123 转到 /person/123/remove 再到 /person，不如从 /person/123 转到 /person。删除是一项操作，不应在您的应用程序中由它自己的 URL 表示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T19:52:55.160

好吧，如果你有这样的事情......：

```
when('/person/remove/:Id', {
  resolve:  {
    delay: function ($q, $route, person, $location) {
      var currentIndex = $route.current.params.Id;
      var brochure = person.get(currentIndex);
      person.remove(brochure)
         .then(function(){ $location.path('/person'); });
    }
   }
}) 
```

...它会起作用，但它很臭而且不是“角度方式”。我的意思是，你可能不应该使用角度路线为你做这种事情。